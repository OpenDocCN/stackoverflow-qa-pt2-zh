# StackOverflow 问答 12527000-12527999

# android - 获取视图的布局信息

> ID：12527000
> 
> 赞同：0
> 
> 时间：2012-09-21T08:37:48.480
> 
> 标签：android

我有一个列表视图，它对不同的行使用不同的布局表。每张纸上都有不同的变量。所以，当我想为我的列表实现点击监听器时，我需要知道我点击的是哪种类型的行，以便我可以尝试访问正确的值。例如：

```
 list.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view,
        int position, long id) {

                   //do this for layout A
                   //......

                   // do that for layout B
                   //......

                   }
}); 
```

如何访问布局信息和相应的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:40:54.590

确保您的活动中有一个变量，您在其中保存了填充适配器的数据。

然后，根据`position`变量，您将能够获得被点击的确切行。然后根据行，您将能够弄清楚它是什么类型的行，对吗？:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:41:06.880

您可以使用以下方法：自定义适配器的 public abstract int getItemViewType (int position)。

# c# - 使用 ANTLR 用 C# 解析 C++

> ID：12527004
> 
> 赞同：2
> 
> 时间：2012-09-21T08:38:11.507
> 
> 标签：c#, c++, parsing, antlr

如果可能的话，我正在尝试使用 ANTLR 从我的 C# 代码库中获取 C++ AST。

现在，基本工作流程对我来说似乎很清楚：使用 ANTLRWorks 生成 .cs 词法分析器和解析器，将它们和 ANTLR 引用添加到 C# 项目，为其提供 C++ 源代码，使用生成的数据结构。

但是，我已经在第二步失败了。[我从http://www.antlr.org/grammar/list](http://www.antlr.org/grammar/list)下载了 C++ 语法（我尝试了 Aurelian Melinte 的“C++ 语法”和 Ramin Zaghi 的“ANTLR 3.2 的 C++ 语法和代码跟踪器”）并为C# 通过设置“语言 = CSharp3;” 在语法的选项中。但是，我无法编译包含解析器和词法分析器文件的 C# 项目。

一个问题是我不知道这是我使用的语法问题还是可用版本的问题......有很多不同版本的 ANTLR、C# 运行时和 C# 目标试图尝试每一种组合似乎是一项相当无望的任务。

但是，当前的组合似乎工作正常，一个小的示例语法只出现一个错误（c# lexer 中的“HIDDEN”需要更改为“Hidden”，就是这样），但 C++ 解析器/词法分析器仍然给了我很多编译器错误，主要是处理预处理器指令和数组声明。

有没有人设法用 ANTLR 生成的 C# 文件解析 C++？有谁知道这应该如何工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:59:14.240

问题在于两种语法中都嵌入了代码，并且该代码是用 C++ 编写的。嵌入式代码在复杂的语法中很常见，所以需要在 C# 中找到解析 C++ 的语法，而不是仅仅解析 C++。附带说明一下，如果您能够找到在 Java 中解析 C++ 的工具，则可以使用[IKVM](http://www.ikvm.net/)从 C# 中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T10:03:20.970

我见过的唯一的 C++ ANTLR 语法被它的作者抛弃，因为它不完整，他只是在尝试 C++98 (YMMV)。C++11（是的，C++14）就在这里，而且要复杂得多。构建一个生产 C++*真的*很难，除非你能得到一个已经过火测试的，否则它可能不适用于真实的代码。

我建议您使用 Clang、EDG C++ 前端或我们的 DMS Software Reengineering Toolkit，它们都具有强大的 C++ 解析器。如果您想出于某种目的操作已解析的 C++，您将需要比“单纯”解析器更多的机器。

# c - 使用 fwrite 和 fread 保存和检索示例 malloc'd 数据库

> ID：12527007
> 
> 赞同：0
> 
> 时间：2012-09-21T08:38:16.663
> 
> 标签：c, malloc, fwrite, fread

```
gcc (GCC) 4.7.0
c89 
```

你好，

我试图使用 fwrite 将行数据库保存到文件 (db.dat) 以写入并使用 fread 检索它。但是，当我用 fread 检索它时，数据是空的。

我不确定在获取数据之前是否应该分配一些内存。我在我的例子中尝试过

我没有在这里显示可用内存，因为这只是代码片段。

非常感谢您的任何建议，

```
This is my structure of the database:
struct address {
    int id;
    int set;
    char *name;
    char *email;
};

struct database {
    struct address **rows;
    size_t data_size;
    size_t max_size;
};

struct connection {
    FILE *fp;
    struct database *db;
}; 
```

数据库打开：

```
struct connection* database_open(const char *filename, char mode)
{
    struct connection *conn = NULL;

    conn = malloc(sizeof(struct connection));

    conn->db = malloc(sizeof(struct database));
    if(conn->db == NULL) {
        log_exit("Memory error allocating database", conn);
    }

    if(conn == NULL) {
        log_exit("Memory error allocating connection", conn);
    }

    printf("Create a new database\n");
    conn->fp = fopen(filename, "w");

    if(conn->fp == NULL) {
        log_exit("Failed to open file", conn);
    }

    return conn;
} 
```

创建数据库：

```
void database_create(struct connection *conn, int _max_size, int _data_size)
{
    int i = 0;
    struct address *db_row = NULL;

    /* Set the size of the database by assigning the max number of database rows */
    conn->db->max_size = _max_size;
    conn->db->data_size = _data_size;

    /* Allocate memory for rows and size */
    conn->db->rows = malloc(sizeof(struct address) * _max_size);
    if(!conn->db->rows) {
        log_exit("Memory error alocating rows", conn);
    }

    for(i = 0; i < _max_size; i++) {
        db_row = malloc(sizeof(struct address));

        db_row->id = i;
        db_row->set = 0;
        db_row->name = malloc(_data_size);
        db_row->email = malloc(_data_size);

        /* Add the row to the database */
        conn->db->rows[i] = db_row;
    }
} 
```

编写数据库

```
void database_write(struct connection *conn)
{
    rewind(conn->fp);

    if(fwrite(conn->db, sizeof(struct database), 1, conn->fp) != 1) {
        log_exit("Failed to write to database.", conn);
    }

    if(fflush(conn->fp) != 0) 
    {
        log_exit("Cannot flush database.", conn);
    }
} 
```

然后我打开 r+ 的数据库并使用 fread。但是，我在 id 和 set 变量中设置的数据是空的。

```
void database_load(struct connection *conn)
{
    /* Clear any errors from file pointer */
    clearerr(conn->fp);

    /* I have had to hack this just so that I can get the
       memory allocated before filling the structure not sure if this is the best way */
    conn->db->rows = malloc(sizeof(struct address) * 1); /* This would be set to how many rows I have - just experimenting with just one */
    conn->db->rows[0] = malloc(sizeof(struct address));
    conn->db->rows[0]->name = malloc(20);
    conn->db->rows[0]->email = malloc(20);

    if(fread(conn->db, sizeof(struct database), 1, conn->fp) != 1) {
        if(feof(conn->fp) != 0) {
            log_exit("Database end of file", conn);
        }

        if(ferror(conn->fp) != 0) {
            log_exit("Database cannot open", conn);
        }
    }    
} 
```

==== 编辑 ===

```
int main(int argc, char **argv)
{
    char *filename = NULL;
    char action = 0;
    int id = 0;
    int rows = 0;
    int size = 0;
    struct connection *conn = NULL;

    if(argc < 3) {
        log_exit("USAGE: ex17 <dbfile> <action> [ action params ]", conn);
    }

    filename = argv[1];
    action = argv[2][0];
    rows = atoi(argv[3]);
    size = atoi(argv[4]);

    conn = database_open(filename, action);

    if(argc > 3) {
        id = atoi(argv[3]);
    }

    switch(action) {
    case 'c':
        database_create(conn, rows, size);
        database_write(conn);
        break;

    case 's':
        if(argc != 6) {
            log_exit("Need id, name, email to set", conn);
        }

        database_set(conn, id, argv[4], argv[5]);
        database_write(conn);
        break;

    default:
        log_exit("Invalid action, only: c = create, g = get, d = del, l = list", conn);
    }

    database_close(conn);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:42:48.577

看到你的`rows`是一个双指针，你需要用 初始化第一个指针`sizeof(pointer*)`，这个：

```
conn->db->rows = malloc(sizeof(struct address) * 1); 
```

应该：

```
conn->db->rows = malloc(sizeof(struct address*));  //notice how struct address becomes struct address* 
```

与此相同：

```
conn->db->rows = malloc(sizeof(struct address) * _max_size); 
```

应该：

```
 conn->db->rows = malloc(sizeof(struct address*) * _max_size); 
```

# java - Gwt中不兼容的RemoteService异常？

> ID：12527016
> 
> 赞同：-1
> 
> 时间：2012-09-21T08:39:08.043
> 
> 标签：java, gwt, rpc, smartgwt

在启动 Smart Gwt 组件期间，出现以下错误

```
com.google.gwt.user.client.rpc.IncompatibleRemoteServiceException: Invalid type      signature for 
```

你能告诉我为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:05:59.197

尝试清除所有已编译的类文件。我怀疑您更改了某些内容，并且以前编译的类不再兼容。

此外，如果您在 src/main/webapp 中有 GWT 编译器输出，我认为您可能会再次看到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:09:22.750

你能提供一些代码，即接口定义和你调用RPC方法的地方吗？

查看此异常的 API 参考，可能所描述的原因与您的情况相匹配：http: [//google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/user/client/rpc /IncompatibleRemoteServiceException.html](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/user/client/rpc/IncompatibleRemoteServiceException.html)

你对同步接口中的@RemoteServiceServletPath注解做了改动吗？我曾经遇到过不更改 web.xml 文件中相应条目的问题。

# php - 无法使用 php 连接到 mongodb 数据库用户

> ID：12527017
> 
> 赞同：4
> 
> 时间：2012-09-21T08:39:09.360
> 
> 标签：php, mongodb

我的服务器上有一个正在运行的 mongod `auth=true`。

如果我登录到我的管理员用户（来自管理员数据库），则获取数据没有问题。

```
<?php
$connection = new Mongo("mongodb://admin:adminpass@127.0.0.1");

$db = $connection->selectDB( "mydb" );
$collection = $db->selectCollection( "user" );
var_dump($collection->findOne());
?> 
```

但是如果我将第一行替换为

```
$connection = new Mongo("mongodb://mydbadmin:dbadminpass@127.0.0.1:27017"); 
```

它无法连接并出现如下错误：

```
Fatal error: Uncaught exception 'MongoConnectionException' with message 'Couldn't authenticate with database admin: username [mydbadmin]' in ..... 
```

所以问题是`new Mongo()`尝试将我的用户连接到管理数据库而不是“mydb”数据库。如何选择要连接的数据库？

**编辑 ：**

根据[http://php.net/manual/fr/mongo.construct.php](http://php.net/manual/fr/mongo.construct.php)
我试过这个

```
$login = array("username" => "mydbadmin",
               "password" => "dbadminpass",
               "db" => "mydb",
               "connect" => true
);

$connection = new Mongo("mongodb://localhost", $login); 
```

但

```
Couldn't authenticate with database mydb: username [mydbadmin]' in ..... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:54:01.440

好吧，如果您没有在构造函数中指定 db，它`admin`默认使用数据库（如[`Mongo::__construct`](http://php.net/manual/en/mongo.construct.php)-reference 中所述）。尝试以下操作：

```
$connection = new Mongo("mongodb://admin:adminpass@127.0.0.1/mydb"); 
```

注意`/mydb`主机部分之后，它让 PHP-api 连接到所需的数据库。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-07-16T12:02:15.097

检查你的 php 驱动程序版本和 mongod 版本，两个版本必须兼容。例如：对于我的 ..我在 mlab.com 中使用 php 5.3(wamp) 和 mongod 3.0 ..我的 dll 版本是 php_mongo-1.6.6-5.3- ts-vc9-x86

对我有好处

有关 mongo 驱动程序的详细信息，请参阅此站点

请参阅以下站点 [https://docs.mongodb.com/ecosystem/drivers/php/](https://docs.mongodb.com/ecosystem/drivers/php/)

请参阅此站点以下载 mongod 驱动程序 [https://pecl.php.net/package/mongo/1.6.6/windows](https://pecl.php.net/package/mongo/1.6.6/windows)

谢谢...sureshapn.m@gmail.com

# sql - rank() 函数附近的语法错误

> ID：12527018
> 
> 赞同：-1
> 
> 时间：2012-09-21T08:39:09.787
> 
> 标签：sql, postgresql, syntax-error, window-functions

我写了一个需要重写的 SQL 查询。基本上，它做了这样的事情：

```
select log_number, 
    code_id, 
    code_name, 
    ... 
    buyer_id,
    ...
    rank() over (
        partition by code_id, buyer_id 
        order by (date_trunc('second',cdr.dateconso) - date_trunc('second',log.datecrea)) asc
        ) as ranking,
from ...
join ... on ...
left join ... on ...
join ...
where ... 
```

它与 PostgreSQL 的最新版本完美配合。

但是，以下指令：

```
rank() over (
    partition by code.blg_promocode_keyid, cdr.tph_wp_account_buyer_keyid 
    order by (date_trunc('second',cdr.dateconso) - date_trunc('second',log.datecrea)) asc
    ) as ranking, 
```

...使用当前安装的 PostgreSQL 版本生成语法错误，我必须找到绕过它的解决方案，但我不知道。

> 错误：查询失败：错误：“over”处或附近的语法错误第 21 行：rank() over (partition by ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:34:32.950

### 这可能是微不足道的..

```
select log_number,
   ...
   rank() over (
        partition by code_id, buyer_id 
        order by (date_trunc('second',cdr.dateconso)
                - date_trunc('second',log.datecrea))
        ) as ranking**~~,~~**
from ... 
```

..如果您实际上在最后一项之后有一个**逗号**`SELECT`（您不应该这样做）。

### .. 或不

正如稍后的评论中所阐明的，目标是在没有窗口函数**的旧版本 PostgreSQL 中进行****模拟- 版本 8.2 或更早版本。[`rank()`](http://www.postgresql.org/docs/current/interactive/functions-window.html#FUNCTIONS-WINDOW-TABLE)**

您*真正*应该做的是升级到具有窗口函数的更新版本（PostgreSQL 8.4 或更高版本）。[PostgreSQL 8.2 已于 2011 年 12 月终止](http://www.postgresql.org/support/versioning/)。

除此之外，您可以在 PostgreSQL 8.2`rank()`中借助*临时序列*、*临时表*、一些*子查询*和*聚合函数进行模拟。*但这并不漂亮：

**测试设置**（从您的示例中简化）

```
CREATE TEMP TABLE t(code_id int, buyer_id int, the_date date);
INSERT INTO t  VALUES
 (1, 1, '2012-08-01')
,(1, 1, '2012-08-01')
,(1, 1, '2012-08-01')
,(1, 1, '2012-08-02')
,(1, 1, '2012-08-03')
,(1, 1, '2012-08-04')
,(2, 3, '2012-09-01')
,(2, 3, '2012-09-02')
,(2, 3, '2012-09-02')
,(2, 3, '2012-09-02')
,(2, 3, '2012-09-04')
,(2, 3, '2012-09-06'); 
```

我使用*临时表*多次重用结果。在现代 PostgreSQL 中，您将改用 CTE。*临时序列*充当与相关
的穷人的替代品。要按您想要的所有列获取基本行号顺序-按该顺序：*`row_number()`[`nextval()`](http://www.postgresql.org/docs/current/interactive/functions-sequence.html)`PARTITION BY``ORDER BY``rank()`*

 *```
CREATE TEMP SEQUENCE t_seq;  -- once per session ..
-- SELECT setval('t_seq', 1, FALSE); --  .. or reset for repeated use

-- DROP TABLE tmp; 
CREATE TEMP TABLE tmp AS     -- once per session or drop first
SELECT code_id
      ,buyer_id
      ,the_date
      ,nextval('t_seq') AS rownum
       -- rank() included to compare results in modern version
       -- remove this line in old version:
      ,rank() OVER (PARTITION BY code_id, buyer_id ORDER BY the_date) AS rnk
FROM   t
ORDER  BY code_id, buyer_id, the_date; 
```

你也可以编写一个像[Depesz 在这里演示](http://www.depesz.com/2007/08/17/rownum-anyone-cumulative-sum-in-one-query/)`C`的语言函数......

现在，获取`rownum`每个对等组的最小值（子查询`peer`）并减去`rownum`每个组的最小值（子查询`grp`）以获得实际的行号：

```
SELECT t.*, peer.rn - grp.rn AS rnk_8_2
FROM   tmp t
JOIN (
   SELECT code_id, buyer_id, min(rownum) -1 AS rn
   FROM   tmp
   GROUP  BY code_id, buyer_id
   ) grp USING (code_id, buyer_id)
JOIN (
   SELECT code_id, buyer_id, the_date, min(rownum) AS rn
   FROM   tmp
   GROUP  BY code_id, buyer_id, the_date
   ) peer USING (code_id, buyer_id, the_date)
ORDER BY code_id, buyer_id, the_date; 
```

瞧。`rnk_8_2`匹配`rnk`。

清理（​​或让对象在会话结束时被丢弃）：

```
DROP SEQUENCE t_seq;
DROP TABLE t, tmp; 
```

请注意，您必须为每个会话/执行创建/重置/重新创建临时对象。
在 PostgreSQL 9.1 中测试，但应该在 8.2 中工作。*

# php - 如何在 symfony 中重命名包？

> ID：12527019
> 
> 赞同：11
> 
> 时间：2012-09-21T08:39:10.717
> 
> 标签：php, symfony, bundle, rename

我的捆绑包位于，捆绑包`src/Cinergy/Bundle/ComponentBundle/CinergyComponentBundle.php`的逻辑名称是`'CinergyComponentBundle'`.

由于我没有遵守公司的命名约定，我必须更改捆绑包的逻辑名称。假设我必须将其重命名为`'XXXCinergyComponentBundle'`

我需要更改哪些文件？

我尝试将`CinergyComponentBundle.php`文件和包含类重命名为`XXXCinergyComponentBundle.php`. 我还更改了 AppKernel 中的引用。

不幸的是，这不起作用。当我尝试清除缓存时，我收到以下错误消息：

```
[Symfony\Component\DependencyInjection\Exception\ServiceNotFoundException]                                   
The service "cinergy.people.direct.php" has a dependency on a non-existent service "cinergy.work.registry". 
```

这两个服务确实属于具有新名称的捆绑包。这使我得出结论，我在重命名过程中遗漏了一些东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T09:05:43.410

我自己刚刚完成了对捆绑包的重命名，结果与您几分钟前所做的完全相同。到目前为止，我已经使用了我的编辑器替换功能。事实证明，有些文件需要格外小心，它们位于此处（假设您的旧 Bundle 名称是 AcmeOldBundle，新名称将是 AcmeNewBundle）：

1.  Acme\OldBundle\OldBundle.php -> NewBundle.php
2.  Acme\OldBundle\DependencyInjection\AcmeOldExtension.php -> AcmeNewExtension.php

不要忘记更新文件中的类名。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-12-30T10:31:56.173

当前的答案确实解释了如何重命名捆绑包，但它们遗漏了一些事情：

1.  重命名捆绑包`/app/AppKernel.php`

    从：

    ```
    $bundles = [
        // ...
        new Acme\OldBundle\AcmeOldBundle(),
    ]; 
    ```

    至：

    ```
    $bundles = [
        // ...
        new Acme\NewBundle\AcmeNewBundle(),
    ]; 
    ```

2.  重命名文件和文件夹

    您需要重命名包含您的代码的文件和文件夹：

    ```
    src/Acme/OldBundle -> src/Acme/NewBundle
    src/Acme/OldBundle/OldBundle.php -> src/Acme/NewBundle/NewBundle.php

    # If present
    src/Acme/OldBundle/DependencyInjection/AcmeOldExtension.php -> src/Acme/NewBundle/DependencyInjection/AcmeNewExtension.php 
    ```

3.  命名空间

    这可能会忘记一些文件并在您的包中搜索每个匹配项。最好的办法是做一个查找替换：

    ```
    # find -> replace
    acme_old -> acme_new
    Acme\OldBundle\ -> Acme\NewBundle
    AcmeOld -> AcmeNew
    Acme:Old -> Acme:New
    Acme:OldBundle -> Acme:NewBundle 
    ```

    请务必检查包中的所有名称空间、类名和配置文件。

4.  全局配置文件

    在其中搜索任何出现的旧捆绑包名称`app/config/`并将其替换为新捆绑包名称。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T08:58:43.030

您需要更新每个文件中的整个命名空间。

您正在使用`namespace Cynergy\ComponentBundle\Something;`，但您现在正在使用`namespace XXXCynergy\ComponentBundle\Something;`

不要忘记更新您的`services.(xml|yml)`.

# c - 未初始化的 DWORD 变量给出随机值？

> ID：12527023
> 
> 赞同：1
> 
> 时间：2012-09-21T08:39:37.793
> 
> 标签：c, variables

> **可能重复：**
> [未初始化的值正在初始化？](https://stackoverflow.com/questions/1225788/uninitialized-values-being-initialized)

```
void Encrypt( FileContent *pFile )
{
    /* Get the key total ascii value */
    DWORD asciiKeyValue;

    for (DWORD i=0; i < pFile->keyLength; i++)
    {
        asciiKeyValue += pFile->encKey[i];
    }

    _tprintf(_T("[*]DEBUG The encKey ascii value is: %ld\n"), asciiKeyValue);
} 
```

我被淘汰了`430`when `DWORD asciiKeyValue`，但一次`DWORD asciiKeyValue = 0`是`230`应该的。

有人对此有解释吗？当`asciiKeyValue`变量没有分配显式值时，它是否会得到一个随机值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T08:41:15.600

它不会“变得”随机。当你声明你的`DWORD`它之前在它的地址内存中有任何东西。除非您将内存初始化为某个值（例如您的 0），否则不会*清理内存。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T08:41:18.337

你永远不会初始化你只会增加它的值。因此，它最初将具有最后写入它的任何值。

如果你有：

```
DWORD asciiKeyValue = 0; // Or any other value 
```

然后你会得到一致的结果。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-21T08:44:53.303

您不初始化`asciiKeyValue`. 值不会像在某些其他语言中那样隐式初始化为 0。您需要明确设置起始值。我希望您的代码是：

```
DWORD asciiKeyValue = 0; 
```

这将产生可预测的结果。

这就像你从商店买了一个新的相框，你正在给它添加油漆。最后你可能会问“为什么会有一对幸福夫妻的毁容图？？我没有画那个！” 解决方案是用空白画布替换默认的随机照片。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T08:45:24.170

听说过**变量的初始化**。那么你现在有:-)

```
DWORD asciiKeyValue = 0 ; 
```

将解决您的问题。

# c - fgets()：控制台确定，管道失败

> ID：12527027
> 
> 赞同：4
> 
> 时间：2012-09-21T08:39:55.540
> 
> 标签：c, linux, io, pipe

执行以下 C 代码

```
#include <stdio.h>
int main(int argc, char **argv) {
  char stdinput[10];
  while (1) {
    fgets(stdinput, 10, stdin);
    fputs(stdinput, stdout);
  }
} 
```

产生：

**通过控制台：**

```
./a.out
input
input 
```

然后它等待更多的输入。也就是说，它将 stdin 回显到 stdout，类似于`cat`.

**通过管道：**

```
echo input | ./a.out
input
input
input
[...] 
```

启动后，它会自行淹没控制台，无需交互。

这个示例程序正是我用于测试的程序；这不是削减。我希望这两个测试的行为方式相同。发生了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T08:43:27.673

一旦`EOF`达到，`fgets`立即返回 NULL 而不等待输入（或修改缓冲区）。因此，它将无限循环。在您的管道情况下，`echo`一旦写入，将关闭管道`"input\n"`，导致 EOF。

`fgets`将您的呼叫更改为

```
if(fgets(stdinput, 10, stdin) == NULL)
    break; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-21T08:49:21.023

您可以通过`fgets`调用替换循环条件，给出：

```
#include <stdio.h>
int main(int argc, char **argv) {
  char stdinput[10];
  while (fgets(stdinput, 10, stdin)) {
    fputs(stdinput, stdout);
  }
} 
```

这将循环直到你得到一个EOF，在这种情况下，`fgets()`就像[@nneonneo 所说](https://stackoverflow.com/a/12527096/294313)的那样返回NULL 。但是在这种情况下，您将不必破坏您的`while()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T00:31:47.880

[**注意**：解决了错误的问题。]

见[http://sweslo17.blogspot.tw/2012/04/c-standard-input-redirection.html](http://sweslo17.blogspot.tw/2012/04/c-standard-input-redirection.html)。

之后`fgets()`，您可以添加以下代码以再次恢复`stdin`以解决管道问题。

```
freopen("/dev/tty","rb",stdin); 
```

# javascript - 仅 Internet Explorer 上的 HTML 问题。它在其他浏览器上运行良好

> ID：12527032
> 
> 赞同：0
> 
> 时间：2012-09-21T08:40:09.407
> 
> 标签：javascript, html, magento, xhtml, xhtml-1.0-strict

在我们的网站上，我们使用带有自定义模板的 magento。并且该网站在所有浏览器中都正确呈现，但结帐过程除外。在 Internet Explorer 中，它看起来很奇怪。我已经使用 Firebug 和 Developer 工具对其进行了分析，但我找不到为什么它在 Internet Explorer 上看起来很奇怪，而在其他地方看起来却很好。

要复制它，只需将一个项目添加到购物车，然后以访客或注册用户的身份继续结帐。

我在这里包含了一个屏幕截图 ![在此处输入图像描述](../Images/bfa686519aedabd79f2aa4c5965bc4aa.png)

我没有包含 HTML，因为它太长而且不允许它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:25:28.463

标记无效，导致 IE 和 Opera 无法理解您的意图。Chrome 和 Firefox 更擅长猜测你想要什么。

当面对这类问题时，首先要看的是标记的有效性。[通过解析W3C Validator上](http://validator.w3.org)*结帐*页面的页面源，可以看到一个非常好的错误指示。

这立即表明了一个问题：

```
Line 150, Column 44: document type does not allow element "li" here; missing one of "ul", "ol" start-tag`

<div class="inner-box"><li> <input name="businessdock" value="1"
                       ^
                       missing a <ul> parent 
```

显示 an`<li>`在没有 parent的情况下使用`<ul>`。我在本地添加了周围`<ul>`和结束`</ul>`标签，页面在 IE 中按预期呈现。

我是否还建议将所有 JavaScript 从页面移出到包含的文件中（如果可能）。该页面非常大，最初很难看！

# thrift - thrift Types 如何与本地 ORM 模型 Types 集成

> ID：12527033
> 
> 赞同：0
> 
> 时间：2012-09-21T08:40:13.730
> 
> 标签：thrift

我是否需要实现一个转换器来将本地 ORM 模型对象转换为 thrift 对象，然后返回给客户端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:26:08.840

除了最简单的情况，您可以将应用程序特定的数据类型直接映射到节俭的 IDL 类型，您需要一些翻译代码。不管怎样，任何分布式应用程序都必须考虑通过网络进行通信而不是仅仅发送域对象。正确的粒度是分布式应用程序最重要的方面之一。

# java - Android中的自定义日历

> ID：12527035
> 
> 赞同：1
> 
> 时间：2012-09-21T08:40:18.270
> 
> 标签：java, android

我创建了一个自定义日历（年初的日期由用户输入）。

例如，如果用户将日期设置为 5 月 13 日，那么他的年份必须设置为 5 月 13 日至 5 月 12 日。现在我需要计算 5 月 13 日与今天日期之间的差异（5 月 13 日至 9 月 24 日之间的持续时间）天数。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:17:55.807

访问以下链接以创建自定义日历

*   [http://smartandroidians.blogspot.in/2010/02/creating-custom-widget-calendar.html](http://smartandroidians.blogspot.in/2010/02/creating-custom-widget-calendar.html)

# pcap - pcap_dispatch 挂起

> ID：12527039
> 
> 赞同：1
> 
> 时间：2012-09-21T08:40:36.120
> 
> 标签：pcap, libpcap, packet-capture, packet-sniffers, winpcap

嗨，我有一个程序，我在其中使用 python 中的 pcap 捕获数据包。

```
filter=some_filter 
promiscuous= True
read_timeout= 50 # msec
self.pcap= pcapy.open_live(self.ifname, self.conf.capture_snaplen, promiscuous, read_timeout)
self.pcap.setfilter(filter) 
```

这是配置，我用我的回调调用调度函数。打印语句用于调试

```
while True:
            print "dispatch is called"
            return_value=self.pcap.dispatch(packet_limit, self.distribute_packet)
            print "return value"
            print return_value 
```

所以我在 2 台不同网络的主机上运行这个系统。Oses 是 freebsd 9.0 版本

其中一个系统运行良好，它真实地编写了我的调试；

```
dispatch is called
return vaue
34,45,55 whatever it is 
```

但另一个系统是；

```
dispatch is called 
```

没事了。所以它挂断了调度功能。它不返回任何内容并挂断。两个系统相同，但它们位于不同的网络上。我试图更改 pcap.openlive 的超时。但这无关紧要。为什么会挂机？

# iphone - 为什么我的数据在 iphone 的 NSMutableArray 中变为零

> ID：12527042
> 
> 赞同：0
> 
> 时间：2012-09-21T08:40:48.100
> 
> 标签：iphone

在我的应用程序中，我使用 for 循环在 NSMutableArray 中添加数据。所有都正确添加，但问题是如果迭代次数增加，数据在特定索引值处变为零。我的代码如下所示：

```
 NSArray * sortedArray =[FilterProjectsArray sortedArrayUsingDescriptors:descriptors];
  NSMutableArray *Array1=[[NSMutableArray alloc]initWithArray:sortedArray];
 [appdelegate.filtersArray addObject:[Array1 mutableCopy]] ;

 for (int i=0; i<[appdelegate.filtersArray count]; i++)
 {
       NSLog(@"object in filtersarray count is %d",[[appdelegate.filtersArray objectAtIndex:i]count]);

 } 
```

为此，我在控制台中得到如下输出：

```
object in filtersarray count is 9

object in filtersarray count is 9
object in filtersarray count is 2

object in filtersarray count is 0
object in filtersarray count is 2
object in filtersarray count is 9

object in filtersarray count is 0
object in filtersarray count is 0
object in filtersarray count is 9
object in filtersarray count is 2

object in filtersarray count is 0
object in filtersarray count is 0
object in filtersarray count is 0
object in filtersarray count is 2
object in filtersarray count is 3

object in filtersarray count is 0
object in filtersarray count is 0
object in filtersarray count is 0
object in filtersarray count is 0
object in filtersarray count is 3 
```

这就是我得到的输出，我不知道它为什么会这样。因此，如果有人对此有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:52:54.620

you dont have to do mutable copy when you are adding the array as an object

```
[appdelegate.filtersArray addObject:Array1] ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:52:29.847

只需执行 addObject:Array1 然后

```
[Array 1 release]; 
```

如果您不使用 ARC。

# php - 在另一个选项卡中打开 iframe 位置

> ID：12527045
> 
> 赞同：1
> 
> 时间：2012-09-21T08:40:59.363
> 
> 标签：php, javascript, jquery, html

是的，我知道你在想什么。问题不在于在新选项卡中打开 iframe 中的链接，这可以通过添加 target="" 属性轻松解决。

但我想做的是：我有一个从表单动态创建的 iframe，它会根据用户的输入加载相应的 url。我想做的是将整个 iframe 加载到另一个选项卡中。

可行吗？

谢谢。干杯!

# wcf - 如何使用 WCF 跟踪，并在同一活动中对来自不同线程的多个跟踪进行分组？

> ID：12527046
> 
> 赞同：1
> 
> 时间：2012-09-21T08:41:02.027
> 
> 标签：wcf, trace

我将 Web 请求跟踪到我的 REST 服务。请求来自不同用户的各种线程，但我希望将方法 getSomeData() 的所有休息时间分组在 TraceViewer 工具中的同一活动下，这样我最终不会得到 100 个活动都包含一个跟踪（正如你可以在下面的第二个和第三个活动中看到）。 ![在此处输入图像描述](../Images/6b5e7c90d40509995b44a9484cf8fe8e.png)

如果我使用诸如

```
ts.TraceEvent(TraceEventType.Information, 1, "http://api.foursquare for {0}, {1}, nrOp={2}", lat, lng, valOp1.Count());
ts.Flush(); 
```

在我的 getSomeData 方法中，如果由 100 个用户调用，我将获得 100 个不同的活动，所有活动都包含 1 个跟踪，这读起来非常令人沮丧。我希望所有的痕迹都包含在一个敏锐度中（如果我可以给它一个名称，例如 getSomeDataTraces）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:30:30.127

May be late for the reply, but the following link really helped me a lot:

[http://dotnetcodecentral.com/Post/311/wcf/trace-log-messages-from-end-to-end-using-wcf-and-a-client](http://dotnetcodecentral.com/Post/311/wcf/trace-log-messages-from-end-to-end-using-wcf-and-a-client)

The crucial part is "propagating" the ActivityID across tiers (through configuration). I am still experimenting the same approach for WCF REST/Data Services (OData), but with no luck (yet!).

# php - PHP 验证不起作用，被表单操作推翻

> ID：12527049
> 
> 赞同：3
> 
> 时间：2012-09-21T08:41:08.270
> 
> 标签：php, javascript, forms, validation

我正在尝试在 quiz.php 上使用我的 PHP 表单验证，但我的代码直接将我带到 result.php 而不检查空字段..

有人能告诉我为什么验证不起作用吗？按下提交按钮时我没有看到任何错误。

```
<?php

require_once("php/db.php");                 /* Database Class */
require_once('php/utils/is_email.php');     /* Email Validation Script */

if(isset($_POST['newcontact'])){
$contact = new Contact();
} else{

//header('Location: result.php');
}

/* Class Contact */
class Contact{

private $db;                        /* the database obj */

//we have to init $errors array, as otherwise form will produce errors on missing array entry
private $errors = array(            /* holds error messages */

'aanhef' => '',
'contactpersoon' => '',
'bedrijfsnaam' => '',
'email' => '',
'telefoon' => '',
'vraag1_antwoorden' => '',
'vraag2_antwoorden' => ''
);

private $num_errors;                /* number of errors in submitted form */

public function __construct(){

$this->db = new DB();
if(isset($_POST['newcontact']))
$this->processNewMessage();
}

public function processNewMessage(){

$aanhef         = $_POST['aanhef'];         
$contactpersoon     = $_POST['contactpersoon'];     
$bedrijfsnaam       = $_POST['bedrijfsnaam'];
$telefoon       = $_POST['telefoon'];
$email          = $_POST['email'];
$vraag1_antwoorden  = $_POST['vraag1_antwoorden'];
$vraag2_antwoorden  = $_POST['vraag2_antwoorden'];

/* Server Side Data Validation */
if(!isset($aanhef)) {
$this->errors['aanhef'] = 'Vul uw aanhef in';
}
if(!isset($contactpersoon)) {
$this->errors['contactpersoon'] = 'Vul uw contactpersoon in';
}
if(!isset($bedrijfsnaam)) {
$this->errors['bedrijfsnaam'] = 'Vul uw bedrijfsnaam in';
}
if(!isset($telefoon)) {
$this->errors['telefoon'] = 'Vul uw telefoon in';
}
if(!isset($vraag1_antwoorden)) {
$this->errors['vraag1_antwoorden'] = 'Selecteer een antwoord a.u.b.';
}

if(!isset($vraag2_antwoorden)) {
$this->errors['vraag2_antwoorden'] = 'Selecteer een antwoord a.u.b.';
}
if(!isset($email)) {
$this->errors['email'] = 'Vul uw e-mail in';
}
/* No errors, insert in db

else*/
if($this->countErrors() == '') {
if(($ret = $this->db->dbNewMessage($aanhef, $contactpersoon, $bedrijfsnaam, $email, $telefoon, $vraag1_antwoorden, $vraag2_antwoorden)) > ''){
//$json = array('result'         => 1);
if(SEND_EMAIL)
$this->sendEmail($aanhef,$contactpersoon,$bedrijfsnaam,$email,$telefoon,$vraag1_antwoorden,$vraag2_antwoorden);
//This is for relocating to successful result page
header('Location: result.php');
} else {   

//This will need special treatment. You have to prepare an errorpage
//for database-related issues.

header("Location: database-error.html");
}
}
}

public function sendEmail($aanhef,$contactpersoon,$bedrijfsnaam,$email,$telefoon,$vraag1_antwoorden,$vraag2_antwoorden){
/* Just format the email text the way you want ... */
$message_body   = "<div style=\"font-size:12px; font-weight:normal;\">Hallo,<br><br>"
."Het volgende bedrijf heeft zich zojuist aangemeld voor de Veiligheids Quiz:</div><br>"
."<table cellpadding=\"1\" cellspacing=\"1\" width=\"550px\"><tr><td style=\"font-size:12px; color:#000000\">Bedrijfsnaam:</td><td style=\"font-size:12px; color:#000000\">".$bedrijfsnaam."</td></tr><tr><td style=\"font-size:12px; color:#000000\">Aanhef:</td><td style=\"font-size:12px; color:#000000\">".$aanhef."</td></tr><tr><td style=\"font-size:12px; color:#000000\">Contactpersoon:</td><td style=\"font-size:12px; color:#000000\">".$contactpersoon."</td></tr><tr><td style=\"font-size:12px; color:#000000\">Telefoonnummer:</td><td style=\"font-size:12px; color:#000000\">".$telefoon."</td></tr><tr><td style=\"font-size:12px; color:#000000\">E-mail:</td><td style=\"font-size:12px; color:#000000\">".$email."</td></tr><tr><td style=\"font-size:12px; color:#000000\">Antwoord vraag 1:</td><td style=\"font-size:12px; color:#000000\">".$vraag1_antwoorden."</td></tr><tr><td style=\"font-size:12px; color:#000000\">Antwoord vraag 2:</td><td style=\"font-size:12px; color:#000000\">".$vraag2_antwoorden."</td></tr></table><br>";

// Geef GELDIGE adressen op
// Een korte benaming voor jouw website

$website_naam = 'Aanmelding Quiz';
// Jouw eigen geldige emailadres
$eigen_emailadres = 'MY MAIL';
// Een geldig emailadres voor errors
$error_emailadres = 'MY MAIL';
// De naam van de verzender
$naam_verzender = ''.$bedrijfsnaam.'';
// Het geldige emailadres van de afzender
$email_verzender = ''.$email.'';
// Een geldig emailadres of helemaal leeg laten
$bcc_emailadres = '';
// HTML mail? True/False
$html = true;

// De headers samenstellen
$headers     = 'From: ' . $website_naam . ' <' . $eigen_emailadres . '>' . PHP_EOL;
$headers    .= 'Reply-To: ' . $naam_verzender . ' <' . $email_verzender . '>' . PHP_EOL;
$headers    .= 'Return-Path: Mail-Error <' . $error_emailadres . '>' . PHP_EOL;
$headers    .= ($bcc_emailadres != '') ? 'Bcc: ' . $bcc_emailadres . PHP_EOL : '';
$headers    .= 'X-Mailer: PHP/' . phpversion() . PHP_EOL;
$headers    .= 'X-Priority: Normal' . PHP_EOL;
$headers    .= ($html) ? 'MIME-Version: 1.0' . PHP_EOL : '';
$headers    .= ($html) ? 'Content-type: text/html; charset=iso-8859-1' . PHP_EOL : '';

mail(EMAIL_TO,MESSAGE_SUBJECT,$message_body,$headers);

}

public function setError($field, $errmsg){
$this->errors[$field]   = $errmsg;
$this->num_errors       = count($this->errors);
}

public function error_value($field){
if(array_key_exists($field,$this->errors))
return $this->errors[$field];
else
return '';
}

public function countErrors(){
return $this->num_errors;
}
};
?>    

<table width="675px" cellpadding="0" cellspacing="0">
<form id="contact_form" method="post" action="">
<label class="label_aanhef" for="aanhef_1"><input name="aanhef" id="aanhef_1" type="radio" value="Dhr." /> Dhr.</label><label class="label_aanhef" for="aanhef_2"><input name="aanhef" id="aanhef_2" type="radio"  value="Mevr." /> Mevr.</label>
<span class="error"><?php echo $contact->error_value['aanhef']; ?></span>

<input id="contactpersoon" name="contactpersoon" maxlength="120" type="text" onFocus="window.scrollTo(0, 0);"/><span class="error"><?php echo $contact->error_value['contactpersoon']; ?></span>
<input id="bedrijfsnaam" name="bedrijfsnaam" maxlength="120" type="text" onFocus="window.scrollTo(0, 0);"/><span class="error"><?php echo $contact->error_value['bedrijfsnaam']; ?></span>
<input id="email" name="email" maxlength="120" type="text" onFocus="window.scrollTo(0, 0);"/><span class="error"><?php echo $contact->error_value['email']; ?></span>
<input id="telefoon" name="telefoon" maxlength="120" type="text" onFocus="window.scrollTo(0, 0);"/><span class="error"><?php echo $contact->error_value['telefoon']; ?></span>

<label class="label_radio" for="vraag1_A"><input name="vraag1_antwoorden" id="vraag1_A" value="A. Dat is helaas fout, het goede antwoord is: C) < 1 Ohm" type="radio" />A) Geen eis</label>
<label class="label_radio" for="vraag1_B"><input name="vraag1_antwoorden" id="vraag1_B" value="B. Dat is helaas fout, het goede antwoord is: C) < 1 Ohm" type="radio"  />B) < 0,1 Ohm</label>
<label class="label_radio" for="vraag1_C"><input name="vraag1_antwoorden" id="vraag1_C" value="C. Gefeliciteerd dat is het goede antwoord." type="radio"  />C) < 1 Ohm</label>
<label class="label_radio" for="vraag1_D"><input name="vraag1_antwoorden" id="vraag1_D" value="D. Dat is helaas fout, het goede antwoord is: C) < 1 Ohm" type="radio" />D) < 10 Ohm</label>
<span id="vraag1_antwoorden" class="foutmelding_quiz">
<?php echo $contact->error_value['vraag1_antwoorden']; ?>
</span>

<label class="label_radio" for="vraag2_A"><input name="vraag2_antwoorden" id="vraag2_A" value="A. Gefeliciteerd dat is het goede antwoord." type="radio" />A) Geen eis</label>
<label class="label_radio" for="vraag2_B"><input name="vraag2_antwoorden" id="vraag2_B" value="B. Dat is helaas fout, het goede antwoord is: A)  Geen eis" type="radio" />B) < 0,1 Ohm</label>
<label class="label_radio" for="vraag2_C"><input name="vraag2_antwoorden" id="vraag2_C" value="C. Dat is helaas fout, het goede antwoord is: A)  Geen eis" type="radio" />C) < 1 Ohm</label>
<label class="label_radio" for="vraag2_D"><input name="vraag2_antwoorden" id="vraag2_D" value="D. Dat is helaas fout, het goede antwoord is: A)  Geen eis" type="radio" />D) < 10 Ohm</label>
<span id="vraag2_antwoorden" class="foutmelding_quiz">
<?php echo $contact->error_value['vraag2_antwoorden']; ?>
</span>
<input class="button submit" type="submit" value="" /><input id="newcontact" name="newcontact" type="hidden" value="1"></input>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:43:26.847

将您的所有内容更改`!isset`为`empty`.

例如：

```
if (empty($aanhef)) {
    $this->errors['aanhef'] = 'Vul uw aanhef in';
} 
```

差异：

*   [http://php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)
*   [http://php.net/manual/en/function.empty.php](http://php.net/manual/en/function.empty.php)

此外，在您`header('Location: ...')`使用后`exit;`。

这里的工作代码：http: [//pastebin.com/fZecwby1](http://pastebin.com/fZecwby1)

# javascript - Windows 8 网页设计

> ID：12527051
> 
> 赞同：0
> 
> 时间：2012-09-21T08:41:09.877
> 
> 标签：javascript, html, css

我正在制作一个 Windows 8 横向滚动样式的网页设计。我需要帮助编写内容在矩形中出现的方式。内容应逐个向下滚动，并在标题之间稍作停顿，以便用户能够查看它并在到达最后一个标题后改变方向。

这里我们的代码：

```
<html>
<head>
<style type="text/css">
body
{
    background-color:blue;
    color:white;
    overflow:hidden;
}
span.start
{
    font-size:280%;
    font-family:helvetica;
}
div.spacer
{
    margin-top:50px;
}
div.spacer-left
{
    margin-left:30px;
}
div.box1
{
    width:400px;
    height:200px;
    display:inline-block;
    margin-left:10px;
    overflow:hidden;
}
div.box2
{
    width:200px;
    height:200px;
    display:inline-block;
    margin-left:10px;
}
#cyan
{
    background-color:cyan;
}
#purple
{
    background-color:purple;
}
#lime
{
    background-color:lime;
}
#orange
{
    background-color:orange;
}
#red
{
    background-color:red;
 }
#yellow
{
    background-color:yellow;
}
div.length
{
    position:fixed;
    width:5000px;
    -moz-transition:all 2s;
    -webkit-transition:all 2s;
}
div.click
{
    font-size:500%;
    text-decoration:none;
    color:white;
    position:absolute;
    margin-left:1300px;
    margin-top:-400px;
}
#length:target
{
    margin-left:-1000px;
}
div.content
{
    position:relative;
    height:500px;
    font-size:200%;
}
</style>
<script type="text/javascript">
var rate = 0;
function scroll() {
    setInterval(function (){
        document.getElementById('content').style.marginTop = rate;
        rate--;
    }, 10);
}
onload=scroll();
</script>
</head>
<body>
<div class="length" id="length">
<div class="spacer-left">
<span class="start">Start</span>
<div class="spacer"></div>
<div class="box1" id="cyan">
<div class="content" id="content">
<h1>Some content</h1>
<h1>Some more content</h1>
<h1>Even more content</h1>
</div>
</div>
<div class="box1" id="purple">
</div>
<div class="box2" id="lime">
</div>
<div class="box2" id="orange">
</div>
<br>
<div class="box2" id="red">
</div>
<div class="box1" id="yellow">
</div>
<div class="box2" id="cyan">
</div>
<div class="box1" id="purple">
</div>
<br>
<div class="box1" id="lime">
</div>
<div class="box2" id="orange">
</div>
<div class="box1" id="yellow">
</div>
<div class="box2" id="red">
</div>
<a href="#length"><div class="click" id="click">
>
</div></a>
</div>
</div>
</body>
</html> 
```

在这段代码中，内容只是滚动，中间没有停顿。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-28T15:22:53.920

如果您将 jQuery 用于动画，它很可能会更容易。我在这里为您提供了一个良好的代码开端：http: [//jsfiddle.net/ou67gr51/1/](http://jsfiddle.net/ou67gr51/1/)

如您所见，我正在褪色而不是滑动。您可以轻松地将其更改为不同的动画。

还有更多工作要做，但我希望这对您有所帮助。

```
$('.box').each(function() {
    var $this = $(this);
    var $content = $('.content', $this);
    var i = -1;
    function showNext() {
        i++;
        if (i == $content.length)
            i = 0;

        $content.eq(i).fadeIn();
    }
    function switchToNext() {
        $content.eq(i).fadeOut(showNext);
    }
    showNext();
    window.setInterval(switchToNext, 2000);
});
```

```
body
{
    background-color:blue;
    color:white;
    overflow:hidden;
}
span.start
{
    font-size:280%;
    font-family:helvetica;
}
div.spacer
{
    margin-top:50px;
}
div.spacer-left
{
    margin-left:30px;
}
div.box1
{
    width:400px;
    height:200px;
    display:inline-block;
    margin-left:10px;
    overflow:hidden;
}
div.box2
{
    width:200px;
    height:200px;
    display:inline-block;
    margin-left:10px;
}
#cyan
{
    background-color:cyan;
}
#purple
{
    background-color:purple;
}
#lime
{
    background-color:lime;
}
#orange
{
    background-color:orange;
}
#red
{
    background-color:red;
 }
#yellow
{
    background-color:yellow;
}
div.length
{
    position:fixed;
    width:5000px;
    -moz-transition:all 2s;
    -webkit-transition:all 2s;
}
div.click
{
    font-size:500%;
    text-decoration:none;
    color:white;
    position:absolute;
    margin-left:1300px;
    margin-top:-400px;
}
#length:target
{
    margin-left:-1000px;
}
div.content
{
    display: none;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="length" id="length">
<div class="spacer-left">
<span class="start">Start</span>
<div class="spacer"></div>
<div class="box" id="cyan">
<div class="content">
<h1>1 Some content</h1>
</div>
    <div class="content">
<h1>2 Some content</h1>
</div>
    <div class="content">
<h1>3 Some content</h1>
</div>
</div>
<div class="box1" id="purple">
</div>
<div class="box2" id="lime">
</div>
<div class="box2" id="orange">
</div>
<br>
<div class="box2" id="red">
</div>
<div class="box1" id="yellow">
</div>
<div class="box2" id="cyan">
</div>
<div class="box1" id="purple">
</div>
<br>
<div class="box1" id="lime">
</div>
<div class="box2" id="orange">
</div>
<div class="box1" id="yellow">
</div>
<div class="box2" id="red">
</div>
<a href="#length"><div class="click" id="click">
>
</div></a>
```

# java - 为int数组赋值时Java中的空指针异常

> ID：12527052
> 
> 赞同：1
> 
> 时间：2012-09-21T08:41:11.070
> 
> 标签：java

当我将值分配给对象中的 int 数组时，我的代码显示空指针异常：

```
public class Cage {
    int Value;  
    String Operator;
    int[] placeHolders;
}

Cage o = new Cage();                
o.Value = Integer.parseInt(strSplit[0]);
o.Operator = strSplit[1];               
for(int i=2;i<strSplit.length;i++) {
    o.placeHolders[i] = Integer.parseInt(strSplit[i]);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T08:44:47.890

您应该为您的 . 创建一个`int`数组`placeHolders`，它只是一个声明，而不是现在的定义。

```
o.placeHolders = new int[strSplit.length]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T08:57:48.080

我想您希望必须在第一个索引中`placeHolders`保留没有值的值。`null`

```
o.placeHolders = new int[strSplit.length - 2];
for (int i = 0; i < strSplit.length - 2; i++) {
    o.placeHolders[i] = Integer.parseInt(strSplit[i + 2]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T08:44:05.503

您应该在使用它之前实例化 int[] 对象：

```
int[] placeHolders = new int[100]; 
```

# html - > 在浏览器中显示为 > 而不是 >

> ID：12527058
> 
> 赞同：1
> 
> 时间：2012-09-21T08:41:30.723
> 
> 标签：html, asp-classic

我正在尝试将包含 XML 的字符串转换为可以在浏览器中显示的内容。为此，我将字符串传递给以下函数：

```
Function HTMLDecode(sText)
    Dim regEx
    Dim matches
    Dim match
    sText = Replace(sText, Chr(34), "&quot;")
    sText = Replace(sText, Chr(60), "&lt;")
    sText = Replace(sText, Chr(62), "&gt;")
    sText = Replace(sText, Chr(38), "&amp;")
    sText = Replace(sText, Chr(32), "&nbsp;")

    Set regEx= New RegExp

    With regEx
     .Pattern = "&#(\d+);" 'Match html unicode escapes
     .Global = True
    End With

    Set matches = regEx.Execute(sText)

    'Iterate over matches
    For Each match in matches
        'For each unicode match, replace the whole match, with the ChrW of the digits.

        sText = Replace(sText, match.Value, ChrW(match.SubMatches(0)))
    Next

    HTMLDecode = sText
End Function 
```

但是，当我打电话时，如下所示：

```
response.write HTMLDecode(strResponse) 
```

转换发生了，但这是我在浏览器中看到的：

```
 &lt;?xml version=&quot;1.0&quot;? &gt; 
```

而不是

```
<xml version="1.0"? > 
```

发生在 IE、FF 和 Chrome 中，所以我想这一定是我的代码 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:40:08.473

尝试使用

```
Server.HTMLEncode(strResponse) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T08:43:49.653

尝试使用[HttpUtility.HtmlDecode 方法（字符串）](http://msdn.microsoft.com/en-us/library/aa332854%28v=vs.71%29.aspx)

# excel - 在excel中复制粘贴操作时禁用格式

> ID：12527059
> 
> 赞同：2
> 
> 时间：2012-09-21T08:41:36.560
> 
> 标签：excel, vba

我使用以下代码在单元格复制粘贴操作时禁用格式化-

```
Private Sub Worksheet_Change(ByVal Target As Range)
    With Application
        .EnableEvents = False
        myValue = Target.Formula
        .Undo
        Target.Formula = myValue
        .EnableEvents = True
    End With
End If
    Application.CutCopyMode = False
End Sub 
```

代码工作完美，但它在工作表中插入了许多其他问题。

1.  无法使用撤消/重做功能
2.  无法通过单击更改单元格的焦点。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:07:25.760

本质上，您想禁止标准*粘贴*，并可能用*粘贴特殊 / 值替换它*

您可以捕获粘贴功能并分配一条消息，告诉用户使用选择性粘贴/值，例如

```
....
' place this in any suitable event trigger like 
Application.CommandBars("Edit").Controls("Paste").OnAction = "TrappedPaste"
....

Sub TrappedPaste()
    MsgBox "Your Paste is performed as PasteSpecialValues", vbOKOnly, "Paste"

    ' ok, now silently do a PasteSpecial/Values
    On Error GoTo TryExcel
    ' try to paste text
    ActiveSheet.PasteSpecial Format:="Text", Link:=False, DisplayAsIcon:=False
    Exit Sub
TryExcel:
    On Error GoTo DoesntWork
     Selection.PasteSpecial xlPasteValues
     Exit Sub
DoesntWork:
    MsgBox "Sorry - wrong format for pasting", vbExclamation + vbOKOnly, "Paste Problem"
 End Sub 
```

小心...这不适用于所有语言，因此对于国际应用程序，我们需要更加微妙

```
If ExistControl("Edit", 22) Then Application.CommandBars("Edit").FindControl(ID:=22).OnAction = "TrappedPaste" 
```

并且应用程序中有更多地方可以让用户获得“粘​​贴”，您需要将它们全部捕获。

如果您喜欢这种方法，我可以进一步详细说明。

# c# - 如何修复错误：“检测到无法访问的代码”

> ID：12527060
> 
> 赞同：4
> 
> 时间：2012-09-21T08:41:47.097
> 
> 标签：c#, string

```
public partial class KalenderLeeftijd : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{

}
protected void calBirthDate_SelectionChanged(object sender, EventArgs e)
{

}
private string GetAnswer()
{
    DateTime birthday = calBirthDate.SelectedDate;
    TimeSpan difference = DateTime.Now.Date - birthday;
    int leapYears = CountLeapYears(birthday);

    int days = (int)difference.TotalDays - leapYears;
    int hours = (int)difference.TotalHours - leapYears * 24;

    int years = days / 365;

    String answer = String.Format("Age: {0} years", years);
    answer += Environment.NewLine;
    answer += String.Format("Days: {0}*365+{1} = {2}", years, days - years * 365, days);
    answer += Environment.NewLine;
    answer += String.Format("Days Hours: {0}*24 = {1}", hours / 24, hours);
    return answer;
}

private int CountLeapYears(DateTime startDate)
{
    int count = 0;
    for (int year = startDate.Year; year <= DateTime.Now.Year; year++)
    {
        if (DateTime.IsLeapYear(year))
        {
            DateTime february29 = new DateTime(year, 2, 29);
            if (february29 >= startDate && february29 <= DateTime.Now.Date)
            {
                count++;
            }
        }
    }
    return count;
    String answer = GetAnswer();
    Response.Write(lblAntwoord); 
}
} 
```

> 为什么我会收到错误消息：“检测到无法访问的代码”？- 错误显示在以下行 -`String answer = GetAnswer();`

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-21T08:42:53.750

这只是因为您的代码位于 return 语句之后。

> return 语句**终止**它出现的方法的执行，并将控制权返回给调用方法。它还可以返回一个可选值。如果方法是 void 类型，return 语句可以省略。
> 
> 如果 return 语句在 try 块内，则 finally 块（如果存在）将在控制返回调用方法之前执行。

[http://msdn.microsoft.com/en-us/library/1h3swy84%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/1h3swy84%28v=vs.100%29.aspx)

解决方案（明显）：

将无法访问的代码移到 return 语句之前。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-21T08:43:47.133

无法访问的代码是编译器*警告*，而不是错误。你有三个选择：

*   删除无法访问的代码。
*   [停止将警告视为项目属性中的错误。](https://stackoverflow.com/questions/2520853/warning-as-error-how-to-rid-these)
*   将 return 语句移到当前无法访问的内容下方。

它是不可达的，因为方法流在`return`语句处退出，因此永远不会执行下面的代码。编译器可以确定这一点，因此可以报告它。就像我说的那样，这些实际上是编译器*警告*，除非您已将项目配置为将警告视为错误，否则它们不会停止成功的构建。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T08:43:38.693

该声明：

```
return count; 
```

退出该功能。所以，

```
answer = GetAnswer(); 
Response.Write(lblAntwoord); 
```

无法连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-07T07:07:14.007

> **return**语句终止函数的执行并将控制权返回给调用函数。在调用函数的紧接着调用点处继续执行
> 
> 如果函数定义中**没有出现return**语句，则在执行被调用函数的最后一条语句后，控制自动返回调用函数

在您的代码中：

```
private int CountLeapYears(DateTime startDate)
{
    int count = 0;
    for (int year = startDate.Year; year <= DateTime.Now.Year; year++)
    {
        if (DateTime.IsLeapYear(year))
        {
            DateTime february29 = new DateTime(year, 2, 29);
            if (february29 >= startDate && february29 <= DateTime.Now.Date)
            {
                count++;
            }
        }
    }
    return count;//The Execution will be terminated here,the next lines will become unreachable 
    **String** answer = GetAnswer();
    Response.Write(lblAntwoord); 
}
} 
```

MSDN 链接：

> C：[https ://msdn.microsoft.com/en-us/library/sta56yeb.aspx](https://msdn.microsoft.com/en-us/library/sta56yeb.aspx)
> 
> c#：[https ://msdn.microsoft.com/en-us/library/1h3swy84.aspx](https://msdn.microsoft.com/en-us/library/1h3swy84.aspx)

# jquery - 包含到母版页时，Jquery 不起作用

> ID：12527064
> 
> 赞同：0
> 
> 时间：2012-09-21T08:41:58.133
> 
> 标签：jquery, asp.net

我正在使用[这个幻灯片放映](http://tympanus.net/Tutorials/SlideshowJmpress/)，我将所有脚本和 css 包含到我的 ASP.net MVC 项目的母版页中。但是幻灯片的所有元素都没有显示在我的页面中。只有下一个和上一个按钮有效，图像和文本没有。在我的母版页中，我只有幻灯片的脚本，所以它没有冲突脚本或 jquery 问题。

我查看页面源并单击外部css和脚本的每个链接，它可以正常工作。

但我真的不知道我的页面发生了什么。

这是我包含的代码和 HTML

```
<%@ Master Language="C#" Inherits="System.Web.Mvc.ViewMasterPage" %>
<%@ Import Namespace="Web.Models" %>
<%@ Import Namespace="MvcSiteMapProvider.Web.Html" %>
<%@ Import Namespace="System.IO" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1 /DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
<asp:ContentPlaceHolder ID="HeadContent" runat="server" />
<asp:ContentPlaceHolder ID="TitleContent" runat="server" />
Home Page    
<link rel="stylesheet" type="text/css" href="../../Content/homegallery/css/style.css" />
<link rel="stylesheet" type="text/css" href="../../Content/homegallery/css/demo.css" />
</head>
<body>

  <br /><br /><br /> <br /><br /><br /> <br /><br /><br />
  <script type="text/javascript" src="../../Content/homegallery/js/jquery.min.js"> </script>
  <script type="text/javascript" src="../../Content/homegallery/js/jmpress.min.js"></script>
  <script type="text/javascript" src="../../Content/homegallery/js/jquery.jmslideshow.js"></script>
  <script type="text/javascript" src="../../Content/homegallery/js/modernizr.custom.48780.js"></script>

  <noscript>
   <style>
      .step {
        width: 100%;
        position: relative;
      }
      .step:not(.active) {
        opacity: 1;
        filter: alpha(opacity=99);
       -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(opacity=99)";
       }
     .step:not(.active) a.jms-link{
        opacity: 1;
        margin-top: 40px;
     }
 </style>
 </noscript>
    <div id="home" style="width: 890px; margin-left: 20px; margin-top:28px; margin-bottom: -50px;">
    <div class="container">
        <section id="jms-slideshow" class="jms-slideshow">
            <div class="step" data-color="color-1">
                <div class="jms-content">
                    <h3>Just when I thought...</h3>
                    <p>From fairest creatures we desire increase, that thereby beauty's rose might never die</p>
                    <a class="jms-link" href="#">Read more</a>
                </div>
                <img src="../../Product/2309.jpg" />
            </div>
            <div class="step" data-color="color-1" data-y="500" data-scale="0.4" data-rotate-x="30">
                <div class="jms-content">
                    <h3>Holy cannoli!</h3>
                    <p>But as the riper should by time decease, his tender heir might bear his memory</p>
                    <a class="jms-link" href="#">Read more</a>
                </div>
                <img src="../../Product/2070.jpg" />
            </div>
        </section>
        </div>
<script type="text/javascript">
    $(function () {
        $('#jms-slideshow').jmslideshow();
    });
</script>
</div> 
```

请任何人有任何想法。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:26:51.240

下面的代码对我有用。请检查 css、图像、脚本的顺序和 url

```
<link href="Scripts/style.css" rel="stylesheet" type="text/css" />
<script src="Scripts/jquery-1.8.2.min.js" type="text/javascript"></script>
<script type="text/javascript" src="Scripts/jmpress.min.js"></script>
<script type="text/javascript" src="Scripts/jquery.jmslideshow.js"></script>
<script type="text/javascript" src="Scripts/modernizr.custom.48780.js"></script>
<noscript>
        <style>
            .step
            {
                width: 100%;
                position: relative;
            }
            .step:not(.active)
            {
                opacity: 1;
                filter: alpha(opacity=99);
                -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(opacity=99)";
            }
            .step:not(.active) a.jms-link
            {
                opacity: 1;
                margin-top: 40px;
            }
        </style>
    </noscript>

<div id="home" style="width: 890px; margin-left: 20px; margin-top: 28px; margin-bottom: -50px;">
            <div class="container">
                <section id="jms-slideshow" class="jms-slideshow">
                    <div class="step" data-color="color-1">
                        <div class="jms-content">
                            <h3>
                                Just when I thought...</h3>
                            <p>
                                From fairest creatures we desire increase, that thereby beauty's rose might never
                                die</p>
                            <a class="jms-link" href="#">Read more</a>
                        </div>
                        <img src="Images/4.png" />
                    </div>
                    <div class="step" data-color="color-1" data-y="500" data-scale="0.4" data-rotate-x="30">
                        <div class="jms-content">
                            <h3>
                                Holy cannoli!</h3>
                            <p>
                                But as the riper should by time decease, his tender heir might bear his memory</p>
                            <a class="jms-link" href="#">Read more</a>
                        </div>
                        <img src="Images/5.png" />
                    </div>
                </section>
            </div>
            <script type="text/javascript">
                $(function () {
                    $('#jms-slideshow').jmslideshow();
                });
            </script>
        </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:06:06.570

请检查以下内容：

1.  包含脚本的顺序。
2.  从浏览器保存 html 页面，并将代码与现场示例进行比较。逐行。
3.  检查包含 img urls 和 text 的变量，可能你有拼写错误

# api - 根据其 URL 查找 Google+ 环聊的参与者

> ID：12527065
> 
> 赞同：2
> 
> 时间：2012-09-21T08:42:01.890
> 
> 标签：api, google-plus, hangout

我想根据其 URL 找出谁参与了特定的环聊。当然，我将使用我的登录凭据，并且只有当我能够真正加入环聊时，我才能这样做。

我怎样才能以编程方式做到这一点？我在环聊 API 中没有找到任何内容。据我了解，要使用环聊 API，您必须加入特定的环聊，而不能只在任意环聊 URL 上使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:42:19.130

你是对的 - 环聊网址不会告诉你谁在环聊中。环聊 ID 是任意且匿名的。此外，环聊中的人员变化如此之快，因此获取该列表并不准确。

根据您要执行的操作，如果参与者安装了您的环聊应用，您可以让他们加入环聊。

# asp.net - 单击图像坐标时使用 ajax 显示内容并显示相关部分

> ID：12527067
> 
> 赞同：0
> 
> 时间：2012-09-21T08:42:04.110
> 
> 标签：asp.net, html, jquery, asp.net-ajax

我正在使用 C# 开发 ASP.net2.0 应用程序。本项目使用的 Html 5.0 版本。

我有一个定义坐标的图像，然后单击图像对应部分数据的每个坐标应该是可见的。

例如，如果单击#service 部分`"<section class="service">"`应显示。如果单击#new_generation，`<section class="new_generation">`则应显示部分。

它应该使用ajax加载。

```
 <section role="parallax" class="parallax cf">                      
    <map name="home_menu">
        <area class="selected" shape="poly" coords="140,0,0,105,85,105,225,0" href="#supplier" alt="SUPPLIER">
        <area shape="poly" coords="227,0,87,105,172,105,312,0" href="#service" alt="FULL SERVICE CARRIER">
        <area shape="poly" coords="314,0,174,105,259,105,399,0" href="#new_generation" alt="NEW GENERATION AIRLINE">
        <area shape="poly" coords="401,0,261,105,346,105,486,0" href="#air_freight" alt="AIR FREIGHT CARRIER">
        <area shape="poly" coords="488,0,348,105,433,105,573,0" href="#charter" alt="CHARTER AIRLINE">
        <area shape="poly" coords="575,0,435,105,520,105,660,0" href="#cargo" alt="CARGO & LOGISTICS COMPANY">
        <area shape="poly" coords="662,0,522,105,607,105,747,0" href="#hotel" alt="HOTEL GROUP">
        <area shape="poly" coords="749,0,609,105,694,105,834,0" href="#events" alt="EVENTS ORGANISER">
    </map>
</section>

<section class="home_menu_tabs">
    <section class="supplier selected"></section>
    <section class="service">
        Service Content Here comes from database, should loads using Ajax
    </section>
    <section class="new_generation">
    New Generation Content Here comes from database, should loads using Ajax
    </section>
    <section class="air_freight"></section>
    <section class="charter"></section>
    <section class="cargo"></section>
    <section class="hotel"></section>
    <section class="events"></section>
</section> 
```

请帮助jquery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:01:32.030

如果您想通过单击任何地图区域来显示该部分

这将有助于

```
$(function(){

    var sections = $('.home_menu_tabs section');
    sections.hide();
    $('map').on('click', 'area', function(){
        sections.hide();
        var href =$(this).prop('href');
        var sectionClass = href.substr(href.lastIndexOf('#')+1);
        //your ajax code to load content.
        $('.'+sectionClass).show();
    });

}); 
```

# android - Android 自定义视图和 XML

> ID：12527068
> 
> 赞同：0
> 
> 时间：2012-09-21T08:42:04.603
> 
> 标签：android, android-layout, android-custom-view, custom-view

我不知道代码有什么问题..我尝试了几种不同的方法，但没有任何效果..所以我有一个扩展 View 的类，因为我需要自己做 onDraw，还有一个放置自定义视图的 xml . 好的，这是代码..

主图像处理程序.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <net.stojakovic.example.ImageMainHandler.Panel
        android:id="@+id/custom_view"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
    />

</LinearLayout> 
```

以及带有自定义视图的活动

```
package net.stojakovic.example;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Matrix;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.util.AttributeSet;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;

import com.actionbarsherlock.app.SherlockActivity;

public class ImageMainHandler extends SherlockActivity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mainimagehandler);
    }

    public static class Panel extends View {                

        public Panel(Context context) {
            super(context);
            Log.w("Panel","constructor");
        }

        public Panel(Context context, AttributeSet attrs){
            super(context, attrs);
        }

        @Override
        public void onDraw(Canvas canvas) {
            Log.w("Panel","onDraw");
        }
    }   
} 
```

当我这样做时，应用程序崩溃并显示 LogCat 消息：

java.lang.RuntimeException：无法启动活动 ComponentInfo{net.stojakovic.example/net.stojakovic.example.ImageMainHandler}：android.view.InflateException：二进制 XML 文件第 8 行：膨胀类 net.stojakovic.example.ImageMainHandler 时出错。控制板

当我像这样在 xml 中定义自定义视图时，应用程序不会崩溃但没有任何反应，构造函数不会被调用

```
<View
    class="net.stojakovic.example.ImageMainHandler.Panel"
    android:id="@+id/custom_view"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
/> 
```

# objective-c - 在 Objective-C 中如何标记关键区域？

> ID：12527074
> 
> 赞同：5
> 
> 时间：2012-09-21T08:42:25.717
> 
> 标签：objective-c, multithreading

我有一个简单的场景，其中 a`NSTimer`被安排在后台线程上以每隔一段时间通过套接字发送数据包。然而，我的主线程负责销毁计时器和套接字。

破坏看起来像这样：

```
if (self.connected) {
    [self.pingTimer invalidate];

    if (self.socket != -1) {
        close(self.socket);
        self.socket = -1;
    }

    self.connected = NO;
} 
```

如何在 Objective-C 中确保一旦输入这部分代码，调度程序就不允许挂起这个线程，直到代码部分结束？换句话说，我想让这个代码部分原子化。

我的理解是该`@synchronized`指令是一个高级信号量/互斥体，因此为了确保该代码块的原子性，我需要将代码块本身以及所有引用`self.connected`,`self.pingTimer`和指令的代码括`self.socket`起来。`@synchronized`我这样想对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T08:46:10.440

`@synchronized`是一种方式。另一种是使用`NSLock`or `NSRecursiveLock`。您甚至可以使用普通的 POSIX pthread 锁定原语。请参阅[多线程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html#//apple_ref/doc/uid/10000057i-CH8-SW1)。

```
@interface Stuff 
{
    NSLock* lock;
    int cell;
}

- (int) cellValue;
- (void) someOperation;

@end

@implementation Stuff

- (id) init  
{
    if (self = [super init]) 
    {
        lock = [[NSLock alloc] init];
        cell = 0;
    }
    return self;
}

- (int) cellValue 
{
    [lock lock];
    @try
    {
        return cell;
    }
    @finally 
    {
        [lock unlock];
    }
}

- (void) someOperation 
{
    [lock lock];
    @try
    {
        // Do something involving access to stuff protected by
        // the lock (only cell here, but could be more, of course)
    }
    @finally 
    {
        [lock unlock];
    }
}

@end 
```

使用`@synchronized`，上面的代码看起来会更简单：

```
- (int) cellValue 
{
    @synchronized (self)
    {
        return cell;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T11:41:14.237

据我所知，没有办法阻止操作系统抢占您的线程并在其位置运行另一个。你能做的最好的就是同步访问。但是在阅读您的代码时，我推断出以下内容：

*   connected 是一个内部状态变量。
*   您想避免在断开连接时安排计时器。
*   您希望避免在安排计时器时断开连接。

我认为最好尽可能避免同步。幸运的是，您使用的是 NSTimer，这将使事情变得微不足道。

NSTimer 不在后台线程上运行，而是在 NSRunLoop 上运行，并且*可能*在主运行循环上运行，就像你的`dealloc`. 计时器是运行循环的事件源。当他们触发时，他们将一个事件排入队列，然后在处理它时调用您的代码。因为运行循环一次处理一个事件，这意味着您计划的计时器中的代码和您的 dealloc 中的代码在另一个可以运行之前得到完全执行。这也意味着您不需要任何特殊的同步机制。

```
- (void) dealloc
{
   // ...
   if (_connected) {
       [_pingTimer invalidate];
       if (_socket != -1)
           close(_socket);
   }
   // ...
   [super dealloc];
} 
```

注意：除非设置器有其他副作用，否则我更喜欢直接使用状态变量。在 dealloc 中设置状态变量也没有意义，因为一旦方法调用完成，对象就会消失。

# java - 使用 GSON 时不兼容的类型

> ID：12527077
> 
> 赞同：0
> 
> 时间：2012-09-21T08:42:32.497
> 
> 标签：java, json, gson

第一：这是我第一次使用 GSON。

试图解析一些 JSON，我得到“不兼容的类型”......

```
Gson gson = new Gson();
PlayerData data = gson.fromJson(response, PlayerData.class); // Incompatible types... 
```

`PlayerData`是一个内部类：

```
class PlayerData {
    public Point position;
    public String mapname;
    public int level;

    public PlayerData() {}
} 
```

是什么原因造成的？在 GSON 文档中，显然有一种方法`public <T> T fromJson(String json, Class<T> classOfT) throws JsonSyntaxException`，我正在 (AFAIK) 做，就像 Google 在它的 GSON 用户指南中一样。

**编辑：**
XCode 做了一些奇怪的事情，当我试图编译它时`Terminal`一切正常，除了我对服务器的请求，导致了几个 NPE，因为`response`仍然是空的。感谢 maaartinus，我了解到*不*应该出现编译器错误，所以我尝试在没有 XCode 的情况下编译它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T08:53:34.340

Try making your inner class `static` or you'll need a custom `InstanceCreator` for it as stated in the [Gson User Guide](https://sites.google.com/site/gson/gson-user-guide#TOC-Nested-Classes-including-Inner-Classes-)

> Gson can not automatically deserialize the pure inner classes since their no-args constructor also need a reference to the containing Object which is not available at the time of deserialization. You can address this problem by either making the inner class static or by providing a custom InstanceCreator for it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T14:57:27.223

对我来说它可以编译，但我必须`GSON`用`Gson`. 要么你在写这个问题时马虎，要么你使用了一些我从未听说过的“GSON”。

你`response`的是`String`？？？

一旦你让它运行起来，你将需要 Vrushank Desai 的答案。

# actionscript-3 - FlashDevelop AS3 项目：添加来自其他类的子项不可见；键盘输入不会在视觉上移动孩子

> ID：12527079
> 
> 赞同：0
> 
> 时间：2012-09-21T08:42:36.837
> 
> 标签：actionscript-3

我正在开始一个在 FlashDevelop 中 100% 完成的新项目，它是一个 AS3 项目。澄清一下，我在任何时候都不会在 Adob​​e Flash 中创建 FLA。永远不会使用 Adob​​e Flash。

在我的 AS3 项目的文档类中，我需要创建和引用在单独的 .as 类文件中设置的影片剪辑。文档类将具有事件监听器，用于监视键盘按下并在需要时移动影片剪辑。当影片剪辑被设置并从文档类添加到舞台时，通过键盘输入的移动工作正常。但是，当从单独的类设置影片剪辑时，我遇到了问题。

除了我正在处理的项目之外，我还创建了一个示例项目，为这个 Stack Overflow 问题运行三个测试。该示例项目包含三个文件，它们都存储在同一文件夹中：Main.as（文档类）、createSquare.as（创建方形 MC）和 createCircle.as（创建圆形 MC）。

测试#1（蓝色矩形）：在 Main.as 中，我创建了一个名为 charRectangle 的新 MC。在这里定义尺寸、尺寸、颜色等，然后​​将其添加到舞台上。当函数 keyIsDown() 执行时，蓝色矩形在舞台上正确地向左或向右移动。这是一次成功的测试。

测试#2（绿色方块）：现在我测试从一个单独的类文件创建一个影片剪辑。在 Main.as 中，我创建了一个名为 charSquare 的新变量并将其定义为新的 createSquare()。createSquare.as 定义特征并将子级添加到舞台。问题：测试项目时，舞台上看不到绿色方块；但是，跟踪输出显示左右箭头键实际上正在更新 charSquare 的 X 位置。如何制作影片剪辑节目？我的解决方案是...

测试#3（黄色圆圈）：我对黄色圆圈的开始方式与对绿色方块的方式相同。我们将其命名为 charCircle。在 Main.as 中，当将变量定义为新的 charCircle() 时，我将单词“this”传递给 createCircle.as 中的函数。这又告诉函数 createCircle 将子节点添加到舞台上的父 MC“this”。现在我们可以看到一个可见的形状。问题：跟踪输出显示左右箭头键正在更新 X 位置，但黄色圆圈没有移动。如何使此影片剪辑移动？

主要目标：我想避免在 Main.as 中说明角色形状的所有属性，并将其与其他类文件隔离。在 Main.as 中我只想创建一个新变量，将其定义为新的 createSquare()/createCircle()，然后在 Main.as 中使用键盘函数来处理运动。我稍后会将键盘控件保留在名为keyboardControls.as 的第四个测试类中。

当我从 Adob​​e Flash 中的 FLA 开始时，我可以解决这些问题，说明文档类，在舞台上创建 MC 符号，给它们一个实例名称，然后在 FlashDevelop 中处理 AS 文件。但同样，这个项目要求我省略 Adob​​e Flash/FLA，所以这不是我正在寻找的解决方案。我需要在 FlashDevelop AS3 中创建它 100% 动态。

感谢您的任何帮助。三个测试文件的源代码如下。

**主文件**

```
package {
    import flash.display.MovieClip;
    import flash.events.Event;
    import flash.events.KeyboardEvent;

    public class Main extends MovieClip {

        private var charRectangle:MovieClip;
        private var charSquare:createSquare;
        private var charCircle:createCircle;

        public function Main() {

            trace("Function: Main() has started.");

            // Create rectangle character right here
            charRectangle = new MovieClip();
            charRectangle.graphics.beginFill(0x0000FF);
            charRectangle.graphics.drawRect(200,20,250,100);
            charRectangle.graphics.endFill();
            stage.addChild(charRectangle);

            // Create square character from class
            charSquare = new createSquare();

            // Create square character from class
            charCircle = new createCircle(this);

            // Event listener for user input
            stage.addEventListener(KeyboardEvent.KEY_DOWN,keyIsDown);
        }

        private function keyIsDown(e:KeyboardEvent):void {
            // Left arrow key actions
            if (e.keyCode == 37) {
                charRectangle.x -= 5;
                charSquare.x -= 5;
                charCircle.x -= 5;
            }
            // Right arrow key actions
            if (e.keyCode == 39) {
                charRectangle.x += 5;
                charSquare.x += 5;
                charCircle.x += 5;
            }
            trace("charRectangle.x = " + charRectangle.x + ", charSquare.x = " + charSquare.x + ", charCircle.x = " + charCircle.x);
        }

    }

} 
```

**createSquare.as**

```
package {

    import flash.display.MovieClip;

    public class createSquare extends MovieClip {

        private var square:MovieClip;

        public function createSquare() {

            trace("Function: createSquare() has started.");

            square = new MovieClip();
            square.graphics.beginFill(0xFF0000);
            square.graphics.drawRect(200,140,100,100);
            square.graphics.endFill();
            addChild(square);

        }

    }

} 
```

**创建圈子.as**

```
package {

    import flash.display.MovieClip;

    public class createCircle extends MovieClip {

        private var circle:MovieClip;

        public function createCircle(parentMC:MovieClip) {

            trace("Function: createCircle() has started.");

            circle = new MovieClip();
            circle.graphics.beginFill(0x00FF00);
            circle.graphics.drawCircle(200,350,75);
            circle.graphics.endFill();
            parentMC.addChild(circle);

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:55:28.770

我猜你应该更多地使用 actionscript 中的显示列表来习惯操纵显示对象（addChild/removeChild/nesting/etc.）

您创建`charRectangle`并将其添加到舞台上，以便您可以看到它。`charCircle`你像这样初始化

```
charCircle = new createCircle(this); 
```

并在内部将其添加到 Main（在构造函数中传递），上面的两个剪辑也会显示。这不是`charSquare`您创建的情况（因此可以访问它，正如您在跟踪中看到的那样），但您没有添加到显示列表中。尝试这个：

```
// Create square character from class
charSquare = new createSquare();
// add it to the display list
addChild(charSquare) 
```

此外，您提到您想一次移动所有剪辑，如果您简单地将所有 3 个剪辑嵌套到单独的 Sprite/MovieClip 中，您可以这样做：

```
package {
    import flash.display.Sprite;
    import flash.display.MovieClip;
    import flash.events.Event;
    import flash.events.KeyboardEvent;
    import flash.ui.Keyboard;

    public class Main extends MovieClip {

        private var char:Sprite;

        public function Main() {

            trace("Function: Main() has started.");

            char = new Sprite();
            addChild(char);

            // Create rectangle character right here
            var charRectangle:MovieClip = new MovieClip();
            charRectangle.graphics.beginFill(0x0000FF);
            charRectangle.graphics.drawRect(200,20,250,100);
            charRectangle.graphics.endFill();
            char.addChild(charRectangle);

            // Create square character from class
            var charSquare:MovieClip = new createSquare();
            char.addChild(charSquare);
            // Create square character from class
            charCircle = new createCircle(char);

            // Event listener for user input
            stage.addEventListener(KeyboardEvent.KEY_DOWN,keyIsDown);
        }

        private function keyIsDown(e:KeyboardEvent):void {
            if(e.keyCode == Keyboard.LEFT)  char.x -= 5;
            if(e.keyCode == Keyboard.RIGHT) char.x += 5;
            trace("char position",char.x,char.y);
        }

    }

} 
```

（我没有测试过上面的代码，所以可能有语法错误，但它应该清楚地说明这个想法）。

另外两个旁注：

1.  [MovieClip](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/MovieClip.html)是一个动态类，它比像[Sprite](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Sprite.html)这样的简单类要慢。除非您使用的是时间线（并且您的项目看起来不像），否则我建议您改用 Sprite。对于一个简单的项目，它不会对性能产生太大影响，但从长远来看（对于更复杂的项目），节省资源会更安全。
2.  我想你的 createCircle 和 createSquare 类会改变并变得更复杂，但如果它们保持现在的样子，它们可能会更简单：

    包裹 {

    ```
    import flash.display.Sprite;

    public class Square extends Sprite {

        public function Square() {

            trace(this);

            graphics.beginFill(0xFF0000);
            graphics.drawRect(200,140,100,100);
            graphics.endFill();

        }

    } 
    ```

    }

如果不需要在 createSquare 或 createCircle 中嵌套元素，您可以使用非常基本的[Shape ，尽管您可能会发现 Sprite 更灵活。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Shape.html)另请注意，我已将类命名为 Square。类名以大写字母开头（例如 Sprite/MovieClip/etc.）、属性和方法以小写字母开头（例如 x/alpha/etc.）、常量全部大写（例如 KEY_DOWN、CLICK、等等）等等。按照这个约定，createSquare 听起来更像是一个函数名，而不是一个类。您没有义务遵守约定，但它可能会让其他人在未来更容易轻松地扫描您的代码。主要思想是保持一致。

# javascript - 选择项目时如何使用自动完成发布数据

> ID：12527080
> 
> 赞同：1
> 
> 时间：2012-09-21T08:42:36.393
> 
> 标签：javascript, jquery, jquery-ui

我有一个链接到远程源的 jquery 自动完成框。选择某些内容时，我希望它发布该项目的 ID。

这是我到目前为止所拥有的，但发布数据时运气不佳

```
$( "#artist1" ).autocomplete({
            source: "search.php",
            minLength: 2,
            select: function( event, ui ) {
            var artist1 = ui.item.id;
            var id = $("#id").val();

            $.post('writeToDB.php', { id:id, artist1:artist1});

            }
        }); 
```

此代码适用于其他元素，但在我将其放入自动完成时不起作用。我哪里会出错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:55:28.283

您应该覆盖该`select`事件，并将您的逻辑放在那里。有关详细信息，请查看[jQueryUI 的 autocomplete 官方演示](http://jqueryui.com/demos/autocomplete/)。

## 代码示例

```
// Supply a callback function to handle the select event as an init option.
$( ".selector" ).autocomplete({
   select: function(event, ui) { ... }
});

// Bind to the select event by type: autocompleteselect.
$( ".selector" ).bind( "autocompleteselect", function(event, ui) {
  ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:32:40.580

你可以这样做： -

```
$( "#artist1" ).autocomplete({

        select: function(event, ui) 
        {
            var artist1 = ui.item.id;
            var id = $("#id").val();
        },

        source: function(request, response) {
        $.ajax({
            url :"search.php" ,
            data : "id="+id+"&artist="+artist1,
            dataType: "json",
            type : "POST",
            success : function(data)
            {
                yourdata
            })

        response(yourdata);
            }
        });
        },
        minLength: 2
        }); 
```

这是一个示例，您必须对此进行一些更改。

# magento - 同一magento商店的多个子域

> ID：12527082
> 
> 赞同：2
> 
> 时间：2012-09-21T08:42:49.013
> 
> 标签：magento

在我们的开发服务器上，我有一个 Magento 商店，与其他几个拥有不同 url 但指向同一个数据库的开发人员共享。

例如 developer1 将拥有`http://dev1.magshop.com`dev2 将拥有`http://dev2.magshop.com`等。
他们都使用 GIT 推动他们的工作。

我遇到的问题是，当我继续时，`http://dev2.magshop.com`它会让我回到`http://dev1.magshop.com`（我首先配置的）

我希望每个人都停留在自己的 URL 上。我该怎么做？我看到很多教程如何添加第二个商店或第二个 url，但由于其他原因不符合我的需求。

感谢世界。

==== 编辑 ====
最后实现这一点的简单方法是将 {{base_url}} 留在开发中......我什至不知道为什么我改变了它，让它变得如此复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:15:07.427

对不起，但是afaik*不可能*实现你想要的。

Magento 使用数据库表中的`web/unsecure/base_url`配置`core_config_data`来生成给定范围的所有 URL。

这意味着，即使您将 Magento 代码复制到另一个（子）域以在代码上分隔您的开发人员，他们仍然都连接到配置为`http://dev1.magshop.com`用作基本 URL 的数据库。

也就是说，要让每个人都使用自己的 URL，您需要为每个开发人员设置一个数据库。或者完全重新设计 Magento 的`base_url`处理方式（不推荐）。

# c++ - 如何设置 RTF 编辑控件的背景颜色

> ID：12527086
> 
> 赞同：1
> 
> 时间：2012-09-21T08:43:02.230
> 
> 标签：c++, winapi, rtf

我认为这很简单，但经过 2 小时的谷歌搜索和尝试后，我仍然处于同一点。我正在尝试使用普通的 Win32 C++ 为 RTF 编辑控件设置自定义背景颜色。

你知道我该怎么做吗？

谢谢并恭祝安康，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:07:42.770

您需要使用`EM_SETBKGNDCOLOR`消息。更多信息可以在这里找到：

[http://msdn.microsoft.com/en-us/library/windows/desktop/bb774228(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb774228(v=vs.85).aspx)

# binding - textmate 为 php 重新映射“注释行/选择”

> ID：12527087
> 
> 赞同：1
> 
> 时间：2012-09-21T08:43:02.780
> 
> 标签：binding, key, textmate

我在哪里可以找到“注释行/选择”来重新映射键绑定？我在“文本”包和“php”中都没有找到任何东西。我还尝试使用带有“注释行/选择”的mac键盘快捷键，但正如预期的那样，它没有用。我发现的最匹配的stackoverflow问题是[TextMate：评论行快捷方式不再起作用（我的瑞士布局上的Cmd-/或Cmd-Shift-7）](https://stackoverflow.com/questions/11447283/textmate-comment-line-shortcut-does-not-work-anymore-cmd-or-cmd-shift-7-on-m) 但我的设置没有答案。提前致谢，

# c# - 从 BackgroundWorker 到主线程的异常转发

> ID：12527089
> 
> 赞同：1
> 
> 时间：2012-09-21T08:43:07.610
> 
> 标签：c#, multithreading, exception, backgroundworker

在主应用程序线程中捕获 BackgroundWorker 中发生的异常的最佳方法是什么。我在 BackgroundWorker 中处理了密集的 UPD 操作，但是当发生异常时，我的主应用程序无法记录发生的事情。请推荐最佳实践。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T08:45:49.030

您应该处理该`RunWorkerCompleted`事件，该事件将在您的主应用程序线程上触发。

`RunWorkerCompletedEventArgs.Error`将包含异常，如果没有异常，则为 null。

# android - 自动滚动水平 ListView

> ID：12527090
> 
> 赞同：1
> 
> 时间：2012-09-21T08:43:16.383
> 
> 标签：android, android-listview, scroll, horizontalscrollview, android-adapterview

我使用这个[库](http://www.dev-smart.com/archives/34)来实现`Horizontal ListView`. 该组件基于`AdapterView`.
如何实现无限水平自动滚动组件的能力？
我试过用小部件来做`Scroller`，但它没有无限滚动的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-07T06:23:34.013

我认为你应该检查这个库以使水平列表视图和滚动自动 [https://github.com/blessenm/AndroidAutoScrollListView](https://github.com/blessenm/AndroidAutoScrollListView)

# java - 在摇摆的JMenu中添加图标和文本

> ID：12527092
> 
> 赞同：4
> 
> 时间：2012-09-21T08:43:20.817
> 
> 标签：java, swing, menu, jframe, awt

我正在做秋千。我必须创建一个包含 10 个菜单的主屏幕。我用 JFrame 创建了表单，用 JMenu 创建了菜单。现在该菜单应该包含文本和图像，并且应该在单击菜单时调用执行的操作方法，以便可以在单击菜单按钮时执行操作。

现在我正在使用 JMenuItem 和图像图标上的图标制作 Jmenu，但我想要带有图标和文本的菜单

我目前的代码是

```
public class MenuScreen  extends JFrame implements ActionListener{

             Container cp;
             JMenuBar menuBar;

             JLabel logo;
                public MenuScreen() {
                    super("");
                    cp=this.getContentPane();
                    cp.setBackground(Color.gray);

                    menuBar= new JMenuBar();
        logo=new JLabel(im);
                cp.add(logo);
                    logo.setBounds(100,80,500,350);

            helpmenu= new JMenu(" Help  ");
        homemenu=new JMenu(" Home  ");
        fieldsmenu= new JMenu(" Fields  ");
        backmenu= new JMenu(" Back  ");
        forwardmenu= new JMenu(" Forward  ");
        panelmenu= new JMenu(" Panel  ");
        searchmenu= new JMenu(" Search  ");
        quickmenu= new JMenu(" Quick  ");
        infomenu= new JMenu(" Info  ");
        exitmenu= new JMenu(" Exit  ");
        mastermenu= new JMenu(" Master  ");
        tarrifmenu= new JMenu(" Tarrif  "); 
        contactmenu= new JMenu(" Contact  ");
        webmenu= new JMenu(" Web  ");
        wordmenu= new JMenu(" Word  ");
        legaldictionarymenu= new JMenu(" LegalDictionary  ");
        budgetmenu=new JMenu(" Budget 2012 2013  ");
        memberdetailmenu= new JMenu(" Member Details  ");

        Font f1= new Font("Arial",Font.BOLD,16);

        budgetmenu.setFont(f1);
        legaldictionarymenu.setFont(f1);
        helpmenu.setFont(f1);

        JMenuItem backmenuitem= new JMenuItem(backicon);
        backmenu.add(backmenuitem);

        JMenuItem exitmenuitem= new JMenuItem(exiticon);
        exitmenu.add(exitmenuitem);

        menuBar.add(helpmenu);
        menuBar.add(homemenu);
        menuBar.add(fieldsmenu);
        menuBar.add(backmenu);
        menuBar.add(forwardmenu);
        menuBar.add(panelmenu);
        menuBar.add(searchmenu);
        menuBar.add(quickmenu);
        menuBar.add(infomenu);
        menuBar.add(exitmenu);
        menuBar.add(mastermenu);
        menuBar.add(tarrifmenu);
        menuBar.add(contactmenu);
        menuBar.add(webmenu);
        menuBar.add(wordmenu);
        menuBar.add(legaldictionarymenu);
        menuBar.add(budgetmenu);
        menuBar.add(memberdetailmenu);

        setJMenuBar(menuBar);

    /*
     Adding Listeners to the menus where required 

     */
            searchmenu.addActionListener(this);

    }

    public void actionPerformed(ActionEvent ae)
    {
     JOptionPane.showMessageDialog(null,"clicked");
          if(ae.getActionCommand().equals("Search"))
          {

           SearchForm frm=new SearchForm();
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
          frm.setBounds(0,0,screenSize.width, screenSize.height);
          frm.setVisible(true);

          }           

    }

   public static void main(String args[])
{

       MenuScreen frm= new MenuScreen();

       Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
       frm.setBounds(0,0,screenSize.width, screenSize.height);
       frm.setVisible(true);
}
} 
```

请帮我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-21T08:45:01.167

使用构造函数`JMenuItem(String text, Icon icon)`
如果你想要带有图标和文本的 JMenu

```
helpmenu= new JMenu(" Help  ");
helpmenu.setIcon(..); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T09:03:59.847

**-**对于`JMenuItem`使用`JMenuItem((String text, Icon icon)` **构造函数**，

**-**并`JMenu`尝试使用将 String 作为 Argument的**构造**`JMenu(String s)`函数和**方法** `setIcon()`

**要在 MenuItems 上设置特殊键选项，请使用** `setAccelerator()`

**例如：**

`myItem.setAccelerator( KeyStroke.getKeyStroke(KeyEvent.VK_P, ActionEvent.CTRL_MASK));`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T08:57:31.650

设置您放置在菜单上的图标和文本`Action`（使用键值对机制）。键在`Action`界面中定义。

[接口](http://docs.oracle.com/javase/7/docs/api/javax/swing/Action.html)的[类 javadoc`Action`](http://docs.oracle.com/javase/7/docs/api/javax/swing/Action.html)还包含可用键及其影响的漂亮概览表。

# facebook-graph-api - 在 Facebook 上启用删除 offline_access

> ID：12527097
> 
> 赞同：1
> 
> 时间：2012-09-21T08:43:27.860
> 
> 标签：facebook-graph-api, facebook-authentication

我有一个在 FB 注册的应用程序。现在我想从应用设置中启用“删除offline_access”。我需要对我的代码进行任何更改吗？我正在通过 FBClient 进行服务器端 OAuth 调用。我仍在我的代码中起诉“offline_access”权限。它还会起作用吗？还是我必须对我的代码进行一些更改？

还有一个问题，移除“offline_access”后 60 天的 FB 访问令牌到期时间是滑动到期吗？意味着当我使用我的应用程序登录 FB 时，访问令牌的到期时间将从那天延长到接下来的 60 天？

# c# - 如何在 MySite 上设置输入字段 -> 将详细信息编辑为禁用/启用

> ID：12527102
> 
> 赞同：0
> 
> 时间：2012-09-21T08:43:37.643
> 
> 标签：c#, sharepoint-2010

我想禁止 MySite 上的用户在 MySite 上编辑他们的详细信息。

当他们单击“编辑我的个人资料”按钮时，它应该向他们显示他们详细信息的概述，但他们只能编辑指定的输入字段。

例如像这张照片：

如果可能的话，我想通过代码设置它，因为 PersonalSite 创建是由 EventReceiver 处理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:35:25.843

我现在自己找到了一个适合我需要的答案。

`UserProfile`在创建他的 PersonalSite 时，我得到了用户的。

然后遍历我选择的属性并将`IsUserEditable`属性设置为 false`ProfileSubTypeProperty`

```
SPServiceContext serviceContext = SPServiceContext.GetContext(site);
UserProfileManager profileManager = new UserProfileManager(serviceContext);
UserProfile profile = null;
profile = profileManager.GetUserProfile(domainUserName);
List<string> props = GetPropertiesFromSetting();
foreach (string propName in props)
{
   profile[propName].ProfileSubtypeProperty.IsUserEditable = false;
} 
```

# c# - 想要将aspx页面转换为html并在asp.net c#中通过电子邮件发送

> ID：12527107
> 
> 赞同：1
> 
> 时间：2012-09-21T08:44:11.400
> 
> 标签：c#, asp.net

我有我的 aspx 页面的 html 部分，现在我需要将字符串作为电子邮件发送。问题是文本框值没有被保存。任何人都可以给我一些想法。谢谢你

这是我的代码。

```
protected void Page_Load(object sender, EventArgs e)
{

}
protected void Button1_Click(object sender, EventArgs e)
{
         StringBuilder sbOut = new StringBuilder();
         StringWriter swOut = new StringWriter(sbOut);
         HtmlTextWriter htwOut = new HtmlTextWriter(swOut);
         base.Render(htwOut);
         string sOut = sbOut.ToString();

         // Send sOut as an Email

         writer.Write(sOut);

         MailMessage msg = new MailMessage(txt_From.Text, txt_To.Text);
         msg.Subject = txt_Subject.Text;
         msg.Body =Sout.ToString();
         msg.IsBodyHtml = true;

         SmtpClient yourSmptpclient = new SmtpClient("10.238.52.900");
         try
         {
             yourSmptpclient.Send(msg);
         }
         catch (Exception Exp)
         {
             throw Exp;
         }
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:49:05.963

这就是我所做的：

```
MailMessage mail = new MailMessage(from, to, subject, message);
mail.IsBodyHtml = true;
SmtpClient client = new SmtpClient("localhost");
client.Send(mail); 
```

请注意，我将邮件消息 html 设置为 true：*mail.IsBodyHtml = true;* 因此，现在将您的 HTML 代码写入 message 变量并尝试。这将帮助您将 HTML 页面作为电子邮件发送。

希望你现在清楚了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:17:40.033

从您的问题看来，您在[捕获 ASPX 内容时遇到了问题](http://www.west-wind.com/weblog/posts/2004/Jun/08/Capturing-Output-from-ASPNet-Pages)

请通过它。

# php - 修改后刷新 div 内容

> ID：12527108
> 
> 赞同：0
> 
> 时间：2012-09-21T08:44:12.610
> 
> 标签：php, javascript, ajax, jquery

下面是我的代码，它工作正常......

```
<Script type="text/javascript">
function im()
{
    var Name=document.getElementById("Name").value;
    var pointsize=document.getElementById("pointsize").value;
    var format=document.getElementById("format").value;
    var bckclr=document.getElementById("bckclr").value;
    var color=document.getElementById("color").value;
    var bcolor=document.getElementById("bcolor").value;
    var font=document.getElementById("font").value;

    $(document).ready(function(){
        var url = 'Name='+Name+'&pointsize='+pointsize+
                  '&format='+format+'&bckclr='+bckclr+
                  '&color='+color+'&bcolor='+bcolor+
                  '&font='+font;

        alert(url);
        //-----Sending request to server for getting job name list by ajax-----
        $.ajax({
            type    : "POST",
            url : "i.php?",
            data    : url,              
            cache   : false,
            success : function(html) {
                //document.getElementById('Div_PJobId').style.display="block";
                //alert('hi');
                alert(html);
                var pic='<img src="'+html+'">';
                $("#Div_Im").html(pic).show();
            }
        });
    });
}
</script> 
```

和PHP代码...

```
echo('Name: <input type="text" id="Name" onchange="im()" value="your name"  name="Name" />');

echo('pointsize: <input type="text" id="pointsize" onchange="im()" value="50" name="pointsize" />');

echo('format: <input type="text" id="format" value=".gif" onchange="im()" name="format" />');

echo('BackGround Color: <input type="text" id="bckclr" value="red" onchange="im()" name="bckclr" />');

echo('FontColor: <input type="text" id="color" value="white" onchange="im()" name="color" />');

echo('Border Color: <input type="text" id="bcolor" value="blue" onchange="im()" name="bcolor" />');

echo('<a href="./lang/ims.php"><img src="'.$image.'" height="82" width="82" /></a>');

echo('Font: <input type="text" id="font" value="'.$image1.'" onchange="im()" name="font" />');

echo ('<div id="Div_Im">');
echo('replace me');
echo ('</div>'); 
```

如您所见，我正在使用 AJAX 从服务器获取数据并在其正常工作的情况下显示，但每次进行更改时我都需要刷新 div 。

当我进行一些更改时如何刷新 div ......当数据来自服务器时，我还需要添加符号或加载图像......如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:06:28.940

也许试试这个：

## Javascript

```
<script type="text/javascript">
$(document).ready(function(){

  $('#theIMform input')
    .change(function(){
      // Automatically creates a Query String for all fields within the parent form
      formdata = $(this).closest('form').serialize();

      $.ajax({
        type : "POST" ,
        url : "i.php" ,
        data : formdata ,              
        cache : false ,
        error : function( jqXHR , textStatus , errorThrown ){
          // Something went wrong
        } ,
        success : function( data , textStatus , jqXHR ){
          $( "#div_im" )
            .hide()
            .html( '<img src="'+data+'">' )
            .show();

        }
      });
    });

});
</script> 
```

## PHP

```
?>
<form id="theIMform" name="theIMform">
  Name: <input type="text" id="Name" value="your name"  name="Name" />
  pointsize: <input type="text" id="pointsize" value="50" name="pointsize" />
  format: <input type="text" id="format" value=".gif" name="format" />
  BackGround Color: <input type="text" id="bckclr" value="red" name="bckclr" />
  FontColor: <input type="text" id="color" value="white" name="color" />
  Border Color: <input type="text" id="bcolor" value="blue" name="bcolor" />
  <a href="./lang/ims.php"><img src="<?php echo $image; ?>" height="82" width="82" /></a>
  Font: <input type="text" id="font" value="<?php echo $image1; ?>" name="font" />
</form>
<div id="div_im">replace me</div>
<?php 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T08:51:13.110

**当您更改页面元素时，它会自动刷新。**

我认为你的问题是关于这条线

```
$("#Div_Im").html(pic).show(); 
```

因为您将 show 调用到 img 元素而不是 div 上。

尝试改变它

```
$("#Div_Im").html(pic);
$("#Div_Im").show(); 
```

此外，我建议您使用 jquery 来获取值，因此您需要 `color=document.getElementById("color").value;`更轻松地进行更改`color = $('#color').val();`

# c# - 如何在运行时在 asp.net 中的内容占位符中添加按钮？

> ID：12527109
> 
> 赞同：3
> 
> 时间：2012-09-21T08:44:35.927
> 
> 标签：c#, asp.net, asp.net-controls

在我的表单中，我添加了一个内容占位符，并在内容占位符中手动添加了一个按钮。但是现在我想在运行时在同一个内容占位符中添加一个按钮。我尝试了以下代码，但是浏览器中没有显示按钮...我不知道这里有什么问题...

我的代码...

```
ContentPlaceHolder content = (ContentPlaceHolder)this.Master.FindControl("maincontent");
Button newButton = new System.Web.UI.WebControls.Button();
newButton.ID = "NextButton";
newButton.Text = "Next";
newButton.Visible = true;
content.Controls.Add(newButton); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:48:17.623

您丢失了按钮的大小和位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:01:50.830

放下

```
ContentPlaceHolder content = (ContentPlaceHolder)this.Master.FindControl("maincontent"); 
```

将您的代码更改为

```
Button newButton = new System.Web.UI.WebControls.Button();
newButton.ID = "NextButton";
newButton.Text = "Next";
newButton.Visible = true;
maincontent.Controls.Add(newButton); 
```

假设“maincontent”是您给占位符或课程的 ID。

# java - Scala/Java JNA 检查共享对象的可用性

> ID：12527114
> 
> 赞同：0
> 
> 时间：2012-09-21T08:44:47.430
> 
> 标签：java, scala, jna, shared-objects

我正在编写一个 Scala 程序，它使用通过 JNA 加载的 C++ 共享对象来调用我们用 C++ 编写的一些自定义文件读取函数，并且不希望维护 Java/Scala 副本。该程序只需要与 Linux 兼容。

我的问题是，检查共享对象是否以编程方式可用的适当方法是什么？如果用户忘记将共享对象添加到他们的 LD_LIBRARY_PATH，那么当他们尝试使用其中的某些功能时，GUI 将会崩溃。我想在启动时进行检查以确保共享对象可用 - 我可以尝试进行读取然后捕获任何错误，但这需要读取文件并且感觉不对方法来做到这一点。

有任何想法吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:05:50.927

如果您通过 JNA 加载，那么如果 JNA 找不到库或由于缺少依赖项而无法加载它，您可以依靠 JNA 抛出 UnsatisfiedLinkError 。

`System.loadLibrary`并且`System.load`取决于`java.library.path`，它或多或少是从 JNA 初始化的，`LD_LIBRARY_PATH`并且与 JNA 的不同`jna.library.path`（JNA 可以通过该变量动态引导以搜索更多位置）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:42:43.613

如果您依赖的人在他们的路径中有一个外部库（而不是使用 JNA JAR 包装功能），您可以简单地使用[System.loadLibrary](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#loadLibrary%28java.lang.String%29)进行检查：

```
~ $ cat x.c
int answer() { return 42; }
~ $ gcc -shared -fPIC -o libx.so x.c
~ $ scala
Welcome to Scala version 2.9.2 (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_21).
Type in expressions to have them evaluated.
Type :help for more information.

scala> System.loadLibrary("x")

scala> System.loadLibrary("y")
java.lang.UnsatisfiedLinkError: no y in java.library.path
        at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1734)
        at java.lang.Runtime.loadLibrary0(Runtime.java:823)
[...] 
```

# windows - 如何在我的 Visual Studio 安装项目中运行外部安装程序

> ID：12527119
> 
> 赞同：5
> 
> 时间：2012-09-21T08:45:08.593
> 
> 标签：windows, visual-studio-2010, visual-studio, installation

我正在使用 Visual Studio 安装项目为我的新 Windows 程序（单个 EXE 文件）创建安装程序。它似乎唯一缺少的是一种运行组件安装程序的方法。我需要将一个单独的安装程序 EXE 与我的程序捆绑并运行，但每当我尝试将其作为自定义操作运行时，我都会收到“嵌套安装程序”错误（您无法在安装程序中运行安装程序）。

那么，除了购买商业安装程序（$$$$）之外，有没有办法编写自定义操作来做到这一点？我已经看过一些关于这方面的教程，它看起来并不那么令人生畏，但我担心让自定义操作在设置事务锁定被释放之后（或之前）运行，以便下一个安装程序可以运行。

建议？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T16:16:57.043

基本上，在 MSI 术语中，您想要的是自定义引导程序。设置和部署项目对此的支持有限。 [添加自定义先决条件](https://web.archive.org/web/20160626050636/http://msdn.microsoft.com/en-US/library/ms165429(v=VS.80).aspx)（[最新版本](https://msdn.microsoft.com/en-us/library/ms165429%28v=vs.140%29.aspx?f=255&MSPPError=-2147217396)）详细介绍了如何向内置引导程序添加先决条件。

不幸的是，Visual Studio 2012 不支持安装和部署项目；所以，花很多时间在这样的事情上可能不会增加太多的长期价值。

WiX 是 Microsoft 的人员推荐的另一个 MSI 安装程序框架（作者在 Microsoft 工作）。它有一个称为[捆绑](http://wix.sourceforge.net/manual-wix3/authoring_bundle_intro.htm)的功能，允许链接 MSI（通过其引导程序）。使用名为 Dark 的实用程序从现有 MSI 创建 WiX 项目非常容易（[http://weblogs.asp.net/lorenh/archive/2004/05/09/128899.aspx](http://weblogs.asp.net/lorenh/archive/2004/05/09/128899.aspx)是使用 Dark 的一个很好的介绍）。一旦你得到它，就可以编辑 wxs 文件来添加一个包。

其他 Wix 资源：[http ://wix.tramontana.co.hu/tutorial](http://wix.tramontana.co.hu/tutorial)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T15:05:45.570

您可以使用任何免费的安装程序/安装程序创建器。它们将允许您在安装期间运行任何自定义脚本，或安装任何其他组件或软件。

这里仅列举一些免费选项：

*   [安装创作者](http://www.clickteam.com/website/world/install-creator)
*   [国家安全情报局](http://nsis.sourceforge.net/Main_Page)
*   [幽灵安装程序免费](http://www.ethalone.com/free-features.html)
*   [创新设置](http://www.jrsoftware.org/isinfo.php)
*   [安装Forge](http://installforge.net/)

# php - 无法将远程 Openfiles.exe 数据拉入 PHP

> ID：12527123
> 
> 赞同：3
> 
> 时间：2012-09-21T08:45:23.087
> 
> 标签：php, windows, apache, shell-exec

我正在尝试使用 openfiles.exe 来获取远程服务器上当前打开的文件的信息。我可以从命令提示符运行 web 服务器已打开的命令，所以我知道它在 web 服务器和我试图定位的服务器之间工作。但是，当我尝试在 PHP 中调用相同的命令时，我得到一个 Apache 错误日志条目：“错误：目标系统必须运行 Windows XP 或更高版本。” 网络服务器在 Xp Pro 上运行，目标服务器在 Windows Server 2003 上。从命令提示符下，该命令完美运行，即使对于网络上较旧的 Windows 2000 服务器，只是当我从 PHP 运行它时，它似乎有一个问题。有没有人对为什么和/或如何解决这个问题有任何想法？

我正在使用的代码是：

```
$output = shell_exec("openfiles /query /s servername");
echo $output;
  $i = 0;
  $c = count($output);

  while ($i < $c) {
    $dump = $output[$i];
    echo $dump ."<br>";
    $i++;
  } 
```

shell_exec()、system() 和 exec() 的行为完全相同，从批处理文件运行命令也是如此。一个稍微有趣的转折是，如果我删除“/s servername”部分，它会输出以下内容：

```
Files Opened Remotely via local share points:
---------------------------------------------
INFO: No shared open files found. 
```

...所以就好像 /s 标志是扔它的东西。就像我说的，它在命令提示符下工作正常，所以我知道可执行文件能够从目标服务器中提取信息；我只需要找出为什么 PHP 在做同样的事情时似乎有问题......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:56:54.063

您的 Apache 服务器在错误的帐户下运行，并且没有远程 IPC$ 共享的权限；）

编辑 - 完整的帖子：

可能是权限？Apache 以什么用户身份运行？当您从命令提示符处执行此操作时，您可能是以域管理员帐户或其他具有正确权限的帐户来连接到远程计算机上的 IPC$ 共享（IIRC 就是这样完成的）。而 Apache 可能不会，并且当实际发生的情况是它无法联系 IPC$ 共享并假设远程计算机没有 Windows XP 或更高版本时，它可能只是一个误导性的错误消息......

Looks like on the XP version of openfiles, there's /u and /p options to pass a username and password; stick domain admin credentials in there to test, and see if that works. If it does, create a restricted AD account with no filestore permissions and use those credentials or something, to make sure no one can steal your main domain admin account.

# tomcat - 通过在服务器上安装一次，我们如何实现显示适当徽标的不同登录页面和自定义？

> ID：12527125
> 
> 赞同：0
> 
> 时间：2012-09-21T08:45:25.347
> 
> 标签：tomcat, web-applications, jasperserver

我正在使用在*Apache Tomcat*上运行的*JasperReport Server 4.0.0*。

 *我可以使用以下网址访问它：`http://localhost:8080/jasperserver/login.html`

现在*我*从

```
C:\Program Files\jasperreports-server-cp-4.0.0\apache-tomcat\webapps\jasperserver 
```

作为

```
C:\Program Files\jasperreports-server-cp-4.0.0\apache-tomcat\webapps\myjasper 
```

如果我尝试使用此 url 启动应用程序：`http://localhost:8080/myjasper/login.html`它应该可以工作，但它不起作用。

我尝试过其他方式，将**jasperserver**重命名为**myjasper**，它对我有用，但我想保留两者。

我的问题是如何使用这两个 url 访问*JR Server*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T20:06:25.043

如果您想要两个独立的 JasperReports Server 实例，请使用 .war 文件安装。您可以进行全新安装并调用新实例“myjasper”。

编辑：不要重命名文件夹。随附的安装指南文档解释了如何进行 .war 文件安装。您在 default_master.properties 中查找的特定属性是 webAppNameCE。将其设置为“myjasper”而不是其默认值“jasperserver”。然后它将安装到您想要的文件夹中，并且所有相应的配置文件也将正确设置。

如果您希望在同一存储库中管理不同组织的同时具有不同的外观和感觉，那么您可以在 JRS 的商业版中拥有此功能。这些主题可以分别应用于不同的组织或“租户”。*

# php - 数据存储优化

> ID：12527127
> 
> 赞同：-1
> 
> 时间：2012-09-21T08:45:28.040
> 
> 标签：php, mysql, html, sql, web

我有一个表格，其中可以通过单击添加/删除按钮动态添加/删除新行。

当我尝试将新添加/删除的行保存回数据库时，我的问题就开始了。我设法使用 jQuery 的 Ajax 来保存数据，所以我没有使用 post var，而是“收集”每个输入上的所有数据。我设法获取所有这些数据并将它们发送到存储它们的 store.php。

我的问题是，如何用很少的查询保存我的更改，我的意思是，这是 store.php 发送到我的 mysql 服务器的输出：

```
UPDATE transport SET transporttype = "3" WHERE id = 1
UPDATE transport SET transporttype = "2" WHERE id = 6
UPDATE transport SET transporttype = "1" WHERE id = 7
UPDATE transport SET transportmandataire = "1" WHERE id = 1
UPDATE transport SET transportmandataire = "3" WHERE id = 6
UPDATE transport SET transportmandataire = "3" WHERE id = 7
UPDATE transport SET transportexpediteur = "1" WHERE id = 1
UPDATE transport SET transportexpediteur = "3" WHERE id = 6
UPDATE transport SET transportexpediteur = "3" WHERE id = 7
UPDATE transport SET transportdestinataire = "1" WHERE id = 1
UPDATE transport SET transportdestinataire = "2" WHERE id = 6
UPDATE transport SET transportdestinataire = "4" WHERE id = 7
UPDATE transport SET transporttransporteur = "5" WHERE id = 1
UPDATE transport SET transporttransporteur = "4" WHERE id = 6
UPDATE transport SET transporttransporteur = "3" WHERE id = 7
UPDATE transport SET transportbondetransportnumerodesuivi = "1563123" WHERE id = 1
UPDATE transport SET transportbondetransportnumerodesuivi = "23544" WHERE id = 6
UPDATE transport SET transportbondetransportnumerodesuivi = "23544" WHERE id = 7
UPDATE transport SET transportlivraisonprevisiondate = "1" WHERE id = 1
UPDATE transport SET transportlivraisonprevisiondate = "1" WHERE id = 6
UPDATE transport SET transportlivraisonprevisiondate = "1" WHERE id = 7
UPDATE transport SET transportlivraisonconstatdate = "test" WHERE id = 1
UPDATE transport SET transportlivraisonconstatdate = "test" WHERE id = 6
UPDATE transport SET transportlivraisonconstatdate = "test" WHERE id = 7
UPDATE transport SET transportlivraisonconstatheure = "test" WHERE id = 1
UPDATE transport SET transportlivraisonconstatheure = "test" WHERE id = 6
UPDATE transport SET transportlivraisonconstatheure = "test" WHERE id = 7
UPDATE transport SET transportlivraisonprevisiondate = "1" WHERE id = 1
UPDATE transport SET transportlivraisonprevisiondate = "1" WHERE id = 6
UPDATE transport SET transportlivraisonprevisiondate = "1" WHERE id = 7
UPDATE transport SET transportlivraisonprevisionheure = "1" WHERE id = 1
UPDATE transport SET transportlivraisonprevisionheure = "1" WHERE id = 6
UPDATE transport SET transportlivraisonprevisionheure = "1" WHERE id = 7
UPDATE transport SET transportetat = "6" WHERE id = 1
UPDATE transport SET transportetat = "1" WHERE id = 6
UPDATE transport SET transportetat = "6" WHERE id = 7
UPDATE transport SET transportimperatif = "09/17/2012" WHERE id = 1
UPDATE transport SET transportimperatif = "09/18/2012" WHERE id = 6
UPDATE transport SET transportimperatif = "09/09/2012" WHERE id = 7
UPDATE transport SET transportbondetransportmoyendetransmission = "2" WHERE id = 1
UPDATE transport SET transportbondetransportmoyendetransmission = "2" WHERE id = 6
UPDATE transport SET transportbondetransportmoyendetransmission = "1" WHERE id = 7
UPDATE transport SET transportbondetransportassurance = "86" WHERE id = 1
UPDATE transport SET transportbondetransportassurance = "86" WHERE id = 6
UPDATE transport SET transportbondetransportassurance = "86" WHERE id = 7
UPDATE transport SET transportobservation = "Aucune observation disponible." WHERE id = 1
UPDATE transport SET transportobservation = "Aucune observation disponible." WHERE id = 6
UPDATE transport SET transportobservation = "Aucune observation disponible." WHERE id = 7
UPDATE transport SET transportreclamationmotif = "3" WHERE id = 1
UPDATE transport SET transportreclamationmotif = "4" WHERE id = 6
UPDATE transport SET transportreclamationmotif = "1" WHERE id = 7
UPDATE transport SET transportreclamationnumerosuivis = "B87GT9" WHERE id = 1
UPDATE transport SET transportreclamationnumerosuivis = "656786" WHERE id = 6
UPDATE transport SET transportreclamationnumerosuivis = "C89GF8" WHERE id = 7
UPDATE transport SET transportreclamationdate = "09/17/2012" WHERE id = 1
UPDATE transport SET transportreclamationdate = "09/10/2012" WHERE id = 6
UPDATE transport SET transportreclamationdate = "09/24/2012" WHERE id = 7
UPDATE transport SET transportreclameetat = "2" WHERE id = 1
UPDATE transport SET transportreclameetat = "1" WHERE id = 6
UPDATE transport SET transportreclameetat = "1" WHERE id = 7
UPDATE transport SET transportreclamationrelancedate = "09/19/2012" WHERE id = 1
UPDATE transport SET transportreclamationrelancedate = "09/04/2012" WHERE id = 6
UPDATE transport SET transportreclamationrelancedate = "09/17/2012" WHERE id = 7
UPDATE transport SET transportreclamationrelancemoyen = "1" WHERE id = 1
UPDATE transport SET transportreclamationrelancemoyen = "1" WHERE id = 6
UPDATE transport SET transportreclamationrelancemoyen = "1" WHERE id = 7
UPDATE transport SET transportindemnisationdate = "09/06/2012" WHERE id = 1
UPDATE transport SET transportindemnisationdate = "09/19/2012" WHERE id = 6
UPDATE transport SET transportindemnisationdate = "09/11/2012" WHERE id = 7
UPDATE transport SET transportindemnisationmontant = "600" WHERE id = 1
UPDATE transport SET transportindemnisationmontant = "600 €" WHERE id = 6
UPDATE transport SET transportindemnisationmontant = "600" WHERE id = 7
UPDATE transport SET transportindemnisationmoyen = "1" WHERE id = 1
UPDATE transport SET transportindemnisationmoyen = "1" WHERE id = 6
UPDATE transport SET transportindemnisationmoyen = "1" WHERE id = 7
UPDATE transport SET transportreclamationobservation = "Non pas d'observation" WHERE id = 1
UPDATE transport SET transportreclamationobservation = "non plus" WHERE id = 6
UPDATE transport SET transportreclamationobservation = "encore moins" WHERE id = 7 
```

不用告诉你这太慢了，就像 5 秒来一个一个地存储所有数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:51:03.833

您可以使用[ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)：

```
INSERT INTO table (id,Col1,Col2) VALUES (1,1,1),(2,2,3),(3,9,3),(4,10,12)
ON DUPLICATE KEY UPDATE Col1=VALUES(Col1),Col2=VALUES(Col2); 
```

它的作用的小总结：

> If you specify ON DUPLICATE KEY UPDATE, and a row is inserted that would cause a duplicate value in a UNIQUE index or PRIMARY KEY, an UPDATE of the old row is performed.

If you're running these queries from a PHP script, you should make sure that you're using prepared statements (mysqli or PDO). If you're using the regular mysql extension, you'll be making a round-trip to the database server with each query. However, with prepared statements, you can group similar queries into one prepared statement and execute it multiple times with different data.

# streaming - 如何使用 flowplayer 从远程服务器流式传输文件并且不使用到 http 服务器的流量？

> ID：12527136
> 
> 赞同：1
> 
> 时间：2012-09-21T08:46:02.820
> 
> 标签：streaming, flowplayer, traffic, litespeed

我有一点问题。我正在使用 flowplayer 和 litespeed 服务器来流式传输视频。问题是我正在使用两台服务器，其中一台是 http litespeed 服务器，其中包含我的网站/脚本等，另一台仅用于存储视频文件和 mysql 数据库。

前段时间开始出现问题 - 网站变慢了。经过一番调查，我发现两台服务器之间的流量很大。视频托管服务器不会将文件直接发送到 flowyplayer 和客户端，而是将它们发送到 http 服务器，然后将数据转发给阅读器。我想知道为什么会这样？

# licensing - 应用程序的 GPL 库

> ID：12527140
> 
> 赞同：0
> 
> 时间：2012-09-21T08:46:16.837
> 
> 标签：licensing, gpl

这可能以前被问过，但我在搜索中找不到答案，所以我走了。我试过阅读维基百科，但只是感到困惑。

我可以创建一个在前端或后端使用 GPL 许可库的应用程序（免费或收费）吗？

（我假设大多数人已经在这样做，只是想检查一下）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:15:00.567

是的，您可以销售包含 GPL 代码的产品。然而，有一个重要的警告。

如果您创建一个应用程序，您必须准备好向您的任何/所有客户提供其完整源代码*。然后谁能有效地编译此源并免费提供相同的产品。

如果您创建仅由您托管的服务器端代码，则无需向您的客户提供源代码。

(*) 实际上比这要复杂一些。如果您静态链接 GPL 代码，您肯定需要发布您的源代码，但某些动态链接方法可能会被豁免。如果对此提出质疑，您可能必须准备支付法律费用，因此假设您需要根据要求发布所有代码可能更容易。

# c++ - 如何在没有竞争条件的情况下将 QFutureWatcher 与 QtConcurrent::run() 一起使用

> ID：12527141
> 
> 赞同：11
> 
> 时间：2012-09-21T08:46:16.167
> 
> 标签：c++, qt, concurrency, future

如果我正确理解了 QFutureWatcher 文档中的以下代码，则最后一行之间存在竞争条件：

```
// Instantiate the objects and connect to the finished signal.
MyClass myObject;
QFutureWatcher<int> watcher;
connect(&watcher, SIGNAL(finished()), &myObject, SLOT(handleFinished()));

// Start the computation.
QFuture<int> future = QtConcurrent::run(...);
watcher.setFuture(future); 
```

如果函数`...`在下`QtConcurrent::run(...)`一行被调用之前完成，那么`watcher.finished()`信号将永远不会被触发。我的假设正确吗？如何解决此错误？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-21T08:50:28.793

来自[http://doc.qt.io/qt-4.8/qfuturewatcher.html#setFuture](http://doc.qt.io/qt-4.8/qfuturewatcher.html#setFuture)

> 可能会针对未来的当前状态发出其中一个信号。例如，如果未来已经停止，将发出完成的信号。

换句话说，如果`QtConcurrent::run(...)`完成 before`setFuture`被调用，`setFuture`仍然会在当前状态上发出信号`QFuture`。所以，你不需要做任何事情来避免竞争条件。

但是，根据您的代码的其余部分，您可能需要调用`QFuture::waitForFinished()`以确保您的`MyClass`,`QFuture`并且在完成*之前*`QFutureWatcher`不会超出范围。 *`QtConcurrent::run(...)`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-09T17:33:47.723

我在单元测试中运行这个片段并且`QSignalSpy`没有从`QFutureWatcher`. 我通过在检查前显式调用解决了这个问题`QCoreApplication::processEvents()`：

```
QFutureWatcher<int> watcher;
QSignalSpy spy(&watcher, &QFutureWatcher<int>::finished);

QFuture<int> future = QtConcurrent::run([](){
    qDebug() << "compute";
    return 42;
});
watcher.setFuture(future);
QCOMPARE(watcher.result(), 42);
QCOMPARE(spy.count(), 0);
QCoreApplication::processEvents();
QCOMPARE(spy.count(), 1); 
```

信号可能是从线程发出的，在这种情况下，信号会排队而不是直接执行。*

# microsoft-metro - Metro Style App 上的 PDF 查看器，无需启动单独的应用程序

> ID：12527143
> 
> 赞同：2
> 
> 时间：2012-09-21T08:46:25.683
> 
> 标签：microsoft-metro, pdf-reader

我发现 Foxit Embedded PDF SDK 无需启动即可阅读 pdf。太好了。它适用于 Windows 8 中的 Metro Style App。它们还提供演示（示例代码）。但他们只提供 30 天的试用版。

我想知道是否有其他供应商（免费完整版）。

所以，请回复我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:55:47.383

据我了解，没有像样的开源 c# pdf 渲染引擎。

这个问题列出了一些可能性：[How to render pdfs using C#](https://stackoverflow.com/questions/518878/how-to-render-pdfs-using-c-sharp)

大多数 Web 浏览器都可以呈现 PDF，因此您可以将 Web 浏览器嵌入到您的应用程序中，然后将 pdf 交给它来呈现：

[http://www.codeguru.com/csharp/.net/embedding-a-web-browser-in-a-windows-8-metro-c-application.htm](http://www.codeguru.com/csharp/.net/embedding-a-web-browser-in-a-windows-8-metro-c-application.htm)

我会质疑你为什么这样做。如果要显示内容，那么为什么该内容是 PDF？作为 HTML 页面，它对用户来说不是更有用吗？如果要阅读用户提供的 pdf，那么为什么要嵌入？Windows 文件处理理念的重点是用户拥有打开它们的文件和应用程序。如果你覆盖了这种行为，你会让你的应用变得更糟。

# language-agnostic - 当今的电子书格式：EPUB 是事实上的标准？

> ID：12527144
> 
> 赞同：0
> 
> 时间：2012-09-21T08:46:30.217
> 
> 标签：language-agnostic

在任何软件项目中，输出格式的选择都是一个重要的决定。我有为电子书客户分发数字内容的项目，理想情况下，我们只提供一种格式的下载……另外一种格式是“加成本”，用于软件和内容修订。

1.  今天，这种格式是 EPUB 吗？
2.  现在更好地提供一种以上的格式？

* * *

电子书有一场“格式大战”（或“eBabel 之塔”），谁赢了？
[维基百科说](http://en.wikipedia.org/wiki/Comparison_of_e-book_formats)   “ *……某些电子书格式显然比其他格式更受欢迎，并且得到更广泛的支持。EPUB 格式是最广泛支持的（……）也就是说，它被最多的电子阅读器支持*” .

所以，换句话说：

1.  **EPUB是一种共识吗？**对于当今的电子书阅读器来说，它是最受欢迎的吗？
2.  **关于“第二名”（PDF？），格式是什么？这第二种格式对电子书阅读器仍然很重要吗？** 有可靠和更新的统计数据吗？（[2010 年示例](http://www.johndcook.com/blog/2010/07/20/e-book-formats/)）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T07:38:56.297

此内容[已转移到 eBooks.stackexchange](https://ebooks.stackexchange.com/a/8768/2531)，请在此处编辑和协作...此处将被删除。

* * *

我做了我的功课。一些最新的结果和概念分析。

## 概念

在这里使用：

*   *电子书*和*电子书阅读器*：[电子书](http://en.wikipedia.org/wiki/E-book)是内容，是文件，*电子阅读器*是设备，是硬件。

*   *电子阅读器*：这里考虑到电子阅读器是“[纸质替代品](http://www.ecolibris.net/ebooks.asp)”设备，因此台式电脑或 iPhone 不是电子阅读器，但[平板电脑](http://en.wikipedia.org/wiki/Tablet_computer)是。

*   “*可用的电子书格式*”：从广义上讲，*[PostScript](http://en.wikipedia.org/wiki/PostScript)*或*[PDF](http://en.wikipedia.org/wiki/Portable_Document_Format)*等面向纸张的格式是电子书可接受的，可以称为*电子书格式*。

*   真正的、严格意义上**的电子书格式**：既不是 HTML 之类的“网络格式”，也不是 PDF 之类的“纸质格式”。电子书是“[分页媒体](http://www.w3.org/TR/css3-page/)”，与纸质书一样，但具有图表灵活性：电子书需要[可重排](http://en.wikipedia.org/wiki/Reflowable_document)，内容可调整大小，以适应不同的分辨率和不同[的收音机屏幕](http://en.wikipedia.org/wiki/Aspect_ratio_(image))。
    PS：HTML 不是电子书格式，因为它不是“全部在一个文件中”。

*   “交互式电子书格式”：对电子书的另一个日益增长的需求是交互性（[EPUB 示例](http://www.youtube.com/watch?v=nuHuotsUxyE)），但我们可以在这里忽略这种需求，支持严格意义上的[经典书籍](http://www.gutenberg.org/)进入数字设备的必要性。

因此，从概念上讲，PDF 被认为是一种（可用的）*电子书格式*，因为它是旧的面向纸张的系统的遗留物，在该系统中，作者和布局设计师都以纸张大小为导向。截至2012年，“电子书阅读器”的屏幕是内容的最终接收者，布局创作面向（某些）屏幕适应性。

有三个重要的标准——检查一种格式是否是*事实上*的标准的指标——用于选择电子书格式的流行度：

*   最广泛**支持的格式**：在流行的电子书阅读器之间，关于每种格式的直接支持（没有内容丢失或转换需求）的统计数据。

*   更多**下载**：销售和下载计数，书店可靠的“销售统计”和图书馆的下载统计。

*   **可用性**：不同在线链接的数量（在线图书馆和其他），每个链接指向公共领域电子书的不同文件下载。[示例：项目](http://www.gutenberg.org/)、[SciELO](http://www.scielo.org/)等的标题数量。

## 结果

假设可靠的信息（见来源），

*   *支持的格式*（通过平板电脑和严格的电子阅读器）：PDF 和 EPUB。我踢大约 90% 的 PDF，大约 80% 的 EPUB。
*   *下载*（仅限电子书销售，全球）：PDF、EPUB 和（仅限美国市场）MOBI。我踢大约 50% PDF，大约 40% EPUB。
*   *可用性*（仅限公共领域电子书）：PDF 和 EPUB。我大约 90% 的 PDF 和 TXT，只有 10% 的 EPUB。

**结论**：

*   如果我的软件问题是“*提供什么电子书格式*”，我需要检查我的公众。**对于非美国公众，EPUB 是唯一的格式**。适用于美国公众、EPUB 和 MOBI。
    注意：这是针对“*电子书需求*”，但是，请检查您的公众及其必需品。如今，印刷书籍也是必需品，人们仍然喜欢使用纸张。PDF（具有足够的纸张大小）可能是通用（纸张加电子书）需求的不错选择。

*   如果我的问题是“*接受什么电子书格式*”（例如接收电子书建立图书馆），还有更多的选择，还有一些转换问题需要用软件解决。

*   如果没有软件问题，只能说“标准是”或“最流行的是”。你可以说：“最不受欢迎的是PDF”，“最容易接受的是PDF和EPUB”，而**严格意义上来说，EPUB是最流行的，*事实上*的标准电子书格式**。

## 来源

（请在此处编辑以更正或添加更多来源）

假定按上下文（正式/非正式）、数据库（一般/严格）等提供可靠/中等/非正式来源。

1.  **可靠来源**

1.1。[维基百科电子书格式比较](http://en.wikipedia.org/wiki/Comparison_of_e-book_formats)：显示 EPUB 和 PDF 是最广泛支持的格式。

1.2\. [维基百科在市场份额信息中表示为可靠](http://en.wikipedia.org/wiki/E-book#Market_shares)：

```
 1.2.1\. Goldman Sachs 2010 report cited by [Quantity market shares of e-book sales in US](http://www.bloomberg.com/news/2011-03-22/barnes-noble-is-said-to-be-likely-to-end-search-for-buyer-without-a-sale.html): with Amazon (58%) and Barnes&Noble (27%) dominating. Amazon offers MOBI, the others EPUB.

  1.2.2\. [Market share of e-readers in Canada by Ipsos Reid at January 2012](http://www.ipsos-na.com/news-polls/pressrelease.aspx?id=5399): Kobo 46% (EPUB), Amazon 24%  (MOBI) and Sony 18% (EPUB) dominating. 
```

1.3\. [*维基百科在平板电脑*](http://en.wikipedia.org/wiki/Tablet_computer)[上引用的](http://en.wikipedia.org/wiki/Tablet_computer)*消息来源称，“截至 2012 年 10 月，最畅销的平板电脑是 Apple 的 iPad，售出 1 亿台，(...) 其次是亚马逊的 Kindle Fire，售出 700 万台，Barnes and Noble 的 Nook 售出 500 万台，而谷歌的 Nexus 7 拥有 300 万台。”：Apple、Nook 和 Nexus 都是 EPUB，因此**EPUB 占平板电脑市场的 95% 以上**（而 MOBI 不到 5%）。*

 *1.4\. [SciELO 图书馆](http://www.scielo.org/)：2012 年 11 月共有 377772 篇（37.8 万）篇 PDF 和 EPUB 格式的文章。

2.  **非正式来源**

2.1。[古腾堡图书馆项目](http://www.gutenberg.org)：超过 40000（40000）本 TXT 书籍，其他格式的书籍较少，包括 EPUB 和 MOBI。

2.2\. [Smashwords 书店 2010 年统计](http://blog.smashwords.com/2010/02/most-popular-ebook-formats-revealed.html)：统计销售/下载，35% PDF，22% EPUB，15% MOBI，9% TXT。

2.3\. [O'Reilly 书店 2009 年统计](http://toc.oreilly.com/2009/01/format-comparison-pdf-epub-and-mobi-downloads-from-ebook-bundles.html)：显示 PDF 和 EPUB 占主导地位。

2.4\. [自 2009 年以来，Manybooks 书店在线统计数据](http://manybooks.net/format_stats.php)：PDF (24%)、EPUB (22%) 和 MOBI (10%) 占主导地位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:52:10.067

EPUB 和 MOBI (Kindle)。为什么您只想提供一种格式？从 EPUB 到 MOBI 的转换在最好的情况下是一次调用`kindlegen`.*

# ios - Xcode 4.5：使用工作区时未更新依赖项

> ID：12527147
> 
> 赞同：2
> 
> 时间：2012-09-21T08:46:40.160
> 
> 标签：ios, xcode, xcode4, workspace, xcode4.5

我今天安装了 Xcode 4.5，但遇到以下问题：

我使用工作区同时开发库和应用程序。当我更改库中的某些内容并构建应用程序时，库将使用新的更改重新构建。这在 Xcode 4.3/4.4 中运行良好。但是，从 Xcode 4.5 开始，这似乎不再起作用了。我总是必须“清理”项目，否则更改是不可见的，尽管目标是按正确的顺序构建的（lib、app）。

有没有人有同样的经历？是否存在解决方法？

-亚历山大

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T18:26:55.157

这是造成这种情况的一个可能原因（可能还有其他原因）：

确保显示身份和类型检查器并选择应用程序项目（而不是库）中的 libWhatever.a 文件。如果您看到位置：相对于项目，这就是您的问题。

*   单击相对于项目并将其更改为相对于构建产品。
*   这将改变链接的类型，但它仍然会被破坏。
*   单击定位按钮并找到输出文件。

老实说，您最好直接编辑 pbxproj。您的补丁将如下所示：

```
Index: App.xcodeproj/project.pbxproj
===================================================================
--- App.xcodeproj/project.pbxproj     (revision 28061)
+++ App.xcodeproj/project.pbxproj     (working copy)
@@ -28,7 +28,7 @@

 /* Begin PBXFileReference section */
           A7052F8F1358BFCC00178DAC /* libsqlite3.dylib */ = {isa = PBXFileReference; lastKnownFileType = "compiled.mach-o.dylib"; name = libsqlite3.dylib; path = usr/lib/libsqlite3.dylib; sourceTree = SDKROOT; };
-          A74F787413566130000D0AFC /* libLibrary.a */ = {isa = PBXFileReference; explicitFileType = archive.ar; path = libLibrary.a; sourceTree = SOURCE_ROOT; };
+          A74F787413566130000D0AFC /* libLibrary.a */ = {isa = PBXFileReference; lastKnownFileType = archive.ar; path = libLibrary.a; sourceTree = BUILT_PRODUCTS_DIR; };
           A74F787D135665A3000D0AFC /* Macros.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; name = Macros.h; path = DslExt/Macros.h; sourceTree = "<group>"; };
           A74F787E135665A3000D0AFC /* Foundation-dsl.m */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.objc; name = "Foundation-dsl.m"; path = "DslExt/Foundation-dsl.m"; sourceTree = "<group>"; };
           A74F787F135665A3000D0AFC /* Foundation-dsl.h */ = {isa = PBXFileReference; fileEncoding = 4; lastKnownFileType = sourcecode.c.h; name = "Foundation-dsl.h"; path = "DslExt/Foundation-dsl.h"; sourceTree = "<group>"; }; 
```

我在这里找到了这个答案：

[在需要时配置 XCode 4 工作区以构建依赖项的正确方法是什么？](https://stackoverflow.com/questions/5427396/whats-the-correct-way-to-configure-xcode-4-workspaces-to-build-dependencies-whe)

# jquery - Ajax 调用 onclick 只发生一次

> ID：12527150
> 
> 赞同：1
> 
> 时间：2012-09-21T08:46:57.343
> 
> 标签：jquery, ajax, forms, onclick, submit

我的页面中有一个要提交的 from，并且我使用了 ajax 调用：

```
 $(document).ready(function() {
    $("#password_change").click(function() {                    
        $.ajax({
            type: 'POST',
            url: 'set_password.php',
            data: 'password=' + $('#password').val(),
            success: function(data) {
                var obj = JSON.parse(data);              
                if(obj.success == '1') {    
                    $('#message').show();                            
                }else{
                    $('#fail_message').show();                            
                }
            }
        });
    });
 }); 
```

我的表格：

```
<form id="password_form" name="password_form" action="" method="POST" style="">
    <input type="password"  class="required" id="password" value="" />
</form> 
```

第一次单击提交按钮时，我收到了正确的消息，并且一切似乎都运行良好。然后我再次单击提交按钮第二次，但是我通过 ajax 调用发送的数据是空的，所以我收到了错误的 ajax 调用回复。

有谁知道为什么会发生这种情况？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:54:34.867

I think when button click, it also post backed. You stop trigger post back using [event.preventDefault()](http://api.jquery.com/event.preventDefault/) after onclick. try modify code:

```
...
$("#password_change").click(function(e) {  
   e.preventDefault();
   $.ajax({
     ...
     ...
   });
});
... 
```

# android - 如果我显示一个触发电话的按钮，是否可以向用户隐藏电话号码？

> ID：12527151
> 
> 赞同：0
> 
> 时间：2012-09-21T08:46:57.323
> 
> 标签：android, ios, phone-call

如果我在屏幕上显示一个允许查看拨打电话的按钮，我该如何隐藏电话号码，以便用户无法看到该号码并从他的通话记录中再次拨打电话？如果这在 iOS 或 Android 上可行，我很感兴趣

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:07:19.613

不会。即使您可以，它也会显示在拨号器和用户的通话记录中。为什么要保密？

# ssrs-2008 - 划分包含在 1 行组中的两个列组

> ID：12527154
> 
> 赞同：1
> 
> 时间：2012-09-21T08:47:11.440
> 
> 标签：ssrs-2008, reporting-services, ssrs-tablix

假设我有一个表，其中我的行组是月份，2 个列组是：

*   一种基于现场状态，
*   另一个是离岸身份

桌子：

```
month  [onsite]  [offshore]  [total]   [%]
jan     2         3           5       (2/3) 
```

如何实现%列？

我只能在我有 1 个列组和 1 个总数的情况下应用计数功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T10:31:35.270

您可以`=ReportItems!Textbox123.Value/ReportItems!Textbox456.Value`在 % 表达式上使用（相应地更改文本框的 ID）

# wolfram-mathematica - Stephen Wolfram 的规则 30 模式说明

> ID：12527155
> 
> 赞同：3
> 
> 时间：2012-09-21T08:47:14.690
> 
> 标签：wolfram-mathematica, rule, cellular-automata

## 问题

我正在研究 Wolfram's Mathematica 生成随机数的方法，发现它使用了[元胞自动机](http://en.wikipedia.org/wiki/Elementary_cellular_automaton) [规则 30](http://en.wikipedia.org/wiki/Rule_30)。它的基本解释如下：

**一个基本元胞自动机的**演化完全可以用一个表格来描述**它的权利**。

由于**与给定单元相邻的三个单元有 2 x 2 x 2 = 2^3 = 8 种可能的二进制状态，因此共有 2^8 = 256 个基本元胞自动机，每个都可以用 8-位二进制数**（Wolfram 1983, 2002）。例如，给出规则 30 演变的表格（在二进制中，规则 30 写为**30 = 00011110**）如下所示。在该图中，三个相邻单元格的可能值显示在每个面板的顶行中，而中心单元格在下一代中的结果值显示在下面的中心。

![第 30 条](../Images/195911cc6bc01af1aff1486686031bac.png)

## 问题

上图与表格上部的各个模式有何关系？我知道该图是由它们组成的，但对它是如何按顺序形成的感到困惑。我没有看到任何行/列区别特征可能会告诉我这些层是使用给定表中的上部行构建的。简而言之，我想看看这**背后的俄罗斯方块之类的现象**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T08:57:33.840

图案按顺序逐行形成。我们从第一行开始：一个黑色的单元格。

在下一行中，每个单元格查看上一行中的三个相邻单元格，并将该模式​​与规则进行比较。所以，左边的单元格看到`--X`，中间的单元格看到`-X-`，右边的单元格看到`X--`；根据规则，这三个都产生黑色单元格（每个规则的底部单元格）。

在下一行中，中间的五个单元格看到`--X`、`-XX`、`XXX`、`XX-`和`X--`，所以它们`XX--X`经过规则转换后变为。

请注意，任何在其上方看到三个白色单元格的单元格也将是白色的，因此我们不必担心 45 度金字塔之外的单元格。还要注意，因为`--X -> X`和`X-- -> X`，所以 45 度金字塔在每一行的每一侧总是有一个黑色单元格。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T12:15:16.733

主图**不是**由上部的模式组成的，而是由它们通过算法**生成**的。

主图一次演变一排。从第 1 行中心的一个黑色单元格开始。

表的上半部分是用于生成图表下半部分的每一新行的规则。

新行上每个单元格的颜色（黑/白）由新单元格上方的 3 个单元格决定。规则决定颜色。例如，您示例中的第一条规则说，如果上面的 3 个单元格都是黑色的，那么新行中的单元格将是白色的。

每个图表都使用相同的 8 种模式来确定下一行单元格的颜色。

这 8 条规则的输出形成一个二进制字，如图所示，这是`Rule`. 在这种情况下，输出为 00011110，即二进制 30。因此命名为规则 30。

对这些规则的潜在兴趣在于，可以从这些简单的原则中生成高度复杂的模式，抱歉，这里没有俄罗斯方块 :)

# c++ - strcpy 后缓冲区的 C++ 错误

> ID：12527158
> 
> 赞同：-2
> 
> 时间：2012-09-21T08:47:24.857
> 
> 标签：c++, string, strcpy

这是我的一段代码

```
 std::string s;  
    getline(cin, s);

    std::cin.clear();
    s.erase(std::remove_if(s.begin(), s.end(), my_predicate), s.end());
    char *str1  = (char*)malloc(sizeof(char)*(s.size()+1));
    const int length = s.length();
    for(int i=0; i < length; ++i)
    {
        s[i] = std::tolower(s[i]);
    }
    strncpy(str1,s.c_str(), s.length()+1);

    printf("\n"); 
```

问题是如果我不打印 \n 代码就会崩溃。我也尝试过 memcpy 和 strdup 但无济于事。有什么错误或任何方法可以摆脱这个吗？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:08:20.813

如果您绝对需要 的可写副本`std::string s`，请查看[相关问题的答案](https://stackoverflow.com/a/347959/671366)；代替

```
char *str1  = (char*)malloc(sizeof(char)*(s.size()+1));
strncpy(str1,s.c_str(), s.length()+1); 
```

基本上，这样做：

```
boost::scoped_array<char> writable(new char[s.size() + 1]);
std::copy(s.begin(), s.end(), writable.get());
writable[s.size()] = '\0'; 

// access char * via writable.get()! 
```

这带来了额外的好处，那就是不必担心事后是否释放任何内存！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:04:17.383

虽然我认为您的代码并不完美，但我看不出它为什么会崩溃。既然你说， printf("\n") 可以防止崩溃，我想堆已经损坏了。也许显示来自 myPredicate 的代码或单独测试给定的代码片段以找出原因。

# ios - TabBar 项目本地化

> ID：12527161
> 
> 赞同：4
> 
> 时间：2012-09-21T08:47:34.340
> 
> 标签：ios, tabbar

要本地化我在 AppDelegate 中拥有的标签栏项目，请使用以下代码：

```
self.tabBarController = (UITabBarController*)self.window.rootViewController;
tabBarController.delegate = self;
tabBarController.selectedIndex = 0;
[[tabBarController.tabBar.items objectAtIndex:0] setTitle:NSLocalizedString(@"Home", nil)];
[[tabBarController.tabBar.items objectAtIndex:1] setTitle:NSLocalizedString(@"Requests", nil)];
[[tabBarController.tabBar.items objectAtIndex:2] setTitle:NSLocalizedString(@"Account", nil)];
[[tabBarController.tabBar.items objectAtIndex:3] setTitle:NSLocalizedString(@"Alarms", nil)];
[[tabBarController.tabBar.items objectAtIndex:4] setTitle:NSLocalizedString(@"Settings", nil)]; 
```

现在我添加了另一个项目并尝试添加一个索引 = 5 的新行，但我得到一个“NSRangeException”，因为索引 5 超出了范围。Xcode 自动添加了“更多”部分，并将我的最后两个项目（设置和新项目）移到了那里。我还看到用户现在可以自定义选项卡栏来选择项目顺序。那么现在我如何才能引用所有项目并将它们本地化呢？注意：我正在使用故事板。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-29T12:29:24.437

对我来说最简单的解决方案是实现**awakeFromNib**方法，即使使用选项卡也会运行。

```
// Objective-C
- (void)awakeFromNib{
    [super awakeFromNib];
    self.title = NSLocalizedString(@"YOUR-LOCALISATION-TAG", @"");
}

// Swift
override  func awakeFromNib() {
    super.awakeFromNib()
    self.title = NSLocalizedString("YOUR-LOCALISATION-TAG", comment: "")
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:58:52.953

要本地化首先将文本翻译成您需要翻译的语言。没有分离敌人正常的本地化和tabBarItem。

将文本赋予相应语言的本地化字符串。

```
"Home"="translate text";
"Requests"="translate text";
"Account"="translate text";
"Alarms"="translate text";
"Settings"="translate text"; 
```

对于在此处设置的 TabbarButton 的设置标题。它必须在实现类中实现

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self)
{
   // set title here
}
return self;
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-04-28T09:56:07.637

我不认为添加这么多标签栏项目是一个好习惯，因为没有足够的空间让用户甚至触摸每个项目。将相应的琐碎项目放入一个**“更多”**栏项目会更好。对您不利，但对更好的用户体验有利。好吧，如果您确实有这个要求，您可以制作一个自定义的 UIView 作为您的标签栏（当然，这不是真正的标签栏）并将您想要的任何内容放入其中。

# matlab - 如何在matlab中绘制ccdf

> ID：12527164
> 
> 赞同：0
> 
> 时间：2012-09-21T08:47:51.923
> 
> 标签：matlab

我想在matlab中绘制一个ccdf图，这是我发现的一个例子：

[http://www.mathworks.se/help/comm/ref/comm.ccdfclass.html](http://www.mathworks.se/help/comm/ref/comm.ccdfclass.html)

我稍微修改了一下

```
A = fopen('alltimeinterval.txt');
B = fscanf(A,'%f');
hCCDF = comm.CCDF;

[CCDFy,CCDFx]=step(hCCDF,B)
plot(hCCDF)
set(gca,'XScale','log') 
```

数组 B 包含一列浮点数，我得到的图形是这样的： ![在此处输入图像描述](../Images/d65684d9ea2a394a8b346e86a68d1df0.png)

但我希望 x 和 y 轴如下图所示： ![在此处输入图像描述](../Images/d684af26e84012a3f0431000d68e1055.png)

有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:03:52.607

您需要在轴和绘图上设置一些样式参数。它非常简单，并且在文档中得到了很好的解释。

[http://blogs.mathworks.com/loren/2007/12/19/plotting-with-style/](http://blogs.mathworks.com/loren/2007/12/19/plotting-with-style/)

[http://www.mathworks.com/help/matlab/ref/axes_props.html](http://www.mathworks.com/help/matlab/ref/axes_props.html)

[http://www.mathworks.com/help/matlab/ref/linespec.html](http://www.mathworks.com/help/matlab/ref/linespec.html)

# view - 上视图不覆盖视图的下边框

> ID：12527170
> 
> 赞同：1
> 
> 时间：2012-09-21T08:48:16.673
> 
> 标签：view, border, visible

我有一个从 NSView 继承的视图

```
view.layer.borderWidth = 1.0;
view.layer.borderColor = redColor; 
```

然后，创建另一个视图覆盖它，但视图下的边框仍然可见，为什么？

# android - Android如何将SD文件保存到云端

> ID：12527174
> 
> 赞同：1
> 
> 时间：2012-09-21T08:48:21.557
> 
> 标签：android, file, cloud, sd-card, android-backup-service

我尝试在云上保存/备份 sd 文件，但找不到这样做的方法。

我明白`BackupAgentHelper`了，但它在 doc 上说它仅适用于`sharedPreferences`内部文件。

这是一种使用`FileBackupHelper`SD 卡上的文件的方法？或者也许我必须使用其他功能进行备份？

我试试这个：

```
File root = new File(Environment.getExternalStorageDirectory().getAbsolutePath()+"/"+Globals.BASE_PATH);
    FileBackupHelper helper = new FileBackupHelper(this, root.getAbsolutePath());
    addHelper(FILES_BACKUP_KEY, helper); 
```

但它不工作...

**固定：我使用 DropBox API 来备份/恢复**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T10:38:26.503

Android保存/备份API在我的情况下没有用，因为我想保存SD文件......所以我必须使用外部保存/备份系统，如GDrive或DropBox。我选择 DropBox 是因为它的效果非常好，而且使用起来非常简单。

# jquery - jQuery 对话框中的列表 - MVC，Ajax

> ID：12527175
> 
> 赞同：0
> 
> 时间：2012-09-21T08:48:23.873
> 
> 标签：jquery, ajax, asp.net-mvc-3, jquery-ui

我有 1 个问题没有找到答案。

(MVC)：在主视图上，我已将**PartialView**加载到 Jquery UI 对话框中。我创建了一些东西，然后在提交时将所有内容发送到数据库。在表单中，我有一个带有“multiple”属性的输入 type="file"，它可以帮助我上传一些照片

```
 ( <input type="file" multiple="") 
```

. 我将**照片列表（HttpPostedFileBase）**发送到数据库。问题是**我总是收到一个 NULL list**。

***问：***有什么问题？我也有一些不起作用的 Ajax 代码。

在另一个返回视图的控制器上使用的相同代码运行良好。我认为这是对话的问题。

主视图中的对话框代码：

```
 $('#element').dialog({
        autoOpen: false,           
        modal: true,
        open: function (event, ui) {
            $(this).load('@Url.Action("AddCar", "Cars")', function (html) {                    
                $('form', "#sDiv").submit(function () {
                    $.ajax({
                        url: this.action,
                        type: this.method,
                        data: $(this).serialize(),
                        success: function (res) {
                            if (res.success) {
                                $('#element').dialog('close');
                            }
                            window.location.reload();
                        }
                    });
                    return false;
                });
            });
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:47:14.740

您似乎正在使用 AJAX 提交表单。但这不受支持。您不能使用 jQuery AJAX 函数上传文件。你可以看看[jquery.form 插件](http://www.malsup.com/jquery/form/)，它也支持[上传文件](http://www.malsup.com/jquery/form/#file-upload)。

那里有2个营地：

1.  HTML5 - 受现代浏览器支持，您可以使用File API通过 AJAX[上传文件。](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)
2.  遗留阵营 - 像 Internet Explorer 这样不支持文件 API 的东西，你必须回退到隐藏 iframe 等技术来模拟它。这就是 jquery.form 插件所做的 - 它检测浏览器属于哪个阵营并使用适当的技术

您还可以签出许多其他文件上传组件，例如[Uploadify](http://www.uploadify.com/)、[Plupload](http://www.plupload.com/)、[Blueimp File Upload](http://blueimp.github.com/jQuery-File-Upload/)、[Valums AJAX uploader](https://github.com/valums/file-uploader)等。如果您不想编写所有底层传输机制，只需选择一个并集成到您的应用程序中。

# select - 没有在正确的条件下获取数据？

> ID：12527176
> 
> 赞同：0
> 
> 时间：2012-09-21T08:48:30.487
> 
> 标签：select, abap, opensql

在选择语句中，我给出了正确的条件，但没有取回数据。

当我在这些条件下从 se16n 尝试时，它会变成一行，但是当我尝试在带有 select 语句的程序中时，它会变成空的内部表。这是示例代码。

gt_tcurr 是一个包含 kurst fcurr tcurr gdatu ukurs 组件的内部表。

```
SELECT kurst fcurr tcurr gdatu ukurs
    INTO TABLE gt_tcurr
    FROM tcurr
    WHERE kurst = p_kurst    " as M
      AND gdatu = p_budat    " as 21.09.2011
      AND fcurr = p_waers    " as EUR
      AND tcurr = lv_waers.  " as TRY 
```

就像我说的; 在这些条件下，se16n->tcurr table 将我变成一行，但 select 语句将我变成了一个空行。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:51:43.273

```
CONVERT DATE p_budat INTO INVERTED-DATE gv_date." solution :)
SELECT ukurs
INTO gs_tcurr-ukurs
FROM tcurr
WHERE kurst = p_kurst
  AND gdatu = gv_date
  AND fcurr = p_waers
  AND tcurr = lv_waers. 
```

# ruby - 红宝石数组 each_with_index

> ID：12527178
> 
> 赞同：-1
> 
> 时间：2012-09-21T08:48:35.930
> 
> 标签：ruby, arrays, iteration, command-line-arguments

在这段代码中，我想根据代码提供的索引值来迭代我的数组，比如一次我想迭代并获得 ARGV[1] 第二次 ARGV[3] 的输出。

认为

```
ARGV = ["-f","abc","-x","-p","wer"]

#!/usr/bin/env ruby

@lenght = ARGV.length
@factory_config_xml = ""
@num = 0

if @lenght != 0
    ARGV.each_with_index do |a , x|

        @num = @num + 1
        b = ARGV[@num]

        if ((a == "-f") && !(b.match "-") )

            @factory_config_xml = b
            x += 1
            @num = @num + 1

        elsif ((a == "-x") && !(b.match "-") )

            @factory_config_xml = b
            x += 1
            @num = @num + 1

        elsif ((a == "-p") && !(b.match "-") )

            @factory_config_xml = b
            x += 1
            @num = @num + 1
        end

    end
end

puts @factory_config_xml 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:50:51.370

与其重新发明轮子，不如使用选项解析器库来解析程序参数。

例如，[`OptionParser`](http://ruby-doc.org/stdlib-1.9.3/libdoc/optparse/rdoc/OptionParser.html)你的生活会容易得多。

在这个特定的问题中，将`x`变量递增 1 对您没有帮助，因为在下一次迭代`each_with_index`中将再次传递下一个整数。因此，您应该创建自己的循环：

```
i = 0
while (i < ARGV.length) do
  # do your stuff with the incrementing but take care to increment in each loop
end 
```

# postgresql - postgresql四舍五入函数

> ID：12527179
> 
> 赞同：6
> 
> 时间：2012-09-21T08:48:39.637
> 
> 标签：postgresql, floating-point, plpgsql, rounding, floating-accuracy

PostgreSQL 中的 round(numeric,integer) 函数只四舍五入：

```
round(cast (41.0255 as numeric),3) ==> 41.026 
```

因为我们需要一个返回 41.025 的 round 函数并且（非常令人惊讶）在 PostgreSQL 中没有这样的函数（我们使用的是 9.1.5），所以我们编写了一个“包装器”函数，它在第一个版本中非常幼稚并且粗糙...但是由于在 plpgsql 中缺乏对此类问题的本机支持，我们没有找到更好的方法。

代码如下所示。问题是它对于我们的目的来说太慢了。你能建议一个更好的方法来处理这个任务吗？

这是代码：

```
 CREATE OR REPLACE FUNCTION round_half_down(numeric,integer) RETURNS numeric 
    AS $$
    DECLARE
      arg ALIAS FOR $1;
      rnd ALIAS FOR $2;
      tmp1 numeric;
      res numeric;
    BEGIN
      tmp1:=arg;
      IF cast(tmp1 as varchar) ~ '5$'  THEN res:=trunc(arg,rnd);
      ELSE res:=round(arg,rnd);
      END IF;

      RETURN res;
    END;
    $$ LANGUAGE plpgsql; 
```

我需要转换数值并使用正则表达式......这就是（我想）扼杀表演的原因。

你知道：我们需要这个，因为我们必须比较存储在两个不同列（在两个不同表上）但具有不同数字数据类型的数字：一个是双精度数，一个是实数。问题是当插入一个真实的数据类型列时，PostgreSQL 执行 ROUND HALF DOWN 而它没有通过它的数学函数提供这样的选项！

编辑：
该功能实际上是错误的。是第一次快速重写，试图提高工作功能的性能，但速度很慢。

行为必须符合以下条件：
`IF`四舍五入中推迟的小数位被四舍五入`<=5 => trunc`
`ELSE`。

一些例子：

```
select round_half_down(cast (41.002555 as numeric),3) -- 41.002 
select round_half_down(cast (41.002555 as numeric),4) -- 41.0025 
select round_half_down(cast (41.002555 as numeric),5) -- 41.00255 
```

而 PostgreSQL 中的 round 函数给出：

```
select round(cast (41.002555 as numeric),3) -- 41.003 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-21T11:48:41.497

一种方法非常快，无需创建新的 FUNCTION，它可以向下舍入一半，如下所示：

-- 上半场

```
round($n, 3) 
```

-- 下半场

```
round($n-0.5, 3) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T09:09:40.527

> 我们必须比较存储在两个不同列（在两个不同表上）但具有不同数字数据类型的数字：一个是双精度数，一个是实数。

这应该非常快速和简单：

```
SELECT dp_col, real_col
FROM   tbl
WHERE  dp_col::real = real_col 
```

基本上，只需将`double precision`数字转换`real`为进行比较。

* * *

如果这对您不起作用，则此**SQL 函数**应该可以完成*适当的*工作并*更快*地工作：

```
CREATE OR REPLACE FUNCTION round_half_down1(numeric, int)
  RETURNS numeric LANGUAGE sql AS
$func$
SELECT CASE WHEN abs($1%0.1^$2) < .6 * 0.1^$2 THEN
         trunc($1, $2)
    ELSE round($1, $2) END;
$func$ 
```

现在修复了负数，并在评论中输入了来自@sufleR 的信息。
您也可以只使用包含的`CASE`表达式。

[% .. 模运算符
^ .. 取幂](http://www.postgresql.org/docs/current/interactive/functions-math.html#FUNCTIONS-MATH-OP-TABLE)

* * *

这是一个可用于基准测试的快速测试：

```
SELECT n                                   -- Total runtime: 36.524 ms
      ,round_half_down1(n,3)               -- Total runtime: 70.493 ms
      ,round_down_to_decimal_places(n,3)   -- Total runtime: 74.690 ms
      ,round_half_down(n,3)                -- Total runtime: 82.191 ms
FROM  (SELECT random()::numeric AS n FROM generate_series(1,10000)) x
WHERE  round_down_to_decimal_places(n,3)
    <> round_half_down1(n,3) 
```

它还演示了@Parveen 的函数和您编辑的版本是如何计算错误的——它们`trunc()`不应该出现在错误的地方。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-11T02:39:42.123

这很简单：

尝试使用此功能

```
CREATE OR REPLACE FUNCTION ROUND_HALF_DOWN(NUMERIC)
  RETURNS NUMERIC LANGUAGE SQL AS
$FUNC$
  SELECT CASE WHEN ($1%1) < 0.6 THEN FLOOR($1) ELSE CEIL($1) END;
$FUNC$ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-21T07:02:17.897

这是一个更简单的方法

```
CREATE OR REPLACE FUNCTION roundHalfDown(value NUMERIC, prec INTEGER)
RETURNS NUMERIC AS $$
BEGIN
  RETURN trunc(value * 10^prec + 0.5 - 0.000000001) / 10^prec;
END
$$ LANGUAGE 'plpgsql'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-27T07:54:52.390

```
CREATE OR REPLACE FUNCTION public.round_half_down (numeric,integer)
RETURNS numeric AS
$body$
DECLARE
  arg ALIAS FOR $1;
  rnd ALIAS FOR $2;
  tmp1 numeric;
  res numeric;
  vra varchar;
  inta integer;
  ifa boolean;
 BEGIN
    tmp1:= arg;
    vra := substr(cast((arg - floor(arg)) as varchar),3);
    ifa := null;
    FOR i IN 1 .. length(vra) LOOP
        inta := CAST((substr(vra,i,1)) as integer);
        IF (i > rnd) THEN
            IF ((ifa is null) AND inta >= 6)THEN
                ifa := true;
            ELSE
                ifa := false;
            END IF;
        END IF;
    END LOOP;

    IF ifa THEN 
        res:=trunc(arg,rnd);
    ELSE 
        res:=round(arg,rnd);
    END IF;
    RETURN res;
END;
END;
$body$
LANGUAGE 'plpgsql'
VOLATILE
CALLED ON NULL INPUT
SECURITY INVOKER
COST 100; 
```

试试这个希望可以帮助你

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T09:11:17.730

```
create or replace function round_down_to_decimal_places(numeric,integer)
returns numeric stable language sql as $$ 

select
case
when $1 >= 0 then
case when $1 - round($1, 3) < 0 then round($1, 3) - 0.001 else 
round($1, 3) end
else
case when $1 - round($1, 3) > 0 then round($1, 3) + 0.001 else 
round($1, 3) end
end

$$; 
```

您可以通过更改来使用通用（0.001 表示 3 位小数，0.0001 表示 4 位小数等，）

由 OP 编辑​​：@Parveel：我已经修改了您的函数，以使其以一般方式工作。

```
create or replace function round_half_down(numeric,integer)
returns numeric stable language sql as $$ 

select
case
when $1 >= 0 then
    case 
        when ($1 - round($1, $2)) < 0 then cast((round($1, $2) - (1.0/(10^$2))) as numeric) 
    else round($1, $2) end
else
    case 
        when ($1 - round($1, $2)) > 0 then cast((round($1, $2) + (1.0/(10^$2))) as numeric)
    else round($1, $2) end
end

$$; 
```

# php - 时间格式

> ID：12527182
> 
> 赞同：1
> 
> 时间：2012-09-21T08:48:43.140
> 
> 标签：php, timestamp

我目前正在正在构建的网站上显示最新的推文，现在还从页面添加最新的 facebook 状态。

从 twiter 收到的 obj 时间戳格式如下：

`Tue Feb 08 11:29:36 +0000 2011`

为了保持两者的一致性，我还想格式化 facebook 时间戳以显示相同。

我的问题是，`+0000 2011`当我尝试格式化 fb 时间戳但没有得到正确的结果（我认为）时，twitter 时间戳上的内容是什么。

`<?php echo date("D M y h:i:s Z", strtotime($status_ob->timestamp)); ?>`

返回

`Fri Sep 12 09:08:03 7200`

这是正确的还是我错过了什么。

问候。

菲尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:53:48.910

This should give you the format you're looking for.

```
<?php echo date("D M d h:i:s O Y", strtotime($status_ob->timestamp)); ?> 
```

`O` will give you the GMT offset and `Y` will give you the long year. I've also changed your `y` for a `d` as you had a year instead of a day.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T08:55:27.160

> “我的问题是，推特时间戳上的 +0000 2011 是什么”

我相信 +0000 是时区。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T08:56:43.453

> “我的问题是，推特时间戳上的 +0000 2011 是什么”

[在 twitter API 返回的日期上下文中，+0000 是什么意思？](https://stackoverflow.com/questions/12305826/what-does-0000-mean-in-the-context-of-a-date-returned-by-the-twitter-api)

它的时区

# sql-server-2008 - 从 xsd 读取数据并将其加载到 sql server 表中的方法

> ID：12527183
> 
> 赞同：2
> 
> 时间：2012-09-21T08:48:46.807
> 
> 标签：sql-server-2008, xsd

我需要使用提供的 xsd 中的一些数据将我的一张表加载到 SQL Server 数据库中。

我有我的 XSD，块如下

```
<xsd:simpleType name="States">
<xsd:restriction base="xsd:string">
<xsd:enumeration value="state1"/>
<xsd:enumeration value="state2"/>
<xsd:enumeration value="state3"/>
</xsd:restriction>
</xsd:simpleType> 
```

在我的表 - 状态中，我有 2 列 StateId、StateName。

我必须将 state1、state2、..etc 等数据加载到表的 StateName 列中。

有人可以建议我应该使用哪种方法来完成这项工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:34:16.697

我会这样做：

```
DECLARE @xml XML
-- Add the schema information and make the XML a valid XML document to parse.
SELECT @xml = '<?xml version="1.0"?>
    <xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" >
        <xsd:simpleType name="Countries">
            <xsd:restriction base="xsd:string">
                <xsd:enumeration value="Country1"/>
                <xsd:enumeration value="Country2"/>
                <xsd:enumeration value="Country3"/>
            </xsd:restriction>
        </xsd:simpleType>
        <xsd:simpleType name="States">
            <xsd:restriction base="xsd:string">
                <xsd:enumeration value="state1"/>
                <xsd:enumeration value="state2"/>
                <xsd:enumeration value="state3"/>
            </xsd:restriction>
        </xsd:simpleType>
    </xsd:schema>';

WITH XMLNAMESPACES ('http://www.w3.org/2001/XMLSchema' as xsd)
SELECT 
    node.value('@value', 'nvarchar(32)')
FROM 
    @xml.nodes('/xsd:schema/xsd:simpleType[@name="States"]/xsd:restriction/xsd:enumeration') AS enum(node) 
```

# iphone - 如何在 iphone xcode 上创建、填充和搜索？

> ID：12527189
> 
> 赞同：-1
> 
> 时间：2012-09-21T08:49:06.220
> 
> 标签：iphone, xcode, sdk, nsmutablearray

`enter code here`嗨黑客 :) 我正在使用 xcode iphone sdk 编程，这是我的问题：

想象一下，我有图像（精灵）及其位置（x 和 y），我想找到例如在 x=150 和 y = 104 上的图像。

在 mySQL 我会做

1）表格：图像名称，x，y插入（sprite1.png，150,104）插入（sprite2.png，104,390）..etc

然后搜索

如果 x=150 和 y = 104 -> 我得到 sprite1.png .. 等等..

但如何在 iPhone 上做到这一点？当然我不会使用 mySQL，我需要 NSMutableArray 或 NSArray，对吗？但

1）使用哪个数组？（NSMutable？） 2）如何在其中创建名称，x，y？3）如何填写？4) 如何按 x,y 搜索并获取名称？

你能帮我吗？仅用于 2 个示例精灵.. 谢谢！:)

编辑：第四个将是指针？用于访问图像..所以我想要名称，x，y，指针

编辑2：我明白了，这是正确的方式吗？

```
name = [[NSMutableArray alloc] init];
x = [[NSMutableArray alloc] init];
y = [[NSMutableArray alloc] init];
images = [[NSMutableDictionary alloc] init]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:58:56.600

你是对的，你将使用一个数组。为它定义一个数据结构作为一个目标 c 类。这将是您的带有图像、x、y 信息的模态类。然后制作一个此类的对象数组。

然后在“for in”循环中查找数组中具有所需值的每个对象。

例如：

```
for(MyModalClass *modalClass in objectArray){
  if(modalClass.x == reqXVal && modalClass.y == reqYVal && modalClass.image == reqImageVal)
//Do what you want!
} 
```

# ios - iOS AutoLayout - 获取帧大小宽度

> ID：12527191
> 
> 赞同：59
> 
> 时间：2012-09-21T08:49:07.133
> 
> 标签：ios, nslog, autolayout

我正在使用 iOS 6 自动布局进行开发

我想记录一条显示视图框架宽度的消息。

我可以在屏幕上看到 textView。

但是我得到宽度和高度为零，我错过了什么吗？

```
NSLog(@"textView    = %p", self.textView);
NSLog(@"height      = %f", self.textView.frame.size.height);
NSLog(@"width       = %f", self.textView.frame.size.width);

textView    = 0x882de00
height      = 0.000000
width       = 0.000000 
```

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2013-01-03T21:11:14.557

其实，上面的答案并不完全正确。我跟着他们，一次又一次地得到零。

诀窍是将与帧相关的代码放置在`viewDidLayoutSubviews`方法中，该方法

> 通知视图控制器它的视图刚刚布置了它的子视图。

不要忘记这个方法被多次调用，并且不是 ViewController 生命周期的一部分，所以在使用它时要小心。

希望它对某人有所帮助。

只是想补充一点，对于我的没有横向模式的程序不使用自动布局要简单得多......我试过了，虽然=D

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-09-21T08:52:19.597

我认为在您调用此功能时，自动布局还没有时间来布局您的视图。自动布局在调用时还没有发生`viewDidLoad`，因为它是在视图加载后调用的，并且只有在视图被放置到视图控制器的视图层次结构中并最终布局（在视图的`layoutSubviews`方法中）之后。

编辑：这个答案指出了为什么问题中的场景不起作用。[@dreamzor 的回答](https://stackoverflow.com/a/14147303/573976)指出了将代码放置在何处以解决问题。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2015-03-04T15:29:24.550

包括在你的 viewDidLoad()

```
self.view.setNeedsLayout()
self.view.layoutIfNeeded() 
```

在访问 yourview.frame.size.width 之前

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2012-09-28T02:38:52.780

**解决方案**

*   将该代码放入`viewDidAppear`

**原因**

*   `viewDidLoad`在自动布局完成之前发生。因此，在 xib 中指定的自动布局尚未设置位置
*   `viewDidAppear`自动布局完成后发生。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2014-12-18T13:51:37.050

实际上，我设法在我的代码之前*强制*更新布局`viewDidLoad`：

```
override func viewDidLoad() {
        super.viewDidLoad()

        println("bounds before \(self.previewContainer.bounds)");
        //on iPhone 6 plus -> prints bounds before (0.0,0.0,320.0,320.0)

        self.view.setNeedsLayout()
        self.view.layoutIfNeeded()

        println("bounds after \(self.previewContainer.bounds)");
        //on iPhone 6 plus -> prints bounds after (0.0,0.0,414.0,414.0)

        //Size dependent code works here
        self.create()
    } 
```

*更新*：这似乎不再起作用

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2015-12-29T13:02:02.380

这真是一个奇怪的功能。但我发现：

如果您想在不使用 layoutsubviews 方法的情况下获取框架，请使用此方法：

```
dispatch_async(dispatch_get_main_queue(), ^{
        NSLog(@"View frame: %@", NSStringFromCGRect(view.frame));
    }); 
```

这真的很奇怪！！！

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2015-11-04T20:44:46.347

上述答案都没有对我完全有效，除了`viewDidLoad`它的副作用是直到视图动画后才显示我想要的内容，这看起来很糟糕。

`viewDidLayoutSubviews` *应该*是运行依赖于完整自动布局的代码的正确位置，但正如其他人指出的那样，它在最近的 iOS 版本中被多次调用，你不知道哪个是最终调用。

所以我用一个小技巧解决了这个问题。在我的故事板中，`mySubview`应该小于其包含的`self.view`. 但是`viewDidLayoutSubviews`第一次调用时，`mySubview`宽度仍然为 600，而`self.view`似乎设置正确（这是一个 iPhone 项目）。所以我所要做的就是监控后续调用并检查相对宽度。一旦`mySubview`小于`self.view`我可以确定它已正确布局。

```
override func viewDidLayoutSubviews() {
    super.viewDidLayoutSubviews()

    if self.mySubview.bounds.size.width < self.view.bounds.size.width {

        // mySubview's width became less than the view's width, so it is
        // safe to assume it is now laid out correctly...

    }
} 
```

这具有不依赖硬编码数字的优势，因此它可以在所有 iPhone 外形尺寸上工作，例如。当然，它可能不是所有情况下或所有设备上的灵丹妙药，但可能有许多巧妙的方法可以对相对大小进行类似的检查。

不，我们不应该这样做，但是在 Apple 给我们一些更可靠的回调之前，我们都会坚持下去。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-07-08T10:39:32.770

您只能在第一次布局通过后找出大小。或者，在您获得视图的实际宽度后，只需调用以下方法。

```
[yourView layoutIfNeeded]; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-11-09T17:52:10.030

我同意“user1046037”的解决方案

如果您同时使用 atuoLayout 指南和代码，则最好将框架（或 NSlayoutConstraints）编程放入“ **ViewDidAppear** ”中，尤其是在为多个设备设计 UI 时。

根据我的测试，iOS14 将在“ ViewDidLoad ”之前从屏幕（默认 iPhone 11 Pro Max）获取自动布局**，并在“ ViewDidAppear** **”**中更新它。

 **对于不熟悉视图循环的人，它的“从情节提要加载视图”->“ **ViewDidLoad** ”->“ **ViewWillAppear** ”->“ **ViewDidAppear** ”。**

# eclipse - 如何在 Tycho 构建结束时为构建机器的环境解压产品？

> ID：12527194
> 
> 赞同：1
> 
> 时间：2012-09-21T08:49:27.597
> 
> 标签：eclipse, maven, tycho

我有一个 Tycho 版本，可以为不同的环境创建产品。我想在 maven 构建结束时解压缩与构建运行的机器环境相匹配的产品的 zip。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:02:58.673

AFAIK，没有简单的方法可以向 Maven 或 Tycho 询问构建机器的环境。

但是，您可以省略 Tycho 的环境配置，这样 Tycho 就只能为当前运行的平台构建。然后，在 处将有一个未包装的产品`target/products/<product.id>/*/*/*/`。（每个星星都与一个目录完全匹配。）

* * *

如果您构建平台特定产品的模块继承自具有显式环境配置的父 POM，则可以使用以下配置设置一个空的环境列表（意思是“使用正在运行的平台”）：

```
<plugin>
   <groupId>org.eclipse.tycho</groupId>
   <artifactId>target-platform-configuration</artifactId>
   <version>${tycho-version}</version>

   <configuration>
      <environments combine.self="override" />
   </configuration>
</plugin> 
```

# php - 使用 magento 重定向到谷歌或任何其他网站

> ID：12527196
> 
> 赞同：4
> 
> 时间：2012-09-21T08:49:32.633
> 
> 标签：php, magento

我正在尝试使用 Magento 重定向到 google.com。

```
Mage::app()->getResponse()->setRedirect('http://google.co.in')); 
```

但是当我使用此代码时，我也无法打开我的主页。它显示空白页。

我可以使用什么其他代码来代替这个，以便我可以重定向到 google.com？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:53:23.387

This should do the trick:

```
Mage::app()->getFrontController()->getResponse()->setRedirect('http://google.com'); 
```

Also, in your example you end with a double ), that might be the problem in your code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:28:27.513

尝试

`Mage::app()->getResponse()->setRedirect($url)->sendHeaders()->sendResponse();
exit();`

# javascript - 将数据传递给 jQuery 事件处理程序

> ID：12527198
> 
> 赞同：7
> 
> 时间：2012-09-21T08:49:45.390
> 
> 标签：javascript, jquery, event-handling

## 设想

在 GUI 中，用户在文本输入中插入一些文本，然后单击按钮：插入的文本将显示在 div 中。

我找到了一个简单的解决方案（[此处为演示](http://jsfiddle.net/aNDgC/4/)），即在访问输入元素对象的处理程序中设置输出文本。糟透了。相反，我会将输入文本（而不是元素）传递给处理程序。

## 问题

如何将参数（在这种情况下为输入消息文本）传递给处理函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T08:55:43.107

我修改了[您的 jsFiddle](http://jsfiddle.net/aNDgC/8/)中的代码。在 jQuery 中，您可以将数据作为参数传递并使用`event.data` [jQuery 引用](http://api.jquery.com/click/)来访问它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T09:39:40.980

```
/*
 * I would not to referer UI elements here
 * Rather I would pass the $('#txtMessage').val() to the handler
 */ 
```

那是不可能的。

如果要使用该输入元素的当前值，则*必须访问 UI 元素本身*。

如果您的意图是将事件处理程序与知道要访问哪个*特定*元素分离，则可以通过使用事件数据将其传递给处理程序来轻松完成，例如：

```
$(sel).on('click', {
   source: document.getElementById('txtMessage')
}, handler); 
```

在回调中：

```
function handler(event) {
    var txt = event.data.source.value;
    ...
} 
```

请注意，jQuery 事件数据应该是`key: value`如上所示的对映射。如接受的答案所示，直接传入 jQuery 对象很容易中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T09:02:48.140

检查这个 - [http://api.jquery.com/event.data/](http://api.jquery.com/event.data/)

您的 JS 将是这样的（未经测试）：

```
$('#myButton').on("click", {val: $('#txtMessage').val()}, function(event){
    $('#divOutput').html(event.data.val);
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T09:29:18.793

这将为您提供输入元素的当前值。它基本上仍然访问输入元素，但如果您希望获取当前值，则无法避免

```
$('#myButton').on("click", {val: function (){ return $('#txtMessage').val()}}, function(event){
    $('#divOutput').html(event.data.val());
});​ 
```

# session - web2py 将值插入会话

> ID：12527199
> 
> 赞同：1
> 
> 时间：2012-09-21T08:49:48.000
> 
> 标签：session, web2py

我遇到了会话问题

在用户从下拉菜单中选择 smth 后，我必须将该值插入会话。我需要该值来获取模型中的身份验证表的数据库（如果我从 request.var 读取，当我进入登录/注册表单时它会崩溃）。我在哪里插入值在会话中以及如何（视图，控制器）。

现在我使用 cookie 解决了它，但它不是最安全的。

任何建议=

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T08:20:52.370

session 是 Storage 类的另一个实例。无论存储在会话中，例如：

```
session.myvariable = "hello" 
```

可以稍后检索：

```
a = session.myvariable 
```

换句话说，它已经存在 - 只需为其分配变量。如果您希望使用数据库，您必须通过模型在数据库中定义会话表。引用 web2py 手册：

> 例如在数据库中存储会话：
> 
> ```
> session.connect(request, response, db, masterapp=None) 
> ```
> 
> 其中 db 是打开的数据库连接的名称（由 DAL 返回）。它告诉 web2py 您要将会话存储在数据库中而不是文件系统中。session.connect 必须在 db=DAL(...) 之后，但在任何其他需要会话的逻辑之前，例如，设置 Auth。
> 
> web2py 创建一个表：
> 
> ```
> db.define_table('web2py_session',
>              Field('locked', 'boolean', default=False),
>              Field('client_ip'),
>              Field('created_datetime', 'datetime', default=now),
>              Field('modified_datetime', 'datetime'),
>              Field('unique_key'),
>              Field('session_data', 'text')) 
> ```
> 
> 并将 cPickled 会话存储在 session_data 字段中。
> 
> 默认情况下，选项 masterapp=None 告诉 web2py 尝试在正在运行的应用程序中检索名称在 request.application 中的应用程序的现有会话。
> 
> 如果您希望两个或多个应用程序共享会话，请将 masterapp 设置为主应用程序的名称。

# vba - 如何将shell命令的输出保存到VBA中的文本文件中

> ID：12527201
> 
> 赞同：0
> 
> 时间：2012-09-21T08:49:57.073
> 
> 标签：vba, excel, ftp

我的代码是这样写的，

```
 function ftpsend()

  Dim vPath As String
  Dim vFile As String
  Dim vFTPServ As String
  Dim fNum As Long
  Dim currntdir As String

  currntdir = ThisWorkbook.Path & "\"

 vPath = currntdir
 vFile = currntdir & "abc.xml"
 vFTPServ = "ftp.abc.com" 

  'Mounting file command for ftp.exe
  fNum = FreeFile()
 Open vPath & "abc.txt" For Output As #fNum
 Print #1, "USER student" 
 Print #1, "xxxxx"
 Print #1, "send " & vFile  
 Print #1, "close" 
 Print #1, "quit" 
 Close

 Shell "ftp -n -i -g -s:" & vPath & "abc.txt  " & vFTPServ, vbNormalFocus

 end function 
```

现在，shell 命令在控制台 ftp.exe 中将输出显示为

```
Connected to ftp.abc.com
220 Microsoft FTP service
ftp>USER student
230 User logged in 
ftp>send D:abc.xml
200 PORT command successful
226 Transfer Complete 
ftp>close
221>Good bye
ftp> 
```

我想要控制台的这个输出，因为它被复制到一个文本文件中。因为，有时当用户名和密码不正确时，它会在控制台中显示消息为“用户未登录”，“登录失败”。我想处理那个错误。还有其他方法来处理 ftp 错误吗？请帮忙...

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:12:56.320

尝试更换

```
Shell "ftp -n -i -g -s:" & vPath & "abc.txt  " & vFTPServ, vbNormalFocus 
```

经过

```
Shell "ftp -n -i -g -s:" & vPath & "abc.txt  " & vFTPServ & " > test.txt", vbNormalFocus 
```

或者

```
Shell "ftp -n -i -g -s:" & vPath & "abc.txt  " & vFTPServ & " >> test.txt", vbNormalFocus 
```

`>`或`>>`将控制台输出转移到文件。如果不存在， `>`两者都会`>>`创建。将删除现有的 text.txt，同时将新的输出附加到 .txt 的现有内容中。`test.txt``>``>>``test.txt`

# c# - 将 `string[] args` 提供给 Linqpad 脚本

> ID：12527204
> 
> 赞同：6
> 
> 时间：2012-09-21T08:50:10.627
> 
> 标签：c#, .net, linqpad

如何测试我的 Main 方法如何处理 Linqpad 中的命令行参数？我试过

```
void Main(string[] args)
{
    args.Dump()
} 
```

但它错误

> 方法'Main'没有重载需要0个参数

编辑：我不想从命令行运行 Linqpad（那会很乏味），我只想以某种方式向 main 方法提供 args（这样我就可以快速测试 Main 方法）。也许就像这个模型：

![linqpad 参数](../Images/c5f59fb86cf1404949af2f7169cf6487.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-10-28T20:37:10.580

```
void Main (string[] args)
{
    #if !CMD
        args = new[] { @"arg1", @"arg2" };
    #endif
    args.Dump();
    ... 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-21T18:46:15.763

你为什么不这样做：

```
void Main()
{
    var args = new string[] { "arg_one", "arg_two" };
    subMain(args);
}

// Define other methods and classes here
public void subMain(string[] args){
    args.Dump();
} 
```

# html - 为什么要加载不必要的内容？

> ID：12527206
> 
> 赞同：0
> 
> 时间：2012-09-21T08:50:12.897
> 
> 标签：html, facebook

为什么开发人员会加载内容，然后使用基本的 html 注释禁用它，例如

```
<!-- lot of html stuff  here --> 
```

我仍然无法得到它，因为它只有很多缺点：

评论中的 HTML 内容：

1) 需要更多内存

2）仅仅增加了加载页面的时间

3）需要更多的流量（嗯，它已经加载，但它只是评论无关）

到目前为止，我找不到任何好处。只有缺点。

我已经用谷歌搜索了这个，但可以找到任何有用的东西。如果您在 Facebook 上有个人资料，请打开您的个人资料，然后查看页面的 HTML 源代码。知道了？

问题是：这种方法有 3 个缺点，但没有任何好处（在我看来）。它是什么，为什么他们这样编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T08:58:46.590

因为未来。当您开发一个项目时，您可能会被解雇或与某人一起工作，那么新程序员必须了解您在项目中所做的事情，这意味着如果您这样做，您的代码与未来兼容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:57:57.970

不，我的兄弟，这对初学者很有帮助，他们正在努力学习。
它具有以下优点
1)。它告诉代码的含义
2) 使用该代码的原因
3) 它增加了可读性
4) 它是一种文档，当你在某些天后查看你的代码时，它有助于快速理解和记忆。
5) 它说明了你还可以在这里包括什么。

很快，它有助于使用该代码的用户轻松快速地理解。

# iphone - facebook sharekit 不工作？

> ID：12527207
> 
> 赞同：1
> 
> 时间：2012-09-21T08:50:15.537
> 
> 标签：iphone, ios, facebook

目前我正在开发应用程序，我需要在其中实现与 facebook 和 twitter 的文本共享。我使用 Sharekit twitter 对我来说工作正常，但 facebook 不工作。当我打开 facebook 操作表并登录到页面进行共享然后登录后屏幕它发送警报：

safari 无法打开此页面，因为地址无效，之后没有任何反应。我尽力解决它但没有成功。如何解决这个问题？

# c# - 访问路径 Server.MapPath 被拒绝

> ID：12527210
> 
> 赞同：1
> 
> 时间：2012-09-21T08:50:23.337
> 
> 标签：c#, asp.net, download

我创建了一个 pdf 文档

```
 var document = new Document();
        string path = Server.MapPath("AttachementToMail");
        PdfWriter.GetInstance(document, new FileStream(path + 
                  "/"+DateTime.Now.ToShortDateString()+".pdf", FileMode.Create)); 
```

现在我想下载这个文件

```
 Response.ContentType = "Application/pdf";
 Response.AppendHeader("Content-Disposition", "attachment; filename="+   
                                DateTime.Now.ToShortDateString() + ".pdf" + "");
 Response.TransmitFile(path);
 Response.End(); 
```

但它给了我错误 **访问路径'〜\ AttachementToMail'被拒绝。**

存在 IIS_IUSRS 的读/写访问权限

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:26:35.370

您提供的写入路径是虚拟路径。`TransmitFile`需要一个绝对路径。

您的代码应如下所示：

```
var document = new Document();
string path = Server.MapPath("AttachementToMail");
var fileName =  DateTime.Now.ToString("yyyyMMdd")+".pdf";
var fullPath = path + "\\" + fileName;

//Write it to disk
PdfWriter.GetInstance(document, new FileStream(fullPath, FileMode.Create));

//Send it to output
Response.ContentType = "Application/pdf";
Response.AppendHeader("Content-Disposition", "attachment; filename="+ fileName );

Response.TransmitFile(fullPath);
Response.Flush();
Response.End(); 
```

`DateTime.Now`表示当前时间。使用它作为文件名时要小心。使用`ToShortDateString`有点冒险，因为某些文化`/`采用这种格式。无论服务器文化如何，使用`ToString`都将允许您修复文件名格式。

# javascript - 在引导轮播加载后执行操作

> ID：12527221
> 
> 赞同：1
> 
> 时间：2012-09-21T08:51:05.183
> 
> 标签：javascript, jquery, twitter-bootstrap

我希望在加载 twitter 引导轮播后执行操作。轮播准备好或我可以利用的任何东西时触发的一些事件。

我正在尝试根据 URL 中的查询参数使轮播转到特定幻灯片。现在我的代码如下所示：

```
function getUrlVars() {
var vars = {};
var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
    vars[key] = value;
});
return vars;
}

if (window.location.href.match('\\goto=')) {
    var match =  getUrlVars()['goto'];
    $('.carousel').carousel(match);
} 
```

在轮播已加载并准备好之前，这显然不会起作用。我不想使用延迟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:09:09.333

您是否尝试过通过 Javascript 将`active`类添加到`item`index 的元素中`match`？这对我有用。

就像是

```
if (window.location.href.match('\\goto=')) {
    var match =  getUrlVars()['goto'];
    var selectedItem = $('#myCarousel').find('.item')[match]
    $(selectedItem).addClass('active');
} 
```

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:24:18.440

Carousel 插件具有滚动到特定幻灯片的方法。例如，如果您的 URL 是 carousel.php?slide=1，那么在 JavaScript 中您可以：

```
<script>
    $('.carousel').carousel();
</script>
<?php if (isset($_GET['slide'])): ?>
<script>
    $('.carousel').carousel(<?php echo intval($_GET['slide']); ?>);
</script>
<?php endif; ?> 
```

# c#-4.0 - 在有人取消或影响数据输入后，我需要重定向我的页面

> ID：12527228
> 
> 赞同：1
> 
> 时间：2012-09-21T08:51:20.187
> 
> 标签：c#-4.0

在有人取消或影响数据输入后，我需要重定向我的页面。我有这个，但它似乎不起作用。我错过了什么？

```
<script runat="server">
protected void DetailsView_ItemInsert(object senderPage, DetailsViewInsertedEventArgs evt)
{
    if (evt.AffectedRows == 1)
    {
        Response.Redirect("~/Home/"); //Confirm page
    }
}
protected void DetailsView_ItemsCancel(object sender, DetailsViewCommandEventArgs evt)
{
    if (evt.CommandName == "Cancel")
    {
        Response.Redirect("List.aspx"); //Cancel page
    }
}
</script> 
```

# matlab - MATLAB中的大数乘法

> ID：12527229
> 
> 赞同：10
> 
> 时间：2012-09-21T08:51:24.200
> 
> 标签：matlab

我有一个纯粹出于好奇的问题。如何在 MATLAB 中实现大数的乘法？是 Karatsuba、Toom-3、Fürer 还是完全不同的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T10:30:14.030

例如，如果您对计算算法感兴趣`139676498390139139676498390676498390*8745566554641239676498390676498390`，那么会发生以下情况：

*   两个数字都转换为`double`IEEE®[标准 754](http://www.mathworks.se/help/matlab/matlab_prog/floating-point-numbers.html)
*   因此，表示是不准确的，因为`doubles`只能准确表示高达[`2^53-1`（检查`bitmax`函数文档）](http://www.mathworks.se/help/matlab/ref/bitmax.html)的整数（~ `10^15`，而你的数字是 的顺序`10^35`）。
*   乘法是使用双精度浮点数执行的，因此也是近似的

看看这个示例代码：

```
>> a=139676498390139139676498390676498390;
>> num2str(a)

ans =

139676498390139141600015724509659136 
```

这显然不完全是您分配的值`a`- 只有前 16 位数字匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T11:59:34.527

没有内置`BigInteger`类，如果这就是你的意思。您可以使用定点工具箱，也可以导入相关的 java/.NET 类。

默认情况下，数字以 IEEE 双精度浮点格式表示。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T15:35:16.750

添加到答案中，如果您需要更多位数的准确性，可以尝试使用此[fex 文件](http://www.mathworks.com/matlabcentral/fileexchange/36534-hpf-a-big-decimal-class)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-17T13:32:43.580

如果您的数字很大，但您不需要大量有效数字。每次乘法都可以乘以一个小数，例如 $10^-1$。跟踪乘法次数 $N$ 并获得一个以 $10^{-N}$ 表示的值。这可以是一个临时的解决方法。

# jquery - jquery + 查找具有填充 src 的 img 元素的数量

> ID：12527233
> 
> 赞同：1
> 
> 时间：2012-09-21T08:51:47.383
> 
> 标签：jquery, html

** 更新 - 尝试查找具有空 src 的元素的数量******

我需要找到填充 src 的 img 元素的数量 - 例如：not src=""

试试这个：

```
 if(!$('div.previewWrapper div.previewContainer').find('img[src=""]').length > 0) {
    alert(numPhotos);
  } 
```

HTML

```
 <div class="previewWrapper" id="thumbPreview3">
  <div class="previewContainer">
   <img src="" class="photoPreview" data-width="" data-height=""><span>3</span>
  </div>
 </div> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T08:57:53.477

试试这个

```
var theNumber = $('div.previewWrapper div.previewContainer img[src=""]').length; 
```

编辑：jQuery 有一个整洁的 != 属性选择器 EDIT2：OP 现在想要具有空 src 的图像数量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:07:35.087

哦，你想要 EMPTY SRC……试试这个

```
$('div.previewWrapper div.previewContainer img[src=""]').length; 
```

您可能还想读出 jquery 的 CSS 选择器

```
 http://api.jquery.com/category/selectors/ 
```

他们有更多可以使用的模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T08:57:26.613

您可以尝试这样计算：

```
var srcNone = $('div.previewWrapper div.previewContainer').find('img[src=""]').length;
var allImg = $('div.previewWrapper div.previewContainer').find('img').length;
var numPhotosWithSrc = allImg - srcNone;

alert(NumPhotosWithSrc); 
```

试试看 ;-）

# xcode - xCode 4.5 创建静态库：无法将源文件复制到库目标文件夹中

> ID：12527234
> 
> 赞同：0
> 
> 时间：2012-09-21T08:51:48.297
> 
> 标签：xcode, ios6, static-libraries, xcode4.5

我只想为 iOS 创建一个静态库。我按照文档中的说明进行操作： [创建库](https://developer.apple.com/library/ios/#technotes/iOSStaticLibraries/Articles/creating.html#//apple_ref/doc/uid/TP40012554-CH2-SW1)

我运行最新版本的 xCode（4.5、4G182）。我在将现有项目文件夹添加到我的库时遇到错误，因为在显示添加对话框时我错过了“将项目复制到目标组的文件夹”复选标记。它是 xCode 4.5 的错误吗？我错过了什么？

我看到这个： ![在此处输入图像描述](../Images/049fcb8d76a379512bfb5c4e73c1fe52.png)

而不是这个： ![在此处输入图像描述](../Images/3fcaea4132c700eb882a39d81a07bee4.png)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:51:52.273

作为一种解决方法，尝试将所有文​​件/文件夹复制到项目目录，然后添加到项目中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-15T17:22:21.340

你是如何导入你的静态库的？如果您将静态库从查找器拖放到项目导航器中，那么您应该可以选择将项目复制到目标的组文件夹中。

# file-io - 如何在 Windows 8 Metro App 中读取文件

> ID：12527235
> 
> 赞同：1
> 
> 时间：2012-09-21T08:51:51.997
> 
> 标签：file-io, windows-8, microsoft-metro

我想随我的应用程序一起发送一个文本文件，并在执行我的应用程序时阅读它。我怎样才能读取那个特定的文件？我已将文件设置为内​​容并复制（如果更新）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T10:49:29.283

```
private async void ProjectFile()
{
    var _Path = @"Metro.Helpers.Tests\MyFolder\MyFolder.txt";
    var _Folder = Windows.ApplicationModel.Package.Current.InstalledLocation;

    var _File = await _Folder.GetFileAsync(_Path);
    var _ReadThis = await Windows.Storage.FileIO.ReadTextAsync(_File);
} 
```

读取适合我的项目文件的代码。希望它也可以帮助其他人:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T10:01:54.403

您的问题的答案在很大程度上取决于您希望*如何*读取文件以及它包含的内容。

[您可以在 MSDN 上](http://code.msdn.microsoft.com/windowsapps/File-access-sample-d723e597/sourcecode?fileId=44740&pathId=962809525)的文件访问示例应用程序中找到一些文件访问示例，其中一个示例是：

```
if (file != null) 
{ 
    using (IRandomAccessStream readStream = await file.OpenAsync(FileAccessMode.Read)) 
    { 
        using (DataReader dataReader = new DataReader(readStream)) 
        { 
            UInt64 size = readStream.Size; 
            if (size <= UInt32.MaxValue) 
            { 
                UInt32 numBytesLoaded = await dataReader.LoadAsync((UInt32)size); 
                string fileContent = dataReader.ReadString(numBytesLoaded); 
                OutputTextBlock.Text = "The following text was read from '" + file.Name + "' using a stream:" + Environment.NewLine + Environment.NewLine + fileContent; 
            } 
            else 
            { 
                OutputTextBlock.Text = "File " + file.Name + " is too big for LoadAsync to load in a single chunk. Files larger than 4GB need to be broken into multiple chunks to be loaded by LoadAsync."; 
            } 
        } 
    } 
} 
```

# cakephp - CakePHP 从字符串中删除电子邮件地址

> ID：12527237
> 
> 赞同：0
> 
> 时间：2012-09-21T08:52:00.810
> 
> 标签：cakephp

有谁知道可以从文本中删除电子邮件地址的 CakePHP 助手或现有助手函数。

我想要做的是在用户登录之前隐藏工作板上的招聘广告的电子邮件地址，也许它应该被这样的东西取代：登录以显示电子邮件

有谁知道我该怎么做？

我正在使用蛋糕 2。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:12:51.350

你可以使用 [https://github.com/dereuromark/tools/blob/2.0/View/Helper/TextExtHelper.php#L44](https://github.com/dereuromark/tools/blob/2.0/View/Helper/TextExtHelper.php#L44)

```
$text = $this->TextExt->autoLinkEmails($text); 
```

将其重命名为 removeEmails() 而不是使用替换方法进行混淆，您可以在此处编写自己的方法来替换您的电子邮件，例如`*****`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:56:40.607

对于 CakePHP，您不需要这样做。PHP 具有在字符串中查找字符串的功能。

[http://php.net/manual/en/function.strstr.php](http://php.net/manual/en/function.strstr.php)

您可以在字符串中找到“@”或类似的东西。如果函数返回 false，则没有找到电子邮件。

# c# - 单体开发有问题

> ID：12527243
> 
> 赞同：1
> 
> 时间：2012-09-21T08:52:20.830
> 
> 标签：c#, mono, httpwebrequest, monodevelop

我刚刚从 ubuntu 软件中心安装了 monodevelop 并创建了一个解决方案。我正在尝试做 WebRequest.create(url)。但它一直抛出“身份验证或解密失败”。我究竟做错了什么？如果我没有做错任何事情，我应该怎么做才能完成上述工作！

我已经搜索过这个，但我无法想出一个可以解决我的问题的解决方案！

这就是我所做的......

```
public static string AccessURL(string url, string postcontent)
    {
        WebRequest request = WebRequest.Create(url);
        request.Method = "POST";
        byte[] byteArray = Encoding.UTF8.GetBytes(postcontent);
        request.ContentType = "application/x-www-form-urlencoded";
        request.ContentLength = byteArray.Length;
        Stream dataStream = request.GetRequestStream();
        dataStream.Write(byteArray, 0, byteArray.Length);
        dataStream.Close();
        WebResponse response = request.GetResponse();
        dataStream = response.GetResponseStream();
        StreamReader reader = new StreamReader(dataStream);
        string responseFromServer = reader.ReadToEnd();
        reader.Close();
        dataStream.Close();
        response.Close();
        return responseFromServer;
    } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T09:02:59.880

该错误表明您正在尝试访问 SSL/TLS 加密资源。Mono 默认情况下不信任任何这些站点，由开发人员决定是否要访问该资源。[在mono 的安全常见问题解答](http://www.mono-project.com/FAQ%3a_Security)中了解更多信息。

因此，一种方法是在您的类中实现 ServerCertificateValidationCallback：

```
using System.IO;
using System.Net;
using System.Net.Security;
using System.Security.Cryptography.X509Certificates;
using System.Text;

public class MyAwesomeProgram
{
    public MyAwesomeProgram() 
    {
        ServicePointManager.ServerCertificateValidationCallback =
                ValidateServerCertficate;
    }

    private static bool ValidateServerCertficate(object sender, X509Certificate certificate,
        X509Chain chain, SslPolicyErrors sslpolicyerrors)
    {
        //This is where you should validate the remote certificate
        return true;
    }

    public void FetchAwesomeStuff (string url) 
    {
        var wr = WebRequest.Create (url);
        var stream = wr.GetResponse().GetResponseStream ();
        Console.WriteLine (new StreamReader (stream).ReadToEnd ());
    }
} 
```

mono 文档中有更多[关于使用 Certificate Policies 和 Trusting Roots](http://www.mono-project.com/UsingTrustedRootsRespectfully)的示例。**请注意**，上面的示例忽略了安全性并接受所有证书，即使是您可能不信任的证书。这个不推荐使用！

# android - 更新 db 时更新 apk

> ID：12527246
> 
> 赞同：4
> 
> 时间：2012-09-21T08:52:44.637
> 
> 标签：android, database, sqlite, onupdate

在我的 android 应用程序中，我创建了包含一些数据的数据库，它位于应用商店中。现在我需要根据新要求更改数据库。当我更新 apk 文件时，它不会再次创建新的数据库，因为它已经创建了。

如何更新已在用户设备上创建的数据库？如何调用 sqlite db 的 onUpgread() 方法？有没有办法在模拟器上检查它？
请建议。在此先感谢。

```
 @Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS " +TABLE_NAME );

      onCreate(db);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T08:59:31.523

`onUpgrade`如果数据库版本已增加，则自动调用该方法。

创建数据库时，您将版本号作为整数提供给构造函数。例如。

```
public class DatabaseHelper extends SQLiteOpenHelper{

static final String dbName = "myDatabase";
static int dbVersion = 3;

    public DatabaseHelper(Context context) {
        super(context, dbName, null, dbVersion);

    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // Create database
    } 
```

如果您在上面增加 dbVersion，当再次创建数据库时，它会看到该数字已增加，因为它会跟踪您发送的当前版本号。值的增加将触发`onUpgrade`并运行该代码。

在您的`onUpgrade`方法中，您可以指定在不同版本号之间执行的操作。例如，可能在版本 2 和 3 之间以及 3 和 4 之间对数据库进行了更改，在这种情况下，您需要处理将从 2 直接跳到 4 的人，他们不更新他们的APK 文件，开发人员可能喜欢的频率！

一个简单的方法是使用`if`语句，并按顺序更新数据库，因此按时间顺序处理升级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T08:55:08.380

增加你`DATABASE_VERSION`的更新数据库。当您增加数据库版本时，`onUpgrade`会调用该方法。

# javascript - Google Maps - Creating an infowindow which is larger than the map itself

> ID：12527253
> 
> 赞同：3
> 
> 时间：2012-09-21T08:53:34.573
> 
> 标签：javascript, maps

I have a seemingly simple task, but it turns out it's more complicated than I thought. I have a marker in the center of my google map which, when clicked, opens an infowindow. I'd like the infowindow to be bigger than the map, however when I set its dimensions too big, it just gets scrollbars instead of showing the whole thing:

[http://jovansfreelance.com/test.php](http://jovansfreelance.com/test.php)

Is there a way to get around this? I tried setting the height/width to important, messing with the overflow property etc, but nothing.

I suppose I could hack it by creating an absolutely positioned div which would open when the marker is clicked, and simulate an infowindow that way, but I'd like to avoid that if possible. The map has to remain the same size.

# c# - 读取文本文件时跳过数据

> ID：12527254
> 
> 赞同：0
> 
> 时间：2012-09-21T08:53:39.017
> 
> 标签：c#, io, file-read

我有一个文本文件......它存储数据，如......

> E:0
> 
> S:0
> 
> R:0
> 
> G:0
> 
> E:1
> 
> 小号：1
> 
> R:1
> 
> G:1

依此类推，直到 50 岁。我可以通过

```
StramReader.ReadLine(); 
```

但我怎么能读第一行

> E:0

并跳到下一个 E: ，而不是介于两者之间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T08:56:16.087

有这种方法。但这将遍历每一行并选择包含 E 的行

```
var linesContainsE = File.ReadAllLines(filename)
    .Where(line => line.Contains("E"))
    .ToList(); 
```

（使用命名空间 System.Linq 和 System.IO）

有关来自 msdn 的 File.ReadAllLines 的更多信息：http: [//msdn.microsoft.com/en-us/library/system.io.file.readalllines.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.readalllines.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:27:36.737

强烈建议不要使用将所有行加载到内存中的 ReadAllLines。如果您有一个非常大的文件怎么办，使用 ReadAllLines 将没有效率。

另一种选择是[ReadLines](http://msdn.microsoft.com/en-us/library/dd383503.aspx)，它是延迟执行：

> ReadLines 和 ReadAllLines 方法的区别如下： 使用 ReadLines 时，可以在返回整个集合之前开始枚举字符串集合；使用 ReadAllLines 时，必须等待返回整个字符串数组才能访问该数组。因此，当您处理非常大的文件时，ReadLines 会更有效率。

此外，不要使用 ，而是`Contains`使用`StartWith`：

```
var linesContainsE = File.ReadLines(filename)
                         .Where(line => line.StartWith("E"))
                         .ToList(); 
```

# eclipse - Eclipse 调试器和集合

> ID：12527256
> 
> 赞同：6
> 
> 时间：2012-09-21T08:53:42.920
> 
> 标签：eclipse, debugging

我有一些我想在 Eclipse 调试器中分析的集合。我对每个元素的特定属性感兴趣。

让我们以 s 列表为例`Person`（每个 s 都有一个`address`属性，而该属性又具有一个`city`属性）。在调试器中，我可以查看每个元素或查看`list.get(i).address.city`.

对大型结构这样做并不是很有帮助。是否有可能将函数应用于数据结构，类似于`map`Perl 中的函数（在调试器中而不是在代码中）。

输入将是我的列表，其中包含我感兴趣的路径（Person.address.city），输出一个仅包含所选元素的列表（以我为例的城市列表）。

在 Perl 中：

```
map { $_->{address}->{city} } @list 
```

**编辑**

我能够`String`使用*Detail Formatter*生成一个：

```
StringBuilder sb = new StringBuilder();
for (Person p : this) {
    sb.append(p.address.city());
    sb.append(", ");
}
return sb.toString(); 
```

这将仅使用我感兴趣的元素（作为`String`）格式化我的列表。

`List`虽然它朝着正确的方向发展，但如果我能返回一个我可以用调试器分析的新的，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:13:30.943

我认为，您感兴趣的 Eclipse 调试器功能称为逻辑结构。您可以在 Eclipse 首选项（Java/Debug/Logical 结构）中定义一个逻辑结构，您可以在其中编写这样的表达式（希望如此），然后在变量视图中您可以替换弹出菜单中列表的显示。

有关基本想法，请参阅此博客文章：[http ://www.javalobby.org/forums/thread.jspa?threadID=16736&messageID=91823528](http://www.javalobby.org/forums/thread.jspa?threadID=16736&messageID=91823528)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T09:13:48.563

显示**视图**使您能够在每个断点处执行自定义代码。只需在断点处读出您的数据结构并将其打印到控制台即可。

# iphone - UItableView 中的双手风琴

> ID：12527259
> 
> 赞同：0
> 
> 时间：2012-09-21T08:53:53.330
> 
> 标签：iphone, ios

我想在 iPhone 应用程序中开发一些行为。我的应用程序是一本书。在书中我有章节和页面，用户可以在页面中记笔记（突出显示文本，为页面添加书签，......），所有这些对象都是“用户输入”。在我的应用程序的一个视图中，我想实现一个`UItableView`来表示用户的所有 UserInputs（注释、突出显示、...），我想有一个 UITableView 与：表示至少包含的章节的行一个用户输入，当单击“章节行”时，表格视图应该向我显示所有“页面行”，其中包含至少一个“用户输入”，最后当单击“行页面”时，它向我显示页面的所有用户输入。我想在 UItableView 中实现双手风琴。

请问我该怎么做？有什么建议吗？谢谢你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:04:14.117

这可能是您正在寻找的：

[如何为 iPhone SDK 应用程序实现手风琴视图？](https://stackoverflow.com/questions/1944428/how-to-implement-an-accordion-view-for-an-iphone-sdk-app)

但是，如果您使用更清楚地解释事物的草图进行详细说明，这可能会有所帮助。

# php - passing data through window.location in javascript

> ID：12527260
> 
> 赞同：3
> 
> 时间：2012-09-21T08:53:58.753
> 
> 标签：php, javascript

I am trying to pass the data through window.location, the data is available in del(id,img,album).

I want to send multiple values through window.location as

```
 window.location="save.php?type=deldownload&album="+album&id="+id; 
```

But this does not work, but this code below works.

```
function del(id,img,album){
    var where_to= confirm("Do you really want to delete "+img+" image");
    if (where_to== true)
    {
         window.location="save.php?type=deldownload&id="+id; 
    } 
    else
    {
         alert('Ok! You Can continue with this Album');
    }

} 
```

Please tell what the real problem is.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T08:54:57.567

You missing few quotes

```
window.location="save.php?type=deldownload&album="+album+"&id="+id; 
```

# jquery - Wrapping parent div immediately around floated children

> ID：12527263
> 
> 赞同：3
> 
> 时间：2012-09-21T08:54:06.603
> 
> 标签：jquery, css

I was wondering if it was possible to make my wrapper div scale around its floated child divs (.box) tightly when the browser is resized. At the moment, if the browser is resized the 4th div will go on to the next line however the wrapper div will stay the same size as though it is still there but I want it to scale down so it fits perfectly around the 3 divs left if that makes sense...How would I achieve this?

jsFiddle - [http://jsfiddle.net/JCGj6/](http://jsfiddle.net/JCGj6/)

```
<div class="showcase_wrapper">
   <div class="showcase" id="pt1">
      <div class="inner">
         <div class="box"> One </div>
         <div class="box"> Two </div>
         <div class="box"> Three </div>
         <div class="box"> Four </div>
      </div>
   </div>
</div>

.inner {
    position:relative;
}

.showcase_wrapper {
    margin:170px auto 0px auto;
    max-width:848px;
    position:relative;
}

.showcase {
    position:absolute;
    top:0;
    width:100%;
    min-width:424px;
    display:inline-block;
    white-space:normal;
    float:left;
    z-index:0;
    border:1px solid #ff0000;
    background:#ff000;
}

.showcase .box {
    position:relative;
    background:#ff0000;
    width:212px;
    height:173px;
    float:left;
    cursor:pointer;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:30:42.707

根据您的要求，您可以为此使用**mediaquery**。像这样写

```
@media all and (max-width: 848px) {
    .showcase .box{width:33.33%}
    .showcase .box:last-child{display:block;width:212px;float:none}
} 
```

检查这个[http://jsfiddle.net/NnZuR/1/](http://jsfiddle.net/NnZuR/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:58:41.550

你需要清除你的浮动。并决定一种布局方法，使用定位*或*浮动，而不是两者。一个会抵消另一个。

在这里，我在您的 .box div 上使用了 float left：

```
.inner {
    }

    .showcase_wrapper {
        margin:170px auto 0px auto;
        max-width:848px;
    }

    .showcase {
        top:0;
        width:100%;
        min-width:424px;
        display:inline-block;
        white-space:normal;
        float:left;
        z-index:0;
        border:1px solid #ff0000;
        background:#ff000;
    }

    .showcase .box {
        background:#ff0000;
        width:212px;
        height:173px;
        float:left;
        cursor:pointer;
}
span.clear
{
    display: block;
    width: 100%;
    clear: both;
} 
```

[http://jsfiddle.net/Kyle_Sevenoaks/NnZuR/](http://jsfiddle.net/Kyle_Sevenoaks/NnZuR/)

我已经删除了定位，因为使用浮动时不需要它。

我在您的标记中添加了一个 span.clear 以清除浮动并使外框尊重内部元素的尺寸。有几种方法可以清除浮点数，我更喜欢这种方法，因为有一个 span.clear 既是语义又便于阅读：）

* * *

拉伸到盒子外部边界的盒子是默认行为，最好通过一些 javascript 计算来完成。

```
$(window).resize(function() {
    var windowWidth = $(window).width();
    var actualWidth = $("#wrapper div").width();
    var calc = Math.max(actualWidth,Math.floor(windowWidth/actualWidth) * actualWidth);

    $("#wrapper").css({width: calc+"px"});
}); 
```

[http://jsfiddle.net/Kyle_Sevenoaks/cq658/](http://jsfiddle.net/Kyle_Sevenoaks/cq658/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-04T04:46:17.743

我最近遇到了这个问题，我想我想出了一个解决方案，给人的印象是父元素包裹着它的子元素。

[http://jsfiddle.net/partypete25/JCGj6/2/](http://jsfiddle.net/partypete25/JCGj6/2/)

```
.showcase_wrapper {
    overflow:hidden; /* hides the large bottom border on the bottom row applied on .inner */
    position:relative;
}
.inner {
  display:inline; /* only way to have the div 'hug' it's child elements */
  border-bottom:1000px solid red; /* Any large number will do, or you can make it more precise if you have a set height on your child divs. */

}
.showcase .box {
    background:orange; /*require a background colour otherwise the bottom borders appear from previous rows when items flow onto multiple lines */
    display:inline-block; /*required for it's parents 'inline' display to work effectively. make sure your markup is edited so there is no white space between items */
} 
```

# php - 如何计算特定级别上选定用户下的节点数？

> ID：12527265
> 
> 赞同：3
> 
> 时间：2012-09-21T08:54:11.593
> 
> 标签：php, mysql, c, linked-list, binary-tree

我有一个 MySQL 数据库，我将用户记录存储在下面的表结构中

```
User_mst
-------------------
id
user_name
parent_id
left_id
right_id
position       (keyword "left", "right" as string)
node_level 
```

我将用户记录存储在二叉树结构中，这意味着每个节点（用户）下最多有 2 个子节点。

从这个结构中，我想创建一个具有

**输入：**

```
1.user_id
2.level
3.position 
```

**输出**应该是：

`user_id`给定`level`和给定下的节点数`position`。

因此，例如，如果功能如下所示

```
get_nodes(3, 4, 'left'); 
```

然后它应该返回： Level **4**上User ID **3**下有**X个节点**

 ****我认为我必须构建一个将递归处理的函数，尽管我想要建议。

请帮我建立这个功能。使用任何编程语言，如 C、PHP 等。我只是在这里寻找逻辑。

下面是创建表的 SQL 和一些示例插入语句：

[http://paste.ubuntu.com/1218345/](http://paste.ubuntu.com/1218345/)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:44:02.323

如果您只是在寻找逻辑，那么伪 C 代码应该没问题：

```
struct NodeStructure
{
  int ID;
  int leftID;
  int rightID;
  int level;
  ...
};

int countChildren( int nodeID, int level )
{
  NodeStructure * node = find( nodeID );

  if( node == NULL )
    return 0;

  if( node.level == level )
    return 1;

  return countChildren( x.leftID, level ) + countChildren( x.rightID, level );

}

NodeStructure * find( int nodeID )
{
  // SQL CODE:
  // SELECT * FROM User_mst WHERE id = nodeID;

  // if( /* node has been found */ )
    // fill NodeStructure
  // else
    // return NULL;
} 
```****

# java - Android: Take the next playing card of a stapel effect

> ID：12527274
> 
> 赞同：0
> 
> 时间：2012-09-21T08:54:44.150
> 
> 标签：java, android, imagebutton, effect, sliding

I want that the user of my application has the effect of taking the next card from a stapel. So the user should take the next card with touching the card and sliding the topmost playing card to the left, out of the screen. How do I get to this effect?

I searched for examples but I could not find some, I think I don't have the right word to search for. I only found the ViewFlipper or the SlidingDrawer but I do not think that they help me with my problem. Maybe it is an animation, but the effect should react when the users lose the card.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:05:47.897

很简单：一叠卡片只是您自己绘制的图像。在 SurfaceView 中的单击事件中，您会显示一个额外的图像并让其随手指移动。现在看起来用户从堆栈中选择了一个图像。此外，您还必须查看这张移动卡片应该有多大，才能让用户看到它有一张链接到手指的卡片。成功 碧玉

# android - 适用于 Android 的自定义地图引擎

> ID：12527275
> 
> 赞同：0
> 
> 时间：2012-09-21T08:54:45.353
> 
> 标签：android, map

我需要在可滚动和可缩放的网格上显示一组标记的标记。类似于 Google Maps Android API，但没有实际的地图图像，只有 UI。

我正在使用禁用地图的谷歌地图，但它有一个问题 --- 它不能放大到 5 米以下，而我可能需要缩小到毫米级（标记可能很近）。Yandex Maps 也有类似的限制 --- 即使我不使用它，我也无法放大地图分辨率。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-03T05:42:10.790

我无法共享我的自定义渲染器的代码，所以这里是通用架构：

1.  **具有平移**和**缩放**属性以及**MapLayers**列表的**MapView**（扩展**View**）组件

*******   **具有onClick**和**渲染**方法的**MapLayer**抽象类。这个类有两个子类：

     ****2.1。一个**GridLayer**类，它的**渲染**方法根据**MapView**的**平移**和**缩放绘制网格**

    2.2\. 一个**MarkerLayer**类，用于存储**标记**并呈现它们。**** *****   **标记**存储**纬度**、**经度**以及**属性**的 HashMap （例如颜色、id 等）

    *   **要将Marker**的**纬度**和**经度**映射到**MapView**的 x 和 y 我使用实例**IProjector**接口，目前 - Mercator Projector with formulas from Wikipedia

    *   渲染**Marker**的**MarkerLayer**使用**MarkerRenderer**抽象类的实例。我有两个**MarkerRenderers**：**SimpleMarkerRenderer**绘制圆圈（它们的笔触和填充颜色取自**Marker**的**属性**）和**ImageMarkerRenderer**绘制图像（图像 id 取自**Marker**的**属性**）**********

# vb.net - where, and how, to add xaml for data binding in visual studio?

> ID：12527276
> 
> 赞同：0
> 
> 时间：2012-09-21T08:54:44.953
> 
> 标签：vb.net, visual-studio-2010, xaml

I'm developing a Windows desktop app in VB.NET Visual Studio 2010.

I'm trying to implement data binding for a collection of objects and it seems I need some XAML to do this:

How to: Make Data Available for Binding in XAML [http://msdn.microsoft.com/en-us/library/ms748857(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms748857(v=vs.100).aspx)

My question is: where do I put the xaml mentioned in this article? I think it goes in the my form's resx file, but I'm not sure. Is so, why can I open the resx files for some of my forms in Visual Studio, but not all of them? I can open the file for frmMain.resx but not frmTest.resx--i have no idea why. I deleted and recredted frmtest but still, their is no View Code option when I right-click on it, but there is for frmMain.

Also, IF i'm suppose to put it in frmTest.resx, does it matter where I put it? Maybe just before ?

Sorry for the lowly noob nature of this question but I've never had to deal with this issue before.

**EDIT** It seems there may be two kinds of forms in Visual Studio "Windows Form" and "WPF Form"? Can I only do this kind of custom data binding with a different form type?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:28:29.650

您必须创建一个 WPF 应用程序才能使用 XAML。XAML 在 WPF 中用于设计表单以及执行与 web 中的 html 相同的绑定。即使在您共享的链接中，也请查看主题的根源，它显示的是数据绑定 (WPF)。

所以，我相信你需要动手使用 WPF 和 XAML 来进行绑定。

下面的链接显示了如何在 Visual Studio 2010 中创建 WPF 应用程序。 [http://wpftutorial.net/HelloWPF.html](http://wpftutorial.net/HelloWPF.html)

希望这可以帮助。

# objective-c - 是否有任何关于使用 ARC 对性能影响的具体研究？

> ID：12527286
> 
> 赞同：12
> 
> 时间：2012-09-21T08:55:24.143
> 
> 标签：objective-c, performance, automatic-ref-counting

我找不到关于 ARC 在现实项目中的性能影响的客观研究。 [官方文档](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)说

> 编译器有效地消除了许多无关的保留/释放调用，并且已经投入了大量精力来加速 Objective-C 运行时。特别是，当方法的调用者是 ARC 代码时，常见的“返回一个保留/自动释放对象”模式要快得多，并且实际上并没有将对象放入自动释放池中。

它已被技术迷转达/变形为“ARC 更快”。

我确定的就是我测量的。我们最近将我们的 iOS 项目迁移到 ARC，我在代码的一些 CPU 密集型区域之前/之后进行了一些性能测量（生产代码，`-Os`当然是使用标志编译的）。

我观察到 70%（是 70%）的性能回归。使用*Instruments*跟踪保留/释放事件，我意识到编译器在你不会做的区域（在 ARC 之前的环境中）引入了很多保留/释放对。基本上，任何暂时的都会变强。那就是，我相信，性能回归的根源。

迁移之前的原始代码已经非常优化。几乎没有完成任何自动释放。因此，切换到 ARC 几乎没有改进的余地。

幸运的是，*Instruments*能够向我展示 ARC 引入的最昂贵的保留/释放，并且我能够使用 __unsafe_unretained 停用它们。这略微减轻了性能回归。

有没有人有关于这种或其他技术的任何信息来避免性能损失？（除了停用 ARC）

谢谢。

编辑：我并不是说 ARC 因为性能影响而不好。使用 ARC 的优势在很大程度上优于性能回归（在我们的代码中，回归没有任何明显的效果，所以我放弃了）。我认为 ARC 是一项非常好的技术。我永远不会回到MRC。我更多是出于好奇而问这个问题。

绝大多数关于该主题的博客（比如[这里](http://blog.mugunthkumar.com/articles/migrating-your-code-to-objective-c-arc/) [和那里](http://maniacdev.com/ios-5-sdk-tutorial-and-guide/arc-automatic-reference-counting/)）都或多或少地给人一种印象，即 ARC 代码将比 MRC 代码更快（这是我在动手之前就相信的），这让我有点恼火）。我真的觉得在一些微基准测试之外情况并非如此。充其量你可以希望与 MRC 相提并论，而不是更快。我做了一些其他涉及对象操作的简单测试（比如计算文档中的单词）。每次 ARC 变慢时（认为不如我最初所说的 70% 性能回归那么糟糕）

\开始{讽刺}

事实上，上述文档确实回答了这个问题：

> ARC慢吗？
> 
> 这取决于您要测量的内容，但通常是“否”。...

这显然应该理解为

\开始{模仿}

> 嗯......嗯......我们不能说它更慢，因为这是一种新的很酷的技术，我们希望你采用它。因此，我们用双引号回答“否”只是为了避免集体诉讼。别再问愚蠢的问题了。

\结束{模仿}

\结束{讽刺}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T20:47:33.253

这是我的[ARC 与 MRC 性能测量](http://www.learn-cocos2d.com/2013/03/confirmed-arc-slow/)。性能测试项目[在 github 上可用，](https://github.com/LearnCocos2D/LearnCocos2D/tree/master/Cocos2D-ARC-Performance-Test)因此您可以添加自己的测试。只要确保在设备上运行它。模拟器中的结果是有偏差的，而且通常有利于 MRC。

总结一下：

**ARC和MRC的速度一般是一样的**。一般来说，在 ARC 下代码应该更快，但紧密循环可能会更慢，而且明显如此。

在低级测试中，由于优化（自动释放返回，@autoreleasepool），ARC 在速度方面优于 MRC。

只要应用程序是单线程的，在某些代码中，ARC 插入了在 MRC 下严格不需要的额外保留/释放。这样的代码在 ARC 下可能会更慢，尽管它只会在紧密循环中有所不同，并且很大程度上取决于所讨论的代码。

例如，接收对象的方法即使在 MRC 下也应该保留它，因为它可能在方法运行时在多线程应用程序中被释放。您可以在 MRC 中省略该代码这一事实使其速度更快，但本质上更不安全（尽管您很少会遇到这样的问题，OTOH，如果您希望没有的话）。例子：

```
-(void) someMethod:(id)object
{
    [object retain]; // inserted by ARC, good practice under MRC
    [object doSomething];
    [object doAnotherThing];
    [object release]; // inserted by ARC, good practice under MRC
} 
```

因此，我在测试项目中使用的遗传算法在**使用 ARC 时大约慢了 40%**。这是一个糟糕（极端）的例子，因为对于这种算法，由于在 NSMutableArray 上的大量插入/删除操作以及正在创建的 NSNumber 对象，您应该通过重写 C 中的关键代码部分来看到更大的性能改进。

**完全忽略 ARC 是完全疏忽的，因为***在某些情况下它***可能*****会更慢。**如果您发现这些情况对性能至关重要，那么`-fno-objc-arc`该代码或用 C 重写它。*

 *出于性能考虑，不应考虑支持或反对 ARC。[ARC 是一个让程序员的工作变得更轻松的工具](https://stackoverflow.com/a/8760820/201863)。由您来决定您是否喜欢浪费时间尝试查找泄漏的对象和悬空指针崩溃，以至于您宁愿坚持使用 MRC。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T09:01:28.130

我认为，如果您得到类似的性能回归，唯一可能的解释是您的手动托管代码是“不安全的”，我的意思是存在潜在的内存泄漏和较少的保留/释放调用，这使得程序内存管理在某种程度上是不安全的。

我不认为 ARC 代码比手动管理的代码慢，如果手动管理的代码写得很好并且安全......

当然，我也认为编写良好的手动管理代码可能比 ARC 代码稍快，但代价是什么？更多的工作需要手工完成…… **在大多数情况下，麻烦多于值得！**

此外，我认为 ARC 应该与垃圾收集器环境而不是*完美的书面 MRC*进行比较，*人脑永远比程序更聪明（或者至少我希望如此...... :-)）* ......

但是，如果您有一个编写良好的 MRC 代码库，并且您确实确定它是安全且快速的，为什么将它放在 ARC 下？使用标志保持手动内存管理`-fno-objc-arc`......使用ARC不是强制性的，尤其是出于这些原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T12:50:08.520

在发送消息或调用具有对象参数的 C/C++ 函数以及每个此类函数的指令数量相对较少的情况下，您可能会得到明显的性能回归。编译器将为每个参数插入（并且稍后不再优化）保留/释放对。

考虑到上下文，编译器可能会认识到某些保留/释放对是不必要的。但是我注意到，即使调用了一个声明为静态内联并且与调用者位于同一翻译单元中的函数，编译器也无法优化掉不必要的对参数的保留/释放调用.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-10T01:19:36.517

我害怕谈论一些无关紧要的事情，而且还基于猜测......

* * *

我认为 ARC 的大部分性能提升是通过内联保留/释放调用而不是省略它们。

此外，据我所知，ARC 通常会引入额外的保留/释放调用。因为 ARC 非常严格和保守，所以它大多不执行保留/释放省略。许多新插入的保留/释放调用在语义上是必需的，但在 MRC 下被程序员省略了。（例如所有传入的函数参数和临时变量）

所以，

1.  为了严格满足语义完整性，保留/释放的调用次数实际上增加*了很多。*

2.  其中一些会被非常保守的*优化*所忽略。

3.  对保留/释放的实际调用将通过优化内联 - 通过从动态 Objective-C 方法调用变为静态 C 函数调用 - 因此调用成本本身将减少很多。

结果，我们通常会降低性能。我意识到在使用 ARC 之前我省略了很多保留/释放调用。但是正如您所指出的，无论我们得到什么，它在语义上都是*完整*的，并且仍然可以通过使用*手动*- 如此确定性 - 消除`__unsafe_unretained`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T21:41:50.527

***当然，***临时变量是默认的。这是明确且清楚地记录在案的。而且，如果您仔细考虑，这就是人们通常想要的。

```
 MyWidget *widget=[[MyWidget alloc]init];  // 1
 [myWidget mill]; // 2 
```

如果小部件不强大，新的 MyWidget 将在第 1 行创建，并且可以在第 2 行之前释放并归零！

现在，如果你在一个紧密循环的中间使用大量临时变量——例如，如果你严格遵守得墨忒耳定律——并且假设这些临时变量没有性能，那肯定是真的完全成本，因为世界上有很多寄存器，那么你会感到惊讶。

那可能就是你现在居住的角落。

但那是一个充满异国情调和特殊的地方！大多数代码不在紧密循环的中间。大多数紧密循环都不是性能瓶颈。而且大多数紧密循环不需要很多中间变量。

相反，ARC 可以以您无法手动执行的方式进行自动释放优化（尽管优化器可能可以）。因此，如果在紧密循环中有一个函数返回一个自动释放的变量，那么使用 ARC 可能会更好。

**过早的优化是个坏主意。**您可能处于不可避免的表演角落，但大多数人并非如此。可以肯定的是，我大部分时间都在 OS X 上度过，但多年来我一直没有遇到性能问题，答案不是更好的算法。

（最后，如果 ARC 对您的应用程序造成 70% 的性能影响，那么您在关键路径上进行了大量的内存管理！想想看：您将 70% 的时间用于分配和释放对象。这听起来像是 Flyweight 或对象缓存或回收池之类的教科书案例！）*

# ios - 具有多个（线程）上下文的核心数据唯一属性

> ID：12527294
> 
> 赞同：3
> 
> 时间：2012-09-21T08:55:49.423
> 
> 标签：ios, objective-c, core-data, grand-central-dispatch

我正在使用[Core Data 唯一属性](https://stackoverflow.com/questions/2239797/core-data-unique-attributes)中描述的方法来防止两次具有相同的属性（该属性在此处称为 ID）。

这在单线程环境中运行良好。我使用多线程环境并使用每个线程范例一个上下文。

问题是如果两个线程同时尝试创建具有相同属性的对象，就会出现以下问题：

*   线程 A 在 context1 中创建 ID 为 1 的对象，没有这样的对象，所以它被创建
*   线程 B 在 context2 中创建 ID 为 1 的对象，没有这样的对象，所以它被创建
*   线程 A 同步 context1->context2（使用下面的代码）

您发现自己有两条具有相同 ID (1) 的记录。

我在测试时看到了这个问题，所以它很少见，但随着时间的推移肯定会发生。

当然，有多种选择，如 GDC、信号量来防止这种情况发生，但在使用复杂的解决方案之前，我想知道是否有人有更好的解决方案，或者可以推荐在什么级别序列化事件。

使用 iOS5+ 和 ARC。

我使用此代码来同步我的上下文：

```
[[NSNotificationCenter defaultCenter] addObserver:self 
selector:@selector(backgroundContextDidSave:) 
name:NSManagedObjectContextDidSaveNotification                                                          
object:nil]; 
```

和：

```
- (void)backgroundContextDidSave:(NSNotification *)notification {
    /* Make sure we're on the main thread when updating the main context */
    if (![NSThread isMainThread]) {
        [self performSelectorOnMainThread:@selector(backgroundContextDidSave:)
                               withObject:notification
                            waitUntilDone:NO];
        return;
    }

    /* merge in the changes to the main context */
    for (NSManagedObjectContext* context in [self.threadsDictionary allValues]){
            [context mergeChangesFromContextDidSaveNotification:notification];
    }

} 
```

要获得线程安全的上下文：

```
/**
 Returns the managed object context for the application.
 If the context doesn't already exist, it is created and bound to the persistent store coordinator for the application.
 */
- (NSManagedObjectContext *) managedObjectContextForThread {

    // Per thread, give one back
    NSString* threadName = [NSString stringWithFormat:@"%d",[NSThread currentThread].hash];

    NSManagedObjectContext * existingContext = [self.threadsDictionary objectForKey:threadName];
    if (existingContext==nil){
        existingContext = [[NSManagedObjectContext alloc] init];
        [existingContext setPersistentStoreCoordinator: [self persistentStoreCoordinator]];
        [self.threadsDictionary setValue:existingContext forKey:threadName];
        [existingContext setMergePolicy:NSOverwriteMergePolicy];
    }

    return existingContext;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:59:26.780

我认为我找到了解决方案，仅使用 Core Data。

我现在使用 NSLock 来锁定上下文以模拟某种事务：

```
[[self managedObjectContextForThread] tryLock];

... read if ID1 exists ...

... write ID1 ...

[[self managedObjectContextForThread] unlock]; 
```

这似乎解决了这个问题（目前）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-25T11:11:55.873

我有一个相关的问题，但我正在使用更新的核心数据方法 - 使用上下文层次结构，它应该已经解决了这样的同步问题。

就我而言，当我尝试保存时，CoreData 内部发生了内部崩溃，CoreData 上下文正在验证属性的唯一性。我的验证是在 KVC 属性验证方法中实现的：

```
// Validate the catalogID for uniqueness. This implementation works fine in the following scenarios:
//  * end-editing,
//  * saving a new species entity,
//  * updating existing species entity.
-(BOOL)validateCatalogID:(id *)ioValue error:(NSError * __autoreleasing *)outError {

if (*ioValue == nil)
    return YES; // Let CoreData validate for empty/missing values

// Lazily prepare static request and predicate to fetch OTHER species catalogID's. We'll reuse these every time we validate the edited species catalogID.
static NSFetchRequest *otherSpeciesIDsFetchRequest = nil;
static NSPredicate *otherSpeciesCatalogIDsPredicate = nil;
static dispatch_once_t onceToken;
dispatch_once(&onceToken, ^{
    otherSpeciesIDsFetchRequest = [NSFetchRequest fetchRequestWithEntityName:[[self entity] name]];
    otherSpeciesCatalogIDsPredicate = [NSPredicate predicateWithFormat:@"(catalogID == $ID) AND (self != $THIS_SPECIES)"];
});

@synchronized(otherSpeciesIDsFetchRequest) {
    // Configure the predicate with the current catalogID value to validate.
    otherSpeciesIDsFetchRequest.predicate = [otherSpeciesCatalogIDsPredicate predicateWithSubstitutionVariables:@{@"ID":*ioValue, @"THIS_SPECIES":self}];

    // instead of fectching entity data, we only COUNT matching items.
    NSError *error = nil;
    NSInteger count = [self.managedObjectContext countForFetchRequest:otherSpeciesIDsFetchRequest error:&error];
//    DBGLog(@"Check Species ID:%@ uniqueness, found %ld", *ioValue, (long)count);
    if (count > 0) {
        [self addValidationError:outError
                            code:ePMXexistingCatalogID
                         message:[NSString stringWithFormat:NSLocalizedString(@"ID '%@' is already used for another species. Use a unique ID", NULL), *ioValue]
                            ];
        return NO;
    }
    else {
        if (error!=nil) {
            [self addValidationError:outError code:ePMXexistingCatalogID
                             message:[NSString stringWithFormat:NSLocalizedString(@"Species ID '%@' cannot be validated. error %@", NULL), *ioValue, error]];
            return NO;
        }
    }
    return YES; // this catalogID was not found in any other species entity - unique - valid catalogID.
}
} 
```

我看到的崩溃在堆栈中看起来像这样：

```
Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: EXC_I386_GPFLT

Application Specific Information:
objc_msgSend() selector name: subentitiesByName

 Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
 0   libobjc.A.dylib               objc_msgSend + 23
 1   com.apple.CoreData            -[NSManagedObjectContext countForFetchRequest:error:] + 235
 2   com.IOLR.PlanktoMetrix-II     -[PMSpecies(PMExtensions) validateCatalogID:error:] + 559
 3   com.apple.CoreData            -[NSManagedObject(_NSInternalMethods) _validateValue:forProperty:andKey:withIndex:error:] + 243
 4   com.apple.CoreData            -[NSManagedObject(_NSInternalMethods) _validatePropertiesWithError:] + 314
 5   com.apple.CoreData            -[NSManagedObject(_NSInternalMethods) _validateForSave:] + 106
 6   com.apple.CoreData            -[NSManagedObject validateForUpdate:] + 64
 7   com.IOLR.PlanktoMetrix-II     -[PMSpecies(PMExtensions) validateForUpdate:] + 73
 8   com.apple.CoreData            -[NSManagedObjectContext(_NSInternalAdditions) _validateObjects:forOperation:error:exhaustive:forSave:] + 619
 9   com.apple.CoreData            -[NSManagedObjectContext(_NSInternalAdditions) _validateChangesForSave:] + 410
 10  com.apple.CoreData            -[NSManagedObjectContext(_NSInternalChangeProcessing) _prepareForPushChanges:] + 208
 11  com.apple.CoreData            -[NSManagedObjectContext save:] + 247
 12  com.IOLR.PlanktoMetrix-II     -[BSManagedDocument contentsForURL:ofType:saveOperation:error:] + 918
 13  com.IOLR.PlanktoMetrix-II     __73-[BSManagedDocument saveToURL:ofType:forSaveOperation:completionHandler:]_block_invoke + 411
 14  com.apple.AppKit              -[NSDocument performAsynchronousFileAccessUsingBlock:] + 57
 15  com.IOLR.PlanktoMetrix-II     -[BSManagedDocument saveToURL:ofType:forSaveOperation:completionHandler:] + 370
 16  com.apple.AppKit              __67-[NSDocument autosaveWithImplicitCancellability:completionHandler:]_block_invoke + 1220
 17  com.apple.AppKit              -[NSDocument continueFileAccessUsingBlock:] + 234
 18  com.apple.AppKit              __54-[NSDocument performAsynchronousFileAccessUsingBlock:]_block_invoke681 + 125
 19  com.apple.AppKit              __62-[NSDocumentController(NSInternal) _onMainThreadInvokeWorker:]_block_invoke1807 + 175 
```

解决了类似的问题后，您能提示一下我的实现吗？

# android - 将 ActionBarSherlock 导入 Eclipse

> ID：12527296
> 
> 赞同：1
> 
> 时间：2012-09-21T08:56:01.060
> 
> 标签：android, actionbarsherlock, android-holo-everywhere

我想在我的 Android 应用程序中使用 ActionBarSherlock 和 HoloEveryWhere

但是当我在 Eclipse 中导入 ActionBarSherlock 库时，导入的库包含很多错误！！！

库文件夹截图：[这里](http://i.stack.imgur.com/gs7lO.png)（更新）

问题截图：[这里](http://i.stack.imgur.com/faQkp.png)

我该如何解决？

* * *

**我的问题解决了:)**

**我将 Java 编译器级别更改为 1.6 。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T09:01:39.553

该`ActionBarSherlock`库必须针对`4.0`Android 的最新版本（或）构建（并且使用该库的项目也必须针对`4.0`或构建`4.1`）。 *右键单击`ActionBarSherlock`库项目 -> 属性 -> Android -> 检查 Android 4.1 -> 确定*

可以在图书馆网站上找到更多相关信息 - > [http://actionbarsherlock.com/usage.html](http://actionbarsherlock.com/usage.html)

更新：错误的另一个可能原因是不正确的合规级别。 *右键单击项目 -> 属性 -> Java 编译器 -> 将合规级别设置为`1.6`*

看看这是否能解决问题。

# php - 将 zend sub_form 保存到会话变量中

> ID：12527298
> 
> 赞同：1
> 
> 时间：2012-09-21T08:56:12.177
> 
> 标签：php, forms, zend-framework, session

您好，我遇到了 zend 框架的问题。我想用 zend 制作一个多步骤表单，但 zend 不支持，所以我可以将 sub_form 保存在会话变量中并一一验证它们，然后在主表单的末尾获取所有 sub_form 以显示所有表格 ？

在此先感谢您的帮助 ！

这是我的表单代码：

```
 public function init()
{
    /* Form Elements & Other Definitions Here ... */
    $this->setAttrib("class", "form-horizontal well");

    $name = $this->createElement('text', 'name', array(
                                                        "label" => $this->getTranslator()->translate('ADD_NAME'), 
                                                        "description" => $this->getTranslator()->translate('ADD_EXAMPLE_NAME')
                                                        ))->setRequired(true);

    $trigram = $this->createElement('text', 'trigram', array(
                                                                "label" => $this->getTranslator()->translate('ADD_TRIGRAM'),
                                                                "description" => $this->getTranslator()->translate('ADD_EXAMPLE_TRIGRAM')
                                                                ))->setRequired(true);
    $environment = $this->createElement('select', 'environment', array(
                                                                        "label" => $this->getTranslator()->translate('ADD_ENVIRONMENT')
                                                                        ))->setRequired(true);
    $url_clientsite = $this->createElement('text', 'url_clientsite', array(
                                                                            "label" => $this->getTranslator()->translate('ADD_URL_CLIENT'),
                                                                            "description" => $this->getTranslator()->translate('ADD_EXAMPLE_URL')
                                                                            ))->setRequired(true);

    $check_box = $this->createElement('multicheckbox', 'components', array(
                                                                            "multiOptions" => array(
                                                                                                    "mon" => " BDD Mona",
                                                                                                    "sta" => " BDD Stats",
                                                                                                    "log" => " BDD Logs",
                                                                                                    "sal" => " Sali",
                                                                                                    "agg" => " StatsAggregator",
                                                                                                    "etl" => " ETL",
                                                                                                    "jvs" => " JavaScript",
                                                                                                    "adm" => " Admin"
                                                                                                    )))->setRequired(true);

    $step_1 = new Zend_Form_SubForm();  
    $step_1->addElements(array(
                                $name,
                                $trigram,
                                $environment,
                                $url_clientsite,
                                ));

    $this->addSubForm($step_1, 'step1');

    $step_2 = new Zend_Form_SubForm();
    $step_2->addElement($check_box);
    $this->addSubForm($step_2, 'step2');    

    $step_3 = new Zend_Form_SubForm();
    $step_3->addElements();

    $this->addSubForm($step_3, 'step3');

} 
```

# asp.net - 在 ASP.NET 应用程序变量中存储巨大的 DataTable

> ID：12527300
> 
> 赞同：0
> 
> 时间：2012-09-21T08:56:25.820
> 
> 标签：asp.net

我们的代码经常访问的某些 SharePoint 列表以 DataTable 的形式存储在 Application 变量中，以减少到数据库的往返次数。这在大多数情况下都可以正常工作。但是，当 DataTable 的大小很大时，即在 10-12 列范围内并且没有时，这不起作用。行数超过 150 000。我如何让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:01:55.663

如果应用程序开始内存不足，IIS 可以回收应用程序。一般来说，您应该避免将如此大的数据集存储在内存中。我建议您使用进程外缓存。结帐[AppFabric](http://msdn.microsoft.com/en-us/windowsserver/ee695849.aspx)。这是 Scott Hanselman 写的关于设置它[的指南。](http://www.hanselman.com/blog/InstallingConfiguringAndUsingWindowsServerAppFabricAndTheVelocityMemoryCacheIn10Minutes.aspx)还有其他缓存提供程序，例如[memcached](http://memcached.org/)。

# sql - 可以将 select into 与多个 cte 一起使用

> ID：12527305
> 
> 赞同：0
> 
> 时间：2012-09-21T08:56:53.080
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

可以将 select into 与多个 cte 一起使用吗？例如，在下面的代码中，第一个 cte cte_table 的结果被插入到 dbo.table1 中，然后定义了另一个 cte。这可能吗？

```
WITH cte_table 
AS 
( 
SELECT * 
FROM dbo.table
)
INSERT INTO dbo.table1 
SELECT *
FROM [cte_table]
, cte_table2
AS
(
SELECT * 
FROM dbo.table2
) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-22T21:35:23.307

将所有 CTE 链接起来，然后进行选择。

```
WITH First_CTE AS
(
    SELECT
        Columns
    FROM
        Schema.Table
    WHERE
        Conditions
),
Second_CTE AS
(
    SELECT
        Columns
    FROM
        Schema.OtherTable
    WHERE
        Conditions
)

SELECT
    Variables
INTO
    NewTable
FROM
    First_CTE A
JOIN
    Second_CTE B
ON
    A.MatchVar = B.MatchVar 
```

如果您以后不需要 CTE 但更喜欢比 ETL 的子查询更简单的方法，这会很有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T09:02:30.110

不，你不能：你会得到一个`INTO`不允许的错误，而且，正如其他人所指出的，这是有道理的，因为它`CTE`旨在成为可重复的（因此是静态的）引用。

而且我记得在某处读过大部分是/曾经是语法糖的地方，只要在执行 sql 时将 cte 解析为派生表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T09:44:09.577

如果您的案例属于`Re-usability`记录集，则在这种情况下使用临时表或表变量。

例如

```
Select * Into #temp1 From dbo.table

INSERT INTO dbo.table1 
SELECT * FROM #temp1

SELECT * FROM #temp1 ..... and do some other re-usability operations. 
```

一个链式 Cte 工作如下（只是一个例子）

```
;With Cte1 As ( Select * from table1)
,Cte2 As (Select * from table2)

select c1.*,c2.*
from cte1 c1, cte2 c2 
```

希望您了解何时使用什么以及如何使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T09:02:31.730

不，您不能在 CTE 中使用 select into。它实际上也没有任何意义。

# java - Java swing 应用程序即服务

> ID：12527306
> 
> 赞同：0
> 
> 时间：2012-09-21T08:56:53.373
> 
> 标签：java, windows, macos, swing, service

我制作了一个 java swing 应用程序，但现在我需要一些功能来备份我的应用程序中的数据。

所以我有一个屏幕，可以获取备份数据、备份计划数据和计划时间。

所以我希望在特定的日期和时间，我在一个 java 文件中的部分代码需要在后台自动启动，因此不需要同时运行或不同时运行应用程序。

我在这里和谷歌上搜索，但我没有得到正确的解决方案。

还有一件事是这个应用程序在 Window 以及 MAC 或 Linux 环境上运行。所以我需要跨平台。

所以请给我一些方法，我该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T14:35:12.350

[Java Service Wrapper](http://wrapper.tanukisoftware.com/doc/english/download.jsp)是一个让 Java 程序作为服务运行的好库。但请注意，服务的默认行为是以无头模式运行任务。换句话说，您将无法从服务进程启动 Swing 窗口（但您当然可以运行另一个以某种方式与服务通信的程序）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:16:15.613

我没用过，你可以看看[Quartz Scheduler](http://quartz-scheduler.org/)。看起来它也可以作为[服务](https://stackoverflow.com/q/11138711/261156)运行。

# python - 以编程方式读取 GSM 调制解调器端口号

> ID：12527309
> 
> 赞同：0
> 
> 时间：2012-09-21T08:57:12.057
> 
> 标签：python, port, gsm

当我将移动设备连接到 Windows XP 机器时，有没有办法使用 Python 以编程方式读取 GSM 调制解调器端口号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:10:03.727

对不起，我不知道 python 语法，只是一个想法。您可以使用`SerialPort.GetPortNames();`获取系统中可用端口的列表。

然后向`AT`每个端口发送一个命令。哪个端口以 响应`OK`，这意味着您的调制解调器已连接到该端口。

# git - 将 Git 存储库推送到远程服务器

> ID：12527311
> 
> 赞同：2
> 
> 时间：2012-09-21T08:57:22.510
> 
> 标签：git, ssh

所以我试图将一个仓库从我的本地主机推送到我的 VPS。

我在我的 vps 上设置了一个 --bare repo，在我的本地主机上设置了一个 repo。

我使用以下命令推送到 VPS：

```
# git remote add origin ssh://root@mysite.net/home/mysite/public_html/mygit/.git
# git push origin master 
```

它推送成功，但我需要做的是从 VPS .git 签出文件。但是，当我尝试运行“git checkout”时，我得到了错误：

> 致命：此操作必须在工作树中运行

我尝试编辑 .git 配置文件并编辑/添加这些行：

```
[core]
bare = true
worktree = /home/mysite/public_html/mygit/

[receive]
denycurrentbranch = false 
```

这允许我运行 git 命令，但文件不会签出，并且 git 告诉我文件已被删除。

我只是有点困惑。我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T09:29:52.343

尝试在裸存储库上执行签出是非常不合逻辑的 -`checkout`是用于更新工作副本/树的命令：

> git-checkout - 签出工作树的分支或路径

裸存储库没有工作树。

## 以正常方式设置你的 git repos

因此，从零开始，假设您在家庭/办公室计算机上：

### 创建裸仓库

为您的项目创建一个裸仓库 - 或将您现有的仓库移动到某个适当的位置：

```
ssh root@mysite.net
cd repos
mkdir repo.git ##give it a better name
cd repo.git
git init --bare 
```

### 为您的网站制作克隆

```
ssh root@mysite.net
cd /home/mysite/public_html
git clone ~/repos/repo.git . 
```

### 创建本地克隆

```
cd mylocalsite/public_html
git clone root@mysite.net:repos/repo.git .
git push/pull etc. 
```

## 自动更新网站

由于您的目标是自动更新，因此每当您推送到您的存储库时，您都可以使用 git-hooks 更新作为您的活动站点的工作副本。

这是[一个简单的例子](https://github.com/AD7six/git-hooks/blob/develop/recipes/update-local-working-copy)：

```
#!/bin/sh
cd /home/mysite/public_html
git --git-dir /home/mysite/public_html/.git pull > /dev/null 
```

将其另存为`/home/root/repos/.git/hooks/post-receive`，使其可执行，并且每次推送时，它都会尝试通过发出拉取来更新您的实时站点

### 或者

您可以放弃使用裸存储库并使用实时站点的结帐作为您的主要/唯一存储库。不**建议**这样做，但如果您选择这样做，您会这样做：

```
git remote add live root@mysite.net:/home/mysite/public_html/.git
git push live master 
```

它会给你一个关于更新当前签出分支的错误，阅读警告并理解它的含义。如果您决定仍要这样做，您可以允许它使用：

```
ssh root@mysite.net
cd /home/mysite/public_html
git config receive.denyCurrentBranch ignore 
```

再次**不推荐**，最好有一个裸仓库并将您的实时站点维护为正常结帐。

# c# - .NET 中奇怪的 CheckedListBox 控件行为

> ID：12527317
> 
> 赞同：0
> 
> 时间：2012-09-21T08:57:46.713
> 
> 标签：c#, .net, winforms

我在表单上有一个checkedlistbox 控件。multicolumn 属性在设计时设置为 true，因为项目应该水平显示。
当我运行表单并单击最后一项时，所有项目都向左移动了一点，这很尴尬。

为什么会发生这种情况以及可以采取哪些措施来阻止这种行为。

我在 Win7
Regards 上使用 VS 2008。

大家好，设置checkedListBox 控件的ColumnWidth 属性可以解决这个问题。我不知道这是否是解决方案，但它似乎可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:24:56.140

也许它与滚动条所需的空间有关。
也许您可以尝试禁用/强制水平/垂直滚动条，看看这是否改变了什么

# symfony - Symfony 2 - 一个数据库行的多个表单字段

> ID：12527319
> 
> 赞同：2
> 
> 时间：2012-09-21T08:57:49.830
> 
> 标签：symfony, doctrine-orm, symfony-forms, symfony-2.1

我正在使用 Symfony 2.1 和 Doctrine 2。

我正在处理 2 个主要实体：Place 和 Feature，它们之间具有 ManyToMany 关系。数据库中有许多特征，为了按主题对它们进行分组，特征还与具有 ManyToOne 关系的 FeatureCategory 实体相关。

这是不同实体的代码：

**地方**实体_

```
namespace Mv\PlaceBundle\Entity;
…

/**
 * Mv\PlaceBundle\Entity\Place
 *
 * @ORM\Table(name="place")
 * @ORM\Entity(repositoryClass="Mv\PlaceBundle\Entity\Repository\PlaceRepository")
 * @ORM\HasLifecycleCallbacks
 */
class Place
{
  /**
   * @var integer $id
   *
   * @ORM\Column(name="id", type="integer")
   * @ORM\Id
   * @ORM\GeneratedValue(strategy="AUTO")
   */
  private $id;

  /**
   * @var string $name
   *
   * @ORM\Column(name="name", type="string", length=255, unique=true)
   * @Assert\NotBlank
   */
  private $name;

  /**
   * @ORM\ManyToMany(targetEntity="\Mv\MainBundle\Entity\Feature")
   * @ORM\JoinTable(name="places_features",
   *    joinColumns={@ORM\JoinColumn(name="place_id", referencedColumnName="id")},
   *    inverseJoinColumns={@ORM\JoinColumn(name="feature_id", referencedColumnName="id")}
   * )
   */
  private $features;

  /**
   * Get id
   *
   * @return integer 
   */
  public function getId()
  {
    return $this->id;
  }

  /**
   * Set name
   *
   * @param string $name
   * @return Place
   */
  public function setName($name)
  {
    $this->name = $name;
    return $this;
  }

  /**
   * Get name
   *
   * @return string 
   */
  public function getName()
  {
    return $this->name;
  }

  /**
   * Add features
   *
   * @param \Mv\MainBundle\Entity\Feature $features
   * @return Place
   */
  public function addFeature(\Mv\MainBundle\Entity\Feature $features)
  {
    $this->features[] = $features;
    echo 'Add "'.$features.'" - Total '.count($this->features).'<br />';
    return $this;
  }

  /**
   * Remove features
   *
   * @param \Mv\MainBundle\Entity\Feature $features
   */
  public function removeFeature(\Mv\MainBundle\Entity\Feature $features)
  {
    $this->features->removeElement($features);
  }

  /**
   * Get features
   *
   * @return Doctrine\Common\Collections\Collection 
   */
  public function getFeatures()
  {
    return $this->features;
  }

  public function __construct()
  {
    $this->features = new \Doctrine\Common\Collections\ArrayCollection();
  } 
```

**特征**实体：

```
namespace Mv\MainBundle\Entity;
…

/**
 * @ORM\Entity
 * @ORM\Table(name="feature")
 * @ORM\HasLifecycleCallbacks
 */
class Feature 
{
    use KrToolsTraits\PictureTrait;

    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\Column(name="label", type="string", length=255)
     * @Assert\NotBlank()
     */
    protected $label;

    /**
     * @ORM\ManyToOne(targetEntity="\Mv\MainBundle\Entity\FeatureCategory", inversedBy="features", cascade={"persist"})
     * @ORM\JoinColumn(name="category_id", referencedColumnName="id")
     */
    private $category;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set label
     *
     * @param string $label
     * @return Feature
     */
    public function setLabel($label)
    {
        $this->label = $label;
        return $this;
    }

    /**
     * Get label
     *
     * @return string 
     */
    public function getLabel()
    {
        return $this->label;
    }

    /**
     * Set category
     *
     * @param Mv\MainBundle\Entity\FeatureCategory $category
     * @return Feature
     */
    public function setCategory(\Mv\MainBundle\Entity\FeatureCategory $category = null)
    {
        $this->category = $category;
        return $this;
    }

    /**
     * Get category
     *
     * @return Mv\MainBundle\Entity\FeatureCategory 
     */
    public function getCategory()
    {
        return $this->category;
    }
} 
```

**FeatureCategory**实体：

```
namespace Mv\MainBundle\Entity;
...

/**
 * @ORM\Entity
 * @ORM\Table(name="feature_category")
 */
class FeatureCategory 
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\Column(name="code", type="string", length=255)
     * @Assert\NotBlank()
     */
    protected $code;

    /**
     * @ORM\Column(name="label", type="string", length=255)
     * @Assert\NotBlank()
     */
    protected $label;

    /**
     * @ORM\OneToMany(targetEntity="\Mv\MainBundle\Entity\Feature", mappedBy="category", cascade={"persist", "remove"}, orphanRemoval=true)
     * @Assert\Valid()
     */
    private $features;

    public function __construct()
    {
       $this->features = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set code
     *
     * @param string $code
     * @return Feature
     */
    public function setCode($code)
    {
        $this->code = $code;
        return $this;
    }

    /**
     * Get code
     *
     * @return string 
     */
    public function getCode()
    {
        return $this->code;
    }

    /**
     * Set label
     *
     * @param string $label
     * @return Feature
     */
    public function setLabel($label)
    {
        $this->label = $label;
        return $this;
    }

    /**
     * Get label
     *
     * @return string 
     */
    public function getLabel()
    {
        return $this->label;
    }

    /**
    * Add features
    *
    * @param \Mv\MainBundle\Entity\Feature $features
    */
    public function addFeatures(\Mv\MainBundle\Entity\Feature $features){
      $features->setCategory($this);
      $this->features[] = $features;
    }

    /**
     * Get features
     *
     * @return Doctrine\Common\Collections\Collection 
     */
    public function getFeatures()
    {
        return $this->features;
    }

    /*
     * Set features
     */
    public function setFeatures(\Doctrine\Common\Collections\Collection $features)
    {
      foreach ($features as $feature)
      {
        $feature->setCategory($this);
      }
      $this->features = $features;
    }

    /**
     * Remove features
     *
     * @param Mv\MainBundle\Entity\Feature $features
     */
    public function removeFeature(\Mv\MainBundle\Entity\Feature $features)
    {
        $this->features->removeElement($features);
    }

    /**
     * Add features
     *
     * @param Mv\MainBundle\Entity\Feature $features
     * @return FeatureCategory
     */
    public function addFeature(\Mv\MainBundle\Entity\Feature $features)
    {
        $features->setCategory($this);
        $this->features[] = $features;
    }
} 
```

功能表已填充，用户将无法添加功能，只能在表单集合中选择它们以将它们链接到地方。（Feature 实体目前仅与 Places 相关联，但稍后将与我的应用程序中的其他实体相关联，并将包含所有实体可用的所有功能）

在 Place 表单中，我需要显示 Place 可用功能的复选框，但我需要按类别分组显示它们。例子 ：

访问（FeatureCategory - 代码 VIS）：

*   免费（功能）
*   付费（功能）

使用的语言（FeatureCategory - 代码 LAN）：

*   英语（专题）
*   法语（专题）
*   西班牙语（特色）

* * *

**我的想法**

在我的 PlaceType 表单中使用虚拟表单，如下所示：

```
$builder
    ->add('name')
    ->add('visit', new FeatureType('VIS'), array(
        'data_class' => 'Mv\PlaceBundle\Entity\Place'
    ))
    ->add('language', new FeatureType('LAN'), array(
        'data_class' => 'Mv\PlaceBundle\Entity\Place'
    )); 
```

并创建一个 FeatureType 虚拟表单，如下所示：

```
 class FeatureType extends AbstractType
    {
        protected $codeCat;

        public function __construct($codeCat)
        {
          $this->codeCat = $codeCat;
        }

        public function buildForm(FormBuilderInterface $builder, array $options)
        {
            $builder
                ->add('features', 'entity', array(
                    'class' => 'MvMainBundle:Feature',
                    'query_builder' => function(EntityRepository $er)
                    {
                      return $er->createQueryBuilder('f')
                              ->leftJoin('f.category', 'c')
                              ->andWhere('c.code = :codeCat')
                              ->setParameter('codeCat', $this->codeCat)
                              ->orderBy('f.position', 'ASC');
                    },
                    'expanded' => true,
                    'multiple' => true
                ));
        }

        public function setDefaultOptions(OptionsResolverInterface $resolver)
        {
            $resolver->setDefaults(array(
                'virtual' => true
            ));
        }

        public function getName()
        {
            return 'features';
        }
    } 
```

有了这个解决方案，我得到了我想要的，但绑定过程并没有保留所有的功能。它没有对它们进行分组，而是只保留我并坚持最后一组“语言”，并删除所有以前的特征数据。要查看它的实际效果，如果我选中 5 个复选框，它会很好地进入 Place->addFeature() 函数 5 次，但特征 arrayCollection 的长度依次为：1、2、1、2、3。

关于如何以另一种方式做到这一点的任何想法？如果我需要更改模型，我仍然可以做到。什么是最好的方法，可以在我未来也与功能相关的其他实体上重用，来处理这个？

感谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:22:50.487

我认为您最初的需求只是**模板**。

因此，您不应调整表单和实体持久性逻辑来获得所需的自动生成表单。

你应该回到一个基本的形式

```
$builder
    ->add('name')
    ->add('features', 'entity', array(
        'class' => 'MvMainBundle:Feature',
        'query_builder' => function(EntityRepository $er) {
              return $er->createQueryBuilder('f')
              //order by category.xxx, f.position
            },
                'expanded' => true,
                'multiple' => true
            )); 
```

并调整你的 form.html.twig

# javascript - 登录后使用“用 facebook 登录”重定向到主页：Javascript

> ID：12527323
> 
> 赞同：0
> 
> 时间：2012-09-21T08:58:11.233
> 
> 标签：javascript, facebook

我在我的应用程序中使用“使用 facebook 登录”。点击“使用 facebook 登录”按钮后，我想重定向到主页。我不知道如何实现它...

代码是，

```
 <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : 'APP ID', // App ID
        channelUrl : 'http://www.***.com/', // Channel File
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
      });

    // Load the SDK Asynchronously
    (function(d){
       var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
       if (d.getElementById(id)) {return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "js/all.js";
       ref.parentNode.insertBefore(js, ref);
     }(document));
  </script>

<div id="fb-root"></div>
   <div class="fb-login-button" data-show-faces="true" data-width="200" data-max-rows="1"></div> 
```

请帮忙，

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:01:12.643

使用 Facebook 活动：

```
FB.Event.subscribe('auth.login', function(){
    window.location = 'index.html';
}); 
```

新代码：

```
<script>
window.fbAsyncInit = function() {
  FB.init({
    appId      : 'APP ID', // App ID
    channelUrl : 'http://www.***.com/', // Channel File
    status     : true, // check login status
    cookie     : true, // enable cookies to allow the server to access the session
    xfbml      : true  // parse XFBML
  });

FB.Event.subscribe('auth.login', function(){
    window.location.href = 'index.html';
});

// Load the SDK Asynchronously
(function(d){
   var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
   if (d.getElementById(id)) {return;}
   js = d.createElement('script'); js.id = id; js.async = true;
   js.src = "js/all.js";
   ref.parentNode.insertBefore(js, ref);
 }(document));
</script> 
```

更改`index.html`您的主页网址。

如果你也想添加`logout`：

```
FB.Event.subscribe('auth.logout', function(){
    window.location.href = 'index.html';
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-25T00:07:59.737

将您的登录按钮更改为

```
<fb:login-button perms="email,publish_stream" autologoutlink="window.location.href='index.html';"></fb:login-button> 
```

将 index.html 更改为您的主页网址

# asp.net - 如何停止调用站点地图提供者 IsAccessibleToUser 每个回帖

> ID：12527325
> 
> 赞同：1
> 
> 时间：2012-09-21T08:58:23.153
> 
> 标签：asp.net, sitemap, sitemapprovider

我们在我们的 ASP.NET 网站中使用 securityTrimming 并使用站点地图来显示/隐藏菜单。但问题是对于每个回帖，它都会不断地进入这个类并通过 IsAccessibleToUser 方法。

由于我们使用的是活动目录组，这确实是一个性能问题。（当第一次调用从 AD 获取组时，我已经缓存了组（用户所属的），但执行此方法仍然需要时间。

如果有人建议我使用其他方法来提高此方法的性能，或者不为每个回帖调用此方法，那就太好了。到目前为止，据我所知，此方法会自动从站点地图和菜单中执行。

网络配置：

```
<siteMap defaultProvider="CustomSiteMapProvider" enabled="true">
      <providers>
        <clear/>
        <add siteMapFile="Web.sitemap" name="CustomSiteMapProvider" type="xxx.CustomSiteMapProvider"
                   description="Default SiteMap provider."  securityTrimmingEnabled="true"/>
      </providers>
    </siteMap> 
```

类文件..

```
public class CustomSiteMapProvider : System.Web.XmlSiteMapProvider
    {

        public override bool IsAccessibleToUser(System.Web.HttpContext context,    System.Web.SiteMapNode node)
        {
          // return true false depend on user has access to menu or not.
          // return UserIsInRole(string role, string userName);
        }
    } 
```

这就是我们从 AD 获取角色并缓存它们的方式。（我得到此代码的基础来自另一篇文章）

```
public class SecurityHelpler2 : WindowsTokenRoleProvider
    {
        /// <summary>
        /// Retrieve the list of roles (Windows Groups) that a user is a member of
        /// </summary>
        /// <remarks>
        /// Note that we are checking only against each system role because calling:
        /// base.GetRolesForUser(username);
        /// Is very slow if the user is in a lot of AD groups
        /// </remarks>
        /// <param name="username">The user to check membership for</param>
        /// <returns>String array containing the names of the roles the user is a member of</returns>
        public override string[] GetRolesForUser(string username)
        {
            // contain the list of roles that the user is a member of
            List<string> roles = null;

            // Create unique cache key for the user
            string key = username.RemoveBackSlash();

            // Get cache for current session
            Cache cache = HttpContext.Current.Cache;

             // Obtain cached roles for the user
             if (cache[key] != null)
             {
                roles = new List<string>(cache[key] as string[]);
             }

            // is the list of roles for the user in the cache?
            if (roles == null)
            {
                // create list for roles 
                roles = new List<string>();
                Dictionary<string, string> groupNames = new Dictionary<string, string>();

                // check the groups are available in cache
                if (cache[Common.XXX_SEC_GROUPS] != null)
                {
                    groupNames = new Dictionary<string, string>(cache[Common.XXX_SEC_GROUPS] as Dictionary<string, string>);
                }
                else
                {
                    // if groups are not available in the cache get again
            // here we are getting the valid group from web config  
                    // also add to the cache inside this method
                    groupNames = Utility.GetRetailSecurityGroups();
                }

                // For each  role, determine if the user is a member of that role
                foreach (KeyValuePair<String,String> entry in groupNames)
                {
                    if (base.IsUserInRole(username, entry.Value))
                    {
                        roles.Add(entry.Value);
                    }
                }

                // Cache the roles for 1 hour
                cache.Insert(key, roles.ToArray(), null, DateTime.Now.AddHours(1), Cache.NoSlidingExpiration);

            }

            // Return list of roles for the user
            return roles.ToArray();
        }
    }
} 
```

最后我从 IsAccessibleToUser 方法调用以下方法。

```
/// <summary>
    /// Get the usr role from the cache and check the role exists
    /// </summary>
    /// <param name="role"></param>
    /// <param name="userName"></param>
    /// <returns>return true if the user is in role</returns>
    public static bool UserIsInRole(string role, string userName)
    {
        // contains the list of roles that the user is a member of
        List<string> roles = null;

        // Get cache for current session
        Cache cache = HttpContext.Current.Cache;
        string key = userName.RemoveBackSlash();

        // Obtain cached roles for the user
        if (cache[key] != null)
        {
            roles = new List<string>(cache[key] as string[]);
        }
        else
        {
            // if the cache is null call the method and get the roles.
            roles = new List<string>(new SecurityHelpler2().GetRolesForUser(userName) as string[]);
        }

        if (roles.Count > 0)
        {
            return roles.Contains(role);
        }

        return false;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:11:22.837

根据 的设计`SiteMapProvider`，`IsAccessibleToUser`将始终被调用。如果它不调用它，它就必须缓存上一次调用的结果。A`SiteMapProvider`无法确定在您的情况下缓存结果是否正确。那是你的决定。您需要的任何缓存都必须在您的实现中。

我相信您从 Active Directory 获取数据的功能在`SecurityHelpler2().GetRolesForUser`

对这个函数的任何调用都会很慢。您从缓存中获取的其余代码应该非常快。

由于您的缓存仅在 1 小时内有效，因此用户每小时点击一次会非常慢。

如果您已经知道您网站的用户（而且数量不是很大），为了加快速度，您可以`Cache`为所有用户预加载。对于活跃用户，滑动到期会更好。这样，用户将拥有相同的角色，直到他们处于活动状态。下次登录时，将从 Active Directory 加载更新的角色。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-11-02T20:30:27.310

我建议实施自定义`IAclModule`而不是覆盖提供程序。`IsAccessibleToUser`在此模块中，您可以为方法编写任何逻辑。同样的结果，只是更优雅。

在此处查看示例：[https ://github.com/maartenba/MvcSiteMapProvider/wiki/Security-Trimming](https://github.com/maartenba/MvcSiteMapProvider/wiki/Security-Trimming)

# mpi - 使用 CppUnit 测试 MPI 代码的建议/经验

> ID：12527332
> 
> 赞同：1
> 
> 时间：2012-09-21T08:58:52.883
> 
> 标签：mpi, cppunit

我有一个代码库，我一直在使用 CppUnit 进行单元测试。我现在正在向项目中添加一些 MPI 代码，并且我想对我在 MPI 之上构建的一些抽象进行单元测试。例如，我编写了一些代码来管理单生产者/多消费者关系，其中消费者请求工作，生产者序列化下一部分工作以发送给消费者，我想测试这种交互通过在生产者中生成一些虚假工作项的测试，将它们分发给消费者，然后消费者将某种校验和发送回消费者，以确保所有内容都已分发并且没有死锁等。

有没有人有什么在这里最有效的经验？我一直在思考的一些事情：

1.  让所有进程执行测试运行程序以便它们都以相同的顺序执行测试功能是否合理？还是只让主运行测试运行程序并让它向从属设备发送广播以告诉他们接下来要做什么更好（可能使用某种查找表将命令映射到测试功能）？
2.  在从属设备中使用 CPPUNIT_ASSERT 是否合理，或者是否应该将所有信息发送回主设备以进行断言？如果 slaves 可以断言，应该如何组合所有结果以获得单个输出日志？
3.  应该如何处理测试失败，以便一个进程中抛出的异常不会导致同步问题，例如另一个进程正在等待匹配的 MPI_Send 现在永远不会发生的 MPI_Recv？

# atg - “contactInfo”的 ATG 中的项目描述符继承

> ID：12527333
> 
> 赞同：0
> 
> 时间：2012-09-21T08:58:55.120
> 
> 标签：atg

我正在尝试继承“contactInfo”项目并创建一个新的项目描述符。如下所示。

```
<item-descriptor name="testContactInfo" super-type="contactInfo">
    <table name="test_contact_info" type="auxiliary" id-column-name="contact_id" shared-table-sequence="1">
        <property name="fixedlinenumber" column-name="fixed_line_num" data-type="string"/>
    </table>
</item-descriptor> 
```

启动服务器时出现以下错误。

```
14:19:52,856 ERROR [ProfileAdapterRepository] Error parsing template: atg.repository.RepositoryException: Your item-descriptor definition for testContactInfo has super-type contactInfo but no sub-type attribute. 
```

我在这里做错了什么？我将定义保留在 userProfile.xml

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:53:36.217

第一个问题：您是否真的希望创建 contactInfo 项目描述符的子类型 - 也就是说，您是否希望系统中有一些类型为 contactInfo 的项目和一些类型为 testContactInfo 的项目 - 或者您只是想添加现有contactInfo 项描述符的自定义属性？

如果您实际上是在尝试创建contactInfo 的子类型，那么您需要修改contactInfo 的描述符以告诉它如何区分contactInfo 类型的项目和testContactInfo 类型的项目。您需要向contactInfo 添加一个属性，例如contactType，并设置sub-type-property 属性

```
<item-descriptor name="contactInfo" sub-type-property="contactType" ...>
  ...
  <property name="contactType" data-type="enumerated">
    <option value="standard"/>
    <option value="test"/>
  </property>
  ...
</item-descriptor> 
```

然后你可以子类型它

```
<item-descriptor name="testContactInfo" super-type="contactInfo" sub-type-value="test">
  ...
</item-descriptor> 
```

但是，如果您只是想为其添加自定义属性，则可以很好地添加到现有定义中。您不需要子类型来扩展开箱即用的项目。例如

```
<item-descriptor name="contactInfo">
  <table name="test_contact_info" type="auxiliary" id-column-name="contact_id" shared-table-sequence="1">
    <property name="fixedlinenumber" column-name="fixed_line_num" data-type="string"/>
  </table>
</item-descriptor> 
```

将导致一个名为 fixedlinenumber 的新属性添加到标准 contactInfo 项中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-08T13:34:10.000

项目描述符继承可以通过两种方式完成。你可以：-

1.  为现有项目描述符添加新属性。在这里，您可以将许多属性添加到现有的项目描述符。这可以是开箱即用的，也可以是您的自定义存储库。

例如，您可以为contactInfo 项描述符设置一个employeeId 属性，该属性可用于所有contactInfo 项。

2.  创建项目描述符的子类型。这通常用于具有特定项目描述符的独特属性。

例如，在您的contactInfo 类型中，您可以有一个“employeeContactInfo”，您希望在其中存储一个额外的员工ID，并且您可以有一个仅用于该类型的“employeeId”。

所以，这基本上取决于你的要求。你可以在这个网站上看到一些细节。很好的教程：-

[http://learnoracleatg.blogspot.in/2014/11/art203-how-to-extend-out-of-box-non.html](http://learnoracleatg.blogspot.in/2014/11/art203-how-to-extend-out-of-box-non.html) 和 [http://learnoracleatg.blogspot.in/2014/12/art204-how- to-add-new-item-descriptor.html](http://learnoracleatg.blogspot.in/2014/12/art204-how-to-add-new-item-descriptor.html)

# excel - 如何使用 VBA 将 ShapeStyle 应用于 Excel 中的特定图表系列？

> ID：12527336
> 
> 赞同：4
> 
> 时间：2012-09-21T08:59:03.017
> 
> 标签：excel, charts, shapes, series, vba

如何使用 vba 以编程方式将 ShapeStyle 应用于单个图表系列中的一组点？看来我需要一个“形状”对象，它只包含我要格式化的系列中的点？

一些信息在这里：[http](http://peltiertech.com/WordPress/programming-excel-2007-2010-autoshapes-with-vba/) ://peltiertech.com/WordPress/programming-excel-2007-2010-autoshapes-with-vba/在“设置边框和填充样式”部分下

我有伪代码，但我不知道如何创建 Shapes 对象，其中只有我想要的项目

```
' Applies desired shapestyle to a specific series of a chart

Sub ApplyShapeStyle(ch As Chart, sr As Series, ss As ShapeStyle)

    ' Somehow create a "Shapes" object that 
    ' contains all the points from the series as Shape objects

    Dim shps as Shapes
    'pseudocode
    shps.Add(<all points from series>)
    shps.ShapeStyle = ss

End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T15:02:25.437

就像我在评论中提到的（*我可能是错*的），没有可用的 shape 属性可`DataLabel`让您更改`.ShapeStyle`. 但是，我设法使用复杂的例程实现了您想要的。

**逻辑**

1.  在工作表中插入一个临时形状，比如一个矩形
2.  应用`.ShapeStyle`到这个形状
3.  从形状中单独设置*填充*、*边框颜色*、*边框样式*、*阴影*`DataLabel`等属性。
****   完成后，删除形状。***

 *****代码**

```
Sub Sample()
Dim myChart As ChartObject
Dim chrt As Chart
Dim shp As Shape
Dim sr As Series

Set myChart = ActiveSheet.ChartObjects("Chart 1")
Set chrt = myChart.Chart

'º·. Add a temporary Shape with desired ShapeStyle
Set shp = ActiveSheet.Shapes.AddShape(msoShapeRectangle, 100, 100, 100, 100)
shp.ShapeStyle = msoShapeStylePreset42

Set sr = chrt.SeriesCollection(1)

'º·. Fill
Dim gs As GradientStop
Dim i As Integer

If shp.Fill.BackColor.ObjectThemeColor <> msoNotThemeColor Then
    sr.Format.Fill.BackColor.ObjectThemeColor = shp.Fill.BackColor.ObjectThemeColor
End If
If shp.Fill.ForeColor.ObjectThemeColor <> msoNotThemeColor Then
    sr.Format.Fill.ForeColor.ObjectThemeColor = shp.Fill.ForeColor.ObjectThemeColor
End If
Select Case shp.Fill.Type
    Case msoFillGradient
        ' Have to set the gradient first otherwise might not be able to set gradientangle
        sr.Fill.TwoColorGradient shp.Fill.GradientStyle, shp.Fill.GradientVariant
        sr.Format.Fill.GradientAngle = shp.Fill.GradientAngle

        'Removes pre-existing gradient stops as far as possible...
        Do While (sr.Format.Fill.GradientStops.Count > 2)
            sr.Format.Fill.GradientStops.Delete sr.Format.Fill.GradientStops.Count
        Loop

        For i = 1 To shp.Fill.GradientStops.Count
            Set gs = shp.Fill.GradientStops(i)

            If i < 3 Then
                sr.Format.Fill.GradientStops.Insert gs.Color, gs.Position, gs.Transparency, i
                ' ...and then removes last two stops that couldn't be removed earlier
                sr.Format.Fill.GradientStops.Delete 3
            Else
                sr.Format.Fill.GradientStops.Insert gs.Color, gs.Position, gs.Transparency, i
            End If
        Next i

    Case msoFillSolid
        sr.Format.Fill.Solid

    ' NYI
    Case msoFillBackground
    Case msoFillMixed
    Case msoFillPatterned
    Case msoFillPicture
    Case msoFillTextured
End Select

sr.Format.Fill.Transparency = shp.Fill.Transparency

'º·. Line
If shp.Line.Visible Then
    sr.Format.Line.ForeColor = shp.Line.ForeColor
    sr.Format.Line.BackColor = shp.Line.BackColor
    sr.Format.Line.DashStyle = shp.Line.DashStyle
    sr.Format.Line.InsetPen = shp.Line.InsetPen
    sr.Format.Line.Style = shp.Line.Style
    sr.Format.Line.Transparency = shp.Line.Transparency
    sr.Format.Line.Weight = shp.Line.Weight

    ' Some formatting e.g. arrowheads not supported
End If
sr.Format.Line.Visible = shp.Line.Visible

'º·. Glow
If shp.Glow.Radius > 0 Then
    sr.Format.Glow.Color = shp.Glow.Color
    sr.Format.Glow.Radius = shp.Glow.Radius
    sr.Format.Glow.Transparency = shp.Glow.Transparency
End If
sr.Format.Glow.Radius = shp.Glow.Radius

'º·. Shadows are a pain
' see http://stackoverflow.com/questions/10178990/turn-off-marker-shadow-on-vba-generated-excel-plots
If shp.Shadow.Visible Then
    sr.Format.Shadow.Blur = shp.Shadow.Blur
    sr.Format.Shadow.ForeColor = shp.Shadow.ForeColor
    sr.Format.Shadow.OffsetX = shp.Shadow.OffsetX
    sr.Format.Shadow.OffsetY = shp.Shadow.OffsetY
    sr.Format.Shadow.Size = shp.Shadow.Size
    sr.Format.Shadow.Style = shp.Shadow.Style
    sr.Format.Shadow.Transparency = shp.Shadow.Transparency
    sr.Format.Shadow.Visible = msoTrue
Else
    ' Note that this doesn't work as expected...
    sr.Format.Shadow.Visible = msoFalse
    ' ...but this kind-of does
    sr.Format.Shadow.Transparency = 1
End If

'º·. SoftEdge
sr.Format.SoftEdge.Radius = shp.SoftEdge.Radius
sr.Format.SoftEdge.Type = shp.SoftEdge.Type

'º·. 3d Effects
If shp.ThreeD.Visible Then
    sr.Format.ThreeD.BevelBottomDepth = shp.ThreeD.BevelBottomDepth
    sr.Format.ThreeD.BevelBottomInset = shp.ThreeD.BevelBottomInset
    sr.Format.ThreeD.BevelBottomType = shp.ThreeD.BevelBottomType
    sr.Format.ThreeD.BevelTopDepth = shp.ThreeD.BevelTopDepth
    sr.Format.ThreeD.BevelTopInset = shp.ThreeD.BevelTopInset
    sr.Format.ThreeD.BevelTopType = shp.ThreeD.BevelTopType
    sr.Format.ThreeD.ContourColor = shp.ThreeD.ContourColor
    sr.Format.ThreeD.ContourWidth = shp.ThreeD.ContourWidth
    sr.Format.ThreeD.Depth = shp.ThreeD.Depth
    sr.Format.ThreeD.ExtrusionColor = shp.ThreeD.ExtrusionColor
    sr.Format.ThreeD.ExtrusionColorType = shp.ThreeD.ExtrusionColorType
    sr.Format.ThreeD.FieldOfView = shp.ThreeD.FieldOfView
    sr.Format.ThreeD.LightAngle = shp.ThreeD.LightAngle
    sr.Format.ThreeD.Perspective = shp.ThreeD.Perspective
    sr.Format.ThreeD.ProjectText = shp.ThreeD.ProjectText
    sr.Format.ThreeD.RotationX = shp.ThreeD.RotationX
    sr.Format.ThreeD.RotationY = shp.ThreeD.RotationY
    sr.Format.ThreeD.RotationZ = shp.ThreeD.RotationZ
    sr.Format.ThreeD.Z = shp.ThreeD.Z
End If
sr.Format.ThreeD.Visible = shp.ThreeD.Visible

'º·. Cleanup
shp.Delete

End Sub 
```

**截屏**

只是设置一些`.Fill`属性给了我这个`msoShapeStylePreset38`

![在此处输入图像描述](../Images/00830a85bbbfd1b456d2a2a5ad1e3a7e.png)***

# javascript - 在网页中搜索文本字段 +ios

> ID：12527337
> 
> 赞同：0
> 
> 时间：2012-09-21T08:59:09.870
> 
> 标签：javascript, iphone, html, ios, uiwebview

已编辑的问题我使用以下方法阅读了网页：-

```
NSString *myText = [webView stringByEvaluatingJavaScriptFromString:@"document.documentElement.textContent"]; 
```

现在我想将 UITextField 搜索到网页中。

我该怎么办 ？这样我就可以找到在 UIWebView 中打开的网页中是否有任何 UITextField。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:04:25.517

XML 解析器可用于 HTML 解析，因此使用 NSURLConnection 将网页读入 NSData 对象，然后使用 NSXMLParser 使用其 initWithData 属性对其进行解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:00:56.907

我通过以下方式解决了这个问题：

```
NSString *myText = [webView stringByEvaluatingJavaScriptFromString:@"document.title"]; 
```

# php - 无法使用变量名更新数据库？

> ID：12527351
> 
> 赞同：2
> 
> 时间：2012-09-21T09:00:12.703
> 
> 标签：php, sql

在更新 mySQL 数据库中的记录时，我只是无法让这个查询工作：

在我的更新脚本中，我发布了两个变量的内容，当我打印它们时我可以看到内容：

```
$orderno =$_POST['order_no'][$i];
$status =$_POST['order_status'][$i]; 
```

我的 SQL 查询如下所示：

```
<?php
if(isset($_POST['order_status']))
{
$dbhost = 'localhost';
$dbuser = 'root';
$dbpass = '';
$conn = mysql_connect($dbhost, $dbuser, $dbpass);
if(! $conn )
{
die('Could not connect: ' . mysql_error());
}
$orderno =$_POST['order_no'][$i];
$status =$_POST['order_status'][$i];
print_r($_POST['order_no']);
$sql = 'UPDATE Orders SET status="' . '$status'. '" WHERE   Orderno="' .'$orderno' . '"';
echo $sql;
mysql_select_db('PurchaseOrders');
$retval = mysql_query( $sql, $conn );
if(! $retval )
{
die('Could not update data: ' . mysql_error());
}
echo "Updated data successfully\n";
mysql_close($conn);
}
?> 
```

这是将变量名称本身插入数据库，而不是打印的变量的值？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:00:52.807

尝试以下操作：

```
$sql = 'UPDATE Orders SET status="' . $status. '" WHERE   Orderno="' .$orderno . '"'; 
```

还要考虑安全性。您没有验证任何形状或形式的字符串（订单号或状态）。

不推荐使用 mysql 函数，请考虑使用 mysqli

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:07:03.503

```
$sql = "UPDATE Orders SET status='" . $status . "' WHERE   Orderno= '" . $orderno . "' "; 
```

当您将变量封装在单引号中时，PHP 将“按原样”使用它。它不会评估引号内的任何变量。

看看[单引号和双引号的区别](https://stackoverflow.com/questions/3446216/difference-between-single-quote-and-double-quote-string-in-php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T09:12:59.897

使用这样的查询

```
$sql = "UPDATE Orders SET status='$status' WHERE  Orderno='$orderno'"; 
```

你在里面使用变量`single quotes`。内部`single quotes`变量名称无法解析，您必须为此使用`double quotes`。`double quotes`可变价值即将到来。

# eclipse - 独立 Maven 中等效的用户设置是什么？

> ID：12527356
> 
> 赞同：0
> 
> 时间：2012-09-21T09:00:32.327
> 
> 标签：eclipse, maven, m2e

我在 m2e 中配置了“用户设置”文件。我在文件中配置了本地存储库位置。

但是独立的 Maven 怎么知道呢？如何配置独立 Maven 以使用相同的用户配置和相同的本地存储库位置？

例如，以下命令会将 jar 添加到本地存储库中：

```
mvn install:install-file -Dfile=c:\kaptcha-2.3.jar -DgroupId=com.google.code
-DartifactId=kaptcha -Dversion=2.3 -Dpackaging=jar 
```

这里没有存储库位置，因此它将使用它认识的人。哪一个？

**更新**

我可以不在命令行中而是在全局设置中设置用户设置位置吗？

可能我可以编辑`mavenrc_pre.bat`还是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:37:10.450

本地存储库位置在 中定义`settings.xml`，您可以使用`--settings`选项在命令行中指定。这是您定义回购位置的方式：[http ://maven.apache.org/settings.html#Repositories](http://maven.apache.org/settings.html#Repositories)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:17:28.880

尝试`-s <path_to_settings.xml>`设置您的 settings.xml，本地存储库将从中提取

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T11:54:44.607

`settings.xml`用户文件的默认位置是在`.m2`用户主目录下的目录中。

# xml - Apache-FOP：列之间的间隙

> ID：12527357
> 
> 赞同：0
> 
> 时间：2012-09-21T09:00:33.083
> 
> 标签：xml, apache-fop, xmltable

我需要在 Apache-FOP 中表的列之间放置一个“间隙”：

```
<fo:table column-gap="2mm" width="156mm" height="260mm" table-layout="fixed" page-break-after="always">
            <fo:table-column column-number="1" column-width="50mm"/>
            <fo:table-column column-number="2" column-width="50mm"/>
            <fo:table-column column-number="3" column-width="50mm"/>

            <fo:table-body start-indent="0pt" text-align="start" font-family="Arial, Helvetica, Tahoma, sans-serif"
                           font-weight="normal" font-size="10pt">

            // rows/cells stuff
            </fo:table-body>
        </fo:table> 
```

我尝试使用 column-gap、spacing-before、margin-left 等，但列仍然粘在一起。知道如何在两者之间放置间隙吗？也许唯一的解决方案是创建“空”列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T19:32:40.457

如果我没记错的话，我的 xsl-fo 文档中的表格单元元素总是会阻塞。间隙和距离通过块元素的边距属性来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-01T18:13:49.083

不确定是否仍然相关，但您可以轻松地在您希望有间隙的列之间放置另一个非常小的列。

# actionscript - SWF 文件提取

> ID：12527358
> 
> 赞同：0
> 
> 时间：2012-09-21T09:00:39.567
> 
> 标签：actionscript, flash

如果我有一个 SWF 文件的链接 - 例如这里[http://redletterdaysb2b.co.uk/swf/our-video.swf](http://redletterdaysb2b.co.uk/swf/our-video.swf) 我如何提取它以在另一个网站上使用？我已经下载了 swf，但是当我尝试播放它时却得到一个错误#2044。它需要放入某种包装中吗？多谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:17:06.403

您正在尝试加载一个 swf，然后使用 FLVPlayback 组件加载并显示一个[.flv 。](http://redletterdaysb2b.co.uk/swf/RED_LETTER_DAYS.flv)我猜 our-video.swf 加载正常，但它可能保留了对 .flv 的相对引用。

我可以想到两种方法来处理这个问题：

1.  只需在其他站点上添加一个新的 FLVPlayback（或任何其他视频播放器），但告诉它从原始站点加载[.flv文件。](http://redletterdaysb2b.co.uk/swf/RED_LETTER_DAYS.flv)
2.  尝试将 .flv 文件复制到与新站点上的新 .swf 相同的文件夹中。

对于 FLVPlayback 组件，还有另一部分可能导致错误：原始站点上的[皮肤](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/video/FLVPlayback.html#skin)是[here](http://redletterdaysb2b.co.uk/swf/redletterdays.swf)。

#2024 IOError 还应该包含一个 URL。这是关于 our-video.swf 如何尝试加载 .swf 文件的最佳提示（使用相对 (./swf/redletterdays.swf) 或绝对 (/swf/redletterdays.swf) 路径）。

基于此，如果您决定从原始站点（不仅仅是 .flv 文件）加载播放器，您可以确定[皮肤](http://redletterdaysb2b.co.uk/swf/redletterdays.swf)的放置位置（即在新站点根目录下名为**swf的文件夹中）**

# gwt - Eclipse 的示例“Google Maps API v3 for GWT”项目

> ID：12527362
> 
> 赞同：2
> 
> 时间：2012-09-21T09:00:55.883
> 
> 标签：gwt, google-maps-api-3, google-eclipse-plugin

谷歌在这里发布了 GWT 的官方地图 v3 API [https://groups.google.com/forum/#!topic/gwt-google-apis/6SO5kCDqb-k](https://groups.google.com/forum/#!topic/gwt-google-apis/6SO5kCDqb-k) （注意[http://code.google.com/p/gwt -google-maps-v3/](http://code.google.com/p/gwt-google-maps-v3/)已弃用且不是官方的。）

我已经下载了 zip 文件，里面有示例，但它们都是 java 的。我不知道如何在我的 project.gwt.xml 中继承它，或者在我的主 html 中写入什么，或者在哪里放置 gwt-maps.jar 文件。

是否有任何完整的 Eclipse GWT 项目“用于官方 API”？或者任何解释如何从零开始到我的第一个具有 OnModuleLoad() 的类的指导链接？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T10:15:31.957

Here are a few tips to help you get starting:

`gwt-maps.jar` should be placed in WEB-INF/lib

in your `prject.gwt.xml` you might add in your `<module>` section:

```
<inherits name="com.google.maps.gwt.GoogleMaps" />
<script src="http://maps.google.com/maps/api/js?sensor=false" /> 
```

this will make loading maps api when loading page.

Followings are copy/paste lines from my app, arrange them to match your needs:

```
 MapOptions options  = MapOptions.create() ;

    options.setCenter(LatLng.create( latCenter, lngCenter ));   
    options.setZoom( 6 ) ;
    options.setMapTypeId( MapTypeId.ROADMAP );
    options.setDraggable(true);
    options.setMapTypeControl(true);
    options.setScaleControl(true) ;
    options.setScrollwheel(true) ;

    SimplePanel widg = new SimplePanel() ;

    widg.setSize("100%","100%");

    GoogleMap theMap = GoogleMap.create( widg.getElement(), options ) ;

    RootLayoutPanel.get().add( widg ) ; 
```

This will build a widget with a map inside.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:22:04.253

上面的例子真的很有帮助。我正在发送我自己的一段代码，以便它也可以帮助其他人使用 GWT 2.4 开发 Google Map V3

Google Map V3 所需的罐子是 gwt-maps.jar（版本 3.8.0）。对于 Maven 构建，以下是依赖项：

```
<dependency>
  <groupId>com.google.gwt.google-apis</groupId>
  <artifactId>gwt-maps</artifactId>
  <version>3.8.0</version>
</dependency> 
```

在您的 entryPoint.gwt.xml 中写下以下内容：

```
<inherits name="com.google.maps.gwt.GoogleMaps" />
<script src="http://maps.google.com/maps/api/js?sensor=false" /> 
```

导入语句是：

```
import com.google.maps.gwt.client.MapOptions;
import com.google.maps.gwt.client.LatLng;
import com.google.maps.gwt.client.MapTypeId;
import com.google.maps.gwt.client.GoogleMap; 
```

在 GWT 代码中，获取一个按钮并将地图加载代码写到按钮 onClick 事件中。

```
// This is the layout which will hold the button
final HLayout actionbuttonsLayout = new HLayout(10);
final IButton showMap = new IButton("Locate your Store");
actionbuttonsLayout.addMember(showMap);

//--- This is the layout which will hold the Map 
final HLayout mapLayout = new HLayout(50);  
final SimplePanel widg = new SimplePanel() ;
widg.setSize("700px", "200px");     
layout.addMember(mapLayout);
mapLayout.setVisible(false);

// This is the Click Handler where the map rendering process has been written
showMap.addClickHandler(new ClickHandler() {  

    public void onClick(ClickEvent event) {

        MapOptions options  = MapOptions.create();

        options.setCenter(LatLng.create(39.509, -98.434)); 
        options.setZoom(6);
        options.setMapTypeId(MapTypeId.ROADMAP);
        options.setDraggable(true);
        options.setMapTypeControl(true);
        options.setScaleControl(true);
        options.setScrollwheel(true);

        GoogleMap theMap = GoogleMap.create(widg.getElement(), options) ;
        mapLayout.addMember(widg);
        mapLayout.setVisible(true);
    }  
}); 
```

# jquery - 从 jquery 插件中获取价值

> ID：12527366
> 
> 赞同：0
> 
> 时间：2012-09-21T09:01:08.343
> 
> 标签：jquery

您如何再次获取此插件中设置的值？

下面的示例显示了我希望在页面上任何我需要调用它的地方可用的变量。把我得到的都是未定义的？

**插件.js**

```
(function($) {
    $.fn.myPlugin = function(options) {
        options.val ++;
        // access and modify 'somevar' here so that it gets modified
        // in the function which called a plugin

    };
})(jQuery); 
```

**页面上的脚本**

```
<script>
    $(document).ready(function(){
        var somevar = {val: 5};
        $(document).myPlugin(somevar);
    });
</script>

<script>
    $(document).ready(function(){
        alert(somevar.val);
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:06:26.803

您的 somevar 在第一个 $(document).ready() 中声明为本地，以便在第二个中访问，您应该这样做：

```
<script>
    var somevar;
    $(document).ready(function(){
        somevar = {val: 5};
        $(document).myPlugin(somevar);

    });
</script>

<script>
    $(document).ready(function(){
        alert(somevar.val);
    });
</script> 
```

# javascript - javascript中的时间计算脚本

> ID：12527369
> 
> 赞同：-1
> 
> 时间：2012-09-21T09:01:20.927
> 
> 标签：javascript, python

有没有办法知道一个人在使用 python 脚本在浏览器中打开的页面上花费的总时间？例如，如果一个人使用 gmail，并且当前正在使用它（即页面非空闲），我们能否知道页面处于活动状态的总时间？进一步解释我打算做什么：

1.  通过主动方式**，我实际上是在使用页面**，无论是阅读、打字还是鼠标工作。
2.  如果能以某种方式**排除在休息时间花费的时间**，那就太好了，也许会引入一些错误？我不确定javascript是否适合它，并且愿意接受建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:10:35.737

**简短的回答：**我不这么认为。

这并不是 Python 能否做到这一点的问题，而是与您的浏览器是否以外部程序/脚本可以查询的方式公开该信息有关。

还有一个问题是如何定义/确定哪个页面是“活动的”。浏览器窗口当前是活动窗口并且页面位于所选选项卡上就足够了吗？或者你会期待某种互动吗？如果我正在阅读很长的文本，并且在一段时间内没有与页面进行交互，那仍然算作活动吗？

即使从网站的角度来看，也[很难检测到活动](https://stackoverflow.com/questions/1009260/how-can-i-detect-with-javascript-jquery-if-the-user-is-currently-active-on-the-p)，从 3rd 方应用程序/脚本（无论是用 Python 还是任何其他语言编写）这样做会更加棘手。

如果你想进一步探索这个，我会说你最好的选择是编写一个浏览器扩展/插件。事实上，可能已经有[现有的](http://techie-buzz.com/tips-and-tricks/5-useful-firefox-extensions-to-analyze-and-track-your-internet-usage.html)可以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:16:21.933

这并不是真正的 Python 特定的。

我能想到的最好的办法是留下“谷歌分析”之类的东西来为你做所有这些事情，然后使用你选择的语言，从[API中获取你需要的数据](https://developers.google.com/analytics/)

当然，这可能不合适，并且它认为页面查看时间等的规则可能不起作用，但至少它会是一致的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T09:03:43.560

That sounds highly browser and platform-specific.

So, in general "no".

If the browser has some kind of interface or "hook" support then it might be possible.

# asp.net-mvc - AppDomain.CurrentDomain.BaseDirectory 返回单元测试项目根位置而不是源项目

> ID：12527370
> 
> 赞同：3
> 
> 时间：2012-09-21T09:01:22.790
> 
> 标签：asp.net-mvc, unit-testing

在我的应用程序项目中，我使用 AppDomain.CurrentDomain.BaseDirectory 来获取文件路径。当我在我的项目中包含单元测试时，AppDomain.CurrentDomain.BaseDirectory 在调试时返回单元测试项目目录而不是我的源项目。你能告诉我如何解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:08:56.037

这是预期的行为。

您可以考虑将所需文件复制到单元测试目录。

在 Visual Studio 2010 中，查看“测试设置”下的“部署”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T18:59:15.853

默认设置指向 Visual Studio 2010 测试项目中的 bin\debug 文件夹。但如果启用编辑测试设置的部署选项，AppDomain.CurrentDomain.BaseDirectory 将指向 TestResults\Out 文件夹。我首先添加了单元测试项目，然后添加了其他项目。

乔，您能否提供来自 MSDN 的链接以支持您预期的行为答案？

我建议阅读此答案以引用您的程序集所在的位置。 [https://stackoverflow.com/a/8670008/2611808](https://stackoverflow.com/a/8670008/2611808)

# java - 从代码创建 JNDI 资源？

> ID：12527372
> 
> 赞同：2
> 
> 时间：2012-09-21T09:01:27.463
> 
> 标签：java, resources, jndi, naming

是否可以从代码中向 JNDI 发布自定义/外部资源？我知道这样做的方法是通过管理员命令[create-custom-resource](http://docs.oracle.com/cd/E26576_01/doc.312/e24938/create-custom-resource.htm#GSRFM00022)或管理 gui。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:29:17.297

JNDI api 没有为此提供任何机制，您需要利用应用程序服务器提供的底层实现，该实现要么没有记录，要么取决于平台（在您的情况下为 glassfish）。

# php - 如何比较自定义格式的两个时间戳？

> ID：12527375
> 
> 赞同：2
> 
> 时间：2012-09-21T09:01:42.263
> 
> 标签：php, date, timestamp

我有两个格式如下的时间戳：`substr( date( 'YmdHisu' ), 0, 17 )`

```
20120921105240000
20120921115626000 
```

现在，我该如何比较它们？

我试图做一个简单的方法，如：

```
$diff = abs( 20120921105240000 - 20120921115626000 ); 
```

但这并没有给我所需的结果，因为时间搞砸了。我想做的就是找出它们之间经过了多少分钟（或秒）。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T09:06:45.243

```
$date1 = DateTime::createFromFormat('Ymdhisu', '20120921105240000');
$date2 = DateTime::createFromFormat('Ymdhisu', '20120921115626000');
$interval = $date1->diff($date2);
print_r($interval);

/*DateInterval Object
(
    [y] => 0
    [m] => 0
    [d] => 0
    [h] => 1
    [i] => 3
    [s] => 46
    [invert] => 0
    [days] => 0
)*/

$seconds = $date2->getTimestamp()-$date1->getTimestamp();
echo $seconds; 
```

[例子](http://sandbox.onlinephpfunctions.com/code/09bfe5e8f28365a37bd490c735b49ee2db47e1f9)

[请参阅有关对象和方法的](http://php.net/manual/en/datetime.createfromformat.php)额外信息。

对于 PHP < 5.3：

方法[`sscanf`](http://php.net/sscanf)+ [`mktime`](http://php.net/mktime)：

```
$date1 = '20120921105240000';
$date2 = '20120921115626000';

function parse_mydate_string($string) {
    if ($a = sscanf($string, '%4s%2s%2s%2s%2s%2s') {
        if (FALSE !== $r = mktime($a[3], $a[4], $a[5], $a[1], $a[2], $a[0])) {
            return $r;
        }
    }
    throw new InvalidArgumentException('Not the expect date string.');
}

$diff    = parse_mydate_string($date1) - parse_mydate_string($date2);    
$absdiff = abs($diff); 
```

或`sscanf`+ `vsprintf`+ [`strtotime`](http://php.net/strtotime)：

```
$date1 = '20120921105240000';
$date2 = '20120921115626000';

$date1 = vsprintf('%s-%s-%s %s:%s:%s', sscanf($date1, '%4s%2s%2s%2s%2s%2s'));
$date2 = vsprintf('%s-%s-%s %s:%s:%s', sscanf($date2, '%4s%2s%2s%2s%2s%2s'));

$diff = abs(strtotime($date2) - strtotime($date1)); 
```

或多个[`substr`](http://php.net/substr)字符串操作 + `strtotime`：

```
$date1 = '20120921105240000';
$date2 = '20120921115626000';

$date1 = substr($date1, 0, 4).'-'.substr($date1, 4, 2).'-'.substr($date1, 6, 2).' '.substr($date1, 8, 2).':'.substr($date1, 10, 2).':'.substr($date1, 12, 2);
$date2 = substr($date2, 0, 4).'-'.substr($date2, 4, 2).'-'.substr($date2, 6, 2).' '.substr($date2, 8, 2).':'.substr($date2, 10, 2).':'.substr($date2, 12, 2);

$diff = abs(strtotime($date2) - strtotime($date1)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:11:59.163

您最好使用标准的日期/时间格式，以避免从头开始完成所有工作。

看看这里的讨论： [PHP How to find the time elapsed since a date time?](https://stackoverflow.com/questions/2915864/php-how-to-find-the-time-elapsed-since-a-date-time?rq=1)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-21T09:06:59.043

尝试一下`strcmp`，当然更好的方法是在比较之前将其转换为 Datetime 对象

# c - 如何在c中读取文件的多行

> ID：12527376
> 
> 赞同：2
> 
> 时间：2012-09-21T09:01:47.803
> 
> 标签：c

我正在尝试读取包含我的代码坐标值的文件。每次我使用 scanf 它只读取第一行...（60,70,200,200）。我的问题是如何让我的代码读取我文件的所有内容并将其打印在屏幕上。这是我的代码和文件。

```
 FILE.txt:
   S (60,70)(200,200)
   S (30,40)(100,200)
   S (10,20)(80,10)
   S (60,400)(700,200)
   S (160,70)(240,20)

 MY CODE:
 #include <stdio.h>
 int a;
 int b;
 int c;
 int d;
 int data[4][5];

int main ( int argc, char *argv[] )
 {

if ( argc != 2 ) /* argc should be 2 for correct execution */
{
    /* We print argv[0] assuming it is the program name */
    printf( "usage: %s filename", argv[0] );
}
else 
{
    // We assume argv[1] is a filename to open
    FILE *file = fopen( argv[1], "r" );

    /* fopen returns 0, the NULL pointer, on failure */
    if ( file == 0 )
    {
        printf( "Could not open file\n" );
    }
    else 
    {
       int i,j;
      for (j=0; j < 5; j++) 
       {
         for (i=0; i < 4; i++) {  
         fscanf(file, "S (%d,%d)(%d,%d)", &a, &b, &c, &d);
           data[i][j] = (a, b, c, d);              
           printf("%d,%d,%d,%d\n",a, b, c, d);
          }
      }             

        fclose( file );
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:05:13.527

您**必须**检查 I/O 调用的返回值，例如`fscanf()`. 如果失败，它将返回 0 而不会更改您的变量。

另外，这个：

```
data[i][j] = (a, b, c, d); 
```

在 C 中没有多大意义。请记住，C 没有像 Python 那样的元组。以上等价于：

```
data[i][j] = d; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:08:35.517

使用`while`循环：

```
const int NumberOfValuesIamGoingToReadAtOnce = 4;

while (fscanf(file, "S (%d,%d)(%d,%d)", &a, &b, &c, &d) == NumberOfValuesIamGoingToReadAtOnce)
{
    // do some actions with obtained values
} 
```

as通过返回值`fscanf` **返回读取值的数量，**您可以判断是否达到EOF或文件错误写入

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T09:08:47.207

尝试阅读换行符：

```
 fscanf(file, "S (%d,%d)(%d,%d)\n", &a, &b, &c, &d); 
```

但为什么是双循环：您已经同时读取了 4 个值。相反，让它成为一个无限循环并检查您是否已经读取了 4 个值；当您没有读取 4 个值时中断。

最后：

```
 data[i][j] = (a, b, c, d); 
```

没有任何意义（任何体面的编译器警告都会告诉你）。相反，这可能是您想要第二个循环的地方：围绕分配，而不是 scanf 语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T09:10:04.880

如果你打算这样做`fscanf()`，你必须小心，因为你必须确保文件格式正确，并且具有准确的空格数，例如在 fscanf() 中的读取方式。

我建议使用`fgets()`then 从字符串中读取数字`sscanf()`。

`data[i][j] = (a, b, c, d);`

这条线没有做你认为它做的事情。当您一次读取一行中的所有数字时，您真的不需要另一个循环。

```
 for (j=0; j < 5; j++) 
       {
         fscanf(file, "S (%d,%d)(%d,%d)", &a, &b, &c, &d);
           data[j][0] = a;
           data[j][1] = b;
           data[j][2] = c;
           data[j][3] = d;

           printf("%d,%d,%d,%d\n",a, b, c, d);
          }
      } 
```

并更改`data[4][5]`为`data[5][4]`;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T09:14:59.880

1.  将数据[4][5] 声明为数据[5][4]
2.  修改循环 for (i=0; i < 5; i++)
    { fscanf(file, "S (%d,%d)(%d,%d)", &a, &b, &c, &d);

    ```
     data[i][0] =a;
         data[i][1] =b;
         data[i][2] =c;
         data[i][3] =d;
         printf("%d,%d,%d,%d\n",a, b, c, d);
      } 
    ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T10:31:17.337

我曾经`fgets`每行读取文件行，我用`sscanf`而不是`fscanf`

```
#include <stdio.h>
#include <string.h>

int data[4][5];
char line[128];

int main ( int argc, char *argv[] )
{

    if ( argc != 2 ) /* argc should be 2 for correct execution */
    {
        /* We print argv[0] assuming it is the program name */
        printf( "usage: %s filename", argv[0] );
    }
    else
    {
        // We assume argv[1] is a filename to open
        FILE *file = fopen( argv[1], "r" );

        /* fopen returns 0, the NULL pointer, on failure */
        if ( file == 0 )
        {
            printf( "Could not open file\n" );
        }
        else
        {
           int i=0;
           line[0] = 0;
           while(fgets(line,sizeof(line),file))
            {
               sscanf(line, "S (%d,%d)(%d,%d)", &data[i][0], &data[i][1], &data[i][2], &data[i][3]);
               printf("%d,%d,%d,%d\n", data[i][0], data[i][1], data[i][2], data[i][3]);
               i++;
            }
            fclose( file );
        }
      }
} 
```

# javascript - Jquery限制文本字段中的文本复制安全

> ID：12527378
> 
> 赞同：1
> 
> 时间：2012-09-21T09:01:51.830
> 
> 标签：javascript, jquery

这是一个令人难以置信的问题，我遇到了麻烦。我有一个文本字段。此文本字段需要容纳 4 种格式的美国手机号码

1.  XXX-XXX-XXXX
2.  XXXXXXXXXX
3.  X-XXX-XXX-XXXX
4.  XXXXXXXXXXXX

当输入最后一个字符时，它需要通过 ajax 进行检查，我对此没有任何问题。

在输入、复制和粘贴、删除以及在该字段中输入数字的所有可能方式时，我需要检查文本框是否包含完整的手机号码。

我尝试用 $("#id").keyup 检查它，但是当你粘贴一些东西时它不起作用。

有没有办法通过间隔或其他方式检查该字段中是否有 10 或 11 个字符，而不管它是如何到达那里的？[编辑]

这是我找到的解决方案

```
var checkMsisdnInterval = window.setInterval( function () {
    var msisdn = getdigits($("#newSessionMsisdn").val());

    if(msisdn.length == 10 && !checked) {   
        doPreCheck(msisdn);
        checked = true;
    } else if(checked == true) {
        //do something here
    } else {
        //do something else 
    }
}, (1000 * 60 * 0.1));

$("#newSessionMsisdn").keyup(function(){
    checked = false;
});

function getdigits (s) {
   return s.replace (/[^\d]/g, "");
} 
```

它像炸弹一样工作。感谢所有的答复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:12:14.117

使用 jQuery，你看过 change 事件吗？

[http://api.jquery.com/change/](http://api.jquery.com/change/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:05:25.633

为什么不在 ajax 调用中检查它，使用 beforeSend 方法并检查输入字段的长度。

供您参考，[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# android - 带有字体的 Android Canvas 旋转文本未正确保存在 SD 卡上

> ID：12527383
> 
> 赞同：1
> 
> 时间：2012-09-21T09:02:00.347
> 
> 标签：android, fonts, android-canvas, truetype, typeface

我在画布上绘制旋转文本，然后将其以 JPEG 格式保存到 SD 卡中。我面临的问题是画布预览看起来不错，但保存图像中的旋转文本没有正确显示。当我使用默认的 Android 字体时，最终的 JPEG 与画布预览相同，但此代码不适用于自定义字体。

[我已经上传了最终保存的图像和画布预览的截图](http://www.flickr.com/photos/87489159@N06/)

我正在使用自定义视图类进行画布绘图，这是我的代码

```
public class MyBringBack extends View {

    Bitmap bitmap;
    Typeface type;

public MyBringBack(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
        type = Typeface.createFromAsset(context.getAssets(),"fonts/rockwell-bold.ttf"); 
         setDrawingCacheEnabled(true);
    }

@Override
protected void onDraw(Canvas canvas) {
        // TODO Auto-generated method stub
        super.onDraw(canvas);

    Paint paint = new Paint();
        paint.setColor(Color.BLUE);
       // paint.setTypeface(Typeface.defaultFromStyle(Typeface.BOLD));
        paint.setTextSize(23);
    Paint paint1 = new Paint();
        paint1.setTextSize(40);
        paint1.setColor(Color.RED);

        canvas.rotate(90,434,110);
        canvas.drawText("Demo Text Demo Text Demo Text  ", 434, 110, paint);
        canvas.restore();
        canvas.save();
        paint1.setTypeface(type);
        canvas.rotate(90,130,185);
        canvas.drawText("Text using Typeface ", 130, 185, paint1);
        canvas.restore();
        canvas.save();
        canvas.rotate(90,180,185);
        canvas.drawText("Text using Typeface ",180, 185, paint1);
        canvas.restore();
        canvas.save();
        canvas.rotate(90,230,185);
        canvas.drawText("Text using Typeface ", 230, 185, paint1);
        canvas.restore();
        canvas.save();

        this.setDrawingCacheEnabled(true);
        Bitmap c= Bitmap.createScaledBitmap(this.getDrawingCache(), canvas.getWidth(),canvas.getHeight(), false);

        /* Saving File To SD Card   */

        OutputStream outStream = null;
        File bgv = new File("/sdcard/");
        /* To build directory if needed */
        bgv.mkdirs();

        File file = new File(bgv, "final22.jpg");

        try {
        outStream = new FileOutputStream(file);
        c.compress(Bitmap.CompressFormat.JPEG, 100, outStream);

        outStream.flush();
        outStream.close();

      } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();

       } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
       }

    } 
```

}

我的代码有问题吗？

请帮忙...

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:24:30.220

最后经过对图像处理的大量研究，我得到了答案。为了保存与画布上绘制的完全相同的 jpg，我们只需添加两行代码。首先是：

`setDrawingCacheQuality(DRAWING_CACHE_QUALITY_HIGH);`

第二在 onDraw 我们必须将 AntiAlias 设置为 true，参考我的代码

```
paint1.setAntiAlias(true); 
```

但在此之后，保存的图像也与在画布上绘制的图像质量不同。为了获得同样清晰的图像质量，这两个代码可以解决问题

```
paint1.setDither(true);
paint1.setFilterBitmap(true); 
```

Dither 主要提供平滑边角，AntiAlias、Dither 和 FilterBitmap 也可以在画布上绘制 Bitmap 时使用。

要获取有关 Dither 和 AntiAlias 的更多信息，请点击此处的链接

[抗锯齿](http://www.pantherproducts.co.uk/index.php?pageid=antialiasing)

[抖动](http://www.pdf-tools.com/pdf/Support/FAQ/Article.aspx?name=How-To-Improve-Image-Quality)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T22:51:56.187

看起来画布的绘图缓存可能没有返回您期望的内容。您可以使用如下方式直接位图：

```
Bitmap myBitmap = new Bitmap(width, height, Config.ARGB_8888);
canvas.setBitmap(myBitmap);
... draw your text, etc ... 
```

然后保存`myBitmap`到磁盘。您在画布上绘制的所有内容都应绘制到位图中。

# java - 使用面向方面编程向方法提供数据

> ID：12527385
> 
> 赞同：0
> 
> 时间：2012-09-21T09:02:01.127
> 
> 标签：java, aspectj, spring-aop, aop

我正在学习 AOP，并且对切入点、建议等很满意。我很确定要问什么，但无论如何都想问。

我有一个方法，它接受一个 userId，从数据库中获取用户的记录，然后对记录做一些事情。我有 20 种不同的方法来做不同的事情，但它们都将 userId 作为输入并从数据库中获取记录。对我来说，这看起来像是一个可以拉入一个方面的横切关注点。

但是怎么做？我知道我可以访问参数（在这种情况下为 userId），访问方法的返回值并捕获方法异常。但是我如何**给该方法**一些可以使用的东西（在这种情况下记录在数据库中？）

```
public String printUserDetails(String userId)
{
    Record record = Database.fetchRecord(userId);
    System.out.println(record.getDetails());
    return record.getTitle();
} 
```

那么，有没有办法将数据库访问代码拉到一个方面？

我能想到的一种方法是声明如下内容作为输入

```
class RequestObject
{
    String userId;
    Record record;
} 
```

并在 Aspect 中注入记录，然后调用proceed()。但这不知何故感觉不对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:45:32.380

IMO 使用用户 ID 解析用户不是横切关注点，因此方面不是正确的方法。接收 userId 的第一个登录页面实际上应该将其解析为 UserRecord，从那时起，userRecord 应该是在应用程序中移动的那个。

我可以从我的一个应用程序中对您的场景进行一个简单的类比，所有经过身份验证的 servlet 都希望 servletRequest.getRemoteUser() 返回与发送请求的用户相对应的有效用户登录。我们在我们的应用程序中修饰了`HttpServletRequest`将其解析为 User 对象，并且所有经过身份验证的 servlet 向下转换`HttpServletRequest`为`AuthenticatedServletRequest`并提取该对象。应用程序中的其他人不再尝试解析用户登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T08:17:03.930

如果这是您想知道的，您不能从 AspectJ 访问方法的局部变量。

剩下的问题与设计有关，答案取决于您想要实现的目标。您可以使用[模板方法](http://en.wikipedia.org/wiki/Template_method)设计模式避免多个方法中的代码重复。如果您将它们重构为具有成员而不是局部变量，则可以将真实或模拟对象注入到类中。如果您通过直接重构您的类或通过 AspectJ (ITD)[http://www.eclipse.org/aspectj/doc/next/progguide/starting-aspectj.html#inter-type-declarations 创建成员，这是另一个问题] 机制。第三个问题是您是否可能想要使用方面进行缓存以避免多次从数据库中获取相同的对象。

我不确定你到底想达到什么目标，所以我无法更具体地回答。

# objective-c - 从 nib 或以编程方式添加子视图

> ID：12527386
> 
> 赞同：1
> 
> 时间：2012-09-21T09:02:09.970
> 
> 标签：objective-c, ios

只是一个概念问题。如果您需要在视图中插入子视图，您更愿意做什么以及为什么要使用 nib 文件来添加它还是以编程方式插入它？我说的是 xcode 4.~ 使用故事板进行开发。

问候，盖伊。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:05:27.960

这取决于你的情况。如果它是非常简单或动态的东西（例如可变数量的按钮），那么我会以编程方式进行。如果它是一个复杂但静态的视图（类似于设置视图），那么我会尝试使用 IB。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T09:07:47.567

如果我需要**动态**视图，我个人会以**编程**方式进行。但即使使用在 xib 文件中创建的视图也可以完成。如果视图**不需要动态**，我宁愿**在 xib 中创建**，这样可以**减少我的编码部分**

# javascript - 我想要javascript中年龄字段的正则表达式

> ID：12527388
> 
> 赞同：1
> 
> 时间：2012-09-21T09:02:21.407
> 
> 标签：javascript

```
 var text6 = document.getElementById("text6").value;
    var regularExpression1 = /^[1-9]?[0-9]{1}$|^100$/;

  if (!text6.match(regularExpression1)){
          alert("Please enter Valid Age");
          return false;
      } 
```

此代码无法正常工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:08:22.443

不要使用正则表达式。使用此功能检查某物是否为数字

```
function isNumber(n) {
  return !isNaN(parseFloat(n)) && isFinite(n);
} 
```

对于你的情况

```
function isIntegerBetween0And100(n) {
  return isNumber(n) && n>0 && n<=100 && n%1===0;
} 
```

快多了 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:05:18.927

您的正则表达式正在使用`|`但没有`()`.

`/(^[1-9]?[0-9]{1}$|^100$)/`会工作，但它可能会更好。这个表达式可以简化为`/^([1-9]?\d|100)$/`，即不需要重复`^`or `$`，`[0-9]`可以是`\d`，而且`{1}`总是不必要的。

我不确定正则表达式是否最适合验证年龄，我不确定您为什么不能将其简化为`/^\d{1,3}$/`. 事物可能超过 100 年，甚至是人。

我还将使用`/regex/.test()`而不是验证字段`string.match(/regex/)`。

如果您有年龄范围限制，那么在“正常代码”而不是正则表达式中进行测试，这样会更容易遵循和修改（如果您的上限发生变化）。

# ios - iOS 6 使用没有 UIWebView 的谷歌地图

> ID：12527398
> 
> 赞同：5
> 
> 时间：2012-09-21T09:03:03.323
> 
> 标签：ios, google-maps, mkmapview, ios6, ios6-maps

在**iOS6**开发中是否有使用**谷歌地图**的原生解决方案？我们不要假设。**`UIWebView`**

 **您认为，开发人员会因为不想使用而使用 Apple 地图`UIWebView`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T21:24:49.610

在 iOS 6.0 下，您将不得不使用 UIWebView（谷歌地图渲染“引擎”不像以前那样存在），这可能会在未来发生变化，但可能性不大，因为谷歌和苹果不再喜欢对方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T04:09:32.840

在 Mapkit 上使用分层地图图块怎么样？[看到这个链接](http://wiki.openstreetmap.org/wiki/OSM_in_MapKit)**

# javascript - 在 Java 脚本中迭代 Java 列表？

> ID：12527399
> 
> 赞同：0
> 
> 时间：2012-09-21T09:03:04.857
> 
> 标签：javascript, list, loops

我在 AJAX 响应中得到一个从 Java 到 javascript 的列表。
所以我必须迭代 Bean 列表并将每个 Bean 显示为表中的记录。
例如;

> [[prop1=value1,prop2=value2],[prop3=value3,prop4=value4],[prop5=value5,prop6=value6]]

迭代列表后，它必须显示如下。

> 值 1 值 2 值3 值 4 值
> 5值
> 6

在 javascript 中迭代列表具有复杂性。
我不知道如何在 javascript 中进行迭代。
任何想法或响应都受到高度赞赏:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:09:02.553

确保数据采用正确的 JSON 格式。

当您可以将其转换为 javascript 对象时。如果您使用的是 JQuery，您可以这样做，

`jQuery.parseJSON( jsonString );`

然后你可以像一个标准的 Javacript 数组一样循环它。

```
for (var i = 0; i < myStringArray.length; i++) {
    alert(myStringArray[i]);
    //Do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:06:37.467

它是一个字符串，因此您必须使用字符串函数对其进行循环。我建议使用正则表达式，您可以使用它根据某些模式提取值。

有关介绍和更多信息，请参见[http://www.regular-expressions.info/ 。](http://www.regular-expressions.info/)

# iphone - iOS 6 模拟器键盘无响应

> ID：12527404
> 
> 赞同：6
> 
> 时间：2012-09-21T09:03:33.647
> 
> 标签：iphone, ios, keyboard, simulator

自从我将 Xcode 4.4 升级到 4.5 后，我遇到了问题。当我启动我的应用程序时，我有一个搜索栏控制器，当我点击它时，键盘会像以前一样出现，但我不能用我的 Mac 键盘或模拟器键盘写东西。

但是，当我使用 ShareKit 按钮时，工具栏中会出现一个视图。如果我在显示此 ShareKit 视图后尝试使用我的搜索栏控制器，它会起作用！

这种方法被称为：

```
- (void)searchDisplayControllerWillBeginSearch:(UISearchDisplayController *)controller
- (void)searchDisplayControllerDidEndSearch:(UISearchDisplayController *)controller 
```

但是这个方法没有被调用，因为键盘没有响应，我不能输入文本。

```
-(BOOL)searchDisplayController:(UISearchDisplayController *)controller
shouldReloadTableForSearchString:(NSString *)searchString 
- (BOOL)searchDisplayController:(UISearchDisplayController *)controller
shouldReloadTableForSearchScope:(NSInteger)searchOption 
```

但是当我使用这种方法时：

```
- (IBAction)share:(id)sender
{
    if (!_url) {
    return;
}

    SHKItem *item = [SHKItem URL:_url title:@"Share this URL"];
    SHKActionSheet *actionSheet = [SHKActionSheet actionSheetForItem:item];

    // ShareKit detects top view controller (the one intended to present ShareKit UI)     automatically,
    // but sometimes it may not find one. To be safe, set it explicitly
    [SHK setRootViewController:self];

    [actionSheet showFromToolbar:self.navigationController.toolbar];
} 
```

之后我可以使用搜索栏键盘。

有人可以帮我吗，因为它在 iOS 6 模拟器之前运行良好......

谢谢 ！

**编辑**：非常感谢您的帮助！

我只是为我的 mainWindow.xib 窗口元素检查“启动时可见”，它就可以工作了！

希望这对其他人有所帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:06:39.970

您需要正确设置委托。在 ViewDidLoad 中写下这一行

```
 SearchbarObj.delegate=self; 
```

或在 xib 中设置与文件所有者的委托连接。

# asp.net - VB.net 将 css 类添加到单击的元素

> ID：12527407
> 
> 赞同：0
> 
> 时间：2012-09-21T09:03:41.733
> 
> 标签：asp.net, vb.net

如何将 CssClass 添加到单击的元素？

```
Protected Sub ShowButton_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles ShowButton.Click

    // Add "active" CssClass to ShowButton 

End Sub 
```

是否可以通过引用元素`this`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:09:01.120

该`sender`参数是指触发该方法的控件（即：事件的*发送者*）。

因此，您可以更改此对象的属性。

Assming`ShowButton`是一种`Button`控制。如果不是，请更改`Button`为任何类型的控件：

```
Protected Sub ShowButton_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles ShowButton.Click

    CType(sender, Button).CssClass = "active" 

End Sub 
```

* * *

如果您的控件只有一个类，您可以通过执行以下操作轻松删除它：

```
CType(sender, Button).CssClass = "" 
```

但是，如果您有多个类，它可能会变得更加复杂。你可以这样做：

```
CType(sender, Button).CssClass = CType(sender, Button).CssClass.Replace("active", "") 
```

这仅`active`在`CssClass`string 属性中替换为空白字符串。除非您也有类似的课程，否则这`reactive`很好用。然后将其更改为`re`.

# c# - 如何在 Mono for Android 中将通用列表从 Java.Lang.Object 转换为 Java.Lang.Object

> ID：12527408
> 
> 赞同：1
> 
> 时间：2012-09-21T09:03:41.393
> 
> 标签：c#, java, xamarin.android

Now I'm facing this problem and don't know about a solution yet. The doc on Xamarin is pretty vague to me on this matter. The fact that Java Generics are implemented as type erase which is quite different from .NET's approach also makes the matter quite complex. Could anyone point me to the right direction? It seems that the generic type parameter should implement IJavaObject, but I did this and it does not work in this case.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:29:13.267

我想我必须自己回答。在联系 Xamarin 之后，如果使用列表来做需要它是 IJavaObject 的事情，您最好使用 JavaList 而不是同样实现 IList 的 List。JavaList 实际上只是 java.util.ArrayList 的一个包装器

# regex - NodeJS + Express：如何以不同的方式使相似的（通过掩码）URL 路由？

> ID：12527411
> 
> 赞同：0
> 
> 时间：2012-09-21T09:03:50.730
> 
> 标签：regex, node.js, url, routing, express

我正在写一个小组博客。我在我的应用程序中遇到了一些非常具体的路由问题。为了清楚起见，我编写了一个简单的演示应用程序：

```
//pathtest.js
//creating §
var express = require('express');
var app = express();
//setting express app
app.configure(function() {
    app.use("/static", express.static(__dirname + '/static'));
    app.use(express.bodyParser());
});
app.listen(3000);

//serving hashtag requests like /music, /photo, /personal, etc. 
app.get('/music', function(req, res) {
    res.send('music');
});
app.get('/photo', function(req, res) {
    res.send('photo');
});
app.get('/personal', function(req, res) {
    res.send('personal');
});
//... and +20+ more various hashtags

//serving SUBCATEGORIES for hashtags
//e.g.: /music/rock, /photo/digital
app.get('/:hashtag/:subcat', function(req, res) {
    res.send('Subcategory ' + req.params.subcat + ' for hashtag ' + req.params.hashtag);
});

//SINCE THIS LINE IT DOESNT WORK 'CAUSE EVERY OF THE FOLLOWING REQUESTS CAN BE SERVED WITH ONE OF 4 UPPER CASES :(

//serving usernames of our service
//We put it apecially AFTER SERVING HASHTAGS as they have similar mask, first should be checked if it's hashtag
//e.g.: /bob_johnson
app.get('/:user', function(req, res) {
    res.send('Welcome, ' + req.params.user + '!');
});

//serving single post service
//e.g.L: /163728
app.get('/:postid', function(req, res) {
    res.send('This is post #' + req.params.postid);
});

//serving post commenting
//e.g.: /35345345/comment
app.get('/:postid/comment', function(req, res) {
    res.send('Edit post #' + req.params.postid);
}); 
```

线后

```
//SINCE THIS LINE IT DOESNT WORK 'CAUSE EVERY OF THE FOLLOWING REQUESTS CAN BE SERVED WITH ONE OF 4 UPPER CASES :( 
```

无法满足任何请求。我想这是因为以下每种情况都可能使用上层路线。事实上，据我所知，Node 没有实际区别，服务 /bob 和 /234234，但这样的 URL 应该单独提供！一 - 用于显示用户资料，二 - 用于显示帖子。并且 /23423423/comment 应该作为帖子 #23423423 的评论，但 /bob/comment 应该被忽略并重定向到 /bob。但是 /music – 不是用户名，它是主题标签，而 /music/comment – 不是对 #music 帖子的评论，而是主题标签音乐的子类别等。此列表可以继续...

**主要问题：**如何以不同的方式使 Node.JS 路由相似（通过掩码）URL？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:14:41.237

您可以在路由中使用正则表达式。

尝试：

```
//serving single post service
//e.g.L: /163728
app.get('/:postid(\d+)', function(req, res) {
    res.send('This is post #' + req.params.postid);
});

//serving usernames of our service
//e.g.: /bob_johnson
app.get('/:user', function(req, res) {
    res.send('Welcome, ' + req.params.user + '!');
}); 
```

或者：

```
//serving single post service
//e.g.L: /163728
app.get(/^\/(\d+)$/i, function(req, res) {
    res.send('This is post #' + req.params[0]);
});

//serving usernames of our service
//e.g.: /bob_johnson
app.get('/:user', function(req, res) {
    res.send('Welcome, ' + req.params.user + '!');
}); 
```

# apache - 使用 .htaccess 删除斜杠

> ID：12527413
> 
> 赞同：0
> 
> 时间：2012-09-21T09:03:53.610
> 
> 标签：apache, .htaccess

我在这里经历了具有解决方案的不同线程，但由于某种原因它对我不起作用，我发现删除尾部斜杠的解决方案是

```
# remove trailing slashes
RewriteRule (.*)/$ $1 [L,R=301] 
```

但它对我不起作用，下面是我的 .htaccess 代码：

```
Options -Multiviews
Options +FollowSymLinks

RewriteEngine on
RewriteBase /

RewriteRule ^([^/]+)/$ index.php?slug=$1
RewriteRule ^([^/]+)/([^/]+)$ index.php?slug=$1&post=$2

<IfModule mod_php5.c>
php_flag magic_quotes_gpc Off
</IfModule> 
```

请让我知道我该如何解决，而不是`http://domain.com/about/`像`http://domain.com/about`

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:09:14.040

您的第一个规则正在使用 traling slash ：

```
RewriteRule ^([^/]+)/$ index.php?slug=$1 
```

尝试在您的 htaccess 中使用它：

```
Options -Multiviews
Options +FollowSymLinks

RewriteEngine on
RewriteBase /

RewriteRule ^(.*)/$ $1 [L,R=301]

RewriteRule ^([^/]+)$ index.php?slug=$1 [L]

RewriteRule ^([^/]+)/([^/]+)$ index.php?slug=$1&post=$2 [L]

<IfModule mod_php5.c>
   php_flag magic_quotes_gpc Off
</IfModule> 
```

# c# - 按第一列分组，按第二列分组，然后在 EnumerableRowCollection 上计算第二列

> ID：12527415
> 
> 赞同：0
> 
> 时间：2012-09-21T09:03:58.117
> 
> 标签：c#, linq, count, group-by

我在 C# .Net 中有一个 EnumerableRowCollection，有两列。我想按第一列分组，然后是第二列，然后计算第二列。

我的 EnumerableRowCollection 基于在 DataGridView 上看起来像这样的 DataTable：

![数据网格视图](../Images/0ce3d44a25a14b0890a0e14d54b91e80.png)

如果这是一个 MySQL 表，我会像这样实现我想要的：

```
SELECT `Product Name`, 
       `Upsell Price`, 
       Count(`Upsell Price`) 
  FROM `tblWhatever` 
  GROUP BY `Product Name`, `Upsell Price`; 
```

我在 LINQ 中需要这个等价物

我以编程方式构造了 DataTable，如下所示：

```
DataTable myDataTable = new DataTabl();
DataColumn myColumn = new DataColumn("My Column");
myDataTable.Columns.Add(myDataTable);
myDataTable.Rows.Add(new object[] { "whatever" });
myDataGridView.DataSource = myDataTable; 
```

我在[这里](https://stackoverflow.com/questions/6061658/group-by-multiple-columns-linq)`Daniel Schaffer`找到了答案，这对我的分组有所帮助，但我被困在计数上，如下所示：

```
var queryableData = myDataTable.AsEnumerable();
var result = from row in queryableData
          group row by new { ProductName = row["Product Name"], 
                             ProductPrice = row["Product Price"] }; 
```

如何编辑我的 LINQ 查询以允许我按第一列分组，然后按第二列分组，然后计算第二列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:32:35.397

试试这个 ：

```
var result = from row in queryableData
          group row by new { ProductName = row["Product Name"], 
                             ProductPrice = row["Product Price"] } into grp
          select new { grp.Key.ProductName , 
                       grp.Key.ProductPrice, 
                       Count = grp.Count()  }; 
```

# java - appengine 1.7.2 升级后出错

> ID：12527425
> 
> 赞同：1
> 
> 时间：2012-09-21T09:04:35.213
> 
> 标签：java, google-app-engine

我将 AE 升级到 1.7.2，现在第一次尝试访问页面时出现以下错误：

我该怎么做才能让 1.7.2 正常工作？？？

```
 Could not initialize class com.google.appengine.tools.appstats.RecordingData

Caused by:

java.lang.NoClassDefFoundError: Could not initialize class   
com.google.appengine.tools.appstats.RecordingData
at com.google.appengine.tools.appstats.Recorder.makeAsyncCall(Recorder.java:300)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)
at com.google.appengine.tools.appstats.AppstatsFilter.call(AppstatsFilter.java:231) 
```

注意：无法初始化的***“RecordingData”类位于******appengine-api-labs.jar***中，只是现在它无法正常工作。我想虽然***无法初始化类***错误意味着它被找到但无法正常工作。***我怀疑NoClassDefFoundError***具有误导性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:04:06.523

I had the same issue recently, I started working on an existing AppEngine project which had been using the 1.7.1 API. I had a new eclipse setup using the newest plugin (1.7.2.1 at the time of writing).

In my case there was an older copy of the labs jar (`appengine-api-labs.jar`) in the build path. Deleting this and replacing it with the version from the AppEngine SDK in current use resolved the issue.

You'll find the labs jar in your eclipse plugins directory under: `appengine-java-sdk-[X.X.X.X]\lib\impl`).

Once you have replaced the jar do a clean build and you should be laughing.

# c# - 字符串替换，删除最快的方式

> ID：12527427
> 
> 赞同：0
> 
> 时间：2012-09-21T09:04:50.423
> 
> 标签：c#, windows-phone-7, html-agility-pack

我正在阅读 html 敏捷将论坛消息打包成一个字符串（约 120 个字）。

我想从这个字符串中删除引号（~30 个字）。引号也可以作为字符串使用，它始终位于消息的开头。

那么您认为实现这一目标的最快方法是什么？（在减法之前，我已经使用正则表达式从特殊字符中清除了字符串，以将例如“替换为”“\”）

据我所知，我有多种选择：string.replace、stringbuilder.replace、regex.replace？计算单词（已知引号的长度）并将它们从原始字符串中删除怎么样？

欢迎任何评论:-)

谢谢，拉尔夫

# c# - 如何有效地检查值是否存在于非常大的数据记录或大列表中

> ID：12527428
> 
> 赞同：0
> 
> 时间：2012-09-21T09:04:52.180
> 
> 标签：c#, java, jakarta-ee, coding-style, contains

嗨，伙计们，我有这个疑问......

如果我有登录网站的用户名和密码详细信息记录，我很可能会从表单中获取用户名和密码，并将使用**contains( )**布尔运算，如果包含则检查密码是否与保存在数据库中的密码相同。

但是对于像 g-mail 和 Facebook 这样的网站，有数百万条记录，并且身份验证非常快......他们是如何做到的......他们为此遵循什么方法

他们如何快速检查大型记录中是否存在值？该过程是否涉及仅添加更多服务器以提高处理速度？

**求答案...**

**

*   **抱歉，我在不了解索引器的情况下发布了这个问题..（刚刚知道通过为一列或多列创建索引，全表扫描被最小化，而使用索引路径，这样成本更低，操作更高效..）**

**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:16:45.837

您只需要一个 SQL 查询：

```
select 1 from user u 
where u.login = :theEnteredLogin 
and u.hashed_password = :theHashedEnteredPassword 
```

（`:xxx`查询的参数在哪里）。

如果您在登录列上有索引，甚至更好，在 [login - hashed_pa​​ssword] 上，查询的执行时间不应超过几毫秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:17:22.517

嗯，他们有很多服务器和高性能数据库。在低级别，散列表可能由散列索引以进行快速查找 - 二进制搜索样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:07:47.910

For medium to large data sets indexing, combined with proper sizing of disk, memory and cpus, is the most adopted approach.
For very large data sets, the database can be [distributed](http://en.wikipedia.org/wiki/Distributed_database) and data [partitioned](http://en.wikipedia.org/wiki/Partition_%28database%29).
For very, very large data sets, aside from the above scenarios, used technologies usually involve using [map reduce](http://en.wikipedia.org/wiki/Map_Reduce) model.

# blackberry - 黑莓超链接对齐

> ID：12527430
> 
> 赞同：0
> 
> 时间：2012-09-21T09:05:01.983
> 
> 标签：blackberry, java-me

我正在开发一个 BlackBerry Native Application BB SDK 5.0。

我想要这种格式的用户界面。

--text-- --Hyperlink-- --text-- 等等。

这意味着我可以在句子之间添加超链接。

所以当我试图做到这一点时，我面临着一些对齐问题。

自动换行，这会在屏幕右侧留下一个大的空白区域。

为了模拟，我附上了我的代码原型。

```
LabelField mylabel1 = new LabelField("Label 11231 23123123",LabelField.FIELD_LEFT);
         LabelField mylabel2 = new LabelField("Label2",LabelField.FIELD_RIGHT);
         LabelField mylabel3 = new LabelField("Label 312312 3123",LabelField.FIELD_RIGHT);
         LabelField mylabel4 = new LabelField("Label 41312 3123",LabelField.FIELD_RIGHT);
         LabelField mylabel5 = new LabelField("Label5",LabelField.FIELD_RIGHT);
         LabelField mylabel6 = new LabelField("Label6",LabelField.FIELD_RIGHT);
         LabelField mylabel7 = new LabelField("Label7",LabelField.FIELD_RIGHT);
         LabelField mylabel8 = new LabelField("Label8",LabelField.FIELD_RIGHT);

         FlowFieldManager hr=new FlowFieldManager(FlowFieldManager.USE_ALL_WIDTH);
         hr.add(mylabel1);
         hr.add(mylabel2);
         hr.add(mylabel3);
         hr.add(mylabel4);
         hr.add(mylabel5);
         hr.add(mylabel6);
         hr.add(mylabel7);
         hr.add(mylabel8);
         add(hr); 
```

# jquery - 比较字符串 jquery 运算符的正确方法 =

> ID：12527433
> 
> 赞同：19
> 
> 时间：2012-09-21T09:05:08.873
> 
> 标签：jquery

这是正确的方法吗？如果 somevar 的值等于字符串，我希望语句运行？

```
if (somevar = '836e3ef9-53d4-414b-a401-6eef16ac01d6'){
 $("#code").text(data.DATA[0].ID);
} 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-21T09:07:09.190

No. = 将 somevar 设置为具有该值。使用 === 来比较返回所需布尔值的值和类型。

永远不要使用或建议 == 而不是 ===。这是灾难的秘诀。例如 0 == "" 是真的，但 "" == '0' 是假的，还有更多。

更多信息也在[这个很好的答案中](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-21T09:07:22.500

不，当您只使用一个“=”时，您正在分配变量。

~~您必须使用“==”：~~您必须使用“===”：

```
if (somevar === '836e3ef9-53d4-414b-a401-6eef16ac01d6'){
 $("#code").text(data.DATA[0].ID);
} 
```

如果需要，您可以使用类似`.toLowerCase()`功能来避免大小写问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T09:09:50.967

首先，您应该使用双“==”而不是“=”来比较两个值。在这种情况下，使用“=”为变量赋值“somevar”

# c# - 文档路径

> ID：12527434
> 
> 赞同：-1
> 
> 时间：2012-09-21T09:05:11.167
> 
> 标签：c#, .net, wpf, clickonce

它是一个 WPF 应用程序。

我正在尝试加载一个 xml 文件，如下所示：

```
XmlDocument doc = new XmlDocument();
doc.Load("../../doc/test.xml"); 
```

但是当我使用发布时`Clickonce`，它将无法找到该文档。

我应该如何获得当前位置，例如`basedir`？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:21:32.827

试用：

```
AppDomain.CurrentDomain.BaseDirectory 
```

这将获得基本目录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:22:11.600

你的意思是`System.Reflection.Assembly.GetExecutingAssembly().Location`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T09:22:34.910

尝试，

```
XmlDocument doc = new XmlDocument();
doc.Load(Path.GetDirectoryName(System.Reflection.Assembly.GetEntryAssembly().Location) + @"\test.xml"); 
```

Path.GetDirectoryName(System.Reflection.Assembly.GetEntryAssembly().Location) 这个可执行文件位置的返回路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T09:22:52.207

如果 XML 文件是某种形式的用户可配置输入，则该文件应位于 Windows 通用应用程序数据文件夹中（请参阅 Environment.SpecialFolder.CommonApplicationData）。因此，路径不是相对的，而是从部署代码“知道”的已知基础构造的路径。

我喜欢在 Environment.SpecialFolder.CommonApplicationData 中为我的公司和应用程序创建一个文件夹，例如：\\

也许我们需要更多细节。我希望这有帮助。

# delphi - 如何在delphi中只打开单个表单

> ID：12527437
> 
> 赞同：0
> 
> 时间：2012-09-21T09:05:16.320
> 
> 标签：delphi

我在delphi中有VCL应用程序。一种主要形式和许多子形式。如何确保一次只打开一个表单。换句话说，如果打开一个表单，它将关闭以前的表单。或者，如果用户尝试打开与以前相同的表单，它将什么也不做。在我的主表单中打开表单的代码：

```
procedure TFMainForm.OpenForm(const classname: string);
var
  c: TPersistentClass;
  f: TForm;
begin
    c := GetClass(classname);
    if c <> nil then
    begin
      f := TForm(TControlClass(c).Create(nil));
      f.Parent := Self;
      f.Show;
    end;
end; 
```

子窗体在关闭事件时自我释放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:10:25.233

如果您在主窗体中将“f”设为变量，而不是局部变量，您将获得对当前打开窗体的引用。您可以使用该引用来关闭该表单或检查其类。

两个注意事项：

*   如果您关闭表单而不打开另一个表单，则必须重置变量。
*   我想知道你为什么要这样做。让您的用户决定是否要打开多个表单不是更友好吗？

作为替代方案，您可以将子窗体设为模态（使用 ShowModal 而不是 Show），但这会在子窗体打开时阻止对主窗体的访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T23:55:55.960

也许不是相同的场景，但您可以有一个*SubscriptionList*，其中每个创建的表单在创建时订阅并在销毁时取消订阅。通过这种方式，您可以检查您的窗口是否在列表中，如果它不存在则创建，如果已经存在则将焦点移至表单。

我们使用这种方法打开具有不同数据的相同表单（例如发票）并跟踪它们以不打开相同的发票两次。

例如，如果您正在做一个[仪表板](http://en.wikipedia.org/wiki/Dashboard_%28business%29)并为每条信息使用一个表单，您可以使用订阅列表来跟踪它们，而不是为每个信息设置一个变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T09:17:20.333

拦截“新表单正在激活”事件 - [http://docwiki.embarcadero.com/Libraries/en/Vcl.Forms.TScreen_Events](http://docwiki.embarcadero.com/Libraries/en/Vcl.Forms.TScreen_Events)

枚举表单并确保所有其他表单 .Visible 为假 - [http://docwiki.embarcadero.com/Libraries/en/Vcl.Forms.TScreen.CustomForms](http://docwiki.embarcadero.com/Libraries/en/Vcl.Forms.TScreen.CustomForms)

* * *

*或者，如果用户尝试打开与以前相同的表单，它将什么也不做*

你什么意思 ？如果其他表单被隐藏并且他不能再看到按钮/菜单来打开其他表单，用户如何做到这一点？

也许您只需要 TForm.ShowModal ？

# c# - 警告：字段永远不会分配给，并且始终具有其默认值 null

> ID：12527438
> 
> 赞同：5
> 
> 时间：2012-09-21T09:05:17.257
> 
> 标签：c#, compiler-construction, compiler-warnings

我收到以下消息：

> 警告：字段永远不会分配给，并且始终具有其默认值 null。

我的代码看起来像（它被简化了，所以没用）：

```
public class MyEntity
{
    // ...
    public string MyProp { get; set; }
}

public class MyClass
{
    string dbMyProp;

    public string MyProp { get { return dbMyProp.Replace("a", "b"); } }

    public static readonly Expression<Func<MyEntity, MyClass>> FromMyEntity = e => new MyClass
    {
        dbMyProp = e.MyProp // ...
    };
} 
```

我认为这个消息是不正确的。

它是 C# 编译器中的错误还是我错过了什么？

*更新*该字段是`dbMyProp`。它已简化，但仍会产生此警告。

*UPDATE2*以下代码不会产生这样的警告：

```
public class MyClass2
{
    string dbMyProp;

    public string MyProp { get { return dbMyProp.Replace("a", "b"); } }

    public static MyClass2 FromMyEntity(MyEntity e)
    {
        return new MyClass2 
        {
            dbMyProp = e.MyProp // ...
        };
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T09:11:22.197

一个`Expression` **不是代码**。这是*意图*；因此，在*编译器*级别，确实可以说没有代码实际上曾经分配过该字段。有一个`MemberAssignment`(from `Expression.Bind`)，但那是无关的。

如果表达式被编译，那只会通过实际的字段分配。这将是运行时的反射，编译器不会尝试检测。

这是编译时的*实际情况：*

```
static MyClass()
{
    ParameterExpression CS$0$0000;
    FromMyEntity = Expression.Lambda<Func<MyEntity, MyClass>>(
      Expression.MemberInit(
        Expression.New(
          (ConstructorInfo)methodof(MyClass..ctor),
          new Expression[0]
        ),
        new MemberBinding[] {
          Expression.Bind(
            fieldof(MyClass.dbMyProp),
            Expression.Property(
              CS$0$0000 = Expression.Parameter(typeof(MyEntity), "e"),
              (MethodInfo)methodof(MyEntity.get_MyProp)
            )
          )
        }
      ),
      new ParameterExpression[] {
        CS$0$0000
      }
    );
} 
```

请注意**没有**对字段进行任何分配；只需使用虚构的`fieldof`运算符（意​​思是：它直接嵌入字段句柄 - 它不使用`string`名称的 a ）。

按照同样的逻辑，如果我们将其设为委托，警告*就会消失：*

```
public static readonly Func<MyEntity, MyClass> FromMyEntity = e => new MyClass
{
    dbMyProp = e.MyProp // ...
}; 
```

现在这*是*代码；它不仅仅是一个显示“***如果***我被编译，这就是我*会*做的事情”的对象模型。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:10:39.377

是的，这似乎是编译器的一个缺点。它显然无法看穿（不包括）表达式。
以下按预期打印“bbc”：

```
var exp = MyClass.FromMyEntity.Compile();
var mc = exp(new MyEntity { MyProp = "abc"});
Console.WriteLine(mc.MyProp); 
```

我尝试了一些技巧，例如 MyClass 上的私有构造函数，但警告仍然存在。

似乎编译器应用了更保守的算法，只检查是否有任何（正常）成员分配给`dbMyProp`.

* * *

~~您会因为名称中有 2 个不同的元素而混淆事物，`dbMyProp`但`MyEntity.MyProp`这里从未写过。~~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T09:09:03.053

这不是编译器中的错误。

请。[看看马克·格雷维尔](https://stackoverflow.com/users/23354/marc-gravell)的答案

下面的解释是不正确的。

* * *

显示警告是因为在以下场景`dbMyProp`中将使用未分配的值。1\. MyClass 被实例化。2.使用实例`MyProp`属性被调用。（这将导致`NullReferenceException`）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T09:09:57.647

> 还是我错过了什么？

你错过了一些东西。在 lambda 表达式中，您创建了一个**新**实例`MyClass`并分配了它的`dbMyProp`字段。但是您从未在实例方法中分配**当前**`dbMyProp`实例的字段。

 **看看这个例子：

```
var instance = new MyClass();
var myProp = instance.MyProp; // BOOM - you never assigned a value to the dbMyProp field 
```***

# maven - Tycho 构建的更新站点在重新构建后仍然包含错误的依赖关系

> ID：12527440
> 
> 赞同：2
> 
> 时间：2012-09-21T09:05:18.840
> 
> 标签：maven, xtext, tycho

我已经用 Tycho 构建了一个 Eclipse 更新站点，但是当尝试从它安装一个特性到目标 IDE 时失败了。

更新站点构建良好；我可以从目标 Eclipse 安装中看到它并选择要安装的特性。但是，依赖项检查在安装开始时失败，因为它找不到声明的依赖项（org.eclipselabs.xtext.utils.unittesting）。这不应该是一个依赖项：它被错误地包含在我的一个 Eclipse 插件项目的 MANIFEST.MF 中。

我从清单中删除了依赖项并`mvn clean install`再次运行。构建报告成功，但是当我尝试使用新构建的更新站点时，它仍然抱怨对`org.eclipselabs.xtext.utils.unittesting`(a) 的依赖存在并且 (b) 无法满足。

所以问题是：**我还需要做什么才能从生成的更新站点中删除依赖项？**

感谢您的任何指示。

PS：我知道我可以在目标 eclipse 安装中添加 oexuunittesting 的站点，这样它就可以满足依赖关系。但是我不想那样做；该功能不需要它来工作，我不希望其他用户必须添加不必要的依赖项。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T12:28:03.537

以下是您的方案中可能涉及的缓存位置列表，以及如何清除它们

*   *目标文件夹*：如果目标文件夹包含以前构建的结果，Maven 构建可能会使用此数据来加速构建。Tycho 没有使用此功能，并且 AFAIK 它不应该从目标文件夹中获取任何现有内容。

    可以肯定的是，请始终在通话中包含`clean`目标。`mvn`

*   *本地 Maven 存储库*：为了支持反应器部件的构建，Tycho 将已在本地构建的工件添加`mvn clean install`到目标平台。如果您不了解此功能，可能会产生各种奇怪的效果。

    `install`为避免这种情况，除非必须，否则不要构建。改为使用`mvn clean verify`。另外：删除文件`~/.m2/repository/.meta/p2-local-metadata.properties`会重置 Tycho 认为是“本地安装”的内容。

    从 Tycho 0.16.0 开始，您还可以通过命令行开关为一个构建禁用此行为，`-Dtycho.localArtifacts=ignore`或者通过在 settings.xml 中设置相同的属性为所有构建禁用此行为。

*   *p2*：Eclipse 中的 p2 更新管理器缓存自 Eclipse 启动以来它使用的 p2 存储库。

    要强制 p2 重新加载存储库，请转到*Preferences > Install/Update > Available Software Sites*，选择一个存储库并点击*Reload*。如果您重新启动 Eclipse，也将重新加载存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-15T09:33:25.213

也许我来晚了，但我仍然想分享我的经验。

我正在使用[p2-maven-plugin](https://github.com/reficio/p2-maven-plugin)将普通的 jar 文件转换为 osgi 包。它将转换后的 jar 缓存在

```
~/.m2/repository/p2/osgi/bundle 
```

除非我更改 jar 的版本，否则 p2 插件总是从该位置加载旧包。

删除该文件夹中的旧包并重新构建项目再次解决我的问题。

# android - 切换另一个打开的应用程序android

> ID：12527445
> 
> 赞同：-1
> 
> 时间：2012-09-21T09:05:29.980
> 
> 标签：android

我认为我们有三个应用程序，它们都是开放的，我们知道进程名称。如何从一个应用程序切换到另一个应用程序，还要记住另一个应用程序已经打开了一个意图，我不想打开应用程序启动器去另一个应用程序，只是在前面切换或制作另一个应用程序。

我想在前面制作另一个应用程序，例如，如果 Internet 是后台，我在前面制作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:16:43.230

使您的应用程序的主要活动成为单进程，如果应用程序已经在运行，它将被带到前面。您还可以实现自定义 BroadCastReceiver 以使用其包名称启动应用程序。

# html - 是什么 标记为？

> ID：12527446
> 
> 赞同：45
> 
> 时间：2012-09-21T09:05:41.407
> 
> 标签：html, list, tags

使用 <dl>、<dt> 和 <dd> 标签而不是嵌套的 CSS 样式的 <ul> 和 <ol> 标签有什么合乎逻辑的理由吗？或者它们只是一组等待被弃用的过时标签？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-21T09:11:40.460

引用[W3C 规范](http://www.w3.org/TR/html5/the-dl-element.html#the-dl-element)：

> dl 元素表示由零个或多个名称-值组组成的关联列表（描述列表）。每个组必须由一个或多个名称（dt 元素）后跟一个或多个值（dd 元素）组成。在单个 dl 元素中，每个名称不应有多个 dt 元素。

`<dl>`所以,`<dt>`和标签的主要原因`<dd>`是为了保留那些名称-值对的语义连接，如果你只使用嵌套列表，这会丢失。

如果您使用嵌套列表，这可能出于各种原因（目前，例如，许多菜单被构建为嵌套列表），并且爬虫或任何其他尊重语义注释的系统将无法区分。

但是，如果您使用上述标签，系统可以看到连接并采取相应措施。因此，未来的用途可能是提取更大文档中的所有术语定义以创建某种词汇表。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-21T09:09:51.757

深度学习

定义列表是 DT 和 DD 元素的容器元素。当您想在文档中包含一个术语的定义时，应该使用 DL 元素，它通常在词汇表中用于定义许多术语，当作者希望以更详细的方式解释一个术语时，它也用于“普通”文档中细节（就像这个定义）。

DT

当前在定义列表中定义的术语。此元素包含内联数据。

DD

定义描述元素包含描述定义术语的数据。该数据可以是内联的，也可以是块级的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T09:10:02.493

来自[W3C 文档](http://www.w3.org/TR/html401/struct/lists.html#h-10.3)：

> 定义列表与其他类型的列表仅略有不同，列表项由两部分组成：术语和描述。该术语由 DT 元素给出，仅限于内联内容。描述是用包含块级内容的 DD 元素给出的。

W3C 页面上有几个标记示例。

# iphone - ifdef 语法不起作用

> ID：12527447
> 
> 赞同：1
> 
> 时间：2012-09-21T09:05:43.340
> 
> 标签：iphone, objective-c, ios, macros, conditional-compilation

我想根据不同的设备高度动态定义一个常数。我尝试使用此代码，但它不起作用：

```
#define isPhone568 ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone && [UIScreen mainScreen].bounds.size.height == 568)

#ifdef isPhone568
    #define kColumnHeightPortrait568 548
#else
    #define kColumnHeightPortrait568 (IS_IPAD ? 984 : 460)
#endif 
```

即使我使用的是 3.5" 模拟器，我也会得到 548。这有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:10:55.573

您不能在宏定义中运行代码，这是一个在编译时发生的简单文本替换过程。因此，您当时不知道设备特征是什么，因为您不在*目标*设备上。

如果你想使用类似的东西`[UIDevice currentDevice] userInterfaceIdiom`，你必须在*运行时评估它，*而不是在编译时宏中，比如：

```
int kColumnHeightPortrait568 = 548;
if (([[UIDevice currentDevice] userInterfaceIdiom] != UIUserInterfaceIdiomPhone)
   || ([UIScreen mainScreen].bounds.size.height != 568))
{
    kColumnHeightPortrait568 = (IS_IPAD ? 984 : 460);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:40:39.167

`#ifdef`用于检查是否定义了宏。正如您`isPhone568`在第一行中定义的那样，`#ifdef isPhone568`将是正确的。

如果要测试表达式的值而不是宏的存在，则应`#if`改为使用。但`#if`只能测试简单的算术表达式，正如**paxdiablo**所说，“你不能在宏定义中运行代码”。

# iphone - 下载文件并保存到内存中

> ID：12527448
> 
> 赞同：1
> 
> 时间：2012-09-21T09:05:43.677
> 
> 标签：iphone, objective-c, ios, download

在文本框中，我输入一个 url 并将其下载到特定路径并存储该下载文件，我必须在之前提供该文件的特定位置和文件名。这是有效的，但是当我下载任何其他格式（例如 .mp4， .avi) 它将存储为 .mp3

```
NSString * URL =Textbox.text;
dest_path=[NSHomeDirectory() stringByAppending:@"/Documents/file.mp3"];
//to download url and save to specific path
download=[Downloader Download:URL withTargetPath:dest_path withDelagate:self]; 
```

我希望每当我下载它应该从那里保存格式。如果我下载 .mp4 文件。它应该用 .mp4 格式保存。请建议一些代码..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T06:39:19.310

```
 NSURL *url=[NSURL URLWithString:@"/Documents/file.mp3"];

    NSURLRequest *req=[NSURLRequest requestWithURL:url cachePolicy:NSURLCacheStorageNotAllowed timeoutInterval:120];

    NSURLConnection *con=[[NSURLConnection alloc] initWithRequest:req delegate:self startImmediately:YES];

    if(con){
        receivedData = [NSMutableData data] ;
    } else {

    } 
```

利用 ：

```
NSURLConnectionDataDelegate,NSURLConnectionDelegate 
```

方法

喜欢 ：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {}
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)d{}
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {}
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {}
- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {} 
```

# string - .htaccess - 删除/编辑/删除查询字符串参数/标志

> ID：12527454
> 
> 赞同：2
> 
> 时间：2012-09-21T09:06:11.947
> 
> 标签：string, .htaccess, edit

我试图把这个：

> /index.php?param1=1¶m2=1¶m3=1

进入这个：

> /index.php?param1=1¶m3=1

我原以为这会起作用：

```
RewriteCond %{QUERY_STRING} param2 [NC]
RewriteRule ^index.php?(.*)param2=([0-9]+)(.*)$ index\.php\?$1&$3 [R=301,QSA,L] 
```

...但是它和其他变体都在做草皮:(

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:15:45.473

尝试这个 ：

```
RewriteCond %{QUERY_STRING} ^(.*&)?param2=([^&]+)&?(.*)?$
RewriteRule ^index\.php$ index.php?%1%3 [L,R=301] 
```

# mobile-safari - 如何在 Windows 或 Linux 上访问 ios 6 mobile safari web inspector？

> ID：12527456
> 
> 赞同：6
> 
> 时间：2012-09-21T09:06:15.183
> 
> 标签：mobile-safari, ios6, web-inspector

是否可以从 Windows 或 Linux 平台访问新的 ios 6 移动 safari Web Inspector？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T00:49:07.187

抱歉，这是不可能的。此功能仅在可以调试 iOS 6 的 Safari 的“Safari v6”中可用，而“Safari v6”仅在 OS X Lion 及更高版本上可用（至少目前如此！），因此在 Windows 或 Linux 上无法使用这个答案的时间。

# spring-mvc - Spring MVC 禁用资源 .js 文件的缓存

> ID：12527460
> 
> 赞同：5
> 
> 时间：2012-09-21T09:06:35.447
> 
> 标签：spring-mvc

我们在 Web 应用程序中有一堆 .js 文件，它们不位于单个目录下。UI 是单独开发的，重新设计它以将所有 *.js 文件放在一个地方非常耗时。

问题是这些文件被浏览器大量缓存，这会在每次应用程序更新时产生很多问题。我们决定关闭这些文件的缓存。

因此，*.js 文件被包含在 servlet 映射中：

```
<servlet-mapping>
    <servlet-name>app</servlet-name>
    <url-pattern>*.js</url-pattern>
</servlet-mapping> 
```

我尝试过使用 mvc:resources 但它不能像这样处理 url 的掩码：

```
<mvc:resources mapping="*.js" location="*.js" cache-period="0"/> 
```

这不起作用，当我尝试访问 js 文件时，我得到了 404 响应。

我也试过 mvc:interceptor:

```
 <mvc:interceptor>
        <mvc:mapping path="*.js"/>
        <bean id="webJSContentInterceptor"
              class="org.springframework.web.servlet.mvc.WebContentInterceptor">
            <property name="cacheSeconds" value="0"/>
            <property name="useExpiresHeader" value="true"/>
            <property name="useCacheControlHeader" value="true"/>
            <property name="useCacheControlNoStore" value="true"/>
        </bean>
    </mvc:interceptor> 
```

这也会导致 404 错误。

这种事情可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-05-09T11:36:43.927

我意识到这个答案来得太晚了，但这里供将来参考。

## 使用 ResourceHttpRequestHandlers (Spring 3.2+) 提供静态资源

首先，你在正确的轨道上`<mvc:resources>`，你的路径模式声明中只有一个错字：

*   必须是您的资源所在的`location`文件夹位置（这可以在您的文件系统上、在您的 webapp 资源中、在类路径上、在 webJAR 中......）
*   模式必须考虑到您的项目布局

假设您有以下结构：

```
src/main/webapp/static/
  |- js/
  |- js/lib/jquery.js
  |- js/main.js
  |- css/style.css 
```

您可以像这样提供所有静态资源：

```
<mvc:resources mapping="/**" location="/static/"/> 
```

注意：`cache-period`其他属性应该可以正常工作。

## 资源处理功能（Spring 4.1+）

从 Spring 4.1 开始，有新的、更灵活的方法来处理它。

例如，您可以使用 JS 和 CSS 文件实现缓存清除，如下所示：

```
<mvc:resources mapping="/**" location="/static/"/>
  <mvc:resource-chain resource-cache="true">
    <mvc:resolvers>
      <mvc:version-resolver>
        <mvc:content-version-strategy patterns="/**"/>
      </mvc:version-resolver>
    </mvc:resolvers>
  </mvc:resource-chain>
</mvc:resources> 
```

当然，您可以使用 javaconfig 实现相同的目标（更优雅）：

```
@Override
public void addResourceHandlers(ResourceHandlerRegistry registry) {

  VersionResourceResolver versionResolver = new VersionResourceResolver()
    .addContentVersionStrategy("/**");

  registry.addResourceHandler("/**")
    .addResourceLocations(/static/)
    .resourceChain(true).addResolver(versionResolver);
} 
```

有关更多信息，请参阅此[博客文章](https://spring.io/blog/2014/07/24/spring-framework-4-1-handling-static-web-resources)和[此示例应用程序](https://github.com/bclozel/spring-resource-handling)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T17:55:42.550

这是不可能的。但是有几种选择：

*   实现一个自定义过滤器，将其映射到 *.js 掩码并从那里设置所需的标题。
*   在 JavaScript 中处理缓存破坏。我们这样做了，并在我们的 JS 文件的路径中添加了一个版本号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:39:35.507

据我说，问题是你的 JS 文件没有被加载。在您尝试过的第二种方法中，您没有正确指定**路径**属性的值。映射是正确的，但是您需要从根目录中指定 JS 文件所在的确切位置来代替路径。

尝试这样做。希望这对您有所帮助。

# android - 简单的 Admob 问题

> ID：12527464
> 
> 赞同：3
> 
> 时间：2012-09-21T09:06:42.507
> 
> 标签：android, admob

我一直是这个很棒的网站的跟踪者，它帮助了我很多次。我即将发布这款基于 OpenGL ES 的 2d 安卓游戏，我遇到了与 admob 相关的问题：

1.  我在游戏的所有不同屏幕（主菜单、游戏内、帮助屏幕）上使用相同的广告单元。这样做可以吗？

2.  游戏内广告单元仅在用户暂停屏幕时才显示广告...它将始终在后台运行，并且仅在用户暂停屏幕时可见和可点击...谷歌会认为这是一种获取印象的骗局方式吗？

3.  admob 是否也按展示次数付费？

4.  我应该为 Google PlayStore 支付的初始金额是多少？（我尝试在谷歌搜索我保证）

如果您碰巧想到一个，请提及对 admob 采取的预防措施...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:40:35.027

作为 admob 的前用户：

1.  是的。

2.  没有。您甚至可以在游戏运行时展示广告。但是您始终可以阅读他们的诚信政策。他们不时改变它。

3.  据我所知，只有视频广告会为展示付费。我不确定 admob 是否允许支持视频广告。图片和 Javascript 横幅广告不按展示次数付费。

4.  这是答案： http: [//support.google.com/googleplay/android-developer/bin/answer.py ?hl=en&answer=113468](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=113468)

正如我所说，作为预防措施，请阅读他们的开发人员诚信政策。不管有人在这个论坛上告诉你什么关于该主题的内容，谷歌都可以在第二天更新他们的政策，从而使任何给出的建议都过时了。另外，完整性政策大约有一页长。

# javascript - 在不同宽度的元素之间插入分隔符

> ID：12527470
> 
> 赞同：4
> 
> 时间：2012-09-21T09:06:59.730
> 
> 标签：javascript, carousel

我正在尝试开发一个 JavaScript 轮播，它具有以下功能：

*   圆
*   轮播移动从鼠标悬停在上一个/下一个按钮上开始
*   在轮播的最后一个元素和第一个元素之间设置视觉分隔符的可用性

我发现了这个[http://www.enova-tech.net/eng/lab/jmycarousel](http://www.enova-tech.net/eng/lab/jmycarousel)，它非常适合我。但是我不能在轮播的最后一个元素和第一个元素之间放置分隔符，因为它的宽度小于普通元素的宽度。

例如

```
<li width=200></li>
<li width=200></li>
<li width=200></li>
<li width=50>separator</li> 
```

这个轮播相信每个元素都有相同的宽度（我猜不仅这个轮播，还有很多其他的），所以我无法让我的轮播工作。如何在第一个元素和最后一个元素之间插入分隔符？

我尝试使用 jCarousel，但它也有类似的问题。

# android - android 单声道异步加载图像的问题

> ID：12527473
> 
> 赞同：1
> 
> 时间：2012-09-21T09:07:05.667
> 
> 标签：android, asynchronous, mono, xamarin.android

我开始为 Android 开发一个新的单声道应用程序，它需要我从远程服务器加载大量图像。为了做到这一点，我编写了一个可以插入布局的视图，并在后台加载图像。在我将它用于 ListView 的适配器之前，这非常有效，这是我主要计划使用它的地方。该应用程序加载一些图像而不是其他图像，并将它们加载到错误的位置。只要您滚动列表，它就会开始正确加载图像，但显示的第一张图像不完整且错误。我尝试了不同的策略来运行后台进程（异步任务、线程池等）并且都有同样的问题。这是代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using Android.App;
using Android.Content;
using Android.OS;
using Android.Runtime;
using Android.Views;
using Android.Widget;
using Android.Util;
using System.Net;
using Android.Graphics;
using ListViewExample;
using System.Threading;

namespace klvpn.components
{
    public class WebImageView : RelativeLayout
    {
        ImageView theImage;
        TextView waitingTxt;
        Activity context;
        Uri imageUri;
        WebClient wc;

        public WebImageView(Context context, IAttributeSet attrs) :
            base(context, attrs)
        {
            this.context = context as Activity;

            this.SetBackgroundColor(Android.Graphics.Color.Black);
            this.SetGravity(GravityFlags.Center);
            waitingTxt = new TextView(context);
            waitingTxt.SetText("...", TextView.BufferType.Normal);
            AddView(waitingTxt, new LayoutParams(LayoutParams.WrapContent, LayoutParams.WrapContent));

        }

        public void SetImageSize(int width, int height)
        {
            LayoutParameters.Width = width;
            LayoutParameters.Height = height;
        }

        public void SetImageUriStr(string uriStr)
        {
            imageUri = new Uri(uriStr);

            if (theImage == null)
            {
                theImage = new ImageView(context);
                AddView(theImage, 0);
            }
            wc = new WebClient();
            wc.DownloadDataCompleted += new DownloadDataCompletedEventHandler(wc_DownloadDataCompleted);
            wc.DownloadDataAsync(imageUri);
        }

        void wc_DownloadDataCompleted(object sender, DownloadDataCompletedEventArgs e)
        {
            if (e.Error != null)
            {
                context.RunOnUiThread(() =>
                {               
                    theImage.SetImageResource(Resource.Drawable.noImage_x);                  
                    string error = "URI:" + imageUri.OriginalString + "\n" + e.Error.Message;
                    Log.Error("WebImageView", error);
                });
            }
            else
            {
                Bitmap bmp = BitmapFactory.DecodeByteArray(e.Result, 0, e.Result.Length);
                context.RunOnUiThread(() =>
                {
                    theImage.SetImageBitmap(bmp);
                });
            }
            wc = null;
        }

        protected override void OnDetachedFromWindow()
        {
            base.OnDetachedFromWindow();
            if (wc != null)
            {
                wc.CancelAsync();
            }

        }

    }
} 
```

适配器的 GetView 方法如下所示：

```
public override View GetView(int position, View convertView, ViewGroup parent)
        {
            var item = this.Episodes[position];
            var view = convertView;
            if (convertView == null || !(convertView is LinearLayout))
            {
                view = context.LayoutInflater.Inflate(Resource.Layout.EpisodeItem, parent, false);
            }

            var imageItem = view.FindViewById<WebImageView>(Resource.Id.imageItem);
            var textTop = view.FindViewById<TextView>(Resource.Id.textTop);
            var textBottom = view.FindViewById<TextView>(Resource.Id.textBottom);

            //imageItem.SetImageResource(item.Image);
            imageItem.SetImageSize(100, 36);
            imageItem.SetImageUriStr(item.ImageUri);
            textTop.SetText(item.Name, TextView.BufferType.Normal);
            textBottom.SetText(item.Description, TextView.BufferType.Normal);

            return view;

        } 
```

任何想法如何解决这个问题？我在 MonoTouch 中使用了这种策略，并且非常好，因为图像下载是封装的，用户不必等到所有内容加载后才能看到某些内容。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:11:21.597

我建议使用该库：[http](http://code.google.com/p/android-query/) ://code.google.com/p/android-query/ 它非常简单，集成速度很快。

# windows - 如何在 Windows 7 中替换 shimgvw.dll

> ID：12527476
> 
> 赞同：-1
> 
> 时间：2012-09-21T09:07:10.033
> 
> 标签：windows, security, dll, command-line

在 Windows XP 上，我很容易将损坏的 shimgvw.dll 替换为原来的，这样我就可以恢复在缩略图视图中显示图片并使用 Windows 传真查看器打开它的问题。

但我无法在 Windows 7 上替换 shimgvw.dll。我尝试**使用命令提示符从安全模式**替换，但我不能。

是否有任何命令行（如 LINUX 的 sudo）来破坏安全性，以便**Windows 7**允许我们替换 system32 文件夹中的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:56:24.820

你是程序员吗？

[MoveFileEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365240%28v=vs.85%29.aspx)

或者你可以使用

> HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\SessionManager\FileRenameOperations

注册表项。

或者您可以使用 Sysinternals [PendMoves](http://technet.microsoft.com/en-us/sysinternals/bb897556)

# android - 带有 cdata 的 Android xml 不返回任何内容

> ID：12527477
> 
> 赞同：0
> 
> 时间：2012-09-21T09:07:16.740
> 
> 标签：android, xml, cdata

似乎很奇怪，我无法获取节点的值，因为它在 CDATA 中……这是我读过的带有 setCoalescing 的解析器：

```
public class XMLParser {
public String getXmlFromUrl(String url) {
    String xml = null;
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
}
public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    dbf.setCoalescing(true);
    try {
        DocumentBuilder db = dbf.newDocumentBuilder();
        InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 
    } catch (ParserConfigurationException e) {
        Log.e("Error: ", e.getMessage());
        return null;
    } catch (SAXException e) {
        Log.e("Error: ", e.getMessage());
        return null;
    } catch (IOException e) {
        Log.e("Error: ", e.getMessage());
        return null;
    }
    // return DOM
    return doc;
}
public String getValue(Element item, String str) {
    NodeList n = item.getElementsByTagName(str);
    return this.getElementValue(n.item(0));
}
public final String getElementValue( Node elem ) {
     Node child;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                 if( child.getNodeType() == Node.TEXT_NODE  ){
                     return child.getNodeValue();
                 }
             }
         }
     }
     return "";
} 
} 
```

和我的代码来获取值：

```
 // XML
    final String URL = "http://example.com/xml.xml";
    // XML node keys
    final String parente = "dict";
    final String chiave = "key";
    final String stringa = "string";
    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL);
    Document doc = parser.getDomElement(xml);
    NodeList nl = doc.getElementsByTagName(parente);
    for (int i = 0; i < nl.getLength(); i++) {
        Element e = (Element) nl.item(i);
        String chiave_trovata = parser.getValue(e, chiave);
        String stringa_trovata = parser.getValue(e, stringa);
        System.out.println("a"+stringa_trovata);
    } 
```

但我的 stringa_trovata 是空的，因为就像

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:39:13.067

解决只需评论 if(child.getNodeType() == Node.TEXT_NODE){

# php - Symonfy2 验证：在 yml 中定义约束，并验证一个数组

> ID：12527481
> 
> 赞同：7
> 
> 时间：2012-09-21T09:07:32.703
> 
> 标签：php, forms, validation, symfony

我要做的就是：

1.  在 yml 中定义约束

2.  使用它来验证数组

说，一个产品数组：

```
$product['name'] = 'A book';
$product['date'] = '2012-09';
$product['price'] = '21.5'; 
```

怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T13:27:07.257

首先，您需要知道 Symfony2 验证器还没有准备好轻易做到这一点。我花了一些时间和一些 Symfony2 源代码阅读来为您的案例找到一个可行的解决方案，而我的解决方案并不是那么自然。

我创建了一个包含验证器、数组和 yaml 配置文件的类，这样你就可以做你期望的事情。此类`YamlFileLoader`从 Symfony 扩展以访问受保护的`parseNodes`方法：这并不漂亮，但这是我发现将自定义 Yaml 配置文件转换为`Constraint`对象数组的唯一方法。

所以我们在这里。我给你我的代码，你需要根据自己的上下文替换一些命名空间。

首先，为我们的演示创建一个控制器：

```
 public function indexAction()
    {

        // We create a sample validation file for the demo
        $demo = <<< EOT
name:
    - NotBlank: ~
    - MinLength: { limit: 3 }
    - MaxLength: { limit: 10 }
date:
    - NotBlank: ~
    - Regex: "/^[0-9]{4}\-[0-9]{2}$/"
price:
    - Min: 0

EOT;
        file_put_contents("/tmp/test.yml", $demo);

        // We create your array to validate
        $product = array ();
        $product['name'] = 'A book';
        $product['date'] = '2012-09';
        $product['price'] = '21.5';

        $validator = $this->get('validator');
        $service = new \Fuz\TestsBundle\Services\ArrayValidator($validator, $product, "/tmp/test.yml");
        $errors = $service->validate();

        echo '<pre>';
        var_dump($errors);
        die();

        return $this->render('FuzTestsBundle:Default:index.html.twig');
    } 
```

然后创建一个名为 ArrayValidator.php 的类。再次，照顾命名空间。

```
<?php

namespace Fuz\TestsBundle\Services;

use Symfony\Component\Validator\ValidatorInterface;
use Symfony\Component\Yaml\Parser;
use Symfony\Component\Validator\Mapping\Loader\YamlFileLoader;

/**
 * This class inherits from YamlFileLoader because we need to call the
 * parseNodes() protected method.
 */
class ArrayValidator extends YamlFileLoader
{

    /* the @validator service */
    private $validator;

    /* The array to check */
    private $array;

    /* The file that contains your validation rules */
    private $validationFile;

    public function __construct(ValidatorInterface $validator, array $array = array(), $validationFile)
    {
        $this->validator = $validator;
        $this->array = $array;
        $this->validationFile = $validationFile;
    }

    /* The method that does what you want */
    public function validate()
    {
        $yaml = file_get_contents($this->validationFile);

        // We parse the yaml validation file
        $parser = new Parser();
        $parsedYaml = $parser->parse($yaml);

        // We transform this validation array to a Constraint array
        $arrayConstraints = $this->parseNodes($parsedYaml);

        // For each elements of the array, we execute the validation
        $errors = array();
        foreach ($this->array as $key => $value)
        {
            $errors[$key] = array();

            // If the array key (eg: price) has validation rules, we check the value
            if (isset($arrayConstraints[$key]))
            {
                foreach ($arrayConstraints[$key] as $constraint)
                {
                    // If there is constraint violations, we list messages
                    $violationList = $this->validator->validateValue($value, $constraint);
                    if (count($violationList) > 0)
                    {
                        foreach ($violationList as $violation)
                        {
                            $errors[$key][] = $violation->getMessage();
                        }
                    }
                }
            }
        }

        return $errors;
    }

} 
```

最后，使用 $product 数组中的不同值对其进行测试。

默认 ：

```
 $product = array ();
        $product['name'] = 'A book';
        $product['date'] = '2012-09';
        $product['price'] = '21.5'; 
```

将显示：

```
array(3) {
  ["name"]=>
  array(0) {
  }
  ["date"]=>
  array(0) {
  }
  ["price"]=>
  array(0) {
  }
} 
```

如果我们将值更改为：

```
 $product = array ();
    $product['name'] = 'A very interesting book';
    $product['date'] = '2012-09-03';
    $product['price'] = '-21.5'; 
```

你会得到 ：

```
array(3) {
  ["name"]=>
  array(1) {
    [0]=>
    string(61) "This value is too long. It should have 10 characters or less."
  }
  ["date"]=>
  array(1) {
    [0]=>
    string(24) "This value is not valid."
  }
  ["price"]=>
  array(1) {
    [0]=>
    string(31) "This value should be 0 or more."
  }
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T17:51:26.537

验证数组的方法很简单，我在[silex 文档中学到了](http://silex.sensiolabs.org/doc/providers/validator.html)

```
use Symfony\Component\Validator\Constraints as Assert;

...
...

$constraint = new Assert\Collection(array(
    'Name' => new Assert\MinLength(10),
    'author' => new Assert\Collection(array(
        'first_name' => array(new Assert\NotBlank(), new Assert\MinLength(10)),
        'last_name'  => new Assert\MinLength(10),
    )),
));
$errors = $this->get('validator')->validateValue($book, $constraint); 
```

或者您可以直接创建带有约束的表单

```
$form = $this->get('form.factory')->createBuilder('form',array(),array(
    'csrf_protection'       => false,
    'validation_constraint' => new Assert\Collection(array(
        'name'       => new Assert\NotBlank(array(
            'message' => 'Can\'t be null'
        )),
        'email'      => new Assert\Email(array(
            'message' => 'Invalid email'
        )),
    ))
))
->add('name', 'text')
->add('email', 'email')
->getForm();

} 
```

此代码可以解决您的第二点，但对于第一点，我建议您编写一个自定义类，将您的 yaml 定义转换为具有实例化验证约束对象的有效约束数组，或者直接给出一个表单！

我不知道在 symfony2 中准备好做这件事的类。

我在其他没有好的数据模型的项目中做过，但是在 symfony 中你可以创建你的模型并定义与之相关的验证。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-25T21:26:07.333

在您的validation.yml 中：

```
Acme\DemoBundle\Entity\AcmeEntity:
    properties:
        price:
            - NotBlank: ~
            - Acme\DemoBundle\Validator\Constraints\ContainsAlphanumeric: ~ 
```

和您的 ContainsAlphanumeric：

```
<?php
    namespace Acme\DemoBundle\Validator\Constraints;
    use Symfony\Component\Validator\Constraint;
    use Symfony\Component\Validator\ConstraintValidator;

    class ContainsAlphanumericValidator extends ConstraintValidator
    {
        public function validate($value, Constraint $constraint)
        {
            if (!preg_match('/^[a-zA-Za0-9]+$/', $value, $matches)) {
                $this->context->addViolation($constraint->message, array('%string%' => $value));
            }
        }
    }
?> 
```

# ios - 画一条直线iOS

> ID：12527482
> 
> 赞同：0
> 
> 时间：2012-09-21T09:07:33.007
> 
> 标签：ios, touch, line

我正在使用此代码绘制一条直线（显然在用户触摸时），我需要从起点显示直线，直到用户从起点开始触摸（未结束触摸），就像橡皮筋一样，跟随手指移动。我可能忽略了一些我需要修改以产生必要效果的东西。任何想法？

注意：我在视图控制器内。

```
- (void) drawLine:(UIPanGestureRecognizer *)sender
{

    NSLog(@"Sender : %@", sender);
    CGPoint currentPoint;

    //CGAffineTransformMakeScale(lastScale, lastScale);
    if([(UIPanGestureRecognizer *)sender state] == UIGestureRecognizerStateBegan ||                                       [(UIPanGestureRecognizer *)sender state] == UIGestureRecognizerStateChanged)
    {
        currentPoint = [(UIPanGestureRecognizer *)sender locationInView:imgView];

        previousPoint = currentPoint;
    }

    if([(UIPanGestureRecognizer *)sender state] == UIGestureRecognizerStateChanged) 
    { 
        touchedPoint = [(UIPanGestureRecognizer *)sender locationInView:imgView]; 
        [imgView setNeedsDisplay]; 
    }

    if([(UIPanGestureRecognizer *)sender state] == UIGestureRecognizerStateEnded)
    {
        currentPoint = [(UIPanGestureRecognizer *)sender locationInView:imgView];
        imgView.image =  [self drawLineFromPoint:previousPoint toPoint:currentPoint   image:imgView.image];

        previousPoint = currentPoint;

    }

} 
```

这是 [drawline frompoint: topoint:] 方法

```
UIGraphicsBeginImageContext(imgView.frame.size);
CGContextRef context = UIGraphicsGetCurrentContext();       
CGContextSaveGState(context);

CGContextTranslateCTM(context, 0.0, imgView.frame.size.height);
CGContextScaleCTM(context, 1.0, -1.0);

CGContextSetShouldAntialias(context, YES);
CGContextSetLineWidth(context, 1.0f);
CGContextSetRGBStrokeColor(context, 0.7, 0.7, 0.7, 1.0);

CGContextMoveToPoint(context, fromPoint.x, fromPoint.y);
CGContextAddLineToPoint(context, toPoint.x, toPoint.y);
CGContextDrawPath(context, kCGPathStroke); 

CGContextRestoreGState(context);

NSLog(@"frompoint.x : %f, frompoint.y : %f",fromPoint.x, fromPoint.y );
NSLog(@"topoint.x : %f, topoint.y : %f", toPoint.x, toPoint.y);

UIImage *ret = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T04:07:18.060

[DrawingApp](https://github.com/zelox991/DrawingApp)这是我发现的一个示例项目，它可以满足您的需求。

另一种方法是，正如 Lefteris 在评论中建议的那样，在 UIView 内部，覆盖触摸开始、移动和结束。并使用 drawRect 画线。该线将拖动到您当前触摸的任何位置。

# java - Jsoup getElementsByTag 还是选择？

> ID：12527488
> 
> 赞同：4
> 
> 时间：2012-09-21T09:07:52.333
> 
> 标签：java, css-selectors, jsoup

`getElementsByTag`Jsoup和Jsoup之间有什么区别`select`（例如，如果获取链接或图像标签）？如果它们不同，我怎么知道在特定情况下使用哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:47:31.940

一般来说，我更喜欢`select`它，因为它肯定更快、更灵活，而且每个选择都可以在一行中完成。

我想唯一的优点`getElementsBy...`是：您不必知道 Selector API（或者更好：语法......即使它真的很容易学习，请查看：[Selector API doc](http://jsoup.org/cookbook/extracting-data/selector-syntax)）。

# java - XML 解析器和 xpath 表达式

> ID：12527491
> 
> 赞同：2
> 
> 时间：2012-09-21T09:08:14.330
> 
> 标签：java, xml, xpath

我正在使用 java default documentbuilder 来解析一个少于 100 行代码的 xml 文档。解析一个文档需要 35 毫秒，执行单个 xpath 表达式需要 15 毫秒。如何优化 xml 和解析器所花费的时间？.

```
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Collections;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.logging.Level;
import java.util.logging.Logger;

import javax.xml.namespace.QName;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.xpath.XPath;
import javax.xml.xpath.XPathConstants;
import javax.xml.xpath.XPathExpressionException;
import javax.xml.xpath.XPathFactory;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NamedNodeMap;
import org.w3c.dom.NodeList;
import org.xml.sax.SAXException;

public class XMLParser {

    public static final Logger LOGGER = Logger.getLogger(XMLParser.class.getName());

    private Map<String,List<NamedNodeMap>> fileVsProperties = new HashMap<String, List<NamedNodeMap>>();

    private Document document;

    public XMLParser(File file){
            this.document = XMLUtil.getDocument(file);
    }

    public void setProperties(Element file){
        NodeList properties = file.getElementsByTagName("property");
        List<NamedNodeMap> props = new ArrayList<NamedNodeMap>();
        String type = file.getAttribute("type");
        String path = file.getAttribute("path");

        if("".equals(path)){
            LOGGER.log(Level.INFO,"Attribute path is required for a file.");
            return;
        }

        path = path+":"+type;

        for(int i = 0;i<properties.getLength();i++){
            Element property = (Element) properties.item(i);
            props.add(property.getAttributes());
        }
        setProperties(props,path);
    }

    private void setProperties(List<NamedNodeMap> properties , String path){
        List<NamedNodeMap>  previousValue = fileVsProperties.get(path);
        if(previousValue != null){
            previousValue.addAll(properties);
        }else{
            fileVsProperties.put(path,properties);
        }

    }

    public Element getConfiguration(String branchName) throws XPathExpressionException{
        return (Element)XMLUtil.getElements("/configurations/configuration[@name='"+branchName+"']",document.getDocumentElement(),XPathConstants.NODE);
    }

    public static void main(String[] args) throws XPathExpressionException {
        long start = System.currentTimeMillis();
        File doc = new File("install.xml");
        XMLParser parser = new XMLParser(doc);
        long end = System.currentTimeMillis();
        System.out.println("Time Taken For Parsing :: "+ (end-start) + " milliseconds");
        start = end;
        Element configuration = parser.getConfiguration("BHARATHIKANNAN");
        end = System.currentTimeMillis();
        System.out.println("Time Taken For XPATH Expression TO Finding the Configuration :: "+ (end-start) + " milliseconds");
        start = end;
        NodeList files = parser.getFiles(configuration);
        for(int i=0;i<files.getLength();i++){
            parser.setProperties((Element) files.item(i));
        }
        end = System.currentTimeMillis();
        System.out.println(parser.fileVsProperties);
        System.out.println("Time Taken For Setting Properties :: "+ (end-start) + " milliseconds");
    }

    public NodeList getFiles(Element configuration){
        return configuration.getElementsByTagName("file");
    }

}

class XMLUtil{
    private static DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    private static DocumentBuilder builder;
    public static final Logger LOGGER = Logger.getLogger(XMLUtil.class.getName());

    private static XPathFactory xpathFactory = XPathFactory.newInstance();

    private static XPath xpath;

    static {

        try {
            builder = factory.newDocumentBuilder();
            xpath = xpathFactory.newXPath();
        } catch (ParserConfigurationException e) {
            LOGGER.log(Level.INFO,"");
        }
    }

    public static Document getDocument(File f){
        Document doc = null;
        try {
            doc = builder.parse(f);
        } catch (SAXException e) {
            LOGGER.log(Level.WARNING,"Invalid XML Document ",e);
        } catch (IOException e) {
            LOGGER.log(Level.SEVERE,"No Document Found in the given path",e);
        }
        return doc;
    }

    public static Object getElements(String xpathExpression , Element ele ,QName dataType) throws XPathExpressionException{
        return xpath.evaluate(xpathExpression, ele,dataType);
    }

} 
```

XML 文件

```
 <?xml version="1.0"?>
<!--
        Note : Default configuration loaded using your current branch name . You can extend configurations using extend attribute in configuration
        node . 
-->
<configurations>
        <configuration name="default">
                <files>
                        <file type="xml" path="conf/server.xml.orig">
                                <property regex="(port=).*" replace="\18080" xpath="/Server/Connector"></property>
                                <property regex="(port=).*" replace="\18080"></property>
                        </file>
                        <file type="text" path="conf/system_properties.conf">
                                <property regex="(username=).*" replace="\1root" ></property>
                        </file>
                </files>
        </configuration>
        <configuration name="BHARATHIKANNAN" extends="default">
                <files>
                        <file type="text" path="conf/system_properties.conf">
                                <property regex="(username=).*" replace="\1root" ></property>
                        </file>
                </files>
        </configuration>
</configurations> 
```

输出 ：

```
Time Taken For Parsing :: 24 milliseconds
Time Taken For XPATH Expression TO Finding the Configuration :: 14 milliseconds
{conf/system_properties.conf:text=[com.sun.org.apache.xerces.internal.dom.AttributeMap@75d9fd51]}
Time Taken For Setting Properties :: 0 milliseconds 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:41:38.367

最近有人问了一个非常相似的任务，但文件更大（2Mb），我在这里给出了一些撒克逊人的时间：

[https://stackoverflow.com/questions/12497928/xpath-speed-comparision/12508614#12508614](https://stackoverflow.com/questions/12497928/xpath-speed-comparision/12508614#12508614)

在更大的文档上，这些时间比您看到的要快得多。由于您已经在使用 Java，因此切换到 Saxon 应该非常简单。

不过需要注意的是，您在进入 main() 时立即开始计时，这意味着您主要测量类加载时间而不是 XML 处理时间。在测量开始之前，我的测量小心地预热了 Java VM。

请注意，如果您使用的是 Saxon，最好使用 Saxon 的本地树模型，而不是 DOM 或其他替代方案。我们最近在这里发布了一些测量结果：

[http://dev.saxonica.com/blog/mike/2012/09/index.html#000194](http://dev.saxonica.com/blog/mike/2012/09/index.html#000194)

DOM 的平均结果是撒克逊原生树的 8 倍，最坏的情况是 23 倍。

# javascript - >= 和 <= 以及 JS 中的 eval 函数是否存在已知问题？

> ID：12527495
> 
> 赞同：6
> 
> 时间：2012-09-21T09:08:28.783
> 
> 标签：javascript, eval

我目前正在编写一个 JS 规则引擎，它有时需要使用 eval() 函数来评估布尔表达式。

首先，我构造一个等式：

```
var equation = "relation.relatedTrigger.previousValue" + " " + relation.operator +
        " " + "relation.value"; 
```

*relationship.relatedTrigger.previousValue*是我要比较的值。

*relationship.operator*是运算符（“==”、“!=”、<=、“<”、“>”、>="）。

*relationship.value*是我要比较的值。

然后我简单地将这个字符串传递给 eval 函数，它返回 true 或 false ，如下所示：

```
return eval(equation); 
```

这绝对可以正常工作（使用单词和数字）或除 >= 和 <= 之外的所有运算符。例如，当评估方程时：

```
relation.relatedTrigger.previousValue <= 100 
```

当 previousValue = 0,1,10,100 和所有负数时返回 true，但对于介于两者之间的所有内容返回 false。

我将非常感谢任何人帮助我回答我的问题或帮助我找到替代解决方案。

问候，

奥吉尔。

PS 我不需要关于 eval() 函数的不安全性的演讲。任何赋予relation.relatedTrigger.previousValue 的值都是预定义的。

*编辑*：这是完整的功能：

```
function evaluateRelation(relation)
{
console.log("Evaluating relation")
var currentValue;

//if multiple values
if(relation.value.indexOf(";") != -1)
{
    var values = relation.value.split(";");
    for (x in values)
    {

        var equation = "relation.relatedTrigger.previousValue" + " " + relation.operator +
        " " + "values[x]";
        currentValue = eval(equation);
        if (currentValue)
            return true;
    }
    return false;
}

//if single value
else
{
    //Evaluate the relation and get boolean
    var equation = "relation.relatedTrigger.previousValue" + " " + relation.operator +
        " " + "relation.value";
        console.log("relation.relatedTrigger.previousValue " + relation.relatedTrigger.previousValue);
    console.log(equation);
    return eval(equation);
}
} 
```

答案：由下面的 KennyTM 提供。字符串比较不起作用。需要转换为数字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T09:26:59.947

您没有显示如何`relation.relatedTrigger.previousValue`获得，但我猜这个变量的类型仍然是一个字符串。在这种情况下，右侧将被视为字符串。字符串比较匹配您提到的所有特征：

```
>>> '-213' <= '100'
true
>>> '0' <= '100'
true
>>> '1' <= '100'
true
>>> '2' <= '100'
false
>>> '10' <= '100'
true
>>> '13' <= '100'
false 
```

你需要确保`relation.relatedTrigger.previousValue`是一个数字。一种解决方案是在比较中使用一元 + 运算符，例如

```
+relation.relatedTrigger.previousValue <= 100 
```

这与`eval`. 问题是 Javascript 中过于自由的隐式转换。

* * *

编辑：顺便说一句，您可以使用函数字典代替 eval。这更快，也更安全。请参阅[http://jsperf.com/eval-vs-function-map](http://jsperf.com/eval-vs-function-map)。

```
var fmap = {
    '>=': function(a, b) { return a >= b; },
    ...
};

fmap[relation.operator](+relation.relatedTrigger.previousValue, 
                        +relation.value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:34:32.153

它是比较字符串而不是数字。

确保`relation.relatedTrigger.previousValue`和`relation.value`是数字。

`"11"`> `"100"`：因为按字母顺序`11`排在后面。`100`

11 < 100 按数字顺序排列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T09:36:50.937

```
var relation = {'relatedTrigger':{'previousValue':"7"}, 'operator':'<=', 'value': "100"};

var equation = "parseFloat(relation.relatedTrigger.previousValue)" + " " + relation.operator + 
    " " + "parseFloat(relation.value)"; 

alert(equation + ", " + eval(equation)); 
```

这实际上是您最终得到的结果，并且确保数字值而不是字符串传递的额外步骤似乎有效。

# asp-classic - 发送带有附件的电子邮件，该附件将以触发邮件的相同形式上传

> ID：12527504
> 
> 赞同：0
> 
> 时间：2012-09-21T09:08:54.537
> 
> 标签：asp-classic, vbscript

发送带有附件的电子邮件，该附件将以触发邮件的相同形式上传。

**背景：** 即我有一个表格，可以从 FROM 中获取姓名、地址等详细信息。填写详细信息后，将允许用户浏览并上传附件。单击“上传”按钮后，文件将上传到服务器。

完成上述所有操作后，当用户单击此 FROM 中的 SUBMIT 按钮时，它应该会触发一封电子邮件，其中包含在 FORM 中输入的所有详细信息并附有上传的文件。

现在，我面临的问题是：当我点击上传按钮时，文件正在上传，但输入的所有输入都消失了。

对此的任何解决方案将不胜感激。
注意：我们没有使用任何免费软件，例如邮件功能。邮件由 vbscript 函数发送。

以下是如何捕获 i/p 字段值的逻辑：

```
ssr_imo = sql_ship_friendly(request.form("ssr_imo"),10)
ssr_ship_name = sql_ship_friendly(request.form("ssr_ship_name"),100)
ssr_ins_nr = sql_ship_friendly(request.form("ssr_ins_nr"),20)
ssr_ins_date = sql_date_friendly(request.form("ssr_ins_date"),30)
port_name = sql_ship_friendly(request.form("port_name"),50)
ssr_port_id = sql_ship_friendly(request.form("ssr_port_id"),20)
opStat = sql_ship_friendly(request.form("opStat"),20)

subEmail = sql_ship_friendly(request.Form("ssr_sub_email"),200)
subName = sql_ship_friendly(request.Form("ssr_sub_name"),70)

ssr_q2 = validate_q_ssr(request.form("ssr_q2"))
ssr_q3 = validate_q_ssr(request.form("ssr_q3"))
debugNote "<b> TEST = </b>" & ssr_q3
ssr_q4 = validate_q_ssr(request.form("ssr_q4"))
ssr_q5 = validate_q_ssr(request.form("ssr_q5"))
ssr_q6 = validate_q_ssr(request.form("ssr_q6"))
ssr_q7 = validate_q_ssr(request.form("ssr_q7"))
ssr_q8 = validate_q_ssr(request.form("ssr_q8"))
ssr_q9 = validate_q_ssr(request.form("ssr_q9"))
ssr_q10 = validate_q_ssr(request.form("ssr_q10"))
ssr_q11 = validate_q_ssr(request.form("ssr_q11"))
ssr_q12 = validate_q_ssr(request.form("ssr_q12"))
ssr_q13 = validate_q_ssr(request.form("ssr_q13"))
ssr_qa = validate_q_ssr(request.form("ssr_qa"))
ssr_qb = validate_q_ssr(request.form("ssr_qb")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:26:02.240

将表单 enctype 更改为“multipart/form-data”后，您将无法再使用 Request 或 Request.Form 检索输入值，您必须使用您正在使用的上传组件或脚本中的方法/函数。

例如：

*   在 Persit 的 AspUpload 中，您在 ChestySoft 中使用obj.Form **("inputName")**
*   csASPUpload 你使用**obj.Value("inputName")**

（在这两种情况下， **obj**是您的上传组件对象实例的名称，而**inputName**是您的表单元素的名称）

编辑：使用您用于上传的 ASP 类，您应该使用 Uploader.Form 而不是 Request.Form 来检索输入值。

# plsql - 在 Pl/Sql 中尝试 Catch 之类的异常处理

> ID：12527507
> 
> 赞同：20
> 
> 时间：2012-09-21T09:08:55.843
> 
> 标签：plsql

在一个程序中，我想做逻辑单元1，不管它是否失败，执行逻辑单元2

这似乎是一个典型的 try-catch 场景。但我怎么能在 pl/sql 中做到这一点？

```
create or replace
PACKAGE BUILD_PKG
AS
PROCEDURE reset_seq_and_truncate_tbl(
    p_seq_name   IN VARCHAR2,
    p_table_name IN VARCHAR2 );
END BUILD_PKG;
/
create or replace
PACKAGE BODY  BUILD_PKG
AS
BEGIN
PROCEDURE reset_seq_and_truncate_tbl(
    p_seq_name   IN VARCHAR2,
    p_table_name IN VARCHAR2 )
 IS
   l_val NUMBER;
 BEGIN
   BEGIN
     EXECUTE immediate 'truncate table ' || p_table_name;
   EXCEPTION 
        WHEN OTHERS 
        THEN dbms_output.put_line(SQLCODE);
   END;

   BEGIN
     EXECUTE immediate 'alter sequence ' || p_seq_name || ' increment by 1 minvalue 0';
   EXCEPTION 
        WHEN OTHERS 
        THEN dbms_output.put_line(SQLCODE);
   END; 
 END reset_seq_and_truncate_tbl;

END BUILD_PKG; 
```

如您所见，第二个异常块导致了问题。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-21T09:15:18.133

将第二个包含`EXCEPTION`在`BEGIN..END`块中。试试这个方法

```
PROCEDURE reset_seq_and_truncate_tbl(
    p_seq_name   IN VARCHAR2,
    p_table_name IN VARCHAR2 )
 IS
   l_val NUMBER;
 BEGIN
   EXECUTE immediate 'truncate table ' || p_table_name;
 EXCEPTION 
      WHEN OTHERS 
      THEN
      BEGIN
        dbms_output.put_line(SQLCODE);
        EXECUTE immediate 'alter sequence ' || p_seq_name || ' increment by 1 minvalue 0';
       --this would cause compilation error
       EXCEPTION 
            WHEN OTHERS 
            THEN dbms_output.put_line(SQLCODE);
     END; 
 END reset_seq_and_truncate_tbl; 
```

更新以回应评论

```
PROCEDURE reset_seq_and_truncate_tbl(
    p_seq_name   IN VARCHAR2,
    p_table_name IN VARCHAR2 )
 IS
   l_val NUMBER;
 BEGIN
   BEGIN
     EXECUTE immediate 'truncate table ' || p_table_name;
   EXCEPTION 
        WHEN OTHERS 
        THEN dbms_output.put_line(SQLCODE);
   END;

   BEGIN
     EXECUTE immediate 'alter sequence ' || p_seq_name || ' increment by 1 minvalue 0';
   EXCEPTION 
        WHEN OTHERS 
        THEN dbms_output.put_line(SQLCODE);
   END; 
 END reset_seq_and_truncate_tbl; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:19:56.897

程序 ( ) 是

开始

-- 逻辑单元 1 BEGIN ... 其他情况下除外 ... END;

-- 逻辑单元 2 BEGIN ... 其他情况下除外 ... END;

-- Final Exception Block EXCEPTION WHEN OTHERS THEN ...

结尾 ;

# iphone - 支持 iPhone4 和 iPhone5 屏幕分辨率的最佳方式是什么？- 仅 iOS6 中的自动布局

> ID：12527517
> 
> 赞同：15
> 
> 时间：2012-09-21T09:09:42.450
> 
> 标签：iphone, ios5, ios6, iphone-4, iphone-5

**有人知道如何同时支持屏幕分辨率 iPhone4 和 iPhone 5 吗？**

在 iOS6 中，我们支持 Autolayout。可以用于 iPhone4-iPhone5 屏幕，即 320x480 和 320x568。

如果我们为此使用自动布局功能，我们将不得不将部署目标最小化为 iOS6。iOS5比呢？

iOS5比呢？我们是否必须针对不同的屏幕尺寸以编程方式处理它？

**我在网上搜索并找不到确切的答案，**因此尽管怀疑是否有否决票，但还是发布了这个问题。请容忍我。我想这个问题对于在应用程序中支持新设备是非常基础的，并且适用于所有开发人员。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T09:14:02.550

如果您想支持 iOS 4.3 或 5，请关闭 Autolayout。然后您必须[`UIViewAutoresizing`](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW45)在代码或界面生成器中正确设置。

使用[`autoresizingMask`](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW6)on`UIView`您可以使视图保持在一边并随着超级视图的大小而增长。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T13:06:28.503

另一种方法是为 iPhone 5 和 iPhone 4S 设计单独的视图。与通用应用程序一样，检查屏幕大小并相应地加载视图。

# android - 为什么数据库中的值经常更改以及如何克服这个问题，Android？

> ID：12527518
> 
> 赞同：0
> 
> 时间：2012-09-21T09:09:43.300
> 
> 标签：android, json, android-sqlite, sqlite

实际上，我已经创建了问题和答案。我最终得到了总共 10 个问题，并且我已将问题表中的所有这 10 个问题添加到数据库中。

但实际上它已经循环运行了。从头到尾执行所有这 10 个问题时，它向我展示了 0 到 9 次。

但是当我刷新页面并再次运行模拟器时，它显示为 20 个问题。后来 20 个问题变成了 30 , 40, 50 现在 60 个问题。

我只有10个问题，但现在怎么变成了60个问题。在这 60 个问题中，我可能在那里看到过重复的问题。

这里的实际问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:06:10.020

您是说每次您运行您的应用程序时，您的`QUESTIONS`表格中的问题总数都会增加 10？如果是这样，那么您可能已经编写了一段代码，每次您运行您的代码时都会添加您的问题。注释该行并运行您的应用程序。

如果我把你的问题弄错了，我很抱歉，而且你的问题有点笨拙。很难得到你的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:34:27.570

您可以为问题表添加唯一索引

CREATE UNIQUE INDEX IndexName ON TableName (fieldName ASC, secondFieldName DESC)

并为您的表添加诸如 ON CONFLICT REPLACE 之类的东西

# android - 使用按钮在布局/活动之间切换

> ID：12527524
> 
> 赞同：2
> 
> 时间：2012-09-21T09:09:55.670
> 
> 标签：android, android-layout, android-button

我试图使用按钮从一个屏幕移动到另一个屏幕，我可以从主屏幕移动到辅助屏幕，但是当我试图从第二个屏幕返回时，我收到一条错误消息“不幸的是，应用程序已停止”。

注意：我将有第三个布局/活动，所以我会将解决方案复制到第三个选项。

我是 android 新手，想知道您是否可以提供更好的方法来处理我正在做的事情（活动在清单中声明，实际上当使用第二个屏幕作为主屏幕时，它会很好地进入第一个屏幕（作为第二个选项）但是在尝试获取回到第二个屏幕，它又给了我错误），提前谢谢！！：

```
package com.example.citas.medicas;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.TextView;
import android.widget.Toast;

public class Citas_Medicas extends Activity {
private Button btnIraRegistrarPaciente;
private Button btnIraRegistrarDoctor;
private Button btnIraRegistrarCita;
private Button btnIraReportePacientes;
private Button btnIraReporteHistorialCitas;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_citas__medicas);

    btnIraRegistrarPaciente = (Button)findViewById(R.id.btnIraRegistrarPaciente);
    btnIraRegistrarDoctor = (Button)findViewById(R.id.btnIraRegistrarDoctor);
    btnIraRegistrarCita = (Button)findViewById(R.id.btnIraRegistrarCita);
    btnIraReportePacientes = (Button)findViewById(R.id.btnIraReportePacientes);
    btnIraReporteHistorialCitas = (Button)findViewById(R.id.btnIraReporteHistorialCitas);

}

public void onStart()
{
    super.onStart();

    btnIraRegistrarPaciente.setOnClickListener(new OnClickListener()
            {
                public void onClick(View component)
                {
                    setContentView(R.layout.registrarpaciente);
                }
            }               
    );

} 
```

}

这是辅助java（不确定onStart是否正常）：

```
package com.example.citas.medicas;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.TextView;
import android.widget.Toast;

public class Registrar_Paciente extends Activity implements OnClickListener {
private Button btnRegistrarPaciente;
private Button btnVolverMenuPrincipal1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.registrarpaciente);

    btnRegistrarPaciente = (Button)findViewById(R.id.btnRegistrarPaciente);
    btnVolverMenuPrincipal1 = (Button)findViewById(R.id.btnVolverMenuPrincipal1);

    btnRegistrarPaciente.setOnClickListener(this);
    btnVolverMenuPrincipal1.setOnClickListener(this);

}

  public void onStart()
  {
    super.onStart();

    btnRegistrarPaciente.setOnClickListener( 
            new OnClickListener()
            {
                public void onClick(View component)
                {
                    setContentView(R.layout.registrarpaciente);
                }
            }               
    );

    btnVolverMenuPrincipal1.setOnClickListener( 
            new OnClickListener()
            {
                public void onClick(View component)
                {
                setContentView(R.layout.activity_citas__medicas);

                    //Intent intent = new Intent(Registrar_Paciente.this, Citas_Medicas.class);
                    //startActivity(intent);
                }
            }
    );

  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:15:12.230

与其把 onClickHandlers 放在里面`onStart()`，我相信如果你把它们放在里面会更好**`onCreate()`**。我的意思是，这是传统的做法。

由于您正在使用不同的活动，因此仅更改**`setContentView()`**是不够的。我也可能错了，但在活动之间切换的标准方法是通过[Intents。](http://developer.android.com/reference/android/content/Intent.html)

像这样的东西：

```
btnIraRegistrarPaciente.setOnClickListener(new OnClickListener()
            {
                public void onClick(View component)
                {
                    Intent intent = new Intent(context, Registrar_Paciente.class);
                    startActivity(intent);

                }
            }               
    ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:37:43.277

您可能需要更改活动而不是更改活动中的布局。照顾功能**SetContentView** b/c 它将释放分配给您之前已经设置的布局中的控件的内存。

在第一个活动中：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_citas__medicas);

    btnIraRegistrarPaciente = (Button)findViewById(R.id.btnIraRegistrarPaciente);

    btnIraRegistrarPaciente.setOnClickListener(new OnClickListener()
            {
                public void onClick(View component)
                {
                    //setContentView(R.layout.registrarpaciente);
                    Intent intent = new Intent(Citas_Medicas.this, Registrar_Paciente.class);
                    startActivity(intent);
                }
            }               
    ); 

} 
```

在第二个活动中：

```
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.registrarpaciente);

    btnRegistrarPaciente = (Button)findViewById(R.id.btnRegistrarPaciente);

    btnRegistrarPaciente.setOnClickListener(new OnClickListener()
            {
                public void onClick(View component)
                {
                    //setContentView(R.layout.registrarpaciente);
                    Intent intent = new Intent(Registrar_Paciente.this, Citas_Medicas.class);
                    startActivity(intent);
                }
            }               
    );

} 
```

# python - Python：如何在 eval 中访问 eval 的 globals()

> ID：12527525
> 
> 赞同：1
> 
> 时间：2012-09-21T09:09:55.453
> 
> 标签：python, scope, eval

标题似乎很愚蠢，但我不知道如何准确表达，对不起。

我有一个程序需要评估一些用户代码（通过 RestrictedPython 以确保安全），我想将一个函数放入 eval 的全局变量中，以便它可以在 eval 时向我打印一些调试信息，例如（简化）：

```
class UserException(Exception):
    pass

def err(msg):
    # ? how to get the globals variable in eval ?
    A = globals().get('A', 'A not found')
    return UserException("%s and A's value is %r" % (msg, A))

g = {
    'err': err,
    'A': None,
    '__builtins__': {},
}

print eval('A or err("A not true")', g) 
```

这将给出结果：

```
A not true and A's value is 'A not found' 
```

在这里使用 'globals()' insde 'err' 当然是错误的。但是我怎样才能在'err'中获得'g'中的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:18:16.080

您可以将其`g`作为默认参数传递：

```
def err(msg, g=g):
    A = g['A']
    return UserException("%s and A's value is %r" % (msg, A)) 
```

将给出结果：`A not true and A's value is None`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T10:30:00.037

对函数内部的任何引用`globals()`都将始终为您提供定义函数时范围内的全局变量。您在这里看到的情况与将函数从一个模块导入另一个模块时没有什么不同：导入的函数仍然引用定义它的模块的全局变量。

让函数按原样使用的最简单方法是`g`使用作为全局变量`globals()`执行定义。`g`如果您确实更改了函数的全局变量，那么不要忘记您还需要包含该函数使用的任何其他全局变量；在这种情况下`UserException`。

或者，您可以`err()`检查其调用者的堆栈帧并使用调用者的全局变量。这很混乱，但如果是为了调试信息，您可能会接受。

```
>>> def err(msg):
    # ? how to get the globals variable in eval ?
    A = sys._getframe(1).f_globals.get('A', 'A not found')
    return UserException("%s and A's value is %r" % (msg, A))

>>> import sys
>>> g = {
    'err': err,
    'A': None,
    '__builtins__': {},
}
>>> print eval('A or err("A not true")', g, g)
A not true and A's value is None
>>> 
```

# ruby - Ruby 有哪些好的机器学习和数据挖掘库，或者有哪些？

> ID：12527531
> 
> 赞同：3
> 
> 时间：2012-09-21T09:10:08.777
> 
> 标签：ruby, frameworks, machine-learning

我计划在 Ruby on Rails 项目上进行一些 ML 编程，我正在寻找任何 Ruby 上的 ML 框架。我当然在谷歌上搜索，但找不到任何令人满意的，所以我决定咨询群众的智慧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:35:00.893

我不会说有任何用纯 ruby​​ 编写的用于机器学习的“好”库，因为机器学习在计算上相当昂贵。一个好的库可能会将 ac 接口包装到一个众所周知的库。因此，您可以尝试找到一个好的 c 库并创建该库的 ruby​​ 包装器。

另一种方法是使用 JRuby 并导入基于 java 的库。这是一篇关于导入weka的文章。

[http://rubyforscientificresearch.blogspot.ca/2009/08/accessing-weka-from-jruby.html](http://rubyforscientificresearch.blogspot.ca/2009/08/accessing-weka-from-jruby.html)

您正在使用机器学习做什么可能有特定于应用程序的库？如果您正在尝试推荐，请尝试[推荐](https://github.com/paulasmuth/recommendify)gem。

另一种选择是使用网络服务。有一个 google prediction api，它有一个[ruby​​ 客户端](http://code.google.com/p/ruby-google-prediction-api/)。

# jquery - jQuery自动完成对齐

> ID：12527532
> 
> 赞同：3
> 
> 时间：2012-09-21T09:10:12.107
> 
> 标签：jquery, user-interface, autocomplete, alignment, styling

目前，自动完成结果框与我的输入框的左边缘对齐，并向右扩展我给它的宽度。但是，我的业务要求是将其对齐到输入框的右边缘，如果输入框放置在页面的右侧，则将其反向展开，因为结果被剪掉并且水平滚动被添加到视图完整的结果。（我可以修改我的'jquery-ui.css'）

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:16:24.280

当前版本的 jQuery UI 允许为 Autocomplete 小部件提供带有选项的位置对象，具有与上述位置小部件相同的属性。所以你可以用它来定位你喜欢的建议列表。

见这里 [http://jqueryui.com/demos/autocomplete/#option-position](http://jqueryui.com/demos/autocomplete/#option-position)

如果您需要动态更改位置 - 您需要使用“打开”事件

***代码示例***

```
//Supply a callback function to handle the open event as an init option.
$( ".selector" ).autocomplete({
   open: function(event, ui) { ... }
});
//Bind to the open event by type: autocompleteopen.
$( ".selector" ).bind( "autocompleteopen", function(event, ui) {
  ...
}); 
```

在它们里面你可以改变自动编译表单的位置`css()`

```
$('.ui-autocomplete').css({ 'left': x + 'px', 'top': y + 'px' }); 
```

PS：我不确定您是否可以仅使用 css 来实现，因为位置取决于父 html 输入字段

# delphi - 如果应用程序是 Firemonkey 之一，如何使用条件定义进行测试？

> ID：12527533
> 
> 赞同：4
> 
> 时间：2012-09-21T09:10:11.333
> 
> 标签：delphi, cross-platform, delphi-xe2, conditional-statements

我使用 DUnit。它有一个 VCL GUITestRunner 和一个控制台 TextTestRunner。

在 Firemonkey 和 VCL Forms 应用程序使用的单元中，我想实现以下目标：

1.  如果 Firemonkey 应用程序，如果目标是 OS X，并且在 OS X -> TextTestRunner 上执行
2.  如果 Firemonkey 应用程序，如果目标是 32 位 Windows，则在 Windows 上执行 -> AllocConsole + TextTestRunner
3.  如果 VCL 应用程序 -> GUITestRunner

```
{$IFDEF MACOS}
TextTestRunner.RunRegisteredTests;      // Case 1
{$ELSE}
   {$IFDEF MSWINDOWS}
   AllocConsole;
   {$ENDIF}
   {$IFDEF FIREMONKEY_APP}              // Case 2 <--------------- HERE
   TextTestRunner.RunRegisteredTests;  
   {$ELSE}                              // Case 3
   GUITestRunner.RunRegisteredTests;
   {$IFEND}
{$ENDIF} 
```

使案例 2 工作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:36:24.087

没有内置条件可以告诉您`FrameworkType`在 .dproj 文件中指定的项目是 VCL 还是 FMX。据我所知，您无法在代码中打开该设置。还要记住，虽然肯定不是主流，但完全有可能拥有一个同时使用 VCL 和 FMX 的应用程序。这真的不是一个非此即彼的条件。

因此，我建议您声明自己的条件定义，以控制您是使用 GUI 运行器还是文本运行器。

事实上，你大概已经有了某种机制来做到这一点。您对单位进行代码命名`GUITestRunner`。这意味着它必须`uses`与问题中的代码位于同一文件中。你是如何有条件地包含`GUITestRunner`在使用条款中的？

注意：在 Embarcadero 论坛上提出了同样的问题：[https ://newsgroups.embarcadero.com/message.jspa?messageID=400077](https://newsgroups.embarcadero.com/message.jspa?messageID=400077)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-06T13:04:56.913

利用`{$IF Defined(MSWINDOWS)}`

代替`{$IFDEF MSWINDOWS}`

因为`{$IFDEF MSWINDOWS}`在 Firemonkey VCL 应用程序中无法正常工作。

# jquery - jquery用'&'字符获取值

> ID：12527534
> 
> 赞同：0
> 
> 时间：2012-09-21T09:10:13.090
> 
> 标签：jquery

我有一个文本框，其值类似于“PN & J”。我将其存储在

```
var sState = $('#txtState').val(); 
```

并通过 Ajax 调用

```
 data: 'Service=' + sSvendor + '&City=' + sCity + '&Sub=' + sCitySub + '&State=' + sState + '&Network=' + sNetwork, 
```

但是在接收端，我正在检索值，因为`"PN "`它只是忽略了一个字符后的`'&'`字符串。如何克服这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:14:34.413

如果您像这样自己连接字符串，则需要确保正确转义值：

```
state = encodeURIComponent(sState) 
```

但是，如果您序列化表单或将数据设置为 JSON 对象，这将为您处理。

```
data = { state: sState, ... } 
```

或者

```
data = $('#some-form').serialize() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T09:14:06.807

因为`&`是 GET 请求中对的分隔符`key=value`，所以您需要使用[`encodeURIComponent`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent);对其进行转义。

```
data: 'Service=' + sSvendor + '&City=' + sCity + '&Sub=' + sCitySub + '&State=' + encodeURIComponent(sState) + '&Network=' + sNetwork, 
```

值得注意的是，还有[`encodeURI`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURI)，但它不会对值进行编码`&`（因为它将输入视为整个 URI，而不是特定的组件）。

为了安全起见，您可以随意逃避其余的价值观……我只是太懒了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T09:16:49.053

您可以使用`encodeURIComponent()`对字符进行编码。

请参阅[此处](https://stackoverflow.com/questions/332872/how-to-encode-a-url-in-javascript)了解更多详细信息

# android - 在Android中将图表导出为pdf

> ID：12527536
> 
> 赞同：1
> 
> 时间：2012-09-21T09:10:19.320
> 
> 标签：android

在我的应用程序中，我正在创建一个要在屏幕上显示的图表，现在我想将此图表作为 PDF 保存到我的手机中。建议我该怎么做？如何获取它的图像并保存为 PDF？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:23:10.433

1.  [使用任何图表库](https://stackoverflow.com/questions/11101666/how-to-draw-a-graph-in-android-like-wifi-analyzer-app/11150546#11150546)创建图表。

2.  创建该 ChartView 的位图

    > ```
    > mChartView.buildDrawingCache();
    > Bitmap bm = mChartView.getDrawingCache(); 
    > ```

3.  使用图像创建[PDF](http://www.kodejava.org/examples/841.html)并使用 iText 传递该位图

# sql - SQL Server 按类别列出

> ID：12527537
> 
> 赞同：2
> 
> 时间：2012-09-21T09:10:19.850
> 
> 标签：sql, sql-server, sql-server-2000

如果我有一个存储余额行的表

```
 Code     cat  balance
    ----------------------
    Sales    101  123
    Cost     101   45
    Overhead 101   67
    Sales    102  890
    Costs    102   12
    Overhead 102   34 
```

（等等，假设'cat'是一个产品类别并且有更多类别并且'code'代表一个总帐代码）

我将如何对其进行编码以便输出显示....

```
Code   101   102   [103..etc ->]
-----------------------------------    
Sales  123   890   [#]
Costs   45    12   [#]
Overhead... 
```

这可能很简单，但我找不到这样做的方法，任何帮助将不胜感激。

达伦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T13:18:04.147

不幸的是，SQL Server 2000 没有`PIVOT`函数，但您可以使用动态 SQL 复制它。

```
DECLARE @query  AS NVARCHAR(MAX),  -- VARCHAR(8000)  in SQL Server 2000 or text
  @rowCount as int,
  @pivotCount as int,
  @pivotRow as varchar(10) = ''

select distinct cat
into #colsPivot
from yourtable

set @pivotCount= (select COUNT(*) from #colsPivot) 
set @rowCount = 1
set @query = ''

---- create the CASE string
while @rowCount <= @pivotCount
    begin
        set @pivotRow = (select Top 1 cat from #colsPivot)

        set @query = @query + ', sum(case when cat = ' + @pivotRow + ' then balance end) as ''' + @pivotRow + ''''

        delete from #colsPivot where cat = @pivotRow

        if @rowCount <= @pivotCount
            begin
                set @rowCount = @rowCount + 1
                print @rowCount
            end
    end

-- add the rest of the SQL Statement
set @query = 'SELECT code ' + @query + ' from yourtable group by code'

exec(@query)

drop table #colsPivot 
```

# 请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/497cd/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T13:07:13.537

```
select 
    Code,
    sum(case cat when 101 then balance else 0) as '101',
    sum(case cat when 102 then balance else 0) as '102'
from balances
group by Code 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T09:11:28.557

尝试使用 sql server 的 PIVOT 功能

# php - 在没有 15 英里半径的情况下找到最近的 lng/lat 位置的方法？

> ID：12527541
> 
> 赞同：1
> 
> 时间：2012-09-21T09:10:35.343
> 
> 标签：php, mysql, latitude-longitude

项目：我有一个存储为 lng/lat 的校友家庭地址位置的 MySQL 数据库。我希望能够识别居住在彼此 15 英里半径范围内的 15 名或更多成员的校友组。

给定一个 lng/lat，我如何选择 15 英里半径内的其他 lng/lat 位置？我已经在 Linux 上安装了 PEAR 的 PHP geonames 包。我不清楚我是否可以使用这个包来帮助实现这个功能。它包含半径例程，但它们似乎用于返回 lng/lat 半径内的邮政编码等信息。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T09:11:50.270

您需要考虑使用[Haversine Formula](http://en.wikipedia.org/wiki/Haversine_formula)。您会发现大量在线示例向您展示如何在 PHP 和 SQL 中实现该公式。

谷歌[有一个很好的 MySQL 例子](https://developers.google.com/maps/articles/phpsqlsearch_v3)：

```
SELECT id, ( 3959 * acos( cos( radians(37) ) * cos( radians( lat ) ) * cos( radians( lng ) - radians(-122) ) + sin( radians(37) ) * sin( radians( lat ) ) ) ) AS distance 
FROM markers HAVING distance < 25 ORDER BY distance LIMIT 0 , 20; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:46:33.737

韦恩的回答很有趣，但我想知道是否可以忽略超过 15 英里的球形分量，而改用三角？伪代码：

```
For every (x1, y1) row:
    Loop through every (x2, y2):
        Distance = SQRT ( ( x2 - x1 ) ^ 2 + ( y2 - y1 ) ^ 2 )
        If (Distance <= 15)
            // ...
        End If
    End
End 
```

或 SQL 版本（不确定我的权限是否正确，但你明白了）：

```
SELECT
    SQRT ( ( a2.x - a1.x ) ^ 2 + ( a2.y - a1.y ) ^ 2 ) AS distance
FROM alumni a1, alumni a2
WHERE a1.id != a2.id
HAVING distance <= 15; 
```

考虑一下，15 英里将不得不从纬度/经度转换。

# css - 文本输入下方的文本

> ID：12527543
> 
> 赞同：0
> 
> 时间：2012-09-21T09:10:36.223
> 
> 标签：css

我有这个 css [http://jsfiddle.net/thiswolf/3GYY4/](http://jsfiddle.net/thiswolf/3GYY4/)在每个文本输入下方，我想要一些文本，我可以使用这些文本来获取一些关于该文本输入的指导文本，例如

![在此处输入图像描述](../Images/b9433b9daa46644cc3e26e38e3c38ac1.png)

我当前的 html 和 css 看起来像这样

```
<!Doctype html>
<head>
<title>Lorem ipsum text below form</title>
<meta charset="utf-8" />
<style type="text/css">
.zseform{
width:300px;
background-color:#E6E6FA;
}
label{
width:15%;
float:left;
}
p{
background-color:#B0C4DE;
}
</style>
</head>
<body>
<p>
<label>Logo</label><input class="zseform" type="text" />
</p>
<p>
<label>City</label><input class="zseform" type="text" />
</p>
<p>
<label>Address</label><input class="zseform" type="text" />
</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:37:42.880

它应该像在输入之后放置一个元素一样简单，设置`display:block`和设置填充一样。这是一个[例子](http://jsfiddle.net/3GYY4/3/)。

# c++ - C++11 Lambda 模板推断

> ID：12527548
> 
> 赞同：2
> 
> 时间：2012-09-21T09:10:52.527
> 
> 标签：c++, templates, lambda, c++11

所以我有以下代码：

```
#include <iostream>

template <typename T>
class funcky
{
  public:
    funcky(char const* funcName, T func)
      : name(funcName), myFunc(func)
    {
    }

  //private:
    char const* name;
    T myFunc;
};

#if 0
int main(void)
{
  char const* out = "nothing";

  // requires template args
  funcky test("hello", [&](int x, int y) -> int
  {
    out = "YES";
    return x + y;
  });

  std::cout << test.name << " = " << test.myFunc(1, 2) << std::endl;
  std::cout << test.name << " = " << out << std::endl;

  return 0;
}

int main2(void)
{
  funcky<void(*)(void)> test("hello", [&, this](void) -> void
  {
    std::cout << this->name << std::endl;
  });

  test.myFunc();

  return 0;
}
#endif

int main(void)
{
  char const* out = "nothing";

  auto myFunc = [&](int x, int y) -> int
  {
    out = "YES";
    return x + y;
  };
  funcky<decltype(myFunc)> test("hello", myFunc);

  std::cout << test.name << " = " << test.myFunc(1, 2) << std::endl;
  std::cout << test.name << " = " << out << std::endl;

  return 0;
} 
```

顶部块是一个函数持有者，其中包含一个 lambda 和一个名称。

接下来是我想在 API 方面使用的，但由于没有指定模板参数而失败。

之后，我想知道是否可以在未在其中声明的 lambda 中使用特定类型（例如 funcky）的“this”。妄想。

最后是编译但在 funcky 构造函数和 decltype 之外使用 lambda 的代码。

在 C++11 中这样的事情是可能的吗？我如何完成所说的事情？

此外，除非它可以具有相同的 API，否则尽量不要猜测我在做什么，就好像我不能那样做，我只会用更简单的方式重写它。这不值得努力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T10:10:15.410

就像是

```
template<typename Functor>
funcky<typename std::decay<Functor>::type>
make_funcky(const char* name, Functor&& functor)
{ return { name, std::forward<Functor>(functor) }; } 
```

对以下事情有帮助：

```
auto test = make_funcky("hello", [&](int x, int y) -> int
{
    out = "YES";
    return x + y;
}); 
```

但是，lambda 表达式内部`this`总是指表达式的直接`this`外部。它不是对调用时存在的某些内容的*延迟*`this`引用——它不是隐式参数。因此，为它想要“另一种类型”是没有意义的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T09:32:31.403

如果您想为用户提供一种向您的类提供回调的方法，最好使用`std::function`，因为根据您的经验，在函数/仿函数类型上模板化类并不是一件非常有用的事情。

问题在于您不能只接受任何东西。您应该对可以作为回调传递的内容有明确的要求，因为您应该知道以后要如何调用它。请参阅[为什么](https://stackoverflow.com/a/11629125/500104)我将构造函数设为模板。

```
#include <functional>
#include <utility>

struct X{
  template<class F>
  X(F&& f) : _callback(std::forward<F>(f)) {} // take anything and stuff it in the 'std::function'

private:
  std::function<int(int,int)> _callback;
};

int main(){
  X x([](int a, int b){ return a + b; });
} 
```

但是，如果*您*不知道回调将如何被调用（例如，用户稍后传递参数），但您想支持它，请在回调的*签名上模板化您的类型：*

```
#include <iostream>
#include <functional>
#include <utility>

template<class Signature>
struct X{
  template<class F>
  X(F&& f) : _callback(std::forward<F>(f)) {} // take anything and stuff it in the 'std::function'

private:
  std::function<Signature> _callback;
};

int main(){
  X<int(int,int)> x1([](int a, int b){ return a + b; });
  X<void()> x2([]{ std::cout << "wuzzah\n";});
} 
```

# iphone - 将 UIImage 与 alpha 值混合

> ID：12527551
> 
> 赞同：0
> 
> 时间：2012-09-21T09:10:55.977
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uiimage

如何通过仅更改一张图像的 alfa 来混合两张图像，使上面的图像稍微透明，并且上面的图像将显示为在背景图像上绘制的那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:19:09.770

您可以通过 imageView alpha 属性来完成

```
imageView.alpha = 0.0f; 
```

**详细代码：**

```
 UIImage *bottomImage = [UIImage imageNamed:@"bottomImage.png"];
    UIImage *topImage = [UIImage imageNamed:@"topImage.png"];

    CGSize newSize = CGSizeMake(width, height);
    UIGraphicsBeginImageContext( newSize );

    // Use existing opacity as is
    [bottomImage drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
    // Apply supplied opacity
    [topImage drawInRect:CGRectMake(0,0,newSize.width,newSize.height) blendMode:kCGBlendModeNormal alpha:0.8];

    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext(); 
```

[在此处](https://stackoverflow.com/questions/1309757/blend-two-uiimages)查看更多详细信息

# mysql - 可以在不丢失原始行的情况下“分组”吗？

> ID：12527563
> 
> 赞同：3
> 
> 时间：2012-09-21T09:11:24.627
> 
> 标签：mysql, sql

我有一个这样的查询：

```
ID    |    name                     |    commentsCount
1     |    mysql for dummies        |    33
2     |    mysql beginners guide    |    22

SELECT
    ...,
    commentsCount    // will return 33 for first row, 22 for second one
FROM
    mycontents
WHERE
    name LIKE "%mysql%" 
```

我还想知道所有行的评论总数：

```
SELECT
    ...,
    SUM(commentsCount) AS commentsCountAggregate    // should return 55
FROM
    mycontents
WHERE
    name LIKE "%mysql%" 
```

但这显然返回单行的总数。

现在我只想将这两个查询合并为一个，

因为我的实际查询执行起来非常繁重（它使用布尔全文搜索、子字符串偏移搜索，可悲的是还有更多），所以我不想执行两次

有没有办法在不进行两次 SELECT 的情况下获得评论总数？

**！！欢迎自定义功能！**

**也欢迎使用可变用法，我从未使用过它们...**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:15:45.777

您可以将中间结果缓存到临时表中，然后对该表进行求和

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:36:18.603

一个明显的解决方案是将中间结果存储在另一个“临时”表中，然后在第二步中执行聚合。

另一种解决方案是准备一个查找表，其中包含您需要的总和（但显然需要一些分组 ID，我称之为`MASTER_ID`），如下所示：

```
CREATE TABLE comm_lkp AS
SELECT MASTER_ID, SUM(commentsCount) as cnt
FROM mycontents
GROUP BY MASTER_ID 
```

还要在该表的 column 上创建一个索引`MASTER_ID`。稍后，您可以像这样修改您的查询：

```
SELECT
    ...,
    commentsCount,
    cnt as commentsSum
FROM
    mycontents as a
        JOIN comm_lkp as b ON (a.MASTER_ID=b.MASTER_ID)
WHERE
    name LIKE "%mysql%" 
```

只要查找表相对较小，它也不应该影响您的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T09:20:26.667

一个 ID 字段上的 GROUP BY 可能会起作用。然后，这将为您提供每个 ID 的 SUM(commentsCount)。

您问题中的查询不够详细，无法知道 ID 字段应该来自您的哪些字段/表。

# batch-file - 自动复制文件而不覆盖，而是创建编号的文件

> ID：12527565
> 
> 赞同：4
> 
> 时间：2012-09-21T09:11:37.410
> 
> 标签：batch-file, vbscript, xcopy, robocopy

我需要定期复制文件，例如每小时一次，所以我尝试设置一个 xcopy 批处理，说它应该将需要复制的文件复制到另一个文件夹。现在，当它复制时，它会覆盖不应该做的文件。

复制文件时，它应该创建一个新文件，命名为 File.txt、File-COPY1.txt、File-COPY2.txt 或类似名称。

有什么办法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:36:59.713

您只需在文件名中添加时间戳，即可为每次运行创建单独的文件。像这样的东西：

```
XCOPY "File.txt" "[TargetDir]\File1_%time:~0,2%_%time:~3,2%_%time:~6,2%.txt" 
```

这将解析为一个文件名，该文件名读取为`File1_11_30_05.txt`假定复制操作发生在 11:30:05。该`%time:~0,2%`部分从存储在变量中的时间字符串中提取 2 位数字`%time%`。

此外，您还可以以相同的方式添加日期。`%date%` 您可以为此目的使用该变量。

如果你真的需要一个模式`File-COPY1.txt`，`File-COPY2.txt`等等。这需要更多的工作。告诉我们时间戳方法是否不够。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T11:26:15.627

此批处理采用两个目录的名称，相对或显式，并将第一个目录中的所有文件复制到第二个目录，但在文件名和扩展名之间添加 -#（其中 # 是文件在第二个目录）。因此，如果只有一个文件 ( )从 dir1 复制到 dir2，但它已被复制 4 次，则 dir2 将包含 4个`MISC.txt`文件：`MISC-1.txt` `MISC-2.txt` `MISC-3.txt``MISC-4.txt`

像这样使用`zcopy.bat`调用它`zcopy fromDir toDir`

`zcopy.bat`

```
@echo off
if "%1"=="" goto :eof
if "%1"=="/?" type %~dpnx0 & goto :eof
if "%2"=="" goto :eof
if not exist %2 md %2
setlocal enableDelayedExpansion
for %%x in (%1\*.*) do (
  set this=
  set count=1
  if "%%~xx"=="" (
    set backstop=.
  ) else (
    set backstop=
  )
  for /f %%y in ('dir /b /a:-d /o:n "%2\%%~nx-*%%~xx!backstop!" 2^>nul') do ( 
    set this=%%~nxy
  )
  if not "!this!"=="" (
    set count=!this:%%~nx-=!
    if "%%~xx"=="" (
      set /a count=!count!+1
    ) else (
      set /a count=!count:%%~xx=! + 1
    )
  )
  set target=%%~nx-!count!%%~xx
  echo copy "%%x" "%2\!target!"
  copy "%%x" "%2\!target!" > nul 2>&1
) 
```

如果该目录`%2`不存在，上面的代码将创建它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T17:54:16.927

我每天都用它来备份文件。

```
 set aa=%date:~4,2%%date:~7,2%%date:~12,2%
    copy filename.txt c:\backupfolder\filename%aa%.txt 
```

希望对一些人有所帮助。斯科特……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T09:20:49.557

迭代文件名，即每次给出一些新名称。您可以简单地附加数字。
**使用一个计数器，每次递增它&递增的计数器与文件名连接**

# ruby - I18n.translate(:countries) 不返回某些语言环境的国家/地区

> ID：12527571
> 
> 赞同：0
> 
> 时间：2012-09-21T09:11:56.660
> 
> 标签：ruby, ruby-on-rails-3, internationalization, i18n-gem

我有一个非常奇怪的问题。我有 6 个语言环境（en、ca、es、es_PE、es_MX、es_Cl）

如果我键入`I18n.translate(:countries)`它返回某些语言环境和其他语言环境的国家/地区，它会返回：`"translation missing: es-PE.countries"`

我在 config/locales 中有 6 个国家/地区文件，称为：

```
localized_country_select.es.rb
localized_country_select.es_MX.rb
localized_country_select.es_PE.rb
localized_country_select.en.rb
etc etc 
```

这一切都发生在捆绑更新之后，我在本地化的国家/地区文件中找不到一些错误。我什至在一个新应用程序中对其进行了测试，本地化的国家/地区文件运行良好。

这个问题昨天困扰了我几个小时，真的没有任何线索......我们将不胜感激。

一些信息：

宝石文件：

来源“http://rubygems.org”

```
gem 'rails', '~> 3.1.2'
gem 'rack', '~> 1.3.5'

gem 'puma'

group :production do
  gem 'unicorn'
end

gem 'bcrypt-ruby', '~> 3.0.0'

gem 'yajl-ruby' # Speedy JSON
gem 'couchrest_model', git: 'https://github.com/samlown/couchrest_model.git'

# Asset template engines
group 'assets' do
  gem 'sass-rails', '3.1.4'
  gem 'haml-rails'
  gem 'coffee-script'
  gem 'uglifier'
  gem "compass-rails"
end

gem 'jquery-rails'

gem 'therubyracer', :require => false

gem 'geokit'
gem 'geocoder'
gem 'pr_geohash'

gem 'roadie'

gem "gravatar", "~> 1.0"

# SMS related gubbins
gem "e164"
gem "textmagic"

gem 'formtastic'

# Handle money gracefully
gem 'money', '~> 5.0.0'
# For exchange rates
gem 'money-open-exchange-rates', git: "git://github.com/MaxiMobility/money-open-exchange-rates.git"

gem 'state_machine'

gem 'airbrake'

gem 'adyen'

gem 'spreadsheet'

gem 'gettext_i18n_rails'
gem 'localized_country_select', :git => 'https://github.com/samlown/localized_country_select.git', :branch => 'master'

gem 'bluecloth'

gem 'resque', :require => 'resque/server'
gem 'resque_mailer'
gem 'resque-timeout'

gem 'aws-ses', :require => 'aws/ses'#, :git => "http://github.com/teeparham/aws-ses.git", :ref => "eca27d0517"

gem 'twitter'

gem 'kaminari'

gem 'carrierwave'
gem 'fog'
gem 'mini_magick'

gem 'prawn'

gem 'useragent'

# Authorization
gem 'cancan'

# Solves the pain of uploading files + AJAX
gem "remotipart"

gem 'whenever', :require => false

group :development do
  gem 'web_translate_it', :require => false
  gem 'nifty-generators'
  gem 'rspec-rails', '~> 2.6'
  gem 'thin'

  gem 'debugger'

  # Deployments
  gem 'capistrano'
  gem 'capistrano-ext'
  gem "capistrano_rsync_with_remote_cache", "~> 2.4.0"

  # Used for compiling .po and .mo files
  gem 'gettext', '>=1.9.3', :require => false
  gem 'ruby_parser', :require => false

  # Used by localised_country_select to import languages
  gem 'hpricot'

  # Testing javascript
  gem "jasminerice"
  gem 'headless'
end

group :test do
  # Pretty printed test output
  gem 'turn', :require => false
  gem 'steak'
  gem 'rack-test'
  gem 'rspec'
  gem 'factory_girl_rails'
  gem 'autotest'
  gem 'rspec-rails', '~> 2.6'
  gem 'guard-rspec'
  gem 'capybara'
  # Ensure QT kit is installed: brew install qt
  gem 'capybara-webkit'
  gem 'launchy'
  # Avoid RubyGems 1.8 issues with this gem:
  gem 'ZenTest', '~> 4.5.0'
  # Testing javascript
  gem "jasminerice"
end 
```

这是我的包更新的差异（最大的变化是 Rails 3.1.8）。

宝石文件：

```
-gem 'rails', '3.1.2'
+gem 'rails', '~> 3.1.2'

group 'assets' do
-  gem 'sass-rails'
+  gem 'sass-rails', '3.1.4'
end 
```

Gemfile.lock

```
-    Ascii85 (1.0.1)
+    Ascii85 (1.0.2)
+    actionmailer (3.1.8)
+      actionpack (= 3.1.8)
+      mail (~> 2.3.3)
+    actionpack (3.1.8)
+      activemodel (= 3.1.8)
+      activesupport (= 3.1.8)
-      rack (~> 1.3.5)
-      rack-cache (~> 1.1)
+      rack (~> 1.3.6)
+      rack-cache (~> 1.2)
-      sprockets (~> 2.1.0)
-    activemodel (3.1.2)
-      activesupport (= 3.1.2)
+      sprockets (~> 2.0.4)
+    activemodel (3.1.8)
+      activesupport (= 3.1.8)
-    activerecord (3.1.2)
-      activemodel (= 3.1.2)
-      activesupport (= 3.1.2)
-      arel (~> 2.2.1)
+    activerecord (3.1.8)
+      activemodel (= 3.1.8)
+      activesupport (= 3.1.8)
+      arel (~> 2.2.3)
-    activeresource (3.1.2)
-      activemodel (= 3.1.2)
-      activesupport (= 3.1.2)
-    activesupport (3.1.2)
-      multi_json (~> 1.0)
-    addressable (2.2.8)
-    adyen (1.3.0)
-    airbrake (3.0.5)
-      activesupport
+    activeresource (3.1.8)
+      activemodel (= 3.1.8)
+      activesupport (= 3.1.8)
+    activesupport (3.1.8)
+      multi_json (>= 1.0, < 1.3)
+    addressable (2.3.2)
+    adyen (1.3.1)
+    airbrake (3.1.4)
-    ansi (1.3.0)
+      girl_friday
+    ansi (1.4.3)
-    cancan (1.6.7)
-    capistrano (2.11.2)
+    cancan (1.6.8)
+    capistrano (2.13.4)
-    capybara (1.1.1)
+    capybara (1.1.2)
-    capybara-webkit (0.12.0)
+    capybara-webkit (0.12.1)
-    chunky_png (1.2.5)
+    chunky_png (1.2.6)
-    coffee-script-source (1.1.2)
+    coffee-script-source (1.3.3)
+    connection_pool (0.9.2)
-    debugger (1.1.3)
+    debugger (1.2.0)
-      debugger-ruby_core_source (~> 1.1.2)
-    debugger-linecache (1.1.1)
+      debugger-ruby_core_source (~> 1.1.3)
+    debugger-linecache (1.1.2)
-    debugger-ruby_core_source (1.1.2)
+    debugger-ruby_core_source (1.1.3)
-    e164 (0.3.1)
+    e164 (0.3.2)
-    execjs (1.2.9)
+    execjs (1.4.0)
-    factory_girl (2.3.0)
-      activesupport
-    factory_girl_rails (1.4.0)
-      factory_girl (~> 2.3.0)
+    factory_girl (4.1.0)
+      activesupport (>= 3.0.0)
+    factory_girl_rails (4.1.0)
+      factory_girl (~> 4.1.0)
-    fast_gettext (0.6.2)
+    fast_gettext (0.6.10)
-    fog (1.5.0)
+    fog (1.6.0)
-    formtastic (2.2.0)
+    formtastic (2.2.1)
-    geocoder (1.1.0)
-    geokit (1.6.0)
-    gettext (2.1.0)
-      locale (>= 2.0.5)
-    gettext_i18n_rails (0.3.0)
-      fast_gettext
+    geocoder (1.1.3)
+    geokit (1.6.5)
+      multi_json
+    gettext (2.3.1)
+      locale
+    gettext_i18n_rails (0.7.1)
+      fast_gettext (>= 0.4.8)
+    girl_friday (0.10.0)
+      connection_pool (~> 0.9.0)
-    guard (1.0.0)
-      ffi (>= 0.5.0)
-      thor (~> 0.14.6)
-    guard-rspec (0.6.0)
-      guard (>= 0.10.0)
+    guard (1.3.2)
+      listen (>= 0.4.2)
+      thor (>= 0.14.6)
+    guard-rspec (1.2.1)
+      guard (>= 1.1)
+    hashery (2.0.1)
-    highline (1.6.11)
+    highline (1.6.15)
-    httparty (0.8.1)
-      multi_json
+    httparty (0.9.0)
+      multi_json (~> 1.0)
-    kaminari (0.12.4)
-      rails (>= 3.0.0)
+    kaminari (0.14.1)
+      actionpack (>= 3.0.0)
+      activesupport (>= 3.0.0)
-    launchy (2.0.5)
-      addressable (~> 2.2.6)
+    launchy (2.1.2)
+      addressable (~> 2.3)
-    locale (2.0.5)
+    listen (0.5.1)
+    locale (2.0.8)
-    mini_magick (3.3)
-      subexec (~> 0.1.0)
-    mocha (0.10.0)
+    mini_magick (3.4)
+      subexec (~> 0.2.1)
+    mocha (0.12.4)
-    multi_json (1.3.6)
+    multi_json (1.2.0)
-    pdf-reader (1.0.0)
+    pdf-reader (1.2.0)
+      hashery (~> 2.0)
-    puma (1.6.2)
+    puma (1.6.3)
-    rails (3.1.2)
-      actionmailer (= 3.1.2)
-      actionpack (= 3.1.2)
-      activerecord (= 3.1.2)
-      activeresource (= 3.1.2)
-      activesupport (= 3.1.2)
+    rails (3.1.8)
+      actionmailer (= 3.1.8)
+      actionpack (= 3.1.8)
+      activerecord (= 3.1.8)
+      activeresource (= 3.1.8)
+      activesupport (= 3.1.8)
-      railties (= 3.1.2)
-    railties (3.1.2)
-      actionpack (= 3.1.2)
-      activesupport (= 3.1.2)
+      railties (= 3.1.8)
+    railties (3.1.8)
+      actionpack (= 3.1.8)
+      activesupport (= 3.1.8)
-    redis (2.2.2)
-    redis-namespace (1.0.3)
-      redis (< 3.0.0)
+    redis (3.0.1)
+    redis-namespace (1.2.1)
+      redis (~> 3.0.0)
-    resque (1.20.0)
+    resque (1.22.0)
-      redis-namespace (~> 1.0.2)
+      redis-namespace (~> 1.0)
-    resque_mailer (2.0.2)
-      actionmailer (>= 3.0.0)
-      resque (>= 1.2.3)
+    resque_mailer (2.1.0)
+      actionmailer (~> 3.0)
-    rspec (2.8.0)
-      rspec-core (~> 2.8.0)
-      rspec-expectations (~> 2.8.0)
-      rspec-mocks (~> 2.8.0)
-    rspec-core (2.8.0)
-    rspec-expectations (2.8.0)
-      diff-lcs (~> 1.1.2)
-    rspec-mocks (2.8.0)
-    rspec-rails (2.8.1)
+    rspec (2.11.0)
+      rspec-core (~> 2.11.0)
+      rspec-expectations (~> 2.11.0)
+      rspec-mocks (~> 2.11.0)
+    rspec-core (2.11.1)
+    rspec-expectations (2.11.3)
+      diff-lcs (~> 1.1.3)
+    rspec-mocks (2.11.2)
+    rspec-rails (2.11.0)
-      rspec (~> 2.8.0)
+      rspec (~> 2.11.0)
-    ruby-ole (1.2.11.3)
-    ruby-rc4 (0.1.3)
+    ruby-ole (1.2.11.4)
+    ruby-rc4 (0.1.5)
-    sass-rails (3.1.6)
+    sass-rails (3.1.4)
-      sass (>= 3.1.10)
+      sass (>= 3.1.4)
+      sprockets (~> 2.0.0)
-    sexp_processor (3.0.7)
+    sexp_processor (3.2.0)
-    sinatra (1.3.2)
+    sinatra (1.3.3)
-    spreadsheet (0.6.8)
+    spreadsheet (0.7.3)
-    sprockets (2.1.3)
+    sprockets (2.0.4)
-    state_machine (1.0.2)
+    state_machine (1.1.2)
-    subexec (0.1.0)
+    subexec (0.2.2)
-    therubyracer (0.9.10)
+    therubyracer (0.10.2)
-    turn (0.8.3)
+    turn (0.9.6)
-    twitter (3.7.0)
-      faraday (~> 0.8)
-      multi_json (~> 1.3)
-      simple_oauth (~> 0.1.6)
+    twitter (2.2.0)
+      activesupport (>= 2.3.9, < 4)
+      faraday (~> 0.7)
+      multi_json (~> 1.0)
+      simple_oauth (~> 0.1)
-    uglifier (1.0.3)
+    uglifier (1.3.0)
-      multi_json (>= 1.0.2)
+      multi_json (~> 1.0, >= 1.0.2)
-    useragent (0.4.6)
+    useragent (0.4.10)
-    web_translate_it (1.10.0)
+    web_translate_it (2.0.4)
+      json
-  rails (= 3.1.2)
+  rails (~> 3.1.2)
-  sass-rails
+  sass-rails (= 3.1.4) 
```

我的语言环境文件：

本地化国家/地区.es.rb

```
 #encoding: UTF-8
    { :es_CL => {

        :countries => {
                :AC => "Isla de la Ascensión",
                :AD => "Andorra",
                :AE => "Emiratos Árabes Unidos",
                :AF => "Afganistán",
                :AG => "Antigua y Barbuda",
                :AI => "Anguila",
                :AL => "Albania",
                :AM => "Armenia",
                :AN => "Antillas Neerlandesas",
                :AO => "Angola",
                :AQ => "Antártida",
                :AR => "Argentina",
                :AS => "Samoa Americana",
                :AT => "Austria",
                :AU => "Australia",
                :AW => "Aruba",
                :AX => "Islas Åland",
                :AZ => "Azerbaiyán",
                :BA => "Bosnia-Herzegovina",
                :BB => "Barbados",
                :BD => "Bangladesh",
                :BE => "Bélgica",
                :BF => "Burkina Faso",
                :BG => "Bulgaria",
                :BH => "Bahréin",
                :BI => "Burundi",
                :BJ => "Benín",
                :BL => "San Bartolomé",
                :BM => "Bermudas",
                :BN => "Brunéi",
                :BO => "Bolivia",
                :BQ => "BQ",
                :BR => "Brasil",
                :BS => "Bahamas",
                :BT => "Bután",
                :BV => "Isla Bouvet",
                :BW => "Botsuana",
                :BY => "Bielorrusia",
                :BZ => "Belice",
                :CA => "Canadá",
                :CC => "Islas Cocos",
                :CD => "República Democrática del Congo",
                :CF => "República Centroafricana",
                :CG => "Congo - Brazzaville",
                :CH => "Suiza",
                :CI => "Costa de Marfil",
                :CK => "Islas Cook",
                :CL => "Chile",
                :CM => "Camerún",
                :CN => "China",
                :CO => "Colombia",
                :CP => "Isla Clipperton",
                :CR => "Costa Rica",
                :CS => "Serbia y Montenegro",
                :CU => "Cuba",
                :CV => "Cabo Verde",
                :CW => "CW",
                :CX => "Isla Christmas",
                :CY => "Chipre",
                :CZ => "República Checa",
                :DE => "Alemania",
                :DG => "Diego García",
                :DJ => "Yibuti",
                :DK => "Dinamarca",
                :DM => "Dominica",
                :DO => "República Dominicana",
                :DZ => "Argelia",
                :EA => "Ceuta y Melilla",
                :EC => "Ecuador",
                :EE => "Estonia",
                :EG => "Egipto",
                :EH => "Sáhara Occidental",
                :ER => "Eritrea",
                :ES => "España",
                :ET => "Etiopía",
                :EU => "Unión Europea",
                :FI => "Finlandia",
                :FJ => "Fiyi",
                :FK => "Islas Malvinas",
                :FM => "Micronesia",
                :FO => "Islas Feroe",
                :FR => "Francia",
                :GA => "Gabón",
                :GB => "Reino Unido",
                :GD => "Granada",
                :GE => "Georgia",
                :GF => "Guayana Francesa",
                :GG => "Guernsey",
                :GH => "Ghana",
                :GI => "Gibraltar",
                :GL => "Groenlandia",
                :GM => "Gambia",
                :GN => "Guinea",
                :GP => "Guadalupe",
                :GQ => "Guinea Ecuatorial",
                :GR => "Grecia",
                :GS => "Islas Georgia del Sur y Sandwich del Sur",
                :GT => "Guatemala",
                :GU => "Guam",
                :GW => "Guinea-Bissau",
                :GY => "Guyana",
                :HK => "Región Administrativa Especial de Hong Kong de la República Popular China",
                :HM => "Islas Heard y McDonald",
                :HN => "Honduras",
                :HR => "Croacia",
                :HT => "Haití",
                :HU => "Hungría",
                :IC => "Islas Canarias",
                :ID => "Indonesia",
                :IE => "Irlanda",
                :IL => "Israel",
                :IM => "Isla de Man",
                :IN => "India",
                :IO => "Territorio Británico del Océano Índico",
                :IQ => "Iraq",
                :IR => "Irán",
                :IS => "Islandia",
                :IT => "Italia",
                :JE => "Jersey",
                :JM => "Jamaica",
                :JO => "Jordania",
                :JP => "Japón",
                :KE => "Kenia",
                :KG => "Kirguistán",
                :KH => "Camboya",
                :KI => "Kiribati",
                :KM => "Comoras",
                :KN => "San Cristóbal y Nieves",
                :KP => "Corea del Norte",
                :KR => "Corea del Sur",
                :KW => "Kuwait",
                :KY => "Islas Caimán",
                :KZ => "Kazajistán",
                :LA => "Laos",
                :LB => "Líbano",
                :LC => "Santa Lucía",
                :LI => "Liechtenstein",
                :LK => "Sri Lanka",
                :LR => "Liberia",
                :LS => "Lesoto",
                :LT => "Lituania",
                :LU => "Luxemburgo",
                :LV => "Letonia",
                :LY => "Libia",
                :MA => "Marruecos",
                :MC => "Mónaco",
                :MD => "Moldavia",
                :ME => "Montenegro",
                :MF => "San Martín",
                :MG => "Madagascar",
                :MH => "Islas Marshall",
                :MK => "Macedonia",
                :ML => "Mali",
                :MM => "Myanmar [Birmania]",
                :MN => "Mongolia",
                :MO => "Región Administrativa Especial de Macao de la República Popular China",
                :MP => "Islas Marianas del Norte",
                :MQ => "Martinica",
                :MR => "Mauritania",
                :MS => "Montserrat",
                :MT => "Malta",
                :MU => "Mauricio",
                :MV => "Maldivas",
                :MW => "Malaui",
                :MX => "México",
                :MY => "Malasia",
                :MZ => "Mozambique",
                :NA => "Namibia",
                :NC => "Nueva Caledonia",
                :NE => "Níger",
                :NF => "Isla Norfolk",
                :NG => "Nigeria",
                :NI => "Nicaragua",
                :NL => "Países Bajos",
                :NO => "Noruega",
                :NP => "Nepal",
                :NR => "Nauru",
                :NU => "Isla Niue",
                :NZ => "Nueva Zelanda",
                :OM => "Omán",
                :PA => "Panamá",
                :PE => "Perú",
                :PF => "Polinesia Francesa",
                :PG => "Papúa Nueva Guinea",
                :PH => "Filipinas",
                :PK => "Pakistán",
                :PL => "Polonia",
                :PM => "San Pedro y Miquelón",
                :PN => "Islas Pitcairn",
                :PR => "Puerto Rico",
                :PS => "Territorios Palestinos",
                :PT => "Portugal",
                :PW => "Palau",
                :PY => "Paraguay",
                :QA => "Qatar",
                :QO => "Territorios alejados de Oceanía",
                :RE => "Reunión",
                :RO => "Rumanía",
                :RS => "Serbia",
                :RU => "Rusia",
                :RW => "Ruanda",
                :SA => "Arabia Saudí",
                :SB => "Islas Salomón",
                :SC => "Seychelles",
                :SD => "Sudán",
                :SE => "Suecia",
                :SG => "Singapur",
                :SH => "Santa Elena",
                :SI => "Eslovenia",
                :SJ => "Svalbard y Jan Mayen",
                :SK => "Eslovaquia",
                :SL => "Sierra Leona",
                :SM => "San Marino",
                :SN => "Senegal",
                :SO => "Somalia",
                :SR => "Surinam",
                :SS => "SS",
                :ST => "Santo Tomé y Príncipe",
                :SV => "El Salvador",
                :SX => "Sint Maarten",
                :SY => "Siria",
                :SZ => "Suazilandia",
                :TA => "Tristán da Cunha",
                :TC => "Islas Turcas y Caicos",
                :TD => "Chad",
                :TF => "Territorios Australes Franceses",
                :TG => "Togo",
                :TH => "Tailandia",
                :TJ => "Tayikistán",
                :TK => "Tokelau",
                :TL => "Timor Oriental",
                :TM => "Turkmenistán",
                :TN => "Túnez",
                :TO => "Tonga",
                :TR => "Turquía",
                :TT => "Trinidad y Tobago",
                :TV => "Tuvalu",
                :TW => "Taiwán",
                :TZ => "Tanzania",
                :UA => "Ucrania",
                :UG => "Uganda",
                :UM => "Islas menores alejadas de los Estados Unidos",
                :US => "Estados Unidos",
                :UY => "Uruguay",
                :UZ => "Uzbekistán",
                :VA => "Ciudad del Vaticano",
                :VC => "San Vicente y las Granadinas",
                :VE => "Venezuela",
                :VG => "Islas Vírgenes Británicas",
                :VI => "Islas Vírgenes de los Estados Unidos",
                :VN => "Vietnam",
                :VU => "Vanuatu",
                :WF => "Wallis y Futuna",
                :WS => "Samoa",
                :YE => "Yemen",
                :YT => "Mayotte",
                :ZA => "Sudáfrica",
                :ZM => "Zambia",
                :ZW => "Zimbabue",
                :ZZ => "Región desconocida"
        }

      }
    } 
```

本地化_country.es_PE.rb

```
 #encoding: UTF-8
    { :es_PE => {

        :countries => {
                :AC => "Isla de la Ascensión",
                :AD => "Andorra",
                :AE => "Emiratos Árabes Unidos",
                :AF => "Afganistán",
                :AG => "Antigua y Barbuda",
                :AI => "Anguila",
                :AL => "Albania",
                :AM => "Armenia",
                :AN => "Antillas Neerlandesas",
                :AO => "Angola",
                :AQ => "Antártida",
                :AR => "Argentina",
                :AS => "Samoa Americana",
                :AT => "Austria",
                :AU => "Australia",
                :AW => "Aruba",
                :AX => "Islas Åland",
                :AZ => "Azerbaiyán",
                :BA => "Bosnia-Herzegovina",
                :BB => "Barbados",
                :BD => "Bangladesh",
                :BE => "Bélgica",
                :BF => "Burkina Faso",
                :BG => "Bulgaria",
                :BH => "Bahréin",
                :BI => "Burundi",
                :BJ => "Benín",
                :BL => "San Bartolomé",
                :BM => "Bermudas",
                :BN => "Brunéi",
                :BO => "Bolivia",
                :BQ => "BQ",
                :BR => "Brasil",
                :BS => "Bahamas",
                :BT => "Bután",
                :BV => "Isla Bouvet",
                :BW => "Botsuana",
                :BY => "Bielorrusia",
                :BZ => "Belice",
                :CA => "Canadá",
                :CC => "Islas Cocos",
                :CD => "República Democrática del Congo",
                :CF => "República Centroafricana",
                :CG => "Congo - Brazzaville",
                :CH => "Suiza",
                :CI => "Costa de Marfil",
                :CK => "Islas Cook",
                :CL => "Chile",
                :CM => "Camerún",
                :CN => "China",
                :CO => "Colombia",
                :CP => "Isla Clipperton",
                :CR => "Costa Rica",
                :CS => "Serbia y Montenegro",
                :CU => "Cuba",
                :CV => "Cabo Verde",
                :CW => "CW",
                :CX => "Isla Christmas",
                :CY => "Chipre",
                :CZ => "República Checa",
                :DE => "Alemania",
                :DG => "Diego García",
                :DJ => "Yibuti",
                :DK => "Dinamarca",
                :DM => "Dominica",
                :DO => "República Dominicana",
                :DZ => "Argelia",
                :EA => "Ceuta y Melilla",
                :EC => "Ecuador",
                :EE => "Estonia",
                :EG => "Egipto",
                :EH => "Sáhara Occidental",
                :ER => "Eritrea",
                :ES => "España",
                :ET => "Etiopía",
                :EU => "Unión Europea",
                :FI => "Finlandia",
                :FJ => "Fiyi",
                :FK => "Islas Malvinas",
                :FM => "Micronesia",
                :FO => "Islas Feroe",
                :FR => "Francia",
                :GA => "Gabón",
                :GB => "Reino Unido",
                :GD => "Granada",
                :GE => "Georgia",
                :GF => "Guayana Francesa",
                :GG => "Guernsey",
                :GH => "Ghana",
                :GI => "Gibraltar",
                :GL => "Groenlandia",
                :GM => "Gambia",
                :GN => "Guinea",
                :GP => "Guadalupe",
                :GQ => "Guinea Ecuatorial",
                :GR => "Grecia",
                :GS => "Islas Georgia del Sur y Sandwich del Sur",
                :GT => "Guatemala",
                :GU => "Guam",
                :GW => "Guinea-Bissau",
                :GY => "Guyana",
                :HK => "Región Administrativa Especial de Hong Kong de la República Popular China",
                :HM => "Islas Heard y McDonald",
                :HN => "Honduras",
                :HR => "Croacia",
                :HT => "Haití",
                :HU => "Hungría",
                :IC => "Islas Canarias",
                :ID => "Indonesia",
                :IE => "Irlanda",
                :IL => "Israel",
                :IM => "Isla de Man",
                :IN => "India",
                :IO => "Territorio Británico del Océano Índico",
                :IQ => "Iraq",
                :IR => "Irán",
                :IS => "Islandia",
                :IT => "Italia",
                :JE => "Jersey",
                :JM => "Jamaica",
                :JO => "Jordania",
                :JP => "Japón",
                :KE => "Kenia",
                :KG => "Kirguistán",
                :KH => "Camboya",
                :KI => "Kiribati",
                :KM => "Comoras",
                :KN => "San Cristóbal y Nieves",
                :KP => "Corea del Norte",
                :KR => "Corea del Sur",
                :KW => "Kuwait",
                :KY => "Islas Caimán",
                :KZ => "Kazajistán",
                :LA => "Laos",
                :LB => "Líbano",
                :LC => "Santa Lucía",
                :LI => "Liechtenstein",
                :LK => "Sri Lanka",
                :LR => "Liberia",
                :LS => "Lesoto",
                :LT => "Lituania",
                :LU => "Luxemburgo",
                :LV => "Letonia",
                :LY => "Libia",
                :MA => "Marruecos",
                :MC => "Mónaco",
                :MD => "Moldavia",
                :ME => "Montenegro",
                :MF => "San Martín",
                :MG => "Madagascar",
                :MH => "Islas Marshall",
                :MK => "Macedonia",
                :ML => "Mali",
                :MM => "Myanmar [Birmania]",
                :MN => "Mongolia",
                :MO => "Región Administrativa Especial de Macao de la República Popular China",
                :MP => "Islas Marianas del Norte",
                :MQ => "Martinica",
                :MR => "Mauritania",
                :MS => "Montserrat",
                :MT => "Malta",
                :MU => "Mauricio",
                :MV => "Maldivas",
                :MW => "Malaui",
                :MX => "México",
                :MY => "Malasia",
                :MZ => "Mozambique",
                :NA => "Namibia",
                :NC => "Nueva Caledonia",
                :NE => "Níger",
                :NF => "Isla Norfolk",
                :NG => "Nigeria",
                :NI => "Nicaragua",
                :NL => "Países Bajos",
                :NO => "Noruega",
                :NP => "Nepal",
                :NR => "Nauru",
                :NU => "Isla Niue",
                :NZ => "Nueva Zelanda",
                :OM => "Omán",
                :PA => "Panamá",
                :PE => "Perú",
                :PF => "Polinesia Francesa",
                :PG => "Papúa Nueva Guinea",
                :PH => "Filipinas",
                :PK => "Pakistán",
                :PL => "Polonia",
                :PM => "San Pedro y Miquelón",
                :PN => "Islas Pitcairn",
                :PR => "Puerto Rico",
                :PS => "Territorios Palestinos",
                :PT => "Portugal",
                :PW => "Palau",
                :PY => "Paraguay",
                :QA => "Qatar",
                :QO => "Territorios alejados de Oceanía",
                :RE => "Reunión",
                :RO => "Rumanía",
                :RS => "Serbia",
                :RU => "Rusia",
                :RW => "Ruanda",
                :SA => "Arabia Saudí",
                :SB => "Islas Salomón",
                :SC => "Seychelles",
                :SD => "Sudán",
                :SE => "Suecia",
                :SG => "Singapur",
                :SH => "Santa Elena",
                :SI => "Eslovenia",
                :SJ => "Svalbard y Jan Mayen",
                :SK => "Eslovaquia",
                :SL => "Sierra Leona",
                :SM => "San Marino",
                :SN => "Senegal",
                :SO => "Somalia",
                :SR => "Surinam",
                :SS => "SS",
                :ST => "Santo Tomé y Príncipe",
                :SV => "El Salvador",
                :SX => "Sint Maarten",
                :SY => "Siria",
                :SZ => "Suazilandia",
                :TA => "Tristán da Cunha",
                :TC => "Islas Turcas y Caicos",
                :TD => "Chad",
                :TF => "Territorios Australes Franceses",
                :TG => "Togo",
                :TH => "Tailandia",
                :TJ => "Tayikistán",
                :TK => "Tokelau",
                :TL => "Timor Oriental",
                :TM => "Turkmenistán",
                :TN => "Túnez",
                :TO => "Tonga",
                :TR => "Turquía",
                :TT => "Trinidad y Tobago",
                :TV => "Tuvalu",
                :TW => "Taiwán",
                :TZ => "Tanzania",
                :UA => "Ucrania",
                :UG => "Uganda",
                :UM => "Islas menores alejadas de los Estados Unidos",
                :US => "Estados Unidos",
                :UY => "Uruguay",
                :UZ => "Uzbekistán",
                :VA => "Ciudad del Vaticano",
                :VC => "San Vicente y las Granadinas",
                :VE => "Venezuela",
                :VG => "Islas Vírgenes Británicas",
                :VI => "Islas Vírgenes de los Estados Unidos",
                :VN => "Vietnam",
                :VU => "Vanuatu",
                :WF => "Wallis y Futuna",
                :WS => "Samoa",
                :YE => "Yemen",
                :YT => "Mayotte",
                :ZA => "Sudáfrica",
                :ZM => "Zambia",
                :ZW => "Zimbabue",
                :ZZ => "Región desconocida"
        }

      }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:07:22.033

你用 . 引用你的错误`translation missing: es-PE.countries`。

该文件名为`localized_country_select.es_PE.rb`

下划线/连字符可能是问题的原因......或者可能只是一个错字。

# hibernate - OSGi 捆绑从类路径错误中获取资源

> ID：12527575
> 
> 赞同：1
> 
> 时间：2012-09-21T09:12:03.407
> 
> 标签：hibernate, jakarta-ee, osgi

我正在编写休眠 dto-mapping osgi 包（用于 glassfish），并且该包没有从类路径中看到资源。

清单文件：

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: Model
Bundle-SymbolicName: com.test.spm.model
Bundle-Version: 1.0.0.qualifier
Bundle-Activator: com.test.spm.model.Activator
Bundle-Vendor: TEST
Bundle-RequiredExecutionEnvironment: JavaSE-1.6
Import-Package: org.osgi.framework;version="1.3.0"
Require-Bundle: org.hibernate.core;bundle-version="4.1.7"
Export-Package: com.test.spm.model,
 com.test.spm.model.dto,
 com.test.spm.model.dto.base,
 com.test.spm.model.util
Bundle-ClassPath: .,
 lib/sqljdbc4.jar 
```

无法从 sqljdbc4.jar 访问文件，错误：

```
Caused by: java.lang.ClassNotFoundException: Could not load requested class : com.microsoft.sqlserver.jdbc.SQLServerDriver 
```

但是这个库存在于导出的 jar 文件中。

我也无法通过类路径访问休眠配置文件和映射文件（找不到类和资源也找不到异常）。但是下一个代码有效：

```
 sessionFactory = new Configuration().configure(HibernateUtil.class.getClassLoader().getResource("hibernate.cfg.xml"))
                    .addURL(HibernateUtil.class.getClassLoader().getResource("mapping/Project.hmb.xml"))
                    .buildSessionFactory(); 
```

我试图调用

```
System.out.println(HibernateUtil.class.getClassLoader().getResource("hibernate.cfg.xml")); 
```

并在 sys out 中看到这个：

```
bundle://376.0:1/hibernate.cfg.xml 
```

谷歌搜索捆绑类路径选项，但我的清单似乎没问题。我需要一些特定的包类路径属性来让我的包看到类路径资源，还是什么？感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:34:37.433

除了包含 jar 库的包之外，Hibernate 无法在其他包中找到任何资源。Hibernate 不知道 OSGI 清单文件并忽略它们，因此您的清单文件是否正确并不重要。

请[在此线程中查看我的答案](https://stackoverflow.com/questions/12471804/osgi-fragment-bundle-with-hibernate-having-runtime-pojos/12480876#12480876)，我在那里提供的解决方案也应该适用于您的问题。

# drupal - 如何为我的 drupal 站点的登录页面添加弹出窗口

> ID：12527576
> 
> 赞同：-1
> 
> 时间：2012-09-21T09:12:02.863
> 
> 标签：drupal

嗨，我想为 drupal 网站的登录页面添加一个弹出窗口，即当用户访问我的网站时，他们应该首先得到弹出窗口。

怎么做？有人可以帮我吗？

在此先感谢， 拉杰什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:57:03.050

1.  使 PHP 可以在节点中使用
2.  添加 <?php drupal_add_js('/path/to/myJavascirpt.js') ?> 到您的主页，打开 PHP
3.  创建文件 /path/to/myJavascirpt.js 的内容：

    alert('欢迎来到我的网站！');

# mysql - MySQL 在 LONGTEXT 列中查找一行文本

> ID：12527578
> 
> 赞同：1
> 
> 时间：2012-09-21T09:12:33.203
> 
> 标签：mysql

如果您知道文本行的开头，如何从 LONGTEXT 列返回段落的行？

```
SELECT 
SUBSTRING('\nA line of text starts here', `paragraphs`)
FROM books 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:22:52.803

通过使用“喜欢”。% 表示后面可以有更多的字符。

```
SELECT paragraphs FROM books WHERE paragraphs LIKE '\nA line of text starts here%' 
```

# objective-c - 如何移动到 popToViewController：从 tabBarController

> ID：12527581
> 
> 赞同：0
> 
> 时间：2012-09-21T09:12:50.303
> 
> 标签：objective-c, uinavigationcontroller, uitabbarcontroller

我的应用程序是 TabBarController，我必须根据按下的选项卡采取不同的操作，所以，我委托 TabBarContoller，我明白了。

现在，如果按下包含 NavigationController 的选项卡，根据数据库值，应该显示的视图是第一个或最后一个，因此在 Tabs.m 中：

```
-(void) tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController
{
 NSArray *viewArrays = [(UINavigationController*)viewController viewControllers];

switch (tabBarController.selectedIndex) {

    case 3:
    {
        NSString *query = @"SELECT * FROM login";
        sqlite3_stmt *statement = [[Database alloc] select:query];

        if(sqlite3_step(statement) == SQLITE_ROW) {
           [(UINavigationController*)viewController popToViewController:[viewArrays objectAtIndex:1] animated:YES];

        }
        sqlite3_finalize(statement);
        break;
    }
    default:
        break;
} 
```

}

问题是 objectAtIndex:1 现在不存在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:19:36.617

**只有至少完成了一次 pushView 才能使用 popView**。使用**NSLog**打印并查看**self.navigationController.viewControllers**中的对象，如果它包含一些对象，则适当地给出您的索引（在范围内），我很困惑你为什么要这样做**(UINavigationController*)viewController**，试试这个

 ****```
[self.navigationController popToViewController:[self.navigationController.viewControllers objectAtIndex:2] animated:YES]; 
```****

# vb.net - 继承自 system.dividebyzeroexception 的异常类

> ID：12527584
> 
> 赞同：1
> 
> 时间：2012-09-21T09:12:58.993
> 
> 标签：vb.net

我创建了一个名为 ZeroException 的继承类，它继承自 System.DivideByZero 类，但是当发生除零异常时，它不会捕获该事件。

```
Class ZeroException
Inherits System.DivideByZero
Public Overrides ReadOnly Property Message() as String
Get 
Return "Divide By Zero"
End Get
End Property
End Class 
```

主要代码：

```
Sub Calc()
dim x as integer=5
dim y as integer=0
dim k as single

Try   
k=x\y 'Integer Division
Catch ex as ZeroException  
Console.WriteLine(ex.Message) 'But I get another message. Not Divide By Zero
End Try

End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T09:45:00.563

您没有捕获自定义异常，而是抛出了一个..所以在这种情况下，您的代码应如下所示：

```
 Try
        k = x \ y 'Integer Division
    Catch ex As DivideByZeroException
        Throw New ZeroException
    End Try 
```

这是一个证明这一点的测试用例。

```
Imports System.Text
Imports Microsoft.VisualStudio.TestTools.UnitTesting

Class ZeroException
    Inherits DivideByZeroException
    Public Overrides ReadOnly Property Message() As String
        Get
            Return "Divide By Zero"
        End Get
    End Property
End Class

<TestClass()> Public Class UnitTest1

    <TestMethod()> Public Sub TestMethod1()
        Try
            MethodThrowsCustomException()
        Catch ex As Exception
            Console.WriteLine(ex.Message)
        End Try
    End Sub

    Public Sub MethodThrowsCustomException()
        Dim x As Integer = 5
        Dim y As Integer = 0
        Dim k As Single

        Try
            k = x \ y 'Integer Division
        Catch ex As DivideByZeroException
            Throw New ZeroException
        End Try

    End Sub

End Class 
```

# java - 如何将 BIRT 2.5 报告升级到 BIRT 4.2

> ID：12527590
> 
> 赞同：0
> 
> 时间：2012-09-21T09:13:26.823
> 
> 标签：java, report, upgrade, birt

我对 BIRT 有一个错误。我想在 BIRT 4.2 中运行一个在 BIRT 2.5 中运行良好的报告，但它给出了错误消息：

```
java.sql.SQLException: Not supported function (Element ID:250) 
```

另外，如何将旧报告升级/转换为 BIRT 4.2

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:48:45.083

通常，所有早期的 BIRT 报告都可以在以后的平台上运行。原始 2.5 报告中可能有一些小错误，这不是问题，但现在导致 4.2 错误。如果您从“布局”视图切换到“XML 源”视图，您可以搜索 ID“250”以缩小导致问题的元素并进行更正。

# xquery - xquery：如何检查元素列表是否存在？

> ID：12527594
> 
> 赞同：1
> 
> 时间：2012-09-21T09:13:33.727
> 
> 标签：xquery

有什么方法可以检查 xml 文档中是否存在元素列表？元素名称按顺序存储，如果 xml 文档包含任何元素（按顺序存储的名称），则返回 YES，否则返回 NO。我尝试了下面的示例，但没有成功。请问有什么建议吗？

```
<book category="COOKING">
   <title lang="en">Everyday Italian</title>
   <author>Giada De Laurentiis</author>
   <year>2005</year>
   <price>30.00</price>
 </book> 
```

让 $doc:=doc("book.xml")/book 让 $fields := ('title','author')

```
return 
    if(doc/*:$fields)   
    then 
    "YES"
    else "NO" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:18:18.853

尝试这个

```
return 
    if($fields[not(.=$doc/*/name())]
    then 
    "No"
    else "YES" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T18:05:20.510

**使用**：

```
if(/*/*/name() = ('title', 'author'))
  then 'YES'
  else 'NO' 
```

**或者，或者**：

```
('YES'[$doc/*/*/name() = $fields], 'NO')[1] 
```

# php - 如何在 PHP 中应用机器学习算法？

> ID：12527595
> 
> 赞同：11
> 
> 时间：2012-09-21T09:13:37.667
> 
> 标签：php, web-applications, machine-learning

如果您在 PHP 上开发 ML 项目，将 PHP 本身用于 ML 算法是否合乎逻辑（我想它会很慢）或者在此类项目中实现 ML 的正确方法是什么。我需要用 Mahout 桥接另一种语言，如 Java 吗？如果是这种情况，我该如何桥接？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T09:33:52.353

由于优秀的库的可用性，机器学习可以在 Java 和 Python 中做得最好。您始终可以将 PHP 用作 Web 前端，因为它做得最好。您可以在 HTTP 上公开 Java/Python 程序并使用 PHP-CURL 或使用上述桥接器之一。首先，确定问题的类型。来自机器学习的维基百科[条目：](http://en.wikipedia.org/wiki/Machine_learning)

1.  神经网络
2.  专家系统
3.  遗传算法
4.  模糊逻辑
5.  贝叶斯网络

对于 Python，我知道[PyML](http://pyml.sourceforge.net/)、PyMC、Orage 等都很好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-21T09:20:10.373

不要从用 PHP 开发代码开始。

首先使用 Matlab 或 Octave 等工具查看数据集。您应该能够在不到 1 天的时间内对数据有所了解。

这将帮助您了解要使用的算法。

Re语言，我见过的大部分东西都用过Java。不确定您是否会在 PHP 中找到尽可能多的已建立的 ML 库。

另请参阅： [我应该在网络项目中使用哪种语言进行人工智能](https://stackoverflow.com/questions/3050450/which-langauge-should-i-use-for-artificial-intelligence-on-web-projects)

# asterisk - Asterisk 在移动电话上没有检测到忙音

> ID：12527601
> 
> 赞同：0
> 
> 时间：2012-09-21T09:13:49.803
> 
> 标签：asterisk

我的星号项目需要帮助。

我已经使用星号为我的公司设置了 ivr。服务器配置为：星号 10.0

*   数字TE121
*   来自印度信赖通信公司的 E1 PRI。

我的问题是，当有人拨打我的 ivr 号码时，他/她将根据他们提供的 dtmf 输入转接到手机/固定电话号码。

当我将它重定向到固定电话号码时，完美检测到忙/无应答状态并且正在设置 dialstatus 变量。但是，当我将其重定向到手机号码时，未检测到忙状态，并且 Asterisk 将其显示为响铃，直到达到拨号超时。

问题是，在印度的固定电话号码上，音调是由国际电信当局定义的，并且会立即发出。但在手机号码上，接线员会先播放语音文件而不是忙音。然后在大约 20 秒后发出忙音。所以 Asterisk 不会检测到手机号码上的忙音。

因此，如果有解决此问题的技术或路径，请告诉我。是否有任何使用 AFI/AMI 脚本的解决方案，然后它将被应用。

我的 ivr 拨号方案如下所示： 我已因隐私问题更改了分机号码。

```
exten => _2121212,1,GotoIfTime(10:00-19:00,mon-sat,*,*?2121212,2:2121212,4)
exten => _2121212,2,Background(ive1new)
exten => _2121212,3,WaitExten(15)

exten => _2121212,4,Playback(officehours1)
exten => _2121212,5,WaitExten(3)
exten => _2121212,6,Goto(3090700,4)

exten => 0,1,Dial(DAHDI/g2/<mobilenumber here>,30)
exten => 0,2,Goto(2121212-${DIALSTATUS},1)

exten => 1,1,Dial(DAHDI/g2/<mobilenumber here>,20,r)
exten => 1,n,Goto(2121212-${DIALSTATUS},1)

exten => 2,1,Dial(DAHDI/g2/<mobilenumber here>,20,r)
exten => 2,n,Goto(2121212-${DIALSTATUS},1)

exten => 3,1,Dial(DAHDI/g2/<mobilenumber here>,20,r)
exten => 3,n,Goto(2121212-${DIALSTATUS},1)

exten => 9,1,Goto(2121212,2)

exten => 2121212-NOANSWER,1,Dial(DAHDI/g2/<mobilenumber here>,20,r)
exten => 2121212-NOANSWER,2,hangup()

exten => 2121212-BUSY,1,Dial(DAHDI/g2/<mobilenumber here>,20,r)
exten => 2121212-BUSY,2,hangup()

exten => 2121212-CONGESTION,1,Dial(DAHDI/g2/<mobilenumber here>,20,r)
exten => 2121212-CONGESTION,2,hangup()

exten => 2121212-CHANUNAVAIL,1,Dial(DAHDI/g2/<mobilenumber here>,20,r)
exten => 2121212-CHANUNAVAIL,2,hangup() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:20:51.107

您可以使用 AGI 来执行此操作，只需拨打设置超时的号码并检查拨号状态是否为 statis ！=ANSWER 切换到另一个分机或拨打另一个号码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-24T23:56:25.940

我的理解是忙音之前的噪音（包括语音）并不重要，所以我想知道问题是否在于忙音根本不是通常的音调，而是有不同的音调或时间，因此它们不是检测到。我很确定我居住的移动提供商会发生这种情况。

在 chan_dahd.conf 文件中有一个名为“busypattern”的变量，您可以使用它。我

# java - JAutodoc - 添加方法参数的数据类型

> ID：12527602
> 
> 赞同：0
> 
> 时间：2012-09-21T09:13:56.243
> 
> 标签：java, eclipse, javadoc, jautodoc

我不知道如何添加方法参数的数据类型（下例中的“整数”）：

例子：

```
@param idTemplate the id template - Integer 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:53:31.897

javadoc 中没有数据类型的位置。请参阅文档[http://docs.oracle.com/javase/1.5.0/docs/tooldocs/solaris/javadoc.html#@param](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/solaris/javadoc.html#@param)。

当您编译 Javadoc 时，编译器会自动将类型`@param`与其相应名称的描述链接起来。

```
/**
 * @param     a    This is the parameter.
 */
public void foo(int a)
{
...
} 
```

# c# - C# 中的 Google Analytics API - 请求执行失败：https://www.google.com/analytics/feeds/accounts/default

> ID：12527610
> 
> 赞同：2
> 
> 时间：2012-09-21T09:14:41.253
> 
> 标签：c#, google-analytics, gdata, gdata-api

我想访问谷歌分析数据，我从谷歌数据 API SDK 中获得了样本。但这些编码不起作用并引发异常

> 请求执行失败：[https ://www.google.com/analytics/feeds/accounts/default](https://www.google.com/analytics/feeds/accounts/default)

所以我发现这是因为谷歌将它更新到了 v3.0。我搜索了 C# 的更新编码，但我找不到解决方案。

我有同样的问题，但使用 C#。 [使用 GData .NET Analytics API 时引发异常](https://stackoverflow.com/questions/12113204/exception-thrown-when-using-gdata-net-analytics-api)

我尝试按照 Google 开发人员中的说明进行如下更改编码 - [https://developers.google.com/analytics/resources/articles/gdata-migration-guide#appendix_a](https://developers.google.com/analytics/resources/articles/gdata-migration-guide#appendix_a)

```
string userName = this.Username.Text;
string passWord = this.Password.Text;

AnalyticsService service = new AnalyticsService("AnalyticsSampleApp");
service.setUserCredentials(userName, passWord);
string googleAccountWebId = "AIXXXXXXXXXXXXXXXXXXXXXXXXXXX";
string profileFeedUrl = "https://www.googleapis.com/analytics/v2.4/data?key=" + googleAccountWebId;

DataQuery query2 = new DataQuery(profileFeedUrl);
query2.Ids = "12345678";
query2.Metrics = "ga:visits";
query2.Sort = "ga:visits";
query2.GAStartDate = DateTime.Now.AddMonths(-1).AddDays(-2).ToString("2011-08-01");
query2.GAEndDate = DateTime.Now.ToString("2013-09-01");
query2.StartIndex = 1;

DataFeed data = service.Query(query2);

foreach (DataEntry entry in data.Entries)
{
    string st=entry.Metrics[0].Value;       
} 
```

但即使我改变了它，它也会抛出异常

> DataFeed 数据 = service.Query(query2);

这条线。例外情况如下：

> 请求执行失败：[https ://www.googleapis.com/analytics/v2.4/data?key=AIXXXXXXXXXXXXXXXXXXXXXX-8&start-index=1&end-date=2013-09-01&ids=12345678&metrics=ga:visits&sort=ga:visits&start -日期=2011-08-01](https://www.googleapis.com/analytics/v2.4/data?key=AIXXXXXXXXXXXXXXXXXXXXXX-8&start-index=1&end-date=2013-09-01&ids=12345678&metrics=ga:visits&sort=ga:visits&start-date=2011-08-01)

我正在使用以下 DLL

```
Google.GData.Analytics.dll
Google.GData.Client.dll
Google.GData.Extensions.dll 
```

**我的问题：**

1.  我该如何纠正这个错误？

2.  如何访问 Google 分析数据？它是否正确？否则有什么办法呢？例如，我想获取可用的 ProfileId 及其值。（标题和页面视图）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T22:35:48.923

**分析帐户：**

我假设你已经有一个分析帐户，如果你不创建一个，然后在这里注册你的域： [http ://www.google.com/intl/en/analytics/](http://www.google.com/intl/en/analytics/)

**要获取您的 API 密钥，请执行以下操作：**

按照[https://developers.google.com/analytics/resources/articles/gdata-migration-guide](https://developers.google.com/analytics/resources/articles/gdata-migration-guide)上的说明（在 Google API 控制台中创建项目）生成您的密钥一旦您将其设置为查询字符串的一部分向 Google Analytics 服务请求，在这种情况下： **YourAPIkEStringabcdefghijklmno**

**要获取 profileId（代码上的 ID），您应该这样做：**

登录到您的分析帐户，在列表中选择所需的域（蓝色链接），单击管理员按钮，然后在配置文件选项卡上找到配置文件配置子选项卡，在这种情况下，您将找到配置文件 ID，其中包含八个字符长的 ID： **12345678**

**这里有一些 C# 代码可以帮助您获取该 ID 的访问次数：**

```
public string VisitsNumber() 
    {
        string visits = string.Empty;
        string username = "youremailuser@domain.com";
        string pass = "yourpassword";
        string gkey = "?key=YourAPIkEYYourAPIkEYYourAPIkEYYourAPIkE";

    string dataFeedUrl = "https://www.google.com/analytics/feeds/data" + gkey;
    string accountFeedUrl = "https://www.googleapis.com/analytics/v2.4/management/accounts" + gkey;

    AnalyticsService service = new AnalyticsService("WebApp");
    service.setUserCredentials(username, pass);

    DataQuery query1 = new DataQuery(dataFeedUrl);

    query1.Ids = "ga:12345678";
    query1.Metrics = "ga:visits";
    query1.Sort = "ga:visits";

    //You were setting 2013-09-01 and thats an invalid date because it hasn't been reached yet, be sure you set valid dates
    //For start date is better to place an aprox date when you registered the domain on Google Analytics for example January 2nd 2012, for an end date the actual date is enough, no need to go further
    query1.GAStartDate = new DateTime(2012, 1, 2).ToString("yyyy-MM-dd"); 
    query1.GAEndDate = DateTime.Now.ToString("yyyy-MM-dd");
    query1.StartIndex = 1;        

    DataFeed dataFeedVisits = service.Query(query1);

    foreach (DataEntry entry in dataFeedVisits.Entries)
    {
        string st = entry.Title.Text;
        string ss = entry.Metrics[0].Value;
        visits = ss;
    }

    return visits;
}

protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack) 
    {
        Response.Write("Visits:" + this.VisitsNumber());
    }
} 
```

由于 2.4 API 不再那么灵活，我在这里有另一篇文章 hacking it to get profile Id: [Getting an specific ProfileId from registered Accounts using GData .NET Analytics API 2.4](https://stackoverflow.com/questions/12241277/getting-an-specific-profileid-from-registered-accounts-using-gdata-net-analytic/12241278#12241278)如果您需要将代码转换为 C#，您可以使用Telerik 转换器：[http ://converter.telerik.com/](http://converter.telerik.com/)

我认为这足以使用 2.4 API。如果您需要额外的帮助，请告诉我。

# c# - C# 在数据表中的现有 CSV 文件的列中附加数据

> ID：12527611
> 
> 赞同：1
> 
> 时间：2012-09-21T09:14:53.757
> 
> 标签：c#, csv, datatable

我正在尝试将数据附加到现有的 CSV 文件以在 excel 中使用。

我正在检索的数据量非常高，所以我不能只填充数据表然后将其写入 CSV。目前我正在用数据填充表格的每一列，将其写入文件，然后清除表格并重新启动。

这适用于将数据添加到单独列中的 CSV，但它会将新数据添加到下一列中的现有数据下。

这是程序写入 CSV 的方式：

```
 public void Output_CSV()
    {
        StringBuilder sb = new StringBuilder();

        foreach (DataRow row in DataTable.Rows)
        {
            IEnumerable<string> fields = row.ItemArray.Select(field => field.ToString());
            sb.AppendLine(string.Join(",", fields));
        }

        File.AppendAllText(outPut, sb.ToString());

        sb.Clear();
    } 
```

此代码添加表格中的所有数据，包括上一列中的空白单元格，在下面添加当前数据。有没有办法在表中选择一列并将该列中的行添加到 CSV。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:45:31.087

如果我理解正确，您有：

A,B,C

在 CSV 文件中。您想将数据附加到每一行：

A,B,C,D,E,F

你看到的是

A,B,C

然后在下一行：

D,E,F

那是因为 AppendAllText 方法只是写入文件的底部。

要做你想做的事，你需要读取输出文件，解析内容，在正确的点插入额外的数据，然后重新保存文件..

我会尝试将文件加载到流中，读取一行，将新数据附加到行尾，然后将行写入新流（让我们称之为最终输出），重复此操作，直到你解析了所有数据，然后保存最终的输出流。

这假设 CSV 数据在每行的末尾有换行符、回车符或两者都有。

# html - HTML 占位符在 ipad 上是黑色的。我们可以改变它吗？

> ID：12527613
> 
> 赞同：1
> 
> 时间：2012-09-21T09:15:01.197
> 
> 标签：html, ios, ipad, video, mobile-safari

我必须`<video>`在网页中放置一个元素。从 ipad 访问时，页面会显示一个黑色占位符，直到访问者点击播放按钮。

是否可以使它变成白色，就像通常在 css 中做“背景颜色：白色”一样？

编辑：解决此问题的“黑客”：用不透明`.shield`层覆盖视频，并有一个`.play`按钮来启动视频。

```
 $('#intro_video .play').selectable({

            start: function(){

                $('#intro_video .play').fadeOut();
                $('#vid').get(0).play();

                setTimeout(function(){

                    // See HACK03
                    $('#intro_video .shield').fadeOut('slow');
                }, 200);
            }       
        }); 
```

可以很好地包装在浏览器检查中以仅影响移动 Safari：

```
if (navigator.userAgent.match(/(iPod|iPhone|iPad)/)) { ... } 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:21:12.440

您可以在顶部放置一个带有播放按钮图像的元素，并编写脚本使其在触摸时消失。也许不是那么优雅，但它确实有效。

# c# - DevExpress ComboBoxEdit 数据源

> ID：12527615
> 
> 赞同：3
> 
> 时间：2012-09-21T09:15:09.467
> 
> 标签：c#, winforms, devexpress

我正在使用 DevExpress ComboBoxEdit，我需要将列表绑定到它的数据源。但是正如我所见，没有方法可以将数据源添加到控件中，因此我将每个项添加到控件中，例如

```
foreach (var item in list) {
    comboBoxEdit1.Properties.Items.Add(item);
} 
```

它有效，但如果有大量数据，它会很慢。
有没有办法可以直接绑定列表来控制？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T04:28:22.473

无法将 ComboBoxEdit 直接绑定到数据源，因为 ComboBoxEdit 旨在在您需要一组简单的预定义值时使用。当您需要使用数据源时，请使用[LookUpEdit 。](http://help.devexpress.com/#WindowsForms/clsDevExpressXtraEditorsLookUpEdittopic)
您可以使用[ComboBoxItemCollection.BeginUpdate](http://help.devexpress.com/#WindowsForms/DevExpressXtraEditorsControlsComboBoxItemCollection_BeginUpdatetopic)和[ComboBoxItemCollection.EndUpdate](http://help.devexpress.com/#WindowsForms/DevExpressXtraEditorsControlsComboBoxItemCollection_EndUpdatetopic)方法来防止在更改项目集合时过度更新：

```
ComboBoxItemCollection itemsCollection = comboBoxEdit1.Properties.Items;
itemsCollection.BeginUpdate();
try {
    foreach (var item in list) 
        itemsCollection.Add(item);
}
finally {
    itemsCollection.EndUpdate();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-27T11:04:36.480

这是使用 linq one-liner 将项目整体添加到组合框的另一种方法：

```
 comboBoxEdit1.Properties.Items.AddRange(newItems.Select(x => x.SomeStringPropertyHere as object).ToArray()); 
```

.AddRange() 方法负责在内部调用 BeginUpdate()/EndUpdate()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-30T20:12:13.673

另一种方法是通过扩展方法：

```
 public static ComboBoxEdit AddItemsToCombo(this ComboBoxEdit combo, IEnumerable<object> items)
    {
        items.ForEach(i => combo.Properties.Items.Add(i));
        return combo;
    } 
```

# android - GCM 寄存器：阻塞执行直到完成

> ID：12527616
> 
> 赞同：0
> 
> 时间：2012-09-21T09:15:10.817
> 
> 标签：android, block, google-cloud-messaging

我在我的应用程序中使用 GCM。用户要做的第一件事就是登录应用程序。当他发送数据时，如果登录正常，我会调用 GCMRegistrar.register。如果设备注册成功，我将打开一个新活动，否则我想留在同一个活动中并显示错误消息。

我发现的问题是 GCM 寄存器是异步的，我想停止活动的执行，直到它结束。我尝试了以下方法：

```
GCMRegistrar.register(this, SENDER_ID);
GCMApplication app = (GCMApplication) getApplication();
while(!app.isGcm_registered()){
    try {
         Thread.sleep(500);
    } catch (InterruptedException e) {
         e.printStackTrace();
    } 
```

}

注册结束后，我在应用程序类中将 gcm_registered 设置为 true。但是如果我这样做，注册调用被阻止，我的 GCMIntentService 中的 onRegistered 函数永远不会被调用。如果我不阻止执行，则注册成功完成。

在注册结束之前如何阻止活动的执行？

# java - Java序列化 - 进程崩溃后恢复序列化文件

> ID：12527618
> 
> 赞同：1
> 
> 时间：2012-09-21T09:15:11.940
> 
> 标签：java, serialization, crash, objectinputstream

我有以下用例。

*   进程将某些对象序列化为使用`BufferedOutputStream`.
*   写完每个对象后，进程调用`flush()`
*   用例是如果进程在写入对象时崩溃，我想将文件恢复到已成功写入的前一个对象。

我怎样才能反序列化这样的文件？反序列化此类文件时 Java 将如何表现。

*   它会成功反序列化到崩溃前成功写入的对象吗？
*   在读取最后一个部分写入的对象时，会发生什么行为。我怎样才能检测到呢？

**更新1 -**

*   我试图通过在写入对象时手动终止进程来模拟进程崩溃。我已经尝试了大约 10-15 次。每次我能够反序列化文件并且文件没有任何部分对象。

我不确定我的测试是否足够详尽，因此需要进一步的建议。

**Update2 -** Adam 指出了一种可以使用随机截断文件来模拟此类测试的方法。以下是尝试大约 100 次迭代时观察到的行为 -

*   从截断的文件（应该相当于进程崩溃时文件的条件），Java可以成功读取到最后一个完整的对象。
*   在到达最后一个部分写入的对象时，Java 不会抛出任何`StreamCorruptedException`或`IOException`. 它只是抛出`EOFException`指示`EOF`并忽略部分对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:31:36.767

在读取下一个对象之前，是否对每个对象进行反序列化。不会因为后面的对象写入失败或反序列化失败而受到影响

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:32:09.007

我怀疑您在滥用 java 序列化 - 它并不是一种可靠且可恢复的永久存储方式。为此使用数据库。如果必须，您可以使用数据库来存储 java 对象的序列化形式，但这将非常低效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T09:35:36.113

是的，手动测试这种情况（通过终止进程）可能很困难。我建议编写一个测试用例，您可以在其中：

1.  序列化一组对象并将它们写入文件。
2.  打开文件并基本上在随机位置截断它。
3.  尝试加载和反序列化（看看会发生什么）
4.  对其他几个截断位置重复 1\. 到 3.。

这样您就可以确定您正在加载一个损坏的文件并且您的代码可以正确处理它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-21T09:42:03.947

您是否尝试过附加到 ObjectOutputStream？您可以在[**此处**](https://stackoverflow.com/questions/1194656/appending-to-an-objectoutputstream?rq=1)找到解决方案，只需找到解释如何使用附加创建 ObjectOutputStream 的帖子。

# android - 在 android 设备的 Home 按钮单击上关闭当前活动

> ID：12527619
> 
> 赞同：0
> 
> 时间：2012-09-21T09:15:12.453
> 
> 标签：android, android-launcher, android-homebutton

我不想让应用程序在后台运行。当用户在 android 设备上按下 Home 按钮时，当前活动应该完成。

或者当应用程序恢复时，我想知道应用程序已经出现在前台。

我在清单文件的 <application> 标记中创建了接收器：

```
<receiver
        android:name=".HomeKeyReceiver"
        android:enabled="true"
        android:exported="true" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.HOME" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </receiver> 
```

仍然没有调用此接收器。如果调用此接收器，则我可以关闭应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T06:55:32.000

我找到了这样的方法，

当用户按下主页按钮时，当前活动的暂停方法被调用。

在一秒钟的活动进入后台后，如果没有打开其他活动（我使用了全局布尔变量），那么我将消息广播给所有要关闭的活动。

因此，无论哪个活动打开，都将在该接收器上关闭。

这个对我有用。希望它也可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:25:46.157

```
@Override
protected void onUserLeaveHint() {
    super.onUserLeaveHint();
    finish();
} 
```

而且由于它是一个单一的活动，您可以使用`onPause()`,`onStop()`和`onResume()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T09:28:57.557

签出`onUserLeaveHint()`类[`Activity`](http://developer.android.com/reference/android/app/Activity.html#onUserLeaveHint%28%29)..文档说

> 当活动由于用户选择而即将进入后台时，作为活动生命周期的一部分调用。

另请参阅`onUserInteraction()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T09:31:26.260

如果您只想强制您的活动不在后台运行，并且每次都重新创建，则必须覆盖 onStop 方法：

```
enter code here

protected void onStop() {
    super.onStop();
    if (!isFinishing()) {
        finish();
    }
} 
```

# sql - SQL 返回每周的最新日期

> ID：12527621
> 
> 赞同：1
> 
> 时间：2012-09-21T09:15:29.007
> 
> 标签：sql, date, distinct, max

我有返回以下数据的查询：

```
Number  WeekNumber  Date
1111    23          9/11/12 11:01 AM
1111    23          9/11/12 11:58 AM
2222    24          9/17/12 10:14 AM
2222    24          9/18/12 9:52 AM
2222    24          9/19/12 9:46 AM
2222    24          9/20/12 9:42 AM 
```

但是我想要的是获得每周的最新日期，结果应该是：

```
Number  WeekNumber  Date
1111    23          9/11/12 11:58 AM
2222    24          9/20/12 9:42 AM 
```

我可以用什么来获得这个。我曾尝试使用 MAX(DATE) 但我得到的是最新日期，而不是每周的最新日期。我也尝试过 distinct ，但我无法使其与 WHERE 子句一起使用。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T09:18:10.777

```
SELECT Number, WeekNumber, MAX([Date])
FROM TableName
GROUP BY Number, WeekNumber 
```

您已经接近 MAX(Date)，但是您需要按其他详细信息分组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:20:28.327

`Number`您说和之间明显的 1:1 关系`WeekNumber`是您发布的数据的人工制品，并不真正适用于您的实际数据。如果是这种情况，简单的 GROUP BY 不会提供您的答案。

如果您使用的是一种使用分析函数的 RDBMS，这将起作用：

```
select distinct number
       , weeknumber
       , max(date) over (partition by weeknumber) as weekly_max_date
from yourtable; 
```

如果您没有分析，则需要使用相关的子查询：

```
select distinct t.number
       , t.weeknumber
       , q.weekly_max_date
from yourtable t
     join ( select weeknumber, max(date) as weekly_max_date
            from yourtable
            group by weeknumber) q
     on (q.weeknumber = t.weeknumber) 
```

# search - 使用 SOLR WordDelimiterFilterFactory 查询包含连字符的数字不起作用？

> ID：12527626
> 
> 赞同：2
> 
> 时间：2012-09-21T09:15:48.920
> 
> 标签：search, solr

我正在尝试使用 a 配置 solr 4.0-BETA，`WordDelimiterFilterFactory`以便我可以查询包含连字符的数字。

字段值：添加时为“123456-1234” `ssn`。

查询：

“123456-1234”<- 有效（带连字符）
“1234561234”<- 无效（不带连字符）

根据文档（AFAIUI），它应该匹配，因为字段类型有`generateNumberParts`和`catenateNumbers`。

从文档中：

> generateNumberParts="1" 导致生成数字子词："500-42" => "500" "42" catenateNumbers="1" 导致连接数字部分的最大运行次数："500-42" => "50042"

[http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.WordDelimiterFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.WordDelimiterFilterFactory)

我的领域：

```
<fields>
     <field name="ssn" type="text_en_splitting" indexed="true" stored="false" multiValued="false" />
     <field name="ssn_exact" type="string" indexed="true" stored="true" multiValued="false" />
</fields>

<copyField source="ssn" dest="ssn_exact" />
<copyField source="ssn" dest="text" /> 
```

中的过滤器`text_en_splitting`：

```
 <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/> 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:50:29.593

我在本地模式中创建了一个类似的字段，并使用了 Solr Admin 下的分析工具。（`http://localhost:8983/solr/#/collection1/analysis`- 请注意，此 url 假定 solr 正在运行`http://localhost:8983/`并且您的索引已命名`collection1`- 根据需要进行修改）。

我尝试将您的值运行到索引并针对“分析字段名称/字段类型”下拉列表中选择的 text_en_splitting 进行查询。您将从结果中看到，值 1234561234 从未添加为此字段类型的索引项。

However, if you use the text_en_splitting_tight FieldType, then the behavior you want is being produced as the hypen is removed and 1234561234 is a term being added to the index. So I would switch the field type as follows and reindex and you should be set to go.

```
<fields>
 <field name="ssn" type="text_en_splitting_tight" indexed="true" stored="false" multiValued="false" />
 <field name="ssn_exact" type="string" indexed="true" stored="true" multiValued="false" />
</fields>

<copyField source="ssn" dest="ssn_exact" />
<copyField source="ssn" dest="text" /> 
```

# c# - c# 如何使我的列表基于 1 而不是基于 0

> ID：12527639
> 
> 赞同：1
> 
> 时间：2012-09-21T09:16:50.013
> 
> 标签：c#, list

我有一个列表，我已将我的 winform 文本框添加到其中，如下所示，但列表是基于 0 的，因为计数从 0 开始，我如何使其基于 1？

```
List<TextBox> textBoxList = new List<TextBox>();
textBoxList.Add(textBox1);
textBoxList.Add(textBox2);
textBoxList.Add(textBox3);
textBoxList.Add(textBox4);
textBoxList.Add(textBox5);
textBoxList.Add(textBox6);
textBoxList.Add(textBox7);
textBoxList.Add(textBox8);
textBoxList.Add(textBox9);
textBoxList.Add(textBox10);
textBoxList.Add(textBox11);
textBoxList.Add(textBox12); 
```

**我有一个索引，它可以是从 1 到 12 的任何数字，我想使用这个索引来找到正确的文本框，所以索引 6 将是文本框 6 .. 而不是文本框 5**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:19:45.943

您不能使 .NET 的列表基于一个，但您可以 (1) 每次阅读时将索引向下调整 1，或者 (2) 在位置插入一个无用的条目并在`0`此之后忽略它（不推荐）。

您可以从列表继承，并构建自己的数据结构，在进出时调整索引，但这需要更多的努力，更不用说读者之间的混淆了，所以我强烈警告不要这样做.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T09:19:57.963

事情不是这样的 - 列表/数组访问本质上是基于零索引的，并且试图挑战这一点的自定义实现会令人困惑（我个人认为命名一个类来描述它的性质，如果这是它的性质, 会比为其他地方的特定案例做逻辑更难）。

用例是什么？通常，您可以通过增加索引值来表示对用户有意义的“当前”或“计数”值，或者*从*用户角度调整输入以适应需要，但您的具体情况是什么？

如果您想要做的，根据您的更新，通过索引获得控制，您可以从 0 开始索引或调整输入（根据数组中所需的偏移量减少它） - 这只是与任何其他方法一样简单，即使不是更容易，也足够简单，任何人都可以理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T09:34:16.573

也许在你的情况下使用字典会更好？因此，您的代码将转换为：

```
Dictionary<int, TextBox> textBoxes = 
        new Dictionary<int, TextBox>();
textBoxes.Add(1, textBox1); 
```

但无论如何，这是一个奇怪的要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T09:26:54.753

您可以定义自己的列表类来扩展内置类并在构造函数中插入第一个元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T10:04:35.780

解决使集合索引基于 1 的问题的一种相当尴尬的方法是使用[Array](http://msdn.microsoft.com/en-us/library/system.array.aspx)类。然后，您可以创建具有任意下限的数组实例。在您的情况下，它看起来像这样：

```
var textBoxList = Array.CreateInstance(typeof(TextBox), new[] {12}, new[] {1}); 
```

在这个数组中定义元素有点麻烦：

```
...
textBoxList.SetValue(textBox5, 5);
... 
```

同样，访问元素也相当明确：

```
var tb9ref = (TextBox)textBoxList.GetValue(9); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-21T09:47:23.087

这是我所做的，它似乎有效：D，我猜很简单..仍在学习..

```
 var tb = textBoxList;
                                    int newDef = def - 1;
                                    tb[newDef].Text = "occupied"; 
```

# xml-parsing - 使用 Python3 从 XML 中提取元素？

> ID：12527640
> 
> 赞同：3
> 
> 时间：2012-09-21T09:17:01.237
> 
> 标签：xml-parsing, python-3.x

我正在尝试编写一个 Python 3 脚本，在其中查询 Web api 并接收 XML 响应。响应看起来像这样 -</p>

```
<?xml version="1.0" encoding="UTF-8"?>
<ipinfo>
   <ip_address>4.2.2.2</ip_address>
   <ip_type>Mapped</ip_type>
   <anonymizer_status/>
   <Network>
      <organization>level 3 communications  inc.</organization>
      <OrganizationData>
     <home>false</home>
         <organization_type>Telecommunications</organization_type>
         <naics_code>518219</naics_code>
     <isic_code>J6311</isic_code>
      </OrganizationData>      
      <carrier>level 3 communications</carrier>
      <asn>3356</asn>
      <connection_type>tx</connection_type>
      <line_speed>high</line_speed>
      <ip_routing_type>fixed</ip_routing_type>
      <Domain>
         <tld>net</tld>
         <sld>bbnplanet</sld>
      </Domain>
   </Network>
   <Location>
      <continent>north america</continent>
      <CountryData>
         <country>united states</country>
         <country_code>us</country_code>
         <country_cf>99</country_cf>
      </CountryData>
      <region>southwest</region>
      <StateData>
         <state>california</state>
         <state_code>ca</state_code>
         <state_cf>88</state_cf>
      </StateData>
      <dma>803</dma>
      <msa>31100</msa>
      <CityData>
         <city>san juan capistrano</city>
         <postal_code>92675</postal_code>
         <time_zone>-8</time_zone>
         <area_code>949</area_code>
         <city_cf>77</city_cf>
      </CityData>
      <latitude>33.499</latitude>
      <longitude>-117.662</longitude>
   </Location>
</ipinfo> 
```

这是我目前的代码——</p>

```
import urllib.request
import urllib.error 
import sys
import xml.etree.ElementTree as etree

…

try:
    xml = urllib.request.urlopen(targetURL, data=None)
except urllib.error.HTTPError as e:
    print("HTTP error: " + str(e) + " URL: " + targetURL)
    sys.exit()

tree = etree.parse(xml)
root = tree.getroot() 
```

API 查询有效，通过调试器，我可以看到“根”变量中的所有信息。我的问题是我无法弄清楚如何`<asn></asn>`从返回的 XML 中提取 ASN ( ) 之类的内容。一天来，我一直在用各种各样的发现、findalls 和所有其他类型的方法来解决这个问题，但无法破解这个问题。我想我已经到了看不到所有树木的木材的地步，而且我在互联网上找到的每个例子似乎都没有帮助。有人可以给我看一个可以从树结构中提取 XML 元素内容的代码片段吗？

非常感谢

蒂姆

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-21T10:13:36.567

I would recommend using [Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/ "Beautiful Soup").

It's a very powerful when it comes to extracting data from xml-code.

Example:

```
from bs4 import BeautifulSoup
soup = BeautifulSoup(targetURL)

soup.find_all('asn') #Would return all the <asn></asn> tags found! 
```

# c# - 如何获取lastcell加上一个excell文件

> ID：12527641
> 
> 赞同：0
> 
> 时间：2012-09-21T09:17:01.923
> 
> 标签：c#, excel, range, worksheet

我有一个 Excel 文件，其中有 10 张表，第 1 行有标题。我正在使用这段代码来获取这些标题的范围。那部分工作正常。

```
 string  lastColumn      = worksheet.Cells.SpecialCells(XlCellType.xlCellTypeLastCell).Address[Type.Missing].Substring(1, 1);
            Range   amountRange     = worksheet.Range["A1", string.Format("{0}1", lastColumn)]; 
```

问题是我得到了一张具有相同标题的新工作表，但我必须动态地添加一个。我必须从数据库中读取它。

因此，如果我将代码更改为此，我只会得到最后一列。没有汗水。

```
string  lastColumn      = worksheet.Cells.SpecialCells(XlCellType.xlCellTypeLastCell).Address[Type.Missing].Substring(1, 1);
                    Range   amountRange     = worksheet.Range[string.Format("{0}1", lastColumn)]; 
```

但我想要的是得到最后一列加一，我正在努力解决它。我的第一个想法是 lastColumn + 1，但它不起作用。有任何想法吗。瑞马丁斯？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:06:52.840

我自己解决了。

得到最后一列的列名后，我将其转换为数字，加 1，然后再转换回列名。

就这么简单。

# java - 重载 mvp4g 事件

> ID：12527643
> 
> 赞同：3
> 
> 时间：2012-09-21T09:17:18.420
> 
> 标签：java, gwt, mvp4g

我正在使用 mvp4g 开发一个应用程序，我有一个非常复杂的视图，它显示一个小部件和许多可应用于此小部件的过滤选项。作为要求，所有过滤器都包含在历史令牌中。

我目前使用将 Guava 转换为令牌的历史转换器，`ListMultimap<String, String>`反之亦然。这个多图作为事件的参数传递。

不幸的是，这会带来不便：

```
@Event(handlers = ExampleParametrizedPresenter.class, name = "example", historyConverter = ExampleParametrizedHistoryConverter.class)
public void showExample(@Nullable ListMultimap<String, String> parameters); 
```

除了`parameters`在演示器中检查是否等于 null 之外，每次我需要使用一些默认参数触发此事件时，我都必须构造一个多重映射，然后检查（再次在演示器中）是否存在所有必需的参数。

我想要的是有可能用不同的论点来触发这个事件。例如，可以打电话（假设我需要传递一些日期）：

```
myEventBus.showExample(myMultimap);
myEventBus.showExample(fromDate, toDate);
myEventBus.showExample(ExampleType.MONTH, 8); 
```

有什么办法可以做到这一点？

# css - 为什么 div 包含在姐妹 div 中？

> ID：12527647
> 
> 赞同：0
> 
> 时间：2012-09-21T09:17:32.283
> 
> 标签：css

我不明白为什么[http://jsfiddle.net/zHH4D/](http://jsfiddle.net/zHH4D/)的小提琴 没有在红色区域之外和右边显示“向右”，而是在红色块内？！

我可以将 div 放在父 div 之外并且这种工作，但它对我来说没有意义。

我在哪里想错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T09:18:23.153

你有一个错字：

```
<div style="width:340px;float:left;background-color:#f00;">
    <div>above ok</<div> <!-- TYPO -->
    <div>under ok</div>
</div> 
```

这会导致浏览器尽可能地解释您的标记，从而导致以下结果（从 Chrome 检查器复制）：

```
<div style="width:340px;float:left;background-color:#f00;">
    <div>above ok<!--<div-->
    <div>under ok</div>
</div>
  <div style="float:left;">
    to the right?
  </div>
</div> 
```

这是一个[固定版本](http://jsfiddle.net/jamesallardice/zHH4D/1/)：

```
<div style="width:340px;float:left;background-color:#f00;">
    <div>above ok</div> <!-- Notice the closing div tag -->
    <div>under ok</div>
</div> 
```

# segmentation-fault - 尝试访问“已删除”对象属性时出现段错误

> ID：12527650
> 
> 赞同：1
> 
> 时间：2012-09-21T09:17:44.187
> 
> 标签：segmentation-fault, php

我在一台特定的机器上遇到了 PHP 段错误，我已经测试了 3 台其他机器并且似乎一切正常，但这个错误似乎与 PHP 密切相关，我想在这里分享它。

我的脚本（虽然要复杂得多）是这样的。

```
WP_Query->post // StdClass

// some stuff happens

// Try to access WP_Query->post here causes a segfault

get_userdate( 3 );

// WP_Query->post is now inexplicably populated with a WP_User object, 
// though get_userdata does not reference it in any way 
```

“发生了一些事情”实际上是一个明显不相关的函数调用，它遵循这种模式

```
function a() {
    // WP_Query->post is correct
    // function body
    // WP_Query->post is correct
    return true;
}

// WP_Query->post is correct
a();
// accessing WP_Query->post causes a segfault 
```

就像垃圾收集以某种方式删除了对象的内存一样，尽管我尝试调用“gc_disable()”，但这并没有解决任何问题。

PHP 版本：带有 Suhosin-Patch (cli) 的 PHP 5.3.6-13ubuntu3.9（内置：2012 年 9 月 12 日 19:00:27） FPM：PHP 5.3.6-13ubuntu3.9 (fpm-fcgi)（内置：9 月 12 日2012 19:04:27)

我尝试禁用 PHP 扩展（memcached、apc）无济于事。

我尝试了 gdb 回溯，`zend_std_read_property (object=0x1)`虽然我无法真正获得更多信息，但似乎出现了错误，我认为是因为 PHP 不是用“调试”编译的。

这里的任何建议都会非常受欢迎，到目前为止，我已经为此苦恼了大约 12 个小时！

# android - 如何从我的 android 应用程序在 Youtube 上上传视频？

> ID：12527653
> 
> 赞同：0
> 
> 时间：2012-09-21T09:17:48.610
> 
> 标签：android, youtube, youtube-api

我在为它在谷歌上创建帐户时感到困惑？请任何人告诉我在 youtube 上轻松上传视频的整个过程。然后如何在我的 android 应用程序中从 youtube 获取该 URl？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:20:43.780

请参阅此 [http://code.google.com/p/ytd-android/](http://code.google.com/p/ytd-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:27:09.290

您可以使用 Youtube API 上传视频，请在此处查看[https://developers.google.com/youtube/2.0/developers_guide_protocol_video_feeds#User_Uploaded_Videos](https://developers.google.com/youtube/2.0/developers_guide_protocol_video_feeds#User_Uploaded_Videos)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T13:35:24.853

Albin 链接到的 YouTube Direct Android 应用程序的示例代码是目前的典型示例。

但是，一旦[Data API](https://developers.google.com/youtube/v3/)的 v3 发布，这将是处理从原生 Android 应用程序上传的首选方式，因为 Java Google API 客户端库将与 Android 和 v3 一起使用（当前的 Java GData 客户端库可以工作使用 v2，但不是 Android）。

（要回答下一个问题，不，我不能分享 API v3 的发布日期。）

# iphone - 捏合以放大和缩小表格视图

> ID：12527654
> 
> 赞同：1
> 
> 时间：2012-09-21T09:17:52.330
> 
> 标签：iphone, cocoa-touch, nstableview, pinch, pinchzoom

正如在[“清除”待办事项管理应用程序](http://www.youtube.com/watch?v=Ksizx2-nEmk)中所做的那样，是否可以使用合理的标准界面元素从表格视图中导航回来，或者这是否是大量的手动编码黑客行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:25:00.977

它不是！[http://simplecodebits.blogspot.com.es/2011/02/pinch-zoom-uitableview.html](http://simplecodebits.blogspot.com.es/2011/02/pinch-zoom-uitableview.html)

# python - 如何在 Python 中解码 unicode 字符串的这种表示形式？

> ID：12527655
> 
> 赞同：4
> 
> 时间：2012-09-21T09:17:53.013
> 
> 标签：python, utf-8, gmail-imap

我`imaplib`用于从 Gmail 中获取电子邮件的主题，其中一些主题如下所示：

```
=?utf-8?Q?12_=D7=A1=D7=91=D7=99=D7=97?= 
```

如何将此表示解码为普通的 Unicode 文本？

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-21T09:23:12.830

您的字符串使用MIME 标头的[Quoted-printable](https://en.wikipedia.org/wiki/Quoted-printable)格式进行编码。该[`email.header`模块](http://docs.python.org/library/email.header.html)为您处理：

```
>>> from email.header import decode_header
>>> for part in decode_header('=?utf-8?Q?12_=D7=A1=D7=91=D7=99=D7=97?='):
...     print(str(*part))
12 סביח 
```

# liferay-6 - 如何动态获取articleId？

> ID：12527657
> 
> 赞同：0
> 
> 时间：2012-09-21T09:17:55.537
> 
> 标签：liferay-6, article, assets, journal

我正在使用 Asset Publisher，需要动态获取最新发表的期刊文章的 articleId。

我在**abstracts.jsp 钩子**中使用：

```
version=JournalArticleLocalServiceUtil.getLatestVersion(assetRenderer.getGroupId(), "14405");
journalArticle = JournalArticleLocalServiceUtil.getArticle(assetRenderer.getGroupId() , "14405",version); 
```

我在这里硬编码了articleId。我该如何避免这种情况？

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T13:10:35.270

使用动态查询来获取最新的文章`JournalArticleLocalServiceUtil`也许你可以`ProjectionFactoryUtil.max("createDate");`用来获取最新的日期

```
DynamicQueryFactoryUtil.forClass(JournalArticle.class)  
  .add(ProjectionFactoryUtil.max("createDate"))  
  .add(PropertyFactoryUtil.forName("groupId").eq(new Long(groupId)));  
List results =JournalArticleLocalServiceUtil.dynamicQuery(query);` 
```

# wordpress - 如何在 IE 兼容性/怪癖模式下修复菜单

> ID：12527658
> 
> 赞同：0
> 
> 时间：2012-09-21T09:17:58.867
> 
> 标签：wordpress, internet-explorer, cross-browser, quirks-mode

我有一个使用 Sterling 主题构建的[Wordpress 网站，但在 Internet Explorer 中垂直显示而不是水平显示菜单时遇到问题。](http://www.myhomecare.ie)[我之前在这里](https://stackoverflow.com/questions/12003211/errors-loading-wordpress-website-on-internet-explorer-8)问过这个问题，最后专注于没有解决问题的 jquery 错误。

[这是](https://i.imgur.com/V8vby.jpg)我在 IE9 上显示的屏幕截图。

从那时起，我尝试更改文档类型以强制站点正确显示，但我现在意识到工作中的所有计算机都将 IE9 永久设置为兼容模式，并且更改这将意味着通过 IT 部门。

我不能准确地告诉我的公司该网站在您的计算机上看起来不对，但在其他任何地方都正确，我确实希望避免使用旧版本 IE 的人出现错误，因为目标市场不是精通技术的人，所以任何人都可以提供建议如何让我的菜单在怪癖/兼容模式下正常工作？

我不在乎该网站的其他方面是否不完美，但它实际上无法与这样的菜单一起使用。我基本上只需要它水平显示而不是垂直显示，我假设这与 CSS 有关。

编辑：添加了我的 CSS

样式表中的原始代码是这样的

```
nav > ul > li {
display:inline-block;
position:relative;
}

nav > ul > li+li {
margin-left:28px;
} 
```

然后我在主题的站点选项部分稍微定制了它（基本上意味着当我更新主题时我的更改不会被覆盖），我的定制是：

```
nav > ul > li+li {
font-size:14px;
margin-left:10px 
} 
```

我认为它与 display:inline-block; 有关。但我没有尝试过似乎使菜单再次水平。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:22:01.450

您为此使用了哪些 CSS 属性？你应该做类似的事情

```
#menu li {
    display: block;
    float: left;
    width: 200px;
    height: 40px;
}

#menu {
    overflow: hidden;
} 
```

# javascript - 如何在分享我的链接时获取 Facebook 用户的 ID 或名称

> ID：12527672
> 
> 赞同：2
> 
> 时间：2012-09-21T09:19:24.843
> 
> 标签：javascript, facebook, facebook-sharer

我正在开发一个页面，里面有很多 facebook 分享按钮。

我的页面有如下网址：`http://mydomain.com/follow/show_info?id=xxxx`

我喜欢做的是获取有关共享我的页面的用户的信息，而不是

```
http://mydomain.com/follow/show_info?id=xxxx&name=Name%20Surname 
```

所以我可以将该名称放在我的页面中，例如：

```
The user Name Surname has shared this page.. share that page you too! 
```

有可能吗？谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T09:26:29.590

```
FB.api('/me', function(response) {
    alert("Name: "+ response.name + "\nFirst name: "+ response.first_name + "ID: "+response.id);
    var img_link = "http://graph.facebook.com/"+response.id+"/picture"
}); 
```

通过这个，您可以提取当前登录用户 uid 并命名和图像当有人触发共享时您必须做的事情通过 java 脚本捕获这些

这里有一些更多的链接可以帮助你更多

[http://developers.facebook.com/docs/reference/api/user/](http://developers.facebook.com/docs/reference/api/user/)

[http://developers.facebook.com/docs/reference/javascript/](http://developers.facebook.com/docs/reference/javascript/)

和

[http://developers.facebook.com/docs/reference/javascript/FB.api/](http://developers.facebook.com/docs/reference/javascript/FB.api/)

# fancybox - Fancybox 中的 target="_parent" 正在加载一个新窗口

> ID：12527673
> 
> 赞同：0
> 
> 时间：2012-09-21T09:19:30.193
> 
> 标签：fancybox, parent, target

好的，这是一个凌乱的。

我在一个页面上有一个 iframe，在那个 iframe 中我已经加载了一个 Fancybox iframe，其中包含一个 target="_parent" 的链接。我唯一的问题是它出于某种奇怪的原因将链接加载到新窗口中，而不是从花哨的盒子中加载到 iframe 中。

我的链接是`<a href="http://www.dpdesignz.co.nz/homefresh/lib/checkout.php?checkout=checkout&redirect=order" class="button" target="_parent">Continue Checkout</a>`

[您可以在https://www.dpdesignz.net/homefresh/dps/success.html](https://www.dpdesignz.net/homefresh/dps/success.html)查看代码示例。我最大的事情是，即使这个页面在我的[https://www.dpdesignz.net](https://www.dpdesignz.net)域上，按钮中的链接也不能从[http://www.dpdesignz.co.nz](http://www.dpdesignz.co.nz)更改为[https:// www.dpdesignz.net](https://www.dpdesignz.net)

谁能看到这里可能出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T00:15:48.720

您的链接有`class="button"`但在您的代码的任何部分都没有任何将该选择器绑定到fancybox的内容

就像是：

```
$(".button").fancybox({
 width : 650,
 height: 400,
 type  : "iframe"
}); 
```

否则它将始终在新窗口中打开

# php - Mysql用户崩溃的情况

> ID：12527675
> 
> 赞同：3
> 
> 时间：2012-09-21T09:19:42.467
> 
> 标签：php, mysql, database, pdo, phpmyadmin

所以我有一个 2 页的注册页面，用户在第一页输入他/她的所有数据，然后单击继续。在第二页上，他们选择了某些选项，然后点击继续，这会将他们带到可以处理付款的其他地方（与我完全无关）。

我还有一个 Insert.php 文件，它只是将所有用户的数据插入到数据库中。当在 page2 上单击提交时，它实际上将它们重定向到 Insert.php，插入然后将它们重定向到外部支付页面。我不得不这样做，因为由于某种原因，ajax 调用不起作用。

我的问题是，如果他们在第二页点击提交后，他们的计算机崩溃或关闭浏览器怎么办？mysql会理解连接已终止并且不保存任何内容，还是会保存部分数据（在用户崩溃之前尽可能多地保存），如果是这样，我该如何删除部分数据？

在这一点上，我只是尝试尽可能多地进行错误处理，以防止出现任何严重问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:22:47.990

当他们点击提交时，如果浏览器发送了所有的 post 字段，你拥有的代码将愉快地继续执行。就服务器而言，没有任何重要的事情发生。

我建议在代码中进行一些 post/get 检查（一如既往），这将确保所有数据都已通过。如果有，它将为用户正确保存。

编辑：如果您担心在崩溃之前只发送表单的某些元素，您可以执行以下操作：

```
if(!empty($_POST['someElement']) && !empty($_POST['someElement2']) && !empty($_POST['someElement2']))
{
    //All your elements are fully submitted, you can save the data safely
} 
```

# html - Firefox 中的页面布局不同

> ID：12527677
> 
> 赞同：1
> 
> 时间：2012-09-21T09:19:49.453
> 
> 标签：html, css

我在 Firefox 中获得与在 Chrome 中相同的结果时遇到问题。在 Chrome 中，布局是我想要的，而在 Firefox 中它似乎不同。

这是标记：

```
<body>
    <div id="big_wrapper">

        <header id="top_header">
            <h1>Maple 16</h1>
        </header>

        <div id="box">

            <aside id="sidebar">
                <table cellpadding="0" cellspacing="15px">
                        <col span="7" width="160px" />
                        <row span="7" width="160px" />
                        <tr>
                            <td colspan="1" bgcolor="#40b040">
                                <a href="../index.html" ><img src="../images/buttons/home.png" class="img"></a>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="1" bgcolor="#ffbf00" class="img">
                                <img src="../images/buttons/shop.png">
                            </td>
                        </tr>
                        <tr>
                            <td colspan="1" bgcolor="#4040ff" class="img">
                                <img src="../images/buttons/download.png">
                            </td>
                        </tr>

                </table>

            </aside>

            <section>
                <article id="maple_article" dir="rtl" align="right">
                    <h1>מהי Maple?</h1><br />
                    <p>
                    Maple היא תוכנה לפתרון בעיות מתמטיות הנדסיות המשלבת יכולות סימבוליות, ממשק גרפי נוח לשימוש ומנוע נומרי.<br />
                    כתיבת הקוד והטקסט הינה כתיבה אינטואיטיבית ונוחה לעריכה.<br />
                    כמו כן קיים תיעוד מלא של תהליך הפתרון אשר מהווה מסמך.<br />
                    </p>
                    <p class="notice">
                    היות ו Maple אינה תוכנה אמריקאית, Maple ושרשרת המוצרים הנלווים ל Maple אינם תחת הגבלות שימוש והפצה של ארה"ב.
                    השימוש ב  Maple אינו מצריך אישור EULA.
                    </p>
                    <h2>תכונותיה העיקריות של Maple:</h2>
                    <br />
                    <ul>
                    <li>
                    יכולות גרפיות גבוהות, יצירת אפליקציות אנימציה בקלות וממשק משתמש גרפי (GUI) נוח ואינטואיטיבי. 
                    </li>
                    <li>
                    במהלך הכתיבה ב Maple מתבצע תיעוד מלא של תהליך הפתרון וכתיבת המסמך – תהליך חשוב והכרחי לשימור ידע.
                    </li>
                    <li>
                    פתרון מגוון רחב של בעיות מתמטיות (אלגברה, חדוו"א, משוואות דיפרנציאליות, סטטיסטיקה הסתברות ועוד..) המתבצע בקלות וללא הגבלת דיוק באמצעות המנוע הנומרי החזק של התוכנה. 
                    </li>
                    <li>
                    ל Maple סביבת תכנות מלאה הניתנת להרחבה. כמו כן, Maple יודע לבצע חישובים של קוד הנכתב בשפת תכנות אחרת.
                    </li>
                    <li>
                    ל Maple אפשרות להדריך (ולתקן במקרה הצורך) בפתרון בעיות מתמטיות שונות באמצעות תרגולים ופותרנים מובנים בתוכנה.
                    <li>
                    <li>
                    ל Maple יכולת להתממשק עם מגוון רחב של תוכנות לדוגמת Matlab ToolChain, Optimus ועוד..
                    </li>
                    </ul>
                    <br /><br />
                    <p>
                    כיום קיימים ב Maple יותר מ-170 חבילות תוכן (Packages) במגוון רחב של נושאים אשר מגיעים עם התוכנה עצמה וללא תשלום נוסף.
                    <p>

                </article>

            </section>

        </div>

        <div id="screenshots">
            <h2>Screenshots</h2>
            <table cellspacing="15px" id="shots_table">
                <tr>
                    <td>
                        <img src="http://placehold.it/160x160">

                    </td>
                    <td>
                        <img src="http://placehold.it/160x160">
                    </td>
                    <td>
                        <img src="http://placehold.it/160x160">
                    </td>
                    <td>
                        <img src="http://placehold.it/160x160">
                    </td>
                    <td>
                        <img src="http://placehold.it/160x160">
                    </td>
                </tr>
            </table>
        </div>

        <footer id="footer">
            Copyrights Digisec Technology. All rights reserved.
        </footer>
    </div>
</body> 
```

如您所见，我对整个网站使用大包装器，对文章页面使用框。所以框将包含侧边栏和文章。

以下是似乎相关的 CSS 部分：

```
#top_header{
    margin-top: 5px;
    padding: 20px;
}

#footer{
    color: grey;
    text-align: center;
    padding: 20px;
    border-top: 2px solid black;
}

/*Articles*/
#box{
    display: -webkit-box;
    -webkit-box-orient: horizontal;
    display: -moz-box;
    -moz-box-orient: horizontal;
    display: -o-box;
    -o-box-orient: horizontal;
    margin-bottom: 10px;
}

#maple_article{
    width: 85%;
    color: #f8f8f8;
    font-size: 16px;
    margin-left: 15px;
}

#sidebar{
    width: 15%;
}

.notice{
    color: #FF6666 ;
}

/*ScreenShots*/ 
#screenshots{
    text-align: right;
}

#shots_table{
    float: right;
} 
```

您可以看到我为侧边栏定义了 15% 的宽度，为文章定义了 85% 的宽度。屏幕截图我们的框外部分。

我正在使用盒子布局，并确保也定义了 moz。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:01:11.820

好吧，我很笨，必须为侧边栏定义特定的宽度并使文章灵活。

# ios - iOS - 未解决的错误导致崩溃：悬挂对无效对象的引用

> ID：12527679
> 
> 赞同：1
> 
> 时间：2012-09-21T09:19:52.643
> 
> 标签：ios, core-data, ios5

我在 iOS 上遇到以下崩溃：

```
 Unresolved error Error Domain=NSCocoaErrorDomain Code=1550 "The operation couldn’t be completed. (Cocoa error 1550.)" UserInfo=0x74a30d0 {NSValidationErrorObject=<Exercise: 0x9097d50> (entity: Exercise; id: 0x9097970 <x-coredata://AF762754-4CD9-4386-A453-049CC8710DBF/Exercise/p124> ; data: {
    groupId = 21;
    id = 102;
    intensity = "0x906a7a0 <x-coredata://AF762754-4CD9-4386-A453-049CC8710DBF/Intensity/p125>";
    lengthMeasurable = 1;
    name = Running;
    owner = "0x9096540 <x-coredata:///ExerciseEvent/t6817E9A9-9A4C-4044-BF20-FC15380B7C2F4>";
    picId = 2719;
}), NSAffectedObjectsErrorKey=(
    "<ExerciseEvent: 0x9090910> (entity: ExerciseEvent; id: 0x9096540 <x-coredata:///ExerciseEvent/t6817E9A9-9A4C-4044-BF20-FC15380B7C2F4> ; data: <fault>)"
), Dangling reference to an invalid object.=null, NSValidationErrorKey=owner, NSLocalizedDescription=The operation couldn’t be completed. (Cocoa error 1550.), NSValidationErrorValue=<ExerciseEvent: 0x9090910> (entity: ExerciseEvent; id: 0x9096540 <x-coredata:///ExerciseEvent/t6817E9A9-9A4C-4044-BF20-FC15380B7C2F4> ; data: <fault>)}, {
    "Dangling reference to an invalid object." = "<null>";
    NSAffectedObjectsErrorKey =     (
        "<ExerciseEvent: 0x9090910> (entity: ExerciseEvent; id: 0x9096540 <x-coredata:///ExerciseEvent/t6817E9A9-9A4C-4044-BF20-FC15380B7C2F4> ; data: <fault>)"
    );
    NSLocalizedDescription = "The operation couldn\U2019t be completed. (Cocoa error 1550.)";
    NSValidationErrorKey = owner;
    NSValidationErrorObject = "<Exercise: 0x9097d50> (entity: Exercise; id: 0x9097970 <x-coredata://AF762754-4CD9-4386-A453-049CC8710DBF/Exercise/p124> ; data: {\n    groupId = 21;\n    id = 102;\n    intensity = \"0x906a7a0 <x-coredata://AF762754-4CD9-4386-A453-049CC8710DBF/Intensity/p125>\";\n    lengthMeasurable = 1;\n    name = Running;\n    owner = \"0x9096540 <x-coredata:///ExerciseEvent/t6817E9A9-9A4C-4044-BF20-FC15380B7C2F4>\";\n    picId = 2719;\n})";
    NSValidationErrorValue = "<ExerciseEvent: 0x9090910> (entity: ExerciseEvent; id: 0x9096540 <x-coredata:///ExerciseEvent/t6817E9A9-9A4C-4044-BF20-FC15380B7C2F4> ; data: <fault>)";
} 
```

我在某个时候遇到了这个崩溃，那就是我想将我的模型保存`ExerciseEvent`在`CoreData`. 所以我在我的视图中创建了一个这样的新实体： `self.ee = [NSEntityDescription insertNewObjectForEntityForName:@"ExerciseEvent" inManagedObjectContext:context]`

然后我有 2 个按钮，“保存”和“丢弃”。如果我按“丢弃”，我必须删除该实体，这样我就不会`ExerciseEvent`在上下文中获得可为空的值。我在视图中这样删除它：

```
[context deleteObject:self.ee];
[context save:nil]; 
```

然后，当我打开我的所有列表时，`ExerciseEvents`如上所述，我会遇到以下崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T10:19:44.910

这个错误通常是因为当一个 Excercise 对象没有与ExerciseEvent 建立必要的互惠关系时，经常会不正确地设置关系。您正在尝试删除对象 ExerciseEvent。而Exercise对象和这个ExerciseEvent有关系，不能和这个有空关系，但是当你删除ExerciseEvent时，会出现错误。该对象是“悬空的”，因为对象图表明它应该处于关系中，但它只是悬挂在与任何其他对象无关的空间中。

* * *

所以你需要做的是在对象ExerciseEvent 和Exercise 之间设置正确的关系删除规则。应该有级联规则。您可以在此处找到详细信息：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdRelationships.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdRelationships.html)

# jquery - 货币（欧元）的 jQuery 移动和文本输入

> ID：12527686
> 
> 赞同：1
> 
> 时间：2012-09-21T09:20:18.643
> 
> 标签：jquery, jquery-mobile

使用 jQuery Mobile，我需要一个用于 Money (Euro) 的文本输入，以便只能接受带有一些掩码的数字。

知道如何使用框架或 HTML5 来做到这一点吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-23T14:26:11.680

正如我在评论中所说，你可以试试 Jquery MaskMoney。

我从来没有在 jQuery-mobile 上使用过这个，但是根据你的评论它工作正常。

插件链接：[JQuery MaskMoney](http://github.com/plentz/jquery-maskmoney)

# c# - 删除数据网格中列之间的行

> ID：12527688
> 
> 赞同：2
> 
> 时间：2012-09-21T09:20:20.170
> 
> 标签：c#, .net, winforms, datagridview

快速提问，有没有办法删除数据网格中列之间的线？我只在 SO 上看到了一个答案，它与 WPF 有关，与 winforms 无关。

我开始认为这可能是超级简单的事情，或者可能相反，我将不得不覆盖绘图功能（这比它值得付出更多的努力，我可能会离开它）。

提前喝彩

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T09:32:54.103

最简单的方法是通过在属性检查器或代码中修改属性来更改边框样式（另请参阅其他 **水平*样式） ：`CellBorderStyle`

```
dataGridView1.CellBorderStyle = DataGridViewCellBorderStyle.SingleHorizontal; 
```

在 MSDN 中查找控制文档总是有帮助的 :)

# python - 在 windows server 2008 r2 上设置 RhodeCode

> ID：12527691
> 
> 赞同：1
> 
> 时间：2012-09-21T09:20:27.567
> 
> 标签：python, windows-server-2008-r2, rhodecode

我正在尝试在 WS2008R2 上设置 RhodeCode，但在“pip install rhodecode”阶段继续收到以下错误消息：

“无法导入标准 bz2（不完整的 python 安装）”

这似乎发生在安装过程尝试安装 mercurial 的阶段。

我不太确定该去哪里，因为我对 python 的经验为零。我正在遵循 rhodecode 提供的指南：[指南](http://packages.python.org/RhodeCode/installation_win.html#installation-win)

Python 版本是 2.7。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:30:16.397

好吧，似乎 rhodecode 已经更新了他们的分步安装过程，并包含了 64 位操作系统的部分。已在 windows server 2012 上尝试过，它可以工作！

[链接到指南](http://rhodecode.readthedocs.org/en/latest/installation_win.html)

# c# - C# 将字符转换为字节（十六进制表示）

> ID：12527694
> 
> 赞同：23
> 
> 时间：2012-09-21T09:20:37.317
> 
> 标签：c#, byte, type-conversion, hex

这似乎是一个简单的问题，但我无法弄清楚。

我需要将此字符**<**转换为字节（十六进制表示），但如果我使用

```
byte b = Convert.ToByte('<'); 
```

我得到**60**（十进制表示）而不是**3c**。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-21T09:31:05.240

`60 == 0x3C`.

您已经有了正确的答案，但是您以错误的方式看待它。

`0x`是十六进制前缀
`3C`是 3 x 16 + 12

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-21T09:22:02.427

您可以使用该[`BitConverter.ToString`](http://msdn.microsoft.com/en-us/library/system.bitconverter.tostring.aspx)方法将字节数组转换为十六进制字符串：

```
string hex = BitConverter.ToString(new byte[] { Convert.ToByte('<') }); 
```

或者简单地说：

```
string hex = Convert.ToByte('<').ToString("x2"); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-21T09:23:56.283

```
char ch2 = 'Z';
Console.Write("{0:X} ", Convert.ToUInt32(ch2)); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-21T09:25:26.637

> 得到 60（十进制表示）而不是 3c。

不，你没有得到任何代表。*在某些内部*表示中，您会得到一个`byte`包含值 60/3c 的值。当您*查看它时*，即当您将其转换为字符串（显式或隐式）时，您会得到**十进制表示 60**。**`ToString()`**

 ****因此，您必须确保将字节*显式*转换为字符串，**并指定所需的基数**。`ToString("x")`，例如将数字转换为**十六进制**表示：

```
byte b = Convert.ToByte('<');  
String hex = b.ToString("x"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-21T09:22:51.320

您想使用以下方法将数值转换为十六进制`ToString("x")`：

```
string asHex = b.ToString("x"); 
```

但是，请注意，将“<”字符转换为字节的代码将适用于该特定字符，但不适用于非 ANSI 字符（不适合字节）。****

# c# - VS2012 中的 VS2010 测试列表编辑器功能（更新）

> ID：12527701
> 
> 赞同：2
> 
> 时间：2012-09-21T09:21:09.653
> 
> 标签：c#, visual-studio-2010, testing, visual-studio-2012, specflow

是否可以在 Visual Studio 2012 中从 Visual Studio 2010 获得相同的测试列表编辑器功能？

我想做的是制作一组包含我要运行的测试的列表。运行列表时，我希望能够轻松地将测试从一个列表移动到另一个列表。这在 VS2010 中很容易，但是使用 VS2012 中的测试资源管理器就不可能了。我知道类别功能，但这不是我想要的。它可能在本质上与 VS2010 的测试列表编辑器中的测试几乎相同，但需要更多的工作。

有谁知道在 VS2012 中获得相同功能的有效解决方法或插件或类似的东西？

//更新

在几个月不使用 SpecFlow 之后，我选择了另一个使用 SpecFlow 的项目。在 VS2012 中使用 SpecFlow 进行测试的一些事情发生了变化。现在可以在 VS2012 中获得接近 VS2010 中描述的功能的功能。这就是我的诀窍：

*   Visual Studio 2012 Update 2 引入了播放列表的使用；
*   将测试运行工具设置为 VisualStudio2012（工具 -> 选项 -> Specflow -> 常规 -> 测试运行工具）让我有机会运行单个场景，只需右键单击它们并选择“运行单元测试”；
*   安装 NUnit 测试适配器让 VS2012 发现我所有的 SpecFlow 场景，并让它们出现在测试资源管理器中，在那里它们可以被放入播放列表中。

我希望此更新将帮助遇到与我相同问题的人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T10:47:40.787

一种解决方法是同时使用 VS2010。我发现这是两全其美的最佳方式。

我在 VS2010 和 VS2012 中都打开了我的解决方案——我在 VS2010 中完成了所有的测试创建、调试和维护。然后切换回 VS2012 以获得 VS2012 中的其他不错的功能。

这解决了 VS2012 中新测试功能中的主要缺点（恕我直言），我发现其中包括您描述的问题以及：

*   删除“创建单元测试...”选项（主要退一步！）
*   在大型项目上启动单元测试时性能非常慢（在我的一个项目中，这比 VS2010 慢 100 *）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-30T20:32:08.647

在 Visual Studio 的 Update 2 中，他们引入了“[测试播放列表](http://www.codewrecks.com/blog/index.php/2013/03/14/new-unit-test-functionality-in-vs2012-update-2-test-playlist/)”的概念。这使您可以轻松地对测试进行分组，并且类似于测试列表。

您可以实现与使用特征实现的结果相似的结果，但正如我添加的链接所提到的：

> 使用播放列表是使用 Traits 对测试进行分组并仅运行一个子集的替代方法，但主要区别在于**Trait 表示测试的真实属性**，（例如，被测试的软件的逻辑区域或其他属性这样的数据库表明它需要一个测试数据库），而**播放列表主要是为了将异构测试组合在一起以简化管理**，用于运行测试和管理它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T22:29:18.367

要进入测试列表编辑器，请在解决方案资源管理器中右键单击解决方案，将 .testsettings 文件添加到解决方案。.testsettings 文件现在应该在名为“解决方案项目”的文件夹下可见（直接在解决方案下）。所有这些都是为了让这个文件夹显示在解决方案资源管理器中（不确定如何让这个文件夹在 VS2012 中显示）。您还应该在下面看到一个“.vsmdi”文件。打开它将导致测试列表编辑器窗口弹出

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-12T08:47:20.873

[您可以按照其他答案中的建议打开](https://stackoverflow.com/a/14177098/447356)*.vsmdi*文件来查看测试列表编辑器，但它会给您一个警告：

> 测试列表编辑器已弃用。您无法从此编辑器运行测试

并且窗口中缺少运行按钮。如此有效，您只能看到测试用例列表。VS2012作为测试类的概念来满足你的需求。更多详细信息，请参见[定义测试类别以对您的测试进行分组](http://msdn.microsoft.com/library/dd286595%28VS.110%29.aspx)。

# mongodb - Morphia 将项目添加到嵌入式

> ID：12527705
> 
> 赞同：1
> 
> 时间：2012-09-21T09:21:31.807
> 
> 标签：mongodb, morphia

我有以下结构。产品嵌入商店；评论嵌入在产品中。

```
1- Store
  2-Products[]-->
     3-Reviews[] 
```

我正在尝试添加一个新项目以使用以下代码进行审查。它没有给我错误，但也没有添加它。

```
Query q1=ds.createQuery(Product.class).filter("Code", code);
if(q1.countAll()==1)
    {
    ops = ds.createUpdateOperations(Product.class).add("Reviews", review);
    ds.update(q1, ops);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:41:25.783

我想到了。唯一的是查询嵌入式产品，通过添加新评论对其进行修改，并使用 ds.CreateUpdateOperations().Set(ops) 更新该产品

# ruby-on-rails-3 - 对数据表中的数字数据进行右对齐

> ID：12527707
> 
> 赞同：2
> 
> 时间：2012-09-21T09:21:34.410
> 
> 标签：ruby-on-rails-3, jquery-datatables

我正在使用 jquery 数据表。我希望如果值是数字，它的对齐应该是正确的，如果它是字符串，那么对齐应该是左对齐。是否可以使用数据表或其中有任何方法？

```
 <% @tasks.each do |task| -%> 
  <tr>
    <% col_order.each do |key| %>
      <td>
      <% value = task[key.column_name.split(" as ")[1]] || task[key.column_name.split(".")[1]] -%>
      <% if key["drilldown_reportid"].present? %>
        <%= link_to value, project_report_path(@current_project,key["drilldown_reportid"], :column=>"#{key.column_name}", :value=>"#{value}") %>
      <% else %>
        <%= value -%> </td>
      <% end %>
    <% end %>
  </tr>

  <% end -%> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T09:30:07.277

我通过更改客户端代码（不更改任何服务器端代码）解决了这个问题。

在文件**css/jquery.dataTables.css 中，** 我添加了一个类

```
.alignRight { text-align: right; } 
```

在我用于处理数据的 javascript 文件中，我更改了“aoColumnDefs”...

```
///...
"aoColumnDefs" : [
//...col 1 -6
// col_07

{
    "aTargets" : [ 7 ],
    "fnRender" : function(oObj) {
            return Math.round(oObj.aData["endingDepth"] * 100) / 100;
    },
    "sTitle" : "Ending Depth [m]",
    "sWidth" : "5em",
    "sClass" : "alignRight"
},
//... more columns 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-11T14:53:18.137

```
Another solution: add the following line and no need the update the CSS

///...
"aoColumnDefs" : [
//...col 1 -6
// col_07

{
    "aTargets" : [ 7 ],
    "fnRender" : function(oObj) {
            return Math.round(oObj.aData["endingDepth"] * 100) / 100;
    },
    "sTitle" : "Ending Depth [m]",
    "sWidth" : "5em",
    "sClass" : "right"
},
//... more columns 
```

# sql - SQL SERVER 中使用 PIVOT 命令的行到列（将 NULL 值替换为 0 并显示所有值的总和）

> ID：12527708
> 
> 赞同：2
> 
> 时间：2012-09-21T09:21:37.110
> 
> 标签：sql, sql-server

我想在 Sql Server 中显示行到列。我已经看到了其他问题，但这些列在数据透视表中是硬编码的，但我的列将是动态的。到目前为止我所取得的成就。如屏幕截图所示，我能够将行转换为列，但我无法完成的几件事..需要你的帮助

1.  将所有列中的 NULL 替换为 0
2.  需要再添加 1 列，它将显示除 companyID 之外的所有列的总和

我的 SQL 代码：

```
DECLARE @Columns VARCHAR(MAX)
DECLARE @Convert VARCHAR(MAX)

SELECT  @Columns = STUFF((
           SELECT '],[' + ErrClassfn
             from ArchimedesTables.dbo.PM_ErrClassificationSetup
            WHERE CONVERT(VARCHAR(10), ISNULL(EndDate, GETDATE()), 101) 
                          Between CONVERT(VARCHAR(10), GETDATE(), 101)
                          AND     CONVERT(VARCHAR(10), GETDATE(), 101)
            ORDER BY '],[' + CONVERT(VARCHAR(MAX), ID) ASC
              FOR
                  XML PATH('')
           ), 1, 2, '') + ']'

SET @Convert = 'SELECT  * INTO #mynewTable FROM
(
    SELECT COUNT(WQ.ErrClassfnID) as ErrorCount, UPPER(WQ.CompanyID) as CompanyID, 
           PME.ErrClassfn as ErrorName
      FROM Version25.dbo.WF_Quality AS WQ
      LEFT JOIN ArchimedesTables.dbo.PM_ErrClassificationSetup as PME
           ON WQ.ErrClassfnID = PME.ID
     GROUP BY
          UPPER(CompanyID), ErrClassfn
) Quality PIVOT ( SUM(ErrorCount)  For ErrorName IN (' + @Columns
    + ')) as PivotTable  SeLeCt * FROM #mynewTable'

EXEC(@Convert) 
```

![在此处输入图像描述](../Images/3f0cdd67bf90c99f916b263c2911b7a2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:37:11.447

您可以更改动态枢轴的列名称等，类似于：

```
DECLARE @ColumnsNull VARCHAR(MAX)
DECLARE @Columns VARCHAR(MAX)
DECLARE @Convert VARCHAR(MAX)

SELECT  @ColumnsNull = STUFF((SELECT ', IsNull(' + QUOTENAME(ErrClassfn) +', 0) as ['+ rtrim(ErrClassfn)+']' 
                   from ArchimedesTables.dbo.PM_ErrClassificationSetup
                   WHERE CONVERT(VARCHAR(10), ISNULL(EndDate, GETDATE()), 101) 
                                  Between CONVERT(VARCHAR(10), GETDATE(), 101)
                                  AND     CONVERT(VARCHAR(10), GETDATE(), 101)
                   ORDER BY ID ASC
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

SELECT  @Columns = STUFF((
           SELECT '],[' + ErrClassfn
             from ArchimedesTables.dbo.PM_ErrClassificationSetup
            WHERE CONVERT(VARCHAR(10), ISNULL(EndDate, GETDATE()), 101) 
                          Between CONVERT(VARCHAR(10), GETDATE(), 101)
                          AND     CONVERT(VARCHAR(10), GETDATE(), 101)
            ORDER BY '],[' + CONVERT(VARCHAR(MAX), ID) ASC
              FOR
                  XML PATH('')
           ), 1, 2, '') + ']'

SET @Convert = 'SELECT  CompanyID, '+ @ColumnsNull + '
                INTO #mynewTable 
                FROM
                (
                    SELECT COUNT(WQ.ErrClassfnID) as ErrorCount, UPPER(WQ.CompanyID) as CompanyID, 
                           PME.ErrClassfn as ErrorName
                      FROM Version25.dbo.WF_Quality AS WQ
                      LEFT JOIN ArchimedesTables.dbo.PM_ErrClassificationSetup as PME
                           ON WQ.ErrClassfnID = PME.ID
                     GROUP BY
                          UPPER(CompanyID), ErrClassfn
                ) Quality PIVOT ( SUM(ErrorCount)  For ErrorName IN (' + @Columns
                    + ')) as PivotTable  SeLeCt * FROM #mynewTable'

EXEC(@Convert) 
```

我建议先编写查询并让列正常工作，然后将数据添加到#temp 表中。这样调试会更容易。

您也可以`SUM()`以相同的方式创建一个字段，在其中动态构建它，然后将其添加到 final 中`SELECT`：

所以它可能是这样的，你可以添加到 final 中`SELECT`：

```
SELECT  @ColumnsTotal = STUFF((SELECT '+' + QUOTENAME(ErrClassfn) 
                   from ArchimedesTables.dbo.PM_ErrClassificationSetup
                   WHERE CONVERT(VARCHAR(10), ISNULL(EndDate, GETDATE()), 101) 
                                  Between CONVERT(VARCHAR(10), GETDATE(), 101)
                                  AND     CONVERT(VARCHAR(10), GETDATE(), 101)
                   ORDER BY ID ASC
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'') 
```

# java - 生成 md5 并检查碰撞

> ID：12527710
> 
> 赞同：1
> 
> 时间：2012-09-21T09:21:41.183
> 
> 标签：java, hash, md5, bloom-filter

我需要为约 4000 万个带盐的字符串（约 20 个符号）生成 md5 哈希，

md5（字符串+盐）

检查碰撞，然后将它们保存到 bd。然后当盐改变时，我需要用新的盐生成新的哈希，检查冲突并检查与旧哈希的冲突。

这里有一些库可以帮助我吗？也许布隆过滤器可以提供帮助？我可以使用 HashMap 来检查冲突吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:30:46.050

我建议在数据库中插入生成的 md5 哈希，并检查循环的每次迭代。您可以在“哈希值”列中创建索引以进行更快的搜索。该表将非常大，您还可以将哈希划分为多个表（甚至数据库），具有不同的第一个字符或第一组字符（hashes_aa、hashes_ab 等）。

您是否经常更换盐以使该解决方案对您不起作用？

**编辑：**碰撞将非常非常罕见，您可以跳过检查吗？

# php - netbeans中的javascript验证问题

> ID：12527721
> 
> 赞同：1
> 
> 时间：2012-09-21T09:22:23.817
> 
> 标签：php, javascript, xampp, netbeans-7

我是新手`Netbeans`。我创建了一个简单的`php`项目。它由一个表单组成，我编写了一个单独的`Javascript`文件来验证其字段。我尝试在 netbeans 之外运行该项目，它工作正常。我最近将该项目导入了 netbeans，但 javascript 似乎无法正常工作。当我尝试在浏览器中打开页面（表单页面）时，整个 javascript 文件出现在页面上。我不知道我要去哪里错了。由于我是 netbeans 的新手，我无法纠正它。请帮忙。

我的 Javascript 文件已命名`Validation.js`并位于`js`文件夹中。

```
function ValidateForm(theForm)
{
  //returns true/false after validation 
} 
```

我的 php 文件看起来与此类似。

```
<?php include "js/Validation.js"; 
  //if validation returns true
 if(isset($_POST))
 {
    if(isset ($_POST['bt_save']) && $_POST['bt_save'] == 'Submit')
    {
         //code to insert fields into database after validation
    }
 }
?>
<form method="post" name="form1" id="form1" onsubmit="return ValidateForm(this);">
 <!--form elements-->
 <input type="submit" name="bt_save" value="Submit"/>
</form> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:27:25.657

您的包含错误，如果您使用 php[包含](http://php.net/manual/en/function.include.php)它只会加载页面。

尝试使用`<script type="text/javascript" src="js/Validation.js"></script>`. 而不是`include "js/Validation.js"`.

所以你的新文件会是这样的。

```
<?php
  //if validation returns true
 if(isset($_POST))
 {
    if(isset ($_POST['bt_save']) && $_POST['bt_save'] == 'Submit')
    {
         //code to insert fields into database after validation
    }
 }
?>
<form method="post" name="form1" id="form1" onsubmit="return ValidateForm(this);">
 <!--form elements-->
 <input type="submit" name="bt_save" value="Submit"/>
</form>
<script type="text/javascript" src="js/Validation.js"></script> 
```

# sql - 如果 ActiveRecord 中不存在函数，则创建？

> ID：12527722
> 
> 赞同：8
> 
> 时间：2012-09-21T09:22:27.423
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, activerecord, ruby-on-rails-3.2

我正在使用 Rails 3.2.8。如果状态记录尚不存在，我需要创建状态记录。如果存在状态记录，我什么也不做。所以我的代码是这样的：

```
user_level_status = UserLevelStatus.where(user_id: user_id, level_id: level_id).first
if !user_level_status
  UserLevelStatus.create(user_id: user_id, level_id: level_id, status: UserLevelStatus::READY)
end 
```

在 Rails/ActiveRecord 中有没有更好的方法来处理这个问题？有没有等价的机制`find_or_create_by_`？我可以使用`find_or_create_by_user_id`并检查`level_id`吗？我只会丢弃结果，所以即使这样也不是那么优雅。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-21T09:27:57.980

就在这里。

## 导轨 3

```
user_level_status = UserLevelStatus.find_or_create_by_user_id_and_level_id(user_id, level_id) 
```

## 导轨 4：

```
user_level_status = UserLevelStatus.find_or_create_by(user_id: user_id, level_id: level_id) 
```

你应该[在你的模型中设置](https://stackoverflow.com/questions/1550688/how-do-i-create-a-default-value-for-attributes-in-rails-activerecords-model)[默认值`status`](https://stackoverflow.com/questions/1550688/how-do-i-create-a-default-value-for-attributes-in-rails-activerecords-model)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-22T06:46:23.793

你应该使用

```
UserLevelStatus.where(user_id: user_id, level_id: level_id).first_or_create(status: UserLevelStatus::READY) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T09:27:51.413

利用[`find_or_create_*`](https://stackoverflow.com/a/4200277/297087)

```
hash = {user_id: user_id, level_id: level_id, status: UserLevelStatus::READY}
UserLevelStatus.find_or_create_by_user_id_and_level_id_and_status(hash) 
```

已编辑对于您的情况，您应该使用以下内容

```
hash = {user_id: user_id, level_id: level_id}
UserLevelStatus.find(:first, :conditions => hash) || UserLevelStatus.create(hash.merge({status: UserLevelStatus::READY}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T12:56:36.730

另一种选择是

```
UserLevelStatus.where(user_id: user_id, level_id: level_id).first ||
  UserLevelStatus.create(user_id: user_id, level_id: level_id, status: UserLevelStatus::READY) 
```

# sql - 如何从存储过程中用户定义的文件路径获取文件扩展名？

> ID：12527723
> 
> 赞同：0
> 
> 时间：2012-09-21T09:22:27.163
> 
> 标签：sql, stored-procedures, sqlanywhere

嗨，我有一个如下所示的存储过程：

```
ALTER PROCEDURE "DBA"."my_enr_test"(in file_name char(255), in uploaded_by char(100))
/* RESULT( column_name column_type, ... ) */
BEGIN

    declare filepath char(100);
    declare validatefile char(255);

    // declare rc bit;

    set filepath = file_name;
    set Filename = Substr(FilePath, PatIndex('.', FilePath),3);

        if filepath <> 'xml' and filepath <> 'csv' then
            set validatefile = 'Invalid File Format'
        else
            set validatefile = 'Valid'
        end if;

    INSERT INTO DBA.pro_import_paths(filename, filevalidate, updated_by) values(filename, validatefile, uploaded_by); 

// RETURN rc;

END 
```

现在，它捕获最后三个字母并验证并存储在数据库列中。但是不是捕获最后三个字母，而是在点之后捕获并将文件名存储为用户定义的相同文件名的任何其他方式。提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:28:05.547

你可以使用**reverse**，**substring**，**charindex**，你会得到你需要的结果..

```
SET Filename = SELECT reverse(substring(reverse('FilePath.exe'),1, 
               charindex('.', reverse('FilePath.exe')))) 
```

对于多个“.” 存在于文件名中，您可以使用：

```
SET Filename = SELECT  
               SUBSTRING('FilePath.com.exe',  
      LEN('FilePath.com.exe') - (CHARINDEX('.', reverse('FilePath.com.exe'))-2), 8000) 
```

# python - 为按值查找键构建字典

> ID：12527724
> 
> 赞同：2
> 
> 时间：2012-09-21T09:22:30.423
> 
> 标签：python

字典通常适合按键查找值，但按键查找速度很慢

```
for k,v in dictionary.items():
    if v = myValue:
        return k 
```

是否已经有一个数据结构可以同时生成 key->value 和 ke

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T09:24:50.353

你可以试试[bidict](http://pypi.python.org/pypi/bidict)：

```
>>> husbands2wives = bidict({'john': 'jackie'})
>>> husbands2wives['john'] # the forward mapping is just like with dict
'jackie'
>>> husbands2wives[:'jackie'] # use slice for the inverse mapping
'john' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-21T09:25:17.840

只需创建一个倒置映射：

```
from collections import defaultdict
inverted = defaultdict(list)
for k, v in dictionary.iteritems():
    inverted[v].append(k) 
```

请注意，上面的代码处理重复值；`inverted[v]`返回保存该值的键*列表。*

如果您的值也是唯一的，则可以使用简单的 dict 代替`defaultdict`：

```
inverted = { v: k for k, v in dictionary.iteritems() } 
```

或者，在 python 3 中，`items()`字典视图在哪里：

```
inverted = { v: k for k, v in dictionary.items() } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T09:27:37.870

蟒蛇 3：

```
revdict = {v:k for k,v in dictionary.items()} 
```

（改为使用 Python 2 `.iteritems()`）

# excel - 如何从 VBA 中的两个范围创建一个范围？

> ID：12527725
> 
> 赞同：24
> 
> 时间：2012-09-21T09:22:30.773
> 
> 标签：excel, vba

我有两个范围，每个范围都包含一个单元格（例如“A1”和“C3”）。

如何获得一个包含这两者之间所有单元格的新范围（“A1：C3”）？

我试过这个：

```
Set NewRange = Range(Range1.Address:Range2.Address) 
```

另外如何设置 R1C1 格式的范围？我想使用 Range("R1C2") 之类的东西，而不是 Range("A2")。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-21T09:31:16.527

像这样？

```
Sub Sample()
    Dim rng1 As Range, rng2 As Range
    Dim NewRng As Range

    With ThisWorkbook.Sheets("Sheet1")
        Set rng1 = .Range("A1")
        Set rng2 = .Range("C3")

        Set NewRng = .Range(rng1.Address & ":" & rng2.Address)

        Debug.Print NewRng.Address
    End With
End Sub 
```

代替 R1C1 格式使用`Cells(r,c)`. 这会给你更多的灵活性+控制

所以`Range("A2")`可以写成`Cells(2,1)`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-21T09:31:59.453

您可以通过各种方式设置新范围。下面是几个例子。要获得 R1C1 格式 - 我个人发现输入普通公式然后使用 VBA 提取所需的 R1C1 格式更容易。请参阅下面的 debug.print 语句。

```
Sub test()
Dim rng1 As Range
Dim rng2 As Range
Dim newRng As Range

    With Sheet1

        Set rng1 = .Range("A1")
        Set rng2 = .Range("C3")

        Debug.Print rng1.FormulaR1C1
        Debug.Print rng1.FormulaR1C1Local

        'Method1
        Set newRng = .Range(rng1, rng2)

        'method2
        Set newRng = .Range(rng1.Address, rng2.Address)

        'method3 (Only works if rng1 & rng2 are single cells
        Set newRng = .Range(rng1.Address & ":" & rng2.Address)

        'method4
        Set newRng = Union(rng1, rng2)

    End With
End Sub 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-04-01T10:32:40.717

当范围不相邻时，方法 4 与方法 1 不同。

```
With Sheet1
Set rng1 = .Range("A1:A3")
Set rng2 = .Range("C1:C3")

'This combines the two separate ranges, so select A1, A2, A3, C1, C2, C3
set newRng = Union(rng1, rng2)

'This combines the two ranges in the same way as when using "A1:C3", 
'so including the cells from column B
set newRng = .Range(rng1, rng2) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-11T00:35:12.170

也可能是这样的：

```
 Dim newRange as Range
    Set newRange = Range("A1:A4,A7:A9,C1:D9")  'Three different regions grouped
    'or
    Set newRange = Range("A1:A4,A7:A9,C1:D9, D10:D11")  'Four different regions grouped.
    'or
    Set newRange = Range("A1:A4,A7:A9,C1:D9, D10:D11, ...")  'N different regions grouped. 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-09-12T10:56:26.373

把它放在一个模块中：

```
Private Function CombineRanges(rng1 As Range, rng2 As Range) As Range

    Set CombineRanges = ActiveSheet.Range(rng1.Address & ":" & rng2.Address)

End Function 
```

像这样使用它：

```
Dim NewRange As Range
Set NewRange  = CombineRanges(Range1, Range2) 
```

# android - Textview 不改变文本颜色

> ID：12527733
> 
> 赞同：0
> 
> 时间：2012-09-21T09:22:59.537
> 
> 标签：android, colors, textview

我在 Textview 的某些部分设置 textcolor 时遇到问题。文本在 layout-xml 中定义为白色。当用户在游戏中选择写答案时，会触发此方法调用：

```
this.Question = (TextView) findViewById(R.id.layout1Question);    
this.Question.setText(Html.fromHtml("<font color = 'green'>CORRECT: </font>") + this.CurrentQuestion.getFillin()); 
```

在这里，我希望 CORRECT 部分显示绿色文本，而其余部分默认为白色。但整个文本显示为白色。我究竟做错了什么？

谢谢你的帮助！

编辑：如果我删除第二部分，它会起作用，因此：

`this.Question.setText(Html.fromHtml("<font color = 'green'>CORRECT: </font>"));`

工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:35:25.293

尝试将`geFillin()`调用移至`fromHtml`参数。可能是字符串连接将`Spanned`字符串转换回简单字符串。

```
this.Question.setText(
       Html.fromHtml("<font color='green'>CORRECT: </font>" + this.CurrentQuestion.getFillin())); 
```

# sql - 即使不存在记录，SQL Pivot 也会返回表连接上的所有行（交叉连接？）

> ID：12527738
> 
> 赞同：0
> 
> 时间：2012-09-21T09:23:33.803
> 
> 标签：sql, model-view-controller, pivot

我已经成功地将我的数据转换为数月。但是，数据透视表只返回在我的 KPIData 表中具有值的行。

我正在针对 KPIData 旋转 Months，并从 KPIGraph 中引入一些字段进行过滤。每当我添加 KPIGraphs 行并且 KPIData 中没有相关记录时，我希望能够在每个月列的行中显示空值。目前，这只适用于我在我的 KPIData 表中添加至少 1 个值，然后由于连接而将所有内容链接在一起。

关系设置如下：http: [//goo.gl/9lvhF](http://goo.gl/9lvhF)

我做了一些阅读，发现我需要在这里使用交叉连接？我从未使用过其中之一，经过进一步挖掘后，它在我的数据透视 sql 中的实现完全让我感到困惑。

```
SELECT *
FROM (
    SELECT [t0].[GraphID], CASE MonthID
            WHEN 1 THEN 'October'
            WHEN 2 THEN 'November'
            WHEN 3 THEN 'December'
            WHEN 4 THEN 'January'
            WHEN 5 THEN 'February'
            WHEN 6 THEN 'March'
            WHEN 7 THEN 'April'
            WHEN 8 THEN 'May'
            WHEN 9 THEN 'June'
            WHEN 10 THEN 'July'
            WHEN 11 THEN 'August'
            WHEN 12 THEN 'September'
            END AS [Month], [t0].[Value], [t3].[Graph_Type], [t5].[Department], [t6].
        [Type], [t8].[Financial_Year], [t7].[FYID], [t4].[KPITypeID]
    FROM [KPIDatas] AS [t0]
    INNER JOIN [Months] AS [t1] ON [t1].[ID] = [t0].[MonthID]
    INNER JOIN [KPIGraphs] AS [t2] ON [t2].[ID] = [t0].[GraphID]
    INNER JOIN [GraphTypes] AS [t3] ON [t3].[ID] = [t2].[GraphTypeID]
    INNER JOIN [KPIs] AS [t4] ON [t4].[ID] = [t2].[KPIID]
    INNER JOIN [Departments] AS [t5] ON [t5].[ID] = [t4].[DeptID]
    INNER JOIN [KPITypes] AS [t6] ON [t6].[ID] = [t4].[KPITypeID]
    INNER JOIN [CSFs] AS [t7] ON [t7].[ID] = [t4].[CSFID]
    INNER JOIN [FYs] AS [t8] ON [t8].[ID] = [t7].[FYID]
    ) TableDate
PIVOT(SUM(Value) FOR [Month] IN (
            [October], [November], [December], [January], [February], [March], [April]
            , [May], [June], [July], [August], [September]
            )) PivotTable 
```

对此的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:53:33.710

在更多的混乱之后设法解决了这个问题。我的子查询需要一个 RIGHT OUTER JOIN 以确保它拉回 Null。然后，当 Pivot 代码开始发挥作用时，这些内容将在我的几个月内展开。

```
 dbo.KPIDatas AS t0 RIGHT OUTER JOIN 
```

# ios - 如何在警报 iOS 中显示表格

> ID：12527739
> 
> 赞同：0
> 
> 时间：2012-09-21T09:23:46.013
> 
> 标签：ios

所以我有一个标签，当我点击它时，我希望它在“警报”类型的弹出窗口中显示某种表格，允许您**滚动**（因为会有很多行数据）像这样的值：

```
1) some value : correct
2) Some other value : incorrect 
```

我拥有的数据存储在两个不同`NSMutableArray`的s中。

我知道我可以使用类似这样的代码进行警报显示，

```
 UIAlertView *message = nil;

        message = [[UIAlertView alloc] initWithTitle:@"Definition"
                                             message:definition
                                            delegate:nil
                                   cancelButtonTitle:@"OK"
                                   otherButtonTitles:nil];
    [message show]; 
```

是否有可能做到这一点？如果是这样，我应该看什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:29:13.587

这将是一个非常糟糕的解决方案——为什么不使用模态控制器呢？

无论如何，您始终可以将子视图添加到`UIAlertView`. 但是，请注意，更改其大小可能会很复杂。

# flash - 使用 OpenLaszlo SWF11 运行时定位 Flash Player 11.2 - 11.4 API

> ID：12527743
> 
> 赞同：2
> 
> 时间：2012-09-21T09:23:57.920
> 
> 标签：flash, runtime, openlaszlo, flash-player-11, lzx

我在[这里](https://stackoverflow.com/questions/11949303)读到有一个 OpenLaszlo 版本能够将 LZX 编译为 Flash Player 11.1 的 SWF11 文件。OpenLaszlo 的 flex4.6 分支中包含的 SDK 是——正如我们可以从名称中看出的——Flex SDK 4.6。

[在关于OpenLaszlo 中的 Flash 上下文菜单的](https://stackoverflow.com/questions/12518938/)另一个讨论中，提到可以使用 OpenLaszlo 的 flex4.6 分支来定位高于 11.1 的 Flash Player API。

需要对 flex4.6 分支进行哪些更改才能实现这一点？这是否涉及更改 LPS 中的 Java 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T19:16:35.887

不幸的是，对于 OpenLaszlo 的 flex4.6 主干版本，需要对 Java 源代码进行一些小的更改，以便 Flex SDK 集成以针对 Flash Player 11.2+ API。

受影响的文件和文件夹是：

*   Java 类 org.openlaszlo.sc.SWF9External 和 org.openlaszlo.server.LPS
*   Flex SDK文件夹，需要添加对应的playerglobal.swc
*   WEB-INF/lps/config 中的 lps.properties 文件

我已经在我的机器上准备好该代码，但我不愿意再向 OpenLaszlo 贡献任何代码，因此我将无法在 flex4.6 分支中修复此问题。

# html - 正则表达式搜索时如何从标签中跳过内容？

> ID：12527748
> 
> 赞同：-2
> 
> 时间：2012-09-21T09:24:23.083
> 
> 标签：html, regex, pattern-matching, nsregularexpression

> **可能重复：**
> [正则表达式匹配打开的标签，XHTML 自包含标签除外](http://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

我有一个像这样的html字符串

```
<html>
  <div>
      <p>this is sample content</p>
  </div>
  <div>
      <p>this is another sample</p>
      <span class="test">this sample should not caught</span>
      <div>
       this is another sample
      </div>
  </div>
</html> 
```

现在我想`sample`从这个字符串中搜索单词，这里我不应该得到里面的“样本”`<span>...</span>`

我希望使用正则表达式完成此操作，我尝试了很多但我做不到，任何帮助都非常有用。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T09:34:52.793

`span`如果可以有嵌套标签，这非常脆弱并且失败。如果您没有这些，请尝试

```
(?s)sample(?!(?:(?!</?span).)*</span>) 
```

`sample`仅当下一个`span`标签（如果有）不是结束标签时才匹配。

**解释：**

```
(?s)          # Switch on dot-matches-all mode
sample        # Match "sample".
(?!           # only if it's not followed by the following regex:
 (?:          #  Match...
  (?!</?span) #   (unless we're at the start of a span tag)
  .           #   any character
 )*           #  any number of times.
 </span>      #  Match a closing span tag.
)             # End of lookahead 
```

`sample`仅当它既不在 a`span`也不在 a 内时才匹配`p`，您可以使用

```
(?s)sample(?!(?:(?!</?span).)*</span>)(?!(?:(?!</?p).)*</p>) 
```

但是所有这一切都完全取决于标签被取消嵌套（即，没有两个相同类型的标签可以嵌套）和正确平衡（通常没有`p`标签给出）。

# svn - 无法在soapui中配置SVN

> ID：12527750
> 
> 赞同：0
> 
> 时间：2012-09-21T09:24:46.657
> 
> 标签：svn, tortoisesvn, soapui

如何在soapui中提交soapui脚本？我正在使用soapui pro，但无法在其中配置SVN....谁能告诉我如何在soapui中配置SVN？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T03:27:00.403

据我所知，您不能直接在soapUI 中控制SVN。您可以做的是对创建的项目文件进行版本控制。每个新项目只是一个 xml 文件，这就是该工具的美妙之处。有了项目文件后，您可以将其添加到 svn 存储库中。然后其他人可以签出该项目并对其进行更新。

所以你的过程是：

1.  SVN 结帐当前项目
2.  在soapUI中打开项目
3.  在soapUI中进行更改并保存
4.  签入更新的项目文件

# c++ - XCode iOS 项目中未捕获 C++ 异常

> ID：12527751
> 
> 赞同：2
> 
> 时间：2012-09-21T09:24:48.540
> 
> 标签：c++, objective-c, xcode, exception

我创建了一个 C++ 库。我在 iOS 应用程序中使用它。我想到了在 C++ 库中处理异常，为了对此进行测试，我创建了一个测试方案并从中调用了 c++ 函数。在 c++ 函数中，我故意编写了错误的代码。

```
try 
{
    int i = 0;
    int j = 10/i;
} 
catch(std::exception &e){
    printf("Exception : %s\n",e.what());
} 
```

但该异常永远不会被捕获，并且应用程序在 -int j = 10/i; 处中断。

请告诉我，在这种情况下，如何向我的 c++ 代码添加异常处理？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:28:13.457

当遇到被零除时，C++ 不会抛出异常（另请参阅[this](https://stackoverflow.com/questions/6121623/catching-exception-divide-by-zero)和[this](https://stackoverflow.com/questions/4747934/c-catch-a-divide-by-zero-error) other questions）！引用 Stroustrup 的话：

> 低级事件，例如算术溢出和除以零，被假定由专用的低级机制而不是异常处理。这使得 C++ 在算术方面能够匹配其他语言的行为。它还避免了在诸如除以零之类的事件是异步的大量流水线架构上发生的问题。

*“C++ 的设计和演变”（Addison Wesley，1994 年）*

所以你必须自己处理这个案例——你必须在除法之前检查每个潜在的除数并处理它。

# javascript - 从 webview 中显示的 html 网页中搜索并突出显示一个单词？

> ID：12527757
> 
> 赞同：0
> 
> 时间：2012-09-21T09:25:03.457
> 
> 标签：javascript, android, html, webview

我想在 android webview 中搜索并突出显示一个单词，我尝试使用此代码，但它不起作用。我的代码在这里：

```
webview.findAll("a");
webview.setSelected(true);
webview.findNext(true);

try {
    for (Method m : WebView.class.getDeclaredMethods()) {
        if (m.getName().equals("setFindIsUp")) {
            // m.setAccessible(true);
            m.invoke(webview, true);
            break;
        }
    }
} catch (Exception ignored) 
{
    Log.i("highlight error", ignored.toString());
} 
```

此代码没有在所选单词上设置任何突出显示或没有给出任何错误，所以请告诉我如何在 webview 中搜索和选择一个单词，目前我正在尝试使用 android 版本 3.2？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:53:11.103

在 WebView 布局上设置搜索按钮。设置 WebView，然后设置一个搜索按钮，如下所示。弹出对话框有一个取消按钮、一个搜索按钮和一个搜索词的编辑文本。按下搜索时，EditText 字符串的每个匹配项都将在 WebView 中突出显示。

```
 final Activity activity = this;

    webView = (WebView) findViewById(R.id.yourWebView);  
    webView.setScrollbarFadingEnabled(false);  
    webView.setHorizontalScrollBarEnabled(false);  
    webView.getSettings().setJavaScriptEnabled(true);  
    webView.clearCache(true); 

    webView.setWebChromeClient(new WebChromeClient() {
        public void onProgressChanged(WebView view, int progress) {
        progressDialog.setCanceledOnTouchOutside(true);
        progressDialog.setTitle("Loading Web Page");
        progressDialog.setIcon(R.drawable.ic_menu_allfriends);
        progressDialog.setButton("Cancel", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {  
                webView.destroy();
                finish();
                } });
        progressDialog.show();
        progressDialog.setProgress(0);
        activity.setProgress(progress * 1000);
        progressDialog.incrementProgressBy(progress);
        if(progress == 100 && progressDialog.isShowing())
                progressDialog.dismiss();
        }
    });

    webView.loadUrl(yourStringURL);

    Button search = (Button) findViewById(R.id.butSearch);
    search.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
        //set up button for search keyword of the webView                 
            final Dialog dSearch = new Dialog(myActivity.this);
            dSearch.setContentView(R.layout.search_keyword);
            dSearch.setCancelable(true);
            dSearch.setTitle(getString(R.string.yourTitle));

            Button cancel = (Button) dSearch.findViewById(R.id.searchCancel);
            cancel.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                    dSearch.dismiss();
                }
            });

            Button search = (Button) dSearch.findViewById(R.id.searchAdd);
            search.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                    EditText etkw = (EditText) dSearch.findViewById(R.id.searchword);
                    String keyword = etkw.getText().toString();
                    dSearch.dismiss();
                    webView.findAll(keyword);
                    try
                        {
                        Method m = WebView.class.getMethod("setFindIsUp", Boolean.TYPE);
                        m.invoke(webView, true);
                        }
                    catch (Throwable ignored){}
                }
            }); 
            dSearch.show();
        }
    }); 
```

# html - Chrome - Colspan 没有按预期工作

> ID：12527758
> 
> 赞同：6
> 
> 时间：2012-09-21T09:25:04.223
> 
> 标签：html, google-chrome, internet-explorer, html-table

我有这个代码：

```
<tr>
    <td width="40%" align="left" class="form_cell">
    <span class="sub_header">Update or Delete</span><br />
    Please select whether you would like us to update this contacts details, or delete them from the system.
    </td>

    <td width="60%" align="left" class="form_cell">
    [class=form__parser func=updateDetails__updel(150.$update_or_delete$.true)]
    </td>
</tr>
<tr>
    <td width="100%" align="left" colspan="2" id="ammend_contact_details" style="display: none;">
        <table border="0" cellspacing="0" cellpadding="0" width="100%" align="left">
            <tr>
                <td width="40%" align="left" class="form_cell">
                <span class="sub_header">New Title</span><br />
                            Please enter the contacts new title, IE Mr, Mrs, Dr, Miss, Ms
                </td>

                <td width="60%" align="left" class="form_cell">
                <input type="text" name="update_contact_title" class="input" size="48" maxlength="6" value="$update_contact_title$" />
                </td>
            </tr>
        </table>
    </td>
</tr> 
```

开头的代码`[class=form__parser...]`创建一个下拉列表。如果单击其中一个选项，`ID ammend_contact_details`则会显示其下方的单元格 ( )，否则将隐藏。

该页面的网址是：[http](http://www.westlandstc.com/index.php?plid=6#eyJwbGlkIjoiNTkiLCJjbGlkIjoiNDQ2Iiwic2NsaWQiOiJudWxsIiwiZHluYW0iOiJudWxsIiwiYXBwSWQiOiJudWxsIn0=) ://www.westlandstc.com/index.php?plid=6#eyJwbGlkIjoiNTkiLCJjbGlkIjoiNDQ2Iiwic2NsaWQiOiJudWxsIiwiZHluYW0iOiJudWxsIiwiYXBwSWQiOiJudWxsIn0= ，该元素位于页面的最底部。

问题是，该`colspan`属性在 Internet Explorer 中运行良好（惊喜），但是，在 Chrome 中，所有应该分布在 2 个父列上的内容只进入第一列。

`style="display: none"`如果我删除它工作正常的属性，我已经进一步缩小了错误。每次我尝试更改显示样式或可见性样式时，Chrome 都会将所有内容放回第一列。

此外，我尝试将跨越 2 列的单元格的背景颜色设置为红色。在 Internet Explorer 中，这再次按预期工作。在 chrome 中，不显示背景颜色。

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-21T09:33:33.547

您将“显示”属性设置为什么以显示它？iirc您需要使用'display：table-cell'（或类似的-不记得确切的值）才能让chrome将其视为表格单元格

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-09T05:08:20.983

> style.display=''

适用于我的铬。

> '显示：表格单元格'

才不是

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T09:41:43.167

与其将 CSS 属性添加`display:inline`到`<td>`IE 中（出于某种原因 IE 很满意而 Chrome 不满意），我会更新您的 JavaScript 以删除`display:none`样式并让浏览器的默认值`display:table-cell`生效。

在`<select name="update_or_delete">`onchange 方法中简单地有：

```
if(this.value=='Update') { 
  document.getElementById('ammend_contact_details').style.display='';
} else { 
  document.getElementById('ammend_contact_details').style.display='none';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-13T19:27:33.220

Chrome 似乎并不尊重`colspan`，除非它至少有 1 行与表中的列数完全匹配。我试图制作一个网格，第一行有 2 个项目，第二行有 3 个项目。**对于 Firefox**，这就是您所需要的：

```
td {
  display: table-cell;
  padding: 10px;
  text-align: center;
  background: #eee;
}
```

```
<table style="width: 100%">
  <tr>
    <td colspan="3" style="width: 50%">box 1.1</td>
    <td colspan="3" style="width: 50%">box 1.2</td>
  </tr>
  <tr>
    <td colspan="2" style="width: 33.33%">box 2.1</td>
    <td colspan="2" style="width: 33.33%">box 2.2</td>
    <td colspan="2" style="width: 33.33%">box 2.3</td>
  </tr>
</table>
```

但它**不适用于 Chrome 和 Edge**，即使所有`<td>`s 都具有默认样式：`display: table-cell`。要修复它，您需要添加与列数完全匹配的空行，因此它最终看起来像这样：

```
td {
  display: table-cell;
  padding: 10px;
  text-align: center;
  background: #eee;
}
```

```
<table style="width: 100%">
  <tr>
    <td colspan="3" style="width: 50%">box 1.1</td>
    <td colspan="3" style="width: 50%">box 1.2</td>
  </tr>
  <tr>
    <td colspan="2" style="width: 33.33%">box 2.1</td>
    <td colspan="2" style="width: 33.33%">box 2.2</td>
    <td colspan="2" style="width: 33.33%">box 2.3</td>
  </tr>
  <tr style="visibility: hidden">
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
</table>
```

# jquery - 如何了解用户是使用自定义滚动器还是鼠标进行滚动

> ID：12527764
> 
> 赞同：1
> 
> 时间：2012-09-21T09:25:29.480
> 
> 标签：jquery, html, scrollto, scroller

我已经实现了一个自定义滚动条，你可以[在这里](http://xycomm.linkmesrl.com/site/news)看到。对于我的滚动条，我使用了[ScrollTo](http://demos.flesler.com/jquery/scrollTo/)。问题是我需要了解用户何时使用我的自定义滚动条以及何时使用鼠标或其他滚动方式，例如键盘。我试过这个：

```
$(window).scroll(function(){

}); 
```

而且我的自定义滚动条也会触发这个。这是我的页面结构：

```
<div class="page">

   <div id="scroller" class="news-scroller">
     <div ><span id="up"></span></div>
     <div ><span id="down"></span></div>
   </div>

   <div class="news">
   </div>
   <div class="news">
   </div>
   .... 
```

这是我的自定义滚动条的代码：

```
var current = $(".news").eq(0);

$("#down").click(function(){
   if(current.next().size() > 0)
   {
      current = current.next();
      $.scrollTo("#"+current.attr("id"), 800);     

   }
   else  if(current.next().size() <= 0)
   {
    return
   }
});

$("#up").click(function(){
   if(current.prev().size() > 0)
   {
      current=current.prev();
      $.scrollTo("#"+current.attr("id"), 800);
   }
   else  if(current.prev().size() <= 0)
   {
      return;
   }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:30:43.600

由于可能有其他人在寻找此内容，因此结论如下： $(window).scroll() 发生在任何滚动事件中，无论它是使用鼠标、键盘还是任何类型的滚动。以某种方式将它们彼此区分开来的唯一方法是在自定义滚动条中找到一种模式（例如，我的滚动条在特定时间内滚动特定距离），这不是一个非常准确的解决方案。

我尝试的解决方案是在我的自定义滚动条中触发一个自定义事件，这样我就可以了解用户何时使用我的自定义滚动条，何时不使用。

# excel - Microsoft Excel 2010：=NETWORKDAYS()

> ID：12527766
> 
> 赞同：0
> 
> 时间：2012-09-21T09:25:36.217
> 
> 标签：excel, ms-office

我遇到了 =NETWORKDAYS() 函数的问题。

这是我的桌子：

```
 A            B            C
    Start date    End Date      #Days
1   15/05/2012    17/05/2012 
```

在`C1`我输入了公式`=NETWORKDAYS(A1,B1)`

答案应该是`2`，但我得到了`01/01/1900`。

对于表中的每个日期，我都使用了日期函数，例如：`=DATE(2012,05,15)`

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:34:20.417

你的公式`=NETWORKDAYS(A1,B1)`应该给出结果 `3`。

你得到的结果`01/01/1900`是 value is `1`but `cell format`is set to `Date`。这就是它以日期格式显示的原因。将单元格编号格式更改为常规。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:33:34.910

要解决此问题，请右键单击您的单元格并选择“设置单元格格式”或导航到“格式”->“单元格”。在出现的窗口中单击数字并选择 0 作为小数位数。

# objective-c - mainThread阻塞时UIActivityIndi catorView如何不停止？

> ID：12527767
> 
> 赞同：2
> 
> 时间：2012-09-21T09:25:40.447
> 
> 标签：objective-c, ios, nsthread, uiactivityindicatorview

*mainThread*阻塞的时候怎么能`UIActivityIndicatorView` 不停止呢？

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:57:17.070

我不认为你可以，因为视图使用主线程本身来执行动画。如果您在主线程上执行长时间运行的进程（例如网络或长时间计算进程），请考虑更改您的设计。例如使用 GCD、线程等。*

# database - 关于在 Django 数据库中存储一些琐碎值的架构的建议？

> ID：12527768
> 
> 赞同：1
> 
> 时间：2012-09-21T09:25:43.770
> 
> 标签：database, django

我想在数据库中为每个用户存储一些琐碎的值，比如用户是否可以看到新来者的横幅、如何使用每个功能的说明等。当我们遇到时，值的数量会增加新的主意。

所以我考虑了两种存储这些数据的解决方案。每个值都有一个字段（**因此表的结构至少会更改几次**），或者所有这些类型的数据都有一个字段，因此它们作为字典存储在字段中（**在此情况下，我担心它是否会损害数据库性能，我还需要编写更多的逻辑来解析字符串中的字典以及其他方式，并且如果将字典存储在 db 中与 db 的功能相矛盾**）。

模型.py

```
class Instruction(models.Model):
    user=models.ForeignKey('auth.User')
    can_see_feature_foo_instruction=models.BooleanField()
    can_see_feature_bar_instruction=models.BooleanField()
    ... 
```

或者

```
class Instruction(models.Model):
    user=models.ForeignKey('auth.User')
    instruction_prefs=models.CharField() #Value will be "{'can_see_foo_inst':True, 'can_see_bar_inst':False, ...}" 
```

哪个是最好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T10:01:01.960

这取决于您是否需要能够搜索这些字段。如果是这样，则文本字段选项并不适合，因为不会对各个标志进行索引。但如果不是，那么这是一个非常好的解决方法。您可能需要考虑将其存储为 JSON，这可用作将 dicts 对象序列化为文本并将其取回的方法。在 Django 中有很多关于“JSONField”的实现，它们将为您序列化/反序列化 JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T10:02:57.387

您可以为每个用户的指令/权限的键值对创建模型。例如

```
class Instruction(models.Model):
    user=models.ForeignKey('auth.User')
    key = models.CharField(max_length=20)
    value = models.BooleanField() 
```

然后，您可以根据每个用户的权限为他创建多个实例。

```
>>>> instr1 = Instruction()
>>>> instr1.user = user1
>>>> instr1.key = 'can_see_feature_foo'
>>>> instr1.value = True
>>>> instr1.save()
>>>> instr2 = Instruction()
>>>> instr2.user = user1
>>>> instr2.key = 'can_see_feature_bar'
>>>> instr2.value = True
>>>> instr2.save()
....
#To query
>>>> Instructions.filter(user=user1, key='can_see_feature_bar') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T09:35:49.823

Django 有一个内置的权限系统。尝试阅读此链接[https://docs.djangoproject.com/en/dev/topics/auth/#permissions](https://docs.djangoproject.com/en/dev/topics/auth/#permissions)

**更新** 我想如果你真的想使用指令模型。您可以使用 JSONField 之类的东西并使用它来存储指令。通过这种方式，您可以执行类似指令的操作来访问值。你可以试试用这个。[https://github.com/derek-schaefer/django-json-field](https://github.com/derek-schaefer/django-json-field)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T09:34:43.917

如果您使用带有 CharField 的模型来存储指令并将 ManyToManyField 存储给用户，您可以创建任意数量的指令并将任意数量的指令分配给任意数量的用户。

```
class Instruction(models.Model):
    user = models.ManyToManyField('auth.User')
    instruction = models.CharField() # Value will be a single instruction 
```

# charts - JavaFX 2.x：图表白色边框去除

> ID：12527769
> 
> 赞同：1
> 
> 时间：2012-09-21T09:25:44.330
> 
> 标签：charts, javafx-2, bar-chart, splitpanel

我在下面的代码中在 SplitPane 中绘制了两个系列，但是我想删除一些白色边框，以便网格将填充所有图表空间。

这是一张图片，显示我要删除的位置

![在此处输入图像描述](../Images/2ac062e3affbae54e7e37df69d16883d.png)

这是我的代码

```
import javafx.application.Application;
import javafx.application.Platform;
import javafx.beans.property.SimpleDoubleProperty;
import javafx.collections.ObservableList;
import javafx.event.EventHandler;
import javafx.geometry.Orientation;
import javafx.scene.Group;
import javafx.scene.Node;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.scene.chart.BarChart;
import javafx.scene.chart.CategoryAxis;
import javafx.scene.chart.Chart;
import javafx.scene.chart.LineChart;
import javafx.scene.chart.NumberAxis;
import javafx.scene.chart.XYChart;
import javafx.scene.control.SplitPane;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.BorderPane;
import javafx.stage.Stage;

public class XyChartInSplitMove extends Application {

SplitPane splitPane1 = null;
BorderPane pane;
BorderPane pane2;
XYChart.Series series1 = new XYChart.Series();
XYChart.Series series2 = new XYChart.Series();
SimpleDoubleProperty rectinitX = new SimpleDoubleProperty();
SimpleDoubleProperty rectinitY = new SimpleDoubleProperty();

@Override
public void start(Stage stage) {

final NumberAxis xAxis = new NumberAxis(1, 12, 1);
final NumberAxis yAxis = new NumberAxis(0.53000, 0.53910, 0.0005);

xAxis.setAnimated(false);
yAxis.setAnimated(false);
xAxis.setScaleX(0);
xAxis.setVisible(false);

yAxis.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis) {

  @Override
  public String toString(Number object) {
    return String.format("%7.5f", object);
  }
});
final LineChart<Number, Number> lineChart1 = new LineChart<Number, Number>(xAxis, yAxis);

lineChart1.setCreateSymbols(false);
lineChart1.setAlternativeRowFillVisible(false);
lineChart1.setAnimated(false);
lineChart1.setLegendVisible(false);   

series1.getData().add(new XYChart.Data(1, 0.53185));
series1.getData().add(new XYChart.Data(2, 0.532235));
series1.getData().add(new XYChart.Data(3, 0.53234));
series1.getData().add(new XYChart.Data(4, 0.538765));
series1.getData().add(new XYChart.Data(5, 0.53442));
series1.getData().add(new XYChart.Data(6, 0.534658));
series1.getData().add(new XYChart.Data(7, 0.53023));
series1.getData().add(new XYChart.Data(8, 0.53001));
series1.getData().add(new XYChart.Data(9, 0.53589));
series1.getData().add(new XYChart.Data(10, 0.53476));
series1.getData().add(new XYChart.Data(11, 0.530123));
series1.getData().add(new XYChart.Data(12, 0.531035));

lineChart1.getData().addAll(series1);

pane = new BorderPane();
pane.setCenter(lineChart1);

splitPane1 = new SplitPane();
splitPane1.setOrientation(Orientation.VERTICAL);
splitPane1.getItems().addAll(pane);
splitPane1.setDividerPosition(0, 1);

Platform.runLater(new Runnable() {

  @Override
  public void run() {
    double percSplit;

    ObservableList<SplitPane.Divider> splitDiv = splitPane1.getDividers();

    percSplit = 1 / (double) (splitDiv.size() + 1);
    for (int i = 0; i < splitDiv.size(); i++) {
      splitPane1.setDividerPosition(i, percSplit);
      percSplit += 1 / (double) (splitDiv.size() + 1);
    }
  }
});
//BarChart
final CategoryAxis xAxis2 = new CategoryAxis();
final NumberAxis yAxis2 = new NumberAxis();

yAxis2.setTickUnit(1);
yAxis2.setPrefWidth(35);
yAxis2.setMinorTickCount(10);

yAxis2.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis2) {

  @Override
  public String toString(Number object) {
    String label;
    label = String.format("%7.2f", object.floatValue());
    return label;
  }
});
final BarChart<String, Number> barChart2 = new BarChart<String, Number>(xAxis2, yAxis2);

barChart2.setAlternativeRowFillVisible(false);
barChart2.setLegendVisible(false);
barChart2.setAnimated(false);

series2.getData().add(new XYChart.Data("Jan", 1));
series2.getData().add(new XYChart.Data("Feb", 3));
series2.getData().add(new XYChart.Data("Mar", 1.5));
series2.getData().add(new XYChart.Data("Apr", 3));
series2.getData().add(new XYChart.Data("May", 4.5));
series2.getData().add(new XYChart.Data("Jun", 5));
series2.getData().add(new XYChart.Data("Jul", 4));
series2.getData().add(new XYChart.Data("Aug", 8));
series2.getData().add(new XYChart.Data("Sep", 16.5));
series2.getData().add(new XYChart.Data("Oct", 13.9));
series2.getData().add(new XYChart.Data("Nov", 17));
series2.getData().add(new XYChart.Data("Dec", 20));

barChart2.getData().addAll(series2);
pane2 = new BorderPane();
pane2.setCenter(barChart2);

Platform.runLater(new Runnable() {

  @Override
  public void run() {
    double percSplit;
    splitPane1.getItems().addAll(pane2);

    ObservableList<SplitPane.Divider> splitDiv = splitPane1.getDividers();

    percSplit = 1 / (double) (splitDiv.size() + 1);
    for (int i = 0; i < splitDiv.size(); i++) {
      splitPane1.setDividerPosition(i, percSplit);
      percSplit += 1 / (double) (splitDiv.size() + 1);
    }
  }
});
Scene scene = new Scene(splitPane1, 800, 600);

stage.setScene(scene);

pane.setOnMouseClicked(mouseHandler);
pane.setOnMouseDragged(mouseHandler);
pane.setOnMouseEntered(mouseHandler);
pane.setOnMouseExited(mouseHandler);
pane.setOnMouseMoved(mouseHandler);
pane.setOnMouseReleased(mouseHandler);

stage.show();
}
EventHandler<MouseEvent> mouseHandler = new EventHandler<MouseEvent>() {

@Override
public void handle(MouseEvent mouseEvent) {

  if (mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED || mouseEvent.getEventType() == MouseEvent.MOUSE_MOVED) {
    LineChart<Number, Number> lineChart = (LineChart<Number, Number>) pane.getCenter();

    NumberAxis yAxis = (NumberAxis) lineChart.getYAxis();
    NumberAxis xAxis = (NumberAxis) lineChart.getXAxis();
    double newXlower = xAxis.getLowerBound(), newXupper = xAxis.getUpperBound();
    double newYlower = yAxis.getLowerBound(), newYupper = yAxis.getUpperBound();
    double delta = 0.3;

    if (mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED) {
      if (rectinitX.get() < mouseEvent.getX()) {
        newXlower = xAxis.getLowerBound() - delta;
        newXupper = xAxis.getUpperBound() - delta;
      } else if (rectinitX.get() > mouseEvent.getX()) {
        newXlower = xAxis.getLowerBound() + delta;
        newXupper = xAxis.getUpperBound() + delta;
      }
      xAxis.setLowerBound(newXlower);
      xAxis.setUpperBound(newXupper);

      // Y-Axis Moving

      if (rectinitY.get() < mouseEvent.getY()) {
        newYlower = yAxis.getLowerBound() + delta / 1000;
        newYupper = yAxis.getUpperBound() + delta / 1000;
      } else if (rectinitY.get() > mouseEvent.getY()) {
        newYlower = yAxis.getLowerBound() - delta / 1000;
        newYupper = yAxis.getUpperBound() - delta / 1000;
      }
      yAxis.setLowerBound(newYlower);
      yAxis.setUpperBound(newYupper);
    }
    rectinitX.set(mouseEvent.getX());
    rectinitY.set(mouseEvent.getY());

    BarChart<String, Number> barChart2 = (BarChart<String, Number>) pane2.getCenter();
    double chartWidth = xAxis.getWidth();
    double axisSpan = xAxis.getUpperBound() - xAxis.getLowerBound();
    double displacement = (chartWidth / axisSpan) * (1 - newXlower);

    for (Node node : barChart2.getChildrenUnmodifiable()) {
      if (node.getClass().getEnclosingClass() == Chart.class) {
        for (Node node2 : ((Parent) node).getChildrenUnmodifiable()) {
          if ((node2 == barChart2.getXAxis())) {
            node2.translateXProperty().set(displacement);
          }
          if (node2.getClass().getEnclosingClass() == XYChart.class) {
            for (Node node3 : ((Parent) node2).getChildrenUnmodifiable()) {
              if (node3.getClass() == Group.class) {
                node3.translateXProperty().set(displacement);
              }
            }
          }
        }
      }
    }
  }
}
};

public static void main(String[] args) {
launch(args);
}
} 
```

为了隐藏上 X 轴，我使用了 xAxis.setScaleX(0); 但我不确定这是否是隐藏 X 轴的最佳方法。

任何帮助都非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T08:42:54.340

定义一个 style.css：

```
.chart {
    -fx-padding: 1px;
}
.chart-content {
    -fx-padding: 0px;
} 
```

将此文件添加到应用程序的样式表中：

```
scene.getStylesheets().add(this.getClass().getResource("style.css").toExternalForm()); 
```

查看结果。
更远。要隐藏顶部和底部图表之间的差距，您可以像这样将顶部图表向下移动，但是差距出现在顶部：

```
...
...
stage.show();
// It should be after stage.show()
lineChart1.setTranslateY(xAxis.getHeight());
// Or give constant value if you want to put this code before the stage.show()
// lineChart1.setTranslateY(28); 
```

# powershell - 将文件复制到远程桌面驱动器

> ID：12527770
> 
> 赞同：4
> 
> 时间：2012-09-21T09:25:44.377
> 
> 标签：powershell, remote-desktop, file-copying

我想将一个文件从我的本地 C:\filename.png 复制到我通过远程桌面的 C:\ 驱动器连接到的远程计算机。

是否可以使用 powershell 或任何其他终端命令进行复制？

我正在使用 Windows 7（本地 PC）---远程桌面（Windows Server 2003）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:25:27.423

My remote session usually names the local resource `tsclient`, such that I can browse my local C drive with this PS command:

```
Set-Location \\tsclient\C 
```

then I can do anything I would normally do on the local file system, e.g. copying:

```
copy \\tsclient\C\file.txt C:\file.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T11:10:17.830

如果您的主机的 c: 驱动器被注入到终端服务会话中，它只会在远程会话中获得一个新的驱动器号。

在我的网络上，我的主机驱动器被注入到 VM 中，C: 变为 M:。

因此，在这种情况下，在远程会话中：

**复制 c:\file.png m:\png**

但是也许是更好的方法-来自您的主机：

**复制 \\remote\c$\file.png c:\file.png**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T09:38:52.950

您可以在服务器上共享一个文件夹并将其映射为客户端计算机上的网络驱动器。然后你可以使用复制命令。

在服务器端，您可以手动或使用程序检查和替换文件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-21T09:27:26.963

> 如果两者都是 Windows 7 ；只需在普通窗口中完成复制和粘贴

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-21T09:32:22.880

如果两台机器运行相同的操作系统，那么可以实现

如果您使用的是 mstc 程序，请转到远程桌面连接 -> 选项 -> 本地资源 -> 检查驱动程序选项并连接到远程 PC。然后你可以像往常一样执行复制粘贴

# android - 如何在我的 android 应用程序中使用内置铃声的设备？

> ID：12527778
> 
> 赞同：0
> 
> 时间：2012-09-21T09:26:07.857
> 
> 标签：android, ringtone

我做了一个示例应用程序来显示一束图像作为幻灯片放映。在这里，当幻灯片发生变化时，我需要在后台播放音轨。我的问题是，我**必须在内置**音频文件（铃声）中播放设备。如何在内置铃声列表中获取设备。提前致谢。

# python - 如何在 Sphinx 中创建自定义指令

> ID：12527783
> 
> 赞同：15
> 
> 时间：2012-09-21T09:26:47.637
> 
> 标签：python, python-sphinx, restructuredtext

我目前正在记录一个用 Python 编写的 rest API。所有项目的文档都是使用 Sphinx 创建的，对于 REST API，我想创建一些特殊的指令。例如，假设我定义了这个资源：

```
@resource("/user/<email>", method="GET")
def user_details (email):
    """ Returns detailed information about a user account.

    :resource GET: /user/<email>
    :query_param a_param: Some kind of query param.
    """
    # Do stuff and return user details 
```

这基本上就是文档当前的样子。我希望能够为 Sphinx 创建一个指令，该指令格式化一个或多个，`:query_param ...:`就像它对常规的那样`:param:`。

我已经找到了如何制作角色，但它们只能内联工作，而不适用于数据块。

**我该怎么**做这个？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-11T09:41:55.577

Sphinx 可以通过“ [Sphinx Extensions](http://www.sphinx-doc.org/en/stable/extensions.html) ”使用自定义指令进行扩展。也就是说，您需要实现一个提供`query_param`自定义指令的 Sphinx 扩展，并将此扩展添加到您的 Sphinx 项目中。

Sphinx 文档提供[了关于实现扩展的教程](http://www.sphinx-doc.org/en/stable/extdev/index.html#dev-extensions)，其中它们确实实现了自定义指令。

参考：

[http://www.sphinx-doc.org/en/stable/extensions.html](http://www.sphinx-doc.org/en/stable/extensions.html)

[http://www.sphinx-doc.org/en/stable/extdev/index.html#dev-extensions](http://www.sphinx-doc.org/en/stable/extdev/index.html#dev-extensions)

# php - 来自 textarea 的数组不能正确地为 MySQL 查询（UTF8？）换行？

> ID：12527788
> 
> 赞同：1
> 
> 时间：2012-09-21T09:26:51.240
> 
> 标签：php, mysql, arrays, utf-8, textarea

我创建了一个临时站点来试用我正在适应的脚本（简单的网站监控脚本）

然而，只有在该数组中添加的最后一个站点似乎被识别为有效 URL，因为根本不查询其他站点。如果在数组中间编辑其中一个添加的站点，然后保存，查询就没有问题了。

我的第一印象是与 textarea/MySQL 查询/PHP Array..或其他东西的编码有关。

我已将 textarea 设置为 UTF8、HTML 和 MySQL 查询。

```
$hostnames = explode("\n", $_POST['hostnames']);

while ($i < count($hostnames)) {
$a = $hostnames[$i];
$sql = "INSERT INTO blah blah blah";
mysql_query("SET NAMES 'utf8'", $con);
mysql_query($sql,$con);
$i++;
} 
```

有什么想法我会出错吗？这是我的第一个有用的 PHP 项目，所以它的学习曲线相当陡峭。

谢谢，奥利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:34:46.617

你的 while 循环有右括号吗？

另外，尝试使用 print 输出内容。它将帮助您调试问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:42:30.720

1) 你不需要 mysql_query("SET NAMES 'utf8'", $con); 在每个循环（设置一次）。
2) 尝试 '\r\n'

# svn - Jenkins 中的 SVN 身份验证错误

> ID：12527800
> 
> 赞同：19
> 
> 时间：2012-09-21T09:27:25.030
> 
> 标签：svn, jenkins

我开始了一个项目，我必须使用外部 svn（我在代理下）。当我将 url 放入配置项目时，Jenkins 无法访问存储库，所以我填写了凭据（存储库 url，用户名和密码）但这里是错误：

```
FAILED: svn: E175002: OPTIONS /.../trunk/www failed

org.tmatesoft.svn.core.SVNException: svn: E175002: OPTIONS /.../trunk/www failed
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection.request(HTTPConnection.java:304)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection.request(HTTPConnection.java:289)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection.request(HTTPConnection.java:277)
        at org.tmatesoft.svn.core.internal.io.dav.DAVConnection.performHttpRequest(DAVConnection.java:696)
        at org.tmatesoft.svn.core.internal.io.dav.DAVConnection.exchangeCapabilities(DAVConnection.java:619)
        at org.tmatesoft.svn.core.internal.io.dav.DAVConnection.open(DAVConnection.java:103)
        at org.tmatesoft.svn.core.internal.io.dav.DAVRepository.openConnection(DAVRepository.java:1018)
        at org.tmatesoft.svn.core.internal.io.dav.DAVRepository.testConnection(DAVRepository.java:99)
        at hudson.scm.SubversionSCM$DescriptorImpl.postCredential(SubversionSCM.java:1968)
        at hudson.scm.SubversionSCM$DescriptorImpl.doPostCredential(SubversionSCM.java:1913)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.kohsuke.stapler.Function$InstanceFunction.invoke(Function.java:288)
        at org.kohsuke.stapler.Function.bindAndInvoke(Function.java:151)
        at org.kohsuke.stapler.Function.bindAndInvokeAndServeResponse(Function.java:90)
        at org.kohsuke.stapler.MetaClass$1.doDispatch(MetaClass.java:111)
        at org.kohsuke.stapler.NameBasedDispatcher.dispatch(NameBasedDispatcher.java:53)
        at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:574)
        at org.kohsuke.stapler.Stapler.invoke(Stapler.java:659)
        at org.kohsuke.stapler.MetaClass$6.doDispatch(MetaClass.java:241)
        at org.kohsuke.stapler.NameBasedDispatcher.dispatch(NameBasedDispatcher.java:53)
        at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:574)
        at org.kohsuke.stapler.Stapler.invoke(Stapler.java:659)
        at org.kohsuke.stapler.MetaClass$6.doDispatch(MetaClass.java:241)
        at org.kohsuke.stapler.NameBasedDispatcher.dispatch(NameBasedDispatcher.java:53)
        at org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:574)
        at org.kohsuke.stapler.Stapler.invoke(Stapler.java:659)
        at org.kohsuke.stapler.Stapler.invoke(Stapler.java:488)
        at org.kohsuke.stapler.Stapler.service(Stapler.java:162)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:45)
        at winstone.ServletConfiguration.execute(ServletConfiguration.java:248)
        at winstone.RequestDispatcher.forward(RequestDispatcher.java:333)
        at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:376)
        at hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:95)
        at hudson.util.PluginServletFilter.doFilter(PluginServletFilter.java:87)
        at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
        at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
        at hudson.security.csrf.CrumbFilter.doFilter(CrumbFilter.java:47)
        at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
        at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:84)
        at hudson.security.UnwrapSecurityExceptionFilter.doFilter(UnwrapSecurityExceptionFilter.java:51)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.ui.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:166)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.providers.anonymous.AnonymousProcessingFilter.doFilter(AnonymousProcessingFilter.java:125)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.ui.rememberme.RememberMeProcessingFilter.doFilter(RememberMeProcessingFilter.java:142)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.ui.AbstractProcessingFilter.doFilter(AbstractProcessingFilter.java:271)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.ui.basicauth.BasicProcessingFilter.doFilter(BasicProcessingFilter.java:173)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at jenkins.security.ApiTokenFilter.doFilter(ApiTokenFilter.java:63)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at org.acegisecurity.context.HttpSessionContextIntegrationFilter.doFilter(HttpSessionContextIntegrationFilter.java:249)
        at hudson.security.HttpSessionContextIntegrationFilter2.doFilter(HttpSessionContextIntegrationFilter2.java:66)
        at hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)
        at hudson.security.ChainedServletFilter.doFilter(ChainedServletFilter.java:76)
        at hudson.security.HudsonFilter.doFilter(HudsonFilter.java:164)
        at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
        at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
        at org.kohsuke.stapler.compression.CompressionFilter.doFilter(CompressionFilter.java:50)
        at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
        at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
        at hudson.util.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:81)
        at winstone.FilterConfiguration.execute(FilterConfiguration.java:194)
        at winstone.RequestDispatcher.doFilter(RequestDispatcher.java:366)
        at winstone.RequestDispatcher.forward(RequestDispatcher.java:331)
        at winstone.RequestHandlerThread.processRequest(RequestHandlerThread.java:215)
        at winstone.RequestHandlerThread.run(RequestHandlerThread.java:138)
        at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
        at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
        at java.util.concurrent.FutureTask.run(Unknown Source)
        at winstone.BoundedExecutorService$1.run(BoundedExecutorService.java:77)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
Caused by: svn: E175002: OPTIONS /.../trunk/www failed
        at org.tmatesoft.svn.core.SVNErrorMessage.create(SVNErrorMessage.java:208)
        at org.tmatesoft.svn.core.SVNErrorMessage.create(SVNErrorMessage.java:154)
        at org.tmatesoft.svn.core.SVNErrorMessage.create(SVNErrorMessage.java:97)
        ... 80 more
Caused by: org.tmatesoft.svn.core.SVNException: svn: E175002: OPTIONS request failed on '/.../trunk/www'
svn: E175002: connection refused by the server
        at org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:64)
        at org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:51)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection._request(HTTPConnection.java:681)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection.request(HTTPConnection.java:298)
        ... 79 more
Caused by: svn: E175002: OPTIONS request failed on '/.../trunk/www'
        at org.tmatesoft.svn.core.SVNErrorMessage.create(SVNErrorMessage.java:208)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection._request(HTTPConnection.java:679)
        ... 80 more
Caused by: svn: E175002: connection refused by the server
        at org.tmatesoft.svn.core.SVNErrorMessage.create(SVNErrorMessage.java:208)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection._request(HTTPConnection.java:424)
        ... 80 more
Caused by: java.net.ConnectException: Connection timed out: connect
        at java.net.PlainSocketImpl.socketConnect(Native Method)
        at java.net.PlainSocketImpl.doConnect(Unknown Source)
        at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
        at java.net.PlainSocketImpl.connect(Unknown Source)
        at java.net.SocksSocketImpl.connect(Unknown Source)
        at java.net.Socket.connect(Unknown Source)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.connect(Unknown Source)
        at org.tmatesoft.svn.core.internal.util.SVNSocketFactory.connect(SVNSocketFactory.java:112)
        at org.tmatesoft.svn.core.internal.util.SVNSocketFactory.createSSLSocket(SVNSocketFactory.java:85)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection.connect(HTTPConnection.java:195)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection._request(HTTPConnection.java:360)
        ... 80 more 
```

在 C:\Windows\System32\config\systemprofile\AppData\Roaming\Subversion\server 中配置了代理，在 Jenkins 中，我可以安装/更新插件。

svn url 在 https 中，我可以在浏览器中使用凭据访问它。

默认情况下，Jenkins 使用的 svn 版本是 1.4，即使是 1.7，也无法访问这个 svn 服务器。

服务器是 Windows 7 64 位，这是 Jenkins 的最后一个版本。

问题出在哪里 ？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-24T20:22:39.290

在这里比赛真的很晚，但我遇到了同样的问题。如果您在 Jenkins 机器上手动运行 SVN，它将为您的 svn 服务器创建一个 svn 身份验证文件（身份验证缓存）。该文件的存在破坏了 Jenkins svn。

在我的服务器（Windows）上，该文件位于：

```
%APPDATA%\Subversion\auth\svn.simple 
```

我相信在 linux 上，它会在 ~/.subversion

我将目录 svn.simple 重命名为 svn.simple1 并且事情立即开始工作（当我将其改回时再次中断）。

为了防止在 Jenkins 服务器上运行 svn bin 时出现这种情况，您可以

*   通过取消注释“store-passwords = no”来更新您的 %APPDATA%\Subversion\config 文件
*   或使用此标志：--no-auth-cache

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-04T07:48:54.953

删除你的`${user.home}/.subversion`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T13:14:08.263

您可以使用此选项运行命令：

```
-Dsvnkit.http.sslProtocols="SSLv3" 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-03-20T00:08:19.767

我将提交我在[ServerFault](https://serverfault.com/questions/620459/jenkins-and-https-cannot-connect-to-server/764725#764725)上提交的答案，该答案对我来说非常有效。解决方案是直接在其`<arguments>`元素处编辑 Jenkins.xml 文件以包含

```
-Dhttp.proxyHost=proxy.myproxy.com Dhttp.proxyPort=99999 -Dhttp.auth.preference=Basic 
```

显然，这允许 Java 内部通过代理服务器。

# twitter-bootstrap - Bootstrap 停止模式在页面加载时显示

> ID：12527802
> 
> 赞同：3
> 
> 时间：2012-09-21T09:27:33.223
> 
> 标签：twitter-bootstrap

我只希望在单击某个按钮时显示模态。

目前，每当我加载页面时，模态都会显示出来。

有人可以告诉我我要去哪里严重错误吗？

```
<a href="#myModal" role="button" class="btn" data-toggle="modal">Launch demo modal</a>

                <div class="modal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                        <h3 id="myModalLabel">Modal header</h3>
                    </div>
                    <div class="modal-body">
                        <p>One fine body…&lt;/p>
                    </div>
                    <div class="modal-footer">
                        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                        <button class="btn btn-primary">Save changes</button>
                    </div>
                </div> 
```

我正在使用 ASP.NET MVC 3

**编辑：**我只有以下作为Javascript：

```
 <script>
   $('#myModal').on('show', function() {

   });
 </script> 
```

这些是我对 CSS 和 JS 的引用：

```
 <head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>
 <script src=@Url.Content("https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js") type="text/javascript"> </script>
    <script src=@Url.Content("../../Content/lib/bootstrap/js/bootstrap.min.js") type="text/javascript"></script>
    <link href=@Url.Content("/Content/lib/bootstrap/css/bootstrap.min.css") rel="stylesheet" type="text/css" />
    <link href=@Url.Content("/Content/lib/bootstrap/css/bootstrap-responsive.min.css") rel="stylesheet" type="text/css" />
    <link href=@Url.Content("../../Content/lib/bootstrap/css/bootstrap-combobox.css") rel="stylesheet" type="text/css" />
    </head> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T14:12:31.420

向模态添加`.hide`类：

```
<div class="modal hide fade">
    ...
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-21T09:50:14.227

如果您不希望模态显示在页面加载中，则无需使用任何 javascript 只需使用以下代码在 Bootstrap 中创建一个简单的模态

```
 <!-- Button trigger modal -->
   <button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
     Launch demo modal
   </button>

   <!-- Modal -->
   <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
     <div class="modal-dialog">
       <div class="modal-content">
         <div class="modal-header">
           <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
           <h4 class="modal-title" id="myModalLabel">Modal title</h4>
         </div>
         <div class="modal-body">
           <h1>Hello World!</h1>
         </div>
         <div class="modal-footer">
           <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
           <button type="button" class="btn btn-primary">Save changes</button>
         </div>
       </div><!-- /.modal-content -->
     </div><!-- /.modal-dialog -->
   </div><!-- /.modal --> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T10:05:47.823

要使模态正常工作，您应该包括：

*   jQuery
*   引导-min.js

Bootstrap 使用模式中的自定义属性来查找和应用 javascript 功能。您不需要自己编写绑定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-24T02:37:46.840

我知道我迟到了，但这是在 Google 搜索中出现的讨论线程，用于“在页面加载时自动显示引导模式对话框”问题，因此在此处提交我的答案。

给定代码中的 Bootstrap 链接显示 Bootstrap v2.x 库在此处使用。尝试版本 3，您将不会遇到此问题。

Bootstrap v2 版本的文档说...

> Bootstrap 为大多数插件的独特操作提供自定义事件。通常，这些以不定式和过去分词形式出现 - 其中不定式（例如 show）在事件开始时触发，其过去分词形式（例如所示）在动作完成时触发。

所有不定式事件都提供 preventDefault 功能。这提供了在动作开始之前停止执行的能力。

添加到您的页面的建议代码是...

```
 $('#myModal').on('show', function (e) {
       if (!data) return e.preventDefault() // stops modal from being shown
   }); 
```

如果你真的被迫为你的项目使用 Bootstrap v2.x，试试这个。但我仍然坚持使用 v3.x 的 Bootstrap 来避免这些问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-14T02:00:13.057

*按钮启动模式代码*

`<div class="modal hide" id="myModal">` *隐藏模态代码*

您的模态代码在这里*模态、正文、页脚等的标题

```
</div> 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-09-21T09:39:33.630

Bootstrap modal 仅适用于 Javascript - 如果您没有 Bootsrap Javascript - 然后将显示 Modal，因为它是隐藏 Modal div 的 Javascript。

请包括引导 javascript 并检查。

# ios - 以编程方式创建的 UILabel 在 iOS 6 中不起作用

> ID：12527805
> 
> 赞同：2
> 
> 时间：2012-09-21T09:27:40.633
> 
> 标签：ios, uilabel, ios6

我以编程方式在我的应用程序中创建了一些 UILabel。在 iOS 5 中，这段代码运行良好。在 iOS 6 中，标签似乎根本不会出现在屏幕上。

我没有看到任何警告，代码肯定会执行，但没有标签。

我试过搜索类似的问题，但找不到任何东西。我的标签实际上已经消失了。

任何帮助表示赞赏。

```
float popUpWidth = 700.0

//Add label
UILabel *label;
label = [[UILabel new] initWithFrame:CGRectMake(0,0,popUpWidth,50)];
label.text = @"Notes";
label.textAlignment = UITextAlignmentCenter;
label.backgroundColor = [UIColor blackColor];
label.textColor = [UIColor whiteColor];

//Add label to view
[self.view addSubview:label]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T09:33:27.303

问题是您正在创建一个两倍于设备屏幕宽度的标签，并将少量文本设置为居中，从而导致文本不在屏幕上。请记住 CGRect 使用点而不是像素。此外，我测试了您的代码，必须将“new”替换为“alloc”才能正常工作，我建议您也这样做。

完整正确的行是：

```
label = [[UILabel alloc] initWithFrame:CGRectMake(0,0,popUpWidth,50)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:35:10.173

调用`[UILabel new]`就像调用一样，`[[UILabel alloc] init]`因此您应该像这样更改代码：

```
label = [[UILabel alloc] initWithFrame:CGRectMake(0,0,popUpWidth,50)]; 
```

# audio - 什么是 UCMA 3.0 Voicexml 浏览器默认音频格式？

> ID：12527807
> 
> 赞同：2
> 
> 时间：2012-09-21T09:27:56.633
> 
> 标签：audio, browser, voicexml, ucma

目前，我正在开发一个 ucma 3.0 vxml 应用程序。在 voicexml 文档中，我使用一个记录元素来获取呼叫者的录音，然后将录音发送到外部网络服务器并将其保存到 wav 文件中。

保存的 wav 文件的格式是什么，8KHz/8-bit 或 8KHz/16-bit 或 16KHz/16-bit？我可以设置或更改 ucma vxml 浏览器的音频格式以生成不同格式的音频吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:17:34.777

他们支持的 UCMA VoiceXML 音频格式有：

*   原始（无头）8kHz 8 位单声道 mu-law [PCM] 单声道。(G.711) -- 音频/基本（来自 [RFC1521]）
*   原始（无头）8kHz 8 位单声道 A-law [PCM] 单声道。(G.711) -- 音频/x-alaw-basic
*   WAV（RIFF 标头）8kHz 8 位单声道 mu-law [PCM] 单声道。-- 音频/x-wav
*   WAV（RIFF 标头）8kHz 8 位单声道 A-law [PCM] 单声道。-- 音频/x-wav

“--”后面的部分是mime类型。您在“记录”元素的“类型”属性中指定 MIME 类型。

# matlab - 图像上的峰度函数

> ID：12527812
> 
> 赞同：4
> 
> 时间：2012-09-21T09:28:05.893
> 
> 标签：matlab, image-processing, statistics

我想在matlab中计算图像的峰度。 **Matlab 有一个函数`kurtosis`** ，我可以在矩阵上使用这个函数。例如：

```
m = rand([4 5]);
kurtosis(m(:)); 
```

虽然当我使用这个灰度图像时：![在此处输入图像描述](../Images/49fb4df18f084e855f4b0fdac7d32a33.png)

```
I = imread('0.tiff');
kurtosis(I(:)); 
```

我收到此错误：

> 使用错误 - 整数只能与同一类的整数或双精度标量组合。
> 
> 峰度错误（第 39 行）x0 = x - repmat(nanmean(x,dim), tile);

我现在的问题是：我做错了什么，如何计算图像的峰度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T09:52:00.030

峰度需要我加倍。这有效：

```
kurtosis(double(I(:))); 
```

或这个

```
kurtosis(double(I)); 
```

# android - 如何使用 Web 服务在 android 中创建条形图？

> ID：12527815
> 
> 赞同：0
> 
> 时间：2012-09-21T09:28:17.670
> 
> 标签：android, web-services, bar-chart

如何在android中创建条形图？

**注意： -** *但我需要使用 Web 服务中的 x 轴和 y 轴值。* 这意味着 Web 服务将显示 x 和 y 轴值。然后我需要使用这些值作为 x 和 y 轴值来创建条形图。

如何做到这一点？请提出建议。

**LOGCAT**

```
09-21 15:09:53.103: D/AndroidRuntime(271): Shutting down VM
09-21 15:09:53.103: W/dalvikvm(271): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
09-21 15:09:53.114: E/AndroidRuntime(271): FATAL EXCEPTION: main
09-21 15:09:53.114: E/AndroidRuntime(271): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.xmlparsing_test/com.example.xmlparsing_test.BarGraphActivity}: java.lang.NullPointerException
09-21 15:09:53.114: E/AndroidRuntime(271):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
09-21 15:09:53.114: E/AndroidRuntime(271):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
09-21 15:09:53.114: E/AndroidRuntime(271):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
09-21 15:09:53.114: E/AndroidRuntime(271):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
09-21 15:09:53.114: E/AndroidRuntime(271):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-21 15:09:53.114: E/AndroidRuntime(271):  at android.os.Looper.loop(Looper.java:123)
09-21 15:09:53.114: E/AndroidRuntime(271):  at android.app.ActivityThread.main(ActivityThread.java:4627)
09-21 15:09:53.114: E/AndroidRuntime(271):  at java.lang.reflect.Method.invokeNative(Native Method)
09-21 15:09:53.114: E/AndroidRuntime(271):  at java.lang.reflect.Method.invoke(Method.java:521)
09-21 15:09:53.114: E/AndroidRuntime(271):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-21 15:09:53.114: E/AndroidRuntime(271):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-21 15:09:53.114: E/AndroidRuntime(271):  at dalvik.system.NativeStart.main(Native Method)
09-21 15:09:53.114: E/AndroidRuntime(271): Caused by: java.lang.NullPointerException
09-21 15:09:53.114: E/AndroidRuntime(271):  at com.example.xmlparsing_test.BarGraphActivity.buildBarDataset(BarGraphActivity.java:115)
09-21 15:09:53.114: E/AndroidRuntime(271):  at com.example.xmlparsing_test.BarGraphActivity.DrawGraph(BarGraphActivity.java:57)
09-21 15:09:53.114: E/AndroidRuntime(271):  at com.example.xmlparsing_test.BarGraphActivity.onCreate(BarGraphActivity.java:22)
09-21 15:09:53.114: E/AndroidRuntime(271):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-21 15:09:53.114: E/AndroidRuntime(271):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
09-21 15:09:53.114: E/AndroidRuntime(271):  ... 11 more
09-21 15:10:04.033: I/Process(271): Sending signal. PID: 271 SIG: 9 
```

**图表.java**

```
 public class Chart extends Activity 
 {      
    EditText edt1,edt2;
TextView txtv1;
Button btn;

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    edt1 = (EditText)findViewById(R.id.editText1);
    edt2 = (EditText)findViewById(R.id.editText2);

    btn = (Button)findViewById(R.id.button1);
    btn.setOnClickListener(new View.OnClickListener()
    {

public void onClick(View v) 
{
    getTMSChart(edt1.getText().toString(),edt2.getText().toString());

    Intent intnt = new Intent(v.getContext(), BarGraphActivity.class);
            startActivity(intnt);
        }
    });
    }
public void getTMSChart(String FromDate, String ToDate) 
   {
    System.setProperty("http.keepAlive", "false");        
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);        

    envelope.dotNet = true;

    String METHOD = "GetTMSChart";
    String NAMESPACE = "http://tempuri.org/";
    String SOAP_ACTION = "http://tempuri.org/GetTMSChart"; 
    String URL = "http://54.251.60.177/TMSOrdersService/TMSDetails.asmx";

    SoapObject request = new SoapObject(NAMESPACE, METHOD); 

    request.addProperty("FromDate","");               
    request.addProperty("ToDate","");

    envelope.setOutputSoapObject(request);

    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try 
    {
        androidHttpTransport.call(SOAP_ACTION, envelope);
        SoapObject result = (SoapObject) envelope.bodyIn;
        SoapObject root =  (SoapObject) ((SoapObject)(result).getProperty(0)).getProperty("NewDataSet");
        int tablesCount = root.getPropertyCount();

    for (int i = 0; i < tablesCount; i++)
    {
        SoapObject table = (SoapObject) root.getProperty(i);
        int propertyCount = table.getPropertyCount();

     for (int j = 0; j < propertyCount; j++)
     {           
        //String ord = table.getPropertyAsString("");

         int orderNo = Integer.parseInt(table.getPropertyAsString("Order_No"));
         int freightRate = Integer.parseInt(table.getPropertyAsString("Freight_Rate"));
         int marginPercent =     Integer.parseInt(table.getPropertyAsString("Margin_Percent"));
        }
    }
}
catch (Exception e) 
{}
}   } 
```

**条形图活动.java**

```
public class BarGraphActivity extends Chart
{   
public void onCreate(Bundle savedInstanceState)  
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main1);
    DrawGraph();
   }
Chart ch = new Chart();

 public void DrawGraph() 
 {

String[] titles = new String[] { " Barcharts",""};

int[] x_axis =null;   
int[] y_axis =null;

List<int[]> values = new ArrayList<int[]>();
values.add(x_axis);
values.add(y_axis);

int[] colors = new int[] { Color.WHITE, Color.BLACK};

XYMultipleSeriesRenderer renderer = buildBarRenderer(colors);
renderer.setOrientation(Orientation.HORIZONTAL);
setChartSettings(renderer, "some texts", " ", " ",0,x_axis, 0,y_axis, Color.GRAY, Color.LTGRAY);

renderer.setXLabels(1);
renderer.addXTextLabel(2, "orderNo");
renderer.addYTextLabel(2, "freight");
renderer.setPanEnabled(false, false);

int length = renderer.getSeriesRendererCount();
for (int i = 0; i < length; i++) 
{
  SimpleSeriesRenderer seriesRenderer = renderer.getSeriesRendererAt(i);
  seriesRenderer.setDisplayChartValues(true);
  }

    ChartFactory.getBarChartIntent(this, buildBarDataset(titles, values), renderer,Type.DEFAULT);
  }

public XYMultipleSeriesRenderer buildBarRenderer(int[] colors) 
{
    // creates a SeriesRenderer and initializes it with useful default values as well as colors

XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();

 renderer.setAxisTitleTextSize(15);
 renderer.setChartTitleTextSize(20);
 renderer.setLabelsTextSize(15);
 renderer.setLegendTextSize(15);

 int length = colors.length;
 for (int i = 0; i < length; i++) 
 {
   SimpleSeriesRenderer r = new SimpleSeriesRenderer();
   r.setColor(colors[i]);
   renderer.addSeriesRenderer(r);
    }
    return renderer;
   }

 public void setChartSettings(XYMultipleSeriesRenderer renderer, String title, String xTitle,String yTitle, int xMin, int[] x_axis, int yMin, int[] y_axis, int axesColor,int labelsColor) 
 {
    // sets lots of default values for this renderer

renderer.setChartTitle(title);

renderer.setXTitle(xTitle);
renderer.setYTitle(yTitle);

renderer.setXAxisMin(xMin);

renderer.setYAxisMin(yMin);
renderer.setAxesColor(axesColor);
renderer.setLabelsColor(labelsColor);

renderer.setApplyBackgroundColor(true);
renderer.setBackgroundColor(Color.BLACK);
}

public XYMultipleSeriesDataset buildBarDataset(String[] titles, List<int[]> values) 
 {
    // adds the axis titles and values into the dataset

XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();

int length = titles.length;

 for (int i = 0; i < length; i++) 
 {
   CategorySeries series = new CategorySeries(titles[i]);

   int[] v = values.get(i);

   int seriesLength = v.length;

   for (int k = 0; k < seriesLength; k++) 
   {
     series.add(v[k]);
    }

   dataset.addSeries(series.toXYSeries());
   }
   return dataset;
  } } 
```

感谢您宝贵的时间！..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:39:49.793

1- 从 Web 服务中获取值。

这实际上与条形图无关。只需调用 Web 服务并获取您需要的值。

2- 获得值后，您可以使用[achartengine](http://code.google.com/p/achartengine/)创建条形图。

**编辑：**

阅读您的更新后，这是我的一般想法。

在`chart.java`中，您正在调用 Web 服务并将值读入局部变量，因此这些值不会存储在任何地方。

在`BarGraphActivity.DrawGraph()`，`x_axis`并且`y_axis`总是`null`，因此`NullPointerException`。

解决方案：

在您的第一个活动中，将您的值收集到`int`数组中，并在您开始第二个活动时将它们发送到 Intent 中。

在后者中，检索数组并将它们传递给`DrawGraph()`.

*还有一点需要注意：*您在主线程上调用 Web 服务，这是不可取的。你应该把它移到`doInBackground()`an 的方法中`AsyncTask`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:45:06.710

对我来说，这看起来像是一些糟糕的 XML。你的解析器给了你一个`NullPointerException`.

我不知道您的 Android 代码使用的是哪个解析器，SAX 还是 DOM。我不知道您调用的服务是发回原始 XML 还是包装在 SOAP 信封中。我不知道您是否使用知道如何从 SOAP 信封中提取有效负载的 SOAP 客户端。我不知道一旦你拥有了你的数据，你在做什么。

但你应该。

# php - 在php中导出文件csv时如何修复文件csv中的错误字体UTF8

> ID：12527818
> 
> 赞同：0
> 
> 时间：2012-09-21T09:28:25.950
> 
> 标签：php

我将 php 中的 csv 导出为：

```
$fp = fopen($filename, 'w');

            foreach ($list as $fields) {
                if(!empty($fields))
                fputcsv($fp, $fields);
                else
                fputcsv($fp, ' ');

            }
            $fp = chr(255).chr(254).mb_convert_encoding($fp,"UTF-16LE","UTF-8"); 
            fclose($fp); 
```

当我打开 csv 时，字体 UTF_8 是错误的。例如：防本部コー在文件 csv 中显示：æ¶ˆé˜²æœ¬éƒ¨ă‚³ăƒ¼ăƒ‰</p>

我可以帮你吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:31:12.003

这已经在这里讨论过：

[如何在 PHP 中输​​出 Excel 可以正确读取的 UTF-8 CSV？](https://stackoverflow.com/questions/4348802/how-can-i-output-a-utf-8-csv-in-php-that-excel-will-read-properly)

您可能还想在替代文本编辑器中检查 CSV 以排除该编辑器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:34:14.930

`$fp`是指向文件的指针资源。它不是一个字符串，你不能这样做：

```
$fp = chr(255).chr(254).mb_convert_encoding($fp,"UTF-16LE","UTF-8"); 
```

要将 UTF-16 数据写入文件，您需要在写入之前对其进行转换，而不是事后：

```
$fp = fopen($filename, 'w');

fwrite($fp, chr(255).chr(254));

foreach ($list as $fields) {
    foreach ($fields as &$field) {
        $field = mb_convert_encoding($field, 'UTF-16LE', 'UTF-8');
    }
    fputcsv($fp, $fields);
}

fclose($fp); 
```

不知道这是否真的输出了您需要的数据，但它修复了明显的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-20T06:41:41.040

试试这个功能会起作用：

```
public static function exportCSVFile($data = array(), $headers = array(), $delimiter = ",", $csvfilename = "CSVFile") {
        ob_clean();
        ob_start();
        $csvfilename = $csvfilename . "_" . date("Y_m_d_h_i_s") . ".csv";
        $file_handler = fopen("php://output", 'w');
        header("Pragma: public");
        header("Expires: 0");
        header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
        header("Content-Type: application/csv");
        //header( "Content-Type: application/csv;charset=utf-8" );
        header("Content-Disposition: attachment;filename={$csvfilename}");
        header("Content-Transfer-Encoding: binary");
        foreach ($data as $fields) {
            $_str = implode($delimiter, $fields);
            $fields = explode($delimiter, utf8_decode($_str));
            fputcsv($file_handler, $fields, $delimiter, $enclosure = '"');
        }
        fclose($file_handler);
        ob_flush();
        exit();
    } 
```

# db2 - DB2 将长值转换为时间戳

> ID：12527821
> 
> 赞同：2
> 
> 时间：2012-09-21T09:28:32.173
> 
> 标签：db2, timestamp

DB2 中是否有一个标量函数可以将长数字转换为 TIMESTAMP？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T15:36:23.647

正如@Dan1111 指出的那样；不，没有内置任何东西。

但是，如果你有一个“长”数字（我假设`BIGINT`），我猜你有 Unix 纪元（1970-01-01 00:00:00.000 UTC）的秒数（或类似） . 如果是这样，很容易“作弊”，您可以使用此逻辑编写自己的逻辑：

```
SELECT TIMESTAMP('1970-01-01', '00:00:00') + <your_column> SECONDS
FROM <your_table> 
```

这当然假设该计数实际上来自 UTC（并且您计划将结果解释为这样），因为夏令时（和时区，在较小程度上）将事情搞砸了。

* * *

一个简单的例子：

```
SELECT TIMESTAMP('1970-01-01', '00:00:00') + 1348241581 SECONDS                                      
FROM sysibm/sysdummy1 
```

产生预期：

```
2012-09-21-15.33.01.000000 
```

（格林威治标准时间，显然）

# perl - 如何在freebsd上的tcpdump.sh中使用-w选项动态分配文件名？

> ID：12527823
> 
> 赞同：0
> 
> 时间：2012-09-21T09:28:43.940
> 
> 标签：perl, bash, freebsd

如何在这里使用 -w 选项动态分配文件名？

我正在研究freebsd。我想动态地将文件名分配给在这个 perl 脚本中使用 -w 选项创建的文件。我一直在使用以下方法，但无济于事。

```
$name = `date`;
system ("nstcpdump.sh -C 1 -w $name"); 
```

有人可以帮我弄这个吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:43:41.900

尝试系统的多参数形式：

```
system 'nstcpdump.sh', '-C', '1', '-w', $name; 
```

您可能还想从日期字符串中删除空格：

```
( my $name = `date` ) =~ s/\s/_/g; 
```

# mysql - 将 *1 添加到 addAttributeToSort 不起作用

> ID：12527824
> 
> 赞同：0
> 
> 时间：2012-09-21T09:28:44.860
> 
> 标签：mysql, magento, sql-order-by

我在产品系列中工作，返回产品并尝试订购它们。问题是我的产品属性之一（我在项目的 90% 中发现了这一点）是一个数量，即 250、5000 等。但是，我刚刚发现尽管这些是数字 Magento 将它们视为字符串，因此该集合在此示例中返回以下数量：

```
50,100,250,500,1000,2000,5000 
```

但是，`addAttributeToSort('quantity','ASC');`这样做：

```
100,1000,2000,250,50,500,5000 
```

我已经`var_dump()`对集合进行了分析，并确定这些值被视为字符串，因此可能会发生这种情况。不幸的是，我有超过 6000 种产品，其中有很多自定义实现和可配置产品，具体取决于此属性，所以我不愿意更改它。在这里搜索我发现添加`ORDER BY 'quantity' *1`确实正确地执行了排序，但是我似乎无法在标准`addAttributeToSort`函数中实现这个子句。

如果有人可以帮助我实现这一点，我已经尝试过`addAttributeToSort('quantity','*1');`，但这不起作用，只是错误。

非常感谢

## 更新：

这是从以下代码生成的查询的语法：

```
$collection = $this->getUsedProductCollection($product)
                   ->addAttributeToSelect('*')
                   ->addFieldToFilter('name', array( 'like' => '%' . $stock . '%' ));
$collection->getSelect()->order(new Zend_Db_Expr('quantity' *1)); 
count($collection); 
```

> `'SELECT 'e'.*, 'link_table'.'parent_id', IF(at_name.value_id > 0, at_name.value, at_name_default.value) AS 'name', 'price_index'.'price', 'price_index'.'tax_class_id', 'price_index'.'final_price', IF(price_index.tier_price IS NOT NULL, LEAST(price_index.min_price, price_index.tier_price), price_index.min_price) AS 'minimal_price', 'price_index'.'min_price', 'price_index'.'max_price', 'price_index'.'tier_price' FROM 'catalog_product_entity' AS 'e' INNER JOIN 'catalog_product_super_link' AS 'link_table' ON link_table.product_id = e.entity_id INNER JOIN 'catalog_product_website' AS 'product_website' ON product_website.product_id = e.entity_id AND product_website.website_id = '1' INNER JOIN 'catalog_product_entity_varchar' AS 'at_name_default' ON ('at_name_default'.'entity_id' = 'e'.'entity_id') AND ('at_name_default'.'attribute_id' = '65') AND 'at_name_default'.'store_id' = 0 LEFT JOIN 'catalog_product_entity_varchar' AS 'at_name' ON ('at_name'.'entity_id' = 'e'.'entity_id') AND ('at_name'.'attribute_id' = '65') AND ('at_name'.'store_id' = 1) INNER JOIN 'catalog_product_index_price' AS 'price_index' ON price_index.entity_id = e.entity_id AND price_index.website_id = '1' AND price_index.customer_group_id = 0 WHERE (link_table.parent_id = 3781) AND (IF(at_name.value_id > 0, at_name.value, at_name_default.value) LIKE '%PCL Labels%')'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:31:45.970

尝试 `$collection->getSelect()->order(new Zend_Db_Expr('quantity' *1));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:10:29.287

最后我在 PHP 中通过`ksort()`. 实现任何 Zend 函数时的数据库模型在某处被覆盖，我没有时间去弄清楚。

# java - JPA - 使用多个实体管理器的性能

> ID：12527825
> 
> 赞同：0
> 
> 时间：2012-09-21T09:28:51.700
> 
> 标签：java, jpa, persistence, seam, openjpa

我的情况是：

*   代码不是我的
*   我有两种数据库：一种是爸爸，一种是儿子。
*   在爸爸，我有一个表来存储 JNDI 名称。我将使用 JNDI 查找 Dad，创建实体管理器并检索此表。
*   从这些检索到的 JNDI 名称中，我将使用多个 Son 数据库创建多个实体管理器。

问题是：

*   儿子有成千上万的实体。每个 Son 数据库大约需要 10 分钟来加载所有实体。如果有 4 个 Son 数据库，则需要 40 分钟。

我的问题：

*   假设我们已经创建了一个实体管理器（准备使用），有没有什么办法可以加快这些实体管理器的创建速度（仅在连接上有所不同）

请查看下面的代码
对于每个 Son JNDI：

```
Map<String, String> puSonProperties = new HashMap<String, String>();
puSonProperties.put("javax.persistence.jtaDataSource", sonJndi);
EntityManagerFactory emf = Persistence.createEntityManagerFactory("PUSon", puSonProperties); 
```

PUson - 他们都使用相同的持久性单元

```
log.info("Verify entity manager for son: {0} - {1}", sonCode, 
         emSon.find(Son_configuration.class, 0) != null ? "ok" : "failed!"); 
```

这是我猜所有实体的加载开始的实际代码。10 分钟。

# doxygen - 用“可读名称”替换函数签名

> ID：12527826
> 
> 赞同：1
> 
> 时间：2012-09-21T09:28:52.807
> 
> 标签：doxygen

我正在编写一个测试文档，并希望有一个标题为 TestFunction 而不是 void testfunction(); 有没有办法在 Doxygen 中进行这种更改？

# php - 在表格中重复复选框

> ID：12527828
> 
> 赞同：1
> 
> 时间：2012-09-21T09:28:58.763
> 
> 标签：php, symfony

所以我在这里有这个表格。我希望这个复选框表单在我的表格的每一行中重复自己，但它只是为每一行正确地重复标签。我需要一种方法在表格的每一行中重复这三个检查。

这是控制器（不确定我是否正确创建了构建器：

```
<?php
$staffList = $this->getDoctrine()
                    ->getEntityManager()
                    ->getRepository('EnsgtiUserBundle:User')
                    ->findAll();

        $formAnnee = $this->createFormBuilder()
                            ->add('checkAnnee1', 'checkbox', array(
                                  'label'     => 'test test',
                                  'required'  => false,))
                            ->add('checkAnnee2', 'checkbox', array(
                                  'label'     => '',
                                  'required'  => false,))
                            ->add('checkAnnee3', 'checkbox', array(
                                  'label'     => '',
                                  'required'  => false,))
                            ->getForm();

        //return $this->redirect( $this->generateUrl('EnsgtiEnsgtiBundle_voirList'));
        return $this->render('EnsgtiEnsgtiBundle:Appli:voirStaffList.html.twig', array(
            'staffList' => $staffList,
            'formAnnee' => $formAnnee->createView(),
        )); 
```

这是表格：

```
{% for user in staffList %}
         <tr>
            <td class="tdVoirStaff"> {{user.nom}} </td>
            <td class="tdVoirStaff"> {{user.prenom}} </td>
            <td class="tdVoirStaff" nowrap> {{user.email}} </td>
            <td class="tdVoirStaff" nowrap>
                <form {{ form_enctype(formAnnee) }}>
                    {{ form_label(formAnnee.checkAnnee1, "1") }}
                    {{ form_errors(formAnnee.checkAnnee1) }}
                    {{ form_widget(formAnnee.checkAnnee1) }}

                    {{ form_label(formAnnee.checkAnnee2, "2") }}
                    {{ form_errors(formAnnee.checkAnnee2) }}
                    {{ form_widget(formAnnee.checkAnnee2) }}

                    {{ form_label(formAnnee.checkAnnee3, "3") }}
                    {{ form_errors(formAnnee.checkAnnee3) }}
                    {{ form_widget(formAnnee.checkAnnee3) }}
                </form>
            </td>
         </tr>
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-21T09:34:07.350

您不能仅将 HTML 放入其中，您必须像这样发布它：

```
<?php 
   echo"<put your html code here>";
?> 
```

你忘记关闭你的选项标签:)

# javascript - 在圆圈内拖动元素

> ID：12527831
> 
> 赞同：0
> 
> 时间：2012-09-21T09:29:10.070
> 
> 标签：javascript, jquery, drag-and-drop

我使用 Javascript 创建了一个圆圈，并希望在其中拖动一个元素。由于圆圈是在 div 内创建的，并且 div 始终是一个矩形，因此该元素被拖动到矩形 div 内而不是圆圈内。是否可以将一个元素拖到一个圆圈内。

# xcode - 在Objective-C中获取包含字符串的数组的值

> ID：12527837
> 
> 赞同：0
> 
> 时间：2012-09-21T09:29:43.173
> 
> 标签：xcode, arrays, string, api

如何获取具有一个值的数组的值，该值是 Objective-C 中的字符串？我实际上对如何正确获取我正在访问的数组中的字符串值感到困惑。

我得到了一个名为“sMessage”的数组的值，该数组具有一个 NSString“成功”类型的值。

这是来自 API 的响应：

```
({"sMessage":"success"}) 
```

我正在尝试使用此代码获取值并将其记录到控制台：

```
NSArray *resultsArray = [json objectForKey:@"sMessage"];
NSString *loginResult = [[resultsArray valueForKey:@"sMessage"] lastObject];
NSLog(@"Result is: %@", loginResult); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:36:38.950

尝试这个：

```
NSString *resultString = [json objectForKey:@"sMessage"];
NSLog(@"Result is: %@", resultString); 
```

键“sMessage”的值不是一个数组，而是一个简单的字符串。

# ios - 以编程方式打开“请勿打扰”

> ID：12527838
> 
> 赞同：6
> 
> 时间：2012-09-21T09:29:46.403
> 
> 标签：ios

在 iOS 6 中，您可以打开/关闭“请勿打扰模式”。有没有可能通过应用程序做到这一点？或者至少有一种方法可以确定它是否已设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:07:48.023

我没有确切的答案，但我建议您研究 Apple 拥有的内部设置 URL (prefs:root=)，此处记录： [http ://www.techwithintent.com/2011/11/force-an -ios-5-device-into-airplane-mode-with-a-click/](http://www.techwithintent.com/2011/11/force-an-ios-5-device-into-airplane-mode-with-a-single-click/)

请注意 - 引用这些 URL 时，用户将退出您的应用程序，因此这是一种访问/切换不同设置的方法，但它并不是真正的程序化。

# c# - `string[] args` 究竟是如何填充到 C# Main 方法中的？

> ID：12527843
> 
> 赞同：9
> 
> 时间：2012-09-21T09:30:19.793
> 
> 标签：c#, .net

*在 C# Main 方法中究竟*是如何`string[] args`填充的？

例如，空白是否被剥离？是否有任何元素曾经为空字符串或 null？单引号和双引号是如何处理的？

[MSDN 没有解释如何](http://msdn.microsoft.com/en-us/library/cb20e19t.aspx)，只是说

> Main 方法的参数是一个字符串数组，表示命令行参数

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T09:34:12.990

当你启动一个进程时，你可以传递一个字符串作为你的参数。如何安排和拆分这些完全取决于您。

因此，如果使用 Windows 命令行，则运行：

```
myexe.exe "Hello World" Joe Bloggs 
```

您的数组将包含：

```
{"Hello World", "Joe", "Bloggs"} 
```

但它只是以这种特定方式拆分（注意 Hello World 周围的引号被删除），因为 .Net 框架会自动为您解析它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T10:02:37.580

我相信给 Main 的参数是[Environment.GetCommandLineArgs()](http://msdn.microsoft.com/en-us/library/system.environment.getcommandlineargs.aspx)在删除列表的第一个后返回的参数。MSDN 描述了关于反斜杠的异常复杂的逻辑：

> 命令行参数由空格分隔。您可以使用双引号 (") 在参数中包含空格。但是，单引号 (') 不提供此功能。
> 
> 如果双引号跟在两个或偶数个反斜杠之后，则将前面的每个反斜杠对替换为一个反斜杠并删除双引号。如果双引号后面有奇数个反斜杠，包括一个，则前面的每一对都被一个反斜杠替换，其余的反斜杠被删除；但是，在这种情况下，不会删除双引号。

感谢评论中的 Christian.K。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:06:38.913

传递给程序的参数取决于操作系统。

您应该在程序中测试空值、空字符串、去除空格和处理单引号/双引号的参数（根据需要）。

# jquery - 如何计算滑块小块以从头到尾显示内容

> ID：12527845
> 
> 赞同：0
> 
> 时间：2012-09-21T09:30:21.253
> 
> 标签：jquery, slider

我很难为我的滑块找到正确的计算和逻辑。
请在此处查看我的滑块：http: [//jsfiddle.net/MyNameIsCode/p6UVt/1/](http://jsfiddle.net/MyNameIsCode/p6UVt/1/)
起初一切似乎都很好，但是如果您尝试将宽度值更改`.item-slider-contents`为`1000px`或更大，则`cache.nub`不会`.item-slider-contents`正确滑动。我希望你明白我的意思。请帮我正确计算。
的宽度`.item-slider-contents`将实时扩展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:11:13.950

我得到了它。我只需要添加这是css：

```
div { box-sizing : border-box; position:relative; } 
```

这个应该是：

```
.slider-road{
margin-top:20px;
height:10px;
width:690px;    
border:1px solid orange;    
} 
```

这是公式：

```
var pct = (cache.nub.position().left - 2) / (cache.slider.width() - 16) 
```

每当我改变它的宽度时，`.item-slider-contents`它都会正确地端到端滑动。

这是更新的链接以供参考：

[http://jsfiddle.net/MyNameIsCode/p6UVt/3/](http://jsfiddle.net/MyNameIsCode/p6UVt/3/)

# iphone - 从一个 iOS 设备直接 VoIP 呼叫到另一个

> ID：12527846
> 
> 赞同：5
> 
> 时间：2012-09-21T09:30:23.860
> 
> 标签：iphone, ios, sip, voip, pjsip

我要开发点对点 VoIP iOS 应用程序。并且希望在没有任何 SIP 代理、SIP 提供商和其他服务器的情况下进行。只是 VoIP 调用 frpm iOSdevice-to-iOSdevice。两个 iOS 设备都可能在 Internet 的某个地方。它在 VoIP 中是真实的吗（例如使用 PJSIP，一般使用 SIP）？

您能否指出我需要开发的主要关键。

我已经阅读了[这些](https://stackoverflow.com/questions/8516133/how-can-i-make-call-between-direct-ip-to-ip-without-sip-server) [主题](https://stackoverflow.com/questions/8705746/peer-2-peer-call-using-pjsip-and-pjsua/12515187#12515187)。它是否真正解决了我的配置中的寻址问题。PJSIP 可以帮助纠正地址吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-28T10:48:00.307

看看 Apples Multipeer Connectivity 框架。我已经构建了一个完全符合您要求的应用程序。如果您查看我的个人资料和我提出的问题，您会得到一些很好的指导。尽管我建议您使用后端来执行此操作，因为 MultiPeer 不是最好的解决方案，但至少在支持多个对等点并能够调用另一台在后台拥有该应用程序的设备时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T13:08:51.357

[在此处](https://stackoverflow.com/questions/8705746/peer-2-peer-call-using-pjsip-and-pjsua?lq=1)查看 Frank Shearar 的答案

简而言之，看起来这将是一项非常艰巨的任务。

另一种选择是使用 iPhone 的 Twilio SDK (Obj-C)。这对于您正在尝试做的事情很有效，并且会容易得多。[关联](http://www.twilio.com/client)

# javascript - 来自 innerHTML 对象的 JQuery 数组

> ID：12527850
> 
> 赞同：0
> 
> 时间：2012-09-21T09:30:51.007
> 
> 标签：javascript, arrays, jquery-ui, array-initialization

学习编码并在从 jQuery 对象创建数组时遇到问题。我想让用户可以选择在他们的个人资料中添加尽可能多的“最喜欢的书”。

用户界面是用 jQuery 编写的，

```
<script language="javascript">
    function one()
    {
        var i = 1;
        my.innerHTML = my.innerHTML +"<br><input type='text' name='title'+i[] >"
        var n = 1;
        [
        div.innerHTML = div.innerHTML +"<br><input type='text' name='author'+n[] >"
        ]
    }
</script> 
```

我努力了：

```
var obj = $('input');
var arr = $.makeArray(obj); 
```

我希望它实际上是那么容易，但输出是：

```
<div id="div">
<br>
<input type="text" +n[]="" name="author">
<br>
<input type="text" +n[]="" name="author">
<br>
<input type="text" +n[]="" name="author">
</div> 
```

我已经尝试了我在这里找到的第二个选项，但给了我相同的输出：

```
var author = new Array();

//get all the authors
$('.auth input').each(function (i)
{
    var author= $(this).val();

    if(author!= '')
    {
        author[author] = author;
        alert(author.length);
    }
}); 
```

和相同的结果。我希望得到这样的结果：

```
<div id="div">
<br>
<input type="text" name="author[0]">
<br>
<input type="text" name="author[1]">
<br>
<input type="text" name="author[2]">
</div> 
```

所以我可以解析出一个 PHP 数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:41:19.287

也许：

```
<script language="javascript">
    var i = 0;
    function one(){
       $('#my').append("<br><input type='text' name='title["+i+"]'>");
       $('#div').append("<br><input type='text' name='author["+i+"]'>");
       i++;
    }
</script> 
```

# c# - 使用mac地址发送UPDClient消息？

> ID：12527853
> 
> 赞同：0
> 
> 时间：2012-09-21T09:31:11.303
> 
> 标签：c#, indy, mac-address, udpclient

我有一些代码使用 Indy.Sockets.UDPClient 使用 ip 地址和侦听端口（我存储在数据库中）将消息发送到 LAN 网络上的 pc：

```
public static void SendMessage(Client pClient)
{
    UDPClient udpClient = new UDPClient();
    udpClient.Host = pClient.ServerIP;
    udpClient.Port = pClient.fListeningOnUDPPort;
    udpClient.SendBuffer(pClient.RestartMessage);
} 
```

但是要求已经改变，我现在需要能够使用 MAC 地址发送消息（也存储在数据库中），是否可以使用 MAC 地址发送类似的消息？

或者是否可以从已知的 MAC 地址获取 PC 的 IP 地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:35:48.717

只要您找到带有 Mac 地址的 IP 地址 (http://fr.wikipedia.org/wiki/Address_Resolution_Protocol)，您就可以使用 UDPClient 向他发送消息

[这篇文章](http://pietschsoft.com/post/2009/11/08/Resolve_IP_Address_And_Host_Name_From_MAC_Address_using_CSharp_and_Windows_ARP_Utility.aspx)描述了如何使用`ARP.exe`.

# c# - 为按钮添加 onClick 事件以获取文件夹浏览器功能。VS2010 - 网站

> ID：12527857
> 
> 赞同：0
> 
> 时间：2012-09-21T09:31:31.080
> 
> 标签：c#, asp.net, web, directory

我从未使用过文件夹浏览功能。基本上我想获得一个文件夹浏览器（比如当你上传文件并单击浏览时）作为按钮 OnClick 事件。我需要的唯一功能是选择一个位置（驱动器，文件夹）并将该位置保存到一个字符串中。

任何想法，教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:37:43.450

[文件夹浏览器对话框](http://msdn.microsoft.com/ru-ru/library/system.windows.forms.folderbrowserdialog.aspx)

```
FolderBrowserDialog folderBrowserDialog1;

folderBrowserDialog1.ShowDialog();

String path = folderBrowserDialog1.SelectedPath; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:38:00.853

为此，您可以使用 OpenFileDialog 或 SaveFileDialog 控件：

[http://www.geekpedia.com/tutorial67_Using-OpenFileDialog-to-open-files.html](http://www.geekpedia.com/tutorial67_Using-OpenFileDialog-to-open-files.html) http://msdn.microsoft.com/en-us/library/system.windows.forms.openfiledialog.aspx

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T09:39:18.217

从[FolderBrowserDialog 类](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.WINDOWS.FORMS.FOLDERBROWSERDIALOG%29;k%28FOLDERBROWSERDIALOG%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-CSHARP%29&rd=true)

你可以尝试类似的东西

```
private void button_Click(object sender, EventArgs e)
{
    FolderBrowserDialog fbd = new FolderBrowserDialog();
    if (fbd.ShowDialog(this) == DialogResult.OK)
    {
        MessageBox.Show(fbd.SelectedPath);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T14:31:12.157

没有可用于 ASP.Net 的标准文件夹浏览器控件，或者我会说 HTML。我能想到的解决方法是创建一个 ActiveX 控件（仅限 IE）或在 Flash 或 Java 的 JFileChooser 中。

有一个文件上传控件可以让您浏览，但不允许您选择文件夹，只能选择文件。

```
<input type="file"> 
```

# asp.net - 如何重定向到自我保持视图状态？

> ID：12527858
> 
> 赞同：0
> 
> 时间：2012-09-21T09:31:31.527
> 
> 标签：asp.net, redirect, viewstate

提交表单后，我想重定向到同一页面。但是页面上还有其他控件，我想保留的女巫状态。

我能解决这个问题吗？尝试将视图状态存储到会话中然后在转发后将其加载回来的好方法吗？还是这里有其他更好的解决方案？

# asp.net-mvc - MVC：从 SelectList 更新 FK 关系

> ID：12527861
> 
> 赞同：2
> 
> 时间：2012-09-21T09:31:43.503
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first

我正在使用 MVC4 和 EF Code First，但在获取 DropDownList 以更新模型类型的外键时遇到问题。

这是我的模型：

```
public class Customer
{
    public int CustomerID { get; set; }

    public string FirstName { get; set; }
    public string LastName { get; set; }

}

public class Party
{
    public int PartyID { get; set; }

    public virtual Customer Host { get; set; }
    public string Location { get; set; }
    public DateTime Date { get; set; }
} 
```

所以一个Party有一个`Host`which is a`Customer`

在`/Party/Create`GET 方法的控制器中，我在 ViewBag 中传递了一个客户列表：

`ViewBag.Customers = new SelectList(db.Customers, "CustomerID", "FirstName");`

然后在视图中，我将其渲染为 DropDownList：

`@Html.DropDownListFor(model => model.Host, ViewBag.Customers as SelectList, String.Empty)`

这一切都很好，我可以从下拉列表中的客户列表中进行选择。但是，当我提交表单时，/Party/Create POST 方法不会插入数据，因为`ModelState`它无效。查看`ModelState`，我可以看到`CustomerID`所选 Customer 的存在，但它未能从 String 转换为类型的对象`Customer`

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:44:26.163

尝试将 DropDownList 绑定到的`CustomerID`属性`Host`：

```
@Html.DropDownListFor(
    model => model.Host.CustomerID, 
    ViewBag.Customers as SelectList, 
    String.Empty
) 
```

# objective-c - 缓存 NSView 上下文

> ID：12527863
> 
> 赞同：1
> 
> 时间：2012-09-21T09:31:52.237
> 
> 标签：objective-c, cocoa, nsview, cgcontext

我正在尝试存储 NSView Current Context 并稍后再次将其绘制到 NSView 。我想知道最快和最有效的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-23T23:45:41.580

您可以将您的内容绘制到一个`NSImage`，然后再重新绘制图像，但是您需要在需要时使缓存无效（这取决于您的视图的作用）。

例子：

```
@interface SOCacheView : NSView

@end

@implementation SOCacheView
{
    NSImage *_cache;
}

- (void)drawRect:(NSRect)dirtyRect
{
    [super drawRect:dirtyRect];

    if (!_cache) [self prepareImage];

    [_cache drawAtPoint:NSZeroPoint fromRect:self.bounds operation:NSCompositeSourceOver fraction:1.0];
}

- (void)prepareImage
{
    _cache = [[NSImage alloc] initWithSize:self.bounds.size];
    [_cache lockFocus];

    // do the drawing here...

    [[NSColor blueColor] setFill];
    NSRectFill(NSMakeRect(0, 0, NSWidth(self.bounds)/2, NSHeight(self.bounds)));
    [[NSColor redColor] setFill];
    NSRectFill(NSMakeRect(NSWidth(self.bounds)/2, 0, NSWidth(self.bounds)/2, NSHeight(self.bounds)));

    [_cache unlockFocus];
} 
```

要使缓存的图形无效，只需设置`_cache`为`nil`。

[这是一个示例项目](https://dl.dropboxusercontent.com/u/452482/stackoverflow/Cache%20View.zip)供您使用

# windows - BAT文件密码硬编码

> ID：12527864
> 
> 赞同：0
> 
> 时间：2012-09-21T09:31:52.850
> 
> 标签：windows, batch-file, passwords

我有一个 BAT 文件，其中存储了用户登录信息，如下所示：

```
userid=johndoe 
```

这消除了用户输入凭据的需要，他们只需要回答密码即可。

我知道这是很糟糕的做法，但有没有办法以类似的方式指定密码？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:14:47.957

自从我使用 SQL*PLUS 以来已经有很多年了。但我似乎记得某些字符出现在命令行上传递的密码中时需要被引用和/或转义。我记得有一个密码，当我在提示符下提供它时可以使用，但是当我尝试将它包含在命令行中时失败了。最终我想出了如何引用/转义密码，以便它在命令行上工作。我认为连接字符串也存在类似的问题。

不幸的是，我不记得究竟是什么触发了问题，也不记得解决方案是什么。

尝试引用密码和/或连接字符串

```
username/"passworld"@"connectionString" 
```

或者可能是转义引号

```
username/\"password\"@\"connectionString\" 
```

如果上述方法不起作用，那么希望它足以帮助您找到正确的解决方案。

# java - 用于在 WebDriver 中使用的 HTML 代码中的 xpath 和 csspath

> ID：12527866
> 
> 赞同：0
> 
> 时间：2012-09-21T09:31:59.657
> 
> 标签：java, xpath, css-selectors, selenium-webdriver

我有以下 HTML 片段：

```
<label for="widget_118_login_username">Username</label> 
```

在 Selenium 2 (WebDriver) 中使用的 xpath 和 csspath (cssSelector) 是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:12:53.547

以下对我来说很好：

Xpath: //标签[@for='widget_118_login_username']

cssSelector: 标签[for=widget_118_login_username]

# iphone - EXC_BAD_ACCESS 在 iPhone 中发送带有附件的邮件

> ID：12527867
> 
> 赞同：0
> 
> 时间：2012-09-21T09:32:04.140
> 
> 标签：iphone, xcode

我已经创建程序来发送带有我从 sqlite 数据库中的一些详细信息的邮件

如果我不使用附件，它工作正常，但如果我取消注释，就像我得到这样的异常：

```
Thread 1: EXC_BAD_ACCESS(code=1, address=0x474e5091 
```

这是我的代码：

```
MFMailComposeViewController *mailView = [[MFMailComposeViewController alloc] init];

    mailView.mailComposeDelegate = (id) self;

    NSArray *recipients = [NSArray arrayWithObject:@"chintan_zwt@yahoo.com"];

    [mailView setToRecipients:recipients];
    [mailView setSubject:@"Try Mail From User Application"];

    NSString *body = [[NSString alloc] initWithFormat:@"First Name : %@ <br>",lblFirstName.text];

    body = [body stringByAppendingFormat:@"Last Name : %@<br>",lblLastName.text];
    body = [body stringByAppendingFormat:@"Username  : %@<br>",lblUsername.text];
    body = [body stringByAppendingFormat:@"Password  : %@<br>",lblPassword.text];
    body = [body stringByAppendingFormat:@"Birthdate : %@<br>",lblBD.text];

    [mailView addAttachmentData:[UIImagePNGRepresentation(u.Img1) bytes]
                       mimeType:@"image/png"
                       fileName:@"a.png"];

    [mailView setMessageBody:body isHTML:YES];

    [self presentModalViewController:mailView animated:YES]; 
```

我从数据库中正确获取数据并且能够在屏幕上显示图像但问题只是当我将图像附加到邮件时

在此处

```
UIImagePNGRepresentation(u.Img1) 
```

U 是用户类（用户定义类）的对象，Img1 是 UIImage 的对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:43:49.900

首先[`addAttachmentData:mimeType:fileName:`](http://developer.apple.com/library/ios/#documentation/MessageUI/Reference/MFMailComposeViewController_class/Reference/Reference.html#//apple_ref/doc/uid/TP40008200-CH1-SW2)方法需要一个`NSData`对象，所以就不需要调用bytes方法了`NSData`。

如果您在代码中尝试此操作，您可以检查该[`UIImagePNGRepresentation()`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIImagePNGRepresentation)方法是否返回有效的 NSData 对象。只需在该行上放置一个断点并检查调试器中的值。

```
NSData *imageDate = UIImagePNGRepresentation(u.Img1);
[mailView addAttachmentData:imageDate mimeType:@"image/png" fileName:@"a.png"]; 
```

# android - Android：ListView - 滚动后的状态

> ID：12527869
> 
> 赞同：0
> 
> 时间：2012-09-21T09:32:06.277
> 
> 标签：android, android-listview

我有一个列表视图，我可以控制焦点。当我到达最后一个可见位置并向下单击时，列表视图不会滚动。但是，如果我触摸并滚动列表视图，然后尝试使用我的自定义焦点控件导航列表视图，它就可以工作。

我的问题是当用户触摸并滚动它时，android 会将列表视图置于什么状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:06:20.633

我不知道问题是什么，但是将 Activity 更改为 ListActivity 解决了这个问题。

# sql - 在 SQLite 中存储/查询多个值

> ID：12527871
> 
> 赞同：1
> 
> 时间：2012-09-21T09:32:14.200
> 
> 标签：sql, sqlite

我试图在 SQLite3 中为每棵树存储一个开花季节。目前我有“月份”字段，然后我将月份名称存储在该字段中。例如

```
Tree Name     Month

Tree1         Jan,Feb,Mar
Tree2         Nov,Dec,Jan
Tree3         Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec
Tree4         Mar,Apr,Nov,Dec
Tree5         Jan,Feb,Mar,Apr 
```

我不确定这是否是存储它的最佳方式，任何建议都值得赞赏。

其次，我需要在我输入月份的地方执行查询，它应该返回与搜索条件匹配的树名。例如

如果我搜索

```
 "Jan" 
```

结果应该是 Tree1,Tree2,Tree3,Tree5

```
 "Jan,Feb,Mar" 
```

结果应该是 Tree1,Tree3,Tree5

```
 "Jan,Feb,Mar,Apr" 
```

结果应该是 Tree5

```
 "Sep,Oct,Nov,Dec" 
```

结果应该是无

为了获得上述结果，我必须使用哪个 SQL 查询？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:35:56.167

不，这不是存储它的最佳方式。

您应该标准化您的数据并每行存储一个月/树

```
Tree1         Jan
Tree1         Feb
Tree1         Mar 
Tree2         Nov
Tree2         Dec
Tree2         Jan
.... 
```

（或者也许将月份存储为数字 1-12）

那么你就可以

```
select treename from TreeBlooming where month = 'jan' 
```

和

```
select treename from TreeBlooming
where month in ('jan','feb')
group by treename
having count(distinct month)=2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T09:47:31.213

您可以通过以下方式使用[Group_concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)：

```
SELECT Group_concat(name) AS [tree name] 
FROM tree 
WHERE month LIKE '%Jan,Feb,Mar%' 
```

查看**[SQLFIDDLE](http://sqlfiddle.com/#!7/88152/8)**

# jquery - 使用 Jquery 显示隐藏的数据表会破坏 CSS

> ID：12527873
> 
> 赞同：0
> 
> 时间：2012-09-21T09:32:21.183
> 
> 标签：jquery, html, css

编辑：已解决。当页面最初加载时，数据表是使用布局的 css 文件形成的。但是，当它调用 javscript 时，它正在重建数据表并忽略我引用的任何 CSS 文件。因此，它会自动缩小表格以匹配文本的大小。这可以通过在数据表的实际创建中设置 bAutoWidth = false 来避免。

感谢所有帮助过的人！

所以我有一个如下的数据表。

```
 <div class="datatable" style="display:none;">
            <div class="row">
                <table class="display" id="testtable">
                    <thead>
                        <tr>
                            <th>First column</th>
                            <th>Second</th>
                            <th>Third</th>
                        </tr>
                    </thead>
                    <tbody id="selectable">                           
                                <tr class="gradeU">
                                    <td align="left">First column info</td>
                                    <td align="left">second</td>
                                    <td>Third</td>
                                </tr>
                    </tbody>
                </table>

            </div>
        </div> 
```

所以上面是数据表，你可以看到表本身是隐藏的，因为我只想在用户将鼠标悬停在按钮上时显示它。当用户将鼠标悬停在按钮上时，会从函数调用以下代码。

```
 $(".datatable").show(); 
```

这有效，但是它破坏了 CSS。数据表变得非常挤压，只有大约四分之一的宽度。我尝试在调用的函数中将宽度设置得更大，但没有运气。我知道它与以下代码有关

```
 style="display:none;" 
```

一旦我把它拿出来，表格就显示得很好，但是我需要隐藏它，直到调用函数。

我已经尝试过通常的 $(element).style.visibilty 但似乎没有任何区别，表格顽固地拒绝调整到正确的大小。非常感谢任何帮助，并在此先感谢您。

编辑：下面是表格和 TD 的 CSS

```
 table.display {
margin: 10px;
padding: 5px;
clear: both;
width: 98%;
overflow: auto;
/*    text-align: center;*/
height: auto;

    }

    table.display td {
        padding: 5px 5px;
     }

    table.display td.center {
        text-align: center;
    } 
```

编辑：我上传了 2 张图片来显示表格之间的差异。

[http://imageshack.us/photo/my-images/840/correecttable.png/](http://imageshack.us/photo/my-images/840/correecttable.png/)

那是不隐藏时的表。

[http://imageshack.us/photo/my-images/822/incorrecttable.png/](http://imageshack.us/photo/my-images/822/incorrecttable.png/)

那是隐藏然后使用 jQuery 显示的表格。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T09:50:23.777

CSS 被破坏了，因为 jQuery`.show()`和函数只是在and (or )`.hide()`之间切换，但是element的属性的默认值是and not ，所以不要使用and使用以下内容：`display: none``display: block``display: inline``display``<table>``display: table``display: block``$(".datatable").show();``$(".datatable").hide();`

```
$(".datatable").css({'display': 'none'});  // to hide the table, here you can
                                           //  still use jQuery's .hide()
$(".datatable").css({'display': 'table'}); // to show the table 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:35:51.200

这是方法.show（）的jquery文档的一部分：

> 没有参数，.show() 方法是显示元素的最简单方法：
> 
> `$('.target').show();`
> 
> 匹配的元素将立即显示，没有动画。这大致相当于调用 .css('display', 'block')

所以 show 将你的元素设置为 display:block，这可能就是它在 display:block 中的样子。

这是[.show() 的完整描述](http://api.jquery.com/show/)

可能您只需要编辑表格的 css 属性，使其在 display:bock 上看起来不错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T13:52:38.423

当页面最初加载时，数据表是使用布局的 css 文件形成的。但是，当它调用 javscript 时，它正在重建数据表并忽略我引用的任何 CSS 文件。因此，它会自动缩小表格以匹配文本的大小。这可以通过在数据表的实际创建中设置 bAutoWidth = false 来避免。

感谢所有帮助过的人！

# interface - Change Local EJB Interface in Remote EJB Interface - Result to the client application

> ID：12527883
> 
> 赞同：0
> 
> 时间：2012-09-21T09:32:44.487
> 
> 标签：interface, dependency-injection, ejb-3.0, local, remote-access

I have an application in Java EE/JSF using a local EJB Interface and I would like to use the business layer with another client application (in a different JVM).

So, I need to use a remote EJB Interface to use dependency injection in the new client application.

But if I change the EJB Interface, I'll also have to change all dependency injection in the managedBean of the "first" client application?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:17:54.860

Local interfaces use pass-by-reference, but remote interfaces use pass-by-deep-copy. This means (1) all your parameter and return values must be serializable, and (2) you must depend on pass-by-reference, either for performance (very large Maps, etc.) or correctness (pass an object to a method, change the object, expect the result to be visible to the caller.

That said, when you say "local EJB interface", do you mean `@Local`, or do you mean EJBLocalHome? If the former, then you can try changing to `@Remote`, and it might just work. If the latter, then you'll need to update your interfaces to use `EJBHome`/`EJBObject`, which means you'll need to add RemoteException to all the methods on the interfaces, which means you'll need to at least update callers to handle the exception.

# android - 在 Android 上使用 Apache Mina 和 SslFilter

> ID：12527884
> 
> 赞同：3
> 
> 时间：2012-09-21T09:32:51.467
> 
> 标签：android, ssl, bouncycastle, apache-mina

我正在使用 apache mina 在我的服务器和 android 客户端之间进行通信。当我通过不安全的连接连接时一切都很好，但几天前我决定使用 ssl 保护连接。Apache mina 有一个名为 SslFilter 的过滤器来完成任务 - 它使用我们提供密钥库和信任库的 ssl 上下文来建立安全连接。如果我在为 pc 编写的客户端上使用带有 mina 的 sslfilter，那么一切都像一个魅力，但是当我试图在 android 上使用它时 - 这并不是那么简单。首先，我们必须导入从服务器 SUN 格式的密钥库中提取的证书，并将其转换为匹配充气城堡提供程序 - 因为这似乎是 android 上唯一的安全提供程序。好的，我可以使用 keytool 和正确的命令轻松实现这一点。然后我'

> 86992 [NioProcessor-3] DEBUG AuthenticationManager - 会话已关闭：2 260628 [NioProcessor-1] DEBUG SslFilter - 将 SSL 过滤器 sslFilter 添加到链中 260629 [NioProcessor-1] DEBUG SslHandler - 会话服务器 [3]（无 sslEngine）正在初始化SSL 处理程序 260642 [NioProcessor-1] 调试 SslHandler - 会话服务器 [3]（无 sslEngine）SSL 处理程序初始化完成。260644 [NioProcessor-1] DEBUG SslFilter - Session Server3：开始第一次握手 260646 [NioProcessor-1] DEBUG SslHandler - Session Server3 处理 NEED_UNWRAP 状态 260703 [NioProcessor-1] DEBUG SslFilter - Session Server3：收到消息：HeapBuffer [ pos =0 lim=78 上限=2048：16 03 01 00 49 01 00 00 45 03 01 C4 C4 C4 C4 80...

260710 [NioProcessor-1] 调试 SslHandler - 会话 Server3 处理 NEED_WRAP 状态

260711 [NioProcessor-1] 调试 SslFilter - 会话 Server3：写入消息：WriteRequest：HeapBuffer[pos=0 lim=678 cap=1057：16 03 01 02 A1 02 00 00 46 03 01 50 5C 17 25 F6...] 260711 [NioProcessor-1] 调试 SslHandler - 会话 Server3 处理 NEED_UNWRAP 状态 260712 [NioProcessor-1] 调试 SslFilter - 会话 Server3：处理 SSL 数据 260867 [NioProcessor-1] 调试 SslFilter - 会话 Server3：收到消息：HeapBuffer [ pos= 0 lim=139 cap=2048: 16 03 01 00 86 10 00 00 82 00 80 10 B7 5D AC B3...] 260868 [NioProcessor-1] 调试 SslHandler - 会话 Server3 处理收到的消息 260868 [NioProcessor-1] DEBUG SslHandler - Session Server3 处理 NEED_UNWRAP 状态 260869 [NioProcessor-1] DEBUG SslHandler - Session Server3 处理 NEED_TASK 状态

260876 [NioProcessor-1] DEBUG SslHandler - Session Server3 处理 NEED_UNWRAP 状态 260877 [NioProcessor-1] DEBUG SslFilter - Session Server3：处理 SSL 数据 261133 [NioProcessor-1] DEBUG SslFilter - Session Server3：收到消息：HeapBuffer[ pos =0 lim=43 cap=1024: 14 03 01 00 01 01 16 03 01 00 20 65 07 FB 0F 1B...] 261134 [NioProcessor-1] DEBUG SslHandler - Session Server3 处理收到的消息 261135 [NioProcessor-1 ] DEBUG SslHandler - Session Server3 处理 NEED_UNWRAP 状态 261154 [NioProcessor-1] DEBUG SslHandler - Session Server3 处理 NEED_WRAP 状态

261157 [NioProcessor-1] DEBUG SslFilter - Session Server3：写入消息：WriteRequest：HeapBuffer[pos=0 lim=6 cap=8: 14 03 01 00 01 01] 261158 [NioProcessor-1] DEBUG SslHandler - Session Server3 处理 NEED_WRAP状态

261159 [NioProcessor-1] 调试 SslFilter - 会话 Server3：写入消息：WriteRequest：HeapBuffer[pos=0 lim=37 cap=66：16 03 01 00 20 83 D9 81 59 21 9E 03 32 A3 49 17...] 261159 [NioProcessor-1] DEBUG SslHandler - Session Server3 处理 FINISHED 状态 261160 [NioProcessor-1] DEBUG SslHandler - Session Server3 现在是安全的 261160 [NioProcessor-1] DEBUG SslHandler - Session Server3 处理 FINISHED 状态 261161 [NioProcessor-1] DEBUG SslHandler - Session Server3 现在受到保护 261161 [NioProcessor-1] 调试 SslFilter - Session Server3：处理 SSL 数据

如您所见 - 一切都很好。

> 261160 [NioProcessor-1] DEBUG SslHandler - Session Server3 现在是安全的 261160 [NioProcessor-1] DEBUG SslHandler - Session Server3 处理 FINISHED 状态 261161 [NioProcessor-1] DEBUG SslHandler - Session Server3 现在是安全的

上面的清单显示连接现在是安全的。成功 ！！万岁！！但一点也不，因为在成功 SSL 'dance' android 客户端尝试以与 pc 客户端相同的方式发送消息......然后什么也没有发生。什么都没有.. 应用程序在调用 SslFiter 编码方法时挂在某个地方.. 服务器没有收到任何消息。我听说 android 上的 ssl 存在一些问题 - 你认为可能是这种情况吗？

**一个重要的注意事项。我也尝试更改服务器上的提供程序，我已将 BouncyCastle 安全提供程序导入 java 扩展提供程序以匹配 android 上使用的提供程序，然后我已将其注册到 java.security，结果是相同的，甚至 pc 客户端它仍然使用 SUN 提供程序可以成功地与带有 BouncyCastle 提供程序的服务器通信 - 所以我确保自己不是这种情况。**

以上，注无效。我确定我在服务器上将提供程序更改为 BC，但我发现这不是事实。实际上，apache mina 隐藏了有关 SSLContext 创建的一些细节，并且上下文是使用默认提供程序创建的，即 sun 提供程序（我现在有点困惑，当时 SUN 提供程序如何正确加载 BKS 格式的存储）。**事实上，我无法在我的电脑上创建使用 TSL 和 BouncyCastle 提供程序的 SSLContext

```
SSLContext cdt = SSLContext.getInstance("TLS", new BouncyCastleProvider()); 
```

或者

```
SSLContext cdt = SSLContext.getInstance("TLS", "BC"); 
```

我收到以下异常“ **java.security.NoSuchAlgorithmException: no such algorithm: TLS for provider BC** ” - 似乎是因为 BC 是 JCE 提供者，而 SSLContext 属于 JSSE。所以我没有证明我自己的假设，即我在 android “bc provider” - 服务器“sun provider” 通信中存在问题，因为在交换数据时加密期间存在一些特定于提供商的算法差异。**

如果有人在 mina、android 和 ssl 方面遇到过类似问题，我将不胜感激任何建议......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-03T19:59:14.730

尝试像这样静态设置提供程序：

```
import org.bouncycastle.jce.provider.BouncyCastleProvider;

static {
    Security.addProvider(new BouncyCastleProvider());
} 
```

# android - Android：onRecieve 的意图 getSerializableExtra(String key) 返回 null

> ID：12527889
> 
> 赞同：1
> 
> 时间：2012-09-21T09:33:03.607
> 
> 标签：android, android-intent

所以我在这里有这段代码；

```
myIntent.putExtra("schedule",serializableClass); 
```

这个意图转到我的广播接收器，我确实得到了如下可序列化的，

```
public void  onRecieve(Context context, Intent intent)
{
    Schedule s = (Schedule) intent.getSerializableExtra("schedule");
} 
```

但它总是返回，即使当我把 Extras 它不为空时，即使在传递它之前检查过`myIntent.putExtra()`我真的不知道会发生什么返回，为什么它总是返回 null？.. 有人知道这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:46:37.700

演员表是错误的，我会更容易传递序列化的字符串并进行反序列化。我正在使用这个类。

```
 public final class ObjectSerializer {

    private ObjectSerializer() {

    }

    public static String serialize(Serializable obj) throws IOException {
        if (obj == null)
            return "";
        try {
            ByteArrayOutputStream serialObj = new ByteArrayOutputStream();
            ObjectOutputStream objStream = new ObjectOutputStream(serialObj);
            objStream.writeObject(obj);
            objStream.close();
            return encodeBytes(serialObj.toByteArray());
        } catch (Exception e) {
            throw new IOException("Serialization error: " + e.getMessage(), e);
        }
    }

    public static Object deserialize(String str) throws IOException {
        if (str == null || str.length() == 0)
            return null;
        try {
            ByteArrayInputStream serialObj = new ByteArrayInputStream(
                    decodeBytes(str));
            ObjectInputStream objStream = new ObjectInputStream(serialObj);
            return objStream.readObject();
        } catch (Exception e) {
            throw new IOException("Serialization error: " + e.getMessage(), e);
        }
    }

    public static String encodeBytes(byte[] bytes) {
        StringBuffer strBuf = new StringBuffer();

        for (int i = 0; i < bytes.length; i++) {
            strBuf.append((char) (((bytes[i] >> 4) & 0xF) + ('a')));
            strBuf.append((char) (((bytes[i]) & 0xF) + ('a')));
        }

        return strBuf.toString();
    }

    public static byte[] decodeBytes(String str) {
        byte[] bytes = new byte[str.length() / 2];
        for (int i = 0; i < str.length(); i += 2) {
            char c = str.charAt(i);
            bytes[i / 2] = (byte) ((c - 'a') << 4);
            c = str.charAt(i + 1);
            bytes[i / 2] += (c - 'a');
        }
        return bytes;
    }

} 
```

之后像这样使用：

```
String scheduleSerialization = ObjectSerializer.serialize(schedule); 
myIntent.putExtra("schedule",scheduleSerialization); 
```

最后要做的是：

```
public void  onRecieve(Context context, Intent intent)
{
    String serial =  intent.getStringExtra("schedule");
    if(serial!=null)
    Schedule s = (Schedule) ObjectSerializer.deserialize(serial) ;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T13:06:31.433

不鼓励在 Android 上使用 Serializable，因为它很慢。如果您查看 android 源代码，您会看到

*   通常将信息分解为多个键并将它们作为原始类型（整数、字符串等）发送
*   当无法完成时，将使用 Parcelable 对象

# php - PHP reCaptcha AJAX

> ID：12527891
> 
> 赞同：1
> 
> 时间：2012-09-21T09:33:11.203
> 
> 标签：php, ajax, recaptcha

大家好，我在我的页面中使用 reCaptcha，它是一个联系页面。我想在用 PHP 提交表单之前检查单词。所以我在 Ajax 中完成了它。这是我的代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Re captcha</title>
<script type="text/javascript" src="jquery-1.2.3.js"></script>
<script type="text/javascript">
function validateCaptcha()
{

challengeField =  $("input#recaptcha_challenge_field").val();
responseField = $("input#recaptcha_response_field").val();

alert(challengeField);
alert(responseField);
//return false;
var html = $.ajax({
type: "POST",
url: "ajax.recaptcha.php",
data: "recaptcha_challenge_field=" + challengeField + "&recaptcha_response_field=" + responseField,
async: false
}).responseText;

if(html == "success")
{
   // $("#captchaStatus").html("Success. Submitting form.");
   // return false;
    // Uncomment the following line in your application
    //load_ajax();
    alert("Captcha success..");
    return true;
}
else
{
    $("#captchaStatus").html("Image verification failed);
    Recaptcha.reload();
    return false;
}
}
</script>

</script>
</head>

<body>
<div style="height:300px;width:350px;margin:auto;background:#969;padding:20px;>
<form action = "javascript:void(null);" name="frmSubmit" method="post" onsubmit="return validateCaptcha();">
<label>Name</label><br />
<input type="text" name="txtName" id="NameTextBox" />
<br />
<label>E Mail</label><br />
<input type="text" name="txtEmail" id="EmailTextBox" />
<br />
<br />
<?php

 require_once('captcha/recaptchalib.php');

 // Get a key from https://www.google.com/recaptcha/admin/create

 //Localhost

  $publickey = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";
  $privatekey = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";

  # the response from reCAPTCHA
  $resp = null;
  # the error code from reCAPTCHA, if any
  $error = null;

  # was there a reCAPTCHA response?
   if ($_POST["recaptcha_response_field"]) {
    $resp = recaptcha_check_answer ($privatekey,
                                    $_SERVER["REMOTE_ADDR"],
                                    $_POST["recaptcha_challenge_field"],
                                    $_POST["recaptcha_response_field"]);

    if ($resp->is_valid) {
            echo "You got it!";
    } else {
            # set the error code so that we can display it
            $error = $resp->error;
    }
    }
    echo recaptcha_get_html($publickey, $error);
     ?>
     <br />
    <input   name="BtnSubmit"type="submit"onclick="MM_validateForm('NameTextBox','','R','EmailTextBox','','R');return document.MM_returnValue" value="Send" />

    </form>
    </div>
     <script type="text/javascript">
            var RecaptchaOptions = {
                theme : 'Red'
            };
        </script>
       </body>
       </html> 
```

我得到的错误是我得到的 chlenge filed(challengeField = $("input#recaptcha_challenge_field").val();) 不正确。它看起来像这样

```
03AHJ_Vut2oHufxF2RvOtWbL7PDrlbU0bj3OgVpxaRg0Ae6-_xjqcIxRJTqD-bnUdTwyeLepickvVC7XLe5kqoWLu1sYdx7ZlmVkEP5TrHA9jGH75kW0Wua6faimq4aRZ5RaOOI0KOoqD0gVOGfeRQ1fw5c5lw-l5WXQ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:38:21.867

绑定尝试在您的 PHP 站点上使用它进行 recaptcha 集成

只需使用[Zend_Service_ReCaptcha](http://zendframework.com/manual/en/zend.service.recaptcha.html)。您只需几行代码即可集成此服务：

```
//Creating instance
$recaptcha = new Zend_Service_ReCaptcha($pubKey, $privKey);

//Display output
echo $recaptcha->getHTML();

//Handling input
$result = $recaptcha->verify(
    $_POST['recaptcha_challenge_field'],
    $_POST['recaptcha_response_field']
);

//And finally validate captcha
if ($result->isValid()) {
    //Cool!
} 
```

# iphone - 在编辑时禁用 UITextField 上的键盘

> ID：12527897
> 
> 赞同：1
> 
> 时间：2012-09-21T09:33:55.193
> 
> 标签：iphone, ios, uitextfield, uidatepicker, iphone-softkeyboard

因为当我单击 UITextField 时日期选择器与键盘一起显示，我想隐藏 dob-text 字段上的键盘操作？这里是我的代码

```
- (void)removeViews:(id)object 
    {
    [[self.view viewWithTag:9] removeFromSuperview];
    [[self.view viewWithTag:10] removeFromSuperview];
    [[self.view viewWithTag:11] removeFromSuperview];
    }

    - (void)dismissDatePicker:(id)sender 
    {
    CGRect toolbarTargetFrame = CGRectMake(0, self.view.bounds.size.height, 320, 44);
    CGRect datePickerTargetFrame = CGRectMake(0, self.view.bounds.size.height+44, 320, 216);
    [UIView beginAnimations:@"MoveOut" context:nil];
    [self.view viewWithTag:9].alpha = 0;
    [self.view viewWithTag:10].frame = datePickerTargetFrame;
    [self.view viewWithTag:11].frame = toolbarTargetFrame;
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(removeViews:)];
    [UIView commitAnimations];
    }

    - (IBAction)but 
    {
    //[eventText resignFirstResponder];
    [dob resignFirstResponder];

    if ([self.view viewWithTag:9]) 
    {
        return;
    }
    CGRect toolbarTargetFrame = CGRectMake(0, self.view.bounds.size.height-216-44, 320, 44);
    CGRect datePickerTargetFrame = CGRectMake(0, self.view.bounds.size.height-216, 320, 216);

    UIView *darkView = [[UIView alloc] initWithFrame:self.view.bounds ];
    darkView.alpha = 0;
    darkView.backgroundColor = [UIColor blackColor];
    darkView.tag = 9;
    UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(dismissDatePicker:)] ;
    [darkView addGestureRecognizer:tapGesture];
    [self.view addSubview:darkView];

    datePicker = [[UIDatePicker alloc] initWithFrame:CGRectMake(0, self.view.bounds.size.height+44, 320, 216)] ;
    datePicker.datePickerMode=UIDatePickerModeDate;
    datePicker.tag = 10;
    [datePicker addTarget:self action:@selector(changeDate:) forControlEvents:UIControlEventValueChanged];

    [self.view addSubview:datePicker];

    UIToolbar *toolBar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, self.view.bounds.size.height, 320, 44)] ;
    toolBar.tag = 11;
    toolBar.barStyle = UIBarStyleBlackTranslucent;
    UIBarButtonItem *spacer = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil] ;
    UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(dismissDatePicker:)] ;
    [toolBar setItems:[NSArray arrayWithObjects:spacer, doneButton, nil]];
    [self.view addSubview:toolBar];

    [UIView beginAnimations:@"MoveIn" context:nil];
    toolBar.frame = toolbarTargetFrame;
    datePicker.frame = datePickerTargetFrame;
    darkView.alpha = 0.5;
    [UIView commitAnimations];
    //[datePicker addTarget:self action:@selector(dateText:)forControlEvents:UIControlEventValueChanged];
    //NSDateFormatter *_dateFormatter = [[NSDateFormatter alloc] init];
    //_dateFormatter.dateStyle = NSDateFormatterFullStyle;
    //dateText.text = [NSString stringWithFormat:@"%@",
    // [_dateFormatter stringFromDate:datePicker.date]];

    //[self.tableview reloadData];

    }

I added the resignfirstresponder also,since its showing the same error

    - (BOOL)textFieldShouldReturn:(UITextField *)textField
    {
    return [textField resignFirstResponder];
    return [txt1 resignFirstResponder];//dob textfield
    } 
```

![在此处输入图像描述](../Images/dd9380411f15b77fda8c35d868ba38f9.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T09:40:29.360

使用 UITextField 的委托方法

```
 - (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
 {
   if(textField == dob-text )
     //load picker here
     return NO; //hide keyboard
   else
     return YES; //show keyboard
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T09:50:33.380

更好的解决方案是将 UIPickerView 设置[`inputView`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITextField_Class/Reference/UITextField.html#//apple_ref/doc/uid/TP40006888-CH3-SW54)为[`UITextField`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITextField_Class/Reference/UITextField.html).

您可以将 设置`UIToolBar`为[`inputAccessoryView`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITextField_Class/Reference/UITextField.html#//apple_ref/doc/uid/TP40006888-CH3-SW54)的 [`inputView`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITextField_Class/Reference/UITextField.html#//apple_ref/doc/uid/TP40006888-CH3-SW54)。这样 iOS 将处理所有 UIPickView 的显示。

只需将属性设置为正确的视图：

```
self.dateTextField.inputView = self.datePicker;
self.dateTextField.inputAccessoryView = self.inputToolbar; 
```

* * *

另一方面，使用`viewWithTag:`方法获取视图意味着您正在遍历所有视图。为什么不为这些视图创建属性。它会不那么混乱，可能会更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T05:03:45.793

首先，文本字段不应该有弹出框 - 既不是选择器也不是弹出框，也不是任何东西最好的解决方案是放置一个按钮 - 输入自定义 - 设置图像，如日期选择器图像并添加选择器 - 在这种情况下，您将没有任何问题 wrt textfields popover 并且外观也会很好，您可以根据您的要求对其进行自定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T09:45:18.923

试试 textFieldDidBeginEditing

```
-(void) textFieldDidBeginEditing:(UITextField *)textField{
  [textField resignFirstResponder];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T09:48:36.910

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    datePicker.hidden = NO;
    [textField resignFirstResponder];
} 
```

# android - AIDL 文件不生成 Java 文件

> ID：12527902
> 
> 赞同：8
> 
> 时间：2012-09-21T09:34:12.517
> 
> 标签：android, service, interface, aidl

我已经定义了一个 AIDL android 接口来提供来自其他应用程序的服务。

我的问题是在我的项目中，Android 不会从这个 AIDL 生成 Java 文件。请注意，该项目可以编译并正常工作。但是，如果我将此 AIDL 文件移动到另一个项目，Android 会生成 Java 文件。

我不知道在哪里可以调试这种错误，或者在哪里可以阅读有关此的一些日志。

有谁能够帮我？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2018-03-26T04:02:21.923

我遇到了同样的问题，并且在 Android Studio 上工作正常。有两种方法可以解决此问题。

方法一：

> 将 AIDL 文件放在 src/main/aidl 包下，以遵循 gradle 构建的默认源设置。

这是简单的方法，但并不聪明。

方法二：

1.  将aidl 文件保存在您的自定义包下。

2.  在 build.gradle 文件中添加源设置映射如下

    ```
    sourceSets {
       main {
         aidl.srcDirs = ['src/main/java']
       }
    } 
    ```

**如上所述设置后不要忘记清理和重建。**

更多信息请参考这里，

[https://issuetracker.google.com/issues/36972230](https://issuetracker.google.com/issues/36972230)

[https://issuetracker.google.com/issues/36972230](https://issuetracker.google.com/issues/36972230)

[https://issuetracker.google.com/issues/36988483](https://issuetracker.google.com/issues/36988483)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-08-03T20:30:16.647

我遇到了类似的问题。使用 Android Studio，文件必须位于特定位置，除非您在 Gradle 中覆盖它。

我必须将aidl文件放在'src/main/aidl/example/package/name/' <--aidl文件中声明的包将是'package example.package.name'。

它要求文件位于特定的aidl 文件夹中，并且具有与aidl 中声明的包名称匹配的文件夹结构。我在这里找到了最初的提示：[https ://code.google.com/p/android/issues/detail?id=56328](https://code.google.com/p/android/issues/detail?id=56328)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-21T18:40:14.163

**Eclipse 直接在`.aidl`文件**中向您显示错误，因此请先检查您的文件。我遇到了类似的问题，发现了我的问题：我在接口函数前面加上了`public`. 那是错误的。例如：

```
package com.example.phone.service;

interface IService {
    public void placeCall(String a, in String b, in String c);
} 
```

应该：

```
package com.example.phone.service;

interface IService {
    void placeCall(String a, in String b, in String c);
} 
```

**不要忘记`.java`生成的文件位于`gen/`**not `src/`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-06T15:30:50.713

如果您根据尝试创建接口的位置（例如 framework/base/）转到父目录之一，您将在此文件中找到名为 Android.mk 的该目录的 make 文件，您应该在适当的位置添加 .aidl 名称（由于评论，很容易理解确切的位置）然后构建。将生成“你的界面”.java。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T09:43:41.420

尝试清理项目，这通常有助于解决这些类型的错误。还要检查它是否不包含错误，因为错误会阻止某些编译步骤的完成。

假设您使用 Eclipse，请查看“控制台”视图（窗口 > 显示视图 > 控制台），它应该包含编译过程的输出。

# erlang - 如何在 Erlang/OTP 中将 datetime() 转换为 timestamp()？

> ID：12527908
> 
> 赞同：15
> 
> 时间：2012-09-21T09:34:26.083
> 
> 标签：erlang

我需要转换`{{2012, 9, 21}, {13, 21, 11}}`成`timestamp()`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-21T13:25:48.820

修正版：

```
Seconds = calendar:datetime_to_gregorian_seconds(DateTime) - 62167219200,
%% 62167219200 == calendar:datetime_to_gregorian_seconds({{1970, 1, 1}, {0, 0, 0}})
{Seconds div 1000000, Seconds rem 1000000, 0}. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-15T12:54:18.177

你可以用这个

```
to_timestamp({{Year,Month,Day},{Hours,Minutes,Seconds}}) ->
(calendar:datetime_to_gregorian_seconds(
    {{Year,Month,Day},{Hours,Minutes,Seconds}}
) - 62167219200)*1000000; 
```

这是来自这个 [Github/Arboreus的模块的一部分](https://github.com/ArboreusLibrary/Fw_library/blob/master/src/universal/a_time.erl)

# wix - 卸载时关闭应用程序 - wix

> ID：12527915
> 
> 赞同：9
> 
> 时间：2012-09-21T09:34:46.640
> 
> 标签：wix, close-application

我正在使用 Wix 3.6。我有一个问题，在卸载时如果任何窗口打开并显示在任务栏中（此窗口是我的 msi 的一部分，我正在尝试卸载它），它显示一个对话框，要求用户关闭应用程序（“在继续安装之前应关闭以下应用程序”）。

我尝试了以下方法，但没有运气。

```
<InstallExecuteSequence>
       <Custom Action="WixCloseApplications"
                Before="InstallInitialize">Installed</Custom>
       <Custom Action="StartMonitor"
                After="StartServices">NOT Installed</Custom>
    </InstallExecuteSequence>

   <util:CloseApplication Id="CloseMonitor" Target="Monitor.exe"
                           CloseMessage="yes" RebootPrompt="no">
        Installed
    </util:CloseApplication> 
```

我希望 wix 检测应用程序并在卸载过程中关闭它们。无需显示对话框提示。谁能帮我实现它。

它可以正常工作，它是使用 /qn 开关从命令提示符安装但没有 /qn 开关我得到对话框（“在继续安装之前应关闭以下应用程序”）。有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:51:58.517

添加`C#`自定义事件并添加使其成为第一个事件`InstallUISequence`并使用以下代码终止进程：

```
try
{
      Process proc = Process.GetProcessesByName("MyApplication");
      proc.Kill();
}
catch (Exception ex)
{
      MessageBox.Show(ex.Message.ToString()); 
} 
```

如果你的应用程序支持多个实例，那么就数数。首先是实例：

```
 int count = 0;
 Process[] process = Process.GetProcessesByName("MyApplication");
 foreach (Process pr in process)
 {
   if (pr.MainModule.FileName.Equals(Assembly.GetExecutingAssembly().Location,                StringComparison.OrdinalIgnoreCase))
     {
       count++;

     }
 } 
```

如果您根本不使用，请`DllEntry`点击此[链接](http://wix.sourceforge.net/manual-wix2/authoring_custom_actions.htm)

# ocean - 我们可以分发 Ocean 的 PluginManager.exe

> ID：12527916
> 
> 赞同：0
> 
> 时间：2012-09-21T09:34:49.630
> 
> 标签：ocean, petrel

我们正在开发针对 Petrel 2011 和 Petrel 2012 的 Petrel Ocean 插件，该插件不会通过商店分发。通过阅读各种文档，我计划使用 PluginManager.exe 在客户的 PC 上安装 pip 文件。但是，在没有安装 OCean SDK 的情况下在 Petrel 安装上测试此想法时，PluginManager.exe 不存在于 Petrel 2011 目录中。

我很可能错过了文档中的一些明显内容，但我对 PluginManager.exe 的使用方式感到困惑。我是否将其添加到安装程序并将其安装到 Petrel 2011 目录中，或者重新分发此实用程序是否有限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:35:14.663

这不是 Ocean 功能：PluginManager.exe 是标准/独立 Petrel 安装的一部分，但它是在 Petrel 2011.2 中引入的，这可能是您看不到它的“原因”（如果您与 2011.1 有交易）。最好的建议是将 Petrel 2011 更新到任何适当的 2011.2.x 补丁。干杯。

# segmentation-fault - Blitting 循环中的 SDL Seg 故障

> ID：12527920
> 
> 赞同：0
> 
> 时间：2012-09-21T09:35:07.367
> 
> 标签：segmentation-fault, sdl

好的，所以我有这段代码，它只是遍历我的对象数组，对需要进行 blitted 的内容进行 blitting：

```
void Render()
{
    for(int Index = 0; Index < MAX_OBJECT_INSTANCES; Index++)
    {
        if(Game::ObjectArray[Index].IsActive() == false){}
        else
        {
            if(Game::ObjectArray[Index].IsHidden() == false)
            {
                SDL_BlitSurface(Game::ObjectArray[Index].CurrentSprite, NULL, Buffer::Screen, &Game::ObjectArray[Index].Position);
            }
        }
    }
} 
```

我查看了调用堆栈，发现了这个：

```
0x681247d8  SDL_UpperBlit 
```

我不知道如何解决这个问题。我还应该注意我正在使用 SDL 混音器和 SDL 图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:39:04.583

1.  在调试器中运行代码。
2.  进入`SDL_BlitSurface()`通话。
3.  验证参数是否正确。
4.  继续前进，看看是什么导致了分段错误。

我怀疑一个或多个论点是错误/无效的。

# phpexcel - PHPExcel 输出文件为空

> ID：12527923
> 
> 赞同：0
> 
> 时间：2012-09-21T09:35:13.403
> 
> 标签：phpexcel

我下载了 PHPExcel 库但无法使用它。我正在使用库中的一个示例，但它下载了一个空的 excel 文件。这是我的代码。

```
require_once 'PHPExcel.php';
$objPHPExcel = new PHPExcel();
$objPHPExcel->getProperties()->setTitle("document");
$objPHPExcel->setActiveSheetIndex(0)
        ->setCellValue('A1', 'Hello')
        ->setCellValue('B1', 'world!');
$objPHPExcel->getActiveSheet()->setTitle('Simple');
$objPHPExcel->setActiveSheetIndex(0);
header("Content-Type: application/vnd.ms-excel");
header('Content-Disposition: attachment;filename="deneme.xls"'); 
```

我在这里忘记了什么吗？这很简单，但下载的 excel 文件是空的。有人有想法吗？

编辑：已解决：我必须添加这些行：

```
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');
$objWriter->save('php://output');
exit; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T11:35:02.847

添加这个：

```
header('Cache-Control: max-age=0');
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5');
$objWriter->save('php://output');
die(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:35:00.503

您忘记实例化编写器然后保存

# java - 将字符串 Mac 地址转换为十六进制

> ID：12527926
> 
> 赞同：0
> 
> 时间：2012-09-21T09:35:19.350
> 
> 标签：java, string, hex, parseint

我正在尝试将字符串 macaddress 转换为十六进制值。我得到了一个 C# 代码，它做同样的事情，但是当我使用 java 代码时，它给了我负值。正如在 C# 代码中返回有符号整数但我如何在 Java 中做同样的事情

以下是我的代码的一部分

```
Integer hex = Integer.parseInt(MacAddress.subString(0,2), 16 );
MacAddress[0] = hex.byteValue(); 
```

我在 c# 代码上得到类似 148 的内容，而 java 返回 -148 我该如何解决这个问题 谢谢

更新

我刚刚意识到我的 c# 代码将值 214 返回到 macaddress 的一部分“D6”，而 java 代码返回 -42，这很奇怪

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T09:48:31.233

```
String MacAddress="D6";
Integer hex = Integer.parseInt(MacAddress.substring(0,2), 16 );
byte byteArray=(byte) hex.intValue();
System.out.println(hex+"|"+hex.byteValue()+"|"+byteArray[0]+"|"+(int)(byteArray[0]&(0xff))); 
```

byteValue() 将为您提供带符号格式的字节。您可以将其存储在字节数组中而无需担心，只需在使用前将其转换为无符号值。

也可以[从有符号字节中看到无符号字节](https://stackoverflow.com/questions/4266756/can-we-make-unsigned-byte-in-java)

如果您不希望这种从有符号到无符号的转换，请将您的 MacAddress 设为 char[]。char 默认情况下被认为是无符号的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:55:07.507

您可以直接访问“hex”变量

```
System.out.println(hex); 
```

这是因为 Java 自动将 Integer 对象拆箱为原始 int。这在许多情况下很有帮助，特别是对于数据结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T09:38:40.273

由于字节是在 Java 中签名的，因此您可能应该这样做`hex.intValue()`（或仅依靠自动拆箱）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T18:43:41.453

这是一个代表性问题。“正确”的数据存储在计算机内部。Java 的默认行为是显示一个字节，表示为 -128 到 127 范围内的带符号十进制。由于您使用的是存储在计算机中的二进制数据，因此您应该打印出该值的十六进制或二进制表示。这将有助于避免这里造成的混乱。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-28T10:36:24.943

ip = InetAddress.getLocalHost(); System.out.println("当前IP地址：" + ip.getHostAddress());

```
 NetworkInterface network = NetworkInterface.getByInetAddress(ip);

    byte[] mac = network.getHardwareAddress();

StringBuilder sb = new StringBuilder();
        for (int i = 0; i < mac.length; i++) {
            sb.append(String.format("%02X%s", mac[i], (i < mac.length - 1) ? "-" : ""));        
        }
        System.out.println(sb.toString()); 
```

从这里复制：[http ://www.mkyong.com/java/how-to-get-mac-address-in-java/comment-page-1/#comment-139182](http://www.mkyong.com/java/how-to-get-mac-address-in-java/comment-page-1/#comment-139182)

# java - 在我的 android 应用程序上从 mysql 检索数据

> ID：12527927
> 
> 赞同：1
> 
> 时间：2012-09-21T09:35:20.557
> 
> 标签：java, android, mysql

我正在尝试检索（读取）课程表单数据库（mysql）的数组并将其显示为我的android活动中的项目列表问题是我的表（课程）中有不止一行，但它只检索第一行此外，如果表（课程）知道数据，则在运行后插入我的应用程序步骤，即使我的代码中有显示 toast 消息说没有课程的案例

类 JSONParser.java

```
public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    // function get json from url
    // by making HTTP POST or GET method
    public JSONObject makeHttpRequest(String url, String method,
            List<NameValuePair> params) {

        // Making HTTP request
        try {

            // check for request method
            if(method == "POST"){
                // request method is POST
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);
                httpPost.setEntity(new UrlEncodedFormEntity(params));

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

            }else if(method == "GET"){
                // request method is GET
                DefaultHttpClient httpClient = new DefaultHttpClient();
                String paramString = URLEncodedUtils.format(params, "utf-8");
                url += "?" + paramString;
                HttpGet httpGet = new HttpGet(url);

                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();
            }           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
   } 
```

类 ViewALLCourseStudent.java

```
package com.ksu.sms;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.apache.http.NameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;
import android.widget.Toast;

public class ViewALLCourseStudent extends ListActivity {

    // Progress Dialog
    private ProgressDialog pDialog;

    // Creating JSON Parser object
    JSONParser jParser = new JSONParser(); //class

    ArrayList<HashMap<String, String>> coursesList;

    //url to get all products list
    private static String url_all_course = "http://10.0.2.2/SmsPhp/view_all_course.php";
    // JSON Node names
    private static final String TAG_SUCCESS = "success";
    private static final String TAG_course = "course";
    private static final String TAG_CourseID = "CourseID";
    private static final String TAG_Name = "Name";

    // course JSONArray
    JSONArray courses = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.view_all_course_student);

        coursesList = new ArrayList<HashMap<String, String>>();

        // Loading courses in Background Thread
        new LoadAllCourses().execute();

        // Get list view
        ListView lv = getListView();
     // on seleting single course
        // launching Edit course Screen
        lv.setOnItemClickListener(new OnItemClickListener() {

             public void onItemClick(AdapterView<?> parent, View view,
                     int position, long id) //one of the list
             {
                 // getting values from selected ListItem
                 String CourseID = ((TextView) view.findViewById(R.id.CourseID)).getText()
                         .toString();
                 // Starting new intent
                 Intent ViewCourseStudent = new Intent(getApplicationContext(),
                         ViewCourseStudent.class);
                 // sending Course ID to next activity
                 ViewCourseStudent.putExtra(TAG_CourseID, CourseID);

                 // starting new activity and expecting some response back
                 startActivityForResult(ViewCourseStudent, 100);
             }
         });

     }
 // Response from view course Activity

    @Override
   protected void onActivityResult(int requestCode, int resultCode, Intent data)
    {
        super.onActivityResult(requestCode, resultCode, data);
        // if result code 100
        if (resultCode == 100) {
            // if result code 100 is received
            // means user view course
            // reload this screen again
            Intent intent = getIntent();
            finish();
            startActivity(intent);
        }

}
    /**
     * Background Async Task to Load all course by making HTTP Request
     * */
    class LoadAllCourses extends AsyncTask<String, String, String>
    {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(ViewALLCourseStudent.this);
            pDialog.setMessage("Loading Courses. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }
        /**
         * getting All products from u r l
         * */
        @Override
        protected String doInBackground(String... args) {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            // getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url_all_course, "GET", params);

            // Check your log cat for JSON response
            Log.d("All courses: ", json.toString());

            try {
                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // course found
                    // Getting Array of course
                    courses = json.getJSONArray(TAG_course);

                    // looping through All courses
                    for (int i = 0; i < courses.length(); i++)//course JSONArray
                    {
                        JSONObject c = courses.getJSONObject(i); // read first

                        // Storing each json item in variable
                        String CourseID = c.getString(TAG_CourseID);
                        String Name = c.getString(TAG_Name);

                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put(TAG_CourseID, CourseID);
                        map.put(TAG_Name, Name);

                        // adding HashList to ArrayList
                        coursesList.add(map);
                    }
                } else {
                    Toast.makeText(getBaseContext(),"there is no course" ,Toast.LENGTH_LONG).show();
                }

            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }   

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all products
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    /**
                     * Updating parsed JSON data into ListView
                     * */
                    ListAdapter adapter = new SimpleAdapter(
                            ViewALLCourseStudent.this, coursesList,
                            R.layout.list_item, new String[] { TAG_CourseID,
                                    TAG_Name},
                            new int[] { R.id.CourseID, R.id.Name });
                    // updating listview
                    setListAdapter(adapter);
                }
            });

        }

    }
} 
```

和 php 查看所有课程

```
 <?php

/*
 * Following code will list all the course
 */

// array for JSON response
$response = array();

// include db connect class
require_once __DIR__ . '/db_connect.php';

// connecting to db
$db = new DB_CONNECT();
// get all courses from course table
$result = mysql_query("SELECT *FROM course") or die(mysql_error());
// check for empty result
if (mysql_num_rows($result) > 0)
 {
    // looping through all results
    // products node
    $response["course"] = array();

     while ($row = mysql_fetch_array($result)) 
     {
        // temp user array
              $course = array();
            $course["CourseID"] = $row["CourseID"];
            $course["Code"] = $row["Code"];
            $course["Name"] = $row["Name"];
            $course["OfficeHours"] = $row["OfficeHours"];
            $course["CreditHours"] = $row["CreditHours"];
            $course["Description"] =$row["Description"];
            $course["MaxAbsenceDays"]= $row["MaxAbsenceDays"];
            $course["ExamsDates"] = $row["ExamsDates"];

        // push single product into final response array
        array_push($response["course"], $course);
        // success
    $response["success"] = 1;

    // echoing JSON response
    echo json_encode($response);
}
} 
else {
    // no products found
    $response["success"] = 0;
    $response["message"] = "No products found";

    // echo no users JSON
    echo json_encode($response);
}

?> 
```

你想要的任何事情我都可以解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:55:28.950

查看[halloandrdoid](http://www.helloandroid.com/tutorials/connecting-mysql-database)或[SPTechnolab 博客中给出的示例](http://blog.sptechnolab.com/2011/02/10/android/android-connecting-to-mysql-using-php/)

有一个使用 PHP 连接 MySql 的好例子，它对我有用。

# c# - 在 ASP .NET MVC3 中将视图名称设置为操作属性

> ID：12527929
> 
> 赞同：1
> 
> 时间：2012-09-21T09:35:29.277
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

有没有办法将视图文件名设置为 Action 之上的属性？

前任：

```
[ViewName("~/Views/CustomerInformation.cshtml")]
public ActionResult ViewCustomers()
{
    // 
} 
```

目的是在运行时动态更改视图文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:37:09.810

当然，您可以覆盖该`OnActionExecuted`方法并替换操作过滤器中指定的视图名称所使用的原始视图名称：

```
public class ViewNameAttribute : ActionFilterAttribute
{
    private readonly string _viewName;
    public ViewNameAttribute(string viewName)
    {
        _viewName = viewName;
    }

    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        var result = filterContext.Result as ViewResultBase;
        if (result != null)
        {
            result.ViewName = _viewName;
        }
    }
} 
```

然后你可以返回一个虚拟视图：

```
[ViewName("~/Views/CustomerInformation.cshtml")]
public ActionResult ViewCustomers()
{
    return View();
} 
```

但是我想知道当您可以直接编写时，自定义操作过滤器的实际应用是什么：

```
public ActionResult ViewCustomers()
{
    return View("~/Views/CustomerInformation.cshtml");
} 
```

您似乎没有为框架已经提供的自定义操作过滤器带来太多价值。

# java - Android 电话通话流

> ID：12527930
> 
> 赞同：4
> 
> 时间：2012-09-21T09:35:34.417
> 
> 标签：java, android

在 Android 中是否可以在发送之前实时操作电话数据？（例如，通过创建一个缓冲区来记录语音然后发送）或者它是不可访问的，并且必须始终是“活的”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:41:59.090

抱歉，没有。Android 应用程序不支持与来自电话的音频流进行交互的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T11:32:28.650

与几乎所有其他音频不同，语音通话音频通常完全由调制解调器子系统处理。因此，调制解调器处理器及其相关的 DSP（如果有的话）可以访问语音呼叫音频，但应用程序处理器不能，或者至少不以任何方式修改它。

一些平台允许应用处理器以压缩格式 (AMR) 或解码完成后 (PCM) 读取上行链路/下行链路音频。但是，据我所知，没有一个用于 Android 设备的平台（完全）支持将数据注入上行链路。如果有任何这样做，那将是一个完全非标准的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-10T18:48:41.373

尝试使用 JNI 在 C 中进行编码。我也推荐p_thread。由于 Android 无法控制此类线程。

# java - 基于 Spring 的 API 库

> ID：12527932
> 
> 赞同：1
> 
> 时间：2012-09-21T09:35:43.777
> 
> 标签：java, spring

我最近一直在想，我有这个基于 Spring 的 Web 应用程序，它提供了 Rest API，它大量使用和`@Autowired`注释。`@Service``@Controller`

但是，与常规 Java 不同，`Servlet`我不确定我的应用程序如何像常规 servlet 一样与其他项目一起使用：

```
 <servlet>
    <servlet-name>Rest</servlet-name>
    <servlet-class>com.myapp.Rest</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>Rest</servlet-name>
    <url-pattern>/rest</url-pattern>
  </servlet-mapping> 
```

我主要关心我想要创建一个库的 Spring 应用程序使用的配置文件（如 context.xml 等）。由于DAO类bean是在xml中定义的，如果我将app打包成库，那么在Spring项目中包含该库时会不会冲突？

这甚至可能吗？如果是这样，应该如何构建应用程序？我的意思是现在我的 Spring API 项目是基于一个`WAR`结构的。

# spring-mvc - 为什么杰克逊注释在列表中被忽略？

> ID：12527937
> 
> 赞同：1
> 
> 时间：2012-09-21T09:35:50.930
> 
> 标签：spring-mvc, jackson

我在 Spring MVC @ResponseBody 中使用 Jackson 为 jqGrid 生成 JSON。我正在为 jqGrid 所需的 JSON 使用这样的 POJO：

```
public class Grid<T> implements Serializable {

  private int totalPages;
  private int currentPage;
  private long totalRecords;
  private List<T> listData;

  // getter & setter...

} 
```

我将从 Hibernate JPA 检索到的域模型（可能是代理，因为某些属性中存在延迟获取），例如：

```
@Entity @Cacheable
public class Item implements Serializable {

  @Id @GeneratedValue(strategy=GenerationType.IDENTITY)
  private Long id;

  @Version
  private int version;

  @NotBlank
  private String name;

  @JsonIgnore @Lob @Basic(fetch=FetchType.LAZY)
  private byte[] image;

  // getter and setter...
} 
```

这是我在 Spring MVC 控制器中的代码：

```
@RequestMapping(value="listgrid", method=RequestMethod.GET, produces="application/json")
@ResponseBody
public Grid<T> listGrid(@RequestParam(value="page", required=false) Integer page,
  @RequestParam(value="rows", required=false) Integer rows,
  @RequestParam(value="sidx", required=false) String sidx,
  @RequestParam(value="sord", required=false) String sord,
  @RequestParam(value="_search", required=false) String search) {

  // ...
  Grid<T> grid = new Grid<T>();
  Page<T> objPage = retrieveData(...);
  grid.setListData(objPage.getContent());
  grid.setCurrentPage(objPage.getNumber()+1);
  grid.setTOtalPages(objPage.getTotalPages());
  grid.setTotalRecords(objPage.getTotalElements());

  return grid;
} 
```

我已将@JsonIgnore 放在图像属性中，但生成的 JSON 将始终包含图像。如何忽略此属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:12:30.290

您是否在 getter 上尝试过 @JsonIgnore ？

# jquery-mobile - 为什么 JQuery mobile 在 IE6 中不做任何事情？

> ID：12527939
> 
> 赞同：0
> 
> 时间：2012-09-21T09:35:54.017
> 
> 标签：jquery-mobile, internet-explorer-6

快速浏览代码，似乎大部分代码都是为 IE6 设计的，但似乎没有一个脚本在 IE6 中运行。

我不是在寻找完整的功能。一旦脚本附加了类名，您就会得到一些样式。我想通过一个简化的移动站点为 IE6 用户提供支持。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:29:10.047

为什么你在考虑这么老的ie6？

jQuery Mobile 不能很好地与 IE6 配合使用。

因为它使用了 ie6 不支持的 css3 和 html5。

# javascript - 停止按下提交按钮，直到在文本区域中写入足够的单词

> ID：12527942
> 
> 赞同：1
> 
> 时间：2012-09-21T09:35:57.600
> 
> 标签：javascript, jquery, html

所以基本上我想要的是禁用提交按钮，直到文本区域中达到某个字数。

我环顾四周并试图找到方法来做到这一点，但没有运气。

任何提示或帮助？

```
<form method="post" id="writearticle" action="submitarticle.php">      
  <script>
    $('#writearticle').submit(function(event) {
        var text = $("#content").val();
        text = text.split(" ");
        // check for at least 10 words
        if(text.length < 10){
            console.log("prevented");
            // prevent submit
            event.preventDefault();
            return false;
        }
        console.log("submitted");
    });
  </script>

  <textarea rows="30" cols="85" id="content" name="content" placeholder="Write the article here. Try to abide by the instructions and keywords provided."></textarea>
  <br />    
  <input type="submit" name="submitarticle" value="Submit Article" class="submit" />    
  <br /><br /><br /><br /><br />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:38:41.953

向我们展示您的代码。
1)`onclick`为提交按钮设置事件
2)[检查 textarea 中的长度](http://javascript.about.com/library/blcount.htm)
3)`return false`以及`preventDefault()`是否没有足够的单词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:42:11.010

您捕获提交事件，计算文本区域中的单词，并且仅在足够高时才提交。例子：

```
$('#targetForm').submit(function(event) {
    var text = $("#myTextarea").val();
    text = text.split(" ");
    // check for at least 10 words
    if(text.length < 10){
        // prevent submit
        event.preventDefault();
        return false;
    }
}); 
```

[演示](http://jsfiddle.net/Xmmh3/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T09:39:33.147

您可以检查事件中的单词/字符数`keyup`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T09:39:47.343

[在http://elylucas.net/post/Enabling-a-submit-button-when-a-textbox-has-value-in-jQuery.aspx](http://elylucas.net/post/Enabling-a-submit-button-when-a-textbox-has-value-in-jQuery.aspx)看到这个例子

不是检查值，而是拆分文本框中的输入字符串，然后看到数组的长度超过了您想要的字数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T09:44:39.183

使用`textchange`（非内置）事件通过键盘、粘贴等准确检测文本更改 - [http://www.zurb.com/playground/jquery-text-change-custom-event](http://www.zurb.com/playground/jquery-text-change-custom-event)

```
$('textarea').bind('textchange', function () {
   // $(this).val() contains the new text
}); 
```

在您的文本更改事件中，检查文本中单词的长度/计数，并根据需要启用禁用提交按钮（确保其最初禁用）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T09:43:43.743

试试下面的代码行，

```
$(document).ready(function() {
    $(".submit-name").attr("disabled", "true");
    var minLength = 100;
    $("#your-text-area").bind('keyup', function(event) {
        var String = $("#your-text-area").val()

           if (String.length >= minLength )  {  
                $(".submit-name").removeAttr("disabled");
            } else {
                $(".submit-name").attr("disabled", "true");        
            }

});

}); 
```

# jquery - 我在 jQuery 中使用 JSON 得到未定义，为什么？

> ID：12527943
> 
> 赞同：0
> 
> 时间：2012-09-21T09:35:59.447
> 
> 标签：jquery, json

我正在学习一些 JSON，我试图从 twitter 上列出一些关于狗的数据……但我无法真正呈现数据……我相信错误在 map-method 内部……我错过了一些东西…… .谢谢你的帮助

```
<body>
<h1>U almost there!!</h1>

<script src="jquery-1.7.1.js"> </script>
<script>
// PubSub
(function( $ ) {
    var o = $( {} );

    $.each({
        trigger: 'publish',
        on: 'subscribe',
        off: 'unsubscribe'
    }, function( key, val ) {
        jQuery[val] = function() {
            o[key].apply( o, arguments );
        };
    });
})( jQuery );

$.getJSON('http://search.twitter.com/search.json?q=dogs&callback=?', function( info) {
    $.publish( 'twitter/info', info );
});

// ...
$.subscribe( 'twitter/info', function( e, info ) {
    $('body').html(
        $.map( info, function( obj) { // <--- here it's error, something Im missing right?
            return '<li>' + obj.text + '</li>';
        }).join('')
    );
});

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:38:57.550

更改`obj.text`为`$(obj).text();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:07:14.337

我发现了问题......我只是显示一个未定义项目的列表（li-li）的原因是因为我忘记添加来自 JSON 对象的结果，如下所示： **info.results**如果你做一个控制台。登录发布方法。这个对象。内部还有许多其他属性，我们想定位这个 obj 的索引，对吧？，并在列表中呈现...:)

# c# - 格式化字符串编号

> ID：12527949
> 
> 赞同：-3
> 
> 时间：2012-09-21T09:36:23.233
> 
> 标签：c#, string, format, currency

我想格式化一个字符串数字。例如：

```
double number="118176"; 
```

它应该看起来像 1181.71 或 1181,71。我找不到任何格式类型。我尝试了一些格式类型，`ToString("#,0")`但它不起作用。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:44:05.633

请参阅此页面上的定点（假设为 .net）：http: [//msdn.microsoft.com/en-us/library/dwhawy9k.aspx](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

不过，您必须先除以 100。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:44:56.223

首先：一个`double`变量不能带字符串。但除此之外，这样的事情应该会有所帮助：

```
double number = 1181.76;
string output = String.Format("{0:d2}", number); 
```

这将获取数字并使用具有 2 个小数位的十进制数字格式从中创建一个字符串。

你没有说的是为什么你期望整数`118176`神奇地变成带两位小数的双精度数？唯一的办法是

```
double number = 118176;
string output = String.Format("{0:d2}", number / 100.0); 
```

**编辑**
做你在评论中描述的事情有点复杂：

```
string priceString = nodeFareList.SelectSingleNode("GenQuoteDetails/TotAmt").InnerText; 
double priceDouble = Convert.ToDouble(priceString) / 100.0;
price.InnerHtml += String.Format("{0:c}", priceDouble); 
```

这会将数字转换`priceDouble`为字符串，其值的格式类似于货币。如果您不想要货币符号，请使用以下内容：

```
price.InnerHtml += String.Format("{0:d2}", priceDouble); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T09:46:05.517

在 Java 的情况下使用可以参考下面的代码。

1) 首先定义 Decimal Format 实例。

DecimalFormat decimalFormat = new DecimalFormat("####.##");

2）然后将十进制值传递给'format'方法

String dummyString = decimalFormat.format(pressureValue).toString()

其中 pressureValue - 十进制数

希望这会有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T09:46:48.893

我认为，您正在寻找的是：

```
String.Format("{0:0,0.0}", 12345.67);     
String.Format("{0:0,0}", 12345.67); 
```

有关详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)。

# c# - 如何从 Windows 注册表中获取已安装软件的详细信息？

> ID：12527957
> 
> 赞同：0
> 
> 时间：2012-09-21T09:37:13.743
> 
> 标签：c#, installation, registry, windows-installer, exe

我正在开发一个从 exe 或 msi 文件安装软件的应用程序。安装后，我想从 C# 注册表中安装软件详细信息，以便我可以使用该详细信息卸载软件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:43:46.490

[回答](https://stackoverflow.com/questions/908850/get-installed-applications-in-a-system)类似问题

您应该查看未安装的注册表项：

当前用户和本地计算机中的“SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall”“SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall”

# python - 在 Python 的 POST 请求中传递“+”字符

> ID：12527959
> 
> 赞同：10
> 
> 时间：2012-09-21T09:37:36.920
> 
> 标签：python, python-requests

我正在尝试在 Python 脚本中进行一些自动化操作，但遇到了问题。我正在尝试对服务器进行 POST。

```
url = 'http://www.example.com'
params = {'arg0': 'value', 'arg1': '+value'}

f = urllib.urlopen(url, urllib.urlencode(params))
print f.read() 
```

我已经对等效的浏览器操作进行了wireshark 捕获，其中第二个参数`arg1`作为 传递`+value`，但是当我使用Python 执行此操作时，它`+`会更改为`%2B`，即

```
Line-based text data: application/x-www-form-urlencoded
arg0=value&arg1=%2Bvalue 
```

什么时候应该：

```
Line-based text data: application/x-www-form-urlencoded
arg0=value&arg1=+value 
```

我也使用了 Requests 模块，它似乎做同样的事情。

```
url = 'http://www.example.com'
params = {'arg0': 'value', 'arg1': '+value'}

f = requests.post(url, params) 
```

当您遇到与“+”相关的问题时，Google 不是您的朋友，因为它似乎是其他很多事情的全部。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-21T09:45:15.210

引用 GET 或 POST 数据时，该`+`字符是空格的正确编码。因此，文字`+`字符也需要转义，以免被解码为另一端的空格。请参阅 RFC 2396，[第 2.2](https://www.rfc-editor.org/rfc/rfc2396#section-2.2)节，[第 3.4 节](https://www.rfc-editor.org/rfc/rfc2396#section-3.4)和[HTML 规范，第 3.4`application/x-www-form-urlencoded`节](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.1)：

> 控件名称和值被转义。空格字符被 `+' 替换，然后保留字符被转义，如[[RFC1738]](http://www.w3.org/TR/html401/references.html#ref-RFC1738)，第 2.2 节所述。

如果您将数据发布到不将`+`字符解码为空格而是将此类数据视为文字加号的应用程序，则需要使用[`urllib.quote`函数](http://docs.python.org/library/urllib.html#urllib.quote)自己对参数进行编码，并指定`+`不编码字符：

```
import urllib
def urlencode_withoutplus(query):
    if hasattr(query, 'items'):
        query = query.items()
    l = []
    for k, v in query:
        k = urllib.quote(str(k), safe=' /+')
        v = urllib.quote(str(v), safe=' /+')
        l.append(k + '=' + v)
    return '&'.join(l) 
```

演示：

```
>>> urlencode_withoutplus({'arg0': 'value', 'arg1': '+value'})
'arg0=value&arg1=+value' 
```

使用时`requests`，可以简单地将上述函数的结果作为`data`值传入，但这种情况下需要手动设置内容类型：

```
requests.post(url, urlencode_withoutplus(query),
    headers={'Content-Type': 'application/x-www-form-urlencoded'}) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-21T09:54:14.333

```
urllib2.quote(' ')     # '%20'
urllib2.unquote('%20') # ' ' 
```

那么为什么不直接取消引用参数部分：

```
f = urllib.urlopen(url, urllib.unquote(urllib.urlencode(params))) 
```

# apache - Subversion：通过浏览器访问时没有 webdav 日志记录

> ID：12527960
> 
> 赞同：3
> 
> 时间：2012-09-21T09:37:39.407
> 
> 标签：apache, svn, logging, webdav

有一个使用 Apache 作为前端的颠覆服务器。我在我的 VirtualHost 部分打开了自定义日志记录：

```
CustomLog /var/log/svn/webdav.log "%t %u repo:%{SVN-REPOS-NAME}e action:%{SVN-ACTION}e (%B Bytes in %T Sec)" env=SVN-ACTION 
```

当我使用SVN客户端时，在webdav.log中可以看到如下操作：

```
action:checkout-or-export
action:commit 
```

但是，如果我使用网络浏览器浏览存储库，则不会记录任何内容。即使我通过 ?p=revision_number 请求精确修订，在访问日志中也只有标准的 GET 请求（这意味着我肯定在处理 dav_svn Apache 模块）

为什么会这样？使用 svn-client 和普通浏览器行为有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:56:35.287

SVN 客户端正在将 WebDAV 与您的服务器通信：他发送 PROPFIND、PROPGET 等消息以从 SVN 存储库中检索大量信息：最后更改的修订版、最后作者等。

浏览器只是询问一个 GET-HTTP 命令。严格来说，这不是真正的 SVN 动作。您只是查看存储库的某些部分。您可以下载单个文件或列出目录。但是就 SVN 而言，您无法做任何有意义的事情。

所以这不会进入日志文件，因为没有对应的 SVN Action。

# git - GIT：如何在不覆盖当前提交的情况下从以前的提交中签出文件？

> ID：12527964
> 
> 赞同：16
> 
> 时间：2012-09-21T09:37:54.353
> 
> 标签：git, version-control

之前的几次提交我有一些 javascript 以一种方式工作。在几次提交的过程中，我现在让它以另一种方式工作。我想查看几次提交前的文件，因为我可能想在新的 javascript 中使用它的各个方面。但是我不想将我当前的文件恢复到原来的样子。我只想从字面上打开旧文件，环顾四周，也许将其中的一些代码复制并粘贴到新文件中。

如何在不覆盖最新版本的情况下从以前的提交中检索文件的副本？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-21T10:17:29.233

只需将输出重定向`git show`到文件。

```
git show *SHA-of-old-commit*:*filename* > newfilename 
```

例如：

```
git show 7c4eacc:main.cpp > main.cpp.old 
```

# jquery-ui - 当它被jqueryUI中的另一个元素覆盖时防止droppable接受？

> ID：12527965
> 
> 赞同：0
> 
> 时间：2012-09-21T09:37:59.313
> 
> 标签：jquery-ui, jquery-ui-draggable, jquery-ui-droppable

我已经定位了 2 个容器，使得一个容器覆盖在另一个容器上。但是，当我将一个物品放到容器上时，掉落的物品会进入两个容器。我该如何限制它？

```
 //JS Code: 
   $("div.draggable").draggable({
      helper: "clone",
      cursor: "move",
      containment: 'body'
    });

    $("div.droppable").droppable({
      addClasses: false,
      drop: function (event, ui) {
        var $draggable = $(ui.draggable),
            $droppable = $(this);

        $droppable.html($draggable.clone());
      }
    }); 
```

演示：http: [//jsfiddle.net/HL8VR/](http://jsfiddle.net/HL8VR/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T08:27:51.057

谢谢@Nal，但对我没有用，所以我创建了这个 hack。

一旦将项目拖放到元素上，我就会将一些数据与元素一起存储。不幸的是，数据与我无法隔离的两个 Droppables 一起存储。

```
$("div.droppable").droppable({
  addClasses: false,
  drop: function (event, ui) {
    var $draggable = $(ui.draggable),
        $droppable = $(this);

    $droppable.data({'drop': true, 'draggable': $draggable});
  }
}); 
```

但是一旦物品被丢弃，我就可以弄清楚我悬停在哪个 droppable 上。

```
$('div.droppable').hover(function() {
    if ($(this).data('drop') === true) {
        $(this).html($($(this).data('draggable')).clone());

        // Clears the data from both droppables to avoid duplicating the item in them
        $('div.droppable').data({'drop': false, 'draggable': false});
    }        
}); 
```

**演示：http:** [//jsfiddle.net/codef0rmer/AVQVs/](http://jsfiddle.net/codef0rmer/AVQVs/)

# jsf-2 - 未指定验证器 ID

> ID：12527967
> 
> 赞同：1
> 
> 时间：2012-09-21T09:38:05.440
> 
> 标签：jsf-2

我根据 JSF 2 规范注册了一个验证器：

```
@FacesValidator(value = "emailValidator")
public class EmailValidator implements Validator {..} 
```

用法 ：

```
<h:inputText value=#{bean.email}>
<f:validator id="emailValidator" />
</h:inputText> 
```

**我得到这个例外：**

```
javax.servlet.ServletException: /contact.xhtml @21,130 <f:validator> A validator id was not specified. Typically the validator id is set in the constructor ValidateHandler(ValidatorConfig)
javax.faces.webapp.FacesServlet.service(FacesServlet.java:606)
org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62)
myapp.FilterLogout.doFilter(FilterLogout.java:83) 
```

那是一个错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T09:51:00.180

试试这个

```
@FacesValidator(value="emailValidator")
public class EmailValidator implements Validator {
 @override
     public void validate(FacesContext context, UIComponent component,
        Object value) throws ValidatorException {
     }
 } 
```

在 xhtml 中，你有

```
 <h:inputText value=#{bean.email}>
             <f:validator validatorId="emailValidator" />
           </h:inputText> 
```

# jquery - jquery 查找数据属性在哪里

> ID：12527968
> 
> 赞同：0
> 
> 时间：2012-09-21T09:38:11.500
> 
> 标签：jquery

使用页面的 url，我已经能够将值 edc 放入一个变量中，但我需要做的是找到 data-ttl，其中 data-uri 等于 edc。

如果 PHP 这很容易，但我不确定如何在 jQuery 中进行

> domain.com/media-center/video/edc

**HTML**

```
 <li class="item" data-id="id-7" data-type="services">
            <a href="#" data-uri='edc' data-ttl='Engineering'>
                    <img src="/assets/img/media-centre/videos/edc.png">
                    <div class="itemcontent">
                        <h2>Engineering</h2>
                    </div>
                </a>
            </li> 
```

**JQUERY - 我的尝试和失败的尝试**

```
var permatitle = $('a').attr('data-uri').val('edc'); 
```

**已排序**

> var permatitle = $('a[data-uri="edc"]').attr('data-ttl');

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:40:45.693

使用这个选择器：

```
$('a[data-uri="edc"]') 
```

然后你可以读取数据属性，如：

```
$('a[data-uri="edc"]').data('edc') 
```

# php - 使用 php 在桶谷歌云存储中创建文件夹

> ID：12527969
> 
> 赞同：6
> 
> 时间：2012-09-21T09:38:17.580
> 
> 标签：php, google-cloud-storage

我对谷歌云存储很陌生。

我想使用 php 编码在存储桶中创建文件夹。我搜索了很多网站，在 1 上我看到它是这样写的：

“在存储桶中创建文件夹将创建一个以目录命名的占位符对象，没有数据内容和 mimetype application/x-directory。不支持在 Google Storage Manager 中创建的目录占位符对象。”

我不明白它想说什么。我该如何创建文件夹，请帮帮我。我尝试使用以下代码：

```
$req = new Google_HttpRequest("http://commondatastorage.googleapis.com/bucket/myfoldertrial");
$req->setRequestHeaders(array(
'x-goog-project-id' => 21212,
'x-goog-acl' => 'public-read',
'Content-Type' => 'application/x-directory'
));
$req->setRequestMethod('PUT');
$req->setPostBody('myfoldertrial'); 
```

我正在使用以下链接中的 API：

[适用于 PHP 的 Google API](https://code.google.com/p/google-api-php-client/)

请帮助我使用 PHP 创建文件夹。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-21T09:59:52.677

您可能实际上不需要创建文件夹。

Google Storage 不像您的操作系统的文件系统使用的树形结构，所有对象都存储在顶层的存储桶中。但是，您可以为对象命名，其中包含斜线，因此它看起来像是在文件夹中 - 这`Users/username/docs/2012/09/21/activity.csv`是一个非常好的对象名称，不需要任何支持文件夹。

一旦你有了这种方案的对象，你就可以列出它们，就好像你正在查看一个文件夹的内容一样，根据[这些 docs](https://developers.google.com/storage/docs/json_api/v1/objects/list)`delimiter`和`prefix`参数。

因此，如果您只想创建`myfoldertrial`以便上传`example.png`到其中，则无需创建文件夹，您可以直接上传到`myfoldertrial/example.png`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-19T11:37:59.317

有时，在CMS中，您需要先创建一个目录才能将文件上传到其中，因此鼠标单击可以触发事件以该路径为基本文件夹，然后进行批量上传。

他们说，这是一个文件浏览器。

下面的代码可能会有所帮助。

```
<?php

$privateKeyFile = '{{full/path/to/*.p12}}';
$newDirectory = '{{path/of/new/directory/}}'; // remember to end it with a slash.

/**
 * Authentication
 */
$client = new Google_Client();
$client->setApplicationName('Create a new folder');
$client->setClientId($clientId);
$scopes = array('https://www.googleapis.com/auth/devstorage.full_control');
$client->setScopes($scopes);
$service = new Google_Service_Storage($client);

if (isset($_SESSION['service_token'])) {
    $client->setAccessToken($_SESSION['service_token']);
}
if (!file_exists($privateKeyFile)) {
    die('missing the location of primary key file, given: ' . $privateKeyFile);
}
$key = file_get_contents($privateKeyFile);
$cred = new Google_Auth_AssertionCredentials(
        $clientEmailAddress
        , $scopes
        , $key
);
$client->setAssertionCredentials($cred);
if ($client->getAuth()->isAccessTokenExpired()) {
    $client->getAuth()->refreshTokenWithAssertion($cred);
}
$_SESSION['service_token'] = $client->getAccessToken();

/**
 * Creating Folder
 */
try {
    /* create empty file that acts as folder */
    $postBody = new Google_Service_Storage_StorageObject();
    $postBody->setName($newDirectory);
    $postBody->setSize(0);

    $created = $service->objects->insert($bucketName, $postBody, array(
        'name' => $newDirectory,
        'uploadType' => 'media',
        'projection' => 'full',
        'data' => '',
    ));
} catch (Exception $ex) {
    echo $ex->getMessage() . "\n<pre>";
    print_r($ex->getTraceAsString());
    echo '</pre>';
    die();
}

echo 'EOF'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-16T13:47:54.483

您可以在上传时通过在文件路径中提供文件夹来简单地创建文件夹，即您的 url 应该是[https://storage.googleapis.com/](https://storage.googleapis.com/) //?GoogleAccessId=id@developer.gserviceaccount.com&Expires=1410875751&Signature=SIGNATURE

# android - 自定义导航栏和选项按钮

> ID：12527970
> 
> 赞同：0
> 
> 时间：2012-09-21T09:38:20.060
> 
> 标签：android, android-layout, android-intent

如何在android中设置导航栏以及如何在导航栏上添加选项按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:58:44.733

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    menu.add("menu");
    return super.onCreateOptionsMenu(menu);
}

@Override
public boolean onMenuOpened(int featureId, Menu menu) {
    if (menuDialog == null) {
        menuDialog = new Dialog(this, R.style.Dialog_Fullscreen);
        menuDialog.setContentView(menuView);
        menuDialog.show();
    } else {
        menuDialog.show();
    }
    return false;
} 
```

# android - 进程的gid有什么作用

> ID：12527976
> 
> 赞同：1
> 
> 时间：2012-09-21T09:38:31.827
> 
> 标签：android, linux, uid

在android上，如果我们在一个进程上设置了一些gids，这个进程就会获得在它上面设置的gids的特权。
例如，如果我们想让一个进程可以访问互联网，我们只需将 uid AID_INET 添加到该进程的 gid 中即可。androd uid 在 filesystem/core/include/private/android_filesystem_config.h 中定义。

问题是：
如果我们给一个进程的gids加上一个uid，对这个进程会有什么影响呢？
现在我们知道了：
1.进程可以通过ACL以组的形式访问文件；
2\. 某些特权被授予进程；（如上，如果进程的gid中包含AID_INET，则该进程将可以访问互联网）
还有其他影响吗？这是如何工作的？

# database - 如果我每 5 秒更新一个字段，数据库会不会很忙？

> ID：12527982
> 
> 赞同：1
> 
> 时间：2012-09-21T09:38:50.500
> 
> 标签：database, database-connection, chat, offline, actionlistener

我正在开发一个网络应用程序，它需要检查互联网是否连接。如果获得连接，它将每 5 秒更新一次数据库中的一个字段。基本上，它是一个类似聊天的网络应用程序，其中它将更新最后一次在线看到的日期时间字段。这样它就会显示在当前在线/登录的其他用户上。

我将在所有页面中实现该片段，以便在您浏览页面时更新数据库。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:40:07.610

没有自尊的数据库应该有这个问题。

# c++ - C++中的简单计算器

> ID：12527986
> 
> 赞同：0
> 
> 时间：2012-09-21T09:38:59.517
> 
> 标签：c++, windows

我正在构建一个简单的计算器作为学习练习，但我偶然发现 - 我得到了第一个数字的用户输入，但它无法存储第二个输入的 int - 我需要创建对象吗？我认为这是一个明显的问题......

```
//Simple calculator to work out the sum of two numbers (using addition)

#include <cstdlib>
#include <iostream>

using namespace std;

int main(int argc, char *argv[])
{
    cout << "Enter the first int: \n";
    int input1 = std::cin.get();

    cout << "Enter the second int: \n";
    int input2 = std::cin.get();

    cout << "The sum of these numbers is: " << input1 + input2;
    cout << "\n";

    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T09:42:20.547

`cin.get()`只检索输入的一个字符。为什么不使用

```
int input1, input2;
cout << "Enter the first int: \n";
cin >> input1;
cout << "Enter the second int: \n";
cin >> input2; 
```

使用`std::cin`这种方式（with `operator>>`）还可以处理用户输入的任何多余的换行符或空格字符。

# jquery - 隐藏最后一个元素不起作用

> ID：12527988
> 
> 赞同：0
> 
> 时间：2012-09-21T09:39:07.123
> 
> 标签：jquery

我一直在通过 jQuery 磕磕绊绊，并有以下几点：

```
<form class="form" method="POST" action="<?php the_permalink(); ?>">
<?php $counter = 1; if(get_field('step_by_step_training')): ?>
<?php while(the_repeater_field('step_by_step_training')): ?>    
    <div class="form-row">
        <p class="training"><?php echo the_sub_field('introduction'); ?></p>
        <button class="next">Next</button>
    </div>
<?php $counter++; endwhile; ?> 
<?php endif; ?> 
</form>

<script type="text/javascript">
jQuery(function($) {
$(document).ready(function() {    

    // prepend a 'previous' button to all form-rows except the first
    $('<button>').addClass('previous').text('Previous').prependTo($('.form-row').not(':first'));

    // hide all form-rows, but not the first one
    $('.form-row').not(':first').hide();

    // add the submit button to the last form-row
    $('<input>').prop('type', 'submit').val('Submit').appendTo($('.form-row:last'));

    // handle the previous button, we need to use 'on' here as the
    // previous buttons don't exist in the dom at page load
    $('.form-row').on('click', 'button.previous', function(e) {
        e.preventDefault();
        $(this).parent('div.form-row').hide().prev('div.form-row').show();
    });

    $('button.next').click(function(e) {
        // prevent the next buttons from submitting the form
        e.preventDefault();
        // hide this form-row, and show the next one
        $(this).parent('div.form-row').hide().next('div.form-row').show();
    });    

});
});
</script> 
```

这是一个循序渐进的过程。

我想隐藏最后一步的下一步按钮，但似乎无法让它工作。我尝试了以下操作，但下一个按钮停止工作。

```
$('button.next').is(':last').hide(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:42:16.130

你可以试试这个：

```
 $('button.next').last().hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:46:20.873

根据 jQuery 文档，当至少有一个元素与参数匹配时， [is()返回 true。](http://api.jquery.com/is/)

所以你真正想做的是`$('button.next').last().hide()`或者`$('button.next:last').hide()`

# svn - 安装 SCM Activity 插件后，Sonar 无法找到 SVN 命令

> ID：12527989
> 
> 赞同：2
> 
> 时间：2012-09-21T09:39:07.327
> 
> 标签：svn, plugins, version-control, sonarqube

我刚刚按照[安装过程](http://docs.codehaus.org/display/SONAR/SCM+Activity+Plugin#SCMActivityPlugin-UsageInstallation)在 Sonar 3.2 中安装了 SCM Activity 插件 1.5 。所以 Subversion 也可以在安装了 Sonar 的服务器上使用。此外，我检查了 svn 在命令提示符下是否可用。

但是，一旦我开始运行 Sonar 指标的 jenkins 作业，我就会在输出控制台中收到以下警告：

```
[INFO] [11:17:24.504] Retrieve SCM info for /home/jenkins/jenkins-workspace/jobs/fhome-module-base-model_METRICS/workspace/src/main/java/com/mainsys/fhome/module/base/model/validation/ValidationResult.java
[INFO] [11:17:24.505] Executing: /bin/sh -c cd /home/jenkins/jenkins-workspace/jobs/fhome-module-base-model_METRICS/workspace/src/main/java/com/mainsys/fhome/module/base/model/validation && svn --username sonar --password '*****' --no-auth-cache --non-interactive --trust-server-cert blame --xml ValidationResult.java
[INFO] [11:17:24.506] Working directory: /home/jenkins/jenkins-workspace/jobs/fhome-module-base-model_METRICS/workspace/src/main/java/com/mainsys/fhome/module/base/model/validation
[WARN] [11:17:24.523] Fail to retrieve SCM info of: /home/jenkins/jenkins-workspace/jobs/fhome-module-base-model_METRICS/workspace/src/main/java/com/mainsys/fhome/module/base/model/validation/ValidationResult.java. Reason: The svn command failed.
/bin/sh: svn: not found 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:37:02.673

svn 可执行文件可能在您的路径中可用，但在执行 Jenkins 的用户的路径中不可用。

# sql-server - 表扫描结果是否保存在内存中否定了索引的好处？

> ID：12527993
> 
> 赞同：3
> 
> 时间：2012-09-21T09:39:19.807
> 
> 标签：sql-server, sql-server-2008

理论上的 SQL Server 2008 问题：

如果在具有大量“可用”内存的 SQL Server 上执行表扫描，那么该表扫描的结果是否会保存在内存中，从而抵消表上索引可能带来的效率？

更新 1：有问题的表格包含大约的参考数据。每个表 100 - 200 条记录（我不知道每行的平均大小），所以我们这里不讨论海量表。

我已经与客户讨论过为此参考数据引入 memcached / AppFabric 缓存解决方案，但是目前这超出了范围，他们正在寻找风险最小的“快速获胜”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T09:43:42.903

扫描中读取的每个页面都将被读入缓冲池，并且仅根据缓存驱逐策略在内存压力下释放。

不知道为什么您认为这会否定表上索引可能带来的效率。

索引可能意味着需要读取的页面更少，即使所有页面都已经在缓存中，所以不需要物理读取，减少逻辑读取的数量是一件好事。逻辑读取不是免费的。他们仍然有锁定和读取页面的开销。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T10:14:51.247

Besides the performance problem (even when all pages are in memory a scan is still going to be many many times slower than an index seek on any table of significant size) there is an additional issue: **contention**.

The problem with scans is that any operation will have to visit *every* row. This means that any select will block behind any insert/update/delete (since is *guaranteed* to visit the row locked by these operations). The effect is basically serialization of operations and adds huge latency, as SELECT now have to wait for DML to *commit* every time. Even under mild concurrency the effect is an overall sluggish and slow to respond table. With indexes present operations are only looking at rows in the ranges of interest and this, by virtue of simple probabilities, reduces the chances of conflict. The result is a much livelier, responsive, low latency system.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T09:57:06.050

随着数据的增长，全表扫描也无法扩展。这很简单。随着更多数据添加到表中，全表扫描必须处理更多数据才能完成，因此它们将花费更长的时间。此外，它们会产生更多的磁盘和内存请求，进一步给您的设备带来压力。考虑一个执行全表扫描的 1,000,000 行表。SQL Server 以 8K 数据页的形式读取数据。尽管每个页面中存储的数据量可能会有所不同，但我们假设在我们的示例中，每个 8K 页面中平均有 50 行数据。为了对数据执行全扫描以读取每一行，20,000 次磁盘读取（1,000,000 行/每页 50 行）。这相当于必须处理 156MB 的数据，仅针对这一查询。除非你有一个非常快的磁盘子系统，检索所有数据并进行处理可能需要一段时间。现在，假设这张表的大小每年翻一番。明年，同样的查询必须读取 312MB 的数据才能完成。

请参考这个链接 - [http://www.datasprings.com/resources/articles-information/key-sql-performance-situations-full-table-scan](http://www.datasprings.com/resources/articles-information/key-sql-performance-situations-full-table-scan)

# java - JAVA - 类加载器找不到 Applet 主类

> ID：12527995
> 
> 赞同：0
> 
> 时间：2012-09-21T09:39:22.707
> 
> 标签：java, classnotfoundexception

我不会放所有源代码，因为它真的很大，但我会尽力解释我的问题。

我有一个小程序`com.dmp.applet.DMPApplet`，它是主要的小程序类，这个应该是第一个加载的

`com.dmp.applet.DMPApplet`：

```
package com.dmp.applet;
// Imports

public class DMPApplet extends Applet
{
    @Override
    public void init()
    {
        this.state = AppletState.OFF;
        this.running = true;

        CPSAPI.connector = (Cpsw32) Native.loadLibrary("cpsw32", Cpsw32.class);

    }

    @Override
    public void start()
    {
        CR_CPS cr = CR_CPS.fromShort(CPSAPI.connector.CPS_OuvertureSession(CPSAPI.pNomRessource, CPSAPI.pNomAppli, CPSAPI.pStatusService, CPSAPI.pNumSession.getReference(), CPSAPI.pFU.getReference()));
        System.out.println("OUVERTURE DE SESSION : " + cr.getMessage());

        this.jso = JSObject.getWindow(this);

        if(this.state == AppletState.OFF && this.running)
        {
            this.Attente_Connexion();
            this.Demande_Code_PIN();
        }

        if(this.state == AppletState.LOGGED && this.running)
        {
            this.Connexion_VS();
            this.Lancement_Gateway();
        }

        if(this.state == AppletState.READY && this.running)
        {
            this.Ecoute_Evenements_CPS();
            this.Fermeture();
        }
    }

    public void stop()
    {
        CR_CPS cr = CR_CPS.fromShort(CPSAPI.connector.CPS_FermetureSession(CPSAPI.pNumSession.getValue(), CPSAPI.pStatusService));
        System.out.println("FERMETURE DE SESSION : " + cr.getMessage());
    }

    public void destroy()
    {
        // TODO
    }

} 
```

它的架构是小程序执行的基础，但是当我在 Eclipse (Juno) 下测试它时，但每次启动项目时，我都会得到：

```
java.lang.ClassNotFoundException: com.dmp.applet.DMPApplet.class
    at sun.applet.AppletClassLoader.findClass(AppletClassLoader.java:211)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at sun.applet.AppletClassLoader.loadClass(AppletClassLoader.java:144)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
    at sun.applet.AppletClassLoader.loadCode(AppletClassLoader.java:662)
    at sun.applet.AppletPanel.createApplet(AppletPanel.java:785)
    at sun.applet.AppletPanel.runLoader(AppletPanel.java:714)
    at sun.applet.AppletPanel.run(AppletPanel.java:368)
    at java.lang.Thread.run(Thread.java:619) 
```

如此痛苦，我不知道发生了什么，该项目在另一台PC（我的队友用来开发的那台）上完美运行，并且直到两天前才运行...我不知道...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:42:13.243

这里最后有一个“.class”的事实是可疑的：

```
java.lang.ClassNotFoundException: com.dmp.applet.DMPApplet.class 
```

我希望这样：

```
java.lang.ClassNotFoundException: com.dmp.applet.DMPApplet 
```

您究竟是如何在 Eclipse 下启动它的？（我从未在 Eclipse 中编写过小程序。）如果您必须在任何地方指定类，请确保您没有“.class”后缀，因为它不是类名的一部分。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T09:43:16.087

您能否确保在 Eclipse 上的应用程序构建路径中正确配置了您的 jdk。右键单击 Eclipse 上的应用程序并转到构建路径。选择库并确保 jdk 在那里。

# mysql - 自动将产品导入 Woocommerce

> ID：12527998
> 
> 赞同：13
> 
> 时间：2012-09-21T09:39:39.437
> 
> 标签：mysql, wordpress, woocommerce

我正在尝试找到一种将产品自动导入 Woocommerce 的方法。我想知道是否有人对此有任何经验，无论是使用 CSV 还是直接写入数据库。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-30T04:18:23.833

1）简单的方法：

您可以使用 CSV 导入扩展轻松将 CSV 文件导入 WooCommerce： [http ://www.woothemes.com/extension/product-csv-import-suite/](http://www.woothemes.com/extension/product-csv-import-suite/)

或者您可以使用更灵活的 WP All In One Import： http: [//www.wpallimport.com/woocommerce-product-import/](http://www.wpallimport.com/woocommerce-product-import/)

通过这个插件还有一个相当流行的免费解决方案： [http ://wordpress.org/extend/plugins/woocommerce-csvimport/](http://wordpress.org/extend/plugins/woocommerce-csvimport/)

2）艰难的道路：

Woocommerce 产品是常规的 WordPress 帖子，自定义帖子类型为`product`. 这意味着每个产品都存储在`wp_posts`表中（或替换`wp`为您的表前缀）。这里有很多 post_type 值。用于 WordPress 的有一个`post_type="product"`

所有其他产品信息都存储在表格中`wp_postmeta`，并通过`post_id`列连接到`wp_posts`表格。使用了许多元键/值，但 WooCommerce 中最常见的键/值相当直观，例如：_visibiilty、_price、_sku、_stock、_length、_width、_height 等......

我建议您在 WP Admin 中手动输入几个产品，然后研究表格中的数据以确保您拥有所需的所有数据......然后您可以编写自己的自定义导入套件。

自己做可能不会像一些预制的解决方案那样工作，这些解决方案为您提供输入数据的良好错误检查，以及额外的字段和预处理功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-26T13:20:30.173

[如果您的 CSV 文件中包含 WooCommerce 简单产品，您可以使用此免费插件](https://wordpress.org/plugins/product-import-export-for-woo/)一键从 URL 导入所有这些产品以及图像

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-28T10:34:12.913

**WordPress**导入器将从 WordPress 导出文件中导入以下内容：

*   帖子、页面和其他自定义帖子类型
*   评论
*   产品
*   自定义字段和发布元
*   来自自定义分类法的类别、标签和术语
*   作者

您可以使用**[WordPress Importer](https://wordpress.org/plugins/wordpress-importer/)**插件将产品导入 Woocommerce。

*   **插件的安装**-

    1.  在 WordPress 仪表板中访问工具 -> 导入
    2.  单击进口商列表中的 WordPress 链接
    3.  点击“立即安装”
    4.  最后点击“Activate Plugin & Run Importer”
*   **插件的使用**-

    **第 1 步：** 转到工具 -> 导入屏幕

    **第 2 步：**点击 WordPress。

    **第 3 步：**从计算机中选择输入文件。

    **第四步：**点击导入

> **视频教程**- 下一页上的视频教程也可能是进口产品的好资源 -
> 
> [如何在 wordpress 中导入虚拟 .xml 数据](https://www.youtube.com/watch?v=kUZhiTDdglg)