# StackOverflow 问答 15575000-15575999

# ruby-on-rails - 在 Angularjs 中显示记录 - 新手

> ID：15575001
> 
> 赞同：1
> 
> 时间：2013-03-22T16:13:01.037
> 
> 标签：ruby-on-rails, angularjs

这是一个真正的新手问题：

我在 erb 的 Rails 中查看了我的索引：

```
<div ng-app="Donor">
  <div ng-controller="DonorCtrl">

    <ul>
     <li ng-repeat="donor in donors">
      {{donor}}
    </li>
    </ul>

</div>
</div> 
```

我从 Rails 返回的 Donor json 是：

```
class DonorSerializer < ActiveModel::Serializer
  attributes :id, :tools_id, :first_name, :last_name
end 
```

我的javascript文件有这个；

```
var app;

app = angular.module("Donor", ["ngResource"]);

    // separate view to Add new donors

 $scope.addDonor = function() {
   var donor;
   donor = Entry.save($scope.newDonor);
   $scope.donors.push(entry);
   return $scope.newDonor = {};
 };

 $scope.showDonors = function() {
  var Donor = $resource("/donors", {
    update: {
        method: "GET"
    }
 });
 return $scope.donors = Donor;

}

this.DonorCtrl = function($scope, $resource) {
  var Donor;
  Donor = $resource("/donors/:id", {
    id: "@id"
}, {
    update: {
        method: "PUT"
    }
});
return $scope.donors = Donor.query();
}; 
```

如何在我的索引视图中获取捐赠者列表？

我错过了一些东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:38:50.473

您的第一个问题是控制器内部没有正确的代码。我还把你的 $resource 变成了工厂的。我将 Donors 更新方法更改为“PUT”，因为您有一个“addDonor”方法。

确保您还为 angularjs 设置了正确的库。为此，您将需要：

```
angular.js
angular-resource.js 
```

修改后的 Javascript：

```
var app;

app = angular.module("Donor", ["ngResource"]);

app.factory("Donors", [
  "$resource", function($resource) {
    return $resource("/donors", {}, {
      update: {
        method: "PUT"
      }
    });
  }
]);

app.factory("Donor", [
  "$resource", function($resource) {
    return $resource("/donors/:id", {
      id: "@id"
    }, {
      update: {
        method: "GET"
      }
    });
  }
]);

this.DonorCtrl = [
  "$scope", "Donor", "Donors", function($scope, Donor, Donors) {
    var donor;
    $scope.donor = Donor.query();
    $scope.donors = Donors.query();
    $scope.addDonor = function() {};
    donor = Donor.save($scope.newDonor)(function() {
      return $scope.donors.push(donor);
    });
    return $scope.newDonor = {};
  }
]; 
```

由于您使用的是 rails，这里是咖啡脚本版本（我发现它与 angularjs 结合起来很优雅）：

```
app = angular.module("Donor", ["ngResource"])

app.factory "Donors", ["$resource", ($resource) ->
    $resource("/donors", {}, {update: {method: "PUT"}})
]
app.factory "Donor", ["$resource", ($resource) ->
    $resource("/donors/:id", {id: "@id"}, {update: {method: "GET"}})
]

@DonorCtrl = ["$scope", "Donor", "Donors", ($scope, Donor, Donors) ->
  $scope.donor = Donor.query()
  $scope.donors = Donors.query()

  $scope.addDonor = ->
        donor = Donor.save($scope.newDonor) ->
            $scope.donors.push donor
        $scope.newDonor = {}
] 
```

我会[查看 EggHead.io](http://egghead.io/)以更好地了解如何设置您的 Angular javascript 文件。

# javascript - 我需要什么 CSS 规则来隐藏其子“td”具有具有空值属性的子“input”元素的“tr”元素？

> ID：15575007
> 
> 赞同：1
> 
> 时间：2013-03-22T16:13:20.413
> 
> 标签：javascript, jquery, html, css

我意识到问题标题有点令人困惑，但实际上，我的意思是问我输入了什么。

我正在尝试编写一个用于打印的 CSS 文件（恶心上升），并且我想消除不必要行中的空白（必要性，或者更确切地说，缺少空白，由具有空值的输入字段决定）。

正确的 CSS 语法（如果有的话）一直在逃避我。

我以前使用过这样的选择器：

```
input[type=text] 
```

所以我可以假设（希望...... gulp！）我可以使用类似的东西：

```
input[val=''] 
```

然而：

1）我不确定在这些括号内使用撇号/引号是否合法（再次调用 CSS 选择器的那个区域是什么？）

2）我不知道如何在这些括号内放置一个选择器（如果可能的话），因为实际的“tr”是我想要定位的，只是带有 td 子项的“tr”s，输入子项为空 val .

沉迷于随机语法，我尝试了：

```
tr[td input val=] 
```

出乎我的意料，我是否发现这显然不起作用，然后我意识到我不知道如何继续，如果我想严格地在 CSS 中完成这个。

~*快速呼吸*

好吧，我意识到我对 CSS 有很多要求，但如果它的选择器系统不是那么强大，我什至不会认为这是可能的。

最后，我已经在实现 javascript、jQuery 甚至服务器端 C#.net (WebMatrix)，所以如果这个答案最好使用这些其他语言来解决，我不介意，我只想要最简单最干净的解决方案，如果可能的话，因为我使用的任何脚本方法都需要向其中的所有 td 元素添加另一个类，并且有很多，更不用说脚本本身了。

任何帮助，一如既往，非常感谢。

---------------------关于ALNITAK的答案的编辑------------------------

`window.print();`我试图在我的JavaScript 命令之前添加以下 jQuery ：

```
$('tr > td > input[value=""]').parent().parent().css('display', 'none');
$('tr > td > input[value=""]').parent().parent().css('visibility', 'hidden'); 
```

我检查了我的父母人数，一切都应该在那里。可能会干扰的唯一另一件事是，默认情况下我在值中嵌入了剃刀（尽管它们在页面开始时被明确分配了空字符串，所以应该没问题）。以防万一，尽管我也尝试过：

```
$('tr > td > input[value=null]').parent().parent().css('display', 'none');
$('tr > td > input[value=null]').parent().parent().css('visibility', 'hidden'); 
```

但是，唉，无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:17:01.793

如果我理解正确：

你不能在 CSS 中做你想做的事，反正现在还不行。

您正在寻找的是一个 css 父选择器。

[http://css-tricks.com/parent-selectors-in-css/](http://css-tricks.com/parent-selectors-in-css/)

通过使用选择器：

```
tr td input[value=''] 
```

您将选择输入，而不是 <tr>。

实现您想要的一种方法是让某些东西“监视”您所在的页面（来自 javascript）并在打印时将一个类应用于您想要隐藏的任何内容。然后在您的打印样式表中使用该类来隐藏！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:18:11.920

纯选择器无法做到这一点，因为选择器的最终结果始终是匹配的子节点，而不是它们的祖先。

您需要找到那些匹配的子节点，然后再次爬回树上，例如在 jQuery 中：

```
$('tr > td > input[value=""]').parent().parent().css('color', 'red'); 
```

如果您愿意，可以使用`.closest('tr')`代替。`.parent().parent()`

同样使用 jQuery，您可以使用该`.has()`函数创建一个与包含特定子元素的元素匹配的链：

```
$('tr').has('> td > input[value=""]').css('color', 'red'); 
```

该`.has()`函数比使用`:has`伪选择器更有效，尽管我希望它们都不会像上面`document.querySelectorAll`在现代浏览器上利用的完整选择器那样高效。

如果你不能让`input[value=""]`零件工作，试试这个：

```
$('tr > td > input').filter(function() {
    return this.value == '';
}).... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T16:21:15.260

你的散文翻译成这个 CSS：

```
!tr>td>input:matches(:not([value]),[value='']) 
```

然而，两者`!`都是`:matches`尚未实现的[CSS4 选择器。](http://dev.w3.org/csswg/selectors4/)你最好使用 JavaScript：

```
var qsa = document.querySelectorAll("tr>td>input"), l=qsa.length, i;
for( i=0; i<l; i++) {
    if( qsa[i].value == '') qsa[i].parentNode.parentNode.style.display = "none";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T16:21:33.450

尝试使用 :has() 选择器：[http ://api.jquery.com/has-selector/](http://api.jquery.com/has-selector/)

描述：选择至少包含一个与指定选择器匹配的元素的元素。

```
$('tr:has(td input[value=""])').css({color:'red'}); 
```

# azure - 将 ASP.NET 4.0 成员资格提供程序与 Azure 移动服务一起使用

> ID：15575011
> 
> 赞同：3
> 
> 时间：2013-03-22T16:13:34.987
> 
> 标签：azure, asp.net-membership, azure-sql-database, azure-mobile-services

我遇到了一个大问题。

我正在构建一个使用 ASP.NET 4 Web 应用程序 > Azure SQL > Azure 移动服务 > Windows Phone 8 应用程序的系统。数据被输入到已经托管在 azure 上的网站，该网站使用了成员资格提供程序，因此使用了默认表。此数据已成功存储在 Azure SQL db 上。

我的主要障碍是**Azure 移动服务**要求其上的每个表都将其主键称为“id”——小写！在我看来很疯狂。当然，Membership Provider 对 PK 有不同的名称。

问题 - 我应该重新设计我的整个 ASP.NET 应用程序（花费大量时间和精力）以使用 CUSTOM 会员资格（使用名为“id”的 PK 列）还是尝试找到一种方法来尝试将列名即时更改为“id” （不知道怎么做！）。有人有什么建议吗？非常感谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-27T17:52:42.793

我不认为使用 Azure 移动服务会促使您重新设计所有现有架构。话虽如此，您可以尝试两种可能的解决方案。

第一个是实际上不使用 Azure 移动服务的 EntityData 类 - 在使用 AMS 时不必从 EntityData 继承。您需要继承 EntityData 以防您想使用 TableController 这可能是一个好主意，因为它为您提供了许多内置功能，但您可以选择使用普通的 ApiController 和您当前的模型。

另一种可能的解决方案是使用所谓的 DTO（数据传输对象），它可以帮助您保持当前架构，但仍然能够使用 AMS。

以下是有关 DTO 的更多信息的链接： [什么是数据传输对象？](https://stackoverflow.com/questions/1051182/what-is-data-transfer-object) [创建数据传输对象 (DTO)](http://www.asp.net/web-api/overview/creating-web-apis/using-web-api-with-entity-framework/part-5)

一个可能的实现：

假设您有以下模型：

```
public class MyUser
{
    public int MyId
    {
        get;
        set;
    }

    public string SomeOther
    {
        get;
        set;
    }
} 
```

正如您所指出的，如果您想将此模型与 AMS 一起使用，您需要使用它们的 Id 属性而不是 MyId。如果要保持 MyUser 完整，可以引入以下类：

```
public class MyUserDTO : EntityData
{
    public string SomeOther
    {
        get;
        set;
    }
} 
```

现在您的服务将使用 MyUserDTO，它就像您的原始模型的代理。您必须解决的问题是您应该在 MyUserDTO 和 MyUser 之间进行转换。如果您的模型很简单并且您没有复杂的层次结构，那将非常容易。如果您有复杂的模型，DTO 可能不是正确的方法。[Automapper](https://github.com/AutoMapper/AutoMapper)是一种工具，可以帮助您从模型映射到 DTO，反之亦然。

不过，我对您的架构没有太多信息，使用 DTO 可能不太合适。

# php - 在单个 preg_replace() 调用中替换空格并删除非单词字符

> ID：15575012
> 
> 赞同：-4
> 
> 时间：2013-03-22T16:13:37.940
> 
> 标签：php, regex, preg-replace

我有这个代码可以做我想做的事，但分四个步骤。我只想要字母数字小写字母，并且空格应替换为下划线。我已经编写了这个函数，但想了解一个`preg_replace()`函数调用是否可行：

```
 $str = 'qwerty!@#$@#$^@#$Hello %#$sdsdsss';
      $cityu= strtolower($str);
     $id = str_replace(' ', '_', $cityu);
      $outcome = preg_replace("/[^a-zA-Z0-9_]/", "", $id);

       var_dump($outcome); 
```

我想要一个`preg_replace()`这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:39:02.017

您不能使用单个替换字符串，因为您正在执行两个不同的操作，但[`preg_replace()`](http://php.net/preg_replace)可以将数组作为参数。这允许您在一次`preg_replace()`调用中进行多组替换。

```
$str = strtolower('qwerty!@#$@#$^@#$Hello %#$sdsdsss');
echo preg_replace(array('/ /', '/\W/'), array('_', ''), $str);

// output:  qwertyhello_sdsdsss 
```

`\W`是一个否定的速记[字符类](http://www.regular-expressions.info/charclass.html)，它等价于`[^A-Za-z0-9_]`.

* * *

请注意，更换订单很重要。替换将按照它们列出的顺序发生，因此您会以相反的顺序得到不同的结果：首先将替换非单词字符，然后是空格，但在第一步中已经删除了空格。

```
echo preg_replace(array('/\W/', '/ /'), array('', '_'), $str);

// output:  qwertyhellosdsdsss 
```

# jquery - 如何使用 jquery 遍历这个数组？

> ID：15575016
> 
> 赞同：0
> 
> 时间：2013-03-22T16:13:55.807
> 
> 标签：jquery

我将如何使用 Jquery.each() 输出此数据以使用 Jquery 循环以下数组？

```
var data = [
{
value: 36,
color:"#89228f",
legend:"My title" 
},
{
value: 12,
color:"#89288f",
legend:"This title" 
}
] 
```

我想输出这样的结果

```
 <li><div class="colorblock" style="background-color:#89288f"></div> <div class="legend">This title</div></li>

  <li><div class="colorblock" style="background-color:#89228f"></div> <div class="legend">My  title</div></li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:17:52.903

使用[jQuery.map](http://api.jquery.com/jQuery.map/)和[.join()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)

```
var string = $.map(data, function(data, index){
    return '<li><div class="colorblock" style="background-color:#' + data.color + '"></div> <div class="legend">' + data.title +'</div></li>'
}).join(''); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/qGjBV/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:29:08.007

[***演示***](http://jsfiddle.net/7ZrNM/)

```
$.each( data, function( key, val ) {
    $("#id_of_your_ul").append('<li><div class="colorblock" style="background-color:'+ val.color +'"></div> <div class="legend">'+ val.legend +'</div></li>');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:16:38.707

我认为文档很好地解释了如何使用 .each [http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

```
$.each(data, function(index, value) {
  // create div element with data
  // append the new div to the DOM
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T16:41:00.490

[http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)是寻找问题答案的好地方。您的关键问题将是决定是使用 1 个还是 2 个选择器。2 可能更容易让你去这里 - 第一个选择所有带有类图例的 div

```
 $('div.legend').each(data,function(i,v){
         $(this).text=v.legend;
 }); 
```

您可能想要检查数据是否具有与选择器中选择的数字更多或相等的元素。

您可以使用 $('div.colorblock').each() 使用 .attr('style',value) 做类似的事情

您可以使用 1 个选择器并查看 div 的子元素

*   元素。第一个使用 .attr('style',value) ，第二个使用文本。我认为现在您可能只想让它工作，然后根据您的页面布局优化选择器的使用。

# java - 如何使用简单的 for 循环简化多个 if else？

> ID：15575017
> 
> 赞同：-1
> 
> 时间：2013-03-22T16:13:55.747
> 
> 标签：java, if-statement, for-loop

我必须用这个重复的 if else 循环检查每一个条件。如何使用 for 循环或任何其他方法进行简化？

```
if(color.equals("1")&&id.equals("pant"))
{

}
else if(color.equals("2")&&id.equals("pant"))
{

}
else if(color.equals("3")&&id.equals("pant"))
{

}
else if(color.equals("4")&&id.equals("pant"))
{

}
else if(color.equals("5")&&id.equals("pant"))
{

}
else if(color.equals("6")&&id.equals("pant"))
{

}

if(color.equals("1")&&id.equals("shirt"))
{

}
else if(color.equals("2")&&id.equals("shirt"))
{

}
else if(color.equals("3")&&id.equals("shirt"))
{

}
else if(color.equals("4")&&id.equals("shirt"))
{

}
else if(color.equals("5")&&id.equals("shirt"))
{

}
else if(color.equals("6")&&id.equals("shirt"))
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:33:23.937

```
switch (Integer.parseInt(color))
{
    case 1:
    if (id == "pant")
    {
        // 1:pant
    }
    else if (id == "shirt")
    {
        // 1:shirt
    }
    break;

    case 2:
    if (id == "pant")
    {
        // 2:pant
    }
    else if (id == "shirt")
    {
        // 2:shirt
    }
    break;

    // etc ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:23:43.460

为此，您可以使用两个 for 循环，首先获取一个列表，其中包含“衬衫”和“裤子”两个元素，例如

```
string [2] cloths = {"pants","shirts"}; 
```

和像 i 这样的变量并首先将其设置为 1

```
int i = 1; 
```

接着

```
for (string cloth : cloths)
{
    for (i = 1; i < 7 ; i++)
    {
        if(color.equals(i.toString())&&id.equals(cloth))
        {
            System.out.println(i.toString()+"&"+cloth);
        }
    }
} 
```

整个想法是这样的，但是由于我没有编译代码，因此可能存在一些小的语法错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T16:36:10.367

您可以使用内部 if 语句来实现稍微简单一些。

```
if (id.equals("pant")) {
    if (color.equals("1")) {
        //code
    }
    else if (color.equals("2")) {
        //code
    }
    //etc
}
else if (id.equals("shirt")) {
    if (color.equals("1")) {
        //code
    }
    else if (color.equals("2")) {
        //code
    }
    //etc
} 
```

可能有进一步简化它的方法，但我们真的需要知道 if 块中有什么。例如，如果您只是输出值，它可能会变得非常简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T15:25:52.647

我会将`color`-tag 用作 Integer-value- `switch`：

```
switch (color){
case 1:
if (id.equals("pant"){}
else if (id.equals("shirt"){}
break;
case 2:
if (id.equals("pant"){}
else if (id.equals("shirt"){}
break;
.
.
.} 
```

最简单的方式imo。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T16:33:30.800

您可以构建一个映射，将您感兴趣的组合映射到要执行的功能。

就像是：

```
 interface Function {
    void f(); 
  }

  public void test() {
    String color = "1";
    String id = "pant";
    // Map the string to a function.
    Map<String,Function> functions = new HashMap<String,Function>();
    // As many of these as you have different processes.
    // You could name them too.
    functions.put("1|pant",new Function() {

      @Override
      public void f() {
        // What to do when we see color=1 id=pant
        System.out.println("1|pant");
      }

    });
    // Pull the function out of the map.
    Function f = functions.get(color+"|"+id);
    // If it was there.
    if ( f != null ) {
      // Do it.
      f.f();
    }
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T16:22:16.713

如果您可以创建一个通用`Command`接口并将颜色和 id 封装到一个`Key`类中，那么您可以拥有一`Map`对`<Key, Command>`。

```
public class Key {
    private final String color; // "6" as a color?  why not "blue"?
    private final String name;

    public Key(String color, String name) {
        this.color = color;
        this.name = name;
    }

    public String getColor() { return this.color; }
    public String getName() { return this.name; }
}

public interface Command {
    void execute(Object...args);
}

Map<Key, Command> noSwitch;
for (Key key : noSwitch.keyValues()) {
    noSwitch.get(key).execute();
} 
```

或者，更好的是，将该行为嵌入到一个`StockItem`知道该做什么的多态类中。

你的看起来像一个脆弱的、非面向对象的设计。你可以做得更好。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-22T16:24:27.583

您可以做的是创建一个界面：

```
interface Do {
    whatever()
} 
```

以及您在不同 if 分支中执行的任何操作的一堆实现。

然后有一个列表地图来存储和查找它们：

```
Map<String, List<Do>> dos = new HashMap();
// put lots of Do implementations in Lists and put them in the map. 
```

设置后，您的 if 怪物将减少为：

```
dos.get(id).get(color).whatever 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-22T16:24:32.347

如果大括号内的内容不同，则无法轻松地用 for 循环替换它（我们需要查看大括号内的内容才能确定）。switch 语句至少会使事情看起来更好（假设您使用颜色作为 int 而不是 int 的字符串

```
if (id.equals("pant")){
    switch(color){ //note color should be an int, not a string of an int for this to work
         case 1:
              //whatevers in the braces
              break;
         case 2:
              //whatevers in the braces
              break;
           etc
         default:
              break;
    }     
} 
```

# android - Android中的非传统GUI设计

> ID：15575019
> 
> 赞同：5
> 
> 时间：2013-03-22T16:14:19.357
> 
> 标签：android, user-interface, button

我有一个与 android 中的 GUI 设计有关的问题。
如果您查看 Android 设计架构，我们在设计视图中有表格结构。我们可以在行和列中绘制按钮，我们可以绘制图像视图等等，但我们将在矩阵中做所有事情......。如下图所示。 ![在此处输入图像描述](../Images/7382dd4ea9735d19a734e33ee480d3fb.png)

但是我在Android中看到了很多有趣的GUI设计，看起来非常漂亮，不像传统的设计视图（矩阵形式）。

以之字形方式检查带有按钮的下图。我在上面画了红色方块。 ![在此处输入图像描述](../Images/3811194c32e6645e1a2d9d0ee7012736.png)

我不确定它是如何设计的，以及如何捕捉不同图像和按钮的 onclick 功能。我希望我已经很好地解释了我的问题，如果不清楚，请告诉我。我正在寻找健康的反应和帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:33:44.483

我还没有这样做，但您可以创建自己`drawable`的背景并`rotate`在`canvas`对象上使用来旋转图像。这是一个谈论它[的 SO和](https://stackoverflow.com/questions/4763103/rotating-a-drawable-in-android)[Docs](http://developer.android.com/reference/android/graphics/Canvas.html)。有人可能有更好的主意，但我认为这应该适合你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:44:11.040

我认为您必须按照 android 的官方文档中的说明创建自定义组件。我也在寻找一些可以很好地解释这一切的教程。这是官方文档链接的[链接](http://developer.android.com/guide/topics/ui/custom-components.html)。也看看这个[链接](http://mobile.tutsplus.com/tutorials/android/android-sdk-creating-custom-views-2/)，他正在定义一个自定义视图并从一个活动中操作它。这不是您要查找的内容，只是想知道它是如何工作的，您可以扩展 Button 类并覆盖 onDraw 方法并绘制您想要的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:46:43.963

虽然我自己没有做过，但我只是在阅读有关如何使用图像映射做类似的事情。

看看这个链接：

[http://blahti.wordpress.com/2012/06/26/images-with-clickable-areas/](http://blahti.wordpress.com/2012/06/26/images-with-clickable-areas/)

本质上，这篇文章描述的是有两张图片，一张是按钮的外观，另一张是按钮所在位置的颜色编码层。例如，如果有 3 个按钮，您将有 3 种不同颜色的 3 种形状（例如红色、绿色、蓝色）。

带有彩色形状的图像将不可见，但是当 onclick 触发时，您会找到单击的像素的颜色。因为每个可触摸区域都是不同的颜色，所以你可以知道屏幕上的哪个点被触摸了。

这听起来像是一个有趣的想法。阅读文章。希望能帮助到你。

# jquery - Chrome 扩展从后台发送消息到内容脚本

> ID：15575030
> 
> 赞同：4
> 
> 时间：2013-03-22T16:14:48.347
> 
> 标签：jquery, google-chrome-extension

我是 chrome 扩展的新手，在这个问题上花了几个小时后，我决定问：

我的后台脚本只会在我重新加载扩展程序并快速切换到选项卡后向我的内容脚本发送一条消息。否则什么都不会发生。

```
 {
  "name": "Fixes",
  "version": "2",
  "manifest_version": 2,
  "description": "SomeFixes",
  "permissions": ["tabs", "http://*/*", "https://*/*", "storage"],
  "options_page": "options.html",
  "background": {
    "persistent": false,
    "scripts": ["background.js"]
  },
  "content_scripts": [
    {
      "matches": ["<all my urls>"],
      "js": ["jquery1.7.js", "helper.js"]
    }
  ],
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "options.html"
  }
} 
```

背景.js

```
chrome.tabs.query({active: true, currentWindow: true}, function(tabs){

                chrome.tabs.sendMessage(tabs[0].id, {type:"test"}, function(response) {});  

}); 
```

助手.js

```
jQuery(document).ready(function() {
//Get allowed functions
chrome.extension.onMessage.addListener(function(msg, sender, sendResponse) {

if(msg.type == "test"){

alert("test received");

}); 
```

警报框仅在重新加载扩展程序后触发并快速切换到应该显示警报框的选项卡。

所以我认为每次重新加载选项卡时都应该加载 background.js。但现在它只加载一次，如果我不在那个选项卡上，它会在 helper.js 准备好发送响应之前加载。这就是我的理论。但正如我所说，我是新手，我很难理解它是如何工作的。

最终我想要完成的是让用户保存一些选项，这些选项将在每次页面加载时默认加载。在选项页面中保存选项工作得很好。弹出页面也可以正常工作。我只是无法加载默认选项，因为我无法将消息发送到内容脚本页面。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T16:22:00.517

每次加载扩展程序时后台页面都会运行，并且由于它是一个事件页面，它将卸载并且任何事件都会再次执行您的代码。尝试这样做

**助手.js**

```
chrome.extension.sendMessage({text:"getStuff"},function(reponse){
  //This is where the stuff you want from the background page will be
  if(reponse.type == "test")
    alert("Test received");
}); 
```

**背景.js**

```
chrome.extension.onMessage.addListener(function(message,sender,sendResponse){
  if(message.text == "getStuff")
    sendResponse({type:"test"});
}); 
```

这样，内容脚本就会启动信息流，因此您可以确定它已准备好接收它。

# mysql - 操作 VARCHAR 字符串和更新列（伪日期）

> ID：15575031
> 
> 赞同：0
> 
> 时间：2013-03-22T16:14:49.023
> 
> 标签：mysql, sql, date, sql-update, varchar

长话短说，我的一个客户想将日期时间字段更改为 varchar 字段，在告诉他们为什么不应该这样做几个小时后，我终于让步了。

我的问题是现在转换为 VARCHAR 的日期是`yyyy-mm-dd`，我需要将它们翻转成`mm-dd-yyyy`我可以用 PHP 用`foreach()`循环和 a`list()=explode()`来做到这一点，但是有没有办法用 sql 查询来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:19:09.890

您可以使用`DATE_FORMAT`：

```
UPDATE your_table SET your_varchar = DATE_FORMAT(your_varchar ,'%m-%d-%Y') 
```

有关更多信息，请参阅 MySQL 文档：[DATE_FORMAT](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:19:07.207

```
SELECT 
    SUBSTRING(date_to_change,9,2) + '-' + SUBSTRING(date_to_change,6,2) + '-' + SUBSTRING(date_to_change,1,4)
... 
```

看看那是不是你要找的。

道歉 - 忘记添加它的其余部分。

```
UPDATE 
    table_to_update 
SET 
    date_to_change = SUBSTRING(date_to_change,9,2) + '-' + SUBSTRING(date_to_change,6,2) + '-' + SUBSTRING(date_to_change,1,4) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:19:14.423

你可以使用这个：

```
SELECT CAST(DATE_FORMAT(dateColumn, '%m-%d-%Y') AS CHAR(10)); 
```

# ruby - 将类方法保存到 txt 时出现问题

> ID：15575041
> 
> 赞同：1
> 
> 时间：2013-03-22T16:15:16.710
> 
> 标签：ruby

我是ruby新手，犯了很多错误，所以希望对ruby有经验的人可以分享一点知识。我不知道如何让 ruby​​ 将文本保存到方法`all`写入的 txt 文件中。

```
class generator
  def all
    puts "i want to save this text into a txt file"
  end
end
new_gen = generator.new
new_gen.all

my_file = File.new("Story.txt", "a+")
my_file.puts("all")
my_file.puts("\n")
my_file.close 
```

我尝试了所有方法，但 txt 文件要么包含“全部”，要么完全空白。有任何想法吗？我也试过`my_file.puts(all)`和`my_file.puts(new_gen.all)`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:19:31.960

您的方法应该只返回一个字符串。Puts 显示字符串，不返回它。因此，将类更改为：

```
class generator
  def all
    "i want to save this text into a txt file" # optionally add a return
  end
end
new_gen = generator.new
new_gen.all 
```

然后使用您尝试过的最后一个版本：`my_file.puts(new_gen.all)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:21:51.797

试试这个：

```
class Generator
  def all
    "i want to save this text into a txt file"
  end
end

gen = Generator.new

f = File.new("Story.txt", "a+")
f.puts gen.all
f.close 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T16:54:01.510

如果你想做`Generator`写作，你可以把它传递给一个[`IO`](http://www.ruby-doc.org/core/IO.html)对象。

```
class Generator
  def initialize(io)
    @io = io
  end

  def all
    @io.puts "i want to save this text into a txt file"
  end
end

# write to STDOUT
gen = Generator.new(STDOUT)
gen.all

# write to file
File.open("Story.txt", "a+") do |file|
  gen = Generator.new(file)
  gen.all
end 
```

# scala - 有人用securesocial实现了deadbolt或任何其他授权机制吗？

> ID：15575046
> 
> 赞同：4
> 
> 时间：2013-03-22T16:15:30.360
> 
> 标签：scala, playframework, authorization, playframework-2.1, securesocial

我正在网上浏览以查找某种教程，但找不到它。我想我可以使用securesocial提供的twitter示例

例子：

```
def onlyAdmin = SecuredAction(WithAuth("admin")) { implicit request =>
      Ok("You could see this since you are admin")
}

case class WithAuth(role: String) extends Authorization {
  def isAuthorized(user: Identity) = {
val existingDbUser = User.findUserByProviderUserId(user)
    existingDbUser.hasRole(role)
} 
```

`User.findUserByProviderUserId(user)`调用数据库来查找存储的用户及其角色。我不希望每次都调用 db 并使用`Identity`.

你会如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T00:44:34.970

那将是正确的做法。您可以从 UserService.save() 方法返回您自己的模型的实例（只要它实现身份）。这将允许您返回您的 User 对象，然后直接运行 user.hasRole(role) 而无需再次查询数据库。但是查询需要在某个时候完成。

# php - 在while循环中请求

> ID：15575047
> 
> 赞同：-1
> 
> 时间：2013-03-22T16:15:33.030
> 
> 标签：php, while-loop, mysqldatareader

我使用以下代码：

```
 <form  method="get" name="MobileDetails">
 <input name="brand" id="brand" value="<?php echo $brand;?>" type="hidden">
<input name="brid" id="brid" value="<?php echo $brandid;?>" type="hidden">
 <button type="button" name="submitButton" value="get Details"    onclick="getDetails()">    
</form> 
```

脚本

```
 <script type="text/javascript">
function getDetails(){
var brand = document.getElementById('brand').value;
var brandid = document.getElementById('brid').value;
document.MobileDetails.action = 'details.php?brand='+brand+'&id='+brandid;
document.MobileDetails.submit();
}
</script> 
```

但它在while循环中不起作用。有什么问题？我的代码如下。当我单击按钮时，它什么也不做。但是代码在顶部没有给出while循环的情况下工作得很好。

```
<?php
require_once('connection.php'); 
$SQL= "SELECT*FROM mobile ORDER BY price ASC  LIMIT 10";
$result= mysql_query($SQL);
while ($db_field = mysql_fetch_assoc($result)){
 $brand=$db_field['brand'];
 $id=$db_field['id'];
 $model=$db_field['model'];
 echo "<form  method='get' name='MobileDetails'>";
 echo " <input name='brand' id='brand' value='". $brand ."' type='hidden'>";
 echo" <input name='brid' id='brid' value='". $id ."' type='hidden'>";
 echo" <input name='mod' id='mod' value='". $model ."' type='hidden'>";
 echo" <button type='button' name='submitButton' value='get Details'   onclick='getDetails()'/>    
  </form>   ";
  echo "CLICK HERE";
    }

 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:19:50.267

您多次使用相同的ID。ID 必须是唯一的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:21:21.873

你正在处理多个id。ID 的作用是成为元素的唯一标识符。我建议只使用

```
 <form action="details.php" type="get"> 
```

这将完全符合您在不使用该功能的情况下想要实现的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:25:50.000

元素 ID 的问题是它们对于页面来说必须是唯一的；但是，如您所见，显示 HTML 不是必需的。调用 JS 函数`getDetails()`时，它会按 ID 获取元素，但是当页面中有多个 ID 时，这将失败。

所以，你可以做什么？好吧，在您的循环中，您为每个“品牌”创建了一个新表单。您可以将表单的引用传递给**NAME**`grabdetails` ，然后从该表单中获取值。

 *** * *

您应该只在 PHP 级别生成操作，而不是使用 Javascript 根据放置在隐藏字段中的给定详细信息生成链接。

```
echo "<form  method='get' name='MobileDetails' action='details.php?brand=$brand&id=$brandid'>"; 
```

但是由于您确实有隐藏字段，因此仅`action='details.php'`使用表单将使用户

```
details.php?brand={brand}&brid={id}&mod={model} 
```

您应该研究`POST`或将您的按钮变成一个普通的链接，而不是有一个表单。**

# c++ - LL 是什么意思？

> ID：15575054
> 
> 赞同：10
> 
> 时间：2013-03-22T16:15:57.227
> 
> 标签：c++, literals, suffix

`LL`在标准中的任何地方都有定义（很难找到）？

[ideone](http://ideone.com/ch3INx)接受代码

```
int main()
{
    std::cout << sizeof(0LL) << std::endl;
    std::cout << sizeof(0);
} 
```

并打印

```
8
4 
```

但是这是什么意思？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T16:18:25.227

它在 C++11 标准的第 2.14.2 段中指定：

# 2.14.2 整数文字

> [...]
> 
> *long-long-suffix*：其中之一
> 
> ```
> ll LL 
> ```

第 2.14.2/2 段，特别是表 6，继续指定十进制、八进制和十六进制常量的后缀的含义，以及它们给出的类型。

因为`0`是八进制文字，所以类型`0LL`是`long long int`：

```
#include <type_traits>

int main()
{
    // Won't fire
    static_assert(std::is_same<decltype(0LL), long long int>::value, "Ouch!");
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T16:16:53.027

`LL`是 long-long 的后缀，在大多数（全部？）C/C++ 实现中是 64 位的。`0LL`值为 0 的 64 位文字也是如此。

这类似于`L`作为 long 文字的后缀，在大多数 32 位和 64 位 C/C++ 实现中，它的大小与 non-long 相同`int`。（在 16 位实现中， 的大小`int`通常为 16 位，因此`L`后缀将指示 32 位整数文字，而不是默认的 16 位。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-22T16:18:35.137

`0LL`是一个整数文字。它的后缀`LL`决定了它可能具有的可能类型集。对于十进制常量，类型将为`long long int`. 对于八进制或十六进制常量，类型将是`long long int`or`unsigned long long int`如果需要。在 的情况下`0LL`，文字的类型是`long long int`。

> 整数文字的类型是表 6 中可以表示其值的相应列表中的第一个。
> 
> 表 6 - 整数常量的类型
> 
> ```
> Suffix     Decimal constants    Octal or hexadecimal constant
> ...
> ll or LL   long long int        long long int
>                                 unsigned long long int
> ... 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-30T15:40:02.743

我们将从一个例子开始：

> std::cout << 2LL << endl;

这个结果将是 2，并且会发生这种情况，因为根据数据大小，为了正确修复它，我们希望在某些情况下使用 2 一样长，这正是发生的情况。给出的输出是 long long 类型，表示常量 int 2。

## 另一个后缀是（来自极客）：

**unsigned int** : 整数常量末尾的字符 u 或 U。

**long int** : 整数常量末尾的字符 l 或 L。

**unsigned long int** : 整数常量末尾的字符 ul 或 UL。

**long long int** : 整数常量末尾的字符 ll 或 LL。unsigned long long int：整数常量末尾的字符ull或ULL。

# content-management-system - Concrete5 isEditMode()-like 处理程序，用于获取有关活动编辑或发布的信息

> ID：15575059
> 
> 赞同：-1
> 
> 时间：2013-03-22T16:16:17.050
> 
> 标签：content-management-system, publishing, editing, concrete5

所以我的问题是是否有一个 Concrete 5 处理程序/侦听器而不是

```
isEditMode() 
```

告诉用户是否处于活动编辑模式，或者他是否刚刚发布了他的编辑？

就像是

isPublished() 或 isEditModeActive()

谢谢你

* * *

感谢您的关注！

所以我在第二个例子中尝试了事件处理程序：1.我在/config中创建了site_events.php 2.我添加了

```
<?PHP Events::extendPageType('inhalt', 'on_page_version_approve');?> 
```

1.  我添加到 site.php

    定义（'ENABLE_APPLICATION_EVENTS'，真）；

2.  在我添加的引用 inhalt.php 页面类型上

    功能 on_page_version_approve() { echo "页面已发布"; }

... 没发生什么事。在它所写的描述中，引用 inhalt.php 必须存在于 /controllers 中。然而，这种情况并非如此。我实际上不太了解事件处理的结构。如果你能帮助我，那就太好了......无论如何提前谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T04:17:05.590

听起来您想要具体5 所称的事件（[http://www.concrete5.org/documentation/developers/system/events/](http://www.concrete5.org/documentation/developers/system/events/)）。

根据文档，您将获得`Page`注册函数的 as 参数。

没有什么比你要找的更具体了，但是：

1.  对于已发布，使用`on_page_version_approve`.
2.  对于编辑，请尝试`on_before_render`. 它有点通用（即，它被调用的次数远远超过您的兴趣），但您可以执行类似`if ($page->getCollectionCheckedOutUserID())`. 不过，您应该对此进行一些试验。例如，如果您查看主页进行编辑，然后其他人加载实时版本，则该事件可能会再次被调用，并且`Page`可能会显示“已签出”。但也许你可以检查`->isEditMode()`，它应该检查它与登录用户...

# sql - 如何从日期时间列中删除时间

> ID：15575061
> 
> 赞同：-3
> 
> 时间：2013-03-22T16:16:28.083
> 
> 标签：sql, sql-server, sql-server-2005

我有一个正在运行的查询，我只想在比较两列时考虑日期，而不是时间。我目前有：

```
SELECT dtvisit1, dtvisit2
  FROM dbo.Visit
  WHERE dtvisit1 = dtvisit2; 
```

显然，这只会显示每次访问在同一天同一时间的行。我只想知道两列是否在同一日期有条目。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T16:33:41.747

如果有索引，最有效的方法`dtvisit1`可能是：

```
WHERE dtvisit1 >= DATEDIFF(DAY, 0, dtvisit2)
  AND dtvisit1 <  DATEDIFF(DAY, -1, dtvisit2) 
```

如果有索引，`dtvisit2`则交换它。这仍然允许您至少在一侧使用索引。如果没有索引，您可以使用其他方法，例如转换为字符串，但即使在为一列或两列添加索引后，您仍然需要在以后进行全面扫描。对于大多数人来说，转换为字符串方法似乎是下意识的反应，但是[我在这篇博文中演示了为什么这是你最不想做的事情](http://www.sqlperformance.com/2012/09/t-sql-queries/what-is-the-most-efficient-way-to-trim-time-from-datetime)。

您还可以考虑添加计算列，例如：

```
ALTER TABLE dbo.Visit
  ADD visit1c AS (DATEDIFF(DAY, 0, dtvisit1));

ALTER TABLE dbo.Visit
  ADD visit2c AS (DATEDIFF(DAY, 0, dtvisit2)); 
```

那你可以说`WHERE visit1c = visit2c`。更简单的是：

```
ALTER TABLE dbo.Visit
  ADD visitc AS (DATEDIFF(DAY, dtvisit1, dtvisit2)); 
```

那你可以说`WHERE visitc = 0`。

您可能想要调查持久化和/或索引它们。

在 SQL Server 2008 中，您可以简单地将两边转换为`DATE`，而不会失去 sargability。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-22T16:19:31.020

在 where 子句中使用 convert() 函数。确保两次都使用相同的格式。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-22T16:19:30.317

您可以使用 Convert 将日期设为 nvarchar，然后进行如下比较：

```
SELECT dtvisit1, dtvisit2
FROM Visit
WHERE CONVERT(nvarchar(20), [dtvisit1], 101)  = CONVERT(nvarchar(20), [dtvisit2], 101) 
```

# django - Django 开发服务器的写权限

> ID：15575062
> 
> 赞同：0
> 
> 时间：2013-03-22T16:16:29.297
> 
> 标签：django, development-environment, file-permissions

我正在尝试使用本地开发服务器将文件上传/写入到我的 Django 1.5 应用程序的服务器。

我的应用中有一个带有 a 的模型`FileField`。当我尝试保存该模型的新实例时（使用管理页面或 shell），我收到权限错误。保存我的模型的新实例后，应用程序会尝试将文件上传到服务器。由于我在本地开发服务器上运行我的应用程序，因此无法写入远程服务器的媒体目录。

开发服务器通过`manage.py`脚本在我的本地机器上运行。`FileField`应该存储在其中引用的文件的媒体文件夹位于单独的服务器上。（运行生产版本的服务器）。

服务器是运行的专用机器`Ubuntu 12.04.2`，我的机器本地机器运行在`OsX Lion`.

保存新模型实例时出现的错误是：

```
OSError at /admin/.../add/
[Errno 13] Permission denied: '/var/www' 
```

所以问题是：

有没有办法能够从我的本地开发服务器在远程服务器上写入文件？

或者我可以更改设置，以便我的本地服务器创建本地文件进行测试？

# javascript - 我可以在任何 HTML 元素上调用 appendChild 吗？

> ID：15575063
> 
> 赞同：0
> 
> 时间：2013-03-22T16:16:31.813
> 
> 标签：javascript, html

有人知道我是否可以在任何 HTML 元素上调用 appendChild 吗？

具体来说，我需要在 input type='text' 上执行它，它似乎有效？但这是正确的吗？

下面是我的代码片段：

```
var txt = document.createElement('input');
txt.type = 'text';
...
var div = document.createElement('div');
...
txt.appendChild(div); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:21:17.437

> 有人知道我是否可以在任何 HTML 元素上调用 appendChild 吗？

你可以。它是元素节点的标准特征。不过，这可能并不总是有意义的。

> 具体来说，我需要在 input type='text' 上执行它，它似乎有效？但这是正确的吗？

`<input>`元素被定义为空。它们仍然有标准的 DOM 方法，但不允许有子节点。您正试图将 DOM 置于无效状态，并且（据我所知）当您这样做时发生的行为是未定义的。你不应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:18:39.623

来自[w3.org 上的输入元素](http://www.w3.org/TR/html5/forms.html#the-input-element)：

> 内容模型：空。

将元素放入`input`.

如果要设置输入的值，请使用`value`属性：

```
input.value = 'someText'; 
```

如果您想要在输入之前添加一个元素，请使用[insertBefore](https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore)：

```
input.parentNode.insertBefore(div, input); 
```

要在输入后插入 div，您可以这样做

```
input.parentNode.insertBefore(div, input.nextSibling); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:21:20.687

不，您不能将子元素附加到输入元素。它是一个独立的元素。但是，您可以将输入元素附加到 div 元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T16:31:21.210

不，您不能将子元素附加到输入，这是因为标准规定该元素的内容模型为空。

它只有“。”可以访问的属性。语法如

```
input.propertie 
```

# objective-c - Objective-C 的新文字语法可以模仿 addObject 吗？

> ID：15575070
> 
> 赞同：8
> 
> 时间：2013-03-22T16:16:49.067
> 
> 标签：objective-c, nsarray, objective-c-literals

我知道我可以这样做：

```
NSMutableArray *objects = [@[objectOne, objectTwo] mutableCopy];
NSObject *someObject = [NSObject new];
objects[0] = someObject; 
```

但是有没有办法让新的文字语法模仿 addObject:？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-22T16:16:49.067

当我写这篇文章时，我尝试了这段代码，它就像一个魅力。它没有完全记录，但我认为这是处理 addObject: 的一种安全方法：使用新的文字语法。

```
NSMutableArray *objects = [@[] mutableCopy];
NSObject *someObject = [NSObject new];
objects[objects.count] = object; 
```

# jquery - 使用 jQuery 禁用/启用动态输入/文本区域/选择字段

> ID：15575074
> 
> 赞同：0
> 
> 时间：2013-03-22T16:16:55.057
> 
> 标签：jquery, if-statement, input, add

我在选择框中有以下代码，其中三个选项应该动态启用/禁用输入字段/文本区域/选择中的属性“禁用”，但代码根本不起作用：

```
 $(document).ready(function() {
$('.fieldcontent').not('.info').hide();
$('#selector_cs').change(function() {

      $('.fieldcontent').customFadeOut(100);
      $('.' + $(this).val()).customFadeIn(900);
     // $('input').prop('disabled',false);
    //$('textarea').prop('disabled',false);
    //$('select').prop('disabled',false);
 //option1
 if ($("this:selected").val() === 'help') {
$("textarea[name='message']").prop('disabled',false);
$("input[name='domain']").prop('disabled',false);
}else{
    $("textarea[name='message']").prop('disabled',true);
$("input[name='domain']").prop('disabled',true);
    };
    //option2
     if ($("this:selected").val() === 'info') {
$("textarea[name='message']").prop('disabled',false);

}else{
    $("textarea[name='message']").prop('disabled',true);
};
     //option3
     if ($("this:selected").val() === 'products') {
$("textarea[name='message']").prop('disabled',true);
$("select[name='products']").prop('disabled',false);
$("input[name='domain']").prop('disabled',false);
$("input[name='address']").prop('disabled',false);
$("input[name='state']").prop('disabled',false);
$("input[name='city']").prop('disabled',false);
$("input[name='country']").prop('disabled',false);
};      
});  }); 
```

谁能帮我正确编写代码？

提前感谢您的帮助

**编辑：**感谢@Ken 和@arun 的快速帮助。现在 jQuery 正在工作。

但是：我有一个 PHP 验证，它没有通过 jQuery 禁用的字段。为什么？

否则，我不想通过 jquery 添加/删除动态隐藏字段，因为当用户收到邮件时，他会看到隐藏字段值，这些值不是“真实”值，而是像“some1”这样的值， “some2”电子抄送。

如何避免这种情况并使用禁用字段而不是通过 php 验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:24:47.490

你的选择器`$("this:selected").val()`错了，应该是`$(this).val()`获取选择的值

```
$(document).ready(function() {
    $('.fieldcontent').not('.info').hide();
    $('#selector_cs').change(function() {

        $('.fieldcontent').customFadeOut(100);
        $('.' + $(this).val()).customFadeIn(900);
        // $('input').prop('disabled',false);
        //$('textarea').prop('disabled',false);
        //$('select').prop('disabled',false);
        //option1
        if ($(this).val() === 'help') {
            $("textarea[name='message']").prop('disabled',false);
            $("input[name='domain']").prop('disabled',false);
        }else{
            $("textarea[name='message']").prop('disabled',true);
            $("input[name='domain']").prop('disabled',true);
        };
        //option2
        if ($(this).val() === 'info') {
            $("textarea[name='message']").prop('disabled',false);

        }else{
            $("textarea[name='message']").prop('disabled',true);
        };
        //option3
        if ($(this).val() === 'products') {
            $("textarea[name='message']").prop('disabled',true);
            $("select[name='products']").prop('disabled',false);
            $("input[name='domain']").prop('disabled',false);
            $("input[name='address']").prop('disabled',false);
            $("input[name='state']").prop('disabled',false);
            $("input[name='city']").prop('disabled',false);
            $("input[name='country']").prop('disabled',false);
        };      
    }); 
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/FL6tn/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:25:46.470

将 $("this:selected").val() 更改为 $(this).val() 应该可以解决您的问题

```
$(document).ready(function () {
    $('.fieldcontent').not('.info').hide();

    $('#selector_cs').change(function () {
        $('.fieldcontent').customFadeOut(100);
        $('.' + $(this).val()).customFadeIn(900);

        // $('input').prop('disabled',false);
        //$('textarea').prop('disabled',false);
        //$('select').prop('disabled',false);
        //option1

        if ($(this).val() === 'help') {
            $("textarea[name='message']").prop('disabled', false);
            $("input[name='domain']").prop('disabled', false);
        } else {
            $("textarea[name='message']").prop('disabled', true);
            $("input[name='domain']").prop('disabled', true);
        }

        //option2
        if ($(this).val() === 'info') {
            $("textarea[name='message']").prop('disabled', false);

        } else {
            $("textarea[name='message']").prop('disabled', true);
        }

        //option3
        if ($(this).val() === 'products') {
            $("textarea[name='message']").prop('disabled', true);
            $("select[name='products']").prop('disabled', false);
            $("input[name='domain']").prop('disabled', false);
            $("input[name='address']").prop('disabled', false);
            $("input[name='state']").prop('disabled', false);
            $("input[name='city']").prop('disabled', false);
            $("input[name='country']").prop('disabled', false);
        }
    });
}); 
```

# linq-to-sql - 使用 Linq 连接两个唯一标识符

> ID：15575080
> 
> 赞同：0
> 
> 时间：2013-03-22T16:17:08.223
> 
> 标签：linq-to-sql

我想我已经浏览了有关 stackoverflow 的每个示例，但我遗漏了一些对我的问题至关重要的东西。

我正在尝试加入两个类型为“uniqueidentifier”的字段。

下面是我的代码：

```
 var s = (from d in db.aspnet_Memberships 
            join u in db.Merchants on d.aspnet_User equals u.aspnet_UserID  
            where u.MerchantID == MerchantID 
            select d.IsApproved).SingleOrDefault<System.String>(); 
```

我在连接时收到以下错误“连接子句中的表达式之一不正确。类型推断在调用 'Join' 时失败。”

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:48:36.423

看起来你正试图加入错误的事情。aspnet_User 不是表吗？

尝试：

```
var s = (from d in db.aspnet_Memberships 
         join u in db.Merchants on d.UserId equals u.aspnet_UserID  
         where u.MerchantID == MerchantID 
         select d.IsApproved).SingleOrDefault<System.String>(); 
```

或者：

```
var s = (from d in db.aspnet_Memberships 
         join u in db.Merchants on d.aspnet_User.UserId equals u.aspnet_UserID  
         where u.MerchantID == MerchantID 
         select d.IsApproved).SingleOrDefault<System.String>(); 
```

另外，我不认为 .SingleOrDefault 会起作用，查询正在选择一个布尔值。

# asp.net-mvc - 如何创建位于域/某些/路径等地址的 IIS ASP.NET MVC 网站？

> ID：15575081
> 
> 赞同：1
> 
> 时间：2013-03-22T16:17:10.687
> 
> 标签：asp.net-mvc, iis, asp.net-mvc-4, iis-7

根据问题，这就是我想要实现的目标：

*   在 IIS (7) 中创建一个单独的网站节点来托管已部署的 ASP.NET 4 MVC（和 Web API）应用程序。我想要一个单独的网站节点，而不是在默认网站节点下的 IIS 中创建应用程序。这是为了对应用程序 web.config 拥有完全权限，并且如果将 Web.config 放在某个子文件夹中，则不会受到限制。

*   假设我正在开发 IIS 服务器上进行部署。通常，网站节点将位于类似于`some.IP.addr.ess/`. 我希望网站位于类似`some.IP.addr.ess/some/path/`. 这是为了让 Web 应用程序在部署到子文件夹时也可以正常工作。这也是因为我想在同一台服务器上部署另一个 Web 应用程序，并且可以从`some.IP.addr.ess/another/path/`.

为了澄清我混乱的要求:)我想要：

1.  一个在服务器上运行的 IIS Web 服务器实例，具有一个 IP，可能还有一个域名。
2.  在 IIS 实例内部，有几个网站节点，每个应用程序一个。应用程序可以在 ASP.NET MVC/Web API 上运行。另一个应用程序可能正在 PHP 上运行。另一个可能是静态 HTML 页面。在这里，我说*应用程序*是一个通用术语，不一定与*IIS Application*相关。
3.  如果服务器有一个 IP 地址，比如说`123.123.123.123`，每个应用程序都应该可以通过一个 URL 访问，比如`123.123.123.123/MvcApp1`,`123.123.123.123/PhpApp2`等等。

我在网上搜索过，但可能我没有使用正确的术语：我总是有关于如何在默认节点或虚拟目录等中创建应用程序的文章。然后我发现[这个 ASP.NET 论坛帖子](http://forums.asp.net/t/1356678.aspx/1)似乎说我不能。** 谢谢大家

**编辑**- 转到问题的根源，如下所示：
我想引用具有不同 URL 路径的不同应用程序，例如 IPaddress/Mvc1、IPaddress/Php2 等。
所有这些都是开发服务器所需要的，然后是测试和登台，而不是生产。因此，首先不会很快需要一个域。
我可以在子文件夹、虚拟目录或应用程序中使用应用程序和 Web.config，只要这不会妨碍彼此正常工作。例如，一个 ASP.NET 应用程序，旁边是一个具有自己路由的 ASP.NET MVC，一个 ASP.NET Web API 和一个 PHP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:30:38.610

我想我理解你的意思，但是，我认为你对事情有一些基本的误解。

首先，是的，您可以在服务器上拥有多个网站节点。这些节点都可以响应相同的 IP 地址，但是，这仅在使用 HTTP 1.1 主机名时才有效，这意味着您必须使用不同的域名（主机名）引用每个站点。因此，您有：

domain1.com/mvc1 domain2.com/php1

domain1.com 和 domain2.com 都解析为 123.123.123.123，但 IIS 将查看主机名字段并确定它需要访问的站点。

如果您输入 IP 地址 123.123.123.123 则 IIS 不知道您指的是哪个站点，因此它使用默认网站。这是关键，如果没有主机名，则始终使用默认站点。

如果您希望使用 IP 地址，您唯一的选择是使用默认站点中的应用程序文件夹。至少使用普通的 IIS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:53:48.697

自从我在 IIS 中闲逛以来已经有一段时间了，所以我有点生疏了，我不记得曾经遇到过你的场景。不过，这是我能想到的：

关于创建站点的 IIS 文档提到了很多“唯一绑定”这个短语，但并没有明确说明唯一性的范围，但是假设它意味着服务器范围是合乎逻辑的，所以如果你的两个站点需要绑定到相同的 URL，那么它似乎是不可能的。文档还声明绑定可以指定协议、端口和主机。请注意，没有提到路径；您似乎无法绑定到任何较低级别的东西。这表明可以将站点设置为绑定到`www.somehost.com`，但不能`www.somehost.com/some/path/`。

话虽如此，您的问题有可能通过解决问题的根源而不是症状来解决。与其问“我如何在子路径下设置 IIS 站点，以便我可以在一个 URL 下部署两个应用程序？”，不如问“我如何在一个 URL 下设置两个应用程序并且不会遇到 Web 权限问题。配置？”

我知道一个事实，您可以很高兴地在一个 URL 的子路径下部署多个应用程序，因为这正是我们在工作中所做的 - 我们在 ASP.NET MVC 中有一个应用程序，`www.ourURL.com/somepath`在`www.ourURL.com/otherpath`. 这两个应用程序是单个 Visual Studio 解决方案下的独立项目，每个项目都有自己的 Web.config。

如果没有更多关于应用程序结构的信息和/或关于 Web.config 和子文件夹相关限制的确切问题的详细信息，我真的无法提供更多帮助；就像我说的，我们在工作中是这样部署的，我也没有遇到任何问题。

# c++ - 理解 std::regex 声明：运行时的 regex_error 异常

> ID：15575083
> 
> 赞同：3
> 
> 时间：2013-03-22T16:17:22.243
> 
> 标签：c++, regex, c++11

我有以下可执行文件。我用 gcc 4.7.2 (g++ foo.cc -std=c++11) 编译它。

在运行时，会抛出异常 regex_error。

我究竟做错了什么 ？

```
#include <regex>

int main(int, char**){
    std::regex re("\\d");
} 
```

**更新**异常中的错误代码是error_escape。所以我尝试了“\\d”。它在运行时不会失败，但我不匹配“1”，但它确实匹配“\d”。所以这显然不是我想要的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:19:12.097

所以答案似乎是GCC4.7 STL中的实现是不完整的。谢谢大家的意见。

[与 c++11 正则表达式不匹配](https://stackoverflow.com/questions/11269766/no-matches-with-c11-regex)

谢谢你和内森恩斯特！

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-22T16:22:05.140

为什么不抓住它？

```
#include <regex>
#include <iostream>

int main(int, char**){
    try {
        std::regex re("\\d");
    } catch(std::exception const& e) {
        std::cout << e.what() << "\n";
    }
} 
```

# itextsharp - 使用 iTextSharper 保存新的 PDF 文件时，FormFlatning 不起作用

> ID：15575084
> 
> 赞同：-1
> 
> 时间：2013-03-22T16:17:26.583
> 
> 标签：itextsharp

我正在尝试在现有 PDF 文档中编辑（填写文本表单字段）。但我想保存它并留给用户稍后编辑的选项。

使用 AcroFields（来自 PdfStamper）设置字段值后，我将 FormFlatning 设置为 False，但在打开新 PDF 后，我无法编辑字段。

如何让文件保持解锁状态？

请注意，原始文件是完全可编辑的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T19:54:30.980

我处于同样的情况......使用的代码是：

```
using (FileStream outFile = new FileStream("c:\\result.pdf", FileMode.Create))
        {
            PdfReader pdfReader = new PdfReader("c:\\D300.pdf");
            PdfStamper pdfStamper = new PdfStamper(pdfReader, outFile);

            AcroFields fields = pdfStamper.AcroFields;
            //rest of the code here
            fields.SetField("an_r", "2013");
            fields.SetField("luna_r", "2");

            pdfStamper.FormFlattening = false;
            pdfStamper.Close();
            pdfReader.Close();
        } 
```

# xaml - Windows Phone 应用程序中的文本框滚动不起作用

> ID：15575090
> 
> 赞同：2
> 
> 时间：2013-03-22T16:17:43.713
> 
> 标签：xaml, scroll, windows-phone

我在 Windows Phone 应用程序中有一个页面。此页面相当“高”。因此，整个页面都包含在一个`ScrollViewer`. 页面底部是一个`TextBox`. 此 TextBox 旨在成为`TextBox`带有`TextWrapping="Wrap"`. 我需要用户能够在其中上下滚动`TextBox`以查看他们输入的内容。但是，我无法在其内部滚动`TextBox`。相反，当我尝试滚动时，整个页面都会滚动。我该如何补救？但是我尝试添加`ScrollViewer.VerticalScrollBarVisibility="Auto"`，这似乎也不起作用。这是我的 XAML 的摘录。

```
<Grid x:Name="LayoutRoot" Background="{StaticResource PhoneBackgroundBrush}">
  <Grid.RowDefinitions>
    <RowDefinition Height="Auto"/>
    <RowDefinition Height="*"/>
  </Grid.RowDefinitions>

  <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
    <TextBlock x:Name="ApplicationTitle" Text="APPNAME" Style="{StaticResource PhoneTextNormalStyle}" />
    <TextBlock x:Name="PageTitle" Text="{Binding Path=PageTitle}" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
  </StackPanel>

  <ScrollViewer Grid.Row="1">
    <Grid x:Name="ContentPanel" Margin="12,0,12,0">
       ...
      <TextBox x:Name="bodyTextBox" Text="{Binding Path=Body, Mode=TwoWay}" Height="145"  TextWrapping="Wrap" InputScope="Text" Grid.Row="6" MaxLength="1024" Margin="0,-8,0,0" />
    </Grid>
  </ScrollViewer>
</Grid> 
```

感谢您提供的任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T20:30:37.763

以我的经验，这通常是由于在某处错误地使用了“auto”高度标签或“starSizing”高度标签造成的。我会尝试为相关元素（尤其是您的 RowDefinition）设置固定高度并看到这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T19:37:15.580

要拥有一个滚动的多行文本框，您不需要使用滚动查看器，您只需启用acceptreturn、textwrapping="wrap"、maxheight="160"（查看多行）加上VerticalScrollBarVisibility="Visible"。

要查看文本框中的滚动，请单击并按住按钮，然后出现插入符号，现在上下移动它，它将滚动浏览文本框。

# iphone - 使用 UIViewAnimations 处理动画链的最佳方法

> ID：15575091
> 
> 赞同：8
> 
> 时间：2013-03-22T16:17:51.040
> 
> 标签：iphone, ios, objective-c, uiviewanimation, uicolor

我正在构建一个 iOS 应用程序，其中我需要通过选择颜色来将视图的 backgroundColor 设置为动画。在我的 viewDidLoad 方法中，我基本上是使用以下内容触发一系列 UIView 动画。

```
-(void) beginFirstStageBackgroundAnimation
{
    [UIView animateWithDuration: 3.0f
                          delay: 3.0f
                        options: UIViewAnimationOptionTransitionCrossDissolve
                     animations:^{
                         self.view.backgroundColor = [UIColor colorWithRed: 251./255 green:203./255 blue:147./255 alpha:1.0];
                     }
                     completion:^(BOOL finished){
                         [self secondStageBackgroundAnimation];
                     }
     ];
} 
```

完成处理程序触发包含下一种颜色的第二个方法....

```
-(void) secondStageBackgroundAnimation
{
    [UIView animateWithDuration: 3.0f
                          delay: 3.0f
                        options: UIViewAnimationOptionTransitionCrossDissolve
                     animations:^{
                         self.view.backgroundColor = [UIColor colorWithRed:251./255 green:224./255 blue:96./255 alpha:1.0];
                     }
                     completion:^(BOOL finished){
                         [self thirdStageBackgroundAnimation];
                     }
     ];
} 
```

依此类推……直到在第七个动画中我调用`[self beginFirstStageBackgroundAnimation];`完成以再次开始该过程。

当我使用后退按钮离开视图时，在 viewDidDisappear 中或当显示器上的计时器结束时，我会运行`[self.view.layer removeAllAnimations];`以完全摆脱动画。但是，该应用程序完全按预期运行和工作，但在离开视图并运行一个整体后似乎崩溃了，虽然我不知道为什么它似乎与这个动画链有关。

是否有更好的解决方案可以每 3 秒以 3 秒的延迟为视图的 backgroundColor 设置动画？

并且`[self.view.layer removeAllAnimations];`真的做我想做的事吗？

编辑：我离开视图的代码如下：

```
-(void) backBtnPressed:(id)sender
{
    [self stopAudio]; // stop audio that is playing.
    [self.view.layer removeAllAnimations]; // remove all animations?
    [self.navigationController popViewControllerAnimated: YES]; // pop view from stack
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T17:14:27.663

我认为要走的路是以参数方式表示您希望在每个动画中发生的事情（在这种情况下只是一种颜色），然后将这些参数保存在一个数组中。该数组就像您的动画待办事项列表：

```
@property(strong, nonatomic) NSArray *animationTodo; 
```

我们还需要跟踪我们在列表中的位置。使用加框 (NS) 数字，以便我们可以将“不设置动画”表示为 nil，与索引零不同：

```
@property(strong, nonatomic) NSNumber *animationIndex; 
```

数组用颜色初始化：

```
self.animationTodo = [NSArray arrayWithObjects:[UIColor redColor], [UIColor greenColor], ... nil]; 
```

现在可以将动画压缩为单个方法：

```
- (void)animate {

    if (!animationIndex) return;
    NSInteger index = [animationIndex intValue];
    [UIView animateWithDuration:3.0 animations:^{
        self.view.backgroundColor = [animationToDo objectAtIndex:index];
    } completion:^(BOOL finished) {
        NSInteger nextIndex = (index==self.animationTodo.count-1)? 0 : index+1;  // advance index in a ring
        self.animationIndex = [NSNumber numberWithInt:nextIndex];
        // schedule the next one in 3s
        [self performSelector:@selector(animate) withObject:nil afterDelay:3.0];
    }];
} 
```

执行选择器让您声明延迟，并且还具有每次启动下一个动画时不结束堆栈的积极效果。

现在停止也很简单。在视图消失之前以及您希望停止的任何其他时间执行此操作。

```
- (void)stopAnimating {

    self.animationIndex = nil;
    [NSObject cancelPreviousPerformRequestsWithTarget:self];
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T16:42:27.140

您可以尝试使用`CAAnimation`我认为您可以更轻松地管理颜色和动画

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    NSArray *colors = @[[UIColor greenColor],
                        [UIColor redColor],
                        [UIColor blueColor],
                        [UIColor yellowColor],
                        [UIColor orangeColor]
                        ];
    NSMutableArray *animations = [NSMutableArray new];
    float colorAnimationDuration = 3.0f;
    for (int i = 0; i < colors.count; i++)
    {
        CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"backgroundColor"];
        animation.toValue = (id)[[colors objectAtIndex:i] CGColor];
        animation.duration = colorAnimationDuration;
        animation.beginTime = i * colorAnimationDuration;
        animation.removedOnCompletion = NO;
        animation.fillMode = kCAFillModeForwards;

        [animations addObject:animation];
    }

    CAAnimationGroup *animationsGroup = [CAAnimationGroup new];
    animationsGroup.duration = colors.count * colorAnimationDuration;
    animationsGroup.repeatCount = HUGE_VALF;
    animationsGroup.animations = animations;

    [self.view.layer addAnimation:animationsGroup forKey:@"myAnimations"];

}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
    [self.view.layer removeAnimationForKey:@"myAnimations"];
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T16:37:41.520

尝试在每个动画方法中添加一个检查，如下所示：

```
-(void) secondStageBackgroundAnimation
 {
 if (self.view.superview){
    [UIView animateWithDuration: 3.0f
                          delay: 3.0f
                        options: UIViewAnimationOptionTransitionCrossDissolve
                     animations:^{
                         self.view.backgroundColor = [UIColor colorWithRed:251./255 green:224./255 blue:96./255 alpha:1.0];
                     }
                     completion:^(BOOL finished){
                         [self thirdStageBackgroundAnimation];
                     }
     ];
 }
} 
```

您可以在“使用后退按钮离开视图”的位置发布代码吗？问题可能在那里...

# vba - 使用 VBA 将 MS 访问报告导出到 MS Word

> ID：15575092
> 
> 赞同：2
> 
> 时间：2013-03-22T16:17:51.577
> 
> 标签：vba, ms-access

我正在做一个简单的 vba 脚本来查找文件。如果它存在，则将其删除。然后它转到 DoCmd.OutputTo acOutputReport。下面是我正在使用的实际代码的示例。我遇到的问题是当我将自动打开设置为 true 时。我希望文件在导出报告后打开。但是我发现由于某种原因程序停止并会在那里至少停留 5 到 10 分钟，然后它会出错，说远程程序无法完成。出现错误后，文件无论如何都会打开，没有明显的错误...当我将自动打开更改为 false 时。通过手动打开报告，我可以在大约 3 到 5 秒后打开报告。有什么我不知道或找不到导致这个延迟问题的东西吗？

示例代码 - 有些事情可能在语法上是错误的，因为我面前没有代码。但它仍然应该传达我在做什么。

```
Dim strFile As String
Dim strCon As String
Dim strSQL As String
Dim cnn As Access.Application

strFile = "C:Myfile.rtf"
If Len(Dir(strFile)) Then
Kill strFile
End If

'access connection stuff here

with cnn
     'dont display messages code
     'active connection to my database code
      DoCmd.OutputTo acOutputReport, strFile, acFormatRTF, OutputFile, True
      .Quit
End With 
```

所以我再次遇到的问题是，我似乎无法在访问用报告填充文件后自动打开文件。如果您知道的话，我只是想提高性能或找到解决方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:31:10.460

在从 Access 2007 导出的应用程序中，我将导出操作保存为导出规范并使用：

`CurrentProject.ImportExportSpecifications(NameOfSpecification).Execute False`

然后我用

```
Set AppWord = CreateObject(Class:="Word.Application") ' create an instance of Word

Set Doc = AppWord.Documents.Open(NameOfDocument)

AppWord.Visible = True                      ' instance is invisible by default 
```

`DoCmd`如果有 VBA 方式，我倾向于避免这样做：VBA 给了我更多的控制权。

# facebook - 带有 Facebook 源对话框的自定义共享按钮 - 跟踪共享？

> ID：15575094
> 
> 赞同：1
> 
> 时间：2013-03-22T16:17:53.477
> 
> 标签：facebook, share

我创建了一个网页，该网页将在 Facebook 内部用作选项卡。因此，用户可以单击自定义按钮并将其发布到他们的墙上，我使用 Feed 对话框创建了一个自定义共享按钮（下面的 Facebook 示例代码）。

```
https://www.facebook.com/dialog/feed?
app_id=458358780877780&
link=https://developers.facebook.com/docs/reference/dialogs/&
picture=http://fbrell.com/f8.jpg&
name=Facebook%20Dialogs&
caption=Reference%20Documentation&
description=Using%20Dialogs%20to%20interact%20with%20users.&
redirect_uri=https://mighty-lowlands-6381.herokuapp.com/ 
```

是否有可能找出有多少人将此帖子分享到他们的墙上？我们想在此页面被分享 1000 次时发布一些内容，但不知道如何计算或监控分享次数。是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:34:32.807

是的，不是那样做，而是使用 javascript SDK

```
var obj = {
  method: 'feed',
  link: ,//yourlink
  picture: ,//the picture you want for the caption
  name: ,
  caption: ,
  description: ,
  display: 'popup'
};

function callback(response) {
   //here you can check the response and see if it was shared
   if (response && response.post_id){
     //then do an ajax request that increases the share count for example
   }
}

FB.ui(obj, callback); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T23:15:56.990

回调只有一个 response_id，您确实可以检查它是否已共享，但如果您在一页上有多个共享按钮，则似乎无法知道它来自哪里以及要增加什么计数器。

最好的祝福

# javascript - 为什么当你返回 this.each 时，你必须在 jQuery 中重新包装这个

> ID：15575099
> 
> 赞同：0
> 
> 时间：2013-03-22T16:18:14.683
> 
> 标签：javascript, jquery

如果已经有人问过这个问题，我深表歉意，但我在任何地方都找不到答案。

我创建了一个基本的插件外壳。

你可以在这里找到代码；

[http://codepen.io/anon/pen/dlhjL](http://codepen.io/anon/pen/dlhjL)

我的问题是，为什么我必须在每个函数内部再次将其重新包装在 jQuery 中？

当我初始化该方法时，它已经包含在 jQuery 中，例如 $('p').myPlugin();

有没有办法解决这个问题？

乙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:22:15.937

`.each()`只给回调一个普通的 DOM 元素。所以，在`.each()`回调内部，如果你想使用一个 jQuery 对象，你必须从它传递的 DOM 元素中创建一个。

插件本身以`this`宿主 jQuery 对象开始，这就是您可以这样做的原因`this.each()`，但在遍历宿主 jQuery 对象中的每个 DOM 元素时，它会`.each()`更改为回调内的每个连续 DOM 元素。`this`

这是一些注释：

```
(function($) {

  $.fn.myPlugin = function() {

      // "this" here is the incoming jQuery object and thus
      //    you can call this.each() to iterate each item in the jQuery object

      return this.each(function() {

          // "this" here is each successive DOM object in the jQuery object
          //    because of how .each() works.
          // If you want to be able to use a jQuery object here, you have
          //    to create one as this code does

          $(this).css('background', 'red');

      });
  };

}(jQuery)); 
```

在这种特殊情况下，您实际上并不需要，`.each()`因为`.css()`它会为您对 jQuery 对象中的所有 DOM 元素进行迭代。你可以这样做：

```
jQuery.fn.myPlugin = function() {
    return this.css('background', 'red');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:26:27.240

包装的是所有段落元素，而在`.each`回调中同时对所有元素进行操作没有任何意义。

您通常不需要 jQueryify 被迭代的元素，在这种情况下，您可以编写

```
return this.css("background-color", "red"); 
```

# python - 通过 YouTube 数据 API 上传的视频状态始终为“处理中”（Python）

> ID：15575100
> 
> 赞同：3
> 
> 时间：2013-03-22T16:18:15.280
> 
> 标签：python, youtube

我正在使用 YouTube 数据 API（在 python 中）上传视频。视频上传成功，我得到一个 YouTubeVideoEntry 对象。然后，我按照[此处](https://developers.google.com/youtube/1.0/developers_guide_python#UploadStatus)的建议轮询上传视频的状态，但即使在视频完成处理之后（我使用 Youtube.com 上的视频管理器仪表板进行验证），CheckUploadStatus 仍会继续返回（'处理'，''）。这是我的代码：

```
 upload_status = yt_service.CheckUploadStatus(new_entry)
    state = upload_status[0]

    while state == "processing":
        upload_status = yt_service.CheckUploadStatus(new_entry)
        state = upload_status[0]
        time.sleep(5) 
```

此循环永远不会退出，因为 upload_status[0] 始终是“处理中”

# ios - 使用 AFNetworking 限制 POST

> ID：15575109
> 
> 赞同：0
> 
> 时间：2013-03-22T16:18:39.717
> 
> 标签：ios, objective-c, afnetworking

我正在尝试使用[AFNetworking](http://afnetworking.github.com/AFNetworking/Protocols/AFMultipartFormData.html#//api/name/throttleBandwidthWithPacketSize%3adelay%3a)发布 XML-RPC 请求。AFNetworking 库仅提供对表单数据的限制（[`throttleBandwidthWithPacketSize:delay:`](http://afnetworking.github.com/AFNetworking/Protocols/AFMultipartFormData.html#//api/name/throttleBandwidthWithPacketSize%3adelay%3a)on `AFMultipartFormData`）。

如何限制常规`NSData`POST 请求？

这是我当前的代码：

```
XMLRPCEncoder* encodObject = [[XMLRPCEncoder alloc] init];
[encodObject setMethod:function withParameters:[NSArray arrayWithArray:parametrs]];

NSMutableURLRequest *request = [afClient requestWithMethod:@"POST"
                                                      path:path
                                                parameters:Nil];

NSData* body = [[encodObject encode] dataUsingEncoding:NSUTF8StringEncoding];
[request setHTTPBody:bodyRequest];

AFHTTPRequestOperation* operationAf =
    [[AFHTTPRequestOperation alloc] initWithRequest:request];

[operation setCompletionBlockWithSuccess:
    ^(AFHTTPRequestOperation *operation, id responseObject) {
        NSString* response = operation.responseString;
        NSLog(@"response %@,response");

    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"Error%@", [error localizedDescription]);

    }]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T03:35:26.740

`AFHTTPClient -multipartFormRequestWithMethod:...`是一种方法，它采用带有代理对象的块，该代理对象为关联的请求构造自定义输入流。`throttleBandwidthWithPacketSize`是该块代理对象上的一种方法，用于防止 3G 网络上的缓冲区溢出，并且仅在发布图像等二进制数据时才真正需要。

Using`setHTTPBody:`会覆盖使用 完成的任何操作`-multipartFormRequestWithMethod:`，因为它将为 构造的输入流替换为`NSURLRequest`HTTP`NSData`正文。你应该这样做，除非你真的需要将它作为一个多部分请求发送（即带有图像/文件附件）。

如果您确实需要多部分，请在构造函数块中使用[-appendPartWithFormData:name:。](http://afnetworking.github.com/AFNetworking/Protocols/AFMultipartFormData.html#//api/name/appendPartWithFormData%3aname%3a)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:28:00.900

我认为`AFNetWorking`不支持像这样的节流`ASIHttpRequest`，它仅在使用该`multipartFormRequestWithMethod`函数发送二进制文件时才使用节流:)

# sybase - Sybase Query：如何从日期获取月份

> ID：15575112
> 
> 赞同：1
> 
> 时间：2013-03-22T16:18:46.340
> 
> 标签：sybase

我在报告中有一个特定的场景，我想以特定格式获得一个月。

```
Input : 
Month : 2 Digit OR 1 Digit OR 0

Expectation:
If I pass 2 Digit : e.g. 10 o/p should be 10
If I pass 1 Digit : e.g. 1  o/p should be 01
If I pass 0       : e.g. 0  o/p should be blank

but I need help to when I pass 0 and I get Blank.

Please Help / Advice
AT 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T20:04:25.123

我认为这对你有用：

```
SELECT CASE
         WHEN @month = 0 THEN ''
         ELSE RIGHT ('0' + @month, 2)
       END AS Month 
```

# delphi - 重新启动 Windows 资源管理器

> ID：15575121
> 
> 赞同：0
> 
> 时间：2013-03-22T16:19:19.500
> 
> 标签：delphi

我有一个带有一个按钮的表单。我需要在 Button1.Click 上重新启动 Windows 资源管理器。我用谷歌搜索了它，但我没有得到任何适当的解决方案。所有的电话，该解决方案适用于 WinXP、Vista 但不适用于 Win7。请提供准确的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:28:43.907

在 TlHelp32 上添加使用

在 Windows 7 或更高版本中，此功能有效：

```
function KillTask(ExeFileName: string): Integer;
const
  PROCESS_TERMINATE = $0001;
var
  ContinueLoop: BOOL;
  FSnapshotHandle: THandle;
  ProcessHandle: Cardinal;
  FProcessEntry32: TProcessEntry32;
begin
  Result := 0;
  FSnapshotHandle := CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0); 

  if FSnapshotHandle = INVALID_HANDLE_VALUE then 
    RaiseLastOSError;
  try
    FProcessEntry32.dwSize := SizeOf(FProcessEntry32);
    ContinueLoop := Process32First(FSnapshotHandle, FProcessEntry32);

    while Integer(ContinueLoop) <> 0 do
    begin
      if ((UpperCase(ExtractFileName(FProcessEntry32.szExeFile)) =
        UpperCase(ExeFileName)) or (UpperCase(FProcessEntry32.szExeFile) =
        UpperCase(ExeFileName))) then
      begin 
        ProcessHandle:= OpenProcess(PROCESS_TERMINATE, BOOL(0),     FProcessEntry32.th32ProcessID), 0);
        if ProcessHandle > 0 then
        begin
          try  
            Result := Integer(TerminateProcess(ProcessHandle);
          finally
            CloseHandle(ProcessHandle);
          end; 
        end
        else
          RaiseLastOSError;   
      end;
      ContinueLoop := Process32Next(FSnapshotHandle, FProcessEntry32);
    end;
  finally 
    CloseHandle(FSnapshotHandle);
  end; 
end; 
```

它杀死并重新开始！

```
KillTask('explorer.exe'); 
```

在以前的版本中，它只会杀人！！

# android - 如何在 LinearLayout 单元格中对齐两个 TextView？

> ID：15575122
> 
> 赞同：4
> 
> 时间：2013-03-22T16:19:20.890
> 
> 标签：android, android-linearlayout, textview, android-gridlayout

我有一个垂直列表（垂直线性布局）。在每个单元格中，我有两个 EditText 字段，彼此相邻。第一个应该对齐到单元格的左侧，第二个应该对齐到单元格的中间，基本上导致两列彼此相邻。我以为我使用了两列 GridLayout。然而，令我惊讶的是，第二个 EditText 与单元格的右侧对齐，而不是单元格的中间。我错了什么？

```
 <GridLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:alignmentMode="alignBounds"
    android:columnCount="2" >

    <TextView
        android:id="@+id/sourceLanguage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="left|center_vertical"
        android:text="test1"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#FF3366"
        android:textIsSelectable="true" />

    <TextView
        android:id="@+id/targetLanguage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:gravity="left|center_vertical"
        android:text="test2"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#993366"
        android:textIsSelectable="true" />

</GridLayout> 
```

![在此处输入图像描述](../Images/33f952f270fe74b7fc201e765a6df543.png) 几乎就在那里，但没有退出......除了第二列不完全左对齐。

这是想要的结果！！！

![在此处输入图像描述](../Images/ec4f769033ba860ea68b3004accf4ef8.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-22T16:23:27.260

使用`LinearLayout`和`weightSum`。我修改了您的代码（见下文）。请注意在 中添加`weightSum`的、 的和的更改的`LinearLayout`宽度：`TextViews``layout_weights``TextViews`

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="2">

    <TextView
        android:id="@+id/sourceLanguage"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="left|center_vertical"
        android:text="test1"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#FF3366"
        android:textIsSelectable="true" />

    <TextView
        android:id="@+id/targetLanguage"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="left|center_vertical"
        android:text="test2"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#993366"
        android:textIsSelectable="true" />

</LinearLayout> 
```

# php - PHP数组索引错误

> ID：15575128
> 
> 赞同：0
> 
> 时间：2013-03-22T16:19:36.707
> 
> 标签：php, arrays, operator-keyword

我在我的计算机上本地安装了 Apache/PHP/MySQL 以快速测试内容。我目前正在做的一件事是一个六边形图表，用于通过 GD 库动态创建的游戏中的统计数据。

在我的笔记本电脑上，一切正常，因为我得到了一个不错的结果。 ![图像1](../Images/2f11db2a3361c7f56773b78fb4b21037.png)

但是，当我将它部署到我购买的服务器上时，我收到了一个语法错误：

`Parse error: syntax error, unexpected '['`

来自这个声明：

```
$hexstat = new CL2HexStatPoints( 
    CL2StatsRepository::GetClassesFromJson()[$id], <- *error here*
    new CHexagon( CVector2::Create( constant("RADIUS"), constant("RADIUS") ) 
    ) 
); 
```

它似乎不喜欢那里的索引运算符。该函数本身解析一个 json 文件并返回一个对象数组，其中包含有关播放器类的属性。我已经通过使用 var_dump 确认它确实是一个数组。但是，如果我这样编程：

```
$array = CL2StatsRepository::GetClassesFromJson();
var_dump( $array[$id] ); // this is ok
var_dump( CL2StatsRepository::GetClassesFromJson()[$id] ); // this isn't 
```

第一个语句可以，第二个语句不行。我工作电脑上的PHP版本是5.4.12，服务器上的PHP版本是5.3.22。我假设在版本之间涉及操作员的某些事情发生了变化，或者我可能需要更改一个设置。我还没有真正能够找到任何信息或者搜索，有没有人可以解释为什么会这样？非常感谢。

编辑：我已经修复了与旧 PHP 版本兼容的代码，所以从现在开始我会牢记这一点。如果有人有兴趣看到它真正起作用：[http ://www.qzmpox.nl/l2/hexagon/hexagontest.php](http://www.qzmpox.nl/l2/hexagon/hexagontest.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:21:43.950

在 PHP < 5.4 中，您无法立即访问结果的“索引”，这就是为什么第二段代码无法在您的服务器上运行的原因

# c# - 在restful json web service c#中发布数据

> ID：15575131
> 
> 赞同：0
> 
> 时间：2013-03-22T16:19:38.680
> 
> 标签：c#, json, postdata

如何在 json 中发布数据？当我不断收到我没有传递参数的错误消息时。这是我的 C# 代码：

触发按钮：url = szAPIURL + url;

```
WebClient postWithParamsClient = new WebClient();
postWithParamsClient.UploadStringCompleted += 
  new UploadStringCompletedEventHandler(postWithParamsClient_UploadStringCompleted);

postWithParamsClient.Headers["Content-Length"] = postdata.Length.ToString();
postWithParamsClient.UploadStringAsync(new Uri(url), 
                                       "POST", 
                                       "?username=name123&password=pass123");

private void postWithParamsClient_UploadStringCompleted(object sender, 
                                                UploadStringCompletedEventArgs e)
{
    if (e.Error == null)
      MessageBox.Show("WebClient: " + e.Result);
    else
      MessageBox.Show("WebClient: " + e.Error.Message);
} 
```

这是我从电话中收到的：

`[{"error_code":2,"error_messages":["You must specify login user name and password"],"tokenid":"","userid":0}]`

这是原始的ajax api：

var msgData = {};
msgData['username'] = szUserName;
msgData['password'] = szEncryptedPassword;

$.ajax({
url: szAPIURL + "Authenticate",
type: 'POST',
// 数据需要发送到服务器。
//data: JSON.stringify({data:"test"}),
data: msgData,
/*dataType: "jsonp",*/
dataType: "json",

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:16:20.887

在做同样的事情时，我需要做一些事情（尽管我使用的是 UploadString 而不是 UploadStringAsync）。

首先，我需要将其添加到 Headers 集合中：

```
postWithParamsClient.Headers.Add("Content-Type", "application/json"); 
```

然后就像 Jevgenij 提到的那样，您必须实际将数据作为 JSON 字符串发送，如下所示：

```
postWithParamsClient.UploadStringAsync(new Uri(url), 
                                   "POST", 
                                   "{ \"username\": \"name123\", \"password\": \"pass123\" }"); 
```

**更新：**如果您不传递第二个参数`"POST"`，该方法将自动将其作为 POST 提交给您。

另外，顺便说一句，由于 WebClient 是 IDisposable，我建议在 using 语句中使用它，例如：

```
using (postWithParamsClient = new WebClient()) { } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:42:55.483

不确定，但 的第三个参数`UploadStringAsync`是您要发送的实际数据。可能你想把你的`"?username=name123&password=pass123"`进入网址？

像这样的东西：

```
client.UploadStringAsync(new Uri(string.Format("{0}?{1}", url, "username=name123&password=pass123")), "POST", "<your data>"); 
```

# ruby-on-rails - 需要将参数从控制器传递到 .html.erb 文件

> ID：15575132
> 
> 赞同：0
> 
> 时间：2013-03-22T16:19:46.257
> 
> 标签：ruby-on-rails

我的控制器代码：

```
def description  
   product = @products.find(params(:id))  
end 
```

这是在控制器中，我必须将产品变量传递给`description.html.erb`. 我怎样才能做到这一点？

它给了我一个`ArgumentError`in `StoreController#description`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:29:07.430

一般来说，控制器中的变量传递给视图的方式是将它们分配为实例变量，这些变量是`@`在它之前定义的变量，例如`@products`. 如果要`product`传递变量，则必须将其设置为`@product`，如下所示：

```
@product = @products.find ... 
```

在这种特殊情况下，您甚至会在调用视图之前收到错误消息。你的控制器动作中唯一的一行就是抛出这个。

确保`@products`实际设置。它没有在`#description`方法中设置，所以它是在此处设置的`before_filter`吗？`@products`能打电话吗`#find`？在 Rails 中，我们经常只看到调用此方法的模型，例如`Product.find(params[:id])`.

此外，我看到您正在使用`params`常规括号而不是方括号访问您的哈希。在 Ruby 中，您使用方括号。仅此一项可能就是导致错误的原因。尝试将其更改为：

```
@product = @products.find(params[:id]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:23:13.713

您可以使用将变量从控制器传递到视图`@`

控制器中的示例：

```
@my_var = 'toto' 
```

在视野中

```
<%= @my_var %> 
```

# c - 如何使用 C 语言在整个程序中仅使用一个变量接受 5 个数字并打印总和？

> ID：15575134
> 
> 赞同：-3
> 
> 时间：2013-03-22T16:19:50.500
> 
> 标签：c, input, io, output

我在编程比赛中遇到过这个问题，但是找不到答案，谁能帮我解决这个问题？？？输入 << 5 个数字输出 << 他们的总和

约束<<整个程序中只能使用一个变量（并且不能从命令提示符给出输入）提前谢谢！！！

是的，比赛结束了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:42:09.867

这是我的解决方案，数组大小为 2：

```
main( ) {
  int a[ 2 ];
  a[ 0 ] = 0;
  scanf( "%d", a+1 ); a[ 0 ] += a[ 1 ];
  scanf( "%d", a+1 ); a[ 0 ] += a[ 1 ];
  scanf( "%d", a+1 ); a[ 0 ] += a[ 1 ];
  scanf( "%d", a+1 ); a[ 0 ] += a[ 1 ];
  scanf( "%d", a+1 ); a[ 0 ] += a[ 1 ];
  printf( "%d\n", a[ 0 ] );
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:35:23.670

```
void main() {
    int s[3] = {0};
    while((*s)++<5) {
        printf("Enter number n%d: ",*s);
        scanf("%d",s+1);
        *(s+2) += *(s+1);
    }
    printf("The sum is %d\n",*(s+2));
} 
```

# jquery - 如何通过 c# 从 json 响应中删除 d:？

> ID：15575135
> 
> 赞同：3
> 
> 时间：2013-03-22T16:19:54.347
> 
> 标签：jquery, json, web-services, asmx

我正在使用 Visual Studio C# 中的 asmx Web 服务。示例代码

```
WebRequest request = WebRequest.Create(WholeURL);
request.ContentType = "application/json; charset=utf-8";
request.Method = "POST";
request.ContentLength = postData.Length;

using (StreamWriter requester = new StreamWriter(request.GetRequestStream()))
{
requester.Write(postData);
requester.Close();
}

//Get the response
WebResponse response = request.GetResponse();
// Get the stream containing content returned by the server.
Stream dataStream = response.GetResponseStream();
// Open the stream using a StreamReader for easy access.
StreamReader reader = new StreamReader(dataStream);
// Read the content.ok
string responseFromServer = reader.ReadToEnd(); 
```

如何从 json 响应中删除 d

我的json响应是：{“d”：-1}我只需要-1。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:31:33.670

我认为您只需要解析 JSON，并获取 key="d" 处的值。

使用[JSON.NET](http://james.newtonking.com/projects/json/help/index.html?topic=html/SerializingCollections.htm)

```
string json = @"{""key1"":""value1"",""key2"":""value2""}";
Dictionary<string, string> values = JsonConvert.DeserializeObject<Dictionary<string, string>>(json);

Console.WriteLine(values.Count);    // 2
Console.WriteLine(values["key1"]);  // value1 
```

# image - html5画布，如何导出2x图像？

> ID：15575139
> 
> 赞同：0
> 
> 时间：2013-03-22T16:20:00.170
> 
> 标签：image, html, canvas, export, hdpi

我设计了一个带有 html5 画布的网络应用程序。要导出图像，代码如下：

```
var img = canvas.toDataURL("image/png"); 
```

有什么方法可以导出 2x 图像吗？

它适用于苹果视网膜显示器等 hdpi 显示器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:34:58.950

是的，有几种方法，但每次拉伸非矢量图像时，都会出现一些像素失真。但是，如果它只有两倍的大小，您可以使用最近的邻居来摆脱它。下面的示例显示了两种不同的方法，一种只是拉伸图像，另一种使用最近邻，缩放因子为 2。

**[现场演示](http://jsfiddle.net/loktar/XTaxD/)**

```
var canvas = document.getElementById("canvas"),
    ctx = canvas.getContext("2d"),
    canvas2 = document.getElementById("canvas2"),
    ctx2 = canvas2.getContext("2d"),
    tempCtx = document.createElement('canvas').getContext('2d'),
    img = document.getElementById("testimg"),
    zoom = 2;

tempCtx.drawImage(img, 0, 0);
var imgData = tempCtx.getImageData(0, 0, img.width, img.height).data;

canvas.width = img.width * zoom;
canvas.height = img.height * zoom;;

// nearest neighbor
for (var x = 0; x < img.width; ++x) {
    for (var y = 0; y < img.height; ++y) {
        var i = (y * img.width + x) * 4;
        var r = imgData[i];
        var g = imgData[i + 1];
        var b = imgData[i + 2];
        var a = imgData[i + 3];
        ctx.fillStyle = "rgba(" + r + "," + g + "," + b + "," + (a / 255) + ")";
        ctx.fillRect(x * zoom, y * zoom, zoom, zoom);
    }
}

// stretched
ctx2.drawImage(img, 0, 0, 140, 140); 
```

[@phrogz 在这里](http://phrogz.net/tmp/canvas_image_zoom.html)也有一个很好的例子，展示了几种不同的方法可以完成图像大小调整。

# objective-c - CodeView 的 LineNumbers

> ID：15575143
> 
> 赞同：-1
> 
> 时间：2013-03-22T16:20:12.897
> 
> 标签：objective-c, xcode, cocoa

在 codeView 旁边表示 LineNumbers 的最佳方式是什么？例如. [_](http://www.sublimetext.com) 我在 xCode / cocoa 编程方面相对较新，因此感谢您的每一个帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:28:35.737

请参阅 NoodleSoft 的示例。 [http://www.noodlesoft.com/blog/2008/10/05/displaying-line-numbers-with-nstextview/](http://www.noodlesoft.com/blog/2008/10/05/displaying-line-numbers-with-nstextview/)

在过去的 WWDC 中也有一个很好的例子。在 developer.apple.com 上搜索 WWDC 视频和示例代码。具体查找示例代码：WWDC_2010_114 年份为 2010，会话为 114。

# google-tag-manager - 如何创建仅在我的网站主页上触发的规则？

> ID：15575145
> 
> 赞同：6
> 
> 时间：2013-03-22T16:20:17.317
> 
> 标签：google-tag-manager

我使用 Google 跟踪代码管理器，我正在尝试设置一个仅在我的网站主页上触发的规则。

问题是我不确定如何处理主页的所有 URL 排列。如何创建将处理的规则：

```
"http://" "https://" "http://www." "https://www." 
```

另外，我们使用Sitecore，支持多种语言，所以首页url也可以显示为：

```
"http://www.mysite.com/en" 
```

在访问者使用网站上的导航后，我不确定如何处理插入到 URL 路径中的文化标识符。

是否可以使用 OOTB Google 跟踪代码管理器规则来处理这种情况，或者我是否必须实施跟踪代码管理器数据层？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-05-20T06:37:01.223

以下规则将检查它是否是主页：

## `{{url}}`匹配正则表达式`^https?://(www\.)?mysite\.com/?(index\.html)?$`

`{{url}}`给出整个地址，而`{{url domain}}`只给出域和`{{url path}}`路径（包括初始正斜杠）。

这匹配`http`and `https`，有或没有`www`，最后有或没有`index.html`。它还匹配`mysite.com/`和`mysite.com`（末尾没有正斜杠）。如果您想在主页末尾检查 URL 排列，您可以执行以下操作：

`^https?://(www\.)?mysite\.com/?(en|es|fr)?$`等等

此外，不必转义正斜杠。事实上，对我来说，转义正斜杠打破了 GTM 中的射击规则......

见[http://en.wikipedia.org/wiki/Regular_expression](http://en.wikipedia.org/wiki/Regular_expression)

编辑：如果你想忽略查询字符串（这是一件好事，因为大多数广告都会`utm_source`在 url 中添加查询键等），你可以有这样的东西：

```
^https?://(www\.)?mysite\.com/?(index\.html)?/?(\?.*)?$ 
```

（注意`(\?.*)?`最后的）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T17:53:31.110

好的......所以在研究了谷歌标签管理器论坛之后，这可以通过为您的网站网址制定单独的网址“以”规则结尾，然后在您的网站网址上加上一个正斜杠，例如：

```
rule 1 : url ends with http://mysite.com

rule 2 : url ends with http://mysite.com/ 
```

我认为在我制定规则时，正是尾随的斜线使事情变得混乱。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-08T21:00:32.557

这是一种超级健壮的方式，可以通过任一协议知道它是您的主页，并允许使用一行正则表达式来使用反斜杠...

```
^https?://www.mydomain\.com\/?$ 
```

不确定为什么不必转义最初的双反斜杠，但它可以工作。本来预计`^https?:\/\/www.mydomain\.com\/?$`也许其他人知道:)

# java - 如何将具有复合 id 的对象连接到另一个具有复合 id 但复合 id 不同的对象上？（JPA 注释）

> ID：15575146
> 
> 赞同：0
> 
> 时间：2013-03-22T16:20:21.103
> 
> 标签：java, hibernate, jpa, annotations, jpa-2.0

您将如何仅使用 FOO_ID 将 bar 对象列表映射到 Foo 对象？

```
@Entity
@Table(name="FOO")
class Foo {
    @EmbeddedId
    private FooPK primaryKey;

    @OneToMany
    @JoinColumn(name="FOO_ID", referencedColumnName="FOO_ID") //does not work
    private List<Bar> bars;
}

@Embeddable
class FooPK {
    @Column(name="FOO_ID")
    private String id;

    @Column(name="FOO_SUB_ID")
    private String subId;
}

@Entity
@Table(name="BAR")
class Bar {
    @EmbeddedId
    private BarPK primaryKey;

    //other attributes and methods
}

@Embeddable
class BarPK {
    @Column(name="FOO_ID")
    private String id;

    @Column(name="BAR_ID")
    private String barId;

    @Column(name="BAR_SUB_ID")
    private String barSubId;
} 
```

我试过：@JoinColumn（如上）和@JoinTable 在另一个包含 FOO_ID 作为主键的表上。两者都不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:39:01.400

按照此处所述尝试： [http ://stackoverflow.com/questions/5305687/join-entity-with-composite-key](http://download.oracle.com/javaee/6/api/javax/persistence/MapsId.html)

`Foo`不做任何特殊的映射：

```
class Foo {
    @EmbeddedId
    private FooPK primaryKey;

    @OneToMany(mappedBy="foo")
    private List<Bar> bars;
} 
```

所以在另一边映射它：

```
class Bar {
    @EmbeddedId
    private BarPK primaryKey;

    @ManyToOne
    @MapsId("id")
    private Foo foo;
} 
```

# uml - 如何在用例中表示结果关系？

> ID：15575148
> 
> 赞同：1
> 
> 时间：2013-03-22T16:20:23.737
> 
> 标签：uml, use-case

我正在为一个 android 应用程序制作一个用例图，我想表示一个“结果”关系，但我不知道确切地使用什么。更清楚地说，我正在计算一些东西，并取决于我的结果我在计算别的东西，如何重新计算？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:39:11.020

用例图显示了一个不工作的目标，因为它使用了一个活动图或序列图。

# javascript - 为ajax加载图像

> ID：15575151
> 
> 赞同：0
> 
> 时间：2013-03-22T16:20:30.367
> 
> 标签：javascript, html, ajax

我是ajax的新手。在w3学校学习。现在我可以在网站上加载一部分。但是当加载即将发生时，我想在那里向用户显示加载图像。我在stackoverflow中搜索。也发现了一些问题，但他们正在使用一些其他类型的 ajax，这超出了我的知识范围。

这是我的代码

```
<script>
 function loadXMLDoc(a)
  {
     var xmlhttp;
     var temp = "myname.php?id=" + a;

     if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
             xmlhttp=new XMLHttpRequest();
        }
     else
        {// code for IE6, IE5
           xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
           xmlhttp.onreadystatechange=function()
          {
          if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
                 document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
            }
          }
   xmlhttp.open("GET",temp,true);
   xmlhttp.send();
 }
</script>

<h2>AJAX</h2>
  <button type="button" onclick="loadXMLDoc('1')">Request 1</button>
  <button type="button" onclick="loadXMLDoc('2')">Request 2</button>
  <button type="button" onclick="loadXMLDoc('3')">Request 3</button>
<div id="myDiv"></div> 
```

如果有人可以根据我的编码给我一个示例或链接，那将有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:26:19.990

创建一个`<img>`开始隐藏的元素，然后在调用 ajax 时显示它，完成后隐藏它。

```
<script>
 function loadXMLDoc(a)
  {
     var xmlhttp;
     var temp = "myname.php?id=" + a;

     // show the loading image
     document.getElementById("loading").style.display = "";

     if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
             xmlhttp=new XMLHttpRequest();
        }
     else
        {// code for IE6, IE5
           xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
           xmlhttp.onreadystatechange=function()
          {
          if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
                 // hide the loading image
                 document.getElementById("loading").style.display = "none";

                 document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
            }
          }
   xmlhttp.open("GET",temp,true);
   xmlhttp.send();
 }
</script>

<h2>AJAX</h2>

<img src="loading.gif" alt="Loading..." id="loading" style="display:none;" />

  <button type="button" onclick="loadXMLDoc('1')">Request 1</button>
  <button type="button" onclick="loadXMLDoc('2')">Request 2</button>
  <button type="button" onclick="loadXMLDoc('3')">Request 3</button>
<div id="myDiv"></div> 
```

为了将来参考，[Mozilla 开发网络](https://developer.mozilla.org/en/docs/AJAX)文档是纯 Javascript ajax 的一个很好的资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:27:43.497

1）在HTML文档中添加加载动画图像（img标签）并将其放置在您想要显示的位置，但是您通过设置将其隐藏在CSS中`display: none`

2）在你的xmlhttp.send（）之前，通过设置图像来显示图像`display: ''`

3）在`xmlhttp.onreadystatechange`回调函数中，再次隐藏图片表示加载完成。

# symfony - Symfony 2.2：更改序列化表单字段名称

> ID：15575152
> 
> 赞同：1
> 
> 时间：2013-03-22T16:20:31.737
> 
> 标签：symfony, symfony-2.2, jmsserializerbundle

我正在使用 jms 序列化程序包来序列化我们工作 api 中的表单错误。从用户注册 api 我们有一个这样构建的表单：

```
/**
 * Creates the form fields
 *
 * @param FormBuilderInterface $builder The form builder
 * @param array                $options The array of passed options
 */
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder->add('plainPassword', 'password', array('label' => 'asdasd'))
        ->add('name', 'text')
        ->add('email', 'email');
} 
```

并提交我们得到的错误信息：

```
"children": {
    "plainPassword": {
        "errors": [
            "This value should not be blank."
        ]
    }
} 
```

由于实体字段是plainPassword，是否可以将其命名为密码并分配给plainPassword 字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:26:04.850

刚刚找到它，只需使用 'property_path' 选项，这样：

```
$builder->add('password', 'password', array('property_path' => 'plainPassword')) 
```

# database - SSIS - 来自数据库的动态表达式

> ID：15575156
> 
> 赞同：0
> 
> 时间：2013-03-22T16:20:53.940
> 
> 标签：database, dynamic, ssis, expression

我正在研究`SSIS`需要保存文件的地方。但是这个文件的文件名以表达式格式存储在数据库中，例如`"TEST" + ".xml"`

当我检索表达式文件名时，我无法评估它来覆盖我的文件连接。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:40:22.393

首先将连接管理器设置为临时平面文件。创建后转到连接管理器的属性并选择表达式。编写连接字符串的表达式，将其更改为`="path\to\file\" + @var`. 您可能还需要在文件管理器和数据流任务上将延迟验证设置为 true。

[这里](http://beyondrelational.com/modules/2/blogs/106/posts/11113/ssis-dynamically-set-flat-file-connection-manager.aspx)还有一篇更详细的博客文章，诚然它使用平面文件作为源，但原理应该是相同的。

# sql - 从 3 个表中检索数据的查询

> ID：15575157
> 
> 赞同：0
> 
> 时间：2013-03-22T16:20:56.567
> 
> 标签：sql, oracle, plsql

我是 SQL 的新手，我对查询有疑问。

我有三张桌子：

1.  具有字段 cons_id_no、key_id 的消费者
2.  bm_bill 具有字段 key_id、bill_id_no、amt_payable、bill_date（它将包含消费者的所有账单金额和日期）
3.  mreceipt 具有字段 key_id、receipt_no、amt_paid、fine、pay_date（它将包含消费者的所有付款详细信息）

消费者表与 bm_bill 和 mreceipt 是一对多的关系。我想根据消费者的 cons_id_no 创建分类帐信息。它应该包含他的 cons_id_no、key_id、bill_id_no（最新）、bill_date（最新）、amt_payable（最新）、receipt_no（最新）、amt_paid（最新）、fine（最新）、pay_date（最新），为此我创建了以下内容询问

```
SELECT 
   c.key_id,
   c.cons_id_no consumerid, 
   b.bill_id_no billno,
   TO_CHAR(b.bill_date,'dd-Mon-YYYY') billdate,
   b.amt_payable,
   m.receipt_no receiptno, 
   TO_CHAR(m.pay_date,'dd-Mon-YYYY') paydate,
   m.amt_paid+m.fine amountpaid 
FROM 
   consumer c 

   LEFT OUTER JOIN (SELECT key_id, MAX(bill_date) AS maxDate FROM bm_bill GROUP BY key_id) maxBillDate 
   ON (maxBillDate.key_id = c.key_id)

   LEFT OUTER JOIN bm_bill b 
   ON (b.key_id = c.key_id AND b.bill_date = maxBillDate.maxDate) 

   LEFT OUTER JOIN (SELECT key_id, MAX(pay_date) AS maxPayDate FROM mreceipt GROUP BY key_id) maxMReceipt 
   ON (maxMReceipt.key_id = c.key_id)

   LEFT OUTER JOIN mreceipt m 
   ON (m.key_id = c.key_id AND m.pay_date = maxMReceipt.maxPayDate)

WHERE 
   c.cons_id_no='?'; 
```

我执行了查询，它给了我想要的结果。然后我注意到查询太慢了，发现在我的解决方案中我有：

```
SELECT key_id, max(bill_date) AS maxDate FROM bm_bill GROUP BY key_id 
```

这是从 bm_bill 中检索所有 key_ids 和 bill_dates，我只需要特定 key_id 的信息。最重要的是，我的解决方案中还有一个这样的查询。

因此我的问题是：有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:56:19.320

您将加入 2 个表（bm_bill 和 mreceipt）中的每一个两次。我要尝试的第一件事是更改您的查询以避免双重连接，看看它是否有区别，例如：

```
SELECT 
   c.key_id,
   c.cons_id_no consumerid, 
   b.bill_id_no billno,
   TO_CHAR(b.bill_date,'dd-Mon-YYYY') billdate,
   b.amt_payable,
   m.receipt_no receiptno, 
   TO_CHAR(m.pay_date,'dd-Mon-YYYY') paydate,
   m.amt_paid+m.fine amountpaid 
FROM 
   consumer c 

   LEFT JOIN (SELECT key_id,
   bill_id_no, bill_date,amt_payable,receipt_no receiptno , 
   ROW_NUMBER() OVER (PARTITION BY key_id ORDER BY bill_date DESC) as rn
   FROM bm_bill)b ON (b.key_id = c.key_id and b.rn =1)

   LEFT JOIN (SELECT key_id,
   pay_date , amt_paid, amt_paid, fine, 
   ROW_NUMBER() OVER (PARTITION BY key_id ORDER BY pay_date DESC) as rn
   FROM mreceipt) m ON (m.key_id = c.key_id and m.rn =1)

WHERE 
   c.cons_id_no='?'; 
```

如果这不起作用，您可以使用 Oracle“替代”SQLServer 来解决它- 您创建 2 个分别返回和的`OUTER APPLY`函数，然后加入它们。`MAX(bill_date)``MAX(pay_date)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:38:20.657

1-而不是使用`MAX`我会建议你`ORDER`使用你的数据`DESC`，并`GROUP`使用`TOP`函数而不是`MAX`; 也代替 a`LEFT JOIN`我会使用 a `WHERE X IN (...)`。

2-我不知道您的数据有多大，但如果您的数据有数十万行，那么将分组结果存储在临时索引表中可能会缩短您的处理时间。

3-此外，您需要多久运行一次此查询（新鲜度）是相关的：如果您不需要过去几分钟的最新结果（而是当天的结果），那么一定要使用临时存储，您可以将它用于一天中的所有查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T17:42:31.727

好问题！这是一个硬汉，因为它需要像`ROW_NUMBER`or这样的分析函数，`RANK`但是两个外部连接复杂的事情。`DENSE_RANK`虽然成功了。这是我想出的：

```
select * from (
  select
    c.key_id,
    c.cons_id_no consumerid,
    to_char(m.pay_date, 'dd-Mon-YYYY') paydate,
    m.receipt_no receiptno,
    m.amt_paid+m.fine amountpaid,
    dense_rank() over
      (order by m.pay_date desc nulls last) as paydaterank,
    to_char(b.bill_date, 'dd-Mon-YYYY') billdate,
    b.bill_id_no billno,
    b.amt_payable,
    dense_rank() over
      (order by b.bill_date desc nulls last) as billdaterank
 from customer c
 left outer join mreceipt m on c.key_id = m.key_id
 left outer join bm_bill b on c.key_id = b.key_id
 where c.cons_id_no = '?'
)
where paydaterank = 1 and billdaterank = 1 
```

我在以下条件下对此进行了测试：

1.  bm_bill 有多个相关行，而 mreceipt 没有相关行
2.  mreceipt 有多个相关行，而 bm_bill 没有行
3.  bm_bill 和 mreceipt 有相关的行

在每种情况下，它都有效，但是通过像这样的彻底重写，您将需要进行更多测试。

另请注意，我专注于日期和 ID 来解决这个问题，然后添加了所有其他列。检查列列表中是否存在拼写错误或遗漏 - 我在输入所有内容后进行了快速检查，但我可能遗漏了一些东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T16:49:34.533

你说查询原样给你想要的结果。如果是这样，那么请考虑以下几点：

您要加入派生表 (maxBillDate)，目的是什么？您没有将联接用作过滤器或表中的任何字段。所以......摆脱它，重新执行你的查询，你应该看到没有它你会得到相同的结果。

...与您的派生表相同的商店：maxReceipt

从那里开始，摆脱不必要的包袱，看看你的想法。

# python - pyqt 中的 Drag.start

> ID：15575160
> 
> 赞同：2
> 
> 时间：2013-03-22T16:20:58.487
> 
> 标签：python, qt, drag-and-drop, pyqt, pyside

我正在开发一个需要使用语音模拟拖放动作的应用程序，但是当我尝试发出信号以释放鼠标时，代码会阻塞，直到拖放动作完成。我需要发送一个信号以允许 dropaction 发生。如何在 drag.start 操作期间发送信号或执行命令。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T15:24:22.060

例如，您可以重新实现`start`发出信号的方法，例如：

```
class MyDrag(QtGui.QDrag):
    dragStarted = QtCore.pyqtSignal()

    def __init__(self, dragSource):
        super(MyDrag, self).__init__(dragSource)

    def start(self):
        self.dragStarted.emit()

        super(MyDrag, self).start() 
```

# python - Python 类中的动态装饰方法

> ID：15575161
> 
> 赞同：0
> 
> 时间：2013-03-22T16:21:01.853
> 
> 标签：python, dynamic, decorator

我正在考虑为一个类创建一个装饰器，它可以动态地将装饰器添加到以某个单词开头的特定方法中，而不是手动将装饰器添加到每个方法中。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:34:24.487

下面的代码示例显示了如何做到这一点：

```
def class_dec(starts_with,fun_dec):
    def fun(cls):
        for k,v in cls.__dict__.items():
            if k.startswith(starts_with):
                cls.__dict__[k] = fun_dec(v)
        return cls
    return fun

def fun_decorator(f):
    def dec(*args,**kwargs):
        print "I m decorating"
        f(*args,**kwargs)
    return dec

@class_dec("name",fun_decorator)
class Hello:
    def name_new_one(self):
        print "new one"

    def name(self):
        print "Hello"

h = Hello()
h.name()
h.name_new_one() 
```

# listbox - 如何将选定的列表框项目作为字符串获取？

> ID：15575163
> 
> 赞同：0
> 
> 时间：2013-03-22T16:21:07.763
> 
> 标签：listbox, google-apps-script

我一直在尝试构建一个小型应用程序，该应用程序从列表框中获取所选项目并将其附加到将要上传的文件的文件名中。我可以正确显示所有内容，并且文件已上传，但应附加到文件名的值是“未定义”。这是一个示例：

```
 function doGet(e) {

 var app = UiApp.createApplication().setTitle("Upload CSV to Sheet");

 var panel = app.createVerticalPanel();
 var listBox = app.createListBox().setName('myList').setId('myList').setWidth('80px');
 listBox.addItem('Value1');
 listBox.addItem('Value2');
 listBox.addItem('Value3');
 listBox.addItem('Value4');

 panel.add(listBox);
 app.add(panel);

   var formContent = app.createVerticalPanel();
   formContent.add(app.createFileUpload().setName('thefile'));
   formContent.add(app.createSubmitButton('Submit'));
   var form = app.createFormPanel();
   form.add(formContent);
   app.add(form);
   return app;
 }

function doPost(e) {
var fileBlob = e.parameter.thefile;
var app = UiApp.getActiveApplication();
   var doc = DocsList.createFile(fileBlob).rename(e.parameter.myList+Utilities.formatDate(new Date(), "GMT", "MM-dd-yy"));
   return app;
 } 
```

如何获取文件名以从 listBox 中获取值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:58:18.783

您将其添加`listBox`到应用程序中，而不是将其添加到表单面板内容中。这有两个后果：

1 - 提交后列表保持可见

2 - 列表没有收到，`doPost`因为它不在表格中......

试试这样：

```
function doGet() {

 var app = UiApp.createApplication().setTitle("Upload CSV to Sheet");

 var panel = app.createVerticalPanel();
 var listBox = app.createListBox().setName('myList').setId('myList').setWidth('80px');
 listBox.addItem('Value1');
 listBox.addItem('Value2');
 listBox.addItem('Value3');
 listBox.addItem('Value4');

 panel.add(listBox);

   var formContent = app.createVerticalPanel();
   formContent.add(app.createFileUpload().setName('thefile'));
   formContent.add(app.createSubmitButton('Submit'));
   formContent.add(panel);
   var form = app.createFormPanel();
   form.add(formContent);
   app.add(form);
   return app;
 }

function doPost(e) {
  var fileBlob = e.parameter.thefile;
  var doc = DocsList.createFile(fileBlob).rename(e.parameter.myList+' '+Utilities.formatDate(new Date(), "GMT", "MM-dd-yy"));
  var app = UiApp.getActiveApplication();
  return app;
 } 
```

# html - 向 Primefaces (3.4) 添加自定义属性 (HTML5) 支持

> ID：15575165
> 
> 赞同：6
> 
> 时间：2013-03-22T16:21:13.937
> 
> 标签：html, jsf, primefaces

在尝试在我的 JSF/Primefaces Web 应用程序中实现简单的 html5 属性“autofocus”时，我注意到组件不会将所有未知属性传递给最终标记的事实。我可以理解其中的原因，因为组件可以是 html 标记的复杂组合，如果组件尚未明确定义属性，则不清楚将其放置在何处。

但对我来说最好的解决方案是支持自动对焦（以及我可能希望在我的应用程序中支持的 primefaces 尚未定义的任何其他可能类型的属性）。

我已经看到[为 JSF 2.0 UIInput 组件添加自定义属性 (HTML5) 支持](https://stackoverflow.com/questions/6859520/adding-custom-attribute-html5-support-to-jsf-2-0-uiinput-component)，但这似乎适用于基本的 JSF 组件并且不适用于 PrimeFaces 组件。

如何扩展 Primefaces 的组件/渲染以支持这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T18:15:32.957

除了为每个单独的组件自行开发自定义渲染器之外，您还可以只创建一个单独的渲染器，在[`RenderKit`](http://docs.oracle.com/javaee/6/api/javax/faces/render/RenderKit.html)其中您提供一个自定义[`ResponseWriter`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ResponseWriter.html)，其中该[`startElement()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ResponseWriter.html#startElement%28java.lang.String,%20javax.faces.component.UIComponent%29)方法被覆盖以检查元素名称和/或组件实例，然后相应地编写其他属性。

这是 HTML5 渲染工具包的启动示例：

```
public class Html5RenderKit extends RenderKitWrapper {

    private RenderKit wrapped;

    public Html5RenderKit(RenderKit wrapped) {
        this.wrapped = wrapped;
    }

    @Override
    public ResponseWriter createResponseWriter(Writer writer, String contentTypeList, String characterEncoding) {
        return new Html5ResponseWriter(super.createResponseWriter(writer, contentTypeList, characterEncoding));
    }

    @Override
    public RenderKit getWrapped() {
        return wrapped;
    }

} 
```

HTML5 响应编写器：

```
public class Html5ResponseWriter extends ResponseWriterWrapper {

    private static final String[] HTML5_INPUT_ATTRIBUTES = { "autofocus" };

    private ResponseWriter wrapped;

    public Html5ResponseWriter(ResponseWriter wrapped) {
        this.wrapped = wrapped;
    }

    @Override
    public ResponseWriter cloneWithWriter(Writer writer) {
        return new Html5ResponseWriter(super.cloneWithWriter(writer));
    }

    @Override
    public void startElement(String name, UIComponent component) throws IOException {
        super.startElement(name, component);

        if ("input".equals(name)) {
            for (String attributeName : HTML5_INPUT_ATTRIBUTES) {
                String attributeValue = component.getAttributes().get(attributeName);

                if (attributeValue != null) {
                    super.writeAttribute(attributeName, attributeValue, null);
                }
            }
        }
    }

    @Override
    public ResponseWriter getWrapped() {
        return wrapped;
    }

} 
```

为了让它运行，创建这个 HTML5 渲染工具包工厂：

```
public class Html5RenderKitFactory extends RenderKitFactory {

    private RenderKitFactory wrapped;

    public Html5RenderKitFactory(RenderKitFactory wrapped) {
        this.wrapped = wrapped;
    }

    @Override
    public void addRenderKit(String renderKitId, RenderKit renderKit) {
        wrapped.addRenderKit(renderKitId, renderKit);
    }

    @Override
    public RenderKit getRenderKit(FacesContext context, String renderKitId) {
        RenderKit renderKit = wrapped.getRenderKit(context, renderKitId);
        return (HTML_BASIC_RENDER_KIT.equals(renderKitId)) ? new Html5RenderKit(renderKit) : renderKit;
    }

    @Override
    public Iterator<String> getRenderKitIds() {
        return wrapped.getRenderKitIds();
    }

} 
```

并将其注册如下`faces-config.xml`：

```
<factory>
    <render-kit-factory>com.example.Html5RenderKitFactory</render-kit-factory>
</factory> 
```

JSF 实用程序库[OmniFaces](http://omnifaces.org)也有这样的渲染工具包，[Html5RenderKit](http://showcase.omnifaces.org/renderkits/Html5RenderKit)（[源代码在这里](https://github.com/omnifaces/omnifaces/blob/master/src/main/java/org/omnifaces/renderkit/Html5RenderKit.java)）理论上也应该在 PrimeFaces 组件上正常工作。然而，这个问题迫使我再看一遍，我很尴尬地看到里面的`component`论点在里面`ResponseWriter#startElement()`（见[第 74 行](http://grepcode.com/file/repository.primefaces.org/org.primefaces/primefaces/3.4/org/primefaces/component/inputtext/InputTextRenderer.java#74)，它应该是代替的）。我不确定这是故意还是 PrimeFaces 渲染器设计中的疏忽，但您可以使用它来获取它。`null``<p:inputText>`[`InputTextRenderer`](http://grepcode.com/file/repository.primefaces.org/org.primefaces/primefaces/3.4/org/primefaces/component/inputtext/InputTextRenderer.java#74)`writer.startElement("input", inputText)``UIComponent#getCurrentComponent()`

* * *

**更新**：这是在 OmniFaces 1.5 中修复的。

* * *

应该注意的是，即将到来的 JSF 2.2 将支持通过新的`passthrough`命名空间或`<f:passThroughAttribute>`标签在视图中定义自定义属性。另请参阅[JSF 2.2 中有哪些新功能？- HTML5 传递属性](http://jdevelopment.nl/jsf-22/#1089)。

因此，所以：

```
<html ... xmlns:p="http://java.sun.com/jsf/passthrough">
...
<h:inputText ... p:autofocus="true" /> 
```

*（您可能希望使用`a`而不是`p`作为命名空间前缀以避免与 PrimeFaces 的默认命名空间发生冲突）*

或者：

```
<h:inputText ...>
    <f:passThroughAttribute name="autofocus" value="true" />
</h:inputText> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T16:21:13.937

我找到的解决方案是扩展和重新实现输入渲染器的 encodeMarkup 方法。我想要一个更通用的解决方案，但是在查看 Primefaces 源代码后，我没有看到任何用于组件渲染器添加自定义属性的通用挂钩。标记写在`encodeMarkup(FacesContext context, InputText inputText)`渲染器的方法中。它调用类层次结构，`renderPassThruAttributes(FacesContext context, UIComponent component, String[] attributes)`但它只从`org.primefaces.util.HTML`.

就我而言，我希望支持 InputMask、InputText、InputTextarea 和 Password 组件上的“自动对焦”属性。此外，每个组件的实现都是相同的，因此我将介绍如何在 InputText 组件上实现“自动对焦”，但如何扩展它以支持更多属性和更多组件应该很明显。

要扩展/覆盖渲染器，您需要有可用的 Primefaces 源并找到 encodeMarkup 方法并复制其内容。这是 InputTextRenderer 的示例：

```
protected void encodeMarkup(FacesContext context, InputText inputText) throws IOException {
    ResponseWriter writer = context.getResponseWriter();
    String clientId = inputText.getClientId(context);

    writer.startElement("input", null);
    writer.writeAttribute("id", clientId, null);
    writer.writeAttribute("name", clientId, null);
    writer.writeAttribute("type", inputText.getType(), null);

    String valueToRender = ComponentUtils.getValueToRender(context, inputText);
    if(valueToRender != null) {
        writer.writeAttribute("value", valueToRender , null);
    }

    renderPassThruAttributes(context, inputText, HTML.INPUT_TEXT_ATTRS);

    if(inputText.isDisabled()) writer.writeAttribute("disabled", "disabled", null);
    if(inputText.isReadonly()) writer.writeAttribute("readonly", "readonly", null);
    if(inputText.getStyle() != null) writer.writeAttribute("style", inputText.getStyle(), null);

    writer.writeAttribute("class", createStyleClass(inputText), "styleClass");

    writer.endElement("input");
} 
```

用您自己的方式扩展/覆盖渲染器（请参阅重要代码的注释）：

```
public class HTML5InputTextRenderer extends InputTextRenderer {

    Logger log = Logger.getLogger(HTML5InputTextRenderer.class);

    //Define your attributes to support here
    private static final String[] html5_attributes = { "autofocus" };

    protected void encodeMarkup(FacesContext context, InputText inputText) throws IOException {
    ResponseWriter writer = context.getResponseWriter();
    String clientId = inputText.getClientId(context);

    writer.startElement("input", null);
    writer.writeAttribute("id", clientId, null);
    writer.writeAttribute("name", clientId, null);
    writer.writeAttribute("type", inputText.getType(), null);

    String valueToRender = ComponentUtils.getValueToRender(context, inputText);
    if (valueToRender != null) {
        writer.writeAttribute("value", valueToRender, null);
    }

    renderPassThruAttributes(context, inputText, HTML.INPUT_TEXT_ATTRS);

    //Make an extra call to renderPassThruAttributes with your own attributes array
    renderPassThruAttributes(context, inputText, html5_attributes);

    if (inputText.isDisabled())
        writer.writeAttribute("disabled", "disabled", null);
    if (inputText.isReadonly())
        writer.writeAttribute("readonly", "readonly", null);
    if (inputText.getStyle() != null)
        writer.writeAttribute("style", inputText.getStyle(), null);

    writer.writeAttribute("class", createStyleClass(inputText), "styleClass");

    writer.endElement("input");
    }
} 
```

在 faces-config.xml 中配置渲染覆盖

```
<?xml version='1.0' encoding='UTF-8'?>
<faces-config xmlns="http://java.sun.com/xml/ns/javaee"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
        version="2.0">

    <!-- snip... -->

    <render-kit>
        <renderer>
            <component-family>org.primefaces.component</component-family>
            <renderer-type>org.primefaces.component.InputTextRenderer</renderer-type>
            <renderer-class>com.mycompany.HTML5InputTextRenderer</renderer-class>
        </renderer>
    </render-kit>

    <!-- snip... -->
</faces-config> 
```

如果您没有在 web.xml 中配置 faces-config 以防万一，请添加：

```
<context-param>
        <param-name>javax.faces.CONFIG_FILES</param-name>
        <param-value>
            /WEB-INF/faces-config.xml, /faces-config.xml
        </param-value>
    </context-param> 
```

然后在一些标记中使用它：

```
<p:inputText id="activateUserName" value="${someBean.userName}" 
  autofocus="on">
</p:inputText> 
```

注意：JSF 不喜欢没有值的属性。虽然 HTML5 中的 autofocus 不使用值，但如果没有给出值，JSF 会抛出错误，因此在添加此类属性时请务必定义一些丢弃值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T20:34:09.067

JSF 2.2 还提供了专为 HTML5 及更高版本设计的传递属性功能，因此当 PrimeFaces 正式支持 JSF 2.2 时，您可以将任何属性从组件传递到 html 元素。

# vba - 如何使用 30 个表单更新 Access VBA 应用程序？

> ID：15575171
> 
> 赞同：-1
> 
> 时间：2013-03-22T16:21:20.553
> 
> 标签：vba, ms-access

我需要更新一个 Access VBA 应用程序，其中包含大约 30 个表单。

我必须修改一个似乎已经在应用程序启动时设置的屏幕，它使用了很多 SQL 表。有没有办法找到代码的开头？

我来自程序编码背景，我不习惯编写没有开始和结束的代码；我还知道一点 VB、一些 ASP、一些 .Net 和通用计算。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:16:15.703

除了@Gord 的回答，您还需要了解一些事项。我会给你快速和肮脏的版本。

首先，Access 中有两种类型的代码。VBA 和宏。有时所谓的宏实际上是 VBA。

*   在 Access 中，宏是一组对数据库执行操作的指令。它可以做的事情非常有限。这些通常由不知道如何在 VBA 中编程的新手使用。
*   VBA 是幕后真正的强者。它可以做宏可以做的所有事情，但更多。

Access 使用**事件驱动**/**面向对象**（至少对于本次讨论来说足够接近）接口。对这些含义进行谷歌搜索。但是很快，表单上的列表框就是一个对象。它具有**属性**（如宽度）、**方法**（添加项目）和**事件**（单击项目）。

要查看代码，请查看左侧的导航窗口以获取宏。对于 VBA（模块），查看同一个窗口，或者直接按 Alt-F11。VBA 可以在模块中独立使用，也可以在表单或报表的幕后使用。

一旦你掌握了它的窍门，你会发现 Access 是一个用于小型项目的方便的 RAD 工具。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:51:18.260

当打开 Access 数据库时“自动”发生某些事情时，几乎总是因为

1.  已指定“启动形式”。（在 Access_2010 中完成`File > Options > Current Database > Display Form`。） ***...或...***

2.  数据库有一个名为的宏`AutoExec`，它会在数据库打开时自动运行（除非您在打开时按住 [Shift] 键绕过它）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T20:23:05.867

看来您已经找到了应用程序启动时打开的表单*（如果没有，请查看 Gord Thompson 的答案）*。

访问表单打开时发生的第一件事（您称之为“代码的开始”）是`Load`and`Open`事件。
如果此表单中有任何代码与这些事件相关联，则它位于表单代码中的`Form_Load()`and`Form_Open()`函数中。

# javascript - 用户分享链接后显示隐藏的下载框

> ID：15575184
> 
> 赞同：0
> 
> 时间：2013-03-22T16:21:37.773
> 
> 标签：javascript, jquery

我正在尝试在访问者共享链接后显示隐藏的下载框 div。我在这里尝试了一些[http://jsfiddle.net/trefu/qNDJB/4/](http://jsfiddle.net/trefu/qNDJB/4/)但不起作用。我不知道如何定义 FB 所以可以调用它。有人能帮我吗？

```
 <div id='fb-root'></div>

<div id="download_box" style="display: none;">
    Download Box (whatever that means) goes here
</div>

  FB.init({appId: "437410746335629", status: true, cookie: true});

  function postToFeed() {

    // calling the API ...
    var obj = {
      method: 'feed',
      link: 'https://developers.facebook.com/docs/reference/dialogs/',
      picture: 'http://fbrell.com/f8.jpg',
      name: 'Facebook Dialogs',
      caption: 'Reference Documentation',
      description: 'Using Dialogs to interact with users.'
    };

  function callback(response) {
    if (response && response.post_id) {
        document.getElementById('download_box').style.display = 'block';
    } else {
        alert('You must share your post before you can download.');
    }
}

    FB.ui(obj, callback);
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:18:07.047

看看 wowvi.blogspot.ro：

`var cc = '<iframe allowfullscreen='true' frameborder='0' height='410' src='embed.php?id=http://www.youtube.com/watch?v=Zcg8xscHkXM' width='640'></iframe>';`

将此更改为

`var cc = "<iframe allowfullscreen='true' frameborder='0' height='410' src='embed.php?id=http://www.youtube.com/watch?v=Zcg8xscHkXM' width='640'></iframe>";`

您在单引号内使用单引号..

# ruby - 带有 rvm 的 Jruby 安装给出 java.lang.UnsatisfiedLinkError

> ID：15575192
> 
> 赞同：0
> 
> 时间：2013-03-22T16:21:59.610
> 
> 标签：ruby, jenkins, rvm, jruby

我正在尝试在我的詹金斯服务器上安装 jruby。这就是正在发生的事情。

```
 $rvm install jruby
    Searching for binary rubies, this might take some time.
    jruby-1.7.3 - #configure
    jruby-1.7.3 - #download
    jruby-1.7.3 - #validate archive
    jruby-1.7.3 - #extract
    jruby-1.7.3 - #validate binary
    jruby-1.7.3 - #setup
    RubyBasicObject.java:1250:in `setVariableStamped': java.lang.UnsatisfiedLinkError: sun/misc/Unsafe.putOrderedObject(Ljava/lang/Object;JLjava/lang/Object;)V
        from RubyBasicObject.java:1211:in `setVariableInternal'
        from RubyBasicObject.java:1204:in `setVariable'
        from RubyClass.java:265:in `set'
        from RubyBasicObject.java:1371:in `variableTableStore'
        from RubyBasicObject.java:1439:in `setInternalVariable'
        from RubyStruct.java:219:in `newInstance'
        from Ruby.java:1371:in `initCore'
        from Ruby.java:1213:in `bootstrap'
        from Ruby.java:1148:in `init'
        from Ruby.java:286:in `newInstance'
        from Main.java:262:in `internalRun'
        from Main.java:221:in `run'
        from Main.java:201:in `main'
    Saving wrappers to '/srv/jenkins/home/.rvm/bin'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:37:08.757

尝试：

```
rvm install jruby --disable-binary 
```

如果您发现更多详细信息，请打开 RVM 的票 => [https://github.com/wayneeseguin/rvm/issues/](https://github.com/wayneeseguin/rvm/issues/)

# python - 数据和时间转换 - PyMathematics

> ID：15575197
> 
> 赞同：1
> 
> 时间：2013-03-22T16:22:19.620
> 
> 标签：python, math

我是个下载狂。我下载的大部分内容都以千兆字节为单位，但以兆字节为单位显示。

我想构建一个小型python程序，根据连接速度检测下载完成需要多长时间。

我的数学很糟糕，我不知道从哪里开始算法。

它将有浮点数..我知道连接速度有时会非常不稳定，它们可能会上升和下降..但这将是一个近似值。我喜欢数学，但浮点数是一个很大的弱点。

它应该有点像这样：

```
fileSize: raw_input("How big is the file you are downloading? ")
conSpeed: raw_input("How fast is your current connection speed? ")

## Make sure fileSize and conSpeed are floats

print("Your download will finish in "+str(ALGORITHM_VAL)+" .")

# prints no more than 4 digits, not like 1 hour 23423432423424 seconds 
```

感谢您的帮助家伙（和女孩），非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:31:14.403

使用的基本等式是：estimated_time = file_size/con_speed

请确保玩具在计算时具有一致的单位。例如：如果您的连接速度以每秒兆字节 (Mbps) 为单位，则文件大小也应以兆字节为单位。

通常 1 Gb 是 1024 Mb 或 1000 Mb（大约）

有关其他转换率，请查看此图表： [http ://www.wu.ece.ufl.edu/links/dataRate/DataMeasurementChart.html](http://www.wu.ece.ufl.edu/links/dataRate/DataMeasurementChart.html)

请记住，互联网服务提供商通常使用 1000 作为近似单位，而不是 1024。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:34:56.743

如果两个输入使用相同的测量单位，则应该是标准除法运算：

```
size = raw_input("File size in KB: ")
speed = raw_input("Speed in KB/sec: ")
est = float(size) / float(speed)
print "It will take %f seconds." % est 
```

实际上，任何时候你看到*per*一词，例如英里*每小时*或千字节*每秒*，你都可以想到*除以*：英里*除以*小时，或千字节*除以*秒。

现在，如果您的文件大小输入采用*不同*的度量单位，例如兆字节，您需要先将其转换为通用度量单位：

```
sizeInKb = float(size) * 1024
est = float(sizeInKb) / float(speed) 
```

最后，您可以通过导入使用 Python 轻松显示持续时间`datetime`：

```
print "Estimated Time: %s" % datetime.timedelta(seconds = est) 
```

希望这可以帮助！

# asp.net - 从 scss 生成 css

> ID：15575199
> 
> 赞同：2
> 
> 时间：2013-03-22T16:22:25.667
> 
> 标签：asp.net, css, visual-studio-2010, sass

我在 ASP.NET 项目中有 scss 和 css 文件。

![截屏](../Images/646ca19e69e9ac28828c45c6ff5b00c4.png)

如果我更改了scss，是否应该重新生成css？如果是，那么如何？VS 可以做到这一点还是我应该有其他工具？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T16:43:29.897

有一些扩展允许您从 Visual Studio 内部重新生成，但我个人更喜欢命令行方式。

```
sass --watch [folder holding .scss files]:[folder holding .css files] 
```

如果您使用 Compass，则可以改用此命令：

```
compass watch 
```

这两个命令都会告诉 Sass 监视包含 .scss 文件的文件夹，并且任何时候更改和保存它们，重新生成 CSS 文件。

如果您创建了该项目，那么您可能已经安装了 Sass（以及扩展的 Ruby）。如果不这样做，则需要安装 Ruby 和 Sass。[Windows 有一个不错的小安装程序](http://rubyinstaller.org/downloads/)，可以同时安装 Ruby 和 RubyGems。安装后，您需要运行以下命令来安装 Sass：

```
gem install sass 
```

安装 Sass 后，您可以运行该`sass --watch`命令，或者使用您选择的 VS 扩展来查看和重新编译 CSS 文件。

# devise - rails_admin cancan 功能第一次未加载

> ID：15575205
> 
> 赞同：1
> 
> 时间：2013-03-22T16:22:33.440
> 
> 标签：devise, cancan, rails-admin

我正在使用 RailsAdmin，这次是使用 CanCan！我已经建立了我的能力模型，一切看起来都不错。除了这个问题：当用户第一次登录时（我使用的是设计），由于某种原因系统没有加载正确的权限。这导致了不方便的情况：用户可以看到实际权限通常授予的更多操作和实体。任何后续请求都可以正常工作并加载正确的权限。不知道我还能补充什么。日志未报告任何相关内容。有人遇到类似的事情吗？

*   导轨 3.2.8
*   rails_admin 0.4.4
*   康康 1.6.7
*   设计 2.1.2

# java - Java BitSets 写入文件

> ID：15575209
> 
> 赞同：0
> 
> 时间：2013-03-22T16:22:41.753
> 
> 标签：java, bitset, huffman-code

我正在研究霍夫曼压缩算法。我有每个字符的代码。例如 f=1100
d=111
e=1101
b=101
c=100
a=0

现在为了实现压缩，我需要将代码作为位写入二进制文件。我现在可以将它们写为字节，这只是增加了压缩文件的大小。如何将代码作为位写入 Java 中的二进制文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:36:31.353

好吧，如果您有文本“fdebcafdbca”，则需要将其写为位：

110011111011011000110011111011011000

分离和填充：

```
11001111 10110110 00110011 11101101 10000000 //4 bits of padding here 
```

十六进制：

```
CF B6 33 ED 80 
```

因此，您将字节数组写入`0xCF 0xB6 0x33 0xED 0x80`文件。那是 5 个字节 = 40 位，4 个浪费的位。该文本最初占用 12 个字节，因此您还需要存储树，因此节省不了多少。如果它们不与字节边界对齐，则无法避免使用填充。

虽然根本不推荐，但如果你有一个字符串，那么你可以这样做：

```
public class BitWriter {

    private byte nthBit = 0;
    private int index = 0;
    private byte[] data;

    public BitWriter( int nBits ) {
        this.data = new byte[(int)Math.ceil(nBits / 8.0)];
    }

    public void writeBit(boolean bit) {
        if( nthBit >= 8) {
            nthBit = 0;

            index++;
            if( index >= data.length) {
                throw new IndexOutOfBoundsException();
            }
        }
        byte b = data[index];

        int mask = (1 << (7 - nthBit));

        if( bit ) {
            b = (byte)(b | mask);
        }
        data[index] = b;
        nthBit++;
    }

    public byte[] toArray() {
        byte[] ret = new byte[data.length];
        System.arraycopy(data, 0, ret, 0, data.length);
        return ret;
    }

    public static void main( String... args ) {
        BitWriter bw = new BitWriter(6);
        String strbits = "101010";
        for( int i = 0; i < strbits.length(); i++) {
            bw.writeBit( strbits.charAt(i) == '1');
        }

        byte[] b = bw.toArray();
        for( byte a : b ) {
            System.out.format("%02X", a);
                 //A8 == 10101000

        }
    }

} 
```

# jquery - 不使用 iframe 的 SoundCloud 控制

> ID：15575215
> 
> 赞同：0
> 
> 时间：2013-03-22T16:23:05.350
> 
> 标签：jquery, controls, soundcloud

是否可以在不使用小部件/iframe 的情况下控制 SC 播放器？我按照 jQuery 设置链接[http://developers.soundcloud.com/docs/custom-player](http://developers.soundcloud.com/docs/custom-player)并有一个包含三首歌曲的基本页面：

```
 <div id="cloud">
    <div id="iPlay" class="iPlay"></div><br>
    <a href="https://soundcloud.com/jay-hitt/greetings-from-the-wilderness" class="sc-player">Greetings From The Wilderness</a><br>
    <a href="https://soundcloud.com/jay-hitt/some-people-never-learn" class="sc-player">Some People Never Learn</a><br>
    <a href="https://soundcloud.com/jay-hitt/faith-of-a-desperate-man" class="sc-player">Faith Of A Desperate Man</a>
    </div> 
```

我正在使用它将“播放”图像更改为“暂停”，但似乎无法添加实际开始播放播放器的功能：

```
 $("#iPlay").click(function () {
    $("#iPlay").toggleClass("iPause");
    }); 
```

这个设置有可能还是我必须通过小部件..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:29:52.173

所有方法都在此页面中：

[https://github.com/soundcloud/Widget-JS-API/wiki#widget-methods](https://github.com/soundcloud/Widget-JS-API/wiki#widget-methods)

> 当您借助该 `soundcloud.getPlayer`方法获取小部件 DOM 对象时，您将可以访问以下公共方法：
> 
> ```
> api_play() 
> ```
> 
> 播放器从 0 或从最后一个暂停的曲目位置开始播放。如果小部件包含多个曲目，它将开始播放第一首曲目。

但你可以通过调用 soundcloud api 来做到这一点，并使用流 wit css3

```
function soundCloudApiUrl(soundUrl, soundcloudApiKey) {
        return 'http://api.soundcloud.com/resolve?url=' + soundUrl+ '&') + 'format=json&consumer_key=' + soundcloudApiKey +'&callback=?';
}; 
```

并使用 jQuery 中的 getJson 方法：

```
$.getJSON(soundCloudApiUrl(linkUrl, soundcloudApiKey); 
```

最后一步包括检索数据并从`audio`标签或 javascript 音频播放器插件中应用它

# jquery - 根据点击的元素动态创建输入元素

> ID：15575218
> 
> 赞同：0
> 
> 时间：2013-03-22T16:23:18.107
> 
> 标签：jquery, html, django

我的问题标题不是最好的，但这是交易：

我有六段。其中三个包含文本，另外三个包含链接，如下所示：

```
<p>Text 1</><p>Link one</>
<p>Text 2</><p>Link two</>
<p>Text 3</><p>Link three</> 
```

每个链接都会调用一个 jQuery 函数，该函数应该创建一个 HTML 输入元素而不是相应段落中的文本（例如：单击链接三应该在包含文本 3 的段落中创建文本输入元素）。

在第二次单击时，相同的链接应该创建一个带有一些参数的 AJAX 调用，我的 Django 视图将获取这些参数并采取相应的行动。

目前，我有这个：

```
$('.column a').click(function ()
{
    oldValue = $('#email').text()
    $('#email').html('<input type="text" value="'+oldValue+'"/>')
    $('a#changeMail').removeClass('button').addClass('success button')
}); 
```

它适用于一个段落对。我怎样才能使它适用于任何“段落对”？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:30:19.110

使用这种结构，这应该可以工作（这里有一个小提琴[http://jsfiddle.net/uBZRW/2/](http://jsfiddle.net/uBZRW/2/)）

```
$('.column a').click(function ()
{
    var targetParaphaph = $(this).parent().prev(); // This gets the previous <p>
    var value = targetParaphaph.text();
    targetParaphaph.html("<input type='text' value='"+value+"'/>");
    $(this).addClass('success'); // this results in "button success" class
}); 
```

编辑：我编辑了原始答案，对代码进行了多次修复，小提琴包含一个工作示例，如果您的结构不同，您可以使用 jquery .parent(), .parents([selector]), .next() 实现类似的逻辑, .prev() 等

jQuery DOM 遍历：[http ://api.jquery.com/category/traversing/](http://api.jquery.com/category/traversing/)

# regex - 为什么 strsplit 使用正向前瞻和后向断言匹配不同？

> ID：15575221
> 
> 赞同：27
> 
> 时间：2013-03-22T16:23:25.833
> 
> 标签：regex, r, strsplit

常识和完整性检查使用`gregexpr()`表明，下面的后视和前瞻断言应分别在 中的一个位置匹配`testString`：

```
testString <- "text XX text"
BB  <- "(?<= XX )"
FF  <- "(?= XX )"

as.vector(gregexpr(BB, testString, perl=TRUE)[[1]])
# [1] 9
as.vector(gregexpr(FF, testString, perl=TRUE)[[1]][1])
# [1] 5 
```

`strsplit()`然而，使用这些匹配位置的方式不同，使用后向断言时`testString`在**一个**位置拆分，但在使用前瞻断言时在**两个**位置 - 其中第二个位置似乎不正确。

```
strsplit(testString, BB, perl=TRUE)
# [[1]]
# [1] "text XX " "text"    

strsplit(testString, FF, perl=TRUE)
# [[1]]
# [1] "text"    " "       "XX text" 
```

我有两个问题：**（Q1）**这是怎么回事？以及**（Q2）**如何才能`strsplit()`表现得更好？

* * *

**更新：** Theodore Lytras 的出色回答解释了发生了什么，因此地址**(Q1)**。我的答案建立在他确定补救措施的基础上，地址为**(Q2)**。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-22T20:05:06.240

我不确定这是否属于错误，因为我相信这是基于 R 文档的预期行为。来自`?strsplit`：

> 应用于每个输入字符串的算法是
> 
> ```
> repeat {
>     if the string is empty
>         break.
>     if there is a match
>         add the string to the left of the match to the output.
>         remove the match and all to the left of it.
>     else
>         add the string to the output.
>         break.
> } 
> ```
> 
> 请注意，这意味着如果在（非空）字符串的开头有匹配项，则输出的第一个元素是 '""'，但如果在字符串的末尾有匹配项，则输出为与删除匹配相同。

问题是前瞻（和后瞻）断言的长度为零。因此，例如在这种情况下：

```
FF <- "(?=funky)"
testString <- "take me to funky town"

gregexpr(FF,testString,perl=TRUE)
# [[1]]
# [1] 12
# attr(,"match.length")
# [1] 0
# attr(,"useBytes")
# [1] TRUE

strsplit(testString,FF,perl=TRUE)
# [[1]]
# [1] "take me to " "f"           "unky town" 
```

发生的情况是，孤独的前瞻`(?=funky)`在位置 12 匹配。因此，第一个拆分包括直到位置 11（匹配左侧）的字符串，并且它与匹配一起从字符串中删除，但是匹配的长度为零.

现在剩下的字符串是`funky town`，并且前瞻匹配位置 1。但是没有什么可以删除，因为匹配的左侧没有任何内容，并且匹配本身的长度为零。所以算法陷入了无限循环。显然，R 通过拆分单个字符来解决这个问题，顺便说一下，当`strsplit`使用空正则表达式（当 argument 时`split=""`）时，这是记录在案的行为。在此之后，剩余的字符串是`unky town`，由于没有匹配项，它作为最后一个拆分返回。

Lookbehinds 没有问题，因为每个匹配项都被拆分并从剩余的字符串中删除，因此算法永远不会卡住。

诚然，这种行为乍一看很奇怪。然而，否则行为将违反前瞻零长度的假设。鉴于该`strsplit`算法已记录在案，我相信这不符合错误的定义。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-22T22:17:02.147

基于 Theodore Lytras 对`substr()`' 行为的仔细解释，一个相当干净的解决方法是在要匹配的前瞻断言前面加上一个匹配任何单个字符的肯定后向断言：

```
testString <- "take me to funky town"
FF2 <- "(?<=.)(?=funky)"
strsplit(testString, FF2, perl=TRUE)
# [[1]]
# [1] "take me to " "funky town" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-22T17:36:49.963

对我来说似乎是一个错误。这似乎不仅仅与空间有关，特别是，而是任何孤独的前瞻（正面或负面）：

```
FF <- "(?=funky)"
testString <- "take me to funky town"
strsplit(testString,FF,perl=TRUE)
# [[1]]
# [1] "take me to " "f"           "unky town"  

FF <- "(?=funky)"
testString <- "funky take me to funky funky town"
strsplit(testString,FF,perl=TRUE)
# [[1]]
# [1] "f"                "unky take me to " "f"                "unky "           
# [5] "f"                "unky town"       

FF <- "(?!y)"
testString <- "xxxyxxxxxxx"
strsplit(testString,FF,perl=TRUE)
# [[1]]
# [1] "xxx"       "y"       "xxxxxxx" 
```

如果给定一些要捕获的内容以及零宽度断言，似乎可以正常工作，例如：

```
FF <- " (?=XX )"
testString <- "text XX text"
strsplit(testString,FF,perl=TRUE)
# [[1]]
# [1] "text"    "XX text"

FF <- "(?= XX ) "
testString <- "text XX text"
strsplit(testString,FF,perl=TRUE)
# [[1]]
# [1] "text"    "XX text" 
```

也许类似的东西可以作为一种解决方法。

# .net - 如何以编程方式将 Object 类型的变量添加到 SSIS 包？

> ID：15575223
> 
> 赞同：2
> 
> 时间：2013-03-22T16:23:27.573
> 
> 标签：.net, ssis

我正在使用 SSIS 对象模型以编程方式创建一个 SSIS 包。

我想将变量添加到 Object 类型的包中。但我不能直接设置数据类型，因为该属性是只读的。如何将 Object 类型的变量添加到我的包中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:23:27.573

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms136082.aspx)：

> 对于变量... DataType 值是从分配给变量的初始值推断出来的，之后无法更改。

所以正确的语法是：

```
Package.Variables.Add("VariableNames", false, "User", new Object()); 
```

并分配一个初始值：

```
Object o = new Object();
// .. populate o with values in some form ...
Package.Variables.Add("VariableNames", false, "User", o); 
```

# regex - 在 BASH 中使用正则表达式提取数字

> ID：15575225
> 
> 赞同：2
> 
> 时间：2013-03-22T16:23:28.600
> 
> 标签：regex, bash

我有一个脚本可以运行类似的命令，
`$exiftool 3PDki5ZyhBgnoTEUu4JP.mov|grep -m1 Duration` 并且取决于我得到的文件，这些结果

```
Duration                        : 01:25  
Duration                        01:25  
Duration                        01.25 
```

我希望只能从这些字符串中提取时间，即*01:25*或*1.25*。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T16:28:56.583

尝试这个：

```
....|grep -o "[^ ]*$" 
```

或者这个简短的：

```
...|awk '$0=$NF' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:35:07.920

这对我有用。awk 只占用空格后的最后一列，我添加了 tr 以防您想成为真正的完美主义者并且只有 hh:mm 格式（而不是 hh.mm）

```
exiftool 3PDki5ZyhBgnoTEUu4JP.mov|grep -m1 Duration | awk '{ print $NF }' | tr '.' ':' 
```

# java - 在多次抛出中重用“异常”

> ID：15575226
> 
> 赞同：0
> 
> 时间：2013-03-22T16:23:29.550
> 
> 标签：java, exception-handling

堆栈跟踪是从创建异常的行开始还是从抛出异常的行开始？

如果是后者，让异常类可变以重用异常是一种好习惯吗？

我是 Java 异常的新手，但仍然没有完全理解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:30:03.630

一旦抛出了 Throwable，调用堆栈中的任何代码都可能保存了对它的引用，并且期望它仍然描述最初捕获的内容。这会使重用 Exception 对象，稍后更改其堆栈跟踪，非常混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:26:25.490

从抛出的线开始。异常最好重用。也有选中和未选中两种类型。

# ios - iOS 4.3 自定义容器编程

> ID：15575229
> 
> 赞同：0
> 
> 时间：2013-03-22T16:23:35.453
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, ios4

**参考这个问题：[addChildViewController 替代 iOS 4.3](https://stackoverflow.com/questions/9261171/addchildviewcontroller-alternative-for-ios-4-3)**

我的应用程序需要支持 4.3，因此我无法采用 Apple 容器编程指南中提到的方法 - [http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html)

直接交换每个 ViewController 的视图目前对我有用，但是，在推送新的 View Controller 时，这些“孩子”没有对容器的引用，`self.navigationController`因此他们无法将新控制器推送到堆栈上。

在 iOS 4.3 中能够访问容器类的 UINavigationController 的最佳实践是什么。很遗憾我被迫支持 4.3，因为 Apple 文档中概述的 childViewController 模式正是我所需要的！

谢谢，

蒂姆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:43:45.500

在 iOS 4 及之前的版本中，您不应该创建自己的 UIViewController 层次结构，因此您必须将视图*直接*作为 UIViewController 视图的子视图来操作。

但是，如果您正确执行此操作，*则*仍然存在 UIViewController 层次结构并且它仍然有效。没有任何情况下您“没有参考” UINavigationController。一个视图有一个超级视图，它是另一个视图。UIViewController 的视图具有对 UIViewController 的引用（作为它的`nextResponder`）。UIViewController 有一个对其父 UINavigationController 的引用（如果有的话）。

如果不是这种情况，那么您在使用视图控制器时做错了什么。

Apple 的文档说明了这一点（适用于 iOS 4 及之前的版本），您应该非常认真地对待它：

> 您不应使用多个自定义视图控制器来管理同一视图层次结构的不同部分。...如果要将视图层次结构划分为多个子区域并分别管理每个子区域，请使用通用控制器对象（从 NSObject 下降的自定义对象）而不是视图控制器对象来管理每个子区域。然后使用单个视图控制器对象来管理通用控制器对象。

iOS 4*及更高版本*中的规则保持不变：不要使用 UIViewController，除非它作为合法 UIViewController 层次结构的一部分，其中视图控制器的视图处于*完全相同的*层次结构中，如我书中的这张图所示：

![在此处输入图像描述](../Images/41587e59d1eff5403ebcaebe66a0adbe.png)

观察视图控制器是父视图和子视图*，*它们的视图是父视图和子视图。这就是如何使用视图控制器层次结构。如果您在 iOS 4 中做的事情会违反这一点，请不要这样做。使用视图但*不*使用视图控制器。

# c - 如何用C重写文件的全部内容

> ID：15575231
> 
> 赞同：2
> 
> 时间：2013-03-22T16:23:37.333
> 
> 标签：c, linux

我有用于 ajax 源的文本文件。每 1 秒浏览器发送 ajax 请求以从该文件中读取实际数据。我还在 C 上编写了守护程序，它将实际数据写入该文件。看下面的代码：

```
static void writeToFile_withLock(const char * file_path, const char * str)
{
    struct flock fl = {F_WRLCK, SEEK_SET,   0,      0,     0 };
    int fd;
    const char * begin = str;
    const char * const end = begin + strlen(str);

    fl.l_pid = getpid();

    if ((fd = open(file_path, O_CREAT | O_WRONLY)) == -1) {
        perror("open");
        exit(1);
    }
    printf("Trying to get lock...\n");
    if (fcntl(fd, F_SETLKW, &fl) == -1) {
        perror("fcntl");
        exit(1);
    }
    printf("got lock\n");

    printf("Try to write %s\n", str); 
    while (begin < end)
    {
        size_t remaining = end - begin;
        ssize_t res = write(fd, begin, remaining);
        if (res >= 0)
        {
            begin += res;
            continue; // Let's send the remaining part of this message
        }
        if (EINTR == errno)
        {
            continue; // It's just a signal, try again
        }
        // It's a real error
        perror("Write to file");
        break;
    }

    fl.l_type = F_UNLCK;  /* set to unlock same region */

    if (fcntl(fd, F_SETLK, &fl) == -1) {
        perror("fcntl");
        exit(1);
    }

    printf("Unlocked.\n");

    close(fd);

} 
```

问题：如果以前的数据 > 新数据，那么旧的几个符号会保留在文件的末尾。

如何重写完整的文件内容？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:38:07.793

将 O_TRUNC 添加到 open() 调用...

> **O_TRUNC**
> 
> 如果文件已经存在并且是常规文件并且打开​​模式允许写入（即 O_RDWR 或 O_WRONLY），它将被截断为长度 0。如果文件是 FIFO 或终端设备文件，则忽略 O_TRUNC 标志。否则，未指定 O_TRUNC 的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:47:33.053

你基本上有两个选择。设置`O_TRUNC`第二个参数的位以`open`在打开文件时丢弃所有内容，或者`ftruncate`在完成时调用以丢弃不需要的文件内容。（或使用`truncate`，但由于您已经有一个打开的文件描述符，这样做没有任何好处。）

# javascript - 使用 jQuery 检查字段上的输入字段是否为空

> ID：15575233
> 
> 赞同：5
> 
> 时间：2013-03-22T16:23:47.600
> 
> 标签：javascript, jquery, html

我有一个包含 5 个字段的表单，所有字段均为“必需”类

我试图确保在提交时这些字段不为空，如果是，则添加一个类，如果不是，则返回 true - 我尝试了以下操作，但没有运气，即使字段为空，表单仍会提交。

```
$('.submit').click(function(){

if($('.required').val() == "") {
        $('.required').addClass('error');
        return false;
    } else {
        return true;
    };
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T16:25:49.287

尝试：

```
$('.submit').click(function(e){
 if(!$('.required').val()) {
    $('.required').addClass('error');
    e.preventDefault();
  } else {
    return true;
  };
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:33:02.747

尝试这个：

```
$('.submit').click(function() {
    $('.required').removeClass('error').filter(function() {
        return !$.trim(this.value).length;
    }).addClass('error');
}); 
```

类`error`仅添加到空字段，否则将被删除。

[http://jsfiddle.net/dfsq/2HxaF/](http://jsfiddle.net/dfsq/2HxaF/)

另一个对您的任务有用的变体：对字段模糊的附加验证：

```
$('.submit').click(validate);
$(document).on('blur', '.required', function() {
    validate($(this));
});

function validate($field) {
    ($field instanceof jQuery && $field || $('.required')).removeClass('error').filter(function() {
        return !$.trim(this.value).length;
    }).addClass('error');
} 
```

[http://jsfiddle.net/dfsq/2HxaF/1/](http://jsfiddle.net/dfsq/2HxaF/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:28:54.123

`if($('.required')`将返回 jQuery 对象的集合，而对 的调用`.val()`将仅使用该集合的第一个元素来执行您的测试。

尝试这样的事情（编辑：不需要做循环或测试，因为 filter expr 会为你处理）：

```
$('.submit').click(function(e) {
    var ins = $('input.required[value=""]');         
        ins.addClass('error');
        return false;
   }
    return true;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T16:30:19.473

您应该使用过滤器来获取空字段。表单提交也更好用，这样它也可以处理输入按键。如果不是，那么您将不得不处理表单内的输入键，这将触发表单的提交事件

```
$('yourform').submit(function(){
    // empty will contain all elements that have empty value
    var empty = $('.required').filter(function(){
        return $.trim(this.value).length === 0;
    });
    if(empty.length){
       empty.addClass('error');
       return false;
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T17:09:44.140

聚会有点晚了，但我认为这是最好的解决方案：

替换所有未填写的必填字段：http: [//jsfiddle.net/LREah/](http://jsfiddle.net/LREAh/)

```
$('form').submit(function(){
if(!$('.required').val()) {
    $('.required').attr('placeholder', 'You forgot this one');
    return false;
    } else {
        return true;
};
}); 
```

仅替换提交表单的必填字段：http: [//jsfiddle.net/MGf9g/](http://jsfiddle.net/MGf9g/)

```
$('form').submit(function(){
if(!$(this).find('.required').val()) {
    $(this).find('.required').attr('placeholder', 'You forgot this one');
    return false;
} else {
    return true;
}
}); 
```

当然你可以改变`attr('placeholder', 'You forgot this one');`——`addClass('error');`它只是为了演示。顺便说一句，你不需要`id="formX"`html 上的，我只是在尝试别的东西，忘了删除。

# teamcity - 如何解决此未满足的代理要求：“DotNetFramework4.0_x86 存在”？

> ID：15575234
> 
> 赞同：5
> 
> 时间：2013-03-22T16:23:49.490
> 
> 标签：teamcity

我们已经尝试了以下所有选项，但它不起作用。

我们正在使用 Visual Studio 2012 和 Jetbrains Teamcity 7.1 版

在配置代理时，我选择了 runnert 类型为 VisualStudio(sln)，当我配置并运行代理时，它说

`Unmet requirements:DotNetFramework4.5_x86 exists`

我完成了下面提到的博客中解释的所有步骤，但这没有帮助。如果有任何新的解决方案，请建议我。

[http://devnet.jetbrains.com/message/5316474](http://devnet.jetbrains.com/message/5316474)

[TeamCity - 未满足的要求：存在 DotNetFramework4.5_x86](https://stackoverflow.com/questions/13312796/teamcity-unmet-requirements-dotnetframework4-5-x86-exists)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T07:51:04.967

然后您发布的链接是关于 Visual Studio 2010(.net 4.0)，您使用 Visual Studio 2012，其中包含对 .net 4.5 中构建的应用程序的支持。您在代理机器上安装了 .net 4.5 吗？安装 .net 4.5，除非您尝试将目标构建为不针对 4.5 的构建并且不使用 4.5 构建您需要它（如果您只是将其设置为目标 vs2010？）。

# ios - MonoTouch：从命令行创建 iOS AppStore 版本

> ID：15575237
> 
> 赞同：1
> 
> 时间：2013-03-22T16:23:58.680
> 
> 标签：ios, xcode, jenkins, xamarin, mdtool

我想使用 MonoTouch (Xamarin) 的 mdtool 直接从命令行构建我的 ios-apps Appstore-ready，以便 Jenkins 可以立即启动并生成可上传的包。

我使用以下命令：

```
'/Applications/Xamarin Studio.app/Contents/MacOS/mdtool' -v build '--configuration:AppStore|iPhone' MyAppProject.csproj 
```

现在，构建运行，使用我的 AppStore 配置文件并在我的*bin/iPhone/AppStore* - 文件夹中创建文件。

现在，根据[Xamarin 的文档](http://docs.xamarin.com/guides/ios/deployment,_testing,_and_metrics/app_distribution_overview)，我应该将创建的应用程序文件压缩到*bin/iPhone/AppStore*并在 xCode Application Loader 中选择它，如屏幕截图所示：

![在此处输入图像描述](../Images/fbfdee77f0959124912f02f7306aacbf.png)

但是应用程序加载器将每个文件都显示为灰色，因此没有机会继续。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:19:46.747

如果将 .zip 扩展名重命名为 .ipa 会怎样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:38:50.793

我认为你不应该选择“Open package”，而是“Deliver Your App”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-04T09:50:09.170

您还可以使用 xcrun ("XCode Run") 命令行工具和 "PackageApplication" 参数将 ".app" 打包到 ".ipa" 中，并可选择同时指定签名身份和配置文件。

就像是：

```
/usr/bin/xcrun -sdk iphoneos PackageApplication -v "Ios.app" -o "Ios.ipa" --sign "[DEVELOPER_NAME]" --embed "[PROVISONING_PROFILE]” 
```

此处有关 xcrun 的更多信息： [https ://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/xcrun.1.html](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/xcrun.1.html)

# r - 在R编程中，关于逆矩阵及其乘法

> ID：15575240
> 
> 赞同：2
> 
> 时间：2013-03-22T16:24:02.533
> 
> 标签：r, matrix-inverse

这是我练习[R的初学者指南]的解决过程

```
> Q
     [,1] [,2] [,3]
[1,]    1    2    3
[2,]    4    2    1
[3,]    2    3    0
> solve(Q)
      [,1]  [,2]  [,3]
[1,] -0.12  0.36 -0.16
[2,]  0.08 -0.24  0.44
[3,]  0.32  0.04 -0.24
> solve(Q)%*%Q
     [,1]          [,2] [,3]
[1,]    1 -2.775558e-17    0
[2,]    0  1.000000e+00    0
[3,]    0  0.000000e+00    1 
```

我想知道为什么我不能得到应该出现单位矩阵的正确答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T16:33:50.280

`zapsmall`对最终结果使用该函数。由于浮点表示和舍入误差，除了简单的算术（有时甚至是这样）之外的任何东西都会导致值非常接近，但与预期的值不完全相同。在这种情况下，您会看到在第一个非零数字之前的小数位后有 16 个 0 的值。该`zapsmall`函数会将这些小的（本质上为 0）值转换为 0，以便您看到的内容与您的预期相符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T16:32:27.180

这不是编程错误，这是所谓的“浮点运算”的结果。四舍五入到一个合理的长度，你会得到单位矩阵：

```
Q2 <- solve(Q)%*%Q
round(Q2, 4) 
```

要了解有关浮点运算的更多信息，[**请访问此处**](http://en.wikipedia.org/wiki/Floating_point#Floating-point_arithmetic_operations)。

# javascript - 空格键解除警报

> ID：15575241
> 
> 赞同：1
> 
> 时间：2013-03-22T16:24:07.837
> 
> 标签：javascript, jquery, html, alert

我有一个技术问题，如果在输入框中输入空格，它会警告“不允许空格”，但是由于空格键也可以用来关闭警报，它会在按键时立即消失。所以警报只是闪烁然后消失，除非你按住空格键。谁能弄清楚如何解决这个问题？谢谢。

```
$('#email').bind('DOMAttrModified textInput input change keypress paste',function(){  

   if($(this).val().match(/[\s]/g)) {
     alert("email should not contain spaces");
   } 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:34:36.943

你可以试试这个：

在显示警报绑定`keydown`之前`document`

```
alert("email should not contain spaces")
$('document').keydown(function(event) {
        if (event.keyCode == 32) {
            event.preventDefault();
        }
    }); 
```

并在用户单击或输入您的输入时取消绑定。

我还建议使用像[这样](http://pinesframework.org/pnotify/)的一些通知插件而不是显示警报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:36:40.013

我建议使用不显眼的验证方法。这可以用[colorbox 之类的东西](http://www.jacklmoore.com/colorbox/)*很*容易地完成（尽管这仍然有点突兀 - 如果可以的话，最好不要离开控件的焦点！*），并且可以像你喜欢的那样简单或复杂，而不会激怒用户用过时的模态对话框拼尽全力，半死不活。例如：

```
$.colorbox( html: '<p>Your message</p>', show: true ); 
```

[* 我一直看到在搜索我需要做的[事情](http://needim.github.com/noty/)时出现提示，我很想使用它；在那之前，我不能保证它，但可以提供它作为*你*可以用来提供“内联验证”的东西。]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T16:39:44.943

您可以创建自己的模式，而不是使用 JavaScript 模式。您可以使用 jQuery UI 对话框，但这并不难。

此外，您绑定到所有这些不同类型的事件这一事实可能会导致其中一些事件不恰当地触发多次。您可以使用简单的数据标志检查您是否已经在警告用户的过程中。

```
$('#email').bind('DOMAttrModified textInput input change keypress paste', function (e) {
    var $this = $(this);
    if ($this.val().match(/[\s]/g) && !$this.data('spacedout')) {
        $this.data('spacedout', true);
        $("<div>").appendTo("body").css({
            position: 'fixed',
            width: '100%',
            height: '100%',
            backgroundColor: 'black',
            opacity: '0.7',
            top: 0,
            left: 0
        }).append($("<div style='color: red;'>Spaces not allowed<br><input type=submit value=OK></div>").on('click', function () {
            $this.data('spacedout', false).trigger('focus');
            $(this).parent().remove();
        }));
        $this.trigger('blur');
    }
}); 
```

[http://jsfiddle.net/ExplosionPIlls/HwYdF/](http://jsfiddle.net/ExplosionPIlls/HwYdF/)

# db2 - How can I get my client application name to show up on zos from java?

> ID：15575245
> 
> 赞同：3
> 
> 时间：2013-03-22T16:24:25.650
> 
> 标签：db2, zos

[This page](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=/com.ibm.db2.luw.apdv.java.doc/src/tpc/imjcc_rjvdsprp.html) says I can put "clientProgramName" as one of the connection parameters and it will show up on db2 as the correlation ID.

And I quote:

> In a java.util.Properties value in the info parameter of a DriverManager.getConnection call.

We're using z/OS. The z/OS version of DB2 seems a lot more limited in terms of this kind of stuff.

Setting the client program name in the params hash of the connect call seems to have no effect, and when I put it on the end of the connect string url like this (which it also says I can do):

```
jdbc:db2://localhost:5036/DBNAME:clientProgramName=myprog 
```

I get this error:

```
[jcc][10165][10051][4.11.77] Invalid database URL syntax: 
jdbc:db2://localhost:5036/DBNAME:clientProgramName=myprog. 
ERRORCODE=-4461, SQLSTATE=42815 
```

Is there any way to send a custom user string to a z/OS db2 server so that connection can be identified on the server?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T14:50:45.227

Depending on the method you use to connect to DB2, you use:

**Class.forName**

```
Class.forName("com.ibm.db2.jcc.DB2Driver");
Properties props = new Properties();
props.put("user", "scott");
props.put("password", "tiger");
props.put("clientProgramName", "My Program 1");
Connection conn = DriverManager.getConnection(
    "jdbc:db2://localhost:50000/sample", props); 
```

**DataSource**

```
Connection conn = null;
DB2SimpleDataSource ds = new com.ibm.db2.jcc.DB2SimpleDataSource();
ds.setDriverType(4);
ds.setServerName("localhost");
ds.setPortNumber(50000);
ds.setDatabaseName("sample");
ds.setUser("scott");
ds.setPassword("tiger");
ds.setClientProgramName("My Application 2");
conn = ds.getConnection(); 
```

I wrote a blog about that: [http://angocadb2.blogspot.fr/2012/12/nombre-de-la-conexion-java-en-db2-java.html](http://angocadb2.blogspot.fr/2012/12/nombre-de-la-conexion-java-en-db2-java.html) (Use your favorite translator because it is in Spanish)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T18:21:10.047

According to this [page on Info Center](http://pic.dhe.ibm.com/infocenter/dzichelp/v2r2/topic/com.ibm.db2z10.doc.java/src/tpc/imjcc_r0021824.htm), there should be a function on the `DB2Connection` interface that allows you to change your application identifier, `setDB2ClientApplicationInformation` (I can't link directly, because there is no anchor, just search for that name).

You can pull the current application ID using the [`CURRENT CLIENT_APPLNAME`](http://pic.dhe.ibm.com/infocenter/dzichelp/v2r2/topic/com.ibm.db2z10.doc.sqlref/src/tpc/db2z_currentclientapplname.htm) special register:

```
SELECT CURRENT CLIENT_APPLNAME FROM SYSIBM.SYSDUMMY1 
```

There are some other ways to set that register listed on the Info Center link listed above, including the [`WLM_SET_CLIENT_INFO`](http://pic.dhe.ibm.com/infocenter/dzichelp/v2r2/topic/com.ibm.db2z10.doc.apsg/src/tpc/db2z_sp_wlmsetclientinfo.htm) function.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T09:07:51.563

I am no DB2 expert, but I *am* looking at a trace record, generated by DB2 for z/OS, that contains a "correlation ID" (field [QWHCCV in the product section correlation header](http://pic.dhe.ibm.com/infocenter/dzichelp/v2r2/topic/com.ibm.db2z10.doc.perf/src/tpc/db2z_productsection.htm) of the trace record) that matches the value I set using setClientProgramName (method of the DB2 data source in my Java application).

My Java application is similar to the "DataSource" example given by AngocA, which is similar to the code quoted in the IBM technote ['The name of a DB2 JDBC application appears as "db2jcc_application". How to change it?'](http://www-01.ibm.com/support/docview.wss?uid=swg21407817). This Java application, running on my Windows PC, connects to DB2 for z/OS. It also - and this is important, depending on which DB2 traces you have started (discussed below) - actually *does something* after connecting. For example:

```
pstmt=conn.prepareStatement("SELECT ... ");
rset=pstmt.executeQuery(); 
```

When you say, regarding the first example given by AngocA, "it doesn't do anything": what did you hope to see? Exactly where are you looking, what are you looking for, and what method (or tool) are you using to look for it?

For example, if you are looking for SMF type 100, 101, or 102 records (generated by DB2 traces) containing QWHCCV field values that match your correlation ID, then (with apologies if this is the bleeding obvious, teaching you how to suck eggs), on DB2 for z/OS, you need to start the DB2 traces (using the DB2 command [START TRACE](http://pic.dhe.ibm.com/infocenter/dzichelp/v2r2/topic/com.ibm.db2z10.doc.comref/src/tpc/db2z_cmd_starttrace.htm)) that generate those records. Otherwise, there will be nothing to see ("it doesn't do anything"). Note that not all DB2 trace records generated by an application (such as the Java application described above) will contain your correlation ID; prior to a certain point in processing, the correlation ID of such records will have a different value (but that is getting off-topic, and anyway is about as far as I am comfortable describing).

**Warning:** Experiment with starting DB2 traces on a "sandbox" (development or test) DB2 system, not a production DB2 system. DB2 traces can result in large volumes of data.

You will also see the correlation ID in the message text of some DB2 V10 messages (such as DSNL027I) after "THREAD-INFO=".

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-02T14:26:46.740

For me I had to add a semicolon after each connection parameter.

EX for your case: jdbc:db2://localhost:5036/DBNAME:clientProgramName=myprog;

EX with multiple params: jdbc:db2://localhost:5036/DBNAME:clientProgramName=myprog;enableSysplexWLB=true;blah=true;

# sql - SQL 中两个时间戳之间一整天的差异

> ID：15575247
> 
> 赞同：0
> 
> 时间：2013-03-22T16:24:31.483
> 
> 标签：sql, oracle10g

请帮我解决这个问题。

我正在使用 Oracle 数据库，并且有一个表，其中每秒插入 4-5 条记录，因此我必须检查一整天是否至少 15 分钟没有发生标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:42:05.343

你可以`lag`用来检查这个。

例如，假设您的字段被称为`ts`数据类型`timestamp`：

```
select ts , prior_ts
  from (select ts, 
               lag(ts) over (order by ts) prior_ts,
               case 
                 when ts - lag(ts) over (order by ts) > numtodsinterval(15, 'minute') 
                 then 'x' 
               end gap_flag 
          from your_table
         where ts between A and B -- limit checks to a range.
       ) 
 where gap_flag = 'x'; 
```

所以它会给出> 15分钟发生的间隙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:19:47.160

使用 EXTRACT 获取差异的一般示例。时间戳 - 很难在 Dazzal 的示例中添加任何内容：

```
SELECT (end_mm-start_mm) minutes_diff
  FROM
  ( -- can extract hours and seconds the same way --
  SELECT EXTRACT(MINUTE From start_ts) start_mm  
       , EXTRACT(MINUTE From end_ts  ) end_mm
   FROM
  ( -- initial data -- 
  SELECT timestamp '2013-03-22 13:10:55' start_ts
       , timestamp '2013-03-22 13:26:35' end_ts
    FROM dual
  ))
 /

 Output: 16 minutes = 26 -10 
```

# c# - 如何更改隐藏字段的名称属性？

> ID：15575249
> 
> 赞同：2
> 
> 时间：2013-03-22T16:24:32.910
> 
> 标签：c#, asp.net

我的 aspx 页面上有一个隐藏字段，我使用母版页。不使用母版页一切都很好，并且隐藏字段的名称属性是正确的。

```
<asp:HiddenField ID="apiversion" ClientIDMode="Static" runat="server" /> 
```

渲染后，结果html是；

```
<input type="hidden" name="apiversion" id="apiversion" value="v0.01"> 
```

但是如果使用母版页，那么结果 html 就像；

```
<input type="hidden" name="ctl00$ContentPlaceHolder1$apiversion" id="apiversion" value="v0.01"> 
```

但是我必须使用母版页并且需要名称属性作为“apiversion”，而不是“ctl00$ContentPlaceHolder1$apiversion”。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:59:58.530

我不确定，但我认为这应该可行...在文档准备好时更改名称属性..

```
$(document).ready(function(){
    $("#<%=apiversion.ClientID%>").attr("name","apiversion");
}); 
```

或者..

```
var arrayOfNames=[];
var actualName=$("#<%=apiversion.ClientID%>").attr("name");
arrayOfNames=actualName.split('$');

var whatYouActuallyWant=arrayOfNames[2];// This is the name you have without master page. 
```

考虑下面的评论..如果出现部分回发，例如更新面板，请添加 pageLoad 功能...

```
function pageLoad(sender,args){
     $("#<%=apiversion.ClientID%>").attr("name","apiversion");
} 
```

# php - 如何在 shell 中从 PHP 启动命令？

> ID：15575252
> 
> 赞同：-1
> 
> 时间：2013-03-22T16:24:44.183
> 
> 标签：php, unix

当你尝试在 git 中进行提交时没有任何消息，它会在 shell 中为你打开编辑器，当你关闭编辑器时，git 会读取内容。

我想做完全一样的，但是在 php.ini 中。

正如我在 git 源代码（[https://github.com/git/git/blob/master/editor.c](https://github.com/git/git/blob/master/editor.c)`use_shell` ）中看到的那样，它只是在标志设置为 true 的情况下启动进程。我怎样才能在 PHP 中实现这一点？另外，我看到 git 将 SIGINT 和 SIGQUIT 信号设置为忽略。如何在 PHP 中完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:06:20.780

`shell_exec()`将在 shell 中生成一个进程：http: [//php.net/shell_exec](http://php.net/shell_exec)

要处理您需要使用`pcntl_signal()`的信号，这需要 pcntl 扩展：[http ://php.net/manual/en/function.pcntl-signal.php](http://php.net/manual/en/function.pcntl-signal.php)

一个完整的例子，打开一个文件进行编辑，然后显示编辑的内容：

```
$fh = fopen('tmp_file', 'w');
fwrite($fh, "Hello!");
fclose($fh);

shell_exec("nano tmp_file > /dev/tty < /dev/tty");

$data = file_get_contents('tmp_file');
unlink('tmp_file');
echo "You entered: $data\n"; 
```

您需要将输入和输出重定向到`/dev/tty`以使流程具有交互性（否则它将挂起，具体取决于编辑器）。

# c# - 等待/异步引用错误

> ID：15575253
> 
> 赞同：13
> 
> 时间：2013-03-22T16:24:45.167
> 
> 标签：c#, reference, compiler-errors, async-await

我试图在一些返回字符串的函数中做一些异步操作。

```
async private void button1_Click(object sender, EventArgs e)
{
     string output = await thr_calc(this, null);
}

async private Task<string> thr_calc(object sender, EventArgs e)
{
     return await zzztest();            
}

string zzztest()
{
    string asd;
    //some stuff here
    return asd;
} 
```

但它给了我每个字符串包含单词 async/await 的错误！我在 windows 桌面上使用俄罗斯版的 ms vs express 2012，所以这里是错误的翻译：

> 找不到“异步”修饰符所需的所有类型。您的目标是错误的框架版本，还是缺少对程序集的引用？

和2个错误：

> 未定义或导入预定义类型“System.Runtime.CompilerServices.IAsyncStateMachine”

我找不到那个参考。我之前尝试过使用 async/await 并且效果很好，现在我做的都是一样的，但事实并非如此。我错过了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-22T16:29:13.067

*   在 thr_calc 中，使用：

    ```
    return zzztest() 
    ```

*   此外，请确保您已将项目设置为使用 .Net 4.5 或更高版本（即引入“异步”时）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-20T13:37:42.413

在 .NET 4.0 项目中，我通过从 nuget 安装 Microsoft.Bcl.Async 包解决了“未定义或导入预定义类型 'System.Runtime.CompilerServices.IAsyncStateMachine'”。在 VS 的 nuget 包管理器中，搜索“bcl”并安装看起来是异步的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T16:33:47.690

如果`zzztest`是长时间运行的操作，您可以这样做以在后台线程中运行它：

```
async private Task<string> thr_calc(object sender, EventArgs e)
{
   return await Task.Run<string>(() => zzztest());            
} 
```

以上也应该解决您的编译错误。

如果`zzztest`不是长时间运行的操作，请考虑不使用`await`/ `async`。

# java - 没有回车的ChannelPipeline中没有调用Netty FrameDecoder？

> ID：15575258
> 
> 赞同：0
> 
> 时间：2013-03-22T16:24:59.560
> 
> 标签：java, netty, nio

我正在使用 Netty，似乎除非/直到收到回车，否则不会调用 ChannelPipeline 中的 FrameDecoder。例如，我编写了以下解码器来尝试检测何时收到完整的 JSON 字符串：

```
public class JsonDecoder extends FrameDecoder {
    @Override
    protected Object decode(ChannelHandlerContext ctx, Channel channel, ChannelBuffer buf) {
        char inChar = 0;
        ChannelBuffer origBuffer = buf.copy();
        StringBuilder json = new StringBuilder();
        int ctr = 0;
        while(buf.readable()) {
            inChar = (char) buf.readByte();
            json.append(inChar);
            if (inChar == '{') {
                ctr++;
            } else if (inChar == '}') {
                ctr--;
            }
        }
        if (json.length() > 0 && ctr == 0) {
            return origBuffer;
        } 
        buf.resetReaderIndex();
        return null;
    }
} 
```

（请原谅有些草率的代码 - 这是我第一次尝试使用 Netty 和一点学习经验。）

我看到的情况是，当我通过使用 telnet 连接到服务器进行测试时，它工作正常，粘贴一些有效的 JSON 并按回车键。但是，如果我在 JSON 字符串中的最后一个关闭“}”之后不按返回，则解码器永远不会被更新的缓冲区调用。

有没有办法配置通道管道以不同的方式工作？我已经用谷歌搜索了这个并查看了 Netty 文档。我觉得我错过了一些基本的东西，我只是没有在正确的地方寻找或寻找正确的东西。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:59:09.250

我想读取 JSON 流更类似于读取 HTTP 流，因为您必须跟踪左大括号和右大括号（如果 JSON 字符串是数组，还需要跟踪括号）。如果您查看 HTTP 解码器的源代码，您会发现它正在使用 ReplayingDecoder。使用重放解码器不是必需的，但如果将整个消息拆分到多个缓冲区中，它会很有帮助。

FrameDecoders 用于读取由特殊字符（因此是解码器的名称）“框起来”或带有长度字段的消息。

我还强烈建议使用 DecoderEmbedder 帮助程序类，这样您就可以在不执行实际 I/O 的情况下对 JSON 解码器进行单元测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T12:50:49.640

您的 telnet 客户端是否恢复到“旧的逐行”模式，即只将完整的行发送到服务器（[telnet 手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?telnet)）？尝试编写一个简单的 Java 客户端来发送消息。

# sql-server - 在选择查询中执行存储过程

> ID：15575260
> 
> 赞同：0
> 
> 时间：2013-03-22T16:25:10.313
> 
> 标签：sql-server, stored-procedures, select-query

我正在使用 SQL Server 2008 R2，我正在尝试运行一个查询，其中也将执行存储过程。

查询是：

```
select a.custnmbr, a.custname, a.salsterr, b.itemnmbr, b.itemdesc, d.slprsnid ,exec dbo.QtySoldPerMonth a.custnmbr, b.itemnmbr, @year 
from rm00101_temp a, iv00101_temp b 
inner join sop30300_RPT c on b.itemnmbr = c.itemnmbr
inner join sop30200_RPT d on c.sopnumbe = d.sopnumbe
where
b.itemnmbr like @houseCode + '%' and itmclscd like @classCode + '%'
AND DATEPART(year, d.docdate) = @year
group by a.custnmbr, a.custname, a.salsterr, b.itemnmbr, b.itemdesc, d.slprsnid
order by d.slprsnid, b.itemnmbr 
```

我真正要问的是如何`dbo.QtySoldPerMonth`在选择查询中包含存储过程的执行？此外，存储过程的参数是：`@custNo = a.custnmbr, @itemNo = b.itemnmbr`和`@year = @year`。

任何有关如何重写查询以执行 sp 的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T16:34:18.567

1.  为 sp 输出创建临时表
2.  exec 存储过程到临时表
3.  将临时表加入查询的其余部分

    ```
    create table #temp(yourCol1 int, your Col2 int...);

    insert #temp(yourCol1,yourCol1...)
    exec dbo.QtySoldPerMonth 

    select * from blah
        join #temp t on (blah.blah=t.id...) 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:30:23.257

您不能将存储过程作为另一个查询的一部分执行。

看看您是否可以使用 UDF 的视图来表示 SP 将返回的相同结构。

**编辑**

另一种选择：首先执行存储过程并在主查询中使用结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:37:18.320

您不能将 SP 结果合并到查询中，但可以将 SP 转储到表中。示例： http: [//blog.sqlauthority.com/2009/09/23/sql-server-insert-values-of-stored-procedure-in-table-use-table-valued-function/](http://blog.sqlauthority.com/2009/09/23/sql-server-insert-values-of-stored-procedure-in-table-use-table-valued-function/) 但在你的情况下它不是一个选项，因为您希望每行具有不同参数的 SP 结果；除非您修改 SP，否则它会返回一个结果集，您可以在将其插入表后使用该结果集。

# java - 转义字符串中的单引号

> ID：15575299
> 
> 赞同：6
> 
> 时间：2013-03-22T16:27:43.717
> 
> 标签：java, javascript

JSP：

```
<% final String data = "some test with ' single quotes"; %>
<script>
    var str = '<%= data %>';
<script> 
```

结果是（JavaScript）：

```
var str = 'some test with ' single quotes'; 
```

> 未捕获的 SyntaxError：意外的标识符

如何替换这个单引号`\'`以避免 JavaScript 错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T16:38:50.257

Apache Commons Lang 包中的使用[`escapeEcmaScript`](http://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/StringEscapeUtils.html#escapeEcmaScript%28java.lang.String%29)方法：

> 将它找到的任何值转义到它们的 EcmaScript 字符串形式中。正确处理引号和控制字符（制表符、反斜杠、cr、ff 等）。所以一个制表符变成了字符`'\\'`和`'t'`。
> 
> Java 字符串和 EcmaScript 字符串之间的唯一区别在于，在 EcmaScript 中，单引号和正斜杠 ( `/`) 被转义。

例子：

> `input string: He didn't say, "Stop!"`
> 
> `output string: He didn\'t say, \"Stop!\"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T16:39:07.623

请记住，您还需要对双引号、新行、制表符和许多其他内容进行编码。一种方法是使用[org.apache.commons.lang.StringEscapeUtils](http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/index.html?org/apache/commons/lang/StringEscapeUtils.html)

```
public class JavaScriptEscapeTest {

    public static void main(String[] args) throws Exception {

        String str = FileUtils.readFileToString(new File("input.txt"));
        String results = StringEscapeUtils.escapeEcmaScript(str);
        System.out.println(results);

    }

} 
```

输入.txt

> 这是一些我想为 JavaScript “转义”的“文本”。我将在这里尝试几个特殊字符：\"

输出

> 下面是一些 \"Text\"，\r\n我\希望对 JavaScript 进行 \"转义\"。\r\n我将在这里尝试几个特殊字符：\ \"

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T16:29:36.300

您是否希望简单地双重转义您的字符串，以便您实际上有 a`\`后跟 a `'`？

```
<% final String data = "some name with \\' single quote"; %> 
```

从您的 JavaScript 代码中，您可以使用[字符串替换](http://www.w3schools.com/jsref/jsref_replace.asp)功能：

```
var str2 = str1.replace("'","\\'"); 
```

# java - 在 StyledText 区域中实现 Java 代码格式化程序

> ID：15575306
> 
> 赞同：-1
> 
> 时间：2013-03-22T16:28:10.560
> 
> 标签：java, swt, code-formatting, styledtext

我想尝试为一个区域实现一个键绑定，就像`Ctrl + i`在 eclipse 中一样，以便该`StyledText`区域中的 Java 代码的格式正确。

我环顾四周，似乎找不到太多关于如何实现缩进的信息。有没有一种方法可以不用大惊小怪地做到这一点？或者它是否会涉及编写我自己的格式化程序，并在很多情况下自动格式化用户在该区域中键入的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:01:38.343

如果您想专门格式化 Java 代码，您可以重用 JDT 中的代码，请参阅[此答案](https://stackoverflow.com/a/2873966/)以获取示例。但是您可能需要做一些工作才能将其应用于`StyledText`保持样式有序。

# c# - 确定 SSL/TLS 加密？

> ID：15575308
> 
> 赞同：0
> 
> 时间：2013-03-22T16:28:20.987
> 
> 标签：c#, ssl

我正在尝试检查一些代码以查看 SSL/TLS 连接的安全性，但我不确定如何确定这一点。

该代码使用使用以下参数创建的证书：

```
makecert
"-pe -n ""CN=certificatename"" -ss my -sr LocalMachine -a sha1 -sky exchange -eku 1.3.6.1.5.5.7.3.1 -in ""certname"" -is my -ir LocalMachine -sp ""Microsoft RSA SChannel Cryptographic Provider"" -sy 12 ""certificatefilename.cer""" 
```

当客户端连接它时，它会创建一个像这样的 sslStream：

```
sslStream.AuthenticateAsServer(SocketServerClass.serverCertificate, False, SslProtocols.Default, False) 
```

任何信息都可以很好地确定有关位大小和安全方法的详细信息。谢谢！

更新：

我在连接时按照您的建议查看了 sslStream 并得到了这个：

CipherAlgorithm = Aes128 {26126} CipherStrength = 128 HashStrength = 160 KeyExchangeAlgorithm = RsaKeyX {41984} KeyExchangeStrength = 1024 SslProtocol = Tls {192}

*这有多安全？“军”级？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:34:27.847

在建立 SSL/TLS 连接之前，您无法确定它的安全性，因为只有在建立连接后才会协商密码套件。使用 Wireshark 检查 SSL/TLS 连接的第一个数据包，并查看选择了哪个密码套件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T16:33:56.960

[SslStream 类](http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.aspx)公开了几个提供有关连接信息的属性：

*   [SslStream.CipherAlgorithm 属性](http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.cipheralgorithm.aspx)
*   [SslStream.CipherStrength 属性](http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.cipherstrength.aspx)
*   [SslStream.HashAlgorithm 属性](http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.hashalgorithm.aspx)
*   [SslStream.HashStrength 属性](http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.hashstrength.aspx)
*   [SslStream.KeyExchangeAlgorithm 属性](http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.keyexchangealgorithm.aspx)
*   [SslStream.KeyExchangeStrength 属性](http://msdn.microsoft.com/en-us/library/system.net.security.sslstream.keyexchangestrength.aspx)

# scripting - 仅获取前一天的文件并将其复制到其他地方的批处理文件

> ID：15575311
> 
> 赞同：0
> 
> 时间：2013-03-22T16:28:26.327
> 
> 标签：scripting, batch-file, copy

好的，所以我做了一些研究，但在这里遇到了一些障碍。我想要做的是，（使用事件调度程序）每天运行一个批处理，它只获取前一天的“ips*.csv 文件（* 只是日期格式）并将其复制到其他地方，以供我测试我使用了“destiny ips”文件夹。我想我在最后一道障碍上搞砸了。

```
 FORFILES /P "C:\Users\J\Desktop\ips bat\source ips" /M "ips*.csv" /C "cmd /c XCOPY C:\Users     \J\Desktop\ips bat\source ips folder C:\Users\J\Desktop\ips bat\destiny ips" /D -1 
```

感谢您提前提供任何帮助。

强尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:48:08.057

要在命令行中包含特殊字符，请使用 0xHH 格式的字符的十六进制代码（例如 0x09 是 TAB 字符，0x22 是双引号 " 字符。）因此 "C:\Program Files\" 变为 ^0x22C:\程序^文件\^0x22

```
FORFILES 
   /P "C:\Users\J\Desktop\ips bat\source ips" 
   /M "ips*.csv" 
   /C "cmd /c 
     XCOPY ^0x22C:\Users\J\Desktop\ips^ bat\source ips folder^0x22
           ^0x22C:\Users\J\Desktop\ips^ bat\destiny ips^0x22" 
   /D -1 
```

为了便于阅读，我将它分成了多行，但你会想把它放回一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:55:54.193

```
for /f "delims=" %%i in (
 'dir /b /o:-d "c:\users...etc...ips*.csv" ' ) do (
 xcopy /d "%%i" "C:\Users\J\Desktop\ips bat\destiny ips\" &goto :eof
 ) 
```

应该非常简单地做到这一点（事实上，它可以都在一行上）它只会将文件的最新版本复制到目标 - 然后只有当目标文件不存在（或与源中的版本。）这应该照顾任何非营业日，如周末或公共假期。

如果目标保留所有历史记录（即`ips*.csv`目标中可能有不在源中的文件，但反之亦然（“昨天”的新文件除外）），那么只需

```
xcopy /d "c:\users...etc...ips*.csv" "C:\Users\J\Desktop\ips bat\destiny ips\" 
```

就足够了。

关键点是：

1.  目的地以“\”结尾表示“这是一个目录名”
2.  /d 将告诉 XCOPY 只复制新的或更新的文件。

（按理说 ...etc... 是所需路径名的其余部分 - DOS 不是通灵的）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:34:29.800

这看起来很可疑-：

```
 XCOPY C:\Users     \J\Desktop\ips bat\source 
```

这是正确的吗？

# javascript - 在克隆选择菜单（ScrollectBox）的选项更改时重定向到谷歌翻译

> ID：15575312
> 
> 赞同：1
> 
> 时间：2013-03-22T16:28:30.543
> 
> 标签：javascript, jquery, clone, google-translate, select-menu

我正在尝试使用以下插件集成谷歌翻译：

[https://github.com/afEkenholm/ScrollectBox](https://github.com/afEkenholm/ScrollectBox)

[https://github.com/afEkenholm/ScrollectBox/blob/master/index.html](https://github.com/afEkenholm/ScrollectBox/blob/master/index.html)

[https://github.com/afEkenholm/ScrollectBox/blob/master/js/ScrollectBox/jquery.scrollectbox.js](https://github.com/afEkenholm/ScrollectBox/blob/master/js/ScrollectBox/jquery.scrollectbox.js)

我通过以下方式调用克隆的选择菜单和翻译功能：

```
<script type="text/javascript">
jQuery(document).ready(function($){ 
            var selectEvent = function($el){    
            Translate(this); // This is the function of translation script
            return false; 
            };
         $(".selection").scrollectBox({
            preset: 'dropdown',
            numVisibleOptions: 4,
            scrollInterval: 150, 
              onSelectEvent: selectEvent,
                scrollOn: 'hover',
          listWidth: 160
});
});
</script> 
```

在选项更改时将页面重定向到谷歌翻译的选择菜单示例如下：

```
<div id = "translate">
<select onchange="Translate(this)" name="select" id="site-translator" class="selection" >
         <option value="Select Language">Select Language</option>
         <option value="en|af">Afrikaans</option>
         <option value="en|sq">Albanian</option>
         <option value="en|ar">Arabic</option>
         <option value="en|hy">Armenian</option><option value="en|az">Azerbaijani</option>
         <option value="en|eu">Basque</option></option>
         </select> 
```

原始选择菜单很好地执行了它的任务，而克隆的选择菜单无法将页面重定向到谷歌翻译器。

原始选择菜单和克隆选择菜单的演示如下：

有没有人很清楚这个克隆选择菜单的限制或范围。为什么页面没有通过它重定向到谷歌翻译？

任何想法都将受到欢迎。

# ruby - 如何编写将修改它的字符串猴子补丁方法

> ID：15575314
> 
> 赞同：4
> 
> 时间：2013-03-22T16:28:35.907
> 
> 标签：ruby, monkeypatching

我想通过提供`shuffle`和`shuffle!`方法来猴子补丁 Ruby 的 String 类。

```
class String
  def shuffle
    self.split('').shuffle.join
  end
end 
```

它返回一个新字符串。如何编写`shuffle!`修改字符串而不是返回副本的方法？

* * *

我试图自己弄清楚，但 String 的源代码在 MRI 中是 C 语言。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T16:31:08.557

您不能分配给`self`，这可能是首先想到的。但是，有一个方便的方法[`String#replace`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-replace)，您知道，它可以替换字符串的内容。

```
class String
  def shuffle
    split('').shuffle.join
  end

  def shuffle!
    replace shuffle
  end
end

s = 'hello'
s.shuffle!
s # => "lhleo" 
```

# iphone - MonoTouch：从命令行使用 mdtool 构建 iOS 应用程序：多个配置文件

> ID：15575316
> 
> 赞同：4
> 
> 时间：2013-03-22T16:28:38.627
> 
> 标签：iphone, jenkins, xamarin, xamarin.ios, mdtool

我想使用 MonoTouch (Xamarin) 的 mdtool 直接从命令行构建我的 ios-apps Appstore-ready。

我使用以下命令：

```
'/Applications/Xamarin Studio.app/Contents/MacOS/mdtool' -v build '--configuration:AppStore|iPhone' MyAppProject.csproj 
```

现在，在 xCode 中，我设置了几个配置文件，而*mdtool*似乎对使用哪一个感到困惑：

![在此处输入图像描述](../Images/aeaee661c189461aeef91eaa13abac34.png)

有没有机会告诉*mdtool*我要用于该构建的所需配置文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T17:16:31.777

在 Xamarin Studio 中，转到项目选项的“iOS 捆绑签名”部分。您可以在此处为每个构建配置指定 Provisioning Profile 和 Code-sign 密钥。

现在，您可能将其设置为“自动”，因此它不知道选择哪一个，因为您有多个与 Info.plist 中的 CFBundleIdentifier 值匹配的规定

# pubnub - 如何在 Ruby 中实现 Pubnub Presence 功能

> ID：15575319
> 
> 赞同：3
> 
> 时间：2013-03-22T16:28:44.667
> 
> 标签：pubnub, user-presence

我想知道如何在 Rails 应用程序中使用 PubNub 实现用户存在，但我没有找到关于如何在服务器端和客户端实现此功能的完整指南。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T01:51:25.063

# PubNub Presence 与 Ruby 和 JavaScript

按照这个连接两个 PubNub SDK 之间状态的简短指南，在 Ruby 和 JavaScript 中轻松开始使用 PubNub Presence。首先，您需要确保在您的服务器上安装了最新的**PubNub Ruby GEM**客户端 SDK。但在我们进入编码方面之前，我们可以谈谈**PubNub Presence**实际上是什么。

## PubNub 存在介绍

PubNub Presence 允许您提出*“谁在那儿？”的问题。***并以用户 ID 列表**和当前在线人数 的形式接收答案。

通常你在 PubNub 频道的上下文中问这个问题。用户连接到 PubNub 频道以便从 PubNub 网络接收数据流。您可以通过 Channels 通过任何有效的 UTF-8 字符串发布和订阅频道来控制流。有时您想通过请求频道上的当前活动和已连接用户列表来了解 PubNub 频道的当前状态。您可以使用 PubNub Presence 功能来做到这一点，该功能提供您寻求的答案。

## PubNub Presence SDK

让我们首先列出为您的目标平台包含/加载 GEM 和 JavaScript SDK 的两个起始步骤（这次是 Ruby+JavaScript 组合）。

### 安装 PubNub Ruby GEM

```
sudo gem install pubnub 
```

接下来，您将确保在 JavaScript 客户端应用程序（通常是手机应用程序或网站应用程序）上运行最新的 JavaScript SDK 之一。

### 包含 PubNub JavaScript 客户端 SDK

```
<script src=http://cdn.pubnub.com/pubnub-3.4.2.min.js ></script> 
```

现在您已经访问了 Ruby 和 JavaScript 的两个必要的基础 SDK 库，您可以通过 PubNub 网络自由地接收/传输信息。接下来，我们将讨论如何轻松接收 PubNub 频道上发生的在线状态事件，以及如何使用`here_now()`API 直接查询当前频道状态。

## PubNub 开发控制台 - 存在

![](../Images/f56df4745cd431ddc635a9010e59c338.png)

> 使用[PubNub 开发人员的控制台](http://www.pubnub.com/console)来监控存在事件。

您可以使用 PubNub 开发者的控制台来观察 Presence 事件的发生。您将能够在呈现部分中以 JSON 形式看到事件有效负载，如下图所示：

![](../Images/6a320584ca57009668a40c1a146576f9.png)

`"action"`您可以接收三个事件，包括：

*   `"join"`- 新用户加入频道。
*   `"leave"`- 用户离开了频道。
*   `"timeout"`- 用户断开连接并超时。

## 带有 REST 的 PubNub 存在

### PubNub 现在在这里

使用 PubNub Presence，您可以访问两条 REST 路由。最简单的路线是`here_now()`路线。

## 带有 SDK 的 PubNub 存在

### JavaScript 中的示例源代码

以下是 JavaScript 中的方法示例，用于在 Channel 上接收数据并在该通道实时发生时接收该通道的 Presence Events。您还会注意到在函数回调中传递给您的参数。此方法允许您将数据流接收到您的 JavaScript 应用程序中。请注意，还有第二种接收状态数据的方法（称为 here_now()），我们将在下面进一步介绍。

```
<script>(function(){
    var pubnub = PUBNUB.init({
        subscribe_key : 'demo'
    });

    pubnub.subscribe({
        channel    : "hello_world",                        // YOUR CHANNEL.
        message    : function( message, env, channel ) {}, // RECEIVE MESSAGE.
        presence   : function( message, env, channel ) {   // PRESENCE EVENTS.
            console.log( "Channel: ",            channel           );
            console.log( "Join/Leave/Timeout: ", message.action    );
            console.log( "Occupancy: ",          message.occupancy );
            console.log( "User ID: ",            message.uuid      );
        }

    })
})();</script> 
```

### Ruby 中的示例源代码

这是 Ruby 代码，它是实时接收 Presence 事件发生时的 ruby​​ 方法。您可以在事件进入时处理事件流或（Firehose）。请注意，还有第二种接收状态数据的方法（称为 here_now()），我们将在下面进一步介绍。

```
require 'pubnub'

pubnub = Pubnub.new(
    :publish_key   => 'demo', # publish_key only required if publishing.
    :subscribe_key => 'demo', # required
    :secret_key    => nil,    # optional, if used, message signing is enabled
    :cipher_key    => nil,    # optional, if used, encryption is enabled
    :ssl           => nil     # true or default is false
)

## Receive Presence Events on a Channel
pubnub.presence(
    :channel  => :hello_world,
    :callback => lambda { |event_data| puts(event_data) }
) 
```

当事件发生（例如用户加入）时，输出数据将如下所示：

```
{"action":"join", "timestamp":1364261400, "uuid":"9d497a30-3af2-4b67-a6b3-82f254711c11", "occupancy":4} 
```

在用户断开连接时，存在事件被触发为：

```
{"action":"leave", "timestamp":1364251540, "uuid":"9d497a30-3af2-4b67-a6b3-82f254711c11", "occupancy":3} 
```

并且可能在发生错误/超时的情况下：

```
{"action":"timeout", "timestamp":1364251540, "uuid":"9d497a30-3af2-4b67-a6b3-82f254711c11", "occupancy":3} 
```

### JavaScript 中的 Here_Now

有一个`here_now()`功能可供您使用，允许您向 PubNub 网络发出单个 REST 请求，以获取通道连接的**当前**状态。请求如下所示：

```
<script>(function(){
    var pubnub = PUBNUB.init({
        subscribe_key : 'demo'
    });

    pubnub.here_now({
        channel  : 'hello_world',
        callback : function (message) { console.log(message) }
    });
})();</script> 
```

响应对象将如下所示：

```
{"uuids":["754e58b3-a79b-4d91-8f6c-5d994e43a310","175c2c67-b2a9-470d-8f4b-1db94f90e39e","fafd273d-9be5-4049-a6ce-653c467f7c5d"],"occupancy":3} 
```

### Ruby 中的 Here_Now

就像在 JavaScript 中一样`here_now()`，Ruby 中也可以使用相同的函数。这是 ruby​​ 语法版本：

```
require 'pubnub'

pubnub = Pubnub.new(
    :publish_key   => 'demo', # publish_key only required if publishing.
    :subscribe_key => 'demo', # required
    :secret_key    => nil,    # optional, if used, message signing is enabled
    :cipher_key    => nil,    # optional, if used, encryption is enabled
    :ssl           => nil     # true or default is false
)

pubnub.here_now(
    :channel  => :hello_world,
    :callback => lambda { |event_data| puts(event_data) }
) 
```

响应对象数据与 JavaScript 中可用的数据相同。

```
{"uuids":["754e58b3-a79b-4d91-8f6c-5d994e43a310","175c2c67-b2a9-470d-8f4b-1db94f90e39e","fafd273d-9be5-4049-a6ce-653c467f7c5d"],"occupancy":3} 
```

最后，如果您想使用 PubNub Network 提供的简单 JSON REST 接口，您可以轻松发出以下请求：

```
curl http://pubsub.pubnub.com/v2/presence/sub_key/demo/channel/hello_world 
```

并且响应输出是相同的：

```
{"uuids":["754e58b3-a79b-4d91-8f6c-5d994e43a310","175c2c67-b2a9-470d-8f4b-1db94f90e39e","fafd273d-9be5-4049-a6ce-653c467f7c5d"],"occupancy":3} 
```

就是这样！超级简单易用的 PubNub Network Presence 与 Ruby on Rails 和 JavaScript。如果您有任何问题，请直接联系 PubNub，也可以访问以下链接了解更多详情：

*   PubNub 网络 Ruby SDK - [https://github.com/pubnub/ruby](https://github.com/pubnub/ruby)
*   PubNub 网络 JavaScript SDK - [https://github.com/pubnub/javascript#simple-example](https://github.com/pubnub/javascript#simple-example)

# optimization - 优化phpmailer的邮件发送流程

> ID：15575326
> 
> 赞同：2
> 
> 时间：2013-03-22T16:29:02.500
> 
> 标签：optimization, query-optimization, phpmailer, php

我正在尝试使用 phpmailer 发送邮件，并且代码运行良好。但是，当我在任务管理器中看到 CPU 使用历史记录时，我可以看到它在 0% 到 100% 之间快速波动。RAM 使用量保持在 6GB 的 4.65GB 左右。

我能够在 15 分钟左右发送 500 封电子邮件，但我觉得它有点慢，因为我的 CPU 使用率波动很大，可能是我的假设错了。

1.  谁能帮助我优化系统的最大使用率并加快流程？
2.  我还在表中创建了一个列`email_sent`来检查已经发送了多少邮件并避免任何重复，但代码没有更新数据库并放弃！（所以在下面注释掉了）。

    ```
    <?php
    //this code sends mails in HTML format using emailids from database. It also sends attachment if needed.
    error_reporting(E_ALL);
    //error_reporting(E_STRICT);
    ini_set("display_errors", "on");
    ini_set('max_execution_time', 30000000); //300 seconds = 5 minutes
    ini_set('memory_limit', '6500M'); //Maximum amount of memory a script may consume (128MB by default)
    date_default_timezone_set('UTC');

    require_once('../class.phpmailer.php');
    //include("class.smtp.php"); // optional, gets called from within class.phpmailer.php if not already loaded

    $mail                = new PHPMailer();
    $body                = file_get_contents("contents.html");
    //$body                = preg_replace('/[\]/','',$body);
    $body                = preg_replace('/IDontKnowWTFThisFunctionIsdoing/','',$body);

    $mail->IsSMTP();        // telling the class to use SMTP
    $mail->Host          = "ssl://smtp.gmail.com";
    $mail->SMTPAuth      = true;                  // enable SMTP authentication
    $mail->SMTPKeepAlive = true;                  // SMTP connection will not close after each email sent
    $mail->Host          = "ssl://smtp.gmail.com"; // sets the SMTP server
    $mail->Port          = 465;                    // set the SMTP port for the GMAIL server
    $mail->Username      = "myemail@gmail.com"; // SMTP account username
    $mail->Password      = "password";        // SMTP account password
    //$mail->SetFrom    ('myemail@gmail.com', 'me');
    $mail-> From         = "myemail@gmail.com";
    $mail->FromName      = "me";    
    $mail->AddReplyTo   ('myemail@gmail.com', 'me');

    $mail->Subject       = "Subject";

    @MYSQL_CONNECT("localhost","root","");
    @mysql_select_db("database"); 
    $startnum1 = 501;
    $endnum1   = 5000;
    //$query     = "SELECT emailid FROM test WHERE email_sent = 0 Limit $startnum1,$endnum1";
    $query     = "SELECT emailid FROM test Limit $startnum1,$endnum1";
    $result = @MYSQL_QUERY($query);
    echo "message sending in process";
    while ($row = mysql_fetch_array ($result)) {
      $mail->body       = $body;
      $mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test
      $mail->IsHTML(true);
      $mail->MsgHTML($body);
      $mail->AddAddress($row["emailid"], $row["emailid"]);
      //$mail->AddStringAttachment($row["emailid"], "contents.html");

      if(!$mail->Send()) {
        echo "Mailer Error (" . str_replace("@", "&#64;", $row["emailid"]) . ') ' . $mail->ErrorInfo . '<br />';
      } else {
        //$query1 = "UPDATE test SET Email_Sent= 1 WHERE EmailID= emailid Limit $startnum1,$endnum1";
        //$result1 = @MYSQL_QUERY($query1);
        echo "Message sent to :" . $row["emailid"] . ' (' . str_replace("@", "&#64;", $row["emailid"]) . ')<br />';
      }
      // Clear all addresses and attachments for next loop
      $mail->ClearAddresses();
      //$mail->ClearAttachments();
    }
    [CPU history] (http://s3.postimg.org/v99ucpq6p/Capture.jpg)
    [System information] (http://s3.postimg.org/3n72s16tt/Capture1.jpg) 
    ```

    ?>

# c++ - 无法对包含字符串 C++ 的结构数组进行操作

> ID：15575333
> 
> 赞同：0
> 
> 时间：2013-03-22T16:29:11.800
> 
> 标签：c++, arrays, string, struct, structure

我有一个包含`string`字段的结构。我创建了一个由这些结构组成的数组，然后我想将它们传递给一个函数（通过引用）。当我注释掉该`string`字段时，一切正常，但如果我不这样做，程序就会崩溃。我在任何地方都找不到答案..

这是代码（我将其简化为仅显示问题）：

```
struct student {
    int a;
    int b;
    string name[20];
    char status;
};

void operation(student the_arr[1],int number_of_students) {
    delete[] the_arr;
    the_arr = new student[3];
    for(int i = 0; i<3; i++) {
        the_arr[i].a = i+5;
        the_arr[i].b = i+4;
    }   
}

int main() {    
    student *abc;
    abc = new student[0];
    operation(abc, 0);  
    system("pause");
    return 0;
} 
```

我需要数组是动态的，所以我可以在需要时更改它的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:38:26.723

假设您不能使用`std::vector`而不是动态分配的数组，请遵循以下答案。在任何其他情况下，您都应该使用标准库提供的容器。

*注意：您的程序不会崩溃。编译器唯一会抱怨它的`allocating zero elements`部分，但会让你编译和运行这个程序。*

你的功能是完全错误的。使用动态分配时，您可以像这样简单地传递一个指针：

```
void operation(student* the_arr, int number_of_students) { 
```

然后在您的函数内部，您将动态分配存储在指针内的内存，该`the_arr`指针不是通过引用传递的，因此会导致创建一个本地指针变量，该变量在执行后将丢失指针：

```
void operation(student*& the_arr [...] 
```

我建议您避免使用以下解决方案，而是返回新指针：

```
student* operation(student* the_arr, int number_of_students) {
    delete[] the_arr;
    the_arr = new student[3];
    [...] 
    return the_arr; // <----
} 
```

分配`abc = new student[0];`没有任何意义。您正在尝试分配 0 个元素的数组。也许你的意思是`abc = new student[1];`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:41:48.247

您应该只使用向量或其他序列对象。虽然我不确定你想用你的代码做什么。这是一个简单的例子：

```
// Vector represent a sequence which can change in size
vector<Student*> students;

// Create your student, I just filled in a bunch of crap for the
// sake of creating an example
Student * newStudent = new Student;
newStudent->a = 1;
newStudent->b = 2;
newStudent->name = "Guy McWhoever";
newStudent->status = 'A';

// and I pushed the student onto the vector
students.push_back( newStudent );
students.push_back( newStudent );
students.push_back( newStudent );
students.push_back( newStudent ); 
```

# jquery - 将 Date 转换为与 JavaScript 兼容的值以呈现计时器

> ID：15575345
> 
> 赞同：1
> 
> 时间：2013-03-22T16:29:42.987
> 
> 标签：jquery

在我的数据库中，我将日期保存在以下格式的 2 个不同字段中：

日期的第一个字段：03/27/2014 时间的第二个字段：20:30（我以 24 小时格式保存）

现在我正在使用 JQuery 倒数计时器[http://keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)在我的网站上显示计时器。计时器期望值作为年、月和日期传递。

呈现时间的代码是：

```
 <script type="text/javascript">

    /*Put your launch date here: */

    //Year
    var countdown_year = 2014; 

    //Month
    var countdown_month = 3;

    //Day
    var countdown_day = 23;

    //No need to change this line
    var timeTo = new Date(parseInt(countdown_year), parseInt(countdown_month-1), parseInt(countdown_day));

    jQuery(function ($) {
        //var austDay = new Date();
        //austDay = new Date(austDay.getFullYear() + 1, 1 - 1, 26);
        $('#defaultCountdown').countdown({until: timeTo});
        //$('#year').text(austDay.getFullYear());
    });

</script> 
```

我不知道如何将我拥有的日期转换为计时器脚本可以接受的格式，并希望有任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:44:57.773

```
 //you need to populate the date below from your database obviously.
    var d = new Date("03/27/2014");
    var countdown_year = d.getFullYear(); 
    var countdown_month = d.getMonth()+1;
    var countdown_day = d.getDate; 
```

示例：http: [//jsfiddle.net/calder12/6TQgE/2/](http://jsfiddle.net/calder12/6TQgE/2/)

# ruby-on-rails - Rails has_many 与不同条件的关联

> ID：15575346
> 
> 赞同：1
> 
> 时间：2013-03-22T16:29:43.127
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

在 User 类中，我有：

```
has_many :posts, foreign_key: "by_user_id" 
```

这会生成以下 sql（当我调用时`user.posts`）

```
SELECT "posts".* FROM "posts" 
WHERE "posts"."by_user_id" = 2 
```

如何定义生成以下 sql 的关联？

```
SELECT "posts".* FROM "posts" 
WHERE "posts"."by_user_id" = 2 or "posts"."group_user_id" = 2 
```

Posts 表包含两个列 (`by_user_id`和`group_user_id`)，`group_user_id`也是一个用户的 id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:39:41.097

```
Post.where(by_user_id: 2, group_user_id: 2) 
```

这是你想要的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:08:10.877

解决方案是在 User 模型中使用类方法：

```
def posts
  Post.where('by_user_id = ? or group_user_id = ?', id, id)
end 
```

# javascript - google.load 从不调用回调

> ID：15575354
> 
> 赞同：3
> 
> 时间：2013-03-22T16:30:03.127
> 
> 标签：javascript, callback, load, google-earth-plugin

我正在尝试使用 Google Earth 插件，发现它的调用方式相当特别：如果在 Javascript 执行的主要流程之外调用（例如通过 setTimeout），它只是拒绝调用负载打回来。下面的例子是独立的插图。更改更改最后两行中的哪一行被注释掉以查看它是否有效。

这是怎么回事？

```
<html>
<head>
  <title>Sample</title>
  <script type="text/javascript" src="https://www.google.com/jsapi"> </script>
  <script type="text/javascript">
      var ge;
      function init() {
        console.log('Initing');
        function cb(instance) {
          ge = instance;
          ge.getWindow().setVisibility(true);
          console.log('Ok');
        };
        function fail() {}
        google.earth.createInstance('map3d', cb, fail);
      }
      function loadTheMap() {
        google.load("earth", "1.x");
        google.setOnLoadCallback(init);
        console.log('Callback is set');
      }
      //loadTheMap(); // works
      setTimeout(loadTheMap, 200); // Does not work
  </script>

</head>
<body>
  <div id="map3d" style="height: 400px; width: 600px;"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T16:56:11.883

这是一个时间问题。

`google.setOnLoadCallback()`允许您指定在页面加载时调用的函数。

当你`setTimeout()`这样使用时，它是在页面加载`setOnLoadCallback()` **后调用的，所以它永远不会调用你的函数。**

而不是使用`google.setOnLoadCallback()`你可以这样做：

```
 function loadTheMap() {
    google.load("earth", "1.x", {"callback" : init});
    console.log('Callback is set');
  }

  setTimeout(loadTheMap, 200); 
```

不过我有点困惑，因为[谷歌文档](https://developers.google.com/loader/#Dynamic)说地球不支持动态加载，但我已经[在 api samples 中看到了它](https://code.google.com/p/earth-api-samples/source/browse/trunk/demos/dynamic-load/index.html?r=109)，它对我有用（在 Chrome 中）。

# python - 将我的 GUI 的内容保存在 wxpython 中的 jpg 中

> ID：15575358
> 
> 赞同：3
> 
> 时间：2013-03-22T16:30:16.507
> 
> 标签：python, wxpython, wxwidgets

我正在尝试构建一个工具，允许用户在 GUI 窗口中使用动态创建的和可拖动的按钮作为节点来创建树。我想在我的工具中添加一个功能，允许用户以任何图片格式保存树。保存的文件无需再次加载到我的应用程序中！就像windows中的Print Screen功能一样。

我该怎么做 ？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T16:48:07.840

不需要特殊的库，您拥有抓取任何窗口的显示并保存到文件所需的一切。像这样的东西：

```
 1 def OnSaveToFile( self, event ):
   2         context = wx.ClientDC( self )
   3         memory = wx.MemoryDC( )
   4         x, y = self.ClientSize
   5         bitmap = wx.EmptyBitmap( x, y, -1 )
   6         memory.SelectObject( bitmap )
   7         memory.Blit( 0, 0, x, y, context, 0, 0)
   8         memory.SelectObject( wx.NullBitmap)
   9         bitmap.SaveFile( 'test.jpg', wx.BITMAP_TYPE_JPEG ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:39:20.793

如果您的意思是要截取 GUI 的屏幕截图，可以使用`ImageGrab`Python 图像库：[http ://effbot.org/imagingbook/imagegrab.htm](http://effbot.org/imagingbook/imagegrab.htm)

# python - 使用理解打印列表元素（python）

> ID：15575359
> 
> 赞同：2
> 
> 时间：2013-03-22T16:30:17.300
> 
> 标签：python, list, list-comprehension

这看起来很简单，但我不知道该怎么做。

我需要将列表中的元素打印到字符串中。我正在尝试使用列表理解，但解释器会引发错误。

```
print '%s (...) %s (...) %s%s (...)%s (...)'%(i for i in mylist) 
```

我不能使用 print '%s'%(i for i in mylist) 因为字符串没有常规结构。上面的代码有语法错误。正确的形式是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:32:29.880

将列表改为元组：

```
print '%s (...) %s (...) %s%s (...)%s (...)' % tuple(mylist) 
```

演示：

```
>>> mylist = ['a', 'b', 'c', 'd', 'e']
>>> print '%s (...) %s (...) %s%s (...)%s (...)' % tuple(mylist)
a (...) b (...) cd (...)e (...) 
```

或者，使用该[`.format()`方法](http://docs.python.org/2/library/stdtypes.html#str.format)来格式化您的字符串：

```
print '{} (...) {} (...) {}{} (...){} (...)'.format(*mylist) 
```

`.format()`还支持索引到列表中：

```
print '{0[0]} (...) {0[1]} (...) {0[2]}{0[3]} (...){0[4]} (...)'.format(mylist) 
```

# html - determine which button was clicked in HTML form - NOT submit type

> ID：15575363
> 
> 赞同：0
> 
> 时间：2013-03-22T16:30:21.453
> 
> 标签：html, prototypejs

I do NOT want the type="submit" because it changes the page -
I'm submitting thru ajax.. so I'm using type="button"

```
<input type="button" value="This is a submit button" name="submit1" onClick="submitMe( this.form )">
<input type="button" value="Another submit button" name="submit2" onClick="submitMe( this.form )">
<input type="button" value="Yet another submit button!" name="submit3" onClick="submitMe( this.form )"> 
```

However ALL the button names appear as passed form variables - I'd expect only the clicked button to be passed, like checkboxes or submit buttons...(if its NOT selected - don't pass it)

how can I determine WHICH button was selected - I need this because the action will be different based on button.

Using prototype 'AJAX.UPDATER' to handle the form.

The JS looks like this...

```
function submitMe( frm ) {
    var div = 'msgDiv';
    var url = 'mypage.aspx';
    var pars = Form.serialize( frm ); 
    var myAjax = new Ajax.Updater( div, url, { asynchronous:true, method:'post', parameters:pars    });
} 
```

thx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:38:35.267

You could do something like this:

```
<input id="a" type="button" value="This is a submit button" name="submit1" onClick="submitMe(this.id)">
<input id="b" type="button" value="Another submit button" name="submit2" onClick="submitMe(this.id)">
<input id="c" type="button" value="Yet another submit button!" name="submit3" onClick="submitMe(this.id)"> 
```

and then in your JS

```
submitMe(id){
  switch(id)
  {
  case 'a':
    -----
    break;
  case 'b':
    -----
    break;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T19:39:35.350

You should probably use the `observe` or `on()` methods instead of the normal `onclick` attributes - for your html add a class

```
<input type="button" value="This is a submit button" class="submitbutton" name="submit1" >
<input type="button" value="Another submit button" class="submitbutton" name="submit2" ">
<input type="button" value="Yet another submit button!" class="submitbutton" name="submit3" > 
```

if you attach an observer to your form by giving it an `id` of "myform" the "click" event will bubble up from the button to the parent form and you can find out what button the click originated from using the `findElement()` method on the event that is passed like so. In this instance I would use the `on()` method as you can specify a CSS selector to limit the scope of the event handling. Otherwise every click would fire the handler.

```
$('#myform').on('click','.submitbutton',function(event){
    var clickedbutton = event.findElement();

    //then you can fire your submitMe() function
    submitMe(this);
}); 
```

in the `on()` method `this` is the element that is being observed

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T00:46:10.037

In your HTML code you can use id attribute instead of name And pass the id of the clicked button to the function ...

```
<input type="button" value="This is a submit button" id="submit1" onClick="submitMe( this.id)">
<input type="button" value="Another submit button" id="submit2" onClick="submitMe( this.id)">
<input type="button" value="Yet another submit button!" id="submit3" onClick="submitMe( this.id)"> 
```

Then in your JS you can get the formId by...

```
function submitMe(eleId) {
    var clickedButton = eleId // use it as you want
    var frm = $(eleId).up('form'); // this will give the parent form 
    var div = 'msgDiv';
    var url = 'mypage.aspx';
    var pars = Form.serialize( frm ); 
    var myAjax = new Ajax.Updater( div, url, { asynchronous:true, method:'post', parameters:pars    }); 
```

}

# javascript - 使用 $.each 调用函数

> ID：15575370
> 
> 赞同：2
> 
> 时间：2013-03-22T16:30:32.380
> 
> 标签：javascript, jquery

我在这里想念什么？我需要点击回调来调用`paginate.something.apply(paginate)`取决于它是上一个还是下一个。

```
prevOrNext = ["previous", "next"],
    pageSet = {
        1: function(){
            paginate.previousPage.apply(paginate)
        },
        2: function(){
            paginate.nextPage.apply(paginate)
        }
    };

$.each(prevOrNext, function(n, v) {
    list[index++] = createLi(v).on('click', function(e) {
        e.preventDefault();
        pageSet[n];
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T16:32:50.503

您实际上并没有调用该函数。您可能打算这样做：

```
pageSet[n](); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T16:36:15.330

要使用变量字符串访问属性，可以使用方括号语法：

```
var f = paginate[v + "Page"].apply(paginate); 
```

调用函数涉及附加包含逗号分隔的参数列表的括号，但很明显您从代码中知道这一点。

# database - 如何在线程下使用数据库和 UI？

> ID：15575372
> 
> 赞同：3
> 
> 时间：2013-03-22T16:30:36.563
> 
> 标签：database, multithreading, delphi, user-interface, responsive-design

我有兴趣制作具有更多响应式设计和功能的更好程序。如今，当我创建远程访问数据的程序时，我的界面会冻结，并且没有动画 GIF 可以在这种情况下工作。

David Hefferman 告诉我，在 VCL 中创建的动画 GIF 即使在线程中也不会响应，因为 VCL 在主线程中，数据库也是如此。

我的疑问是如何使用线程，特别是在数据库中，所以我对此有很多疑问。

我必须在线程函数和过程中实现我的整个数据库吗？如果这是正确的，那么我不能通过将组件拖放到表单来使用数据库，对吗？但是用户输入和网格呢？它们会与这些线程一起正常工作，还是我必须使用常规用户`TEdit`而不是`TDBEdit`将其内容发送到插入/更新 sql 命令？

这里的主要目标是创建 Delphi 应用程序，该应用程序使用 Zeos 访问远程数据库（如 MySQL），但不会因服务器中的每一滴咨询而冻结。至少那些较小的。如果系统将记录列表下载到表中并且用户仍然可以输入内容，那将非常难看。对于这些情况，我非常希望我的动画 GIF（或其他解决方案）可以工作。

*非常感谢您的帮助！*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:46:03.703

根据我的经验，最好的方法是将数据库组件放在数据模块上，然后在每个线程中动态创建这个数据模块。如果在使用它们的线程中创建和初始化数据库组件，它们通常可以正常工作。

但是，有一点需要注意——如果您要连接到 Firebird 数据库，您应该确保当时只有一个线程正在建立连接。（在连接到数据库的代码周围使用关键部分。）这适用于 Firebird 1.5、2.0 和 2.1，但对于 Firebird 2.5 可能不再需要（我还没有机会测试它）。

编辑（回答 EASI 的评论）：是的，连接到数据库可能需要一些时间。如果您经常需要执行短操作，最好让线程保持连接并运行更长的时间。

我可以想到两种方法来做到这一点。1）保持线程处于活动状态并连接并在内部运行消息循环。这个循环将从主线程接收命令，处理它们并返回结果。2) 在线程池中保持线程的初始化和连接，并在需要执行数据库操作时激活它们。

基本上，这两种方法都是相同的，不同之处在于处理“接收和处理命令”循环的级别。

第二种方法可以通过使用该机制在[OmniThreadLibrary中轻松实现。](http://www.omnithreadlibrary.com)`IOmniConnectionPool.SetThreadDataFactory`有关详细信息，请参阅[向 OmniThreadLibrary 添加连接池机制](http://www.thedelphigeek.com/2009/02/adding-connection-pool-mechanism-to.html)和演示[24_ConnectionPool](http://code.google.com/p/omnithreadlibrary/source/browse/#svn%2Ftrunk%2Ftests%2F24_ConnectionPool)。或者，您可以使用高级抽象[后台工作程序，您可以在](http://otl.17slon.com/book/doku.php?id=book%3ahighlevel%3abackgroundworker)[任务初始化](http://otl.17slon.com/book/doku.php?id=book%3ahighlevel%3abackgroundworker#task_initialization)块中基于每个线程建立数据库连接。

# javascript - 使用 find() 在 MongoDB 中搜索嵌套键

> ID：15575373
> 
> 赞同：13
> 
> 时间：2013-03-22T16:30:39.473
> 
> 标签：javascript, node.js, mongodb, database

这将是一个愚蠢的问题，但如果我有一个采用这种格式的 Mongo 对象：

```
{
    "url": "google.com",
    "statusCode": 301,
    "headers": {
        "location": "http://www.google.com/",
        "content-type": "text/html; charset=UTF-8",
        "date": "Fri, 22 Mar 2013 16:27:55 GMT",
        "expires": "Sun, 21 Apr 2013 16:27:55 GMT",
        "cache-control": "public, max-age=2592000",
        "server": "gws",
        "content-length": "219",
        "x-xss-protection": "1; mode=block",
        "x-frame-options": "SAMEORIGIN"
    }
} 
```

使用`db.collections.find()`，如何找到`server`键或嵌套在另一个键中的任何键？

我试过了`db.collections.find({headers:{server:"gws"}})`

我尝试以所有可能的组合引用它们，但输出始终为空白，或者`...`

任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-22T16:40:50.990

您必须使用点符号来获取您要查找的内容。它看起来像：

```
db.collections.find({"headers.server":"gws"}) 
```

在您的查询中，您要求的是文档 where `headers`is an object that looks like `{server: "gws"}`，因此只有在您知道*整个*子文档是什么时才有效。

# objective-c - 现代 Objective-C 和 @synthesize

> ID：15575375
> 
> 赞同：0
> 
> 时间：2013-03-22T16:30:44.697
> 
> 标签：objective-c, synthesize

我正在尝试将我的代码转换为现代 Objective-C 风格。我如何在这里阅读[http://www.techotopia.com/index.php/The_Basics_of_Modern_Objective-C](http://www.techotopia.com/index.php/The_Basics_of_Modern_Objective-C) ”：“但是，在现代 Objective-C 的情况下，默认情况下会进行合成，因此无需使用 @synthesize 声明. 使用默认属性合成时，可以使用带有下划线前缀的属性名称从代码中访问实例变量属性。”

但是，我有：

关系.h

```
@interface Relationship : NSObject <NSCoding>
//...
@property(nonatomic, weak) Person* first;
//...
@end` 
```

其他关系.h

```
#import "Relationship.h"

@interface OtherRelationship : Relationship

@end 
```

其他关系.m

```
#import "OtherRelationship.h"

@implementation OtherRelationship

@synthesize first = _first;

- (void)foo
{
NSLog(@"%@", _first);
} 
```

它正在工作。但是当我删除

```
 @synthesize first = _first; 
```

我收到“使用未声明的标识符'_first'”错误。继承变量是否不适用于自动合成，还是我应该在其他地方寻找问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:37:43.627

超类中的支持 ivar 是子类的 @private。也就是说，子类可以调用self.first，但不能调用_first。如果您想再次@synthesize，请使用不同的名称，因为您不能引用 _first。例如，替换为`@synthesize first = _ffirst;`或直接删除 @synthesize。

# cakephp - cakephp 元素的回调函数？

> ID：15575377
> 
> 赞同：0
> 
> 时间：2013-03-22T16:30:49.843
> 
> 标签：cakephp, element

这可能是一个天真的问题，因为我是 cakephp 新手。

我正在做一个有许多布局、助手和元素的项目。因为这是一个多语言站点，所以我截取最终呈现的输出以进行一些语言转换（因此每个访问者在站点上只能看到他的母语，包括用户输入）。

通过在两个地方添加代码，我设法转换了大部分布局和帮助程序：AppController 的 afterFilter() 和 AppHeler 的 afterRender() 函数。但是我想不出一种集中的方式来处理这些元素，并且有几十个。

所以这是我的问题：cakephp 中的所有元素都有一个共同的祖先类吗？如果有，这个祖先类是否有像 afterRender() 这样的回调函数？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:46:02.200

我不确定这样的回调是否存在特定于“元素”，但查看[源代码](http://api.cakephp.org/1.3/source-class-View.html#322-408)，使用与视图本身*相同*`View::element()`的方法呈现元素，并且应该触发和 *[`_render()`](http://api.cakephp.org/1.3/source-class-View.html#699-766)`beforeRender()``afterRender()`*

 *## 创建自定义视图类和自定义回调

您可以使用自定义的“视图”类并覆盖该`element()`方法，例如在助手中触发您自己的“自定义”回调

像这样的东西；

应用程序/视图/app_view.php

```
class AppViewView extends View {
    /**
     * custom 'element()' method, triggers custom
     * before/aferRenderElement callbacks on all loaded helpers
     */
    public function element($name, $params = array(), $loadHelpers = false)
    {
        $this->_triggerHelpers('beforeRenderElement');
        $output = parent::element($name, $params, $loadHelpers);
        $this->_triggerHelpers('afterRenderElement');
    }

    /**
     * Names of custom callbacks
     */
    protected $_customCallBacks = array(
        'beforeRenderElement',
        'afterRenderElement',
    );

    function _triggerHelpers($callback)
    {
         if (!in_array($callback, $this->_customCallbacks)) {
             // it's a standard callback, let the parent class handle it
             return parent::_triggerHelpers($callback);
         }

         if (empty($this->loaded)) {
             return false;
         }
         $helpers = array_keys($this->loaded);
         foreach ($helpers as $helperName) {
             $helper =& $this->loaded[$helperName];
             if (is_object($helper)) {
                 if (
                      is_subclass_of($helper, 'Helper') 
                      && method_exists($helper, $callback)
                 ) {
                     $helper->{$callback}();
                 }
             }
         }
    }
} 
```

然后，在您的 AppController 中指定要使用的“视图”类；

```
class AppController extends Controller {
    public $view = 'AppView';
} 
```*

# nhibernate - 映射可能没有行的扩展表

> ID：15575378
> 
> 赞同：4
> 
> 时间：2013-03-22T16:30:56.727
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping

我在遗留数据库上使用 Fluent nHibernate，并且有一个主 Person 表和几个包含有关此人的附加信息的扩展表。这些扩展表是一对一的，这意味着一个人在扩展表上只有一行，并且扩展表应该始终映射回一个人。

**表：**人员
**列：** PersonID、FirstName、LastName 等。

**表：** PersonLogin
**列：** PersonID（FK，唯一）、用户名、密码等。

我将我的映射定义为这样（省略了不相关的属性）：

```
public PersonMap()
{
   Table("Person");
   Id(x => x.Id, "PersonID").Not.Nullable();
   References(x => x.Login, "PersonID").LazyLoad();
}

public LoginMap()
{
   Table("PersonLogin");
   Id(x => x.Id, "PersonID").GeneratedBy.Foreign("Person");
   References(x => x.Person, "PersonID").LazyLoad();
} 
```

当我在两个表上都有数据时，这很有效，但我最近了解到一些扩展表没有所有 Person 行的数据。这导致我在查询期间遇到错误。所以，我添加`.NotFound.Ignore()`到我的 PersonMap 使它看起来像这样：

```
 References(x => x.Login, "PersonID").LazyLoad().NotFound.Ignore(); 
```

当我的业务层不需要投影任何扩展表值时，由于[https://nhibernate.jira.com/browse/NH-1001 ，这导致我从登录表中获得不必要的选择。](https://nhibernate.jira.com/browse/NH-1001)这导致我的一些搜索查询的性能很糟糕。

我搜索了很多帖子，但还没有找到关于如何解决这种情况的可靠答案。以下是我尝试过的选项：

* * *

**选项一：**

在扩展表上创建行以确保扩展表上没有没有行的人，然后删除`.NotFound.Ignore()`.

这个选项的问题是它是一个遗留数据库，我不确定我需要在哪里更新以确保在插入 Person 时插入 PersonLogin。

* * *

**选项二：**

从我的 PersonMap 中删除 PersonLogin 引用，并在我的 Person 类中自定义加载它。像这样：

```
public class Person
{
    /// <summary> Gets or sets the PersonID </summary>
    public virtual int Id { get; set; }

    private bool loadedLogin;
    private PersonLogin login;
    public virtual PersonLogin Login
    {
        get
        {
            if (!loadedLogin)
            {
                login = SessionManager.Session().Get<PersonLogin>(Id);
                loadedLogin = true;
            }

            return login;
        }
        set
        {
             login = value;
             loadedLogin = true;
        }
    }
} 
```

我遇到的问题是，在执行查询以拉回大量 Person 对象及其登录时，我无法急切地获取数据。

* * *

**选项三：**

我刚开始玩，看看我是否可以编写一个自定义 IEntityNotFoundDelegate 来不为这些对象抛出异常。

```
private class CustomEntityNotFoundDelegate : IEntityNotFoundDelegate
{
    public void HandleEntityNotFound(string entityName, object id)
    {
        if (entityName == "my.namespace.PersonLogin")
        {
            return;
        }
        else
        {
            throw new ObjectNotFoundException(id, entityName);
        }
    }
} 
```

我将此添加到配置中

```
cfg.EntityNotFoundDelegate = new CustomEntityNotFoundDelegate(); 
```

它捕获了我的场景并立即返回而不是抛出错误，但是现在当我尝试将那些 PersonLogin 属性投影到我的业务对象上时，它正在尝试使用代理对象并抛出这个错误，我试图弄清楚我是否可以干净地处理（可能在 IPostLoadEventListener 中）。

```
System.Reflection.TargetException occurred
Message = Non-static method requires a target 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T20:59:44.147

我想我现在已经通过保留`.NotFound.Ignore()`.

我原来是这样说的：

> 当我的业务层不需要投影任何扩展表值时，由于[https://nhibernate.jira.com/browse/NH-1001 ，这导致我从登录表中获得不必要的选择。](https://nhibernate.jira.com/browse/NH-1001)这导致我的一些搜索查询的性能很糟糕。

我能够调整我的 LINQ 查询以在某些情况下使用 IQueryOver 并改进我在其他情况下对 LINQ 的使用以仅投影必要的值。这似乎已经解决了从拉回扩展表的查询，因为投影中不需要它们的值。

我认为我的查询没有投影这些扩展表，但发现我有一个 ToKeyValuePair 方法，我在投影中使用它来将一些相关属性的 ID 和 Name 字段连接在一起。该方法导致对象完全加载，因为 LINQ 在不加入扩展表的情况下无法确定所需字段是否存在。

# html - XPath 选择带有单个子元素的 div 忽略空格？

> ID：15575382
> 
> 赞同：2
> 
> 时间：2013-03-22T16:31:13.807
> 
> 标签：html, dom, xpath

我想找到不需要的嵌套 div 并通过查找只有一个元素的 div 来清理它们（忽略空白节点）。

```
<div>
    <div>Text in nested div</div>
</div> 
```

到目前为止，我有以下似乎可以部分工作的 xpath。

```
//div[count(node()[normalize-space()]) = 1] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:43:35.623

**使用这个简短而有效的表达式**：

```
//div[*[1][self::div]][not(*[2]|text()[normalize-space()])] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:49:35.457

请试一试：

```
//div[not(*[2]) and div and not(text()[normalize-space()])] 
```

这应该选择`div`具有单个子元素且没有非空白子文本节点的 s。

# java - Android 像一本书一样通过 onTouch 改变活动

> ID：15575388
> 
> 赞同：1
> 
> 时间：2013-03-22T16:31:21.977
> 
> 标签：java, android

我是一名试图创建故事/故事应用程序的学生。我想在用户向右滑动时更改活动，它将转到下一页，当用户向左滑动时，它将返回上一页。我一直在查看示例，但是我仍然对如何操作感到困惑。有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:43:25.957

您可能需要使用页面卷曲效果类型的项目来实现[这样](http://androidjayavelu.blogspot.in/2012/08/page-curl-for-android.html)或[这样](https://code.google.com/p/android-page-curl/)的效果。您认为使用的方式`activities`可能不是一个好主意。因为如果您只是为每个页面制作活动，那么如果您返回，则不能保证它们仍然存在，因为这会增加后台堆栈的负担，并且如果需要为其他页面分配一些资源，系统会自动销毁活动事物。或者您可以创建自己的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:09:19.167

无需为每个页面设置一个活动，只需在同一活动上替换新内容即可。

[https://github.com/MysticTreeGames/android-page-curl](https://github.com/MysticTreeGames/android-page-curl)。页面卷曲。

带有渲染脚本的页面卷曲。

[http://code.google.com/p/renderscript-examples/wiki/PageCurl](http://code.google.com/p/renderscript-examples/wiki/PageCurl)。该链接有一个 pagecurl 演示视频。

可在[http://code.google.com/p/renderscript-examples/source/browse/#svn%2Ftrunk%2FPageCurl](http://code.google.com/p/renderscript-examples/source/browse/#svn%2Ftrunk%2FPageCurl)获得源代码。

有关渲染脚本的详细信息，请访问[http://developer.android.com/guide/topics/renderscript/index.html](http://developer.android.com/guide/topics/renderscript/index.html)。

这是 Romain guy 关于渲染脚本谈话的视频。[http://www.youtube.com/watch?v=5jz0kSuR2j4](http://www.youtube.com/watch?v=5jz0kSuR2j4)。

# extjs - ExtJS 字段验证防止取消按钮单击处理程序触发

> ID：15575391
> 
> 赞同：2
> 
> 时间：2013-03-22T16:31:38.217
> 
> 标签：extjs, extjs4, extjs4.2

这是我的文本字段，模糊验证很好而且很花哨，直到您从该文本字段中删除值，然后尝试按下取消按钮。第一次验证停止按钮处理程序触发，因此表单永远不会被取消。第二次起作用（我假设该字段已经很脏，因此不会发生验证）。

有没有办法阻止这种讨厌的副作用？

```
{
    columnWidth: 0.65,
    validateOnBlur: true,
    xtype: 'coda_textfield',
    Id: 'diary_detail_description',
    allowBlank: false,
    emptyText: 'please enter something',
    name: 'taskDescription',
    listeners: {
        afterrender: function (field) {
            field.focus();
        }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:39:02.363

好的，这很奇怪，当我们验证我们的平台时，会在底部放置一个带有错误消息的栏。嗯，这是将取消按钮移开，所以当我实际点击的位置确定时，我点击了错误栏不是取消按钮。所以非常感谢你试图提供帮助。

# ajax - Jasmine 使用它来覆盖和测试使用 aiax 的方法

> ID：15575392
> 
> 赞同：0
> 
> 时间：2013-03-22T16:31:38.277
> 
> 标签：ajax, testing, jasmine

我有一个包含许多方法的 JS 文件，ajax 调用者是常量。

```
function ajaxCaller(data,url,callback) { //standard jquery ajax call here } 

function method1(){ 
// ... does work ... then 
ajaxCaller(data,url,function(){ // changes the dom } ); 
} 
```

如何使用 jasmine 覆盖 ajaxCaller 方法，该方法几乎被我的 js 文件中的每个方法调用，以便我可以测试 DOM 是否正在发生变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:54:55.490

可能你有类似下面的代码，对吧？

```
function ajaxCaller(data, url, callback) {
    $.ajax(url, { data: data, success: callback });
} 
```

在这种情况下，您可以模拟 jQuery`ajax`方法，以便调用您提供的函数而不是真正的 AJAX 请求。可以定义`response`您希望“从服务器返回”的内容。Jasmine`andCallFake`功能将为您完成：

```
it ('when some response returned from the server, something happens', function() {
    var response = {}; // ... define the response you need
    spyOn($, 'ajax').andCallFake(function(url, options) {
        options.success(response);
    });

    method1();

    // and assert that something really happens ...
}); 
```

# mono - 使用 MONO 访问 G-WAN 中的 KV 存储和环境变量

> ID：15575394
> 
> 赞同：0
> 
> 时间：2013-03-22T16:31:44.597
> 
> 标签：mono, key-value-store, g-wan

我得到了单声道 3.0.6 与 G-WAN 一起使用，现在我正在尝试使用 G-WAN 持久指针和使用单声道的 KV 存储，但不知道该怎么做。

G-WAN 确实在**gwan_api.cs**上公开了一些功能，但 KV 功能和 get_env 不存在。

可以单声道访问吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:44:46.833

> 是否可以在 C# 脚本中访问 G-WAN 的 KV 存储？

不，这就是原因。

我们最初尝试了我们编写的包装器，但与 JNI 一样，强制转换开销违背了轻量级和快速调用的目的。

与 Java 一样，C# 为 G-WAN 本地所做的几乎所有事情提供了大量的解决方案，如果您使用任何一种语言，这都是应该使用的。

请注意，您的应用程序的一部分可以使用 C/C++/D/Objective-C/Objective-C++ 编写并直接调用所有本机 G-WAN API，而您的应用程序的其余部分可能使用 C# 或 Java。

这就是应用服务器支持不同编程语言的优势。

# android - android socket TCP 行终止符

> ID：15575396
> 
> 赞同：0
> 
> 时间：2013-03-22T16:31:58.073
> 
> 标签：android, sockets, buffer, terminator

我怎么告诉

```
 BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream())); 
```

遇到线路终端“\r\n”时停止读取缓冲区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:36:38.117

像这样的东西：

```
String strLine = null;

//Read File Line By Line
while ((strLine = in.readLine()) != null  )   {
        if(strLine.contains("\r\n")){
                break;
             }

        }// end while

         in.close();
         ... 
```

# php - Mysqli 并在插入期间绑定多个值集

> ID：15575405
> 
> 赞同：3
> 
> 时间：2013-03-22T16:32:36.793
> 
> 标签：php, mysql, mysqli

希望有人可以在这里给我一些见解。

当不得不一次向表中插入多行时，我使用了如下所示的 sql：

`INSERT INTO some_names (firstName, lastName) VALUES ('Joe', 'Smith'),('Fred','Sampson'),('Lisa','Pearce')`

如您所见，我用一条语句插入三行。我这样做的原因是我相信它比执行三个不同的语句来插入行更有效。

所以我的问题是：如果我希望能够将我的值绑定到一个语句，我该怎么做？不幸的是，我一直在寻找整个网络，我只能找到以下形式的单个语句示例：

```
$stmt = $mysqli->prepare("INSERT INTO some_names (firstName, lastName) VALUES (?, ?)");
$stmt->bind_param('ss', $firstName, $lastName);
$firstName = "Joe";
$lastName = "Smith";
$stmt->execute();
$firstName = "Fred";
$lastName = "Sampson";
$stmt->execute(); 
```

这似乎相当于执行单独的 INSERT 语句，并且似乎效率较低。

所以我的问题是：有没有办法在多插入语句中绑定？请在这里教育我！谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T11:36:11.183

简单的：

```
$stmt = $mysqli->prepare("INSERT INTO some_names (firstName, lastName) VALUES (?, ?),(?,?),(?,?)")
$stmt->bind_param('ssssss', 'Joe', 'Smith','Fred','Sampson','Lisa','Pearce'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T16:52:00.217

> 这似乎相当于执行单独的 INSERT 语句，并且似乎效率较低。

不，它的效率并不低——因为一条语句只*准备*一次（以弄清楚它应该做什么），之后只有数据被发送到数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:42:35.810

您以错误的方式看待这个问题。

你几乎永远不会做上面展示的事情，它几乎总是在一个循环中完成。即使您动态构建`(?, ?), (?, ?), (?, ?)`，您仍然需要循环构建查询字符串并绑定数据（由于 MySQLi 对 by-ref 绑定的荒谬坚持，这将变得更加复杂），因此它不会为您带来任何好处需要由 PHP 完成的工作——你只是移动了循环——它会在可读性方面给你带来*很多损失。*

它确实在数据库的往返行程中有所收获（假设您总是插入不止一行） - 但这只会在插入数百或数千行或行时产生有意义的差异，在这种情况下，您很可能会执行某种导入操作，在这种情况下，额外的几秒钟可能无关紧要（例如，它不会减慢页面加载速度）。

# joomla - 将 joomla 管理组件从 2.5 更新到 3.x

> ID：15575414
> 
> 赞同：1
> 
> 时间：2013-03-22T16:33:08.167
> 
> 标签：joomla, joomla3.0

我正在尝试更新我们的模板和当前模块以及后端管理组件以使用 Joomla 3。

我已经更新了组件文件以`JControllerLegacy`在需要的地方使用 etc，我可以在我的后端看到它 - 基本上。它是一个字段，您可以在其中放入一串信息，然后将其保存到数据库中，然后在其他模块中重新使用。

**我可以在文本字段中输入内容，但如果我点击保存、保存并关闭或取消，则完全没有任何反应。**

我没有错过任何文件，因为这是从 2.5.x 上的工作版本直接导入的，当我运行 Web 控制台时它告诉我：

`TypeError: b is null @ /media/system/js/core.js:4`

和

`Empty string passed to getElementById(). @ /media/jui/js/jquery.min.js:2`

我认为它试图告诉我文本字段是空的。但是，无论里面有什么，它仍然没有做任何事情，我会认为取消是否无关紧要盒子里是否有任何东西。

任何指针都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:12:11.720

您的表单中有隐藏的输入字段`<input type="hidden" name="task" value="" />`吗？

单击按钮时，将`Joomla.submitbutton(task)`调用 Javascript 函数。这应该在您的布局中定义/覆盖以进行一些检查，然后调用`Joomla.submitform(task)`，它将任务填充到隐藏字段并发送表单。

我认为这些功能有一天会改名。也许您仍然没有`Joomla`前缀？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T21:25:54.570

看看这个页面 - [http://docs.joomla.org/Potential_backward_compatibility_issues_in_Joomla_3.0_and_Joomla_Platform_12.1](http://docs.joomla.org/Potential_backward_compatibility_issues_in_Joomla_3.0_and_Joomla_Platform_12.1)

有些事情在 2.5 和 3.0 之间发生了变化，主要是处理删除 1.5 样式代码。此外，查看核心组件并将它们用作参考，以验证您所做的是否正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-28T14:51:20.930

`JToolBarHelper:save();`替换为 JToolBarHelper::save2new() ; 在进一步的 Joomla3 版本中

# java - 如何从两个数组列表中删除公共值

> ID：15575417
> 
> 赞同：24
> 
> 时间：2013-03-22T16:33:19.110
> 
> 标签：java, list, collections, arraylist

我们如何从两个 ArrayList 中删除公共值？

假设我有两个 Arraylist，如下所示：

```
ArrayList1 = [1,2,3,4]
ArrayList1 = [2,3,4,6,7] 
```

我希望结果为：

```
ArrayListFinal = [1,6,7] 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-22T16:40:54.947

这是您可以遵循的算法来完成任务：

*   构造两个数组的并集
*   构造两个数组的交集
*   从联合中减去交集以获得结果

Java 集合支持[`addAll`](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#addAll%28java.util.Collection%29)、[`removeAll`](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#removeAll%28java.util.Collection%29)和[`retainAll`](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html#retainAll%28java.util.Collection%29). 用于`addAll`构造联合、`retainAll`构造交集和`removeAll`减法，[如下所示](http://ideone.com/ijLfd0)：

```
// Make the two lists
List<Integer> list1 = Arrays.asList(1, 2, 3, 4);
List<Integer> list2 = Arrays.asList(2, 3, 4, 6, 7);
// Prepare a union
List<Integer> union = new ArrayList<Integer>(list1);
union.addAll(list2);
// Prepare an intersection
List<Integer> intersection = new ArrayList<Integer>(list1);
intersection.retainAll(list2);
// Subtract the intersection from the union
union.removeAll(intersection);
// Print the result
for (Integer n : union) {
    System.out.println(n);
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-22T17:02:25.597

您实际上是在要求[Symmetric Difference](http://en.wikipedia.org/wiki/Symmetric_difference)。

```
List<Integer> aList = new ArrayList<>(Arrays.asList(1, 2, 3, 4));
List<Integer> bList = new ArrayList<>(Arrays.asList(2, 3, 4, 6, 7));
// Union is all from both lists.
List<Integer> union = new ArrayList(aList);
union.addAll(bList);
// Intersection is only those in both.
List<Integer> intersection = new ArrayList(aList);
intersection.retainAll(bList);
// Symmetric difference is all except those in both.    
List<Integer> symmetricDifference = new ArrayList(union);
symmetricDifference.removeAll(intersection);

System.out.println("aList: " + aList);
System.out.println("bList: " + bList);
System.out.println("union: " + union);
System.out.println("intersection: " + intersection);
System.out.println("**symmetricDifference: " + symmetricDifference+"**"); 
```

印刷：

```
aList: [1, 2, 3, 4]
bList: [2, 3, 4, 6, 7]
union: [1, 2, 3, 4, 2, 3, 4, 6, 7]
intersection: [2, 3, 4]
**symmetricDifference: [1, 6, 7]** 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-22T17:02:41.103

你可以使用这样的东西：

```
ArrayList <Integer> first = new ArrayList <Integer> ();
ArrayList <Integer> second = new ArrayList <Integer> ();
ArrayList <Integer> finalResult = new ArrayList <Integer> ();

first.add(1);
first.add(2);
first.add(3);
first.add(4);

second.add(2);
second.add(3);
second.add(4);
second.add(6);
second.add(7);

for (int i = 0; i < first.size(); i++){

    if (!second.contains(first.get(i))){

        finalResult.add(first.get(i));
    }
}

for (int j = 0; j < second.size(); j++){

    if (!first.contains(second.get(j))){

        finalResult.add(second.get(j));
    }

} 
```

正如您在帖子中描述的那样，我刚刚填充了两个 ArrayList，并检查了它们是否有不同的元素；如果找到了这样的元素，我将它们添加到 finalResult ArrayList。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T16:41:20.820

```
SetList<Integer> A = new SetList<Integer>();
A.addAll({1,2,3,4});

SetList<Integer> B = new SetList<Integer>();
B.addAll({2,3,4,6,7});

Integer a = null;

for (int i=0; i<A.size(); i++)
{
    a = A.get(i);

    if (B.contains(a)
    {
        B.remove(a);
        A.remove(a);
        i--;
    }
}

SetList<Integer> final = new SetList<Integer>();
final.addAll(A);
final.addAll(B);

// final = { 1, 6, 7 } 
```

# python - 特殊情况下的 re.split()

> ID：15575420
> 
> 赞同：4
> 
> 时间：2013-03-22T16:33:33.657
> 
> 标签：python, regex

我是正则表达式的新手，并且对 re.split 功能有疑问。

在我的情况下，分裂必须关心“特殊逃脱”。

文本应分隔在 处`;`，除非有前导`?`。

**编辑：**在这种情况下，不应拆分这两个部分，并且`?`必须将其删除。

这是一个例子和我希望的结果：

```
import re
txt = 'abc;vwx?;yz;123'
re.split(r'magical pattern', txt)
['abc', 'vwx;yz', '123'] 
```

到目前为止，我尝试了这些尝试：

```
re.split(r'(?<!\?);', txt) 
```

并得到：

```
['abc', 'vwx?;yz', '123'] 
```

可悲的是导致未消耗的`?`麻烦，以下列表理解对性能至关重要：

```
[part.replace('?;', ';') for part in re.split(r'(?<!\?);', txt)]
['abc', 'vwx;yz', '123'] 
```

有没有一种“快速”的方法来重现这种行为？

re.findall 函数可以作为解决方案吗？

例如此代码的扩展版本：

```
re.findall(r'[^;]+', txt) 
```

我正在使用 python 2.7.3。

感谢你在期待！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T17:03:33.827

正则表达式不是这项工作的工具。请改用该`csv`模块：

```
>>> txt = 'abc;vwx?;yz;123'
>>> r = csv.reader([txt], delimiter=';', escapechar='?')
>>> next(r)
['abc', 'vwx;yz', '123'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T18:14:35.727

尝试这个 ：-）

```
def split( txt, sep, esc, escape_chars):
    ''' Split a string
        txt - string to split
        sep - separator, one character
        esc - escape character
        escape_chars - List of characters allowed to be escaped
    '''
    l = []
    tmp = []
    i = 0
    while i < len(txt):
        if len(txt) > i + 1 and txt[i] == esc and txt[i+1] in escape_chars:
            i += 1
            tmp.append(txt[i])
        elif txt[i] == sep:
            l.append("".join(tmp))
            tmp = []
        elif txt[i] == esc:
            print('Escape Error')
        else:
            tmp.append(txt[i])
        i += 1
    l.append("".join(tmp))
    return l

if __name__ == "__main__":
    txt = 'abc;vwx?;yz;123'
    print split(txt, ';', '?', [';','\\','?']) 
```

回报：

```
['abc', 'vwx;yz', '123'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:54:29.637

你不能用一个正则表达式做你想做的事。拆分`?;`后取消转义完全是一项单独的任务，而不是您可以`re`在拆分时让模块为您完成的任务。

只需将任务分开即可；您可以使用生成器为您进行转义：

```
def unescape(iterable):
    for item in iterable:
        yield item.replace('?;', ';')

for elem in unescape(re.split(r'(?<!\?);', txt)):
    print elem 
```

但这不会比您的列表理解更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T17:06:59.000

我会这样做：

```
 re.sub('(?<!\?);',r'|', txt).replace('?;',';').split('|') 
```

# javascript - Google Closure 在 chrome 扩展编译期间需要 RequestFilter 和 BlockingResponse 类型。如何创建这样的类型？

> ID：15575421
> 
> 赞同：1
> 
> 时间：2013-03-22T16:33:34.330
> 
> 标签：javascript, google-chrome-extension, google-closure-compiler

在 Google Closure Compiler 中编译**chrome.webRequest.onBeforeRequest.addListener代码行时出现问题。**

[我从示例https://developer.chrome.com/extensions/samples.html#12a7bf1490a26359eadf10917e37c5b9](https://developer.chrome.com/extensions/samples.html#12a7bf1490a26359eadf10917e37c5b9)中的 CatBlock 扩展中获取了代码示例，并添加了一些编译器参数：

```
// ==ClosureCompiler==
// @output_file_name extension.js
// @compilation_level ADVANCED_OPTIMIZATIONS
// @externs_url http://closure-compiler.googlecode.com/git/contrib/externs/chrome_extensions.js
// ==/ClosureCompiler==

chrome.webRequest.onBeforeRequest.addListener(
function(info) {
    console.log("Cat intercepted: " + info.url);
    // Redirect the lolcal request to a random loldog URL.
    var i = Math.round(Math.random() * loldogs.length);
    return {redirectUrl: loldogs[i]};
},
// filters
{
    urls: ["https://i.chzbgr.com/*"],
    types: ["image"]
},
// extraInfoSpec
["blocking"]); 
```

Closure Compiler 会引发两个 JSC_TYPE_MISMATCH 警告，并且需要**BlockingResponse**和**RequestFilter**类型。根据 API Reference [https://developer.chrome.com/extensions/webRequest.html](https://developer.chrome.com/extensions/webRequest.html)它们都是对象，但是为什么编译器会拒绝我传递的对象？

我查看了 chrome_extensions.js，它有自己的 BlockingResponse 和 RequestFilter 类型的构造函数，但浏览器没有它们。

我还尝试将这些对象分配给变量并使用注释定义类型。

```
/** @type {!BlockingResponse} response */
var response = {redirectUrl: loldogs[i]};

/** @type {!RequestFilter} filter */
var filter= {urls: ["https://i.chzbgr.com/*"], types: ["image"]}; 
```

这没有帮助，似乎这不是正确的方法。

有人可以解释我做错了什么吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T12:12:43.257

要删除警告，您需要输入强制类型转换返回值：

```
// ==ClosureCompiler==
// @output_file_name extension.js
// @compilation_level ADVANCED_OPTIMIZATIONS
// @externs_url http://closure-compiler.googlecode.com/git/contrib/externs/chrome_extensions.js
// ==/ClosureCompiler==

chrome.webRequest.onBeforeRequest.addListener(
  function(info) {   
    console.log("Cat intercepted: " + info.url);
    // Redirect the lolcal request to a random loldog URL.
    var i = Math.round(Math.random() * loldogs.length);
    return /** @type {!BlockingResponse} */ ({redirectUrl: loldogs[i]});
},
// filters
/** @type {!RequestFilter} */ 
({
    urls: ["https://i.chzbgr.com/*"],
    types: ["image"]
}),
// extraInfoSpec
["blocking"]); 
```

*注意额外的括号*

使用这种用法，如果 extern 指定返回类型会更好`BlockingResponse|Object.<string,*>`，但我们需要为此在闭包编译器项目中提交问题。

# database - 为什么 Oracle 使用 DBMS_STATS.GATHER_TABLE_STATS？

> ID：15575422
> 
> 赞同：8
> 
> 时间：2013-03-22T16:33:35.953
> 
> 标签：database, performance, oracle

我发现文档解释了 Oracle 将这些用于性能调整等，但不太了解它实际上做了什么。

有人可以用非常基本的例子用简单的话向我解释吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-22T17:51:47.847

大多数企业数据库，包括 Oracle，都使用基于成本的优化器来确定给定 SQL 语句的适当查询计划。这意味着优化器使用有关数据的信息来确定如何执行查询，而不是依赖于规则（这是旧的基于规则的优化器所做的）。

例如，想象一个简单的错误跟踪应用程序的表

```
CREATE TABLE issues (
  issue_id number primary key,
  issue_text clob,
  issue_status varchar2(10)
);

CREATE INDEX idx_issue_status
    ON issues( issue_status ); 
```

如果我是一家大公司，我的表中可能有 100 万行。其中，100 个`issue_status`处于 ACTIVE 状态，10,000 个`issue_status`处于 QUEUED 状态，989,900 个处于 COMPLETE 状态。如果我想对表运行查询以查找我的活动问题

```
SELECT *
  FROM issues
 WHERE issue_status = 'ACTIVE' 
```

优化器有一个选择。它可以使用索引`issue_status`，然后在表中对匹配的索引中的每一行进行单行查找，也可以对表进行表扫描`issues`。哪个计划更有效将取决于表中的数据。如果 Oracle 期望查询返回表中数据的一小部分，那么使用索引会更有效。如果 Oracle 期望查询返回表中大部分数据，则表扫描会更有效。

`DBMS_STATS.GATHER_TABLE_STATS`是收集允许 Oracle 做出此决定的统计信息。它告诉 Oracle 表中大约有 100 万行，列有 3 个不同的值`issue_status`，并且数据分布不均匀。因此，Oracle 知道使用索引进行查询以查找所有活动问题。但它也知道，当你转身尝试寻找所有已关闭的问题时

```
SELECT *
  FROM issues
 WHERE issue_status = 'CLOSED' 
```

进行表扫描会更有效。

收集统计信息允许查询计划随着数据量和数据分布的变化而随时间变化。当您第一次安装问题跟踪器时，您将遇到很少的 COMPLETED 问题和更多的 ACTIVE 和 QUEUED 问题。随着时间的推移，已完成问题的数量增加得更快。当您在表中获得更多行并且处于各种状态的这些行的相对比例发生变化时，查询计划将发生变化，因此，在理想情况下，您始终可以获得最有效的计划。

# php - 保存状态生成通知“偏移处错误”

> ID：15575432
> 
> 赞同：2
> 
> 时间：2013-03-22T16:33:54.593
> 
> 标签：php, serialization

我正在尝试`unserialize`保存对象的实例状态，但由于*“偏移错误”错误，*`serialized`我的对象无法恢复。

 *这适用于我尝试反序列化的所有对象，即使是最简单的对象。

```
class Object
{
    protected $variable = true;
}

$object = serialize(new Object());
$string = 'O:6:"Object":1:{s:11:"*variable";b:1;}';

echo $object."\n";
echo "length: ". strlen($object)."\n\n";
echo $string . "\n"; // Strangely 2 characters shorter than $object
echo "length: ". strlen($string)."\n";

unserialize($object); // Works
unserialize($string); // Does not work 
```

此代码输出：

```
O:6:"Object":1:{s:11:"*variable";b:1;}
length: 40 

O:6:"Object":1:{s:11:"*variable";b:1;} 
length: 38 

Notice: unserialize(): Error at offset 33 of 38 bytes 
```

我被卡住了，为什么我不能反序列化保存的字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:38:32.470

两个缺失的字符是用于受保护属性的空字节。你*看不到*它们，但它们仍然存在。因此，您`$string`的序列化不是有效的。

## 更新：

实际上，在 UTF-8 编码中可以使空字节可见（使用无效字符符号）。如果您选择**输出，您可以在**[此演示](http://sandbox.onlinephpfunctions.com/code/d9f8ac478722ee2e33432b1a73dd7b7d30573dad)中看到它： **`Textbox`**

 **```
string(40) "O:6:"Object":1:{s:11:"�*�variable";b:1;}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:42:57.183

( ) 实际上由 2 个不可见的空字节 ( `*`)终止。这意味着您必须将其视为 BINARY（这也意味着在数据库中存储在 BINARY/BLOB 列而不是 CHAR/TEXT 列中）。故事的寓意是：PHP 保留随时更改序列化方法*的*权利，因此不要使用任何东西但 php 来序列化字符串，并将序列化的字符串视为 BINARY 而不是字符数据。`"\x2A"``"\x0\x2A\x0"`***

# c - MPIR 编码错误

> ID：15575434
> 
> 赞同：0
> 
> 时间：2013-03-22T16:34:05.627
> 
> 标签：c, memory, memory-leaks

嗨，我尝试在我的代码中使用 mpir（一个库）。我已经更改了我的代码并将所有内容都转换为与 mpir 一起使用。我的代码由相互依赖的循环和方程式中的一系列循环组成，因此很难发现错误。我在调试后运行了代码，它在某个循环的前 500 次迭代中运行良好，然后我收到以下消息：

GNU MP: 无法分配内存 (size=24) 按任意键继续。. .

我不知道这个问题的原因。跟记忆有关系吗？如果它在初始迭代中运行良好，那么如果不是内存，为什么现在会出现问题？

我再次创建了代码，这次它运行得更远了。在给出消息之前，它进行了前 2000 次迭代：

GNU MP: 无法分配内存 (size=16) 按任意键继续。. .

有人知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:49:10.607

好像你已经知道了。这很可能是内存泄漏。

请参阅[MPIR](http://www.mpir.org/mpir-2.6.0.pdf)手册的第 3.7 节：

> mpz_t 和 mpq_t 变量永远不会减少它们分配的空间。通常这是最好的策略，因为它避免了频繁的重新分配。需要在某个特定点将内存返回到堆的应用程序可以使用 mpz_realloc2 ，或者清除不再需要的变量。

[Valgrind](http://valgrind.org/)是一种帮助调试内存泄漏的工具，也可能会有所帮助。祝你好运。

# mysql - 将序列号添加到 MySQL 表中插入的每条记录

> ID：15575437
> 
> 赞同：0
> 
> 时间：2013-03-22T16:34:14.330
> 
> 标签：mysql, database, function, triggers

我的需求很简单。如何为 MySQL 表中插入的每一行添加序列号或 id（我猜可能是 auto_increment 值）？

更具体地说，我有一个 CSV 文件，我使用 LOAD DATA 将单独的字段值存储到数据库中。我所需要的是，如果从 CSV 文件中加载了总共 2000 行，则必须自动插入每一行，并使用唯一的序列号，如 1、2、3 等......

请帮助我提供我需要的确切查询而不是语法。

感谢期待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:35:42.787

添加`AUTO_INCREMENT`到您的 id 列（如果需要，请创建它）。然后它将自动为您执行此操作：

```
ALTER TABLE tablename MODIFY id INTEGER NOT NULL AUTO_INCREMENT; 
```

# c - 在 Windows 上运行良好时 Ubuntu 上的分段错误，用 c 编程

> ID：15575443
> 
> 赞同：-1
> 
> 时间：2013-03-22T16:34:29.133
> 
> 标签：c

我正在编写一个可以在 Ubuntu 和 Windows 上运行的小型振荡运动程序。完成程序的一部分（主要部分）后，我尝试在 Windows 上对其进行测试，工作正常（使用 Pelles C）然后，我将我的数据复制到 Ubunutu 计算机上，在虚拟机（VMware Workstation）上运行。我使用 GCC 对其进行了很好的编译，并因“分段错误（核心转储）”错误而崩溃。崩溃前的输出：

```
Simulation Starting...
Creating Containers.....
Done!
Initializing Containers.....
Initializing Container
Done!...
Initializing Container
Done!...
Initializing Container
Segmentation fault (core dumped)
-------------------------------- 
```

zDA.c 的一部分，用于在仿真中使用之前初始化向量所需的函数

```
int InitializeArray (DATA *item) {
    printf("\nInitializing Container");
    item->num_allocated = 0;
    item->num_elements = 0;
    item->the_array = NULL;
    printf("\nDone!...");
    if (!item->the_array) {
    return -1;
    }
    return 0;
} 
```

调用函数时，来自 zSim.c 的片段

```
int Simulate(SIMOPT so,PRINTOPT po) {
    printf("\nSimulation Starting...\nCreating Containers...");
    //Create Data Objects
        //vectors
    DATA Theta,Omega,T;
    DATA *pTheta = &Theta;
    DATA *pOmega = &Omega;
    DATA *pT = &T;

        //Initial Values
    int method = so.method;
    float g = so.g;
    float l = so.l;
    float itheta = so.theta;
    float iomega = so.omega;
    float dt = so.dt;
    float df = so.df;
    float dw = so.dw;
    float q = so.q;
    float maxtime = so.maxtime;

        //backend variables
    float i = 0; //Simulation Counter
    int k=0;     //Counter to Count array size;
    int kmax = 0;
    float th,thi,om,omi,t,ti; //Simulation variables

    int gt,go,pl,mat;
    printf("..");
    printf("\nDone!\nInitializing Containers...");
    printf("..");
    //Initialize Containers
    InitializeArray(pTheta);
    InitializeArray(pOmega);
    InitializeArray(pT);           //**FOR SOME REASON, it stops working here -_- 
    printf("DONE! NIT");           //It worked fine on windows, there are no dependencies.
    th = pTheta->the_array[0];     
    om = pOmega->the_array[0];
    t = pT->the_array[0]; 
```

我不明白为什么它在 Windows 上工作，在 ubuntu 上没有，Pelles 上的编译器为我修复了一些东西，或者我的虚拟机快疯了，我的意思是......它已经初始化了 3 个数组中的 2 个，这是什么第三个错了:)”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:39:32.663

初始化看起来不会崩溃。但是紧随其后的代码看起来很可疑。数组尚未初始化（嗯......它已初始化，但已初始化为 NULL），但以下代码访问它：

```
th = pTheta->the_array[0]; 
```

# sql-server - SQL Report Builder 已添加相同的键；用 Cte 更新

> ID：15575445
> 
> 赞同：5
> 
> 时间：2013-03-22T16:34:32.037
> 
> 标签：sql-server, reporting-services

我已经声明了一个包含以下变量的表：

```
CREATE TABLE #tmp
(
    [Counter] int              
    ,Period Date primary key
    ,VanMe float
) 
```

我已经做了一些设置 VanMe 的步骤。

以下是发生错误的 With 和 Select 语句：

我将其缩小到 With 的第一部分，因为对于 Report Builder，cte.Period 和 #tmp.Period 被认为是相同的两个键。在我改变它并使用 Select 语句之后，它仍然给了我同样的错误。

有没有办法可以计算 With 语句中的 Avg 并调用

```
Select * from #tmp. 
```

我尝试了更新它根本不起作用。对于 VanMeAvg 和其他 Avg 变量，它给了我 null 。

请帮忙！

我得到的错误是这样的：

```
An item with the same key has already been added. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-22T16:48:14.790

查询中似乎有`2 columns`.Column名称应该是. 重复的列是`same name``select``distinct`

```
HfxMetric
,HfxMetric = AVG(HfxMetric) Over (Partition by [Counter]) 
```

# jquery - Jquery UI 自动完成组合框值在服务器回发后清除

> ID：15575450
> 
> 赞同：1
> 
> 时间：2013-03-22T16:34:48.723
> 
> 标签：jquery, combobox, jquery-ui-autocomplete

我的 aspx 文件中有两个 jquery 自动完成组合框。我有一个 asp.net 服务器端按钮来发送值以对选定的组合框值进行一些计算。我面临一个问题。当我单击服务器端按钮时，我在组合框中选择的值正在消失。我不想要那个。我怎样才能防止这种情况？我的代码如下。

```
 var cache = {};
    $.widget( "ui.combobox", {
        _create: function() {
            var input,
            that = this,
            wasOpen = false,
            select = this.element.hide(),
            selected = select.children( ":selected" ),
            value = selected.val() ? selected.text() : "",
            wrapper = this.wrapper = $( "<span>" )
                .addClass( "ui-combobox" )
                .insertAfter( select );

            function removeIfInvalid( element ) {
                var value = $( element ).val(),
                matcher = new RegExp( "^" + $.ui.autocomplete.escapeRegex( value ) + "$", "i" ),
                valid = false;
                select.children( "option" ).each(function() {
                    if ( $( this ).text().match( matcher ) ) {
                        this.selected = valid = true;
                        return false;
                    }
                });

                if ( !valid ) {
                    // remove invalid value, as it didn't match anything
                    $( element )
                        .val( "" )
                        .attr( "title", value + " didn't match any item" )
                        .tooltip( "open" );
                        select.val( "" );
                        setTimeout(function() {
                            input.tooltip( "close" ).attr( "title", "" );
                        }, 2500 );
                        input.data( "ui-autocomplete" ).term = "";
                }
            }
            input = $( "<input>" )
                .appendTo( wrapper )
                .val( value )
                .attr( "title", "" )
                .addClass( "ui-state-default ui-combobox-input" )

                .autocomplete({
                    delay:0,
                    minLength: 0,
                    source: function(request, response) {
                        var term = request.term;
                        if ( term in cache ) {
                            response($.map(cache[ term ], function(item) { return { label: item.IlAdi,value: item.IlAdi, option: this}}));
                            return;
                        }
                        $.ajax({
                            type: "POST",
                            url: "WebService_GetData.asmx/GetCmbIller",
                            dataType: "json",
                            //data: "{ 'filterKey': '" + request.term + "','select1': '" + $('#cmbLogisticType').val() + "' }",
                            data: JSON.stringify({ filterKey: request.term, ulke: $asp('cmbLogisticType').val(), alisvaris: (input[0].parentElement.parentElement.children[1].attributes[0].nodeValue=="combobox")?false:true }),
                            contentType: "application/json; charset=utf-8",
                            dataFilter: function(data) { return data; },    
                            success: function(data) {
                                cache[term]= data.d;
                                response($.map(data.d, function(item) {
                                    //return { label: item.IlAdi, value: item.IlKodu  }
                                    return { label: item.IlAdi,value: item.IlAdi, option: this}
                                }))
                            },
                            error: function(XMLHttpRequest, textStatus, errorThrown) {
                                alert(errorThrown);
                            }
                       });
                    },
                    matchContains: true,
                    formatItem: formatItem,
                    formatResult: formatResult,
                    select: function( event, ui ) {
                         if(that.options.select != null){
                            that.options.select(event, ui);
                            }
                            ui.item.option.selected = true;
                            that._trigger( "selected", event, {
                                item: ui.item.option
                            });
                            //alert(ui.item.value); 
                    },
                    change: function( event, ui ) {
                        if ( !ui.item ) {
                            removeIfInvalid( this );
                        }
                    }
                })
                .addClass( "ui-widget ui-widget-content ui-corner-left" );

            input.data( "ui-autocomplete" )._renderItem = function( ul, item ) {
                return $( "<li></li>" )
                    .data( "item.autocomplete", item )
                    .append( "<a>" + item.label + "</a>" )
                    .appendTo( ul );
            };

            $( "<a>" )
                .attr( "tabIndex", -1 )
                .attr( "title", "Show All Items" )
                .tooltip()
                .appendTo( wrapper )
                .button({
                    icons: {
                        primary: "ui-icon-triangle-1-s"
                    },
                    text: false
                })
                .removeClass( "ui-corner-all" )
                .addClass( "ui-corner-right ui-combobox-toggle" )
                .mousedown(function() {
                    wasOpen = input.autocomplete( "widget" ).is( ":visible" );
                })
                .click(function() {
                    input.focus();

                    // close if already visible
                    if ( wasOpen ) {
                        return;
                    }

                    // pass empty string as value to search for, displaying all results
                    input.autocomplete( "search", "" );
                });

            input.tooltip({
                tooltipClass: "ui-state-highlight"
            });
        },
         refresh:function(){ 
             selected = this.element.children( ":selected" );
             this.input.val(selected.text());
         },

        _destroy: function() {
            this.wrapper.remove();
            this.element.show();
        }
    });

    function formatItem(row) {
    return row[0] + " (<strong>id: " + row[1] + "</strong>)";
    }
    function formatResult(row) {
    return row[0].replace(/(<.+?>)/gi, ''); //removes html tags
    }

    $(function() {
    $( "#combobox" ).combobox({select : function(event, ui){    document.getElementById('MyLabel').value=ui.item.value; }});
    $( "#combobox2" ).combobox({select : function(event, ui){ document.getElementById('MyLabel2').value=ui.item.value; }});
});

     <div class="ui-widget">
                    <strong>Çıkış:</strong>

                        <select id="combobox" runat="server">
                             <option value="">Any value</option>
                        </select>

                    <!--<label id="MyLabel_" style="visibility:hidden" />-->
                    <asp:HiddenField id="MyLabel" runat="server" />
                </div>

                 <div class="ui-widget">
                    <strong>Varış:</strong> 

                        <select id="combobox2" runat="server">
                             <option value="">Any value</option>
                        </select> 

                    <!--<label id="MyLabel2_" style="visibility:hidden" />-->
                    <asp:HiddenField id="MyLabel2" runat="server" />
                </div> 
```

# ruby-on-rails - 使用回形针将视频上传到按路径折叠但无法通过 url 显示在轨道上的 ruby

> ID：15575460
> 
> 赞同：0
> 
> 时间：2013-03-22T16:35:08.633
> 
> 标签：ruby-on-rails, url, video, path, paperclip

```
class Video < ActiveRecord::Base
  attr_accessible :name
  attr_accessible :vi
has_attached_file :vi, :whiny => false,
    :url => "/uploads/videos/:id/:style/:basename.:extension",
    :path => ":rails_root/uploads/videos/:id_partition/:style/:basename.:extension",   
    :styles => { 
    :medium => { :geometry => "640x480", :format => 'flv' },
    :thumb => { :geometry => "100x100#", :format => 'jpg', :time => 10 }
   }

  validates_attachment_presence :vi
end 
```

然后在我看来，我用来展示视频

```
<%= video_tag vid.vi.url , :size => "320x240", :controls => true%> 
```

但视频无法显示。我写的是正确的网址吗？如何显示我设计的路径中的视频？任何人都可以帮忙吗？欣赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:38:36.403

尝试使用[video_path](http://apidock.com/rails/ActionView/Helpers/AssetTagHelper/video_path)而不是 video_tag。

# simulink - 如何在仿真过程中更改 simulink 模块的值？

> ID：15575464
> 
> 赞同：0
> 
> 时间：2013-03-22T16:35:24.620
> 
> 标签：simulink, stateflow

我在 simulink 模型中有一个常量块；当状态流程图中发生特定事件时，我想在模拟期间更改其值。我该怎么做？

![在此处输入图像描述](../Images/b1345d86e3fb6fc2f86391ef1c921a1c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:50:38.257

如果 Stateflow 图输出指示此事件何时发生，或者您可以添加一个在事件发生时切换的附加输出，则将此指示器循环回（可能通过*Unit Delay*模块）到*Switch*模块的控制输入。*Switch*的两个输入将是两个包含两个不同值的*Constant*块。

如果您必须在不修改模型的情况下以[编程](http://www.mathworks.com/help/simulink/programmatic.html)方式执行此操作，请查看该[`sim`](http://www.mathworks.com/help/simulink/slref/sim.html)命令的参考。我应该警告你，这可能并非易事。

此外，如果希望能够在仿真中修改*Constant*模块的内容（即使其*可调*），您可能必须关闭 Simulink 的内联不变参数的优化设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T12:44:19.860

您还可以在常量模块和 Stateflow 模块之间添加一个[Slider Gain](http://www.mathworks.co.uk/help/simulink/slref/slidergain.html)模块。这将允许您在仿真期间更改滑块增益模块的值，而无需更改常量模块的值。

# c# - 在 C#.Net 中重新创建 QuantumGIS SLD (XML) 文件

> ID：15575465
> 
> 赞同：0
> 
> 时间：2013-03-22T16:35:24.963
> 
> 标签：c#, xml, qgis, sld

**背景**

我目前正在完成我的论文，需要一些关于我正在编写的程序的帮助。我的目标是快速了解一个程序，它可以连接到 PostgreSQL 数据库，检索所需的数据，然后使用它创建一个文件，描述如何在 GIS 套件或 WebMapServer（或类似服务器）中显示指定的数据）。

现在我对 C# 非常熟悉，并且已经使用了几年，但是从未真正深入研究过使用它来存储 XML 中的数据，甚至在我的解决方案中通常使用 XML 文件，因此对 C# 没有太多经验XML 类。

现在，快速指出 SLD (StyledLayerDescriptor) 文件本质上只是 XML 文档。

**问题**

我无法使用 C#重新创建[它。](http://codepaste.net/489tfi)我遇到的主要问题是找出如何使用 XmlWriter 类在每个子元素的开头没有 xmlns="..." 的每个元素名称之前重新创建“se:”前缀，还有长字符串顶部的命名空间声明，尽管看似未使用。

[这](http://codepaste.net/mv9nac)是我迄今为止能够生产的。

*编辑：
我还可以生成带有前缀和命名空间声明的每个子元素，如文档顶部的“StyledLayerDescriptor”所示。*

如果需要，我可以发布我的任何 XmlWriter 代码，要么这真的很简单，我错过了一些东西，要么很难重新创建，因为我现在一直在寻找答案。我已经阅读了我认为“在 C#.Net 2008 中开始 XML”的相关章节，并且仍在努力重新创建文件。

任何帮助或指导将不胜感激，因为它让我坚持了一段时间，而且在我现在修复之前，我无法真正继续编程。

还要指出的是，我觉得在每个元素之前获得前缀 se: 对我来说具有更高的优先级，尽管如果父名称声明为 se:，在这种情况下，您需要为其子元素添加“StyledLayerDescriptor”吗？不必要？

干杯

伯爵

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T21:12:16.670

MSDN 有一篇题为[“XmlWriter](http://msdn.microsoft.com/en-us/library/cfche0ka.aspx)中的命名空间处理”的文章可能对您有所帮助。

# python - 如何提高 matplotlib 图像质量？

> ID：15575466
> 
> 赞同：18
> 
> 时间：2013-03-22T16:35:25.540
> 
> 标签：python, graph, matplotlib

我正在使用 python 程序生成一些数据，使用 matplotlib.pyplot 绘制数据，然后在乳胶文件中显示图形。

我目前将图形保存为 .png 文件，但图像质量不是很好。我已经尝试在`matplotlib.pyplot.figure(dpi=200)`etc 中更改 DPI，但这似乎没什么区别。我也尝试过使用不同的图像格式，但它们看起来都有点褪色并且不是很清晰。

有没有其他人有这个问题？

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-22T20:02:58.820

您可以将图像保存为矢量格式，这样它们就可以在不损失质量的情况下进行缩放。此类格式为 PDF 和 EPS。只需将扩展名更改为`.pdf`or `.eps`，matplotlib 就会写入正确的图像格式。记得`LaTeX`喜欢EPS，`PDFLaTeX`喜欢PDF图片。尽管大多数现代 LaTeX 可执行文件都是伪装的 PDFLaTeX 并动态转换 EPS 文件（效果与您将`epstopdf`包包含在序言中一样，它的性能可能不如您想要的那样好）。

或者，增加DPI，很多。这些是您应该记住的数字：

*   300dpi：普通纸打印
*   600dpi：专业纸质打印。大多数商业办公打印机在其输出中都达到了这一点。
*   1200dpi：专业海报/宣传册级质量。

`figure`我将这些与'选项结合使用来调整 PNG 图形`figsize`的质量，当您通过 dpi 提高质量时，该选项允许正确缩放文本和图形。

# c# - 将数据写入文本文件的一列中的逻辑错误

> ID：15575467
> 
> 赞同：0
> 
> 时间：2013-03-22T16:35:27.723
> 
> 标签：c#, filestream

我的用例是通过浏览到包含要引用的数据的文件的位置来从文本文件中读取数据。文件中的数据保存在列表中。我使用arraylist来获取数据并遍历arraylist并连接每个字符串然后创建输出文件以将数据存储在单列中，如下所示

```
Example of a string:    
20050000    
40223120    
40006523 
```

样品输出：

```
'20050000',    
'40223120',    
'40006523'    
But my code is currently displaying the output in the format:
'20050000'20050000,
'40223120'20050000,
'40006523'40006523 
```

请帮忙。

```
public List<string> list()
    {
        List<string> Get_Receiptlist = new List<string>();
        String ReceiptNo;
        openFileDialog1.ShowDialog();
        string name_of_Textfile = openFileDialog1.FileName;
        try
        {
            StreamReader sr = new StreamReader(name_of_Textfile);
            {
                while ((ReceiptNo = sr.ReadLine()) != null)
                {
                    Get_Receiptlist.Add(ReceiptNo);
                } // end while
                MessageBox.Show("Record saved in the Data list");// just for testing purpose.
            }// end StreamReader

        }
        catch (Exception err)
        {
            MessageBox.Show("Cannot read data from file");
        }
        return Get_Receiptlist;
    }
    private void button2_Click(object sender, EventArgs e)
    {
        string single_quotation = "'";
        string comma = ",";
        string paths = @"C:\Users\sample\Desktop\FileStream\Output.txt";
        if (!File.Exists(paths))
        {
            // Create a file to write to. 
            using (StreamWriter sw = File.CreateText(paths))
            {
                string[] receipt = list().ToArray();
                foreach (string rec in receipt)
                {
                    string quoted_receipt = single_quotation + rec + single_quotation + rec + comma;
                    sw.WriteLine(quoted_receipt);
                    sw.WriteLine(Environment.NewLine);
                }//foreach

                sw.Close();

                MessageBox.Show("Finish processing File");
            }//end using
        }// end if
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:46:09.373

在您的方法 button2_Click 中，您的循环不好：

```
string[] receipt = list().ToArray();
foreach (string rec in receipt)
{
  string quoted_receipt = single_quotation + rec + single_quotation + rec + comma;
  sw.WriteLine(quoted_receipt);
  sw.WriteLine(Environment.NewLine);
}//foreach 
```

首先，我什至不确定它的 Java ......但如果它是 Java，那么我会用这个替换这个片段：

```
List<String> values = list();
for (int i = 0; i < values.size(); i++)
{
  String rec = values.get(i);
  StringBuilder quoted_receipt = new StringBuilder();
  if (i > 0) 
  {
    // add comma only if the first iteration already passed
    quoted_receipt.append(comma);
  }
  quoted_receipt.append(single_quotation).append(rec).append(single_quotation);
  sw.WriteLine(quoted_receipt.toString());
  sw.WriteLine(Environment.NewLine);
} 
```

# java - 无法使用 rmic 编译 .class 文件，类不是文件

> ID：15575476
> 
> 赞同：0
> 
> 时间：2013-03-22T16:35:54.600
> 
> 标签：java, rmi, rmic

好吧，我决定创建 RMI，但面临一个问题。我把CLASSPATH=（到我的jdk）然后我决定用rmic制作存根。我写道： 1\. **rmic -classpath "D:\workspace\Rmi.example\bin\rmi\app" AddServer -d D:\workspace**

我在哪里收到这样的消息： **错误：文件 D:\workspace\Rmi.example\bin\rmi\app\AddServer.class 不包含预期的类型 AddServer，但键入 rmi.app.AddServer。请删除该文件，或确保它出现在类路径的正确子目录中。错误：找不到类 AddServer。2 个错误**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:57:46.730

```
rmic -classpath "D:\workspace\Rmi.example\bin" rmi.app.AddServer -d D:\workspace 
```

**但是：**根本不要使用“rmic”。大约十年没有要求了。阅读 UnicastRemoteObject 的序言。基本上，只要您在构建/导出远程对象时提供端口号，即使为零，也可以在运行时生成动态存根。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:43:02.267

我了解您的课程 AppServer 在 rmi.app 包中？那么你的类路径必须是 D:\workspace\Rmi.example\bin，而不是 D:\workspace\Rmi.example\bin\rmi\app

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T19:00:55.567

你应该从你的包开始的基本目录运行 rmic 。例如：`rmic -classpath "D:\workspace\Rmi.example\bin\" rmi.app.AddServer -d D:\workspace`

# javascript - 在 sharepoint 2010 中检测表单字段 ID 或名称

> ID：15575477
> 
> 赞同：0
> 
> 时间：2013-03-22T16:35:56.543
> 
> 标签：javascript, forms, sharepoint

嗨，我是 SharePoint 2010 的新手，并且研究了这个问题，这就是我想出的，但我仍然感到困惑。我在记事本中编写了以下代码并将其放入我的站点资产库中，我通过内容编辑器将其链接到我的列表表单：

```
<script type="text/javascript">
<!--
  var tags = document.getElementsByTagName("input");
for (var i=0; i<tags.length; i++){

    document.write(tags[i].name + "<br />");
}
//-->
</script> 
```

然后这是我得到的输出：

```
MSOWebPartPage_PostbackSource

MSOTlPn_SelectedWpId

MSOTlPn_View

MSOTlPn_ShowSettings

MSOGallery_SelectedLibrary

MSOGallery_FilterString 
```

嗯，这是前几个返回值。我期待表单标题的“标题”，“创建者”字段的“作者”等。我的最终目标是在初始创建时隐藏一个具有默认值的字段。当被编辑时（由具有更高权限的人），该字段将可见。所以我只是想弄清楚如何首先访问表单元素。谢谢！

# for-loop - 批处理脚本不提供命令

> ID：15575478
> 
> 赞同：2
> 
> 时间：2013-03-22T16:35:57.103
> 
> 标签：for-loop, batch-file

我正在尝试拼凑一个脚本，该脚本将从文件中读取服务器列表，将驱动器映射到每个服务器，创建文件夹，将文件复制到该文件夹​​，运行命令并将结果输出到文件夹，读取新文件的内容，对新列表中的每个项目执行命令，然后取消映射驱动器。

我有前两个部分工作，但是当我尝试从创建的 .txt 文件中读取项目时，我无法在我的命令中填充名称。它很难看，但这是脚本和结果（我正在从本地 c:\temp 文件夹到本地映射为 z:\temp 的远程临时文件夹）：

- - -代码 - - -

```
for /F "tokens=*" %%S in (servers.txt) do (
    net use Z: \\%%S\c$ /USER:domain\user PASSWORD
    z:
    md temp
    c:
    cd\
    cd temp
    copy sdelete.exe z:\temp
    wmic /NODE:"%%S" logicaldisk get name > z:\temp\disks.txt
)

for /F "tokens=*" %%D in (z:\temp\disks.txt) do (
    psexec.exe \\%%S c:\temp\sdelete -z %%D
)

c:  
cd temp
net use z: /delete /y 
```

------结束代码-----

该文件已创建，但最后一部分的结果显示为： C:\Temp>for /F "tokens=*" %D in (z:\temp\disks.txt) do (psexec.exe \%S c:\temp\ sdelete -z %D)

作为新手，任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:50:47.080

试试这个：

```
for /F "tokens=*" %%S in (servers.txt) do (
net use Z: \\%%S\c$ /USER:domain\user PASSWORD
z:
md temp
c:
cd\
cd temp
copy sdelete.exe z:\temp
wmic /NODE:"%%S" logicaldisk get name > z:\temp\disks.txt

for /F "tokens=*" %%D in (z:\temp\disks.txt) do (
psexec.exe \\%%S c:\temp\sdelete -z %%D
)
)

c:  
cd temp
net use z: /delete /y 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T16:50:16.953

代替

```
for /F "tokens=*" %%D in (z:\temp\disks.txt) do ( 
```

尝试

```
for /F "tokens=*" %%D in ('type z:\temp\disks.txt') do ( 
```

# asp.net-mvc-3 - 在 MVC 3 中通过导航打开子页面

> ID：15575481
> 
> 赞同：0
> 
> 时间：2013-03-22T16:36:07.463
> 
> 标签：asp.net-mvc-3

我在 asp.net MVC 3 主目录中创建了 3 个新视图。当我尝试通过导航访问它们中的任何一个时，我得到 404 错误。我尝试使用以下代码访问它们：

```
<ul id="menu">
       <li>@Html.ActionLink("Home", "Index", "Home")</li>
       <li>@Html.ActionLink("Hobbies", "Hobbies", "Home")</li>
</ul> 
```

访问预定义页面 Home 和 About 效果很好。问题在哪里？

PS我正在为母版页使用默认的mvc3布局

# .htaccess - 使用 .htaccess 进行 301 重定向 - 如果包含 www，则重定向

> ID：15575482
> 
> 赞同：1
> 
> 时间：2013-03-22T16:36:08.940
> 
> 标签：.htaccess, http-status-code-301

我的 .htaccess 中有以下 301 重定向

```
RewriteCond %{QUERY_STRING}  ^$
RewriteRule ^old-site\.com,$ http://www.new-site.com/? [R=301,NE,NC,L] 
```

如果我访问

> old-site.com

我被正确重定向。

但是，如果我访问 www.old-site.com，则它不起作用。
有没有办法有效地忽略`www`

**编辑**

有几个这样的条目...

例如：

`www.old-site.com/page-a-242.html`到 `www.new-site.com/page-a`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:44:20.730

[`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)忽略域，所以你的第一条规则可能只是

```
RewriteRule ^$ http://www.new-site.com/? [R,L] 
```

对于您可能使用的其他特定映射[`RewriteMap`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritemap)。有关如何使用它的详细信息，请参阅[txt：纯文本地图。](http://httpd.apache.org/docs/current/rewrite/rewritemap.html#txt)

缺点`RewriteMap`是它只能在主服务器配置或虚拟主机环境中使用。

# c# - DetailsView-Issue 中的 DropDownList - ddl 的值无效，因为它不存在

> ID：15575483
> 
> 赞同：1
> 
> 时间：2013-03-22T16:36:10.133
> 
> 标签：c#, asp.net

好吧，我偶然发现了这个问题的类似案例，并且也遵循了解决方法。但我的情况很奇怪，因为我有 2 个不同的 DetailsView 控件（具有不同的数据），一个有效，另一个无效。

所以这里是详细的问题。我收到以下错误消息：

```
DropDownList2 has a SelectedValue which is invalid because it does not exist in the list of items.
Parameter name: value 
```

我知道[这个线程](https://stackoverflow.com/questions/5886179/asp-net-web-forms-dropdownlist-has-a-selectedvalue-which-is-invalid-because-it-d)，也许我很愚蠢，没有看到任何东西。但也许你会。我有 2 个详细视图，它们根据一个用户的数据集绑定他们的数据。两个 DV 在其 EditItemTemplates 中都有 DropdownList-Controls，用于绑定此列的可能值。我将 SelectedValue='<%# Bind("mycolumn") %>' 用于我的 DropDownList 模板，与 2 个 DV 中的方式完全相同。

如前所述，我知道代码隐藏的解决方法，但我想避免这些，以保持我的代码干净和一致。我无法真正记录为什么我在一个 DetailsView 上使用解决方法，以及为什么我不在另一个上。

这是我的 2 个 DetailsViews 的代码：

```
<asp:DetailsView ID="dv_theme_ava" runat="server" Height="50px" Width="125px" AutoGenerateRows="False"
    DataSourceID="SqlDataSource1" DefaultMode="Edit" AutoGenerateEditButton="True"  DataKeyNames="Pat_ID">
    <Fields>
        <asp:TemplateField HeaderText="Theme">
            <EditItemTemplate>
                <asp:DropDownList ID="DropDownList1" runat="server" DataSourceID="SqlDataSource2"
                    DataTextField="theme" DataValueField="theme" 
                    SelectedValue='<%# Bind("theme") %>'>
                </asp:DropDownList>
                <asp:Label ID="lolbel2" runat="server" Text='<%# Bind("theme") %>'></asp:Label>
                <asp:SqlDataSource ID="SqlDataSource2" runat="server" ConnectionString="<%$ ConnectionStrings:interacct_SQL_convConnectionString %>"
                    SelectCommand="SELECT [theme] FROM [gui_themes]"></asp:SqlDataSource>
            </EditItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Avatar">
            <EditItemTemplate>
                <asp:DropDownList ID="DropDownList2" runat="server" DataSourceID="SqlDataSource3"
                    DataTextField="avatar" DataValueField="avatar">
                </asp:DropDownList>
                <asp:Label ID="lolbel" runat="server" Text='<%# Bind("avatar") %>'></asp:Label>
                <asp:SqlDataSource ID="SqlDataSource3" runat="server" ConnectionString="<%$ ConnectionStrings:interacct_SQL_convConnectionString %>"
                    SelectCommand="SELECT [avatar] FROM [gui_avatars]"></asp:SqlDataSource>
            </EditItemTemplate>
        </asp:TemplateField>
    </Fields>
</asp:DetailsView>
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:interacct_SQL_convConnectionString %>"
    SelectCommand="SELECT * FROM [pat_gui_config] WHERE ([Pat_ID] = @Pat_ID)" DeleteCommand="DELETE FROM [pat_gui_config] WHERE [Pat_ID] = @Pat_ID"
    InsertCommand="INSERT INTO [pat_gui_config] ([Pat_ID], [theme], [avatar]) VALUES (@Pat_ID, @theme, @avatar)"
    UpdateCommand="UPDATE [pat_gui_config] SET [theme] = @theme, [avatar] = @avatar WHERE [Pat_ID] = @Pat_ID">
    <DeleteParameters>
        <asp:Parameter Name="Pat_ID" Type="Int32" />
    </DeleteParameters>
    <InsertParameters>
        <asp:Parameter Name="Pat_ID" Type="Int32" />
        <asp:Parameter Name="theme" Type="String" />
        <asp:Parameter Name="avatar" Type="String" />
    </InsertParameters>
    <SelectParameters>
        <asp:SessionParameter Name="Pat_ID" SessionField="sel_pat_id" Type="Int32" />
    </SelectParameters>
    <UpdateParameters>
        <asp:Parameter Name="theme" Type="String" />
        <asp:Parameter Name="avatar" Type="String" />
        <asp:Parameter Name="Pat_ID" Type="Int32" />
    </UpdateParameters>
</asp:SqlDataSource>

<asp:DetailsView ID="dv_treat_edit" runat="server" AutoGenerateEditButton="True"
    AutoGenerateRows="False" DataKeyNames="Tr_ID" DataSourceID="sql_newcat" DefaultMode="Edit"
    Height="50px" Width="90%" AllowPaging="True" CssClass="dv_details" Style="margin: 0 auto;">
    <Fields>
        <asp:BoundField DataField="Tr_ID" HeaderText="Tr_ID" InsertVisible="False" ReadOnly="True"
            SortExpression="Tr_ID" />
        <asp:BoundField DataField="description" HeaderText="Description" SortExpression="description" />
        <asp:BoundField DataField="syn_ger" HeaderText="Display Name (German)" SortExpression="syn_ger" />
        <asp:TemplateField HeaderText="Type">
            <EditItemTemplate>
                <asp:DropDownList ID="ddl_type0" runat="server" DataSourceID="sql_ddl_type0" DataTextField="type"
                    DataValueField="type" SelectedValue='<%# Bind("type") %>'>
                </asp:DropDownList>
                <asp:SqlDataSource ID="sql_ddl_type0" runat="server" ConnectionString="<%$ ConnectionStrings:interacct_SQL_convConnectionString %>"
                    SelectCommand="SELECT [type] FROM [entry_type]"></asp:SqlDataSource>
            </EditItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Exclusive for Patient_ID">
            <EditItemTemplate>
                <asp:DropDownList ID="ddl_excl_pat0" runat="server" DataSourceID="sql_ddl_exclpat0"
                    DataTextField="Pat_ID" DataValueField="Pat_ID" SelectedValue='<%# Bind("custom_cat_for_Pat") %>'
                    AppendDataBoundItems="true">
                    <asp:ListItem Text="" Value=""></asp:ListItem>
                </asp:DropDownList>
                <asp:SqlDataSource ID="sql_ddl_exclpat0" runat="server" ConnectionString="<%$ ConnectionStrings:interacct_SQL_convConnectionString %>"
                    SelectCommand="SELECT [Pat_ID] FROM [patients]"></asp:SqlDataSource>
            </EditItemTemplate>
        </asp:TemplateField>
    </Fields>
    <CommandRowStyle CssClass="dv_footer" />
    <RowStyle CssClass="dv_tr" />
    <PagerSettings Mode="NumericFirstLast" Position="Top" Visible="False" />
</asp:DetailsView>
<asp:SqlDataSource ID="sql_newcat" runat="server" ConnectionString="<%$ ConnectionStrings:interacct_SQL_convConnectionString %>"
    SelectCommand="SELECT * FROM [treat_cat]" DeleteCommand="DELETE FROM [treat_cat] WHERE [Tr_ID] = @Tr_ID"
    InsertCommand="INSERT INTO [treat_cat] ([description], [syn_ger], [type], [custom_cat_for_Pat]) VALUES (@description, @syn_ger, @type, @custom_cat_for_Pat)"
    UpdateCommand="UPDATE [treat_cat] SET [description] = @description, [syn_ger] = @syn_ger, [type] = @type, [custom_cat_for_Pat] = @custom_cat_for_Pat WHERE [Tr_ID] = @Tr_ID">
    <DeleteParameters>
        <asp:Parameter Name="Tr_ID" Type="Int32" />
    </DeleteParameters>
    <InsertParameters>
        <asp:Parameter Name="description" Type="String" />
        <asp:Parameter Name="syn_ger" Type="String" />
        <asp:Parameter Name="type" Type="String" />
        <asp:Parameter Name="custom_cat_for_Pat" Type="Int32" />
    </InsertParameters>
    <UpdateParameters>
        <asp:Parameter Name="description" Type="String" />
        <asp:Parameter Name="syn_ger" Type="String" />
        <asp:Parameter Name="type" Type="String" />
        <asp:Parameter Name="custom_cat_for_Pat" Type="Int32" />
        <asp:Parameter Name="Tr_ID" Type="Int32" />
    </UpdateParameters>
</asp:SqlDataSource> 
```

注意：数据模型非常简单。为了比较，我使用了 2 个字段“主题”和“类型”。这两个表在我的数据库中只有 1 列，包含字符串条目。

现在，“类型”-DDL 可以很好地获取它的项目，并将 SelectedValue 绑定到数据源带到 DetailsView 的值。当我将“主题”-DDL 与 SelectedValue 绑定时，出现错误。有趣的是：在同一个 EditItemTemplate 中，我设置了一个标签（ID“lolbel2”：p）来检查数据绑定。它有效（当然，当我从 DDL 中删除 SelectedValue 时）。因此，如果没有 DDL 中的 SelectedValue，我的输出就像 [DROPDOWNLIST] 带有项目“space”、“magic” [LABEL] 带有文本“magic”（因为这是我的测试用户的值）。

我错过了什么吗？我完全疯了吗？所以，很抱歉第 10 次重新提出这个问题，但我想了解我的代码的作用。

提前致谢！康拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:01:05.157

哦哦哦。发现了问题，这就是当你像山羊一样固执的时候得到的。:)

在使用 HiddenField 调试解决方法时，我注意到与 Label-Control 绑定方式相同的值有一些尾随空格。特别是：而不是“狗”，我得到了“狗”。虽然这没有显示在 asp:Label 中，但我想这就是在 DropDownList 中找不到该值的原因。

空白是从哪里来的？在我的 SQL 表中，我将“主题”和头像的列创建为“nchar”，而不是“nvarchar”。显然，当使用“nchar”作为 DataType 时，元组的未使用字符用空格填充，或者假设字段具有固定宽度（始终为 x 字符）。

将数据类型更改为“nvarchar”帮助我摆脱了空白，现在 DDL 的数据绑定工作得很好。

我正在记录这一点，因为也许其他人也会偶然发现这一点——而且由于有 50 种解决方案和变通方法，也许只看一下数据库有时就可以解决问题。

# c - 像 C 中的宏一样的函数

> ID：15575485
> 
> 赞同：6
> 
> 时间：2013-03-22T16:36:11.087
> 
> 标签：c, macros, c-preprocessor

我试图理解像宏这样的函数的概念，但是有几点让我感到困惑。例如说我们有：

```
#define Max(a,b)  ((a)>(b)) ? (a):(b)) 
```

我这样称呼它

```
int i = Max(4,5); 
```

这将评估一个相当于`a>b`?的条件表达式 如果是则a，否则为b。但我对 Max 函数如何知道如何处理参数感到困惑。与实际函数不同，实现不是用调用程序中的代码编写的。定义语句右侧的语句是否为我执行此操作？这对我来说只是一件新事物，我想确保我了解这里发生的事情。

像宏这样的特殊功能部分让我感到困惑。我知道这些类型的宏对于降低开销成本很有用，因为它们排除了 JSR RTS 处理器指令，从而节省了堆栈上的内存。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-22T16:45:49.207

```
#define Max(a,b)  ((a)>(b)) ? (a):(b)) 
```

是一个宏，除了在您的代码中进行简单的文本替换之外什么都不会导致，这意味着在预处理此行期间：

```
int i = Max(4,5); 
```

改为：

```
int i = ((4)>(5)) ? (4):(5)); 
```

请注意，在使用像这样的宏时没有类型安全性，并且在调试代码时也会非常困难。好的经验法则是：***当您可以使用函数实现相同功能时，不要使用宏***：

```
int max(int a, int b) {
    return (a > b) ? a : b;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T16:38:24.873

编译器在预处理之后实际看到的是：

```
int i = ((4)>(5)) ? (4):(5)); 
```

传递给宏的参数被替换到宏的主体中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-22T16:56:01.927

停止思考宏之类的可编译代码。宏由预处理器“解析”，而不是实际上在编译阶段。因此，通过宏定义，您只需定义如何处理文本文件中的某些字符串。只有预处理器的输出被传递给编译器。您可以使用`gcc -E`在预处理器之后查看您的源代码。在这个阶段它仍然是 C 代码，但没有任何预处理器指令。

希望这会帮助你。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-22T16:38:17.503

尝试使用 构建您的代码，`gcc -E`并在编译之前查看您的代码的外观

事实上，在构建过程中，编译器会将您的实际代码转换为预处理器代码。在预处理器阶段，编译器将 c 代码中的所有宏替换为其内容并生成另一个称为预处理器代码的代码，然后编译器从预处理器代码生成目标代码

`gcc -E`允许您查看您的预处理器代码

# ios - 系统库中 iOS 上的 EXC_BAD_ACCESS

> ID：15575487
> 
> 赞同：3
> 
> 时间：2013-03-22T16:36:22.423
> 
> 标签：ios, objective-c, xcode, exception, exc-bad-access

我在 Xcode 制作的 iOS 游戏中遇到 EXC_BAD_ACCESS 异常。它发生在模拟器和真实设备上。它总是在游戏中的同一部分，但并不总是发生。它很神秘，因为它似乎与游戏的对象没有任何关系，只是与默认的库/系统方法有关。Xcode 也没有显示是哪一行代码导致了它（但它显示了*汇编*中的哪一行）。我在下面发布回溯。可能是什么原因造成的？我怎样才能找出问题所在？

```
thread #1: tid = 0x1c03, 0x01980051 libobjc.A.dylib`_cache_getImp + 9, stop reason = EXC_BAD_ACCESS (code=1, address=0xc0000008)
frame #0: 0x01980051 libobjc.A.dylib`_cache_getImp + 9
frame #1: 0x0196dac4 libobjc.A.dylib`lookUpMethod + 42
frame #2: 0x0196da88 libobjc.A.dylib`class_respondsToSelector + 65
frame #3: 0x023160d3 CoreFoundation`objectIsKindOfClass + 51
frame #4: 0x0239f087 CoreFoundation`__handleUncaughtException + 71
frame #5: 0x0196f0b9 libobjc.A.dylib`_objc_terminate() + 86
frame #6: 0x01da2a65 libc++abi.dylib`safe_handler_caller(void (*)()) + 13
frame #7: 0x01da2acd libc++abi.dylib`std::terminate() + 23
frame #8: 0x01da3c4e libc++abi.dylib`__cxa_rethrow + 83
frame #9: 0x0196efbd libobjc.A.dylib`objc_exception_rethrow + 47
frame #10: 0x022bbf98 CoreFoundation`CFRunLoopRunSpecific + 360
frame #11: 0x022bbe1b CoreFoundation`CFRunLoopRunInMode + 123
frame #12: 0x01df57e3 GraphicsServices`GSEventRunModal + 88
frame #13: 0x01df5668 GraphicsServices`GSEventRun + 104
frame #14: 0x00aa5ffc UIKit`UIApplicationMain + 1211
frame #15: 0x000026e1 Game`main(argc=1, argv=0xbffff3bc) + 95 at main.m:6
frame #16: 0x00002645 Game`start + 53 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:42:13.967

这是一个未被发现的例外。应该有一条日志消息描述所引发的异常。

* * *

Ew....丑陋...这是导致崩溃的格式错误的异常。

很可能，您的应用程序正在以某种方式破坏内存。创建一个异常断点（它在调试器 UI 中）并查看是否可以让它在调试器中中断。由于它是回溯中的 rethrow()，因此原始 throw 实际上可能很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T00:08:25.337

我也看到了带有此堆栈跟踪的 EXC_BAD_ACCESS，这是在 DisplayLink 的处理程序中引发 NSException 的结果。例如：

```
#0  0x01142e52 in objc_exception_throw ()
#1  0x01d04deb in +[NSException raise:format:] ()
#2  0x00005502 in -[ViewController glkView:drawInRect:] at ViewController.m:225
#3  0x010e8675 in -[GLKView _display:] ()
#4  0x010e8c89 in -[GLKView display] ()
#5  0x010e9ab7 in -[GLKViewController _updateAndDraw] ()
#6  0x01156663 in -[NSObject performSelector:] ()
#7  0x010e900f in -[GLKDisplayLinkMessenger message] ()
#8  0x0231f2d2 in CA::Display::DisplayLink::dispatch(unsigned long long, unsigned long long) ()
#9  0x0231f75f in CA::Display::TimerDisplayLink::callback(__CFRunLoopTimer*, void*) ()
#10 0x01cc4376 in __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ ()
#11 0x01cc3e06 in __CFRunLoopDoTimer ()
#12 0x01caba82 in __CFRunLoopRun ()
#13 0x01caaf44 in CFRunLoopRunSpecific () 
#14 0x01caae1b in CFRunLoopRunInMode ()
#15 0x01c5f7e3 in GSEventRunModal ()
#16 0x01c5f668 in GSEventRun ()
#17 0x0001a65c in UIApplicationMain () 
```

此重现是通过在 Xcode 4.6.2 中的 OpenGL 游戏应用程序模板的 -[ViewController glkView:drawInRect:] 函数中引发异常而产生的。

有趣的是，它可以在运行 iOS 6.0+ 的设备和模拟器上重现，但不能在 iOS 5.1 上重现。

在四处寻找之后，似乎在 iOS 6.0+ 中，向 DisplayLink::Dispatch 添加了一个自动释放池，并且它似乎在未处理的异常处理程序有机会之前对 NSException 进行了分配：

```
#0     0x01d07470 in -[NSException dealloc] ()
#1     0x011569ff in -[NSObject release] ()
#2     0x011550d5 in objc_release ()
#3     0x01155bd9 in (anonymous namespace)::AutoreleasePoolPage::pop(void*) ()
#4     0x01ca7468 in _CFAutoreleasePoolPop ()
#5     0x0230ffc1 in CA::AutoreleasePool::~AutoreleasePool() ()
#6     0x0231f3d2 in CA::Display::DisplayLink::dispatch(unsigned long long, unsigned long  long) ()
#7     0x0231f75f in CA::Display::TimerDisplayLink::callback(__CFRunLoopTimer*, void*) ()
#8     0x01cc4376 in __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ ()
#9     0x01cc3e06 in __CFRunLoopDoTimer ()
#10     0x01caba82 in __CFRunLoopRun ()
#11     0x01caaf44 in CFRunLoopRunSpecific ()
#12     0x01caae1b in CFRunLoopRunInMode ()
#13     0x01c5f7e3 in GSEventRunModal ()
#14     0x01c5f668 in GSEventRun ()
#15     0x0001a65c in UIApplicationMain ()
#16     0x00002c3d in main 
```

这个自动释放池似乎在 iOS 6.0 中就位。

可能的解决方法：在 CADisplayLink 目标函数中捕获所有 NSException，然后手动保留它们并重新抛出，或者调用未处理的异常处理程序，然后中止。

# cakephp - CakePHP1.3：在分页视图中递增数字

> ID：15575488
> 
> 赞同：0
> 
> 时间：2013-03-22T16:36:27.037
> 
> 标签：cakephp, cakephp-1.3

我正在显示通过`$this->paginate()`视图获得的搜索结果。分页效果很好，我想在视图上为用户显示每一行的搜索结果的行号。我只是这样做`<?php echo $i; ?>`，`$i`我的计数器在哪里，但在每一页上，数字从 1 开始。所以，如果我在搜索结果的第一页上，它将显示 1 ~ 10（每页 10 行数据）。我移动到第二页，它仍然会显示 1 ~ 10，依此类推。

我怎样才能使它在第一页上显示 1~10，在第二页上显示 11~20，等等。为什么它会重置，即使我一个一个地检查我的搜索结果数组元素并`$i++`在每次迭代中都这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T18:10:51.690

您想`counter()`用作 Paginator 助手的一部分。

```
$start = $this->Paginator->counter(array('format' => '%start%'));

foreach( $records as $record ) {
  $start++;
  ...
} 
```

看看有没有帮助！

# bash - bash while 循环不会自行停止

> ID：15575497
> 
> 赞同：2
> 
> 时间：2013-03-22T16:37:04.960
> 
> 标签：bash, loops, while-loop

我得到了这个简单的脚本，它假设要创建一堆帐号，它应该有两个值：起始帐号和要创建的帐户数量。随着我们去增加帐号。例如：

./pre_v_test.sh 123 3 应该给

123

124

125

现在它这样做了，只有一个问题：完成后它不能停止。结果看起来更像这样：

```
....
Writing subsriber: 102145
lalala
Writing subsriber: 102145
lalala
Writing subsriber: 102145
lalala
.... 
```

你明白了。

下面是代码：

```
#!/bin/bash

i_loop="0"
while [ $i_loop -lt $2 ]
do

i_subscriber=`expr $1 + $i_loop`

echo Writing subsriber: $i_subscriber

#actual account details here, not relevent to the question 

echo "lalala"
done 
```

我在这里查看了这个while循环的例子（[http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_09_02.html](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_09_02.html)）但是对于我的生活我无法发现差异，是什么让他工作和我的失败？此外，截至两个月前，该脚本正在运行。the 和 now 之间的唯一区别是，上次是在真正的 SUSE 上，而这次是在 vmware 上的 SUSE 上。

谢谢大家戴维

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:45:37.103

您没有增加变量：

```
#!/bin/bash

i_loop=0

while [ $i_loop -lt $2 ]
do

i_subscriber=`expr $1 + $i_loop`

echo Writing subsriber: $i_subscriber

i_loop=`expr $i_loop + 1`

done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:47:40.793

根本原因是您的变量 $i_loop 将永远 = 0，它总是小于 $2。
你需要添加

```
let i_loop=$i_loop + 1 
```

循环内的某处。

# c++ - SDL - 获取原生屏幕分辨率

> ID：15575500
> 
> 赞同：5
> 
> 时间：2013-03-22T16:37:08.370
> 
> 标签：c++, sdl, fullscreen, screen-resolution

我的代码：

1.  *窗口.cpp*

    ```
    Window::Window(int w, int h, const char *title, const char *icon)
    {
        height = h;
        width = w;

        if(SDL_Init( SDL_INIT_EVERYTHING ) == 0)
        {
            SDL_WM_SetCaption(title, NULL);
            SDL_WM_SetIcon(SDL_LoadBMP(icon),NULL);

            screen = SDL_SetVideoMode(width, height, 32,
                         SDL_SWSURFACE | SDL_RESIZABLE | SDL_DOUBLEBUF);
            if(screen == NULL)
            {
                running = false;
                return;
            }
            fullscreen = false;
        }
        else
            running = false;
            return;
    }

    Window::Window()
    {
        const SDL_VideoInfo* info = SDL_GetVideoInfo();
        screenWidth = info->current_w;
        screenHeight = info->current_h;
        Window(640, 480, "Flatgu game", "rsc/img/icon.bmp");
    } 
    ```

2.  *窗口.h*

    ```
    class Window
    {
    public:
        Window();
        ~Window();

        int getWidth() {return width;}
        int getHeight() {return height;}
        bool isFullscreen() {return fullscreen;}

        void toggleFullscreen();

    private:
        Window(int w, int h, const char *title, const char *icon);

        bool fullscreen, running;
        int height, width, screenWidth, screenHeight;
        SDL_Surface *screen;
    }; 
    ```

它编译得很好，但是在编译之后，我得到了这个丑陋的错误： ![一些地址问题](../Images/b8150502073d7a45351decc909d42c39.png)

我的问题的原因是什么？为什么我会得到这么奇怪的数字？

**我的目标是存储原始屏幕分辨率以供进一步使用**（例如*切换到全屏*），我必须在调用`SDL_SetVideoMode()`. 这就是为什么它在构造函数中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T16:57:16.910

在实际初始化 SDL 之前调用 SDL Video Functions 时遇到问题。

```
SDL_Init( SDL_INIT_EVERYTHING ) 
```

必须先**调用**

```
SDL_GetVideoInfo(); 
```

在你的情况下，你`SDL_GetVideoInfo();`先打电话

```
const SDL_VideoInfo* info = SDL_GetVideoInfo();   //<-- calls SDL_GetVideoInfo();   
screenWidth = info->current_w;
screenHeight = info->current_h;
Window(640, 480, "Flatgu game", "rsc/img/icon.bmp");    //<-- initializes SDL 
```

所以解决方案很简单；在程序开始时立即拨打电话`SDL_Init( SDL_INIT_EVERYTHING )`，然后您可以随心所欲`SDL_GetVideoInfo();`地拨打电话。您将不得不稍微重组您的班级窗口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T17:04:25.730

在设置视频之前（通话前）获得*最佳*视频模式通话。`SDL_GetVideoInfo``SDL_SetVideoMode`

但是您仍然必须在调用它之前初始化视频子系统（`SDL_Init(SDL_INIT_VIDEO)`）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-10T12:45:25.060

我知道这是旧的，但代码中有一个很大的错误。

```
Window(640, 480, "Flatgu game", "rsc/img/icon.bmp"); 
```

创建一个 Window 的无名实例，因此调用它的实例仍将具有未初始化的变量。看起来您正在尝试使用委托构造函数，但在这种情况下，对另一个构造函数的调用必须在成员初始值设定项列表中。请参阅[此页面](https://stackoverflow.com/questions/13961037/delegate-constructor-c)。

# c# - 在 CRM 4 C# 中检索自定义实体

> ID：15575502
> 
> 赞同：1
> 
> 时间：2013-03-22T16:37:23.517
> 
> 标签：c#, dynamics-crm-4, entities

在我们的 CRM 环境中，用户与可用时间实体具有 1:N 关系，该实体表示他们一周的实际可用时间。我正在 C# 中寻找一种方法来检索本周特定团队的用户的所有可用时间。

我是 CRM 开发的新手，我环顾四周，但似乎有很多方法可以做到这一点，我不确定哪种方法最适合。

语言为 C#，CRM 版本为 MS CRM 4.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T05:45:53.820

我将介绍这 3 位：一般方法、代码本身以及代码上的一些注释（代码被注释以引起对某些事情的注意，但其中一些将在代码之外进行进一步的解释）。

## 一般的做法

如您所见，有几种方法可以做事，但对于通过 Web 服务与 CRM 交互的外部应用程序，它归结为 3 个主要选项：

1.  使用通过在 Web 服务调用中添加 Web 引用获得的强类型方法来检索您的自定义实体（我认为您在上一个问题中提到看到方法爆炸......当您有很多自定义实体时，情况会变得更糟）
2.  `DynamicEntity`在您的网络服务调用中使用
3.  获取XML

如果您的系统非常简单，您通常可以使用 (1)，但我会推荐 (2) 或 (3) 中的任何一个。使用 (2) 意味着您只需要记住少数 Web 服务方法，如果您曾经使用插件或工作流程序集，因为这些概念可以很好地传播，那么它就很好。(3) 如果您了解 FetchXML 并且可以形成适当的查询，那就太好了。

我通常使用 (2) 来处理这些事情，因为它很常见，这是一种很好的中间方法，就像我说的那样，您的代码将相当容易转换为插件或工作流程序集。FetchXML 很好地执行，但我从来不擅长形成查询 - 我稍后会介绍一些技术，但让我们继续 (2)。

此外，如果您使用它，则`DynamicEntity`不需要刷新您的 Web 引用，因为您使用它的方式及其`Property`对象数组（基本上您以强类型为代价获得灵活性），正如您将在代码中看到的那样。如果您选择 (1)，您将获得针对您的自定义实体的强类型，但您必须根据人们对您的实体所做的更改的节奏不断刷新您的 WebReference。

## 编码

这是在一个小控制台应用程序中，我在其中向 CRM 服务添加了一个 WebReference，并进行了一些调用来模拟您的场景。代码应该传递到其他应用程序，如网络应用程序。我试图对其发表评论，因此在转到下一部分之前可能值得一读。

（**注意。**我并没有声称这是世界上最好的代码，但它似乎确实有效，应该让你开始）

（**注意2。**我错误地调用了我的命名空间作为网络参考`CrmService`——请不要和我犯同样的错误......）

```
static void Main(string[] args)
{
        CrmService.CrmService svc = new CrmService.CrmService();
        svc.CrmAuthenticationTokenValue = GetToken();
        svc.UseDefaultCredentials = true;

        #region 1 - Retrieve users in team
        RetrieveMembersTeamRequest teamMembersReq = new RetrieveMembersTeamRequest()
        {
            EntityId = new Guid("D56E0E83-2198-E211-9900-080027BBBE99"), //You'll need the team GUID
            ReturnDynamicEntities = true
        };

        ColumnSet teamMembersReqColumnSet = new ColumnSet();
        teamMembersReqColumnSet.Attributes = new string[] { "systemuserid", "domainname" };

        teamMembersReq.MemberColumnSet = teamMembersReqColumnSet; //Don't use: teamMembersReq.MemberColumnSet = new AllColumns()

        List<Guid> userIdList = new List<Guid>();
        RetrieveMembersTeamResponse teamMembersResp = svc.Execute(teamMembersReq) as RetrieveMembersTeamResponse;
        if (teamMembersResp != null)
        {
            BusinessEntity[] usersInTeamAsBusinessEntity = teamMembersResp.BusinessEntityCollection.BusinessEntities;
            List<DynamicEntity> usersInTeamAsDynEntity = usersInTeamAsBusinessEntity.Select(be => be as DynamicEntity).ToList(); //BusinessEntity not too useful, cast to DynamicEntity

            foreach (DynamicEntity de in usersInTeamAsDynEntity)
            {
                Property userIdProp = de.Properties.Where(p => p.Name == "systemuserid").FirstOrDefault();
                Property domainNameProp = de.Properties.Where(p => p.Name == "domainname").FirstOrDefault();

                if (userIdProp != null)
                {
                    KeyProperty userIdKeyProp = userIdProp as KeyProperty; //Because it is the unique identifier of the entity
                    userIdList.Add(userIdKeyProp.Value.Value); //Chuck in a list for use later
                    Console.Write("Key: " + userIdKeyProp.Value.Value.ToString());
                }

                if (domainNameProp != null)
                {
                    StringProperty domainNameStringProp = domainNameProp as StringProperty; //Because its data type is varchar
                    Console.Write("| Domain Name: " + domainNameStringProp.Value);
                }

                Console.WriteLine();
            }
        }
        #endregion

        /*
         * For this example I have created a dummy entity called new_availablehours that is in a 1:N relationship with use (i.e. 1 user, many new_available hours). 
         * The test attributes are :
         *      - the relationship attribute is called new_userid...this obviously links across to the GUID from systemuser
         *      - there is an int data type attribute called new_hours
         *      - there is a datetime attribute called new_availabilityday
         */
        #region Retrieve From 1:N
        RetrieveMultipleRequest req = new RetrieveMultipleRequest();
        req.ReturnDynamicEntities = true; //Because we love DynamicEntity

        //QueryExpression says what entity to retrieve from, what columns we want back and what criteria we use for selection
        QueryExpression qe = new QueryExpression();
        qe.EntityName = "new_availablehours"; //the entity on the many side of the 1:N which we want to get data from

        qe.ColumnSet = new AllColumns(); //Don't do this in real life, limit it like we did when retrieving team members

        /*
         * In this case we have 1 x Filter Expression which combines multiple Condition Operators
         * Condition Operators are evaluated together using the FilterExpression object's FilterOperator property (which is either AND or OR)
         * 
         * So if we use AND all conditions need to be true and if we use OR then at least one of the conditions provided needs to be true
         * 
         */
        FilterExpression fe = new FilterExpression();
        fe.FilterOperator = LogicalOperator.And;

        ConditionExpression userCondition = new ConditionExpression();
        userCondition.AttributeName = "new_userid"; //The attribute of qe.EntityName which we want to test against
        userCondition.Operator = ConditionOperator.In; //Because we got a list of users previously, the appropriate check is to get records where new_userid is in the list of valid ones we generated earlier
        userCondition.Values = userIdList.Select(s => s.ToString()).ToArray(); //Flip the GUID's to strings (seems that CRM likes that) then set them as the values we want to evaulate
        //OK - so now we have this userCondition where valid records have their new_userid value in a collection of ID's we specify

        ConditionExpression dateWeekBound = new ConditionExpression();
        dateWeekBound.AttributeName = "new_availabilityday";
        dateWeekBound.Operator = ConditionOperator.ThisWeek; //ConditionOperator has a whole bunch of convenience operators to deal with dates (e.g. this week, last X days etc) - check them out as they are very handy

        /*
         * As an aside, if we didn't want to use the convenience operator (or if none was available) we would have to create a ConditionExpression like:
         * 
         * ConditionExpression dateLowerBound = new ConditionExpression();
         * dateLowerBound.AttributeName = "new_availabilityday";
         * dateLowerBound.Operator = ConditionOperator.OnOrAfter;
         * dateLowerBound.Values = new object[] { <Your DateTime object here> };
         * 
         * And a corresponding one for the upper bound using ConditionOperator.OnOrBefore
         * 
         * Another alternative is to use ConditionOperator.Between. This is flexible for any sort of data, but the format of the Values array will be something like:
         *      ce.Values = new object[] { <lower bound>, <upper bound> };
         */

        fe.Conditions = new ConditionExpression[] { userCondition, dateWeekBound }; //Add the conditions to the filter
        qe.Criteria = fe; //Tell the query what our filters are
        req.Query = qe; //Tell the request the query we want to use

        RetrieveMultipleResponse resp = svc.Execute(req) as RetrieveMultipleResponse;
        if (resp != null)
        {
            BusinessEntity[] rawResults = resp.BusinessEntityCollection.BusinessEntities;
            List<DynamicEntity> castedResults = rawResults.Select(r => r as DynamicEntity).ToList();

            foreach (DynamicEntity result in castedResults)
            {
                Property user = result.Properties.Where(p => p.Name == "new_userid").FirstOrDefault();
                Property hours = result.Properties.Where(p => p.Name == "new_hours").FirstOrDefault();

                if (user != null)
                {
                    LookupProperty relationshipProperty = user as LookupProperty; //Important - the relationship attribute casts to a LookupProperty
                    Console.Write(relationshipProperty.Value.Value.ToString() + ", ");
                }

                if (hours != null)
                {
                    CrmNumberProperty hoursAsCrmNumber = hours as CrmNumberProperty; //We also have CrmFloatProperty, CrmDecimalProperty etc if the attribute was of those data types
                    Console.Write(hoursAsCrmNumber.Value.Value);
                }

                Console.WriteLine();
            }
        }
        #endregion

        Console.ReadLine();
    }

    static CrmAuthenticationToken GetToken()
    {
        CrmAuthenticationToken token = new CrmAuthenticationToken();
        token.AuthenticationType = 0; //Active Directory
        token.OrganizationName = "DevCRM";

        return token;
    } 
```

## 所以..那是什么？

我不打算逐一介绍，而是重点介绍以下要点：

1.  使用服务时的关键方法是`Execute()`我们将请求对象传递给它并返回响应对象的方法。请求都将是 class 的对象`<Operation>Request`，响应将是 class 的对象`<Operation>Response`。
2.  您通常希望使用`DynamicEntity`-`<Operation>Request`对象通常会公开一个名为的属性`ReturnDynamicEntities`，您应该将其设置为`true`
3.  大多数`<Operation>Request`对象都有一个`ColumnSet`属性，您可以在其中指定要返回的属性。指定通常是不好的做法`AllColumns()`，相反，您应该明确说明要返回的数据。属性需要匹配它们在 CRM 中的名称（形式如此`<prefix>_<field name>`）并且全部小写
4.  让用户加入团队并不太有趣，因为它是 CRM 中的预定义操作，没有什么特别之处……在这种情况下，[SDK](http://www.microsoft.com/en-us/download/details.aspx?id=38)是您的朋友，因为它会向您展示这些是如何工作的
5.  检索一堆自定义实体是一个更有趣的用例，我们通常可以使用`RetrieveMultipleRequest`and`RetrieveMultipleResponse`方法来获取它们（如果您只想要一条记录，那么您可以使用`RetrieveRequest`and `RetrieveResponse`...但是您需要知道您的 GUID寻找馈入`RetreiveRequest`对象）。
6.  因为`RetrieveMultipleRequest`我们向它提供了一个查询（`QueryExpression`），它说明了`EntityName`我们想要获得多个实体（）`ColumnSet`，我们想要返回的那个实体的属性（）以及`Criteria`用于选择我们想要的实际记录的过滤器（）
7.  专注于`QueryExpression`,`FilterExpression`和的使用`ConditionExpression`。重要的是要知道您可以使用哪些运算符`ConditionExpression`- 我尝试在代码中调用一些运算符，但 SDK 再次成为您了解可用运算符的最佳朋友
8.  我没有介绍的是更复杂的过滤，例如 (x OR y) AND z。[这里](http://msdn.microsoft.com/en-us/library/bb928435.aspx)有一个相当好的例子。这只是一种不同的使用方式`FilterExpression`和`ConditionExpression`
9.  请注意，它`RetrieveMultipleResponse`包含一个数组`BusinessEntity`。它`BusinessEntity`本身没什么用，所以我们把它放到一个列表中`DynamicEntity`- LINQ 在这里真的是你的朋友，而且对于 CRM 的东西有点混乱，LINQ 派上用场了
10.  注意我们如何检查属性 -`de.Properties.Where(p => p.Name == "systemuserid").FirstOrDefault();`然后检查它是否是`NULL`. 这是因为如果在 CRM 中记录的属性`NULL`不会从服务调用中返回 - 所以仅仅因为您在请求中请求属性`ColumnSet`不要自动假设它存在（除非您将其设置为强制在 CRM 中 - 然后可能没问题）...测试它，您的应用程序将变得不那么脆弱。
11.  类本身的`Property`价值有限——要真正使用属性，您必须将其转换为实际存在的东西。我一直在喋喋不休，但 SDK 会告诉你类型是什么，但一段时间后它开始感觉自然，例如记录的 GUID 在 a 中`KeyProperty`，ints 在 in `CrmNumberProperty`，floats 在 in `CrmFloatProperty`，strings`StringProperty`等。注意弱类型（我之前提到过），我们必须按名称获取属性，转换为正确的值等

## 其他要点

1.  通常情况下，您必须对服务调用非常健谈——据我所知，在针对 CRM 进行开发时，这很正常（不过我只能谈谈我自己的经验）
2.  在你的编码方式中真正防御是很重要的——检查属性是否存在，检查你正在转换为正确的类型等。
3.  如果您必须捕获异常，它将是 a[`SoapException`](http://msdn.microsoft.com/en-us/library/system.web.services.protocols.soapexception.aspx)并且您通常想要的信息将在[`Detail`](http://msdn.microsoft.com/en-us/library/system.web.services.protocols.soapexception.detail.aspx)属性中 - 记住这一点非常重要，否则您会查看异常并认为它并没有告诉您一大堆
4.  咨询 CRM 中的自定义项，以确定关系属性、数据类型等的名称。我喜欢在进行开发时为我需要的实体打开自定义窗口，以便于参考。
5.  `FetchXML`非常强大但非常繁琐。如果你擅长它，那么你会获得很多好的里程 - 像[这样](http://www.stunnware.com/products/tools4/overview.htm)的工具很有用。另外，一个方便的技巧 - 如果您可以通过 CRM UI 构建您想要的（或您想要的示例）作为高级查找，那么您可以使用此[技巧](http://crmbusiness.wordpress.com/2011/10/05/crm-4-how-to-get-the-fetch-xml-from-an-advanced-find/)来获取它使用的 FetchXML....您可能会需要调整 GUID 等，但如果您想在代码中使用 FetchXML，它会为您提供一个构建块，因为大多数查询都是为您编写的。
6.  根据您的部署环境，您可能不得不弄乱使用的凭据，是否通过代理等......典型的网络参考资料。只是值得注意的是，CRM 也不能幸免于这种事情——我在这里没有任何真正的建议，只是一个说明，因为它在过去给我带来了一些“乐趣”

# api - iphone上禁用wifi时，Phonegap Sencha应用谷歌地图API未加载

> ID：15575503
> 
> 赞同：2
> 
> 时间：2013-03-22T16:37:29.793
> 
> 标签：api, google-maps, cordova, sencha-touch-2

寻求帮助，因为我对此感到困惑。我正在使用包装在 iPhone 的 phonegap 中的煎茶地图。启用 wifi 时地图加载完美，但关闭时地图不显示并通知我“需要 Google Maps API”。我在 www 目录中的 index.html 文件中使用的脚本是 sencha 建议的脚本...

```
 <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script> 
```

正如我在启用 wifi 时提到的，脚本会加载并显示地图。我还为 android 设备包装了我的应用程序，并且在禁用和启用 wifi 时脚本都会在此处加载。

很想听听一些关于如何解决这个问题的建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T18:30:45.963

这是一个复杂的问题，但可以做到。这是解决此问题的人的链接：

[http://rohdef.dk/wp3/?p=151](http://rohdef.dk/wp3/?p=151)

Sencha 应该真正更新他们的代码，以允许他们的谷歌地图视图优雅地失败，而不是冻结整个应用程序。更糟糕的是，即使在连接后重新启动应用程序也无济于事，因为缓存，你必须从苹果商店重新安装。

# java - Heroku 仅适用于刷新

> ID：15575505
> 
> 赞同：0
> 
> 时间：2013-03-22T16:37:35.730
> 
> 标签：java, heroku, neo4j

我正在尝试使用他们的 Neo4j 插件在 Heroku 上开发 Neo4J 云应用程序。我仍在尝试几个功能，所以它只是一个演示应用程序，但我已经遇到了问题。

我的应用程序是这样构建的：我有一个主页，其中包含一个表格，其中显示了连接到参考节点的所有节点。在这个主页上有一个添加随机节点的链接。

我的 servlet 中定义了两个操作，它们执行以下操作：

**主页.do**

```
request.setAttribute("testuser", "test");
DataAccess da = new DataAccess();
request.setAttribute("NodeBeans", da.getAllNodes()); 

request.setAttribute("pageheader", "header");
request.setAttribute("pagecontent", "home");
request.setAttribute("pagefooter", "footer");
request.getRequestDispatcher("/master.jsp").forward(request, response); 
```

最后三个参数是包含在 master.jsp 中的文件名（没有 jsp），使用 .

**Addnode.do**的作用完全相同，只是它更改了 testuser 的值，并且在设置 NodeBeans 属性之前它执行以下操作：

```
da.createRandomNode(); 
```

这基本上为数据库创建了一个随机节点。

在当地，这一切都像一个魅力。当我推送到 Heroku 时，出现了问题。

当我打开时，它仍然打开到*"bla.herokuapps.com/home.do"*，这很好。它向我显示了节点表。当我单击添加节点的链接时，URL 确实更改为*“bla.herokuapp.com/addnode.do”*，它应该添加一个节点，但它没有。testuser 属性也随着*“addnode.do”*操作而改变，但是确实改变了。当我在 url 设置为*"bla.herokuapps.com/addnode.do"*时刷新页面时，它确实添加了一个节点，并在表中显示了这个新节点。

所以页面之间的整个切换效果很好。唯一的问题是，在您刷新页面之前，单击 addnode 链接不会在 Neo4j 数据库中创建新节点。

**供参考：**我正在使用 neo4j-rest-graphdb 与数据库对话。它是一个远程客户端库，用于与其余 api 对话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:51:34.057

找到了。使用 firebug 调试后，页面似乎根本没有重新加载。只是缓存的页面再次显示。

您必须使用以下三行代码在控制器中手动关闭缓存：

```
response.setHeader("Cache-control", "no-cache, no-store");
response.setHeader("Pragma", "no-cache");
response.setHeader("Expires", "-1"); 
```

# ruby-on-rails-3 - 思考狮身人面像范围返回结果和“空白”的组合

> ID：15575509
> 
> 赞同：0
> 
> 时间：2013-03-22T16:37:52.200
> 
> 标签：ruby-on-rails-3, sphinx, thinking-sphinx

控制器：

```
@sites = Site.inspections_enabled_controllers_search.search("test")

@sites.each do |s|
    if s == nil
        puts "WHAT THE ...?"
    end
    ap s #print out the site
end 
```

模型：

```
has_many :inspections_enabled_controllers, 
            :class_name => 'Controller', 
            :conditions => ['controllers.inspections_enabled = ?', true]

sphinx_scope(:inspections_enabled_controllers_search) {
    {
        :joins => :inspections_enabled_controllers
    }
} 
```

回报：

```
#<Site:0x000000114618b8> {
              :id => 156,
            :name => "Test Site"
}
WHAT THE ...?
nil
WHAT THE ...?
nil
WHAT THE ...?
nil
#<Site:0x000000111c41a0> {
              :id => 213,
            :name => "TestRail V1.5 - SmartLine"
}
WHAT THE ...?
nil
WHAT THE ...?
nil
WHAT THE ...?
nil
WHAT THE ...?
nil
#<Site:0x00000011461200> {
              :id => 220,
            :name => "Activation Testing"
} 
```

注意总共有七个“-”，它们只是数组中的空项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:06:27.470

这对我有用

```
@sites = Site.inspections_enabled_controllers_search.search("test", :retry_stale => 1) 
```

参考： http: [//pat.github.com/ts/en/searching.html#nils](http://pat.github.com/ts/en/searching.html#nils)

# c - sem_open 用于 POSIX 数组

> ID：15575510
> 
> 赞同：1
> 
> 时间：2013-03-22T16:37:59.720
> 
> 标签：c, unix, posix, semaphore

我想打开 n 个信号量（来自 argv[] 的 n 个）。我做了 sem_t* 数组，并尝试在循环中打开它们。但是，我需要每个信号量的 const char* 唯一名称。有什么办法吗？请帮忙 ：）

```
sem_t *sem[n];
int i;
for(i=0; i<n; i++)
sem[i] = my_sem_open("XXXXXX",0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:19:41.597

这是关于如何获得唯一信号量名称的非常​​简短的说明。在实际系统中，可能有一些围绕信号量创建/删除的包装器，带有空闲 ID 数组。每个操作都可以从这个数组中获取 ID（在 sem_open() 上）或释放其中一个（sem_close()）。

```
#include <stdio.h>
#include <semaphore.h>
#include <unistd.h>

#define N 10

int next_sema_id()
{
    static int seq_number = 0;
    return seq_number++;
}

int main()
{
    int n = N;

    sem_t *sem[n];
    int i;

    pid_t pid = getpid();

    for (i = 0; i < n; i++)
    {
        char buf[12];
        sprintf(buf, "sem%05d%03d", pid, next_sema_id());
        sem[i] = sem_open(buf,0);
    }

    for (i = 0; i < n; i++)
    {
        sem_close(sem[i]);
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T18:13:10.460

*这将是对[Roman Nikitchenko](https://stackoverflow.com/users/204665/roman-nikitchenko)[答案](https://stackoverflow.com/a/15576313/15168)的评论，除了 POSIX 标准的引用太长而无法放入单个评论中。*

请注意 POSIX 关于路径的说明[`sem_open()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_open.html)：

> name 参数指向一个命名信号量对象的字符串。未指定名称是否出现在文件系统中，并且对于将路径名作为参数的函数可见。name 参数符合路径名的构造规则，除了name 中`<slash>`除前导`<slash>`字符以外的字符的解释是实现定义的，并且 name 参数的长度限制是实现定义的，不需要与路径名限制 {PATH_MAX} 和 {NAME_MAX}。如果 name 以`<slash>`字符开头，则使用相同 name 值调用的进程`sem_open()`将引用相同的信号量对象，只要该名称没有被删除。如果 name 不以`<slash>`字符开头，则效果是实现定义的。

我认为这表示可移植信号量名称的形式为`/some-unique-name-without-slashes`，其中最大长度没有明确定义。其他名称（没有前导斜杠或带有额外斜杠）可能有效，也可能无效——您需要阅读您正在使用的实现的手册（实现必须定义允许的内容）。

# php - 连接来自两个不同数据库的表

> ID：15575511
> 
> 赞同：0
> 
> 时间：2013-03-22T16:38:00.980
> 
> 标签：php, mysql, sql

```
$db=mysql_connect("localhost", "testuser1", "testuser1") or die(mysql_error()); 
$db2=mysql_connect("localhost", "testuser2", "testuser2", true) or die(mysql_error()); 
$dbname="database1"; 
$dbname2="database2";

mysql_select_db($dbname,$db) or die (mysql_error());
mysql_select_db($dbname2,$db2) or die (mysql_error());

 //this is for the product attributes
 $data = mysql_query("SELECT db.attribute_stock, db.options_values_sku
                                 FROM db.products_attributes 
                                 LEFT OUTER JOIN db2.oscomstock ON db.product_attributes.options_value_sku=db2.oscomstock.options_value_sku 
                             ") or die(mysql_error()); 
```

但是，当我尝试这样做时，我得到了错误：

```
SELECT command denied to user 'testuser2' for table 'products_attributes' 
```

在执行 sql 查询时，它似乎只对两个数据库使用一组凭据。

我需要做什么才能使用正确的凭据访问它？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:43:37.757

你的权利肯定有问题。

转到 phpmyadmin 中的“权限部分”，找到用户“testuser2”并编辑他的权限。确保选中每个复选框，单击运行并确保“testuser2”现在具有“所有权限”。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:45:01.307

您需要将两个数据库的访问权限授予一个用户。并使用该用户连接到数据库服务器。

# c# - asp.net c#，匿名为铸造对象赋值（一个班轮挑战！）

> ID：15575517
> 
> 赞同：1
> 
> 时间：2013-03-22T16:38:19.143
> 
> 标签：c#, variables, casting, variable-assignment, anonymous

嗯，所以我喜欢一个衬里，而且我在浓缩各种东西方面做得很好。出于某种原因，他们让我快乐，他们帮助我学习。计算机程序员生活的亮点！

所以无论如何，我需要一个关于铸造对象分配的帮助：

这是一个简单属性的示例：

```
protected InterfaceType Object{
    get{ return (InterfaceType)this.Page;} // no red squigglies, works fine
    set{ (InterfaceType)this.Page = value; } // red squigglies(left hand of argument must be a variable, property or indexer)
} 
```

但是我可以这样做：

```
protected InterfaceType Object{
    get{ return (InterfaceType)this.Page;} // no red squigglies, works fine
    set{ var o = (InterfaceType)this.Page; o = value; } // works fine
} 
```

If (InterfaceType)this.Page 返回一个对象，如下所示：

```
return (InterfaceType)this.Page; 
```

我可以把它分配给东西：

```
var o = (InterfaceType)this.Page; 
```

并为它分配东西：

```
o = value; 
```

对我来说，我觉得我正在创建一个新的不必要的指针；因为如果我可以用它来检索它，下面只是一个指向这个对象本身的指针：

```
(InterfaceType)this.Page 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:40:17.600

您可能需要在 this.page 之后删除额外的分号并删除类型转换。

*改变*

```
set{ (InterfaceType)this.Page; = value; } 
```

*至*

```
set{ this.Page = value; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:47:02.160

这里有几个问题。如果`this.Page`被声明为 的实例`InterfaceType`，则根本不需要强制转换。

这表明您正在尝试将实例向下转换为setter 中的`InterfaceType`任何类型。`Page`显然，这是不安全的，而且你的演员也不会工作。我会将其更改为：

```
set { this.Page = (value as WhateverTypePageIs); } 
```

这意味着如果强制转换无效，您的 setter 将不再抛出异常，它只会设置`this.Page`为`null`. 如果这不是可取的，您可以使用：

```
set { this.Page = ((WhateverTypePageIs)value); } 
```

仍然会抛出异常。

然而，所有这些都指向一个更深层次的问题。如果您想拥有 setter 但将值存储为更具体的类型，则应将`Object`其设置为相同的类型，`this.Page`以便向任何调用者明确该限制。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T16:40:38.210

您必须将表达式的右侧转换为所需的类型：

```
set{ this.Page = (InterfaceType)value; } 
```

但是，阅读您的代码，完全有可能将`Page`其定义为继承层次结构中的较小类型；在这种情况下，不需要强制转换：

```
set { this.Page = value; } 
```

# java - 按位取反会产生意想不到的结果

> ID：15575520
> 
> 赞同：7
> 
> 时间：2013-03-22T16:38:21.267
> 
> 标签：java, bit-manipulation

我正在尝试用 java 编写一个按位计算器，您可以输入一个表达式，例如 ~101，它会返回 10 但是当我运行此代码时

```
import java.util.Scanner;

public class Test
{
    public static void main(String[] args)
    {
        Integer a = Integer.valueOf("101", 2);
        System.out.println(Integer.toString(~a,2));
    }
} 
```

它输出-110 为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T16:48:45.130

您假设 101 是三位长。Java 不支持可变长度位操作，它对整个`int`位进行操作，因此`~`将是`not`32 位长的“101”。

--- 在被问到“我该如何解决这个问题？”后编辑。---

这是一个非常好的问题，但答案是“你不能”和“你可以通过不同的方式实现同​​样的事情”的混合体。

您无法修复`~`操作员，因为它会做它所做的事情。这有点像要求修复`+`只添加 1 的位置。只是不会发生。

您可以实现所需的操作，但您需要更多的“东西”来实现它。首先，您必须有*一些东西*（另一个 int）来指定*感兴趣的位*。这通常称为**位掩码**。

```
 int mask = 0x00000007; // just the last 3 bits.

 int masked_inverse = (~value) & mask; 
```

请注意，我们所做的实际上是反转 32 位，然后将其中的 29 位归零；因为，它们在掩码中被设置为零，这意味着“我们不关心它们”。这也可以想象为利用`&`运营商，例如我们说“如果设置并且我们关心它，请设置它”。

现在你*仍然*有 32 位，但只有低 3 位会被反转。如果你想要一个 3 位数据结构，那就另当别论了。Java（和大多数语言）只是不直接支持这些东西。因此，您可能很想向 Java 添加另一种*类型*来支持它。Java 通过*类*机制添加类型，但内置类型是不可更改的。这意味着您可以编写一个类来表示一个 3 位数据结构，但它必须在内部将整数处理为 32 位字段。

对你来说幸运的是，已经有人这样做了。它是标准 Java 库的一部分，[称为`BitSet`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/BitSet.html).

```
BitSet threeBits = new BitSet(3);
threeBits.set(2);  // set bit index 2
threeBits.set(0);  // set bit index 0
threeBits.flip(0,3); 
```

但是，由于 Java 中的类/对象系统的限制，这种位操作对他们有不同的感觉，这源于将类定义为在 Java 中添加新类型的*唯一方法。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T17:24:31.640

如果`a = ...0000101 (bin) = 5 (dec)`

```
~a = ~...0000101(bin) = ...1111010(bin) 
```

而Java使用“[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)”形式来表示负数，所以

```
~a = -6 (dec) 
```

`Integer.toBinaryString(number)`现在和`Integer.toString(number, 2)`负数的区别在于

*   `toBinaryString`[以“二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)”形式返回字符串，但
*   `toString(number, 2)`计算二进制形式，如果数字是正数，如果参数是负数，则添加“减号”标记。

所以`toString(number, 2)`为了`~a = -6`意志

1.  计算`6`->的二进制值`0000110`，
2.  修剪前导零 -> `110`,
3.  添加减号 -> `-110`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:46:19.793

toString() 方法将其参数解释为有符号值。

为了演示二进制操作，最好使用`Integer.toBinaryString()`. 它将其参数解释为无符号，因此 ~101 输出为 1111111111111111111111111111010。

如果你想要更少的输出位，你可以用 & 屏蔽结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T16:46:58.647

整数 101 实际上表示为`00000000000000000000000000000101`否定 this 并且你得到`11111111111111111111111111111010`- 这是`-6`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-18T02:21:14.787

只是为了详细说明 Edwin 的答案 - 如果您想创建一个可变长度掩码来开发感兴趣的位，您可能需要一些辅助函数：

```
/**
 * Negate a number, specifying the bits of interest.
 * 
 * Negating 52 with an interest of 6 would result in 11 (from 110100 to 001011).
 * Negating 0 with an interest of 32 would result in -1 (equivalent to ~0).
 * 
 * @param number the number to negate.
 * @param bitsOfInterest the bits we're interested in limiting ourself to (32 maximum).
 * @return the negated number.
 */
public int negate(int number, int bitsOfInterest) {
    int negated = ~number;
    int mask = ~0 >>> (32 - bitsOfInterest);
    logger.info("Mask for negation is [" + Integer.toBinaryString(mask) + "]");
    return negated & mask;
}

/**
 * Negate a number, assuming we're interesting in negation of all 31 bits (exluding the sign).
 * 
 * Negating 32 in this case would result in ({@link Integer#MAX_VALUE} - 32).
 * 
 * @param number the number to negate.
 * @return the negated number.
 */
public int negate(int number) {
    return negate(number, 31);
} 
```

# javascript - 如何从 Ajax 请求中获得响应？

> ID：15575527
> 
> 赞同：1
> 
> 时间：2013-03-22T16:38:33.283
> 
> 标签：javascript, ajax, xmlhttprequest

我试过这段代码：

```
var xmlHttp = new XMLHttpRequest();

function activecomm(comm_id,a_link_id)
{
    var postComm = "id="+encodeURIComponent(comm_id);
    var url = 'comments_mgr_proccesser.php'; 
    xmlHttp.open("POST", url, true);
    xmlHttp.onreadystatechange = handleInfo(a_link_id);
    xmlHttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xmlHttp.setRequestHeader("Content-length", postComm.length);
    xmlHttp.setRequestHeader("Connection", "close");
    xmlHttp.send(postComm);
}

function handleInfo(a_link_id)
{
    if(xmlHttp.readyState == 1)
    {
        document.getElementById("commactiveresult").innerHTML = 'loading ..';
    }
    else if(xmlHttp.readyState == 4)
    {
        var response = xmlHttp.responseText;
        document.getElementById("commactiveresult").innerHTML = response;
    }
} 
```

当元素`readyState == 1`的内容`commactiveresult`被更新，但`readyState == 4`在同一个元素中没有显示任何内容时。

请问有谁知道是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:45:16.920

您正在调用该`handleInfo`函数，而不是分配一个就绪状态处理程序。尝试

```
xmlHttp.onreadystatechange = function (){
    handleInfo(a_link_id);
}; 
```

# mips - jal mips 什么都不做

> ID：15575531
> 
> 赞同：0
> 
> 时间：2013-03-22T16:38:42.283
> 
> 标签：mips

我的目标是交换交换中的值：函数

但是它什么也没做。

我将 a0 和 a1 的值设置为任何值，它不会覆盖它们的值。我不允许使用 t0，我必须使用堆栈。

仍然，为什么它不对a0和a1做任何事情，我是否必须在v0中返回一些东西？

```
 .text
main:
    la  $a0,n1
    la  $a1,n2
    jal     swap
    li  $v0,1   # print n1 and n2; should be 27 and 14
    lw  $a0,n1
    syscall
    li  $v0,11
    li  $a0,' '
    syscall
    li  $v0,1
    lw  $a0,n2
    syscall
    li  $v0,11
    li  $a0,'\n'
    syscall
    li  $v0,10  # exit
    syscall

swap:

    addi $sp, $sp, -4
    sw $a0, 0($sp)
    addi $a0, $a1, 0
    lw $a1, 0($sp)
    addi $sp, $sp, 4        
    jr $ra

L1: 

    .data
n1: .word   14
n2: .word   27 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T10:49:03.340

您正在交换*指针*，而不是它们指向的*值*。当您打印值时，您直接从交换的指针中读取它们，`n1`而`n2`不是通过交换的指针。

要解决此问题，您可以：

*   在调用之前加载 and 的值`n1`（`n2`而不是它们的地址）`swap`。然后打印`$a0`，然后，而不是从和`$a1`重新加载值。`n1``n2`
*   取消引用交换内部的指针以实际交换值。
*   在执行系统调用之前取消引用指针`print_int`，而不是直接从`n1`和读取要打印的值`n2`。

第一个解决方案将是最简单的。

# django - Django 模型 - 保存/创建之前

> ID：15575535
> 
> 赞同：3
> 
> 时间：2013-03-22T16:38:54.743
> 
> 标签：django, django-models

我有两个模型：

```
class Category(MPTTModel):
    name = models.CharField(max_length=50,unique=True)
    parent = TreeForeignKey('self', null=True, blank=True, related_name='children')    
    def __unicode__(self):
        return self.name

class Product(models.Model):
    name = models.CharField(max_length=50)
    categories = models.ManyToManyField(Category,related_name='products')    
    def __unicode__(self):
        return self.name 
```

类别遵循树状结构，我只想将产品添加到“叶类别”。
当我打电话`my_category.products.create(...)`或类似电话时，`my_category.is_leaf_node() == False`它应该会失败。如果 my_category 已经有产品，那么它应该会失败
。 这些检查进入保存方法？在自定义管理器中？或者别的地方？我希望验证在模型级别。`my_category.children.create(...)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T00:17:42.967

模型级验证的正确位置在`clean()`函数中。您可以在`django.core.exceptions.ValidationError`此处提出一个来描述您的错误。查看[clean() 的文档](https://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.clean)

# php - mysqli_query 为空，但没有错误消息

> ID：15575538
> 
> 赞同：0
> 
> 时间：2013-03-22T16:39:01.597
> 
> 标签：php, mysql

我正在为疯狂的 nfl 联盟创建一个可排序的力量排名列表。如果你想看到它在

[http://www.stephenjesse.com/projects/powerrankings/index.php](http://www.stephenjesse.com/projects/powerrankings/index.php)

当我尝试从上次保存的排名计算更改时遇到的问题，用于获取上次排名的查询返回 null 有时会导致更改错误，因为它认为旧排名为 0 而不是。这是 for 循环的基本片段

```
foreach($order as $team)
{
    $query="SELECT * FROM powerrankings WHERE team='$team'";
    echo "query to select team:".$query."\n\n";
    $result=mysqli_query($db,$query) or die(mysqli_error($db));
    $selectedTeam=$result->fetch_assoc();
    $oldRank=intval($selectedTeam['ranking']);
    $change=$oldRank-$rank; 
```

我不太确定出了什么问题，我检查了 apache 错误日志，我尝试输出 mysqli_errer() 并且我检查了 mysql.log 错误日志，但没有任何显示。我尝试在查询之间睡 5 秒以防万一查询被快速触发，但这不起作用。它只有几次。这是我在页面上的调试输出示例

查询以选择团队：SELECT * FROM powerrankings WHERE team='Panthers'

球队：黑豹队 旧排名：5 新排名：1

array(7) { ["ranking"]=> string(1) "5" ["team"]=> string(8) "Panthers" ["comment"]=> string(0) "" ["change" ]=> string(1) "0" ["record"]=> string(5) "0-0-0" ["low"]=> string(1) "5" ["high"]=> string (1) "5" } 数组转储：

查询以选择团队：SELECT * FROM powerrankings WHERE team='Bills'

团队：Bills 旧排名：0 新排名：2

空数组转储：

查询以选择团队：SELECT * FROM powerrankings WHERE team='Falcons'

球队：猎鹰 旧排名：0 新排名：3

空数组转储：

查询选择球队：SELECT * FROM powerrankings WHERE team='Cardinals'

球队：红雀队 旧排名：0 新排名：4

空数组转储：

查询以选择团队：SELECT * FROM powerrankings WHERE team='Ravens'

球队：乌鸦队 旧排名：0 新排名：5

空数组转储：

查询以选择团队：SELECT * FROM powerrankings WHERE team='Bears'

团队：熊 旧等级：6 新等级：6

array(7) { ["ranking"]=> string(1) "6" ["team"]=> string(5) "Bears" ["comment"]=> string(0) "" ["change" ]=> string(1) "0" ["record"]=> string(5) "0-0-0" ["low"]=> string(1) "6" ["high"]=> string (1) "6" }

你可以看到它有时有效，有时无效。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:45:18.170

`NULL`表示没有匹配的行供您查询：没有名为“Bills”的团队。

`NULL`在更新排名之前检查您的代码

```
if ($selected_team = $result->fetch_assoc()) {
    // update ranking
} 
```

# grails - 与 Grails 2.2.1 插件依赖解析不一致

> ID：15575540
> 
> 赞同：2
> 
> 时间：2013-03-22T16:39:06.493
> 
> 标签：grails, dependencies, grails-plugin

升级到 Grails 2.2.1 后，我的内联插件指令停止工作。例如以下不解析插件。

`grails.plugin.location.'commons' = "../../common/commons-upgrade"`

我按照指南 [http://grails.org/doc/latest/guide/upgradingFromPreviousVersionsOfGrails.html](http://grails.org/doc/latest/guide/upgradingFromPreviousVersionsOfGrails.html) 说要将以下内容添加 `legacyResolve true`到 BuildConfig.groovy 但它仍然不起作用。

该指南还声称

> Grails 2.2 不再使用插件的 BuildConfig 进行依赖解析，只使用 POM 提供的数据

尽管我发现该应用程序既不需要 POM，并且默认情况下仍使用 BuildConfig 进行插件解析。鉴于 Grails 默认依赖于一些插件，我希望 create-app 自动生成 POM 并默认使用它。

有人可以解决我对依赖解析的困惑吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T13:08:44.250

您可以使用 `grails generate-pom`

为您的插件创建一个可用于部署的 pom，但这并不能解决您目前看到的问题。

我发现解决它的唯一方法是根据[http://grails.org/doc/2.2.1/guide/upgradingFromPreviousVersionsOfGrails.html在构建配置中设置 legacyResolve true](http://grails.org/doc/2.2.1/guide/upgradingFromPreviousVersionsOfGrails.html)

希望这将很快得到解决。

# c++ - 我有一个类对象作为另一个类的成员，如何初始化为安全的空状态？

> ID：15575544
> 
> 赞同：0
> 
> 时间：2013-03-22T16:39:16.510
> 
> 标签：c++, constructor

我有 2 个课程，ISBN，订单。我有一个 ISBN 对象作为 Order 类的数据成员，我在 Order 构造函数中遇到问题，无法将 ISBN 对象置于安全的空状态。

我的订单.h

```
#include <iostream>
using namespace std;

class ISBN;

class Order {

int ordered;
int delivered;
ISBN * book;
bool empty;

public:

Order();
Order(const ISBN & isbn);

}; 
```

我的 ISBN.h

```
#include <iostream>
using namespace std;

class ISBNPrefix;

class ISBN {

char isbnNum[13];
char area[6];
char publisher[8];
char title[7];
char checkDigit[1];
bool emptycheck;
bool registered;

public:

ISBN();
ISBN(const char * str, const ISBNPrefix& list);
} 
```

在我的 Order 构造函数中，我尝试了以下代码：

```
Order::Order() {

ordered = 0;
delivered = 0;
empty = true;

*book->ISBN();

/*
(*book).isbnNum[0] = '\0';
book.area[0] = '\0';
book.publisher[0] = '\0';
book.title[0] = '\0';
book.checkDigit[0] = '\0';
book.emptycheck = true;
book.registered = false; */
} 
```

以及它的变体，但我收到诸如“不允许类型名称”“表达式必须具有指针类型”等错误......有人知道我的问题是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:42:40.097

您几乎可以肯定这里不需要指针，只需要一个`ISBN`对象作为数据成员：

```
ISBN book; 
```

这将使用其默认构造函数自动初始化；你不需要做任何事情。如果您想使用其他构造函数（带参数）初始化它，那么您需要在初始化列表中执行此操作：

```
Order::Order() : book(some_string, some_list)
{
    // body of constructor
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:53:12.803

您遇到问题是因为您已声明`book`为`ISBN*`. 因此，您发布的行`*book->ISBN();`试图取消引用 null 然后调用空白构造函数。

如果你想手动分配`book`，那么你应该使用这个模式：

```
Order::Order() {

    ordered = 0;
    delivered = 0;
    empty = true;
    book = new ISBN();
} 
```

请注意，这将要求`Order`' 的析构函数对其`book`成员调用 delete。

您可以通过使其成为类成员而不是指针`book`来自动分配和删除。`ISBN`为此，请使用以下声明：

```
class Order {

    ISBN book;
    ... // your other members
} 
```

`ISBN`每当类`Order`分别被实例化和销毁时，这将自动分配和自动取消分配对象成员。无需额外的步骤。

# svn - 哈德逊颠覆插件

> ID：15575547
> 
> 赞同：0
> 
> 时间：2013-03-22T16:39:23.537
> 
> 标签：svn, hudson, hudson-plugins

有没有办法强制 Subversion 插件在每次用户启动作业时向 SVN 存储库询问身份验证？

详细说明：我们有一项工作从 SVN 分支执行签出，然后部署 .ear 签出。Subversion 插件需要有关作业配置的身份验证详细信息（用户和密码），而我们希望用户在启动作业时键入他的凭据。

这可能吗？有一些解决方法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:45:27.400

假设您有一个在 Hudson 中执行此操作的“构建”，那么您可能应该[将构建配置为参数化](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Build)。

您可能需要使用脚本来增强它，以便在集成的 Hudson 任务之外实际运行 svn / deployment 命令，因为 Hudson 任务通常会采用任何“已知”的 Hudson 凭证（甚至凭证缓存）并将其用作参数在插件中。

请注意，这可能会产生在日志文件中暴露用户密码的不良副作用，因为 Hudson 不知道应该在日志记录中“特别”处理此参数。

# ios - ZXingObjC 无法解码从 UIImagePickerController 获取的图像

> ID：15575554
> 
> 赞同：2
> 
> 时间：2013-03-22T16:39:37.243
> 
> 标签：ios, objective-c, qr-code, zxing

我正在使用以下代码来解码从相机拍摄的 QRCode

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{  
originalImage = (UIImage *) [info objectForKey:
                             UIImagePickerControllerEditedImage];

ZXQRCodeReader *reader = [[ZXQRCodeReader alloc]init];

 ZXLuminanceSource *source = [[ZXCGImageLuminanceSource alloc] initWithCGImage:[originalImage CGImage]];
ZXHybridBinarizer *binazer = [ZXHybridBinarizer binarizerWithSource:source];
ZXBinaryBitmap *bitmap = [[ZXBinaryBitmap alloc]initWithBinarizer:binazer];

NSError *error;
ZXResult *result = [reader decode:bitmap
                            hints:nil
                            error:&error];
if(result){
    [[[UIAlertView alloc] initWithTitle:@"Success" message:@"Success"
                               delegate:nil
                      cancelButtonTitle:@"OK"
                      otherButtonTitles:nil, nil] show];
} else {
    // Use error to determine why we didn't get a result, such as a barcode
    // not being found, an invalid checksum, or a format inconsistency.
    [[[UIAlertView alloc] initWithTitle:@"ERROR" message:[error localizedDescription]
                               delegate:nil
                      cancelButtonTitle:@"OK"
                      otherButtonTitles:nil, nil] show];
} 
```

但是，我收到一条错误消息，指出在 Image 上找不到条形码。另一方面，如果我使用 ZXingObjC 提供的测试图像，它可以工作，问题只是在尝试 UIImagePickerController 图像时。所以有什么想法可能是错的？？？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T15:24:59.557

我对 ZXingObjC 端口不是很熟悉，所以 YMMV。zxing 启发式算法已针对手机上的实时视频预览流提供的分辨率相对较低的图像进行了调整。在现代手机上，从静态相机拍摄的图像具有非常高的分辨率……足够高，可以解析 LCD 上的单个像素（至少高达 2K 显示器）。zxing 经常要求对这样的高分辨率图像进行低通滤波。最简单的方法是抽取/下采样图像。这就是我从静态相机图像解码时所做的事情：首先以原始分辨率尝试它，然后将其抽取到 1000x1000 以下。一种或另一种通常有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T02:55:51.653

对 smparkes 评论的更新是，通过简单地将 UIImage 大小减小到 640x480，该库至少在我的 iPhone 5 上与 UIImagePickerController 生成的图像完美配合。它每次都以这种方式获取 UPC 代码。

# android - 在Android中按下按钮时添加一组元素并使它们动态显示

> ID：15575560
> 
> 赞同：1
> 
> 时间：2013-03-22T16:40:03.813
> 
> 标签：android

我想添加一组元素（文本框、按钮、进度条和文本视图），并在 Android 中按下按钮时让它们动态显示。在每次按下按钮时，我都想创建一组元素并将它们放在相对布局中。这是我的`oncreate`方法：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // The add button to insert new downloading file
    add = (Button) findViewById(R.id.button_add_url);
    add.setOnClickListener(this);

    // Swapping between pause and resume
    pause = (Button) findViewById(R.id.button_pause_resume);
    pause.setOnClickListener(this);

    download = (Button) findViewById(R.id.button_download);
    download.setOnClickListener(this);

    // The progress is written here
    text = (TextView) findViewById(R.id.textView2);
    text.setTextColor(Color.WHITE);

    progress = (ProgressBar) findViewById(R.id.progressBar1);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:46:18.987

如果您将相对布局创建为包含这些元素的 xml，然后在单击按钮时，您可以像这样将该布局膨胀到主布局（在您的按钮 onClick 方法上），也许会更容易：

```
LinearLayout mainLayout = (LinearLayout)findViewById(R.id.personal_data_root);
RelativeLayout addLayout = (RelativeLayout)View.inflate(this, R.layout.layoutcontainingelementsouwanttoaddonclick, null);
mainLayout.addView(addLayout); 
```

# javascript - 放 到浏览器窗口底部的高度

> ID：15575564
> 
> 赞同：6
> 
> 时间：2013-03-22T16:40:06.217
> 
> 标签：javascript, jquery, html, css

虽然似乎应该有办法做到这一点，但我开始怀疑没有。

`<div>`我的页面上某处有一个内容。

```
+---------------------------+
| Header                    |
+---------------------------+
|         |                 |
| Sidebar | Content         |
|         |                 |
|         |                 |
|         |                 |
+---------+-----------------+ 
```

我想做的是设置内容的高度，`<div>`使底部等于浏览器窗口的底部。

我知道我可以通过绝对定位做到这一点。但是有没有办法在现有布局中做到这一点？如果唯一的方法是使用 JavaScript/jQuery，那么我很想看看它是如何实现的。

*最后，我的目标是`<div>`使用`overflow-x: auto`. 但我必须有一个固定的高度才能让它工作。*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T16:45:52.623

您必须在此处使用 javascript - 当 dom 准备好时，将内容的高度设置为窗口的高度 - 标题的高度

```
$('#content').height($(window).height() - $('#header').height()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T17:18:20.253

由于缺少信息，例如标题的高度是否固定，或者是否有其他可能导致问题的动态 div，一种可能有效的解决方案。

```
$(function () {
    "use strict";
    var resizeDiv = function (object) {
        object.height($(window).height() - $('#header').height());
    };

    $(window).ready(function () {
        resizeDiv($('#content'));
    });

    $(window).bind("resize", function () {
        resizeDiv($('#content'));
    });

}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T22:34:27.530

这是一个纯CSS解决方案：

```
html,body{
  height:100%;
}

#content{
  //assuming that 80px is the header's height
  height: -moz-calc(100% - 80px);
  height: -webkit-calc(100% - 80px);
  height: calc(100% - 80px);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T16:54:59.737

[http://jsbin.com/ihemus/3/](http://jsbin.com/ihemus/3/)

这个可以吗？

```
html,body{
  height:100%;
  display:block;
}
#sidebar{
  background-color:orange;
  width: 20%;
  float:left;
  height: 100%
}
#content{
  background-color:gold;
  height: 100%
} 
```

* * *

**使用表 解决： [http :](http://jsbin.com/ihemus/15/) **//jsbin.com/ihemus/15/****

 **```
table{
  height:100%;
  width:100%;
}
html,body{
  height:100%;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T16:42:58.143

尝试在内容 div 中添加一个类或 style="min-height:100%"，我认为它会起作用。

使用 JS，假设您的内容的 div 具有 id="content" 和标题 id="header"，所以在 jquery 中，您可以这样做：

```
$("#content").css("height",$(window).height()-$("#header").height); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-06T05:14:46.390

```
var height = height_of_section('div');
document.getElementById('div').style.height = height;

function height_of_section(id)
{
    // elemet position on the window
    var element_position= document.getElementById(id).getBoundingClientRect().top;
    // window scroll y value from top
    var window_scroll = window.scrollY;
    var calc = window_scroll + element_position; 
    return 'calc(100vh - ' + calc + 'px - 40px)';
};
```

```
#div{
  width: 100px;
  border: 1px solid;
}
```

```
<!DOCTYPE html>
<html>
<head>
  <title>Page Title</title>
</head>
<body>

  <div id="div"></div>

</body>
</html>
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-22T17:02:53.030

给你的标题和侧边栏一个固定的位置。然后您的内容将自动滚动，没有标题和侧边栏。
它可以成为一个解决方案吗？**

# asp.net-2.0 - 如何在转发器控件中绑定具有特定高度和宽度的图像

> ID：15575569
> 
> 赞同：3
> 
> 时间：2013-03-22T16:40:26.557
> 
> 标签：asp.net-2.0

我有中继器控件，它具有我的网站 jquery 滑块的特定模板。我如何拥有要显示幻灯片详细信息的表名 tbl_Slide_master。该表有两列，如 Img_height 和 Img_width 作为 int 数据类型，用于在转发器控件中设置图像属性。有关更多信息，我包括我的中继器控制

```
<asp:Repeater ID="SliderRepeater" runat="server">
                  <ItemTemplate>
                  <li>
                   <p class="img"><asp:Image ID="Img_Slide" runat="server" ImageUrl='<%# "images/"+ Eval("ImageName")%>' Height='<%#Eval("Img_height")%>' Width='<%#Eval("Img_width")%>'/></p>
                   <div class="button"><span class="right_but"><img src="images/l_arrow.gif" alt="picture" width="84" height="28" border="0" /><img src="images/r_arrow.gif" alt="picture" width="84" height="28" border="0" /></span></div>
                   <h2><asp:Label ID="lbl_slideheadertext" runat="server" Text='<%# Eval("Header_text")%>'></asp:Label></h2>
                   <p><asp:Label ID="lbl_slidetext" runat="server" Text='<%# Eval("Para_text")%>'></asp:Label></p>
                  </li>
                  </ItemTemplate>
                  </asp:Repeater> 
```

当我运行我的项目时，会出现“指定的演员表无效”之类的错误。它无法评估 tbl_slide_master 表中的图像高度和宽度属性。但是，当我简单地从 Image 控件中删除 Height 和 Width 属性时，Image 会以原始 h*w 显示。我在 Height='<%#Eval("Img_height")%>' 和 Width='<%#Eval("Img_width")%> 中有错误吗...

好吧，我也看到那里我可以使用类似 Height='<%#Eval("Img_height") & "px"%> 但也发生错误，例如“运算符'&'不能应用于'object'类型的操作数和'细绳'”

**更新的解决方案**

好的，我知道我可以使用 html 图像控件，因此不需要 px 来加入高度和宽度。

```
<asp:Repeater ID="SliderRepeater" runat="server">
                  <ItemTemplate>
                  <li>
                   <%--<p class="img"><asp:Image ID="Img_Slide" runat="server" ImageUrl='<%# "images/"+ Eval("ImageName")%>' Height='<%# Eval("Img_height")&"px"%>' Width='<%# Eval("Img_width")&"px"%>'/></p>--%>
                   <p class="img"><img id="Img_Slide" src='<%# "images/"+ Eval("ImageName")%>' width='<%#Eval("Img_width")%>' height='<%#Eval("Img_height")%>'/></p>
                   <div class="button"><span class="right_but"><img src="images/l_arrow.gif" alt="picture" width="84" height="28" border="0" /><img src="images/r_arrow.gif" alt="picture" width="84" height="28" border="0" /></span></div>
                   <h2><asp:Label ID="lbl_slideheadertext" runat="server" Text='<%# Eval("Header_text")%>'></asp:Label></h2>
                   <p><asp:Label ID="lbl_slidetext" runat="server" Text='<%# Eval("Para_text")%>'></asp:Label></p>
                  </li>
                  </ItemTemplate>
                  </asp:Repeater> 
```

# css - QComboBox 背景颜色

> ID：15575570
> 
> 赞同：1
> 
> 时间：2013-03-22T16:40:27.507
> 
> 标签：css, qt, background-color, qcombobox

我用 QtDesigner 和 ui 文件创建了一个 Qt HMI。我的 QComboBox 在设计器和实际中没有相同的背景颜色：

设计师：

![在此处输入图像描述](../Images/5de8e37a31329b43678bcc6ab6dee5ae.png)

现实生活：

![在此处输入图像描述](../Images/a2d29df95c17fdddc370e58374dc3fb5.png)

我在 Windows 7 下。也许它取决于操作系统，但我想有一个白色的背景。

我试过：

```
comboBox->setStyleSheet("QComboBox { background-color: white; }"); 
```

但它也绘制了右箭头。

有什么解释吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:03:13.820

组合是空的吗？

尝试添加一些元素并在运行“应用程序”之前选择其中一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:28:01.293

您是否尝试将 QPalette::Base 更改为白色？您可以在不使用任何样式表的情况下做到这一点。

```
QComboBox box = new QComboBox();
QPalette p = box.palette();

p.setColor(QPalette::Active, QPalette::Base, Qt::white);
p.setColor(QPalette::Inactive, QPalette::Base, Qt::white);

box.setPalette(p); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-26T16:17:16.230

`QPalette::Base`不会`QComboBox`改变.

相反，我使用过：

```
QPalette palette = ui->combo->palette();
palette.setColor(QPalette::Active, QPalette::Button, Qt::white);
palette.setColor(QPalette::Inactive, QPalette::Button, Qt::white);
ui->combo->setPalette(palette); 
```

它似乎工作。

# maven - 在客户提供的执行器上运行 Maven 构建时出现 IllegalArgumentException

> ID：15575571
> 
> 赞同：0
> 
> 时间：2013-03-22T16:40:32.440
> 
> 标签：maven, jenkins, cloudbees

[我使用客户提供的执行](http://wiki.cloudbees.com/bin/view/DEV/Customer+Provided+Slaves)器功能将我的计算机连接到我的 CloudBees Jenkins 。当我尝试运行 Maven 构建时，我收到此错误：

```
FATAL: Null value not allowed as an environment variable: M2_HOME
java.lang.IllegalArgumentException: Null value not allowed as an environment variable: M2_HOME 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:40:32.440

这是因为 DEV@cloud 上默认提供的 Maven 使用 DEV@cloud 构建机器上可用的预安装 Maven 版本。由于您提供自己的执行程序，因此您必须告诉 Jenkins 在哪里可以找到 Maven 或如何安装它。您可以通过在 $JENKINS_URL/configure 下编辑 Maven 安装来完成此操作。

您可以单击现有 Maven 安装上的“自动安装”选项，也可以为客户提供的执行程序添加新的 Maven 安装。

如果您想使用现有的 maven 安装，只需添加另一个 maven 安装，不要勾选“自动安装”或“在 DEV@cloud 上使用预安装版本”。

# c# - 多个泛型重载

> ID：15575573
> 
> 赞同：1
> 
> 时间：2013-03-22T16:40:32.583
> 
> 标签：c#, generics

我有一个简单的帮助类，我用它来构建一个简单的逗号分隔字符串。

```
private string AddcsvString(string s)
{
    if(string.IsNullOrWhiteSpace(this.Value))
    {
        return s;
    }
    else
    {
        return this.Value + "," + s;
    }
} 
```

我也有一个通用方法调用它

```
public void Add<T>(T s) where T: struct 
{
     this.Value = AddcsvString(s.ToString());
} 
```

我想为通用列表添加重载

```
public void Add<T>(IEnumerable<T> values)where T:struct 
{
    foreach (T t in values)
    {
        Add(t.ToString());
    }
} 
```

但是任何调用它的尝试都称为第一个泛型方法。所以我最终将第二个泛型方法重命名为 AddAll。最后，我认为这是处理此案的正确方法，但想知道是否可以同时拥有两者以供将来参考。

--edit 这是不起作用的情况

```
CsvString test = new CsvString();
string result;
test.Add(1);
test.Add('2');
test.Add("3");
result = test.ToString();  //  result = "1,2,3"

CsvString test2 = new CsvString();
List<long> aList = new List<long>();
string result2;
aList.Add(1);
aList.Add(2);
aList.Add(3);
test2.Add(aList);  //line doesn't compile 
```

--edit 2 我找到了第二个解决方案（尽管下面的 JoshE 回答了这个问题，谢谢顺便说一句）。我把第二种方法改成了这个

```
public SWcsvString Add<T,K>(T values)where T: IEnumerable<K> where K: struct
{
    foreach (K k in values)
    {
        Add(k.ToString());
    }
    return this;
} 
```

以及对此的呼吁

```
test2.Add<IEnumerable<long>,long>(aList); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:46:35.247

尝试删除你的约束`where T : struct`，我认为你会得到正确的行为。

`IEnumerable<char> <==> String`, 因为 a`string`只是一个`char[]`. 由于 a`string`并不是*真正*的值对象，因此重载决议几乎总是倾向于第一种方法来避免将字符串转换为 的装箱/拆箱操作`IEnumerable<char>`。（我猜你已经尝试过同时调用它`"foo"`以及结构`IEnumerable<bar>`在哪里`bar`）。

# ios - 如何保存应用程序状态并再次恢复它

> ID：15575575
> 
> 赞同：1
> 
> 时间：2013-03-22T16:40:42.447
> 
> 标签：ios, objective-c

我使用导航控制器，我有 6 个导航控制器我希望应用程序保存状态并恢复应用程序终止的最后一个屏幕。在它再次启动时打开它
在任何视图中我必须使用什么代码来执行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T16:42:59.440

Apple 提供了执行此操作的机制：[https ://developer.apple.com/documentation/uikit/view_controllers/preserving_your_app_s_ui_across_launches?language=objc](https://developer.apple.com/documentation/uikit/view_controllers/preserving_your_app_s_ui_across_launches?language=objc)

链接中的重要部分：

> 状态保存和恢复不是自动功能，应用程序必须选择使用它。应用程序通过在其应用程序委托中实现以下方法来表明它们对该功能的支持：
> 
> ```
> application:shouldSaveApplicationState:
> application:shouldRestoreApplicationState: 
> ```
> 
> 通常，这些方法的实现只返回 YES 以指示可以进行状态保存和恢复。但是，想要有条件地保留和恢复其状态的应用程序可以在不应该发生操作的情况下返回 NO。例如，在发布应用程序更新后，如果您的应用程序无法有效地从先前版本恢复状态，您可能希望从应用程序返回 NO:shouldRestoreApplicationState: 方法。
> 
> **保留视图控制器的状态**
> 
> 保留应用程序视图控制器的状态应该是您的主要目标。视图控制器定义了用户界面的结构。他们管理呈现该界面所需的视图，并协调支持这些视图的数据的获取和设置。要保留单个视图控制器的状态，您必须执行以下操作：
> 
> （必需）为视图控制器分配恢复标识符；请参阅“标记您的视图控制器以进行保存”。（必需）提供代码以在启动时创建或定位新的视图控制器对象；请参阅“在启动时恢复您的视图控制器”。（可选）实现 encodeRestorableStateWithCoder: 和 decodeRestorableStateWithCoder: 方法来编码和恢复在后续启动期间无法重新创建的任何状态信息；请参阅“对视图控制器的状态进行编码和解码”。</p>
> 
> 除了应用程序的视图控制器和视图保存的数据之外，UIKit 还提供了挂钩来保存应用程序所需的任何杂项数据。具体来说， UIApplicationDelegate 协议包括以下方法供您覆盖：
> 
> ```
> application:willEncodeRestorableStateWithCoder:
> application:didDecodeRestorableStateWithCoder: 
> ```

# c# - 使用迭代器等待任务

> ID：15575576
> 
> 赞同：0
> 
> 时间：2013-03-22T16:40:44.167
> 
> 标签：c#, asp.net, parallel-processing, task

我正在使用本文中描述的方法[在 C#4 中使用迭代器](http://www.codeproject.com/Articles/504197/Await-Tasks-in-Csharp4-using-Iterators)在此处使用迭代器在不使用 C#5 的情况下尽可能接近地复制 using`async`和关键字。`await`

我偶然发现了一个问题，我认为该问题与`GetResponseAsync()`在 C#5 中使用时似乎常见的问题相同，[请参阅问题](https://stackoverflow.com/questions/12701545/async-and-await-with-httpwebrequest-getresponseasync)，因为每当我尝试使用等效的扩展方法`yield return`时，我的`IEnumerable<Task>`. 我没有`ConfigureAwait(false)`可用的方法。

谁能看到解决这个问题的方法？

我的代码：

```
/// <summary>
/// Processes the image.
/// </summary>
/// <param name="context">
/// the <see cref="T:System.Web.HttpContext">HttpContext</see> 
/// object that provides references to the intrinsic server objects
/// </param>
private /*async*/ void ProcessImageAsync(HttpContext context)
{
    this.ProcessImageAsyncTask(context).ToTask();
}

/// <summary>
/// Processes the image.
/// </summary>
/// <param name="context">
/// the <see cref="T:System.Web.HttpContext">HttpContext</see> 
/// object that provides references to the intrinsic server objects
/// </param>
/// <returns>
/// The <see cref="IEnumerable{Task}"/>.
/// </returns>
private IEnumerable<Task> ProcessImageAsyncTask(HttpContext context)
{
    // Code ommited that works out the url
    Uri uri = new Uri(path);

    HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(uri);

    Task<WebResponse> responseTask = webRequest.GetResponseAsync();
   //################################################################//
   //The method appears to be jumping out of the method here on yield
   //################################################################//
    yield return responseTask;

    // Code that runs other tasks

    yield break;
} 
```

我将相关的扩展方法添加为 Github [Gist](https://gist.github.com/JimBobSquarePants/5222741)以使问题更具可读性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:04:06.330

我怀疑问题是使用`TaskScheduler.FromCurrentSynchronizationContext`. 添加另一个重载以避免这种情况应该相当简单：

```
public static Task<TResult> ToTask<TResult>(this IEnumerable<Task> tasks, TaskScheduler taskScheduler)
{
    var taskEnumerator = tasks.GetEnumerator();
    var completionSource = new TaskCompletionSource<TResult>();

    // Clean up the enumerator when the task completes.
    completionSource.Task.ContinueWith(t => taskEnumerator.Dispose(), taskScheduler);

    ToTaskDoOneStep(taskEnumerator, taskScheduler, completionSource, null);
    return completionSource.Task;
}

public static Task<TResult> ToTask<TResult>(this IEnumerable<Task> tasks)
{
    var taskScheduler = SynchronizationContext.Current == null
       ? TaskScheduler.Default 
       : TaskScheduler.FromCurrentSynchronizationContext();

    return ToTask<TResult>(tasks, taskScheduler);
} 
```

然后您的代码将调用另一个重载：

```
private /*async*/ void ProcessImageAsync(HttpContext context)
{
    ProcessImageAsyncTask(context).ToTask(TaskScheduler.Default);
} 
```

# c# - 重写代码以利用 C# 异步功能

> ID：15575579
> 
> 赞同：2
> 
> 时间：2013-03-22T16:40:57.997
> 
> 标签：c#, async-await

如何转换这样的代码：

```
public void Do2()
{
        Console.WriteLine("Do2::Before");
        Latent(() => Console.WriteLine("Do2::After"));
}
public void Latent(Action a)
{
     registeredActions.Add(a);
}
public void TriggerActions()
{
        foreach (Action a in registeredActions)
        {
            a();
        }
} 
```

要像这样使用：

```
public async void Do1()
{
        Console.WriteLine("Do1::Before");
        await Latent();
        Console.WriteLine("Do1::After");
} 
```

请注意，我不希望任务在 ThreadPool 或其他线程上或在我背后神奇地执行，就在我想要它们时，即由我自己决定 Task 何时“完成”并调用*await Latent()*之后的任何代码，最有可能在与 Do1 相同的线程中被调用。示例用法：

```
Console.WriteLine("Before Do");
ts.Do2();
Console.WriteLine("After Do, before triggering actions");
// ... do some other stuff and when it is the right time to "complete pending tasks"
ts.TriggerActions();
Console.WriteLine("After triggering actions"); 
```

我找不到任何解决方案，所有 C# 异步示例都在谈论 await client.GetStringAsync(.. or Thread.Sleep(... or Task.Delay(...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:03:54.670

你使用一个`TaskCompletionSource<T>`：

```
Task Latent()
{
  var tcs = new TaskCompletionSource<object>();

  ... // Apply some logic here to eventually call "tcs.TrySetResult".

  return tcs.Task;
} 
```

这可以这样使用：

```
public async Task Do1()
{
  Console.WriteLine("Do1::Before");
  await Latent();
  Console.WriteLine("Do1::After");
} 
```

# google-maps-api-3 - OVER_QUERY_LIMIT 启用服务器应用和计费

> ID：15575580
> 
> 赞同：0
> 
> 时间：2013-03-22T16:40:58.327
> 
> 标签：google-maps-api-3

我使用像这样的电话

```
http://maps.googleapis.com/maps/api/geocode/xml?address=Switzerland+Bern+&components=country:CH&sensor=false 
```

获取地理坐标。这工作了几个小时，然后有回应

```
 <?xml version="1.0" encoding="UTF-8"?>
<GeocodeResponse> <status>OVER_QUERY_LIMIT</status> </GeocodeResponse> 
```

我很确定我可以使用我的服务器 api 密钥进行的调用不超过 2500 次，而在 API Konsole 中我只达到了配额的 10%。

我什至启用了计费。有没有办法进一步调试这个或者我缺少什么？

这是我的 API 控制台：

![在此处输入图像描述](../Images/2782ed2f23cc6da75ebff5eac23046cb.png)

这是使用数据

![在此处输入图像描述](../Images/d81c0924351b90605a9d15f0654c0b54.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:35:36.377

我有同样的问题。根据研究，我了解到地理编码器的请求限制为每天 2,500 次和每秒 20 次。这些是基于 IP 地址的。

请参阅[https://developers.google.com/maps/documentation/geocoding/index#Limits](https://developers.google.com/maps/documentation/geocoding/index#Limits)

这意味着如果您的应用程序位于共享服务器上，并且有其他应用程序共享 IP 地址并使用地理编码服务，则它们的请求将与您的请求捆绑以提供总数。

我不知道以任何方式查看地理编码器的请求报告，API 控制台中的报告用于地图，用于显示地图而不是对地址进行地理编码。

据我所知，似乎没有任何办法绕过地理编码器的限制，仅仅拥有一个标准的付费 API 帐户似乎对请求限制没有任何影响。

但是，Maps for Business 帐户允许每天最多 100,000 个请求的使用限制。

最好的选择可能是您将应用程序的架构（如果可能）从服务器端地理编码更改为客户端地理编码，这将取消对服务器 IP 的限制。请参阅[https://developers.google.com/maps/articles/geocodestrat](https://developers.google.com/maps/articles/geocodestrat)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T12:47:17.270

我认为这是谷歌的问题。尽量避免服务器端地理编码。而是使用客户端地理编码。

# iphone - 如何发现我的视网膜设备正在使用 2x 图像？

> ID：15575581
> 
> 赞同：1
> 
> 时间：2013-03-22T16:40:58.997
> 
> 标签：iphone, ios, retina-display

我知道 2x 图像用于视网膜显示。

但我想知道我们如何确定我的设备使用的是 1x 图像还是 2x 图像？

还有一件事情

我有一个`stackOverflow.png`大小为**50x50**的图像名称和它的 2x`stackOverflow@2x.png`大小为**100x98**的名称。

我的问题是该设备将选择具有名称或大小的视网膜图像？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T16:45:58.610

要检查哪个已加载，您可以使用以下代码：

```
 UIImage *image = [UIImage imageNamed:@"image"];
    NSLog(@"scale: %f", image.scale); //this will be 2.0 for retina image 
```

或者只是简单地使用两个不同的图像，正如@MidhunMP 在评论中建议的那样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T16:45:50.000

通常只看它们并不难判断——尤其是在 iOS 模拟器中。将模拟器设置为视网膜模式并查看一下。与视网膜图像相比，非视网膜图像会明显模糊。

至于图像大小，如果您的 2x 图像实际上不是原始图像的 2x 大小，那么**您做错了**。修复一个图像或另一个图像，或两者兼而有之。视网膜图像按名称选择。如果尺寸错误，图像将被拉伸以适应。这将破坏您尝试使用 2 倍图像获得的高分辨率视网膜效果。

# java - java.lang.NoSuchMethodException

> ID：15575585
> 
> 赞同：1
> 
> 时间：2013-03-22T16:41:12.870
> 
> 标签：java, nosuchmethod

我目前正在编写一个 Java 应用程序，但我被卡住了。

```
package framework.messages.requests;

import framework.sessions.Session;

public class Handshake {

    public static void CheckRevision(Session Session) {
        try {
            System.out.println("[" + Session.GetID() + "] --&gt; " + Session.GetRequest().ReadUTF());
        }
        catch (Exception ex) {

        }
    }  
} 
```

我的课就是这样。

如果`main(String[] args)`我使用：

```
System.out.println(Handshake.class.getMethods()[0].getName()); 
```

输出是 CheckRevision。

但如果我在其他地方使用：

```
this.Packets[6428] = Handshake.class.getMethod("CheckRevision"); 
```

我得到：

```
Exception in thread "main" java.lang.NoSuchMethodException: framework.messages.requests.Handshake.CheckRevision()
    at java.lang.Class.getMethod(Unknown Source)
    at framework.messages.MessageHandler.AddPackets(MessageHandler.java:18)
    at framework.Framework.main(Framework.java:34) 
```

为什么我没有得到好的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T16:46:04.390

如果您`getMethod`只为方法提供方法名称，那么它将假定您正在寻找一个无参数的方法。该[`getMethod`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getMethod(java.lang.String,%20java.lang.Class...))方法有一个 varargs 参数，用于您要查找的方法的参数类。

利用

```
Handshake.class.getMethod("CheckRevision", Session.class); 
```

# c++ - Windows Phone 的 RegistryNotifyCallback 等效项

> ID：15575592
> 
> 赞同：0
> 
> 时间：2013-03-22T16:41:32.747
> 
> 标签：c++, .net, windows-phone-8, windows-mobile-6.5

在 Windows Mobile 中，我可以使用 RegistryNotifyCallback 并在某些数据更改时收到通知。

Windows Phone 8 中是否有与此功能等效的功能？

由于 RegistryNotifyCallback 用于 C++（非托管代码）而 WP 使用 .Net（托管代码），有没有办法直接导入和使用必要的 C++ DLL？

我在这里寻找的功能是在我的人员中心的联系人在我的应用程序之外更改其任何数据时收到通知。我以前问过这个问题，简短的回答是“没有办法做到这一点”，但我仍然希望有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T00:33:40.283

> 我以前问过这个问题，简短的回答是“没有办法做到这一点”，

那你怎么又问了？还是一样的答案。而且，我们无意允许第 3 方开发人员从有限的联系人存储中访问数据。

# delphi - 使用 Delphi TOSVersion.TArchitecture 在 Windows 中确定操作系统架构

> ID：15575596
> 
> 赞同：0
> 
> 时间：2013-03-22T16:41:52.523
> 
> 标签：delphi

我有一个带有一个 TEdit 和一个 TButton 的表单。我正在尝试确定操作系统架构。因此，我按照 Embarcadero 论坛的建议定义了以下代码：

```
function OSArchitectureToStr(const a: TOSVersion.TArchitecture): string;
function OSPlatformToStr(const p: TOSVersion.TPlatform): string;
function PlatformFromPointer: integer;
.
.
.
.
.

function OSArchitectureToStr(const a: TOSVersion.TArchitecture): string;
begin
  case a of
    arIntelX86: Result := 'Intel X86';
    arIntelX64: Result := 'Intel X64';
    else
      Result := 'UNKNOWN OS Aarchitecture';
  end;
end;

function OSPlatformToStr(const p: TOSVersion.TPlatform): string;
begin
  case p of
    pfWindows: Result := 'Windows';
    pfMacOS: Result := 'MacOS';
    else
      Result := 'UNKNOWN OS Platform';
  end;
end;

function PlatformFromPointer: integer;
begin
  Result := SizeOf(Pointer) * 8;
end;
.
.
.
.
.
procedure TMainForm.BitBtn1Click(Sender: TObject);
begin
  Edit1.Text := OSPlatformToStr(TOSVersion.Platform) + ' ' + IntToStr(PlatformFromPointer) + ' Bit';
end; 
```

但问题是尽管它是 64 位操作系统，但它总是导致 32 位操作系统。请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T16:49:29.997

您（错误地！）使用以下内容来获取架构：

```
function PlatformFromPointer: integer;
begin
  Result := SizeOf(Pointer) * 8;
end; 
```

现在，在 32 位应用程序中，`SizeOf(Pointer)`等于`4`，而在 64 位应用程序中，它等于`8`。所以这只检查*你*正在编写什么类型的应用程序，而不是它运行的操作系统！（因此，很明显，您的应用程序是 32 位的。这与操作系统是 32 位还是 64 位无关。）

您可能想要进行调查`TOSVersion.Architecture`。但你没有。事实上，你根本不会使用它（或`OSArchitectureToStr`！）。

你想要的是`OSArchitectureToStr(TOSVersion.Architecture)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-19T03:16:42.303

为了获得32位和/或64位版本的应用程序（进程），需要在项目中添加相应的编译器。在 * .dproj - Project 窗口中，选择 Target Platforms 项并添加 Windows 64-bit （当然您必须安装该选项）现在您可以将目标平台设置为 32 位或 64 位

# java - GWT：TabLayoutPanel 崩溃的应用程序

> ID：15575604
> 
> 赞同：0
> 
> 时间：2013-03-22T16:42:10.303
> 
> 标签：java, gwt

我有一个使用 UiBinder 的 TabLayoutPanel 的 GWT 应用程序。我有 UiBinder 作为：

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
             xmlns:g="urn:import:com.google.gwt.user.client.ui">
    <g:TabLayoutPanel ui:field="tabLayoutPanel" barUnit="em" barHeight="3">
        <g:tab>
            <g:header>Welcome</g:header>
        </g:tab>
        <g:tab>
            <g:header>Login</g:header>
        </g:tab>
    </g:TabLayoutPanel>
</ui:UiBinder> 
```

并且查看代码为：

```
public class MyView extends Composite {
    interface MyUiBinder extends UiBinder<Widget, MyView> {}
    private static MyUiBinder uiBinder = GWT.create(MyUiBinder.class);

    @UiField TabLayoutPanel tabLayoutPanel;

    public AuthenticateView() {
        initWidget(uiBinder.createAndBindUi(this));
    }
} 
```

此代码总是因错误而崩溃：

```
 Caused by: java.lang.RuntimeException: Deferred binding failed for 'com.mycompany.MyView' (did you forget to inherit a required module?) at 
com.google.gwt.dev.shell.GWTBridgeImpl.create(GWTBridgeImpl.java:53) at
 com.google.gwt.core.shared.GWT.create(GWT.java:57) at 
com.google.gwt.core.client.GWT.create(GWT.java:85) 
```

有人可以告诉我出了什么问题。

我确实通过将它添加到 RootLayoutPanel 中。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:31:42.767

根据[TablayoutPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/TabLayoutPanel.html)文档

*此小部件仅在标准模式下工作，这要求运行它的 HTML 页面具有显式声明*

您的 DOCTYPE 似乎有问题`host html page`。

请验证您的主机 HTML 页面是否仅具有标准模式的文档类型？尝试更改`<!DOCTYPE html>`.

并建议交叉检查和[TabPanel的](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/ui/TabPanel.html)[示例](http://www.giantflyingsaucer.com/blog/?p=1062)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T00:56:07.723

如果包含`MyView`该类的包未`source`在您的`*.gwt.xml`.

# android - Android 应用内计费：无法启动异步操作，因为另一个异步操作（正在进行中）

> ID：15575605
> 
> 赞同：70
> 
> 时间：2013-03-22T16:42:11.903
> 
> 标签：android, android-billing

我正在使用`IabHelper`Google 教程推荐的实用程序类，但我受到了这个错误的严重打击。显然`IabHelper`不能同时运行多个异步操作。我什至设法在盘点仍在进行时尝试开始购买。

我已经尝试按照[这里](https://stackoverflow.com/questions/14130044/android-billing-exception)`onActivityResult`的建议在我的主类中实现，但在错误发生之前我什至没有调用该方法。然后我找到[了这个](https://stackoverflow.com/questions/15066095/illegalstateexception-in-iab-v3)，但我不知道在哪里可以找到这个方法——它不在课堂上。`flagEndAsync``IabHelper`

现在我正在寻找解决这个问题的方法（不重新实现整个she-bang）。我能想到的唯一解决方案是创建一个`asyncActive`在异步任务启动之前检查的布尔字段，如果有另一个任务处于活动状态，则不要这样做。但这还有许多其他问题，并且不适用于跨活动。此外，我更希望有一个异步任务队列并在允许时立即运行，而不是根本不运行。

这个问题有什么解决方案吗？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-05-03T12:35:05.500

一个简单的棘手的解决方案

在调用**purchaseItem**方法之前只需添加此行

```
 if (billingHelper != null) billingHelper.flagEndAsync(); 
```

所以你的代码看起来是这样的

```
 if (billingHelper != null) billingHelper.flagEndAsync();
 purchaseItem("android.test.purchased"); 
```

**注意：**如果你从另一个包中调用它，不要忘记在 IabHelper 中创建 public flagEndAsync() 方法。

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2013-12-10T02:59:45.960

确保`handleActivityResult`在 Activity 中调用 IabHelper `onActivityResult`，而**不是**在 Fragment 中`onActivityResult`。

以下代码片段来自 TrivialDrive 的[MainActivity](https://github.com/googlesamples/android-play-billing/blob/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/MainActivity.java#L446)：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    Log.d(TAG, "onActivityResult(" + requestCode + "," + resultCode + "," + data);
    if (mHelper == null) return;

    // Pass on the activity result to the helper for handling
    if (!mHelper.handleActivityResult(requestCode, resultCode, data)) {
        // not handled, so handle it ourselves (here's where you'd
        // perform any handling of activity results not related to in-app
        // billing...
        super.onActivityResult(requestCode, resultCode, data);
    }
    else {
        Log.d(TAG, "onActivityResult handled by IABUtil.");
    }
} 
```

**更新：**

*   现在有一个[应用内结算版本 3 API](https://developer.android.com/google/play/billing/api.html)（2013 年的版本是什么？）
*   代码示例已移至[Github](https://github.com/googlesamples/android-play-billing/tree/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample)。上面的片段经过编辑以反映当前样本，但在逻辑上与以前相同。

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2013-03-23T03:12:02.590

这不容易破解，但我找到了所需的解决方法。最近对 Google 很失望，他们的 Android 网站变得一团糟（很难找到有用的信息），而且他们的示例代码很差。几年前我在做一些 Android 开发时，一切都变得容易多了！这又是一个例子……

事实上，IabUtil 是有问题的，它没有正确地取消自己的异步任务。一套完整的必要变通办法来稳定这个东西：

1）`flagEndAsync`公开方法。它在那里，只是不可见。

2) 让每个侦听器调用`iabHelper.flagEndAsync`以确保程序被正确标记为完成；似乎所有听众都需要它。

3) 用 a 包围调用`try/catch`以捕获`IllegalStateException`可能发生的情况，并以这种方式处理。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-02-02T00:56:59.723

我最终做了类似于金太郎的事情。但是将 mHelper.flagEndAsync() 添加到捕获的末尾。用户仍然会收到吐司，但下次他们按下购买按钮时，异步操作已被终止，购买按钮已准备好再次使用。

```
if (mHelper != null) {
    try {
    mHelper.launchPurchaseFlow(this, item, RC_REQUEST, mPurchaseFinishedListener, "");
    }       
    catch(IllegalStateException ex){
        Toast.makeText(this, "Please retry in a few seconds.", Toast.LENGTH_SHORT).show();
        mHelper.flagEndAsync();
    }
} 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-09-19T02:30:09.083

`flagEndAsync()`在**IabHelper.java**文件中找到并将其更改为**公共**函数。

`flagEndAsync()`在尝试为您的**IabHelper**购买电话之前

 **您必须像以下代码一样执行 somthig：

```
mHelper.flagEndAsync();
mHelper.launchPurchaseFlow(AboutActivity.this, SKU_PREMIUM, RC_REQUEST, mPurchaseFinishedListener, "payload-string"); 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2013-08-16T10:14:05.177

在我偶然发现[另一个 SO 线程](https://stackoverflow.com/questions/13831503/iabhelper-purchasefinishedlistener)之前，我遇到了同样的问题。我包括在另一个线程中找到的代码的修改版本，您需要将其包含在初始化购买的活动中。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    // Pass on the activity result to the helper for handling
    // NOTE: handleActivityResult() will update the state of the helper,
    // allowing you to make further calls without having it exception on you
    if (billingHelper.handleActivityResult(requestCode, resultCode, data)) {
        Log.d(TAG, "onActivityResult handled by IABUtil.");
        handlePurchaseResult(requestCode, resultCode, data);
        return;
    }

    // What you would normally do
    // ...
} 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2014-10-04T15:35:10.217

为我做的一个简单技巧是在 IabHelper 中创建一个方法：

```
public Boolean getAsyncInProgress() {
    return mAsyncInProgress;
} 
```

然后在您的代码中，只需检查：

```
if (!mHelper.getAsyncInProgress())
    //launch purchase
else
    Log.d(TAG, "Async in progress already..) 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2013-07-23T12:20:59.213

真是烦人的问题。这是一个快速而肮脏的解决方案，它在代码方面并不完美，但它对用户友好并且避免了差评和崩溃：

```
if (mHelper != null) {
        try {
        mHelper.launchPurchaseFlow(this, item, RC_REQUEST, mPurchaseFinishedListener, "");
        }       
        catch(IllegalStateException ex){
            Toast.makeText(this, "Please retry in a few seconds.", Toast.LENGTH_SHORT).show();
        }
    } 
```

这样，用户只需再点击一次（最坏的情况是 2 次）并获得计费弹出窗口

希望能帮助到你

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-04-02T07:49:29.743

只需检查活动上的 onActivityResult requestCode，如果它与您在购买时使用的 PURCHASE_REQUEST_CODE 匹配，只需将其传递给片段。

当您在 FragmentTransaction 中添加或替换片段时，只需设置一个标签：

```
fTransaction.replace(R.id.content_fragment, fragment, fragment.getClass().getName()); 
```

然后在您的活动的 onActivityResult

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if(requestCode == PurchaseFragment.PURCHASE_REQUEST_CODE) {
        PurchaseFragment fragment = getSuportFragmentManager().findFragmentByTag(PurchaseFragment.class.getNAme());
        if(fragment != null) {
            fragment.onActivityResult(requestCode, resultCode, data);
        }
    }
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-01-21T13:05:05.480

如果你在片段中编码，那么你在 IabHelper.java 中的这段代码

```
void flagStartAsync(String operation) {
    if (mAsyncInProgress) {
        flagEndAsync();
    }
    if (mAsyncInProgress) throw new IllegalStateException("Can't start async operation (" +
            operation + ") because another async operation(" + mAsyncOperation + ") is in progress.");
    mAsyncOperation = operation;
    mAsyncInProgress = true;
    logDebug("Starting async operation: " + operation);
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-07-11T21:37:10.590

或者，您可以在此处获取最新的 IabHelper.java 文件：[https ://code.google.com/p/marketbilling/source/browse/](https://code.google.com/p/marketbilling/source/browse/)

3 月 15 日的版本为我解决了这个问题。（注意其他没有变化的文件是在 15 号提交的）

当“android.test.canceled”是发送的 SKU 时，我仍然必须修复在测试期间发生的一次崩溃，该崩溃是由 null intent extras 引起的。我变了：

```
int getResponseCodeFromIntent(Intent i) {
    Object o = i.getExtras().get(RESPONSE_CODE); 
```

至：

```
int getResponseCodeFromIntent(Intent i) {
    Object o = i.getExtras() != null ? i.getExtras().get(RESPONSE_CODE) : null; 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-11-02T01:02:15.050

IabHelpr 类的另一个主要问题是在多个方法中抛出 RuntimeExcptions (IllegalStateException) 的错误选择。在大多数情况下，从您自己的代码中抛出 RuntimeExeptions 是不可取的，因为它们是*未经检查的异常*。这就像破坏您自己的应用程序 - 如果没有被捕获，这些异常将冒泡并导致您的应用程序崩溃。

对此的解决方案是实现您自己的已*检查异常*并更改 IabHelper 类以抛出它，而不是 IllegalStateException。这将迫使您在编译时可能在代码中抛出的任何地方处理此异常。

这是我的自定义异常：

```
public class MyIllegalStateException extends Exception {

    private static final long serialVersionUID = 1L;

    //Parameterless Constructor
    public MyIllegalStateException() {}

    //Constructor that accepts a message
    public MyIllegalStateException(String message)
    {
       super(message);
    }
} 
```

一旦我们在 IabHelper 类中进行了更改，我们就可以在调用类方法的代码中处理已检查的异常。例如：

```
try {
   setUpBilling(targetActivityInstance.allData.getAll());
} catch (MyIllegalStateException ex) {
    ex.printStackTrace();
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-06-19T11:18:15.560

我偶尔会遇到这个问题，在我的情况下，我已经追踪到这样一个事实，即如果底层服务断开连接并重新连接（例如由于间歇性网络连接），是否可以多次调用 IabHelper 中的 onServiceConnected 方法。

我的具体操作是“无法启动异步操作（刷新库存），因为另一个异步操作（launchPurchaseFlow）正在进行中。”

根据我的应用程序的编写方式，在完成 queryInventory 之前，我无法调用 launchPurchaseFlow，并且我只能从我的 onIabSetupFinished 处理程序函数中调用 queryInventory。

每当调用它的 onServiceConnected 时，IabHelper 代码都会调用此处理函数，这可能不止一次发生。

onServiceDisconnected的[Android 文档说：](http://developer.android.com/reference/android/content/ServiceConnection.html)

> 当与服务的连接丢失时调用。这通常发生在托管服务的进程崩溃或被终止时。这不会删除 ServiceConnection 本身 - 与服务的绑定将保持活动状态，并且当服务下次运行时，您将收到对 onServiceConnected(ComponentName, IBinder) 的调用。

这解释了这个问题。

可以说，IabHelper 不应多次调用 onIabSetupFinished 侦听器函数，但另一方面，如果我已经完成它并得到结果，只需不从该函数中调用 queryInventory 来解决我的应用程序中的问题是微不足道的.

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-04-03T20:00:16.927

是的，我也面临这个问题，但我解决了这个问题，但我解决了使用

```
IabHelper mHelpermHelper = new IabHelper(inappActivity, base64EncodedPublicKey);
  mHelper.flagEndAsync(); 
```

上述方法停止所有标志。它对我的工作必须检查

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-03-22T17:13:55.743

我有同样的问题，问题是我没有实现 onActivityResult 方法。

```
@Override
protected void onActivityResult(int requestCode,
            int resultCode,
            Intent data)
{
    try
    {
        if (billingHelper == null)
        {
            return;
        } else if (!billingHelper.handleActivityResult(requestCode, resultCode, data))
        {
            super.onActivityResult(requestCode, resultCode, data);
        }
    } catch (Exception exception)
    {
        super.onActivityResult(requestCode, resultCode, data);
    }
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-08-18T11:37:56.603

NadtheVlad 答案的一个小修改版本，就像魅力一样

```
private void makePurchase() {

    if (mHelper != null) {
        try {
            mHelper.launchPurchaseFlow(getActivity(), ITEM_SKU, 10001, mPurchaseFinishedListener, "");
        }
        catch(IllegalStateException ex){
            mHelper.flagEndAsync();
            makePurchase();
        }
    }
} 
```

逻辑很简单，只要把`launchPurchaseFlow()`东西放在一个方法中，在catch块中使用递归即可。你仍然需要在课堂上`flagEndAsync()`公开。`IabHelper`

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-02-04T13:23:30.820

我的解决方案很简单

1.) 使 mAsyncInProgress 变量在 IabHelper 之外可见

```
public boolean isAsyncInProgress() {
    return mAsyncInProgress;
} 
```

2.）在您的活动中使用它，例如：

```
...
if (mIabHelper.AsyncInProgress()) return;
mIabHelper.queryInventoryAsync(...);
... 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-03-27T14:51:50.257

这个答案直接解决了@Wouter 看到的问题......

确实，`onActivityResult()`必须触发，就像许多人所说的那样。但是，错误在于 Google 的代码`onActivityResult()`在某些情况下没有触发，即当您在运行应用程序的调试版本时按两次 [BUY] 按钮时。

此外，一个主要问题是用户可能处于不稳定的环境中（例如公共汽车或地铁）并按下您的 [BUY] 按钮两次...突然间您遇到了一个例外！

至少谷歌修复了这个令人尴尬的异常[https://github.com/googlesamples/android-play-billing/commit/07b085b32a62c7981e5f3581fd743e30b9adb4ed#diff-b43848e47f8a93bca77e5ce95b1c2d66](https://github.com/googlesamples/android-play-billing/commit/07b085b32a62c7981e5f3581fd743e30b9adb4ed#diff-b43848e47f8a93bca77e5ce95b1c2d66)

**下面是我在`IabHelper`实例化的同一个类中实现的（对我来说，这是在 Application 类中）：**

```
/**
 * invokes the startIntentSenderForResult - which will call your activity's onActivityResult() when it's finished
 * NOTE: you need to override onActivityResult() in your activity.
 * NOTE2: check IAB code updates at https://github.com/googlesamples/android-play-billing/tree/master/TrivialDrive/app/src/main/java/com/example/android/trivialdrivesample/util
 * @param activity
 * @param sku
 */
protected boolean launchPurchaseWorkflow(Activity activity, String sku)
{
    if (mIabIsInitialized)
    {
        try
        {
            mHelper.launchPurchaseFlow(
                    activity,
                    sku,
                    Constants.PURCHASE_REQUEST_ID++,// just needs to be a positive number and unique
                    mPurchaseFinishedListener,
                    Constants.DEVELOPER_PAYLOAD);
            return true;//success
        }
        catch (IllegalStateException e)
        {
            mHelper.flagEndAsync();
            return launchPurchaseWorkflow(activity, sku);//recursive call
        }
    }
    else
    {
        return false;//failure - not initialized
    }
} 
```

我的 [BUY] 按钮调用它`launchPurchaseWorkflow()`并传递 SKU 和按钮所在的活动（或者如果您在片段中，则传递封闭活动）

**注意：**一定要`IabHelper.flagEndAsync()`公开。

希望 Google 会在不久的将来改进此代码；这个问题大约有 3 年的历史了，它仍然是一个持续存在的问题 :(

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2014-03-15T02:49:52.520

我有同样的问题，但它解决了！我认为您一定不要在 UI 线程上运行“launchPurchaseFlow”，尝试在 UI 线程上运行 launchPurchaseFlow，它会正常工作！

```
mActivity.runOnUiThread(new Runnable(){
            public void run(){
                mHelper.launchPurchaseFlow(mActivity, item, 10001, mPurchaseFinishedListener,username);
            }
        }); 
```**

# pyrocms - 我可以拥有覆盖 PyroCMS 中系统配置文件的配置文件吗？

> ID：15575606
> 
> 赞同：0
> 
> 时间：2013-03-22T16:42:12.987
> 
> 标签：pyrocms, ion-auth

具体来说，我正在尝试更改配置文件`register_redirect`中的。`system/cms/modules/users/config/ion_auth.php`

有什么地方可以放置我的应用程序特定配置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:20:12.113

潜在的。

像这样的配置文件并不意味着完全不可触碰，但我理解这感觉就像“破解核心”。如果您使用 Git 跟踪您的网站，那么这不是问题，因为您可以在不覆盖更改的情况下提取更新。

替代解决方案有点棘手，因为“post_user_register”事件在发送激活电子邮件等之前正在运行。那将是放置您自己的重定向的好地方，但这意味着没有用户收到他们的欢迎电子邮件，所以这不是一个好主意。

如上所述，您确实需要为此使用 Git。与为 2.3 实现的令人敬畏的“Sentry”身份验证系统相比，Ion Auth 现在不是一个非常灵活的解决方案。

# css - Firebug Css 调试器和资产生成文件

> ID：15575618
> 
> 赞同：0
> 
> 时间：2013-03-22T16:42:50.707
> 
> 标签：css, debugging, firebug

我有这个小问题。我正在尝试通过使用 Firebug（在 firefox 中）检查 css 来修复网站的样式。

问题是我无法弄清楚这种特定的风格在哪里，因为它出现在一些

8EdeWkQAAAA%3d%3d">http://localhost:19478/asset.axd?id=kQAAAB-LCAAAAAAABADsvQdgHEmWJSYvbcp7f0r1StfgdKEIgGATJNiQQBDswYjN5pLsHWlHIymrKoHKZVZlXWYWQMztnbz33nvvvffee--997o7nU4n99__P1xmZAFs9s5K2smeIYCqyB8_fnwfPyJ-8Uezjx597xd_tPro0Ucn1bLNl-1Ho4_O-bMlfdbmZV4Xb8fTarGoluNp09DX1UePdn7JKGywyNu6ct_v_pLv_5Lvjz6attzkXXtXvrmkP_d2dvfGe-NPdx7QB1Pq_t6n9-mXjx619Tr_Jf9PAAAA_8EdeWkQAAAA%3d%3d

显然，在我看来，这似乎是由 DOM 创建的？

我附上一张图片。看看它，你会更好地了解我在这里问的内容。

谢谢

[这是图像](https://www.dropbox.com/s/k4pfhm3uhwraw5g/SummaryScreenShot.png)

# angularjs - 如何获得 AngularStrap 活动标签？

> ID：15575619
> 
> 赞同：3
> 
> 时间：2013-03-22T16:42:54.767
> 
> 标签：angularjs

我对使用 Angular 和 AngularStrap 指令有点陌生。我需要使用带有静态标记的 tab 指令，例如：

```
<div data-fade="1" bs-tabs>
  <div data-title="'Home'"><p>Static tab content A</p></div>
  <div data-title="'Profile'"><p>Static tab content B</p></div>
</div> 
```

在页面的另一部分，我只想在选择第一个选项卡时显示一个 div。div 不是选项卡的一部分，而是在同一个整体控制器中。如何根据所选选项卡显示/隐藏此 div？

像这样的东西？

```
<div ng-show="???? active tab stuff here ????">Home tab is selected</div> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T21:26:46.197

如 AngularStrap 页面上的[示例](http://plnkr.co/edit/3C9vTbdhLRGo3X2Nu0yw?p=preview)所示，活动点击存储在

```
tabs.activeTab 
```

因此，您可以使用此属性有条件地显示其他类似的内容

```
<div ng-show="tabs.activeTab == 0">The first tab is active</div> 
```

**更新**

即使使用非对象选项卡，您也可以将模型绑定到 bs-tabs 以存储活动 ID，如下所示：

```
<div data-fade="1" ng-model="tabs.activeTab" bs-tabs> 
```

这是一个更新的[plnkr](http://plnkr.co/edit/H6e8ZSj2lyLpkvScj92y?p=preview)。*（单击第三个选项卡并看到“测试”文本出现）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T00:42:59.810

我现在发现了一些解决这个问题的方法。这似乎不是最好的方法，所以如果有人有更好的想法，请分享。

我意识到 bsTabs 指令正在为每个选项卡创建数据切换属性。通过观看数据切换显示事件，我能够识别选项卡更改并显示 div。控制器代码如下所示：

```
 $scope.HomeTabSelected = true;

    function watchTab() {
        $('a[data-toggle="tab"]').on('shown', function (e) {
            $scope.$apply($scope.HomeTabSelected = (e.target.innerHTML == "Home"));
        })
    }

    setTimeout(watchTab, 2000);  // setTimeout necessary to allow directive to render 
```

HTML div 使用 ng-show。

```
 <div ng-show="HomeTabSelected">Home tab is selected</div> 
```

# r - 在R中使用绘图时如何用日期替换X轴上的数字？

> ID：15575625
> 
> 赞同：12
> 
> 时间：2013-03-22T16:43:05.453
> 
> 标签：r, plot

我想将 x 实验室呈现为日期而不是数字。例如，如果您绘制：

```
 f=c(2,1,5,4,8,9,5,2,1,4,7)
 plot(f) 
```

根据我们有多少值，您将获得 x 轴数字范围。例如，如何将我的第一个值设置为 04/01/2012，第二个值设置为 05/01/2012 等等，然后在 x 轴上将它们显示为日期而不是数字！

我的数据中没有日期，但我知道第一个日期。

提前致谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-22T16:52:02.113

`"Date"`您可以自己标记轴，也可以通过使用该类为您的观察创建一个日期向量来让 R 为您做这件事。这是一个例子：

```
f <- c(2,1,5,4,8,9,5,2,1,4,7)
dates <- seq(as.Date("04/01/2012", format = "%d/%m/%Y"),
             by = "days", length = length(f))

plot(dates, f) 
```

`dates`最终成为：

```
> dates
 [1] "2012-01-04" "2012-01-05" "2012-01-06" "2012-01-07" "2012-01-08"
 [6] "2012-01-09" "2012-01-10" "2012-01-11" "2012-01-12" "2012-01-13"
[11] "2012-01-14" 
```

情节如下所示：

![在此处输入图像描述](../Images/21cbc829d5d88e01daa65c45c3c05a1c.png)

如果您需要更多控制以及与标签完全相同的标签，则需要禁止绘制 x 轴，然后使用手动添加它`axis.Date`，例如

```
plot(dates, f, xaxt = "n")
axis.Date(side = 1, dates, format = "%d/%m/%Y") 
```

产生

![在此处输入图像描述](../Images/4224796994756e14a64f9b5d25ac0eb1.png)

您可能还想在那里旋转轴标签，比如使用`las = 2`.

请参阅`?axis.Date`和`?strftime`了解`?as.Date`更多详细信息。

## 使用更精细地控制标签的放置`axis.Date`

`at`要覆盖刻度放置的默认启发式方法，请使用参数指定刻度的位置。例如，对于 700 天的较长日期序列，我们可能会在每个月初放置标签：

```
set.seed(53)
f <- rnorm(700, 2)
dates <- seq(as.Date("04/01/2012", format = "%d/%m/%Y"),
             by = "days", length = length(f))
head(f) 
```

情节稍微复杂一些，但不多

```
op <- par(mar = c(7,4,4,2) + 0.1) ## more space for the labels
plot(dates, f, xaxt = "n", ann = FALSE)
labDates <- seq(as.Date("01/01/2012", format = "%d/%m/%Y"), tail(dates, 1),
                by = "months")
axis.Date(side = 1, dates, at = labDates, format = "%b %y", las = 2)
title(ylab = "f") ## draw the axis labels
title(xlab = "dates", line = 5) ## push this one down a bit in larger margin
par(op) ## reset margin 
```

这导致：

![在此处输入图像描述](../Images/e2b1cdd1b28a5e34d25ec84c6963d76c.png)

你可以改变这个主题，例如每隔一个月标记一次，其他月份的小勾号

```
op <- par(mar = c(7,4,4,2) + 0.1) ## more space for the labels
plot(dates, f, xaxt = "n", ann = FALSE)
labDates <- seq(as.Date("01/01/2012", format = "%d/%m/%Y"), tail(dates, 1),
                by = "2 months")
## new dates for minor ticks
minor <- seq(as.Date("01/02/2012", format = "%d/%m/%Y"), tail(dates, 1),
             by = "2 months")
axis.Date(side = 1, dates, at = labDates, format = "%b %y", las = 2)
## add minor ticks with no labels, shorter tick length
axis.Date(side = 1, dates, at = minor, labels = FALSE, tcl = -0.25)
title(ylab = "f") ## draw the axis labels
title(xlab = "dates", line = 5) ## push this one down a bit in larger margin
par(op) ## reset margin 
```

这导致

![在此处输入图像描述](../Images/337f3f8ba8aba4d19e9f823f75e89520.png)

关键是，如果您不喜欢默认值，您可以*完全*控制轴*的*标记位置，只需为您想要的标签/刻度线的位置创建日期向量即可。

# c# - 检查包含数字的字符串值范围

> ID：15575627
> 
> 赞同：6
> 
> 时间：2013-03-22T16:43:08.820
> 
> 标签：c#

我有一个值列表，例如：G1、G2、G2.5、G3、G4 等。）如何在 c# 中检查这些值的范围，比如我想查看值是否介于 G1 和 G2 之间。 5 ?

在 Vb.net 我可以这样做：

```
 Select Case selectedValue
           Case "G1" To "G2.5" //This would be true for G1, G2, and G2.5 
```

我怎样才能在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T16:48:54.973

1.  `G`从_`selectedValue`
2.  将剩余部分解析为`decimal`
3.  针对十进制值实现您的逻辑

-

```
var number = decimal.Parse(selectedValue.Replace("G", ""));
if (number >= 1.0m && number <= 2.5m)
{
    // logic here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T16:46:02.537

要进行字符串比较，您可以这样做

```
if (string.Compare(selectedValue, "G1") >= 0 && string.Compare(selectedValue, "G2.5") <= 0)
{
    ...
} 
```

但是要进行数字比较，您必须将其解析为数字（`double`或`decimal`）

```
var selectedValueWithoutG = selectedValue.Substring(1);
var number = decimal.Parse(selectedValueWithoutG);
if (number >= 1D && number <= 2.5D)
{
    ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T16:54:03.177

首先，您需要解析您的值：

```
var number = decimal.Parse(selectedValue.Substring(1)) 
```

然后你可以应用这样的扩展方法：

```
bool Between(this int value, int left, int right)
{ 
    return value >= left && value <= right; 
}

if(number.Between(1, 2.5)) {.....} 
```

# gwt - GXT ComboBox 选择后取消选择

> ID：15575629
> 
> 赞同：2
> 
> 时间：2013-03-22T16:43:18.460
> 
> 标签：gwt, gxt

我有一个`ComboBox`绑定到 a的 GXT`ListStore`并且有一个`addSelectionHandler`被称为工作正常的 GXT。我也用过`combo.setEmptyText("Select an item..")`。

但是，当用户进行选择时，我希望`ComboBox`返回其“无选择”状态。如何让它返回以显示“选择一个项目..”？

```
StProperties props = GWT.create(StProperties.class);
ListStore<St> sts = new ListStore<St>(combo.id());

combo = new ComboBox<St>(sts, props.name());
combo.setTypeAhead(true);
combo.setTriggerAction(TriggerAction.ALL);
addHandlersForEventObservation(combo,props.name());
...

combo.addSelectionHandler(new SelectionHandler<T>() {

    public void onSelection(SelectionEvent<T> event) {
        System.out.println("value selected:"+event.getSelectedItem());
        // handle selection
        // unselect item in combo here ---
  }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T19:39:43.313

据[http://www.sencha.com/forum/showthread.php?234736](http://www.sencha.com/forum/showthread.php?234736)报道，目前 GXT 3 中似乎存在一个围绕此问题的错误，自 GXT 3.0.4 起存在。正如该错误中报告的那样，您似乎可以先调用`setValue(null)`，然后`redraw(true)`再调用`setText(null)`该字段。

这也发生在其他一些字段上 - 根据报告的详细信息，错误本身似乎很可能`TriggerField`，因此所有子类可能都需要这种解决方法。

# .net - 通用对话框加载例程

> ID：15575630
> 
> 赞同：1
> 
> 时间：2013-03-22T16:43:20.847
> 
> 标签：.net, winforms, subroutine

我的 winform 应用程序中有很多对话框，当我需要加载时，我会为每个对话框执行此操作

```
Dim frm As New Settings
        frm.ShowDialog()
        frm = Nothing 
```

我在想是否有可能有这样的例程

```
sub LoadDialog(byval item as form)
' code to load specific form passd here
end sub 
```

然后我这样打电话`loadDialog(customersDialog)`。CustomerDialog 是一个表单

关于如何做到这一点的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:48:31.180

您可以制定一个[通用程序](http://msdn.microsoft.com/en-us/library/ms235246%28v=vs.80%29.aspx)来处理此问题：

```
Public Shared Sub LoadAndShowDialog(Of T As {Form, New})()
    Dim frm As New T
    frm.ShowDialog() 
End Function 
```

然后，您可以将其称为：

```
LoadAndShowDialog(Of Settings)() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:53:04.603

所有表单都继承自 Form 对吗？下面应该没问题。如果您需要该表单中的某些内容，请将其存储在标签中，您可以在表单关闭后检索它。

```
Public Function LoadForm(MyForm As Form) As Object
    MyForm.ShowDialog()
    Return MyForm.Tag
End Function 
```

# ruby-on-rails - 为生产预编译资产时，jQuery 选择菜单加倍

> ID：15575633
> 
> 赞同：1
> 
> 时间：2013-03-22T16:43:29.163
> 
> 标签：ruby-on-rails, jquery-mobile

*编辑：简化`_header.mobile.erb`文件，因为即使以这种最简单的形式，问题仍然存在。添加生产环境文件*

我正在使用 jQuery Mobile 1.2.0，并且在我的标题中有一个选择菜单，如下所示。

**应用程序.mobile.erb**

```
<%= javascript_include_tag "mobile" %> 
```

**移动.js**

```
//= require jquery
//= require jquery-ui
//= require jquery_ujs
//= require jquery.mobile-1.2.0.min.js 
```

**_header.mobile.erb**

```
 <select>
    <option value="1">Home</option>
    <option value="2">New</option>
    <option value="3">About</option>
  </select> 
```

此选择菜单在开发中显示良好。但是，当我为部署预编译资产时，我得到了一个双选菜单（应该看起来像一个单选菜单按钮现在看起来像一个按钮中的一个按钮）。请注意，我有普通按钮（data-role="button"），这些按钮不会翻倍。

**配置/环境/production.rb**

```
config.assets.compile = false
config.assets.precompile += [ 'custom.css', 'mobile.css', 'jquery.mobile-1.2.0.min.css', 'mobile.js', 'jquery.mobile-1.2.0.min.js' ] 
```

这可能是什么原因造成的？

# html - 垂直对齐表格单元格中的多个对象

> ID：15575637
> 
> 赞同：1
> 
> 时间：2013-03-22T16:43:33.927
> 
> 标签：html, css

这是[jsFiddle](http://jsfiddle.net/Crystall/Mgwzx/)。如何在不使用绝对值（即**px**`img` ）的情况下将和垂直居中？`div``td`

 **纯 CSS 解决方案值得赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:23:53.607

Like this?:

[http://jsfiddle.net/Mgwzx/10/](http://jsfiddle.net/Mgwzx/10/)

```
<div style="width:100%; height:60px; position:relative; overflow:visible;">
    <table style="width:400px; table-layout:fixed" cellspacing="0" cellpadding="0">
        <tr>
            <td style="vertical-align: middle; width:200px;">
                <img align="left" src="http://upload.wikimedia.org/wikipedia/donate/c/c0/Information-icon.png" style="float:left;margin-top:50px;" />
                <div style="text-align:center; float:left; width:150px;">Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat</div>
            </td>
        </tr>
    </table>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:09:37.197

如果您不反对将信息图标设置为 TD 的背景，我会试试这个： [jsFiddle](http://jsfiddle.net/Bs2DY/)

```
td { 
  background: url('http://upload.wikimedia.org/wikipedia/donate/c/c0/Information-icon.png') no-repeat left center;
  padding-left: 20px;
} 
```

我们知道图标的宽度是 20px，所以通过将背景图片设置为 no-repeat 并将 a 应用`padding-left: 20px`到 TD，它可以正确对齐并且不会重叠。并且通过设置 background-position of `left center`，它将始终保持垂直居中。**

# android - Android Lint Plugin - 设置应检查的自定义警告/错误

> ID：15575639
> 
> 赞同：6
> 
> 时间：2013-03-22T16:43:40.597
> 
> 标签：android, lint

我的问题是是否有办法向 lint 插件添加自定义检查，在构建版本之前它应该警告我。例如，我希望它检查`Cursor, InputStream`我的代码中的所有对象是否已关闭，或者检查我的代码中的`//TODO:`, `//FIXME:`。

如果有任何方法可以做到这一点，或者甚至不使用 Lint Plugin，有什么想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T15:48:45.733

是的，您可以添加自定义检查；请参阅[http://tools.android.com/tips/lint/writing-a-lint-check](http://tools.android.com/tips/lint/writing-a-lint-check)和[http://tools.android.com/tips/lint-custom-rules](http://tools.android.com/tips/lint-custom-rules)。

对于您的具体问题，请注意 21.1 中有一个新的 lint 检查，它查看评论。它不寻找 TODO 或 FIXME；相反，如果找到评论标记“STOPSHIP”，它会抱怨。如果您想为 todo 或 fixme 添加规则，您可能希望基于该检查。

# excel - 结合 COUNT IF 和 VLOOK UP EXCEL

> ID：15575641
> 
> 赞同：6
> 
> 时间：2013-03-22T16:43:45.017
> 
> 标签：excel, excel-formula, vlookup

我在 a 中有多个电子表格，`workbook`我想在基本`English`谈话中进行以下内容：

IF `worksheet1(cell)A3`，出现在“worksheet2”列 B - 计算它出现在 b 列“worksheet 2”中的次数

所以换句话说 - 让我们说`A3`= BOB smith - 在工作表 1 中并在工作表 2 中出现 4 次 - 我希望公式计算 'Bob smith' 在工作表 2 中的事实`A3`4 次，然后回来告诉我 4 .

我试图进行单独的计算 - 使用 Vlookups - 然后在另一个单元格中计算/执行 if 语句

```
=COUNTIF(VLOOKUP(A9,'To retire'!J:J,9,1))
=IF(J228=O233, 'worksheet2'!F440,0)
=VLOOKUP(A3,'worksheet2'!A:A,1,1) 
```

非常感谢您的帮助，我很困惑-我不确定我是否对此进行了深入研究或还不够！先感谢您

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T16:54:57.357

当您使用[`SUMPRODUCT`](http://office.microsoft.com/en-us/excel-help/sumproduct-HP005209293.aspx). 给ejemlo：

```
=SUMPRODUCT((worksheet2!A:A=A3)*1) 
```

您可以将上述公式放在单元格 B3 中，其中 A3 是您要在 中查找的名称`worksheet2`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T17:16:02.563

=COUNTIF() 是你要找的函数

在与 Worksheet1 列 A 相邻的列中：

```
=countif(worksheet2!B:B,worksheet1!A3) 
```

这将在 B 列的工作表 2 ALL 中搜索单元格 A3 中的所有内容

[请在此处](http://office.microsoft.com/en-us/excel-help/countif-function-HP010069840.aspx?CTT=3)查看 =COUNTIF(range,criteria) 的 MS Office 参考！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T17:00:26.513

您可以将所有这些组合成一个公式，但您需要先使用常规`IF`来确定是否`VLOOKUP`返回了某些东西，然后使用您的`COUNTIF`如果它返回。

```
=IF(ISERROR(VLOOKUP(B1,Sheet2!A1:A9,1,FALSE)),"Not there",COUNTIF(Sheet2!A1:A9,B1)) 
```

在这种情况下，**Sheet2-A1:A9**是我正在搜索的范围，而**Sheet1-B1**具有我正在寻找的值（在您的情况下为“退休”）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T17:00:45.770

试试这个：

`=IF(NOT(ISERROR(MATCH(A3,worksheet2!A:A,0))),COUNTIF(worksheet2!A:A,A3),"No Match Found")`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-23T05:24:28.820

如果您指的是两个工作表，请使用此公式

```
=COUNTIF(Worksheet2!$A$1:$A$50,Worksheet1cellA1) 
```

如果参考两个以上的工作表，请使用此公式

```
=COUNTIF(Worksheet2!$A$1:$A$50,Worksheet1cellA1)+=COUNTIF
(Worksheet3!$A$1:$A$50,Worksheet1cellA1)+=
               COUNTIF(Worksheet4!$A$1:$A$50,Worksheet1cellA1) 
```

# html - 使用井号时出现奇怪的字符

> ID：15575643
> 
> 赞同：1
> 
> 时间：2013-03-22T16:43:51.190
> 
> 标签：html, codeigniter

我的标题中已经有了这一行..

```
<meta http-equiv="content-type" content="text/html; charset=utf-8"> 
```

我有一个输入表单，当我输入一个英镑符号时，它前面会出现一个奇怪的字符。这些值存储在数据库中然后显示，但问题似乎是在我们进入数据库之前。

如果我提交我的表单，然后 print_r 得到 $_POST 数组：

[field2_title] => Â£ 问题

我认为问题可能出在代码点火器 $this->input->post() 函数上，但它在那之前就发生了。除了添加我已经完成的元标记之外，我不确定还能尝试什么？

这个我也试过了。。

```
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T18:13:12.180

在您看来，请尝试添加以下代码：

```
<?php header('Content-Type: text/html; Charset=UTF-8'); ?> 
```

# c - 从程序集调用 C 函数 (printf) 时出现段错误

> ID：15575647
> 
> 赞同：0
> 
> 时间：2013-03-22T16:43:55.623
> 
> 标签：c, linux, assembly, x86-64, calling-convention

我在 linux 上使用 NASM 编写一个基本的汇编程序，该程序从 C 库 (printf) 中调用一个函数。不幸的是，这样做时我遇到了分段错误。注释掉对 printf 的调用允许程序运行而不会出错。

```
; Build using these commands:
;   nasm -f elf64 -g -F stabs <filename>.asm 
;   gcc <filename>.o -o <filename>
;

SECTION .bss    ; Section containing uninitialized data

SECTION .data   ; Section containing initialized data

  text db "hello world",10 ; 

SECTION .text   ; Section containing code

global main

extern printf

;-------------
;MAIN PROGRAM BEGINS HERE
;-------------

main:

      push rbp

      mov rbp,rsp

      push rbx

      push rsi

      push rdi ;preserve registers

      ****************

      ;code i wish to execute

      push text ;pushing address of text on to the stack
      ;x86-64 uses registers for first 6 args, thus should have been:
      ;mov rdi,text (place address of text in rdi)
      ;mov rax,0 (place a terminating byte at end of rdi)

      call printf ;calling printf from c-libraries

      add rsp,8 ;reseting the stack to pre "push text"

      **************  

      pop rdi ;preserve registers

      pop rsi

      pop rbx

      mov rsp,rbp

      pop rbp

      ret 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:57:22.830

x86_64 不将堆栈用于前 6 个参数。您需要将它们加载到正确的寄存器中。那些是：

```
rdi, rsi, rdx, rcx, r8, r9 
```

我用来记住前两个的技巧是想象函数被`memcpy`实现为`rep movsb`，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:48:21.433

你正在调用一个可变参数函数—— printf 需要可变数量的参数，你必须在参数堆栈中考虑到这一点。见这里：[http ://www.csee.umbc.edu/portal/help/nasm/sample.shtml#printf1](http://www.csee.umbc.edu/portal/help/nasm/sample.shtml#printf1)

# visual-studio-2012 - 在 VS2012 中是否有键盘快捷键可以将焦点集中到代码编辑器上？

> ID：15575650
> 
> 赞同：1
> 
> 时间：2013-03-22T16:44:00.707
> 
> 标签：visual-studio-2012

在 VS2012 中是否有键盘快捷键可以将焦点集中到代码编辑器上？

CTRL+TAB 大部分时间都有效，但在代码编辑器已经有焦点但您没有注意到的情况下，这将切换窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-23T00:40:41.013

我认为**ALT+0**是您所发现的。

# ruby-on-rails - edit_order_path 时出错

> ID：15575654
> 
> 赞同：-1
> 
> 时间：2013-03-22T16:44:21.553
> 
> 标签：ruby-on-rails, routes, netbeans-6.9

在我的 index.html.erb 我有

```
<%= link_to 'Edit', edit_order_path(order) %> 
```

每当我尝试编辑订单内容时，都会出现以下错误：

```
NoMethodError in Order#index 
undefined method `edit_order_path' for #<ActionView::Base:0x13f4aeb> 
```

我怎样才能克服它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:53:25.113

在您的 routes.rb 中 `resources :orders` 添加以下代码行或在 routes.rb 中添加以下代码行

```
match 'orders/:id/edit' => 'orders#edit', :as => :edit_order 
```

我假设，您的控制器名称为`orders`和 action `edit`。使用以下代码作为表单

```
<% form_for(@order, :url => {:action => :update}) do |f| %> 
```

# javascript - 访问者在 facebook 上分享链接后显示隐藏的下载框 div

> ID：15575655
> 
> 赞同：0
> 
> 时间：2013-03-22T16:44:23.400
> 
> 标签：javascript, jquery, facebook

我正在寻找在访问者分享链接后显示隐藏 div 的可能性，但我找不到任何东西。我在这里尝试了一些[http://jsfiddle.net/trefu/qNDJB/9/](http://jsfiddle.net/trefu/qNDJB/9/)但不起作用。有人可以给我一点帮助吗？

下载框（无论这意味着什么）去这里

```
window.fbAsyncInit = function() {
    FB.init({
      appId      : '437410746335629', // App ID
      channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));

FB.init({appId: "437410746335629", status: true, cookie: true});

  function postToFeed() {

    // calling the API ...
    var obj = {
      method: 'feed',
      link: 'https://developers.facebook.com/docs/reference/dialogs/',
      picture: 'http://fbrell.com/f8.jpg',
      name: 'Facebook Dialogs',
      caption: 'Reference Documentation',
      description: 'Using Dialogs to interact with users.'
    };

  function callback(response) {
    if (response && response.post_id) {
        document.getElementById('download_box').style.display = 'block';
    } else {
        alert('You must share your post before you can download.');
    }
}

    FB.ui(obj, callback);
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:25:23.590

您指定的代码应该适用于您想要实现的目标。问题在于您的应用程序设置。确保您的域已在 Facebook 应用设置页面中设置，特别是更新“应用域”和“站点 URL”字段。您会发现您收到的提要对话框错误将得到解决。

# python - 收集列表中重复元素的部分并将它们合并到一个元素中

> ID：15575658
> 
> 赞同：-2
> 
> 时间：2013-03-22T16:44:31.367
> 
> 标签：python, python-3.x

我正在尝试解析一个包含属性及其值的巨大 Excel 文件。问题如下：一些属性能够包含多个值。

例子：

```
list = ['a=1', 'b=2', 'c=3', 'd=4', 'd=5', 'd=6', 'e=7'] 
```

应该：

```
list2 = ['a=1', 'b=2', 'c=3', 'd=4,5,6', 'e=7'] 
```

元素是具有可变长度的字符串，它们由“=”分隔。

这就是我从 Excel 文件中生成列表的方式：

```
#for each row in the excel file.
for rows in range(DATA_ROW, sheet.nrows):
#generate a list with all properties.
for cols in range(sheet.ncols):
    #if the propertie is not emty 
    if str(sheet.cell(PROPERTIE_ROW,cols).value) is not '':
        proplist.append(sheet.cell(PROPERTIE_ROW,cols).value + '=' + str(sheet.cell(rows,cols).value) + '\n') 
```

我试了一下，但效果不是很好......

```
last_item = ''
new_list = []
#find and collect multiple values.
for i, item in enumerate(proplist):
#if the propertie is already in the list
if str(item).find(last_item) is not -1:
    #just copy the value and append it to the propertie
    new_list.insert(i, propertie);
else:
    #slize the string in propertie and value
    pos = item.find('=')
    propertie = item[0:pos+1]
    value = item[pos+1:len(item)]
    #save the propertie
    last_item = propertie
    #append item
    new_list.append(item) 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:47:35.837

如果顺序无关紧要，您可能可以将 a`defaultdict`用于此类事情：

```
from collections import defaultdict
orig = ['a=1', 'b=2', 'c=3', 'd=4', 'd=5', 'd=6', 'e=7']
d = defaultdict(list)
for item in orig:
    k,v = item.split('=',1)
    d[k].append(v)

new = ['{0}={1}'.format(k,','.join(v)) for k,v in d.items()]
print(new)  #['a=1', 'c=3', 'b=2', 'e=7', 'd=4,5,6'] 
```

* * *

我想如果顺序确实很重要，您可以使用`OrderedDict`+`setdefault`但它确实不那么漂亮：

```
from collections import OrderedDict
orig = ['a=1', 'b=2', 'c=3', 'd=4', 'd=5', 'd=6', 'e=7']
d = OrderedDict()
for item in orig:
    k,v = item.split('=',1)
    d.setdefault(k,[]).append(v)

new = ['{0}={1}'.format(k,','.join(v)) for k,v in d.items()]
print new # ['a=1', 'b=2', 'c=3', 'd=4,5,6', 'e=7'] 
```

# maven - 共享 Maven 配置文件或 settings.xml

> ID：15575659
> 
> 赞同：1
> 
> 时间：2013-03-22T16:44:33.053
> 
> 标签：maven, maven-profiles

我想定义一些 Maven 配置文件，其中定义了一些关于 JDBC 连接的属性，通过 HTTP 使它们可用，并在我的开发团队和几个 Maven 项目中共享它们。理想情况下，我只想在项目的 POM 中添加一个引用并让 Maven 下载配置文件定义。

有没有办法做到这一点？或者，可以通过 settings.xml 完成，以相同的方式共享此类文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T10:44:14.170

[Nexus 存储库管理器](http://www.sonatype.org/nexus/)的专业版包含用于管理和分发 Maven 设置给用户的功能：

*   [http://books.sonatype.com/nexus-book/reference/settings-sect-intro.html](http://books.sonatype.com/nexus-book/reference/settings-sect-intro.html)

一个更简单的解决方案是将这些文件分发到共享和安全的 Web 服务器上。您是否自动化了开发安装过程？

# git - GIT SSH连接问题

> ID：15575661
> 
> 赞同：1
> 
> 时间：2013-03-22T16:44:39.353
> 
> 标签：git, https, ssh, git-clone

我正在尝试从 Windows 8 上的 GIT bash 访问远程存储库。

我已经完成了[https://serverfault.com/questions/194567/how-to-i-tell-git-for-windows-where-to-find-my-private-rsa-key](https://serverfault.com/questions/194567/how-to-i-tell-git-for-windows-where-to-find-my-private-rsa-key)中详述的步骤，以确保 GIT正在使用正确的公钥/私钥。

通过 https 连接和克隆目录不是问题。但是，这样做意味着对我将更改推送到 gitlab/https 的文件具有读/写/访问权限，这意味着我的团队成员无法更改文件。

通过 SSH 连接时，首先要求我输入存储在 /c/Users/bwimbush/.ssh/id_rssa 中的密钥的密码。输入之后，我会被要求输入“git@remoteserver.com”的密码。我不明白为什么要我输入这个密码？

我可以使用我的 google 帐户在线登录 git setup，但该 pw 不是它要求的 pw。

谁能帮我理解为什么通过 https 连接会更改文件的读/写/访问权限，或者为什么它要求我输入“git@remoteserver.com”的密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:06:23.843

启动 Git bash 窗口并运行

```
ssh -i /c/Users/bwimbush/.ssh/id_rsa -v git@remoteserver.com 'git --version' 
```

并查看它告诉您有关正在发生的身份验证过程的信息。（您可以尝试添加更多“-v”-s）。密切注意那些涉及“pubkey”一词的消息。

这会打印出什么可疑的东西吗？

# .htaccess - htaccess mod url重写不起作用

> ID：15575663
> 
> 赞同：1
> 
> 时间：2013-03-22T16:44:48.463
> 
> 标签：.htaccess, url, mod-rewrite, url-rewriting

试图将以前的网址重写为后者。重写由于某种原因不起作用。怎么修？谢谢。

www.example.com/example-example.html

www.example.com/example-example/

```
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^([a-z]+-?[a-z]+)/$ /$1.html 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:34:40.510

```
Options +FollowSymLinks

RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T18:07:23.863

尝试这个：

```
RewriteRule ^([a-z-]+)/?$ $1.html 
```

这将静默地将用户对 /example-example/ 的请求重写为实际文件路径 /example-example.html。不检查文件路径是否存在，它将匹配任何包含字母和连字符的请求。如果您需要更具体的限制条件，请告诉我们。

# if-statement - Coffeescript if/else 问题

> ID：15575668
> 
> 赞同：0
> 
> 时间：2013-03-22T16:45:05.370
> 
> 标签：if-statement, coffeescript

如何在 Coffeescript 中编写这行代码？谢谢

```
 window.scrollY >= origOffsetY ? navbar.classList.add('navbar-fixed-top') : 
                                    navbar.classList.remove('navbar-fixed-top'); 
```

我试试这个，但不起作用。

```
if window.scrollY >= origOffsetY then navbar.classList.add('navbar-fixed-top') else navbar.classList.remove('navbar-fixed-top') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:53:01.450

您的咖啡脚本编译为：

```
if (window.scrollY >= origOffsetY) {
  navbar.classList.add('navbar-fixed-top');
} else {
  navbar.classList.remove('navbar-fixed-top');
} 
```

这对我来说似乎还不错。

# java - 在 java 中添加 1/3 会导致 1.0，而它不应该

> ID：15575669
> 
> 赞同：2
> 
> 时间：2013-03-22T16:45:06.383
> 
> 标签：java, floating-point

**注意：**问题仍未彻底回答！这个问题不涉及浮点部分的截断问题！！！

在Java中，我有这个简单的代码：

```
double sum = 0.0;
for(int i = 1; i <= n; i++){
    sum += 1.0/n
}
System.out.println("Sum should be: 1");
System.out.println("The result is: " + sum); 
```

其中 n 可以是任何整数。对于像 7,9 这样的数字，sum 的预期值是 sum 的最后一位数字有差异，结果是 0.999999999998 或其他东西，但我使用 3 时的输出是`1.0`.

如果你加 1/3 3 次，你会期望一个接近 1 的数字，但我得到的正好是 1.0。

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:47:48.200

这是因为除法是整数。

`1/n`对于 n > 1，总是给出 0。

因此，你总是以 sum = 0 + 1/1 + 0 + 0 ...

尝试`1.0 / n`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T17:33:25.270

> 如果你加 1/3 3 次，你会期望一个接近 1 的数字，但我得到的正好是 1.0。

实际上，一个没有被编程经验污染的正常人会期望 n * 1 / n 等于 1，但我们这里不正常。

我无法准确重现您的问题，我明白了

```
groovy:000> def foo(n) {
groovy:001>   sum = 0.0
groovy:002>   for (int i = 0; i < n; i++) {
groovy:003>     sum += 1.0 / n
groovy:004>   }
groovy:005>   sum
groovy:006> }
===> true
groovy:000> foo(3)
===> 0.9999999999 
```

这里可能有两个问题，至少你会想知道它们。

一个是双精度值并不精确，它们不能精确地表示某些值，你只需要期望一些东西会偏离一点点。您的目标不是 100% 准确，而是将误差保持在可接受的范围内。（Peter Lawrey 有[一篇关于双打的有趣文章](http://vanillajava.blogspot.com/2011/08/double-your-money-again.html)，你可能想看看。）如果这对你来说不合适，你会想要避免双打。对于很多用途，BigDecimal 已经足够好了。如果您想要一个库，其中您的问题中的除法问题可以提供准确的答案，您可以查看[此问题的答案。](https://stackoverflow.com/q/5442640/217324)

另一个问题是 System.out.println 没有告诉你 double 的确切值，它有点捏造。如果您添加如下行：

```
System.out.println(new java.math.BigDecimal(sum)); 
```

然后您将准确了解双重包含的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T04:05:31.110

我不确定这是否有助于澄清事情，因为我不确定您认为是什么问题。

这是一个使用 BigDecimal 的测试程序，如前所述，显示中间答案的值。在最后一步，将 1.0/3 的第三个副本添加到两个副本的总和中，确切的答案是 1.0 和下一个比它低的两倍之间的一半。在这种情况下，四舍五入规则选择 1.0。

鉴于此，我认为它**应该**四舍五入到 1.0，这与问题标题相矛盾。

测试程序：

```
import java.math.BigDecimal;

public class Test {
  public static void main(String[] args) {
    final double oneThirdD = 1.0/3;
    final BigDecimal oneThirdBD = new BigDecimal(oneThirdD);
    final double twoThirdsD = oneThirdD + oneThirdD;
    final BigDecimal twoThirdsBD = new BigDecimal(twoThirdsD);
    final BigDecimal exact = twoThirdsBD.add(oneThirdBD);
    final double nextLowerD = Math.nextAfter(1.0, 0);
    final BigDecimal nextLowerBD = new BigDecimal(nextLowerD);
    System.out.println("1.0/3: "+oneThirdBD);
    System.out.println("1.0/3+1.0/3: "+twoThirdsBD);
    System.out.println("Exact sum: "+exact);
    System.out.println("Rounding error rounding up to 1.0: "+BigDecimal.ONE.subtract(exact));
    System.out.println("Largest double that is less than 1.0: "+nextLowerBD);
    System.out.println("Rounding error rounding down to next lower double: "+exact.subtract(nextLowerBD));
  }
} 
```

输出：

```
1.0/3: 0.333333333333333314829616256247390992939472198486328125
1.0/3+1.0/3: 0.66666666666666662965923251249478198587894439697265625
Exact sum: 0.999999999999999944488848768742172978818416595458984375
Rounding error rounding up to 1.0: 5.5511151231257827021181583404541015625E-17
Largest double that is less than 1.0: 0.99999999999999988897769753748434595763683319091796875
Rounding error rounding down to next lower double: 5.5511151231257827021181583404541015625E-17 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T16:51:21.193

一个 int 除以一个 int 总是会产生另一个 int。现在 int 没有地方存储数字的小数部分，所以它被丢弃了。请记住，它被*丢弃*而不是四舍五入。

因此 1 / 3 = 0.3333333，小数部分被丢弃，这意味着它变为 0。

如果您将数字指定为双精度数（通过包括小数点，例如 1\. 或 1.0），那么结果将是双精度数（因为 java 自动将 int 转换为双精度数）并且小数部分将被保留。

在您更新的问题中，您将 i 设置为 1.0，但 i 仍然是一个 int。所以 1.0 被截断为 1，为了进一步计算，它仍然是一个 int。您还需要将 i 的类型更改为 double ，否则代码将没有区别。

或者，您可以使用 sum += 1.0/n

这将具有在执行计算之前将 n 转换为 double 的效果

# java - 使用 jconnect 在远程表中插入时出错

> ID：15575671
> 
> 赞同：0
> 
> 时间：2013-03-22T16:45:08.573
> 
> 标签：java, jdbc, sybase, jconnect

当我使用 jconnect 在远程 tabke 中插入时，它给了我以下错误：

```
Unexpected exception : java.sql.SQLException: This transaction has been rolled back, rather than only the current statement.
, sqlstate = ZZZZZjava.sql.SQLException: This transaction has been rolled back, rather than only the current statement.

    at com.sybase.jdbc4.jdbc.SybConnection.getAllExceptions(SybConnection.java:2780)
    at com.sybase.jdbc4.jdbc.SybStatement.handleSQLE(SybStatement.java:2665)
    at com.sybase.jdbc4.jdbc.SybStatement.nextResult(SybStatement.java:295)
    at com.sybase.jdbc4.jdbc.SybStatement.nextResult(SybStatement.java:272)
    at com.sybase.jdbc4.jdbc.SybStatement.updateLoop(SybStatement.java:2515)
    at com.sybase.jdbc4.jdbc.SybStatement.executeUpdate(SybStatement.java:2499)
    at com.sybase.jdbc4.jdbc.SybStatement.executeUpdate(SybStatement.java:577)
    at connectSybase.main(connectSybase.java:48) 
```

你知道它可能是什么吗？

这是我的完整代码：

```
import java.io.*;
import java.sql.*;

public class connectSybase {

    public static void main(String args[])
    {
        try
        {
            // jconn3 <-- do pessoal do OMS
            //Class.forName("com.sybase.jdbc3.jdbc.SybDriver");

            // jconn4 <-- do servidor de OMS1_PAR_DEV_SQL
            Class.forName("com.sybase.jdbc4.jdbc.SybDriver");

        }
        catch (ClassNotFoundException cnfe)
        {
            System.out.println("BUM!");
        }
        try
        {
            System.out.println("Any of the following may throw an SQLException.");

            System.out.println("Opening a connection.");

            Connection con = java.sql.DriverManager.getConnection
                    ("----------------------------");
            // more code to use connection ...

            System.out.println("Creating a statement object.");

            Statement stmt = con.createStatement();

            System.out.println("Executing the query.");

            ResultSet rs = stmt.executeQuery("Select top 10 * from OMS_DEV..SCRIBE_AR");

            System.out.println("Process the result set.");

            while (rs.next())
            {
                System.out.println("Fetched value " + rs.getString(1));
            }

            System.out.println("Executing the query.");
            int result = stmt.executeUpdate("---------------");

            System.out.println("Process the result set: " + result );

        }

        catch (SQLException sqe)
        {
            sqe.printStackTrace();

            System.out.println("Unexpected exception : " +
                    sqe.toString() + ", sqlstate = " +
                    sqe.getSQLState());
            System.exit(1);
        }
        System.exit(0);
    }
} 
```

我省略了插入和连接，但两者都有效，因为我得到了第一次选择的结果（只有插入失败），并且插入也是正确的，因为它使用 isql 或 dbartisan 工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:43:48.407

Sybase 错误消息不具体，但问题与数据包大小有关。在 ASE 中是 8192，在 IQ 中只有 2048。

当数据包超过 2k 时，它会产生错误。

# javascript - 对象变量与函数

> ID：15575672
> 
> 赞同：-2
> 
> 时间：2013-03-22T16:45:09.257
> 
> 标签：javascript, function, variables, object

这两种结构有什么区别

```
var bar = { 
    something : value,
    execute : function() { /* Whatever */ }
}

function foo() {    
    this.something = value;
    this.execute = function() { /* Whatever */ };
} 
```

我的理由是 bar 是一个静态对象，而 foo 是一个必须调用新构造函数创建的常规对象

那是对的吗 ？或者不是真的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:53:55.870

我假设您的意思是`bar`（正如您声明的那样）和

```
var bar2 = new foo(); 
```

`bar`和之间没有太大区别`bar2`，除了原型 for`bar`将始终是的原型属性`Object`（就像你写的一样`var bar = new Object(); bar.something = value; bar.execute = function() {...}`），而原型 for`bar2`将是分配给`prototype`属性的任何东西`foo`（或原型属性`Object`by默认）。

除了原型的问题，编写构造函数主要是为了方便。

请注意，使用构造函数方法，您可以使用原型来获得优势：

```
function foo() {    
    this.something = value;
}

foo.prototype.execute = function() { /* Whatever */ }; 
```

然后所有实例`foo`共享相同的`execute`功能。这比为每个`foo`对象都有一个新的函数对象更节省空间。（当然，如果您只创建其中之一，则没有太大优势。）

# java - JPA：按总和加入和分组。MySQL 查询

> ID：15575674
> 
> 赞同：1
> 
> 时间：2013-03-22T16:45:16.107
> 
> 标签：java, mysql, jpa, join

我有两张桌子：`sales`和`products`

```
[Products]
+-------+-------------------+
| id    | name              |
+-------+-------------------+
| 1     | product number 1  |
| 2     | product number 2  |
| 3     | product number 3  |
+-------+-------------------+

[Sales]
+-------+------------+------+
| id    | product_id | qty  |
+-------+------------+------+
| 1     | 2          | 100  |
| 2     | 2          | 35   |
| 3     | 1          | 1    |
+-------+-------------------+ 
```

我想用 JavaEE 和 JPA 显示类似的东西：

```
Most selled products :
+------------------+------------+
| Product name     | Quantity   |
+------------------+------------+
| product number 2 | 135        |
| product number 1 | 1          |
+------------------+------------+ 
```

我面临两个问题：

*   我只知道如何检索对象，所以我可以显示产品的名称，但不能显示销售的数量，因为它是一个计算值。
*   我不知道如何查询我的数据库以检索正确的信息

这是我尝试过的：

```
public List<Product> getMostSelledProducts() {
    Query q = em.createQuery("SELECT p FROM Sale s RIGHT JOIN Product p GROUP BY s.productId ORDER BY COUNT(s.productId)");
    return q.getResultList();
} 
```

我该怎么做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:02:47.100

不确定这是否会起作用，没有测试它，但如果它不起作用，可能会让你走上正确的道路。

```
SELECT p.name, SUM(s.qty) as Quantity FROM Sales s 
INNER JOIN Product p ON s.product_id = p.id 
GROUP BY s.product_id 
ORDER BY Quantity DESC 
```

# jquery - 如何使用 jquery 或 ajax 在表单中填充现有数据？

> ID：15575678
> 
> 赞同：1
> 
> 时间：2013-03-22T16:45:27.367
> 
> 标签：jquery, ajax, django

我有这样的数据：

```
 Tape-ID Video Type  Date Created          Director  Camera Man  Editor  Reporter    Tag
  12-12-12  Documentary January 01, 2013    Sachit  Helloy              He  water, water pollution, boudha 
```

当用户检查编辑按钮时，表单将显示。我希望将现有数据写入表单，以便用户只需更改必填字段。如何在 Ajax 或 jquery 中完成？我正在使用 django 1.5。

# bash - AIX Bash 比较日期时间字符串

> ID：15575681
> 
> 赞同：1
> 
> 时间：2013-03-22T16:45:33.827
> 
> 标签：bash, aix

我有两个日志文件。

日志文件“出”：

*   一个记录远程“请求”
*   线路多，只值得追踪从TRX开始
*   `TRX Sent: 02-000330408-01 Type: N Timestamp: 20130322-11474100`

日志文件“获取”：

*   记录“回应”
*   很多行，只有一个值得跟踪以 PROC 开头
*   `PROC: 02-000330408-01 T/S: 20130322 11474500`

如果您注意到这些示例，则时间戳差异应该很小。问题是有时遥控器会停止响应。

我在 bash 方面做得越来越好，但我不知道有一个比较两个时间戳的好方法。基本上我正在寻找的是：

```
if DateDiff(TRX and PROC) > 15 minutes: Do Something Amazing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:01:50.170

您可以使用`sed`将时间戳转换为（GNU）`date`可以接受的格式。因此，如果您可以在 AIX 系统上获取 GNU 日期，您可以这样做：

```
function toDateFormat() {
    local ts=$(echo "$1" | sed -E "s/$2.*Timestamp: ([0-9-]+)/\1/")

    ts=$(echo "$ts" | sed -E  "s/([0-9]{8})-([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})/\1 \2:\3:\4/g")

    echo "$ts"
}

function compareLines() {
    local ts_a=$(date -d "$(toDateFormat "$1" "TRX")" +%s)
    local ts_b=$(date -d "$(toDateFormat "$2" "PROC")" +%s)

    local diff=$((ts_a-ts_b))

    if [[ diff -le 0 ]] ;
    then
        diff="$((0-diff))"
    fi

    echo "$diff"
}

A="TRX Sent: 02-000330408-01 Type: N Timestamp: 20130322-11474100"
B="PROC Sent: 02-000330408-01 Type: N Timestamp: 20130322-11374100"

res=$(compareLines "$A" "$B")

if [[ "$res" -ge $((15*60)) ]] ;
then
    echo "Do crazy stuff!"
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T20:36:44.987

我认为我有这个工作，作为我的实际问题的轻微变化：

```
#!/usr/bin/perl -s
use Time::Local;

$OUT = `tail -500 /log/out.log | grep ^TRX  | tail -1 | cut -c46-62`;
$GET = `tail -500 /log/get.log | grep ^PROC | tail -1 | cut -c28-45`;
my $Start = getDate($OUT);
my $Finish = getDate($GET);

$DiffS = ( $Finish - $Start );
$DiffM = ( $Finish - $Start ) / 60;

print "$DiffS\n";
exit($DiffS);

sub getDate {
  $Y = substr $_[0], 0, 4;
  $M = substr $_[0], 4, 2;
  $D = substr $_[0], 6, 2;
  $h = substr $_[0], 9, 2;
  $m = substr $_[0], 11, 2;
  $s = substr $_[0], 13, 2;

  return timelocal($s,$m,$h,$D,$M,$Y);
} 
```

虽然这不是我所要求的，但它允许我给出一个差异，我可以在已经设置为的 shell 脚本中使用它`if $I > $Diff then DO MAGICALLY THINGS`

```
#!/bin/ksh
result=$(/usr/bin/logDiff)
print $result
if $result > 60
    ... 
```

# c# - 使用来自 textbox.text 的输入的 DateTime

> ID：15575684
> 
> 赞同：2
> 
> 时间：2013-03-22T16:45:37.117
> 
> 标签：c#, datetime, params

我有这段代码，执行时给了我 74 天，这是正确的，但日期`oldDate`必须来自`TextBox`. 有谁知道如何做到这一点，因为`DateTime`只需要三个整数。

```
private void myButton_Click(object sender, RoutedEventArgs e)
{
     string  myDate = myTextBox.Text;

     DateTime oldDate = new DateTime(2013, 6, 5);

     DateTime newDate = DateTime.Now;

     // Difference in days, hours, and minutes.
     TimeSpan ts = oldDate - newDate;
     // Difference in days.
     int differenceInDays = ts.Days;

     differenceInDays = ts.Days;

     myTextBlock.Text = differenceInDays.ToString();        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:50:49.907

您可以从用户那里解析日期：

```
string  myDate = myTextBox.Text;

DateTime oldDate;
if (!DateTime.TryParse(myDate, out oldDate))
{
   // User entered invalid date - handle this
}

// oldDate is set now 
```

话虽如此，根据 UI 框架，更合适的控件（即：[`DateTimePicker`](http://wpftoolkit.codeplex.com/wikipage?title=DateTimePicker&referringTitle=Home)来自扩展的 WPF 工具包等）可能更易于使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:56:57.183

从您的代码中，您必须从存储在 myDate 字符串变量中的 myTextBox 获取 oldDate。您可以将其转换为日期时间

```
oldDate=Convert.ToDateTime(myDate); 
```

但是因为它可能会导致异常使用以下

```
`DateTime myyDateTime;if(DateTime.TryParse(myDate, out myDateTime){//use your date difference code here} 
```

# java - JPA按子集合中最后一个元素的属性排序查询

> ID：15575694
> 
> 赞同：0
> 
> 时间：2013-03-22T16:45:56.000
> 
> 标签：java, jpa

假设我有以下实体

```
class Order {

    @Id
    private long id;

    private long orderNo;

    @OneToMany
    @JoinColumn(name="order_id")
    @OrderBy("timeStamp ASC")
    private List<Item> items;
}

class Item {
    @Id
    private long id;

    // e.g. COMPLETED, IN PROGRESS, QUEUED, etc...
    private String status;

    private long timeStamp;

    @ManyToOne
    private Order order;
} 
```

使用 JPA，我想返回按项目列表中最后一个项目的状态排序的订单列表，这是最新的，因为项目是按时间戳排序的。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T14:27:48.393

就像是，

```
Select o from Order o join o.items i where i.id = (Select max(timestamp) from Item i2 where i = i2) order by i.status 
```

# c++ - 使用不包含 stdlib.h 的 stdlib 函数

> ID：15575705
> 
> 赞同：1
> 
> 时间：2013-03-22T16:46:24.783
> 
> 标签：c++, compilation, std

我正在编译大量使用 srand() 和 rand() 的文件，但不包括 stdlib.h。我知道这是不好的做法，但是由于我无法更改正在编译的文件，因此不能在每个文件中插入必要的 include 语句。

如何配置我的编译器以允许隐式包含 stdlib 函数？另外，有没有办法以同样的方式隐式使用 std 命名空间？

编辑：使用 g++

编辑：看起来这是答案（至少是第一部分）。要像包含 stdlib.h 一样编译文件，请使用选项 -include stdlib.h

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:49:23.313

正如您现在提到的，您正在使用 GCC，您可以只使用该[`-include`](http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html#index-include-978)标志。其他编译器可能有等价物。

* * *

如果您的编译器没有这样的标志，您可以使用以下并非完全严肃的解决方案，但它应该可以工作：

**不错的.cc**

```
#include <stdlib.h>
#include "naughty.cc" 
```

（其中 naughty.cc 是原始源文件）。

当然，使用合适的构建系统，您可以自动生成漂亮的包装文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:49:43.080

既然您已经接受了不好的做法，那么如何：

```
cat > foo.c << EOF
#include <stdlib.h>
#include "file-to-compile.c"
EOF

${CC} foo.c 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T16:54:13.507

您正在使用 GCC，因此您可以使用该`-include`选项（来自[手册](http://gcc.gnu.org/onlinedocs/gcc-4.8.0/gcc/Preprocessor-Options.html)）：

> 处理文件，好像#include "file" 出现在主要源文件的第一行。

例如：

```
g++ -include stdlib.h foo.c 
```

# jquery - 无法在 Jquery 的表单验证中显示我的错误消息

> ID：15575708
> 
> 赞同：-7
> 
> 时间：2013-03-22T16:46:30.737
> 
> 标签：jquery, jquery-validate

我是 Jquery 的初学者。我正在尝试表单验证。一切都很好。但它没有显示我指定的消息。这是代码：

```
$(document).ready(function (){
    $("#RegForm").validate( {
        rules:{
            unameTxt: "required",
            pnameTxt: "required",
            pnameTxt2: "required",        
            phnumTxt: "required",
            emailTxt:"required"
        },
        messages: {
             unameTxt: "Please enter Ur Username",
            pnameTxt: "Please enter Ur Password",
            pnameTxt2: "Confirm Ur password",        
            phnumTxt: "Please enter Ur Phone nm",
                 emailTxt:"Enter emailid"
        }

    });
}); 
```

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:11:18.517

每个字段都必须包含相应的`name`属性。

如果是这样，您的代码运行良好，没有您报告的问题。

**工作：http: [//jsfiddle.net/6rV9H/](http://jsfiddle.net/6rV9H/)**

```
$(document).ready(function () {

    $("#RegForm").validate({
        rules: {
            unameTxt: "required",
            pnameTxt: "required",
            pnameTxt2: "required",
            phnumTxt: "required",
            emailTxt: "required"
        },
        messages: {
            unameTxt: "Please enter Ur Username",
            pnameTxt: "Please enter Ur Password",
            pnameTxt2: "Confirm Ur password",
            phnumTxt: "Please enter Ur Phone nm",
            emailTxt: "Enter emailid"
        }
    });

}); 
```

**HTML**：

```
<form id="RegForm">
    <input type="text" name="unameTxt" />
    <input type="text" name="pnameTxt" />
    <input type="text" name="pnameTxt2" />
    <input type="text" name="phnumTxt" />
    <input type="text" name="emailTxt" />
    <input type="submit" />
</form> 
```

# java - Java服务器，客户端程序

> ID：15575710
> 
> 赞同：1
> 
> 时间：2013-03-22T16:46:41.863
> 
> 标签：java, client-server

下面的代码应该允许用户输入一个 URL 并让它返回该网站的 IP 地址，但它不起作用。

该应用程序是一个控制台应用程序。我曾经让它工作，但我不知道为什么它现在不起作用。

这是我在用户进入网站以获取 IP 地址时遇到的错误

```
IOException:  java.net.SocketException: Connection reset 
```

这是我的客户代码

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.Socket;
import java.net.UnknownHostException;

public class Client {
    public static void main(String[] args) {

        String hostname = "localhost";
        int port = 6052;

        if (args.length > 0) {
            hostname = args[0];
        }

        Socket clientSocket = null;
        PrintWriter os = null;
        BufferedReader is = null;

        try {
            clientSocket = new Socket(hostname, port);
            os = new PrintWriter(clientSocket.getOutputStream(), true);
            is = new BufferedReader(new    InputStreamReader(clientSocket.getInputStream()));
        } catch (UnknownHostException e) {
            System.err.println("Don't know about host: " + hostname);
        } catch (IOException e) {
            System.err.println("Couldn't get I/O for the connection to: " + hostname);
        }

        if (clientSocket == null || os == null || is == null) {
            System.err.println("Something is  really wrong. ");
            return;
        }

        try {
            if (args.length != 2) {

                System.out.print("Enter a www web address (must have www!) ");
                BufferedReader br = new BufferedReader(new InputSreamReader(Sy.in))
                String keyboardInput = br.readLine();
                os.println(keyboardInput);

            } else {
                os.println(args[1]);
            }
            String responseLine = is.readLine();
            System.out.println("The IP address of " + args[1] + "is" + responseLine);

        } catch (UnknownHostException e) {
            System.err.println("Trying to connect to host: " + e);
        } catch (IOException e) {
            System.err.println("IOException:  " + e);
        }
    }
} 
```

这是我的服务器代码

```
import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;

public class Server {
    public static void main(String args[]) {
        int port = 6052;
        Server server = new Server(port);
        server.startServer();
    }

    ServerSocket echoServer = null;
    Socket clientSocket = null;
    int numConnections = 0;
    int port;

    public Server(int port) {
        this.port = port;
    }

    public void stopServer() {
        System.out.println("Server working hold on a min.");
        System.exit(0);
    }

    public void startServer() {
        try {
            echoServer = new ServerSocket(port);
        } catch (IOException e) {
            e.printStackTrace();
        }

        System.out.println("Server is now started and is waiting for Clients.");

        while (true) {
            try {
                clientSocket = echoServer.accept();
                numConnections++;
                new Thread(new ServerConnection(clientSocket, numConnections,
                        this)).start();
            } catch (IOException e) {
                System.out.println(e);
            }
        }
    }
}

 class ServerConnection implements Runnable {
 private static BufferedReader is;
 private static PrintStream os;
 private static Socket clientSocket;
 private static int id;
 private static Server server;

 public ServerConnection(Socket clientSocket, int id, Server server) {
this.clientSocket = clientSocket;
this.id = id;
this.server = server;
System.out.println( "Connection " + id + " established with: " + clientSocket );
try {
    is = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
    os = new PrintStream(clientSocket.getOutputStream());
} catch (IOException e) {
    System.out.println(e);
}
}

public void run() {
    String line;
try {
    boolean serverStop = false;

            line = is.readLine();
    System.out.println( "Received " + line + " from Connection " + id + "." );

                 InetAddress hostAddress = InetAddress.getByName(line);
                 String IPaddress = hostAddress.getHostAddress();
                 os.println(IPaddress);

          is.close();
        os.close();
     clientSocket.close();
} catch (IOException e) {
    e.printStackTrace();
}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:35:07.627

没有参数，主机将是`localhost`，用户将被支持一个网站。`ArrayOutOfBoundsException`因为你没有检查论点。

有一个论点，它是主机。传递站点将无法正常工作，因为该站点无法按预期工作。

使用两个参数运行，如果第一个参数是`localhost`.

# r - 修改 POSIXct 对象的时区而不更改显示

> ID：15575713
> 
> 赞同：16
> 
> 时间：2013-03-22T16:46:47.690
> 
> 标签：r, timezone, posixct

我有一个`POSIXct`对象，并且想更改它的`tz`属性而不用 R 来解释它（解释它意味着更改日期时间在屏幕上的显示方式）。

一些背景：我正在使用`fasttime`来自 S.Urbanek 的包，它接受字符串并`POSIXct`非常快速地将其转换为。问题是字符串应该代表“GMT”中的日期时间，而我的数据不是这样。

我最终得到一个`POSIXct`对象`tz=GMT`，实际上它是`tz=GMT+1`，如果我改变时区

```
attr(datetime, "tzone") <- "Europe/Paris";
datetime  <- .POSIXct(datetime,tz="Europe/Paris"); 
```

那么它将被“显示”为`GMT+2`（基础价值永远不会改变）。

编辑：这是一个例子

```
datetime=as.POSIXct("2011-01-01 12:32:23.234",tz="GMT")
attributes(datetime)
#$tzone
#[1] "GMT"
datetime
#[1] "2011-01-01 12:32:23.233 GMT" 
```

如何在没有 R 的情况下更改此属性来解释它，也就是如何更改 tzone 并仍然将日期时间显示为`"2011-01-01 12:32:23.233"`？

编辑/解决方案，@GSee 的解决方案相当快，lubridate::force_tz 非常慢

```
datetime=rep(as.POSIXct("2011-01-01 12:32:23.234",tz="GMT"),1e5)
f <- function(x,tz) return(as.POSIXct(as.numeric(x), origin="1970-01-01", tz=tz))
> system.time(datetime2 <- f(datetime,"Europe/Paris"))
   user  system elapsed 
   0.01    0.00    0.02 
> system.time(datetime3 <- force_tz(datetime,"Europe/Paris"))
   user  system elapsed 
   5.94    0.02    5.98 
identical(datetime2,datetime3)
[1] TRUE 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-22T17:06:59.373

要更改变量的`tz`属性，`POSIXct`最好先转换为字符或数字，然后再转换为`POSIXct`. 相反，您可以使用包的`force_tz`功能`lubridate`

```
library(lubridate)

datetime2 <- force_tz(datetime, tzone = "CET")
datetime2
attributes(datetime2) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-22T17:09:33.140

### 编辑：

我之前的解决方案是将字符值传递给`origin`（即`origin="1970-01-01"`）。这只适用于这里，因为现在[已经](http://developer.r-project.org/blosxom.cgi/R-devel/NEWS/2013/03/30#n2013-03-30)在 R-devel 中修复了一个错误 ( [#PR14973 )。](https://bugs.r-project.org/bugzilla3/show_bug.cgi?id=14973)

`origin`被强制`POSIXct`使用调用的`tz`参数`as.POSIXct`，而不是`"GMT"`像记录的那样。行为已更改以匹配文档，在这种情况下，这意味着您必须为 the`origin`和`as.POSIXct`调用指定您的时区。

```
datetime
#[1] "2011-01-01 12:32:23.233 GMT"
as.POSIXct(as.numeric(datetime), origin=as.POSIXct("1970-01-01", tz="Europe/Paris"),
           tz="Europe/Paris")
#[1] "2011-01-01 12:32:23.233 CET" 
```

这也适用于旧版本的 R。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-07-08T08:33:18.830

包的替代方法`lubridate`是通过字符类型的转换：

```
recastTimezone.POSIXct <- function(x, tz) return(
  as.POSIXct(as.character(x), origin = as.POSIXct("1970-01-01"), tz = tz)) 
```

（改编自 GSee 的回答）

不知道这是否有效，但它适用于夏令时的时区。

测试代码：

```
x <- as.POSIXct('2003-01-03 14:00:00', tz = 'Etc/UTC')
x
recastTimezone.POSIXct(x, tz = 'Australia/Melbourne') 
```

输出：

```
[1] "2003-01-03 14:00:00 UTC"
[1] "2003-01-03 14:00:00 AEDT" # Nothing is changed apart from the time zone. 
```

如果我替换`as.character()`为`as.numeric()`（正如 GSee 所做的那样），则输出：

```
[1] "2003-01-03 14:00:00 UTC"
[1] "2003-01-03 15:00:00 AEDT" # An hour is added. 
```

# visual-studio-2012 - 无法附加到应用程序... PE 模块的格式无效

> ID：15575714
> 
> 赞同：1
> 
> 时间：2013-03-22T16:46:56.030
> 
> 标签：visual-studio-2012, visual-studio-debugging

我试图在它的 web 项目中调试一个 silverlight 应用程序。

每当我运行调试器时，我都会收到以下消息：

```
Unable to attach to application 'WebDev.WebServer40.EXE' (PID: 8412) using '[PC-NAME]'.  The format of the PE module is invalid. 
```

编辑：我已经尝试删除 SUO 文件，清理并构建 - 没有什么能让这个错误消失，并在谷歌上搜索“PE模块的格式只会提出这个问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:11:19.660

您最近是否安装了 Visual Studio Update 2？遇到同样问题的其他人 ( [http://social.msdn.microsoft.com/Forums/en-US/vstest/thread/5682aee9-942b-4c13-9986-178d1b84ea55/](http://social.msdn.microsoft.com/Forums/en-US/vstest/thread/5682aee9-942b-4c13-9986-178d1b84ea55/) ) 通过卸载更新 2 解决了该问题。

# spring-webflow - Spring Webflow：未执行任何操作

> ID：15575717
> 
> 赞同：0
> 
> 时间：2013-03-22T16:47:07.987
> 
> 标签：spring-webflow

我正在尝试在 SWF 中实现一个动作，但即使在最简单的示例中我也会遇到同样的错误。

错误：“java.lang.IllegalStateException：未执行任何操作，因此我无法执行任何状态转换”

```
import org.springframework.webflow.execution.Action;
import org.springframework.webflow.execution.Event;
import org.springframework.webflow.execution.RequestContext;

public class HelloAction implements Action {
@Override
public Event execute(RequestContext rc) throws Exception {                
    return new Event(this, "success");
} 
```

我已经声明了 bean。

```
 <bean id="helloAction" class="app.action.HelloAction"/> 
```

在flow.xml ..

```
<action-state id="intermedio">
   <action bean="helloAction"/>
   <transition on="success" to="fin"/>
</action-state>

<end-state id="fin" view="final" /> 
```

**如果我不使用 "HelloAction" 它工作正常**。但是如果我想在 SWF 中使用 Action，我总是会得到以前的错误。

还需要什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:59:23.180

```
<action-state id="intermedio">
    <evaluate expression="helloAction.execute()">
    <transition on="success" to="fin"/>
</action-state> 
```

# mef - getexport 上的 MEF 函数（非单例）

> ID：15575718
> 
> 赞同：0
> 
> 时间：2013-03-22T16:47:09.923
> 
> 标签：mef

我需要在 MEF 中执行以下操作：

每当我解决某个接口时，我都需要一段代码来运行，它给出了实现。

它绝不能是单例，因此 MEF 必须始终运行该特定代码。

私人 IContract MethodToExecute()

var resolve = container.GetExport(); --> 必须运行 MethodToExecute

# mongodb - 使用 MapReduce/Aggregation 创建搜索方面

> ID：15575726
> 
> 赞同：0
> 
> 时间：2013-03-22T16:47:39.490
> 
> 标签：mongodb, mapreduce, pymongo

我有以下原型的文件：

```
{
   title: "HD8200 DLP Projector",
   normal_price: 4999.99,
   specifications: [
       {
           ov: "HD (1920 x 1080)",
           fn: "Resolution (Native / Max)",
           o: 7,
           f: 211
       },
       {
           ov: "20000",
           fn: "Contrast Ratio",
           o: 15,
           f: 225
       }
   ]
} 
```

我正在寻找根据规范为此产品数据库创建过滤器列表。

**`o`对于每个字段 ( )，如何获取映射到其产品计数器的选项 ID ( ) 列表`f`？**

假设我需要为特定的字段 ID 列表（例如 211 和 225）实现此目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:15:09.860

编写一个映射器，为每个 map() 调用获取一个文档，并为每个选项写出一条记录。记录键是字段 ID，值是标志“1”、产品标题和选项 ID 的串联。

编写另一个映射器来读取 id 列表并写出具有相同格式的记录：键是字段 ID，值是标志“0”和两个空字符串的串联。

写一个Reducer来读入两个mapper写入的记录。对 reducer() 的每次调用都会传入为给定字段编写的所有记录。如果其中一条记录带有“0”标志，那么该字段就是您感兴趣的字段之一。只有这样，您才会为每个带有“1”标志的记录写出一条记录。键是产品标题，值是选项 ID。

定义您的第一个作业驱动程序类以使用两个映射器和一个减速器。此步骤将为您指定的字段 id 提供成对的产品选项。您需要第二份工作来按产品收集选项，反之亦然。

# tfs - TFS - 项目从源代码控制中丢失

> ID：15575730
> 
> 赞同：0
> 
> 时间：2013-03-22T16:47:59.307
> 
> 标签：tfs

我在尝试从源代码管理中检索项目时遇到问题。我可能在删除绑定等方面做错了。我的项目在源代码管理中的版本不是最新版本。我想知道是否可以从 SQL Server 存储中检索它。或者是否可以通过转换回实时源代码来检索它？

我会试着解释我做了什么。我有一个项目在源代码管理中，但是当我打开项目时它没有被锁定。所以我从源代码管理中打开了项目，但它是一个同名的旧项目。我尝试取消绑定映射，创建一个新工作区并解压缩到一个新的本地文件夹。但我仍然得到旧项目。我找不到该项目的最新版本。

# php - 如何将 magento 前端 CSS 添加到后端？

> ID：15575733
> 
> 赞同：0
> 
> 时间：2013-03-22T16:48:02.053
> 
> 标签：php, magento, include-path, adminhtml

我有一个块，它出现在后端，并通过常用命令添加一个 css 文件：

```
$this->getLayout()->getBlock('head')->addCss('mymodule/css/filename.css'); 
```

这应该可以工作，除了它只在 skin/adminhtml 中查找文件 - 我想包含来自 skin/frontend 的文件，因为这是它当前所在的位置。

`skin/frontend/default/mymodule/css/filename.css`我通过将文件从复制到的蛮力措施暂时克服了这一点`skin/adminhtml/default/mymodule/css/filename.css`，但我宁愿直接引用它。有没有办法让 addCss 命令在前端而不是 adminhtml 中显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:34:51.830

如果它确实是自定义模块的*新*CSS 文件，它应该位于*skin/adminhtml/default/default/css/*中，就像任何其他不同的皮肤资产一样。

***根据 OP 评论**编辑：*****

 **因为它是*您的*新文件，您*可以*将`core/design_package`实例的区域从**adminhtml 切换**到**frontend**，然后将其还原。但是，我的偏好或期望是在*skin/adminhtml/default/default/ 下*看到一个样式表，它调用

```
@import('../../../frontend/base/default/css/file.css'); 
```

对于这个用例，没有绝对的最佳实践，所以这取决于您。**

# ruby-on-rails - 如何国际化铁路路线？

> ID：15575736
> 
> 赞同：1
> 
> 时间：2013-03-22T16:48:08.713
> 
> 标签：ruby-on-rails, rails-routing

我目前坚持根据语言环境为同一资源创建不同的路径。我目前的结构是[http://example.com/fr/](http://example.com/fr/)和[http://example.com/en/](http://example.com/en/)

在我的 routes.rb 我目前有：

```
scope "(:locale)", :locale => /en/ do
 resources :units
 resources :careers, :only => [:index,:create]
end

scope "(:locale)", :locale => /fr/ do
 resources :units, :path => :unites
 resources :careers, :only => [:index,:create], :path => :demploi
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:39:07.050

为此，我使用[rails-translate-routes](https://github.com/francesc/rails-translate-routes)。gem 使用 i18n url 简化了很多工作。

# mysql - 查询以检索相似主键的值

> ID：15575738
> 
> 赞同：0
> 
> 时间：2013-03-22T16:48:16.557
> 
> 标签：mysql, sql

我有一个包含两列的表，如下所示：

```
+-----------+--------+
| Mobile_id | Person |
+-----------+--------+
| ME_02_05  | John   |
| ME-02 05  | Barry1 |
| 02-05     | John   |
| ME 03-02  | James  | 
+-----------+--------+ 
```

我想检索所有`Mobile_id`包含整数（02 05）的人。可以看出，`02 05`表中有ME_02_05、ME-02 05、02-05等不同组合。

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:50:29.027

```
SELECT Person FROM Persons WHERE Mobile_Id LIKE "%02%05" 
```

应该管用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:52:31.283

```
SELECT Person FROM t1 WHERE Mobile_id REGEXP '02[-_ ]05' 
```

这将选择后跟破折号、下划线或空格后跟的每个`Person`条目。`02``05`

# c# - Trace Class - 如何通过代码设置 Autoflush

> ID：15575739
> 
> 赞同：5
> 
> 时间：2013-03-22T16:48:18.663
> 
> 标签：c#, trace, system.diagnostics

我想将 AutoFlush 属性设置为 true，但我需要通过代码来完成。以编程方式。

我发现了[如何配置跟踪元素](http://msdn.microsoft.com/en-us/library/xe8whywc.aspx)以及跟踪类的[AutoFlush 属性](http://msdn.microsoft.com/en-us/library/system.diagnostics.trace.autoflush%28v=vs.110%29.aspx)。

然后我有这段代码来获取 TraceSource：

```
private static TraceSource GetTraceSource()
{
    var ts = new TraceSource("TraceManager")
        {
            Switch =
                {
                    Level = SourceLevels.All
                }
        };
    ts.Attributes.Add("AutoFlush", "true");
    ts.Listeners.Remove("Default");

    var file = System.IO.Path.GetTempPath() + @"\MyApplication.log";
    var textListener = new TextWriterTraceListener(file)
        {
            Filter = new EventTypeFilter(SourceLevels.All)
        };

    ts.Listeners.Add(textListener);
    return ts;
} 
```

如何在此代码中将 AutoFlush 属性设置为 true ？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T16:57:22.243

试试添加这个...

```
Trace.AutoFlush = true; 
```

# android - 在 Api Map V2 Android 上绘制多边形时的性能问题

> ID：15575743
> 
> 赞同：3
> 
> 时间：2013-03-22T16:48:28.050
> 
> 标签：android, api, google-maps, optimization, polygon

当我尝试在 android 上显示大量多边形时，地图非常慢

下面是在 GoogleMap 上显示大约 1000 个多边形的以下代码。

```
List<LatLng> list = new ArrayList<LatLng>();
for (int i = 0; i < 33; i++) {
        for (int j = 0; j < 33; j++) {
            list.add(new LatLng(46.961511 + (0.001 * i), 4.866943+ (0.001 * j)));
            list.add(new LatLng(46.961511 + (0.001 * i) + 0.001, 4.866943 + (0.001 * j)));          
            list.add(new LatLng(46.961511 + (0.001 * i)+ 0.001, 4.866943+ 0.001+ (0.001 * j)));         
            list.add(new LatLng(46.961511 + (0.001 * i), 4.866943+ 0.001+ (0.001 * j)));
            addPolygoneToMap(list);
            list.clear();
        }
 }
 private void addPolygoneToMap (List<LatLng> latLngList) {
        mMap.addPolygon(new PolygonOptions()
                .addAll(latLngList)
                .fillColor(Color.BLUE)
                .strokeColor(Color.RED)
                .strokeWidth(3));
 } 
```

在 ApiMapV1 上，我显示了超过 2 000 个多边形叠加。

问题不是创建多边形，而是在地图上滚动。

我怎么解决这个问题？我做错了什么，我该如何优化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:32:40.690

已编辑：我搞砸了，并没有意识到 Android 版 Google Maps 不允许您制作自定义地图，就像您可以使用 Google Maps for Web 一样。

谷歌地图无法处理可能的多边形。您可以使用 Google Maps for Web 来解决这个问题，但是从实际的角度来看，要显示许多多边形，您需要生成图块。因此，您需要将您的应用程序重做为网页而不是本机应用程序。

有很多关于如何使用自定义地图图块制作地图的材料。看

*   [http://econym.org.uk/gmap/custommap.htm](http://econym.org.uk/gmap/custommap.htm)
*   [https://developers.google.com/maps/documentation/javascript/maptypes#CustomMapTypes](https://developers.google.com/maps/documentation/javascript/maptypes#CustomMapTypes)

我还有一篇关于如何提高图块渲染速度的博客文章，stackoverflow 不允许我发布另一个链接。搜索舍伍德优化地图图块生成

祝你好运！

# c# - 为什么我们必须删除 edmx 并在服务器上重新创建它，我们所做的每一次更改？

> ID：15575748
> 
> 赞同：0
> 
> 时间：2013-03-22T16:48:45.283
> 
> 标签：c#, wcf, entity-framework, edmx, ado.net-entity-data-model

我们制作了一些`WCF`使用`Entity Framework`（`edmx`文件）的服务。每次我们进行更改（甚至与框架/数据库无关）时，我们都必须删除`edmx`并重新创建它并在服务器本身上构建解决方案，否则它无法与 SQL Server 交互。

为什么，以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:21:51.050

问题是我们还复制了`WhatEver.dll.config`包含连接字符串的那个（在开发 PC 和服务器之间是不同的）。

如果我们溢出文件，我们现在只需修复连接字符串`WhatEver.dll.config`......

# node.js - 在 node/mongodb/express 中创建登录系统。无法连接到数据库

> ID：15575749
> 
> 赞同：1
> 
> 时间：2013-03-22T16:48:47.090
> 
> 标签：node.js, mongodb, express, mongoose

我正在尝试创建一个登录系统，管理员可以在其中登录并查看公众无法使用的数据。现在我只是想在我的数据库中找到我的管理实例。我有两个节点文件： `app.js`和 `account_manager.js`

`app.js`

```
//creates node app
var express = require('express');
var app = express();
var mongoose = require('mongoose');
var AM = require('./account_manager');

//stuff...
/***************************************
LOGIN 
***************************************/
app.post('/login', function(req, res){

    AM.manualLogin(req.param('username'), req.param('password'), function(e, o){
        if (!o){
            res.send(e, 400);
        }   else{
            req.session.user = o;
            res.send(o, 200);
        }
    });
}); 
```

`account_manger.js`需要`app.js`并存储在 AM 中

`account_manager.js`：

```
var express = require('express');
var app = express();
var mongoose = require('mongoose');
mongoose.connect('mongodb://localhost');

var admin_db = mongoose.connection; 

admin_db.on('error', console.error.bind(console, 'connection error: '));
//connection open?
admin_db.once('open', function callback(){
   console.log("User Database connection open!\n");
 });
var User_Schema = new mongoose.Schema({username: String, password: String});

var Admin = mongoose.model('Admin', User_Schema);

exports.manualLogin = function(user, pass, callback)
{
admin_db.find({username: user},function(err,docs){ //error is here
    if(docs){
        var x = 0;
        var flag = false;
        while(docs[x]){ //goes through all the admins
            if (docs[x].param("username") == user){ //if it's a match
                callback(null, docs);
                flag = true;
                break;
                }
            x+=1;
            }
        if (flag == false){
            callback('invalid-password/username');
            }
    }

});
} 
```

我得到一个`TypeError`说：

```
Object #<NativeConnection> has no method 'find' 
```

我的问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:05:49.343

我自己对 node.js 还是很陌生，但无论如何我都会尝试回答。

看起来您已经通过 mongoose 正确地建立了与 mongodb 的连接，但您还没有创建模式。虽然 mongodb 没有模式，但 mongoose 有。

您需要做的是创建一个与用户集合中用户文档的构造相匹配的模式 (UserSchema)，然后创建该模式 (User) 的实例，该实例现在是您的模型，然后在该模型上调用 .find .

Mongoose 快速入门指南经历了这个过程： http: [//mongoosejs.com/docs/index.html](http://mongoosejs.com/docs/index.html)

更新后编辑：

您当前正在调用 admin_db.find。这不存在。这是你得到的错误。

您需要将其更改为 Admin.find。您还需要了解区别是什么。

再次编辑：

您没有正确使用 admin_db.once 回调。

我建议您返回并重新阅读我链接的 Mongoose 快速入门指南。它很短，并且经历了所有这些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-29T19:37:01.127

我看到你在这里滚动你自己的系统，但我想我会分享一个到 Drywall 的链接，以防你能从中获得一些灵感或知识。

Drywall - Node.js 的网站和用户系统：http: [//jedireza.github.io/drywall/](http://jedireza.github.io/drywall/)

我希望这是有帮助的。如果遇到任何障碍，请随时在 GitHub 中打开问题。

# sharepoint - 从 SSRS 2005 请求 Sharepoint 2007 列表

> ID：15575762
> 
> 赞同：0
> 
> 时间：2013-03-22T16:49:25.423
> 
> 标签：sharepoint, sharepoint-2007, reportingservices-2005

正如标题所说，我正在尝试将一些列表项从我的 sharepoint 网站获取到我的 SSRS 2005 报告中。我尝试遵循并改编一些 SSRS 2008 教程，如下所示： http: [//nikspatel.wordpress.com/2010/04/30/step-by-step-sumption-sharepoint-lists-data-in-the-ssrs -reports/](http://nikspatel.wordpress.com/2010/04/30/step-by-step-consuming-sharepoint-lists-data-in-the-ssrs-reports/) 问题是当我尝试验证我的查询时，我陷入了第六步。我试图传递一些我在下面发布的查询：

```
<Query>
<SoapAction>http://schemas.microsoft.com/sharepoint/soap/GetListItems
</SoapAction>
<Method Namespace='http://schemas.microsoft.com/sharepoint/soap/' Name = 'GetListItems'>
<Parameters>
<Parameter Name='listName'>
<DefaultValue>EraDemandes</DefaultValue>
</Parameter>
<Parameter Name='rowLimit'>
<DefaultValue>100</DefaultValue>
</Parameter>
<Parameter Name='query' Type='xml'>
<DefaultValue>
  <Query>
    <Where>
      <Eq>
        <FieldRef Name='ID'/>
        <Value Type='Integer'>1016</Value>
      </Eq>
    </Where>
  </Query>
</DefaultValue>
</Parameter>
<Parameter Name='viewFields' Type='xml'>
<DefaultValue>
 <ViewFields> 
  <FieldRef Name='Title' />
    <FieldRef Name='ID' />
 </ViewFields>
</DefaultValue>
</Parameter>
<Parameter Name='queryOptions' Type='xml'>
<DefaultValue>
<QueryOptions>
   <IncludeMandatoryColumns>FALSE</IncludeMandatoryColumns>
   <DateInUtc>TRUE</DateInUtc>
</QueryOptions>
</DefaultValue>
</Parameter>
</Parameters>
</Method>
<ElementPath IgnoreNamespaces='True'>*</ElementPath>
</Query>

    <Query>
      <SoapAction>http://schemas.microsoft.com/sharepoint/soap/GetListItems</SoapAction>
        <Method Namespace="http://schemas.microsoft.com/sharepoint/soap/" Name="GetListItems">
          <Parameters>
            <Parameter Name="listName">
              <DefaultValue>Liste des Demandes</DefaultValue>
            </Parameter>
          </Parameters>
        </Method>
      <ElementPath IgnoreNamespaces="True">*</ElementPath>
    </Query> 
```

我试图删除/修改所有参数但没有成功。我真的不熟悉 SSRS，所以请继续问你需要的每一个问题。我自己有几个问题：

*   在 2 个查询中，我为列表使用了 2 个不同的名称：“EraDemandes”是我通过 sharepoint 访问列表时在 URL 中获得的名称，“Liste des Demandes”是 Sharepoint 中列表的名称。我相信在 sharepoint 中有 2 个名称，一个显示名称和一个 sharepoint 名称。我应该使用哪一个？
*   我的根 Sharepoint 站点集合是`'http://m-epderaqua/default.aspx'`并且我想要的列表位于此集合中的所有子站点 ( `http://m-epderaqua/ERA73/default.aspx or http://m-epderaqua/ERA38/default.aspx`)。我应该在我的数据源中使用哪个网址？我应该使用许多数据源（例如每个子站点一个）吗？

帮助请。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:32:38.137

我不知道为什么，但它现在工作得很好。我想维护团队在周末做了一些事情，但我不知道是什么......

# jquery - 切换 .html()？

> ID：15575767
> 
> 赞同：2
> 
> 时间：2013-03-22T16:49:41.803
> 
> 标签：jquery, html

我试图做一个按钮，在你按下之前显示更多，然后在你按下时隐藏。问题是，当您按下隐藏时，它不会变回查看更多。我该如何解决这个问题？

jQuery代码是：

```
 $("#single .vm").click(function () {
      $("#singlemore").slideToggle(150);
      $("#single .vm").html('Hide');
     }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T16:51:30.780

`View more`您可以使用三元运算符在文本和之间切换，`Hide`并使用`$(this)`而不是 $("#single .vm")

```
 $("#single .vm").click(function () {
      $("#singlemore").slideToggle(150);
      $(this).html($(this).html() == 'Hide' ? 'View more' : 'Hide');
 }); 
```

# php - 使用服务远程登录用户到 drupal

> ID：15575773
> 
> 赞同：1
> 
> 时间：2013-03-22T16:50:06.887
> 
> 标签：php, web-services, session, drupal

我正在尝试让用户使用现有服务登录 drupal。我能够将用户名和密码发布到远程服务器上的 drupal，并且我确实获得了身份验证信息。

我的问题是如何注册会话以便 drupal 知道我已登录？一旦我登录并尝试访问任何内容，我就会得到`"Access denied for anonymous user"`.

我注意到查看服务说明：

`Authentication : header Cookie must be set to <session_name>=<sessid> given by the login response of a successful login`

所以我尝试了

```
$_SESSION[$curlResult->session_name] = $curlResult->sessid; 
```

我认为这不是上面那行所说的。不确定什么是标头 cookie。

`$curlResult->session_name`并且 `$curlResult->sessid`绝对有效，这是成功登录时返回的内容的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:25:49.353

您能告诉我们您以用户身份登录后要做什么吗？有一个服务模块可以允许用户通过 REST 访问。

我已经成功地以远程用户身份登录，没有服务模块，使用 Python 机械化进行负载测试。

# python - 按键对项目进行分组？

> ID：15575776
> 
> 赞同：5
> 
> 时间：2013-03-22T16:50:09.890
> 
> 标签：python, collections, group-by, iterable

我觉得 Python 应该有一个内置的功能来做到这一点。获取项目列表并将它们转换为字典，将键映射到具有该键的项目列表。

这很容易做到：

```
# using defaultdict
lookup = collections.defaultdict(list)
for item in items:
    lookup[key(item)].append(item)

# or, using plain dict
lookup = {}
for item in items:
    lookup.setdefault(key(item), []).append(item) 
```

但这对于一个用例来说已经足够频繁了，因此内置函数会很好。我可以自己实现它，如下所示：

```
def grouped(iterable, key):
    result = {}
    for item in iterable:
        result.setdefault(key(item), []).append(item)
    return result

lookup = grouped(items, key) 
```

这与`itertools.groupby`一些重要的方面不同。要从 获得相同的结果`groupby`，您必须这样做，这有点难看：

```
lookup = dict((k, list(v)) for k, v in groupby(sorted(items, key=key), key)) 
```

一些例子：

```
>>> items = range(10)
>>> grouped(items, lambda x: x % 2)
{0: [0, 2, 4, 6, 8], 1: [1, 3, 5, 7, 9]}

>>> items = 'hello stack overflow how are you'.split()
>>> grouped(items, len)
{8: ['overflow'], 3: ['how', 'are', 'you'], 5: ['hello', 'stack']} 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T06:09:01.103

我还将这个问题发布到 comp.lang.python，并且共识似乎是这实际上并不足以保证内置函数。因此，最好使用显而易见的方法。他们工作，他们是可读的。

```
# using defaultdict
lookup = collections.defaultdict(list)
for item in items:
    lookup[key(item)].append(item)

# or, using plain dict
lookup = {}
for item in items:
    lookup.setdefault(key(item), []).append(item) 
```

我打算删除我的问题，但我不妨把它留在这里，以防有人偶然发现它寻找信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T21:36:36.290

如果您想要与 API 大致相同的东西`groupby`，您可以使用：

```
def groupby2(iterable, keyfunc):
    lookup = collections.defaultdict(list)
    for item in iterable:
        lookup[keyfunc(item)].append(item)
    return lookup.iteritems() 
```

所以这和你上面的例子一样，但是变成了一个函数，返回`iteritems`你建立的查找表的。

# oop - 我应该如何决定哪个类负责对象创建？

> ID：15575780
> 
> 赞同：2
> 
> 时间：2013-03-22T16:50:24.797
> 
> 标签：oop, design-patterns

是否有关于对象创建责任的一般规则和常见陷阱？我应该如何决定谁负责创建对象？有时很明显，有时不是，我试图避免冗余代码并仅限制在必要的最低限度。当我必须决定在哪里编写创建方法时，我应该问自己什么？

```
class State
{
    ...
    public [City] getCapitalCity()
    {
        return new City(this.capitalCityID);
    }
}

class City
{
    ...
    public static [City] getCapitalOf(State s)
    {
        return new City(s.capitalCityID)
    }
} 
```

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:05:29.570

我可能会说这完全取决于您的课程将如何使用。在这种情况下，我会选择 ，`State.getCapitalCity()`因为开发人员的工作流程更有可能是查询他们已经拥有的州对象的首都是什么。

我的班级设计可能类似于以下内容。这样，如果需要，我可以在两个实体之间来回切换。

```
class State
{
   ... 
   public City CapitalCity()
   {
      return new City(this.capitalCityId);
   }
}

class City
{
   ...
   public State State()
   {
      return new State(this.stateId);
   }

   public bool IsCapitalCity()
   {
      return this.isCapitalCity;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T17:19:16.273

您的第一个方法的一个缺陷是它为每次调用创建一个新的 City 对象。这样的事情对我来说会更自然：

```
class State
{
    protected [City] capitalCity;
    ...
    public [City] getCapitalCity()
    {
        if (this.capitalCity == null) {
            this.capitalCity = City::getCapitalOf(this);
        }
        return this.capitalCity;
    }
}

class City
{
    ...
    public static [City] getCapitalOf(State s)
    {
        return new City(s.capitalCityID)
    }
} 
```

请注意，我保留了这两种方法，但将一种方法**委托**给了另一种方法。在此更改之后仍未解决的另一件事是您将无法交换 City 对象，即用于单元测试中的模拟。依赖是硬连线的。

谈到设计模式，对于松散耦合的设计，实例化对象的唯一类应该是**工厂**。

如果我们在这里应用它，它可能看起来像这样：

```
class CityFactory
{
    ...
    public static [City] createCapitalFromState(State s)
    {
        return new City(s.capitalCityID);
    }
}

class State
{
    protected [City] capitalCity;
    ...
    public [City] getCapitalCity()
    {
        if (this.capitalCity == null) {
            this.capitalCity = CityFactory::getCapitalOf(this);
        }
        return this.capitalCity;
    }
}

class City
{
    ....
} 
```

为了简单起见，我将工厂方法保持为静态，实际上您可以访问`CityFactory`. 这可以很容易地交换以产生不同的对象。

> 当我必须决定在哪里编写创建方法时，我应该问自己什么？

**两件事情：**

*   我要引入一个新的硬连线依赖吗？
*   我可以将对象创建提取到自己的类吗？

人们可能会认为两个领域对象喜欢`City`并且`State`不是解耦练习的最佳示例，因为它们显然总是会一起使用，对吧？

但如果你仔细想想，这并不是牵强附会：也许在某些时候你会继承或装饰你的城市，以区分行为上的某些差异。使用城市工厂，如果您想更改城市的创建，您只需在某一时刻更改城市的创建。这是 OOD 中的一个重要目标：如果您必须更改某些内容，则不必在所有地方都进行更改，而只需要更改一次即可。

# javascript - 使 'this' 等于 Javascript 函数分配中的调用者

> ID：15575781
> 
> 赞同：2
> 
> 时间：2013-03-22T16:50:26.337
> 
> 标签：javascript, function, this

我试图确保我在下面的 caller.receiver 方法中有一个有效的*这个*引用。

这是一个简化的示例，但我有一些功能分配，例如：

```
service.fn = this.receiver 
```

但是，当接收器函数执行时，我希望*它*引用调用者，即我希望将字符串“Caller - Received”输出到控制台日志。

```
var service = {
    name: 'Service',
    fn: null,
    runFn: function () {
        this.fn(arguments);
    }
};

var caller = {
    name: 'Caller',
    receiver: function () {
        console.log(this.name + ' - Received');
    },
    perform: function () {
        service.fn = this.receiver;
        service.runFn();
    }
};

caller.perform(); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:55:17.603

[将方法绑定](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)到对象：

```
perform: function () {
    service.fn = this.receiver.bind(this);
    service.runFn();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:55:24.697

您可以将 Recieve 引用传递给函数，然后使用 apply：http: [//jsfiddle.net/d5tf2/](http://jsfiddle.net/d5tf2/)

```
 var service = {
        name: 'Service',
        fn: null,
        runFn: function (ref) {
            this.fn.apply(ref,arguments);
        }
    };

    var caller = {
        name: 'Caller',
        receiver: function () {
            console.log(this.name + ' - Received');
        },
        perform: function () {
            service.fn = this.receiver;
            service.runFn(this);
        }
    };

    caller.perform(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T16:55:46.097

```
var service = {
    name: 'Service',
    fn: null,
    runFn: function () {
        this.fn(arguments);
    }
};

var getCaller = function(){
    var that;
    return {
        name='Caller',
        receiver: function () {
            console.log(that.name + ' - Received');
        },
        perform: function () {
            that = this;
            service.fn = this.receiver;
            service.runFn();
        }
    }
};
var caller = getCaller();
caller.perform(); 
```

有趣的阅​​读：http: [//jason.pettys.name/2011/10/06/javascript-this-and-that/](http://jason.pettys.name/2011/10/06/javascript-this-and-that/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-22T16:58:52.950

把这个传进去

```
var service = {
    name: 'Service',
    fn: null,
    runFn: function (arguments) {
        this.fn(arguments);
    }
};

var caller = {
    name: 'Caller',
    receiver: function (that) {
        console.log(that.name + ' - Received');
    },
    perform: function () {
        service.fn = this.receiver;
        service.runFn(this);
    }
};

caller.perform(); 
```

# java - JBoss AS7：java.lang.IllegalStateException：参数处理失败

> ID：15575784
> 
> 赞同：0
> 
> 时间：2013-03-22T16:50:26.697
> 
> 标签：java, servlets, character-encoding, jboss, jboss7.x

我正在传递 body 参数，它是不同语言的文本，如法语、德语和特殊字符。我正在使用 Javascript encode() 对正文进行编码，jsp 页面是 UTF-8 编码的，在 servlet 端我什至尝试使用

```
request.setCharacterEncoding("UTF-8"); 
```

但在到达实际的 servlet 主体之前仍然从 jboss 收到以下错误。

```
threw exception: java.lang.IllegalStateException: Parameters processing failed.
            at org.apache.tomcat.util.http.Parameters.processParameters(Parameters.java:407) [jbossweb-7.0.13.Final.jar:]
            at org.apache.tomcat.util.http.Parameters.processParameters(Parameters.java:229) [jbossweb-7.0.13.Final.jar:]
            at org.apache.catalina.connector.Request.parseParameters(Request.java:2874) [jbossweb-7.0.13.Final.jar:]
            at org.apache.catalina.connector.Request.getParameterNames(Request.java:1333) [jbossweb-7.0.13.Final.jar:]
            at org.apache.catalina.connector.Request.getParameterMap(Request.java:1313) [jbossweb-7.0.13.Final.jar:]
            at org.apache.catalina.connector.RequestFacade.getParameterMap(RequestFacade.java:422) [jbossweb-7.0.13.Final.jar:]
            at org.apache.struts2.dispatcher.Dispatcher.createContextMap(Dispatcher.java:592) [struts2-core-2.3.8.jar:2.3.8]
            at org.apache.struts2.dispatcher.ng.PrepareOperations.createActionContext(PrepareOperations.java:78) [struts2-core-2.3.8.jar:2.3.8]
            at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:78) [struts2-core-2.3.8.jar:2.3.8]
            at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
            at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
            at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
            at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
            at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
            at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
            at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
            at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
            at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
            at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
            at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
            at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
            at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_11] 
```

在传递较小的文本时它可以工作，但如果正文很长，它会引发异常。

失败的主体的传递值：

```
K%E6re%20hr./fru%20%3Cbr%3E%3Cbr%3EVi%20bekr%E6fter%20hermed%2C%20at%20vi%20har%20modtaget%20din%20anmodning%20om%20at%20blive%20fjernet%20som%20modtager%20af%20Dells%20marketingmeddelelser%20den%20DD/MM/YYYY.%20%3Cbr%3E%3Cbr%3EVores%20marketingdatabase%20er%20blevet%20opdateret%20som%20f%F8lge%20af%20din%20anmodning.%20Der%20kan%20g%E5%20op%20til%2010%20arbejdsdage%20for%20e-mail%20og%204%20%u2013%206%20uger%20for%20direkte%20mail%2C%20f%F8r%20indstillingerne%20tr%E6der%20i%20kraft.%20Da%20nogle%20meddelelser%2C%20f.eks.%20direkte%20mail-kataloger%2C%20udvikles%20og%20s%E6ttes%20i%20k%F8%20til%20distribution%20l%E6nge%20i%20forvejen%2C%20vil%20du%20muligvis%20modtage%20flere%20oplysninger%2C%20efter%20at%20vi%20har%20modtaget%20din%20anmodning.%20%3Cbr%3E%3Cbr%3EVi%20er%20kede%20af%2C%20at%20du%20ikke%20l%E6ngere%20%F8nsker%20at%20modtage%20oplysninger%20om%20Dells%20produkter%20og%20services%2C%20men%20hvis%20du%20skulle%20ombestemme%20dig%20p%E5%20et%20senere%20tidspunkt%2C%20kan%20du%20bes%F8ge%20vores%20websted%3A%20www.dell.dk%20%3Cbr%3E%3Cbr%3EHvis%20du%20fortsat%20modtager%20marketingmeddelelser%20fra%20os%20efter%20de%20tidsrum%2C%20der%20er%20angivet%20ovenfor%2C%20er%20du%20altid%20velkommen%20til%20at%20kontakte%20os%20p%E5%20delldk@clientmail.eu.com.%20%3Cbr%3E%3Cbr%3EMed%20venlig%20hilsen%20%3Cbr%3E%3Cbr%3EDells%20kundeservice%20%3Cbr%3EDell%20Computer 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T07:03:03.940

> 我正在使用 Javascript encode() 对正文进行编码

我想你的意思是逃生（）。Javascript 转义函数不支持 UTF-8，有 encodeuricomponent 和 encodeuri 支持。修复它，我猜你会没事的，假设源数据是有效的 UTF-8。

引用[此讨论](https://stackoverflow.com/questions/75980/best-practice-escape-or-encodeuri-encodeuricomponent)，“不要使用它，因为它自 ECMAScript v3 以来已被弃用。”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:40:15.753

您可能需要通过更改 Parameters.java 来修补 jboss-web.jar。试试这个，也许这可以解决你的问题。

[https://community.jboss.org/message/747210](https://community.jboss.org/message/747210)

**更新：**不建议使用此解决方案，可能会被视为最坏的情况。

# sharepoint-designer - 在预先存在的文件夹中创建子文件夹：SharePoint Designer

> ID：15575786
> 
> 赞同：0
> 
> 时间：2013-03-22T16:50:33.867
> 
> 标签：sharepoint-designer

我一直在使用 SharePoint Designer，并且一直在创建工作流，但似乎找不到在另一个已经存在的文件夹中创建文件夹的方法。现在，我创建一个文件夹然后在其中创建另一个文件夹没有问题，但我需要能够将子文件夹添加到预先存在的文件夹中。任何人都可以帮忙。我正在使用 SharePoint Designer 2010。我不断收到无法创建列表项的错误消息，并确保该列表存在并且用户有权访问该列表。我是拥有所有权限的所有者，并且该列表确实存在。如果您有具体问题，我可以为您提供更多详细信息。我尝试了几种不同的方式引用数据，从我引用它来创建文件夹和子文件夹的方式开始，但我没有运气。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:29:14.717

您是否尝试过包含现有文件夹名称？有关详细信息，请参阅此博客文章：[http ://www.getinthesky.com/2012/08/creating-folders-and-sub-folders-using-sharepoint-2010-designer-workflow/](http://www.getinthesky.com/2012/08/creating-folders-and-sub-folders-using-sharepoint-2010-designer-workflow/)

它涉及在同一工作流程中创建文件夹和子文件夹，但是无论如何都必须先创建父文件夹。

# python - 在 pandas DataFrame 中创建 NaN 列

> ID：15575789
> 
> 赞同：-1
> 
> 时间：2013-03-22T16:50:41.020
> 
> 标签：python, numpy, pandas

我看到以下示例来说明如何在 DataFrame 中创建 NaN 列。

```
import pandas as pd
import numpy as np
import math
import copy
import datetime as dt

"""
Accepts a list of symbols along with start and end date
Returns the Event Matrix which is a pandas Datamatrix
Event matrix has the following structure :
    |IBM |GOOG|XOM |MSFT| GS | JP |
(d1)|nan |nan | 1  |nan |nan | 1  |
(d2)|nan | 1  |nan |nan |nan |nan |
(d3)| 1  |nan | 1  |nan | 1  |nan |
(d4)|nan |  1 |nan | 1  |nan |nan |
...................................
...................................
Also, d1 = start date
nan = no information about any event.
1 = status bit(positively confirms the event occurence)
"""

def find_events(ls_symbols, d_data):
    ''' Finding the event dataframe '''
    df_close = d_data['actual_close']
    ts_market = df_close['SPY']

    print "Finding Events"

    # Creating an empty dataframe
    df_events = copy.deepcopy(df_close) # type <class 'pandas.core.frame.DataFrame'>
    df_events = df_events * np.NAN # << why it works here 
```

我尝试复制该方法如下：

```
import numpy as np
import pandas as pd
from pandas import Series, DataFrame

data = {'state': ['Ohio', 'Ohio', 'Ohio', 'Nevada', 'Nevada'],
        'year': [2000, 2001, 2002, 2001, 2002],
        'pop': [1.5, 1.7, 3.6, 2.4, 2.9]}
frame = DataFrame(data)
frame = frame * np.NAN # TypeError: can't multiply sequence by non-int of type 'float' 
```

Q> 为什么它现在在这里不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:04:37.270

因为您有`state`包含字符串的列，并且将字符串与 a 相乘`NaN`会产生错误。如果您真的想将状态设置为`NaN`，请使用`frame['state'] = np.NAN`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-14T06:22:45.487

Note`df_close`实际上是一个**column**，而不是一个数据框。（`df_close = d_data['actual_close']`。因此也是`df_events`）。您有一个包含三列的数据框，其中`state`是一个字符串，pandas 将其存储为 Python 对象。而且您不能将字符串/对象乘以数字。

**无论如何，乘法是完全没有必要的：**

*   所做`df_close = df_close * np.NaN`的就是以不必要的混淆方式**将 NaN 分配给整个 column**。
*   **直接赋值会清楚得多`= np.NaN`**。或者`pd.np.NaN`
*   如果要将 NaN 分配给多个列，请执行以下操作：`df[['year','pop']] = pd.np.nan`
*   没有真正的乘法发生。只是不要写那样的代码。不要滥用运营商...

# vim - 仅适用于 gvim 的插件？

> ID：15575793
> 
> 赞同：2
> 
> 时间：2013-03-22T16:50:47.043
> 
> 标签：vim

如何防止插件在命令行 vim 中加载，但允许它在 gvim 中加载？

我正在尝试使用`gitgutter`，它的顶部有这些行：

```
 if exists('g:loaded_gitgutter') || !executable('git') ||  !has("gui_running") || &cp
       finish
    endif 
```

但是，每次我在启用 git 的目录中的命令行上启动 vim 时，都会得到所有这些垃圾：

```
"plugin/gitgutter.vim" 416L, 11964C
Error detected while processing function GitGutter..<SNR>35_init..<SNR>35_define_signs:
line    7:
E319: Sorry, the command is not available in this version:     sign define GitGutterLineAdded           text=+  texthl=lineAdded    linehl=NONE
line    8:
E319: Sorry, the command is not available in this version:     sign define GitGutterLineModified        text=~  texthl=lineModified linehl=NONE
line    9:
E319: Sorry, the command is not available in this version:     sign define GitGutterLineRemoved         text=_  texthl=lineRemoved  linehl=NONE
line   10:
E319: Sorry, the command is not available in this version:     sign define GitGutterLineModifiedRemoved text=~_ texthl=lineModified linehl=NONE
Error detected while processing function GitGutter..<SNR>35_find_other_signs:
line    2:
E319: Sorry, the command is not available in this version: :sign place file=/Users/adam/.vim/plugin/gitgutter.vim
Error detected while processing function GitGutter..<SNR>35_show_signs..<SNR>35_add_sign:
line    3:
E319: Sorry, the command is not available in this version: :sign place 3000 line=1 name=GitGutterLineModified file=/Users/adam/.vim/plugin/gitgutter.vim 
```

我究竟做错了什么？

编辑：我的问题有些无效 - 结果是，我编辑的`if`语句既正确又有效，但是在我的 bundle/ 目录中有一个 gitgutter 副本正在加载代替`plugin/gitgutter.vim`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:04:20.293

你应该测试`has('signs')`而不是`has('gui_running')`

```
:h +signs 
```

# heroku - Heroku 忽略捆绑配置

> ID：15575797
> 
> 赞同：5
> 
> 时间：2013-03-22T16:51:05.467
> 
> 标签：heroku, gem, bundler, taglib-ruby

我正在尝试在 Heroku 上安装 gem 'taglib-ruby'。这个 gem 编译为一个本地扩展，它需要一个名为 taglib 的系统依赖项，所以在通过 heroku vulcan 编译和上传它之后，我实现了通过 heroku bash 上的命令行编译 gem：

```
bundle exec gem install taglib-ruby -- --with-opt-dir=/app/vendor/taglib 
```

为了以后**捆绑**器使用此参数，我通过以下命令将其添加为捆绑器配置：

```
bundle config build.taglib-ruby '--with-opt-dir=/app/vendor/taglib' 
```

我已经验证了此配置已应用，检查文件 /.bundle/config 并查找 BUNDLE_BUILD__TAGLIB-RUBY 行。

然而，在将我的项目推送到 heroku 并在执行*bundle install*命令时，**heroku 抱怨无法安装上述 gem (taglib-ruby)，因为 taglib 库不存在**，尽管这是我试图解决的问题上面提到的选项*“--with-opt-dir=/app/vendor/taglib” 。*

**因此，Heroku 似乎忽略了捆绑器配置。**

会发生什么？您知道在 Heroku 上实现相同目的（安装带有自定义构建选项的 gem）的另一种方式吗？

# javascript - Angularjs Phonegap Android 使用 Websockets

> ID：15575798
> 
> 赞同：4
> 
> 时间：2013-03-22T16:51:08.713
> 
> 标签：javascript, android, cordova, angularjs, websocket

我什至不知道如何直接解释这一点，但我会尝试。

**介绍**

我正在使用 angularjs 构建一个 Phonegap 应用程序，并且我正在尝试拼接 WebSocket 消息以更新我的 UI。我曾经拥有定期与服务器通信并相应更改其数据的服务，并且运行良好。一个例子：

*服务1.js*：

```
 var applyUpdate = function (
         angular.extend(instance, data);
         if (!$rootScope.$$phase) $rootScope.$apply();
     };

     this.update = function () {
         DataProvider.get('getThermostatSettings', {}, applyUpdate, function(){}, true);
     } 
```

所以基本上我只是每 5 秒调用一次“更新”函数，从服务器接收数据并更新这个服务。然后控制器将简单地访问此服务，并且一切正常。

**问题**

现在的问题是，我缝合了一个用 java 编写的 WebSocket 接口，它为我处理所有的 websocket 实现。我取自：[https](https://github.com/ziadloo/PhoneGap-Java-WebSocket) ://github.com/ziadloo/PhoneGap-Java-WebSocket 。它基本上注册了一个可从 Javascript 访问的 Javascript 接口以与 java 进行通信。

每次我现在有更改时，我只需通过 WebSocket 从服务器推送一个字符串，说它应该更新，然后我从我的 javascript 中的服务调用“更新”函数，而不是定期查询数据，这只是愚蠢的。

WebSocket 运行良好。我可以看到消息来了，我调用了更新，它从服务器正确获取所有内容，然后调用“update”函数，然后调用具有正确值的“applyUpdate”等等，甚至调用了“$rootScope.$apply”。

**但是角度服务中的所有更新数据都不可见！似乎所有这些更改都在不同的线程中运行！？！？**. 我知道 javascript 是单线程的，但看起来就是这样。

让我换一种更好的说法：**我的印象是，一旦 WebView 调用了 javascript 回调函数，我就有了一个不同的 javascript“线程”在运行，它之外的任何东西都无法访问**

**更多关于它**

我编写了一个函数，它只是每**5 秒**输出一个数字。websocket 更新这个数字。我的输出如下：

```
N: 1
N: 1 
```

然后在 WebSocket 使用新数字 (2) 推送数据后，我得到两个打印：

```
N: 1
N: 2

N: 1
N: 2

N: 1
N: 2 
```

有人对此有任何指示吗？有人试过做类似的事情吗？我不是角度专业人士，但似乎只要我从 java 接口收到回调，一切都会变得一团糟。

我已经看过了：[Angularjs model changes after websocket data push from server](https://stackoverflow.com/questions/14702981/angularjs-model-changes-after-websocket-data-push-from-server)和我的代码看起来很相似。我认为唯一的问题是来自 Java 的回调。

谢谢

**更新**：AngularJS 有问题。如果我在窗口全局变量中设置这个变量，一切都会正常分配。Angular 是否有可能以某种方式创建了两个不同的 $scope？

**更新[2]**：更清楚一点：在浏览器中，一切都按预期工作。只有当我在模拟器中运行它时，这东西才会搞砸。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T02:50:27.807

Angular.js 完全有可能制作两个 $scope。只需查看[此截屏视频](http://www.youtube.com/watch?v=q-7mhcHXSfM&feature=youtu.be)中的调试。

[显示页面上的所有 $scope](https://stackoverflow.com/questions/10514147/in-angularjs-how-do-you-find-all-the-scopes-on-a-page)可能会有所帮助。

您还应该知道，[移动设备上的 websocket 并不是最好的主意](http://lanyrd.com/2012/krtconf/szprz/)。根据那次谈话（由具有 websockets 专业知识的 Nodejitsu 员工），崩溃和失败似乎很可能发生。

# c++ - C ++如何一次将输入限制为一个字符？

> ID：15575799
> 
> 赞同：3
> 
> 时间：2013-03-22T16:51:10.857
> 
> 标签：c++, input

我有一个程序要求用户多次输入输入，并将该输入存储在不同的 char 变量中，然后对这些变量执行操作。

我的问题是我想限制输入一次只为一个变量工作。例如：

```
char a = 'a', b = 'b', c = 'c';
cout << "Enter a ";
cin  >> a; 
cout << "\nEnter b ";
cin  >> b;
cout << "\nEnter c ";
cin  >> c;

cout << "Entered chars were " << a << ", " << b << ", " << c; 
```

运行这个，如果用户输入 tyu（包括字母之间的空格）将使程序将 t 输入变量 a，y 输入变量 b，u 输入变量 c。从本质上讲，它会有点“失败”并自动为 cin 设置值，而不是要求用户为每个值都这样做。

我想要的是检查用户为变量 a 输入的内容是否仅为 1 个字符。

我曾尝试使用 cin.good()，但是在为 cin >> a 输入多个字符后它返回 0；我也尝试过使用 cin.get(a); 然后检查 cin.good()。如果用户输入多个字符，这也返回 0。

有没有办法限制输入一次只能用于一个 cin 操作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T16:53:29.257

您应该逐行阅读您的输入，然后对其进行解析。像这样

```
std::cout << "Enter a:\n";
std::string input;
std::getline(std::cin, input);
if(input.length() != 1)
   //error
else
   char a = input[0]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T17:06:47.283

来自 C 语言。您可以使用 getch(); 一次只需要一个字符。

如果你想要多个字符，我的意思是字符串。你使用 getch(); 与循环。getch() 来自 conio.h，getche() 也可用于在控制台上显示。

# java - 找不到 Javac

> ID：15575801
> 
> 赞同：27
> 
> 时间：2013-03-22T16:51:14.753
> 
> 标签：java, windows-8, compilation, javac

我正在运行 Windows 8，我无法让 javac 工作。

我已将环境变量中的 PATH 设置为

`C:\Program Files (x86)\Java\jdk1.7.0_17\bin`

我试过有和没有';' 但无济于事。

我最近在我的桌面上遇到了这个问题并添加了；工作，但不是在这种情况下。

我已经确保 javac 也确实存在于 bin 中。

任何有关修复的建议将不胜感激。

EDITS echo %PATH% 给出：

```
C:\Users\Arktri\Desktop>echo %PATH%

C:\Program Files (x86)\Intel\iCLS Client\;
C:\Program Files\Intel\iCLS Client\;
C:\Windows\system32;C:\Windows;
C:\Windows\System32\Wbem;
C:\Windows\System32\WindowsPowerShell\v1.0\;
C:\Program Files (x86)\Intel\OpenCL SDK\2.0\bin\x86;
C:\Program Files (x86)\Intel\OpenCL SDK\2.0\bin\x64;
C:\Program Files\Intel\Intel(R) Management Engine Components\DAL;
C:\Program Files\Intel\Intel(R) Management Engine Components\IPT;
C:\Program Files (x86)\Intel\Intel(R) Management Engine Components\DAL;
C:\Program Files (x86)\Intel\Intel(R) Management Engine Components\IPT;;
C:\Program Files (x86)\Java\jre7\bin 
```

确切的错误是：'javac' 不被识别为内部或外部命令、可运行程序或批处理文件。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-22T17:03:14.990

据我所见`JRE`，您`PATH`的`JDK`.

从命令提示符试试这个：

```
set PATH=%PATH%;C:\Program Files (x86)\Java\jdk1.7.0_17\bin 
```

然后再试`javac`一次 - 如果这可行，您将需要永久修改您的环境变量以`PATH`包含`JDK`。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-02-26T17:14:44.563

1.  去我的电脑；
2.  右键属性；
3.  进入高级系统设置；
4.  转到环境变量；
5.  在用户的用户变量中单击新建（顶部新按钮，而不是系统变量）；
6.  将变量名设置为：`Path`
7.  将该变量的值设置为：`C:\Program Files\Java\jdk1.7.0_76\bin`
8.  点击确定；
9.  点击确定；
10.  单击确定。

现在你准备好了。输入`javac`cmd。将显示所有 javac 选项。

**编辑：**正如@MediaMaker 指出的那样，完成上述步骤后，您需要打开一个新的命令提示符才能工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-30T03:04:55.333

最简单的方法：在 windows 搜索栏中搜索 javac.exe。然后复制并粘贴整个文件夹名称并将其添加到高级系统设置中的环境变量路径中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T16:01:34.517

我搜索了许多建议我输入 cmd 的答案：

```
set path = "%path%;c:program files\java\jdk1.7.0\bin" 
```

但这是错误的！

**正确的解决方案**是您离开“设置”并输入

```
path = %path%;c:program files\java\jdk1.7.0\bin 
```

*P/s：当然你必须用你当前的java版本文件夹替换“jdk1.7.0”文件夹。这在 win 7 32bit 上运行良好，但我认为它也适用于 win 8 - 试试吧！*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T16:56:19.653

首先打开一个 cmd.exe 会话，将目录更改为包含 javac.exe 可执行文件并运行 .\javac.exe 的“程序文件”目录。

如果这不起作用，请重新安装java。如果可行，您很可能会发现（在执行该任务时）您已经安装了 64 位`javac.exe`，或稍有不同的版本号`javac.exe`，或在不同的驱动器中等，并且在您的路径中选择正确的条目将变为儿童游戏。

*仅在 PATH 环境变量中的目录之间*使用分号，并记住，在*某些*系统中，您需要先注销并重新登录，然后才能对*所有*环境访问新的环境变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T17:04:38.720

您的 PATH 中没有 jdk1.7.0_17 - 再次检查。只有 JRE 可能不包含“javac”编译器。

此外最好设置 JAVA_HOME 变量，然后将其包含在 PATH 中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-26T23:45:35.733

这样做： 1\. 运行 CMD（WIN+R 然后输入 CMD） 2\. 输入：

设置路径=%PATH%；java安装路径\bin

将“java安装路径”替换为JDK的安装目录，如C:\Program Files (x86)\Java。一定要在JDK目录后面加上\bin，因为这里指向“javac”和“java”（BIN代表“binaries”）

这样，您可以从任何地方运行 Java 编译器。无法 CD 到 JDK 目录，因为它在 Program Files 中有一个空间，并且 DOS 不会让你 CD 到这些目录。

# titanium - 如何使用 PSPDFKit for Titanium 处理 URL 链接点击事件

> ID：15575803
> 
> 赞同：0
> 
> 时间：2013-03-22T16:51:18.037
> 
> 标签：titanium, appcelerator, titanium-modules, pspdfkit

我正在使用适用于 Titanium Mobile (3.0.2GA) 的 PSPDFKit 模块 (v2.8) 在我的应用程序中显示基于云的和本地 PDF 文件。该模块很好用（开发人员做得很好），但是我遇到了问题。

一些 PDF 文件中包含指向外部网站的链接，当它们被点击时，我会收到`No system handler registered`警告。我检查了文档和论坛/谷歌，似乎无法找到应该如何处理这些事件。

有没有人有任何想法 - 任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T21:19:44.587

现在支持外部链接，所以这可能是一个错误。在旧版本中，存在无法正确检测到诸如“Http”或“hTTp”（注意大写字母）之类的 URL 的问题。这在以后的版本（2.12 及更高版本）中已全部修复。请更新并让我知道这是否已修复或您是否仍然遇到问题。谢谢！

# php - 致命错误：在 mailtest.php 中找不到类“邮件”

> ID：15575809
> 
> 赞同：-2
> 
> 时间：2013-03-22T16:51:37.013
> 
> 标签：php, pear, html-email

当我尝试使用 php 发送邮件时，出现此错误：

```
Fatal error: Class 'Mail' not found in C:\Program Files (x86)
\Apache Software Foundation\Apache2.2\htdocs\pn\mailtest.php
on line 10 
```

这是我的PHP代码：

```
<?php
  $from="sjoseph@seisystems.com";
  $to="dianahelene@gmail.com";
  $subject="testmail";
  $host="Sei-mail01";

  $headers = array ('From' => $from, 'To' => $to, 'Subject' => $subject);

  $smtp = Mail::factory('smtp', array ('host' => $host, 'auth' => false));
  $mail = $smtp->send($to, $headers, $message);
?> 
```

为什么是

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-09T11:13:22.110

您需要在标签`require_once`之后加载 Mail 类：`<?php`

```
require_once 'Mail.php'; 
```

# delphi - 来自编译器的虚假“未声明标识符”错误？

> ID：15575810
> 
> 赞同：1
> 
> 时间：2013-03-22T16:51:37.653
> 
> 标签：delphi, compiler-errors, delphi-2007

我正在 Delphi 2007 中编写设计时包。

我决定将一些事件类型声明移到它们自己的`Events`单元中，以便它们可以在多个单元中使用。当我这样做时，编译器开始`Undeclared identifier: 'Event Name'`在最初声明这些事件的单元中抱怨。类型声明都在单元的`interface`部分中`Events`，我已将该`Events`单元添加到其他单元的使用子句中，但它就像编译器完全忽略了该`Events`单元。

当您`CTRL`+ 单击另一个单元的类型名称时，IDE 可以轻松找到声明。将鼠标悬停在类型名称上会显示其声明的单元及其参数。即使 IDE 的通常疯狂和偏执的*错误洞察*功能也没有发现问题。只有编译器抱怨它。

我尝试在另一个更简单的包项目中重现此问题以尝试隔离它，但我无法重现它。

以前有没有其他人见过这种行为，是否有解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T18:25:24.133

我已经尝试了所有*常识性*建议，例如确保文件在项目中以及在其他单元的使用条款中。

由于没有人发布解决方案，我尝试了[Ken White](https://stackoverflow.com/users/62576/ken-white)和[Wouter van Nifterick 的](https://stackoverflow.com/users/38813/wouter-van-nifterick)建议。

*   关闭项目并重新启动 IDE - 没有变化
*   在我系统上的每个驱动器中搜索 Events.pas 或 Events.dcu - 我的项目中只有一个。

**唯一**有效的，我不知道为什么，就是将 Events.pas 重命名为别的东西。我使用项目管理器重命名它并重新编译。所有的`Undeclared Identifier`错误都消失了。我将其重命名为`Events`，错误又回来了。谁知道？

出于好奇，我对系统上的每个 pas 和 inc 文件进行了文本搜索，以查看是否`Events`在某处用作标识符（我知道它不应该有所作为，但......你永远不知道）。没有。没有调用变量、类型或函数`Events`。

作为一个健全的检查，我创建了一个包含几个单元的简单项目，其中一个是`Events`用几个类型声明调用的。所有其他单位都将其包含在其使用条款中。编译器解析类型标识符没有问题。我完全不知道为什么它`Events`在我的另一个项目中卡住了。

**更新**

我终于弄清楚了为什么我会收到这个错误。我正在编写的软件包使用了开放工具 api(OTA)，因此它需要该`DesignIDE`软件包。`DesignIDE`仅作为预编译的 dcp 和 bpl 提供，因此除了作为 IDE 的扩展点公开的少数接口单元之外，所有内容都缺少源。原来编译成的*隐藏*`DesignIDE`单元之一叫做`Events`. 直到我将包迁移到更高版本的 Delphi 并开始获取`E2200 Package 'designide' already contains unit 'Events'`. 此错误消息未出现在 Delphi 2007 中。

我试图在更简单的包中隔离问题无法重现它，因为我已将`DesignIDE`包从它的依赖项中排除，没有意识到它是错误的根源。

# javascript - 在传入元素 id 的函数中使用 jQuery .hide()

> ID：15575812
> 
> 赞同：0
> 
> 时间：2013-03-22T16:51:40.820
> 
> 标签：javascript, jquery

好的，我必须承认混乱。我正在尝试构建一个简单的隐藏函数，它将接受传入的 3 个变量（类型 = id/class、ident = id/类名（不带 # 或 .）和 speed = slow/fast/400/etc... ) 当我调用该函数时，DOM 元素没有被隐藏。

```
function ElementHide(type, ident, speed) {
    switch (type) {
        case 'id':
            if (typeof speed === 'undefined') {
                $('#' + ident).hide();
            } else {
                $('#' + ident).hide(speed);
            }
            break;
        case 'class':
            break;
    }
} 
```

如果我调用相同的函数并放置它隐藏的实际对象 ID/类，它就不会使用 var ident 隐藏。

```
function ElementHide(type, ident, speed) {
    $('#tblEast').hide();
    switch (type) {
        case 'id':
            if (typeof speed === 'undefined') {
                $('#' + ident).hide();
            } else {
                $('#' + ident).hide(speed);
            }
            break;
        case 'class':
            break;
    }
} 
```

# wordpress - Wordpress Pod：模板中的索引

> ID：15575817
> 
> 赞同：0
> 
> 时间：2013-03-22T16:52:05.827
> 
> 标签：wordpress, templates, podscms

是否可以在模板中获取 pod 项目索引？例如，如果我有一个包含十个条目的 pods 变量，我是否可以制作一个模板来呈现每个条目及其在列表中的位置，或者更好的是，如果它是第一个/最后一个：

`Rendering item {@index} out of {@total} called {@title}`

注意：我的意思是正在呈现的项目组范围内的索引。不是帖子ID或其他东西。如果这不存在，那将是一个很棒的功能！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:26:38.393

使用 PHP 是可能的：

```
Total in this list: <?php echo $obj->total(); ?> 
```

或者你可以得到总数（跨所有页面，如果使用分页或限制）：

```
Total Found: <?php echo $obj->total_found(); ?> 
```

或者您可以获取循环中的当前位置（Pods 2.3 中的新功能）：

```
Current Position: <?php echo $obj->position(); ?> 
```

或者您甚至可以进行第 n 次检查（CSS 书呆子知道我在谈论 nth-child 的工作原理）：

```
<?php
    if ( $obj->nth( 'even' ) )
        echo 'even row';

    if ( $obj->nth( 'odd' ) )
        echo 'odd row';

    if ( $obj->nth( '1n+3' ) )
        echo 'you get the picture';

    if ( $obj->nth( '3n+0' ) )
        echo 'you get the picture';
?> 
```

关于 nth 的信息，它只需要与 CSS 中的 nth-child 相同的输入：http: [//www.w3schools.com/cssref/sel_nth-child.asp](http://www.w3schools.com/cssref/sel_nth-child.asp)

如果您希望这些可用作魔术标签，请在[http://pods.io/submit/提交功能请求](http://pods.io/submit/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-10T07:23:02.377

我有同样的要求。我的场景是我需要检测第一个元素，以便可以在幻灯片中显示它。在模板内部，我声明了一个全局变量：

```
 <?php global $counter; 
    if ($counter == 0) {
        $class='active'; 
        $counter++;
    } else {
        $class='';
    }?> 
```

然后我将变量 $class 回显到我想要的位置。通过这种方式，我无法完全知道有多少行，但它解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-10T05:28:31.807

在 Pods 模板中不推荐使用 PHP。现在您应该使用 Pods Frontier 插件或将 PHP 代码放入 WP 模板中。

# java - 使用二维数组的 Java 控制台输出

> ID：15575818
> 
> 赞同：1
> 
> 时间：2013-03-22T16:52:07.120
> 
> 标签：java

我正在寻找有关如何从左到右打印二维数组的见解，而不是用换行符在页面上级联。

我为本科 AI 课程编写了一个简单的程序，可以解决那个 9 块小游戏。

```
public void printNode(){
    for(int i = 0; i < 3; i ++){
        System.out.printf("[ ");
        for(int k = 0; k < 3; k++){
            System.out.printf(" " + state[i][k] + " ");
        }
        System.out.printf("]\n");
    }
} 
```

这可以毫无问题地打印二维数组。

但是我正在寻找一种从左到右打印数组的方法，这样我就不必提交 50 多页的转换来证明我的程序有效。以前有没有人解决过这个问题？

```
[ 1 2 3 ] [1 2 3]
[ 8 0 4 ] [8 0 4]
[ 7 6 5 ] [7 6 5] 
```

这就是我想要创造的效果。转换的解决路径是一系列指向链的指针。我的每个节点都有一个指向其祖先的指针。所以我可以轻松地按照指针返回并将它们全部打印出来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:56:52.957

我不打算在这里讨论实现细节，但这里有一些你可以采取的步骤

*   打印每个矩阵的所有顶行，所以你会有一个字符串

> [ 1 2 3 ] [1 2 3]

*   添加一个换行符，并打印所有矩阵的下一行。

> [ 1 2 3 ] [1 2 3]
> [ 8 0 4 ] [8 0 4]

*   继续直到打印整个矩阵。

> [ 1 2 3 ] [1 2 3]
> [ 8 0 4 ] [8 0 4]
> [ 7 6 5 ] [7 6 5]

基本上你遍历每个矩阵等于它们的高度。如果他们有不同的高度，你可以开始跳过较短的，并在它的地方留一个空白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:59:10.853

```
public void printTwoNodes(int arr[], int arr2[]){
    for(int i = 0; i < 3; i ++){
        System.out.printf("[ ");
        for(int k = 0; k < 3; k++){
            System.out.printf("" + arr[i][k] + " ");
        }
        System.out.printf("]");
        System.out.printf("[ ");
        for(int j = 0; j < 3; j++){
            System.out.printf("" + arr2[i][j] + " ");
        }
        System.out.printf("]\n");
    }
} 
```

可以而且应该改进

# backbone.js - 骨干事件不起作用

> ID：15575820
> 
> 赞同：7
> 
> 时间：2013-03-22T16:52:09.797
> 
> 标签：backbone.js

出于某种原因，我不知道为什么我在主干视图中的事件不起作用。我试图谷歌一些答案，但我没有找到任何对我有帮助的东西。

基本上，我的代码是这样的：

# 骨干：

```
var ViniView = Backbone.View.extend({
    el: $('.container'),
    events: {
        "click .clickme" : "render"
    },
    render: function() {
        alert("please, work");
    }
});

new ViniView; 
```

# HTML

```
<div class="container">
    <button class="clickme">
    test
    </button>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T17:05:26.683

[你的例子在这个小提琴](http://jsfiddle.net/ctasims/A96gX/1/)中对我来说很好。

但是，正如 explunit 所指出的，您`el`应该引用一个元素，而不是一个 jQuery 对象。`$el`照顾那个。根据[文档](http://backbonejs.org/#View-el)：

```
All views have a DOM element at all times (the el property), whether they've already been inserted into the page or not. 
```

检查您是否正确加载了 Jquery、Underscore 和 Backbone 脚本（按此顺序）。还要确保在页面准备就绪后执行脚本，而不是在 DOM 完成加载之前执行（导致您的视图不附加到任何内容）。

# iphone - 如何将 UItextfield 属性分配给另一个 UItextfield

> ID：15575822
> 
> 赞同：0
> 
> 时间：2013-03-22T16:52:15.270
> 
> 标签：iphone, ios, objective-c, uitableview

我想将一个`UITextField`属性转移到另一个`UITextField`。我该怎么做？

这是我的完整场景：

我创建了一个自定义单元格，其中有一个 UITextField。

现在，当我在 UITableView 中使用这个 UITextField 时，我想分配已经存在的

UITextField 的属性到此单元格的 UITextField。我试过

```
cell.myCustomTextField = myAlreadyCreatedTextField; 
```

还尝试转移单个属性，例如

```
cell.myCustomTextField.borderStyle = myAlreadyCreatedTextField.borderStyle; 
```

但这也没有用。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:27:30.207

如果您需要多个具有相同属性的 UITextField，您可以像这样创建一个初始化程序。

```
myField = [self fieldWithLabel:@"Placeholder" withTextField:myField withFrame:CGRectMake(0,0,260,45) withKeyboard:UIKeyboardTypeNumberPad]; 
```

//

```
-(UITextField *)fieldWithLabel:(NSString *)name withTextField:(UITextField *)field
                     withFrame:(CGRect)frame withKeyboard:(UIKeyboardType)keyboard
{
    CGRect fieldFrame = frame;
    field = [[UITextField alloc] initWithFrame:fieldFrame];
    field.placeholder = name;
    field.autocorrectionType = UITextAutocorrectionTypeNo;
    field.textAlignment=UITextAlignmentLeft;
    field.userInteractionEnabled = YES;
    field.enabled = YES;
    field.enablesReturnKeyAutomatically= NO;
    field.clearsOnBeginEditing = NO;
    field.delegate = self;
    field.returnKeyType = UIReturnKeyDone;
    field.keyboardType = keyboard;

    return field;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:55:57.810

**IN SHORT：**不能将一个控件的属性分配给另一个控件。因为 Apple/iOS 不提供此类功能。

但是您可以通过以下方式获取一个到另一个的**文本**`UITextField``UITextField`

```
textField1.text = textField2.text; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T16:56:08.960

控件（如 NSTextField）每个都有一个关联的单元格，其中包含控件的显示属性。NSCell 及其子类实现了复制，因此您可以复制单元格而不是视图（不支持 NSCopying）。

或者，NSViews 支持 NSCoding，所以一般来说，如果您有需要复制的视图或子类，一种方法是将其存档，然后将其取消存档，以获取您可能需要的任何“副本”。

从[源](http://www.cocoabuilder.com/archive/cocoa/175001-how-can-copy-duplicate-an-existing-nstextfield.html)。

# zend-framework2 - （为什么） Zend\Db\ResultSet 是 TableGateway 功能吗？

> ID：15575825
> 
> 赞同：0
> 
> 时间：2013-03-22T16:52:32.930
> 
> 标签：zend-framework2, zend-db, tablegateway

Zend Framework 2 文档[`Zend\Db\TableGateway\TableGateway`](http://framework.zend.com/manual/2.1/en/modules/zend.db.table-gateway.html#tablegateway-features)说：

> [Zend\Db\TableGateway\TableGateway] 构造函数可以采用**3 种不同形式**的特征：作为单个**特征对象**、作为**FeatureSet 对象**或作为**特征对象数组**。

`TableGateway`构造函数实际上[检查](https://github.com/zendframework/zf2/blob/master/library/Zend/Db/TableGateway/TableGateway.php#L43)类型。

因此，`TableGateway`构造函数的第四个参数需要兼容`Feature\AbstractFeature`或兼容对象`Feature\FeatureSet`数组。`Feature\AbstractFeature`

在[入门教程的模型部分中，](http://framework.zend.com/manual/2.1/en/user-guide/database-and-models.html#using-servicemanager-to-configure-the-table-gateway-and-inject-into-the-albumtable)创建了一个类型的对象，`TableGateway`并获得`Zend\Db\ResultSet\ResultSet`第四个参数：

```
class Module
{
    // getAutoloaderConfig() and getConfig() methods here

    // Add this method:
    public function getServiceConfig()
    {
        return array(
            'factories' => array(
                ...
                'AlbumTableGateway' => function ($sm) {
                    $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                    $resultSetPrototype = new ResultSet();
                    $resultSetPrototype->setArrayObjectPrototype(new Album());
                    return new TableGateway('album', $dbAdapter, null, $resultSetPrototype);
                },
            ),
        );
    }
} 
```

`ResultSet`不是一个`instanceof` `AbstractFeature`。但它有效。

它是如何工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:09:26.323

第三**个参数**`$feature`，见**[`TableGateway#31`](https://github.com/zendframework/zf2/blob/master/library/Zend/Db/TableGateway/TableGateway.php#L31)**

 **第四**个参数**需要兼容[`ResultSetInterface`](https://github.com/zendframework/zf2/blob/master/library/Zend/Db/ResultSet/ResultSetInterface.php)**

# python - 如何按任务名称检查和取消 Celery 任务

> ID：15575826
> 
> 赞同：37
> 
> 时间：2013-03-22T16:52:36.810
> 
> 标签：python, redis, celery

我使用 Celery (3.0.15) 和 Redis 作为代理。

是否有一种直接的方法来查询 Celery 队列中存在的具有给定名称的任务数？

而且，作为后续，有没有办法取消 Celery 队列中存在的所有具有给定名称的任务？

我已经阅读了[监控和管理指南](http://docs.celeryproject.org/en/latest/userguide/monitoring.html)，但没有找到解决方案。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-26T16:18:03.667

```
# Retrieve tasks
# Reference: http://docs.celeryproject.org/en/latest/reference/celery.events.state.html
query = celery.events.state.tasks_by_type(your_task_name)

# Kill tasks
# Reference: http://docs.celeryproject.org/en/latest/userguide/workers.html#revoking-tasks
for uuid, task in query:
    celery.control.revoke(uuid, terminate=True) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-09-03T18:39:30.517

有一个问题是较早的答案没有解决的，如果人们不知道的话，可能会让他们失望。

在已经发布的那些解决方案中，我会使用[Danielle 的](https://stackoverflow.com/a/29788081/1906307)一个小修改：我会将任务导入我的文件并使用它的`.name`属性来获取任务名称以传递给`.tasks_by_type()`.

```
app.control.revoke(
    [uuid for uuid, _ in
     celery.events.state.State().tasks_by_type(task.name)]) 
```

**但是，此解决方案将忽略那些已安排为将来执行的任务。**就像一些评论其他答案的人一样，当我检查`.tasks_by_type()`返回的内容时，我有一个空列表。事实上，我的队列是空的。但我知道有计划在未来执行的任务，*这些*是我的主要目标。我可以通过执行看到它们，`celery -A [app] inspect scheduled`但它们不受上面代码的影响。

我设法通过这样做撤销了计划任务：

```
app.control.revoke(
    [scheduled["request"]["id"] for scheduled in
     chain.from_iterable(app.control.inspect().scheduled()
                         .itervalues())]) 
```

`app.control.inspect().scheduled()`返回一个字典，其键是工作人员名称，值是调度信息*列表*（因此，需要`chain.from_iterable`从 导入`itertools`）。任务信息在`"request"`调度信息字段中，`"id"`包含任务id。请注意，即使撤销后，计划任务仍会显示在计划任务中。被撤销的计划任务不会从计划任务列表中删除，直到它们的计时器到期或直到 Celery 执行一些清理操作。（重新启动工人会触发此类清理。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-22T04:57:36.267

您可以在一个请求中执行此操作：

```
app.control.revoke([
    uuid
    for uuid, _ in
    celery.events.state.State().tasks_by_type(task_name)
]) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-01-09T18:05:00.503

和 Celery 一样，这里没有一个答案对我有用，所以我做了我平常*的*事情，并拼凑了一个直接检查 redis 的解决方案。开始了...

```
# First, get a list of tasks from redis:
import redis, json

r = redis.Redis(
    host=settings.REDIS_HOST,
    port=settings.REDIS_PORT,
    db=settings.REDIS_DATABASES['CELERY'],
)
l = r.lrange('celery', 0, -1)

# Now import the task you want so you can get its name
from my_django.tasks import my_task

# Now, import your celery app and iterate over all tasks 
# from redis and nuke the ones that have a matching name.
from my_django.celery_init import app
for task in l:
     task_headers = json.loads(task)['headers']
     task_name = task_headers["task"]
     if task_name == my_task.name:
         task_id = task_headers['id']
         print("Terminating: %s" % task_id)
         app.control.revoke(task_id, terminate=True) 
```

请注意，以这种方式撤销可能不会撤销预取的任务，因此您可能不会立即看到结果。

此外，此答案不支持优先任务。如果您想修改它来做到这一点，您将需要[我的其他答案中的一些技巧，即破解 redis](https://stackoverflow.com/a/43420719/64911)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-26T16:20:37.743

它看起来像`flower`提供监控：

[https://github.com/mher/flower](https://github.com/mher/flower)

> 使用 Celery Events 进行实时监控
> 
> 任务进度和历史 能够显示任务详细信息（参数、开始时间、运行时间等） 图形和统计数据 远程控制
> 
> 查看工作器状态和统计信息 关闭和重新启动工作器实例 控制工作器池大小和自动缩放设置 查看和修改工作器实例使用的队列 查看当前正在运行的任务 查看计划任务（ETA/倒计时） 查看保留和撤销的任务 应用时间和速率限制 配置查看器 撤销或终止任务 HTTP API
> 
> OpenID 身份验证

# dynamics-crm-2011 - Microsoft Dynamics CRM Online 报表布局

> ID：15575830
> 
> 赞同：1
> 
> 时间：2013-03-22T16:52:50.343
> 
> 标签：dynamics-crm-2011, reportbuilder

我必须在 Microsoft CRM 中在线创建报告。

要求：

1.  发票（从新页开始，1 页）
2.  可选附录 A（从新页开始，1 页或更多页）
3.  可选附录 B（从新页开始，1 页或更多页）

我构建的所有东西都还没有产生预期的结果。

仅发票报告没有问题，但是当我在报告中同时包含附录 A 和 B 时，打印布局出错。不包括分页符。布局被移动，等等，等等。

发票是在按 InvoiceID 分组的主 Tablix 中构建的。附录 A 和 B 构建在单独的 Tablix 中，并连续包含在主表中。

有没有人建议如何解决这个问题？

谢谢！

# ant - TFS 不会从相对路径发布 ANT 测试结果

> ID：15575831
> 
> 赞同：4
> 
> 时间：2013-03-22T16:52:56.873
> 
> 标签：ant, tfs, junit, continuous-integration

我已经使用 Team Foundation Server 2010 为 Eclipse 项目及其关联的单元测试创​​建了一个 ANT 构建。但是，我无法让它将单元测试的结果发布到 TFS。

build.xml 文件本身似乎可以正常运行，因为它构建了项目并创建了一个 xml 结果文件。问题似乎出在 TFSBuild.proj 和将测试结果发布到 TFS 中。

使用以下代码，构建成功执行并将结果发布到 TFS，如我所料：

```
<ItemGroup>
  <AntBuildFile Include="$(SolutionRoot)/StockMoves/build.xml">
    <Targets></Targets>
    <Properties>BinariesRoot=$(BinariesRoot);BuildDefinitionName=$(BuildDefinitionName);BuildDefinitionUri=$(BuildDefinitionUri);BuildDirectory=$(BuildDirectory);BuildNumber=$(BuildNumber);DropLocation=$(DropLocation);LogLocation=$(LogLocation);SourceGetVersion=$(SourceGetVersion);TestResultsRoot=$(TestResultsRoot);TeamProject=$(TeamProject);WorkspaceName=$(WorkspaceName);WorkspaceOwner=$(WorkspaceOwner)</Properties>
    <Lib></Lib>
  </AntBuildFile>

  <JUnitLogFiles Include="$(SolutionRoot)/StockMoves/test/TEST-unittest.TestSuite.xml" />
</ItemGroup> 
```

但是，当尝试更改 JUnit 的路径时：

```
<JUnitLogFiles Include="$(SolutionRoot)/**/TEST-*.TestSuite.xml" /> 
```

然后不再公布测试结果。我知道这种格式有效，因为我已在其他版本中成功使用它，但这个格式让我难过。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:06:11.450

看来我已经解决了这个问题！

似乎无论出于何种原因，在运行构建时相关文件必须已经存在。我添加了一个与我的测试结果生成的文件同名的空 xml 文件，现在结果已发布到 TFS。

# python - python和windows双反斜杠

> ID：15575832
> 
> 赞同：-2
> 
> 时间：2013-03-22T16:52:58.993
> 
> 标签：python

我在本地机器上运行了一个程序，它使用了一些文件。我使用以下方法创建对文件的引用：`os.path.join( tempfile.gettempdir(), 'filename.txt' )`

之后，我正在运行一个程序，该程序接受一些参数`--log-file filepath`，其中文件路径是我刚刚在上面解释的文件之一。

在我的机器上，python 为路径创建了反斜杠，但没有创建双反斜杠，并且程序抱怨，因为它被认为是转义字符，应该是双反斜杠。

是否有任何标准方法可以确保我在 python 中获得带有双反斜杠的工作路径？我可以使用正则表达式，但我更喜欢类似于`os.`提供的东西。也许我错过了一些东西。

我正在使用以下方式调用程序`subprocess.Popen`：

`self._proc = subprocess.Popen( command.split( ' ' ) )`

`command`类似的东西在哪里`pcix.exe --log-file file_path`

此外，在我的控制台上运行测试表明我的 python 不会为路径生成双反斜杠：

```
>>> print os.path.join(tempfile.gettempdir(), "test.txt")
c:\users\manilo~1\appdata\local\temp\test.txt 
```

省略 print 命令会产生相同的路径：

```
>>> os.path.join(tempfile.gettempdir(), "test.txt")
c:\users\manilo~1\appdata\local\temp\test.txt 
```

知道为什么吗？

PS我正在运行的平台是`CPython`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-22T17:13:47.527

尝试：

```
print os.path.join(tempfile.gettempdir(), "test.txt").replace('\\\\','\\\\\\\\') 
```

# c++ - std::sort c++ 什么是二进制函数

> ID：15575833
> 
> 赞同：-3
> 
> 时间：2013-03-22T16:52:59.250
> 
> 标签：c++, function, sorting, binary, std

我正在阅读 C++ 参考网站。

我不明白这是什么意思？给你解释一下它的意思和例子

comp 二元函数，接受范围内的两个元素作为参数，并返回一个可转换为 bool 的值。返回的值指示作为第一个参数传递的元素是否被认为在其定义的特定严格弱排序中位于第二个之前。该函数不得修改其任何参数。这可以是函数指针或函数对象。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T16:57:56.177

关于功能：

*   **Nullary** - 不接受任何参数，例如`void nullary()`
*   **一元**- 接受一个参数，例如`void unary(int)`
*   **二进制**- 接受两个参数，例如`void binary(int, float)`
*   **三元**- 接受三个参数，例如`void ternary(int, float, char)`
*   **N-ary** - 接受 N 个参数

所以二进制函数是一个接受两个参数的函数，例如`void foo(int x, float y);`. 传递给的比较函数`std::sort`应该是一个二进制函数，它从您正在排序的序列中获取两个元素并返回一个`bool`. 例如，如果您正在对 的序列进行排序`X`，则该函数应具有签名`bool compare(const X&, const X&);`。

这是一个示例用法：

```
bool less_than(const int& a, const int& b)
{
  return a < b;
}

int main()
{
  std::vector<int> v = {5, 1, 2, 4, 3};
  std::sort(v.begin(), v.end(), less_than);
} 
```

这里，`less_than`是一个二元函数，如果第一个参数小于第二个，则返回 true。这正是这样`std::less`做的。的强大之`std::sort`处在于它允许您提供*任何*返回的二进制函数，`bool`并且它将使用它进行排序。

# spring-mvc - Spring MVC 在独立 tomcat 中抛出意外的“IllegalStateException: Ambiguous mappng found”

> ID：15575839
> 
> 赞同：0
> 
> 时间：2013-03-22T16:53:05.457
> 
> 标签：spring-mvc, spring-tool-suite

我注意到我的 Spring MVC 应用程序中有一个奇怪的行为：

*   我的请求映射都是唯一的，我很肯定没有模棱两可的映射。**我可以在 STS 的嵌入式 tomcat 中正常运行我的应用程序**。
*   但是，当我将 jar 放入**独立的 tomcat 中时，我系统地得到一个模棱两可的映射错误**，如下所示。

堆栈跟踪：

```
IllegalStateException: Ambiguous mapping found. Cannot map 'preferenceController' bean method 
public java.lang.String com.bignibou.controller.PreferenceController.modifyEmail(com.bignibou.controller.helpers.EmailInfo,org.springframework.validation.BindingResult,org.springframework.ui.Model)
to {[/preferences/email],methods=[POST],params=[],headers=[],consumes=[],produces=[text/html],custom=[]}: There is already 'preferencesController' bean method
public java.lang.String com.bignibou.controller.PreferencesController.modifyEmail(com.bignibou.controller.helpers.EmailInfo,org.springframework.validation.BindingResult,org.springframework.ui.Model) mapped. 
```

有没有人见过这个问题？仅供参考，我运行 tomcat 7.0.35 和 spring 3.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:03:25.027

看起来你有两个不同的类：`PreferenceController`并且`PreferencesController`使用相同的方法。只需删除其中一种`modifyEmail`方法，看看它是否有效。

# android - 错误是示例 XML - 没有看到问题？

> ID：15575840
> 
> 赞同：0
> 
> 时间：2013-03-22T16:53:07.830
> 
> 标签：android, xml, android-manifest

我一直在尝试从这个网站运行示例代码：http: [//www.apriorit.com/our-company/dev-blog/227-handle-sms-on-android](http://www.apriorit.com/our-company/dev-blog/227-handle-sms-on-android)

我下载了代码，将其发布到 eclipse 中，但我在 android manifest 中遇到了错误。

这是我得到错误的地方：

```
<?xml version="1.0" encoding="UTF-8"?>
-
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="org.secure.sms"
    android:versionCode="1"
    android:versionName="0.1" > 
```

这是两个错误，紧接着说“序言中不允许内容”

任何想法这些行有什么问题？

这是完整的清单以防万一：

```
<?xml version="1.0" encoding="UTF-8"?>
-
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="org.secure.sms"
    android:versionCode="1"
    android:versionName="0.1" >

    <uses-sdk android:minSdkVersion="8" />

    <uses-permission android:name="android.permission.WRITE_SMS" />
    <uses-permission android:name="android.permission.READ_SMS" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
 -
    <application
        android:icon="@drawable/icon"
        android:label="@string/app_name" >
 -
        <activity
            android:name=".SecureMessagesActivity"
            android:label="@string/app_name" >
 -
             <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
 -
        <receiver
            android:name=".SmsReceiver"
            android:exported="true" >
 -
            <intent-filter android:priority="999" >
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            </intent-filter>
        </receiver>
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:59:37.377

看来您已经复制粘贴了导致添加违反 xml 语法的额外连字符的代码。这就是你得到那个错误的原因`Content is not allowed in prolog`。删除连字符应该可以解决您的问题。顺便说一句，我建议您下载源代码并将其直接导入 eclipse，而不是通过这种方式复制粘贴每个代码片段`File--> New--> Android Project From existing code --> browsing the downloaded source file.`

# image - 如何在具有不同颜色图的另一个图像上“绘制”图像？

> ID：15575844
> 
> 赞同：3
> 
> 时间：2013-03-22T16:53:24.660
> 
> 标签：image, matlab

我有两张图像，一张 100x100 我想以灰度绘制，一张 20x20 我想使用另一个颜色图绘制。后者应叠加在前者之上。

这是我目前的尝试：

```
A = randn(100);
B = ones(20);
imagesc(A);
colormap(gray);
hold on;
imagesc(B);
colormap(jet); 
```

这有几个问题：

1.  我无法更改较小图像的偏移量。（它们总是共享左上角的像素。）
2.  它们具有相同的颜色图。（第二个`colormap`改变所有像素的颜色。）
3.  像素值在合成图像上进行归一化，因此如果第二张图像引入新的极值，则第一张图像会发生变化。两个图像的缩放比例应该是分开的。

我怎样才能解决这个问题？

我想要一个与此类似的效果，除了我的彩色覆盖是矩形而不是微弱的：

![在此处输入图像描述](../Images/30dd092c7aabdeb736a46a96be34f115.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T17:12:31.523

只需更改它，以便为 A 传递完整且正确的颜色矩阵（即 100x100x3 矩阵），而不是让它决定：

```
A = rand(100); % Using rand not randn because image doesn't like numbers > 1
A = repmat(A, [1, 1, 3]);
B = rand(20); % Changed to rand to illustrate effect of colormap
imagesc(A);
hold on;
Bimg = imagesc(B);
colormap jet; 
```

要设置 B 的图像在其父坐标区中的位置，您可以使用其 XData 和 YData 属性，当此代码完成时，它们都设置为 [1 20]。第一个数字指定图像中最左边/最高点的坐标，第二个数字指定图像中最右边/最低点的坐标。如果图像与原始尺寸不匹配，它将拉伸图像。

例子：

```
xpos = get(Bimg, 'XData');
xpos = xpos + 20; % shift right a bit
set(Bimg, 'XData', xpos); 
```

# javascript - 如何在不连接的情况下获取 FB id

> ID：15575848
> 
> 赞同：0
> 
> 时间：2013-03-22T16:53:30.510
> 
> 标签：javascript, facebook, iframe, connect

我知道起初这听起来很邪恶，但我根本不想这样做。我只是想获取用户的 Facebook ID，而无需连接到 FB。我基本上想通过他们的社交 ID 来区分我网站上的用户。

如果您使用 facebook 的评论功能，在没有连接的情况下，他们有您的 ID 和图片。图片很简单，因为它只是一个URL，但是那个ID，他们是怎么得到的呢？

显然他们使用 iFrame，也许故事就这样结束了。由于跨域脚本，我无法进入该 iFrame 来获取 ID。这是一个如此接近却又如此遥远的案例。我可以通过开发工具到达那里，但我无法通过 JS 获得该 ID。

所以问题是，有没有人知道一种无需先连接到 facebook 就可以获取用户 facebook ID 的方法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:01:08.387

抱歉，您不能这样做，因为 Facebook 不会在未经用户明确同意的情况下公开这些数据。

# python - python搜索和替换

> ID：15575850
> 
> 赞同：0
> 
> 时间：2013-03-22T16:53:41.387
> 
> 标签：python, string, replace

我有一个包含我想替换的名称的文本字符串的文件。我有另一个包含两列的文件，A 和 B 包含名称。A 列包含与字符串（文件 1）中相同的名称。我基本上想用 B 列中的名称替换这些名称。我尝试过使用 Python，但我仍然是初学者，无法完成它。任何指针将不胜感激。

```
文件 1               
NameA.....NameB....NameC....等

文件2                 
AB    
姓名A 姓名D         
姓名B 姓名E          
名称C 名称F

```

想;

```
文件 1                       
NameD....NameE....NameF....等

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:40:53.800

```
with open('File1', 'r') as fd:
    keys = fd.read().split()

name_map = {}

with open('File2', 'r') as fd:
    for line in fd.readlines():
        key, value = line.split()
        name_map[key] = value

with open('File1', 'w') as fd:
    new_names = []
    for k in keys:
        new_names.append(name_map[k])
    fd.write(" ".join(new_names)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T17:10:12.890

```
#read filrst file as list
with open("file1") as f:
    names1=f.read().strip().split();

#read file2 as dictionary
with open("file2") as f:  
    names2=dict(i.strip().split() for i in  f.readlines())

#write replacement in file3
with open("file3","w") as f:
    f.write(" ".join(names2[i] for i in names1)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T13:43:49.037

感谢您的回复。虽然，没有一个真的不能正常工作。可能是由于 file1 中字符串的性质（纽威克格式）。这是我最初的工作......可能不太好。虽然，如果我能让替换功能起作用，它可能会成功..？

```
import re

LineString = open("file1.txt", "r").read()

pattern = re.compile('\d+OTU\_\d+\_\w+\_\d+')
words = pattern.findall(LineString)

colA = []
colB = []

with open("file2.txt", "r") as f:
for line in f:
    parts = line.split()
    if len(parts) > 0:
        colA.append(parts[0])   
    if len(parts) > 1:
        colB.append(parts[1])

#Doesnt work
if words == colA:
LineString.replace(colA, colB) 
```

文件1中的字符串看起来像：(((((((('1OTU_1_769_wint_446':0.00156420,'1OTU_1_822_wint_445':0.00000000)0.5700:0.00156410,'1OTU_1_851_wint_454':0.00000000)等...)

单词，colA，colB 看起来像：例如 1OTU_1_769_wint_446

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T17:38:28.643

我认为你需要这样的代码：

```
File1 = open("File1", "r")   
File2 = open("File2", "r")   
File3 = open("File3","w")

for line in File2:

    A, B  = line.strip().split('\t')

    for line_string in File1:

        line_string.replace(A,B)

        File3.write('%s\n' % line_string)

File3.close() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T17:02:11.520

我会考虑使用 RegEx（Python 中的 re 模块）。这将允许您创建可以搜索特定文本模式的函数。如果您正确构造 re.compile() 函数和 re.search() 函数，则可以使用 group() 函数提取文本的选择“组”。该库非常广泛，因此这里是文档的链接：

[http://docs.python.org/2/library/re.html](http://docs.python.org/2/library/re.html)

我还会查看一个在线教程，例如这个：

[http://www.youtube.com/watch?v=DRR9fOXkfRE](http://www.youtube.com/watch?v=DRR9fOXkfRE)

# wpf - Grid和StackPanel，哪个性能更好？

> ID：15575854
> 
> 赞同：20
> 
> 时间：2013-03-22T16:53:48.417
> 
> 标签：wpf, windows, windows-phone-8

让我们阅读这些代码，我在 Windows Phone 8 项目中定义了两个类似的 UserControl，我真的想知道它们中的哪个更好。我检查了配置文件，似乎它们几乎相同。

UserControl 1，使用网格的属性来设计我的布局。

```
<Grid x:Name="LayoutRoot" Background="{StaticResource PhoneChromeBrush}" Height="108">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"></RowDefinition>
        <RowDefinition Height="Auto"></RowDefinition>
    </Grid.RowDefinitions>

    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"></ColumnDefinition>
        <ColumnDefinition Width="*"></ColumnDefinition>
    </Grid.ColumnDefinitions>

    <Rectangle Grid.RowSpan="2" Grid.Row="0" Height="108" Width="54" Fill="Blue"></Rectangle>
    <TextBlock Grid.Row="0" Grid.Column="1" Text="Caption" Style="{StaticResource PhoneTextExtraLargeStyle}"></TextBlock>
    <TextBlock Grid.Row="1" Grid.Column="1" Text="URLURLURLURLURLURL" Style="{StaticResource PhoneTextSmallStyle}"></TextBlock>
</Grid> 
```

UserControl 2，使用 StackPanel 来设计我的布局。

```
<Grid x:Name="LayoutRoot" Background="{StaticResource PhoneChromeBrush}" Height="108">
    <StackPanel Orientation="Horizontal">
        <Rectangle Height="108" Width="54" Fill="Red"></Rectangle>
        <StackPanel Orientation="Vertical">
            <TextBlock Text="Caption" Style="{StaticResource PhoneTextExtraLargeStyle}"></TextBlock>
            <TextBlock Text="URLURLURLURLURLURL" Style="{StaticResource PhoneTextSmallStyle}"></TextBlock>
        </StackPanel>
    </StackPanel>
</Grid> 
```

看起来基本布局是一样的。但是当我使用 XAML Spy 分析可视化树时，UserControl 1 的节点较少，但它会花费更多的内存。为什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-22T17:02:58.953

您可能对这个问题的答案感兴趣：[在渲染时间和性能方面，面板按什么顺序最有效？](https://stackoverflow.com/q/9946811/302677)

简短的回答是这取决于面板有多少个子元素，以及这些元素的大小和位置。但在大多数情况下，a`StackPanel`将比 a 更有效，`Grid`因为它具有更快的测量和排列通道。

引用已[接受的答案](https://stackoverflow.com/a/9996707/302677)：

> **网格**
> 
> > 定义由列和行组成的灵活网格区域。
> 
> 如果使用按比例调整大小或自动调整大小，这可能是性能最密集的面板。计算子项大小可以是项的本机大小和网格指定的布局的复杂组合。布局也是所有面板中最复杂的。测量传递的性能慢到中等，排列传递的性能慢到中等。
> 
> **堆栈面板**
> 
> > 将子元素排列成可以水平或垂直定向的单行。
> 
> StackPanel 使用与其方向相反的方向上的本机或相对大小以及在其方向上的本机大小来测量其子项（对齐在此方向上不做任何事情）。这使其成为该领域的中级执行者。安排通行证很简单，只是按顺序排列项目。可能是本次传球的第二好表现。测量传递的中等性能和布局传递的快速性能。

同样关于内存消耗，两个对象都不同，占用的内存量也不同，并且 a `Grid`has `RowDefinitions`and `ColumnDefinitions`，所以它实际上包含的对象比你的要多`StackPanel`

# mysql - MySQL - 子查询条件

> ID：15575855
> 
> 赞同：1
> 
> 时间：2013-03-22T16:53:54.140
> 
> 标签：mysql, sql, sql-update, conditional-statements

我有 2 张桌子：

`tbl_projects` `tbl_projects_tasks`

这是一个简单的任务管理界面。并将任务分配给项目。我在任务表中还有一个列，称为`percentage`，它是一个整数字段。我确实保留它`0`- `100`，自然是出于百分比原因。

此外，在 Projects 表中，我还有另一列名为：`projectpercentagedone`

此列平均与项目相关的所有任务。

这是进行平均的查询（在我的示例中使用单个 projectid）：

```
UPDATE `tbl_projects` SET
`totaltasks` = (SELECT COUNT(taskid) AS T1 FROM `tbl_projects_tasks` WHERE projectid = 10),
`projectpercentagedone` = (SELECT AVG(percentage) AS T2 FROM `tbl_projects_tasks` WHERE projectid = 10) 
WHERE projectid = 10 
LIMIT 1 
```

出于更高级的设置原因，我想更进一步。

如果总 AVG 为 100%，我想将from更新`projectvisible`为。`tbl_projects``1``0`

当然，我可以在分裂中进行 2 次查询。但我确信单个查询会更酷。这种类型的条件语句略高于我的经验。我正在寻找一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:58:50.777

您可以简单地加入`tbl_projects`一个子查询，对`tbl_projects_tasks`.

```
UPDATE  tbl_projects a
        INNER JOIN
        (
            SELECT  projectid, 
                    COUNT(taskID) totalCount,
                    AVG(percentage) avgPercent
            FROM    tbl_projects_tasks
            GROUP   BY projectid
        ) b ON  a.projectid = b.projectid
SET     a.totaltasks = b.totalCount,
        a.projectpercentagedone = b.avgPercent,
        a.projectvisible = IF(b.avgPercent = 100, 0, 1)
WHERE   a.projectid = 10 
```

# c++ - C ++中没有虚拟的多态性用于多级继承

> ID：15575869
> 
> 赞同：2
> 
> 时间：2013-03-22T16:54:39.470
> 
> 标签：c++, templates, polymorphism, virtual, function-pointers

我有一种情况，我需要在没有 vtable 的情况下实现多态性。这是我想要做的

*   有一个类层次结构：C 扩展 B，B 扩展 A
*   这个想法是在A中声明一个函数指针，B和C的构造函数将它们对应的方法分配给A中的函数指针
*   使用下面的代码，我能够实现 C 类的多态性，但不能实现 B 类的多态性。

显然我在这里遗漏了一些东西。我不确定这是否可能。非常感谢对此问题的任何见解。

我可以用下面的代码做到这一点

```
A<C> *c = new C();
c->BasePrint(); //Reached C's Print 
```

但不是这个

```
// A<B> *b = new B();
// b->BasePrint(); //Intentionally incorrect to demonstrate the problem. 
```

有什么办法可以做到这一点？

```
template <typename T>
class A
{
public:
    typedef void (T::*PrintFn)(void);
protected:
    PrintFn printFn;
public:
    void BasePrint()
    {
        if(printFn)
            (((T*)this)->*printFn)();
    }
};

template <typename T>
class B : public A<T>
{
public:
    B()
    {
        printFn = &B::Print;
    }

    void Print()
    {
        //Print B
    }
};

class C : public B<C>
{
public:
    C()
    {
        printFn = &C::Print;
    }

    void Print()
    {
        //Print C
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:01:45.943

您没有为 B 指定模板参数：

```
A<B> *b = new B(); 
```

与其声明相反：

```
template <typename T>
class B : public A<T> 
```

您应该使用以下几行内容：

```
A<B<X>> *b = new B<X>(); 
```

`X`作为非模板类​​型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T17:02:14.123

> 我可以用下面的代码[...]做到这一点，但不是这个：

```
 A<B> *b = new B();
    b->BasePrint(); //Intentionally incorrect to demonstrate the problem. 
```

好吧，这里的问题是这`B`是一个类*模板*，而您没有实例化它。它与多态性或 vtable 没有太大关系。类模板只是通过向类型传递参数来实例化类型的蓝图（实际上是*模板），但它**本身*不是类型。

实例化时应该使用一些模板参数`B`。例如：

```
A<C>* b = new B<C>();
b->BasePrint(); 
```

你应该看到这个调用`B::Print()`。这是一个[活生生的例子](http://liveworkspace.org/code/N6QE5%2414)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T18:39:30.560

```
#include <iostream>
#include <typeinfo>

struct own_type {};

template<template<typename T>class CRTP, typename In, typename D>
struct DoCRTP: CRTP<In> {};
template<template<typename T>class CRTP, typename D>
struct DoCRTP<CRTP, own_type, D>: CRTP<D> {};

template<typename D>
struct A {
   D* self() { return static_cast<D*>(this); }
   D const* self() const { return static_cast<D*>(this); }
   A() {
      std::cout << "A<" << typeid(D).name() << ">\n";
      self()->print();
   }
};

template<typename T=own_type>
struct B:DoCRTP<A, T, B<T>> {
   B() {
      std::cout << "B<" << typeid(T).name() << ">\n";
   }
   void print() { std::cout<<"I am a B\n"; }
};

template<typename T=own_type>
struct C:DoCRTP<B, T, C<T>> {
   C() {
      std::cout << "C<" << typeid(T).name() << ">\n";
   }
   void print() { std::cout<<"I am a C\n"; }
};

void test() {
   std::cout << "Instance of B<>:\n";
   B<> b;
   std::cout << "Instance of C<>:\n";
   C<> c;
}

int main() {
   test();
} 
```

在这里，我们有一种方法可以传入最派生的类，如果不传入任何内容，则假定您是最派生的类。

然而，你的设计有一个问题——`A`已经完全知道它的类型情况，所以不需要虚拟行为！ `BasePrint`可以`static_cast<T*>(this)->Print()`，你会取消你的开销。

您遇到的基本问题是您将特定类型的成员函数指针存储在您的基类`A`中。

无模板`A`可以存储指向非特定类型函数指针的指针——比如显式将 a`A*`作为第一个参数的“静态”指针。在 C++11 中，您可以从成员函数中自动构建这些函数。在 C++03 中，`std::bind`应该让您将成员函数指针转换为`D`以 a`A*`作为第一个参数的函数。

# grails - 尽管 hasMany 关系中的对象存在约束错误，但 Grails save() 通过

> ID：15575870
> 
> 赞同：0
> 
> 时间：2013-03-22T16:54:39.900
> 
> 标签：grails, constraints, has-many, domain-object

在 hasMany 关系下处理域类上的域保存错误的正确方法是什么？即使在拥有的对象上存在验证错误，在关系的拥有方调用 save() 似乎也会返回 true。

我应该如何在运行代码或集成测试中对此进行测试？

我已将我的问题简化为以下简单案例。

```
class User {
    static hasMany = [emails: Email]    
    static constraints = { }
} 
```

.

```
class Email {
    static belongsTo = [user: User]
    String emailAddress

    static constraints = {
        emailAddress unique: true
    }
} 
```

这里有两个关于如何做到这一点的建议。两者都不是很优雅。

第一个在 hasMany 关系上分别调用 save() 。这里的好处是我们从测试用例中得到了确切的错误。这相当麻烦。

```
@Test
void testHasManyConstraintsOwned(){
 def john = new User(login: 'johnDoe')
 def email = new Email(emailAddress: 'john@gmail.com')
 def duplicateEmail = new Email(emailAddress: 'john@gmail.com')

 john.save() // otherwise: NULL not allowed for column "USER_ID" is thrown for email.save()
 john.addToEmails(email).addToEmails(duplicateEmail)

 assert email.save()
 assert !duplicateEmail.save()
 assert "unique"== duplicateEmail.errors.getFieldError("emailAddress").code
} 
```

另一种方法使用 try/catch 来检测异常失败。这里的问题是我们无法知道出了什么问题，因此无法实际测试域约束是否按预期工作。

```
@Test
void testHasManyConstraintsOwningExcp(){
    def john = new User(login: 'johnDoe')
    def email = new Email(emailAddress: 'john@gmail.com')
    def duplicateEmail = new Email(emailAddress: 'john@gmail.com')

    john.addToEmails(email).addToEmails(duplicateEmail)
    try {
        john.save(flush: true, failOnError: true)
        assert false // should not reach here
    }catch(Exception e){

    }
} 
```

在应用程序代码中测试和反应的正确方法是什么？

# asp.net - 用于阅读 PDF 文件的 iTextSharp 不适用于 Mono

> ID：15575871
> 
> 赞同：0
> 
> 时间：2013-03-22T16:54:46.767
> 
> 标签：asp.net, mono, itextsharp

我正在使用 iTextSharp.dll 来读取 PDF 文件的内容。在 Windows 服务器上它可以正常工作，但在 Mono 平台上却不行。

单声道错误：

```
Server Error in '/' Application
Object reference not set to an instance of an object 
```

我正在使用这段代码：

```
PdfReader reader = new PdfReader(filename);
StringBuilder text = new StringBuilder();

for (int page = 1; page <= reader.NumberOfPages; page++)
{
    ITextExtractionStrategy strategy = new SimpleTextExtractionStrategy();
    string currentText = PdfTextExtractor.GetTextFromPage(reader, page, strategy);

    currentText = Encoding.UTF8.GetString(ASCIIEncoding.Convert(Encoding.Default, Encoding.UTF8, Encoding.Default.GetBytes(currentText)));
    text.Append(currentText);
    reader.Close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:57:42.890

没关系，问题出在路径上。

当我阅读文本时，我遇到了特殊字符（斯洛伐克语 {š, č, ť, ž ý, á, é, í, ...}）的问题。读后我有字符“？”，例如=> často => ?asto

# python - 跨多个进程的共享队列

> ID：15575872
> 
> 赞同：0
> 
> 时间：2013-03-22T16:54:47.977
> 
> 标签：python, multithreading, user-interface, parallel-processing, queue

*我的主要问题是：您能否让多个进程循环写入一个队列并使用该队列更新 GUI？*

我一直在查看有关队列和多个进程的帖子，我想知道是否有人知道使用它们的组合是否可能或有益。我的想法是这样的：因为现在所有的处理器都是用大约 8 个内核制造的，如果程序的任何部分在计算上是昂贵的，我制作的大多数程序都应该能够访问这种能力。我想要一个同时显示几个不同进程的进度的 GUI。我希望这些进程中的每一个都尽可能多地使用处理器，但是它们都必须同时写入 GUI，所以从我读到的内容来看，似乎队列可以解决这个问题。

解决这个问题的最佳方法是让多个进程通过管道与队列通信，并让队列更新 GUI？

目前我正在使用 pyQt 信号和插槽，但我觉得这对于现代来说是一个糟糕的解决方案，因为它只使用一个 CPU 内核。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:03:24.113

大多数 GUI 系统都是事件驱动的，并且期望所有事件处理都来自单个线程。Windows 事件系统、Android 事件、Swing 以及可能的许多其他事件系统都是如此。在 GUI 的情况下，使所有事件管理功能线程安全的实际好处很小，而难度却很大。大多数大规模并发系统确实结合了基于事件和基于线程的并发方法，例如现代浏览器。在您的情况下，只需注册一个更新事件并由您的工作进程/线程将其发布到事件调度线程就简单多了。这样，您的 GUI 将保持对其他窗口事件的响应，因为它只会定期收到通知。

# android - Android/SQLite - “在一个地方静态管理数据库”与“序列化和意图方法”

> ID：15575877
> 
> 赞同：0
> 
> 时间：2013-03-22T16:55:09.457
> 
> 标签：android, database, sqlite

我有一个普遍的问题：

考虑到风格和速度，您如何看待以下两种选择

*   在主应用程序中有一个缓存列表并始终使用此列表并按需加载数据（并按需删除它，例如，如果缓存变大）
*   始终序列化数据，将其添加到意图中，将其提供给子活动，处理数据，再次序列化并将其返回给父活动，并将列表中的原始数据替换为从子活动返回的数据活动

就我而言，我可能总是有一个包含一千个条目的列表......并且大约有 5 个级别的深度......总是序列化花费时间......而且我必须处理这些更改，因为新的父活动知道, 如果子活动中的数据发生了变化...

全局数据缓存的优点是，我总是随时随地与相同的对象进行交互，并且永远不必小心，如果数据发生变化，我会在其他地方更新这些数据......

这是个坏主意吗？如果是这样，为什么？我想加快我的应用程序，并正在考虑将其更改为这个模型......

# python - 如何从结构化的 numpy 数组中删除一列？

> ID：15575878
> 
> 赞同：17
> 
> 时间：2013-03-22T16:55:16.440
> 
> 标签：python, numpy

想象一下，您有一个结构化的 numpy 数组，它是从 csv 生成的，第一行作为字段名称。该数组具有以下形式：

```
dtype([('A', '<f8'), ('B', '<f8'), ('C', '<f8'), ..., ('n','<f8']) 
```

现在，假设您想从该数组中删除“第 i 个”列。有没有方便的方法来做到这一点？

我希望它像删除一样工作：

```
new_array = np.delete(old_array, 'i') 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-22T18:37:45.190

这不是一个单一的函数调用，但以下显示了删除第 i 个字段的一种方法：

```
In [67]: a
Out[67]: 
array([(1.0, 2.0, 3.0), (4.0, 5.0, 6.0)], 
      dtype=[('A', '<f8'), ('B', '<f8'), ('C', '<f8')])

In [68]: i = 1   # Drop the 'B' field

In [69]: names = list(a.dtype.names)

In [70]: names
Out[70]: ['A', 'B', 'C']

In [71]: new_names = names[:i] + names[i+1:]

In [72]: new_names
Out[72]: ['A', 'C']

In [73]: b = a[new_names]

In [74]: b
Out[74]: 
array([(1.0, 3.0), (4.0, 6.0)], 
      dtype=[('A', '<f8'), ('C', '<f8')]) 
```

封装为一个函数：

```
def remove_field_num(a, i):
    names = list(a.dtype.names)
    new_names = names[:i] + names[i+1:]
    b = a[new_names]
    return b 
```

*删除给定的字段名称*可能更自然：

```
def remove_field_name(a, name):
    names = list(a.dtype.names)
    if name in names:
        names.remove(name)
    b = a[names]
    return b 
```

另外，查看作为 matplotlib[模块](http://matplotlib.org/api/mlab_api.html)一部分的[`drop_rec_fields`函数。](http://matplotlib.org/api/mlab_api.html#matplotlib.mlab.rec_drop_fields)[`mlab`](http://matplotlib.org/api/mlab_api.html)

* * *

*更新*：请参阅我在[如何从结构化 numpy 数组中删除列*而不复制它*？](https://stackoverflow.com/questions/37079175/how-to-remove-a-column-from-a-structured-numpy-array-without-copying-it)用于创建结构化数组的字段子集视图而不制作数组副本的方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-01-07T03:38:57.093

在这里搜索了我的方式并从 Warren 的回答中了解了我需要知道的内容，我忍不住发布了一个更简洁的版本，并添加了一次有效删除多个字段的选项：

```
def rmfield( a, *fieldnames_to_remove ):
    return a[ [ name for name in a.dtype.names if name not in fieldnames_to_remove ] ] 
```

例子：

```
a = rmfield(a, 'foo')
a = rmfield(a, 'foo', 'bar')  # remove multiple fields at once 
```

或者，如果我们真的要打高尔夫球，以下是等价的：

```
rmfield=lambda a,*f:a[[n for n in a.dtype.names if n not in f]] 
```

# eclipse - Eclipse-如何更改深色主题的链接颜色

> ID：15575880
> 
> 赞同：1
> 
> 时间：2013-03-22T16:55:19.150
> 
> 标签：eclipse

我为 Eclipse 使用了深色主题。但是在 Pereferences-Menu 中，链接是深蓝色的（几乎不可读）。甚至一些插件（如 dbeaver）内部也有相同的 Linkcolors。

![在此处输入图像描述](../Images/bd7b2038198091bd41742d43896b364c.png) ![在此处输入图像描述](../Images/08f69a466c3c3ae2835eb60ac39359e4.png)

我在哪里可以调整这个颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:11:39.273

尝试这个：

*   窗口 > 首选项 > 常规 > 外观 > 颜色和字体
*   然后在过滤器字段中输入“链接”并尝试更改它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-11T11:34:36.597

这是系统范围的设置（链接颜色）。如果你在 Windows 10 上，你可以把你的电脑扔出窗外，创建集体诉讼诉讼，让微软创建一个以 0000FF 作为链接颜色的设计，或者在下面打开“高”对比度模式

个性化 > 颜色 > 高对比度

（我没有使用英文机器。路径可能会有所不同。）

# mysql - 选择日期范围内最近的合格类型

> ID：15575884
> 
> 赞同：0
> 
> 时间：2013-03-22T16:55:31.220
> 
> 标签：mysql, max

我有一个包含 ID、状态日期（序数）和状态类型的数据集。

*   状态类型是`Open`,`Transfer`或`Close`
*   主键是 ID 和状态日期的组合。所以一个ID会有多条记录。

我正在尝试选择包含最新状态类型为打开或传输的日期范围内的 ID 的数据子集。

```
SELECT id, 
       status_date, 
       Date_format(Str_to_date(status_date, '%Y%j'), '%m/%d/%Y'), 
       status_type
FROM   my.TABLE 
WHERE  ( ( ( status_type = 'O' ) 
            OR ( status_type = 'T' ) ) 
         AND ( status_date <= 2012182 ) ) 
```

我应该使用`MAX(Status_Date)`还是该`LAST(Status_Date)`功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:57:24.773

`LAST`不是有效的 MySQL 函数，因此`MAX`是适当的函数。您也不需要所有这些括号。

```
WHERE  ( status_type = 'O' 
          OR status_type = 'T' ) 
       AND status_date <= 2012182 
```

您也可以使用`IN`为 指定一个列表`status_type`。

```
WHERE  status_type IN ('O', 'T') 
       AND status_date <= 2012182 
```

# playframework-2.0 - “找不到合适的构造函数” 可变参数的编译错误

> ID：15575903
> 
> 赞同：4
> 
> 时间：2013-03-22T16:56:31.940
> 
> 标签：playframework-2.0, ebean

我不断有同样的错误

```
error: no suitable constructor found for FootballCriterionSet(String,FootballCriterion,FootballCriterion) 
```

如果构造函数带有可变参数：

```
public FootballCriterionSet(String name, FootballCriterion... fc){} 
```

该问题可以通过两种方式解决：

1.  使用确切数量的参数（在本例中为 1 + 2）定义构造函数，它只调用 varargs 构造函数。
2.  停止播放服务器，运行“play clean-all”并再次运行服务器（等待所有类的编译）。

有没有办法解决/解决问题？

特别是，我认为以某种方式强制 Play 在不停止服务器的情况下对每个类更改执行“全部清除”对我有用。可能吗？

# c# - SQLCommand 语法错误

> ID：15575912
> 
> 赞同：-3
> 
> 时间：2013-03-22T16:56:56.213
> 
> 标签：c#, asp.net

我写信请求有关我的 c# 语法的一些帮助。我不断在“sda.Fill(dt);”中获得语法 我无法弄清楚原因。

```
 using System;
  using System.Collections.Generic;
  using System.Linq;
  using System.Web;
  using System.Web.UI;
  using System.Web.UI.WebControls;
  using System.Data;
  using System.Data.SqlClient;
  using System.Configuration;

  public partial class Default2 : System.Web.UI.Page
 {
    protected void Page_Load(object sender, EventArgs e)
 {
    if (!IsPostBack)
    {
        string query = "select distinct Price_type from Price";
        DataTable dt = GetData(query);
        ddlPrice.DataSource = dt;
        ddlPrice.DataTextField = "Price_type";
        ddlPrice.DataValueField = "Price_type";
        ddlPrice.DataBind();

        ddlPrice2.DataSource = dt;
        ddlPrice2.DataTextField = "Price_type";
        ddlPrice2.DataValueField = "Price_type";
        ddlPrice2.DataBind();
        ddlPrice2.Items[1].Selected = true;
    }
}

     protected void Compare(object sender, EventArgs e)
    {
      string query = string.Format("select price, date from Price where Price_type = '{0}' order by date)", ddlPrice.SelectedItem.Value);
       DataTable dt = GetData(query);

    string[] x = new string[dt.Rows.Count];
    decimal[] y = new decimal[dt.Rows.Count];
    for (int i = 0; i < dt.Rows.Count; i++)
    {
        x[i] = dt.Rows[i][0].ToString();
        y[i] = Convert.ToInt32(dt.Rows[i][1]);
    }
        LineChart1.Series.Add(new AjaxControlToolkit.LineChartSeries { Name = ddlPrice.SelectedItem.Value, Data = y });

        query = string.Format("select price, date from Price where Price_type = '{0}' order by date)", ddlPrice2.SelectedItem.Value);
    dt = GetData(query);

     y = new decimal[dt.Rows.Count];
    for (int i = 0; i < dt.Rows.Count; i++)
    {
        x[i] = dt.Rows[i][0].ToString();
        y[i] = Convert.ToInt32(dt.Rows[i][1]);
    }
         LineChart1.Series.Add(new AjaxControlToolkit.LineChartSeries { Name = ddlPrice2.SelectedItem.Value, Data = y });
    LineChart1.CategoriesAxis = string.Join(",", x);

        LineChart1.ChartTitle = string.Format("{0} and {1} Order Distribution", ddlPrice.SelectedItem.Value, ddlPrice2.SelectedItem.Value);
    LineChart1.Visible = true;
}

private static DataTable GetData(string query)
{
    DataTable dt = new DataTable();
    string constr = ConfigurationManager.ConnectionStrings["bwic testConnectionString"].ConnectionString;
    using (SqlConnection con = new SqlConnection(constr))
    {
        using (SqlCommand cmd = new SqlCommand(query))
        {
            using (SqlDataAdapter sda = new SqlDataAdapter())
            {
                cmd.CommandType = CommandType.Text;
                cmd.Connection = con;
                sda.SelectCommand = cmd;
                sda.Fill(dt);
            }
        }
        return dt;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:58:44.497

`date`可能是保留关键字，具体取决于您使用的版本。`[date]`改为写。还有这个

```
"select price, date from Price where Price_type = '{0}' order by date)" 
```

应该

```
"select price, date from Price where Price_type = '{0}' order by date" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T17:05:55.950

您可以尝试使用此代码

```
using (var con = new SqlConnection(constr))
{

    using (var cmd = new SqlCommand(query))
    {
        using (var sda = new SqlDataAdapter())
        {
            con.Open();
            cmd.CommandType = CommandType.Text;
            cmd.Connection = con;
            sda.SelectCommand = cmd;
            sda.Fill(dt);
        }
    }
    return dt;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T17:10:45.017

`GetData()`如您的原始帖子所示，您的方法在语法上没有任何问题。您可以尝试注释掉整个方法体，然后开始一次一个地取消注释以隔离实际问题。

但显然您似乎没有语法错误：您的 SQL 无效。您尝试执行的 SQL 是：

```
select price, date from Price where Price_type = '{0}' order by date) 
```

它有两个问题：

*   最后的右括号是您的语法错误，并且
*   该参数不应包含在引号中。

您的 SQL 应该类似于

```
select price, date from Price where Price_type = {0} order by date 
```

您的方法应如下所示：

```
private static DataTable GetData1( string query , string p0 )
{
  DataTable dt = new DataTable();
  string constr = ConfigurationManager.ConnectionStrings["bwic testConnectionString"].ConnectionString;
  using ( SqlConnection con = new SqlConnection( constr ) )
  using ( SqlCommand cmd = con.CreateCommand() )
  using ( SqlDataAdapter sda = new SqlDataAdapter(cmd) )
  {
    cmd.CommandText = query;
    cmd.CommandType = CommandType.Text;
    SqlParameter p = new SqlParameter() ;
    p.Value = p0Value ;
    cmd.Parameters.Add( p ) ;
    con.Open();
    sda.Fill( dt );
    con.Close();
  }
  return dt;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T17:02:54.787

不要忘记在 SELECT 子句和 ORDER BY 子句中使用括号两次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T17:03:06.653

在您的代码中，如下所示

```
using (SqlConnection con = new SqlConnection(constr))
{
    using (SqlCommand cmd = new SqlCommand(query))
    {
        using (SqlDataAdapter sda = new SqlDataAdapter())
        {
            cmd.CommandType = CommandType.Text;
            cmd.Connection = con;
            sda.SelectCommand = cmd;
            sda.Fill(dt);
        }
    }
    return dt;
} 
```

将其更改为

```
using (SqlConnection con = new SqlConnection(constr))
{

    using (SqlCommand cmd = new SqlCommand(query))
    {
        using (SqlDataAdapter sda = new SqlDataAdapter())
        {
            con.Open();
            cmd.CommandType = CommandType.Text;
            cmd.Connection = con;
            sda.SelectCommand = cmd;
            sda.Fill(dt);
        }
    }
    return dt;
} 
```

这里的问题是你在填充之前没有打开任何连接。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T17:04:02.587

您还没有在任何地方打开连接。您必须先打开连接，然后才能使用它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-22T17:11:56.167

如果您的整个课程代码确实是这样，那么您在文件末尾缺少一个结束 }

```
 public partial class Default2 : System.Web.UI.Page
 { 
```

宣言。

# json - 如何使用node js同步读取sqlite3数据库？

> ID：15575914
> 
> 赞同：27
> 
> 时间：2013-03-22T16:57:06.713
> 
> 标签：json, node.js, sqlite

```
exports.allProbes = function() {
    var rows = db.all("SELECT * FROM probes;");
    return rows;
}; 
```

* * *

```
main:
var json_values = allProbes(); 
```

有可能做这样的事情吗？我的意思是，不使用回调函数：只是从数据库中读取数据（同步模式）。并返回一个 json 格式的输出？

谢谢。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2017-12-24T18:25:27.263

有一些 npm 包，例如[better-sqlite3](https://www.npmjs.com/package/better-sqlite3)和[sqlite-sync](https://www.npmjs.com/package/sqlite-sync)允许同步 SQLite 查询。这是一个例子：

```
var sqlite = require("better-sqlite3");
var db = new sqlite("example.db");

var rows = db.prepare("SELECT * FROM probes").all();
console.log(rows); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-07-10T22:54:00.723

您将无法使用 sqlite3 做到这一点。使用 sqlite3 模块，唯一可用的操作模式是异步执行，您将不得不使用回调。例如。

```
exports.allProbes = function(callback) {
    db.all("SELECT * FROM probes;", function(err, all) {
        callback(err, all);  
    });
}; 
```

然后在您的代码中：

```
var json_values;

allProbes(function(err, all) {
    json_values = all;
}); 
```

检查[sqlite3 API 文档](https://github.com/developmentseed/node-sqlite3/wiki/API)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-07-25T11:28:29.447

您必须使用 npm install --save sql.js 安装 sql.js

休息按照以下步骤：

```
var fs = require('fs');    
var sql = require('sql.js');    
var bfr = fs.readFileSync('/tmp/db.sqlite');

var db = new sql.Database(bfr);
db.each('SELECT * FROM test', function (row) {

  console.log(row);

}); 
```

您可以通过以下链接获得更多详细信息：[https ://discuss.atom.io/t/how-to-access-a-local-db-on-windows-through-electron/22400/13](https://discuss.atom.io/t/how-to-access-a-local-db-on-windows-through-electron/22400/13)

# c# - 从其父列表中删除对象的最佳实践？

> ID：15575916
> 
> 赞同：1
> 
> 时间：2013-03-22T16:57:15.803
> 
> 标签：c#, .net, collections

这是我多次遇到的一种模式，我已经四处搜索，但没有就最佳方法达成共识。

```
public class ItemListWrapper
{
    public List<Item> Contents;
}

public class Item
{
   void DoStuffAndRemove() { }
} 
```

当调用 DoStuffAndRemove() 时，我希望该项目执行一些功能，然后从 ItemListWrapper 中删除。我能想到的两种方法是让 ItemListWrapper 实现 IList （可行，但不得不编写所有样板代码有点烦人）并将委托传递给每个项目以调用它从列表中删除自身（似乎很复杂） .

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:17:24.537

我想你*一定*有这个`ItemListWrapper`是因为其他原因。让我们看一下 2 种方法：

**1\. 每个项目都有对其列表的引用**

```
public class ItemListWrapper
{
    public List<Item> Contents;

    public void Add(Item item){ item.List = this; this.Contents.Add(item); }
}

public class Item
{
   ItemListWrapper List;
   void DoStuffAndRemove() { this.List.Contents.Remove(this); }
} 
```

**2.让列表控制一切**

```
public class ItemListWrapper
{
    public List<Item> Contents;

    public void DoStuffAndRemove(Item item)
    { 
        if(this.Contents.Contains(item))
        {
            item.DoStuff();
            this.Contents.Remove(item);
        }
    }
}

public class Item
{
   void DoStuff() { ... }
} 
```

恕我直言，第二个更好，因为*我知道*该列表必须对其项目负责。

# sharepoint - SharePoint 母版页权限

> ID：15575917
> 
> 赞同：0
> 
> 时间：2013-03-22T16:57:15.903
> 
> 标签：sharepoint, master-pages

在 SharePoint 热门网站上操作母版页。

我拥有完全控制和设计权限，并且我是我们网站集中顶级网站的网站所有者，但我无法查看或更改网站母版页上的任何内容。我认为问题可能在于我无法访问主站点下的一半子站点。谁能帮我指出正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:07:32.457

您是否确定您是网站集管理员以排除权限问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-15T17:03:15.747

尝试在网站集级别和根站点级别启用发布功能。这应该会激活站点设置菜单中的母版页库。

# java - 为什么只有当我有内部类时才会出现“无法从静态上下文引用的非静态变量”错误？

> ID：15575918
> 
> 赞同：3
> 
> 时间：2013-03-22T16:57:15.877
> 
> 标签：java, inner-classes, nested-class

我在静态与非静态的概念上苦苦挣扎。我正在研究这个 Thread 示例程序（已修改，[最初来自这里](https://stackoverflow.com/questions/8677945/java-daemon-threads)），当我使用内部类时，我会得到错误：

```
Error: non-static variable this cannot be referenced from a static context 
```

这是导致错误的代码：

```
public class Main2 {
    public static void main(String[] args) {
        Thread simple = new Thread(new SimpleTask());
        simple.start();
    }

    class SimpleTask implements Runnable {
        public void run() {

        }

        ;
    }

    class DaemonTask implements Runnable {
        public void run() {
            int i = 0;
        }
    }

} 
```

但是，当我将它分解为 3 个类时，没有错误.. 即如果我成功了：

```
public class Main2 {  
   /* contents */  
}

class SimpleTask implements Runnable {
   /* contents */
}

class DaemonTask implements Runnable {
   /* contents */
} 
```

然后它编译就好了。为什么我们把它分成另一个类很重要？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T17:01:15.373

您需要一个外部类实例（Main2）来访问内部类实例（SimpleTask）。

试试这个：

```
 Thread simple = new Thread(new Main2().new SimpleTask()); 
```

检查[**Oracle 路径上的内部类**](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T16:59:01.363

因为您的类**是非静态**内部类；他们隐含地需要外部类的相应实例。

将您的内部类声明为`static`，您的问题应该会消失。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T16:59:12.927

`SimpleTask`并且`DemonTask`类应该是静态的

* * *

`Instance members`（在您的情况下`SimpleTask`和`DemonTask`）与类的特定**对象**相关联。因此您不能直接在静态方法中使用实例成员（因为静态成员没有关于类实例的任何信息，除非您将实例本身传递为范围）

您必须创建一个对象`Main2`并访问`SimpleTask`并`DemonTask`通过它`new Main2().new SimpleTask()`

**或者**

使这两个类静态

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T16:59:13.133

尝试制作`class SimpleTask implements Runnable`静态。

当你声明一个这样的类时，你是在声明一个每个实例的类定义。更准确地说，您将 的类定义绑定`SimpleTask`到的**实例**。`Main2`

为了实例化该类的对象，您将执行以下操作：

```
Main2 obj = new Main2();
SimpleTask t = obj.new SimpleTask(); 
```

注意使用`obj.new`. 当您从外部类内部调用它时，您实际上是在调用`this.new`. 静态方法不知道`this`，所以你得到一个错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-04T23:28:48.990

问题在于“Thread simple = new Thread(new SimpleTask());”这一行 由于类 SimpleTask 被定义为嵌套类，因此您需要外部类的对象来创建一个（构造函数本质上需要对包含类的隐式引用，类似于普通方法如何获得对当前类实例的隐式引用'这'）。您在这里实质上要求的是“Thread simple = new Thread(null.new SimpleTask());” 正是这个'null'导致了异常。

# windows-8 - 识别 StorageFolder 中的文件更改

> ID：15575926
> 
> 赞同：3
> 
> 时间：2013-03-22T16:57:34.460
> 
> 标签：windows-8, windows-runtime, windows-store-apps

我正在尝试使数据库与 Windows 8 音乐库保持同步，但我还没有找到有效的解决方案。我知道 .NET 有一个`FileSystemWatcher`不适用于 Windows 8 应用程序的功能。目前，我的想法是将返回的文件列表`GetFilesAsync`与我的数据库进行比较，并检查是否有某些内容被修改、删除或添加。我知道这并不理想，但我在`Windows.Storage`. 我的问题是，一旦对音乐库进行了修改，我想自动进行这些更新。当更改发生在子文件夹中时，检查`ModifiedDate`文件夹是没有用的。有谁知道是否有办法判断什么时候`StorageFolder`被修改了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T05:32:19.330

如果您能够`ContentsChanged`可靠地触发，那么下面的代码可以帮助您确定发生了什么变化。

请注意，它并不快。`GetBasicPropertiesAsync`似乎需要〜5ms /文件......所以〜10秒来区分一组1000个文件。

（我无法`ContentsChanged`可靠地开火，经过数小时的谷歌搜索，似乎许多其他人也有同样的问题）

```
 private class DiffSet
    {
        public IReadOnlyList<StorageFile> Added { get; set; }
        public IReadOnlyList<StorageFile> Deleted { get; set; }
        public IReadOnlyList<StorageFile> Changed { get; set; }
    }

    private static async Task<DiffSet> Diff(IEnumerable<StorageFile> oldSet, IEnumerable<StorageFile> newSet)
    {
        var newAsDict = newSet.ToDictionary(sf => sf.Path);

        var added = new List<StorageFile>();
        var deleted = new List<StorageFile>();
        var changed = new List<StorageFile>();

        var fromOldSet = new HashSet<string>();

        foreach (var oldFile in oldSet)
        {
            if (!newAsDict.ContainsKey(oldFile.Path))
            {
                deleted.Add(oldFile);
                continue;
            }

            var oldBasicProperties = await oldFile.GetBasicPropertiesAsync();
            var newBasicProperties = await newAsDict[oldFile.Path].GetBasicPropertiesAsync();

            var oldDateModified = oldBasicProperties.DateModified;
            var newDateModified = newBasicProperties.DateModified;

            if (oldDateModified != newDateModified)
            {
                changed.Add(oldFile);
            }

            fromOldSet.Add(oldFile.Path);
        }

        foreach (var newFile in newSet)
        {
            if (!fromOldSet.Contains(newFile.Path))
                added.Add(newFile);
        }

        return new DiffSet
        {
            Added = added,
            Deleted = deleted,
            Changed = changed
        };
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:04:52.600

您可以使用[`StorageFileQueryResult`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.search.storagefilequeryresult.aspx)及其`ContentsChanged`事件来通知文件夹及其子文件夹的更改。但是，该事件不包含有关实际更改的任何信息，因此您需要重新解析文件夹并检查您感兴趣的任何内容是否已被修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T22:07:24.063

我认为您无法从您的 Windows 8 应用程序中获取该信息。最好的办法是异步查询文件夹和文件，并将信息与存储在数据库中的信息进行比较。[在此处](http://code.msdn.microsoft.com/windowsapps/Folder-enumeration-sample-33ebd000)查看枚举文件夹和文件的一个示例。我知道这对于您尝试做的事情不是很有效。如果您发现任何其他更好的方法，请分享。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T18:37:14.397

这对我有用：

```
 public async void ListenAsync() {
        query = storageFolder.CreateFileQuery();
        query.ContentsChanged += query_ContentsChanged;
        var files = await query.GetFilesAsync();
    }

    void query_ContentsChanged(IStorageQueryResultBase sender, object args) {
        // args has no info about what changed. check manually
    } 
```

# java - 密码为星号 (*)

> ID：15575929
> 
> 赞同：0
> 
> 时间：2013-03-22T16:57:39.507
> 
> 标签：java, passwords

我的密码程序可以隐藏键盘输入。当我输入密码时它是不可见的。

但我的问题是如何将密码输入显示为星号（*****）

有人能帮帮我吗？:p

我的代码在这里：

```
public void login()
    {
        Scanner input = new Scanner(System.in);//create Scanner object

        System.out.println("\n");

        Console console = System.console();

        char[] ad_password = "admin".toCharArray();
        char[] sm_password = "salesman".toCharArray();

        char[] passwordEntered = console.readPassword("Enter Password To Access The Project ( As Admin / Sales Man ): ");

        if (Arrays.equals(ad_password, passwordEntered))
        {
            System.out.println("\n Congratulation!!! Access granted \n");
            System.out.println("\n Welcome Admin. :-) \n\n");

            Shoping_mall obj_ad_dis=new Shoping_mall();

            obj_ad_dis.ad_dis();
        }

        else if(Arrays.equals(sm_password, passwordEntered))
        {
            System.out.println("\n Congratulation!!! Access granted \n");
            System.out.println("\n Welcome Sales Man. :-) \n\n");

            Shoping_mall obj1_sm_dis=new Shoping_mall();
            obj1_sm_dis.sm_dis();
        }

        else
        {
            System.out.println("\n Error: Your Password Doesn't Meet. Access Denied !!! :-( \n\n");
            System.out.println("\n Enter Correct Password.\n\n");

            Shoping_mall obj_login=new Shoping_mall();//creat object for calling Admin_works() method
            obj_login.login();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:09:37.300

您可以使用 JPasswordField 来做到这一点；下面是一个例子：

```
 private JPasswordField password;
    private String typedPassword;
    private final String defaultPassword = "yourDesiredPassword";

    public void createPasswordField(){

    password = new JPasswordField(30);
    password.setBounds(280, 240, 90, 20);
    password.setEchoChar('*');
    password.setBackground(Color.white);
    password.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {

            password = (JPasswordField) e.getSource();
            char [] tempPass = password.getPassword();
            typedPassword = new String(tempPass);

            if (!typedPassword.equals(defaultPassword)){

                JOptionPane.showMessageDialog(null,
            "Your password is not correct",
            "Stack Over Flow example",
            JOptionPane.ERROR_MESSAGE);
            }
        }
    });
} 
```

# twitter - twitter4j.Status 是否在每条推文上返回地理位置

> ID：15575931
> 
> 赞同：0
> 
> 时间：2013-03-22T16:57:44.087
> 
> 标签：twitter, geolocation, twitter4j

[http://twitter4j.org/javadoc/twitter4j/Status.html](http://twitter4j.org/javadoc/twitter4j/Status.html)返回一个包含纬度/经度的 GeoLocation 对象（[http://twitter4j.org/javadoc/twitter4j/GeoLocation.html](http://twitter4j.org/javadoc/twitter4j/GeoLocation.html)）。它是否返回所有推文的值，因为我观察到该对象大多数时候为空。它何时返回推文的地理位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:27:58.153

仅当推文本身已被用户明确地理标记时，才会提供地理坐标。Search API 会根据用户提供的位置字段进行一些模糊匹配，这就是为什么您会得到不包含坐标的结果。v1 搜索结果不包含完整的推文或用户对象。

[来源](https://dev.twitter.com/discussions/10821)并尝试谷歌搜索“推文中的地理定位无效”，在 dev.twitter 论坛上有很多讨论。

# haskell - haskell 中的积分是否包含负数？

> ID：15575933
> 
> 赞同：1
> 
> 时间：2013-03-22T16:57:47.790
> 
> 标签：haskell

在 Haskell 中，数据类型 Integral 类型是否包含负数？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T17:01:12.410

```
Prelude> :i Integral
instance Integral Int
Prelude> (-5) :: Int
-5 
```

也是的。但请注意 Integral 不是一种数据类型，而是一类可能包含或不包含负数的类型。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-22T21:50:39.113

正如其他人所说，`Integral`不是一个类型，而是一个类。有*几种*整数类型。

主要类型是`Int`（机器精度）和`Integer`（无限精度），两者都支持负数。

还有类型`Int8`、和`Int16`，它们具有特定的位数，并且还支持负数。然后有, ,并且没有*负数*。（嘿，我没有发明命名！）`Int32``Int64``Word8``Word16``Word32``Word64`

# javascript - parallax.js 自动滑动加载

> ID：15575934
> 
> 赞同：0
> 
> 时间：2013-03-22T16:57:48.233
> 
> 标签：javascript, jquery, parallax, parallax.js

我在一个网站上使用这个 jQuery 插件：http: [//stolksdorf.github.com/Parallaxjs/](http://stolksdorf.github.com/Parallaxjs/)

我正在尝试实现一种效果，当导航到幻灯片时，它会在加载后自动移动到另一张幻灯片上 - 将其视为过渡幻灯片。

例如：

```
parallax.transition.onload=function(){
    parallax.citymid.show();
}; 
```

加载过渡幻灯片后，此代码将显示城市中间幻灯片。

然而：

```
parallax.transition.onload=function(){
    parallax.citymid.bottom();
}; 
```

这不会使 city mid 从底部滑入，就像从按钮调用它时那样。

有谁知道我可以通过谁来完成这项工作，或者至少可以找到解决方法？我已经联系了插件的开发人员，但无济于事。

非常感谢，奥利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T12:05:23.897

使用转换回调，一切正常。

```
parallax.pageB.right(function(){
parallax.pageC.right();
}); 
```

在pageA上调用这段代码，它会从右边滑入pageB，一旦完成，它就会滑入pageC。我已经对此进行了测试，并且可以完美运行。

# html - 提供字体大小、系列和行高时，Div 高度不正确

> ID：15575938
> 
> 赞同：0
> 
> 时间：2013-03-22T16:58:05.363
> 
> 标签：html, fonts, css, outerheight

我正在尝试在 div 上设置字体大小、系列和行高。然后，我需要知道某些布局内容的 div 的正确高度。但是，我得到的高度是错误的，并且出于同样的原因，div 的父级上出现了一个滚动条。以下 jsfiddle 最能说明我的问题：http: [//jsfiddle.net/JYkAX/19/](http://jsfiddle.net/JYkAX/19/)

这是html：

```
<div class="separator">
    <div class="PleaseNoScrollBar"> 
        Some Text Here
    </div>
</div> 
```

这是CSS：

```
.separator
{
    background: gray;
    display: block;
    overflow: auto;
}

.PleaseNoScrollBar
{
    font-family: cursive;
    background: lightgray;
    line-height: 32px;
    font-size: 32px;
    display: block;
    opacity: 0.5;
    vertical-align: top;
} 
```

以下 jquery 检索 div 的外部高度（但不正确）。

```
alert($(".PleaseNoScrollBar").outerHeight()); 
```

关于造成这种情况的任何想法？不幸的是，我需要能够检索 div 的实际外部高度，我不能只是让父 div 更大。

我应该提一下，滚动条只出现在 Chrome 和 IE 中。在 Firefox 中，可以通过拖动鼠标滚动 div，但不会出现滚动条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:03:14.143

您正在查看滚动条，因为您设置`overflow:auto;`了`.separator`。只需将其删除，您将不再有滚动条。

至于高度，警报函数检索“32”，我认为这是 div 的正确高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:02:04.857

`overflow:auto`从容器 div 中删除声明。

```
.separator
{
    background: gray;
    display: block;
    overflow: auto;
} 
```

从 w3c 规范...

> **overflow: auto** 'auto' 值的行为取决于用户代理，但应该为溢出框提供滚动机制。

来源：[http ://www.w3.org/TR/CSS21/visufx.html#overflow](http://www.w3.org/TR/CSS21/visufx.html#overflow)

这意味着编写浏览器的人决定如何`overflow:auto`工作。如果将`. separator`div 的高度设置为 34px，滚动条就会消失。

我建议`overflow:auto`从`.separator`div 中删除。

看看这个：http: [//jsfiddle.net/JYkAX/26/](http://jsfiddle.net/JYkAX/26/)

如果容器 div 的高度设置为比子元素高度大两个像素以下的任何值，则会显示滚动条。我的猜测是，当声明“自动溢出”时，浏览器会在顶部和底部添加 1px 边框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-08T14:32:13.653

我在使用 Google Fonts 中的字体时遇到了类似的问题，它隐式设置了 1.5em 的行高，而 jQuery 可能没有看到。一旦我明确地将 line-height:1.5em 写入我的 CSS 重置（或网站字体设置），就可以了。

# iphone - 本地通知只触发一次？

> ID：15575941
> 
> 赞同：1
> 
> 时间：2013-03-22T16:58:25.847
> 
> 标签：iphone, xcode, localnotification

当用户更改日期时，我将本地通知设置为在指定日期触发

在 UIDatePicker 上。但是，当我运行应用程序时，通知正确触发，但是当

我做了一个小改动，然后再次运行，通知没有触发。这是我的

代码，请帮忙！

```
NSCalendar *calendar = [NSCalendar autoupdatingCurrentCalendar];

// Get the current date
NSDate *pickerDate = [datepicker date];

// Break the date up into components
NSDateComponents *dateComponents = [calendar components:( NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit )
                                               fromDate:pickerDate];
NSDateComponents *timeComponents = [calendar components:( NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit )
                                               fromDate:pickerDate];
// Set up the fire time
NSDateComponents *dateComps = [[NSDateComponents alloc] init];
[dateComps setDay:[dateComponents day]];
[dateComps setMonth:[dateComponents month]];
[dateComps setYear:[dateComponents year]];
[dateComps setHour:[timeComponents hour]];
[dateComps setMinute:[timeComponents minute]];
[dateComps setSecond:[timeComponents second]];
NSDate *itemDate = [calendar dateFromComponents:dateComps];
[dateComps release];

UILocalNotification *localNotif = [[UILocalNotification alloc] init];
if (localNotif == nil)
    return;

localNotif.fireDate = itemDate;
localNotif.timeZone = [NSTimeZone defaultTimeZone];
    // Notification details
    localNotif.alertBody = @"Timer";
// Set the action button
localNotif.alertAction = @"View"; 
```

# css - 填写提交表单时如何选择使用哪种字体？

> ID：15575943
> 
> 赞同：3
> 
> 时间：2013-03-22T16:58:36.610
> 
> 标签：css, submit, form-submit, font-family, squarespace

地点：

[oldfashionedgoods.com](http://oldfashionedgoods.com)

我正在使用 SquareSpace 为我的网站构建一个启动页面，虽然我已经能够弄清楚一切，但最后一件事让我印象深刻。

我正在尝试使用它，因此当您在提交字段中输入电子邮件时，它使用 Cutive Mono 字体，就像我在框上方的文本中使用的一样。

到目前为止，我有这个：

```
input[type=text] {
color: #cc5723;
font-family: cutive mono;} 
```

虽然我不希望它是那种琥珀色，但我正在弄乱颜色以确保我使用的是正确的物品。当我键入时，文本会改变颜色，但字体不会改变。我在这里想念什么？

如果这是一个愚蠢的问题，我是一个完整的新手，很抱歉！我已经在网上到处找了，但似乎没有任何效果。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:05:11.900

我怀疑它被另一种 CSS 样式所覆盖。尝试使用：

```
input[type=text] {
color: #cc5723;
font-family: cutive mono !important;} 
```

如果这有效，那么它将在您的 CSS 中的某处被覆盖。

**注意：**`!important`应该只用于测试。这不是一个解决方案。

我在这里尝试了一个基本示例：http: [//jsfiddle.net/n4S3s/](http://jsfiddle.net/n4S3s/)似乎工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:10:35.427

其他答案是正确的；CSS 中的其他样式会覆盖这个样式。我不确定我喜欢用`!important`强制风格；我认为这是最后的手段。但它对测试有好处。

但更重要的是，您想知道如何自己解决这个问题吗？在 Chrome（或任何浏览器）中使用开发者工具。只需右键单击输入元素并选择“检查元素”。然后查看右下角的 Styles 面板，您可以看到对该元素有效的样式，以及它们来自哪些 CSS 规则。您还可以暂时关闭任何样式、编辑样式等。

Stack Overflow 是一种快速回答问题的方法，但开发者工具的速度*要快得多*！:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T17:02:33.993

您的其他样式优先于此。利用

```
font-family: cutive mono !important; 
```

去测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T17:05:36.013

是的。`important!`作品。我只是不确定，但这里是

[演示](http://jsfiddle.net/V2Jdc/1/)

# mysql - Vb.net 和 MySQL：“字段列表”中的未知列

> ID：15575947
> 
> 赞同：0
> 
> 时间：2013-03-22T16:58:56.567
> 
> 标签：mysql, vb.net

我希望你能帮助我。首先，对不起，如果我的英语很烦人，我不是母语人士。

我收到了这个错误，我看不出我做错了什么。我有一个程序用来自另一个使用 OLEB DB 的程序的数据填充本地 MySQL DB。因此，它会比较表格并按需上传新数据。但是我只有一个表使用与其他表一起使用的相同 Sub 时出现此错误。

> “字段列表”中的未知列“lpedidos.serie”

问题是“lpedidos.serie”确实存在。所以这里是子的代码，请不要笑，我知道这可能是非常低效的，但我只是一个菜鸟。

```
 Public Sub notIndexedTables(table As DataTable, table2 As DataTable, tableNA As String)
    Dim temptable As DataTable
    temptable = table.Clone
    Dim tablename As String = temptable.TableName
    Dim myAdapter As MySql.Data.MySqlClient.MySqlDataAdapter
    Dim SQL As String

    Dim newconn As New MySql.Data.MySqlClient.MySqlConnection
    newconn = mysqlConnection()
    newconn.Open()

    SQL = "TRUNCATE " & tableNA
    myAdapter = New MySql.Data.MySqlClient.MySqlDataAdapter()
    Dim command As MySql.Data.MySqlClient.MySqlCommand
    command = New MySql.Data.MySqlClient.MySqlCommand(SQL, newconn)
    myAdapter.DeleteCommand = command
    myAdapter.DeleteCommand.ExecuteNonQuery()

    For Each row As DataRow In table.Rows()
        Dim columnNumber As Int32 = row.ItemArray.Count
        Dim i As Integer = 0

        Dim s1 As String = "("

        For Each columna In row.ItemArray
            i = i + 1
            If i = columnNumber Then
                s1 = s1 + CStr(table2.Columns.Item(i - 1).ColumnName) & ")"
            Else
                s1 = s1 & CStr(table2.Columns.Item(i - 1).ColumnName) & ", "
            End If
        Next

        Dim s2 As String = "("
        i = 0
        For i = 0 To (columnNumber - 2)
            s2 = s2 & "'" & CStr(row.Item(i)) & "', "
        Next

        s2 = s2 & "'" & CStr(row.Item(columnNumber - 1)) & "')"

        SQL = "INSERT INTO " & tableNA & " " & s1 & " VALUES " & s2
        myAdapter = New MySql.Data.MySqlClient.MySqlDataAdapter()
        '  myCommand = New MySql.Data.MySqlClient.MySqlCommandBuilder(myAdapter)

        command = New MySql.Data.MySqlClient.MySqlCommand(SQL, newconn)

        myAdapter.InsertCommand = command
        myAdapter.InsertCommand.ExecuteNonQuery()

    Next
    newconn.Close()
    newconn.Dispose()
End Sub 
```

基本上它需要 MySQL 表（tableNA），截断它（此过程适用于没有索引的表，对于具有唯一索引的表还有其他过程）并用 OLEB 表（表）中的数据填充它并获取列名来自 MySQL 表 (table2) 的临时副本（在这种情况下可能不需要使用 table2 ......但无论如何）。

这是异常和抛出异常时 SQL 字符串所采用的值。 ![例外](../Images/5b51ff4f59b09564ead87eac6140b940.png)

![SQL 字符串值](../Images/5192edf88078b41bcaa0b720cb5d60c1.png)

这是phpMyAdmin中表结构的截图。 ![lpedidos 表结构](../Images/18847cd2c2ac9e2d217de83b418884e6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T03:27:45.033

当您声明 New MySqlConnection 时，您需要将连接字符串放在那里并指定数据库名称。你能显示你的连接字符串吗？

```
Dim myConnection As New MySqlConnection(myConnString)
myConnection.Open() 
```

如果这不能解决问题，请尝试另一个列名并确保它不是保留关键字。

# python - biopython test_Tutorial ... 失败

> ID：15575950
> 
> 赞同：0
> 
> 时间：2013-03-22T16:59:00.213
> 
> 标签：python, biopython

我对编程相当陌生。我正在尝试在 mac os x 10.5 上安装 biopython。

这就是我到目前为止所做的。
1\. 安装 xcode
2\. 安装 numpy
3\. 在终端中运行这些命令
`python setup.py build`
`python setup.py test`

测试报告返回一个失败。

```
test_Tutorial ... FAIL
ERROR: Run tutorial doctests. 
```

`Traceback (most recent call last): File "test_Tutorial.py", line 152, in test_doctests ValueError: 4 Tutorial doctests failed: test_from_line_05671, test_from_line_06030, test_from_line_06190, test_from_line_06479`

感谢您的任何帮助或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:08:39.270

该文件 test_Tutorial.py 在主要 Biopython 教程和食谱的源代码中运行标记示例（[http://biopython.org/DIST/docs/tutorial/Tutorial.html](http://biopython.org/DIST/docs/tutorial/Tutorial.html) / [http://biopython.org/DIST/docs/tutorial /Tutorial.pdf](http://biopython.org/DIST/docs/tutorial/Tutorial.pdf) ) 检查示例是否按预期工作。在内部，它使用与 Python 的 doctest 示例相同的库。

**test_Tutorial.py 失败的事实*可能是*一个无害的问题，有几个例子。**

您使用的是哪个版本的 Biopython？如果这是正式版本，那么失败是意料之外的。如果它是来自 git 存储库的快照，那很不幸。如果你很好奇，你可以试试这个以查看更多信息：

```
$ cd Tests
$ python test_Tutorial.py 
```

这种问题可能更容易在 Biopython 邮件列表[http://biopython.org/wiki/Mailing_lists上讨论](http://biopython.org/wiki/Mailing_lists)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T17:55:48.220

我发现建立一个好的编程环境最简单的方法是使用[MacPorts](http://www.macports.org)，因为它有一个很好的方法来确保在安装时满足所有依赖项。不过，您需要熟悉终端和命令行。

1.  [为 OSX 10.5安装 MacPorts](https://distfiles.macports.org/MacPorts/MacPorts-2.1.3-10.5-Leopard.dmg)。[也阅读文档](http://guide.macports.org/chunked/installing.macports.html)。

2.  重新开始。

3.  打开 Terminal.app 并输入`sudo port selfupdate`以确保端口文件定义是最新的。

4.  运行`sudo port install py27-biopython`以安装最新版本的 Python 2 (2.7.3) `numpy`、 和`biopython`. 这需要一段时间。

5.  运行`echo $PATH`并确保`/opt/local/bin`和 /opt/local/sbin` 位于开头。他们应该是。

6.  运行`which python`并确保它返回`/opt/local/bin/python`。如果没有，请运行`sudo port install python_select`并按照其说明选择您的默认 python 版本。

7.  希望此时您可以运行`python`进入交互式解释器，并且`import Bio`不会出现任何错误。

祝你好运！

# ruby - 在 autotest 或 Guard 下安装、配置和运行 minitest 的简明配方

> ID：15575952
> 
> 赞同：1
> 
> 时间：2013-03-22T16:59:01.347
> 
> 标签：ruby, guard, minitest, autotest, growl

过去，我运行过 Rails + RSpec + autotest。现在我已经升级到 ruby​​ 2.0，我想在非 Rails 环境中使用 minitest（我使用的是 Padrino / DataMapper）。我敢肯定，我不是唯一一个想要这个的人。

真正有用的**是**安装和配置东西的简洁配方，所以简单的命令：

```
$ autotest 
```

或者

```
$ bundle exec guard 
```

将开始测试 /test 下的所有内容。我已经搜索过 SO 和 InterWebs，但还没有找到这样的食谱。食谱应包括：

*   您应该在 Gemfile 中包含哪些宝石？
*   你运行什么命令来设置环境？
*   您需要创建哪些配置和支持文件（Rakefile？.autotest？等...）
*   测试文件`require 'test_helper'`处理重复功能的一种方法

额外的功劳展示了如何配置咆哮和 spork 以获得完整的 XP 体验！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T02:43:03.457

嗯，我不使用自动测试，现在看来 Guard 是最合适的，所以：

```
# Add to Gemfile
group :development do
  gem 'terminal-notifier-guard'    # or libnotify for linux
  gem 'rb-fsevent', require: false # or rb-inotify for linux
  gem 'guard-minitest'
  gem 'minitest'
end

# From bash
$ bundle update
$ guard init minitest # or bundle exec guard init minitest

# Edit the GuardFile, mine looks like:
guard 'minitest' do
  # with Minitest::Unit
  watch(%r|^test/(.*)\/?test_(.*)\.rb|)
  watch(%r|^app/models/(.*)\.rb|)  { |m| "test/test_#{m[1]}.rb" }
  watch(%r|^lib/(.*)([^/]+)\.rb|)  { |m| "test/test_#{m[2]}.rb" }
  watch(%r|^test/helper\.rb|)      { 'test' }
end

# Here my test helper.rb. /test/helper.rb
ENV['PADRINO_ENV'] ||= 'test'
require_relative '../config/boot'
require 'minitest/autorun'

# Have fun!
$ bundle exec guard 
```

# eclipse - 从 Eclipse 剪切并粘贴到 MS Word 中显示为大的蓝色斑点

> ID：15575955
> 
> 赞同：2
> 
> 时间：2013-03-22T16:59:12.727
> 
> 标签：eclipse

这一直困扰着我多年。每次我从eclipse中的java文件中剪切一段代码并粘贴到word文档中时，文本都会显示为一大块文本。有谁知道解决这个问题的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-30T07:08:01.190

这主要发生在单行复制中。尝试通过包含上/下一行的空格来复制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T17:02:13.813

首先尝试将代码粘贴到基本的文本编辑器中，例如记事本；它应该摆脱来自您剪切的任何属性。

编辑

请参阅[http://office.microsoft.com/en-us/word-help/control-the-formatting-when-you-paste-text-HA010215708.aspx](http://office.microsoft.com/en-us/word-help/control-the-formatting-when-you-paste-text-HA010215708.aspx)并查找“仅保留文本”选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-17T14:43:28.843

这是众所周知的问题。它被注册为 Eclipse 错误： [https ://bugs.eclipse.org/bugs/show_bug.cgi?id=86503](https://bugs.eclipse.org/bugs/show_bug.cgi?id=86503)

不幸的是，今天，这个问题还没有解决。

# javascript - 自定义调度程序 - 如何删除 JQ-UI“可选”元素内的元素

> ID：15575961
> 
> 赞同：0
> 
> 时间：2013-03-22T16:59:45.333
> 
> 标签：javascript, jquery, jquery-ui

这里是 jQuery 的新手。一直很喜欢，要学很多东西！

挑战：我无法删除最近选择的元素中的项目。

来源：我使用了 jQuery UI Selectable/Serialize 示例。效果很好，我可以选择多个 div，插入内容。

到目前为止：我已经尝试将类和 ID 分配给新元素，但是当我单击它时，它总是重新选择容器而不是删除元素。更糟糕的是，它会在子元素中放置一个新元素。

请问如何选择和删除这些创建的“子”跨度？在这里尝试一下，选择作业或将名称拖到作业，然后尝试删除刚刚添加的名称。

[http://jsbin.com/azeqow/1/edit](http://jsbin.com/azeqow/1/edit)

（试图添加问题的图像，我太新了）

# php - 循环sql结果以显示行而不使用php重复

> ID：15575963
> 
> 赞同：0
> 
> 时间：2013-03-22T17:00:00.063
> 
> 标签：php, sql

我有 2 张桌子。product_data 包含有关产品和 product_images 的所有详细信息，其中包含每个产品的所有图像。我加入了这两个表，但问题是某些产品有超过 2 个图像。所以产品行重复

```
product_name  | description | ucode |  star_rating | product_image

cheese            packed       321        3            1.jpg
cheese            packed       321        3            1.jpg
cheese            packed       321        3            3.jpg
meat              canned       F98        1            meat1.jpg
milk              canned       G43        5            milk1.jpg
milk              canned       G43        5            milk2.jpg
milk              canned       G43        5            milk3.jpg
milk              canned       G43        5            milk4.jpg 
```

当我有一个 foreach 循环

```
 foreach ($products as $product):
    //display the product details once and all the images for that product
    endforeach; 
```

输出会像，

```
product 1          1.jpg
                   2.jpg
                   3.jpg
product 2          meat1.jpg
product 3          milk1.jpg
                   milk2.jpg
                   milk3.jpg
                   milk4.jpg 
```

我想列出所有产品以及图像。如何仅显示 1 次产品详细信息以及该产品的所有图像并移至下一个产品？一个产品最多有 6 张图片

SQL 查询 - 已连接 3 个表

```
SELECT *
FROM product_data p
LEFT JOIN product_img_map im ON im.product_id = p.product_id
LEFT JOIN product_images i ON i.photo_id = im.photo_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:08:50.063

你可以把它全部放在一个数组中：

```
foreach ($products as $product) {
    ....
    $product_array[$product_name]['images'][] = $product_image;
    ....
} 
```

那么您将通过循环访问您创建的产品数组来更好地控制您的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:07:30.120

您可以使用`GROUP_CONCAT`：

```
SELECT `product_data`.*,
GROUP_CONCAT(`product_data`.`product_image`) as Pictures
FROM `product_data`
GROUP BY `product_data`.`product_name` 
```

您将获得一个新行`Pictures`，其中包含用逗号分隔的所有图像。

# javascript - Fancybox2 使用导航按钮修改 iframe

> ID：15575965
> 
> 赞同：0
> 
> 时间：2013-03-22T17:00:04.977
> 
> 标签：javascript, iframe, fancybox-2

我有一个 iframe 弹出窗口列表，我正在使用 data-fancybox-group="gallery" 以便用户可以左右浏览内容。此列表所在的页面也在 iframe 中。这样做的原因是主标题不会重新加载，因为它需要通过 soundcloud 播放连续的音乐。我不得不修改 $('.fancybox').fancybox(); 使 iframe 内容自动调整大小以适应内容并显示在其父框架之外。但是，此修改后的脚本会阻止按钮功能正常工作。这是我的代码，基本上我需要让 iframe 按钮功能像画廊一样工作......

```
<script type="text/javascript">
    $(document).ready(function() {
        /*
         *  Simple image gallery. Uses default settings
         */

        $('.fancybox').click(function(e){
        e.preventDefault();
        parent.$.fancybox({'href'          : this.href, 
        'type':'iframe',

        autoSize : false});
         //fancybox
        return false;
        }); //click

        /*$('.fancybox').fancybox();*/

        /*
         *  Button helper. Disable animations, hide close button, change title type and content
         */

        parent.$('.fancybox-buttons').fancybox({
            openEffect  : 'none',
            closeEffect : 'none',

            prevEffect : 'none',
            nextEffect : 'none',

            closeBtn  : false,

            helpers : {
                title : {
                    type : 'inside'
                },
                buttons : {}
            },

            afterLoad : function() {
                this.title = 'Image ' + (this.index + 1) + ' of ' + this.group.length + (this.title ? ' - ' + this.title : '');
            }
        });

    });

</script> 
```

# spring - 没有角色的 Wicket Spring 安全认证

> ID：15575966
> 
> 赞同：-1
> 
> 时间：2013-03-22T17:00:05.207
> 
> 标签：spring, security, wicket

在我简单的 wicket 应用程序中，我只需要让用户访问一个子页面——并且我需要从 db 表中获取登录名/密码。我不需要角色。我想使用弹簧安全。我完全迷失了使这成为可能。你知道如何做到这一点的任何例子或教程吗？

我需要 - 登录页面（spring security） - url 过滤（仅登录用户访问） - 没有角色

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:55:20.887

这是一个非常深奥的话题，需要一些背景知识才能防止搞砸并发布易受攻击的应用程序。我建议拿一本好书。查看[纸质版](https://rads.stackoverflow.com/amzn/click/com/1430248181)或[电子书的 Pro Spring Security（这是免费的 DRM，感谢 APress！）](http://www.apress.com/9781430248187)。那本书是 2 天前（2013 年 3 月 20 日）发布的，所以它是全新的和最新的。[DRM 免费电子书可从 apress.com](http://www.apress.com/9781430248187)下载。

# python - 如何在龙卷风中通过 UIModule 将 css 文件放在首位？

> ID：15575967
> 
> 赞同：3
> 
> 时间：2013-03-22T17:00:05.463
> 
> 标签：python, tornado

我想将一组 css 文件添加到头部。例如，

蟒蛇文件：

模块.py

```
class SomeModule(tornado.web.UIModule):
    def css_files(self):
        return [self.handler.static_url('css/modules/some-module.css'),]

    def render(self, some_data=None):
        result = ''
        if some_data is not None:
            """to do something with data"""
        return result 
```

服务器.py

```
app = Application(
    ...
    ui_module=modules
    ...
) 
```

模板文件：

```
...
{% module SomeModule(some_data=put_data_here) %} 
```

结果，我只看到从渲染返回的数据。但是没有在 head 标签之间设置 css 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-04T23:40:49.137

模板文件的结果取决于您如何生成模板文件。据我所知，您没有在问题中包含该代码。

如果你想使用`css_files()`或类似的，你需要使用`self.render_string()`以便让 Tornado 有机会在适当的地方插入 CSS 标签。

有关如何使用的示例`tornado.web.UIModule`，请参阅[此 Slideshare 演示文稿](http://de.slideshare.net/gavinmroy/an-introduction-to-tornado)

# asp.net-mvc-4 - 当连接字符串 configSource 到位时，Visual Studio 2012 添加控制器与上下文失败

> ID：15575968
> 
> 赞同：5
> 
> 时间：2013-03-22T17:00:08.940
> 
> 标签：asp.net-mvc-4, frameworks, entity, configsource

使用 VS 2012 + MVC4 + EF5 尝试使用上下文添加控制器失败，当连接字符串 configSource 到位并出现错误时：

“无法检索 MvcTestApp.Models.DummyClass 的元数据。无法打开 configSource 文件 'connections.config'。

顺便说一句：路径正确，应用程序实际运行正确。

Visual Studio 2012 EF5 是否支持在设计时将 connectionStrings configSource 放在单独的文件中？或者在开发过程中没有办法！

感谢您的反馈意见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-09T10:42:53.023

我也有同样的问题。我解决了它，将“connections.config”的副本放入

```
C:\Users\[CurrentUser]\AppData\Local\Temp. 
```

希望这对您有所帮助。

# asp.net-mvc - 在 mvc 4 asp .net razor 中仅加载一次布局页面

> ID：15575969
> 
> 赞同：2
> 
> 时间：2013-03-22T17:00:14.393
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

嗨，我有 mvc 网站，我在其中使用布局以获得一致的外观和感觉。现在我的菜单是根据用户角色、级别等动态生成的。我已将菜单放在布局页面上。当用户登录时根据其从数据库中的角色生成菜单。当用户单击菜单时，它会在布局中加载相应的视图，但它还刷新布局页面，因为所有视图都有布局，所以菜单也会重新生成 cousing 数据库之旅。我应该如何避免重新加载菜单？我不想使用 ajax 在布局页面中加载视图，因为后退按钮不起作用并且新选项卡加载没有布局的页面。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:41:24.600

我所做的是使用 ajax.and 在 vi​​ewstart.chtml 中使用 ajax.and 在 vi​​ewstart.chtml 中写入没有布局的页面

布局 = Request.IsAjaxRequest() ？null : "~/Views/Shared/_Layout.cshtml";

因此，当请求通过链接（在新窗口中）时，布局页面将附带视图（这解决了新标签问题）。

2) 对于浏览器的后退按钮，使用 jquery.address 插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:13:54.650

会话变量的一个常见用途是存储用户及其角色、级别等。这可能会也可能不会避免数据库往返，具体取决于您存储会话的位置。例如，“InProc”会话状态（默认）存储在内存中，因此访问速度非常快）。请参阅：[对于 asp.net 中的会话状态模式，InProc 或 SQL Server 哪个更好？](https://stackoverflow.com/questions/8688047/which-one-is-better-inproc-or-sql-server-for-session-state-mode-in-asp-net)

# javascript - Google Chrome Frame 元标记是否支持在 Internet Explorer 8（或更早版本）中拖放 HTML 5 文件？

> ID：15575970
> 
> 赞同：1
> 
> 时间：2013-03-22T17:00:15.333
> 
> 标签：javascript, html, internet-explorer, drag-and-drop, fileapi

今天，我找到了这个链接。所以我在 Windows XP 的 IE 8 上安装了 Google Chrome Frame 插件并启用了它。

[http://davidwalsh.name/chrome-frame](http://davidwalsh.name/chrome-frame)

我正在尝试使用 HTML 5 API 在 Internet Explorer 8 中进行多文件上传。我在我的页面中放置了元标记，但它不支持拖放。它没有用。

据我了解，该插件允许 IE 使用 Google Chrome 的 HTML 5 JavaScript 引擎。这个 HTML 5 File API 是否与这个 JavaScript 引擎相关，或者它们是完全不同的东西？

代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Plupload Example</title>
    <link rel="stylesheet" type="text/css" href="http://extjs.cachefly.net/extjs-4.1.1-gpl/resources/css/ext-all.css" />
    <link rel="stylesheet" type="text/css" href="http://extjs.cachefly.net/extjs-4.1.1-gpl/examples/shared/example.css" />
    <style>
        #dragload
        {
            width: 300px;
            height: 300px;
            background:#BBBBBB;
            padding: 30px;
            text-align: center;
            margin: 0 0 20px 0;
        }
    </style>
</head>
<body>
    <h1>Plupload Example</h1>
    <p>Simple Upload Button</p>
    <p>The js is not minified so it is readable. See <a href="upload.js">upload.js</a>.</p>
    <script type="text/javascript" src="http://extjs.cachefly.net/extjs-4.1.1-gpl/bootstrap.js"></script>

    <div id="dragload"><h1>Drag files here, or use the button below</h1></div>

    <script type="text/javascript" src="../../ux/upload/plupload/js/plupload.js"></script>
    <script type="text/javascript" src="../../ux/upload/plupload/js/plupload.html4.js"></script>
    <script type="text/javascript" src="../../ux/upload/plupload/js/plupload.html5.js"></script>
    <script type="text/javascript" src="../../ux/upload/plupload/js/plupload.flash.js"></script>
    <script type="text/javascript" src="../../ux/upload/plupload/js/plupload.silverlight.js"></script>

    <script type="text/javascript" src="upload.js"></script>
</body>
</html> 
```

# linux - 用于将带有空格分隔标记的字符串转换为数组的 Bash 脚本

> ID：15575976
> 
> 赞同：11
> 
> 时间：2013-03-22T17:00:35.907
> 
> 标签：linux, arrays, bash, shell

我有一个字符串

```
echo $STRING 
```

这使

```
first second third fourth fifth 
```

基本上是一个列表分隔的空格。

我如何获取该字符串并使其成为一个数组，以便

```
array[0] = first
array[1] = second 
```

ETC..

我试过了

```
IFS=' ' read -a list <<< $STRING 
```

但是当我做一个

```
echo ${list[@]} 
```

它只打印出“第一”，没有别的

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-22T17:03:28.653

其实很简单：

```
list=( $STRING ) 
```

或者更详细地说：

```
declare -a list=( $STRING ) 
```

PS：您不能导出 IFS 并在同一命令中使用新值。您必须先声明它，然后在以下命令中使用它的效果：

```
$ list=( first second third )
$ IFS=":" echo "${list[*]}"
first second third
$ IFS=":" ; echo "${list[*]}"
first:second:third 
```

# playframework - 使用 playframework 2.1 编译 play2-scheduled-job-demo

> ID：15575990
> 
> 赞同：0
> 
> 时间：2013-03-22T17:01:26.263
> 
> 标签：playframework, scheduled-tasks, background-process, web-worker, playframework-2.1

我正在开发 Play Framework 2.1 应用程序，该应用程序应该使用 Heroku 工作人员测功机单元来执行耗时的后台作业。关于如何做到这一点有一些一般性的讨论，但没有太多实际的例子。

这个詹姆斯沃德的例子看起来非常接近我想要实现的目标：

[https://github.com/jamesward/play2-scheduled-job-demo](https://github.com/jamesward/play2-scheduled-job-demo)

它是为 Play Framework 2.0.1 实现的，所以我仔细地将项目文件转换为 2.1 版本。不幸的是，由于 TickJob.java 中的错误，该项目无法编译

```
package jobs;

import models.Tick;
import play.api.Play;
import play.api.Mode;
import play.api.Application;

import java.io.File;

public class TickJob {

    public static void main(String[] args) {

        Application application = 
            new Application(new File(args[0]), TickJob.class.getClassLoader(), null, Mode.Prod());

        Play.start(application);

        Tick tick = new Tick("Hello from the TickJob");
        tick.save();
   }

} 
```

这是错误的日志：

```
 TickJob.java:15: play.api.Application is abstract; cannot be instantiated 
```

显然，这是 2.0.1 和 2.1.0 API 更改的结果。那么如何在 2.1.0 中解决这个问题呢？

据我了解， TickJob 类中的主要方法是工作进程的入口点。从 Procfile 可以清楚地看出，TickJob 作为一个单独的 java 应用程序在 Heroku 上运行，而不是一个播放框架应用程序。所以我假设在 main 方法中创建 Play 应用程序的目的是访问 Web 应用程序和模型类的数据库。

**更新**

编译问题现已修复。我无法在 Windows XP 上使用 Foreman 在本地运行应用程序，因此我采取了以下步骤来实际观察应用程序的运行情况。

1.  在控制台类型`play`中，然后在播放控制台类型`$ h2-browser`中。这将以 TCP 服务器模式启动 h2 数据库`/localhost:9092/`
2.  执行以下 bat 脚本在端口 9000 上启动 play web 应用程序并将其连接到数据库

    ```
    set PORT=9000
    set DATABASE_URL=jdbc:h2:tcp:localhost:9092/mem/play

    java -Dhttp.port=%PORT% -Ddb.default.url=%DATABASE_URL% -DapplyEvolutions.default=true -cp "target/staged/*"; play.core.server.NettyServer target/.. 
    ```

    这是`target/start`由`play stage`命令生成的脚本与来自 Procfile 的参数的混合。

3.  执行另一个 bat 脚本以触发与 Web 进程连接到同一数据库的后台作业进程，这就是示例的重点

    ```
     set DATABASE_URL=jdbc:h2:tcp://localhost:9092/mem/play

     java -Dconfig.file=conf/application.conf -Ddb.default.url=%DATABASE_URL% -cp "target/staged/*"; jobs.TickJob .

     pause 
    ```

不要忘记 java 命令末尾的点。这就是`args[0]`在`new DefaultApplication(new File(args[0]), ...)`. 我花了很长时间才弄清楚）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:48:15.923

您必须使用`DefaultApplication`而不是`Application`：

```
public class TickJob {

    public static void main(String[] args) {

        Application application = 
            new DefaultApplication(new File(args[0]), TickJob.class.getClassLoader(), null, Mode.Prod());

        Play.start(application);

        Tick tick = new Tick("Hello from the TickJob");
        tick.save();
   }

} 
```

API 可以在这里找到：[http ://www.playframework.com/documentation/api/2.1.0/scala/index.html#play.api.DefaultApplication](http://www.playframework.com/documentation/api/2.1.0/scala/index.html#play.api.DefaultApplication)

它已在 2.1 版本中进行了更改。

# jquery - 表单验证后的 Ajax 函数

> ID：15575991
> 
> 赞同：0
> 
> 时间：2013-03-22T17:01:27.957
> 
> 标签：jquery, ajax, validation

我正在使用 jQuery.validate() 来验证表单。

我试图在验证后执行 $.ajax 函数，但它不起作用。

代码结构如下：

```
$("#submit").click(function(){    
    if($("#form").valid() == true)
    {
        AJAX FUNCTION HERE, NOT WORKING
    }
});

$("#form").validate({
    VALIDATION HERE, IT WORKS
}); 
```

如果我在验证代码之外编写 AJAX FUNCTION，它可以工作，但我需要在表单验证之后处理它。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:26:24.053

在你的点击事件中添加这个：

```
var valid = $('#frm').valid();
            if (!valid) {
                return false;
            }
//ajax code here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:13:56.367

```
$("#submit").click(function(){    
    if($("#form").valid() != true)
    {
        alert('This is not returning true but '+$("#form").valid() );
    }
    else{
        //Ajax Call goes Here
    }
}); 
```

# pdf - PDF 内容和搜索引擎优化

> ID：15575992
> 
> 赞同：0
> 
> 时间：2013-03-22T17:01:27.723
> 
> 标签：pdf, seo

我的客户有这个“基于 PDF”的网站。它基本上没有内容，因为每篇文章都有一个 PDF 附件，通过 Google Docs Embed 呈现给用户。所以底线是，谷歌在这里几乎没有什么可以索引的，因此他的网站在搜索引擎上的排名不是很好。

所以我的问题是 - 我知道如果隐藏内容相对于网站上的其他内容，谷歌在某种程度上是可以接受的。所以我的想法是通过 PHP 从 PDF 中提取内容并将其隐藏在网站上。但是，如果那里实际上没有其他内容（导航中的锚链接除外），Google 如何知道它是否是相对的

所以我需要隐藏内容，因为从用户的角度来看，多次呈现相同的内容是没有意义的。那里必须有一些内容，因为 PDF 是通过 Google Doc Viewer 嵌入的，而 Google 看不到它的内容。此外，客户这样做是因为他不希望 Google 访问他的 PDF……但他希望 Google 访问它的内容……

我知道这有点不合理，但是客户想要他想要的东西，我只想检查是否有人知道如何解决这个问题？可以只在通过 Google Docs 嵌入 PDF 的页面上显示从 PDF 中提取的隐藏内容吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T17:03:49.083

仅仅为了谷歌的利益而将内容放在那里会给你带来麻烦，因为这*正是*谷歌不希望你做的事情。提供内容只是为了操纵你的排名是本书中最大的禁忌。

如果您已经拥有文本形式的内容，为什么不以这种方式显示它而不是 PDF 文档呢？这样您的网站更易于使用、搜索引擎友好，并且不需要使用漏洞百出的 Adob​​e Acrobat？如果您仍然希望文档以 PDF 格式提供，只需将其提供为可供下载。

# javascript - 如何为 jquery mouseover 添加延迟？

> ID：15575993
> 
> 赞同：23
> 
> 时间：2013-03-22T17:01:31.877
> 
> 标签：javascript, jquery

我在一页上有一堆图像，我正在使用以下内容来触发事件：

```
$('.img').on('mouseover', function() {
 //do something

}); 
```

有没有办法增加延迟，如果用户悬停可能 1 秒，那么它会“//做某事”或实际触发“鼠标悬停”事件？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-22T17:03:09.943

您可以使用`setTimeout`

```
var delay=1000, setTimeoutConst;
$('.img').on('hover', function() {
  setTimeoutConst = setTimeout(function() {
    // do something
  }, delay);
}, function() {
  clearTimeout(setTimeoutConst);
}); 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-03-22T17:04:26.243

如果用户离开得太早，您可以使用 a`setTimeout`和 a来做到这一点：`clearTimeout`

```
var timer;
var delay = 1000;

$('#element').hover(function() {
    // on mouse in, start a timeout

    timer = setTimeout(function() {
        // do your stuff here
    }, delay);
}, function() {
    // on mouse out, cancel the timer
    clearTimeout(timer);
}); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-22T17:04:20.033

使用计时器并在鼠标离开时将其清除，以防他们在 1000 毫秒内离开

```
var timer;

$('.img').on({
    'mouseover': function () {
        timer = setTimeout(function () {
            // do stuff
        }, 1000);
    },
    'mouseout' : function () {
        clearTimeout(timer);
    }
}); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-09-10T22:08:56.433

我也在寻找类似的东西，但也有二次延迟。我在这里选择了一个答案并对其进行了扩展

此示例在鼠标悬停 X 秒后显示一个 div，并在鼠标悬停 X 秒后将其隐藏。但如果您将鼠标悬停在显示的 div 上，则会禁用。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<style type="text/css">
.foo{
  position:absolute; display:none; padding:30px;
  border:1px solid black; background-color:white;
}
</style>
<h3 class="hello">
  <a href="#">Hello, hover over me
    <span class="foo">foo text</span>
  </a>
</h3>

<script type="text/javascript">
var delay = 1500, setTimeoutConst, 
    delay2 = 500, setTimeoutConst2;
$(".hello").mouseover(function(){
  setTimeoutConst = setTimeout(function(){
    $('.foo').show();
  },delay);
}).mouseout(function(){
  clearTimeout(setTimeoutConst );
  setTimeoutConst2 = setTimeout(function(){
    var isHover = $('.hello').is(":hover");
    if(isHover !== true){
      $('.foo').hide();
    }
  },delay2);
});
</script> 
```

[工作示例](https://jsfiddle.net/cm2opegm/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-22T17:11:32.743

您可以像这样使用 jquery .Delay（未经测试）：

```
$("#test").hover(
    function() {
        $(this).delay(800).fadeIn();
    }
); 
```

[http://api.jquery.com/delay/](http://api.jquery.com/delay/)

# php - 返回一个嵌入在 php 函数中的 onclick 链接

> ID：15575996
> 
> 赞同：0
> 
> 时间：2013-03-22T17:01:46.847
> 
> 标签：php, javascript, html

我正在尝试返回一个带有 onclick 功能的链接，但我认为我的引文感到困惑，因为该链接不起作用。

这是代码：

```
return "<a class='link_to_member' onClick='window.location.href='page_detail.php?page=$item_id';'>$item_name</a>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:03:56.990

您始终可以通过在引号前面放置转义字符来转义引号`\`。

```
return "<a class='link_to_member' onClick='window.location.href=\"page_detail.php?page=$item_id\";'>$item_name</a>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:05:59.283

您应该转义内部单引号。

```
 return "<a class='link_to_member' 
          onClick='window.location.href=\'page_detail.php?page=$item_id\';'>
           $item_name
   </a>"; 
```

# python - 将 wxPython 类中的函数移动到不同线程的最简单方法是什么？

> ID：15575997
> 
> 赞同：0
> 
> 时间：2013-03-22T17:01:46.873
> 
> 标签：python, multithreading, wxpython

我对 Python 比较陌生，但正在使用它来实现一些自动化。我在类以及内部函数如何与外部函数对话方面遇到了一些麻烦。我真正的目标是从现有函数中创建一个线程，而不需要重写我的大部分代码。

这是我目前的模型。我有一个超类`AppWindow(wx.Frame)`，其中定义了许多函数。

`InitUI`创建接口并初始化变量。 `ProcessComputers`伸手去不同的工作站收集一些信息。这在很大程度上依赖于我在此应用程序基于控制台时编写的模块。还有各种其他杂项。真正不值得调用的功能。

这显然对 GUI 不利，因为一切都依赖于在屏幕刷新和接受事件之前完成的那些进程。

由于`ProcessComputer`已经与我的 UI 函数分开，我想知道将这些函数移动到单独的线程中的最简单方法是什么，而无需重写和重命名对象和变量？

[我已经尝试按照这里](http://wiki.wxpython.org/Non-Blocking%20Gui)的建议创建一个新类。问题是当我创建了两个新类，并将胆量`ProcessComputer`转移到 CountEvent 类时，一切都崩溃了。我无法再更新 self.textField，`AppWindow`也无法使用 AppWindow.textField 引用它。新类无法访问我的所有变量。有没有更好的方法将此函数移动到它自己的类中，而无需重写太多当前正在工作的代码？

如果不是，那么重写内脏的最佳方法是什么，`ProcessComputer`以便他们仍然使用其中的其余代码`AppWindow`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:32:48.640

我会把 ProcessComputer 函数留在它所在的位置，让你的 GUI 调用它。但是把它的胆量放在一个基于 Thread 的类中的函数中。然后，当您需要更新 GUI 时，您必须调用 wxPython 的线程安全方法之一：wx.CallAfter、wx.CallLater 或 wx.PostEvent。

这里有几个很好的资源：

*   [http://wiki.wxpython.org/LongRunningTasks](http://wiki.wxpython.org/LongRunningTasks)
*   [http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/](http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/)

这是您的线程类的样子：

```
 ########################################################################
class TestThread(Thread):
    """Test Worker Thread Class."""

    #----------------------------------------------------------------------
    def __init__(self, wxObject):
        """Init Worker Thread Class."""
        Thread.__init__(self)
        self.wxObject = wxObject
        self.start()    # start the thread

    #----------------------------------------------------------------------
    def run(self):
        """Run Worker Thread."""
        # This is the code executing in the new thread.
        for i in range(6):
            time.sleep(10)
            amtOfTime = (i + 1) * 10
            wx.PostEvent(self.wxObject, ResultEvent(amtOfTime))
        time.sleep(5)
        wx.PostEvent(self.wxObject, ResultEvent("Thread finished!")) 
```

其余代码可以类似于第二个链接中的示例。或者，您可以使用 wiki 的第一个链接查看其他几种方法。