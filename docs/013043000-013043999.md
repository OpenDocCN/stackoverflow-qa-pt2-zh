# StackOverflow 问答 13043000-13043999

# android - 需要更多了解android中的AsyncTask

> ID：13043001
> 
> 赞同：1
> 
> 时间：2012-10-24T04:22:45.087
> 
> 标签：android, android-asynctask

我有这行代码完全没有问题，唯一的问题是每次执行此代码时，应用程序都会等待所有进程完成，使界面可能有半秒钟没有响应。我找到的最佳解决方案是使用 a `Thread`，但它会导致一些问题，所以我求助于`AsyncTask`我无法理解的方法。谁能帮助我如何将它实现到这行代码？

```
 ima.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    search.clearFocus();
                    currentItem = ssil;
                    if (currentRoom.equals("None")) {
                        Toast.makeText(StartMoving.this, "Please select a room before adding an item", Toast.LENGTH_LONG).show();
                    }else{

                        try {
                            String currentitemholder = startmoving.getSingleItemName(currentMove, currentRoom, currentItem);
                            if (currentitemholder.equals(currentItem)) {
                                String ssi = startmoving.getSingleItemValue(currentMove, currentRoom, currentItem);
                                String ssiw = startmoving.getSingleItemWeight(currentMove, currentRoom, currentItem);
                                String stw = startmoving.getTotalWeight(currentMove);
                                String srw = startmoving.getRoomWeight(currentMove, currentRoom);
                                String diw = startmoving.getListItemWeight(currentItem);
                                int istw = Integer.parseInt(stw);
                                int isiw = Integer.parseInt(ssiw);
                                int isi = Integer.parseInt(ssi);
                                int isrw = Integer.parseInt(srw);
                                int idiw = Integer.parseInt(diw);
                                currentItemValue = "" + ++isi;
                                currentItemWeight = "" + (isiw + idiw);
                                currentTotalItemWeight = "" + (istw + idiw);
                                currentRoomWeight = "" + (isrw + idiw);
                                currentTotalItem = startmoving.getTotalItem(currentMove) + 1; 
                                startmoving.updateItems(currentMove, currentRoom, currentItem, currentItemValue, currentItemWeight);
                                startmoving.setMoveWeight(currentTotalItemWeight, currentMove);
                                startmoving.setRoomWeight(currentRoomWeight, currentMove, currentRoom); 
                                startmoving.setTotalItem(currentMove, currentTotalItem);
                                String displayname = startmoving.getItemName(currentMove, currentRoom);
                                String displayvalue = startmoving.getItemValue(currentMove, currentRoom);
                                String displayweight = startmoving.getItemWeightLBS(currentMove, currentRoom);
                                String displaytotalweight = startmoving.getTotalWeightLBS(currentMove);
                                String displayroomweight = startmoving.getRoomWeightLBS(currentMove, currentRoom);
                                roomContent.setText(displayname);
                                itemValue.setText(displayvalue);
                                itemWeight.setText(displayweight);
                                totalweight.setText(displaytotalweight);
                                roomweight.setText(displayroomweight); 
                                int displaytotalitem = startmoving.getTotalItem(currentMove); 
                                totalitem.setText("" + displaytotalitem);
                            }
                        }catch (Exception e) {
                            // TODO Auto-generated catch block
                            currentItemValue = "1";
                            currentItemWeight = ssiw;
                            String stw = startmoving.getTotalWeight(currentMove);
                            String srw = startmoving.getRoomWeight(currentMove, currentRoom);
                            String diw = startmoving.getListItemWeight(currentItem);
                            int istw = Integer.parseInt(stw);
                            int isrw = Integer.parseInt(srw);
                            int idiw = Integer.parseInt(diw);
                            currentTotalItemWeight = "" + (istw + idiw);
                            currentRoomWeight = "" + (isrw + idiw);
                            currentTotalItem = startmoving.getTotalItem(currentMove) + 1; 
                            startmoving.addNewItems(currentMove, currentRoom, currentItem, currentItemValue, currentItemWeight);
                            startmoving.setMoveWeight(currentTotalItemWeight, currentMove);
                            startmoving.setRoomWeight(currentRoomWeight, currentMove, currentRoom); 
                            startmoving.setTotalItem(currentMove, currentTotalItem);
                            startmoving.setTotalItem(currentMove, currentTotalItem);
                            String displayname = startmoving.getItemName(currentMove, currentRoom);
                            String displayvalue = startmoving.getItemValue(currentMove, currentRoom);
                            String displayweight = startmoving.getItemWeightLBS(currentMove, currentRoom);
                            String displaytotalweight = startmoving.getTotalWeightLBS(currentMove);
                            String displayroomweight = startmoving.getRoomWeightLBS(currentMove, currentRoom);
                            roomContent.setText(displayname);
                            itemValue.setText(displayvalue);
                            itemWeight.setText(displayweight);
                            totalweight.setText(displaytotalweight);
                            roomweight.setText(displayroomweight); 
                            int displaytotalitem = startmoving.getTotalItem(currentMove); 
                            totalitem.setText("" + displaytotalitem);
                        }
                    }
                }
            });

            imr.setOnClickListener(new OnClickListener() {

                @SuppressLint("ShowToast")
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    search.clearFocus();
                    currentItem = ssil;
                    if (currentRoom.equals("None")) {
                        Toast.makeText(StartMoving.this, "Please select a room before removing an item", Toast.LENGTH_LONG).show();
                    }else{

                        try {
                            String currentitemholder = startmoving.getSingleItemName(currentMove, currentRoom, currentItem);
                            if (currentitemholder.equals(currentItem)) {
                                String ssi = startmoving.getSingleItemValue(currentMove, currentRoom, currentItem);
                                String ssiw = startmoving.getSingleItemWeight(currentMove, currentRoom, currentItem);
                                String stw = startmoving.getTotalWeight(currentMove);
                                String srw = startmoving.getRoomWeight(currentMove, currentRoom);
                                String diw = startmoving.getListItemWeight(currentItem);
                                int istw = Integer.parseInt(stw);
                                int isiw = Integer.parseInt(ssiw);
                                int isi = Integer.parseInt(ssi);
                                int isrw = Integer.parseInt(srw);
                                int idiw = Integer.parseInt(diw);
                                if (isi > 1) {
                                    currentItemValue = "" + --isi;
                                    currentItemWeight = "" + (isiw - idiw);
                                    currentTotalItemWeight = "" + (istw - idiw);
                                    currentRoomWeight = "" + (isrw - idiw);
                                    currentTotalItem = startmoving.getTotalItem(currentMove) - 1; 
                                    startmoving.updateItems(currentMove, currentRoom, currentItem, currentItemValue, currentItemWeight);
                                    startmoving.setMoveWeight(currentTotalItemWeight, currentMove);
                                    startmoving.setRoomWeight(currentRoomWeight, currentMove, currentRoom); 
                                    startmoving.setTotalItem(currentMove, currentTotalItem);
                                    startmoving.setTotalItem(currentMove, currentTotalItem);
                                    String displayname = startmoving.getItemName(currentMove, currentRoom);
                                    String displayvalue = startmoving.getItemValue(currentMove, currentRoom);
                                    String displayweight = startmoving.getItemWeightLBS(currentMove, currentRoom);
                                    String displaytotalweight = startmoving.getTotalWeightLBS(currentMove);
                                    String displayroomweight = startmoving.getRoomWeightLBS(currentMove, currentRoom);
                                    roomContent.setText(displayname);
                                    itemValue.setText(displayvalue);
                                    itemWeight.setText(displayweight);
                                    totalweight.setText(displaytotalweight);
                                    roomweight.setText(displayroomweight); 
                                    int displaytotalitem = startmoving.getTotalItem(currentMove); totalitem.setText("" + displaytotalitem);
                                }else{
                                    String sstw = startmoving.getTotalWeight(currentMove);
                                    String ssrw = startmoving.getRoomWeight(currentMove, currentRoom);
                                    int isstw = Integer.parseInt(sstw);
                                    int issrw = Integer.parseInt(ssrw);
                                    currentTotalItemWeight = "" + (isstw - idiw);
                                    currentRoomWeight = "" + (issrw - idiw);
                                    currentTotalItem = startmoving.getTotalItem(currentMove) - 1; startmoving.setMoveWeight(currentTotalItemWeight, currentMove);
                                    startmoving.setRoomWeight(currentRoomWeight, currentMove, currentRoom);
                                    startmoving.deleteItem(currentMove, currentRoom, currentItem); startmoving.setTotalItem(currentMove, currentTotalItem);
                                    startmoving.setTotalItem(currentMove, currentTotalItem);
                                    String displayname = startmoving.getItemName(currentMove, currentRoom);
                                    String displayvalue = startmoving.getItemValue(currentMove, currentRoom);
                                    String displayweight = startmoving.getItemWeightLBS(currentMove, currentRoom);
                                    String displaytotalweight = startmoving.getTotalWeightLBS(currentMove);
                                    String displayroomweight = startmoving.getRoomWeightLBS(currentMove, currentRoom);
                                    roomContent.setText(displayname);
                                    itemValue.setText(displayvalue);
                                    itemWeight.setText(displayweight);
                                    totalweight.setText(displaytotalweight);
                                    roomweight.setText(displayroomweight); 
                                    int displaytotalitem = startmoving.getTotalItem(currentMove); 
                                    totalitem.setText("" + displaytotalitem);
                                }   
                            }
                        }catch (Exception e) {
                            // TODO Auto-generated catch block

                        }
                    }
                }
            }); 
```

如您所见，这是两个按钮，它们调用数据库（发送和接收数据）并将其显示到 GUI。

**编辑**

感谢您的精彩回复！在决定正确答案之前，我会先研究 AsyncTask。仍然需要处理你给我的所有这些信息。

**编辑** 忘了提到 startmoving 是我的数据库模块

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T04:32:13.853

如果您执行长时间的操作，例如加载文件或访问数据，您的 Android 应用程序的用户界面将阻塞，直到相应的代码完成。

[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)

为了使用 AsyncTask 类，您必须扩展它并至少覆盖 doInBackground() 方法。

您需要实现的最常见方法是：

```
 1\. onPreExecute() – called on the UI thread before the thread starts running. This method is usually used to setup the task, for example by displaying a progress bar.

   2\. doInBackground(Params…) – this is the method that runs on the background thread. In this method you should put all the code you want the application to perform in background. Referring to our Simple RSS Aplication, you would put here the code that downloads the XML feed and does the parsing. The doInBackground() is called immediately after onPreExecute(). When it finishes, it sends the result to the onPostExecute().

   3\. onProgressUpdate() - called when you invoke publishProgress() in the doInBackground().

   4\. onPostExecute(Result) – called on the UI thread after the background thread finishes. It takes as parameter the result received from doInBackground(). 
```

现在在您的代码选择中，您可以做什么。

所有数据库操作和数据操作代码都写在`doInBackground(Params…)`方法中，并在方法中显示数据`onPostExecute(Result)`。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T04:39:33.553

**AsyncTask**在另一个线程内执行所有内容，该`doInBackground()`线程无权访问您的视图所在的 GUI。

`preExecute()`并`postExecute()`在此新线程中发生繁重工作之前和之后为您提供对 GUI 的访问，您甚至可以将长时间操作的结果传递`postExecute()`给然后显示任何处理结果。

Android 通过一个线程修改用户界面，即所谓的 UI 线程。如果您直接在 UI 线程上执行长时间运行的操作，例如从 Internet 下载文件，您的应用程序的用户界面将“冻结”，直到相应的任务完成。发生这种情况时，用户很容易认为您的应用程序很慢。

AsyncTask 允许正确和轻松地使用 UI 线程。此类允许在 UI 线程上执行后台操作并发布结果，而无需操作线程和/或处理程序。

1.  `onPreExecute()`– 在线程开始运行之前在 UI 线程上调用。此方法通常用于设置任务，例如通过显示进度条。

2.  `doInBackground(Params…)`– 这是在后台线程上运行的方法。在这种方法中，您应该将您希望应用程序在后台执行的所有代码。参考我们的简单 RSS 应用程序，您可以将下载 XML 提要并进行解析的代码放在这里。在 onPreExecute() 之后立即调用 doInBackground()。完成后，它将结果发送到 onPostExecute()。

3.  `onProgressUpdate()`- 在 doInBackground() 中调用 publishProgress() 时调用。

4.  `onPostExecute(Result)`– 在后台线程完成后在 UI 线程上调用。它将从 doInBackground() 接收到的结果作为参数。

AsyncTask 是一个泛型类，它使用 3 种类型： AsyncTask。

```
Params – the input. what you pass to the AsyncTask
Progress – if you have any updates, passed to onProgressUpdate()
Result – the output. what returns doInBackground() 
```

创建任务后，可以像这样执行它：

```
new DownloadTast().execute(url1, url2, urln); 
```

[这是 AsyncTask 的一个示例](http://eliasbland.wordpress.com/2011/03/11/an-example-of-how-to-run-a-background-task-and-report-progress-in-the-status-bar-using-asynctask-on-android/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T04:42:11.403

好的，在不给你解决方案的情况下，我认为最好开始阅读 Android 中的异步请求：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)。了解 Web 的异步特性将帮助您了解 UI 与其可能呈现的数据的分离。

响应性是将 UI 与数据分开的第一大原因。对于使用 EDT（事件分配线程）的 Java Swing 开发人员来说，这可能是最好的解释：http: [//docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)。有很多缓慢的应用程序示例，开发人员会将长时间运行的进程附加到他们的按钮或其他东西上，然后尝试通过使用自己的线程来加快处理速度来修复它。Swing 最终在 Java 6 中使用 SwingWorker 和 doInBackground() 解决了这个问题。对于转向 Android 的 Swing 开发人员，他们可能会查看 AsyncTask 并问，为什么它在 Java 中没有那么简单？

因此，花点时间熟悉 AsyncTask，了解如何使用它，如何将它与 Listeners 结合以获得更大的灵活性，然后您将了解如何更改代码。

让我们知道您是否需要更多帮助以指明正确的方向。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T04:48:40.123

基本上，您需要扩展 AsyncTask 类并进行自己的实现。您利用了 doInBackground() 函数在非 UI 线程中运行的事实，并且它返回的结果可以在 UI 线程中运行的 onPostExecute() 函数中使用。

你提到你的代码调用了一个数据库，所以我假设你的“startmoving”对象是数据库模块。对于下面的示例代码，我将仅将其称为 MovingDb 类，因为它没有在您的代码中显示实际的类名是什么。

```
// this will hold all your calculated value
private class DisplayInfo {
   String displayName, displayValue, displayWeight, displayTotalWeight, displayRoomWeight;
   int displayTotalItem;
}

private class ItemHolderTask extends AsyncTask<MovingDb, Integer, DisplayInfo> {

   protected DisplayInfo doInBackground(MovingDb... movingDbs) {
      // this code runs in background thread so do your DB work here
      if (movingDbs != null && movingDbs.length > 0 && movingDbs[0] != null) {
         MovingDb startMoving = movingDbs[0];
         // move all your db operations here
         String currentItemHolder = startMoving.getSingleIteName(....)
         // blah blah
         DisplayInfo displayInfo = new DisplayInfo();
         displayInfo.displayName = startMoving.getItemName(...);
         displayInfo.displayValue = startMoving.getItemValue(...);
         // set up the rest of your display info values
         return displayInfo;
      }
   }

   protected void onPostExecute(DisplayInfo displayInfo) {
      // the displayInfo you return from doInBackground comes here
      if (displayInfo != null) {
         roomContent.setText(displayInfo.displayName);
         itemValue.setText(displayInfo.displayValue);
         // and so on...
      }
   }
} 
```

在您的 onClick 函数中，您只需启动 ItemHolderTask：

```
new ItemHolderTask().execute(startMoving); 
```

# c# - 如何对同时包含字符串和数值的 varchar 类型列进行排序

> ID：13043002
> 
> 赞同：2
> 
> 时间：2012-10-24T04:23:02.337
> 
> 标签：c#, sql, sql-server, sql-server-2008

我有一个列名为“BatchNo”的表，它同时包含字符串和数值。当我输入一个选择查询时，我得到了以下结果。

![在此处输入图像描述](../Images/e71332a4f131c45efcddeb365b34755d.png)

我想按以下格式对“BatchNo”列进行排序

![在此处输入图像描述](../Images/943047eeeb8cbf2bd1f8902cd582308a.png)

在我的问题中，未来的批次可能有 a,b,c .... 带有数值或只有数值的字母。我如何对该列进行排序？希望大家能帮我解决一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T04:30:55.623

为什么不将表的架构更改为？

```
CREATE TABLE tableName
(
    ShipmentNo INT,
    ProjectCode VARCHAR(50),
    BatchNo INT,
    SubBatch INT,
    .....
) 
```

这样，就是按照你想要的方式对 valkues 进行排序。

后续问题，`BatchNo`仅具有来自 的单个字符值`A-Z`，例如

```
11a
11b 
```

并不是

```
11aa 
```

**更新 1**

```
SELECT   *
FROM     tableName
ORDER BY CASE ISNUMERIC(batchNo)
            WHEN 1 THEN batchNo
            ELSE CAST(LEFT(batchNo, LEN(batchNo) - 1) AS INT)
         END 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!3/59a87/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T05:37:15.123

尝试这个：

```
SELECT *
FROM tableName
ORDER BY 
CAST(LEFT(BatchNo, PATINDEX('%[^0-9]%', BatchNo + 'Z')-1) AS INT),
BatchNo 
```

# [SQL小提琴演示](http://sqlfiddle.com/#!3/31ecd/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T05:01:33.270

这个怎么样：

```
SELECT *
FROM TABLE_NAME
ORDER BY CAST(LEFT(BatchNo, PATINDEX('%[^0-9]%', BatchNo + 'A')-1) AS INT) 
```

查询适用于仅以数值开头的字符串。

# java - 将项目添加到 jList

> ID：13043004
> 
> 赞同：-4
> 
> 时间：2012-10-24T04:23:29.630
> 
> 标签：java, jlist

我在互联网上搜索过，并尝试了很多不同的解决方案，但每个解决方案都会导致不同的问题。这是代码：

```
String path = "path usually goes here"; 
File folder = new File(path);
File[] listOfFiles = folder.listFiles();

for (;this.filen < listOfFiles.length; filen++) {
    File lof = new File("path and stuff/Assignment" + filen + ".txt");

    try {
        BufferedReader bufferedReader = new BufferedReader(
                    new InputStreamReader(
                    new FileInputStream(lof)));
                    String sCurrentLine;
                    while ((sCurrentLine = bufferedReader.readLine()) != null) {
                            int dDate = Integer.parseInt(sCurrentLine);
                            DateFormat dateFormat = new SimpleDateFormat("yyyyMMdd");
                            Date date = new Date();
                            int iDate = Integer.parseInt(dateFormat.format(date));
                            if (dDate < iDate) {
                                sCurrentLine = bufferedReader.readLine();
                                DefaultListModel listModel = new DefaultListModel();
                                listModel.addElement(sCurrentLine);
                            }
                            else {
                                sCurrentLine = bufferedReader.readLine();
                            }

                            bufferedReader.close();
        }
    } catch (FileNotFoundException ex) {
        ex.printStackTrace();
    } catch (IOException ex) {
        ex.printStackTrace();
    }
 } 
```

我很新，但我想做的是让它从文本文件中的一行中读取 dat，然后取决于它是在日期之前还是之后对其进行排序，但我不知道那是不是问题，因为它只是不会写入 jList。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T04:39:18.467

您是否尝试将数据保存在`listModel`? 如果是这样，那么您应该`listModel`在开始循环之前尝试声明和初始化。然后，在循环内，您只需继续将数据添加到`listModel`已经创建的数据中。

```
if (dDate < iDate) {
    sCurrentLine = bufferedReader.readLine();
    DefaultListModel listModel = new DefaultListModel();
    listModel.addElement(sCurrentLine);
} 
```

因为`DefaultListModel listModel = new DefaultListModel();`您在循环的每个实例中都创建了一个新的 listModel 。

# javascript - 在我的最后一列中搜索不起作用 DataTables

> ID：13043008
> 
> 赞同：2
> 
> 时间：2012-10-24T04:23:36.087
> 
> 标签：javascript, jquery, datatables

我有数据表。我在那里添加了一列和一些自定义。

**我的问题**：当我搜索最后一列“css 等级”并输入“A”时，它不起作用？

这是我的代码：

**HTML**

```
<div id="container">
      <h1>Live example</h1>

      <table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
        <thead>
          <tr>
             <th><input type="checkbox" value="checkall"/></th>
            <th>Rendering engine</th>
            <th>Browser</th>
            <th>Platform(s)</th>
            <th>Engine version</th>
            <th>CSS grade</th>
          </tr>
        </thead>
        <tbody>
          <tr class="odd gradeX">
             <td><input type="checkbox" value="checkall"/></td>
            <td>Trident</td>
            <td>Internet Explorer 4.0</td>
            <td>Win 95+</td>
            <td class="center"> 4</td>
            <td class="center">X</td>
          </tr>
          <tr class="even gradeC">
             <td><input type="checkbox" value="checkall"/></td>
            <td>Trident</td>
            <td>Internet Explorer 5.0</td>
            <td>Win 95+</td>
            <td class="center">5</td>
            <td class="center">C</td>
          </tr>
          <tr class="odd gradeA"> <td><input type="checkbox" value="checkall"/></td>
            <td>Trident</td>
            <td>Internet Explorer 5.5</td>
            <td>Win 95+</td>
            <td class="center">5.5</td>
            <td class="center">A</td>
          </tr>
          <tr class="even gradeA"> <td><input type="checkbox" value="checkall"/></td>
            <td>Trident</td>
            <td>Internet Explorer 6</td>
            <td>Win 98+</td>
            <td class="center">6</td>
            <td class="center">A</td>
          </tr>
          <tr class="odd gradeA"> <td><input type="checkbox" value="checkall"/></td>
            <td>Trident</td>
            <td>Internet Explorer 7</td>
            <td>Win XP SP2+</td>
            <td class="center">7</td>
            <td class="center">A</td>
          </tr>
          <tr class="even gradeA"> <td><input type="checkbox" value="checkall"/></td>
            <td>Trident</td>
            <td>AOL browser (AOL desktop)</td>
            <td>Win XP</td>
            <td class="center">6</td>
            <td class="center">A</td>
          </tr>
          <tr class="gradeA"> <td><input type="checkbox" value="checkall"/></td>
            <td>Gecko</td>
            <td>Firefox 1.0</td>
            <td>Win 98+ / OSX.2+</td>
            <td class="center">1.7</td>
            <td class="center">A</td>
          </tr>
          <tr class="gradeA"> <td><input type="checkbox" value="checkall"/></td>
            <td>Gecko</td>
            <td>Firefox 1.5</td>
            <td>Win 98+ / OSX.2+</td>
            <td class="center">1.8</td>
            <td class="center">A</td>
          </tr>
          <tr class="gradeA"> <td><input type="checkbox" value="checkall"/></td>
            <td>Gecko</td>
            <td>Firefox 2.0</td>
            <td>Win 98+ / OSX.2+</td>
            <td class="center">1.8</td>
            <td class="center">A</td>
          </tr>
          <tr class="gradeA"> <td><input type="checkbox" value="checkall"/></td>
            <td>Gecko</td>
            <td>Firefox 3.0</td>
            <td>Win 2k+ / OSX.3+</td>
            <td class="center">1.9</td>
            <td class="center">A</td>
          </tr>
          <tr class="gradeA"> <td><input type="checkbox" value="checkall"/></td>
            <td>Gecko</td>
            <td>Camino 1.0</td>
            <td>OSX.2+</td>
            <td class="center">1.8</td>
            <td class="center">A</td>
          </tr>
          <tr class="gradeA"> <td><input type="checkbox" value="checkall"/></td>
            <td>Gecko</td>
            <td>Camino 1.5</td>
            <td>OSX.3+</td>
            <td class="center">1.8</td>
            <td class="center">A</td>
          </tr>
          <tr class="gradeA"> <td><input type="checkbox" value="checkall"/></td>
            <td>Gecko</td>
            <td>Netscape 7.2</td>
            <td>Win 95+ / Mac OS 8.6-9.2</td>
            <td class="center">1.7</td>
            <td class="center">A</td>
          </tr>
          <tr class="gradeA"> <td><input type="checkbox" value="checkall"/></td>
            <td>Gecko</td>
            <td>Netscape Browser 8</td>
            <td>Win 98SE+</td>
            <td class="center">1.7</td>
            <td class="center">A</td>
          </tr>
          <tr class="gradeA"> <td><input type="checkbox" value="checkall"/></td>
            <td>Gecko</td>
            <td>Netscape Navigator 9</td>
            <td>Win 98+ / OSX.2+</td>
            <td class="center">1.8</td>
            <td class="center">A</td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <th>Rendering engine</th>
            <th>Browser</th>
            <th>Platform(s)</th>
            <th>Engine version</th>
            <th>CSS grade</th>
          </tr>
        </tfoot>
      </table>

    </div> 
```

**jQuery**

```
<script>
        $(document).ready(function(){
           jQuery.fn.dataTableExt.oSort['html-undefined']  = function(a,b) {
                return false;
            };
            $('.sorting_disabled').unbind('click');

             $('#example').dataTable( {
                           "aoColumns": [ 
                             { "bSortable": false },
                             null,
                             null,
                             null,
                             null,
                             null
                           ] } ); 
        });
    </script> 
```

或者你可以在这里查看我的代码：http: [//jsfiddle.net/guruhkharisma/94BZV/](http://jsfiddle.net/guruhkharisma/94BZV/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:23:15.073

您可以说这是一个错误...如果您将 X 更改为 1，它将搜索。

看起来数据表插件只搜索超过 1 个字母字符，但会搜索单个数字字符......

将 X 更改为 XX 即可。

将 X 更改为 9 即可。

把 X 换成 Z 就不行了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:46:25.947

尝试：

```
 $('#example').dataTable( {                            
      "aoColumns": [
        { "bSortable": false ,  "bSearchable" : false,
          "mData" : null,"sDefaultContent": '<input type = "checkbox">'},
           null,
           null,
           null,
           null,
           null
        ] } ); 
```

这是因为数据表过滤列索引搞砸了希望它会有所帮助

# windows-8 - 在Windows8中，如何将异步方法视为同步方法？

> ID：13043014
> 
> 赞同：1
> 
> 时间：2012-10-24T04:24:18.763
> 
> 标签：windows-8, microsoft-metro, windows-runtime

将`StoreBitmapImage`位图图像存储到磁盘的同步函数。但是当我编译时，我得到`System.AggregateException`了，我做错了什么？

```
public static void StoreBitmapImage(string uri,string fileName)
    {
        HttpClient httpClient = new HttpClient();
        IRandomAccessStream randomAccessStream = new InMemoryRandomAccessStream();
        Stream responseStream = httpClient.GetStreamAsync(new Uri(uri)).Result;//Get BMP from web

        Byte[] buffer = new byte[500];
        int read;

        do
        {
            read = responseStream.ReadAsync(buffer, 0, buffer.Length).Result;
            randomAccessStream.WriteAsync(buffer.AsBuffer()).GetResults();

        } while (read != 0);//convert responseStream into bytes

        randomAccessStream.FlushAsync().GetResults();
        randomAccessStream.Seek(0);

        StorageFolder folder = ApplicationData.Current.RoamingFolder;//prepare folder

        StorageFile file = null;
        if (folder != null && buffer != null)
            file = folder.CreateFileAsync(fileName, CreationCollisionOption.ReplaceExisting).GetResults();
        else
            return;

        using (IRandomAccessStream rStream = file.OpenAsync(FileAccessMode.ReadWrite).GetResults())
        using (IOutputStream oStream = rStream.GetOutputStreamAt(0))
        {
            DataWriter writer = new DataWriter(oStream);
            writer.UnicodeEncoding = Windows.Storage.Streams.UnicodeEncoding.Utf8;
            writer.WriteBytes(buffer);
            writer.StoreAsync().GetResults();
        }//write to folder
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:02:56.473

代码的主要准则之一`async`是“`async`一路向下”；换句话说，不要阻塞`async`代码。

遵循本指南，您应该制定您的方法`async`：

```
public static async Task StoreBitmapImage(string uri, string fileName)
{
  HttpClient httpClient = new HttpClient();
  IRandomAccessStream randomAccessStream = new InMemoryRandomAccessStream();
  Stream responseStream = await httpClient.GetStreamAsync(new Uri(uri)); //Get BMP from web

  Byte[] buffer = new byte[500];
  int read;

  do
  {
    read = await responseStream.ReadAsync(buffer, 0, buffer.Length);
    await randomAccessStream.WriteAsync(buffer.AsBuffer());
  } while (read != 0);//convert responseStream into bytes

  await randomAccessStream.FlushAsync();
  randomAccessStream.Seek(0);

  StorageFolder folder = ApplicationData.Current.RoamingFolder;//prepare folder

  StorageFile file = null;
  if (folder != null && buffer != null)
    file = await folder.CreateFileAsync(fileName, CreationCollisionOption.ReplaceExisting);
  else
    return;

  using (IRandomAccessStream rStream = await file.OpenAsync(FileAccessMode.ReadWrite))
  using (IOutputStream oStream = rStream.GetOutputStreamAt(0))
  {
    DataWriter writer = new DataWriter(oStream);
    writer.UnicodeEncoding = Windows.Storage.Streams.UnicodeEncoding.Utf8;
    writer.WriteBytes(buffer);
    await writer.StoreAsync();
  }//write to folder
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T05:38:45.963

[System.AggregateException](http://msdn.microsoft.com/en-us/library/system.aggregateexception.aspx)表示您的代码中有多个`Exceptions`。您能解释一下 ***如何将异步方法视为同步方法是什么意思吗？***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T08:03:37.190

您正尝试在调用异步方法后获得的 IAsyncOperation 对象上调用 GetResults。在大多数情况下，这将失败，因为异步方法返回时异步操作未完成。您得到的 AggregateException 可能是试图尽早获得结果的结果。您可以使用以下代码同步调用异步方法：

```
Task<StorageFile> task = folder.CreateFileAsync(fileName,
   CreationCollisionOption.ReplaceExisting).AsTask();

 // Read the result which will synchronously wait for the async operation
 StorageFile file = task.Result; 
```

由于 Microsoft 针对 Windows 应用商店应用程序的指南不允许同步调用异步代码，并且使用此类代码的应用程序可能无法通过认证，因此更好的解决方案是使您的方法也异步并使用 await 调用异步方法。这当然涉及到您的方法本身是使用 await 调用的。但是如果你设计一个新的应用程序，这根本不应该是一个问题。

为您辩护：对于使用 WinRT 类型的“概念证明”应用程序或桌面应用程序（引用适当的 .winmd 文件），同步调用异步代码可能是可以的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T07:10:29.263

尝试同步执行此类操作不是一个好习惯。在 WinRT 中可以很容易地从 Web 保存文件，请查看[https://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/0657c67a93d5#WinRTXamlToolkit%2fNet%2fWebFile.cs](https://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/0657c67a93d5#WinRTXamlToolkit%2fNet%2fWebFile.cs)。

# javascript - Javascript 中的 SetInterval

> ID：13043019
> 
> 赞同：1
> 
> 时间：2012-10-24T04:25:05.443
> 
> 标签：javascript

我有这个例如代码..

```
 function rotate() {
      rx = 50 * Math.cos( angle ) + 200;
      ry = 50 * Math.sin( angle ) + 200;
      for( var i = 0; i < plots; i++ ) {
        x = 100 * Math.cos( angle ) + rx;
        y = 100 * Math.sin( angle ) + ry;
        turnangle = Math.atan2( y - ry, x - rx ) * 180 / Math.PI + 90 + 'deg';
        plotcache[ i ].rotate( turnangle );
        plotcache[ i ].position( x, y );
        angle += increase;
      }
      angle += 0.06;
    }

setInterval( rotate, 1000/30 ); 
```

`setInterval( rotate, 1000/30 )`应该怎么做`setInterval( rotate, 1000 )..`？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T04:26:55.503

它每秒调用`rotate`大约 30 次。这是一个相当常见的帧速率；我猜这是一部动画。

# neo4j - Neo4j Facet 字段，如 Solr

> ID：13043022
> 
> 赞同：4
> 
> 时间：2012-10-24T04:25:41.343
> 
> 标签：neo4j, faceted-search, gremlin

我在用 PHP 构建的社区电子商务中使用 Neo4j 并使用 REST 接口。

我需要获取与亚马逊等搜索结果相关的所有类别。此功能在其他引擎中可用，例如 Solr（Lucene 的另一种实现）作为[**Faceted Search**](http://lucene.apache.org/core/4_0_0-BETA/facet/org/apache/lucene/facet/doc-files/userguide.html)

如何在 Neo4j 中进行**分面搜索？**或重新创建此功能的最佳方式（性能等级）是什么？

neo4j 的核心包中排除了与此功能相关的所有必需模块。我想知道是否有人尝试在不横向所有节点的情况下做这样的事情，获取一些属性，并对这些值进行 groupCount。如果我们有 200k 个节点，则横向需要 10 秒才能获得类别。

这是我的 Gremlin 方法。

```
(new Neo4jVertexSequence(
    g.getRawGraph().index().forNodes('products').query(
        new org.neo4j.index.lucene.QueryContext('category:?')
    ), g
))._().groupBy{it.category}.cap.next(); 
```

结果为 90 行，耗时 54 秒。

```
Books = 12002
Movies_Music_Games = 19233
Electronics_Computers = 60540
Home_Garden_Tools = 9123
Grocery_Health_Beauty = 15643
Toys_Kids_Baby = 15099
Clothing_Shoes_Jewelry = 12543
Sports_Outdoors = 10342
Automotive_Industrial = 9638
... (more rows) 
```

当然，我不能把这个结果放在缓存中，因为这是“非输入搜索”。如果用户进行像“Iphone”这样的查询，查询看起来像

```
(new Neo4jVertexSequence(
    g.getRawGraph().index().forNodes('products').query(
        new org.neo4j.index.lucene.QueryContext('search:"iphone" AND category:?')
    ), g
))._().groupBy{it.category}.cap.next(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T03:14:35.917

你的领域模型呢？你把所有东西都放在索引里了吗？通常，您会将您的类别建模为节点，并将您的产品与类别节点相关联。

```
(product)-[:HAS_CATEGORY]->(category)<-[:IS_CATEGORY]-(categories) 
```

在您的查询中，您只需遍历这棵小树并从每个类别节点开始计算 :HAS_CATEGORY 类型的关系。

```
start categories=node(x)
match (product)-[:HAS_CATEGORY]->(category)<-[:IS_CATEGORY]-(categories)
return category.name, count(*) 
```

# c - 在 C 中使用 fscanf 扫描字符串

> ID：13043024
> 
> 赞同：4
> 
> 时间：2012-10-24T04:26:08.623
> 
> 标签：c, string, file, scanf

请帮我解决一些问题。

**该文件包含：**

```
AAAA 111 BBB
CCC 2222 DDDD
EEEEE 33 FF 
```

**代码是：**

```
int main() {
    FILE * finput;

    int i, b;
    char a[10];
    char c[10];

    finput = fopen("input.txt", "r");

    for (i = 0; i < 3; i++) {
        fscanf(finput, "%s %i %s\n", &a, &b, &c);
        printf("%s %i %s\n", a, b, c);
    }

    fclose(finput);
    return 0;
} 
```

**该代码确实有效。但是，会出现以下错误：**

```
format «%s» expects argument of type «char *», but argument 3 has type «char (*)[10]
format «%s» expects argument of type «char *», but argument 5 has type «char (*)[10] 
```

类型错了吗？有什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T04:30:22.447

数组名称衰减为指向其第一个元素的指针，因此为了将数组的地址传递给`fscanf()`，您应该直接传递数组：

```
fscanf(finput, "%s %i %s\n", a, &b, c); 
```

这相当于：

```
fscanf(finput, "%s %i %s\n", &a[0], &b, &c[0]); 
```

但显然使用`a`而不是`&a[0]`更方便。

您编写它的方式是传递相同的*值*（这就是它起作用的原因），但该值具有不同的*类型*：它不再是指向 a 的指针`char`，而是指向 s 数组的指针`char`。这不是`fscanf()`预期的，因此编译器会发出警告。

For an explanation, see: [https://stackoverflow.com/a/2528328/856199](https://stackoverflow.com/a/2528328/856199)

# c++ - 如果它会进行类型检查，则启用非模板成员函数

> ID：13043027
> 
> 赞同：3
> 
> 时间：2012-10-24T04:26:34.587
> 
> 标签：c++, templates, c++11

例如

```
template <class T1, class T2>
class foo
{
    T1 t1;
    T2 t2;

    T1 bar(); //Always exists
    decltype(t1(t2)) baz(); //Should only exist if t1(t2) is valid
}; 
```

如果`baz`无效，我仍然希望程序能够编译，只要没有人实际调用`baz`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T05:10:15.440

您可以制作`baz`一个模板，这样如果返回类型无效，则该成员将被 SFINAE-d 淘汰，而不是导致硬错误：

```
template <class T1, class T2>
class foo
{
    T1 t1;
    T2 t2;

    T1 bar(); //Always exists

    template<typename T = T1>
    decltype(std::declval<T&>()(t2)) baz();
}; 
```

该`T`参数是使计算表达式依赖于类型所必需的，否则 SFINAE 不适用。如果您担心此实现细节“泄漏”并且有人可能会尝试`f.baz<int>()`，您可以在函数体中声明`baz`并`template<typename... Dummy, typename T = T1>`强制正确使用 with 。`static_assert( sizeof...(Dummy) == 0, "Incorrect usage" );`这两种方法确实使获取成员的地址变得更加困难：它应该看起来像 eg `&foo<T, U>::baz<>`。

另一种方法是引入类模板特化：

```
template<typename...> struct void_ { using type = void; };

template<typename T1, typename T2, typename = void>
class foo {
    // version without baz
};

template<typename T1, typename T2>
class foo<T1, T2, typename void_<decltype(std::declval<T1&>()(std::declval<T2>()))>::type> {
    decltype(std::declval<T1&>()(std::declval<T2>())) baz();
}; 
```

在这种情况下`&foo<T, U>::baz`，可以获取成员的地址（当然假设它存在）。两种专业通用的代码可以在一个共同的基础中被分解出来，如果担心作为实现细节引入的附加模板参数可能会泄漏，则可能有一个“真实的”`foo`只采用两个模板参数反过来从这样的实现继承。

# python - PyContract PostCondition 涉及非输入参数变量

> ID：13043028
> 
> 赞同：1
> 
> 时间：2012-10-24T04:26:39.713
> 
> 标签：python, design-by-contract, invariants

希望这将是我在该系列中的最后一个问题（我的项目快结束了，除非需求发生变化）。

我正在使用[PyContract](http://pypi.python.org/pypi/contract/1.4)（不是[PyContracts](http://pypi.python.org/pypi/PyContracts/1.4.0)）为类方法编写一些约束。在我的一个函数中，我有一个不变量。但是，并非构成此后置条件的所有变量都是函数的输入参数；有些是函数本身范围内的局部变量（循环计数器等）。我如何/可以在合同的后置条件条款中捕获它们？

这是我一直在使用的 MWE 代码：

```
def foo(*args, **kwargs):
    """
        pre:
            # some preconditions
        inv:
            # something that's clearly false
            1 == 2
        post:
            g < arg5
    """

    arg1 = kwargs['arg1']
    arg2 = kwargs['arg2']
    arg3 = kwargs['arg3']
    arg4 = kwargs['arg4']
    arg5 = kwargs['arg5']

    g = 0
    while g < arg5:
        vars = generate_data(arg1)
        best = max(arg2(var)for var in vars)
        if best >= arg3:
            return best
        # do stuff
        g += 1 
```

当 PyContract 告诉我它不知道名称`g`和`arg5`. 我在合同里改成`arg5`了`kwargs['arg5']`，但是 PyContract 还是不知道是什么`g`。如何/我可以解决这个问题？

我得到的错误是：

```
Traceback (most recent call last):
  File "/Users/ashwin/github/local/Genetic-Framework/Genetic-Framework/Genetic/GA.py", line 245, in <module>
    answer = runTSPGA(*settings, **settings)
  File "<string>", line 3, in __assert_runTSPGA_chk
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/contract.py", line 1135, in call_public_function_all
    return _call_one_all(func, va, ka)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/contract.py", line 1321, in _call_one_all
    func.__assert_post(old, result, *va, **ka)
  File "<string>", line 4, in __assert_runTSPGA_post
NameError: global name 'g' is not defined 
```

如下添加`g`到后置条件声明也无济于事：

```
post[kwargs, g]: 
```

此外，有趣的是，不变检查的代码似乎根本没有运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:54:29.367

后置条件在函数完成运行后运行，这意味着包含函数局部变量（例如`arg5`and `g`）的堆栈帧不再在范围内。

不过，对于实现合同的库来说，这并不太令人惊讶：重点是在函数应该实现的接口上声明约束，而您似乎想要检查函数的内部状态，该状态在返回值。

您可以前进的两种方式是：

1.  使函数返回您要通过合同检查的状态。如果内部状态不是函数接口的一部分，这可能不合适。

2.  使用 PyContracts 以外的东西来强制执行您的约束，例如`assert`语句，或者`raise AssertionError("while loop should have returned early")`循环之后的语句。

# r - 在R中增加前导零

> ID：13043030
> 
> 赞同：1
> 
> 时间：2012-10-24T04:26:46.303
> 
> 标签：r

> **可能重复：**
> [将数字格式化为固定宽度，前导零](https://stackoverflow.com/questions/8266915/format-number-as-fixed-width-with-leading-zeros)
> [sprintf 使用不带 gsub](https://stackoverflow.com/questions/12379767/sprintf-use-without-gsub)

这可能以前已经完成，但我找不到 R 的线程。

我将如何增加 R 中的前导零？

例如，有一个名为 x 的**向量**，其元素为：0001、0002、0003....9999

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T04:36:48.373

使用`sprintf`：

```
sprintf("%04s", as.character(1:20))
[1] "0001" "0002" "0003" "0004" "0005" "0006" "0007" "0008" "0009" "0010" "0011" "0012" "0013" "0014" "0015" "0016"
[17] "0017" "0018" "0019" "0020" 
```

在 Windows 上，我可以找到一个 Rhelp 帖子，上面说您可以通过

```
head( sprintf("%04d", 1:999)  )
[1] "0001" "0002" "0003" "0004" "0005" "0006" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T04:28:13.293

如果元素都是 4 位数字，那么正则表达式可以做到：

```
gsub("0(\\d{3})","1\\1",x) 
```

更普遍：

```
gsub("^0(\\d*)$","1\\1",x) 
```

# python - 在谷歌应用引擎中设置一个 cron 作业

> ID：13043034
> 
> 赞同：4
> 
> 时间：2012-10-24T04:26:58.767
> 
> 标签：python, google-app-engine, cron

我在[cron 上](https://developers.google.com/appengine/docs/python/config/cron)访问了 Google 的网站，看起来我无法设置一个 cron 作业来从 07:00 到 15:00 每 10 分钟运行一次。因此我有两个问题：

1）我可以让cron作业每天运行，然后在周六和周日不运行，然后在周一至周五再次恢复吗？

2）如果我不能做第一个选项，有没有办法让cron作业自动退出？

我正在用 Python 做这个。如果这不可能，是否有我可以寻求帮助的页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T05:00:44.753

由于一旦指定日期就无法指定范围，我认为最好的选择是提供时间 ( `every 10 minutes from 07:00 to 15:00`)，然后在脚本本身中检查当前日期以确定它是否是工作日。你可以用一些简单的东西来做到这一点：

```
>>> import datetime
>>> today = datetime.datetime.today()
>>> today.weekday()
1 
```

Where `0`= Monday, `1`= Tuesday, etc. 如果你的 cron 验证当前工作日是`in (5, 6)`，那么你可以简单地退出你的程序。一种结构化的方法可能是将您的 cron 链接到一个检查日期的简单函数 - 如果是工作日，则调用您的 main 函数；如果没有，它就结束了。可能有更好的方法，但这是我现在能想到的最好的方法:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:30:54.143

一个更便宜的选择。运行 CRON：每周一、周二、周三、周四、周五 07:00 这个工作日 CRON 启动一个任务（延迟或推送），它将在 10 分钟内安排下一个任务，直到 15:00。

# java - xml-rpc 参数

> ID：13043037
> 
> 赞同：1
> 
> 时间：2012-10-24T04:27:07.987
> 
> 标签：java, xml, escaping, rpc

我正在使用 xml-rpc 创建一个将连接到 xml-rpc 服务器（Cisco 8710）的 java 客户端我希望在我的 HTTP Post 中我可以发送以下内容：

```
<value><string>admin</string></value>

          params.add( Boolean.TRUE );
          params.add( new Integer (100) );
          params.add( "<string>admin</string>" ); 
```

进行数据包捕获发送的内容如下：

```
&lt;string&gt;cisco&lt;/string&gt; 
```

使用： **org.apache.xmlrpc.client.XmlRpcClient；**

如何转义要正确发送的字符？

谢谢！

# javascript - 如何为元素添加额外的类名？

> ID：13043040
> 
> 赞同：1
> 
> 时间：2012-10-24T04:27:21.370
> 
> 标签：javascript

我不敢相信我在 google 中找不到这个 - 我需要添加一个额外的类名到`div`带有类名的 a `checkField`：

```
<div id="wth" class="checkField"><label>Ok whatever</label></div>

document.getElementById("wth").className="error"; // This works
document.getElementsByClassName("field").className="error"; // Doesn't work 
```

我试过这个：

```
document.getElementsByClassName("field").getElementsByTagName("label").className="error"; 
```

^ 也不起作用。

有人可以给我一些建议吗？我对 JQuery 太习惯了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T04:28:58.270

您需要将类添加到当前值：

```
document.body.className += " foo"; // adds foo class to body 
```

一些浏览器支持[`classList`](http://caniuse.com/classlist)提供在元素上添加、删除和切换类的方法。例如，您可以像这样添加一个新类：

```
document.body.classList.add("newClass"); 
```

想象一下切换课程所涉及的工作；您必须执行一些字符串操作来首先确定一个类是否已经在元素上，然后做出相应的响应。`classList`您可以使用以下方法`toggle`：

```
document.body.classList.toggle("toggleMe"); 
```

某些浏览器当前不支持`classList`，但这不会阻止您利用它。您可以[下载一个 polyfill](https://github.com/eligrey/classList.js)以在本机不支持的地方添加此功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T04:33:14.713

该`getElementsByClassName`方法返回一个 nodeList，它是一个类似数组的对象，而不是单个元素。要执行您想要的操作，您需要迭代列表：

```
var divs = document.getElementsByClassName("checkField");
if (divs) {
  // Run in reverse because we're
  // modifying the result as we go:
  for (var i=divs.length; i-- >= 0;) {
    divs[i].className = 'error';
  }
} 
```

此外，只是设置`className`实际上替换了类而不是添加到它。如果你想添加另一个类，你需要这样做：

```
divs[i].className += ' error'; // notice the space bar 
```

至于您要尝试做的第二件事，即设置标签的类而不是 div，您需要遍历 div 并调用`getElementsByTagName`它们：

```
var divs = document.getElementsByClassName("checkField");
if (divs) {
  // Run in reverse because we're
  // modifying the result as we go:
  for (var i=divs.length; i-- >= 0;) {
    var labels = divs[i].getElementsByTagName('label');
    if (labels) {
      for (var j=0; j<labels.length; j++) {
        labels[j].className = 'error';
      }
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T04:29:06.617

尝试类似的东西

你想通过 document.body 做到这一点

所以试试

```
var demo =document.body; 

// also do this by class like var demo = document.getElementsByClassName("div1one"); 
// or id var demo = document.getElementsId("div1one"); 

demo .className = demo .className + " otherclass"; 
```

或更简单的解决方案，如果您有 jquery 作为选项

```
 $("body").addClass("yourClass"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T06:37:01.203

以下是用于添加和删除类的简单实用函数：

```
function addClass(elem, cls) {
    var oldCls = elem.className;
    if (oldCls) {
        oldCls += " ";
    }
    elem.className = oldCls + cls;
}

function removeClass(elem, cls) {
    var str = " " + elem.className + " ";
    elem.className = str.replace(" " + cls + " ", " ").replace(/^\s+|\s+$/g, "");
} 
```

# java - 有没有办法在 Oracle 11g XE 上安装 java？

> ID：13043042
> 
> 赞同：7
> 
> 时间：2012-10-24T04:27:49.160
> 
> 标签：java, oracle, oracle11g, oracle-xe

我正在使用数据库 Oracle 11g Express Edition (XE)，当我尝试创建 java 源对象时，它返回一个错误：

> ORA-29538: 未安装 Java

源代码很简单：

```
create or replace and compile java source named hello AS 
  public class Hello {
    public static String hello() { return "Hello!"; }
  }; 
```

我在 Oracle 的文档中发现 Oracle XE 不包含 Java。

有人知道是否可以在其上“安装”Java？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-24T04:46:31.257

不，[Oracle Database 11g Express Edition](http://docs.oracle.com/cd/E17781_01/license.112/e18068/toc.htm#BABDDIAE)中不提供 Java 支持，并且由于数据库本身不支持 Java，因此无法通过自己安装 Java 来扩展它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-07T19:30:45.200

如果你有Oracle的完整授权版本，并且需要在Oracle中安装JVM，你可以作为sysdba调用：

```
 @?/javavm/install/initjvm.sql 
```

你可能还需要运行

```
 @?/rdbms/admin/catjava.sql 
```

网站[https://itkbs.wordpress.com/2014/02/15/how-to-install-java-in-oracle-database-ora-29538/](https://itkbs.wordpress.com/2014/02/15/how-to-install-java-in-oracle-database-ora-29538/)教了我第一部分；我仍然有`schedFileWatcherJava`找不到 Java 类的错误，第二个脚本已修复。

您可以通过该网站的此查询验证是否安装了 Java：

```
select comp_name, version, status from dba_registry; 
```

`JServer JAVA Virtual Machine`如果安装了 Java ，它将作为结果的一部分列出。

# ruby-on-rails - Rails：访问 network.domain.com 为 domain.com 呈现根目录

> ID：13043043
> 
> 赞同：0
> 
> 时间：2012-10-24T04:27:57.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3, dns, routing

我正在尝试为我的域设置一个子`network`域。在我的`config/routes.rb`我有：

```
constraints :subdomain => /network.*/ do
  ...

  # Root
  match '/' => 'questions#index'
  match '' => 'questions#index'
  root :to => 'questions#index', :as => 'network_root'
end

root :to => 'frontend#home' 
```

但是，有时当我访问 network.domain.com（在生产中）时，它会显示整个应用程序的根目录（frontend#home）。访问开发中的子域按预期工作。

编辑：我刚刚注意到对应用程序根目录 (domain.com/) 和子域根目录 (network.domain.com/) 的请求没有登录到我的 production.log 中。任何其他页面加载都按预期工作。

# fuelphp - Oil g Migration 不写任何查询

> ID：13043055
> 
> 赞同：0
> 
> 时间：2012-10-24T04:29:23.347
> 
> 标签：fuelphp

快速问题：

当我运行这个...

```
php htdocs/travel-photo/oil generate migration follow user:string pass:text name:string photo:string email:string 
```

我查看了迁移文件夹，这是它向我展示的...

```
namespace Fuel\Migrations;

class Follow
{
public function up()
{

}

public function down()
{

}
} 
```

这里有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T04:48:52.667

我应该更清楚地阅读文档。您需要指定要执行的迁移操作...所以从我创建的内容来看：

```
php htdocs/travel-photo/oil generate migration users user:string pass:text name:string photo:string email:string 
```

我需要补充一点：石油生成迁移 create_users ...

```
php htdocs/travel-photo/oil generate migration create_users user:string pass:text name:string photo:string email:string 
```

[http://docs.fuelphp.com/packages/oil/generate.html#migrations](http://docs.fuelphp.com/packages/oil/generate.html#migrations)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T09:21:49.310

我认为这是通过以下两种方式之一进行的：（i）使用石油生成模型并自动生成迁移，或者（ii）使用魔术命名的迁移。

对于选项 (i)，使用石油生成模型，其余的应该很明显 - 石油生成迁移以及模型。

对于选项 (ii)，magic-name 告诉 oil 您要通过迁移完成什么，因此您可以创建表、添加列、删除表或 oil 支持的几乎任何其他内容，只需定义一个名为 oil可以解释为这些操作之一。

# php - 如何知道被调用函数在 php 中的位置？

> ID：13043057
> 
> 赞同：1
> 
> 时间：2012-10-24T04:29:42.847
> 
> 标签：php, class

我有 3 个类名“ **Controller** ”、“ **Loader** ”、“ **Error** ”和“ **Ex_controller** ”。

“**控制器.php** ”

```
class Controller
{
     function __Construct()
     {
           $this->load = Loader::getinstant();
           $this->error = $this->load->class('Error');
     }
} 
```

“**加载器.php** ”

```
class Loader
{
     function class($class)
     {
           require_once($class);
           return new $class;
     }
} 
```

“**错误.php** ”

```
class Error
{
     function query($query)
     {
           $res = mysql_query($query)
           if($res)
           {
                  return $res;
           }else{
                  die('Could not execute query: '.mysql_error().'at line '. __LINE__ . 
                       ' in file ' . __FILE__);//does it work?If it doesn't, how to
                                                 make it work?
           }
     }
} 
```

“ **Ex_controller.php** ”

```
class Ex_controller extends Controller
{
     function __Construct()
     {
           parent::__construct();
           $result = $this->error->query('some sql query');//(*)
     }
} 
```

如何使用 (*)显示**Ex_controller中发生错误的位置？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T04:33:50.440

在你的课上 Ex_controller extends Controller 添加

```
parent::__construct(); 
```

在 __Construct() 函数的第一行

错误类应该如何只返回错误而不进行查询....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T04:37:31.340

首先，您应该停止使用`mysql_xxx`函数，因为它们正在弃用旧 API。

除此之外，在这种情况下，开始使用异常而不是普通的旧`die()`.

```
if($res) {
    return $res;
}else{
    throw new Exception("Could not execute query '$query': " . mysql_error());
} 
```

然后在控制器内部：

```
try {
    $result = $this->error->query('some sql query');//(*)
} catch (Exception $e) {
    die(print_r($e, true)); // do something more useful with the exception though.
} 
```

当你捕捉到更高层的异常时`print_r()`，你会看到完整的堆栈跟踪，包括文件、行号和所有内容。

此外，您还有机会处理错误。

另外，如果您在`PDO`启用异常错误处理的情况下使用，您甚至不必再自己抛出异常。

# iphone - iOS 应用程序框架

> ID：13043059
> 
> 赞同：0
> 
> 时间：2012-10-24T04:29:54.703
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我创建了一个可以与数据库对话并从服务器获取消息的 ios 应用程序，我现在要做的就是将此应用程序作为模板分发，其他应用程序可以导入我当前的项目并使用它，现在我去了抛出许多技巧和技巧，例如使用 xcode 包和聚合目标类型制作静态框架，并使其与一些脚本一起工作，听到：[http ://codefriend.blogspot.com.au/2011/09/creating-ios-framework- with-xcode4.html](http://codefriend.blogspot.com.au/2011/09/creating-ios-framework-with-xcode4.html) 我想知道的是它是否是解决此类问题的正确方法，还是我应该看其他东西。我只想为我的团队创建一个框架，这样他们就可以生成其他应用程序，而无需担心或一次又一次地编写相同的文件和代码。是否也可以捆绑所有 .xib 和 .html 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T04:53:53.037

这是我们用来创建框架的： [https ://github.com/kstenerud/iOS-Universal-Framework](https://github.com/kstenerud/iOS-Universal-Framework)

# unix - 如何在没有操作系统的情况下运行操作系统...运行...？

> ID：13043063
> 
> 赞同：1
> 
> 时间：2012-10-24T04:30:38.033
> 
> 标签：unix, operating-system

我现在真的很好奇。我是一名 Python 程序员，这个问题让我感到困惑：你编写了一个操作系统。你如何运行它？它必须以某种方式运行，并且这种方式是在另一个操作系统中？

一个应用程序如何在没有操作系统的情况下运行？如果计算机没有要运行的操作系统，你如何告诉计算机运行，比如 C，并在屏幕上执行这些命令？

它与 UNIX 内核有关吗？如果是这样，什么*是*unix 内核，或者一般来说是内核？

我确信操作系统比这更复杂，但它是如何工作的？知道这一点真是太棒了！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:04:18.407

您确实可以编写没有操作系统的程序。实际上，在您的操作系统启动之前，您的 PC 上已经有一个无需操作系统即可运行的程序。事实上有两个。首先是您的 BIOS。

IBM PC 体系结构是使用 BIOS 来启动计算机的一系列体系结构之一。并非所有架构都有 BIOS。例如，iPhone 直接引导到引导加载程序。事实上，大多数“现代”架构没有 BIOS，而是直接启动到引导加载程序。这种方式实际上在概念上更简单。

PC 需要 BIOS 的事实只是历史遗留问题。最初的 IBM BIOS 实际上是用于加载 DOS 的基本引导加载程序。现代 BIOS 仍然是引导加载程序……加载引导加载程序。

大多数 PC BIOS 都是专有的。它们允许制造商在将控制权传递给引导加载程序之前初始化自定义/专有硬件。这使得编写引导加载程序成为可能，而不必担心操作系统映像在闪存驱动器、USB 拇指驱动器、SD 卡、磁盘、DVD 等上的天气。引导加载程序只看到一个已初始化的磁盘BIOS。

启动的下一阶段是引导加载程序。IBM PC 架构需要引导加载程序的原因是 BIOS 通常设计用于设置 CPU 以运行 DOS。现代操作系统要求 CPU 的配置略有不同。此外，现代操作系统内核（内核是操作系统的实际核心可执行代码，用于管理内存、cpu 等）往往是大型野兽，通常大于 4MB，这比大多数 BIOS 设计加载的大小要大得多. 因此 BIOS 会加载一个小型引导加载程序，该引导加载程序又会加载实际的操作系统。同样，这只是因为 IBM 在 1980 年代设计原始 PC 架构时做出的决定。iPhone 或 PS3 等现代架构不这样做。它们直接引导到引导加载程序。

引导加载程序是解决鸡与蛋问题所必需的：加载您需要从磁盘读取的操作系统。要从磁盘读取，您需要使用操作系统加载的设备驱动程序。为了打破这种循环依赖，人们编写引导加载程序，它们基本上是非常简单的操作系统，旨在仅运行一个程序（操作系统）并了解如何从磁盘（或 SD 卡或网络等）读取。

这将我们带到回答您问题的部分。如果你写了一个操作系统，你如何加载它？您可以通过配置引导加载程序来加载它。Windows 带有一个不太灵活的引导加载程序。它了解如何加载 Windows，仅此而已。[您可以安装像Grub](http://www.gnu.org/software/grub/)或[Burg](https://help.ubuntu.com/community/Burg)这样的开源引导加载程序，它们也了解如何加载其他操作系统。

引导机器所涉及的基本概念实际上很简单。可怕的是细节。但是，如果您真的对操作系统的工作原理感兴趣，学习它最终会非常有益。另外，如果你对这些东西感兴趣，我建议你看看除了 IBM PC 之外的其他架构，比如 Mac 硬件，它使用 EFI 而不是传统的 BIOS 或 Linksys 路由器，它们直接从引导加载程序或嵌入式平台启动到 Linux，比如运行单个程序的 Arduino，您无需操作系统即可直接在 CPU 上编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T05:19:32.643

运行任何软件的是某种 CPU、一段电子电路、硬件。

无论软件是操作系统还是其他类型的程序，CPU 都不在乎。它只是尽可能长时间地运行它（例如，直到所述软件导致不可恢复的错误迫使 CPU 进入一些奇怪的状态或简单地复位）。

开机后，CPU 开始执行它在内存中某个位置找到的任何代码。该位置可以硬连线在 CPU 中，也可以由 CPU 电路外部配置，甚至可以由软件编程。它是哪一个取决于 CPU 以及整个设备的设计方式。

并非所有程序都需要操作系统才能在 CPU 上运行。操作系统就是这种程序的一个很好的例子。如果每个操作系统都需要另一个操作系统，你将如何停止这种无限递归？:) 但它不是唯一的。

许多电子设备，尤其是像数字时钟这样非常简单的电子设备，没有任何操作系统。

一个操作系统在另一个操作系统上运行的唯一时间是当你有虚拟化时。但我不会在这个答案中去那里。

操作系统只需要它的基本功能，如调度、线程/进程同步、内存分配等，或者自己完成所有或大部分设备 I/O 并隐藏操作系统中运行的程序 IOW 的硬件特性，以允许便携式程序。你用`print 123`Python 编写，它会在任何与 Python 兼容的操作系统（=它可用）中到处打印 123，而不管显示器、分辨率以及在不同计算机和不同操作系统中可能存在的许多其他差异。如果通用操作系统没有提供一些通用功能（以及一些或多或少通用的 API），例如控制台和文件 I/O 和内存管理，那么 Python 就不会为它们提供，这些操作系统也不会通用——首先是目的。

操作系统内核是操作系统的核心。它完成了大部分低级和肮脏的工作，处理：

*   中断处理
*   线程/进程调度和同步
*   内存管理
*   类似的东西

有时操作系统功能就足够了，在这种情况下，操作系统和内核之间没有任何区别，它们在这里是一样的。

如果，OTOH，需要更多的东西，例如更大的灵活性，对不同设备的支持，一些管理所有这些的代码和一堆用于文件系统的特殊驱动程序，用于网络和 TCP/IP 堆栈等，那么一个简单的（也许，只有相对简单的）内核本身是不够的，它周围需要更多的东西，这就是你开始区分操作系统和内核并到达操作系统 = 内核 + 附加功能的地方。您正在使用的文本编辑器，即使它与您的操作系统一起提供，也不完全是这些附加功能之一，它是一个常规程序，不需要与操作系统捆绑，但为了方便起见，它可以是。

UNIX 是操作系统的一个示例。还有更多，最著名的是 Linux 和 Windows。

你应该给自己买一本关于计算机体系结构和组织的书，以了解计算机一般是如何工作的。它里面是什么，它是如何组合在一起的，引擎盖下发生了什么，等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T04:42:07.043

你需要一个操作系统来做一些事情，比如虚拟化内存和仲裁对硬件的访问。因为操作系统可以完全访问内存和硬件之类的东西，所以它不需要操作系统来运行。大多数程序从操作系统获得的服务，操作系统本身要么必须自己提供，要么必须从硬件获得。

# google-chrome - 使用 CRD API 将主机注册/添加到 chrome 远程桌面扩展主机列表

> ID：13043064
> 
> 赞同：0
> 
> 时间：2012-10-24T04:30:39.000
> 
> 标签：google-chrome, remote-desktop

我已经安装了用于桌面共享的 chrome 远程桌面扩展。

[https://chrome.google.com/webstore/detail/chrome-remote-desktop/gbchcmhmhahfdphkhkmpfmihenigjmpp?hl=en-US&utm_source=chrome-ntp-launcher](https://chrome.google.com/webstore/detail/chrome-remote-desktop/gbchcmhmhahfdphkhkmpfmihenigjmpp?hl=en-US&utm_source=chrome-ntp-launcher)

我印象非常深刻。它又快又容易。

有一个选项可以通过启用远程连接将您的计算机添加到我的电脑列表。列表中的计算机也称为主机，Google 还提供了一个 API 来添加/更新/列出/删除主机。[https://developers.google.com/chrome/remote-desktop/v1/reference/hosts/insert](https://developers.google.com/chrome/remote-desktop/v1/reference/hosts/insert)

现在我的问题是；有没有人能够使用 Google Chrome 远程桌面 API 将主机/计算机添加到主机列表？如果是的话，你能帮我解决这个问题吗？

如果您需要更多解释，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:38:01.143

我自己做的。我使用 php CURL 来发送主机插入请求。API 仅支持 json 内容类型，因此您需要以 json 格式发送数据。

# jquery - 通过单击将跨度标记替换为多个链接

> ID：13043065
> 
> 赞同：0
> 
> 时间：2012-10-24T04:30:40.373
> 
> 标签：jquery, html, jquery-ui, css

当我单击此标签时，弹出窗口打开

```
<span class="en_US tk-museo-sans locale-select-lable">United States</span> 
```

当我单击弹出窗口内的链接时，弹出窗口关闭

```
<span class="selectorCountries locale-link">united states</span>
<span class="selectorCountries marginSecondCountry locale-link">canada</span>
<span class="selectorCountries marginCanadaFrench locale-link">canada(french)</span> 
```

问题是当我单击弹出此标签内的链接时

```
<span class="en_US tk-museo-sans locale-select-lable">United States</span> 
```

应该换成国名...

问题出在jquery代码上...

[http://jsfiddle.net/6QXGG/145/](http://jsfiddle.net/6QXGG/145/)

你能告诉我如何解决它吗...

我正在提供我最新的 js 代码

```
 // locale selector actions
    $('#region-picker').click(function(){
            if ($("#locale-select").is(":visible")) return closeSelector('slide');

        var foot_height = $('#footer').innerHeight();
        var foot_height_css = foot_height-1;
        var select_position = '-=' + (Number(700)+18);
        console.log("hallo"+select_position);
        var $selector = $('#locale-select');
        $('#locale_pop').fadeOut();
        $selector.css({top:foot_height_css});
        $selector.fadeIn(function(){
            $(this).addClass('open');
            $(this).animate({top:select_position}, 1000);
            });
    });
    $('#select-tab').click(function(e){
        e.stopPropagation()
        closeSelector('slide');
        });
    // don't hide when clicked within the box
    $('#locale-select').click(function(e){
        e.stopPropagation();
    });
    $(document).click(function(){ 
        if ($('#locale-select').hasClass('open')) {
            closeSelector('disappear');
        }
    });

    $('.locale-link').click(function(){
        if ($("#locale-select").is(":visible")) return closeSelector('slide');
       /*         
       // var desired_locale = $(this).attr('rel');
       // createCookie('desired-locale',desired_locale,360);
       // createCookie('buy_flow_locale',desired_locale,360);
        //closeSelector('disappear');
        */
    })

    $('#locale_pop a.close').click(function(){
        var show_blip_count = readCookie('show_blip_count');
        if (!show_blip_count) {
            createCookie('show_blip_count',3,360);
        }
        else if (show_blip_count < 3 ) {
            eraseCookie('show_blip_count');
            createCookie('show_blip_count',3,360);
        }
        $('#locale_pop').slideUp();
        return false;
    });

function closeSelector(hide_type){
var foot_height = $('#footer').innerHeight();
var select_position = '+=' + (Number(400)+20);
if (hide_type == 'slide') {
$('#locale-select').animate({top:select_position}, 1000, function(){
$(this).removeClass('open');
$(this).fadeOut()
});
}
else if (hide_type == 'disappear'){
$('#locale-select').fadeOut('fast');
$('#locale-select').removeClass('open');
}
} 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:01:50.110

这个怎么样？

```
 $('.locale-link').click(function(){
        $("#region-picker:first-child").text(this.text());
        if ($("#locale-select").is(":visible")) return closeSelector('slide');
   }) 
```

# c# - 文本框值和按钮点击计数 - 执行代码依赖于文本框值

> ID：13043076
> 
> 赞同：1
> 
> 时间：2012-10-24T04:32:10.067
> 
> 标签：c#, winforms

我目前正在处理单击计数和文本框值。`Button1`目的是根据`texbox7`具有的值执行特定功能。当我尝试触发按钮单击事件时，我没有得到任何结果。有人可以建议/帮助吗？

**代码**

```
 private List<string> messages = new List<string>() { "Option1", "Option2", "Option3", "Option4" };
  private void button1_Click(object sender, EventArgs e)
  {

    if (textBox7.ToString() == "Option1")
                {
                    int min = max;
                    int n = 0;
                    string s = "";

                    sw.Start();

                }
                else if (textBox7.ToString() == "Option2")
                {
                }
                else if (textBox7.ToString() == "Option3")
                {
                }
                else if (textBox7.ToString() == "Option4")
                {
                }
                else if (textBox7.ToString() == "")
                {
                    MessageBox.Show("Please input information");
                }
       } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T04:33:12.493

代替

```
if (textBox7.ToString() == "Option1") 
```

它应该是

```
if (textBox7.Text == "Option1") 
```

您应该与 TextBox 中的值进行比较，您可以使用文本框的[Text](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.text.aspx)属性来获取它。

你`textBox7.ToString()`会给你类似的东西`System.Windows.Forms.TextBox, Text: text`。因此，您不会进行任何检查。将您的值与`Text`属性进行比较，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T07:00:23.750

检查声明[`TextBox.Text`](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.text.aspx)中的属性[`switch-case`](http://msdn.microsoft.com/en-us/library/06tc147t.aspx)：

```
private void button1_Click(object sender, EventArgs e)
{
    switch (textBox7.Text)
    {
        case "Option1":
            //do something
        case "Option2":
            //do something
        case "Option3":
            //do some thing
        case "Option4":
            //do something
            break;
        // If the value of switch-Expression is not 1, 2, 3 or 4 the 
        // default case is executed.
        default:
            MessageBox.Show("Please input information");
            break;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T07:21:18.390

使用 .Text 属性在文件属性后面的代码中获取文本框的文本值很简单， `textBox7.Text`而不是 `testBox7.ToString()`进一步的模式使用`if-else`语句或`switch`语句，因为它们都是条件语句和基于条件的执行。

开心点！

# perl - 在 Perl 中对大量哈希进行排序

> ID：13043083
> 
> 赞同：3
> 
> 时间：2012-10-24T04:32:30.707
> 
> 标签：perl, sorting, hash

我正在分析在一个句子中一起出现的词组的出现频率。

每组由 3 个单词组成，我们必须计算它们的频率。

**示例：**这是聚会的好时机，因为这是假期。

**预期输出：**

```
this is a - 2
is a good - 1
a good time - 1 
```

等等。

我编写了一个运行良好的脚本，它打印频率并按降序对其进行排序。

它通过从文件中一次读取一行来工作。对于每一行，它将它们转换为小写，将其拆分为单个单词，然后从中形成一个数组。

然后，我们从左边开始一次选择 3 个单词，并不断形成一个存储出现次数的哈希值。完成后，我们移动数组中最左边的元素并重复，直到我们的数组包含超过 3 个单词。

## **问题更新：**

问题是我想在一个包含超过 1000 万行的文件上使用这个脚本。

运行一些测试后，我观察到如果输入文件中的行数超过 400K，它将无法正常工作。

我怎样才能使这个脚本更有效地使用内存？

感谢 fxzuz 的建议，但现在我想让这个脚本适用于更大的文件 :)

```
#!/usr/bin/perl

use strict;
use warnings;

print "Enter the File name: ";
my $input = <STDIN>;
chomp $input;

open INPUT, '<', $input 
    or die("Couldn't open the file, $input with error: $!\n");

my %c;

while (my $line = <INPUT>) {

    chomp $line;
    my @x = map lc, split /\W+/, join "", $line;

    while (@x>3) {

        $c{"@x[0..2]"}++;
        shift @x;
    }
}

foreach $key (sort {$c{$b} <=> $c{$a}} keys %c) {

    if($c{$key} > 20) {

        print $key." - ".$c{$key}."\n";
    }
}

close INPUT; 
```

这很好用，它会按频率降序打印单词组。它只会打印那些出现超过 20 次的单词组。

现在，如何在包含超过 100 万或 1000 万行的文件上进行这项工作？

在 Linux 中使用 top 命令运行此脚本时，我还检查了 perl 的内存和 CPU 使用率，并观察到当脚本在由 400K 行组成的文件上运行时，CPU 使用率达到 100%，内存使用率接近 90%。

因此，让它与一个由 100 万行组成的文件一起工作是不可行的。因为perl进程会挂起。

我怎样才能让这段代码更有效地使用内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T05:57:16.137

您在声明和使用变量方面存在一些问题。`use strict`请在您的脚本中添加编译指示。当您使用散列`for block`和其他时使用局部变量。我注意到您有声明`if($c{$key} > 20)`，但哈希值 <= 2。

```
#!/usr/bin/perl

use strict;

my %frequency;

while (my $line = <DATA>) {

    chomp $line;
    my @words = map lc, split /\W+/, $line;

    while (@words > 3) {

        $frequency{"@words[0,1,2]"}++;
        shift @words;
    }
}

# sort by values
for my $key (sort {$frequency{$b} <=> $frequency{$a}} keys %frequency) {

    printf "%s - %s\n", $key, $frequency{$key};
}                                                                                   

__DATA__
This is a good time to party because this is a vacation time. 
```

**输出**

```
this is a - 2
to party because - 1
is a good - 1
time to party - 1
party because this - 1
because this is - 1
good time to - 1
is a vacation - 1
a good time - 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T09:43:36.397

显然，您的代码编写正确并且可以工作，但前提是您的数据集不是很大。如果您有大量输入数据（并且看起来确实如此），则排序阶段可能会由于内存不足而失败。如果您无法增加内存，唯一的解决方案是将数据写入磁盘 - 以文本或数据库格式。

1.  文本格式：您可以在进入文本文件时简单地编写您的三元组，每个三元组一行。这样做会将输出大小增加 3 倍，但它仍然应该是可控的。然后，您可以简单地使用命令行 gnu sort 和 uniq 工具来获得所需的计数，如下所示：

    `text2triplet.pl <input.txt | sort | uniq -c | sort -r | head -10000` （您可能希望将输出存储到一个文件中，如果它很大，则不要通过管道传输它）

2.  数据库格式：使用 DBD::SQLite 并创建如下表：

    `CREATE TABLE hash (triplet VARCHAR, count INTEGER DEFAULT 0);`

    `CREATE INDEX idx1 ON hash (triplet);`

    `CREATE INDEX idx2 ON hash (count);`

`INSERT`你走的时候把你的三胞胎放到那个桌子上，并增加重复的次数。数据处理完毕后，只需

```
 SELECT * FROM hash
 WHERE count > 20
 ORDER BY count DESC 
```

并打印出来。然后你可以`DROP`你的哈希表或者干脆完全删除整个 SQLite 数据库。

这两种方法都应该允许您扩展到几乎您的磁盘大小，但数据库方法可能更灵活。

# iphone - 应用程序（目标操作系统低于 4.3）可以在 ios6 上运行吗

> ID：13043097
> 
> 赞同：0
> 
> 时间：2012-10-24T04:34:35.317
> 
> 标签：iphone

只是想知道应用程序（目标操作系统低于 4.3）是否可以在 ios6 上运行。xcode 4.5 无法构建低于 4.3 的目标，这是否意味着 ios6 不接受 os 目标低于 4.3 的应用？

欢迎任何评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T04:42:00.963

只要应用程序是使用低于 4.5 的 xcode 构建的，那么针对低于 4.3 的应用程序就应该能够在 iOS6 设备上运行。至少我使用的应用程序就是这种情况，它似乎没有引起任何问题（我知道）。不同之处在于，如果您想使用 xcode 4.5 更新该应用程序，则必须将目标构建更改为至少 4.3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T05:36:59.613

几乎所有为旧 iOS 版本构建的应用程序都可以在未来的 iOS 版本上运行。但是，您将难以将较旧的 iOS 应用程序构建到较新的 iOS 设备上。另外，释放时要小心。我一直在 iOS 4 中开发我的一个应用程序，但它因崩溃而被拒绝。我更新了我的 xcode 并意识到一些旧代码在 iOS 6 中不起作用。

# html - 在 Wordpress 中对齐中心 Aweber 表单

> ID：13043098
> 
> 赞同：0
> 
> 时间：2012-10-24T04:34:49.440
> 
> 标签：html, css, wordpress, aweber

我有这样的 Aweber 表单代码：

```
<!-- AWeber Web Form Generator 3.0 -->
<style type="text/css">
#af-form-560053752 .af-body .af-textWrap{width:98%;display:block;float:none;}
#af-form-560053752 .af-body input.text, #af-form-560053752 .af-body textarea{background-color:#FFFFFF;border-color:#919191;border-width:1px;border-style:solid;color:#000000;text-decoration:none;font-style:normal;font-weight:normal;font-size:12px;font-family:Verdana, sans-serif;}
#af-form-560053752 .af-body input.text:focus, #af-form-560053752 .af-body textarea:focus{background-color:#FFFAD6;border-color:#030303;border-width:1px;border-style:solid;}
#af-form-560053752 .af-body label.previewLabel{display:block;float:none;text-align:left;width:auto;color:#000000;text-decoration:none;font-style:normal;font-weight:normal;font-size:12px;font-family:Verdana, sans-serif;}
#af-form-560053752 .af-body{padding-bottom:15px;padding-top:15px;background-repeat:no-repeat;background-position:inherit;background-image:none;color:#000000;font-size:11px;font-family:Verdana, sans-serif;}
#af-form-560053752 .af-quirksMode{padding-right:15px;padding-left:15px;}
#af-form-560053752 .af-standards .af-element{padding-right:15px;padding-left:15px;}
#af-form-560053752 .buttonContainer input.submit{background-image:url("http://forms.aweber.com/images/auto/gradient/button/07c.png");background-position:top left;background-repeat:repeat-x;background-color:#0057ac;border:1px solid #0057ac;color:#FFFFFF;text-decoration:none;font-style:normal;font-weight:normal;font-size:14px;font-family:Verdana, sans-serif;}
#af-form-560053752 .buttonContainer input.submit{width:auto;}
#af-form-560053752 .buttonContainer{text-align:right;}
#af-form-560053752 button,#af-form-560053752 input,#af-form-560053752 submit,#af-form-560053752 textarea,#af-form-560053752 select,#af-form-560053752 label,#af-form-560053752 optgroup,#af-form-560053752 option{float:none;position:static;margin:0;}
#af-form-560053752 div{margin:0;}
#af-form-560053752 form,#af-form-560053752 textarea,.af-form-wrapper,.af-form-close-button,#af-form-560053752 img{float:none;color:inherit;position:static;background-color:none;border:none;margin:0;padding:0;}
#af-form-560053752 input,#af-form-560053752 button,#af-form-560053752 textarea,#af-form-560053752 select{font-size:100%;}
#af-form-560053752 select,#af-form-560053752 label,#af-form-560053752 optgroup,#af-form-560053752 option{padding:0;}
#af-form-560053752,#af-form-560053752 .quirksMode{width:300px;}
#af-form-560053752.af-quirksMode{overflow-x:hidden;}
#af-form-560053752{background-color:#F0F0F0;border-color:#CFCFCF;border-width:1px;border-style:solid;}
#af-form-560053752{display:none;}
#af-form-560053752{overflow:hidden;}
.af-body .af-textWrap{text-align:left;}
.af-body input.image{border:none!important;}
.af-body input.submit,.af-body input.image,.af-form .af-element input.button{float:none!important;}
.af-body input.text{width:100%;float:none;padding:2px!important;}
.af-body.af-standards input.submit{padding:4px 12px;}
.af-clear{clear:both;}
.af-element label{text-align:left;display:block;float:left;}
.af-element{padding:5px 0;}
.af-form-wrapper{text-indent:0;}
.af-form{text-align:left;margin:auto;}
.af-quirksMode .af-element{padding-left:0!important;padding-right:0!important;}
.lbl-right .af-element label{text-align:right;}
body {
}#af-form-fb-560053752 .af-body .af-textWrap{width:98%;display:block;float:none;}
#af-form-fb-560053752 .af-body input.text, #af-form-fb-560053752 .af-body textarea{background-color:#FFFFFF;border-color:#919191;border-width:1px;border-style:solid;color:#000000;text-decoration:none;font-style:normal;font-weight:normal;font-size:12px;font-family:Verdana, sans-serif;}
#af-form-fb-560053752 .af-body input.text:focus, #af-form-fb-560053752 .af-body textarea:focus{background-color:#FFFAD6;border-color:#030303;border-width:1px;border-style:solid;}
#af-form-fb-560053752 .af-body label.previewLabel{display:block;float:none;text-align:left;width:auto;color:#000000;text-decoration:none;font-style:normal;font-weight:normal;font-size:12px;font-family:Verdana, sans-serif;}
#af-form-fb-560053752 .af-body{padding-bottom:15px;padding-top:15px;background-repeat:no-repeat;background-position:inherit;background-image:none;color:#000000;font-size:11px;font-family:Verdana, sans-serif;}
#af-form-fb-560053752 .af-quirksMode{padding-right:15px;padding-left:15px;}
#af-form-fb-560053752 .af-standards .af-element{padding-right:15px;padding-left:15px;}
#af-form-fb-560053752 .buttonContainer input.submit{background-image:url("http://forms.aweber.com/images/auto/gradient/button/07c.png");background-position:top left;background-repeat:repeat-x;background-color:#0057ac;border:1px solid #0057ac;color:#FFFFFF;text-decoration:none;font-style:normal;font-weight:normal;font-size:14px;font-family:Verdana, sans-serif;}
#af-form-fb-560053752 .buttonContainer input.submit{width:auto;}
#af-form-fb-560053752 .buttonContainer{text-align:right;}
#af-form-fb-560053752 button,#af-form-fb-560053752 input,#af-form-fb-560053752 submit,#af-form-fb-560053752 textarea,#af-form-fb-560053752 select,#af-form-fb-560053752 label,#af-form-fb-560053752 optgroup,#af-form-fb-560053752 option{float:none;position:static;margin:0;}
#af-form-fb-560053752 div{margin:0;}
#af-form-fb-560053752 form,#af-form-fb-560053752 textarea,.af-form-fb-wrapper,.af-form-fb-close-button,#af-form-fb-560053752 img{float:none;color:inherit;position:static;background-color:none;border:none;margin:0;padding:0;}
#af-form-fb-560053752 input,#af-form-fb-560053752 button,#af-form-fb-560053752 textarea,#af-form-fb-560053752 select{font-size:100%;}
#af-form-fb-560053752 select,#af-form-fb-560053752 label,#af-form-fb-560053752 optgroup,#af-form-fb-560053752 option{padding:0;}
#af-form-fb-560053752,#af-form-fb-560053752 .quirksMode{width:300px;}
#af-form-fb-560053752.af-quirksMode{overflow-x:hidden;}
#af-form-fb-560053752{background-color:#F0F0F0;border-color:#CFCFCF;border-width:1px;border-style:solid;}
#af-form-fb-560053752{display:none;}
#af-form-fb-560053752{overflow:hidden;}
.af-body .af-textWrap{text-align:left;}
.af-body input.image{border:none!important;}
.af-body input.submit,.af-body input.image,.af-form .af-element input.button{float:none!important;}
.af-body input.text{width:100%;float:none;padding:2px!important;}
.af-body.af-standards input.submit{padding:4px 12px;}
.af-clear{clear:both;}
.af-element label{text-align:left;display:block;float:left;}
.af-element{padding:5px 0;}
.af-form-fb-wrapper{text-indent:0;}
.af-form{text-align:left;margin:auto;}
.af-quirksMode .af-element{padding-left:0!important;padding-right:0!important;}
.lbl-right .af-element label{text-align:right;}
body {
}
</style>
<iframe name="af-iframe" id="af-iframe-560053752" src="http://forms.aweber.com/form/52/560053752.htm" style="margin: -10px !important; width: 318px !important;" width="300px" height="333px" allow-transparency="true" scrolling="no" frameBorder="0"></iframe><script type='text/javascript'></script><script type="text/javascript">
    <!--
    (function() {
        var IE = /*@cc_on!@*/false;
        if (!IE) { return; }
        if (document.compatMode && document.compatMode == 'BackCompat') {
            if (document.getElementById("af-form-560053752")) {
                document.getElementById("af-form-560053752").className = 'af-form af-quirksMode';
            }
            if (document.getElementById("af-body-560053752")) {
                document.getElementById("af-body-560053752").className = "af-body inline af-quirksMode";
            }
            if (document.getElementById("af-header-560053752")) {
                document.getElementById("af-header-560053752").className = "af-header af-quirksMode";
            }
            if (document.getElementById("af-footer-560053752")) {
                document.getElementById("af-footer-560053752").className = "af-footer af-quirksMode";
            }
        }
    })();
    -->
</script> 
```

我把它放在我的 wordpress 页面上，然后在 style.css 中我添加了：

```
#af-form-560053752 .af-element {float: center;} 
```

但表格不会居中，而是留在左侧。网址是：www.zupertop.com

我已经尝试了两个小时在谷歌上搜索解决方案，但没有找到任何运气。我做的有什么问题吗？

之前谢谢你:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T12:52:08.213

改变这个

```
<iframe name="af-iframe" id="af-iframe-560053752" src="http://forms.aweber.com/form/52/560053752.htm" style="margin: -10px !important; width: 318px !important;" width="300px" height="333px" allow-transparency="true" scrolling="no" frameBorder="0"></iframe><script type='text/javascript'></script><script type="text/javascript"> 
```

经过

```
<iframe name="af-iframe" id="af-iframe-560053752" src="http://forms.aweber.com/form/52/560053752.htm" style="margin: -10px !important; width: 100% !important;" width="300px" height="333px" allow-transparency="true" scrolling="no" frameBorder="0"></iframe><script type='text/javascript'></script><script type="text/javascript"> 
```

# spring - JBoss 7.1 上的 Spring 安全错误 > 未定义名为“springSecurityFilterChain”的 bean

> ID：13043107
> 
> 赞同：0
> 
> 时间：2012-10-24T04:37:36.970
> 
> 标签：spring, jboss, spring-security, jboss7.x

我正在使用 JBoss 7.1。我的应用程序使用的是 spring 3.1、spring security，对于 JSF 2 组件，它使用的是 Richfaces [4.2.1 final]。这是我的 web.xml 的一部分 >

```
 <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:**/*Context.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

    <filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

在 WEB-INF 中，我有用于 spring 配置的 applicationContext.xml 和 securityContext.xml。我也试过这个配置>

```
 <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:**/applicationContext.xml, classpath:**/securityContext.xml </param-value>
</context-param> 
```

而且，当我检查时，我可以看到 WEB-INF\lib 文件夹包含所有 spring jar，根据我的 maven 依赖项 [在 $JBOSS_HOME\standalone\deployments\projectname\WEB-INF\lib 内部署失败后]

而且，当我尝试从 Eclipse 部署它时，现在出现错误堆栈跟踪：

```
09:52:50,588 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
09:52:51,998 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
09:52:52,179 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.1.Final "Brontes" starting
09:52:59,384 INFO  [org.jboss.as.server] JBAS015888: Creating http management service using socket-binding (management-http)
09:52:59,435 INFO  [org.xnio] XNIO Version 3.0.3.GA
09:52:59,563 INFO  [org.xnio.nio] XNIO NIO Implementation Version 3.0.3.GA
09:52:59,623 INFO  [org.jboss.remoting] JBoss Remoting version 3.2.3.GA
09:52:59,784 INFO  [org.jboss.as.logging] JBAS011502: Removing bootstrap log handlers
09:52:59,983 INFO  [org.jboss.as.configadmin] (ServerService Thread Pool -- 26) JBAS016200: Activating ConfigAdmin Subsystem
09:52:59,982 INFO  [org.jboss.as.security] (ServerService Thread Pool -- 44) JBAS013101: Activating Security Subsystem
09:52:59,995 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 48) JBAS015537: Activating WebServices Extension
09:52:59,992 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 31) JBAS010280: Activating Infinispan subsystem.
09:52:59,990 INFO  [org.jboss.as.osgi] (ServerService Thread Pool -- 39) JBAS011940: Activating OSGi Subsystem
09:52:59,991 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 38) JBAS011800: Activating Naming Subsystem
09:53:00,580 INFO  [org.jboss.as.security] (MSC service thread 1-5) JBAS013100: Current PicketBox version=4.0.7.Final
09:53:00,906 INFO  [org.jboss.as.connector] (MSC service thread 1-1) JBAS010408: Starting JCA Subsystem (JBoss IronJacamar 1.0.9.Final)
09:53:02,387 INFO  [org.jboss.as.naming] (MSC service thread 1-2) JBAS011802: Starting Naming Service
09:53:02,478 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-2) JBAS015400: Bound mail session [java:jboss/mail/Default]
09:53:03,552 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
09:53:05,215 INFO  [org.apache.coyote.http11.Http11Protocol] (MSC service thread 1-8) Starting Coyote HTTP/1.1 on http-localhost-127.0.0.1-8080
09:53:07,662 INFO  [org.jboss.ws.common.management.AbstractServerConfig] (MSC service thread 1-1) JBoss Web Services - Stack CXF Server 4.0.2.GA
09:53:10,500 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-4) JBAS015012: Started FileSystemDeploymentService for directory F:\work\softwares\Application Servers\JBoss\jboss-as-7.1.1.Final\jboss-as-7.1.1.Final\standalone\deployments
09:53:10,648 INFO  [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) JBAS015003: Found com.misl.treasury.ui.war in deployment directory. To trigger deployment create a file called com.misl.treasury.ui.war.dodeploy
09:53:10,719 INFO  [org.jboss.as.remoting] (MSC service thread 1-6) JBAS017100: Listening on localhost/127.0.0.1:4447
09:53:10,719 INFO  [org.jboss.as.remoting] (MSC service thread 1-7) JBAS017100: Listening on /127.0.0.1:9999
09:53:11,471 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-7) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
09:53:12,046 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-5) JBAS015876: Starting deployment of "com.misl.treasury.ui.war"
09:53:24,162 INFO  [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/com.misl.treasury.ui]] (MSC service thread 1-2) No Spring WebApplicationInitializer types detected on classpath
09:53:24,238 INFO  [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/com.misl.treasury.ui]] (MSC service thread 1-2) Initializing Spring root WebApplicationContext
09:53:24,242 INFO  [org.springframework.web.context.ContextLoader] (MSC service thread 1-2) Root WebApplicationContext: initialization started
09:53:24,337 INFO  [org.springframework.web.context.support.XmlWebApplicationContext] (MSC service thread 1-2) Refreshing Root WebApplicationContext: startup date [Wed Oct 24 09:53:24 ALMT 2012]; root of context hierarchy
09:53:24,472 INFO  [org.springframework.beans.factory.support.DefaultListableBeanFactory] (MSC service thread 1-2) Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@15dd61: defining beans []; root of factory hierarchy
09:53:24,479 INFO  [org.springframework.web.context.ContextLoader] (MSC service thread 1-2) Root WebApplicationContext: initialization completed in 234 ms
09:53:24,575 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/com.misl.treasury.ui]] (MSC service thread 1-2) Exception starting filter springSecurityFilterChain: org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'springSecurityFilterChain' is defined
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:529) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1095) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:277) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) [spring-beans-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1097) [spring-context-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.web.filter.DelegatingFilterProxy.initDelegate(DelegatingFilterProxy.java:326) [spring-web-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.web.filter.DelegatingFilterProxy.initFilterBean(DelegatingFilterProxy.java:236) [spring-web-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.springframework.web.filter.GenericFilterBean.init(GenericFilterBean.java:194) [spring-web-3.1.0.RELEASE.jar:3.1.0.RELEASE]
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:447) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:3269) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3865) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_23]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_23]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_23]

09:53:24,613 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-2) Error filterStart
09:53:24,615 ERROR [org.apache.catalina.core.StandardContext] (MSC service thread 1-2) Context [/com.misl.treasury.ui] startup failed due to previous errors
09:53:24,617 INFO  [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/com.misl.treasury.ui]] (MSC service thread 1-2) Closing Spring root WebApplicationContext
09:53:24,620 INFO  [org.springframework.web.context.support.XmlWebApplicationContext] (MSC service thread 1-2) Closing Root WebApplicationContext: startup date [Wed Oct 24 09:53:24 ALMT 2012]; root of context hierarchy
09:53:24,623 INFO  [org.springframework.beans.factory.support.DefaultListableBeanFactory] (MSC service thread 1-2) Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@15dd61: defining beans []; root of factory hierarchy
09:53:24,688 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-2) MSC00001: Failed to start service jboss.web.deployment.default-host."/com.misl.treasury.ui": org.jboss.msc.service.StartException in service jboss.web.deployment.default-host."/com.misl.treasury.ui": JBAS018040: Failed to start context
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:95)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_23]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_23]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_23]

09:53:24,703 INFO  [org.jboss.as] (MSC service thread 1-2) JBAS015951: Admin console listening on http://127.0.0.1:9990
09:53:24,705 ERROR [org.jboss.as] (MSC service thread 1-2) JBAS015875: JBoss AS 7.1.1.Final "Brontes" started (with errors) in 35657ms - Started 460 of 539 services (2 services failed or missing dependencies, 76 services are passive or on-demand)
09:53:24,908 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS015870: Deploy of deployment "com.misl.treasury.ui.war" was rolled back with failure message {"JBAS014671: Failed services" => {"jboss.web.deployment.default-host.\"/com.misl.treasury.ui\"" => "org.jboss.msc.service.StartException in service jboss.web.deployment.default-host.\"/com.misl.treasury.ui\": JBAS018040: Failed to start context"}}
09:53:24,913 INFO  [org.jboss.as.controller] (DeploymentScanner-threads - 2) JBAS014774: Service status report
JBAS014777:   Services which failed to start:      service jboss.web.deployment.default-host."/com.misl.treasury.ui": org.jboss.msc.service.StartException in service jboss.web.deployment.default-host."/com.misl.treasury.ui": JBAS018040: Failed to start context

09:53:24,937 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) {"JBAS014653: Composite operation failed and was rolled back. Steps that failed:" => {"Operation step-2" => {"JBAS014671: Failed services" => {"jboss.web.deployment.default-host.\"/com.misl.treasury.ui\"" => "org.jboss.msc.service.StartException in service jboss.web.deployment.default-host.\"/com.misl.treasury.ui\": JBAS018040: Failed to start context"}}}}
09:53:25,282 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015877: Stopped deployment com.misl.treasury.ui.war in 361ms 
```

这个应用程序运行良好，直到我开始将它从 tomcat 7 迁移到 JBoss 7.1 提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T01:56:10.540

/WEB-INF 不在类路径中。您必须包含您的 Spring 配置文件，如下所示：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/applicationContext.xml
        /WEB-INF/securityContext.xml
    </param-value>
</context-param> 
```

也可以看看：

*   [WEB-INF 在 CLASSPATH 中吗？](https://stackoverflow.com/questions/793917/is-web-inf-in-the-classpath)

*   [使用 GAE 的 Spring 安全性](https://stackoverflow.com/questions/11303167/spring-security-with-gae/11303963#11303963)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T21:39:35.583

尝试代替：

```
 <param-value>
         /WEB-INF/applicationContext.xml
         /WEB-INF/applicationContext-security.xml
     </param-value> 
```

在 /WEB-INF/applicationContext.xml 中执行以下操作：

```
 <import resource="applicationContext-security.xml"/> 
```

# ios - 在 XCODE 中使用我自己的 Cell 对象

> ID：13043110
> 
> 赞同：4
> 
> 时间：2012-10-24T04:37:56.707
> 
> 标签：ios, xcode, uitableview, cell

我已经成功创建了我的“单元格”对象（基于 UITableViewCell），并在通过**cellForRowAtIndexPath**构建表格时成功使用了它。

但是，我如何解构我在**didSelectRowAtIndexPath**中所做的事情？

我目前收到错误**“使用 'UITableViewCell' 类型的表达式初始化 'MyCell *__strong' 的不兼容指针类型”**

鉴于我的对象（MyCell）基于 UITableViewCell，我不明白为什么会出现此错误。

你能帮我理解我做错了什么吗？

我的替代方法是为单元格中的两个标签中的每一个都使用一个“标签”并以这种方式获取它们，但我只是在这里进行试验，试图了解更多关于这一切是如何工作的。

任何帮助将不胜感激。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"myCellID";
    MyCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    if (cell == nil) {
        cell = [[MyCell alloc]
                initWithStyle:UITableViewCellStyleDefault
                reuseIdentifier:CellIdentifier];
    }

cell.accountCode.text = @"0009810";
cell.accountName.text = @"Agent Name";

return cell;
} 
```

这是另一种方法。我在**MyCell *cell = [tableView cellForRowAtIndexPath:indexPath];上收到错误**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

// Get the cell that was selected
MyCell *cell = [tableView cellForRowAtIndexPath:indexPath];

AccountRecord *accountRecord = [[AccountRecord alloc] init];
accountRecord.accountCode = cell.accountCode.text;
accountRecord.accountName = cell.accountName.text;

[self performSegueWithIdentifier:@"AccountDetail" sender:accountRecord];

} 
```

这是MyCell

```
#import <UIKit/UIKit.h>

@interface MyCell : UITableViewCell

@property (nonatomic,strong) IBOutlet UILabel *accountCode;
@property (nonatomic,strong) IBOutlet UILabel *accountName;

@end 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T04:42:36.827

改变这个：

```
MyCell *cell = [tableView cellForRowAtIndexPath:indexPath]; 
```

到以下：

```
MyCell *cell = (MyCell *) [tableView cellForRowAtIndexPath:indexPath]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T05:08:44.770

我认为您只需要将 UITableViewCell* 转换为 MyCell*

```
MyCell *cell = (MyCell*)[tableView cellForRowAtIndexPath:indexPath]; 
```

在我看来，其他一切都很好。

通常我不会通过调用 cellForRowAtIndexPath 来获取单元格信息，而是从底层数据模型中获取它。

# java - 如何通过单击按钮检查所有复选框

> ID：13043111
> 
> 赞同：1
> 
> 时间：2012-10-24T04:38:04.413
> 
> 标签：java, swing, model-view-controller, jtable, abstracttablemodel

我是 Swing、UI 和 MVC 的新手，我创建了一个基于 MVC 的代码。现在我的问题是，在控制器部分我有一个 actioneventlistener 来监听不同的按钮点击。在所有这些按钮中，我有“全选”和“取消全选”。在我看来，我有一个表，该表的一列包含“复选框”。现在，当我单击“全选”按钮时，我想选中所有复选框，而“取消全选”我想取消选中所有复选框。

下面是我的代码，它不起作用。请告诉我我在这里做错了什么。另外，如果有人知道更优雅的方式，请分享。谢谢

在我看来

```
public class CustomerSelectorDialogUI extends JFrame{

  public CustomerSelectorDialogUI(TestApplicationUI ownerView, DummyCustomerStore dCStore, boolean modality) {

    //super(ownerView, modality);
    setTitle("[=] Customer Selection Dialog [=]");
    //setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
    custSelectPanel = new JPanel();
    buttonPanel = new JPanel();
    selectAllButton = new JButton(" Select All ");
    clearAllButton = new JButton(" Clear All ");
    applyButton = new JButton(" Apply ");
    cancelButton = new JButton(" Cancel ");

    PopulateAndShow(dCStore, Boolean.FALSE);
}

public void PopulateAndShow(DummyCustomerStore dCStore, Boolean select) {
    List data = new ArrayList();
    for (Customer customer : dCStore.getAllCustomers()) {
        Object record[] = new Object[COLUMN_COUNT];
        record[0] = (select == false) ?  Boolean.FALSE : Boolean.TRUE;
        record[1] = Integer.toString(customer.customerId);
        record[2] = customer.fullName;
        data.add(record);
    }
    tModel = new TableModel(data);

            // In the above for loop accoring to user input (i.e click on check all or
            // uncheck all) i have tried to update the data. As it can be seen that i
            // have a condition for record[0]. 
            //After the loop, here i have tried several options like validate(). repaint but to no avail

            customerTable = new JTable(tModel);
    scrollPane = new JScrollPane(customerTable);

    setContentPane(this.createContentPane());

    setSize(480, 580);
    setResizable(false);
    setVisible(true);

}

private JPanel createContentPane() {
    custSelectPanel.setLayout(null);

    customerTable.setDragEnabled(false);
    customerTable.setFillsViewportHeight(true);

    scrollPane.setLocation(10, 10);
    scrollPane.setSize(450,450);

    custSelectPanel.add(scrollPane);

    buttonPanel.setLayout(null);
    buttonPanel.setLocation(10, 480);
    buttonPanel.setSize(450, 100);
    custSelectPanel.add(buttonPanel);

    selectAllButton.setLocation(0, 0);
    selectAllButton.setSize(100, 40);
    buttonPanel.add(selectAllButton);

    clearAllButton.setLocation(110, 0);
    clearAllButton.setSize(100, 40);
    buttonPanel.add(clearAllButton);

    applyButton.setLocation(240, 0);
    applyButton.setSize(100, 40);
    buttonPanel.add(applyButton);

    cancelButton.setLocation(350, 0);
    cancelButton.setSize(100, 40);
    buttonPanel.add(cancelButton);

    return custSelectPanel;
}
} 
```

表模型

```
private class TableModel extends AbstractTableModel {

    private List data;
    public TableModel(List data) {
        this.data = data;
    }

    private String[] columnNames = {"Selected ",
            "Customer Id ",
            "Customer Name "
    };

    public int getColumnCount() {
        return COLUMN_COUNT;
    }
    public int getRowCount() {
        return data == null ? 0 : data.size();
    }

    public String getColumnName(int col) {
        return columnNames[col];
    }

    public void setValueAt(Object value, int rowIndex, int columnIndex) {
        getRecord(rowIndex)[columnIndex] = value;
        super.fireTableCellUpdated(rowIndex, columnIndex);
    }

    private Object[] getRecord(int rowIndex) {
        return (Object[]) data.get(rowIndex);
    }

    public Object getValueAt(int rowIndex, int columnIndex) {
        return getRecord(rowIndex)[columnIndex];
    }

    public Class getColumnClass(int columnIndex) {
        if (data == null || data.size() == 0) {
            return Object.class;
        }
        Object o = getValueAt(0, columnIndex);
        return o == null ? Object.class : o.getClass();
    }

    public boolean isCellEditable(int row, int col) {
        if (col > 0) {
            return false;
        } else {
            return true;
        }
    }
} 
} 
```

视图动作监听器

```
class CustomerSelectorUIListener implements ActionListener{

CustomerSelectorDialogUI custSelectView;
Controller controller;

public CustomerSelectorUIListener (Controller controller, CustomerSelectorDialogUI custSelectView) {
    this.custSelectView = custSelectView;
    this.controller = controller;
}

@Override
public void actionPerformed(ActionEvent e) {
    String actionEvent = e.getActionCommand();

    else if ( actionEvent.equals( "clearAllButton" ) )
    {
        controller.checkButtonControl(false);
    }       
    else if ( actionEvent.equals( "selectAllButton" ) )
    {
        controller.checkButtonControl(true);
    }       
}
} 
```

主控制器

```
public class Controller implements ActionListener{

CustomerSelectorDialogUI selectUI;
DummyCustomerStore store;

public Controller( DummyCustomerStore store, TestApplicationUI appUI )
{
    this.store = store;
    this.appUI = appUI;
    appUI.ButtonListener( this );           
} 

@Override
public void actionPerformed(ActionEvent event) {
    String viewAction = event.getActionCommand();

    if (viewAction.equals("TEST")) {
        selectUI = new CustomerSelectorDialogUI(appUI, store, true);
        selectUI.showTextActionListeners(new CustomerSelectorUIListener( this, selectUI ) );
        selectUI.setVisible( true );
    }
}

public void checkButtonControl (Boolean checkAll) {
    selectUI.PopulateAndShow(store, checkAll);
}       
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T04:56:02.030

看起来问题与单击按钮后重新创建表的方式有关。您正在创建一个新表并将其添加到内容窗格中。但是，旧控件也保留在那里。如果添加：

```
getContentPane().removeAll(); 
```

打电话前：

```
setContentPane(this.createContentPane()); 
```

它应该解决眼前的问题。但是，您应该考虑使用更有效的方法来更新表 - 只需更新模型或替换它。不需要删除整个表。

编辑：

这是一个如何更新模型的简化示例：

```
public void toggleSelection(Boolean select) {
    for (int rowIndex = 0; rowIndex < tModel.getRowCount(); rowIndex++) {
        tModel.setValueAt(select, rowIndex, 0);
    }
} 
```

然后，只需从控制器执行此方法。

如有必要，您还可以重建模型，即（再次简化）：

```
public void toggleSelection(Boolean select) {
    List data = new ArrayList();

    for (int idx = 0; idx < 5; idx++){
        Object record[] = new Object[] {select, "test", "test"};
        data.add(record);
    }

    TableModel model = new TableModel(data);
    customerTable.setModel(model);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T04:47:14.153

添加可能会`revalidate()`有所`PopulateAndShow`帮助

```
setSize(480, 580);
setResizable(false);
setVisible(true);
revalidate(); 
```

# c++ - 如何多次顺序调用3个线程？

> ID：13043124
> 
> 赞同：2
> 
> 时间：2012-10-24T04:39:48.277
> 
> 标签：c++, c, windows, multithreading

如何多次顺序调用3个线程？例如：在迭代 1 中，执行顺序应该是“Thread0->thread1->thread2”，然后在迭代 2 中应该是相同的，即“Thread0 -> thread1->thread2”等等。示例代码只执行一次 3 个线程。它不会进行第二次迭代。

```
 Thread0 = CreateThread( NULL,0,ThreadProc0, NULL, CREATE_SUSPENDED, &ThreadID);
    Thread1 = CreateThread( NULL,0,ThreadProc1, NULL, CREATE_SUSPENDED, &ThreadID);
    Thread2 = CreateThread( NULL,0,ThreadProc2, NULL, CREATE_SUSPENDED, &ThreadID);

    for(i=0;i<iterations;i++)                //Iterations in calling threads
    {
        ResumeThread(Thread0);
        WaitForSingleObject(Thread0, INFINITE);
        ResumeThread(Thread1);
        WaitForSingleObject(Thread1, INFINITE);
        ResumeThread(Thread2);
        WaitForSingleObject(Thread2, INFINITE);
    }

    // Close thread and semaphore handles 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T04:55:49.463

我认为你误解了这个概念。`ResumeThread`意味着**重新启动**线程，**而不是**从头重新运行线程proc。它只是从之前停止的地方*恢复proc。*

基本上有两种方式。

1.  在每次迭代中创建新线程。
2.  重写您的线程过程以“永远”存在并使用事件与其同步。

参考这里：[如何重启线程？](http://forums.whirlpool.net.au/archive/1206882)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T04:41:14.083

当您`WaitForSingleObject()`使用线程句柄调用时，您正在等待线程完成运行（当它从其线程进程返回时）。完成后，`ResumeThread()`将不再有任何影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T04:46:31.367

您应该考虑使用事件来同步线程而不是 ResumeThread。

# .net - CreateRibbonExtensibilityObject 仅创建一个功能区对象 - Outlook 2010 插件

> ID：13043127
> 
> 赞同：2
> 
> 时间：2012-10-24T04:40:43.237
> 
> 标签：.net, vsto, outlook-addin, outlook-2010

我正在使用 Visual Studio 2008 (.Net 3.5) 创建要在 Outlook 2010 中使用的插件。我定义了两个单独的功能区。其中一个用于为附件创建上下文菜单，另一个用于向 TabReadMessage 添加一个按钮。

我很困惑我应该如何让他们两个都加载。我在 ThisAddIn.vb 中有一个函数，它不可能做我想做的事 - 加载两个功能区：

```
Protected Overrides Function CreateRibbonExtensibilityObject() As _
        Microsoft.Office.Core.IRibbonExtensibility

    Return New RibbonAttachAttachmentToPO()
    Return New RibbonOutlook14ReadMail()
End Function 
```

这个问题的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T07:22:46.300

您将拥有 2 个 XML 文件，一个用于 TabReadMessage，一个用于 Attachment 上下文菜单。然后你只需要一个 Ribbon 类， CreateRibbonExtensibilityObject() 加载 Ribbon 类。

在 Ribbon 类的 GetCustomUI() 函数中，您将根据您在 Outlook 的哪个部分加载相应的 XML 文件，无论是在资源管理器还是检查器中。

你可以这样做（VB.Net）：

```
Public Function GetCustomUI(ByVal ribbonID As String) As String Implements Microsoft.Office.Core.IRibbonExtensibility.GetCustomUI
   Select Case ribbonID
      Case "Microsoft.Outlook.Mail.Read"  'For TabReadMessage
         Return GetResourceText("The.Read.Message.XML")
      Case "Microsoft.Outlook.Mail.Compose" 'For compose new email message
         Return GetResourceText(".....")
      Case ...
   End Select
End Function 
```

# java - 使用 SVN 存储库的 Eclipse 插件开发

> ID：13043128
> 
> 赞同：3
> 
> 时间：2012-10-24T04:40:51.527
> 
> 标签：java, eclipse, svn

我正在开发一个 Eclipse 插件，当我在 Project Explorer 视图中右键单击项目并在菜单中选择我的选项时执行该插件。问题是我需要在 svn 存储库中获取所选项目的位置。当您右键单击任何项​​目并转到“属性”时，总会列出 SVN 信息，我还可以在其中看到资源 URL。您知道以编程方式获取它的任何方法吗？

提前感谢您的帮助和承诺。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:33:11.173

Plug-In Selection Spy 可用于找出在 Eclipse 中实现当前活动元素的代码。

例如，打开“项目属性”窗口并选择“Subversion”元素（这对我来说是存在的，因为我安装了 Subclipse）。这将显示一个包含存储库 URL 的属性页面。按 Alt+Shift+F1，您将看到一个弹出窗口，其中列出了提供该页面的代码。

![间谍截图](../Images/d87eec9f3ce520f8f8ab96704295a082.png)

如果您打开 org.tigris.subversion.subclipse.ui.properties.SVNPropertyPage（如果没有，则从 Subclipse 站点获取源代码），您可以开始尝试确定它从何处获取存储库 URL。

# javascript - 难以将动态值传递给 onClick 方法

> ID：13043137
> 
> 赞同：0
> 
> 时间：2012-10-24T04:42:06.470
> 
> 标签：javascript, html, jsp

```
<a href="Variables.createURL" OnClick='getURI('<%=variables.createURL>');'></a> 
```

当我尝试将动态值传递给 OnClick 方法时，出现异常

```
Illegal character in string < 
```

我在这里做的错误是什么，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T04:45:21.817

更改为`<a href="Variables.createURL" OnClick='getURI('<%=variables.createURL%>');'></a>`。你忘了“ `%`”之后`createURL`。

# java - 根据我输入的用户输入，没有收到任何输出。

> ID：13043139
> 
> 赞同：0
> 
> 时间：2012-10-24T04:42:09.107
> 
> 标签：java, if-statement, do-while

这是我到目前为止的代码，我只是尝试通过输入随机字符来测试它，看看我是否得到了正确的 if 语句（也输入了退出）。

但是，在我输入我的输入后什么都没有发生，有什么原因吗？

先感谢您。

```
 public static void main(String[] args) {

//==============================================================================        
        // Opening Message.
        Scanner scan = new Scanner(System.in);
        System.out.print("Welcome to the Theatre Booking System. (QUIT to exit)"
                + "\nWould you like to purchase tickets or list available seats?"
                + "(Purchase/List/Help)");
        scan.nextLine();
        String answer;

        answer = scan.nextLine();
        int count = 0;
//==============================================================================
        // Nested if statement.
        // First if statement.
        if (answer.equalsIgnoreCase("purchase")) {
            // Code for purchase  
        } else {
            if (answer.equalsIgnoreCase("list")) {
                // Code for list   
            } else {
                if (answer.equalsIgnoreCase("help")) {
                    // Code for help
                } else {
                    if (answer.equalsIgnoreCase("quit")) {
                        System.exit(-1);
                    } else {
                        do {
                            System.out.print("Sorry, incorrect input please enter"
                                    + " a valid input (Purchase/List/Help or QUIT to exit");
                            scan.nextLine();
                            count++;
                        } while (!answer.equalsIgnoreCase("purchase")
                                || !answer.equalsIgnoreCase("list")
                                || !answer.equalsIgnoreCase("quit")
                                || !answer.equalsIgnoreCase("help"));

                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T04:46:59.887

您有两个`scan.nextLine()`语句，您使用第二个语句作为输入。因此，您需要先按“Enter”，然后再按“Enter”输入。

还要避免嵌套if，可以直接用同一个`if`多`else if`块

# php - 如何编写这些文件的正确路径？

> ID：13043141
> 
> 赞同：4
> 
> 时间：2012-10-24T04:42:14.733
> 
> 标签：php

我在这里有一个 PHP 文件：

```
/public_html/folder1/folder2/index.php 
```

此文件需要位于此处的 CSS 文件：

```
/public_html/folderX/folderY/css1.css 
```

我应该将访问该 CSS 文件的正确路径放在 index.php 中吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T04:44:00.933

假设这`public_html`是你的根：

```
<link rel="stylesheet" type="text/css" href="/folderX/folderY/css1.css" /> 
```

我个人的建议是不要干涉相对路径；当您开始移动 PHP 脚本时，它们只会给您带来麻烦；或者更糟糕的是，当您的代码作为另一个脚本的一部分包含在内而您无法知道它在哪里时。

CSS（图像）中的引用也可以这样说；CSS 文件中的相对路径取自该文件的位置，而不是使用页面位置的内联 CSS，这并不总是很明显。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T04:44:28.510

您可以将其相对添加到文档中：

`../../folderX/folderY/css1.css`

或者相对于文档根：

`/folderX/folderY/css1.css`

# r - 如何使用 .Rprofile 使 q('yes') 成为 R 中的默认退出行为？

> ID：13043146
> 
> 赞同：6
> 
> 时间：2012-10-24T04:42:46.390
> 
> 标签：r

我希望能够输入`q()`R 并让 R 退出，而不是提示我是否要退出。

**是否有一些代码可以放入我的`.Rprofile`文件中以实现这一点？**

如果我不必在我的工作区中浮动自定义函数，我会更喜欢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T04:56:09.623

在您的 Rprofile.site 文件中：

```
q <- function(save = "yes", status = 0, runLast = TRUE){
.Internal(quit(save, status, runLast))
#<environment: namespace:base>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-03T16:39:09.217

使用 R --vanilla 效果更好

# javascript - 多个样式表 - 仅禁用特定组

> ID：13043147
> 
> 赞同：7
> 
> 时间：2012-10-24T04:43:11.693
> 
> 标签：javascript, html, css

我有一个带有两组备用样式表的主样式表。当一组样式表被激活时，备用的两组样式表都将被禁用。主样式表是持久的并且永远不会被禁用。备用样式表仅包含从主样式表中取出的不同元素，并且仅在激活时实现。我添加了两个组的类，看看我是否可以完成激活组内的一个并停用该组中的其他人，但不能完成另一组中的任何人。我尝试了许多其他样式切换器和 jquery 方法，但我没有得到任何地方，这是最好的结果。我对这一切真的很陌生，希望能得到任何帮助。

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<link href="/files/theme/mainstyle.css" rel="stylesheet "type="text/css"/>

<link href="/files/theme/body1.css" rel="stylesheet" type="text/css" class="group1" title="body1" />
<link href="/files/theme/body2.css" rel="stylesheet" type="text/css" class="group1" title="body2" />
<link href="/files/theme/body3.css" rel="stylesheet" type="text/css" class="group1" title="body3" />

<link href="/files/theme/para1.css" rel="stylesheet" type="text/css" class="group2" title="para1" />
<link href="/files/theme/para2.css" rel="stylesheet" type="text/css" class="group2" title="para2" />
<link href="/files/theme/para3.css" rel="stylesheet" type="text/css" class="group2" title="para3" />

<script type="text/javascript" src="/files/theme/styleswitcher.js"></script>

</head> 
```

[来自http://www.alistapart.com/articles/alternate/](http://www.alistapart.com/articles/alternate/)的 styleswitcher.js 文件

```
function setActiveStyleSheet(title) {
  var i, a, main;
  for(i=0; (a = document.getElementsByTagName("link")[i]); i++) {
    if(a.getAttribute("rel").indexOf("style") != -1 && a.getAttribute("title")) {
      a.disabled = true;
      if(a.getAttribute("title") == title) a.disabled = false;
    }
  }
    }

function getActiveStyleSheet() {
  var i, a;
  for(i=0; (a = document.getElementsByTagName("link")[i]); i++) {
    if(a.getAttribute("rel").indexOf("style") != -1 && a.getAttribute("title") && !a.disabled) return  a.getAttribute("title");
  }
  return null;
}

function getPreferredStyleSheet() {
  var i, a;
  for(i=0; (a = document.getElementsByTagName("link")[i]); i++) {
    if(a.getAttribute("rel").indexOf("style") != -1
       && a.getAttribute("rel").indexOf("alt") == -1
       && a.getAttribute("title")
       ) return a.getAttribute("title");
  }
  return null;
}

function createCookie(name,value,days) {
  if (days) {
    var date = new Date();
    date.setTime(date.getTime()+(days*24*60*60*1000));
    var expires = "; expires="+date.toGMTString();
  }
  else expires = "";
  document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
  var nameEQ = name + "=";
  var ca = document.cookie.split(';');
  for(var i=0;i < ca.length;i++) {
    var c = ca[i];
    while (c.charAt(0)==' ') c = c.substring(1,c.length);
    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
  }
  return null;
}

window.onload = function(e) {
  var cookie = readCookie("style");
  var title = cookie ? cookie : getPreferredStyleSheet();
  setActiveStyleSheet(title);
}

window.onunload = function(e) {
  var title = getActiveStyleSheet();
  createCookie("style", title, 365);
}

var cookie = readCookie("style");
var title = cookie ? cookie : getPreferredStyleSheet();
setActiveStyleSheet(title); 
```

粗略的样式表选择器

```
<ul>
<li> <a href="#" 
onclick="setActiveStyleSheet('body1'); 
return false;">body1</a></li>
<li> <a href="#" 
onclick="setActiveStyleSheet('body2'); 
return false;">body1</a></li>
<li> <a href="#" 
onclick="setActiveStyleSheet('body3'); 
return false;">body3</a></li>
<li> <a href="#" 
onclick="setActiveStyleSheet('para1'); 
return false;">para1</a></li>
<li> <a href="#" 
onclick="setActiveStyleSheet('para2'); 
return false;">para2</a></li>
<li> <a href="#" 
onclick="setActiveStyleSheet('para3'); 
return false;">para3</a></li>
</ul> 
```

如果有可能以另一种考虑正确方式的方式来解决这个问题，我很想指出那个方向来解决这个问题。如果没有，我仍然很想知道这是否可能与我所拥有的，我猜是学习课程。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T05:26:25.443

**更新**
听起来您希望能够一次从每个组中激活 1 个样式表。由于您使用的是 cookie，因此您希望能够保存每个组的每个样式表，以便用户的所有设置都正确。我不明白你的`getPreferredStyleSheet()`函数是做什么的，因为它只返回第`<link>`一个样式表。如果您从一些已经打开的链接开始，那么您似乎根本不需要该功能。我认为当您创建 cookie 时，您可以直接调用`getActiveStyleSheets()`，因为可以安全地假设当该人离开页面时，他们会按照自己喜欢的方式进行设置。

无论如何，我编辑了您的函数以允许从 cookie 中设置多个样式表，并保存多个样式表以保存在 cookie 中。您必须更新您的调用，因为我`s`在函数名称中添加了一个。

**JavaScript**

```
​function setActiveStyleSheets(ids){
  ids = ids.split(',');
  var i, j, l, link;
  for(i=0; (link = document.getElementById(ids[i])); i++){
    for(j=0; (l = document.getElementsByTagName('link')[j]); j++){
      if(l.hasAttribute('switch') && l.className.indexOf(link.className) !== -1)
        l.removeAttribute('href');
    }
    link.href = link.getAttribute('switch');
  }
}

function getActiveStyleSheets(){
  var i, link, active = [];
  for(i=0; (link = document.getElementsByTagName('link')[i]); i++){
    if(link.hasAttribute('switch') && link.href){
      active.push(link.id);
    }
  }
  return active.join(',');
}

function createCookie(name,value,days) {
  if (days) {
    var date = new Date();
    date.setTime(date.getTime()+(days*24*60*60*1000));
    var expires = "; expires="+date.toGMTString();
  }
  else expires = "";
  document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
  var nameEQ = name + "=";
  var i, c, ca = document.cookie.split(';');
  for(i=0; (c = ca[i]); i++) {
    while (c.charAt(0)==' ') c = c.substring(1,c.length);
    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
  }
  return null;
}

window.onload = function(e) {
  var cookie = readCookie("style");
  var title = cookie || getActiveStyleSheets();
  setActiveStyleSheets(title);
}

window.onunload = function(e) {
  var title = getActiveStyleSheets();
  createCookie("style", title, 365);
} 
```

**HTML**

```
<link href="/files/theme/body1.css" switch="/files/theme/body1.css" rel="stylesheet" type="text/css" class="group1" id="body1" />
<link switch="/files/theme/body2.css" rel="stylesheet" type="text/css" class="group1" id="body2" />
<link switch="/files/theme/body3.css" rel="stylesheet" type="text/css" class="group1" id="body3" />

<link href="/files/theme/para1.css" switch="/files/theme/para1.css" rel="stylesheet" type="text/css" class="group2" id="para1" />
<link switch="/files/theme/para2.css" rel="stylesheet" type="text/css" class="group2" id="para2" />
<link switch="/files/theme/para3.css" rel="stylesheet" type="text/css" class="group2" id="para3" />

...

<ul>
  <li> 
    <a href="#" onclick="setActiveStyleSheets('body1'); return false;">body1</a>
  </li>
  <li> 
    <a href="#" onclick="setActiveStyleSheets('body2'); return false;">body2</a>
  </li>
  <li> 
    <a href="#" onclick="setActiveStyleSheets('body3'); return false;">body3</a>
  </li>
  <li> 
    <a href="#" onclick="setActiveStyleSheets('para1'); return false;">para1</a>
  </li>
  <li> 
    <a href="#" onclick="setActiveStyleSheets('para2'); return false;">para2</a>
  </li>
  <li> 
    <a href="#" onclick="setActiveStyleSheets('para3'); return false;">para3</a>
  </li>
</ul> 
```

* * *

这是为您提供的快速解决方案。我没有花任何时间优化或考虑其他解决方案，因为它已经很晚了，所以可能有更好的方法可以做到这一点，但是已经很晚了，我想我至少会给你一些东西。

**HTML** - 将您的`href`属性更改为`switch`和您的`title`属性为`id`

```
<link switch="/files/theme/body1.css" rel="stylesheet" type="text/css" class="group1" id="body1" />
<link switch="/files/theme/body2.css" rel="stylesheet" type="text/css" class="group1" id="body2" />
<link switch="/files/theme/body3.css" rel="stylesheet" type="text/css" class="group1" id="body3" />

<link switch="/files/theme/para1.css" rel="stylesheet" type="text/css" class="group2" id="para1" />
<link switch="/files/theme/para2.css" rel="stylesheet" type="text/css" class="group2" id="para2" />
<link switch="/files/theme/para3.css" rel="stylesheet" type="text/css" class="group2" id="para3" /> 
```

**JavaScript** - 将您的`setActiveStyleSheet`函数更改为：

```
function setActiveStyleSheet(id){
  var i, l;
  var link = document.getElementById(id);
    for(i=0; (l = document.getElementsByTagName('link')[i]); i++){
      if(l.hasAttribute('switch') /*&& l.className.indexOf(link.className) !== -1*/)
        l.removeAttribute('href');
    }
    link.href = link.getAttribute('switch');
} 
```

If the `<link>` is not pointed to the stylesheet, then you can't have the styling. When you click on a `<li>` item, it passes the id to this function and this function checks if the `<link>` has the `switch` attribute and if it does, it makes sure there the `href` attribute is set to nothing. Now I couldn't quite tell if you wanted to allow a `<link>` from each class to be activated. If you do, just remove the `/* */` from the second part of the if statement. If not, then you can just delete that part. Anyways, after all of the links `href` attributes are removed, the `<link>` with the corresponding id has it's `href` attribute set to it's `switch` attribute. So it is active while all of the rest are not.

Like I said I'm sure there's a better way to do this, but this was easy and it's late and I'm going to bed. Hope this helps.

# c++ - 跳过 cin.get() 和 cin.ignore()

> ID：13043148
> 
> 赞同：3
> 
> 时间：2012-10-24T04:43:21.223
> 
> 标签：c++, cin

出于某种原因，我的程序正在跳过代码片段`cin.get();`和`cin.ignore();`. 我不知道为什么会这样，因为这两个片段在 main() 范围内工作正常，而不是在 if 语句中。

这是相关的代码片段：

```
input.open(inputFileName);
if (input.fail())
{
    cout << "Error: failed to open '" << inputFileName << "'.\n\n";
    cout << "Press '' to end the program...";
    cin.get(); //cin.ignore() also does nothing.
    input.close();
    exit(1);
} 
```

其余的源代码可以在这里找到：http: [//pastebin.com/xy0qMvBq](http://pastebin.com/xy0qMvBq)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T04:48:29.360

```
cin >> inputFileName; 
```

使用该命令，用户将键入一些“东西”，然后按 Enter。这会将“东西”和换行符放入输入缓冲区。然后“东西”将被存储到 inputFileName 中，换行符将被保留在那里。这是 cin.get() 和 cin.ignore() 读取的内容，它们没有被跳过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T06:26:04.073

您发布的部分代码绝对可以正常工作，并且在这种情况下不会忽略 cin.get() 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-03T12:24:21.460

尝试：

```
std::string dummy;
getline(std::cin,dummy); 
```

或（如果您还没有准备好）：

```
cin.ignore(1000,'\n'); 
```

cin.ignore(1000,'\n'); 删除 cin 缓冲区中的所有字符，直到在 cin 缓冲区中找到一个 '\n' 字符或达到忽略/删除字符的最大值（在这种情况下为 1000）。

# c# - 当前上下文中不存在名称“txtBxSearch”

> ID：13043150
> 
> 赞同：1
> 
> 时间：2012-10-24T04:43:45.237
> 
> 标签：c#, asp.net, input

我这里有一个由输入框和文本区域组成的代码，但是当我要调用名称为 txtBxSearch 的输入框时。发生错误，显示“当前上下文中不存在名称 'txtBxSearch'”

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">

<div style="padding-top:10px; padding-left:40px;"> <span class="fields">To:</span><br />
   <input type="text" id="txtBxSearch" name="txtBxSearch" class="border fields" 
    style="width:891px;" onclick="return txtBxSearch_onclick()" /> 
```

```
<div style="padding-top:10px; padding-left:40px;"><span class="fields">Text Message:</span><br />
<textarea id="TextArea1" onkeyup="textCounter(this,'counter',160);"  cols="20" rows="2" class="fields border" style="height:150px; width:95%;"></textarea> 
```

```
</asp:Content> 
```

我在 C# 中的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Data.SqlClient;
using System.Web.Services;
using System.Web.UI.WebControls;

public partial class SMS : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{

}
private string groupKeyword;
private string message;
private int priorityLevel;
private bool isDiagnosticCommand;
private bool concatenate;
private object confirmationDate;

protected void btnSend_Click(object sender, ImageClickEventArgs e)
    {

        groupKeyword = txtBxSearch.value;
        message = TextArea1.Value;
        priorityLevel = 253;
        //confirmationDate = DateTime.Now.ToShortDateString();
        isDiagnosticCommand = false;
        concatenate = false;

}
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T04:45:14.833

因为您的控件`txtbxSearch`是 HTML 控件，所以它不是 ASP.Net 控件。这就是为什么您无法在后面的代码中访问它的原因。

用你的文本框指定`runat="server"`属性，你应该可以在后面的代码中访问它。

您也可以在后面的代码中尝试：

```
string value = Request.Form["txtbxSearch"]; 
```

如果您不想`runat="server"`与输入控件一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T04:47:38.837

您的代码需要是：

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">

<div style="padding-top:10px; padding-left:40px;"> <span class="fields">To:</span><br />
   <input type="text" id="txtBxSearch" name="txtBxSearch" class="border fields" 
    style="width:891px;" onclick="return txtBxSearch_onclick()" runat="server" />
<div style="padding-top:10px; padding-left:40px;"><span class="fields">Text Message:</span><br />
<textarea id="TextArea1" onkeyup="textCounter(this,'counter',160);"  cols="20" rows="2" class="fields border" style="height:150px; width:95%;"></textarea>
</asp:Content> 
```

注意 txtBxSearch 中的 runat=server

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T04:49:04.430

如果你想访问它，你只需要一个 runat="server" 属性

```
<div style="padding-top:10px; padding-left:40px;"> <span class="fields">To:</span><br />
       <input type="text" id="txtBxSearch" name="txtBxSearch" class="border fields" 
        style="width:891px;" onclick="return txtBxSearch_onclick()" runat="server" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-25T05:43:16.847

[![来自视觉工作室的快照](../Images/cc626d079515057f5c6768fdbce74099.png)](https://i.stack.imgur.com/vnIQU.png)

在 Visual Studio 中，将 GenerateMember 的值更改为 True 。然后您可以获取文本字段名称。它对我有用。

# java - 更新数据时如何将光标保持在行上？

> ID：13043152
> 
> 赞同：0
> 
> 时间：2012-10-24T04:43:55.297
> 
> 标签：java, vaadin, single-page-application

SPA 中的数据应定期更新，以在表中显示当前的数据库状态。我试图通过表格行上的点击事件来做到这一点。

```
table.addListener(
    new Table.ValueChangeListener() {
        public void valueChange(final ValueChangeEvent event) {

            BeanItemContainer<Incoming> bic;
            Query query = sess.createQuery("...");
            List l = query ...
            bic = new BeanItemContainer<Incoming>(l);
            table.setContainerDataSource(bic);
        }
    }
); 
```

但是在这一行光标丢失了：

```
table.setContainerDataSource(bic); 
```

更新数据时如何将光标保持在行上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:47:31.103

使用您目前的方法，我会这样做：

```
...
Object selection = table.getValue();
bic = new BeanItemContainer<Incoming>(l);
table.setContainerDataSource(bic);
table.setValue(selection);
... 
```

# java - 插入 BST 没有头节点 JAVA

> ID：13043154
> 
> 赞同：0
> 
> 时间：2012-10-24T04:44:14.730
> 
> 标签：java, binary-search-tree

我正在研究 BST 的递归插入方法。这个函数被认为是一个递归辅助方法，并且位于一个名为 Node 的私有类中。Node 类位于名为 BinarySearchTree 的类中，该类包含根的实例变量。当我尝试插入一个元素时，我在以下位置收到 NullPointerException：

> this.left = insert(((Node)left).element);

我不确定为什么会发生这种情况。如果我理解正确，在 BST 中，我想将项目插入到横向路径的最后一个位置。任何帮助表示赞赏！

```
private class Node implements BinaryNode<E>
{
    E item;
    BinaryNode<E> left, right;

   public BinaryNode<E> insert(E item)
   {
       int compare = item.compareTo(((Node)root).item);

       if(root == null)
       {
           root = new Node();
           ((Node)root).item = item;
       }
       else if(compare < 0)
       {
           this.left = insert(((Node)left).item);
       }
       else if(compare > 0)
       {
           this.right = insert(((Node)right).item);
       }

        return root;
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T04:48:20.497

因为你的左边是空的？不应该是 this.left = insert(item)

但是代码中还有其他问题。我会把它留给你找出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T04:51:27.610

那是因为您在成功插入之前正在从空对象读取参数。你的左右都是空的，所以我会把它留给你弄清楚，但考虑一下。您应该`new Node(item)`改为插入。如果您的函数是递归的，那么您需要传入当前父节点（根）的引用。这是一个让你上路的框架，希望你能理解代码。

```
 private Node<Item> insert(Node traversedNode, Item item)
   {
     if(traversedNode == null)
     {
         // make your life easier and pass item in a constructor
         return new Node(item);
     }
     // Do this iff traversedNode != null, which it is in this block
     int compare = item.compareTo(traversedNode.item);
        ... 
     // Now you check to see if compare < 0 and compare > 0
     // then you insert your node accordingly and recursively
     // you need to pass the current node left or right as your new traversedNode
     // eg. traversedNode.left = insert( traversedNode.left, item )
   } 
```

# ruby-on-rails - rspec 使用 rails 时是否使用变形？

> ID：13043155
> 
> 赞同：0
> 
> 时间：2012-10-24T04:44:21.830
> 
> 标签：ruby-on-rails, rspec

我正在阅读[michael hartl 教程](http://ruby.railstutorial.org/chapters/following-users#top)；使用具有“跟随”方法的模型用户；其中一个测试有一个像“should_not be_following”这样的断言，所以我假设这里内部使用了屈折来找到跟随方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T04:48:52.380

不，[它使用 RSpec 自己的谓词方法规则](https://www.relishapp.com/rspec/rspec-expectations/v/2-11/docs/built-in-matchers/predicate-matchers)：

```
thing.should_not be_following 
```

只是简写

```
thing.following?.should_not be(true) 
```

# python - Matplotlib xlabel 间距

> ID：13043158
> 
> 赞同：1
> 
> 时间：2012-10-24T04:44:48.433
> 
> 标签：python, matplotlib

我在这个问题的底部包含了所有产生以下图表的代码：

![带有 xlabel 重叠的误差线](../Images/402470788314882175db3916e28080e7.png)

如您所见，xlabels（尽管被旋转 w/`fig.autofmt_xdate()`重叠到难以辨认的程度。

**我的问题**：是否有一种聪明的方法来实现这一点，以便这些标签半正确地间隔开？而不是我必须手动进入——这些情节必须用自动脚本制作。

```
import pylab as pl 

fig = pl.figure()
ax = fig.add_subplot(111)

vshiftDict = {'2.55958': 'FeII1608',
 '2.69745': 'AlII1670',
 '3.10440': 'AlIII1854',
 '3.12237': 'AlIII1862',
 '4.25461': 'FeII2374'}

qvalDict = {'AlII1670': {'e': 64.57000000000001,
              'l': 1670.78861,
              'q': 270.0,
              'v': -97.94999999999999,
              'w': 59851.97612760839,
              'x': -2704805.050627638},
 'AlIII1854': {'e': 353.45,
               'l': 1854.708966,
               'q': 458.0,
               'v': -316.38,
               'w': 53916.81489288709,
               'x': -5093214.27969269},
 'AlIII1862': {'e': 475.99,
               'l': 1862.780325,
               'q': 224.0,
               'v': 96.87,
               'w': 53683.19530645677,
               'x': -2501844.7657091334},
 'FeII1260': {'l': 1260.535572,
              'q': -1165.0,
              'w': 79331.35900428203,
              'x': 8805048.040363163},
 'FeII1608': {'e': 100.72,
              'l': 1608.450852,
              'q': -1165.0,
              'v': 87.42999999999999,
              'w': 62171.62300959135,
              'x': 11235293.423693288},
 'FeII1611': {'l': 1611.200369,
              'q': 1330.0,
              'w': 62065.526997157736,
              'x': -12848484.124150252},
 'FeII2249': {'l': 2249.875472,
              'q': 1604.0,
              'w': 44446.90439293788,
              'x': -21637821.99006887},
 'FeII2260': {'l': 2260.779108,
              'q': 1435.0,
              'w': 44232.538971250964,
              'x': -19451841.88995395},
 'FeII2344': {'l': 2344.212747,
              'q': 1375.0,
              'w': 42658.244277519065,
              'x': -19326375.791196708},
 'FeII2367': {'l': 2367.58924,
              'q': 1803.0,
              'w': 42237.05628937561,
              'x': -25594861.4444499},
 'FeII2374': {'e': 138.51,
              'l': 2374.460064,
              'q': 1625.0,
              'v': 73.96,
              'w': 42114.83760714032,
              'x': -23134969.61780541},
 'FeII2382': {'l': 2382.763995,
              'q': 1505.0,
              'w': 41968.06742499062,
              'x': -21501473.714337982},
 'FeII2586': {'l': 2586.649312,
              'q': 1515.0,
              'w': 38660.053195490924,
              'x': -23496376.043423213},
 'FeII2600': {'l': 2600.172114,
              'q': 1370.0,
              'w': 38458.99256498218,
              'x': -21358628.506247785},
 'MgI2026': {'l': 2026.4749788,
             'q': 87.0,
             'w': 49346.772620511765,
             'x': -1057088.1320477128},
 'MgI2852': {'l': 2852.962797,
             'q': 90.0,
             'w': 35051.28076158366,
             'x': -1539534.113091333},
 'MgII2796': {'l': 2796.353786,
              'q': 212.0,
              'w': 35760.854188283316,
              'x': -3554501.2857563947},
 'MgII2803': {'l': 2803.530982,
              'q': 121.0,
              'w': 35669.30440292883,
              'x': -2033955.4148985}}

transitions = []
xpositions = []
for transition in vshiftDict.itervalues():
  transitions.append(transition)
  xpositions.append( qvalDict[transition]['x'])
  pop = ax.errorbar(qvalDict[transition]['x'], qvalDict[transition]['v'], yerr=qvalDict[transition]['e'], fmt='bo')

ax.set_xlabel("x (-2cq/w)")
ax.set_ylabel("dv (m/s)")

ax.set_xticks( xpositions )
ax.set_xticklabels( transitions )

fig.autofmt_xdate()
fig.savefig('overlap.pdf') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T08:25:45.860

这确实很麻烦，但是您可以按照以下步骤操作：[Mathplotlib -automatic-make-room-for-tick-labels](http://matplotlib.org/faq/howto_faq.html#automatically-make-room-for-tick-labels)。

该`tight_layout`方法应该自动修复它，但它不适用于您的情况。

# cuda - 如何将设备功能中分配的内存复制回主内存

> ID：13043164
> 
> 赞同：1
> 
> 时间：2012-10-24T04:45:32.493
> 
> 标签：cuda

我有一个包含主机函数和设备函数***Execute()***的 CUDA 程序。在主机函数中，我分配了一个全局内存***输出***，然后将其传递给设备函数并用于存储在设备函数中分配的全局内存的地址。我想访问主机函数中内核分配的内存。以下是代码：

```
#include <stdio.h>
typedef struct                      
{
  int             * p;            
  int              num;            
} Structure_A;

__global__ void Execute(Structure_A *output);

int main(){

    Structure_A *output;
    cudaMalloc((void***)&output,sizeof(Structure_A)*1);
    dim3 dimBlockExecute(1,1);
    dim3 dimGridExecute(1,1);
    Execute<<<dimGridExecute,dimBlockExecute>>>(output);
    Structure_A * output_cpu;
    int * p_cpu;
    cudaError_t err;

    output_cpu= (Structure_A*)malloc(sizeof(Structure_A));
    err=cudaMemcpy(output_cpu,output,sizeof(Structure_A),cudaMemcpyDeviceToHost);    
    if( err != cudaSuccess)
    {
        printf("CUDA error a: %s\n", cudaGetErrorString(err));
        exit(-1);
    }
    p_cpu=(int *)malloc(sizeof(int));
    err=cudaMemcpy(p_cpu,output_cpu[0].p,sizeof(int),cudaMemcpyDeviceToHost);    
    if( err != cudaSuccess)
    {
        printf("CUDA error b: %s\n", cudaGetErrorString(err));
        exit(-1);
    }   
    printf("output=(%d,%d)\n",output_cpu[0].num,p_cpu[0]);
    return 0;
}

__global__ void Execute(Structure_A *output){

    int thid=threadIdx.x;

    output[thid].p= (int*)malloc(thid+1);

    output[thid].num=(thid+1);

    output[thid].p[0]=5;
} 
```

我可以编译程序。但是当我运行它时，我得到一个错误，表明以下内存复制函数中有一个无效参数：

```
err=cudaMemcpy(p_cpu,output_cpu[0].p,sizeof(int),cudaMemcpyDeviceToHost); 
```

CUDA 版本是 4.2。CUDA 卡：Tesla C2075 操作系统：x86_64 GNU/Linux

编辑：修改代码并为 output_cpu 和 p_cpu 分配适当大小的内存。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T04:56:33.347

这段代码有很多问题。例如，您只在这两行中都分配了 1 个字节，不足以容纳`Structure_A`.

```
output_cpu= (Structure_A*)malloc(1);
p_cpu=(int *)malloc(1); 
```

但是您的错误的直接原因是您正在从设备运行时堆分配的指针（即与设备代码一起分配`malloc`或`new`在设备代码内部分配）到主机指针执行 memcpy。

```
err=cudaMemcpy(p_cpu,output_cpu[0].p,sizeof(int),cudaMemcpyDeviceToHost); 
```

不幸的是，cudaMalloc、cudaFree 和 cudaMemcpy 的主机运行时 API 当前与设备运行时堆上分配的内存不兼容。

# html - 在appcache中保存机密数据库表是否安全

> ID：13043165
> 
> 赞同：2
> 
> 时间：2012-10-24T04:45:37.500
> 
> 标签：html, web-applications, html5-appcache, offlineapps

我将创建一个 Web 应用程序。因为我想允许用户以离线模式登录。将机密表保存在浏览器的 Appcache 中以供离线访问是否安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T04:56:43.147

不，这不是保存！永远不要相信来自/关于您客户的数据！如果有人可以访问浏览器，则可以查看/分析/更改缓存和您的代码。

你可以做什么：

*   存储访问数据哈希和加盐，因此获取它的成本更高。但只有刚刚登录的那个人的登录。
*   如果应用程序下线，尽可能减少客户端上的数据。
*   机密文件在客户处的时间不应超过所需时间！
*   再次上线后信息发送回服务器时，告诉用户会发生什么/发生了什么，并检查服务器上的登录！有时这对用户来说很烦人，但可以节省。

# visual-studio - 关闭所有选项卡但固定在 Visual Studio 中的键盘快捷键？

> ID：13043173
> 
> 赞同：8
> 
> 时间：2012-10-24T04:46:43.433
> 
> 标签：visual-studio, ide, keyboard-shortcuts

如果有任何能力关闭除固定在 VS 中的所有选项卡吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-10-11T16:07:28.043

是的，将一个键绑定到 OtherContextMenus.EasyMDIToolWindow.CloseAllButPinned 命令。

工具 > 选项 > 键盘 > 使用界面绑定键。

![在此处输入图像描述](../Images/db4ea1e0aea666bc79a0457cefa01eeb.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-02T08:45:53.150

您可以[使用`Alt`+`-`打开活动选项卡的上下文菜单](https://stackoverflow.com/a/18580339/126014)。打开上下文菜单后，您可以使用箭头键进行选择，例如*Close All But Pinned*。

上下文菜单中的某些选项带有下划线以加快访问速度，例如*Close All But This*可以使用 访问，因此*Close All But This*`a`的整个序列变为+ , 。*`Alt``-``a`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T04:53:16.780

您是指“关闭除此之外的所有内容”吗？右键单击选项卡，您可以得到它。不知道 VS 中的固定选项卡是什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T15:47:21.637

在不更改标准键盘映射的情况下执行此操作的唯一方法是右键单击任何选项卡并选择“关闭所有未固定”。

PS。固定窗口功能是 Visual Studio 生产力工具的一部分。*

# ruby-on-rails - 无法从 HAML 文件调用结构属性

> ID：13043176
> 
> 赞同：0
> 
> 时间：2012-10-24T04:47:32.197
> 
> 标签：ruby-on-rails, haml

我的控制器中有以下代码：

```
@nav_items = ActiveSupport::OrderedHash.new
@nav_items[:home]       =   Struct::NavItem.new("Home", nil, "/", "icon-home")
@nav_items[:about]      =   Struct::NavItem.new("About", nil, "/about", "icon-heart")
@nav_items[:contact]    = Struct::NavItem.new("Contact", nil, "/contact", "icon-envelope")
if (current_user != nil && current_user.admin?)
  @nav_items[:admin_divider] = Struct::NavItem.new(nil, "divider-vertical", nil, nil)
  @nav_items[:admin]    = Struct::NavItem.new("Admin", nil, "/admin", "")
end 
```

在我看来，以下几点：

```
- @nav_items.each do |nav_item|
  %li{ :class => nav_item[:class] }
  %a{ :href => nav_item[:link] }= nav_item[:text] 
```

我的结构定义：`Struct.new("NavItem", :text, :class, :link, :icon_class)`

我对 Ruby、Rails 和 HAML 比较陌生，但在另一个使用 ERB 渲染的项目中，这样的代码运行良好。我也尝试过通过执行类似的操作来引用属性`nav_item.link`，但这仍然不起作用。

我使用当前代码得到的错误是：

> 符号作为数组索引

通过使用如下代码`nav_item.link`：

> #< Array:0x126970ff0 > 的未定义方法“链接”

由于这是我第一次使用 HAML，我不太确定自己做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T04:57:00.537

看起来您有一个`@nav_items`使用单个变量迭代的哈希`|nav_item|`，这将产生键值对作为数组。尝试`-@nav_items.each do |_,nav_item|`或`-@nav_items.values.each do |nav_item|`。

# macos - OSX：将大写锁定键重新映射为功能键或 Fn？

> ID：13043181
> 
> 赞同：3
> 
> 时间：2012-10-24T04:47:59.593
> 
> 标签：macos, keyboard, sublimetext2

我已经禁用了大写锁定键，但要在我的文本编辑器中实际使用该键作为一种特殊键，我想将键重新映射到功能键或 F19。

如何将键重新映射到命令、选项或 shift 以外的其他键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-01-04T08:35:36.657

我发现的唯一可行的解​​决方案是使用一个名为 Karabiner-Elements 的程序：[https](https://karabiner-elements.pqrs.org/)
://karabiner-elements.pqrs.org/ 使用它，您可以定义一个“简单修改”以将 CapsLock 重新映射到 Fn。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T03:03:48.400

在 OSX 中，您可以在整个 OS 范围内执行此操作。转到系统偏好设置并选择键盘。在“键盘”选项卡下，找到`Modifier Keys...`按钮。我总是设置`caps lock`为另一个实例`control`。

# java - Java中信号量的一般用途

> ID：13043182
> 
> 赞同：3
> 
> 时间：2012-10-24T04:48:11.797
> 
> 标签：java

该程序将生成 n-LIZARD 线程和 1 个 CAT 线程。在“唤醒”时，LIZARD 线程必须执行“吃”任务。蜥蜴必须从西米棕榈穿越到猴草“吃”然后穿越回来。cat 线程将在给定时间后唤醒，然后检查以确保一次“交叉”的 LIZARD 线程不超过 4 个。这个想法是让“世界”或程序运行到给定的 120 秒时间过去，并保护蜥蜴免受猫的伤害。

我对信号量类知之甚少，想知道如何实现和放置互斥量以及常规信号量。使用 .acquire() 和 .release() 控制该程序中的线程。

我知道互斥只会获取一个线程（所以我想这可以用来控制猫线程（如果我错了请告诉我）

所以我的常规信号量必须保护“十字路口”。

我有这个想法，我只需要一些关于安置的帮助。我将所有内容都注释掉了，所以你们都可以清楚我正在尝试（失败）做什么:)

```
import java.util.ArrayList;
import java.util.concurrent.Semaphore;
import java.util.logging.Level;
import java.util.logging.Logger;

/**
 */
public class LizardsSync 
{
    /*
     * Set this to the number of seconds you want the lizard world to
     * be simulated.  
     * Try 30 for development and 120 for more thorough testing.
     */
    private static int WORLDEND = 120;

    /*
     * Number of lizard threads to create
     */
    private static int NUM_LIZARDS =20;

    /*  
     * Maximum lizards crossing at once before alerting cats
     */
    private static int MAX_LIZARD_CROSSING = 4;

    /*
     * Maximum seconds for a lizard to sleep
     */
    private static int MAX_LIZARD_SLEEP_TIME = 3;

    /*
     * Maximum seconds for a lizard to eat
     */
    private static int MAX_LIZARD_EAT_TIME = 5;

    /*
     * Number of seconds it takes to cross the driveway
     */
    private static int CROSS_TIME = 2;

    /*
     * Number of seconds for the cat to sleep.
     */
    private static int MAX_CAT_SLEEP;

    /*
     * A counter that counts the number of lizzards crossing sago to monkey grass
     */
    int numCrossingSago2MonkeyGrass = 0;

    /*
     * A counter that counts the number of lizzards crossing monkey grass to sago
     */
    int numCrossingMonkeyGrass2Sago = 0;

    /**
     * A semaphore to protect the crossway. 

    */
    Semaphore semaphoreCrossway = new Semaphore(MAX_LIZARD_CROSSING);

    /**
     * A semaphore for mutual exclusion.
     */
    Semaphore mutex = new Semaphore(1);

    // on both semaphores, you can call acquire() or release()
    /*
     * Indicates if the world is still running.
     */
    private static boolean running = true;

    /*
     * Indicates if you want to see debug information or not.
     */
    private static boolean debug = true;

    public void go()
    {
        ArrayList<Thread> allThreads = new ArrayList<Thread>();

        // create all the lizzard threads
        for (int i=0; i < NUM_LIZARDS; i++) 
        {       allThreads.add(new LizardThread(i) );
            allThreads.get(i).start();
}
        // create the cat thread
        Thread CatThread = new CatThread();
         CatThread.start();

        // let the world run for a while
        sleep (WORLDEND);

        // terminate all threads
        running = false;
        // wait until all threads terminate by joining all of them
        for (int i=0; i < NUM_LIZARDS; i++) {
            try {
               allThreads.get(i).join();
            } catch (InterruptedException ex) {
                System.err.println ("unable to join thread, " + ex.getMessage());
            }
        }
    }
       /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // starts the program
        new LizardsSync().go();
    }

     /**
     * Models a cat thread.
     */
    public class CatThread extends Thread {

        /**
         * @see java.lang.Runnable.
         */
        @Override
        public void run() 
        {   
            while (running) {

                   // sleep for a while
                   catSleep();
                   // check on lizzards

                   checkCrossway();

            }
        }

        /**
         * Puts cat thread to sleep for a random time.
         */
        public void catSleep()
        {
            int sleepSeconds  = 1 + (int)(Math.random()*MAX_CAT_SLEEP);

            if (debug) {
                System.out.println ("Cat is sleeping for " + sleepSeconds + " seconds.");
                System.out.flush();
            }
            try {
                sleep(sleepSeconds*1000);
            } catch (InterruptedException ex) {
                Logger.getLogger(LizardsSync.class.getName()).log(Level.SEVERE, null, ex);
            }

            if (debug) {
                System.out.println ("Cat awakes.");
                System.out.flush();
            }
        }

        /**
         * Simulates cat checking the crossway.
         */
        public void checkCrossway()
        {

            if (numCrossingMonkeyGrass2Sago + numCrossingSago2MonkeyGrass > MAX_LIZARD_CROSSING) {
                System.out.println ("The cat says yum!");
                System.out.flush();
                     System.exit(-1);
            }
       }
    }

    /**
     * Models a lizard thread.
     */
    public class LizardThread extends Thread {

        private int _id;

        /**
         * Creates a new lizard thread.
         * 
         * @param id the id assigned to the lizard thread
         */
        public LizardThread(int id)
        {
            _id = id;
        }

        /**
         * @see java.lang.Runnable.
         */
        @Override
        public void run() 
        {    

            while (running) {
               // sleep for a while in sago
               lizardSleep();
               // wait until safe to cross from sago to monkey grass
               sagoToMonkeyIsSafe();
               // cross path to monkey grass
               crossedOverToMonkey();
               // eat in the monkey grass
               lizardEat();
               // wait untill its safe to cross back to sago
               monkeyToSagoIsSafe();
               // cross from cross monkey grass to sage
               crossMonkeyToSago();
            }
        }

        /**
         * This tests if it is safe to travel from sago to monkey.
         * 
         */
        public void sagoToMonkeyIsSafe() 
        {

                if (debug) {
                    System.out.println ("Lizard [" + _id + "] checks sago -> monkey grass.");
                    System.out.flush();
                }

                if (debug) {
                    System.out.println ("Lizard [" + _id + "] thinks sago -> monkey grass is safe.");
                    System.out.flush();
                }

        }

        /**
         * Indicates that lizard crossed over to monkey grass.
         */
        public void crossedOverToMonkey()
        {
            if (debug) {
                System.out.println ("Lizard [" + _id + "] made it to monkey grass.");
                System.out.flush();
            }

           if (debug) {
                System.out.println ("Lizard [" + _id + "] thinks monkey grass -> sago is safe.");
                System.out.flush();

            }
        }

        /**
         * This tests if it is safe to travel from monkey to sago.
         */
        public void monkeyToSagoIsSafe() 
        {

            if (debug) {
                System.out.println ("Lizard [" + _id + "] checks monkey grass -> sago.");
                System.out.flush();
            }

            if (debug) {
                System.out.println ("Lizard [" + _id + "] thinks monkey grass -> sago is safe.");
                System.out.flush();

            }
        }

        /**
         * Indicates that lizard crossed over to sago.
         */
        public void crossedOverToSago()
        {
            if (debug) {
                System.out.println ("Lizard [" + _id + "] made it to sago.");
                System.out.flush();
            }

            if (debug) {
                System.out.println ("Lizard [" + _id + "] thinks sago -> monkey grass is safe.");
                System.out.flush();
        }
        }
        /**
         * Indicates that lizard is crossing over from monkey to sago.
         */
        void crossMonkeyToSago()
        {
            if (debug) {
                System.out.println ("Lizard [" + _id + "] is crossing monkey grass to sago.");
                System.out.flush();
            }

            numCrossingMonkeyGrass2Sago++;

            // simulate walk
            try {
                sleep(CROSS_TIME*1000);
            } catch (InterruptedException ex) {
                Logger.getLogger(LizardsSync.class.getName()).log(Level.SEVERE, null, ex);
            }

            numCrossingMonkeyGrass2Sago--;
        }

        /**
         * Indicates that lizard is crossing over from sago to monkey. 
         */
        void crossSagoToMonkey()
        {

            if (debug) {
                System.out.println ("Lizard [" + _id + "] is crossing sago to monkey grass.");
                System.out.flush();
            }

            numCrossingSago2MonkeyGrass++;

            // simulate walk
            try {
                sleep(CROSS_TIME*1000);
            } catch (InterruptedException ex) {
                Logger.getLogger(LizardsSync.class.getName()).log(Level.SEVERE, null, ex);
            }

            numCrossingSago2MonkeyGrass--;
        }

        /**
         * Puts lizard thread to sleep for a random amount of time.
         */
        public void lizardSleep()
        {
            int sleepSeconds  = 1 + (int)(Math.random()*MAX_LIZARD_SLEEP_TIME);

            if (debug) {
                System.out.println ("Lizard [" + _id + "] is sleeping for " + sleepSeconds + " seconds.");
                System.out.flush();
            }
            try {
                sleep(sleepSeconds*1000);
            } catch (InterruptedException ex) {
                Logger.getLogger(LizardsSync.class.getName()).log(Level.SEVERE, null, ex);
            }
            if (debug) {
                System.out.println ("Lizard [" + _id + "] awakes.");
                System.out.flush();
            }
        }

        /**
         * Simulates lizard eating for a random amount of time.
         */
        public void lizardEat()
        {
            int eatSeconds  = 1 + (int)(Math.random()*MAX_LIZARD_EAT_TIME);

            if (debug) {
                System.out.println ("Lizard [" + _id + "] is eating for " + eatSeconds + " seconds.");
                System.out.flush();
            }
            try {
                sleep(eatSeconds*1000);
            } catch (InterruptedException ex) {
                Logger.getLogger(LizardsSync.class.getName()).log(Level.SEVERE, null, ex);
            }
            if (debug) {
                System.out.println ("Lizard [" + _id + "] finished eating.");
                System.out.flush();
            }
        }
    }

    /**
     * Puts current thread to sleep for a specified amount of time.
     * 
     * @param seconds the number of seconds to put the thread to sleep
     */
    private static void sleep(int seconds)
    {
        try {
            Thread.sleep(seconds*1000);
        } catch (InterruptedException ex) {
            Logger.getLogger(LizardsSync.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:06:15.390

每当你必须过马路时，你都会打电话`acquire`，每当你过马路时，你都可以打电话`release`

```
Semaphore semaphore= new Semaphore(No of Lizards that can cross the road at a time);

sagoToMonkeyIsSafe();<-- semaphore.acquire(); as crossing the path start
 // cross path to monkey grass
crossedOverToMonkey();<---semaphore.release(); as crossing the path end

monkeyToSagoIsSafe();<-- semaphore.acquire(); as crossing the path start
// cross from cross monkey grass to sage
crossMonkeyToSago();<---semaphore.release();  as crossing the path end 
```

# ruby-on-rails - Ruby on rails without models - if data CRUD is performed by webservices API

> ID：13043183
> 
> 赞同：2
> 
> 时间：2012-10-24T04:48:15.603
> 
> 标签：ruby-on-rails, ruby, model-view-controller, design-patterns

I have been pondering about developing a new application with rails (probably without models?). What I meant is; backend will be written in any other language and that will provide the RESTful APIs, which will be consumed by Rails app.

Since backend API will take care of all data CRUD actions and rails app will not have access to database directly. So there is no use of rails model in such architecture?

I can directly make curl call to APIs from controllers too, but I wish to keep my controller skinny while fat models.

Or other way, API curl calls can be made in the models and it can behave like data CRUD being done to the database in that model.

In any of above scenarios, I will not be able to get benefit of many rails features or gems (such as friendly_id) which works on active records/ORM.

I am really confused as which way I should go? And what is the best practice? What architecture you can suggest? I definitely wants to keep my backend completely decoupled and providing only RESTful apis only.

Thanks in advance.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T06:34:21.717

Take a look at [ActiveResource](http://api.rubyonrails.org/classes/ActiveResource/Base.html).

You'll end up with models, but most will only take up one line.

Say your api service has a url like: [http://api.fart.com/products.json](http://api.fart.com/products.json) which spits out a list of products. In your rails app that will be consuming this data, create a `Product` model inheriting from `ActiveResource`. First, set your api url for activeresource.

```
class ActiveResource::Base
  self.site = "http://api.fart.com"
end 
```

Next, define a Product class.

```
class Product < ActiveResource::Base; end 
```

Now, in your controllers, you can do:

```
Product.all 
```

And it should hit "http://api.fart.com/products.json" and return the good stuff.

Obviously this is a quickly contrived example, but I have recently used it for a similar situation and it worked great.

///////////////

see [example applications](https://github.com/davidglivar/stack_rest_api) for basic concept.

///////////////

Per your questions and your pull requests on github I understand what you are trying to do now. `ActiveResource` does not come with a `where` method - however, it's `find` method has an options argument that supports a params hash.

Rails controller with query params

```
def index
  @products = Product.find :all, params: { country: "Brazil", price: 500 }
end 
```

This will hit our Sinatra route at api.fart.com/products.json?country=Brazil&price=500

```
# Assume we are using ActiveRecord/DataMapper or the like
get "/products.json" do
  @products = Product.where country: params[:country], price: params[:price].to_i
  json products: @products
end 
```

# outlook-addin - 除非检查器再次“激活”，否则ribbon.InvalidateControl() 不起作用

> ID：13043187
> 
> 赞同：0
> 
> 时间：2012-10-24T04:48:39.727
> 
> 标签：outlook-addin, ribbonx

我正在使用 Ribbon XML 和 VS 2010 为 Outlook 2010 构建一些自定义按钮控件，但在刷新按钮状态时遇到了一些问题。

我为 idMso="TabReadMessage" （阅读电子邮件窗口/检查器）创建了 2 个按钮。

按钮的功能区 XML 代码：

```
<tab idMso="TabReadMessage">
  <group id="MyGroup" label="My Label">
     <splitButton id="MySplitButton" keytip="QS" size="large">
          <button id="SplitButton1" onAction="SplitButton1_Click" label="SplitButton 1" />
          <menu id="SplitButton_mnu" keytip="QS">
                <button id="Button1" onAction="Button1_Click" label="Button 1" />
                <button id="Button2" onAction="Button2_Click" label="Button 2"/>
          </menu>
     </splitButton>
     <toggleButton id="MyToggleButton" onAction="MyToggleButton_Click" size="large" label="Toggle Button" getEnabled="GetEnabledToggleButton" />
  </group>
</tab> 
```

拆分按钮点​​击回调：

```
Public Sub SplitButton1_Click(ByVal control As IRibbonControl)
   ribbon.InvalidateControl("MyToggleButton")
End Sub 
```

切换按钮 getEnabled 回调事件：

```
Public Function GetEnabledToggleButton(ByVal control As IRibbonControl) As Boolean
   Return False
End Function 
```

我想要实现的是，在我单击 SplitButton 后，ToggleButton 将被禁用，我正在使用ribbon.InvalidateControl("MyToggleButton") 使控件无效，这应该触发 ToggleButton 的 getEnabled 回调事件，但它没有不。但是，如果我在检查器窗口之外单击并再次单击检查器窗口，则状态将更改并起作用。我以为 InvalidateControl() 会立即改变控件的状态？

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T01:29:58.963

我在 Addin 类中创建了一个子例程，在这个子例程中我使 MyToggleButton 控件无效。

SplitButton1_Click() 事件将调用子例程，因此将使 MyToggleButton 控件无效，此工作，但不确定是否有更好/推荐的方法来执行此操作。

# php - 防止在线酒店预订中的竞争条件

> ID：13043188
> 
> 赞同：0
> 
> 时间：2012-10-24T04:48:43.677
> 
> 标签：php, mysql, race-condition

我之前问过这个问题，人们给了我解决问题的方法，但现在我的问题发生了变化。在我的数据库中有一个名为 rooms 的表之前。它有一个`hold`字段，当有人进行预订时，我会在未来 15 分钟内为该用户保留它。如果该用户未在 15 分钟内完成预订，则该房间将再次可用。这是我之前问题的解决方案。

但现在我不再有房间桌子了。我只有房间类型和预订表。Roomtype 得到了房间的名称价格信息，当然还有 id 字段。预订表有 checkin checkout roomtypeid 和有关用户的信息。由于我没有房间表，我想不出一种方法来防止多个用户同时预订一个房间。

我的问题是如何防止没有房间表的比赛条件？如果问的不是太多，我希望解决方案只有 sql 和 php。 [这是我上一个问题的链接](https://stackoverflow.com/questions/12832570/how-to-prevent-race-condition-in-online-hotel-booking)

编辑：我找到了这篇文章，这就是为什么我不再有房间桌了。[关联](https://stackoverflow.com/questions/4784372/online-hotel-room-booking-concept-in-php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T04:55:02.517

您可以将临时保留添加到保留表（带有临时标志/字段），如果保留在 15 分钟后未完成，则稍后将其删除。

此外，如果多个用户尝试同时预订最后一个房间，您应该在预订的每个步骤中再次检查可用性，以通知用户最后一个房间刚刚被占用并提出另一个房间类型等。

# javascript - 在页面加载时自定义浏览器窗口

> ID：13043191
> 
> 赞同：2
> 
> 时间：2012-10-24T04:48:54.337
> 
> 标签：javascript, asp.net, html

我正在使用下面的代码来自定义浏览器窗口。但是浏览器窗口的大小调整为下面提到的大小，但菜单栏始终显示在当前窗口中。如何隐藏所有菜单栏、状态栏等。请帮我解决这个错误。

```
<body onload=" resizeTo(400,300); menubar.visible = false;"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:27:43.870

你有什么理由这样做？当您访问您的页面并且您更改其浏览器的行为时，任何用户都不会对此感到满意。

如果您的页面应该在单击某个链接后出现，我建议您应该使用弹出窗口。弹出窗口也会吸引用户的注意力，没有人会生气......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:30:15.847

您不能在现有窗口中删除菜单等。没有它们，您只能创建一个新窗口。

# wcf-data-services - 无法添加我的服务参考

> ID：13043195
> 
> 赞同：3
> 
> 时间：2012-10-24T04:49:28.853
> 
> 标签：wcf-data-services, service-reference

我有一个 WCF 数据服务，我昨天可以将它添加到我的项目中。从那时起，我能弄清楚的一切都没有改变，但现在当我删除该引用并尝试重新添加它时，我收到以下错误：

> *当前项目无法使用此服务。请检查项目目标框架是否支持该服务类型。*

我能够浏览到数据服务 URL，并且 $metadata 看起来正确。我似乎找不到有关此错误的太多信息

wcf 服务和项目都是 .net 4

# iphone - ios将^block存储在字典或数组中吗？

> ID：13043197
> 
> 赞同：12
> 
> 时间：2012-10-24T04:50:03.930
> 
> 标签：iphone, objective-c, ios, objective-c-blocks

我可以将 ^block 存储在字典或数组中吗？

我需要收听一个服务器通知，我需要提供一个块来处理通知，在我的项目中，几个视图控制器都想听到通知，所以我制作了一个通用通知管理器，它有自己的块来处理服务器通知，它有一个代表数组，所以在经理的块中：

```
- (^)(NSString *message){
    for (delegate in allDelegates)
    {
        delegate.handlerBlock(message);
    }
} 
```

但是我可以将块存储在集合中吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-24T07:38:45.300

您可以将对象存储到集合中。但是要注意范围：当它们被排除在函数范围之外时复制它们。这是您的情况，因为您将它们存储在数组中。

```
[NSArray arrayWithObject: 
[[^{ NSLog(@"block 1"); } copy] autorelease],
[[^{ NSLog(@"block 2"); } copy] autorelease], nil] 
```

在 ARC 上，您仍然需要告诉它您绝对需要复制您的块。当数组被释放时，它应该释放块。

```
 [NSArray arrayWithObject: 
    [^{ NSLog(@"block 1"); } copy],
    [^{ NSLog(@"block 2"); } copy], nil] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-24T18:45:14.170

块的特殊之处在于，在大多数情况下应该保留其他对象时应该复制它们。正如您现在必须阅读的那样，这是因为块从堆栈开始（“堆栈块”），并且仅在定义它们的本地范围内有效。复制堆栈块会为您提供一个堆块，它将像普通对象一样具有动态生命周期。复制堆块只会保留它，因此当您需要将块保留更长时间时，复制块总是正确的。

现在，接受块参数的函数通常负责在必要时复制块。因此，在将块传递给这些函数时，您不需要做任何特别的事情。但是，在这种情况下，您将块传递给`[NSArray arrayWithObject:]`，它采用普通对象参数。由于它不接受块参数，它不知道复制参数，所以它只会保留它。因此，当您将块传递给采用普通对象参数的方法时，您需要先复制它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-24T07:33:56.313

[如果您在这里](http://thirdcog.eu/pwcblocks/#objcblocks)阅读了非常好的文章，您会发现如何做到这一点。并特别注意那里提到的“首先将它们从堆栈中复制出来”的成语。

# org-mode - 在 Orgmode 中预览图片（不导出）

> ID：13043204
> 
> 赞同：9
> 
> 时间：2012-10-24T04:51:41.353
> 
> 标签：org-mode

已经可以使用图像在 orgmode 中预览方程式。例如，如果我输入

```
$y=2^x$ 
```

然后我可以在 org 文件本身中预览这个等式。我的问题是可以用图像做到这一点吗？至今实施

```
$\includegraphics{picture.png}$ 
```

不起作用（我只是得到一个空白框）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-09T07:30:10.840

您可以在图片中插入组织链接，其中：

```
 [[file:/path/to/picture.png]] 
```

从那里，`C-c C-x C-v`将在缓冲区中切换其显示，如此[处](http://orgmode.org/manual/Handling-links.html#fnd-6)所述。

您可以为启动行为配置变量`org-startup-with-inline-images`。

# php - 在透明圆圈上渲染图像并裁剪它

> ID：13043206
> 
> 赞同：3
> 
> 时间：2012-10-24T04:51:51.057
> 
> 标签：php, jquery, imagick

我有一个背景图片： ![在此处输入图像描述](../Images/885c4db7d99f589eedfdcbb358fa634e.png)，

我在其上融合了一个圆圈（或日食）： ![在此处输入图像描述](../Images/d4fdc4b2ba3a5d42315a70ee7c8dec34.png)

使等于圆形的区域在背景图像上变得透明，就像这样： ![在此处输入图像描述](../Images/b50335d151b07310e58a2e2d2087901c.png)。

我已经使用 php 和 image magick 来实现这一点

现在，我必须以如下方式将图像插入孔中：

1.  图像渲染在背景之上，因此只有与照片孔相等的图像区域可见。
2.  当我将图像拖动到照片孔中时，图像会进入背景后面的图层，当再次释放时，图像会重新渲染为步骤 1。
3.  我还需要裁剪在步骤 1 中渲染的图像。

如何使用图像魔法在 php 中实现这一点？任何指示或帮助都会非常有用。

要在图层背景下传输图像，可以使用 z-index 完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:25:38.293

将图像裁剪为与圆形相同的尺寸，然后将其放置在背景图像顶部的位置 posX、posY 等处，可以作为一个很好的直接解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T20:01:53.593

为了实现上述目标，我采用了以下方法：

1.  我将图像放在背景图像后面的 div 中（完全围绕圆圈）。div 隐藏了溢出，所以我可以包含图像。

2.  为了拖动图像，我将背景图像上的鼠标按下事件转移到下面的 div。这可以使用 jQuery 触发器来完成。

3.  现在要裁剪图像，我计算图像的 x,y 偏移量并相应地裁剪高度和宽度，并将数据发送到服务器以裁剪它。

希望这对其他人有帮助。

# scheme - 球拍中的流

> ID：13043207
> 
> 赞同：8
> 
> 时间：2012-10-24T04:51:56.097
> 
> 标签：scheme, racket

谁能帮助我更好地理解如何编写流？

我知道流是一个无限的值序列，我学习对它们进行编程的方式是将它们表示为一个 thunk，当被调用时会产生一对（1）序列中的第一个元素和（2）一个表示二次无穷大元素的流

例如：

```
(define powers-of-two
    (letrec ([f (lambda (x) (cons x (lambda () (f (* x 2)))))])
        (lambda () (f 2)))) 
```

我在这里理解它只是产生 2 的幂并且访问这些例如调用`(car (powers-of-two))`会导致`2`并且调用`(car ((cdr (powers-of-two))))`会导致 4

现在我正在尝试编写一个`red-blue`在字符串之间交替调用的流`red`，`blue`但我对如何构造它有点困惑

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-24T15:13:29.340

看起来您在问如何使用 thunk 构建自己的自定义流，其他人已经回答了。以防万一，值得注意的是，Racket 有一个内置的流库，大多数 Racketeers 都会将它用于流。

这是一个例子：

```
#lang racket
(require racket/stream)
(define reds (stream-cons "red" reds))
(define red-blues (stream-add-between reds "blue"))

;; show ten of them
(for ([i 10] [e (in-stream red-blues)])
  (displayln e)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T05:10:36.330

对于 Scheme 中的流的一般理解，我推荐SICP 书中的[§3.5 Streams部分。](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-24.html#%_sec_3.5)它将教您解决与流相关的问题（例如问题中的问题）的基本概念。

关于问题中的问题，这里是解决它的一般思路：

*   构建两个无限流，一个只产生字符串`"red"`，另一个`"blue"`
*   合并两个流，从一个元素中获取一个元素，然后从另一个元素中获取一个元素（交替），此过程`interleave`在 SICP 中调用

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-24T12:41:26.253

我编写了[SRFI-41](http://srfi.schemers.org/srfi-41)，它描述了流，提供了一个实现，并给出了许多示例。那里的流与 SICP 中的流不同，并且以 SRFI 中解释的方式“更好”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-23T08:46:00.193

我是这方面的新手，但以下解决方案似乎也有效：

```
 (define red-then-blue
   (letrec ([f (lambda (x) (cons x(lambda ()(f(cond [(string=? x "red") "blue"]
                                              ["red"])))))])
   (lambda () (f "red")))) 
```

# php - 使用 Slim 为 REST 服务运行 Angularjs 示例

> ID：13043210
> 
> 赞同：1
> 
> 时间：2012-10-24T04:52:30.317
> 
> 标签：php, html, wamp, angularjs, slim

我在为使用 slim（RESTful Webservice 的 PHP 框架）的 angularjs 应用程序制作此示例以正常运行时遇到问题。这是示例 [http://coenraets.org/blog/2012/02/sample-application-with-angular-js/的链接](http://coenraets.org/blog/2012/02/sample-application-with-angular-js/)

角度部分在渲染和路由方面工作正常。但是数据似乎没有加载，所以我怀疑网络服务一定有问题。这是我第一次尝试使用 Web 服务的 Angular 应用程序，也是我第一次使用 Slim 框架。

这是角度应用程序的图像。

![AngularJS 左侧的葡萄酒列表未加载][1]

我希望你们能指出我正确的方向。我在 windows xp 上运行并使用 wampserver 2.2 和 mysql 作为我的数据库

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T01:53:44.820

我设法解决了这个问题，事实证明这个问题与**ANGULARJS**和**SLIM FRAMEWORK**无关，问题在于**apache 服务器**设置和 angular-cellar/api 文件夹中的 .htaccess 文件

我检查了 apache 错误日志，发现了这个错误

```
.htaccess: Invalid command 'RewriteEngine', perhaps misspelled or defined by a module not included in the server configuration, referer: http://localhost/angular-cellar/ 
```

[为了解决](http://de77.com/other/apache-error-htaccess-invalid-command-rewriteengine-perhaps-misspelled-or-defined-by-a-module-not-included-in-the-server-configuration/comment-page-1#comment-216960)这个问题，我编辑了我的 httpd.conf 文件并取消了注释

```
LoadModule rewrite_module modules/mod_rewrite.so 
```

事实证明，Wampserver 2.2 默认禁用了模块 mod_rewrite。谢谢

# javascript - Jquery onload每个循环EASY

> ID：13043212
> 
> 赞同：2
> 
> 时间：2012-10-24T04:52:35.783
> 
> 标签：javascript, jquery

我为“keyup-an”类提供了一个简单的 keyup 函数，用于在表单上进行 keyup 验证。这个类大约有 10 个字段。但是在发布之后，我在表单中添加了字段。但是绿色和红色的背景消失了，因为它不是键控。我该如何做这样的事情，每一个都将根据页面加载时的结果为背景着色

```
jQuery(document).ready(function() {

$('.keyup-an').each(function(index) {

    var inputVal = $(this).val();
    var numericReg = /^[a-zA-Z0-9_ ]{2,30}$/;
    if(!numericReg.test(inputVal)) {
        $(this).css('background', '#FAC3C3');
        $(this).after('<span class="error error-keyup-1">Please use letters or numbers only</span>');
    } 
    else {
        $(this).css('background', 'lightgreen');
    }
});

$('.keyup-an').keyup(function() {
    $('span.error-keyup-1').hide();
    var inputVal = $(this).val();
    var numericReg = /^[a-zA-Z0-9_ ]{2,30}$/;
    if(!numericReg.test(inputVal)) {
        $(this).css('background', '#FAC3C3');
        $(this).after('<span class="error error-keyup-1">Please use letters or numbers only</span>');
    } 
    else {
        $(this).css('background', 'lightgreen');
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:46:27.503

我想这就是你想要的..

```
$(document).ready(function() {
    // Each
    $('.keyup-an').each(function() {
        // Validate
        validate(this);
        // Key up
        $(this).keyup(function(){
            // Validate
            validate(this);
        });
    });
});

// Validate Function
function validate(element) {
    var obj = $(element);
    if(!/^[a-zA-Z0-9_ ]{2,30}$/.test(obj.val())) {
        // Invalid
        obj.css('background', '#FAC3C3');
        if(!obj.next().hasClass('error'))
        { obj.after('<span class="error error-keyup-1">Please use letters or numbers only</span>'); }
    } else {
        // Valid
        obj.css('background', 'lightgreen');
        if(obj.next().hasClass('error'))
        { obj.next().remove(); }
    }
} 
```

演示：http: [//jsfiddle.net/BerkerYuceer/q2ajM/](http://jsfiddle.net/BerkerYuceer/q2ajM/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T05:04:26.300

```
$('.keyup-an').each(function(index) {

    var inputVal = $(this).val();
    var numericReg = /^[a-zA-Z0-9_ ]{2,30}$/;

    if(!numericReg.test(inputVal)) {
        $(this).css('background', '#FAC3C3');
        $(this).after('<span class="error error-keyup-1">Please use letters or numbers only</span>');
    } 
    else {
        $(this).css('background', 'lightgreen');
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T05:12:21.837

你应该像这样定义你的 keyup 事件。顺便说一句，如果您的元素表单是动态创建的，则必须使用[.on()绑定事件](http://api.jquery.com/on/)

```
jQuery(document).ready(function() {

$('.keyup-an').each(function(index) {
    $(this).keyup(function() {
        var inputVal = $(this).val();
        var numericReg = /^[a-zA-Z0-9_ ]{2,30}$/;
        if(!numericReg.test(inputVal)) {
            $(this).css('background', '#FAC3C3');
            $(this).after('<span class="error error-keyup-1">Please use letters or numbers only</span>');
        } 
        else {
            $(this).css('background', 'lightgreen');
        }
    });
});
} 
```

# nsmutablearray - 如何将 NSMUtable 字典添加到 NSMUtableArray

> ID：13043213
> 
> 赞同：1
> 
> 时间：2012-10-24T04:53:09.230
> 
> 标签：nsmutablearray, ios6, nsmutabledictionary

我有一个`NSMUtableArray`和一个`NSMutableDictionary`。我的代码将对象从 a 获取`NSArray`到 a`NSMUtableDictionary`中。然后将这些`NSMUtableDictionary`对象添加到`NSMutableArray`

这是我的代码

`

```
 NSArray *sqlAllarray=[[NSArray alloc]initWithArray:[sqlite executeQuery:@"SELECT * FROM dir_bill"]];

    for (NSMutableDictionary *alldataDict in sqlAllarray ) {

        paydate2=[fmtDate2 dateFromString:[alldataDict valueForKey:@"bill_dateDue"]];

        if ([paydate1 compare:paydate2]==NSOrderedDescending || [paydate2 compare:paydate1]==NSOrderedSame) {

            appDel.untillPaydayArray=[[NSMutableArray alloc]init];//addObject:[alldataDict copy]];
            [appDel.untillPaydayArray addObject:[alldataDict copy]];
        }

    }` 
```

但它只将最后的`NSMUtableDictionary`数据放入`NSMUtableArray`. 我怎么解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:28:16.197

您正在循环的每次迭代期间创建一个新的可变数组。此代码中还有一些其他问题。尝试这个：

```
1\. NSArray *sqlAllarray = [sqlite executeQuery:@"SELECT * FROM dir_bill"];

2\. appDel.untillPaydayArray = [[NSMutableArray alloc] init];

3\. for (NSMutableDictionary *alldataDict in sqlAllarray ) {
4\.    paydate2=[fmtDate2 dateFromString:[alldataDict valueForKey:@"bill_dateDue"]];

5\.    if ([paydate1 compare:paydate2] == NSOrderedAscending) {
6\.        [appDel.untillPaydayArray addObject:[alldataDict copy]];
7\.    }
8.} 
```

1）不需要额外的 NSArray 创建。

2）您需要在循环之前初始化一次数组。你在循环中有这个，所以每次迭代都会导致数组被重置。

5）无需检查降序和相等。只需检查上升。

# javascript - Raphael.path2curve 不尊重原始路径

> ID：13043217
> 
> 赞同：2
> 
> 时间：2012-10-24T04:53:42.943
> 
> 标签：javascript, raphael

我对[Raphael.path2curve()](http://raphaeljs.com/reference.html#Raphael.path2curve)有疑问。该函数修改 SVG 路径字符串，以便将所有路径命令转换为绝对三次曲线 (C)。该函数支持所有路径命令（`mlcqahvstMLCQAHVST`参见[SVG SPEC](http://www.w3.org/TR/SVG/paths.html)）。

Raphael.path2curve() 可以在许多情况下处理良好的路径，例如。它甚至可以正确地将弧转换为三次，这不是一个简单的计算。我进行了许多测试，并意识到由 commands 组成的路径`QT`或`CS`转换`HT`得很好。以下内容也没有问题：`MS, HS, VS, LS, TC, TH, TL, TV, QA, TA`.

但它不能处理命令`QS, TS, AS, TT`（按那个顺序）。

如果我们例如。有这样的路径，转换失败：

```
M 0 0  T 205.4 112.9  S 260.8 23.36 82.45 72.86 
```

但这转换正确：

```
M 0 0  S 211.9 54.20 52.14 144.4  T 98.85 44.45 
```

所以，MTS 不行，但 MST 可以。有问题的是 S 和 T，因为当某些事情失败时，它们总是存在问题。

我制作[了一个随机路径生成器](http://jsfiddle.net/timo2012/2T4TU/31/)（速度慢，但使用[jsbin](http://jsbin.com/oqojan/1/edit)来提高速度），您可以在其中获取随机路径并使用 Raphael.path2curve() 将其转换为 Cubic 命令。在小提琴中单击 SVG 或在输入字段上按 enter 以获取新的随机路径。重复，直到你找到一个不正确的。在HTML 窗口中的[jsfiddle](http://jsfiddle.net/timo2012/2T4TU/31/)中是一个参数`var list = "st";`，您可以在其中将路径命令设置为随机化。

这是一个示例图像。蓝色是原始路径，红色是转换路径。它们应该是相同的。

![小路](../Images/5cd3eeac3350a68e1a30c6c29a627df8.png)

**我应该如何处理 Raphael 代码才能使转换正确？**

（我做[了一个错误报告](https://github.com/DmitryBaranovskiy/raphael/issues/629)，但现在已经尝试解决问题几个小时，但没有运气。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T00:49:53.160

看来我终于把它修好了。请测试！我制作了两个 jsbin 版本：

1) 使用未修改的 Raphael 库的非固定版本：[jsbin.com/oqojan/33](http://jsbin.com/oqojan/33)。
2) 修改 path2curve() 函数的 FIXED 版本：[jsbin.com/oqojan/32](http://jsbin.com/oqojan/32)。

在这两个版本中都有黑色（原始）和白色（标准化）路径。如果一切正常，您不应该在黑色路径下方看到白色路径。如果你看到白色的路径，则 lib 代码有一个错误（请参阅下面的一些轻微闪烁的解释）。

请在输入字段上按住 ENTER 大约一分钟。只要 ENTER 关闭，代码就会重复生成随机路径。更改属性`var list = "mlcqahvstz";`以更改随机化的基本字母。

这里是我对 lib 代码所做的解释。在[原始 Raphaël 2.1.0 lib 代码](https://raw.github.com/DmitryBaranovskiy/raphael/master/raphael.js)中有一个函数 path2curve()，它具有以下几行：

```
case "S":
    nx = d.x + (d.x - (d.bx || d.x));
    ny = d.y + (d.y - (d.by || d.y));
    path = ["C", nx, ny][concat](path.slice(1));
    break;
case "T":
    d.qx = d.x + (d.x - (d.qx || d.x));
    d.qy = d.y + (d.y - (d.qy || d.y));
    path = ["C"][concat](q2c(d.x, d.y, d.qx, d.qy, path[1], path[2]));
    break; 
```

当我将它们更改为：

```
case "S":
    if (pcom == "C" || pcom == "S") { // In "S" case we have to take into
                                      // account, if the previous command
                                      // is C/S.
        nx = d.x * 2 - d.bx;          // And reflect the previous 
        ny = d.y * 2 - d.by;          // command's control point relative
                                      // to the current point.  
    }
    else {                            // or some else or nothing
        nx = d.x;
        ny = d.y;
    }
    path = ["C", nx, ny][concat](path.slice(1));
    break;
case "T":
    if (pcom == "Q" || pcom == "T") { // In "T" case we have to take
                                      // into account, if the
                                      // previous command is Q/T.
        d.qx = d.x * 2 - d.qx;        // And make a reflection similar 
        d.qy = d.y * 2 - d.qy;        // to case "S".
    }
    else {                            // or something else or nothing
        d.qx = d.x;
        d.qy = d.y;
    }
    path = ["C"][concat](q2c(d.x, d.y, d.qx, d.qy, path[1], path[2]));
    break; 
```

该功能按预期工作（即尊重每个可能的路径命令组合中的原始路径形状）。`pcom`variable 指的是 ORIGINAL 路径的前一段，我还必须添加一种获取方法`pcom`，这很容易，因为对于除 A 之外的所有其他路径命令，从原始路径段类型到三次曲线 (C) 的转换只产生一个立方命令。在 A 的情况下，该函数可能会产生多个 C 命令（短角度产生一个或几个 C 段，而较大的角度产生更多）。

唯一轻微的不一致来自 Z 命令，因为 Raphaël 将每个 Z 转换为 C。这会影响路径开始（或结束）的视觉外观，但差异并不大。我假设它将 Z 转换为 C 以使路径具有动画效果。如果不需要动画，那么您可以考虑编辑函数以使 Z:s 不转换，在这种情况下转换保真度非常好。

我很惊讶所有路径命令都可以如此可靠地表示为三次曲线！

我希望这个错误在 Raphaël 的未来版本中得到修复。

编辑：也为路径动画制作了测试平台：
1）非固定：http: [//jsbin.com/oqojan/44](http://jsbin.com/oqojan/44)
2）固定：http: [//jsbin.com/oqojan/42](http://jsbin.com/oqojan/42)

在对非动画路径和动画路径进行彻底测试后，我可以确认我对 path2curve 函数的修复是稳定的，并且可以在生产代码中实现。如果您想确定，请使用上述测试平台。

# macos - 在默认的 Xcode OS X 应用程序模板中，File's Owner == NSApplication？

> ID：13043220
> 
> 赞同：2
> 
> 时间：2012-10-24T04:54:03.990
> 
> 标签：macos, cocoa, xib

我来自 iPhone 应用程序开发背景。我试图了解应用程序初始化阶段如何在 OS X 应用程序中工作。我觉得令人费解的一件事是，当您最初在 Xcode 4.5.1 中创建应用程序时，它会为您提供一个包含`File's Owner`对象和`Application`对象的单个 XIB 文件。

两者似乎都有相似的插座和接口。所以我想知道：

*   它们指向同一个对象吗？
*   这个 XIB 和实例在 期间究竟会发生*什么*？`NSApplication``NSApplicationMain()`
*   这个 XIB的`File's Owner`内容是什么？
*   将插座连接到一个而不是另一个有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T20:12:44.427

NSApplicationMain 是一个黑盒，你不应该关心它到底做了什么（我也不知道具体，但它做了很多不同的事情）但我们可以确定它直接或间接地读取了应用程序包的 info.plist , 找到 Principle Class 的名称和包含主菜单的 nib 的名称，创建 Principal Class 的实例（NSApplication 或子类），然后反序列化主菜单。

所有笔尖都有一个占位符，用于应用程序的 NSApplication 实例和笔尖的“文件所有者”（取消序列化笔尖的对象）。

由于 NSApplication 实例对主菜单 nib 进行反序列化，因此在这种情况下，应用程序和文件的所有者占位符恰好是同一个对象。无论您将 Outlet 连接到哪个，都将连接到同一个对象。

# android - 根据数据库中的日期在android中设置计时器

> ID：13043224
> 
> 赞同：4
> 
> 时间：2012-10-24T04:54:49.730
> 
> 标签：android, android-notifications

我是安卓新手。我有一个应用程序需要在文本视图中显示存储在数据库中的数据（这是一个时间值，例如 40 小时）。

我想将值从 40（在我的情况下）倒数到零，当它达到零时应该启动警报。

![需要像图片一样显示倒计时](../Images/3b04597ae1b7a3faec7f1dd489986365.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:16:55.080

> 只需以秒为单位转换剩余时间（从数据库获取小时值并将其转换为秒，在我的情况下，我以秒为单位获取时间）

```
public class CountDownActivity extends Activity {

    int time,initStart,startPointTime,hh,mm,ss,millis;
    TextView txtSecond;
    TextView txtMinute;
    TextView txtHour;
    TextView txtDay;
    Handler handler;
    long seconds =40*60*60;
    Runnable updater;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);

    txtSecond=(TextView)findViewById(R.id.cntSecond);
            txtMinute=(TextView)findViewById(R.id.cntMinute);
            txtHour=(TextView)findViewById(R.id.cntHour);
            txtDay=(TextView)findViewById(R.id.cntDay);

                    handler= new Handler();
            initStart = (int) SystemClock.elapsedRealtime();

             updater = new Runnable() {

                public void run() {
                    int sec,minute,hour,day;
                    long  diff = seconds;
                    System.out.println(diff);
                    if (diff >= 1) {
                        sec =  (int) (diff%60);
                    } else {
                        sec=00;
                    }
                    txtSecond.setText("" +sec);
                    diff = diff/60;
                    System.out.println(diff);
                    if (diff >= 1) {
                        minute =  (int) (diff%60);
                    } else {
                        minute=00;
                    }
                    txtMinute.setText("" +minute);
                    diff = diff/60;
                    if (diff >= 1) {
                        hour =  (int) (diff%24);
                    } else {hour = 00; }
                    txtHour.setText("" +hour);
                    diff = diff/24;
                    if (diff >= 1) {
                        day =  (int) diff;
                    } else { day =00; }
                    txtDay.setText("" +day);
                    seconds=seconds-1;

                    handler.postDelayed(this, 1000);
                }
            };

            handler.post(updater);
}

> //and don't forget to removeCallback on destroy

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        handler.removeCallbacks(updater);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T05:02:02.837

您可以使用 a`CountDownTimer`对值进行倒计时，如下所示：

```
 final MyCounter timer = new MyCounter(600000, 1000); //add your time

 ...
   public class MyCounter extends CountDownTimer
    {

        public MyCounter(long millisInFuture, long countDownInterval)
        {
            super(millisInFuture, countDownInterval);
        }

        @Override
        public void onFinish()
        {
            Log.i("debug","Timer Completed");

        }

        @Override
        public void onTick(long millisUntilFinished)
        {

            tv.setText("Timer : " + (millisUntilFinished/60000) + " " + "minutes remaining.");
        }

  } 
```

对于警报部分，您可以使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)。这是相同的[教程](http://blog.mikesir87.io/2013/04/android-creating-an-alarm-with-alarmmanager/)。

希望能帮助到你！

# java - keyPressed 事件在第一次重复时变慢

> ID：13043229
> 
> 赞同：3
> 
> 时间：2012-10-24T04:55:15.830
> 
> 标签：java, events, keypress, bitset

好的，我很抱歉这是一个非常奇怪的问题，但这让我发疯了。

我通过以下方式处理我的游戏的 WASD 动作：

```
Action ClassWASDKeyPressed = new ClassWASDKeyPressed();
Action ClassWASDKeyReleased = new ClassWASDKeyReleased();
BitKeys movementBitKeys = new BitKeys(); //for WASD movement key pressed/releases

//pressed
theDesktop.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("W"), "wButtonPress");
theDesktop.getActionMap().put("wButtonPress", ClassWASDKeyPressed);
theDesktop.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("A"), "aButtonPress");
theDesktop.getActionMap().put("aButtonPress", ClassWASDKeyPressed);
theDesktop.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("S"), "sButtonPress");
theDesktop.getActionMap().put("sButtonPress", ClassWASDKeyPressed);
theDesktop.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("D"), "dButtonPress");
theDesktop.getActionMap().put("dButtonPress", ClassWASDKeyPressed);
//released
theDesktop.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("released W"), "wButtonRelease");
theDesktop.getActionMap().put("wButtonRelease", ClassWASDKeyReleased);
theDesktop.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("released A"), "aButtonRelease");
theDesktop.getActionMap().put("aButtonRelease", ClassWASDKeyReleased);
theDesktop.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("released S"), "sButtonRelease");
theDesktop.getActionMap().put("sButtonRelease", ClassWASDKeyReleased);
theDesktop.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("released D"), "dButtonRelease");
theDesktop.getActionMap().put("dButtonRelease", ClassWASDKeyReleased); 
```

下面是两个 Action 类：

```
class ClassWASDKeyPressed extends AbstractAction {
    private static final long serialVersionUID = 1L;

    public void actionPerformed(ActionEvent e) {
        if (chatTextField.isFocusOwner() == false){
            if (e.getActionCommand().equals("w")){
                keyPressed(87);
            } else if(e.getActionCommand().equals("a")){
                keyPressed(65);
            } else if(e.getActionCommand().equals("s")){
                keyPressed(83);
            } else if(e.getActionCommand().equals("d")){
                keyPressed(68);
            }
        }
    }
}

class ClassWASDKeyReleased extends AbstractAction {
    private static final long serialVersionUID = 1L;

    public void actionPerformed(ActionEvent e) {
        if (chatTextField.isFocusOwner() == false){
            if (e.getActionCommand().equals("w")){
                keyReleased(87);
            } else if(e.getActionCommand().equals("a")){
                keyReleased(65);
            } else if(e.getActionCommand().equals("s")){
                keyReleased(83);
            } else if(e.getActionCommand().equals("d")){
                keyReleased(68);
            }
        }
    }
} 
```

这是这样做的逻辑：

```
public void keyPressed(int e) {
    long endTime = System.nanoTime();
    long elapsedTime = endTime - startTime;
    double elapsedTimeSeconds = (double)elapsedTime / 1000000000.0;

    if (elapsedTimeSeconds < .125){ //let them move 8 times a second
        logger.info("KeyPressed (QUICK): " + elapsedTimeSeconds);
    } else {
        logger.info("KeyPressed (VALID): " + elapsedTimeSeconds);
        //logger.debug("Key Pressed: " + e.getKeyChar());  //FOR TROUBLESHOOTING
        movementBitKeys.keyPressed(e);
        //movementBitKeys.showKeyList();  //FOR TROUBLESHOOTING

        if (movementBitKeys.isKeyPressed(87) && !movementBitKeys.isKeyPressed(68) && !movementBitKeys.isKeyPressed(83) && !movementBitKeys.isKeyPressed(65)){
            requestCharacterMove("North");
        }
        if (movementBitKeys.isKeyPressed(87) && movementBitKeys.isKeyPressed(68) && !movementBitKeys.isKeyPressed(83) && !movementBitKeys.isKeyPressed(65)){
            requestCharacterMove("NorthEast");
        }
        if (movementBitKeys.isKeyPressed(87) && !movementBitKeys.isKeyPressed(68) && !movementBitKeys.isKeyPressed(83) && movementBitKeys.isKeyPressed(65)){
            requestCharacterMove("NorthWest");
        }
        if (!movementBitKeys.isKeyPressed(87) && movementBitKeys.isKeyPressed(68) && !movementBitKeys.isKeyPressed(83) && !movementBitKeys.isKeyPressed(65)){
            requestCharacterMove("East");
        }
        if (!movementBitKeys.isKeyPressed(87) && !movementBitKeys.isKeyPressed(68) && movementBitKeys.isKeyPressed(83) && !movementBitKeys.isKeyPressed(65)){
            requestCharacterMove("South");
        }
        if (!movementBitKeys.isKeyPressed(87) && movementBitKeys.isKeyPressed(68) && movementBitKeys.isKeyPressed(83) && !movementBitKeys.isKeyPressed(65)){
            requestCharacterMove("SouthEast");
        }
        if (!movementBitKeys.isKeyPressed(87) && !movementBitKeys.isKeyPressed(68) && movementBitKeys.isKeyPressed(83) && movementBitKeys.isKeyPressed(65)){
            requestCharacterMove("SouthWest");
        }
        if (!movementBitKeys.isKeyPressed(87) && !movementBitKeys.isKeyPressed(68) && !movementBitKeys.isKeyPressed(83) && movementBitKeys.isKeyPressed(65)){
            requestCharacterMove("West");
        }
        startTime = endTime;
    }
}

public void keyReleased(int e) {
    //logger.debug("Key Released: " + e.getKeyChar());  //FOR TROUBLESHOOTING
    movementBitKeys.keyReleased(e);
    //movementBitKeys.showKeyList();  //FOR TROUBLESHOOTING
}

public void keyTyped(int e) {
    // not used - but in case I ever want it
} 
```

还有 BitSet 类：

```
package com.jayavon.game.helper;

import java.util.BitSet;

public class BitKeys{

    private BitSet keyBits = new BitSet(256);

    public void keyPressed(final int keyCode) {
        keyBits.set(keyCode);
    }

    public void keyReleased(final int keyCode) {
        keyBits.clear(keyCode);
    }

    public void keyTyped(final int keyCode) {
        // don't care
    }

    public boolean isKeyPressed(final int keyCode) {
        return keyBits.get(keyCode);
    }

    public void showKeyList(){
        System.out.println(keyBits.toString());
    }

} 
```

我的问题是，当您按住第一个和第二个“移动”之间的一个移动键时，比所需的 0.125 毫秒等待时间长得多。以下是一些示例数据：

设置 1：

6059 [AWT-EventQueue-0] 信息 com.jayavon.game.client.MyClient - 按键（有效）：2.567790275

6620 [AWT-EventQueue-0] 信息 com.jayavon.game.client.MyClient - 按键（有效）：0.560479937

6670 [AWT-EventQueue-0] 信息 com.jayavon.game.client.MyClient - 按键（快速）：0.0504469 6710 [AWT-EventQueue-0] 信息 com.jayavon.game.client.MyClient - 按键（快速）：0.09360516 6750 [AWT-EventQueue-0] 信息 com.jayavon.game.client.MyClient - 按键（有效）：0.129943376

6791 [AWT-EventQueue-0] 信息 com.jayavon.game.client.MyClient - 按键（快速）：0.04009505 6821 [AWT-EventQueue-0] 信息 com.jayavon.game.client.MyClient - 按键（快速）：0.07098997 6851 [AWT-EventQueue-0] 信息 com.jayavon.game.client.MyClient - 按键（快速）：0.102378686 6902 [AWT-EventQueue-0] 信息 com.jayavon.game.client.MyClient - 按键（有效）：0.152006677

第 2 组：

9690 [AWT-EventQueue-0] 信息 com.jayavon.game.client.MyClient - 按键（有效）：2.03802468

10272 [AWT-EventQueue-0] 信息 com.jayavon.game.client.MyClient - 按键（有效）：0.582025645

10322 [AWT-EventQueue-0] 信息 com.jayavon.game.client.MyClient - 按键（快速）：0.054749323 10342 [AWT-EventQueue-0] 信息 com.jayavon.game.client.MyClient - 按键（快速）：0.069890042 10372 [AWT-EventQueue-0] 信息 com.jayavon.game.client.MyClient - 按键（快速）：0.100790212 10412 [AWT-EventQueue-0] 信息 com.jayavon.game.client.MyClient - 按键（有效）：0.141337411

10462 [AWT-EventQueue-0] 信息 com.jayavon.game.client.MyClient - 按键（快速）：0.049483458 10462 [AWT-EventQueue-0] 信息 com.jayavon.game.client.MyClient - 按键（快速）：0.049720381 10512 [AWT-EventQueue-0] 信息 com.jayavon.game.client.MyClient - 按键（快速）：0.098888524 10542 [AWT-EventQueue-0] 信息 com.jayavon.game.client.MyClient - 按键（有效）：0.128729361

现在是时候提出这个问题了。显然，您第一次移动经过的时间取决于多长时间，所以这是有道理的。我不明白为什么第二个“运动”大约是 0.5 而不是更接近 0.125。正如您从数据中看到的那样，第三步和第四步在按住键时发射得非常快，以至于它们小于 0.125。

谁能以任何方式帮助我解决这个问题？任何以任何方式改进我的代码的建议都会有很大的帮助。毫秒数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T06:47:29.577

由于@aioobe 的巨大帮助，这就是我解决这个问题的方法。

```
Timer timer = new Timer();
timer.schedule(new TimerTask() {
    public void run() {
        checkKeyStrokes();
    }
}, 0, 0135);

public void checkKeyStrokes(){
    if (movementBitKeys.isKeyPressed(87)){ //w
        keyPressed(87);
    }
    if (movementBitKeys.isKeyPressed(65)){ //a
        keyPressed(65);
    }
    if (movementBitKeys.isKeyPressed(83)){ //s
        keyPressed(83);
    }
    if (movementBitKeys.isKeyPressed(68)){ //d
        keyPressed(68);
    }
} 
```

希望这对其他人有帮助！！！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T07:22:51.467

分析您的代码后 - 我的快速回复

*   当一个键被按下来快速时，它不会被你的 moveBitKeys 识别（无效）这可能是一个问题。当您快速按下按键时，例如“s”后跟“w”而不是“a”。

"s" 有效（向南移动） - 向南移动

（释放“s” - 什么都不做）s

"w" 无效（快速）

## “a”有效（向东移动）->向东移动->这是错误的-应该是东北

我的另一个建议。目前您使用两个计时器。一个用于 elapsedTimeInSeconds 和一个 Timer 用于控制按下的键。

这可以在一个过程中完成

```
class ClassWASDKeyPressed extends AbstractAction {
  private static final long serialVersionUID = 1L;

  public void actionPerformed(ActionEvent e) {
    if (chatTextField.isFocusOwner() == false){
        if (e.getActionCommand().equals("w")){
            movementBitKeys.keyPressed(87);
        } else if(e.getActionCommand().equals("a")){
            movementBitKeys.keyPressed(65);
        } else if(e.getActionCommand().equals("s")){
            movementBitKeys.keyPressed(83);
        } else if(e.getActionCommand().equals("d")){
            movementBitKeys.keyPressed(68);
        }
    }
  } 
```

}

以及 TimerTask 的变化

```
Timer timer = new Timer();
timer.schedule(new TimerTask() {
  public void run() {
    move(movementBitKeys); // instead of keypressed - without elapsedTimeSeconds  
  }
}, 0, 0125); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T05:04:08.550

如果您按住一个键，那么在发送重复事件之前会有一个计时器等待。这听起来与此处发布的问题非常相似[Elimination Initial keypress delay](https://stackoverflow.com/questions/7537570/eliminating-initial-keypress-delay)和[Fixing delay issue in java keypress action](https://stackoverflow.com/questions/9050986/fixing-delay-issue-in-java-keypress-action)

为什么不直接假设当您收到一个 keyPressed 事件时该键已关闭，直到您获得一个 keyReleased。因此，不要依赖系统为您生成事件。拥有自己的计时器，当您收到 keyPressed 事件并且没有 keyRelease 时，它​​会在您要求的时间间隔内请求角色沿按键方向移动。当您收到 keyRelease 时，只需停止计时器。

# php - jquery ajax 没有在谷歌浏览器中向 php 发送帖子数据

> ID：13043230
> 
> 赞同：1
> 
> 时间：2012-10-24T04:55:16.093
> 
> 标签：php, jquery, ajax, google-chrome

我有这个 ajax 调用：

```
var data = "action=getCheckoutsXML&start="+start+"&end="+end;

        $.ajax({
            type: "POST",
            url: "includes/functionsMisc.php",
            data: data,
            dataType: 'xml',
            async: false,
            success: addCheckouts
        }); 
```

也用于：

```
var data = {
"action" : "getCheckoutsXML",
"start" : start,
"end" : end}; 
```

并且在 PHP 谷歌浏览器检查器上未收到 POST 数据让我获得状态 200

这在 Firefox 上工作正常。

我正在使用 jquery 1.7.1、chrome 24.0.1297、php 5.3.13。

在其他页面中有相同的 ajax 调用（不同的参数），它们在 chrome 中也可以正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:06:50.980

确保您的 PHP 返回一个有效的 XML。在网络选项卡下的 Chome 检查器中。您单击脚本“includes/functionsMisc.php”的请求，您应该在“响应”选项卡下看到原始 XML 输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T05:05:47.047

'检查你的 url .. 通常它应该以 / 开始发布数据的正确方法是

```
 $.ajax({
        type: "POST",
        url: "/includes/functionsMisc.php",
        data: { action : "getCheckoutsXML", start : "start", end : "end"},
        dataType: 'xml',
        async: false,
        success: function(data) { alert(data); }
    }); 
```

我替换了 addCheckouts 以检查是否有成功响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T11:02:04.373

尝试将此添加到您的初始化中，它对我有用：

```
$.ajaxSetup({      
   cache: false,    
   data : null      
 }); 
```

显然，这可能与 Chrome 使用未初始化的变量等有关。

# jsf - JSF SelectOneMenuItem onselect 属性

> ID：13043233
> 
> 赞同：0
> 
> 时间：2012-10-24T04:55:29.350
> 
> 标签：jsf, jakarta-ee, jsf-2

我已经创建了 selectOneMenuItem(JSF)。我把我的事件放在 valueChangeListener / onchange 上

```
<h:selectOneMenu id="ddl" value="#{Foo.attr}"
                onchange="submit()"
                valueChangeListener="#{Foo.renderFoo}"> 
```

当我从 selectOneMenuItem 中选择一个值时，事件会触发。现在，当我重新选择该值时，事件不会触发（因为这是`valueChangeListener`事件）所以它不会触发。我希望该事件应该在每个选择上触发，甚至再次触发相同的选择。我发现`onselect`但找不到正确的方法，我该如何使用它`onselect`。Anyu 的帮助将非常可观

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:21:48.943

您可以像这样使用 click ajax 事件作为单独的侦听器。

```
<h:selectOneMenu value="#{bean.value}">

    <f:ajax event="click" listener="#{bean.onClick}"/>

    <f:selectItem itemValue="1" itemLabel="A"/>
    <f:selectItem itemValue="2" itemLabel="B"/>
    <f:selectItem itemValue="3" itemLabel="C"/>

</h:selectOneMenu> 
```

# mysql - 在调用 Read() INSERT 之前访问字段的尝试无效

> ID：13043234
> 
> 赞同：3
> 
> 时间：2012-10-24T04:55:41.130
> 
> 标签：mysql, vb.net

我正在尝试使用此代码检查系统是否已存在具有此值的字段

```
Dim adap As New MySqlDataAdapter
Dim sqlquery = "SELECT * FROM client WHERE code ='"+ TxtCode.Text +"'"
                Dim comand As New MySqlCommand()
                comand.Connection = con
                comand.CommandText = sqlquery
                adap.SelectCommand = comand
                Dim data As MySqlDataReader
                data = comando2.ExecuteReader()
                leitor.Read()
                If (data(3).ToString) = code Then
                    MsgBox("already exists", MsgBoxStyle.Information)
                    TxtCode.ResetText()
                    TxtCode.Focus()
                Else
                    Console.WriteLine(insert("INSERT INTO client (name, tel, code) VALUES ('" & name & "', '" & tel & "')"))
                    con.Close()
                End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:06:50.007

你打电话`leitor.Read()`但你没有打电话给`data.Read()`你的代码

此外，由于您的查询是`SELECT * FROM client WHERE code = '1234'`，因此无需检查`data(3) == code`. 如果记录存在， data.Read() 将为真

```
If data.Read() Then
   MsgBox("already exists", MsgBoxStyle.Information)
   TxtCode.ResetText()
   TxtCode.Focus()
Else
   Console.WriteLine(insert("INSERT INTO client (name, tel, code) VALUES ('" & name & "', '" & tel & "')"))
   con.Close()
End If 
```

使用参数而不是串联也是一个好习惯

```
 Dim sqlquery = "SELECT * FROM client WHERE code = @code"
  ...

  command.Parameters("@code", code); //this is safer 
```

并为您的插入

```
 "INSERT INTO client (name, tel, code) VALUES (@name, @tel)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T05:17:44.097

您正在插入两个值，但为输入指定 3 个值

这条线

```
"INSERT INTO client (name, tel, code) VALUES ('" & name & "', '" & tel & "')" 
```

应该是这样的

```
"INSERT INTO client (name, tel, code) VALUES ('" & name & "', '" & tel & "','" & code & "')" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T20:15:14.367

这是我的解决方案：

```
 public bool isPhoneInfo(string hashPhone)
    {
        using (MySql.Data.MySqlClient.MySqlConnection conn = new MySql.Data.MySqlClient.MySqlConnection(_connStrng))
        {
            MySql.Data.MySqlClient.MySqlCommand cmd = new MySql.Data.MySqlClient.MySqlCommand();
            cmd.Connection = conn;
            cmd.CommandText = "CALL SP_IS_PHONEINFO(?p_hashInfo);";
            cmd.Parameters.AddWithValue("?p_hashInfo", hashPhone);

            try
            {
                conn.Open();
                MySqlDataReader dr = cmd.ExecuteReader(CommandBehavior.CloseConnection);

                while (dr.Read())
                {
                    string hashPhoneInfo = dr["hashPhone"].ToString();
                    if (!hashPhoneInfo.Equals(string.Empty))
                        return true;
                }
            }
            catch (MySqlException e)
            {
                System.Diagnostics.Debug.WriteLine("Error in : "+e);
            }
        }
        return false;

    } 
```

# c#-4.0 - Azure C#Isotope 上的 Hadoop

> ID：13043242
> 
> 赞同：2
> 
> 时间：2012-10-24T04:56:43.720
> 
> 标签：c#-4.0, azure, hadoop, azure-hdinsight

在 HadoopOnAzure 的初始版本中，Microsoft 提供了 C#Isotope SDK 作为 Azure 上 Hadoop 集群的编程接口。在 HDInsight 版本之后，这将从下载中删除。此外，在尝试使用以前版本的 sdk 时，我们得到 500 - 内部服务器错误。

知道是否禁用了此服务？如果是这样，以编程方式与 Azure 上的 HDInsight 群集交互的替代方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:48:50.903

哦，您可以在 [http://hadoopsdk.codeplex.com](http://hadoopsdk.codeplex.com)的 Codeplex 中找到 Microsoft .NET SDK for Hadoop 。

这些服务已经正常运行，如果您有任何问题，还可以查看 MSDN 论坛：[http](http://social.msdn.microsoft.com/Forums/en-US/hdinsight/threads) ://social.msdn.microsoft.com/Forums/en-US/hdinsight/threads 。

# iphone - 我正在为 iOS 编写一个诊断应用程序，它加载一组预定的网页并记录页面在设备上呈现所需的时间。

> ID：13043244
> 
> 赞同：1
> 
> 时间：2012-10-24T04:56:51.867
> 
> 标签：iphone, objective-c, ios5, ios6

我正在为 iOS 编写一种诊断应用程序，它会打开预先确定的网站列表并记录每个网站加载所用的时间。我让应用程序在 ViewController 中打开 UIWebView。

以下是 ViewController 源代码的重要部分：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    DataClass *obj = [DataClass getInstance];
    obj.startOfTest = [NSDate date];

    //load the first webpage
    NSString *urlString = [websites objectAtIndex:obj.counter];  //assume firstWebsite is already instantiated and counter is initially set to zero
    obj.counter = obj.counter + 1;
    NSURL *url = [NSURL URLWithString:urlString];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [obj.websiteStartTimes addObject:[NSDate date]];
    [webView loadRequest:request];
}

- (void)webViewDidFinishLoading:(UIWebView *)localWebView{
    DataClass *obj = [DataClass getInstance]; //gets 'global' variables

    if(!webView.loading){ 
        NSString *urlString = [websites objectAt:obj.counter];
        obj.counter = obj.counter + 1;
        NSURL *url = [NSURL URLWithString:urlString];
        NSURLRequest *request = [NSURLRequest requestWithURL:url];
        [obj.websiteStartTimes addObject:[NSDate date]];
        [webView loadRequest:request];
    } 
```

这段代码的问题在于它似乎在完成之前加载下一个网站。我原以为对 webViewDidFinishLoading 的调用和其中的 if 语句都可以确保网站完成，但事实并非如此。我注意到有时，单个网站会多次调用 didFinishLoading 方法，但它只会输入一次 if 语句。

例如，如果我有一个包含 10 个网站的列表，webView 只会真正显示列表中的第 3 和第 6 个网站，然后表明它已经“完成”了所有这些网站。

在应用程序移动到下一个之前，我还能做些什么来确保网站完成加载并呈现到屏幕上？

# c++ - 编写跨平台代码时使用 char* 而不是 void* 有什么陷阱吗？

> ID：13043247
> 
> 赞同：7
> 
> 时间：2012-10-24T04:57:27.677
> 
> 标签：c++, pointers, cross-platform

使用 char* 编写进行内存访问的跨平台代码时是否有任何陷阱？

更新：例如，如果地址与该类型的大小对齐，我应该在将取消引用的 char* 转换为某种类型（比如 int）之前检查吗？某些架构会在未对齐访问时返回奇怪的结果吗？

我正在开发一个播放内存分配器，以更好地了解如何调试内存问题。我开始相信 char* 更可取，因为它能够进行指针运算并取消对 void* 的引用，这是真的吗？以下假设在不同的常见平台上是否始终成立？

```
sizeof(char) == 1
sizeof(char*) == sizeof(void*)
sizeof(char*) == sizeof(size_t) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T05:01:17.597

`sizeof(char)==1`绝对永远是真的。

`sizeof(char *) == sizeof(void *)`*可能也*总是正确的。C 标准要求它们具有相同的表示，这至少强烈暗示相同的大小。

`sizeof(char *) == sizeof(size_t)`绝对不能依赖——我知道它是错误的实现（虽然它们可能不完全符合标准，但这不是他们的问题之一）。

# ios - NotificationCenter 小部件无法使用 CoreLocation

> ID：13043250
> 
> 赞同：0
> 
> 时间：2012-10-24T04:58:05.620
> 
> 标签：ios, widget, core-location, jailbreak

我正在编写一个通知中心小部件，它必须使用位置信息。在普通应用程序中，我使用 CoreLocation 并且效果很好。但是在我的小部件中，我尝试了`locationServicesEnabled`但它没有转到回调函数，并且`authorizationStatus`总是`kCLAuthorizationStatusNotDetermined`，并且授权设置没有出现在**Setting -> location service**中。我已经将代表设置为班级。

系统的 Yahoo 天气小部件可以自动定位，并且它也使用 CoreLocation，因此该小部件确实具有使用位置服务的能力。

**为什么 CoreLocation 在我的小部件上不起作用？**

* * *

**更新：2012.10.24 15:52**

我使用私有 API

```
[CLLocationManager setAuthorizationStatus:YES 
                                forBundle:[NSBundle bundleForClass:self.class]] 
```

现在，授权设置显示在设置->位置服务中。每次我拉下通知中心，它都会打开。但是`authorizationStatus`仍然`kCLAuthorizationStatusNotDetermined`不会去回调函数。

* * *

**更新时间：2012.10.25 10:38**

我将定位代码更改为：

```
[CLLocationManager setDefaultEffectiveBundle:[NSBundle bundleForClass:self.class]];
[_locationManager startUpdatingLocation]; 
```

如果我关闭定位服务，它会跳转到

```
- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error 
```

如果我打开服务，无论我是否授权，都没有回调（两者

```
- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error 
```

和

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation 
```

不会被调用）。

顺便说一句，当我打开/关闭服务时，

```
- (void)locationManager:(CLLocationManager *)manager didChangeAuthorizationStatus:(CLAuthorizationStatus)status 
```

将被调用，但在我更改授权状态时不会被调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T02:58:55.350

可能是因为 WeeAppPlugin 包不是一个有效的包，导致小部件无法使用位置服务。在我使用`[[CLLocationManager alloc] initWithEffectiveBundle:[NSBundle bundleForClass:self.class]]`CoreLocation 的私有 API 后，小部件可以正常获取位置信息。

# jquery - dialog2.js 中的 Twitter Bootstrap Ajax 调用错误

> ID：13043252
> 
> 赞同：0
> 
> 时间：2012-10-24T04:58:19.460
> 
> 标签：jquery, twitter-bootstrap, modal-dialog

我们正在为我的应用程序使用 Twitter Bootstrap。我有一种情况，我必须从服务器中提取数据并将其显示给弹出/模型 div。我们正在使用 dialog2.js，但它确实有效。我们不想使用 .load 功能，因为我们没有使用任何单个 url 调用。我们希望它通过 ajax 调用处理“URL”并将响应发送回弹出/模型内容区域。我们尝试了以下

```
$('#proposalInDialog2').click(function(event){
var url="abc.do"
$('<div/>').dialog2({title: "Goals-Based Proposal", content: url});
}); 
```

请帮助我们找出这个，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:37:00.220

解决方法很简单，设置如下：

```
$.support.cors = true; 
```

并且[ajax](/questions/tagged/ajax "显示标记为“ajax”的问题")跨域请求将起作用

# java - Java程序处理非字母字符

> ID：13043253
> 
> 赞同：0
> 
> 时间：2012-10-24T04:58:23.100
> 
> 标签：java, encryption, char, int, ascii

更新将一个段从 ANDS 更改为 ORS

我正在尝试编写一个密码程序，到目前为止，它加密了字母，但我无法让它忽略非字母字符。我有一个应该处理的 if 语句，但似乎不起作用：

```
import javax.swing.*;
import java.text.*;
import java.util.*;
import java.lang.*;

public class Cipher {

private String phrase; // phrase that will be encrypted 
private int shift; //number that shifts the letters

///////////////
//Constructor//
//////////////

public Cipher( int new_shift)
{

    shift = new_shift;

}//end of cipher constructor

////////////
//Accessor//
////////////

public int askShift() {

return shift;
}//end of askShift accessor

////////////
//mutators//
////////////

public void changeShift (int newShift) {

shift = newShift;

}//end of changeShift mutator

/////////////
//instances//
/////////////

public String encryptIt(String message) {

char[] charArray = message.toCharArray(); //converts to a character array
int[] asciiArray = new int[charArray.length]; //array to store the ascii codes

//for loop that converts the charArray into an integer array
for (int count = 0; count < charArray.length; count++) {

    asciiArray[count] = charArray[count];

} //end of For Loop

//loop that performs the encryption
for (int count = 0; count < asciiArray.length; count++) {
//these numbered equality statements check to see if the ascii code is a non-character. If it is, continue the loop

    if (asciiArray[count] < 65 || asciiArray[count] > 90 || asciiArray[count] < 96 || asciiArray[count] > 122){
    continue;
    }
    else
    asciiArray[count] = ((asciiArray[count]- 97)+ shift) % 26 + 97;{
    }
} //end of for loop

 //loop that converts the int array back into a character array
    for (int count = 0; count < asciiArray.length; count++) {

            charArray[count] = (char)asciiArray[count];

    }

/* commenting out this block until futher notice
//loop that performs the encryption
for (int count = 0; count < charArray.length; count++) {
int shiftNum = 2;
charArray[count] = (char)(((charArray[count] - 'a') + shiftNum) % 26 + 'a');

} // end of for loop */ 

 message = new String(charArray); //converts the array to a string

return message;
}//end of encrypt instance 

//////////
///Main///
//////////
public static void main(String[] args) {

Cipher cipher = new Cipher(1); //cipher with a shift of one letter
Cipher cipher2 = new Cipher(5); //cipher with a shift of two letters
String phrase = JOptionPane.showInputDialog(null, "Enter phrase to be messed with ");
String encryption = cipher.encryptIt(phrase);
String encryption2 = cipher2.encryptIt(phrase);
JOptionPane.showMessageDialog(null, encryption);
JOptionPane.showMessageDialog(null, encryption2);

}//end of main function

} //end of cipher class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:01:49.127

改变你内心的状况`if`

编辑：

`if ((asciiArray[count] < 65 || asciiArray[count] > 90) && (asciiArray[count] < 96 || asciiArray[count] > 122))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T05:02:44.270

问题似乎出在这一行：

`if (asciiArray[count] < 65 && asciiArray[count] > 90 && asciiArray[count] < 96 && asciiArray[count] > 122)`

您是说，如果一个数字小于 65，大于 90，如果它小于 96 且大于 122……您需要用 OR 替换这些 AND 条件，因为现在这样，它将始终评估为假。

此外，解决此问题的另一种方法是，由于`charArray`包含字符值，因此您可以[`Character.isLetter(char ch)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#isLetter%28char%29)改用，因此您的代码变为：

```
if(Character.isLetter(charArray[count])){
asciiArray[count] = ((asciiArray[count]- 97)+ shift) % 26 + 97;
} 
```

请注意，由于您的程序现在是这样，您似乎`{`在`else`块中放错了位置。

# objective-c - MapView iOS 6 Mapview-自定义跟踪线

> ID：13043255
> 
> 赞同：1
> 
> 时间：2012-10-24T04:58:36.063
> 
> 标签：objective-c, xcode, ios6

我有我的代码来跟踪公交路线的 GPS 位置路径。这很好用，但我试图创建一条自定义线，使其看起来比平淡无奇的直线更好。

我用描边创建了一条线，但每当我改变描边时，整条线都会改变，填充颜色不会改变任何东西。

```
NSMutableArray *array = [dictionary objectForKey:@"routeLines"];
        if ([array containsObject:overlay]) {
            // create a MKPolylineView with the right colour and display it
            MKPolylineView *lineView = [[MKPolylineView alloc] initWithPolyline:      (MKPolyline *)overlay];
            lineView.fillColor = [UIColor whiteColor];
            lineView.strokeColor = [UIColor orangeColor];
            lineView.lineWidth = 5;

            overlayView = lineView;
            break; 
```

# cakephp - CakePHP：JQuery submit() 返回一个空白页

> ID：13043259
> 
> 赞同：0
> 
> 时间：2012-10-24T04:59:10.663
> 
> 标签：cakephp, jquery

我在 CakePHP 控制器类中创建了一个函数来处理 AJAX 请求。但是我在使用 CakePHP 函数和简单（非 MVC）PHP 代码时发现了不同的结果。我的问题是当它进入**submit()**过程时。使用 CakePHP 函数时，它返回空白页。

这是我使用的 AJAX 请求代码：

```
var userdata = {username : $("#UserUsername").val()};
        $.ajax({
            type:'POST',
            url: 'http://localhost/mycakephp/users/login',
            data: userdata,                     
            success: function(data){                                    
                if(data==0){
                    alert("empty");                 
                } else {
                    $("#UserLoginForm").submit();                       
                }
            }               
        }); 
```

但是当我将 url 指向外部站点时，如下所示：

> 网址：'http://localhost/test/test.php'

其中**test.php**是一个简单的 PHP 代码来处理请求，提交过程工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:05:36.347

抱歉，但您的代码对我来说看起来很奇怪：您有一个登录表单，您使用 ajax 发送您的用户名，调用控制器“UsersController”/函数“登录”，当您从该函数获得答案时，您再次提交另一个表单（“#UserLoginForm”）并将其再次发送到控制器？您正在发送两个表格！很可能这不是您想要的。如果我错了，请纠正我。

我想你想要的只是提交 UserLoginForm 并等待答案，无论它是 OK 还是 NotOK，最后显示这个结果。

您有两种选择：CakePHP 方式或您自己的使用 JQuery 的 ajax 代码。我喜欢使用两者，这取决于我想要获得的用户体验。

## 1.CakePHP方式

使用 JsHelper在控制器中包含 JS Helper，`public $helpers = array('Js');`然后在视图中创建一个 Form，使用来自 JsHelper 的提交。

### 看法

```
 <?php  
  echo $this->Form->create();
  echo $this->Form->input('username');
  echo $this->Form->input('whatever'); 

  // use the Js submit from JsHelper
  echo $this->Js->submit('Send', array(
        'url'=> array('controller' => 'users', 'action' => 'login'),
        'update' => '#update_ajax_div',
  ));
  echo $this->Form->end();
      // Next line is actually very important in order 
      //   to print the automatically created ajax code from JsHelper.
  echo $this->Js->writeBuffer();
 ?>

 <div id="update_ajax_div">
this will be overwritten after submit.
 </div> 
```

### 控制器

在控制器中，表单中的所有数据都将在`$this->data[]`数组中发送。例如***`$this->data['Users']`***，如果这是在 Form->create() 中使用的模型。

代码非常标准，除了必须设置为 ajax 的布局。

```
public function login(){

       // print the data being sent 
   $dataFromAjaxLink = $this->data[];
   $v = var_export($dataFromAjaxLink, true);
   $this->log("Ajax log:  ".$v, 'debug');

   if(isset($this->data['User'])){
       $user_name = $this->data['User']['username'];
        ...
       // do your stuff

   }
   // the answer must be ajax layout
   $this->layout = "ajax";
       // I like to use elements when using ajax, it keeps the folders clean
       //        in this example /app/View/Elements/display_ajax_result.ctp
   $this->render('/elements/display_ajax_result');

} 
```

此元素的内容将打印在 div "update_ajax_div" 中

## 2.纯Ajax方式

第二个版本是通过在`<script>`标签中手动输入 ajax 代码来完成的。这个解决方案给了你更多的自由，允许你做更复杂的事情，但是代码不是那么干净！

以下 JQuery 代码必须在某个按钮/div/whatever 事件中...

```
$(document).ready(function(){

 $(".someButton").click(function() {

      // create the json data to be sent
   var username = $(....).val();
   var dataString = ...

      // call ajax      
   $.ajax({
          type: "POST",
      // never type full paths as in your example. They are sources of errors!
      url: "<?php echo $this->Html->url(array(
            "controller" => "users", 
            "action" => "login")); ?>,
      data: dataString,
      cache: false,
      success: function(html){
             $("#update_ajax_div").html(html);
      } 
   });

 ... 
```

控制器与 CakePHP 方式相同。记得添加ajax布局。

我希望它对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T09:15:17.217

根据您的评论，如果您使用 SecurityComponent，您可以禁用登录操作的 POST 验证。在您的用户控制器中，添加以下内容：

```
function beforeFilter()
{
    parent :: beforeFilter();

    switch($this->request->params['action'])
    {
        case 'login':
            $this->Security->validatePost = false;
            $this->Security->csrfCheck    = false;
            break;
    }
} 
```

但是当然，您会失去 SecurityComponent 在登录操作中添加的值。

# .htaccess - .htaccess - 多个域到同一个根文件夹 - 多种语言

> ID：13043270
> 
> 赞同：1
> 
> 时间：2012-10-24T05:00:55.223
> 
> 标签：.htaccess, multilingual, multiple-domains

我有多个域指向同一个根文件夹。

该网站是多语言的。语言由会话变量设置

我有**www.domain.com/index.php?lang=en （默认）**

**www.domain.com/index.php?lang=da（丹麦语）**

我也有 www.domain.dk

我如何将**www.domain.dk**指向**www.domain.dk/index.php?land=da**

 **我想保持原样的 URL：

1.  如果 .com -> url: -> http:www.domain.com

2.  如果 .dk -> url: -> http:www.domain.dk

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:08:01.473

这个 .htaccess 代码可能会有所帮助

> RewriteBase 上的 RewriteEngine /
> 
> RewriteCond %{HTTP_HOST} !^m。RewriteRule ^$ {HTTP_HOST}/index.php?land=da [R,L]

这将影响您的所有域，因为您的所有域都使用相同的 index.php。在您的 index.php 中检查您正在浏览的主机。

```
if($_SERVER['HTTP_HOST']=='domain.dk') {
    header("Location: www.domain.dk/index.php?land=da"); // Redirect browser

    //if there are scripts below this code insert this
    exit; // Make sure that code below does not get executed when we redirect
} 
```**

# php - 更新多行

> ID：13043279
> 
> 赞同：0
> 
> 时间：2012-10-24T05:01:47.177
> 
> 标签：php

我似乎在任何地方都找不到这个，但我正在尝试根据一个查询更新多行。我希望执行 IF 参数以将所有字符设置为非活动状态，然后运行查询以将一个字符设置为活动状态，以便使其只能选择一个字符。IE

```
UPDATE characters SET active='1'
WHERE name = '_POST[char_name]'; 
```

但是我不知道如何将其设置为类似于以下内容的位置

```
 IF active='1' 
{
    UPDATE characters SET active='0'
    WHERE id= '" . $id . "';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:12:09.653

```
 update characters 
          set active = case
                          when active = 1 then '0'
                          else 1
                         end
   WHERE id= '" . $id . "'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T05:26:05.177

如果等于，下面的查询将设置`active`为 1 ，对于其他行将 设置为 0。`_name``$_POST['char_name']``active`

```
$query = "
    UPDATE characters 
    SET active = IF(_name = '".$_POST['char_name']."', '1', '0')
    WHERE id = '$id'
"; 
```

有关更多详细信息，请参阅[IF() MySQL 函数](http://dev.mysql.com/doc/refman/5.5/en/control-flow-functions.html#function_if)。

# java - JAVA并发 - 等待进程完成

> ID：13043287
> 
> 赞同：1
> 
> 时间：2012-10-24T05:02:44.743
> 
> 标签：java

我对 JAVA 尤其是并发性相当陌生，所以可能/希望这是一个相当直截了当的问题。

基本上从我的主线程我有这个：

```
public void playerTurn(Move move)
{

  // Wait until able to move
  while( !gameRoom.game.getCurrentPlayer().getAllowMove() )
  {
    try {
      Thread.sleep(200);
      trace("waiting for player to be available");
    } catch (InterruptedException e) {
      e.printStackTrace();
    }
  }
  gameRoom.getGame().handle(move);
} 
```

gameRoom.getGame() 在它自己的线程上。gameRoom.getGame().handle() 是同步的 gameRoom.game.getCurrentPlayer() 在 gameRoom.getGame() 的一个变量上，它在同一个线程中

调用 handle(move) 后，allowMoves 设置为 false，并在处理完移动后返回 true。

我多次调用 playerTurn()。我实际上是从 SmartFoxServer 扩展调用它，当它收到请求时，通常是快速连续的。

我的问题是，大多数时候它都有效。但是有时它会发出多个句柄（移动）调用，即使 allowMoves 应该为假。它没有等待它再次成为现实。我认为游戏线程可能在调用另一个句柄（移动）之前没有机会设置 allowMoves 。我在 allowMoves 中添加了 volatile，并确保游戏线程上的函数设置为同步。但问题仍在发生。

这些在我的游戏课上：

```
synchronized public void handle(Object msg)
{
  lastMessage = msg;
  notify();
} 

synchronized public Move move() throws InterruptedException
{
  while (true)
  {
   allowMoves = true;
   System.out.print(" waiting for move()...");
   wait();
   allowMoves = false;
   if (lastMessage instanceof Move)
   {
    System.out.print(" process move()...");
    Move m = (Move) lastMessage;
    return m;
   }
  }
}

public volatile boolean allowMoves;
synchronized public boolean getAllowMoves()
{
  return allowMoves;
} 
```

正如我所说，我是新手，可能有点超前（像往常一样，但这是我跳入深渊的风格，无论如何都非常适合快速学习曲线）。

为你的帮助干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:33:11.147

问题是您 `synchronized`在两个不同的对象上使用方法。

```
 gameRoom.game.getCurrentPlayer().getAllowMove()<-- This is synchronized on 
                                                    CurrentPlayer instance.
 gameRoom.getGame().handle(move)<-- This is synchronized on `gameRoom.getGame()` 
```

这是你的问题。您不需要`synchronized`关键字 for，`getAllowMoves`因为字段是`volatile`作为`volatile`保证可见性语义的。

```
public boolean getAllowMoves() {
    return allowMoves;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:02:00.053

不确定这是否会有所帮助，但是如果您将使用[AtomicBoolean](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/atomic/AtomicBoolean.html)而不是`synchronized`and`volatile`怎么办？它说它是`lock-free and thread-safe`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T11:50:05.563

有一个原语，专门用于资源管理 - [Semaphore](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Semaphore.html)

你需要

*   创建许可设置为 1 的信号量
*   在寻找移动时使用获取
*   移动完成后使用释放

所以你永远不会面对出现 2 个并发调用的句柄方法。

# xml - xml排序fn不起作用

> ID：13043290
> 
> 赞同：1
> 
> 时间：2012-10-24T05:03:35.690
> 
> 标签：xml, xpath

XML 输入如下：

```
 <Global>
    <ProductFood>
        <foodName>Burger</foodName>
        <foodName>Snack</foodName>
    </ProductFood>
    <ProductToy>     
      <Product ProductID="1"> 
         <productName>Doll</productName> 
         <Color>Green</Color> 
      </Product> 
      <Product ProductID="2"> 
         <productName>Ball</productName> 
         <Color>White</Color> 
      </Product>       
    </ProductToy>
 </Global> 
```

我拥有的 XSLT 代码如下：

```
<xsl:template match="//Products"> 
    <html> 
        <body> 
            <Products> 
                <xsl:apply-templates select="ProductToy" > 
                <xsl:sort select="@name"/>
                <xsl:apply-templates/> 
            </Products> 
        </body> 
    </html> 
</xsl:template> 

<xsl:template match="Product"> 
    <xsl:element name="product"> 
        <xsl:attribute name="name" select="ProductName/text()" /> 
        <xsl:element name="productID"> 
            <xsl:value-of select="@ProductID" /> 
        </xsl:element> 
    </xsl:element> 
</xsl:template> 
```

我希望输出通过升序返回产品属性名称。但我的排序不起作用，因为它仍然首先显示产品球，然后只显示娃娃。请告知如何使其工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:14:20.900

利用：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>

  <xsl:template match="/Global">
    <html>
      <body>
        <Products>
          <xsl:apply-templates select="//Product">
            <xsl:sort select="productName"/>
          </xsl:apply-templates>
        </Products>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="Product">
    <product name="{productName}">
      <productID>
        <xsl:value-of select="@ProductID"/>
      </productID>
    </product>
  </xsl:template>
</xsl:stylesheet> 
```

输出：

```
<html>
  <body>
    <Products>
      <product name="Ball">
        <productID>2</productID>
      </product>
      <product name="Doll">
        <productID>1</productID>
      </product>
    </Products>
  </body>
</html> 
```

# javascript - 可能是数字正则表达式的 Javascript 搜索字符串？

> ID：13043291
> 
> 赞同：0
> 
> 时间：2012-10-24T05:03:46.327
> 
> 标签：javascript, jquery, string

我有一个字符串

> :21::22::24::99:

我想找到说是否`:22:`在所述字符串中。但是有没有一种方法可以像上面那样搜索一个字符串，以便我想将它与 javascript 匹配，如果有，它是否涉及正则表达式魔术或者还有其他东西？无论哪种方式都不确定该怎么做，如果涉及正则表达式则更是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T05:07:29.850

您可以构建所需的正则表达式：

```
function findNumberInString(num, s) {
    var re = new RegExp(':' + num + ':');
    return re.test(s);
}

var s = ':21::22::24::99';
var n = '22';

findNumberInString(n, s);  // true 
```

或者只是使用匹配（虽然测试对我来说更干净）

```
!!s.match(':' + n + ':');  // true 
```

### 编辑

以上都使用正则表达式，所以小数点（.）会来代表任何字符，所以“4.1”会匹配“461”甚至“4z1”，所以最好使用基于`String.prototype.indexOf`以防万一的方法（除非你*想要*“。”代表任何字符），所以根据 Blender 的评论：

```
function findNumberInString(num, s) {
    return s.indexOf(':' + num + ':') != -1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T05:09:07.420

像这样：

```
aStr = ':21::22::24::99:';
if(aStr.indexOf(':22:') != -1){
    //':22:' exists in aStr
}
else{
    //it doesn't
} 
```

# android - 对于在单独的计算机上创建并通过 SVN 共享的项目，Eclispe 的项目资源管理器中没有显示项目

> ID：13043293
> 
> 赞同：0
> 
> 时间：2012-10-24T05:03:54.380
> 
> 标签：android, eclipse, svn, tortoisesvn

我在 SVN 文件夹中有一个项目，例如 SVN/Android/Project/WorkingDir/Project

提交时，我想我将所有元数据文件夹添加到忽略列表中。然后我在另一台计算机上设置了 SVN 等，并打开了相同的工作区“WorkingDir”，但项目资源管理器中没有显示任何内容。

我检查了过滤器设置等，我尝试从第一个工作区导入首选项，我尝试进入 Import Exisitng 项目（但它没有识别文件夹中的任何内容，即使项目就在那里）。

我查看了 StackOverflow 并遇到了类似下面的问题，但似乎没有一个对我有帮助

[通过 SVN 共享 Android+Eclipse 项目？](https://stackoverflow.com/questions/3166947/androideclipse-project-sharing-via-svn)

我是否需要使用“颠覆性”，例如[SVN 在 Eclipse 中不起作用](https://stackoverflow.com/questions/1798468/svn-not-working-in-eclipse)

也许 .classpath, .project 需要添加到存储库中？看起来他们目前不是。Via：[为什么“找不到要导入的项目”？](https://stackoverflow.com/questions/2638016/why-no-projects-found-to-import)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:24:21.953

好的，同步 .classpath 和 .project 和 project.properties 文件似乎有帮助。

另外我的资源管理器过滤器搞砸了，所以即使这样也没有出现，但我认为 .classpath 和 .project 仍然需要让事情出现。虽然不确定属性。

然后我遇到了这个问题[Android 需要编译器合规级别 5.0 或 6.0。而是找到了“1.7”。请使用 Android 工具 > 修复项目属性](https://stackoverflow.com/questions/7637144/android-requires-compiler-compliance-level-5-0-or-6-0-found-1-7-instead-plea)和解决方案有帮助。

# android - 为什么eclipse不显示ViewHolder？

> ID：13043301
> 
> 赞同：0
> 
> 时间：2012-10-24T05:05:27.437
> 
> 标签：android, view

我编程和处理，`ViewHolder`但是当我输入`ViewHolder holder;`它时出现错误。当我键入`ViewHolder`并使用 Ctrl + Space 时，它​​不像我们键入`View`和用户 Ctrl + Space 那样显示。我使用 ADT 20.0.3

为什么eclipse不显示ViewHolder？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T05:16:50.997

好吧，也许是因为`ViewHolder`它没有包含在 android 库中，只是像`AdapterView`s 类的模式一样使用，尤其是？

# 更新：

不幸的是，您找到了代码片段，它只是说明了在`ViewHolder`没有说明此类的情况下使用 of。它的内容取决于您的列表项内容。例如，如果您`ListView`的列表项带有`TextView`和`ImageView`元素，那么您`ViewHolder`应该如下所示：

```
static class ViewHolder {
   TextView text;
   ImageView image;
} 
```

它在您的自定义适配器类中声明，并且对于加速`ListView`滚动非常有效，因为在创建下一个列表项时 - 当您使用 not null 时`convertView`- 您可以引用`convertView`s 内容`ViewHolder`，通常是`convertView`.

# php - 从 XSLX 自动导入 Mysql

> ID：13043304
> 
> 赞同：0
> 
> 时间：2012-10-24T05:05:34.117
> 
> 标签：php, mysql, database, import

我有每月要添加的数据，每个月我必须导入 30 多个 XSLX！当我使用 Navicat 时，我必须设置 xslx 列与 mysql 表列的关系，并且我反复这样做！这是在浪费我的时间......我想知道我可以使用 PHP 或 Navicat 或其他任何东西自动从 xlsx 导入到 MYSQL 吗？请帮我。

* * *

已解决：我正在使用 SimpleXLSX，它更快更高效。非常推荐给大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:56:14.840

您可以编写简单的 Perl 脚本来执行以下操作：

1.  [使用DBD::Excel](http://search.cpan.org/perldoc?DBD%3a%3aExcel)驱动程序打开您的 Excel 文件进行读取。
2.  [使用DBD::mysql](http://search.cpan.org/perldoc?DBD%3a%3amysql)驱动程序打开 MySQL 服务器连接。
3.  使用 SELECT 从 Excel 读取数据并使用 INSERT 将数据插入 MySQL。
4.  利润！:-)

要使其在 Windows 上运行，您应该安装以下免费软件：

[来自http://activestate.com/perl](http://activestate.com/perl)的Activestate Perl ，然后是 DBD::mysql 和 DBD::Excel，如下所示：

```
ppm install DBD::Excel
ppm install DBD::mysql 
```

最后，您需要编写 Perl 脚本。如果您按照上面链接上的文档进行操作，应该不会很困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T06:32:10.453

尝试dbForge Studio for MySQL 中的[数据导入](http://www.devart.com/dbforge/mysql/studio/data-export-import.html)工具。

自定义数据导入一次并保存模板文件（导入选项、字段映射等），然后多次使用。也可以在命令行模式下使用数据导入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T06:27:03.043

我会选择[PHPExcel](http://phpexcel.codeplex.com/) 提供了很好的示例和文档。

# c++ - C++ 堆栈溢出错误

> ID：13043309
> 
> 赞同：1
> 
> 时间：2012-10-24T05:06:05.710
> 
> 标签：c++, stack-overflow

我试图让自己习惯在 C++ 中使用动态数组，现在我已经第十次陷入困境。该程序编译得很好，但是在接受输入后它给出了堆栈溢出错误，并且我提供了删除构造函数中的堆的功能，我假设我有一个未启动的变量，但我真的找不到它。希望大家帮我看看。这是代码：

```
#include<string>
#include<cmath>
#include<sstream>
using namespace std;
#include"Calc.h"
#include<iostream>
using namespace std;

Calc::Calc(int a, int*b){
length=a;
ar=b;
AR =new int*[length];

for (int i=0; i<length;i++){
    AR[i] = new int [ar[i]]();
    }

for (int i = 0; i < length; i++)
    delete[] AR[i];
    };

Calc::~Calc(){};

int Calc::solveFor(int m0, int n0){
int ans=0;
if (m0=0) {ans =n0+1; AR[m0][n0]=ans; return n0+1;}
if (n0=0) {ans= solveFor(m0-1,1); AR[m0][n0]=ans;return ans;}
else {ans=solveFor(m0-1, solveFor(m0, n0-1));AR[m0][n0]=ans; return ans;}
};

void Calc::getSolved(){
for(int i=0; i<=length; i++){cout<<endl;
    for (int j=0; j<ar[i]; j++)
        cout<<"ACK ["<<i<<","<<j<<"]="<<AR[i][j]<<"  ";}
    cout<<endl;

}; 
```

运行.cpp：

```
#include<iostream>
#include<string>
#include "Calc.h"

using namespace std;

int main() {
int m;
int n;
int v[6]= {7, 7, 7, 7, 7, 7};
Calc XXX(6, v);
cin>>m;
cin>>n;

XXX.solveFor(m,n);
XXX.getSolved();

  return 0;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T05:08:56.447

我可以看到的一个问题`Calc::solveFor`是您使用赋值运算符代替相等：

```
if (m0=0) 
```

应该

```
if (m0==0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T05:13:07.463

除了上面提到的 =/== 问题之外，您似乎正在递归地计算[Ackermann 函数。](http://en.wikipedia.org/wiki/Ackermann_function)该函数的递归深度增长得太快，无法以这种方式进行：“A(4, 2) 不可能在任何可处理的时间内通过简单的 Ackermann 函数递归应用来计算。”

尝试使用迭代方法，或查看 memoization。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T06:43:06.053

Ackermann 函数的值增长得非常快，因为`m>3`它会溢出`int`，您可以使用它来计算结果。这可能是无限递归的原因。

# javascript - 如何在视频播放器暂停事件期间收到消息？

> ID：13043310
> 
> 赞同：1
> 
> 时间：2012-10-24T05:06:07.917
> 
> 标签：javascript, html, video, dom-events, media

我有一个 html 文件，我想通过视频播放器控制视频播放器的暂停/播放。意味着，当我单击视频播放器中的播放按钮时，它会暂停，并且应该显示一条警告，说明视频已暂停。html checkpause 按钮​​工作正常，现在如何用视频播放器做到这一点？我已经编写了下面的代码，但是没有弹出警报。出了什么问题？

```
<!DOCTYPE html>     
<html>     
<body>          
<center>
<button onclick="enableLoop()" type="button">Enable loop</button>    
<button onclick="disableLoop()" type="button">Disable loop</button>    
<button onclick="checkLoop()" type="button">Check loop status</button>    
<button onclick="checkended()" type="button">Check end status</button>    
<button onclick="checkpause()" type="button">Check pause status</button>    
<br />         
<video id="video" controls="controls" >    
  <source src="http://www.w3schools.com/html5/mov_bbb.mp4" type="video/mp4" >    
  <source src="http://www.w3schools.com/html5/mov_bbb.ogg" type="video/ogg" >    
  Your browser does not support HTML5 video.    
</video>    
</center>    
<script>
var media_events = new Array();
media_events["play"] = 0;
media_events["pause"] = 0;

document._video = document.getElementById("video");
//document._video.autoplay=true;
document._video.load();
//document._video.play();
//alert ("Video started");

function init(){
    alert("at init function");
//init_events();
    //alert("Value of key in init_events is:" + key + "");
    for (key in media_events) { 
    //alert("Value of key in init_events is:" + key + "");
    document._video.addEventListener(key, capture, false);
    }
    var tbody = document.getElementById("events");
    for (key in media_events) { 
        alert("Status of Video is :" + key + "");
    }
}

document.addEventListener("DOMContentLoaded", init, false);

//Media Events.

function init_events() {
    alert("Value of key in init_events is:" + key + "");
    for (key in media_events) { 
    document._video.addEventListener(key, capture, false);
    }
   for (key in media_events) {  
        //var output = document.createElement("");
        //output.textContent += "Key value is:" + key + "";
        alert("Final status of Video is :" + key + "");
    }
}

function capture(event) {
    //alert("At capture func and key value is " + key + "");
    media_events[event.type] = media_events[event.type] + 1;
    alert("Media Event type is" + media_events[event.type] + "");
    for (key in media_events) { 
    alert("At capture func and key value is " + key + "");
    var e = document.getElementById("e_" + key);
    //alert("Value of e is:" + e + "");
    if (e) {
        e.innerHTML = media_events[key];
        if (media_events[key] > 0) {
            e.className = "true";
            alert("Value is " + key + "");
        }
        else{
            alert("Value in else is " + key + "");
            e.className = "false";
            alert("Value is key in 'e' else is " + key + "");
        }
    }
    else{
    alert("Value of key in else is " + key + "");
    }

}
}

function enableLoop()    
  {     
  document._video.loop=true;    
  document._video.load();    
  } 

function disableLoop()    
  {     
  document._video.loop=false;    
  document._video.load();    
  } 

function checkLoop()    
  {     
  alert(document._video.loop);    
  } 

function checkended()    
  {     
  alert(document._video.ended);    
  }

  function checkpause()    
  {     
  if (document._video.paused) { alert("video is in pause"); }
  else{
  alert("Video is not paused");}    
  }

</script> 
</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T22:23:27.047

而不是对“捕获”中触发的事件做出反应，您似乎在循环所有可能的事件并对它们做出反应。

此示例显示了响应不同事件的一种简单、轻量级的方式 - 我建议对其进行修改以跟踪播放/暂停标志[https://gist.github.com/3718414](https://gist.github.com/3718414)

```
function capture(e) {
if (e.type == "pause") {
    document._video.paused = true;
} else if (e.type == "play") {
    document._video.paused = false;
}
    checkpause();
} 
```

# ffmpeg - 使用 ffmpeg/ffprobe 计算破碎电影的实际持续时间

> ID：13043315
> 
> 赞同：3
> 
> 时间：2012-10-24T05:06:19.150
> 
> 标签：ffmpeg, ffprobe

我有一个损坏的视频文件，它的 ffprobe (ffprobe -i movie.mkv) 说它的持续时间约为 2 小时，但该文件仅包含前 8 分钟的视频数据（由 VLC 播放器检查）。

如何使用 ffmpeg 或 ffprobe 获得实际持续时间（8 分钟）？

这是输出：

```
ffprobe version 0.7.13, Copyright (c) 2007-2011 the FFmpeg developers
  built on Aug  1 2012 21:08:35 with clang 3.1 (tags/Apple/clang-318.0.58)
  configuration: --prefix=/opt/local --enable-swscale --enable-avfilter --enable-libmp3lame --enable-libvorbis --enable-libtheora --enable-libdirac --enable-libschroedinger --enable-libopenjpeg --enable-libvpx --enable-libspeex --disable-libopencore-amrnb --disable-libopencore-amrwb --mandir=/opt/local/share/man --enable-shared --enable-pthreads --cc=/usr/bin/clang --arch=x86_64 --enable-yasm --enable-gpl --enable-postproc --enable-libx264 --enable-libxvid
  libavutil    50\. 43\. 0 / 50\. 43\. 0
  libavcodec   52.123\. 0 / 52.123\. 0
  libavformat  52.111\. 0 / 52.111\. 0
  libavdevice  52\.  5\. 0 / 52\.  5\. 0
  libavfilter   1\. 80\. 0 /  1\. 80\. 0
  libswscale    0\. 14\. 1 /  0\. 14\. 1
  libpostproc  51\.  2\. 0 / 51\.  2\. 0
[matroska,webm @ 0x7f93dc01e600] Estimating duration from bitrate, this may be inaccurate
Input #0, matroska,webm, from 'Mission.mkv':
  Duration: 02:12:56.21, start: 0.000000, bitrate: 448 kb/s
    Stream #0.0: Video: mpeg4, yuv420p, 1280x528 [PAR 1:1 DAR 80:33], 23.98 fps, 23.98 tbr, 1k tbn, 23.98 tbc (default)
    Stream #0.1: Audio: ac3, 48000 Hz, 5.1, s16, 448 kb/s (default) 
```

# java - 难以理解霍夫曼树算法

> ID：13043316
> 
> 赞同：0
> 
> 时间：2012-10-24T05:06:24.050
> 
> 标签：java, tree, huffman-code

我正在研究基于频率表的霍夫曼树。频率表是通过计算给定字符串中字符的频率并将相应的项目（字符和频率）放在 LinkedList 中生成的。然后，我需要按照它们的频率顺序将这些项目放在霍夫曼树中。我知道它背后的逻辑是确保每个子树都有左右节点，添加它们的频率，使用它们添加的频率创建一个根节点，将下一个频率分别放在左右树中并重复此过程直到没有更多的频率，并且子树与添加频率的根相连；我遇到的麻烦是弄清楚如何实现代码。

代码相当广泛，所以我宁愿避免发布所有代码，一般布局是我有一个 HuffmanFrequencyTable 类允许我构建表，一个 HuffmanTreeNode 类允许我们创建节点以放置在树中，以及一个帮助我们创建实际树的 HuffmanTree 类。然后，一个编码类输入一个字符串，并使用它创建的 HuffmanFrequencyTable 从该字符串构建树。这是一个家庭作业问题，所以请不要提供解决方案，我只是希望在弄清楚它的代码中的逻辑方面得到一些帮助。

现在，我正在创建一个已放置在树中的字符数组，在表中剩余的不在数组中的字符中找到频率最低的字符，并尝试将它们放在叶子中。当子树中的基本叶子已满时，我试图添加这些值，创建一个节点，然后继续向上树。我为此使用了一个 for 循环。这似乎是正确的开始吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T05:32:31.227

正如 Sajit 所说，您走在正确的道路上。也许你定义了一个额外的类 HuffmannTuple 类似于

```
public class HuffmannTuple{

    public char character;
    public double frequency;

    public HuffmannTuple(char char, double freq){
        character = char;
        frequency = freq;
    }

} 
```

并创建它们的排序列表，以计算平均字长等值。甚至

```
public class HuffmannTriple{

    public char character;
    public double frequency;
    public String code;

    public HuffmannTuple(char char, double freq){
        character = char;
        frequency = freq;
    }

    public void setCode(String c){
        code = c;
    }

} 
```

用于稍后设置相应的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T05:12:06.157

是的。你在正确的轨道上。

对于解码，您使用同一棵树，然后向左或向右遍历，直到到达叶节点，这就是字符。

# javascript - 类似于 Google Chrome 的网站的查找栏

> ID：13043317
> 
> 赞同：0
> 
> 时间：2012-10-24T05:06:27.203
> 
> 标签：javascript, browser, find

你能推荐一个可以像这样的代码吗？我尝试在我的网站上实现谷歌搜索栏，但是当我搜索时，它只是打开谷歌和谷歌在我的网站上缓存的页面，我想要的功能就像谷歌浏览器的这个查找栏，它只会搜索整个页面，例如，当我输入`"A"`结果`285 "A"`时，页面上有。您可能会说我应该只使用浏览器中的内置查找栏，问题是 Firefox 和其他浏览器的查找栏的功能与谷歌浏览器不相似，这就是为什么我正在寻找可以与此类似，可以在其他浏览器上使用。

![在此处输入图像描述](../Images/4f56366be974d812e224dc5fba910455.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:54:05.900

这是可能对您有用的代码。这使用正则表达式来搜索字符串。您可能需要修改 RegEx 和它搜索的 DOM 节点以提高效率。不包括任何突出结果的逻辑。只计算出现次数并显示计数。

*在这里工作演示：http:* [//jsfiddle.net/ZCUvE/](http://jsfiddle.net/ZCUvE/)

**HTML**

```
​&lt;div class="search">
    <input type="text" id="search" value="" placeholder="Search" />
    <span id="results"></span>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**CSS**

```
.search {
    width: 40%;
    background: #999;
    position: fixed;
    right: 0;
    top: 0;
    padding: 8px;
}
#results {
    background: #DDD;
    font-size: 0.9em;
    display: inline-block;
    padding: 1px 3px;
    display: none;
} 
```

**JavaScript**

```
​$("#search").on("keyup", function()​ {
    if(this.value) {
        var results = 0;
        $("body").children().each(function() {
            var re = new RegExp($("#search").val(), "gi");
            var matches = $(this).text().match(re);
            results += matches ? matches.length : 0;
        });
        $("#results").text(results+ " matches").show();
    }
    else {
        $("#results").hide();
    }
});​ 
```

这只是一个开始的基本实现。请让我知道这对你有没有用。

# c# - 通过计时器显示两个标签一秒钟

> ID：13043322
> 
> 赞同：1
> 
> 时间：2012-10-24T05:07:13.113
> 
> 标签：c#, timer, label, visible

我正在用 C# 制作一个小游戏，当分数为 100 时，我希望两个标签显示一秒钟，然后它们需要再次不可见。

目前我在Form1中：

```
void startTimer(){
 if (snakeScoreLabel.Text == "100"){
  timerWIN.Start();
 }
}

private void timerWIN_Tick(object sender, EventArgs e)
{
  int timerTick = 1;
  if (timerTick == 1)
  {
    lblWin1.Visible=true;
    lblWin2.Visible=true;
  }
  else if (timerTick == 10)
  {
    lblWin1.Visible = false;
    lblWin2.Visible = false;
    timerWIN.Stop();
  }

  timerTick++;

} 
```

定时器的时间间隔是 1000 毫秒。

问题=标签根本没有显示

计时器对我来说很新，所以我被困在这里：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:36:33.060

尝试这个 ：

```
void startTimer()
{ 
     if (snakeScoreLabel.Text == "100")
     {
      System.Timers.Timer timer = new System.Timers.Timer(1000) { Enabled = true }; 
      timer.Elapsed += (sender, args) => 
        { 
           lblWin1.Visible=true;
           timer.Dispose(); 
        }; 
     }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T06:26:51.410

尝试多线程 System.Threading.Timer ：

```
public int TimerTick = 0;
        private System.Threading.Timer _timer;
        public void StartTimer()
        {
            label1.Visible = true;
            label2.Visible = true;
            _timer = new System.Threading.Timer(x =>
                                                    {
                                                        if (TimerTick == 10)
                                                        {
                                                            Invoke((Action) (() =>
                                                                                 {
                                                                                     label1.Visible = false;
                                                                                     label2.Visible = false;
                                                                                 }));
                                                            _timer.Dispose();
                                                            TimerTick = 0;
                                                        }
                                                        else
                                                        {
                                                            TimerTick++;
                                                        }

                                                    }, null, 0, 1000);

        } 
```

# facebook - 在应用生成的图像中包含字幕

> ID：13043325
> 
> 赞同：0
> 
> 时间：2012-10-24T05:07:50.120
> 
> 标签：facebook, facebook-graph-api, policy, x-facebook-platform

我对 Facebook 的政策有疑问。据称：

> 四。应用程序集成点
> 
> ......
> 
> 1.  您不得预先填写与以下产品关联的任何字段，除非用户在工作流程的早期手动生成内容：流故事（Facebook.streamPublish 和 FB.Connect.streamPublish 的 user_message 参数，以及流的 message 参数。发布）、照片（标题）、视频（描述）、注释（标题和内容）、链接（评论）和 Jabber/XMPP。
> 
> .....来源：[https ://developers.facebook.com/policy/](https://developers.facebook.com/policy/)

从[示例和解释页面](https://developers.facebook.com/docs/guides/policy/examples_and_explanations/photos/)中，它对照片说以下内容：

> 除非用户在工作流程的早期手动生成内容，否则不得预先填写照片说明。这些字段旨在让用户表达自己。预先填写这些字段会削弱用户语音的真实性。

![](../Images/e7626051144efea566d48ffc7a58f72a.png)

所以，我的问题是：我见过 99% 的应用程序（我使用的），是自动填充照片的标题字段，比如：`You can try it by visiting here: http://www.apps.blahblah.com/appname`

这不违反脸书政策吗？或者他们没有被标记，因为他们使用的是扩展权限（`publish_stream`）而不是`post_actions`？

如果这两个权限都不允许，那么我的下一个问题是，我们如何告诉查看照片的用户、应用程序的链接，以便这些观众也可以尝试应用程序？

此外，如果可能的话，我希望看到将在工作流中生成的标题的一个小示例，如政策中所述：`...You must not pre-fill any of the fields associated with the following products, unless the user manually generated the content earlier in the workflow...`.

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:34:24.873

这违反了政策，但许多应用程序仍然这样做。

我认为折衷方案是让用户输入他们自己的消息，然后在发布之前在其末尾*附加一个小链接。*

至于这个例子，你到底想知道/看到什么？您让用户通过文本字段/输入框/任何内容输入消息，并在发布图像时将其设置为消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-12T04:14:16.150

目前是禁止的。用户应填写整个标题文本。也禁止向其添加任何内容。

您可以在此处观看有关预填的 Facebook 政策视频： [https ://developers.facebook.com/docs/apps/review/prefill](https://developers.facebook.com/docs/apps/review/prefill)

# c# - SQL Query 接受一个有效的参数 C#

> ID：13043326
> 
> 赞同：0
> 
> 时间：2012-10-24T05:08:00.803
> 
> 标签：c#, sql, visual-studio-2010, arguments

我创建了一个数据库，并使用 Visual Studio C# 在网格视图中显示了数据。我正在尝试编写一个查询方法，该方法将搜索员工的姓名并返回与该姓名相似的所有结果。

```
SELECT personID, name, address, phoneNumer, age FROM dbo.person WHERE name Like @name 
```

对此的任何建议/帮助将不胜感激。我似乎找不到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T05:29:58.910

LIKE 子句使用通配符代替字母。最常用的通配符之一是 % ，意思是“任何东西都可以进入这里”，所以当你的 LIKE 子句看起来像这样时：

```
SELECT personID, name, address, phoneNumer, age FROM dbo.person WHERE name Like 'Tina%' 
```

它将检索名称以 Tina 开头的所有记录，而这个：

```
SELECT personID, name, address, phoneNumer, age FROM dbo.person WHERE name Like '%Tina%' 
```

这将检索在任何地方都有 Tina 的所有记录。我相信默认情况下这是不区分大小写的，除非您更改数据库的排序规则。

因此，除非您想查找*完全*匹配，否则请让您的 @name 参数中的值在某处包含通配符。

# c - 正确处理 24 小时制

> ID：13043329
> 
> 赞同：0
> 
> 时间：2012-10-24T05:08:16.737
> 
> 标签：c

我正在编写一个 C 程序来获取一个以 24 小时格式表示一天中某个时间的值，以及一个类似格式（正或负）的持续时间。该程序应计算持续时间后的 24 小时时间（即开始 + 持续时间 = 结束）。例如，1345 和 345 将输出 1730。

但是，我不知道如何处理不正确的输入。例如，不应接受 2372 或 2520 之类的值。同样，如果我有（例如）100 和 -200，我应该得到 2300 作为输出而不是 -100。简而言之，我知道前两个数字应该是mod 24，后两个数字应该是mod 60，但是我不知道如何将这些操作应用于输入。任何人都可以提供有关我如何做到这一点的任何提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:15:07.513

将输入读取为`int`，将分钟与小时分开并检查它们：

```
int tm, h, m, is_negative = 0;
scanf("%d", &tm);

if (tm < 0) {
    is_negative = 1;
    tm = -tm;
}

m = tm % 100; // separates the two last digits
h = tm / 100; // excludes the two last digits

if (m > 59) {
    handle_error();
}

if (h > 23) {
    handle_error();
} 
```

# factory-pattern - 这是有效的工厂模式用法吗？

> ID：13043331
> 
> 赞同：1
> 
> 时间：2012-10-24T05:08:45.190
> 
> 标签：factory-pattern

无论使用哪个 DBMS，我都为 Paging 数据列表创建了**PageFactory类。**

但我不确定这是有效的工厂模式还是有问题。

如果有更好的方法，你能告诉我吗？

```
package com.tource.cms.common.database.paging;

import com.tource.cms.common.environment.EnvironmentVariables;

public class PageFactory {

    private static final String DEFAULT_DATABASE_TYPE = getDefaultDatabaseType();

    public static Page createPage(int totalRow, int currPage, int blockRow, int blockPage) {

        if("mysql".equals(DEFAULT_DATABASE_TYPE)) 
            return new MysqlPageCalculator(totalRow, currPage, blockRow, blockPage).getPage();
        else if("oracle".equals(DEFAULT_DATABASE_TYPE))
            return new OraclePageCalculator(totalRow, currPage, blockRow, blockPage).getPage();
        else {
            try {
                throw new UnsupportedDatabaseException();
            } catch (UnsupportedDatabaseException e) {
                e.printStackTrace();
                return null;
            }
        }

    }

    /** getting DBMS type from cached Memory */
    private static String getDefaultDatabaseType() {
        return EnvironmentVariables.get("cms.jdbc.databaseType").toLowerCase();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:54:20.317

只要 MysqlPageCalculator 和 OraclePageCalculator 实现**相同的接口**，或者相同的超类，比方说 PageCalculator，你就正确地实现了抽象工厂模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T06:05:07.307

由于您已将页面的创建过程提取到一个独立的类中，而不是关键字“新”。所以是的，这是一个简单工厂模式。

# ffmpeg - 尝试使用 ffmpeg 将带图像的 mp3 转换为 mp4 时出错

> ID：13043334
> 
> 赞同：2
> 
> 时间：2012-10-24T05:09:06.283
> 
> 标签：ffmpeg, mp3, mp4

mp3 中有一张图片，可能是一些专辑图片。当我使用 ffmpeg 将其转换为 mp4 时，它出错了。但是，如果我转换没有图像的 mp3，它会成功。

我的命令是这样的：

```
ffmpeg -i input.mp3 output.mp4 
```

这是错误：

```
Stream mapping:
  Stream #0:1 -> #0:0 (mjpeg -> mpeg4)
  Stream #0:0 -> #0:1 (mp3 -> aac)
Error while opening encoder for output stream #0:0 - maybe incorrect parameters such as bit_rate, rate, width or height 
```

这是所有控制台输出：

```
ellodeiMac:mine ello$ ffmpeg -frames 0 -i 4.mp3 -y test.mp4
ffmpeg version 0.11.2 Copyright (c) 2000-2012 the FFmpeg developers
  built on Oct 24 2012 12:21:13 with llvm_gcc 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.9.00)
  configuration: --disable-yasm
  libavutil      51\. 54.100 / 51\. 54.100
  libavcodec     54\. 23.100 / 54\. 23.100
  libavformat    54\.  6.100 / 54\.  6.100
  libavdevice    54\.  0.100 / 54\.  0.100
  libavfilter     2\. 77.100 /  2\. 77.100
  libswscale      2\.  1.100 /  2\.  1.100
  libswresample   0\. 15.100 /  0\. 15.100
[mp3 @ 0x7fa12301ae00] max_analyze_duration 5000000 reached at 5015510
Input #0, mp3, from '4.mp3':
  Metadata:
    artist          : 贵族乐团
    album           : 美声天籁
    title           : 肖邦离别曲
    Tagging time    : 2012-09-18T08:12:10
  Duration: 00:04:01.44, start: 0.000000, bitrate: 129 kb/s
    Stream #0:0: Audio: mp3, 44100 Hz, stereo, s16, 128 kb/s
    Stream #0:1: Video: mjpeg, yuvj420p, 240x240 [SAR 1:1 DAR 1:1], 90k tbr, 90k tbn, 90k tbc
    Metadata:
      title           : e
      comment         : Cover (front)
[buffer @ 0x109115780] w:240 h:240 pixfmt:yuvj420p tb:1/90000 sar:1/1 sws_param:flags=2
[buffersink @ 0x109133720] No opaque field provided
[format @ 0x1091338e0] auto-inserting filter 'auto-inserted scaler 0' between the filter 'src' and the filter 'format'
[scale @ 0x109133bc0] w:240 h:240 fmt:yuvj420p sar:1/1 -> w:240 h:240 fmt:yuv420p sar:1/1 flags:0x4
[mp4 @ 0x7fa123035c00] Frame rate very high for a muxer not efficiently supporting it.
Please consider specifying a lower framerate, a different muxer or -vsync 2
[aformat @ 0x109136ec0] auto-inserting filter 'auto-inserted resampler 0' between the filter 'src' and the filter 'aformat'
[aresample @ 0x1091370c0] chl:stereo fmt:s16 r:44100Hz -> chl:stereo fmt:flt r:44100Hz
[mpeg4 @ 0x7fa12303be00] timebase 1/90000 not supported by MPEG 4 standard, the maximum 
admitted value for the timebase denominator is 65535
Output #0, mp4, to 'test.mp4':
  Metadata:
    artist          : 贵族乐团
    album           : 美声天籁
    title           : 肖邦离别曲
    Tagging time    : 2012-09-18T08:12:10
    Stream #0:0: Video: mpeg4, yuv420p, 240x240 [SAR 1:1 DAR 1:1], q=2-31, 200 kb/s, 90k tbn, 90k tbc
    Metadata:
      title           : e
      comment         : Cover (front)
    Stream #0:1: Audio: none, 44100 Hz, stereo, flt, 128 kb/s
Stream mapping:
  Stream #0:1 -> #0:0 (mjpeg -> mpeg4)
  Stream #0:0 -> #0:1 (mp3 -> aac)
Error while opening encoder for output stream #0:0 - maybe incorrect parameters such as bit_rate, rate, width or height 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:01:44.437

用于`-vn`删除视频流。

```
ffmpeg -i input.mp3 -vn output.mp4 
```

# wpf - 数据绑定不适用于 Image UriSource

> ID：13043339
> 
> 赞同：0
> 
> 时间：2012-10-24T05:09:39.160
> 
> 标签：wpf

我在窗口中有一张图片

```
 <Image   Source="{Binding Path=MYImage, Converter={StaticResource ResourceKey=imageConverter}}" /> 
```

我也尝试过使用值转换器：

```
 public  class ImageConverter : IValueConverter
{
    public object Convert(object value, Type targetType,
                          object parameter, CultureInfo culture)
    {
        try
        {
            return new BitmapImage(new Uri((string)value));
        }
        catch
        {
            return new BitmapImage();
        }
    }

    public object ConvertBack(object value, Type targetType,
                              object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

并为它创建了一个依赖属性。

```
 public string MYImage
    {
        get { return (string)GetValue(MYImageProperty); }
        set { SetValue(MYImageProperty, value); }
    }
    public static readonly DependencyProperty MYImageProperty=DependencyProperty.Register("PickerImage",typeof(string),typeof(MYClass),new PropertyMetadata("/MYProject;component/pic.png")); 
```

但是当我使用它时，不要显示图像！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:26:46.490

您不必转换源。

你可以像这样绑定一个字符串：

```
"/My.Namespace;component/Resources/thatsMyImage.png" 
```

xml:

```
<Image Source="{Binding Path=MYImage}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T21:11:41.493

这就是我在我的应用程序中解决问题的方式。

1.  我的应用程序有很多解决方案，每个解决方案都有很多项目。
2.  我正在使用 WPF 在 VS 2012 上运行 .NET 4.5。
3.  我的应用结构是：

    我的应用程序

    *   核心解决方案

        -项目A1

        -资源

        -图片

        ```
         warning.ico (Build action set to Resource)
          information.ico (Build action set to Resource)
          error.ico (Build action set to Resource) 
        ```

        +项目A2

    *   个人数据库解决方案

        +项目B1

        +项目B2

4.  我在 CoreSolution 的 ProjectA1 项目中添加了图像（实际图像而不是链接）。我没有更改任何图像的构建操作。编译项目得到ProjectA1.dll。

5.  在 ProjectB2 的 PersonDatabaseSolution 中，我使用以下代码在后面的代码中引用 error.ico：

    ```
     private ImageSource _myImage
        public ImageSource MyImage
        {
         get
         {
          if(_myImage==null)
          {
           uriLoc=new Uri("pack://application:,,,/CoreSolution.ProjectA1;component/Resources/Images/error.ico", UriKInd.Absolute);
           BitmapImage bmImage = new BitmapImage();
           bmImage.BeginInit();
           bmImage.UriSource = uriLoc;
           bmImage.EndInit();
           _myImage=bmImage;
          }
          return _myImage;
         }
        } 
    ```

6.  MyImage 属性绑定在 xaml 中：

    ```
     <Image Source="{Binding Path=MyImage}"/> 
    ```

到目前为止，这对我有用。希望它也对其他人有所帮助。

谢谢， RDV

# delphi - 如何将文本作为我的拖动光标？

> ID：13043343
> 
> 赞同：4
> 
> 时间：2012-10-24T05:10:02.213
> 
> 标签：delphi

在两个组件之间拖放文本时，是否有一种简单的方法可以将我拖动的文本显示为拖动光标？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T07:45:53.017

要从列表框中拖动项目，并与拖动光标一起显示其文本表示：

```
type
  TTextDragObject = class(TDragControlObjectEx)
  private
    FDragImages: TDragImageList;
    FText: String;
  protected
    function GetDragImages: TDragImageList; override;
  end;

{ TTextDragObject }

function TTextDragObject.GetDragImages: TDragImageList;
var
  Bmp: TBitmap;
begin
  if FDragImages = nil then
  begin
    FDragImages := TDragImageList.Create(Control);
    Bmp := TBitmap.Create;
    try
      Bmp.Width := Bmp.Canvas.TextWidth(FText);
      Bmp.Height := Bmp.Canvas.TextHeight(FText);
      Bmp.Canvas.TextOut(0, 0, FText);
      FDragImages.Width := Bmp.Width;
      FDragImages.Height := Bmp.Height;
      FDragImages.SetDragImage(FDragImages.Add(Bmp, nil), 0, 0);
    finally
      Bmp.Free;
    end;
  end;
  Result := FDragImages;
end;

{ TForm1 }

procedure TForm1.FormCreate(Sender: TObject);
begin
  ControlStyle := ControlStyle + [csDisplayDragImage];
  ListBox1.ControlStyle := ListBox1.ControlStyle + [csDisplayDragImage];
end;

procedure TForm1.ListBox1StartDrag(Sender: TObject;
  var DragObject: TDragObject);
var
  List: TListbox absolute Sender;
begin
  DragObject := TTextDragObject.Create(List);
  if List.ItemIndex > -1 then
    TTextDragObject(DragObject).FText := List.Items[List.ItemIndex];
end; 
```

# regex - 使用正则表达式在 bash 中搜索和替换

> ID：13043344
> 
> 赞同：211
> 
> 时间：2012-10-24T05:10:06.330
> 
> 标签：regex, bash

我看过这个例子：

```
hello=ho02123ware38384you443d34o3434ingtod38384day
echo ${hello//[0-9]/} 
```

遵循以下语法：`${variable//pattern/replacement}`

不幸的是，该`pattern`字段似乎不支持完整的正则表达式语法（例如，如果我使用`.`or `\s`，它会尝试匹配文字字符）。

如何使用完整的正则表达式语法搜索/替换字符串？

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2012-10-24T05:16:53.663

使用[sed](http://www.gnu.org/software/sed/manual/)：

```
MYVAR=ho02123ware38384you443d34o3434ingtod38384day
echo "$MYVAR" | sed -e 's/[a-zA-Z]/X/g' -e 's/[0-9]/N/g'
# prints XXNNNNNXXXXNNNNNXXXNNNXNNXNNNNXXXXXXNNNNNXXX 
```

请注意，后续`-e`的 ' 是按顺序处理的。此外，`g`表达式的标志将匹配输入中的所有匹配项。

您也可以使用此方法选择您最喜欢的工具，即 perl、awk，例如：

```
echo "$MYVAR" | perl -pe 's/[a-zA-Z]/X/g and s/[0-9]/N/g' 
```

`and`这可能使您可以进行更多创造性的匹配...例如，在上面的片段中，除非第一个表达式匹配（由于惰性求值），否则不会使用数字替换。当然，你有 Perl 的完整语言支持来做你的竞标......

* * *

## 回答 #2

> 赞同：155
> 
> 时间：2014-03-07T21:55:27.707

这实际上**可以**在纯 bash 中完成：

```
hello=ho02123ware38384you443d34o3434ingtod38384day
re='(.*)[0-9]+(.*)'
while [[ $hello =~ $re ]]; do
  hello=${BASH_REMATCH[1]}${BASH_REMATCH[2]}
done
echo "$hello" 
```

...产量...

```
howareyoudoingtodday 
```

* * *

## 回答 #3

> 赞同：121
> 
> 时间：2014-03-07T21:48:36.263

这些示例也可以在 bash 中使用，无需使用 sed：

```
#!/bin/bash
MYVAR=ho02123ware38384you443d34o3434ingtod38384day
MYVAR=${MYVAR//[a-zA-Z]/X} 
echo ${MYVAR//[0-9]/N} 
```

您还可以使用字符类括号表达式

```
#!/bin/bash
MYVAR=ho02123ware38384you443d34o3434ingtod38384day
MYVAR=${MYVAR//[[:alpha:]]/X} 
echo ${MYVAR//[[:digit:]]/N} 
```

输出

```
XXNNNNNXXXXNNNNNXXXNNNXNNXNNNNXXXXXXNNNNNXXX 
```

但是，@Lanaru 想知道的是，如果我正确理解了这个问题，为什么“完整”或 PCRE 扩展`\s\S\w\W\d\D`等不能像 php ruby​​ python 等那样工作。这些扩展来自与 Perl 兼容的正则表达式 (PCRE) 和可能与其他形式的基于 shell 的正则表达式不兼容。

这些不起作用：

```
#!/bin/bash
hello=ho02123ware38384you443d34o3434ingtod38384day
echo ${hello//\d/}

#!/bin/bash
hello=ho02123ware38384you443d34o3434ingtod38384day
echo $hello | sed 's/\d//g' 
```

删除所有文字“d”字符的输出

```
ho02123ware38384you44334o3434ingto38384ay 
```

但以下确实按预期工作

```
#!/bin/bash
hello=ho02123ware38384you443d34o3434ingtod38384day
echo $hello | perl -pe 's/\d//g' 
```

输出

```
howareyoudoingtodday 
```

希望能更清楚地说明问题，但如果您还不感到困惑，为什么不在启用了 REG_ENHANCED 标志的 Mac OS X 上尝试一下：

```
#!/bin/bash
MYVAR=ho02123ware38384you443d34o3434ingtod38384day;
echo $MYVAR | grep -o -E '\d' 
```

在大多数 *nix 版本中，您只会看到以下输出：

```
d
d
d 
```

开心！

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2017-01-05T21:32:18.623

如果您正在重复调用并且关心性能，该测试表明 BASH 方法比分叉到 sed 和任何其他外部进程快约 15 倍。

```
hello=123456789X123456789X123456789X123456789X123456789X123456789X123456789X123456789X123456789X123456789X123456789X

P1=$(date +%s)

for i in {1..10000}
do
   echo $hello | sed s/X//g > /dev/null
done

P2=$(date +%s)
echo $[$P2-$P1]

for i in {1..10000}
do
   echo ${hello//X/} > /dev/null
done

P3=$(date +%s)
echo $[$P3-$P2] 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-08-30T02:25:26.547

使用`[[:digit:]]`（注意双括号）作为模式：

```
$ hello=ho02123ware38384you443d34o3434ingtod38384day
$ echo ${hello//[[:digit:]]/}
howareyoudoingtodday 
```

* * *

只是想总结一下答案（尤其是@nickl-'s [https://stackoverflow.com/a/22261334/2916086](https://stackoverflow.com/a/22261334/2916086)）。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-07-24T01:29:52.273

我知道这是一个古老的线程，但这是我在 Google 上的第一次点击，我想分享以下`resub`我整理的内容，它增加了对多个 $1、$2 等反向引用的支持......

```
#!/usr/bin/env bash

############################################
###  resub - regex substitution in bash  ###
############################################

resub() {
    local match="$1" subst="$2" tmp

    if [[ -z $match ]]; then
        echo "Usage: echo \"some text\" | resub '(.*) (.*)' '\$2 me \${1}time'" >&2
        return 1
    fi

    ### First, convert "$1" to "$BASH_REMATCH[1]" and 'single-quote' for later eval-ing...

    ### Utility function to 'single-quote' a list of strings
    squot() { local a=(); for i in "$@"; do a+=( $(echo \'${i//\'/\'\"\'\"\'}\' )); done; echo "${a[@]}"; }

    tmp=""
    while [[ $subst =~ (.*)\${([0-9]+)}(.*) ]] || [[ $subst =~ (.*)\$([0-9]+)(.*) ]]; do
        tmp="\${BASH_REMATCH[${BASH_REMATCH[2]}]}$(squot "${BASH_REMATCH[3]}")${tmp}"
        subst="${BASH_REMATCH[1]}"
    done
    subst="$(squot "${subst}")${tmp}"

    ### Now start (globally) substituting

    tmp=""
    while read line; do
        counter=0
        while [[ $line =~ $match(.*) ]]; do
            eval tmp='"${tmp}${line%${BASH_REMATCH[0]}}"'"${subst}"
            line="${BASH_REMATCH[$(( ${#BASH_REMATCH[@]} - 1 ))]}"
        done
        echo "${tmp}${line}"
    done
}

resub "$@"

##################
###  EXAMPLES  ###
##################

###  % echo "The quick brown fox jumps quickly over the lazy dog" | resub quick slow
###    The slow brown fox jumps slowly over the lazy dog

###  % echo "The quick brown fox jumps quickly over the lazy dog" | resub 'quick ([^ ]+) fox' 'slow $1 sheep'
###    The slow brown sheep jumps quickly over the lazy dog

###  % animal="sheep"
###  % echo "The quick brown fox 'jumps' quickly over the \"lazy\" \$dog" | resub 'quick ([^ ]+) fox' "\"\$low\" \${1} '$animal'"
###    The "$low" brown 'sheep' 'jumps' quickly over the "lazy" $dog

###  % echo "one two three four five" | resub "one ([^ ]+) three ([^ ]+) five" 'one $2 three $1 five'
###    one four three two five

###  % echo "one two one four five" | resub "one ([^ ]+) " 'XXX $1 '
###    XXX two XXX four five

###  % echo "one two three four five one six three seven eight" | resub "one ([^ ]+) three ([^ ]+) " 'XXX $1 YYY $2 '
###    XXX two YYY four five XXX six YYY seven eight 
```

H/T 致[@Charles Duffy 回复](https://stackoverflow.com/a/22261454/4975723)：`(.*)$match(.*)`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-08-12T14:01:35.363

**设置变量**

```
hello=ho02123ware38384you443d34o3434ingtod38384day 
```

**然后，在 var 上使用正则表达式替换回显**

```
echo ${hello//[[:digit:]]/} 
```

这将打印：

```
howareyoudoingtodday 
```

**额外 - 如果你想要相反的**（获取数字字符）

```
echo ${hello//[![:digit:]]/} 
```

这将打印：

```
021233838444334343438384 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-14T16:43:03.093

此示例在输入`hello ugly world`中搜索正则表达式`bad|ugly`并将其替换为`nice`

```
#!/bin/bash

# THIS FUNCTION NEEDS THREE PARAMETERS
# arg1 = input              Example:  hello ugly world
# arg2 = search regex       Example:  bad|ugly
# arg3 = replace            Example:  nice
function regex_replace()
{
  # $1 = hello ugly world
  # $2 = bad|ugly
  # $3 = nice

  # REGEX
  re="(.*?)($2)(.*)"

  if [[ $1 =~ $re ]]; then
    # if there is a match

    # ${BASH_REMATCH[0]} = hello ugly world
    # ${BASH_REMATCH[1]} = hello 
    # ${BASH_REMATCH[2]} = ugly
    # ${BASH_REMATCH[3]} = world    

    # hello + nice + world
    echo ${BASH_REMATCH[1]}$3${BASH_REMATCH[3]}
  else    
    # if no match return original input  hello ugly world
    echo "$1"
  fi    
}

# prints 'hello nice world'
regex_replace 'hello ugly world' 'bad|ugly' 'nice'

# to save output to a variable
x=$(regex_replace 'hello ugly world' 'bad|ugly' 'nice')
echo "output of replacement is: $x"
exit 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-27T09:11:01.240

你可以使用蟒蛇。这效率不高，但可以使用更灵活的语法完成工作。

## 申请备案

以下 pythonscript 将用“TO”替换“FROM”（但不是“notFrom”）。

**正则表达式_replace.py**

```
import sys
import re

for line in sys.stdin:
    line = re.sub(r'(?<!not)FROM', 'TO', line)
    sys.stdout.write(line) 
```

您可以将其应用于文本文件，例如

```
$ cat test.txt
bla notFROM
FROM FROM
bla bla
FROM bla

bla  notFROM FROM

bla FROM
bla bla

$ cat test.txt | python regex_replace.py
bla notFROM
TO TO
bla bla
TO bla

bla  notFROM TO

bla TO
bla bla 
```

## 应用于变量

```
#!/bin/bash

hello=ho02123ware38384you443d34o3434ingtod38384day
echo $hello

PYTHON_CODE=$(cat <<END
import sys
import re

for line in sys.stdin:
    line = re.sub(r'[0-9]', '', line)
    sys.stdout.write(line)
END
)
echo $hello | python -c "$PYTHON_CODE" 
```

**输出**

```
ho02123ware38384you443d34o3434ingtod38384day
howareyoudoingtodday 
```

# excel - 在 Excel 2010 中动态更改按钮图像

> ID：13043347
> 
> 赞同：0
> 
> 时间：2012-10-24T05:10:15.623
> 
> 标签：excel, c#-4.0, office-interop

我正在使用 XML 创建一个自定义 Excel 功能区，其中有一个包含图像的按钮。我希望能够在按下按钮（如切换）时更改此图像以显示它所处的状态。我有以下 XML 来描述按钮：

```
<button id="MyButton"
            label="MyLabel"
            screentip="Some useful info."
            onAction="MyAction"
            getImage="GetImage"
            size="large"/> 
```

其中`MyAction`方法定义为：

```
public void MyAction(Office.IRibbonControl control)
{
     // Change button image here...
} 
```

有什么方法可以在`MyAction()`方法中更改按钮的图像吗？

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T15:34:16.340

*编辑：对不起，我刚刚意识到这是在 C# 论坛上，我用 VB 编写了函数。您需要我将代码翻译成 C# 吗？请注意，回调行为应该相同。*

我发现更新控件的最简单方法是使控件或整个功能区无效，并通过控件的回调（如 getImage、getVisible、getLabel 等）更新参数我在这里写的内容适用于任何控件的参数（标签，启用，可见，...）

因此，如果您以这种方式在 XML 中定义按钮：

```
<button id="MyButton"
        label="MyLabel"
        onAction="OnAction"
        getImage="GetImage"/> 
```

然后，您可以使用 OnAction 回调以这种方式更新按钮的参数（假设您有一个名为**condition**的布尔变量）：

```
Public Sub OnAction(ByVal control As Office.IRibbonControl)

    // Do your button stuff here

    condition = Not condition

    gui.InvalidateControl(control.Id)

End Sub 
```

然后按钮的回调将被调用，对于 getImage 你可以使用：

```
Public Function GetImage(ByVal control As Office.IRibbonControl) As String

    If condition Then
        Return "MacroPlay"
    Else
        Return "DeclineInvitation"
    End If

End Function 
```

请注意，要使所有这些工作，您需要将功能区存储到**gui**变量中。为此，您需要在 XML 中使用：

```
<customUI xmlns="http://schemas.microsoft.com/office/2006/01/customui" onLoad="OnRibbonLoad"> ... 
```

并在代码中：

```
Public Sub OnRibbonLoad(ByVal ribbon As Office.IRibbonUI)

    gui = ribbon

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T18:11:41.263

```
<button id="MyButton" label="MyLabel" onAction="OnAction" getImage="GetImage"/> 
```

上面的解决方案对我有用。只要确保您没有在您的 customUI xml 节点上使用 loadImage 事件。看起来如果您同时使用 loadImage 和 GetImage 则插件无法加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T07:00:31.523

看起来你是对的。我发现编辑自定义功能区元素外观的唯一方法是使用“功能区（可视化设计器）”而不是 XML。

例如，如果我想更改名为的切换按钮上的图像，`toggleButton1`我可以执行以下操作：

```
public void toggleButton1_Click(object sender, RibbonControlEventArgs e)
{
    toggleButton1.Image = GetImage(toggleButton1.Checked);
} 
```

其中`GetImage`定义为：

```
public Bitmap GetImage(bool pressed)
{      
    return new Bitmap(pressed ? Properties.Resources.img_1 : Properties.Resources.img_2);
} 
```

干杯

# java - 如何在 iOS 中通过客户端使用 Web 服务 java JAX-WS？

> ID：13043350
> 
> 赞同：0
> 
> 时间：2012-10-24T05:10:23.193
> 
> 标签：java, ios

我需要使用使用 Java JAX-WS 创建的 Web 服务，我需要在应用程序 iOS 中创建客户端 Web 服务。但我不知道怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T18:35:25.990

好的，所以我从我的问题中找到了解决方案。首先，我制作了一个 Web 服务 Rest，并为 Web 服务客户端使用了两个库 [JSON 框架](https://github.com/stig/json-framework/downloads)和[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/How-to-use)。

就这些了，希望对大家有所帮助。

# git - Git 签署以前的提交？

> ID：13043357
> 
> 赞同：98
> 
> 时间：2012-10-24T05:11:05.300
> 
> 标签：git, sign, git-sign

我想知道如何签署（`-s`）我过去在 git 中所做的先前提交？

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-03-27T19:22:56.463

要签署先前的提交，请使用 amend 选项：

```
git commit --amend --signoff 
```

编辑：修改只签核最新的提交。签署多个提交，`filter-branch`并`interpret-trailers`按照[vonc](https://stackoverflow.com/users/6309/vonc) et 的建议。人。应该使用。这对我有用。

首先，配置 git 以将令牌替换`sign`为`Signed-off-by`. 这只需执行一次，并且在下一步中需要。

```
git config trailer.sign.key "Signed-off-by" 
```

`git filter-branch`带有开关的命令`--msg-filter`将为每次提交评估一次过滤器。过滤器可以是任何在标准输入上接收提交消息并在标准输出上输出的 shell 命令。您可以编写自己的过滤器，或使用`git interpret-trailers`，这是无能为力的。这是一个示例，它将使用当前用户和电子邮件签署当前分支的最新两次提交：

```
export SIGNOFF="sign: $(git config --get user.name) <$(git config --get user.email)>"
git filter-branch -f --msg-filter \
    "git interpret-trailers --trailer \"$SIGNOFF\"" \
     HEAD~2..HEAD 
```

`--force`注意 1) 修改提交消息会更改提交 ID，这意味着必须使用或更好[的 --force-with-lease](https://blog.developer.atlassian.com/force-with-lease/)强制推送已发布的分支。

注意 2）如果您打算编写自定义脚本，请注意`git filter-branch`将当前目录更改为`<repo>/.git-rewrite/t`. 使用脚本的相对路径通常不起作用。相反，脚本应该在您的`$PATH`或作为绝对路径提供。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-12-09T19:39:57.257

试试这个来重做旧的提交`-S`：

```
git filter-branch -f --commit-filter 'git commit-tree -S "$@"' HEAD 
```

之后，您必须`git push -f`. 但要小心，提交 id 会改变，其他人会变得不同步。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2020-09-14T12:08:05.257

这些天（从[Git 2.13](https://github.com/git/git/blob/master/Documentation/RelNotes/2.13.0.txt)开始）你通常可以做类似的事情

```
git rebase --signoff HEAD~2 
```

为最后 2 次提交添加`Signed-off-by`页脚（在本例中）。

如果您的范围包括根提交，请将`--root`选项添加到`rebase`.

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2019-10-28T22:31:16.613

如果有人仍在寻找一种更好的自动化方式来签署提交。

尝试这个：

```
git rebase --exec 'git commit --amend --no-edit -n -S' -i commit-hash 
```

这将重新设置所有内容，直到提交哈希（X 提交）

然后`git push -f`需要将历史记录的更改推回远程

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2017-06-25T18:03:27.830

对我来说只是修改signof，实际上并没有验证我在github上的提交。

对我有用的解决方案是回去，然后用`-S`

```
git commit --amend -S 
```

此外，如果您检查您的提交是否实际签名，并且您的电子邮件/姓名根本没有附加，请使用此命令

```
git show HEAD --show-signature 
```

**额外提示：** 如果您已经在修改您的提交，您可能希望在其中使用您的真实姓名（请参阅 using `git log`）。您可能正在使用您的 github 句柄名称，这不是必需的。只需要正确的电子邮件，在用户名字段中您应该使用您的全名，github 将使用您的 github 句柄名称正确跟踪它。因此，要更正您的用户名并签署最后一次提交，请使用：

```
git commit --amend --author="FULL NAME <email>" -S 
```

并在未来为用户名设置全名

```
git config --global user.name "FULL NAME" 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2012-10-24T06:03:53.060

考虑签核修改提交消息，用于[`git filter-branch`](http://www.kernel.org/pub/software/scm/git/docs/git-filter-branch.html)实现这一点。

```
git filter-branch --msg-filter \
    "cat - && echo && echo 'Signed-off-by: Dan McGee <email@example.com>'" \
    HEAD 
```

（来自“[`git filter-branch`魔术](http://www.toofishes.net/blog/git-filter-branch-magic/)”的例子）

或者，按照[Curt J. Sampson](https://stackoverflow.com/users/107294/curt-j-sampson)的[建议](https://stackoverflow.com/questions/13043357/git-sign-off-previous-commits/13043757?noredirect=1#comment79068788_13043757)，使用[**`git interpret-trailers`**](https://git-scm.com/docs/git-interpret-trailers)：

```
git config trailer.sign.key "Signed-off-by"
git filter-branch --msg-filter \
    "cat - && echo && git interpret-trailers --trailer 'sign: 'Signed-off-by: Dan McGee <email@example.com>'" \
    HEAD 
```

**警告**：这将更改您现有提交的 SHA1，并且您可能必须强制推送结果，如果您的提交已经被其他人共享，这可能会出现问题。

[vorburger](https://stackoverflow.com/users/421602/vorburger)[在评论中](https://stackoverflow.com/questions/13043357/git-sign-off-previous-commits/13043757?noredirect=1#comment97841586_13043757)添加了一个示例：

> 使用 git 版本 2.20.1，我不得不省略 " `Signed-off-by`" in `--trailer 'sign:`，并这样做：

```
git filter-branch --msg-filter \
  "cat - && echo && git interpret-trailers --trailer 'sign: Michael Vorburger <vorburger@redhat.com>'" \
  HEAD 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2020-03-21T17:13:26.100

`-S`带有标志的交互式变基将完成这项工作。

假设您需要签署最后的**n**次提交（确保签出最新的**n**次提交）。

跑：

```
$ git rebase -S -i HEAD~n

# The `-S` flag is important.
# It tells Git to sign the following commits. 
```

这给出了最后一次`n`提交的列表。

现在，将 要签名的所有提交更改`pick`为前缀。**`edit`**

完成后，关闭编辑器。将打开一个新编辑器，其中包含有关提交的所有内容。

由于提交中不需要更改任何内容，请保存文件并退出编辑器。您还可以在提交消息时更改它。

对其他提交重复此操作。

推送最新历史，`git push remote branch -f`.

## 警告

有一个问题——它可以重写你的提交。

如果您签署一个 4 个月前的提交，它可能会覆盖其日期并使其看起来像是今天创建的。因此，当您想保留提交历史时，不建议这样做。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-07-28T20:08:33.010

我有一个类似的问题。在这里，感谢来自 Gentoo Linux 的 Robin Johnson，这是一个将签名添加到我之前所有未推送提交的技巧：

```
$ git pull && git rebase --gpg-sign --force-rebase origin/master && git push --signed
Already up-to-date.
Current branch master is up to date, rebase forced.
First, rewinding head to replay your work on top of it...
Applying: sci-biology/KING: new package
Applying: dev-lang/yaggo: version bump, fix install procedure
Applying: sci-libs/htslib: version bump
Applying: sci-biology/bcftools: version bump
Applying: sci-biology/samtools: version bump
Applying: sci-biology/libBigWig: new release with io.h renamed to bigWigIO.h
Applying: sci-biology/MaSuRCA: add more URLs to HOMEPAGE
Applying: sci-biology/SPAdes: update comments on bundled dev-libs/boost
Applying: sci-biology/khmer: added a comment how to proceed with src_compile()
Applying: sci-biology/picard: version bump
Applying: sci-biology/ruffus: pint EGIT_REPO_URI to the archive URL of code.google.com
Applying: sci-biology/vcftools: the 0.1.15_pre release was just renamed to 0.1.15 by upstream
Applying: sci-biology/nanopolish: new package
Applying: sci-biology/libBigWig: version bump
Counting objects: 75, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (75/75), done.
Writing objects: 100% (75/75), 14.51 KiB | 0 bytes/s, done.
Total 75 (delta 55), reused 0 (delta 0)
remote: To github.com:gentoo/sci.git
remote:    29c5e3f5d..b37457700  master -> master
To git+ssh://git.gentoo.org/proj/sci.git
   29c5e3f5d..b37457700  master -> master
$ 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2021-08-24T09:23:22.487

不重写历史的解决方法：

1.  创建一个新分支
2.  从旧的与标志合并`--no-commit --no-ff`
3.  `git reset`删除所有提交（**签名**或未**签名**）
4.  `git commit -S -am "commit message"`
5.  **只需一个签名**提交即可推送新分支

```
git status
  ...
  On branch feature/branch_unsigned_commits
  ...
git checkout -b feature/branch_unsigned_commits_take2
git merge --no-commit --no-ff feature/branch_unsigned_commits
git reset
git commit -S -am "commit message"
git push 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-04-15T01:26:07.790

签署最后 X 次提交的快速解决方案。

```
git rebase --signoff @~X 
```

例如，签署最后 10 个提交

```
git rebase --signoff @~10 
```

我发现这对我的情况来说是一个简单的解决方案。来源：[https ://pmhahn.github.io/git-signoff/](https://pmhahn.github.io/git-signoff/)

# python-2.7 - 更新python中的对象列表

> ID：13043358
> 
> 赞同：0
> 
> 时间：2012-10-24T05:11:15.733
> 
> 标签：python-2.7, pygame

我正在尝试在 Python 中实现“图像进化”算法，如下所示：[http ://rogeralsing.com/2008/12/07/genetic-programming-evolution-of-mona-lisa/](http://rogeralsing.com/2008/12/07/genetic-programming-evolution-of-mona-lisa/)

我想知道如何针对目标屏幕编写当前屏幕的有效适应度计算函数。我目前的健身功能使用 pygame.surfarray.array3d(source)，但即使对于小图像，该程序也非常慢。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:50:40.210

`surfarray`使用[numpy](http://docs.scipy.org/doc/numpy/reference/)（或数字）作为后端，这意味着您可以使用 numpy 操作来提高性能。例如，如果您需要计算两个数组之间的异或，而不是计算您可以使用的每个位置的异或：`numpy.bitwise_xor(arr1, arr2, arr_result)`

# python - python类__init__方法会隐式返回None吗？

> ID：13043359
> 
> 赞同：8
> 
> 时间：2012-10-24T05:11:15.910
> 
> 标签：python

我试图在类构造函数（**init**）中返回一个值：

```
class A:
  def __init__(self):
    return 1 
```

但是有一个运行时错误说**init**应该返回 None。如果是这种情况，如何理解：

```
a=A() 
```

其中“a”被分配为类实例？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-24T05:30:40.607

严格来说，这并不是`A.__new__()`在创建实例`a`。

当您定义`class A(object):`（或者`class A:`如果您使用的是 Python3，`class A:`是[已弃用的](https://stackoverflow.com/questions/54867/old-style-and-new-style-classes-in-python)[*旧式*](https://stackoverflow.com/questions/54867/old-style-and-new-style-classes-in-python)类）时，它来自被调用以创建实例`__new__`的继承。`object.__new__()``a`

当`a = A()`被执行时，会发生什么：

1.  `A()`是的简写`A.__call__`
2.  `object.__new__(cls, *args, **kwargs)`其中`cls=A`, 是在创建实例时实际发生的事情`a`。它为新对象分配内存，然后*应该*返回一个新对象（实例）。
3.  *当且仅当*返回新创建的对象时，才会调用`__init__(self)` *将*新创建的对象传递给它以“初始化”该对象。

考虑以下演示：

*   当我们覆盖`__new__`并且不再返回一个对象时，`__init__`将不会被调用：

    ```
    class A(object):

        def __new__(cls, *args, **kwargs):
            print cls, args, kwargs

        def __init__(self):
            self.x = 'init!'
            print self.x

    In : a = A()
    <class '__main__.A'> () {}

    # note that "init!" has not appeared here because __new__ didn't return an
    # new instance 
    ```

*   现在，通过 using 返回一个新实例，`object.__new__`您将看到 after也会被调用：`__new__``__init__`

    ```
    class A(object):

        def __new__(cls, *args, **kwargs):
            print cls, args, kwargs
            return object.__new__(cls, args, kwargs)

        def __init__(self):
            self.x = 'init!'
            print self.x

    In : a = A()
    <class '__main__.A'> () {}
    init! 
    ```

* * *

这是另一个演示来显示差异，请注意，`a`可以在不调用的情况下创建实例`__init__()`：

```
class A(object):
    def __init__(self):
        self.x = "init!"
        print self.x

In : a = object.__new__(A)

In : a
Out: <__main__.A at 0x103466450>

In : a.__dict__
Out: {}

In : aa = A()
init!

In : aa
Out: <__main__.A at 0x1033ddf50>

In : aa.__dict__
Out: {'x': 'init!'} 
```

* * *

## 现在为了好奇（也为了刷新我自己的记忆=]）：

粗略地说，在 Python 中创建新对象有两种主要方法：

### 通过子类化创建新对象（*type* / *class*）：

`class`语句告诉 Python 创建一个新的*类型*/*类*对象（通过子类化现有的*类型*/*类*，例如`object`）：

```
class Hello(object):
    pass
>>> Hello.__class__
<type 'type'> 
```

事实上所有*的类*/*类型*对象都有类型`type`。`type` ( )的类型`type(type)`仍然是类型。

您可以子类化*类型*/*类*对象。

### 通过实例化创建新对象（*实例*）：

您还可以通过实例化现有*类型*对象来创建新对象。这是通过使用`__call__`运算符（简写为`()`）完成的：

```
>>> h = hello()
>>> type(h)
<class '__main__.Hello'>
>>> type(int('1'))
<type 'int'> 
```

**您不能子类化实例对象。**

（请注意，您还可以通过其他方式创建一个新的*实例*`[1,2,3]`对象，例如使用列表运算符，在这种情况下，它会创建一个列表实例）

`type(my_obj)`您可以通过或检查对象的类型`my_object.__class__`。

* * *

## 现在您知道实例对象是如何创建的，但*真正*创建*类型*/*类*对象（允许创建实例对象）的是什么？

事实上，这些对象也是通过实例化创建的，尽管它与前面提到的实例化类型略有不同。

除了`class`语句之外，您还可以使用它 `type(cls_name, parent_class_tuple, attr_dict)`来创建一个新类。例如：

```
type('Hello', (object,), {}) 
```

将创建与`Hello`前面显示的类相同的类。

是什么`type`？输入*元类*。

`type`是一个*元类*，它是类的*类*，即类是元类的实例。的仍然`__class__`是。`type``type`

*所以这里有一张图，显示了metaclass*、*class*、 *instance*之间的关系：

```
 instantiate             instantiate
metaclass   --------------> class   ---------------->    instance
            type.__new__()          object.__new__() 
```

当`type`调用元类来创建一个新类时，类似的流程是：

1.  `type.__call__()`被执行
2.  `type.__new__()`分配内存然后返回一个新的类（一个元类实例），然后调用`type.__init__()`.
3.  `type.__init__()`初始化从步骤 2 传递的新创建的类。

您甚至可以通过子类化创建新的元类`type`：

```
class MyMeta(type):
    def __new__(meta, name, bases, dct):
        # do something
        return super(MyMeta, meta).__new__(meta, name, bases, dct)
    def __init__(cls, name, bases, dct):
        # do something
        super(MyMeta, cls).__init__(name, bases, dct) 
```

然后你可以从这个元类创建一个新类，`MyMeta`就像你做的那样`type`：

```
MyClass = MyMeta('MyClass', (object, ), {'x': 1}) 
```

或者，`__metaclass__`在定义你的类时使用，它与上面显示的效果完全相同：

```
class MyClass(object):
    __metaclass__ = MyMeta
    x = 1 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-24T05:15:37.667

它是这样工作的：

你做：

```
a = A() 
```

`A.__new__()`被调用，并返回类的一个实例`A`。

等效地：

```
a = A.__new__(A) 
```

然后 Python 调用

```
a.__init__() 
```

正如错误消息所说，它不应该返回一个值。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-24T05:19:56.030

如您所知，Python 中的一切都是对象，类也不例外。类`A`是一个具有方法的对象，`__call__(...)`它允许您编写诸如`a = A()`. 在后台，将首先使用静态方法（具有合理的默认实现）`A.__call__`创建一个对象，然后使用适当的构造函数参数调用新对象。`__new__``__init__`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T05:27:09.053

`__init__`应该返回的要求`None`是一个有意识的实现选择，它让您依赖于类类型的对象始终返回类实例类型的对象这一事实。在许多其他语言（例如 C++）中也是如此。

如果以不同的方式实施，它将造成无用的混乱。

# javascript - jquery .css() 返回对象对象？

> ID：13043360
> 
> 赞同：0
> 
> 时间：2012-10-24T05:11:19.283
> 
> 标签：javascript, jquery, css, ajax, object

我有这样的事情：

```
 var windowH = $(window).height();
    var listH = $(".list").height();
    if(windowH > listH){
        $(".list").css({'height': windowH+'px'});   
        alert(windowH);
        alert($(".list").css({'height': windowH+'px'}));
    } 
```

第二个警报给了我`[object Object]`，因此没有插入正确的 css。有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T05:14:24.033

调用`$(el).css(propertyName, value)`返回您正在使用的元素，。

这样您就可以链接功能。

```
$(".list").css(propertyName, value).css(propertyName, value).remove(); // etc etc. 
```

`windowH`很可能是一个数字，`windowH.toString() + 'px'`如果你想要类似`"600px"`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T05:14:27.453

`.css`方法返回 jQuery 对象（用于方法链接），因此警报结果没有错。

而不是使用`.css`，尝试使用`.height`方法。

```
$(".list").height(windowH); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T05:17:52.240

用这个：

```
alert( $(".list").css('height') ); 
```

当您`.css()`使用代码中的键/值对映射调用该方法时，它假定您正在尝试*设置*这些 CSS 属性，并返回您调用它的 jQuery 对象（`alert()`完全正确地显示为`"[object Object]"`）。这就是为什么你可以在`.css({...})`.

如果您`.css()`只使用我上面显示的特定属性的名称进行调用，那么它会返回该属性的值，以便在`alert()`. （请注意，如果您的 jQuery 对象有多个元素，即如果`".list"`匹配多个元素，`.css('height')`则仅返回第一个元素的高度值。）

编辑：请注意，该`.css()`方法中的此行为与其他 jQuery 方法相同，这些方法可用于设置和获取“某物”，如`.val()`, `.html()`,等。当使用*设置*`.prop()`值的参数调用时，这些方法都返回一个 jQuery对象，但是当使用*获取*值的参数调用时，它们都会返回适当的值。

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T05:22:25.717

首先，您必须设置属性，然后提醒适当的值。..

尝试

```
 var windowH = $(window).height();
var listH = $(".list").height();
if(windowH > listH){
    $(".list").css({'height': windowH+'px'});   
    alert(windowH);
    $(".list").css('height', windowH+'px');

    alert(listH);
} 
```**

# hadoop - Hadoop：多个地图任务如何确保它们不竞争资源？

> ID：13043364
> 
> 赞同：0
> 
> 时间：2012-10-24T05:11:43.970
> 
> 标签：hadoop, mapreduce

我将在 Hadoop 中**同时运行 3 个作业**，它们不相关。

其中之一的输入是通过 HTTP，大文件的**下载速度很慢。**

其他是**来自 HDFS**和 S3N 文件系统的输入。

我是在 Hadoop 中构建这种东西的新手。

*   如何优化地图阶段？
*   我希望**磁盘读取**至少在**下载发生的****同时发生**，这似乎是合乎逻辑的。
***   我肯定不希望**所有**大**磁盘操作**都**等待下载**（20 次下载中的每一次可能是一个小时）*   我想我不想同时发生多个大型**磁盘**读取**。****

 **Hadoop 如何处理这个映射/输入/数据采集阶段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T06:15:25.330

在 mapreduce 中，通常所有的 map/reducer 都做同样的工作。

但是您可以通过两种不同的解决方案来实现您的目标：

1.基本上，您应该考虑将您的作业拆分为两个独立的作业，然后以每个节点指定数量的任务启动它们。[https://issues.apache.org/jira/browse/HADOOP-5170](https://issues.apache.org/jira/browse/HADOOP-5170)但此补丁仅适用于 cdh，不适用于基础发行版。

2.另一种选择是实现您自己的输入格式，它将能够对每个节点的不同任务的映射和平衡数量进行编码操作。这可以通过在 InputSplit 中为每个拆分指定主机来完成。**

# .net - 为什么当类继承发生变化时 DataContract 会失败？

> ID：13043365
> 
> 赞同：0
> 
> 时间：2012-10-24T05:11:44.973
> 
> 标签：.net, serialization, datacontract

我有以下课程

```
[DataContract(Name = "TemplateParameter")]
public class TemplateParameter : Mvvm.PropertyChangedBase
{
    #region FIELDS
    private string _key, _description, _defaultValue;
    private TemplateParameterValueType _valueType;
    #endregion

    [DataMember(Name = "Key")]
    public string Key 
    {
        get { return _key; }
        set
        {
            if (value != _key)
            {
                _key = value;
                OnPropertyChanged("Key");
            }
        }
    }

    [DataMember(Name = "Description")]
    public string Description
    {
        get { return _description; }
        set
        {
            if (value != _description)
            {
                _description = value;
                OnPropertyChanged("Description");
            }
        }
    }

    [DataMember(Name = "DefaultValue")]
    public string DefaultValue
    {
        get { return _defaultValue; }
        set
        {
            if (value != _defaultValue)
            {
                _defaultValue = value;
                OnPropertyChanged("DefaultValue");
            }
        }
    }

    [DataMember(Name = "ValueType")]
    public TemplateParameterValueType ValueType
    {
        get { return _valueType; }
        set
        {
            if (value != _valueType)
            {
                _valueType = value;
                OnPropertyChanged("ValueType");
            }
        }
    }

    public TemplateParameter()
    {
        Key = "Parametername";
        Description = "Parameterbeschreibung";
        DefaultValue = "";
        ValueType = TemplateParameterValueType.String;
    }
} 
```

最近添加了**OnPropertyChanged**代码，我将继承更改为从**PropertyChangedBase**派生。

```
[DataContract]
public class PropertyChangedBase : INotifyPropertyChanged
{
    #region INotifyPropertyChanged
    /// <summary>
    /// Raised when a property on this object has a new value.
    /// </summary>
    public event PropertyChangedEventHandler PropertyChanged;

    /// <summary>
    /// Raises this object's PropertyChanged event.
    /// </summary>
    /// <param name="propertyName">The property that has a new value.</param>
    protected virtual void OnPropertyChanged(string propertyName)
    {
        this.VerifyPropertyName(propertyName);

        PropertyChangedEventHandler handler = this.PropertyChanged;
        if (handler != null)
        {
            var e = new PropertyChangedEventArgs(propertyName);
            handler(this, e);
        }
    }
    #endregion

    #region Debugging aids
    /// <summary>
    /// Warns the developer if this object does not have
    /// a public property with the specified name. This 
    /// method does not exist in a Release build.
    /// </summary>
    [Conditional("DEBUG")]
    [DebuggerStepThrough]
    public void VerifyPropertyName(string propertyName)
    {
        // Verify that the property name matches a real,  
        // public, instance property on this object.
        if (TypeDescriptor.GetProperties(this)[propertyName] == null)
        {
            string msg = "Invalid property name: " + propertyName;

            if (this.ThrowOnInvalidPropertyName)
                throw new Exception(msg);
            else
                Debug.Fail(msg);
        }
    }

    /// <summary>
    /// Returns whether an exception is thrown, or if a Debug.Fail() is used
    /// when an invalid property name is passed to the VerifyPropertyName method.
    /// The default value is false, but subclasses used by unit tests might 
    /// override this property's getter to return true.
    /// </summary>
    protected virtual bool ThrowOnInvalidPropertyName { get; private set; }

    #endregion
} 
```

在更改继承之前，该类已作为其他类的组件序列化为文件。更改继承后，我在反序列化时收到以下错误消息：

意外的错误。xyz 行出错。元素 'DefaultValue' ... 出乎意料。需要元素“PropertyChanged”。

我删除了继承并从**PropertyChangedBase**复制了代码，反序列化成功。

我试图了解这里发生了什么。

*   为什么继承会破坏序列化而内联代码不会？
*   为什么继承时需要 PropertyChanged 而内联时不需要？
*   错误消息的真正含义是什么？

**堆**

```
bei System.Runtime.Serialization.XmlObjectSerializerReadContext.ThrowRequiredMemberMissingException(XmlReaderDelegator xmlReader, Int32 memberIndex, Int32 requiredIndex, XmlDictionaryString[] memberNames)
bei System.Runtime.Serialization.XmlObjectSerializerReadContext.GetMemberIndexWithRequiredMembers(XmlReaderDelegator xmlReader, XmlDictionaryString[] memberNames, XmlDictionaryString[] memberNamespaces, Int32 memberIndex, Int32 requiredIndex, ExtensionDataObject extensionData)
bei ReadTemplateParameterFromXml(XmlReaderDelegator , XmlObjectSerializerReadContext , XmlDictionaryString[] , XmlDictionaryString[] )
bei System.Runtime.Serialization.ClassDataContract.ReadXmlValue(XmlReaderDelegator xmlReader, XmlObjectSerializerReadContext context)
bei System.Runtime.Serialization.XmlObjectSerializerReadContext.ReadDataContractValue(DataContract dataContract, XmlReaderDelegator reader)
bei System.Runtime.Serialization.XmlObjectSerializerReadContext.InternalDeserialize(XmlReaderDelegator reader, String name, String ns, Type declaredType, DataContract& dataContract)
bei System.Runtime.Serialization.XmlObjectSerializerReadContextComplex.InternalDeserialize(XmlReaderDelegator xmlReader, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle, String name, String ns)
bei ReadArrayOfTemplateParameterFromXml(XmlReaderDelegator , XmlObjectSerializerReadContext , XmlDictionaryString , XmlDictionaryString , CollectionDataContract )
bei System.Runtime.Serialization.CollectionDataContract.ReadXmlValue(XmlReaderDelegator xmlReader, XmlObjectSerializerReadContext context)
bei System.Runtime.Serialization.XmlObjectSerializerReadContext.ReadDataContractValue(DataContract dataContract, XmlReaderDelegator reader)
bei System.Runtime.Serialization.XmlObjectSerializerReadContext.InternalDeserialize(XmlReaderDelegator reader, String name, String ns, Type declaredType, DataContract& dataContract)
bei System.Runtime.Serialization.XmlObjectSerializerReadContextComplex.InternalDeserialize(XmlReaderDelegator xmlReader, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle, String name, String ns)
bei ReadUnitOfTestFromXml(XmlReaderDelegator , XmlObjectSerializerReadContext , XmlDictionaryString[] , XmlDictionaryString[] )
bei System.Runtime.Serialization.ClassDataContract.ReadXmlValue(XmlReaderDelegator xmlReader, XmlObjectSerializerReadContext context)
bei System.Runtime.Serialization.XmlObjectSerializerReadContext.ReadDataContractValue(DataContract dataContract, XmlReaderDelegator reader)
bei System.Runtime.Serialization.XmlObjectSerializerReadContext.InternalDeserialize(XmlReaderDelegator reader, String name, String ns, Type declaredType, DataContract& dataContract)
bei System.Runtime.Serialization.XmlObjectSerializerReadContextComplex.InternalDeserialize(XmlReaderDelegator xmlReader, Int32 declaredTypeID, RuntimeTypeHandle declaredTypeHandle, String name, String ns)
bei ReadArrayOfBaseModuleFromXml(XmlReaderDelegator , XmlObjectSerializerReadContext , XmlDictionaryString , XmlDictionaryString , CollectionDataContract )
bei System.Runtime.Serialization.CollectionDataContract.ReadXmlValue(XmlReaderDelegator xmlReader, XmlObjectSerializerReadContext context)
bei System.Runtime.Serialization.XmlObjectSerializerReadContext.ReadDataContractValue(DataContract dataContract, XmlReaderDelegator reader)
bei System.Runtime.Serialization.XmlObjectSerializerReadContext.InternalDeserialize(XmlReaderDelegator reader, String name, String ns, Type declaredType, DataContract& dataContract)
bei System.Runtime.Serialization.XmlObjectSerializerReadContextComplex.InternalDeserialize(XmlReaderDelegator xmlReader, Type declaredType, DataContract dataContract, String name, String ns)
bei System.Runtime.Serialization.DataContractSerializer.InternalReadObject(XmlReaderDelegator xmlReader, Boolean verifyObjectName, DataContractResolver dataContractResolver)
bei System.Runtime.Serialization.XmlObjectSerializer.ReadObjectHandleExceptions(XmlReaderDelegator reader, Boolean verifyObjectName, DataContractResolver dataContractResolver)
bei System.Runtime.Serialization.DataContractSerializer.ReadObject(XmlReader reader)
bei Pruef.Net.Model.ModuleManager.LoadModules() in D:\\my_workspaces\\visualstudioprojects\\Pruef.Net\\Pruef.Net\\PruefMvvm\\Model\\ModuleManager.cs:Zeile 630." 
```

# arrays - FORTRAN程序无法将所有数据读入数组，大小限制？

> ID：13043374
> 
> 赞同：0
> 
> 时间：2012-10-24T05:13:57.777
> 
> 标签：arrays, fortran, coredump, bus

我有一个`csv`包含大约 200 万行和大约 150 列数据的文件。总文件大小约为 1.3 GB。那是大约 3 亿个数组成员。

我从一个 350 万行的文件开始，通过反复试验了解到，`FORTRAN`除非数组定义为 390 万或更少，否则它甚至无法编译。400万，没办法。总线错误/核心转储。

所以无论如何，我认为我的 200 万行文件会起作用。我读了几篇关于 2 GB 限制的帖子。但是，当我在读取数据时打印出行号时，在它结束之前我只能达到 250,000 左右。奇怪的是，我有一个几乎相同的文件（使用了 split 命令），并且在退出之前它只达到了 85,000。不知道为什么如此不同，每行字符数相同。

我能做些什么来读取这些数据吗？将所有数据编译数百次将是一个巨大的痛苦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T06:21:04.673

这不是 Fortran 本身的属性，而是您的特定编译器和操作系统的属性。这就是您应该提供该信息的原因。

重新总线错误：很可能数组被放置在堆栈上，并且您的堆栈空间已用完。各种操作系统提供了增加堆栈大小的方法。许多编译器提供选项以便将大型数组放入堆中。您也可以尝试将数组声明为“可分配”并分配它。最后一个建议假设您使用的是 Fortran 95 编译器，而不是 FORTRAN 77 编译器。

还有如何声明用于索引的整数变量。如果程序中的循环超过 2,147,483,647，则需要使用大小超过四个字节的变量。我们只能猜测，因为您没有显示任何源代码。

# c# - 在 C#/XAML/WPF 中，如何仅在单击另一个按钮时才显示一个按钮？

> ID：13043383
> 
> 赞同：1
> 
> 时间：2012-10-24T05:14:44.240
> 
> 标签：c#, .net, wpf, xaml, windows-8

我想知道如何做到这一点。我正在尝试学习如何为 Windows 商店制作 Metro 风格的应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T05:22:27.097

1.  将`Click`事件附加到源按钮
2.  在事件处理程序中标记 `button2.Visibility = Visibility.Visible;'

就如此容易。

# git - bitbucket git push 卡住了

> ID：13043384
> 
> 赞同：5
> 
> 时间：2012-10-24T05:14:51.233
> 
> 标签：git, push, bitbucket

您好刚刚设置了一个新的 bitbucket 帐户并创建了一个 repo。我的本地机器中已经有代码，所以我`git remote add`现在添加了远程使用`git push origin`，它提示我输入 bitbucket 帐户的密码。我输入密码后，它似乎被卡住了。我`git push`以详细模式运行，但输入密码后它似乎被卡住了。

此外，我将我的 ssh 密钥添加到 bitbucket 中，认为如果它是身份验证问题可能有助于解决问题，但它仍然要求我输入密码并在我提供密码后卡住。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2020-01-18T08:16:08.530

对我来说，问题是 IPv4 需要用于 bitbucket - 使用 IPv6 会在尝试建立与 ipv6 地址上的端口 22 的连接时挂起。

要解决此问题 - 编辑您的`/etc/ssh/ssh_config`文件并更改

```
#AddressFamily any 
```

到

```
AddressFamily inet 
```

这迫使 ssh（以及 git）有时使用 ipv4 而不是 ipv6

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T05:53:02.783

> 此外，我将我的 ssh 密钥添加到 bitbucket 认为如果是身份验证问题可能有助于解决问题，但它仍然要求我输入密码

它仅在以下情况下添加密码：

*   它找不到您的公钥/私钥（~/.ssh/id_rsa(.pub)）：检查，如果您在 Windows 上，是否定义了 %HOME%）
*   公钥已被错误地复制到 bitbucket（通常其中包含换行符）
*   您的遥控器 ( `git remote -v show`) 仍配置有 https 地址。

![SSH 密钥](../Images/bc47624d619f814e67882238ec16d77b.png)

查看[BitBucket 为 Git 设置 SSH](https://confluence.atlassian.com/display/BITBUCKET/Set+up+SSH+for+Git)页面，并尝试使用 ssh 地址克隆您的存储库。
（注意：对于该帮助页面上的第 5 步，另请参阅“[我的 .bashrc 文件在 Git Bash 启动时未执行（Windows 7）](https://stackoverflow.com/questions/11918285/my-bashrc-file-not-executed-on-git-bash-startup-windows-7) ”）。

# internet-explorer - Internet Explorer 8 和 CSS3

> ID：13043387
> 
> 赞同：1
> 
> 时间：2012-10-24T05:15:23.087
> 
> 标签：internet-explorer, css, internet-explorer-8, cross-browser

**在不使用**CSS3pie、normalize 等插件的情况下，如何使您的网站 CSS3 与 IE9 之前的 Internet Explorer 版本兼容？

CSS3Pie 是我使用的一个很棒的工具，但它变得不方便，因为我有一些带有边框左半径的元素不适用于插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T06:49:29.857

IE8 不支持 CSS3。你已经知道了。如果你正在寻找一种在 IE8 中获得 CSS 圆角而不需要某种 hack 的方法，那么你会失望的。

解决方案：

1.  使用您已经知道的“渐进增强”技术，例如 CSS3Pie。几乎所有这些都是基于 Javascript 的 hack，而且没有一个是完美的。你已经知道 CSS3Pie 的问题了。您讨论的问题是一个相对较小的问题，并且很容易解决；如果您不愿意解决这个问题，那么您就不可能有更好的选择。

    可以在此处找到这些 polyfill 的相当全面的列表：[https ://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)

2.  优雅的退化。这基本上意味着接受旧浏览器缺少某些功能，并编写您的网站，以便如果缺少这些功能，它仍然可以工作；也许没有那么好，但可以使用。在 的情况下`border-radius`，这很容易：只需接受它在 IE8 中不起作用。圆角很不错，但如果没有圆角，网站就不会被破坏。

3.  镀铬框架。这是谷歌为 IE 编写的插件，允许它使用与 Chrome 浏览器相同的渲染引擎来渲染页面。这是对浏览器内部的重大破解，但它确实运行良好；不再担心那些缺失的功能和渲染故障。但是，它需要最终用户安装插件，所以虽然它作为一个选项很好，并且您可以指定它是否可用，但如果您可以控制最终用户的系统，您只能真正依赖它 -例如，在公司网络中，您可以确保它已安装在所有机器上。

这些是你的选择。

# sql - 对列进行排序

> ID：13043392
> 
> 赞同：0
> 
> 时间：2012-10-24T05:16:00.880
> 
> 标签：sql, teradata

使用 Teradata，我的数据在一列中有 6 个选项，我希望将六个选项中的每一个都放在一个单独的列中，并计算它有多少条目，目前我有 6 个单独的`select`语句和一个在底部选择将它们连接在一起，无论如何可以在一个语句中得到它

输出如下所示：

```
AgentName|emp_number|Manager_Empl_No| Hardware/Fault| Customer Experience| Prefer another Provider| Coverage/Serviceability| Costs Service| No Longer Required |Customer Usage
name 1| xxxx| xxxx |15| 27| 10| 3| 7| 22| 6
Name 2| xxxx| xxxx |19 |6 |29 |22 |10 |42 |4 
```

我的代码是....

```
--- Hardware fault --- 
create volatile table hardware as
(
select
CSR_FirstName||' '||CSR_LastName as AgentName
,emp_number
,Manager_empl_no
,count(service) as "Hardware/Fault"
from ipshare.ORR_retention_database a
full join RMOIDS
on emp_number = Employee_No
where date_created between (sel start_date from startend_date) and (sel end_date from startend_date)
and referred_product = 'Mobile'
and decline_reason1 = 'Hardware/Fault'
group by (AgentName,emp_number,Manager_empl_no,decline_reason1)
qualify RANK() over (partition by AgentName order by AgentName DESC)=1
) 
with data on commit preserve rows;
sel * from hardware

--- Customer Experience --- 
create volatile table custex as
(
select
CSR_FirstName||' '||CSR_LastName as AgentName
,emp_number
,Manager_empl_no
,count(service) as "Customer Experience"
from ipshare.ORR_retention_database a
full join RMOIDS
on emp_number = Employee_No
where date_created between (sel start_date from startend_date) and (sel end_date from startend_date)
and referred_product = 'Mobile'
and decline_reason1 = 'Customer Experience'
group by (AgentName,emp_number,Manager_empl_no,decline_reason1)
qualify RANK() over (partition by AgentName order by AgentName DESC)=1
) 
with data on commit preserve rows;

---Prefer another Provider
create volatile table pap as
(
select
CSR_FirstName||' '||CSR_LastName as AgentName
,emp_number
,Manager_empl_no
,count(service) as "Prefer another Provider"
from ipshare.ORR_retention_database a
full join RMOIDS
on emp_number = Employee_No
where date_created between (sel start_date from startend_date) and (sel end_date from startend_date)
and referred_product = 'Mobile'
and decline_reason1 = 'Prefer another Provider'
group by (AgentName,emp_number,Manager_empl_no,decline_reason1)
qualify RANK() over (partition by AgentName order by AgentName DESC)=1
) 
with data on commit preserve rows;

----Coverage/Serviceability
create volatile table coverage as
(
select
CSR_FirstName||' '||CSR_LastName as AgentName
,emp_number
,Manager_empl_no
,count(service) as "Coverage/Serviceability"
from ipshare.ORR_retention_database a
full join RMOIDS
on emp_number = Employee_No
where date_created between (sel start_date from startend_date) and (sel end_date from startend_date)
and referred_product = 'Mobile'
and decline_reason1 = 'Coverage/Serviceability'
group by (AgentName,emp_number,Manager_empl_no,decline_reason1)
qualify RANK() over (partition by AgentName order by AgentName DESC)=1
) 
with data on commit preserve rows;

---Cost

create volatile table cost as
(
select
CSR_FirstName||' '||CSR_LastName as AgentName
,emp_number
,Manager_empl_no
,count(service) as "Costs"
from ipshare.ORR_retention_database a
full join RMOIDS
on emp_number = Employee_No
where date_created between (sel start_date from startend_date) and (sel end_date from startend_date)
and referred_product = 'Mobile'
and decline_reason1 = 'Costs'
group by (AgentName,emp_number,Manager_empl_no,decline_reason1)
qualify RANK() over (partition by AgentName order by AgentName DESC)=1
) 
with data on commit preserve rows;

--Service no longer required
create volatile table snlr as
(
select
CSR_FirstName||' '||CSR_LastName as AgentName
,emp_number
,Manager_empl_no
,count(service) as "Service No Longer Required"
from ipshare.ORR_retention_database a
full join RMOIDS
on emp_number = Employee_No
where date_created between (sel start_date from startend_date) and (sel end_date from startend_date)
and referred_product = 'Mobile'
and decline_reason1 = 'Service No Longer Required'
group by (AgentName,emp_number,Manager_empl_no,decline_reason1)
qualify RANK() over (partition by AgentName order by AgentName DESC)=1
) 
with data on commit preserve rows;

--Customer Usage
create volatile table usage as
(
select
CSR_FirstName||' '||CSR_LastName as AgentName
,emp_number
,Manager_empl_no
,count(service) as "Customer Usage"
from ipshare.ORR_retention_database a
full join RMOIDS
on emp_number = Employee_No
where date_created between (sel start_date from startend_date) and (sel end_date from startend_date)
and referred_product = 'Mobile'
and decline_reason1 = 'Customer Usage'
group by (AgentName,emp_number,Manager_empl_no,decline_reason1)
qualify RANK() over (partition by AgentName order by AgentName DESC)=1
)
with data on commit preserve rows;

sel a.* 
,b."Customer Experience"
,c."Prefer another Provider"
,d."Coverage/Serviceability"
,e."Costs"
,f."Service No Longer Required"
,g."Customer Usage"
from hardware a
inner join custex b
on a.emp_number = b.emp_number
inner join pap c
on a.emp_number = c.emp_number
inner join coverage d
on a.emp_number = d.emp_number
inner join cost e
on a.emp_number = e.emp_number
inner join snlr f
on a.emp_number = f.emp_number
inner join usage g
on a.emp_number = g.emp_number 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:02:24.140

我还没有验证你想要完成的 SQL 的其余部分，但我相信你可以通过在聚合函数中使用 CASE 语句来消除多个易失性表并针对源表进行传递。

```
SELECT CSR_FirstName||' '||CSR_LastName as AgentName
     , emp_number
     , Manager_empl_no
     , COUNT(CASE WHEN Decline_Reason1 = 'Customer Experience' 
                  THEN Service 
                  ELSE NULL 
             END) AS CustomerExperinceCount_
     , COUNT(CASE WHEN Decline_Reason1 = /* {Next Reason} */
                  THEN Service
                  ELSE NULL
             END) AS NextReasonCount_
  FROM ipshare.ORR_retention_database a
  FULL JOIN
       RMOIDS
    ON emp_number = Employee_No
 WHERE date_created between (sel start_date from startend_date) 
                        and (sel end_date from startend_date)
   AND referred_product = 'Mobile'
 GROUP BY (AgentName,emp_number,Manager_empl_no,decline_reason1)
QUALIFY RANK() over (partition by AgentName order by AgentName DESC)=1 
```

# css - 如何使最小宽度在 IE7 中起作用？

> ID：13043393
> 
> 赞同：3
> 
> 时间：2012-10-24T05:16:03.540
> 
> 标签：css, cross-browser, internet-explorer-7

如何让 {min-width:100%} 在 IE7 中工作？在 IE8+ 和其他浏览器中运行良好。

我正在使用下拉菜单，其中下拉菜单的宽度应取决于下拉菜单中最长的文本，但不得小于父链接的宽度。所以我在下拉列表中添加了 min-width:100% 。但它适用于其他浏览器，但不适用于 IE7。

我怎样才能使它工作？

**Demo 在这里分叉和使用它。检查这个在 IE7** [http://codepen.io/jitendravyas/pen/AheDs](http://codepen.io/jitendravyas/pen/AheDs)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T09:53:18.440

请检查[这](http://blog.throbs.net/2006/11/17/IE7+And+MinWidth+.aspx)我认为它正是您正在寻找的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T15:32:04.837

试试 Modernizr，它可以在较旧/不太兼容的浏览器中轻松实现很多事情。尝试开发版本，看看它是否可以帮助您，并针对您的特定需求编写您自己的生产版本，以最小化 javascript 库的大小（和速度）。

> Modernizr 是一个 JavaScript 库，可检测用户浏览器中的 HTML5 和 CSS3 功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T14:46:35.080

IE7 不像其他浏览器那样以这种方式运行。它需要`width`在父元素上显式。您*当前的代码*在这里给出了一个`width`：

```
.site-nav .flyout-content{
    border:1px solid #e4e4e3;
    /*  width:100%;*/
    height:100%;
    min-width:100%;
    *width:170px;  <-------------- THIS IS PICKED UP BY IE7
    box-shadow: 8px 6px 10px rgba(65, 65, 65, 0.45);
} 
```

如果您知道`width`最宽的元素，您可以将那里的数字更改为更大的数量，正如[**这个小提琴演示**](http://jsfiddle.net/nvzmq/7/)的那样“有效” （注意：CodePen 示例在 IE7 模式下不适合我，所以我将代码移到了 jsfiddle 。网）。但是，您最好为 IE7 实施一些类似于[**此问题中的解决方案的**](https://stackoverflow.com/questions/5173444/how-can-one-make-a-containers-child-divs-match-the-width-of-the-largest-child-i)javascript 解决方法（基本上与您提出的问题相同）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T05:18:44.127

检查[CSS 兼容性和 Internet Explorer](http://msdn.microsoft.com/en-us/library/cc351024%28VS.85%29.aspx)。通过在文档模式下查看开发人员工具，确保您有适当的文档类型并且玩具未处于 Quirks 模式。

[检查 IE7 和 minWidth](http://blog.throbs.net/2006/11/17/IE7+And+MinWidth+.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-31T04:07:21.267

ie9.js 声称添加了对 min-width 的支持，您可以将其添加到您的源代码中进行测试：

```
<!--[if lt IE 9]>
<script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"></script>
<![endif]--> 
```

[您可以在http://code.google.com/p/ie7-js/](http://code.google.com/p/ie7-js/)阅读有关 ie7.js 项目（包括 ie9.js）的更多信息。

请记住，其他一些 javascript 库，例如 css3 pie 不适用于 ie9.js。

# c# - C#、.NET 和 IoC 与 Ninject：如何预热需要很长时间才能创建的类的实例？

> ID：13043394
> 
> 赞同：0
> 
> 时间：2012-10-24T05:16:31.833
> 
> 标签：c#, .net, dependency-injection, ninject

我的应用程序中有来自 Ninject 的 IOC。有几个类需要大量时间来初始化（一些从数据库或文件中获取的静态数据缓存）。显然，它们需要在处理第一个用户请求之前创建。否则超时的风险很高。Ninject 是否提供了一种方法来告诉内核通过绑定并创建一些绑定？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T06:37:22.590

当您连接您的应用程序时，您可以创建这些实例并使用 WithConstructorArgument 为所有依赖项传递它们。很奇怪，我必须承认，但会奏效。

```
var heavy = new HeavyDependency();
Bind<SomeInterface>().To<SomeClass>().WithConstructorArgument("HeavyDependency", heavy ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:06:13.403

您可以隐藏代理背后的依赖关系并在后台加载它：

```
public class LazyHeavyDependency : IHeavyDependency 
{
    private readonly Lazy<IHeavyDependency> lazy;

    public LazyHeavyDependency(Lazy<IHeavyDependency> lazy)
    {
        this.lazy = lazy;
    }

    void IHeavyDependency.DoWork()
    {
        this.lazy.Value.DoWork();
    }
} 
```

你可以像这样连接它：

```
var lazyDependency = new Lazy<IHeavyDependency>(() =>
    new RealHeavyDependency());

Bind<IHeavyDependency>()
    .ToConstant(new LazyHeavyDependency(lazyDependency));

// Load value in a background thread.
Task.Factory.StartNew(() => lazy.Value); 
```

# php - getQuery(true) 与 stdClass 类数据行插入 - Joomla

> ID：13043398
> 
> 赞同：0
> 
> 时间：2012-10-24T05:16:53.673
> 
> 标签：php, mysql, joomla, joomla2.5, joomla1.7

方法一

```
 global $database;
  $user = new stdClass;
  $user->id = NULL;
  $user->name = $name;
  $user->username = $username;

  if (!$database->insertObject( '#__users', $user, 'id' )) {
    echo $database->stderr();
    return false;
  }

  return $user->id; 
```

方法二

```
 $db = JFactory::getDBO();     
  $query = $db->getQuery(true);
  $query->insert($db->nameQuote('#__users'));
  $query->set($db->nameQuote('name').'='.$db->quote($$name).','.
  $db->nameQuote('username').'='.$db->quote($username));     
  $db->setQuery( $query );
  $db->query();
  $new_id = $db->insertId(); 
```

我正在使用 Joomla 并使用上述两个查询，这让我可以完成工作。我的问题是方法1和方法2有什么区别？行业标准是什么？有什么具体情况我应该使用上述方法吗？哪个更好，为什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T06:22:47.997

**方法 1** (M1) 和**方法 2** (M2) 都是有效的 Joomla! 2.5 机制，M1 使用半自动化方法，可能更常用于您已经使用对象的地方。

M2 显然是一组更具体的步骤，但两者都可以使用`JDatabase`et 提供的抽象。人。将您与数据库服务器隔离。

话虽如此，M1 仅在整个 Joomla 中的几个地方（字面意思）使用！2.5 安装（不计算`/libararies/joomla/database/`）而M2被广泛使用

唯一奇怪的是`global`在 M1 中使用 a，通常是[Joomla！编码标准](http://developer.joomla.org/coding-standards.html)避免使用全局变量，而是使用 OOP 或工厂模式。所以，像这样：

```
$database = JFactory::getDBO(); 
```

而不是使用`global`参考。

# perl - 如何在 Perl 中正确声明全局变量？

> ID：13043401
> 
> 赞同：9
> 
> 时间：2012-10-24T05:17:09.217
> 
> 标签：perl

我正在尝试理解变量范围并在 Perl 中正确声明变量，但我遇到了困难。

下面的代码基本上是读入一个 excel 文件，对其进行解析，然后将其输出到一个新的 excel 文件中。

但是，我正在尝试读取其中一个标题，如果标题与我的字符串匹配，我想记录该列号，并稍后在代码中使用它。

我在 ./parser.pl 第 38 行收到“使用未初始化值 $site_name_col in print”。

第 38 行是“打印 $site_name_col;”

我意识到这个打印语句在最初初始化变量的 {} 之外，但它在代码开头被声明为全局变量，那么给出了什么？

```
#!/usr/bin/perl -w

use strict;
use warnings;
use vars qw($site_name_col);
use Spreadsheet::WriteExcel;
use Spreadsheet::ParseExcel;

my ($fname1) = @ARGV;

my $parser   = Spreadsheet::ParseExcel->new();
my $workbook = $parser->parse($fname1);

my $new_workbook = Spreadsheet::WriteExcel->new('formated_list.xls', $fname1);

if (!defined $workbook) {

    die $parser->error(), ".\n";
}

for my $worksheet ( $workbook->worksheets() ) {

    my ($wsheet_name) = $worksheet->get_name();
    my $new_worksheet = $new_workbook->add_worksheet($wsheet_name);  

    my ($row_min, $row_max) = $worksheet->row_range();
    my ($col_min, $col_max) = $worksheet->col_range();

    for my $row ($row_min .. $row_max) {

        for my $col ($col_min .. $col_max) {

            my $cell = $worksheet->get_cell($row, $col);
            next unless $cell;

            print "Row, Col = ($row, $col)\n";

            if ( $cell->value() =~ /Site Name/ ) {

                $site_name_col = $col;
            }
            print $site_name_col;

            $new_worksheet->write($row, $col, $cell->value());
        }
    }
}

$new_workbook->close(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T05:23:18.933

`use vars qw()`不再推荐。声明一个全局变量使用`our $my_var` 你的问题可能来自于条件`$cell->value() =~ /Site Name/`。它可能永远不会满足，所以你的变量永远不会得到一个值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-27T02:06:42.643

我承认这篇文章有点老了，但是......对于那些多年后仍然来到这个页面的人（比如我自己）：

我想您正在阅读的这些 Excel 工作表可能不是您创建的。因此，您可能会遇到大小写问题，当然，正则表达式是区分大小写的。检查期间数据大写或小写：`if (lc($cell->value()) =~ /site name/) ...`

**使用`our`！** 拥有一个全球性的原因有很多。site_name 似乎是所有文件都可能需要的东西......

杰瑞特

编辑：

这会更好：

`if ($cell->value()) =~ /site name/i) { print $col; }`

根本不需要在 if 语句之外打印...节省打印很多...很多次...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T07:58:00.603

只是为了澄清其他人已经说过的话，在文件顶部声明的变量[`my`](http://perldoc.perl.org/functions/my.html)可以被整个文件访问和使用。在这种情况下，没有理由使用全局变量。

你什么时候想要一个全球性的？

*   您希望文件外部的另一段代码可以访问变量。例如，一个模块可能提供一个全局变量，调用该模块的文件可以访问该变量。
*   您在一个文件中有多个包。在这种情况下，您需要一个全局变量来存储两个包都访问的内容。然而，这样做是相当不寻常的。

很明显，你没有做任何这些事情，所以你应该坚持使用`my`. 如果您确实想声明一个全局变量，那么正确的方法是使用[`our`](http://perldoc.perl.org/functions/our.html). 该命令有一些重要的细微之处，在链接文档中进行了解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T05:30:16.403

在这种情况下你不需要声明全局变量，局部变量就足够了。请参见下面的示例。

```
if ( $cell->value() =~ /Site Name/ ) {

    my $site_name_col = $col;
    print $site_name_col;
} 
```

或者

```
my $site_name_col = ''; # default value
if ( $cell->value() =~ /Site Name/ ) {

    $site_name_col = $col;
}
print $site_name_col; 
```

# ipad - 我可以在 Ubuntu 上通过 SSH 运行 Sublime Text 2 吗？

> ID：13043402
> 
> 赞同：1
> 
> 时间：2012-10-24T05:17:22.717
> 
> 标签：ipad, ubuntu, ssh

我正在尝试找到可以使用 iPad 进行编程的最佳方式，我对 ubuntu 比较陌生，我不知道它对 SSH 的限制，但我很想知道是否可以安装文本编辑器例如Sublime Text 2 并使用 iSSH 在我的 iPad 上使用 SSH 终端打开它。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:24:52.950

[iSSH](https://itunes.apple.com/us/app/issh-ssh-vnc-console/id287765826?mt=8)（美国商店售价 9.99 美元）内置了 X 服务器。您可以在 Ubuntu 机器上安装 Sublime 并使用 iSSH 访问它。

# php - Facebook 单个页面上的多个赞按钮

> ID：13043405
> 
> 赞同：2
> 
> 时间：2012-10-24T05:17:43.753
> 
> 标签：php, javascript, facebook, facebook-like, thumbnails

我有一个页面，我需要大约 3 个 Facebook Like 按钮。

他们都喜欢不同的网址。

我如何为每个赞按钮选择不同的个人资料图片（将在 facebook 上显示的图片）。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T10:18:57.353

其他页面的类似按钮的缩略图由其他 url 上的 og.image 设置。

因此，如果您喜欢 example.com/puppies，无论您身在何处，FB 都会使用该 url 中的 OG 数据。

* * *

来自[http://ogp.me/](http://ogp.me/)

要将您的网页变成图形对象，您需要将基本元数据添加到您的页面。我们基于 RDFa 协议的初始版本，这意味着您将在您的网页中放置额外的标签。每个页面的四个必需属性是：

og:title - 应该出现在图表中的对象的标题，例如“The Rock”。

og:type - 对象的类型，例如“video.movi​​e”。根据您指定的类型，可能还需要其他属性。

og:image - 应在图中表示您的对象的图像 URL。

og:url - 对象的规范 URL，将在图中用作其永久 ID，例如“http://www.imdb.com/title/tt0117500/”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T12:49:26.903

最后我以自己的方式解决了这个问题。

我所做的是...

1.  > 传递一个额外的参数以及要喜欢的 url。该参数包含该链接的唯一标识符。

2.  > 检查该页面的每个请求上的参数。如果找到，则相应地设置元标记。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-25T13:43:53.457

示例代码：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=xxxxxxxxx";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-like" data-href="http://www.example1.com" data-send="false" data-width="450" data-show-faces="true"></div>

<div class="fb-like" data-href="http://www.example2.com" data-send="false" data-width="450" data-show-faces="true"></div>

<div class="fb-like" data-href="http://www.example3.com" data-send="false" data-width="450" data-show-faces="true"></div> 
```

# java - 从 Java 中的按钮关闭数据库连接

> ID：13043410
> 
> 赞同：0
> 
> 时间：2012-10-24T05:18:56.107
> 
> 标签：java, database, button, connection

现在我可以通过单击连接到数据库按钮来连接到我的数据库。不幸的是，除了在同一个 if 语句中，我无法从其他任何地方关闭数据库。它不会将“conn”识别为本地连接变量。我还需要其他按钮来访问“conn”以执行其他任务，因此这一障碍阻碍了多个战线。下面是我的代码：

```
import java.awt.*;
import java.awt.event.*;
import java.sql.*;

import javax.swing.*;

public class ConnectToDB implements ActionListener {

    final String url = "jdbc:mysql://localhost/";
    final String dbName = "project3";
    final String DBdriver = "com.mysql.jdbc.Driver";
    final String userName = "root"; 
    final String password = "OMGnpw=-0";

    //GUI STUFF
    //constants
    final int windowX = 640; //pixels
    final int windowY = 655; //pixels
    final int fieldX = 20;   //characters

    //window
    JFrame window = new JFrame("Mike's MySQL GUI Client");

    //Connection Details
    JLabel enterInfo = new JLabel("Enter Connection Details: ");
    JLabel driver = new JLabel("Database Driver: ");
    JTextField driverText = new JTextField(fieldX);
    JLabel dburl = new JLabel("Database URL: ");
    JTextField dburlText = new JTextField(fieldX);
    JLabel dbuser = new JLabel("Username: ");
    JTextField dbuserText = new JTextField(fieldX);
    JLabel dbpass = new JLabel("Password: ");
    JTextField dbpassText = new JTextField(fieldX);

    //Enter a SQL Command
    JLabel enterSQL = new JLabel("Enter a SQL Command:");
    JTextArea enterSQLText = new JTextArea(10, 30);

    //Connection Status and Command Buttons
    JLabel connectionStatus = new JLabel ("No Connection Now");
    JButton connectButton = new JButton("Connect");
    JButton executeButton = new JButton("Execute SQL Command");
    JButton clearCommandButton = new JButton("Clear Command");

    //SQL Execution Result
    JLabel executionResult = new JLabel("SQL Execution Result:");
    JButton clearResultsButton = new JButton("Clear Results");
    JTextArea executionResultText = new JTextArea(20, 50);

    public ConnectToDB() throws Exception{

        //Configure GUI
        window.setSize(windowX, windowY);
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        driverText.setEditable(false);
        dburlText.setEditable(false);
        dbuserText.setEditable(false);
        dbpassText.setEditable(false);
        executionResultText.setEditable(false);

        //Register Event Listeners
        connectButton.addActionListener(this);
        executeButton.addActionListener(this);
        clearCommandButton.addActionListener(this);
        clearResultsButton.addActionListener(this);

        //Construct Container
        Container c = window.getContentPane();
        final BoxLayout LAYOUT_STYLE = new BoxLayout(c, BoxLayout.Y_AXIS);
        JPanel panel1 = new JPanel();
        panel1.setLayout(new FlowLayout());
        JPanel panel2 = new JPanel();
        panel1.setLayout(new FlowLayout());
        JPanel panel3 = new JPanel();
        panel1.setLayout(new FlowLayout());
        JPanel panel4 = new JPanel();
        panel1.setLayout(new FlowLayout());
        JPanel panel5 = new JPanel();
        panel1.setLayout(new FlowLayout());
        JPanel panel6 = new JPanel();
        panel1.setLayout(new FlowLayout());
        JPanel panel7 = new JPanel();
        panel1.setLayout(new FlowLayout());
        JPanel panel8 = new JPanel();
        panel1.setLayout(new FlowLayout());

        driverText.setText(DBdriver);
        dburlText.setText(url);
        dbuserText.setText(userName);
        dbpassText.setText(password);

        c.setLayout(LAYOUT_STYLE);

        panel5.add(enterInfo);
        panel1.add(driver);
        panel1.add(driverText);
        panel2.add(dburl);
        panel2.add(dburlText);
        panel3.add(dbuser);
        panel3.add(dbuserText);
        panel4.add(dbpass);
        panel4.add(dbpassText);
        panel5.add(connectionStatus);
        panel5.add(connectButton);
        panel6.add(enterSQL);
        panel6.add(enterSQLText);
        panel7.add(executeButton);
        panel7.add(clearCommandButton);
        panel8.add(executionResult);
        panel8.add(clearResultsButton);
        panel8.add(executionResultText);
        c.add(panel5);
        c.add(panel1);
        c.add(panel2);
        c.add(panel3);
        c.add(panel4);
        c.add(panel6);
        c.add(panel7);
        c.add(panel8);

        window.setVisible(true);//END GUI STUFF
    }

    public static void main(String[] args) throws Exception{
        @SuppressWarnings("unused")
        ConnectToDB gui = new ConnectToDB();
    }

    public void actionPerformed(ActionEvent e){
        if (e.getSource() == connectButton){
            try 
            {
                //DB Connection details
                System.out.println("Attempting to connect to database...");
                //Connect to DB and notify user
                Class.forName(DBdriver).newInstance();
                Connection conn = DriverManager.getConnection(url+dbName,userName,password);
                System.out.println("Connected to the database");

            } 
            catch (Exception f) {
            f.printStackTrace();
            }
        }
        else {
            try{

                conn.close();
                System.out.println("Disconnected from database");
                System.out.println("Other Button Works!");
            }
            catch (Exception g){
                g.printStackTrace();
            }
        }
    }
} 
```

具体来说，这是我的 actionEventPerformed 序列，由于“conn.close();”处的错误而失败

```
public void actionPerformed(ActionEvent e){
        if (e.getSource() == connectButton){
            try 
            {
                //DB Connection details
                System.out.println("Attempting to connect to database...");
                //Connect to DB and notify user
                Class.forName(DBdriver).newInstance();
                Connection conn = DriverManager.getConnection(url+dbName,userName,password);
                System.out.println("Connected to the database");

            } 
            catch (Exception f) {
            f.printStackTrace();
            }
        }
        else {
            try{

                conn.close();
                System.out.println("Disconnected from database");
                System.out.println("Other Button Works!");
            }
            catch (Exception g){
                g.printStackTrace();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T05:21:48.930

在您的代码中，*Connection*对象是一个局部变量，其范围存在于 if 语句中的 try-catch 块的范围内。

尝试创建一个全局变量并使用您的按钮来初始化/打开和关闭连接。我建议如下：

*   创建一个用于存储连接对象的全局变量
*   创建`getConnection()`和`closeConnection()`打开/关闭连接的方法
*   从您的事件处理代码中，调用这些函数中的任何一个来处理您的连接。

这将是处理您的连接的更好方法，因为连接处理将不再与您的 UI 组件耦合。

# kohana-3 - 将 Auth 与 ORM 驱动程序 kohana 3.3.0 一起使用时出错

> ID：13043412
> 
> 赞同：3
> 
> 时间：2012-10-24T05:19:18.043
> 
> 标签：kohana-3, kohana-auth

今天我下载了 3.3.0 但在使用 Auth 和 ORM 时出错：

> 致命错误：在第 37 行的 /home/vsao4/domains/v4.mclub.vn/public_html/modules/auth/classes/Kohana/Auth.php 中找不到类 'Auth_Orm'

我的身份验证配置如下：

```
'driver'       => 'orm',
'hash_method'  => 'md5',
'hash_key'     => 'secret',
'lifetime'     => 1209600,
'session_type' => Session::$default,
'session_key'  => 'auth_user', 
```

代码是：

```
 $ars = array(
                'username'=>'manhquan',
                'password'=>'232323',
                'email'=>'manhquan@fifthmediacorp.com'
            );
            if (Auth::instance()->login($ars['username'], $ars['password']))
            {

                    // sucessfully loged
                    $this->response->body('login');

            } else {
                //TODO error
                $this->response->body('not login');
            } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T07:37:31.927

改变

```
'driver' => 'orm', 
```

至

```
'driver' => 'ORM', 
```

此外，Database_Mysql 类也会出错。还要更改您的 config/database.php 文件：

```
'type' => 'mysql', 
```

至

```
'type' => 'MySQL', 
```

这是由于新的 Kohana 约定而发生的：http: [//kohanaframework.org/3.3/guide/kohana/conventions](http://kohanaframework.org/3.3/guide/kohana/conventions)

# jquery - 悬停效果标题与 Jquery？

> ID：13043415
> 
> 赞同：0
> 
> 时间：2012-10-24T05:19:42.897
> 
> 标签：jquery, html, css

我在显示设置为无的列表项中有一个 div。我希望它在该列表项悬停时淡入。我已经在这里尝试了大约一个小时的各种教程，但我就是无法让它工作......

```
<li data-tags="Websites" class="boxgrid captionfull">
    <img src="resources/Portfolio/Thumbs/ChugBeersWebsite.jpg" width="200" />
    <div class="boxcaption">
        <h3>Chug Beers Site</h3>
        <p><a href="http://www.chugbeers.com">Visit Site</a></p>
    </div>
</li>

<script type="text/javascript">
    $(document).ready(function() {
    $(function(){
       $('.captionfull').hover(function(){  
            $(".boxcaption").fadeIn('slow');  
        }, function() {  
            $(".boxcaption").fadeOut('slow');  
        });  
    })
});  
</script> 
```

我相信以下脚本以某种方式与之冲突。我正在使用一个可过滤的投资组合插件，我不知道足够多的 jquery 想要弄乱它。任何帮助，将不胜感激。

```
$(document).ready(function(){

var items = $('#stage li'),
    itemsByTags = {};

// Looping though all the li items:

items.each(function(i){
    var elem = $(this),
        tags = elem.data('tags').split(',');

    // Adding a data-id attribute. Required by the Quicksand plugin:
    elem.attr('data-id',i);

    $.each(tags,function(key,value){

        // Removing extra whitespace:
        value = $.trim(value);

        if(!(value in itemsByTags)){
            // Create an empty array to hold this item:
            itemsByTags[value] = [];
        }

        // Each item is added to one array per tag:
        itemsByTags[value].push(elem);
    });

});

// Creating the "Everything" option in the menu:
createList('Everything',items);

// Looping though the arrays in itemsByTags:
$.each(itemsByTags,function(k,v){
    createList(k,v);
});

$('#filter a').live('click',function(e){
    var link = $(this);

    link.addClass('active').siblings().removeClass('active');

    // Using the Quicksand plugin to animate the li items.
    // It uses data('list') defined by our createList function:

    $('#stage').quicksand(link.data('list').find('li'));
    e.preventDefault();
});

$('#filter a:first').click();

function createList(text,items){

    // This is a helper function that takes the
    // text of a menu button and array of li items

    // Creating an empty unordered list:
    var ul = $('<ul>',{'class':'hidden'});

    $.each(items,function(){
        // Creating a copy of each li item
        // and adding it to the list:

        $(this).clone().appendTo(ul);
    });

    ul.appendTo('#container');

    // Creating a menu item. The unordered list is added
    // as a data parameter (available via .data('list'):

    var a = $('<a>',{
        html: text,
        href:'#',
        data: {list:ul}
    }).appendTo('#filter');
}
});

#container{
display: block;
overflow: hidden;
width: 960px;
margin: 0;
padding: 0px;
}

#container li{
float: left;
height: 229px;
list-style: none outside none;
margin: 20px;
position: relative;
width: 200px;
-moz-box-shadow: 0 0 5px #000;
-webkit-box-shadow: 0 0 5px #000;
box-shadow: 0 0 5px #000;
border-radius: 7px;
overflow:hidden;
display:block;      
}
#container li img{
border-radius:7px;
position: absolute;  
}
#container ul{
margin: 0px;
padding: 0px;
}
#container ul.hidden{
display:none;
} 
.boxcaption{
text-align: center;
float: left;
position: absolute;
height: 100px;
width: 190px;
color: #FFF;
display: none;
bottom: 0;
border-bottom-left-radius: 7px;
border-bottom-right-radius: 7px;
padding-right: 5px;
padding-left: 5px;
background-image: url(../resources/blackbg.png);
background-repeat: repeat;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T05:33:35.730

就像提到的未定义一样，您可能需要使用 jQuery 文档就绪处理程序。既然您已经在使用 jQuery，不妨使用[fadeToggle](http://api.jquery.com/fadeToggle/)方法来减少代码。

```
$(document).ready(function() {
  $('.captionfull').hover(function(){
    $(".boxcaption", this).fadeToggle('slow');
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T05:30:34.050

试试这个：

```
$(document).ready(function () {
    $('.captionfull').hover(function(){  
        $(this).children('.boxcaption').fadeIn('slow');  
    }, function() {  
        $(this).children('.boxcaption').fadeOut('slow');  
    }).children('.boxcaption').hide();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T05:43:37.217

试试这个：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<ul>
<li data-tags="Websites" class="boxgrid captionfull" style="border:1px solid #CCC;width:400px;">
    <img src="http://www.chugbeers.com/wp-content/uploads/2012/10/41Y82evIPSL-195x300.jpeg" width="200" />
    <div class="boxcaption" style="display:;">
        <h3>Chug Beers Site</h3>
        <p><a href="http://www.chugbeers.com">Visit Site</a></p>
    </div>
</li>
</ul>

<script type="text/javascript">
    $('.captionfull').hover(function(e){
        $(".boxcaption", this).animate({opacity:'1'},{queue:false,duration:1000});
    }, function(f) {
        $(".boxcaption", this).animate({opacity:'0'},{queue:false,duration:1000});
    });
</script> 
```

我发现使用动画可以让您获得更多控制权。如果您希望在每次悬停时执行淡入淡出，请将 queue 设置为 true，如果您不关心，则设置为 false。

# vim - 如何确定vim中的水平滚动位置

> ID：13043418
> 
> 赞同：4
> 
> 时间：2012-10-24T05:20:13.220
> 
> 标签：vim

在下面由 表示的 vim 窗口中*`visible area`*，如何从函数中获取`X`相对于的水平位置？`Y`

```
Y------------------------+
1 File contents          |
|                        |
|   +-X--------------+   |
|   |4|              |   |
|   |5| Visible area |   |
|   |6|              |   |
|   +-+--------------+   |
$    ^                   |
+----|-------------------+
     \
       line numbers 
```

例如，相对于的*垂直*位置是四，如在窗口中向下滚动四行。我可以将它作为一个从零开始的索引，使用.`X``Y``line("w0") - 1`

我如何确定在给定时刻窗口向右滚动了多少列？我已经尝试过`virtcol(".") - wincol()`，但是如果光标位于双角字符上，那么仅此一点就有点不对劲了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-10-23T07:50:13.840

这是一个不修改光标位置的解决方案：

```
winsaveview().leftcol 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T10:20:34.980

如果您想拥有数字列宽，请使用`max([len(line('$')), &numberwidth])+1`.

~~“水平位置”是什么意思？`wincol()`是窗口中的水平位置，`col(".")`是距行首的字节偏移量，是距行`strchars(getline('.')[:(col('.')-1)])`首的 unicode 代码点数，是距行首`len(split(getline('.')[:(col('.')-1)], '.\@='))`的字符数。~~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-08T03:43:09.270

不幸的是，vim 没有更直接的方法来获得这个，但是下面的方法会起作用

```
let cursor_pos = getpos('.')
normal g0
let scroll_x = col('.')
setpos('.', cursor_pos) 
```

诀窍是`g0`运动，它将光标移动到窗口的左侧，从那里我们可以得到当前的光标列。

# ruby - 在 File.read 中正确渲染 SASS 文件（在 PDF 文件中）

> ID：13043420
> 
> 赞同：0
> 
> 时间：2012-10-24T05:20:31.460
> 
> 标签：ruby, ruby-on-rails-3, rack, sass

我生成了一个 pdf，并且必须在生成的文件中包含 css，以便 pdf 中的样式正确。为此，我有

```
<%= File.read(Rails.root.join("app", "assets", "stylesheets", "application.css.scss")) %>
<%= File.read(Rails.root.join("app", "assets", "stylesheets", "app.css.scss")) %> 
```

但是 sass 没有正确模板化。有谁知道正确呈现文件的正确代码是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T15:22:29.020

将 File.read 替换为

```
YourApp::Application.assets["application.css.scss"].to_s.html_safe 
```

其中 YourApp 是您正在处理的应用程序的名称。这将导致 rails 渲染 scss 内联。

# php - 我应该在客户端还是服务器上实现我的搜索引擎字符串解析器？

> ID：13043422
> 
> 赞同：3
> 
> 时间：2012-10-24T05:20:37.103
> 
> 标签：php, javascript, html, client-server

我有一个 html 输入，它通过 ajax 调用将查询字符串发送到我的 php 服务器。搜索字符串可能很复杂并允许过滤器，我寻找反馈的实现问题是我应该在客户端处理字段/值的解析并动态添加帖子值还是应该在服务器端处理所有事情？

# 示例：从搜索框中，您可以输入诸如

```
'search string category:sports submitted:today' 
```

然后我可以

# javascript 提交

```
(POST) q='search string category:sports submitted:today' 
```

# 服务器解析为

```
query='search string' 
category='sports' 
submitted'today' 
```

或者

# javascript解析并提交

```
(POST) q='search string'
(POST) category='sports'
(POST) submitted='today' 
```

# 服务器处理 post 参数

```
query='search string' 
category='sports' 
submitted='today' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:27:01.720

我会选择方式 1，因为服务器和客户端之间的交互最少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T05:29:27.510

取决于您希望应用程序的交互性。

如果客户端在用户输入时解析它，您可以提供自动填充功能和验证。否则，您必须等待用户完成，然后从服务器接收反馈。

从技术上讲，服务器端解析并不是什么大问题。但这可能不是最佳的应用程序行为。

# c# - 如何在WP7中获取WiFi连接的名称

> ID：13043423
> 
> 赞同：0
> 
> 时间：2012-10-24T05:20:41.520
> 
> 标签：c#, windows-phone-7

我一直在研究 DeviceNetworkInformation 类，我已经成功使用了以下

•CellularMobileOperator •IsNetworkAvailable •IsCellularDataEnabled •IsCellularDataRoamingEnabled •IsWiFiEnabled

但我想知道是否有办法获取 WiFi 连接的名称，以及是否启用了 WiFi。我希望能够在我的应用程序中看到连接的当前名称。我还没有看到这是在哪里实现的，所以这实际上可能吗？如果是这样，我如何访问这样的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:37:08.643

下面是代码片段：

```
/// <summary>
/// Find WIFI SSID
/// </summary>
private void FindWIFISSIDClick(object sender, RoutedEventArgs e)
{
    foreach (var network in new NetworkInterfaceList())
    {
        if ( (network.InterfaceType == NetworkInterfaceType.Wireless80211) &&  (network.InterfaceState == ConnectState.Connected) )
            mLocatoinInfo.Text = network.InterfaceName; //Get the SSID of the WIFI
        else
            mLocatoinInfo.Text = "fail";
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-24T05:32:27.223

您应该在[Managed Wifi API](http://www.codeplex.com/managedwifi)中使用 C# 中的托管代码查看此包装器项目。

参考：

1.  [如何在 .net 中获取可用的 wifi AP 及其信号强度？](https://stackoverflow.com/questions/496568/how-do-i-get-the-available-wifi-aps-and-their-signal-strength-in-net)
2.  [如何枚举网络](http://msdn.microsoft.com/en-us/library/ms706749(VS.85).aspx)
3.  [如何获得信号强度](http://msdn.microsoft.com/en-us/library/ms706839.aspx)
4.  [如何获取WIFI接入点信息？](http://social.msdn.microsoft.com/forums/en-US/vbgeneral/thread/e17f69ec-1473-4142-882e-f812cc5f0948/)
5.  [无线网络扫描仪](http://www.codeproject.com/Articles/19308/A-Vista-Wireless-Network-Scanner)

# android - HTC evo 3d 的 Android layout-sw340dp 问题

> ID：13043430
> 
> 赞同：0
> 
> 时间：2012-10-24T05:21:45.953
> 
> 标签：android

我需要为 htc evo 3D 手机创建布局，我创建了它们，但它自动获取布局正常并且它不适合手机，所以我创建了新布局作为 layout-sw340dp 和一组图像作为 dreawble-sw340dp在 eclips 布局设计器中显示兼容很好，但是当我在模拟器中检查它时，它显示相同的布局正常布局，任何人都可以帮助我...应用程序 API 级别是 2.3.3

```
<supports-screens
    android:smallScreens="true"
    android:normalScreens="true"
    android:largeScreens="true" 
    android:anyDensity="true" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:30:40.367

Android 2.3.3 模拟器仅适用于基本的三种布局，例如：-layout-large、layout-normal、layout-small，但 layout-sw340dp 文件夹中的布局在 4.0.1 的 avd 实例中完美运行

# javascript - 如何从一组图像中选择一个图像（使用上一个/下一个箭头循环）并上传

> ID：13043432
> 
> 赞同：0
> 
> 时间：2012-10-24T05:21:54.293
> 
> 标签：javascript, jquery, html

我正在编写一个脚本，它允许用户从 url 搜索和查找图像。我明白了，并且可以在数组中获取图像（一个或多个）的 url。我想一次显示一个图像，带有`<<prev`和`next>>`按钮，并在表单中提供一个上传按钮。

关于如何实现内联幻灯片并上传用户选择的图像的任何提示？

例如：

```
<div id="imgSelected">

  <img src="img1.jpg">
  <img src="img2.jpg">
</div>

<form>
  <input type='hidden' value='img1.jpg>
  <input type=text' placeholder='title'>
  <input type='submit' value='upload'>
</form> 
```

我可以使用 jquery 循环（http://malsup.com/jquery/cycle2/）之类的东西来显示下一个/上一个按钮并循环图像。但是当这种情况发生时，如何更新图像 src 表单中的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:46:51.763

你可以尝试这样的事情：

[http://jsfiddle.net/EpjYe/](http://jsfiddle.net/EpjYe/)

```
$(document).ready(function () {
    var all_images = $("#images").children(".image");
    var cur_selected = all_images.filter(".image-selected");
    checkNoneSelected(all_images, cur_selected);

    $("#prev").on("click", function () {
        var all_images = $("#images").children(".image");
        var cur_selected = all_images.filter(".image-selected");

        if (!checkNoneSelected(all_images, cur_selected)) {
            cur_selected = moveImage(all_images, cur_selected, -1, 0);
            $("#hidden1").val(cur_selected.prop("src"));
        }
    });

    $("#next").on("click", function () {
        var all_images = $("#images").children(".image");
        var cur_selected = all_images.filter(".image-selected");

        if (!checkNoneSelected(all_images, cur_selected)) {
            cur_selected = moveImage(all_images, cur_selected, 1, all_images.length-1);
            $("#hidden1").val(cur_selected.prop("src"));
        }
    });
});

function checkNoneSelected(all_images, cur_selected) {
    if (cur_selected.length === 0) {
        all_images.first().addClass("image-selected");
        return true;
    }
    return false;
}

function moveImage(all_images, cur_selected, direction, end_pos) {
    var cur_index = all_images.index(cur_selected);

    if (cur_index !== end_pos) {
        var new_index = cur_index + direction;
        cur_selected.removeClass("image-selected");
        cur_selected = $(all_images[new_index]);
        cur_selected.addClass("image-selected");
    }

    return cur_selected;
} 
```

当然，您必须使用一致`id`和`class`属性，因为我的只是一个示例。

# jquery - JQuery Colorbox In Colorbox - 在子级调整大小时调整父级

> ID：13043433
> 
> 赞同：1
> 
> 时间：2012-10-24T05:22:05.500
> 
> 标签：jquery, jquery-plugins, iframe, colorbox

我有一个场景，我花了几个小时尝试不同的事情（我对 JQuery 很陌生），我想知道是否有人能指出我正确的方向。

我有一个颜色框对话框（“Dialog 1”），然后在第一个对话框中打开另一个颜色框对话框（“Dialog 2”）。我可以调整 Dialog 2 的大小以适应其内容，但有时内容比 Dialog 1 大，所以我需要从 Dialog 2 调整 Dialog 1 的大小（所以说大 xx 像素）。任何人都可以帮忙吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T05:29:37.743

要动态地重新调整您想说的颜色框的大小。

```
colorbox.resize({width:"500px" height:"500px"}) 
```

如果您想重新调整加载 I 帧的颜色框的大小，您可以在目标文档的头部添加类似的内容。

```
$(document).ready(function(){
    var x = $('mydiv').height();
    var y = $('mydiv').width();
    parent.$.colorbox.resize({width:y, height:x});
}); 
```

希望这能解决您的问题。

# nsindexpath - NSIndexPath 行属性究竟是如何工作的

> ID：13043438
> 
> 赞同：0
> 
> 时间：2012-10-24T05:22:54.573
> 
> 标签：nsindexpath

我正在阅读 Big Nerd Ranch iOS 指南，我对这里的这段代码有疑问：

```
- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"UITableViewCell"];

    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"UITableViewCell"];
    }

    BNRItem *p = [[[BNRItemStore sharedStore] allItems] objectAtIndex:[indexPath row]];
    [[cell textLabel] setText:[p description]];
    return cell;
} 
```

BNRItemStore 只是一个数据存储对象，我已经在初始化方法中添加了五个 BNRItem 对象。然后将它们的字符串描述打印到 UI。我的困惑特别是关于这里的这条线：

```
BNRItem *p = [[[BNRItemStore sharedStore] allItems] objectAtIndex:[indexPath row]]; 
```

我理解这一行的方式是 objectAtIndex: 只是检索 BNRItemStore 中的项目并将它们分配给变量。我的问题是：

objectAtIndex: 如何使用参数 [indexPath row] 将所有五个对象返回给变量 *p？我的印象是 indexPath 对象包含一个部分和一行。所以 row 属性只会返回一个单行索引。在这里，看起来数组正在循环，它的 5 个内容返回到变量，然后打印到 UI。或者这不是发生了什么？row 属性实际上在这里做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:33:14.230

你的理解是正确的。NSIndexPath 封装了一个部分和一行。我认为您的困惑是，`BNRItem *p`它没有指向所有 5 个项目（它一次只指向一个）......相反，该方法`tableView:cellForRowAtIndexPath:`是为表视图中显示的每一行调用的。

还有另一种方法，`tableView:numberOfRowsInSection:`称为。我假设此方法返回数字 5，因此`tableView:cellForRowAtIndexPath:`被调用 5 次......每次 indexPath 将有不同的行，因此打印不同的对象。

# c++ - 捕获无效输入的最常见/最简单的方法

> ID：13043441
> 
> 赞同：1
> 
> 时间：2012-10-24T05:23:09.613
> 
> 标签：c++, char, cin

我现在正在学习 c++，现在我想知道捕获无效输入的最常见/最佳方法。我很想回答这个广泛开放的问题，但我更具体的问题如下。

我想从用户那里得到一个字符。如果 char 是 'y' 则它会重复，如果它是 'n' 则程序将关闭。如果我输入多个字符，那么它将与字符一样重复多次，例如我输入“你好”，它将显示我的输出 5 次。我假设它读取每个字符并遍历整个循环，然后读取行中的下一个字符。我怎样才能让它只显示一次？

```
bool valid = 0;
while(valid)
{

...

    bool secValid = 0;
    while(secValid == 0)
    {
        cout << "To enter another taxable income type 'y': \n\n";
        char repeat = NULL;
        cin >> repeat;
        if(repeat == 'y')
        {
            valid = 0;
            secValid = 0;
            system("cls");
        }else if(repeat == 'n')
        {
            return;
        }else
        {
            secValid = 1;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T05:29:31.680

你可以像这样构造它：

```
while(true) {
    cout << "Repeat (y/n)? ";
    string line;
    if(!getline(cin, line))
        break; // stream closed or other read error
    if(line == "y") {
        continue;
    } else if(line == "n") {
        break;
    } else {
        cout << "Invalid input." << endl;
    }
} 
```

示例会话：

```
Repeat (y/n)? y
Repeat (y/n)? foo
Invalid input.
Repeat (y/n)? n 
```

在这里，我们使用`std::getline`获取一整行输入，而不是一次获取一个字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T05:30:36.840

`std::getline()`：

```
std::string line;
std::getline(std::cin, line);
if (line == "y") {
   // handle yes
}
else if (line == "n") {
   // handle no
}
else {
   // handle invalid input
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T05:31:36.037

使用`std::getline`from `<string>`header 将*一行*输入读入`std::string`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T05:57:17.383

此外，在检查字符串中的“y”或“n”时，最好使用大写字符串。例如

```
std::string YES = "Y";
std::string NO = "N";
...
std::string line;
std::getline(std::cin, line);
std::transform(line.begin(), line.end(), line.begin(), std::toupper);
if (line == YES)
{
    ...
}
else if (line == NO)
{
    .. 
```

. }

# ruby-on-rails - “警告：无法验证 CSRF 令牌真实性”错误 - 带有 Devise 和 :token_authenticable 的 CORS

> ID：13043444
> 
> 赞同：5
> 
> 时间：2012-10-24T05:23:20.677
> 
> 标签：ruby-on-rails, ajax, devise, cors

我有一个使用 CORS 对另一个域进行身份验证的单页应用程序。所有请求都是 JSON 请求。

我的应用程序可以进行身份​​验证，并且可以使 GET 请求正常。身份验证使用 token_authenticable。即所有请求都附加 '?auth_token=whatever'

所以，我的实际问题是，当我尝试执行 PUT 请求时，我收到一条**警告：无法**在 rails 日志中验证 CSRF 令牌真实性消息以及**CanCan::AccessDenied （您无权访问此页面。 )**例外。

只需添加`skip_before_filter :verify_authenticity_token`到 rails 控制器即可解决问题。

因此我只能得出结论，我的 ajax 请求正在发送一个无效或空的 csrf_token。

我真的不明白这是怎么回事，因为我相信我在每个 ajax 请求中都正确地发送了 X-CSRF-Token 标头。

基本上，我的应用程序进行身份验证，然后 Devise 发回一个 auth_token 和一个 csrf_token：

```
render :status => 200, :json => {
  :auth_token => @user.authentication_token,
  :csrf_token => form_authenticity_token
} 
```

然后我将这些令牌存储在我的 ajax 应用程序中，并`ajaxSend`在 jQuery 中使用，设置它以便 jQuery 将这些令牌与每个请求一起传递：

```
initialize: ->
  @bindTo $(document), 'ajaxSend', @appendTokensToRequest

appendTokensToRequest: (event, jqXHR, options) ->
  if not @authToken? then return

  if @csrfToken?
    jqXHR.setRequestHeader 'X-CSRF-Token', @csrfToken

  if options.type is 'POST'
    options.data = options.data + (if options.data.match(/\=/) then '&' else '') +
    $.param auth_token:@authToken
  else
    options.url = options.url + (if options.url.match(/\?/) then '&' else '?') +
    $.param auth_token:@authToken 
```

然后我可以在 chrome 网络选项卡中看到，对于每个 GET 请求，`auth_token`正在发送参数以及`X-CSRF-Token`标头。

但是，在 PUT 请求上，它似乎不起作用。

我的理论是 CORS 把事情搞砸了。如果您发出 CORS 请求，您的浏览器实际上会首先发出一个**额外**的OPTIONS 请求，只是为了检查您是否有权访问此资源。

我怀疑是 OPTIONS 请求没有通过 X-CSRF-Token 标头，因此 rails 立即使 rails 端的 csrf_token 无效。然后，当 jQuery 发出实际的 PUT 请求时，它传递的 csrf_token 不再有效。

这可能是问题吗？

我能做些什么来证明这一点？Chrome 似乎没有在网络选项卡中向我显示 OPTIONS 请求来帮助我调试问题。

这不是一个大问题，因为我可以关闭 CSRF 的东西。但我想知道为什么它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T03:17:30.867

我认为您需要处理 OPTIONS 请求，该请求应响应允许 CORS 请求的各种标头，IIRC 它们是 access-control-allow-method、access-control-allow-origin 和 access-control-允许标题。因为 OPTIONS 请求失败，所以 PUT 请求可能没有发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-02T21:43:55.600

我刚刚遇到了同样的问题。问题是`_session_id`无法在 CORS 中发送 cookie。因此，当 Rails 尝试验证令牌时，`session[:_csrf_token]`is`null`和 Rails 在比较之前会生成一个新的。

要解决此问题，您需要在 CORS 中启用 cookie 发送。这是[Mozilla 开发者网络参考](https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS#Access-Control-Allow-Credentials)。服务器端和客户端都需要工作才能使其正常工作。

**客户端** - 请参阅您的客户端技术文档。

**服务器** -在对预检 (HTTP OPTIONS) 调用的响应中将标头设置`Access-Control-Allow-Credentials`为(string)。`true`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T05:38:06.247

在 Rails 中，每个表单提交都需要 CSRF 令牌真实性。它用于安全地提交表单。当我们打开我们的应用程序时，CSRF 令牌（每次）将在 rails 中新创建。如果 CSRF 令牌没有在我们的控制器内部传递，则会显示此警告。我们需要在所有表单提交中传递这个令牌。

# mysql - mysql putty 命令删除重复项

> ID：13043445
> 
> 赞同：0
> 
> 时间：2012-10-24T05:23:47.183
> 
> 标签：mysql, command-line, ssh, duplicates, putty

我喜欢从 mysql 数据库中删除重复的链接

从 phpmyadmin 这个命令对于 smal 数据库是可以的，但是在某些时候我有 5gb 数据在表中得到错误

从链接 t1 中删除 t2 加入链接 t2 开启（t2.page = t1.page AND t2.linkID > t1.linkID）；

我喜欢从 putty ssh 中删除重复的链接，但得到错误：

```
[root@server]# mysql -p 
```

输入密码：欢迎使用 MySQL 监视器。命令以 ; 结尾 或\g。您的 MySQL 连接 ID 是 11433 服务器版本：5.5.28 MySQL Community Server (GPL) by Remi

版权所有 (c) 2000, 2012，Oracle 和/或其附属公司。版权所有。

Oracle 是 Oracle Corporation 和/或其附属公司的注册商标。其他名称可能是其各自所有者的商标。

输入“帮助”；或 '\h' 寻求帮助。键入 '\c' 以清除当前输入语句。

```
mysql> select database
    -> DELETE t2 FROM   Link t1 JOIN   Link t2 ON (t2.page = t1.page AND t2.linkID > t1.linkID);
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DELETE t2 FROM   Link t1 JOIN   Link t2 ON (t2.page = t1.page AND t2.linkID > t1' at line 2
mysql> 
```

如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:34:05.013

最好使用像这样的更简单的查询来删除

```
DELETE FROM T2 WHERE LINK IN 
(SELECT T2.LINK FROM T1 JOIN T2 ON (T2.PAGE=T1.PAGE AND T2.LINKID > T1.LINKID)) 
```

# java - Netbeans：如何创建包含所有库和资源文件的可执行 .jar 文件？

> ID：13043448
> 
> 赞同：3
> 
> 时间：2012-10-24T05:24:21.420
> 
> 标签：java, netbeans, jar, executable-jar

我尝试`clean and build`在目录中找到了一个 .jar 文件`dist`。但是，.jar 文件中不存在程序正常运行所需的库和资源文件。一种解决方法是将所有库和资源文件放在 .jar 文件的同一目录或子目录中的某个位置。这是非常不方便的。如何将所有内容注入 .jar 文件？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-10-24T05:27:13.983

请参阅有关[打包和分发 Java 桌面应用程序](http://netbeans.org/kb/docs/java/javase-deploy.html)的 NetBeans 文档，尤其是有关[运行和分发 JAR 文件](http://netbeans.org/kb/docs/java/javase-deploy.html#run)的部分。

# haskell - 是否有任何有趣的模块可以处理函数的逆图像？

> ID：13043454
> 
> 赞同：7
> 
> 时间：2012-10-24T05:25:33.610
> 
> 标签：haskell, category-theory

我刚刚发现自己编写了一些如下代码：

```
import Prelude hiding (id, (.))
import Control.Category
import Control.Monad ((<=<))

-- | Intended law:
--
--     map forward . backward == id
--
data Invertible a b = 
    Invertible { forward :: a -> b
               -- Maybe switch from [a] to Monad m => m a? (Requires RankNTypes)
               , backward :: b -> [a] }

instance Category Invertible where
    id = Invertible id (:[])
    f . g = Invertible { forward  = forward f . forward g
                       , backward = backward g <=< backward f
                       } 
```

我曾尝试在 Google 上搜索有关 Haskell 的页面中使用术语“反向图像”或“原像”的情况，但没有运气。你们有没有人走过我现在走过的路，发现了这片土地？

我已经弄清楚这`Invertible a`不是 a `Functor`，因为当您尝试实现时， (no sensible function of type )`fmap :: (a -> r) -> Invertible a b -> Invertible a r`没有合理的价值。但也许还有其他一些我不知道的有趣操作。`backward . fmap f``(a -> r) -> (b -> [a]) -> r -> [a]`

# iphone - 如何检查最后一个数组元素并更改按钮图像

> ID：13043456
> 
> 赞同：0
> 
> 时间：2012-10-24T05:25:45.867
> 
> 标签：iphone, ios, uibutton, nsmutablearray

如果按钮图像到达数组的最后一个元素并在单击该按钮时从第一个开始执行，如何检查更改按钮图像？这是我的代码，请帮助我

```
-(IBAction)changenext:(id)sender
{
static int j = 0;
backimg.enabled=TRUE;
if(sender == nextimg)
    j++;
else if(sender == backimg)
    j--;
if (j >= arcount)
{
    j = 0;
}
else if(j < 0)
{
    j = arcount - 1;
}
imager.image=[arimage objectAtIndex:j];  

} 
```

我应该做些什么改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:46:42.593

嗨，我无法清楚地理解您的要求，但您只需`NSArray`使用此代码即可获得最后一个元素：-

`[myArray lastObject]`

例如：-

`NSString *str = [myArray lastObject]`

# javascript - jQuery DataTables - 包含文本字段的列的自定义过滤器

> ID：13043458
> 
> 赞同：1
> 
> 时间：2012-10-24T05:26:16.027
> 
> 标签：javascript, jquery, datatables

我正在使用 jQuery DataTables 插件。

我想为包含文本字段的列创建自定义过滤器。

我想根据列中输入字段的*值属性进行过滤。*

我需要这样做，这样我就可以避免让过滤器将 html 与搜索模式匹配。

例如，如果没有找到每一行，我就无法搜索*id*或*form （文本**表单在文本字段的**id 属性*中找到）。

我发现很多问题和论坛都说*mData*是我问题的答案。

无论我尝试什么，我都无法让它发挥作用。

这是我定义列的方式：

```
prefColumns:  [ { bSortable: true,  bSearchable: false, sSortDataType: 'dom-checkbox' },
                { bSortable: true,  bSearchable: true  },
                { bSortable: true,  bSearchable: true,  sSortDataType: 'dom-text' },
                { bSortable: true,  bSearchable: false, sSortDataType: 'slider'   },
                { bSortable: true,  bSearchable: false, sSortDataType: 'slider'   },
                { bSortable: true,  bSearchable: false, sSortDataType: 'slider'   },
                { bSortable: true,  bSearchable: false, sSortDataType: 'slider'   },
                { bSortable: true,  bSearchable: false, sSortDataType: 'slider'   },
                { bSortable: true,  bSearchable: false, sSortDataType: 'slider'   },
                { bSortable: true,  bSearchable: false } 
              ] 
```

我将上面的数组分配给 aoColumns 属性，如下所示：

```
// Find all the pref tables we want to turn into DataTables

var $categoryTables = $('table[id$="cat-table"]');

// Create a jQuery dataTable for each pref category

$categoryTables.dataTable( { 
    sScrollY:    "350px",
    bPaginate:   false,
    bAutoWidth:  false,
    sDom:        '<"prefsFilter"f>t',
    aoColumns:   prefColumns,
    aaSorting:   [[ 1, 'asc' ]]
}); 
```

一切正常。

这是我上面使用的自定义排序函数（以防万一）：

```
$.fn.dataTableExt.afnSortData['dom-text'] = function (oSettings, iColumn) {
    var aData = [];
    $('td:eq('+iColumn+') input', oSettings.oApi._fnGetTrNodes(oSettings) ).each(function () {
        aData.push( this.value );
    } );
    return aData;
};

// Add a custom sort function for columns that might contain checkbox fields.

$.fn.dataTableExt.afnSortData['dom-checkbox'] = function ( oSettings, iColumn ) {
    var aData = [];
    $('td:eq('+iColumn+')', oSettings.oApi._fnGetTrNodes(oSettings) ).each(function () {
        var $box = $(':checkbox', $(this));
        if ($box.length === 0) {
            aData.push("1");
        }
        else {
            aData.push( $box.is(':checked') ? "2" : "3" );
        }
    } );
    return aData;
};

// Add a custom sort function for columns with slider buttons

$.fn.dataTableExt.afnSortData['slider'] = function (oSettings, iColumn) {
    var aData = [];
    var s = 'input:hidden[id$="State"]';
    $('td:eq('+iColumn+') ' + s, oSettings.oApi._fnGetTrNodes(oSettings) ).each(function () {
        aData.push( this.value );
    } );
    return aData;
}; 
```

* * *

我表中的**第三列**是包含文本字段的列。

为了尝试使用*mData*属性，我一直在修改我的列定义，如下所示：

```
prefColumns:  [ { bSortable: true,  bSearchable: false, sSortDataType: 'dom-checkbox' },
                { bSortable: true,  bSearchable: true  },

                // add a mData property to the third column

                { bSortable: true,  bSearchable: true,  sSortDataType: 'dom-text', 
                  mData: function (src, type, val) { return type === 'filter' ? $(src).attr('value') : src; } },

                { bSortable: true,  bSearchable: false, sSortDataType: 'slider'   },
                { bSortable: true,  bSearchable: false, sSortDataType: 'slider'   },
                { bSortable: true,  bSearchable: false, sSortDataType: 'slider'   },
                { bSortable: true,  bSearchable: false, sSortDataType: 'slider'   },
                { bSortable: true,  bSearchable: false, sSortDataType: 'slider'   },
                { bSortable: true,  bSearchable: false, sSortDataType: 'slider'   },
                { bSortable: true,  bSearchable: false } 
              ] 
```

我已经尝试了一堆类似于上面的东西，但似乎没有像文档和在线示例那样工作。

我在任何论坛或其他问题中都没有发现任何问题。

如果有人能告诉我我的误解是什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:52:28.513

试试这个你的文本列：

```
{ "bSortable": true ,  "bSearchable" : true,
   "mData": function ( source, type, val ) {
       if (type === 'set') {
            source.disp = val
            source.filter = $(val).attr('value');
            return;
        }
        else if (type === 'filter') {
            return source.filter;
        }

        return source.disp; 
     }

  } 
```

唯一的缺点是，如果您更改字段然后尝试再次搜索 - 它不会考虑更改。因此，如果您发现如何再次即时调用 mData 方法 - 一切都会正常运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T13:14:19.660

可以使用aoColumns中的mRender属性来指定选择框的选中值进行过滤

```
"mRender": function ( data, type, full ) {
    if (type === "filter")
    {
          node = $.parseHTML(data);
          var val = $(node).find("select option:selected").text();                     
              return val;
    }
    return data;
} 
```

如果您使用此方法，请注意您不应在该列上使用 SortDataType='dom-select'

# php - 想要将 PHP 5.3 升级到 5.4？

> ID：13043460
> 
> 赞同：6
> 
> 时间：2012-10-24T05:26:23.900
> 
> 标签：php

我刚开始使用 php，所以我不知道升级涉及什么。目前，我正在使用 php 5.3，并希望迁移到 5.4。这是怎么做到的？它只是 5.4 的简单安装吗？这会破坏5.3中编写的代码吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T05:28:23.767

[从 PHP 5.3.x 迁移到 PHP 5.4.x](http://php.net/manual/en/migration54.php)是有关此类升级的信息。

特别是查看[向后不兼容的更改](http://www.php.net/manual/en/migration54.incompatible.php)部分。PHP 5.4 中删除了一些函数，如果您的 PHP 5.3 代码正在使用它们，您将得到错误。例如，`session_register()`函数在 PHP 5.4 中不存在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T05:33:42.810

这取决于哪个 Linux 发行版。您正在使用。

你可以试试：yum update php

或者：sudo apt-get install php5-cgi php5-cli

我强烈建议您在升级任何实时服务器之前在 5.4 上测试您的代码，因为很可能存在一些重大差异（与大多数 PHP 升级一样正常）。

# c - 在 C 中使用 strdup 的奇怪错误

> ID：13043468
> 
> 赞同：1
> 
> 时间：2012-10-24T05:27:03.070
> 
> 标签：c, malloc, strdup

我正在尝试在 C 中使用 strdup() 函数，但遇到了一个涉及 malloc 的奇怪错误。我的精简代码是：

```
void loadEntity(FILE *inFP, entity_t *ent, char *token) {
char buffer[100] = "buffer";
if (strcmp(token, "name") == 0) {
  if (fscanf(inFP, "%s", buffer) != 1) {

   fprintf(stderr,"%s\n", "Error reading name.");
   exit(1);
   }

  //For testing purposes
  fprintf(stdout, "Buffer: %s", buffer);

  ent -> name = strdup(buffer);
}
} 
```

结果是：

```
hw6: malloc.c:2451: sYSMALLOc: Assertion `(old_top == (((mbinptr) (((char *) &((av)->bins[((1) - 1) * 2])) - __builtin_offsetof (struct malloc_chunk, fd)))) && old_size == 0) || ((unsigned long) (old_size) >= (unsigned long)((((__builtin_offsetof (struct malloc_chunk, fd_nextsize))+((2 * (sizeof(size_t))) - 1)) & ~((2 * (sizeof(size_t))) - 1))) && ((old_top)->size & 0x1) && ((unsigned long)old_end & pagemask) == 0)' failed. 
```

缓冲区：plane1Aborted（核心转储）

在结果的最后，您可以看到我的 fprintf 语句 (Buffer: plane1) 的结果，这正是它应该的样子。我输入文本的第一行是“name plane1”。所以基本上，它是查看令牌名称，获取下一个单词，然后将 ent -> name 设置为此。看起来很简单，但它不起作用。请注意，即使我删除了 if 语句，它也有相同的结果。此外，如果我将其设为“strdup("String")”，我也会遇到同样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T05:47:52.653

> 此外，如果我将其设为“strdup("String")”，我也会遇到同样的问题。

我认为内存在其他地方已损坏，您应该使用 valgrind 或其他东西来检测内存泄漏，然后从那里开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T05:43:16.823

我怀疑这是因为缓冲区太小并且 fscanf 损坏了内存。尝试 %99s 作为对此的快速测试。

永远不要写这样的代码，它允许外部数据导致缓冲区溢出。如果你看到这样的代码，烧掉它，用火烧掉它！;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-18T08:32:09.767

使用电子围栏检测缓冲区溢出：

```
apt-get install electric-fence

gcc -c -o prog.o prog.c -g
gcc -o prog prog.o -lefence -g

gdb ./prog

run 
```

你会有缓冲区溢出的行。

很简单 ！

# jquery - 通过 JQuery 轻松检索元素

> ID：13043473
> 
> 赞同：0
> 
> 时间：2012-10-24T05:27:47.320
> 
> 标签：jquery, html

我的问题更多是关于如何实现一件事的最佳方式/实践。假设我有可能为 JQuery 创建一个 html 代码来检索一些文本值。最好的方法是什么？

我知道您可以使用 get by id 等来获取一个值，所以基本上我可以创建自己的具有唯一 ID 的 div 并通过 JQuery 在其中检索一些值。但这是好方法吗？当然还有一点，价值不应该被老百姓看到。

也许我应该把值作为一个属性？键值对？并通过 id 获取元素并获取属性？

那么有什么建议，在页面上存储一个值并轻松检索它的最佳方法？

提前致谢

**更新：**

一个例子：我做了如下的事情：

```
<div id="uniqueID" style="display:none"> Value which in need </div> 
```

这是一些解决方案，然后我只需要用 JQuery 检索这个值，很简单。但是我想知道有没有更好的方法，也许HTML中有一些特殊的标签，或者其他人喜欢的东西，等等......

通过 jquery，我只是说：

```
$("#uniqueId").val() 
```

而且不应该有什么更复杂的安静的简单，不知道它可以这么不清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:43:39.153

如果您只是希望您的服务器在您的页面中嵌入一个对查看器不可见的值，然后您可以在 javascript 中检索该值，您也可以让您的服务器直接将该值放入 javascript 变量中。如果您只需要在 javascript 中使用它，则没有理由将其放入 DOM 中。

例如，您可以将其放在您的页面中：

```
<script>
var myValueSetByServer = "foo";
</script> 
```

然后，您可以访问`myValueSetByServer`页面中的任何位置 javascript。没有必要把它放在一个 div 或一个属性或类似的东西上。

如果你有很多这样的，你可以定义一个对象，让你的值都是对象的属性：

```
<script>
var myServerValues = {prop1: "foo", prop2: "whatever", user: "fred", type: "person"};
</script> 
```

* * *

当然，还有很多其他方法可以像您提到的那样在实际页面中存储内容，包括 DOM 节点上的数据属性、隐藏 DOM 节点的文本值等......如果您只想使用来自 javascript 的值，请在 javscript 变量中使用值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T06:47:28.157

您可以将所需的值添加为属性，例如

`<div id="smth" data-you-need="value"></div>.`

然后得到它

`$('#smth').attr('data-you-need')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T06:06:28.757

一种方法是在您的服务器上创建一个 PHP 页面，如下所示：

```
<?php print "topsecretvalue" ?> 
```

并使用 AJAX 加载它。

但是，如果您只是希望它不显示在可见页面上，并且您可以通过查看源代码相对容易地找到它，那么只需在 Javascript 中设置一个变量第一个脚本标签的顶部，并在需要时使用它。无需将其放在 DIV 中的某个位置！

# javascript - 如何在鼠标单击时隐藏潜水 $(document).click 将在我显示索引页面时隐藏

> ID：13043478
> 
> 赞同：0
> 
> 时间：2012-10-24T05:28:07.453
> 
> 标签：javascript, jquery

我有索引页面，它应该显示我的 div id myajaxdiv 当用户单击页面中的每个位置时如何隐藏它？即使在索引页面中，此代码也会将其隐藏而无需任何点击。

```
$(document).click(function() {
   $("#myajaxdiv").css({'display':'none'});
}); 
```

我的 div 是空的，使用 ajax 我将使它成为完整的 html：

```
<div class="well sidebar-nav">
          <div id="myajaxdiv" >           
            </div> 
```

在准备好的功能中我有ajax：

```
$.ajax({

        type:'POST',
        url:'news.php',
        success:function(data){
            var query ='';
    var mycontent = 'تازه ها<hr/>';
        $('.queryForm').hide(300);
    $('.message').html('');

    for(i=0;i<data.length;i++) {

                    query = data[i];
                    mycontent += '<ul class="starred-queries"><li class="question">' + query.ques  + '</li>';
                    mycontent +=  '<li class="answer">' + query.answer + '</ul>';                   

            }

            $('#myajaxdiv, .well #myajaxdiv').html(mycontent);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:36:39.097

要在单击元素时隐藏 div，您可以执行以下操作（即对于类按钮）：

```
$('.button').click(function() {
   $('#myajaxdiv').hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T05:32:00.003

```
$(document).ready(function() {
$('.button').click(function() {
$("#myajaxdiv").css('display','none');
}) }); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-24T05:29:10.003

尝试这个：

```
$(".button").click(function(){
     $("#myajaxdiv").hide();

}) 
```

# jquery - 禁用操作后按钮标签消失

> ID：13043480
> 
> 赞同：-1
> 
> 时间：2012-10-24T05:28:12.163
> 
> 标签：jquery, css, disabled-input

这是我面临的一个非常奇怪的问题

**HTML：**

```
<input type="button" id="buttonobj" class="some class" value ="Button Name"/> 
```

**jQuery：**

```
$(function(){

 $buttonObject = $('#buttonObj");
 $buttonObject.button('disable');

}); 
```

当我运行这段代码并在萤火虫中观看 HTML 时，我得到了

```
<input type="button" id=buttonobj" class="some class" value =""/> 
```

价值消失了。

禁用在这里做什么。它怎么能改变价值。css是否可以更改按钮值？

我正在使用 jQuery-ui

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T05:38:41.993

代码中有一些错误。试试这个：（我修复了一些丢失/错误的引号，并将 jquery“禁用按钮”行更改为我知道有效的内容，因为我不熟悉您使用的代码）

**HTML：**

```
<input type="button" id="buttonobj" class="class" value="Button Name" /> 
```

**jQuery：**

```
$(function(){
   $buttonObject = $("#buttonObj");
   $buttonObject.prop("disabled", true);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T05:39:12.930

要更改禁用属性的值，请使用以下命令：

```
$(function(){

 $buttonObject = $("#buttonobj");
 $buttonObject.prop('disabled', true);
 alert($buttonObject.val());

});​ 
```

[http://jsfiddle.net/mYz3b/1/](http://jsfiddle.net/mYz3b/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T05:42:49.817

html 中的两个错误，id 属性上缺少引号以及 value 和 equals 之间的空格

所以应该是：

```
<input type="button" id="buttonObj" class="some class" value=" Button Name"/> 
```

对于 jQuery：

```
$(function(){
    $buttonObject = $("#buttonObj");
    $buttonObject.attr("disabled", "disabled");
}); 
```

`$buttonObject.removeAttr("disabled");`如果您想重新启用它，请使用它。

编辑：

按钮和 jQuery 中的 id 也与更新的代码不匹配。

编辑：

你可以用普通的 javascript 做同样的事情：

```
function someFunc(){
    document.getElementById("buttonObj").disabled = "disabled";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T20:35:58.143

终于发现问题了！

没有人回答这个问题

**禁用在这里做什么。它怎么能改变价值。css是否可以更改按钮值？**

答案是定制的 jQuery Ui。在调用`button.disable`函数时，它是隐式设置这两个类

`ui-button-disabled` `ui-state-disabled`

感谢这里的所有解决方案，但我知道所有这些方法。由于它是我从某人那里接管的代码，因此我不应该更改，而只是查找，为什么它在集成时不起作用

# dynamic - 最佳子结构的直觉是什么？

> ID：13043485
> 
> 赞同：2
> 
> 时间：2012-10-24T05:28:37.007
> 
> 标签：dynamic, clrs

这个问题与动态规划有关，特别是来自 CLRS Pg 362 的棒切割问题

> 整体最优解包含两个相关子问题的最优解。

通过找到单个子问题的最优解，然后以某种方式将它们组合在一起，从而获得整体最优解。我无法理解直觉和概念。任何链接，示例？

> 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:21:09.877

您可以比较动态编程和贪婪方法。

最优子结构是指通过找到子问题的最优解可以找到最优解。如果不是这种情况，那么子问题的最优解之和不会给我们最优的全局解。

例如，考虑 Dijkstra 算法。如果我们知道从节点 A 到节点 C 的最短路径，那么我们也可以使用此信息来找到到另一个节点的最短路径。

如果不是这种情况，我们就无法对子问题组合最优解并获得全局最优解，我们可以使用贪心方法。例如，看看[改变问题](http://en.wikipedia.org/wiki/Change-making_problem)。贪心算法做出局部最优决策并找到一些解决方案，但不能保证该解决方案是最优的。

# comet - 有没有框架可以实现Bayeux，挂在rensin？

> ID：13043487
> 
> 赞同：0
> 
> 时间：2012-10-24T05:28:49.747
> 
> 标签：comet, resin, bayeux

貌似 ComeD 只能扩展 jetty，有没有框架可以实现 Bayeux 和 hang in rensin，或者其他基于长轮询的框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:11:36.760

CometD 项目是完全可移植的，可以在任何符合 Servlet 3.0 的 servlet 容器中工作，因此它也应该在 Resin 中工作，请参阅[http://docs.cometd.org/reference/#java](http://docs.cometd.org/reference/#java)。

你不能在 Resin 中得到什么（我猜你在写“rensin”时是指 Resin）是 WebSocket 支持，因为这是 CometD 中唯一特定于 Jetty 的部分。CometD 正在等待 JSR 356 标准化 WebSocket API，以便编写可在任何兼容的 servlet 容器中工作的 WebSocket 支持；这项工作已经在 J​​etty 9 和 CometD 3 中开始。

# python - 即使有零测试，django-nose 也需要 15 秒

> ID：13043488
> 
> 赞同：1
> 
> 时间：2012-10-24T05:28:51.460
> 
> 标签：python, django, performance, django-nose

我正在使用 django-nose`REUSE_DB=1`并禁用了我的所有测试，只是为了查看它所需的设置时间。

```
localhost:MyProject rohitjangid$ python manage.py test  
nosetests --verbosity 1

----------------------------------------------------------------------
Ran 0 tests in 0.000s

OK
localhost:MyProject rohitjangid$ 
```

整个过程的实际时间平均为 15 秒。

我的明显猜测是 mysql 数据库，所以我查看了日志，发现鼻子正在运行一些`ALTER TABLE`查询。我的日志：

*   [http://i.stack.imgur.com/HJECP.png](http://i.stack.imgur.com/HJECP.png)
*   [http://i.stack.imgur.com/tlsR0.png](http://i.stack.imgur.com/tlsR0.png)

查看日志，即使不是每次都创建数据库，它似乎也花费了太多时间。这完全正常吗？

我的设置：带有 mysql 5.5、django 1.3.1 的 OSX lion。

# mysql - Eclipse:GWT connect to MYSQL:error:the driver has not received any packet from the server

> ID：13043489
> 
> 赞同：1
> 
> 时间：2012-10-24T05:29:02.523
> 
> 标签：mysql, gwt

我正在使用 GWT 连接到 MYSQL。但是我每次收到如下错误： **com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure 最后一个成功发送到服务器的数据包是0毫秒前。驱动程序没有收到来自服务器的任何数据包。** 我已经把驱动文件放到了war\WEB-INF\lib。并且驱动程序已经加载。对于普通的 JAVA 项目，我可以使用相同的代码在 MYSQL 中查找文件。但是为什么不能在 GWT 项目中使用相同的代码呢？

公共类 GreetingServiceImpl 扩展 RemoteServiceServlet 实现 GreetingService {

```
public String greetServer(String input) throws IllegalArgumentException {
                            Connection conn = null;
                    String url ="jdbc:mysql://localhost:3306/pcmorder";
            String driver = "com.mysql.jdbc.Driver";
            String user     = "root";
            String pass     = "123456";

            //String query = "SELECT id FROM tb_user WHERE username = ";
            String sql=null ;
            String[] namelist;
            int name1=0 ;

            try {
                Class.forName(driver).newInstance();
                System.out.println("OK"); 
                conn = DriverManager.getConnection(url, user, pass); 
```

# c# - 如何在两个不同的 DataTable 中添加一个 DataColumn？

> ID：13043490
> 
> 赞同：1
> 
> 时间：2012-10-24T05:29:07.547
> 
> 标签：c#, asp.net

我试图在两个不同的 DataTable 中添加一个 DataColumn，但它给了我错误并说“列'imgCount'已经属于另一个 DataTable”。我可以这样做吗？这是我的代码。

```
DataTable dtS = new DataTable();
DataTable dtF = new DataTable();
DataColumn imgCount = new DataColumn("imgCount",Type.GetType("System.Int32"));
imgCount.DefaultValue = 0;
dtS = dvSho.ToTable("shooters");
dtS.Columns.Add(imgCount);
dtF = dvFys.ToTable("fyshwick");
dtF.Columns.Add(imgCount); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:30:17.310

您不能将单个列实例添加到 DataTables。

为这两个表创建单独的实例。

```
DataColumn imgCount = new DataColumn("imgCount",Type.GetType("System.Int32"));
DataColumn imgCount2 = new DataColumn("imgCount",Type.GetType("System.Int32"));

dtS = dvSho.ToTable("shooters");
dtS.Columns.Add(imgCount);

dtF = dvFys.ToTable("fyshwick");
dtF.Columns.Add(imgCount2); 
```

# solr - Solr 4 替代 SolrPluginUtils.addOrReplaceResults？

> ID：13043505
> 
> 赞同：3
> 
> 时间：2012-10-24T05:30:34.657
> 
> 标签：solr

Solr 4.0 中 SolrPluginUtils.addOrReplaceResults 的替换方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T01:43:20.633

看起来，此方法已从 SolrPluginUtils 类中删除。但是你可以自己写。代码非常简单

```
 public static void addOrReplaceResults(SolrQueryResponse rsp, SolrDocumentList docs) 
  {
    NamedList vals = rsp.getValues();
    int idx = vals.indexOf( "response", 0 );
    if( idx >= 0 ) {
      log.debug("Replacing DocList with SolrDocumentList " + docs.size());
      vals.setVal( idx, docs );
    }
    else {
      log.debug("Adding SolrDocumentList response" + docs.size());
      vals.add( "response", docs );
    }
  } 
```

# objective-c - UIViewController 什么时候在 ARC 中被删除

> ID：13043509
> 
> 赞同：1
> 
> 时间：2012-10-24T05:30:57.237
> 
> 标签：objective-c, xcode, ios4, automatic-ref-counting, dealloc

我正在做一个基于 ARC 的项目。我有两个 ViewController。在第一个 ViewController 中，我有一个按钮，按下该按钮时，我正在推动新的 ViewController。

我这样做如下：

```
SecondViewController *second=[[SecondViewController alloc]initWithStrVal:self.strVal];
[self.navigationController pushViewController:second animated:YES]; 
```

我的问题是当我推送 SecondViewController 时，然后在被调用`FirstView Controller`的`SecondViewController`dealloc 方法中创建一个对象。`FirstViewController`

`FirstViewController`如果我只进行推送并且不创建in的实例，则不会调用 dealloc 方法`SecondViewController`。据我所知，当我推送视图控制器时，`dealloc`不应该在正常场景中调用，因为在基于 ARC 的项目的正常场景中不应该删除以前的 ViewController

**编辑：**

第一个 ViewController 在应用程序委托中设置如下：

```
self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil]; 
self.navController=[[UINavigationController alloc]initWithRootViewController:viewController]; 
self.window.rootViewController = self.navController; 
```

# mips - 采用或未采用的分支序列，可降低分支误预测率

> ID：13043510
> 
> 赞同：3
> 
> 时间：2012-10-24T05:31:00.100
> 
> 标签：mips, pipeline, cpu-architecture, branch-prediction

> 增加分支预测表的大小意味着程序中的两个分支不太可能共享一个公共预测器。预测单个分支指令的单个预测器通常比服务多个分支指令的相同预测器更准确。
> 
> 列出已采取和未采取的一系列分支操作，以显示与情况相比降低分支误预测率的 2 位预测器共享（多个不同的分支指令映射到预测表的同一条目）的简单示例其中每个分支使用单独的预测器条目。（注意：一定要展示两个不同分支指令的结果，并具体标明这些结果的顺序和对应的分支）

有人可以向我解释这个问题具体要求什么吗？另外，“2位预测器共享（几个不同的分支指令映射到预测表的同一条目）”和“每个分支使用单独的预测器条目”是什么意思？我一直在阅读和重读我的笔记，但我无法弄清楚。我试图在网上找到一些分支预测示例，但没有找到。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T06:15:55.453

“2 位预测器”可能指的是两件事中的任何一件，但更可能是一件。

不太可能的可能性是它们意味着一个只有四个条目的分支表，因此使用两位将特定分支与表中的条目相关联。这不太可能，因为 4 条目表非常小，以至于*许多*分支将共享相同的表条目，因此分支预测器不会比静态分支预测更准确（例如，总是预测反向分支，因为它们' re 通常用于形成循环）。

更相似的可能性是使用两位来指示是否可能采用分支。包括分支预测在内的一些最早的微处理器（例如 Pentium、PowerPC 604）大致以这种方式工作。基本思想是您保留一个两位饱和计数器，并根据其当前状态进行预测。英特尔称这些状态为强不采用、弱不采用、弱采用、强烈采用。这些将被编号为（例如）0、1、2 和 3，因此您可以使用两位计数器来跟踪状态。每次采用分支时，都会增加数字（除非它已经是 3），每次不采用时，都会减少它（再次，除非它已经是 0）。如果计数器为 0 或 1，您需要预测分支时，您会预测未采用的分支，如果它'^.

用于每个分支的单独预测器条目意味着程序中的每个分支指令在分支预测表中都有自己的条目。另一种方法是从分支指令到表条目的某种映射。例如，如果您有一个包含 2 ^(20)个条目的表，您可以使用分支指令地址中的 20 位，并将这些位用作表的索引。假设一台具有 32 位寻址和 32 位指令的机器，您将有多达 1024 个分支指令可以映射到表中的任何一个条目（32-20-2 = 10、2 ^(10) = 1024）。实际上，您希望只有一小部分指令是分支，一些用于数据的地址空间等，因此可能只有少数分支会映射到表中的一个条目。

至于它所要求的基本问题：他们想要一个分支指令序列，当两个分支映射到分支预测器表中的同一个槽时，它们将（巧合地）预测得比当/如果每个映射到时*更*准确。表中的一个单独的插槽。为了稍微详细一点（但希望不会泄露整个谜题），从分支预测器通常会出错的分支模式开始。预测器基本上所做的是假设如果分支是最后一次被采用，这表明它更有可能被采用（相反，如果它上次没有被采用，它可能也不会是这次）。

所以，你从一个完全相反的分支模式开始。然后，您希望将第二个分支映射添加到分支预测表中的同一位置，该映射将遵循分支模式，该模式将调整分支预测器表中的数据，以便更准确地反映*即将到来*的分支而不是前一个分支.

* * *

¹从技术上讲，Pentium 实际上并没有以这种方式工作，但它是被记录的工作方式，并且可能打算工作；它实际工作方式的差异似乎是一个错误。

# html - 创建 CSS HTML5 下拉导航

> ID：13043511
> 
> 赞同：1
> 
> 时间：2012-10-24T05:31:30.460
> 
> 标签：html, css

我有这个导航代码

```
 <div id="navigation">
        <a href="/">Home</a>
        <a href="index.php?sida=link2">link2</a>
        <a href="index.php?sida=lin3">link3</a>
        <a href="index.php?sida=link4">link4</a>
        <a href="index.php?sida=link5">link5</a>
        <a href="index.php?sida=link6">link6</a>
        <a href="index.php?sida=link7">Link7</a>
        </div> 
```

这是导航的CSS

```
#navigation {
float: left;
height: 61px;
width: 885px;
background: url(../../../../images/navigation.png) no-repeat;
padding: 0 0 0 12px; 
```

}

```
#navigation a {
font-size: 12px;
font-weight: bold;
float: left;
display: block;
height: 29px;
padding: 11px 30px 0 32px;
color: #FFF;
text-decoration: none;
margin: 10px 0 0 0; 
```

}

```
#navigation a:hover {
background: url(../../../../images/navigation_over.png) repeat-x; 
```

}

```
#navigation a:hover.dropdown {
background: url(../../../../images/navigation_drop.gif) repeat-x; 
```

}

我一直在尝试学习如何为我的导航创建下拉菜单，但没有成功。

有没有好心人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:37:11.247

我用这个 css 创建下拉菜单：（足够老，对我来说无处不在）

```
.vmenu {
list-style:none;
height:75%;
min-height:24px;
width:16.67%;
max-width:544px;
min-width:90px;
text-align:center;
float:left;
z-index:1;
}
.vmenu > li {
width:100%;
list-style:none;
}
.vmenu > a {
background-color:#FFAF00;
width:100%;
height:100%;
display:block;
cursor:pointer;
}
.vmenu li > a {
background-color:#FF9F00;
display:block;
cursor:pointer;
}
.vmenu > li {
display:none;
}
.vmenu:hover > li {
display:block;
}
.vmenu > a:focus~li {
display:block;
}
/* with CSS4 which is not yes supported by any browser
it has to be handled with javascript somehow
selects the li instead of a:focus to let the tab go through
.vmenu > $li > a:focus {
display:block;
}
*/
.vmenu li > a:hover {
background-color: #2580FF;
color:#DDDDDD;
}
.vmenu li > a:focus {
background-color: #2580FF;
color:#DDDDDD;
}
.vmenu > a:hover {
background-color: #258072;
color:#DDDDDD;
}
.vmenu > a:focus {
background-color: #258072;
color:#DDDDDD;
}
.vmenu > li > ul.vmenu {
width:100%;
display:none;
}
.vmenu:hover > li > ul.vmenu {
display:block;
}
.vmenu > a:focus~li > ul.vmenu {
display:block;
}
.vmenu > li > ul.vmenu > li {
display:none;
padding:0px 0px 0px 100%;
}
.vmenu li ul.vmenu > a {
background-color:#FFAF0F;
float:left;
}
.vmenu li ul.vmenu:hover > a {
background-color:#258072;
color:#DDDDDD;
}
.vmenu li ul.vmenu > a:focus {
background-color:#258072;
color:#DDDDDD;
}
.vmenu > li > ul.vmenu:hover > li {
top:0;
display:block;
cursor:pointer;
}
.vmenu > li > ul.vmenu > a:focus~li {
top:0;
display:block;
cursor:pointer;
}
/* with CSS4 which is not yes supported by any browser
it has to be handled with javascript somehow
selects the li instead of a:focus to let the tab go through
.vmenu > li > ul.vmenu > $li > a:focus {
top:0;
display:block;
cursor:pointer;
} 
```

具有完全嵌套的子菜单并部分支持键盘导航。参见：css 中的注释

示例 html：

```
<!DOCTYPE html>
<html>
    <head>
        <style>
* {
border-spacing:0px;
border:none;
height:inherit;
width:inherit;
margin:0px 0px 0px 0px;
padding:0px 0px 0px 0px;
background-repeat:no-repeat;
background-position:center;
}
body {
width:90%;
max-width:1600px;
min-width:800px;
margin:auto;
}
body > div {
width:100%;
}
.vmenu {
list-style:none;
height:75%;
min-height:24px;
width:16.67%;
max-width:544px;
min-width:90px;
text-align:center;
float:left;
z-index:1;
}
.vmenu > li {
width:100%;
list-style:none;
}
.vmenu > a {
background-color:#FFAF00;
width:100%;
height:100%;
display:block;
cursor:pointer;
}
.vmenu li > a {
background-color:#FF9F00;
display:block;
cursor:pointer;
}
.vmenu > li {
display:none;
}
.vmenu:hover > li {
display:block;
}
.vmenu > a:focus~li {
display:block;
}
/* with CSS4 which is not yes supported by any browser
it has to be handled with javascript somehow
selects the li instead of a:focus to let the tab go through
.vmenu > $li > a:focus {
display:block;
}
*/
.vmenu li > a:hover {
background-color: #2580FF;
color:#DDDDDD;
}
.vmenu li > a:focus {
background-color: #2580FF;
color:#DDDDDD;
}
.vmenu > a:hover {
background-color: #258072;
color:#DDDDDD;
}
.vmenu > a:focus {
background-color: #258072;
color:#DDDDDD;
}
.vmenu > li > ul.vmenu {
width:100%;
display:none;
}
.vmenu:hover > li > ul.vmenu {
display:block;
}
.vmenu > a:focus~li > ul.vmenu {
display:block;
}
.vmenu > li > ul.vmenu > li {
display:none;
padding:0px 0px 0px 100%;
}
.vmenu li ul.vmenu > a {
background-color:#FFAF0F;
float:left;
}
.vmenu li ul.vmenu:hover > a {
background-color:#258072;
color:#DDDDDD;
}
.vmenu li ul.vmenu > a:focus {
background-color:#258072;
color:#DDDDDD;
}
.vmenu > li > ul.vmenu:hover > li {
top:0;
display:block;
cursor:pointer;
}
.vmenu > li > ul.vmenu > a:focus~li {
top:0;
display:block;
cursor:pointer;
}
/* with CSS4 which is not yes supported by any browser
it has to be handled with javascript somehow
selects the li instead of a:focus to let the tab go through
.vmenu > li > ul.vmenu > $li > a:focus {
top:0;
display:block;
cursor:pointer;
}
*/
        </style>
    </head>
    <body>
        <div>
            <ul class="vmenu"><a href="">Menu1</a>
                <li><a href="">Item1</a></li>
                <li><a href="">Item2</a></li>
                <li><a href="">Item3</a></li>
                <li><a href="">Item4</a></li>
                <li><a href="">Item5</a></li>
                <li>
                    <ul class="vmenu"><a href="">SubMenu1</a>
                        <li><a href="">Item1</a></li>
                        <li><a href="">Item2</a></li>
                        <li><a href="">Item3</a></li>
                        <li><a href="">Item4</a></li>
                        <li><a href="">Item5</a></li>
                    </ul>
                </li>
                <li>
                    <ul class="vmenu"><a href="">SubMenu2</a>
                        <li><a href="">Item1</a></li>
                        <li><a href="">Item2</a></li>
                        <li><a href="">Item3</a></li>
                        <li><a href="">Item4</a></li>
                        <li><a href="">Item5</a></li>
                        <li>
                            <ul class="vmenu"><a href="">SubMenu1</a>
                                <li><a href="">Item1</a></li>
                                <li><a href="">Item2</a></li>
                                <li><a href="">Item3</a></li>
                                <li><a href="">Item4</a></li>
                                <li><a href="">Item5</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
            <ul class="vmenu"><a href="">Menu2</a>
                <li><a href="">Item1</a></li>
                <li><a href="">Item2</a></li>
                <li><a href="">Item3</a></li>
                <li><a href="">Item4</a></li>
                <li><a href="">Item5</a></li>
                <li>
                    <ul class="vmenu"><a href="">SubMenu1</a>
                        <li><a href="">Item1</a></li>
                        <li><a href="">Item2</a></li>
                        <li><a href="">Item3</a></li>
                        <li><a href="">Item4</a></li>
                        <li><a href="">Item5</a></li>
                    </ul>
                </li>
                <li>
                    <ul class="vmenu"><a href="">SubMenu2</a>
                        <li><a href="">Item1</a></li>
                        <li><a href="">Item2</a></li>
                        <li><a href="">Item3</a></li>
                        <li><a href="">Item4</a></li>
                        <li><a href="">Item5</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </body>
</html> 
```

...它需要您在 z-index 和颜色方面进行一些工作，以使其看起来更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T05:41:17.790

下拉***[导航演示](http://jsfiddle.net/3qPbE/18/)***

嗨，如果您在`css`

做这个

像这样

**HTML 代码**

```
<ul id="navi">
    <li><a href="" class="active">LInk 1</a></li>
    <li><a href="">LInk 2</a>
        <ul class="subnavi">
            <li><a href="">LInk 1</a></li>
            <li><a href="">LInk 1</a></li>
            <li><a href="">LInk 1</a></li>
            <li><a href="">LInk 1</a></li>
            <li><a href="">LInk 1</a></li>    
        </ul>

    </li>
    <li><a href="">LInk 3</a></li>

    <div class="cl"></div>
</ul> 
```

**CSS代码**

```
.cl{clear:both;}
#navi{
    background:#0082c8;
    position:relative;
    margin-top:15px;
}

#navi > li{
    float:left;
    margin:0 10px;
    position:relative;
    padding:14px 0;
}

#navi li a, .subnavi li a{
    color:white;
    text-decoration:none;
    display:inline-block;
    line-height:29px;
    padding:0 13px;
    font-size:16px;
    font-family:arial;
    text-shadow: 0px 2px 2px #034e9f;
    filter: dropshadow(color=#034e9f, offx=0, offy=2);
}

#navi > li:hover > a, li:hover > a , #navi li a.active{
    background:#055c9f;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    -webkit-box-shadow: inset 0px 3px 3px 0px #042960;
    -moz-box-shadow: inset 0px 3px 3px 0px #042960;
    box-shadow: inset 0px 3px 3px 0px #042960;
    border:1px solid #009ada;
    color:#f7cf00;
    line-height:27px;
    padding:0 12px;               
}

.subnavi{
    position:absolute;
    display:none;
    top:51px;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    -webkit-box-shadow: 0px 0px 3px 1px #979395;
    -moz-box-shadow: 0px 0px 3px 1px #979395;
    box-shadow: 0px 0px 3px 1px #979395;
    background:#0082c8;
    border:1px solid #005890;
    padding:10px 0;
    white-space:nowrap;
}

#navi li:hover .subnavi{
    display:block;

}
#navi .subnavi li{
    margin:0;
}
#navi .subnavi li a{
    display:block;
    font-size:13px;
    padding:0 15px;
    border-radius:0;
    line-height:27px;
}
#navi .subnavi li a:hover{
    padding:0 15px;
    border-radius:0;
    border-left:0;
    border-right:0;
    line-height:25px;
} 
```

[[现场演示][2]*](http://jsfiddle.net/3qPbE/18/)*********

# php - domxpath 正则表达式通配符

> ID：13043515
> 
> 赞同：0
> 
> 时间：2012-10-24T05:31:56.683
> 
> 标签：php, xpath, domxpath

我正在编写一个 PHP 脚本来提取在其 id 示例中递增的 div id：

```
<div id="tag_1">content</div>
<div id="tag_2">content</div> 
```

所以基本上，我如何使用通配符编写查询 domxpath，如下所示：

```
$nodes = $xpath->query("//div[@id='tag_.*']"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:47:08.287

你可以使用starts-with

```
"//div/@id[starts-with(., 'tag_')]/.." 
```

# java - 处理数组时变量可能尚未初始化

> ID：13043517
> 
> 赞同：0
> 
> 时间：2012-10-24T05:32:15.547
> 
> 标签：java

在我创建的一个方法中，我试图创建的目的是返回一个用户输入的字符串数组。我遇到的问题是编译器说`userData`可能没有在`userData[i]=tempData;`和 at初始化`return userData;`。我不确定为什么会发生此错误，并希望得到一些反馈。

```
public String[] getStringObj() {
    int i = 0;
    String tempData;
    String[] userData;
    Boolean exitLoop = false;
    System.out.println("Please list your values below, separating each item using the return key.  To exit the input process please type in ! as your item.");
    do {
        tempData = IO.readString();
        if (tempData.equals("!")) {
            exitLoop=true;
        } else {
            userData[i] = tempData;
            i++;
        }
    } while (exitLoop == false);
    return userData;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:33:25.617

您`userData`尚未初始化，您正尝试`userData[i]=tempData;`在初始化之前在此处使用它。

将其初始化为

```
String[] userData = new String[20]; 

//20 is the size of array that I specified, you can specify yours 
```

同样在您的`while`情况下，您可以拥有`while(!exitLoop)`而不是`while(exitLoop==false)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T05:33:48.183

你没有初始化`String[]`. 做吧`String[] userData = new String[length]`。如果您不确定长度，您可能只想使用`ArrayList<String>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T05:41:19.853

为了提高代码质量：

1.  你不需要那个`exitLoop`标志；做就是了

    ```
    while(true) {
        String input = IO.readString();
        if(input.equals("!")) {
            break;
        }
        /* rest of code */
    } 
    ```

2.  由于您似乎只想无限制地将东西添加到数组中，因此请使用 an`ArrayList`而不是数组（额外的好处，这也摆脱`i`了）：

    ```
    List<String> userData = new ArrayList<String>();
    ...
    userData.add(line); 
    ```

如果你做这两件事，你的代码会更加简洁易懂。

# c# - ToString("D2") .ToString("00") 有什么区别

> ID：13043521
> 
> 赞同：41
> 
> 时间：2012-10-24T05:32:42.717
> 
> 标签：c#

我刚刚注意到我的一些代码用途：

```
ToString("D2") 
```

和其他用途：

```
.ToString("00") 
```

两者都用于将 0 到 99 的数字转换为 00 到 99 的字符串。这是数字 0-9 有前导零的字符串。

这两种方法都做同样的事情吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-24T05:42:52.610

这是一个有趣的问题。到目前为止，我发现的唯一区别是：

格式“D2”仅接受整数类型值。格式“00”也适用于浮点数/双精度数。

[格式 D - MSDN](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

> 支持者：仅整数类型。

考虑以下三行：

```
double d = 23.05123d;
int i = 3;
Console.Write(i.ToString("D2"));
Console.Write(d.ToString("00"));
Console.Write(d.ToString("D2")); //this will result in exception: 
                                 //Format specifier was invalid. 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-24T05:42:53.993

来自[MSDN 自定义数字格式字符串](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)：

> “00”说明符使值四舍五入到小数点前最接近的数字，其中始终使用从零开始的四舍五入。例如，使用“00”格式化 34.5 将导致值 35。

和[MSDN 标准数字格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)：

> 精度说明符指示结果字符串中所需的最小位数。如果需要，该数字在其左侧填充零以产生精度说明符给出的位数。

所以要回答你的问题，根据文档，这些并不是*专门*做同样的事情，但在你的情况下，它们可能是有意的。例如：

```
double d = 3.678;
Console.WriteLine(d.ToString("00"));
Console.WriteLine(4.ToString("D2")); 
```

都会打印出来`04`。我想这两种格式正在被使用，因为`D2`对双打无效。

# c - 反向 C 字符串 - 简单的错误

> ID：13043523
> 
> 赞同：-4
> 
> 时间：2012-10-24T05:33:01.003
> 
> 标签：c, string, pointers, segmentation-fault

> **可能重复：**
> [是否可以在 C 中修改 char 字符串？](https://stackoverflow.com/questions/1011455/is-it-possible-to-modify-a-string-of-char-in-c)

```
#include <stdio.h>

void reverseStr(char *str);

main()
{
  reverseStr("abcdef");
}

void reverseStr(char *str) {
    char *tmp = str;
    char curr;
    while (*tmp != '\0') {
        tmp++;
    }
    tmp--;
    while (tmp > str) {
        curr = *str;
        *str = *tmp;
        *tmp = curr;
        str++;
        tmp--;
    }    
} 
```

当我运行它时，我得到：

```
/usr/bin/runit/srun_c: line 12:  2809 Segmentation fault      /tmp/run_c_executable 
```

到底是怎么回事？我正在为面试练习，我的 C 生疏了，想练习一些简单的东西，但我一辈子都搞不明白。我注意到当我注释掉该`*str = *tmp;`行时，段错误消失了，我不明白为什么会导致段错误。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T05:34:09.880

您不能修改常量字符串。改用 char 数组：

```
char str[] = "abcdef";

reverseStr(str); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T05:34:29.843

您不能修改字符串文字——它们存储在只读内存中。

利用：

```
char str[] = "abcdef";

reverseStr(str); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-24T05:34:37.883

您的反转功能看起来不错。但正是您调用导致此崩溃的函数的方式。您正在向函数传递一个只读的字符串文字。修改字符串文字是一种未定义的行为，在您的情况下表现为崩溃。

改变

```
reverseStr("abcdef"); 
```

至

```
char str[] = "abcdef";
reverseStr(str); 
```

您将字符数组传递给函数的位置。

# c# - 为什么 SCRNSAVE.EXE 值没有通过代码更新

> ID：13043526
> 
> 赞同：0
> 
> 时间：2012-10-24T05:33:23.403
> 
> 标签：c#, registry, windows-screensaver

我想使用我的 c# 示例代码更新“SCRNSAVE.EXE”值..

但它不允许我这样做..!!

任何人都可以帮我解决这个问题，下面是我用来更新价值的功能。

私人无效 setAsDefaultScreenSaver（字符串值路径）

{

```
 RegistryKey key = Registry.CurrentUser.OpenSubKey("Control Panel\\Desktop");

   if (key == null)
     return;
   else
   {
      key.SetValue("SCRNSAVE.EXE", valuePath); 
      key.SetValue("ScreenSaveActive", "1");
   } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T06:03:54.253

您正在以只读方式打开子项。您需要传入 true 作为第二个参数来写入它。

```
private void setAsDefaultScreenSaver(string valuePath)
{
       RegistryKey key = Registry.CurrentUser.OpenSubKey("Control Panel\\Desktop",true);

       if (key == null)
         return;
       else
       {
          key.SetValue("SCRNSAVE.EXE", valuePath); 
          key.SetValue("ScreenSaveActive", "1");
       }
       key.Close(); //close the key and flush it to disk

 } 
```

# c# - C#.NET 中的 App.config 是什么？如何使用它？

> ID：13043530
> 
> 赞同：203
> 
> 时间：2012-10-24T05:33:41.283
> 
> 标签：c#, .net, app-config

我在 C#.NET 中完成了一个项目，其中我的数据库文件是 Excel 工作簿。由于连接字符串的位置在我的编码中是硬编码的，所以在我的系统中安装它是没有问题的，但对于其他系统是有的。

有没有办法在应用设置完成后提示用户设置一次路径？

我得到的答案是“使用 App.Config”......谁能告诉我这个 App.config 是什么以及如何在我的上下文中使用它？

* * *

## 回答 #1

> 赞同：213
> 
> 时间：2012-10-24T05:38:45.490

最简单的 app.config 是一个 XML 文件，其中包含许多可用的预定义配置部分并支持自定义配置部分。“配置部分”是一个 XML 片段，其模式旨在存储某种类型的信息。

*   [概述 (MSDN)](http://msdn.microsoft.com/en-us/library/1xtk877y.aspx)
*   [连接字符串配置 (MSDN)](http://msdn.microsoft.com/en-us/library/ms254494(v=vs.110).aspx)

可以使用内置配置部分（例如`connectionStrings`或）配置设置`appSettings`。您可以添加自己的自定义配置部分；这是一个高级主题，但对于构​​建强类型配置文件非常强大。

Web 应用程序通常有一个 web.config，而 Windows GUI/服务应用程序有一个 app.config 文件。

应用程序级配置文件从全局配置文件（如 machine.config）继承设置。Web 应用程序也从 applicationHost.config 继承设置。

## 从 App.Config 中读取

连接字符串具有您可以使用的预定义架构。请注意，这个小片段实际上是一个有效的 app.config（或 web.config）文件：

```
<?xml version="1.0"?>
<configuration>
    <connectionStrings>   
        <add name="MyKey" 
             connectionString="Data Source=localhost;Initial Catalog=ABC;"
             providerName="System.Data.SqlClient"/>
    </connectionStrings>
</configuration> 
```

[一旦定义了 app.config，就可以使用ConfigurationManager](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.aspx)类在代码中读取它。不要被冗长的 MSDN 示例吓倒；其实很简单。

```
string connectionString = ConfigurationManager.ConnectionStrings["MyKey"].ConnectionString; 
```

## 写入 App.Config

经常更改 *.config 文件通常不是一个好主意，但听起来您只想执行一次设置。

请参阅：[Change connection string & reload app.config at run time](https://stackoverflow.com/q/502411/453277)，其中描述了如何在运行时更新`connectionStrings`*.config 文件的部分。

请注意，理想情况下，您将从简单的安装程序执行此类配置更改。

## App.Config 在运行时的位置

***问**：假设我手动更改了`<value>`app.config 中的一些内容，保存然后关闭它。现在，当我转到我的 bin 文件夹并从此处启动 .exe 文件时，为什么它不反映应用的更改？*

**A** : 当你编译一个应用程序时，它的 app.config 被复制到 bin 目录¹中，其名称与你的 exe 匹配。例如，如果您的 exe 被命名为“test.exe”，那么您的 bin 目录中应该有一个“text.exe.config”。您可以在不重新编译的情况下更改配置，但您需要编辑在编译时创建的配置文件，而不是原始 app.config。

[1：请注意，web.config 文件不会移动，而是在编译和部署时保留在同一位置。一个例外是 web.config 被[转换](https://msdn.microsoft.com/en-us/library/dd465318(v=vs.100).aspx)时。]

## .NET 核心

.NET Core 引入了新的配置选项，并继续使用统一的 .NET（版本 5+）。*.config 文件的工作方式并没有从根本上改变，但开发人员可以自由选择新的、更灵活的配置范例。

与 .NET Framework 配置一样，.NET Core 可能会变得相当复杂，但实现可以像几行配置一样简单，只需几行 c# 即可读取。

*   [ASP.NET Core 中的配置](https://docs.microsoft.com/en-us/aspnet/core/fundamentals/configuration)
*   [.NET Core 中的配置](https://docs.microsoft.com/en-us/dotnet/core/extensions/configuration)

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-10-24T05:43:41.427

简单地说，***App.config***是一种`XML`基于文件格式，包含*应用程序级别配置*。

例子：

```
<?xml version="1.0"?>
<configuration>
  <appSettings>
    <add key="key" value="test" />
  </appSettings>
</configuration> 
```

您可以使用[`ConfigurationManager`](https://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager%28v=vs.110%29.aspx)如下代码片段所示访问配置：

```
var value = System.Configuration.ConfigurationManager.AppSettings["key"];
// value is now "test" 
```

**注意：** [`ConfigurationSettings`](https://msdn.microsoft.com/en-us/library/system.configuration.configurationsettings%28v=vs.110%29.aspx)是检索配置信息的过时方法。

```
var value = System.Configuration.ConfigurationSettings.AppSettings["key"]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-24T05:40:21.697

App.Config 是一个 XML 文件，用作应用程序的配置文件。换句话说，您可以在其中存储您可能想要更改的任何设置，而无需更改代码（和重新编译）。它通常用于存储连接字符串。

请参阅[此 MSDN 文章](https://web.archive.org/web/20141214231417/http://msdn.microsoft.com/en-us/library/ms254494(v=vs.80).aspx)，了解如何执行此操作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-09-07T09:23:48.690

只是为了添加一些我从所有答案中遗漏的东西——即使你知道它似乎很愚蠢和显而易见：

该文件必须命名为“App.config”或“app.config”，并且可以位于您的项目中与例如 Program.cs 相同的级别。

我不知道其他位置是否可能，其他名称（如 ODP.net 文档中建议的 application.conf）对我不起作用。

PS。我从 Visual Studio Code 开始，并使用“dotnet new”创建了一个新项目。在这种情况下没有创建配置文件，我相信还有其他情况。聚苯乙烯。您可能需要添加一个 nuget 包才能读取配置文件，如果是 .NET CORE，它将是“dotnet add package System.Configuration.ConfigurationManager --version 4.5.0”

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-24T05:40:44.990

您可以使用以下方式访问**App.Config**中的密钥：

```
ConfigurationSettings.AppSettings["KeyName"] 
```

看看[这个线程](https://codereview.stackexchange.com/questions/186/getting-setting-default-values-from-my-app-config)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-16T11:42:32.630

只加一分

使用 app.config 一些您可以控制应用程序访问的方式，您希望将特定更改应用到整个应用程序使用应用程序配置文件，您可以访问以下设置 ConfigurationSettings.AppSettings["Key"]

# php - PHP 包含另一个查询 MySQL 的 php

> ID：13043535
> 
> 赞同：0
> 
> 时间：2012-10-24T05:34:09.257
> 
> 标签：php, mysql, include, require

在我的网站中，我试图在每个页面的顶部包含一个“横幅”，它本身就是一个单独的 php 页面，它查询 MySQL 数据库以返回一个显示的数字。

当我转到横幅 php url (www.sitename.com/banner.php) 的确切 URL 时，它工作得很好。

但是，当我将横幅包含到另一个页面 include'banner.php' 时，它返回以下错误：*Database access error 2002: Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' ( 2)*

我有两种方法需要包含这个，我的主要网站页面都是 php。我的论坛是 phpbb，我需要包含的文件是 HTML，所以我使用了（注意，我做了 ../ 回到横幅根目录，这与找不到我的文件无关。

我假设当包括范围是不同的。我将如何正确完成这包括？

横幅.php

```
<?php
require("../mysql.inc.php");
check_get($tp, "tp");
$tp = intval($tp);
$link = sql_connect();
$result = sql_query($link, "SELECT COUNT(*) FROM online_count");
if (!$result) {
  echo "Database error.<br>\n";
  exit;
}
list($total) = mysql_fetch_row($result);
mysql_free_result($result);
?>  
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
<head>
<link rel="stylesheet" type="text/css" href="menu_css.css" media="screen"/>
</head>
<body>
<div class="menucenter">
<div class="Online"> <? echo"$total" ?> Online</div>
</body>
</html> 
```

mysql.inc.php

```
<?php

$SQLhost = "****.db.****.hostedresource.com";
$SQLport = "3306";
$SQLuser = "****";
$SQLpass = "****";
$SQLdb   = "****";

function sql_connect()
{
global $SQLhost, $SQLport, $SQLdb, $SQLuser, $SQLpass;

if ($SQLport != "")
$link = @mysql_connect("$SQLhost:$SQLport","$SQLuser","$SQLpass");
else
$link = @mysql_connect("$SQLhost","$SQLuser","$SQLpass");
if (!$link) {
echo "Database access error ".mysql_errno().": ".mysql_error()."\n";
die();
}
$result = mysql_select_db("$SQLdb");
if (!$result) {
echo "Error ".mysql_errno($link)." selecting database '$SQLdb': ".mysql_error($link)."\n";
die();
  }
return $link;
}

function sql_query($link, $query)
{
global $SQLhost, $SQLport, $SQLdb, $SQLuser, $SQLpass;

$result = mysql_query("$query", $link);
if (!$result) {
echo "Error ".mysql_errno($link).": ".mysql_error($link)."\n";
die();
}
return $result;
}

function check_get(&$store, $val)
{
$magic = get_magic_quotes_gpc();
if (isset($_POST["$val"])) {
if ($magic)
$store = stripslashes($_POST["$val"]);
else
$store = $_POST["$val"];
}
else if (isset($_GET["$val"])) {
if ($magic)
$store = stripslashes($_GET["$val"]);
else
$store = $_GET["$val"];
}
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:42:44.170

@Craig，包含文件有可能包含其他未获得正确路径的包含。您可以粘贴一些包含文件的代码以供我们验证错误吗？

编辑：您在查询末尾缺少报价。

```
$result = sql_query($link, "SELECT COUNT(*) FROM online_count); 
```

它应该是

```
$result = sql_query($link, "SELECT COUNT(*) FROM online_count"); 
```

编辑：您的引号有问题。见 check_get 函数。$val 是一个变量，你不需要在它周围加上引号。检查下面的代码。

```
if (isset($_POST[$val])) {
if ($magic)
$store = stripslashes($_POST[$val]);
else
$store = $_POST[$val];
}
else if (isset($_GET[$val])) {
if ($magic)
$store = stripslashes($_GET[$val]);
else
$store = $_GET[$val];
} 
```

编辑：还从 $query 中删除引号：

```
$result = mysql_query($query, $link); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:03:22.687

第一件事：

1.  从您的 mysql 语句中删除 @ 并查看您是否收到与变量相关的任何其他错误。调试时不应抑制错误。
2.  尝试在 sql_connect() 函数中打印主机、端口、用户和密码变量，看看是否在函数中获得了正确的值。
3.  如果您有权访问您的服务器，请检查 /var/lib/mysql/mysql.sock 是否存在，并具有足够的权限。

    srwxrwxrwx 1 mysql mysql 0 Sep 21 05:50 /var/lib/mysql/mysql.sock

如果到目前为止一切正常，您可能需要进一步排除 MySQL 服务的故障。如果这是问题，重新启动将有助于刷新连接。[也检查SO](https://stackoverflow.com/questions/6452222/mysql-connect-returning-cant-connect-to-local-mysql-server-through-socket-on)中的类似线程。

# php - 类调用 PHP 的区别

> ID：13043537
> 
> 赞同：0
> 
> 时间：2012-10-24T05:34:17.657
> 
> 标签：php, fuelphp

通过学习fuelPHP，我被介绍了使用范围解析调用类，或者说是::。通常，当我们调用类中的方法时，我们会这样做......

```
$myclass = new myclass();
$myclass->mymethod(); 
```

在燃料上，通常以这种方式调用方法......

```
myclass::mymethod(); 
```

我想知道这两者之间有什么区别吗？范围分辨率是否也是 5.3 的更新......如果不是，哪个是理想的，或者我应该什么时候使用这些。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T05:38:37.680

范围解析运算符用于访问类常量`::const`，如静态变量`::$var`或调用静态方法，如`::method()`.

见[http://php.net/manual/en/language.oop5.static.php](http://php.net/manual/en/language.oop5.static.php)

静态方法可以在没有定义它们的类的实例的情况下调用。它们是在该类中使用`static`关键字定义的。

例如，CakePHP 的静态方法之一是这样定义的：

```
class ClassRegistry {
    // ...
    public static function &getInstance() {
        // ...
    }
} 
```

...你可以这样称呼它`ClassRegistry::getInstance()`。

如果没有`static`关键字，您需要一个`ClassRegistry`类的实例来调用该函数。

您可以在这里阅读更多内容，尤其是关于为什么`static`在您自己的代码中使用方法有时可能是一个坏主意： http: [//kore-nordmann.de/blog/0103_static_considered_harmful.html](http://kore-nordmann.de/blog/0103_static_considered_harmful.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:18:39.513

我认为了解为什么会有静态调用以及它在幕后做什么的最好方法是查看这个 FuelPHP 博客的条目：[http ://fuelphp.com/blog/2011/05/why-did-you-do-那](http://fuelphp.com/blog/2011/05/why-did-you-do-that)

明显的区别是第一个解决方案`$myObject->myMethod()`是动态调用：您需要一个实例来执行`myMethod()`。

在第二种解决方案中，`MyClass::myMethod()`是静态调用。该类充当函数所属的一种命名空间。你不需要一个实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T05:38:07.940

我不确定如何`myclass::mymethod();`工作，因为我只在调用`STATIC`类时才使用这种语法。

`MyClass::DoSomething();`

会调用一个名为 DoSomething() 的静态方法

尽管

`$instance = new MyClass();`

`$instance->DoSomething();`

会调用实例方法。

我还没有测试过，但我相信如果你这样做，你会遇到错误`$instance::DoSomething()`

# image-processing - 使用 OpenCV 比较 2 个单词的图像

> ID：13043541
> 
> 赞同：0
> 
> 时间：2012-10-24T05:35:13.123
> 
> 标签：image-processing, opencv, sift, surf

我正在比较像这样的 2 个单词图像：

![在此处输入图像描述](../Images/d31c2c87456fb4c4626bd5ebbeea6422.png)

![在此处输入图像描述](../Images/39fc0975c8427bc041fc5346bee7258e.png)

我正在尝试为此目的使用 OpenCV 的内置特征检测器。事实证明，使用 SIFT 和 BruteForceMatcher 并不太有效，因为它也显示了很多不匹配单词的匹配项。在此使用什么是一个好的特征描述符案子。

也有人可以提出一种量化这两张图像匹配概率的好方法。

编辑：OCR 不能用作文本​​可以手写

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T17:20:13.670

I think that [image (contour) moments](http://opencv.willowgarage.com/documentation/cpp/structural_analysis_and_shape_descriptors.html) should help you with matching selected symbol to latter from your alphabet. So after this you can match two words as sequences of letters.

# biztalk - 为什么我可以在 BizTalk 2006 中提升属性字段，但区分字段被禁用？

> ID：13043543
> 
> 赞同：3
> 
> 时间：2012-10-24T05:35:58.307
> 
> 标签：biztalk, biztalk2006r2

我在 BizTalk 2006 的显示促销对话框中有一个非常奇怪的行为。它允许我提升属性字段：

![BizTalk 2006 中的属性字段提升](../Images/cd26cc97f164a2919747541cfc0830d3.png)

但是区分字段被禁用：

![BizTalk 2006 中的杰出领域推广](../Images/b53cb7733ed68804daceb145f8e034c6.png)

有什么想法吗？

* * *

这是 SQL 传输模式生成向导生成的 XML 模式：

```
<?xml version="1.0" encoding="utf-16" ?> 
<xs:schema xmlns:b="http://schemas.microsoft.com/BizTalk/2003" xmlns="http://ExecutionPlanner.InitializeStep" attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://ExecutionPlanner.InitializeStep" version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:annotation>
    <xs:appinfo>
      <msbtssql:sqlScript value="exec [InitizializeStep] @ORCHESTRATION_NAME=" ", @PROVIDER_NAME=" ", @STEP_NAME=" "" xmlns:msbtssql="http://schemas.microsoft.com/BizTalk/2003" /> 
    </xs:appinfo>
  </xs:annotation>
  <xs:element name="Step">
    <xs:complexType>
      <xs:sequence minOccurs="1" maxOccurs="1">
        <xs:element name="OrchestrationID" type="OrchestrationIDType" />
        <xs:element name="Message" type="MessageType" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="OrchestrationIDType">
    <xs:simpleContent>
      <xs:extension base="xs:string" />
    </xs:simpleContent>
  </xs:complexType>
  <xs:complexType name="MessageType">
    <xs:simpleContent>
      <xs:extension base="xs:string" />
    </xs:simpleContent>
  </xs:complexType>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T04:47:13.307

编辑您的架构以将 OrchestrationID 字段从记录更改为字段元素。只能区分元素和属性。

这通常需要删除现有的 Record 元素，然后重新创建具有相同名称的 Element，因为 Visual Studio 不允许更改 xml 节点的类型。但是，您可以通过使用 XML（文本）编辑器使用“打开方式...”选项打开 xsd 文件来解决此问题。

# c++ - 使指针中间为 NUL；它有效吗？

> ID：13043544
> 
> 赞同：0
> 
> 时间：2012-10-24T05:36:00.797
> 
> 标签：c++, pointers

> **可能重复：**
> [在 C 字符串中的 '\0' 之后的内存会发生什么情况？](https://stackoverflow.com/questions/10170808/what-happens-to-memory-after-0-in-a-c-string)

是否可以使指针的第三个元素为 NUL ('\0')，然后“擦除”指针的剩余元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T05:42:37.877

假设你在谈论 C 风格的字符串，那么是的，有点：

```
char s[] = "abcdefgh";   // s = "abcdefgh"
                         // (actually contains 9 characters: "abcdefgh\0")

s[3] = '\0';             // s = "abc"
                         // (still contains 9 characters, but now: "abc\0efgh\0") 
```

请注意，此时超出的字符`s[3]`并没有神奇地消失 - 只是显示字符串，或将其传递给任何采用 C 样式字符串的函数，导致字符串似乎只包含三个字符。你仍然可以做例如

```
s[3] = 'x';              // s = "abcxefgh"
                         // (still contains 9 characters, but now: "abcxefgh\0") 
```

# java - 如何将 true 转换为 Boolean.TRUE？

> ID：13043545
> 
> 赞同：3
> 
> 时间：2012-10-24T05:36:05.367
> 
> 标签：java, eclipse, swing, user-interface, jtable

> **可能重复：**
> [为布尔值设置 Jtable/列渲染器](https://stackoverflow.com/questions/2879559/set-jtable-column-renderer-for-booleans)

现在我的 Jtable 中有：

![在此处输入图像描述](../Images/f63ab9e0c3311ee432e8345c42efdc99.png)

但我想拥有：

![在此处输入图像描述](../Images/ff9718bd9368bde4d67fcfc39c01a57b.png)

因此，我想，我必须将我的真/假转换为对象，例如：

```
 Object rowData[][] = { { "1", Boolean.TRUE }, { "2", Boolean.TRUE }, { "3", Boolean.FALSE },
      { "4", Boolean.TRUE }, { "5", Boolean.FALSE }, }; 
```

现在我得到这样的数据：

```
 int i=0;
    data=new Object[tupel.size()][1];
    while(i<tupel.size()){
        row=tupel.get(i);
        data[i][0]=new Boolean(row.isTrueorFalse());//my "Boolean method"
        i++;
    }
} 
```

所以我的问题是：

如何将我的数据转换为对象以便显示刻度？

**更新**

isTrueorFalse 方法：

```
public boolean isTrueorFalse() {
        return isTrueorFalse;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T06:11:00.483

[JTable 具有对 Boolean value 的内置支持](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)，然后渲染器/编辑器显示 JCheckBox

必须用适当的列类覆盖[XxxTableModel 中的列](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)

```
@Override
public Class getColumnClass(int column) {
    return getValueAt(0, column).getClass();
} 
```

*   [例如](https://stackoverflow.com/a/10634914/714968)

*   为了获得更好的帮助，请尽快发布[SSCCE](http://sscce.org/)演示您的问题，简短、可运行、可编译。否则这里的每一个答案都可能是黑暗的镜头

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T05:50:53.180

如果你确定你想要`data`这样的数组，那么你可以在下面做。我不确定这是你需要的。

```
data[i][0]= i;
data[i][1] = row.isTrueorFalse(); 
```

然后，您可以在表模型中设置数据，如下所示

```
tableModel.set((Integer)data[i][0], (Boolean) data[i][1]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T06:04:30.940

您应该创建自己的[表模型](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)。

寻找以下几点：

> 如果程序员没有提供表模型对象，JTable 会自动创建一个 DefaultTableModel 的实例。

以及以下内容：

> 另一方面，SimpleTableDemo 的自动创建的表模型不知道 # of Years 列包含数字（通常应该是右对齐并具有特定格式）。它也不知道 Vegetarian 列包含布尔值，可以用复选框表示。

构造应该如下所示：

```
JTable table = new JTable(new MyTableModel()); 
```

而不是使用`JTable(Object[][] rowData, Object[] columnNames)`or `JTable(Vector rowData, Vector columnNames)`。在这种情况下，它使用`DefaultTableModel`，它不够智能，无法将您的布尔值显示为刻度（复选框）。

它还有一个示例代码来帮助您实现您想要实现的目标。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T05:58:40.770

```
 data[i][0]=Boolean.valueOf(row.isTrueorFalse()); 
```

这不会创建任何新的 Boolean 对象，只会创建 Boolean.TRUE 或 Boolean.FALSE。

# jquery - 使用 jquery 和 servlet 的自动完成选项

> ID：13043548
> 
> 赞同：-3
> 
> 时间：2012-10-24T05:36:35.853
> 
> 标签：jquery, jsp, servlets

如何使用以下代码限制自动完成

```
$( "#tags" ).autocomplete({
        source: availableTags
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T17:57:13.070

我创建了一个单独的 jsp 来迭代并将源添加到自动完成。您可以通过以下方式实现它：

```
$("#tags").autocomplete("./getdata.jsp"); 
```

getdata.jsp 的代码如下所示：

```
<%@page import="java.util.Iterator"%>
<%@page import="java.util.List"%>
<%

//Assuming the 'availableTags' is iterable List<String>

    Iterator<String> iterator = availableTags.iterator();

        while(iterator.hasNext()) {

            String source = (String)iterator.next();
            out.println(source);

        }
%> 
```

# javascript - java-script 无法清除 Radtextbox

> ID：13043556
> 
> 赞同：0
> 
> 时间：2012-10-24T05:37:22.863
> 
> 标签：javascript, asp.net, telerik, getelementbyid

先生/女士

我将创建一个带有重置按钮的表单，该按钮可以清除表单的字段

但该功能无法工作。在框中输入的先前记录仍然在这里。你能告诉在客户端清除表格的方法吗？

以下是我的代码：

```
 <script type="text/javascript">

     ...
        function ClearForms(sender, args) {

            document.getElementById('<%=txtRemeasureCode.ClientID%>').innerText() = "";
            document.getElementById('<%=dapSubmitTo.ClientID%>').clear();
            document.getElementById('<%=dapSubmitFrom.ClientID%>').clear();

        }
 .. .

      <telerik:RadTextBox ID="txtRemeasureCode" Width="200px" runat="server" AutoPostBack="false" />    

  ....
           <telerik:RadDatePicker ID="dapSubmitFrom" runat="server" MinDate="2010-01-01" AutoPostBack="false"            Width="200px">
                        <Calendar ID="CalendarFrom" RangeMinDate="2010-01-01" runat="server">
                        </Calendar>

         <DatePopupButton ImageUrl="" HoverImageUrl=""></DatePopupButton>

             <DateInput DisplayDateFormat="yyyy-M-d" DateFormat="yyyy-M-d" runat="server" ></DateInput>
                     </telerik:RadDatePicker>
              .....
                <telerik:RadDatePicker ID="dapSubmitTo" runat="server" MinDate="2010-01-01" AutoPostBack="false"                      Width="200px">
                        <Calendar ID="CalendarTo" RangeMinDate="2010-01-01" runat="server">
                        </Calendar>

             <DatePopupButton ImageUrl="" HoverImageUrl=""></DatePopupButton>

           <DateInput DisplayDateFormat="yyyy-M-d" DateFormat="yyyy-M-d" runat="server"></DateInput>
                    </telerik:RadDatePicker>

              ...........

               ..............

                <telerik:RadButton ID="btnReset" runat="server" Text="Reset" OnClientClick="ClearForms;return false">
                     <Icon PrimaryIconUrl="~/Image/Button/reset.gif" PrimaryIconLeft="4" PrimaryIconTop="4" />
                </telerik:RadButton> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:45:31.863

这是工作代码：

```
<telerik:RadComboBox ID="RadComboBox1" runat="server" OnClientSelectedIndexChanged="SelectedIndexChanged" > 
    <Items> 
        <telerik:RadComboBoxItem Value="0" Text="" /> 
        <telerik:RadComboBoxItem Value="1" Text="One" /> 
        <telerik:RadComboBoxItem Value="2" Text="Two" /> 
        <telerik:RadComboBoxItem Value="3" Text="Three" /> 
    </Items> 
</telerik:RadComboBox> 

<telerik:RadTextBox ID="RadTextBox1" runat="server" /> 

<asp:Button ID="btnClear" runat="server" OnClientClicked="ClearValues();return false;" Text="Clear" /> 

<script type="text/javascript"> 

function SelectedIndexChanged(sender, args) 
{ 
    if (args.get_item().get_value() != 0) 
    { 
        var textBoxNewValue = args.get_item().get_value() + ": " + args.get_item().get_text(); 
        $find("<%= RadTextBox1.ClientID %>").set_value(textBoxNewValue); 
    } 
    else 
    { 
        $find("<%= RadTextBox1.ClientID %>").clear(); 
    } 
} 

function ClearValues() 
{ 
    $find("<%= RadTextBox1.ClientID %>").clear(); 
    $find("<%= RadComboBox1.ClientID %>").clearSelection(); 
} 

</script> 
```

# c# - 在gridview中填充下拉列表

> ID：13043557
> 
> 赞同：-1
> 
> 时间：2012-10-24T05:37:25.030
> 
> 标签：c#, asp.net, sql-server

我在 Gridview 中有一个下拉列表，我必须显示与每个 id 关联的记录。ID 包含超过 10 条记录，所以我该如何显示它们？

```
 protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
        {
            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                con.Open();
                var ddl = (DropDownList)e.Row.FindControl("DropDownList1");
                //int CountryId = Convert.ToInt32(e.Row.Cells[0].Text);
                SqlCommand cmd = new SqlCommand("select LastName from Profile_Master",        con);
                SqlDataAdapter da = new SqlDataAdapter(cmd);
                DataSet ds = new DataSet();
                da.Fill(ds);
                con.Close();
                ddl.DataSource = ds;
                ddl.DataTextField = "LastName";
                ddl.DataBind();

            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:15:34.150

```
 FillSelect(myDropDownList, "--select--", "0", true);
        public static void FillSelect(DropDownList DropDown, string SelectItemText, string SelectItemValue, bool includeselectitem)
        {
            List<PhoneContact> obj_PhoneContactlist = getAll();

            if (obj_PhoneContactlist != null && obj_PhoneContactlist.Count > 0)
            {
                DropDown.DataTextField = "PhoneContactName";
                DropDown.DataValueField = "id";
                DropDown.DataSource = obj_PhoneContactlist.OrderBy(o => o.PhoneContactName);//linq statement
                DropDown.DataBind();

                if (includeselectitem)
                    DropDown.Items.Insert(0, new ListItem(SelectItemText, SelectItemValue));
            }
        }
        public static List<PhoneContact> getAll()
        {

        obj_PhoneContactlist = new List<PhoneContact>();
        string QueryString;
        QueryString = System.Configuration.ConfigurationManager.ConnectionStrings["Admin_raghuConnectionString1"].ToString();

        obj_SqlConnection = new SqlConnection(QueryString);

        obj_SqlCommand = new SqlCommand("spS_GetMyContacts");
        obj_SqlCommand.CommandType = CommandType.StoredProcedure;
        obj_SqlConnection.Open();
        obj_SqlCommand.Connection = obj_SqlConnection;
        SqlDataReader obj_result = null;
        obj_SqlCommand.CommandText = "spS_GetMyContacts";
        obj_result = obj_SqlCommand.ExecuteReader();

        //here read the individual objects first and append them to the listobject so this we get all the rows in one list object

        using (obj_result)
        {
            while (obj_result.Read())
            {
                obj_PhoneContact = new PhoneContact();
                obj_PhoneContact.PhoneContactName = Convert.ToString(obj_result["PhoneContactName"]).TrimEnd();
                obj_PhoneContact.PhoneContactNumber = Convert.ToInt64(obj_result["PhoneContactNumber"]);
                obj_PhoneContact.id = Convert.ToInt64(obj_result["id"]);

                obj_PhoneContactlist.Add(obj_PhoneContact);
            }

        }

        return obj_PhoneContactlist;
        } 
```

我这样做是为了将数据库中的电话联系人放入下拉列表中，您可以根据需要更改存储过程和值。

希望这会有所帮助：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T19:49:46.163

我们刚刚在我工作的地方遇到了这个问题。我们解决这个问题的方法是首先获取 DropDownLists UniqueID。这基本上是一个客户 ID。该 ID 内部是对从中选择它的 GridView 行的引用。唯一的问题是它似乎在行数中增加了 2。因此，如果您选择第 1 行的 DropdownList，唯一 ID 将为您带来对第 3 行的引用。所以：

获取唯一 ID > 拆分它，但是您需要获取行 > 使用行号来获取您需要的值。

# c# - 如何加快表单加载和表单关闭

> ID：13043558
> 
> 赞同：-4
> 
> 时间：2012-10-24T05:37:45.070
> 
> 标签：c#

我开发了一个应用程序。它运行良好，但表单加载速度很慢。表单关闭也有同样的问题。提高速度的方法有哪些？

```
Form3 child = new Form3(); // Create new instance of form.
child.FormClosed += new FormClosedEventHandler(child_FormClosed); 
child.Show(); // Show child.
this.Hide(); // Hide parent. 
```

这是我用来将主界面定向到子界面的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T06:03:37.057

您的无代码问题的最佳答案是使用异步加载和卸载表单资源。

关闭和打开的延迟是因为您的代码在 UI 线程中运行，加载所有资源，然后才显示表单。

# excel - 从 Excel 电子表格自动生成条件 Word 文档？

> ID：13043568
> 
> 赞同：0
> 
> 时间：2012-10-24T05:38:42.157
> 
> 标签：excel, ms-word

我希望 Word 从电子表格 (Excel) 中获取数据并检查每个单元格的值。如果它的值是一个特定的值，那么 Word 会显示（打印、放入，无论你怎么称呼它）相应的段落。

我已经谷歌搜索了几个小时，但无济于事。据我所知，我需要的是一个向后的、有条件的邮件合并；一些可以从本质上从布尔值生成段落的程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T08:49:37.597

您是否正在寻找这样的东西：

```
Option Explicit

Sub Test_ExcelCalcFromWord()

Dim oExcel                      As Excel.Application
Dim oBook                       As Excel.Workbook

Dim sString                     As String
Dim oParagraph                  As Word.Paragraph

Set oExcel = CreateObject("Excel.application")
Set oBook = oExcel.Workbooks.Open("U:/Book1.xlsx")
oExcel.Visible = True

sString = oBook.Sheets("Errors").Range("A1")

If sString = "Haha" Then
    Set oParagraph = ThisDocument.Content.Paragraphs.Add
    oParagraph.Range.Text = sString
End If

End Sub 
```

您必须先引用 Microsoft Excel 对象库，然后才能调用 Excel 对象。
您可以根据需要进一步自定义此代码（创建更多段落对象，为其添加格式等...）

# generic-list - 从一些字母表之间的通用列表中获取数据

> ID：13043571
> 
> 赞同：0
> 
> 时间：2012-10-24T05:38:54.153
> 
> 标签：generic-list, alphabet

我有一个通用列表，我只想从中获取那些在某些字母之间开始的项目。

假设我有像 ABC、DEF、Zebra、Important、Check、Jump 这样的列表项

从这里我想得到从A到C之间的字母开始的listitem

这应该返回 ABC，仅检查..

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:47:47.510

List stringlist= new List() {"ABC","BCD", "CDE","DEF","EFG","PQR","IJK","QRS","XYZ"};

List temp=stringlist.FindAll(s=>Enumerable.Range( **65,3** ).Contains(s.toUpper()[0]));

根据您的要求更改范围。

# security - 有没有办法将 S3 的 ACL 与我自己的用户存储库集成？

> ID：13043572
> 
> 赞同：1
> 
> 时间：2012-10-24T05:38:58.047
> 
> 标签：security, amazon-s3, spring-security, storage

我正在编写一个 java ee 应用程序，它有自己的用户和角色存储库（基于 Spring Security Framework）。在应用程序中，一些用户上传大文件。

我希望这些文件受到保护（即只有上传文件的人才有权访问它；实际上授权逻辑比这要复杂一些）。我的用户没有任何 aws 帐户。

我想将这些文件存储在 S3 上，但我还没有找到安全的方法。事实上，我还没有找到一种方法来表达引用我的用户和角色的 ACL。

我考虑过为我的文件生成不透明的名称（这很难猜到）。我的 java ee 应用程序可以确保对包含文件链接的网页的访问受到保护。某种程度的保护，但对于蛮力攻击它似乎很脆弱。

任何想法？

# c# - 尝试使用 MembershipProvider.EncryptPassword 时出现“由于其保护级别而无法访问”错误

> ID：13043578
> 
> 赞同：1
> 
> 时间：2012-10-24T05:39:41.033
> 
> 标签：c#, asp.net, .net, asp.net-mvc, .net-4.0

```
 public ActionResult Register(RegisterModel RegisterModel, string returnUrl)
        {
            if (ModelState.IsValid)
            {
                // Attempt to register the user
                MembershipCreateStatus createStatus;

                System.Text.ASCIIEncoding encoding = new System.Text.ASCIIEncoding();
                Byte[] Password = encoding.GetBytes(RegisterModel.Password);
                var EncryptedPass = MembershipProvider.EncryptPassword(Password);

                Membership.CreateUser(RegisterModel.UserName, RegisterModel.Password, RegisterModel.Email, null, null, true, null, out createStatus);

                if (createStatus == MembershipCreateStatus.Success)
                {
                    FormsAuthentication.SetAuthCookie(RegisterModel.UserName, false /* createPersistentCookie */);
                    return Redirect(returnUrl ?? Url.Action("Index", "Education"));
                }
                else
                {
                    ModelState.AddModelError("", ErrorCodeToString(createStatus));
                }
            }

            // If we got this far, something failed, redisplay form
            return View(RegisterModel);
        } 
```

尝试在使用 EncryptPassword 方法将密码存储到数据库之前对其进行加密，然后使用 MembershipProvider.DecryptPassword 方法对其进行 Dycrypt，但收到“由于其保护级别而无法访问”错误警告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:47:46.027

因为`MembershipProvider.EncryptPassword`和`MembershipProvider.DecryptPassword`方法都受到保护。

因此，您将无法在类或其派生类定义之外访问它们。

并且在通过`Membership.CreateUser`它创建任何用户时会自动加密密码。

# c++ - 二叉搜索树的广度优先搜索

> ID：13043579
> 
> 赞同：0
> 
> 时间：2012-10-24T05:39:42.097
> 
> 标签：c++, binary-search-tree, breadth-first-search

我正在尝试为二叉搜索树创建广度优先搜索功能，但我似乎无法使其工作。任何指针将不胜感激！

```
template <class T>
bool BST<T>::displayBfs(T searchKey, BST<T> *node)
{
    BST<T> *tmp = node;
    queue <int> queue;
    queue.push(node->mData);

    if (node == NULL)
    {
        return false;    
    }

    while (!queue.empty())
    {
        queue.pop();
        if (tmp->mData == searchKey)
            return true;
        else
        {
            if(tmp->mLeft != NULL)
                queue.push(tmp->mLeft->mData);
            if(tmp->mRight != NULL)
                queue.push(tmp->mRight->mData);
        }
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T05:45:42.753

由于`BST<T>`节点具有有关其子节点的信息，因此您必须将它们放在队列中，而不是您正在做的值。另一件事是你`queue`在弹出它之前没有得到元素。最后，您必须为队列指定其他名称，因为`std::queue`我假设您正在使用。

尝试以这种方式重写您的 BFS：

```
template <class T>
bool BST<T>::displayBfs(T searchKey, BST<T> *node)
{
    if (node == NULL) return false;

    queue<BST<T>*> q;
    q.push(node);

    while (!q.empty())
    {
        BST<T>* tmp = q.front();
        q.pop();

        if (tmp->mData == searchKey)
            return true;
        else
        {
            if(tmp->mLeft != NULL)
                q.push(tmp->mLeft);
            if(tmp->mRight != NULL)
                q.push(tmp->mRight);
        }
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T05:48:47.490

一些事情：

测试`node == NULL`应该在您访问节点之前进行：

```
if (node == NULL)
    return false;    
queue.push(node); 
```

此外，您的队列应该是节点类型，并且您应该在队列中插入节点：

队列*> 队列；

最后你不是访问 dequed 元素，你需要`front`在调用 pop 之前使用 queue 类的方法访问前面的元素。

# android - 自定义 URL 方案未启动 android 应用程序

> ID：13043580
> 
> 赞同：3
> 
> 时间：2012-10-24T05:40:08.413
> 
> 标签：android, url, url-scheme

我已经在 manifest.xml 中实现了 URL 方案的代码，如下所示。此代码不适用于任何浏览器。

```
<activity
        android:name=".Event"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.Black.NoTitleBar"
        android:windowSoftInputMode="adjustPan|stateAlwaysVisible" >
        <intent-filter >
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="http" android:host="xyz" />
        </intent-filter>
    </activity> 
```

以下代码仅适用于默认浏览器。

```
<activity
        android:name=".Event"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.Black.NoTitleBar"
        android:windowSoftInputMode="adjustPan|stateAlwaysVisible" >
        <intent-filter >
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="xyz"  />
        </intent-filter>
    </activity> 
```

所以，请给我使用任何浏览器使用自定义 URL 方案的解决方案，或者我必须为这个问题在上面的代码中更改什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-25T14:53:04.923

对于第一个代码：添加`android:pathPattern=".*"`应该为 http 方案修复它。

对于第二个代码：对于 Chrome，您必须使用`intent:`语法。Chrome 不再监听自定义方案（不再）。

# dart - 如何在 Google Dart 中找到操作系统架构？

> ID：13043581
> 
> 赞同：2
> 
> 时间：2012-10-24T05:40:08.740
> 
> 标签：dart

如何`OS's architecture`在服务器端找到使用 Dart？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:43:26.530

您可以使用[`Platform`](http://api.dartlang.org/docs/bleeding_edge/dart_io/Platform.html)该类：

```
import 'dart:io';

main() {
  print(Platform.operatingSystem);
  print(Platform.numberOfProcessors);
} 
```

如果`Platform`类还不够，您还可以创建一个新进程并执行一些命令以查看它是否返回有意义的内容（例如执行`ps`以检索进程等）。

# json - 泽西反应很慢

> ID：13043590
> 
> 赞同：2
> 
> 时间：2012-10-24T05:41:19.043
> 
> 标签：json, performance, servlets, jersey, response

我将球衣用于 REST 服务，在测量请求时间期间，我遇到了响应延迟，这似乎来自球衣本身。

虽然请求的计算时间约为 8 秒（测试系统），但球衣传递请求的时间还有 12 秒。在我们的代码中构建请求后，从第一个球衣“服务器入站请求”开始测量 8 秒：

```
Response.ok( entity ).build( ); 
```

然后，球衣出现了一些魔法，这种魔法似乎持续了 12 秒，直到出现“服务器出站响应”日志并且 json 内容出现在控制台上。cURL 说，请求持续了 20 秒。共鸣包含 32 个或多或少的大 json 数据字符串。

我已经关闭了 web.xml 中的链接和日志过滤器，没有任何改进。

我不知道从哪里开始寻找。谢谢你的想法！

我们

# app-store - 将应用程序从一个开发者转移到另一个开发者的最佳实践

> ID：13043593
> 
> 赞同：0
> 
> 时间：2012-10-24T05:41:45.770
> 
> 标签：app-store, app-store-connect

我需要将应用程序从我当前的个人开发者帐户转移到公司帐户。我意识到这不能自动完成，我只需要从一个帐户中删除该应用程序，然后在另一个帐户中提交。

我的问题是，这样做的首选方法是什么，以使其对当前用户尽可能无缝？我应该通过推送通知提醒他们吗？提交应用更新，告诉用户他们必须重新下载应用？

有关此过渡的任何其他提示？

这是一个免费的大学应用程序，排名并不像付费应用程序那么重要。

# php - 为什么我会收到这些 php session_start() 错误？

> ID：13043594
> 
> 赞同：1
> 
> 时间：2012-10-24T05:41:55.037
> 
> 标签：php, database, cookies, error-handling

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

这些是错误：

```
Warning: session_start() [function.session-start]: Cannot send session cookie - headers
already sent by (output started at 
C:\xampp\xampp\htdocs\ProjSecond\includes\overall\Oheader.php:3) in  +
C:\xampp\xampp\htdocs\ProjSecond\core\init.php on line 2

Warning: session_start() [function.session-start]: Cannot send session cache limiter -  
headers already sent (output started at  
C:\xampp\xampp\htdocs\ProjSecond\includes\overall\Oheader.php:3) in  
C:\xampp\xampp\htdocs\ProjSecond\core\init.php on line 2 
```

我在不同的目录中构建我的项目，相关文件的代码如下：

文件：初始化：

```
<?php
session_start();
require 'database/connect.php';

?> 
```

文件： 标题：

```
<body>
<?php include 'includes/header.php';?> 
```

文件： 头：

```
<head>
<title>Project47</title>
<meta charset="utf-8" />
<link rel="stylesheet" href="css/pjcss.css">
</head> 
```

有谁知道为什么会这样……上面显示的代码是每个文件的全部内容

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T05:43:14.660

这是因为您在开始会话之前已经输出了一些东西

甚至会话开始前的空白也会导致此警告

并且标头已经发送也是因为在标头之前发送了一些东西

![在此处输入图像描述](../Images/377fe1dc6eedefe3c94643a960fcb799.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T05:59:42.563

对于您的项目结构，您需要确保 init.php 是执行序列中调用的第一个文件，并且所有其他文件，包括“Head”，都应该包含在该文件中。在 session_start() 之前不能输出甚至是空字符串。如果所有文件都包含在一个单独的主文件中，比如 index.php，它应该看起来像这样。

```
 <?php
      include ("init.php");
  ?>
   <html>
   <!-- The head file should come here -->
   <?php
      include "Oheader.php";
    ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T05:47:23.453

在顶部编写 php 代码和 include 语句。然后开始编写html。见下文

```
<?php
session_start();
include 'includes/header.php';
?>

<html>
  <head></head>

...
... 
```

# mysql - 连接多个表（特殊情况）

> ID：13043595
> 
> 赞同：0
> 
> 时间：2012-10-24T05:42:09.037
> 
> 标签：mysql, join

我试图想一个逻辑来实现这个`mysql`查询，但我想不出任何东西或在互联网上找到任何东西。我的任务是`Join`两个或多个表并返回它的匹配字段。但是，如果有两个表上匹配行的三个表也必须显示。假设我有这 3 张桌子，

```
Table1-
num |info
----------
1   |aaaaa  
2   |bbbb
3   |ccc
4   |dddd
4   |dddd
5   |eeee

Table2-
num |info
----------
2   |bbbb
3   |ccc
4   |dddd
5   |eeee

Table3-
num |info
----------
1   |aaaaa
2   |bbbb
6   |ffff
7   |gggg 
```

我想加入这三个表并得到如下结果，

```
Result-
num |info   num |info   num |info
----------- ----------- ----------
1   |aaaaa  NULL|NULL   1   |aaaaa
2   |bbbb   2   |bbbb   2   |bbbb
3   |ccc    3   |ccc    NULL|NULL
4   |dddd   4   |dddd   NULL|NULL
4   |dddd   4   |dddd   NULL|NULL
5   |eeee   5   |eeee   NULL|NULL 
```

我有这个查询，它只显示在所有三个表上。

```
 SELECT a . * , b. * , c . *
   FROM tbl_1 a
   JOIN tbl_2 b ON a.num = b.num
   JOIN tbl_3 c ON a.num = c.num
   ORDER BY a.num, b.num 
```

但我想要的是即使值出现在两个表中也能显示。

非常感谢你。如果在此之前解决了这个问题，这将有助于为我指明正确的方向:) 再次感谢

**表结构更新**

```
Table1-
num |info
----------
1   |aaaaa  
2   |bbbb
3   |ccc
3   |ccc
4   |dddd

Table2-
num |info
----------
1   |aaaaa
3   |ccc
4   |dddd
5   |eeee
6   |ffff

Table3-
num |info
----------
1   |aaaaa
6   |ffff
2   |bbbb 
```

在这样的情况下，记录`6 |ffff`不会显示，

**期望的输出更新**

我想要得到的结果是，

```
Result-
num |info   num |info   num |info
----------- ----------- ----------
1   |aaaaa  1   |aaaaa  1   |aaaaa
2   |bbbb   NULL|NULL   2   |bbbb
3   |ccc    3   |ccc    NULL|NULL
3   |ccc    3   |ccc    NULL|NULL
4   |dddd   4   |dddd   NULL|NULL
NULL|NULL   6   |ffff   6   |ffff 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T05:46:06.557

```
SELECT  a.*
FROM    table1 a
        INNER JOIN
        (
            SELECT num, info FROM table2
            UNION
            SELECT num, info FROM table3
        ) b ON a.num = b.NUM 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/2cc90/2)

**更新 1**

```
SELECT  a.num numA, a.info infoA,
        b.num numB, b.info infoB,
        c.num numC, c.info infoC
FROM    table1 a
        LEFT JOIN table2 b
           ON a.num = b.num
        LEFT JOIN table3 c
           ON a.num = c.num
ORDER BY a.num 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/2cc90/4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T05:44:35.893

```
SELECT a . * , b. * , c . *
  FROM tbl_1 a
  LEFT JOIN tbl_2 b ON a.num = b.num
  LEFT JOIN tbl_3 c ON a.num = c.num
  ORDER BY a.num, b.num 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T10:56:20.837

这个问题由@Andreas Wederbrand 解决，

[3个表的完全连接](https://stackoverflow.com/questions/13061615/full-join-for-3-tables)

实施 a`full join`是我的查询的解决方案。

希望它对遇到这个问题的人有所帮助:)

# dotnetnuke - 将外部 .ASPX 页面添加到 DotNetNuke

> ID：13043614
> 
> 赞同：2
> 
> 时间：2012-10-24T05:43:59.147
> 
> 标签：dotnetnuke

如何将自定义 .ASPX 页面添加到 DotNetNuke 站点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T06:53:10.110

在 dotnetnuke 中添加任何 aspx 页面应该可以正常工作，只要它继承自`DotNetNuke.Framework.PageBase`而不是`System.Web.UI.Page`. 它将按预期工作。如果您使用的是没有代码的 aspx 页面，请像这样使用它：

```
<%@ Page Language="C#" Inherits="DotNetNuke.Framework.PageBase" %> 
```

如果您正在使用带有代码的 aspx 页面，请按如下方式使用它：(vb.net)

```
Public Class CustomAspnetPage
    DotNetNuke.Framework.PageBase 
```

这适用于任何版本的 dotnetnuke。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-28T23:55:23.113

虽然您可以简单地添加一个 .aspx 页面，但在大多数情况下它都可以正常工作。这可能不是“正确”的事情。如果您尝试编写在 DNN 框架内工作的代码，您可能想要构建一个模块。模块是从用户控件 (.ascx) 构建的。编写 .aspx 页面通常用于大多数或所有功能独立于 DNN 框架但仍是 DNN 网站的一部分的情况。

有许多教程和不同的方法来创建 DNN 模块。可以在[此处](http://dnnmodulecreator.codeplex.com/)找到开始编写模块 (IMO) 的最新和最简单的方法。

# visual-studio-2010 - Visual Studio 2010 安装项目：如何设置默认安装位置使用的公司名称？

> ID：13043618
> 
> 赞同：30
> 
> 时间：2012-10-24T05:44:44.123
> 
> 标签：visual-studio-2010, windows-installer, installation

我在同一个解决方案中有一个控制台应用程序项目和一个相关的设置项目。当我运行生成的 .msi 时，安装向导显示以下默认安装位置：

```
C:\Program Files (x86)\Default Company Name\myApp\ 
```

我如何输入自己的公司名称？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-05-29T11:16:18.283

打开属性窗口（不是右键单击设置项目）

使用工具栏**视图 -> 属性窗口**

**Windows 7 上的 VS 2013/2017**：键盘快捷键`F4`

**Windows 7 上的 VS 2010**：键盘快捷键序列`Ctrl + W`，然后`Ctrl + P`

现在在解决方案资源管理器窗口中选择您的设置项目，属性窗口应填充您可以编辑的信息（例如作者、语言、程序标题等）

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-01-07T11:32:53.917

Select the project in solution explorer and hit `F4`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-08T10:10:09.943

如果要更改控制面板中**发布**者列中可见的默认公司名称，请在设置项目的属性窗口中更改制造商属性。

如果您想更改控制面板中**名称**列中可见的程序名称，请在属性窗口中更改**产品名称。**

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-08-24T10:17:18.777

用于更改以下默认安装位置

> C:\Program Files (x86)\默认公司名称\myAppSetup\

*   在解决方案资源管理器中选择设置项目“myAppSetup”并点击**F4**。
*   **将属性窗口中的制造商**属性“默认公司名称”更改为您自己的公司名称，例如“StackOverflow”。
*   **将属性窗口中的ProductName**属性“myAppSetup”更改为您想要的程序名称，例如“Sweepstakes”。
*   **Author**属性可能包含默认值“默认公司名称”，也可以更改。

那么安装位置会是这样的

> C:\Program Files (x86)\StackOverflow\Sweepstakes\

# windows-phone-7 - 在 windows mobile 的 phonegap 中找不到 CordovaStarter-xxxzip

> ID：13043620
> 
> 赞同：4
> 
> 时间：2012-10-24T05:45:22.080
> 
> 标签：windows-phone-7, cordova, windows-mobile

我正在通过phonegap (cordova) 中[的 windows phone 入门指南](http://docs.phonegap.com/en/2.0.0/guide_getting-started_windows-phone_index.md.html)

我完成了

*   下载并安装 Windows Phone SDK
*   下载 Cordova 的最新副本并提取其内容

下一步是

*   ***将文件 CordovaStarter-xxxzip 复制到文件夹：\My Documents\Visual Studio 2010\Templates\ProjectTemplates***

我找不到我下载的带有科尔多瓦的 zip 文件。谁能帮帮我。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-24T05:57:23.047

CordovaStarter-xxxzip 是一个模板，从 phonegap-windows 开始。如果您下载的内容中缺少它，您可以创建它。

*   在 Visual Studio Express for Windows Phone 中打开文件 lib\windows-phone\templates\standalone\CordovaSolution.sln

*   从文件菜单中，选择“导出模板...”

*   选择模板类型“项目模板”

*   为导出的模板命名，例如。CordovaStarter-2.1.0 将生成 CordovaStarter-2.1.0.zip

*   或者，您可以添加描述、图标图像和预览图像。这些是 Visual Studio 中“新建项目”对话框中显示的内容。-

*   注意：如果您选择（“自动导入模板...”），则无需按照[phonegap 指南](http://docs.phonegap.com/en/2.0.0/guide_getting-started_windows-phone_index.md.html)中的说明复制 .zip 文件。

*   按“完成”

    :-**并建立一个新项目：-**

*   打开 Visual Studio Express for Windows Phone 并选择新建项目。

*   选择 CordovaStarter。（版本号会显示在模板说明中）

*   注意：如果您没有看到它，您可能必须选择顶级“Visual C#”才能看到它

*   为您的项目命名，然后选择确定。

*   “www”文件夹包含您的 Cordova html/js/css 以及您的应用程序中包含的任何其他资源。

*   点击 Windows Phone Emulator 下拉菜单旁边的绿色播放按钮开始调试或按 F5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-12T07:12:37.790

您可以从[http://phonegap.com/install/](http://phonegap.com/install/)上的（PhoneGap 2.8.1 Released 12 Jun 2013）找到它 ；）

# crystal-reports - 如何计算水晶报表中的排名？

> ID：13043622
> 
> 赞同：0
> 
> 时间：2012-10-24T05:45:39.210
> 
> 标签：crystal-reports

我正在设计一个学生管理系统，我正在尝试设计一个代表成绩单的报告。

我想要做的是获得一份报告，该报告将显示每个学生的所有科目和分数，以及基于科目总分的学生排名。

这是我要显示的信息的示例：

```
Student  Physics  Chemistry  Total marks   Rank
  1      77       90             167       3
  2      90       98             188       1
  3      90       98             188       1
  4      48       80             128       4 
```

我使用了交叉表报告，我得到了每个学生的所有科目和分数以及总分。现在我想根据总分计算每个学生的排名。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:58:11.930

它可以通过查询相当容易地完成：

```
SELECT [Student],
  [Physics],
  [Chemistry],
  [Total_marks],
  RANK() OVER (ORDER BY [Total_marks] DESC) AS Rank 
FROM MyTable
ORDER BY [Student] 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!3/39bc5/5/0)

# vb.net - 将文件编码为 ascii 的替代方法

> ID：13043628
> 
> 赞同：1
> 
> 时间：2012-10-24T05:46:35.327
> 
> 标签：vb.net, ascii, encode, fso

我试图找到将 UTF-8 编码为 ASCII 的替代方法。以下方法有效，但将这个 486kb 文件编码为 ASCII 需要 1 分 40 秒

```
For Each foundFile As String In My.Computer.FileSystem.ReadAllText(My.Settings.TempFile)
        foundFile = foundFile
        My.Computer.FileSystem.WriteAllText(My.Settings.DefaultOutput, foundFile, True, System.Text.Encoding.ASCII)
    Next 
```

如果有人能告诉我比上述方法更快的方法，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T05:53:25.300

`ReadAllText`返回一个简单的`String`，所以你正在做的是遍历该字符串中的每个字符，这会很慢。

相反，只是做

```
Dim fileText As String = My.Computer.FileSystem.ReadAllText(My.Settings.TempFile)
My.Computer.FileSystem.WriteAllText(My.Settings.DefaultOutput, fileText, True, System.Text.Encoding.ASCII) 
```

# sql - Oracle 是否在通过网络传输时压缩/最小化查询结果中的一些重复数据？

> ID：13043631
> 
> 赞同：2
> 
> 时间：2012-10-24T05:46:52.003
> 
> 标签：sql, oracle, networking, compression, oracle-net-services

> **可能重复：**
> [Oracle 10g：通过数据库链接传输是否已压缩？可能吗？](https://stackoverflow.com/questions/6081696/oracle-10g-is-transfer-via-database-link-compressed-is-it-possible)

我有一个巨大的 SQL 查询，其中包含很多字段。这个结果中的大部分数据是每个自我的重复。

以下是部分 SQL 结果供您参考：

```
RECORD_ID DATE_REC    CAB   PERSON_ID CODE1                          CODE4     CODE2 CODE5                                CODE5_VALUE                                                                      CODE5_SUBVALUE1           CODE5_SUBVALUE2           CODE5_SUBVALUE3           CODE6_SUBVALUE1           CODE6_SUBVALUE2           CODE6_SUBVALUE3
  1500747 31.10.2012          2260784                                  5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                   PETERSON                  EARL                      TOMAS
  1500750 31.10.2012                                                   5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      
  1500711 29.10.2012                  0;4;28;                          5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      
  1500712 29.10.2012                  0;4;28;                          5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      
  1500713 29.10.2012                  0;4;28;                          5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      
  1500714 29.10.2012                  0;4;28;                          5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      
  1500715 29.10.2012                  0;4;28;                          5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      
  1500716 29.10.2012                  0;4;28;                          5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      
  1500717 29.10.2012                  0;4;28;                          5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      
  1500718 29.10.2012                  0;4;28;                          5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      
  1500745 31.10.2012                                                   5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      
  1500746 31.10.2012                                                   5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      
  1500748 31.10.2012                                                   5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      
  1500749 31.10.2012                                                   5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      
  1500709 29.10.2012                  0;4;28;                          5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW                                                                      
  1500710 29.10.2012                  0;4;28;                          5664       26 552ec2af-c9d3-4f18-bc84-68d641fdbc5f HF2OUGVG11                                                                       JOHNSON                   DAVID                     MATTHEW 
```

从上面的请求中可以看出，有很多重复的数据。Oracle 会在序列化时压缩它以通过网络传输吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T07:49:14.863

SQL*Net 执行有限级别的重复数据删除。也就是说，它将当前行与最后一行进行比较，如果当前行中给定列中的值包含与发送行中的该列相同的值，则不传输该值。然后它会替换接收端的所有重复项。

这意味着排序顺序至关重要。但是，如果您发布的示例日期代表查询的输出，我认为您应该看到当前 ORDER BY 子句有很多重复数据删除。但是，可能存在可以提供更大压缩的替代排序：如果您的“巨大 SQL 查询”超过足够高的“巨大”值，您可能需要对这些排序进行基准测试。

Jonathan Lewis 在博客文章中提供了更多详细信息，包括可用于评估您的案例中的重复数据删除的演示。 [你应该阅读它](http://jonathanlewis.wordpress.com/2010/05/07/sqlnet-compression/)。

# ruby-on-rails-3 - 生成了奇怪的 url - i18n_routing

> ID：13043635
> 
> 赞同：0
> 
> 时间：2012-10-24T05:47:37.773
> 
> 标签：ruby-on-rails-3, internationalization, ruby-on-rails-3.2

使用 rails 3.2、i18n、i18n_routing。

我的网址的一个例子

```
domain/nl/vakantiehuizen/house-property-name
domain/nl/vakantiehuizen/house-property-name/reviews
domain/en/ferienwohnung/house-property-name
domain/en/ferienwohnung/house-property-name 
```

控制器名称（vakantiehuizen、ferienwohnung）由语言环境（de.yml、en.yml）翻译。控制器的名称是这个例子是房屋控制器/模型

就在一周前，我收到警告消息 google webmastertools！用这个网址

```
nltarget/houses/le-carpine/
nltarget/houses/le-carpine/reviews 
```

500 响应，因为此页面不存在。

这里有什么问题？糟糕/缓慢的服务器响应？

日志文件的一部分：

```
 House::Translation Load (0.4ms)  SELECT `house_translations`.* FROM `house_translations` WHERE `house_translations`.`house_id` = 17 AND `house_translations`.`locale` = 'nltarget' LIMIT 1
  House::Translation Load (0.3ms)  SELECT `house_translations`.* FROM `house_translations` WHERE `house_translations`.`house_id` = 20 AND `house_translations`.`locale` = 'nltarget' LIMIT 1
  House::Translation Load (0.3ms)  SELECT `house_translations`.* FROM `house_translations` WHERE `house_translations`.`house_id` = 24 AND `house_translations`.`locale` = 'nltarget' LIMIT 1
  House::Translation Load (0.4ms)  SELECT `house_translations`.* FROM `house_translations` WHERE `house_translations`.`house_id` = 13 AND `house_translations`.`locale` = 'nltarget' LIMIT 1
  House::Translation Load (0.3ms)  SELECT `house_translations`.* FROM `house_translations` WHERE `house_translations`.`house_id` = 2 AND `house_translations`.`locale` = 'nltarget' LIMIT 1
  House::Translation Load (0.3ms)  SELECT `house_translations`.* FROM `house_translations` WHERE `house_translations`.`house_id` = 4 AND `house_translations`.`locale` = 'nltarget' LIMIT 1
  House::Translation Load (0.3ms)  SELECT `house_translations`.* FROM `house_translations` WHERE `house_translations`.`house_id` = 25 AND `house_translations`.`locale` = 'nltarget' LIMIT 1

  House::Translation Load (0.5ms)  SELECT `house_translations`.* FROM `house_translations` WHERE `house_translations`.`house_id` = 19 AND `house_translations`.`locale` = 'nltarget' LIMIT 1
  Appartment::Translation Load (0.5ms)  SELECT `appartment_translations`.* FROM `appartment_translations` WHERE `appartment_translations`.`appartment_id` = 22 AND `appartment_translations`.`locale` = 'nltarget' LIMIT 1 
```

我已经看到语言环境参数设置为“nltarget”而不是“nl”

大多数情况下，语言环境参数设置正确，如下所示：

```
 House::Translation Load (0.4ms)  SELECT `house_translations`.* FROM `house_translations` WHERE `house_translations`.`house_id` = 13 AND `house_translations`.`locale` = 'nl' LIMIT 1
  Amenity::Translation Load (0.3ms)  SELECT `amenity_translations`.* FROM `amenity_translations` WHERE `amenity_translations`.`amenity_id` = 13 AND `amenity_translations`.`locale` = 'nl' LIMIT 1
  Review::Translation Load (0.3ms)  SELECT `review_translations`.* FROM `review_translations` WHERE `review_translations`.`review_id` IS NULL AND `review_translations`.`locale` = 'nl' LIMIT 1
  Amenity::Translation Load (0.4ms)  SELECT `amenity_translations`.* FROM `amenity_translations` WHERE `amenity_translations`.`amenity_id` = 13 AND `amenity_translations`.`locale` = 'nl' LIMIT 1 
```

语言环境“nl”怎么可能设置为“nltarget”？

# ruby-on-rails - 简单的 Postgres 查询在 Heroku 上运行缓慢

> ID：13043639
> 
> 赞同：2
> 
> 时间：2012-10-24T05:47:46.663
> 
> 标签：ruby-on-rails, postgresql, activerecord, heroku, postgresql-performance

我有一个`Movie`包含大约 15,000 个项目的`Dvd`模型和一个包含 3500 个项目的模型。

以下查询是使用在 Heroku 上运行的 Crane Postgres 数据库的简单 Rails 关联。我想知道为什么以下查询需要这么长时间，以及我最终如何才能减少它的时间。

```
2012-10-24T05:42:19+00:00 app[postgres]: [30-1] [BLACK] LOG:  duration: 57.914 ms  statement: SELECT  "movies".* FROM "movies"  WHERE "movies"."dvd_id" = 37 ORDER BY scene LIMIT 1
2012-10-24T05:42:20+00:00 app[postgres]: [31-1] [BLACK] LOG:  duration: 77.086 ms  statement: SELECT  "movies".* FROM "movies"  WHERE "movies"."dvd_id" = 915 ORDER BY scene LIMIT 1
2012-10-24T05:42:20+00:00 app[postgres]: [32-1] [BLACK] LOG:  duration: 85.602 ms  statement: SELECT  "movies".* FROM "movies"  WHERE "movies"."dvd_id" = 108 ORDER BY scene LIMIT 1
2012-10-24T05:42:21+00:00 app[postgres]: [33-1] [BLACK] LOG:  duration: 70.147 ms  statement: SELECT  "movies".* FROM "movies"  WHERE "movies"."dvd_id" = 11 ORDER BY scene LIMIT 1
2012-10-24T05:42:21+00:00 app[postgres]: [34-1] [BLACK] LOG:  duration: 144.204 ms  statement: SELECT  "movies".* FROM "movies"  WHERE "movies"."dvd_id" = 6 ORDER BY scene LIMIT 1
2012-10-24T05:42:22+00:00 app[postgres]: [35-1] [BLACK] LOG:  duration: 56.623 ms  statement: SELECT  "movies".* FROM "movies"  WHERE "movies"."dvd_id" = 1956 ORDER BY scene LIMIT 1
2012-10-24T05:42:23+00:00 app[postgres]: [36-1] [BLACK] LOG:  duration: 64.860 ms  statement: SELECT  "movies".* FROM "movies"  WHERE "movies"."dvd_id" = 747 ORDER BY scene LIMIT 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T05:58:05.760

您可以直接连接到数据库 CLI，然后使用 PostgresQL`EXPLAIN`命令获取有关它如何运行查询的信息。这可以显示您可以向表中添加索引以加快速度的地方。Postgres[文档](http://www.postgresql.org/docs/9.1/static/using-explain.html)更详细地解释（看看我在那里做了什么？）`EXPLAIN`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T06:24:36.477

负责这些查询的代码是什么？你在使用急切加载吗？您的查询应该是这样的：

> DVD.includes(:movies).where(whatever) #假设 DVD 有很多电影

这应该会减少查询/请求的数量。到您的数据库。您的查询表明您可能有 N+1 个问题。

您还应该在电影表上为 dvd_id 建立一个数据库索引，因为它是一个外键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T06:30:54.807

确保您至少在 dvd_id 上有索引。如果您可以在 (dvd_id, scene) 上创建复合索引，您的查询将是完全优化的，无法进一步优化。

换句话说，只需执行

```
CREATE INDEX movies_dvd_id_scene_idx ON movies (dvd_id, scene); 
```

你应该准备好了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-05T20:26:26.683

```
duration: 57.914 ms
duration: 77.086 ms
duration: 85.602 ms
duration: 70.147 ms
duration: 144.204 ms
duration: 56.623 ms
duration: 64.860 ms 
```

平均（约 80 毫秒），这是在不同大陆运行的查询所需的通常持续时间。确保您的 Heroku 应用程序和数据库都托管在**同一地区**（欧盟或美国）。

# c++ - 将反序列化提升为动态类型

> ID：13043640
> 
> 赞同：2
> 
> 时间：2012-10-24T05:47:49.367
> 
> 标签：c++, boost, deserialization, boost-serialization

[在此链接](http://www.boost.org/doc/libs/1_51_0/libs/serialization/doc/tutorial.html)中，您可以找到 boost 序列化和反序列化。但是在反序列化方法中我们需要给类的具体对象进行反序列化。例如：新格

```
gps_position newg;
{
    // create and open an archive for input
    std::ifstream ifs("filename");
    boost::archive::text_iarchive ia(ifs);
    // read class state from archive
    ia >> newg;
    // archive and stream closed when destructors are called
} 
```

由于 C++ 没有像 C# 中的 Object 这样的基类，我如何反序列化为一个公共对象然后对其进行类型转换？

至于我没有，我可以创建一个自定义类调用对象并从中继承所有其他类，但即使在这种情况下，也会有反序列化 2 次的情况。有没有解决这个问题的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T05:58:41.143

Boost.serialization 必须给出具体的类。由于 c++ 没有虚拟构造函数，因此反序列化器必须知道要创建什么对象。共同祖先也无济于事。必须在反序列化**之前**创建对象。

如果要序列化和反序列化类层次结构，则必须在序列化对象和反序列化时显式编写类 Id - 显式读取此 Id 以做出决定 - 创建和反序列化什么对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T12:50:55.430

如果序列化/反序列化指向对象的指针，则可以反序列化为基类。Boost 然后自动创建 Id 等。机制描述[here](http://www.boost.org/doc/libs/1_54_0/libs/serialization/doc/serialization.html#derivedpointers)

# mysql - Perl：将 $dbh 交给模块。安全性和性能？

> ID：13043648
> 
> 赞同：1
> 
> 时间：2012-10-24T05:48:50.473
> 
> 标签：mysql, performance, perl, security, cgi

所以我有一个cgi脚本，

```
#!/usr/bin/perl -T

use strict;
use warnings;
use DBI;
use WebEngine;

my $dbh = DBI->connect('DBI:mysql:database', $username, $password)
    || die "Could not connect to database: $DBI::errstr";

my $we = WebEngine->new($dbh)
    or die("Failed to instantiate WebEngine object:\n$!\n");

$userID = $we->register("MyUsername", $dbh); 
```

这个脚本创建了一个数据库处理程序，然后使用我制作的一个模块来处理站点的大部分后端来注册用户名并返回一个用户 ID 号。

我对此有三个问题。

*   在此脚本中创建此 $dbh 是否会通过保持数据库连接打开来提高性能？

*   我可以将 $dbh 放在我的模块中而不用担心效率低下吗？

*   在不通过我的网站直接交互的模块中保留 $dbh（以及相关信息（我在代码中以纯文本形式保存我的通行证；那很糟糕吗？））是否有安全优势？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T07:33:55.783

> 在此脚本中创建此 $dbh 是否会通过保持数据库连接打开来提高性能？
> 
> 我可以将 $dbh 放在我的模块中而不用担心效率低下吗？

通常，您希望*最小化*数据库连接打开的时间长度。同时打开大量连接会损害性能。您保持连接打开的时间越长，当很多人同时使用您的网站时，您积累的连接就越多。

另一方面，多次断开和重新连接也可能会损害性能。

如果您预计站点上的流量很大，最好的解决方案是实施连接池。这使许多活动连接保持打开和可用，但不会将它们绑定到特定用户。 [这是关于使用 Perl 进行 MySQL 连接池的讨论](https://stackoverflow.com/questions/3267591/perl-connection-pooling)。如果您以这种方式实现它，那么您可能希望在最短的时间内打开连接。这将是有效的，因为它不是引擎盖下的“真正”打开 - 只是一个已经打开的连接的分配。

> 在不通过我的网站直接交互的模块中保留 $dbh（以及相关信息（我在代码中以纯文本形式保存我的通行证；那很糟糕吗？））是否有安全优势？

如果模块位于不可通过 Web 访问的文件夹中，那可能会有一点好处。但是，实际上，您不应该以纯文本形式存储密码。 [这是对其他一些选项的讨论。](https://stackoverflow.com/questions/80612/best-practises-for-holding-passwords-in-shell-perl-scripts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:26:50.530

您可以在模块中创建静态变量，或者完全面向对象并创建在`$dbh`内部初始化并使其保持活动状态的模块对象。这样做不会对性能产生影响。

至于与外部数据的交互——您的模块只是打包代码的另一种方式，因此它与您的主代码一样可能（或不太可能）被利用。您应该依靠其他预防措施（例如使用污染模式）。

# database - 在 Windows Phone 应用程序中添加现有的 SQLite 数据库？

> ID：13043650
> 
> 赞同：0
> 
> 时间：2012-10-24T05:49:15.280
> 
> 标签：database, sqlite, windows-phone-7.1

我对 Windows Phone 应用程序开发非常陌生，我正在开发一个 Windows 7.1 Phone 应用程序，在该应用程序中我必须使用现有的数据库，即 SQLite。我想知道如何在项目中添加该文件，然后如何查询该数据库？如何为此数据库添加帮助程序类？我已经四处搜索，但找不到易于理解的教程。任何帮助表示赞赏。谢谢...！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T11:45:48.977

尝试这个

[http://sqlitewindowsphone.codeplex.com/](http://sqlitewindowsphone.codeplex.com/)

项目描述 带有事务支持的 Windows Phone 7 的 Sqlite 客户端您可以在我的博客上找到更多详细信息： [http](http://sviluppomobile.blogspot.com) ://sviluppomobile.blogspot.com 最后由 dan_ardelean 于 2010 年 11 月 30 日下午 1:16 编辑，版本 4

# java - 如何在非 EJB 类中实例化 EJB 对象？

> ID：13043655
> 
> 赞同：0
> 
> 时间：2012-10-24T05:50:05.460
> 
> 标签：java, ejb-3.0, openejb

我正在使用 Maven 框架来构建我的项目，而 EJB 3.0 是 EJB 规范。我有一个 EJB 接口 A 及其对应的实现 A 的 EJB 类 B。类 B 的主体如下所示：

```
@Stateless
@TransactionAttribute(value = TransactionAttributeType.REQUIRES_NEW)
class B implements A{

      @PersistenceContext(unitName = "Draco-PU", type = PersistenceContextType.TRANSACTION)
  EntityManager entityManager;  

      //called post construct
      @PostConstruct
      public init(){

            //body of init method

      } 
```

我在同一个项目下的不同包中有一个非 EJB 类。我想在这个类中实例化类 B，以便自动引用 init() 方法和其他注释，并且我可以显式调用 EJB 类中的其他方法。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T21:10:29.153

你不能那样做。NonEJBClass.someMethod() 的调用者需要将 A 传递给 someMethod（因为调用者注入或查找了它），或者 someMethod 需要自己进行查找（可能在“java:”命名空间之一中）。否则，您需要更改 bean 以便非托管客户端可以使用它，例如：

豆：

```
@Stateless
@TransactionAttribute(value = TransactionAttributeType.REQUIRES_NEW)
class B implements A {
    private EntityManager entityManager;  

    @PersistenceContext(unitName = "Draco-PU", type = PersistenceContextType.TRANSACTION)
    public void setEntityManager(EntityManager em) {
        entityManager = em;
    }

    @PostConstruct
    public init() {
        //body of init method
    }
} 
```

非托管客户端：

```
B obj = new B();
obj.setEntityManager(...);
obj.init(); 
```

因此，您要么允许容器创建对象（它负责所有的注入和初始化），要么您自己创建对象（然后您负责所有的 setter 调用和初始化）。

# iphone - 保存数据并通过单击键盘上的发送按钮转到上一个视图

> ID：13043656
> 
> 赞同：1
> 
> 时间：2012-10-24T05:50:12.283
> 
> 标签：iphone, ios5

我有一个**注册**页面，一旦我在注册中输入了我的详细信息，我想点击键盘上的发送按钮（代替**返回**键）。它*应该保存注册页面中的所有数据并将我带到上一个登录页面*。

对于**用户名**和**电子邮件**文本字段，我使用了**下一步**按钮，以便在我完成每个文本字段后*切换选项卡。*它工作正常。

因此，当我单击电子邮件文本字段键盘上的下一个按钮时，它会将我带到密码文本字段，一旦我完成输入密码，键盘上的发送按钮就会可见。但是当我尝试单击它时，**没有执行任何操作**。

所以，如果我点击发送按钮，它应该会**保存我在注册页面中输入的所有数据，并应该将我带到上一个登录页面。**像普通的提交按钮一样，我希望**键盘**中的发送按钮执行操作，而不是其他普通按钮。

这是我在注册页面中发送和下一个键盘按钮的代码，

```
-(IBAction)send
{

    NSUserDefaults *stringDefault = [NSUserDefaults standardUserDefaults];

    [stringDefault setValue:@"" forKey:@"stringKey"];
    [stringDefault setValue:name.text forKey:@"Username"];
    [stringDefault setValue:email.text forKey:@"EmailID"];
    [stringDefault setValue:password.text forKey:@"password"];
    [stringDefault synchronize];
    NSLog(@"%@",name.text);
    //   NSLog(@"%@",email.text);`
    // NSLog(@"%@",password.text);
    NSString *emailRegEx = @"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}";
    NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegEx];
    //Valid email address
    if ([emailTest evaluateWithObject:email.text] == NO) 
    {
        UIAlertView *Alt = [[UIAlertView alloc] initWithTitle:@"Incorrect" message:@"Enter a valid email id" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [Alt show];
        [Alt release];
        NSLog(@"email not in proper format");

    }
    NSString *passwordd = @"[A-Za-z]{8,12}";
    NSPredicate *passtest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", passwordd];
    //Valid email address
    if ([passtest evaluateWithObject:password.text] == NO) 
    {   
        UIAlertView *Alt = [[UIAlertView alloc] initWithTitle:@"Incorrect" message:@"Enter a valid password" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [Alt show];
        [Alt release];
        //  NSLog(@"email not in proper format");

    }

    login *l=[[login alloc]initWithNibName:@"login" bundle:nil];

    [self presentModalViewController:l animated:YES];

   }

-(IBAction)next:(UITextField *)ras{
        if (ras == name) {
            [ras resignFirstResponder];
            [email becomeFirstResponder];
        } 
        else if (ras == email) {
            [ras resignFirstResponder];
            [password becomeFirstResponder];
        }
        else if (ras == password) {
            [ras resignFirstResponder];
        }
        //return YES;
    } 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T06:54:39.703

将属性 UIReturnType 发送到 UITextField 的 UIReturnTypeSend 并设置委托

```
[usernameTextField setReturnType:UIReturnTypeSend];
[usernameTextField setDelegate:self];
[passwordTextField setReturnType:UIReturnTypeSend];
[passwordTextField setDelegate:self]; 
```

然后使用 textFieldDelegateMethod ShouldReturn

```
-(BOOL)validationSuccess{

    NSString *emailRegEx = @"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}";

    NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegEx];

    //Valid email address
    if ([emailTest evaluateWithObject:email.text] == NO)
    {
        UIAlertView *Alt = [[UIAlertView alloc] initWithTitle:@"Incorrect" message:@"Enter a valid email id" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [Alt show];
        [Alt release];
        NSLog(@"email not in proper format");

        return NO;

    }
    NSString *passwordd = @"[A-Za-z]{8,12}";
    NSPredicate *passtest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", passwordd];
    //Valid email address
    if ([passtest evaluateWithObject:password.text] == NO)
    {
        UIAlertView *Alt = [[UIAlertView alloc] initWithTitle:@"Incorrect" message:@"Enter a valid password" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [Alt show];
        [Alt release];
        //  NSLog(@"email not in proper format");

        return NO;

     }

    return YES;

}

-(BOOL)textFieldShouldReturn:(UITextField *)textField{

    if([self validationSuccess])
    {
        //Save your data here

        [self saveData];

        //If you have pushed from loginviewcontroller then you can go back directly

        [[self navigationController] popToRootViewControllerAnimated:YES];

        //Or if you have presented from loginviewcontroller

         [self dismissViewControllerAnimated:YES completion:NULL];

    }

    return YES;
}

-(void)saveData{

    NSUserDefaults *stringDefault = [NSUserDefaults standardUserDefaults];
    [stringDefault setValue:@"" forKey:@"stringKey"];
    [stringDefault setValue:name.text forKey:@"Username"];
    [stringDefault setValue:email.text forKey:@"EmailID"];
    [stringDefault setValue:password.text forKey:@"password"];
    [stringDefault synchronize];

} 
```

# jms - 踩踏选择器条件

> ID：13043657
> 
> 赞同：2
> 
> 时间：2012-10-24T05:50:22.350
> 
> 标签：jms, selector, activemq, stomp

我正在通过 Stomp 将 Web 客户端注册到 ActiveMQ 消息传递服务器。客户端有一个用户名并通过设置一个选择器注册到一个共同的主题。

```
var headers = {'selector': "to = '" + userName + "'"}; 
```

客户端通过在标头中设置“to”属性来发送消息。是否也可以使用更复杂的选择器接收广播消息？我正在寻找类似的东西

```
var headers = {'selector': "to = '" + self.userName + "' OR *"}; 
```

接收发给所有用户的消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T06:07:48.160

别管这个问题。我找到了解决方案。这实际上和我已经猜到的差不多（我真的应该在发布之前尝试过）。还有一个 ActiveMQ 文档： http: [//activemq.apache.org/selectors.html](http://activemq.apache.org/selectors.html)

正确的语法是

```
var headers = {'selector': "to = '" + self.userName + "' OR '*'"}; 
```

# java - 无法从池中获取资源（SocketTimeoutException:)

> ID：13043658
> 
> 赞同：37
> 
> 时间：2012-10-24T05:50:32.677
> 
> 标签：java, redis, socketexception, jedis

我正在运行多个工作线程（大约 10 个）来访问来自 redis Q 的数据。
因为我正在为**Jedis Client**使用无限超时。

```
Jedis jedis = pool.getResource();
jedis.getClient().setTimeoutInfinite(); 
```

我仍然收到错误**“无法从池中获取资源”。**堆栈跟踪如下所示。

```
redis.clients.jedis.exceptions.JedisConnectionException: Could not get a resource from the pool
at redis.clients.util.Pool.getResource(Pool.java:22)
at Workers.Worker1.met1(Worker1.java:124)
at Workers.Worker1.work(Worker1.java:108)
at org.gearman.impl.worker.WorkerConnectionController$3.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)  

Caused by: redis.clients.jedis.exceptions.JedisConnectionException: java.net.SocketTimeoutException: connect timed out
at redis.clients.jedis.Connection.connect(Connection.java:124)
at redis.clients.jedis.BinaryClient.connect(BinaryClient.java:54)
at redis.clients.jedis.BinaryJedis.connect(BinaryJedis.java:1657)
at redis.clients.jedis.JedisPool$JedisFactory.makeObject(JedisPool.java:63)
at org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:1188)
at redis.clients.util.Pool.getResource(Pool.java:20)
... 6 more  

Caused by: java.net.SocketTimeoutException: connect timed out
at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
at java.net.PlainSocketImpl.connect(Unknown Source)
at java.net.SocksSocketImpl.connect(Unknown Source)
at java.net.Socket.connect(Unknown Source)
at redis.clients.jedis.Connection.connect(Connection.java:119)
... 11 more 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-07-17T21:31:57.767

我注意到如果 Redis 没有运行，这个异常可以并且将会被抛出。只是一个抬头。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-03-23T08:20:31.070

根据 Rick Hanlon 的回答，如果将 Redis 与 Spring Boot 一起使用，也会引发此异常。

如果你使用的是 Spring Boot，仅仅依赖 Redis 是不够的；您还需要从[redis.io](http://redis.io)在您的机器上手动下载并安装 Redis ，然后从 Bash 终端运行它：

```
me@my_pc:/path/to/redis/dir$ ./src/redis-server ./redis.conf 
```

运行服务器后，您需要在所有使用 Redis 的应用程序中添加相关行：

`application.properties`：

```
...
spring.redis.host: <yourhost> // usually localhost, but can also be on a LAN
spring.redis.port: <yourport> // usually 6379, but settable in redis.conf 
```

`application.yml`：

```
...
spring:
  redis:
    host: <yourhost> // usually localhost, but can also be on a LAN
    port: <yourport> // usually 6379, but settable in redis.conf 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-03-01T23:41:47.293

是一直发生还是偶尔发生？如果是偶尔，您可能需要检查连接池的大小。

默认连接池大小（如果您使用`JedisPoolConfig`）为[**8**](https://github.com/guyboertje/jrjedis/blob/master/src/main/java/org/apache/commons/pool2/impl/GenericObjectPoolConfig.java#L37)。对于您的情况，这可能太小了。

```
JedisPoolConfig poolConfig = new JedisPoolConfig();
poolConfig.setMaxTotal(128);
jedisPool = new JedisPool(poolConfig, HOST, PORT, ...); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-01-23T13:33:56.337

可能的原因;

1 - Redis 服务器已关闭或 Redis 应用程序没有响应。

2 - 应用程序无法连接到 Redis 服务器（防火墙等问题）。

3 - 连接到 Redis 服务器超时。

4 - (Redis) 池中的所有连接当前都忙，无法分配新连接。

案例 1 和案例 2 是相关的。

对于情况 3，必须增加连接超时（“RedisConnectionTimeout”）：

```
pool = new pool(poolConfig, RedisIp, RedisPort, RedisConnectionTimeout); 
```

对于情况 4，必须增加最大连接数（“RedisMaximumActiveConnectionCount”）：

```
poolConfig.setMaxTotal(RedisMaximumActiveConnectionCount); 
```

假设以下或类似的实现；

```
private Pool<Jedis> pool =  null;   

private final String RedisIp="10.10.10.11";
private final int RedisPort=6379;
private final String RedisConnectionTimeout=2000;
private final String RedisMaximumWaitTime=1000;
private final String RedisMaximumIdleConnectionCount=20;
private final String RedisMaximumActiveConnectionCount=300;
private final String SentinelActive=false;
private final String SentinelHostList="10.10.10.10:26379,10.10.10.10:26380,10.10.10.10:26381";
private final String SentinelMasterName="sentinel-master-name";

private synchronized void initializePool()
{
    if(pool!=null) return;

    poolConfig poolConfig = new poolConfig();
    poolConfig.setMaxTotal(RedisMaximumActiveConnectionCount); 
    poolConfig.setMaxIdle(RedisMaximumIdleConnectionCount);  
    poolConfig.setMaxWaitMillis(RedisMaximumWaitTime); 

    if(SentinelActive)
    {
        String [] sentinelsArray = SentinelHostList.split(",");

        Set<String> sentinels = new HashSet<>();            
        for(String sentinel : sentinelsArray)
        {
            sentinels.add(sentinel);
        }

        String masterName = SentinelMasterName;

        pool = new JedisSentinelPool(masterName, sentinels, poolConfig, RedisConnectionTimeout);            
    }
    else
    {       
        pool = new pool(poolConfig, RedisIp, RedisPort, RedisConnectionTimeout);
    }

}           

protected Jedis getConnection()
{               
    if(pool==null)
        initializePool();

      Jedis jedis = pool.getResource();

      return jedis;     
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-03-27T10:36:47.267

如果你的代码是这样的：

```
JedisPoolConfig jedisPoolConfig = initPoolConfig();    
jedisPool = new JedisPool(jedisPoolConfig, "*.*.*.*", 6379); 
```

你可以试试这个：

```
JedisPoolConfig jedisPoolConfig = initPoolConfig();    
jedisPool = new JedisPool(jedisPoolConfig, "*.*.*.*", 6379,10*1000); 
```

这是因为对于 Redis，默认的超时时间是 2 秒，但程序可能在这个时间内已经运行完毕。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-25T20:53:56.417

不确定，但也许你没有将 Jedis 对象返回到池中，并且你的 redis-server 有连接限制。

每个工作线程都应该在其工作完成后将 Jedis 实例返回到池中：

```
Jedis jedis = jedisPool.getResource();
try {
    jedis.getClient().setTimeoutInfinite();
    // your code here...
    ...
} finally {
    jedisPool.returnResource(jedis);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-27T22:08:54.090

当 jedis 根本无法访问所需的 redis 实例（域/IP、端口或密码）时，我遇到了该错误，如果它们是错误的，或者它们之前是正确的，现在是错误的，或者如果它们是对，但是防火墙阻止了对它们的访问，等等。

我知道 OP 已确认已运行 redis-cli 来确认连接，但如果确认这是从 jedis 呼叫来自的同一个地方完成的（这可能是一个应用服务器利用 jedis 连接到一些redis服务器）。

但是那个原始帖子是 2012 年的，所以我不希望听到更新，但我把这些留给可能找到这个帖子的其他人。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-22T06:00:19.833

我只想在@mrt 和@charlie 的回答中加一点。我们需要检查redis服务器的属性。对于 redis 客户端 3.2.0 及以上版本，我们也可以设置 ssl 属性，在 JedisShardInfo 的帮助下，如下所示：

```
JedisShardInfo shardInfo = new JedisShardInfo(redisServer, redisServerPort, redisTimeout, redisSsl);
shardInfo.setPassword(redisPassword);
Jedis jedis = new Jedis(shardInfo); 
```

并使用 jedisPool：

```
jedisPool = new JedisPool(poolConfig, redisServer, redisServerPort, redisTimeout, redisPassword, redisSsl);
jedis = jedisPool.getResource(); 
```

其中，在 中`poolConfig`，您可以指定各种属性，如、`setMaxIdle`等。`setMaxWaitMillis``setMaxTotal`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-22T15:08:43.063

我不得不努力解决“无法从池中获取资源”错误，但我终于解决了它，希望它也能解决你的问题！

将“application.properties”中的端口从“6380”更改为“6379”它应该可以正常工作！

# c# - 使用 LINQ 或 lambda 表达式获取该值的值和计数

> ID：13043663
> 
> 赞同：6
> 
> 时间：2012-10-24T05:51:13.437
> 
> 标签：c#, .net, linq, lambda

以下格式的数据对象列表

```
Col1  Col2  Col3

B     45    36    
B     12    69   
A     46    76    
C     89    09    
B     451   37   
D     435   46   
A     450   50   
D     98    43   
B     358   39
A     987   89 
```

需要得到如下格式的结果集（'A'发生3次，'B'发生4次等）

```
Value  Count

A      3   
B      4  
C      1    
D      2 
```

如何使用 LINQ 或 lambda 表达式获得上述结果集？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T05:55:43.827

您可以为此使用[GroupBy](http://msdn.microsoft.com/en-us/library/bb545971.aspx)。

```
var groupedlist = list.GroupBy(c => c.Col1)
                      .Select((key, c) => new {Value = key, Count = c.Count()}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-24T06:00:38.990

您可以通过像这样的 lambda 表达式来实现它

```
var list = from x in dataObjects
           group x by x.Col1 into g
           select new { Value = g.Key, Count = g.Count() }; 
```

并通过使用`GroupBy`@Asif 回答的Linq Extension 方法

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-24T05:57:01.800

```
var dictionary = list.GroupBy(str => str.Col1)
    .ToDictionary(group => group.Key, group => group.Count()); 
```

[从这里](http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/a5f837bd-6405-4e88-a3de-b391c20b813a/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-24T05:56:49.537

看看[`.GroupBy()`](http://msdn.microsoft.com/en-us/library/bb534501.aspx)在`col1`. 然后，您可以使用[`.Count()`](http://msdn.microsoft.com/en-us/library/bb338038.aspx)结果组来确定每个组中有多少。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-24T07:25:07.017

```
List<TestOverFlow> list = new List<TestOverFlow>() 
{
  new TestOverFlow {Col1="B",Col2=45,Col3=36},
  new TestOverFlow {Col1="B",Col2=12,Col3=69},
  new TestOverFlow {Col1="A",Col2=46,Col3=76},

  new TestOverFlow {Col1="C",Col2=89,Col3=09},
  new TestOverFlow {Col1="C",Col2=10,Col3=09},
  new TestOverFlow {Col1="C",Col2=89,Col3=1},
};

var Query = from result in list orderby result.Col1
            group result by result.Col1 into g 
            select new { Value = g.Key, Count = g.Count() };

foreach (var x in Query)
{
    Console.WriteLine("{0},{1}", x.Value, x.Count);
} 
```

结果：

```
Value Count     
A      1  
B      2  
C      3 
```

# android - 如何在android中将OffscreenPageLimit值设置为零

> ID：13043665
> 
> 赞同：0
> 
> 时间：2012-10-24T05:51:55.730
> 
> 标签：android

我正在使用页面适配器来实现水平滑动。我想将 OffscreenPageLimit 设置为零，因为我希望只加载屏幕上的视图。但不幸的是它不起作用。谁能给我替代解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:54:46.093

如果您使用的是 a `FragmentPageAdapter`，那么完成您所追求的应该不会很棘手。您只需要确保在创建片段（或其父活动或附加等）时不进行任何“加载”*。而是在片段中创建一个方法，您可以调用该方法来启动加载过程。之后，设置一个'startLoad' 方法并在其中一个或中调用该方法[`OnPageChangeListener`](http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html)-以更适合您的需要为准。`ViewPager``onPageScrolled(...)``onPageSelected(...)`

这样，您的适配器中仍然有多个项目，但是您可以使用非常简单的布局初始化任何屏幕外页面。只有当页面滚动时，您才能开始艰苦的工作。

*= 请注意，这里的“加载”是一个模糊的术语。拥有一个只有一个页面的适配器并没有任何意义（正如@fliespl 已经指出的那样）。相反，如上所述，允许多个页面并将任何不可见的东西初始化为一些非常基本的状态。当水平滚动显示页面（部分）时，只需开始实际加载内容。

只是一个提示：设置一个定义“startLoad”方法的接口可能不是一个坏主意。如果设置正确，您应该能够安全地在适配器中转换任何项目并开始加载，而不必担心实际的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T05:54:29.053

如果你仔细看看，你的 logcat 会输出这个字符串: `Requested offscreen page limit 0 too small; defaulting to 1`，这意味着你不能这样做:)

如果您不想要适配器，为什么要使用它？您可以简单地膨胀和替换您的布局或开始新的活动。

# c# - 按 RadDataFilter 过滤 RadTreeView 项

> ID：13043680
> 
> 赞同：5
> 
> 时间：2012-10-24T05:53:25.907
> 
> 标签：c#, wpf, xaml, telerik, radtreeview

我正在使用 RadDataFilter 过滤 RadTreeView 的 ItemSource，但是当执行此代码时，过滤器仅适用于不足的根节点。有没有办法让过滤器在节点的层次结构中向下渗透，以便为每个节点调用我的谓词？换句话说，过滤器可以应用于整个TreeView吗？

RadDataFilter：Source 绑定到 ViewModel 中的 ObservableCollection。

```
<telerik:RadDataFilter Name="radDataFilter"
                           telerik:StyleManager.Theme="Metro"
                           Grid.Row="2"
                           VerticalAlignment="Top"
                           HorizontalAlignment="Center"
                           MaxHeight="250"
                           Width="500"
                           BorderBrush="SkyBlue"
                           BorderThickness="2"                     
                           Source="{Binding SampleCollection}"
                           Margin="1" />
the RadTreeView:
 <telerik:RadTreeView  x:Name="RadTreeView1"
                                 VerticalAlignment="Top"
                                 HorizontalAlignment="Stretch"
                                 Grid.Row="1"
                                 ToolBar.OverflowMode="Always"
                                 BorderBrush="SkyBlue"
                                 BorderThickness="2"
                                 MinHeight="300"
                                 MaxHeight="500"
                                 MinWidth="500"
                                 telerik:StyleManager.Theme="Metro"
                                 ItemsSource="{Binding FilteredSource,ElementName=radDataFilter}">
        >
        <telerik:RadTreeView.ItemTemplate>
            <HierarchicalDataTemplate ItemsSource="{Binding Children,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}">
                <TextBlock x:Name="Item" Text="{Binding SampleCode}">
                </TextBlock>
                <HierarchicalDataTemplate.Triggers>
                    <DataTrigger Binding="{Binding IsDescribed, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Value="true">
                        <Setter TargetName="Item" Property="Foreground" Value="Red"/>
                    </DataTrigger>
                </HierarchicalDataTemplate.Triggers>
            </HierarchicalDataTemplate>
        </telerik:RadTreeView.ItemTemplate>
    </telerik:RadTreeView> 
```

我知道 Filter 是 ItemsCollection 的一个属性（不是 DP），它不是 DependencyObject ，因此不存在 DP 值继承。树中的每个节点都有自己的 ItemsCollection，它有自己的 Filter。如何设置每个节点的过滤器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T16:54:46.050

我建议使用该`NodeDataBound`事件，该事件为每个单独的节点触发（无论层级如何）。这样，您可以完全控制要对节点执行的过滤。

```
protected void RadTreeView1_NodeDataBound(object sender, RadTreeNodeEventArgs e) 
{     
    e.Node.ToolTip = (e.Node.DataItem as DataRowView)["Description"].ToString(); 
} 
```

[http://www.telerik.com/help/aspnet-ajax/treeview-server-node-databound.html](http://www.telerik.com/help/aspnet-ajax/treeview-server-node-databound.html)

# interface - 错误：CHKJ2800E： 接口 com.ibm.wsspi.sca.ejb.module.ServiceLocal，

> ID：13043683
> 
> 赞同：1
> 
> 时间：2012-10-24T05:53:40.253
> 
> 标签：interface, local

直到今天下午，我的 EJB 工作正常，突然我在每个 ejb 中都遇到了这个错误。

```
CHKJ2800E: <local> interface com.ibm.wsspi.sca.ejb.module.ServiceLocal, or one of its supertypes, cannot be reflected. Check the classpath. 
```

有谁知道解决这个问题？

# javascript - jQuery Weekcalendar 有些方法不起作用

> ID：13043684
> 
> 赞同：1
> 
> 时间：2012-10-24T05:53:47.023
> 
> 标签：javascript, jquery, jquery-ui

我有一些 HTML 标记，其中有`<div id=calendar>...<div>`一个

我正在使用`<div id=calendar>...<div>`jQuery ui 对话框，在这个标签内，我有一个 jQuery 周历。但是当我打开包含周历的对话框时，它的一些方法不起作用。

例如，我设置了`_scrollToHour(10)`但它没有滚动到 10。在所有这些过程中，浏览器中的 Javascript 控制台没有显示任何错误。

当我在 jQuery ui 对话框之外使用这个 jQuery 周历时，它可以正常工作。

谁能告诉我如何在 jQuery ui 对话框中使用 jQuery 周历？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T08:30:20.640

您是否尝试使用 .live() 附加事件处理程序？

[jQuery直播](http://api.jquery.com/live/)

# javascript - 同时执行 .load() 和转换时 CSS3 转换口吃

> ID：13043696
> 
> 赞同：0
> 
> 时间：2012-10-24T05:55:08.617
> 
> 标签：javascript, jquery, css, transition

我正在测试这个[很棒的新模态插件](http://labs.voronianski.com/jquery.avgrund.js/)并且遇到了问题。在模板：区域中，我创建了一个 id 为 popupModal 的 div，如下所示：

```
$('#ContactModalLink').avgrund({
        height: 340,
        width: 400,
        showClose: false,
        showCloseText: '',
        enableStackAnimation: true,
        onBlurContainer: 'body',
        template: '<div id="popupModal"></div>'
}); 
```

起初我以为我可以在任何地方使用 .load ，但是由于在单击元素之前 div 不存在，所以我这样做是为了将我的 url 加载到弹出窗口中：

```
setTimeout(function() {
    $('#ContactModalLink').click(function(){
        $('#popupModal').load('/ModalForm.aspx');
    });
}); 
```

这让我将 url 加载到我的 div 中，即使 setTimeout 为 0。但是，CSS 转换在中间有一个无法忍受的打嗝。我觉得我已经尝试了一切都无济于事。

太感谢了！

# linux - 配置脚本失败

> ID：13043697
> 
> 赞同：0
> 
> 时间：2012-10-24T05:55:32.003
> 
> 标签：linux, configuration, prolog, configuration-files, yap

我刚刚在 VMBox 中安装了 ubuntu 12.04，现在尝试安装“YAP Prolog”。因此，我使用“git clone ...”下载代码并获取代码，我必须对其进行配置和构建。在我的 OSX 上配置和构建工作正常，但在我的 linux 发行版上，我在配置过程中遇到错误。我不明白，在互联网上找不到任何有用的东西。我可能需要一些包裹吗？如果是，如何找出哪个？

我将 config.log 放到谷歌文档中： [https ://docs.google.com/document/d/1NqWwNXbHHnUT0x9uoxVqobTtmJQIrUW_4DnFrXFGn28/edit](https://docs.google.com/document/d/1NqWwNXbHHnUT0x9uoxVqobTtmJQIrUW_4DnFrXFGn28/edit)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T18:56:34.143

已解决：缺少的库是 libncurses5-dev！

# mvc-mini-profiler - Threshold timing per operation using the mvc mini profiler

> ID：13043699
> 
> 赞同：5
> 
> 时间：2012-10-24T05:55:55.603
> 
> 标签：mvc-mini-profiler

This is the scenario I am facing: I am using MiniProfiler to profile some operations. But it lacks a particular functionality that I will have to use. There is a Settings file MiniProfiler that can let me do some configurations like what to consider for profiling and what not, what to think as slow and what not, etc. But these are global settings and apply to all operations being profiled. What I need is to be able to say something like this:

```
using (mvcminiprofiler.Step("OperationName", 1200)
{
    //some C# code 
} 
```

This argument '1200' signifies that this operation is expected to take 1200 ms and do not save it's results to the database if it takes anything less than or equal to 1200 ms. But if it takes more than 1200 ms then save this response time to the data base. So I am basically talking about per operation threshold values.

I am willing to write a wrapper around the MiniProfiler for this but I am not willing to change the mini profiler source code. Actually we have already built a little framework around the mini profiler but we would not like to change its source code. But merely extend it's functionality in some ways.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-16T09:34:50.430

I just added the following new extension methods to MiniProfiler, available in [nuget 3.0.10-beta5](https://www.nuget.org/packages/MiniProfiler/3.0.10-beta5) and higher:

1.  `MiniProfiler.StepIf(string name decimal minSaveMs, bool includeChildren = false)`
2.  `MiniProfiler.CustomTimingIf(string category, string commandString, deciml minSaveMs, string executeType = null)`

You should be able to use these to do *exactly* what you are looking to do. In your case, you would use code like this:

```
using (MiniProfiler.Current.StepIf("Operation Name", 1200)) {
  // do your stuff
} 
```

You can use the `includeChildren` (defaults to false) to set whether or not to use the time recorded in child profiles when determining whether or not to save this `CustomTiming`.

More info in [this GitHub Issue](https://github.com/MiniProfiler/dotnet/issues/34).

# c - A* 在 C 中用于二维数组寻路是否合理？

> ID：13043701
> 
> 赞同：3
> 
> 时间：2012-10-24T05:56:25.150
> 
> 标签：c, arrays, path-finding, a-star

我需要我的 C 程序才能在电路板上移动。棋盘由 2D int 数组表示（其中 0 和 7 是空方格，其他都是障碍物）。从一个方格移动到另一个方格的成本始终相同，但不应沿对角线移动。

我一直在查找 A*，但它令人困惑，我能找到的每一个例子都是 C++ 或 Java，所以我开始怀疑它是否可能在 C 上。

那以及它是否是用于它的最佳算法。

编辑：板是 24x25 或 25x24 我不记得哪个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:12:30.940

由于您的电路板很小，您可以使用[广度优先搜索 (BFS)](http://en.wikipedia.org/wiki/Breadth-first_search)来完整搜索最佳路径。我认为性能即使不比 A* 算法更好也可以相提并论。

该算法比 A* 更简单，并且互联网上有许多 C 语言实现。以下是网格上的 BFS 横向示例：

![网格上的 BFS 横向示意图。 如果所有方格都可到达，则与中心的距离为指示的距离。](../Images/d3d3bf0cfd80f5f6709f6a5c67509075.png)

要获取路径，您可以保存一个矩阵（例如 char 的 2d 数组——让我们命名它`parent`），`parent[x][y]`例如（0 - 如果你从左边到达那个正方形，1 - 右，2 - 上，3 - 下）。例如，如果您正在使用坐标 (4,6) 访问广场并将 (5,6) 放入队列中，您这样做 `parent[5][6] = 2`是因为 (5,6) 来自 (4,6) 上方的行。因此，要检索完整路径，您可以选择目标节点并保存`parents`坐标，直到到达源方格。

现在由您来考虑并弄清楚如何实现它:)

# static-ip-address - 如何知道静态 IP 是分配给公司还是 isp

> ID：13043702
> 
> 赞同：1
> 
> 时间：2012-10-24T05:56:25.137
> 
> 标签：static-ip-address

有没有办法知道静态 IP 是否分配给 ISP？我正在使用[phpwhois](http://www.phpwhois.org/)类查找 IP 所有者，但我无法找到它是公司还是 ISP。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:15:02.110

**尝试这个：**

```
<?php 
$domain=$_SERVER['REMOTE_ADDR'];
$domain1 = isset($_SERVER['HTTP_X_FORWARDED_FOR']) ? $_SERVER['HTTP_X_FORWARDED_FOR'] : $_SERVER['REMOTE_ADDR'];
echo "Viewer's Server's IP Address: <strong>$domain</strong> - ";
echo "Viewer's PC IP Address: <strong>$domain1</strong>";
?> 
```

# mysql - Mysql每分钟平均值参考unix时间戳

> ID：13043705
> 
> 赞同：0
> 
> 时间：2012-10-24T05:56:47.133
> 
> 标签：mysql, average, unix-timestamp

我每 1-3 秒用 unix 时间戳记录我的温度，我希望每 1 分钟平均返回一行数据，并持续 24 小时。

我的记录器表如下所示：

```
unixtime    temp
1350899052  25.37
1350899054  25.44
1350899057  25.44
1350899059  25.44
1350899062  25.44
1350899064  25.44
1350899069  25.44
1350899071  25.44 
```

我希望像它一样返回

```
unixtime    temp
1350899052  25.37 -- average value of 1 minute range both unixtime and temp 
1350899054  25.44
1350899057  25.44 
```

请告知我应该如何执行 mySQL 命令？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T05:58:50.840

以下应该有效：

`SELECT ROUND(unixtime/(60)) AS minute, avg(temp) FROM table where unixtime >= UNIX_TIMESTAMP(DATE_SUB(NOW(), INTERVAL 1 DAY)) GROUP BY ROUND(unixtime/(60));`

以正常格式显示日期：

`SELECT from_unixtime(floor(unixtime/(60))*60) AS minute, avg(temp) FROM test where unixtime >= UNIX_TIMESTAMP(DATE_SUB(NOW(), INTERVAL 1 DAY)) GROUP BY floor(unixtime/(60))`

输出：

```
minute  avg(temp)
2012-10-24 08:02:00 37.5
2012-10-24 08:03:00 45 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T06:02:09.987

```
 1\. 1 min

select * from logger_table where unixtime> timestamp(DATE_SUB(NOW(), INTERVAL 1 MINUTE)) group by temp

 2\. 24 hrs
select * from logger_table where unixtime> timestamp(DATE_SUB(NOW(), INTERVAL 24 HOUR)) group by temp; 
```

# c# - StreamWriter.Flush() 还会调用 FileStream.Flush() 吗？

> ID：13043706
> 
> 赞同：9
> 
> 时间：2012-10-24T05:56:47.447
> 
> 标签：c#, .net, stream, filestream, flush

我有一个 StreamWriter，其底层流是`FileStream`. 下面的代码是否保证也将其缓冲区刷新到文件系统上`FileStream`的实际文件中，还是我需要显式调用？`Flush()``FileStream`

```
using (var fs = new FileStream("blabla", FileMode.Append)) {
    using (var sw = new StreamWriter(fs)) {
        sw.WriteLine("Hello, I want to be flushed.");
        sw.Flush(); //I need this to also flush onto the file, not just to the FileStream
    }
} 
```

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.flush.aspx)，“*除非您明确调用 Flush 或 Close，否则刷新流不会刷新其底层编码器*”，但我不知道 FileStream 是否可以被视为“底层编码器”。

另外，如果我不指定 FileOptions.WriteThrough，我是否保证操作系统最终会将刷新的行写入磁盘，即使程序在两个流关闭之前崩溃（假设例如没有`using {}`块，只调用`Flush()`)?

在我的场景中，我需要保持流打开（用于记录），因此我不能使用`using {}`块，但我想确保即使程序崩溃，数据也将始终写入磁盘。如果电源关闭并且操作系统没有刷新到磁盘上，我可以承受丢失数据的后果，但否则我需要操作系统最终刷新，即使我从未正确调用`Close()`流。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T06:15:14.273

是的，调用`Flush`会`StreamWriter`导致底层流被`Flush`编辑。4.5版本调用了一个私有`Flush(bool,bool)`函数，其结尾为：

```
if (flushStream)
{
    this.stream.Flush();
} 
```

`flushStream`第一个参数在哪里，是构造`this.stream`的流，调用是。`StreamWriter``Flush()``Flush(true,true)`

* * *

（答案的旧部分 - 我在回答时非常迂回。将答案的最相关部分移到顶部）

它没有在我能找到的任何地方的文档中明确说明，但是任何通过将另一个流传递给它而构造的流类都应该被假定为“获取”该流的“所有权”（除非另有明确说明）。

也就是说，一旦你构建了`StreamWriter`using `fs`，你就不应该对`fs`自己执行任何直接的操作。

* * *

您从 MSDN 引用的部分与后面的句子有关：

> 这允许编码器保持其状态（部分字符），以便它可以正确编码下一个字符块。这种情况会影响 UTF8 和 UTF7，其中某些字符只能在编码器接收到相邻字符后才能编码。

也就是说，您可能已经将数据传递给`Write`这样的人，您已经给了它一些 Unicode 代理项，但不是一个完整的字符。`Flush`不会将这些代理项写入流。只要您始终将格式正确（完整）的字符串传递给`Write`，您就不必担心这一点。

* * *

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T06:04:27.487

如果与**using block**一起使用，则可以保证流处理！

使用一串流，关闭最外面的流（在链的头部）*`i.e StreamWriter in your case`*关闭整个地段*`i.e FileStream`*

Flush 方法强制立即写入内部缓冲区。流时会自动调用 Flush `closed`，因此您无需执行以下操作

`s.Flush();s.Close();`

因此，当最顶层的流关闭时，它会刷新，然后关闭它的底层流，这些流也刷新那里的内容。

**例如**考虑这个链

```
FileStream->GZipStream->StreamWriter 
```

所以，当你关闭 StreamWriter

`StreamWriter`冲洗和关闭。它也关闭了undelying`GZipStream`

`GzipStream`冲洗并关闭。它也关闭底层`FileStream`

文件流`flushes`和`closes`

# mysql - MySQL：基于前行的查询顺序

> ID：13043713
> 
> 赞同：-1
> 
> 时间：2012-10-24T05:57:51.173
> 
> 标签：mysql, sql, select

我有一个这样的数据库结构：

•`Insured`表

```
+-----------+--------------+-----+
| InsuredID |         Name | ... |
+-----------+--------------+-----+
|         1 |     John Doe | ... |
|         2 |   Bill Gates | ... |
|         3 |   Steve Jobs | ... |
+-----------+--------------+-----+ 
```

•`Accompany`表

```
+-------------+-----------+---------------+-----+
| AccompanyID | InsuredID |          Name | ... |
+-------------+-----------+---------------+-----+
|           1 |         1 |    Joanna Doe | ... |
|           2 |         1 |    Johnny Doe | ... |
|           3 |         3 | Steve Ballmer | ... |
+-------------+-----------+---------------+-----+ 
```

我怎样才能得到这个结果：

```
+----------------+-----+
|           Name | ... |
+----------------+-----+
|       John Doe | ... |
|     Joanna Doe | ... |
|     Johnny Doe | ... |
|     Bill Gates | ... |
|     Steve Jobs | ... |
|  Steve Ballmer | ... |
+----------------+-----+ 
```

我怎样才能使查询的顺序为 -then`Insured`的`Accompany`地方`Accompany.InsuredID`相当于`Insured.InsuredID`之前的`Accompany`. 应该这样排序：

1.  John Doe（被保险人）`InsuredID = 1`
2.  乔安娜·多伊（伴奏）`InsuredID = 1`
3.  约翰尼·多伊（伴奏）`InsuredID = 1`
4.  比尔盖茨（被保险人）`InsuredID = 2`
5.  史蒂夫乔布斯（被保险人）`InsuredID = 3`
6.  史蒂夫·巴尔默（伴奏）`InsuredID = 3`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T06:06:34.400

像这样的东西应该工作：

```
select name
from (
 select insuredid, name, 0 ins
 from insured
 union all
 select insuredid, name, 1 ins
 from  accompany) isq
order by insuredid, ins 
```

基本上插入一个假列来识别这些行来自哪个表，然后按 排序`insuredid`，然后按我们的任意表号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T06:05:43.857

```
SELECT 
    * 
FROM (SELECT NAme,.... FROM Insured
      UNION ALL
      SELECT Name,.... FROM Accompany)
ORDER BY Name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T06:11:27.207

未经测试，像这样：

```
SELECT Name 
FROM (
      SELECT InsuredID, Name FROM Insured 
      UNION 
      SELECT InsuredID, Name FROM Accompany
     ) AS t
ORDER BY InsuredID 
```

# c++ - 从 VS2003 更新到 VS2010 后生成错误

> ID：13043716
> 
> 赞同：1
> 
> 时间：2012-10-24T05:58:15.617
> 
> 标签：c++, visual-studio-2010

我有一个在 VS2003 中运行良好且没有错误的项目，但由于某种原因我必须将其更新到 2010。更新项目后，在构建项目时，出现以下错误：

```
1.errorLNK1179:Invalid or corrupt files ：duplicate comdat“IIDIDispatchEx”
2.IIDIDispatchEx duplicate initialization on file dispeX.h(121) 
```

我对 LNK1179 的发现表明该错误可能是由于我有多个 COMDAT 共享相同的名称，并使用`/h`限制外部名称的长度，同时将 /Gy 打包在 COMDAT 中。
但是`/H`代码中没有使用选项，我禁用了`/Gy`. 但错误仍然发生。

搜索`dispeX.h`，我在`MicrosoftSDKs\Windows\v7.0A\Include\`. 第 121 行的代码是：

```
DEFINEGUID(IIDIDispatchEx, 0xa6ef9860, 0xc720, 0x11d0, 0x93, 0x37, 0x0, 0xa0, 0xc9, 0xd, 0xca, 0xa9); 
```

我不知道如何解决这个问题，非常欢迎任何帮助或解释或指导正确方向。

# sql - 确定导致 TSQL 中违反约束的值/列？

> ID：13043717
> 
> 赞同：4
> 
> 时间：2012-10-24T05:58:25.620
> 
> 标签：sql, sql-server, sql-server-2008

```
DECLARE @temp AS TABLE (id INT NOT NULL PRIMARY KEY CLUSTERED, name VARCHAR(10))
BEGIN TRY
declare @Source table (id int not null, name varchar(10))
insert @Source
    SELECT 11,'ABC' union all
    SELECT 12,'CDE' union all
    SELECT 13,'FGH' union all
    SELECT 11,'IJK'

INSERT INTO @temp
SELECT * from @Source
SELECT * FROM @temp

END TRY
BEGIN CATCH
 EXEC msdb.dbo.sp_send_dbmail
 @profile_name = 'Profile Name', 
 @recipients = 'email@email.com', 
 @body = Error_Message, 
 @subject = Error_Message ; 
END CATCH;
GO 
```

这是我的代码工作正常.. 但我想在邮件中包含的是 ID，它导致错误作为对某些电子邮件 ID 的提醒，在这种情况下它是“11”。我怎样才能以某种聪明的方式做到这一点..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T09:41:57.287

正如 Martin 所评论的，2008 SP3 及以后的版本显示了重复的键值。
对于早期版本，您必须自己检测可能的主键违规并引发错误，例如*对于您的具体示例*

```
DECLARE @temp AS TABLE (id INT NOT NULL PRIMARY KEY CLUSTERED, name VARCHAR(10))
BEGIN TRY
declare @Source table (id int not null, name varchar(10))
insert @Source
    SELECT 11,'ABC' union all
    SELECT 12,'CDE' union all
    SELECT 13,'FGH' union all
    SELECT 11,'IJK'

declare @duplicate_key nvarchar(1000);
SELECT TOP(1) @duplicate_key = ID
FROM @Source
GROUP BY ID
HAVING COUNT(*) > 1;
if @duplicate_key is not null
begin
  set @duplicate_key = 
    'Violation of PRIMARY KEY constraint. '+
    'Cannot insert duplicate key in object ''dbo.@temp''. '+
    'The duplicate key value is (' + right(@duplicate_key,10) + ')';
  RAISERROR(@duplicate_key,
            16,
            1);
end;

INSERT INTO @temp
SELECT * from @Source

SELECT * FROM @temp

END TRY
BEGIN CATCH
 select Error_Message() ; 
END CATCH;
GO 
```

# iphone - 将图像添加到 MFMessageViewController 在 IOS5 中可以正常工作，但在 IOS6 中不能

> ID：13043718
> 
> 赞同：0
> 
> 时间：2012-10-24T05:58:34.967
> 
> 标签：iphone, ios, ipad, ios5, ios6

我有一个奇怪的问题，下面的代码在 IOS5 设备，所有模拟器中都可以正常工作，但在 IOS6 设备中失败。我得到一个空白视图来代替图像。

要求：需要在邮件中添加图像。

```
NSString *imageName = @"classroom_tile.png"; 
imagePath = [[NSBundle mainBundle]bundlePath];
imagePath = [imagePath stringByAppendingPathComponent:[NSString   stringWithFormat:@"%@",imageName]];
imagePath = [@"file:///" stringByAppendingString:imagePath];

NSString *formatedUrl = [NSString stringWithFormat:@"</br><table border =\"0\"><tr><td></td><th>%@</th></tr><tr><td><img src= \'%@\' width=200 height=150></td></tr></table>",sometext,imagePath];
[mailComposer setMessageBody:formatedUrl isHTML:YES]; 
```

请建议。

谢谢和问候， 阿尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:16:04.567

您尝试做的事情从未得到支持。将图像添加到电子邮件中的唯一有效方法是将图像添加为附件。但即便如此，您也无法在邮件正文中引用图像附件。

在模拟器中起作用的东西与这样的事情无关，因为您实际上无法在模拟器中发送电子邮件。让我问一下 - 在 iOS 5 设备上运行它时，从应用程序发送的接收到的电子邮件是否实际显示图像，还是仅在应用程序的邮件编辑器中正确显示？如果从应用程序发送并在用户计算机上的某些电子邮件客户端中打开的此类电子邮件显示图像，我会感到非常惊讶。

编辑：事实证明，这在 iOS 5 下确实有效，但在 iOS 6 下无效。我很惊讶。我做了自己的快速测试。在 iOS 5.1 下，发送一封带有此类图像引用的电子邮件到 iOS 设备上的本地文件实际上确实会与电子邮件一起发送，并且确实出现在他们计算机上的客户端电子邮件程序中。当应用程序在 iOS 6 下运行时，图像不会出现在应用程序的邮件编辑器中，也不会出现在收到的电子邮件中。所以至少这是一致的。

另一个小旁注。这一行：

```
imagePath = [imagePath stringByAppendingPathComponent:[NSString stringWithFormat:@"%@",imageName]]; 
```

应该：

```
imagePath = [imagePath stringByAppendingPathComponent:imageName]; 
```

`stringWithFormat:`除非您实际使用字符串格式，否则请勿使用。此外，不需要创建额外的`NSString`对象。

此外，这是获取资源包中文件路径的更好方法：

```
NSString *imagePath = [[NSBundle mainBundle] pathForResource:@"classroom_tile" ofType:@"png"]; 
```

那一行将替换您发布的前三行。

最后一点。使用 HTML 电子邮件时，请包含`<html>`和`<body>`标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T05:56:06.797

```
This is not possible with the current MessageUI API: the MSMessageComposeViewController doesn't accept attachments like the MFMailComposeViewController does.

The only way to do this currently is to use an external service that allows you to send mms via a REST call for example.

GSMA defines a REST specification for exactly this purpose:     http://www.gsmworld.com/oneapi/reference_documentation-version_1.html (multiple pdf's on this page)

Try to find a local service provider that implements this specification and you're good to go.

Just to add the direct wiki link to the OneAPI MMS spec:     http://gsma.securespsite.com/access/Access%20API%20Wiki/MMS%20RESTful%20API.aspx and a link to the PHP/Java sandbox https://github.com/OneAPI/GSMA-OneAPI where MMS can be tested locally . Cheers. 
```

# android - Kendo UI Mobile PhoneGap Application For Android 中不显示页眉和页脚

> ID：13043724
> 
> 赞同：0
> 
> 时间：2012-10-24T05:59:13.887
> 
> 标签：android, cordova, kendo-ui

我使用 Kendo UI 为 android 创建了一个 phonegap 应用程序。在这里，问题是..页眉和页脚未显示在 android 设备中。它在 IOS 设备和普通浏览器上运行良好。检查此链接：[http ://demos.kendoui.c​​om/mobile/application/index.html](http://demos.kendoui.com/mobile/application/index.html)

从上面的链接中，他们使用相同的代码在 ios 和 android 上显示了 o/p。在 IOS 标头中显示正常，但在 android 设备中没有。但是，我想使用 Kendo UI for android 显示带有后退按钮的标题.. 我该怎么做.. 任何其他方式...

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:05:12.770

另外要显示标题，请使用[Kendo UI Doc 中概述的 CSS。](http://docs.kendoui.com/getting-started/mobile/navbar#showing-hidden-view-title)

# java - mongoDB中的游标限制

> ID：13043731
> 
> 赞同：0
> 
> 时间：2012-10-24T06:00:06.150
> 
> 标签：java, mongodb

我正在使用 mongo 作为我的网络应用程序的数据库。Java 代码从 mongo 查询数据。目前 mongo 有 >40000 。在我的一个 api 中，它将返回所有这些文件。所以我只需要在网页上显示 50 个文档。我已经尝试过`cursor.limit(50)`，但它只会减少 while 循环所花费的时间。所以我认为整个时间都来自这段代码`DBCursor cursor=collection.find(query,field)`。有什么方法可以减少它..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:12:15.637

查看 mongodb 文档的[Database Profiler](http://www.mongodb.org/display/DOCS/Database+Profiler)部分。它描述了找出查询执行所花费的时间的方法，然后在后面的部分中讨论如何优化查询。

# c# - 使用 NAudio for .NET 如何删除 mp3 文件末尾的静音波？

> ID：13043732
> 
> 赞同：4
> 
> 时间：2012-10-24T06:00:15.083
> 
> 标签：c#, .net, audio, mp3, naudio

我正在开发一个 C# WPF 应用程序，它将一组单词（大约 17,000 个单词）组合在一起，并生成一个匹配 mp3 文件的播放列表（每个 mp3 文件都是一个单词）。

目前，每个 mp3 文件在其波形结束时都有 1 秒到 30 秒之间的随机静音。

我希望能够以编程方式从文件末尾删除静音波。

使用 NAudio for .NET 如何从 mp3 文件末尾删除静音波？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:16:43.523

我完成了使用[SoX](http://sox.sourceforge.net/)

**SoX Silence 文档：** [http ://digitalcardboard.com/blog/2009/08/25/the-sox-of-silence/](http://digitalcardboard.com/blog/2009/08/25/the-sox-of-silence/)

**SoX Silence 文件结尾的 Stackoverflow 帮助参考：** [https ://stackoverflow.com/a/11834671/677607](https://stackoverflow.com/a/11834671/677607)

**使用 C# 执行命令行：** [https ://stackoverflow.com/a/1469790/677607](https://stackoverflow.com/a/1469790/677607)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T14:12:20.703

有两种方法可以修剪 MP3 文件。第一种是使用 Mp3FileReader 将音频读出为 WAV，然后使用 WaveFileWriter 仅将您想要的数量写入新的 WAV 文件。然后，您将使用 LAME.exe 等工具将其转换回 MP3，因为 NAudio 不包含 MP3 编码器。

第二个是丢弃 Mp3Frames 并且具有不需要解码和重新编码的好处。MP3 文件由一系列 Mp3Frames 组成（并且可以选择在开始或结束处包含 ID3 标签等元数据）。然后，您可以创建一个新的 MP3 文件，只需将您想要的 MP3 帧附加到一个新文件中，跳过最后一个（并选择确保您的 ID3 标签包含在截断的文件中）。查看 Mp3FileReader 的源代码，了解如何从 MP3 文件中一一读取 Mp3Frame。

# ios - iOS 6 - XCode 4.5.1 - iPad 模拟器 - 以编程方式获取错误分辨率

> ID：13043734
> 
> 赞同：1
> 
> 时间：2012-10-24T06:00:30.270
> 
> 标签：ios, xcode, ipad, ios6, simulator

为什么 XCode 4.5.1 中的 Ipad 模拟器在以编程方式签出时显示错误的大小？

## 主视图控制器.m

```
- (void)viewDidLoad{
    [super viewDidLoad];

    [self.view setBackgroundColor:[UIColor redColor]];

    NSLog(@"self.view width : %f",self.view.frame.size.width);
    NSLog(@"self.view height : %f", self.view.frame.size.height);

    mTextView  =   [[UITextView alloc] initWithFrame:CGRectMake(10.0, 10.0, self.view.frame.size.width - 20, self.view.frame.size.height/2)];
    [self.view addSubview:mTextView];
} 
```

我得到的输出为

```
self.view width : 320.000000
self.view height : 548.000000 
```

我的项目规范

1.  通用项目
2.  针对 iOS 6.0
3.  我绝对确定我在创建 MainViewController 时选中了“**针对 ipad ”复选框**
4.  不知道它是否重要，但未选中“使用 xib 作为用户界面”。

这是添加了 textview 的屏幕截图

![在此处输入图像描述](../Images/25ab672ef6112e89ae5fde6e6d9400ca.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:22:50.713

尝试等到：

```
- (void)viewWillAppear 
```

在设置 UITextView 的框架之前。根据[这篇文章](https://stackoverflow.com/questions/10527925/determine-frame-bounds-in-viewdidload)，在那之前您的视图将没有有效的几何图形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:17:19.143

尝试此代码以确定您的计算机对设备的理解：

```
NSRange*  pointRange = [[[UIDevice currentDevice] model] rangeOfString:@"iPad" options:0];

if (pointRange.location == NSNotFound) {

    NSLog(@"iPhone");
}
else

  {
    NSLog(@"iPad");

} 
```

# ios - GPU 图像框架

> ID：13043739
> 
> 赞同：3
> 
> 时间：2012-10-24T06:01:16.383
> 
> 标签：ios, ios6, gpu

我正在制作一个应用程序，您可以使用 Brad Larson 的 GPU Image Framework 对照片应用不同的效果。我想创建一个热过滤器和一个 X 射线过滤器。我还没有找到一种方法来制作我自己的自定义过滤器。

有人可以举一个自定义过滤器的例子，并解释我可能需要做什么来创建一些我上面描述的图像过滤器。

# .htaccess - HTACCESS .. 限制访问 xml 文件

> ID：13043740
> 
> 赞同：0
> 
> 时间：2012-10-24T06:01:21.907
> 
> 标签：.htaccess

我有 xml 文件。我用它作为数据库。我怎样才能限制对这个文件的访问..我检查了多个选项它的工作但所有者（网站）也无法访问这个 xml 文件..

我如何限制从外部访问此文件，但网站可以使用此 xml..

我已经检查过了

```
chmod 700 
```

和

```
ErrorDocument ### index.php -- Example of format 
ErrorDocument 404 /index.php -- Working example
php_flag display_startup_errors off
php_flag display_errors off
php_flag html_errors off
RewriteCond %{HTTP_REFERER} !^http://(www\.)?site\.com(.+) [NC]
RewriteRule .*\.(xml)$ - [F] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:06:41.237

你不需要 mod_rewrite 为此：

```
<Files /db.xml>
   Order Allow, Deny
   Deny from all
</Files> 
```

# objective-c - UITableView 的单元格不加载时的调试策略？

> ID：13043741
> 
> 赞同：0
> 
> 时间：2012-10-24T06:01:23.420
> 
> 标签：objective-c, cocoa-touch, uitableview, subview

我正在尝试将 UITableView 嵌入到我的 ViewController 的主 UIView 中，它是屏幕宽度的 75%。理想情况下，此 UITableView 也将嵌入到导航控制器中。此外，我似乎无法在 iOS 5 中使用 UIContainerViews，因为我遇到错误“无法实例化名为 UIStoryboardEmbedSegueTemplate 的类”（参见[NSInvalidUnarchiveOperationException 和 ContainerView](https://stackoverflow.com/questions/12868255/nsinvalidunarchiveoperationexception-with-containerview)）。

为此，我在 ViewController 的主 UIView 中创建了一个 UIView，它是屏幕宽度的 75%。在那个 UIView 中，我放置了一个 UINavigationBar 和一个 UITableView。我在 ViewController 的`- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil`函数中实例化 UITableViewController。实例化后，我将 ViewController 的 UITableView 连接到 UITableViewController 的 UITableView 通过`self.tableViewController.tableView = self.tableView`.

一切似乎都正常，除了我的 UITableView 没有显示任何单元格，即使我预先加载了数据。

我可以提供哪些额外数据来帮助诊断问题？我当然没有收到任何错误消息，数据源确实收到了数据，我`[self.tableView reloadData]`在数据源更新后调用。

**更新 1**

![适用于 iOS 的 Chrome](../Images/cb5b1ad925a281ca17f6edf24677e097.png)

最终，这是我想要的那种行为，除了我想要多个表视图而不是多个 Web 视图，每个表视图都嵌入在它自己的导航控制器中。我猜 Chrome for iOS 只是截取网页的屏幕截图（？），因为滚动标签时未启用交互，但如果你想保留交互，你会怎么做？

**更新 2**

特定的行似乎在`CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]`哪里`static NSString *CellIdentifier = @"New Cell"`（并且在 IB 中定义了适当的原型 UITableViewCell）。但是，代码似乎并没有在这一行崩溃；相反，似乎启动了`Thread 1: Breakpoint 1.1`一个我没有指定的断点（）。此外，这只发生在我的 iOS 设备上进行测试时。通过 iOS 模拟器进行测试时一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:21:19.777

您的数据源方法需要在您的`tableViewController`（似乎您没有这样做）中实现。您必须将`datasource`tableViewController 的属性设置为`self`并实现原始视图控制器（即`self`）中的方法。此外，您必须`<UITableViewDataSource, UITableViewDelegate>`在 @interface 声明中添加协议。

`UITableViewController`获得标准路由和子类来覆盖数据源方法不是更容易吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T18:24:45.553

你好：对我与 iOS 5 v. iOS 6 如何处理自动布局有关的特定问题的最终答案，特别是关于 UITableViewCells（“Autoresize subviews”）；cf.，[自定义 UITableViewCells 可能在 iOS 6 中工作但在 iOS 5 中不能工作的一些原因是什么？](https://stackoverflow.com/questions/13059985/what-are-some-reasons-why-custom-uitableviewcells-might-work-in-ios-6-but-not-io)

由于这个特定问题含糊不清，并且“答案”与我认为的问题无关，我应该投票删除它吗？

# xcode - 如何在 UITextField 上使用数组？

> ID：13043742
> 
> 赞同：0
> 
> 时间：2012-10-24T06:01:23.357
> 
> 标签：xcode, xcode4.3

我怎样才能在一个`NSMutableArray` 上使用`UITextField`？我有一个按钮，点击后会显示`UITextField`. 我希望每次按下按钮`UITextField`时都会显示一个新按钮。但我不知道如何使用数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:06:05.480

声明一个`int counter;`in .h 文件。

然后，在 btn Press 事件中

```
- (IBAction) btnPressed : (id) sender
{
    if(counter < [yourMutableArray count])
    {
        UITextField* myTextFIeld// initializing and all other stuff you want

        //at the end
        counter++;
    }
} 
```

This might work, although being more descriptive would help!

# php - Drupal 7 -为内容区域中的所有标签添加相同的类

> ID：13043744
> 
> 赞同：4
> 
> 时间：2012-10-24T06:01:28.910
> 
> 标签：php, drupal, drupal-7, drupal-theming

我有一个在线投资组合网站，我从静态 HTML 转移到 Drupal 7 - 试图学习 Drupal。我有 3 个具有图片库的单独页面。我有一个 javascript (.js) 文件，可以将反射添加到任何带有 class="reflect" 的图像上。在 HTML 中，这很容易做到，很明显，它在我的静态站点中工作得很好。我想继续使用它，但我一生都无法弄清楚如何将所需的类添加到我的图像中。

期望的结果：

```
<img src="image.jpg" class="reflect" />
<img src="image2.jpg" class="reflect" />
<img src="image3.jpg" class="reflect" /> 
```

等等...

**解决其他发现的建议：** 我所有的图像目前根本不带类。我确实找到了一些建议的解决方法，但它们不太适合我的需要，因为我需要为所有存在的标签添加相同的类，同时忽略其他任何地方，例如页眉和页脚。另外，虽然我知道一点 PHP，但我并不擅长它。Drupal 应该是完全动态的，所以我确信有办法做到这一点，但我不知所措。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T07:21:54.490

您可以实现[theme_image](http://api.drupal.org/api/drupal/includes!theme.inc/function/theme_image/7) () 来做到这一点，在您的`template.php`文件中只需键入以下内容：

```
function [YOUR_THEME]_image($variables)
{
    $attributes = $variables['attributes'];
    $attributes['src'] = file_create_url($variables['path']);

    $attributes['class'][] = 'reflect'; // add the class name here

    foreach (array('width', 'height', 'alt', 'title') as $key) {

        if (isset($variables[$key])) {
            $attributes[$key] = $variables[$key];
        }
    }

    return '<img' . drupal_attributes($attributes) . ' />';
} 
```

请注意，该课程将添加到整个站点的所有图像中。

希望这会有所帮助……穆罕默德。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T06:19:19.113

您可以将图像放在 div 中，并通过它为所有图像分配一个类，如下所示：

```
<div class="imgDiv">
    <img src="image.jpg" alt="" />
    <img src="image2.jpg" alt="" />
    <img src="image3.jpg" alt="" />
</div> 
```

并定义你的班级：

```
.imgDiv img {
    border: 2px solid #f00;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T06:35:37.927

是的，您可以用 id 包装 div 并在 css 文件中为 img 标签添加 css。您也可以使用 jquery。

# android - Android 在运行时在 res 文件夹中添加 Language XML (strings.xml)

> ID：13043747
> 
> 赞同：3
> 
> 时间：2012-10-24T06:02:30.470
> 
> 标签：android, android-resources

我有一个`res`文件夹中有 3 种语言的 android 应用程序。

*   英语
*   法语
*   中国人

我希望我的应用程序在运行时在`res`文件夹中添加另一种语言，而不是通过添加字符串 xml 文件并重新编译它们。

我怎样才能做到这一点？我在谷歌搜索了很多，没有运气。

非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:43:30.793

我确认这是不可能的，因为 res 文件夹中的所有文件都是**只读的**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:39:03.700

我面临同样的问题，我将从（缓存的）远程文件中获取所有字符串。TextView 文本属性将存储一个 id，并且在 Activity.onCreate() 方法中，我将以编程方式将所有 TextViews.text 字符串替换为当前语言文件中的匹配值。

# linux - vi 命令的含义 :s/1,$/ABC/CBS?

> ID：13043748
> 
> 赞同：0
> 
> 时间：2012-10-24T06:02:54.293
> 
> 标签：linux, unix

有人知道这个 vi 命令是什么意思吗？

我对 Linux 很陌生，我被要求解释它的作用，但收到一条错误消息

知道这意味着什么或为什么我会收到此错误？

```
:s/1,$/ABC/CBS 
```

错误信息

```
E488: Trailing characters 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T06:07:25.840

该命令的`:s/1,$/ABC/CBS`意思是，*用 unknown 修饰符**替换`1,`行尾的`ABC``CBS`*。由于这个*未知的修饰符*，它是一个**错误的命令**

如果它本来是这样`:1,$ s/ABC/CBS/`的，这意味着，*将第一行替换`ABC`为从文件的最后一行（）`CBS`开始的每一行`1``$`*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T06:06:50.800

应该是：

```
:1,$s/ABC/CBS 
```

即用 CBS 在文件的每一行上替换第一次出现的 ABC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T06:11:41.097

这是用 'bb' 替换 'aa' 的命令：

```
:s/aa/bb/ 
```

您的代码实际上试图用“ABC”替换行尾的“1”

您收到的错误意味着“CBS”不是有效的尾随标志。我使用的标志是：

```
g for global
c for ask confirmation
I for ignore case 
```

欲了解更多信息，请查看[此链接](http://vim.wikia.com/wiki/Search_and_replace)

# joomla - 为什么我不能通过 sql 更新 Joomla 密码？

> ID：13043751
> 
> 赞同：0
> 
> 时间：2012-10-24T06:03:15.807
> 
> 标签：joomla, joomla2.5

这是一个简单的代码。它不返回任何错误，也没有结果。哪里可能有问题？

```
$salt = JUserHelper::genRandomPassword(32);
$crypted = JUserHelper::getCryptedPassword(base64_decode($this->OtherDB->loadObject()->Password), $salt);
$password = $crypted.':'.$salt;

//$password - b913a58019885777428774bacd622fd3:V62lC8MthS117GUDa2KJMN9lsk4E5VGo

$db = JFactory::getDbo();
$query = 'UPDATE `#__users` SET `#__users`.`password` = \''.$password.'\' WHERE `#__users`.`username` = \''.$username.'\'';
$db->setQuery($query); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T06:16:03.590

你忘了执行它

```
$db->setQuery($query);
$db->query(); 
```

# asp.net - Windows Phone ASP.NET Web 服务压缩

> ID：13043753
> 
> 赞同：4
> 
> 时间：2012-10-24T06:03:27.040
> 
> 标签：asp.net, windows-phone-7, soap

我正在为 Windows Phone 和 iOS 开发一个应用程序，它需要使用 ASP.NET Web 服务（SOAP，我开发的）。由于 XML 固有的冗长，我通过 Web 服务下载的数据量相对较大。我想使用 IIS 的 ISAPI 压缩模块来压缩服务器对我的 SOAP 调用的响应。在 iOS 上，我使用的是 wsdl2objc，效果很好。标`Accept-Encoding: gzip,deflate`头出现在来自 iOS/wsdl2objc 的调用中。IIS 正确压缩了响应，效果很好。

在 Windows Phone 上，我使用自动生成的 SOAP 包装器，并将 Web 服务添加为服务参考。这也（功能上）工作得很好。该应用程序正常运行，但生成的代码发送的标头是`Accept-Encoding: identity`. 我通过管道听说生成的代码使用了支持 gzip 内容的 WebRequests。

是否有一种可接受的方式可以`Accept-Encoding: gzip`在电话端添加标头，或者从服务器返回压缩`Content-Encoding: gzip`响应？

提前致谢！

注意：我使用的是 ASP.NET Web 服务，而不是 ASP.NET WCF 服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T06:03:30.967

事实证明，嵌入 WP7 的 SOAP 实现的底层 HTTP 请求魔术对 GZIP/DEFLATE 响应（或请求，就此而言）压缩的支持正好为 0。我将最终推出我自己的 SOAP 类生成器解决方案，它使用`WebRequest`类来完成它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-15T22:43:42.497

[http://www.sharpgis.net/post/2011/08/28/GZIP-Compressed-Web-Requests-in-WP7-Take-2.aspx](http://www.sharpgis.net/post/2011/08/28/GZIP-Compressed-Web-Requests-in-WP7-Take-2.aspx)

具有包含 GZip 支持的 WebRequest 和 WebResponse。他们的最新更新说您可以将其注册为与任何 WebRequest 一起使用，但我自己没有尝试过该部分。因此，如果代码确实使用了引擎盖下的标准 Web 请求，那么您应该很高兴。

# keyboard-shortcuts - Sublime Text 2中有关闭构建系统区域的快捷方式吗？

> ID：13043754
> 
> 赞同：0
> 
> 时间：2012-10-24T06:03:29.877
> 
> 标签：keyboard-shortcuts, sublimetext2

我熟悉在 Sublime Text 2 中运行构建系统的 CTRL+B 快捷方式，但是有摆脱它的快捷方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:20:24.823

选择构建系统后，它是转义键。我现在就原谅自己。

# mysql - MySQL GROUP BY on SELECT If 语句

> ID：13043759
> 
> 赞同：2
> 
> 时间：2012-10-24T06:04:10.833
> 
> 标签：mysql

我正在尝试加入一个具有布尔列的表，在我的结果中，我试图从连接中获取两列，一个是布尔值为 0，另一个是 1。

由于存在一对多关系，因此我需要进行 GROUP BY。

以下查询返回正确的非 GROUP BY 结果。

对于每个个人资料 ID，流派和影响力都至少有一行。

```
SELECT p.profileID, IF( gpro.isInfluence =0, g.genreName, NULL ) AS genre, IF( gpro.isInfluence =1, g.genreName, NULL ) AS influence, g.genreName
FROM profiles p
LEFT JOIN genre_profiles gpro ON gpro.profileID = p.profileID
LEFT JOIN genres g ON g.genreID = gpro.genreID
WHERE g.genreName IS NOT NULL 
```

但是，当我执行相应的 GROUP BY/GROUP_CONCAT 时，输出没有意义。

```
SELECT p.profileID, IF( gpro.isInfluence =0, GROUP_CONCAT( g.genreName ) , NULL ) AS genre, IF( gpro.isInfluence =1, GROUP_CONCAT( g.genreName ) , NULL ) AS influence, g.genreName
FROM profiles p
LEFT OUTER JOIN genre_profiles gpro ON gpro.profileID = p.profileID
LEFT OUTER JOIN genres g ON g.genreID = gpro.genreID
WHERE g.genreName IS NOT NULL 
GROUP BY p.profileID 
```

以上对任一列中的所有 g.genreName 行进行了分组，而不是根据 gpro.isInfluence 值对其进行拆分。我认为结果所属的列对应于分组的第一个结果。

```
1000001052  Latin American,Rock,Hip Hop NULL
1000001637  NULL    Electronic,Easy listening,Asian,popgun
1000001666  NULL    Electronic,Bacon,Emo,Modern folk,Hip Hop,R... 
```

我不明白的是为什么流派值被分组在一起，而不是像第一个查询那样在它们各自的列中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T06:28:29.057

```
SELECT p.profileID, GROUP_CONCAT( IF( gpro.isInfluence =0, g.genreName, NULL ) ) AS genre, GROUP_CONCAT( IF( gpro.isInfluence =1, g.genreName, NULL ) ) AS influence, g.genreName
FROM profiles p
LEFT OUTER JOIN genre_profiles gpro ON gpro.profileID = p.profileID
LEFT OUTER JOIN genres g ON g.genreID = gpro.genreID
WHERE g.genreName IS NOT NULL 
GROUP BY p.profileID 
```

将 GROUP_CONCAT 放在 IF 语句之外会给出正确的输出，这要感谢 Ertunc 帮助我的大脑在那个语句上做出了支点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-24T07:53:30.973

这是一个非常基本的语句，用于在带有子句的**Select语句中应用****IF**条件。**`GROUP BY`**

 **```
GROUP_CONCAT( IF (condition, 1, 0)) col 
```

作为 GROUP_CONCAT 返回多个`,`分隔值。使用下面的语句，我们可以避免重复值

```
GROUP_CONCAT(DISTINCT IF (condition, 1, 0)) col 
```**

# java - Maven、Git、Android 和 Maven 发布插件

> ID：13043760
> 
> 赞同：1
> 
> 时间：2012-10-24T06:04:17.633
> 
> 标签：java, android, git, maven, maven-2

将 StackOverflow 大军转向这一领域。我真的很想为我们的 Android 开发团队提供一个更好的构建过程，并转向 Maven 来帮助解决库依赖关系。

我对 Maven 完全陌生，并且真的很想了解它的强大功能，因此我可以托管 Maven 存储库以在 GitHub 上进行依赖。任何推荐的很棒的教程或阅读都会很棒。

现在我有一个测试 Android 库推送到 GitHub 和一个 Maven 存储库。我正在尝试使用 Maven 发布插件来帮助自动化快照版本控制并在 GitHub 上创建标签。当我执行 mvn release:prepare 它失败并出现错误：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-release-plugin:2.0:prepare (default-cli) on project DependencyTest: Unable to commit files
[ERROR] Provider message:
[ERROR] The git-commit command failed.
[ERROR] Command output: 
```

我在 StackOverflow 上发现了一些关于此的问题，但没有一个解决方案可以解决我的问题。我在 pom.xml 文件中正确设置了 SCM 标签。有任何想法吗？

提前感谢所有帮助 - 这对我来说是全新的，但我渴望学习！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T14:45:24.130

我遇到了同样的问题，将 maven-release-plugin 从 2.0 升级到 2.4.2 解决了它。

# linux - 通过 Linux 命令行提取 file_name.zip.001

> ID：13043766
> 
> 赞同：2
> 
> 时间：2012-10-24T06:04:38.740
> 
> 标签：linux, command-line

我正在尝试在通过 PuTTY 连接到的 Linux 主机上提取 file_name.zip.001。

你能建议我如何提取这些文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:08:45.760

您将使用解压缩控制台命令。

`man unzip`将告诉你如何。

顺便说一句 - 这与 PHP 无关。

# java - 等于 java 意外结果

> ID：13043771
> 
> 赞同：0
> 
> 时间：2012-10-24T06:05:37.867
> 
> 标签：java

我刚开始学习 Java，遇到了 equals。在寻找equals和==之间的区别之后，我决定自己练习，但我没有得到预期的结果。这是代码：

```
public class Sandbox {

/**
 * @param args
 *
 */
private int a;
public void setAtta(int value){a=value;}
public int getAtta(){return a;}

public static void main(String[] args) {
    // TODO Auto-generated method stub
    Sandbox s = new Sandbox();
    s.setAtta(10);
    Sandbox s1 = new Sandbox();
    s1.setAtta(10);

    System.out.println(s==s1);//false- EXPECTED
    System.out.println(s.equals(s1));//false- I thought it should be true?

}

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T06:09:28.760

`Object.equals`在 Java 中相当于`==`，即它测试引用相等性。由于您的`Sandbox`类（隐式）扩展`Object`，并且您没有覆盖`equals`，因此`s.equals(s1)`调用`Object.equals`.

要获得您想要的行为，请`equals`向您的类添加一个方法（覆盖）：

```
public boolean equals(Object obj) {
    if(this == obj) return true;
    if(!(obj instanceof Sandbox)) return false;
    Sandbox that = (Sandbox)obj;
    return this.a == that.a;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T06:35:15.447

```
equals() method in object class, just use == comparison behind the screen. So you got it      as false. So you need to override it and give your implementation as needed.

public boolean equals(Object o){
if(o instanceof SandBox){
    if(((SandBox)o).a==this.a){
        return true;
    }
}
return false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T06:08:33.590

这是它的工作原理：

`equals`是一个`Object`类方法，你可以`override`。

在`String`课堂上，它已经被覆盖了。

如果你想让你的代码工作，你必须定义你自己的`equals`方法代码。因为，显然，`Object`类的代码对类无效`sandbox`。

方法签名为`equals`：

```
public boolean equals(Object obj); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T06:09:27.210

`==`和之间的区别在于`equals`检查`==`引用的相等性和`equals`检查值的相等性。请告诉我，一个对象的价值是什么？这就是结果为假的原因。除非重写`equals`of`sandbox`将调用类`equals`的`Object`。您应该重写该`equals`函数以检查自定义对象之间的相等性。

# cocos2d-iphone - 如何在 cocos2d 或 cocos2d-x 中获取节点的可见矩形？

> ID：13043774
> 
> 赞同：0
> 
> 时间：2012-10-24T06:05:44.043
> 
> 标签：cocos2d-iphone, cocos2d-x

如何获得节点的可见矩形？有时我需要隐藏 50% 的精灵，如果触摸点在隐藏部分，则返回但不激活回调函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:22:26.057

没有默认函数，也许你需要创建自己的类来处理它。

您可以尝试创建一个 CCNode 的子类，其具有可变的 CCRect 作为可触摸区域，或者您可以尝试读取 Image Raw 数据并检测触摸位置像素是否透明。

# gcc - GCC 插件将代码作为文本注入当前翻译单元

> ID：13043775
> 
> 赞同：0
> 
> 时间：2012-10-24T06:05:55.543
> 
> 标签：gcc, compiler-construction

我正在创建一个 GCC 插件，它需要在预处理之前将代码作为文本注入到当前的翻译单元中。

这段代码很重要，它是从提供给插件的外部文件动态生成的。

我知道可以 build_decl 等将节点注入 AST 以在 PLUGIN_START_UNIT 上实现相同的效果，但我想在 GCC 处理它之前将代码作为文本注入更容易。

另一种方法是编写一个单独的程序，在传递给 GCC 之前将生成的代码和翻译单元合并到一个中间文件中，但这会稍微扭曲行号。

这可以通过 GCC 插件实现吗？

# java - 未找到 struts2 Web 应用程序

> ID：13043776
> 
> 赞同：1
> 
> 时间：2012-10-24T06:06:00.533
> 
> 标签：java, tomcat, struts2

我已经创建了一个 struts 2 应用程序，并通过创建一个 war 文件将其部署在 tomcat 中。文件结构没有问题，如下是部署后在tomcat下的显示方式。

```
css
META-INF
User
  pages
    login.jsp
    customer_list.jsp
WEB-INF
    classes
       struts.xml
    lib
    web.xml 
```

但是当我尝试访问该网站时，它给出了以下错误，

HTTP 状态 404 请求的资源 (/LoginApplication/User/Login) 不可用。

但是我发现当tomcat启动时它给出了以下异常。但是声称丢失的jar文件在正确的路径中。

```
Unable to load configuration. - bean - jar:file:/C:/tomcat6/webapps/LoginApplication/WEB-INF/lib/struts2-core-2.3.1.2.jar!/struts-default.xml:54:89
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:449)
    at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:69)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51)
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:275)
    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:397) 
```

下面是 struts.xml 文件，

```
<struts>

    <constant name="struts.devMode" value="true" /> 

    <package name="user" namespace="/User" extends="struts-default">
        <action name="Login">
            <result>pages/login.jsp</result>
        </action>
        <action name="Welcome" class="loginapplication.action.UserLoginAction">
            <result type="redirect" name="SUCCESS">Customers</result>
            <result name="input">pages/login.jsp</result>
        </action>
        <action name="Customers" class="loginapplication.action.ViewCustomerAction">
            <result name="SUCCESS">pages/customer_list.jsp</result>
        </action>
    </package>

</struts> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:28:25.700

该错误表明您在使用 struts.xml 文件时遇到了问题。请在此处发布。还使用 Maven 来管理依赖项。你将永远不必为文件夹而烦恼。

请验证您的库中的库和版本。

*   commons-logging-1.1.jar
*   freemarker-2.3.8.jar
*   ognl-2.6.11.jar
*   struts2-core-2.0.6.jar
*   xwork-2.0.1.jar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:07:59.140

请求的操作登录的命名空间是用户。URL 应如下所示

```
http://localhost:8080/MyApp/User/Login 
```

配置 XML

```
 <package name="User" namespace="/User" extends="struts-default">
        <action name="Login">
            <result>pages/login.jsp</result>
        </action>
    </package> 
```

注意包名和命名空间是一样的

# mysql - 在mysql数据库中有效地存储用户数据

> ID：13043781
> 
> 赞同：1
> 
> 时间：2012-10-24T06:06:35.373
> 
> 标签：mysql, database, database-design, relational-database, database-management

我正在开发一个推荐引擎，因此需要存储大量数据并跟踪用户的一举一动。所以，基本上我的网站是一个产品搜索引擎，将有一组查询作为用户数据。以下是数据集的一些示例

例子

```
User1 :
1\. Apple Ipod tOuch
2\. Samsung Galaxy Ace Plus
3\. HArry Porter 

User2 :
1\. Product1
2\. Product2 
```

等等。

一种方法（天真）可能是有一个与我的每个用户相关联的 ID，然后有一个与该 ID 对应的字符串，该字符串将采用这种形式（字符串用 分隔`~`）：-

```
Unique ID - Apple IPod TOuch~Samsung Galaxy Ace Plus~HArry Porter 
```

但是考虑到我以后将如何处理这些数据，这种方法效率不高。

任何人都可以想出一个在 mysql 中相当容易实现的非常有效的模型吗？

如果我在提出疑问时不清楚，请发表评论。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T06:12:47.207

经典设计是一张供用户使用的桌子：

```
Users(user_id,user_name,reg_date....) 
```

产品表：

```
Products(prod_id,prod_name,prod_cost....) 
```

带有映射用户->产品的表：

```
User_products(user_id,prod_id ....) 
```

例子 ：

用户：

```
user_id|user_name
1200   | User1 
7856   | User2 
```

产品 ：

```
prod_id | prod_name
12900   | Apple Ipod tOuch
45673   | Samsung Galaxy Ace Plus
99876   | HArry Porter 
34590   | Product1
56283   | Product2 
```

用户产品：

```
user_id | prod_id
1200    |12900
1200    |45673
1200    |99876
7856    |34590
7856    |56283 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T06:34:07.130

避免使用某些标识符分隔的字符串，因为您必须处理提交的数据，否则当您获得大量数据时，您的搜索引擎会非常慢。我认为 Grisha 是绝对正确的 - 用户或产品搜索（数字 id 搜索），加入映射表将比通过 text/varchar 字段搜索、分离结果等更快地输出结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T06:42:25.507

使用 Grisha 提出的规范方法，查询“谁拥有产品 1”将被表示为

```
select user.user_name
from users inner join user_products on users.user_id = user_products.user_id
inner join products on products.prod_id = user.products.prod_id
where products.prod_name = 'Product 1' 
```

这可能看起来很复杂，但实际上非常简单且非常强大。如果 user_products 表中还有购买日期等字段，还可以通过查询的简单扩展，找出这些用户购买产品 1 的时间，或者查找给定时间段内购买该产品的所有用户。

# android - Android 将应用移至 sd

> ID：13043783
> 
> 赞同：14
> 
> 时间：2012-10-24T06:06:42.797
> 
> 标签：android

其实我想知道当我们将应用程序移动到sd卡时涉及到什么样的项目？我试图搜索，但所有答案都指向“如何将应用程序移动到 sd”，但实际上我只想知道哪些项目已移动到 sd 以及剩下哪些项目。当我将应用程序移动到 sd 时，我可以看到仍有一些内存（在内部存储器中）。我只是好奇剩下的东西是什么？应用程序实际移动到哪里（在 sd 卡的哪个部分）？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-24T07:12:32.213

好问题！

让我用一个示例包来解释你说“com.example.app”

现在，当第一次安装应用程序时，将按名称创建一个新文件夹

> /data/com.example.app

这里面将包含所有应用程序的私有数据。

同样，APK 本身包含在

> /data/app/com.example.app-1.apk

现在，当我们将应用程序移动到外部存储时，会发生以下情况。

*   它**不会**被移动到 /mnt/sdcard/ 分区
*   Android 将在 /mnt/asec 分区下创建一个名为`/mnt/asec/com.example.app`. 您可以使用任何文件管理器应用程序访问此路径，因为它具有*rw*权限
*   它将创建 libs 目录的副本（如果有）并将所有文件和数据库移至此处。
*   它还会将 APK 从“/data/app/com.example.app-1.apk”复制到`/mnt/asec/com.example.app/com.example.app-1.apk`

这样，`/data`分区空间将被节省下来，并且可以被其他应用程序重复使用。当手机/数据存储空间不足时，这是一个很好的技巧，可以将应用程序移动到外部存储。

# android - Android地图自动完成文本视图

> ID：13043786
> 
> 赞同：2
> 
> 时间：2012-10-24T06:06:57.430
> 
> 标签：android, map, autocompletetextview

我想在我的 android 应用程序中设置**autoCompleteTextView**，当我在**autoCompleteTextView**中输入字符时，它会显示所有位置，例如 Google map 。如何在我的应用程序中添加这种类型的**autoCompleteTextView**。我目前正在使用此代码：

```
 ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_dropdown_item_1line, COUNTRIES);
    AutoCompleteTextView textView = (AutoCompleteTextView)
            findViewById(R.id.autoCompleteTextView);
    textView.setAdapter(adapter);
    .
    .

    private static final String[] COUNTRIES = new String[] {
     "Belgium", "France", "Italy", "Germany", "Spain"
 }; 
```

但是是显示字符串数组中的位置。

请给我一个解决方案..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-13T10:07:12.713

```
 autoCompleteTextView=findViewById(R.id.autoCompleteTextViewID);
employeeNames  = new ArrayList<String>();

// getdata & store in dataList

dataAdapter = new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_spinner_item, employeeNames );
dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
autoCompleteTextView.setThreshold(1);
autoCompleteTextView.setAdapter(dataAdapter);

autoCompleteTextView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

        String selectedStr  = parent.getItemAtPosition(position).toString();

    }
}); 
```

# android - 如何识别在android中发送了哪些消息？

> ID：13043792
> 
> 赞同：2
> 
> 时间：2012-10-24T06:07:48.287
> 
> 标签：android, email, timer, sms, android-contentprovider

如有错误请见谅！我正在android中开发一个应用程序，我可以在内容解析器的帮助下从手机访问未读消息并自动在电子邮件上发送这些消息。我正在为此使用**TimerTask** ，它在我设置的特定时间**重复我的应用程序。**现在它再次提取我在电子邮件中发送的那些消息。现在的问题是**如何识别我**在android中发送的消息？任何帮助将不胜感激。谢谢和问候， Deepanker Chaudhary

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:21:41.953

有几个解决方案：

1.  将通过电子邮件成功转发的最后一条 SMS 的时间戳/ID 存储在一个[`SharedPreferences`](http://developer.android.com/reference/android/content/SharedPreferences.html)值中。
2.  在应用程序内部维护一个数据库，并将所有转发到电子邮件的消息及其发送状态存储在此数据库中，以便在发送电子邮件出错时重新发送消息。您可能必须对这个数据库进行内务处理，以偶尔清除过去的条目。

# gps - 从 GPS TEC rinex 文件中删除标题和重复时间信息

> ID：13043793
> 
> 赞同：1
> 
> 时间：2012-10-24T06:07:56.123
> 
> 标签：gps, matlab, gps-time

我有一个 rinex 文件，并显示在这里..显示 rinex 文件第一部分的图像

[http://imageshack.us/photo/my-images/593/65961409.jpg](http://imageshack.us/photo/my-images/593/65961409.jpg)

数据（AOPR Rinex 文件）在输入一年零后从网站下载。

[http://www.naic.edu/aisr/GPSTEC/gpstec.html](http://www.naic.edu/aisr/GPSTEC/gpstec.html)

我想在 matlab 中将此文件作为矩阵打开以进行进一步处理。在第 42 行标题结束后，时间信息位于第 43 行。然后数据开始。但是在某些行说 64 行之后，时间信息又出现了，应该丢弃。标题也应该被丢弃。最后一列作为第二行位于第一列下方，应转移到最后一列。总共有 55700 行。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:49:20.107

我怀疑出现在下面一行的最后一列只是文本阅读器窗口大小的伪影......

对于其余部分，我认为这里有一个试错循环：

```
fid = fopen('test.txt','r');
C = {};
while ~feof(fid)
    % read lines with dictated format.
    D = textscan(fid, '%d %d %d %d');

    % this will fail on headerlines, empty lines, etc.
    if isempty(D{1})
        % in those cases, advance the file pointer by one line
        fgetl(fid);
    else
        % if that's not the case, save the lines thus read 
        C = [C;D]; %#ok
    end
end
fclose(fid);

% Post-process: concatenate all sub-arrays into one
C = arrayfun(@(ii) cat(1, C{:,ii}), 1:size(C,2), 'UniformOutput', false); 
```

这至少适用于我的`test.txt`：

```
header 
random 
garbage
1 2 3 4
4 5 6 7
4 6 7 8
more random garbage
2 5 6 7
5 6 7 8
8 6 3 7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:36:36.523

> 我怀疑出现在它下面一行的最后一列只是文本阅读器的窗口有多大的人工制品......
> 
> 其余的，我认为这里有一个试错循环

**亲爱的罗迪**，我没有任何 matlab 背景，只是一个初学者。它实际上是一个 Rinex 文件。具有 2780 个时期和 6 个具有 30 个卫星值的可观测值。在 matlab 中对其进行解码非常困难。那就是问题所在。您可以在以下位置阅读示例代码

**http://web.ics.purdue.edu/~tdauterm/EAS591/Lab7/read_rinexo.m**

但问题是 observables 有 6 个，而 m 文件中只有 5 个，而且顺序也不正确。我需要**C1 P2 L1 L2 S1 S2** ...但链接上的代码给出了**L1 L2 C1 P1 P2**。:(你能纠正一下吗..那将是一个很大的帮助..

# node.js - Node.js、Expressjs、Mongo、Jade：`new` 动作传递初始化的 mongo 实例导致 'ReferenceError：jade 未定义'

> ID：13043795
> 
> 赞同：0
> 
> 时间：2012-10-24T06:08:13.297
> 
> 标签：node.js, express, mongoose, pug

来源：[github](https://github.com/davidglivar/simplecompviewer)

在尝试通过 expressjs 的`render`函数传递一个新实例化的 mongoose.model 时，我遇到了以下错误：“ReferenceError：jade is not defined”

控制器...

```
var mongoose = require("mongoose")
  , Client = mongoose.model("Client")

exports.new = function (req, res) {
    res.render("clients/new", {
        headline: "New Client",
        client: new Client({})
    })
} 
```

我也尝试过`client: new Client()`，将实例化的对象存储在 var 中，然后将其传递给最终的渲染对象而不做任何更改。删除该`new Client({})`位可以解决 500 错误，但不能解决手头的问题。

一些配置...

```
app.set("views", __dirname + "/app/views")
app.set("view engine", "jade") 
```

该模型...

```
var mongoose = require("mongoose")
  , Schema = mongoose.Schema

var Client = new Schema({
    company: { type: String },
    contact: {
        name: { type: String },
        phone: { type: String },
        email: { type: String }
    },
    created: { type: Date, default: Date.now }
})

mongoose.model("Client", Client) 
```

节点 v0.8.12
Express >= v3.0.0
Mongoose v3.3.1
Jade v0.27.6

来源：[github](https://github.com/davidglivar/simplecompviewer)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T10:29:56.890

这个问题显然是由jade模板引擎中的关键字冲突引起的。

我发现您的问题描述很有趣，可以自己尝试一下。在将翡翠模板变量标识符更改`client`为`myclient`并传递一个新的猫鼬`Client`模型实例后，一切正常：

在 app/controllers/clients_controller 中：

```
...
res.render("clients/new", {
    headline: "New Client",
    myclient: new Client({company: 'Foo Company'})
})
... 
```

在视图/客户/新：

```
...
input(type='text',name='company',placeholder='Company',value='#{myclient.company}')
... 
```

我分叉了您的存储库，提交了这些更改并向您发送了一个拉取请求（首先是因为我对 git 比较陌生，并抓住一切机会学习更多基础知识）。

# c# - 停止 ModalPopup Extender 以弹出

> ID：13043797
> 
> 赞同：2
> 
> 时间：2012-10-24T06:08:15.777
> 
> 标签：c#, javascript, .net, ajax, ajaxcontroltoolkit

我有一个模式弹出扩展器，它会在单击按钮时触发......现在无论 onclientclick 函数返回值 true/false 它总是弹出。我需要停止模态以在返回 false 和模态以触发返回 true 时触发..如何做到这一点？

请在下面找到代码：

```
<div style="text-align:center;" runat="server" id="pnlButton">          
    <asp:Button  CssClass="button" ID="btnBack" runat="server" Text="Back" 
        Width="120px" onclick="btnBack_Click" UseSubmitBehavior="false" />
    &nbsp;
    <asp:Button  CssClass="button" ID="btnCancel" runat="server" 
            Text="Cancel Request" Width="130px" onclick="btnCancel_Click" onClientClick="Validate();" />
</div>
<div style="text-align:center;">
<asp:Button  CssClass="button" ID="btnDone" Visible="false" runat="server" 
        Text="Done" Width="110px" onclick="btnDone_Click"   />
</div>

<ajaxToolkit:ConfirmButtonExtender ID="cbe" runat="server"
TargetControlID="btnCancel"
DisplayModalPopupID="ModalPopupExtender1"
ConfirmText="Are you sure you want to click this?" />
<ajaxToolkit:ModalPopupExtender ID="ModalPopupExtender1" runat="server" TargetControlID="btnCancel"
PopupControlID="PNL" OkControlID="ButtonOk" CancelControlID="ButtonCancel" BackgroundCssClass="modalBackground" />
<asp:Panel ID="PNL" runat="server" Style="display: none; width: 400px; background-color: White;
    border-width: 2px; border-color: Black; border-style: solid; padding: 20px;">
    <h2>Are you sure you want to cancel this request?</h2>
    <br />
    <br />
    <div style="text-align: right;">
        <asp:Button ID="ButtonOk" runat="server" Text="Yes" CssClass="button" />&nbsp;&nbsp;
        <asp:Button ID="ButtonCancel" runat="server" Text="No" CssClass="button" />
    </div>
</asp:Panel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:19:18.773

将您的代码更改为以下

```
 onClientClick="return Validate();" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T06:43:15.803

您可以从 javascript 打开 Popup

```
function ValidateAndOpen(){
if(Validate()){
var modalDialog = $find("ModalPopupExtender1"); 
// get reference to modal popup using the AJAX api $find() function    
  if (modalDialog != null) {
    modalDialog.show();
  }    
 }
return false;
} 
```

您必须在 ModalPopupExtender 上设置 ClientIDMode="Static" 并设置 OnClientClick="return ValidateAndOpen();"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T07:03:25.650

将此脚本放到您的表单中：

```
 function pageLoad(sender, args) {
      if (args.get_isPartialLoad() === false) {
           $find("<%= ModalPopupExtender1.ClientID %>").add_showing(function (sender, args) { args.set_cancel(Validate()); });
      }
 } 
```

# javascript - 处理多个 youtube 视频

> ID：13043799
> 
> 赞同：4
> 
> 时间：2012-10-24T06:08:37.273
> 
> 标签：javascript, youtube-api

当用户单击链接页面时，我想停止三个 youtube 视频。这是我的代码

```
var tag = document.createElement('script');
    tag.src = "//www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    var youtubePlayer1;
    var youtubePlayer2;
    var youtubePlayer3;
    function onYouTubeIframeAPIReady() {
        youtubePlayer1 = new YT.Player('firstPlayer', {

        });
        youtubePlayer2 = new YT.Player('secondPlayer', {

        });
        youtubePlayer3 = new YT.Player('thirdPlayer', {

        });
    }

    function stopVideo() {
        if (youtubePlayer1 != null) {
            youtubePlayer1.stopVideo();
        }
        if (youtubePlayer2 != null) {
            youtubePlayer2.stopVideo();
        }
        if (youtubePlayer3 != null) {
            youtubePlayer3.stopVideo();
        }
    } 
```

这是html代码

```
<div id="blog">
                                    <!--///////////// UN ORDERED LIST /////////////-->
                                    <ul>
                                        <!--///////////// LIST /////////////-->
                                        <li>
                                            <!-- iframe -->
                                            <h3>
                                                <strong>להקת קולות - בהרקדה חסידית...</strong></h3>
                                            <br />
                                            <iframe id="firstPlayer" width="800" height="485" src="http://www.youtube.com/embed/F0eR1KFkt58"
                                                style="border:0" ></iframe>
                                            <br />
                                            <br />
                                            <img src="images/bg3.PNG" alt="" /><p>
                                                <span>תאור הוידאו: </span>טקסט אודות הוידאו, תאריך</p>
                                        </li>
                                        <!--///////////// SECOND IMAGE /////////////-->
                                        <li>
                                            <!-- iframe -->
                                            <h3>
                                                <strong>להקת קולות - בהרקדה ישראלית מוטרפת...</strong></h3>
                                            <br />
                                            <iframe id="secondPlayer" width="800" height="485" src="http://www.youtube.com/embed/mPTX4guU1W8"
                                                style="border:0" ></iframe>
                                            <br />
                                            <br />
                                            <img src="images/bg3.PNG" alt="" /><p>
                                                <span>תאור הוידאו: </span>טקסט אודות הוידאו, תאריך</p>
                                        </li>
                                        <!--///////////// THIRD IMAGE /////////////-->
                                        <li>
                                            <!-- iframe -->
                                            <h3>
                                                <strong>להקת קולות - בואי בשלום...</strong></h3>
                                            <br />
                                            <iframe id="thirdPlayer" width="800" height="485" src="http://www.youtube.com/embed/E-_ONZOcScU"
                                                style="border:0"></iframe>
                                            <br />
                                            <br />
                                            <img src="images/bg3.PNG" alt="" /><p>
                                                <span>תאור הוידאו: </span>טקסט אודות הוידאו, תאריך</p>
                                        </li>
                                    </ul>
                                </div> 
```

当用户点击链接时，它会调用 stopVideo 函数，循环遍历所有播放器并停止它们。

出于某种原因，我只能让它在 youtubePlayer2 对象上工作我在这里做错了什么？

忘了提一下，当我使用 chrome 调试器调试应用程序时，我可以看到对象已定义并且函数已被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T18:46:30.410

我认为以这种方式有效：

[http://jsfiddle.net/ZLMF8/3/](http://jsfiddle.net/ZLMF8/3/)

```
<!DOCTYPE HTML>
<html>
<head>
<script type="text/javascript" 

src="https://ajax.googleapis.com/ajax/libs/swfobject/2/swfobject.js"></script></head>

<body>

<div id="ytplayer1">
<p>You will need Flash 8 or better to view this content.</p>

</div>

<div id="ytplayer2">
<p>You will need Flash 8 or better to view this content.</p>

</div>

<div id="ytplayer3">
<p>You will need Flash 8 or better to view this content.</p>

</div>

<script type="text/javascript">

var params = { allowScriptAccess: "always" };

swfobject.embedSWF("http://www.youtube.com/v/F0eR1KFkt58&enablejsapi=1&playerapiid=ytplayer1", "ytplayer1", "425", "365", "8", null, null, params);

swfobject.embedSWF("http://www.youtube.com/v/mPTX4guU1W8&enablejsapi=1&playerapiid=ytplayer2", "ytplayer2", "425", "365", "8", null, null, params);

swfobject.embedSWF("http://www.youtube.com/v/E-_ONZOcScU&enablejsapi=1&playerapiid=ytplayer3", "ytplayer3", "425", "365", "8", null, null, params);

function stop() {

  if (ytplayer1) {

    ytplayer1.stopVideo();

  }
  if (ytplayer2) {

    ytplayer2.stopVideo();

  }
  if (ytplayer3) {

    ytplayer3.stopVideo();

  }

}​

</script>

<a href="javascript:void(0);" onclick="stop();">Stop</a>

</body>

</html>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T15:34:57.627

此代码示例应该可以正常工作，并且在我的测试中它可以正常工作。尝试确保将脚本标记添加到页面底部。这将有助于确保在您调用 iframe 时加载它们。还可以试试[http://www.youtube.com/html5](http://www.youtube.com/html5)看看是否有更可靠的体验。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T23:11:46.707

如果您的代码在无法找到 youtubeplayer 时运行，我认为不需要 if 语句，但我曾经通过添加确保某些事情发生的 else 语句解决了类似的问题 - 这可以解释为什么以上只是偶尔发生。

它只需要一点点复制和粘贴。

```
function stopVideo() {
    if (youtubePlayer1 != null) {
        youtubePlayer1.stopVideo();
    }
    else {
    youtubePlayer1.stopVideo(); 
    }
    if (youtubePlayer2 != null) {
        youtubePlayer2.stopVideo();
    }
    else {
    youtubePlayer2.stopVideo(); 
    }
    if (youtubePlayer3 != null) {
        youtubePlayer3.stopVideo();
    }
    else {
    youtubePlayer3.stopVideo(); 
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T05:19:21.607

试试这个，效果很好。

*`http://`中缺少*注释*`src`，因为**stackoverflow**在使用 src 发布时显示错误。所以纠正它并测试。*

 *```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
tag.src = "//www.youtube.com/iframe_api"; 
```

**完整的工作代码**

```
<!DOCTYPE HTML>
<html>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<body>
<div id="firstPlayer"></div>
<div id="secondPlayer"></div>
<div id="thirdPlayer"></div>
<script>
var tag = document.createElement('script');
tag.src = "//www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

var youtubePlayer1;
var youtubePlayer2;
var youtubePlayer3;

function onYouTubeIframeAPIReady() {
        youtubePlayer1 = new YT.Player('firstPlayer',{
            height: '240',
            width: '320',
            videoId: 'F0eR1KFkt58',
            events: {
                'onReady': onPlayerReady1
            }
        });
        youtubePlayer2 = new YT.Player('secondPlayer', {
            height: '240',
            width: '320',
            videoId: 'mPTX4guU1W8',
            events: {
                'onReady': onPlayerReady2
            }
        });
        youtubePlayer3 = new YT.Player('thirdPlayer', {
            height: '240',
            width: '320',
            videoId: 'E-_ONZOcScU',
            events: {
                'onReady': onPlayerReady3
            }
        });
    }
function onPlayerReady1(event) {
        event.target.playVideo();
        $('a').click(function(e) { 
            youtubePlayer1.stopVideo();
            e.preventDefault();
        });
    }
function onPlayerReady2(event) {
        event.target.playVideo();
        $('a').click(function(e) { 
            youtubePlayer2.stopVideo();
            e.preventDefault();
        });
    }
function onPlayerReady3(event) {
        event.target.playVideo();
        $('a').click(function(e) { 
            youtubePlayer3.stopVideo();
            e.preventDefault();
        });
    }
</script>
    <a>Stop</a>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-09T04:23:27.897

Mohamed Navas 的回答（第一个回答）帮助我想出了这个：

```
<br>
    <button id="pause">Pause</button>
<br>
<br>

<div id="firstPlayer"></div>
<div id="secondPlayer"></div>
<div id="thirdPlayer"></div>

<script>
var tag = document.createElement('script');
tag.src = "//www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

var youtubePlayer1;
var youtubePlayer2;
var youtubePlayer3;

function onYouTubeIframeAPIReady() {
        youtubePlayer1 = new YT.Player('firstPlayer',{
            height: '240',
            width: '320',
            videoId: 'qV9HxRU4ozY',
            events: {
                'onReady': onPlayerReady
            }
        });
        youtubePlayer2 = new YT.Player('secondPlayer', {
            height: '240',
            width: '320',
            videoId: 'nBRpWJ0QUH0',
            events: {
                'onReady': onPlayerReady
            }
        });
        youtubePlayer3 = new YT.Player('thirdPlayer', {
            height: '240',
            width: '320',
            videoId: 'E-_ONZOcScU',
            events: {
                'onReady': onPlayerReady
            }
        });
    }

    function onPlayerReady(event) {
        document.getElementById('pause').onclick = function() {
            youtubePlayer1.pauseVideo();
            youtubePlayer2.pauseVideo();
            youtubePlayer3.pauseVideo();
            e.preventDefault();
        };
    };

</script> 
```

[https://jsfiddle.net/tonhaoln/ancz2vkn/](https://jsfiddle.net/tonhaoln/ancz2vkn/)*

# iphone - 如何从滚动视图传递触摸以查看

> ID：13043810
> 
> 赞同：0
> 
> 时间：2012-10-24T06:09:33.143
> 
> 标签：iphone, touch, scrollview, swipe, hittest

![在此处输入图像描述](../Images/3085d53c478a5bb0297818ba03953482.png)

我在 x = 0.0、x = 320.0 和 x = 640.0 的滚动视图上放置了 3 个表格视图。当用户水平滑动表格视图（因为它们在顶部）时，我想将滑动事件传递给它的超级视图，并且当用户垂直滑动表格视图时，表格视图必须垂直滚动。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:11:42.400

要从 传递触摸`UIScrollView`，请将此代码用作类别：

```
@implementation UIScrollView (FixedApi)

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [[event allTouches] anyObject];

    NSLog(@"touch view = %@", [[touch view].class description]);
    if ([[[touch view].class description] isEqualToString:@"UITableViewCellContentView"]) {
        //To pass the touch to UITableViewCell
    } else if ([[[touch view].class description] isEqualToString:@"UITableView"] && isHorizntalSCroll == true && pageNumber == 2) {
        //To pass the touch to UITableView

    } else if ([[[touch view].class description] isEqualToString:@"UIView"]) {
        //To pass the touch to UIView
    } else {
    [self.superview touchesBegan:touches withEvent:event]; // or 1 nextResponder, depends
    [super touchesBegan:touches withEvent:event];
    }
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    if ( !self.dragging ) [self.nextResponder.nextResponder touchesEnded:touches withEvent:event];
    [super touchesEnded:touches withEvent:event];
}

@end 
```

要确定垂直/水平滚动，您可以使用以下代码：

.h 文件`<UIScrollViewDelegate>`

```
BOOL pageControlIsChangingPage;
CGPoint startPos;
int     scrollDirection;
int CX; //The width of the pages.
BOOL isHorizntalSCroll;
int pageNumber; 
```

.m 文件

```
#pragma mark -
#pragma mark UIScrollViewDelegate stuff
- (void)scrollViewDidScroll:(UIScrollView *)_scrollView {
    if (scrollDirection==0){//we need to determine direction
        //use the difference between positions to determine the direction.
        if (abs(startPos.x-scrollView.contentOffset.x)<abs(startPos.y-scrollView.contentOffset.y)){          
            NSLog(@"Vertical Scrolling");
            scrollDirection=1;
            isHorizntalSCroll = false;
            [scrollView setPagingEnabled:NO];
        } else {
            NSLog(@"Horitonzal Scrolling");
            scrollDirection=2;
            isHorizntalSCroll = ture;
            [scrollView setPagingEnabled:YES];
        }
    }

    if (scrollDirection==1) {
        [scrollView setContentOffset:CGPointMake(startPos.x,scrollView.contentOffset.y) animated:NO];
    } else if (scrollDirection==2){
        [scrollView setContentOffset:CGPointMake(scrollView.contentOffset.x,startPos.y) animated:NO];
    }
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)_scrollView {
    if (pageControlIsChangingPage) {
        return;
    }

    CGFloat pageWidth = _scrollView.frame.size.width;
    int page = floor((_scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
    pageControl.currentPage = page;
    pageNumber = page;
    NSLog(@"page number = %d",page);
    if (page == 3 || page == 0) {
        [scrollView setContentSize:CGSizeMake(CX, personalInfo.frame.size.height + 100)];
    } else {
        [scrollView setContentSize:CGSizeMake(CX, [scrollView bounds].size.height)];
    }

    pageControlIsChangingPage = NO;
}

#pragma mark -
#pragma mark PageControl stuff
- (IBAction)changePage:(id)sender {
    /*
     *  Change the scroll view
     */
    CGRect frame = scrollView.frame;
    frame.origin.x = frame.size.width * pageControl.currentPage;
    frame.origin.y = 0;

    [scrollView scrollRectToVisible:frame animated:YES];

    /*
     *  When the animated scrolling finishings, scrollViewDidEndDecelerating will turn this off
     */
    pageControlIsChangingPage = YES;
}

- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollViews{
    startPos = scrollView.contentOffset;
    scrollDirection=0;
}

- (void)scrollViewDidEndDragging:(UIScrollView *)scrollViews willDecelerate:(BOOL)decelerate {
    if (decelerate) {
        scrollDirection=3;
    }
} 
```

就是这样，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:03:40.487

通过 IB 或代码禁用每个 tableview 的水平`contentsize`滚动并将基本滚动视图的设置为 960，`heightOfTableview`你应该没问题......这应该让你继续。

# nhibernate - Getting duplicate results in query

> ID：13043812
> 
> 赞同：1
> 
> 时间：2012-10-24T06:10:02.580
> 
> 标签：nhibernate, fluent-nhibernate

I have Three tables A, B, and C. A is a parent table with mutiple child records in B and C.

When I query into A I am getting too many records, as though FNH is doing a Cartesian product.

My query is of the form:

```
var list = session.Query<A>()
  .Fetch(a=> a.Bs)
  .Fetch(a=> a.Cs) 
```

Where Bs is the IList property of A, and Cs is the IList property of A.

I should get only as many Bs as relate to A, and only as many Cs relate to A. Instead I get BxC elements of each.

Is there a better way to load these? I am pretty sure I avoided this exact issue in the past, but don't see it in my old example code.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:11:14.380

You could use a Transformer to get a distinct result:

```
var list = session.Query<A>()
  .Fetch(a=> a.Bs)
  .Fetch(a=> a.Cs)
  .SetResultTransformer( Transformers.DistinctRootEntity ) 
```

This is NH3.2 syntax, for 2.1 you need to use new DistinctRootEntityTransformer() (I think) as parameter to SetResultTransformer instead.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T11:21:39.690

I'm not sure if this is a NH bug or a mapping issue, however the query could be optimised to

```
session.Query<A>()
    .Fetch(a=> a.Bs)
    .ToFuture();

var results = session.Query<A>()
    .Fetch(a=> a.Cs)
    .ToFuture()
    .ToList(); 
```

# algorithm - 证明 3-Way Quicksort Big-O Bound

> ID：13043813
> 
> 赞同：1
> 
> 时间：2012-10-24T06:10:18.787
> 
> 标签：algorithm, runtime, big-o, quicksort

对于 3 路快速排序（双轴快速排序），我将如何找到 Big-O 界限？谁能告诉我如何推导它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T06:37:22.137

嗯，同样的证明实际上成立。

每次迭代将数组拆分为 3 个子列表，这些子列表的大小平均为`n/3`每个。
因此 - 需要的迭代次数是`log_3(n)`因为你需要找到你做的次数，`(((n/3) /3) /3) ...`直到你达到一个。这为您提供了公式：

```
n/(3^i) = 1 
```

哪个是满意的`i = log_3(n)`。

每次迭代仍在遍历所有输入（但在不同的子列表中） - 与快速排序相同，它为您提供`O(n*log_3(n))`.

由于`log_3(n) = log(n)/log(3) = log(n) * CONSTANT`，您会发现运行时间是`O(nlogn)`平均的。

请注意，即使您采用更悲观的方法来计算子列表的大小，通过最小化均匀分布 - 它仍然会为您提供大小为 1/4 的第一个子列表、大小为 1/2 的第二个子列表和最后一个子列表大小 1/4（均匀分布的最小值和最大值），这将再次衰减到`log_k(n)`迭代（具有不同的 k>2） - 这将`O(nlogn)`再次产生整体。

* * *

**形式上**，证明将类似于： 对于每个，对于某些常量 c_1，N_1，
每次迭代最多需要运行操作。（大 O 表示法的定义，以及每次迭代不包括递归的说法。说服自己为什么这是真的。请注意，在这里 - “迭代”是指算法在某个“级别”中完成的所有迭代，而不是在单个递归调用）。`c_1* n``n>N_1``O(n)`

如上所示，您有`log_3(n) = log(n)/log(3)` 平均情况下的迭代（此处采用乐观版本，可以使用相同的悲观原则）

现在，我们得到算法的运行时间`T(n)`为：

```
for each n > N_1:
T(n) <= c_1 * n * log(n)/log(3) 
T(n) <= c_1 * nlogn 
```

根据[大 O 符号的定义](http://en.wikipedia.org/wiki/Big_O_notation#Formal_definition)，它意味着`T(n)`is in `O(nlogn)`with `M = c_1`and `N = N_1`。
**量子点**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T08:15:28.893

**找到**算法的复杂性和**证明**它之间存在细微差别。

要**找到**这个算法的复杂性，你可以按照阿米特在另一个答案中所说的那样做：你知道，*平均而言*，你将你的大小问题`n`分成三个更小的大小问题`n/3`，所以你会得到，在 è log_3(n)`平均步骤，解决大小为 1 的问题。有了经验，您将开始感受这种方法，并能够通过考虑所涉及的子问题来推断算法的复杂性。

为了**证明**该算法在`O(nlogn)`平均情况下运行，您使用[Master Theorem](http://en.wikipedia.org/wiki/Master_theorem)。要使用它，您必须编写递归公式，给出排序数组所花费的时间。正如我们所说，对一个大小数组进行`n`排序可以分解为对三个大小数组进行排序`n/3`加上构建它们所花费的时间。这可以写成如下：

```
T(n) = 3T(n/3) + f(n) 
```

哪里`T(n)`是一个函数，它给出了一个大小输入的分辨率“时间” `n`（实际上是所需的基本操作的数量），并`f(n)`给出了将问题分解为子问题所需的“时间”。

对于 3-Way 快速排序，`f(n) = c*n`因为您遍历数组，所以检查每个项目的放置位置并最终进行交换。这将我们置于[主定理的](http://en.wikipedia.org/wiki/Master_theorem#Case_2)[**案例 2**](http://en.wikipedia.org/wiki/Master_theorem#Case_2)中，它指出如果`f(n) = O(n^(log_b(a)) log^k(n))`对于某些`k >= 0`（在我们的案例中`k = 0`）那么

```
T(n) = O(n^(log_b(a)) log^(k+1)(n))) 
```

由于`a = 3`和`b = 3`（我们从递归关系中得到这些`T(n) = aT(n/b)`），这简化为

```
T(n) = O(n log n) 
```

这就是一个**证明**。

# html - HTML5 视频和部分范围的 HTTP 请求

> ID：13043816
> 
> 赞同：16
> 
> 时间：2012-10-24T06:11:22.993
> 
> 标签：html, http, video

我正在尝试修改自定义 Web 服务器应用程序以使用 HTML5 视频。

它提供一个带有基本`<video>`标签的 HTML5 页面，然后它需要处理对实际内容的请求。

到目前为止，我可以让它工作的唯一方法是将整个视频文件加载到内存中，然后以单个响应将其发送回。这不是一个实用的选择。我想一块一块地提供它：发回，比如说，100 kb，然后等待浏览器请求更多。

我看到一个带有以下标头的请求：

```
http_version = 1.1
request_method = GET

Host = ###.###.###.###:##
User-Agent = Mozilla/5.0 (Windows NT 6.1; WOW64; rv:16.0) Gecko/20100101 Firefox/16.0
Accept = video/webm,video/ogg,video/*;q=0.9,application/ogg;q=0.7,audio/*;q=0.6,*/*;q=0.5
Accept-Language = en-US,en;q=0.5
Connection = keep-alive
Range = bytes=0- 
```

我试图发回部分内容响应：

```
HTTP/1.1 206 Partial content
Content-Type: video/mp4
Content-Range: bytes 0-99999 / 232725251
Content-Length: 100000 
```

我又收到了几个 GET 请求，如下

```
Cache-Control = no-cache
Connection = Keep-Alive
Pragma = getIfoFileURI.dlna.org
Accept = */*
User-Agent = NSPlayer/12.00.7601.17514 WMFSDK/12.00.7601.17514
GetContentFeatures.DLNA.ORG = 1
Host = ###.###.###.###:## 
```

（没有迹象表明浏览器需要文件的任何特定部分。）无论我向浏览器发送什么，视频都不会播放。

如上所述，如果我尝试在同一个 HTTP 数据包中一次发送整个 230 MB 文件，则相同的视频将正确播放。

有没有办法通过部分内容请求让这一切正常工作？我使用 Firefox 进行测试，但它最终需要与所有浏览器一起使用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-24T10:00:24.803

我知道这是一个老问题，但如果它对您有帮助，您可以尝试我们在代码库中使用的以下“模型”。

```
class Model_DownloadableFile {
private $full_path;

function __construct($full_path) {
    $this->full_path = $full_path;
}

public function get_full_path() {
    return $this->full_path;
}

// Function borrowed from (been cleaned up and modified slightly): http://stackoverflow.com/questions/157318/resumable-downloads-when-using-php-to-send-the-file/4451376#4451376
// Allows for resuming paused downloads etc
public function download_file_in_browser() {
    // Avoid sending unexpected errors to the client - we should be serving a file,
    // we don't want to corrupt the data we send
    @error_reporting(0);

    // Make sure the files exists, otherwise we are wasting our time
    if (!file_exists($this->full_path)) {
        header('HTTP/1.1 404 Not Found');
        exit;
    }

    // Get the 'Range' header if one was sent
    if (isset($_SERVER['HTTP_RANGE'])) {
        $range = $_SERVER['HTTP_RANGE']; // IIS/Some Apache versions
    } else if ($apache = apache_request_headers()) { // Try Apache again
        $headers = array();
        foreach ($apache as $header => $val) {
            $headers[strtolower($header)] = $val;
        }
        if (isset($headers['range'])) {
            $range = $headers['range'];
        } else {
            $range = false; // We can't get the header/there isn't one set
        }
    } else {
        $range = false; // We can't get the header/there isn't one set
    }

    // Get the data range requested (if any)
    $filesize = filesize($this->full_path);
    $length = $filesize;
    if ($range) {
        $partial = true;
        list($param, $range) = explode('=', $range);
        if (strtolower(trim($param)) != 'bytes') { // Bad request - range unit is not 'bytes'
            header("HTTP/1.1 400 Invalid Request");
            exit;
        }
        $range = explode(',', $range);
        $range = explode('-', $range[0]); // We only deal with the first requested range
        if (count($range) != 2) { // Bad request - 'bytes' parameter is not valid
            header("HTTP/1.1 400 Invalid Request");
            exit;
        }
        if ($range[0] === '') { // First number missing, return last $range[1] bytes
            $end = $filesize - 1;
            $start = $end - intval($range[0]);
        } else if ($range[1] === '') { // Second number missing, return from byte $range[0] to end
            $start = intval($range[0]);
            $end = $filesize - 1;
        } else { // Both numbers present, return specific range
            $start = intval($range[0]);
            $end = intval($range[1]);
            if ($end >= $filesize || (!$start && (!$end || $end == ($filesize - 1)))) {
                $partial = false;
            } // Invalid range/whole file specified, return whole file
        }
        $length = $end - $start + 1;
    } else {
        $partial = false; // No range requested
    }

    // Determine the content type
    $finfo = finfo_open(FILEINFO_MIME_TYPE);
    $contenttype = finfo_file($finfo, $this->full_path);
    finfo_close($finfo);

    // Send standard headers
    header("Content-Type: $contenttype");
    header("Content-Length: $length");
    header('Content-Disposition: attachment; filename="' . basename($this->full_path) . '"');
    header('Accept-Ranges: bytes');

    // if requested, send extra headers and part of file...
    if ($partial) {
        header('HTTP/1.1 206 Partial Content');
        header("Content-Range: bytes $start-$end/$filesize");
        if (!$fp = fopen($this->full_path, 'r')) { // Error out if we can't read the file
            header("HTTP/1.1 500 Internal Server Error");
            exit;
        }
        if ($start) {
            fseek($fp, $start);
        }
        while ($length) { // Read in blocks of 8KB so we don't chew up memory on the server
            $read = ($length > 8192) ? 8192 : $length;
            $length -= $read;
            print(fread($fp, $read));
        }
        fclose($fp);
    } else {
        readfile($this->full_path); // ...otherwise just send the whole file
    }

    // Exit here to avoid accidentally sending extra content on the end of the file
    exit;
}
} 
```

然后你像这样使用它：

```
(new Model_DownloadableFile('FULL/PATH/TO/FILE'))->download_file_in_browser(); 
```

它将处理发送部分文件或完整文件等，并且在这种情况和许多其他情况下对我们来说效果很好。希望能帮助到你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-16T09:53:18.890

> 我想要部分范围请求，因为我将进行实时转码，我无法将文件完全转码并根据要求提供。

对于您还不知道完整正文内容的响应（您无法猜测`Content-Length`, 实时编码），请使用块编码：

```
HTTP/1.1 200 OK
Content-Type: video/mp4
Transfer-Encoding: chunked
Trailer: Expires

1E; 1st chunk
...binary....data...chunk1..my
24; 2nd chunk
video..binary....data....chunk2..con
22; 3rd chunk
tent...binary....data....chunk3..a
2A; 4th chunk
nd...binary......data......chunk4...etc...
0
Expires: Wed, 21 Oct 2015 07:28:00 GMT 
```

每个块在可用时发送：当编码的帧很少或输出缓冲区已满时，会生成 100kB 等。

```
22; 3rd chunk
tent...binary....data....chunk3..a 
```

其中`22`以十六进制（0x22 = 34 字节）给出块字节长度， `; 3rd chunk`是额外的块信息（可选）并且`tent...binary....data....chunk3..a`是块的内容。

然后，当编码完成并发送所有块时，结束：

```
0
Expires: Wed, 21 Oct 2015 07:28:00 GMT 
```

where`0`意味着没有更多的块，然后是在标头中定义的零个或多个尾部（允许的标头字段）（`Trailer: Expires`并且`Expires: Wed, 21 Oct 2015 07:28:00 GMT`不是必需的）以提供校验和或数字签名等。

如果文件已经生成（没有实时编码），则相当于服务器的响应：

```
HTTP/1.1 200 OK
Content-Type: video/mp4
Content-Length: 142
Expires: Wed, 21 Oct 2015 07:28:00 GMT

...binary....data...chunk1..myvideo..binary....data....chunk2..content...binary....data....chunk3..and...binary......data......chunk4...etc... 
```

更多信息：[块传输编码 — 维基百科](https://en.wikipedia.org/wiki/Chunked_transfer_encoding)，[预告片 - HTTP | MDN](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Trailer)

# r - 在 R 中模仿来自 Stata 的制表命令

> ID：13043817
> 
> 赞同：11
> 
> 时间：2012-10-24T05:28:23.927
> 
> 标签：r, stata

我试图在**R**中获得一个类似于来自 Stata 的 2 路表。我试图`CrossTable`从`gmodels`包中使用，但表不一样。您知道如何在**R**中完成此操作吗？

我希望至少能从

当 cursmoke1 == "Yes" & cursmoke2 == "No" 并反转

在**R**中，我只能从 yes、no 和 NA 中得到总数。

这是输出：

斯塔塔

```
. tabulate cursmoke1 cursmoke2, cell column miss row

+-------------------+
| Key               |
|-------------------|
|     frequency     |
|  row percentage   |
| column percentage |
|  cell percentage  |
+-------------------+

   Current |
   smoker, |      Current smoker, exam 2
    exam 1 |        No        Yes          . |     Total
-----------+---------------------------------+----------
        No |     1,898        131        224 |     2,253 
           |     84.24       5.81       9.94 |    100.00 
           |     86.16       7.59      44.44 |     50.81 
           |     42.81       2.95       5.05 |     50.81 
-----------+---------------------------------+----------
       Yes |       305      1,596        280 |     2,181 
           |     13.98      73.18      12.84 |    100.00 
           |     13.84      92.41      55.56 |     49.19 
           |      6.88      35.99       6.31 |     49.19 
-----------+---------------------------------+----------
     Total |     2,203      1,727        504 |     4,434 
           |     49.68      38.95      11.37 |    100.00 
           |    100.00     100.00     100.00 |    100.00 
           |     49.68      38.95      11.37 |    100.00 
```

R

```
> CrossTable(cursmoke2, cursmoke1, missing.include = T, format="SAS")

   Cell Contents
|-------------------------|
|                       N |
| Chi-square contribution |
|           N / Row Total |
|           N / Col Total |
|         N / Table Total |
|-------------------------|

Total Observations in Table:  4434 

             | cursmoke1 
   cursmoke2 |        No |       Yes |        NA | Row Total | 
-------------|-----------|-----------|-----------|-----------|
          No |      2203 |         0 |         0 |      2203 | 
             |  1122.544 |   858.047 |   250.409 |           | 
             |     1.000 |     0.000 |     0.000 |     0.497 | 
             |     1.000 |     0.000 |     0.000 |           | 
             |     0.497 |     0.000 |     0.000 |           | 
-------------|-----------|-----------|-----------|-----------|
         Yes |         0 |      1727 |         0 |      1727 | 
             |   858.047 |  1652.650 |   196.303 |           | 
             |     0.000 |     1.000 |     0.000 |     0.389 | 
             |     0.000 |     1.000 |     0.000 |           | 
             |     0.000 |     0.389 |     0.000 |           | 
-------------|-----------|-----------|-----------|-----------|
          NA |         0 |         0 |       504 |       504 | 
             |   250.409 |   196.303 |  3483.288 |           | 
             |     0.000 |     0.000 |     1.000 |     0.114 | 
             |     0.000 |     0.000 |     1.000 |           | 
             |     0.000 |     0.000 |     0.114 |           | 
-------------|-----------|-----------|-----------|-----------|
Column Total |      2203 |      1727 |       504 |      4434 | 
             |     0.497 |     0.389 |     0.114 |           | 
-------------|-----------|-----------|-----------|-----------| 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T09:32:24.760

也许我在这里遗漏了一些东西。的默认设置`CrossTable`似乎基本上提供了您正在寻找的内容。

这是`CrossTable`最小的论点。（我已将数据集加载为“temp”。）请注意，结果与您从 Stata 输出中发布的结果相同（如果您希望结果为*百分比*，则只需乘以 100 ）。

```
library(gmodels)
with(temp, CrossTable(cursmoke1, cursmoke2, missing.include=TRUE))

   Cell Contents
|-------------------------|
|                       N |
| Chi-square contribution |
|           N / Row Total |
|           N / Col Total |
|         N / Table Total |
|-------------------------|

Total Observations in Table:  4434 

             | cursmoke2 
   cursmoke1 |        No |       Yes |        NA | Row Total | 
-------------|-----------|-----------|-----------|-----------|
          No |      1898 |       131 |       224 |      2253 | 
             |   541.582 |   635.078 |     4.022 |           | 
             |     0.842 |     0.058 |     0.099 |     0.508 | 
             |     0.862 |     0.076 |     0.444 |           | 
             |     0.428 |     0.030 |     0.051 |           | 
-------------|-----------|-----------|-----------|-----------|
         Yes |       305 |      1596 |       280 |      2181 | 
             |   559.461 |   656.043 |     4.154 |           | 
             |     0.140 |     0.732 |     0.128 |     0.492 | 
             |     0.138 |     0.924 |     0.556 |           | 
             |     0.069 |     0.360 |     0.063 |           | 
-------------|-----------|-----------|-----------|-----------|
Column Total |      2203 |      1727 |       504 |      4434 | 
             |     0.497 |     0.389 |     0.114 |           | 
-------------|-----------|-----------|-----------|-----------| 
```

或者，`format="SPSS"`如果您希望将数字显示为百分比，则可以使用。

```
with(temp, CrossTable(cursmoke1, cursmoke2, missing.include=TRUE, format="SPSS"))

   Cell Contents
|-------------------------|
|                   Count |
| Chi-square contribution |
|             Row Percent |
|          Column Percent |
|           Total Percent |
|-------------------------|

Total Observations in Table:  4434 

             | cursmoke2 
   cursmoke1 |       No  |      Yes  |       NA  | Row Total | 
-------------|-----------|-----------|-----------|-----------|
          No |     1898  |      131  |      224  |     2253  | 
             |  541.582  |  635.078  |    4.022  |           | 
             |   84.243% |    5.814% |    9.942% |   50.812% | 
             |   86.155% |    7.585% |   44.444% |           | 
             |   42.806% |    2.954% |    5.052% |           | 
-------------|-----------|-----------|-----------|-----------|
         Yes |      305  |     1596  |      280  |     2181  | 
             |  559.461  |  656.043  |    4.154  |           | 
             |   13.984% |   73.177% |   12.838% |   49.188% | 
             |   13.845% |   92.415% |   55.556% |           | 
             |    6.879% |   35.995% |    6.315% |           | 
-------------|-----------|-----------|-----------|-----------|
Column Total |     2203  |     1727  |      504  |     4434  | 
             |   49.684% |   38.949% |   11.367% |           | 
-------------|-----------|-----------|-----------|-----------| 
```

## 更新：`prop.table()`

仅供参考（为了节省您在制作自己的作品时所做的繁琐工作`data.frame`），您可能也对该`prop.table()`功能感兴趣。

同样，使用您链接到的数据并假设它被命名为“temp”，以下内容为您提供了基础数据，您可以从中构建您的`data.frame`. 您可能也有兴趣研究函数`margin.table()`或`addmargins()`：

```
## Your basic table
CurSmoke <- with(temp, table(cursmoke1, cursmoke2, useNA = "ifany"))
CurSmoke
#          cursmoke2
# cursmoke1   No  Yes <NA>
#       No  1898  131  224
#       Yes  305 1596  280

## Row proportions
prop.table(CurSmoke, 1) # * 100 # If you so desire
#          cursmoke2
# cursmoke1         No        Yes       <NA>
#       No  0.84243231 0.05814470 0.09942299
#       Yes 0.13984411 0.73177442 0.12838148

## Column proportions
prop.table(CurSmoke, 2) # * 100 # If you so desire
#          cursmoke2
# cursmoke1         No        Yes       <NA>
#       No  0.86155243 0.07585408 0.44444444
#       Yes 0.13844757 0.92414592 0.55555556

## Cell proportions
prop.table(CurSmoke)    # * 100 # If you so desire
#          cursmoke2
# cursmoke1         No        Yes       <NA>
#       No  0.42805593 0.02954443 0.05051872
#       Yes 0.06878665 0.35994587 0.06314840 
```

# jquery - 使用 jquery 的动画页面转换 [重新访问]

> ID：13043819
> 
> 赞同：1
> 
> 时间：2012-10-24T06:11:27.507
> 
> 标签：jquery, jquery-animate, show-hide

好的，所以我一直在查看有关页面转换的其他帖子。但我还没有找到任何特别适合我需要的东西。所以我得到了 3 个菜单项。关于、服务和联系方式。

![在此处输入图像描述](../Images/18c40eea45f24f6f116b66aadb12c7b1.png)

我需要有 3 个内容 div（可以有一个 class="content"），它们最初会被隐藏。单击任何菜单项将为内容 div 设置动画并将其垂直和水平居中放置在页面上的视图中。

![在此处输入图像描述](../Images/f3dc2ba8221d7d4b793c0ef74f58ff96.png)

如果当前有任何 div 可见。单击任何菜单项将隐藏该菜单项并为新菜单项设置动画。

请注意，jquery 还需要检查可见内容的高度（因为每个 div 可能包含更多或更少的文本）并将 div 水平和垂直居中，就像我猜想的模态灯箱所做的那样。我希望视觉指南描述我需要什么。我如何用 jquery 做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T15:40:04.087

查看[API](http://api.jquery.com/animate/)。[_ `.animate()`](http://api.jquery.com/animate/)这是一个例子：

```
$(div).show().animate({
    "margin-top": "-16em"
}, {
    "duration": 500,
    "easing": "swing",
    "complete": function () {},
    "step": function (now, fx) {},
    "queue": false,
    "specialEasing": {}
}); 
```

和一个小提琴：http: [//jsfiddle.net/93HjV/](http://jsfiddle.net/93HjV/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T06:36:13.497

Jqtouch 可能是满足您需求的有用工具。它主要是为移动浏览器设计的，但由于它适用于桌面浏览器，所以它可能很有用。www.jqtouch.com

看看这个例子：（向上滑动）[http://www.jqtouch.com/preview/demos/main/#animations](http://www.jqtouch.com/preview/demos/main/#animations)

但是，要使内容垂直居中，您可能需要编写一些 css 代码（不确定）。

# ruby-on-rails - 使用 Kaminari 时验证页码

> ID：13043825
> 
> 赞同：3
> 
> 时间：2012-10-24T06:11:47.943
> 
> 标签：ruby-on-rails, pagination, rails-routing, kaminari

我正在使用 Kaminari 来处理分页。我最近发现很多虚假请求都在请求无效的页码，例如`/post/page/undefined`. 由于我使用的是 Solr，错误的页码被传入其中并导致 500 错误。

我希望能够在将页码传递给控制器​​之前对其进行验证。所以无效的页码反而会导致路由错误。

我问了 Kaminari 的创建者，[他给出了一个临时解决方案](https://github.com/amatsuda/kaminari/issues/295#issuecomment-9139568)。但是我想知道是否有更清洁的方法可以做到这一点。我也不想在每个可分页资源中都包含这个逻辑，因为那根本不是 DRY。

我的路线示例：

```
resources :transactions do
  get 'page/:page', :action => :index, :on => :collection
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T07:57:53.300

我认为一个好的解决方案是简单地删除或更正任何无效或无意义的页面参数并重定向到更正后的 URL，如下所示：

```
# This goes in your relevant controller(s)
before_filter :correct_page_parameters!

# This goes in your application controller
def correct_page_parameters!
  supplied_parameters = params[:page]
  if supplied_parameters        
    proper_parameters = supplied_parameters.to_i

    if proper_parameters < 2
      params.delete(:page)
      redirect_to params
    elsif supplied_parameters != proper_parameters.to_s
      redirect_to params.merge(:only_path => true, :page => proper_parameters)
    end
  end
end 
```

希望这有帮助，祝你好运！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-30T20:12:19.060

正如 amatsuda 在您提供的链接中所建议的那样，使用约束。

参考这个[问题](https://stackoverflow.com/questions/8904029/how-to-detect-an-integer-in-rails-3-routes)（类似于你的）......

我建议采用更多的 RESTful 路由，由

```
resources :posts # or :transactions 
```

然后对`/post/page/blah`404 的请求（应该如此），而`GET`对请求的`/posts`行为将按照您的应用程序中的定义进行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-15T21:18:55.323

您可以在这样的路线中验证页面：

```
resources :transactions do
  get 'page/:page', :action => :index, :on => :collection, :page => /\d/
end 
```

# c# - 我可以将继承与扩展方法一起使用吗？

> ID：13043827
> 
> 赞同：11
> 
> 时间：2012-10-24T06:12:08.613
> 
> 标签：c#

我有以下内容：

```
public static class CityStatusExt
{
    public static string D2(this CityStatus key)
    {
        return ((int) key).ToString("D2");
    }

public static class CityTypeExt
{
    public static string D2(this CityType key)
    {
        return ((int) key).ToString("D2");
    } 
```

加上其他具有类似扩展名的类，它们返回格式为“D2”的键

有没有一种方法可以从基类继承并让基类提供功能，所以我不必重复相同的扩展方法代码吗？

**更新。**很抱歉我没有提到这一点，但我的类如 CityType 是枚举。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T06:15:07.450

您可以使该方法通用。C# 将推断类型：

```
public static class Extension 
{ 
    public static string D2<T> (this T key) 
    { 
        return ((int)(object) key).ToString("D2"); 
    } 
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T06:18:00.183

从下面的评论中，`CityType`并且`CityStatus`是枚举。因此，您可以这样做：

```
public static class Extensions
{
    public static string D2(this Enum key)
    {
        return Convert.ToInt32(key).ToString("D2");
    }
} 
```

* * *

原答案：

您可以使用通用方法和接口`ID2Able`：

```
public static class Extensions
{ 
    public static string D2<T>(this T key) where T : ID2Able
    { 
        return ((int) key).ToString("D2"); 
    } 
} 
```

这样扩展方法就不会出现在所有类型中；它仅适用于您继承的东西`ID2Able`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T06:30:31.727

您的枚举*已经*全部继承自一个公共基类，即`System.Enum`. 所以你可以这样做（枚举不接受“D2”作为格式字符串，但它们接受“D”，所以我添加了对 PadLeft 的调用）：

```
public static class EnumExtensions
{
    public static string D2(this Enum e)
    {
        return e.ToString("D").PadLeft(2, '0');
    }
} 
```

# asp.net-mvc-3 - 基于条件的必需验证

> ID：13043830
> 
> 赞同：0
> 
> 时间：2012-10-24T06:12:23.523
> 
> 标签：asp.net-mvc-3, validation, unobtrusive-validation

```
 public string InsuredName
              {
                  get;
                  set;
              }
  public string Card_No
          {
              get { return this.card_No; }
              set { this.card_No = value; }
          } 
```

在这里我有两个属性， `CardNo`只有一些需要`InsuredNames`。当用户键入 InsuredName 然后我想去数据库并检查它是否有 Card_No 验证如果是，那么我想根据需要验证它，否则，我尝试了远程验证但是它不工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:22:38.473

```
private string insuredName;
  private bool cardNoRequiresValidation;
  public string InsuredName
              {
                  get {return insuredName;}
                  set { cardNoRequiresValidation = DoesCardNoRequiresValidation(Value); insuredName = value;}
              }
  public string Card_No
          {
              get { return this.card_No; }
              set { cardNoRequiresValidation ? ValidateCardNo(value) : card_No =  value; }
          }
  private bool DoesCardNoRequiresValidation(string insuredName)
  { //if requires validation 
    // return true;
    //else 
    //return false;
  }
  private void ValidateCardNo(string cardNo)
  {
    //execute validation logic
  } 
```

# java - 使用java的带有xml rpc的简单文件读取程序

> ID：13043832
> 
> 赞同：1
> 
> 时间：2012-10-24T06:12:30.563
> 
> 标签：java, apache, xml-rpc

我是Java的初学者。目前我需要在 Java 中使用远程过程调用（RPC）来读取驻留在服务器中的巨大文件。我下载了 apache 的 xml rpc 包。任何人都可以用 xml rpc 包的 java 中简单的客户端服务器程序来说明我吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:26:02.253

我刚刚在 Google 上找到了这个[http://tldp.org/HOWTO/XML-RPC-HOWTO/xmlrpc-howto-java.html 。](http://tldp.org/HOWTO/XML-RPC-HOWTO/xmlrpc-howto-java.html)可能对你有些帮助。

# java - 如何从通过片段实例化的类中调用方法？

> ID：13043836
> 
> 赞同：0
> 
> 时间：2012-10-24T06:13:11.683
> 
> 标签：java, android

我想调用在类中声明的方法，但包含该方法的类由片段实例化：

```
 protected void setupViewPager() {

    List<Fragment> fragments = new Vector<Fragment>();

    fragments.add(Fragment.instantiate(this, AFTab1.class.getName()));
    fragments.add(Fragment.instantiate(this, AFTab2.class.getName()));
    fragments.add(Fragment.instantiate(this, AFTab3.class.getName()));

    this.mPagerAdapter  = new PagerAdapter(super.getSupportFragmentManager(), fragments);
    this.mViewPager = (ViewPager)super.findViewById(R.id.viewpager);
    this.mViewPager.setAdapter(this.mPagerAdapter);
    this.mViewPager.setOnPageChangeListener(this);
} 
```

例如，如果我想调用 AFTab1 的方法，我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:27:09.090

有几个选项供您选择。您可以存储对返回的片段的引用`instantiate()`，可以给片段一个 id，还可以给它一个标签（我敢打赌还有更多选择）。在您的情况下，我将存储这样的参考：

```
protected void setupViewPager() {

    List<Fragment> fragments = new Vector<Fragment>();

    AFTab1 tab1 = (AFTab1) Fragment.instantiate(this, AFTab1.class.getName());
    AFTab2 tab2 = (AFTab2) Fragment.instantiate(this, AFTab2.class.getName());
    AFTab3 tab3 = (AFTab3) Fragment.instantiate(this, AFTab3.class.getName());

    fragments.add(tab1);
    fragments.add(tab2);
    fragments.add(tab3);

    tab1.aMethod();

    ... 
```

您当然可以存储参考以供以后使用，但要小心泄漏。

**更新：**请注意，您也可以通过多种方式创建片段，例如使用其构造函数。您不必使用`instantiate()`.

# html-table - 带有固定标题的可滚动表格

> ID：13043837
> 
> 赞同：1
> 
> 时间：2012-10-24T06:13:31.123
> 
> 标签：html-table, scrollable

我为此在 PHP/HTML/CSS 中搜索了一些解决方案，但到目前为止没有任何效果，可能是因为在大多数这些示例中代码太多所以我迷失了。有人可以向我解释我需要做什么或在这里放一些简单的示例代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-08-19T18:28:30.060

# 使用 CSS 固定表头

最简单的是`position: sticky;`你的`th`元素：

```
.tableFix { /* Scrollable parent element */
  position: relative;
  overflow: auto;
  height: 100px;
}

.tableFix table{
  width: 100%;
  border-collapse: collapse;
}

.tableFix th,
.tableFix td{
  padding: 8px;
  text-align: left;
}

.tableFix thead th {
  position: sticky;  /* Edge, Chrome, FF */
  top: 0px;
  background: #fff;  /* Some background is needed */
}
```

```
<div class="tableFix">

  <table>
    <thead>
      <tr><th>H1</th><th>Header 2</th><th>Header 3</th><th>4</th><th>5th Header</th></tr>
    </thead>
    <tbody>
      <tr><td>R1C2</td><td>R1C2</td><td>R1C3</td><td>R1C4</td><td>R1C5</td></tr>
      <tr><td>R2C1</td><td>R2C2</td><td>R2C3</td><td>R2C4</td><td>R2C5</td></tr>
      <tr><td>R3C1</td><td>R3C2</td><td>R3C3</td><td>R3C4</td><td>R3C5</td></tr>
      <tr><td>R4C1</td><td>R4C2</td><td>R4C3</td><td>R4C4</td><td>R4C5</td></tr>
      <tr><td>R5C1</td><td>R5C2</td><td>R5C3</td><td>R5C4</td><td>R5C5</td></tr>
      <tr><td>R6C1</td><td>R6C2</td><td>R6C3</td><td>R6C4</td><td>R6C5</td></tr>
    </tbody>
  </table>

</div>
```

# 旧浏览器的表格固定标题

如果**您需要支持的浏览器**不包含该位置的值，您可以**[使用一些 Javascript 来](https://stackoverflow.com/a/47923622/383904)**`sticky`查看Fix table head

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T05:19:57.860

此代码（取自您评论中的链接）是您需要的基本代码。下次你需要弄清楚这种事情时，只需删除代码段以查看哪些内容会中断，并删除所有不会破坏你需要的东西的内容。

```
<html>
<head>
<style>
div.tableContainer {
    clear: both;
    border: 1px solid #963;
    height: 285px; /* html>body tbody.scrollContent height plus 23px for the header */
    overflow: auto;
    width: 756px /* Remember to leave 16px for the scrollbar! */
}

html>body tbody.scrollContent {
    display: block;
    height: 262px;
    overflow: auto;
    width: 100%
}

html>body thead.fixedHeader tr {
    display: block
}

html>body thead.fixedHeader th { /* TH 1 */
    width: 200px
}

html>body thead.fixedHeader th + th { /* TH 2 */
    width: 240px
}

html>body thead.fixedHeader th + th + th { /* TH 3 +16px for scrollbar */
    width: 316px
}

html>body tbody.scrollContent td { /* TD 1 */
    width: 200px
}

html>body thead.scrollContent td + td { /* TD 2 */
    width: 240px
}

html>body thead.scrollContent td + td + td { /* TD 3 +16px for scrollbar */
    width: 316px
}
</style>
</head>
<body>

<div id="tableContainer" class="tableContainer">
<table width="100%" cellspacing="0" cellpadding="0" border="0" class="scrollTable">
    <thead class="fixedHeader">
        <tr class="alternateRow">
            <th><a href="#">Header 1</a></th>
            <th><a href="#">Header 2</a></th>
            <th><a href="#">Header 3</a></th>
        </tr>
    </thead>
    <tbody class="scrollContent">
        <tr class="normalRow">
            <td>Cell Content 1</td>
            <td>Cell Content 2</td>
            <td>Cell Content 3</td>
        </tr>
        <tr class="alternateRow">
            <td>More Cell Content 1</td>
            <td>More Cell Content 2</td>
            <td>More Cell Content 3</td>
        </tr>
        .........
    </tbody>
</table>
</div>
</body>
</html> 
```

# jquery - 颜色框的透明背景

> ID：13043841
> 
> 赞同：2
> 
> 时间：2012-10-24T06:14:12.887
> 
> 标签：jquery, colorbox

我想在颜色框模式之外有透明背景。当前使用此颜色框演示[http://www.jacklmoore.com/colorbox/example4/](http://www.jacklmoore.com/colorbox/example4/)中的 css 样式。基于这个答案[https://stackoverflow.com/a/2760970/233933](https://stackoverflow.com/a/2760970/233933)，我可以做透明背景：

```
$(".inline").colorbox({inline:true, width:"30%",
    onOpen: function() {
        // make the overlay visible and re-add all it's original properties!
        $('#cboxOverlay').css({
            'visibility': 'visible', 
            'opacity':0.5, 
            'cursor': 'pointer'
        });
        $('#colorbox').css({ 'visibility': 'visible' }).fadeIn(1000);
    }
}); 
```

但我希望我的所有颜色框模式都具有透明样式。我尝试编辑 colorbox.css 文件以包括：

```
#cboxOverlay{ visibility: visible; opacity: 0.5 }
#colorbox{ visibility: visible } 
```

但这并没有改变任何事情。你的建议？

**更新**

更新了措辞，因此很明显我希望模态之外的内容是透明的。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T06:18:16.593

尝试：

```
#cboxOverlay{ visibility: visible; opacity: 0.5 !important;} 
```

有应用于覆盖的内联样式当前会覆盖您的不透明度设置。

更详细的解释：有一个内联样式属性附加到`#cboxOverlay`表示`opacity:0.9`. 这会覆盖您的样式表。如果您将`!important`规则放在旁边，则不会将其推到有利于内联样式的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T06:18:25.140

对于透明背景（在颜色框内），您应该设置： `#cboxContent { background: transparent; }`

# java - 用 Java 将日志写入 SSD 的最快方法是什么？

> ID：13043849
> 
> 赞同：2
> 
> 时间：2012-10-24T06:15:32.163
> 
> 标签：java, performance, solid-state-drive, ext4

我有一些小事务，我需要将它们同步到 java 程序中的 SSD 上的文件系统（ext4）。

如果我需要在每次事务后与文件系统同步，将这些事务顺序写入文件的最快方法是什么？每个事务的数据非常小，但如果这会增加事务/秒，则可以写入更多（例如填充一页）。

数据写入一次后，只能读取。

此外，是否对文件系统进行了任何调整以提高性能？是否有更适合该任务的稳定文件系统？

**更新：**这似乎是一个文件系统问题。使用同步时，Ext4 比 Ext3 慢得多？建议？ **更新**问题的解决方案是预分配文件（在 java _file.setLength(size) 中）。这将导致在 ext4 上预先分配空间并且将所有元数据写入一次。在此之后，写入文件将只编辑用户数据，元数据保持不变。在我的情况下，这导致了 10 倍的加速。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T07:59:25.843

使用[Journal.IO](https://github.com/sbtourist/Journal.IO)怎么样？

> Journal.IO 是一种零依赖、快速且易于使用的日志存储实现，基于仅附加的轮转日志和校验和可变长度记录，支持并发读写、动态批处理、可调持久性和数据压缩。

# magento - 向 Magento 添加新的参考块

> ID：13043859
> 
> 赞同：6
> 
> 时间：2012-10-24T06:16:37.507
> 
> 标签：magento, magento-1.7

我在让自定义参考块在 Magento 中工作时遇到了一些麻烦。

这些是我采取的步骤：

**第1步**

在 page.xml 中创建了一个新的“参考”块

```
<block type="core/text_list" name="newreference" as="newreference"></block> 
```

**第2步**

在我希望它出现在页面中的位置添加了对此块的引用（在 1column.phtml、2columns-left.phtml、2columns-right.phtml、3columns.phtml 中的页脚上方）

```
<?php $this->getChildHtml('newreference'); ?> 
```

**第 3 步**

添加了对 catalog.xml 的引用，它告诉 Magento 我想在类别页面的“newreference”引用块中输出模板部分（specialfooter.phtml）

```
<reference name="newreference">
     <block type="core/template" name="specialfooter" template="page/html/specialfooter.phtml"></block>
</reference> 
```

**第4步**

在 page/html/ 目录中创建了“specialfooter.phtml”，并带有一个简单的段落块进行测试。

什么也没有发生。

我采取的步骤符合我对参考块如何工作的理解，但我可能是错的。我正在努力寻找任何文件，官方或其他文件，或任何以前的 SO 问题，这些问题对这个主题有任何启发。

我正在使用 Magento 版本。1.7.0.2。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T08:14:34.040

你没有忘记一个`echo`吗？：

```
<?php echo $this->getChildHtml('newreference'); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-18T08:20:59.447

我遇到了同样的问题，这似乎对我有用。

layout/page.xml 中的这个块

```
 <block type="page/html/new_newreference" name="newreference" as="newreference" template="page/html/new/newreference.phtml"/> 
```

可以在页面中引用，*例如。模板/页面文件夹中的1column.phtml*使用：

```
 <?php echo $this->getChildHtml('newreference') ?> 
```

**注意“类型”命名和“模板”路径以及“名称”和“as”与 getChildHtml() 之间的相关性。**

对产品页面使用相同的原则。layout/catalog.xml 中的这个块

```
 <block type="catalog/product_new" name="catalogreference" as="catalogreference" template="catalog/product/new/catalogreference.html"/> 
```

可以在 template/catalog/product/view.phtml 中使用：

```
 <?php echo $this->getChildHtml('catalogreference'); ?> 
```

**请注意，这两个示例都是特定于文件夹的**

如果您希望块与小部件一起使用。将此块添加到适当的参考块中，例如相关 xml 文件中的*“内容”或“头” ，**例如。page.xml 或 catalog.xml*：

```
 <block type="core/text_list" name="mywidgetblock" as="mywidgetblock">
       <label>My widget Block</label>
    </block> 
```

*注意：我不理解“类型”声明，但它有效吗？*

在管理面板 CMS/Widget/Widget 实例中*，新的或现有的*布局更新/块参考从下拉列表中找到“我的小部件块”。

我是 Magento 的新手，需要大量的试验和错误才能解决这个问题，所以我希望它对处于相同情况的人有所帮助。

# android - ShareActionProvider 不起作用

> ID：13043862
> 
> 赞同：0
> 
> 时间：2012-10-24T06:17:33.560
> 
> 标签：android

我使用与 ShareActionProvider 一起使用的 menuitem 创建了一个菜单

它运作良好。但是如果 menuitem 没有显示为一个动作，当 menuitem 被点击时，它什么也不做。

所以我这样写

```
onOptionItemSelected(...){
    if(item.getitemid()==r.id.mi_share){
          item.getactionprovider.onperformaction();
    }
} 
```

我认为它会工作。但它什么也没做。我发现 ShareActionProvider 中的 onPerformAction 方法什么也没做，只是返回 false；

所以我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:53:30.997

我发现了错误。

actionProvider 必须用 menu.xml 编写，但必须用代码编写。

# javascript - jQuery 输入复选框检查冲突

> ID：13043863
> 
> 赞同：0
> 
> 时间：2012-10-24T06:17:44.053
> 
> 标签：javascript, jquery, checkbox, calculator

我在表格中选中的复选框发生了一些非常奇怪的事情。我在表格中构建了一个发票计算器，你可以[在这里](http://jsfiddle.net/Manna/CSkLu/)看到它，我的目的是一旦我自动检查输入（Iva 或 Irpef），它们就不会在总金额中计算。正如您在我链接的示例中看到的那样，如果您选中*Irpef Input 复选框*，它运行良好，Irpef 不在总金额中计算。问题是我的输入复选框 IVA 不会发生同样的情况，为什么？代码完全相同。

当我试图让它们单独工作时，很好，两者都工作得很好，所以看起来他们不能一起工作，可能是？发生了什么？在这个问题上我需要你的帮助。

谢谢

这里是与问题相关的代码：

```
function tally(selector) {
    var total = 0;
    $('p.editable_number').each(function() {
        total += parseInt($(this).text()) || 0;
        $('#subtotal').html(total);
        if($("#iva").is(':checked')){
            $('#subtotal').html((total).toFixed(2));
            $('#total').html((total*0.00).toFixed(2));
            $('#total1').html((total*0.15).toFixed(2));
            $('#total2').html((total*0.85).toFixed(2));
        }
        else {
            $('#subtotal').html((total).toFixed(2));
            $('#total').html((total*0.21).toFixed(2));
            $('#total1').html((total*0.15).toFixed(2));
            $('#total2').html((total*1.06).toFixed(2));
        }
         if($("#irpef").is(':checked')){
            $('#subtotal').html((total).toFixed(2));
            $('#total').html((total*0.21).toFixed(2));
            $('#total1').html((total*0.00).toFixed(2));
            $('#total2').html((total*1.21).toFixed(2));
        }
        else {
            $('#subtotal').html((total).toFixed(2))
            $('#total').html((total*0.21).toFixed(2));
            $('#total1').html((total*0.15).toFixed(2));
            $('#total2').html((total*1.06).toFixed(2));
        }
        })
        }

$('#irpef').change(function() {
             tally('p#subtotal');
             tally('p#total');
             }); 
$('#iva').change(function() {
             tally('p#subtotal');
             tally('p#total');
             }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:55:08.657

试试这个，现在应该可以了。我认为你试图做一个 else if 并做几次而不是一次（每个函数）。[刷新](http://jsfiddle.net/CSkLu/10/) 我添加了变量来跟踪总计/小计和增值税/irpf。 `each()`遍历所有 p.editable_number 元素，因此您多次执行相同的代码，每次覆盖以前的结果时，您都会得到正确的结果，因为它是结束循环。现在您只需获取一次值，然后计算相关的小计、增值税、irpf 和总值（基于是否检查增值税或 irpf 的条件）。

# java - Java Swing：drawLine非常慢

> ID：13043865
> 
> 赞同：3
> 
> 时间：2012-10-24T06:17:54.707
> 
> 标签：java, swing, graphics, fullscreen, doublebuffered

我正在使用 swing 编写一个 Java 应用程序，我需要在其中绘制一个正方形上方的网格。为此，我使用了类`drawLine(...)`提供的方法`Graphics`。

一切正常，只是绘制每条线需要花费大量时间（50 条线超过 20 秒......）。我什至可以看到实时绘制的线条。一件奇怪的事情是水平线的绘制速度比垂直线快（几乎立即）。

我可能做错了什么。这是网格的代码。

```
public void drawGrid(Graphics g){
    g.setColor(new Color(255, 255, 255, 20));
    int width = getWidth();
    int height = (int) (width * Utils.PLATE_RATIO);
    int step = pixelSize*gridSpacing;
    Color bright = new Color(255, 255, 255, 100);
    Color transparent = new Color(255, 255, 255, 20);
    for(int ix = insets.left + step;                        
            ix < width; ix += step){
        if(((ix - insets.left) / step) % 10 == 0){
            g.setColor(bright);
        }
        else{
            g.setColor(transparent);
        }
        g.drawLine(ix, insets.top, ix, height+insets.top);
    }
    for(int iy = insets.top+step;
            iy < (insets.top + height); iy += step){
        if(((iy - insets.top) / step) % 10 == 0){
            g.setColor(bright);
        }
        else{
            g.setColor(transparent);
        }
        g.drawLine(insets.left, iy, width + insets.left, iy);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T09:32:49.093

您发布的代码很好，没有问题。
这是使用您的方法的组件的工作示例（有点简化）：

```
public static class MyGrid extends JComponent
{
    private int step = 10;

    public MyGrid ()
    {
        super ();
    }

    public Dimension getPreferredSize ()
    {
        return new Dimension ( 500, 500 );
    }

    protected void paintComponent ( Graphics g )
    {
        super.paintComponent ( g );
        drawGrid ( g );
    }

    public void drawGrid ( Graphics g )
    {
        int width = getWidth ();
        int height = getHeight ();
        Color bright = new Color ( 255, 255, 255, 200 );
        Color transparent = new Color ( 255, 255, 255, 100 );

        for ( int ix = step; ix < width; ix += step )
        {
            if ( ( ix / step ) % 10 == 0 )
            {
                g.setColor ( bright );
            }
            else
            {
                g.setColor ( transparent );
            }
            g.drawLine ( ix, 0, ix, height );
        }

        for ( int iy = step; iy < height; iy += step )
        {
            if ( ( iy / step ) % 10 == 0 )
            {
                g.setColor ( bright );
            }
            else
            {
                g.setColor ( transparent );
            }
            g.drawLine ( 0, iy, width, iy );
        }
    }
} 
```

我想那段代码之外有一些问题。

PS有点题外话，但是...

我建议您计算绘画区域的可见部分（使用 JComponent 的`getVisibleRect ()`方法或 Graphics`g.getClip ().getBounds ()`方法）并将您的绘画限制在该区域。

如果组件真的很大（例如组件的区域为 10000x10000 像素），那么这个小的优化可以加速组件的绘制。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-25T01:33:15.350

这是我使用双缓冲解决问题的方法，正如@sureshKumar 所建议的那样。我只是在屏幕外的图像上绘图，并`drawImage()`在绘图结束时调用。这似乎可以解决问题。

**编辑：**这似乎只有当您想`drawGrid()`从方法外部调用您的绘画方法（在我的情况下）时才有用`paintComponent(...)`。

这是代码：

```
private Graphics bufferGraphics;
private Image offScreen;
private Dimension dim;
//other attributes not shown...

public CentralPanel(){
    //Some initialization... (not shown)

    //I added this listener so that the size of my rectangle
    //and of my grid changes with the frame size
    this.addComponentListener(new ComponentListener() {

        @Override
        public void componentResized(ComponentEvent e) {
            dim = getVisibleRect().getSize();
            offScreen = createImage(dim.width, dim.height);
            bufferGraphics = offScreen.getGraphics();
            repaint();
            revalidate();
        }
        //other methods of ComponentListener not shown
    });
}

@Override
protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    g.drawImage(offScreen, 0, 0, null);
}

public void drawGrid(){
    int width = dim.width - insets.left - insets.right;
    width -= (width % plateSize.getXSize());
    int height = (int) (width*Utils.PLATE_RATIO);
    height -= (height % plateSize.getYSize());
    int step = pixelSize*gridSpacing;
    Color bright = new Color(255, 255, 255, 100);
    Color transparent = new Color(255, 255, 255, 20);
    for(int ix = insets.left + step;                        
            ix < (width+insets.left); ix += step){
        if(((ix - insets.left) / step) % 10 == 0){
            bufferGraphics.setColor(bright);
        }
        else{
            bufferGraphics.setColor(transparent);
        }
        //I am now drawing on bufferGraphics instead 
        //of the component Graphics
        bufferGraphics.drawLine(ix, insets.top, ix, height+insets.top);
    }
    step *= Utils.PLATE_RATIO;
    for(int iy = insets.top+step;
            iy < (insets.top + height); iy += step){
        if(((iy - insets.top) / step) % 10 == 0){
            bufferGraphics.setColor(bright);
        }
        else{
            bufferGraphics.setColor(transparent);
        }
        bufferGraphics.drawLine(insets.left, iy, width + insets.left, iy);
    }
} 
```

PS：如果这应该作为我的问题的编辑添加，请告诉我，我会这样做。

# java - Java 正则表达式错误非法重复

> ID：13043872
> 
> 赞同：1
> 
> 时间：2012-10-24T06:18:32.080
> 
> 标签：java, regex

> **可能重复：**
> [Flex RegExp 到 Java RegExp](https://stackoverflow.com/questions/7963263/flex-regexp-to-java-regexp)

我不知道为什么它不起作用..我正在使用java ..

```
...
String patternString = "([^{}]*{[^{}]+}[^{}])*";
Pattern p = Pattern.compile(patternString);
... 
```

我收到的错误是：

```
Illegal repetition near index 4
([^{}]*{[^{}]+}[^{}]*) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T06:20:49.737

您需要转义文字大括号，除非它们在字符类中：

```
String patternString = "([^{}]*\\{[^{}]+\\}[^{}])*"; 
```

大多数其他正则表达式风格可以识别何时不将大括号用作重复运算符（如`[0-9]{1,3}`），因此将正确解析正则表达式。但是 Java 坚持让这些大括号逃脱。

# c - 我的程序没有给我正确的答案... C

> ID：13043875
> 
> 赞同：-4
> 
> 时间：2012-10-24T06:19:01.993
> 
> 标签：c

我希望你能帮助我。我把所有的东西都写出来并编译了，但我没有得到我想要的答案。

用户输入 1 和 0 的代码，然后我的程序会找到正确的序列，例如...

如果用户输入 1000110，则错误位应为 6，更正后的代码应为 1100110。

我最初使用的是 char，但它在最后一直打印出随机的东西，而不是 1 和 0。

谁能帮我吗？

如果需要，我将进一步解释...

## *编辑我添加了我的原始代码。我正在尝试，但没有成功。似乎使用下面的这段代码，用户输入的 1 和 0 并没有被放入数组中，否则它们就不会正确打印......我不知道该怎么做。

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <string.h>

   char *code = NULL;
   int length, parity,slength;
   void param(){
      printf("Enter the maximum length:");
      scanf("%d",&length);
      printf("Enter the parity (0=even, 1=odd):");
      scanf("%d",&parity);
      code = (char*)malloc(length *sizeof(char));
      return;
   }
   void check(){
      int error,p,q=0,j,k,l,u=0,b=0,h,total;
      char *hCode = NULL;
      char *fCode = NULL;
      hCode = (char*)malloc(length *sizeof(char));
        fCode = (char*)malloc(length *sizeof(char));
      printf("Enter the Hamming code:");
      scanf("%lengths",&code);
        slength = strlen(code);
//      printf("%d",&slength);
//      int z;
//      for(z=0;z<slength;z++){
//          printf("%s\n",&code[z]);
//      }
      for (p=slength+1;p>=0;p--){
         hCode[p] = code[q];
         q++;
      }
      for (j=1;j<=log2(length);j*=2){
         int bit;
         for (k=j;k<=length;k+=j*2)
            for (l=0;l<j||k+l<=length;l++){
               if(k+1!=k){
                  bit^=hCode[k+l];
                  fCode[k+1] = hCode[k+1];
               }
                 fCode[j] = bit;
            }
      }
      for (u=1;u<=slength+1;u++){
         if (hCode[u]!=fCode[u]){
            error = u;
                b=u;
            printf("There is an error in bit: %d\n",error);
         }
        }
            if (b==0)
                printf("There is no bit error\n");
            b=0;
      printf("The corrected Hamming code is: ");
      for (h=slength;h>0;h--){
         printf("%c",&fCode[h]);
      }
        printf("\n");
       return;
   }

   int main(){
      int choice;
      while (choice !=3){
         printf("\n");
         printf(" Error detection/correction:\n");
         printf("------------------------------\n");
         printf("1) Enter parameters\n");
         printf("2) Check Hamming code\n");
         printf("3) Exit\n");
         printf("\nEnter selection: ");
         scanf("%d",&choice);
         printf("\n");
         if (choice == 1)
            param();
         else if (choice == 2)
            check();            
         else{ 
            printf("\n");
            printf("Goodbye. Have a nice day");
         }
      }
      return 1;
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T06:22:40.333

`scanf("%lengthd",code);`不会将数组读入`code`; 它甚至不是有效的`scanf`语法。您应该循环读取字符：

```
for (p=0;p<length;p++){
    code[p] = getc() - '0';
} 
```

PS 还有一些其他的问题。例如，`sizeof(code)/sizeof(int)`不获取数组的大小，而是只*获取*`sizeof(int*)/sizeof(int)`. 你可能只是想要`length`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T06:25:57.650

第一个错误是这样的：

```
 for (p=(sizeof(code)/sizeof(int))+1;p>=0;p--) 
```

code 是 INT * 类型，通常为 4 个字节长，当然取决于您的系统。但无论如何，该表达式的计算结果是 4/4 = 1，我怀疑这不是你想要的。我怀疑你应该使用你的长度变量。

IE

```
for (p=0; p < length; p++) 
```

# java - 在条形图 AChartEngine 中向 Y 轴标签添加 % 符号

> ID：13043879
> 
> 赞同：4
> 
> 时间：2012-10-24T06:19:11.110
> 
> 标签：java, android, achartengine

我正在开发一个 android 应用程序并使用 AChartEngine 进行图表绘制。条形图是根据来自服务器的动态数据绘制的。

Y 轴标签设置为从 0 到 100 显示，标签数量为 11 秒，它显示 0..10..20..30..40..60..70..80..90.. 100 作为 Y 轴标签。是否可以设置自定义 Y 轴标签，以便在 Y 轴标题值之后添加“%”符号以便显示，

0%..10%..20%..30%..40%..60%..70%..80%..90%..100% 作为 Y 轴标签值。

怎么做？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:49:04.350

为了在 Y 轴上设置自定义标签，您只需要使用以下方法：

```
mRenderer.addYTextLabel(10, "10%");
mRenderer.addYTextLabel(20, "20%");
... 
```

此外，如果要隐藏默认标签，请执行以下操作：

```
mRenderer.setYLabels(0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T07:38:01.517

您需要做的就是：享受；）

```
renderer.addXTextLabel(0, "0");
    renderer.addYTextLabel(10, "10%");
    renderer.addYTextLabel(20, "20%");
    renderer.addYTextLabel(30, "30%");
    renderer.addYTextLabel(40, "40%");
    renderer.addYTextLabel(50, "50%");
    renderer.addYTextLabel(60, "60%");
    renderer.addYTextLabel(70, "70%");
    renderer.addYTextLabel(80, "80%");
    renderer.addYTextLabel(90, "90%");
    renderer.addYTextLabel(100, "100%");

    renderer.setYLabels(0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T06:37:54.943

我实际上并没有用 AChartEngine 做很多事情，但是快速浏览一下源代码表明你可以扩展`BarChart`来完成你所追求的。

看一下[`getLabel(double label)`](http://code.google.com/p/achartengine/source/browse/trunk/achartengine/src/org/achartengine/chart/AbstractChart.java#203)位于`AbstractChart`（`BarChart`extends `XYChart`，它又是extends `AbstractChart`）中的方法。

```
 /**
   * Makes sure the fraction digit is not displayed, if not needed.
   * 
   * @param label the input label value
   * @return the label without the useless fraction digit
   */
  protected String getLabel(double label) {
    String text = "";
    if (label == Math.round(label)) {
      text = Math.round(label) + "";
    } else {
      text = label + "";
    }
    return text;
  } 
```

我会从一些天真的事情开始，看看结果如何。例如，只需附加`"%"`上面的结果：

```
@Override protected String getLabel(double label) {
    return super.getLabel(label) + "%";
} 
```

唯一我不太确定的是是否使用相同的方法为 X 轴生成标签。如果是这种情况，您可能需要做一些更聪明的事情来为您感兴趣的轴启用它。

# javascript - ImageMapster - jquery/html 问题

> ID：13043887
> 
> 赞同：1
> 
> 时间：2012-10-24T06:19:55.120
> 
> 标签：javascript, jquery, html, css

我在使用 jquery 插件（ImageMapster）时遇到了一些问题。ImageMapster 提供了一个演示 jsfiddle 来测试他们的演示，他们使用一个资源，其余的就在你面前：http: [//jsfiddle.net/nYkAG/396/](http://jsfiddle.net/nYkAG/396/)

如果您将鼠标悬停在图像上，您将能够看到几个小框，当您将鼠标悬停在它们上时，您将在图像下方看到描述。（如果它不起作用，请尝试单击图像本身）。它使用`area`标签。

我尝试使用相同的方法并在普通的 HTML 站点上实现它。但是，它不起作用，我无法理解我对不起作用的 jsfiddle 做错了什么。

示例站点：http: [//www.nina-naustdal.com/index1.html](http://www.nina-naustdal.com/index1.html)

它完全一样的网站，这很烦人。有人可以对这个问题有所了解。

再次感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T06:24:14.510

只需将您的代码包装在

```
$(function(){
   // Your code
}); 
```

或者

```
$(window).load(function(){
   //Your code
}); 
```

`#beatles`您在将其加载到 DOM 之前正在访问它。

它在 jsfiddle 下运行，因为它正在包装`$(window).load(function(){`

# linux - Linux R 中的内存使用情况

> ID：13043888
> 
> 赞同：3
> 
> 时间：2012-10-24T06:20:14.493
> 
> 标签：linux, r, centos

我在 Centos Linux 6.3、128 GB RAM、16 核机器上运行的 R 中加载 6 GB 数据集。同时我正在使用 top 命令监控 RAM 使用情况。大约 104 分钟后，在 top 命令的输出中，VIRT 列显示 189 GB。

现在，我无法理解 VIRT 列如何显示超过 128GB（这是限制）。是否有某种正在使用的共享内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T06:26:56.117

虚拟内存有一个简单的规则。

Linux 将 RAM 用于经常使用的进程，但另一个它可以存储在硬盘驱动器中，作为虚拟内存。

在我看来，获得实际内存使用的更好方法是使用**free -m**命令。

# linux - 打开目录后编辑目录中的每个文件bash

> ID：13043895
> 
> 赞同：3
> 
> 时间：2012-10-24T06:21:08.370
> 
> 标签：linux, bash, scripting

环顾四周，我没有看到我在寻找什么。一些类似的东西，但由于某种原因，我到目前为止尝试的方法没有奏效。

我的主要目标：

1.  在我的当前目录中运行脚本
2.  打开图片看看它是什么
3.  重命名我刚刚查看的图片
4.  重复该过程而不再次运行脚本

* * *

这些是我试图遵循的来源：

[Bash Shell 循环遍历文件集](http://www.cyberciti.biz/faq/bash-loop-over-file/)

[Bash遍历目录并重命名每个文件](https://stackoverflow.com/questions/8131146/bash-loop-through-directory-and-rename-every-file)

[如何使用 bash 对目录中的每个文件执行某些操作？](https://stackoverflow.com/questions/1310422/how-to-do-something-to-every-file-in-a-directory-using-bash)

==================================================== =================================

```
echo "Rename pictures. Path"
read path
for f in $path
do  
    eog $path
    echo "new name"
    read newname
    mv $path $newname
    cat $f
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T06:54:15.280

您应该向脚本传递一个参数，而不是尝试使其具有交互性。您还有许多报价问题。尝试这样的事情（未经测试）：

```
#!/usr/bin/env bash

moveFile() {
    local newName=
    until [[ $newName ]]; do
        printf '%s ' 'new name:'
        read -er newName # -e implies Bash with readline
        echo
    done
    mv -i "$1" "${1%/*}/${newName}"
}

if [[ ! -d $1 ]]; then
    echo 'Must specify a path' >&2
    exit 1
fi

for f in "$1"/*; do
    eog "$f"
    moveFile "$f"
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:27:49.680

您可能想尝试这样的事情：

```
for f in $*; do
    eog $f
    echo "new name:"
    read newname
    mv $f $newname
done 
```

如果您命名脚本，例如`rename.sh`，您可以调用

```
./rename.sh *gif 
```

查看扩展名为“gif”的所有文件。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-24T06:50:48.193

使用`find`命令可以递归搜索指定目录中的图像文件。

```
echo -n "Rename pictures. Input image directory: "
read path

for f in `find $path -type f`
do
    eog $f
    echo -n "Enter new name: "
    read newname
    mv $f $newname
    echo "Renamed $f to $newname."
done 
```

# iphone - 获取外部 CGRect

> ID：13043898
> 
> 赞同：0
> 
> 时间：2012-10-24T06:21:41.423
> 
> 标签：iphone, objective-c, ios, xcode, cgrect

我有两个`UIViews`，显然`CGRects`每个都有。一个`UIView`填满屏幕，而另一个只填满屏幕中间的一部分。我有`CGRect`较小的`UIView`，但我怎样才能得到`CGRect`它外面的那个 - 不包括较小的大小，以便背景可以变暗，而不是内部的内容`UIView`？

这就是我的`UIViewController`样子，因此您可以更好地了解我正在尝试做的事情：

![在此处输入图像描述](../Images/6f6a21b4d98817870000860ab0c805ff.png)

我想调暗*外部* `UIView`，而不是内部 - 但我没有外部的 CGRect*不包括内部`UIView`*，所以我现在不得不用另一种方式来做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T06:33:57.040

CGRect 是正方形大小。如果你想知道外部咏叹调，你需要计算 4 个 CGRects。顶部、左侧、右侧和底部空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:13:06.143

所以，在我看来，外部视图负责绘制您的内容，而内部视图是您的选择矩形，对吧？

如果是这样，那么我认为当您激活此选择模式时，您会想要绘制两次内容。你会：

1.  绘制一个变暗的通道 - 自己调整颜色（您可以绘制整个区域或使用[此处](https://stackoverflow.com/questions/9042725/drawrect-how-do-i-do-an-inverted-clip)的代码剪掉内部区域）
2.  使用剪辑矩形设置绘制第二个内部通道，因此仅绘制矩形内用于选择矩形的内容

或者

1.  像平常一样绘制所有内容
2.  设置您的剪贴蒙版（使用[此处](https://stackoverflow.com/questions/9042725/drawrect-how-do-i-do-an-inverted-clip)的代码，以便仅渲染外部区域），然后在整个场景中绘制一个具有一定透明度的黑色矩形

# python - 使用 multiprocessing.pools.map_async 回调不起作用？

> ID：13043905
> 
> 赞同：6
> 
> 时间：2012-10-24T06:22:53.310
> 
> 标签：python

使用`map_async()`. 当我使用稍微修改的代码来循环我的数组添加任务时，它会起作用`apply_async()`。从文档看来我应该能够使用回调`map_async()`，但也许这是某种新手错误......

```
from multiprocessing import Pool,TimeoutError
from time import sleep

servers=["s1","s2","s3","s4","s5","s6"]

def f(x):
    print("start f(" + x + ")")
    sleep(5)
    print("end   f(" + x + ")")
    return "did " + x

def mycallback(x):
    print("My callback " + str(x))

def myerrorcallback(r):
    print("My errorcallback " + str(r))

if __name__ == '__main__':
    pool = Pool(processes=4)
    results = pool.map_async(f, servers,  chunksize=1, callback=mycallback, error_callback=myerrorcallback)
    print(results.get(timeout=11)) 
```

运行时我得到：

```
D:\python> f.py
start f(s1)
start f(s2)
start f(s3)
start f(s4)
end   f(s1)
start f(s5)
end   f(s2)
start f(s6)
end   f(s4)
end   f(s3)
end   f(s5)
end   f(s6)
['did s1', 'did s2', 'did s3', 'did s4', 'did s5', 'did s6'] 
```

当我使用修改后的代码时，`apply_async()`我会从回调中获取打印输出。修改后的代码就是把最后一部分改成：

```
if __name__ == '__main__':
    pool = Pool(processes=4)
    for server in servers:
        pool.apply_async(f, (server,),  callback=mycallback, error_callback=myerrorcallback)
    pool.close()
    pool.join() 
```

结果是：

```
D:\python\>fb.py
start f(s1)
start f(s2)
start f(s3)
start f(s4)
end   f(s1)
start f(s5)
My callback did s1
end   f(s2)
My callback did s2
start f(s6)
end   f(s3)
My callback did s3
end   f(s4)
My callback did s4
end   f(s5)
My callback did s5
end   f(s6)
My callback did s6 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T22:14:49.313

好的，我抓住了一个机会并为它记录了一个错误。原来它实际上是 3.3 中的一个错误，并且正在进行补丁。

[http://bugs.python.org/issue16307](http://bugs.python.org/issue16307)

# c# - 如何在密码框 wpf 中设置一些默认文本？

> ID：13043906
> 
> 赞同：2
> 
> 时间：2012-10-24T06:22:52.653
> 
> 标签：c#, wpf, placeholder

> **可能重复：**
> [WPF 中的水印文本框](https://stackoverflow.com/questions/833943/watermark-textbox-in-wpf)

我可以知道如何在 WPF 的密码框中输入一些默认文本吗？我以 MSN Messenger 为例。默认情况下，密码字段将在密码框中显示“密码”。当我单击并输入密码框时，“密码”文本将消失，点将替换它。

![在此处输入图像描述](../Images/116b18bf0372e981a538716288aa38d5.png)

![在此处输入图像描述](../Images/6cda16c41e37bf1bbef6fa81acbfe90a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:49:16.833

您必须创建一个自定义控件才能做到这一点。

**XAML：**

```
<Window x:Class="WpfTest.Window1" 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    xmlns:WpfTest="clr-namespace:WpfTest" 
    Title="Password Box Sample" Height="300" Width="300"> 
  <Window.Resources> 
    <Style x:Key="{x:Type PasswordBox}" 
        TargetType="{x:Type PasswordBox}"> 
      <Setter Property="WpfTest:PasswordBoxMonitor.IsMonitoring" 
              Value="True"/> 
      <Setter Property="Template"> 
        <Setter.Value> 
          <ControlTemplate TargetType="{x:Type PasswordBox}"> 
            <Border Name="Bd" 
                    Background="{TemplateBinding Background}" 
                    BorderThickness="{TemplateBinding BorderThickness}" 
                    BorderBrush="{TemplateBinding BorderBrush}" 
                    SnapsToDevicePixels="true"> 
              <Grid> 
                <ScrollViewer x:Name="PART_ContentHost" 
                              SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/> 
                <TextBlock Text="Please enter your password"  
                           Margin="4, 2, 0, 0" 
                           Foreground="Gray"  
                           Visibility="Collapsed" 
                           Name="txtPrompt" /> 
              </Grid> 
            </Border> 
            <ControlTemplate.Triggers> 
              <Trigger Property="IsEnabled" 
                                                                         Value="false"> 
                <Setter TargetName="Bd" 
                                                                                Property="Background" 
                                                                                Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/> 
                <Setter Property="Foreground" 
                                                                                Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/> 
              </Trigger> 
              <Trigger Property="WpfTest:PasswordBoxMonitor.PasswordLength" Value="0"> 
                <Setter Property="Visibility" TargetName="txtPrompt" Value="Visible"/> 
              </Trigger> 
            </ControlTemplate.Triggers> 
          </ControlTemplate> 
        </Setter.Value> 
      </Setter> 
    </Style> 
  </Window.Resources> 
  <Grid> 
    <PasswordBox VerticalAlignment="Top"/> 
  </Grid> 
</Window> 
```

**C#代码：**

```
using System.Windows; 
using System.Windows.Controls; 

namespace WpfTest 
{ 
    public partial class Window1 : Window 
    { 
        public Window1() 
        { 
                InitializeComponent(); 
        } 

    } 

  public class PasswordBoxMonitor : DependencyObject 
  { 
    public static bool GetIsMonitoring(DependencyObject obj) 
    { 
      return (bool)obj.GetValue(IsMonitoringProperty); 
    } 

    public static void SetIsMonitoring(DependencyObject obj, bool value) 
    { 
      obj.SetValue(IsMonitoringProperty, value); 
    } 

    public static readonly DependencyProperty IsMonitoringProperty = 
        DependencyProperty.RegisterAttached("IsMonitoring", typeof(bool), typeof(PasswordBoxMonitor), new UIPropertyMetadata(false, OnIsMonitoringChanged)); 

    public static int GetPasswordLength(DependencyObject obj) 
    { 
      return (int)obj.GetValue(PasswordLengthProperty); 
    } 

    public static void SetPasswordLength(DependencyObject obj, int value) 
    { 
      obj.SetValue(PasswordLengthProperty, value); 
    } 

    public static readonly DependencyProperty PasswordLengthProperty = 
        DependencyProperty.RegisterAttached("PasswordLength", typeof(int), typeof(PasswordBoxMonitor), new UIPropertyMetadata(0)); 

    private static void OnIsMonitoringChanged(DependencyObject d, DependencyPropertyChangedEventArgs e) 
    { 
      var pb = d as PasswordBox; 
      if (pb == null) 
      { 
        return; 
      } 
      if ((bool) e.NewValue) 
      { 
        pb.PasswordChanged += PasswordChanged; 
      } 
      else 
      { 
        pb.PasswordChanged -= PasswordChanged; 
      } 
    } 

    static void PasswordChanged(object sender, RoutedEventArgs e) 
    { 
      var pb = sender as PasswordBox; 
      if (pb == null) 
      { 
        return; 
      } 
      SetPasswordLength(pb, pb.Password.Length); 
    } 
  } 
} 
```

参考：[来自 Watermark TextBox 的 WPF Watermark PasswordBox](https://stackoverflow.com/questions/1607066/wpf-watermark-passwordbox-from-watermark-textbox/1610761#1610761)

# c# - SQL查询抛出错误C#

> ID：13043910
> 
> 赞同：1
> 
> 时间：2012-10-24T06:23:28.957
> 
> 标签：c#, sql, visual-studio-2010, methods

我创建了一个数据库并在网格视图中显示数据。我正在尝试启用一种搜索员工姓名并返回结果的方法。

输入 EXACT NAME 时，以下 SQL 将显示正确的行。-

```
SELECT personID, name, address, phoneNumber, age FROM dbo.person WHERE name Like @name 
```

**我希望能够显示名称正确且部分正确的行。**

我尝试了以下 SQL -

```
SELECT personID, name, address, phoneNumber, age FROM dbo.person WHERE name Like @name% 
```

但它抛出错误“方法'searchName'没有重载需要2个参数”。

单击“搜索”按钮时，将执行以下代码：

```
 this.personTableAdapter.searchName(this.personDataSet.person,
        searchTextBox.Text); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T06:25:43.693

修改您`LIKE`的关键字和`%`

```
SELECT...
FROM...
WHERE name LIKE @name + '%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T06:39:55.087

你能尝试像这样进行 LIKE 查询吗

```
 SqlCommand cmd = new SqlCommand("SELECT personID, name, address, phoneNumber, age FROM dbo.person WHERE name Like @name");
    cmd.Parameters.AddWithValue("@name", name + "%"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T09:52:05.543

我认为您将使用文本框或类似的东西来获取用户正在搜索的名称。当你阅读它时，你可能会使用这样的东西：

```
string _Name = "%" + searchTextBox.Text + "%"; 
```

然后将字符串变量传递给您的脚本。

```
 SELECT personID, name, address, phoneNumber, age FROM dbo.person WHERE name Like @name 
```

希望这会有所帮助，它适用于我。

# javascript - 如何从javascript中的radiobuttonlist中获取选定的单选按钮

> ID：13043911
> 
> 赞同：0
> 
> 时间：2012-10-24T06:23:41.233
> 
> 标签：javascript, asp.net, textbox, radiobuttonlist

> **可能重复：**
> [如何确定 JavaScript 中 RadioButtonList 的 SelectedValue？](https://stackoverflow.com/questions/579597/how-can-i-determine-the-selectedvalue-of-a-radiobuttonlist-in-javascript)

我想从 javascript 中的 asp.net 单选按钮列表中获取选定的单选按钮。在文本框 onchange 事件中，我在下面编写了代码；

```
<asp:RadioButtonList CssClass="radioWithProperWrap"
                  ID="RadioButtonList1" runat="server" CellPadding="0" 
            CellSpacing="0" RepeatColumns="2" RepeatDirection="Horizontal" 
                  >
            <asp:ListItem Value="1" Selected="True">Aylık Ödeyeceğim Taksite Göre</asp:ListItem>
            <asp:ListItem Value="2">Toplam Alacağım Krediye Göre</asp:ListItem>
            </asp:RadioButtonList>
<asp:TextBox ID="TempTxtBox" runat="server" onchange="myFun()" ></asp:TextBox> 
```

和javascript；

```
<script language="javascript" type="text/javascript">

    function myFun() {

        var deger = document.getElementById('<%=TempTxtBox.ClientID%>').value;
        var vade  = document.getElementById('<%=MaturitytxtBox.ClientID%>').value;

        var radioButtons = document.getElementsByName('<%=RadioButtonList1.ClientID%>');

        var radio = radioButtons.item(0).checked;

        alert(radio);

    }

</script> 
```

它不起作用..有人可以帮忙吗？

# netty - 在netty中给自己发消息

> ID：13043913
> 
> 赞同：0
> 
> 时间：2012-10-24T06:23:51.380
> 
> 标签：netty

我想向netty的线程分派一个工作，如果我不这样做，我必须关心线程同步，因为该工作不是由从客户端收到的消息触发的。我发现 ChannelPipeline 有一个方法 sendUpstream 符合我的要求，但我无法获取所有 ChannelPipeline 的对象。我是说：

```
// code in thread which not belong to netty's thread
for(all pipeline)
    pipeline.sendUpstream(my_pseudo_message)

MyChannelHander.messageReceive() {
    //code to deal with my_pseudo_message
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:59:59.257

如果您想在 Netty 的 Worker-Thread 中执行某些操作，请使用：

```
channel.getPipeline().execute(new Runnable() {...}); 
```

# websphere - 以 oracle 10g 作为数据源的 WebSphere 上的 jBPM 集成

> ID：13043919
> 
> 赞同：2
> 
> 时间：2012-10-24T06:24:44.350
> 
> 标签：websphere, jbpm

我是 JBoss - jbpm 的新手。我需要询问的是如何将 jbmp 与我部署在 websphere 上的应用程序集成，并以 oracle 10g 作为数据源。有没有什么教程可以帮助我，因为我找不到。其次，哪个版本的 jbpm 最适合我实现上述集成。任何形式的帮助都将受到高度赞赏。谢谢 ！

# java - 将填充有数值的文件分配给 JLabels 的二维数组

> ID：13043920
> 
> 赞同：0
> 
> 时间：2012-10-24T06:24:43.947
> 
> 标签：java, jlabel

```
107054600
003008529
000000070
004905100
800700900
012003000
700000006
200609004
036010000 
```

这些文件以这种方式存储数独谜题。

我必须能够将这些谜题读入 2d int 数组和 2d Jlabel 数组。

它在单独读入 Int 数组时起作用。但是，当我尝试使用 for 循环正在处理的当前编号分配 j 标签的图标值时，我收到此编译器错误：

> 构造函数 javax.swing.JLabel(int) 未定义

为什么是这样？

相关代码如下：

```
JLabel[][] gridLabels = new JLabel[9][9];
int [][] grid = new int [9][9];  // Game Array

try {
 String fileName1 = new Scanner(new File("./temp.txt")).useDelimiter("\\Z").next();
 Scanner fin;
 fin = new Scanner( new File(fileName1));
 //Reads in the puzzle from a temporary text file

 for(int row=0; row<9; row++)
{
 String line = fin.next();
 for(int col=0; col<9; col++)
  { grid[row][col] = line.charAt(col)-'0'; 
   gridLabels[row][col] = new JLabel(line.charAt(col)-'0');    //PROBLEM HERE//
  }
 }
  } 
  catch (FileNotFoundException exception)
  {System.out.println("Incorrect Selection"); // Catches incorrect selection
  }
  catch (NoSuchElementException exception)
  {System.out.println("No Such Element");
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:26:59.210

在构造函数中，`javax.swing.JLabel`您可以传递 a`String`但不能传递`int`. 您应该在将其传递`int`给构造函数`String`之前将其转换为。`Label`您可以进行从`int`到`String`as 的转换`String.valueOf(i)`。

[在这里](https://stackoverflow.com/questions/4105331/how-to-convert-from-int-to-string)寻找转换

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T06:27:08.537

的结果`line.charAt(col)-'0'`是一个`int`并且错误说`JLabel`没有任何带`int`参数的构造函数。

试试`new JLabel(String.valueOf(line.charAt(col)-'0'))`。

# grails - Grails - BootStrap.groovy - 空指针问题

> ID：13043923
> 
> 赞同：0
> 
> 时间：2012-10-24T06:25:32.997
> 
> 标签：grails, groovy, bootstrapping, grails-2.1

BootStrap.groovy 加载开发数据时出现问题。之前它总是加载数据，但现在在运行 grails run-app 时停止抛出以下错误。

```
Message: Validation Error(s) occurred during save():
- Field error in object 'spotlight.content.Profile' on field 'portfolio': rejected value  [null]; 
```

我的2个模型如下；

```
class Portfolio {
   Profile profile

String portfolioName
String portdescrip
Integer portpublished
Date dateCreated
Date lastUpdated 
```

和

```
class Profile {
   static belongsTo = [portfolio: Portfolio]

String portfoliohtml
String portfolioEmail
String portfoliocc
String portfolioAdmin
String portfolioFilestore
String portfolioColor
String bugzillaproduct
String bugzillacomponent
String rtqueue
String teamqueueemail
String etherpadurl
Integer siteupload
Date dateCreated
Date lastUpdated 
```

在 BootStrap.groovy 文件中，我有以下内容；

```
import java.util.Date;
import spotlight.content.Profile
import spotlight.content.Portfolio

class BootStrap { 

def init = { servletContext ->

    def profile = new Profile(portfoliohtml:"No",
            portfolioEmail: "ian@ian.com",
            portfolioAdmin:"Ian Neilsen",
            bugzillaproduct:"bz prod name",
            bugzillacomponent:"comp name",
            siteupload:1,
            portfoliocc: "ian@ian.com",
            portfolioColor:"red",
            portfolioFilestore:"blah",
            rtqueue:"queue name",
            teamqueueemail:"ian@ian.com",
            etherpadurl:"http://url.com",
            ).save(failOnError: true)

    def portfolio = new Portfolio(portfolioName:"Portfolio 1",
                            portdescrip:"portfolio descrition field",
                            portpublished:1,
                            portfolio:profile).save(failOnError: true)

} 
```

我已经尝试了将我的个人资料对象添加到投资组合对象的所有化身，但没有任何运气。正如我之前所说，这有效，现在已经停止抛出空错误。

让我有什么想法吗？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T06:40:11.140

看起来你有几个错误。一个（但不会导致错误消息）是，您尝试将`profile`实例添加到实例的`portfolio`属性中`portfolia`。`Portfolio`没有财产`portfolio`。

关于您的错误消息，请尝试以下操作：

```
def portfolio = new Portfolio(portfolioName:"Portfolio 1", ...)
portfolio.profile = new Profile(...)
portfolio.save(failOnError: true) 
```

如需进一步阅读，请查看grails 文档[的多对一和一对一 (GORM)](http://grails.org/doc/latest/guide/GORM.html#manyToOneAndOneToOne)部分。

# objective-c - 始终从情节提要的初始控制器开始

> ID：13043924
> 
> 赞同：0
> 
> 时间：2012-10-24T06:25:34.017
> 
> 标签：objective-c, storyboard, startup

我希望应用程序始终从情节提要的初始控制器开始。Initial 控制器是一个标准的 uiviewcontroller。

默认行为：我正在浏览应用程序，并在特定视图中退出它。当我重新启动应用程序时，我希望用户从特定的加载屏幕开始，而不是从最后一个可见的控制器开始。

我已经搜索过这个，但什么也没找到。这是可能的，我认为应该是，对吧？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:52:58.277

最简单的方法是`UIApplicationExitsOnSuspend`在`YES`应用程序的`Info.plist`. 如果您没有设置“显示原始键/值”选项， Xcode 的`Info.plist`编辑器将使用友好名称“应用程序不在后台运行”作为该键。

![在 Info.plist 中暂停条目时退出](../Images/477f1b82f11305fcfd426455b962df6a.png)

# database - 解决 CouchDB 中已删除文档的复制冲突

> ID：13043927
> 
> 赞同：12
> 
> 时间：2012-10-24T06:25:54.387
> 
> 标签：database, couchdb

官方文档推荐的解决复制冲突的方法是：

1.  使用文档的字段读取冲突的修订`_conflicts`（例如通过视图）
2.  获取列出的所有修订的文档
3.  执行特定于应用程序的合并
4.  删除不需要的修订

当我想合并*已删除*的文档时，问题就出现了。它们不会出现在`_conflicts`现场，而是出现在`_deleted_conflicts`. 如果我只使用字段进行合并`_conflicts`，并且在本地数据库中删除了一个文档并在远程副本中进行了编辑，那么它将在复制时在本地复活。我的应用程序模型假设在合并时删除始终优先：已删除的文档将保持删除状态，无论它与哪些编辑冲突。

所以，乍一看，最简单的做法是检查它`_deleted_conflicts`是否为空，如果它不为空，则删除该文档，对吗？嗯...问题在于，这可能还包含通过解决步骤#4 中的编辑冲突而引入的已删除修订，因此`_deleted_conflicts`在这种情况下， 的含义是不明确的。

在 CouchDB（如果有的话）中处理删除冲突的规范方法是什么，它不涉及诸如将文档标记为已删除和在应用程序层进行过滤等粗暴的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-10T20:24:56.423

最好的解决方案是使用 reserved 属性`_deleted`来删除文档，而不是`HTTP DELETE`. 然后您还可以自由设置其他属性：

```
doc._deleted = true;
doc.deletedByUser = true;
doc.save(); 
```

然后在合并过程中检查 _changes 提要`_deleted_conflicts`并删除文档，如果 _deleted_conflicts 中存在`deletedByUser`标志设置为的修订`true`。

我希望这有帮助！

# r - 根据列中的部分字符串匹配选择数据框行

> ID：13043928
> 
> 赞同：133
> 
> 时间：2012-10-24T06:25:55.477
> 
> 标签：r, regex, string, match, subset

我想根据列中字符串的部分匹配从数据框中选择行，例如列“x”包含字符串“hsa”。使用`sqldf`-*如果*它有`like`语法 - 我会做类似的事情：

`select * from <> where x like 'hsa'`.

不幸的是，`sqldf`不支持该语法。

或类似地：

```
selectedRows <- df[ , df$x %like% "hsa-"] 
```

这当然行不通。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2012-10-24T06:31:04.883

我注意到您`%like%`在当前方法中提到了一个功能。我不知道这是否是对`%like%`来自“data.table”的引用，但如果是，您绝对可以按如下方式使用它。

请注意，对象不必是 a `data.table`（但也要记住`data.frame`s 和`data.table`s 的子集方法不相同）：

```
library(data.table)
mtcars[rownames(mtcars) %like% "Merc", ]
iris[iris$Species %like% "osa", ] 
```

如果这就是您所拥有的，那么也许您只是混合了行和列位置以进行子集数据。

* * *

如果您不想加载包，可以尝试使用`grep()`搜索您匹配的字符串。这是数据集的一个示例`mtcars`，我们匹配行名称包含“Merc”的所有行：

```
mtcars[grep("Merc", rownames(mtcars)), ]
             mpg cyl  disp  hp drat   wt qsec vs am gear carb
# Merc 240D   24.4   4 146.7  62 3.69 3.19 20.0  1  0    4    2
# Merc 230    22.8   4 140.8  95 3.92 3.15 22.9  1  0    4    2
# Merc 280    19.2   6 167.6 123 3.92 3.44 18.3  1  0    4    4
# Merc 280C   17.8   6 167.6 123 3.92 3.44 18.9  1  0    4    4
# Merc 450SE  16.4   8 275.8 180 3.07 4.07 17.4  0  0    3    3
# Merc 450SL  17.3   8 275.8 180 3.07 3.73 17.6  0  0    3    3
# Merc 450SLC 15.2   8 275.8 180 3.07 3.78 18.0  0  0    3    3 
```

并且，另一个示例，使用`iris`数据集搜索字符串`osa`：

```
irisSubset <- iris[grep("osa", iris$Species), ]
head(irisSubset)
#   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
# 1          5.1         3.5          1.4         0.2  setosa
# 2          4.9         3.0          1.4         0.2  setosa
# 3          4.7         3.2          1.3         0.2  setosa
# 4          4.6         3.1          1.5         0.2  setosa
# 5          5.0         3.6          1.4         0.2  setosa
# 6          5.4         3.9          1.7         0.4  setosa 
```

对于您的问题，请尝试：

```
selectedRows <- conservedData[grep("hsa-", conservedData$miRNA), ] 
```

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2015-07-07T15:57:44.363

`str_detect()`从[stringr](http://cran.r-project.org/web/packages/stringr/stringr.pdf)包中尝试，它检测字符串中是否存在模式。

这是一种还结合了`%>%`管道和`filter()`来自[dplyr](http://cran.r-project.org/web/packages/dplyr/vignettes/introduction.html)包的方法：

```
library(stringr)
library(dplyr)

CO2 %>%
  filter(str_detect(Treatment, "non"))

   Plant        Type  Treatment conc uptake
1    Qn1      Quebec nonchilled   95   16.0
2    Qn1      Quebec nonchilled  175   30.4
3    Qn1      Quebec nonchilled  250   34.8
4    Qn1      Quebec nonchilled  350   37.2
5    Qn1      Quebec nonchilled  500   35.3
... 
```

这会针对处理变量包含子字符串“non”的行过滤样本 CO2 数据集（R 附带）。您可以调整是否`str_detect`找到固定匹配项或使用正则表达式 - 请参阅 stringr 包的文档。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-10-24T06:43:03.087

`LIKE`应该在 sqlite 中工作：

```
require(sqldf)
df <- data.frame(name = c('bob','robert','peter'),id=c(1,2,3))
sqldf("select * from df where name LIKE '%er%'")
    name id
1 robert  2
2  peter  3 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-10-03T18:27:44.967

另一种选择是简单地使用`grepl`函数：

```
df[grepl('er', df$name), ]
CO2[grepl('non', CO2$Treatment), ]

df <- data.frame(name = c('bob','robert','peter'),
                 id = c(1,2,3)
                 )

# name id
# 2 robert  2
# 3  peter  3 
```

# c# - 多线程任务

> ID：13043934
> 
> 赞同：0
> 
> 时间：2012-10-24T06:26:16.113
> 
> 标签：c#, multithreading, c#-4.0

有没有办法多线程这个方法？我可以看到的问题是唯一的共享状态是图像源的克隆，它占用了大约一半的方法时间。列表中大约有 5 到 10,000 个收件人。

我尝试了一个 ConcurrentQueue，其中一个操作添加了克隆，另一个 TryDequeue 并处理它们，但超过 500 个项目只节省了 7 秒。有没有办法让 imgSrc 回滚或撤消更改，这样它就不必创建新的克隆？

```
 public static void CreateImages(string fileSrc, string pathDestination, IEnumerable<Recipient> recipients)
    {
        var sfCenter = new StringFormat();
        sfCenter.Alignment = StringAlignment.Center;
        sfCenter.LineAlignment = StringAlignment.Center;

        using (var imgSrc = new System.Drawing.Bitmap(fileSrc))
        {
            foreach (var rec in recipients)
            {
                using (var imgCopy = imgSrc.Clone() as Bitmap)
                using (var graphicImage = Graphics.FromImage(imgCopy))
                {
                    graphicImage.SmoothingMode = SmoothingMode.AntiAlias;
                    graphicImage.DrawString(rec.Name, new Font("Arial", 16, FontStyle.Bold), Brushes.Black, new Rectangle(170, 105, 650, 50), sfCenter);
                    // plus other activity
                    var fileOut = pathDestination + rec.ID + ".jpg";
                    imgCopy.Save(fileOut, ImageFormat.Jpeg);
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T06:25:42.390

没有找到更好的方法。这看起来和它一样好。

# java - 查找数字的数字根

> ID：13043939
> 
> 赞同：1
> 
> 时间：2012-10-24T06:26:53.333
> 
> 标签：java, math

学习问题是找到一个已经提供的数字的数字根。老师为我们提供了数字 2638。为了找到数字根，您必须分别将每个数字相加 2 + 6 + 3 + 8 = 19。然后您将结果 19 并将这两个数字相加 1 + 9 = 10 . 再次做同样的事情 1 + 0 = 1\. 数字根为 1。

我的第一步是使用变量 total 将数字 2638 相加以找到总数 19。然后我尝试使用第二个 while 循环通过使用 % 分隔两位数

我必须尝试通过使用基本整数算术（+、-、*、/）来解决问题。
1.是否有必要或可能使用嵌套的while循环来解决问题？
2.我的数学正确吗？
3\. 正如我在这里写的，它不能在 Eclipse 中运行。我是否正确使用了while循环？

```
import acm.program.*;

public class Ch4Q7 extends ConsoleProgram {
   public void run(){
      println("This program attempts to find the digit root of your number: ");

      int n = readInt("Please enter your number: "); 

      int total = 0;

      int root = total;

      while (n > 0 ){
        total = total + (n %10);
    n = (n / 10);

    }   

   while ( total > 0 ){
     root = total; 
     total = ((total % 10) + total / 10); 
    }

     println("your root should be " + root);
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T06:44:22.590

我认为它确实运行，但有点太多了:-)

```
total = ((total % 10) + total / 10); 
```

不能收敛到 0。另外，你的程序只会处理非常特殊的情况。正如其他人指出的那样，这可以递归解决，但也可以只使用双循环。像您尝试过的一系列循环将不起作用。

试试这个（输入变量与您的程序中的相同，它实际上是您的两个循环的插件替换）：

```
 do {
        while (n > 0) {
            total = total + (n % 10);
            n = (n / 10);
        }
        n = total;
        total = 0;
    } while (n > 9);  // need at least 1 more loop 
```

在这个循环之后，n 将包含根号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T07:03:03.570

在得到一位数字之前，您只能对最后一位数字求和：

```
public static int getRoot(int n) {
    int root=n;
    while ( (root=((root%10) + root/10))>9  );
    return root;
} 
```

或递归：

```
public static int recursionGetRoot(int n) {
    if(n<10)
        return n;
    return n%10 + recursionGetRoot(n/10);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-24T10:59:44.093

递归解决方案：

```
public static void main(String[] args)
{
    System.out.println(getDigitRoot(1));
    System.out.println(getDigitRoot(11));
    System.out.println(getDigitRoot(1924));
    System.out.println(getDigitRoot(2638));
}

public static int getDigitRoot(int n)
{
    if (n < 10)
    {
        return n;
    }
    int sum = 0;
    while (n > 0)
    {
        sum += n % 10;
        n = n / 10;
    }
    return getDigitRoot(sum);
} 
```

输出：

```
1
2
7
1 
```

我对这一点的递归有两种看法。它更紧密地遵循您在手动解决它时所做的事情，因此是有道理的，但是迭代实现并不难，而且像往常一样，它更具可扩展性。我认为在大多数情况下，这无关紧要，因为性能不太可能很关键，而且您不太可能处理大到足以导致递归问题的数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T06:41:35.047

做一个循环来检查你的号码是否大于或等于10，即它有多于一位。在内部循环中进行数字加法。打印您的中间结果以检查您的数学是否正确，即打印您提取的数字和总和。如果您愿意，您可以稍后将其删除。当您的数字小于 10 时，您就有了根。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T06:44:09.770

你为什么不自己测试一下？这是编写一些测试（例如实际结果和预期结果之间的比较）的一种非常简单的方法，如果所有这些测试都通过，那么数学是正确的。

首先，我们需要在一个单独的方法中提取数学，因为我们需要一些可以接受输入并提供输出的东西：

```
public void run(){
  println("This program attempts to find the digit root of your number: ");

  int n = readInt("Please enter your number: "); 

  int root = calculateRoot(n);    

  println("your total should be " + root);
}

public static int calculateRoot(int n) {
  int total = 0;
  int root = total;
  while (n > 0 ){
    total = total + (n %10);
    n = (n / 10);
  }   

  while ( total > 0 ){
    root = total; 
    total = ((total % 10) + total / 10); 
  }

  return root;
} 
```

有了这些，我们可以创建一个`main`方法来执行一些测试：

```
public static void main(String[] args) {

  if (0 == calculateRoot(0)) {
    System.out.println("0: OK");
  }

  if (1234 == calculateRoot(10)) {
    System.out.println("1234: OK");
  }

  // and so on 
```

}

因此，只需实现您的算法并执行该类并通过输出验证所有测试都可以。这是非常简化的，稍后您将使用特殊的测试工具，但一般方法将是相同的：定义一些测试用例和代码，直到所有实现通过所有测试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-24T07:00:29.977

2.我的数学正确吗？`Yes` 3\. 正如我在这里写的，它不能在 Eclipse 中运行。我是否正确使用了while循环？`No` 1.是否有必要或可能使用嵌套的while循环来解决问题？

是的，可以使用嵌套循环作为上面 fvu 给出的答案

```
do {
    while (n > 0) {
        total = total + (n % 10);
        n = (n / 10);
    }
    n = total;
    total = 0;
} while (n > 9); 
```

是否有必要使用嵌套循环。`No`你可以使用递归

```
public static void run(){
      System.out.println("This program attempts to find the digit root of your number: ");

      //int n = 234567; 

      int total = 23456;

    //  int root = total;

          total=Test.calctotal(total);

      System.out.println("Root:"+total);
}
public static int calctotal(int n)
{
    int total=0;
    System.out.println(n);
    if(n>9)
    {
        while (n > 0 ){
            total = total + (n %10);
            n = (n / 10);
        }  
        total=Test.calctotal(total);
    }
            else
                total=n;
    return total;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-24T07:00:33.500

```
 int root = 0;
  int t = 0;

  while (true)
  {
    root = root + (n %10);
    t = n/10;
    n = t;

    if(t == 0)
    {
        if(root < 10)
            break;

        n = root;
        root = 0;
    }
} 
```

甚至更简单

```
int root = 0;

while (n > 0)
{
    root = root + n%10;
    n = n/10;
}

if((root == 0) || (root%9 != 0))
    root = root%9;
else
    root = 9; 
```

# javascript - 旋转后如何计算 HTML5 画布中点的位置？

> ID：13043945
> 
> 赞同：3
> 
> 时间：2012-10-24T06:27:28.227
> 
> 标签：javascript, html, canvas, 3d, rotation

看到[这段](http://codentronix.com/2011/04/27/first-experiment-with-html5-a-wireframe-cube/#comment-2290)代码后，我想不通**x * sina + y * cosa**这个公式是从哪里来的。

在每个间隔之后，一个点围绕轴旋转**一个**角度。

我需要旋转后点的 x 和 z 位置。

在上述文章中，使用了**x * sina + y * cosa**公式。我不明白它是从它派生的。

我通过三角函数仍然一无所获。

任何人都可以帮忙吗？基本思想。一些参考资料。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T12:09:09.657

*首先，他的代码是在 3D 空间上的投影，但问题是关于 Z 轴上的旋转，这与 2D 旋转相同，并且 Z 值保持不变。*

当你有任何给定的点 (x,y) 时，你就形成了一个直角三角形。看看这张照片：

![在此处输入图像描述](../Images/26ef091b837e627fe27aaf4ec64c0162.png)

现在假设`a`是15度

![在此处输入图像描述](../Images/77cbc1f11ba1c882e0acc2c218d5d06b.png)

该圆称为单位圆，其半径为`1`。

*   沿**Y**轴的绿线长度是`sine`角度的。
*   沿**X**轴的绿线的长度是`cosine`角度的。

请注意，由点的坐标形成的三角形的**大小**并不重要。只要它保持相同的角度，正弦和余弦的值将保持不变，因为这里只有单位圆内的三角形截面很重要。

`sine`是一个点应该在 Y 轴上移动多少，而是`cosine`在 X 轴上移动多少才能使一个点在空间中移动并**保持**与最小步长相同的角度（它们的值范围从 0 到 1这是圆的半径）

但是你如何在空间中移动一个点以**改变**它与原点的角度呢？

嗯，首先，对于任何与单位圆相交的点，也就是说它的三角形的斜边是1，它的位置是`(cosine, sine)`，对于单位圆外的一点，例如`(2,5)`它的位置是`(hypotenuse * cosine, hypotenuse * sine)`

想象一下，我们有一个与原点`(x,y)`成`a`度数的点，我们想将它旋转`b`度数，这意味着我们想要一个新位置`(x',y')`，其中角度更改为`a+b`度数，但与原点（斜边）的距离保持不变。

```
x = hypotenuse * cosine(a)
y = hypotenuse * sine(a)

x' = hypotenuse * cosine(a + b)
y' = hypotenuse * sine(a + b) 
```

通过使用[三角角加法](http://mathworld.wolfram.com/TrigonometricAdditionFormulas.html)公式，我们有

```
cosine(a + b) = cosine(a) * cosine(b) - sine(a) * sine(b)
sine(a + b) = sine(a) * cosine(b) + cosine(a) * sine(b) 
```

如果我们将其应用于我们的，`(x',y')`我们会得到：

```
x' = hypotenuse * cosine(a) * cosine(b) - hypotenuse * sine(a) * sine(b)
y' = hypotenuse * sine(a) * cosine(b) + hypotenuse * cosine(a) * sine(b) 
```

如果您记得我们的定义，`(x,y)`您会注意到这与以下内容完全相同：

```
x' = x * cosine(b) - y * sine(b)
y' = y * cosine(b) + x * sine(b) 
```

我们的 上面有你的神秘公式`y'`，只是加法的顺序颠倒了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T06:38:46.087

旋转可以用复平面来解释。

cos(角度) + i * sin(角度) = e^(i*角度);

复平面乘法规则表明 A*e^(i*angle1) * B*e^(i*angle2)，其中 A 和 B 是向量长度。然后将这些向量相乘得到 A*B*e^(i*(angle1+angle2)) 并且因为 cos(angle)+i*sin(angle) 的长度为 1，您可以通过复数乘法旋转向量 A 而无需影响它的长度。

(X+ i*y) * (cos(angle) + i*sin(angle)) == (x*cos-y*sin) + i * (x*sin+y*cos)
（省略'i'术语并将实部用作 x 坐标，将图像部分用作 y 坐标。

# sql-server - 当我们使用事务时，是否有可能在 MsSql 数据库中插入错误的信息

> ID：13043947
> 
> 赞同：2
> 
> 时间：2012-10-24T06:27:50.757
> 
> 标签：sql-server

所以理论上我们在使用事务时可以在数据库中插入部分信息。例如插入发生，突然我们失去了电力。是否会出现一条记录将写入 tableA 而不会写入 tableB 的情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T06:39:35.243

[在开始交易手册](http://msdn.microsoft.com/en-us/library/ms188929.aspx)中自我解释：

> 如果遇到错误，在 BEGIN TRANSACTION 之后所做的所有数据修改都可以回滚以将数据返回到这个已知的一致性状态。

答案是否定的：不可能。对于您的场景，TableA 和 TableB 插入都在同一个事务中，由于 ACID 行为，如果插入之间发生“断电”，当数据库上升时，TableA 插入会回滚。记住原子的A。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:18:58.460

它不会发生，因为所有活动都是先写入事务日志，而不是写入实际的数据文件，并且在断电的情况下，当 sql server 启动时，它会遍历事务日志并回滚任何未完成的事务（你会注意到它启动的速度有多慢或数据库将处于恢复模式一段时间）。

数据文件在一段时间后被写入者写入，然后该内存作为脏页在内存中可用。

# blackberry - 在 Blackberry J2ME 中编写时覆盖 LWUIT“Textfield”主题

> ID：13043948
> 
> 赞同：2
> 
> 时间：2012-10-24T06:27:58.230
> 
> 标签：blackberry, java-me, lwuit

出于某种原因，每当用户开始在字段内书写时，Textfield 的主题会被一个完全覆盖的白框覆盖（覆盖）。一旦用户滚动离开文本字段，主题就会恢复正常。

有什么方法可以禁用此功能和/或导致此问题的原因是什么？

编辑：

这是我开始写之前的BB [http://imageshack.us/a/img411/5681/24102012023.jpg](http://imageshack.us/a/img411/5681/24102012023.jpg)

![在此处输入图像描述](../Images/9900df0b14dd96b32c78739b03dec8c9.png)

这是我开始写[http://imageshack.us/a/img717/5973/24102012024.jpg时文本字段的变化](http://imageshack.us/a/img717/5973/24102012024.jpg)

![在此处输入图像描述](../Images/f3a65d4c648b7c5fe4e449cefb1c9121.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T16:44:09.167

黑莓使用本地编辑，因为接受任何其他类型的输入有太多的复杂性。由于 RIM API 非常有限，因此很难自定义编辑模式的外观以匹配 LWUIT/ [Codename One](http://www.codenameone.com/)的风格。

# c++ - 需要确保构造函数/析构函数被调用一次。但是“错误：析构函数是私有的”

> ID：13043950
> 
> 赞同：1
> 
> 时间：2012-10-24T06:28:05.727
> 
> 标签：c++, singleton, virtual-destructor

我有以下代码

```
#include <vector>
#include <iostream>

class A{
    private:
    std::vector<int> x;
    A(){
        // here is a code to open and initialize several devices
        // it is allowed to be called once only!!!
        std::cout << "constructor called" << std::endl;
    };

    virtual ~A(){
        // here is a code to close several devices
        // it is allowed to be called once only!!!
        std::cout << "destructor called" << std::endl;
    };

    public:
    static A & getA(){
        static A* singleton = new A;
        std::cout << "singleton got" << std::endl;
        return *singleton;
    };

};

int main(int argc, char** argv){

    A a = A::getA();

    return(0);
} 
```

根据许多建议，析构函数是私有的，只能在程序结束时调用一次。
但我有编译器错误：

```
Test.cpp: In function 'int main(int, char**)':
Test.cpp:12:10: error: 'virtual A::~A()' is private
Test.cpp:29:19: error: within this context
Test.cpp:12:10: error: 'virtual A::~A()' is private
Test.cpp:29:19: error: within this context 
```

当然，我可以公开构造函数和/或析构函数，并且没有任何类似的错误。但我需要确保它们都被调用一次且仅调用一次。
如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T06:33:10.907

您的程序中有几件事：

1.  您缺少复制构造函数的实现
2.  您正在复制单例对象
3.  你的析构函数是私有的（因为你正在复制单例对象，你需要在公共部分有析构函数）

您可以通过不复制对象来简单地解决它：

```
int main(int argc, char** argv){

    A &a = A::getA();
} 
```

单例应该保持单个实例，因此（如建议的那样）最好的方法是删除复制和移动构造函数。

* * *

由于您只需要调用一次构造函数**和析构函数**，因此您需要使用[meyers singleton](http://www.devarticles.com/c/a/Cplusplus/C-plus-plus-In-Theory-The-Singleton-Pattern-Part-I/4/)。这意味着将您的功能更改为此：

```
static A & getA(){
   static A singleton;
   std::cout << "singleton got" << std::endl;
   return singleton; 
```

};

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T06:30:49.043

非常非常简单。不要将析构函数设为私有！

通过将唯一的构造函数设为私有，您可以确保您的类是单例，也无需将析构函数设为私有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T06:34:47.990

更好地使用单例构造函数的这种方法：

```
static A* getA(){
    static A singleton;
    std::cout << "singleton got" << std::endl;
    return &singleton;
}; 
```

更多信息的链接在[这里](http://www.devarticles.com/c/a/Cplusplus/C-plus-plus-In-Theory-The-Singleton-Pattern-Part-I/4/)

# npm - npm 安装错误，http 404 http://registry.npmjs.org/jquery

> ID：13043952
> 
> 赞同：1
> 
> 时间：2012-10-24T06:28:24.930
> 
> 标签：npm

我在 Windows 上使用 nodejs(0.8.12) 并尝试安装 npm 包（例如 jquery）我收到以下错误。在错误日志中，它说 http 404 错误，但我可以在网络浏览器中连接它。详细说明我的网络环境，我的公司正在使用代理，但正如我所提到的，我可以在浏览器中连接 npm 注册表。

```
0 info it worked if it ends with ok
1 verbose cli [ 'C:\Program Files\nodejs\\node.exe',
1 verbose cli 'C:\Program Files\nodejs\node_modules\npm\bin\npm-cli.js',
1 verbose cli 'install',
1 verbose cli 'jquery' ]
2 info using npm@1.1.63
3 info using node@v0.8.12
4 verbose node symlink C:\Program Files\nodejs\node.exe
5 verbose read json D:\development\web\myjam\package.json
6 verbose read json D:\development\web\myjam\package.json
7 verbose cache add [ 'jquery', null ]
8 silly cache add name=undefined spec="jquery" args=["jquery",null]
9 verbose parsed url { pathname: 'jquery', path: 'jquery', href: 'jquery' }
10 silly lockFile 6f2ab963-jquery jquery
11 verbose lock jquery C:\Users\305021818\AppData\Roaming\npm-cache\6f2ab963-jquery.lock
12 silly lockFile 6f2ab963-jquery jquery
13 verbose addNamed [ 'jquery', '' ]
14 verbose addNamed [ null, '' ]
15 silly lockFile 039e748d-jquery jquery@
16 verbose lock jquery@ C:\Users\305021818\AppData\Roaming\npm-cache\039e748d-jquery.lock
17 silly addNameRange { name: 'jquery', range: '', hasData: false }
18 verbose url raw jquery
19 verbose url resolving [ 'http://registry.npmjs.org/', './jquery' ]
20 verbose url resolved http://registry.npmjs.org/jquery
21 info trying registry request attempt 1 at 15:13:13
22 http GET http://registry.npmjs.org/jquery
23 http 404 http://registry.npmjs.org/jquery
24 verbose bad json

Apache Tomcat/5.5.28 - Error report&lt;!--H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} H2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} H3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} BODY {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} B {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} P {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}A {color : black;}A.name {color : black;}HR {color : #525D76;}--&gt;
HTTP Status 404 - /jquery
type Status report

message /jquery

description The requested resource (/jquery) is not available.

Apache Tomcat/5.5.28

25 error registry error parsing json
26 silly registry.get cb [ 404,
26 silly registry.get { date: 'Wed, 24 Oct 2012 06:13:16 GMT',
26 silly registry.get server: 'Apache/2.2.8 (Unix) mod_jk/1.2.15',
26 silly registry.get 'content-length': '973',
26 silly registry.get 'keep-alive': 'timeout=5, max=100',
26 silly registry.get connection: 'Keep-Alive',
26 silly registry.get 'content-type': 'text/html;charset=utf-8' } ]
27 silly lockFile 039e748d-jquery jquery@
28 error SyntaxError: Unexpected token <
28 error Apache Tomcat/5.5.28 - Error report&lt;!--H1 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:22px;} H2 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:16px;} H3 {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;font-size:14px;} BODY {font-family:Tahoma,Arial,sans-serif;color:black;background-color:white;} B {font-family:Tahoma,Arial,sans-serif;color:white;background-color:#525D76;} P {font-family:Tahoma,Arial,sans-serif;background:white;color:black;font-size:12px;}A {color : black;}A.name {color : black;}HR {color : #525D76;}--&gt;
HTTP Status 404 - /jquery
type Status report

message /jquery

description The requested resource (/jquery) is not available.

Apache Tomcat/5.5.28

28 error at Object.parse (native)
28 error at RegClient. (C:\Program Files\nodejs\node_modules\npm\node_modules\npm-registry-client\lib\request.js:226:23)
28 error at Request.init.self.callback (C:\Program Files\nodejs\node_modules\npm\node_modules\request\main.js:120:22)
28 error at Request.EventEmitter.emit (events.js:96:17)
28 error at Request. (C:\Program Files\nodejs\node_modules\npm\node_modules\request\main.js:648:16)
28 error at Request.EventEmitter.emit (events.js:123:20)
28 error at IncomingMessage.Request.start.self.req.self.httpModule.request.buffer (C:\Program Files\nodejs\node_modules\npm\node_modules\request\main.js:610:14)
28 error at IncomingMessage.EventEmitter.emit (events.js:123:20)
28 error at IncomingMessage._emitEnd (http.js:366:10)
28 error at HTTPParser.parserOnMessageComplete as onMessageComplete
29 error If you need help, you may report this log at:
29 error http://github.com/isaacs/npm/issues
29 error or email it to:
29 error npm-@googlegroups.com
30 error System Windows_NT 6.1.7601
31 error command "C:\Program Files\nodejs\\node.exe" "C:\Program Files\nodejs\node_modules\npm\bin\npm-cli.js" "install" "jquery"
32 error cwd D:\development\web\myjam
33 error node -v v0.8.12
34 error npm -v 1.1.63
35 error type unexpected_token
36 verbose exit [ 1, true ] 
```

# java - 加载预先编写的对象而不是全部写入[插件系统]

> ID：13043955
> 
> 赞同：3
> 
> 时间：2012-10-24T06:28:35.697
> 
> 标签：java, oop

好吧，我（正在尝试）创建一个对象系统，我可以在其中从文件夹加载类或 .java 文件，可能称为“插件”，它们将添加到名为“base”的数组列表中，base 将控制对象并循环它们，别担心，我有一切的例子。

但我先解释一下它是如何工作的。

这些插件将从（BaseHack）扩展一个基类，所有扩展BaseHack的对象都将添加到数组列表中。我编写自己的类并将它们手动添加到arraylist，但我在想人们是否可以制作自己的类并将它们加载到插件目录中，而不是我手动执行。

代码示例：扩展对象库的东西：

```
package crow.ingame.hacks;

import java.awt.AWTException;
import java.awt.MouseInfo;
import java.awt.Robot;
import java.awt.event.InputEvent;
import java.awt.event.KeyEvent;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.util.List;

import net.minecraft.src.Entity;
import net.minecraft.src.EntityLiving;
import net.minecraft.src.EntityPlayer;
import net.minecraft.src.MouseHelper;
import net.minecraft.src.Packet19EntityAction;

import org.lwjgl.input.Keyboard;

import crow.controller.BaseHack;
import crow.controller.BaseHackController;
import crow.main.Crow;

public class BunnyHop extends BaseHack{

    public float clickDelay = 0;
    public BunnyHop() 
    {
        super(true,false,false,"BunnyHop", "-hop", "Auto Hops for pvping", 0xFF75ffaf , Keyboard.KEY_J,Keyboard.KEY_J);
    }

    @Override
    public void onGameTick()
    {
        if(enabled)
        {
            if(Crow.mc.inGameHasFocus && Crow.mc.theWorld != null && !(BaseHackController.getBaseByCMD("-nofall").enabled))
            {
                Robot robot;
                try {
                    robot = new Robot();
                    robot.keyPress(KeyEvent.VK_SPACE);
                } catch (AWTException e)     {
                    e.printStackTrace();
                }
            }
        }
    }

    @Override
    public void onDisable()
    {
        Robot robot;
        try {
            robot = new Robot();
            robot.keyPress(KeyEvent.VK_SPACE);
            robot.keyRelease(KeyEvent.VK_SPACE);
        } catch (AWTException e)     {
            e.printStackTrace();
        }
    }

} 
```

我如何添加黑客：

```
public static void AddHacks()
{
    //Hacks
    Fly fly = new Fly();
    Sprint sprint = new Sprint();
    Aimbot aimbot = new Aimbot();
    KillAura killaura = new KillAura();
    AutoBlock autoblock = new AutoBlock();
    NoFall nofall = new NoFall();
    Freecam freecam = new Freecam();
    Xray xray = new Xray();
    Step step = new Step();
    FullBright fullbright = new FullBright();
    BunnyHop hop = new BunnyHop();
    base.add(hop);
    base.add(fullbright);
    base.add(step);
    base.add(xray);
    base.add(freecam);
    base.add(nofall);       
    base.add(autoblock);
    base.add(aimbot);
    base.add(sprint);
    base.add(killaura);
    base.add(fly);
    //CMD
    Friends friends = new Friends();
    CMDController cmdcontroller = new CMDController();
    crow.ingame.cmd.Settings settings = new crow.ingame.cmd.Settings();
    base.add(settings);
    base.add(cmdcontroller);
    base.add(friends);
} 
```

有人可以告诉我如何加载像我的兔子跳这样的类，然后将其添加到数组列表中吗？谢谢！<3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T07:23:04.240

如果我正确理解您的问题，您希望创建各种类的实例而不将类名硬编码到您的源代码中。 [这可以通过反射来完成](http://docs.oracle.com/javase/tutorial/reflect/index.html)，如下所示：

```
String className = "crow.ingame.hacks.BunnyHop";

try {
    Class myClass = Class.forName(className);
    BaseHack object = (BaseHack)myClass.getConstructor().newInstance();
    base.add(object);
} catch (Exception e) {
    e.printStackTrace();
    //TODO - Proper Exception handling
} 
```

只要包含`.class`您尝试加载的类的文件的文件夹在您的类路径中，这将起作用；`.java`如果只将文件放在文件夹中，这将不起作用。换句话说，确保将`plunins`文件夹添加到 Classpath。

# arrays - 如何从引用数组中访问 Perl 数组中的元素

> ID：13043960
> 
> 赞同：3
> 
> 时间：2012-10-24T06:29:04.740
> 
> 标签：arrays, perl, reference

我有以下 Perl 代码：

```
package CustomerCredit;
#!/usr/local/bin/perl
use 5.010;
use strict;

my $TransRef = @_; # This code comes from a sub within the package.
my ($Loop, $TransArrRef, $TransID);
for ($Loop = 0; $Loop < $$#TransRef; $Loop++)
{
   $TransArrRef = $$TransRef[$Loop]; # Gets a ref to an array.
   $TransID = $$TransArrRef[0];  # Try to get the first value in the array.
   # The above line generates a compile time syntax error.
   ...
} 
```

$TransRef 是对数组引用的数组的引用。我正在尝试处理 $TransRef 指向的数组中的每个元素。$TransArrRef 应该获得对数组的引用。我想将该数组中的第一个值分配给 $TransID。但是，此语句会产生编译语法错误。

我一定是做错了什么，但不知道是什么。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T06:38:23.013

语法错误来自`$$#TransRef`which should be `$#$TransRef`。通过放错位置，`#`您不小心注释掉了剩下的行：

```
for ($Loop = 0; $Loop <= $$
{
   $TransArrRef = $$TransRef[$Loop];
   ...
} 
```

`$$`可以，`strict`因为它为您提供了进程 ID，使编译器进一步失败。

此外，`$#$TransRef`为您提供数组中的最后一个元素，因此您需要`<=`而不仅仅是`<`. 或者使用这个 Perl 风格的循环：

```
for my $loop (0 .. $#$TransRef) {
    $TransID = $TransRef->[$loop]->[0];
    #   ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T06:42:13.713

```
my $arrays_ref = [ [1,2], [3,4] ];

for my $array_ref (@$arrays_ref) {

    printf "%s\n", $array_ref->[0];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-05T15:42:36.093

您也可以使用`foreach`：

```
my @array = ('val1', 'val2', 'val3') ;
my $array_ref = \@array ;

print "array size is $#{$array_ref} \n" ;

foreach $elem (@$array_ref) {
   print "$elem \n"
} 
```

输出：

```
array size is 2 
val1 
val2 
val3 
```

# php - 不一致的strtotime

> ID：13043961
> 
> 赞同：-1
> 
> 时间：2012-10-24T06:29:11.427
> 
> 标签：php

我不明白为什么会这样

```
echo date('l F y',strtotime('next Tuesday',time())) . "\n";
echo date('l F y',strtotime('next Wednesday',time())) . "\n";
echo date('l F y',strtotime('next Thursday',time())) . "\n";
echo date('l F y',strtotime('next Friday',time())) . "\n"; 
```

给我

```
Tuesday October 12
Wednesday October 12
Thursday October 12
Friday October 12 
```

为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-24T06:32:10.440

您要求它输出星期几，然后是月份，然后是年份的最后两位数字，这就是它正在做的事情。

[在此处](http://php.net/manual/en/function.date.php)查看日期格式字符列表及其含义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T06:35:01.967

正如@jrdn 所说，这`y`是一年，所以你得到下周二的年份等。

对于日期使用这个：

```
echo date('l F d',strtotime('next Tuesday',time())) . "\n";
echo date('l F d',strtotime('next Wednesday',time())) . "\n";
echo date('l F d',strtotime('next Thursday',time())) . "\n";
echo date('l F d',strtotime('next Friday',time())) . "\n"; 
```

输出：

```
Tuesday October 30
Wednesday October 31
Thursday October 25
Friday October 26 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T06:38:11.793

我想如果你添加 d 格式会更清楚

```
echo date('d l F y',strtotime('next Tuesday',time())) . "\n";
echo date('d l F y',strtotime('next Wednesday',time())) . "\n";
echo date('d l F y',strtotime('next Thursday',time())) . "\n";
echo date('d l F y',strtotime('next Friday',time())) . "\n"; 
```

将 o/p

```
30 Tuesday October 12 // next tuesday date since this week tuesday has already passed
31 Wednesday October 12 // next wed date since this week wed has already passed
25 Thursday October 12 // next thur date since this week thur is yet to pass
26 Friday October 12 // next fri date since this week fri is yet to pass 
```

阅读更多关于[date()](http://php.net/manual/en/function.date.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T06:41:17.933

看一下这个？

```
<?php
$nexTuesday = date('l F y',strtotime('next Tuesday',time())) . "\n";
$nextWednesday = date('l F y',strtotime('next Wednesday',time())) . "\n";
$nextThursday = date('l F y',strtotime('next Thursday',time())) . "\n";
$nextFriday = date('l F y',strtotime('next Friday',time())) . "\n";

//Lets make date to time

$nexTuesday = strtotime($nexTuesday);
$nextWednesday = strtotime($nextWednesday);
$nextThursday = strtotime($nextThursday);
$nextFriday = strtotime($nextFriday);

//If you have need for this, then echo the timestamp as 'l F y' like this:

echo date('l F y',$nextFriday);
?> 
```

# c++ - 如何使用链表节点修改另一个链表

> ID：13043966
> 
> 赞同：1
> 
> 时间：2012-10-24T06:29:36.060
> 
> 标签：c++, stl, linked-list, implementation

我正在尝试使用链表实现来修改另一个链表。这是我正在尝试做的一个例子。

```
list<int>list1;
list<int>list2;

list1.push_back( 1 );   // < --- want to modify this list
list1.push_back( 2 );

list2.push_back( 1 );   // with this list 
```

简而言之，我想使用 list2 作为一种变量来修改 list1。我做了一些研究，好像我无法像数组一样访问列表的节点。是否有一个容器可以让我轻松地添加和删除节点并与其他容器进行比较和修改？我在想集合可能是一种选择，但似乎我也无法访问集合中的值。任何帮助或证据都会很棒。提前致谢。

编辑：：：

我正在寻找创建一个数独求解器。我将所有 81 位数字（空白和给定）放入“链表”中。我现在希望从代表 1 个单元格的每个“列表”中删除可能的候选人。

例如listlist1；列表列表2；

```
list1.push_back( 1 );  
list1.push_back( 2 );

list2.push_back( 1 ); 
```

我现在想像这样使用 list2

```
list1.remove( list2(?) );  // < -- this obviously isn't possible due to how nodes are stored. 
```

我希望这能澄清我的问题。这是我用来解决简单数独的方法，稍后我将实施蛮力技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T06:31:42.873

我不知道你用另一个修改容器的想法是什么，也许你的意思是参考。将其用作参考变量：

```
list<int> list1;
list<int>& list2 = list1;

list2.push_back(1); //<--- modifies list1 
```

或使用指针：

```
list<int> list1;
list<int>* list2 = &list1;

list2->push_back(1); //<--- modifies list1 
```

[在此处](http://www.cprogramming.com/tutorial/lesson6.html)阅读有关指针的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T06:53:17.423

这是一种方式，毫无疑问还有其他方式。这确实取决于您的具体情况。例如，如果您的列表已排序，则有比这更好的方法。

```
list<int> list1 = ...;
list<int> list2 = ...;
for (list<int>::const_iterator i = list2.begin(); i != list2.end(); ++i)
  list1.remove(*i); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T06:56:13.580

由于您的列表不会太长，我认为使用`list::remove_if()`是您最好的选择。

使用辅助功能：

```
bool IsInList2(int el)
{
  return std::find(list2.begin(), list2.end(), el) != list2.end();
} 
```

并在您的代码中使用它：

```
list1.remove_if(&IsInList2); 
```

# c# - 点簇算法

> ID：13043967
> 
> 赞同：2
> 
> 时间：2012-10-24T06:29:44.683
> 
> 标签：c#, algorithm, map

是否有任何 C# 库可用于计算点集群（云？）？

我得到了一张包含 5-50k 点的地图，需要根据缩放级别对点进行聚类——但我还需要一种方法来过滤掉在计算聚类之前不可见的点。

我的想法是计算 N 缩放级别/地图比例的所有集群并将它们拆分为网格。然后地图发送一个 ajax 请求，说“我在坐标，这个范围和地图比例尺” - 服务器查询缓存中与客户端请求匹配的所有网格项目并发送响应。

这是一个可行的想法，矫枉过正，还是只是“远离正常做法”的那些想法之一？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:22:58.897

It seems what you are trying to do here is two things: (1) find the relevant points from a given point given a zoom level, and (2) not include points that are too close together given a zoom level.

If this is the case, then (1) is trivial: you compute the distance to each point from the observation point. Only points under the threshold distance are included. The threshold distance is a function of the zoom level.

To do (2) you want to avoid computing the distance of each point to each other point because that is computationally intensive. What you do is a Delaunay triangulation of the points discovered in step (1). Then, compute the area of each triangle. Then, for each point add up the areas of the triangles for which it is a vertex. Sort the points by this value (the total triangular area--TTA). Remove all points which have a TTA below a zoom-level-dependent threshold. You can discover the best thresholds to use by experimentation.

# ruby-on-rails - 怎么叫沉默！在 dalli cache_store 上？

> ID：13043968
> 
> 赞同：4
> 
> 时间：2012-10-24T06:29:47.287
> 
> 标签：ruby-on-rails, ruby, dalli

我正在尝试在开发模式下开发带有缓存的应用程序，但是 development.log 垃圾邮件主要是缓存日志。我正在使用 dalli，我知道，dalli 有沉默！方法（https://github.com/mperham/dalli/commit/892020fbc73613ccc84412ce04b85b7fda645e63），但是如何使用这种方法呢？

我找到了一些旧指令，建议在其中调用 on `config.cache_store`，但它是一个符号，并且没有此方法：

```
config.cache_store = :dalli_store
config.cache_store.silence! 
```

抛出异常。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-26T09:43:40.503

`#silence!`试着打电话`Rails.cache`

# c# - 如何确定哪个文本框被聚焦并向其中添加文本............？

> ID：13043971
> 
> 赞同：2
> 
> 时间：2012-10-24T06:30:04.073
> 
> 标签：c#, winforms

我正在用 C# 做一个复杂的计算器。第一个文本框接受实部，第二个接受虚部。我也希望能够使用鼠标输入值。因此，如果我单击 button1，它会将“1”连接到焦点所在的文本框中的值。我无法确定哪个文本框被聚焦。我尝试了一些人发布的东西，例如使用 GotFocus，但没有奏效..

```
 private Control focusedControl;

    private void TextBox_GotFocus(object sender, EventArgs e)
    {
        focusedControl = (Control)sender;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        if (focusedControl != null)
        {
            focusedControl.Focus();
            SendKeys.Send("1"); 

        }

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-22T22:04:10.213

```
 if ((txtBox as Control).Focused)
        {

        } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-24T06:37:04.927

```
private TextBox focusedControl;

private void TextBox_GotFocus(object sender, EventArgs e)
{
    focusedControl = (TextBox)sender;
}

private void button1_Click(object sender, EventArgs e)
{
    if (focusedControl != null)
    {   

        focusedControl.Text  += "1";
    }

} 
```

您只需使用 TextBox_GotFocus 作为两个文本框的 EventHandler。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T06:41:30.670

```
public partial class Form1 : Form 
{ 
    private TextBox focusedTextbox = null; 

    public Form1() 
    { 
        InitializeComponent(); 
        foreach (TextBox tb in this.Controls.OfType<TextBox>()) 
        { 
            tb.Enter += textBox_Enter; 
        } 
    } 

    void textBox_Enter(object sender, EventArgs e) 
    { 
        focusedTextbox = (TextBox)sender; 
    } 

    private void button1_Click(object sender, EventArgs e) 
    { 
        if (focusedTextbox != null) 
        { 
            // put something in textbox 

        } 
    } 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-24T06:40:49.293

我在网上找到了这段代码，告诉我你的想法：）

```
 private TextBox findFocused(Control parent)
    {
        foreach (Control ctl in parent.Controls)
        {
            if (ctl.HasChildren == true)
                return findFocused(ctl);
            else if (ctl is TextBox && ctl.Focused)
                return ctl as TextBox;
        }

        return null;
    }
// usage: if starting with the form  
TextBox txt = findFocused(this); 
```

祝你好运！

# c# - 使用 itextsharp 将数百个图像添加到 pdf

> ID：13043973
> 
> 赞同：0
> 
> 时间：2012-10-24T06:30:12.180
> 
> 标签：c#, itextsharp

如何使用 itextsharp 将数百个图像（其实际大小未按比例缩小/压缩）添加到 PDF。我想以某种表格格式添加这些内容，并修复每个 pdf 页面的图像数量。所有图像的大小相同。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T06:43:56.833

您可以尝试使用此代码在 pdf 中添加图像

```
Document doc = new Document(PageSize.A4, 10, 10, 30, 30);
MemoryStream PDFData = new MemoryStream();
PdfWriter writer = PdfWriter.GetInstance(doc, PDFData);
doc.Open();

PdfPTable table = new PdfPTable(1);
table.WidthPercentage = 100F;

Image imgLogo = Image.GetInstance(<image_path>);
PdfPCell cell1 = new PdfPCell { BorderWidth = 0F,  Padding = 3 };
cell1.AddElement(imgLogo);
table.AddCell(cell1);

//Add your more images.

doc.Add(table );
doc.Close();

writer.Close(); 
```

# linux - 如何在vim的ex模式下从缓冲区粘贴？

> ID：13043986
> 
> 赞同：8
> 
> 时间：2012-10-24T06:32:04.123
> 
> 标签：linux, vim, buffer

我在从文件复制某些文本然后将其复制到新的拆分窗口时遇到问题。
3yy|新|p

在命令模式下它的工作

就像我按下

复制其工作后拆分窗口中的“p”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T07:15:51.247

我了解您想要：

1.  在当前缓冲区中拉出当前行和下面的两行，
2.  在新的水平拆分中打开一个空缓冲区，然后
3.  将这三行粘贴到空缓冲区中。

那是对的吗？

我不明白为什么你想在 Ex 模式下做它，而它在正常模式下很容易（并且工作）：

```
3yy
:new<cr>
p 
```

我认为您混淆了*ex*模式，可通过`Q`和*命令*模式访问，可通过`:`. 您可能还会混淆`:p[rint]`命令和`:pu[t]`命令。

*在正常*模式下执行以下操作：

```
:.,+2y|new|put! 
```

知道您也可以将这三行直接写入文件可能会有所帮助：

```
:.,+2w filename 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T06:39:16.460

您可以使用以下方法之一从 Vim 的剪贴板中复制：

`"``+``p`

`"``*``p`

`SHIFT``INSERT`

您使用哪一种取决于您的环境。

如果你使用 gVim 或 MacVim，你会想要`"+p`

如果你从命令行使用 Vim，你会想要`"*p`

如果你处于插入模式或前模式（我认为）你使用`SHIFT``INSERT`

通过插入，我的意思是通过`HOME`,`PAGE UP`和`DELETE`

解释：

*   `"`意味着你要指定一个*寄存器*
*   有 26 个自定义寄存器 - 每个字母 1 个
*   还有很多其他的寄存器（[见这个](https://stackoverflow.com/q/3997078/778118)）
*   `+`or`"`指的是*未命名的缓冲区*，它代表系统剪贴板
*   `p`是普通的 put 命令

有关缓冲区的更多信息：

如果需要，您可以将不同的文本存储在不同的缓冲区中。

要将 3 行拉到名为*x*的缓冲区，请使用以下命令：

`"x3yy`

要将名为*y*的缓冲区的内容粘贴到光标上方：

`"yP`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-22T07:53:30.837

**p**只是 vi 命令，所以它应该是**pu** in ex 而不是。或者您可以使用双引号**"p**或**"np**。**n**是缓冲区寄存器中的数字，**“2p**表示你所做的第二个最旧的 yank。

# raphael - 拉斐尔饼图图例字体

> ID：13043989
> 
> 赞同：0
> 
> 时间：2012-10-24T06:32:20.830
> 
> 标签：raphael, font-size, legend

我的饼图中的图例太小了......我怎样才能让它的文字变大。以下是代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<html lang="en">
<head>
  <meta charset="utf-8">
  <script src="raphael-min.js"></script>
  <script src="g.raphael-min.js"></script>
  <script src="g.pie-min.js"></script>
  <script>
    window.onload = function () {
      var r = Raphael("holder");
      pie = r.piechart(320, 240, 100, [10,20,0,0],
            {
              legend: ["%% Unknown","%% Recognisable","%% Familiar","%% Known"],
              colors: ["#FF0000","#FFB2B2","#CCFFCC","#00E600"], 
              legendpos: "west"
            });
    };
  </script>
</head>
<body>
  <div id="holder"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:46:52.830

如果我没记错的话，g.Raphael 中的图例不是那么可配置的。如果您想对其进行更多控制，则可能需要自己构建图例。有关如何执行此操作的示例，请参阅[github 上的此要点。](https://gist.github.com/451637)

当你有你的图例时，控制字体大小如下：

```
t = paper.text(x, y, 'Data set 1');
t.attr({ 'font-size': 24 }); 
```

# msbuild - System.Web.AspNetHostingPermission 巡航控制 Build

> ID：13043996
> 
> 赞同：0
> 
> 时间：2012-10-24T06:32:43.417
> 
> 标签：msbuild, cruisecontrol.net

当我尝试从巡航控制构建 VS 解决方案文件时，我收到以下错误。

**错误 ASPPARSE：请求“System.Web.AspNetHostingPermission、System、Version=2.0.0.0、Culture=neutral、PublicKeyToken=b77a5c561934e089”类型的权限失败**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:40:07.030

[http://social.msdn.microsoft.com/Forums/en-US/msbuild/thread/4d5fb0b0-6530-4c36-8acd-b897f0c3b969](http://social.msdn.microsoft.com/Forums/en-US/msbuild/thread/4d5fb0b0-6530-4c36-8acd-b897f0c3b969)

看起来这是共享目录的权限问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-08T06:44:01.407

微软的官方回答是使用代码访问安全策略工具 (Caspol.exe) 配置安全策略。不幸的是，这个命令行实用程序对我不起作用。但是，我不排除用户错误导致失败的原因。

最终，我通过运行 .Net Framework Utility 解决了我的问题，并将我对 Web 服务器的信任设置为 FULL。

要更改本地计算机的 .NET 安全设置，请转到

开始 > 控制面板 > 管理工具 > Microsoft .NET Framework 2.0 配置

完全展开我的电脑并选择运行时安全策略。在右侧，选择调整区域安全。保留默认选项（对此计算机进行更改）并点击下一步。选择本地 Intranet 并将信任级别更改为完全信任。然后选择下一步，然后选择完成。重新启动 Visual Studio，您应该已准备就绪。

# html - 苹果触摸图标不起作用

> ID：13043997
> 
> 赞同：2
> 
> 时间：2012-10-24T06:32:46.960
> 
> 标签：html, apple-touch-icon

我正在编写一个 html5 游戏，并试图让一个苹果触摸图标工作。我正在运行 ios5 的非视网膜 iPhone 4S 上进行测试。我的 html 文件的第一部分是：

```
<head>

<title>My Game</title>

<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" />

<meta name="viewport" content="user-scalable=0">

<meta name="apple-mobile-web-app-capable" content="yes">

<link rel="apple-touch-icon" href="img/apple-touch-icon.png"/> 
```

我也在使用[脚本](http://cubiq.org/add-to-home-screen)来提示用户添加触摸图标；这个脚本显示了触摸图标的预览，它找到了没有问题的图标。此外，该图标是[public](http://tapoutdemo.atwebpages.com/img/apple-touch-icon.png)，不受密码保护。

当我将快捷方式添加到主屏幕时，我得到了简单的屏幕截图图标。我已尝试清除我的历史记录和缓存。难道我做错了什么？那些无缓存元标记是否会干扰图标？（它们在那里，所以我在开发时不必担心缓存问题。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T16:34:06.343

问题归结为我的托管服务提供商不允许热链接图像。所以我在 imgur.com 上建立了一个帐户，在那里托管了触摸图标，并且它可以工作。我很高兴看到外部托管的触摸图标有效。

# bash - sed：替换文本块

> ID：13043998
> 
> 赞同：4
> 
> 时间：2012-10-24T06:32:50.597
> 
> 标签：bash, unix, replace, sed, awk

我有一堆文件，从一段代码开始，我正试图用另一个替换。

代替：

```
<?php
$r = session_start();
(more lines) 
```

和：

```
<?php
header("Location: index.php");
(more lines of code) 
```

所以我试图匹配块，`sed 's/<?php\n$r = session_start();/<?php\nheader...`但它不起作用。

对于这里发生的事情以及如何实现这一点，我将不胜感激。我正在考虑用 python 来代替。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T07:25:05.080

这可能对您有用（GNU sed）：

```
sed -i '1i\
This is a\
new block of\
code
1,/$r = session_start();/d' file 
```

或者，如果您更喜欢将新代码放在文件中：

```
sed -i '1r replacement_code_file
1,/$r = session_start();/d' file 
```

全部在一条线上：

```
sed -i -e '1r replacement_code_file' -e '1,/$r = session_start();/d' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T06:56:40.417

一种使用方式`sed`：

```
cat block.txt <(sed '1,/$r = session_start();/d' file.txt) > newfile.txt 
```

只需将要添加到每个文件的文本块添加到`block.txt`. 该`sed`组件只是删除第一行和匹配模式之间的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T07:00:17.470

sed，稍微调整了您的解决方案：

```
sed  '/<?php/{N;s/\n$r = session_start();/\nheader(\"Location: index.php\");/}' file 
```