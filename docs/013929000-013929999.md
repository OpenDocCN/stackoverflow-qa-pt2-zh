# StackOverflow 问答 13929000-13929999

# c++ - 无法执行 Netbeans 创建的 .o 文件

> ID：13929000
> 
> 赞同：0
> 
> 时间：2012-12-18T08:28:17.250
> 
> 标签：c++, netbeans, remote-debugging, cppunit

我在本地计算机上有一个项目，我想在服务器（Debian）上运行/调试 cppunit 测试。我用 Netbeans 创建了 .o 文件并将权限设置为可执行。

```
drwxr-xr-x 2 myName myGroup   4096 18\. Dec 08:40 .
drwxr-xr-x 3 myName myGroup   4096 18\. Dec 08:40 ..
-rwxr-xr-x 1 myName myGroup 393488 18\. Dec 08:40 SisyTestData.o
-rwxr-xr-x 1 myName myGroup   3127 18\. Dec 08:40 SisyTestData.o.d
-rwxr-xr-x 1 myName myGroup  30016 18\. Dec 08:40 SisyTestDataRunner.o
-rwxr-xr-x 1 myName myGroup    173 18\. Dec 08:40 SisyTestDataRunner.o.d 
```

如果我尝试从它所在的目录运行 ./SisyTestDataRunner 我得到

```
bash: ./SisyTestDataRunner: Datei oder Verzeichnis nicht gefunden 
```

（表示：未找到文件或目录）

如果我尝试运行 ./SisyTestDataRunner.o 我得到

```
bash: ./SisyTestDataRunner.o: Kann die Datei nicht ausführen. 
```

（意思是：不能执行文件）

SisyTestDataRunner 如下所示：

```
#include <cppunit/BriefTestProgressListener.h>
#include <cppunit/CompilerOutputter.h>
#include <cppunit/extensions/TestFactoryRegistry.h>
#include <cppunit/TestResult.h>
#include <cppunit/TestResultCollector.h>
#include <cppunit/TestRunner.h>

int main() {
    // Create the event manager and test controller
    CPPUNIT_NS::TestResult controller;

    // Add a listener that colllects test result
    CPPUNIT_NS::TestResultCollector result;
    controller.addListener(&result);

    // Add a listener that print dots as test run.
    CPPUNIT_NS::BriefTestProgressListener progress;
    controller.addListener(&progress);

    // Add the top suite to the test runner
    CPPUNIT_NS::TestRunner runner;
    runner.addTest(CPPUNIT_NS::TestFactoryRegistry::getRegistry().makeTest());
    runner.run(controller);

    // Print test in a compiler compatible format.
    CPPUNIT_NS::CompilerOutputter outputter(&result, CPPUNIT_NS::stdCOut());
    outputter.write();

    return result.wasSuccessful() ? 0 : 1;
} 
```

文件 SisyTestData 包含一个测试用例，当我在本地计算机上启动它时它可以工作（但它在服务器上运行）。

通常不可能从命令行运行由 netbeans 创建的文件吗？我必须直接在服务器上编译和链接吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T08:32:30.067

您不运行目标文件。链接器使用目标文件来创建实际的可执行文件。

从 C++（或 C）中的一组源文件创建程序需要几个步骤：

1.  首先，当前源文件通过预处理器。这是处理诸如`#include`.
2.  然后实际的编译器接收预处理的源代码，并创建一个目标文件（例如`SisyTestData.o`）。
3.  链接器使用所有目标文件和可能的外部库来创建最终的可执行程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T19:29:54.693

*行！逐步进行。*

*   1）由于其他审阅者已经正确评论，目标文件由编译器生成，以便链接器可以关联代码库和生成的代码，此外还可以执行更多操作。

为此，我认为您可以在这种模式下直接链接远程机器中的目标文件：

```
 $ g++ -o mybin myobj.o 
```

*请注意，链接器应该能够找到对项目中包含的库的所有引用！*

*   2) 通常在 NetbeansIDE 中的标准 C++ 项目中，构建项目后，您可以在文件夹“dist”中找到可执行文件示例“dist/Debug/GNU-Linux-x86” 该文件已准备好在本地和远程运行基于linux的机器。

*   3）您的可执行文件可能需要一些系统库。正确引用了本地计算机中的此库，但未正确引用远程计算机

解决这个问题可以帮助你的命令，

```
 $ ldd mybin 
```

*您可以在此屏幕截图中查看简化的整个过程：*

![您可以在此屏幕截图中查看简化的整个过程：](../Images/5ba36afb8abb7a09ff24d50b39785b63.png)

*   4) 我想澄清另一个重点，NetBeans IDE 可以配置为使用任何编译器和任何设置。目前，Linux 下最常见的 NetbeansIDE 版本默认配置为使用安装在您机器上的 GCC，这清楚地表明从 NetbeansIDE 生成的目标文件与您直接从控制台编译生成的目标文件相同。

*NetBeans 中的编译步骤：*

![NetBeans 中的编译步骤：](../Images/5fcae14bcae8daf6ea6427e6dea7cc41.png)

# c - C：替代从分配的变量中打印字符串？

> ID：13929001
> 
> 赞同：0
> 
> 时间：2012-12-18T08:28:20.403
> 
> 标签：c, string, variables, printf, variable-assignment

在下面的代码中，我只想`printf`在程序末尾使用一个来打印 12 小时时间，但我希望它打印 am 或 pm，具体取决于存储在变量 中的哪个`am_pm`。

我以为我读到我可以将字符存储在 int （或浮点数？）中，但我不确定我是否记得正确。当然，这似乎是非法的，因为我遇到了类型错误。

我还读到我可以使用数组来做到这一点，但我还没有了解数组，我想知道是否有更简单的替代方法来解决这个问题。

我知道另一种方法是简单地使用两个`printf`'s，一个我简单地输入“am”，一个我简单地在字符串末尾输入“pm”，但这对我来说似乎是多余的。

```
#include <stdio.h>

int main(void) {

int hour, minutes, am_pm;

printf("Enter a 24-hour time:"); scanf("%d:%d", &hour, &minutes);
if (hour > 12) 
    {
    hour = (hour - 12); 
    am_pm = "pm"; // ERROR 
    }
else
    am_pm = "am";  // ERROR

printf("Equivalent 12-hour time: %.2d:%.2d%d", hour, minutes, am_pm);

} // end main 
```

我怎样才能做类似于我上面尝试做的事情？我知道在 python 中我会简单地做一些事情，比如 print("equivalent time is:" + hour + minutes + am_pm)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T08:33:18.150

您*可以*将单个字符存储在 int 中。int 的值是字符的 ASCII 码。每个 int 只有一个字符。这可能是你（错误）记得的。

正如其他人所写，将 am_pm 声明为 a `char *`，或者更好的是 a `const char *`。告诉编译器指向的`const`字符串是只读的。

另一种选择是将 am_pm 中的 'a' 或 'p' 存储为 int，

```
am_pm = 'p'; // Note single quotes for character (double quotes for strings) 
```

然后写

```
printf("Equivalent 12-hour time: %.2d:%.2d%cm", hour, minutes, am_pm); 
```

%c means interpret am_pm as a character. This takes advantage of the fact that only the first letter of "am"/"pm" changes.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T08:30:43.003

您不能将字符串文字存储在 int 中！

声明`am_pm`为：

```
char *am_pm; 
```

并使用打印`%s`。

```
printf("Equivalent 12-hour time: %.2d:%.2d%s", hour, minutes, am_pm); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T08:34:45.870

First of all am_pm is declared as int and a few lines below you try to assign string to it. This is illegal. The other answers show how to correct this. I'd add another solution:

```
#include <stdio.h>

int main(void) {

int hour, minutes;
int is_pm = 0;

printf("Enter a 24-hour time:"); scanf("%d:%d", &hour, &minutes);
if (hour > 12) 
{
    hour = (hour - 12); 
    is_pm = 1;
}

printf("Equivalent 12-hour time: %.2d:%.2d%s", hour, minutes, (is_pm)?"PM":"AM");

} // end main 
```

If this seems strange to you - read about 'question mark operator'.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T08:30:43.887

使用`const char *`for `am_pm`，例如更改：

```
int hour, minutes, am_pm;

... 

printf("Equivalent 12-hour time: %.2d:%.2d%d", hour, minutes, am_pm); 
```

到：

```
int hour, minutes;
const char * am_pm;

...

printf("Equivalent 12-hour time: %.2d:%.2d %s", hour, minutes, am_pm); 
```

# php - fwrite() 和特殊字符

> ID：13929007
> 
> 赞同：2
> 
> 时间：2012-12-18T08:28:46.050
> 
> 标签：php

这是在我的网站上上传带有“var$”内容的“file.txt”的 URL：

```
http://www.mywebsite.com/fwrite.php?stringData=var$&myFile=file.txt 
```

“fwrite.php”的内容是：

```
<?php
$myFile = $_GET['myFile'];
$fh = fopen($myFile, 'w') or die("can't open file");
$stringData = $_GET['stringData'];
fwrite($fh, $stringData);
fclose($fh);
?> 
```

它工作得很好，但如果“var$”内容包含特殊字符（例如“+”），“file.txt”将有一个空格而不是正确的字符。

我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T08:30:19.440

尝试编码

```
mb_convert_encoding($file, 'HTML-ENTITIES', "UTF-8"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T08:39:01.610

**漏洞警察**

```
$myFile = $_GET['myFile'];
$fh = fopen($myFile, 'w') 
```

抓住它！这是危险代码；即使权限通常不会造成太大的损害，您至少应该清理变量（以免`../../../etc/passwd`传递路径如：

```
if (isset($_GET['myFile'])) {
    $fileName = basename($_GET['myFile']); // strip off all paths
    $fh = fopen($fileName, 'w') or die('...');
} 
```

**的编码`+`**

如果文字`+`出现在 URL 的 QS 部分，它将根据标准[RFC 行为](http://www.faqs.org/rfcs/rfc3986.html)转换为空格。

如果要使用 的值，`hello+world`则必须将其编码为：

```
stringData=hello%2Bworld 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T22:58:29.170

谢谢你们，我已经解决了使用 %2B 而不是“+”符号。

这对修复漏洞是否正确？

```
<?php
if (isset($_GET['myFile'])) {
    $myFile = basename($_GET['myFile']);
    $fh = fopen($myFile, 'w') or die("can't open file");
}
$stringData = $_GET['stringData'];
fwrite($fh, $stringData);
fclose($fh);
?> 
```

# c# - 成就系统

> ID：13929012
> 
> 赞同：1
> 
> 时间：2012-12-18T08:29:08.317
> 
> 标签：c#, asp.net, vb.net

我正在编写一个归档系统，如下所示：

IAchievement - 所有成就必须实现的接口

AchievementManager - 使用用户 ID 检查所有成就的类

我的想法是在 ArchivementManager 上有一个共享功能，因为我可以执行类似的操作

```
AchievementManager.checkUser(userId) 
```

或者

```
AchievementManager.check(userId, achievementId) 
```

无论如何，AchievementManager 应该为每个 IAchievement 实现调用一个函数检查。

因为我检查的每个成就都有一个实例没有任何意义，所以我希望能够将检查方法声明为共享/静态。所以在AchievementManager里面我可以调用

```
AchivementXXX.check(userId) 
```

但是我不能在我的界面中声明共享函数。

有什么解决方法吗？实施成就系统是一种糟糕的方法吗？

编辑：

这不是游戏，而是 ASP.NET 中的网站

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:37:06.957

如果您的方法是定义一个接口，那么让AchievementManager 持有每个相关成就类型的实例是有意义的。

这也是有道理的，因为人们会期望成就实例需要存在，例如为了跟踪各种游戏状态和监听各种游戏事件，以便他们可以检测到成就已经实现。否则，成就将如何实现他们的 Check 方法？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:41:52.340

您可以在超类成就中实现您的接口，然后将该类声明为 MustInherit。所以每个成就都继承自超类，并且可以覆盖独特的部分。您的检查方法可以设置为不可覆盖，这样没有人可以修改它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T08:46:18.253

因此，从评论开始，您在这里有一些选择..

```
public class AchievementA : AchievementBase
{
  public void GetAchievementForAByUser(int userId)
  {
       base.CheckId(userId);
  }

 }

public class AchievementB : AchievementBase
 {

  }

 public class AchievementManager : IAchievement
{
    protected void CheckId(int userId)
{

} 
```

}

您的接口 IAchievement 将实现可用于每个成就子类的方法协定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T08:58:59.553

还有一种不使用接口和继承的方法：

```
class Achievement {
    private Predicate<UserId> actualCheckUser;

    public bool CheckUser(UserID userId) {
        return actualCheckUser(userId);
    }

    public Achievement(Predicate<UserId> checkUser) {
        if (checkUser == null) {
            throw new ArgumentNullException("checkUser");
        }
        actualCheckUser = checkUser;
    }
} 
```

您调用成就的方法来检查用户是否拥有它。如果将成就表示为*类型*，那么成就的方法就是类型的方法，也就是静态方法。但是你不能在接口中有静态方法。如果您将成就表示为*对象*，那么成就的方法就是一个普通的旧对象的方法。

但是您必须使此方法在成就类的不同实例中表现不同。做到这一点的一种方法确实是`CheckUser`抽象并覆盖它，但是您再次需要为每个成就声明一个单独的类。另一种方法是使用委托——你将它插入你的成就对象，就是这样。在引擎盖下，它也会导致创建一个额外的类。

就我个人而言，我不知道哪种设计更好，但我认为元编程在类型方面比在对象方面更难。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-13T15:24:54.763

我知道这篇文章已经有将近一年的历史了，但是为什么不使用 DI 呢？例子：

```
interface IAchievement {
    void Check(User user);
}

class UserMade200PostsAchievement : IAchievement {

    void Apply(User user) {
            var postCount = _repo.AsQueryable<Post>().Count(x => x.CreatedByUserId == user.Id);
            if (postCount >= 200)
                //apply achievement, insert some data, whatever

    }

} 
```

全部注册：

```
//Note this may not be the exact command, depends on your choice of IoC container
container.RegisterInterfaceImplementers(typeof(IAchievement));

public class AchievementManager {

    //All instances of IAchievement injected
    private IAchievement[] Achievements

    public AchivementManager(IAchievement[] achievements) {
        Achievements = achievements;
    }

    public void Check(User user) {
        foreach(var a in achivements)
            a.Apply(user);
    }

} 
```

这样，当您添加新成就时，它会自动被拾取。

# php - zend 框架 - 验证后确认保存

> ID：13929014
> 
> 赞同：0
> 
> 时间：2012-12-18T08:29:12.763
> 
> 标签：php, validation, zend-framework

我的挑战是构建一个表单，在其中数据在保存之前得到验证，如果验证失败，用户应该确认他是否要保存。

实际例子：

有一个包含 2 个字段的注册表单 - 用户名和 is_manager。该名称不需要验证，但 is_manager 应该使用 Zend_Db_NoRecordExists 进行验证（确保另一个用户不是经理 - is_manager = true），如果另一个用户已经是经理，则应该提示用户确认覆盖经理。

目标数据库表将是用户（名称、用户名、is_manager）。

任何想法都是受欢迎的！谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:37:45.203

您可以对该字段进行 AJAX 检查，当有人更改 is_manager 复选框的状态时。我在这个例子中使用了 JQuery。

在 Zend_Form_Element_Checkbox 上设置：

```
$is_manager->setAttrib('onchange', 'checkValue(this)'); 
```

比你有 JS：

```
<script language = "Javascript">
function checkValue(object){
    var is_manager = $(object).is(':checked') ? 1 : 0;
    jQuery.ajax({
        url: '/default/index/ajax',  //modul/controller/action
        type: 'POST',
        data: {is_manager: is_manager},
        dataType: "json",
        success: function(result){
            if(result.status != 'OK')
                alert(result.message);
        }
    });
}
</script> 
```

在 IndexController 中，ajaxAction() 应该获取请求并发送 JSON 响应：

```
public function ajaxAction(){
    $this->view->layout()->disableLayout();
    $this->_helper->viewRenderer->setNoRender(true);

    $is_manager = $this->_getParam('is_manager');

    // DO THE OTHER STUFF/validation AND LOGIC HERE
    // ... 

    // OR set success message and status = OK
    $results = array(
        'status'  => 'error',
        'message' => 'You will overwriting existing manager!'
    );

    $this->_response->setBody(json_encode($results));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:11:32.217

一种方法——不依赖于 javascript——是有两种形式：

1.  具有相同验证的现有表单。
2.  一个只包含提交按钮的覆盖确认表单。

流程如下：

1.  在第一次输入时，加载标准表格。

2.  在提交表单时，如果验证失败，请检查验证错误。

    2.1 如果唯一的验证错误是经理覆盖，则将他提交的信息存储在会话中，并将他重定向到显示确认表单的操作。

    2.2 如果不是，则重新显示他当前的错误表格。

3.  如果验证成功，则照常写入记录。

4.  在确认表单的操作中，只需确保会话包含您期望的数据。提交时，正常写入记录并清除会话数据。

当然不像客户端脚本辅助方法（如@tasmaniski 所建议的那样）那么巧妙，但至少没有javascript依赖。也许最佳组合是根据上面的默认流程设计您的表单，但是将您的 javascript 编写为渐进式增强，当 javascript 不可用时允许流程优雅地降级到上面。

# javascript - Javascript onclick链接文本更改

> ID：13929016
> 
> 赞同：0
> 
> 时间：2012-12-18T08:29:14.273
> 
> 标签：javascript, text, hyperlink, onclick

我正在开发一个新页面，对于移动版本，我将进行导航切换以隐藏和显示导航。

**HTML 代码：**

```
<div id="toogleNavigation">
    <a onclick="toggle_visibility('nav_header','nav_header_level2');">Navigation Einblenden</a>
</div> 
```

**Javascript代码：**

```
function toggle_visibility(id, id2) {
    var e = document.getElementById(id);
    var f = document.getElementById(id2);
    if(e.style.display == 'block' || 
       e.style.display == 'block' && 
       f.style.display == 'block') {
        e.style.display = 'none';
        f.style.display = 'none';
        document.getElementById('toogleNavigation').innerHTML = "Navigation 1einblenden";
    } else {
        e.style.display = 'block';
        f.style.display = 'block';
        document.getElementById('toogleNavigation').innerHTML = "Navigation 2ausblenden";
    }
} 
```

我试过了：

```
document.getElementById('toogleNavigation').innerHTML = "Navigation 2ausblenden"; 
```

按下链接时更改文本“Navigation Einblenden”中的文本，但这不起作用......有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T08:50:20.197

将 id 从 div 移至 a.

看到它在 jsbin [http://jsbin.com/eqeheb/5/watch中工作](http://jsbin.com/eqeheb/5/watch)

`<div> <a id="toogleNavigation" onclick="toggle_visibility('nav_header','nav_header_level2');">Navigation Einblenden</a> </div>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:52:13.627

像这样进行更改....
***HTML 代码***

```
<div id="toogleNavigation">
    <a id="divInner" onclick="toggle_visibility('nav_header','nav_header_level2');">
        Navigation Einblenden
    </a>
</div> 
```

和 ***JavaScript 代码***

```
function toggle_visibility(id, id2) {
   var e = document.getElementById(id);
   var f = document.getElementById(id2);
   if(e.style.display == 'block' ||
      ( e.style.display == 'block' &&            
      f.style.display == 'block' ) ) {
        e.style.display = 'none';
        f.style.display = 'none';
        document.getElementById('divInner').innerHTML = "Navigation  1einblenden";
      } 
      else {
        e.style.display = 'block';
        f.style.display = 'block';
        document.getElementById('divInner').innerHTML = "Navigation 2ausblenden";
      }
} 
```

这将为您工作，因为**它的工作**

# javascript - .match 特定模式

> ID：13929020
> 
> 赞同：0
> 
> 时间：2012-12-18T08:29:34.773
> 
> 标签：javascript, regex, match

我正在尝试使用`.match()`方法匹配特定模式，但我有点困惑。我有一个看起来像这样的字符串。

```
SomeError on example.com/register/
[u'Some Error Message Here, That we want to parse'].

Some more text here
Some more text here 
```

我正在尝试`Some Error Message Here, That we want to parse`从上面的字符串中解析出文本。`regex`我正在使用的电流是：

```
response.match(/.*[u'(.*).*']/) 
```

这给了我：

```
[u'Some Error Message Here, That we want to parse.' 
```

但我也想消除`[u'`和`'`部分，以便结果看起来像这样：

```
Some Error Message Here, That we want to parse 
```

请让我知道我做错了什么。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T08:43:50.200

实际上你的正则表达式是正确的，除了`[ ]`大括号应该被转义。

该`match`函数为您提供了一系列匹配项，您只需要找到正确的匹配项即可：

```
var str="SomeError on example.com/register/\n[u'Some Error Message Here, That we want to parse'].\n\nSome more text here\nSome more text here";

var n = str.match(/.*\[u'(.*).*'\]/);

​alert(n[1]);​ // Prints "Some Error Message Here, That we want to parse" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T08:39:38.947

不要忘记转义括号 (`[`和`]`) ：

```
response.match(/.*\[u'(.*).*'\]/) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T08:43:53.070

首先，您需要转义方括号。

`match`返回一个匹配数组，因此，用圆括号括起来的值将位于该数组的索引 1 处。

```
response.match(/.*\[u'(.*)'\]/)[1] 
```

或者你可以试试

```
/.*\[u'(.*)'\]/.exec(response)[1] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T08:47:38.700

这应该做。顺便说一句，你的正则表达式是错误的......（你忘了逃避`[`and`]`

```
<html>
    <body>

        <script type="text/javascript">
            var response= "[u'Some Error Message Here, That we want to parse'].";

            if(response.match(/^.*\[u'.*'\].*$/)){
                var message = response.replace(/^.*\[u'/, '');
                var message = message.replace(/\'].*$/, '');
                document.write(message);
            } 
            </script>
    </body>
</html> 
```

# c# - 无法加载文件或程序集“AxInterop.WMPLib”或其依赖项之一。参数不正确。

> ID：13929021
> 
> 赞同：1
> 
> 时间：2012-12-18T08:29:43.473
> 
> 标签：c#, asp.net

我有一个库 AXInterop.WMPLib，它让我发疯。这是我收到的错误。我没有使用任何其他依赖项。

堆栈跟踪：

> [FileLoadException：无法加载文件或程序集“AxInterop.WMPLib”或其依赖项之一。参数不正确。（来自 HRESULT 的异常：0x80070057 (E_INVALIDARG)）]
> 
> [FileLoadException：无法加载文件或程序集“AxInterop.WMPLib，版本=1.0.0.0，文化=中性，PublicKeyToken=null”或其依赖项之一。参数不正确。（HRESULT 异常：0x80070057 (E_INVALIDARG)）]
> System.Reflection.RuntimeAssembly._nLoad（AssemblyName 文件名，字符串 codeBase，证据 assemblySecurity，RuntimeAssembly locationHint，StackCrawlMark 和 stackMark，IntPtr pPrivHostBinder，布尔 throwOnFileNotFound，布尔 forIntrospection，布尔 suppressSecurityChecks）+0
> 系统。 Reflection.RuntimeAssembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean for Introspection,
> System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, RuntimeAssembly reqAssembly, StackCrawlMark & stackMark, IntPtr pPrivHostBinder, Boolean throwOnFileNotFound, Boolean for Introspection, Boolean suppressSecurityChecks) +152
> System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMarkString & , IntPtr pPrivHostBinder, Boolean for Introspection) +77
> System.Reflection.RuntimeAssembly.InternalLoad(String assemblyString, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection) +16 System.Reflection.Assembly.Load(String assemblyString) +28
> System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +38
> 
> [ConfigurationErrorsException：无法加载文件或程序集“AxInterop.WMPLib，版本=1.0.0.0，文化=中性，PublicKeyToken=null”或其依赖项之一。参数不正确。（来自 HRESULT 的异常：0x80070057 (E_INVALIDARG)）]
> System.Web.Configuration.CompilationSection.LoadAssemblyHelper(String assemblyName, Boolean starDirective) +752
> System.Web.Configuration.CompilationSection.LoadAllAssembliesFromAppDomainBinDirectory() +218 System.Web.Configuration.CompilationSection。 LoadAssembly(AssemblyInfo ai) +130
> System.Web.Compilation.BuildManager.GetReferencedAssemblies(CompilationSection compConfig) +170
> System.Web.Compilation.BuildManager.GetPreStartInitMethodsFromReferencedAssemblies() +91 System.Web.Compilation.BuildManager.CallPreStartInitMethods(String preStartInitListPath) +258
> System.Web.Compilation.BuildManager.ExecutePreAppStart() +135
> System.Web.Hosting.HostingEnvironment.Initialize (ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, 异常appDomainCreationException) +516
> 
> [HttpException（0x80004005）：无法加载文件或程序集“AxInterop.WMPLib，版本=1.0.0.0，文化=中性，PublicKeyToken=null”或其依赖项之一。参数不正确。（HRESULT 异常：0x80070057 (E_INVALIDARG)）]
> System.Web.HttpRuntime.FirstRequestInit（HttpContext 上下文）+9850940 System.Web.HttpRuntime.EnsureFirstRequestInit（HttpContext 上下文）+101 System.Web.HttpRuntime.ProcessRequestInternal（HttpWorkerRequest wr）+456

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T09:07:33.923

我假设您在 Windows 客户端（XP、Vista 或 7）上开发此应用程序，然后将其部署到 Windows Server（2008、2008 R2 等）

Windows Media Player 是 Windows Server 上的可选组件（不同于 Windows 客户端，例如 Windows 7），因此您必须启用它（作为桌面体验角色服务的一部分），

[http://technet.microsoft.com/en-us/library/cc772567.aspx](http://technet.microsoft.com/en-us/library/cc772567.aspx)

之后，AxInterop.WMPLib 应该能够找到它的依赖项（Windows Media Player 中的本机库）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-08T10:29:33.107

我在 Windows 10 Pro 中遇到了同样的错误。问题是我使用自定义构建事件在另一个路径中编译，并且我缺少将库添加到项目编译文件夹中。

因此，请务必将**AxInterop.WMPLib.dll**和**Interop.WMPLib.dll**添加到项目文件夹中。

# ruby-on-rails - Twitter Bootstrap-Modal Rails 3.2 中未显示 ClientSideValidations

> ID：13929022
> 
> 赞同：3
> 
> 时间：2012-12-18T08:29:45.930
> 
> 标签：ruby-on-rails, forms, twitter-bootstrap, modal-dialog, client-side-validation

我为我的应用程序使用 clientsidevalidations gem 和 twitter bootstrap-modal。但 vaidations 不起作用。

在 application.js 上

```
//= require bootstrap-modal 
```

这是在模态对话框中显示的元素

```
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" >

  <%= form_for @content, :validate => true do |f| %>
  <script>$('#new_content').validate()</script>
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">New Content</h3>
  </div>
  <div class="modal-body" style = "height:600px;overflow-y: scroll;">

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :permalink, "Permalink" %><br />
    <%= f.text_field :permalink %>
  </div>
  <div class="field">
    <%= f.label :body %><br />
    <%= f.text_area :body, :class => "redactor", :rows => 10, :cols => 40 %>
  </div>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>&nbsp;&nbsp; atau &nbsp;&nbsp;
    <%= f.submit ( "Submit" ), :class => "btn btn-inverse btn-medium" %>
  </div>

  </div>
  <% end %>

</div> 
```

当我检查 chrome 上的元素时

```
<form accept-charset="UTF-8" action="/admin/contents" class="new_content" data-validate="true" id="new_content" method="post" novalidate="novalidate"> 
```

我找到了一些解决方案，但对我没有帮助

解决方案，但对我和 [模态视图](https://github.com/bcardarella/client_side_validations/issues/339)[不起作用](https://stackoverflow.com/questions/13073357/simpleformclientsidevalidationsbootstrap-validation-is-not-occuring-on-the-f)

还有其他解决方案吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T06:05:24.460

附加验证处理程序时输入字段不可见的问题。请参阅[SimpleForm+ClientSideValidations+bootstrap - 表单上未发生验证 - 接受所有输入以](https://stackoverflow.com/questions/13073357/simpleformclientsidevalidationsbootstrap-validation-is-not-occuring-on-the-f)获取详细信息和修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T18:18:24.863

您应该使用 SimpleForm 和 SimpleForm 的 Bootstrap 集成。从那里你可以使用支持 Twitter Bootstrap 的 client_side_validations-simple_form

# jquery - 纯 ajax MVC 4 身份验证

> ID：13929032
> 
> 赞同：1
> 
> 时间：2012-12-18T08:30:20.250
> 
> 标签：jquery, asp.net-mvc-4, single-page-application

我正在使用 MVC 4 构建一个单页应用程序。对于登录功能，我对此操作执行 jquery ajax POST：

```
 [HttpPost] [AllowAnonymous]
    public JsonResult JsonLogin(LogInFormViewModel form)
    {
         ...

         //If user authenticates
            formAuthentication.SetAuthCookie(this.HttpContext,
                                                 UserAuthenticationTicketBuilder.CreateAuthenticationTicket(
                                                                 user));
            return Json(new { success = true, viewResult = this.RenderPartialView("UserStatusBar", null) });

         ...

    } 
```

`RenderPartialView()`是一个自定义扩展，它只是将我的剃刀部分视图呈现为字符串。

“UserStatusBar”是任何网站顶部的标准栏，如果用户未通过身份验证，则显示登录/注册，如果用户未通过身份验证，则显示注销/欢迎：

```
@if (Request.IsAuthenticated)
{
    <div id="LoggedIn">
        <a class="logoutLink" href="#">Log out</a>
        <span>Welcome, @User.Identity.Name</span>
    </div>
} else {
    <div id="notLoggedIn">
        <a class="loginLink popupLink" href="#">Log in</a>
        <a class="registerLink popupLink" href="#">Register</a>
    </div>
} 
```

在我的 ajax 成功处理程序中，我做了这样的事情来在用户登录或注销后异步重新呈现用户状态栏：

```
success: function (result) {
    if (result.success) {
       $('#userStatusBar').empty().html(result.viewResult, null);
    }
} 
```

唯一的问题是，每当代码进入我的自定义扩展`RenderPartialView()`时，`Request.IsAuthenticated`它仍然与 ajax 调用之前相同，因此在下一个请求之前它不会重新呈现正确的状态栏。

我该如何解决这个问题，因为`Request.IsAuthenticated`它是只读的，我不能在设置授权 cookie 后简单地设置它。我唯一能做的就是设置一个 TempData 属性并在渲染 UserStatusBar 时检查它：

```
@if (Request.IsAuthenticated || (TempData["AjaxAuthenticated"] != null && (bool)TempData["AjaxAuthenticated"]))
{
    <logged in html>
} else <logged out html> 
```

但这是有问题的，因为注销时会发生相反的情况；在重新渲染状态栏并且它再次为状态栏渲染不正确的标记直到下一个请求`Request.IsAuthenticated`之后仍然为真。`formsAuthentication.SignOut()`

我似乎想不出解决这个问题的方法，因为我还需要永久链接才能工作，所以 Request.IsAuthenticated 是我在这种情况下要查看的那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:41:38.367

好的，我找到了答案。我编写了一个控制器扩展，它根据当前响应中的 cookie 更新当前请求的安全主体（在成功授权之后和调用此方法之前设置）。这会立即更新`Request.IsAuthenticated`true。

注意：我正在使用自定义成员资格，因此此代码对您不适用。

```
 public static void AjaxRenewPrincipal(this Controller controller)
    {
        HttpCookie authCookie = controller.HttpContext.Response.Cookies[FormsAuthentication.FormsCookieName];
        if (IsValidAuthCookie(authCookie))
        {
            var formsAuthentication = DependencyResolver.Current.GetService<IFormsAuthentication>();
            var authTicket = formsAuthentication.Decrypt(authCookie.Value);

            CustomUser user = new CustomUser(authTicket); //An authenticated user
            string[] userRoles = { user.RoleName };
            controller.HttpContext.User = new GenericPrincipal(user , userRoles);
            formsAuthentication.SetAuthCookie(controller.HttpContext, authTicket);
        }
        else
        {
            //using Parameter-less constructor on my CustomClass : IIdentity sets IsAuthenticated to false on the IIdentity, then unauthenticated user gets set to the security principal
            controller.HttpContext.User = new GenericPrincipal(new CustomUser (), new string[] {});
        }
    } 
```

# android - 删除图像后Android gridview无法刷新

> ID：13929039
> 
> 赞同：0
> 
> 时间：2012-12-18T08:30:53.197
> 
> 标签：android, gridview

下面是我从其他示例修改的代码。

现在我的流程是用户将选择多个图像，当单击选择按钮时，将弹出警报对话框询问“上传成功后删除照片”

所以当完成上传它会调用onActivityResult。

在 onActivityResult 中，我会

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {      
    case UPLOAD_IMAGES:
        if (resultCode == RESULT_OK){   
            imagegrid = (GridView) findViewById(R.id.PhoneImageGrid);
            imagegrid.invalidateViews();    
            AndroidCustomGalleryActivity.this
            .runOnUiThread(new Runnable() {
                public void run() {
                    updateUI();
                }
            });
            System.out.println("Updated UI");           
        }
    }
} 
```

但是我的 gridview 仍然无法刷新，删除的图像仍然显示。

完整的源代码在这里。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gallery);

    imageAdapter = new ImageAdapter();
    imageAdapter.initialize();
    imagegrid = (GridView) findViewById(R.id.PhoneImageGrid);
    imagegrid.setAdapter(imageAdapter);

    AndroidCustomGalleryActivity.this
    .runOnUiThread(new Runnable() {
        public void run() {
            updateUI();
        }
    });

    final Button selectBtn = (Button) findViewById(R.id.selectBtn);
    selectBtn.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            final int len = imageAdapter.images.size();
            int cnt = 0;
            String selectImages = "";
            for (int i = 0; i < len; i++) {
                if (imageAdapter.images.get(i).selection) {
                    cnt++;
                    selectImages = selectImages
                            + imageAdapter.images.get(i).id + ",";
                }
            }
            if (cnt == 0) {
                Toast.makeText(getApplicationContext(),
                        "Please select at least one image",
                        Toast.LENGTH_LONG).show();
            } else {

                 selectImages = selectImages.substring(0,selectImages.lastIndexOf(","));
                 AlertDialog.Builder helpBuilder = new AlertDialog.Builder(AndroidCustomGalleryActivity.this);
                 helpBuilder.setTitle("Photo upload");
                 helpBuilder.setMessage("Remove the photo once upload successful.");

                 UploadPhotoOnClickYes uploadPhotoOnClickYes = new UploadPhotoOnClickYes(AndroidCustomGalleryActivity.this, 
                         UploadQueue.class, selectImages);

                 UploadPhotoOnClickNo uploadPhotoOnClickNo = new UploadPhotoOnClickNo(AndroidCustomGalleryActivity.this, 
                         UploadQueue.class, selectImages);

                 helpBuilder.setPositiveButton("Yes",uploadPhotoOnClickYes);

                 helpBuilder.setNegativeButton("No", uploadPhotoOnClickNo);

                 // Remember, create doesn't show the dialog
                 AlertDialog helpDialog = helpBuilder.create();
                 helpDialog.show();
                }                                   
            }                       
    });     
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {      
    case UPLOAD_IMAGES:
        if (resultCode == RESULT_OK){   
            imagegrid = (GridView) findViewById(R.id.PhoneImageGrid);
            imagegrid.invalidateViews();    
            AndroidCustomGalleryActivity.this
            .runOnUiThread(new Runnable() {
                public void run() {
                    updateUI();
                }
            });
            System.out.println("Updated UI");           
        }
    }
}

public void updateUI() {
    imageAdapter.checkForNewImages();
}

public class ImageAdapter extends BaseAdapter {
    private LayoutInflater mInflater;
    public ArrayList<ImageItem> images = new ArrayList<ImageItem>();

    public ImageAdapter() {
        mInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    public void initialize() {
        images.clear();
        final String[] columns = { MediaStore.Images.Thumbnails._ID };
        final String orderBy = MediaStore.Images.Media._ID;                 

        Cursor imagecursor = managedQuery(
                MediaStore.Images.Media.EXTERNAL_CONTENT_URI, 
                columns,
                MediaStore.Images.Media.DATA + " like ? ", 
                new String[] {"%DVS%"},                 
                orderBy);
        if(imagecursor != null){
            int image_column_index = imagecursor
                    .getColumnIndex(MediaStore.Images.Media._ID);
            int count = imagecursor.getCount();
            for (int i = 0; i < count; i++) {
                imagecursor.moveToPosition(i);
                int id = imagecursor.getInt(image_column_index);
                ImageItem imageItem = new ImageItem();
                imageItem.id = id;
                lastId = id;
                imageItem.img = MediaStore.Images.Thumbnails.getThumbnail(
                        getApplicationContext().getContentResolver(), id,
                        MediaStore.Images.Thumbnails.MICRO_KIND, null);
                images.add(imageItem);
            }
            imagecursor.close();
        }
        notifyDataSetChanged();
    }

    public void checkForNewImages(){            
        images.clear(); //new
        //Here we'll only check for newer images
        final String[] columns = { MediaStore.Images.Thumbnails._ID };
        final String orderBy = MediaStore.Images.Media._ID;

        Cursor imagecursor = managedQuery(
                MediaStore.Images.Media.EXTERNAL_CONTENT_URI, 
                columns,
                MediaStore.Images.Media.DATA + " like ? ", 
                new String[] {"%DVS%"},             
                orderBy); //new

        int image_column_index = imagecursor
                .getColumnIndex(MediaStore.Images.Media._ID);
        int count = imagecursor.getCount();
        for (int i = 0; i < count; i++) {
            imagecursor.moveToPosition(i);
            int id = imagecursor.getInt(image_column_index);
            ImageItem imageItem = new ImageItem();
            imageItem.id = id;
            lastId = id;
            imageItem.img = MediaStore.Images.Thumbnails.getThumbnail(
                    getApplicationContext().getContentResolver(), id,
                    MediaStore.Images.Thumbnails.MICRO_KIND, null);             
            images.add(imageItem);
        }
        imagecursor.close();
        notifyDataSetChanged();
    }

    public int getCount() {
        return images.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = mInflater.inflate(R.layout.galleryitem, null);
            holder.imageview = (ImageView) convertView
                    .findViewById(R.id.thumbImage);
            holder.checkbox = (CheckBox) convertView
                    .findViewById(R.id.itemCheckBox);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        ImageItem item = images.get(position);
        holder.checkbox.setId(position);
        holder.imageview.setId(position);
        holder.checkbox.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {               
                CheckBox cb = (CheckBox) v;
                int id = cb.getId();
                if (images.get(id).selection) {
                    cb.setChecked(false);
                    images.get(id).selection = false;
                } else {
                    cb.setChecked(true);
                    images.get(id).selection = true;
                }
            }
        });
        holder.imageview.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {                   
                int id = v.getId();
                ImageItem item = images.get(id);
                Intent intent = new Intent();
                intent.setAction(Intent.ACTION_VIEW);
                final String[] columns = { MediaStore.Images.Media.DATA };
                Cursor imagecursor = managedQuery(
                        MediaStore.Images.Media.EXTERNAL_CONTENT_URI, columns,
                        MediaStore.Images.Media._ID + " = " + item.id, null, MediaStore.Images.Media._ID);
                if (imagecursor != null && imagecursor.getCount() > 0){
                    imagecursor.moveToPosition(0);
                    String path = imagecursor.getString(imagecursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA));
                    File file = new File(path);
                    imagecursor.close();
                    intent.setDataAndType(
                            Uri.fromFile(file),
                            "image/*");
                    startActivityForResult(intent, VIEW_IMAGE);
                }
            }
        });
        holder.imageview.setImageBitmap(item.img);
        holder.checkbox.setChecked(item.selection);
        return convertView;
    }
}

class ViewHolder {
    ImageView imageview;
    CheckBox checkbox;
}

class ImageItem {
    boolean selection;
    int id;
    Bitmap img;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:25:42.720

我现在无法尝试您的代码，但试试这个：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {      
    case UPLOAD_IMAGES:
        if (resultCode == RESULT_OK){   
            imagegrid = (GridView) findViewById(R.id.PhoneImageGrid);
            AndroidCustomGalleryActivity.this
            .runOnUiThread(new Runnable() {
                public void run() {
                    updateUI();
                    imageAdapter.notifyDataSetChanged();
                }
            });
            System.out.println("Updated UI");           
        }
    }
} 
```

删除元素后，我只是移动了 gridview 的失效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:09:16.650

我自己找到了答案，这是因为我使用 file.delete 删除了图像。所以它只删除物理文件，但删除的图像仍然缓存。

所以需要用这个方法来删除文件。

```
Uri contentUri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;
Uri itemUri = ContentUris.withAppendedId(contentUri, item.media_id);
getContentResolver().delete(itemUri, null, null); 
```

# hibernate - 使用休眠目录连接到多个数据库

> ID：13929041
> 
> 赞同：4
> 
> 时间：2012-12-18T08:31:02.793
> 
> 标签：hibernate, postgresql-9.1, catalog

我正在开发一个需要使用休眠连接到两个 Postgres 数据库的应用程序。详情如下：-

**软件详细信息**：- Java 1.6、Hibernate 4.1.0、Postgres 9.1。

**问题场景**：-应用程序需要在运行时连接到我的本地主机上的两个数据库 TEDA 和 TEMET 并执行基本的 CRUD 操作（用于初始阶段）。

**尝试的方法**：- 1\. 将*目录*属性添加到`<class>`休眠映射文件的标记。**但它没有用**。目录总是被获取为空。2\. 在我的 Hibernate 上下文中创建两个不同的数据源和会话工厂，并在不同的 DAO 对象中使用它们。***这种方法对我有用，我能够连接到不同的数据库。***

**问题陈述和参考资料**：-我正在寻找一种方法，使第 (1) 点中提到的“目录”方法可能起作用。

我搜索了 stack-overflow 和其他论坛，例如 [Connect to multiple databases in Hibernate](https://stackoverflow.com/questions/7708176/connect-to-multiple-databases-in-hibernate) 和 [什么是 hibernate annotated class 中使用的“目录”](https://stackoverflow.com/questions/5246949/what-is-catalog-used-in-hibernate-annotated-class)，但他们中的大多数都讨论了使用多个数据源的方法（2）。我还查看了第 5.1.3 节第 6 点中的[休眠社区文档，其中](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html)*确实*提到目录属性覆盖了 db Url 中的数据库名称，但我可能在这里遗漏了一些东西。

请协助。我修改的属性文件和休眠映射文件如下所示。

属性文件 -

```
driverClassName=org.postgresql.Driver
urlDB=jdbc\:postgresql\://localhost\:5432/TEDA    
username=****
password=****
dialect=org.hibernate.dialect.PostgreSQLDialect 
```

休眠映射文件

```
<hibernate-mapping>
 <class name="somepackage.PartnerPoc" catalog="TEMET" table="partner_poc">
  <!-- Table specific hibernate implementation and HQL queries-->
</hibernate-mapping> 
```

如果您需要我的更多信息，请告诉我。

提前致谢。

# objective-c - 使用一个代码库构建多个应用程序的良好机制

> ID：13929045
> 
> 赞同：0
> 
> 时间：2012-12-18T08:31:32.480
> 
> 标签：objective-c, ios, xcode

呃，

我正在基于相同的代码库构建几个 iPhone 应用程序。现在我有 1 个应用程序设置，使用 Xcode 中的一个项目文件。我正在寻找在不复制代码的情况下设置另一个应用程序的最佳方法。

有什么好方法可以做到这一点？我正在考虑设置一个`#define`来指示它是哪个应用程序来相应地更新图像和图标。但是，我还需要设置不同的应用程序图标、Bundle ID 等。我该怎么做呢？

我已经阅读了一些关于 SO 的主题，但其中大多数都谈到在多个应用程序中使用库代码和函数。这个问题是关于重用整个应用程序的。

任何帮助是极大的赞赏！

莱德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T08:41:18.253

如果您需要从另一个应用程序创建一个新应用程序，**您可以向您的应用程序添加一个新目标**。转到项目然后按右键单击目标>>重复目标看到这个[http://www.codeworth.com/blog/mobile/ios-target-duplication/](http://www.codeworth.com/blog/mobile/ios-target-duplication/) 然后你可以为新目标设置一个新的不同的捆绑 ID。您可以为每个目标指定一个新资源（不同的设计）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T08:48:38.523

我喜欢用共享代码制作一个嵌入式框架

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T08:36:43.400

一种可能的解决方案是使用版本控制来管理同一应用程序的不同分支。

具体来说，我通过使用带有[externals](http://svnbook.red-bean.com/en/1.0/ch07s03.html)的 SVN 解决了​​类似的情况，因此我几乎拥有特定文件夹和多个项目下的整个代码（不同`.xcodeproj`文件夹或不同文件夹中的特定源文件）。任何项目都有一个链接到公共共享外部的道具，你就完成了。

我猜你可以用任何版本控制系统做任何类似的事情。

# sql - 如何在 Oracle sql 中获取最近的日期

> ID：13929053
> 
> 赞同：11
> 
> 时间：2012-12-18T08:32:00.270
> 
> 标签：sql, oracle, date-arithmetic

例如，我有 2 个时间表：T1

```
id time
1 18:12:02
2 18:46:57
3 17:49:44
4 12:19:24
5 11:00:01
6 17:12:45 
```

和 T2

```
id time
1 18:13:02
2 17:46:57 
```

我需要从 T1 获得最接近 T2 时间的时间。这些表之间没有关系。它应该是这样的：

```
select T1.calldatetime
from T1, T2 
where T1.calldatetime between 
T2.calldatetime-(
    select MIN(ABS(T2.calldatetime-T1.calldatetime))
    from T2, T1)
and
T2.calldatetime+(
    select MIN(ABS(T2.calldatetime-T1.calldatetime))
    from T2, T1) 
```

但我无法得到它。有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T08:59:19.630

与使用多个的其他解决方案不同，您只需使用单个笛卡尔连接即可解决您的问题。我假设时间存储为 VARCHAR2。如果它存储为日期，那么您可以删除 TO_DATE 函数。如果它被存储为日期（我强烈推荐这个），你将不得不删除日期部分

我已经让它稍微冗长了，所以很明显发生了什么。

```
select *
  from ( select id, tm
              , rank() over ( partition by t2id order by difference asc ) as rnk
           from ( select t1.*, t2.id as t2id
                       , abs( to_date(t1.tm, 'hh24:mi:ss') 
                              - to_date(t2.tm, 'hh24:mi:ss')) as difference
                    from t1
                   cross join t2
                         ) a
                 )
 where rnk = 1 
```

基本上，这可以计算出 T1 和 T2 中每次之间的绝对差异，然后选择 T2 中的最小差异`ID`；从 T1 返回数据。

这是[SQL Fiddle 格式](http://www.sqlfiddle.com/#!4/0166c/1)。

不太漂亮（但更短）的格式是：

```
select *
  from ( select t1.*
              , rank() over ( partition by t2.id 
                                  order by abs(to_date(t1.tm, 'hh24:mi:ss') 
                                            - to_date(t2.tm, 'hh24:mi:ss'))
                                  ) as rnk
           from t1
          cross join t2
                ) a
 where rnk = 1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-18T08:56:36.457

我相信这是您正在寻找的查询：

```
CREATE TABLE t1(id INTEGER, time DATE);
CREATE TABLE t2(id INTEGER, time DATE);

INSERT INTO t1 VALUES (1, TO_DATE ('18:12:02', 'HH24:MI:SS'));
INSERT INTO t1 VALUES (2, TO_DATE ('18:46:57', 'HH24:MI:SS'));
INSERT INTO t1 VALUES (3, TO_DATE ('17:49:44', 'HH24:MI:SS'));
INSERT INTO t1 VALUES (4, TO_DATE ('12:19:24', 'HH24:MI:SS'));
INSERT INTO t1 VALUES (5, TO_DATE ('11:00:01', 'HH24:MI:SS'));
INSERT INTO t1 VALUES (6, TO_DATE ('17:12:45', 'HH24:MI:SS'));

INSERT INTO t2 VALUES (1, TO_DATE ('18:13:02', 'HH24:MI:SS'));
INSERT INTO t2 VALUES (2, TO_DATE ('17:46:57', 'HH24:MI:SS'));

SELECT t1.*, t2.*
  FROM t1, t2,
       (  SELECT t2.id, MIN (ABS (t2.time - t1.time)) diff
            FROM t1, t2
        GROUP BY t2.id) b
 WHERE ABS (t2.time - t1.time) = b.diff; 
```

确保时间列具有相同的日期部分，否则 t2.time - t1.time 部分将不起作用。

**编辑**：感谢您的接受，但本下面的回答更好。它使用 Oracle 分析功能，性能会好得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T08:49:15.537

这里从 T1 中选择那些与 T2 中的任何一个具有最小距离的行：

```
select T1.id, T1.calldatetime from T1, T2 
 where ABS(T2.calldatetime-T1.calldatetime)
         =( select MIN(ABS(T2.calldatetime-T1.calldatetime))from T1, T2); 
```

（用mysql测试过，希望你不要从中得到ORA）

**编辑**：根据最后一条评论，应该是这样的：

```
drop table t1;
drop table t2;
create table t1(id int, t time);
create table t2(id int, t time);

insert into t1 values (1, '18:12:02');
insert into t1 values (2, '18:46:57');
insert into t1 values (3, '17:49:44');
insert into t1 values (4, '12:19:24');
insert into t1 values (5, '11:00:01');
insert into t1 values (6, '17:12:45');

insert into t2 values (1, '18:13:02');
insert into t2 values (2, '17:46:57');

select ot2.id, ot2.t, ot1.id, ot1.t from t2 ot2, t1 ot1  
 where ABS(ot2.t-ot1.t)=
       (select min(abs(t2.t-t1.t)) from t1, t2 where t2.id=ot2.id) 
```

产生：

```
id      t       id      t
1       18:13:02        1       18:12:02
2       17:46:57        3       17:49:44 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-18T12:50:49.493

另一种使用分析函数的方法。可能很奇怪:)

```
select id, time,
case 
  when to_date(time, 'hh24:mi:ss') - to_date(lag_time, 'hh24:mi:ss') < to_date(lead_time, 'hh24:mi:ss') - to_date(time, 'hh24:mi:ss')
    then lag_time 
    else lead_time
  end closest_time
from (
select id, tbl,
  LAG(time, 1, null) OVER (ORDER BY time) lag_time, 
  time,
  LEAD(time, 1, null) OVER (ORDER BY time) lead_time 
from
  (
  select id, time, 1 tbl from t1
  union all
  select id, time, 2 tbl from t2
  )
)
where tbl = 2 
```

到[SQLFiddle](http://www.sqlfiddle.com/#!4/0d7ca/2) ......及以后！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-18T09:14:35.743

试试这个查询有点长，我会尝试优化它

```
select * from t1
where id in (
select id1 from 
(select id1,id2,
rank()  over (partition by id2 order by diff) rnk
from
(select distinct t1.id id1,t2.id id2,
round(min(abs(to_date(t1.time,'HH24:MI:SS') - to_date(t2.time,'HH24:MI:SS'))),2) diff 
from 
t1,t2
group by t1.id,t2.id) )
where rnk = 1); 
```

# orchardcms - 果园内容部分问题

> ID：13929055
> 
> 赞同：1
> 
> 时间：2012-12-18T08:32:08.780
> 
> 标签：orchardcms, orchardcms-1.6

我在 orchard1.6 中创建了内容部分我在管理面板的功能中启用了内容部分，我将其添加到我的页面类型中作为该内容部分的一部分，现在我的问题是当我要编辑它给出的特定页面时以下错误

" 传入字典的模型项的类型为 'fileuploads.models.fileuploadpart'，但此字典需要类型为 'orchard.contrib.fileupload.models.fileupoadviewmodel' 的模型项。"

如果有人知道这个问题，我期待知道这一点，这将是很有帮助的。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T01:39:56.010

看起来您将不正确类型的模型对象传递给编辑器形状。您在驱动程序中传递给编辑器的模型对象的类型（使用`EditorTemplate`）必须与`@using`cshtml 模板文件中的定义相匹配。

在没有看到实际代码的情况下很难说更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:51:59.113

看起来你应该把
@model fileuploads.models.fileuploadpart
在你的 .cshtml

你试过吗？

顺便说一句，仅在编辑器模板的 .cshtml 上执行此操作。.cshtml 部分本身应该有一个动态模型。

# mysql - 使用十进制数据类型时的价格变化

> ID：13929059
> 
> 赞同：1
> 
> 时间：2012-12-18T08:32:26.607
> 
> 标签：mysql, decimal, sqldatatypes

我有一列数据类型`decimal`设置如下..

```
`cost` decimal(4,2) NOT NULL DEFAULT '0.00', 
```

但是，当我输入一个价格时，比如 100.00，下次我查看它时会显示`99.99`.

为什么是这样？我认为`4,2`允许小数点前 4 个字符和小数点后 2 个字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:34:27.890

4 是精度（总位数），2 是小数位数（小数位数）。

在您的情况下，您需要 6,2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T08:34:37.573

一`DECIMAL(M,D)`列最多允许小数点左侧有**M - D位数字。**

**M**是最大位数（精度）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T08:36:27.947

decimal [ (p[ ,s] )] 和 numeric[ (p[ ,s] )] 固定精度和小数位数。当使用最大精度时，有效值从 - 10^38 +1 到 10^38 - 1。十进制的 ISO 同义词是 dec 和 dec(p, s)。numeric 在功能上等同于十进制。

底线：您应该尝试将其设为 6,2。

6 为共 6 位，2 为点后 2 位。

# native - 为什么我的应用在移动设备上无法搜索？[开发者控制台中的原生平台选项]

> ID：13929069
> 
> 赞同：3
> 
> 时间：2012-12-18T08:33:35.423
> 
> 标签：native, google-play, platform

大约 7 天前，我的 apk 文件已上传并在 google play store 上发布。该应用程序可在 PC 上搜索，但无法在移动设备上搜索。即使我通过包名进入下载页面，它也只显示**“此应用与您的所有设备不兼容”**。

我进入开发者控制台查看应用程序的信息。选项“支持的设备”显示**“此应用程序可用于 0 多个设备”**。

这真的让我很困惑。然后我进入 apk 信息，我发现了一个奇怪的选项“native-platform”。

API 级别：8-17+
支持的屏幕：small-xlarge
OpenGL 纹理：所有
**本机平台：JsonRpc2-Base-1.25.1**

这是否意味着该应用程序仅在具有 jsonrpc2-base-1.25.1 的设备上可用？如果是这样，我确实使用了 json api(jsonrpc2-base-1.25.1.jar)，但它包含在应用程序中。我不知道为什么它需要本机平台。有人能帮我吗？谢谢你。

# java - 在 Tomcat 服务器上的 Spring 应用程序中获取端口号和主机名

> ID：13929071
> 
> 赞同：10
> 
> 时间：2012-12-18T08:33:40.377
> 
> 标签：java, spring, spring-mvc

我的应用程序是`Spring framework 3.1.2`部署在`Apache tomcat 6`.

我需要在应用程序（服务器）启动时获取正在运行的应用程序**端口号**和**主机名。**这样我就可以在属性上覆盖它，并且需要其他 bean 初始化。

spring 是否提供任何选项来检索这些详细信息并在服务器启动时设置它？..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T09:03:17.813

看看之前提出的两个问题：[Get the server port number from tomcat without a request](https://stackoverflow.com/questions/3867197/get-the-server-port-number-from-tomcat-with-out-a-request)，[我需要知道我的 java webapp 在 webapp startup 上运行的 HTTP 和 HTTPS 端口](https://stackoverflow.com/questions/7481432/i-need-to-know-the-http-and-https-port-my-java-webapp-is-running-on-webapp-start)。在那里，您将看到如何从连接器获取端口，连接器还具有 getDomain 方法，可以为您提供主机名。

由于您知道如何在没有 spring 的情况下获得，因此您可以拥有一个获取这些详细信息的 bean，并将它们提供给需要这些实例化详细信息的其他 bean。有几种方法可以做到这一点：

1) 创建 Spring 工厂 bean，它将获取端口、主机名并实例化您想要的 bean

2）有一个单独的bean为你保存这些细节，你用那个bean来构造另一个

3）您使用端口和域覆盖您的应用程序详细信息，并且在实例化需要它们的bean时有一个init方法可以为您的新bean读取它们

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-12T09:46:07.117

这是获取端口dip地址的代码

```
class IPAddressDemo{
    public static String getIpAddressAndPort1() throws MalformedObjectNameException, NullPointerException,
            UnknownHostException {
        MBeanServer beanServer = ManagementFactory.getPlatformMBeanServer();
        Set<ObjectName> objectNames = beanServer.queryNames(new ObjectName("*:type=Connector,*"),
                Query.match(Query.attr("protocol"), Query.value("HTTP/1.1")));
        String host = InetAddress.getLocalHost().getHostAddress();
        String port = objectNames.iterator().next().getKeyProperty("port");
        String ipadd = "http" + "://" + host + ":" + port;
        System.out.println(ipadd);
        return ipadd;
    }
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-18T08:51:32.293

Tomcat 将默认在 TCP/IP 端口号上运行`8080`。

脚步

1.  导航到`C:\apache-tomcat-6.0.18\conf\server.xml`（安装tomcat的地方）
2.  在 server.xml 文件中，找到如下所示的**连接器端口**

    ```
    <connector port="8080" protocol="HTTP/1.1" connectiontimeout="20000" redirectport="8443">     

    </connector> 
    ```

连接器标签中的端口是您的端口号。

查找主机名：

脚步

```
1\. Navigate to `C:\WINDOWS\system32\drivers\etc` 
```

或者

> 开始->所有程序->运行->键入“驱动程序”（不带引号）->等

1.  用文本编辑器打开文件宿主，可以找到

> ```
> 127.0.0.1       localhost 
> ```

从这里您可以了解您的主机名是什么。

谢谢。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-12-18T09:46:31.997

已传递给 doGet 或 doPost 方法的 ServletRequest 对象具有提供此信息的方法`getServerName()`。`getServerPort()`

例子：

```
public void doGet(ServletRequest request, ServletResponse response) {
    System.out.println("Host Name = " + request.getServerName());
    System.out.println("Port Number = " + request.getServerPort());
} 
```

# php - 通过 guzzle 中的查询字符串发送数组

> ID：13929075
> 
> 赞同：11
> 
> 时间：2012-12-18T08:34:14.973
> 
> 标签：php, rest, query-string, restful-url, guzzle

[Guzzle](http://guzzlephp.org/)客户端默认从此代码创建

```
$client->get('https://example.com/{?a}', array('a' => array('c','d'))); 
```

这个网址

```
https://example.com/?a=c,d 
```

在 RESTful 应用程序中以查询字符串发送数组的最佳实践是什么？问题是，如何在服务器端确定`c,d`是字符串还是数组？使用方括号发送数组不是更好吗，例如`a[]=c&a[]=d`？如何将 Guzzle 设置为使用方括号？还是使用 JSON 编码的变量更好？在服务器端，我使用[Tonic](http://peej.github.com/tonic/)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-02-19T16:07:28.147

工作解决方案：

```
$vars = array('state[]' => array('Assigned','New'), 'per_page' => $perPage, 'page' => $pageNumber);
$query = http_build_query($vars, null, '&');
$string = preg_replace('/%5B(?:[0-9]|[1-9][0-9]+)%5D=/', '=', $query); // state[]=Assigned&state[]=New
$client = new Client([follow instruction to initialize your client ....]);
$response = $client->request('GET', $uri, ['query' => $string]); 
```

现在您的请求中有相同的名称参数。

粪。

来源：[http_build_query 同名参数](https://stackoverflow.com/questions/8170306/http-build-query-with-same-name-parameters)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T20:14:16.033

似乎答案就[在这里](https://stackoverflow.com/a/12283180/1218080)。

我想做类似的事情`?status[]=first&status[]=second`

您可以在 Guzzle 中执行此操作，如上面的链接所示：

```
$client = new Client('http://test.com/api');    
$request = $client->get('/resource');    
$query = $request->getQuery();    
$query->set('status', array('first', 'second')); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-02-05T14:56:25.043

Guzzle 有一个你可以使用的辅助函数，叫做`build_query()`. 这使用 PHP 的`http_build_query()`.

以下是如何使用它的示例：

```
$params = [
    'a[]' => [
        'c',
        'd'
    ],
    'page' => 1
];

$query = \GuzzleHttp\Psr7\build_query($params);

$response = $client->request('GET', 'https://example.com/', [
    'query' => $query
]); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-05-31T09:05:36.623

我不是 100% 确定这完全回答了这个问题。但是我在寻找如何使用 Guzzle 构建复杂查询时发现了这个问题，这里没有一个答案是我最终使用的解决方案。我在这里添加它以防它对任何其他开发人员有用。

使用 Guzzle 6，您可以执行此类请求：

```
 $endPoint = "https://example.com";

    $queryParams = [
        'a' => [
            [
                "b" => "c"
            ]
        ]
    ];

    $options = [
        'debug' => true, // so you can see what the request looks like
        'query' => $queryParams
    ];

    $client->request('GET', $endPoint, $options); 
```

作为一个真实的例子，查询参数如下：

```
 $queryParams = [
        'filters' => [
            [
                "field" => "status",
                "value" => "open",
                "operator" => "equal"
            ],
            [
                "field" => "total",
                "operator" => "greater_than",
                "value" => 50
            ],
        ],
        'limit' => 500,
        'start' => 7
    ]; 
```

产生这样的网址：

`https://example.com?filters=[{"field":"status","operator":"equal","value":"open"},{"field":"total","operator":"less_than","value":50}]&limit=500&start=7`

`query`关键是数组的键`$options`，看起来很强大。我建议在编写复杂的正则表达式之前先玩一下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-30T16:16:58.730

```
$query = array('x' => array(
                    'a',
                    'b',
                    'c'
        ));

$query_string = http_build_query($query, null, '&'); //build query string

$query_string = preg_replace('/%5B(?:[0-9]|[1-9][0-9]+)%5D=/', '[]=', $query_string); //x[]=a&x[]=b

$response = $guzzle->client->get($path, array('query' => $query_string)); //Make guzzle request

return json_decode($response->getBody()->getContents()); //Return JSON decoded array 
```

这是您可以`x`在 guzzle 中处理值数组的方式，并使用版本 6 或更高版本进行了测试

# iphone - 实现 youtube API

> ID：13929077
> 
> 赞同：3
> 
> 时间：2012-12-18T08:34:25.890
> 
> 标签：iphone, objective-c, ios6, youtube-api

目前，我正在开发一个应用程序，其中我已经实现了用于发送视频的管 API

进入你的管子。为此，我使用了[https://github.com/nparry/gdata-objectivec-clien/tree/master/Source](https://github.com/nparry/gdata-objectivec-clien/tree/master/Source)

当我单独使用它时，库和它的工作对我来说很好。但是当我合并这个 API 时

在我的工作应用程序中，它向我显示以下错误：

```
Undefined symbols for architecture armv7:
  "_OBJC_CLASS_$_GDataYouTubeMediaGroup", referenced from:
      objc-class-ref in YoutubeViewController.o
  "_OBJC_CLASS_$_GDataUtilities", referenced from:
      objc-class-ref in YoutubeViewController.o
  "_OBJC_CLASS_$_GDataMediaTitle", referenced from:
      objc-class-ref in YoutubeViewController.o
  "_OBJC_CLASS_$_GDataServiceGoogleYouTube", referenced from:
      objc-class-ref in YoutubeViewController.o
  "_OBJC_CLASS_$_GDataMediaKeywords", referenced from:
      objc-class-ref in YoutubeViewController.o
  "_kGDataSchemeYouTubeCategory", referenced from:
      -[YoutubeViewController uploadPressed:] in YoutubeViewController.o
  "_OBJC_CLASS_$_GDataMediaDescription", referenced from:
      objc-class-ref in YoutubeViewController.o
  "_OBJC_CLASS_$_GDataEntryYouTubeUpload", referenced from:
      objc-class-ref in YoutubeViewController.o
  "_OBJC_CLASS_$_GDataMediaCategory", referenced from:
      objc-class-ref in YoutubeViewController.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我为消除此错误而苦苦寻找，但找不到任何解决方案。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:27:49.693

这是将文件从外部源添加到项目中时出现的错误，您需要做的就是：转到“目标”下的“构建阶段”，您需要在“编译源”中添加所有 .m 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:01:47.123

听起来您还没有将 gdata 文件链接到目标。最简单的方法是从项目中删除它们，然后再次添加它们，确保选中“添加到目标”下项目旁边的框。希望这可以帮助

# ios - 在 ios 中使用动态绘图绘制折线图

> ID：13929081
> 
> 赞同：0
> 
> 时间：2012-12-18T08:34:31.430
> 
> 标签：ios, graphics

我将开发一个以电流和电压为输入值的应用程序。我需要显示在对图表中的这些输入应用某些计算时无限次生成的某些值。我搜索了很多网页，但我无法理解真实的事实。有没有办法在iOS中动态绘制点来绘制折线图？

# search - 日期范围内搜索对象的解决方案

> ID：13929086
> 
> 赞同：0
> 
> 时间：2012-12-18T08:34:48.153
> 
> 标签：search

我正在建立某种房屋预订网站，并且我正在寻找一些可以根据房屋可用性日期过滤对象的搜索引擎/数据库算法

所以假设我有 House1（可用日期：Jan1...Jan7、Jan20、Jan23）

如果我查询所有对象的日期 Jan2-Jan3 - 我应该找到那个对象，如果我查询 Jan6-Jan8 - 我应该找到它

（注意：在数据库中我有数千个对象以及各种搜索过滤器，搜索应该很快）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:24:21.913

使用 SQL 中的索引处理“数千个对象”需要几毫秒。我知道在 MySQL / SQL-Server 中执行以下操作很简单。

结构：（伪代码）

```
House(ID INT, ...)
Availability(ID INT, HouseID INT, Start DATETIME, Finish DATETIME)
/* Index on Availability (Start, Finish) */ 
```

询问：

```
SELECT DISTINCT H.ID, ...
FROM House H JOIN Availability A ON A.HouseID = H.ID
WHERE A.Start <= @DesiredFinish AND @DesiredStart <= A.Finish 
```

这将返回与指定日期重叠的所有房屋。

# php - jQuery Autocomplete 从 mysql DB 获取提要

> ID：13929087
> 
> 赞同：2
> 
> 时间：2012-12-18T08:34:53.440
> 
> 标签：php, javascript, jquery, arrays

您是否知道如何从 mysql 中提取数据，将其放入数组中，然后将其输入自动完成字段？

我已经尝试对这些值进行硬编码，但我在想的是当我添加新记录时，我必须再次重新编码数组。我是 PHP 新手，请见谅。

请检查我到目前为止尝试过的内容：

```
protected function jsGenerateResourcesAutocomplete(){

    $dbhost = 'localhost';
    $dbuser = 'root';
    $dbpass = '';

    $conn = mysql_connect($dbhost, $dbuser, $dbpass);
    if(! $conn )
    {
        die('Could not connect: ' . mysql_error());
    }

    $sql = "SELECT employee_name FROM employee" ;

    mysql_select_db('test', $conn);
    $retval = mysql_query($sql);

    $row = mysql_fetch_assoc($retval); 

    if(!$retval )
    {
        die('Could not select data: ' . mysql_error());
    } 

    $employeeNames = $this->employeeNames;
    $html = "";     $html .= 'var employeenames = [' . PHP_EOL;
    foreach ($employeeNames as $employeeName) {
        $html .= '"' . $employeeName-> $array . '",' . PHP_EOL;
    }
    $html .= '];';
    $html .= '$(".resource-input input").autocomplete({source: employeenames});' .PHP_EOL;
    $html .= '});' . PHP_EOL; 
    $html .= '</script>' . PHP_EOL;
    return $html;
} 
```

我相信这一行：

```
$html .= '"' . $employeeName-> $array . '",' . PHP_EOL; 
```

我必须提出数组，但我不知道该怎么做。任何帮助都非常感谢。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:52:16.373

试试这个方法：

```
$sql = "SELECT employee_name FROM employee" ;

mysql_select_db('test', $conn);
$retval = mysql_query($sql);

if(!$retval )
{
    die('Could not select data: ' . mysql_error());
} 
$data = array();

while($row = mysql_fetch_array($retval)){
  $data[] = $row['employee_name'];
}

$html = "<script>";
$html .= 'var employeenames = '.json_encode($data);
$html .= '$(".resource-input input").autocomplete({source: employeenames});';
$html .= '});'; 
$html .= '</script>';
return $html; 
```

# vb.net - VB.NET 2012：使用“日期”从 DataView 查询中选择行

> ID：13929089
> 
> 赞同：1
> 
> 时间：2012-12-18T08:35:08.077
> 
> 标签：vb.net

我有一个表，其中包含一个名为的日期列`PurchaseDate`

我有一个显示月份的列表框。当我点击一个月时，我需要查询数据源并收集`SelectedMonth`.

```
dv2 = New DataView(ds.Tables(0), "PurchaseDate LIKE '" & SelectedMonth & "/%'", "BillNo", DataViewRowState.CurrentRows) 
```

此代码不起作用。因为这里`PurchaseDate`是像“MM/DD/YYYY”这样的日期格式。我想我需要在使用`LIKE`运算符之前将日期转换为字符串。我也尝试使用如下。即便如此，它也并不顺利。

```
dv1 = New DataView(ds.Tables(0), "convert(varchar2(20),PurchaseDate,103) LIKE '" & SelectedMonth & "/%'", "BillNo", DataViewRowState.CurrentRows) 
```

这里`SelectedMonth`将是一个字符串，如 '01'、'10'..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:51:08.977

使用 Linq 可以避免此类问题：

```
Dim selectedMonth = Int32.Parse(lbMonth.Text)
Dim filteredRows = From r In ds.Tables(0)
                   Where r.Field(Of Date)("PurchaseDate").Month = selectedMonth
' if you need a new DataTable
Dim tblFiltered = filteredRows.CopyToDataTable() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:00:53.293

你没有说你正在使用什么数据库，所以这些是我在同一场景中使用的与文化无关的日期文字......

甲骨文

```
TO_DATE('18-Dec-2012','dd-Mon-yyyy') 
```

SQL/服务器

```
'18-Dec-2012' 
```

Ms/Access（不是文化独立的，但它是 MS/Access 唯一接受的）

```
#12/18/2012# 
```

所以你可能会格式化你的 SQL 说这样的话......

```
PurchaseDate BETWEEN  '1-Dec-2012' AND '31-Dec-2012' 
```

# android - 应用程序应在按下返回按钮时给出提示

> ID：13929091
> 
> 赞同：1
> 
> 时间：2012-12-18T08:35:13.643
> 
> 标签：android

我正在开发一个安卓应用程序。我希望当我在我的应用程序中按下返回按钮时，如果我真的想退出，它应该给我一个提示（一种警报对话框）。我不知道在哪里放置这个警报对话框以及在“是”按钮中写什么，用户想要退出应用程序。请帮我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T08:38:21.953

您可以覆盖`OnBackPressed()`功能。

```
 @Override
public void onBackPressed()
{
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("Exit");
    builder.setMessage("Are You Sure?");

    builder.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                    dialog.dismiss();
                    finish();
            }
        });

    builder.setNegativeButton("No", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            dialog.dismiss();
        }
    });
    AlertDialog alert = builder.create();
    alert.show();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T08:39:59.350

```
@Override
public void onBackPressed() {

AlertDialog.Builder alertDialog = new AlertDialog.Builder(
        AppDemoActivity.this);

alertDialog.setPositiveButton("Yes", new OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int which) {
        finish();
    }
});

alertDialog.setNegativeButton("No", null);

alertDialog.setMessage("Do you want to exit?");
alertDialog.setTitle("AppTitle");
alertDialog.show();
} 
```

使用它在 Back Pressed 上显示警报

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T08:43:51.420

这是覆盖后退按钮的另一种方法：

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event)  {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            Toast.makeText(getApplicationContext(), "Back Pressed", Toast.LENGTH_LONG).show();
            return true;
        }
        return super.onKeyDown(keyCode, event);
    } 
```

谢谢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T08:36:54.420

您可以覆盖`onBackPressed`以显示警报，并在`yes`按钮`finish`中显示活动..

```
public void onBackPressed() {
    //show alert here
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-18T08:46:04.453

```
@Override
    private void onBackPressed() {

AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context);
alertDialogBuilder.setTitle("Do you really want to exit?");
alertDialogBuilder
        .setMessage("Click yes to exit!")
        .setCancelable(false)
        .setPositiveButton("Yes",new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,int id) {
                // if this button is clicked, close
                // current activity
                ThisActivity.this.finish();
            }
          })
        .setNegativeButton("No",new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,int id) {
                // if this button is clicked, just close
                // the dialog box and do nothing
                dialog.cancel();
            }
        });             
        AlertDialog alertDialog = alertDialogBuilder.create(); 
        alertDialog.show();
  } 
```

# audio - 从音频中获取振幅曲线

> ID：13929092
> 
> 赞同：0
> 
> 时间：2012-12-18T08:35:13.117
> 
> 标签：audio, mp3, decode, amplitude, mpeg

我正在使用 libmpg123 库来解析和解码 mp3 歌曲，但我想画这样的东西：http: [//img.photobucket.com/albums/v627/Flabbergast/jurafirstCDpressing-1.jpg](http://img.photobucket.com/albums/v627/Flabbergast/jurafirstCDpressing-1.jpg)

如何从 mp3 歌曲中获得振幅？我试图在很多页面中找到解决方案，但没有好的结果。感谢您的回答

# hazelcast - Hazelcast：Java原生客户端和嵌入式版本的区别

> ID：13929095
> 
> 赞同：0
> 
> 时间：2012-12-18T08:35:16.060
> 
> 标签：hazelcast

我们在 Java servlet 容器中运行的 Web 后端中使用 Hazelcast (2.3) 在集群中分发数据。Hazelcast 地图使用 MapStore 接口保存在 MySQL 数据库中。现在，我们正在使用 Java 本地客户端接口，我想知道“本地”客户端和嵌入式版本在性能方面有什么区别。

1.  “本机”客户端可能连接到任何集群节点并且针对每个请求再次做出此决定是否正确？

2.  当使用嵌入式版本时，避免在本机客户端中通过 TCP 套接字发送所有请求和响应的开销是否正确？

3.  是否可以得出嵌入式版本通常比“本机”客户端更快的结论？

4.  如果是“本地”客户端：MapStore 实现是 Hazelcast 服务器的一部分（作为运行时的类）是否正确？还是它是“本机”客户端的一部分，以便所有必须持久化的数据首先通过 TCP 套接字发送？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T08:06:16.283

1.  您为本地客户端提供一组节点以进行连接。一旦它连接了一个，它将使用这个节点与集群进行通信，直到它死亡。当它死亡时，客户端将连接到其他节点以继续通信。

2.  对于本机客户端，有两跳，一跳从客户端到节点，一跳从节点到目标节点。（目标节点是目标数据所在的节点）对于嵌入式客户端，只有单跳，因为它已经知道所需数据的位置（目标节点）

3.  一般是的，但请参阅：（来自[hazelcast 文档](http://www.hazelcast.com/docs/2.4/manual/single_html/#NativeClient)）

> LiteMember 是集群的成员，它与集群中的每个成员都有套接字连接，并且它知道数据在哪里，因此它可以更快地获取数据。但是 LiteMember 有集群开销，即使在同一个 RAC 上，它也必须在同一个数据中心。但是，本机客户端不是成员，并且依赖于集群成员之一。本机客户端可以位于 LAN 或 WAN 中的任何位置。它的扩展性更好，开销也更少。因此，如果您的客户端少于 Hazelcast 节点，则可以选择 LiteMember；否则一定要试试 Native Client。作为经验法则：首先尝试 Native 客户端，如果它对您来说性能不够好，那么请考虑 LiteMember。

4- Store operations are executed in hazelcast server. The object sent from client is persisted to centralized datastore by the target node which also stores the object in its memory.

# java - Selenium Webdriver - PageObject 和驱动程序指针

> ID：13929098
> 
> 赞同：1
> 
> 时间：2012-12-18T08:35:35.030
> 
> 标签：java, selenium, webdriver, pageobjects

我正在使用 PageObjects 在 Selenium Webdriver 中制作一个测试套件，但我怀疑即使驱动程序指向不同的框架，WebElement 引用的实例是否可以工作？我正在为其编写测试的站点有很多框架（不，我不能停止使用框架:-)），每个站点上的一个框架元素是一个顶栏。我想为那个框架制作一个单独的 PageObject，我可以从包含它的其他 PageObjects 中初始化和使用它。

但是我怀疑当驱动程序移动到另一个框架时您是否可以使用 WebElements。

例子：

1.  制作并初始化新的 HomePage PageObject
2.  切换到（帧 1）。切换到(frame2)
3.  从构造函数中创建一个 TopBar 对象，该对象使用上面的驱动程序位置初始化/实例化元素。我现在在那个名为 elmTopBar 的 PageObject/frame 中引用了一个 WebElement
4.  在 HomePage 中，驱动程序从该框架切换（返回到 frame0）做一些其他工作

5.  我对 elmTopBar 的“旧”引用是否仍然可以从这个驱动程序位置（相同的驱动程序对象）使用，或者我只会在每次驱动程序都指向 frame2 时才能工作（这意味着我必须每次主页需要一些东西时 switchTo + 初始化一个 TopBar 对象顶栏）？

我知道如果我从不同的框架进行元素搜索，它不会在其他框架中找到对象，但我的问题是，当您创建/保存对 WebElement 的引用时，即使在执行 switchTo(frameX ) 与司机。

提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:17:46.080

不，您每次都必须“重新找到”该对象。Selenium 可能会抱怨对象不再在缓存中或附加到 DOM。

# winforms - “程序集名称或代码库无效”尝试添加新数据源

> ID：13929108
> 
> 赞同：0
> 
> 时间：2012-12-18T08:36:47.323
> 
> 标签：winforms, datasource

这是一个让我们发疯的问题。我们有一个旧的 VB2005 应用程序，它只需要添加一个新的 RDLC 报告。

但是，要添加 RDLC，我们需要添加一个新的数据源。每次我们尝试使用**Object**选项（不是数据集）添加新数据源时，我们都会收到此错误：

![在此处输入图像描述](../Images/53ac7b99a59ebe7c9d48fe297d605f2e.png)

现在，您可以在 Google 上获得一些帮助，但其中很多是针对 Web 项目的。这是一个 Winforms 项目。

这是我们尝试过的：

*   devenv.exe /重置设置
*   检查程序集名称中没有任何标点符号或奇怪的字符（这是 Google 最喜欢的解决方案） - 它没有
*   删除源代码控制 (Perforce)
*   从头开始重建项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:20:22.267

我们的解决方案是将项目升级到 VS2008。真的不想这样做，因为我们担心以不可预测的方式破坏应用程序的稳定性，只是为了在报告中进行编辑。

但实际上升级*确实*解决了数据源问题，至少到目前为止，还没有任何副作用。

# c# - 使用 C# 中 VB Net 制作的 VB 库

> ID：13929117
> 
> 赞同：4
> 
> 时间：2012-12-18T08:37:52.323
> 
> 标签：c#, vb.net, visual-studio

有时我们会遇到一些不支持 C# 的 VB.net 代码，例如 Mid、AscW、Asc、Right、Left .. 等，所以我制作了由 VBnet 制作的库。好吧，我的问题很简单

**这会有什么问题吗？如果我正在使用 NET 的 2 种语言进行开发？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:13:52.793

这里没有问题。`Microsoft.VisualBasic`只需在 C# 代码中添加对函数的引用并使用这些函数。[更多讨论这个问题的利弊](https://stackoverflow.com/questions/226517/is-the-microsoft-visualbasic-namespace-true-net-code)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T08:39:31.310

您可以将 .net 库导入任何其他 .net 语言项目。不是问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T08:46:47.947

我认为[此页面**（跨语言互操作性）**](http://msdn.microsoft.com/en-us/library/a2c7tshk.aspx)可能会对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T08:43:49.117

Alle .net 语言可以相互使用——应该没有问题。但是我会非常仔细地检查带有“mid”等的 VB.net 代码，这些都是旧的不推荐使用的 VB 6 风格的函数——程序员没有根据需要改变他的编程模型有一个巨大的变化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T09:12:53.787

这两种 .net 语言（我认为）都编译为[CLI](http://en.wikipedia.org/wiki/Common_Intermediate_Language)。一种介于机器代码和 C#/VB.NET 之间的中间语言。

当您链接到托管 DLL 时，源语言是什么没有区别，生成的 DLL 代码是相同的。事实上，许多反射器（显示托管 DLL 代码的源代码表示）都可以选择源代码语言。

因此，您可以链接到从任何 .net 语言创建的任何托管 DLL，并以任何（其他）.net 语言使用它。

* * *

如果您只是因为 , 等函数而使用 VB.NET 创建库`Mid`，`Left`您`Right`可能只想研究 C# 等价物或只用 C# 编写它们。

# c++ - 使用 C++ 的 FastCGI 和 spawn-fcgi 以外的其他启动方式

> ID：13929125
> 
> 赞同：2
> 
> 时间：2012-12-18T08:38:24.777
> 
> 标签：c++, fastcgi

我目前正在从事一个涉及 FastCGI 和 C++ 的项目。现在我找到了[官方的 FCGI 库](http://www.fastcgi.com/drupal/)。我尝试了回声示例。

```
/* 
 * echo.c --
 *
 *  Produce a page containing all FastCGI inputs
 *
 *
 * Copyright (c) 1996 Open Market, Inc.
 *
 * See the file "LICENSE.TERMS" for information on usage and redistribution
 * of this file, and for a DISCLAIMER OF ALL WARRANTIES.
 *
 */

#ifndef lint
static const char rcsid[] = "$Id: echo.c,v 1.1.1.1 2001/04/25 00:43:49 robs Exp $";
#endif /* not lint */

#include "fcgi_stdio.h"
#include <stdlib.h>

extern char **environ;

void PrintEnv(char *label, char **envp)
{
    printf("%s:<br>\n<pre>\n", label);
    for(; *envp != NULL; envp++) {
        printf("%s\n", *envp);
    }
    printf("</pre><p>\n");
}

void main ()
{
    char **initialEnv = environ;
    int count = 0;
    while(FCGI_Accept() >= 0) {
        char *contentLength = getenv("CONTENT_LENGTH");
        int len;
    printf("Content-type: text/html\r\n"
           "\r\n"
           "<title>FastCGI echo</title>"
           "<h1>FastCGI echo</h1>\n"
               "Request number %d <p>\n", ++count);
        if(contentLength != NULL) {
            len = strtod(contentLength, NULL);
        } else {
            len = 0;
        }
        if(len <= 0) {
        printf("No data from standard input.<p>\n");
        } else {
            int i, ch;
        printf("Standard input:<br>\n<pre>\n");
            for(i = 0; i < len; i++) {
                if((ch = getchar()) < 0) {
                    printf("Error: Not enough bytes received "
                           "on standard input<p>\n");
                    break;
        }
                putchar(ch);
            }
            printf("\n</pre><p>\n");
        }
        PrintEnv("Request environment", environ);
        PrintEnv("Initial environment", initialEnv);
    } /* while */
} 
```

我用命令 spawn-fcgi -p 8000 -n hello 启动这个脚本。

但是是否也可以在没有 spawn-fcgi 的情况下启动程序 xy。你知道一个很好的例子或文档吗？

感谢您的回答

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-11T18:19:41.647

spawn-fcgi 命令为您打开一个 TCP 连接并开始侦听指定端口（在您的情况下为 8000）。它将通过 TCP 连接传入的请求转发到应用程序的标准输入。它还将您对标准输出的写入转发回 TCP 连接。

您可以使用 FCGX_OpenSocket() 调用自己创建连接，然后将返回的套接字传递给 FCGX_InitRequest()。之后，您可以使用 FCGX_Accept_r() 而不是 FCGI_Accept() 进行循环！

顺便说一句：许多人使用另一种工具代替 spawn-fcgi - 主管。除了为您管理连接外，它还监控您的流程。因此，如果您的进程由于某些奇怪的请求而崩溃，它会重新启动您的应用程序！

# r - Mac OS X 上的 R 包构建失败

> ID：13929128
> 
> 赞同：0
> 
> 时间：2012-12-18T08:38:51.170
> 
> 标签：r, mongodb, build, package, cran

[根据这个问题](https://github.com/gerald-lindsly/rmongodb/issues/11)， MongoDB 驱动程序包[`rmongodb`](https://github.com/gerald-lindsly/rmongodb)会导致 R 2.15.2 崩溃。

作者已在 GitHub 上修复了该问题，但 CRAN 尚未更新。作者只能访问 Windows 平台，无法为 Mac OS X 构建包。当我尝试在 Mac OS XI 上从源代码安装包时，出现构建错误。

```
2087[SPX/r(ss_mongo_rep *)]$ r CMD INSTALL ~/Downloads/rmongodb-master/rmongodb.tar.gz 
* installing to library ‘/Library/Frameworks/R.framework/Versions/2.15/Resources/library’
* installing *source* package ‘rmongodb’ ...
** libs
*** arch - i386
make: *** No rule to make target `._api.o', needed by `rmongodb.so'.  Stop.
ERROR: compilation failed for package ‘rmongodb’
* removing ‘/Library/Frameworks/R.framework/Versions/2.15/Resources/library/rmongodb’
* restoring previous ‘/Library/Frameworks/R.framework/Versions/2.15/Resources/library/rmongodb’ 
```

我会很感激关于如何解决这个问题的指针，或者甚至更好的是，一个指向该包的 64 位 Mac OS X 二进制文件的链接。

# .net - 如何使用 JSON.NET 在 BSON 中将 GUID 序列化为本机 UUID

> ID：13929132
> 
> 赞同：4
> 
> 时间：2012-12-18T08:39:12.240
> 
> 标签：.net, json.net, bson

JSON.NET 似乎不想将 GUID 序列化为本机 BSON UUID，而是将 GUID 输出为字符串。

`JObject`我已经测试了从（在序列化之前验证`JValue.Type == JTokenType.Guid`）和匿名类型（ ）生成 BSON，`new { myUuid = new Guid() }`在这两种情况下都没有运气。

如何强制 JSON.NET 将 GUID 序列化为本机 BSON UUID（16 字节二进制值；子类型 = 0x04）？

*示例代码：*

```
var source = new
{
    myInteger = 123L,
    myFloat = 10.0f,
    myString = "hello",
    myUuid = Guid.NewGuid(),
    myBytes = new byte[] { 1, 2, 3, 4, 5, 6, 7 },
    myDatetime = DateTime.UtcNow,
};

MemoryStream buffer = new MemoryStream();
BsonWriter writer = new BsonWriter(buffer);
JsonSerializer serializer = new JsonSerializer();
serializer.Serialize(writer, source);
byte[] myBson = buffer.ToArray(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:43:43.273

问题来自（在版本 4.5.0.0 中）`WriteValue`的这个实现：`BsonWriter`

```
public override void WriteValue(Guid value)
{
  base.WriteValue(value);
  this.AddToken((BsonToken) new BsonString((object) value.ToString(), true));
} 
```

请注意第二行，它将 the 写[`Guid`](http://msdn.microsoft.com/en-us/library/system.guid.aspx)为字符串，这就是您看到结果的原因。

使用以下示例：

```
[TestMethod]
public void TestMethod1()
{
    var source = new
    {
        myUuid = Guid.NewGuid(),
    };

    using (var buffer = new MemoryStream())
    using (var writer = new BsonWriter(buffer))
    {
        var serializer = new JsonSerializer();
        serializer.Serialize(writer, source);
        byte[] myBson = buffer.ToArray();
    }
} 
```

我希望从索引 12 开始的字节是（根据[规范](http://bsonspec.org/#/specification)）：

*   `\0x05`指示二进制的类型
*   一个四字节的int（值为16，二进制数据的长度）
*   `\0x04`表示[UUID的子类型](http://en.wikipedia.org/wiki/Universally_unique_identifier)
*   16 个字节来表示`Guid`/UUID 的内容。

这显然是一个错误，[我已经在 J​​son.NET 的问题跟踪器中为此提交了一个错误](http://json.codeplex.com/workitem/23715)。

# ajax - AJAX：攻击者可以操纵返回的 JSON 吗？

> ID：13929137
> 
> 赞同：0
> 
> 时间：2012-12-18T08:39:28.050
> 
> 标签：ajax, json

我正在创建一个内部 Web 应用程序。虽然安全不是一个大问题，但我仍然有一个问题。如果网页进行 AJAX 调用，服务器会执行它的操作并返回 JSON 数据，然后由浏览器解释和显示数据。攻击者能否在此 jSON 数据到达客户端之前对其进行修改（例如，由网页脚本解释）？

我想是的？（没有 ssl 左右，纯 JSON）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:41:12.320

他当然可以！更简单的方法是将请求 URL 更改为他正在管理的页面。不要忘记 javascript 是在**客户端**运行的。所以没什么好担心的。

* * *

Zerkms 的评论确实有些道理。如果您要问黑客是否可以修改服务器和**另一个**客户端之间的数据，如果黑客可以访问客户端的网络或访问服务器的网络，那就是肯定的。

这就是 SSL 的用武之地。

# php - Mysql/PHP 如何以浮点格式选择和排序结果？

> ID：13929140
> 
> 赞同：1
> 
> 时间：2012-12-18T08:39:34.493
> 
> 标签：php, mysql, sql-order-by

请我有一个包含一些值（文本以及一些 int 或 float 值）的字段**值（文本类型）。**

所以我只想选择 float 和 integers 值并按字段**value**排序主题。

目前我可以单独获得浮点数，但问题是结果我以文本格式而不是浮点或整数格式排序主题（我猜这很正常）。例子 ：

```
33
33358
80
88000
90
99 
```

请大师们，我怎么能告诉我的查询将结果视为浮点数而不是文本并得到这个结果：

```
33
80
90
99
33358
88000 
```

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-18T08:43:10.237

```
ORDER BY field * 1 
```

或者

```
ORDER BY CAST(field as DECIMAL(10,5)) 
```

两者都应该做同样的事情，但第一个更容易/更快地编写。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T08:42:34.273

像下面的代码一样使用

```
ORDER BY ABS(columnname) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T09:03:42.277

在文本类型的字段中存储混合值不是一个好主意。如果您想对字段进行排序和过滤，我建议将它们用作单独的字段 - text、int、float 等。
如果您作为数据库管理员深入，它将有负面的性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T08:52:16.363

当您在查询中选择该变量然后按该列对结果集进行排序时，将 VALUE 转换为浮点/整数格式。

eg./ SELECT CAST(value as decimal(10,5)) AS customname FROM tablename order by customname

记住，你可以投射到任何你想要的东西。

# windows-phone-7 - Windows Phone ApplicationBar MenuItems 空间问题

> ID：13929143
> 
> 赞同：3
> 
> 时间：2012-12-18T08:39:41.313
> 
> 标签：windows-phone-7, windows-phone-8

我已经为 Windows Phone 7 开发了一个应用程序（它也正在更新到 Windows Phone 8），我在应用程序栏中遇到了一个特殊的 UI 问题。

我正在向 ApplicationBar 添加 4 个 ApplicationBarMenuItems。

但是当应用程序渲染 ApplicationBar 时，它会在 appBar 的底部显示额外的空间。

当我使用 3 个 ApplicationBarMenuItems 时，这不会发生。

注意：在 WP7.5 和 WP8 中都观察到此行为。

我找不到任何解释这一点或解决方法的官方文档。我偶然发现了下面的帖子，

[http://www.jeff.wilcox.name/2011/03/metro-design-guide-v1/](http://www.jeff.wilcox.name/2011/03/metro-design-guide-v1/)

其中指出，

> *应用程序栏根据其中的菜单项数量移动到特定大小。如果您有 4 件商品，它将显示 5 件的尺寸——因此在视觉上它可能看起来不太正确。如果可以，请尝试优化 3 或 5 个菜单项以获得最佳、最紧凑的外观。*

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T08:42:59.467

没有解决方法，你是对的，MSDN 中没有关于它的信息（[http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff431813(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff431813%28v=vs.105%29.aspx)）

# java - 从枚举 Java 中跳过一个元素

> ID：13929145
> 
> 赞同：0
> 
> 时间：2012-12-18T08:39:58.180
> 
> 标签：java, servlets, httprequest

我想使用枚举跳过某个请求参数。我使用下面的代码，但它没有给我想要的结果。谁能告诉我如何从枚举中跳过一个元素或者下面的代码有什么问题？

```
 for (Enumeration<String> e = request.getParameterNames(); e.hasMoreElements();) {
        if("James".equalsIgnoreCase(e.nextElement().toString())) {
            e.nextElement();
            continue;
        } else {
            list.add(e.nextElement().toString());
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T08:42:57.320

您在`nextElement()`每个循环中多次调用跳过多个元素。您只需调用`nextElement()`一次。就像是...

```
for (Enumeration<String> e = request.getParameterNames(); e.hasMoreElements();) {
    String value = e.nextElement();
    if(!"James".equalsIgnoreCase(value)) {
        list.add(value);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T08:43:38.217

问题是，您`e.nextElement()`在`if`. 这将消耗两个元素。

您应该首先将元素存储在 String 类型中，然后进行比较：-

```
for (Enumeration<String> e = request.getParameterNames(); e.hasMoreElements();) {
    String elem = e.nextElement();
    if("James".equalsIgnoreCase(elem)) {
        continue;
    } else {
        list.add(elem);
    }
} 
```

`toString()`之后你就不需要了`e.nextElement()`。它只会给你`String`，因为你使用的是泛型类型。

* * *

附带说明一下，在这种情况下，我更喜欢使用`while`循环，因为迭代次数不固定。以下是您的等效`while`循环版本`for-loop`： -

```
{
    Enumeration<String> e = request.getParameterNames();

    while (e.hasMoreElements()) {
        String elem = e.nextElement();
        if(!"James".equalsIgnoreCase(elem)) {
            list.add(elem);
        } 
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T08:47:33.360

因为每次[调用](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Enumeration.html#nextElement%28%29) `nextElement()`所以每次调用这个方法都会从枚举中获取下一个元素。如果在枚举中没有对象并且您将尝试获取它，您也可能会遇到异常。

```
NoSuchElementException - if no more elements exist. 
```

所以只需更改您的代码并`nextElement()`只调用一次。

```
for (Enumeration<String> e = request.getParameterNames(); e.hasMoreElements();) {
    String str= e.nextElement().toString();
    if("James".equalsIgnoreCase(str)) {
        continue;
    } else {
        list.add(str);
    }
} 
```

# jquery - 为什么 jQuery .html() 没有得到完整的 html 代码？

> ID：13929150
> 
> 赞同：-4
> 
> 时间：2012-12-18T08:40:06.397
> 
> 标签：jquery, html

我有一个按钮。当我点击它时，我想从 div 中获取 HTML。这个 div 包含一些表格行。

## 微小的标记

```
<div class="new">
    <tr>
        <td><strong>New</strong></td>
        <td>Hi</td>
    </tr>
</div>​ 
```

当我想获取 HTML 并将其放在表格中时，出现了问题。

我从中得到什么`$('.new').html()`

```
<strong>New</strong>
hi 
```

看起来 jQuery 不接受这些`<tr><td>`部分。

有谁知道如何实现这一目标？

[http://jsfiddle.net/PQXxV/](http://jsfiddle.net/PQXxV/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T08:46:05.447

你的标记是无效的，仅仅因为你这样写你的 html 文本并不意味着浏览器会按照你的意愿解析它，它有规则，如果你的标记是无效的，它会尝试为你修复它。

如果它是一个模板，你可以使用脚本标签：

```
<script type="x-template" class="new">
    <tr>
        <td><strong>New</strong></td>
        <td>Hi</td>
    </tr>
</script>

<table>
    <tr>
        <td><strong>Old</strong></td>
        <td>Hello</td>
    </tr>
</table> 
```

演示：http: [//jsfiddle.net/PQXxV/10/](http://jsfiddle.net/PQXxV/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T08:45:17.817

`<tr>`并且`<td>`仅在`<table>`Being inside中有效，`div`它被简单地忽略。你应该把它放在一张桌子里：http: [//jsfiddle.net/PQXxV/5/](http://jsfiddle.net/PQXxV/5/)

这是一个代码：

```
$('table').append($('.new').html());

alert($('.new tbody').html());
​ 
```

对于这样的html：

```
<div class="new" style="display:none;">
    <table>
       <tr>
           <td><strong>New</strong></td>
           <td>Hi</td>
       </tr>
    </table>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T08:45:22.333

```
<div class="new">
    <table>
        <tr>
            <td><strong>New</strong></td>
            <td>Hi</td>
        </tr>
   </table>
</div> 
```

使用 访问它`$(".new table").html()`，然后删除必要的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T08:45:42.123

使用 chrome，如果你用 class 检查 div `new`，你会发现 Chrome 会去掉`<tr>`and`<td>`留下这个：

```
<div class="new" style="display:none;">    
        <strong>New</strong>
        Hi    
</div> 
```

这是警报返回的内容。因此，要回答您的问题，请`.html()`返回完整的 html。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T08:47:05.767

浏览器不会完全呈现我们编写的 html，它会忽略一些标签并添加一些额外的标签，这与您的示例一样。由于缺少表格元素，它会忽略 tr 和 td

[这是 JS 小提琴](http://jsfiddle.net/zaheerahmed/PQXxV/8/)

```
<div class="new" style="display:none;">
    <table>
    <tr>
        <td><strong>New</strong></td>
        <td>Hi</td>
    </tr>
</table>
</div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T08:47:58.800

从[jQuery.html()](http://api.jquery.com/html/)文档中，

> 此方法使用浏览器的**innerHTML 属性**。某些浏览器可能不会返回与原始文档中的 HTML 源完全相同的 HTML。例如，如果属性值仅包含字母数字字符，Internet Explorer 有时会省略属性值的引号。

您的 html 结构无效，因为`tr`不能直接嵌套到`div`. 您应该将其更改为`table`，一切都会奏效。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-12-18T08:49:55.870

```
<div class="new" style="display:none;">
    <tr>
        <td><strong>New</strong></td>
        <td>Hi</td>
    </tr>
</div>

<table>
    <tbody>
    <tr>
        <td><strong>Old</strong></td>
        <td>Hello</td>
    </tr>
    </tbody>
</table>
Add a tbody tag and then use the below will get the result
$('table > tbody').append($('.new').html()); 
```

# ruby-on-rails - 具有相同期望的示例组

> ID：13929151
> 
> 赞同：0
> 
> 时间：2012-12-18T08:40:14.047
> 
> 标签：ruby-on-rails, rspec, rspec-rails

登录的用户可以访问资源，并且可以通过不同的方式到达那里。我想要一个示例组，每个测试都具有相同的期望。

我将`page.should have_content("...")`期望放在一个`after(:each)`块中，但这不是一个很好的解决方案：如果我将它声明为挂起，它无论如何都会失败。如果失败，则错误（起初）显示为白色。

我应该如何编写每个都有相同期望的示例组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T10:12:44.633

听起来您想要一个共享的示例组：

```
describe 'foo' do
  shared_examples "bar" do
    it 'should ...' do
    end
  end

  context "when viewing in the first way" do
    before(:each) do
        ...
    end

    it_behaves_like 'bar'
  end

  context "when viewing in the second way" do
    before(:each) do
        ...
    end

    it_behaves_like 'bar'
  end
end 
```

在之前的块中，您可以进行设置，以便以正确的方式执行操作。另一种方法是让您的共享示例调用一个方法并在每个上下文中`do_foo`提供不同的实现。`do_foo`

You can also have shared contexts if what you want to share is the setup stuff.

# jython - jython的静态代码分析工具

> ID：13929154
> 
> 赞同：0
> 
> 时间：2012-12-18T08:40:37.727
> 
> 标签：jython, static-code-analysis

我正在寻找用于 jython 的静态代码分析工具，其中包含有用的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:37:59.380

您是否尝试过“常规”Python 代码检查器：pylint 和 pychecker？

# java - BitmapFactory.decode 在尝试下载 imgs 并加载到网格时返回 null

> ID：13929157
> 
> 赞同：0
> 
> 时间：2012-12-18T08:40:44.417
> 
> 标签：java, android, jpeg, bitmapfactory

我是 Java 和 Android 开发的新手。我试图从谷歌图像下载 jpg 图像并在网格中显示它们，但 BitmapFactory.decode 总是返回 null。我在 Mac 上工作，但没有成功启动 avd 来检查下载的文件（我无法访问带有 ADT 的设备上的文件层次结构......我猜它只适用于 AVD）。我检查了不下载 CMJN 图像，我检查了文件是否下载成功但没有成功...

这是完整的代码......任何帮助表示赞赏:)

Android 清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.test.downloadjpgtest"
android:versionCode="1"
android:versionName="1.0" >
<uses-permission android:name="android.permission.INTERNET" />
<uses-sdk
    android:minSdkVersion="15"
    android:targetSdkVersion="16" />
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
        <activity
            android:name="com.test.downloadjpgtest.Main"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

资源/布局/activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/gridview"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:columnWidth="90dp"
    android:numColumns="auto_fit"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="10dp"
    android:stretchMode="columnWidth"
    android:gravity="center"
/> 
```

com.test.downloadjpgtest/Main.java

```
package com.test.downloadjpgtest;

import java.io.File;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.support.v4.app.NavUtils;
import android.util.Log;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.Toast;

public class Main extends Activity {
GridView gridview;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    // GetLibraryTask
    DownloadTask downloadTask = new DownloadTask(this);
    downloadTask.execute("http://sphotos-b.xx.fbcdn.net/hphotos-ash4/c0.0.400.400/p403x403/382050_498705510162306_1891776516_n.jpg",
                                                "http://data.alipson.fr/ravensburger.17/ravensburger-puzzle-1000-pieces-panoramique-amitie-entre-animaux-.44481-1.jpg",
                                                "http://a388.idata.over-blog.com/400x400/3/03/14/36/mammiferes/lynx-canada-04.jpg",
                                                "http://photos.ugal.com/6353/43314/205322/246370/vignette-chapeaux-animaux.400.jpg"
                                                );

    // grille des couvertures
    gridview = (GridView) findViewById(R.id.gridview);
}

// called well all downloads finished
public void setGridAdapter(){
    gridview.setAdapter(new ImageAdapter(this));

    gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            Toast.makeText(Main.this, "" + position, Toast.LENGTH_SHORT).show();
        }
    });
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            NavUtils.navigateUpFromSameTask(this);
            return true;
    }
    return super.onOptionsItemSelected(item);
}

public class ImageAdapter extends BaseAdapter {
    private Context mContext;
    public Bitmap[] imgs;

    public ImageAdapter(Context c) {
        mContext = c;
        get_images();
    }

    public int getCount() {
        return imgs.length;
    }

    public Object getItem(int position) {
        return imgs[position];
    }

    public long getItemId(int position) {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        } else {
            imageView = (ImageView) convertView;
        }
        imageView.setImageBitmap(imgs[position]);
        return imageView;
    }

    private void get_images(){
        File directory = mContext.getDir("jpgfolder", Context.MODE_PRIVATE);
        File[] filesInJPGFolder = directory.listFiles();
        imgs = new Bitmap[filesInJPGFolder.length];

        for (int cpt=0; cpt<filesInJPGFolder.length;cpt++){
            File imgFile = new  File(filesInJPGFolder[cpt].toString());
            imgs[cpt] = BitmapFactory.decodeFile(imgFile.getAbsolutePath()); // imgs[cpt] Always Null !!!!!!!!!
            Log.d("Main", "imgCovers[cpt] " + imgs[cpt]);
        }
    }
} 
```

}

com.test.downloadjpgtest/DownloadTask.java

```
package com.test.downloadjpgtest;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import org.apache.http.client.ClientProtocolException;
import android.app.Activity;
import android.content.Context;
import android.content.ContextWrapper;
import android.os.AsyncTask;
import android.util.Log;

public class DownloadTask extends AsyncTask<String, Void, String> {
private Activity activity;
private static final int files2Download = 4;
private static int filesDownloaded = 0;

public DownloadTask(Activity activity){
    this.activity = activity;
}
@Override
protected void onPreExecute() {
    super.onPreExecute();
}

@Override
protected String doInBackground(String... args) {               
    this.saveFileOnDisk(args[0], "1.jpg");
    this.saveFileOnDisk(args[1], "2.jpg");
    this.saveFileOnDisk(args[2], "3.jpg");
    this.saveFileOnDisk(args[3], "4.jpg");
    return "ok"; // just to return a string
}

protected String saveFileOnDisk(String urlString, String outputName){
    try {
        // in
        URL url = new URL(urlString);
        InputStream input = url.openConnection().getInputStream();

        // out
        ContextWrapper contextWrapper = new ContextWrapper(activity.getApplicationContext());
        File directory = contextWrapper.getDir("jpgfolder", Context.MODE_PRIVATE);
        File newFile = new File(directory, outputName);
        newFile.createNewFile();
        FileOutputStream fos = this.activity.getApplicationContext().openFileOutput(outputName, Context.MODE_PRIVATE);
        int read;
        byte[] data = new byte[1024];
        while ((read = input.read(data)) != -1)
            fos.write(data, 0, read);
        fos.close();
        DownloadTask.filesDownloaded++;
        return newFile.getAbsolutePath();
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return "ko";
}

protected void onProgressUpdate(String... progress) {
    Log.i("progress", progress[0]);
}

@Override
protected void onPostExecute(String result) {
    try {
        Log.d("DownloadTask", "All downloads finished");
        // check downloaded files
                    ContextWrapper contextWrapper = new ContextWrapper(activity.getApplicationContext());
                    File directory = contextWrapper.getDir("jpgfolder", Context.MODE_PRIVATE);
                    File[] filesInDirectory = directory.listFiles();
                    for(int i=0, max = filesInDirectory.length; i < max; i++){
                        Log.i("DownloadTask", "file " + i + " > " + filesInDirectory[i] + " exist?" + filesInDirectory[i].exists());
                    }
        // set grid adapter ... cf Main.java
        ((Main) this.activity).setGridAdapter();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:26:35.970

首先，您确定该文件夹`jpgfolder`存在吗？因为`getDir`如果不退出该方法就不会创建它。

如果这不是问题，之前有一个答案：[BitmapFactory.decodeFile 返回 null 即使存在](https://stackoverflow.com/questions/3388898/bitmapfactory-decodefile-returns-null-even-image-exists)可以提供帮助的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:30:27.017

只需进行一些更改即可使我工作：

主.java

```
package com.test.downloadjpgtest;

import java.io.File;
import java.util.ArrayList;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.support.v4.app.NavUtils;
import android.util.Log;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.Toast;

public class Main extends Activity {
    GridView gridview;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        // récupère la GridView
        gridview = (GridView) findViewById(R.id.gridview);

        // GetLibraryTask
        DownloadTask downloadTask = new DownloadTask(this);
        downloadTask.execute("http://sphotos-b.xx.fbcdn.net/hphotos-ash4/c0.0.400.400/p403x403/382050_498705510162306_1891776516_n.jpg",
                             "http://data.alipson.fr/ravensburger.17/ravensburger-puzzle-1000-pieces-panoramique-amitie-entre-animaux-.44481-1.jpg",
                             "http://a388.idata.over-blog.com/400x400/3/03/14/36/mammiferes/lynx-canada-04.jpg",
                             "http://photos.ugal.com/6353/43314/205322/246370/vignette-chapeaux-animaux.400.jpg");
    }

    // called well all downloads finished
    public void setGridAdapter(){
        gridview.setAdapter(new ImageAdapter(this));

        gridview.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
                Toast.makeText(Main.this, "" + position, Toast.LENGTH_SHORT).show();
            }
        });
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case android.R.id.home:
                NavUtils.navigateUpFromSameTask(this);
                return true;
        }
        return super.onOptionsItemSelected(item);
    }

    public class ImageAdapter extends BaseAdapter {
        private Context mContext;
        public Bitmap[] imgs;

        public ImageAdapter(Context c) {
            mContext = c;
            getImages();
        }

        public int getCount() {
            return imgs.length;
        }

        public Object getItem(int position) {
            return imgs[position];
        }

        public long getItemId(int position) {
            return 0;
        }

        // create a new ImageView for each item referenced by the Adapter
        public View getView(int position, View convertView, ViewGroup parent) {
            ImageView imageView;
            if (convertView == null) {  // if it's not recycled, initialize some attributes
                imageView = new ImageView(mContext);
                imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
                imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
                imageView.setPadding(8, 8, 8, 8);
            } else {
                imageView = (ImageView) convertView;
            }
            imageView.setImageBitmap(imgs[position]);
            return imageView;
        }

        private void getImages(){
            ArrayList<Bitmap> bitmaps = new ArrayList<Bitmap>();
            for (File imgfile : DownloadTask.getImages(this.mContext)) {
               Bitmap bmp = BitmapFactory.decodeFile(imgfile.getAbsolutePath());
               if (bmp != null)
                   bitmaps.add(bmp);
             }
             this.imgs = bitmaps.toArray(new Bitmap[bitmaps.size()]);
        }

    }
} 
```

下载Task.java

```
package com.test.downloadjpgtest;

import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import android.app.Activity;
import android.content.Context;
import android.os.AsyncTask;
import android.os.Environment;
import android.util.Log;

public class DownloadTask extends AsyncTask<String, Void, String> {
    private Activity activity;

    public DownloadTask(Activity activity){
        this.activity = activity;
    }
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
    }

    @Override
    protected String doInBackground(String... args) {       
        int idx = 0;
        for (String urlString : args) {     
            String name = Integer.toString(++idx)+".jpg";
            URL url = null;
            try {
                url = new URL(urlString);
            } catch (MalformedURLException ex) {
                Log.e("DownloadTask","MalformedURLException",ex);
            }
            saveFileOnDisk(url, name);
        }
        return "ok"; // just to return a string
    }

    protected String saveFileOnDisk(URL url, String outputName){
        BufferedInputStream bis = null;
        try {
            bis = new BufferedInputStream(url.openConnection().getInputStream());
            File directory = DownloadTask.getImageDirectory(this.activity);
            File newFile = new File(directory, outputName);

            BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(newFile));
            int bytesRead;
            byte[] data = new byte[4096];
            while ((bytesRead = bis.read(data)) != -1){
                bos.write(data, 0, bytesRead);
            }
            Log.d("DownloadTask", "writing data bos " + directory.getAbsolutePath() + '/' + outputName);
            bos.flush();
            bos.close();
            return newFile.getAbsolutePath();
        } catch (Exception ex) {
            Log.e("DownloadTask","Failed to download or write image file",ex);
        } finally {
            if (bis != null)
                try { 
                    bis.close(); 
                }
                catch (Exception ex) {
                    Log.e("DownloadTask","Failed to gracefully close input stream",ex);
                }
        }
        return "ko";
    }

    protected void onProgressUpdate(String... progress) {
        Log.i("progress", progress[0]);
    }

    public static File[] getImages(Context ctxt)
    {
        File[] files = getImageDirectory(ctxt).listFiles();
        return files;
    }

    public static File getImageDirectory(Context ctxt)
    {
        return Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES);
        //return ctxt.getDir("jpgfolder", Context.MODE_PRIVATE);
    }

    @Override
    protected void onPostExecute(String result) {
        try {
            Log.d("DownloadTask", "All downloads finished");
            // check downloaded files
            File[] filesInDirectory = DownloadTask.getImages(this.activity);
            for(int i=0, max = filesInDirectory.length; i < max; i++){
                Log.i("DownloadTask", "onPostExecute: file " + i + " > " + filesInDirectory[i]);
            }
            // set grid adapter ... cf Main.java
            ((Main) this.activity).setGridAdapter();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

# sql - 使用同一表中另一列的值更新每一行

> ID：13929158
> 
> 赞同：10
> 
> 时间：2012-12-18T08:40:45.163
> 
> 标签：sql, sql-server-2008

我有以下表格内容示例

```
+ Column1 | Column2 | Column3 +
+---------|---------|---------+
+   1     | val.txt |         +
+   2     | test.xls|         +
+   3     | abc.dwg |         +
+   4     | y.txt   |         +
+---------|---------|---------+ 
```

我想`Column3`使用来自 的信息进行更新`Column2`，这意味着我想（在这种情况下）从中提取扩展名`Column2`并将其放入`Column3`.

我希望结果看起来像

```
+ Column1 | Column2 | Column3 +
+---------|---------|---------+
+   1     | val.txt |   .txt  +
+   2     | test.xls|   .xls  +
+   3     | abc.dwg |   .dwg  +
+   4     | y.txt   |   .txt  +
+---------|---------|---------+ 
```

如何通过`UPDATE`声明做到这一点？

我知道如何提取扩展名：

```
SUBSTRING(Column2, LEN(Column2)-3, LEN(Column2)) AS Extension 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-18T08:42:43.273

这个怎么样：

```
UPDATE dbo.YourTable
SET Column3 = SUBSTRING(Column2, LEN(Column2)-3, LEN(Column2)) 
```

如果需要，您还可以包含一个`WHERE`子句来限制正在更新的行，例如：

```
UPDATE dbo.YourTable
SET Column3 = SUBSTRING(Column2, LEN(Column2)-3, LEN(Column2)) 
WHERE Column3 IS NULL 
```

或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T08:51:21.983

试试这个

```
 UPDATE dbo.YourTable
    SET Column3 =SUBSTRING(Column2,CHARINDEX('.',Column2,0),(LEN(Column2)-CHARINDEX('.',Column2,0)+1)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-29T19:57:57.650

要提取最后 4 个字符，最简单的方法是

```
UPDATE dbo.YourTable
SET Column3 = RIGHT(Column2,4); 
```

提取最后一个点右侧的所有内容，以便正确使用文件名，例如`Foo.designer.cs`您可以使用

```
UPDATE dbo.YourTable
SET    Column3 = '.' + RIGHT(Column2, CHARINDEX('.', REVERSE('.' + Column2)) - 1) 
```

# c++ - 纹理未正确显示 - 可能坐标是错误的 OpenGL、C++

> ID：13929160
> 
> 赞同：8
> 
> 时间：2012-12-18T08:40:58.643
> 
> 标签：c++, opengl, graphics, textures

我将尝试解释我的图像问题。所以这是我用于 OpenGL 应用程序的测试纹理：

![](../Images/23871c8841d7b3be603c603351806929.png)

如您所见，图像周围有一个 2 像素宽的边框，具有不同的颜色，以便我能够查看在我的应用程序中是否正确设置了坐标。

我正在使用 9 单元格图案，因此我正在绘制具有特定纹理坐标的 9 个四边形。乍一看一切正常，但显示纹理有一个小问题：

![在此处输入图像描述](../Images/ea6b3b9157b733af161fe2ada1b9498a.png)

在图片中，我标记了第一个四边形在哪里，第二个在哪里。如您所见，第一个显示正确，但第二个从第一个四边形的颜色平滑地变为它自己的颜色，但它应该以纯绿色和粉红色开始。所以我猜这是纹理坐标的问题。

这是它们的设置方式：

```
// Bottom left quad [1st quad]
glBegin(GL_QUADS);
    // Bottom left
    glTexCoord2f(0.0f, 1.0);                
    glVertex2i(pos.x, pos.y + height);

    // Top left
    glTexCoord2f(0.0f, (GLfloat)1.0 - maxTexCoordBorderY);  
    glVertex2i(pos.x, pos.y + height - m_borderWidth);

    // Top right
    glTexCoord2f(maxTexCoordBorderX, (GLfloat)1.0 - maxTexCoordBorderY);
    glVertex2i(pos.x + m_borderWidth, pos.y + height - m_borderWidth);

    // Bottom right
    glTexCoord2f(maxTexCoordBorderX, 1.0);
    glVertex2i(pos.x + m_borderWidth, pos.y + height);
glEnd();

// Bottom middle quad [2nd quad]
glBegin(GL_QUADS);
    // Bottom left
    glTexCoord2f(maxTexCoordBorderX, 1.0);          
    glVertex2i(pos.x + m_borderWidth, pos.y + height);

    // Top left
    glTexCoord2f(maxTexCoordBorderX, (GLfloat)1.0 - maxTexCoordBorderY);
    glVertex2i(pos.x + m_borderWidth, pos.y + height - m_borderWidth);

    // Top right
    glTexCoord2f((GLfloat)1.0 - maxTexCoordBorderX, (GLfloat)1.0 - maxTexCoordBorderY);
    glVertex2i(pos.x + width - m_borderWidth, pos.y + height - m_borderWidth);

    // Bottom right
    glTexCoord2f((GLfloat)1.0 - maxTexCoordBorderX, 1.0);   
    glVertex2i(pos.x + width - m_borderWidth, pos.y + height);
glEnd(); 
```

您可以看到我正在使用`maxTexCoordBorderX`根据边框和图像大小计算的变量。图像宽度为 32，边框宽度为 2。

`maxTexCoordBorderX`= 2 / 32 = 0.0625

有人可以帮忙找出问题所在吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T09:00:12.697

最可能的罪魁祸首是您没有在纹素中心进行采样。例如，如果您有一个 32x32 像素的纹理，则 texel-centers 偏移 1/64。

这是 4x4 纹理的粗略图。正方形是图像的纹素（或像素）。

```
_________________1,1
| | | | |
| | | | |
|___|___|___|___|_0.75
| | | | |
| | | | |
|___|___|___|___|_0.5
| | | | |
| | | | |
|___|___|___|___|_0.25
| | | | |
| X | | | |
|___|___|___|___|
0,0 | 0.5 | 1
   0.25 0.75

x = (0.125, 0.125)

```

如果您在其中一条线上进行采样，您将获得两个纹理像素之间的值，这将（如果您将纹理采样设置为线性混合）为您提供平均值。如果要对精确的纹素值进行采样，则需要在纹素的中心指定 au,v。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T09:32:05.377

您遇到了围栏问题。我在这里回答了您的问题的解决方案

[https://stackoverflow.com/a/5879551/524368](https://stackoverflow.com/a/5879551/524368)

# iphone - 如何动画子视图从一个视图移动到另一个视图？

> ID：13929165
> 
> 赞同：2
> 
> 时间：2012-12-18T08:41:18.737
> 
> 标签：iphone, uiview

我如何将 UIView 中的子视图移动到 UIView 框架之外，并在底部看到外部的值！抱歉，请看我的图片以了解，我不想使用滚动视图，也不要使用重复的视图来执行此操作。

![在此处输入图像描述](../Images/4e71bc8461f90bf9e306e79cc74e4392.png)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:29:25.157

您必须复制子视图。没有其他办法，因为您不能两次添加相同的子视图。

如果您尝试将现有子视图添加到另一个视图，它将自动从其父视图中删除。

复制视图后，您可以按照您描述的方式为它们设置动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:45:21.173

**更新**

在这里创建相同的两个子视图，在设置框架之后都像波纹管......

```
- (void)viewDidLoad
{
    yourSubview1.frame = CGRectMake(yourSubview1.frame.origin.x, 200, yourSubview1.frame.size.width, yourSubview1.frame.size.height);

    yourSubview2.frame = CGRectMake(yourSubview2.frame.origin.x, 400, yourSubview2.frame.size.width, yourSubview2.frame.size.height);

} 
```

之后当你想移动子视图时，只需调用下面的代码......

```
 [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.3];
    yourSubview1.frame = CGRectMake(yourSubview1.frame.origin.x, yourSubview1.frame.origin.y - 100, yourSubview1.frame.size.width, yourSubview1.frame.size.height);
    yourSubview2.frame = CGRectMake(yourSubview2.frame.origin.x, yourSubview2.frame.origin.y - 100, yourSubview2.frame.size.width, yourSubview2.frame.size.height);
    //// set `y` where you want to display just like i minus the y with 100 so its move above with 100 point of y 
    [UIView commitAnimations]; 
```

这只是一个示例，您可以使用框架和计时器进行设置..

我希望这对你有帮助....

# javascript - ExtJS：检查组件是否是 Ext.TabPanel 的直接后代

> ID：13929166
> 
> 赞同：1
> 
> 时间：2012-12-18T08:41:21.017
> 
> 标签：javascript, extjs

到目前为止，我的每一个问题都已经在这里被问及并得到了回答，非常感谢我已经来到这里的所有时间机器的帮助。:) 但总有一天一切都会结束，所以这是我自己的第一个问题：

出于错误处理的目的，我尝试在添加所有有趣的组件时将一些通用侦听器附加到它们。这可以通过`Ext.ComponentMgr.all.on('add', function (cnt, cmp) {})`. 然后我看看它是什么类型的组件，例如为每个按钮添加一个点击监听器。

我现在需要做的是为每个添加到选项卡面板的面板添加一个激活侦听器。我的问题是：我不知道如何确定组件是否是选项卡面板的直接后代以及如何以正确的方式进行操作。

我已经尝试过了：

```
Ext.ComponentMgr.all.on('add', function (cnt, cmp) {
    if (cmp.ownerCt != undefined && cmp.ownerCt.getXType () == 'tabpanel') {
        console.log (cmp.getXType () + ' in tabpanel with id "' + cmp.getId ());
    }
}); 
```

坏事是，一些 Ext 文档显示“不要依赖 ownerCt”，这是正确的：我的每个其他组件都有一个 ownerCt，但当晚添加到选项卡面板时没有面板。

我知道有 Ext.Panel.findParentByType()，但这会在上面的任何级别找到容器，我认为这不是正确的方法（-> 性能）。

提前感谢您的每一个答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:19:13.013

正如您所说，根据您执行操作的顺序， ownerCt 可能会在构建过程中随时插入。为什么不创建一个自动为您处理它的选项卡面板子类？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:49:54.033

我做了更多的试验和错误，并为自己找到了解决方案。我想我应该和你分享一下，也许有一天有人可以使用它：

当`Ext.ComponentMgr.all.on('add', function (cnt, cmp) {})`触发时，ownerCt 当然是空的，因为组件只是被创建，而不一定被添加到另一个组件。

所以我做了以下事情：

```
Ext.ComponentMgr.all.on('add', function (cnt, cmp) {
  cmp.addListener ('added', function (cmp) {
    var parent = cmp.findParentByType ('tabpanel');
    if (parent != undefined) {
      if (parent.items.contains (cmp)) {
        cmp.addListener ('activate', function (cmp) {
          doThings();
        });
      }
    }
  });
} 
```

*   将组件添加到组件管理器 ( ) 时，为组件`new Ext.Panel()`创建侦听器`added`
*   添加时，检查是否有任何父级是选项卡面板
*   如果是，请检查您的组件是否是选项卡面板的直接后代（= 包含在其项目中）
*   ？？？
*   利润！

# linux - 插入 scsi_wait_scan 时出错 - 模块格式无效

> ID：13929176
> 
> 赞同：0
> 
> 时间：2012-12-18T08:42:05.240
> 
> 标签：linux, linux-kernel, boot, initrd

系统为CentOS 6.3。

我已经编译了一个新内核并将生成的 rpm 安装在目标机器上。从内核启动时，我收到问题标题中的错误。

我提取了相应的 initramfs 并比较了以下输出：

```
 modprobe --dump-modversions /path/to/scsi_wait_scan.ko 
```

在相应的 /boot/ **symvers** -* 中包含条目。所有符号校验和都适合，包括**module_layout**。

有没有办法从内核本身中提取**符号？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:39:58.087

我发现了问题。

**简短的回答**

问题是我在已经安装的内核 rpm (A) 上安装了内核 rpm (B)，而没有先将其删除。

**详细解答**

`scsi_mod.ko`仅由 (A) 拥有。安装 (B) 时，`scsi_mod.ko`位于 /lib/modules/ 中。在 (B) 的安装后脚本中创建 inramfs 时。depmod 决定`scsi_wait_scan.ko`取决于`scsi_mod.ko`，而两者都针对不同的配置进行构建。

稍后在启动机器时，内核开始运行 initramfs。这反过来 modprob'ed `scsi_wait_scan.ko`。modprobe 尝试作为结果加载`scsi_mod.ko`，这不适合当前内核，从而导致我看到的错误。

# android - 如何唯一地识别广播意图

> ID：13929190
> 
> 赞同：0
> 
> 时间：2012-12-18T08:42:50.637
> 
> 标签：android, android-intent, broadcastreceiver

在我的应用程序中，我必须接收 USER_PRESENT 和 AIRPLANE_MODE 意图。但是每个意图都被广播了两次（有时是三次），这是我不想要的。我试图使用 SharedPreferences 解决这个问题，但我需要唯一地识别每个意图（如果有，则使用任何“id”或时间戳等）。

以下是我试图只允许一个 onReceive 调用的代码。

```
@Override
public void onReceive(Context context, Intent intent) {

final SharedPreferences instanceCount = context.getSharedPreferences("Instances",Context.MODE_WORLD_WRITEABLE); 
   SharedPreferences.Editor instance_editor = instanceCount.edit();
    if(instanceCount.getBoolean("instance",true))
    {
        instance_editor.putBoolean("instance",false);
        instance_editor.commit();
    }
    else
    {
        instance_editor.putBoolean("instance",true);
        instance_editor.commit();
        return;
    } 
                          .
                          .
                          .
                          .
} 
```

任何人都可以帮助解决这个问题。谢谢你 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:45:45.500

这些是系统广播，您无法控制它们被广播的次数。使您的接收器具有幂等性，例如，即使它被多次调用，它也保持相同的状态。不要计算广播，而是保存应用的当前状态并在收到广播时检查它。如果你已经处于想要的状态，什么也不做。否则，根据需要更改状态并保存。

# openssl - 如何使用 OpenSSL FIPS 对象模块 v2.0 中的 DRBG

> ID：13929200
> 
> 赞同：3
> 
> 时间：2012-12-18T08:43:32.103
> 
> 标签：openssl, fips

我正在尝试将 OpenSSL FIPS 对象模块 v2.0 与基本 OpenSSL 库 (1.0.1c) 一起使用，以使我的应用程序符合 FIPS 140-2 投诉。问题是我无法弄清楚如何使用 FIPS 对象模块中的 DRBG API 来替换我的 RAND_* 调用。

我可以在 OpenSSL 模块中看到很少的 RAND_bytes 调用实例，并且还在其他库/源文件（OpenSSL 之外）中使用它们。[http://www.openssl.org/docs/fips/UserGuide-2.0.pdf](http://www.openssl.org/docs/fips/UserGuide-2.0.pdf)中提供的用户文档讨论了各自的 API，但没有说明哪些调用需要映射到其各自的 RAND_* 对应项。

我曾尝试在各种论坛上查找此信息，但到目前为止还不是很幸运。如果有人可以帮助我了解如何使用这些调用并替换当前正在使用的 RAND_* 调用，我将不胜感激。

谢谢，桑迪普

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-02T05:19:42.303

> 问题是我无法弄清楚如何使用 FIPS 对象模块中的 DRBG API 来替换我的 RAND_* 调用。

一旦你调用`FIPS_mode_set`（并假设它返回非零），你正在使用 NIST 批准的 DRBG。从 OpenSSL 的[随机数 wiki 页面](http://wiki.openssl.org/index.php/Random_Numbers)：

> 默认 DRBG 是使用派生函数的 256 位 CTR AES ... 要使用 FIPS 随机数生成器，只需使用前面所述的 RAND_bytes。请注意，对 FIPS_mode_set 的调用必须成功才能在 FIPS 140 模式下运行。

# c++ - 派生的基本访问的朋友

> ID：13929203
> 
> 赞同：0
> 
> 时间：2012-12-18T08:43:42.610
> 
> 标签：c++, inheritance, encapsulation, friend, access-control

我遇到了[这个](http://www.cplusplus.com/forum/general/15892/)悬而未决的问题，这真的很令人费解。这种行为应该有意义吗？它在标准中吗？这是问题：

```
class parentFriend;
class parent
{
  friend class parentFriend;
  public: void f1(){};
  protected: void f2(){};
  private: void f3(){};
};
class childpub: public parent {};
class childprot: protected parent {};
class childprv: private parent {};
class parentFriend
{
  public:
  void f()
  {
    /* which of the following statements will compile? why? why not?*/
    parent p; p.f1(); p.f2(); p.f3(); // these will compile 
    childpub cpub; cpub.f1(); cpub.f2(); cpub.f3();
    childprot cprot; cprot.f1(); cprot.f2();
    cprot.f3(); // does not compile 
    childprv cprv;
    cprv.f1(); // does not compile 
    cprv.f2(); // does not compile 
    cprv.f3(); // does not compile 
  }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:51:17.453

根据我阅读您发布的链接的理解（另请参见相同的问题[here](http://www.cpp-home.com/forum/viewtopic.php?f=4&t=16513%29.) with some answers），原始问题的作者对gcc编译器的行为感到惊讶（2009年的线程，线程中提到的gcc版本4.0.1 ) 编译时没有错误这一行，而它不应该有：

```
childprot cprot; cprot.f1(); cprot.f2(); // (2) 
```

我用 MSVC 2010 试过你的代码，这条线没有编译，友谊没有像标准所期望的那样被继承。

# javascript - 如何显示另一个变量的值？

> ID：13929215
> 
> 赞同：31
> 
> 时间：2012-12-18T08:44:27.227
> 
> 标签：javascript

```
var foo = "bar"
var bar  = "realvalue"; 
```

是否可以打印`bar`using的值`foo`？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-18T08:46:40.350

方法一：全局变量

```
var foo = "bar";
var bar  = "realvalue";
alert(window[foo]); 
```

或者

方法2：命名空间
将你的js划分为命名空间

```
var namespace = {
 foo : "bar",
 bar : "realvalue"
};
alert(namespace[namespace.foo]); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-18T08:48:48.347

是的，你可以做这样的事情`eval`

```
var foo = "bar";
var bar  = "realvalue";
alert(eval(foo)); 
```

编辑：似乎很多人反对使用 eval() 函数。我在使用它之前的建议是阅读这个问题：[为什么使用 JavaScript eval 函数是个坏主意？](https://stackoverflow.com/questions/86513/why-is-using-the-javascript-eval-function-a-bad-idea)

然后，一旦您了解了风险，您就可以自己决定是否要使用它。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-12-18T08:46:11.560

如果它是一个全局变量，你可以使用`window[foo]`

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-12-18T08:55:39.247

不要使用非全局变量进行这种构造，只需将您可能会浮动的任何变量都限定在范围内。

```
var myscope = {
    bar: 'realvalue'
},
foo = 'bar';

alert(myscope[foo]); 
```

顺便说一句，上面不依赖浏览器的默认行为来在`window`对象中注册全局变量，使其也适用于 Node.js 之类的东西。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-18T08:51:12.190

全局变量是在`window`对象上定义的，因此您可以使用：

```
var bar = "realvalue";
alert(window["bar"]); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-18T11:56:40.547

```
var foo = "bar";
var bar  = "realvalue";
foo=bar;
console.log(foo);
alert(foo); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-02T10:00:18.630

```
 var foo = "bar";
 var bar  = "realvalue";
 alert(eval(foo)); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-18T08:47:18.310

是的，通过`eval`. 但不幸的是，并非没有`eval`，这是一个[不好的主意](https://stackoverflow.com/questions/86513/why-is-using-the-javascript-eval-function-a-bad-idea)。

# sql - 用于显示基于 id 相对于另一个表的表的所有行的 sql 查询

> ID：13929217
> 
> 赞同：0
> 
> 时间：2012-12-18T08:44:39.397
> 
> 标签：sql, tsql, sql-server-2005, pivot

我有两张桌子。

*   表：时间表 ( `SID,ORID`)

*   表：ORC ( `ORID,ORNAME`)

我想显示所有`ORNAME`s 是否分配给特定的 SID。

预期输出：

```
 SID   OR1 OR2 OR3 OR4
    1     1             
    2             3
    3         2 
```

上面，`SID`1 包含`ORID`= `SID`1，2 包含`ORID`= `SID`3，3 包含`ORID`= 2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:12:41.530

您需要的是一个支持任意数量的可能值的动态枢轴`ORNAME`：

```
DECLARE @cols VARCHAR(1000) = STUFF(
(
SELECT  ',['+ORNAME+']'
FROM    ORC
FOR XML PATH('')
), 1, 1, '')

DECLARE @sql VARCHAR(3000) =
'
SELECT  pvt.SID,
        '+@cols+'
FROM    Schedule a
LEFT JOIN   
        ORC b ON a.ORID = b.ORID
PIVOT   (
    MAX(b.ORID) FOR b.ORNAME IN ('+@cols+')
) pvt
ORDER BY pvt.SID'

EXEC(@sql) 
```

这是一个**[SQL 小提琴](http://sqlfiddle.com/#!3/17d57/1/0)**

# php - 如何从 PHP 脚本中获取 JSON 变量

> ID：13929220
> 
> 赞同：0
> 
> 时间：2012-12-18T08:44:41.243
> 
> 标签：php, jquery, ajax, json

我有个问题：

我有一个 JS 函数，它将数据发送到 php 脚本，然后 PHP 脚本从数据库 QUERY 返回 JSON 数据，我想获取从 PHP 脚本返回的值。

```
<script type="text/javascript">
    <!--

    jQuery('#wysz2').submit(function() {

        var myData = {
            "rodzaj_konta": jQuery('#rodzaj_konta').val(),
            "miejscowosc": jQuery('#miejscowosc').val()
        };

        jQuery.ajax({
            url: 'http://somescript.php?action=results',
            type: 'GET',
            data: myData,
            dataType: 'json',
            beforeSend: function() {
                jQuery('#loading').html('<p>loading...</p><img src="loading.gif" />'); //Loading image during the Ajax Request
            },
            error: function(xhr, textStatus, errorThrown) {
                alert("Error: " + (errorThrown ? errorThrown : xhr.status));
            },
            contentType: "application/json; charset=utf-8",
            success: function(data) {

                alert(data);
            }

        });

        return false;

    });
    //-->​
</script> 
```

PHP 脚本以正确的格式返回数据，使用：

```
header('Content-Type: application/json');
echo json_encode($data); 
```

当我试图提醒（数据）时，我总是得到一个空值。

如何获取此返回的 JSON 数据？

编辑：

这很奇怪，因为我已将发送方法更改为 POST。

PHP 返回 JSON：

```
[{"nazwa":"Test","nazwa_firmy":"Testowa","ulica":null,"numer_domy":"2A","numer_mieszkania":"11","kod_pocztowy":"00-189","miejscowosc":"Warszawa","telefon":"213-123-132","nip":"112-312-31-31","regon":"231232133","adres_www":"http:\/\/www.gogl.epl","rodzaj_uzytkownika":"serwis"}] 
```

但是我的 JQUERY AJAX 脚本仍然返回 null。

所以我的脚本现在看起来像这样：

```
<script type="text/javascript">
                <!--

                    jQuery('#wysz2').submit(function() {

                    var myData = {
                       rodzaj_konta: jQuery('#rodzaj_konta').val(),
                        miejscowosc: jQuery('#miejscowosc').val()
                    };

                    jQuery.ajax({
                        url: 'http://somedomain.com/skrypt.php?action=wyniki_wyszukiwania',
                        type: 'GET',
                        data: myData,
                        dataType: 'json',
                        contentType: "application/json; charset=utf-8",
                        jsonp: "jsoncallback",
                        beforeSend:  function() {
                            jQuery('#loading').html('<p>ładowanie...</p><img src="loading.gif" />');//Loading image during the Ajax Request
                        },
                        error: function (xhr, textStatus, errorThrown) {
                            alert("Error: " + (errorThrown ? errorThrown : xhr.status));
                        },
                        success: function (data) {
                            alert(JSON.stringify(data));
                            console.log(data);
                        }

                    });

                    return false;

                });
                //-->
                </script> 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:56:11.693

您正在构造变量，同时以错误的方式发送对象名称的分号根据定义不存在

尝试这个

```
var myData = {
           rodzaj_konta: jQuery('#rodzaj_konta').val(),
            miejscowosc: jQuery('#miejscowosc').val()
        }; 
```

并在提醒您的 json 数据时尝试

```
alert(JSON.stringify(your_json_obj)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:56:52.773

尝试提醒对象结果...

表示如果格式为 {"responseCode":"001","re​​sponseMsg":"success"} 的 json

然后alert data.responseCode

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T11:33:41.900

在你的 ajax 函数成功尝试这样的事情 `var objParams1 = $.parseJSON(data); console.log(objParams1); alert(objParams1.Testowa)`

# java - ArrayDeque 包含对象？

> ID：13929224
> 
> 赞同：2
> 
> 时间：2012-12-18T08:45:18.800
> 
> 标签：java, arraydeque

我正在创建一个带有 ArrayDeque 的基本库存系统，其中的东西被推入库存。

```
Couch couch1 = new Couch("I wouldn't sit on it.", 100, true);
roomList[0].inventory.add(couch1); 
```

我正在检查一个物品是否在这样的房间里。

```
if (input.matches(".*look.*"))
{
    if(input.matches(".*Couch.*"))
    {
        if(roomList[currentRoom].inventory.contains(???))
        {
            //code to be executed.
        }
    }
} 
```

我在里面放什么？？？为了检查库存ArrayDeque是否包含对象couch1？如果这是不可能的，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:59:36.340

该`contains()`功能基于您对`equals()`. 默认情况下，您必须提供完全相同的对象（so `couch1`）。如果您覆盖，您可以制作自己的 equals 版本，例如通过比较所有字段。一个非常有用的工具是 Apache [EqualsBuilder](http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/builder/EqualsBuilder.html)，这也解释了如何实现该`equals()`功能。

那么缺点是您必须构造一个具有相同字段的沙发对象。如果这是不可能的，您也许可以求助于另一种数据类型，例如地图。然后，您可以根据沙发的某些字段通过唯一 id 进行存储。

最后一种选择是不使用该函数，而是根据其他一些选择标准`contains()`创建自己的函数来循环和过滤器。`Deque`

# java - JBoss AS7 部署错误与缺少依赖的数据源有关

> ID：13929231
> 
> 赞同：1
> 
> 时间：2012-12-18T08:45:42.630
> 
> 标签：java, jboss

我在 JBoss AS7 中部署了一个 war 文件，当我启用它时，它给了我以下错误，

```
14:00:05,700 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-5) JBAS015876: Starting deployment of "JSPServletPoc.war"
14:00:29,749 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-5) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
14:00:30,156 INFO  [org.jboss.as.server] (HttpManagementService-threads - 7) JBAS015870: Deploy of deployment "JSPServletPoc.war" was rolled back with failure message {"JBAS014771: Services with missing/unavailable dependencies" => ["jboss.naming.context.java.module.JSPServletPoc.JSPServletPoc.env.jdbc.MySQLDSJndijboss.naming.context.java.jboss.resources.jdbc.MySQLDSJndiMissing[jboss.naming.context.java.module.JSPServletPoc.JSPServletPoc.env.jdbc.MySQLDSJndijboss.naming.context.java.jboss.resources.jdbc.MySQLDSJndi]"]}
14:00:30,437 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015877: Stopped deployment JSPServletPoc.war in 236ms
14:00:30,437 INFO  [org.jboss.as.controller] (HttpManagementService-threads - 7) JBAS014774: Service status report
JBAS014775:    New missing/unsatisfied dependencies:
      service jboss.naming.context.java.jboss.resources.jdbc.MySQLDSJndi (missing) dependents: [service jboss.naming.context.java.module.JSPServletPoc.JSPServletPoc.env.jdbc.MySQLDSJndi] 
```

我已经将数据源配置为**MySQLDSJndi**并启用它。

**我没有发现将数据源设置为MySQLDSJndi**并将 JNDI 名称设置为**java:/MySQLDSJndi**的数据源有任何问题。此外，我将用户名和密码以及连接 url 指定为**jdbc:mysql://localhost:3306/testdb**

我也怀疑为什么错误消息，

```
JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1) 
```

我在 jar 中检查了名为“META-INF/services/java.sql.Driver”的文件，因为该文件使 jar 成为 JDBC 兼容的 jar 文件并且它也存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:23:57.177

驱动程序版本不兼容，您需要先将驱动程序注册为模块。

通读***将 JDBC 驱动程序作为模块安装***@[如何在 Jboss As7 中配置数据源部分](https://community.jboss.org/wiki/DataSourceConfigurationInAS7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T08:57:23.163

MySQL 驱动程序不兼容，因为它[不支持 SQL-92](http://bugs.mysql.com/bug.php?id=62038)。AFAIK 复制到`$JBOSS_HOME/standalone/deployments` [仅适用于兼容的驱动程序，不兼容的驱动程序需要部署为模块](http://planet.jboss.org/post/how_to_create_and_manage_datasources_in_as7)。

# google-apps-script - 制作从 Google 电子表格表单触发的 Google 网络应用？

> ID：13929237
> 
> 赞同：1
> 
> 时间：2012-12-17T20:31:17.850
> 
> 标签：google-apps-script, google-calendar-api, google-apps

我有一个 Google Apps 脚本（用 Google 电子表格编写），它针对大学课程和大学日历为其创建单独的日历和事件。GUI 是一个电子表格表单，它会触发我的脚本的执行。该脚本从电子表格表单条目中获取其输入。

我遇到的问题是我无法轻松地将我的解决方案部署给其他用户。是的，他们可以复制我的工作表/表单/脚本，以便他们可以在他们的帐户上运行它。但是，这种方法会导致几个问题：

*   触发器不会被复制 - 这是因为在启用触发器之前，用户必须授予访问本地信息（日历、联系人等）的授权。因此，用户必须将表单提交触发器重新连接到 Apps 脚本才能正常工作（这对用户不友好）。
*   如果我更改我的应用程序脚本的代码，用户正在使用副本并且不会看到更改。

解决方案似乎是[Google Web Apps](https://developers.google.com/apps-script/execution_web_apps)，但根据我的阅读，我无法重用我的方法的基于表单的 GUI。或者我可以吗？

Google 电子表格表单的优点是它们很容易创建，并且您已经可以指定哪些字段是必填字段等。我不想在我的 Google 的复杂 GUI 前端中重新编写所有这些Apps 脚本（**编辑：即使是[GUI 构建器](https://developers.google.com/apps-script/gui_builder)工具似乎也比电子表格复杂得多**），但我希望其他用户能够在他们自己的 Google 帐户中创建日历和事件。有没有办法保留我的表单，但它是否与我的代码的 Web 应用程序版本挂钩？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-17T21:06:54.850

尝试在谷歌网站（内联网）上添加表单。这样，任何有权访问的用户都可以按原样使用表单。您创建的所有逻辑都将保持不变。

然而，创建脚本将允许用户“在他们的登录名下”执行脚本，从而可以访问日历、联系人......

# spring-security - Log4j 编写 spring-security 用户名

> ID：13929243
> 
> 赞同：7
> 
> 时间：2012-12-18T08:46:14.173
> 
> 标签：spring-security, log4j

我在应用程序中使用 log4j 和 spring-security，记录器应该在每条消息中使用用户名写入日志。我对这一切都很陌生，有人可以提供建议或链接吗？也许有一些标准的方法可以解决这个问题？谢谢你。

编辑使用 spring 框架 3.1 我的 spring-security.xml 是：

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/security 
    http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <http pattern="/favicon.ico" security="none" />
    <http auto-config="true">
            <intercept-url pattern="/**" access="ROLE_ADMIN"/>
    </http>

<authentication-manager>
    <authentication-provider>
        <user-service>
            <user name="detect_me" password="1111" authorities="ROLE_ADMIN" />
        </user-service>
    </authentication-provider>
</authentication-manager> 
```

和 log4j.xml：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration xmlns:log4j='http://jakarta.apache.org/log4j/'>    
    <appender name="stdout" class="org.apache.log4j.ConsoleAppender">
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d %p [%c] - %m%n" />
        </layout>
    </appender>
    <appender name="R" class="org.apache.log4j.DailyRollingFileAppender">
        <param name="File" value="/logs/urlbuilderweb.log"/>
        <param name="DatePattern" value="'.'yyyy-MM-dd'.log'" />
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d %p %t %c - %m%n" />            
        </layout>
    </appender>
    <appender name="ASYNC" class="org.apache.log4j.AsyncAppender">
        <param name="BufferSize" value="10000"/>
        <appender-ref ref="R"/>
    </appender>
    <logger name="org.springframework">
        <level value="WARN"/>
    </logger>
    <logger name="org.directwebremoting">
        <level value="WARN"/>
    </logger>
    <logger name="org.apache.http">
        <level value="WARN"/>
    </logger>
    <logger name="org.hibernate">
        <level value="WARN"/>
    </logger>
    <root>
        <level value="INFO" />
        <appender-ref ref="ASYNC"/>
    </root>
</log4j:configuration> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T09:16:59.563

您可以使用[NDC 功能](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/NDC.html#push%28java.lang.String%29)。设置一些过滤器/拦截器（取决于您使用的演示技术）。添加嵌套诊断上下文（过滤器示例）：

```
public class LogDiagnosticContextFilter implements javax.servlet.Filter {
    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
        // do nothing
    }
    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException,
        ServletException {
        SecurityContext context = SecurityContextHolder.getContext();
        if (context != null) {
            Authentication authentication = context.getAuthentication();
            if (authentication != null) {
                NDC.push("Username=" + authentication.getName());
            }
        }
        chain.doFilter(request, response);
        NDC.pop();
    }
    @Override
    public void destroy() {
        // do nothing
    }
} 
```

确保在 Spring Security 过滤器链 (web.xml) 之后执行过滤器：

```
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<filter-mapping>
    <filter-name>logDiagnosticContextFilter</filter-name>
    <url-pattern>*</url-pattern>
</filter-mapping> 
```

将**x**添加到每个感兴趣的 log4j 模式：

```
%x %d %p %t %c - %m%n 
```

稍后当你打电话时

```
LOGGER.info("some text"); 
```

您将在代码中的任何位置看到

```
Username=corresponding_login some text 
```

在你的日志中

# android - 如何在茄子中获取用户的输入？

> ID：13929245
> 
> 赞同：0
> 
> 时间：2012-12-18T08:46:13.887
> 
> 标签：android, automation, eggplant

我目前正在自动化我的茄子脚本以在 Android 上运行 USSD 应用程序。为此，我将焦点放在文本框上，然后键入text("12") 并继续。

有没有办法可以从测试用户那里得到这个输入？

谢谢，湿婆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-22T05:16:58.553

我知道这是一个老问题，但我最近开始为 Android 开发 eggPlant 并认为我会回答。

在您希望输入用户定义的选项时，您可以使用`ask`命令和`it`变量：

```
ask "Please enter your choice:"
put it into choice 
```

[更多信息](http://docs.testplant.com/ePF/SenseTalk/stk-user-interaction.htm)

# java - Java——界面设计

> ID：13929247
> 
> 赞同：1
> 
> 时间：2012-12-18T08:46:24.167
> 
> 标签：java, design-patterns, interface

我有一个简单（可能很常见）的设计问题。假设我有一个如下所示的界面：

```
public interface AnalysisResult {

    BigDecimal getMeasure();

} 
```

然而，这后来由几个不同的具体实现实现 - 一些还包括平均字段，一些包含各种属性的计数等。现在，我得到了一组，`AnalysisResult`我希望能够根据类型，即平均结果会说平均值是什么在 Measure 等之上。一种方法是在接口上公开一个方法 say `outputResult()`，但问题是我可能想以 HTML 格式输出结果， CSV 和许多其他的，所以我需要一个方法。此外，可能存在我想根据类型输出一些内容的情况，例如：“这是平均结果”......你会说在这种情况下，简单地使用`instanceof`和完成工作会更容易吗？输出端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:50:19.813

我会去进一步扩展..像

```
public interface Measure {
   public String getOutputAsTxt();
   public String getOutputAsCsv();
   public String getOutputAsFunnyFormat();
};

public interface AnalysisResult {

  public Measure getMeasure();

} 
```

从而将输出专业化移动到特定的度量。是的，这增加了一些代码，但保持一切整洁和分开。

或者我会尝试探索一下访问者模式（这是一种简单的实现）。

[有关更多信息，请参阅此 SO 问题](https://stackoverflow.com/questions/255214/when-should-i-use-the-visitor-design-pattern)中选择的答案（每次我读到它时，我都会因为它的真棒而感到 +1 的冲动）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:53:23.220

**根据类型的结果：**

这是一个单独的行为，因此建议您实现类似**Strategy Pattern**的东西。有一个具有方法 print() 的基本接口。然后您可以在多个实现类（如 CSVStylePrint、HTMLStylePrint 等）中实现此方法。

这样，您的打印功能是独立的，并且您遵循**OCP（开放封闭原则：即开放以扩展但封闭以更改）**原则。OCP 是策略模式中使用的底层设计原则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T08:55:04.817

我建议在接口中使用方法 public String getOutput(String format) 。

让实现根据“格式”参数决定返回什么。

这也将有助于调用特定于特定实现的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T08:59:59.903

以常见的 xml 格式保存结果数据，并使用 XSLT 将原始数据转换为所需的格式。JUnit 使用测试结果执行此操作。当您稍后决定添加不同的格式时，无需更改代码。

# java - 分块压缩数据的解压

> ID：13929249
> 
> 赞同：0
> 
> 时间：2012-12-18T08:46:32.223
> 
> 标签：java, blackberry, httpconnection, gzipinputstream

我需要逐块下载压缩数据并将其附加到文件中。问题是当我从 HTTP conn 读取时，它不会一次发送总压缩字节数组（流）。我的应用程序在之前发送的字节数组的剩余字节中寻找 Gzip 标头。我怎样才能强制http一次性发送字节数组的压缩实例。这是我的代码片段，它将数据压缩并将其添加到文件中。

```
if (responseCode == HttpConnection.HTTP_OK)
{
    boolean stop = false, pause = false;
    totalSize = conn.getLength() + downloaded;
    chunkSize = (int)(conn.getLength() / 100);
    System.out.println("*********-----" + conn.getLength() + "");
    System.out.println("-----------------ok");
    in = conn.openInputStream();
    int length = 0, s = 0;
    byte[] readBlock = new byte[(int)conn.getLength()];

    while ((s = in.read(readBlock) != -1)
            length = length + s;
    {
          if (!pause)
            {
                readBlock = Decompress.decompress(readBlock);
                out.write(readBlock, 0, length);
                downloaded += length;
                int a = getPerComplete(totalSize, downloaded);
                System.out.println("% OF Downloaded--------" + a);
                int a1 = getPerComplete(totalSize, downloaded); 
```

解压功能：-

```
 public byte[] decompress(byte[] compressed) throws IOException
    {
        GZIPInputStream gzipInputStream;
        if (compressed.length > 4)
        {
            gzipInputStream = new GZIPInputStream(
                new ByteArrayInputStream(compressed, 4,
                                         compressed.length - 4));

            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            for (int value = 0; value != -1;)
            {
                value = gzipInputStream.read();
                if (value != -1)
                {
                    baos.write(value);
                }
            }
            gzipInputStream.close();
            baos.close();

            return baos.toByteArray();
        }
        else
        {
           return null;
        }
    }
} 
```

# java - WebDriver qqFileUploader 自动化

> ID：13929250
> 
> 赞同：0
> 
> 时间：2012-12-18T08:46:38.660
> 
> 标签：java, selenium, webdriver

我需要自动化嵌入网站的 qqFileUploader。我的问题是我无权访问上传按钮，即使我拥有它也会打开我无权访问的默认浏览窗口。如何发布我想上传的文件？感谢您的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:36:27.467

如果您通过标准文件输入上传文件，则应直接在输入中写入文件名：

```
driver.findElement(By.id("inputId")).sendKeys("path/to/your/file"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T14:23:59.040

您可以尝试将 sikuli 混合测试与 webdriver 一起使用。

Sikuli 可以识别你网页上的元素，而文件上传不是网页元素，所以 Selenium 无法访问它。

请参考：[http ://code.google.com/p/sikuli-api/](http://code.google.com/p/sikuli-api/)

我知道这很有效，因为我多次解决了这个问题，用于 Flash 上传器或简单的操作系统操作。

# yii - 最小长度规则不接受 Yii 中的消息

> ID：13929254
> 
> 赞同：3
> 
> 时间：2012-12-18T08:46:56.390
> 
> 标签：yii, rule

Yii 中我的模型规则函数中的以下代码

```
public function rules()
{
    // NOTE: you should only define rules for those attributes that
    // will receive user inputs.
    return array(
        array('mail, firstname, lastname, number, question, time', 'required','message'=>'{attribute} نمی تواند خالی باشد'),
        array('status', 'numerical', 'integerOnly'=>true,'message'=>'{attribute} فقط مقادیر عددی مجاز است'),
        array('mail, firstname, lastname, number', 'length', 'max'=>45,'message'=>'حداکثر طول {attribute} ۴۵ کارکتر می باشد'),
        array('question','length','min'=>10,'message'=>'حداقل طول سوال ۱۰ کارکتر می باشد'),
        array('mail','email','message'=>'ایمیل وارد شده حقیقی نمی باشد'),
        array('time','unsafe'),
        // The following rule is used by search().
        // Please remove those attributes that should not be searched.
        array('id, mail, firstname, lastname, number, question, time, status', 'safe', 'on'=>'search'),
    );
} 
```

所有消息都正常工作，除了我为最小长度定义的消息

```
array('question','length','min'=>10,'message'=>'حداقل طول سوال ۱۰ کارکتر می باشد'), 
```

它总是返回 Yii 的默认值，这意味着 **پرسش 太短（最少 10 个字符）。**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-18T10:05:44.830

[**仅**](http://www.yiiframework.com/doc/api/1.1/CStringValidator#c10601 "http://www.yiiframework.com/doc/api/1.1/CStringValidator#c10601")当字段不是由 property 指定的某个确切长度[时才](http://www.yiiframework.com/doc/api/1.1/CStringValidator#is-detail "http://www.yiiframework.com/doc/api/1.1/CStringValidator#is-detail")`message`使用该属性。对于自定义最小长度消息使用[属性](http://www.yiiframework.com/doc/api/1.1/CStringValidator#tooShort-detail "http://www.yiiframework.com/doc/api/1.1/CStringValidator#tooShort-detail")：[](http://www.yiiframework.com/doc/api/1.1/CStringValidator#c10601 "http://www.yiiframework.com/doc/api/1.1/CStringValidator#c10601")**[`is`](http://www.yiiframework.com/doc/api/1.1/CStringValidator#is-detail "http://www.yiiframework.com/doc/api/1.1/CStringValidator#is-detail")[`tooShort`](http://www.yiiframework.com/doc/api/1.1/CStringValidator#tooShort-detail "http://www.yiiframework.com/doc/api/1.1/CStringValidator#tooShort-detail")**

 **```
array('question','length','min'=>10,'tooShort'=>'حداقل طول سوال ۱۰ کارکتر می باشد'), 
```**

# php - Zend Framework 2 - 添加表单类

> ID：13929256
> 
> 赞同：5
> 
> 时间：2012-12-18T08:47:05.820
> 
> 标签：php, zend-form, zend-framework2

我只是找不到答案...有没有办法将 a 传递`CSS class`给 my `open-form-tag`？

例如，我想创建一个带有“form-horizo​​ntal”类的表单。

文档是这样说的：

```
// Render the opening tag
echo $this->form()->openTag($form);
// <form action="/contact/process" method="post"> 
```

但是如何添加表单类名？

**编辑：**我尝试将此添加到我的 Form.php 但没有发生任何事情......

```
public function getOptions()
{
    return array('class' => 'form-horizontal');
} 
```

谢谢，

罗恩

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T15:26:24.580

你也可以使用

```
$this->setAttributes(array(
    'action' => '/someurl',
    'method' => 'post',
    'class'  => 'form-horizontal'
)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T08:58:30.637

好吧，诀窍是使用`setAttribute`两次！

在 Form.php 中执行此操作：

```
$this->setAttribute('method', 'post');
$this->setAttribute('class', 'form-horizontal'); 
```

参考链接是：

[http://framework.zend.com/manual/2.0/en/user-guide/forms-and-actions.html](http://framework.zend.com/manual/2.0/en/user-guide/forms-and-actions.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-14T04:07:16.180

它的工作原理是使用

```
$this->setAttribute('method', 'post');
$this->setAttribute('class', 'form-horizontal'); 
```

# iphone - 如何从 UIView 中删除约束？

> ID：13929261
> 
> 赞同：1
> 
> 时间：2012-12-18T08:47:28.667
> 
> 标签：iphone, ios, uiview, constraints

如何从 UIView 中删除约束？

![uiview 的约束](../Images/a54173f3744cb4724331e510b49d4b2d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T08:47:28.667

取消选中 Xcode Utility Area 的第一个选项卡下的“Use Autolayout”复选框

![在此处输入图像描述](../Images/1463479f54420f63a61e7045f851fd82.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-28T20:23:48.617

在左侧视图中选择约束并按下删除按钮。这对我有用。

# java - 在 Android 小部件类中使用静态成员是否正常？

> ID：13929266
> 
> 赞同：2
> 
> 时间：2012-12-18T08:47:34.783
> 
> 标签：java, android, static, android-widget, android-sqlite

我创建了一个小部件应用程序，在其中我使用 SQLite 数据库对象，该对象在用户启用他的小部件时被初始化。我将数据库对象声明为静态的，因为在其他情况下，它在调用方法并且我的应用程序崩溃`null`之后变为静态。`onReceive()`

现在我`mDatabase`在方法中使用对象`onReceive()`，一切正常，除了：

1.  将数据库的静态成员保留在小部件中是否正常，或者有更正确的方法可以做到这一点？
2.  在使用应用程序一段时间后（一两天），我的应用程序崩溃了，看起来有些成员变成了 null （可能是`mDatabase`），我想如果你回答我的第一个问题，它也将是第二个回答 :)

* * *

## 代码示例

```
public class Widget extends AppWidgetProvider {

    private static DatabaseObject mDatabase = null;
    private static int mIndex = 0;

    @Override
    public void onEnabled(Context context) {
        mDatabase = new DatabaseObject (context);
        mDatabase.initialize("Some data"); 
    }

    @Override
    public onReceive(Context context, Intent intent)
    {
        // Some code ....
        mDatabase.getItemAtIndex(mIndex);
        mIndex++;
    }

}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T08:58:52.103

您不应该在`onReceive()`. 您应该启动一个服务 ( `IntentService`) 来更新您的小部件并在那里完成您的数据库工作。另外请记住，您的应用程序的活动和服务可能随时被终止，因此您需要处理这个问题。如果您需要访问您的 DB 助手类 ( `DatabaseObject`)，请将其设置为单例，并且它将在您的进程的 while 生命周期中可用。

# javascript - 将额外参数传递给Javascript中的可调用对象

> ID：13929268
> 
> 赞同：1
> 
> 时间：2012-12-18T08:47:50.407
> 
> 标签：javascript, cordova

我知道在 Javascript 中，您可以向函数添加额外的参数。例如;

```
function sum(){

var result = 0;
for(var i = 0;i<arguments.length;i++){
  result += arguments[i];
}
return result;
} 
```

然后调用`sum(1,2,3,4)`。现在我正在使用 Phonegap，我想将额外的参数传递给一个可调用的对象。（做一些类似于我之前解释的事情。）

在 Phonegap 中，您可以通过以下方式访问文件系统：

```
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, success, fail);
function success(fileSystem){
//Do something
 } 
```

有可能做类似的事情吗？

```
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, success(option1, option2), fail);
    function success(fileSystem){
    //Do something
      if(option1 > option2){
       //Do something even interesting
       }

     } 
```

由于我对 Javascript 和 Phonegap 都是新手，我不确定是否可以做这样的事情。我想**避免使用全局变量**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T08:51:17.697

```
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSystem) { return success(fileSystem, option1, option2); }, fail);
    function success(fileSystem, option1, option2){
    //Do something
      if(option1 > option2){
       //Do something even interesting
       }

     } 
```

米？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T08:51:51.327

也许你可以做一些事情，比如将它全部封装在一个函数中

```
function doFileSystemStuff(option1,option2){
   window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, success, fail);
   function success(fileSystem){
      //Do something
      if(option1 > option2){
       //Do something even interesting
      }
    }
} 
```

然后用`option1`and适当地调用它`option2`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T08:53:09.717

```
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0,
function(option1, option2){ success(option1, option2)}, fail);
function success(fileSystem){
//Do something
  if(option1>option1){
   //Do something even interesting
   }

 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T08:53:45.890

很可能不是。

您的成功处理程序在函数中被调用`requestFileSystem`。我的猜测是该函数不包含任何其他参数。

由于您不想使用全局变量，因此中间有一个解决方案：将所有内容放在一个函数中：

```
(function() {
    var option1 = 0, option2 = 1;

    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, success, fail);

    function success(filesystem) {
        console.log(option1, option2); // will display 0 and 1
    }
})(); // calls itself

console.log(option1, option2); // undefined 
```

这样你仍然可以设置`option1`和`option2，在你的方法中访问它们，而不会使它们全局化！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T08:55:44.957

像这样做：

```
function getFileSystem() {

    //set your option1, option2
    var option1 = 1, option2 = 2;

    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSystem) {

      //Do something

      function innerSuccess(fileSystem, option1, option2) {
       //Do something even interesting

      }
    }, fail);

} 
```

# c# - 如何在图像上填充颜色创建的矩形？

> ID：13929270
> 
> 赞同：0
> 
> 时间：2012-12-18T08:47:53.783
> 
> 标签：c#, .net

我想用 pictuteBox 控件中的图像上创建的颜色填充矩形。

这是我的段代码：

```
 foreach (var item in foundShapes.fMergedSignesCollection)
        {
            Graphics gr = pbContainer.CreateGraphics();

            Rectangle signsWrapper = item[0].contour.SourceBoundingRect;  //rude solution
            for (int j = 1; j < item.Count; j++)
            {
                signsWrapper = Rectangle.Union(signsWrapper, item[j].contour.SourceBoundingRect);

            }

            gr.FillRectangle(Brushes.Chocolate, signsWrapper);
        }
        pbContainer.Image = img.ToBitmap(); 
```

但我没有得到想要的结果，我没有填充颜色矩形。

知道为什么我看不到彩色矩形以及如何解决问题吗？先感谢您！

# django - 在 uWSGI/Nginx 下分析 Django 应用程序

> ID：13929272
> 
> 赞同：4
> 
> 时间：2012-12-18T08:48:03.223
> 
> 标签：django, profiling, uwsgi, django-debug-toolbar

我正在将一个中型 Django 1.4.2 应用程序迁移到新的基础设施，并尝试在新的、非常强大的硬件上优化系统的性能。我正在使用 django-debug-toolbar 以及基于热点的分析中间件来定位瓶颈，目前很难理解我从不同来源获得的执行时间值的差异。

例如，如果我向应用程序中的 URL 发出单个请求，并且将其映射到一个相当简单的视图，以下是我得到的时间：

**Nginx 1.2.5 - 0.409s**：

```
10.10.1.101 151a6b897ee788499fd19d6531befaac [17/Dec/2012:23:43:53 -0800] 200 0.409 1633 "GET /product/150138/?prof HTTP/1.1" "-" "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11" 
```

**uWSGI 1.4.2（64 位）- 387 毫秒**：

```
Mon Dec 17 23:27:50 2012 151a6b897ee788499fd19d6531befaac GET mysite.com/product/150138/?prof HTTP/1.1 200 387ms 
```

**Django 调试工具栏 - 112.452 毫秒**：

```
Resource                 Value
User CPU time            84.005 msec
System CPU time          4.001 msec
Total CPU time           88.006 msec
Elapsed time             112.452 msec
Context switches         33 voluntary, 10 involuntary

SQL: 16.42 ms (8 queries) 
```

**分析中间件 - 0.132 秒**：

```
113020 function calls (110410 primitive calls) in 0.132 seconds

   Ordered by: internal time, call count

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
    10232    0.046    0.000    0.046    0.000 /opt/myenv/lib/python2.7/posixpath.py:60(join)
    10187    0.032    0.000    0.040    0.000 /opt/myenv/lib/python2.7/posixpath.py:130(islink)
1396/1354    0.022    0.000    0.120    0.000 /opt/myenv/lib/python2.7/posixpath.py:355(realpath)
     2682    0.018    0.000    0.018    0.000 /opt/myenv/lib/python2.7/posixpath.py:312(normpath)
        8    0.016    0.002    0.016    0.002 /opt/myenv/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py:50(execute)
     1568    0.010    0.000    0.022    0.000 /usr/lib/python2.7/inspect.py:440(getsourcefile)
      214    0.009    0.000    0.138    0.001 /usr/lib/python2.7/inspect.py:472(getmodule)
       23    0.008    0.000    0.008    0.000 /opt/myenv/lib/python2.7/linecache.py:68(updatecache)
     1544    0.007    0.000    0.007    0.000 /opt/myenv/lib/python2.7/genericpath.py:15(exists)
        8    0.005    0.001    0.205    0.026 /opt/myenv/lib/python2.7/site-packages/debug_toolbar/utils/tracking/db.py:85(execute)
    10187    0.005    0.000    0.007    0.000 /opt/myenv/lib/python2.7/stat.py:55(S_ISLNK)
      458    0.005    0.000    0.008    0.000 /opt/myenv/lib/python2.7/site-packages/django/template/base.py:673(__init__)
        4    0.004    0.001    0.005    0.001 /opt/myenv/lib/python2.7/site-packages/memcache.py:965(_recv_value)
      395    0.004    0.000    0.011    0.000 /opt/myenv/lib/python2.7/site-packages/django/template/base.py:524(__init__)
     7243    0.004    0.000    0.004    0.000 /usr/lib/python2.7/inspect.py:51(ismodule)
     4078    0.003    0.000    0.003    0.000 /opt/myenv/lib/python2.7/posixpath.py:51(isabs)
   114/10    0.003    0.000    0.028    0.003 /opt/myenv/lib/python2.7/site-packages/django/template/base.py:234(parse)
     2504    0.003    0.000    0.021    0.000 /opt/myenv/lib/python2.7/posixpath.py:341(abspath)
      803    0.002    0.000    0.003    0.000 /opt/myenv/lib/python2.7/site-packages/django/template/base.py:200(create_token)
        6    0.002    0.000    0.002    0.000 /opt/myenv/lib/python2.7/site-packages/django/db/models/options.py:388(_fill_related_objects_cache)
    10187    0.002    0.000    0.002    0.000 /opt/myenv/lib/python2.7/stat.py:24(S_IFMT)
      621    0.002    0.000    0.004    0.000 /opt/myenv/lib/python2.7/site-packages/django/utils/functional.py:170(wrapper)
     1806    0.002    0.000    0.005    0.000 /usr/lib/python2.7/inspect.py:398(getfile)
     6224    0.002    0.000    0.002    0.000 /usr/lib/python2.7/string.py:220(lower)
     1150    0.002    0.000    0.027    0.000 /usr/lib/python2.7/inspect.py:460(getabsfile)
  394/273    0.002    0.000    0.002    0.000 /opt/myenv/lib/python2.7/site-packages/django/template/context.py:49(__getitem__)
      214    0.002    0.000    0.154    0.001 /usr/lib/python2.7/inspect.py:518(findsource)
        1    0.002    0.002    0.005    0.005 /opt/myenv/lib/python2.7/site-packages/django/core/urlresolvers.py:237(_populate)
      505    0.002    0.000    0.002    0.000 /opt/myenv/lib/python2.7/site-packages/django/utils/text.py:320(smart_split)
    59/21    0.002    0.000    0.004    0.000 /opt/myenv/lib/python2.7/sre_parse.py:379(_parse)
       59    0.001    0.000    0.006    0.000 /opt/myenv/lib/python2.7/site-packages/django/templatetags/i18n.py:281(do_translate)
       10    0.001    0.000    0.005    0.000 /opt/myenv/lib/python2.7/site-packages/django/template/base.py:188(tokenize)
   518/88    0.001    0.000    0.003    0.000 /usr/lib/python2.7/copy.py:145(deepcopy)
      214    0.001    0.000    0.160    0.001 /opt/myenv/lib/python2.7/site-packages/debug_toolbar/utils/__init__.py:101(getframeinfo)
      446    0.001    0.000    0.001    0.000 /opt/myenv/lib/python2.7/site-packages/django/utils/text.py:364(unescape_string_literal)
 ---- By file ----

      tottime
43.4%   0.102 /opt/myenv/lib/python2.7/posixpath.py
13.2%   0.031 /usr/lib/python2.7/inspect.py
 9.4%   0.022 /opt/myenv/lib/python2.7/site-packages/django/template/base.py
 6.8%   0.016 /opt/myenv/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py
 3.4%   0.008 /opt/myenv/lib/python2.7/linecache.py
 3.0%   0.007 /opt/myenv/lib/python2.7/stat.py
 3.0%   0.007 /opt/myenv/lib/python2.7/genericpath.py
 2.1%   0.005 /opt/myenv/lib/python2.7/site-packages/debug_toolbar/utils/tracking/db.py
 1.7%   0.004 /opt/myenv/lib/python2.7/sre_parse.py
 1.7%   0.004 /opt/myenv/lib/python2.7/site-packages/memcache.py
 1.3%   0.003 /opt/myenv/lib/python2.7/site-packages/django/utils/text.py
 1.3%   0.003 /opt/myenv/lib/python2.7/site-packages/django/core/urlresolvers.py
 0.9%   0.002 /usr/lib/python2.7/string.py
 0.9%   0.002 /opt/myenv/lib/python2.7/site-packages/django/utils/regex_helper.py
 0.9%   0.002 /opt/myenv/lib/python2.7/site-packages/django/utils/functional.py
 0.9%   0.002 /opt/myenv/lib/python2.7/site-packages/django/template/context.py
 0.9%   0.002 /opt/myenv/lib/python2.7/site-packages/django/db/models/options.py
 0.9%   0.002 /opt/myenv/lib/python2.7/site-packages/debug_toolbar/utils/__init__.py
 0.4%   0.001 /usr/lib/python2.7/copy.py
 0.4%   0.001 /opt/myenv/source/portal/myenv/views/__init__.py
 0.4%   0.001 /opt/myenv/lib/python2.7/sre_compile.py
 0.4%   0.001 /opt/myenv/lib/python2.7/site-packages/django/utils/safestring.py
 0.4%   0.001 /opt/myenv/lib/python2.7/site-packages/django/utils/importlib.py
 0.4%   0.001 /opt/myenv/lib/python2.7/site-packages/django/utils/encoding.py
 0.4%   0.001 /opt/myenv/lib/python2.7/site-packages/django/templatetags/i18n.py
 0.4%   0.001 /opt/myenv/lib/python2.7/site-packages/django/template/loaders/app_directories.py
 0.4%   0.001 /opt/myenv/lib/python2.7/site-packages/django/template/defaulttags.py
 0.4%   0.001 /opt/myenv/lib/python2.7/site-packages/django/db/models/base.py
 0.4%   0.001 /opt/myenv/lib/python2.7/encodings/utf_8.py
 0.0%   0.000 
 0.0%   0.000 /usr/lib/python2.7/uuid.py
 0.0%   0.000 /usr/lib/python2.7/urllib.py
 0.0%   0.000 /usr/lib/python2.7/threading.py
 0.0%   0.000 /usr/lib/python2.7/socket.py
 0.0%   0.000 /usr/lib/python2.7/pprint.py
 0.0%   0.000 /usr/lib/python2.7/multiprocessing/process.py
 0.0%   0.000 /usr/lib/python2.7/logging/handlers.py
 0.0%   0.000 /usr/lib/python2.7/logging/__init__.py
 0.0%   0.000 /usr/lib/python2.7/gettext.py
 0.0%   0.000 /usr/lib/python2.7/functools.py 
```

如您所见，django-debug-toolbar 和 hotshots 分析中间件的时间非常接近。

在 Django 渲染模板后，什么可能导致 uWSGI 处理额外的约 250 毫秒的请求？我尝试在 uWSGI 中启用分析器选项，但它会为数十万次调用生成信息，因此很难使用。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T11:27:25.917

我认为问题在于 Profiling 中间件进行了不包括在分析时间中的广泛处理，但会影响总请求处理时间。

看看[探查器中间件代码](https://code.google.com/p/django-profiling/source/browse/trunk/profiling/middleware.py)。关闭探查器后，从临时文件中读取结果（这可能是二进制格式的相当大的文件）。然后处理结果并将其注入响应。

这种额外的处理可能会导致您看到的差异。尝试在禁用分析器的情况下运行基准测试（不要传入`?prof`URL），看看 nginx 和 uwsgi 处理时间是否有所改善。

# dynamics-crm-2011 - 如何使用 JSON 和 PHP 创建机会？

> ID：13929273
> 
> 赞同：2
> 
> 时间：2012-12-18T08:48:02.427
> 
> 标签：dynamics-crm-2011, dynamics-crm

我正在尝试在 CRM 中创造机会，但我无法做到。我对此很陌生，我找不到任何使用 JSON 的 PHP 参考。请帮助提供示例数据或参考链接。这是我得到的错误。

> 处理请求流时出错。请求应该是一个有效的顶级资源对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:07:37.113

我猜，只要他们可以处理基于 REST 的 Web 服务，您就可以使用任何语言联系组织服务。

附带说明一下，如果您打算使用 Dynamics CRM，您可能希望跳过 PHP 并将更多内容转移到 C# 和 JS 中。迟早（即早），您将构建插件（即 C#）和客户端自定义（即 JS）。

我可能会为此感到头疼，但我认为 PHP 不能非常有效地用于 CRM。

话虽如此，我可以想到一些情况，PHP 可能是一个更好的选择，但它是一个真正的 MS 奴隶（我们在斯德哥尔摩的办公室实际上**就在**Microsoft 的上方。我们在 MS 大楼的顶层。

# asp.net - 分页 DevExpress MVC ASP.NET 时触发哪个事件

> ID：13929274
> 
> 赞同：0
> 
> 时间：2012-12-18T08:48:06.990
> 
> 标签：asp.net, asp.net-mvc-3, gridview, devexpress

我得到了以下场景：我有一个gridview，我使用预渲染来设置一些东西。现在在预渲染之后我想再次改变它。

当页面加载时，控件的生命周期就开始了。我设置它的预渲染事件触发器。然后使用客户端事件 Init 我再次更改该行的类。

现在，当用户翻阅 gridview 的记录时，我希望拥有相同的功能。但是 Init 当然不会触发，因为 gridview 已经被初始化了。但是我只是找不到当用户翻阅记录时会像 Init 事件一样触发的客户端事件。

EndCallBack 事件在预渲染之前触发，所以这不是一个选项......知道我可以使用哪个事件吗？

# php - mysql表状态没有改变

> ID：13929276
> 
> 赞同：-1
> 
> 时间：2012-12-18T08:48:29.147
> 
> 标签：php, mysql, cakephp

我正在做一个项目，我需要使用 cakephp 和 jQuery 添加彗星 ajax。

为此，我正在使用[本教程](http://www.zeitoun.net/articles/comet_and_php/start)。

我已经成功实现了它，但现在我想用 mysql 表修改时间替换文本文件修改时间。

我使用`SHOW TABLE STATUS`了 mysql 查询并且我得到了 mysql 表更新时间，但我不知道为什么如果我添加、修改或删除记录，为什么表 Update_time 没有相应地更新。

现在请建议我是否可以使用 php 代码更新该表的详细信息，或者是否有其他更好的方法来完成此操作。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:51:48.990

如[`SHOW TABLE STATUS`语法](http://dev.mysql.com/doc/en/show-table-status.html)中所述：

> *   `Update_time`
>     
>     
>     
>     上次更新数据文件的时间。对于某些存储引擎，此值为`NULL`. 例如，在其[系统表空间](http://dev.mysql.com/doc/en/glossary.html#glos_system_tablespace)`InnoDB`中存储多个表，数据文件时间戳不适用。即使使用每个表在单独文件中的[file-per-table](http://dev.mysql.com/doc/en/glossary.html#glos_file_per_table)模式，[更改缓冲](http://dev.mysql.com/doc/en/glossary.html#glos_change_buffering)也会延迟对数据文件的写入，因此文件修改时间与上次插入、更新或删除的时间不同。对于，使用数据文件时间戳；但是，在 Windows 上，时间戳不会被更新更新，因此该值不准确。`InnoDB``.ibd``MyISAM`

相反，您可以创建[触发器](http://dev.mysql.com/doc/en/triggers.html)，在修改表时使用当前时间戳更新单独的表：

```
CREATE TABLE log (
  table_name VARCHAR(64) NOT NULL,
  lastmodified TIMESTAMP NOT NULL,
  PRIMARY KEY (table_name)
);

CREATE TRIGGER foo_ins AFTER INSERT ON my_table FOR EACH ROW
INSERT INTO log (table_name, lastmodified) VALUES ('my_table', NOW())
ON DUPLICATE KEY UPDATE lastmodified = NOW();

CREATE TRIGGER foo_ins AFTER UPDATE ON my_table FOR EACH ROW
INSERT INTO log (table_name, lastmodified) VALUES ('my_table', NOW())
ON DUPLICATE KEY UPDATE lastmodified = NOW();

CREATE TRIGGER foo_ins AFTER DELETE ON my_table FOR EACH ROW
INSERT INTO log (table_name, lastmodified) VALUES ('my_table', NOW())
ON DUPLICATE KEY UPDATE lastmodified = NOW(); 
```

# google-app-engine - 如何测试 NDB 中未设置的重复属性？

> ID：13929283
> 
> 赞同：6
> 
> 时间：2012-12-18T08:48:52.010
> 
> 标签：google-app-engine, app-engine-ndb

如何在设置实体后测试 NDB 中未设置的重复属性？

我能找到的唯一参考说：

> 在重复属性上查询 None 值具有未定义的行为；不要那样做。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T17:06:20.860

如果您从未在重复属性的列表内容中添加任何内容，则不会发送任何值，并且该属性将显示为`<missing>`not as`<null>`

根据关于[查询和索引](http://code.google.com/appengine/docs/python/datastore/queriesandindexes.html#Introducing_Indexes)的 App Engine 文档，属性没有值的实体和属性值为空的实体之间存在区别；和

> 查询永远不会返回没有过滤属性的实体。

所以不可能为这些旧记录编写查询。

请参阅 AppEngine 上面引用的其余答案
[：Query datastore for records with <missing> value](https://stackoverflow.com/questions/598605/appengine-query-datastore-for-records-with-missing-value)

如果您希望能够查询此类内容，则应在数据模型中强制执行此操作。例如，您可以有`ndb.ComputedProperty`一个布尔值，对应于相应列表的长度是否为零，例如

```
class MyModel(ndb.Model):
  my_repeat = ndb.StringProperty(repeated=True)
  sentinel = ndb.ComputedProperty(lambda self: len(self.my_repeat) == 0) 
```

并查询这些缺失值，您可以使用

```
MyModel.query(MyModel.sentinel == True) 
```

如果您的数据存储中有一组现有的此类对象，您可以对它们运行一次[mapreduce](https://developers.google.com/appengine/docs/python/dataprocessing/)，并使用更新的模型定义简单地检索每个实体，然后将每个实体放回数据存储中。这将保持所有现有属性相同并使用`sentinel`值进行更新。

# ios6 - 使用 xcode 模拟器 ios 6 获取 GEOErrorDomain code=-204 错误 - 使用 mapkit

> ID：13929285
> 
> 赞同：3
> 
> 时间：2012-12-18T08:48:54.243
> 
> 标签：ios6, mapkit

我刚刚使用 iOS 6 SDK 创建了一个项目，并且正在使用新的 Apple 地图，但即使进行了非常基本的初始化，我的意思是，我只是添加了框架，将地图放入 xib 并将地图视图与 IBOutlet 连接，它加载地图很好地显示了库比蒂诺的位置，但如果我移动到另一个点，瓷砖将不再加载，并且控制台中开始显示错误：

```
Operation could not be completed...GEOErrorDomain code= -204 
```

这很烦人。我也在尝试放大特定坐标，但它也不起作用。

配置或代码中是否缺少任何内容？

提前致谢！

# c# - ImportPSModule 故障检测

> ID：13929292
> 
> 赞同：4
> 
> 时间：2012-12-18T08:49:31.300
> 
> 标签：c#, .net, powershell, pssnapin, runspace

我正在尝试使用`InitialSessionState.ImportPSModule`以导入 Powershell 模块。

我有兴趣知道模块的导入是否由于任何原因（例如找不到文件等）而失败。将此类代码放在 try 块中不会在失败的情况下引发异常，并且该函数似乎会静默失败并在无法导入模块时继续。

如果导入失败，有没有办法在代码中发出警报？

我正在尝试执行以下操作。在下面的代码中，模块“TestModule1234”不存在。catch 块不会捕获异常。

注意：这只是原型测试代码，所以请忽略任何与生产代码相关的违规行为。

```
try
{
    //Initializing the PowerShell runspace
    InitialSessionState psSessionInitialState = InitialSessionState.CreateDefault();

    LogFile.Log("Importing Module TestModule1234");
    psSessionInitialState.ImportPSModule(new[] { "TestModule1234" });

    LogFile.Log("Creating Powershell Runspace");
    m_PoshRunspace = RunspaceFactory.CreateRunspace(psSessionInitialState);
}
catch (System.Exception ex)
{
    LogFile.Log("Failed to create a Powershell Runspace");
    LogFile.Log(ex.ToString());
    throw;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T15:01:19.837

由于某些原因，缺少模块不会被视为致命错误。但它们仍然是重新编码的错误。为了解决问题，请执行以下操作：

1.  通过 .打开你的运行空间`Open()`。仍然在 try 块中执行此操作以捕获其他异常，它们是可能的，我在实践中遇到过这种情况。
2.  获取标准错误列表 ( `$Error`) 并在打开后分析特定的“缺少模块”错误或其他错误。

这是 PowerShell 中仅使用 .NET 方法的工作示例，因此它被直译为 C#。此脚本不会失败（不会引发异常），但会显示作为变量获得的错误 `Error`：

```
$psSessionInitialState = [System.Management.Automation.Runspaces.InitialSessionState]::CreateDefault();

"Importing Module TestModule1234"
$psSessionInitialState.ImportPSModule(@("TestModule1234"))

"Creating PowerShell Runspace"
$PoshRunspace = [System.Management.Automation.Runspaces.RunspaceFactory]::CreateRunspace($psSessionInitialState)

"Opening PowerShell Runspace"
$PoshRunspace.Open()

"Getting Runspace Error"
$PoshRunspace.SessionStateProxy.PSVariable.GetValue('Error') 
```

**输出**

> 导入模块 TestModule1234 创建 Powershell 运行空间 打开 Powershell 运行空间 获取运行空间错误 Import-Module：未加载指定的模块“TestModule1234”，因为在任何模块目录中都找不到有效的模块文件。+ CategoryInfo : ResourceUnavailable: (TestModule1234:String) [Import-Module], FileNotFoundException + FullyQualifiedErrorId : Modules_ModuleNotFound,Microsoft.PowerShell.Commands.ImportModuleCommand

# windows - 使用批处理脚本格式化文本文件

> ID：13929295
> 
> 赞同：0
> 
> 时间：2012-12-18T08:49:42.590
> 
> 标签：windows, batch-file, dos

我有一个包含以下内容的文件。

```
http://server.in.oracle.com:18080/svn/SVN_DEMO/branches/CI_TEST/AM/SQL/ampks_amdtronl_kernel.sql
http://server.in.oracle.com:18080/svn/SVN_DEMO/branches/CI_TEST/AM/SQL/ampks_amdtronl_utils.sql
http://server.in.oracle.com:18080/svn/SVN_DEMO/branches/CI_TEST/AM/SQL/ampks_fundupload.sql
http://server.in.oracle.com:18080/svn/SVN_DEMO/branches/CI_TEST/AM/SQL/ampks_amdtronl_main.sql
http://server.in.oracle.com:18080/svn/SVN_DEMO/branches/CI_TEST/AM/SQL/ampks_validate.sql 
```

我需要一个批处理脚本来格式化文件，使其如下所示。

```
ampks_amdtronl_kernel.sql:AM/SQL/ampks_amdtronl_kernel.sql
ampks_amdtronl_utils.sql:AM/SQL/ampks_amdtronl_utils.sql
ampks_fundupload.sql:AM/SQL/ampks_fundupload.sql
ampks_amdtronl_main.sql:AM/SQL/ampks_amdtronl_main.sql
ampks_validate.sql:AM/SQL/ampks_validate.sql 
```

那是文件名：Path/from/AM/till/filname

请指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:19:15.077

```
for /f %%a in (file.txt) do echo %%~nxa:AM/SQL/%%~nxa >>temp.txt
del file.txt /f /q
ren temp.txt file.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:04:53.400

您可以使用 awk 来完成此操作。或者使用简单的文本编辑器将[http://server.in.oracle.com:18080/svn/SVN_DEMO/branches/CI_TEST](http://server.in.oracle.com:18080/svn/SVN_DEMO/branches/CI_TEST)替换为空字符串。然后，我们可以将文件导入 Excel 以将字符串划分为 '/' 上的列最后，使用连接函数（在 Excel 中）来构建您的字符串。

我更喜欢awk，你需要使用split函数

> awk '{split($0,a,"/"); 打印 a[10],':',a[6],'/',a[7],'/',a[8],'/',a[9],'/',a[10] }'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T08:58:06.827

在您选择的循环中： 1\. 将线路一分为二

```
suffix=${line##.*/AM}   # this deletes everything before /AM so you have the suffix
fname=`basename $line`  # this gives you the name of the file 
```

1.  随心所欲地重新组装碎片

    echo "${fname}:${sufffix}"

或者，您可以使用一行`sed`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T09:12:54.543

PowerShell 救援：

```
param ([string] $inFileName, [string] $outFileName)

function Reformat-String
{
    param (
        [string] $str
    )

    $split = $str.Split("/")

    return $split[9] + ":" + $split[7] + "/" + $split[8] + "/" + $split[9]
}

$file = Get-Content $inFileName

foreach($line in $file)
{
    $newLine = Reformat-String $line
    $newLine | Out-File $outFileName -Append
} 
```

另存为“reformat.ps1”。调用为 .\reformat.ps1 SourceFilePath DestinationFilePath

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T15:26:05.907

```
@echo off
For /F "tokens=7-9 delims=/" %%a in (thefile.txt) do echo %%c:%%a/%%b/%%c 
```

# ruby-on-rails - 用于小型社区网站的 Wordpress 或 Ruby on Rails：性能和多对多关系

> ID：13929298
> 
> 赞同：0
> 
> 时间：2012-12-18T08:50:08.753
> 
> 标签：ruby-on-rails, wordpress

我正在计划一个带有个人资料和自定义内容类型的**小型社区网站。**该项目将在共享网络空间上启动，稍后将移至专用服务器。选择系统的最重要标准是：

*   在普通硬件上的性能
*   易于管理

我一直在将 Wordpress 用于小型项目，而 Mingle 和 BuddyPress 等插件看起来很有前景。另一方面，Rails 及其适应和理解系统所有部分的可能性令人着迷。我唯一担心的是：在共享网站上使用 Rails 的测试系统非常慢。Wordpress 会做得更好吗？

如果是这样：Wordpress 是否提供**将自定义内容类型与标签结合**的可能性（多对多关系）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:37:23.873

选择什么平台取决于您的网站有多少用户和访问量，我认为 wp 对于 10k 帖子网站来说已经足够了。而且，对于将自定义内容类型与标签结合起来，这对您有好处吗：http://wpmu.org/wordpress-custom-content-plugin/

# .net - .NET Remoting TransparentProxy 的问题

> ID：13929302
> 
> 赞同：1
> 
> 时间：2012-12-18T08:50:27.067
> 
> 标签：.net, remoting, appdomain

我正在尝试使用反射在 AppDomain 中执行一些代码。这是我的代码：

```
AppDomain appDomain = GetSomehowAppDomain(); 
string typeAssembly = GetTypeAssembly();
string typeName = GetTypeName();
object targetObject = appDomain.CreateInstanceAndUnwrap(typeAssembly, typeName);
MethodInfo methodInfo = targetObject.GetType().GetMethod(methodName);
object result = methodInfo.Invoke(targetObject, methodParams); 
```

当此代码在网站下运行时，一切正常。但是，当我从调用 WCF 服务的控制台应用程序中执行此操作时，它会尝试调用上述代码 -`methodInfo`是`null`，我正在`NullReferenceException`最后一行。

顺便说一句`targetObject`，是`System.Runtime.Remoting.Proxies.__TransparentProxy`类型，我假设如果它在 GoF 模式中代理意味着我可以访问类型的成员，这是用于代理的原始来源。但`targetObject`没有`typeName`类型的成员。

使用`targetObject.GetType().GetMethods()`我发现它有 7 种方法：

1.  获取终身服务
2.  初始化生命周期服务
3.  创建对象引用
4.  字符串
5.  等于
6.  获取哈希码
7.  获取类型

`targetObject`预计将成为`WorkflowManager`类型的代理。

`public class WorkflowsManager : MarshalByRefObject, ISerializable, IDisposable, IWorkflowManager`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:08:38.547

感谢[Panos Rontogiannis](https://stackoverflow.com/users/850119/panos-rontogiannis)的评论，我意识到我错过了您的问题中的指示，即您实际上是在 WCF 代码中加载程序集，而不是在控制台应用程序中。

确保来自 GAC 的实际程序集版本是您希望在 WCF 代码中使用的程序集版本。

我已经更新了类似于您的方案的解决方案。

```
//After building the library, add it to the GAC using "gacutil -i MyLibrary.dll"
using System;
using System.Runtime.Serialization;

namespace MyLibrary
{
    [Serializable]
    public class MyClass : MarshalByRefObject
    {
        public string Work(string name)
        {
            return String.Format("{0} cleans the dishes", name);
        }
    }
} 
```

Web 应用程序中的服务类定义：

```
using System;
using System.Reflection;
using System.ServiceModel;

namespace WebApplication1
{
    [ServiceContract]
    public class MyService : IMyService
    {
        [OperationContract]
        public string DoWork(string name)
        {
            string methodName = "Work";
            object[] methodParams = new object[] { "Alex" };
            AppDomain appDomain = AppDomain.CreateDomain("");
            appDomain.Load("MyLibrary, Version=1.0.0.3, Culture=neutral, PublicKeyToken=0a6d06b33e075e91");
            string typeAssembly = "MyLibrary, Version=1.0.0.3, Culture=neutral, PublicKeyToken=0a6d06b33e075e91";
            string typeName = "MyLibrary.MyClass";
            object targetObject = appDomain.CreateInstanceAndUnwrap(typeAssembly, typeName);
            MethodInfo methodInfo = targetObject.GetType().GetMethod(methodName);
            string result = methodInfo.Invoke(targetObject, methodParams).ToString();
            return result;
        }
    }
} 
```

调用 WCF 服务的控制台应用程序：

```
using System;
using WebApplication1;

namespace ConsoleApplication12
{
    class Program
    {
        static void Main(string[] args)
        {
            WebApplication1.MyService myService = new MyService();
            Console.WriteLine(myService.DoWork("Alex"));
        }
    }
} 
```

# c# - 覆盖 WinForms 中的事件处理程序

> ID：13929303
> 
> 赞同：3
> 
> 时间：2012-12-18T08:50:27.300
> 
> 标签：c#, winforms, events

我有一个带有自定义控件的表单。该控件在 ItemChanged 事件上有一个事件处理程序。

```
private void ncNomSimple_ItemChanged(object sender, EventArgs e)
{
    some code..
} 
```

我继承了这个表单，因此我拥有新表单中的控件和事件，但我希望为该事件调用新表单中的另一个事件处理程序，而不是上面的事件处理程序。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T09:00:02.727

在基类中：

```
protected virtual void ncNomSimple_ItemChanged(object sender, EventArgs e)
{
    MessageBox.Show("called from Test class");
} 
```

在派生类中：

```
protected override void ncNomSimple_ItemChanged(object sender, EventArgs e)
{
    MessageBox.Show("called from Test1 class");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T08:53:56.050

将事件处理程序从 更改`private`为`protected virtual`并以继承的形式覆盖它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T09:28:24.407

在基类中，写成（public/protected）virtual，然后你可以在子类中写override，但我认为基类不应该被保护。如果我错了，请纠正我

# android - 创建 xml 字符串的替代解决方案

> ID：13929304
> 
> 赞同：2
> 
> 时间：2012-12-18T08:50:32.427
> 
> 标签：android, android-xml, android-ksoap2

我通过构建输入并作为请求发送`SOAP`从 android调用 .net Web 服务。`XML`接收作为`XML`字符串响应并解析它。以上所有工作正常。

为了构建 XML 字符串，我遵循使用这样的`DocumentBuilderFactory`示例的方法

```
DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder documentBuilder = documentBuilderFactory.newDocumentBuilder();
Document document = documentBuilder.newDocument();

Element rootElement = document.createElement("XMLINPUT");//Parent Node of the xml
document.appendChild(rootElement);

Element childElementCNN = document.createElement("CNNREFF");//Child Node
rootElement.appendChild(childElementCNN);
childElementCNN .appendChild(document.createTextNode(strCNN));

Element childElementCTT = document.createElement("CTTREFF");//Child Node
rootElement.appendChild(childElementCTT);
childElementCTT.appendChild(document.createTextNode(strCTT));

TransformerFactory factory = TransformerFactory.newInstance();
Transformer transformer = factory.newTransformer();
Properties outFormat = new Properties();
outFormat.setProperty(OutputKeys.INDENT, "yes");
outFormat.setProperty(OutputKeys.METHOD, "xml");
outFormat.setProperty(OutputKeys.OMIT_XML_DECLARATION, "no");
outFormat.setProperty(OutputKeys.VERSION, "1.0");
outFormat.setProperty(OutputKeys.ENCODING, "UTF-8");
transformer.setOutputProperties(outFormat);
DOMSource domSource = new DOMSource(document.getDocumentElement());
OutputStream output = new ByteArrayOutputStream();
StreamResult result = new StreamResult(output);
transformer.transform(domSource, result);
String strInputXML = output.toString(); //Storing into a string 
```

我想知道在 android 中构建 XML，因为我想使用相同的函数来构建不同的 XML。还有其他替代解决方案吗？如果有，请发布您的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:20:38.640

是的，看看[SimpleXML](http://simple.sourceforge.net)

您可以根据您的 XML 文档结构定义 bean，并使用 getter/setter 来操作值。

```
@Root(name = "XMLINPUT")
class MyBean {

    @Element(name = "CNNREFF")
    private String child1;

    @Element(name = "CTTREFF")
    private String child2;

} 
```

# flash - FLASH MEDIA SERVER 无法从本地网络中的另一台电脑连接到服务器

> ID：13929313
> 
> 赞同：1
> 
> 时间：2012-12-18T08:51:28.743
> 
> 标签：flash, flash-media-server

我有闪存媒体服务器，但我遇到了问题。客户端是 flash (AS3) 服务器端是 Action Script 服务器端 (ASC)

我正在使用 RTMP 协议和 1935 端口。像这样：rtmp://192.168.2.145:1935/simpleapp

我正在使用 NetConnection 类来处理服务器-客户端事件

我想在本地计算机上创建一个聊天应用程序。在我的电脑上，v'm 打开了很多客户端来连接服务器，一切正常。我连接并与我的 PC 上的其他客户聊天。但是，如果我打开客户端以从本地网络中的另一台 PC 连接 fms，我无法连接到服务器。我的客户 Netconnection 捕捉到了这个事件

```
"NetConnection.Connect.Failed" 
```

如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:58:56.300

可能是您的路由器阻塞了流量。您确定路由器上的端口是开放的吗？

# nginx - php5-fpm 的 display_errors 不适用于 nginx

> ID：13929314
> 
> 赞同：29
> 
> 时间：2012-12-18T08:51:31.643
> 
> 标签：nginx, php

我正在使用 php5-fpm 运行 nginx，并希望启用`display_errors`. 我正在运行一个虚拟主机，所以请帮助找到一种方法来启用`display_errors`, `display_startup_errors`.

我尝试修改`/etc/php5/fpm/php.ini`.

```
;display_errors
Default Value: On
Development Value: On
;Production Value: Off 
;display_startup_errors
Default Value: On
Development Value: On
;Production Value: Off
;error_reporting
Default Value: E_ALL
Development Value: E_ALL
;Production Value: E_ALL & ~E_DEPRECATED
;html_errors
Default Value: On
Development Value: On
;Production value: Off
;log_errors
Default Value: On
Development Value: On
;Production Value: On 
```

是否需要`ini`为每个不同的虚拟主机提供多个文件，vhost 对 php 配置有什么影响吗？

我也在尝试`set_ini()`，但它没有显示任何效果。`php.ini`在更改文件后，我重新启动了 nginx 和 php5-fpm 。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-18T14:00:24.197

php.ini 对 php-fpm 没有任何作用。

**如果您使用 php-fpm：**您必须在与您的 Web 应用程序关联的 fpm 池配置中提供配置更改。这些位置取决于您的系统。大概的位置是：

*   `/etc/php-fpm.d/mydomain.conf`（如果事情已经布置得很整齐）
*   `/etc/php-fpm.conf`（如果您只使用一个 conf 用于 php-fpm）

你的配置路径与我的不同，所以四处看看你有什么。`/etc/php-fpm.conf`如果`/etc/php-fpm.d/`. _

**如果您不使用 php-fpm：**使用正确的配置更新 php.ini。

**更正您的配置：**在问题中显示的配置中，您有未注释的文档，而不是提供正确的设置。您最好撤消这些更改，因为 PHP 不会理解它们。

*php-fpm 的正确行是：*

```
 ; enable display of errors
    php_flag[display_errors] = on
    php_flag[display_startup_errors] = on 
```

*正常 php 的正确行是：*

```
 ; enable display of errors
    display_errors = On
    display_startup_errors = On 
```

**建议：**不要在生产环境中使用这些选项。最好的祝愿。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-10-31T21:37:45.330

如果您有`/etc/php5/fpm/php.ini`（在 Debian 中使用，Ubuntu 风格的配置），那么对这个文件的更改应该会生效，并且可以通过对特定`/etc/php5/fpm/pool.d/*.conf`文件进行更改来进一步覆盖每个池的配置。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-05-30T15:41:48.043

在我的情况下，Zend 错误和 NGinX - php5 fpm，像这样工作：

只有我投入`public/index.php`

```
error_reporting(E_ALL | E_STRICT);
ini_set('display_errors', 1); 
```

没有`If(){...}`

但是如果只是放上面的代码，显示错误，会给出这个：

```
Parse error: syntax error, unexpected '}', expecting ',' or ';' in /usr/local/nginx/html/ZendSkeletonApplication/module/Album/src/Album/Controller/AlbumController.php on line 12 
```

另一件事！设置此代码：

```
'display_not_found_reason' => true,
'display_exceptions'       => true, 
```

在 module.config.php 中像这样：

```
'view_manager' => array(
     'template_path_stack' => array(
         'album' => __DIR__ . '/../view',
         'display_not_found_reason' => true,
         'display_exceptions'       => true,
     ),
 ), 
```

我在屏幕上收到 error.log 的所有错误：

```
Fatal error: Uncaught exception 'Zend\View\Exception\InvalidArgumentException' with message 'Invalid path provided; must be a string, received boolean' in /usr/local/nginx/html/ZendSkeletonApplication/vendor/zendframework/zendframework/library/Zend/View/Resolver/TemplatePathStack.php:201 Stack trace: #0 /usr/local/nginx/html/ZendSkeletonApplication/vendor/zendframework/zendframework/library/Zend/View/Resolver/TemplatePathStack.php(149): Zend\View\Resolver\TemplatePathStack->addPath(true) #1 /usr/local/nginx/html/ZendSkeletonApplication/vendor/zendframework/zendframework/library/Zend/Mvc/Service/ViewTemplatePathStackFactory.php(38): Zend\View\Resolver\TemplatePathStack->addPaths(Array) #2 [internal function]: Zend\Mvc\Service\ViewTemplatePathStackFactory->createService(Object(Zend\ServiceManager\ServiceManager), 'viewtemplatepat...', 'ViewTemplatePat...') #3 /usr/local/nginx/html/ZendSkeletonApplication/vendor/zendframework/zendframework/library/Zend/ServiceManager/ServiceManager.php(939): call_user_func(Array, Object(Zend in /usr/local/nginx/html/ZendSkeletonApplication/vendor/zendframework/zendframework/library/Zend/ServiceManager/ServiceManager.php on line 946 
```

我没有在系统（Ubuntu 14.04）中将配置文件触摸为 php-fpm。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-17T08:00:32.063

PHP-FPM 7 的更新（在 Debian 下）

1.  去`/etc/php/[VERSION]/fpm/pool.d`
2.  编辑文件`www.conf`（或者如果您设置了其他池，请编辑这些文件）。
3.  你要`php_flag[display_errors] = on`
4.  重启`sudo service php[VERSION]-fpm restart`

# c++ - Palindrome2 循环不起作用

> ID：13929317
> 
> 赞同：0
> 
> 时间：2012-12-18T08:51:33.003
> 
> 标签：c++

在我粘贴的程序中，回文2函数在循环中无法正常工作，因为max2给出了输出998000（for循环的上限），而对于一个单独的数字'1441'，它工作得很好并且输出为1.Can你请指导？？？

```
#include <iostream>
long palindrome1(long);
long palindrome2(long);

int main()
{
    using namespace std;
    long a,b=111,max1=0,max2=0;
    for(b=111;b<998001;b++)
    {
      if((palindrome2(b))==1)
      {
          max2=b;
      }
    }
    for(a=11;a<998001;a++)
    {
        if((palindrome2(a))==1)
        {
          max1=a;
        }
    }
     cout<<max1<<endl;
     cout<<max2<<endl;
     cout<<palindrome2(1441)<<endl;
     cin.clear();
     cin.get();
}
long palindrome2(long n)
{
    long a[6],b,c=0;
    do {
        a[c]=n%10;
        n=n/10;
        c++;
    } while(n>0);

    b=c;
    if(b%2!=0)
    {
        for(int l=b/2;l>=0;l--)
            for(int m=(b/2)+1;m<=b;m++)
            {
                if(a[l]!=a[m])
                {
                    return 0;
                    break;
                }
            }
    }
    else
    {
        return 1;   
    }
}

long palindrome1(long n)
{
    long a[6],b,c=0;
    do {
        a[c]=n%10;
        n=n/10;
        c++;
    } while(n>0);

    b=c;
    if(b%2==0)
    {
        for(int k=(b/2)-1;k>=0;k--)
            for(int d=((b/2)+1);d<=b;d++)
            {
                if(a[k]==a[d])
                {
                    return 0;
                    break;
                }
            }
    }
    else
    {
        return 1;   
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:00:57.673

我没有查看循环边界情况，但有一些彻底的错误：您为所有偶数长度返回 1。那不可能是正确的。此外，对于奇数长度的数字，如果不匹配，您会立即返回 0，但如果所有内容都匹配，则不要返回 1（如果您正在考虑，则跳过 else 部分）。

基本上， palindrome2( 10 ) 将返回 1，而 palindrome2( 101 ) 将返回一些垃圾值（这是一个技术术语）。

# vba - 查找和替换传入电子邮件中的文本

> ID：13929318
> 
> 赞同：3
> 
> 时间：2012-12-18T08:51:32.363
> 
> 标签：vba, replace, outlook

我正在尝试替换传入电子邮件中的某些文本。

我找到了几个脚本，但这些脚本用于发送/创建电子邮件。

***当前工作代码***（感谢拉里）：

```
Sub testing(MyMail As MailItem)
    MyMail.HTMLBody = Replace(MyMail.HTMLBody, "TESTING", "TESTINGTESTING")
    MyMail.Save
End Sub 
```

此 Outlook 会话代码：

```
Private Sub Application_NewMail()

    Dim mail As MailItem

    Set mail = Application.GetNamespace("MAPI").GetDefaultFolder(olFolderInbox).Items.GetFirst
    If mail.Class = olMail Then 'It should be
        'change subject
        mail.Subject = "TESTING"
        'replace body text
        If mail.BodyFormat = olFormatHTML Then
            mail.HTMLBody = Replace(mail.HTMLBody, "TESTING", "TESTINGTESTING")
        Else
            mail.Body = Replace(mail.Body, "SEARCHTEXT", "REPLACETEXT")
        End If
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:08:36.043

用于处理收件箱中的电子邮件的代码。

```
Sub testing()
    Dim mail As MailItem
    Dim Inbox As Outlook.Folder

    Set Inbox = Session.GetDefaultFolder(olFolderInbox)
    For Each mail In Inbox.Items
        'change subject
        mail.Subject = "TESTING"
        'replace body text
        If mail.BodyFormat = olFormatHTML Then
            mail.HTMLBody = Replace(mail.HTMLBody, "TESTING", "TESTINGTESTING")
        Else
            mail.Body = Replace(mail.Body, "SEARCHTEXT", "REPLACETEXT")
        End If
    Next mail
End Sub 
```

如果您希望在有新邮件时应用宏，请使用以下代码。

将代码放入`ThisOutlookSession`模块中。

```
Private Sub Application_NewMail()
    Dim newMail As MailItem

    Set newMail = Application.GetNamespace("MAPI").GetDefaultFolder(olFolderInbox).Items.GetFirst

    newMail.HTMLBody = Replace(newMail.HTMLBody, "TESTING", "TESTINGTESTING")
End Sub 
```

此代码片段可用于“规则”中的“运行脚本”。

```
Sub testing(MyMail As MailItem)
    MyMail.HTMLBody = Replace(MyMail.HTMLBody, "TESTING", "TESTINGTESTING")
    MyMail.Save
End Sub 
```

# java - 从 Stax 转换为 DOM 导致 NullPointerException

> ID：13929319
> 
> 赞同：4
> 
> 时间：2012-12-18T08:51:36.000
> 
> 标签：java, stax

我正在使用 StAX 通过从 StAXSource 转换为 DOMResult 来读取 XML 内容并将其部分解析为 DOM 片段。但是，当任何元素重新定义默认 XML 命名空间 (xmlns="") 时，这会导致 NullPointerException。演示情况的最少代码：

```
String xml =
  "<?xml version=\"1.0\"?>"+
  "<document>"+
  "  <element xmlns=\"\" />"+
  "</document>";

StringReader reader = new StringReader(xml);
XMLInputFactory xif = XMLInputFactory.newFactory();
XMLStreamReader xsr = xif.createXMLStreamReader(reader);

TransformerFactory tf = TransformerFactory.newInstance();
Transformer t = tf.newTransformer();

StAXSource source = new StAXSource(xsr);
DOMResult result = new DOMResult();

t.transform(source,result); 
```

堆栈跟踪的开头是：

```
Caused by: java.lang.NullPointerException
  at com.sun.org.apache.xml.internal.serializer.NamespaceMappings.pushNamespace(NamespaceMappings.java:233)
  at com.sun.org.apache.xml.internal.serializer.ToXMLSAXHandler.startPrefixMapping(ToXMLSAXHandler.java:362)... 
```

据我了解，输入 XML 是有效的。Woodstox 实现可以毫无问题地转换 XML，但如果有办法配置或解决与 Java 捆绑的默认实现的问题，我不希望向我的应用程序添加更多依赖项。有什么办法吗？还是应该将其视为 Java 默认实现中的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:22:59.980

我建议使用 SAX，即使使用 xmlns = "" 也能正常工作

```
XMLReader xr = XMLReaderFactory.createXMLReader();
Source source = new SAXSource(xr, new InputSource(reader)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:03:22.923

使用有效的 xml 文件

**尝试更改您的代码**

```
 XMLInputFactory xif = XMLInputFactory.newInstance();
          XMLStreamReader xsr = xif.createXMLStreamReader(new FileReader("test.xml"));
            xsr.nextTag(); 

            TransformerFactory tf = TransformerFactory.newInstance();
            Transformer t = tf.newTransformer();
            while(xsr.nextTag() == XMLStreamConstants.START_ELEMENT) {
                DOMResult result = new DOMResult();
                t.transform(new StAXSource(xsr), result);
                Node domNode = result.getNode();
            } 
```

# iphone - 如何在 iOS 上使用 NSStreamNetworkServiceTypeBackground？

> ID：13929320
> 
> 赞同：4
> 
> 时间：2012-12-18T08:51:36.980
> 
> 标签：iphone, ios, networking, background

我`NSStreamNetworkServiceTypeBackground`在文件 NSStream.h 文件中找到了密钥。它被声明为

```
FOUNDATION_EXPORT NSString * const NSStreamNetworkServiceTypeBackground     NS_AVAILABLE(10_7, 5_0); 
```

这意味着，它在 iOS 5 及更高版本中可用。但是，在 plist 中，我找不到为此设置的匹配背景模式。有人知道如何使用它吗？

该应用程序将发布到应用程序商店，因此需要一种经过批准的方式。

BR，阿克谢·沙阿。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-25T20:00:16.497

如果您使用 CFStream 进行联网，您可以这样做：

```
NSInputStream *inputStream = (__bridge_transfer NSInputStream *)readStream;
NSOutputStream *outputStream = (__bridge_transfer NSOutputStream *)writeStream; 
```

之后，您可以使用常量（虽然不确定 appstore）

[设置 NSStreamNetworkServiceTypeBackground “在幕后做什么”？](https://stackoverflow.com/questions/10220329/what-does-setting-nsstreamnetworkservicetypebackground-do-under-the-hood)

# django - django'没有这样的表'当syncdb

> ID：13929321
> 
> 赞同：0
> 
> 时间：2012-12-18T08:51:44.407
> 
> 标签：django, django-syncdb

这是我的模型：

```
class BaseModelTalk(models.Model):

    name            = models.CharField('Name', max_length = 100)
    slug            = models.SlugField('Slug', blank = True)
    creator         = models.ForeignKey('person.Person')
    date_created    = models.DateTimeField(default = now)
    objects         = CustomTalkManager()

    class Meta:
        abstract = True

    def save(self, *args, **kwargs):
        if not self.id:
            self.slug = slugify(self.name)
        super(BaseModelTalk, self).save(*args, **kwargs)

    def __unicode__(self):
        return u'%s' % self.slug

class Talk(BaseModelTalk):

    tags            = TaggableManager()
    description     = models.TextField('Talk description')

    class Meta:
        verbose_name = 'Talk'
        verbose_name_plural = 'Talks'

class ThreadTextRating(RatedItemBase):
    content_object = models.ForeignKey('talk.ThreadText')

class ThreadImageRating(RatedItemBase):
    content_object = models.ForeignKey('talk.ThreadImage')

class ThreadLinkRating(RatedItemBase):
    content_object = models.ForeignKey('talk.ThreadLink')

class Thread(BaseModelTalk):

    THREAD_TYPE = (('text', 'Text'),
                   ('image', 'Image'),
                   ('link', 'Link'))

    type            = models.CharField('Thread\'s type', max_length = 5, choices = THREAD_TYPE, blank = True, null = True)

    class Meta:
        abstract = True

class ThreadText(Thread):

    ratings         = Ratings(ThreadTextRating)
    talk            = models.ForeignKey('talk.Talk', related_name = 'text_threads')
    content         = models.TextField('Thread\'s context')

    class Meta:
        verbose_name = 'Text'
        verbose_name_plural = 'Text\'s'  

class ThreadImage(Thread):

    ratings         = Ratings(ThreadImageRating)
    talk            = models.ForeignKey('talk.Talk', related_name = 'image_threads')
    image           = ImageField('Thread\'s image', upload_to = 'thread/image/')

    class Meta:
        verbose_name = 'Image'
        verbose_name_plural = 'Image\'s'

class ThreadLink(Thread):

    ratings         = Ratings(ThreadLinkRating)
    talk            = models.ForeignKey('talk.Talk', related_name = 'link_threads')
    link            = models.URLField('Thread\'s link')

    class Meta:
        verbose_name = 'Link'
        verbose_name_plural = 'Link\'s' 
```

每次我运行`syncdb`时，我都会收到一个错误：`django.db.utils.DatabaseError: no such table: talk_basemodeltalk`。

我已经将应用程序放在我的`settings.py`哪个是`talk`.

我真的不知道是什么原因造成的，唯一的线索是如果我`class Meta`评论`BaseModelTalk`那行，我没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:50:41.900

错误原因：我们不能子类化一个模型，在那里我们明确定义一个管理器，自定义或非自定义。只需将`objects`线从其中移除`BaseModelTalk`并将其放置在`abstract = False`将要修复它的每个模型上。

# java - ClassLoader：可能配置为使用惰性而不是静态分辨率？

> ID：13929324
> 
> 赞同：0
> 
> 时间：2012-12-18T08:51:51.997
> 
> 标签：java, jvm, classloader

我读了[JLS 第 12 章。执行](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.1)所以它说关于**解决方案**

> 解析是检查从 Test 到其他类和接口的符号引用的过程，方法是加载提到的其他类和接口并检查引用是否正确。
> 
> 在初始链接时，解析步骤是可选的。实现可以从很早就被链接的类或接口解析符号引用，甚至可以递归地解析来自被进一步引用的类和接口的所有符号引用。...
> 
> 一个实现可能会选择仅在积极使用符号引用时才解析它；对所有符号引用一致使用此策略将代表“最懒惰”的解决形式。在这种情况下，如果 Test 有多个对另一个类的符号引用，那么这些引用可能会在使用时一次解析一个，或者如果在程序执行期间从未使用过这些引用，则可能根本不解析。
> 
> 例如，实现可以选择单独解析类或接口中的每个符号引用，仅在使用时（延迟或延迟解析），或者在验证类时一次性解析它们（静态解析）。这意味着在某些实现中，在初始化类或接口之后，解析过程可能会继续。

所以我的问题是我是否可以选择/强制使用*延迟*初始化？也许它需要编写一个自定义类加载器？或者，启动时类加载器中的 ClassNotFoundException 可能会被忽略？

我有条件地创建了一个对象，`main`其中不应该实际发生，并且 jar 中缺少相应的类。但是甚至在开始执行之前就`NoClassDefFound`被抛出。`main`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:13:55.380

`NoClassDefFoundError`错误：

> 如果 Java 虚拟机或`ClassLoader`实例尝试加载类的定义（作为正常方法调用的一部分或作为使用`new`表达式创建新实例的一部分）并且找不到类的定义，则抛出此异常。

该错误与实例化相关类的实例无关。因此，对于您的示例，如果“外部”类为该类型定义了一个字段，则可能就足够了。无法加载包含 main 的类，因为它依赖于运行时类路径中不可用的类型。

如果有疑问，请查看您的导入语句并删除您要动态加载的类的 import ^(* )。)然后尝试摆脱错误标记*，而无需*再次为该类添加导入。

^* ) - 我假设这个动态加载的类位于不同的包中，您需要导入它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T09:15:56.110

您不能使用 Oracle 的 JVM。

根据[文档](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html#jvms-5.3)，类加载器不能推迟类的加载。链接的顺序和时间是特定于实现的。AFAIK 大多数 JVM 选择尽早链接，有些甚至在编译时链接（参见 Excelsior JET 示例）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T09:33:12.727

考虑这个

```
class Test2 {
}

public class Test1 {
    static Test2 test2;

    public static void main(String[] args) {
        System.out.println("Test1");
        test2 = new Test2();
    }
} 
```

我编译它，删除 Test2.class 并运行`java -cp . Test1`输出

```
 Test1
    Exception in thread "main" java.lang.NoClassDefFoundError: Test2
        at Test1.main(Test1.java:9)
    Caused by: java.lang.ClassNotFoundException: Test2
        at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
...... 
```

在我看来，这意味着 JVM 依赖解析默认是惰性的。JVM 直到第一次使用才注意到 Test2.class 丢失了。

# javascript - 如何从另一个页面关闭模态表单

> ID：13929326
> 
> 赞同：3
> 
> 时间：2012-12-18T08:52:03.800
> 
> 标签：javascript, jquery-ui, jquery

```
 $(document).ready(function()
 {
     $("#create-user").button().click(function()
     {
         $("#dialog-form").load('test.html').dialog({ modal:true, }); 
     }); 
 }); 
```

我有两页。从第一页我想用 url test.html 调用模态表单，我想用 Close 关闭来自 test.html 页面的模态表单

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T09:09:28.680

> [SimpleModal](http://www.ericmmartin.com/projects/simplemodal/)将使用 simplemodal-close 类自动将关闭函数（使用 onclick 事件）绑定到对话框内的任何元素。
> 
> 此外，您可以通过调用 $.modal.close(); 以编程方式关闭当前打开的对话框。

这意味着：在您的 closeWindow() 函数中，您可以简单地输入以下行：

```
 $.modal.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T08:57:41.527

样本。

HTML：

```
<input type="button" onclick='pop = window.open("http://www.google.com");' value="Click Me" />
<a href="#" onclick="pop.close();">Close</a> 
```

Javascript：

```
 <script>
       var pop;
   </script> 
```

这行得通。祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T09:16:41.420

关闭您可以使用的对话框，

```
$("#dialog-form").dialog('close'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T09:00:29.130

有这个代码。

```
<form ... onsubmit="window.location.assign('#close')"> 
```

# c++ - 当鼠标光标位于我的 MFC 应用程序中的按钮上时，无法设置手形光标

> ID：13929334
> 
> 赞同：0
> 
> 时间：2012-12-18T08:52:49.173
> 
> 标签：c++, visual-c++, mfc, cursor

我创建了一个新的自定义按钮类（派生自 CButton）。覆盖新自定义类中的 OnMouseMove API。当我的鼠标光标移到对话框中的按钮上时，自定义按钮类中的 OnMouseMove API 被成功调用，但光标符号未更改为手形符号 :(

在 OnMouseMove() API 我有以下代码：

```
if (m_hClickCursor == NULL) 
    m_hClickCursor = AfxGetApp()->LoadCursor(IDC_CLICK_CURSOR);
if (m_hClickCursor) 
    this->SetCursor(m_hClickCursor); 
```

这里，
**IDC_CLICK_CURSOR**是对手形光标的引用（我在应用程序的其他地方使用相同的手形光标）。
**m_hClickCursor**是光标的句柄

请帮忙 ！！

谢谢，-纳扬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:04:16.817

您必须处理[WM_SETCURSOR](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648382%28v=vs.85%29.aspx)才能执行此操作。

# android - 如何使用 ViewPager 功能创建水平滚动视图？

> ID：13929335
> 
> 赞同：1
> 
> 时间：2012-12-18T08:52:49.010
> 
> 标签：android, android-viewpager, horizontalscrollview

我已经尝试通过使用 viewpager 找出解决此问题的方法，但我一直无法完全这样做。

以下是我被分配解决的任务：

![在此处输入图像描述](../Images/91716e9d661a9457c810ab2bf8301792.png)

*   创建一个允许分页的视图*（通过使用视图分页器并在两个片段之间交换来解决）
*   让两个视图共享相同的背景并产生视差效果（示例：下面红色视图中的元素在分页到绿色视图时移动比背景稍慢）
*   找到让这两个视图“共享”图形的方法。这个想法是在红色视图上有一个动画，“跨越”到绿色视图。

有没有办法在安卓平台上解决这个问题？有没有办法简单地定义一个大于手机尺寸的布局，并且能够以某种方式在视图的可见部分和不可见部分之间进行分页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T08:02:36.527

你应该处理 onInterceptTouchEvent。当您单击 Horizo​​ntalScrollview 时，您应该在 onInterceptTouchEvent 中返回 false，否则返回 true；

这是，我是怎么做的

1）使 CustomViewpager 扩展 ViewPager 2）像这样覆盖 onInterceptTouchEvent

```
 @Override
public boolean onInterceptTouchEvent(MotionEvent ev) {
     if (childId > 0) {
         View scroll = findViewById(childId);
         if (scroll != null) {
             Rect rect = new Rect();
             scroll.getHitRect(rect);
             if (rect.contains((int) event.getX(), (int) event.getY())) {
                 return false;
             }
         }
     }
     return true;
}
private int childId;
public void setChildId(int id) {
    this.childId = id;
} 
```

3）像这样在xml中使用customViewpager而不是viewpager

```
<com.packagename.CustomViewpager ..... 
```

4）并从这样的活动中设置childId

```
CustomViewpager cv=(CustomViewpager)findViewById(R.id.id_of_customviewpager);
cv.setChildId(R.id.id_of_customviewpager); 
```

5）完成

逻辑是当你触摸 Horizo​​ntalScrollview 时给孩子触摸，否则给父母触摸

# android - 在 OpenGL ES 2.0 的显示函数中生成纹理

> ID：13929338
> 
> 赞同：1
> 
> 时间：2012-12-18T08:53:05.100
> 
> 标签：android, opengl-es, opengl-es-2.0

我可以在 OpenGL ES 2.0的函数`onDrawFrame`中生成纹理吗？`GLSurfaceRenderer`例如，我使用的代码如下所示。

```
GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, MyTexture);

int[] mNewTexture = new int[weight * height * 4];
for(int ii = 0; ii < weight * height; ii = ii + 4){
    mNewTexture[ii]   = 127;
    mNewTexture[ii+1] = 127;
    mNewTexture[ii+2] = 127;
    mNewTexture[ii+3] = 127;
}

IntBuffer texBuffer = IntBuffer.wrap(mNewTexture);
GLES20.glTexImage2D(GL10.GL_TEXTURE_2D, 0, GL10.GL_RGBA, weight, height, 0, GL10.GL_RGBA, GL10.GL_UNSIGNED_BYTE, texBuffer);
GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, 0);
GLES20.glBindFramebuffer(GLES20.GL_FRAMEBUFFER, 0);

pmF.drawSelf(MyTexture); 
```

并且`pmF`代码中的类用于使用纹理来渲染屏幕。我注意到这段代码被执行了。但是屏幕上没有显示结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:52:01.660

是的，可以`onDrawFrame()`在 OpenGL 代码中重新加载纹理，我在此方法中重新加载纹理。这是我的代码的摘录`onDrawFrame()`：

```
public void onDrawFrame(GL10 glUnused) {
    if (bReloadWood) {
        unloadTexture(mTableTextureID);
        mTableTextureID = loadETC1Texture("textures/" + mWoodTexture);
        bReloadWood = false;
    } 
    //...
} 
```

方法`unloadTexture()`和`loadETC1Texture()`做通常的 OpenGL 东西来卸载和加载纹理到 GPU：

```
protected void unloadTexture(int id) {
    int[] ids = { id };
    GLES20.glDeleteTextures(1, ids, 0);
} 

protected int loadETC1Texture(String filename) {
    int[] textures = new int[1];
    GLES20.glGenTextures(1, textures, 0);

    int textureID = textures[0];
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textureID);

    GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_NEAREST);
    GLES20.glTexParameterf(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_LINEAR);

    GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_S, GLES20.GL_REPEAT);
    GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_WRAP_T, GLES20.GL_REPEAT);

    InputStream is = null;
            // excluded code for loading InputStream for brevity

    try {
        ETC1Util.loadTexture(GLES10.GL_TEXTURE_2D, 0, 0, GLES10.GL_RGB, GLES10.GL_UNSIGNED_SHORT_5_6_5, is);
    } catch (IOException e) {
        Log.w(TAG, "Could not load texture: " + e);
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            // ignore exception thrown from close.
        }
    }

    return textureID;
} 
```

# android - 我们可以旋转模拟器吗

> ID：13929345
> 
> 赞同：1
> 
> 时间：2012-12-18T08:53:44.080
> 
> 标签：android, android-emulator

> **可能重复：**
> [如何旋转 Android 模拟器显示？](https://stackoverflow.com/questions/4535298/how-to-rotate-the-android-emulator-display)

我创建了一个 1024x600 的模拟器。api 级别 9。问题是我的应用程序有一个纵向视图。它不能被视为风景。

所以我想将其视为 600x1024 视图。因此，有没有办法解决这个问题？我想你理解我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T08:55:40.387

是的。

这是快捷方式[答案的链接](https://stackoverflow.com/a/4057309/1503155)

`CTRL` +`F11`

**或者**

`CTRL` +`12` 在窗户上。

虽然我们在这里是其他捷径[答案](https://shortcutworld.com/Android-SDK-Emulator/win/Android-Emulator_Shortcuts)。希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T09:05:31.813

通过键入`Ctrl`+`F12`

另请参阅[Android 模拟器的键盘命令](http://developer.android.com/tools/help/emulator.html#KeyMapping)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T08:55:51.840

**Windows ：**使用左`Ctrl` + `F12` 在横向和纵向模式之间切换。

**Mac 使用 :** `Fn` + `Ctrl` + `F12`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T08:58:27.850

**窗户：** `left Ctrl` +`F12`

**OS X:** `fn` + `control`+`F12`

您还可以在 Eclipse 中使用视图的图形布局在横向和纵向之间进行切换。

***见下文：***

![在此处输入图像描述](../Images/35cdb931cbeab9349d4bde0fcd570865.png) [查看图形布局景观 Android](https://stackoverflow.com/questions/7978931/viewing-the-graphical-layout-landscape-android)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-18T08:58:43.790

**两条捷径：-**

*   `CTRL` +`F12`
*   **NumLock** `Off`，然后`press` `7`从侧面键盘按键。

# java - Vaadin ServletException：无法加载应用程序类

> ID：13929352
> 
> 赞同：1
> 
> 时间：2012-12-18T08:54:18.280
> 
> 标签：java, exception, servlets, vaadin

当我尝试通过 localhost/testVaadin/ 在浏览器中加载 servlet 时出现 vaadin 和 servlet 错误

我想执行这个示例来看看 vaadin 是如何工作的，因为我必须使用活动资源管理器来实现一个 BPMN，它使用 vaadin 作为 UI 框架。

我附上了代码和 web.xml 加上抛出的异常。

```
package com.example.testvaadin;

import com.vaadin.Application;
import com.vaadin.data.Property;
import com.vaadin.data.Property.ValueChangeEvent;
import com.vaadin.data.util.IndexedContainer;
import com.vaadin.ui.Button;
import com.vaadin.ui.Button.ClickEvent;
import com.vaadin.ui.Form;
import com.vaadin.ui.HorizontalLayout;
import com.vaadin.ui.HorizontalSplitPanel;
import com.vaadin.ui.Table;
import com.vaadin.ui.TextField;
import com.vaadin.ui.VerticalLayout;
import com.vaadin.ui.Window; 
```

我的课

```
public class SimpleAddressBook extends Application { 
```

变量

```
private static String[] fields = { "First Name", "Last Name", "Company",
        "Mobile Phone", "Work Phone", "Home Phone", "Work Email",
        "Home Email", "Street", "Zip", "City", "State", "Country" };
private static String[] visibleCols = new String[] { "Last Name",
        "First Name", "Company" };

private Table contactList = new Table();
private Form contactEditor = new Form();
private HorizontalLayout bottomLeftCorner = new HorizontalLayout();
private Button contactRemovalButton;
private IndexedContainer addressBookData = createDummyData(); 
```

职能

```
@Override
public void init() {
    initLayout();
    initContactAddRemoveButtons();
    initAddressList();
    initFilteringControls();
}

private void initLayout() {
    HorizontalSplitPanel splitPanel = new HorizontalSplitPanel();
    setMainWindow(new Window("Address Book", splitPanel));
    VerticalLayout left = new VerticalLayout();
    left.setSizeFull();
    left.addComponent(contactList);
    contactList.setSizeFull();
    left.setExpandRatio(contactList, 1);
    splitPanel.addComponent(left);
    splitPanel.addComponent(contactEditor);
    contactEditor.setCaption("Contact details editor");
    contactEditor.setSizeFull();
    contactEditor.getLayout().setMargin(true);
    contactEditor.setImmediate(true);
    bottomLeftCorner.setWidth("100%");
    left.addComponent(bottomLeftCorner);
}

private void initContactAddRemoveButtons() {
    // New item button
    bottomLeftCorner.addComponent(new Button("+",
            new Button.ClickListener() {
                public void buttonClick(ClickEvent event) {
                    // Add new contact "John Doe" as the first item
                    Object id = ((IndexedContainer) contactList
                            .getContainerDataSource()).addItemAt(0);
                    contactList.getItem(id).getItemProperty("First Name")
                            .setValue("John");
                    contactList.getItem(id).getItemProperty("Last Name")
                            .setValue("Doe");

                    // Select the newly added item and scroll to the item
                    contactList.setValue(id);
                    contactList.setCurrentPageFirstItemId(id);
                }
            }));

    // Remove item button
    contactRemovalButton = new Button("-", new Button.ClickListener() {
        public void buttonClick(ClickEvent event) {
            contactList.removeItem(contactList.getValue());
            contactList.select(null);
        }
    });
    contactRemovalButton.setVisible(false);
    bottomLeftCorner.addComponent(contactRemovalButton);
}

private void initAddressList() {
    contactList.setContainerDataSource(addressBookData);
    contactList.setVisibleColumns(visibleCols);
    contactList.setSelectable(true);
    contactList.setImmediate(true);
    contactList.addListener(new Property.ValueChangeListener() {
        public void valueChange(ValueChangeEvent event) {
            Object id = contactList.getValue();
            contactEditor.setItemDataSource(id == null ? null : contactList
                    .getItem(id));
            contactRemovalButton.setVisible(id != null);
        }
    });
}

private void initFilteringControls() {
    for (final String pn : visibleCols) {
        final TextField sf = new TextField();
        bottomLeftCorner.addComponent(sf);
        sf.setWidth("100%");
        sf.setInputPrompt(pn);
        sf.setImmediate(true);
        bottomLeftCorner.setExpandRatio(sf, 1);
        sf.addListener(new Property.ValueChangeListener() {
            public void valueChange(ValueChangeEvent event) {
                addressBookData.removeContainerFilters(pn);
                if (sf.toString().length() > 0 && !pn.equals(sf.toString())) {
                    addressBookData.addContainerFilter(pn, sf.toString(),
                            true, false);
                }
                getMainWindow().showNotification(
                        "" + addressBookData.size() + " matches found");
            }
        });
    }
}

private static IndexedContainer createDummyData() {

    String[] fnames = { "Peter", "Alice", "Joshua", "Mike", "Olivia",
            "Nina", "Alex", "Rita", "Dan", "Umberto", "Henrik", "Rene",
            "Lisa", "Marge" };
    String[] lnames = { "Smith", "Gordon", "Simpson", "Brown", "Clavel",
            "Simons", "Verne", "Scott", "Allison", "Gates", "Rowling",
            "Barks", "Ross", "Schneider", "Tate" };

    IndexedContainer ic = new IndexedContainer();

    for (String p : fields) {
        ic.addContainerProperty(p, String.class, "");
    }

    // Create dummy data by randomly combining first and last names
    for (int i = 0; i < 1000; i++) {
        Object id = ic.addItem();
        ic.getContainerProperty(id, "First Name").setValue(
                fnames[(int) (fnames.length * Math.random())]);
        ic.getContainerProperty(id, "Last Name").setValue(
                lnames[(int) (lnames.length * Math.random())]);
    }

    return ic;
}

} 
```

这是java部分

而 web.xml 是

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="2.4"
xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
<display-name>testVaadin</display-name>
<context-param>
    <description>
    Vaadin production mode</description>
    <param-name>productionMode</param-name>
    <param-value>false</param-value>
</context-param>
<servlet>
    <servlet-name>Testvaadin Application</servlet-name>
    <servlet-class>com.vaadin.terminal.gwt.server.ApplicationServlet</servlet-class>
    <init-param>
        <description>
        Vaadin application class to start</description>
        <param-name>application</param-name>
        <param-value>com.example.testvaadin.SimpleAddressBook</param-value>
    </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>Testvaadin Application</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping>
<welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
</welcome-file-list>
</web-app> 
```

我使用 tomcat 作为网络服务器（6.0.32）

所以错误是：

> rg.apache.catalina.core.StandardWrapperValve 调用 GRAVE：Exception lors de l'allocation pour la servlet Testvaadin Application javax.servlet.ServletException：无法加载应用程序类：com.vaadin.terminal.gwt 上的 com.example.testvaadin.SimpleAddressBook .server.ApplicationServlet.init(ApplicationServlet.java:71) 在 org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1173) 在 org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:809 ) 在 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) 在 org.apache.catalina.core.StandardHostValve 的 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:129)。在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) 在 org.apache.catalina.core 调用(StandardHostValve.java:127)。StandardEngineValve.invoke(StandardEngineValve.java:109) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298) at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859) at org .apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588) at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) at java.lang.Thread.run （线程.java：662）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:22:10.453

基本上错误消息是说在初始化期间`com.vaadin.terminal.gwt.server.ApplicationServlet`尝试加载`com.example.testvaadin.SimpleAddressBook`并且没有成功。

要解决此问题，请尝试以下操作：

*   检查应用程序部署是否成功以及 class:`SimpleAddressBook`是否真的在您的 servlet 容器中的正确位置
*   检查`vaadin-xx.yy.zz.jar`WEB-INF/lib 中是否有
*   清理并重建整个项目

# sharepoint-2010 - 当前上下文中不存在名称“InitializeControl”（SharePoint 2010、Visual Studio 2012）

> ID：13929354
> 
> 赞同：1
> 
> 时间：2012-12-18T08:54:24.677
> 
> 标签：sharepoint-2010, visual-studio-2012, web-parts

我有 Visual Studio 2012 SP1，我正在使用 Visual Web 部件，我有 {当前上下文中不存在名称“InitializeControl”}并且“ascx.g.cs”文件未填充。但它并没有像在 VS 2010 中那样消失

我知道有很多关于它的链接，但我尝试了其中的大部分，现在看来它与 VS 2012 相关。

我尝试了以下

1）安装VS 2012 SP1

2）我的内容长度低于 Visual Studio 2010 的 8256 个字符的主要限制是（3399 个空格）

4）重启VS/重启PC。

5) 我只引用了一个 SharePoint 自定义 WCF 服务

**有线的事情是这样的。**

我创建了一个新的可视化 webpart，并复制了没有 CSS 链接的内容。一切正常。但是当我添加 CSS 链接时。我得到了同样的建筑错误。

这是链接css代码

```
<link href='<asp:Literal runat="server" ID="TaskModuleCSS" Text="    <%$Resources:TMS.UI,TaskModuleCSS%>"/>' rel="stylesheet" type="text/css" /> 
```

所以我删除了它，但这并没有消除错误。

任何想法，我卡在这里并开始考虑删除 VS2012 并在 VS 2010 中重建我的解决方案。：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-02-02T14:10:01.877

我通过在解决方案中的每个表单（Web 部件）的 .ascx 文件上运行自定义工具来修复此错误：

1.  右键单击 SomeForm.ascx 文件
2.  运行自定义工具

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T07:01:57.463

检查您是否有 Webpart 的 Designer 文件。我也遇到了同样的问题，但在我的情况下，webpart.ascx.g.cs 文件丢失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-25T07:04:54.790

我注意到很多人都有这个问题，似乎这个问题与特定事物无关，，它可以是以下之一

1.  SharePoint 项目属性中的网站 URL 无效 [当您将解决方案从一个环境复制到另一个环境时会发生这种情况]
2.  您的设计视图中有 HTML 标记错误（例如缺少结束标记）
3.  就像@hir 说的那样，缺少设计师文件。
4.  有时使用资源文件会出现这个问题，所以我通过开发没有任何资源的 Web 部件然后由 VS 生成它来解决它。

我现在正在使用 VS 2013 ，我只在第 1 点到第 3 点遇到这个问题

# php - SQL：保持计数或从数据库中选择计数

> ID：13929356
> 
> 赞同：3
> 
> 时间：2012-12-18T08:54:37.203
> 
> 标签：php, mysql

示例：我有 2 个表
- 类别
- 帖子

将帖子编号保留在这样的类别中是否是一种好方法

**类别**

```
 id |  title   | posts
----+----------+--------
 1  | golf     |  50
----+----------+-------
 2  | soccer   |  90
----+----------+------- 
```

**帖子**

```
 id |  title   | category_id
----+----------+--------------
 1  | news 1   |  1
----+----------+--------------
 2  | news 2   |  2
----+----------+--------------
 3  | news 3   |  1
----+----------+-------------- 
```

或者我在这样的查询中使用 select count()

```
SELECT c.id,
       c.title,
       count(p.id)
FROM `categories` c
INNER JOIN `posts` p ON c.id=p.category_id
GROUP BY c.id 
```

但问题是当我在发布更改类别时在类别表中保持计数时，我也必须更新类别表中的帖子字段。在小项目中没问题，但对于大项目来说，处理计数的好方法是什么，因为我关心数据库性能

感谢所有答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:01:37.723

My personal preference would be not to keep duplicated data in any table, until it has been proven necessary. If you are averse to writing `JOIN` queries, you could define a view that contains the query and you can then forget about it.

I have found in the past that proper indexes usually mean there isn't too much of a performance problem with this.

If you find it necessary to keep a count summary your `categories` table (for performance or other reasons), consider creating `INSERT`, `UPDATE` and `DELETE` triggers on your `posts` table so that updates can be done by the database rather than relying on the application programmers to remember what has to be done.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:08:47.683

这通常取决于您的用例。

当然，从纯粹的角度来看，您不应该引入冗余，因此您提出的查询将是可行的方法。但是，您可能会遇到一些性能问题。

第二种方法是在帖子表上设置一个触发器，该触发器在类别中维护帖子计数器，但如果帖子表中有大量插入/删除，这也可能会影响性能。

另一种方法是设置一些脏标志，如果设置它会导致更新类别表。

那么如何进行呢？首先尝试纯洁的东西，如果遇到性能问题，请分析您的使用配置文件并根据它采取行动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T09:01:56.353

Dr. Dan's comment is correct. It is indeed a good idea to store the count of posts in categories, but remember that if you do that "You must also have triggers to increment and decrement the count when new post is inserted or existing post is deleted" to maintain the integrity.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T09:40:00.833

我猜你必须`JOIN`在两张桌子之间和`GROUP BY`帖子之间使用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T09:04:08.823

正如您正确指出的那样，您知道如果单独存储计数会引入维护问题。

理想情况下，您应该动态确定计数。有了适当的索引，这对大多数系统来说应该不是一个很大的要求。

但是，在某些情况下，预先计算的计数很有意义。考虑一个按时间顺序刷新其数据的系统。除了刷新活动之外，没有其他任何东西可以将信息插入系统。这种系统非常适合预先计算的计数。

具体查看您的问题，您似乎没有该选项。这看起来是相当“博客”的东西，因此，计数可能一直在变化。

如果是我，我会从动态计数路线开始，在动态成为问题时进行预先计算。

# android - 货币符号的 Web 服务

> ID：13929357
> 
> 赞同：0
> 
> 时间：2012-12-18T08:54:39.997
> 
> 标签：android, ios, json, web-services

我们正在开发适用于 IOS 和 Android 的应用程序。我们需要在应用程序上显示某些价格，并且用于这些价格的货币需要是用户当前所在国家/地区的货币。我们对汇率甚至符号不感兴趣。我们只希望货币缩写为 GDP、美元、日元等。有没有人知道一个 Web 服务可以让我们发送一个国家名称，例如，并获取货币？

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:06:12.487

您始终可以根据用户手机的可用区域设置获取货币代码。在 Android 上，你会这样称呼

```
Currency.getInstance(Locale.getDefault()).getCurrencyCode(); 
```

# android - Android ArrayIndexOutOfBoundException

> ID：13929359
> 
> 赞同：0
> 
> 时间：2012-12-18T08:54:44.333
> 
> 标签：android, android-asynctask, adapter

我创建了一个 AsyncTask 并解析 JSON，然后在后台将其放入 List，我的应用程序出现错误，我不明白该怎么办？我的应用程序创建时出现此错误！！！Парсю JSON и кидаю его в Лист с Массивом и приложение крашится

```
 List<Row> result = new ArrayList<Row>();
    for (int i = 0; i < array.length(); i++) {
        try {
        result.add(new Row(array.getJSONObject(i).getString("thumbnail")));
        } catch (JSONException e) {
                    e.printStackTrace();
    }
    }

        return result;
    }

    @Override
    protected void onPostExecute(List<Row> result) {
        adapter.clear();
        adapter.add(result);
    } 
```

**行.java**

```
class Row implements Parcelable{

         public final Creator<Row> CREATOR = new Creator<Row>() {
                @Override
                public Row[] newArray(int size) {
                    return new Row[size];
                }

                @Override
                public Row createFromParcel(Parcel parcel) {
                    return new Row(parcel);
                }
            };

        ArrayList<String> thumbs;

        public Row(String thumbs) {
            this.thumbs = new ArrayList<String>();
            this.thumbs.add(thumbs);
        }

        public Row(Parcel parcel) {
            parcel.readStringList(thumbs);
        }

        @Override
        public int describeContents() {
            // TODO Auto-generated method stub
            return 0;
        }

        @Override
        public void writeToParcel(Parcel parcel, int flags) {
            parcel.writeStringList(thumbs);         
        }

    } 
```

**适配器.java**

```
 private final class ImageAdapter extends BaseAdapter {
        private final List<Row> list;
        private ImageLoader loader;
        private DisplayImageOptions options;

        public ImageAdapter() {
            this(new ArrayList<Row>());

           options = new DisplayImageOptions.Builder()
            .cacheInMemory()
            .cacheOnDisc()
            .bitmapConfig(Bitmap.Config.RGB_565)
            .build();

           loader = ImageLoader.getInstance();
           loader.init(ImageLoaderConfiguration.createDefault(MainActivity.this));
        }

        public void clear() {
            list.clear();
            notifyDataSetChanged();
        }

        public void add(List<Row> rows) {
            list.addAll(rows);
            notifyDataSetChanged();
        }

        @Override
        public int getCount() {
            return list.size();
        }

        @Override
        public long getItemId(int position) {
            return position;
        }

        @Override
        public Row getItem(int position) {
            return list.get(position);
        }

        public View getView(int position, View view, ViewGroup container) {
            if (view == null) {
                view = getLayoutInflater().inflate(R.layout.grid_item, container, false);
            }

            ImageView image = (ImageView)view.findViewById(R.id.imageGrid);
            Row row = getItem(position);
            // Bind row on your view here            
            String[] qwe = row.thumbs.toArray(new String[row.thumbs.size()]);
            loader.displayImage(qwe[position], image, options);
            return view;
        }

        public ImageAdapter(List<Row> list) {
            this.list = list;
        }
    } 
```

**日志猫**

```
 FATAL EXCEPTION: main
java.lang.ArrayIndexOutOfBoundsException: length=1; index=1
    at com.example.tectob6iu.MainActivity$ImageAdapter.getView(MainActivity.java:98)
    at android.widget.AbsListView.obtainView(AbsListView.java:2159)
    at android.widget.GridView.makeAndAddView(GridView.java:1341)
    at android.widget.GridView.makeRow(GridView.java:341)
    at android.widget.GridView.fillDown(GridView.java:283)
    at android.widget.GridView.fillFromTop(GridView.java:417)
    at android.widget.GridView.layoutChildren(GridView.java:1229)
    at android.widget.AbsListView.onLayout(AbsListView.java:1994)
    at android.view.View.layout(View.java:14003)
    at android.view.ViewGroup.layout(ViewGroup.java:4375)
    at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
    at android.view.View.layout(View.java:14003)
    at android.view.ViewGroup.layout(ViewGroup.java:4375)
    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1663)
    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1521)
    at android.widget.LinearLayout.onLayout(LinearLayout.java:1434)
    at android.view.View.layout(View.java:14003)
    at android.view.ViewGroup.layout(ViewGroup.java:4375)
    at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
    at android.view.View.layout(View.java:14003)
    at android.view.ViewGroup.layout(ViewGroup.java:4375)
    at android.view.ViewRootImpl.performLayout(ViewRootImpl.java:1892)
    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1711)
    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
    at android.view.Choreographer.doCallbacks(Choreographer.java:562)
    at android.view.Choreographer.doFrame(Choreographer.java:532)
    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
    at android.os.Handler.handleCallback(Handler.java:725)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:5191)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:08:00.593

```
 String[] qwe = row.thumbs.toArray(new String[row.thumbs.size()]);
      loader.displayImage(qwe[position], image, options); 
```

你确定`qwe`至少包含`postion + 1`元素吗？

# python - 使用事件处理获取多个 wx 小部件值

> ID：13929361
> 
> 赞同：0
> 
> 时间：2012-12-18T08:54:49.293
> 
> 标签：python, wxpython

代码： http: [//pastebin.com/W4uXmazw](http://pastebin.com/W4uXmazw)

我想记住单击 wx.Button 后如何通过事件处理从任何 wx 小部件中获取值。

在我的程序中，我有两个字段，新文件名和内容。

为了从每个字段中获取值，我必须采取哪些步骤？

从那里，我可以使用 pythons f.open 和 f.write 方法来完成我的应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:48:31.587

如果你想获得一个小部件的价值，那么你需要让这个小部件在整个类中都可以访问。为此，您需要将小部件的变量设置为实例变量。因此，与其将文本控件直接添加到 sizer，不如执行以下操作：

```
self.newfilename = wx.TextCtrl(panel,-1), 0, wx.TOP, 5)
self.contents = wx.TextCtrl(panel,-1,size=(390,150),style = wx.TE_MULTILINE|wx.TE_PROCESS_TAB) 
```

然后在按钮的事件处理程序中，您可以执行以下操作：

```
valueOne = self.newfilename.GetValue()
contents = self.contents.GetValue() 
```

另一种方法是使用您的面板。如果您使用“self.panel”，那么您可以通过其 GetChildren 方法获取其所有子项，然后遍历列表并使用 Python 的“isinstance”内置函数来检查您正在访问的小部件类型。如果您设置了小部件的名称，您也可以检查它。

# java - 复制并粘贴到嵌入在 javafx 应用程序中的 codemirror.js

> ID：13929371
> 
> 赞同：4
> 
> 时间：2012-12-18T08:55:35.723
> 
> 标签：java, javascript, javafx, clipboard, codemirror

我正在使用 codemirror.js 库在 Java FX 中创建简单的编辑器。我使用 javafx.scene.web.WebView 组件在 javafx 中嵌入了 codemirror 编辑器，并带有以下 html/js 代码：

```
<body>
<form>
   <textarea id="code" name="code">
   </textarea>
</form>
<script>
   var editor = CodeMirror.fromTextArea(document.getElementById("code"), { lineNumbers: true});
</script>
</body> 
```

Codemirror 编辑器本身支持撤消、重做、剪切、复制和粘贴。

我的应用程序中还有 javafx 主菜单，我想向其中添加复制或粘贴等操作。我想以某种方式将这个菜单操作与我的 codemirror 编辑器“绑定”，所以如果用户单击例如从主菜单粘贴，剪贴板中的内容将被添加到 codemirror 编辑器。

我为撤消和重做操作解决了这个问题：codemirror 有两个 js 函数 undo() 和 redo()，我可以通过 javafx.scene.web.WebView.executeScript 方法从 java 级别调用它们。

我的问题是如何处理剪切、复制和粘贴操作？如何将主菜单中的此操作与 codemirror 编辑器绑定？我在 codemirror.js 中找不到任何可以处理此操作的 js 函数。

任何帮助表示赞赏并提前感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T10:32:02.177

我找到了解决方案：Codmirror 在 API 中没有剪切、复制和粘贴等功能，但它允许获取和替换选定的文本，所以我可以自己编写这些操作。

```
public void cut() {
    String selectedText = (String) webview.getEngine().executeScript(
            "editor.getSelection();");
    webview.getEngine().executeScript("editor.replaceSelection(\"\");");
    final Clipboard clipboard = Clipboard.getSystemClipboard();
    final ClipboardContent content = new ClipboardContent();
    content.putString(selectedText);
    clipboard.setContent(content);

}

public void copy() {
    String selectedText = (String) webview.getEngine().executeScript(
            "editor.getSelection();");
    final Clipboard clipboard = Clipboard.getSystemClipboard();
    final ClipboardContent content = new ClipboardContent();
    content.putString(selectedText);
    clipboard.setContent(content);
}

public void paste() {
    final Clipboard clipboard = Clipboard.getSystemClipboard();
    String content = (String) clipboard.getContent(DataFormat.PLAIN_TEXT);
    webview.getEngine().executeScript(String.format("editor.replaceSelection(\"%s\");", content));
} 
```

# api - 如何通过soap UI在REST API测试中应用断言

> ID：13929384
> 
> 赞同：-3
> 
> 时间：2012-12-18T08:56:27.107
> 
> 标签：api, rest, functional-testing, assertions

我是纳姆拉塔...

我一直在我的公司进行 REST API 测试。我是 API 测试的新手。

我使用 SoupUI 完成了简单的 REST API 测试。

*我的问题：*我想知道，如何使用 SoupUI 测试工具在 REST API 中进行断言。

请让我知道步骤。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:49:12.777

有很多方法可以添加断言。

1.  XPath
2.  查询
3.  脚本断言等...

给定的屏幕截图是添加 XPath 断言的方法。

![在此处输入图像描述](../Images/3b5dc96d993194d180917fc986b448e1.png)

# c# - DataGridView ColumnOrder 刷新时更改

> ID：13929385
> 
> 赞同：1
> 
> 时间：2012-12-18T08:56:29.593
> 
> 标签：c#, .net, datagridview

我正在尝试在 C# 中以窗口形式填充 DataGridView。网格中的某些列是动态的，这意味着没有。在刷新网格时，列的数量可能会有所不同。这些动态列驻留在数据网格中的某些列之间。我的问题是，当我通过用新数据源重新填充数据网格来刷新数据网格时，它最后放置了较新的列（在所有列之后），但我希望这些应该与所有动态列一起放置。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:02:10.523

```
dataGridView.DataSource = null;
dataGridView.DataSource = Results; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:04:01.407

尝试 ：

```
dataGridView.DataSource = null;
dataGridView.Columns.Clear();
dataGridView.DataSource = data; 
```

启用自动生成列属性后，额外的（未映射的）列将附加到末尾。您可以解绑并重新绑定以修复它；将 DataSource 设置为 null 并返回表

# java - 将 Integer 和 Float 值作为 java 中的一个参数添加到 One Map

> ID：13929387
> 
> 赞同：2
> 
> 时间：2012-12-18T08:56:41.213
> 
> 标签：java

我有这样的`Map<Integer, Integer> pickupMap = new HashMap<Integer, Integer>();`地图。我插入了这样的值

```
if(null != qty_1000 && !"".equals(qty_1000))
    pickupMap.put(Integer.parseInt("1000"), Integer.parseInt(qty_1000)); 
```

现在我想在“1000”的位置插入“0.5”。如何插入这两个值。请回答我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T08:59:37.523

整数只能表示没有小数的数字。当您有一个浮点数时，您需要类型[Double](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html)（高精度）或[Float](http://docs.oracle.com/javase/7/docs/api/java/lang/Float.html)（低精度）。

Double、Float 和 Integer 都是通用基类[Number](http://docs.oracle.com/javase/7/docs/api/java/lang/Number.html)的扩展。当您将地图变成数字地图时，您可以将整数、浮点数和双精度数放入其中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-18T09:03:19.760

您可以在地图中插入多个东西（整数、浮点数等）。它不会产生任何问题。

pickMap.put(Integer.parseInt("1000"), Integer.parseInt("1000")); pickMap.put(Float.parseFloat("1000"), Float.parseFloat("1000"));

# android - 如何让canvas绘制的图表产生onclick事件

> ID：13929388
> 
> 赞同：1
> 
> 时间：2012-12-18T08:56:41.350
> 
> 标签：android, canvas, onclick

我有一个 imageView，我根据坐标数组在 imageView 中绘制图表。每个图表都有一个 onclick 事件。活动.java

```
package com.example.floorexhibitiontest;
import com.floor.DrawView;
import android.app.Activity;
import android.os.Bundle;
import android.widget.LinearLayout;
public class HallActivity extends Activity {@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.hall);
    }

    float[][][] points = new float[][][] {
        {
            {213,264},
            {247,232},
            {345,338},
            {310,371}
        },
        {
            {171,305},
            {205,272},
            {302,373},
            {267,406}
        },
        {
            {571,320},
            {606,320},
            {606,428},
            {571,428}
        }
    };

    LinearLayout layout = (LinearLayout)findViewById(R.id.root);
    final DrawView draw = new DrawView(this,points);
    layout.addView(draw);       
} 
```

绘图视图.java

```
package com.floor;
import com.example.floorexhibitiontest.R;

import android.annotation.SuppressLint;
import android.content.Context;
import android.content.res.Resources;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Path;
import android.graphics.Paint.Style;
import android.graphics.Shader.TileMode;
import android.graphics.Shader;
import android.util.DisplayMetrics;
import android.view.View;

public class DrawView extends View{
    private float[][][] points = null;
    DisplayMetrics metric = new DisplayMetrics();

    public DrawView(Context context,float[][][] p) {
        super(context);
        metric = context.getApplicationContext().getResources().getDisplayMetrics();
        points = p;
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        float density=metric.density;  

        for(int i = 0; i < points.length; i++){
            Paint p = new Paint();
            p.setAntiAlias(true);
            p.setColor(Color.BLUE);
            Path path=new Path();
            path.moveTo(points[i][0][0] / density, points[i][0][1] / density);
            path.lineTo(points[i][1][0] / density, points[i][1][1] / density);
            path.lineTo(points[i][2][0] / density, points[i][2][1] / density);
            path.lineTo(points[i][3][0] / density, points[i][3][1] / density);

            path.close();
            p.setStyle(Style.STROKE);
            canvas.drawPath(path, p);
        }
    }
} 
```

目前效果： ![在此处输入图像描述](../Images/a3ad2161b9839851e66890e860d65e22.png)

1.  如何让每个绘制的矩形产生自己的onclick事件？
2.  布局文件中有一个 ImageView。我的目的是将图形绘制在 ImageView 上。但结果是ImageView可以显示。绘制的图形无法显示。如果我隐藏 ImageView，图像可以显示。

求大家帮忙。谢谢指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:08:05.280

像这样尝试：

```
public boolean onTouch(View v, MotionEvent event) {
   if((event.getX(0)>=x_coord) && 
      (event.getY(0)>=y_coord) && 
     ( event.getX(0)<=x_coord + your_rectangle_width) && 
      (event.getY(0)<=y_coord + your_rectangle_heigth))
      {
          //rectangle selected
      }
   return true;
} 
```

或在 onTouch() 中使用来自 points[] 数组的实际坐标

# asp.net - 某些科目需要指导

> ID：13929389
> 
> 赞同：0
> 
> 时间：2012-12-18T08:56:43.020
> 
> 标签：asp.net, ajax, json, web-services

有人可以帮我在.net环境c#语言中找到关于web-services/ajax/json的好教程吗？最好的视频教程...从一开始就解释一切？

我找了一些，找到了，但它们不太好..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:00:44.473

[100 个最佳 Web 服务教程视频 - Meta-Guide.com](http://www.google.co.in/url?sa=t&rct=j&q=web%20services%20video%20tutorial&source=web&cd=5&cad=rja&ved=0CE4QFjAE&url=http://www.meta-guide.com/home/about/best-of-the-best-videos/100-best-web-service-videos&ei=HDDQULWBHcqxrAfd9oC4DQ&usg=AFQjCNEyVnmfyxrVyn4e9bxcGTbBPoVlPQ&bvm=bv.1355534169,d.bmk)

[AJAX 视频 - ASP.NET AJAX : The Official Microsoft ASP.NET Site](http://www.google.co.in/url?sa=t&rct=j&q=ajax%20video%20tutorial&source=web&cd=3&cad=rja&ved=0CD4QFjAC&url=http://www.asp.net/web-forms/videos/aspnet-ajax&ei=WTDQULyEKMmPrgeJoICoCw&usg=AFQjCNG7HG6SOq0qkCp4n4n18td08TM3zg&bvm=bv.1355534169,d.bmk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:01:09.283

我建议您阅读一些 WCF 基础教程，并使用 ASP.NET MVC4 Web API 进行开发。这两个链接可能会有所帮助：

[http://www.c-sharpcorner.com/UploadFile/1d42da/web-service-basics/](http://www.c-sharpcorner.com/UploadFile/1d42da/web-service-basics/)

[http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api)

# ios5 - 如何将图像添加到一侧的 UISegmentedControl 文本

> ID：13929391
> 
> 赞同：0
> 
> 时间：2012-12-18T08:56:59.360
> 
> 标签：ios5, uiimageview, uilabel, uisegmentedcontrol

我正在尝试添加 UIImageView 以及`UISegmentedControl`. 请注意，我不想将图像设置为背景，并且我已经在 IB 中获得了分段控制。到目前为止，我尝试过的是：

```
for (id segment in [segmentControl subviews]) 
    {
        for (id label in [segment subviews]) 
        {
            if ([label isKindOfClass:[UILabel class]])
            {
                float width = ((UILabel*)label).bounds.size.width;
                UIImageView *image = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Arrow-down.png"]];
                image.frame = CGRectMake(width + 2, 15 , 32, 32);

                ((UILabel*)label).frame = CGRectMake(((UILabel*)label).frame.origin.x,((UILabel*)label).frame.origin.y, width + image.frame.size.width + 5, ((UILabel*)label).frame.size.height);
                [(UILabel*)label insertSubview:image atIndex:0];
            }
        }           
    } 
```

请问有人可以指导我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:33:49.503

尝试这个，

可以直接设置uilabel的backgoundcolor

```
((UILabel*)label).backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"Arrow-down.png"]]; 
```

# xmpp - 无法使用 Smack 更改我的用户的存在状态

> ID：13929394
> 
> 赞同：9
> 
> 时间：2012-12-18T08:57:14.260
> 
> 标签：xmpp, smack

我试图设置在线模式，但它不能通过名册工作。我运行了这段代码并检查了我的本地主机服务器，该模式仍然“可用”而不是“请勿打扰”。

```
final Connection connection = new XMPPConnection("xxx.xxx.x.xx");

connection.connect();
connection.login("hieugioi@hieund", "123456");

final Roster roster = connection.getRoster();           
Presence p = roster.getPresence("hieugioi@hieund");
p.setPriority(128);
p.setMode(Mode.dnd); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-18T22:25:51.027

因为您没有将 Presence 数据包发送到服务器。组装好 Presence 数据包后，您需要发送它。例如：

```
Presence p = new Presence(available, "I am busy", 42, Mode.dnd);
connection.sendStanza(p); 
```

另请参阅：[Smack - 入门；“读取和写入数据包”部分](http://www.igniterealtime.org/builds/smack/docs/latest/documentation/gettingstarted.html)

# java - 在事务中使用 QueryEngine 的异常

> ID：13929398
> 
> 赞同：1
> 
> 时间：2012-12-18T08:57:52.297
> 
> 标签：java, neo4j, cypher

我正在使用带有 java-rest-binding 1.8.M07 的 neo4j 1.9.M01 版本，并且我对这段代码有疑问，该代码旨在从 neo4j 数据库中获取属性为“ARREL”的“URL”节点，通过休息使用查询语言。问题似乎只发生在事务内部，引发异常，但其他方面效果很好：

```
RestGraphDatabase graphDb = new RestGraphDatabase("http://localhost:7474/db/data");
RestCypherQueryEngine queryEngine = new RestCypherQueryEngine(graphDb.getRestAPI());
Node nodearrel = null;
Transaction tx0 = gds.beginTx();
try{
 final String queryStringarrel = ("START n=node(*) WHERE n.URL =~{URL} RETURN n");
 QueryResult<Map<String, Object>> retornar = queryEngine.query(queryStringarrel, MapUtil.map("URL","ARREL"));
 for (Map<String,Object> row : retornar) 
  {
   nodearrel = (Node)row.get("n");
   System.out.println("Arrel: "+nodearrel.getProperty("URL")+" id : "+nodearrel.getId());
  }
tx0.success();
}
(...) 
```

但是会发生异常： *exception tx0: Error reading as JSON '' * 在返回 QueryResult 对象的行中的每次执行。

我也尝试过使用 ExecutionEngine（在事务之间）来做到这一点：

```
ExecutionEngine engine = new ExecutionEngine( graphDb );
String ARREL = "ARREL";
ExecutionResult result = engine.execute("START n=node(*) WHERE n.URL =~{"+ARREL+"} RETURN n");
Iterator<Node> n_column = result.columnAs("n");
Node arrelat = (Node) n_column.next();
for ( Node node : IteratorUtil.asIterable( n_column ) )
(...) 
```

但它也会在 *n_column.next()* 返回一个引发异常的空对象时失败。

问题是我需要使用事务来优化查询，否则需要花费太多时间来处理我需要做的所有查询。我是否应该尝试将多个操作加入查询，以避免使用事务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:02:37.437

您可以将您的 java-rest-binding 更新到最新版本 (1.8) 吗？在这两者之间，我们有一个版本可以自动将 REST 批处理操作应用于具有事务语义的位置。

因此，您看到的交易不是真正的交易，而只是记录您要作为批处理休息操作执行的操作`tx.success/finish`

在事务中执行查询，但仅在 tx 完成**后访问结果。**然后你的结果就会出现。

例如，这对于一次性将许多密码查询发送到服务器并在之后一次性获得所有结果很有用。

是的@ulkas 使用参数，但不是这样：

```
START n=node(*) WHERE n.URL =~ {URL} RETURN n

params: { "URL" : "http://your.url" } 
```

使用参数时不需要引号，就像 SQL 准备语句一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:29:06.670

尝试在以下位置添加单引号：

```
START n=node(*) WHERE n.URL =~ '{URL}' RETURN n 
```

# php - 我可以在单个 php 块中使用 fetch_array() 两次吗？

> ID：13929401
> 
> 赞同：-3
> 
> 时间：2012-12-18T08:58:10.210
> 
> 标签：php, mysql

```
$idno = $_GET['id'];
$identity = $idno;
$result = mysql_query("SELECT * FROM bloggings WHERE id ='$idno'");

while ($row = mysql_fetch_array($result))
{
    ...
}

$resu = mysql_query("SELECT * FROM comment WHERE id='$identity'");
while ($row = mysql_fetch_array($resu))
{
    ...
} 
```

我得到了这样的错误：

> 警告：mysql_fetch_array() 期望参数 1 是资源，在第 95 行的 C:\xampp\htdocs\AlumniAssociation\blog_written.php 中给出的布尔值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:01:34.073

> Warning: mysql_fetch_array() expects parameter 1 to be resource, boolean given

This error means that your query failed for some reason. On failure, [`mysql_query()`](http://php.net/manual/en/function.mysql-query.php) returns `false`. It is usually due to a syntax error, missing field/table or no connection to the database.

You should test for the query failing so that you never pass a boolean to `mysql_fetch_array()`:

```
$result = mysql_query("SELECT * FROM bloggings WHERE id ='$idno'");

if($result)
{
    while ($row = mysql_fetch_array($result))
    {
        ...
    }
}
else
{
    // query failed - see mysql_error()
} 
```

There is no problem with having multiple `fetch_*` calls on the same page, as long as you are using different result resources (otherwise it will move the pointer forward each time).

Side note: `mysql_*` is deprecated, it is recommended to upgrade to MySQLi or PDO. Your code is vulnerable to SQL Injection, use a parameterised query instead of manually interpolating variables into the query.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T12:54:25.213

您是否创建了数据库连接？如果是，请检查连接。并尝试`mysql_query()`仅在连接返回 true 时运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T09:02:53.240

检查数据库连接然后mysql错误。

```
$result = mysql_query("SELECT * FROM bloggings WHERE id ='$idno'");
if (!$result) { // add this check.
   die('Invalid query: ' . mysql_error());
} 
```

# iphone - NSString 中的一些字符发生了变化

> ID：13929403
> 
> 赞同：1
> 
> 时间：2012-12-18T08:58:22.523
> 
> 标签：iphone, objective-c, character-encoding, nsstring, special-characters

我正在从 url 内容中检索一个字符串，这样：

```
NSString *urlStr = [NSString stringWithFormat:@"http://www.example.com/string_to_retrieve"];
NSURL *url = [NSURL URLWithString:urlStr];
NSString *resp = [NSString stringWithContentsOfURL:url encoding:NSASCIIStringEncoding error:nil]; 
```

并以这种方式将其写入文件：

```
NSString *outFile = @"/path/to/myfile";
[resp writeToFile:outFile atomically:YES encoding:NSUTF8StringEncoding error:nil]; 
```

我的字符串包含几个特殊字符，例如“ö”，应该由“F6”十六进制值表示，但是当我尝试使用十六进制编辑器打开写入我的字符串的文件时，我看到“ö”（F6）已转换到另外两个字符：“Ã¶”（C3 B6）

我在两者中都尝试[了其他几种字符串编码](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/constant_group/String_Encodings)

```
NSString *resp = [NSString stringWithContentsOfURL:url encoding:NSASCIIStringEncoding error:nil]; 
```

和

```
[resp writeToFile:outFile atomically:YES encoding:NSUTF8StringEncoding error:nil]; 
```

但总是有不好的结果...

`NSASCIIStringEncoding`似乎是我可以从我的网址中获取该字符串的唯一方法：如果我使用其他编码，就像`NSUTF8StringEncoding`我得到的只是`nil`

`NSUTF8StringEncoding`似乎是我可以写入文件的唯一方法：如果我使用其他编码，就像`NSASCIIStringEncoding`我得到的只是一个 0 字节文件

那么我怎样才能正确地检索该字符串并将其写入我的文件呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T09:21:48.490

`F6`是 中“ö”的字符代码`NSISOLatin1StringEncoding`，所以

```
[resp writeToFile:outFile atomically:YES encoding:NSISOLatin1StringEncoding error:nil]; 
```

应该给出预期的结果。（`NSISOLatin2StringEncoding`也可以。我不确定这些差异。支持的编码的文档不是很冗长。）

* * *

*更新：*

*   *NSISOLatin1StringEncoding*是[ISO-8859-1](http://en.wikipedia.org/wiki/ISO-8859-1)编码，适用于“西欧”语言。
*   *NSISOLatin2StringEncoding*是[ISO-8859-2](http://en.wikipedia.org/wiki/ISO-8859-2)编码，适用于“东欧”语言。
*   @Esailija 声明（见下面的评论）[Windows-1252](http://en.wikipedia.org/wiki/Windows-1252)可能是更好的选择，相应的编码是*NSWindowsCP1252StringEncoding*。

# eclipse - 在eclipse中隐藏显示视图工具栏

> ID：13929405
> 
> 赞同：0
> 
> 时间：2012-12-18T08:58:29.600
> 
> 标签：eclipse

我想删除图像中显示的这个工具栏。我已经尝试禁用工具栏中的所有其他项目，但这个似乎没有。这个工具栏挡住了我的编辑器空间，我想摆脱它。请告诉我一种删除它的方法。

谢谢

[![蚀](../Images/5feccfc140a6940c58d11be5edcd5094.png)](https://i.stack.imgur.com/kAJwN.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:49:22.403

我认为您可以尝试编写自己的 WorbenchWindow 或 WorkbenchPage（现在不确定到底是哪个）并可能覆盖 createWindowContents。[从这里](http://book.javanb.com/eclipse-rich-client-platform-designing-coding-and-packaging-java-applications-oct-2005/ch18lev1sec2.html)看到这个（我从那里得到这个报价，但也许你可以找到一本书或更好的参考）：

> 关于何时可以覆盖 Workbench 窗口存在限制。Workbench 的 createWindowContents() 的默认实现创建对客户端不可用的控件，例如作业进度区域、停靠快速视图的修剪和透视栏。当您覆盖 createWindowContents() 时，您会丢失这些区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T18:35:02.860

嘿，看起来他们在 eclipse juno 中解决了这个问题 .. 只需下载 juno，生活就很好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T10:39:15.663

您使用的是哪个版本的 Eclipse？您可以通过单击 Window->Hide Toolbar 或 Window->Show toolbar 来切换工具栏的可见性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T09:43:02.317

没有办法删除它。我已尝试寻找解决方案，但无法自定义

# python - 为什么列表理解在转置矩阵中胜过 zip

> ID：13929407
> 
> 赞同：1
> 
> 时间：2012-12-18T08:58:32.930
> 
> 标签：python, performance, zip, list-comprehension

最近我正在使用 python 来处理一些百万大小的列表。

这里我有一个列表**E**，它有 1,470,000 个元素，每个元素是一个包含 2 个整数的列表。

E 看起来像：[[1, 3], [2, 4], [4, 7] ... ]

我想分别获得第一列和第二列的最大数量。

我可以通过使用列表理解来获得它

```
m1 = max([e[0] for e in E])
m2 = max([e[1] for e in E])
return (m1, m2) 
```

另一种方法是使用 zip：

```
list(map(max, zip(*E))) 
```

乍一看，我认为第二种方式应该更快，因为列表理解将构建一个大列表（更重要的是，两次）。但事实证明列表理解非常快，使用 zip 的方法慢了大约 10 到 20 倍（使用 cProfile）。

我认为 zip 不应该那么慢，（更重要的是，列表理解怎么会那么快？）有人能告诉我原因吗？

我正在使用 python 3.2

PS通过使用Windows任务管理器，我什至看不到任何内存跟踪表明python曾经创建过一个新列表。一定有黑魔法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T09:08:03.783

我已经使用 Python 2.7.3 和 3.3.0 测试了多种方法，但我无法重现您的结果。

以下时序来自 Python 2.7.3（来自 3.3.0 的结果类似）：

```
In [31]: E = [(random.randrange(0,1000),random.randrange(0,1000)) for _ in range(1470000)]

In [32]: %timeit max([e[0] for e in E]), max([e[1] for e in E])
1 loops, best of 3: 319 ms per loop

In [33]: %timeit max(e[0] for e in E), max(e[1] for e in E)
1 loops, best of 3: 343 ms per loop

In [36]: %timeit max(E, key=operator.itemgetter(0)), max(E, key=operator.itemgetter(1))
1 loops, best of 3: 314 ms per loop

In [38]: %timeit list(map(max, zip(*E)))
1 loops, best of 3: 307 ms per loop 
```

我测试过的所有方法都具有大致相同的性能。

如果你关心性能，你应该考虑使用 NumPy：

```
In [39]: import numpy as np

In [40]: EE = np.array(E)

In [46]: %timeit EE.max(axis=0)
100 loops, best of 3: 3.21 ms per loop 
```

如您所见，在这个数据集`numpy.max()`上比我尝试过的任何纯 Python 方法快大约 100 倍。

# iphone - 如何使用 segue 将图像从表格单元格传递到 UIView 中的 UIImage 对象？

> ID：13929410
> 
> 赞同：-1
> 
> 时间：2012-12-18T08:58:49.733
> 
> 标签：iphone, objective-c, ios, uiimage, segue

我有一个表视图和UIView.Table View Cell在选择Perticuler小区时，可以使用映像的小区。在UIView中应该在“UIImage对象”中出现相应的图像。

在表视图类中：

```
//I'm getting temp image as following(in my "cellForRowAtIndexPath" method)
  if(indexPath.row == 0)
    {
        [[cell imageView]setImage:[UIImage imageNamed:@"greekChickenSalad.png"]];
        tempImage = [UIImage imageNamed:@"greekChickenSalad.png"];
    }

 -(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if ([segue.identifier isEqualToString:@"SubRecipeDescriptionSegue"])
{
     RecipeDescriptionViewController *rdVC;
    rdVC = segue.destinationViewController;
    rdVC.parentIndexRDVC = descriptionIndexPath;
    rdVC.DescriptionLabel = (UILabel*)subRecipeSelected;
    rdVC.image = tempImage;

}

} 
```

在 UIView 中，LoadView 方法添加图像如下：

```
NSData *imageDataString = UIImagePNGRepresentation(image);
NSString *imageNamedContent = [[NSString alloc]initWithBytes:[imageDataString bytes] length:[imageDataString length] encoding:NSASCIIStringEncoding];
UIImage *image1 = [UIImage imageNamed:imageNamedContent];
UIImageView *imageView = [[UIImageView alloc]initWithImage:image1];
imageView.frame = CGRectMake(30,30, 250, 100);
[self.view addSubview:imageView]; 
```

在上面的代码中，我将图像转换为 NSString([UIImage imageNamed:imageNamedContent]) - 这是正确的吗？

如果没有，我该怎么做？

**注意：如果我将表格单元格的文本传递给 UIView 中的标签，Segue 工作正常。**

希望我的问题很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:05:38.467

改变：

```
NSData *imageDataString = UIImagePNGRepresentation(image);
NSString *imageNamedContent = [[NSString alloc]initWithBytes:[imageDataString bytes] length:[imageDataString length] encoding:NSASCIIStringEncoding];
UIImage *image1 = [UIImage imageNamed:imageNamedContent];
UIImageView *imageView = [[UIImageView alloc]initWithImage:image1]; 
```

进入：

```
UIImageView *imageView = [[UIImageView alloc]initWithImage:image]; 
```

* * *

* * *

您还需要获取当前单元格的图像并将其与 performSegueWithIdentifier 一起发送：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    [self performSegueWithIdentifier:@"SubRecipeDescriptionSegue" sender:cell.imageView.image];
} 
```

然后你需要更新你的 prepareForSegue 方法：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"SubRecipeDescriptionSegue"])
    {
        UIImage *selectedImage = (UIImage*)sender;

        RecipeDescriptionViewController *rdVC;
        rdVC = segue.destinationViewController;
        rdVC.parentIndexRDVC = descriptionIndexPath;
        rdVC.DescriptionLabel = (UILabel*)subRecipeSelected;
        rdVC.image = selectedImage;
    }
} 
```

# php - 在写入文件之前检查文件是否可写

> ID：13929423
> 
> 赞同：3
> 
> 时间：2012-12-18T09:00:13.130
> 
> 标签：php

我正在尝试创建一个脚本，该脚本将在写入文件之前检查文件是否可写，

确保脚本不会过早退出。

我已经走到了这一步

```
$meta =stream_get_meta_data($file);
while(!is_writable($meta['uri'])){
  sleep(rand(0,3));
  $meta=stream_get_meta_data($file);
  echo("sleeping\n");
}
$csv = fopen($file, 'a+')or die("can't open file"); 
```

当我在打开 $file 的情况下测试脚本时，即使在 $file 关闭后，它也会在睡眠部分阻塞。

我对 PHP 相当陌生，所以可能有一个我不知道的处理范例。

任何帮助都会非常受欢迎。

编辑：我将其输入 while 循环的原因是不断检查文件是否打开。因此，只有在文件最终可写时，它才应该退出 while 循环。

睡眠只是为了复制一个试图打开文件的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T09:02:14.530

its `is_writable ( string $filename )`

```
$filename = 'test.txt';
if (is_writable($meta['uri']) {
    echo 'The file is writable';
} else {
    echo 'The file is not writable';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T09:01:54.163

```
is_writable(<your_file>) 
```

This should do the trick?

[http://www.php.net/manual/en/function.is-writable.php](http://www.php.net/manual/en/function.is-writable.php)

--

Also you can use

```
@fopen(<your_file>, 'a') 
```

If this returns false, file is not writiable

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-13T07:21:29.317

使用[touch()](http://php.net/manual/en/function.touch.php)：

```
if (touch($file_name) === FALSE) {
  throw new Exception('File not writable');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T09:02:49.263

您可能不应该使用 while 循环来检查文件是否可写。也许将您的代码更改为以下内容：

```
$meta =stream_get_meta_data($file);

if (is_writable($file)){
  sleep(rand(0,3));
  $meta=stream_get_meta_data($file);
  echo("sleeping\n");
}

$csv = fopen($file, 'a+')or die("can't open file"); 
```

但是，由于我不知道您的主要目标是什么，您可以这样做：

```
$meta =stream_get_meta_data($file);

while(!is_writable($file)){
  sleep(rand(0,3));
  $meta=stream_get_meta_data($file);
  echo("sleeping\n");
}

$csv = fopen($file, 'a+')or die("can't open file"); 
```

# asp.net-mvc-3 - Html.ActionLinkMaxLengthQTip 是如何工作的？

> ID：13929424
> 
> 赞同：1
> 
> 时间：2012-12-18T09:00:17.063
> 
> 标签：asp.net-mvc-3, html

我用谷歌搜索了确切的短语 Html.ActionLinkMaxLengthQTip 并没有找到太多？这是做什么的？我在哪里可以看到一个例子？

```
<%: Html.ActionLinkMaxLengthQTip(Html.Resource(Resources.Global.Button.Create), "StepType", "Create", "Training")%> 
```

我还发现了这个：

```
 <%: Html.GetQTipFor(model => model.End) %> 
```

我还用谷歌搜索了确切的短语，但一无所获

从我拥有的代码中，我无法弄清楚这是在做什么。有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:18:37.417

根据您的评论，我建议这是针对您的应用程序的自定义扩展。

如果您在解决方案中查找所有内容（可能在您的`App_Code`.

# python - Python GUI 自定义按钮

> ID：13929425
> 
> 赞同：1
> 
> 时间：2012-12-18T09:00:28.190
> 
> 标签：python, user-interface, custom-controls, clickable

我正在寻找在 python 中制作 GUI，但目前没有太多经验。GUI 必须具有一些关键功能，即用于控制音频的滑块和一些基本菜单按钮。我意识到基本上所有的 GUI 开发工具都可以处理这些简单的功能，但我也对一些自定义内容感兴趣。我要创建的 GUI 的基本外观如下所示：

![图片](../Images/cf16aac94ce2285661d5635e2c9ff67d.png)

在图像中，滑块音量条、“button1”、“button2”、彩色圆圈和圆圈的任何切片（显示一个突出显示的部分）都需要可点击和交互。此外，小彩色圆圈必须能够围绕圆圈的边缘动态旋转并始终保持可点击状态。我还没有使用任何 GUI 开发工具，但研究过 pyGTK、pyQT、wxWidgets 和 Kivy。任何使用过这些工具的人都可以推荐最适合的工具吗？至于按钮的形状，我是否受到限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:07:03.113

您可以使用 pyopengl、pygame、pygtk。

如果您想看一下，我有一个示例如何显示此图像：

[http://free-tutorials.org](http://free-tutorials.org) **软件免费**部分是**decor.tgz**的例子。

在我看来，你可以使用**pyOpenGL**非常容易移植到 C、C++ 等其他语言，也可以将其移植到 Linux、Windows、Android。

# javascript - Slimpicker 日期问题与格式

> ID：13929427
> 
> 赞同：0
> 
> 时间：2012-12-18T09:00:30.047
> 
> 标签：javascript, slimpicker

我已经安装了这个 slimpicker，我正在使用它。

这个想法是：我对年份的选择有疑问，如果我选择 2012，我会得到类似：dd/mm/112

如果我选择 2013 虽然我得到：dd/mm/2013

这很奇怪。这是js的数据：

```
dayChars: 1,
        monthNames: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
        dayNames: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
        daysInMonth: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31], // Leap year is added later
        format: 'mm/dd/yyyy',                                          // How the output looks after selection
        yearStart: (new Date().getFullYear()),                     // Default starting year for dropdown options is 5 years ago
        yearRange: 10,                                                 // Show a 10 year span
        yearOrder: 'asc',                                              // Counting up in years
        startDay: 7                       // 1 = week starts on Monday, 7 = week starts on Sunday
    }, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-14T16:07:25.837

在 slimpicker.js 中搜索代码如下

// 要在日历上显示的日期

```
this.currentYear = this.calendarYear = this.current.getYear();
this.currentMonth = this.calendarMonth = this.current.getMonth();
this.currentDay = this.current.getDate(); 
```

并将其更改如下

// 要在日历上显示的日期

```
this.currentYear = this.calendarYear = this.current.getFullYear();
this.currentMonth = this.calendarMonth = this.current.getMonth();
this.currentDay = this.current.getDate(); 
```

# c++ - 将数据文件读入数组

> ID：13929430
> 
> 赞同：3
> 
> 时间：2012-12-18T09:00:35.490
> 
> 标签：c++, arrays, loops, text-files

我正在尝试读取一个文本文件并将其存储在一个数组中，但我的程序一直陷入无限循环。

这是我的代码：

```
int main () {
    const int size = 10000; //s = array size
    int ID[size];
    int count = 0; //loop counter
    ifstream employees;

    employees.open("Employees.txt");
    while(count < size && employees >> ID[count]) {
        count++;
    }

    employees.close(); //close the file 

    for(count = 0; count < size; count++) { // to display the array 
        cout << ID[count] << " ";
    }
    cout << endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:13:13.493

首先，您应该使用 a`std::vector<int> ID;`而不是原始`int`数组。

其次，您的循环应该看起来更像这样：

```
std:string line;
while(std::getline(employees, line)) //read a line from the file
{
    ID.push_back(atoi(line.c_str()));  //add line read to vector by converting to int
} 
```

编辑：

上面代码中的问题是这样的：

```
for(count = 0; count < size; count++) { 
```

您正在重用您之前使用的计数变量来计算您从文件中读取的项目数。

它应该是这样的：

```
for (int x = 0;  x < count; x++) {
   std::cout << ID[x] << " ";
} 
```

在这里，您使用`count`变量打印从文件中读取的项目数。

# c++ - C ++原型与实现不同

> ID：13929439
> 
> 赞同：1
> 
> 时间：2012-12-18T09:01:15.363
> 
> 标签：c++, c

我想知道是否有一种方法可以将 .h 文件编写为函数原型，并在实现中更改签名，因此它与原型略有不同。

我想要这样做的原因是因为有一些枚举类型的#include 我不想在 .h 文件中执行，但只在 .c 文件中执行，并且枚举是函数签名的一部分，所以我想知道我是否可以将枚举编写为 INT（枚举和 int 基本相同..）或原型中的其他内容，但随后出现编译错误.. 有什么好方法可以做到吗？

提前致谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T09:04:02.553

如果我理解正确，你总是可以制作一个包装函数，例如。

文件.h

```
void DoSomething(int i); 
```

文件.cpp

```
void DoSomething(int i)
{
    ActuallyDoSomething((MyEnum)i);
}

static void ActuallyDoSomething(MyEnum myEnum)
{
    // Do something
} 
```

在 OOP 程序的情况下，它可能如下所示：

文件.h

```
class ISomething
{
    virtual void DoSomething(int i) = 0;
}; 
```

文件.cpp

```
class Something : ISomething
{
private:
    void ActuallyDoSomething(MyEnum myEnum)
    {
        // ...
    }

public:
    void DoSomething(int i)
    {
        ActuallyDoSomething((MyEnum)i);
    }
} 
```

* * *

**编辑：**回应评论：我建议提供一个函数重载。

文件.h

```
void DoSomething(int i);
void DoSomething(MyEnum myEnum); 
```

文件.cpp

```
void DoSomething(int i)
{
    DoSomething((MyEnum)i);
}

void DoSomething(MyEnum myEnum)
{
    // Do something
} 
```

* * *

**最终编辑：**此解决方案无需使用 C++11 即可工作。

文件.h

```
#pragma once

enum MyEnum;

void DoSomething(int i);
void DoSomething(MyEnum enum); 
```

FileWithMyEnum.h

```
#pragma once

enum MyEnum
{
    One,
    Two,
    Three
}; 
```

文件.cpp

```
#include <file.h>
#include "FileWithMyEnum.h"

// Implementations 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:13:23.717

如果是 C++，我猜你可以使用函数重载。

文件.h

```
void DoSomething(int i); 
```

文件.cpp

```
void DoSomething(MyEnum myEnum)
{
    // Do something
}

void DoSomething(int i)
{
    DoSomething((MyEnum)i);
} 
```

我已经有一段时间没有使用 C++了。因此，不能 100% 确定这是否会按预期工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T10:36:07.653

我将概述如何创建前向声明标头。这种技术可能对 from 很熟悉`<iosfwd>`，其中 forward 声明了有用的东西 from `<iostreams>`。请注意，只有 C++11 允许您转发声明枚举。

```
huge_header_with_e.h
enum E { Zero, One, Two };

great_lib_fwd.h
enum E;
void f(E);

great_lib.h
#include "great_lib_fwd.h"
#include <huge_header_with_e.h>
void f(E e);

great_lib.c++
#include "great_lib.h"
void f(E e) { /* do something with e */ }

other_client.h
#include "great_lib_fwd.h"
void other_client(E);

other_client.c++
#include "other_client.h"
#include "great_lib.h"
void other_client(E e) { /* use e */ } 
```

请注意，在非常有限的上下文中，例如`other_client.h`，`huge_header_with_e.h`仍然避免包含 。

在实践中，我怀疑您会发现您的客户端代码通常需要指定特定的枚举常量，并且无论如何都需要包含`huge_header_with_e.h`，因此相对较少的翻译单元将避免依赖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T09:13:28.210

并不真地。在 C++11 中，您可以在标头中使用不透明的枚举声明，这样您就不必指定枚举常量，但通常，an`enum`足够轻量级，并且通常不会引入任何额外的依赖项，所以有没有真正的理由反对在需要的地方包含它。

# makefile - 了解 make 文件中的 LD 选项

> ID：13929440
> 
> 赞同：1
> 
> 时间：2012-12-18T09:01:21.200
> 
> 标签：makefile, ld

我最近下载了 graclus 软件。在尝试安装它时，我必须使用一些选项来完成 makefile.in。我想出了其他选项，但我找不到我们为 LDOPTIONS 编写的内容。

任何人都可以帮助我弄清楚我应该填写编译器使用的选项吗？帮助将不胜感激。

//这里是makefile.in

```
# Which compiler to use
CC = g++

# What optimization level to use
OPTFLAGS = -O2 -fPIC

# What options to be used by the compiler
COPTIONS = -DNUMBITS=32

# What options to be used by the loader
LDOPTIONS =

# What archiving to use 
AR = ar rv

# What to use for indexing the archive
RANLIB = ranlib

ARCH = P4SSE2

LAPACK = -llapack_$(ARCH)

ARPACK = -lcarpack_$(ARCH)

ATLAS  = -latlas_$(ARCH)

CBLAS  = -lcblaswr -lcblas -lblas -lmyf2c

GSL = -lgslcblas -lgsl

SPARSE = -lsparse

UTIL = -lmyutil 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:16:06.467

由于您提供的 Makefile 只是一个摘录，并且您没有提到您正在使用什么包或库来编译它，所以我只是在这里猜测一下。

**LDOPTIONS**可以提供与常用变量**LDFLAGS**类似的用途，它提供了一种为链接器指定额外标志的方法。这取决于您使用的链接器。如果您使用 gcc，则可以运行**man ld**来查看链接器选项列表。

# java - hql中的“元素（foo.elements）中的元素（a，b，c）”？

> ID：13929441
> 
> 赞同：0
> 
> 时间：2012-12-18T09:01:25.680
> 
> 标签：java, hibernate, hql, hibernate-envers

我有一个实体如下：

```
public class Foo {

    private List<String> bars;

    @ElementCollection(fetch=FetchType.LAZY)
    @CollectionTable(name="T_BARS", joinColumns=@JoinColumn(name = "ID"))
    @Column(name="BAR")
    public List<String> getBars() {
        return bars;
    }
} 
```

现在我正在尝试查询包含 id 为“a”、“b”或“c”的 bar 元素的所有元素 foo，但我无法使其工作。

我尝试了以下两种方法：

```
select from FOO as f where f.bars in elements
(select b.id from T_BARS as b where b.bar in elements('a','b','c')) 
```

这会产生 QuerySyntaxException: T_BARS not mapped

我的第二种方法如下：

```
select from FOO as f where elements('a','b','c') in elements(f.bars) 
```

这会产生一个 QuerySyntaxException 意外标记

编辑：我正在使用 envers，所以连接似乎不可能！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:57:19.717

[似乎在来自jobss forum](https://community.jboss.org/thread/175000)的 envers 中无法进行连接，所以我最终拆分了查询。它并不优雅，但它可以完成工作，并且提供的列表永远不会很大：

```
select from FOO as f where
('a' in elements(f.bars)
  or 'b' in elements(f.bars)
  or 'c' in elements(f.bars)
  or ...)
... 
```

# entity-framework - Visual Studio Entity-Framework-Designer：从被自定义提供程序破坏的数据库中更新模型

ID：13929442

赞同：3

时间：2012-12-18T09:01:29.717

标签：entity-framework, visual-studio-2012, designer, system.data

# php - 我需要显示位于另一台服务器上的另一个数据库的值

> ID：13929444
> 
> 赞同：0
> 
> 时间：2012-12-18T09:01:32.933
> 
> 标签：php, mysql

我有 2 个网站（一个用 PHP/Mysql 编码，另一个用一些我不知道的 CMS 平台）。

我的常规网站（PHP 网站）运行良好，显示产品（大约 12,000 种）和它们的库存信息，所有这些都来自我的数据库。

然后我有另一个网站（未知代码/CMS），其中包含我在主要 PHP 网站上拥有的*一些产品和股票信息。*

我想要的是在第二个网站上显示来自第一个 PHP 网站的库存信息（有多少产品库存）。我假设我可以深入了解显示股票信息的第二个网站代码并进行 PHP 代码调整。但我需要知道从第二个网站访问我的数据库的好方法。

我假设第二个网站是用 PHP/Mysql 完成的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:13:12.433

可能的建议

1.  制作一些网络服务来相互获取数据。
2.  由于这两个网站都是您的控制，您可以直接访问这两个数据库查询。

    现在最好的方法

最好写一个网络服务，这样你的网站都是独立的。

如果您想将您的网络服务设为私有，请使用一些身份验证

# perl - Perl 模式匹配和附加

> ID：13929447
> 
> 赞同：0
> 
> 时间：2012-12-18T09:01:44.130
> 
> 标签：perl

在 perl 中，我想实现以下翻译：

```
stmt1; gosub xyz; 
```

到

```
stmt1; xyz(); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:10:17.930

在要编辑的文件上从命令行运行（替换 file.ext）：

```
perl -i.bk -pe 's/gosub (.*?);/$1()/g' file.ext 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T11:47:47.860

已经给出的答案提供了近似答案，这将处理您的边缘情况（缺少分号，分号后的附加子句）。

```
perl -plwe 's/\bgosub\s+([^;]+)/$1()/g' 
```

它将匹配`gosub`关键字后面的任何字符序列，然后是“非分号”的空格并将它们删除。我还添加了`/g`全局修饰符，因为您可能希望在一行上进行所有可能的替换。请注意使用单词边界`\b`来防止部分匹配，例如不替换`legosub`。

如果单词边界不够，例如它将替换`1.gosub`，因为`.`导致单词字符之间的中断，您可以使用否定的lookbehind代替：

```
perl -plwe 's/(?<![^;\s])gosub\s+([^;]+)/$1()/g' 
```

这要求之前`gosub`的任何字符都不是分号或空格之外的任何字符。请注意，双重否定也允许不匹配（行首）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T10:08:12.650

```
my $str = 'stmt1; gosub xyz;';
$str    =~ s/gosub (.*?);?/$1();/;

print $str; 
```

# c# - 正则表达式匹配目录模式

> ID：13929451
> 
> 赞同：3
> 
> 时间：2012-12-18T09:01:54.573
> 
> 标签：c#, .net, regex

考虑到

```
NN = number/digit
x = any single letter 
```

我想匹配这些模式：

```
1\. NN
2\. NNx
3\. NN.NN
4\. NN.NNx
5\. NN.NN.NN
6\. NN.NN.NNx 
```

需要匹配的示例：

```
1\. 20
2\. 20a
3\. 20.20
4\. 20.20a
5\. 20.20.20
6\. 20.20.20a 
```

现在我正在尝试使用这个正则表达式：

```
\b\d+\.?\d+\.?\d+?[a-z]?\b 
```

但如果失败。

任何帮助将不胜感激，谢谢！XD

编辑：

我匹配这个：

```
<fn:footnote fr="10.23.20a">    (Just a sample) 
```

现在我有一个正则表达式可以提取“10.23.20a”

现在我将检查这个值是否有效，上面的 6 个示例将是唯一将被接受的字符串。

此示例无效：

```
1\. 20.a
2\. 20a.20.20
3\. etc. 
```

非常感谢您的帮助！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:03:55.047

你总是有`\d+`，这是一个或多个数字。因此，您至少需要三位数字。尝试将数字与其句点分组：

```
^\d+(?:[.]\d+){0,2}[a-z]?$ 
```

这`?:`只是抑制[捕获](http://www.regular-expressions.info/brackets.html)的优化（和良好实践） 。`[.]`并且`\.`完全可以互换，但我更喜欢前者的可读性。选择你最喜欢的。

如果你真的想捕捉数字和字母，有两种选择：

```
^(?<first>\d+)(?:[.](?<second>\d+))?(?:[.](?<third>\d+))?(?<letter>[a-z])?$ 
```

请注意，重要的一点是将句点和数字组合在一起，并使它们一起可选。您也可以使用未命名的组，这并不重要。但是，如果您使用我的版本，您现在可以通过（例如）访问这些部分

```
match.Groups["first"].Value 
```

where`match`是由或例如`Match`返回的对象。`Regex.Match``Regex.Matches`

或者，您可以使用 .NET 在一组中捕获多个值的功能：

```
^(?<d>\d+)(?:[.](?<d>\d+){0,2}(?<letter>[a-z])?$ 
```

现在`match.Groups["d"].Captures`将包含所有捕获的数字（1 到 3）的列表。如果`match.Groups["letter"].Value`它在那里，它仍然会包含这封信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:47:57.517

试试这个

```
^\d+(?:(?:\.\d+)*[a-z]?)$ 
```

# android - android：Galaxy Note 2：应该为哪些像素布局图像/图标准备？

> ID：13929454
> 
> 赞同：2
> 
> 时间：2012-12-18T09:02:02.760
> 
> 标签：android, android-layout, galaxy

我正在开发一个必须支持三星 Galaxy Note - 2 的应用程序。现在[note-2 的](http://www.samsung.com/in/galaxynote2/spec.html?type=find)像素分辨率为 1,280 x 720。参考[Wikipedia](http://en.wikipedia.org/wiki/List_of_displays_by_pixel_density)。在开发应用程序时，我发现它正在从`res/drawable-hdpi`. 那么我应该为什么分辨率布局准备图像？还是需要制作单独的资源文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:08:58.900

为 hdpi 分辨率准备图像 -- 480x800 hdpi。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T09:24:41.230

资源是根据 DPI 挑选的，每个设备使用的 DPI 的快速参考可以在这里找到：

[http://blog.blundell-apps.com/list-of-android-devices-with-pixel-density-buckets/](http://blog.blundell-apps.com/list-of-android-devices-with-pixel-density-buckets/)

对于图像缩放，图像的大小应大致如下：

如果图像要使用 100 **dp**，那么实际图像大小将是：

*   ldpi：75像素
*   mdpi：100像素
*   高清：150像素
*   xhdpi：200像素

如果您想在您的 NOTE 2 上使用 100**像素**，那么图像尺寸将为

*   ldpi：50像素
*   mdpi：66.67 像素
*   高清：100像素
*   xhdpi: 133.33 像素

您可以使用以下站点进行快速计算：

[http://labs.skinkers.com/content/android_dp_px_calculator/](http://labs.skinkers.com/content/android_dp_px_calculator/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T04:13:23.747

Galaxy Note 2 是正常大小，xhdpi 密度和长。您可以为 xhdpi 准备 layout 或 drawable。有关详细信息，请查看此帖子[Galaxy Note 2 屏幕规格](http://situee.blogspot.com/2013/01/galaxy-note-2-screen-specifications.html)。如果您没有 xhdpi 资源，android 将尝试在 hdpi 中查找资源。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T09:10:26.453

Galaxy Note 使用 hdpi，即 240dpi 的像素密度

[Android 设备分辨率](http://blog.blundell-apps.com/list-of-android-devices-with-pixel-density-buckets/)

# oracle - ORACLE import/export CLOB data

> ID：13929457
> 
> 赞同：0
> 
> 时间：2012-12-18T09:02:16.303
> 
> 标签：oracle, oracle10g, oracle11g, storage, oracle-sqldeveloper

I am trying to import an excel file into an oracle table via sql developer. One of the oracle columns is of type CLOB, and during the verification step of the import wizard, i get the following message in the information column: "Data Types CLOB, not supported for import." The data fields i am attempting to import for the CLOB column is empty. Does anybody have any idea what might be wrong? Thanks.

If it is not possible, How can I import/export CLOB data in Oracle?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-25T18:55:37.463

您只需要使用更新的 SQL Developer 副本。我们现在支持从 Excel 导入 CLOB 字段。

[![在此处输入图像描述](../Images/3b0a6964e2217b4188a320c5d01b7e29.png)](https://i.stack.imgur.com/vLD0t.png)

然后当它结束时，检查数据......

[![在此处输入图像描述](../Images/99d7065978b53b25e7a9888035d2dfbc.png)](https://i.stack.imgur.com/32Tm2.png)

# facebook - iOS: Facebook error "missing message or attachment"

> ID：13929460
> 
> 赞同：0
> 
> 时间：2012-12-18T09:02:21.633
> 
> 标签：facebook, ios5.1

Upgrading my app. Target is iOS5.1\. Xcode 4.5.2 and am using FacebookSDK 3.0 along with Twitter Frameworks. App is logging into Facebook without issue. When I attempt to publish a post, I get this returned in the log:

```
2012-12-18 10:39:31.934 MyApp[31754:1d603] Error Domain=com.facebook.sdk Code=5 
"The operation couldn’t be completed. (com.facebook.sdk error 5.)" 
UserInfo=0xab74630 {com.facebook.sdk:ParsedJSONResponseKey={
    body =     {
        error =         {
            code = 100;
            message = "(#100) Missing message or attachment";
            type = OAuthException;
        };
    };
code = 400;
}, com.facebook.sdk:HTTPStatusCode=400}
2012-12-18 10:39:31.935 MyApp[31754:1d603] (null) 
```

This last line is the result of a log expression to list the "postParams" in the "publishStory" method listed below. Note that it is (null). The error result in simulator is "error: domain = com.facebook.sdk, code = 5"

I used the Facebook tutorial to build the FB interface. I've got the params listed in initWithNibName, just as the tutorial indicates.

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // this stuff will change... just get it working

        self.postParams = [[NSMutableDictionary alloc] initWithObjectsAndKeys:
                           @"Share...", @"message",
                           @"http://MyApp.com", @"link",
                           @"icon.png", @"picture",
                           @"MyApp", @"name",
                           @"A wonderful way to record your life events.", "caption",
                           @"Easy to use.", @"description",
                           nil];
    }
    return self;
} 
```

Then, the "publish" is in a separate method, which is where it stops and I get the above error.

```
- (void)publishStory
{
    [FBRequestConnection
    startWithGraphPath:@"me/feed"
    parameters:_postParams
    HTTPMethod:@"POST"
    completionHandler:^(FBRequestConnection *connection,
                     id result,
                     NSError *error) {
        NSString *alertText;
        if (error) {
            NSLog(@"%@",error);
            NSLog(@"%@", _postParams);
            alertText = [NSString stringWithFormat:
                      @"error: domain = %@, code = %d",
                      error.domain, error.code];
        } else {
            alertText = [NSString stringWithFormat:
                      @"Posted action, id: %@",
                      [result objectForKey:@"id"]];
        }
        // Show the result in an alert
        [[[UIAlertView alloc] initWithTitle:@"Result"
                                 message:alertText
                                delegate:self
                       cancelButtonTitle:@"OK!"
                       otherButtonTitles:nil]
        show];
    }];
} 
```

I think, that the actual params are not being uploaded. I've been searching for several days trying to find a solution. Anyone have an idea of how to fix this and get the post to complete? Any help would be greatly appreciated!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T21:37:21.473

我有一个类似的问题，但我的问题是**postParams**没有被保留，因为我没有使用属性并且我在同一个发布方法中创建了 postParams。这些参数需要我保留在课堂上的某个地方。

确保您的属性使用了保留，同时确保调用了 init 方法。

# c - unsigned char 类型可以有填充位和/或未使用的值吗？

> ID：13929462
> 
> 赞同：8
> 
> 时间：2012-12-18T09:02:36.787
> 
> 标签：c

除位字段外的所有类型都占用整数个“字节”，并且 sizeof 返回该数字。一个无符号字符**占用**1 个“字节”，所以 sizeof(unsigned char) 总是返回 1。对吗？

但是，无符号字符是否总是**填充**“字节”，或者 CHAR_BITS 是否可以小于“字节”中的位数或 UCHAR_MAX 小于（2 的 CHAR_BITS 次方）- 1？如果 unsigned char 不能保存它的位数也允许的所有值，那么使用 unsigned char 复制其他类型如何工作？

```
int src = -1, dest;
size_t i;

for (i = 0; i < sizeof dest; i++) {
  ((unsigned char *) &dest)[i] = ((unsigned char *) &src)[i];
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T09:03:36.100

不，`unsigned char`不能有填充位。

> （C99, 6.2.6.2p1）“对于 unsigned char 以外的无符号整数类型，对象表示的位应分为两组：值位和填充位（不需要任何后者）。”

是的，`sizeof (unsigned char)`保证是`1`。

> （C99，6.5.3.4p3）“当应用于具有 char、unsigned char 或 signed char 类型（或其限定版本）的操作数时，结果为 1。”

# php - PHP for 循环与带范围的 foreach

> ID：13929468
> 
> 赞同：20
> 
> 时间：2012-12-18T09:02:54.530
> 
> 标签：php, arrays, loops, for-loop, foreach

其中哪一个会更好地提高性能和可读性？

```
foreach(range(0,10000) as $i) {} // 3.847 ms

for($i = 0; $i < 10000; ++$i) {} // 0.663 ms 
```

**编辑**：做了一个基准测试，最后一个几乎快了 6 倍。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-18T09:28:49.803

传统`for`循环比`foreach`+快`range`。第一个只使用整数比较和递增，而最后一个必须创建一个（可能很大）数组，然后通过移动内部数组光标并检查是否到达末尾来提取每个元素。

如果你执行这个，你可以看到 plain`for`比`foreach`+快两倍`range`：

```
$t0 = microtime(true);
for ($i = 0; $i < 100000; $i++) {
}
echo 'for loop: ' . (microtime(true) - $t0) . ' s', PHP_EOL;

$t0 = microtime(true);
foreach (range(0, 100000) as $i) {
}
echo 'foreach + range loop: ' . (microtime(true) - $t0) . ' s', PHP_EOL; 
```

`for`如果您需要迭代给定次数但最终在大多数情况下您不会看到很大的性能改进（考虑到上面的示例迭代 100k 次），最好使用传统作为习惯，如果减少迭代次数，差异会更小）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-18T09:12:21.500

如果这很关键，

```
for($i = 0; $i < 1000; ++$i) {} 
```

比

```
for($i = 0; $i < 1000; $i++) {} 
```

但是您不会真正注意到仅 1000 次迭代有太大差异

微优化真的那么重要吗....如果是这样，您为什么不能简单地设置一些测试运行来自己比较不同的选项

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T09:31:19.540

**比较一些php函数的执行速度**

***for 循环占用***

`for()`循环`using count()`耗时 20.86401 毫秒

`for()`循环`Not using count()`耗时 7.09796 毫秒

使用 count() 意味着： `for ($i = 1; $i < count($myarr); ++ $i) {`..

***其中 foreach() 循环：***

`foreach()`花了 11.16920 毫秒

`foreach()`使用 KEY 耗时 12.35318 毫秒

这两者都是在同一个数组上完成的，它们各自的执行时间都显示出来了`for`，`foreach`它们都是语言结构，它们的执行速度会更快，所以除非你在一个有数千条记录的数组上使用它们，否则你不会注意到更多的差异。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T09:07:37.803

Foreach 非常适合遍历使用键和值的数组。使用 for 循环，保留键的使用更加困难。 [http://www.c-sharpcorner.com/interviews/answer/2147/](http://www.c-sharpcorner.com/interviews/answer/2147/)这可能会有所帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T09:14:02.423

`Foreach`非常适合遍历使用键和值的数组。

例如，如果我有一个名为“用户”的数组：

```
$User = array(
    'name' => 'Bob',
    'email' => 'bob@example.com',
    'age' => 200
); 
```

我可以很容易地遍历它并且仍然使用键：

```
foreach ($User as $key => $value) {
    echo $key.' is '.$value.'<br />';
} 
```

这将打印出：

```
name is Bob
email is bob@example.com
age is 200 
```

使用`for`循环，保留键的使用更加困难。

当您在 PHP 中使用面向对象的实践时，您会发现`foreach`几乎完全使用循环，`for`循环仅用于数字或基于列表的事物。`foreach`还可以防止您不得不使用`count($array)`来查找数组中的元素总数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T09:23:31.997

在这种特殊情况下（有`range()`而不是从另一个范围传递的数组） -`foreach()`会更快。 `for()`在几乎任何其他情况下都会击败它。

# sencha-touch-2 - 在 Store 中加载 Json 以将其显示在 List Sencha Touch 2 jsonp

> ID：13929470
> 
> 赞同：0
> 
> 时间：2012-12-18T09:03:05.080
> 
> 标签：sencha-touch-2, jsonp, store

这是我的模型

```
Ext.define("StockWatch.model.Market", {
extend: "Ext.data.Model",
config: {
    idProperty: 'CompanyCode',
    fields: [
        { name: 'CompanyCode', type: 'string' },
        { name: 'LastTradedPrice', type: 'string' },
        { name: 'PercentageDiff', type: 'string' },
        { name: 'FiftyTwoWeekHigh', type: 'string' },
        { name: 'FiftyTwoWeekLow', type: 'string' },
        { name: 'ChangePercent', type: 'string' },
        { name: 'Change', type: 'string' },
        { name: 'MarketCap', type: 'string' },
        { name: 'High', type: 'string' },
        { name: 'Low', type: 'string' },
        { name: 'PrevClose', type: 'string' },
        { name: 'OpenInterest', type: 'string' },
        { name: 'MarketLot', type: 'string' },
        { name: 'ChangeInOpenInterest', type: 'string' },
        { name: 'LastTradedTime', type: 'date', dateFormat: 'c' },
    ]
}
}); 
```

这是我的商店

```
Ext.define("StockWatch.store.Markets", {
    extend: "Ext.data.Store",
    requires: ["Ext.data.proxy.LocalStorage", "Ext.data.proxy.JsonP", "StockWatch.model.Market"],
    config: {
        model: "StockWatch.model.Market",
        autoLoad : true,
        proxy : {
            type : 'jsonp',
            url : 'http://money.rediff.com/money1/current_status_new.php?companylist=17023928%7C17023929&id=1354690151&Rand=0.6305125835351646',
            reader:{
                    type:'json',
                    rootProperty:''
                }
        }
    }
}); 
```

我无法将数据添加到我的列表中，可能是在某个地方获取数据是错误的。指导我找到解决方案。我也在使用拉刷新列表插件，所以每次我拉下列表时数据会自动加载还是我必须在那里写点什么？

提前谢谢

**编辑：** 我也在控制台中收到此警告

```
Resource interpreted as Script but transferred with MIME type text/html: "http://money.rediff.com/money1/current_status_new.php?companylist=17023928%7C17023929&id=1354690151&Rand=0.6305125835351646&_dc=1355822361093&page=1&start=0&limit=25&callback=Ext.data.JsonP.callback1". 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:12:19.027

使用[回调键](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.JsonP-property-callbackKey)

callbackKey：指定将在请求完成时发送到包含要执行的函数名称的服务器的 GET 参数。默认为回调。因此，一个常见的请求将采用 url?callback=Ext.data.JsonP.callback1 的形式

默认为：“回调”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T06:49:18.967

您需要将 JSON 响应包装在 JSONP 的回调函数中。看起来你的远程调用没有返回这个，请尝试指定一个回调参数 - 否则如果远程服务器不允许这样做，你需要将它传递给另一个服务器以将其包装在回调函数中。

另外，您在帖子底部提到的警告，请不要担心。它不会引起任何问题。

# mapreduce - Hive 和 Hbase 之间的集成

> ID：13929471
> 
> 赞同：1
> 
> 时间：2012-12-18T09:03:09.280
> 
> 标签：mapreduce, hbase, hive

我在 hbase 上使用 hive 来制作一些 BI。我已经配置了 hive 和 hbase，但是当我在 Hive 上运行该查询“select count(*) from hbase_table_2”时

hbase_table_2 是 hive 中的表，它引用 Hbase 中的表

发生此异常：

```
# of failed Map Tasks exceeded allowed limit. FailedCount: 1\. LastFailedTask: task_201212171838_0009_m_000000" 

java.io.IOException: java.io.IOException: org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@7d858aa0 closed
at org.apache.hadoop.hive.io.HiveIOExceptionHandlerChain.handleRecordReaderCreationException(HiveIOExceptionHandlerChain.java:97)
at org.apache.hadoop.hive.io.HiveIOExceptionHandlerUtil.handleRecordReaderCreationException(HiveIOExceptionHandlerUtil.java:57)"

WARN org.apache.zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect

WARN org.apache.hadoop.hive.conf.HiveConf: hive-site.xml not found on CLASSPATH 
```

不知道问题出在哪里，谁能帮帮我？

# dll - 如何制作可加载的 dll 以通过任何程序使用 tcl 代码功能

> ID：13929478
> 
> 赞同：1
> 
> 时间：2012-12-18T09:03:27.787
> 
> 标签：dll, tcl

我已经使用 tcl 创建了一个 GUI。我想让 tcl 代码的一些核心功能可供任何支持 dll 的程序使用。为此，我采用了一个非常简单的 tcl 代码示例，它添加了两个整数，并且我编写了 ac 包装函数来使用此功能。这对我有用。现在我如何为这两个 c 和 tcl 文件创建一个 dll，以便任何程序都可以通过简单地加载 dll 来使用这个附加功能。

这是我的简单 tcl 代码：

```
/* Filename : simple_addition.tcl */

#!/usr/bin/env tclsh8.5

proc add_two_nos { } {

set a 10

set b 20

set c [expr { $a + $b } ]

puts " c is $c ......."

} 
```

这是我的 c 包装函数，它使用上述 tcl 附加功能：

```
#include <tcl.h>
#include <tclDecls.h>
#include <tclPlatDecls.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main (int argc, char **argv) {
    Tcl_Interp *interp;
    int code;
    char *result;

    printf("inside main function \n");
    Tcl_FindExecutable(argv[0]);
    interp = Tcl_CreateInterp();
    code = Tcl_Eval(interp, "source simple_addition.tcl; add_two_nos");

    /* Retrieve the result... */
    result = Tcl_GetString(Tcl_GetObjResult(interp));

    /* Check for error! If an error, message is result. */
    if (code == TCL_ERROR) {
    fprintf(stderr, "ERROR in script: %s\n", result);
    exit(1);
    }

    /* Print (normal) result if non-empty; we'll skip handling encodings for now */
    if (strlen(result)) {
    printf("%s\n", result);
    }

    /* Clean up */
    Tcl_DeleteInterp(interp);
    exit(0);
} 
```

这个 c 包装器对我来说工作得很好，并给出了正确的结果。

现在我想创建一个 dll 文件，这样如果我将该 dll 包含到任何支持 dll 的程序中，它应该能够使用上述 tcl 代码的这个附加功能。谁能告诉我我能做到的方式。请帮我。我是这个 dll 概念的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:02:00.863

为了创建 .dll，您必须使用 Visual Studio 和 C 或 C++ 之类的工具来创建 .dll（有很多其他工具可以创建 .dll 文件，但 VS 很容易掌握和使用。）所以在VS中新建一个项目，这需要是一个C++ WIN32项目。选择 DLL 应用程序类型和导出符号附加选项。

VS 将创建一个基本的 .dll，然后你可以修改它来做你想做的事。我简短地说，我会考虑将 intrepter 的创建/销毁放入 dllmain：

```
BOOL APIENTRY DllMain( HMODULE hModule,
    DWORD  ul_reason_for_call,
    LPVOID lpReserved
    )
{
    switch (ul_reason_for_call)
    {
    case DLL_PROCESS_ATTACH:
        {
            Tcl_FindExecutable(NULL);
            interp = Tcl_CreateInterp();
        }
    case DLL_THREAD_ATTACH:
        break ;
    case DLL_THREAD_DETACH:
        break ;
    case DLL_PROCESS_DETACH:
        {
            Tcl_DeleteInterp(interp);
            break;
        }
    }
    return TRUE;
} 
```

然后创建使用解释器的 .dll 导出的函数。如果您不熟悉共享库的概念，那么我建议您花一点时间阅读它们，[在这里](http://msdn.microsoft.com/en-us/library/ms235636%28v=vs.100%29.aspx)和[这里](http://msdn.microsoft.com/en-us/library/1ez7dh12%28v=vs.100%29.aspx)尝试一些背景阅读。

# asp.net - 部署 asp.net

> ID：13929479
> 
> 赞同：1
> 
> 时间：2012-12-18T09:03:29.400
> 
> 标签：asp.net, wcf

我有一个 asp.net 应用程序，它在解决方案资源管理器中使用一些 Web 服务（WCF）（通过添加参考）。我可以看到端点是在 Web.config 中定义的

现在我不想接触生产中的网络配置，我有两个问题。1\. 我应该将什么 dll 投入生产 - 发布一个或调试 dll。2\. 在我们的 asp.net 应用程序中作为参考 (WCF) 的任何内容。假设我没有更改 WCF 服务中的任何内容，我希望仅定义端点就足够了。

如果有人可以在这方面提供指导，我将不胜感激。

在此先感谢- .net 新手 :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:23:41.203

具体到你的问题，这里有答案

1）在生产服务器上“发布”构建（dll）是最好的选择，因为它们针对性能进行了优化。您不需要再次添加引用，除非有一些代码更改（这会更改服务的 wsdl）

2）端点不会改变，因此只需复制新的服务dll就可以了。配置文件中的类型与 WCF 服务中的类型保持一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:21:17.267

检查你的VSS for Configuration Manager，你指向哪个。它可以是发布或调试。选择哪一个，你已经部署了对应的。WCF服务，定义端点就可以了。

# c# - 使用 C# Math.Abs 返回值 - 没有得到预期的输出

> ID：13929480
> 
> 赞同：1
> 
> 时间：2012-12-18T09:03:31.303
> 
> 标签：c#, visual-studio-2010, absolute-value

我想找到一个数字的增量值。
我试着用这个。我用`Abs`函数。它适用于整数。
但是当我尝试执行以下操作时，

```
var gh = Math.Abs(3.223 - 6.243); 
```

它返回`3.0200000000000005`。但我期待 `3.02`。
为什么？如何获得`3.02`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T09:09:20.120

因为您使用的是浮点/双精度值，它们本质上不是 100% 精确的（这是由于它们的二进制表示）。例如，你甚至不能精确`0.1`地使用浮点数，因为它的二进制表示是周期性的`1.(1001)`。这是一篇关于这个问题的非常完整的文章：**[What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)**

Tl; dr 解决方案是`decimal`用于精确的十进制算术运算

```
var gh = Math.Abs(3.223m - 6.243m); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T09:09:58.977

二进制浮点数既不`3.223`也不完全可表示。`6.243`您想要的答案`3.02`也不完全可以表示。

如果你想要精确的十进制算术，你应该使用[`decimal`](http://msdn.microsoft.com/en-us/library/364x0z75.aspx)类型。例如：

```
var gh = Math.Abs(3.223m - 6.243m); 
```

这将导致`gh`type `decimal`，并具有您想要的确切值。文字上的`m`后缀用于表示 type 的值`decimal`。

**有用的资源**

*   [每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)
*   [浮点变量的确切值是多少？](http://pages.cs.wisc.edu/~rkennedy/exact-float)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T09:20:17.323

您是否需要像这样显示数字，或者您想将其用于进一步计算？

为了显示它，您可以使用字符串格式。如果您将其用于进一步计算，您应该将其保留为这样，并在需要显示数字的地方应用截断。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T09:07:27.043

我得到了正确的价值。尝试将其转换为`Decimal`，也许你会得到正确的精度：

```
decimal gh = Convert.ToDecimal(Math.Abs(3.223 - 6.243)); 
```

祝你好运！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-18T09:08:50.097

你可以试试这个： var sgh= gh.ToString("0.00", CultureInfo.CurrentCulture);

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-18T09:11:58.760

这取决于你想要多少位数，如果你想要小数，那么 var gh = Convert.ToDecimal(Math.Abs​​(3.223 - 6.243));

# css - 根据列数计算每个表格列的宽度

> ID：13929491
> 
> 赞同：0
> 
> 时间：2012-12-18T09:04:04.680
> 
> 标签：css, html, html-table

我有一个 x 列的表格，表格的宽度是固定的。

```
<colgroup>
    <col width="20%" />
    <col width="20%" />
    <col width="20%" />
    <col width="20%" />
    <col width="20%" />
</colgroup> 
```

我希望每列的宽度基于列数。如果 4 列宽度为 25%，如果 3 = 33% 如果 2 = 50%

没有 JavaScript 有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:26:18.937

没有javascript？不，如果不使用 javascript，您无法为列分配宽度值。

HTML/CSS 用于构建框架和设置网站样式，而不是用于计算。

当您不知道表格容器的固定宽度时，也可以使用百分比，除非您确定内容是相同的宽度，否则您最终可能会在挤压时表格行变得非常高将内容放入 5 个“固定”宽度的列中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-12T10:38:13.190

请指定您使用的编程语言。

如果您使用的是 php..，

如果总列数是`$x`

在循环中你必须设置

```
<col width="<?php echo 100/$x; ?>" /> 
```

# iphone - 如何在iphone地图中获取一个点周围的随机点数？

> ID：13929493
> 
> 赞同：1
> 
> 时间：2012-12-18T09:04:11.640
> 
> 标签：iphone, ios, map, geolocation, mkmapview

我正在开发一个包含地图的 iphone 应用程序。起始屏幕是导航屏幕，用户可以在其中选择位置，比如说佛罗里达。现在，当用户选择佛罗里达时，我只想从佛罗里达挑选至少六个随机点（点的纬度和经度，以便我可以放置注释）。

我没有数据库，因此我无法从佛罗里达州的数据库中获取 5 分并放置它们。

有任何想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T21:23:32.520

如果您没有任何东西可以告诉您要在其中生成随机点的区域的形状和大小，这将非常困难。Harikrishnan 为您提供了一个良好的开端，尽管每次将 lat 和 long 增加 0.0001 并不是随机的。在佛罗里达州的坐标（根据谷歌的数据，北纬 28.0908°，西经 81.9604°）在两个方向上移动 0.0001[距离只有 14m](http://www.movable-type.co.uk/scripts/latlong.html)，因此您不太可能以这种速度离开佛罗里达。

您可以使用随机数而不是 0.0001 来调整 Harikirshnan 的方法，但您仍然需要知道用户正在查看的区域有多大。当您查看一个州甚至一个城市时，在 14m 范围内获得 5 分并不是什么好事。

也许您需要更仔细地查看您想要实现的目标。如果这些点不代表地理数据，那么为什么要将它们放在地图上。如果他们这样做并且它们代表整个区域而不是单个点，那么我能想到的最好的方法是根据 Apple 为用户选择的位置返回的 maprect 生成随机点。（粗略地说是`mapX = random*maprect.size.width + maprect.origin.x`）。然后如果你有一个像佛罗里达这样的区域，它的形状不像你的 MKMapView，你需要反向地理编码，看看你选择的点是否真的在佛罗里达内（即将坐标发送给苹果并检查地址）。

或者，您现在可以考虑在地图上显示数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:19:10.130

尝试这个

```
NSInteger i;
    double offset=0.0001;
    for(i=1;i<=5;i++){
        double newlatitude=location.coordinate.longitude+offset;
        double newlongitude=location.coordinate.longitude+offset;
        NSLog(@"%f ,%f",newlatitude,newlongitude );
        offset+=0.0001;
    } 
```

# ruby-on-rails - 寻找！ruby on rails 中的条件

> ID：13929495
> 
> 赞同：0
> 
> 时间：2012-12-18T09:04:19.093
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我一直在关注 rails casts #221，我使用`find_by_somefield!`了“！”。这在 ActiveRecord 查找条件的上下文中意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:07:49.710

它会引发 ActiveRecord::RecordNotFound 错误。

参考：[导轨](http://guides.rubyonrails.org/active_record_querying.html#dynamic-finders)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:15:20.827

请参阅以下链接。你会得到答案。

[http://rorguide.blogspot.in/2011/06/active-record-finder-methods-dynamic.html](http://rorguide.blogspot.in/2011/06/active-record-finder-methods-dynamic.html)

# html - 在两种媒体查询案例中使用 css 'important'

> ID：13929497
> 
> 赞同：-2
> 
> 时间：2012-12-18T09:04:34.070
> 
> 标签：html, css, media-queries

我正在创建一个移动应用程序，其中出现了一些错误。

这里我的核心风格是桌面：

```
.abc{
     width:1001px;
}

@media only screen and (max-width : 320px) {
.abc{
     width:320px!important;
}
}
@media only screen and (max-width : 480px) {
.abc{
     width:480px!important;
}
} 
```

从上面的样式中，只有 480px 的样式适用于 320px 和 480px。

是否有任何替代建议来解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T09:07:00.973

这是因为`max-width:480px;`仍然以 320 像素为目标。将最后一个更改为：

```
@media only screen and (min-width: 321px)  and (max-width: 480px) {
    .abc {
        width: 480px !important;
    }
} 
```

这将停止该查询影响低于 321 像素的任何内容。

看起来您不需要`!important`此修复程序与此无关，因此如果我是您，我将删除它，将来可能会搞砸

另一种解决方案是将 320 像素的查询移到 480 像素的下方。它们都具有相同的特异性，因此级联中最后一个优先。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T09:07:16.803

设置最小宽度

```
.abc {
    width: 1001px;
}

@media only screen and (max-width: 320px) {
    .abc {
        width: 320px;
    }
}

/* set a min-width here, so these rules don't apply for screens smaller than 321px */
@media only screen and (min-width: 321px) and (max-width: 480px) {
    .abc{
        width: 480px;
    }
} 
```

如果我是对的，您也应该能够删除`!important`语法...

# c# - 声明 DataTable 并在方法外添加列

> ID：13929498
> 
> 赞同：1
> 
> 时间：2012-12-18T09:04:39.947
> 
> 标签：c#, asp.net

我想在**Page_Load**方法（或任何其他方法）之外声明一个**DataTable**但无法这样做。

 **我想要这样的东西。

```
Protected void Page_load(object sender ,EventArgs e) 
{
// Outside this or any other method
}
DataTable dt = new DataTable("testingDt");

dt.Columns.Add("Site A");
dt.Columns.Add("Site B");
dt.Columns.Add("Site C"); 
```

我可以声明一个 DataTable 并在方法中添加列，并对它们做任何我想做的事情，但我在想为什么我不能做这样的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T09:09:05.000

正如 Habib[已经提到](https://stackoverflow.com/questions/13929498/declaring-a-datatable-and-adding-columns-outside-the-method/13929517#13929517)的：

> 您可以在方法之外声明和实例化数据表，但不能在方法之外向其中添加列。

我不会在 ASP.NET 中的方法之外声明它，因为无论如何所有对象都会在当前[页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)结束时被处理掉。如果您忘记了这个事实，那将鼓励讨厌的错误。

相反，我会使用一个有意义的命名方法来初始化和填充你的`DataTable`.

例如：

```
public static DataTable GetAllLinks()
{
    DataTable dtSelectedLinks = new DataTable();
    // fill it here from database or whatever ...
    return dtSelectedLinks;
} 
```

现在您可以在任何地方使用它，例如：

```
Protected void Page_load(object sender ,EventArgs e) 
{
    if(!IsPostBack)
    {
        gridViewLinks.DataSource = GetAllLinks();
        gridViewLinks.DataBind();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:05:57.313

您可以在方法之外声明和实例化数据表，但不能在方法之外添加列或对其执行任何操作。

```
DataTable dt = new DataTable("testingDt"); // DataTable declared outside
Protected void Page_load(object sender ,EventArgs e) 
{
dtSelectedLinks.Columns.Add("Site A"); //Datatable used inside the method. 
dtSelectedLinks.Columns.Add("Site B");
dtSelectedLinks.Columns.Add("Site C");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T09:11:59.613

您不能向其中添加列/行等

```
DataTable dt;
Protected void Page_load(object sender ,EventArgs e) 
{
     if(!Page.IsPostBack)
     {
        myGridView.DataSource=GetData();
        myGridView.DataBind();
     }
}

Private DataTable GetData()
{
     dt = new DataTable("testingDt");
     dt.Columns.Add(New DataColumn("S.No",typeof(int)));  
     dt.Columns.Add(New DataColumn("Name",typeof(string)));
     // Add rows
     return dt;
} 
```**

# core-data - Restkit 0.20 pre4 核心数据问题

> ID：13929499
> 
> 赞同：4
> 
> 时间：2012-12-18T09:04:43.753
> 
> 标签：core-data, mapping, restkit, duplicate-data

```
{"status":"ok",
 "count":5,
 "count_total":165,
 "pages":33,
 "posts":[{ "id":2971,
            "status":"publish",
            "title":"title1",
            "content":"",
            "date":"date",
            "categories":[{"id":5,
                           "title":"category1"},
                          {"id":7,
                           "title":"category2"}],
            "thumbnail":"url",
            "custom_fields":{"wpcf-content":["content"],
                             "wpcf-audio":["url"]}
              },  
          { "id":2974,
            "status":"publish",
            "title":"title2",
            "content":"",
            "date":"date2",
            "categories":[{"id":5,
                           "title":"category1"},
                          {"id":5,
                           "title":"category3"}
                         ],
            "thumbnail":"url",
            "custom_fields":{"wpcf-content":["content"],
                             "wpcf-audio":["url"]}
              }
          ]
}

posts.h
@interface posts : NSManagedObject
@property (nonatomic, retain) NSString* title;
@property (nonatomic, retain) NSArray* wpcf-content;
@property (nonatomic, retain) NSArray* wpcf-audio;
@property (nonatomic, retain) NSString* id;
@property (nonatomic, retain) NSArray* categories;
@end

categories.h
@interface categories : NSManagedObject
@property (nonatomic, retain) NSString* title;
@end

Model.xcdatamodeld
entities  Posts : title (string), id (integer 64),wpcf-audio (transformable),wpcf-content       (transformable)
Categories : title (string)

NSManagedObjectModel *managedObjectModel = [NSManagedObjectModel mergedModelFromBundles:nil];
RKManagedObjectStore *managedObjectStore = [[RKManagedObjectStore alloc] initWithManagedObjectModel:managedObjectModel];
NSString *path = [RKApplicationDataDirectory() stringByAppendingPathComponent:@"Model.sqlite"];
[managedObjectStore addSQLitePersistentStoreAtPath:path fromSeedDatabaseAtPath:nil withConfiguration:nil options:nil error:nil];
[managedObjectStore createManagedObjectContexts];
RKEntityMapping *categoryMapping = [RKEntityMapping mappingForEntityForName:@"Categories" inManagedObjectStore:managedObjectStore];
[categoryMapping addAttributeMappingsFromDictionary:@{ @"title":@"title"}];
RKEntityMapping *mapping = [RKEntityMapping mappingForEntityForName:@"Posts" inManagedObjectStore:managedObjectStore];
NSArray *identification =[[NSArray alloc]initWithObjects:@"id", nil];
mapping.identificationAttributes= identification;
[mapping addAttributeMappingsFromArray:@[@"title",@"id",@"custom_fields.wpcf-content",@"custom_fields.wpcf-audio"]];
NSIndexSet *statusCodes = RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful); // Anything in 2xx
RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:mapping pathPattern:nil keyPath:@"posts" statusCodes:statusCodes];
[mapping addPropertyMapping:[RKRelationshipMapping relationshipMappingFromKeyPath:@"categories" toKeyPath:@"categories" withMapping:categoryMapping]];
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://my.url/json"]];
RKManagedObjectRequestOperation *operation = [[RKManagedObjectRequestOperation alloc] initWithRequest:request responseDescriptors:@[responseDescriptor]];
operation.managedObjectContext = managedObjectStore.mainQueueManagedObjectContext;
[operation setCompletionBlockWithSuccess:^(RKObjectRequestOperation *operation, RKMappingResult *result) {
    posts *article = [result firstObject];
    categories *catego =[article.categories objectAtIndex:0];
    NSLog(@"Mapped the article: %@", article.title);
    NSLog(@"Mapped the article: %@", catego.title);
} failure:^(RKObjectRequestOperation *operation, NSError *error) {
    NSLog(@"Failed with error: %@", [error localizedDescription]);
}];
RKObjectManager *manager = [RKObjectManager managerWithBaseURL:[NSURL URLWithString:@"http://my.url/"]];
[manager enqueueObjectRequestOperation:operation]; 
```

我收到此错误 W restkit.core_data:RKManagedObjectMappingOperationDataSource.m:157 Performing managed object mapping with a nil managed object cache：

无法通过标识属性更新现有对象实例。可能会创建重复的对象。

# java - 哪个 API：JavaFX 或 JMF 更适合 Java 中的音频处理？

> ID：13929501
> 
> 赞同：4
> 
> 时间：2012-12-18T09:05:00.037
> 
> 标签：java, api, javafx-2, jmf, audio-processing

我正在做一个项目，我必须将音频数据（很可能是 mp3、wav 或 wma 格式）转换为波形，并获得 FFT 和音高以及音高的毫秒时间改变。

我只是很困惑这些 API 中哪个更好？它们各自的局限性是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T11:52:01.707

JMF 是古老的、笨重的，而且基本上没有维护。

JavaFX 可能支持也可能不支持您需要的东西，但至少它在 Oracle 未来发展的雷达上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:38:30.897

您可能想查看 FMJ，它基本上是在 Sun 放弃维护 JMF 之后 JMF 的开源替代品：

*   [http://fmj-sf.net/](http://fmj-sf.net/)

我没有使用它，但它似乎确实有不少用户和最近提交的代码，这是一个好兆头......

# mongodb - 使用 group() 进行 mongodb 查询？

> ID：13929504
> 
> 赞同：0
> 
> 时间：2012-12-18T09:05:18.617
> 
> 标签：mongodb

这是我的收藏结构：

```
coll{
id:...,   
fieldA:{
   fieldA1:[
       {
           ...
       }
   ], 
   fieldA2:[
       {
           text: "ciao",
       },
       {
           text: "hello",
       },   
   ] 
} 
} 
```

我想提取`fieldA2`我收藏中的所有内容，但如果在其中`fieldA2`，`two or more times`我只想显示`one`。

我试试这个

```
Db.runCommand({distinct:’coll’,key:’fieldA.fieldA2.text’}) 
```

但什么都没有。这将返回`filedA1`集合中的所有内容。

所以我试试

```
db.coll.group( {

               key: { 'fieldA.fieldA2.text': 1 },

               cond: { } },

               reduce: function ( curr, result ) { },

               initial: { }

            } ) 
```

但这会返回一个空数组...

我怎么能这样做并查看执行时间？谢谢你很配...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:35:14.817

由于您运行的是 2.0.4（我建议升级），因此您必须通过 MR 运行它（我认为，也许有更好的方法）。就像是：

```
map = function(){
    for(i in this.fieldA.fieldA2){
        emit(this.fieldA.fieldA2[i].text, 1); 
        // emit per text value so that this will group unique text values
    }
}

reduce = function(values){
    // Now lets just do a simple count of how many times that text value was seen
    var count = 0;

    for (index in values) {
        count += values[index];
    }

    return count;
} 
```

然后会给你一个文档集合，其中`_id`是唯一`text`值，`fieldA2`字段`value`是集合中出现的次数。

同样，这是一个草案，未经测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:51:10.803

我认为答案比 Map/Reduce 更简单 .. 如果您只想要不同的值加上执行时间，以下应该可以工作：

```
var startTime = new Date()
var values    = db.coll.distinct('fieldA.fieldA2.text');
var endTime   = new Date();

print("Took " + (endTime - startTime) + " ms"); 
```

这将产生一个`values`包含不同 fieldA.fieldA2.text 值列表的数组：

```
[ "ciao", "hello", "yo", "sayonara" ] 
```

以及报告的执行时间：

```
Took 2 ms 
```

# asp.net - 调试时导出 IIS 进程内会话数据

> ID：13929507
> 
> 赞同：2
> 
> 时间：2012-12-18T09:05:29.173
> 
> 标签：asp.net, .net, asp.net-mvc, session, iis

我有一些 ASP.NET MVC 应用程序的生产 IIS 服务器。我遇到了一些我无法捕获的棘手错误。它链接到会话数据。如何导出/查看/查看此类用户会话？会话存储有默认的 IIS 配置——进程内。

* * *

**编辑**

顺便说一句，我有必要的适当用户会话 ID。

* * *

**编辑2**

好的，伙计们，即使我现在无法导出该数据，您能否指点我一些会话状态服务器或类似的东西，我可以使用它来存储会话数据并进一步查看它？我知道 SQL Server 可以，但是对于这样的问题来说它是非常沉重的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:43:44.327

Chris 遵循他的想法，您可以编写一个例程，将会话对象的内容输出到文件（一种自定义日志）。

```
//Controller Action where you store some objects in session
public ActionResult Index()
{
    var myObj = new { strTest = "test string", dtTestValue = DateTime.Now, listTest = new List<string>() { "list item 1", "list item 2", "list item 3"  }};
    Session["test1"] = "Test";
    Session["test2"] = myObj;

    return View();

}

//Controller Action where you output session objects to a file 
[HttpPost]
public ActionResult Index(FormCollection form)
{
    //Routine to write each sessionObject serialized as json to a file 
    foreach (string key in Session.Keys)
    {
        var obj = Session[key];
        JavaScriptSerializer serializer = new JavaScriptSerializer();
        using (System.IO.StreamWriter file = new System.IO.StreamWriter(@"C:\Users\Public\CustomAspNetLog.txt", true))
        {
            file.WriteLine(DateTime.Now.ToString() + "\t" + serializer.Serialize(obj));
        } 
    }
    return View();
} 
```

如果您需要经常调用该例程，您可以将它放在一些帮助类中，并在您需要时在控制器操作中调用它。然后，您可以在您认为必要的每个步骤中检查 Session 中的真实数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T09:09:17.780

不，您需要编写一个例程来在需要时导出会话数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T12:46:35.367

KSeen

存储会话比 StateServer （即分布式缓存提供程序）有更好的选择。

Alachisoft 提供完全免费的 NCache Express。您可以使用它来存储您的会话。这是您的操作方法。

在每台 Web 服务器上安装 NCache。定义分布式缓存：确保测试分布式缓存以确保其正常工作。修改 web.config 文件：添加 SessionState Provider 信息和刚刚创建的缓存的名称。

```
 <sessionState cookieless="false" regenerateExpiredSessionId="true"
   mode="Custom"
                customProvider="NCacheSessionProvider" timeout="1">
        <providers>
              <add name="NCacheSessionProvider"
                    type="Alachisoft.NCache.Web.SessionState.
                    NSessionStoreProvider"
                    cacheName="myreplicatedcache" 
        writeExceptionsToEventLog="false"
                    AsyncSession="false"/>
        </providers>
  </sessionState> 
```

请注意，Version=3.2.1.0 应该与您下载的特定 NCache Express 版本相匹配。完成此操作后，您的 ASP.NET 应用程序就可以开始使用分布式会话了。

# c - POSIX 消息队列 - 打开时出错：参数无效

> ID：13929511
> 
> 赞同：8
> 
> 时间：2012-12-18T09:05:33.567
> 
> 标签：c, linux, qt, message-queue

我在 linux 上创建消息队列时遇到了麻烦。我得到的错误是“无效参数”。我必须强调的另一件事是代码是 Qt 项目的一部分。

常见的错误是名称不以 (/) 开头并且 arg 的数量不正确，但我已经检查了这些！

这是我要运行的代码：

```
#define MQ_TEST_PATH            "/test_queue"
#define MQ_MAX_MSG_SIZE         256
#define MQ_MAX_MSG_COUNT        20

struct mq_attr mqAttr;
mqAttr.mq_maxmsg = MQ_MAX_MSG_COUNT;
mqAttr.mq_msgsize = MQ_MAX_MSG_SIZE;

mq_unlink(MQ_TEST_PATH);

mode_t mode =  S_IRUSR | S_IWUSR;
int oflags = O_WRONLY | O_CREAT | O_EXCL;

mqd_t mqd;
mqd = mq_open(MQ_TEST_PATH, oflags, mode, &mqAttr);

if(mqd < 0){
    perror("Error on open");
    qDebug()<<mqd;
    return 0;
}

mq_close(mqd);
mq_unlink(MQ_TEST_PATH); 
```

输出：

```
Error on open: Invalid argument
-1 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-18T09:16:16.173

**人 mq_open**

> `EINVAL` `O_CREAT` 在 中指定 `oflag`，但`attr`不是`NULL`，但`attr->mq_maxmsg`或`attr->mq_msqsize`无效。这两个字段都必须大于零。在非特权（没有`CAP_SYS_RESOURCE`能力）的进程中，`attr->mq_maxmsg`必须小于或等于`msg_max` 限制

**人 mq_overview**

> /proc/sys/fs/mqueue/msg_max

> msg_max 的默认值为 10。

# linux - 如何在 Linux 上启用 ccache

> ID：13929514
> 
> 赞同：10
> 
> 时间：2012-12-18T09:05:39.947
> 
> 标签：linux, gcc, gnu, ccache

`ccache`关于在 GNU/Linux上启用的文档很少。这是来自[launchpad.net](http://launchpad.net)的回复：

> 目前，我认为启用 ccache 的最佳方法是将“/usr/lib/ccache”添加到路径的前面。如果要默认为所有用户启用它，请更改 /etc/environment 中的 PATH 变量。

有人可以给我更多关于启用的信息`ccache`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-01-06T15:53:31.153

## 下载最新版本的[ccache](https://ccache.samba.org/)以获得更好的性能。

**下载后，请按照以下步骤操作：**

**A) 使用以下命令 tar 文件：**

```
 $tar -xvf ccache-3.2.4.tar.bz2

 Note : I'm using ccache 3.2.4 Version.You can download the latest one. 
```

**B) 进入 ccache-3.2.4 文件夹并运行以下命令：**

```
 $./configure
 $./make 
 $ sudo make install 
```

**C）转到您的 .bashrc 并插入以下内容：**

```
 export CCACHE_DIR=/home/user_name/.ccache
 export CCACHE_TEMPDIR=/home/user_name/.ccache

 Note : Fill user_name with your User Name 
```

**D) 保存你的 Bashrc 并获取它**

```
 $ source ~/.bashrc 
```

**E) 要检查 ccache 是否正常工作，请键入：**

```
 ccache -M 10G : To Set the ccache Size to 10GB 
```

**F) 要检查 ccache 是否正常工作，请键入：**

```
 ccache -s : To check ccache statistics 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-27T17:06:24.577

至少有两种方法：

i) 覆盖 Makefile 中的`CC`,`CXX`​​ , ... 标志。在 R 框架内，读取一个系统和可选的用户配置文件，我简单地设置

```
VER=4.7
CC=ccache gcc-$(VER)
CXX=ccache g++-$(VER)
SHLIB_CXXLD=g++-$(VER)
FC=ccache gfortran
F77=ccache gfortran 
```

`gcc`这也允许我在版本之间来回切换。现在*所有*涉及 R 的编译都使用`ccache`.

`/usr/local/bin/`ii) 对于其他用途，我已经部署了之前检查过的事实`/usr/bin`。所以可以做

```
root@max:/usr/local/bin# ls -l gcc
lrwxrwxrwx 1 root root 15 Jan 27 11:04 gcc -> /usr/bin/ccache
root@max:/usr/local/bin# ./gcc --version
gcc (Ubuntu/Linaro 4.7.2-2ubuntu1) 4.7.2
Copyright (C) 2012 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

root@max:/usr/local/bin# 
```

现在`gcc`通过以下方式调用`ccache`：

```
edd@max:/tmp$ cp -vax ~/src/progs/C/benfordsLaw.c .
`/home/edd/src/progs/C/benfordsLaw.c' -> `./benfordsLaw.c'
edd@max:/tmp$ time /usr/local/bin/gcc -c benfordsLaw.c 

real    0m0.292s
user    0m0.052s
sys     0m0.012s
edd@max:/tmp$ time /usr/local/bin/gcc -c benfordsLaw.c 

real    0m0.026s
user    0m0.004s
sys     0m0.000s
edd@max:/tmp$ 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-27T16:54:36.850

[ccache 手册](https://ccache.dev/manual/latest.html)有一节叫做[运行模式](https://ccache.dev/manual/latest.html#_run_modes)，描述了激活 ccache 的官方方法，所以我建议阅读手册。

此外，正如您已经指出的，Linux 发行版通常会设置一个 /usr/lib/ccache 目录，该目录旨在添加到 PATH 之前。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-19T06:36:27.197

Another possibility (instead of `export CC=ccache` commented by Keltar), if `$HOME/bin/` is listed in your `$PATH` before `/usr/bin/`, would be to make a symlink

```
 ln -s /usr/bin/ccache $HOME/bin/gcc 
```

Then every [execvp(3)](http://linux.die.net/man/3/execvp) of `gcc` would find that symlink

# objective-c - [__NSArrayM insertObject:atIndex:]: object cannot be nil - 如何确定错误在哪里？

> ID：13929518
> 
> 赞同：6
> 
> 时间：2012-12-18T09:06:07.940
> 
> 标签：objective-c, ios, nsarray, null, nserror

我有一个带有异步事件的大项目，有时我有错误 **[__NSArrayM insertObject:atIndex:]: object cannot be nil**，但我不知道在哪里抛出这个错误。我怎样才能捕捉到这个错误？我在进行操作 insertobject:atIndex 的任何地方都进行断言，但什么也没有。

这是堆栈：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '***    -[__NSArrayM insertObject:atIndex:]: object cannot be nil'

*** First throw call stack:

(0x34c352a3 0x32f4597f 0x34b7f8d9 0xc48db 0xc3ced 0xc3b41 0x1178d9 0x148aed 0x103cfd    0x102fc9 0x101f95 0x35f25595 0x35f7a13b 0x35f7a081 0x35f79f65 0x35f79e89 0x35f795c9 0x35f794b1 0x35f67b93 0x35f67833 0xd820b 0x35fc8275 0x3604aea9 0x326efa6f 0x34c0a5df 0x34c0a291 0x34c08f01 0x34b7bebd 0x34b7bd49 0x350b82eb 0x35f5a301 0x62e45 0x62de0)

libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-18T09:11:19.520

检查代码崩溃位置的一个好方法是：

1) 转到 Xcode 中的断点选项卡。

2) 点击底部的“+”按钮。

3）添加异常断点

a) 在中断选项卡中同时选择：

```
 i) on Throw 

  ii) on Catch 
```

并构建和运行。

4) 这些断点会告诉你应用程序在 90% 的情况下崩溃的确切位置。

希望这对您有所帮助。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T09:50:31.107

有时如果你找不到它抛出的异常。只需尝试`symbolic breakpoints`在您的项目中添加这些。然后运行

```
objc_exception_throw
 malloc_error_break
 [NSException 引发]

```

在你的`Xcode`goto`Product -> Debug -> Create Symbolic Breakpoint`中。输入上面提到的每个断点，`Symbol`然后按`Done`或者您可以通过转到`Breakpoint navigator (cmd + 6)`左下角找到`+`符号来创建，然后单击该`+`符号`Add symbolic breakpoint`。现在尝试运行，它会将您带到崩溃的特定行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-27T08:59:07.897

认为您需要处理 Array 中的空值。它对我有用，例如：

```
if ( array ! = nil ) {
    NSLog(@"name is nil");
} else {
    // addobject to array 
} 
```

* * *

## 回答 #4

> 赞同：-8
> 
> 时间：2012-12-18T09:09:01.350

显然，您插入的对象不应为零。核实！

# java - 将 Javadoc 位置分配给 Eclipse 中的 Maven 托管依赖项，其中 Javadoc 是手动安装的

> ID：13929521
> 
> 赞同：2
> 
> 时间：2012-12-18T09:06:20.570
> 
> 标签：java, eclipse, maven, m2eclipse

我从 oracle 网站下载了 jdk api 文档，我真的很想在使用内容助手时看到它...

由于公共存储库中没有“javaee-api”javadoc，因此我使用命令手动将其安装到本地存储库：

```
mvn install:install-file -Dfile=jdk-6-javadoc-all.zip -DgroupId=javax 
  -DartifactId=javaee-api -Dversion=6.0 -Dpackaging=zip -Dclassifier=javadoc 
```

然后我尝试了：

1.  解压 jdk，并仅重新压缩 api 文档，以确保“package-info”内容位于 zip 文件的顶层
2.  然后我从 project->properties->java build path 分配 javadoc 位置....但是每次我“确定”并关闭对话框时，javadoc 位置自动切换回“none”...

所以我创建了一个没有 maven 的新项目，并将 javaee-api.jar 添加到项目中，附加 javadoc ......并且 javadoc 显示为我在我的测试 java 文件中键入的内容。

但是，它仍然在所有 maven 管理的项目中显示没有 javadoc ......即使我重新启动了 eclipse，从提示符清理并安装，删除并重新导入项目......它不起作用！

相关的maven依赖xml：

```
<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-api</artifactId>
    <version>6.0</version>
    <scope>provided</scope>
</dependency> 
```

我在网上搜索了很多，包括这里的stackoverflow，但仍然没有工作~这真的让我很头疼......有人有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:49:58.560

让你在你的 pom 文件中有依赖：

```
<dependency>
<groupId>javax</groupId>
<artifactId>javaee-api</artifactId>
<version>6.0</version>
<scope>provided</scope>
</dependency> 
```

[从http://download.oracle.com/otn-pub/java/java_ee_sdk/6u2-nojdk/javadoc-6.0.1.jar](http://download.oracle.com/otn-pub/java/java_ee_sdk/6u2-nojdk/javadoc-6.0.1.jar)下载 javadoc到当前文件夹。

安装 javadoc：

mvn install:install-file -Dfile=javadoc-6.0.1.jar -DgroupId=javax -DartifactId=javaee-api -Dversion=6.0 -Dpackaging=jar -Dclassifier=javadoc

现在可以打开 Maven Dependency，右键单击 javaee-api-6.0.jar，选择 Maven > Open JavaDoc。

（如果你使用 NetBeans 可以在 javaee-api-6.0.jar 包附近看到 J 字母）

# git - Git 还原失败

> ID：13929526
> 
> 赞同：15
> 
> 时间：2012-12-18T09:06:35.843
> 
> 标签：git, git-commit, git-revert

我做了几次提交（commit1/2/3），我改变了我的工作目录而没有隐藏。然后我想回到几个提交前。所以我 git revert commit1 commit2 commit3，但我被告知要提交我的更改（commit4），所以我这样做了，然后我再次 git revert commit1 commit2 commit3 commit4，但我有一条消息

> 错误：cherry-pick 或 revert 已经在进行中提示：尝试“git cherry-pick (--continue | --quit | --abort)”

当我运行 git branch -va 时，HEAD 指向提交 3。

我不太明白发生了什么。我现在应该怎么做才能使事情恢复原状？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-19T07:39:18.277

最好使用干净的索引和工作树启动还原。
否则，在先前的还原正在进行时进行第二次还原（在新提交之上）会导致该错误消息。

由于您仍在`commit 3`，您可以：

*   `git cherry-pick --quit`（从[这个线程](http://comments.gmane.org/gmane.comp.version-control.git/185716)中，它告诉 revert 离开`HEAD`并让开。），
*   检查您的索引和工作树（git 状态），
*   进行任何调整以获得干净的状态（如新的提交），
*   然后重新做你的`git revert`.

[（您可以在“ Rollback to Previous Commit - Github for MAC (a revert is already in progress)](https://stackoverflow.com/questions/12858416/rollback-to-previous-commit-github-for-mac-a-revert-is-already-in-progress) ”中看到其他选项）

如果您只是想忘记这三个提交，请不要​​忘记[`git reset`](http://git-scm.com/2011/07/11/reset.html)（尽管这会使您强制 push: `git push --force`，以便发布该分支的历史记录。如果其他合作者已经从同一分支中撤出，您的方法，使用`git revert`,是一个更好的）

# vb.net - 什么是事件参数“sender”和“e”

> ID：13929529
> 
> 赞同：5
> 
> 时间：2012-12-18T09:06:40.363
> 
> 标签：vb.net

我正在努力理解这些论点。
它们是自动生成的，我不需要考虑太多，但如果我想从表单的其他部分调用这些事件之一，那么我需要为这些参数提供值 - 这并不容易，因为我仍然不确定他们的意思。

这是我想参加的活动`Call`：

```
Private Sub stringButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles stringButton.Click
    Dim outString As String
    Select Case stringTextBox.Text
        Case ""
            outString = "You entered an empty string"
        Case "10"
            outString = "10"
        Case Else
            outString = "Your string is not covered by the cases"
    End Select
    strResultTextBox.Text = outString
End Sub 
```

下面是调用方法：

```
Private Sub stringTextBox_KeyDown(ByVal sender As System.Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles stringTextBox.KeyDown
    If e.KeyCode = Keys.Enter Then
        Call stringButton_Click(Me, Me) '<<(Me,Me) is my incorrect attempt
    End If
End Sub 
```

我应该使用什么论据，为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T09:13:11.643

不要从代码的其他部分调用事件处理程序！这是非常草率的编码。使用您需要的参数创建一个单独的方法来满足您的需要，并从事件处理程序和表单的任何其他部分调用它，例如

```
Private Function String GetResponseMessage(ByVal input as String)
    Select Case input
        Case ""
            Return "You entered an empty string"
        Case "10"
            Return "10"
        Case Else
            Return "Your string is not covered by the cases"
    End Select
End Function

Private Sub stringButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles stringButton.Click
    Dim outString As String=GetResponseMessage(stringTextBox.Text)
    strResultTextBox.Text = outString
End Sub 
```

**sender**和**e**参数是事件处理程序的标准签名。Sender 是引发事件的对象，*e*包含事件的数据。.NET 中的所有事件都包含此类参数。

*EventArgs*是所有事件参数的基类，对事件没有多说。一些事件使用派生类来提供更多数据，例如。[KeyPress](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keypress.aspx)事件使用KeyEventArgs 类，该类包含在其[KeyChar](http://msdn.microsoft.com/en-us/library/system.windows.forms.keypresseventargs.keychar.aspx)属性中按下的实际键。

这是基本的 .NET 编程内容，您应该花一些时间了解 .NET 事件和 Windows 窗体，而不是相信自动生成的代码

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T09:10:35.987

Sender 用于指定哪个对象产生了事件，e 是事件数据本身。例如，通常当您单击表单中的按钮时，“发送者”将是按钮，而 e 将是鼠标事件。

在你的情况下，你可以简单地改变

```
Call stringButton_Click(Me, Me) 
```

到

```
Call stringButton_Click(Nothing, EventArgs.Empty) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T09:23:01.060

您可以通过创建一个新方法来做到这一点。不要调用事件处理程序。

```
Public sub abcd()
Dim outString As String
Select Case stringTextBox.Text
    Case ""
        outString = "You entered an empty string"
    Case "10"
        outString = "10"
    Case Else
        outString = "Your string is not covered by the cases"
End Select
strResultTextBox.Text = outString
end sub 
```

从你想要的地方调用这个方法

```
Private Sub stringButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles stringButton.Click
abcd()
End Sub 
```

并由此

```
Private Sub stringTextBox_KeyDown(ByVal sender As System.Object, ByVal e As 
 System.Windows.Forms.KeyEventArgs) Handles stringTextBox.KeyDown
If e.KeyCode = Keys.Enter Then
    abcd()
End If
End Sub 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-21T14:48:54.080

如上所述，最好将您的代码移动到一个单独的函数中，但这里有一个解决方法： `call stringButton_Click(Nothing,Nothing)`

# iphone - Twitter 是否可以在 iOS 的后台自动分享？

> ID：13929530
> 
> 赞同：5
> 
> 时间：2012-12-18T09:06:43.353
> 
> 标签：iphone, ios, twitter

我想在 Twitter 墙上分享一个 Twitter 提要，其中包含一张图片和一些文字。我想要从 iOS 4.3 到 iOS 6.0.1 的支持。是否可以在没有发送/共享按钮的情况下在后台共享？我该如何实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T03:13:48.063

您需要发送的 API 调用是：

[https://dev.twitter.com/docs/api/1.1/post/statuses/update_with_media](https://dev.twitter.com/docs/api/1.1/post/statuses/update_with_media)

当然，在进行该调用之前，您需要通过 xAuth/OAuth 向 Twitter 进行身份验证。除非你得到 Twitter 的特别许可，否则你似乎需要使用 OAuth，

[https://dev.twitter.com/docs/oauth/xauth](https://dev.twitter.com/docs/oauth/xauth)

为了请求后台，使用 Grand Central Dispatch 可能是有意义的——除非你有很多不同的 Twitter 请求要发送。在这种情况下，我会选择`NSOperationQueue`where `maxConcurrentOperationCount = 1`。请参阅以下内容：

[http://www.fieryrobot.com/blog/2010/06/27/a-simple-job-queue-with-grand-central-dispatch/](http://www.fieryrobot.com/blog/2010/06/27/a-simple-job-queue-with-grand-central-dispatch/)

[http://www.raywenderlich.com/19788/how-to-use-nsoperations-and-nsoperationqueues](http://www.raywenderlich.com/19788/how-to-use-nsoperations-and-nsoperationqueues)

尽管如此，由于 OAuth 是如此痛苦，因此使用第三方库可能是有意义的。我以前从未使用过它，但这里有一个使用 MGTwitterEngine 的示例：

[Twitter 在 iOS 上的 statuses/update_with_media 返回 500 错误](https://stackoverflow.com/questions/7316776/twitters-statuses-update-with-media-on-ios-returns-500-error)

如果您能够将使用限制为 iOS 5+，那么我强烈建议您使用该`SLRequest`对象。这种方法的优点是您可以直接与 iOS 用户帐户集成，因此他们不必通过 UIWebView 或一些俗气的东西进行身份验证。

为此，您只需在以下函数中插入适当的 Twitter API url`requestForServiceType:requestMethod:URL:parameters:`并获取您的`SLRequest`对象。然后分配`ACAccount`从`ACAccountStore`using获得的适当 Twitter `requestAccessToAccountsWithType:options:completion:`。最后打电话给`performRequestWithHandler`，然后它会异步执行你的请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T10:49:44.537

是的，但是您需要为您和授权者找到一些 1.1 API 包装器（生成 API 请求、发送它们等的东西）（MGTWitter 引擎工作正常）。我有一个[用于共享（仅限文本）和获取 iOS 4+ 用户信息的工作解决方案](https://github.com/maniak-dobrii/MDTwitterPoster)。

关于背景部分 - 这取决于您如何实现它（即通知或连续后台执行或 gps callbacs 等......）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T06:23:33.363

以下代码不会在后台发布，但可以跨 ios 版本发布...您可以对 ios 版本使用条件，如下面的代码。这是我已经实现的工作代码，它适用于 ios 5 和 6。请签入ios 4 来确认。我认为它应该可以工作。

```
#import "Twitter/Twitter.h"
#import "Social/Social.h"

-(IBAction)tweetPost:(id)sender
{
 if ([self  isSocialAvailable])
 {
  SLComposeViewController *tweetComposer=[SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];

  if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter]) {
   SLComposeViewControllerCompletionHandler __block completionHandler=
   ^(SLComposeViewControllerResult result){

    [tweetComposer dismissViewControllerAnimated:YES completion:nil];

    switch(result){
     case SLComposeViewControllerResultCancelled:
     default:
     {
      NSLog(@"Cancelled.....");
     }
      break;
     case SLComposeViewControllerResultDone:
     {
      NSLog(@"Posted....");
      UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Sent"
                                                       message:nil
                                                      delegate:nil
                                             cancelButtonTitle:@"Dismiss"
                                             otherButtonTitles: nil];
      [alert show];
     }
      break;
    }};
   NSString*message = @"posting to twitter test ios 6";
   [tweetComposer setInitialText:message];
   [tweetComposer addImage:[UIImage imageNamed:@"2.jpg"]];
   [tweetComposer addURL:[NSURL URLWithString:@"http://www.youtube.com/watch?v=GoZ2Be2zLq8"]];

   [tweetComposer setCompletionHandler:completionHandler];
   [self presentViewController:tweetComposer animated:YES completion:nil];
  }
 }
 else
 {
  TWTweetComposeViewController *twitter= [[TWTweetComposeViewController alloc] init];

  [twitter addImage:[UIImage imageNamed:@"2.jpg"]];
  [twitter addURL:[NSURL URLWithString:@"http://www.youtube.com/watch?v=GoZ2Be2zLq8"]];
  [twitter setInitialText:@"Tweet from iOS 5 app using the Twitter framework."];

  [self presentModalViewController:twitter animated:YES];

  twitter.completionHandler = ^(TWTweetComposeViewControllerResult result)
  {
   NSString *title = @"Tweet Status";
   NSString *msg;

   if (result == TWTweetComposeViewControllerResultCancelled)
    msg = @"Tweet compostion was canceled.";
   else if (result == TWTweetComposeViewControllerResultDone)
    msg = @"Tweet composition completed.";

   // Show alert to see how things went...
   UIAlertView* alertView = [[UIAlertView alloc] initWithTitle:title message:msg delegate:nil cancelButtonTitle:@"Okay" otherButtonTitles:nil];
   [alertView show];
  };
 }
}

-(BOOL)isSocialAvailable {
 return NSClassFromString(@"SLComposeViewController") != nil;
} 
```

您需要包含三个名为 social、adSupport 和 Accounts 的框架。在 twitter 提要帖子中检查哪个不需要。希望对你有帮助。

# qt - 将按钮添加到 QTabWidget 选项卡

> ID：13929531
> 
> 赞同：2
> 
> 时间：2012-12-18T09:06:44.720
> 
> 标签：qt, qtabwidget

我创建了一个`QTabWidget`，它的标签计数在触发信号时动态变化。我添加了如下标签：

```
QWidget *centralWidget = new QWidget();
ui->tabWidget->addTab(centralWidget, "tab header"); 
```

现在一切正常，但问题是我想向这些选项卡添加按钮。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:55:27.460

您可以将任何子`QWidget`类设置为中心小部件，也可以将任何子`QWidget`类添加到中心小部件。

例如，如果您创建一个名为 的`Qt Designer Form Class`（Qt Creator 称之为由 .cpp、.h 和 .ui 文件组成的类）`MyCentralWidget`，您可以执行以下操作：

```
#include "MyCentralWidget.h"

// ...

QWidget *centralWidget = new MyCentralWidget();
ui->tabWidget->addTab( centralWidget, "tab header" ); 
```

然后，您可以使用 Qt Designer（或 Qt Creator）以`MyCentralWidget`您想要的任何方式进行设计。

另一个示例是将小部件添加到中央小部件内的布局中：

```
#include "MyCentralWidget.h"
#include <QtGui/QGridLayout>

// ...

QWidget *centralWidget = new QWidget();
centralWidget->setLayout( new QGridLayout() );
centralWidget->layout()->addWidget( new MyCentralWidget() );
ui->tabWidget->addTab( centralWidget, "tab header" ); 
```

# java - MS-SQL 快照隔离和休眠行为

> ID：13929532
> 
> 赞同：1
> 
> 时间：2012-12-18T09:06:47.390
> 
> 标签：java, sql-server, sql-server-2008, hibernate, sql-server-2005

我的疑问与SQLserver 2008中快照隔离的行为及其在hibernate中的相应配置有关

[我指的是以下链接](http://blog.grogscave.net/2010/10/using-snapshot-isolation-with-sql.html)

**Step1：**要启用快照隔离，我必须在数据库中运行以下语句：

```
ALTER DATABASE MyDatabase
SET ALLOW_SNAPSHOT_ISOLATION ON

ALTER DATABASE MyDatabase
SET READ_COMMITTED_SNAPSHOT ON 
```

**Step2：**我在 hibernate.cfg.xml 中设置了以下属性

```
<!-- Hibernate Isolation Level [READCOMMITED SNAPSHOT ISOLATION]-->    
<property name=”hibernate.connection.isolation”&gt;4096</property> 
```

我观察到的是，当我从配置文件中省略 Step2 时，快照隔离在我的 java 程序中不起作用。

由于隔离级别是在数据库中设置的，所以它不应该与休眠配置无关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:35:59.763

因为它设置了 JDBC 事务隔离级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T12:30:33.750

请参阅[此](http://www.brentozar.com/archive/2013/01/implementing-snapshot-or-read-committed-snapshot-isolation-in-sql-server-a-guide/)链接：

> （查询必须明确地执行此操作——例如运行命令“SET TRANSACTION ISOLATION LEVEL SNAPSHOT”，或者将其设置在它们的连接字符串中。）

# java - 使用robotium单击列表视图中的图像时，可扩展的列表视图滚动

> ID：13929541
> 
> 赞同：1
> 
> 时间：2012-12-18T09:07:33.963
> 
> 标签：java, android, unit-testing, robotium

当我使用 Robotium 单击可扩展列表视图的第一项上的图像时，如下所示：

```
ListView listview = getCurrentListView().getChildAt(1); //get feed listview.
for(ImageView view : solo.getCurrentImageViews(listview))
{
   if(view.getId() == R.id.image) //all images in the feed listview shares the same ID.
   {
      solo.clickonview(view);
      break;  //get the first image then break the loop.
   }
} 
```

可展开的列表视图滚动。使用 logcat，我敢肯定，我得到了第一张图片。但是当solo.clickonview 时，它不起作用，并且listview 开始滚动到最后一个。为什么会这样？
有什么方法可以完成这个场景吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:22:00.407

在单击并将滚动设置为 false 之前使用以下方法：

```
waitForView(View view, int timeout, boolean scroll) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:51:36.420

它会点击这张图片吗？我不确定，如果您为 getCurrentImageViews 提供正确的父级。

尝试使用这个：

```
for (View v : solo.getCurrentImageViews()) {
     if (v.getId() == R.id.image)
          solo.clickonview(v);
} 
```

# ios - 修改核心数据实体内容导致故障

> ID：13929542
> 
> 赞同：0
> 
> 时间：2012-12-18T09:07:35.323
> 
> 标签：ios, core-data, plist

我的 ios 应用程序有两个名为`Scout`和的实体`MeritBadge`。的内容`MeritBadge`是从 plist 文件中读取和存储的。`AppDelegate`检查指示 plist 文件版本的标志，如果有更新的版本添加了更多条目，它会删除`MeritBadge`实体中的所有条目并通过读取 plist 重新添加。

我在 plist 中添加了一个额外的条目，当我阅读`MeritBadge`实体时，我得到了新添加的条目。

但是，如果我以实体名称读取 db `ScoutMeritBadge`，我将获得除新添加的徽章之外的所有徽章。

`MeritBadge`这是否意味着如果我从 plist 向实体添加新条目，我需要重新构建数据库？

任何提示将不胜感激。

# three.js - 如何将 THREE.GeometryUtils.center 与 .obj 模型一起使用

> ID：13929544
> 
> 赞同：4
> 
> 时间：2012-12-18T09:07:38.260
> 
> 标签：three.js, center

我使用 THREE.OBJLoader 导入模型 obj 我使用来自[https://github.com/mrdoob/three.js/blob/master/examples/webgl_loader_obj.html#L75](https://github.com/mrdoob/three.js/blob/master/examples/webgl_loader_obj.html#L75)的代码并插入 THREE.GeometryUtils.center 以将模型移动到原来的

var loader = new THREE.OBJLoader(); loader.addEventListener（'加载'，函数（事件）{

```
 var object = event.content;

                for ( var i = 0, l = object.children.length; i < l; i ++ ) {

                    object.children[ i ].material.map = texture;

                }

                object.position.y = - 80;
                scene.add( object );

            });
            THREE.GeometryUtils.center(object);
            loader.load( 'obj/001939.obj'); 
```

我在 firefox 中显示错误是“a.computeBoundingBox() is not function”。不知道为什么显示它是错误的。使用 firfox 版本 17.0.1

# java - Primefaces 3.4 单元内可编辑表在验证失败后不会将 inputtext-cell 标记为红色

> ID：13929546
> 
> 赞同：1
> 
> 时间：2012-12-18T09:07:49.690
> 
> 标签：java, jsf, datatable, primefaces

我正在尝试与[Primefaces 3.4 in-cell editable table 相同的方法，将 inputtext-cell 标记为 red after failed validation](https://stackoverflow.com/questions/13045803/primefaces-3-4-in-cell-editable-table-marks-inputtext-cell-as-red-after-failed-v)。我的问题是验证失败后我无法使单元格标记为红色，但他可以。只有在我点击取消然后再次点击编辑后，单元格才会被标记为红色，与他相同，因为输入尚未重置。

这是我所做的：

```
<p:dataTable var="car" value="#{tableBean.carsSmall}" editable="true">  
    <p:ajax event="rowEdit" listener="#{tableBean.onEdit}" />  
    <p:ajax event="rowEditCancel" listener="#{tableBean.onCancel}"  />  
    <p:column headerText="Model" style="width:125px">  
        <p:cellEditor>  
            <f:facet name="output">  
                <h:outputText value="#{car.model}" />  
            </f:facet>  
            <f:facet name="input">  
                <p:inputText value="#{car.model}" required="true"/>  
            </f:facet>  
        </p:cellEditor>  
    </p:column>    
    <p:column headerText="Options">  
        <p:rowEditor />  
    </p:column>  
</p:dataTable> 
```

请告诉我上面的代码出了什么问题。我想亲自联系他，但我不能在这个网站上这样做。

# java - 当捕获异常而不是继续时，是否可以在循环中再次迭代？

> ID：13929547
> 
> 赞同：0
> 
> 时间：2012-12-18T09:07:52.677
> 
> 标签：java, exception, loops, try-catch, iteration

对不起，如果我的标题有点混乱。

我的程序正在做一些网络抓取，因此由于随机网络条件会捕获一些 SocketTimeoutException。现在，当捕获 SocketTimeoutException 时，会跳过该特定循环，因此我会错过一些数据。我确信当跳过的循环中的代码再次运行时一切都会好起来的。由于我正在抓取大量数据（> 100 万组数字），我不想记录异常循环并手动再次运行它们。有没有办法在捕获异常时再次运行相同的循环？

```
try{
    for(){
        someCode
        ...
    }
}catch(IOException){
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T09:09:48.090

只需将`try`-`catch`放在循环内

```
for () {

  try {
    // somecode
    // ..
  } catch ( IOException ioException ) {
    // handle
  }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T09:09:59.070

为什么不将异常处理放在循环中

```
for(){
     try{
         // someCode
     }catch(IOException e){
        //handle exception if necessary
     }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T09:11:21.230

你必须这样做。尝试在循环内捕获。

```
for(){
    try { 
            someCode
            ...
    } catch(IOException){
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T09:13:47.313

我想重做相同的循环迭代：

```
int i = 0;
int n = 15; // your n
for (i = 0; i < n; i++) {
    try {
        // some code
    } catch (Exception e) {
        i--;
    }
} 
```

但要小心无限循环！您应该添加一个 MAX_TRIES 管理。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-18T09:45:56.337

这个有问题

```
try{
    for(){
    //    someCode
        ...
    }
}catch(IOException){
  // Once exception happens your for() loop breaks !!!!!
} 
```

相反，这样做...

```
 for () {

      try {
        // somecode
        // ..
      } catch ( IOException ioException ) {
        // handle(do something) here, not throwing error which will break the loop
      }

    } 
```

# asp.net-mvc-3 - .Net MVC 3 视图未加载布局

> ID：13929548
> 
> 赞同：0
> 
> 时间：2012-12-18T09:07:57.647
> 
> 标签：asp.net-mvc-3, razor, partial-views

我创建了一个视图，它应该作为一个母版页（`_MasterAccount.cshtml`）使用以下代码：

```
<h1>TEST!!!!</h1>
@RenderBody()
<h1>TEST!!!!</h1> 
```

我尝试使用以下代码让另一个视图引用它：

```
@{ 
   ViewBag.Title = "My account - Options";
   Layout = "~/Views/Shared/_MasterAccount.cshtml";
 } 
```

我正在使用 RAZOR，但`_viewstart.cshtml`项目中没有

由于某种原因，布局被忽略了。当我放入不存在的路径时，它甚至不会引发异常。

请注意，已经有一个“主”母版页，我的母版页充当特定页面集的嵌套母版页。

该站点已由其他人开发，因此我怀疑有一段代码以某种方式使布局属性超载。问题是，我不知道在哪里看。

如果需要其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:43:38.860

在堆栈溢出的 2 个答案中找到了解决方案。

在系统中实现了一个视图引擎来定位母版页，因此**布局**字段正在被输入。按照[这个](https://stackoverflow.com/questions/632964/can-i-specify-a-custom-location-to-search-for-views-in-asp-net-mvc)答案。

因此，为了在 master 中实现 master，我选择了这个[解决方案](https://stackoverflow.com/questions/5357104/is-is-possible-to-specify-searchable-location-formats-for-an-mvc-razor-layout)，虽然它看起来有点乱。

# firefox - Firefox中的Svg灰度过滤器错误

> ID：13929555
> 
> 赞同：1
> 
> 时间：2012-12-18T09:08:23.593
> 
> 标签：firefox, svg, filter, svg-filters

我正在我目前正在处理的网站上使用 svg 过滤器。它应该使图像去饱和，当我悬停时，它们应该恢复到正常的彩色状态。我使用了一个在线教程，它在 Chrome、IE、safari 中运行良好。但在 Firefox 中，图像不显示，它只是 blanc，当你将鼠标悬停在它们上方时，它们会突然以彩色状态显示。我曾尝试寻找解决方案，但我发现的唯一类似情况是因为 ID 错误。

我的svg代码：

```
<svg xmlns="http://www.w3.org/2000/svg">
 <filter id="grayscale">
  <feColorMatrix type="matrix" values="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"/>
 </filter>
</svg> 
```

我的CSS代码：

```
#thumbnails li img
{
    width: 31%;
    filter: url(filters.svg#grayscale); /* Firefox 3.5+ */
    filter: gray; /* IE6-9 */
    -webkit-filter: grayscale(1); /* Google Chrome & Safari 6+ */
    margin-bottom: 1.3%;
    margin-top: 1.3%;
}

#thumbnails img:hover 
{
    filter: none;
    -webkit-filter: grayscale(0);
} 
```

我在 Firefox 中遇到的控制台错误是：

> 解析“过滤器”的值时出错。声明被删除

如果您需要额外的信息，我很乐意提供。提前非常感谢。提摩太

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:11:32.697

供将来参考（因为这是一个很老的问题，我不确定 OP 是否还需要这个......）

.SVG：

```
<?xml version="1.0" encoding="UTF-8"?>
<svg version="1.1"
     baseProfile="full"
     xmlns="http://www.w3.org/2000/svg">
    <filter id="grayscale">
        <feColorMatrix type="matrix" values="0.3333 0.3333 0.3333 0 0
                                             0.3333 0.3333 0.3333 0 0
                                             0.3333 0.3333 0.3333 0 0
                                             0      0      0      1 0"/>
    </filter>
</svg> 
```

CSS：

```
.YOUR_DIV img {
    width: 260px;
    height: 190px;
     filter: grayscale(100%); /* Current draft standard */
    -webkit-filter: grayscale(100%); /* New WebKit */
    -moz-filter: grayscale(100%);
    -ms-filter: grayscale(100%); 
    -o-filter: grayscale(100%); /* Not yet supported in Gecko, Opera or IE */ 
    filter: url(PATH/TO/SVG/**filter**.svg#grayscale); /* Gecko */
    filter: gray; /* IE */
    -webkit-filter: grayscale(1); /* Old WebKit */
}

.YOUR_DIV img:hover {
    filter: none;
    -webkit-filter: grayscale(0);
} 
```

*请务必更改 CSS 中过滤器的路径和名称以匹配您的 file.svg 和 ID。

# windows-phone - Windows Phone 8 - 截图

> ID：13929558
> 
> 赞同：2
> 
> 时间：2012-12-18T09:08:33.720
> 
> 标签：windows-phone, screenshot

有没有办法以**编程**方式在 Windows Phone 8（或 7.1）上截屏？

对于Windows Phone 7/7.1，至少有一个非官方的解决方案：http: [//forum.xda-developers.com/showthread.php? t=1006331](http://forum.xda-developers.com/showthread.php?t=1006331)

但我不知道如何在我自己的应用程序中获得此功能。

此外，我打算不仅为我自己的应用程序截屏，还为其他应用程序（例如计时器触发）截屏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T07:05:20.610

您可以通过同时按下音量按钮和窗口键在 windows phone 8 中截屏。或者试试这个代码

```
var bmp = new WriteableBitmap(lbxDays, new TranslateTransform());
var width = (int)bmp.PixelWidth;
var height = (int)bmp.PixelHeight;
bmp.Render(lbxDays, new TranslateTransform());
using (var ms = new MemoryStream())
 {
 bmp.SaveJpeg(ms, width, height, 0, 100);
 ms.Seek(0, System.IO.SeekOrigin.Begin);
 var lib = new MediaLibrary();
 var dateStr = DateTime.Now.Ticks;
 var picture = lib.SavePicture(string.Format("screenshot"+dateStr+".jpg"), ms);
 var task = new ShareMediaTask();
 task.FilePath = picture.GetPath();
 task.Show();
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T06:08:41.890

*   您可以使用模拟器截取屏幕截图。
*   当您在模拟器上运行您的应用程序时，您可以在模拟器右侧看到一个双箭头按钮。
*   单击那个双箭头按钮，它将显示模拟器右侧的另一个窗口。
*   并点击屏幕截图选项卡并捕获屏幕截图。
*   您可以将屏幕截图保存到本地计算机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T21:44:33.710

您可以在模拟器上轻松执行此操作，运行您的应用程序，然后单击弹出另一个窗口的双箭头按钮，然后转到屏幕截图选项卡并捕获。或者，如果您有设备，请同时按 Widnows Home 和 Power。

# c# - 如何在richtextbox windows窗体c#上显示文件上传或下载进度

> ID：13929559
> 
> 赞同：0
> 
> 时间：2012-12-18T09:08:34.250
> 
> 标签：c#, progress-bar, richtextbox

我想设计用户界面，比如当用户在富文本框中拖放任何文件时，应该在富文本框上显示一个进度条，以显示文件上传和下载的进度。我无法在richtextbox 上显示进度条。所以任何人都可以指导我如何在richtextbox上显示进度条？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:16:21.243

最好的解决方案可能是在 RichTextBox 顶部叠加一个进度条，并在您希望显示进度条的位置隐藏/显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:22:49.607

看看这个，也许你可以在你的 RichTextBox 中插入一个 OLE 对象。这是老派，但它肯定有效：

[http://www.codeproject.com/Articles/12135/Inserting-images-into-a-RichTextBox-control-the-OL](http://www.codeproject.com/Articles/12135/Inserting-images-into-a-RichTextBox-control-the-OL)

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-16T06:51:37.727

替代方法但更简单：在文本中显示进度，例如“ *Step Performed 12.25% ...* ”并替换进度的百分比部分。

# joomla - 如何在德德玛特的购物车中获取所有产品？

> ID：13929564
> 
> 赞同：2
> 
> 时间：2012-12-18T09:08:55.313
> 
> 标签：joomla, virtuemart

我是 Joomla 和 Virtuemart 的新手。我想获取/显示购物车中的所有产品（产品 ID、产品图像、产品数量），并在模板文件夹中的 index.php 中插入一些代码，如下所示：

```
foreach( $this->cart->products as $pkey =>$prow ) {
...                     
} 
```

但它在线 foreach 出错，任何人都可以帮助我我使用 Joomla 2.5 和 Virtuemart 2

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:50:17.100

如果你试图将上面的代码直接包含在 index.php 中肯定会出错。因为这里引用的 this 指针是 Cart 助手。这在 index.php 中是未知的。

如果您想在 index.php 中插入一些购物车功能，最好的方法是使用该模块。您可以在 public_html/modules/mod_cartinfo 中找到一些类似于 mod_cartinfo 的模块（此模块将返回购物车项目的详细信息。）

您可以找到模块主文件加载了 VM 购物车详细信息所需的一些 php 文件。

```
if (!class_exists( 'VmModel' )) require(JPATH_ADMINISTRATOR.DS.'components'.DS.'com_virtuemart'.DS.'helpers'.DS.'vmmodel.php');
 if (!class_exists( 'VmConfig' )) require(JPATH_ADMINISTRATOR . DS . 'components' . DS . 'com_virtuemart'.DS.'helpers'.DS.'config.php');
    if(!class_exists('VirtueMartCart')) require(JPATH_VM_SITE.DS.'helpers'.DS.'cart.php');
    $cart = VirtueMartCart::getCart(false); 
```

然后使用 $cart 代替 this->cart。

不要试图在你的 index.php 中包含这个代码部分。它每次都会加载。使用模块概念来实现这一点。[试试这个](http://docs.joomla.org/Creating_a_simple_module)

希望对你有帮助..

# php - 使用 PHP 解析带有命名空间的 SOAP XML 响应

> ID：13929566
> 
> 赞同：2
> 
> 时间：2012-12-18T09:08:57.540
> 
> 标签：php, xml, soap, namespaces, simplexml

我有这个丑陋的 XML，上面有很多命名空间，当我尝试用 simpleXML 加载它时，如果我指示第一个命名空间我会得到一个 xml 对象，但是带有其他命名空间的标签不会使其成为对象。这是 SOAP 响应

```
<?xml version="1.0" encoding="utf-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
            xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns8502="http://tempuri.org">
   <SOAP-ENV:Header>
     <Interface PartnerID="FastBooking" PartnerType="Test" Version="1.0.0" />
     <Credentials HotelID="AC00006" User="User" Password="123456" />
     <Client Ref ="123456789" TimeStamp="2012-12-14T12:24:25+0100"/>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
     <ServiceNameRQ xmlns="urn:wsTest">
         <GetRatesRS>
             <Rates>
                 <Rate RateID="12984" FromDate="2010-05-12" ToDate="2010-06-30" RateType="PUBLIC" RateCode="RAC" MinRate="100" MaxRate="1000" Currency="EUR" ReadOnly="No" FromRateID="11456">
                    <RateName>Rack Rate</RateName>
                 </Rate>
                 <Rate RateID="13219" FromDate="2010-07-12" ToDate="2010-12-31" RateType="PUBLIC" RateCode="NORMAL" MinRate="100" MaxRate="1000" Currency="EUR" ReadOnly="Yes">
                    <RateName>Normal Rate</RateName>
                     <R1 Name="Single Occupancy" MinRate="90.00" MaxRate="1500.00" />
                     <R2 Name="Double Occupancy" MinRate="120.00" MaxRate="2000.00" />
                     <R3 Name="2 Nights" MinRate="150.00" MaxRate="2000.00" />
                    </Rate>
                     </Rates>
            </GetRatesRS>
        </ServiceNameRQ>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope> 
```

这是我正在使用的 PHP 代码：

```
$result = $xml_query;
$result = stripslashes($result);

 $result = simplexml_load_string($result);
$namespacesMeta = $result->getNamespaces(true);
$mediaXML = $result->children($namespacesMeta['SOAP-ENV:Header']);

$Interface = $mediaXML->xpath('//Interface');
$Credentials = $mediaXML->xpath('//Credentials');
$Client = $mediaXML->xpath('//Client');

$attributesInterface = $Interface[0]['@attributes'];
$PartnerID = $attributesInterface['PartnerID'];
$PartnerType = $attributesInterface['PartnerType'];
$Version = $attributesInterface['Version'];

$attributesCredentials = $Credentials[0]['@attributes'];
$HotelID = $attributesCredentials['HotelID'];
$User = $attributesCredentials['User'];
$Password = $attributesCredentials['Password'];

$HotelID = filter_var($HotelID, FILTER_SANITIZE_MAGIC_QUOTES);
$User = filter_var($User, FILTER_SANITIZE_MAGIC_QUOTES);
$Password = filter_var($Password, FILTER_SANITIZE_MAGIC_QUOTES);
$Password = tchag3iba($Password); 
```

但我无法检索`SOAP-ENV:Body`( `GetRatesRS -> Rates -> Rate`)的内容

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T09:17:50.990

可以像这样访问速率数据：

**[演示](http://codepad.org/m9Qpigkt)**

```
$obj = simplexml_load_string($xml);

foreach($obj->children('http://schemas.xmlsoap.org/soap/envelope/')->Body->children('urn:wsTest')->ServiceNameRQ->GetRatesRS->Rates->Rate as $rate)
{
    echo (string)$rate->RateName . "\n";
} 
```

输出

> 机架率
> 正常率

如果你想要 Rate 属性，你可以像这样（在循环中）获得它们：

```
echo $rate->attributes()->RateID; 
```

您可以像这样阅读`R1`和`R2`元素：

```
foreach($obj->children('http://schemas.xmlsoap.org/soap/envelope/')->Body->children('urn:wsTest')->ServiceNameRQ->GetRatesRS->Rates->Rate as $rate)
{
    if(isset($rate->R1))
    {
       echo $rate->R1->attributes()->Name;
       echo $rate->R1->attributes()->MinRate;
    }
    if(isset($rate->R2))
    {
       echo $rate->R2->attributes()->Name;
       echo $rate->R2->attributes()->MinRate;
    }
} 
```

# c++ - 信号处理程序和本地状态

> ID：13929569
> 
> 赞同：4
> 
> 时间：2012-12-18T09:09:13.700
> 
> 标签：c++, unix, signals

我在 Unix 上使用 C++ 工作。

假设我有一个长时间运行的函数可以做某事，例如从文件中读取内容并解析它。在这个函数中，我将我从文件中读取的内容记录在一个局部变量`num_read`中。

我想在自定义信号处理程序中捕获 CTRL+c 并打印`num_read`.

我能想到的唯一方法是`num_read`在堆上分配并将其地址存储在我的信号处理程序可以访问的全局变量中。有没有更优雅的方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T09:36:55.813

答案是不。除了通过全局变量外，信号处理程序和其余代码之间没有任何通信方式*。*

此外，您只能在信号处理程序中做非常非常有限的事情。例如，您不能在 a`<<`上使用 a `std::ostream`，也不能调用`printf`。在 Unix 下处理信号的常用方法是在单独的线程中捕获它们。另一种方法（也适用于其他操作系统）是定义一个全局变量`sig_atomic_t`，它在信号处理程序中设置，并在主循环中轮询。（例如，在您的情况下，您可能会在每次 update 时轮询它 `num_read`。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T12:39:07.003

除了带有信号处理程序的传统 Unix 方式外，还有其他方式：

*   由于 Linux 内核 2.6.22 存在`signalfd()`功能。您可以获得一个**常用的文件描述符**并轮询它（使用`select`或`epoll`）以获取传入信号。所以当你处理一个信号时**，它们没有任何限制**——它只是普通的用户空间代码，所以你可以调用任何你想要的......
*   据我所知，对于 OS X，kqueue 中存在类似的功能（在此站点或互联网上搜索`EVFILT_SIGNAL`and `kqueue`）

# iphone - 我们可以在iphone的应用程序中找到其他应用程序的appstate吗

> ID：13929578
> 
> 赞同：3
> 
> 时间：2012-12-18T09:09:39.693
> 
> 标签：iphone, objective-c, ios

在我的应用程序中，我需要找出其他应用程序的 appstate。此应用程序适用于越狱设备，旨在上传到 cydia 商店。目前我正在开发 xcode 4.5.2 和 iOS 6。

例如，我有一个将在后台连续运行的应用程序 1，以及另一个应用程序 2。我想从 app1 跟踪 app2 的 appstate，*即*天气它处于活动状态、非活动状态、暂停状态。实际上，当 app2 处于活动状态时，我想从 app1 向服务器发送一些数据，其中 app1 在后台持续运行。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T23:38:29.903

当您声明 app2 在后台连续运行时，您可能只需将其状态保存在一个文件中，以便 app1 可以在其活动时立即读取它。App1 将数据写入另一个文件，以便 app2 可以读取它。这应该是最简单的方法，因为不需要私有 API，您只需要写入沙箱外的文件夹即可。要检测目录更改，您可能需要查看以下问题：[iPhone/iPad: Directory Change Notification](https://stackoverflow.com/questions/6067809/iphone-ipad-directory-change-notification)

# sql-server - 我可以通过 SQL Server Management Studio 调试 SQL 问题吗

> ID：13929579
> 
> 赞同：3
> 
> 时间：2012-12-18T09:09:41.533
> 
> 标签：sql-server

我正在安装一个程序，该程序经常由于 INSERT 语句中的错误参数或数据库权限问题而引发异常。我对 SQL Server 拥有完全的管理权限，最好记录失败的 INSERT 等以及它们失败的原因。来自 C# 代码的堆栈跟踪仅显示参数太长，但没有显示其中一个参数和值是什么。因此，通过 SQL Server Studio Management 解决 SQL 问题而不是对产品版本进行代码更改将是最简单的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T09:15:43.117

可以在 SQL Server Profiler 中查看参数的值（Sql Server Management Studio：工具 -> SQL Server Profiler）。它可以配置为将跟踪保存到数据库（如果您无法在测试环境中重现问题），并且只捕获某些调用（例如，您可以指定存储过程的名称）。这是带有所有参数的存储过程调用的分析器的屏幕截图： ![在此处输入图像描述](../Images/529d4d8024dbab6afca6820f29772822.png)

# sql - 如何将多个数据库的数据合并到一个具有相同架构的数据库中

> ID：13929582
> 
> 赞同：0
> 
> 时间：2012-12-18T09:09:50.083
> 
> 标签：sql, sql-server, sql-server-2005

我有一个具有相同架构的 5 个数据库，我想将所有数据复制到一个具有相同架构的数据库中，或者如何从数据库中的 *​​.mdf 文件中复制数据。我正在使用 sql server 2005

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:56:35.467

使用 T-SQL 复制数据库：

[sqlauthority](http://blog.sqlauthority.com/2009/07/29/sql-server-2008-copy-database-with-data-generate-t-sql-for-inserting-data-from-one-table-to-another-table/)

[http://blog.sqlauthority.com/2009/07/29/sql-server-2008-copy-database-with-data-generate-t-sql-for-inserting-data-from-one-table-to-另一张桌子/](http://blog.sqlauthority.com/2009/07/29/sql-server-2008-copy-database-with-data-generate-t-sql-for-inserting-data-from-one-table-to-another-table/)

使用向导复制数据库：

[科迪亚兹](http://www.kodyaz.com/sql-server-tools/sql-server-copy-database-wizard.aspx)

[http://www.kodyaz.com/sql-server-tools/sql-server-copy-database-wizard.aspx](http://www.kodyaz.com/sql-server-tools/sql-server-copy-database-wizard.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:19:48.507

我建议看看 Red Gate SQL Data Compare。这将使您能够合并两个数据库之间的数据，并直接控制在任何给定情况下哪个数据库获胜。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-18T16:08:18.377

如上所述，您还需要处理主键......

解决此问题的一种方法是向单个中央版本中的所有表添加“数据库 ID”。中央 PK 成为源表中的 PK，加上“数据库 ID”。通过这种方式，您在中央版本中拥有唯一的 PK，并且您可以判断该行来自哪个数据库。这就是[sql-hub](http://sql-hub.com "sql-hub")所做的——有一个免费许可证可以让您将其作为一次性任务执行——或者您可以为 SQL 中的每个数据库和表进行插入。

# sql - Informix 防止重复结果

> ID：13929583
> 
> 赞同：1
> 
> 时间：2012-12-18T09:09:53.393
> 
> 标签：sql, database, informix

我想找到一些数据，一些结果是重复的，但我想过滤掉重复的数据。

检索到的示例数据：

```
aaa, bbb, ccc, ddd, eee   <---Duplicate
aaa, qqq, eee, fff, hhh
bbb, rrr, ggg, lll, mmm
aaa, bbb, ccc, ddd, eee   <---Duplicate
aaa, bbb, ccc, ddd, eee   <---Duplicate
aaa, bbb, ccc, ddd, lll 
```

我想要的示例数据：

```
aaa, bbb, ccc, ddd, eee   <---Just one copy
aaa, qqq, eee, fff, hhh
bbb, rrr, ggg, lll, mmm
aaa, bbb, ccc, ddd, lll 
```

谁能帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:08:11.497

您可以`DISTINCT`使用`SELECT`：

```
SELECT DISTINCT col1, col2, col3, col4, col5 FROM table 
```

# media-player - 使用 Media Foundation 的 WP8 视频流

> ID：13929584
> 
> 赞同：5
> 
> 时间：2012-12-18T09:09:55.667
> 
> 标签：media-player, h.264, windows-phone-8, ms-media-foundation, sharpdx

我希望将 H264 视频流式传输到 Windows Phone 8 应用程序。那么我该如何使用 ShardDX 呢？（或者可能来自媒体基金会的本机功能）。

我找到了用于播放视频的 MediaEngine 类，但我需要“手动”解析帧并将它们送到解码器或播放器或其他东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-08T18:29:08.047

在 Windows Phone 8 上，我们仅支持 Microsoft 专有的 RTSP 和 HTTP 流协议。不幸的是，我们目前不支持任何其他协议，例如 MPEG DASH 或 HLS。Smooth Streaming 协议由 SS Platform SDK 处理。

不过，您可以很容易地实现自己的流协议解析器。您可以使用 MediaStreamSource API 来执行此操作。您将负责解析流并提取 MP4 样本。那里有很多开源解析代码，您应该能够找到您的协议的代码。

[MediaStreamSource 类](http://msdn.microsoft.com/en-us/library/windows/apps/system.windows.media.mediastreamsource(v=vs.105).aspx)

我希望这有帮助，

詹姆士

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-01T00:52:10.633

如果您仍然感兴趣，这是为 8.0/8.1 支持而发布的：[https ://github.com/MicrosoftDX/MicrosoftHLSSDK](https://github.com/MicrosoftDX/MicrosoftHLSSDK)

# debugging - 在 Windows 2003 上调试 VS2012 服务

> ID：13929589
> 
> 赞同：1
> 
> 时间：2012-12-18T09:10:04.277
> 
> 标签：debugging, service, windows-services, remote-debugging

我正在尝试使用 VS2012 将调试器附加到在 Windows 2003R2 机器上运行的 Windows 服务。我已经安装了 VS2012 SP1 调试工具并设置为“无身份验证”，但我只是得到一个“连接请求被远程调试器拒绝”。确保远程调试器在“无身份验证”模式下运行。

是否可以使用此设置进行调试？

# php - 代码点火器记录器

> ID：13929591
> 
> 赞同：0
> 
> 时间：2012-12-18T09:10:19.773
> 
> 标签：php, codeigniter

我是代码点火器和 PHP5 的新手。从以下网址[http://techtots.blogspot.in/2011/12/logging-request-parameters-in.html](http://techtots.blogspot.in/2011/12/logging-request-parameters-in.html)我正在尝试创建一个记录器，它将所有请求记录到一个表中。我的问题是应该在哪里以下代码驻留。我将如何指定表名。

```
class Logger {

private $CI;

public function __construct() {
    $this->CI =& get_instance();
}

public function request_logger() {
    $uri = $this->CI->uri->uri_string();

        $params = trim(print_r($this->CI->input->post(), TRUE));

    log_message('info', '==============');
    log_message('info', 'URI: ' . $uri);
    log_message('info', '--------------');
    log_message('info', $params);
    log_message('info', '==============');
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:54:12.213

您必须为此代码创建一个[库](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)

并修改它：

```
private $table_name;
function set_table_name($table_name)
{
   $this->$table_name = $table_name;
} 
```

或在 application/config/constants.php 中创建常量变量以指定表名。

# sql-server - 将服务器和数据库角色权限授予应用程序角色？

> ID：13929595
> 
> 赞同：0
> 
> 时间：2012-12-18T09:10:33.060
> 
> 标签：sql-server

我有以下情况：我的用户以没有权限的用户身份连接到 SQL Server，然后他授权应用程序角色。是否可以配置应用程序角色以允许他在已通过身份验证时添加 MSSQL 登录名和数据库用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:15:13.533

The short answer seems to be no for the logins, at least without setting a trace flag. According to the [documentation](http://msdn.microsoft.com/en-us/library/ms190998%28v=sql.100%29.aspx):

> In SQL Server, application roles cannot access server-level metadata because they are not associated with a server-level principal. To disable this restriction and thereby allow application roles to access server-level metadata, set the global flag 4616

I'm not sure why you want to use an application role here anyway: if you trust people enough to let them manage SQL Server security then you might as well just give them `securityadmin` permissions directly.

It's common practice for trusted administrators to have two Windows or SQL Server logins, e.g. `SomeUser` and `SomeUserAdmin`. Only the admin account has permissions to manage security, so they can do most of their work with a normal account without special privileges, and use their admin account only when necessary.

# php - 如何在 PhP 中生成包含私钥和公钥的字符串？

> ID：13929599
> 
> 赞同：2
> 
> 时间：2012-12-18T09:10:34.857
> 
> 标签：php

我看到了这段代码：

```
<?php
class MyEncryption
{

    public $pubkey = '...public key here...';
    public $privkey = '...private key here...';

    public function encrypt($data)
    {
        if (openssl_public_encrypt($data, $encrypted, $this->pubkey))
            $data = base64_encode($encrypted);
        else
            throw new Exception('Unable to encrypt data. Perhaps it is bigger than the key size?');

        return $data;
    }

    public function decrypt($data)
    {
        if (openssl_private_decrypt(base64_decode($data), $decrypted, $this->privkey))
            $data = $decrypted;
        else
            $data = '';

        return $data;
    }
}

?> 
```

什么是 public_key 的样本？什么样的公钥应该放在 $pubkey 上？它应该是base_64编码还是不？如何生成一个？

我补充说：

```
$privKey = openssl_pkey_new(); 
```

我得到的只是 $privKey==false

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T10:11:19.770

密钥必须一起生成，因为公钥是可以加密信息的“非秘密”密钥，因此只有私钥才能解密它。这是[公钥密码术](http://en.wikipedia.org/wiki/Public-key_encryption)的一个例子。

如果 openssl_pkey_new 失败（它不会返回密钥本身，只会返回可用于检索实际密钥的资源），请参阅手册页注释部分中的[示例和替代方案链接。](http://no.php.net/openssl_pkey_new)

不，密钥不应该是 base64 编码的。这仅适用于您方法中的加密**数据。**在课堂上这样做的原因可能是因为原作者想通过某种非二进制安全环境传输加密数据。

# r - 因子到列和列到因子

> ID：13929603
> 
> 赞同：1
> 
> 时间：2012-12-18T09:10:59.943
> 
> 标签：r, dataframe, reshape

我有这个数据框

```
DFtest <- data.frame(Zone=rep(c("R1","R2","R3"),each=2),
                     Type=rep(c("C1","C2"),3),
                     N1=sample(1:6),
                     N2=sample(seq(0,1,length.out=6)),
                     N3=sample(letters[1:6]))
DFtest

  Zone Type N1  N2 N3
1   R1   C1  2 0.4  c
2   R1   C2  5 1.0  a
3   R2   C1  4 0.6  e
4   R2   C2  3 0.2  d
5   R3   C1  1 0.0  b
6   R3   C2  6 0.8  f 
```

我想将因子类型转换为列，将 N1 到 N3 列转换为因子。所需的最终结果应如下所示：

```
 Zone   Ns Type.C1 Type.C2
1   R1   N1       2       5
2   R1   N2     0.4     1.0
3   R1   N3       c       a
4   R2   N1       4       3
5   R2   N2     0.6     0.2
6   R2   N3       e       d
7   R3   N1       1       6
8   R3   N2     0.0     0.8
9   R3   N3       b       f 
```

我一直在尝试通过结合 plyr、reshape、dcast、melt 等来实现这一点，但我可以找到正确的方法。非常感谢你

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T09:36:01.530

这是“reshape2”方法：

```
library(reshape2)
DFtestL <- melt(DFtest, id.vars=1:2)
dcast(DFtestL, Zone + variable ~ Type)
#   Zone variable  C1  C2
# 1   R1       N1   2   3
# 2   R1       N2 0.2 0.4
# 3   R1       N3   c   d
# 4   R2       N1   1   6
# 5   R2       N2   0 0.8
# 6   R2       N3   a   b
# 7   R3       N1   5   4
# 8   R3       N2 0.6   1
# 9   R3       N3   f   e 
```

* * *

这是使用`reshape()`and的基本 R 方法`aggregate()`。行顺序可以稍后使用`order()`.

```
DFtestL2 <- reshape(DFtest, direction = "long", 
                    idvar=c("Zone", "Type"), 
                    varying=3:ncol(DFtest), sep="")
aggregate(N ~ Zone + time, DFtestL2, I)
#   Zone time N.1 N.2
# 1   R1    1   2   3
# 2   R2    1   1   6
# 3   R3    1   5   4
# 4   R1    2 0.2 0.4
# 5   R2    2   0 0.8
# 6   R3    2 0.6   1
# 7   R1    3   c   d
# 8   R2    3   a   b
# 9   R3    3   f   e 
```

# append - 追加方法中的jQueryUI datepicker问题

> ID：13929605
> 
> 赞同：0
> 
> 时间：2012-12-18T09:11:06.103
> 
> 标签：append, jquery-ui-datepicker

好的，所以我正在制作这个页面，导航面板很简单，当我根据链接名称单击链接时，它会将 html 附加到内容区域，这是本节的附加脚本

所以我的目标是输入框是 ID datepicker 我试图使用来自 jQuery 的 jQueryUI datepicker 函数，我在实际的 BODY 中测试了一个常规输入框，而不是通过 append 方法，它工作正常，我的问题是我猜单引号 vs 双引号，' vs "

我该如何解决这个问题？

```
 else if (this.id == "tour"){

        $("#content").empty();

        $("#content").append("<p>\

            <h2> Add Tour Dates </h2>\

            <form action='tourdates.php' method='post'>\

            <input type='text' name='title' placeholder='Title' id='title'>\

            <input type='text' name='venueName' placeholder='Vanue Name' id='venueName'>\

            <input type='text' name='venueStreetAdress' placeholder='Location Street Adress' id='venueStreetAdress'>\

            <input type='text' name='venueCity' placeholder='City' id='venueCity'>\

        <input type='text' name='venueState' placeholder='State' id='venueState'>\

            <input type='text' name='venueZip' placeholder='Postal Code' id='venueZip'>\

            <input type='text' name='datepicker' id='datepicker'>\

            <input type='text' name='time' placeholder='Time' id='time'> </p>\

            "); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:40:30.037

如果您有强烈的感觉与您的引号有关，请尝试缩小问题范围：您是否尝试将它放在一个单独的变量中并在那里进行引用？

```
var htmlStuff = "<p>\
    <h2> Add Tour Dates </h2>\...";
$("#content").append(htmlStuff); 
```

但我认为您的问题与双引号/单引号无关，而是与设置链接以附加 HTML 并尝试在 DOM 中存在组件之前分配 UI 小部件的异步操作有关。

尽管我发现这对代码可读性非常不利，但一种选择是在追加后立即将另一个调用附加到定义 DatePicker 的函数（如“callBack”）。它应该工作，例如：

```
$('something').append(" <html stuff> ").defineDatePicker();

function defineDatePicker(){
    $('one of the elements within that html stuff').datepicker();
} 
```

# javascript - JQuery和悬停功能的奇怪行为

> ID：13929613
> 
> 赞同：2
> 
> 时间：2012-12-18T09:11:35.713
> 
> 标签：javascript, jquery, css

我`class="box"`对页面上的所有 DIV 使用悬停效果：

**Javascript**：

```
 JQ(".box").hover(function() {
        JQ(this).nextAll(".tooltip:first").css('visibility','visible');
    });

    JQ(".box").mouseleave(function(event) {
        JQ(this).nextAll(".tooltip:first").css('visibility','hidden');
    }); 
```

它在 Firefox 和 Chrome 中运行良好，但在 IE9 和 Opera 中，`.tooltip`当鼠标在 .box DIV 的边界内移动时，该 div 会不断消失并重新出现。任何想法为什么会为 DIV 的每个像素调用悬停函数？

[你可以在这里](http://www.vildiridis-dimiourgiko.gr/itemlist.php?f=cat&fid=3&filter=typeid%7C6&show=default)看到一个工作版本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T09:13:55.560

当您只将一个函数传递给`.hover()`该函数时，鼠标进入和离开时***都会调用该函数。***所以，你让它在进入和离开时都可见，这与你的 mouseleave 处理程序冲突。

你可以这样做：

```
JQ(".box").hover(function() {
    JQ(this).nextAll(".tooltip:first").css('visibility','visible');
}, function() {
    JQ(this).nextAll(".tooltip:first").css('visibility','hidden');
}); 
```

或者，多一点 DRY（少重复代码）：

```
JQ.fn.nextTip = function(vis) {
    return this.nextAll(".tooltip:first").css('visibility', vis);
}

JQ(".box").hover(function() {
    JQ(this).nextTip('visible');
}, function() {
    JQ(this).nextTip('hidden');
}); 
```

工作演示：http: [//jsfiddle.net/jfriend00/DkgVg/](http://jsfiddle.net/jfriend00/DkgVg/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:14:24.947

您应该尝试将`hover`零件替换为：

```
JQ(".box").mouseenter(function() {
    JQ(this).nextAll(".tooltip:first").css('visibility','visible');
}); 
```

或保留`hover`并执行：

```
JQ(".box").hover(function() {
    JQ(this).nextAll(".tooltip:first").css('visibility','visible');
}, function(){
    JQ(this).nextAll(".tooltip:first").css('visibility','hidden');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T09:25:35.213

只需停止执行此 jQuery 对象的事件函数

```
JQ(".box").hover(function() {
    JQ(this).nextAll(".tooltip:first").stop(true,true).css('visibility','visible');
}, function(){
    JQ(this).nextAll(".tooltip:first").stop(true,true).css('visibility','hidden');
}); 
```

# jquery - 鼠标悬停显示内容

> ID：13929617
> 
> 赞同：0
> 
> 时间：2012-12-18T09:11:45.800
> 
> 标签：jquery, jquery-ui, jquery-plugins

我在左侧有一个 ui-dialog 容器，每个对话框都有其 id 或自己的标题，鼠标悬停时我希望它显示它们的标题，鼠标移出时不显示。

有人可以帮帮我吗？

干杯吉夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:16:46.100

在 jQuery 中：

```
$("#dialog").hover(function(){
  $("#dialogContainer").show();
}, function(){
  $("#dialogContainer").hide();
}); 
```

假设存在 id 为“dialog”和“dialogContainer”的元素，这基本上是说：鼠标进入显示 dialogContainer 和鼠标离开 - 隐藏它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:20:35.060

```
$('.dialog-container .dialog').hover(function(){
    $('.header').text($(this).attr('title'));//here shows the title of hovered dialog
}, function(){
    $('.header').text("");
}); 
```

或者您可以改进此代码段，在每个对话框右侧的浮动绝对 div 中显示标题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T09:30:13.547

因为你已经标记了 jquery

希望您已包含该`jquery.js`文件

你可以给...

```
$('#dialog_window_minimized_container').hover(function(){
$('#dialog_window_1').css('display','block');
}); 
```

您将拥有 div 作为

```
<div id="dialog_window_minimized_container"></div> 
```

**注意**：- 您可以在一个页面中使用一个 id 一次。即，它应该是唯一的

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T09:32:20.307

试试这个，

```
 $('#dialog').mouseover(function() {
       $("#dialogContainer").html($(this).attr('title'));
       $("#dialogContainer").show();
    });
    $('#dialog').mouseout(function(){
        $("#dialogContainer").hide();
    }); 
```

# java - 停止提交给 ExecutorService 的 Runnable

> ID：13929618
> 
> 赞同：10
> 
> 时间：2012-12-18T09:11:54.810
> 
> 标签：java, executorservice

我已经在我的 Java 应用程序中实现了订阅。当添加新订阅者时，应用程序创建新任务（实现`Runnable`在单独线程中运行的类）并将其添加到`ExecutorService`类似：

```
public void Subscribe()
{
    es_.execute(new Subscriber(this, queueName, handler));
}

//...

private ExecutorService es_; 
```

应用程序可以注册任意数量的订阅者。现在我想实现这样的东西，`Unsubscribe`这样每个订阅者都有能力停止消息流。在这里，我需要一种方法来停止在`ExecutorService`. 但我不知道我该怎么做。

The`ExecutorService.shutdown()`及其变体不适合我：它们终止所有任务，我只想终止其中一个。我正在寻找解决方案。尽可能简单。谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-18T09:14:38.440

您可以使用[ExecutorService#submit](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#submit%28java.lang.Runnable%29)代替`execute`并使用返回的`Future`对象尝试使用[Future#cancel 取消任务](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html#cancel%28boolean%29)

示例（假设`Subscriber`是 a `Runnable`）：

```
Future<?> future = es_.submit(new Subscriber(this, queueName, handler));
...
future.cancel(true); // true to interrupt if running 
```

* * *

评论中的重要说明：

`If your task doesn't honour interrupts and it has already started, it will run to completion.`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T09:29:27.900

而不是使用`ExecutorService.execute(Runnable)` 尝试使用`Future<?> submit(Runnable)`. 此方法将提交`Runnable`到池中执行，并将返回一个`Future`对象。通过这样做，您将获得对所有订阅者线程的引用。

为了停止特定线程，只需使用`futureObj.cancel(true)`. 这将中断正在运行的线程，抛出一个`InterruptedException`. 订阅者线程的编码方式应使其在出现此异常时停止处理（例如`Thread.sleep(millis)`，使用整个方法的包装器 try / catch 块）。

您可以找到有关官方 API 的更多信息：http: //docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html [http://docs.oracle.com/javase/6](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html) /docs/api/java/util/concurrent/ExecutorService.html

# iphone - 如何在 iphone 应用程序中检查更大的值

> ID：13929623
> 
> 赞同：0
> 
> 时间：2012-12-18T09:12:03.163
> 
> 标签：iphone, objective-c, algorithm, ipad

我正在创建图表，我在运行时得到 5 个值，所以我应该如何知道哪个更大，以便我可以设置以下 5 个变量值的最大限制；

```
 int value3=(int)roundf(appDelegate.itemOneValue);
    int value4=(int)roundf(appDelegate.itemTwoValue);

    int value5=(int)roundf(appDelegate.itemThreeValue);

    int value6=(int)roundf(appDelegate.itemFourValue);

    int value7=(int)roundf(appDelegate.itemFiveValue); 
```

如何检查具有较大值的上述变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:26:39.177

```
NSArray *allValues = @[[NSNumber numberWithInt:(int)roundf(appDelegate.itemOneValue)], 
    [NSNumber numberWithInt:(int)roundf(appDelegate.itemTwoValue)], 
    [NSNumber numberWithInt:(int)roundf(appDelegate.itemThreeValue)], 
    [NSNumber numberWithInt:(int)roundf(appDelegate.itemFourValue)],
    [NSNumber numberWithInt:(int)roundf(appDelegate.itemFiveValue)]];

int max = [[allValues valueForKeyPath:@"@max.intValue"] intValue]; 
```

或者

```
NSNumber * max = [allValues valueForKeyPath:@"@max.intValue"]; 
```

一种不太灵活但可能更容易理解的替代方法：

```
int max = (value2 < value1) value2 : value1;
max = (value3 < max) value3 : max;
max = (value4 < max) value4 : max;
max = (value5 < max) value5 : max;
max = (value6 < max) value6 : max;
max = (value7 < max) value7 : max; 
// now max contains the highest of all values. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:16:45.163

您可以在 wikipedia 上阅读一篇很棒的文章：[http ://en.wikipedia.org/wiki/Selection_algorithm](http://en.wikipedia.org/wiki/Selection_algorithm)

这是从数组中获取最小值/最大值的伪代码：

```
 function select(list[1..n], k)
     for i from 1 to k
         minIndex = i
         minValue = list[i]
         for j from i+1 to n
             if list[j] < minValue
                 minIndex = j
                 minValue = list[j]
         swap list[i] and list[minIndex]
     return list[k] 
```

* * *

*   [最大值和最小值的算法？（目标-C）](https://stackoverflow.com/questions/11710687/algorithm-for-max-and-min-objective-c)
*   [http://en.wikipedia.org/wiki/Maxima_and_minima](http://en.wikipedia.org/wiki/Maxima_and_minima)
*   [你将如何在 obj-c 中定义一个简单的“min”方法](https://stackoverflow.com/questions/2125126/how-would-you-define-a-simple-min-method-in-obj-c)
*   [http://goo.gl/BO5Qx](http://goo.gl/BO5Qx)

* * *

在 objc 中，伪代码变成了这样：

```
 int value3=(int)roundf(appDelegate.itemOneValue);
  int value4=(int)roundf(appDelegate.itemTwoValue);
  int value5=(int)roundf(appDelegate.itemThreeValue);
  int value6=(int)roundf(appDelegate.itemFourValue);
  int value7=(int)roundf(appDelegate.itemFiveValue);

  NSArray *values = @[[NSNumber numberWithInt:value3],
                      [NSNumber numberWithInt:value4],
                      [NSNumber numberWithInt:value5],
                      [NSNumber numberWithInt:value6],
                      [NSNumber numberWithInt:value7]];
  NSNumber min=0;
  NSNumber max=0;
  for ( int i=0; i<[values count]; i++ ) {
    min = [values objectAtIndex:i];
    //etc...
    for (int j=0; j<i+1; j++ ) {
      if ( [values[j] > min] ) {
        // etc..
      }
    }
  } 
```

希望这可以帮助。

# android - 多行未正确换行的 TextView 的背景

> ID：13929627
> 
> 赞同：0
> 
> 时间：2012-12-18T09:12:20.607
> 
> 标签：android, android-layout, textview

**背景：**

我有一个由 6 个项目组成的布局，以网格 (2x3) 的形式布置。所有项目的宽度为屏幕的一半（每边减去一点边距）。每个项目都是一个`RelativeLayout`，包含一个 `ImageView`（背景）和一个`TextView`（标签）。标签设置为包裹文本，并且允许它几乎与它所在的图像一样宽。之后它将分成两行。

**问题：**

只要文本适合单行，一切看起来都很好（参见图片中的顶部元素）。背景很好地包裹了文本。但是，当文本显示在两行时，背景会变得太宽（参见图片中的底部项目）。即使第一行的文本没有占用那么多空间，它也会填满允许的最大宽度。有没有办法让背景以与仅使用一行时相同的方式包装文本？

**图片：**

![屏幕捕获](../Images/717603b732d8ef12145961d56a630420.png)

**布局 XML：**

```
 <ImageView
        android:id="@+id/item_image"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scaleType="centerCrop" />

    <!-- some stuff I had to remove... -->

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:paddingBottom="11.33333dp">

        <!-- some other stuff I had to remove... -->

        <!-- the gray background color is set to the TextView below programmatically together with the text itself. -->
        <TextView
            android:id="@+id/item_text_label"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5.33333dp"
            android:paddingLeft="7.33333dp"
            android:paddingRight="20dp"
            android:paddingTop="1dp"
            android:paddingBottom="5.33333dp"
            android:layout_alignParentRight="true"
            android:gravity="right" />
    </RelativeLayout>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:35:23.020

此类问题的一种可能性是`textSize`。

这取决于您如何设置以及您使用哪个测量单位来`textSize`设置`TextView`.

`dp,sp,pt and in`可能会导致产生此类问题。

因此，请尝试使用`mm`或`px`专门使用。

根据我的测试`px`会给你最好的结果。

**编辑：**

将以下属性添加到您`TextView`的布局文件中。

```
android:gravity="right|start" 
```

代替 ：

```
android:gravity="right" 
```

谢谢。

# c++ - 使用 libpng 将转换设置为灰度

> ID：13929632
> 
> 赞同：3
> 
> 时间：2012-12-18T09:12:31.283
> 
> 标签：c++, libpng

我正在使用 libpng 来读取图像。图像本身有 4 个通道 (rgba)，通道有 8 位。我想将其读取为灰度图像，最好是黑白（每像素 1 位），但即使每像素 8 位也会有所改进。

为此，我编写了函数，如下：

```
extern "C" void cuttingStream::set_image_transformations_in_grayscale( pngImageInfo* info,pngDataStructures* png)
{
    //alpha channel is removed
    if (info->color_type & PNG_COLOR_MASK_ALPHA != PNG_COLOR_TYPE_GRAY)
        png_set_strip_alpha(png->png_struct_field);
    //switch to rgb is completed
    if (info->color_type & PNG_COLOR_MASK_COLOR != PNG_COLOR_TYPE_GRAY)
        png_set_rgb_to_gray(png->png_struct_field,1,NULL,NULL);
    png_read_update_info(png->png_struct_field, png->png_info_field);

    info -> rowbytes = png_get_rowbytes(png->png_struct_field, png->png_info_field);
    //bits per CHANNEL! note: not per pixel!
    info->bitdepth   = png_get_bit_depth(png->png_struct_field, png->png_info_field);
    //Number of channels
    info->channels   = png_get_channels(png->png_struct_field, png->png_info_field);
    //Color type. (RGB, RGBA, Luminance, luminance alpha... palette... etc)
    info->color_type = png_get_color_type(png->png_struct_field, png->png_info_field);
} 
```

pngDataStructures 是我自己的结构，它包含诸如 png_structp、png_infop 和指向自定义读取函数的指针等内容。pngImageInfo 包含一些我感兴趣的图像信息，如代码中所示。

问题是，代码执行后，通道数没有改变。如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-01-05T12:59:14.527

运算符优先级问题：

//如果 ( **(** info->color_type & PNG_COLOR_MASK_ALPHA **)** != PNG_COLOR_TYPE_GRAY)则移除 alpha 通道

**运算符&**的优先级小于运算符**!=**

# eclipse - maven 安装错误 - 在开始标记之前只允许空白内容，而不是 \u0

> ID：13929633
> 
> 赞同：27
> 
> 时间：2012-12-18T09:12:37.617
> 
> 标签：eclipse, maven

> [错误] 无法执行目标 org.apache.maven.plugins:maven-install-plugin:2.3.1:install (default-install) on project ecommerce-web: 无法安装元数据 com.app:ecommerce-web/maven -metadata.xml：无法解析元数据 C:\Users\admin.m2\repository\com\app\ecommerce-web\maven-metadata-local.xml：在开始标记之前只允许空白内容，而不是 \u0（位置： START_DOCUMENT 已看到 \u0...@1:1) -> [帮助 1]

我的 maven-metadata-local.xml 中没有任何内容

问题是什么？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-18T09:15:01.623

问题出在 file 中`ecommerce-web/maven-metadata-local.xml`，它包含`char(0)`（或`null`char，或 Unicode: `0x0`）。
清理所有本地存储库，或使用`com.app:ecommerce-web`工件 删除文件夹

> 我的 maven-metadata-local.xml 中没有任何内容

这不是真的。用 Notepad++ 打开你的文件，你会看到`null`很多

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-03-08T13:05:21.543

往下走

```
C:\Users\admin\.m2\repository\com\app\ecommerce-web\ 
```

然后删除`maven-metadata-local.xml` 然后再进行一次全新安装，这应该可以解决问题，这就是我所做的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-02T08:52:04.883

删除应用文件夹 C:\Users\admin.m2\repository\com\app 下的所有文件夹，然后清理构建项目

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-09T05:24:04.553

这是因为字符编码问题。**当我们以UTF-8**编码格式打开文件时，它不会出现。

要缓解此问题，请在**notepad++**中打开文件并选择编码为“ **Encode in ANSI** ”。您将看到许多**BOM 字符**。手动删除它们并再次保存。有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-01T10:17:52.680

我也有过这样的经历。简单的解决方案是删除**.m2**文件夹和**本地 repo**文件夹的相关内容，然后使用**mvn clean install**重新构建（请确保备份您的重要数据:)）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-23T09:56:38.103

有同样的问题。仅当调试选项 (-X) 与 Maven 一起使用时，我才发现实际问题。 `mvn clean install -DskipTests -X`

然后我删除了内容`maven-metadata-local`

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2016-06-06T07:55:14.060

请在正常工作时备份您的 .m2 文件。如果您遇到上述问题。您可以替换已备份的 .m2 文件。当提前发生断电类型的问题时损坏 m2 文件时，可能会发生此问题。然后你不会一次又一次地遇到同样的问题。

# oop - 是否可以将一个类转换为具有共同属性的另一个类？

> ID：13929636
> 
> 赞同：0
> 
> 时间：2012-12-18T09:12:52.810
> 
> 标签：oop, class, attributes

假设我有一个名为*CLass1*的类，其中有 4 个变量（*对象 A、对象 B、对象 C*）而且我有一个名为*Class2*的类，其中有 6 个变量（*对象 A、对象 B、对象 C、对象 D、对象E, 对象 F* )

是否可以使用*class1中的值创建**Class2*的实例， 并将 class2 的其余对象（例如 D、E 和 F）保持为空？

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:16:29.870

您可以将类 1 继承到类 2 并使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:16:15.453

是的，使用构造函数。此外，您可以将 class2 设置为 class1 的子类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T09:19:00.753

我不确定你想做什么，但你可以通过将 A、B 和 C 值作为构造函数的参数传递给 Class2 来简单地创建 Class2：

```
public Class2 (Object oA, Object oB, Object oC) {
    A = oA;
    B = oB;
    C = oC;
} 
```

在第 1 课中：

```
public createClass2() {
    Class2 c2 = new Class2(this.A, this.B, this.C);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T09:31:08.883

```
Create methods in class2 like this:

public void demoMethod1(Class1 clazz1)
{
   this.a=clazz1.a;
   this.b=clazz1.b;
   this.c=clazz1.c;
}

or 

public void demoMethod2(Object a, Object b, Object c)
{
   this.a=a;
   this.b=b;
   this.c=c;
}

and you can use it like :
Class2 c2=new Class2();
Class1 c1=new Class1();

c2.demoMethod2(c1.a,c1.b,c1.c); 
```*

# javascript - ExtJs 子标签未激活

> ID：13929639
> 
> 赞同：0
> 
> 时间：2012-12-18T09:12:55.897
> 
> 标签：javascript, extjs, tabs, instantiation

我的应用程序中有两个级别的子选项卡。网格驱动我的子选项卡中的数据。可见（已访问）的选项卡是从我的网格中激活的。当前未访问的选项卡将不会显示任何数据，除非我再次访问它（访问，转到下一个选项卡并返回查看数据）。

![子标签](../Images/f18ed961b6d852e5bbb42787ffbc1e06.png)

有什么方法可以实例化我的所有选项卡、子选项卡以及网格显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:33:17.243

尝试使用 tabchange 事件。那应该行得通。

前任：

'tabchange': { fn: function(tab,subtab) {

```
 //your logic goes here.
    } 
```

}

如果这不是您要找的，请告诉我。

# javascript - 如何防止自动点击垃圾邮件的upvote/downvote按钮？

> ID：13929641
> 
> 赞同：3
> 
> 时间：2012-12-18T09:12:56.783
> 
> 标签：javascript, ajax, django, web-applications, spam-prevention

我有一个投票按钮，用户可以按下它，投票就会被登记。再次单击此按钮时，投票将被取消。

因此，每次按下此按钮都在执行数据库写入。如果在此按钮上连续使用自动点击器，则会发生连续的 DB 调用。我想防止这种情况。我能做些什么？

PS。单击 upvote 按钮时，我正在向后端（运行 Django）发送 ajax 查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T09:29:19.960

你真的想在服务器上检查这个，所以如果有人禁用 javascript 也没关系。

如果您使用 PHP，一个选项是设置投票之间的时间限制。例如，每分钟只允许一票。

因此，在每次投票时，将投票时间存储在会话变量中，如果在时间限制内，则忽略后续投票：

```
//on vote
$now=date('U');
if(!isset($_SESSION['lastvote']) || $now - $_SESSION['lastvote']<LIMIT){
    $_SESSION['lastvote']=$now;
    // do database call

}else{
    //throw error
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:21:38.877

可能最简单的方法是在运行单个操作时禁用按钮。

要获得这一点，假设您使用 JQuery ajax 请求来调用“upvote”/“downvote”方法，您只需：

```
$("#upvoteButton").click(function)
{
    $("#upvoteButton").attr("disabled");
    $.ajax({
      url: 'url/upvote.extension',
      success: function(data) {
        $("#upvoteButton").removeAttr("disabled");
      }
    });
} 
```

这样，每个选项卡/窗口都会发送和解析单个请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T09:18:43.717

如果您相信您的用户接受 cookie，您可以将点击连同对象 ID 和时间戳一起存储在会话中，并测试用户是否在最后 n 秒内点击了投票按钮。

您也可以使用 javascript 禁用网页上的投票按钮，并在 n 秒后再次启用以撤销投票。

这两个建议都取决于使用启用 javascript 或启用 cookie 的浏览器的用户。

如果您必须考虑机器人只是将 url 重复发送到服务器，您需要采取不同的方法 - 例如检查当前 ip 地址是否在过去 n 秒内调用了 url 并引发 403 Forbidden http 错误或某物。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T09:27:47.530

如果你可以使用`setTimeout`，你可以尝试这样的事情：

```
var toggleVote = (function () {
  var voted = false,timeout;
  return function () {
     if( timeout )
       clearTimeout(timeout)

     voted = !voted

      timeout = setTimeout(function() {
        console.log("Ajax call - vote : " + voted)
      },400)
    }
  })()

document.getElementById("vote").addEventListener("click",toggleVote) 
```

[这是一个关于JSBin](http://jsbin.com/otexos/1/edit)的例子

尝试捣碎“点击我” div

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-19T15:56:21.040

简单的方法：

```
<button id="upvote" onclick="upvote(this)">Up</button>

<script>
   var upvote = function(x){
      $(x).removeAttr('onclick'); //if you click this button again, it will do nothing

      //call ajax to do something here...
      //...............
      //after finishing, add attribute onclick to the button
      $(x).attr('onclick', 'upvote(this)')
   };
</script> 
```

# jquery-plugins - 全日历自定义颜色

> ID：13929642
> 
> 赞同：1
> 
> 时间：2012-12-18T09:12:58.610
> 
> 标签：jquery-plugins, plugins, fullcalendar, color-picker

我需要在完整日历中创建每个事件时添加自定义颜色（就像在谷歌日历中一样 - 用户可以自定义事件的文本和背景颜色）。

你知道任何最适合完整日历的颜色选择器插件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:18:36.620

它在 fullcalendar 文档中……目前似乎已关闭。您可以将每个事件的颜色作为数组元素传递：

```
'backgroundColor' => "#36c",
'borderColor' => "#36c",
'textColor' => "#36c", 
```

无需插件！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:00:57.000

您可以为新事件设置 CSS 类名称。像

```
var myEvents = [
  {
    title: 'XMas',
    start: theDate,
    className : 'holiday'
  }
]; 
```

然后要更新给定事件*类型*的样式，请执行以下操作：

```
#calendar .holiday,
#calendar .holiday div,
#calendar .holiday span {
  background-color: #6d4d47;
  color: #ffffff;
  border-color: #6d4d47;
  font-size: 12px;
} 
```

# android - GoogleAccountCredential 选择AccountIntent

> ID：13929651
> 
> 赞同：4
> 
> 时间：2012-12-18T09:13:53.277
> 
> 标签：android, google-api

我正在尝试启动一个有意图的选择帐户对话框，我通过`GoogleAccountCredential.newChooseAccountIntent`.

当我编译我的源代码时，发生了错误`NoClassDefFoundError`。

这是我的错误日志：

```
12-18 09:55:51.237: E/AndroidRuntime(25809): FATAL EXCEPTION: main
12-18 09:55:51.237: E/AndroidRuntime(25809): java.lang.NoClassDefFoundError: com.google.android.gms.common.AccountPicker
12-18 09:55:51.237: E/AndroidRuntime(25809):    at com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAccountCredential.newChooseAccountIntent(GoogleAccountCredential.java:171)
12-18 09:55:51.237: E/AndroidRuntime(25809):    at com.arcticcoding.study.OverView.onCreate(OverView.java:67)
12-18 09:55:51.237: E/AndroidRuntime(25809):    at android.app.Activity.performCreate(Activity.java:4465)
12-18 09:55:51.237: E/AndroidRuntime(25809):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T14:44:50.947

您需要参考 google play services 库。我有同样的问题并在这里解决：

[Android 上的 java.lang.NoClassDefFoundError 与 GoogleAccountCredential.newChooseAccountIntent()](https://stackoverflow.com/questions/16384236/java-lang-noclassdeffounderror-on-android-with-googleaccountcredential-newchoose)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-07T06:41:39.920

在`build.gradle`中，将此代码添加到依赖项：

```
compile('com.google.api-client:google-api-client-android:1.20.0') {
    exclude group: 'org.apache.httpcomponents'
} 
```

# java - Java socket读写十六进制代码

> ID：13929654
> 
> 赞同：1
> 
> 时间：2012-12-18T09:13:55.897
> 
> 标签：java, serversocket

我正在做一个项目，我想与设备通信。我与设备建立了套接字连接，连接有效，但设备正在向我发送消息：0xd7d0，我必须写回该消息。这是一个保持活力的消息。我在阅读和发回该消息时遇到问题。这是我到目前为止写的代码：

```
package Server;

import java.io.IOException;
import java.net.ServerSocket;
import java.util.logging.Level;
import java.util.logging.Logger;

public class Server {

    public static ServerSocket serverSocket;

    public static void main (String [] args) {
        try {
            serverSocket = new ServerSocket(1234);

            while (true) {
                ServerThread serverThread = new ServerThread(serverSocket.accept());
                serverThread.start();
            }
        } catch (IOException ex) {
            Logger.getLogger(Server.class.getName()).log(Level.SEVERE, null, ex);
        }

    }
}

package Server;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.Socket;
import java.nio.ByteBuffer;
import java.util.logging.Level;
import java.util.logging.Logger;

public class ServerThread extends Thread {

    public Socket socket;
    public BufferedReader in;
    public PrintWriter out; 
    public ByteBuffer buf;
    int count;

    public ServerThread (Socket socket) {
        try {
            this.socket = socket;
            in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            out = new PrintWriter(socket.getOutputStream(), true);
        } catch (IOException ex) {
            Logger.getLogger(ServerThread.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    @Override
    public void run() {
        while (true) {
            try {
                count = in.read();
                buf = ByteBuffer.allocate(100);
                buf.put((byte) count);
                buf.flip();
                out.println(buf);

                String line = in.readLine();
                System.out.println(line);

            } catch (IOException ex) {
                Logger.getLogger(ServerThread.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }
} 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:16:04.493

这

```
while (true) {
    ServerThread serverThread = new ServerThread(serverSocket.accept());
    serverThread.start();
} 
```

看起来不对。您正在循环并重复创建一个新线程（这将消耗资源并创建大量线程）。您应该只创建一次该线程。如果您的程序什么都不做，那么一个新线程可能是多余的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:48:38.817

你的错误是你混合了不同风格的网络数据交换。首先，消息是什么格式的？它们是某种编码中的字符，还是某种二进制数据？在第一种情况下，您不应该使用 Buffer 来读取消息，而应该使用您已经创建的字符流来读取和写入`in`。`out`在第二种情况下，您有 2 个选项：使用套接字和字节流读取和写入，或者使用来自`java.nio.channels`和`Buffer`s 的通道。要在缓冲区中写回消息，您可以使用

```
 buf.flip();
     buffer.position(buffer.limit()); 
```

# tinymce - TinyMCE 中的 AddThis Facebook like 按钮

> ID：13929658
> 
> 赞同：2
> 
> 时间：2012-12-18T09:14:25.770
> 
> 标签：tinymce, addthis, episerver-6-r2

我正在尝试使用 Addthis (http://www.addthis.com) 脚本在我的页面上放置诸如 Facebook“喜欢”按钮之类的东西。当我将“Like”代码放入并保存时，TinyMCE 会去掉部分代码吗？例如。这是关注我们的代码。

```
<div class="addthis_toolbox addthis_default_style ">
<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
</div> 
```

在我保存并再次检查后，TinyMCE 删除了**fb:like:layout="button_count"**部分。

**注意：我在 EpiServer CMS 6 R2 中使用 TinyMCE**

有没有办法来解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:45:06.107

您将需要配置 tinymce 以不删除这些属性。查看 tinymce 配置参数[valid_elements](http://www.tinymce.com/wiki.php/Configuration%3avalid_elements)。

# webforms - 如何在不更改基础架构的情况下在 asp.net webforms 组件（DotNetNuke 模块）中使用 IoC？

> ID：13929661
> 
> 赞同：1
> 
> 时间：2012-12-18T09:14:40.000
> 
> 标签：webforms, inversion-of-control, dotnetnuke

我正在处理 DotNetNuke 模块中的遗留代码，试图在测试框架下获取类和行为：我借此机会遵循“有效使用遗留代码”一书中的建议，所以发生的事情是我m 试图定义可以彻底测试然后转换为服务的区域。然后我想使用一个 IoC 框架来工作。目前，我已经将目光投向了 Ninject。

但是我遇到了一个设计问题：因为我在 DotNetNuke 模块中，所以我无法真正更改应用程序范围的结构：例如，我无法从 NinjectHttpApplication 派生应用程序。我也不能使用[来自 SO 的这些建议](https://stackoverflow.com/questions/4933695/how-can-i-implement-ninject-or-di-on-asp-net-web-forms/6121250#6121250)。我正在考虑将内核放在我的模块将设置然后使用的静态类中，但从我所阅读的内容来看，这是一个非常糟糕的主意。

所以我开始问自己是否可以在尚未设置为从头开始支持它的应用程序中使用 IoC。如果我应该为每个请求加载一个完整的依赖树，我如何在本地重写遗留代码并从 IoC 中受益？是否有一种模式可以使 IoC 的使用可以从非常本地的重写中发展出来？

即使我正在使用 DotNetNuke，任何可以安装到独立框架中的独立组件都会引发同样的问题。我也没有专门针对 Ninject，如果另一个 IoC 框架可以在这种情况下提供帮助，我愿意考虑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T16:32:31.597

根据我的经验，在 DotNetNuke 的上下文中获得这种抽象类型的最佳选择是使用 WebFormsMVP 框架。这确实是我发现在 DNN 模块中进行单元测试的唯一明智的方法，如果没记错的话，我大约一年前花了一段时间尝试连接 Ninject。

但请注意，它仍然是 WebForms，永远不会变得简单。在不了解您现有的代码库的情况下，我很难知道进行迁移有多么容易。

我在 GitHub 上有一些资源，您可以查看以供参考：

第一个是一个模块模板，应该作为一个坚实的起点：

[https://github.com/irobinson/WebFormsMvp-DNN-Module-Template](https://github.com/irobinson/WebFormsMvp-DNN-Module-Template)

第二个是一个小示例项目：

[https://github.com/irobinson/BeerCollectionMVP](https://github.com/irobinson/BeerCollectionMVP)

根据您使用的 DNN 版本，它可能已经或可能尚未随 WebFormsMVP 提供，但您应该能够将依赖项与您的模块捆绑在一起，或者在合理的情况下升级到较新版本的 DNN。

# uiinterfaceorientation - Iphone 5 , UIInterfaceOrientationPortraitUpsideDown

> ID：13929662
> 
> 赞同：1
> 
> 时间：2012-12-18T09:14:43.257
> 
> 标签：uiinterfaceorientation, iphone-5

我无法`PortraitUpsideDown`在我的 iPhone 5 中旋转我的视图。我已经使用`supportedInterfaceOrientations(UIInterfaceOrientationMaskAll)`并`shouldAutorotate {return YES;}`检查`PortraitUpsideDown`了项目摘要中的方向。

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad)
        {
            self.ViewController = [[ViewController alloc]initWithNibName:@"ViewController" bundle:nil];
            self.navigationController=[[UINavigationController alloc] initWithRootViewController:ViewController];
        } 
```

我用过`[self.window setRootViewController: self.navigationController]`。它适用于 iPhone 4s，但不适用于 iPhone 5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:32:05.747

虽然这不能满足您的问题，但我必须添加以下内容：

***永远不要让 iPhone 或 iPod Touch 旋转到“倒置”状态。***

应该只允许 iPad 这样做。

为什么？

因为这些设备不提供横向锁定按钮，而仅提供纵向锁定按钮。

现在想象一下，你侧躺在床上或沙发上，想要使用一个支持纵向和横向模式的 iOS 应用程序。想象一下，您想在横向模式下使用此应用程序。但只要你侧躺，iPhone 就会直立，它会旋转到 Portrait 或 UpsideDownPortrait。除非应用程序阻止倒置模式，否则您无法将其锁定为横向！

因此，只让 iPad 进入 UIInterfaceOrientationPortraitUpsideDown，而不是其他设备，让您的用户在侧卧时将 iPhone 锁定为横向模式。

# javascript - Javascript参考不起作用

> ID：13929663
> 
> 赞同：0
> 
> 时间：2012-12-18T09:14:43.180
> 
> 标签：javascript, iframe, javascript-events

我正在尝试根据 iFrame 中的内容通过一些 javascript 动态调整网页上 iFrame 的高度。我的问题是，当我将脚本直接放在`<script>`标签中的页面上时，它可以正常工作。当我将代码放入单独的 js 文件并链接到它时，它不起作用！

```
<iframe id='StatusModule' onload='FrameManager.registerFrame(this)' src='http://randomdomain.dk/StatusModule.aspx'></iframe>

<script type='text/javascript' src='http://randomdomain.dk/FrameManager.js'></script> 
```

它给了我错误： *Uncaught ReferenceError: FrameManager is not defined*

这真的是真的吗？它与页面生命周期有关吗？

附言。我猜 javascript 代码是无关紧要的，因为我们不能正常工作。

**更新：**我认为这可能与安全 http (https) 和不同的浏览器以某种奇怪的方式有关。我注意到该脚本实际上在 Firefox 中工作。或者更确切地说，我不确定它是否是脚本，或者只是 Firefox 的根据内容自动调整 iframe 大小的功能。虽然它没有给我任何错误。如果我随后将 https 添加到脚本 url 引用中，则脚本可以在 IE 和 chrome 中运行 - 但不能在 Firefox 中运行。函数引用错误！重量级 这变得很奇怪！

**更新#2：**它不是调整 iframe 大小的 FF 函数。它是有效的实际脚本（没有 https）。

**更新#3：** javascript。如果我将它直接放入脚本标签中，效果很好。

```
var FrameManager = {
        currentFrameId: '',
        currentFrameHeight: 0,
        lastFrameId: '',
        lastFrameHeight: 0,
        resizeTimerId: null,
        init: function () {
            if (FrameManager.resizeTimerId == null) {
                FrameManager.resizeTimerId = window.setInterval(FrameManager.resizeFrames, 0);
            }
        },
        resizeFrames: function () {
            FrameManager.retrieveFrameIdAndHeight();
            if ((FrameManager.currentFrameId != FrameManager.lastFrameId) || (FrameManager.currentFrameHeight != FrameManager.lastFrameHeight)) {
                var iframe = document.getElementById(FrameManager.currentFrameId.toString());
                if (iframe == null) return;
                iframe.style.height = FrameManager.currentFrameHeight.toString() + "px";
                FrameManager.lastFrameId = FrameManager.currentFrameId;
                FrameManager.lastFrameHeight = FrameManager.currentFrameHeight;
                window.location.hash = '';
            }
        },
        retrieveFrameIdAndHeight: function () {
            if (window.location.hash.length == 0) return;
            var hashValue = window.location.hash.substring(1);
            if ((hashValue == null) || (hashValue.length == 0)) return;
            var pairs = hashValue.split('&');
            if ((pairs != null) && (pairs.length > 0)) {
                for (var i = 0; i < pairs.length; i++) {
                    var pair = pairs[i].split('=');
                    if ((pair != null) && (pair.length > 0)) {
                       if (pair[0] == 'frameId') {
                            if ((pair[1] != null) && (pair[1].length > 0)) {
                               FrameManager.currentFrameId = pair[1];
                            }
                        } else if (pair[0] == 'height') {
                            var height = parseInt(pair[1]);
                            if (!isNaN(height)) {
                                FrameManager.currentFrameHeight = height;
                                //FrameManager.currentFrameHeight += 5;
                            }
                        }
                    }
                }
            }
        },
        registerFrame: function (frame) {
            var currentLocation = location.href;
            var hashIndex = currentLocation.indexOf('#');
            if (hashIndex > -1) {
                currentLocation = currentLocation.substring(0, hashIndex);
            }
            frame.contentWindow.location = frame.src + '&frameId=' + frame.id + '#' + currentLocation;
        }
    };
    window.setTimeout(FrameManager.init, 0); 
```

**更新#4：**好吧，我按照 ShadowWizard 和 TheZuck 的建议做了：

```
 <script type="text/javascript">
        var iframe = document.createElement("iframe");
        iframe.src = "http://www.randomdomain.dk/StatusWebModule.aspx";
        iframe.width = '100%';
        iframe.id = 'StatusModule';
        iframe.scrolling = 'no';
        if (iframe.attachEvent) {
            iframe.attachEvent("onload", function () {
                FrameManager.registerFrame(iframe);
            });
        } else {
                iframe.onload = function () {
                    FrameManager.registerFrame(iframe);
                };
            }
  document.getElementById('framecontainer').appendChild(iframe);                                     
        </script> 
```

使用 HTTP 作为 url 它在 IE 和 FF 上的工作 - 不是 chrome。如果我将它设置为 HTTPS，它可以在 chrome 和 IE 上运行——不是 FF。相同的错误“ReferenceError：未定义 FrameManager”。这到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:31:42.490

我认为你的框架是在脚本之前加载的，所以当 iframe 完成加载时“FrameManager”还不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T10:33:24.397

几件事：

1.  当您有两个应该同时加载的独立资源时，我会打赌竞争条件。当两者都完成加载时（即在 iframe 中添加一个小脚本以动态添加时间到内容或写入日志，如果您使用的是 chrome，您可以通过写入日志（或文档，以适合您的方式）轻松检查这一点，在外部脚本文件中也这样做，看看他们是否在失败时按特定顺序发布时间）。在您的情况下，如果脚本出现在 iframe 之前，并且您没有将其标记为异步，则*应该*在获取 iframe 之前加载它，因此 iframe 由于竞争条件而找不到它似乎很奇怪。在那种情况下，我会赌（3）。
2.  假设存在这样的问题（如果现在没有，那么当你进入现实世界时就会出现），更好的方法是确保两者都表现良好，以防其他负载先加载。在您的情况下，我会告诉 iframe 将自身添加到独立于脚本的局部变量中，并告诉脚本在加载时检查 iframe 是否已注册，然后以重复的时间间隔进行注册，直到找到 iframe。
3.  如果脚本**加载到**的页面与 iframe 不在同一个域中（请注意，脚本来自哪里并不重要，只关心页面的域是什么），（甚至与某人提到的相同协议这里），您将无法访问内容，因此您将无法根据内容调整大小。我不确定 onload 方法是否被认为是包装页面的一部分或内部 iframe 的一部分。
4.  看看[这个问题](https://stackoverflow.com/questions/2754282/cross-domain-iframe-content-load-detection)，这听起来与你的情况有关：
5.  [这里](http://www.nczonline.net/blog/2009/09/15/iframes-onload-and-documentdomain/)还有一篇关于这个的有趣文章。

# regex - 如何将此 perl 单行转换为脚本（特别是多行、全局正则表达式替换）

> ID：13929665
> 
> 赞同：2
> 
> 时间：2012-12-18T09:14:50.573
> 
> 标签：regex, perl, replace

我有一个带有多个 XML 标记的文件，例如：

```
<Good>Yay!</Good>
<Great>Yup!</Great>
<Bad>booo</Bad>
<Bad>
<Ok>not that great</ok>
</Bad>
<Good>Wheee!</Good> 
```

我想摆脱“坏”标签以及介于两者之间的任何东西。所以它会变成：

```
<Good>Yay!</Good>
<Great>Yup!</Great>
<Good>Wheee!</Good> 
```

我知道这个单行：

```
perl -pe "undef $/;s/<Bad>.*?<\/Bad>//msg" < originalFile > newlyStrippedFile 
```

*似乎*可以做我想做的一切（除了添加额外的换行符，但希望我可以很容易地处理）

但是我需要把它放在一个脚本中（两个文件被读入命令行，一个带有所有标签，另一个带有要拉出的标签列表），所以同一件事将被多次调用。

而我只是遇到了麻烦。要么它只读取一行，要么我得到错误或两者兼而有之。

这是我最近尝试的相关部分：

```
open ORIGINAL_FILE, $sdb_pathname
  or die "Can't open '$sdb_pathname' : $!";

@sdb_input_array = <ORIGINAL_FILE>;  

close ORIGINAL_FILE;
@sdb_input_scalar=join("",@sdb_input_array);

foreach $tag (@tags) {
  &remove_tag($tag);
}

sub remove_tag 
{
   my($current_tag) = @_;

   $sdb_input_scalar  =~ s/<$current_tag>.*?<\/$current_tag>//msg; 

   open NEWLY_STRIPPED_FILE, $clean_sdb_pathname
     or die "Can't open '$clean_sdb_pathname' : $!";

   print(NEWLY_STRIPPED_FILE $sdb_input_scalar);
   close(NEWLY_STRIPPED_FILE);  

} 
```

这给了我“在我的 $sdb_input_scalar =~ 行中使用未初始化的值 $sdb_input_scalar 代替 (s///)。并且文件句柄 NEWLY_STRIPPED_FILE 仅用于输入

当然，我的两个文件看起来仍然相同，就好像我对它们什么都没做一样。

如果我遗漏了一些明显的东西，我很抱歉，但我对 perl 来说是全新的。有人在工作中给出了 8 小时的估计来完成这个脚本，而我已经用了 5 多个小时来安装 perl，学习语法并让其他方面顺利进行。我知道有一个 XML::Parser 模块，但我发现这些示例在我剩下的很短的时间内非常难以完成。

我必须假设我的正则表达式是正确的，因为单线工作得很好。任何人都可以帮我调整它以适应我的需要吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T09:56:37.657

您确实应该使用 XML 解析器。这几乎可以保证 XML 文件不会像您期望的那样使用正则表达式进行解析。但是，让我们先让您开始。

你在哪里：

```
@sdb_input_scalar=join("",@sdb_input_array); 
```

你实际上想要：

```
$sdb_input_scalar=join("",@sdb_input_array); 
```

现在还有一些其他的提示。

在脚本的顶部，确保使用 -w 标志启用警告，如下所示：

```
#!/path/to/perl -w

use strict; 
```

一旦你添加`use strict`它会导致你出现几个错误，但这是一件好事。我们将实施一些范围和其他良好做法。您现在需要使用 my.xml 初始化变量（以 $、@ 或 % 开头）。例如：

```
my @sdb_input_array = <ORIGINAL_FILE>; 
```

或者：

```
foreach my $tag (@tags) { ... } 
```

不要像你一样调用 open ，而是使用三个争论版本：

```
open ($originalFile, "<", $sdb_pathname)
  or die "Can't open '$sdb_pathname' : $!";

my @sdb_input_array = <$originalFile>; 
```

这会将其设置为只读。见[http://perldoc.perl.org/functions/open.html](http://perldoc.perl.org/functions/open.html)

一般来说，你应该避免依赖全局变量。更改调用 remove_tag() 的方式：

```
foreach $tag (@tags) {
  $sdb_input_scalar = remove_tag($sdb_input_scalar, $tag);
} 
```

为了支持这一点，您还需要更改函数：

```
sub remove_tag 
{
   my($input, $current_tag) = @_;

   $input  =~ s/<$current_tag>.*?<\/$current_tag>//msg; 

   return $input;    
} 
```

然后，您可以通过将其移到 remove_tag 函数之外，在遍历所有标签后写出一次：

```
 open ($strippedFile, ">", $clean_sdb_pathname)
     or die "Can't open '$clean_sdb_pathname' : $!";

   print $strippedFile $sdb_input_scalar;
   close($strippedFile); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T10:30:49.587

这是使用的解决方案[`XML::Twig`](http://search.cpan.org/~mirod/XML-Twig-3.42)：

```
use warnings;
use strict;

use XML::Twig;

my $xml = XML::Twig->new(
    pretty_print  => 'indented',
    twig_handlers => {
            #Define a sub that will be called for all 'Bad' tags
            Bad => sub {
                $_->set_tag('Good'); 
        }
    }
);

$xml->parse(\*DATA);
$xml->print;

__DATA__
<xml><Good>Yay!</Good><Great>Yup!</Great><Bad>booo</Bad><Bad>
<Ok>not that great</Ok></Bad><Good>Wheee!</Good></xml> 
```

`XML::Twig`还有直接获取文件名`parsefile()`并`parsefile_inplace()`对其进行处理的方法——这正是你所需要的。

这种方法有一点学习曲线，但好处很大。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T11:16:46.020

第一：不要使用正则表达式来处理XML！然后，假设来自问题标题的疑问，而不是具体的用例。你的单行最好写成：

```
perl -0777 -pe "s/<(Bad)>.*?<\/\1>//msg" < originalFile > newlyStrippedFile 
```

现在，使用 Perl 本身来“膨胀”单线：

```
perl -MO=Deparse -0777 -pe "s/<(Bad)>.*?<\/\1>//msg" > oneliner.pl 
```

这就是你得到的：

```
BEGIN { $/ = undef; $\ = undef; }
LINE: while (defined($_ = <ARGV>)) {
    s[<(Bad)>.*?</\1>][]gms;
}
continue {
    die "-p destination: $!\n" unless print $_;
} 
```

只需添加`use strict; use warnings;`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T19:20:04.970

这是一个使用[`XML::Twig`](https://metacpan.org/module/XML%3a%3aTwig). 我假设您的 XML 文档格式正确，并且已将您在其中显示的数据包装在一个`<root>`元素中以使其如此。

该`$twig`对象为元素定义了一个单独的*twig 处理程序*`<Bad>`，如果它在解析过程中出现，它会简单地删除该元素。

解析输入后，`$twig-print`显示剩余的 XML。

```
use strict;
use warnings;

use XML::Twig;

my $twig = XML::Twig->new(
  twig_handlers => { Bad => sub { $_->delete } },
  pretty_print => 'record',
);

$twig->parse(<<'END_XML');

<root>
  <Good>Yay!</Good>
  <Great>Yup!</Great>
  <Bad>booo</Bad>
  <Bad>
    <Ok>not that great</Ok>
  </Bad>
  <Good>Wheee!</Good>
</root>

END_XML

$twig->print; 
```

**输出**

```
<root>
  <Good>Yay!</Good>
  <Great>Yup!</Great>
  <Good>Wheee!</Good>
</root> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-18T11:28:42.733

这应该可以解决问题：

```
 $tags=join("",@sdb_input_array);
    print "contents before : $tags \n";
    $tags =~ s/<Bad>.*?<\/Bad>//msg;
    print "content cleaned : $tags \n"; 
```

tags 变量现在不应带有“BAD”标签 - 唯一的问题是标签行将留下一个空白未填充的行，以便您在 GOOD 标签行之间有空行 - 但您可以删除空行你的最后一步

# sql - 选择最后三个日期并在每个 ID 中显示一行

> ID：13929667
> 
> 赞同：1
> 
> 时间：2012-12-18T09:15:05.210
> 
> 标签：sql, sql-server-2008

我有一个**销售记录**表，其中可以多次更新特定的销售**订单**。我需要获取**3 个**最新更新，并将它们显示在**一行中。**

我已经看过这个[问题](https://stackoverflow.com/questions/6527527/sql-server-get-values-of-top-three-records-and-display-in-one-row-per-person)，但我正在努力让它为我工作。

编辑：

以下是原始数据的示例：

```
order no   DateTime
4774875 1
4774875 2
4774875 3
4944839 3
4944839 2
4944839 1
5245283 1
5245283 2
5245283 3
5268774 3
5268774 2
5268774 1
5268813 1
5268813 2
5268813 3 
```

和理想的输出：

```
Order no    Date1   Date2   Date3
4774875 1   2   3
4944839 1   2   3
5245283 1   2   3
5268774 1   2   3
5268813 1   2   3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:59:40.533

尝试这个 。[这是小提琴](http://sqlfiddle.com/#!3/9d81e/10)

**注意：**这是根据您的 OP，我认为您需要`1 2 3`在`single col`. 您可能需要一个`PIVOT to get them in 3 separate columns`.

```
SELECT T1.oid, REPLACE( (SELECT T2.d AS [data()]
            FROM T T2
            WHERE T2.oid = T1.oid
            ORDER BY T2.d
            FOR XML PATH('')),' ', ' : ') x           
FROM (SELECT oid,d, rank() over(partition by oid order by d desc) rk 
FROM T) T1
WHERE rk <=3
GROUP BY oid

--Results (you can remove : if you don't need it)
4774875 1 : 2 : 3
4944839 1 : 2 : 3
5245283 1 : 2 : 3
5268774 1 : 2 : 3
5268813 1 : 2 : 3 
```

# video - 如何在传输流中找到图片头？

> ID：13929673
> 
> 赞同：1
> 
> 时间：2012-12-18T09:15:35.537
> 
> 标签：video, transport-stream

如果图片头依赖于编解码器，或者在传输流中可以找到图片头的一般位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T02:33:48.220

您要做的是开始代码提取。

如果您有一个带有 MPEG-2 视频的原始传输流：

1.  查找在 TS 标头中设置了 PayloadUnitStartIndicator 位的数据包，这表示 PES 数据包的开始。
2.  您需要查看此类 PES 数据包的第 4 个字节以确定**StreamId**。PES 开始代码如下所示

    0x00 0x00 0x01 0xXY

带有 Picture 报头的数据包的 PES 起始码是

```
0x00 0x00 0x01 0x00 
```

对于 H.264，我相信您会对具有序列参数集 (SPS) 和/或图片参数集 (PPS) NAL 单元而不是图片头的数据包感兴趣。

# mysql - 从 MYSQL 中的两列中选择不同的数据

> ID：13929677
> 
> 赞同：2
> 
> 时间：2012-12-18T09:15:54.353
> 
> 标签：mysql, select, multiple-columns

我有一张包含用户之间消息列表的表格。表结构：

```
Receiver | Sender | Subject   | Message

Daniel   | Admin  | Title 1   | Message 1
Admin    | Daniel | Title 2   | Message 2
Daniel   | Admin  | Title 3   | Message 3
Daniel   | John   | Title 4   | Message 4 
```

假设我以 Daniel 身份登录。我想显示与我通信的人员列表（无论我是发送者还是接收者），以及最新的主题/消息。就像是：

```
Admin | Title 3 | Message 3
John  | Title 4 | Message 4 
```

我已经尝试了一百万种方法来做到这一点，但我就是不能把我的手指放在它身上！

如果有人可以帮助我区分我是发送者和接收者的最新消息（例如，某种 if 语句），那也会很有帮助。但是，我自己还没有尝试过，所以这不是一个紧迫的问题。

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:22:00.330

```
SELECT Receiver, Subject, Message FROM m WHERE Sender='<your_name>'
UNION ALL
SELECT Sender, Subject, Message FROM m WHERE Receiver='<your_name>' 
```

This will simply return the list of names that had contact with given name. You can manipulate this code to also return whether it was a sender or receiver

***Edit*** *(after exchanging comments)*

This will show you last message from each conversation, whether a person you're looking for was a sender or receiver. The code is based on my temporary table, you have to tweak it a little bit to suit your needs.

```
SELECT MAX(id), conv, message FROM (
  SELECT id , CONCAT(sender,'-',receiver) AS 'conversation', message FROM t
  WHERE
    sender = '<person>'
  GROUP BY rec
  UNION
  SELECT id , CONCAT(rec,'-',sender) AS 'conversation', message FROM t
  WHERE
    rec = '<person>'
  GROUP BY sender
) as t
GROUP BY convsersation, message 
```

## **Explanation**

1.  In first subquery I am getting latest message for each conversation where person you are looking for was a sender.

2.  Second subquery gives us the result of latest message for conversations where that person was a receiver.

3.  CONCAT is used so we can merge conversations together

4.  We wrap it in the main query that will output only MAX(id) which is the latest message.

5.  If you need to know whether person in question was receiver or sender, you can add another column in the subqueries:

    SELECT MAX(id), conversation, message, type FROM ( SELECT id , CONCAT(sender,'-',receiver) AS 'conversation', message, 'sender' AS 'type' FROM t WHERE sender = '' GROUP BY rec UNION SELECT id , CONCAT(rec,'-',sender) AS 'conversation', message, 'receiver' AS 'type' FROM t WHERE rec = '' GROUP BY sender ) as t GROUP BY convsersation

(for some reason I can't make a code block on this second query, could someone edit it please)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:24:19.453

To get the output you specify....

```
SELECT i.correspondent, m.subject, i.msg
FROM (
SELECT sender AS correspondent, MAX(message) msg
FROM mesages
WHERE receiver='Daniel'
GROUP BY sender
UNION
SELECT receiver AS correspondent, MAX(message)
FROM mesages
WHERE sender='Daniel'
GROUP BY receiver )i,
messages m
WHERE i.msg=m.message; 
```

But there are lots of other ways to get a list of correspondents.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T09:37:01.003

```
SELECT Receiver, Subject, Message 
FROM Messages 
WHERE Sender='Daniel'
UNION
SELECT Sender, Subject, Message
FROM Messages
WHERE Receiver='Daniel'; 
```

这将返回“丹尼尔”发送和接收的所有消息。要对此进行扩展并指定哪些记录是发送或接收的消息，您可以将代码修改为以下内容，其中 0 与已发送消息相关，1 与已接收消息相关：

```
SELECT Receiver, Subject, Message, 0 AS 'MessageType'
FROM Messages 
WHERE Sender='Daniel'
UNION
SELECT Sender, Subject, Message, 1 AS 'MessageType'
FROM Messages
WHERE Receiver='Daniel'; 
```

然后，当您返回数据时，您可以根据 0/1 值将其分成两组。

我还建议创建一个表来包含您的用户，以便在您的 Messages 表中您可以通过他们的 ID 而不是仅仅通过他们的名字来引用他们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T09:34:28.713

试试这个查询

```
SELECT Receiver, Subject, Message ,'Sender' as 'type' FROM m WHERE Sender='Danial'
UNION ALL
SELECT Sender, Subject, Message ,'Reciever' as 'type'  FROM m WHERE Receiver='Danial' 
```

编辑：

```
(SELECT Receiver, Subject, Message ,'Sender' as 'type' FROM m WHERE Sender='Danial' ORDER By message desc limit 1)
UNION ALL
(SELECT Sender, Subject, Message ,'Reciever' as 'type'  FROM m WHERE Receiver='Danial'ORDER By message desc limit 1) 
```

# asp.net - Ipad KeyPad 不显示放置在 jquery 可拖动 div 内的文本框

> ID：13929680
> 
> 赞同：1
> 
> 时间：2012-12-18T09:16:10.530
> 
> 标签：asp.net, ipad, jquery-ui, jquery-mobile, jquery-ui-draggable

我有一个应用程序，其中包含 jquery 可拖动 div。我在可拖动的 div 中放置了四个文本字段以获取用户的输入。

ASP:

```
 <div id="divAdd" runat="server">
    <input id="txtCode" placeholder="Location Code" maxlength="20" 
    type="text" runat="server" />
    <input id="txtName" placeholder="Location Code" maxlength="20" 
    type="text" runat="server" />
    ...
    </div>
    <div> 
```

Javascript：

```
 $("#divAdd").draggable({ cursor: 'move', containment: '#divmap',
                drag: function () {
                    fnHandleMove();
                }
            }); 
```

我无法通过点击将光标放在 IPAD 中的那些文本字段中。但是桌面版工作正常。

> **如果我注释掉那个 javascript 部分，我可以放置光标和键盘显示。**

这个错误与 jquery UI 可拖动还是我做错了什么？

除了 JqueryUI.js 我在应用程序中使用 JqueryTouchPunch.js 和 JSPlumb.js。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T11:57:35.240

好的，这是一个解决方案，如果您的`textfield`任何 HTML 元素不是聚焦、滚动、选择单词、在文本周围移动文本光标以及可能出现的任何不同情况，那么您可以覆盖**jquery.ui.touch.punch.js**脚本。我假设您的元素不是可拖动的元素，但可能是它的子元素，就像我的情况一样。

在您的 html 元素上放置一个类，例如`class="useDefault"`. 然后转到脚本文件并找到该部分：

```
...
function simulateMouseEvent (event, simulatedType) {

    // Ignore multi-touch events
    if (event.originalEvent.touches.length > 1) {
      return;
    }

    event.preventDefault();

    var touch = event.originalEvent.changedTouches[0],
        simulatedEvent = document.createEvent('MouseEvents');
.... 
```

正如您可能看到的`event.preventDefault();`，确保**jquery.ui.touch.punch.js** 覆盖浏览器的默认行为。为了防止我们的特定类节点出现这种情况，请进行以下修改：

```
if (event.originalEvent.touches.length > 1) {
  return;
}
var touch = event.originalEvent.changedTouches[0],
  simulatedEvent = document.createEvent('MouseEvents');
//As you can see here is your class element check
if (touch.target.className === "useDefault") {
  event.stopPropagation();
} else {
  event.preventDefault();
} 
```

此解决方案仅使用**webkit**浏览器和**jQuery UI Touch Punch 0.2.2**版本进行测试。

希望快速解决方案有所帮助，BR

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-24T19:22:47.053

Kidwon 想法的一种变体：

同样的方法，同样的部分：

```
function simulateMouseEvent (event, simulatedType) {
    // Ignore multi-touch events
    if (event.originalEvent.touches.length > 1) {
        return;
    }

    event.preventDefault(); 
```

用。。。来代替：

```
function simulateMouseEvent (event, simulatedType) {
    // Ignore multi-touch events
    if (event.originalEvent.touches.length > 1) return;

    if (simulatedType == 'mouseup') {
        var elem = $(event.originalEvent.changedTouches[0].target);
        if (elem.is("input") || elem.is("textarea")) elem.focus();
        else event.preventDefault();
    } else event.preventDefault(); 
```

希望能帮助到你。

# objective-c - 从未知源文件动态调用方法

> ID：13929682
> 
> 赞同：0
> 
> 时间：2012-12-18T09:16:15.023
> 
> 标签：objective-c, objective-c-category

我需要从一个类调用另一个类的方法，该类的类名将从文件中获取（动态）

例子：

> 1.  我有一个名为 Source1.h/Source1.m 的文件（都是目标 C 类文件）
> 2.  我还有另一个文件名 Source2.h/Source2.m （都是目标 C 类文件）

我可以从 Source2 类文件中调用方法。但是名称“Source2”将取自文本文件，并且我必须调用的方法是我知道的。因此，我如何从未知的类文件中调用该方法。

例如：

```
unknownClassName *a = [[unknownClassName alloc] init];
[self a]; 
```

我知道方法“a”。但是`unknownClassName`将在运行时从文本文件中获取。

有可能这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:20:04.747

我想你可以用这个

```
id unknownClassObject = [[NSClassFromString(@"unknownClassName") alloc] init];
[unknownClassObject a]; 
```

# jquery - 如何在jqgrid中为baselinkurl添加css id？

> ID：13929685
> 
> 赞同：0
> 
> 时间：2012-12-18T09:16:22.350
> 
> 标签：jquery, jqgrid

```
{
    name:'copyquiz',
    align:'center',
    index:'copyquiz',
    width:'100%',
    formatter:'showlink',
    formatoptions: {
        baseLinkUrl:'copy.php'
    }
} 
```

在本专栏中，我想为点击事件添加 id（选择器）。

当我在同一页面中单击链接其打开的 div 时。

# java - 读取目录中的文件并（如果有）复制到文件夹

> ID：13929687
> 
> 赞同：0
> 
> 时间：2012-12-18T09:16:29.503
> 
> 标签：java, file, directory, copy

> **可能重复：**
> [在 Java 中将文件从一个目录复制到另一个目录](https://stackoverflow.com/questions/1146153/copying-files-from-one-directory-to-another-in-java)

我有一个包含 .jar 文件的文件夹 (c:/InstallationFiles)。我想通读它，如果名称等于 test1，我想将其复制到 test1 文件夹，然后如果名称是 test2，则将其复制到 test2 文件夹等。这就是我目前所拥有的：

私有静态 int copyJARFiles() {

```
 resultCode = 0;

    File installFolder = new File(Constants.WINDOWS + Constants.INSTALLATION_FOLDER);
    File[] installFiles = installFolder.listFiles();

    for (int i = 0; i < installFiles.length; i++) {
        if (installFiles[i].equals("test1.jar")){

        }
        if (installFiles[i].equals("test2.jar")){

        }
    }
    return resultCode;
} 
```

不知道如何复制它。我还是个菜鸟。

谢谢/亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:07:20.260

不确定我是否完全理解你的任务，但也许这个例子会对你有所帮助

```
for (File f : installFolder.listFiles()) {
    if (f.getName().endsWith(".jar")) {
        File targetDir = new File(installFolder, f.getName().replace(".jar", ""));
        if (!targetDir.exists()) {
            targetDir.mkdir();
        }
        File target = new File(targetDir, f.getName());
        Files.copy(f.toPath(), target.toPath());
    }
} 
```

主要思想是Java 7为我们提供了Files.copy util

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:39:10.790

如果你想复制 jar：你可以使用**apache IO api**。使用以下代码： FileUtils.copy(sourceFile,destinationFile);

您也可以使用 java 7。它包含复制文件的直接功能。

如果你想提取 jar：你可以使用 java.util.zip.*；包类。

如果您需要更多解释，请告诉我。

# ruby-on-rails - 瘦 Web 服务器 - X-Frame-Options 配置

> ID：13929693
> 
> 赞同：2
> 
> 时间：2012-12-18T09:16:55.260
> 
> 标签：ruby-on-rails, ruby, thin

我在我的 Linux VPS 上运行了一个 ruby​​ 应用程序。

```
http://192.155.83.120:5000/ 
```

我相信它的 Web 界面运行的是 Thin Web Server。它在 Chrome 检查器的响应标头中说...

```
Server:thin 1.3.1 codename Triple Espresso 
```

我遇到的问题是它在 HTTP 标头中生成它...

```
X-Frame-Options:sameorigin 
```

我想将此网页称为另一个网站上的 iframe - 但这不会让我这样做。我不想将其设置为“允许来自”，如果可能的话，我想一起摆脱这一切。我找到了 Thin 的配置文件，但在任何与 xfo 相关的文件中都没有任何内容。

有什么我想念的想法吗？

# .net - VB.NET - 公共共享方法与实例方法的内存使用

> ID：13929696
> 
> 赞同：1
> 
> 时间：2012-12-18T09:17:03.897
> 
> 标签：.net, vb.net, memory

我的应用程序在使用公共共享方法和实例化类的方法之间分配内存的方式有什么区别？

我有几类共享函数，它们查询数据库并返回域对象。这些类总共包含很多方法，我感兴趣的是，在管理资源方面，使用实例成员是否会是一种更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:18:39.540

每个对象实例的代码不会重复一次，每个对象实例只有对象数据是唯一的。

公共共享方法或实例方法之间*的方法代码*的内存使用量没有差异。

# windows - 脚本：如何使用命令在 Windows 中动态复制/移动文件夹

> ID：13929697
> 
> 赞同：1
> 
> 时间：2012-12-18T09:17:05.923
> 
> 标签：windows, batch-file

我有一个源文件夹，其中包含我应该复制到目标文件夹的文件夹（比如 A、B、C），但是在复制时，如果我的目标文件夹有一个文件夹，比如 A，则不应复制该文件夹，其他两个文件夹应复制到目标文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:33:51.447

我自己找到了解决方案。

我使用`XCOPY`以下参数：`/D /Y /R /H /s /i`.

例如：

```
xcopy source destination /D /Y /R /H /s /i 
```

# google-chrome - 谷歌浏览器在系统故障时丢失缓存数据

> ID：13929698
> 
> 赞同：2
> 
> 时间：2012-12-18T09:17:09.037
> 
> 标签：google-chrome, caching, html5-appcache

我正在建造一个供公众使用的交互式信息亭。使其成为 Chrome 中的网络应用程序。它需要离线工作。我的解决方案是使用浏览器应用程序缓存。问题：Chrome 在崩溃/电源故障时会丢失应用程序缓存中的所有内容。这是正常行为吗？！有没有办法在系统发生故障时保留内容？

编辑 2012-12-19：appcache 的内容没有丢失，它仍然存在。但是 Chrome 丢失了对数据的引用。如果我使用“--restore-last-session”标志启动 Chrome，它就会连接到缓存的数据。虽然这不是一个“漂亮”的解决方案......

澄清：真正的问题是当 Windows 和 Chrome 在电源故障后启动并且网络连接不存在时。Chrome 的行为就像 appcache 中没有任何内容一样，您会收到“无网络连接”错误。我不明白为什么它会这样工作？

# c++builder-xe2 - 全局变量初始化和终结

> ID：13929702
> 
> 赞同：1
> 
> 时间：2012-12-18T09:17:44.277
> 
> 标签：c++builder-xe2

我有一个在两个线程之间共享的关键部分：

```
TCriticalSection        lock_measDataBuff; 
```

我已将此变量声明为全局变量。现在因为 Delphi 风格的类必须使用 operator new 来构造，所以我将上面的声明修改如下：

```
TCriticalSection        *lock_measDataBuff; 
```

使用 operator new 初始化锁变量的最佳位置在哪里？使用 operator delete 完成全局变量的最佳位置在哪里？应该是 WinMain 方法吗？访问锁变量的类之一的构造函数？还是代码中的其他地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:15:09.470

我会使用`std::auto_ptr`或`boost::unique_ptr`为您处理所有这些，例如：

```
#include <memory>

std::auto_ptr<TCriticalSection> lock_measDataBuff(new TCriticalSection); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:33:51.620

在创建全局变量时，您需要在创建线程之前进行初始化，这将是主线程，释放内存的最佳位置是线程结束后

# iphone - 为什么 UITableView 的滑动删除有时能正常工作有时不能？

> ID：13929703
> 
> 赞同：5
> 
> 时间：2012-12-18T09:17:44.563
> 
> 标签：iphone, ios, uitableview, swipe

在`UITableView`我看来，我想应用某个部分的滑动删除模式行。我已经实现的内容如下：

```
 - (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@">> canEditRowAtIndexPath");
    if (indexPath.section == CanDeletedSection) {
        return YES;
    }else{
        return NO;
    }
}
- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@">> editingStyleForRowAtIndexPath");
    if (indexPath.section == CanDeletedSection) {
        return UITableViewCellEditingStyleDelete;
    }
    return UITableViewCellEditingStyleNone;
}
 - (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
     NSLog(@">> commitEditingStyle");
     if (editingStyle == UITableViewCellEditingStyleDelete) {
         // dosomething
     }
} 
```

但是当我滑动表格行时，有时会`Delete`出现按钮，有时不会出现。顺便说一句，我的单元格是自定义的并继承自`UITableViewCell`.

我已将上述方法添加`NSLog`到上述方法中。当`Delete`按钮不出现时，我得到这样的日志：

```
>> editingStyleForRowAtIndexPath
>> canEditRowAtIndexPath 
```

当`Delete`按钮出现时，日志如下：

```
>> editingStyleForRowAtIndexPath
>> canEditRowAtIndexPath
>> editingStyleForRowAtIndexPath
>> canEditRowAtIndexPath
>> canEditRowAtIndexPath
>> editingStyleForRowAtIndexPath 
```

我做了一个演示，使用自定义单元格，它工作正常。所以问题是由包含表视图的视图控制器引起的。视图控制器继承自另一个视图控制器，在该视图控制器中，有一个用于隐藏键盘的点击手势。但是当我从视图控制器中删除它们时，结果是一样的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-23T01:19:04.100

请检查视图或超级视图是否有任何其他手势。如果是这样，请确保`UIGestureRecognizerDelegate`在设置手势委托后实现以下方法：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
 return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T20:52:02.170

有时，尤其是在模拟器中，很难正确执行滑动。您会发现这很可能是**物理**问题，而不是编码问题。

此外，您可能想检查您的自定义单元格是否不包含捕捉滑动并且不将其传递给单元格的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-07T19:53:06.623

视图层次结构中其他位置的手势识别器可以拦截和阻止滑动动作。

我在视图控制器中用这个类别解决了它：

```
@interface UIView (CellSwipeAdditions)
    - (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer;
@end

@implementation UIView (CellSwipeAdditions)
    - (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
        return YES;
    }
@end 
```

感谢 bademi 引导我找到这个解决方案！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-15T07:13:43.263

我也遇到过同样的问题......但最后我得到了解决方案：-

示例：-
**self.navigationController.interactivePopGestureRecognizer.enabled = NO;**

如果您使用“commitcommiteditingstyle”，则必须禁用该特定视图中的任何其他手势。

希望这会对您有所帮助... :)

# android - 更改我列表的背景 (Eclipse.Android)

> ID：13929709
> 
> 赞同：0
> 
> 时间：2012-12-18T09:18:01.220
> 
> 标签：android, list

我正在为 android eclipse 制作一个项目，并在我的应用程序的开头放了一个列表。我正在使用标准的 android 列表（android.R.Layout.list.simple.list.item_1）。问题是当我更改布局时，例如更改为（android.R.Layout.list.simple.list.item_2）或我的应用程序中的任何布局（例如：R.layout.about），程序给出我一个错误（应用程序意外停止）。

这是我的代码的一部分：

```
protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setListAdapter(

                new ArrayAdapter<String>(
                        MenuInicial.this,
                        android.R.layout.simple_list_item_1,
                        classes 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:26:49.183

您可以使用 customadapter 做任何您想做的事情。请[检查这个示例项目](http://tugrulasik.com/2011/12/21/android-not-defteri-uygulamasi/)它会帮助你。

# c# - 仅在自上次使用后 X 秒后执行方法

> ID：13929714
> 
> 赞同：4
> 
> 时间：2012-12-18T09:18:19.957
> 
> 标签：c#, timer, foreach, wait

我有一个 foreach 语句，我需要让它在 foreach 结束时调用一个方法，并且 if 语句仅在其最后执行时间后 3 秒后执行。

这是代码。

```
 //Go over Array for each id in allItems
  foreach (int id in allItems)
            {
                if (offered > 0 && itemsAdded != (offered * 3) && tDown)
                {
                    List<Inventory.Item> items = Trade.MyInventory.GetItemsByDefindex(id);
                    foreach (Inventory.Item item in items)
                    {
                        if (!Trade.myOfferedItems.ContainsValue(item.Id))
                        {
                            //Code to only execute if x seconds have passed since it last executed.
                            if (Trade.AddItem(item.Id))
                            {
                                itemsAdded++;
                                break;
                            }
                            //end code delay execution 
                        }
                    }
                }
            } 
```

而且我不想让它睡觉，因为当添加一个项目时，我需要从服务器获得该项目已添加的确认。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:45:56.693

简单的时间比较怎么样？

```
var lastExecution = DateTime.Now;

if((DateTime.Now - lastExecution).TotalSeconds >= 3)
... 
```

您可以在您的 Trade-Class 中保存“lastExecution”。当然，如果没有经过 3 秒，则不会使用此解决方案调用代码块（不添加项目）。

--//------------------------------------

使用计时器的不同解决方案：我们以编程方式添加 Windows 窗体计时器组件。但是，如果您使用此解决方案，您将在程序员地狱中结束；-)

```
//declare the timer
private static System.Windows.Forms.Timer tmr = new System.Windows.Forms.Timer();

//adds the event and event handler (=the method that will be called)
//call this line only call once
tmr.Tick += new EventHandler(TimerEventProcessor);

//call the following line once (unless you want to change the time)
tmr.Interval = 3000;    //sets timer to 3000 milliseconds = 3 seconds

//call this line every time you need a 'timeout'
tmr.Start();            //start timer           

//called by timer
private static void TimerEventProcessor(Object myObject, EventArgs myEventArgs)
{
  Console.WriteLine("3 seconds elapsed. disabling timer");
  tmr.Stop(); //disable timer
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:26:39.603

```
 DateTime? lastCallDate = null;
        foreach (int id in allItems)
        {
            if (offered > 0 && itemsAdded != (offered * 3) && tDown)
            {
                List<Inventory.Item> items = Trade.MyInventory.GetItemsByDefindex(id);
                foreach (Inventory.Item item in items)
                {
                    if (!Trade.myOfferedItems.ContainsValue(item.Id))
                    {
                        //execute if 3 seconds have passed since it last execution...
                        bool wasExecuted = false;
                        while (!wasExecuted)
                        {
                            if (lastCallDate == null || lastCallDate.Value.AddSeconds(3) < DateTime.Now)
                            {
                                lastCallDate = DateTime.Now;
                                if (Trade.AddItem(item.Id))
                                {
                                    itemsAdded++;
                                    break;
                                }
                                wasExecuted = true;
                            }
                            System.Threading.Thread.Sleep(100);
                        }
                    }
                }
            }
        } 
```

# javascript - 如何向 Google V8 添加新类？

> ID：13929716
> 
> 赞同：10
> 
> 时间：2012-12-18T09:18:34.883
> 
> 标签：javascript, c++, google-chrome, v8

我是 Google V8 和 Javascript 的新手，我正在尝试使用 C++ 向 Javascript 添加一个新类。

我已经使用 Webkit 的 V8 绑定完成了一些工作，参考是：[webkit idl](http://trac.webkit.org/wiki/WebKitIDL)和[v8 绑定](https://docs.google.com/presentation/d/1OFG81taxgjOGU43sv9WHvPZkt5--KnM6gSijWN8NMcU/edit?disco=AAAAAECHbXY#slide=id.p)

现在我想直接把它集成到V8引擎中，通过修改V8的代码而不是简单地使用V8的api来做扩展。换句话说，我想添加一个新类，就像 Javascript 中的 Array 类型一样，使用相同的实现机制。

我搜索了互联网，包括 Google 中的文档，但只看到了有关将 V8 嵌入本机代码的指南。

**我在哪里可以找到有关修改 V8 代码的指南？
或者我在哪里可以找到有关 V8 设计架构的文档？
或者任何人都可以描述 V8 如何在 C++ 中实现 Array 类型？**

非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T11:37:19.617

首先，您很可能实际上可以摆脱使用 v8 api 来做任何您想做的事情。您可以使用它来创建与内置对象的行为基本相同的原型，也可以将 C++ 函数调用绑定到 JS 函数调用。除非您需要极快的速度或检查或操作 v8 内部结构，否则实际上没有理由修改 v8 本身。例如，Chrome 的 DOM 实现使用 v8 API，而不是直接在 v8 中实现。嵌入器指南实际上包含创建“类”所需的所有信息（请记住，在 JS 中它实际上是原型继承）：[https](https://developers.google.com/v8/embed#templates) ://developers.google.com/v8/embed#templates 。

也就是说，这里有一些很好的地方可以查看源代码，比如数组对象。我不确定是否有任何设计文档，您最好查看源代码。

数组对象本身在这里： [https ://code.google.com/p/v8/source/browse/trunk/src/objects.h#8409](https://code.google.com/p/v8/source/browse/trunk/src/objects.h#8409)

此处实现了一些数组 api 函数（许多使用与扩展相同的公共 API）： [https ://code.google.com/p/v8/source/browse/trunk/src/builtins.cc#511](https://code.google.com/p/v8/source/browse/trunk/src/builtins.cc#511)

一些数组api函数是用JavaScript实现的：[https ://code.google.com/p/v8/source/browse/trunk/src/array.js](https://code.google.com/p/v8/source/browse/trunk/src/array.js)

搜索 JSArray，你会看到更多。特别注意本机代码生成器中的位，因为如果你真的想利用在这个级别编写的一些自定义类型，你也会想要为一堆不同的架构编写代码来生成高效的机器代码...

编辑：看起来 V8 文档比写这个答案时已经移动（并且更好），这里有一些有用文档的快速链接：

*   维基：[https ://github.com/v8/v8/wiki/Getting%20Started%20with%20Embedding](https://github.com/v8/v8/wiki/Getting%20Started%20with%20Embedding)
*   API 文档：http: [//v8.paulfryzel.com/docs/master/index.html](http://v8.paulfryzel.com/docs/master/index.html)

# javascript - 在有碰撞的手机的 HTML5 游戏中播放音频

> ID：13929722
> 
> 赞同：0
> 
> 时间：2012-12-18T09:18:47.417
> 
> 标签：javascript, android, html, html5-audio

有碰撞的手机在 HTML5 游戏中播放音频的最佳方法是什么？我尝试在 HTML5 中使用音频标签，但是当碰撞快速重复时声音会有延迟！！！！！！任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:22:07.640

Once I've been playing around with HTML 5 and GameDevelopment - trying things out and so on. For Sound I used Soundmanager, take a look here: [Click Here](http://www.html5place.com/2011/01/how-to-use-audio-with-html5-games/ "Click Here") , maybe this can help you. It worked fine for me.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:08:08.953

声音播放在 iPhone 上一次限制为 1 个声音，并且延迟很大，Android 上的延迟可能相同。

那么不幸的是，实际上不可能在游戏中使用 <audio> 来获得碰撞声音。（您可以将其用作背景音乐）。

# jsf-2 - 我应该如何使用 Primefaces Dock 组件？

> ID：13929723
> 
> 赞同：1
> 
> 时间：2012-12-18T09:18:54.920
> 
> 标签：jsf-2, primefaces

我正在尝试使用停靠菜单，但它不起作用。（它显示图像，但当我将鼠标移到图像上时它不会放大它们）。我想在页面的中心布局单元中使用它，插入另一个包含停靠栏的页面。代码如下所示：

模板.xhtml

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://java.sun.com/jsf/core">

<h:head>
    <style type="text/css">
        body.ui-layout-container { background-color: cadetblue;}
    </style>
</h:head>
<h:body>
    <p:layout fullPage="true" resizeTitle="resize">
        <p:layoutUnit position="north" id="north" resizable="false" size ="75">
            <ui:include src="header.xhtml" />
        </p:layoutUnit>

        <p:layoutUnit position="west" id="west" resizable="false" style="height:580px;overflow:hidden;" size="180">
            <ui:include src="menu.xhtml" />
        </p:layoutUnit>

        <**p:layoutUnit styleClass="layoutUnitCenter" position="center">
                 !!Here I insert the page which contains the dock
                <ui:insert name="content" />
        </p:layoutUnit>**

        <p:layoutUnit position="south" resizable="true" id="south" size="40">
            <ui:include src="footer.xhtml" />
        </p:layoutUnit>

    </p:layout>
</h:body>
</html> 
```

码头.xhtml

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://java.sun.com/jsf/core"
    template="template.xhtml">   

 <ui:define name="content">
    <h:head>
    </h:head>
    <h:body>
         <h:form>
           <p:dock position="top">  
                   <p:menuitem value="teachers" icon="/images/dock/teacher.png" url="#"/>  
                   <p:menuitem value="students" icon="/images/dock/student.png" url="#"/>  
                   <p:menuitem value="parents" icon="/images/dock/parent.png" url="#"/>  
           </p:dock> 
       </h:form>
    </h:body>
</ui:define>
</ui:composition> 
```

我尝试单独使用dock.xhtml，没有ui:composition，它工作得很好。但是当我尝试这样使用它时，它只显示图像，但没有`t do anything when I move the mouse over the images. Another problem is that it doesn`将扩展坞放在区域的中心。它稍微向左定位。我对 jsf 和 Primefaces 很陌生，所以任何答案都可能有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T10:12:51.143

This code generate the same issue you asked help for:

![issued code](../Images/94b17016b68d9d5f9f0e6d3b05875a5f.png)

This little change, solved for me:

![enter image description here](../Images/45ae21cb338e196c0e6b23d7d8ff6c83.png)

# excel - 在 Locals 或 Watch 窗口中查看对象导致 excel 崩溃

> ID：13929724
> 
> 赞同：5
> 
> 时间：2012-12-18T09:18:56.353
> 
> 标签：excel, vba, class, watch, local-variables

在 Excel 中，当我运行一些代码并在其中放置断点时，我可以查看本地窗口中事物的值。在本地窗口中，当我尝试为类展开对象时，我创建了 Excel 崩溃，并显示“Microsoft Office Excel 遇到问题需要关闭。对于给您带来的不便，我们深表歉意。如果我尝试查看，也会发生这种情况监视窗口中的对象。

有任何想法吗？或者有人以前有过这个吗？

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-01T23:22:00.050

检查，再次检查并重新检查您的类属性，尤其是您的 GET 代码。在调试期间扩展自定义类对象导致 Excel 崩溃时，我遇到了同样的错误。当您在本地窗口中展开对象时，Excel 本质上会运行这些 GET 属性，因此它们必须编译并且不会导致任何运行时错误。

当然，我不能说这肯定导致了 OP 的错误而没有看到他们的代码，但对我来说，错误是一个非常简单的错误，其中 GET 属性包含类型不匹配：

```
Private pAccFullArr() As String

Public Property Get accFullArr() As Variant
    accFullArr = pAccFullArr
End Property 
```

本来应该

```
Private pAccFullArr() As String

Public Property Get accFullArr() As STRING()
    accFullArr = pAccFullArr
End Property 
```

# facebook - facebook 广告每日统计数据在收集后发生变化

> ID：13929726
> 
> 赞同：0
> 
> 时间：2012-12-18T09:19:08.943
> 
> 标签：facebook, api, statistics, ads, facebook-ads-api

我正在编写每天收集 Facebook 广告统计数据的服务。问题是我收集的统计数据与过去特定时间段的 Facebook 统计数据不匹配。

例如：

*   我的广告帐户时区是 UTC+2，今天是 2012-12-18
*   在 2012-12-18T00:00:00 UTC 我的服务确实请求广告 api - ..../stats/2012-12-17T02:00:00/2012-12-18T02:00:00 以获取每日统计信息2012 年 12 月 17 日。结果是（对于特定的广告组，截断）：展示次数 = 14950，点击次数 = 78，等等......
*   在 2012-12-18T10:52:00 我手动对 fb ads api 做了同样的请求 ..../stats/2012-12-17T02:00:00/2012-12-18T02:00:00，期待 api 结果将在我的数据库中匹配结果，但它们不是！Api 结果是（对于相同的广告组，被截断）：展示次数 = 15754，点击次数 = 82，等等...

所以看起来 fb 广告统计数据在收集后发生了变化。我的服务包括 UTC 时区偏移，如 api 文档中所建议的那样，我预计每天收集的统计数据和实际统计数据 100% 匹配。

有人遇到同样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:58:38.517

我们的账户也有同样的问题。

这是一个时区相关的问题，你应该调整时区，主要是 DST。

您可以在此处根据帐户时区检查有问题的潜在日期：[http](http://www.timeanddate.com/time/dst/2013.html) : //www.timeanddate.com/time/dst/2013.html 并使用新的 start_time 和 end_time 调整请求中的时间偏移。

更好的方法是使用 timezonedb 自动执行这些更改，以跟踪要完成的这些调整：http: [//es.wikipedia.org/wiki/TZ_Database](http://es.wikipedia.org/wiki/TZ_Database)

希望能帮助到你！

问候，马丁

# linux - 将数据包注入 linux 内核以模拟以太网数据包到达的最佳方法

> ID：13929728
> 
> 赞同：0
> 
> 时间：2012-12-18T09:19:09.397
> 
> 标签：linux, networking, linux-kernel

我正在`linux`为一些隧道活动编写一个内核模块。该模块将从网络堆栈中获取数据包并对其执行一些操作。从底部将数据包注入堆栈的最佳方法是什么（模拟以太网数据包到达线路），以便数据包遍历整个接收路径并传递到我的模块。

我的模块使用内核`br_handle_frame_hook`挂钩来获取数据包，这意味着它不能与 linux 本机`bridge`模块共存。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T09:49:09.750

考虑使用 NetFilter

[http://www.phrack.org/issues.html?issue=61&id=13](http://www.phrack.org/issues.html?issue=61&id=13)

TAP 会很棒，如果你在用户空间工作，你不是

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:43:11.040

我相信[TAP](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=Documentation/networking/tuntap.txt;h=c0aab985bad9ac4a159ea9f96e837bee28475291;hb=b69f0859dc8e633c5d8c06845811588fe17e68b3)设备是您正在寻找的 - 一种从用户空间发送/接收以太网数据包的好方法

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-12-21T11:46:07.807

我建议在我之前像@raber 一样点击。我还建议阅读此 excelet 教程：[http](http://backreference.org/2010/03/26/tuntap-interface-tutorial/) ://backreference.org/2010/03/26/tuntap-interface-tutorial/ 。

您询问是否可以以非编程方式进行点击，然后将流量重播到其中。答案是肯定的。寻找“持久性”选项（顺便说一句，如果您不想下载已经可以做到的工具，也可以使用您可以自己编写的简短工具以编程方式完成）。您可能还希望/需要定义可能使用水龙头的用户（或者只是 sudo 您的操作）。

# c# - 将一个 Byte[] 合并为单个数组

> ID：13929729
> 
> 赞同：0
> 
> 时间：2012-12-18T09:19:10.297
> 
> 标签：c#, arrays, buffer, readblock

我确实有一个包含一系列数字的字节数组...

t 阻止而不是其余的！

我怎样才能把所有的 4-8 块都放进去`Temp[]`？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:22:53.217

Elements 4-8 (or in reality index 3-7) is 5 bytes. Not 4.
You have the source offset and count mixed up:

```
Buffer.BlockCopy(bResponse, 3, temp, 0, 5); 
```

Now temp will contain `[23232]`.

If you want the last 4 bytes then use this:

```
Buffer.BlockCopy(bResponse, 4, temp, 0, 4); 
```

Now temp will contain `[3232]`.
To convert this to an int:

```
if (BitConverter.IsLittleEndian)
  Array.Reverse(temp);

int i = BitConverter.ToInt32(temp, 0); 
```

**Edit:** (After your comment that `[43323232]` actually is `{43, 32, 32, 32}`)

```
var firstByte = temp[0];   // This is 43
var secondByte = temp[1];  // This is 32
var thirdByte = temp[2];   // 32
var fourthByte = temp[3];  // 32 
```

If you want to convert this to an int then the BitConverter example above still works.

# sql - SQL Server 和 postrgesql 中的 SQL 标准

> ID：13929731
> 
> 赞同：3
> 
> 时间：2012-12-18T09:19:14.023
> 
> 标签：sql, sql-server, postgresql

有人可以向我解释为什么这个语句返回的列在 SQL Server 中是 FK，但在 postgresql 中什么都不返回？

两个 RDBMS 上的表相同，并且确实有 FK

```
select * 
from INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE ccu, 
     INFORMATION_SCHEMA.TABLE_CONSTRAINTS tc
where ccu.CONSTRAINT_NAME = tc.CONSTRAINT_NAME 
  and ccu.TABLE_NAME = 'table_name' 
  and tc.CONSTRAINT_TYPE = 'FOREIGN KEY'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T09:36:59.393

似乎 SQL Server 存储“传出”外键，而 PostgreSQL 存储“传入”外键。

SQL Server 示例：[http](http://sqlfiddle.com/#!6/57493/3)
://sqlfiddle.com/#! 6/57493/3 PostgreSQL 示例：[http ://sqlfiddle.com/#!12/57493/5](http://sqlfiddle.com/#!12/57493/5)

不幸的是，ANSI 标准并没有说明哪一个是正确的。它只是说：

> *TABLE_CONSTRAINTS 基表
> 
> CONSTRAINT_TYPE 的值具有以下含义：
> FOREIGN KEY：所描述的约束是外键约束。
> ...*

# android - 使用 ant debug 在命令行中构建和运行具有子项目的 android 项目

> ID：13929734
> 
> 赞同：7
> 
> 时间：2012-12-18T09:19:39.803
> 
> 标签：android, ant

我正在尝试从命令行构建一个 android 项目。我的 android 项目在我的主 android 项目中有一个子项目。当我运行 ant 调试命令时，它在构建类时显示错误，因为未从子项目中找到库类。所以我认为子项目没有正确包含，我们需要为此执行一些命令。

请帮忙，提前谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-24T06:55:06.620

我从Android官方文档中得到了答案：

```
android update lib-project --target 3 --path ZBarScanner-master/ZBarScannerLibrary 
android update project --name android_app --path . --library ZBarScanner-master/ZBarScannerLibrary 
```

首先我们需要更新库项目，然后更新主项目。两者都应该在更新之前创建。然后做：

```
ant clean 
ant debug 
```

# c# - 递归实验

> ID：13929745
> 
> 赞同：2
> 
> 时间：2012-12-18T09:20:47.903
> 
> 标签：c#, java, .net, algorithm, recursion

我正在尝试使用递归来掌握这个概念。它与语言无关，因此相同的概念适用于 C# 和 Java。

我有一个`TreeView`有多个节点的。我想遍历每个节点并计算满足特定条件的节点。如果在任何时候条件不满足，我希望算法最终返回`-1`。

`TreeViewItem`只有当它有一个命名的“条件”时才会考虑每个`Tag`（总共有 3 种 TreeViewItems - 我只会考虑“条件”的那些）。

一旦发现 TreeViewItem 属于“条件”类型，我想检查它是否满足某个条件。正如我之前提到的，即使只有一个 TreeViewItem 不满足条件，我希望算法最终返回 -1。

如果算法不返回 -1，我希望它返回它找到的有效条件的数量 - 即每次成功通过条件时都会增加一个整数，最后返回最终计数。

这是我迄今为止尝试过的：

```
private int CountConditions(TreeViewItem item)
        {
            int conditionCount = 0;

            foreach (TreeViewItem child in item.Items)
            {
                int previousCount = CountConditions(child);

                if (previousCount == -1)
                {
                    return -1;
                }
                else
                {
                    return conditionCount += previousCount;
                }
            }

            if (item.Tag.Equals("Condition"))
            {

                if (/*Condition is not satisfied*/)
                {
                    return -1;
                }
                else
                {
                    return conditionCount++;
                }
            }
            else
            {
                return conditionCount;
            }
        } 
```

如果不满足条件，我当前的算法实际上会返回 -1，但是如果满足条件，它只会返回 0，而不是有效条件的数量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:34:40.553

你用

```
return conditionCount++; 
```

这是不好的做法。有充分的理由。这里发生的是 a)return conditionCount (你设置为零) b)increment conditionCount

b 永远不会在 return 语句之后发生，因此您始终将 0 传递给下一个递归步骤。

您可以使用

```
return ++conditionCount; 
```

或者更好

```
conditionCount++;
return conditionCount; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:37:00.813

这不是一个简单的递归，因为您必须同时处理错误情况和正常情况。如果你没有错误条件，只需要计算条件节点的数量，你可以这样写：

```
private int CountConditions(TreeViewItem item)
{
    int currentCondition = CalculateCondition(item)
    int childCounts = 0;
    foreach (TreeViewItem child in item.Items)
    {
        int childCount = CountConditions(child);
        childCounts += childCount;
    }
    return currentCondition + conditionCounts
}

private int CalculateCondition(TreeViewItem item)
{
    if (item.Tag.Equals("Condition"))
        return 1;
    else
        return 0;
} 
```

但是要处理错误，您必须对错误情况进行两次检查，一次检查当前节点，一次检查子节点，如果遇到错误情况立即返回：

```
int error = -1

private int CountConditions(TreeViewItem item)
{
    int currentCondition = CalculateCondition(item)
    if (currentCondition == error) // new
        return error;              // new
    int childCounts = 0;
    foreach (TreeViewItem child in item.Items)
    {
        int childCount = CountConditions(child);
        if (childCount == error)   // new
            return error;          // new
        childCounts += childCount;
    }
    return currentCondition + conditionCounts
}

private int CalculateCondition(TreeViewItem item)
{
    if (item.Tag.Equals("Condition"))
        if (((item.Header as StackPanel).Children[2] as TextBox).Text.Equals("")) // new
            return error; // new
        else              // new
            return 1;
    else
        return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T09:24:51.293

你应该`return conditionCount;`只在函数的*末尾*。只有`return -1;`必须在函数的中间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T09:36:25.747

`return`立即停止整个函数并返回一个值。那不是你想要的。您想要累积值并在完成后返回总和。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T10:18:38.937

我认为您可以通过使用异常来简化代码。您所做的是在条件失败时抛出异常，然后您可以在另一个开始递归的函数中捕获该异常。这将自动展开堆栈并中止计算。然后，捕获异常的函数可以返回您想要的任何内容。

除此之外，您在递归中要做的就是为每个通过的条件累积 1。

# web-services - Generate multiple PDF automatically from salesforce. Avoid getContent()

> ID：13929746
> 
> 赞同：2
> 
> 时间：2012-12-18T09:20:47.080
> 
> 标签：web-services, salesforce, apex-code, visualforce, salesforce-service-cloud

I need to generate automatically multiple PDF files and save them as attachments in its correspondent objects records. I have tried to resolve this topic making use of a batch file and a rendered visualForce page as 'PDF' but Salesforce have here a limit not allowing to use a getContent() method in a batch class.

Searching in the internet I have found this possible solution:

[Why are HTML emails being sent by a APEX Schedulable class being delivered with blank bodies?](https://stackoverflow.com/questions/9404751/why-are-html-emails-being-sent-by-a-apex-schedulable-class-being-delivered-with)

It propose to:

1.  Create a class which implements the Schedulable interface.
2.  Have an execute() method call and a @future method.
3.  Create a @future method that call a web service enabled method in the class that sends the email.

The problem I found is when I try to authenticate in my Web Services (REST) inside Salesforce ([http://help.salesforce.com/help/doc/en/remoteaccess_oauth_web_server_flow.htm](http://help.salesforce.com/help/doc/en/remoteaccess_oauth_web_server_flow.htm))

In the first step I am making a request and I get a code through the callback URL, but It is impossible to know how to read this parameter from Salesforce. In the answer I don't have a method called 'getParameter()' and the body is empty.

As an example:

**Request**: [https://login.salesforce.com/services/oauth2/authorize?response_type=code&client_id=](https://login.salesforce.com/services/oauth2/authorize?response_type=code&client_id=) 3MVG9lKcPoNINVBIPJjdw1J9LLM82HnFVVX19KY1uA5mu0QqEWhqKpoW3svG3XHrXDiCQjK1mdgAvhCscA 9GE&redirect_uri=https%3A%2F%2Fwww.mysite.com%2Fcode_callback.jsp&state=mystate

**Response**: [https://www.mysite.com/code_callback.jsp?code=aPrxsmIEeqM9&state=mystate](https://www.mysite.com/code_callback.jsp?code=aPrxsmIEeqM9&state=mystate)

It exists any way to connect with my Webservices making the call inside Salesforce in order to implement this solution??

It would be easier if a make a call from an external application but inside salesforce???

Can you suggest any possible solution???

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:17:23.957

（旧问题的死灵术；））

这个怎么样：

1.  直接来自您的上下文或来自可调度的类...
2.  最多调用@future 10 次
3.  每个@future 最多可以发送 10 个标注，使用它们以 RESTful 方式访问您的 VF 页面`renderAs="pdf"`并将内容保存为附件？
4.  如果 100 个附件还不够 - 玩菊花链批次。我相信由于 Summer 或 Winter '13`finish()`批次中的方法可用于在下一批中触发 Database.execute() ;)

至于如何准确地获得对 PDF 的 REST 访问 - 您可以使用我的问题[https://salesforce.stackexchange.com/questions/4692/screen-scrape-salesforce-with-rest-get-call-from-apex](https://salesforce.stackexchange.com/questions/4692/screen-scrape-salesforce-with-rest-get-call-from-apex)或者也许我保存报告的最终解决方案：[https](https://salesforce.stackexchange.com/questions/4303/scheduled-reports-as-attachment) ://salesforce.stackexchange.com/questions/4303/scheduled-reports-as-attachment （您只需要我想象的身份验证部分+当然是远程站点设置中的工作条目） .

这是假设 sid cookie 在 VF 页面上的工作与在标准页面上一样好......祝你好运吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-15T11:22:06.090

自 Winter '16 版本以来，可以从 Batch Apex 调用 PageReference.getContent。

根据您需要生成的大小和数量，跨多个批处理执行上下文传播 PDF 附件生成 - getContent 是一个 HTTP 请求，servlet 可能需要很长时间才能响应。

[https://releasenotes.docs.salesforce.com/en-us/winter16/release-notes/rn_apex_pagereference_getcontent.htm#rn_apex_pagereference_getcontent](https://releasenotes.docs.salesforce.com/en-us/winter16/release-notes/rn_apex_pagereference_getcontent.htm#rn_apex_pagereference_getcontent)

> 您现在可以从异步 Apex（例如 Batch Apex、Schedulable 和 Queueable 类以及 @future 方法）中调用 PageReference 类的 getContent() 和 getContentAsPdf() 方法。这使您可以设计更加灵活和可扩展的服务，例如，将 Visualforce 页面呈现为 PDF 文件。
> 
> 出于限制和约束的目的，对 getContent()（和行为相同的 getContentAsPdf()）的调用被视为标注。行为和限制取决于调用它的 PageReference，在某些情况下会放宽。有三种不同的可能性。
> 
> 显式引用 Visualforce 页面的 PageReference 实例 例如，Page.existingPageName。对 getContent() 的调用不受最大并发标注限制或每个事务的最大总标注限制。
> 
> 此外，只有引用 Visualforce 页面的 PageReference 实例才能从计划的 Apex 调用 getContent()，即实现 Schedulable 接口的 Apex 类。
> 
> ### 引用 Salesforce URL 的 PageReference 实例：
> 
> 例如，`PageReference('/' + recordId)`。对 Salesforce URL 的 getContent() 调用不受最大并发标注限制，但它们受每个事务的最大总标注限制。
> 
> ### 引用外部 URL 的 PageReference 实例：
> 
> 例如，`PageReference('https://www.google.com/')`。对外部 URL 的 getContent() 调用受最大并发标注限制和每个事务的最大总标注限制。
> 
> 即使对 getContent() 和 getContentAsPdf() 的调用没有针对标注限制进行跟踪，它们仍然受制于通常的 Apex 限制，例如 CPU 时间等。这些限制在原始事务中的所有标注中是累积的。
> 
> 最后，我们放宽了在执行 DML 操作（不包括创建保存点）后调用 getContent() 和 getContentAsPdf() 的限制。如果对 getContent() 和 getContentAsPdf() 的调用是内部调用，则现在允许它们。DML 操作之后的外部标注仍然被阻止，并且您仍然无法从 getContent() 调用本身进行标注，即在页面呈现期间。

# java - JPQL 可以检索没有参考记录的记录吗？

> ID：13929748
> 
> 赞同：1
> 
> 时间：2012-12-18T09:21:08.097
> 
> 标签：java, jpa

我想通过查询检索在数据库`Reservation`中没有引用的那个。实体有实体。它是单向的。`ReservationInstance``JPQL``ReservationInstance``Reservation``OneToOne`

预约表

```
ID      NAME
0001    AAA
0002    BBB
0003    CCC
0004    DDD 
```

预留实例表

```
ID      SOME_COLUMN     RESERVATION_ID  
0001    somedata        0004 
```

如何检索`Reservation`没有`ReservationInstance`参考的列表（适用于 AAA、BBB 和 CCC）？

我的实体

```
public class Reservation implements Serializable {
    .....
    private String id;
    .....
    private String name;
    //getter and setter
}

public class ReservationInstance implements Serializable {
    ....
    private String id;
    ....
    private Date fromTime;
    ....
    private Date toTime;

    @OneToOne
    @JoinColumn(name = "RESERVATION_ID", referencedColumnName = "ID")
    private Reservation reservation;
} 
```

**更新帖子**

我使用了如下查询

```
SELECT r FROM Reservation r LEFT JOIN ReservationInstance ri WHERE ri.reservation IS NULL 
```

我得到了例外

```
[EL Severe]: 2012-12-18 16:37:02.817--ServerSession(1733641680)--Local Exception Stack: 
Exception [EclipseLink-8023] (Eclipse Persistence Services - 2.1.2.v20101206-r8635): org.eclipse.persistence.exceptions.JPQLException
Exception Description: Syntax error parsing the query [Reservation.findAbandonedReservation: SELECT r FROM Reservation r LEFT JOIN ReservationInstance ri WHERE ri.reservation.id IS
 NULL].
Internal Exception: org.eclipse.persistence.internal.libraries.antlr.runtime.EarlyExitException
    at org.eclipse.persistence.exceptions.JPQLException.syntaxError(JPQLException.java:352)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.JPQLParser.handleRecognitionException(JPQLParser.java:350)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.JPQLParser.addError(JPQLParser.java:242)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.JPQLParser.reportError(JPQLParser.java:359)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.joinAssociationPathExpression(JPQLParser.java:11880)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.join(JPQLParser.java:11488)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.identificationVariableDeclaration(JPQLParser.java:11302)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.fromClause(JPQLParser.java:11164)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.selectStatement(JPQLParser.java:355)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.document(JPQLParser.java:275)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.JPQLParser.parse(JPQLParser.java:130)
    at org.eclipse.persistence.internal.jpa.parsing.jpql.JPQLParser.buildParseTree(JPQLParser.java:91)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.buildEJBQLDatabaseQuery(EJBQueryImpl.java:207)
    at org.eclipse.persistence.internal.jpa.JPAQuery.processJPQLQuery(JPAQuery.java:106)
    at org.eclipse.persistence.internal.jpa.JPAQuery.prepare(JPAQuery.java:90)
    at org.eclipse.persistence.queries.DatabaseQuery.checkPrepare(DatabaseQuery.java:509)
    at org.eclipse.persistence.queries.DatabaseQuery.checkPrepare(DatabaseQuery.java:470)
    at org.eclipse.persistence.internal.sessions.AbstractSession.processJPAQueries(AbstractSession.java:1815)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.initializeDescriptors(DatabaseSessionImpl.java:409)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.postConnectDatasource(DatabaseSessionImpl.java:666)
    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:615)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:228)
    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:389)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.getServerSession(EntityManagerFactoryImpl.java:164)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:221)
    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:209)
    at org.ace.mrbs.ost.comp.reservation.persistence.ReservationDAO.deleteAbandonedReservation(ReservationDAO.java:110)
    at org.ace.mrbs.ost.comp.reservation.persistence.ReservationDAO.main(ReservationDAO.java:130)
Caused by: org.eclipse.persistence.internal.libraries.antlr.runtime.EarlyExitException
    at org.eclipse.persistence.internal.jpa.parsing.jpql.antlr.JPQLParser.joinAssociationPathExpression(JPQLParser.java:11868)
    ... 23 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T09:23:14.353

我的第一选择是使关系双向。

原来 LEFT JOIN with ON 仅在 JPA 2.1 中受支持，所以我建议这样的事情：

```
SELECT r FROM Reservation r WHERE r IS NOT IN (SELECT ri.reservation FROM ReservationInstance ri) 
```

不是 100% 确定这可行，如果不尝试使用`r.id IS NOT IN`一些查询，则返回 id。

# wpf - 无法识别目标名称

> ID：13929752
> 
> 赞同：4
> 
> 时间：2012-12-18T09:21:23.187
> 
> 标签：wpf, xaml, triggers

我正在尝试启用和禁用`Button`基于`ListBox`. 如果选择了一个值，则应启用该按钮。
我正在尝试使用触发器，但它给了我一个错误

> '目标名称无法识别'。

```
<UserControl x:Class="Qualification.View.QualificationView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             Height="500" Width="500">
    <Grid>
        <Button Name="btnOpen"  Command="Open" CommandParameter="{Binding ElementName=lstName, Path=SelectedValue}"  Height="23" Width="100" Margin="259,325,141,152">Add Qualification</Button>
        <Grid.CommandBindings x:Uid="key">
            <CommandBinding Command="Open" CanExecute="CommandBinding_CanExecute" Executed="CommandBinding_Executed"/>
        </Grid.CommandBindings>
        <Grid.Resources>
            <Style TargetType="{x:Type TextBox}">
                <Style.Triggers>
                    <Trigger Property="Validation.HasError" Value="true">
                        <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Self},
                               Path=(Validation.Errors)[0].ErrorContent}"/>
                    </Trigger>
                </Style.Triggers>                
            </Style>
            <DataTemplate x:Key="eble">
                <DataTemplate.Triggers>
                    <DataTrigger Binding="{Binding Path=IsSelected,RelativeSource={RelativeSource TemplatedParent}}" Value="True">
                        <Setter TargetName="btnOpen" Property="IsEnabled" Value="False"/>
                    </DataTrigger>
                </DataTemplate.Triggers>
            </DataTemplate>
        </Grid.Resources>
        <Label Height="23" Width="100" Margin="17,35,383,442" RenderTransformOrigin="0.48,-3.217">Search</Label>
        <TextBox Name="txtSearch" Text="{Binding Qm.Search, ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged}"  Height="23" Width="122" Margin="103,37,0,440" HorizontalAlignment="Left"></TextBox>
        <Button Name="btnGo"  Height="22" Width="30" Margin="205,37,265,441" RenderTransformOrigin="0.633,-1.318" Click="Button_Click_1">Go</Button>
        <ListBox Name="lstName"  ItemsSource="{Binding DocList}"  Width="218" Margin="17,82,265,152">
        </ListBox>
        <!--<Button Command="{Binding AddQual}" CommandParameter="{Binding ElementName=lstName, Path=SelectedValue}"  Height="23" Width="100" Margin="259,325,141,152">Add Qualification</Button>-->
    </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T09:29:16.157

您可以为处理此问题的按钮创建样式。

```
 <Style x:Key="EnableButtonStyle" TargetType="Button">
        <Style.Triggers>
            <DataTrigger Binding="{Binding Path=SelectedItem, ElementName=yourListBox}" Value="{x:Null}">
                <Setter Property="IsEnabled" Value="False"></Setter>
            </DataTrigger>
         </Style.Triggers>
    </Style> 
```

然后将其绑定到您的按钮：

```
<Button Style="{DynamicResource ResourceKey=EnableButtonStyle}"/> 
```

# php - Why amount zero in paypal integration?

> ID：13929753
> 
> 赞同：1
> 
> 时间：2012-12-18T09:21:30.623
> 
> 标签：php, html, paypal, payment-gateway

I have post variable like this(from firebug)

```
amount: 10.00
bn: PP-BuyNowBF
business:   payments@mymail.com
cancel_return:  http://localhost/ebin/Spacelance/
cmd:    _xclick-subscriptions
currency_code:  USD
invoice:    50d0317a74ba3
item_name:  suite number
item_number:    1
lc: IND
no_note:    1
no_shipping:    1
notify_url: http://localhost/ebin/Spacelance/
return: http://localhost/ebin/Spacelance/home/paypal_subscripton 
```

in my paypal page the amount is $0.00 USD. whats the problem with this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T20:24:30.833

a3 是用于金额的参数。

* * *

a3 - 每次重复计费的金额

p3 - 每次重复之间的时间段数

t3 - 时间段（D=天，W=周，M=月，Y=年）

* * *

示例：[https ://www.paypal.com/cgi-bin/webscr?cmd=_pdn_subscr_techview_outside](https://www.paypal.com/cgi-bin/webscr?cmd=_pdn_subscr_techview_outside)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T12:16:45.117

`amount`不是 的有效参数`_xclick-subscription`。[您可以在https://www.paypalobjects.com/IntegrationCenter/ic_std-variable-ref-subscribe.html](https://www.paypalobjects.com/IntegrationCenter/ic_std-variable-ref-subscribe.html)
找到正确的订阅参数

# php - EXE 文件的唯一 URL

> ID：13929755
> 
> 赞同：0
> 
> 时间：2012-12-18T09:21:37.287
> 
> 标签：php, codeigniter, nginx

我正在开发类似游戏商店的东西。服务器上有很多exe游戏的目录。Fe url 到游戏看起来像[http://site.com/games/gametitle.exe](http://site.com/games/gametitle.exe) 我需要保护 url 免受多次下载。我可以将 md5 用户的 ip 包含在 URL [http://site.com/games/md5](http://site.com/games/md5) ($ip)/gametitle.exe 中，但是如何处理呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:23:49.363

看看 using`readfile`并将`header`文件内容传递到页面，并使用会话来跟踪用户访问链接的次数。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-18T09:26:58.240

使用以下命令创建 index.php：

```
if(!isset($_GET['hash'])) throw new Exception("Missing hash");

if(!isset($_GET['file'])) throw new Exception("Missing filename.");

if(!isset$_GET['hash'] == md5($_SERVER['REMOTE_ADDR'])) throw new Exception("Invalid hash");

header('Location: http://domain/files/'. $_GET['file']); 
```

像 index.php?hash=HASH&file=filetodownload.exe 一样链接它。

# c# - No exception for incorrectly configured WCF server hostname

> ID：13929756
> 
> 赞同：1
> 
> 时间：2012-12-18T09:21:38.823
> 
> 标签：c#, .net, wcf

I have a server client implementation using `WCF` where the clients sends a `Connect` message to the server when it starts.

This is the code I'm using in my client application (WCF service is self hosted in this case):

```
public void InitializeCommunicationChannel()
    {
        this._proxy = new DistributionServiceClient(this._context, "NetTcpBinding_IDistributionService");

        Log.Write(Level.Debug, "Initialized proxy..");

        //set credentials
        this._proxy.ClientCredentials.Windows.ClientCredential.Domain = PasswordManager.ServerAdminDomain;
        this._proxy.ClientCredentials.Windows.ClientCredential.UserName = PasswordManager.ServerAdminUsername;
        this._proxy.ClientCredentials.Windows.ClientCredential.Password = PasswordManager.ServerAdminPassword;

        this._proxy.InnerChannel.Faulted += new EventHandler(this.InnerChannel_Faulted);
        this._proxy.InnerChannel.Closing += new EventHandler(this.InnerChannel_Closing);

        //send a connect message to the server
        try
        {
            Log.Write(Level.Debug, "Sending connect message..");

            this.StationId = this._proxy.ClientConnected(ClientConfiguration.HostName, this.Version, ClientConfiguration.CurrentIpAddress);
            Log.Write(Level.Debug, "Connect message sent..");

            Log.Write(Level.Info, "Connected to server.");
            this.ConnectionState = "Connected";
        }
        catch (ConfigurationErrorsException cEx)
        {
            Log.Write(Level.Error, cEx.Message);
            Log.Write(Level.Debug, cEx.ToString());
        }
        catch (FaultException fEx)
        {
            //probably server didn't recognize configured ip or hostname
            Log.Write(Level.Error, fEx.Message);
            Log.Write(Level.Debug, fEx.ToString());
        }
        catch (CommunicationException cEx)
        {
            Log.Write(Level.Debug, cEx.Message);
            Log.Write(Level.Debug, cEx.ToString());
        }
        catch (System.Security.Authentication.InvalidCredentialException iEx)
        {
            Log.Write(Level.Error, iEx.Message);
            Log.Write(Level.Debug, iEx.ToString());
        }
        catch (Exception ex)
        {
            Log.Write(Level.Error, ex.Message);
            Log.Write(Level.Debug, ex.ToString());
        }

    void InnerChannel_Closing(object sender, EventArgs e)
    {
        Log.Write(Level.Debug, "Communication channel is closing down..");
        this.ConnectionState = "Attempting connection..";
    }

    void InnerChannel_Faulted(object sender, EventArgs e)
    {
        this.ConnectionState = "Not connected";
        Log.Write(Level.Debug, "Communication channel faulted..");

        //something went wrong
        this._proxy.Abort();
        this._proxy.InnerChannel.Faulted -= this.InnerChannel_Faulted;
        this._proxy.InnerChannel.Closing -= this.InnerChannel_Closing;

        //give the server a chance to get back online; retry after 10s
        Thread.Sleep(10000);

        //re-initialize the communication channel
        this.InitializeCommunicationChannel();
    } 
```

The problem that I'm having is that when the server address is not correctly configured in the client's config file, the channel faults when I try to send the `Connect` message, but no exception is being caught.

Is this because the connection is occurring on a different thread therefore it never ends up in my `catch` code? How do I catch endpoint configuration exceptions in code? The `InnerChannel_Faulted`'s `EventArgs` member doesn't contain any useful information.

Thanks a lot.

# php - 如何将外部 php 页面与代码点火器项目链接？

> ID：13929765
> 
> 赞同：0
> 
> 时间：2012-12-18T09:21:59.813
> 
> 标签：php, codeigniter

我的代码点火器项目的根目录中有一个外部照片库，我过去曾用于我的非 MVC 框架项目。我想将该库嵌入到我的新代码点火器项目中。我怎样才能将其作为我的 php 照片来实现库不是基于 MVC 的吗？我的意思是在外部文件夹文件夹中，当我使用我的 IP 地址访问 index.php 时，它工作正常，如下所示：

```
 http://10.0.0.27/myproject/mylibrary/ 
```

但是当我尝试使用这个访问库时：

```
 http://myproject.new/mylibrary/ 
```

它给了我错误 404“找不到页面”，我可以假设这是由于该照片库的非 MVC 模式。我该如何解决这个问题？无论如何我可以像这样访问我的库吗？？？IE。

```
 http://myproject.new/mylibrary/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:27:39.667

由于您`index.php`的 URL 中没有，因此您的 htaccess 中可能有这样的内容：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

上面将除图像和 robots.txt 之外的所有内容重写为您的 index.php，因此您也可以将其修改为排除`mylibrary`：

```
RewriteCond $1 !^(index\.php|images|mylibrary|robots\.txt) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:27:12.053

我假设（根据您的网址）您正在重写网址

如果您使用[默认的基于 codeigniter 的 url 重写模式](http://ellislab.com/codeigniter/user-guide/general/urls.html)，您可以将`/mylibrary/`文件夹添加到排除项目列表

```
RewriteEngine on
RewriteCond $1 !^(index\.php|mylibrary|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

现在您应该可以直接访问该文件夹了

# javascript - DOM 操作后事件处理程序不起作用

> ID：13929766
> 
> 赞同：2
> 
> 时间：2012-12-18T09:22:05.057
> 
> 标签：javascript, jquery

在页面加载时，我将事件处理程序与页面加载时隐藏的内容绑定。

如果用户点击按钮，隐藏的内容被拉出并替换页面的主要内容，现在最初绑定的事件处理程序不起作用。

页面加载时的 HTML 代码

```
<p> Initial content of the page </p>
<button id="button"> Click Here to change content</button>
<div class="show-later" style="display: none;"> Some Hidden content </div> 
```

用户单击按钮后，新的 dom 看起来像这样

```
<p>
 <div>Some Hidden content</div>
</p> 
```

操作后，绑定到 div 元素的事件处理程序不再工作。请注意，在 DOM 操作之后 div 进入了 P 元素。

jQuery代码：

```
 $('#button').click(function(){
      var show_later = $('.show-later').html();
      $('p').html(show_later);
   });

   $(document).ready(function(){
      $('.show-later').click(function(){
       // Do something.....
      });
   }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:37:48.413

您没有移动`<div>`，您只是获取其内容（文本节点）并将其复制到段落中。与您在问题中所说的相反，生成的 DOM 实际上看起来像这样：

```
<p> Some Hidden content </p>
<button id="button"> Click Here to change content</button>
<div class="show-later" style="display: none;"> Some Hidden content </div> 
```

`<div>`仍然存在，它仍然有内容，并且它仍然有`click`绑定到它的事件处理程序；但它仍然是隐藏的，所以你无法点击它。

我建议您实际上将 移动`<div>`到`<p>`元素中，如下所示：

```
$('.show-later').show().appendTo('p'); 
```

这将选择`<div>`，使其可见，然后将元素本身移动到`<p>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:43:19.410

如果你这样做

```
var show_later = $('.show-later').html();
$('p').html(show_later); 
```

那么绑定到的任何事件处理程序都`.show-later`不会绑定到`p`. 您所做的只是更改`p`. 我建议这样更改 HTML：

```
<p class="hide-later"> Initial content of the page </p>
<p class="show-later" style="display: none;"> Some Hidden content </div>
<button id="button"> Click Here to change content</button> 
```

和这样的javascript：

```
$('.show-later').show();
$('.hide-later').hide(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T09:43:26.710

您是否尝试过像这样更改代码？

```
$(document).ready(function(){
    $(document).on('click', '.show-later', function(){
        // Do something.....
    });
}); 
```

**更新2**：

```
$('#button').click(function(){
    var show_later = $('.show-later').html();
    $('p').html(show_later).addClass('show-later');
}); 
```

**Update1**：​​我不确定，你的问题到底是什么。也许您想制作一个 jsfiddle 示例...

'on' 方法注册事件，因此即使您删除元素并创建一个新元素，事件也已注册。

# visual-studio-2012 - Visual Studio 2012 find and replace highlight color is not exact

> ID：13929771
> 
> 赞同：2
> 
> 时间：2012-12-18T09:22:14.617
> 
> 标签：visual-studio-2012

Ok, I am using the Visual Studio 2012 Color Theme Editor extension and I have modified the dark theme a little bit so that it suits my needs.

However I am experiencing an issue with the background color when I am using the Find tool. The issue is that I am setting an exact color for the background of the highlighted string, but it seems that there is some default transparency applied which is not editable even when using the editor mentioned above (VS gives you the option to edit the colors while the custom editor gives you the option to change the opacity as well).

Since I am using the dark theme whichever color I choose it looks like dark grey with a little bit of red/blue/yellow/whatever. I need to set it to something vibrant and not to dark grey with a drop of white for example - I want to easily see what is highlighted when I search.

How do I set it to something vibrant and not to dark grey with a drop of white for example - I want to easily see what is highlighted when I search?

# ios - 识别用户是否在 iOS 6 设置中定义了本机 facebook 帐户

> ID：13929776
> 
> 赞同：7
> 
> 时间：2012-12-18T09:22:41.407
> 
> 标签：ios, facebook, login, native, account

如果用户已在 iPhone 设置中为本地 facebook 使用定义了他的 facebook 帐户，有没有办法通过 FACEBOOK SDK 3.1 和 iOS 6 知道？

我想要做的是在打开我的应用程序时，如果用户在 iPhone 设置中定义了“本机 facebook 帐户”，则立即显示“允许/不允许”iOS 6 警报。但我只想为本地集成做这件事。我的意思是，如果知道我可以尝试使用 FBSession 的“openSession”，它会显示它，但如果用户尚未定义本机帐户，我不希望应用程序转到 Safari 或 facebook 应用程序. 所以我想只有在用户定义了一个帐户时才尝试连接。

有谁知道知道的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-27T17:31:21.277

这对我有用：

```
//Step 1\. create and store an ACAccountStore in an ivar
ACAccountStore* as = [[ACAccountStore alloc] init];
self.accountStore = as;
[as release];

//Step 2\. Get the facebook account type
//Do not use the constant if you are in iOS5, use this string:@"com.apple.facebook"
ACAccountType* at = [self.accountStore accountTypeWithAccountTypeIdentifier: @"com.apple.facebook"];

//Step 3\. request access to the facebook account, passing your facebook app id
__block typeof(self) bself = self;
[self.accountStore requestAccessToAccountsWithType:at
                            options:@{(NSString *)ACFacebookAppIdKey: kFBAppId }
                         completion:^(BOOL granted, NSError *error)
 {
     //Step 4\. Check if the account is integrated natively
     //Note: if granted is NO, check for the error to see what's going on.
     BOOL nativeAccount = granted == YES && [bself.accountStore accountsWithAccountType:at];

     //Step 5\. clean the account store.
     bself.accountStore = nil;
 }]; 
```

# git - 根据域/网址更改 Mod RewriteBase

> ID：13929778
> 
> 赞同：1
> 
> 时间：2012-12-18T09:22:49.330
> 
> 标签：git, apache, .htaccess, mod-rewrite, githooks

我想根据域更改 RewriteBase。在一个完美的世界中，我会在 .htaccess 本身中执行此操作。但我的理解是，这是不可能的。

问题是我在我们的开发服务器上有一个本地 git repo 和一个 repo。开发服务器上的 repo 位于子文件夹 (example.com/mysite) 中，而本地只是 example.lo。

所以在服务器上我必须将 RewriteBase 设置为 /mysite

那么我的问题是，解决这个问题的最佳解决方案是什么？我们可以使用 git hooks 在裸服务器 repo 上触发 bash 脚本。

当 repo 为 --bare 并使用此 post 接收挂钩时，将 .htaccess 添加到 .gitignore 是否有效？：

```
#!/bin/sh
GIT_WORK_TREE=/Users/Admin/Sites/mysite git checkout -f 
```

如果我不清楚任何事情，请发表评论。感谢所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:22:30.203

这种接收后挂钩可以工作，但你最终可能会得到一个`Not a git repository '.'”</code> error message.`

`See "[Git checkout in post-receive hook: “<code>Not a git repository '.'](https://stackoverflow.com/questions/10507942/git-checkout-in-post-receive-hook-not-a-git-repository)`[”</a>”：你也应该设置`GIT_DIR`，而不仅仅是`GIT_WORK_TREE`.](https://stackoverflow.com/questions/10507942/git-checkout-in-post-receive-hook-not-a-git-repository)

 [> 问题是它是否会在`.htaccess`检出文件时删除文件，当文件`.htaccess`在`.gitignore`文件中时

不，你不会删除它。](https://stackoverflow.com/questions/10507942/git-checkout-in-post-receive-hook-not-a-git-repository) 

[如果您仍需要更新其值（取决于域）并使用 git 对其进行版本化，请使用内容过滤器：请参阅“](https://stackoverflow.com/questions/10507942/git-checkout-in-post-receive-hook-not-a-git-repository)[处理项目配置文件的最简单方法是什么？](https://stackoverflow.com/a/6826682/6309) ”。

# asp.net - 在asp.net中加入/合并两个excel文件并在gridview中显示

> ID：13929780
> 
> 赞同：0
> 
> 时间：2012-12-18T09:22:52.950
> 
> 标签：asp.net, linq

我正在尝试在 asp.net 中合并两个 excel 文件，并将它们作为一个表格显示在 gridview 中。下面的代码只显示一个表。谁能告诉我下面的代码有什么问题？如果您有更好的想法，请告诉我。

```
protected void MergTables()
        {
            string connString = ConfigurationManager.ConnectionStrings[hwTypes].ConnectionString;
            OleDbConnection DBConnection = new OleDbConnection(connString);
            DBConnection.Open();
            OleDbCommand DBCommand = new OleDbCommand("SELECT * FROM [Sheet1$]", DBConnection);
            OleDbDataAdapter da = new OleDbDataAdapter(DBCommand);
            DataSet ds = new DataSet("Stock");
            da.Fill(ds, "HWTypes");
            DBConnection.Close();
            string _stockConn = ConfigurationManager.ConnectionStrings[stockConn].ConnectionString;
            DBConnection = new OleDbConnection(_stockConn);
            DBConnection.Open();
            DBCommand = new OleDbCommand("SELECT * FROM [Stock_voorlopig$]", DBConnection);
            da = new OleDbDataAdapter(DBCommand);
            da.Fill(ds, "Stock");

            DBConnection.Close();
            for (int i = 0; i < ds.Tables["HWTypes"].Rows.Count; i++)
            {
                ds.Tables["HWTypes"].Rows[i]["ProductID"] = ds.Tables["Stock"].Rows[i]["Partno"];
            }

            GridView1.DataSource = ds.Tables["Stock"];
            GridView1.DataBind();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:36:26.913

问题是您只使用了一个`DataTable`，`GridView`而您还没有加入两者。

这是一种`Linq-To-DataSet`用于连接两个表并创建匿名类型作为`GridView`.

```
DataSet ds = new DataSet("Stock");
using (var dbConnection = new OleDbConnection(connString))
using (var dbCommand = new OleDbCommand("SELECT * FROM [Sheet1$]", dbConnection))
using (var da = new OleDbDataAdapter(dbCommand))
{
    da.Fill(ds, "HWTypes");
}

using (var dbConnection = new OleDbConnection(stockConn))
using (var dbCommand = new OleDbCommand("SELECT * FROM [Stock_voorlopig$]", dbConnection))
using (var da = new OleDbDataAdapter(dbCommand))
{
    da.Fill(ds, "Stock");
}

var joined = from rType in ds.Tables["HWTypes"].AsEnumerable()
             join rStock in ds.Tables["Stock"].AsEnumerable()
             on rType.Field<string>("ProductID") equals rStock.Field<string>("Partno")
             select new
             {
                 ProductID = rType.Field<string>("ProductID")
                 // add the other columns you need here
             };

GridView1.DataSource = joined;
GridView1.DataBind(); 
```

# java - Post 函数在 Spring 3.0 中未绑定

> ID：13929782
> 
> 赞同：0
> 
> 时间：2012-12-18T09:22:54.817
> 
> 标签：java, spring, spring-mvc

这可能已被问过很多次，但在过去的两天里我一直无法找到具体的答案。使用 Spring 3.2。

我有两种方法。一种用于创建表单，另一种用于发布表单。表单创建工作正常。但是当我尝试发布/提交表单时，我看不到日志语句在该`login()`方法中被执行，并且我收到一个 404 错误 HTTP Status 404 - /sample/login.

我认为问题是表单无法提交到 URL，但我不知道如何修复映射以使其工作。

如果还有其他需要的文件，请告诉我。BTW 以下示例来自 sprin/mvc-basic 和 spring/petclinic

```
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

import example.domain.User;
import example.service.UserValidator;

@Controller
@RequestMapping(value="/login")
public class LoginFormController {  

   protected final Log logger = LogFactory.getLog(getClass());

   @RequestMapping(method=RequestMethod.GET)
   public String loadForm(Model model) {
        logger.info("LoginFormController login");
        model.addAttribute("user", User.getUserInstance());
        return "login";
   }

   @RequestMapping(method=RequestMethod.POST)
   public String login(@ModelAttribute User user, BindingResult result) {
        logger.info("post");
        new UserValidator().validate(user, result);
        if (result.hasErrors()) {
            return "login";
         } else {
            logger.info("Email Id: " + user.getEmailId());
            //this.clinic.storeOwner(owner);
            //status.setComplete();
            return "redirect:/landing/" + user.getEmailId();
         }
   }
} 
```

登录.jsp

```
 <%@ include file="/WEB-INF/jsp/include.jsp"%>
    <%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>

    <html>
    <head>
    <title><fmt:message key="title" /></title>
    <style>
    .error {
        color: red;
    }
    </style>
    </head>
    <body>
        <h1>
            <fmt:message key="login.heading" />
        </h1>
        <form:form method="post" modelAttribute="user" action="login">
            <table width="95%" bgcolor="f8f8ff" border="0" cellspacing="0" cellpadding="5">
                <tr>
                    <td align="right" width="20%"><form:label for="emailId" path="emailId" cssErrorClass="error">Email ID:</form:label></td>
                    <td width="20%"><form:input path="emailId" /></td>
                    <td width="60%"><form:errors path="emailId" cssClass="error" /></td>
                </tr>
                <tr>
                    <td align="right" width="20%"><form:label for="password" path="password" cssErrorClass="error">Password:</form:label></td>
                    <td width="20%"><form:input path="password" /></td>
                    <td width="60%"><form:errors path="password" cssClass="error" /></td>
                </tr>
            </table>
            <br>
            <input type="submit" align="center" value="Login">
        </form:form>
        <a href="<c:url value="signup.htm"/>">Signup</a>
    </body>
    </html> 
```

名称-servlet.xml

```
<bean....>
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"></property>
        <property name="prefix" value="/WEB-INF/jsp/"></property>
        <property name="suffix" value=".jsp"></property>
   </bean>

 </bean> 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:52:28.507

似乎您已将`*.htm`URL 映射到`DispatcherServlet`（从 猜测`/signup.htm`）。将表单标记中的操作更改为，`login.htm`而不是`login`：

```
<form:form method="post" modelAttribute="user" action="login.htm"> 
```

# c# - Values for partial view model are null on submit

> ID：13929787
> 
> 赞同：1
> 
> 时间：2012-12-18T09:23:11.857
> 
> 标签：c#, asp.net-mvc

I cant successfully post the values from my partial view to my action - all the properties are null.

Partial View Model:

```
public class AddressViewModel
{
   public string ClientNumber { get; set; }
   public string Line1 { get; set; }
   public string Line2 { get; set; }
   public string Line3 { get; set; }
   public string Suburb { get; set; }
   public string PostalCode { get; set; }
} 
```

Partial View:

```
@model Models.AddressViewModel
@{
    Layout = null;
}

@using (Html.BeginForm("UseAddress", "Home"))
    { 
<div>
    <table>
        <tr>
            <td>
                <div class="display-label">
                    @Html.DisplayNameFor(model => model.Line1)
                </div>
            </td>
            <td>
                <div class="display-field">
                    @Html.DisplayFor(model => model.Line1)
                </div>
            </td> 
........
        </tr>
    </table>

    <input type="submit" name="UseAddress" id="submitbutton" value="Use Address" />

</div>
} 
```

Action:

```
[HttpPost]
[Authorize]
public ActionResult UseAddress(AddressViewModel model)
{
    return RedirectToAction("Index", "Home");
} 
```

The partial view is rendered on the page by selecting a dropdown as follows:

```
<script type="text/javascript">
    $(function () {
        $('#AddressTypeDropdownList').change(function () {          
            var url = $(this).data('url');          
            $('#Address').load(url);
        });
    });
</script>

    @Html.DropDownListFor(
    x => x.SelectedAddressTypeId,
    new SelectList(Model.AddressTypes, "Value", "Text"),
    "-- Select Address Type --",
         new
         {
             id = "AddressTypeDropdownList",
             data_url = Url.Action("_Address", "Home")
         }
    )
    <div id="Address"></div>          

    public ActionResult _Address()
    {        
        AddressViewModel addressViewModel = new AddressViewModel {
            ClientNumber = "test"          
        };         

        return PartialView(addressViewModel);
    } 
```

I would expect the UseAddress method to have the `model.ClientNumber == "test"` when I click the submit button but it is null...Is there anything obvious that I'm doing wrong?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T10:16:29.487

DisplayFor 不会为该字段创建输入，因此不会被发布。您需要添加

```
@Html.HiddenFor(model => model.Line1)
.... 
```

发布值。

# c# - I've Got This Response From The GCM Server {"success":1} But the Notification not Come to the Device

> ID：13929790
> 
> 赞同：5
> 
> 时间：2012-12-18T09:23:19.347
> 
> 标签：c#, android, push-notification, google-cloud-messaging

I am trying to Notify the Device by the Push Notification

I Received this Response From THE `GCM` Server

`{"multicast_id":8594338261894783737,"success":1,"failure":0,"canonical_ids":0,"results":[{"message_id":"0:1355822022916886%8ae6056ef9fd7ecd"}]}`

But Still Not get the Notification

With Knowledge That --> `"success":1`

But I Think there is something Wrong Here --> `"canonical_ids":0`

* * *

This Is My Code ...

```
 private string SendGCMNotification(string apiKey, string postData, string postDataContentType = "application/json")
 {
     ServicePointManager.ServerCertificateValidationCallback += new RemoteCertificateValidationCallback(ValidateServerCertificate);

     //
     //  MESSAGE CONTENT
     byte[] byteArray = Encoding.UTF8.GetBytes(postData);

     //
     //  CREATE REQUEST
     HttpWebRequest Request = (HttpWebRequest)WebRequest.Create("https://android.googleapis.com/gcm/send");
     Request.Method = "POST";
     Request.KeepAlive = false;
     Request.ContentType = postDataContentType;
     Request.Headers.Add(HttpRequestHeader.Authorization, string.Format("key={0}",apiKey));
     Request.ContentLength = byteArray.Length;

     Stream dataStream = Request.GetRequestStream();
     dataStream.Write(byteArray, 0, byteArray.Length);
     dataStream.Close();

     try
     {
         WebResponse Response = Request.GetResponse();
         HttpStatusCode ResponseCode = ((HttpWebResponse)Response).StatusCode;
         if (ResponseCode.Equals(HttpStatusCode.Unauthorized) || ResponseCode.Equals(HttpStatusCode.Forbidden))
         {
          Label1.Text = "Unauthorized - need new token";

         }
         else if (!ResponseCode.Equals(HttpStatusCode.OK))
         {
             Label1.Text = "Response from web service isn't OK";
         }

         StreamReader Reader = new StreamReader(Response.GetResponseStream());
         string responseLine = Reader.ReadToEnd();
         Reader.Close();

         return responseLine;
     }
     catch (Exception e)
     {
         return "error";
     }
    // return "error";
 } 
```

and i call this method using

```
 string deviceId = "APA91bHomX3zb6Y87fb4GAjyj8zIaI-tt1n6ZFmgtmu16nmLW7ntwnOyv4BXMH7RzQWk3JrKdLjttJMxKzvpFd3Kmrid_RzsC3zR46GLJGiZKERXOSIR8fYReBEfz1f0G_FIm5bPttWUBDwz9jPuF2lS8RQh-0DKbw";
     string message = "some test message";
     string tickerText = "example test GCM";
     string contentTitle = "content title GCM";
     string postData =
     "{ \"registration_ids\": [ \"" + deviceId + "\" ], " +
       "\"data\": {\"tickerText\":\"" + tickerText + "\", " +
                  "\"contentTitle\":\"" + contentTitle + "\", " +
                  "\"message\": \"" + message + "\"}}";

     Label1.Text = SendGCMNotification("AIzaSyBEvtrtbbfy2-p2zS8Zi8DweZiRy8M-nZc", postData); 
```

Thanks In Advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:53:58.850

查看 GCM 文档中的响应格式：http: [//developer.android.com/google/gcm/gcm.html#response](http://developer.android.com/google/gcm/gcm.html#response)

```
success     Number of messages that were processed without an error. 
```

我理解这意味着 GCM 能够处理该消息，这并不意味着该消息已成功发送到设备。（例如，设备可能离线，稍后会收到，但消息已成功处理）。

"canonical_ids":0 并不意味着有错误，这意味着没有需要更新其 ID 的设备。您可以在此处阅读有关规范 ID 的更多信息：http: [//developer.android.com/google/gcm/adv.html#canonical](http://developer.android.com/google/gcm/adv.html#canonical)

> 在服务器端，只要应用程序运行良好，一切都应该正常工作。但是，如果应用程序中的错误触发同一设备的多个注册，则可能很难协调状态，并且您最终可能会收到重复的消息。
> 
> GCM 提供了一种称为“规范注册 ID”的工具，可以轻松地从这些情况中恢复。规范注册 ID 定义为您的应用程序请求的最后一次注册的 ID。这是服务器在向设备发送消息时应使用的 ID。
> 
> 如果稍后您尝试使用不同的注册 ID 发送消息，GCM 将照常处理请求，但它将在响应的 registration_id 字段中包含规范注册 ID。确保使用此规范 ID 替换存储在您服务器中的注册 ID，因为最终您使用的 ID 将停止工作。

我建议向您的客户端添加一些日志记录代码，以确保您没有收到该消息。特别是在您的 GCMIntentService 类的 onMessage() 方法中。

# sql - Execute immediate dbms_output.put_line

> ID：13929793
> 
> 赞同：2
> 
> 时间：2012-12-18T09:23:33.090
> 
> 标签：sql, oracle, plsql, oracle-sqldeveloper

I have code like this:

```
set serveroutput on

declare
v_str varchar2(200);
begin
v_str := q'!dbms_output.put_line('Hello world');!';
Execute immediate v_str;
end; 
```

Oracle SQL Developer says that there's invalid SQL Statement, what's the problem?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T09:28:36.563

```
declare
v_str varchar2(200);
begin
v_str := q'!begin dbms_output.put_line('Hello world'); end;!';
Execute immediate v_str;
end;
/ 
```

作品...

# python - python用少一个字符替换子字符串

> ID：13929801
> 
> 赞同：0
> 
> 时间：2012-12-18T09:23:53.117
> 
> 标签：python, regex

我需要处理语法类似于 markdown [http://daringfireball.net/projects/markdown/syntax](http://daringfireball.net/projects/markdown/syntax)的行，在我的例子中，标题行类似于：

```
=== a sample header ===
===== a deeper header ===== 
```

我需要改变它们的深度，即减少（或增加）它：

```
== a sample header ==
==== a deeper header ==== 
```

我对 python 正则表达式的了解不足以理解如何用 (n-1) '=' 符号替换 n 个 '='

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T09:30:44.753

您可以使用[反向引用](http://www.regular-expressions.info/brackets.html)和两个[否定环顾](http://www.regular-expressions.info/lookaround.html)来查找两组对应的`=`字符。

```
output = re.sub(r'(?<!=)=(=+)(.*?)=\1(?!=)', r'\1\2\1', input) 
```

如果您有一个包含多个标题的较长字符串（并将更改所有标题），这也将起作用。

正则表达式有什么作用？

```
(?<!=)  # make sure there is no preceding =
=       # match a literal =
(       # start capturing group 1
  =+    # match one or more =
)       # end capturing group 1
(       # start capturing group 2
  .*?   # match zero or more characters, but as few as possible (due to ?)
)       # end capturing group 2
=       # match a =
\1      # match exactly what was matched with group 1 (i.e. the same amount of =)
(?!=)   # make sure there is no trailing = 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:36:56.220

不需要正则表达式。我会非常简单直接：

```
import sys

for line in sys.stdin:
    trimmed = line.strip()
    if len(trimmed) >= 2 and trimmed[0] == '=' and trimmed[-1] == '=':
        print(trimmed[1:-1])
    else:
        print line.rstrip() 
```

首字母`strip`很有用，因为在 Markdown 中人们有时会在行尾（也可能是开头）留下空格。相应地调整以满足您的要求。

这是一个[现场演示](http://ideone.com/ATpeUa)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T09:38:36.060

我认为它可以像替换一样`'=(=+)'`简单`\1`。

有什么理由不这样做吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T09:39:56.853

一个简单的解决方案怎么样？

```
lines = ['=== a sample header ===', '===== a deeper header =====']
new_lines = []
for line in lines:
    if line.startswith('==') and line.endswith('=='):
        new_lines.append(line[1:-1]) 
```

结果：

```
['== a sample header ==', '==== a deeper header ===='] 
```

或在一行中：

```
new_lines = [line[1:-1] for line in lines if line.startswith('==') and line.endswith('==')] 
```

这里的逻辑是，如果它以 '==' 开头和结尾，那么它必须至少有那么多，所以当我们删除/修剪每一边时，每边至少留下 '='。

只要每条“行”都以其“==....”开头和结尾，这将起作用，并且如果您将它们用作标题，那么只要您去掉换行符，它们就会起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T09:41:53.300

第一个标题或第二个标题，您可以像这样使用字符串替换

```
s = "=== a sample header ==="
s.replace("= "," "）
s.replace(" ="," ") 
```

你也可以像这样处理第二个标题

btw:你也可以使用re模块的子功能，但不是必须的

# jboss - jboss 6 和 jboss 7 独立服务器之间的区别？

> ID：13929803
> 
> 赞同：1
> 
> 时间：2012-12-18T09:24:06.300
> 
> 标签：jboss, jboss7.x

我正在使用 Jboss 6 。我想知道 jboss 7 没有 jboss 6 的很多文件夹。如果有人解释 jboss 7 独立服务器和以前版本之间的区别，那将会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:49:12.917

AS7 在很多方面与其前身 AS6、5 不同。所以不可能在这里列出所有的差异。

要列出支持的技术相关差异，请参阅下表。

![在此处输入图像描述](../Images/c9c8453dd523f10047d2f4e03217a4d4.png)

一些主要区别：（感谢@Jyore 的补充）

1.  模块化（按需）类加载
2.  添加域托管节点（多JVM管理）
3.  所有配置都是在`Standalone.xml`独立模式和`domain.xml`域模式下完成的。

关于新的目录结构

1.  configuration ：在此安装之外运行的独立服务器的配置文件。正在运行的服务器的所有配置信息都位于此处，并且是对独立服务器进行配置修改的唯一位置。

2.  data ：服务器写入的持久信息，以在服务器重新启动后继续存在

3.  部署：最终用户部署内容可以放置在此目录中，以便自动检测并将该内容部署到服务器的运行时。注意：建议使用服务器的管理 API 来安装部署内容。为方便开发人员，保留基于文件系统的部署扫描功能。

4.  lib/ext ：使用 Extension-List 机制的应用程序引用的已安装库 jar 的位置

5.  log : 独立服务器日志文件

6.  tmp ：服务器写入的临时文件的位置

除此之外，我真的不想在网络上复制信息

有[从 AS5、AS6 到 AS7 的迁移指南](https://docs.jboss.org/author/display/AS7/How+do+I+migrate+my+application+from+AS5+or+AS6+to+AS7)。这可以帮助您了解切换到 AS7 通常需要进行哪些配置更改。它还指出了发生重大变化的地方，强烈建议您仔细阅读。

您也可以阅读[AS7 入门](https://docs.jboss.org/author/display/AS7/Getting+Started+Guide#GettingStartedGuide-GettingStartedwithJBossApplicationServer7)，以更好地了解 AS7

# html - 为什么当我在 css 中将某些东西浮动到左侧时，我无法将其中一项覆盖到右侧

> ID：13929815
> 
> 赞同：1
> 
> 时间：2012-12-18T09:24:56.227
> 
> 标签：html, css

这是我的代码：

```
<html>
<head>
<style>
#wrap{
      border: 1px solid black;
      width: 500px;
      height: 200px;
}

#wrap div{
     border: 1px solid red;
     width: 100px;
     height: 150px;
     float: left;
}

.item2{
   float: right;
}
</style>
</head>
<body>
<div id="wrap">
    <div class="item1"></div>
    <div class="item2"></div>
</div>
</body>
<html> 
```

为什么我的 div item 2 没有正确流动？任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T09:26:46.790

因为[CSS 优先级](http://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/)。

将您的选择器更改为：

```
#wrap .item2{
   float: right;
} 
```

[见工作演示](http://jsfiddle.net/uXs9h/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:27:51.767

您看到了 CSS 特异性的问题。

这里有一篇很棒的文章：

[http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

但是，请尝试以下操作：

```
<style>
#wrap{
      border: 1px solid black;
      width: 500px;
      height: 200px;
}

#wrap div{
     border: 1px solid red;
     width: 100px;
     height: 150px;
     float: left;
}

#wrap .item2{
   float: right;
}
</style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T09:28:28.353

```
#wrap div.item2{float: right;} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-18T09:27:21.190

[演示](http://jsfiddle.net/tgqNF/)
试试这个：

```
.item2{
   float: right !important;
} 
```

# google-apps-script - 谷歌电子表格中的截止日期前 30 天

> ID：13929817
> 
> 赞同：0
> 
> 时间：2012-12-18T09:25:01.387
> 
> 标签：google-apps-script, google-sheets, google-spreadsheet-api

我有一个电子表格，我想在其中保存提醒日期，该日期将在截止日期前 30 天。

请注意，我正在处理的原始工作表没有列“Start_Date”和“End_Date”，它们在共享电子表格中以黄色突出显示。

请建议根据共享电子表格中的“End_Day”列设置日期前 30 天？

以下是共享电子表格以供参考

[https://docs.google.com/spreadsheet/ccc?key=0AhrpdumTdTjYdENLeU8yWkpNQm93MDJvREl1M3Y1aHc](https://docs.google.com/spreadsheet/ccc?key=0AhrpdumTdTjYdENLeU8yWkpNQm93MDJvREl1M3Y1aHc)

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:12:51.100

要从日 (G2)、月 (H2) 和年 (I2) 列创建日期：

`F2: =DATE(I2;H2;G2)`

要创建比您刚刚生成的日期少 30 天的日期 (F2)：

`J2: =F2-30`

# iphone - 我怎样才能让pickerview的标题变成文本

> ID：13929819
> 
> 赞同：2
> 
> 时间：2012-12-18T09:25:02.810
> 
> 标签：iphone, objective-c, ios

我正在编写一个应用程序，当我们单击文本字段时，它会生成一个pickerview。pickerview 有两个组件

现在我的问题是我想获得两个组件的标题，这些组件在我的文本字段中突出显示，用逗号（，）分隔

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:37:33.060

假设您有一个`UIPickerView`名为 pickerView 的对象。当用户完成他的操作并点击完成按钮时，您应该将选定的值设为

```
int offset1 = [pickerView selectedRowInComponent:0];
int offset2 = [pickerView selectedRowInComponent:1];

NSString *str = [NSString stringWithFormat:@"%@,%@",[arrOne objectAtIndex:offset1],[arrTwo objectAtIndex:offset2]]; 
```

其中 arrOne 和 arrTwo 是用于填充选取器视图的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:35:13.017

如果您设置了 pickerview 代表，则将此代码段写在

```
- (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
    for(NSUInteger k = 0; k < <number of components>s; ++k++)
    {
        NSUInteger selectedRow = [<Your pickerview name> selectedRowInComponent:k];
        NSString *title = [[<Your pickerview name> delegate] pickerView:<Your pickerview name> titleForRow:selectedRow inComponent:i];
       [<Your temporary string> appendFormat:@"Selected item \"%@\" in component %lu\n", title, i];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T09:49:39.667

如果您添加`UIPickerViewDataSource,UIPickerViewDelegate`委托，那么在委托方法中您可以直接分配此值，如下所示...

```
- (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
    yourTextField.text = [NSString stringWithFormat:@"%@,%@",[arr1 objectAtIndex:row],[arr2 objectAtIndex:row]];

} 
```

希望这可以帮助你...

# axis2 - 从 WSDL 创建客户端 jar

> ID：13929820
> 
> 赞同：0
> 
> 时间：2012-12-18T09:25:05.480
> 
> 标签：axis2, wsdl2java

我应该使用第三方公开的 SOAP 服务。我有两个基本问题：

Q1。WSDL 需要基本身份验证才能通过浏览器进行访问。现在，当我尝试`wsgen/WSDL2JAVA/`使用`Eclipse Webservice`客户端创建客户端 jar 时，我得到`HTTP 401 unauthorised`. 如果我在本地下载并保存 WSDL 然后使用`axis's WSDL2JAVA`，我会得到

* * *

```
Exception in thread "main" org.apache.axis2.wsdl.codegen.CodeGenerationException: Error parsing WSDL
    at org.apache.axis2.wsdl.codegen.CodeGenerationEngine.<init>(CodeGenerationEngine.java:178)
    at org.apache.axis2.wsdl.WSDL2Code.main(WSDL2Code.java:35)
    at org.apache.axis2.wsdl.WSDL2Java.main(WSDL2Java.java:24)
Caused by: javax.wsdl.WSDLException: WSDLException: faultCode=PARSER_ERROR: Problem parsing 'file:/C:/TEST/TOOLS/Authentication.wsdl'.: org.xml.sax.SAXParseException: The prefix "wsdl" for element "wsdl:definitions" is not bound.
    at com.ibm.wsdl.xml.WSDLReaderImpl.getDocument(Unknown Source)
    at com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(Unknown Source)
    at com.ibm.wsdl.xml.WSDLReaderImpl.readWSDL(Unknown Source)
    at org.apache.axis2.wsdl.codegen.CodeGenerationEngine.readInTheWSDLFile(CodeGenerationEngine.java:320)
    at org.apache.axis2.wsdl.codegen.CodeGenerationEngine.<init>(CodeGenerationEngine.java:133)
    ... 2 more
Caused by: org.xml.sax.SAXParseException: The prefix "wsdl" for element "wsdl:definitions" is not bound.
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:249)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:284)
    ... 7 more 
```

* * *

Q2。我们如何处理频繁更改的 WSDL，我们是否每次都生成客户端 jar 并重新部署应用程序？

帮助我创建的任何指示`client.jar`都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T20:45:08.093

您绝对应该为 WSDL 中的每个更改重新部署您的 client.jar。

我建议你这样做。

1.  创建一个 jar 项目以从 wsdl 生成类。例如，检查 cxf-codegen-plugin wsdl2java。
2.  创建另一个引用前一个项目的 jar 项目（Client.jar）。

因此，每当 WSDL 发生变化时，您都应该修改项目中的 WSDL URL，然后构建两个 jar 项目以创建 Client.jar。更好的做法是使用 WSDL URL 作为 Client.jar 内部或外部的可配置属性值来维护它。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T19:55:51.940

在您的 wsdl 文件中，检查 xmlns:wsdl 属性的 "<"wsdl:definitions">" 标记，如果缺少它会抛出错误：

“org.xml.sax.SAXParseException：元素“wsdl:definitions”的前缀“wsdl”未绑定”在您发布的错误摘要的第 5 行找到。

在下面的示例中，您将看到由 xmlns（xml 命名空间）属性定义的前缀：

```
<wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
xmlns:ns1="http://org.apache.axis2/xsd" 
xmlns:ns="http://pojo.service.quickstart.samples" 
xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" 
xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" 
xmlns:xs="http://www.w3.org/2001/XMLSchema" 
xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" 
xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" 
xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" 
targetNamespace="http://pojo.service.quickstart.samples"> 
```

在此处查看 xml 命名空间的工作方式：http: [//www.w3schools.com/xml/xml_namespaces.asp](http://www.w3schools.com/xml/xml_namespaces.asp)

# xaml - 如何使用 WPF 2010 的 TextBox 模板

> ID：13929824
> 
> 赞同：-1
> 
> 时间：2012-12-18T09:25:13.943
> 
> 标签：xaml, templates

我有一个用 xaml 编写的模板。你能写出如何为 TextBox 打开模板吗？

```
 <Grid.Resources>
        <Storyboard x:Key="FlashErrorIcon">
        <ObjectAnimationUsingKeyFrames BeginTime="00:00:00"                                        Storyboard.TargetProperty="(UIElement.Visibility)">
                <DiscreteObjectKeyFrame KeyTime="00:00:00" Value="{x:Static Visibility.Hidden}"/>                                 
                <DiscreteObjectKeyFrame KeyTime="00:00:03.2000000" Value="{x:Static Visibility.Visible}"/>
                <DiscreteObjectKeyFrame KeyTime="00:00:01" Value="{x:Static Visibility.Visible}"/>
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>
        <Style TargetType="{x:Type TextBox}">
            <Style.Triggers>
                <Trigger Property="Validation.HasError" Value="true">
                    <Setter Property="Background" Value="Pink"/>
                    <Setter Property="Foreground" Value="Black"/>
                </Trigger>
            </Style.Triggers>
            <Setter Property="Validation.ErrorTemplate">
                <Setter.Value>
                    <ControlTemplate>
                        <DockPanel LastChildFill="True"                    
                                   ToolTip="{Binding ElementName=controlWithError,Path=AdornedElement.(Validation.Errors)[0].ErrorContent}">
                            <Ellipse DockPanel.Dock="Right" 
                             ToolTip="{Binding ElementName=controlWithError, 
                                 Path=AdornedElement.(Validation.Errors)[0].ErrorContent}"
                             Width="15" Height="15" 
                             Margin="-25,0,0,0"
                             StrokeThickness="1" Fill="IndianRed" >
                                <Ellipse.Stroke>
                                    <LinearGradientBrush EndPoint="1,0.5" StartPoint="0,0.5">
                                        <GradientStop Color="#FFFA0404" Offset="0"/>
                                        <GradientStop Color="#FFC9C7C7" Offset="1"/>
                                    </LinearGradientBrush>
                                </Ellipse.Stroke>
                                <Ellipse.Triggers>
                                    <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                                        <BeginStoryboard Storyboard="{StaticResource FlashErrorIcon}"/>
                                    </EventTrigger>
                                </Ellipse.Triggers>
                            </Ellipse>
                            <TextBlock DockPanel.Dock="Right" 
                            ToolTip="{Binding ElementName=controlWithError, 
                                 Path=AdornedElement.(Validation.Errors)[0].ErrorContent}"
                            Foreground="White"
                            FontSize="10" 
                            Margin="-15,5,0,0" FontWeight="Bold">!
                        <TextBlock.Triggers>
                            <EventTrigger RoutedEvent="FrameworkElement.Loaded">
                                <BeginStoryboard Storyboard="{StaticResource FlashErrorIcon}"/>
                            </EventTrigger>
                        </TextBlock.Triggers>
                            </TextBlock>
                            <Border BorderBrush="Red" BorderThickness="1">
                                <AdornedElementPlaceholder Name="controlWithError"/>
                            </Border>
                        </DockPanel>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Grid.Resources> 
```

我试图以不同的方式在 TextBox 中包含，但我没能做到。如何包含此模板？

```
 <TextBox>?????????What should I write here???????????>
     ?????????What should I write here???????????
    </TextBox> 
```

如何开启模板？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:50:49.110

您忘记将密钥添加`textBoxInError`到您的 TextBox 样式：

```
<Grid.Resources>
    ...
    <Style x:Key="textBoxInError" TargetType="{x:Type TextBox}">
        ...
    </Style>
    ...
</Grid.Resources> 
```

* * *

如果没有该键，则 Style 将作为 TextBox 的默认样式处理。在这种情况下，您不会在 TextBox 声明中显式引用样式，并且必须删除该`Style="{StaticResource textBoxInError}"`部分。

* * *

编辑：如果您的 Style 包含在资源字典中（例如`Grid.Resources`在您的 XAML 中）并且具有如上所示的 Key ( `textBoxInError`)，您将像这样使用该 Style：

```
<Grid>
    <Grid.Resources>
        <Style x:Key="textBoxInError" TargetType="{x:Type TextBox}">
        ...
        </Style>
        ...
    </Grid.Resources>
    ...
    <TextBox Style="{StaticResource textBoxInError}" ... />
</Grid> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:51:32.777

你的风格有以下减速：

这意味着此样式将应用于**所有**文本框。*除非*你自己设置不同的风格。

当你写这个：

```
<TextBox Validation.ErrorTemplate="{StaticResource FlashErrorIcon}"
     Style="{StaticResource textBoxInError}" TabIndex="1" Margin="147,145,168,131"> 
```

您正在更改默认样式（更改为名为 的样式`textboxInError`）...

所以只需`Style`从文本框中删除该属性。

**另一种解决方案**

如果您想为样式指定一个特定名称而不是使其成为默认样式，请使用：

```
<Style TargetType="{x:Type TextBox}" x:Key="textBoxInError" > 
```

然后您的原始代码将正常工作，例如

```
<TextBox Style="{StaticResource textBoxInError}" /> 
```

# mod-rewrite - 使用 .htaccess 重写查询字符串

> ID：13929828
> 
> 赞同：0
> 
> 时间：2012-12-18T09:25:36.813
> 
> 标签：mod-rewrite

我正在尝试对查询字符串进行非常简单的重写

```
http://www.example.com/library.php?q=abscessed-tooth 
```

至

```
http://www.example.com/library/abscessed-tooth 
```

这是我在 .htaccess 文件中编写的代码，它什么也没做

```
RewriteEngine On
RewriteRule ^/library/?([^/]*)/?\/http://www.example.com/library.php?q=$1 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:30:49.230

您的环境中可能没有考虑 .htaccess 文件。如果有疑问，请打开 RewriteLogging，正如重写模块的优秀文档中所解释的那样。

哦，检查错误日志，你在 RewriteRule 中有一个语法错误：`RewriteRule`接受 2 个参数和标志，你的规则只有一个参数：

```
RewriteEngine On
RewriteRule ^library/([^/]*) http://www.example.com/library.php?q=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:29:23.877

您需要在“左”部分的末尾使用美元符号而不是问号：

```
^/library/([^/]*)/$ http://www.example.com/library.php?q=$1 [L] 
```

您还需要 / 和 ( 之间的问号吗？它看起来不像前瞻或后视？

也尝试不使用斜杠

```
^library/([^/]*)$ http://www.example.com/library.php?q=$1 [L] 
```

# html - 有没有办法在里面放一些文字（不是选项）? 我们在一个带有 4 个选项的表单中有一个 Select。我的客户希望以某种方式对选项进行分类，以便我们可以在最重要的相关选项上添加一些文本。它看起来像： <select>Cat 01 <option value="Some Value">Some Option</option> <option value="Some Value">Some Option</option> Cat 02 ID：13929831 赞同：1 时间：2012-12-18T09:25:49.787 标签：html, forms, html-select, html4 回答 #1 赞同：7 时间：2012-12-18T09:27:53.173 我相信你需要的是 optgroup： <select> <optgroup label="Swedish Cars"> <option value="volvo">Volvo</option> <option value="saab">Saab</option> </optgroup> <optgroup label="German Cars"> <option value="mercedes">Mercedes</option> <option value="audi">Audi</option> </optgroup> </select> 回答 #2 赞同：6 时间：2012-12-18T09:29:20.117 是的，肯定有 尝试这个 <select> <optgroup label="Cat 01"> <option value="Some Value">Some Option</option> <option value="Some Value">Some Option</option> </optgroup> <optgroup label="Cat 02"> <option value="Some Value">Some Option</option> <option value="Some Value">Some Option</option> <option value="Some Value">Some Option</option> </optgroup> </select> 回答 #3 赞同：1 时间：2012-12-18T09:28:24.313 您想使用 OPTGROUP 标签 http://www.w3.org/wiki/HTML/Elements/optgroup 所以你的例子应该变成 <select> <optgroup label="Cat 01"> <option value="Some Value">Some Option</option> <option value="Some Value">Some Option</option> </optgroup> <optgroup label="Cat 02"> <option value="Some Value">Some Option</option> <option value="Some Value">Some Option</option> </optgroup> </select></select>

# algorithm - Brainfuck解释器的状态图

> ID：13929832
> 
> 赞同：4
> 
> 时间：2012-12-18T09:25:55.957
> 
> 标签：algorithm, uml, interpreter, brainfuck, statechart

我写了一个brainfuck ide的alpha版本。我编写了自己的解释器，尽管我的老师在代码中的循环方面提供了很多帮助，因为我很难以“IT 方式”理解它。现在对于我的报告，我需要解释器算法的状态图，他如何处理每个字符。

我想出了下图，唯一缺少的是解释器如何处理循环。我看了老师几乎自己写的代码，但我不明白。我希望你能在这里指出我正确的方向，我不想要一个完整的答案，只是一些旁注在代码中遇到 [ 或 ] 时正在做什么。

![在此处输入图像描述](../Images/b933c8a76b19de5ab57ab08a6c498d6b.png)

codeZeiger = codePointer（在代码中移动的指针）
memoryZeiger = memoryPointer（在内存堆栈中移动的指针）
memory = 内存堆栈
code = 作为字符串的代码 oject
i = interpre() 方法的计数器（单个字符从字符串中读取，然后通过 switch 语句进行解析，其状态图如下所示）

![在此处输入图像描述](../Images/1954864aeba51e4a324caf3ed532f5c0.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T10:40:13.553

您应该真正尝试了解循环机制。在brainfuck 中，循环用`[`and括起来`]`。这意味着如果满足某个条件，括号内的代码将执行并重新开始。例如：

```
1: [
2:   cmd1
3:   cmd2
4: ]
5: cmd3 
```

第 1 行检查是否`memory[memoryZeiger]`等于 0。如果是，则跳转到第 5 行。如果不是，则执行 cmd1、cmd2 等直到第 4 行。如果您的解释器在第 4 行，它会自动跳转到第 1 行（或者它可以检查条件并进一步移动 - 但让我们保持简单并假设它跳转到第 1 行）。然后整个过程重新开始。

所以回答你关于状态图的问题。你需要这样的东西：

```
 _____________________________
    |   code[codeZeiger] == '['   |
     -----------------------------
            /                  \
           /                    \
memory[memoryZeiger] == 0       memory[memoryZeiger] != 0
          |                               |
   "go to matching ']'"               codeZeiger++ 
```

另一种情况`]`应该是等价的。

顺便说一句，“匹配]”很重要。这些括号可以嵌套！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T11:10:22.797

1）您不需要状态图，因为您的编译器没有状态（只有内存、内存指针和代码指针，可能还有两个用于查找匹配的括号） - 像[维基百科这样的简单表格（德语就像你的变量名）](http://de.wikipedia.org/wiki/Brainfuck)会足够

2）如果您坚持使用状态图，请不要将条件（如`code[codeZeiger]=='+'`）放入状态，而是放入转换中

3)`i`必须改为`codeZeiger`改为

4）解释brainfuck的代码应该很简单。如果您不理解它，请阅读例如维基百科页面并尝试在没有软件的情况下解释那里给出的程序。让它在纸上运行:)

# batch-file - 处理带有空格的 reg 查询

> ID：13929837
> 
> 赞同：1
> 
> 时间：2012-12-18T09:26:12.367
> 
> 标签：batch-file, registry

我正在尝试读取注册表项值并在程序中稍后的变量中使用它，但是我的注册表项包含空格，现在我无法让它工作，有人知道锄头来处理带空格的键吗？

```
for /f "tokens=3" %%a in ('reg query "HKEY_CLASSES_ROOT\Software\VTS\TREADSTONE LT\Main" /v EXECUTE ^| find /i "REG_SZ"') do set UserNm=%%a 

MSG * %UserNm%
pause 
```

我正在使用 Windows 批处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:35:56.023

要使用双引号，您需要`usebackq`在循环中使用并将's`for`更改为反引号。`'`

```
for /f "usebackq tokens=3" %%a in (`reg query "HKEY_CLASSES_ROOT\Software\VTS\TREADSTONE LT\Main" /v EXECUTE ^| find /i "REG_SZ"`) do set UserNm=%%a 
```

# javascript - 内容处置附件是否被 XMLHttpRequest 阻止？

> ID：13929838
> 
> 赞同：8
> 
> 时间：2012-12-18T09:26:13.740
> 
> 标签：javascript, content-disposition

我想从我编写的 C# 网络服务器对 png 文件执行 javascript xhr 请求。这是我使用的代码

```
 var imgUrl = "http://localhost:8085/AnImage.png?" + now;
    var request = new XMLHttpRequest();
    request.open('GET', imgUrl, false);
    request.send(); // this is in a try/catch 
```

在服务器端，我发回文件并添加 Content-Disposition 标头。我得到以下回复

![响应中获得的标头，带有 Firebug](../Images/de207e0a205f13b0abbba4a58eb6e128.png)

我确保 Content-Disposition 附加在 Content-Type 之后的标题中（屏幕截图来自 Firebug，按字母顺序附加）。

结果是没有触发任何对话框，我是否在响应中遗漏了什么？

编辑：出于几个原因，我想在 javascript 中执行所有操作。第一：我不想展示形象，我想把一切都藏在幕后。第二：在请求图像时，我希望仅在特定请求时添加 Content-Disposition。此类请求标有“警告”标头，其值为“AttachmentRequest”

```
request.setRequestHeader("Warning","AttachmentRequest"); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-18T09:34:20.257

`Content-Disposition`当请求通过 XHR 时，我认为不会触发任何文件保存对话框。XHR 的使用表明您将在代码中处理结果。

如果您希望提示用户将图像保存到文件中，我已经成功使用了这种技术：

```
window.open("http://localhost:8085/AnImage.png?" + now); 
```

它的缺点是它会短暂地闪烁一个空白的打开窗口，直到标题到达，然后新窗口关闭并出现“保存文件”对话框。

使用`iframe`可以防止窗口闪烁：

```
var f = document.createElement('iframe');
f.style.position = "absolute";
f.style.left = "-10000px";
f.src = "http://localhost:8085/AnImage.png?" + now;
document.body.appendChild(f); 
```

另外，我想知道对元素`Content-Disposition`的处理有什么影响（如果有的话）：`img`

```
var img = document.createElement('img');
img.style.position = "absolute";
img.style.left = "-10000px";
img.src = "http://localhost:8085/AnImage.png?" + now;
document.body.appendChild(img); 
```

我没有尝试过，但浏览器*可能会*尊重标题。您需要确保在您想要支持的所有浏览器上进行测试。

# python - argparse 选项 arg 使用 nargs='?' 在子解析器中的位置 arg 之前

> ID：13929846
> 
> 赞同：3
> 
> 时间：2012-12-18T09:26:43.380
> 
> 标签：python, argparse

```
import argparse

parser = argparse.ArgumentParser()
parser.add_argument(
    '--optional',
    default=None,
    const='some-const',
    nargs='?',
    help='optional')

subparsers = parser.add_subparsers()

subparser = subparsers.add_parser('subparser')

subparser.add_argument(
    'positional',
    help='positional')

args = parser.parse_args()

print args

./test.py --optional opt subparser positional
Namespace(optional='opt', positional='positional')  <-- works as expected

./test.py --optional subparser positional
usage: test.py [-h] [--optional [OPTIONAL]] {subparser} ...
test.py: error: invalid choice: 'positional' (choose from 'subparser')  <-- throws an error
 Namespace(optional='some-const', positional='positional')  <-- would expect to see this 
```

以上是我演示这个问题的最简单的测试代码。我想有一个使用 nargs='?' 的可选参数 和 const*在*子解析器中我的位置 arg 之前。我读过我可以将原始解析器作为父子解析器传递给子子解析器，但这并不能解决问题。当我尝试这样做时，我尝试将 add_help=False 和 conflict_handler='resolve' 添加到初始解析器声明中。谁能指出我正确的方向？

谢谢，斯科特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T02:57:17.770

解析时`./test.py --optional foo bar`，argparse 看到一个可选字符串（以 -- 开头）后跟两个参数字符串（没有 --）

所以它从处理开始`--optional`。它的 nargs 是一个“贪婪的？”，所以它消耗了`foo`参数，产生：

```
Namespace('optional'='foo') 
```

这留下`bar`作为子命令参数使用。

它不检查是否`foo`是有效的子命令参数。

同样的道理也适用于`./test.py --optional subparser positional`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T06:15:16.090

这会引发错误：

```
.test.py --optional 
```

因为`subparser`不是可选的：

```
usage: subparser.py [-h] [--optional [OPTIONAL]] {subparser} ...
test.py: error: too few arguments 
```

`subparser``OPTIONAL`就像你的第二个例子一样被吃掉和使用。我不明白为什么，除了 argparse 没有提前弄清楚 subparser 是 subparser 之外。

这是我能做的最接近你所描述的事情：

```
import argparse

parent_parser = argparse.ArgumentParser(add_help=False)
parent_parser.add_argument(
    '--optional',
    nargs='?',
    default=None,
    const='some-const',
    help='optional')

sub_parser = argparse.ArgumentParser(parents=[parent_parser])
sub_parser.add_argument('--subparser', required=True)

args = sub_parser.parse_args()

print args 
```

我想你已经发现了一个错误。

# asp.net-charts - 使用 asp.net 图表附加自定义值

> ID：13929855
> 
> 赞同：0
> 
> 时间：2012-12-18T09:27:25.363
> 
> 标签：asp.net-charts

我已经制作了一个 asp.net 图表，其中包含一些来自 DB 的 x 轴和 y 轴数据，如下所示。

![在此处输入图像描述](../Images/38d8f50c9d2ba0aeea86efb9205f4124.png)

现在我想用这样的月份附加一个自定义值 Current `DEC`Day

![在此处输入图像描述](../Images/7ed68363655f4e822d81569c623a1ec1.png)

请任何人告诉我如何实现这一点。请帮助！这是我的图表代码

```
<asp:Chart ID="Chart1" runat="server" DataSourceID="SqlDataSource11" Compression="5"
                                                BackImageAlignment="Top" Palette="None" Width="400px" Height="250px">
                                                <Series>
                                                    <asp:Series Name="2011-12" XValueMember="MON" YValueMembers="CRSH_11_12" ChartType="Spline"
                                                        YValuesPerPoint="2" IsXValueIndexed="True" MarkerSize="7" MarkerStyle="Square"
                                                        ChartArea="ChartArea1" LabelFormat="#,###,###" Color="Black" YValueType="Double"
                                                        Legend="Legend1" LegendToolTip="#TOTAL{#,###,###,###}">
                                                        <EmptyPointStyle LabelFormat="#,###,###" />
                                                    </asp:Series>
                                                    <asp:Series Name="2012-13" XValueMember="MON" YValueMembers="CRSH_12_13" ChartType="Spline"
                                                        YValuesPerPoint="2" IsXValueIndexed="True" MarkerSize="7" MarkerStyle="Diamond"
                                                        ChartArea="ChartArea1" LabelFormat="#,###,###" Color="0, 192, 0" YValueType="Double"
                                                        Legend="Legend1" LegendToolTip="#TOTAL{#,###,###,###}">
                                                        <EmptyPointStyle LabelFormat="#,###,###" />
                                                    </asp:Series>
                                                    <asp:Series Name="Target" XValueMember="MON" YValueMembers="CAN_TRG" ChartType="Spline"
                                                        YValuesPerPoint="2" IsXValueIndexed="True" MarkerSize="7" MarkerStyle="Triangle"
                                                        ChartArea="ChartArea1" LabelFormat="#,###,###" Color="Blue" YValueType="Double"
                                                        Legend="Legend1" LegendToolTip="#TOTAL{#,###,###,###}">
                                                        <EmptyPointStyle LabelFormat="#,###,###" />
                                                    </asp:Series>
                                                    <asp:Series Name="Todate" XValueMember="MON" YValueMembers="YTD_CRSH" ChartType="Spline" BorderWidth="1"
                                                        YValuesPerPoint="2" IsXValueIndexed="True" MarkerStyle="None"
                                                        ChartArea="ChartArea1" Color="Red" YValueType="Double"
                                                        Legend="Legend1" >

                                                    </asp:Series>
                                                </Series>
                                                <ChartAreas>
                                                    <asp:ChartArea Name="ChartArea1" AlignmentOrientation="All">
                                                        <AxisY Title="Crushing (MT)" TitleForeColor="3, 91, 172" TitleFont="Arial, 8.25pt">
                                                            <MajorGrid LineColor="217, 239, 253" />
                                                            <LabelStyle Format="#,###,###" />
                                                        </AxisY>
                                                        <AxisX LineColor="Maroon" TitleFont="Tahoma, 8pt" Title="Month" TitleForeColor="3, 91, 172">
                                                            <MajorGrid LineColor="217, 239, 253" />
                                                        </AxisX>
                                                    </asp:ChartArea>
                                                </ChartAreas>
                                                <Legends>
                                                    <asp:Legend Alignment="Far" Docking="Bottom" Name="Legend1">
                                                    </asp:Legend>
                                                </Legends>
                                                <Titles>
                                                    <asp:Title Font="Microsoft Sans Serif, 10pt, style=Bold" ForeColor="3, 91, 172" Name="Title1"
                                                        Text="Crushing">
                                                    </asp:Title>
                                                </Titles>
                                            </asp:Chart> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-28T08:57:28.890

处理控制`Customize`事件`Chart`。

```
private void chart1_Customize(object sender, EventArgs e)
{
    foreach (var xAxisLabel in chart1.ChartAreas[0].AxisX.CustomLabels)
    {
        if (// xAxisLabel is Dec)
            label.Text = xAxisLabel + /*custom day*/;
    }
} 
```

# twitter-bootstrap - 使用 Twitter Bootstrap 2.0 与 2.1 并使用 Isotop 指定图像大小

> ID：13929857
> 
> 赞同：1
> 
> 时间：2012-12-18T09:27:29.170
> 
> 标签：twitter-bootstrap, jquery-isotope, twitter-bootstrap-rails

Twitter Bootstrap 在 2.0 和 2.1 之间发生了一些变化，在使用令人敬畏的同位素图像库时排除了图像大小的简单规范，并要求用户使用 $(window).load 或 $container.imagesLoaded 的替代技术来正确绘制 (http: //isotope.metafizzy.co/docs/help.html）。看到的错误是指定图像的垂直高度似乎被忽略并且图像重叠。更改为等待图像加载的替代形式会在闪烁和绘画问题方面导致更糟糕的体验。我最终回到了 Bootstrap 2.0。

我确认该问题是在 2.1 的引导程序中引入的。您可以在这里找到引导程序的更改历史：[https ://github.com/twitter/bootstrap/wiki/Changelog](https://github.com/twitter/bootstrap/wiki/Changelog)

有谁知道 2.1 中可能导致这种损坏的变化以及是否有任何好的解决方法。如上所述，等待图像加载比仅仅输入图像的高度和宽度要糟糕得多，因此这并不是真正的解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:32:19.530

我在这里发布了答案：[https ://github.com/twitter/bootstrap/issues/6541](https://github.com/twitter/bootstrap/issues/6541)

在 CSS 中内联这个工作，像这样：img src="blah-blah" width=398 height=265 style="width:398px; height:265px"

其实我也测试过Isotope，没有使用width和height属性，像这样：img src="blah-blah" style="width:398px; height:265px"

效果很好！如果最好只指定 CSS，有什么建议吗？

通过使用这个 CSS，我可以很容易地在没有 bootstrap（或 bootstrap 2.0）的情况下进行测试：img { width: auto; 高度：自动；}

似乎CSS中的宽度和高度确实覆盖了图像属性，并且在图像加载之前，浏览器不知道要分配多少空间，然后，即使在图像加载之后，间距仍然是错误的，在至少与同位素。内联样式确实解决了这个问题。我想我尝试过使用常规样式，但这似乎不起作用，但我可能遇到了 CSS 优先级问题。无论如何，由于图像大小是由图像属性决定的，所以放入这一点内联 CSS 是很自然的。我希望我们最终能找到更好的解决方案，因为这肯定会在升级时影响其他人。

或者至少应该记录一下，需要对图像的宽度和高度使用内联样式而不是属性。

# c# - 在 EF4 中自动生成身份否定 PK

> ID：13929859
> 
> 赞同：1
> 
> 时间：2012-12-18T09:27:39.107
> 
> 标签：c#, .net-4.0, entity-framework-4

我正在使用 EF 4.4.0.0 和以下自定义方法来生成身份否定 PK：

```
 private int? GetMinId()
    {
        return Context.ENTITY.Min(c => (int?)c.Id);
    }

    public int GenerateNegativeId()
    {
        var minId = GetMinId() ?? default(int);

        if (0 < minId) return minId * -1;
        if (0 > minId) return --minId;

        return -1;
    } 
```

你能解释一下如何自动生成**身份负 PK** id。（可能吗？）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:51:50.950

这是不可能的，因为身份生成发生在数据库端。你为什么需要这个，为什么你不能只订购你的行？

# mysql - 以数字开头然后后跟字符的 MySQL 字段值被视为数字

> ID：13929862
> 
> 赞同：1
> 
> 时间：2012-12-18T09:27:43.117
> 
> 标签：mysql, alphanumeric

我有一个用户表（MySQL），唯一的 id 是一个 AI 字段（user_id）。我有一个从数据库中获取用户名的函数，传递给它的唯一参数是 user_id。假设 user_id=8 的用户名是“Jony Bravo”。这是我的功能：

```
function getName($user_id)
{
$sql="SELECT name FROM users WHERE user_id='$user_id'";
$result=mysql_query($sql) or die(mysql_error());
$row=mysql_fetch_assoc($result);
return ($row['name']);
} 
```

下面的两个函数调用都返回相同的值：“Jony Bravo”！

```
echo getName(8);
echo getName('8k'); 
```

不仅仅是k，数字后面的任何字符似乎都被忽略了。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:37:04.763

我想象的 ID 是整数。如果是这样，当字符串 '8k' 转换为 int 时，所有非数字宪章都将被忽略，剩下的就是 8。将 '2k' 传递给函数，如果你得到第二条记录，这意味着我是正确的。但这是一种不好的做法，您不应该将字符串传递给必须只接受整数的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:37:57.950

如果你试试这个：

```
SELECT 8='8k' 
```

你可以看到它返回true！那是因为8是一个int，又`8k`是一个字符串，`8k`转换成int就变成了8。

这将返回 false ：

```
SELECT CAST(8 as char)='8k' 
```

所以你必须这样写你的查询：

```
SELECT name FROM users WHERE CAST(user_id as char)='$user_id' 
```

或者您必须确保 $user_id 是数字，然后删除`'`：

```
SELECT name FROM users WHERE user_id=$user_id 
```

# c# - 如何将数据网格中的日期时间保存为 dd/mm/yyyy hh:mm

> ID：13929866
> 
> 赞同：1
> 
> 时间：2012-12-18T09:28:08.040
> 
> 标签：c#, winforms

我`DataGridView`在 WinForms 中使用，我使用的是 sql server 数据库，我使用 smalldatetime 作为数据类型，但它接受的日期为`mm/dd/yyyy HH:MM:ss AM`.

如何将其保存为：
`dd/mm/yyyy HH:MM AM`格式我在这里有点困惑如何更改格式，因为设计师指定的 dd/mm/yyyy 格式不可用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:34:28.127

使用以下代码：

```
DateTime.Now.ToString(CultureInfo.CreateSpecificCulture("en-AU")) 
```

通过使用文化信息，您可以设置不同的格式...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T17:51:52.997

```
DateTime currentDateTime = DateTime.Now;     // Use current time
string format = "MMM ddd d HH:mm yyyy";      // Use this format
string myDateTime = time.ToString(format));  // Write to console 
```

您可以制作任何格式，只需根据需要使用以下条件设置格式变量。

```
MMM     display three-letter month
ddd     display three-letter day of the WEEK
d       display day of the MONTH
HH      display two-digit hours on 24-hour scale
mm      display two-digit minutes
yyyy    display four-digit year
M       display one-digit month number
d       display one-digit day of the MONTH
h       display one-digit hour on 12-hour scale
mm      display two-digit minutes
yy      display two-digit year 
```

有关更多示例和格式，[请单击此处](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)。

# sql - SQL Query 中用于查找空记录的查询问题

> ID：13929867
> 
> 赞同：2
> 
> 时间：2012-12-18T09:28:11.143
> 
> 标签：sql

我有一个查询`SQL`，我需要在其中添加条件，以查找所有具有空字段的记录。

这给了我一个错误..

```
SELECT forma.*, SMS_MONTIME.IDTICKET, SMS_MONTIME.MBYLLUR,SMS_MONTIME.time_added
FROM forma 
LEFT JOIN SMS_MONTIME ON forma.ID = SMS_MONTIME.IDTICKET WHERE SMS_MONTIME.IDTICKET =='' 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:37:29.053

尝试这个：

```
...
WHERE SMS_MONTIME.IDTICKET = '' OR SMS_MONTIME.IDTICKET IS NULL 
```

问题是，“空白”是什么意思：'' 或 null 或更常见的是两者

另外，`=`不要使用`==`（我从未真正尝试过`==`，但我也从未见过其他人，所以它不会很好）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:31:21.647

在查询中仅`=`用于检查不检查`==`和检查空值使用`is null`

```
SELECT forma.*, SMS_MONTIME.IDTICKET, SMS_MONTIME.MBYLLUR,SMS_MONTIME.time_added
FROM forma 
LEFT JOIN SMS_MONTIME ON forma.ID = SMS_MONTIME.IDTICKET WHERE SMS_MONTIME.IDTICKET ='' or SMS_MONTIME.IDTICKET is null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T09:36:09.157

检查一个空字段，即`NULL`一个不能使用的字段`=`。你必须使用`IS NULL` 你的查询应该是这样的

```
SELECT forma.*, SMS_MONTIME.IDTICKET, SMS_MONTIME.MBYLLUR,SMS_MONTIME.time_added
FROM forma 
LEFT JOIN SMS_MONTIME ON forma.ID = SMS_MONTIME.IDTICKET 
WHERE SMS_MONTIME.IDTICKET IS NULL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T09:32:24.543

尝试这个

```
"SELECT 
 forma.*, SMS_MONTIME.IDTICKET, SMS_MONTIME.MBYLLUR,SMS_MONTIME.time_added
  FROM forma 
  LEFT JOIN 
   SMS_MONTIME ON forma.ID = SMS_MONTIME.IDTICKET WHERE SMS_MONTIME.IDTICKET =''" 
```

或试试这个

```
 WHERE SMS_MONTIME.IDTICKET is null 
```

非空使用

```
WHERE SMS_MONTIME.IDTICKET is not null 
```

# android - 如何在android中制作渐变背景

> ID：13929877
> 
> 赞同：281
> 
> 时间：2012-12-18T09:28:50.167
> 
> 标签：android, background, gradient, shapes

我想创建渐变背景，渐变位于上半部分，下半部分为纯色，如下图所示：

![](../Images/0a58cd41346762f4694f280d9760f18c.png)

我不能，因为它会`centerColor`蔓延到底部和顶部。

![在按钮的渐变中，一条白色的水平线在蓝色上向顶部和底部逐渐消失。](../Images/f3e5274d67303231fa724944cc9d6e3c.png)

如何制作像第一张图片一样的背景？我怎样才能使`centerColor`不散开的小？

这是上面背景按钮的 XML 中的代码。

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle" >
    <gradient 
        android:startColor="#6586F0"
        android:centerColor="#D6D6D6"
        android:endColor="#4B6CD6"
        android:angle="90"/>
    <corners 
        android:radius="0dp"/>

</shape> 
```

* * *

## 回答 #1

> 赞同：483
> 
> 时间：2017-07-17T01:02:16.163

视觉示例有助于解决此类问题。

# 样板

为了创建渐变，您在 res/drawable 中创建一个 xml 文件。我打电话给我*的 my_gradient_drawable.xml*：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient
        android:type="linear"
        android:angle="0"
        android:startColor="#f6ee19"
        android:endColor="#115ede" />
</shape> 
```

您将其设置为某个视图的背景。例如：

```
<View
    android:layout_width="200dp"
    android:layout_height="100dp"
    android:background="@drawable/my_gradient_drawable"/> 
```

# 类型="线性"

设置类型`angle`。`linear`它必须是 45 度的倍数。

```
<gradient
    android:type="linear"
    android:angle="0"
    android:startColor="#f6ee19"
    android:endColor="#115ede" /> 
```

[![在此处输入图像描述](../Images/5dde46ca50217193f63badc680baed36.png)](https://i.stack.imgur.com/zv2Ap.png)

# 类型="径向"

设置类型`gradientRadius`。`radial`使用`%p`意味着它是父级最小尺寸的百分比。

```
<gradient
    android:type="radial"
    android:gradientRadius="10%p"
    android:startColor="#f6ee19"
    android:endColor="#115ede" /> 
```

[![在此处输入图像描述](../Images/f95b95996e72f22393747dc010bfeb33.png)](https://i.stack.imgur.com/xjWvp.png)

# 类型=“扫”

我不知道为什么有人会使用扫描，但为了完整起见，我将其包括在内。我不知道如何改变角度，所以我只包括一张图片。

```
<gradient
    android:type="sweep"
    android:startColor="#f6ee19"
    android:endColor="#115ede" /> 
```

[![在此处输入图像描述](../Images/17b5169c7df8d8e9030f30e9ef7d47cd.png)](https://i.stack.imgur.com/D6yg3.png)

# 中央

您还可以更改扫描或径向类型的中心。这些值是宽度和高度的分数。您也可以使用`%p`符号。

```
android:centerX="0.2"
android:centerY="0.7" 
```

[![在此处输入图像描述](../Images/6e4198b8ad6f2b55e255fafe03f294b7.png)](https://i.stack.imgur.com/JVicL.png)

* * *

## 回答 #2

> 赞同：331
> 
> 时间：2012-12-18T10:14:34.050

试试这个：

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle" >

    <gradient
        android:angle="90"
        android:centerColor="#555994"
        android:endColor="#b5b6d2"
        android:startColor="#555994"
        android:type="linear" />

    <corners 
        android:radius="0dp"/>

</shape> 
```

* * *

## 回答 #3

> 赞同：65
> 
> 时间：2012-12-18T10:11:20.883

[您可以通过使用 xml图层列表](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)将顶部和底部“带”组合到一个文件中来创建这种“半渐变”外观。每个波段都是一个 xml 形状。

有关详细教程，请参见之前关于 SO 的答案：[多渐变形状](https://stackoverflow.com/questions/4381033/multi-gradient-shapes)。

* * *

## 回答 #4

> 赞同：53
> 
> 时间：2014-01-22T11:30:21.060

以下链接可以帮助您[http://angrytools.com/gradient/](http://angrytools.com/gradient/)。这将在 android 中创建自定义渐变背景，就像在 Photoshop 中一样。

* * *

## 回答 #5

> 赞同：40
> 
> 时间：2012-12-18T10:10:47.107

首先你需要创建一个gradient.xml，如下

```
<shape>
    <gradient android:angle="270" android:endColor="#181818" android:startColor="#616161" />

    <stroke android:width="1dp" android:color="#343434" />
</shape> 
```

然后你需要在布局的背景中提到上面的渐变。如下

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/gradient"
    >   
</LinearLayout> 
```

* * *

## 回答 #6

> 赞同：25
> 
> 时间：2012-12-20T09:06:08.940

或者您可以在代码中使用您在 PSD 中可能想到的任何内容：

```
 private void FillCustomGradient(View v) {
        final View view = v;
        Drawable[] layers = new Drawable[1];

        ShapeDrawable.ShaderFactory sf = new ShapeDrawable.ShaderFactory() {
            @Override
            public Shader resize(int width, int height) {
                LinearGradient lg = new LinearGradient(
                        0,
                        0,
                        0,
                        view.getHeight(),
                        new int[] {
                                 getResources().getColor(R.color.color1), // please input your color from resource for color-4
                                 getResources().getColor(R.color.color2),
                                 getResources().getColor(R.color.color3),
                                 getResources().getColor(R.color.color4)},
                        new float[] { 0, 0.49f, 0.50f, 1 },
                        Shader.TileMode.CLAMP);
                return lg;
            }
        };
        PaintDrawable p = new PaintDrawable();
        p.setShape(new RectShape());
        p.setShaderFactory(sf);
        p.setCornerRadii(new float[] { 5, 5, 5, 5, 0, 0, 0, 0 });
        layers[0] = (Drawable) p;

        LayerDrawable composite = new LayerDrawable(layers);
        view.setBackgroundDrawable(composite);
    } 
```

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2017-05-27T18:54:37.850

```
//Color.parseColor() method allow us to convert
// a hexadecimal color string to an integer value (int color)
int[] colors = {Color.parseColor("#008000"),Color.parseColor("#ADFF2F")};

//create a new gradient color
GradientDrawable gd = new GradientDrawable(
GradientDrawable.Orientation.TOP_BOTTOM, colors);

gd.setCornerRadius(0f);
//apply the button background to newly created drawable gradient
btn.setBackground(gd); 
```

从这里参考 [https://android--code.blogspot.in/2015/01/android-button-gradient-color.html](https://android--code.blogspot.in/2015/01/android-button-gradient-color.html)

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2018-09-04T11:50:54.217

在可绘制文件夹中使用此代码。

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="#3f5063" />
    <corners
        android:bottomLeftRadius="30dp"
        android:bottomRightRadius="0dp"
        android:topLeftRadius="30dp"
        android:topRightRadius="0dp" />
    <padding
        android:bottom="2dp"
        android:left="2dp"
        android:right="2dp"
        android:top="2dp" />
    <gradient
        android:angle="45"
        android:centerColor="#015664"
        android:endColor="#636969"
        android:startColor="#2ea4e7" />
    <stroke
        android:width="1dp"
        android:color="#000000" />
</shape> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-12-18T09:44:41.547

为什么不创建图像或 9 Patch 图像并使用它呢？

下面的链接有一个很好的指导如何做到这一点：

[http://android.amberfog.com/?p=247](http://android.amberfog.com/?p=247)

如果您坚持使用 Shape，请尝试以下站点（在左下角选择 Android）： [http ://angrytools.com/gradient/](http://angrytools.com/gradient/)

我已经创建了一个与您在此链接上的渐变相似的渐变（不精确）： [http ://angrytools.com/gradient/?0_6586f0,54_4B6CD6,2_D6D6D6&0_100,100_100&l_269](http://angrytools.com/gradient/?0_6586f0,54_4B6CD6,2_D6D6D6&0_100,100_100&l_269)

# wcf - 关于在 WCF WebMethods 中返回成功消息的一般建议

> ID：13929880
> 
> 赞同：1
> 
> 时间：2012-12-18T09:28:58.043
> 
> 标签：wcf

我只是在寻找一些关于这个的一般建议。我的 WCF WebMethod 需要跨使用不同软件的应用程序工作，例如 ASP.NET --> Java。

我知道如果方法失败，我可以利用`FaultException(Of MyError)`它来生成 SOAP 错误，但是，通常发送**成功**消息的最佳方式是什么？

以下面的接口为例，它定义了将用户保存到数据库中的功能：

```
<ServiceContract()>
Public Interface IService1

    <OperationContract()>
    Sub SaveUserIntoDataBase(ByVal u As MyAppUser)

End Interface

<DataContract()>
Public Class MyAppUser

    <DataMember()>
    Public Property FirstName() As String

    <DataMember()>
    Public Property Surname() As String

End Class 
```

如果我需要发送用户已成功保存的反馈，通常如何完成？是否存在等效于 a 的“成功” `FaultException`，还是建议仅返回布尔值或字符串？

我想应该总是返回一个值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:41:52.130

如果服务调用的执行没有失败，则没有任何与异常等效的成功结果。

一种选择是创建一些自定义类型，例如枚举，并根据来自底层源的不同结果返回这些类型。

每个调用的返回类型可能不同或根据用户需求定制。在您的情况下，返回布尔值比某些字符串值更好。此外，您正在使用“Sub”，所以如果它是一个函数，那么这可能是一种情况。

您也可以在此处进行一些讨论： [返回布尔值和字符串值的最佳做法是什么](https://stackoverflow.com/questions/5963661/whats-the-best-practice-for-returning-a-boolean-and-string-value)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:51:29.207

不需要成功消息。如果操作没有失败，那么它就是成功的。

使用 FaultException 指示失败。

# seo - 为多个域提供同一个网站对 SEO 不利吗？

> ID：13929882
> 
> 赞同：3
> 
> 时间：2012-12-18T09:29:00.070
> 
> 标签：seo, multiple-domains, google-ranking

我正在一个网站上工作，该网站目前有两个不同的域指向它：

*   example1.com
*   example2.com

我已经读过向多个域提供相同的内容可能会损害排名。

除了项目列表（想想电子商务网站）和其他一些小调整（标题、描述、关键字等）外，所服务的网站基本相同。根据使用的域，它将适应服务不同的项目。

这是否解决了跨多个域提供重复内容从而不损害排名的问题？

或者我会更好地将 301 重定向到单个域并从那里开始？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T05:30:26.457

如果您的两个网址都显示相同样式的产品列表，那么它肯定会影响搜索引擎结果。在显示产品或更改导航菜单方面为您的两个网站提供不同的外观。放置稍微不同的图像并添加不同的描述来展示您的产品。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-03T12:50:06.443

如果您在两个不同的域上运行具有相同内容和设计的网站，即使修改了标题、描述和关键字，这是不好的 SEO 做法，您的网站将受到搜索引擎的惩罚。最好的选择是使用第二个域的原始内容进行新的网站设计并对其进行优化。否则，您可以进行 301 重定向以将域 2 指向域 1，这不会伤害您也不会帮助您！

我还看到多个域名具有相同的网站、内容、标题和描述。但令我惊讶的是，域名排名很好。疯狂的搜索引擎！

# python - 熊猫散点图

> ID：13929884
> 
> 赞同：8
> 
> 时间：2012-12-18T09:29:07.357
> 
> 标签：python, pandas

我是 Python 和 Pandas 的新手，但有一个 CSV 文件，其中包含我已读入数据框的多列。我想绘制 x=Index 和 y='data' 的散点图。其中索引是数据框的索引并且是日期。非常感谢杰森

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T09:43:16.773

您可以使用[`plot_date`](http://matplotlib.org/api/pyplot_api.html?highlight=plot_date#matplotlib.pyplot.plot_date)：

```
plot_date(df.index, df.data) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-30T21:53:53.913

虽然，我想从技术上讲不是散点图，但您可以使用`pandas.plot`绘制点标记且没有线的函数。

```
df.plot(marker='o', linewidth=0) 
```

[![在此处输入图像描述](../Images/bcfa7d1573476696ed8d5f4eaeddd902.png)](https://i.stack.imgur.com/FRbEP.png)

这样我们就可以使用您想要的所有方便的 pandas 功能。例如，使用单个函数绘制两个系列和不同比例，

```
df.plot(marker='o', linewidth=0, secondary_y='y2') 
```

[![在此处输入图像描述](../Images/3a744656b9491eca9acc5ebbcd225309.png)](https://i.stack.imgur.com/AJcAO.png)

这样做的缺点是您失去了一些分散功能，例如对标记进行不同的着色和调整大小。

不过，如果您的目标是快速散点图，这可能是最简单的路线。

# linux - 在linux中对两个二进制文件进行基准测试

> ID：13929885
> 
> 赞同：0
> 
> 时间：2012-12-18T09:29:08.450
> 
> 标签：linux

我有两个二进制文件。这个文件不是我制作的。

我需要对这些文件进行基准测试，看看如何快速和良好地工作。

我尝试使用**time**命令，但最大的问题是：

1.  同时运行文件
2.  同时停止正在运行的文件
3.  对这两个文件使用 time 命令。

如果我[在 Linux 上使用此解决方案基准测试程序](https://stackoverflow.com/questions/4442064/benchmarking-programs-on-linux)并使用时间运行命令更改文件的位置，则输出会更改。

```
0m0.010s file1 
0m0.017s file2 
```

改变时间命令的顺序。

```
0m0.002s file2
0m0.013s file1 
```

谢谢你。问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:37:12.757

有很多方法可以做你想做的事，但最简单的一种可能是简单地在一个循环中运行一个程序多次（比如 1000 次或更多），这样总执行时间就变得很容易测量——比如 50 秒。然后对另一个重复相同的操作。

这使您能够获得更准确的测量结果，并最大限度地减少运行之间的固有抖动。

话虽如此，请注意，由于运行时间与您观察到的一样短，启动过程的时间可能不是您获得的总测量值的一小部分。因此，如果您运行循环，请务必考虑启动新流程 1000 次的价格。

# javascript - Twitter API 1.1 获取推文列表

> ID：13929890
> 
> 赞同：2
> 
> 时间：2012-12-18T09:29:19.663
> 
> 标签：javascript, twitter, oauth

对于我的 CMS 组件，我正在实现与 Twitter API 的集成，以获取和显示推文列表（连接到用户或搜索查询）。我正在使用[Twitter Restful API v1.1](https://dev.twitter.com/docs/api/1.1)，因为 1.0 版本将在[两个月](https://twitter.com/SteveStreza/status/243448710497976320)后被删除。对我来说，两个有趣的请求是[user_timeline](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline)和[search](https://dev.twitter.com/docs/api/1.1/get/search/tweets)一个。

由于我的技术强烈依赖缓存，因此我需要尽可能避免服务器端处理，提供静态 html 和一段 javascript。我已经为旧版本的 API 完成了它，它工作得很好。然而，新方法需要通过 OAuth 提供身份验证数据。其中一个属性 ( `oath_signature`) 是其他属性的散列（其中有`oauth_timestamp`和`oath_nonce`，每个 twitter 请求应该（应该？）是唯一的）和密钥，因此在客户端生成它是不安全的。

是否有任何安全的方法可以使用新 API 在客户端获取推文列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:41:33.533

您的问题的简单答案是，“不，没有服务器端代码就没有安全的方法。” 我要做的是设置一个服务，每 xxxx 秒轮询一次 Twitter 并检索所需的推文。您应该缓存或存储结果，然后在每次发出下一个请求时清空它们。如果您使用的是 C#，我一直在开发一个[C# Twitter 库](https://github.com/zkniebel/TweetNet)，该库复制了 Twitter 的 API，并且已经支持抓取用户的时间线。我将在接下来的两天内添加对过滤器和搜索的支持（如果您决定自己做的话，每个应该不超过十分钟来实现，不包括测试）。你可以在我之前提到的服务中引用这个库。

如果您没有为此所需的服务器资源，那么我强烈警告您不要使用绕过 Twitter 预期证券的解决方案，因为这可能会使您或您的客户处于易受攻击的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T15:58:28.610

您必须在服务器端编写代理 Web 服务。正如您所说，缓存对于避免每 15 分钟 15 个请求用于拉推推文等基本内容至关重要。

绝对避免在前端做任何身份验证的事情。使用 OAuth 2的新“[仅应用程序](https://dev.twitter.com/docs/auth/application-only-auth)”身份验证将允许您在 JavaScript 中嵌入不记名令牌，这意味着您无需执行任何您正在谈论的签名内容。但是不要。任何人都可以使用您的不记名令牌，如果您自己的用户没有用尽速率限制，其他人可能会窃取您的令牌。

如果您自己没有服务器端资源来执行此操作，则可能需要查看[Flamingo](http://twproxy.eu/)。它会为你做身份验证和缓存，所以你只需要像以前一样在 JS 中工作。

# android - 在 Android 中运行应用程序的电池使用情况

> ID：13929897
> 
> 赞同：0
> 
> 时间：2012-12-18T09:30:05.937
> 
> 标签：android

我正在寻找android中应用程序的电池使用情况。如何以编程方式实现它？我想要wifi GPS。

您的帮助将不胜感激..

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T12:24:04.840

> 我正在寻找android中应用程序的电池使用情况。如何以编程方式实现它？

你没有。这不能通过 Android SDK 获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:36:34.933

我将从这里开始并获取当前的电池寿命，电池状态意图：http: [//developer.android.com/training/monitoring-device-state/battery-monitoring.html](http://developer.android.com/training/monitoring-device-state/battery-monitoring.html)

```
int level = battery.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
int scale = battery.getIntExtra(BatteryManager.EXTRA_SCALE, -1);

float batteryPct = level / (float)scale; 
```

然后使用 API 来获得更具体的应用程序。我会看看我是否能看到任何东西。

data/system/ 目录下的 batterystats.bin 文件有电池信息。没有 API，您需要使用自己构建的平台来执行此操作。来源： https: [//plus.google.com/u/0/105051985738280261832/posts/FV3LVtdVxPT](https://plus.google.com/u/0/105051985738280261832/posts/FV3LVtdVxPT)

# jms - 在 horneq-2.2.5 Final 中显示错误的消息计数

> ID：13929898
> 
> 赞同：0
> 
> 时间：2012-12-18T09:30:09.867
> 
> 标签：jms, jmx, hornetq

我正在使用 hornetq-2.2.5 Final。我向队列发送了 100 万条消息，之后消耗了队列中的所有消息。当我查看 Jconsole 时，MessagesAdded 为 1000000，MessageCount 超过 400，但队列中没有消息。这是 hornetq-2.2.5 Final 中的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:02:41.660

2.2.5 有一些错误，你应该得到最新的..

如果您仍然遇到问题，请向我们发送测试或复制问题的方法

# css - 如何将孩子放在 z-index 较高的父母兄弟姐妹面前？

> ID：13929899
> 
> 赞同：1
> 
> 时间：2012-12-18T09:30:09.087
> 
> 标签：css, z-index

如何将孩子放在 z-index 较高的父母兄弟姐妹面前？

我想让粉红色的盒子出现在绿色的前面。

[http://jsfiddle.net/Tim86/YRTxt/](http://jsfiddle.net/Tim86/YRTxt/)

![例子](../Images/0bdee2e976ae9aeb7804606b9d02b004.png)

```
<style>
#wrapper{
    position:relative;
    width:400px;
}
#red, #green{
    height:200px;
    width:400px;
}
#red{
    background-color:red;
    position:relative;
    z-index:10;
}
#pink{
    background-color:pink;
    height:250px;
    width:150px;
    top:50px;
    right:20px;
    position:absolute;
    z-index:40;
}
#green{
    opacity:0.8;
    background-color:green;
    position:relative;
    z-index:20;
    top:-50px;
}
</style>

<div id="wrapper">
    <div id="red">
        <div id="pink">
        </div>
    </div>
    <div id="green">

    </div>
</div>
​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T09:38:52.953

您需要从中删除`position:relative;`并`#red`完成。

[演示](http://jsfiddle.net/mbilal/YRTxt/5/)

# android - android http请求到完整站点（避免移动版本）

> ID：13929900
> 
> 赞同：2
> 
> 时间：2012-12-18T09:30:10.837
> 
> 标签：android, http

我知道如何在 android 上发出 http 请求。但是我如何向网站发出 http 请求并保证响应来自完整网站而不是**移动版本**？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:37:18.177

您应该修改用户代理字符串（使其看起来来自桌面浏览器）请参阅下面的链接：

[设置 java URLConnection 的用户代理](https://stackoverflow.com/questions/2529682/setting-user-agent-of-a-java-urlconnection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:39:11.037

尝试删除请求标头或更改所有可以确定它是移动设备的标头希望对您有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T09:41:23.160

您需要像这样设置您的用户代理。

```
 String ua = "Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.4) Gecko/20100101          
 Firefox/4.0";

    mWebview.getSettings().setUserAgentString(ua); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T09:43:59.457

这将有助于：

```
HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(url);
        String userAgent = "Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.4) Gecko/20100101 Firefox/4.0";

        try {
            httppost.setHeader("User-Agent", userAgent);
            // Add your data

            // Execute HTTP Post Request
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity(); 
```

# jquery - 可访问性：在关闭 Fancybox 2 时设置焦点

> ID：13929903
> 
> 赞同：0
> 
> 时间：2012-12-18T09:30:23.020
> 
> 标签：jquery, fancybox, focus, accessibility, fancybox-2

我正在尝试使 Fancybox 2 可访问，但是当 Fancybox 关闭时，我无法将焦点设置在打开链接上。

我试过这个功能，但它不起作用：

```
beforeClose: function() {
    $(".fancybox").eq(this.index).focus();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:09:17.567

你刚刚对自己说“ *......当 Fancybox 关闭时*”所以使用`afterClose`回调代替：

```
afterClose: function() {
    $(this.element).focus();
} 
```

见**[DEMO](http://jsfiddle.net/tTxmP/)**（在 Chrome 中更容易理解）

`$(this.element)`指`$(this)`在fancybox ...您调用fancybox的链接。

# c - 变量定义和给它们的地址

> ID：13929905
> 
> 赞同：1
> 
> 时间：2012-12-18T09:30:37.497
> 
> 标签：c, memory-management

当我写：

```
int a;
int c; 
```

或者

```
int a, c; 
```

*   什么时候`a`和`c`存储在内存中的*相邻*位置？（`(&a+1)`等于`&c`？）
*   你定义它们的方式对此有影响吗？还是只取决于机器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T09:32:23.517

不，您不能保证`a`并且`c`在内存中的相邻位置，但通常是这种情况。我相信*通常* `&a - 1`会等于`&c`堆栈*通常*向下增长。

如果您想要连续变量，请使用数组。

> 你定义它们的方式对此有影响吗？

通常，除非必须，否则编译器不会重新排序。例如，为了满足某些对齐或出于性能原因。

* * *

此外，正如 Mysticial 所说，编译器有时可以优化变量，使它们根本不存在于内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:33:13.137

编译器可以随意放置它们。无法保证它们的放置位置。当您需要它们相邻时，您可以将它们声明为具有两个元素的数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T09:33:55.953

在任何一种情况下，都没有必要将整数`a`和`c`相邻存储。C标准没有规定这样的事情。

即使你观​​察到这样的事情，你也不能依靠它来做任何事情，也没有实际用处。

# android - Brother QL 720NW Android 和 iPhone 打印

> ID：13929907
> 
> 赞同：-4
> 
> 时间：2012-12-18T09:30:37.747
> 
> 标签：android, iphone

我想从我的 Android 和 iPhone 应用程序打印标签。打印机是 Brother QL 720NW 我曾尝试过 iprintsdk.com 但我不确定如何使用它。而且它似乎不是免费的。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:00:29.753

首先，您需要检查您的打印机是否兼容 airprint，如果是，则不需要应用程序：http: [//support.apple.com/kb/ht4356](http://support.apple.com/kb/ht4356)

如果不是，请尝试从 App Store 下载免费的打印应用程序，例如适用于 iOS 的 printdirect 或适用于 android 和 ios 的付费应用程序 Print

[https://play.google.com/store/apps/details?id=com.eurosmartz.app.print&feature=search_result](https://play.google.com/store/apps/details?id=com.eurosmartz.app.print&feature=search_result)

# iphone - 在界面生成器中为不同状态设置 UIButton 的图像

> ID：13929910
> 
> 赞同：4
> 
> 时间：2012-12-18T09:30:45.220
> 
> 标签：iphone, objective-c, uibutton

我面临着非常奇怪的问题。

在界面构建器中，我试图为“正常”状态配置和“选定”状态配置设置图像。但是通过单击按钮，我的图像没有改变。

即使我在 viewDidLoad 方法中编写代码。

```
[btnCheckBoxMale setImage:[UIImage imageNamed:@"blankcheckbox.png"] forState:UIControlStateNormal];
    [btnCheckBoxMale setImage:[UIImage imageNamed:@"checkbox.png"] forState:UIControlStateSelected]; 
```

但是我的图像在点击它时并没有改变

任何人都可以说是什么问题？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-18T09:36:43.083

在界面生成器中将图像设置为不同的状态，而不是在代码中设置它。请参阅屏幕截图以了解如何设置它。试试这个，如果您遇到任何问题，请问我。 ![按钮图像](../Images/4c1dbc8fd933cf55ca190184e6d7e0a6.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T09:36:39.103

如果您在按钮操作中手动设置，它将起作用：

```
btnCheckBoxMale.selected = YES; 
```

因为默认情况下 UIButton 只有两种状态——正常和高亮。和其他状态一样`selected`，`disabled`您必须手动控制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T09:38:54.800

当您在按钮单击事件上调用该方法时，只需设置为选中状态.. 例如..

```
-(IBAction) btnCheckBoxMale_Clicked:(id)sender{
    [btnCheckBoxMale setSelected:YES];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-15T07:40:49.603

```
-(IBAction) btnCheckBoxMale_Clicked:(id)sender{
UIButton * btnCheckBoxMale = (UIButton *)sender;
[btnErase setSelected:! btnCheckBoxMale];
} 
```

# php - 在 wordpress 中使用 get_avatar

> ID：13929913
> 
> 赞同：0
> 
> 时间：2012-12-18T09:30:53.283
> 
> 标签：php, wordpress

此代码将显示某个类别的最新帖子。帖子只会显示摘录，旁边是用户头像。

注意：我使用的插件叫做`local avatar`

```
 //display newest post// 
    <?php
       global $post;
       $args = array( 'numberposts' => 1, 'category' => 1 );
       $myposts = get_posts( $args );
       foreach( $myposts as $post ):setup_postdata($post); ?>

       //gets user avatar and excerpt//
       <?php echo get_avatar( get_the_author_meta( 'user_email' )); ?>
       <a href="<?php the_permalink(); ?>"><?php echo get_excerpt(100); ?>... </a>

     <?php endforeach; ?> 
```

根据 wordpress，如果我想显示用户头像，我应该在循环中包含以下内容，`<?php echo get_avatar( $id_or_email, $size = '50'); ?>` 此代码仅显示默认头像。

所以我使用了这个，它取自 `<?php echo get_avatar( get_the_author_meta( 'user_email' )); ?>`本地上传的头像和 gravatar 作品的默认 wordpress 模板。

我只是想弄清楚为什么后者有效，而不是 wordpress codex 中的那个有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:37:28.920

它们都是完全相同的功能，除了一个是从[WordPress 文档](http://codex.wordpress.org/Function_Reference/get_avatar)中获取的指南，另一个是在运行中。

让我解释：

`$id_or_email`并且是占位符，向您展示该函数需要`$size = '50'`什么样的参数。`get_avatar()`因为`$id_or_email`默认情况下它不是 Wordpress 中声明的变量，它的值为`undefined`. 所以你真正写的是：

`get_avatar(undefined, 50)`

`get_avatar()`需要用户的 ID 或电子邮件地址作为返回其头像的第一个参数。因为您提供了它，所以这些 Wordpress 都不会退回到默认头像。

因为`get_the_author_meta( 'user_email' )`返回一个电子邮件地址，您已成功满足`get_avatar()`. 第二个参数`$size`是可选的，默认为 96。

有关更多用途，请参阅[http://codex.wordpress.org/Function_Reference/get_avatar#Examples](http://codex.wordpress.org/Function_Reference/get_avatar#Examples)。

# c# - 更新 GAC dll

> ID：13929914
> 
> 赞同：8
> 
> 时间：2012-12-18T09:30:58.697
> 
> 标签：c#, visual-studio-2010, setup-project, gac

我在 GAC 中注册了一个 DLL，其中有一个错误（v4.2.0）。

因此，我修复了该错误，仅更新了文件版本 (v4.2.1)（保留程序集版本 v4.2.0）并构建了一个新的 MSI 包。

问题是 DLL 没有安装在 GAC 中。我通过右键单击其中的 DLL`C:\Windows\Microsoft.NET\assembly\GAC_MSIL\MyDLL\v4.0_4.2.0.0__2269313d92725976`并检查了文件版本来验证这一点，它仍然`v4.2.0`是 .下也没有创建其他文件夹`C:\Windows\Microsoft.NET\assembly\GAC_MSIL\MyDLL`。

**但！**如果我卸载第一个版本，然后安装新的 DLL，它就可以在 GAC 中安装。

我是以错误的方式接近这个吗？我们的应用程序设置为使用特定版本，因此仅创建程序集版本 v4.3.0 并将其安装在 GAC 中是行不通的。

**更新**

我找到了有关发布者政策的文章 ( [http://support.microsoft.com/kb/891030](http://support.microsoft.com/kb/891030) )，并正在尝试这样做。我已经生成了策略程序集。但是当我尝试将它添加到安装项目时，Visual Studio 崩溃了 =(

我还尝试将其作为内容文件添加到主项目（然后将内容文件添加到 GAC）。但随后它抱怨没有签署该程序集。

所以我还是卡住了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T10:33:53.647

更新 [AssemblyFileVersion] 以修复错误通常是正确的方法，但如果您为 GAC 中的程序集这样做，它会变得很不确定。您冒着破坏另一个也使用程序集的应用程序的风险，并且无意中依赖错误行为来正常运行。像重命名公共方法这样的无意错误当然总是破坏应用程序的好方法，通往 DLL Hell 的道路是由许多好的意图铺成的，结果却是坏的。

然而，GAC 只关注 [AssemblyVersion] 并忽略文件版本。要获得更新的程序集来替换现有的程序集，您必须先删除旧的程序集。这是有意的，可防止意外更换。

`<bindingRedirect>`您要修复的应用程序的 .config 文件中的A比发布者策略更容易启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:22:43.307

我相信这与 GAC 使用 .NET 程序集的哪些参数给它一个唯一标识符有关。如果程序集版本是这些唯一性参数之一，但文件版本不是，那可能会解释您的症状。具体来说，这与 GAC 对强命名程序集的需求有关

这个链接说了很多

[http://msdn.microsoft.com/en-us/library/wd40t7ad.aspx](http://msdn.microsoft.com/en-us/library/wd40t7ad.aspx)

# jqgrid - 使用 URL 发布 row_id：扩展 jqgrid 以加载子网格时

> ID：13929917
> 
> 赞同：1
> 
> 时间：2012-12-18T09:31:06.187
> 
> 标签：jqgrid, jqgrid-php

在扩展网格时，我试图通过将父行键 (dept_id) 发布到 url:'sub_grid_load_dept.php' 来将 jqgrid 作为子网格加载。但是不知道如何以简单的方式做到这一点。这是我的代码

```
jQuery("#grid-dept").jqGrid({
    url:'grid_load_dept.php',
    datatype: "xml",

    colNames:['dept id','dept prefix','dept name'],
    colModel:[
     {name:'dept_id',index:'dept_id', width:200, editable: true},
     {name:'dept_prefix',index:'dept_prefix', width:200, editable: true},
     {name:'dept_name',index:'dept_name', width:200, editable: true}
    ],
    loadonce:false,
    mtype: "POST",
    pager: '#grid-dept-pager',
    sortname: 'dept_id',
    sortorder: "asc",
    editable: true, 
    caption: "department",
    editurl:"grid_edit_dept.php",
    subGrid: true,
    subGridRowExpanded: function(subgrid_id, row_id) 
        {
           var subgrid_table_id;
           var pager_id;
           subgrid_table_id = subgrid_id+"_t";
           pager_id = "p_"+subgrid_table_id;
           $("#" + subgrid_id).html("<table id='"+subgrid_table_id+"' class='scroll'></table><div id='"+ pager_id +"' class='scroll'></div>");
           $("#" + subgrid_table_id).jqGrid({
              url:'sub_grid_load_dept.php',
              datatype: "xml",
              colNames: ['id','dept_id','office_id','dept_head','date_from','date_to','remarks'],
              colModel:
              [
                {name:"id",index:"id",width:80,key:true, editable:true},
                {name:"dept_id",index:"dept_id",width:130, editable:true},
                {name:"office_id",index:"office_id",width:80,align:"right", editable:true},
                {name:"dept_head",index:"dept_head",width:80,align:"right", editable:true},           
                {name:"date_from",index:"date_from",width:100,align:"right", editable:true},
                {name:"date_to",index:"date_to",width:100,align:"right", editable:true},
                {name:"remarks",index:"remarks",width:100,align:"right", editable:true}
              ],
              caption: "Department Details",
              mtype: "POST",
              sortname: 'id',
              sortorder: "asc",
              editable: true,
              pager:pager_id,
              editurl:"sub_grid_edit_dept.php"
           });
         jQuery("#"+subgrid_table_id).jqGrid('navGrid',"#"+pager_id,{edit:true,add:true,del:false,search:true,refresh:true})
   } 
```

我的意思是如何在 subGridRowExpanded: function(subgrid_id, row_id) 中发布 'row_id' 通过包含在 URL: proterty.maybe 作为一个数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T05:21:35.123

我找到了解决方案：[http://stackoverflow.com/questions/12823591/how-to-pass-the-selected-row-id-to-the-subgrids-url-in-jqgrid][1]

使用的 postDATA：直接附加到 url 的关联数组。

```
postData: {prodcutid: row_id} 
```

# windows - 更新 Windows 资源管理器中显示的可用空间量

> ID：13929923
> 
> 赞同：1
> 
> 时间：2012-12-18T09:31:33.487
> 
> 标签：windows, delphi, delphi-7, windows-shell

如何更新 Windows 资源管理器中显示的驱动器可用空间量？

假设打开了 Windows 资源管理器并以编程方式删除了一些文件。Windows 资源管理器将不会刷新以显示新的可用空间。

所以，我试着`SHChangeNotify`像这样使用（Delphi代码）：

```
ws := 'C:\';
SHChangeNotify (SHCNE_FREESPACE, SHCNF_PATH, PWideChar(ws), nil); 
```

但它不会更新“Windows 资源管理器”中报告的值。

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T11:31:58.673

如果您使用的是 Delphi 7，`SHCNF_PATH`则将映射到 ANSI 版本，`SHCNF_PATHA`. 在这种情况下，传递`PWideChar`是错误的。像这样写：

```
var
  Drive: string;
....
Drive := 'C:\';
SHChangeNotify(SHCNE_FREESPACE, SHCNF_PATH, PChar(Drive), nil); 
```

或者，如果您更喜欢使用 Unicode 版本，那么您需要使用`SHCNF_PATHW`.

```
var
  Drive: WideString;
....
Drive := 'C:\';
SHChangeNotify(SHCNE_FREESPACE, SHCNF_PATHW, PWideChar(Drive), nil); 
```

# c - 有没有办法让 doxygen 在不更改 css 的情况下显示枚举数值？

> ID：13929925
> 
> 赞同：22
> 
> 时间：2012-12-18T09:31:41.977
> 
> 标签：c, doxygen

我想在 doxygen 输出中获取枚举成员的实际值。例如我有：

```
///MyEnum
typedef enum My_Enum
{
MY_ENUM_0,///<MY_ENUM_0
MY_ENUM_1,///<MY_ENUM_1
MY_ENUM_2 ///<MY_ENUM_2
} My_Enum; 
```

输出是：

```
MyEnum.
Enumerator:
MY_ENUM_0
      MY_ENUM_0.
MY_ENUM_1
      MY_ENUM_1.
MY_ENUM_2
      MY_ENUM_2. 
```

我想要的是：

```
Enumerator:
MY_ENUM_0
          0 MY_ENUM_0.
MY_ENUM_1
          1 MY_ENUM_1.
MY_ENUM_2
          2 MY_ENUM_2. 
```

或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-09-19T16:53:26.683

我无法想到直接从 doxygen 中执行此操作的方法。Doxygen 不是 C 编译器。因此它不会导出作为编译时常量的枚举的值。

doxygen 可以做的最接近的事情是[选择性地扩展你的宏](http://www.doxygen.nl/manual/preprocessing.html)，因为它确实有一个 C 预处理器。因此，如果您为通过预处理器扩展派生的常量分配了一些值，doxygen 可以扩展宏并向您显示将被分配的内容。

基于 TheCodeArtist 的回答，您可能会考虑编写在 doxygen 之前运行的脚本，复制您的文件，搜索此模式：

```
enum *** {
    ***, ///< %VAL%: 
```

并将每次出现的 %VAL% 替换为应为的值，这样您就不必手动跟上数字。在 doxygen 运行包含 %VAL% 令牌的原始文件之后，需要替换。这不是一个特别优雅或强大的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T16:54:53.983

使用 doxygen，我们可以记录：

*   这**`enum`**
*   它的**价值观**
*   每个值的**描述**

以下代码片段描述了上述所有 3 个示例。

```
/*! \enum My_Enum
* Documentation of the enum type.
*/

typedef enum My_Enum {
    MY_ENUM_0, /*!< Document the value 0 */
    MY_ENUM_1, /*!< Document the value 1 */
} My_Enum;

/*! \var My_Enum MY_ENUM_0
 * The description of the MY_ENUM_0\. Can contain its enumerated name */

/*! \var My_Enum MY_ENUM_1
 * The description of the MY_ENUM_1\. Can contain its enumerated name*/ 
```

* * *

另请注意，由于宏/枚举扩展不会发生在 doxygen 注释中。如果在 doxygen 注释中使用了任何内容，则需要使用`INPUT_FILTER`. 例如：

```
INPUT_FILTER = sed /MY_ENUM_0/0 
```

以下代码段需要

```
typedef enum My_Enum {
    MY_ENUM_0, /*!< MY_ENUM_0 */
    ... 
```

* * *

另请查看此**[答案](https://stackoverflow.com/a/13756348/319204)**以获取有关多种 doxygen 评论样式的详细信息：

*   `///< <comment>`
*   `/*!< <comment> */`

# jasper-reports - 如何将变量的值从子报表传递到主报表并根据 iReportDesigner Jasper Reports 中的该值显示/隐藏详细信息带？

> ID：13929928
> 
> 赞同：3
> 
> 时间：2012-12-18T09:31:48.857
> 
> 标签：jasper-reports, return-value, ireport, subreport

我将一个字段的值存储在子报表的变量中。这个变量我将返回到主报告。基于这个值，我想显示/隐藏细节带 2。但我无法实现这一点，因为子报表返回的值始终为 Null，这让我感到震惊，因为当我在子报表中显示相同的值时它本身给了我2（整数）。这个你能帮我吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:07:03.767

对于您问题的第一部分

> ***子报表返回的值始终为 Null***

在您的主要报告中，请交叉检查以下内容。

*   您从您的子报告中返回变量，如在[此处](http://www.scribd.com/doc/91916205/100/Returning-Values-from-a-Subreport)指定的那样。

*   如果子报表和您使用返回值的文本字段位于同一条带上，则需要`evaluationTime="Band"`为文本字段进行设置。

对于你问题的后半部分，

> ***我想显示/隐藏细节带 2***

*   使用报告检查器，选择详细信息带 2。
*   使用属性选项卡访问波段的属性。
*   您可以找到该物业`PrintWhenExpression`。
*   编辑其值以隐藏/显示细节带 2。

答案的第二部分适用于以下逻辑

**`PrintWhenExpression`将在波段渲染过程开始时评估，然后开始渲染元素**。

因此，如果子报告也在同一个波段中，在您的情况下为详细波段 2，则此方法不适用。

# javascript - 更改 lib jquery.knob.js 的元素大小

> ID：13929937
> 
> 赞同：5
> 
> 时间：2012-12-18T09:32:31.743
> 
> 标签：javascript, jquery

我有一个[页面](http://regexinfo.ru/my_infa/parse_position/good/pr/)

按下按钮后，你会看到 lib jquery.knob.js(circle) 的元素，我想改变圆圈大小，我写了这段代码：

```
<div style="float:left; width:255px; height:155px">
            <input class="knob" data-fgColor="#9dc806" data-cgColor="black" data-bgColor="#7d7d7d" data-tickColor="black" data-thickness=".25" data-readOnly=true value="<?php echo $percent; ?>">
        </div> 
```

但是如果我改变div的宽度和高度，圆的大小不会改变吗？

pb.php的所有代码页：

```
<?php
header('Content-Type: text/html; charset=utf-8');
include '../connect.php';
include '../ProcessingMySQL.php';
$mysqli = new ProcessingMySQL($hostname, $user_name, $password, $db_name);
$site = $_POST['sites'];
$percent = $mysqli->getPercentTopQuery($site);
?>

<html>
    <head>
    <style type="text/css">
        .knob{color:#000000 !important;}
    </style>

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
        <script src="js/jquery.knob.js"></script>
        <script>
            $(function() {
                $(".knob").knob();
                var val,up=0,down=0,i=0
                    ,$idir = $("div.idir")
                    ,$ival = $("div.ival")
                    ,incr = function() { i++; $idir.show().html("+").fadeOut(); $ival.html(i); }
                    ,decr = function() { i--; $idir.show().html("-").fadeOut(); $ival.html(i); };
                $("input.infinite").knob(
                                    {
                                    'min':0
                                    ,'max':20
                                    ,'stopper':false
                                    ,'change':function(v){
                                                if(val>v){
                                                    if(up){
                                                        decr();
                                                        up=0;
                                                    }else{up=1;down=0;}
                                                }else{
                                                    if(down){
                                                        incr();
                                                        down=0;
                                                    }else{down=1;up=0;}
                                                }
                                                val=v;
                                            }
                                    }
                                );     
                                $('.knob').val($('.knob').val() + '%');     
             });
        </script>
        <style>
            h2{color:#87CEEB;font-family:'Georgia';}
        </style>
    </head>
    <body>
        <h1>Процент запросов в топе для сайта <?php echo $site; ?></h1>
        <div style="float:left; width:255px; height:155px">
            <input class="knob" data-fgColor="#9dc806" data-cgColor="black" data-bgColor="#7d7d7d" data-tickColor="black" data-thickness=".25" data-readOnly=true value="<?php echo $percent; ?>">
        </div>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:50:04.527

```
<div style="float:left; width:255px; height:155px">
            <input class="knob" data-fgColor="#9dc806" data-cgColor="black" data-bgColor="#7d7d7d" data-tickColor="black" data-thickness=".25" data-readOnly=true data-width="255" value="<?php echo $percent; ?>">
        </div> 
```

尝试将`data-width="width_of_circle"`属性添加到您的`input.knob`. 据我所知，这就是控制圆宽度的方法。就像上面的代码一样（宽度设置为 255）

# opengl - 系统在 glReadPixel() 调用时挂起

> ID：13929948
> 
> 赞同：0
> 
> 时间：2012-12-18T09:33:15.113
> 
> 标签：opengl, textures, opengl-3

我打电话`glReadPixel`后`glDrawArray`打电话。我正在渲染一个带有 3D 纹理的几何图形作为目标`GL_TEXTURE_2D_ARRAY`。问题是我的系统在 `glReadPixel 调用时挂起：

```
glReadPixels(0, 0, GetViewportWidth(), GetViewportHeight(), GL_RGBA, GL_UNSIGNED_BYTE, (GLvoid *)rendered_pixels); 
```

当我使用目标时，`GL_TEXTURE_3D`问题不会发生并且它正确读取帧缓冲区内容。

我在`glTeximage3D`调用中使用带有 GL_byte 数据的 SNORM 纹理，但我没有调用`glPixelStorei`，是因为这个吗？pixelstore 调用的参数应该是什么？

# linux - sphinx 错误连接到 127.0.0.1:9845 失败 (errno=0, msg=)

> ID：13929949
> 
> 赞同：0
> 
> 时间：2012-12-18T09:33:18.947
> 
> 标签：linux, search, centos, sphinx

我在 Centos 中安装 sphinx，一切都是正确的

```
[root@li561-40 ~]# /usr/local/sphinx/bin/search crusher
Sphinx 2.0.6-release (r3473)
Copyright (c) 2001-2012, Andrew Aksyonoff
Copyright (c) 2008-2012, Sphinx Technologies Inc (http://sphinxsearch.com)

using config file '/usr/local/sphinx/etc/sphinx.conf'...
index 'test1': query 'crusher ': returned 1 matches of 1 total in 0.009 sec

displaying matches:
1\. document=2, weight=2500, id_attr=2, date_added=Thu Jan  1 00:00:00 1970
    ID=2
    crawl_date=0000-00-00 00:00:00
    host=(NULL)
    url=(NULL)
    page_title=crusher for sale
    page_content=this is content, stone crusher machine for sale
    parent=0
    status=publish
    type=page
    mime_type=

words:
1\. 'crusher': 1 documents, 2 hits 
```

但是，当我使用 php api 时，它说连接到 127.0.0.1:9845 失败（errno=0，msg=）

```
require ( "sphinxapi.php" );
$s = new SphinxClient();
$s->SetServer('localhost',9312);

$result = $s->Query('crusher');
echo $s->getLastError();

[root@li561-40 ~]# netstat -anl | grep 9312
tcp        0      0 0.0.0.0:9312                0.0.0.0:*                   LISTEN 
```

请告诉我，我该怎么办？

# java - 以编程方式添加的 Admob 横幅需要位于底部

> ID：13929950
> 
> 赞同：1
> 
> 时间：2012-12-18T09:33:30.730
> 
> 标签：java, android, admob, banner

![在此处输入图像描述](../Images/06e801385a8f0401abc9421ebc66345b.png)

我有一个以编程方式添加的 advmob 横幅，如下所示：

```
 public class MenuActivity extends Activity   {
    AdView  adView ;

    @Override   
     public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);  
        setContentView(R.layout.activitymain);

  adView = new AdView(this, AdSize.BANNER, "a15013b6f790555");

        AdRequest adRequest = new AdRequest();
        adRequest.addTestDevice(AdRequest.TEST_EMULATOR);

         RelativeLayout.LayoutParams relativeParams = new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.WRAP_CONTENT, 
            RelativeLayout.LayoutParams.WRAP_CONTENT);
        relativeParams.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);

        adView.loadAd(adRequest);

        this.addContentView(adView, relativeParams); 
```

**当我运行它时，横幅出现在屏幕顶部，我希望它位于底部**

这里也是xml布局：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical"
android:background="@drawable/mainbackgroundipad">

       <TableRow android:id="@+id/tableRow1">
        <ImageButton
            android:id="@+id/menu1"
            android:layout_width="75dip"
            android:layout_height="74dip"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginTop="57dp"
            android:background="@android:color/transparent"
            android:scaleType="fitXY"
            android:src="@drawable/menu1" />
        <ImageButton
            android:id="@+id/menu2"
            android:layout_width="75dp"
            android:layout_height="59dp"
            android:layout_marginLeft="5dp"
            android:layout_marginTop="70dp"
            android:background="@android:color/transparent"
            android:scaleType="fitXY"
            android:src="@drawable/menu2" />
        <ImageButton
            android:id="@+id/menu3"
            android:layout_width="75dip"
            android:layout_height="63dip"
            android:layout_marginLeft="1dp"
            android:layout_marginTop="70dp"
            android:background="@android:color/transparent"
            android:scaleType="fitXY"
            android:src="@drawable/menu3" />
        <ImageButton
            android:id="@+id/menu4"
            android:layout_width="60dp"
            android:layout_height="83dp"
            android:layout_marginRight="100dp"
            android:layout_marginTop="50dp"
            android:background="@android:color/transparent"
            android:scaleType="fitCenter"
            android:src="@drawable/menu4" />
    </TableRow>

              <TableRow android:id="@+id/tableRow2">

 <ImageButton
            android:id="@+id/menu5"
            android:layout_width="50dp"
            android:layout_height="75dp"
            android:layout_marginLeft="12dp"
            android:layout_marginTop="60dp"
            android:background="@android:color/transparent"
            android:scaleType="fitXY"
            android:src="@drawable/menu5" />

        <ImageButton
            android:id="@+id/menu6"
            android:layout_width="60dp"
            android:layout_height="79dp"
            android:layout_marginTop="60dp"
            android:background="@android:color/transparent"
            android:scaleType="fitXY"
            android:src="@drawable/menu6" />

        <ImageButton
            android:id="@+id/menu7"
            android:layout_width="60dip"
            android:layout_height="86dip"
           android:layout_marginLeft="5dp"
            android:layout_marginTop="60dp"
            android:background="@android:color/transparent"
            android:scaleType="fitStart"
            android:src="@drawable/menu7" />

        <ImageButton
            android:id="@+id/menu8"
            android:layout_width="75dip"
            android:layout_height="50dip"
            android:layout_centerVertical="true"
           android:layout_marginRight="110dp"
            android:layout_marginTop="80dp"
            android:background="@android:color/transparent"
            android:scaleType="fitXY"
            android:src="@drawable/menu8" />
         </TableRow>

                <TableRow android:id="@+id/tableRow3">

        <ImageButton
            android:id="@+id/menu9"
            android:layout_width="60px"
            android:layout_height="80px"
             android:layout_marginLeft="2dp"
            android:layout_marginTop="40dp"
            android:background="@android:color/transparent"
            android:scaleType="fitXY"
            android:src="@drawable/menu9" />

        <ImageButton
            android:id="@+id/menu10"
            android:layout_width="75dip"
            android:layout_height="56dip"
            android:layout_alignParentLeft="true"
           android:layout_marginLeft="2dp"
            android:layout_marginTop="70dp"
            android:background="@android:color/transparent"
            android:scaleType="fitXY"
            android:src="@drawable/menu10" />

        <ImageButton
            android:id="@+id/menu11"
            android:layout_width="75dip"
            android:layout_height="65dip"
            android:layout_alignParentLeft="true"
            android:layout_marginLeft="2dp"
            android:layout_marginTop="70dp"
            android:background="@android:color/transparent"
            android:scaleType="fitXY"
            android:src="@drawable/menu11" />

        <ImageButton
            android:id="@+id/menu12"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_marginRight="100dp"
            android:layout_marginTop="70dp"
            android:background="@android:color/transparent"
            android:scaleType="fitXY"
            android:src="@drawable/menu12" />
  </TableRow>

</TableLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T09:39:49.587

像这样更改您的 XML 文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/rootview"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
     >

    <TableLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:background="@drawable/mainbackgroundipad"
        android:orientation="vertical" >

        <TableRow android:id="@+id/tableRow1" >

            <ImageButton
                android:id="@+id/menu1"
                android:layout_width="75dip"
                android:layout_height="74dip"
                android:layout_alignParentLeft="true"
                android:layout_alignParentTop="true"
                android:layout_marginTop="57dp"
                android:background="@android:color/transparent"
                android:scaleType="fitXY"
                android:src="@drawable/menu1" />

            <ImageButton
                android:id="@+id/menu2"
                android:layout_width="75dp"
                android:layout_height="59dp"
                android:layout_marginLeft="5dp"
                android:layout_marginTop="70dp"
                android:background="@android:color/transparent"
                android:scaleType="fitXY"
                android:src="@drawable/menu2" />

            <ImageButton
                android:id="@+id/menu3"
                android:layout_width="75dip"
                android:layout_height="63dip"
                android:layout_marginLeft="1dp"
                android:layout_marginTop="70dp"
                android:background="@android:color/transparent"
                android:scaleType="fitXY"
                android:src="@drawable/menu3" />

            <ImageButton
                android:id="@+id/menu4"
                android:layout_width="60dp"
                android:layout_height="83dp"
                android:layout_marginRight="100dp"
                android:layout_marginTop="50dp"
                android:background="@android:color/transparent"
                android:scaleType="fitCenter"
                android:src="@drawable/menu4" />
        </TableRow>

        <TableRow android:id="@+id/tableRow2" >

            <ImageButton
                android:id="@+id/menu5"
                android:layout_width="50dp"
                android:layout_height="75dp"
                android:layout_marginLeft="12dp"
                android:layout_marginTop="60dp"
                android:background="@android:color/transparent"
                android:scaleType="fitXY"
                android:src="@drawable/menu5" />

            <ImageButton
                android:id="@+id/menu6"
                android:layout_width="60dp"
                android:layout_height="79dp"
                android:layout_marginTop="60dp"
                android:background="@android:color/transparent"
                android:scaleType="fitXY"
                android:src="@drawable/menu6" />

            <ImageButton
                android:id="@+id/menu7"
                android:layout_width="60dip"
                android:layout_height="86dip"
                android:layout_marginLeft="5dp"
                android:layout_marginTop="60dp"
                android:background="@android:color/transparent"
                android:scaleType="fitStart"
                android:src="@drawable/menu7" />

            <ImageButton
                android:id="@+id/menu8"
                android:layout_width="75dip"
                android:layout_height="50dip"
                android:layout_centerVertical="true"
                android:layout_marginRight="110dp"
                android:layout_marginTop="80dp"
                android:background="@android:color/transparent"
                android:scaleType="fitXY"
                android:src="@drawable/menu8" />
        </TableRow>

        <TableRow android:id="@+id/tableRow3" >

            <ImageButton
                android:id="@+id/menu9"
                android:layout_width="60px"
                android:layout_height="80px"
                android:layout_marginLeft="2dp"
                android:layout_marginTop="40dp"
                android:background="@android:color/transparent"
                android:scaleType="fitXY"
                android:src="@drawable/menu9" />

            <ImageButton
                android:id="@+id/menu10"
                android:layout_width="75dip"
                android:layout_height="56dip"
                android:layout_alignParentLeft="true"
                android:layout_marginLeft="2dp"
                android:layout_marginTop="70dp"
                android:background="@android:color/transparent"
                android:scaleType="fitXY"
                android:src="@drawable/menu10" />

            <ImageButton
                android:id="@+id/menu11"
                android:layout_width="75dip"
                android:layout_height="65dip"
                android:layout_alignParentLeft="true"
                android:layout_marginLeft="2dp"
                android:layout_marginTop="70dp"
                android:background="@android:color/transparent"
                android:scaleType="fitXY"
                android:src="@drawable/menu11" />

            <ImageButton
                android:id="@+id/menu12"
                android:layout_width="60dp"
                android:layout_height="60dp"
                android:layout_marginRight="100dp"
                android:layout_marginTop="70dp"
                android:background="@android:color/transparent"
                android:scaleType="fitXY"
                android:src="@drawable/menu12" />
        </TableRow>
    </TableLayout>

</RelativeLayout> 
```

也将规则更改为 `relativeParams.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM, RelativeLayout.TRUE);`

还添加：

```
//change  this.addContentView(adView, relativeParams); by 
        RelativeLayout rootView = (RelativeLayout)findViewById(R.id.rootview);
        rootView.addView(adView, relativeParams); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:50:28.513

```
Change your XML file like this:
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"

        android:layout_width="match_parent"
        android:layout_height="match_parent"
         >

        <TableLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:background="@drawable/mainbackgroundipad"
            android:orientation="vertical" >

            <TableRow android:id="@+id/tableRow1" >

                <ImageButton
                    android:id="@+id/menu1"
                    android:layout_width="75dip"
                    android:layout_height="74dip"
                    android:layout_alignParentLeft="true"
                    android:layout_alignParentTop="true"
                    android:layout_marginTop="57dp"
                    android:background="@android:color/transparent"
                    android:scaleType="fitXY"
                    android:src="@drawable/menu1" />

                <ImageButton
                    android:id="@+id/menu2"
                    android:layout_width="75dp"
                    android:layout_height="59dp"
                    android:layout_marginLeft="5dp"
                    android:layout_marginTop="70dp"
                    android:background="@android:color/transparent"
                    android:scaleType="fitXY"
                    android:src="@drawable/menu2" />

                <ImageButton
                    android:id="@+id/menu3"
                    android:layout_width="75dip"
                    android:layout_height="63dip"
                    android:layout_marginLeft="1dp"
                    android:layout_marginTop="70dp"
                    android:background="@android:color/transparent"
                    android:scaleType="fitXY"
                    android:src="@drawable/menu3" />

                <ImageButton
                    android:id="@+id/menu4"
                    android:layout_width="60dp"
                    android:layout_height="83dp"
                    android:layout_marginRight="100dp"
                    android:layout_marginTop="50dp"
                    android:background="@android:color/transparent"
                    android:scaleType="fitCenter"
                    android:src="@drawable/menu4" />
            </TableRow>

            <TableRow android:id="@+id/tableRow2" >

                <ImageButton
                    android:id="@+id/menu5"
                    android:layout_width="50dp"
                    android:layout_height="75dp"
                    android:layout_marginLeft="12dp"
                    android:layout_marginTop="60dp"
                    android:background="@android:color/transparent"
                    android:scaleType="fitXY"
                    android:src="@drawable/menu5" />

                <ImageButton
                    android:id="@+id/menu6"
                    android:layout_width="60dp"
                    android:layout_height="79dp"
                    android:layout_marginTop="60dp"
                    android:background="@android:color/transparent"
                    android:scaleType="fitXY"
                    android:src="@drawable/menu6" />

                <ImageButton
                    android:id="@+id/menu7"
                    android:layout_width="60dip"
                    android:layout_height="86dip"
                    android:layout_marginLeft="5dp"
                    android:layout_marginTop="60dp"
                    android:background="@android:color/transparent"
                    android:scaleType="fitStart"
                    android:src="@drawable/menu7" />

                <ImageButton
                    android:id="@+id/menu8"
                    android:layout_width="75dip"
                    android:layout_height="50dip"
                    android:layout_centerVertical="true"
                    android:layout_marginRight="110dp"
                    android:layout_marginTop="80dp"
                    android:background="@android:color/transparent"
                    android:scaleType="fitXY"
                    android:src="@drawable/menu8" />
            </TableRow>

            <TableRow android:id="@+id/tableRow3" >

                <ImageButton
                    android:id="@+id/menu9"
                    android:layout_width="60px"
                    android:layout_height="80px"
                    android:layout_marginLeft="2dp"
                    android:layout_marginTop="40dp"
                    android:background="@android:color/transparent"
                    android:scaleType="fitXY"
                    android:src="@drawable/menu9" />

                <ImageButton
                    android:id="@+id/menu10"
                    android:layout_width="75dip"
                    android:layout_height="56dip"
                    android:layout_alignParentLeft="true"
                    android:layout_marginLeft="2dp"
                    android:layout_marginTop="70dp"
                    android:background="@android:color/transparent"
                    android:scaleType="fitXY"
                    android:src="@drawable/menu10" />

                <ImageButton
                    android:id="@+id/menu11"
                    android:layout_width="75dip"
                    android:layout_height="65dip"
                    android:layout_alignParentLeft="true"
                    android:layout_marginLeft="2dp"
                    android:layout_marginTop="70dp"
                    android:background="@android:color/transparent"
                    android:scaleType="fitXY"
                    android:src="@drawable/menu11" />

                <ImageButton
                    android:id="@+id/menu12"
                    android:layout_width="60dp"
                    android:layout_height="60dp"
                    android:layout_marginRight="100dp"
                    android:layout_marginTop="70dp"
                    android:background="@android:color/transparent"
                    android:scaleType="fitXY"
                    android:src="@drawable/menu12" />
            </TableRow>
        </TableLayout>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
         android:id="@+id/linear"
         android:layout_alignParentBottom="true"
        android:layout_width="match_parent"
        android:layout_height="match_parent">
    </LinearLayout>
    </RelativeLayout>

And in java add your adview in the linearlayout.. Hope it must help you 
```

# javascript - 在js中更改按钮顺序

> ID：13929951
> 
> 赞同：0
> 
> 时间：2012-12-18T09:33:45.677
> 
> 标签：javascript, drag-and-drop

我有一系列固定高度和宽度的按钮，这些按钮需要在父 div 内的任何位置可拖放。

根据客户的要求，我不能使用任何外部库，嗯……我本可以在几秒钟内用 jQuery 完成这项工作，但我想这是它的缺点之一：你无法学习更多基本的东西……

我该怎么做呢？这样做的一个问题是这些按钮在一个也可拖动的 div 内，所以我需要小心定位，我只能使用相对。

有什么想法我该怎么做吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:23:09.380

[Peter-Paul Koch](http://www.quirksmode.org/about/)写了一篇[出色的拖放操作指南](http://www.quirksmode.org/js/dragdrop.html)。我自己写的只记得这 3/4 的方式，所以我[把它包起来了](http://jsfiddle.net/barney/HtubL/)。

```
function makeDraggable(draggable, container){
    // In case you don't want to have a container
    var container = container || window;
    // So we know what to do on mouseup:
    // At this point we're not sure the user wants to drag
    var dragging  = false;

        // The movement listener and position modifier
        function dragHandler(moveEvent){
            moveEvent.preventDefault();

            dragging        = true;

            // Ascertain where the mouse is
            var coordinates = [
                    moveEvent.clientX,
                    moveEvent.clientY
            ];

            // Style properties we need to apply to the element 
            var styleValues = {
                    position : 'absolute',
                    left     : coordinates[0] + 'px',
                    top      : coordinates[1] + 'px'
            };

            // Apply said styles
            for(property in styleValues){
                    if(styleValues.hasOwnProperty(property)){
                            draggable.style[property] = styleValues[property];
                    }
            }
    }

    function dropHandler(upEvent){
        // Only interfere if we've had a drag event
        if(dragging === true){
            // We don't want the button click event to fire!
            upEvent.preventDefault();

            // We don't want to listen for drag and drop until this is clicked again
            container.removeEventListener('mousemove', dragHandler, false);
            draggable.removeEventListener('mouseup',   dropHandler, false);

            dragging = false;
        }
    }

    // Where all the fun happens
    draggable.addEventListener('mousedown', function dragListener(downEvent){
        downEvent.preventDefault();

        // The drag event
        container.addEventListener('mousemove', dragHandler, false);

        // The end of drag, if dragging occurred
        draggable.addEventListener('mouseup',   dropHandler, false);
    }, false);
}​ 
```

# ocean - 使用 Ocean API 访问油藏工程数据的问题

> ID：13929952
> 
> 赞同：1
> 
> 时间：2012-12-18T09:33:46.543
> 
> 标签：ocean, petrel

我正在构建一个插件，我需要使用海洋 API 访问 Reservoir 工程域数据。我可以使用 Simulation root 访问开发策略，但无法获取开发策略的类型。无论是历史策略还是预测策略。任何方式都可以知道这些信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T23:50:42.297

在 Petrel RE API 中面临多重限制，并且必须通过 EclipseKeywordEditor 来实现目标很多，我不得不说这是一个简单的。DevelopmentStrategy.StrategyType 属性可以提供帮助：

以下代码在 Petrel 2012.1 上为我工作：

```
SimulationRoot sroot = SimulationRoot.Get(PetrelProject.PrimaryProject);
DevelopmentStrategyCollection dsCol = DevelopmentStrategyCollection.NullObject;
if (sroot.HasDevelopmentStrategyCollection)
{
    dsCol = sroot.DevelopmentStrategyCollection;
    foreach (DevelopmentStrategy strat in dsCol.DevelopmentStrategies)
    {
        PetrelLogger.InfoOutputWindow(string.Format("{0} is a {1} strat",strat.Name,strat.StrategyType));
    }
} 
```

DevGuide 没有列出它，IntelliSense 没有显示它，但是您可以打开对象浏览器并查看它实际上是存在的（实际上是灰色的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T15:06:26.733

不幸的是，没有 Ocean API 可以访问开发策略的类型。我会将您的用例添加到我们的需求系统中。

问候，卡罗尔

# visual-studio-2012 - 我可以在我不拥有的类型上使用类似 DebuggerTypeProxyAttribute 的东西吗？

> ID：13929956
> 
> 赞同：4
> 
> 时间：2012-12-18T09:33:52.510
> 
> 标签：visual-studio-2012, visual-studio-debugging

我有一个`IClaimsPrincipal`变量，我想看看其中有多少声明。在监视窗口中浏览属性很复杂，所以我想自定义这个对象的显示方式。

我知道[`[DebuggerTypeProxy]`属性](http://msdn.microsoft.com/en-us/library/system.diagnostics.debuggertypeproxyattribute.aspx)，最初看起来它可能会做我想要的。不幸的是，它需要附加到班级，我不“拥有”班级。在这种情况下，它是一个`Microsoft.IdentityModel.Claims.ClaimsPrincipal`.

我想显示`IClaimsPrincipal.Identities[0].Claims.Count`.

是否有任何方法（使用`[DebuggerTypeProxy]`或类似方法）来自定义我不拥有的类型的值如何显示在监视窗口中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-04-05T14:20:03.567

应用于 KeyValuePair的[DebuggerTypeProxyAttribute](http://msdn.microsoft.com/en-us/library/d8eyd8zc.aspx)示例仅显示 Value 成员：

```
using System.Collections.Generic;
using System.Diagnostics;

[assembly: DebuggerTypeProxy(typeof(ConsoleApp2.KeyValuePairDebuggerTypeProxy<,>), Target = typeof(KeyValuePair<,>))]
// alternative format [assembly: DebuggerTypeProxy(typeof(ConsoleApp2.KeyValuePairDebuggerTypeProxy<,>), TargetTypeName = "System.Collections.Generic.KeyValuePair`2")]

namespace ConsoleApp2
{
    class KeyValuePairDebuggerTypeProxy<TKey, TValue>
    {
        private KeyValuePair<TKey, TValue> _keyValuePair; // beeing non-public this member is hidden
        //public TKey Key => _keyValuePair.Key;
        public TValue Value => _keyValuePair.Value;

        public KeyValuePairDebuggerTypeProxy(KeyValuePair<TKey, TValue> keyValuePair)
        {
            _keyValuePair = keyValuePair;
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            var dictionary = new Dictionary<int, string>() { [1] = "one", [2] = "two" };
            Debugger.Break();
        }
    }
} 
```

[![在此处输入图像描述](../Images/bd7207a61b4ec4ea2d8892f04df71077.png)](https://i.stack.imgur.com/3ltpf.png)

在 Visual Studio 2017 上测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T08:37:51.973

我自己也有很多次相同的需求，所以我在一个名为“ [BugAid](http://www.bugaidsoftware.com) ”的商业工具中创建了一个名为“[自定义表达式](http://www.bugaidsoftware.com/features/#custom)”的功能。使用它，您右键单击该值，选择“添加自定义表达式”，然后输入：

![自定义表达式](../Images/1a357fbdaf8c705a94b44c139c202e6d.png)

请注意，您甚至可以为表达式输入一个友好的名称，即“索赔金额”：

输入自定义表达式后，只要将鼠标悬停在变量上，您就可以看到其结果：

![自定义表达式 2](../Images/35cfc6e51fe714a4df93f769c62426db.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T09:44:21.150

到目前为止，我想出的最好的方法是调用一个方法：

```
public static class DebuggerDisplays
{
    public static int ClaimsPrincipal(IClaimsPrincipal claimsPrincipal)
    {
        return claimsPrincipal.Identities[0].Claims.Count;
    }
} 
```

...从观察窗口：

```
DebuggerDisplays.ClaimsPrincipal(_thePrincipal),ac = 10 
```

“ [，ac”抑制](https://stackoverflow.com/questions/4178647/this-expression-causes-side-effects-and-will-not-be-evaluated-how-to-suppress)“此表达式会导致副作用并且不会被评估”。

但是，请注意，当超出范围时，Visual Studio 将简单地使监视窗口条目变灰，即使使用“，ac”也是如此。为避免这种情况，您需要确保所有内容都是完全限定的，这意味着您最终会在监视窗口中得到非常长的表达式。

# powershell - 将用户添加到本地组

> ID：13929960
> 
> 赞同：2
> 
> 时间：2012-12-18T09:34:06.187
> 
> 标签：powershell

此功能应在 Windows Server 2003 和 2008 R2 上运行 使用命令行逐行执行它是成功的！脚本执行失败。

```
function addUser2Group([string]$user,[string]$group)
{    
    $cname = gc env:computername
    $objUser = [ADSI]("WinNT://$user")
    $objGroup = [ADSI]("WinNT://$cname/$group,group")  
    $members = $objGroup.PSBase.Invoke('Members')
    $found = $false

    foreach($m in $members)
    {
        if($m.GetType().InvokeMember('Name', 'GetProperty', $null, $m, $null) -eq $user)
        {
            $found = $true
        }
    }

    if(-not $found)
    {
        $objGroup.PSBase.Invoke('Add',$objUser.PSBase.Path)
    }

    $members = $objGroup.PSBase.Invoke('Members')
    $found = $false
    foreach($m in $members)
    {
        if($m.GetType().InvokeMember('Name', 'GetProperty', $null, $m, $null) -eq $user)
        {
            $found = $true
        }
    }

    return $found
}

addUser2Group('MyGlobalMonitoringUser',"SomeDBGroup") 
```

它应该将用户添加到本地组。但它只会给我以下错误：

```
Exception calling "Invoke" with "2" argument(s): "Unknown error (0x80005000)"
+     $members = @($objGroup.PSBase.Invoke <<<< ("Members"))
+ CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
+ FullyQualifiedErrorId : DotNetMethodException 
```

编辑： /add 出现的错误消息是

```
The following exception occurred while retrieving member "Add": "Unknown error (0x80005000)" 
```

代码是：

```
function addUser2Group([string]$user,[string]$group)
{
    $cname = gc env:computername
    try
    {
        ([adsi]"WinNT://$cname/$group,group").Add("WinNT://$cname/$user,user")
    }
    catch
    {
        write2log($_)
        return $false
    }

    return $true
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-10T16:15:42.853

当 PowerShell 为您完成时，为什么还要经历反思的痛苦？例子：

```
$group = [ADSI]"WinNT://./Power Users,group"
$group.Add("WinNT://SYSTEM,user") 
```

以上将 SYSTEM 本地帐户添加到本地 Power Users 组。我不确定您为什么会收到上面的特定错误，您也可以使用这种缩写语法得到它。正在使用的特定 COM 接口是 IADsGroup - 在此处参考：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa706021.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa706021.aspx)

注意：因为您实际上是在使用包装在 .NET 对象中的 COM 对象，所以最好在`Dispose`使用完它们后创建的任何 ADSI 对象上调用该方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T12:20:35.000

你为什么不在你`net localgroup /add`的脚本中使用那些看起来很讨厌的 WMI 呢？PowerShell 是一个外壳，而不是一个操作系统 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-01T16:42:18.577

**观察和假设**

有几个基于代码的假设。

1.  您只传递了一个具有两个值的参数对象。使用[参数](http://technet.microsoft.com/en-us/magazine/jj554301.aspx)语句
2.  以不同方式调用函数***addUser2Group -user 'MyGlobalMonitoringUser' -group "SomeDBGroup"***
3.  验证传递的参数。至少应该检查它们是否为空/空。
4.  仅当您在脚本运行之前为 $group 变量分配了一个值时，这才有效。

基于传递 $group 变量值的错误参数仍然为空的事实。然后它导致其余代码失败，总是返回 $False 的值。

* * *

**建议的解决方案**

推荐阅读： [使用参数验证简化您的 PowerShell 脚本](http://blogs.technet.com/b/heyscriptingguy/archive/2011/05/15/simplify-your-powershell-script-with-parameter-validation.aspx)

在函数中包含参数“开关” 更改调用函数的方式。

这是有效的代码副本。

```
function addUser2Group
{   
    # Added the Param Switch 
    Param(
        [string]$user,
        [string]$group
    )

    $cname = gc env:computername
    $objUser = [ADSI]("WinNT://$user")
    $objGroup = [ADSI]("WinNT://$cname/$group,group")
    #$members = $objGroup.Invoke('Members')
    $found = $false

    foreach($m in $members)
    {
        if($m.GetType().InvokeMember('Name', 'GetProperty', $null, $m, $null) -eq $user)
        {
            $found = $true
        }
    }

    if(-not $found)
    {
        $objGroup.PSBase.Invoke('Add',$objUser.PSBase.Path)
    }

    $members = $objGroup.PSBase.Invoke('Members')
    $found = $false
    foreach($m in $members)
    {
        if($m.GetType().InvokeMember('Name', 'GetProperty', $null, $m, $null) -eq $user)
        {
            $found = $true
        }
    }

    return $found
}

addUser2Group -user 'testing' -group "Administrators" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T15:33:31.347

> •0x80005000（“指定的目录服务属性或值不存在”）。

也许是参数绑定或环境罪魁祸首？

至于 net localgroup 的问题：仔细检查错误信息：

> 检索成员“添加”时发生以下异常

显然，该`/add`标志未正确设置，因为它被解释为成员名称，但由于未提供代码，因此无法说明原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-16T10:35:54.250

大约五年后添加一个更新的方法：

```
$group = Get-LocalGroup SomeDBGroup
$user = Get-LocalUser MyGlobalMonitoringUser
Add-LocalGroupMember $group $user 
```

# php - Facebook API：登录，但仍然无法正常工作

> ID：13929961
> 
> 赞同：1
> 
> 时间：2012-12-18T09:34:08.963
> 
> 标签：php, facebook, api

我正在使用用 PHP 编写的 Facebook API 连接脚本（由 Facebook 提供）。一切正常，它会生成登录 URL，并在我登录时将我重定向回网站。

但是， $user 变量似乎未定义。

有没有人遇到过类似的问题？在 Facebook 应用程序统计页面中，我可以看到该应用程序已被使用。

更新 - 代码：

```
<?php

$app_id     = "xxxxxxxxxxxxxx";
$app_secret = "xxxxxxxxxxxxx";
$site_url   = "http://xxx";

try{
    include_once "src/facebook.php";
}catch(Exception $e){
    error_log($e);
}

$facebook = new Facebook(array(
    'appId'     => $app_id,
    'secret'    => $app_secret
    ));

 if($user = $facebook->getUser())
 {
     echo 'ok';
 }
 else
 {
 }

if($user){
//==================== Single query method ======================================
    try{
        // Proceed knowing you have a logged in user who's authenticated.
        $user_profile = $facebook->api('/me');
    }catch(FacebookApiException $e){
        error_log($e);
        $user = NULL;
    }
//==================== Single query method ends =================================
}

if($user){
    // Get logout URL
    $logoutUrl = $facebook->getLogoutUrl();
}else{
    // Get login URL
    $loginUrl = $facebook->getLoginUrl(array(
        'scope'     => 'email,user_birthday,user_about_me',
        'redirect_uri'  => $site_url . '/auth_complete.php',
        ));
}

if($user){
    // Proceed knowing you have a logged in user who has a valid session.

//========= Batch requests over the Facebook Graph API using the PHP-SDK ========
    // Save your method calls into an array
    $queries = array(
        array('method' => 'GET', 'relative_url' => '/'.$user),
        array('method' => 'GET', 'relative_url' => '/'.$user.'/home?limit=50'),
        array('method' => 'GET', 'relative_url' => '/'.$user.'/friends'),
        array('method' => 'GET', 'relative_url' => '/'.$user.'/photos?limit=6'),
        );

    // POST your queries to the batch endpoint on the graph.
    try{
        $batchResponse = $facebook->api('?batch='.json_encode($queries), 'POST');
    }catch(Exception $o){
        error_log($o);
    }

    //Return values are indexed in order of the original array, content is in ['body'] as a JSON
    //string. Decode for use as a PHP array.
    $user_info      = json_decode($batchResponse[0]['body'], TRUE);
    $feed           = json_decode($batchResponse[1]['body'], TRUE);
    $friends_list       = json_decode($batchResponse[2]['body'], TRUE);
    $photos         = json_decode($batchResponse[3]['body'], TRUE);
//========= Batch requests over the Facebook Graph API using the PHP-SDK ends =====

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:14:53.663

我不完全确定它为什么会起作用，但我将用户重定向到包含 Javascript SDK 的页面 (http://developers.facebook.com/docs/reference/javascript/)，现在它可以正常工作了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:44:09.090

用户尚未授权该应用程序。试试这样的 -

```
$user_id = $facebook->getUser();
echo $uid;

if($user_id){
  try {
    $user_profile = $facebook->api('/me');

  } catch (FacebookApiException $e) {
    error_log($e);
    $user_id = null;
  }
}else{
    $login_url = $facebook->getLoginUrl();
    echo("<br>login url=".$login_url);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T23:53:36.940

我们之前工作了几个月的 FB 应用程序现在遇到了您所说的问题。$fb_user 现在返回未定义。=(

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T15:33:27.700

更新您的 SDK，听起来您在几周前遇到了证书问题。

[您可以在https://github.com/facebook/facebook-php-sdk/](https://github.com/facebook/facebook-php-sdk/)找到最新版本

# meteor - 与 Meteor 的仅客户端反应？

> ID：13929962
> 
> 赞同：9
> 
> 时间：2012-12-18T09:34:10.880
> 
> 标签：meteor

我在服务器上发布了一个集合并在客户端上自动订阅。我想在会话中设置“选定”项目并让模板更新以仅显示选定项目，但似乎这只能通过往返服务器来完成（这完全没有必要）。

常见的：

```
var Missions = new Meteor.Collection('missions'); 
```

客户：

```
Template.missionList.missions = function() {
    var currMission = Session.get('selectedMission');
    var searchMission = {};
    if(currMission)
    {
        searchMission['_id'] = currMission;
    }
    return Missions.find(searchMission);
};
Template.missionList.events({
    'click div.mission': function (e, t) {
        Session.set('selectedMission', 
            this._id == Session.get('selectedMission') ? null : this._id
        );
    }
});
Template.mission.isSelected = function() {
    return this._id == Session.get('selectedMission');
};
Meteor.autosubscribe(function () {
    Meteor.subscribe("missions");
}); 
```

服务器：

```
Meteor.publish('missions', function() {
    // there are really some filters here, but removed for simplicity
    return Missions.find(); 
}); 
```

模板：

```
<template name="missionList">
    <div class="missionList">
    {{#each missions}}
        {{> mission}}
    {{/each}}
    </div>
</template>

<template name="mission">
    <div class="mission{{#if isSelected}} selected{{/if}}">details</div>
</template> 
```

我的要求是`Missions.find()`过滤`Template.missionList.missions`客户端缓存的结果，而不是从服务器重新请求，但我似乎无法找到一个标志或设置来让我告诉 minimongo 只使用当前可用的数据.

我也不完全确定这是否是我应该做的，我一开始只是使用 jQuery 来隐藏未选择的任务，但让我的头脑围绕着 Meteor，使用数据和反应性来驱动选择似乎很自然/本地过滤。

有什么办法可以避免往返还是我只是用错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T09:30:41.857

通过设置发布/订阅关系，您正在创建一种简化的数据库复制形式。Minimongo 将在本地拥有数据的副本并在本地执行 find() ，而无需服务器往返。如果您看到网络活动或对服务器代码的调用，那是因为流星定期在幕后工作以保持订阅与服务器同步，而不是为了您的特定发现。

这也意味着您必须警惕向客户端发送过多数据，因此您的服务器端发布功能可能希望通过客户端所需的特定字段进行过滤，除了现有的选择标准。

# python - 在 https 上的 Python 网页抓取和对话框登录

> ID：13929968
> 
> 赞同：0
> 
> 时间：2012-12-18T09:34:38.843
> 
> 标签：python, asp.net, login, https, dialog

您好最近进行了开发移动网站的项目，并决定使用网络抓取来使用大学网站的数据，但我遇到了一个问题。

关于服务器的信息：它正在运行 asp.net，适用于所有用户代理，当您转到 www.example.com/login/ 时，它会弹出一个登录对话框。

我正在使用 python 来编写这个应用程序，因为无论如何我都尝试过使用 urlib 技术跨平台，即使我添加了密码和用户名，我也会得到 401 未经授权，我会在我回家时发布代码。

我有一个带有 cookie jar 的 mechanizm 浏览器设置，但仍然没有运气给我 401， [https://studentportal.burycollege.ac.uk/homeportal/default.aspx](https://studentportal.burycollege.ac.uk/homeportal/default.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:58:00.250

您可以使用 requests [http://docs.python-requests.org/en/v1.0.0/](http://docs.python-requests.org/en/v1.0.0/)，是 urllib 和 urllib2 模块的高级抽象，非常易于使用。我在我的项目中使用。

# git - 确定 Git 工作流程

> ID：13929970
> 
> 赞同：1
> 
> 时间：2012-12-18T09:34:41.880
> 
> 标签：git

我是一名生物信息学家，我是唯一一个从事我的项目的人。而且我所有的代码/脚本都必须存储在集群节点可访问的存储空间中（我可以通过 SFTP 连接到这些节点并通过 SMB 挂载）。我有兴趣建立一个 git 存储库，主要用于：

```
a) keep track of changes
b) cloning repositories to work locally and push later to origin/remote repo 
```

我想使用[sourceTree](http://www.sourcetreeapp.com/)来管理我的存储库。我可以想到两种方法来建立这个：

1）使用SMB挂载和访问存储空间。这允许我在下面设置一个`bare remote repository`，比如说，`$HOME/Git`我可以将这个空存储库克隆到我的实际工作文件夹中，比如说，`$HOME/projects`使用 sourceTree。我想它就像在本地工作（一旦你安装了远程存储空间）。现在我可以添加文件、提交和推送到原点（在 $HOME/Git 中）。然后来自工作和家庭的主要工作流程将是在`$HOME/projects`文件夹下的克隆存储库上工作。如果我知道我会离线一段时间并想继续工作，那么我可以在此期间克隆到我的笔记本电脑并在本地工作，然后再推送。

2）直接在.git下建立一个`non-bare`git仓库`$HOME/projects`。现在，在我的工作和家庭计算机上使用 SSH 方法创建一个本地存储库，并记住每次推送。[如本文所述](https://stackoverflow.com/questions/2816369/git-push-error-remote-rejected-master-master-branch-is-currently-checked)，我将不得不`git push error '[remote rejected] master -> master (branch is currently checked out)'`通过签出远程存储库创建另一个分支并从本地存储库推送到 master 来解决问题。

你有更好的选择吗？（或）你会推荐哪一个？

非常感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T09:52:37.270

不要推送到非裸存储库——你是在自找麻烦。设置一个中央存储库，您可以从您推送和拉取的任何地方访问该存储库。所以：使用第一种方法。

如果您是 git 初学者，我强烈建议您使用命令行客户端。这样你就可以正确地了解正在发生的事情并理解 git。

# javascript - 使用jQuery在屏幕上的元素的绝对位置

> ID：13929972
> 
> 赞同：25
> 
> 时间：2012-12-18T09:34:46.613
> 
> 标签：javascript, jquery, html, css

如何使用 jQuery 找出元素在当前可见屏幕（视口）上的绝对位置？

我有`position:relative`，所以 offset() 只会给出父级内的偏移量。

我有分层 div，所以`$("#me").parent().offset() + $("#me").offset()`也无济于事。

我需要窗口中的位置，而不是文档，所以当文档滚动时，值应该会改变。

我知道我可以将所有父偏移量相加，但我想要一个更清洁的解决方案。

```
var top = $("#map").offset().top + 
    $("#map").parent().offset().top + 
    $("#map").parent().parent().offset().top +
    $("#map").parent().parent().parent().offset().top; 
```

有任何想法吗？

**更新：** 我需要获取我的 div 顶部和文档顶部之间的确切像素间隙，包括填充/边距/偏移量？

我的代码：

**HTML**

```
<div id="map_frame" class="frame" hidden="hidden">
    <div id="map_wrapper">
        <div id="map"></div>
    </div>
</div> 
```

**CSS**

```
#map_frame{
    border:1px solid #800008;
}

#map_wrapper {
    position:relative;
    left:2%;
    top:1%;
    width:95%;
    max-height:80%;
    display:block;
}

#map {
    position:relative;
    height:100%;
    width:100%;
    display:block;
    border:3px solid #fff;
} 
```

**jQuery 调整地图大小以填充屏幕***

```
var t = $("#map").offset().top + 
    $("#map").parent().offset().top + 
    $("#map").parent().parent().offset().top + 
    $("#map").parent().parent().parent().offset().top;

$("#map").height($(window).height() - t - ($(window).height() * 8 / 100)); 
```

谢谢...

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-12-18T09:39:58.607

请参阅[jQuery 文档](http://api.jquery.com/offset/)`.offset()`中的此处。它给出了相对于文档的位置，而不是父级。你也许已经和困惑了。如果您想要窗口中的位置而不是文档中的位置，您可以减去和值来说明滚动位置。`.offset()``.position()``.scrollTop()``.scrollLeft()`

这是文档的摘录：

> .offset() 方法允许我们检索元素相对于文档的当前位置。将此与 .position() 进行对比，后者检索相对于偏移父级的当前位置。当将新元素放置在现有元素之上以进行全局操作（特别是用于实现拖放）时，.offset() 更有用。

结合这些：

```
var offset = $("selector").offset();
var posY = offset.top - $(window).scrollTop();
var posX = offset.left - $(window).scrollLeft(); 
```

你可以在这里试试（滚动查看数字变化）：http: [//jsfiddle.net/jfriend00/hxRPQ/](http://jsfiddle.net/jfriend00/hxRPQ/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-20T17:13:06.940

对于我编写此函数的任何 jquery 元素的绝对坐标，它可能不适用于所有 css 位置类型，但对于某人来说可能是一个好的开始..

```
function AbsoluteCoordinates($element) {
    var sTop = $(window).scrollTop();
    var sLeft = $(window).scrollLeft();
    var w = $element.width();
    var h = $element.height();
    var offset = $element.offset(); 
    var $p = $element;
    while(typeof $p == 'object') {
        var pOffset = $p.parent().offset();
        if(typeof pOffset == 'undefined') break;
        offset.left = offset.left + (pOffset.left);
        offset.top = offset.top + (pOffset.top);
        $p = $p.parent();
    }

    var pos = {
          left: offset.left + sLeft,
          right: offset.left + w + sLeft,
          top:  offset.top + sTop,
          bottom: offset.top + h + sTop,
    }
    pos.tl = { x: pos.left, y: pos.top };
    pos.tr = { x: pos.right, y: pos.top };
    pos.bl = { x: pos.left, y: pos.bottom };
    pos.br = { x: pos.right, y: pos.bottom };
    //console.log( 'left: ' + pos.left + ' - right: ' + pos.right +' - top: ' + pos.top +' - bottom: ' + pos.bottom  );
    return pos;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-05-07T06:32:19.893

顺便说一句，如果有人想在没有 jQuery 的情况下获取屏幕上元素的坐标，请试试这个：

```
function getOffsetTop (el) {
    if (el.offsetParent) return el.offsetTop + getOffsetTop(el.offsetParent)
    return el.offsetTop || 0
}
function getOffsetLeft (el) {
    if (el.offsetParent) return el.offsetLeft + getOffsetLeft(el.offsetParent)
    return el.offsetleft || 0
}
function coordinates(el) {
    var y1 = getOffsetTop(el) - window.scrollY;
    var x1 = getOffsetLeft(el) - window.scrollX; 
    var y2 = y1 + el.offsetHeight;
    var x2 = x1 + el.offsetWidth;
    return {
        x1: x1, x2: x2, y1: y1, y2: y2
    }
} 
```

# actionscript-3 - enterFrame 函数中的 timerEvent？

> ID：13929973
> 
> 赞同：0
> 
> 时间：2012-12-18T09:34:54.383
> 
> 标签：actionscript-3, timer

我正在从 enterFrame 调用 timerEvent 函数，它在 everyFrame 上运行 timerEvent 函数。有没有办法控制它？

我的子弹射击功能的 timerEvent 为 500，所以它以 24fps 的速度每半秒发射一次子弹。它现在工作正常。现在我想改变武器的子弹速度和皮肤。

```
////////////////////////////////
//this function is called first time within an EnterFrame function
///////////////////////////////

function weaponCheck():void
{
switch (weaponState)
{
    case STATE_GUN :
        gun();
        break;
    case STATE_DOUBLE_GUN :
        doubleGun();
        break;
    }
}

function gun():void
{
trace("single gun");
laserTimer = new Timer(600);
laserTimer.addEventListener(TimerEvent.TIMER, timerListener);
laserTimer.start();
function timerListener(e:TimerEvent):void
{
    var tempLaser:MovieClip = new Laser();
    var tempGunBlast:MovieClip = new Gun_blast_01();
    tempLaser.x = player.x +((player.width/2)+12);
    tempLaser.y = player.y;

    tempGunBlast.x = stage.mouseX + 104;
    tempGunBlast.y = tempLaser.y;
    Lasers.push(tempLaser);
    addChildAt(tempLaser,1);
    addChildAt(tempGunBlast, 3);

    if (tempGunBlast.currentFrame >= tempGunBlast.totalFrames)
    {
        removeChild(tempGunBlast);
    }

    }

}

function doubleGun():void
{
trace("Double gun");
doubleGunTimer = new Timer(400);
doubleGunTimer.addEventListener(TimerEvent.TIMER, timerListener2);
doubleGunTimer.start();
function timerListener2(e:TimerEvent):void
{
    var tempLaser:MovieClip = new doubleG();
    var tempGunBlast:MovieClip = new Gun_blast_01();
    tempLaser.x = player.x +((player.width/2)+12);
    tempLaser.y = player.y;

    tempGunBlast.x = stage.mouseX + 104;
    tempGunBlast.y = tempLaser.y;
    Lasers.push(tempLaser);
    addChildAt(tempLaser,1);
    addChildAt(tempGunBlast, 3);

    if (tempGunBlast.currentFrame >= tempGunBlast.totalFrames)
    {
        removeChild(tempGunBlast);
    }
}
}

///////////////////////////////////////////////////
//Following function is called within an enterFrame event function
/////////////////////////////////////////////////

function playGame():void
{
weaponCheck();
blah1();
blah2();
blah3();
testForEnd();
}

function testForEnd():void
{

if (level == 3)
{
    laserTimer.stop();
    weaponState = STATE_DOUBLE_GUN;
    weaponCheck();
}

} 
```

所以当游戏第一次运行时，它工作正常并使用 600 的计时器事件来击中子弹，但是当 level == 3 并且武器状态发生变化时，第二次射击函数 doubleGun(); 被调用，但它开始在每帧计数上发射子弹，而不是在受控的 timerEvent 上。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:15:07.113

为什么不放弃计时器并使用输入帧侦听器作为一种计算时间的方式？您已经`weaponCheck()`从一个 enterframe 侦听器调用。使实际`gun()`和`doublegun()`调用将只生成动画，例如 firin' mah lazers 和 blasts，而 main 函数将只计算时间。

```
function weaponCheck():void
{
    this.reloading+=this.weaponFiringSpeed; // you alter this to make your weapon fire slower or faster
    if (this.reloading<FULLY_RELOADED) return; // we are not yet ready to fire
    this.reloading=0;
    switch (weaponState) // and here we fire with the gun state
    {
        case STATE_GUN :
            gun();
            break;
        case STATE_DOUBLE_GUN :
            doubleGun();
            break;
    }
}

function gun():void
{
    trace("single gun");
    var tempLaser:MovieClip = new Laser();
    var tempGunBlast:MovieClip = new Gun_blast_01();
    tempLaser.x = player.x +((player.width/2)+12);
    tempLaser.y = player.y;
    tempGunBlast.x = stage.mouseX + 104;
    tempGunBlast.y = tempLaser.y;
    Lasers.push(tempLaser);
    addChildAt(tempLaser,1);
    addChildAt(tempGunBlast, 3);
} 
```

同样是双枪。`FULLY_RELOADED`是一个常数，`reloading`是一个用来跟踪时间的变量，它应该是开火者的一个属性。

注意，这种方法需要你在别处管理你的“tempGunBlast”，也许在`weaponCheck`函数中，如果是这样，修改如下：

```
function weaponCheck():void
{
    if (tempGunBlast) if (tempGunBlast.currentFrame >= tempGunBlast.totalFrames)
        removeChild(tempGunBlast);
    this.reloading+=this.weaponFiringSpeed; // you alter this to make your weapon fire slower or faster
    if (this.reloading<FULLY_RELOADED) return; // we are not yet ready to fire
    ... // rest of code unchanged 
```

您很可能无法复制粘贴实现此功能，但请尝试。

# cell - UICollectionView：手动选择的 Cell 的自定义 UI

> ID：13929974
> 
> 赞同：1
> 
> 时间：2012-12-18T09:35:03.027
> 
> 标签：cell, uicollectionview, appearance, uicollectionviewcell

我从 UICollectionViewCell 覆盖 (BOOL)isSelected {} 以更改选择时的单元格外观。如果我单击一个单元格，这确实可以按预期工作。但是如果我手动设置选择，则永远不会调用 isSelected 方法。有没有优雅的方法来解决这个问题？

我的自定义单元格中的重写方法：

```
 (BOOL)isSelected {
    if ([super isSelected]) {
        self.contentView.alpha = 0.2;
        self.contentView.backgroundColor = [UIColor greenColor];
        return YES;
    } else {
        self.contentView.alpha = 1.0;
        self.contentView.backgroundColor = [UIColor clearColor];
        return NO;
    }
} 
```

我想在我的控制器中手动选择一个单元格，如下所示：

```
[self.collectionView selectItemAtIndexPath:indexPath animated:NO scrollPosition:UICollectionViewScrollPositionNone]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:06:45.467

我的错误是覆盖了方法 isSelected。我需要覆盖 setter 方法 setSelected 一切都按预期工作。

```
- (void)setSelected:(BOOL)selected {
[super setSelected:selected];
if (selected) {
    self.contentView.alpha = 0.2;
    self.contentView.backgroundColor = [UIColor greenColor];
} else {
    self.contentView.alpha = 1.0;
    self.contentView.backgroundColor = [UIColor clearColor];
} 
```

}

# php - 在简码函数中使用回显

> ID：13929976
> 
> 赞同：0
> 
> 时间：2012-12-18T09:35:10.967
> 
> 标签：php, wordpress

我正在使用 Wordpress 插件来显示帖子标签的 Google 新闻提要。

我试图把这个：

```
<?php echo strip_tags(get_the_tag_list('','+','')); ?> 
```

进入此回声的 Google URI 的单引号：

```
<?php echo do_shortcode( '[hungryfeed url="https://news.google.com/news/feeds?q='[[above function here]]'&output=rss" template="1" max_items="1"]' ); ?> 
```

我不是特别精通PHP；任何人都可以建议解决此问题的最佳方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:39:36.703

您需要将第一个代码存储到变量中，然后将变量放入 url。像这样的东西可能会起作用

```
<?php

$tags = strip_tags(get_the_tag_list('','+',''));
echo do_shortcode('[hungryfeed url="https://news.google.com/news/feeds?q='.$tags.'&output=rss" template="1" max_items="1"]');

?> 
```

# ios - 通用应用程序的崩溃报告不适用于 symbolicatecrash

> ID：13929979
> 
> 赞同：1
> 
> 时间：2012-12-18T09:35:20.857
> 
> 标签：ios, symbolicatecrash

[Mike](https://stackoverflow.com/questions/12619124/how-to-support-both-armv6-and-armv7s-for-release-build-in-xcode-4-5)的以下解决方案是使用 ARMV6、ARMV7 和 ARMV7s 创建通用应用程序的好方法。

但是，无论我是使用 Release_armv6-iphoneos 还是 release-iphoneos 中的 dSYM，崩溃报告都不适用于 symbolicatecrash。我已经尝试了 4.5 和 4.3 的 symbolicatecrash。有没有人找到一种方法来让它工作？

# sql - SQL Inner join 无法从上一个日期获取更改

> ID：13929980
> 
> 赞同：4
> 
> 时间：2012-12-18T09:35:21.153
> 
> 标签：sql, sql-server, sql-server-2008

我有一张包含以下数据的表格：

```
TradeDate   Stock   BuySell   DayClose
--------------------------------------
10-Dec-12   ABC        1         11
10-Dec-12   ABC        2         12
11-Dec-12   ABC        1         11.5
11-Dec-12   ABC        2         12.5
11-Dec-12   DEF        1         15
11-Dec-12   DEF        2         16 
```

我想查询它的特定日期 11-Dec-2012 以获得以下输出：

```
Stock   Buy     Sell    Mid     Change
--------------------------------------
 ABC    11.5    12.5    12.0    0.5
 DEF    15      16      15.5 
```

由于 DEF 没有前一个日期的数据，因此 change 应该是空白的。

我创建了以下查询：

```
Select Stock, 
AVG(CASE BuySell WHEN 1 THEN DayClose END) AS 'Buy', 
AVG(CASE BuySell WHEN 2 THEN DayClose END) As 'Sell', 
Sum(DayClose/2) as 'Mid', 
Sum(Change/2) AS Change

FROM (
select t1.Stock, t1.BuySell, t1.DayClose, Sum(t1.DayClose - t2.DayClose) as Change 

FROM #myTable as t1 inner join #myTable as t2 on 
t1.Stock = t2.Stock

where 
t1.TradeDate = '2012-12-11'  AND 
t2.TradeDate = (SELECT TOP 1 TradeDate FROM #myTable WHERE TradeDate < '2012-12-11' ORDER BY TradeDate DESC)  

GROUP BY 
t1.Stock, t1.buysell, t1.dayclose ) AS P1 GROUP BY stock 
```

我为此目的创建了一个临时表#mytable：

```
drop table #mytable
CREATE TABLE #myTable 
(
    TradeDate datetime,
    stock varchar(20),
    buysell int, 
    dayclose  decimal(10,2)
)
insert into #mytable values ('10-dec-2012', 'abc' , 1, 11)
insert into #mytable values ('10-dec-2012', 'abc' , 2, 12)
insert into #mytable values ('11-dec-2012', 'abc' , 1, 11.5)
insert into #mytable values ('11-dec-2012', 'abc' , 2, 12.5)
insert into #mytable values ('11-dec-2012', 'def' , 1, 15)
insert into #mytable values ('11-dec-2012', 'def' , 2, 16) 
```

但我无法获得所需的输出，而是获得

```
Stock         Buy         Sell      Mid     Change
--------------------------------------------------------------
abc           11.500000 12.500000   12.00000    1.00 
```

有人可以告诉我哪里出错了。我好像迷路了。

谢谢，莫妮卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:40:40.817

```
Select Stock, 
AVG(CASE BuySell WHEN 1 THEN DayClose END) AS 'Buy', 
AVG(CASE BuySell WHEN 2 THEN DayClose END) As 'Sell', 
Sum(DayClose/2) as 'Mid', 
Sum(Change/2) AS Change

FROM (
select t1.Stock, t1.BuySell, t1.DayClose, Sum( t1.DayClose - t2.DayClose ) as Change 
FROM #myTable as t1 left join #myTable as t2 on t2.TradeDate = (SELECT TOP 1 TradeDate FROM #myTable WHERE TradeDate < t1.TradeDate ORDER BY TradeDate DESC)   
and t1.Stock = t2.Stock and t1.buysell=t2.buysell 

where 
t1.TradeDate = '11-12-2012' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T10:06:29.143

试试这个：

```
SELECT   a.TradeDate
        ,a.stock
        ,SUM(CASE WHEN a.BuySell = 1 THEN a.DayClose ELSE 0 END) Buy
        ,SUM(CASE WHEN a.BuySell = 2 THEN a.DayClose ELSE 0 END) Sell
        ,SUM(a.DayClose) / 2 AS Mid
INTO    #temp
FROM    #mytable a
GROUP   BY a.TradeDate, a.stock

SELECT  t.*,
        t.Mid - previousRecord.Mid AS Change
FROM    #temp t
LEFT JOIN   
        #temp previousRecord ON 
        previousRecord.TradeDate = DATEADD(DAY, -1, t.TradeDate)
AND     previousRecord.stock = t.stock

DROP TABLE #temp 
```

您现在所要做的就是选择日期的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T11:14:34.553

请试试：

```
;WITH T1 as(
SELECT   a.TradeDate
        ,a.stock
        ,SUM(CASE WHEN a.BuySell = 1 THEN a.DayClose ELSE 0 END) Buy
        ,SUM(CASE WHEN a.BuySell = 2 THEN a.DayClose ELSE 0 END) Sell
        ,SUM(a.DayClose) / 2 AS Mid
FROM    #mytable a
GROUP   BY a.TradeDate, a.stock
)SELECT  t.*,
        t.Mid - PR.Mid AS Change
FROM    T1 t
LEFT JOIN   
        T1 PR ON 
        PR.TradeDate = DATEADD(DAY, -1, t.TradeDate)
AND     PR.stock = t.stock 
```

# asp.net - Fieldset 标签在我的 asp.net 网站中不起作用？

> ID：13929982
> 
> 赞同：1
> 
> 时间：2012-12-18T09:35:28.230
> 
> 标签：asp.net, html, fieldset, groupbox

我在我的 asp.net 网站上有一个字段集，可以让 groupbox 看起来很像.. 但它不会出现。这就是我正在做的事情：

```
<fieldset id="fl1" runat="server">
     <legend>My Group</legend>
</fieldset> 
```

![无法正常工作的页面的屏幕截图](../Images/cbef7cac75c7fb2f8a6d502680b78b74.png)

只是`My Group`来了边界没有来......我也用过`panel`但同样的问题......

我正在使用`ajax toolkit`并`update panel`在此页面中...

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T09:48:25.743

字段集是可见的，只是边框不可见。因此，您大概有一个正在删除边框的样式表。

编辑样式表，使其不首先删除边框，或者显式添加一个边框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T09:44:08.833

您在字段集中没有任何内容，因此它不能在任何内容周围设置边框。

```
<fieldset id="fl1" runat="server">
    <legend>My Group</legend>
    <!-- Put anything you want to be in the fieldset here. -->
</fieldset> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-01T08:07:30.450

Asp.net 核心页面似乎不支持所有类型的字段集元素。它支持但现在在浏览器中可见。

您可以使用，像这样的字段集，支持实体参考。

```
 <fieldset style="border:0.5px solid"> 
```

=>>代码在这里

# bash - bash 文件模式和区分大小写的范围

> ID：13929984
> 
> 赞同：3
> 
> 时间：2012-12-18T09:35:43.913
> 
> 标签：bash, shell

我在 bash 的文件模式中遇到了以下恕我直言的奇怪行为：

```
$ ls
Basic1  datei1  datie2  sdfl
$ ls [a-z]*
Basic1  datei1  datie2  sdfl
$ ls [abcdefghijklmnopqrstuvwxyz]*
datei1  datie2  sdfl 
```

为什么范围的模式`[a-z]`不区分大小写？错误或功能？

**注意**：

1.  bash-Option`nocaseglob`是`off`（否则，上面给出的第二个模式也应该不区分大小写......）：

    ```
    $ shopt nocaseglob
    nocaseglob  off 
    ```

2.  我的 bash 版本：

    ```
    $ bash --version
    GNU bash, Version 4.2.24(1)-release (i686-pc-linux-gnu) 
    ```

GNU bash，版本 4.2.24(1)-release (i686-pc-linux-gnu)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T10:59:53.637

如果您只想要以小写开头的文件名，请使用

```
ls [[:lower:]]* 
```

## 编辑

回答 F. Hauri 的评论：[参考手册的第 3.5.8.1 节说明](http://www.gnu.org/software/bash/manual/bashref.html#Pattern-Matching)了一切。但在我们阅读之前，让我们玩一点（YMMV）：创建一个新的暂存目录并

```
$ # Create lots of cool files
$ touch {a..z} {A..Z}
$ ls
a  b  c  d  e  f  g  h  i  j  k  l  m  n  o  p  q  r  s  t  u  v  w  x  y  z
A  B  C  D  E  F  G  H  I  J  K  L  M  N  O  P  Q  R  S  T  U  V  W  X  Y  Z
$ ls [a-b]
a A b
$ # Do you get it?
$ ls [a-B]
a A b B 
```

所以*看起来*bash 的字母顺序（在这里，在我的机器上，使用我的设置）是：

```
aAbBcCdDeE... 
```

这可以解释为什么你得到你的结果（看起来你的设置和我的很相似）。

现在，去阅读[参考手册的第 3.5.8.1 节](http://www.gnu.org/software/bash/manual/bashref.html#Pattern-Matching)，你就会明白事情并没有那么简单，排序取决于环境变量的值`LC_COLLATE`。

所以试试：

```
$ LC_COLLATE=C
$ ls [a-b]
a b 
```

是的！

## 道德

如果您想要小写字母，请不要使用`[a-z]`，因为这在很大程度上取决于本地设置。相反，使用`[[:lower:]]`. 在参考手册中，您还可以找到其他几个有用的字符类。

## 底线

那么，*错误还是功能*？你现在有了答案`;-)`

希望这可以帮助！

# c# - 在 ASP.NET 中使用数据访问层时如何使用带有输出参数的存储过程

> ID：13929986
> 
> 赞同：0
> 
> 时间：2012-12-18T09:35:47.303
> 
> 标签：c#, asp.net, sql, stored-procedures, data-access-layer

我在 SQL Server 2008 中有一个存储过程，我在我的 ASP.NET 应用程序中使用它。我使用数据访问层并为我的存储过程创建了一个函数导入。

但是存储过程有输出参数，现在怎么用呢？

**存储过程**

```
ALTER PROCEDURE [dbo].[SPShowLeaveDetails]
(
@LID INT ,
@leave_details VARBINARY(MAX) OUTPUT
)
AS
BEGIN
SELECT @leave_details= leave_details from LeaveTable where LID = @LID
return @leave_details
END 
```

使用**函数**的代码：

```
LeaveClass obj = new LeaveClass();
bytes[] b;
b= obj.Function_ShowLeaveDetails(1); 
```

它显示**错误**-

> 函数重载为 Function_ShowLeaveDetails(int,System.Data.Objects)

另外，这个不起作用：

```
LeaveClass obj = new LeaveClass();
    bytes[] b;
    obj.Function_ShowLeaveDetails(1,b); 
```

如何检索输出参数的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:39:25.327

抱歉，您使用的是 EF 吗？喜欢[这里](https://stackoverflow.com/questions/6192991/output-parameter-in-stored-procedure-in-ef)

您还可以在该[博客上找到详细信息](http://blogs.microsoft.co.il/blogs/gilf/archive/2010/05/09/how-to-retrieve-stored-procedure-output-parameters-in-entity-framework.aspx)

# jquery - 当模式为真时，浏览按钮在 JQuery 对话框中不起作用

> ID：13929988
> 
> 赞同：5
> 
> 时间：2012-12-18T09:35:49.093
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui-dialog, uploadify

我在我的 MVC3 应用程序中使用 uploadify fileupload 控件。

我正在尝试将文件上传浏览按钮放在 jQuery 对话框中。

当我使用 jQuery 对话框来呈现文件上传的内容时，它在 firefox 中运行良好，但在 Chrome 中却无法运行。

`Browse`我可以在 jQuery 对话框中看到该按钮，但无法单击。

我注意到如果`modal:true`设置为对话框，它就不起作用。如果我注释掉模态它工作正常。

但是我可以看到[这篇](https://stackoverflow.com/questions/10757265/jquery-modal-dialog-doesnt-work-with-modaltrue)文章，但我无法帮助我。仍然有同样的问题

这是我的 HTML：

```
<body>
    <div id="fileupload" style="display:none">
        <div style="clear: none;">
            File to Upload:
            <input type="file" name="file_upload" id="file_upload" style="padding-left: 50px;"/><hr />
        </div>
        <p style="text-align: right;">
            <input type="submit" id="selectimage" value="Ok" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only"/>
            <input type="submit" id="cancelimage" value="Cancel" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" onclick="cancelupload();" />
        </p>
    </div>
    <input type="button" id="btnImg" />
</body> 
```

这是我的javascript：

```
$(function(){
    $("#btnImg").click(function () {
        $("#fileupload").dialog({
            width: '511',
            height: '200',
            modal:true,
            //show: "blind",
            position: [300, 500]
        });
    });
}); 
```

如果我使用

```
$('#fileupload').dialog({ modal: true, autoOpen: false }); 
```

在上述代码之前，单击 btnImg 时我无法获得弹出窗口

任何帮助都将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:37:00.073

来自评论的补充：

Uploadify 自动应用的 z-index 为 1，需要更改。

将此添加到您的 CSS 以解决问题：

```
.swfupload { z-index: 100000 !important; } 
```

原答案：

刚刚在 Chrome 中对此进行了测试，就我的测试而言，问题是您正在使用的 HTML 结构。

jQuery-UI Dialog 将从 DOM 中的任何位置获取一个元素并将其显示为一个对话框，它不需要嵌套在输入元素按钮中。

```
<body>

    <div id="container">

        <input type="button" name="dialogOpen" value="open dialog!" />

    </div>

    <!-- using jquery uis helper classes to hide content is a better way than
         declaring inline styles -->

    <div id="modalWindow" class="ui-helper-hidden" title="Modal window">

        <h1>Example Modal Window</h1>
        <p>...</p>

    </div>

</body> 
```

请注意，模态窗口 html 位于容器外部并隐藏。这可以保证父元素的堆叠顺序对对话框 html 没有影响。

```
$('#container').on('click', 'input[name="dialogOpen"]', function(event) {

    // Using form buttons in some browsers will trigger a form submit
    event.preventDefault();

    $('#modalWindow').dialog({
        width : 500,
        height : 200,
        ...
    });

}); 
```

另外，您甚至不需要 DOM 元素来创建对话框。您可以在 jQuery 或 javascript 中构建对话框，然后在其上调用对话框。

```
// Create the new element, populate with HTML and create dialog
$('<div />', {
    'id' : 'modalWindow',
    'title' : 'New modal window'
})
.html('<h1>New modal</h1><p>Modal text</p>')
.dialog(); 
```

# internet-explorer - 如何使 AngularJS TODO 示例在 IE9 中的工作与在 IE8、Chrome、Firefox 中的工作相同？

> ID：13929994
> 
> 赞同：3
> 
> 时间：2012-12-18T09:36:22.130
> 
> 标签：internet-explorer, angularjs

我确实遵循了**Angular JS TODO 示例**并将我的代码发布在 JSFiddle 上（使用 AngularJS v1.0.3）：http: [//jsfiddle.net/7w689/](http://jsfiddle.net/7w689/)

我无法弄清楚为什么它不能按预期在 IE9 中工作。它可以在 IE8、Chrome 和 Firefox 中运行，但在 IE9 中确实有不同的行为，如下所述。

**在 IE8、Chrome 和 Firefox 中观察到的行为：** 第一次加载页面时，单击 TODO 列表中的任何 TODO 复选框将修改 TODO 项的 CSS 类（.done-true 与 .done-false），并将更新“剩余待办事项”数量.

**IE9 中观察到的行为：** 第一次加载页面时，单击 TODO 列表中的任何 TODO 复选框将不会修改 TODO 项的 CSS 类（.done-true 与 .done-false），并且不会更新“剩余待办事项”编号。只有在列表中的每个项目被选中和取消选中多次后，它才会开始工作。不清楚为什么会发生这种情况以及如何使其在 IE9 中的行为与 IE8 和其他浏览器中的行为相同。

可以通过使用 IE9 中的开发工具并选择浏览器模式：IE9、文档模式：IE9 标准（相对于文档模式：IE8 标准）来重现此行为。

**HTML：**

```
<div ng-app>        
<div ng-controller="TodoCtrl">

    <span>Total number of todos: {{todos.length}}</span><br />
    <span>Remaining todos: {{(todos | filter: {done: false} ).length}}</span><br />

    <ul>
        <li ng-repeat="todo in todos">
            <input type="checkbox" ng-model="todo.done" id="chk{{$index}}"/> 
            <label for="chk{{$index}}" ng-class="{'done-true': todo.done, 'done-false': !todo.done}">
                {{todo.text}} | {{todo.done}}
            </label>
        </li>
    </ul>

    <form>
        <input type="text" ng-model="todoText" 
               size="30" placeholder="add new todo here"/>
        <button ng-click="addTodo()">Add</button>
    </form>

</div>
</div> 
```

**JS：**

```
function TodoCtrl($scope) {

    $scope.todos = [
        { text: 'task 1', done: true },
        { text: 'task 2', done: false }
    ];

    $scope.addTodo = function ()
    {
        $scope.todos.push({ text: $scope.todoText, done: false });
        $scope.todoText = "";
    };

} 
```

**CSS：**

```
.done-true {text-decoration: line-through;  color: grey;}
.done-false {text-decoration: none;  color: red;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T01:53:45.710

出于某种原因，您需要在表单标签中包含绑定元素，否则它们只会在您与它们交互后更新。

[查看更新的 jsfiddle](http://jsfiddle.net/7w689/1/)

```
<form>angular elements here</form> 
```

# html - 使用 :nth-child 和 :not 的 CSS 样式

> ID：13929997
> 
> 赞同：3
> 
> 时间：2012-12-18T09:36:26.577
> 
> 标签：html, css, css-selectors

我有一个`div`要使用 nth-child 选择器设置样式的 s 列表。我还希望能够排除 a`div`如果它有某个类，即：

```
<style>
 .a:not(.b):nth-child(2n) {
    color: hotpink;
 }
</style>

<div class="a"> Test </div>
<div class="a b"> Test </div>
<div class="a"> I should be pink, as i am the 2nd child that doesnt have a "b" class </div>
<div class="a"> Test </div>
<div class="a"> Test </div>
<div class="a"> Test </div>
<div class="a"> Test </div>
<div class="a"> Test </div>
<div class="a"> Test </div> 
```

[http://jsfiddle.net/BF7GY/](http://jsfiddle.net/BF7GY/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T09:57:06.477

我认为最好的方法是使用 jQuery 和两个 filter() 调用，例如：

```
$('.a').filter(function(){
        return !$(this).hasClass('b');
     }).filter(
    function(i){
        return (i+1)%2 == 0; 
    }
).css('color','hotpink'); 
```

:not 和 :nth-child 没有我们想要的那么灵活（不幸的是）