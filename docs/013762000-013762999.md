# StackOverflow 问答 13762000-13762999

# winforms - winform 中的 Web 浏览器控件显示带有参数的 html（谷歌地图）

> ID：13762000
> 
> 赞同：1
> 
> 时间：2012-12-07T11:15:01.227
> 
> 标签：winforms, google-maps-api-3, webbrowser-control

我有一个 winform 客户端，其中包含一个 webbrowser 控件。在 Visual Studio 中使用 C#，并运行 MSSQL 以实现持久性。我的目标是：

> 获取存储在我的 MSSQL 中的数据（通过 DBML/DataContext 处理），并在谷歌地图（Javascript v3）上为我在数据库中获得的每个地址显示一个标记。

现在我的应用解决方案中有一个 HTML 文件，其中包含用于显示这样的 Google 地图的 JS 代码（我们称之为 mymap.html）：

```
var map;
var _geoLocationsArr = [
    ["Tranehavevej 10, 2450", "Fiberby"],
    ["Tranehavevej 8, 2450", "Fiberby"],
    ["Tranehavevej 6, 2450", "Fiberby"],
    ["Tranehavevej 4, 2450", "Fiberby"],
    ["Johan Kellers Vej 27, 2450", "Service"],
    ["Johan Kellers Vej 25, 2450", "Service"],
    ["Johan Kellers Vej 23, 2450", "Service"],
    ["Johan Kellers Vej 21, 2450", "Service"],
    ["Johan Kellers Vej 24, 2450", "Potentiel"]
        ];
        var customIcons = {
            Fiberby: {
                icon: 'http://labs.google.com/ridefinder/images/mm_20_red.png',
                shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png',
                title: 'Fiberby'
            },
            Service: {
                icon: 'http://labs.google.com/ridefinder/images/mm_20_yellow.png',
                shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png',
                title: 'Service'
            },
            Unknown: {
                icon: 'http://labs.google.com/ridefinder/images/mm_20_gray.png',
                shadow: 'http://labs.google.com/ridefinder/images/mm_20_shadow.png',
                title: 'Ukendt'
            }
        };
        var geocoder;

        function initialize(lat, lng) {
            geocoder = new google.maps.Geocoder();
            var myLatlng = new google.maps.LatLng(lat, lng);
            var mapOptions = {
                zoom: 14,
                center: myLatlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            }
            map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
            //geocodeMe();
        }

        function toggle() {
            initialize(55.66718, 12.5411);
            for (var i = 0; i < _locations.length; i++) {
                var item = _locations[i];
                var latlng = new google.maps.LatLng(item[0], item[1]);
                var icon = customIcons[_locations[i][1]] || {};
                var marker = new google.maps.Marker({
                    position: latlng,
                    map: map,
                    icon: icon.icon,
                    shadow: icon.shadow,
                    title: "Hello World! " + i
                });
            }
        }

        function toggleGeocodes() {
            initialize(55.66718, 12.5411);
            for (var i = 0; i < _geoLocationsArr.length; i++) {
                geocodeMe(_geoLocationsArr[i][0], _geoLocationsArr[i][1]);
            }
        }

        function geocodeMe(address, type) {
            geocoder.geocode({
                'address': address
                },
                function(result, status){
                    if(status == google.maps.GeocoderStatus.OK){
                        map.setCenter(result[0].geometry.location);
                        var icon = customIcons[type] || customIcons['Unknown'];
                        var marker = new google.maps.Marker({
                            map: map,
                            icon: icon.icon,
                            shadow: icon.shadow,
                            position: result[0].geometry.location,
                            title: icon.title
                            });
                        } else{
                        alert('Geocode was not successful for the following reason: ' + status);
                    }
            });
        }
    </script>
</head>
<body onload="initialize(55.665919, 12.55482)">
    <div id="map_canvas" style="width: 100%; height: 100%"></div>
</body> 
```

当我在我的 winforms 中点击“地理切换”按钮时，它会在地图上显示 _geoLocationsArr 中每个地理编码地址的标记。一切都很完美。

但！现在，我想用从我的 winform 生成的数据替换 _geoLocationsArr，我的 winform 在其中创建标记数据（xml 或字符串数​​组，对我来说什么格式并不重要，重要的是它可以从winform 到 HTML 页面中的 JS）。

那么，如何在我的 WinForm 中创建数据，以及当单击调用 JS html 页面的按钮时，使用表单创建的数据作为参数？因此，当调用函数 toogleGeocodes() 时，它会将数据作为参数作为函数 toggleGeocodes(_myGeoLocationsArr[]) ，其中 _myGeoLocationsArr[] 是 winform 在调用函数时创建并作为参数发送的内容。

# powershell - 双击启动Powershell脚本时不起作用

> ID：13762002
> 
> 赞同：5
> 
> 时间：2012-12-07T11:15:09.957
> 
> 标签：powershell, command-line, powershell-3.0

执行 powershell 脚本时出现一些奇怪的行为。

*   当我使用 ISE 运行我的脚本时，它工作得很好。
*   当我打开 Powershell.exe 并运行我的脚本时，它工作得很好。
*   当我打开 cmd 并使用 启动我的脚本`powershell.exe -noexit ./myscript.ps1`时，myscript 工作得很好。

但是，当我双击 myscript 时，powershell 会打开几毫秒，我看到它显示一些错误（红色字体）并且 powershell 窗口关闭。由于 powershell 窗口关闭得很快，我无法找到导致此问题的错误。我什至在我的洞脚本周围尝试了一个大的 try-catch 块，捕获任何一个`[Exception]`并将其写入日志文件。但是：没有生成日志文件（没有调用catch）。

我如何跟踪该问题？什么可能导致麻烦？请注意，我的执行策略设置为不受限制。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T15:18:29.217

在尝试建议之前调用它以查看您当前的设置（如果您想稍后恢复它们）：

```
cmd /c FType Microsoft.PowerShellScript.1 
```

然后调用它（请注意，您将通过它更改“从资源管理器”调用脚本的方式）：

```
cmd /c @"
FType Microsoft.PowerShellScript.1=$PSHOME\powershell.exe -NoExit . "'%1'" %*
"@ 
```

然后双击脚本，它不应该退出，`-NoExit`就可以了。查看您的错误消息并解决问题。但是现在您“从资源管理器”调用的所有脚本都保持其控制台打开。然后，您可以`-NoExit`从上述命令中删除并再次运行它或恢复您的原始设置。

* * *

在 PS v2 中调用脚本的一些细节和一种好方法在[这里](http://nightroman.wordpress.com/2009/11/11/how-to-run-powershell-scripts-from-explorer/)。不幸的是，它在 PS v3[提交的问题](https://connect.microsoft.com/PowerShell/feedback/details/745794/v3-rc-regression-this-command-does-not-exit-powershell-noexit-exit)中被破坏了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T11:30:25.940

默认情况下，出于安全原因，当您双击 .ps1 文件时，操作是：编辑文件，而不是运行文件。
执行您的脚本：右键单击它并选择使用 powershell 运行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-21T05:17:21.130

我也无法通过双击来运行脚本，尽管手动运行它没有问题。我发现问题出在路径上。当我从包含空格的路径运行脚本时，例如：

C:\Users\john doe\Documents\Sample.ps1

scipt 无法运行。将脚本移动到：

C:\Scripts\Sample.ps1

没有空格，解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T16:54:25.873

这很可能是您本地执行策略的问题。

默认情况下，Powershell 配置为不运行未签名的脚本（甚至是本地脚本）。如果您尚未签署脚本，则在 Windows 中更改默认的双击“操作”将无效 - Powershell 将打开，读取执行策略，检查脚本的签名，如果没有发现，将中止并出现错误。

在 Powershell 中：

`Help about_execution_policies`

为您提供所有血淋淋的细节，以及允许未签名脚本运行的方法（在合理范围内 - 您可能不想运行远程脚本，只运行已保存到系统中的脚本）。

编辑：我在您问题的结尾看到您已将执行策略设置为“不受限制”，这应该允许脚本运行。但是，对于遇到执行策略问题的其他人来说，这可能是有用的信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-05T16:58:23.407

如果你会发现错误，你很可能会看到这个

> 无法加载文件。该文件未进行数字签名。该脚本不会在系统上执行。有关更多详细信息，请参阅“获取关于签名的帮助”。

因为您可以从您自己启动的 shell 中运行它，而不是用鼠标右键单击“使用 PowerShell 运行”，所以我敢打赌您拥有 x64 系统。手动启动配置执行策略的一个版本的 PowerShell，同时右键单击启动另一个版本的 PowerShell。

尝试同时启动 x64 和 x86 版本并检查每个版本中的安全策略

```
Get-ExecutionPolicy 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-27T17:00:31.537

我处于与问题中描述的完全相同的情况：我的脚本在任何地方都可以工作，除了双击时。*当我双击时，powershell 窗口会打开，但它会在一秒钟左右后关闭。我的执行策略也设置为无限制。

我尝试了选择的答案，`FType Microsoft.PowerShellScript.1`但它没有改变任何东西。

我找到的唯一解决方案是解决方法：创建一个启动 powershell 的 bat 文件。

1.  创建一个文件，复制它并修改路径： `powershell.exe -File "C:\Users\user\script\myscript.ps1"`
2.  将其另存为`.bat`
3.  双击蝙蝠

    *   我也曾经`.ahk`用快捷方式启动我的powershell，直接指向powershell时它不起作用。我不得不指出`.bat`

# c# - NHibernate.Envers：由 NHibernate 核心 xml 配置

> ID：13762003
> 
> 赞同：0
> 
> 时间：2012-12-07T11:15:16.590
> 
> 标签：c#, nhibernate

我的目标是通过配置文件配置 NHibernate.Envers。据我了解的文档，它应该很容易通过在 NHibernate Core xml 文件中添加一个属性条目来实现。

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-configuration  xmlns="urn:nhibernate-configuration-2.2" >
  <session-factory name="NHibernate.Test">
    ....
    <property name="nhibernate.envers.audit_table_suffix">_history</property>
  </session-factory>
</hibernate-configuration> 
```

但这会导致异常：

> “名称”属性无效 - 根据其数据类型“字符串”，值“nhibernate.envers.audit_table_suffix”无效 - 枚举约束失败。

我确实理解异常，NHibernate 核心检查 name 属性中的有效内容。如何设置 NHibernate.Envers 属性？

当我通过代码设置它时，相同的属性有效：

```
 cfg = new Configuration();
        cfg.Configure("NHibernate.cfg.xml");

        // NHibernate.Envers Configuration
        cfg.SetProperty("nhibernate.envers.audit_table_suffix", "_history"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:42:01.857

不幸的是，文档是错误的。您不能将它放在您的 NH Core 配置中，因为 NH Core 将对您的 xml 进行模式验证（并且不知道 envers 属性）。

我将很快更新 Envers 文档。

# .net - 用于模态对话框的 WPF 表单和 Windows 消息传递

> ID：13762014
> 
> 赞同：0
> 
> 时间：2012-12-07T11:16:01.907
> 
> 标签：.net, wpf, winforms, window-messages, message-loop

我有一个带有文本框和按钮的简单 WPF 表单，在失去焦点时它只是简单地显示一个消息框。我的代码看起来像这样

```
 private void TextBox_LostFocus(object sender, RoutedEventArgs e)
    {
        Debug.WriteLine("Lost Focus 1");
        Dispatcher.BeginInvoke(new Action(() =>
               {
                   //Uncomment below lines to get button click
                   //Thread.Sleep(100);
                   //System.Windows.Forms.Application.DoEvents();
                   MessageBox.Show("Lost focus");
               }
            ));
    }
    private void Button_Click(object sender, RoutedEventArgs e)
    {
        Debug.WriteLine("Button_Click");
    } 
```

如果我的文本框有焦点并且当我单击按钮时，如果显示消息框，则不会触发按钮单击，但是如果我在显示消息框之前调用 Application.DoEvents()，则我的按钮单击会被触发。

我的实际应用程序要复杂一些，但我试图用一个简单的文本框和一个按钮来模拟这种行为。在实际应用程序中，我的后台工作线程之一在调度程序上发布以显示模式消息框（甚至 WPF 表单），并且队列中的任何 UI 挂起消息似乎都由消息框（我怀疑）处理，例如，如果我单击画布控件理想情况下，我会得到“ *Mouse Down* ”和“ *Mouse Up* ”，但是如果在这 2 条消息之间出现**模态**消息框，那么我只会得到“ *Mouse Down* ”和“ *Mouse Up* ”消息丢失。

**注意：**在非模态对话框的情况下，我看不到这种行为。

另外，如果有人可以指出我的知识，关于 Windows 窗体如何在模态对话框和非模态对话框的情况下处理 Windows 消息泵的好文章会很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:33:44.710

您可以使用方法的`DispatcherPriority`参数为Dispatcher 操作设置所需的优先级`BeginInvoke()`。我通常使用的最低优先级是`ApplicationIdle`，因此允许 Dispatcher 在处理您的操作之前完成其所有待处理操作的处理。

```
Dispatcher.BeginInvoke(new Action(() =>
{
   MessageBox.Show("Lost focus");
}), DispatcherPriority.ApplicationIdle); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-25T17:55:40.493

文本控件在单击按钮之前失去焦点（可能在它甚至获得鼠标按下消息之前，不确定），导致显示 MessageBox。此调用的 MessageBox 是模态的，并在按钮获取使按钮“单击”的按钮向上消息之前禁用按钮。

模态对话框有自己的消息循环，因此它们不必立即从 ShowDialog 返回，但它们也会禁用它们的调用/所有者/父（我忘了哪个）窗口，直到它们返回。

这不是哪个消息循环正在处理鼠标按钮向上消息的问题，而是该消息的相对时间以及按钮控件被显示的模式表单禁用的问题。想想如果您单击并按住鼠标按钮一两秒钟会是什么时间。我怀疑您会发现 MessageBox 在您释放鼠标按钮之前出现。

# iphone - 如何在 iPhone 应用程序的单个地图视图中显示多个位置

> ID：13762017
> 
> 赞同：2
> 
> 时间：2012-12-07T11:16:06.343
> 
> 标签：iphone, objective-c, annotations, mkmapview

我有包含多个地名、纬度和经度的 NSMutableArray。这些位置值在距当前位置 5000 米的范围内。我需要在一张地图中显示所有位置的注释图钉。是否可以？

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T05:43:23.640

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface MyAnnotation : NSObject <MKAnnotation>
{

CLLocationCoordinate2D  coordinate;
NSString*               title;
NSString*               subtitle;
}

@property (nonatomic, assign)CLLocationCoordinate2D coordinate;
@property (nonatomic, copy)NSString *title;
@property (nonatomic, copy)NSString *subtitle;

@end

#import "MyAnnotation.h"

@implementation MyAnnotation

@synthesize title;
@synthesize subtitle;
@synthesize coordinate;

- (void)dealloc 
{
    [super dealloc];
    self.title = nil;
    self.subtitle = nil;
}
@end

//in your controller in .h
MyAnnotation* myAnnotation;
NSMutableArray *annotations;

//im .m file
- (void)viewDidLoad 
{
[super viewDidLoad];
mapp.showsUserLocation = YES;

mapp.delegate = self;

annotations = [[NSMutableArray alloc] init];
for (int i=0; i<[arrayLatitude count]; i++)
{
        CLLocationCoordinate2D theCoordinate1;

            theCoordinate1.latitude  = [[arrayLatitude objectAtIndex:i] floatValue];
            theCoordinate1.longitude = [[arrayLongitude objectAtIndex:i] floatValue];

            myAnnotation = [[MyAnnotation alloc] init];
            myAnnotation.coordinate = theCoordinate1;
            myAnnotation.title      = [arrayName objectAtIndex:i];
            [mapp addAnnotation:myAnnotation];
            [annotations addObject:myAnnotation]

}

NSLog(@"%d",[annotations count]);

MKMapRect flyTo = MKMapRectNull;
for (id <MKAnnotation> annotation in annotations)
{
    MKMapPoint annotationPoint = MKMapPointForCoordinate(annotation.coordinate);
    MKMapRect pointRect = MKMapRectMake(annotationPoint.x, annotationPoint.y, 0, 0);
    if (MKMapRectIsNull(flyTo)) 
    {
        flyTo = pointRect;
    }
    else 
    {
        flyTo = MKMapRectUnion(flyTo, pointRect);
    }
}
mapp.visibleMapRect = flyTo;

}

- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{
if ([annotation isKindOfClass:[MKUserLocation class]])
    return nil;

static NSString* AnnotationIdentifier = @"AnnotationIdentifier";
MKPinAnnotationView* pinView = [[[MKPinAnnotationView alloc]
                                 initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier] autorelease];
pinView.animatesDrop   = NO;
pinView.canShowCallout = YES;
pinView.pinColor = MKPinAnnotationColorRed;

UIImageView *icon = [[UIImageView alloc] initWithImage:[UIImage imageNamed:[NSString stringWithFormat:@"%i.jpg",rand()%3908+1]]];
pinView.leftCalloutAccessoryView = icon;
[icon release];

UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
[rightButton setTitle:nil forState:UIControlStateNormal];
[rightButton addTarget:self
                action:@selector(myMethod:)
      forControlEvents:UIControlEventTouchUpInside];
pinView.rightCalloutAccessoryView = rightButton;

return pinView;
}

- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view {
NSLog(@"Title     : %@",view.annotation.title);
NSLog(@"Latitude  : %f", view.annotation.coordinate.latitude);
NSLog(@"Longitude : %f", view.annotation.coordinate.longitude);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:26:56.957

您可以投放无限数量的`MKAnnotationPoint`s

# asp.net - 单击清除值上的asp输入字段

> ID：13762026
> 
> 赞同：0
> 
> 时间：2012-12-07T11:16:40.353
> 
> 标签：asp.net

我想用我的asp表单字段更改我的输入值，以便在单击它时清除内容，如果有人没有键入任何值并单击另一个字段，它将再次重新添加默认值，如果更改它留下新的文本。

例如。场地：

```
 <asp:TextBox ID="NameInfo"  CssClass="NameInfo" Width="300" runat="server" text="Name" /> 
```

提前感谢您的任何回复。我是asp的初学者，所以我不确定如何执行这些类型的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:23:46.130

我相信您需要的功能最好使用 jQuery 和插件来实现。也许从经验来看，[http://code.google.com/p/jquery-watermark](http://code.google.com/p/jquery-watermark)效果很好。

您应该只需要下载该库，然后在页面的 head 标记中包含以下内容：

```
<script type="text/javascript" src="/path/to/jquery.js"></script>
<script type="text/javascript" src="/path/to/watermarkplugin.js"></script>
<script type="text/javascript">
      $(document).ready(function() {
         $("#<%=NameInfo.ClientID").watermark('The text you want to appear');
      });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:58:31.570

找到了一个简单的替代方案：

```
 <asp:TextBox ID="NameInfo" CssClass="NameInfo" onfocus="if(this.value == 'Name'){this.value='';}" onblur="if(this.value == ''){this.value='Name';}" Width="300" runat="server" text="Name" /> 
```

# security - 如何在基于 javascript 的应用程序 (phonegap) 中管理设置和存储 PIN 到本地存储

> ID：13762027
> 
> 赞同：0
> 
> 时间：2012-12-07T11:16:40.767
> 
> 标签：security, cordova, sencha-touch, local-storage

我正在构建一个从 Web 服务检索数据的 Sencha Touch 2 应用程序。已决定，当您从空闲状态启动应用程序时，最好在应用程序上使用可选的 PIN 设置以提高安全性。我不确定管理此问题的最佳方法是什么。

Web 服务本身无法存储 PIN，并且该应用程序还设计为离线和在线使用，因此需要将数字存储在设备本身的本地存储中。我不相信这会提供任何级别的安全性，而且我还担心在 iOS 上本地存储显然被视为临时存储，因此在本地存储中设置数字并不一定意味着它会一直存在。

Web 服务已将过期的身份验证令牌返回到所有对 API 的请求都需要的设备。在我看来，这已经足够安全了，但 PIN 的想法似乎对客户很重要。

您将如何管理此要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:03:20.240

与在服务器/客户端之间传递的 cookie（并且它们都可以访问）不同，sessionStorage / **localStorage**由具体的浏览器 100% 存储在客户端中，sessionStorage 将数据临时存储在一个 HTTP 会话中，localStorage 将永久数据存储到客户端硬磁盘。优势很明显：

*   数据不会通过 HTTP 请求/响应传递，将节省带宽。
*   不会有 4KB 的限制，网站在客户端存储大数据时具有更大的灵活性。
    注意：*W3C“建议每个域的本地存储大小限制为 5 兆字节”和“欢迎反馈”，这比 cookie 中的 4KB 限制要大得多。*
*   现在数据不会通过网络传递，这会相对**更安全**。
*   根据#3进一步考虑，现有的一些HTTPs连接理论上可以通过采用Web Storage使用纯HTTP，因为不需要对数据进行加密，数据存储在客户端。由于与 HTTP 相比，HTTP 通常只有 10% 的性能，因此最终要么提高性能，要么节省成本（采购更便宜的服务器硬件）。

所以我（个人）会尝试一下[localStorage](http://docs.phonegap.com/en/2.2.0/cordova_storage_storage.md.html#localStorage) :)。如果您想要更高的安全性，您可以在将其存储到 localStorage 之前额外加密您的密码，例如[http://point-at-infinity.org/jsaes/](http://point-at-infinity.org/jsaes/)

# objective-c - 使用 Interface Builder、NSObjectController 子类和绑定时在模型和视图之间插入控制器逻辑

> ID：13762028
> 
> 赞同：5
> 
> 时间：2012-12-07T11:16:49.633
> 
> 标签：objective-c, cocoa, core-data, interface-builder, cocoa-bindings

在使用 IB、NSObjectController 子类和绑定时，我一直在努力理解插入​​控制器逻辑的最佳方式。

我需要在模型和视图之间插入控制器逻辑，我正在努力寻找一种优雅的方式来做到这一点。是的，您可以向文件所有者发送操作并在其中处理控制器逻辑，但是当某些核心数据模型可以扩展到五十个或更多具有深度关系结构的实体时，这开始安装大量的样板代码。

一个非常简单的例子是这样的；假设您有一个具有四个字符串属性 myTextWinter、myTextSpring、myTextSummer、myTextAutumn 的实体。您有一个通过 NSObjectController 连接到 IB 中的视图。Now, say the user can select which 'Season' they wish to view by choosing Spring, Summer, Autumn, Winter from a Menu somewhere - when that season is selected, I would like to display the appropriate season's text.

在这个简化的示例中，我可能会在 NSDocument 子类中获取对象，创建一个我在视图中绑定到的名为 mySeasonText 的属性，然后检查我的 NSUserDefaults 是否有适当的季节，并将请求路由到模型中的适当属性.

当我有五十个实体时，问题就出现了，其中一些实体的关系有两个、三个或更深，每个实体都有自己的一组特定于季节的文本属性，我希望在从季节菜单中进行选择时在这些属性之间进行切换。或者，如果我有一堆 nsarraycontroller 链接在一起以访问更深层次的对象。

迄今为止，我一直在做以下事情；在我的每个模型对象中添加一个名为“mySeasonText”的属性，然后从我的控制器设置中获取设置，并路由到适当的季节。I refresh these objects whenever a new item in the menu is selected.

虽然这有效并消除了绝对大量的样板代码，但我的控制器逻辑现在在我的模型中。

一定会有更好的办法！有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:59:25.327

这是一个棘手的话题。苹果甚至在自己的文档中提到了这些挑战：

> 通过使用绑定技术，您可以轻松地创建一个 Cocoa MVC 应用程序，其视图直接观察模型对象以接收状态更改通知。然而，这种设计存在理论上的问题。视图对象和模型对象应该是应用程序中最可重用的对象。[...] 在设计方面，最好将模型和视图对象彼此分开，因为这样可以提高它们的可重用性。

您正在寻找的设计模式是[中介控制器](http://developer.apple.com/library/ios/documentation/general/conceptual/CocoaEncyclopedia/Model-View-Controller/Model-View-Controller.html#//apple_ref/doc/uid/TP40010810-CH14-SW7)- 一种使用可可绑定类插入控制器逻辑的方法：

> 中介控制器通常是您从 Interface Builder 库中拖动的现成对象。您可以配置 [Mediating controllers] 以在视图对象的属性和控制器对象的属性之间建立绑定，然后在这些控制器属性和模型对象的特定属性之间建立绑定。因此，当用户更改视图对象中显示的值时，新值会自动传递给模型对象进行存储——通过中介控制器；当模型的一个属性改变它的值时，这个改变会被传递给一个视图来显示。

以下是我对他们的看法：你有没有看过电影或电视节目中两个角色需要交谈，但他们不会说任何相同的语言？他们找到其他人（或喜剧中的另外 5 个人），每个人都有一种共同语言，他们通过玩翻译电话的巨大游戏进行交流。

中介控制器有点像这样。

随着您的应用程序的增长，他们会了解所有关于*在这个单一视图中查找这一事物*的超级具体规则。*这是应用程序需要*运行的那种代码，但是当你把它放到你的模型中时，你理所当然地觉得它很*讨厌。*

对于几个具体和详细的​​示例，Apple 提供了这个非常详细的文档：[Bindings Message Flow](https://developer.apple.com/library/mac/#documentation/cocoa/conceptual/cocoabindings/Concepts/MessageFlow.html#//apple_ref/doc/uid/TP40002149-BCICADHC)。

有关此和相关 MVC + 绑定的一些非常好的讨论，请参阅：

*   [MVC 和可可绑定最佳实践问题](https://stackoverflow.com/questions/356997/mvc-and-cocoa-bindings-best-practices-question)
*   [为什么要使用 NSObjectController？](http://www.cocoabuilder.com/archive/cocoa/215378-why-use-nsobjectcontroller.html)
*   [使用 NSArrayController 替换模型对象](http://www.cocoabuilder.com/archive/cocoa/281321-replacing-model-objects-using-an-nsarraycontroller.html)

# c - 不同硬件架构的系统调用？

> ID：13762029
> 
> 赞同：1
> 
> 时间：2012-12-07T11:16:50.307
> 
> 标签：c, architecture, operating-system, system-calls

我假设代码将用 C 编写。

我研究过编译器编译代码（词法分析，语法分析等）并将我们的代码转换为汇编代码，然后汇编器将代码汇编为机器代码，最终在硬件上执行。所以我怀疑为系统调用编写的代码是否可移植，即如果我将在某些硬件上编译相同的代码，这段代码会运行吗？

我是否正确地说，唯一依赖于架构的部分是编译器，并且一旦在其他架构上编译，系统调用就会运行良好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:28:41.427

系统调用取决于操作系统和架构。大多数情况下，如果体系结构或操作系统不同，则应重新编译您的程序。

例如`sbrk`，`brk`用于 malloc() 的系统调用，即 Windows 中不可用的动态内存分配。

参考 windows[内存分配问题中 malloc 是如何实现的](https://stackoverflow.com/questions/3199407/windows-memory-allocation-questions)

有两种类型的系统调用，即“机器架构独立”和“机器架构依赖”可用。

如果您只使用独立于机器架构的机器，那么移植就不会太担心了。

**来回答你的问题：** 所以这取决于你使用的系统调用。但是必须重新编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:51:04.067

甚至不考虑调用本身，调用约定在硬件体系结构之间也有很大差异。例如：

*   较旧的 x86：`int`
*   英特尔较新的 x86/64：`sysenter`/`sysexit`
*   AMD x86/64：`syscall`/`sysret`
*   手臂：`swi 0x420000`

显然，这些都不是真正兼容的。因此，虽然大多数 x86 程序集可以在旧 x86、新 Intel x86/64 和 AMD x86/64 上运行，但系统调用是不同的。即使您使用像 Linux VDSO 这样的抽象，它仍然非常依赖于架构，甚至 VDSO 位于何处。

对于普通的函数调用，它更多地与调用约定有关，由于堆栈和寄存器的差异，调用约定因架构而异。

换句话说，几乎没有汇编代码是*跨*架构的。

# xamarin.android - Mono android中的共享首选项

> ID：13762032
> 
> 赞同：1
> 
> 时间：2012-12-07T11:16:56.140
> 
> 标签：xamarin.android

您好，我是 mono android 的新手，我想使用共享首选项在我的应用程序中保存登录详细信息

有人请帮帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-08T14:46:22.410

重复我[对这个问题的回答](https://stackoverflow.com/questions/13740060/setting-file-for-android-applications/13758706#13758706)......

取回：

```
var prefs = Application.Context.GetSharedPreferences("MyApp", FileCreationMode.Private);  
var somePref = prefs.GetString("PrefName", null); 
```

店铺：

```
var prefEditor = prefs.Edit();
prefEditor.PutString("PrefName", "Some value");
prefEditor.Commit(); 
```

# selenium-rc - 关键字“点击元素”并不总是正确的

> ID：13762033
> 
> 赞同：2
> 
> 时间：2012-12-07T11:16:56.200
> 
> 标签：selenium-rc, robotframework

我遇到了问题，关键字“点击元素”并不总是正确的。

例如，我想访问网站上的链接。

链接的 xpath 是：

```
${xpathIMButton}                xpath=//a/span[contains(text(),"${exprIM}")]
${exprIM}                       Infrastructure Management 
```

要单击鼠标悬停的链接，我使用以下方法：

```
Wait Until Page Contains Element            ${xpathIMButton}
Mouse Over                                  ${xpathIMButton}
Click Element                               ${xpathIMButton}    don't wait 
```

这很简单，但我在日志上看到的内容令人困惑：

![日志](../Images/953b87ec7528e2fc49daa43e9e93b942.png)

来自按钮的 HTML 源的屏幕截图：

![按钮的html代码](../Images/28995abb6e09cb5ad7c9b22d46e2dd86.png)

因此，机器人发现链接（等待页面包含元素和鼠标悬停）正常，但点击元素失败。在我可以看到的屏幕截图中，该按钮确实存在。那么问题是什么？为什么我得到那些令人困惑的错误？

我正在使用：RFW 2.7.5 SeleniumLibrary 2.8.1 Firefox 12

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T19:34:19.213

`Click Element`*当我升级到 Selenium 2.35、 SeleniumLibrary 2.9.1*和 Selenium2Library 1.2时，我开始失败了。我的浏览器是 Firefox 22。`Click Element`当时按下了保存按钮。相同的确切代码工作了 2 次，第三次说它工作了，但确认页面从未出现过。`Focus`我通过在我的前面加上一个关键字来解决我的问题`Click Element`

```
Focus ${saveRule}

Click Element ${saveRule} 
```

现在代码工作了它被调用的 3 次。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:25:58.373

尝试这个：

```
Wait Until Page Contains Element            ${xpathIMButton}
Mouse Over                                  ${xpathIMButton}
Click Element                               ${xpathIMButton}    don't wait 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-23T03:44:30.807

提供答案可能有点晚了，但我确实遇到了这个问题。我所做的是为页面完全加载提供一点等待时间，然后成功找到我的按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-12T15:33:47.870

看来您的鼠标悬停可能会导致问题。鼠标悬停可能会导致元素隐藏在 DOM 中。

但这是 6 年前的 Selenium 1 Library。现在，我们在 ROBOT 框架中使用 Selenium2Library，所以如果您尝试过或已经做过，请告诉我们。

# xml - XInclude 用法和 xsi:noNamespaceSchemaLocation 限制，解决方法？

> ID：13762041
> 
> 赞同：0
> 
> 时间：2012-12-07T11:17:19.403
> 
> 标签：xml, xsd, xinclude

首先，感谢您的宽容，我是 XML Schema 初学者。

我已经使用 XInclude 构建了一个包含多个包含的 XML 文件。我之所以选择这种方法高于其他方法，是因为每个包含的 XML 文件都可以独立验证。

当我处理本地文件时，我没有定义任何命名空间，然后我使用 xsi:noNamespaceSchemaLocation 属性来引用我的 xsd 文件。

参数.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<Root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="parameters.xsd">
    <xi:include href="./Transducers/transducers.xml" parse="xml" xmlns:xi="http://www.w3.org/2001/XInclude"/>
</Root> 
```

参数.xsd

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" attributeFormDefault="unqualified">
    <xs:include schemaLocation="./Transducers/transducers.xsd"/>
    <xs:element name="Root">
        <xs:complexType>
            <xs:sequence>
                <xs:element ref="Transducers" minOccurs="1" maxOccurs="1"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

转换器/transducer.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<Transducers xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="./transducers.xsd">
...
</Transducers> 
```

我没有放置transducers.xsd 文件，因为它不再为问题提供附加值。只要考虑到transducer.xml 对他的模式是有效的。

因此，当我尝试验证 parameters.xml 时，出现以下错误：

**'noNamespaceSchemaLocation' 属性引用其目标命名空间已用于验证的模式。**

我很容易理解的错误，但我无法解决我的情况。

在这种情况下会有什么解决方案。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:04:44.263

棘手的一个；我的方法是不使用 xsi:schemaLocation。我一直认为它是假的——如果你不相信一个 XML 文件是有效的，你为什么要相信它告诉你在哪里可以找到它的模式？

# c# - 如何更改此正则表达式以使用 .Net 正则表达式引擎？

> ID：13762047
> 
> 赞同：4
> 
> 时间：2012-12-07T11:17:51.480
> 
> 标签：c#, .net, regex, vb.net

我正在使用正则表达式来验证具有以下条件的手机号码：

1.  最多 12 个数字。
2.  它应该从零开始。
3.  将只允许一个空格（在未定义的点）
4.  后跟一个可选的分机号码，长度最多为五位数，不包括#号

我的正则表达式如下所示：（我已经用“rubular”测试器对此进行了测试）

```
^((0((?=\d* \d*#)[\d ]{,11})(#\d{,5})?)|(0(?:\d{,10})(#\d{,5})?)|(0((?=\d* \d*$)[\d ]{,11})))$ 
```

但它不适用于 .net 正则表达式引擎。

有人可以告诉我，在上面的哪一部分不适用于 .net 正则表达式引擎？如果我可以更改上述表达式中的任何内容，它将在.Net 正则表达式引擎中工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:22:31.103

正则表达式中的**唯一**问题是您没有在任何地方指定起始范围..所以它应该是`{0,11}`或`{1,11}`不是`{,11}`

* * *

您也可以使用这个简化的正则表达式

```
^(?=(\S*[\s]\S*|\S*)$)0(\s?\d){1,11}\s?(#(\s?\d){1,5})?\s?$ 
```

`\S`匹配任何不是空格的字符

`(\S*[\s]\S*|\S*)$`匹配 0 到多个非空格字符后跟一个空格，然后匹配 0 到多个非空格字符直到结束，或者它匹配所有非空格字符直到结束

`(?=)`是一个`positive lookahead`检查特定模式是否发生，如果没有，它将不匹配！

# iphone - UIView 到 AFOpenFlowView 转换

> ID：13762049
> 
> 赞同：0
> 
> 时间：2012-12-07T11:18:14.677
> 
> 标签：iphone, objective-c, ios

我正在实现 AFOpenFlowView，但是当我将 UIView 转换为 AFOpenFlowView 时我被卡住了，当我运行代码时，它在这里崩溃

```
[(AFOpenFlowView *)self.view setImage:[UIImage imageNamed:imageName]]; 
```

它总是给出错误 -[UIView setImage:forIndex:]: unrecognized selector sent to instance，我觉得它没有将 UIView 转换为 AFOpenFlowView，有什么建议吗？

# python - 会话管理、SSL、WSGI 和 Cookie

> ID：13762051
> 
> 赞同：1
> 
> 时间：2012-12-07T11:18:17.997
> 
> 标签：python, session, cookies, ssl, wsgi

我正在审查将 wsgi-app 实施到浏览器会话管理的可能性和可取性，而不使用任何现成的中间件。

正在考虑的一般方法是：

在浏览器和服务器之间使用 SSL。将 SSL 会话 ID 公开给 WSGI 或 OS.environment，用作会话 ID 以启用应用程序级别的持久性和身份验证。由于如果服务器+浏览器再次握手，SSL 会话 ID 可能随时更改，因此我们的想法是使用 cookie 来保存生成的 SSL ID 的散列版本。如果他们握手并且检测到 SSL ID 的变化（暴露给环境的 SSL 会话 ID 与客户端返回的 cookie 不匹配），则可以检查散列的 cookie 以查看它是否包含先前已知的会话 ID，如果它那么我们应该继续当前会话并将 cookie 中使用的 SSL 会话 ID（并存储在后端数据库中）更新为新生成的通过握手 SSL 会话 ID。因此，即使 SSL 会话 ID 也使我们能够继续会话

据我了解，这个想法是让 SSL 生成会话 ID，并做一些比仅仅依靠 cookie+hmac 来保存会话 ID 更安全的事情。

我会对任何人对上述过程的想法感兴趣。原则上这对我来说似乎是合理的，但我对这种功能的经验很少。我已经为一些场景绘制了客户端、服务器和 wsgi-app 之间的交换流程，它似乎工作得很好，但我不太舒服，因为我已经涵盖了所有的基础。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T12:01:13.097

# 你的协议有什么问题

您可能需要考虑以下事项：

1.  Alice 联系您的服务器并获得一个 SSL 会话 ID `S`。包含的 cookie`H(S)`被发送给 Alice。
2.  Bob 正在监听交流。SSL 会话 ID 未加密，因此他可以读取`S`.
3.  Bob 联系您的服务器，并将会话 cookie 设置为`H(S)`。他的会话 ID 无法识别，但您的系统无论如何都会让他进入 Alice 的会话（并且可能也会将 Alice 踢出去！）。

然后解决方案是使用 HMAC 对会话 ID 进行签名。但是，您不妨一开始就使用 HMAC 的会话 ID。

* * *

一些细节：

*   要知道他应该发送的 Cookie 的名称，Bob 可以联系您的服务器。
*   Bob 也可以这样做来了解您正在使用的散列算法

# HMAC 有什么好处

Session Cookies + HMAC 已被证明是加密安全的。HMAC 是为验证数据而*设计的。*HMAC 的逻辑是合理的，到目前为止，该协议不存在任何攻击。

更好的是，事实证明，对底层哈希算法的攻击并不意味着存在对 HMAC 的攻击（但这并不意味着您应该使用 MD5！）。

您没有*理由*不想使用 HMAC。

* * *

SSL 会话 ID 充其量对负载平衡器有用。

# 永远不要实现自己的密码学

你永远不应该重新发明密码学。（可能）数千名在该领域具有丰富经验的人已经审查了密码算法。

每当您觉得自己有更好的想法时，您可能会遗漏一些东西。也许你不知道！但是你应该写一篇关于你的算法的论文，并让它进行同行评审。

**坚持标准。**

# jsp - Struts2，无法使用访问参数 标签。想用在 标签

> ID：13762054
> 
> 赞同：1
> 
> 时间：2012-12-07T11:18:27.233
> 
> 标签：jsp, struts2, jstl

我有一种情况，我需要将我的 NAV 栏放在每一页的顶部。因此，我决定在每个页面中包含一个新的 JSP，该 JSP 具有一个参数，指示用户所在的活动选项卡是什么。

我的实现如下。

**仪表板.jsp**

```
...
<s:include value="../tab-set.jsp">
    <s:param name="tab_name" value="dashboard" />
</s:include>
... 
```

**标签集.jsp**

```
<nav>
    <ul>
        <li <s:if test="param.tab_name == 'dashboard'">class="active"</s:if> >
            <a href="dashboard">Dashboard</a>
        </li>
        <li <s:if test="param.tab_name == 'tab_2'">class="active"</s:if> >
            <a href="suggestion">TAB 2</a>
        </li>
    </ul>
</nav> 
```

结果是 IF 案例不在两个选项卡上执行。

我也用不同的方法尝试过它，但它不像

`<s:if test="#param.tab_name == 'dashboard'">`

或者

`<s:if test="#attr.tab_name == 'dashboard'">` *（网上找了个地方）*

或者我也尝试`tab_name`在页面上打印 value 的值，`${param.tab_name}`但没有发生任何事情。

但他们都没有工作。

请帮助我或指导我可以做什么。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:24:13.613

无法以这种方式访问​​参数，因为 valuestack 不是在渲染页面中创建的。尝试像请求参数一样访问它们`${param.tab_name}`。

**更新**

tag的值`<s:param>`应该是`'dashboard'`因为它是一个字符串。

```
<s:include value="../tab-set.jsp">
    <s:param name="tab_name" value="'dashboard'" />
</s:include> 
```

在您包含的页面`tab_name`中使用`${param.tab_name}`符号并使用标记将其设置为其他一些变量`<s:set>`。

```
<s:set name="tabName">
   ${param.tab_name}
</s:set>
<s:if test="#tabName == 'dashboard'">
</s:if> 
```

这样就不需要使用脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:08:50.290

诀窍在于缺失的部分：

`<% pageContext.setAttribute("tab_name" , request.getParameter("tab_name")); %>`

然后，喜欢 tihs：

**标签集.jsp**

```
<% pageContext.setAttribute("tab_name" , request.getParameter("tab_name")); %>
<nav>
    <ul>
        <li <s:if test="#attr.tab_name == 'dashboard'">class="active"</s:if> >
            <a href="dashboard">Dashboard</a>
        </li>
        <li <s:if test="#attr.tab_name == 'tab_2'">class="active"</s:if> >
            <a href="suggestion">TAB 2</a>
        </li>
    </ul>
</nav> 
```

享受

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:53:31.337

这是 struts2 关于如何使用 include 标签的文档： [documentation](http://struts.apache.org/2.0.12/docs/include.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-09T11:39:00.580

请使用以下代码更改**dashboard.jsp文件：**

```
<s:include value="../tab-set.jsp">
    <s:param name="tab_name">dashboard</s:param>
</s:include> 
```

如果您在“value”属性中声明了“String”值，Struts 2 将忽略它。

# entity-framework-4 - 显式加载导航属性

> ID：13762055
> 
> 赞同：2
> 
> 时间：2012-12-07T11:18:33.367
> 
> 标签：entity-framework-4, lazy-loading, eager-loading

```
public class MyDbContext: DbContext
{
}
public class Product
{
   public long Id {get; set;}

   public long CategoryId {get; set;}

   [ForeignKey("CategoryId")] 
   public virtual Category Category {get; set;}
}
public class Category
{
   public long Id {get; set;}
   public string Name {get; set;}
}

List<Product> GetProducts()
{
    var context = new MyDbContext();
    var products = context.Set<Product>().ToList();
    var categories = context.Set<Category>().ToList();
    foreach(var product = in products)
    {
        product.Category = categories.First(c => c.Id == product.CategoryId);
    }

    return products;
 } 
```

在这里，我想检索所有具有最佳性能的相关类别的产品。我首先尝试使用延迟加载，但它会导致许多数据库查询。然后我使用预加载，但生成的查询脚本效率不高，尤其是对于复杂的查询。所以我使用了以下方式：

*   获取所有产品，

*   获取所有类别和

*   从获取的类别中手动设置产品的导航属性“类别”

我的问题是：

- 即使在我手动设置导航属性“类别”后，EF 仍然会延迟加载它吗？

-对于复杂查询的急切加载，有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T14:18:52.290

如果你使用，你会得到最好的结果`Include`：

```
var products = context.Set<Product>().Include("Category"); 
```

这将在一个查询中加载产品及其类别，并且类别属性将不再触发延迟加载。

更好的是扩展方法[`Include`](http://msdn.microsoft.com/en-us/library/gg671236%28v=vs.103%29.aspx)：`context.Set<Product>().Include(p => p.Category);`。

# mysql - 创建具有一对多关系的 MySQL 5.0 查询/视图

> ID：13762065
> 
> 赞同：-2
> 
> 时间：2012-12-07T11:19:25.837
> 
> 标签：mysql, json, pdo

我有一个具有以下架构的 MySQL 5.0 数据库：

![数据库架构](../Images/5678c5e03d108e2e09392f40cde341ad.png)

我在对服务器/单词进行ajax调用的Web应用程序中使用它，在其中我使用PDO查询数据库并返回json。我的目标是得到这样的 json：

```
[ //array of words
{
"word": "...",
"fonetics": "...",
...
"meanigngs":[] // array of meanings (objects)
"inflections":[] // array of inflections
"examples":[]
},
...
] 
```

实现此目的的一种方法是多次查询数据库，每次查询每个表，然后在 php.ini 中处理 json 结构。我知道这不是很好，但我主要是前端人员，我对 MySQL 了解不多。我还在考虑创建一个由所需表构成的视图。

您能否指导我找到最佳解决方案，或者甚至编写一段 mysql 来创建视图/从数据库中获取所需数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:57:06.707

如果您需要所有数据，并希望它按照您描述的方式在对象层次结构中结构化，那么在应用程序级别这样做可能确实是您的最佳选择。确保对表进行排序，`word_id`以便您可以从查询结果中的连续行中获取子数组的值。

替代方案包括：

*   为每个子数组查询一次数据库。这将使构建结构更加容易，并且可能会减少客户端的内存消耗，但会导致更多的查询。如果你这样做，那么一定要准备好声明！
*   通过连接表格创建一个大视图。这将大量重复数据，特别是当您包含相当不相关的表之间的完整交叉产品时，例如含义和变形之间的每个组合等等。绝对不是这里的路线。

# php - 将一组选中的复选框传递给 javascript

> ID：13762067
> 
> 赞同：0
> 
> 时间：2012-12-07T11:19:36.987
> 
> 标签：php, javascript, ajax

我有一些我生成的复选框值

```
$sql = "sql statement";
$courseResult = mysqli_query($connection, $sql);
$courses = mysqli_fetch_row($
// Display the courses the user has taken 
while ($courses) {
    echo "<td><input type='checkbox' name='coursesToAdd[]' id='coursesToAdd[]' value='$courses[0]'>$courses[0]</td></tr>";            
    $courses = mysqli_fetch_row($courseResult);
}

<input type='button' onclick='EditStudentCertificates()' value='Submit'/> 
```

我想要做的是获取用户签入数组的值，然后从我试图这样做的javascript访问这个数组，但它似乎不起作用：

```
 function EditStudentCertificates(){                
            if (window.XMLHttpRequest){
                // code for IE7+, Firefox, Chrome, Opera, Safari                
                xmlhttp=new XMLHttpRequest();
            }
            else{
                // code for IE6, IE5
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }      

            var coursesToAddField = document.getElementById("coursesToAdd[]");
            var coursesToAdd = coursesToAddField ? coursesToAddField.value : '';

            xmlhttp.open("POST","updateStudentCInfo.php",true);
            xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
            xmlhttp.send("certValue="+certValue+"&coursesToAdd="+coursesToAdd);
            window.alert("Your certificate information has been updated");
            window.location.reload();                
        } 
```

我认为问题出在我试图从 javascript 中的复选框中获取值的方式上，可能是：

```
 var coursesToAddField = document.getElementById("coursesToAdd[]");
            var coursesToAdd = coursesToAddField ? coursesToAddField.value : ''; 
```

因为变量 courseToAdd 似乎只包含页面上第一个复选框的值，无论我在点击提交之前在页面上检查了多少个复选框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:20:16.177

正如我在上面的评论中提到的：

甚至不看您发布的 AJAX 代码，您就可以从复选框中获取值的方式存在问题。您`coursesToAdd[]`对所有复选框使用相同的 id。这是无效的，因为页面上的所有 id 都必须是唯一的。您需要改用类名。

在您的 HTML/PHP 中：

```
while ($courses) {
    echo "<td><input type='checkbox' name='coursesToAdd[]' class='coursesToAdd' value='$courses[0]'>$courses[0]</td></tr>";            
} 
```

在您的 JS 中，您可以访问这样的复选框：

```
var courseCheckboxes = document.getElementsByClassName("coursesToAdd");
for (var i=0; i < courseCheckboxes.length; i++) {
    if (courseCheckboxes[i].checked) {
       // do something with the checkbox
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:23:41.230

您正在异步执行此操作。所以你应该利用 onreadystatechange 事件。

尝试：

```
xmlhttp.onreadystatechange = function(){
    window.location.reload();       
} 
```

并删除 location.reload()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:30:14.777

当有多个值通过 POST 时，它需要`encodeURIComponent(variablename)`

# image-processing - 处理一些相似图像的好方法

> ID：13762080
> 
> 赞同：3
> 
> 时间：2012-12-07T11:21:06.597
> 
> 标签：image-processing, opencv

我需要在实时情况下处理一些图像。我正在使用 OpenCV 从相机接收图像。我使用的语言是 C++。附上图像示例。应用一些阈值过滤器后，我得到了这样的图像，当然这里和那里可能会有一些像素噪声，但不是那么多。

![在此处输入图像描述](../Images/a48825bcf1d6368896f31f1eb7e92927.png)

我需要检测正方形的中心和旋转，以及白色圆圈的中心。我完全不知道该怎么做，因为它需要非常快。可以预定义正方形的数量。任何帮助都会很棒，在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T14:28:44.097

以下直截了当的方法是否太慢了？

*   将图像二值化，使原来的绿色背景为黑色，其余部分（黑色方块为白点）为白色。
*   使用 cv::findContours。
*   获得中心。
*   对图像进行二值化，使除白点外的所有内容均为黑色。
*   使用 cv::findContours。
*   获得中心。
*   将每个点轮廓分配给方形轮廓，因为这是一个内点。
*   通过它们的中心和它们的点的中心之间的线的角度来计算正方形的旋转。

# php - 无法显示 PHP 错误

> ID：13762089
> 
> 赞同：0
> 
> 时间：2012-12-07T11:21:56.370
> 
> 标签：php, error-handling

由于某些莫名其妙的原因，我的 PHP 不会显示错误。我一直在编写一个脚本，我现在正在测试和调试，但我得到的只是一个白页，即使我粘贴了 echo 1；在第 1 行。在我的文档顶部，我有以下错误覆盖以尝试显示错误：

```
ini_set("display_errors", 1);
ini_set("track_errors", 1);
ini_set("html_errors", 1);
error_reporting(E_ALL); 
```

我无法更改全局`php.ini`文件，因为这会覆盖其他实时站点的设置。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T11:44:39.570

尝试在另一个 php 文件中包含失败的脚本，例如：

```
error_reporting(E_ALL);
ini_set("display_errors", 1);
include('script_that_fails.php'); 
```

* * *

编辑

简短说明：

如果主脚本包含例如语法错误并且环境关闭了错误报告，那么即使在主脚本中我们将启用错误报告，它也不会成功，因为脚本不会被执行（因为语法错误）。上面描述的小技巧允许启用错误报告并查看错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T11:35:26.350

### 试试这个

```
set_error_handler("var_dump"); 
```

> 此函数可用于定义您自己在运行时处理错误的方式，例如在发生严重错误时需要清理数据/文件的应用程序中，或者当您需要在某些条件下触发错误时（使用`trigger_error()`）。

# javascript - JavaScript 模板和 DOM 节点的结果

> ID：13762092
> 
> 赞同：0
> 
> 时间：2012-12-07T11:22:03.357
> 
> 标签：javascript, templates

JavaScript 模板有几个库（Mustache、下划线模板）。他们所做的是创建新的 DOM 节点。

在我的应用程序中，我试图重用 DOM 节点以减少内存消耗。一个例子是带有分页的缩略图库。当我加载下一个 50 个缩略图时，我重用了相同的 50 个节点。

我可以使用模板库轻松渲染新节点，但是是否有一些模板库可以重用或更新现有节点，而不是创建新节点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:41:52.783

根据我的经验，创建元素并使用它们进行操作的最快方法是创建尽可能少的元素，在必要时克隆它们，因为这样会更快，然后使用片段来保存它们并尽可能少地对 DOM 进行更改，从而限制重排。我做了很多（简化了很多）：

```
var div    = document.createElement('div'),
    anchor = document.createElement('a'),
    span   = document.createElement('span'),
    frag   = document.createDocumentFragment();

    anchor.className = 'link';
    span.style.height = '20px';

for (var i=0; i<something; i++) {
    var wrapper = div.cloneNode(false),
        link    = anchor.cloneNode(true),
        child   = span.cloneNode(true);

    wrapper.id  = 'myWrapper-'+i;
    wrapper.setAttribute('data-somevalue', 'myValue'+i);

    child.appendChild(link);
    wrapper.appendChild(child);
    frag.appendChild(wrapper);
}

document.body.appendChild(frag); 
```

以我的经验，这是尽可能快的，任何模板库在检查这个和那个等时都会增加很多开销和效率低下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:05:50.980

我的解决方案有点像adeno，但更通用一点。我在我的项目中使用它，它只使用原生 DOM API，保持 js 和 html 完全分离。

```
<ul class="list">
  <li class="item">
    <label><span class="name">Field:</span><input name="" type="" value="" /></label>
  </li>
</ul> 
```

*请注意，发送给客户端时应删除空格。*

首先根据交付的 HTML 生成一个模板，它需要一个根元素和一些绑定点作为参数。

```
var ul = document.querySelector('.list');
var tpl = new Tmpl(ul.querySelector('li'), [['.name', 'input@name'], 'input@type', 'input@value']); 
```

然后使用数据生成`<li>`s。

```
var data = [['test1', 'text', 'test value'], ['test2', 'checkbox', 'true']]
for (var i = 0; i < data.length; i++)
  ul.appendChild(tpl.generate(data[i])); 
```

当需要更新一个实例时，您可以这样做：

```
tpl.apply(ul.querySelector('li'), ['test3', 'button', 'it\'s a button now']); 
```

现在列表已生成。

Tmpl 类（最小化，删除了其他功能，并且没有任何依赖关系）粘贴在下面：

```
function Tmpl(node, targets, singleton) {
  this.elem = node;
  this.begins = [];
  this.targets = [];
  this.fields = [];
  this.mapping = [];
  for (var i = 0; i < targets.length; i++) {
    var tmp = targets[i] instanceof Array ? targets[i] : [targets[i]];
    this.begins.push(this.targets.length);
    for (var j = 0; j < tmp.length; j++) {
      var field = this.parse(node, tmp[j]);
      if (field) {
        this.targets.push(tmp[j]);
        this.fields.push(field);
        this.mapping.push(i);
      }
    }
  }
  this.begins.push(this.targets.length);
  node.parentNode.removeChild(node);
  return this;
}
Tmpl.prototype = {
  generate: function(data) {
    for (var i = 0; i < this.fields.length; i++)
      this.fields[i].nodeValue = data[this.mapping[i]];
    return this.elem.cloneNode(true);
  },
  apply: function(node, data) {
    for (var i = 0; i < this.fields.length; i++)
      this.parse(node, this.targets[i]).nodeValue = data[this.mapping[i]];
    return node;
  },
  applySingle: function(node, index, datum) {
    for (var i = this.begins[index]; i < this.begins[index+1]; i++)
      this.parse(node, this.targets[i]).nodeValue = datum;
    return node;
  },
  parse: function(that, selector) {
    selector = selector.split('@');
    var node = selector[0] == '.' ? that : that.querySelector(selector[0]);
    if (selector[1]) {
      var attr = node.getAttributeNode(selector[1]);
      if (!attr) {
        attr = document.createAttribute(selector[1]);
        node.setAttributeNode(attr);
      }
      node = attr;
    }
    if (node instanceof HTMLElement && node.nodeType != 2 && node.nodeType != 3)
      node = node.firstChild && node.firstChild.nodeType == 3 ?
        node.firstChild : node.appendChild(document.createTextNode(''));
    return node;
  }
}; 
```

# java - 礼品登记循环程序

> ID：13762094
> 
> 赞同：1
> 
> 时间：2012-12-07T11:22:30.563
> 
> 标签：java, while-loop

我正在尝试编写一个在礼品注册表中创建条目的程序。用户可以输入任意数量的礼品以及可以购买的商店。一旦用户表示希望停止输入新商品，将显示所有礼品商品和商店的摘要。

这些是我当前的代码：

```
import java.util.*;
public class GiftRegistry
{
    public static void main(String[] args)
    {
        Scanner input = new Scanner(System.in);

        List<GiftRegistry> list = new ArrayList<GiftRegistry>();
        private String item;
        private String store;
        char ans;

        System.out.print("Do you wish to make a gift registry? (y/n) ");
        ans = input.nextLine().charAt(0);

        while (ans != 'n') 
        {
            GiftRegistry object = new GiftRegistry();
                System.out.print("Enter item: ");
                object.setItem(input.nextLine());
                System.out.print("Enter store: ");
                object.setStore(input.nextLine());
                System.out.print("Any more items? (y/n) ");
                ans = input.nextLine().charAt(0);
                list.add(object);
        }

         System.out.println("Gift Registry");
         for (GiftRegistry myObject : list) {
              System.out.print(myObject.getItem()+" - "+myObject.getStore());
              System.out.println();
    }
} 
```

}

这是当前输入

```
Do you wish to make a gift registry? (y/n) y
Enter item: laptop
Enter store: Acer
Any more items? (y/n) y
Enter item: watch
Enter store: Swatch
Any more items? (y/n) n 
```

它应该产生这样的输出：

```
Gift Registry
laptop - Acer
watch - Swatch 
```

有人可以帮我得到正确的输出吗谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:31:08.187

您可以创建一个自定义对象来保存您的值 -

```
class MyObject {
    private String item;
    private String Store;

    <getter & setters>

} 
```

并将用户输入数据添加到列表中。

```
List<MyObject> list = new ArrayList<MyObject>();
...
while (ans != 'n') {
    MyObject object = new MyObject();
    System.out.print("Enter item: ");
    object.setItem(input.nextLine());
    System.out.print("Enter store: ");
    object.setStore(input.nextLine());
    System.out.print("Any more items? (y/n) ");
    ans = input.nextLine().charAt(0);
    list.add(object);
} 
```

正确的打印方式是 -

```
System.out.println("Gift Registry");
for (MyObject myObject : list) {
    System.out.print(myObject.getItem()+" - "+myObject.getStore());
    System.out.println();
} 
```

输出将是 -

```
Gift Registry
laptop - Acer
watch - Swatch 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T11:29:14.167

好吧，您将不得不制作一个字符串来存储您的物品并像这样存储

```
String itemandStore="" 
```

而（ans！='n'）{

```
 System.out.print("Enter item: ");
    itemandStore += input.nextLine() + " - ";

    System.out.print("Enter store: ");
    itemandStore += input.nextLine() + "\n";

    System.out.print("Any more items? (y/n) ");
    ans = input.nextLine().charAt(0);

    }
System.out.println("Gift Registry\n" + item + store); 
```

您的代码中发生的事情是

项目包含附加在一个对象中的“笔记本电脑 - 手表”，因此输出错误。如果您仍想对商品和商店使用不同的变量，我建议在打印时这样做

```
 String[] items=item.split("-");
    String[] stores=store.split("-");
     int i=0;
    while(items.length>i)
    {
    System.out.println(items[i] + " - " + stores[i]);
     i++;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T11:31:49.780

我将在这里使用更面向对象的方法，并创建一个`Gift`具有此结构的类来覆盖该`toString`方法以满足我的预期输出。

```
public class Gift{
  private String name;
  private String store;

//Getters & Setters

  public String toString(){
   return name + " " + store;
  }

} 
```

然后我会创建一个`Collection`（一个`List`合适的）礼物并将一个新的礼物添加到 `while (ans != 'n')`循环中的列表中。要打印结果，我会循环礼品列表并打印出每个礼品：

```
for (Gift gift: myListofGifts){
  System.out.println(gift);
} 
```

# php - 从 url 获取网站图片

> ID：13762096
> 
> 赞同：1
> 
> 时间：2012-12-07T11:22:35.853
> 
> 标签：php, curl

我尝试在 Windows 7 上使用`Snappy`(src - [http://www.codediesel.com/downloads/snappy](http://www.codediesel.com/downloads/snappy) ) 和`wkhtmltoimage`(src - [http://code.google.com/p/wkhtmltopd](http://code.google.com/p/wkhtmltopd) ) 从 URL 获取图像，但每次我明白了

> 错误：图像无法显示，因为它包含错误

**代码：**

```
<?php
require_once('Snappy/Media.php');
require_once('Snappy/Image.php');

/* 'wkhtmltoimage' executable  is located in the current directory */
$snap = new Image('C://"Program Files"/wkhtmltopdf/wkhtmltopdf.exe');

/* Displays the bbc.com website index page screen-shot in the browser */
header("Content-Type: image/jpeg");
$snap->output('http://www.bbc.com bbc.jpg');
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:16:50.250

我不确定您使用的是什么，但[http://www.artviper.net/website-tools/website-thumbnails.php](http://www.artviper.net/website-tools/website-thumbnails.php)有一个不错的网站。您甚至可以简单地自定义他们的链接以显示任何网站。不过加载需要一段时间。所以我建议将它们保存在本地

您甚至可以自定义输出宽度和浏览器宽度/高度。

将它们保存在本地并显示图像的简单示例代码：

```
<?php
$site = $_POST['site'];
if (strlen($site)==0)
  $site = "www.stackoverflow.com";

$url = "http://85.25.9.83/artviper.php?w=360&sdx=1024&q=90&userID=AV_47845683_352324_2FC&url=".urlencode($site);
$content = implode('', file($url));
file_put_contents("myimage.jpg", $content);
?>

<form method="POST">
<input type="text" name='site' value='<?php echo $site; ?>'/>
<input type="submit" value="Show image" />
</form>

<img src='myimage.jpg' /> 
```

# c# - EF 保存相关数据

> ID：13762098
> 
> 赞同：1
> 
> 时间：2012-12-07T11:22:54.023
> 
> 标签：c#, asp.net-mvc, design-patterns, entity-framework-4

我对 EF 很陌生，我仍在努力解决这一切——我习惯于构建存储过程并调用它们而不是 LINQ-SQL，所以请耐心等待！

我正在尝试构建一个简单的图像管理器，其他实体可以与之相关。所以像
`Entity 1`-has 1-> `Image Collection`-has many-> `Images`
`Entity 2`-has 1-> `Image Collection`-has many->`Images`等等...

目前我正在尝试做图像收集->图像方面的事情，但是在尝试保存现有数据时遇到了一些非常令人沮丧的问题。
在我的模型上，我有我的业务方法来`AddImage`收集 ala 上的图像列表

```
public class ImageCollection : Entity
{
    [Required]
    public string Title { get; set; }
    public virtual ICollection<Image> Images { get; set; }

    public void AddImage(Image Image)
    {
        this.Images.Add(Image);
    }
} 
```

...然后服务会更新集合 - 添加新图像时这一切都很好。

问题是在更新信息时。现在我知道，如果我正在关联信息，如果我处于某种循环中，我可以附加到现有的东西上，例如：

```
// get tag from context
var image = new Image { Id = 1 } 

// attach into the entity
_service.Attach<Image>(image);

// attach image to collection
collection.Images.Add(image); 
```

但是，当我已经将图像放入其中时`collection.Images`，我怎么能在数据库中提交/保存我的集合而不尝试复制所有内容？我试过贴...

```
// attach any previously referenced images so they don't get duplicated
foreach (var image in Collection.Images.Where(image => image.Id > 0).ToList())
{
    Image i = new Image { Id = image.Id };
    (_imageCollectionRepository as GenericRespository<ImageCollection>).Attach<Image>(i);
} 
```

我试过设置它的状态（这是在被调用的内部`SetAsUnchangedState<T>(T item){}`）

```
_context.Entry<T>(item).State = System.Data.EntityState.Unchanged; 
```

但什么都没有，只是错误，`An object with the same key already exists in the ObjectStateManager`或者`AcceptChanges cannot continue because the object’s key values conflict with another object in the ObjectStateManager.`可能还有其他错误。

**编辑 1。**

我目前正在采取的步骤 - 如果这有帮助......

1.  控制器接收一个`ImageCollection`实体及其列表， `Images`根据此问题顶部的模型。然后将其作为视图模型（CollectionID 和列表）发送到视图

2.  该视图显示了这些图像及其属性（只是标题），它是主键。然后发布。然后控制器从服务中获取图像集合，`ImageCollection collection = _imageService.FindCollectionById(model.CollectionID)`并通过业务逻辑将每个图像添加到视图模型中。

3.  然后控制器将此 ImageCollection 传递给服务进行更新。这就是我认为这一切都有些错误的地方，因为我的控制器和业务逻辑应该是持久性无知的 - 是的，我知道我目前正在通过控制器中的 ID 获取 ImageCollection！我可能只是将视图模型传递给服务，或者稍后创建一个消息请求。

**编辑 2** 我现在已经找出了哪里出错了，我最终得到了以下代码，目前它并不漂亮，因为我正在努力解决它。但这一切基本上都是正确的吗？或者有没有更有效的方法来做到这一点？

```
public void UpdateCollection(ViewModels.ImageCollectionViewModel model)
    {
        // get collection
        ImageCollection collection = FindCollectionById(model.CollectionID);

        if (model.Images != null)
        {
            GenericRespository<Image> temp_repository = new GenericRespository<Image>();

            // add images
            foreach (Image i in model.Images)
            {
                if (i.Id > 0)
                {
                    temp_repository.Attach<Image>(i);
                    temp_repository.Update(image);                        
                }
                else
                {
                    collection.Images.Add(i);
                }
            }

            temp_repository.SaveChanges();
        }

        _imageCollectionRepository.Update(collection);
        _imageCollectionRepository.SaveChanges();
    } 
```

我哪里错了？：（ 谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:44:54.593

在 EF 中，每个实体对象都有一个名为的标识符`EntityKey`（您可以在运行时看到它的只读值）。因此，例如，当您从数据库中获取 10 个图像时，这些记录中的每一个都将具有不同的唯一键。此 EntityKey 用作这些记录的 ID。

添加新记录时，EntityKey 为空。这允许 DBcontext 知道这是要插入的记录。但是，来自数据库的记录具有 EntityKey 值。

在您的情况下（取决于错误消息），您正在尝试保存现有数据（与数据库数据具有相同的主键）但它们的 entityKey 为空，在这种情况下被视为 DBcontext 中的新记录，但当然会发生冲突与您的数据库数据。

该错误可能是由于您正在创建一个新图像（或列表）来绑定您的图像（或列表），例如

```
Image i = new Image { Id = image.Id }; 
```

这是不正确的。改为使用

```
Image i = image ; 
```

我希望这很清楚。

### 根据您的评论进行编辑

附加，不仅获取预先存在的项目，还根据您附加的项目更新其属性。在那个级别，如果您要附加的项目已经存在于 DBContext 中（这是通过比较 EntityKeys 来完成的），那么就可以了。但在您的情况下，它试图附加具有 null EntityKey 的项目（在这种情况下，该项目被视为插入的项目），同时该插入的项目具有另一个项目已经存在的主键（即从技术上讲，数据库中的记录相同，但 EntityKey 不同）。

调试您的代码并在更新项目之前/之后检查实体键以检查其值，以确保它没有更改

![在此处输入图像描述](../Images/32a74ddfd3235f38427ad19204e2f303.png)

# r - R data.frame 具有相同名称的列 check.names=FALSE 不起作用

> ID：13762100
> 
> 赞同：0
> 
> 时间：2012-12-07T11:23:00.107
> 
> 标签：r, dataframe

我初始化一个data.frame如下：

```
combdat <- data.frame(matrix(nrow=50), check.names=FALSE) 
```

在一个循环中，我现在想填写其他列。这是这样发生的：

```
combdat[,mkr] <- mkrgeno 
```

其中 mkr 是某个字符， mkrgeno 是相同大小的向量。但是，mkr 的某些值是相同的。我需要保留它们。现在它们将被覆盖。虽然我设置了 check.names=FALSE

有没有人给我一个建议。谢谢

富有的

* * *

好的，谢谢，我会尝试更详细地提出我的问题。

我的列表 markerinfo 包含有关标记的某些信息：

```
> markerinfo
marker chr      pos        lod   pheno
1   c1m22   1 213.2983  9.1495699 RAPGEF2
2   c4m14   4 131.0000  8.5438345 CACNA1E
3    c1m8   1  63.0000  9.0002544  CACNB3
4   c3m22   3 228.0000  7.1775450   RASA2
5   c1m31   1 305.0000  6.4748053  CACNG6
6   c3m22   3 230.3826  6.5638616   PRKCG
7   c4m11   4 103.0000  6.3592497 CACNA1B
8   c4m26   4 256.0000  8.5450810 CACNA1F
9   c4m14   4 139.0000  5.3257424  CACNG3
10   c2m1   2   0.0000  7.8765658 CACNA1G
11   c2m2   2  13.0000 10.0825268   PRKCA
12  c2m16   2 159.0000  9.2080541 CACNA1D
13  c4m20   4 191.7279  7.2340899    SOS2
14   c2m3   2  16.0000  5.9131295  CACNG5
15  c3m22   3 230.3826  6.7322605 CACNA1A
16   c3m8   3  75.4555  1.1470464 RASGRF1
17   c3m8   3  70.0000  1.9991043    MRAS
18  c1m30   1 288.2238  1.8443845   RRAS2
19  c4m16   4 157.0000  2.1455832 RASGRP3
20  c3m30   3 320.0000  1.9721441    HRAS
21  c1m10   1  90.0000  1.8833757 RASGRF2
22  c3m16   3 161.6888  2.1163401    NRAS
23  c3m20   3 201.9852  2.6265899 RASGRP1
24  c3m30   3 319.4977  1.3677933    KRAS
25  c3m22   3 230.3826  0.7012214 RASGRP2 
```

另一个data.frame是基因型：

```
 c3m1 c3m2 c3m3 c3m4 c3m5 c3m6 c3m7 c3m8 c3m9 c3m10 c3m11 c3m12 c3m13 c3m14 c3m15 c3m16 c3m17 c3m18 c3m19 c3m20 c3m21 c3m22 c3m23 c3m24 c3m25 c3m26 c3m27 c3m28
V1     2    2    2    2    2    2    2    2    2     2     2     2     2     2     2     2     2     2     2     2     2     2     1     1     1     2     2     2
V2     1    1    1    1    1    1    2    2    2     2     2     2     2     2     2     2     2     2     2     2     2     2     2     2     2     1     1     1
V3     2    2    2    2    2    2    2    2    2     2     2     2     2     2     2     2     2     2     2     2     2     2     2     2     2     2     2     2
V4     1    1    1    1    2    2    1    1    1     1     1     1     2     2     2     1     1     1     1     1     1     1     1     1     1     1     1     1
V5     1    1    1    1    1    1    1    1    1     1     1     1     2     2     2     2     2     2     2     1     1     1     1     1     1     1     1     1
V6     1    1    1    1    1    1    2    2    2     2     2     2     2     2     2     2     1     1     1     1     1     1     1     1     1     1     1     1
V7     2    1    1    1    1    1    1    1    1     1     1     1     2     2     2     2     2     2     2     2     1     1     1     1     2     2     2     2
V8     2    2    2    2    2    2    2    1    1     2     2     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1
V9     2    2    2    2    2    1    1    1    1     1     2     2     2     2     2     2     2     2     2     1     1     1     1     1     2     2     2     2
V10    2    1    1    1    1    2    2    2    2     2     2     2     2     2     2     2     2     1     1     1     2     2     2     2     2     2     2     2
V11    1    2    2    2    2    2    2    2    2     2     2     1     1     1     1     1     1     1     1     1     1     1     2     2     2     2     2     2
V12    1    1    1    1    1    1    1    1    1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1
V13    2    2    2    2    2    2    2    2    2     2     2     2     2     2     2     2     2     2     1     1     1     1     1     1     1     1     1     1
V14    1    2    2    2    2    2    2    2    2     2     2     2     2     2     2     1     1     1     1     1     1     1     1     2     2     2     2     2
V15    1    1    1    1    1    1    1    1    1     1     1     1     1     1     1     1     1     1     2     2     2     2     2     2     2     1     1     1
V16    1    1    1    1    1    1    1    1    1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1
V17    1    1    1    1    1    1    1    2    2     2     2     2     2     2     2     2     2     2     2     2     2     2     2     2     2     2     2     1
V18    1    1    1    1    1    1    1    1    1     1     2     2     2     2     2     1     1     1     1     1     1     1     1     2     2     2     2     2
V19    2    2    2    2    2    2    2    2    2     2     2     2     1     1     2     2     2     2     2     2     2     2     2     2     2     2     2     2
V20    1    1    1    1    2    2    2    2    1     1     1     1     1     1     1     1     1     1     1     1     2     2     2     2     2     1     1     1
V21    2    2    2    2    2    2    2    1    1     1     1     1     1     1     2     2     2     2     1     1     1     1     1     1     1     1     1     1
V22    1    1    2    2    2    2    2    1    1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1
V23    2    2    2    2    1    1    1    1    1     2     2     2     2     2     2     2     2     1     1     1     1     1     1     1     1     1     2     2
V24    2    2    2    2    2    2    2    2    2     2     2     1     1     1     1     1     1     1     1     2     2     2     2     2     2     2     2     2
V25    1    1    1    1    1    1    1    1    1     1     1     2     2     2     2     2     2     2     2     2     2     2     2     2     2     2     2     2
V26    1    1    1    1    1    1    1    1    1     1     1     2     2     2     2     1     1     1     1     1     1     1     1     1     1     1     1     1
V27    2    2    2    2    2    2    2    2    2     2     2     2     2     2     2     2     2     2     2     2     2     2     2     2     2     1     1     1
V28    2    2    2    2    2    2    2    2    2     2     1     1     1     1     1     1     1     1     1     1     2     1     1     1     2     2     2     2
V29    2    2    2    2    1    1    1    1    1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1
V30    2    2    2    1    1    1    2    2    2     2     2     2     2     2     2     2     2     2     2     2     2     2     2     2     1     1     1     1
V31    2    2    2    2    2    1    1    1    1     1     1     2     2     2     2     2     2     2     2     2     2     2     2     2     2     2     2     2
V32    1    1    1    1    1    1    1    1    2     1     1     2     2     2     2     2     1     1     1     1     1     1     1     1     1     1     1     1
V33    2    1    1    1    1    1    1    2    2     1     1     1     1     1     1     1     1     2     2     2     2     2     2     2     2     1     1     1
V34    1    2    2    1    1    1    1    1    1     1     1     1     1     2     2     2     1     1     1     1     1     1     1     1     1     1     1     2
V35    1    1    1    1    1    1    2    2    2     2     1     1     2     1     1     1     1     1     1     1     1     2     2     2     1     1     1     1
V36    1    1    1    1    2    2    1    2    1     1     1     1     1     1     1     2     2     2     2     2     2     2     2     2     2     1     1     1
V37    2    2    2    1    1    2    1    1    1     1     1     1     1     1     1     1     2     2     2     2     2     2     2     2     2     2     1     1
V38    2    2    2    2    2    2    2    2    1     1     2     2     2     2     2     2     2     2     2     1     1     1     1     1     1     1     1     1
V39    2    2    2    2    2    2    2    2    2     2     2     1     1     1     1     1     1     1     2     2     2     2     2     2     2     2     2     1
V40    2    2    2    2    2    2    2    2    2     1     1     1     1     1     1     2     2     2     2     2     2     2     2     2     2     1     1     1
V41    2    2    2    2    2    2    2    2    2     2     2     2     1     1     1     1     1     1     1     1     1     1     1     1     1     2     2     2
V42    2    2    2    1    1    1    1    1    1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     2     2     2     2     2
V43    2    2    2    2    2    2    2    2    2     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1
V44    2    2    2    2    2    1    1    1    1     1     1     1     1     1     2     2     2     2     2     1     1     1     1     1     1     1     1     1
V45    2    1    1    1    2    2    2    2    2     2     2     2     2     2     1     1     1     2     2     2     2     2     2     2     2     2     2     1
V46    2    2    2    2    2    2    2    2    2     2     2     1     2     2     2     2     2     2     2     2     2     2     2     2     2     2     2     1
V47    1    2    1    1    1    1    1    1    1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1     1
V48    1    1    1    1    1    1    1    2    2     2     2     2     2     2     1     1     1     1     1     1     1     1     1     1     1     2     2     2
V49    2    2    2    2    2    1    1    1    1     1     1     1     2     2     2     2     2     2     2     2     2     2     2     2     2     1     1     1
V50    1    1    1    1    1    1    1    1    2     2     2     2     2     2     2     2     2     2     2     2     1     2     2     2     2     2     2     2
    c3m29 c3m30 c3m31 c3m32
V1      2     2     2     2
V2      1     1     1     1
V3      2     2     2     1
V4      1     1     1     1
V5      1     1     2     2
V6      1     1     1     2
V7      2     2     2     2
V8      1     1     1     1
V9      2     2     2     2
V10     2     2     2     2
V11     2     2     2     2
V12     1     2     2     2
V13     2     2     2     2
V14     2     2     2     2
V15     1     1     1     1
V16     1     1     1     1
V17     1     1     1     1
V18     2     2     2     2
V19     2     1     1     1
V20     1     1     1     1
V21     2     2     2     2
V22     1     1     1     1
V23     2     2     2     2
V24     2     2     2     2
V25     2     2     2     2
V26     1     1     1     1
V27     1     1     1     1
V28     2     2     1     1
V29     1     1     1     1
V30     1     1     2     2
V31     2     2     2     2
V32     1     1     2     2
V33     1     1     2     2
V34     1     1     1     1
V35     1     1     1     1
V36     1     1     1     1
V37     1     1     1     1
V38     1     2     2     2
V39     1     1     1     1
V40     1     1     1     1
V41     2     2     2     2
V42     2     1     1     1
V43     1     1     1     1
V44     1     1     1     1
V45     2     2     2     2
V46     1     1     2     2
V47     2     2     2     2
V48     2     2     2     2
V49     2     2     2     1
V50     2     2     2     2 
```

另一个名字是：表型

```
> phenotype
        RAPGEF2      CACNA1E       CACNB3        RASA2      CACNG6        PRKCG     CACNA1B      CACNA1F     CACNG3     CACNA1G        PRKCA     CACNA1D         SOS2
1  -0.247595001  0.053503367 -0.236269632 -0.198393959  0.30226149  0.034393665  0.13201747 -0.055123952 -0.4775578 -0.16406024 -0.601510801 -0.74241018  0.003437553
2   0.076554542 -0.296400594 -0.204362787 -0.083725326 -0.51309205  0.008746035  0.49724817 -0.141674911 -1.5563250 -0.28751925 -0.152694444 -0.83115868 -0.520475369
3  -0.327202333  0.001312523  0.013790261  0.074576720  0.23008238 -0.050573176 -1.04673228 -0.330784609  0.5481467 -0.84388147 -0.743829290 -0.55692338 -0.542878574
4  -0.007847655 -0.138671725 -0.149620332 -0.819362934 -0.11386931 -0.041000430 -0.16221890  0.157342905 -0.4304658 -0.04136305  0.140892816 -1.43966569 -0.502489598
5  -0.288891373 -0.453451438 -0.203315372 -0.432877782 -0.32638230 -0.079509208 -1.07767644 -0.239044759 -2.6685509 -0.34506117 -0.601583079  0.06418028 -0.447845591
6  -0.819438873 -0.186128793  0.010946957 -0.541158848 -0.05467246 -0.091256991 -0.14121849  0.120465369 -0.7412188 -1.45824366 -0.742750372 -0.65559390 -0.024424118
7   0.056713692  0.099570795 -0.140081980 -0.249675499 -0.54844575 -0.142449430 -0.17804642 -0.193517791 -2.8180865 -0.37995253  0.521983735 -0.13506427 -0.496292115
8  -0.415822882 -0.234501809  0.045971377 -0.501303875  0.10064320 -0.123989099 -0.18390119 -0.272184476 -2.3932719 -0.17459784  0.041698873 -0.58292029 -0.030478251
9   0.216626060 -0.055785714  0.102465484 -0.296597579 -0.63187464 -0.043925124 -0.73290772  0.086194905  1.2253629 -0.26787759 -0.186213820  0.21540883 -0.409209752
10 -0.172889555 -0.359033332  0.059976873 -0.122362142 -0.57597543 -0.039439871 -0.37358470  0.046816519 -0.2194930  0.44557540 -0.008582745  0.04681091 -0.151858633
11 -0.799370277 -0.390225142  0.092905430 -0.539360659 -0.46040156 -0.080978159 -1.35509517 -0.183647290 -2.0786691 -0.53105091 -0.537946690  0.15503760 -0.250068125
12  0.165948180  0.084380299  0.072471995 -0.257986088 -0.31888913 -0.113180297  0.09108201  0.081261902  0.4084345 -0.32413522 -0.410390899 -0.52705454 -1.311315609
13 -0.151699952 -0.345160750  0.024127039 -0.199062545 -0.35710011 -0.101713530 -1.52298182 -0.131191677 -1.4151031  0.13075608 -0.112750159 -0.09761248 -0.448443675
14 -0.064050378  0.058414370 -0.049131860 -0.438722188  0.46253165 -0.085058699 -0.48949571  0.312177213 -0.4383044 -0.13332403 -0.952470633 -0.10016991 -0.738450721
15 -0.252830650 -0.021360957 -0.054884002 -0.132821999  0.24029851  0.032595174 -0.28201065 -0.134742072 -1.2429264 -0.20965743 -0.266581307 -0.65461311 -0.026886166
16 -0.302939138 -0.237659778 -0.173316135 -0.433111666 -0.49102642 -0.169569976 -0.14919939 -0.024873565 -1.7566415 -0.11697234  0.250150721 -1.00971694 -0.314707578
17 -0.027397752 -0.220213983 -0.020104605 -0.260175395  0.36690904 -0.015439485 -1.64675598 -0.341331701  1.1341947  0.19718194  0.040220128  0.21718090 -1.082049767
18 -0.084826002  0.075130631  0.085664240 -0.516533930  0.05420691 -0.111368755 -0.54866864 -0.246852143 -0.1673859  0.54867571 -0.491091471 -0.64419595 -0.417058365
19  0.076420274 -0.198417039 -0.209613388  0.275960810  0.20461276 -0.016330089 -2.44087703  0.016533904 -0.9745876 -0.32916054 -0.886846124 -0.03904152  0.423648190
20 -0.341758547  0.027599210 -0.238241196 -0.122481806 -0.53322283 -0.041335840 -0.09748360  0.109385536  0.7184183 -0.42004508 -0.297868841  0.02331034 -0.176874436
21 -0.729225854 -0.366947864 -0.151319971 -0.766507590 -0.93109904 -0.120188998 -0.82125694 -0.069669901 -1.8344670  0.19827344 -0.121866097 -0.64905504 -0.309849450
22 -0.375156253  0.023848706 -0.084361744 -0.444354626 -0.66319529 -0.062962171 -1.20604478  0.168518715 -1.5501544  0.47227482 -0.209564431 -0.47454099 -0.057838134
23 -0.254021124  0.169933007 -0.110124957 -0.321290108 -0.25074586 -0.002748504 -1.67191531 -0.213003128 -0.6702960  0.06601284  0.419818706 -0.24339589 -0.900376250
24 -0.115377716 -0.069793465 -0.082424787 -0.207820569 -0.62402649 -0.057047717 -0.28566344 -0.343388680 -0.9703774 -0.05548410 -0.226484770 -0.73331271 -0.699834400
25 -0.049844861 -0.005899354 -0.014298567 -0.058495200 -1.32936915 -0.080242402  0.21312235 -0.469668455  0.3296792 -0.40816963  0.169496411 -0.06951457  0.678321997
26 -0.722770403  0.103085237 -0.107956995 -0.453234395 -0.79713145 -0.010894595 -0.02192121 -0.183129347 -0.4671715 -0.24454782  0.140808502 -0.16672267 -0.297979736
27  0.177156038 -0.352948087  0.126134036  0.009680394 -0.53116648  0.083284652 -2.56881648  0.040743856 -1.3867899 -0.30346968 -0.943847562 -1.27918873  0.074066589
28  0.031014348 -0.096368514 -0.191044463 -0.150761960 -0.34080995 -0.082406406  0.81100676  0.081447585 -0.4011565  0.46952945 -0.126056643 -0.39482906  0.487768932
29 -0.175479066 -0.406803418  0.060241581 -0.630242987 -0.04177606 -0.099102694 -1.77644280 -0.220901308 -1.0807459  0.25538082 -0.127072554 -0.28244767  0.077844220
30  0.067184617  0.135066792  0.061038582 -0.005188869 -0.28276832  0.002666423  1.11312551 -0.261943690  0.9199570 -0.65210434 -0.308977705 -0.74132895 -0.089614346
31  0.077892704 -0.235195609 -0.067162872 -0.207711784  0.02699528 -0.005653163 -1.61297664 -0.338387970 -0.2485027 -0.10887056  0.343968213  0.09719695 -0.452561385
32  0.142403286 -0.026388719 -0.065678040 -0.362428853 -0.19390021 -0.130526170 -1.21100755 -0.350326700 -1.2818116 -0.72894545 -0.654865598 -0.75242740 -0.379810157
33 -0.001080476 -0.290697156  0.011388500  0.139363744  0.27888665 -0.100895638  0.39220173 -0.346996776 -0.7863979 -0.52910994 -0.558958463  0.31595835 -0.710613795
34  0.224116945 -0.185072933  0.086483429 -0.348059767 -0.25522243 -0.126570401 -2.48462353 -0.402525824 -1.8282210 -0.71284302  0.003787240  0.33055507 -0.485361798
35 -0.254131666 -0.181962657  0.134810146 -0.144177046 -0.42946649  0.006665253 -1.31883436 -0.233832760 -0.8644715  0.02096703 -0.386481233 -0.72159749  0.091061479
36  0.078173409  0.069614224 -0.027333201 -0.338889055 -0.08953657 -0.048366331 -1.05945722 -0.005647055 -0.5515289 -0.99689326 -0.499325729  0.25250542 -0.630618039
37 -0.383263187  0.050446587  0.042835279 -0.187032348  0.10888308 -0.044352563 -0.14934550 -0.123438315  1.1205628 -0.59339281 -0.824166347 -0.50010055  0.362946526
38  0.155765532 -0.095113895 -0.028232352 -0.341382444 -0.28993519 -0.063198747 -0.74942280 -0.262175258  0.3796110 -0.64149439  0.038476888 -0.15428205 -0.070443511
39 -0.352871059 -0.154463839 -0.040044333 -0.215973910 -0.70080752 -0.030485881 -1.59167190 -0.018228487 -2.7482696 -0.81423002 -0.990327664  0.02797165 -0.961506882
40 -0.027887194 -0.500539888  0.101565681  0.026081728 -0.37318368  0.030271868 -1.56720146  0.114323657 -0.9604690 -0.83847006 -0.616284751 -0.22106937 -0.817229295
41 -0.116324675  0.141997059  0.011066622 -0.637030608 -0.06816308 -0.139064501 -0.21884155 -0.133162057  0.3200013  0.40302112  0.196245908 -0.44456908 -0.060186732
42 -0.011563437 -0.097908807  0.010180963 -0.356297511  0.25810039 -0.053495480 -1.23448236 -0.075325095 -2.1873328  0.25853977  0.024608949 -0.24320912 -0.865864499
43 -0.473180079 -0.175778274 -0.153653640 -0.492266908 -0.72545341 -0.089492114 -1.52409341 -0.113111386 -1.8098738 -0.23081989 -0.143859625 -0.33247673 -0.930370376
44 -0.301982544 -0.276093471 -0.172829397 -0.165867999 -0.09716023 -0.074000281 -1.29494575 -0.284384336 -0.3640354 -0.98837691 -0.583165895 -0.22244048 -0.389223572
45 -0.035837132  0.089487455  0.043398895 -0.261321417 -0.14740720  0.086069259  0.50424191 -0.435393685 -0.6916679  0.08837666 -0.764933697 -0.15527777 -0.180500006
46 -0.283577759  0.033526022 -0.053893390 -0.276804767 -0.38757922  0.049021497  1.11676571 -0.165603000 -1.4368988  0.08869823  0.165745244 -0.43123024 -0.409150399
47 -0.579455295  0.045838903 -0.174331523 -0.503703045 -0.51013334 -0.018538629  0.24724654 -0.382273065 -0.2014670 -0.67669484 -0.653328789  0.46375442 -0.481676959
48 -0.308546234 -0.047014302 -0.005449878 -0.350135893 -0.16086990 -0.090971861  0.11738860 -0.360362823 -0.3117357 -0.92804263 -0.430577252  0.38097823 -0.426938081
49 -0.165320629 -0.436561117 -0.022108887 -0.412614936  0.20412609  0.003279052 -0.77152209  0.211526672 -0.5851201 -0.18290809 -0.284230585  0.30449400 -0.666071768
50 -0.142082710  0.195017303 -0.121702032  0.077439475 -0.47426071  0.055089372 -0.82942407 -0.249394753  0.5139078 -0.52850805 -0.707774591  0.02486043 -0.529796003
        CACNG5     CACNA1A     RASGRF1       MRAS       RRAS2      RASGRP3        HRAS      RASGRF2       NRAS     RASGRP1         KRAS    RASGRP2
1  -1.08126573 -0.10466468  0.16163511  5.2884330   1.4807031  1.367194844  -5.3632946  8.854311810  -1.590394  5.46299955   3.39043935 -0.6188210
2  -0.20103987  0.02859079 -4.04956365  6.8065804   9.7156082  2.358011759   7.5529682 -1.371397362   5.512496  2.38105873  -4.31024938 -2.9758226
3  -0.56279304 -0.49473575  0.93100155 13.3018509   4.7819748 -0.830227776   7.1269586  1.639458379   5.579675  1.92566166 -10.04349925 -3.9823054
4  -0.17721434 -0.13495743 -4.18967059  7.7963292   2.4795673  0.849823268  16.4843104  1.625120794   2.538493 -1.96693411  -1.06650587  2.9583095
5  -0.21284845 -0.41776136 11.57622331  7.8696230  25.3334550  0.525216862  21.7506102  1.804542827  27.144583  1.33103943  14.91107071  4.3580818
6   0.26966929 -0.57921249 -3.81118227 -1.7711352   2.6537342  2.381451473   0.3413279  0.002745248  11.787951 -2.72785260   5.81449916  1.1492321
7  -0.05721931 -0.61373510  3.20661730 17.0161591   8.3848898  9.128073635  10.0460744  7.427485748   6.423633  8.58609614   5.14330065  0.2455554
8  -0.23483474 -0.30007284  7.44882239 -4.1520715   2.5809601  0.007694412  14.4026853  6.009882772   1.973626  5.85650616  -4.99508071  1.4778224
9  -0.30401185 -0.23601064  0.61950230  2.1421284  15.4745282 -0.515190084   5.7490335 -3.364087292  12.305191  0.68371891   0.70766236  0.7915359
10  0.03069795  0.17789637  5.48077430  0.1797954   1.5320631 -0.612153126 -11.1569228  2.314820314   5.364269 -1.03632032   7.25132489  3.9454336
11 -0.67484374 -0.24910596  2.32388243 17.9765927   0.9794240 10.700691074   7.1050062  4.714036496  15.891228 -4.31287607   7.62253612  5.1733717
12 -0.23985708 -0.38664533  5.49113542  6.9358357  20.5868853 -0.490459011  19.0955840 -0.187311045 -11.228341 -2.01774050   2.46021292  2.9611938
13 -0.17565650 -0.26472802 -3.66145265 12.2382531  18.9846037 -1.676584866  15.2614596  4.241818360  11.685053 -1.41970648  -8.67808713  5.7914843
14 -0.66123979 -0.73403494 -1.47051990 -9.4605317   7.9187982  1.649205050   5.5260746  2.236724615  -5.689584  0.08904104  -7.61932439 -2.3718501
15 -0.25993662 -0.36155808  0.47540397  0.2766627 -12.6713829  3.527719828  16.7505891 -4.031521995  -6.139259  1.16441221  -6.18252342  1.0479288
16 -0.03146197 -0.45563938  7.13155463 -8.8844448  10.2941475  6.470602700  11.8131578  2.036032005  -3.021039  1.27196373  16.98691230  5.9919408
17  0.15062972 -0.14899016 -5.17104361 27.1526356  10.6209803  8.107969651  11.0779712  5.968404297  13.698359  2.93330073  20.28969711 -1.1704762
18 -0.25937867 -0.39833982 -0.43088475 -5.6251327  11.3899990 -0.318345728   3.1713730  0.760007843   5.409240 -3.68088307 -10.11778528  4.8975433
19 -0.87451283 -0.05959917 -2.53664942 29.4869423  19.1536567 -4.591416100  27.3860278  3.156809354   7.025175  4.72109032  26.79484568  2.0115602
20 -0.67964587  0.27642731 -7.18238442  5.0073861   9.8321189  0.380995576   1.9077432 -0.585178489  -3.439573  2.59522601  -8.74681890 -0.6800699
21 -0.49629567 -0.56934938  2.23942230 22.8194269   5.2645346 -2.428571330   6.1776451  2.611162565  18.775754  1.10296129  12.87445853 -4.3216192
22  0.00724720 -0.70303883 -1.43444204  1.8773895   9.1167518  3.582722007   9.7741579  0.028240658   4.460745  2.27952502  14.99544664 -0.9230170
23 -0.10643328 -0.67769320  6.75704004  3.0189378  -0.9081308  2.255448682   9.2941211  2.151332408  -2.619788  1.16186606  -5.75794077  3.8895972
24  0.35597240  0.06858421 -1.72085135 10.4151256  -0.1591937  1.167127427   4.6532448  0.296189520 -10.270647 -0.35558702  16.91723551 -1.0866788
25  0.10449039  0.22289001  6.69617230  6.2155570  10.8483718 -1.374067174   3.7386102  1.255906864   5.792042  6.56478190   5.65215300  4.2867125
26  0.11049705 -0.26850303 -2.60011742  1.7766863  -7.9563835 -1.795606943   2.2133029 -4.103202628   5.503321 -1.80881337   6.71979360  5.2476183
27 -0.43247910  0.06570798  3.12944595 26.3058088  23.7036553  1.572823145  41.4230817 -3.123108372  44.661343  6.00690771  12.20911459  9.3681238
28 -0.06832140 -0.47558618 -0.05898754 10.2791424  -1.2785850 -1.881395391  -7.0972730  0.283137062  11.300423 -5.42201881   7.69205240  3.6647710
29 -0.14796844 -0.31242843 -7.13439956  8.8376481  13.4659132  1.461275344   4.1133381  2.784203145  12.496497  0.41425657   6.27234388  3.2425929
30  0.33267383  0.07562561  4.30418636 11.5135055  -5.5710269  0.595018978  20.2956727 -1.999030542  23.338891  1.79473828  25.14227894  3.5624672
31 -0.13135999  0.03429504  3.12945679 -1.7988365  -0.8664450 -0.925567331  -3.7275570 -3.950239410   7.792904 -2.94586593  -4.80659759 -5.1385471
32 -0.65278805 -0.24207506 -0.80329023 -1.5381825  -7.0147661 -1.371024797  11.1363243 -0.703554423   9.848548  0.77097874  -0.01193523  2.0874871
33 -0.27298162  0.36527044 -0.44873371 -3.2108142  15.4038635  5.626084802   7.3734731 -0.818813872  -2.329578 -1.22258273   5.73140635  7.6681611
34  0.24697363  0.04004560  3.55251026 10.9369448  17.4436080  4.964061402  -4.1149183 -0.594522702  30.979488  1.34426338  10.79636312  3.7373761
35 -0.23005566  0.07016680  8.61098096  7.2749938   6.1983372 -1.931047305  11.2845415 -0.255800684 -12.768165  0.65177004   7.72055325 -9.8395187
36  0.07745730 -0.07007581  4.21970890 16.3408506  13.6502613 -2.764005594   4.7150426 -3.352393845   7.726116  1.05046858 -11.41243533 -2.5015196
37 -0.68399493  0.23974508 -0.17544534 -5.5184731   5.8961029 -4.510778693  17.5402976  4.658695314   3.495335  4.32696570   6.21866892  2.9641552
38 -0.04013683 -0.78642712 -3.96729208  3.4475599  -1.2403075  2.536697158  -7.7241472  4.334766041  -9.963346 -0.64687173  17.34032967  1.8524765
39 -0.44495174 -0.19879868  1.92668453  6.8470802  21.4526006  0.455531935  27.9513567 -1.370725185   1.955942  3.59422972  24.79601058 -4.6690074
40 -0.13325651 -0.17514241 -2.82513210 21.0013199  -2.2907174 -1.494103403  18.4596623  2.297606605  -2.724228  2.31410400   0.75443901  0.1896653
41 -0.04049955 -0.30950401  1.08764034 12.0828373   3.2890383  5.742280231 -11.8575537  1.698274301  -2.021231  1.42562103   0.06413767  2.3617709
42  0.11173966 -0.66458170  7.85442282  9.1662041  30.2460296  1.990946110  16.4452737  5.687569677  11.302004  8.06994470  23.60159352 -3.6748499
43  0.22047452 -0.53158026  0.50466780 19.9152823   8.9427850 -0.637162403  11.3976456  4.603380514   8.462772 -1.49806588  15.98236455  2.5163547
44 -0.36319770 -0.22408093  2.86754885  1.5941018  -7.0354188  0.740816157   5.6042852 -1.145312539  -4.309770 -4.60556357   8.99063162  4.1639967
45 -0.45275458 -0.08379418 -5.95422943 16.4861889  15.9877620 -0.807411042   8.0873218  4.025147480  -3.494243  1.36140592   0.17167116  0.5730415
46 -0.02849445 -0.22411911  3.18637465  7.3235045  12.1141402 -2.049762449  -5.7373841  1.660312041  16.389530  4.32823877   2.31488480 -1.0958932
47 -0.46860175 -0.13260285  4.40493794  8.4949938   3.9516605 -1.243255229  -1.6795379 -0.013959038   4.140808 -3.39817037   4.27670204 -1.6862091
48 -0.41927264 -0.70467223  3.69590189 -6.4179034  -2.8701968  2.692561594  20.7038768  0.392052464  -2.993030  1.25742496  -5.18694095 -6.7182529
49 -0.02718469 -0.35311492  1.12532546  0.4862352   0.3023580 -1.603408864   1.2115986  0.845596944   9.048511  3.92056012  -8.67131197 -2.3896462
50 -0.32380034  0.06106854  3.30870522 -4.9429947  15.9727621 -0.159746543   7.7858779  1.608172511   4.614853  1.15746997  -3.63746568 -1.5704711 
```

现在我想创建一个新的data.frame，它是基因型和表型的组合。特别是，一列是第一个标记的基因型（在markerinfo中），下一列是表型中的相应表型。我当然想对markerinfo中的所有标记执行此操作。但是，如您所见，有一些重复形式的标记。尽管如此，这些应该被视为不同的标记并且仍然有一个列。由于数据的进一步处理，我需要这种交替形式。

如果这可以帮助您回答我的问题，请提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T08:32:56.740

我不确定我是否理解正确。您需要学习如何创建一个[最小的可重现示例](https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example)，尤其是如何使用`dput`.

我调用了 data.frames `markerinfo`，并且`genotype`只`phenotype`使用了一小部分数据进行测试。为了使我的解决方案起作用，markerinfo 中的每个基因型和表型都必须存在于相应的 data.frames 中。（因此，我必须更改 markerinfo 中的表型，以使其与我用于测试的缩减数据集一起使用。）

```
result <- lapply(seq_along(markerinfo$marker),function(i) {
  x <- as.character(markerinfo$marker[i]) 
  res <- cbind(genotype[,x],phenotype[,as.character(markerinfo[i,"pheno"])])
  colnames(res) <- c(paste('geno',x,sep="_"),paste('pheno',as.character(markerinfo[i,"pheno"]),sep="_"))
  res
  }
)

result <- do.call('cbind',result) #combine lists

head(result)
     geno_c3m22 pheno_CACNA1E geno_c3m22 pheno_CACNA1F geno_c3m16 pheno_CACNA1G geno_c3m20 pheno_RAPGEF2
[1,]          2   0.053503367          2   -0.05512395          2   -0.16406024          2  -0.247595001
[2,]          2  -0.296400594          2   -0.14167491          2   -0.28751925          2   0.076554542
[3,]          2   0.001312523          2   -0.33078461          2   -0.84388147          2  -0.327202333
[4,]          1  -0.138671725          1    0.15734291          1   -0.04136305          1  -0.007847655
[5,]          1  -0.453451438          1   -0.23904476          2   -0.34506117          1  -0.288891373
[6,]          1  -0.186128793          1    0.12046537          2   -1.45824366          1  -0.819438873
#this is a matrix, use as.data.frame to turn it into a data.frame 
```

# plsql - 我如何从 plsql update 语句中的变量传递列名

> ID：13762101
> 
> 赞同：0
> 
> 时间：2012-12-07T11:22:59.220
> 
> 标签：plsql

```
DECLARE

  v_name  A.TRANSACTION_TYPE%TYPE   :='SALARY';
  v_salary    A.SALARY%TYPE := 1000;

BEGIN

  update A set v_name= v_salary where EMPID = 517; 
-- PL/SQL: ORA-00904: "v_name": invalid identifier
--update A set SALARY = 1000 where EMPID = 517;

END;

/ 
```

我的想法是更新表列，但这些列名存储在变量中。有没有办法从变量传递列名？除了立即执行之外还有其他选择吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:06:12.583

不确定这是否适用于您的情况，但我已经[编写了解决方案](https://stackoverflow.com/questions/2630068/sqlplus-spooling-to-multiple-files-from-pl-sql-blocks)，其中我在 SQL *Plus 中编写了一个脚本，它“编写”（使用`dbms_output.put_line`甚至只是`prompt`）另一个执行查询的脚本，并且这些查询中的列/表是由 SQL* Plus 脚本中的逻辑决定。然后我会将我的第一个脚本的输出作为脚本执行，它会执行动态生成的查询，而无需`execute immediate`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:46:44.247

以下想法可能适用于键入相同的多个列...正如所写，它每次都会更新给定记录的所有列，但只有 指定的列`v_name`将更改为中设置的值`v_value`；其他列只是简单地更新为其现有值。可以使用 using 或其他类似的条件运算符来实现这个`DECODE`想法`NVL`。

```
 declare

 v_name varchar2(20):= 'SAL';
 v_value emptest.sal%TYPE := 5000;

 begin

 update emptest
 set sal = ( select case when v_name = 'SAL' then v_value else sal end from dual),
 comm = ( select case when v_name = 'COMM' then v_value else comm end from dual)
 where empno = 7369;

 commit;

 end; 
```

# mysql - 具有多个求和的Mysql计算不起作用

> ID：13762103
> 
> 赞同：1
> 
> 时间：2012-12-07T11:23:11.567
> 
> 标签：mysql, sql-order-by

我对来自两个不同表的两列进行查询（通过我的查询中的左连接连接），我想按我要查找的术语的出现对搜索结果进行排序。我想出了这个作为语句中的排序变量，这可能不优雅，但工作正常：

`((LENGTH(table1.column)-LENGTH(REPLACE(lower(table1.column),lower('$term'),'')))/LENGTH('$term') AS sort_frequency`

$term 是我的搜索词，在查询结束时我这样做：`ORDER BY sort_frequency DESC`.

现在出现了困难：两个表分别计算工作正常，但是当我想通过加法连接两个表时，table2 的结果总是排在 table1 的结果之前，并且没有按发生顺序排列。我的陈述如下所示：

`(((LENGTH(table1.column)-LENGTH(REPLACE(lower(table1.column),lower('$term'),'')))/LENGTH('$term')) + ((LENGTH(table2.column)-LENGTH(REPLACE(lower(table2.column),lower('$term'),'')))/LENGTH('$term'))) AS sort_frequency`

我需要这个计算，因为搜索结果来自两个不同的表，但应该在一个页面上一起排序（假设：一个表是关于具有某些关键字的图像，第二个表是关于具有某些关键字的视频，一旦我搜索一个特定的关键字我不在乎它是图像还是视频，我想要一个最适合我的关键字查询的关键字）。

你知道为什么计算不起作用吗？我的错误是什么？我试过添加/删除括号，但这没有帮助。

任何帮助，将不胜感激，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:42:03.863

在搜索出现之前，您是否尝试过使用 UNION 来组合这两个表？我的建议是使用以下内容：

```
SELECT((LENGTH(newcolumn)-LENGTH(REPLACE(lower(newcolumn),lower('$term'),'')))/LENGTH('$term') AS sort_frequency FROM table1.column UNION table2.column AS newcolumn 
```

# sharepoint-2013 - SP2013 VS2012 中缓存的凭据不正确

> ID：13762105
> 
> 赞同：2
> 
> 时间：2012-12-07T11:23:16.760
> 
> 标签：sharepoint-2013

当我尝试部署到 SP2013 时，出现以下错误：

```
Error occurred in deployment step 'Install app for SharePoint': The System Account cannot perform this action 
```

在较早的某个时间点，我将场设置用户详细信息放入远程站点的登录弹出窗口中。不幸的是，这些细节被缓存在某个地方，我找不到或更新它们。

有人告诉我他们住在哪里吗？

埃德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:57:29.360

Visual Studio 正在使用 Windows 的凭据管理器来存储凭据。查看

控制面板 | 所有控制面板项目 | 凭证管理器。

您要查找的凭据应列在“通用凭据”部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-18T12:55:06.927

这是错误的真正原因：

当您以系统帐户（本地管理员）身份登录并尝试安装和部署 SharePoint 应用程序时，将出现上述错误。

这是 SharePoint 2013 RTM 中的一项更改，不再支持系统帐户从市场上部署或购买任何应用程序。它在 RT 中得到支持，但由于安全原因现在被禁止。

更多详情请查看以下链接：

[http://aanuwizard.com/2012/12/07/article-14-from-30-system-account-can-not-deploy-or-purchase-an-app-in-sharepoint-2013-rtm/](http://aanuwizard.com/2012/12/07/article-14-from-30-system-account-can-not-deploy-or-purchase-an-app-in-sharepoint-2013-rtm/)

# html - 是否可以为显示设置为 table-cell 的元素设置 Colspan/Rowspan

> ID：13762106
> 
> 赞同：1
> 
> 时间：2012-12-07T11:23:16.630
> 
> 标签：html, css

是否可以为`Colspan/Rowspan`显示设置为表格单元格的元素进行设置。如果是这样，你怎么能这样做？我正在尝试编写一个 JavaScript 函数来制作我的布局。该函数将采用单元格数、行数和`colspan/rowspan`属性来进行布局。我正在尝试实现如下功能：[http ://www.youtube.com/watch?v=KRyEL-T_wRU&feature=player_embedded](http://www.youtube.com/watch?v=KRyEL-T_wRU&feature=player_embedded)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:32:54.797

不，col/row-span 属性没有 css 替代品。

使用真实的表格或网格系统（例如[960gs](http://960.gs/)）来完成这样的任务。

# ofbiz - 是否可以在 opentaps/OFBiz 中更改partyID？

> ID：13762107
> 
> 赞同：0
> 
> 时间：2012-12-07T11:23:17.173
> 
> 标签：ofbiz, opentaps

我正在尝试在 opentaps 1.5.0 中创建一个有意义的组（聚会组），我注意到系统上有一些组具有有意义的聚会 ID。但是，我在系统上找不到可以创建有意义的派对 ID 的位置。目前系统只分配自动生成的号码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T10:07:37.367

你必须为此选择。

1) 您可以创建各方作为种子数据的一部分。这就是这些政党的创建方式

2）你应该在ofbiz的party应用和opentaps的crm中公开party id字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T20:45:46.413

您可以从后端创建有意义的 ID。同样在后端的某个地方它是自动生成的，然后您可以导入 XML 并将所需的 ID 放在 xml 字段中，然后将其导入 OFBiz。

# php - 具有其他文件夹中资源的虚 URL

> ID：13762112
> 
> 赞同：2
> 
> 时间：2012-12-07T11:23:25.853
> 
> 标签：php, apache, mod-rewrite

我想为我的网站创建较短的链接，例如

```
site.come/u/1 
```

代替

```
site.com/user.php?u=1 
```

我玩过，`mod_rewrite`但老实说不知道我在用它做什么，我可以创建 url 但是当资源被加载到页面上时，它们被加载`/u/css/core.css`而不是`/css/core.css`

我正在使用相对 URL 加载 css/images/js，有没有办法让重写规则排除某些文件夹，而不必将我的所有代码更改为绝对 URL？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:38:59.973

您可以尝试：

```
RewriteCond %{REQUEST_URI} ^(css|js|images)/.*$ [NC]
RewriteRule ^(.*)$ $1 [L] 
```

并将其放在**任何**其他规则之前。

我在[这里](http://htaccess.madewithlove.be)测试过它并且有效！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T11:36:58.797

好吧，你几乎是在回答你自己的问题——而不是使用相对路径，你需要为你的 css 使用绝对路径。

您的浏览器现在将页面视为 www.site/u/user.php，即您需要使用 ../css/core.css。如果您的站点位于根目录中，/css/core.css 可能就足够了，但使用完整路径更安全（即 echo `$webpath."css/core.css"`where $wehpath 很可能类似于`$webpath="http://".$_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:34:51.213

您应该使用绝对路径，一切都会好起来的。

例如，您可以这样做：

```
<?php 
$baseURL = basename($_SERVER['SCRIPT_FILENAME']); 
?>
<link href="<?php echo $baseURL; ?>/css/core.css" rel="stylesheet" type="text/css" /> 
```

# windows - 使用 boost::filesystem::path 作为 std::map 中的键

> ID：13762113
> 
> 赞同：3
> 
> 时间：2012-12-07T11:23:26.660
> 
> 标签：windows, boost, boost-filesystem

所以 std::map 想要排序键类型，但我遇到了问题：

"a/b" < "a/c" < "a//b" 但 fs::equivalent("a/b", "a//b")

"a/b" < "a/c" < "a\b" 但 fs::equivalent("a/b", "a\b")

我如何规范化足以创建排序的路径？这甚至可能吗？我尝试在自定义比较运算符中使用 path::generic_string() ，但它不起作用。fs::equivalent() 也无济于事，因为实现相等性对于 std::map 是不够的，它需要排序。这也是为什么这个问题不是[如何使用 boost::filesystem “规范化”路径名的重复问题的原因？](https://stackoverflow.com/questions/1746136/how-do-i-normalize-a-pathname-using-boostfilesystem).

上下文：仅限 Windows，Boost 1.49，文件系统 3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:16:57.370

为了使路径具有可比性，您需要将它们转换为**规范**表示，然后通过字符串进行比较。规范路径是绝对的、规范化的并且已删除符号链接。Boost 提供规范的 AFAIK。因为需要解析符号链接，所以调用规范需要访问文件系统。

# python - 合并两个数据框并使用多索引创建一个新数据框

> ID：13762121
> 
> 赞同：1
> 
> 时间：2012-12-07T11:23:51.903
> 
> 标签：python, dataframe, pandas, multi-index

我都，

我在 Pandas 中有两个数据框：

**一个**：

```
In [96]: a
Out[96]: 
      count  mean   std  min    max   25%   50%  75%
10m  604656  4.19  2.43    0  25.92  2.43  3.71  5.5

In [98]: a.to_dict()
Out[98]: 
{'25%': {'10m': 2.429999828338623},
 '50%': {'10m': 3.7100000381469727},
 '75%': {'10m': 5.5},
 'count': {'10m': 604656.0},
 'max': {'10m': 25.920000076293945},
 'mean': {'10m': 4.1893915969076261},
 'min': {'10m': 0.0},
 'std': {'10m': 2.4321994530033586}} 
```

和**b**：

```
In [97]: b
Out[97]: 
              count  mean   std  min    max   25%   50%   75%
0.0_90.0     119842  3.34  1.72    0  14.37  2.08  3.06  4.37
180.0_270.0  234074  5.11  2.82    0  25.92  2.99  4.64  6.82
270.0_360.0  126376  3.79  2.19    0  19.55  2.12  3.40  5.13
90.0_180.0   124364  3.67  1.83    0  14.93  2.37  3.40  4.70

In [99]: b.to_dict()
Out[99]: 
{'25%': {'0.0_90.0': 2.0799999237060547,
  '180.0_270.0': 2.9900000095367432,
  '270.0_360.0': 2.119999885559082,
  '90.0_180.0': 2.3681280016899109},
 '50%': {'0.0_90.0': 3.0579087734222412,
  '180.0_270.0': 4.6399998664855957,
  '270.0_360.0': 3.4000000953674316,
  '90.0_180.0': 3.4006340503692627},
 '75%': {'0.0_90.0': 4.369999885559082,
  '180.0_270.0': 6.8199996948242188,
  '270.0_360.0': 5.130000114440918,
  '90.0_180.0': 4.6960808038711548},
 'count': {'0.0_90.0': 119842.0,
  '180.0_270.0': 234074.0,
  '270.0_360.0': 126376.0,
  '90.0_180.0': 124364.0},
 'max': {'0.0_90.0': 14.369999885559082,
  '180.0_270.0': 25.920000076293945,
  '270.0_360.0': 19.549999237060547,
  '90.0_180.0': 14.930000305175781},
 'mean': {'0.0_90.0': 3.3417930869221379,
  '180.0_270.0': 5.1125810579269269,
  '270.0_360.0': 3.7938859684522601,
  '90.0_180.0': 3.670476718299061},
 'min': {'0.0_90.0': 0.0,
  '180.0_270.0': 0.0,
  '270.0_360.0': 0.0,
  '90.0_180.0': 0.0},
 'std': {'0.0_90.0': 1.7153268584149644,
  '180.0_270.0': 2.8194581011555386,
  '270.0_360.0': 2.1909571297061241,
  '90.0_180.0': 1.8334834361369423}} 
```

我想将两个数据帧合并到一个新的数据帧中，其中包含一个多索引，例如：

**新的_df**：

```
 count  mean   std  min    max   25%   50%   75%
10m   all          604656  4.19  2.43    0  25.92  2.43  3.71  5.5
      0.0_90.0     119842  3.34  1.72    0  14.37  2.08  3.06  4.37
      180.0_270.0  234074  5.11  2.82    0  25.92  2.99  4.64  6.82
      270.0_360.0  126376  3.79  2.19    0  19.55  2.12  3.40  5.13
      90.0_180.0   124364  3.67  1.83    0  14.93  2.37  3.40  4.70 
```

具有多索引 ('10m','all') 的元素是**a**，接下来的行是**b**。

有人知道如何在 Pandas 中实现这一目标吗？

非常感谢，

格雷格

**编辑：**

大家好，

我向前移动并扩大了高度。我现在有一个问题，因为高度和扇区没有从低到​​高排序，也没有从低扇区到高扇区排序。

这就是我得到的：

```
In [141]: df_stats_windSpeed
Out[142]:
                        count  mean   std  min    max   25%   50%    75%
Height Sector                                                           
10m    All             604656  4.19  2.43    0  25.92  2.43  3.71   5.50
       [0.0, 90.0[     119842  3.34  1.72    0  14.37  2.08  3.06   4.37
       [180.0, 270.0[  234074  5.11  2.82    0  25.92  2.99  4.64   6.82
       [270.0, 360.0]  126376  3.79  2.19    0  19.55  2.12  3.40   5.13
       [90.0, 180.0[   124364  3.67  1.83    0  14.93  2.37  3.40   4.70
140m   All             604656  7.85  3.63    0  35.20  5.19  7.70  10.20
       [0.0, 90.0[     116374  6.69  2.89    0  22.86  4.49  6.67   8.80
       [180.0, 270.0[  243590  8.95  3.83    0  35.20  6.29  8.86  11.37
       [270.0, 360.0]  135292  7.22  3.40    0  29.81  4.84  6.98   9.23
       [90.0, 180.0[   109400  7.39  3.46    0  20.91  4.62  7.31  10.10
200m   All             604656  8.47  4.08    0  34.88  5.38  8.21  11.20
       [0.0, 90.0[     113475  7.07  3.25    0  24.56  4.57  6.92   9.45
       [180.0, 270.0[  242157  9.80  4.30    0  34.88  6.65  9.74  12.71
       [270.0, 360.0]  143254  7.75  3.74    0  33.73  5.08  7.48  10.00
       [90.0, 180.0[   105770  7.93  3.96    0  21.54  4.75  7.61  10.86
20m    All             604656  4.82  2.60    0  27.69  2.99  4.33   6.18
       [0.0, 90.0[     116748  3.91  1.81    0  15.59  2.64  3.65   4.95
       [180.0, 270.0[  235304  5.83  2.99    0  27.69  3.67  5.32   7.61
       [270.0, 360.0]  126961  4.35  2.34    0  21.65  2.61  3.93   5.71
       [90.0, 180.0[   125643  4.22  1.96    0  15.98  2.86  3.98   5.29
40m    All             604656  5.68  2.77    0  29.39  3.81  5.29   7.10
       [0.0, 90.0[     120426  4.80  1.99    0  17.69  3.46  4.69   5.97
       [180.0, 270.0[  238381  6.65  3.13    0  29.39  4.48  6.16   8.45
       [270.0, 360.0]  128104  5.36  2.63    0  25.19  3.55  4.98   6.81
       [90.0, 180.0[   117745  4.96  2.11    0  16.79  3.49  4.90   6.22
80m    All             604656  6.84  3.12    0  32.28  4.69  6.66   8.65
       [0.0, 90.0[     119330  5.91  2.44    0  20.74  4.16  5.95   7.58
       [180.0, 270.0[  239146  7.80  3.38    0  32.28  5.54  7.54   9.74
       [270.0, 360.0]  133220  6.42  3.02    0  27.94  4.37  6.15   8.11
       [90.0, 180.0[   112960  6.29  2.71    0  19.53  4.24  6.38   8.28 
```

我想对多索引进行排序，使高度顺序为：10、20、40、80、140 和 200m；和扇区：'All','[0.0, 90.0[','[90.0, 180.0[','[180.0, 270.0[','[270.0, 360.0]'。**我试图像这样重新索引，但它不起作用**：

```
In [255]: df_stats.reindex(index=['10m','20m','40m','80m','200m','140m'],level=0)
In [256]: df_stats.reindex(index=['All','[0.0, 90.0[','[90.0, 180.0[','[180.0, 270.0[','[270.0, 360.0]'],level=1) 
```

这是 df 字典：

```
In [257]: df_stats_windSpeed.to_dict()
Out[257]: 
{'25%': {('10m', 'All'): 2.429999828338623,
  ('10m', '[0.0, 90.0['): 2.0799999237060547,
  ('10m', '[180.0, 270.0['): 2.9900000095367432,
  ('10m', '[270.0, 360.0]'): 2.119999885559082,
  ('10m', '[90.0, 180.0['): 2.3681280016899109,
  ('140m', 'All'): 5.1884875297546387,
  ('140m', '[0.0, 90.0['): 4.4935483932495117,
  ('140m', '[180.0, 270.0['): 6.2855626344680786,
  ('140m', '[270.0, 360.0]'): 4.8426017761230469,
  ('140m', '[90.0, 180.0['): 4.6205065250396729,
  ('200m', 'All'): 5.3844937086105347,
  ('200m', '[0.0, 90.0['): 4.572603702545166,
  ('200m', '[180.0, 270.0['): 6.6515130996704102,
  ('200m', '[270.0, 360.0]'): 5.0821070671081543,
  ('200m', '[90.0, 180.0['): 4.749258279800415,
  ('20m', 'All'): 2.9900000095367432,
  ('20m', '[0.0, 90.0['): 2.6400001049041748,
  ('20m', '[180.0, 270.0['): 3.6700000762939453,
  ('20m', '[270.0, 360.0]'): 2.6099998950958252,
  ('20m', '[90.0, 180.0['): 2.8554879426956177,
  ('40m', 'All'): 3.8135370016098022,
  ('40m', '[0.0, 90.0['): 3.4552559852600098,
  ('40m', '[180.0, 270.0['): 4.4779624938964844,
  ('40m', '[270.0, 360.0]'): 3.5464469790458679,
  ('40m', '[90.0, 180.0['): 3.4928045272827148,
  ('80m', 'All'): 4.6858876943588257,
  ('80m', '[0.0, 90.0['): 4.1649158000946045,
  ('80m', '[180.0, 270.0['): 5.5375603437423706,
  ('80m', '[270.0, 360.0]'): 4.3738168478012085,
  ('80m', '[90.0, 180.0['): 4.2378913164138794},
 '50%': {('10m', 'All'): 3.7100000381469727,
  ('10m', '[0.0, 90.0['): 3.0579087734222412,
  ('10m', '[180.0, 270.0['): 4.6399998664855957,
  ('10m', '[270.0, 360.0]'): 3.4000000953674316,
  ('10m', '[90.0, 180.0['): 3.4006340503692627,
  ('140m', 'All'): 7.701094388961792,
  ('140m', '[0.0, 90.0['): 6.6736810207366943,
  ('140m', '[180.0, 270.0['): 8.8593416213989258,
  ('140m', '[270.0, 360.0]'): 6.9792094230651855,
  ('140m', '[90.0, 180.0['): 7.3094825744628906,
  ('200m', 'All'): 8.2149920463562012,
  ('200m', '[0.0, 90.0['): 6.9200782775878906,
  ('200m', '[180.0, 270.0['): 9.7363834381103516,
  ('200m', '[270.0, 360.0]'): 7.4800474643707275,
  ('200m', '[90.0, 180.0['): 7.6083860397338867,
  ('20m', 'All'): 4.3299999237060547,
  ('20m', '[0.0, 90.0['): 3.6500000953674316,
  ('20m', '[180.0, 270.0['): 5.3199996948242187,
  ('20m', '[270.0, 360.0]'): 3.929999828338623,
  ('20m', '[90.0, 180.0['): 3.9796528816223145,
  ('40m', 'All'): 5.291872501373291,
  ('40m', '[0.0, 90.0['): 4.692425012588501,
  ('40m', '[180.0, 270.0['): 6.1558408737182617,
  ('40m', '[270.0, 360.0]'): 4.9811406135559082,
  ('40m', '[90.0, 180.0['): 4.8983759880065918,
  ('80m', 'All'): 6.6626186370849609,
  ('80m', '[0.0, 90.0['): 5.9457294940948486,
  ('80m', '[180.0, 270.0['): 7.544825553894043,
  ('80m', '[270.0, 360.0]'): 6.1506271362304687,
  ('80m', '[90.0, 180.0['): 6.3810868263244629},
 '75%': {('10m', 'All'): 5.5,
  ('10m', '[0.0, 90.0['): 4.369999885559082,
  ('10m', '[180.0, 270.0['): 6.8199996948242188,
  ('10m', '[270.0, 360.0]'): 5.130000114440918,
  ('10m', '[90.0, 180.0['): 4.6960808038711548,
  ('140m', 'All'): 10.203519582748413,
  ('140m', '[0.0, 90.0['): 8.7971394062042236,
  ('140m', '[180.0, 270.0['): 11.370761156082153,
  ('140m', '[270.0, 360.0]'): 9.2274019718170166,
  ('140m', '[90.0, 180.0['): 10.097956657409668,
  ('200m', 'All'): 11.203938484191895,
  ('200m', '[0.0, 90.0['): 9.4468526840209961,
  ('200m', '[180.0, 270.0['): 12.706465721130371,
  ('200m', '[270.0, 360.0]'): 10.000725984573364,
  ('200m', '[90.0, 180.0['): 10.862814903259277,
  ('20m', 'All'): 6.179999828338623,
  ('20m', '[0.0, 90.0['): 4.9499998092651367,
  ('20m', '[180.0, 270.0['): 7.6100001335144043,
  ('20m', '[270.0, 360.0]'): 5.7100000381469727,
  ('20m', '[90.0, 180.0['): 5.2929890155792236,
  ('40m', 'All'): 7.0959796905517578,
  ('40m', '[0.0, 90.0['): 5.9702688455581665,
  ('40m', '[180.0, 270.0['): 8.4523344039916992,
  ('40m', '[270.0, 360.0]'): 6.8096575736999512,
  ('40m', '[90.0, 180.0['): 6.2155957221984863,
  ('80m', 'All'): 8.6509017944335938,
  ('80m', '[0.0, 90.0['): 7.5837295055389404,
  ('80m', '[180.0, 270.0['): 9.7384757995605469,
  ('80m', '[270.0, 360.0]'): 8.1105818748474121,
  ('80m', '[90.0, 180.0['): 8.2832918167114258},
 'count': {('10m', 'All'): 604656.0,
  ('10m', '[0.0, 90.0['): 119842.0,
  ('10m', '[180.0, 270.0['): 234074.0,
  ('10m', '[270.0, 360.0]'): 126376.0,
  ('10m', '[90.0, 180.0['): 124364.0,
  ('140m', 'All'): 604656.0,
  ('140m', '[0.0, 90.0['): 116374.0,
  ('140m', '[180.0, 270.0['): 243590.0,
  ('140m', '[270.0, 360.0]'): 135292.0,
  ('140m', '[90.0, 180.0['): 109400.0,
  ('200m', 'All'): 604656.0,
  ('200m', '[0.0, 90.0['): 113475.0,
  ('200m', '[180.0, 270.0['): 242157.0,
  ('200m', '[270.0, 360.0]'): 143254.0,
  ('200m', '[90.0, 180.0['): 105770.0,
  ('20m', 'All'): 604656.0,
  ('20m', '[0.0, 90.0['): 116748.0,
  ('20m', '[180.0, 270.0['): 235304.0,
  ('20m', '[270.0, 360.0]'): 126961.0,
  ('20m', '[90.0, 180.0['): 125643.0,
  ('40m', 'All'): 604656.0,
  ('40m', '[0.0, 90.0['): 120426.0,
  ('40m', '[180.0, 270.0['): 238381.0,
  ('40m', '[270.0, 360.0]'): 128104.0,
  ('40m', '[90.0, 180.0['): 117745.0,
  ('80m', 'All'): 604656.0,
  ('80m', '[0.0, 90.0['): 119330.0,
  ('80m', '[180.0, 270.0['): 239146.0,
  ('80m', '[270.0, 360.0]'): 133220.0,
  ('80m', '[90.0, 180.0['): 112960.0},
 'max': {('10m', 'All'): 25.920000076293945,
  ('10m', '[0.0, 90.0['): 14.369999885559082,
  ('10m', '[180.0, 270.0['): 25.920000076293945,
  ('10m', '[270.0, 360.0]'): 19.549999237060547,
  ('10m', '[90.0, 180.0['): 14.930000305175781,
  ('140m', 'All'): 35.195941925048828,
  ('140m', '[0.0, 90.0['): 22.86467170715332,
  ('140m', '[180.0, 270.0['): 35.195941925048828,
  ('140m', '[270.0, 360.0]'): 29.814235687255859,
  ('140m', '[90.0, 180.0['): 20.905771255493164,
  ('200m', 'All'): 34.877243041992188,
  ('200m', '[0.0, 90.0['): 24.561836242675781,
  ('200m', '[180.0, 270.0['): 34.877243041992188,
  ('200m', '[270.0, 360.0]'): 33.732143402099609,
  ('200m', '[90.0, 180.0['): 21.536584854125977,
  ('20m', 'All'): 27.689998626708984,
  ('20m', '[0.0, 90.0['): 15.589999198913574,
  ('20m', '[180.0, 270.0['): 27.689998626708984,
  ('20m', '[270.0, 360.0]'): 21.649999618530273,
  ('20m', '[90.0, 180.0['): 15.979999542236328,
  ('40m', 'All'): 29.387109756469727,
  ('40m', '[0.0, 90.0['): 17.693622589111328,
  ('40m', '[180.0, 270.0['): 29.387109756469727,
  ('40m', '[270.0, 360.0]'): 25.192754745483398,
  ('40m', '[90.0, 180.0['): 16.793560028076172,
  ('80m', 'All'): 32.280239105224609,
  ('80m', '[0.0, 90.0['): 20.743719100952148,
  ('80m', '[180.0, 270.0['): 32.280239105224609,
  ('80m', '[270.0, 360.0]'): 27.942413330078125,
  ('80m', '[90.0, 180.0['): 19.532955169677734},
 'mean': {('10m', 'All'): 4.1893915969076261,
  ('10m', '[0.0, 90.0['): 3.3417930869221379,
  ('10m', '[180.0, 270.0['): 5.1125810579269269,
  ('10m', '[270.0, 360.0]'): 3.7938859684522601,
  ('10m', '[90.0, 180.0['): 3.670476718299061,
  ('140m', 'All'): 7.8465228797278623,
  ('140m', '[0.0, 90.0['): 6.6866495964827086,
  ('140m', '[180.0, 270.0['): 8.9531109376609503,
  ('140m', '[270.0, 360.0]'): 7.2187838345351443,
  ('140m', '[90.0, 180.0['): 7.3927146469551381,
  ('200m', 'All'): 8.4738967491657924,
  ('200m', '[0.0, 90.0['): 7.0707511105622967,
  ('200m', '[180.0, 270.0['): 9.7955929565714968,
  ('200m', '[270.0, 360.0]'): 7.7549135952858128,
  ('200m', '[90.0, 180.0['): 7.9270609315399172,
  ('20m', 'All'): 4.8153452911920738,
  ('20m', '[0.0, 90.0['): 3.9108075360827947,
  ('20m', '[180.0, 270.0['): 5.8345712321566516,
  ('20m', '[270.0, 360.0]'): 4.3517044317594324,
  ('20m', '[90.0, 180.0['): 4.2155453833197427,
  ('40m', 'All'): 5.6803902578298446,
  ('40m', '[0.0, 90.0['): 4.8012498160193742,
  ('40m', '[180.0, 270.0['): 6.6519476987395914,
  ('40m', '[270.0, 360.0]'): 5.3629782195278182,
  ('40m', '[90.0, 180.0['): 4.9579161339061493,
  ('80m', 'All'): 6.8429105603612399,
  ('80m', '[0.0, 90.0['): 5.9149683147210084,
  ('80m', '[180.0, 270.0['): 7.8021544717360065,
  ('80m', '[270.0, 360.0]'): 6.424779540308954,
  ('80m', '[90.0, 180.0['): 6.2855045603079853},
 'min': {('10m', 'All'): 0.0,
  ('10m', '[0.0, 90.0['): 0.0,
  ('10m', '[180.0, 270.0['): 0.0,
  ('10m', '[270.0, 360.0]'): 0.0,
  ('10m', '[90.0, 180.0['): 0.0,
  ('140m', 'All'): 0.0,
  ('140m', '[0.0, 90.0['): 0.0,
  ('140m', '[180.0, 270.0['): 0.0,
  ('140m', '[270.0, 360.0]'): 0.0,
  ('140m', '[90.0, 180.0['): 0.0,
  ('200m', 'All'): 0.0,
  ('200m', '[0.0, 90.0['): 0.0,
  ('200m', '[180.0, 270.0['): 0.0,
  ('200m', '[270.0, 360.0]'): 0.0,
  ('200m', '[90.0, 180.0['): 0.0,
  ('20m', 'All'): 0.0,
  ('20m', '[0.0, 90.0['): 0.0,
  ('20m', '[180.0, 270.0['): 0.0,
  ('20m', '[270.0, 360.0]'): 0.0,
  ('20m', '[90.0, 180.0['): 0.0,
  ('40m', 'All'): 0.0,
  ('40m', '[0.0, 90.0['): 0.0,
  ('40m', '[180.0, 270.0['): 0.0,
  ('40m', '[270.0, 360.0]'): 0.0,
  ('40m', '[90.0, 180.0['): 0.0,
  ('80m', 'All'): 0.0,
  ('80m', '[0.0, 90.0['): 0.0,
  ('80m', '[180.0, 270.0['): 0.0,
  ('80m', '[270.0, 360.0]'): 0.0,
  ('80m', '[90.0, 180.0['): 0.0},
 'std': {('10m', 'All'): 2.4321994530033586,
  ('10m', '[0.0, 90.0['): 1.7153268584149644,
  ('10m', '[180.0, 270.0['): 2.8194581011555386,
  ('10m', '[270.0, 360.0]'): 2.1909571297061241,
  ('10m', '[90.0, 180.0['): 1.8334834361369423,
  ('140m', 'All'): 3.6272652696793761,
  ('140m', '[0.0, 90.0['): 2.8894363480141649,
  ('140m', '[180.0, 270.0['): 3.8302160204846252,
  ('140m', '[270.0, 360.0]'): 3.4038884427629861,
  ('140m', '[90.0, 180.0['): 3.463171121328295,
  ('200m', 'All'): 4.0834920171291111,
  ('200m', '[0.0, 90.0['): 3.246180377116834,
  ('200m', '[180.0, 270.0['): 4.2979603238677564,
  ('200m', '[270.0, 360.0]'): 3.7366849435738714,
  ('200m', '[90.0, 180.0['): 3.9631501181722597,
  ('20m', 'All'): 2.5956531035815531,
  ('20m', '[0.0, 90.0['): 1.8115698416394523,
  ('20m', '[180.0, 270.0['): 2.9884465540389979,
  ('20m', '[270.0, 360.0]'): 2.342034699432777,
  ('20m', '[90.0, 180.0['): 1.9553532925384289,
  ('40m', 'All'): 2.7650269372360587,
  ('40m', '[0.0, 90.0['): 1.9926422334110316,
  ('40m', '[180.0, 270.0['): 3.1345356834325013,
  ('40m', '[270.0, 360.0]'): 2.6327655213933481,
  ('40m', '[90.0, 180.0['): 2.1057487187047053,
  ('80m', 'All'): 3.1164449954856375,
  ('80m', '[0.0, 90.0['): 2.4419473697940042,
  ('80m', '[180.0, 270.0['): 3.3838903052504601,
  ('80m', '[270.0, 360.0]'): 3.017648294312663,
  ('80m', '[90.0, 180.0['): 2.707882324438323}} 
```

任何人都知道如何重新索引此数据框以使索引级别按排序顺序排列？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:39:55.740

@unutbu 是正确的，这里没有手动构建索引。

```
df = a.append(b)
df.index = MultiIndex.from_arrays([a.index.tolist()*(len(b) + 1), 
                                   ["all"] + b.index.tolist()    ] )
df

                 25%    50%    75%    count      max    mean   min  std  
10m all          2.43   3.71   5.5    6.047e+05  25.92  4.189  0    2.432
    0.0_90.0     2.08   3.058  4.37   1.198e+05  14.37  3.342  0    1.715
    180.0_270.0  2.99   4.64   6.82   2.341e+05  25.92  5.113  0    2.819
    270.0_360.0  2.12   3.4    5.13   1.264e+05  19.55  3.794  0    2.191
    90.0_180.0   2.368  3.401  4.696  1.244e+05  14.93  3.67   0    1.833 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:14:45.227

```
import pandas as PD

a = PD.DataFrame({'25%': {'10m': 2.429999828338623},
                  '50%': {'10m': 3.7100000381469727},
                  '75%': {'10m': 5.5},
                  'count': {'10m': 604656.0},
                  'max': {'10m': 25.920000076293945},
                  'mean': {'10m': 4.1893915969076261},
                  'min': {'10m': 0.0},
                  'std': {'10m': 2.4321994530033586}})

index = PD.MultiIndex.from_arrays([['10m'],['all']], names = ['dist', 'angle'])
a.index = index

b = PD.DataFrame({'25%': {'0.0_90.0': 2.0799999237060547,
                          '180.0_270.0': 2.9900000095367432,
                          '270.0_360.0': 2.119999885559082,
                          '90.0_180.0': 2.3681280016899109},
                  '50%': {'0.0_90.0': 3.0579087734222412,
                          '180.0_270.0': 4.6399998664855957,
                          '270.0_360.0': 3.4000000953674316,
                          '90.0_180.0': 3.4006340503692627},
                  '75%': {'0.0_90.0': 4.369999885559082,
                          '180.0_270.0': 6.8199996948242188,
                          '270.0_360.0': 5.130000114440918,
                          '90.0_180.0': 4.6960808038711548},
                  'count': {'0.0_90.0': 119842.0,
                            '180.0_270.0': 234074.0,
                            '270.0_360.0': 126376.0,
                            '90.0_180.0': 124364.0},
                  'max': {'0.0_90.0': 14.369999885559082,
                          '180.0_270.0': 25.920000076293945,
                          '270.0_360.0': 19.549999237060547,
                          '90.0_180.0': 14.930000305175781},
                  'mean': {'0.0_90.0': 3.3417930869221379,
                           '180.0_270.0': 5.1125810579269269,
                           '270.0_360.0': 3.7938859684522601,
                           '90.0_180.0': 3.670476718299061},
                  'min': {'0.0_90.0': 0.0,
                          '180.0_270.0': 0.0,
                          '270.0_360.0': 0.0,
                          '90.0_180.0': 0.0},
                  'std': {'0.0_90.0': 1.7153268584149644,
                          '180.0_270.0': 2.8194581011555386,
                          '270.0_360.0': 2.1909571297061241,
                          '90.0_180.0': 1.8334834361369423}})

index = PD.MultiIndex.from_arrays(
    [['']*4,
     ['0.0_90.0','180.0_270.0','270.0_360.0','90.0_180.0']],
    names = ['dist', 'angle'])
b.index = index

PD.set_printoptions(precision = 3)
new_df = PD.concat([a,b])
print(new_df[['count','mean','std','min','max','25%','50%','75%']]) 
```

产量

```
 count  mean   std  min    max   25%   50%   75%
dist angle                                                        
10m  all          604656  4.19  2.43    0  25.92  2.43  3.71  5.50
     0.0_90.0     119842  3.34  1.72    0  14.37  2.08  3.06  4.37
     180.0_270.0  234074  5.11  2.82    0  25.92  2.99  4.64  6.82
     270.0_360.0  126376  3.79  2.19    0  19.55  2.12  3.40  5.13
     90.0_180.0   124364  3.67  1.83    0  14.93  2.37  3.40  4.70 
```

请注意，上面的多索引为`b`第一个索引使用了一个空字符串：例如`('','0.0_90.0')`. 您可以`('10m', '0.0_90.0')`通过定义将其更改为

```
index = PD.MultiIndex.from_arrays(
    [['10m']*4,
     ['0.0_90.0','180.0_270.0','270.0_360.0','90.0_180.0']],
    names = ['dist', 'angle'])
b.index = index 
```

默认情况下它以相同的方式打印，或者如果您调用

```
PD.set_printoptions(multi_sparse = True) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T16:50:20.780

其他有趣的选择：

```
In [19]: result = pd.concat([a, b]).rename({'10m': 'all'})

In [20]: result.set_index(np.array(['10m'] * 5), append=True).swaplevel(0,1)
Out[20]: 
                  count  mean   std  min    max   25%   50%   75%
10m all          604656  4.19  2.43    0  25.92  2.43  3.71  5.50
    0.0_90.0     119842  3.34  1.72    0  14.37  2.08  3.06  4.37
    180.0_270.0  234074  5.11  2.82    0  25.92  2.99  4.64  6.82
    270.0_360.0  126376  3.79  2.19    0  19.55  2.12  3.40  5.13
    90.0_180.0   124364  3.67  1.83    0  14.93  2.37  3.40  4.70 
```

# actionscript-3 - Flash actionscript 3 将代码扔到时间轴和使用单独的 .as 文件之间的区别

> ID：13762122
> 
> 赞同：1
> 
> 时间：2012-12-07T11:23:52.703
> 
> 标签：actionscript-3, flash

我是学生，我的老师一直告诉我要习惯在单独的 .as 文件中制作我的 flash 游戏，而不是去 flash 并使用 flash 时间线构建我的游戏，并在那里添加所需的 actionscript 3 代码，靠近行动的地点和时间发生。

他坚持这一点是因为一些问题，但我真的没有完全理解他的意思，所以有人可以快速解释如果我构建更大的结构游戏而不使用单独的 .as 文件而不是使用 Flash 时间线并分离我的代码？

我的头脑中有一种顽固的抵抗力，因为到目前为止我在分离我的代码时还没有遇到太多问题，即使他说当代码在同一个地方时我自己更容易弄清楚，但我倾向于抽象/非理性的想法，所以我至少到目前为止没有看到它有问题，对我来说，将所有动作脚本3添加到同一个地方似乎更难......或者我可能只是一个固执的傻瓜，我应该听他的......那么，有人可以解释一下吗？

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T11:35:57.297

结构。随着您对 AS3 的熟悉程度越来越高，您会注意到，根据最佳实践构建代码会收获很多。它不仅为您提供了更多控制权和更容易阅读代码，还使构建有用、可重用的面向对象代码变得更加容易。

即使你可能擅长非理性思考，但你的记忆力可能并不好。当一位同事将来最终会接触您的代码时，您和您的同事都会迷失方向。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T12:06:18.520

我几乎和 walkietokyo 有相同的答案：代码组织和结构。一个例子可以说你正在制作一个像小行星这样的游戏。将您的代码分开来表示：玩家运动、射击、子弹和小行星撞击检测、小行星运动以及分数处理可能很有用。然后，当您（或其他人）将来重新访问它时，您的代码会变得更小，更容易消化，每个部分都专注于特定的事情。甚至可能可重复用于可能具有类似行为的其他东西。

通过将代码分离出来，它还可以使测试和调试变得更加容易，因为如果说玩家射击存在错误，那么与 if 相比，您无需担心所有其他部分的代码这一切都在 1 个巨大的 fla/file 中。它还可以简单地使导航变得容易得多，而不必从一件很长的事情中找到它。

但我还要补充一点，如果您在同一个项目上与多个人一起工作，将其分开也可以让人们同时处理/处理不同的部分，如果您使用版本控制系统来处理您的文件，比较'纯文本' AS 文件比比较 flas 容易得多。您甚至可以将 fla 视为只是一个“资源/资产”文件并具有不同的版本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T12:10:22.287

### 结构：

就像 walkietokyo 所说，将您的代码分成对象可以让您在以后再次使用您的代码变得非常容易。想在您的游戏中为第 4 级添加另一种类型的武器吗？简单的。`new GrenadeLauncher();`. 最终，您将拥有一个将在所有项目中使用的小型组件库，从而为您节省大量时间。

### 文件大小/内存：

如果您的整个应用程序都在 FLA 中，则用户必须先下载*整个*FLA（假设内容在网页上可用）才能使用它。对于小程序来说，这没什么大不了的。对于具有许多不同屏幕的大型程序或具有关卡的游戏，这可能是一个问题，因为所有内容都保留在内存中。您可以通过仅在内存中保留您需要的内容来节省下载时间和内存使用量。

### 在团队中工作：

假设您正在制作一款游戏，并且您正在编写第 6 级的代码。与此同时，您的艺术家正在向库中添加一些艺术作品并在舞台上进行一些调整。您将更改提交到版本控制系统，并且存在冲突。您的艺术家已经提交了她的更改，现在您必须在您的版本中复制她所做的一切，浪费她和您的时间。如果您在 6 级编码`level6.as`，则不会发生这种情况。就个人而言，我发现这是在文本文件中编码并将 FLA 留给 UI 和艺术的最佳理由。

### 记忆，就像大象一样：

两个月后，你将打开你的文件并想找到你写的那个漂亮的榴弹发射器，但你不知道从哪里开始。如果您使用包以结构化方式在文件中编码，则无需记住。只需浏览您的文件夹，最终您会发现`mygame.weapons.GrenadeLauncher.as`.

# c# - 基于列索引而不是列名对数据表进行排序

> ID：13762123
> 
> 赞同：1
> 
> 时间：2012-12-07T11:24:04.213
> 
> 标签：c#, datatable

我有一个有 10 列的 DataTable，我想按列索引 10 从最大到最小对表进行排序。我知道这对某些人来说应该很容易，但这是我第一次使用这样的 DataTable

我发现的所有网站都说您必须知道列名，但我没有，并且想通过列的索引值来引用该列。应该对该数据表中的所有行进行排序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:43:57.633

您可以使用 DefaultView 和 ColumnName 进行排序。

```
dataTable.DefaultView.Sort = dataTable.Columns[9].ColumnName + " DESC"; 
```

工作示例：

```
 DataTable dt = new DataTable();
    //Define columns to DataTable 
    dt.Columns.Add("Id");
    dt.Columns.Add("Name");

    //Adding rows to DataTable 
    DataRow row1 = dt.NewRow();
    row1["ID"] = 1;
    row1["Name"] = "Jack";
    dt.Rows.Add(row1);

    DataRow row2 = dt.NewRow();
    row2["ID"] = 2;
    row2["Name"] = "Fruit";
    dt.Rows.Add(row2);

    DataRow row3 = dt.NewRow();
    row3["ID"] = 3;
    row3["Name"] = "Ball";
    dt.Rows.Add(row3);

    dt.DefaultView.Sort = dt.Columns[1].ColumnName + " ASC";

    foreach (DataRowView drv in dt.DefaultView)
    {
        for (int i = 0; i < dt.Columns.Count; i++)
            Console.WriteLine(drv[i]);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T11:32:15.663

尝试

```
DataTable dt = new DataTable(); 
//Then fill values 
DataView dv = dt.AsDataView(); // DataView dv = dt.DefaultView();
dv.Sort = dv.Table.Columns[index].ColumnName + " DESC";
dt = dv.Table; 
```

# iphone - 最新的 RestKit 中不存在 RKUrl 类

> ID：13762129
> 
> 赞同：4
> 
> 时间：2012-12-07T11:24:37.940
> 
> 标签：iphone, ios, restkit

我在使用 RESTKIT 时遇到问题。我已经完美地安装了所有东西，我一直在关注[Raywenderlich 教程](http://www.raywenderlich.com/13097/intro-to-restkit-tutorial)，但在最新的 restkit RKURL 中不存在；甚至 RKObjectLoader 也不存在。请任何人都可以告诉这些类的替代品是什么？我已经检查了[restkit.org](http://restkit.org)和 github 但无法找到。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T11:44:27.367

RKURL 是 0.10 RESTKIT 的一部分。它不再是 0.20 RESTKIT 的一部分。RestKit 现在使用 AFNetworking 获取更多信息，哪些类和方法在 0.20 版本的 Restkit 中升级或消除了请按照这个官方链接[restkit 从 0.10 升级到 0.20](https://github.com/RestKit/RestKit/wiki/Upgrading-from-v0.10.x-to-v0.20.0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T16:04:23.707

根据[从 0.10 升级到 0.20](https://github.com/RestKit/RestKit/wiki/Upgrading-from-v0.10.x-to-v0.20.0)的 restkit，只需像这样使用 NSURL：

```
RKObjectManager* objectManager = [RKObjectManager managerWithBaseURL:[NSURL URLWithString:url]]; 
```

# c++ - 复制 QMimeData 对象的正确方法

> ID：13762140
> 
> 赞同：5
> 
> 时间：2012-12-07T11:25:23.930
> 
> 标签：c++, qt, clipboard

我正在开发一个 Qt 应用程序来存储通过剪贴板的任何内容，以便以后可以恢复它。我的方法是从 中检索QMimeData[并将](http://qt-project.org/doc/qt-4.8/qmimedata.html)`QApplication::clipboard()`其存储在`QList<QMimeData *>`. 由于剪贴板中的数据是易变的，我必须复制返回的 QMimeData `QClipboard::mimeData()`。QMimeData 没有复制构造函数，所以我想我会像这样复制它：

```
const QMimeData * clipboardData = _clipboard->mimeData();
QMimeData * mimeCopy = new QMimeData();

foreach(const QString & format, clipboardData->formats())
    mimeCopy->setData(format, clipboardData->data(format)) 
```

`_clipboard`在哪里`QApplication::clipboard()`。

除了某些特定于应用程序的 MIME 类型外，这工作得相对较好。例如，我注意到当我在 Skype 对话中复制、恢复和粘贴 Skype 消息时，该消息不再“引用”。这是否证明我的副本有缺陷？有没有更好、更准确的方法来复制 QMimeData ？

经过一番调试，我发现 Skype 消息 mimedata 有两种格式。`Text/Plain`包含消息本身文本的类型`application/x-qt-windows-mime;value="SkypeMessageFragment"`和包含一些类似 xml 的数据的类型。[Qt 关于 MIME 类型的文档](http://qt-project.org/doc/qt-4.8/qmimedata.html#platform-specific-mime-types)表明它`value="..."`描述了数据是如何编码的。我是否必须在某些时候编码或解码某些东西才能使我的 QMimeData 的副本有效？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T10:53:44.507

对于自定义 MIME 类型，例如`application/x-qt-windows-mime;value="SomeValue"`，实际上是真正的格式名称（在两个引号之间的 `SomeValue`后面是什么）。`value=`

复制 QMimeData 对象的更准确方法是这样的：

```
QMimeData * copyMimeData(const QMimeData * mimeReference)
{
    QMimeData * mimeCopy = new QMimeData();

    foreach(QString format, mimeReference->formats())
    {
        // Retrieving data
        QByteArray data = mimeReference->data(format);
        // Checking for custom MIME types
        if(format.startsWith("application/x-qt"))
        {
            // Retrieving true format name
            int indexBegin = format.indexOf('"') + 1;
            int indexEnd = format.indexOf('"', indexBegin);
            format = format.mid(indexBegin, indexEnd - indexBegin);
        }
        mimeCopy->setData(format, data);
    }

    return mimeCopy;
} 
```

# soundcloud - SoundCloud SC.Widget.Events.FINISH 只触发一次

> ID：13762144
> 
> 赞同：2
> 
> 时间：2012-12-07T11:25:41.793
> 
> 标签：soundcloud

我正在使用 SoundCloud HTML5 iFrame 小部件，并试图在它完成时触发一个事件。歌曲第一次结束时，事件触发。但是当我在完成事件触发后以同样的方式播放另一首歌曲时，完成事件不会触发第二次！

它与以下问题基本相同：[Soundcloud HTML5 Player: Events.FINISH 只触发一次](https://stackoverflow.com/questions/10396584/soundcloud-html5-player-events-finish-only-fired-once)

虽然在我的情况下，我已经在使用新的 api.js 而没有 parentWindow 调用。

我正在使用 API.js： [http ://w.soundcloud.com/player/api.js](http://w.soundcloud.com/player/api.js)

我的页面上有一个 iframe，如下所示：

播放歌曲时，附加事件如下：

```
var widgetIframe = document.getElementById('soundcloud-container'),
widget       = SC.Widget(widgetIframe);

widget.bind(SC.Widget.Events.FINISH, function(player, data) {
  console.log('finished');
  playNextTrack();                  
}); 
```

在 playNextTrack() 方法中，执行相同的代码以再次附加事件。但是现在，它不再触发了。playNextTrack 中的所有其他代码都按预期执行，但 SC.Widget.Events.FINISH 不是。它也不会在控制台中显示错误消息。

有谁知道我可能做错了什么？

# javascript - JavaScript 显示错误

> ID：13762145
> 
> 赞同：0
> 
> 时间：2012-12-07T11:25:47.877
> 
> 标签：javascript, lightwindow

我的网页上有一个手风琴菜单和一个 lightwindow 脚本。由于手风琴脚本，lightwindow 脚本不起作用，因为如果我删除后者，lightwindow 脚本就会起作用。一定有冲突，但是什么？这是我页面的头部：

```
<script type="text/javascript" src="lightwindow/javascript/prototype.js"></script>
<script type="text/javascript" src="lightwindow/javascript/scriptaculous.js?load=effects"></script>
<script type="text/javascript" src="lightwindow/javascript/lightwindow.js"></script>
<link rel="stylesheet" href="lightwindow/css/lightwindow.css" type="text/css" media="screen" />
<!-- accordion scripts -->
<script src="js/jquery-1.2.1.min.js" type="text/javascript"></script>
<script src="js/menu.js" type="text/javascript"></script>
<script src="js/jquery.cookie.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="css/accordion.css" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:36:30.780

### 您正在同时加载`prototype.js`和`jquery.js`。

使用**jQuery**使用`noConflict`.

```
$.noConflict(); 
```

`$`并将for jQuery 的所有实例替换为`jQuery`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:30:51.613

当使用过多的库和插件时会发生这种情况......

尝试使用 jQuery 的 noConflict 函数，这样您就可以使用原型和 scriptaculous 了。[文档](http://api.jquery.com/jQuery.noConflict/)说：

```
<script type="text/javascript" src="other_lib.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
  $.noConflict();
  jQuery(document).ready(function($) {
    // Code that uses jQuery's $ can follow here.
  });
  // Code that uses other library's $ can follow here.
</script> 
```

但老实说，如果我是你，我会选择一个用于我的网站的库，找到能做同样事情的插件，因为那里到处都是插件。

此外，将 jQuery 调用更新为：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script>jQuery || document.write('<script src="js/jquery.min.js"><\/script>') 
```

# php - 是否可以从 blob 类型读取文本？

> ID：13762146
> 
> 赞同：0
> 
> 时间：2012-12-07T11:25:48.830
> 
> 标签：php, mysql, blob

我有一个**文本文件**，我将其作为类型**保存在**Mysql 中。`BLOB`是否可以使用保存的文本文件中的文本内容来搜索该表？

请帮忙。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:32:54.557

取决于您的文本文件格式，如果内容未压缩，您可以使用 BLOB 搜索文本。您还可以使用 BLOB 创建全文索引。注意 BLOB 中的比较区分大小写。

# sharepoint - 如何以编程方式读取和显示 PPS 记分卡注释（注释）？

> ID：13762148
> 
> 赞同：3
> 
> 时间：2012-12-07T11:26:13.713
> 
> 标签：sharepoint, performancepoint

我使用仪表板设计器创建了一个记分卡。我的要求是在单独的 Web 部件中显示记分卡注释。

这样用户就可以查看评论，而无需右键单击并转到记分卡内的评论。

我在网上找不到任何参考资料。所以有帮助吗？

非常感谢..

# google-apps - 如何在谷歌应用程序中创建通用电子邮件

> ID：13762149
> 
> 赞同：0
> 
> 时间：2012-12-07T11:26:23.837
> 
> 标签：google-apps

我是谷歌应用程序的新用户。我已经注册了我的域，但我找不到任何有关如何创建电子邮件的信息，例如：info@domain.com。所有电子邮件应发送至 userA@domain.com 和 userB@domain.com

唯一的方法是创建用户 'inf'o 并在其 gmail 帐户上设置重定向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T11:28:14.667

您可以创建一个接收来自非成员帐户的邮件的 Google 群组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T02:01:01.830

您可以针对现有用户创建昵称“信息”。

# android - 如何从 Google API Android v2 持久化标记？

> ID：13762150
> 
> 赞同：6
> 
> 时间：2012-12-07T11:26:33.577
> 
> 标签：android, google-maps

[Marker](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/model/Marker)没有实现`Parcelable`，`Serializable`接口，但我需要在 Activity `onPause`/之间持久化它`onResume`，那么我该如何持久化它呢？如何获取所有当前标记列表（在任何地方都找不到 getMarkers() 方法）？

想象下一个案例：我已经添加`Marker`并开始`AsyncTask`执行长时间运行的任务并更新标记的视图。任务正在进行中，我改变方向，重新创建活动。任务完成后如何更新该标记？假设我可以保留标记的 id 并且*标记由片段自动保存*（想象一下），那么在重新创建活动后如何使用 id 找到它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T13:18:10.147

您可以保留`MarkerOptions`对象，因为它们是`Parcelable`，然后`Marker`从它们重新创建对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T09:05:21.347

`Marker`s 不是“UI 状态”的一部分，因此不应在配置更改时保存/恢复。

在配置更改时，您只需使用与第一次显示时`Marker`填充的完全相同的代码重新创建所有 s 。`GoogleMap`

如果您真的想保留它们（从我的角度来看这是一个非常糟糕的主意），仍然可以通过手动执行`onSaveInstance(Bundle outState)`

* * *

编辑：请参阅[“深入了解 Android 状态恢复”](https://www.youtube.com/watch?v=ekN2zvFytZk)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-11T08:52:09.307

现在似乎没有办法做到这一点：[http ://code.google.com/p/gmaps-api-issues/issues/detail?id=4650](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4650)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-21T19:57:27.657

标记对象（用于 Android 谷歌地图）现在支持使用标记存储任意数据对象`Marker.setTag()`，并使用 检索数据对象`Marker.getTag()`。

例如，这允许跟踪特定标记上的点击计数。或者，存储其他数据，然后可以在自定义`InfoWindow`.

请参阅[标记数据。](https://developers.google.com/maps/documentation/android-api/marker#marker-data)

# rake - 加载 rake 文件并从其他文件运行任务

> ID：13762152
> 
> 赞同：37
> 
> 时间：2012-12-07T11:26:50.373
> 
> 标签：rake, rakefile

目前我正在尝试拆分我的 rake 文件以更好地组织它们。为此，我在`rake`我的目录中添加了一个文件夹`assets`，该文件夹为每组任务保存一个 rake 文件。

由于我来自 PHP，我只有*非常基本*的 Ruby/Rake 知识，并且无法在加载文件后运行我的命名空间默认操作。

内部注释掉的`Rake :: Task ...`-string`app:init`在我的 CL 处引发错误：

> ```
> rake aborted! 
> uninitialized constant TASK 
> ```

这是命名空间/类（如果这是正确的词）。

```
task :default => [ 'app:init' ]
namespace :app do

    rake_dir   = "#{Dir.pwd}/assets/rake/"
    rake_files = FileList.new( "#{rake_dir}*" )

    desc "Loads rake modules (Default action)"
    task :init do
        puts "\t Importing rake files for processing"

        puts "\t loading..."
        rake_files.each() { |rake|
            puts "\t #{rake}"
            require rake
            # @link rubular.com
            name = rake.split( rake_dir ).last.gsub( /.rb\z/, '' )
            puts "\t #{name}"
            #Rake :: Task[ "#{name}:default" ].invoke
        }
    end
end 
```

提前致谢。

**编辑：**至少，我可以确定文件已加载，因为`puts "file loaded"`这些文件开头的纯文本得到了回显。问题似乎*只是*加载的 rake 文件中命名空间的`:default`操作未加载。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2015-02-06T09:05:58.293

您可以将任务放入默认加载的文件`rakelib/`夹`rake`中，也可以通过以下方式添加特定文件夹`Rakefile`：

```
Rake.add_rakelib 'lib/tasks' 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-05-27T22:35:37.293

如果您的目标是从外部文件加载 rake 任务，那么您可以执行以下操作。首先，假设您在一个名为的文件中有一个 rake 任务，`<project>/lib/tasks/hello.rake`如下所示：

```
desc "Say hello"
task :hello do 
  puts "Hello World!"
end 
```

`Rakefile`然后你可以在你的目录中创建一个简单的`<project>`来加载它，如下所示：

```
Dir.glob('lib/tasks/*.rake').each { |r| load r}

desc "Say goodbye"
task :goodbye do
  puts "See you later!"
end 
```

当然，这将加载所有以`rake`扩展名结尾的文件。您可以像这样简单地加载`hello.rake`：

```
load './lib/tasks/hello.rake'

desc "Say goodbye"
task :goodbye do
  puts "See you later!"
end 
```

要查看所有已加载的任务，请使用`rake -T`. 请注意，我使用`lib/tasks`的是 Rails 应用程序采用的标准方法。你可以使用`assets`或任何你喜欢的东西，尽管我更喜欢`lib/tasks`在非 Rails 项目中。我也倾向于根据它们的命名空间来分离我的任务文件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-01-04T10:15:36.517

`Rake.add_rakelib 'tasks'`正如@splattael 所说，您可以随时使用。你需要知道的一件事，'tasks'目录中的文件需要有'.rake'而不是'.rb'的扩展名，否则，rake不会为你加载它。

示例文件：

*   [https://github.com/nanoc/nanoc/blob/master/Rakefile](https://github.com/nanoc/nanoc/blob/master/Rakefile)
*   [https://github.com/nanoc/nanoc/tree/master/tasks](https://github.com/nanoc/nanoc/tree/master/tasks)

完成上述所有操作后，使用`rake -T`来检查您的作业，以查看 rake 是否已成功加载您的任务。

# solr - 如何解决 DataImportHandler 异常

> ID：13762159
> 
> 赞同：0
> 
> 时间：2012-12-07T11:27:29.390
> 
> 标签：solr

我正在尝试使用 DIH 从 SQL 服务器导入数据。我遇到了异常。

```
null:java.lang.NoClassDefFoundError: Could not initialize class org.apache.solr.handler.dataimport.DataImportHandler
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Unknown Source)
at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:399)
at org.apache.solr.core.SolrCore.createInstance(SolrCore.java:420)
at org.apache.solr.core.SolrCore.createRequestHandler(SolrCore.java:477)
at org.apache.solr.core.RequestHandlers.initHandlersFromConfig(RequestHandlers.java:154)
at org.apache.solr.core.SolrCore.<init>(SolrCore.java:577)
at org.apache.solr.core.SolrCore.<init>(SolrCore.java:504)
at org.apache.solr.core.CoreContainer.create(CoreContainer.java:816)
at org.apache.solr.core.CoreContainer.load(CoreContainer.java:510)
at org.apache.solr.core.CoreContainer.load(CoreContainer.java:333)
at org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:282)
at org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:101)
at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:277)
at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:258)
at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:382)
at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:103)
at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4638)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5294)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:895)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:871)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649)
at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1585)
at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

请帮我解决这个问题，并告诉我是否有任何其他方法可以在不使用 DataImportHandler 的情况下将数据索引到 solr，或者是否有任何方法可以使用任何 C# 应用程序或类似的东西将数据索引到 solr？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:35:04.650

将`apache-solr-dataimporthandler-x.y.z`.jar 和`apache-solr-dataimporthandler-extras-x.y.z.jar`文件添加到Solr 主目录的**lib**`solrconfig.xml`文件夹中，并在文件中配置 lib 目录。

索引数据的另一种方法是使用[SolrSharp](http://solrsharp.codeplex.com/)项目。

# objective-c - NSURLConnection 多个异步连接

> ID：13762161
> 
> 赞同：0
> 
> 时间：2012-12-07T11:27:44.570
> 
> 标签：objective-c, asynchronous, nsurlconnection

我试图弄清楚为什么我的 UI 直到我的所有 NSURLConnections 都加载后才更新。

我基本上是在加载一个“登录”请求，接收响应，然后调用：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"connectionFinishedLoading" object:[NSMutableDictionary dictionaryWithObject:dataForConnection forKey:conn.tag]] 
```

我在代码的其他地方收到通知，它调用：

```
[self.loginViewController dismissViewControllerAnimated:YES completion:nil]; 
```

连同一个 NSLog，所以我知道它实际上是在正确的时间使用这个方法，它只是在其他基本上与隐藏对话框同时开始的 NSURLConnections 完成之后，视图控制器才被解除。

过去几个小时我一直在研究这个问题，但我仍然不确定我用来创建/发送请求的代码是否异步工作：

```
-(void)initGET:(NSString *)url queryString:(NSString *)theQueryString tag:(NSString *)tag{
if([Utils CanConnectToURL:url]){
    //NSLog(@"url: %@", url);
    //NSLog(@"queryString: %@", theQueryString);
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@?%@", url, theQueryString]]];
    [request setHTTPMethod:@"GET"];
    [request setValue:@"application/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];
    [request setTimeoutInterval:60*10];
    URLConnection *connection = [[URLConnection alloc] initWithRequest:request delegate:self startImmediately:YES tag:tag];
    if(connection){
        [receivedData setObject:[NSMutableData data] forKey:connection.tag];
        [conns addObject:connection];
    }
    else
        [receivedData setObject:NSLocalizedString(@"ConnectionError", nil) forKey:connection.tag];
}
else{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"NoInternetConnectionTitle", nil) message:NSLocalizedString(@"NoInternetConnectionMessage", nil) delegate:self cancelButtonTitle:NSLocalizedString(@"OK", nil) otherButtonTitles:nil];
    alert.tag = 999;
    [alert show];
} 
```

}

我的猜测是它已经是异步的，因为我在第一个完成后直接启动了另外 3 个 NSURLConnections，并且我的日志显示其他 3 个连接基本上都是在同一时间开始的，然后都在稍后完成。如果它只是同步的，那么肯定会启动 1 个连接，然后完成，然后是第 2 个连接开始/完成，依此类推......

有谁知道为什么我的 UI 无法正确更新？如果是这样，那么一个好的解决方法是什么 - 我已经对 NSOperationQueue 有所了解，但是在使用 NSNotificationCenter 传递消息/对象时，使用它似乎开始导致其他问题，我在我的 URLConnectionManager 类中使用了很多.

谢谢！

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:38:51.080

URLConnection 不是标准的 NSURLConnection。如果没有看到 URLConnection 的实现，很难判断它是否是异步的。

另外，当您收到连接已完成的通知时，您如何更新您的 UI？

# arrays - 两个Java数组的对称差

> ID：13762164
> 
> 赞同：3
> 
> 时间：2012-12-07T11:27:53.807
> 
> 标签：arrays, java

我有两个数组

```
 String[] ID1={"19","20","12","13","14"};

 String[] ID2={"10","11","12","13","15"}; 
```

在比较上述两个数组时如何获得以下答案。

我想在比较上述两个数组时排除常见元素。

```
 String[] Result={"14","15","19","20","10","11"}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T11:41:05.280

似乎您想要两组的并集（没有重复，对吗？）减去交集：

```
Set<Integer> union = new HashSet<Integer>(Arrays.asList(ID1));
union.addAll(Arrays.asList(ID2);

Set<Integer> intersection = new HashSet<Integer>(Arrays.asList(ID1));
intersection.retainAll(Arrays.asList(ID2);

union.removeAll(intersection);

// result is left in "union" (which is badly named now) 
```

（我将您的字符串更改为整数，这似乎更适合数据，但它可以以相同的方式与字符串一起使用）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T11:34:19.423

它看起来像 XOR 操作 ;)

请更直接地描述您的需求。伪代码：

```
foreach s in ID1 {
  if(ID2.contains(s)) {
    ID2.remove(s)
  } else {
    ID2.add(s)
  }
} 
```

ID2 将包含您的结果。假设两个数组中都没有重复项。

# email - 如果从其他电子邮件客户端读取，SugarCRM 中的入站电子邮件不会收到

> ID：13762167
> 
> 赞同：2
> 
> 时间：2012-12-07T11:28:00.920
> 
> 标签：email, gmail, sugarcrm, email-client

我们正在从 gmail 帐户进行 SugarCRM（社区版）电子邮件集成。使用 cron 作业在 1 分钟内调用电子邮件计划作业时一切正常。问题是，它没有阅读标记为已读的电子邮件（当用户在到达 SugarCRM 之前直接从谷歌看到电子邮件时）。

我不知道这是否是 SugarCRM 的限制或任何解决方法。如果他们在 gmail 中阅读，如何阅读电子邮件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T22:42:41.907

这是正常行为，但可以在 modules/InboundEmail/InboundEmail.php getNewMessageIds(

UNSEEN 是硬编码的，不可配置。

还有一种方法可以以更新保存的方式覆盖它。看看[http://forums.sugarcrm.com/f3/upgrade-safe-custo-handlecreatecase-82635/](http://forums.sugarcrm.com/f3/upgrade-safe-custo-handlecreatecase-82635/)

# java - OpenJDK7 OS X 上的 file.listFiles() 在包含欧元符号的文件名上损坏

> ID：13762173
> 
> 赞同：3
> 
> 时间：2012-12-07T11:28:22.513
> 
> 标签：java, macos, java-7, openjdk

似乎以下 file.listFiles() 在 OS X 上的 OpenJDK 7 上已损坏。

此代码段将打印“此文件具有欧元符号...不存在”。

```
 final String pathname = System.getProperty("user.home") + 
          "/folderThatContainsAFileWithTheEuroSymbol/";
    final File folder = new File(pathname);
    for (File file : folder.listFiles()) {
        if (!file.exists()) {
            System.out.println("This file has a euro symbol in its name, it exists and yet file.exists says it doesn't exist");
        }
    } 
```

这似乎是一个[已知](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7187821) [问题](http://java.net/jira/browse/MACOSX_PORT-165)。

我正在寻找解决方法。这是针对消费者软件的，因此理想情况下，该解决方案不会涉及最终用户方面的低级诡计。我希望有一个解决方案，仅代表我对代码进行少量更改。

这里有[一个建议的解决方案](https://stackoverflow.com/questions/12509532/encoding-issues-on-java-7-file-names-in-os-x)，但这涉及设置命令行环境变量，这超出了我的许多用户的范围。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T02:08:06.160

这已在 Java Development Kit 7 Update 10 (JDK 7u10) 中得到修复。

# iphone - 邀请 Twitter 好友参与 iPhone 应用问题

> ID：13762176
> 
> 赞同：5
> 
> 时间：2012-12-07T11:28:31.123
> 
> 标签：iphone, objective-c, ios, twitter

我想邀请来自 twitter 的朋友加入我的应用程序。

我已经阅读了来自[https://dev.twitter.com/docs/ios](https://dev.twitter.com/docs/ios)和[https://dev.twitter.com/docs/ios/using-reverse-auth](https://dev.twitter.com/docs/ios/using-reverse-auth) 的文档。所以现在我可以成功地用 twitter 登录，获取用户信息（令牌和登录），可以在我的墙上发布 twits。

但是，通过邀请发布推特是唯一从 Twitter 邀请朋友的方法吗？

邀请朋友参加我的申请的最佳方式是什么？

# python - 如何使用 mrjob 迭代处理一个目录下的所有文件

> ID：13762181
> 
> 赞同：6
> 
> 时间：2012-12-07T11:28:47.950
> 
> 标签：python, hadoop, mrjob

我正在使用 mrjob 处理一批文件并获取一些统计信息。我知道我可以在单个文件上运行 mapreduce 作业，例如

```
python count.py < some_input_file > output 
```

但是如何将文件目录提供给脚本？文件目录结构是这样`folder/subfolders/files`的，有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T12:48:20.000

好吧，最后我发现我可以指定一个目录作为输入路径，Hadoop 将处理该目录中的所有文件。

在我的情况下，我有包含输入文件的子目录。Hadoop 不会递归遍历目录，默认会报错。一个常见的技巧是使用通配符 glob

```
python count.py hdfs://master-host/directory/*/*.txt > result 
```

# robots.txt - 我应该在 robots.txt 中使用#End Robots# 还是不使用？

> ID：13762183
> 
> 赞同：0
> 
> 时间：2012-12-07T11:28:55.250
> 
> 标签：robots.txt

我应该在 robots.txt 中使用#End Robots# 还是不使用？

我的意思是它是否有助于防止我得到空格？

现在它看起来像这样：

```
User-agent: *
Disallow: /admin/
Disallow: /account/
Disallow: /access-denied/
#End Robots# 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:32:07.350

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449)似乎表明不需要它。

就我个人而言，我从未将其添加到我部署的任何机器人文件中，也从未遇到任何问题。

# ajax - 为什么部分视图没有被替换？

> ID：13762185
> 
> 赞同：0
> 
> 时间：2012-12-07T11:29:01.917
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-partialview, unobtrusive

从演示解决方案中，我尝试使用内置的 mvc ajax 功能。但由于某种原因，部分视图没有被替换。

```
@using (Ajax.BeginForm("RefreshPartial", "Home",  new AjaxOptions() { UpdateTargetId = "PartialToRefresh", HttpMethod = "Post" }))
{ 
    @Html.TextBox("Name");
    <input type="submit" value="Send name" />
}
<br />
<div>
    @Ajax.ActionLink("Just refresh", "RefreshPartial", "Home", null, new AjaxOptions() { UpdateTargetId = "PartialToRefresh", HttpMethod = "Post" }, null)
</div>
<br />
<div id="PartialToRefresh">
    @Html.Partial("_DateTimePartial", "test")
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:29:01.917

当我显示 HTML 页面时，我得到了这个 html 代码

```
<form action="/Home/RefreshPartial" id="form0" method="post" onclick="Sys.Mvc.AsyncForm.handleClick(this, new Sys.UI.DomEvent(event));" onsubmit="Sys.Mvc.AsyncForm.handleSubmit(this, new Sys.UI.DomEvent(event), { insertionMode: Sys.Mvc.InsertionMode.replace, httpMethod: 'Post', updateTargetId: 'PartialToRefresh' });">                       
    <input id="Name" name="Name" type="text" value="">    
    <input type="submit" value="Send name">
</form> 
```

经过一番谷歌搜索后，我发现 web.config 将不显眼的标志设置为 false。

```
 <appSettings>
    <add key="ClientValidationEnabled" value="true"/> 
    <add key="UnobtrusiveJavaScriptEnabled" value="false"/> 
  </appSettings> 
```

这必须 OFFCOURSE 是真的！:)

# .htaccess - 这个 htaccess 重写规则有什么问题？

> ID：13762187
> 
> 赞同：1
> 
> 时间：2012-12-07T11:29:05.820
> 
> 标签：.htaccess, redirect

我有一个动态页面，它获取“p”参数来显示内容：

```
m.mydomain.com/index.php?p=key 
```

我想要某种干净的网址。

这是我的实际 htaccess：

```
AddType x-mapp-php5 .php

RewriteEngine On
RewriteRule ^(.*)/$ index.php?p=$1 [QSA,L] 
```

所以：

```
m.mydomain.com/key -> doesn't work (404 page)
m.mydomain.com/index/key -> blank page 
```

如何获得 m.mydomain.com/key ？

请帮帮我，我要疯了！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:01:42.927

我看到的一个问题是您的 RewriteRule 将捕获对 index.php 的直接调用，并尝试重定向

```
m.mydomain.com/index.php 
```

至

```
m.mydomain.com/index.php?p=index.php 
```

您可以通过首先使用如下所示的单独重写规则捕获“index.php”路径来防止这种情况：

```
RewriteRule ^(index.php) - [L] 
```

但我认为缺乏这一点不应该导致你的问题。也许在不同的 .htaccess 或 Web 服务器配置文件中有另一条规则在干扰？我问这个是因为我对以下内容没有任何问题：

```
# .htaccess
RewriteEngine On
RewriteRule ^(index.php) - [L]
RewriteRule ^(.*)$ index.php?p=$1 [QSA,L] 
```

注意：我取出了**AddType x-mapp-php5 .php**因为那在我的设置中不起作用。我不知道这是否与您的问题有关，但您可能希望将其包装在**<IfModule>**中以确保安全，如[如何在我的开发机器上支持“AddType x-mapp-php5 .php”中所建议的那样](https://stackoverflow.com/questions/1094310/how-to-support-addtype-x-mapp-php5-php-on-my-development-machine)

将它们结合在一起，这（也）对我有用：

```
# .htaccess
<IfModule !mod_php5.c>
AddType x-mapp-php5 .php
</IfModule>

RewriteEngine On
RewriteRule ^(index.php) - [L]
RewriteRule ^(.*)$ index.php?p=$1 [QSA,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:50:12.803

```
RewriteEngine On
RewriteRule ^(.*)$ index.php?p=$1 [QSA,L] 
```

我已经测试和工作

# visual-studio-2010 - 一个项目中的多个 Sharepoint Visual Studio 工作流 - 最佳实践

> ID：13762195
> 
> 赞同：1
> 
> 时间：2012-12-07T11:29:24.643
> 
> 标签：visual-studio-2010, sharepoint-2010, sharepoint-workflow

我们有一个要求，我们必须开发 5 个 Visual Studio 工作流作为项目的一部分。根据 SharePoint 工作流的最佳实践（如下面的链接所述），建议每当对工作流进行代码更新时，创建一个新版本的工作流程序集（包括更改 WSP 名称和解决方案 ID），而不是而不是覆盖旧版本，因为现有实例可能会失败。

[http://msdn.microsoft.com/en-us/library/cc514224.aspx#MOSS2007DevWorkflowSolutions_SavingWorkflowState](http://msdn.microsoft.com/en-us/library/cc514224.aspx#MOSS2007DevWorkflowSolutions_SavingWorkflowState)

如果我的项目有一个单一的工作流程，我们不会有任何问题。但是，由于我们有 5 个工作流程，我们不确定是否应该在一个 Visual Studio 项目中拥有所有工作流程，或者我们是否应该为每个工作流程拥有单独的项目。好心提醒。

以下是我们对每种方法的优缺点的分析......

单个项目中的所有工作流程，每个工作流程都有其开启功能

专业人士

1.一个单一的VS项目，包括所有的工作流和每个版本的一个DLL。

骗局

1.对于一个工作流程中的任何更改，我们将为其余 4 个工作流程创建新功能，因为解决方案和 wsp 名称将有所不同。因此，所有工作流的较新版本将出现在“管理功能”页面上。单个项目中的每个工作流。:- 为每个工作流创建一个项目。

专业人士

1.对一个工作流程的任何更改都不会为其他工作流程创建出现的附加功能。缺点

1.必须部署多个项目，因此必须部署多个 wsp。多个 DLL 将部署到 GAC。

# mysql - Sequelize关联渴望导致connectorDAO中的错误

> ID：13762198
> 
> 赞同：0
> 
> 时间：2012-12-07T11:29:31.367
> 
> 标签：mysql, sequelize.js

使用 MySQL 和 sequelize@1.6.0-beta4 现在我想使用这个应该获取关联模型的新功能。所以我有这个：

```
self.Project.hasMany(self.Task, {as:'Tasks', foreignKey: 'projectID'}); 
```

然后使用以下内容：

```
db.models.Project.findAll({where:{id:1}, include : ['Tasks']}).success(function(project){
    console.log("With assoc: " + JSON.stringify(project) );
}); 
```

不幸的是，我收到以下错误：

```
node_modules/sequelize/lib/dialects/mysql/query-generator.js:143
        if (association.connectorDAO) {
                       ^
TypeError: Cannot read property 'connectorDAO' of null 
```

如果我禁止包含语句，它运行良好，但显然不会返回关联的任务。

进入调试我发现了一些有趣的东西。该`include`语句在子对象（任务）上查找关联。如果我添加（不必要的）以下内容：

```
self.Task.belongsTo(self.Project); 
```

然后我不再触发错误，但没有获取子对象。怕是有bug...

此外，我正在使用`JSON.stringify`因为`.values`不工作（`undefined`）。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:58:08.650

您必须来回连接两个模型，否则您将收到该错误。

如果没有获取任何内容，`.values`则将是未定义的。

# php - 将数据从一个表单自动填充到另一个表单，托管在另一个站点上

> ID：13762203
> 
> 赞同：0
> 
> 时间：2012-12-07T11:29:58.560
> 
> 标签：php, html, css, forms, jotform

我正在尝试使用自定义表单来填充另一个表单中的字段，该表单托管在 jotform 上。

使用rails，移动信息非常容易，但我不知道如何在php中做到这一点。

我设置了一个自定义表单，其中包含客人数量、入住日期和退房日期的字段。

我想做的是这样当我在第一个表单上点击提交时，它会填充预订表单上的数据。

预订托管在 jotform 上。

我尝试通过匹配字段的 ID（即与 jotform 上的 ID 相同）对此进行测试，但是当我单击提交时，它不会传输数据。

--

您可以通过访问[http://opohills.com/taipei-rentals.php](http://opohills.com/taipei-rentals.php)并在滑块下方输入信息来复制此内容

--

我在 PHP 中写了什么可以携带信息？

这是我的，还是jotform的？

我的自定义表单的代码是——

```
 <form id="formElem" name="formElem" action="form.php" method="post" >

     <div class="icon">

      <select id="input_13" name="capacity" >

        <option value="1">1</option>

        <option value="2">2</option>

        <option value="3">3</option>

        <option value="4">4</option>

        <option value="5">5</option>

        <option value="more">6+</option>

      </select>

      <span><img src="img/man.png" /></span>

     </div>

     <div class="icon">

      <input id="txtFromDate" name="check_in" placeholder="mm/dd/yy" type="text" readonly="readonly" AUTOCOMPLETE=OFF />

      <span><img src="img/calendar.png" /></span>

     </div>

     <div class="icon">

      <input id="txtToDate" name="check_out"   placeholder="mm/dd/yy"  type="text" readonly="readonly" AUTOCOMPLETE=OFF />

      <span><img src="img/calendar.png" /></span>

     </div>

     <button id="btn_room_search" type="submit" class="secondary button submit_button">Inquire Now</button>

    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:53:19.273

如果您说您希望您的 PHP 表单自动将此数据提交到远程主机，那么您需要向远程主机生成另一个 HTTP 请求（*基本上将数据代理到远程主机*）。

但是，如果您要说的是您希望页面上填充的表单数据自动填充到其他远程主机的页面上，那么 PHP 根本无法帮助您解决这个问题。您将需要访问远程主机，并且您必须修改该代码以接受将自动填充页面表单元素的远程请求。

代理请求可以像这样简单......

```
$postdata = http_build_query($_POST); /* do your own validation here */

$opts = array(
              'http' => array(
                             'method'  => "POST",
                             'header'  => "Accept-language: en\r\n" .
                                          "Cookie: foo=bar\r\n", /* if necessary */
                             'content' => $postdata
                            ),
             );

$context = stream_context_create($opts);

$file = file_get_contents('http://www.example.com/', false, $context); 
```

这基本上只是将发送到您的 PHP 脚本的内容代理到远程主机。有关更多详细信息，请参阅[PHP HTTP 流上下文选项](http://php.net/manual/en/context.http.php)。

# actionscript-3 - 舞台上的对象未在构造函数之外初始化

> ID：13762206
> 
> 赞同：2
> 
> 时间：2012-12-07T11:30:10.757
> 
> 标签：actionscript-3, constructor, flash-cs6

在我的文档类中，我将一些放置在舞台上的对象分配给一个数组，以便稍后调用它们。

当我在构造函数之外声明数组时，对象还没有被创建并且赋值为空，这与我在构造函数中声明它们时不同。 **为什么**会这样？

**我怎样**才能避免这种情况？**我可以**使用侦听器来跟踪加载对象的时间吗？

***第一个案例***

```
package { 
   public class Document extends MovieClip {
       var obj:Array = [object1,object2];
       public function Document() {
          trace(obj[0]); // <-- null
       }
   }
} 
```

***第二种情况***

```
package { 
   public class Document extends MovieClip {
       public function Document() {
          var obj:Array = [object1,object2];
          trace(obj[0]); // <-- reference value
       }
   }
} 
```

![在此处输入图像描述](../Images/aafb742f084fba5067241c38e8311d6b.png) ![在此处输入图像描述](../Images/4db9345e0e9f5be6857488828877bee3.png) ![在此处输入图像描述](../Images/d0e0cf2e119460e8ee47434fefa1732a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T11:44:47.883

全局变量（即任何方法之外的变量）在任何东西之前、*在*调用构造函数之后和执行*之前***加载**。

 **请改用此代码：

```
package { 
   public class Document extends MovieClip {
       var obj:Array;
       public function Document() {
          obj = [object1,object2];
          trace(obj[0]);
       }
   }
} 
```

**附录：**

Stage 对象在构造函数代码*的顶部*初始化，例如设计器对象在**.net**中。

因此，由于全局变量在执行构造函数代码*之前*`object1`被初始化，并且`object2`仍然是`null`.

**附录 2：**

您有以下顺序：

1.  类的构造函数被调用
2.  全局变量被初始化（你的`obj`数组，还有`object1`/`object2`变量，但不是它们的值）
3.  Designer（你在舞台上的图形）对象被初始化（即`object1 = new Object1()`调用）
4.  构造函数代码被执行

舞台对象总是自动声明和初始化，除非您在高级 AS 设置中取消选中*自动声明舞台实例。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T11:43:04.153

在外面声明数组，在构造函数里面填充值。

```
public class Document extends MovieClip {
   var obj:Array;
    public function Document() {
      obj = [object1,object2];
      trace(obj[0]); // <-- reference value
   }
} 
```

无论你写什么作为初始化值都会首先处理，嵌入在编辑器中的任何东西都是第二个，构造函数代码是第三个。因此，当您在初始化代码中按名称引用资产时，它们尚未初始化，因此您会收到空值。

无论您使用什么侦听器，都只会在对象可用后应用。如果您需要舞台参考以将您的代码控制资产与给定的舞台尺寸对齐`init()`，并且监听器非常有用。`ADDED_TO_STAGE`在此之前，阶段引用为空。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-07T11:51:21.967

嗯，这有点模糊。这些对象在哪里实例化？我建议确保它们在您的课程中被实例化：

```
package
{
    public class Document extends Sprite //I don't think you really need MovieClip
    {
        //alternatively to the method bellow you could use something like:
        //
        // private var object1 : Object = new Object();
        // private var object2 : Object = new Object();
        // public var obj : Array = [object1, object2];
        //
        // just make sure they are instantiated before they are used in the obj contructor

        public var obj : Array = [new Object(),new Object()]; //again here I would suggest using a vector if they are the same type

        public function Document()
        {
            trace(obj[0]);
        }
    }
} 
```

如果这些对象在类外部，我建议将它们传递给构造函数，如下所示：

```
package
{
    public class Document extends Sprite //I don't think you really need MovieClip
    {
        public var obj : Array = [null,null]; //again here I would suggest using a vector if they are the same type

        public function Document(o1:Object=null,o2:Object=null)
        {
            if (o1 != null)
                obj[0] = o1;
            if (o2 != null)
                obj[1] = o2;
            // 
            if (obj[0] != null)
                trace(obj[0]);
            else
                trace("Obj[0] is null");
        }
    }
} 
```

[稍后编辑] 至于发生这种情况的原因是因为在数组初始化时这两个是空的（它们还没有被初始化）

[稍后编辑2] 好的 - Document 是 flash 的根类 - 很高兴知道就像我在评论中所说的那样，即使在舞台上这两个对象在添加到舞台之前不会被实例化。为此，我建议收听 ADDED_TO_STAGE 事件。如果您将它们传递到构造函数之外，则在创建数组时它们将为空，因为它们尚未添加到阶段/创建（与普遍的看法相反，即使在 Flash 中，对象也不会简单地存在）**

# iphone - 如何在开发者门户（iPhone）中再添加一个开发证书？

> ID：13762210
> 
> 赞同：0
> 
> 时间：2012-12-07T11:30:18.693
> 
> 标签：iphone, ios, certificate

我的 Mac1 的开发者门户中已经有一个开发证书，然后我尝试从我的 Mac2 的开发者门户中添加另一个开发证书。如何创建这个？是否有可能做到这一点？在哪里添加这个？请帮我。

提前致谢

![在此处输入图像描述](../Images/a7fd4446cafb1b33cd79a7f8e7a20446.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:38:12.187

您可以在许多 Mac 上使用该证书，但遗憾的是，您不能在配置门户上创建多个证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:21:00.683

每个账户只有一个开发证书。由于限制，您不能创建超过 1 个证书。如果您需要更多证书，唯一的选择是，如果是公司帐户（不是个人帐户），那么您可以邀请您的公司团队成员加入并免费创建开发者帐户，然后您可以为每个帐户创建个人证书

# deployment - 跨环境管理配置文件

> ID：13762211
> 
> 赞同：34
> 
> 时间：2012-12-07T11:30:19.353
> 
> 标签：deployment, configuration, environment, configuration-management

您（您的公司）如何管理您构建的应用程序/系统的配置文件？让我告诉你我们是怎么做的，问题是什么。

我在一家公司工作，我们与大约 15 名开发人员一起开发软件。我们构建部署在我们的托管托管服务提供商处的业务线 Web 应用程序。我们的主要应用程序之一由一个网站和大约十个 WCF 服务组成。一些服务是相互连接的。

我不知道这是一个大系统还是小系统，但我认为这需要我们太长时间才能在我们不同的环境（测试、验收和生产）中启动和运行。

我们的 Visual Studio 项目中每个环境都有配置文件。所以 a `web.test.config`, a `web.acc.config`, a`web.prod.config`和 a`web.config`用于发展。它们都有相同的键，但值可能不同，具体取决于它们所使用的环境。

如果我快速计算 web.config 中 webapp 的 appsettings 数，我数为 32。我数了 5 个端点。我们有四个环境（dev、test、acc 和 prod），这意味着一个 web 应用程序总共有 128 个 appsettings 和 20 个端点。我们很容易犯错，尤其是在最后期限临近的时候。

我们都是人类，所以这样的事情可能发生在任何人身上：

*   我们对其中一个配置文件进行了更改，但在构建和部署之前忘记签入。
*   或者我们在 WebServer 上进行了更改而忘记在其他四个 web.configs 中进行相应的更新。
*   或者我们只更改四个配置文件中的三个。等等。

然后，我们在托管托管服务提供商处拥有基础设施。默认情况下，每个端口都是关闭的。因此，如果其中一个 WCF 服务需要与位于不同服务器上的另一个 WCF 服务通信，则必须打开受防火墙保护的端口。

我们在Test中这样做，但是在Acceptance中我们必须再次这样做，并且我们忘记了必须打开哪些端口，所以它更像是试错：哦我的服务无法连接到数据库，可能是端口关闭。同样的问题也可能在生产中发生。

根据 SLA，我们的托管主机提供商可能需要几天时间才能在防火墙中打开一个端口。所以，这很快就变成了一个相当漫长的过程。最后，我们需要大约两个月的时间来启动和运行测试、验收和生产。

所以，我的问题是：您如何管理配置和基础设施以及围绕它的流程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T21:26:32.963

Config4 [*](http://www.config4star.org)项目（免责声明：我是它的主要开发人员）没有与 .Net 或 WCF 的开箱即用集成，因此它可能对您没有用处。但是，Config4* 中的一项功能与您的问题相关：它能够在配置文件中嵌入 if-then-else 语句，以便该文件可以“适应”自己以适应不同的环境（例如开发、测试，验收和生产）。

您可以修改该概念以使用您在基于 .Net/WCF 的项目中使用的任何配置语法（我不熟悉这些技术，但我猜他们可能使用基于 XML 的配置文件） . 特别是，您可以使用 Python 编写脚本，该脚本使用 if-then-else 语句在 a 中设置特定于环境的*name=value*对`map`，然后使用一些`print`语句生成一组为环境量身定制的配置文件. 这种脚本的伪代码大纲是：

```
#--------
# Set up configuration variables suitable for a specified environment
#--------
cfg["variable1"] = "default value";
cfg["variable2"] = "another default value";
if (environment == "testing") {
  cfg["variable1"] = "override default value for this environment";
  cfg["variable3"] = "value suitable for this environment";
  ...
} else if (environment == "production") {
  ...
}
#--------
# Now use print statements to generate configuration files
# Alternatively, use the _name=value_ pairs in the map to
# perform global search-and-replace on template versions of
# configuration files.
#--------
... 
```

对于奖励积分，脚本还可以生成需要为环境执行的测试清单，例如，“检查是否需要在以下端点之间打开防火墙端口：...”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-05T08:39:19.003

我们正在开发一个分布式存储系统，我们在每次构建时运行的单元和集成测试中发现了许多类似的问题。此外，我们正在使用 ReviewBoard，以便其他开发人员在提交之前查看任何更改。下一步是在不同环境中自动部署和测试工件的持续集成服务器 (jenkins)。最后，我们的最后一道防线是在发布之前针对任何新版本运行的压力测试测试平台。当然，拥有一个尽可能好地模拟您的生产环境的测试平台是必不可少的，但如果您总是在同一个托管服务提供商处部署，那应该不会太难。

*   关于您的特殊情况，其中一个文件中的更改可能已在其他文件中被遗忘，等等：我想这很容易使用测试脚本进行自动检查。

*   未提交的更改应该像“git diff master”或您使用的任何 vcs 一样容易检测。

*   了解需要为服务打开哪些端口似乎更像是一个适当的文档问题，而不是配置管理的问题。

许多使用我们系统的站点也使用 puppet 来管理其不同节点的配置。我不确定这是否适合您，但可能值得一看。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-07T16:17:58.340

这可能会有所帮助，它讨论了从一个来源引用的配置文件和服务的中心位置。

[http://blogs.msdn.com/b/youssefm/archive/2010/09/02/loading-wcf-client-configuration-from-different-files-with-configurationchannelfactory.aspx](http://blogs.msdn.com/b/youssefm/archive/2010/09/02/loading-wcf-client-configuration-from-different-files-with-configurationchannelfactory.aspx)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-07-30T17:32:13.630

听起来您有一个足够小的环境，您可以使用[Ansible 模板](https://github.com/ansible/ansible)或[SaltStack](https://github.com/saltstack/salt)轻松管理所有配置文件。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-01-03T17:56:12.097

看看[http://www.configapp.com](http://www.configapp.com)上的 Config 。它的工作方式是您将导入一个名为 web.config 的基本配置文件。然后在 webapp 中，您将创建 4 个环境，dev、test、acc 和 prod。转到开发环境，创建环境变量，并设置适合环境的值。您将只维护一个带有环境变量的配置文件。您可以查看所有环境变量，并轻松查看环境之间的差异。

您将犯更少的错误，因为您只需管理 1 个配置文件。当您添加新的通用/静态配置时，所有环境都会神奇地拥有该新设置。添加变量配置时，只需转到正确的环境选项卡并在那里设置值。您可以查看所有环境的特定配置值，以便快速检查您是否遗漏了什么。您还可以查看每个环境的每个配置文件，因为它们就在您面前。您不需要对每台服务器进行 RDP/SSH。

您不会忘记签入，因为 Config 将是主副本，并且您不会再直接编辑配置文件。如果您直接编辑它们，我们有一个差异功能，因此您可以看到主副本和本地副本之间的差异。您可以使用适合您团队的各种部署模型将主副本部署到本地服务器。您可以推送、手动拉取、自动拉取或导出/复制。

我们将支持自定义类型，我们将来可以添加的一件事是端口数据类型。端口验证的一部分将检查端口是否打开。这仅适用于本地计划，因为它需要访问内部网络。或者您可以手动检查它。转到端口环境变量，并显示当前配置的所有端口。检查列表中的每个端口。如果端口看起来不错，请在 Config 中添加注释，说明它已打开并在某个日期进行了检查。Config 是为搜索和文档而设计的。

顺便说一句，我是 Config 团队的一员。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-04T16:59:06.043

就个人而言，如果可能，我会通过以下方式管理它：所有“静态”环境设置（数据库连接、LDAP 等）都放在服务器配置文件中（不受代码迁移影响），“动态”设置在数据库本身。

所以我只依赖数据库团队来更新设置（如果你可以直接访问数据库，那就更容易了）。而且我没有风险在我的开发 PC 上运行指向 prod 数据库的代码：D

但我没有 Visual Studio 经验，所以我不确定你是否可以在你的情况下应用类似的东西，但我希望它能给你一些想法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-04T02:55:06.053

您是否考虑过使用部署管理工具来处理它？我曾在运营团队工作过，负责部署一个产品，该产品有大约 10 个需要相互通信的不同系统，所以我非常了解您的情况。部署整个解决方案大约需要 4 小时的手动步骤 + 2 小时的测试。我们决定使用 Octopus Deploy ( [https://octopus.com](https://octopus.com) ) 来自动化部署过程。该工具可以在配置文件中进行变量替换，您可以为每个环境定义变量（等等...）整个解决方案的部署现在大约需要 15 分钟，最终结果总是很好...您还可以触发发布直接从 TFS、VSTS、Jenkins 或 TeamCity 创建和部署，这样您就可以拥有非常可靠的 CI/CD 方法。

希望这可以帮助。

# mysql - 当根本没有行时，为什么group_concat会带来一行空值

> ID：13762212
> 
> 赞同：1
> 
> 时间：2012-12-07T11:30:21.103
> 
> 标签：mysql, group-concat

我有一个表格帖子作为 p，表格标签作为 pt，表格标签引用作为 ptr。

tagsref 将具有 post 和 tags 表的 id。

我使用了 group_concat 并且我没有使用 group by 子句，因为在条件中我使用 if 条件仅过滤一行（p.slug = 'once'），假设因为我添加了条件，所以只会返回一行。是的，它确实。

问题是当仍然没有行时，我得到了一行具有空值的行。在下面的 sql 中，最后一个条件不会获取任何结果，因为没有 slug 为 'none' 的行，所以我根本不应该得到任何结果，但我得到了一行具有空值的行。

```
SELECT p.name, p.slug, GROUP_CONCAT(pt.name) as catz 
FROM post_tags pt, post_tagsref ptr, post p  
WHERE p.id = ptr.tid AND ptr.cid = pt.id  AND p.slug = 'none' 
```

> 人们建议使用 group by 子句，并提到 group_by 聚合函数即使未指定 group by 子句也可以工作，但结果可能无法预测。

***我使用 group by 并且正在工作。然而。***

```
post
-----
id  |   name    |   slug
1   |   sam     |   sam
2   |   do do   |   do-do

post_tags
--------------
id  |   name    |   slug
1   |   music   |   music
2   |   movies  |   movies
3   |   tv      |   tv

post_tagsref
------------    
pid |   pcid
1   |   2
1   |   1
2   |   1 
```

以上是表结构。

如果根本没有行，那么为什么 group_concat 返回一行具有空值？

提出这样一个问题的原因是要确定什么是什么...... :)

**参考：**

[当找不到 id 时，查询导致 1 行具有空值](https://stackoverflow.com/questions/3974055/query-is-resulting-in-1-row-with-null-values-when-id-is-not-found)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:24:12.420

尽管如此，没有输入的聚合函数往往会产生输出：没有行的总和为零，计数也为零，平均值为`NULL`. 这种事情使很多查询保持一致，应该是你得到`NULL`.

> 我没有使用 group by 子句，因为在条件中我使用 if 条件仅过滤一行 [...]

您只过滤到一个*帖子*，但我假设每个帖子可能有多个标签（否则您为什么要使用`group_concat`），因此连接将导致多行。因此，您可能希望按帖子 ID 进行分组。

另请注意，由于您目前正在进行内部联接，因此不会报告根本没有标签的帖子，因此请考虑在那里使用左联接。

# php - Facebook sdk getLoginUrl() 方法不会重定向已经登录的用户来授权我的应用程序

> ID：13762216
> 
> 赞同：0
> 
> 时间：2012-12-07T11:30:51.287
> 
> 标签：php, facebook, codeigniter, facebook-graph-api, oauth

我在我的`codeigniter`应用程序上使用 Facebook API 登录 Facebook。它似乎工作正常，除非用户已经登录 Facebook 但从未授权我的应用程序。我将他重定向到`getLoginUrl()`哪个应该让他授权我的应用程序，但它永远不会发生！

我真的很迷茫，一直在寻找解决方案，任何帮助将不胜感激

这是我在 facebook 登录点击时调用的索引函数：

```
 $data=array(
                'redirect_uri' => '/facebookcontroller/handle_facebook_login/',
                'scope' => 'publish_stream,email'
            );

            redirect($this->fbconnect->getLoginUrl($data)); 
```

我`redirect_uri`的是有效的，我仔细检查了。

因此，如果用户已登录，它将尝试将他重定向到`getloginurl()`应该让用户授权的地方，但事实并非如此。它直接进入`redirect_uri`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:55:34.433

你检查用户吗？

```
 // Init the Facebook SDK
    $facebook = new Facebook(array(
           'appId'  => $app_id,
           'secret' => $app_secret,     
           'cookie' => true
    ));

    // Get the current user
    $user = $facebook->getUser();

if (!$user) {
        $loginUrl = $facebook->getLoginUrl(array(
            'scope' => $scope,
            'redirect_uri' => $app_url,
            ));

            echo "<script type='text/javascript'>top.location.href = '$loginUrl';</script>";
    }
    else{        

    $user_profile = $facebook->api('/me');

    // STUFF
    } 
```

# java - android中的Sqllite更新查询

> ID：13762217
> 
> 赞同：1
> 
> 时间：2012-12-07T11:30:56.153
> 
> 标签：java, android, sqlite

我正在我的数据库助手类中执行更新方法。但我无法解决我在哪里做错了。日志中没有错误，但我在表中的字段没有更新。

```
public void updateJSON(long id, String newString) {
    ContentValues dataToInsert = new ContentValues();
    dataToInsert.put("cityJSON", newString);
    String where = "id=?";
    String[] whereArgs = new String[]{String.valueOf(id)};
    this.db.update(TABLE_NAME, dataToInsert, where, whereArgs); 
} 
```

我正在传输 json 字符串（带有逗号、括号等）和字段的 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:47:27.883

也许你想试试这段代码：`String mString = Long.toString(id);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:47:51.800

代替

```
String[] whereArgs = new String[]{String.valueOf(id)}; 
```

尝试

```
String[] whereArgs = { Long.valueOf(id).toString() }; 
```

这对我行得通。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:55:14.667

`db.update(...)`方法返回受影响的行数。您可以在日志中显示此值。如果受影响的行数为零：

1.  也许行名有问题？
2.  也许`db`声明为`readableDatabase`而不是`writableDatabase`？我的意思是

`SQLiteDatabase db = getReadableDatabase();`

而不是`getWritableDatabase()`？

编辑：

您可以编写帮助函数，以 100% 确保该行（具有您需要的 id）确实存在于数据库中：

```
public boolean isItemExistsInDB( int yourId){
    String selectQuery = "SELECT  * FROM " + 
                         TABLE_NAME+ " 
                         WHERE " + " id = '" + yourId+ "'";

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    //count of rows with "id=yourId"
    int count= cursor.getCount();

    Log.d(getClass().getSimpleName(), "count="+count);

    if(count>0){
        return true;
    }
    else{
         //there is no item with "id=yourId"
        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T12:09:04.840

我认为使用此代码，

```
this.db.update(TABLE_NAME, dataToInsert, COLUMNNAME + "=?" ,
            new String[]{String.valueOf(id)}); 
```

# asp.net - 如何为在asp.net中动态生成的网格行设置固定宽度和高度

> ID：13762220
> 
> 赞同：8
> 
> 时间：2012-12-07T11:31:09.280
> 
> 标签：asp.net

我有一个 asp.net 网格视图。这些行和列是根据从数据库中检索到的值动态生成的。在 .aspx 页面中，我使用网格 `<asp:GridView Height="250" Width="100%" runat="server" />`

如果我有更多的行数，那么网格如下所示。 ![在此处输入图像描述](../Images/63d3e01bb318895ea98a43cd6f983b72.png)

如果我只有一排网格，则如下所示。 ![在此处输入图像描述](../Images/cda731840fc546344bb62571789def46.png)

但是即使只有单行，我也想显示与第一张图像相同的网格行高度。如何将网格行高值设置为固定值。我在stackoverflow中发现了一些类似的问题。但那些并没有给我解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T11:39:50.533

您可以`GridView.RowStyle Property`用于定义行样式

**[GridView.RowStyle 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowstyle.aspx)：**获取对 TableItemStyle 对象的引用，该对象使您能够设置 GridView 控件中数据行的外观。

例如。

```
<asp:GridView ID="GridView1">
        <rowstyle Height="20px" />
        <alternatingrowstyle  Height="20px"/>
</asp:GridView> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T11:50:34.967

CSS：/*网格*/

```
.MoGrid { width: 100%; background-color: #fff; margin: 5px 0 10px 0;}

.MoGrid td { color: #F05117;font-family: georgia;font-weight: bold;padding: 30px 2px 2px;}

.MoGrid th {border-bottom: 1px solid #F05117;border-top: 1px solid #F05117;color: #29B6EA;
    font-size: 13px;font-weight: bold;padding: 4px 2px;font-family: georgia;}

.MoGrid .alt { background: #fcfcfc url(../Styles/images/grd_alt.png) repeat-x top; }

.MoGrid .pgrM {background: #29B6EA; height:10px; }

.MoGrid .pgrM table { margin: 5px 0; }

.MoGrid .pgrM td { border-width: 0; padding: 0 6px; border-left: solid 1px #666; font-weight: bold; color: #fff; line-height: 12px; float:left; }  

.MoGrid .pgrM a { color: #666; text-decoration: none; }

.MoGrid .pgrM a:hover { font-family: tahoma;font-size: 12px;background-color: #99BBE1; } 
```

来源 ：

```
<asp:GridView ID="GridView2" runat="server" CssClass="MoGrid"       
PagerStyle-CssClass="pgrM" AlternatingRowStyle-CssClass="alt"> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T11:50:52.503

有点棘手，但为我工作。您可以通过说明 gridview 本身的高度（以 px 为单位）来使 gridview 固定高度。现在要使行收缩到适当的高度（而不是扩大以填充空白），将页脚样式的高度设置为 100%。这样可以确保即使显示的记录数小于分页大小，页脚也会占用空间，使数据行保持其原始“未扩展”状态。

第一的：

```
showfooter="true" 
```

在网格中。

在页脚样式中：

```
 <footerstyle Height="100%" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T11:41:54.887

您可以在此代码 onPage_PreRender 中使用 gridview 的 RowStyle-Height="20" 属性

例如

```
if(grdView.Rows.Count>0)
grdView.Height = new Unit(grdView.RowStyle.Height.Value * grdView.Rows.Count); 
```

或者`remove Height property from gridView`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-20T09:28:52.767

**有很多方法**

**在 HTML 源代码中提及 RowStyle(& AlternateRowStyle) 的高度值**

```
<rowstyle height="50" /> 
```

**您可以在代码隐藏中执行相同的操作**

```
GridView1.RowStyle.Height = 50; 
```

**但我的建议是使用 CSS（最佳方式）**

```
.RowStyle {
  height: 50px;
}
.AlternateRowStyle {
  height: 50px;
} 
```

**ASP 源码**

```
<asp:gridview id="GridView1" runat="server" xmlns:asp="#unknown">
<rowstyle cssclass="RowStyle" />
<alternatingrowstyle cssclass="AlternateRowStyle" />
</asp:gridview> 
```

*谢谢*

# c++ - 使用 qt 的多客户端/服务器 tcp 应用程序

> ID：13762222
> 
> 赞同：1
> 
> 时间：2012-12-07T11:31:30.693
> 
> 标签：c++, qt, tcp, client-server

我正在研究一个需要“主”应用程序和许多“仆人”之间进行 tcp 通信的项目。（项目是c++，我也在使用qt）

“仆人”会做一些处理并将他们的结果发送给“主人”。到目前为止，它是一个简单的多客户端-服务器应用程序。

问题是，主人会在随机的时间向仆人索取一些额外的信息，甚至会向他们发送信息以改变他们的处理方式。

如果我的项目基于财富客户端/服务器示例，我是否能够从主人那里向仆人发送消息？（关于如何的任何想法？）

还是我需要将我的工作建立在其他东西上（比如聊天客户端？）？

欢迎任何其他关于 tcp 客户端/服务器通信的建议，但由于我已经使用 qt，我不想添加其他库....

先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T11:58:45.050

在 Qt 中构建服务器非常简单。您必须派生*QTcpServer*并实现一些方法或插槽。这对客户也有效。派生*QTcpSocket*，您将拥有您的客户端。

例如，要检测客户端传入，您可以实现*virtual void incomingConnection ( int socketDescriptor )* 。因此，在您的情况下，您可以将传入的客户端保存在地图中（地图，因为每个客户端都有自己的 id）。

在服务器和客户端中，您可能都希望实现*readyRead()*插槽。这个插槽做你想要的通信事情。事实上，在这个插槽内，服务器可以接收和发送给客户端消息，反之亦然。

这是一个典型的*readyread*：

```
 void Client::readyRead() {
     while (this->canReadLine()) {
            // here you get the message from the server
        const QString& line = QString::fromUtf8(this->readLine()).trimmed();
     }
 } 
```

这是发送消息的方法：

```
void Client::sendMessage(const QString& message) {
    this->write(message.toUtf8());
    this->write("\n");
} 
```

就这样！

# r - 如何按日期对文件列表进行排序？

> ID：13762224
> 
> 赞同：29
> 
> 时间：2012-12-07T11:31:40.853
> 
> 标签：r

我`list.files(path, pattern, full.names = TRUE)`用来获取特定目录中的文件列表。

默认情况下，文件按字母顺序排序。R中有什么方法可以让它们按日期排序吗？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-12-07T11:51:38.963

您可以使用该`file.info`功能获取文件的详细信息。获得这些详细信息后，您可以相应地对文件进行排序。例如，

```
details = file.info(list.files(pattern="*.csv")) 
```

给出一个数据框，*其中*包含修改和创建时间。您可以根据需要对该数据框进行排序。这里我按照修改时间排序，`mtime`：

```
details = details[with(details, order(as.POSIXct(mtime))), ]
files = rownames(details) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-26T03:39:47.217

请注意，您也可以按`accessed time`或排序`creation time`。
这是一个方便的并行函数，可以处理您喜欢的任何内容。

```
sort_files_by_date <- function(folder_path = '.', search_pattern = NULL, by = 'mtime'){

require(furrr)
require(magrittr)
require(stringr)
require(tidyverse)

  if (!by %>% str_detect('^(m|a|c)time$')) {
    stop('Argument `by` must be one of "mtime", "atime", or "ctime".')
  }

  file_names <-

    # Gets all the file paths for a given path and pattern
    list.files(path = folder_path, pattern = search_pattern, full.names = TRUE) %>%

    # Turns into a one-column tibble (see below)
    tibble(file_names = .)

  files_by_datetime <-

    suppressWarnings(
      future_map_dfr(
        .x = file_names,
        .f = file.info,
        .progress = TRUE,
        extra_cols = FALSE # passed to file.info for performance boost
      )
    ) %>%

    # gets expanded file info, then select the last-modified time and last-accessed time
    select(mtime, atime, ctime) %>%

    # reintroduce our original 'file_names'
    bind_cols(file_names) %>%

    # arrange by descending time (depending on the users choice)
    arrange(
      desc(
        case_when(
          (by == 'mtime') ~ mtime,
          (by == 'atime') ~ atime,
          (by == 'ctime') ~ ctime
        )
      )
    )

  return(files_by_datetime)

} 
```

# angularjs - 对服务与工厂感到困惑

> ID：13762228
> 
> 赞同：627
> 
> 时间：2012-12-07T11:31:55.327
> 
> 标签：angularjs

据我了解，在工厂内部时，我返回一个注入控制器的对象。在服务内部时，我正在使用`this`而不返回任何东西来处理对象。

我假设一个服务*总是一个单例*，并且一个**新的工厂对象**被注入到每个控制器中。然而，事实证明，工厂对象也是单例吗？

示例代码来演示：

```
var factories = angular.module('app.factories', []);
var app = angular.module('app',  ['ngResource', 'app.factories']);

factories.factory('User', function () {
  return {
    first: 'John',
    last: 'Doe'
  };
});

app.controller('ACtrl', function($scope, User) {
  $scope.user = User;
});

app.controller('BCtrl', function($scope, User) {
  $scope.user = User;
}); 
```

当改变`user.first`in`ACtrl`时，结果`user.first`in`BCtrl`也改变了，例如`User`是一个单例？

我的假设是在带有工厂的控制器中注入了一个新实例？

* * *

## 回答 #1

> 赞同：607
> 
> 时间：2012-12-07T13:17:36.387

**所有角度服务都是单例**：

文档（参见*单例服务*）：[https ://docs.angularjs.org/guide/services](https://docs.angularjs.org/guide/services)

> 最后，重要的是要认识到所有 Angular 服务都是应用程序单例。这意味着每个注入器只有一个给定服务的实例。

基本上服务和工厂的区别如下：

```
app.service('myService', function() {

  // service is just a constructor function
  // that will be called with 'new'

  this.sayHello = function(name) {
     return "Hi " + name + "!";
  };
});

app.factory('myFactory', function() {

  // factory returns an object
  // you can run some code before

  return {
    sayHello : function(name) {
      return "Hi " + name + "!";
    }
  }
}); 
```

查看有关 $provide 的演示文稿：http: [//slides.wesalvaro.com/20121113/#/](http://slides.wesalvaro.com/20121113/#/)

这些幻灯片用于 AngularJs 聚会之一：http: [//blog.angularjs.org/2012/11/more-angularjs-meetup-videos.html](http://blog.angularjs.org/2012/11/more-angularjs-meetup-videos.html)

* * *

## 回答 #2

> 赞同：385
> 
> 时间：2014-11-14T06:32:17.777

对我来说，当我意识到它们都以相同的方式工作时，我得到了启示：运行**一次**，存储它们获得的值，然后在通过依赖注入引用时咳出**相同的存储值。**

假设我们有：

```
app.factory('a', fn);
app.service('b', fn);
app.provider('c', fn); 
```

三者的区别在于：

1.  `a`的存储值来自 running `fn`，换句话说：`fn()`
2.  `b`的存储值来自`new`ing `fn`，换句话说：`new fn()`
3.  `c`的存储值来自首先通过`new`ing获取一个实例`fn`，然后运行`$get`该实例的一个方法

这意味着，在 angular 内部有一个类似于缓存对象的东西，每次注入的值只分配一次，当它们第一次被注入时，并且在哪里：

```
cache.a = fn()
cache.b = new fn()
cache.c = (new fn()).$get() 
```

这就是我们`this`在服务中使用并在提供者中定义 a的原因`this.$get`。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：95
> 
> 时间：2013-10-28T13:50:19.593

## [活生生的例子](http://jsfiddle.net/pkozlowski_opensource/PxdSP/14/)

## “你好世界”的例子

与`factory`/ `service`/ `provider`：

```
var myApp = angular.module('myApp', []);

//service style, probably the simplest one
myApp.service('helloWorldFromService', function() {
    this.sayHello = function() {
        return "Hello, World!"
    };
});

//factory style, more involved but more sophisticated
myApp.factory('helloWorldFromFactory', function() {
    return {
        sayHello: function() {
            return "Hello, World!"
        }
    };
});

//provider style, full blown, configurable version     
myApp.provider('helloWorld', function() {
    // In the provider function, you cannot inject any
    // service or factory. This can only be done at the
    // "$get" method.

    this.name = 'Default';

    this.$get = function() {
        var name = this.name;
        return {
            sayHello: function() {
                return "Hello, " + name + "!"
            }
        }
    };

    this.setName = function(name) {
        this.name = name;
    };
});

//hey, we can configure a provider!            
myApp.config(function(helloWorldProvider){
    helloWorldProvider.setName('World');
});

function MyCtrl($scope, helloWorld, helloWorldFromFactory, helloWorldFromService) {

    $scope.hellos = [
        helloWorld.sayHello(),
        helloWorldFromFactory.sayHello(),
        helloWorldFromService.sayHello()];
}​ 
```

* * *

## 回答 #4

> 赞同：57
> 
> 时间：2013-04-09T14:39:47.723

还有一种方法可以返回构造函数，这样您就可以在工厂中返回可***更新***的类，如下所示：

```
function MyObjectWithParam($rootScope, name) {
  this.$rootScope = $rootScope;
  this.name = name;
}
MyObjectWithParam.prototype.getText = function () {
  return this.name;
};

App.factory('MyObjectWithParam', function ($injector) {
  return function(name) { 
    return $injector.instantiate(MyObjectWithParam,{ name: name });
  };
}); 
```

因此，您可以在使用 MyObjectWithParam 的控制器中执行此操作：

```
var obj = new MyObjectWithParam("hello"), 
```

请参阅此处的完整示例：
[http ://plnkr.co/edit/GKnhIN?p=preview](http://plnkr.co/edit/GKnhIN?p=preview)

这里是讨论它的谷歌组页面：
[https ://groups.google.com/forum/#!msg/angular/56sdORWEoqg/b8hdPskxZXsJ](https://groups.google.com/forum/#!msg/angular/56sdORWEoqg/b8hdPskxZXsJ)

* * *

## 回答 #5

> 赞同：51
> 
> 时间：2013-12-23T00:01:26.110

以下是主要区别：

## 服务

句法：`module.service( 'serviceName', function );`

结果：当将 serviceName 声明为可注入参数时，您将获得传递给**的函数实例**`module.service`。

用法：对于**共享实用函数**很有用，只需将 () 附加到注入的函数引用即可调用。也可以运行`injectedArg.call( this )`或类似。

## 工厂

句法：`module.factory( 'factoryName', function );`

结果：当将 factoryName 声明为可注入参数时，您将获得通过调用传递给**的函数引用返回的值**`module.factory`。

用法：对于返回一个**“类”**函数可能很有用，然后可以新建该函数以创建实例。

还要检查[AngularJS 文档](http://docs.angularjs.org/guide/dev_guide.services.creating_services)和关于 stackoverflow 的类似问题，[对 service vs factory 感到困惑](https://stackoverflow.com/questions/13762228/confused-about-service-vs-factory)。

这是[使用 services 和 factory 的示例](http://jsfiddle.net/manishchhabra/Ne5P8/)。阅读有关[AngularJS 服务与工厂](http://blog.manishchhabra.com/2013/09/angularjs-service-vs-factory-with-example/)的更多信息。

* * *

## 回答 #6

> 赞同：27
> 
> 时间：2013-06-20T11:35:21.317

除了第一个答案之外，我认为 .service() 适用于以更面向对象的风格（C#/Java）编写代码的人（使用 this 关键字并通过原型/构造函数实例化对象）。

Factory 适用于编写更自然的 javascript/函数式编码的代码的开发人员。

看一下 angular.js 中 .service 和 .factory 方法的源代码——在内部它们都调用了 provider 方法：

```
 function provider(name, provider_) {
    if (isFunction(provider_)) {
      provider_ = providerInjector.instantiate(provider_);
    }
    if (!provider_.$get) {
      throw Error('Provider ' + name + ' must define $get factory method.');
    }
    return providerCache[name + providerSuffix] = provider_;
  }

  function factory(name, factoryFn) { \
    return provider(name, { $get: factoryFn }); 
  }

  function service(name, constructor) {
    return factory(name, ['$injector', function($injector) {
      return $injector.instantiate(constructor);
    }]);
  } 
```

* * *

## 回答 #7

> 赞同：25
> 
> 时间：2014-11-25T14:17:41.737

很简单：

.service - 注册函数将作为构造函数调用（又名“newed”）

.factory - 注册函数将作为简单函数调用

两者都被调用一次，导致一个单例对象被注入到应用程序的其他组件中。

* * *

## 回答 #8

> 赞同：20
> 
> 时间：2015-12-10T13:02:03.863

所有提供商的工作方式都相同。不同的方法`service`，，只是让你用更少的代码完成同样的事情。`factory``provider`

PS 还有`value`和`constant`。

从开头到`provider`结尾的每个特殊情况`value`都有一个额外的限制。所以要在它们之间做出决定，你必须问自己，哪一个可以让你用更少的代码完成你想要的。

这是一张图片，向您展示了我的意思：

[![在此处输入图像描述](../Images/45efa66223a7f0092054ad6ad87c629d.png)](http://www.simplygoodcode.com/2015/11/the-difference-between-service-provider-and-factory-in-angularjs/)

您可以在我从以下位置获得这张图片的博客文章中获得细分和参考指南：

[http://www.simplygoodcode.com/2015/11/the-difference-between-service-provider-and-factory-in-angularjs/](http://www.simplygoodcode.com/2015/11/the-difference-between-service-provider-and-factory-in-angularjs/)

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2015-04-02T01:39:04.460

“Factory” and “Service” are different ways of doing DI (Dependency injection) in angular.

So when we define DI using “service” as shown in the code below. This creates a new GLOBAL instance of the “Logger” object and injects it in to the function.

```
app.service("Logger", Logger); // Injects a global object 
```

When you define DI using a “factory” it does not create a instance. It just passes the method and later the consumer internally has to make calls to the factory for object instances.

```
app.factory("Customerfactory", CreateCustomer); 
```

Below is a simple image which shows visually how DI process for “Service” is different than “Factory”.

![enter image description here](../Images/6e922b869f4e93f07f163197fc202045.png)

Factory should be used When we want to create different types of objects depending on scenarios. For example depending on scenario we want to create a simple “Customer” object , or “Customer” with “Address” object or “Customer” with “Phone” object. [Here is a detailed explanation of this paragraph](http://www.codeproject.com/Articles/891718/AngularJS-Interview-Questions-and-Answers#WhatisaFactoryinAngular)

Service should be used When we have utility or shared functions to be injected like Utility , Logger , Error handler etc.

* * *

## 回答 #10

> 赞同：13
> 
> 时间：2014-07-29T07:56:13.240

这里有更多关于服务与工厂的示例，它们可能有助于了解它们之间的区别。基本上，一个服务调用了“new ...”，它已经被实例化了。工厂不会自动实例化。

## 基本示例

### 返回具有单个方法的类对象

这是一个具有单一方法的服务：

```
angular.service('Hello', function () {
  this.sayHello = function () { /* ... */ };
}); 
```

这是一个返回带有方法的对象的工厂：

```
angular.factory('ClassFactory', function () {
  return {
    sayHello: function () { /* ... */ }
  };
}); 
```

### 返回一个值

返回数字列表的工厂：

```
angular.factory('NumberListFactory', function () {
  return [1, 2, 3, 4, 5];
});

console.log(NumberListFactory); 
```

返回数字列表的服务：

```
angular.service('NumberLister', function () {
  this.numbers = [1, 2, 3, 4, 5];
});

console.log(NumberLister.numbers); 
```

两种情况下的输出都是相同的，即数字列表。

## 高级示例

### 使用工厂的“类”变量

在这个例子中，我们定义了一个 CounterFactory，它增加或减少一个计数器，您可以获取当前计数或获取已创建的 CounterFactory 对象的数量：

```
angular.factory('CounterFactory', function () {
  var number_of_counter_factories = 0; // class variable

  return function () {
    var count = 0; // instance variable
    number_of_counter_factories += 1; // increment the class variable

    // this method accesses the class variable
    this.getNumberOfCounterFactories = function () {
      return number_of_counter_factories;
    };

    this.inc = function () {
      count += 1;
    };
    this.dec = function () {
      count -= 1;
    };
    this.getCount = function () {
      return count;
    };
  }

}) 
```

我们使用`CounterFactory`来创建多个计数器。我们可以访问类变量来查看创建了多少计数器：

```
var people_counter;
var places_counter;

people_counter = new CounterFactory();
console.log('people', people_counter.getCount());
people_counter.inc();
console.log('people', people_counter.getCount());

console.log('counters', people_counter.getNumberOfCounterFactories());

places_counter = new CounterFactory();
console.log('places', places_counter.getCount());

console.log('counters', people_counter.getNumberOfCounterFactories());
console.log('counters', places_counter.getNumberOfCounterFactories()); 
```

这段代码的输出是：

```
people 0
people 1
counters 1
places 0
counters 2
counters 2 
```

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2015-12-17T00:06:25.133

**服务**风格：（*可能是最简单的一种*）返回实际函数：对于共享实用函数很有用，这些实用函数只需将 () 附加到注入的函数引用即可调用。

AngularJS 中的服务是一个包含一组函数的单例 JavaScript 对象

```
var myModule = angular.module("myModule", []);

myModule.value  ("myValue"  , "12345");

function MyService(myValue) {
    this.doIt = function() {
        console.log("done: " + myValue;
    }
}

myModule.service("myService", MyService);
myModule.controller("MyController", function($scope, myService) {

    myService.doIt();

}); 
```

**工厂**风格：（*更复杂但更复杂*）返回函数的返回值：在 java 中实例化一个像 new Object() 这样的对象。

工厂是一个创造价值的功能。当服务、控制器等需要从工厂注入的值时，工厂会按需创建该值。一旦创建，该值就会被所有需要注入的服务、控制器等重用。

```
var myModule = angular.module("myModule", []);

myModule.value("numberValue", 999);

myModule.factory("myFactory", function(numberValue) {
    return "a value: " + numberValue;
})  
myModule.controller("MyController", function($scope, myFactory) {

    console.log(myFactory);

}); 
```

**提供者**风格：（*完整的、可配置的版本*）返回函数的 $get 函数的输出：可配置。

AngularJS 中的提供者是您可以创建的最灵活的工厂形式。您可以像使用服务或工厂一样向模块注册提供程序，但您使用 provider() 函数代替。

```
var myModule = angular.module("myModule", []);

myModule.provider("mySecondService", function() {
    var provider = {};
    var config   = { configParam : "default" };

    provider.doConfig = function(configParam) {
        config.configParam = configParam;
    }

    provider.$get = function() {
        var service = {};

        service.doService = function() {
            console.log("mySecondService: " + config.configParam);
        }

        return service;
    }

    return provider;
});

myModule.config( function( mySecondServiceProvider ) {
    mySecondServiceProvider.doConfig("new config param");
});

myModule.controller("MyController", function($scope, mySecondService) {

    $scope.whenButtonClicked = function() {
        mySecondService.doIt();
    }

}); 
```

[src詹科夫](http://jsfiddle.net/pkozlowski_opensource/PxdSP/14/)

```
<!DOCTYPE html>
    <html ng-app="app">
    <head>
    	<script src="http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.0.1/angular.min.js"></script>
    	<meta charset=utf-8 />
    	<title>JS Bin</title>
    </head>
    <body ng-controller="MyCtrl">
    	{{serviceOutput}}
    	<br/><br/>
    	{{factoryOutput}}
    	<br/><br/>
    	{{providerOutput}}

    	<script>

    		var app = angular.module( 'app', [] );

    		var MyFunc = function() {

    			this.name = "default name";

    			this.$get = function() {
    				this.name = "new name"
    				return "Hello from MyFunc.$get(). this.name = " + this.name;
    			};

    			return "Hello from MyFunc(). this.name = " + this.name;
    		};

    		// returns the actual function
    		app.service( 'myService', MyFunc );

    		// returns the function's return value
    		app.factory( 'myFactory', MyFunc );

    		// returns the output of the function's $get function
    		app.provider( 'myProv', MyFunc );

    		function MyCtrl( $scope, myService, myFactory, myProv ) {

    			$scope.serviceOutput = "myService = " + myService;
    			$scope.factoryOutput = "myFactory = " + myFactory;
    			$scope.providerOutput = "myProvider = " + myProv;

    		}

    	</script>

    </body>
    </html>
```

[jsbin](http://jsbin.com/ohamub/1/edit?html,output)

```
<!DOCTYPE html>
<html ng-app="myApp">
<head>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.0.1/angular.min.js"></script>
	<meta charset=utf-8 />
	<title>JS Bin</title>
</head>
<body>
<div ng-controller="MyCtrl">
    {{hellos}}
</div>
	<script>

	var myApp = angular.module('myApp', []);

//service style, probably the simplest one
myApp.service('helloWorldFromService', function() {
    this.sayHello = function() {
        return "Hello, World!"
    };
});

//factory style, more involved but more sophisticated
myApp.factory('helloWorldFromFactory', function() {
    return {
        sayHello: function() {
            return "Hello, World!"
        }
    };
});

//provider style, full blown, configurable version     
myApp.provider('helloWorld', function() {

    this.name = 'Default';

    this.$get = function() {
        var name = this.name;
        return {
            sayHello: function() {
                return "Hello, " + name + "!"
            }
        }
    };

    this.setName = function(name) {
        this.name = name;
    };
});

//hey, we can configure a provider!            
myApp.config(function(helloWorldProvider){
    helloWorldProvider.setName('World');
});

function MyCtrl($scope, helloWorld, helloWorldFromFactory, helloWorldFromService) {

    $scope.hellos = [
        helloWorld.sayHello(),
        helloWorldFromFactory.sayHello(),
        helloWorldFromService.sayHello()];
}
	</script>

</body>
</html>
```

[jsfiddle](http://jsfiddle.net/pkozlowski_opensource/PxdSP/14/)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-11-21T01:09:55.897

基本区别在于，*提供者*允许将原始（非对象）、数组或回调函数值设置到工厂声明的变量中，因此如果返回一个对象，则必须显式声明并返回它。

另一方面，*服务*只能用于将服务声明的变量设置为对象，因此我们可以避免对象的显式创建和返回，而另一方面它允许使用*this*关键字。

或者简而言之，“*提供者*是一种更通用的形式，而*服务*仅限于对象”。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-01-22T22:59:00.780

这就是我在设计模式方面理解它们之间的区别的方式：

**服务**：返回一个类型，它将被更新以创建该类型的对象。如果使用 Java 类比，Service 返回一个**Java 类定义**。

**Factory**：返回一个可以立即使用的具体对象。在 Java 类比中，工厂返回一个**Java 对象**。

经常让人们（包括我自己）感到困惑的部分是，当您在代码中注入 Service 或 Factory 时，它们可以以相同的方式使用，在这两种情况下，您在代码中得到的是一个可以立即调用的具体对象。这意味着在服务的情况下，角度代表您在服务声明中调用“新”。我认为这是一个复杂的概念。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-06-30T11:50:55.803

有关简短说明，请参阅[https://stackoverflow.com/a/26924234/5811973](https://stackoverflow.com/a/26924234/5811973)。

有关详细说明，请参阅[https://stackoverflow.com/a/15666049/5811973](https://stackoverflow.com/a/15666049/5811973)。

同样来自 angularJs 文档： [![在此处输入图像描述](../Images/b376967440c7fc30476571bd8c1a2942.png)](https://i.stack.imgur.com/24jgv.png)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-02-27T19:23:04.320

在 AngularJS 中有三种处理业务逻辑的方法：（**受 Yaakov 的 Coursera AngularJS 课程启发**）它们是：

1.  服务
2.  工厂
3.  提供者

这里我们只讨论**Service** vs **Factory**

**服务**：

*句法：*

**应用程序.js**

```
 var app = angular.module('ServiceExample',[]);
 var serviceExampleController =
              app.controller('ServiceExampleController', ServiceExampleController);
 var serviceExample = app.service('NameOfTheService', NameOfTheService);

 ServiceExampleController.$inject = ['NameOfTheService'] //very important as this protects from minification of js files

function ServiceExampleController(NameOfTheService){
     serviceExampleController = this;
     serviceExampleController.data = NameOfTheService.getSomeData();
 }

function NameOfTheService(){
     nameOfTheService = this;
     nameOfTheService.data = "Some Data";
     nameOfTheService.getSomeData = function(){
           return nameOfTheService.data;
     }     
} 
```

**索引.html**

```
<div ng-controller = "ServiceExampleController as serviceExample">
   {{serviceExample.data}}
</div> 
```

服务的主要特点：

1.  *惰性实例化*：如果服务没有被注入，它将永远不会被实例化。因此，要使用它，您必须将其注入到模块中。

2.  *Singleton*：如果它被注入到多个模块中，那么所有模块都只能访问一个特定的实例。这就是为什么在不同的控制器之间共享数据非常方便。

**工厂**

现在让我们谈谈AngularJS中的工厂

首先让我们看一下*语法*：

**应用程序.js**：

```
var app = angular.module('FactoryExample',[]);
var factoryController = app.controller('FactoryController', FactoryController);
var factoryExampleOne = app.factory('NameOfTheFactoryOne', NameOfTheFactoryOne);
var factoryExampleTwo = app.factory('NameOfTheFactoryTwo', NameOfTheFactoryTwo);

//first implementation where it returns a function
function NameOfTheFactoryOne(){
   var factory = function(){
      return new SomeService();
    }
   return factory;
}

//second implementation where an object literal would be returned
function NameOfTheFactoryTwo(){
   var factory = {
      getSomeService : function(){
          return new SomeService();
       }
    };
   return factory;
} 
```

现在在控制器中使用上述两个：

```
 var factoryOne = NameOfTheFactoryOne() //since it returns a function
 factoryOne.someMethod();

 var factoryTwo = NameOfTheFactoryTwo.getSomeService(); //accessing the object
 factoryTwo.someMethod(); 
```

工厂特点：

1.  这种类型的服务遵循**工厂设计模式**。工厂可以被认为是创建新对象或方法的中心位置。

2.  这不仅会产生单例，还会产生可定制的服务。

3.  该`.service()`方法是一个始终生产相同类型服务的**工厂**，即单例。没有简单的方法来配置它的行为。该`.service()`方法通常用作不需要任何配置的快捷方式。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-07-01T18:01:53.830

多亏了 Pascal Precht 的一篇博文，这帮助我理解了其中的区别。

服务是模块上的一种方法，它采用名称和定义服务的函数。您可以在其他组件（如控制器、指令和过滤器）中注入和使用该特定服务。工厂是模块上的一种方法，它还带有一个名称和一个函数，用于定义工厂。我们也可以像处理服务一样注入和使用它。

使用 new 创建的对象使用其构造函数的原型属性的值作为原型，因此我找到了调用 Object.create() 的 Angular 代码，我相信它是实例化时的服务构造函数。然而，工厂函数实际上只是一个被调用的函数，这就是为什么我们必须为工厂返回一个对象字面量。

这是我为工厂找到的 Angular 1.5 代码：

```
var needsRecurse = false;
    var destination = copyType(source);

    if (destination === undefined) {
      destination = isArray(source) ? [] : Object.create(getPrototypeOf(source));
      needsRecurse = true;
    } 
```

factory() 函数的 Angular 源代码片段：

```
 function factory(name, factoryFn, enforce) {
    return provider(name, {
      $get: enforce !== false ? enforceReturnValue(name, factoryFn) : factoryFn
    });
  } 
```

它接受名称和传递的工厂函数，并返回一个具有相同名称的提供者，它有一个 $get 方法，这是我们的工厂函数。每当您向注入器询问特定依赖项时，它基本上都会通过调用 $get() 方法向相应的提供者询问该服务的实例。这就是创建提供程序时需要 $get() 的原因。

这是用于服务的 Angular 1.5 代码。

```
function service(name, constructor) {
    return factory(name, ['$injector', function($injector) {
      return $injector.instantiate(constructor);
    }]);
  } 
```

原来我们调用service()的时候，其实调用的是factory()！但是，它不只是将我们的服务构造函数按原样传递给工厂。它还传递了一个函数，该函数要求注入器通过给定的构造函数实例化一个对象。

换句话说，如果我们在某处注入 MyService，代码中会发生什么：

```
MyServiceProvider.$get(); // return the instance of the service 
```

再次重申它，服务调用工厂，这是相应提供程序上的 $get() 方法。此外，$injector.instantiate() 是最终使用构造函数调用 Object.create() 的方法。这就是我们在服务中使用“this”的原因。

对于 ES5，我们使用哪个无关紧要：service() 或 factory()，它始终是一个被调用的工厂，它为我们的服务创建一个提供者。

你也可以对服务做同样的事情。服务是一个构造函数，但是，它不会阻止我们返回对象字面量。所以我们可以把我们的服务代码写成它基本上和我们的工厂做同样的事情，或者换句话说，你可以把服务写成工厂来返回一个对象。

为什么大多数人建议使用工厂而不是服务？这是我从 Pawel Kozlowski 的书：Mastering Web Application Development with AngularJS 中看到的最佳答案。

> 工厂方法是将对象放入 AngularJS 依赖注入系统的最常用方法。它非常灵活，可以包含复杂的创建逻辑。由于工厂是常规函数，我们还可以利用新的词法作用域来模拟“私有”变量。这非常有用，因为我们可以隐藏给定服务的实现细节。”

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-10-29T15:24:55.557

*   使用**工厂，您实际上在****工厂**内部创建了一个**对象**并将其返回。
***   使用该**服务**，您只需一个使用关键字定义功能的**标准功能。** `this`*   使用**提供程序**，`$get`您可以定义一个，它可用于**获取**返回数据的对象。**

 *** * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-06-26T08:19:21.193

*我有一段时间感到困惑，我正在尽力在这里提供一个简单的解释。希望这会有所帮助！*

`angular .factory`两者`angular .service`都用于初始化服务并以相同的方式工作。

**唯一的区别是，您希望如何初始化您的服务。**

**两者都是单身人士**

* * *

```
var app = angular.module('app', []); 
```

* * *

# 工厂

## app.factory( `<service name>`, `<function with a return value>`)

如果您想从**您拥有的具有返回值的函数**初始化您的服务，则必须使用此`factory`方法。

例如

```
function myService() {
  //return what you want
  var service = {
    myfunc: function (param) { /* do stuff */ }
  }
  return service;
}

app.factory('myService', myService); 
```

**注入此服务时（例如，注入您的控制器）：**

*   Angular 会**调用**你给定的函数（as `myService()`）来返回对象
*   *Singleton* - 只调用一次，存储和传递同一个对象。

* * *

# 服务

## app.service( `<service name>`, `<constructor function>`)

如果你想从**构造函数**初始化你的服务（使用`this`关键字），你必须使用这个`service`方法。

例如

```
function myService() {
  this.myfunc: function (param) { /* do stuff */ }
}

app.service('myService', myService); 
```

**注入此服务时（例如，注入您的控制器）：**

*   Angular 将`new`使用您给定的函数（as `new myService()`）返回对象
*   *Singleton* - 只调用一次，存储和传递同一个对象。

* * *

注意：如果您使用`factory`with`<constructor function>`或`service`with `<function with a return value>`，它将不起作用。

* * *

# 示例 - 演示

*   **[Angular 服务与工厂](http://plnkr.co/edit/65ErFP5rIUrfgtW93JZn?p=preview)**
*   **[Angular 服务与工厂（带路由）](http://plnkr.co/edit/910nt34d8DTISdtzLD8E?p=preview)**

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2016-05-01T20:21:58.807

This would be the best and short answer for understanding Service Vs Factory Vs Provider

*Source*: [https://groups.google.com/forum/#!msg/angular/56sdORWEoqg/HuZsOsMvKv4J](https://groups.google.com/forum/#!msg/angular/56sdORWEoqg/HuZsOsMvKv4J)

Here what **ben** says with a **demo** [http://jsbin.com/ohamub/1/edit?html,output](http://jsbin.com/ohamub/1/edit?html,output)

"There are comments in the code illustrating the primary differences but I will expand on them a bit here. As a note, I am just getting my head around this so if I say anything that is wrong please let me know.

***Services***

**Syntax**: module.service( 'serviceName', function );

**Result**: When declaring serviceName as an injectable argument you will be provided the actual function reference passed to module.service.

**Usage**: Could be useful for sharing utility functions that are useful to invoke by simply appending () to the injected function reference. Could also be run with injectedArg.call( this ) or similar.

***Factories***

**Syntax**: module.factory( 'factoryName', function );

**Result**: When declaring factoryName as an injectable argument you will be provided the value that is returned by invoking the function reference passed to module.factory.

**Usage**: Could be useful for returning a 'class' function that can then be new'ed to create instances.

***Providers***

**Syntax**: module.provider( 'providerName', function );

**Result**: When declaring providerName as an injectable argument you will be provided the value that is returned by invoking the $get method of the function reference passed to module.provider.

**Usage**: Could be useful for returning a 'class' function that can then be new'ed to create instances but that requires some sort of configuration before being injected. Perhaps useful for classes that are reusable across projects? Still kind of hazy on this one." Ben

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-09-02T19:31:41.577

您可以通过这个类比来理解差异 - 考虑将返回一些值的普通函数和将使用 new 关键字实例化的构造函数之间的区别。因此创建工厂类似于创建将返回一些值的普通函数（原始或一个对象），而创建服务就像创建构造函数（OO 类），我们可以使用 new 关键字创建实例。唯一需要注意的是，当我们使用 Service 方法创建服务时，它会使用 AngularJS 支持的依赖注入机制自动创建它的实例**

# jquery - jQuery : $('div.myclass').height() 不准确

> ID：13762229
> 
> 赞同：6
> 
> 时间：2012-12-07T11:31:59.197
> 
> 标签：jquery, html

> **可能重复：**
> [为什么 jquery .height() 在 chrome 上得到不同的结果？](https://stackoverflow.com/questions/12709506/why-jquery-height-get-a-different-result-on-chrome)

我有一个`<div>`CSS 类`myclass`。CSS类如下：

```
.myclass {
    position: absolute;
    width: 192px;
    font-size: 11px;
    background-color: #FFF;
    padding: 15px 15px 0;
    box-shadow: 0 1px 3px rgba(34, 25, 25, 0.4);
    -moz-box-shadow: 0 1px 3px rgba(34, 25, 25, 0.4);
    -webkit-box-shadow: 0 1px 3px rgba(34, 25, 25, 0.4);    
    display: block;
} 
```

它没有指定高度。内容由 PHP 动态加载。在 jQuery 中`$(document).ready(function() { });`，我通过以下方式调试 div 的高度：

```
console.log($('div.myclass').height()); // the result = 330 
```

HTML：

```
<div class="myclass">
<img src="image.png" />
<p>Text here text here</p>
</div> 
```

但是，如果我`Inspect Element`在 Google Chrome 中使用该功能，它会显示**531px**。为什么有区别？我怎样才能获得`531px`价值？

**更新**：`$(this).outerHeight(); // 345px, as there is 15px margin`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-07T11:35:51.000

尝试将您的代码放在窗口加载处理程序中，因为您的元素具有`15px`填充属性，您应该使用`outerHeight`方法：

```
$(window).load(function(){
    console.log($('div.myclass').outerHeight()); 
}); 
```

请注意，`outerHeight`接受布尔值，false 表示排除边距，true 表示添加边距，还请注意，outerHeight 返回具有该类名称的第一个匹配元素的高度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T11:33:18.047

```
console.log($('div.myclass').outerHeight()); 
```

outherHeight 还将考虑填充和边距。

编辑：如果您不需要边距，请`innerHeight()`改用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T11:35:40.140

实际上是准确的。

*   [height()](http://api.jquery.com/height/)函数告诉你块元素的高度，没有填充和边距
*   [innerHeight()](http://api.jquery.com/innerHeight/)函数告诉你块元素的高度，有填充但没有边距
*   [outerHeight()](http://api.jquery.com/outerHeight/)函数告诉你带有填充和边距的块元素的高度

# python - 如何从类定义中将参数传递给元类？

> ID：13762231
> 
> 赞同：31
> 
> 时间：2012-12-07T11:32:07.417
> 
> 标签：python, metaprogramming, python-2.x, metaclass

我正在尝试在 python 2.7 中动态生成类，并且想知道您是否可以轻松地将参数从类对象传递给元类。

我读过[这篇](https://stackoverflow.com/questions/100003/what-is-a-metaclass-in-python)文章，这很棒，但并没有完全回答这个问题。目前我正在做：

```
def class_factory(args, to, meta_class):
    Class MyMetaClass(type):
        def __new__(cls, class_name, parents, attrs):
            attrs['args'] = args
            attrs['to'] = to
            attrs['eggs'] = meta_class

    class MyClass(object):
        metaclass = MyMetaClass
        ... 
```

但这需要我执行以下操作

```
MyClassClass = class_factory('spam', 'and', 'eggs')
my_instance = MyClassClass() 
```

有更清洁的方法吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2014-08-07T19:57:18.730

虽然这个问题是针对 Python 2.7 并且已经有一个很好的答案，但我对 Python 3.3 也有同样的问题，而且这个线程是我在 Google 上找到的最接近答案的东西。通过深入研究 Python 文档，我为 Python 3.x 找到了更好的解决方案，并且我正在与其他来这里寻找 Python 3.x 版本的人分享我的发现。

# 在 Python 3.x 中将参数传递给元类

在深入研究了 Python 的官方文档后，我发现 Python 3.x 提供了一种将参数传递给元类的本机方法，尽管并非没有缺陷。

只需在类声明中添加额外的关键字参数：

```
class C(metaclass=MyMetaClass, myArg1=1, myArg2=2):
  pass 
```

...并且它们像这样传递到您的元类中：

```
class MyMetaClass(type):

  @classmethod
  def __prepare__(metacls, name, bases, **kwargs):
    #kwargs = {"myArg1": 1, "myArg2": 2}
    return super().__prepare__(name, bases, **kwargs)

  def __new__(metacls, name, bases, namespace, **kwargs):
    #kwargs = {"myArg1": 1, "myArg2": 2}
    return super().__new__(metacls, name, bases, namespace)
    #DO NOT send "**kwargs" to "type.__new__".  It won't catch them and
    #you'll get a "TypeError: type() takes 1 or 3 arguments" exception.

  def __init__(cls, name, bases, namespace, myArg1=7, **kwargs):
    #myArg1 = 1  #Included as an example of capturing metaclass args as positional args.
    #kwargs = {"myArg2": 2}
    super().__init__(name, bases, namespace)
    #DO NOT send "**kwargs" to "type.__init__" in Python 3.5 and older.  You'll get a
    #"TypeError: type.__init__() takes no keyword arguments" exception. 
```

您必须忽略`kwargs`对`type.__new__`and的调用`type.__init__`（Python 3.5 及更早版本；请参阅“更新”），否则会`TypeError`由于传递太多参数而导致异常。这意味着——当以这种方式传入元类参数时——我们总是必须实现`MyMetaClass.__new__`并`MyMetaClass.__init__`防止我们的自定义关键字参数到达基类`type.__new__`和`type.__init__`方法。 `type.__prepare__`似乎可以优雅地处理额外的关键字参数（因此为什么我在示例中传递它们，以防万一有一些我不知道依赖的功能`**kwargs`），所以定义`type.__prepare__`是可选的。

### 更新

在 Python 3.6 中，它似乎`type`已经过调整，`type.__init__`现在可以优雅地处理额外的关键字参数。您仍然需要定义`type.__new__`（抛出`TypeError: __init_subclass__() takes no keyword arguments`异常）。

# 分解

在 Python 3 中，您通过关键字参数而不是类属性指定元类：

```
class MyClass(metaclass=MyMetaClass):
  pass 
```

这句话大致翻译为：

```
MyClass = metaclass(name, bases, **kwargs) 
```

...其中`metaclass`是您传入的“元类”参数的值，`name`是您的类的字符串名称 ( `'MyClass'`)，`bases`是您传入的任何基类（`()`在这种情况下是零长度元组），并且`kwargs`是任何未捕获的关键字参数（`dict` `{}`在这种情况下为空）。

进一步细分，该声明大致翻译为：

```
namespace = metaclass.__prepare__(name, bases, **kwargs)  #`metaclass` passed implicitly since it's a class method.
MyClass = metaclass.__new__(metaclass, name, bases, namespace, **kwargs)
metaclass.__init__(MyClass, name, bases, namespace, **kwargs) 
```

... where`kwargs`总是`dict`我们传递给类定义的未捕获关键字参数。

分解我上面给出的例子：

```
class C(metaclass=MyMetaClass, myArg1=1, myArg2=2):
  pass 
```

...大致翻译为：

```
namespace = MyMetaClass.__prepare__('C', (), myArg1=1, myArg2=2)
#namespace={'__module__': '__main__', '__qualname__': 'C'}
C = MyMetaClass.__new__(MyMetaClass, 'C', (), namespace, myArg1=1, myArg2=2)
MyMetaClass.__init__(C, 'C', (), namespace, myArg1=1, myArg2=2) 
```

这些信息大部分来自[Python 的“自定义类创建”文档](https://docs.python.org/3.3/reference/datamodel.html#customizing-class-creation)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-07T12:55:43.837

是的，有一个简单的方法可以做到这一点。在元类的`__new__()`方法中，只需检查作为最后一个参数传递的类字典。声明中定义的任何内容`class`都将在那里。例如：

```
class MyMetaClass(type):
    def __new__(cls, class_name, parents, attrs):
        if 'meta_args' in attrs:
            meta_args = attrs['meta_args']
            attrs['args'] = meta_args[0]
            attrs['to'] = meta_args[1]
            attrs['eggs'] = meta_args[2]
            del attrs['meta_args'] # clean up
        return type.__new__(cls, class_name, parents, attrs)

class MyClass(object):
    __metaclass__ = MyMetaClass
    meta_args = ['spam', 'and', 'eggs']

myobject = MyClass()

from pprint import pprint
pprint(dir(myobject))
print myobject.args, myobject.to, myobject.eggs 
```

输出：

```
['__class__',
 '__delattr__',
 '__dict__',
 '__doc__',
 '__format__',
 '__getattribute__',
 '__hash__',
 '__init__',
 '__metaclass__',
 '__module__',
 '__new__',
 '__reduce__',
 '__reduce_ex__',
 '__repr__',
 '__setattr__',
 '__sizeof__',
 '__str__',
 '__subclasshook__',
 '__weakref__',
 'args',
 'eggs',
 'to']
spam and eggs 
```

**更新**

上面的代码只能在 Python 2 中工作，因为指定元类的语法在 Python 3 中以不兼容的方式进行了更改。

让它在 Python 3 中工作（但不再在 Python 2 中）非常简单，只需将定义更改`MyClass`为：

```
class MyClass(metaclass=MyMetaClass):
    meta_args = ['spam', 'and', 'eggs'] 
```

还可以通过“即时”创建基类来解决语法差异并生成适用于 Python 2 和 3 的代码，这涉及显式调用元类并使用创建的类作为元类的基类被定义。

```
class MyClass(MyMetaClass("NewBaseClass", (object,), {})):
    meta_args = ['spam', 'and', 'eggs'] 
```

Python 3 中的类构造也进行了修改，并添加了支持以允许其他方式传递参数，并且在某些情况下使用它们可能比此处显示的技术更容易。这完全取决于您要完成的工作。

有关新版本 Python 中该过程的描述，请参阅@John Crawford 的详细[答案。](https://stackoverflow.com/a/25191150/355230)

# c# - XNA C# - 如何在不按下的情况下按下按钮

> ID：13762232
> 
> 赞同：0
> 
> 时间：2012-12-07T11:32:06.900
> 
> 标签：c#, button, xna, pressed

我有一个起始图像，当你按下回车键时，它会进入游戏。问题是因为这是一张图片，所以必须按住按钮才能保持显示游戏画面。有没有办法让它一旦你按下按钮，图像就会保持关闭？

```
Update Method:

helpScreen = new HelpScreen(this); 

if (!helpScreen.gamestarted && Keyboard.GetState().IsKeyDown(Keys.Enter))
{
    helpScreen.gamestarted = true;
}

Draw Method:

if (!helpScreen.gamestarted)
{
    helpScreen.Draw(spriteBatch);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:36:15.297

我可以问一下，您是否对输入进行了任何其他编码？或者您是从这个帮助屏幕开始的？因为这涵盖了输入处理的基础知识。

您似乎将其视为事件驱动系统，而实际上它是一个游戏循环。这意味着您检查每个循环的值并将输出基于该值，而不是通过事件（例如单击）

我要做的是记录前一个值，然后在下一个循环中，将该值与当前值进行比较。更新方法中的示例：

```
//Outside of Update loop declare
KeyboardState previousState = Keyboard.GetState();

//Inside update loop
if (Keyboard.GetState().IsKeyUp(Keys.Enter) && previousState.IsKeyDown(Keys.Enter))
{
        helpScreen = null;     } 
```

这将在按下并释放 Enter 按钮时触发。我将对该代码执行许多其他更改，但这应该为您指明解决此特定问题的正确方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:19:25.303

将状态存储在您的主游戏类中：

```
private bool gameStarted = false; 
```

在您的更新方法中检查输入：

```
if (!gameStarted && Keyboard.GetState().IsKeyDown(Keys.Enter))
{
    gameStarted = true;
} 
```

稍后在您的 draw 方法中仅绘制开始图像，如果游戏尚未开始：

```
if (!gameStarted)
{
    helpScreen.Draw(spriteBatch);
} 
```

这样，一旦玩家按下按钮，它就不会再次被绘制。使用通用`gameStarted`字段也可以阐明您的意图，您可以以简单自然的方式将其他游戏逻辑基于其状态。

# c# - 与 Task.ConfigureAwait(false) 的线程同步

> ID：13762241
> 
> 赞同：6
> 
> 时间：2012-12-07T11:32:39.943
> 
> 标签：c#, .net, async-await

考虑以下代码：

```
using System.IO;
using System.Threading.Tasks;

public class MyClass
{
    private int count;

    public async Task<int> MyReadAsync(Stream stream, byte[] buffer)
    {
        var read = await
            stream.ReadAsync(buffer, 0, buffer.Length).ConfigureAwait(false);
        this.count += read;
        return read;
    }
} 
```

我们假设这个`MyReadAsync`方法是直接从 WPF 应用程序的事件处理程序中调用的，如下：

```
private async void OnWhatever(object sender, EventArgs args)
{
    await myObject.MyReadAsync(this.stream, this.buffer);
} 
```

以下是我的问题：

1.  使用`ConfigureAwait(false)`允许以该行开头的代码部分`this.count += read;`可以在任何线程池线程上执行，对吗？
2.  对于 的两个单独调用`MyReadAsync`，不能保证以开头的代码部分`this.count += read;`将在同一个线程上执行，对吗？
3.  如果 1 和 2 是正确的，那么在我看来`this.count += read;`应该使用适当的线程同步原语来保护代码，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T11:45:11.327

Yes, you are correct. To avoid any thread synchronization issues you should apply appropriate locking around the line that is incrementing the count

# javascript - 难以使用全局变量和 $.getScript

> ID：13762243
> 
> 赞同：2
> 
> 时间：2012-12-07T11:32:45.123
> 
> 标签：javascript, jquery, getscript

我有以下无法正常工作的脚本：

```
function getWidgetContent( widget ) {
    if(widget.script!=null){
        $global_widget_id = widget.widget_id;
        $.getScript( "js/" + widget.script, function() {
            $( ".widget_header_title_" + widget.widget_id ).append( widget.title );
        });
    }
} 
```

这被称为如下：

```
for ( j = 0; j <= widget_data.d.length - 1; j++ ) {
    getWidgetContent( widget_data.d[j] );
} 
```

我认为这将在函数内运行函数，为全局值分配一个值，然后运行`$.getScript`循环的每次迭代。但这并没有发生。它似乎遍历循环，直到循环完成，假设它循环 3 次，每次为全局值分配一个值，即 3 次，然后它最终执行`$.getScript`.

当然这不会起作用，因为它现在只会使用 $.getScript 文件中全局值的最后分配 3 次......

如何更改它，以便它为全局变量分配一个值，运行`$.getScript`. 完成后，继续原始循环，将下一个值分配给全局变量，运行`$.getScript`直到循环完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:44:07.977

getScript 方法是异步的，因此在您从服务器获得包含您的脚本值的响应之前，循环会运行下一次迭代，
这就是我们必须发送回调函数的原因。javascript 知道服务器响应后该做什么。因此，虽然普通循环在这里无法帮助我们，但我们可以使用递归函数。发生的事情是我们得到回调函数来调用 loopFunc 然后移动到集合/数组中的下一个项目。我希望这能给你一些启发：

```
var getWidgetContent = function(wiget, loopFunc) {
  if(widget.script!=null){
    $global_widget_id = widget.widget_id
    $.getScript( "js/" + widget.script, function() {
        $( ".widget_header_title_" + widget.widget_id ).append( widget.title )
        loopFunc() //now we got a response from the server and want to move on to the next script tag.
    })
  }
}

var i = 0
(function loopFunc(){ //we define a function and call it instantly
  if(i < widget_data.d.length){ 
    getWidgetContent(widget_data.d,loopFunc) //now we call the getWidgetContent but we send in the current function aswell
    console.log($global_widget_id) // this is going to change each time
    i += 1
  }
}()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T01:15:15.267

看着其他的答案，我只能想到做。更改您的实现：

```
 $.getScript( "js/" + widget.script, function() {
     $( ".widget_header_title_" + widget.widget_id ).append( widget.title );
 }); 
```

到相应的ajax调用，但不是异步的

```
$.ajax({
  url: "js/" + widget.script,
  dataType: "script",
  async: false,
  success: function() {    
      $( ".widget_header_title_" + widget.widget_id ).append( widget.title );    
  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T03:06:27.987

`getWidgetContent` *正在*执行`getScript`，但`getScript`立即返回，而不是等待网络（与 CPU 相比相对较慢）完成获取脚本。这不是一个错误，而是一件*了不起*的事情——通过异步编程，您可以在 CPU 上完成大量工作，如果您不想等待比 CPU 慢得多的事情，您不必等待！

要回答您的问题：

*   要在脚本请求完成时设置全局变量，只需将变量赋值移动到您的回调函数中。
*   简单地让所有人`getScripts`同时运行会更快，但如果你真的不能让第二个`getScript`开始直到第一个完成，`getWidgetContent`只调用一次，让你的回调确定下一个小部件并`getWidgetContent`再次调用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T10:22:39.510

你得到这个是因为 $.getScript 是一个异步方法。在这种情况下，这意味着该方法在脚本完成加载之前立即返回，并继续执行之后的代码。

这意味着类似：

```
$.getScript('a.js', function () {
    console.log('Loaded a');
    }); 
$.getScript('b.js', function () {
    console.log('Loaded b');
    }); 
$.getScript('c.js', function () {
    console.log('Loaded c');
    }); 
// Output could be:
// Loaded c
// Loaded a
// Loaded b 
```

这意味着可以同时完成所有脚本文件请求，但这也意味着顺序不是确定性的（固定的）。

## 使用承诺

如果您使用的是 jQuery 1.5 及更高版本，则可以通过链接[Promise](http://wiki.commonjs.org/wiki/Promises/A)来确保`getWidgetContent`按顺序调用。但是，这种方法的缺陷是您*不会*同时加载所有脚本请求，请求将在前一个完成后一个接一个地发送。

 *确保返回 $.getScript 的结果，它是一个[延迟对象](http://api.jquery.com/category/deferred-object/)（我在这里做了最小的更改，只需注意`return`语句）：

```
function getWidgetContent( widget ) {
  if(widget.script!=null){
    $global_widget_id = widget.widget_id;
    return $.getScript( "js/" + widget.script, function() {
        $( ".widget_header_title_" + widget.widget_id ).append( widget.title );
        });
  }
  return null;
} 
```

实现前一个承诺后执行新 getWidgetContent 的新方法（完成前一个操作）：

```
function doGetWidgetContentAfter(promise, widget) {
  return promise.then(function () {
      return getWidgetContent( widget );
      });
} 
```

调用它：

```
var promise = $.when(true);
for ( j = 0; j <= widget_data.d.length - 1; j++ ) {
  promise = doGetWidgetContentAfter( promise, widget_data.d[j] );
} 
```

### 解释

什么`doGetWidgetContentAfter`是当说`promise`完成*时*调用`getWidgetContent`函数`widget`。该`then`方法返回一个当任何内部方法承诺完成时完成的承诺。

我知道它开始听起来很复杂，但是请尝试一下并尝试一下。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T11:39:12.123

尝试将变量分配给窗口命名空间：

```
window.global_widget_id = "foo"; 
```

然后，您可以像这样引用它：

```
var myId = window.global_widget_id; 
```

并覆盖它：

```
window.global_widget_id = "newId"; 
```

~~（`$`变量赋值中的 jQuery 也可能会混淆。）~~（不正确。忽略最后一部分。）

**编辑：**

看起来`$.getScript()`文件不是全局范围的一部分：[jQuery的getScript - 将文件包括在主范围中？](https://stackoverflow.com/questions/8953620/jquerys-getscript-including-files-into-the-main-scope).

也许您可以`$.getScript()`从回调而不是嵌入式调用函数`document.ready()`，并通过这种方式传递变量？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T10:32:10.723

也许它可以帮助你，将函数放在循环中可以重写其中包含的变量

在我看来，这样做：

```
function getWidgetContent(widget) {
  if(w_script != null){
    // And make variable for make sure each values come
    // from parent function and not from `$.getScript`
    var w_script = widget.script;
    var w_widget_id = widget.widget_id;
    var w_title = widget.title;
    $.getScript( "js/" + w_script, function() {
        $( ".widget_header_title_" + w_widget_id ).append( w_title );
    });
  }
} 
```

这个案子面对我，但我面对它`$.ajax`，我试着像上面那样做变量如果成功给我打电话，祝你好运

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-17T10:40:14.757

如果您不想按顺序执行代码，那么您将不得不稍微重写它。`getScript`在前一个调用其回调之前，不应进行下一次调用。这可以通过`getWidgetContent`从回调中调用来完成......

就像是：

```
function getWidgetContent(d, index) {
  var widget = d[index];
  if(widget.script!=null){
    $global_widget_id = widget.widget_id;
    $.getScript( "js/" + widget.script, function() {
        $( ".widget_header_title_" + widget.widget_id ).append( widget.title );
        if (index <= d.length - 1)
            getWidgetContent(d,index+1); //call the next one
    });
  }
}

//Start the calls
getWidgetContent( widget_data.d,0); 
```*

# javascript - 语法 - 如何将 eq(i) 添加到变量中？

> ID：13762244
> 
> 赞同：1
> 
> 时间：2012-12-07T11:32:46.743
> 
> 标签：javascript, jquery

我拼命地尝试`element`与 index-selector结合使用`eq()`。语法有什么问题吗？

```
function setVisibleRange(element) {
    for ( -- something with i -- ) {};
     $(element:eq(i).show();
};

setVisibleRange($("ul li")); 
```

顺便说一句，有没有更好的方法来处理一系列元素？像`eq(0, 4)`什么？for 循环只是一种解决方法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:34:29.317

您可以`eq`使用`.`运算符调用元素，

**[现场演示](http://jsfiddle.net/rajaadil/chD5R/)**

```
function setVisibleRange(element) {
    for ( i=0; i < element.length; i++)
        element.eq(i).show();
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T11:38:07.953

```
function setVisibleRange(element) {
    for (var i=element.length; i--;) {
        element.eq(i).show();
    }
}

setVisibleRange($("ul li")); 
```

对于类似的事情`eq(0, 4)`，我会这样做：

```
$("ul li:lt(5)").show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T11:50:45.403

关于组合变量和文本：

```
$(element + ':eq(' + i + ')') 
```

您也可以使用自定义过滤器功能。[jQuery 过滤器](http://api.jquery.com/filter/)

# ruby-on-rails - 在 Rails 中使用带有茉莉花的 Spork

> ID：13762245
> 
> 赞同：5
> 
> 时间：2012-12-07T11:32:52.560
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, jasmine, spork

几个月以来，我在 Rails 应用程序中成功使用了 spork 和 rspec。现在**我尝试将茉莉花添加**到这个游戏中，所以我添加到了我的 Gemfile

```
gem 'headless'
gem 'jasmine'
gem 'jasmine-rails' 
```

**Jasmine 在独立模式下运行良好，**但每次运行都需要启动 firefox，这对用户不是很友好，我注意到它可以与 spork 一起使用。但是**当我启动 spork 时**：

```
Using RSpec
Preloading Rails environment
Loading Spork.prefork block...
No runner found, attempting to compile...
make: *** No rule to make target `clean'.  Stop.
which: no gmake in (/usr/lib/ruby/gems/1.9.1/bin:/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/opt/java/bin:/opt/java/db/bin:/usr/bin/core_perl:/opt/qt/bin:/home/user/.gem/ruby/1.9.1/bin/)
which: no qmake-qt4 in (/usr/lib/ruby/gems/1.9.1/bin:/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/opt/java/bin:/opt/java/db/bin:/usr/bin/core_perl:/opt/qt/bin:/home/user/.gem/ruby/1.9.1/bin/)
Failure to open file: /usr/lib/ruby/gems/1.9.1/gems/jasmine-headless-webkit-0.8.4/ext/jasmine-webkit-specrunner/Makefile
Unable to generate makefile for: specrunner.pro
true
/usr/lib/ruby/1.9.1/fileutils.rb:1371:in `initialize': Permission denied - /usr/lib/ruby/gems/1.9.1/gems/jasmine-headless-webkit-0.8.4/ext/jasmine-webkit-specrunner/Makefile (Errno::EACCES)
from /usr/lib/ruby/1.9.1/fileutils.rb:1371:in `open'
from /usr/lib/ruby/1.9.1/fileutils.rb:1371:in `block in copy_file'
from /usr/lib/ruby/1.9.1/fileutils.rb:1370:in `open'
from /usr/lib/ruby/1.9.1/fileutils.rb:1370:in `copy_file'
from /usr/lib/ruby/1.9.1/fileutils.rb:477:in `copy_file'
from /usr/lib/ruby/1.9.1/fileutils.rb:396:in `block in cp'
from /usr/lib/ruby/1.9.1/fileutils.rb:1515:in `block in fu_each_src_dest'
from /usr/lib/ruby/1.9.1/fileutils.rb:1531:in `fu_each_src_dest0'
from /usr/lib/ruby/1.9.1/fileutils.rb:1513:in `fu_each_src_dest'
from /usr/lib/ruby/1.9.1/fileutils.rb:395:in `cp'
from extconf.rb:10:in `<main>'
Permission denied - /usr/lib/ruby/gems/1.9.1/gems/jasmine-headless-webkit-0.8.4/ext/jasmine-webkit-specrunner/jasmine-webkit-specrunner (Errno::EACCES) 
```

有什么办法解决这个问题吗？有没有其他选择可以对茉莉花进行背景测试？

我用 ：

*   archlinux
*   红宝石 1.9.3p327
*   导轨 3.2.8
*   spork 0.9.2
*   茉莉花1.3.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:02:33.710

我建议使用[https://github.com/netzpirat/guard-jasmine](https://github.com/netzpirat/guard-jasmine)。

您最终将不得不安装 phantomJS（可能还有 guard），但 guard-jasmine 基本上会监控您的 jasmine 规格，并且每当发生更改时，它都会在控制台中运行您的测试。如果需要，它还提供了一个包装器来在浏览器中运行 jasmine。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T02:13:57.783

你的 qmake 和 qmake-qt4 是什么版本？您可以通过运行`qmake-qt4 -v`和来获取它们`qmake -v`。

显然，您需要为 jasmine-headless-webkit 安装 Qt 4.7 版本。您可能安装了较低版本。检查此问题：[未找到运行器，正在尝试编译...](https://github.com/johnbintz/jasmine-headless-webkit/issues/80)

请参考[此处](http://johnbintz.github.com/jasmine-headless-webkit/)的注释，尝试升级到较新版本的 Qt 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T10:07:11.880

还有另一种避免打开 Firefox-PhantomJS 的方法。它取代了需要使用 Firefox 的 Selenium 驱动程序。PhantomJS 使用另一种方法 - WebKit 的无头版本。您可以通过查看[此 Railscast](http://railscasts.com/episodes/391-testing-javascript-with-phantomjs?view=asciicast)获得更多有用的信息。

# sencha-touch-2 - 如何在sencha touch 2中添加滑动效果

> ID：13762247
> 
> 赞同：1
> 
> 时间：2012-12-07T11:32:54.013
> 
> 标签：sencha-touch-2

我需要在sencha touch 2中显示带有滑动效果的视图。应该使用什么方法？我正在
使用

Ext.getCmp('mainpanel').setActiveItem('secondview');

或者

```
Ext.getCmp('mainpanel').animateActiveItem(1, {type: 'slide', direction: 'right'}); 
Ext.getCmp('mainpanel').add('categorylist'); 
```

但在某些情况下，不会呈现滑动效果。在什么条件下会产生滑动效果？任何视图强制的配置？

主面板代码有一个视图 xtype 'carouselcontainer'，其代码如下所示

```
Ext.define("MyApp.view.CarouselContainer",{
    extend     : 'Ext.Panel',
    id         : 'carouselcontainer',
    xtype      : 'carouselcontainer',
    requires   : [
                  'Ext.Carousel','Ext.data.Store','Ext.dataview.List'
                  ],
    config      :{
        layout  :'card',
        items   :[{

                xtype : 'carousel',
                id:'car1',
                animation: {
                    type: 'slide',
                    direction: 'left'
                },

                listeners:{

                    initialize : function() {
                         Ext.Ajax.request({
                         url: url_host+'GetCategory?rest_id='+rest_id,
                         success: function(response, opts) {
                         var h = Math.ceil(Ext.Viewport.getWindowHeight() * 0.7);
                         var padvalue=h*.2;
                         var padvalue2=h/8.5;
                         var w = Math.ceil(Ext.Viewport.getWindowWidth() * 0.9);

                         obj = Ext.decode(response.responseText);
                         lengthArray=obj.category.length;
                         console.log('lengthArray'+lengthArray);
                         var division=Math.floor(lengthArray/num1);
                         console.log('division'+division);
                         var modulus=lengthArray%num1;
                         console.log('modulus'+modulus);
                         if(modulus>0) {
                             var pages=division+1;
                         }else {
                              var pages=division;
                         }

                    start='';

                    console.log(pages);

                          for ( i=0;i<pages;i++)
                      {
                              t= new Date().getTime();

                              if(i==0)
                              {
                                  start=0; 
                              } 
                              else
                              {
                                  start=(i*num1)-1;   
                              }

                                str=Ext.create("MyApp.store.HomePage");

                                str.getProxy().setExtraParam('rest_id',rest_id);
                                str.getProxy().setExtraParam('start1',start);
                                str.getProxy().setExtraParam('end',num1);
                                str.getProxy().setExtraParam('t',t);

                          Ext.getCmp('car1').add([

                                                   {
                                                        xtype: 'dataview',
                                                        //id:'li'+start,
                                                        scroll: false,
                                                        scrollable : {
                                                          direction     : false,
                                                          directionLock : true
                                                        },
                                                        items:[ 

                                                        ],
                                                        listeners: {
                                                            itemtap:function(item, num, record, ev, e, eOpts) {

                                                                if(ev.data.category_name=='contact us') {

                                                                    Ext.getCmp('mainpanel').setActiveItem('contactcontainer');
                                                                    Ext.getCmp('contactcontainer').setActiveItem(2);
                                                                }
                                                                else if(ev.data.category_name=='Get Social')
                                                                    {
                                                                    Ext.getCmp('mainpanel').setActiveItem('contactcontainer');
                                                                    Ext.getCmp('contactcontainer').setActiveItem(1);
                                                                    }
                                                                else
                                                                    {
                                                                    //console.log(Ext.getCmp('categorylist').getStore());

                                                                    Ext.getCmp('mainpanel').animateActiveItem(1, {type: 'slide', direction: 'right'});
                                                                Ext.getCmp('mainpanel').add('categorylist');
                                                                    /*Ext.getCmp('categorylist').getStore().getProxy().setExtraParam('type',ev.data.client_category_id);*/
                                                                    Ext.getCmp('categorylist').getStore().getProxy().setExtraParam('cat_id',ev.data.client_category_id);
                                                                    Ext.getCmp('categorylist').getStore().getProxy().setExtraParam('rest_id',rest_id);
                                                                    Ext.getCmp('mainpanel').setActiveItem('categorylist');
                                                                    Ext.getCmp('categorylist').setActiveItem(0);
                                                                    Ext.getCmp('categorylist').getStore().load();
                                                                    //Ext.getCmp('categorylist').refresh();

                                                                //  console.log(Ext.getCmp('categorylist').getStore().url);

                                                                    }

                                                        }

                                                        },
                                                        store:str,
                                                        itemTpl: '<div id="{client_category_id}" style="margin-top:'+padvalue+'px;  float:left;text-align:center;display:block;width:49%;height:'+padvalue2+'px"><img src="{image}" /><!--<h2>{client_category_id}</h2>--!><p>{category_name}</p></div>' 

                                                    }
                                               ]);

                         str.load();

                      }
                   },
                   failure: function(response, opts) {
                      console.log('server-side failure with status code ' + response.status);
                   }
                });

            }

                    }

                }]
        }
}); 
```

主面板的代码是

```
Ext.define("MyApp.view.Main", {
    extend: 'Ext.Panel',
    requires: [
        'Ext.TitleBar',
        'Ext.Video'
    ],
    config: {
        id : 'mainpanel',
        layout : 'card',
        items : [
                 {
                     xtype : 'maintabpanel'
                 },
                 {
                     xtype:'contactcontainer'
                 } ,
                 {
                    xtype : 'categorylist'
                 },
                 {
                        xtype : 'categorylistsecond'
                     } 
                 ],

}); 
```

而 maintabpanel 是

```
Ext.define("MyApp.view.MainTab", {
    extend: 'Ext.Panel',
    requires: ['Ext.data.proxy.JsonP'],
    xtype : 'maintabpanel',
    id : 'maintabpanel',
    config: {

                    id : 'home',
                    iconCls: 'home',
                    scrollable: false,
                    layout:'fit',
                    items: [
                            {
                        xtype:'panel',
                        id:'home_panel',
                        layout:'card',
                        items:[{
                                    xtype      : 'homeview'
                               },
                               ]
                            }
                        ]

            }
}); 
```

而'homeview'的那个是

```
Ext.define("MyApp.view.Home",{
    extend     : 'Ext.Panel',
    id         : 'homeview',
    xtype      : 'homeview',
    requires   : [
                  'Ext.TitleBar',
                  'Ext.SegmentedButton',
                  'Ext.dataview.List',
                  'Ext.data.Store',
                  'Ext.field.Select'],
    config      :{
    layout  :'fit',
    items   :[{

            xtype : 'toolbar',
            docked: 'top',  
                  //style :'background:url(resources/images/home-logo.png) no-repeat left;',
                  title:"Welcome"
            //flex  :.75//changed

            },
            {
                xtype:'carouselcontainer'
            }]
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:24:13.293

你需要在你的主面板中添加

```
布局： {
            类型：'卡'，
            动画： {
                类型：'幻灯片'，
                方向：“左”
            }
        }

```

或者

```
panel.animateActiveItem(1, {type:'slide', direction:'left'});

```

也将工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:25:03.890

看看[`animateActiveItem`](http://docs.sencha.com/touch/2-1/#!/api/Ext.Container-method-animateActiveItem)

第一个参数要么是卡片布局中视图的索引，要么是对该视图的引用。第二个参数是动画。

这是一个例子：

```
Ext.getCmp('mainpanel').animateActiveItem(1, {type: 'slide', direction: 'right'}); 
```

希望这可以帮助

# android - 重置首选项的默认值

> ID：13762248
> 
> 赞同：10
> 
> 时间：2012-12-07T11:33:00.073
> 
> 标签：android, android-layout, android-preferences

我将 CheckBoxPreference 用于设置屏幕。XML 是：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen  xmlns:android="http://schemas.android.com/apk/res/android" >
    <CheckBoxPreference android:key="includeAddress"
                    android:title="Include Address" 
                    android:summary=""
                    android:defaultValue="true" />
    <CheckBoxPreference android:key="rememberName"
                    android:title="Remeber Name" 
                    android:summary=""
                    android:defaultValue="false" />
</PreferenceScreen> 
```

我在应用程序中更改值。用户注销后，必须将其设置为 xml 中定义的默认值。但是，它似乎不起作用。他们保留了我最后选择的那些价值观。

在阅读了 Android 文档后，我发现了这一点：

```
PreferenceManager.setDefaultValues(getApplicationContext(), R.xml.preference_settings, true); 
```

但它几乎没有工作！用 SharedPreferences 尝试其他方式。

```
SharedPreferences preferences = getParent().getSharedPreferences("preference_settings", MODE_PRIVATE);
SharedPreferences.Editor editor = preferences.edit();
editor.clear();
editor.commit(); 
```

它也没有工作！

我错过了什么吗？如何将首选项设置为 XML 中定义的默认值？

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T11:34:59.503

共享首选项应该可以工作，但您应该使用默认的共享首选项..

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
SharedPreferences.Editor editor = preferences.edit();
editor.clear();
editor.commit(); 
```

为了使用文件名获取共享首选项，Android 会创建此名称（可能基于您项目的包名？）。您可以通过将以下代码放入 SettingsActivity onCreate 并查看首选项名称来获取它。

```
String preferencesName = this.getPreferenceManager().getSharedPreferencesName(); 
```

该字符串应该类似于“com.example.projectname_preferences”。在您的项目中某处的硬代码，并将其传递给 getSharedPreferences() ，您应该很高兴。

作为：

```
 PreferenceManager.getDefaultSharedPreferences(this); 
```

将提供对整个应用程序包的全局首选项文件的访问；任何活动都可以访问首选项（在内部，保存首选项的 xml 文件将被命名`your.application.package_preferences.xml`）。

```
getParent().getSharedPreferences("preference_settings", MODE_PRIVATE); 
```

将只为 contextInstance 类提供首选项：只有上下文类的实例才能访问这些首选项（说你的包仍然是`your.application.package`并且你在`your.application.package.SecondActivity`，内部首选项文件是`SecondActivity.xml`）。

# .net - 在运行 NUnit 项目时在 x86 平台上使用现有文件创建 ConfigurationManager

> ID：13762250
> 
> 赞同：0
> 
> 时间：2012-12-07T11:33:01.123
> 
> 标签：.net, x86, nunit, configuration-files

嗨，我遇到了 NUnit 和 ConfigurationManager 的问题

我有几个 unti 测试来测试配置文件的操作。在我的大多数测试中，我创建一个文件并在测试结束时将其删除。

但是我有 2 个测试，我使用 new ConfigurationManager(path); 创建文件；然后，我尝试再次使用 new ConfigurationManager(path); 重新打开具有相同路径的相同文件；

我创建了一个 NUnit 项目并与其他一些 nunit 测试一起运行它。

最近我们被迫将我们的平台修复为 x86（由于 3rd 方组件）

在此更改之前，一切正常，但现在我在上述测试期间经常遇到异常，特别是在 new ConfigurationManager(path); 例外是 IO.FileNotFoundException 并引用了我的一个应用程序库。

同样让我更加困惑的是，只有当我通过项目运行测试时才会发生异常。当我使用 Visual Studio 运行测试或将 dll 直接添加到 nunit 客户端（拖放）时，它不会发生

提前感谢您的帮助

ķ

-编辑：我添加了例外和配置文件 xml 以供参考

> Hornbill.UnitTests.Configuration.ConfigurationManagerBasics.TestAppendGetDelete：System.Configuration.ConfigurationErrorsException：为hornbill.settings创建配置节处理程序时出错：无法加载文件或程序集'Hornbill.Application.Core，版本= 1.0.0.0，文化=中性，PublicKeyToken=null' 或其依赖项之一。该系统找不到指定的文件。（C:\Users\KieranJS\AppData\Local\TestConfigurationFile1.xml 第 4 行）
> ----> System.IO.FileNotFoundException：无法加载文件或程序集'Hornbill.Application.Core，版本=1.0.0.0，文化=中性，PublicKeyToken=null' 或其依赖项之一。该系统找不到指定的文件。

配置：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <configSections>
        <section name="hornbill.settings" type="Hornbill.Configuration.Sources.Entities.SettingsSection, Hornbill.Application.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
    </configSections>
    <hornbill.settings>
        <forms>
            <form id="Hornbill.LoginModule">
                <item id="Test1">
                    <value>TestValue1</value>
                </item>
            </form>
        </forms>
    </hornbill.settings>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:07:09.620

所以我通过更改 NUnit 设置解决了这个问题：Test Loader - Default Process Model to "Run tests in a separate process per Assembly"

# sql - 查找组件 - 缓存大小

> ID：13762251
> 
> 赞同：1
> 
> 时间：2012-12-07T11:33:06.230
> 
> 标签：sql, sql-server, sql-server-2008, ssis, lookup

所以我只想知道我的思路是否正确。

我正在尝试估计“完整缓存”查找组件上的缓存大小（我知道我无法在完整缓存模式下设置缓存大小，但这只是知识问题）

它的查询是

```
Select int_column, big_int_column from myTable 
```

你可以想象我有一个整数和一个 bigint 列。假设 myTable 将有 100 万行，一个整数占用 4 个字节，一个 bigint 占用 8 位，假设我的缓存将有 11.4Mb 是否正确？

每行 = 12 字节 * 1M 行 = 12M 字节

12M 字节/1024 = 11718Kb / 1024 =

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:09:52.533

根据我在评论中提供的链接：http: [//blogs.msdn.com/b/mattm/archive/2008/10/18/calculating-the-size-of-your-lookup-cache.aspx](http://blogs.msdn.com/b/mattm/archive/2008/10/18/calculating-the-size-of-your-lookup-cache.aspx)

您的计算应如下所示：

**每行**：

```
12 + 20 + (4*2) B = 40 B 
```

**一百万行**：

```
(40 * 1M)/1024/1024 = approx. 38 MB 
```

# ruby-on-rails - 有人可以解释为什么名称为“位置”的控制器方法在 Rails 3.2 中有一些意想不到的行为

> ID：13762254
> 
> 赞同：2
> 
> 时间：2012-12-07T11:33:12.117
> 
> 标签：ruby-on-rails, request

我正在使用 Rails 3.2 开发一个项目。在项目中，我有一个控制器，它使用其中的基本 CRUD 方法管理用户配置文件。

在某些时候，我添加了一个名为“位置”的新方法，用于存储用户配置文件位置。此方法仅响应 JSON 请求。

添加此方法后，在更新配置文件操作之后，重定向的行为与以前不同。它应该重定向到编辑操作，但我得到的是：

```
Redirected to http://localhost:3000/profiles/1/edit
Completed 406 Not Acceptable in 367ms (ActiveRecord: 23.1ms) 
```

编辑配置文件操作路线没有改变，如果我重命名“位置”操作一切正常，所以我使用方法名称会导致这种情况，但我不知道为什么。你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:02:41.110

[`location`](http://api.rubyonrails.org/classes/ActionController/Metal.html#method-i-location)是一种`ActionController::Metal`可用于您的控制器的方法，并且您正在以这种方式覆盖它。

您可以保留路由`/users/:id/location`而无需命名方法`location`。例如，在你的`routes.rb`：

```
 resources :users do
   member do
     put :location, to: 'users#update_location' # Use the verb and the action name you see fit
   end
 end 
```

在你的`UsersController`：

```
 class UsersController < ApplicationController
   def update_location
     # Do your magic
   end
 end 
```

# mysql - MySQL - 加入有效日期数据

> ID：13762256
> 
> 赞同：3
> 
> 时间：2012-12-07T11:33:13.620
> 
> 标签：mysql, join

我需要总结与有效日期参考相关的数据。

让我们想象一个包含这些表的薪水模式

```
employee                                         work
+----+------+                                    +----+--------+------------+
| id | name |                                    | id | emp_id | date       |
+----+------+                                    +----+--------+------------+
|  1 | John |                                    |  1 |      1 | 2012-10-05 |
|  2 | Bob  |                                    |  2 |      1 | 2012-02-10 |
+----+------+                                    |  3 |      2 | 2012-09-03 |
                                                 |  4 |      1 | 2012-12-12 |
salary                                           |  5 |      1 | 2012-04-04 |
+----+--------+--------------+------------+      |  6 |      2 | 2012-06-09 |
| id | emp_id | daily_amount | start_date |      |  7 |      1 | 2012-07-24 |
+----+--------+--------------+------------+      +----+--------+------------+
|  1 |      1 |           10 | 2012-01-01 | 
|  2 |      1 |           15 | 2012-04-16 |
|  3 |      2 |           20 | 2012-05-25 |
+----+--------+--------------+------------+ 
```

从 2012年 1 月 1 日开始，**约翰**每天收到 10 份工资，然后从 2012 年 4 月 16 日起，他的工资增加到 15份。
**鲍勃**自 2012 年 5月 25 日起获得 20 份工资

* * *

现在假设我需要计算两个员工在 2012 年的工资。这是我天真的尝试：

```
SELECT
  emp.name AS "employee"
, SUM(sal.daily_amount) AS "amount"
FROM employee AS emp
JOIN work AS wrk ON (wrk.emp_id = emp.id)
JOIN salary AS sal ON (
  sal.emp_id = emp.id
  AND wrk.date >= sal.start_date
)
WHERE YEAR(wrk.date) = 2012
GROUP BY emp.id
; 
```

当然它没有给我我想要的，因为它没有拿 MAX`start_date`

问题：Bob & John 在 2012 年的收入是多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:48:29.297

[在SQLfiddle](http://www.sqlfiddle.com/#!2/d39d0/8)上测试了以下内容：

```
SELECT employee.name AS "employee",
       SUM(s1.daily_amount) AS "amount"
FROM work
  INNER JOIN salary s1
     ON work.emp_id = s1.emp_id
    AND work.date >= s1.start_date
  LEFT JOIN salary s2
     ON work.emp_id = s2.emp_id
    AND work.date >= s2.start_date
    AND s2.start_date > s1.start_date
  INNER JOIN employee
     ON work.emp_id = employee.id
WHERE s2.emp_id IS NULL
GROUP BY work.emp_id 
```

这个想法是使用 和 的组合`s1`来`s2`查找最后日期：`s1`是在工作当天之前的任何薪水定义，而`s2`只有`NULL`在没有以后的薪水定义也适用的情况下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T13:59:28.337

好吧，你有`salary table`一个开始日期，但你也需要一个结束日期。您可以使用派生表执行此操作：

```
 SELECT
    s_1.emp_id,
    s_1.daily_amount,
    s_1.start_date AS start,
    DATE_ADD(MIN(s_2.start_date), INTERVAL -1 DAY) AS end
  FROM
    salary s_1
    LEFT JOIN salary s_2
      ON s_1.emp_id = s_2.emp_id AND s_1.start_date < s_2.start_date
  GROUP BY s_1.emp_id, s_1.start_date 
```

最后它看起来像：

```
SELECT
  employee.name,
  SUM(s.daily_amount) AS amount
FROM
  employee
  JOIN work
    ON employee.id = work.emp_id
  JOIN
    (
      SELECT
        s_1.emp_id,
        s_1.daily_amount,
        s_1.start_date AS start,
        DATE_ADD(MIN(s_2.start_date), INTERVAL -1 DAY) AS end
      FROM
        salary s_1
        LEFT JOIN salary s_2
          ON s_1.emp_id = s_2.emp_id AND s_1.start_date < s_2.start_date
      GROUP BY s_1.emp_id, s_1.start_date
    ) AS s
    ON employee.id = s.emp_id
    AND
    work.date >= s.start
    AND
    (work.date <= s.end OR s.end IS NULL)
GROUP BY employee.id 
```

**编辑** 没有`DATE_ADD()`

```
SELECT
  employee.name,
  SUM(s.daily_amount) AS amount
FROM
  employee
  JOIN work
    ON employee.id = work.emp_id
  JOIN
    (
      SELECT
        s_1.emp_id,
        s_1.daily_amount,
        s_1.start_date AS start,
        MIN(s_2.start_date) AS end
      FROM
        salary s_1
        LEFT JOIN salary s_2
          ON s_1.emp_id = s_2.emp_id AND s_1.start_date < s_2.start_date
      GROUP BY s_1.emp_id, s_1.start_date
    ) AS s
    ON employee.id = s.emp_id
    AND
    work.date >= s.start
    AND
    (work.date < s.end OR s.end IS NULL)
GROUP BY employee.id 
```

# jquery - 带有自定义用户定义选项的 html 选择

> ID：13762259
> 
> 赞同：0
> 
> 时间：2012-12-07T11:33:20.380
> 
> 标签：jquery, select, input

我想创建一个 html 选择元素，用户可以使用它来选择他最喜欢的东西，或者如果他最喜欢的东西不在列表中，还有一个选择选项“定义你自己的”，如果你点击它，选择变成文本输入。

也许有一个jquery插件/解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:37:35.510

在 HTML 中创建您的选择列表。在 HTML 中创建您的输入。使用 CSS 隐藏输入`display:none`。然后使用 jQuery（不要忘记在页面开头包含 jquery 库）`.change()`功能来检查您的项目是否被选中。当它被选中时，只需执行：`$("#selectlist").hide(); $("#inputfield").show();`

# java - 分布式作业执行框架

> ID：13762278
> 
> 赞同：1
> 
> 时间：2012-12-07T11:34:42.527
> 
> 标签：java

**我的要求：**

*   需要监控大量 Web 应用程序实例
*   需要收集每次点击的交易时间，将该时间推送到中央数据库。

**我的进步：**

已经确定了像 htmlunit 这样的库来开发工具来处理 Web 应用程序身份验证、浏览/抓取 Web 应用程序

**寻找框架：**

*   可以在多个系统上执行监控作业的框架（分布式执行）
*   可能基于 Java，但如果我能得到任何基于 Python、Perl 或其他语言的东西就可以了

像 site24x7 这样的应用程序/解决方案的任何架构细节都会有很大帮助:)

谢谢你，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:43:28.180

*免责声明：此答案与您的帖子正文中列出的要求有关。*

看看[JavaMelody](http://code.google.com/p/javamelody/)。它收集了大量不同的统计数据。它还可以从分布式应用程序中收集一些集中的统计信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T13:00:03.427

这些家伙正在做的事情 - [http://arvan.in/monitoring-web-applications/](http://arvan.in/monitoring-web-applications/)

Arvan 对禁用 JavaScript 的命令行浏览器工具无法浏览 Web 应用程序的 Web 应用程序进行监控。

谢谢

# c - 如何在 Linux 中使 connect() API 阻塞等待

> ID：13762279
> 
> 赞同：1
> 
> 时间：2012-12-07T11:34:41.837
> 
> 标签：c, linux, sockets

在我的客户端程序（c++）中，我试图使用 connect() API 通过套接字连接服务器机器。我想制作一个场景，即我的客户端应用程序处于阻塞等待状态（即在很长一段时间后返回 ETIMEDOUT errno）。但是 connect() API 只返回成功或失败。它不是在等待。我应该怎么做才能使 connect() API 处于阻塞等待状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:50:16.290

除非您将套接字设置为非阻塞，否则您实际上是阻塞的，只是`connect`被唤醒的速度足够快。

如果要测试超时，只需将服务器的网线拔掉一会儿即可。

或者，您自己机器的网络电缆，但请注意，这也会破坏名称解析，您甚至可能无法访问特定`connect`的 .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:40:01.507

这听起来可能是前后矛盾，但将套接字置于非阻塞模式，发出 connect()，然后在超时时调用 select()。如果 select() 超时，则说明您的连接超时。如果它在超时时间内选择了可写的套接字，则再次调用 connect() 以完成连接，然后将套接字置于阻塞模式并继续进行 I/O。当然，在每个步骤中检查错误。

请注意，您只能使用此技术来减少大约一分钟的默认超时时间，而不是增加它；当然，如果您立即拒绝连接，则根本无需等待：您无法更改。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-07T11:51:05.497

如果您想体验 a`connect`的失败`ETIMEDOUT`，您可以创建一个特殊的服务器来侦听连接但从不接受它们。当您的客户端连接到该虚拟服务器程序时，它迟早会超时。

当然，这假设您在客户端中创建的套接字*不是*非阻塞的。

# zsh - zsh compinit：不安全的目录

> ID：13762280
> 
> 赞同：659
> 
> 时间：2012-12-07T11:34:43.870
> 
> 标签：zsh, zsh-completion

这是什么意思，我该如何解决？

```
zsh compinit: insecure directories, run compaudit for list.
Ignore insecure directories and continue [y] or abort compinit [n]? 
```

运行`compaudit`返回如下：

```
There are insecure directories:
/usr/local/share/zsh/site-functions 
```

* * *

## 回答 #1

> 赞同：855
> 
> 时间：2012-12-09T08:07:40.343

这为我修复了它：

```
$ sudo chmod -R 755 /usr/local/share/zsh/site-functions 
```

信用：[zsh 邮件列表上的帖子](http://www.zsh.org/mla/users/2008/msg00566.html)

* * *

**编辑：**正如@biocyberman 在评论中指出的那样。您可能还需要更新以下内容的所有者`site-functions`：

```
$ sudo chown -R root:root /usr/local/share/zsh/site-functions 
```

在我的机器（OSX 10.9）上，我不需要这样做，但 YMMV。

**EDIT2：**在 OSX 10.11 上，只有这个有效：

```
$ sudo chmod -R 755 /usr/local/share/zsh
$ sudo chown -R root:staff /usr/local/share/zsh 
```

user:staff 也是 OSX 上正确的默认权限。

* * *

## 回答 #2

> 赞同：670
> 
> 时间：2014-03-31T03:54:46.503

删除组写入权限

```
compaudit | xargs chmod g-w 
```

会成功的。

见[http://www.wezm.net/technical/2008/09/zsh-cygwin-and-insecure-directories/](http://www.wezm.net/technical/2008/09/zsh-cygwin-and-insecure-directories/)

* * *

## 回答 #3

> 赞同：227
> 
> 时间：2017-04-21T14:02:03.090

大多数答案都带有解决方案，但不要提及为什么会出现此警告。这是 ZSH 的[compinit](http://zsh.sourceforge.net/Doc/Release/Completion-System.html##Use-of-compinit)的摘录：

> 出于安全原因，compinit 还会检查完成系统是否会使用**不属于 root 或当前用户的**文件，或者**是全局或组可写目录中的文件，或者不属于 root 或当前用户的文件**。如果找到这样的文件或目录，compinit 将询问是否真的应该使用完成系统。要避免这些测试并使所有找到的文件无需询问即可使用，请使用选项 -u，并让 compinit 静默忽略所有不安全的文件和目录，请使用选项 -i。当给出 -C 选项时，此安全检查将完全跳过。

因此，该解决方案意味着修复以下一项（或全部）：

*   将当前用户设置为所有目录/子目录/文件的所有者：

    ```
    compaudit | xargs chown -R "$(whoami)" 
    ```

*   删除组/其他人对原因文件的写权限：

    ```
    compaudit | xargs chmod go-w 
    ```

另一种方法是通过使用跳过这些检查

```
compinit -u 
```

但我并不真正建议这样做，因为将问题隐藏在地毯下只能在短期内解决问题。

* * *

## 回答 #4

> 赞同：173
> 
> 时间：2020-08-17T09:05:20.900

一旦你*了解*了原因，解决方法就很*简单**了*。

 **   **原因**：输出的目录`compaudit`具有*组*或*其他人的**写*权限（世界可写）；或者这些文件由*root*或您自己以外的其他人拥有。

****   **示例**：就我而言，`compaudit`给了我：*** 

 ***```
% compaudit 
There are insecure directories:
/usr/local/share/zsh/site-functions
/usr/local/share/zsh 
```

如果我们列出我们拥有的那些文件/目录的权限（在这种情况下）

```
% ls -lh /usr/local/share 
total 0
drwxr-xr-x  12 chbrandt  admin   384B Aug 14 10:45 aclocal
drwxr-xr-x   8 chbrandt  admin   256B Aug 14 10:45 doc
drwxr-xr-x   3 chbrandt  admin    96B Jul 24 21:00 fish
lrwxr-xr-x   1 chbrandt  admin    36B Aug 14 10:45 gettext -> ../Cellar/gettext/0.21/share/gettext
lrwxr-xr-x   1 chbrandt  admin    41B Aug 14 10:45 gettext-0.21 -> ../Cellar/gettext/0.21/share/gettext-0.21
lrwxr-xr-x   1 chbrandt  admin    37B Aug 14 10:45 gtk-doc -> ../Cellar/libidn2/2.3.0/share/gtk-doc
drwxr-xr-x   9 chbrandt  admin   288B Aug 14 10:45 info
drwxr-xr-x  58 chbrandt  admin   1.8K Aug 14 10:45 locale
lrwxr-xr-x   1 chbrandt  admin    41B Jul 27 17:12 luajit-2.0.5 -> ../Cellar/luajit/2.0.5/share/luajit-2.0.5
drwxr-xr-x   5 chbrandt  admin   160B Jul 27 17:12 man
lrwxr-xr-x   1 chbrandt  admin    33B Aug 14 10:45 nvim -> ../Cellar/neovim/0.4.4/share/nvim
drwxrwxr-x   3 chbrandt  admin    96B Jul 24 20:57 zsh
%
% ls -lh /usr/local/share/zsh 
total 0
drwxrwxr-x  4 chbrandt  admin   128B Jul 24 21:00 site-functions
%
% ls -lh /usr/local/share/zsh/site-functions 
total 0
lrwxr-xr-x  1 chbrandt  admin    39B Jul 24 21:00 _brew -> ../../../Homebrew/completions/zsh/_brew
lrwxr-xr-x  1 chbrandt  admin    44B Jul 24 21:00 _brew_cask -> ../../../Homebrew/completions/zsh/_brew_cask 
```

现在我们很容易发现问题，不是吗？请注意目录`zsh/`与`zsh/site-functions`其他目录的不同之处...... zsh 不喜欢`w`允许组修改它们的“ ” 。`admin`

*   **解决方案**：关闭该*组可写*权限！

```
% chmod g-w /usr/local/share/zsh 
% chmod g-w /usr/local/share/zsh/site-functions 
```

**就是这样！**你可以走了。打开一个新终端，您应该*不会再*看到“ `zsh compinit: insecure directories`”消息了；）

* * *

## 回答 #5

> 赞同：56
> 
> 时间：2018-03-26T13:23:39.743

自 High Sierra 更新以来，这适用于我的 Mac。

删除组写入权限：

```
sudo chmod g-w /usr/local/share/zsh/site-functions
sudo chmod g-w /usr/local/share/zsh 
```

最好将更改限制在 zsh 目录中。

* * *

## 回答 #6

> 赞同：34
> 
> 时间：2021-03-02T01:45:22.610

此命令使用正确的权限更新所有文件/文件夹：

`compaudit | xargs chmod g-w`

您不需要使用`sudo`来更改所有者 -*除非文件属于 root*

（在 macOS BigSur 上测试）

* * *

## 回答 #7

> 赞同：30
> 
> 时间：2013-10-26T01:28:56.763

当我`sudo -i`启动 root shell 时，我得到了同样的警告，@chakrit 的解决方案对我不起作用。

但我发现`-u`了工作转换`compinit`，例如在你的 .zshrc/zshenv 或你打电话的地方`compinit`

```
compinit -u 
```

注意：不推荐用于生产系统

另请参阅[http://zsh.sourceforge.net/Doc/Release/Completion-System.html#Initialization](http://zsh.sourceforge.net/Doc/Release/Completion-System.html#Initialization)

* * *

## 回答 #8

> 赞同：27
> 
> 时间：2020-07-30T11:59:27.367

这个答案主要是供我自己将来使用的参考，因为大多数答案都没有提供完整的解决方案。这里是：

首轮：

```
compinit 
```

`compaudit`如果上述方法不起作用，请使用

对于打印的每条路径，运行以下命令：

```
sudo chown $(whoami) PATH_HERE

sudo chmod -R 755 PATH_HERE 
```

简单的例子，假设运行 compinit 后打印的路径之一是“/usr/local/share/zsh”。然后：

```
sudo chown $(whoami) /usr/local/share/zsh

sudo chmod -R 755 /usr/local/share/zsh 
```

* * *

## 回答 #9

> 赞同：21
> 
> 时间：2020-05-11T06:43:04.440

我最近在 Catalina 上也收到了同样的警告。一个简单的解决方法是将它放在 .zshrc 的顶部

```
ZSH_DISABLE_COMPFIX=true 
```

* * *

## 回答 #10

> 赞同：15
> 
> 时间：2016-12-02T16:01:54.337

在 macOS Sierra（10.12.1）上，接受的答案对我不起作用。必须从 /usr/local 递归

```
cd /usr/local
sudo chown -R <your-username>:<your-group-name> * 
```

**注意：**您可以获取您的用户名`whoami`和您的群组`id -g`

* * *

## 回答 #11

> 赞同：13
> 
> 时间：2020-05-12T20:12:49.857

运行此命令对我有用`mac OS Catalina`：

`compaudit | xargs chmod g-w,o-w`

* * *

## 回答 #12

> 赞同：13
> 
> 时间：2020-05-19T13:37:53.653

**我的机器：**

```
System Version: macOS 10.15.4 (19E287)
Kernel Version: Darwin 19.4.0 
```

所以这就是我所做的，

1.  运行`compaudit`它会给你一个它认为不安全的目录列表。

2.  运行`sudo chmod -R 755 target_directory` （例如`sudo chmod -R 755 /usr/local/share/zsh`：）

**示例：**

```
compaudit 
```

返回：

> /usr/local/share/zsh

所以我跑

```
sudo chmod -R 755 /usr/local/share/zsh 
```

## 在这里阅读更多[链接](https://github.com/zsh-users/zsh-completions/issues/433#issuecomment-390600994)

* * *

## 回答 #13

> 赞同：12
> 
> 时间：2020-06-05T22:18:09.357

**MAC OS X 解决方案：**

```
$ sudo chmod -R 755 /usr/local/share/zsh
$ sudo chown -R root:staff /usr/local/share/zsh 
```

还有“user:staff = OSX 上的默认 root 用户。

* * *

## 回答 #14

> 赞同：10
> 
> 时间：2018-01-08T15:33:06.630

我通过这样做来修复它

```
sudo chown -R root:staff /usr/local/share/zsh 
```

在我的情况下， share/ 中的其他目录也分配了“员工”组

* * *

## 回答 #15

> 赞同：10
> 
> 时间：2021-04-29T08:26:50.600

在过去的可能几个月里，我遇到了这个问题，尝试了几件事，但没有奏效。最后帮助我的是这个。获取不安全目录的列表，然后按如下所述设置所有目录的 chmod。

```
CLI# compaudit
There are insecure directories:
/usr/local/share/zsh
CLI# sudo chmod -R 755 /usr/local/share/zsh
Password: 
```

* * *

## 回答 #16

> 赞同：9
> 
> 时间：2017-01-16T11:03:44.360

这两行对我来说是固定的。

```
sudo chown -R _user_:root /usr/local/share/zsh

sudo chown -R _user_:root /usr/local/share/zsh/* 
```

* * *

## 回答 #17

> 赞同：9
> 
> 时间：2019-03-08T11:24:57.460

在莫哈韦沙漠，这成功了： `sudo chmod go-w /usr/local/share`

* * *

## 回答 #18

> 赞同：7
> 
> 时间：2020-04-03T12:11:55.640

[这是https://github.com/zsh-users/zsh-completions/issues/433#issuecomment-600582607](https://github.com/zsh-users/zsh-completions/issues/433#issuecomment-600582607)中唯一对我有用的东西。感谢[https://github.com/malaquiasdev](https://github.com/malaquiasdev)！

```
 $ cd /usr/local/share/
  $ sudo chmod -R 755 zsh
  $ sudo chown -R root:staff zsh 
```

* * *

## 回答 #19

> 赞同：6
> 
> 时间：2021-02-01T20:26:22.770

以下工作于 M1

```
ProductName:    macOS
ProductVersion: 11.1
BuildVersion:   20C69

% compaudit
/opt/homebrew/share 
```

将群组权限从 775 更改为 755

```
% sudo chmod 755 /opt/homebrew/share

drwxr-xr-x   33 xenea  admin   1056 Feb  2 01:28 share 
```

* * *

## 回答 #20

> 赞同：5
> 
> 时间：2017-04-26T11:05:25.693

在 macOS Sierra 上，您需要运行： `sudo chown -R $(whoami):staff /usr/local`

* * *

## 回答 #21

> 赞同：5
> 
> 时间：2019-12-15T06:40:47.720

1.  运行`compaudit`它会给你一个它认为不安全的目录列表

2.  `sudo chown -R username:root target_directory`

3.  `sudo chmod -R 755 target_directory`

* * *

## 回答 #22

> 赞同：5
> 
> 时间：2020-03-16T21:14:05.687

我的建议是运行 compaudit，然后只修复审计发现的目录的权限。确保识别的目录没有组或其他的写入权限。

* * *

## 回答 #23

> 赞同：3
> 
> 时间：2019-10-15T18:38:31.157

今天早上，我系统中的一些软件包更新了，并给我留下了这个错误消息。我正在使用 Ubuntu 18.04。

显然，更新中的某些内容将用户名和组更改为数字，而不是`root`，如下所示：

```
# There are insecure files: /usr/share/zsh/vendor-completions/_code
# sudo ls -alh
-rw-r--r-- 1  131  142 2.6K 2019-10-10 16:28 _code 
```

我只是将这个文件的用户和组改回，`root`问题就消失了。我*不需要*更改任何权限，除非了解问题的根本原因，否则我会警告不要这样做。

`sudo chown root _code && sudo chgrp root _code`

切换`131`并`142`返回后`root`，来自 zsh 的此错误消息消失了。

* * *

## 回答 #24

> 赞同：3
> 
> 时间：2020-06-11T11:38:37.320

我在运行`google-cloud-sdk`安装脚本后遇到了这个问题，该脚本通过`.zshrc`.

遵循[Homebrew 在 zsh 中配置完成的说明](https://docs.brew.sh/Shell-Completion#configuring-completions-in-zsh)很有帮助。

> 此外，如果您在尝试加载这些补全时收到“zsh compinit: insecure directory”警告，您可能需要运行以下命令：`chmod -R go-w "$(brew --prefix)/share"`

* * *

## 回答 #25

> 赞同：3
> 
> 时间：2021-03-19T16:34:18.933

我没有看到任何引用`homebrew`此主题信息的答案：[https ://docs.brew.sh/Shell-Completion#configuring-completions-in-zsh](https://docs.brew.sh/Shell-Completion#configuring-completions-in-zsh)

> 要使 Homebrew 的完成功能在 zsh 中可用，您必须在初始化 zsh 的完成功能之前在 FPATH 上获取 Homebrew 管理的 zsh 站点功能。将以下内容添加到您的 ~/.zshrc 文件中：

```
if type brew &>/dev/null; then
  FPATH=$(brew --prefix)/share/zsh/site-functions:$FPATH

  autoload -Uz compinit
  compinit
fi 
```

> 这必须在调用 compinit 之前完成。

这解决了我`without`手动更改所有权或其他方式的问题。

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2019-11-07T16:32:17.630

列出的解决方案都不适合我。相反，我最终卸载并重新安装了 Homebrew，这成功了。卸载说明可以在这里找到：http: [//osxdaily.com/2018/08/12/how-uninstall-homebrew-mac/](http://osxdaily.com/2018/08/12/how-uninstall-homebrew-mac/)

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2020-12-12T17:42:58.287

`y`使用 向脚本的输入流发送一个字符`compinit`，以便自动回答*忽略不安全的目录和文件并继续 [y] 或中止 compinit [n]？*问题

`echo "y" > source <GOOGLECLOUDSDK>/completion.zsh.inc`

该解决方案在以下情况下很有用

*   您**不能**对文件夹进行所有权/访问权限更改
*   当您**无法使用 -u 选项**删除警告时（可能是因为您自己没有明确调用“compinit”，而是由您调用的脚本调用）

**备注：**它不能解决问题，只会隐藏警告（与此处涉及删除“组写访问”或“将所有权更改为 root”的其他答案相反）。

* * *

## 回答 #28

> 赞同：1
> 
> 时间：2021-12-11T15:33:31.517

我尝试了所有发布的解决方案，最后没有一个适用于我的特殊情况。但是，我要感谢那些向我指出*所有权*方向的用户，这是关于多个帐户的真正问题，而不是模式。我正在为具有类似设置（M1 + 两个帐户 + /opt/homebrew/share）的其他任何人发布此答案。

这是我的设置：

我有一个 M1，运行 macOS Monterey 12.0.1，使用 Homebrew。

我有两个帐户，一个管理员和一个普通用户（工作需要拆分）。我只有普通用户的不安全目录问题，两个用户都使用相同的自制设置，以下目录和文件受到问题的影响：

```
/opt/homebrew/completions/zsh/_brew
/opt/homebrew/share/zsh
/opt/homebrew/share/zsh/site-functions
/opt/homebrew/share/zsh/site-functions/_brew
/opt/homebrew/share/zsh/site-functions/_brew_services
/opt/homebrew/share/zsh/site-functions/_cargo
/opt/homebrew/share/zsh/site-functions/_gh
/opt/homebrew/share/zsh/site-functions/_git
/opt/homebrew/share/zsh/site-functions/_j
/opt/homebrew/share/zsh/site-functions/_lf
/opt/homebrew/share/zsh/site-functions/_task
/opt/homebrew/share/zsh/site-functions/_tldr
/opt/homebrew/share/zsh/site-functions/_vifm 
```

改变模式什么也没做，最终解决问题的是将每个问题文件和目录的所有权更改为 root:admin，如下所示：

```
sudo chown root:admin /opt/homebrew/share/zsh/site-functions/* 
```

最初，在问题出现之前，我的管理员用户拥有一切，因此所有权看起来像这样：*usr* :admin

这是 site-functions 目录现在的样子，没有问题：

```
lrwxr-xr-x  1 root admin  30 Jul 19 19:41 _brew ->../../../completions/zsh/_brew
lrwxr-xr-x  1 root admin  79 Aug 10 20:26 _brew_services -> ../../../Library/Taps/homebrew/homebrew-services/completions/zsh/_brew_services
lrwxr-xr-x  1 root admin  59 Nov  6 16:28 _cargo -> ../../../Cellar/rust/1.56.1/share/zsh/site-functions/_cargo
lrwxr-xr-x  1 root admin  53 Dec  2 23:37 _gh -> ../../../Cellar/gh/2.3.0/share/zsh/site-functions/_gh
lrwxr-xr-x  1 root admin  56 Nov 30 15:21 _git -> ../../../Cellar/git/2.34.1/share/zsh/site-functions/_git
lrwxr-xr-x  1 root admin  61 Oct 13 11:12 _j -> ../../../Cellar/autojump/22.5.3_3/share/zsh/site-functions/_j
lrwxr-xr-x  1 root admin  50 Oct 23 18:52 _lf -> ../../../Cellar/lf/26/share/zsh/site-functions/_lf
lrwxr-xr-x  1 root admin  57 Nov  6 16:28 _task -> ../../../Cellar/task/2.6.1/share/zsh/site-functions/_task
lrwxr-xr-x  1 root admin  57 Nov 18 01:45 _tldr -> ../../../Cellar/tldr/1.4.2/share/zsh/site-functions/_tldr
lrwxr-xr-x  1 root admin  56 Oct 13 11:11 _vifm -> ../../../Cellar/vifm/0.12/share/zsh/site-functions/_vifm 
```****

# objective-c - 核心数据故障和内存警告

> ID：13762281
> 
> 赞同：1
> 
> 时间：2012-12-07T11:34:47.517
> 
> 标签：objective-c, cocoa, core-data, memory-management, memory-warning

NSManagedObject 是否观察到内存警告并变成故障？我应该在记忆力紧张的情况下做这种事情吗？

是否有关于使用 Core Data 保留内存的指南？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T22:37:11.180

Core Data 旨在为您提供对内存友好的好工具，但其中大部分不是自动的。你还需要做一些工作。

一般准则有点难，因为不同的情况可能需要一些非常不同的优化。也就是说，一些注意事项：

*   不特定于 Core Data，但如果您需要操作大量临时对象（即，如果从 Web 服务插入一堆数据），您可能需要使用 @autoreleasepool{...} 来确保这些对象不会活得比他们需要的更长。

*   关于二进制属性，除非必须，否则不要加载它们。假设您有一个包含照片的人员实体。最好让“照片”与另一个属性建立关系——这意味着 Core Data 不必每次都加载该二进制数据，并且让您可以更好地控制何时将其带入内存。

*   如果您不使用任何撤消功能，请确保您的上下文中有一个 nil 撤消管理器。

*   您可以使用 refreshObject:mergeChanges: 如果您有一个对象想要恢复为故障 - 也许您只使用了很短的时间并且暂时不需要它。

*   您可以将获取请求设置为不带回任何或所有 MOs 属性值，如果您只需要使用单个属性或类似的东西，这很有用。你也可以用这个来打自己的脚：如果你最终需要你没有拉下的属性之一，Core Data 必须回到持久存储......所以请确保你注意了。

这些只是其中的一小部分——“核心数据编程指南”还有其他一些，我认为这是必读的。总的来说，就像其他任何事情一样，您应该做最少的工作，然后衡量您的使用情况。看看事情进展如何，然后看看优化需要优化的部分。

玩得开心！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-07T12:41:16.877

您几乎可以假设核心数据将在后台进行所有内存管理优化。

如果您正在处理大量数据，尤其是在表视图中，请查看 NSFetchedResultsController ，它将有效地最小化内存占用和访问持久存储的次数。

# android - notifyDataSetChanged 从不工作

> ID：13762285
> 
> 赞同：1
> 
> 时间：2012-12-07T11:34:55.087
> 
> 标签：android, invalidation

我一直在寻找年龄并尝试了几个月。我永远不能让我的观点（任何观点）无效。这里有什么问题，谁能告诉我？谁能告诉我如何使用这些无效方法。提前致谢！

```
 if(result.equals("true"))
                {
                    View row = invoices.getChildAt(info.position);
                    //TextView bgr = (TextView) row.findViewById(R.id.status);
                    //bgr.setBackgroundResource(R.color.blue);
                    //row.setVisibility(View.GONE);

                    Animation anim = AnimationUtils.loadAnimation(Invoices.this, R.anim.down_to_top);
                    anim.setDuration(500);
                    invoices.getChildAt(info.position).startAnimation(anim );
                    final int row_pos = info.position;

                    new Handler().postDelayed(new Runnable() {

                        public void run() {

                            /*row.getInstance().remove(
                                FavouritesManager.getInstance().getTripManagerAtIndex(info.position)
                            );*/
                            ListView invoices = (ListView) findViewById(R.id.allInvoices);
                            View row = invoices.getChildAt(row_pos);
                            row.setVisibility(View.GONE);
                            getAllInvoices();
                            myAdapter.notifyDataSetChanged();

                        }

                    }, anim.getDuration());

                    Toast.makeText(getApplicationContext(), "Deleted!", Toast.LENGTH_SHORT).show();
                } 
```

更新：这就是我现在得到的。它删除了视图并正确设置了动画，但它仍然没有失效？

```
 ListView invoices = (ListView) findViewById(R.id.allInvoices);
                            View row = invoices.getChildAt(row_pos);
                            HashMap<String, String> lRow = invoice_items.get(row_pos);
                            lRow.remove(row);
                            row.setVisibility(View.GONE);
                            myAdapter.notifyDataSetChanged(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:49:19.383

调用`notifyDataSetChanged`不工作的原因，是因为数据集没有改变。

在您的内部`Handler`，您可以更改`ListView`自身的布局。`ListView`不超过 的表示，`Adapter`它保存数据。

为了理解它是如何工作的，[这篇文章](https://stackoverflow.com/questions/13746871/selecting-all-checkboxes-of-listview-in-android/13747201#13747201)将解释它。

将其应用于您的代码将输出如下内容：（PSUEDO）

```
Handler {
    lRow = mAdapter.get(row_pos);
    lRow.setVisibilty(false); // visibility is a flag of the row object
    mAdapter = notifyDataSetChanged();
} 
```

内部适配器：

```
getView() {
   if (row.getVisibility){
       // do stuff
   } else {
       // do other stuff 
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:38:37.313

嘿检查你的 Handler run() 你在哪里再次创建 ListView 而不是设置适配器。您可能正在通知适配器，但在创建另一个对象时该适配器未设置为 Listview。我不知道您的 getAllInvoices() 会做什么，但我确信您没有将适配器设置为 listview，因此它永远不会收到通知。根据您的代码，即使在 getAllInvoices() 中也无法设置适配器，因为 listview 是局部变量。

# c# - 如何为 TPL 中的任务分配名称

> ID：13762286
> 
> 赞同：23
> 
> 时间：2012-12-07T11:34:54.397
> 
> 标签：c#, task-parallel-library, parallel.foreach

我将使用在我的应用程序上运行的大量任务。由于某种原因，每组任务都在运行。我想为这些任务命名，这样当我查看“并行任务”窗口时，我可以轻松识别它们。

从另一个角度来看，考虑我正在使用框架级别的任务来填充列表。使用我的框架的开发人员也在使用任务来完成她的工作。如果她查看并行任务窗口，她会发现一些任务不知道。我想命名任务，以便她可以将框架任务与她的任务区分开来。

如果有这样的API会很方便：

```
var task = new Task(action, "Growth calculation task") 
```

或许：

```
var task = Task.Factory.StartNew(action, "Populating the datagrid") 
```

甚至在与`Parallel.ForEach`

```
Parallel.ForEach(list, action, "Salary Calculation Task" 
```

是否可以命名任务？

是否可以给 ‍‍‍<code>Parallel.ForEach 一个命名结构（可能使用 lambda），以便它使用该命名创建任务？

我错过了这样的API吗？

* * *

我还尝试使用继承的任务来覆盖它的 ToString()。但不幸的是，并行任务窗口不使用 ToString()！

```
class NamedTask : Task
{
    private string TaskName { get; set; }
    public NamedTask(Action action, string taskName):base(action)
    {
        TaskName = taskName;
    }

    public override string ToString()
    {
        return TaskName;
    }
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2015-12-22T14:54:48.957

您可以将任何对象与任何对象联系起来。这是任务的扩展。它使用 Wea​​kReference，因此当所有引用都超出范围时，仍然可以对任务进行垃圾收集。

用法：

```
var myTask = new Task(...
myTask.Tag("The name here");
var nameOfTask = (string)myTask.Tag(); 
```

扩展类：

```
public static class TaskExtensions
{
    private static readonly Dictionary<WeakReference<Task>, object> TaskNames = new Dictionary<WeakReference<Task>, object>(); 

    public static void Tag(this Task pTask, object pTag)
    {
        if (pTask == null) return;
        var weakReference = ContainsTask(pTask);
        if (weakReference == null)
        {
            weakReference = new WeakReference<Task>(pTask);
        }
        TaskNames[weakReference] = pTag;
    }

    public static object Tag(this Task pTask)
    {
        var weakReference = ContainsTask(pTask);
        if (weakReference == null) return null;
        return TaskNames[weakReference];
    }

    private static WeakReference<Task> ContainsTask(Task pTask)
    {
        foreach (var kvp in TaskNames.ToList())
        {
            var weakReference = kvp.Key;

            Task taskFromReference;
            if (!weakReference.TryGetTarget(out taskFromReference))
            {
                TaskNames.Remove(weakReference); //Keep the dictionary clean.
                continue;
            }

            if (pTask == taskFromReference)
            {
                return weakReference;
            }
        }
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-09T17:00:38.387

您不能真正命名 a `Task`，但您可以命名由 a 执行的方法，`Task`然后显示在并行任务窗口中。因此，如果命名`Task`s 对您很重要，请不要使用 lambda，使用普通的命名方法。

令人惊讶`Parallel`的是，即使`Task`没有直接执行您的方法，这也适用于 。我认为这是因为并行任务以某种方式了解`Task`s from`Parallel`并以不同方式处理它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T13:36:50.193

你不能命名任务。

任务库在内部使用线程池，因此无法命名线程。你的继承方法也不起作用，因为像“.ContinueWith()”这样的方法总是会创建一个新任务，它不会从你的类继承。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-14T07:47:03.980

如果您只需要在任务完成后知道任务的名称，那么您可以将其作为参数传递。将其作为任务结果的一部分返回。

```
 private async Task<string[]> MyTask(int x, string taskName)
    {
        return new[]
        {
            taskName, x.ToString()
        };
    } 
```

或将您的任务映射到字典

```
 var mapping = new Dictionary<Task, string>();
        var task = new Task(() => Console.WriteLine("myNullTask"));
        mapping.Add(task, "myNullTask");
        foreach (var taskX in mapping)
        {
            Console.WriteLine(
                $"Task Id: {taskX.Key.Id}, " +
                $"Task Name: {taskX.Value}, " +
                $"Task Status: {taskX.Key.Status}");
        } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-07T11:40:23.203

我不认为你可以命名任务。您可以使用`Task.Id`来跟踪任务。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-07T12:57:41.827

我在这里盲目拍摄，因为我不知道并行任务窗口的行为，但如果它使用调试器 api ，在 NamedTask 子类上添加[DebuggerDisplay属性可能会有所帮助](http://msdn.microsoft.com/en-us/library/ms228992.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-21T11:37:16.577

```
public class NamesTask {
    readonly Queue<Task> _taskqueue = new Queue<Task>();
    private readonly object _queueLock = new object();

    public Task RunTask(Action action) {
        //incoming task must be queued as soon as it arrives
        var inComingTask = new Task(action);

        lock (_queueLock) {
            _taskqueue.Enqueue(inComingTask);
        }

        return Task.Factory.StartNew(() => {
            //run all actions one by one..
            while (true) {
                lock (_queueLock) { //only one task must be performed at a 
                    if (_taskqueue.Count == 0) return;

                    var outTask = _taskqueue.Dequeue();

                    outTask.Start();
                    outTask.Wait();

                    Console.WriteLine("done....");
                }
            }
        });
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-25T08:02:39.977

我想有一本字典来帮助调试等。

这是我一直在做的一个示例：

```
private static void Main(string[] args)
{
    var tasksIdDic = new ConcurrentDictionary<int?, string>();
    Random rnd = new Random(DateTime.Now.Millisecond);
    var tasks = new List<Task>();

    tasks.Add(Task.Run(() =>  
    {
        Task.Delay(TimeSpan.FromSeconds(rnd.Next(1, 5))).Wait();
        tasksIdDic.TryAdd(Task.CurrentId, "First");

        Console.WriteLine($"{tasksIdDic[Task.CurrentId]} completed.");
    }));

    tasks.Add(Task.Run(() =>
    {
        Task.Delay(TimeSpan.FromSeconds(rnd.Next(1, 5))).Wait();
        tasksIdDic.TryAdd(Task.CurrentId, "Second");

        Console.WriteLine($"{tasksIdDic[Task.CurrentId]} completed.");
    }));

    tasks.Add(Task.Run(() =>
    {
        Task.Delay(TimeSpan.FromSeconds(rnd.Next(1, 5))).Wait();
        tasksIdDic.TryAdd(Task.CurrentId, "Third");

        Console.WriteLine($"{tasksIdDic[Task.CurrentId]} completed.");
    }));

   //do some work - there is no guarantee, but assuming you add the task names to the dictionary at the very beginning of each thread, the dictionary will be populated and be of benefit sometime soon after the start of the tasks.
   //Task.Delay(TimeSpan.FromSeconds(5)).Wait();

    //wait for all just so I see a console output
    Task.WaitAll(tasks.ToArray());
} 
```

[![在此处输入图像描述](../Images/fa27e6fd7db019719f5e8e5fae9fc8e4.png)](https://i.stack.imgur.com/ZJCi0.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-02-16T03:10:57.353

感谢[迈克的回答](https://stackoverflow.com/a/34418566/637142)，我最终得到了：

```
 public static class ExtensionMethods
    {
        private static readonly ConcurrentDictionary<WeakReference<Task>, object> TaskNames = new ConcurrentDictionary<WeakReference<Task>, object>();

        public static void _Tag(this Task pTask, object pTag)
        {
            if (pTask == null) return;
            var weakReference = ContainsTask(pTask) ?? new WeakReference<Task>(pTask);
            TaskNames[weakReference] = pTag;
        }
        public static void _Name(this Task pTask, string name)
        {
            _Tag(pTask, name);
        }

        public static object _Tag(this Task pTask)
        {
            var weakReference = ContainsTask(pTask);
            if (weakReference == null) return null;
            return TaskNames[weakReference];
        }
        public static object _Name(this Task pTask)
        {
            return (string)_Tag(pTask);
        }

        private static WeakReference<Task> ContainsTask(Task pTask)
        {
            foreach (var kvp in TaskNames.ToList())
            {
                WeakReference<Task> weakReference = kvp.Key;

                if (!weakReference.TryGetTarget(out var taskFromReference))
                {
                    TaskNames.TryRemove(weakReference, out _);
                    //TaskNames.TryRemove(out ); //Keep the dictionary clean.
                    continue;
                }

                if (pTask == taskFromReference)
                {
                    return weakReference;
                }
            }
            return null;
        }
    } 
```

它现在是线程安全的，它还支持名称而不仅仅是标签。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-11-03T17:10:30.853

如果这对任何人都有帮助，我将上述问题解决如下：

```
public static class NamedTasks
{
    public static Dictionary<string, Task> ActiveTasks { get; private set; } = new Dictionary<string, Task>();

    public static void Run(string name, Action action)
    {
        var task = new Task(action);
        ActiveTasks.Add(name, task);
        task.Start();

    public static void RemoveTask(string name)
    {
        if (ActiveTasks.ContainsKey(name))
            ActiveTasks.Remove(name);
    }
} 
```

用法：

```
// Start new named task
var taskName = "<code file> - <method>";
NamedTasks.Run(taskName, () =>
{
    // do stuff
    NamedTasks.RemoveTask(taskName);
});

...

// Print names of active tasks
var taskNames = NamedTasks.ActiveTasks.Keys.ToList();
foreach (var taskName in taskNames)
    if (NamedTasks.ActiveTasks[taskName].Status == TaskStatus.Running)
        Console.WriteLine(taskName); 
```

这对我来说效果很好。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2016-04-21T11:39:31.557

```
public class NamedTaskSchedular
{
    private static readonly ConcurrentDictionary<string, NamesTask> NamedTaskDictionary = new ConcurrentDictionary<string, NamesTask>();

    public static Task RunNamedTask(string name, Action action)
    {
        if (NamedTaskDictionary.ContainsKey(name))
        {
            return NamedTaskDictionary[name].RunTask(action);
        }
        var task = new NamesTask();

        NamedTaskDictionary[name] = task;

        return task.RunTask(action);
    }
} 
```

# android - EditText，获取焦点两边的单词

> ID：13762294
> 
> 赞同：0
> 
> 时间：2012-12-07T11:35:25.713
> 
> 标签：android, android-edittext, textwatcher

我有一个 EditText，当我点击单词中间的任意位置时，我希望能够提取该单词。

我知道我必须使用`getSelectionStart()`和`getSelectionEnd()`方法，但我无法让它发挥作用。

有人能帮我吗？

到目前为止，这是我的代码，在我的 onTextChanged 方法上：

```
int cursorPosition = editMain.getSelectionStart();

        editMain.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                String selectedText = editMain
                        .getText()
                        .toString()
                        .substring(editMain.getSelectionStart(),
                                editMain.getSelectionEnd());

                buttonPopupHashtag.setText(selectedText);
                return false;

            }
        }); 
```

问题是我需要点击两次才能得到这个词，我想要它只需点击一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:44:15.967

也许你会想看看下一个链接。用户已经提出了要求，并且那里提供了一段代码，可以按照您的要求进行操作：[在 TextView/EditText 的点击中选择一个单词](https://stackoverflow.com/questions/8612652/select-a-word-on-a-tap-in-textview-edittext)

# linux - shell script(AIX) : 在文件中逐行查找匹配模式之后的字符串

> ID：13762296
> 
> 赞同：-1
> 
> 时间：2012-12-07T11:35:29.437
> 
> 标签：linux, shell, unix, aix

我在 AIX 环境中有一个日志文件，其中包含如下行

```
10.100.108.23 100.10.10.11 - [05/Dec/2012:09:35:27 +0000] "GET /chgs/checkprofile/checkServlet?requestType=signPart1&off=false&oquestions=true&userid=false&source=false&link=%23&country=us&language=en&origin=&displayLayer=no HTTP/1.1" 200 8904 "https://www.test.com/services/request/Home.action" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C)" "PD-ERR=; rlang=nl_NL; 
```

我需要从模式之后的每一行中分别找到国家和`&country`语言`&language`。由于我是 shell 脚本的新手，我尝试使用 grep 和 awk 脚本来实现这一点，但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:47:15.943

```
awk -F"&" '{for(i=1;i<=NF;i++)if($i~/country/ ||$i~/language/){split($i,a,"=");printf a[2]" "}}' your_file 
```

或者你可以使用 sed：

```
sed -e 's/.*country=//g;s/language=\([^\&]*\)&.*/\1/g' your_file 
```

删除该＆符号：

```
> sed -e 's/.*country=//g;s/&language=\([^\&]*\)&.*/ \1/g' temp
us en 
```

你可以读[这个](http://www.grymoire.com/Unix/Sed.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T11:48:17.777

使用`grep`：

```
$ grep -Eo '(country|language)=[^&]*' file
country=us
language=en

$ grep -Po '(?<=country=|language=)[^&]*' file
us
en

#  Grep Options

-o, --only-matching       show only the part of a line matching PATTERN
-E, --extended-regexp     PATTERN is an extended regular expression (ERE)
-P, --perl-regexp         PATTERN is a Perl regular expression 
```

* * *

使用`sed`：

```
sed -E 's/.*country=([^&]*).*language=([^&]*).*/\1 \2/g' file
us en 

# Sed option

-E use extended regular expression 
```

# xaml - Windows 8 C# Metro 风格应用程序中的 XAML 解析异常

> ID：13762297
> 
> 赞同：1
> 
> 时间：2012-12-07T11:35:33.723
> 
> 标签：xaml, c#-4.0, microsoft-metro

我正在运行 Visual Studio 2012 SP1，我正在创建一个 Windows 8 C# Metro 风格应用程序，但在“InitializeComponent()”上不断出现错误

我收到的错误是“XamlParseException”，详细信息是“XAML 解析失败”。

该页面的 XAML 看起来很好，并且没有显示任何错误。

是否与 SP1 相关（在 SP1 之前它正在构建中）。

任何帮助表示赞赏。问候马克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:05:15.383

检查是否是您的问题：[https](https://connect.microsoft.com/VisualStudio/feedback/details/773691/windowsstore-xamlparseexception-after-vs2012-update-1) ://connect.microsoft.com/VisualStudio/feedback/details/773691/windowsstore-xamlparseexception-after-vs2012-update-1 如果是，解决方法是重命名程序集或命名空间，以便他们是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:33:31.050

这意味着您的 XAML 中存在问题。异常详细信息通常包含确切的问题或至少包含 XAML 中问题的行号。看看这个。

# ios - NSURLConnectionDownloadDelegate 目的地URL

> ID：13762300
> 
> 赞同：6
> 
> 时间：2012-12-07T11:35:40.313
> 
> 标签：ios, ios6, nsurlconnection, nsdata, nsurlconnectiondelegate

我目前正在开发一个使用异步下载的 iPad iOS 6 应用程序。为了接收进度信息，我使用了 delegate `NSURLConnectionDownloadDelegate`。下载和收到的进度

```
– connection:didWriteData:totalBytesWritten:expectedTotalBytes: 
```

工作得很好。

但是，一旦下载完成，我不知道如何从`NSURL` `destinationURL`委托方法提供的数据中提取数据

```
– connectionDidFinishDownloading:destinationURL: 
```

在 String 中接收到的目标 URL 看起来像“ `/private/var/mobile/Applications/7CB3B194-9E79-4F0B-ACFD-7B87AA8C7BAF/tmp/filename.mp4`”

然后我尝试从给定的 NSURL 中提取数据：

```
NSData *data = [[NSData alloc] initWithContentsOfURL:destinationURL]; 
```

但是数据是空的...

```
NSLog(@"data Size: %@", data.length);     //prints out 0 
```

有人使用 有同样的问题`NSURLConnectionDownloadDelegate`吗？任何想法如何解决？

* * *

编辑：我尝试先复制文件，然后`[NSData initWithContentsOFFile]`按照建议使用，但数据大小仍然为0。

```
- (void) connectionDidFinishDownloading:(NSURLConnection *)connection destinationURL:(NSURL *)destinationURL
{

[[NSFileManager defaultManager] copyItemAtPath:destinationURL.path toPath:DEST_PATH error:nil];

NSData *data = [[NSData alloc] initWithContentsOfFile:DEST_PATH];

NSLog(@"data Size: %i", data.length); //still returns 0..
} 
```

* * *

Edit2：我可以提取`NSData`使用`sendAsynchronousRequest`方法时的`NSURLConnection`. 但是像这样，我无法确定下载的进度......

```
[NSURLConnection sendAsynchronousRequest:theRequest queue:[[NSOperationQueue alloc] init] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error){
if (data){
NSLog(@"Size of the data: %i Bytes(s)", data.length); //works fine
[data writeToFile:DEST_PATH atomically:YES];
//From this point i can use the file at DEST_PATH

NSLog(@"Succeeded!");
}
else if (error)
NSLog(@"%@",error);
}]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:01:05.580

> /private/var/mobile/Applications/7CB3B194-9E79-4F0B-ACFD-7B87AA8C7BAF/tmp/filename.mp4

是路径，而不是 URL。尝试 initWithContentsOfFile: 代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T18:59:13.663

检查文件是否存在。我有同样的问题，我必须使用 NSURLConnectionDataDelegate 并手动保存数据，这就是为什么：与某些文件扩展名相关的 NSURLConnectionDownloadDelegate 存在错误。

你也可以在这里看到相同问题的答案： [NSURLConnectionDownloadDelegate 文件问题](https://stackoverflow.com/questions/7754470/nsurlconnectiondownloaddelegate-file-issue)

# extjs - ExtJS 4\. 防止 JsonStore 为特定参数集多次加载的最佳方法

> ID：13762307
> 
> 赞同：1
> 
> 时间：2012-12-07T11:36:21.590
> 
> 标签：extjs, extjs4.1, jsonstore

我有两个使用 JsonStore 的网格面板。当在第一个网格相关数据中选择的行使用 加载到第二个网格时`store2.load(...)`。这工作正常。

我有能力将一些行添加到第二个网格（store2），而不发送到服务器（这是必需的）。但是当我在第一个网格中选择其他行然后返回到初始行时，添加的数据不存在。这是因为 sore2 从服务器重新加载。

所以现在我正试图找到防止第二次商店重新加载和使用本地数据的最佳方法。有任何想法吗？

在调查期间，我找到了财产 `single: true`，但找不到任何有关它的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:10:35.693

在主网格中从第二行切换到第一行后，store2 中的数据消失了，因为此切换触发了 store2.load()。一种选择是检查 store2 是否包含一些脏行，如果是这种情况，则阻止 store2.load()。但是使用此解决方案，如果您更改其中的某些数据，您的第二个网格将永远不会更新。

为了解决这个问题，我能看到的唯一解决方案是使用本地存储代理（例如代理：内存）的第三个数据存储。此存储包含来自 store1 的每个主行的所有修改/添加的行。现在，您必须检查每行更改是否在 store3 中有该行的数据，并在处理完 store2.load() 后将其添加到 store2 的数据中。您可以使用从 store2 触发的 load 事件来执行此操作。

# php - 这是一个有效的正则表达式模式吗？

> ID：13762311
> 
> 赞同：0
> 
> 时间：2012-12-07T11:36:47.677
> 
> 标签：php, regex, preg-match

我正在尝试消除正则表达式模式中的许多变化，但我不确定您是否可以使用像这样的字符串字符开头的东西：

```
preg_match("#/str1|str2|^/str3#i",$_SERVER['REQUEST_URI']) 
```

因此，以下值应满足：$_SERVER['REQUEST_URI']

包含`/str1`or`str2`或字符串的开头应该是`/str3`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:41:48.540

您的正则表达式可能应该是：

```
preg_match('#(\/str1|str2|^\/str3)/i#', $_SERVER['REQUEST_URI); 
```

为了更好地理解书写表达式，请查看 Pankit 的[链接](http://net.tutsplus.com/tutorials/other/8-regular-expressions-you-should-know/)。

# java - 可以使用 Eclipse GMF（图形建模框架）来创建独立的建模 IDE 吗？

> ID：13762312
> 
> 赞同：0
> 
> 时间：2012-12-07T11:36:55.727
> 
> 标签：java, modeling, eclipse-gmf, emf

我想创建一个图形建模应用程序。

我一直在研究所有的拖放功能，然后我想到了 GMF/EMF，但它用于创建 Eclipse 插件，至少从我所见：

[http://wiki.eclipse.org/Graphical_Modeling_Framework_FAQ#What_can_I_do_with_GMF.3F](http://wiki.eclipse.org/Graphical_Modeling_Framework_FAQ#What_can_I_do_with_GMF.3F)

> **我可以用 GMF 做什么？**使用 GMF，您可以为 Eclipse 生成图形编辑器。例如，UML 建模工具、工作流编辑器等。基本上，您想要的 EMF 中任何域模型的图形编辑界面。

我的问题是，是否也可以使用这个框架创建独立的应用程序（一个不需要 Eclipse 来运行的应用程序？），如果没有，您是否知道任何有用的框架用于此目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:45:13.440

您可以使用 GMF 创建所谓的 RCP 应用程序（富客户端平台），如[GMF 教程的第 4 部分所述](http://wiki.eclipse.org/GMF_Tutorial_Part_4)。生成的编辑器将比全日食更小、更轻量级，但也相当有限；例如，我发现除了编辑器窗口、属性和大纲视图之外，无法添加其他（自定义）视图。

注意：我自己没有使用过这个（只是稍微修改了一下），我不确定它有多成熟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T02:36:29.293

是的。您可以创建一个独立的 RCP 应用程序（如 Eclipse IDE 产品），您的建模插件将成为其中的一部分。您需要定义产品以使用您的编辑器启动您的插件。

`GMF`为您提供默认的图形视图/编辑器，但首先您需要定义`EMF`模型来生成它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T20:21:44.230

本教程很好地解释了如何做到这一点：[http ://www.rcp-vision.com/?p=1476&lang=en](http://www.rcp-vision.com/?p=1476&lang=en)

# c++ - Excel 2010 与 Excel 2003 中的整数表示（C++ 插件）

> ID：13762316
> 
> 赞同：1
> 
> 时间：2012-12-07T11:37:06.227
> 
> 标签：c++, visual-studio, excel, visual-studio-2008, xls

**介绍**

我继承了一个用 VS2008、xlw 2.0 和 excel 2003 开发的遗留插件项目（C++）。

我已经设法将它移植到 xlw 4.0 标头（添加对 Excel 2007 的支持时，某些方法更改了名称，诸如此类）。我没有生成任何东西（还），因为旧代码是手工编写的，我不会更改正在工作的东西，并且只是为了它而具有合理的结构和代码逻辑。

该代码在 excel 2003 下按预期工作。我今天尝试使用 excel 2010 并发现了一个最令人费解（和可怕）的错误。

**令人费解的行为**

我（从 VBA 宏）接收一列（n 行，1 列）数字（通过构造的小正整数）作为 XlfOper & 我想将其转换为（旧式）数组。代码基本上遍历每一行，然后在与给定行对应的 XlfOper 上调用 AsInt() 方法。就像是：

```
for (long iy = 0; iy < numcols; ++iy)
{
for (long ix = 0; ix < numrows; ++ix)
    convertXflOper( x(ix, iy), a1D[iy*numrows + ix] ); 
} 
```

其中 a1D 是此特定项目中使用的一维数组类型，convertXflOper 是模板函数，适用于以下类型：

```
void convertXflOper (const XlfOper &x, long & y)
{
    y = x.AsInt();
} 
```

在给定的行中，我在 excel 工作簿中有数字 10。

**在 Excel 2003 下，这将转换为 10。在 Excel 2010 下，这将转换为 9。**

我已经对其进行了调试，问题是它实际上读取的不是 10，而是它的双重近似值。（即时窗口的）输出是

```
x.lpxloper4_->val.num
9.9999999999999982 // wrong: I am not asking for 10.0, I am asking for 10 
```

在 Excel 2010 中，以及

```
x.lpxloper4_->val.num
10.000000000000000 // right: an integer is an integer 
```

在 Excel 2003 中。所以 C++ 代码，不管它漂亮（或不漂亮），似乎都没有错。AsInt() 方法的行为类似于强制转换，并且`static_cast<long>(9.9999999999999982)`是 9，而不是 10。

**问题**

这件事让我很伤心，主要是因为它很容易被忽视：对于许多其他整数值，它在 excel 2003 和 2010 中都能正常工作。

我在 excel 界面中做错了什么，因为它认为必须将整数视为双精度数？我怎么能确定这不会在谁知道何时何地发生？解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T16:02:41.627

Excel 内部不保存整数 - 所有数字（整数、日期、时间、货币等）都保存为双精度数。所以 Oper val.num 始终是双精度数，而 xltypeNum 的操作数始终是双精度数。
（操作员可以在 val.w 中保存整数，但只能作为 XLM 宏流控制之类的东西的一部分，这些东西已经过时了几十年，在实践中不太可能得到满足）。
我不知道为什么您在 Excel 2007 中得到 9.9999999 - 您如何将值传递给 Oper？

# c# - 获取调用应用程序的文件夹

> ID：13762317
> 
> 赞同：0
> 
> 时间：2012-12-07T11:37:10.983
> 
> 标签：c#

我正在编写一个从文件夹的上下文菜单中调用的程序，该程序应该在该文件夹中创建一个文件夹。如何获取该文件夹的路径，而不是可执行文件所在的目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:44:55.680

使用`Environment.CurrentDirectory`或`AppDomain.CurrentDomain.BaseDirectory`获取当前工作目录的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:51:39.543

它在 args 中。我的问题是从快捷方式调用应用程序会将当前目录留在可执行路径中。相反，我只会让应用程序在路径上可用，然后将传入正确的路径。

# javascript - 从子类调用超类方法 - JavaScript

> ID：13762320
> 
> 赞同：7
> 
> 时间：2012-12-07T11:37:21.063
> 
> 标签：javascript, inheritance, canvas, subclass, superclass

> **可能重复：**
> [使用 javascript 超级方法设置属性](https://stackoverflow.com/questions/13167386/set-attribute-with-javascript-super-method)

我正在尝试用 HTML5 创建一个简单的游戏来娱乐。我有一个实体类，它应该是 Player 类的超类。

```
function Entity(x, y) {

    this.x = x;
    this.y = y;

    this.tick = function() {
        //Do generic stuff
    }
}

function Player(x, y) {

    this.parent.constructor.call(this, x, y);

    this.tick = function() {
        //Do player-specific stuff
        this.parent.tick.call(this);
    }
}

Player.prototype = new Entity();
Player.prototype.constructor = Player;
Player.prototype.parent = Entity.prototype; 
```

问题出在这一行：

```
this.parent.tick.call(this); 
```

我在 chrome 的 JavaScript 控制台中显示错误：“未捕获的 TypeError：无法调用未定义的方法 'call'”。

我不明白，我花了很长时间试图找到类似问题的帖子。我对超类的构造函数的调用工作正常，但对超类的 tick 方法的调用不起作用。

我对制作游戏非常陌生，所以我不知道这是否是一个好的设置（从子类滴答声中调用超类滴答声）。如果人们使用更好，更典型的方式，请告诉。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T12:19:05.660

[将此答案](https://stackoverflow.com/a/13167717/1048572)改编为您的代码：

```
function Entity(x, y) {

    this.x = x;
    this.y = y;

    this.tick = function() {
        //Do generic stuff
    }
}

function Player(x, y) {

    this.parent.constructor.call(this, x, y);

    var oldtick = this.tick;
    this.tick = function() {
        //Do player-specific stuff
        oldtick.call(this);
    }
}

Player.prototype = Object.create(Entity.prototype);
Player.prototype.constructor = Player;
Player.prototype.parent = Entity.prototype; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T12:30:13.963

你的问题启发了我环顾四周，我发现我认为是[Josh Gertzen 撰写的一篇](http://joshgertzen.com/object-oriented-super-class-method-calling-with-javascript/)关于这个概念的精彩文章。

我公然从他的文章中复制了一些代码来设置`extends`类的方法：

```
function Class() { }
Class.prototype.construct = function() {};
Class.extend = function(def)
{
    var classDef = function()
    {
        if (arguments[0] !== Class)
        {
            this.construct.apply(this, arguments);
        }
    };
    var proto = new this(Class);
    var superClass = this.prototype;
    for (var n in def)
    {
        var item = def[n];                      
        if (item instanceof Function) item.$ = superClass;
        proto[n] = item;
    }
    classDef.prototype = proto;
    classDef.extend = this.extend;      
    return classDef;
}; 
```

之后你的情况很简单：

```
var Entity = Class.extend({
    tick: function()
    {
        alert('Entity tick');
    }
});

var Player = Entity.extend({
    tick: function()
    {
        alert('Player tick');
        arguments.callee.$.tick.call(this);
    }
});

p = new Player();
p.tick(); 
```

哪个会提醒`Player tick`然后`Entity tick`。

# java - 转换列表> 到地图

> ID：13762321
> 
> 赞同：1
> 
> 时间：2012-12-07T11:37:31.640
> 
> 标签：java

我正在使用[queryForList](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/jdbc/core/JdbcTemplate.html#queryForList%28java.lang.String%29)从我的数据库中获取一个表，这给了我`List<Map<String, Object>>`. 我想使用我选择的两列将其转换为`Map<String, Integer>`.

目前我正在这样做

```
List<Map<String, Object>> customers = jdbc.queryForList("SELECT id, name FROM customers");

Map<String, Integer> customerMap = new HashMap<String, Integer>();

for (Map<String, Object> each : customers)
{
    String name = ((String)each.get("name")).trim();
    Integer id = Integer.valueOf(((BigDecimal)each.get("id")).intValue());

    customerMap.put(name, id);
} 
```

并想知道是否有更好的方法。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-28T15:08:55.790

这为时已晚，但只是通过搜索偶然发现这一点，发现也许可以分享我的代码：

```
 private Map<String, Integer> convertMap(List<Map<String, Object>> input) {
        logger.trace("convertMap");
        Map<String, Integer> dest = new HashMap<>();
        for (Map<String, Object> next : input) {
            for (Map.Entry<String, Object> entry : next.entrySet()) {
                dest.put(entry.getKey(), (Integer) entry.getValue());
            }
        }
        return dest;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T11:58:46.733

你在这一行有一个不必要的拳击：

```
Integer id = Integer.valueOf(((BigDecimal)each.get("id")).intValue()); 
```

您应该将其替换为：

```
Integer id = ((BigDecimal) each.get("id")).intValue(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:20:51.063

据我所知，没有其他方法可以做到这一点。通常我只会将该代码封装在一些实体静态方法中，该方法会将映射器转换为所需的对象，例如：

```
public class Person{
    //  define atributes, constructor, etc

    public static Iterable<Person> ExtractFromMap(List<Map<String, Object>> dataList){
        //  iterate over the List like the example you gave
        //  try to be efficient with your casts and conversions

        LinkedList<Person> ret = new LinkedList<Person>();
        for (Map<String, Object> data : dataList)
        {
            //  using the constructor
            //  or put the code directly here
            ret.add(new Person(data));
        }
        return ret;
    }

    //  you can also create a constructor that receives a Map<String, Object> to
    //  use in the static method
    private Person(Map<String, Object> data){
        //  extract and instantiate your attributes

        this.name = ((String)each.get("name")).trim();
        //  ...
    }
} 
```

如果你愿意，你可以尝试创建一个使用反射的通用方法，但为了简单起见，我认为这个例子可以给你一个好主意。

# c++ - 带有 Win32 的 C++ .Net 样式按钮

> ID：13762322
> 
> 赞同：0
> 
> 时间：2012-12-07T11:37:32.483
> 
> 标签：c++, .net, winapi, button, styles

我想知道 Win32 按钮样式。自 VS2012 以来，我们可以选择在基于 .Net 的表单上制作“扁平”样式按钮、下拉菜单等（比如这个，虽然这不是我会使用的颜色集：http: [//assets.componentowl.com /screenshots/36/flat-style_original_1328267962.png?1328242762](http://assets.componentowl.com/screenshots/36/flat-style_original_1328267962.png?1328242762)）。有没有办法通过 Win32 API 创建这些样式的控件，或者我必须自定义渲染它？

# serialization - 提升 shared_ptr 序列化

> ID：13762323
> 
> 赞同：2
> 
> 时间：2012-12-07T11:37:34.340
> 
> 标签：serialization, boost

我已经为 OpenCVs Mat 格式实现了序列化，如下所述：[序列化 OpenCV Mat_<Vec3f>](https://stackoverflow.com/questions/4170745/serializing-opencv-mat-vec3f)

我现在遇到了序列化指向 cv::Mat 的共享指针的问题。它给出了以下错误：

`/usr/include/boost/serialization/shared_ptr.hpp: In function ‘void boost::serialization::serialize(Archive&, boost::shared_ptr<U>&, unsigned int) [with Archive = boost::archive::text_iarchive, T = boost::shared_ptr<cv::Mat>]’: /usr/include/boost/serialization/serialization.hpp:128:9`：

从 'void >boost::serialization::serialize_adl(Archive&, T&, unsigned int) [with Archive = >boost::archive::text_iarchive, T = boost::shared_ptr >]' /usr/include/boost/archive /detail/iserializer.hpp:188:5:

从 'void >boost::archive::detail::iserializer::load_object_data(boost::archive::detail::basic_iarchive&, void*, unsigned int) const [with Archive = boost::archive::text_iarchive, T = boost::shared_ptr >]' recognition2d3d.cpp:227:1: 从这里实例化

/usr/include/boost/serialization/shared_ptr.hpp:167:5：错误：静态断言失败：“boost::serialization::tracking_level< T >::value != boost::serialization::track_never”`

我尝试使用 BOOST_CLASS_TRACKING，但无法正常工作。其实我真的不明白问题是什么，阅读boost文档无助于解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T03:39:10.143

我认为除非指向的对象具有 vtable，否则您不能通过 shared_ptr 进行序列化。尝试将对象的析构函数设为虚拟。

编辑：或者，将对象（OpenCV 矩阵？）包装在具有虚拟析构函数的对象中。

# emacs - Emacs 在 LaTeX 模式下更改字体

> ID：13762328
> 
> 赞同：2
> 
> 时间：2012-12-07T11:37:54.313
> 
> 标签：emacs, font-face, emacs-faces

在 Emacs LaTeX 模式下，我对逐字文本的字体渲染很糟糕：

![在此处输入图像描述](../Images/e00e03b3a3669633381ac5a983d688d9.png)

如何使它变黑，正常尺寸？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T15:55:33.620

`M-x customize-face RET tex-verbatim RET`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T15:48:01.627

对于 Windows 上的 Emacs：

1.  `M-x` `customize-face` `RET` `fixed-pitch` `RET`
2.  点击“显示所有属性”
3.  取消所有。勾选“继承”

# css - 使用 sup 标签和 CSS 的这个 HTML 有什么问题吗？

> ID：13762329
> 
> 赞同：0
> 
> 时间：2012-12-07T11:37:57.430
> 
> 标签：css, internet-explorer-8, vertical-alignment, superscript

我在客户站点的 IE8 CO 中遇到了这个 HTML 的问题，但在我的 XP IE8 VM 上没有。但是，我设法在 IETester 中重现了该问题，并将其追踪到`vertical-align: middle`应用于包含`<sup />`标签的元素的样式。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
</head>
<body>
    <div>
        <span style="vertical-align: middle;"><sup>test</sup></span>
    </div>
</body>
</html> 
```

上面的 HTML 示例是我可以在 IETester 和客户站点上创建的最小可能示例。但是，它在我的装有 IE8 的 XP 虚拟机中运行良好，因此它也可能对您运行良好。我们需要`X-UA-Compatible` `IE=edge`主站点的元标记，因此我将其包含在此处。

中断的症状是 IE 呈现一个空白页面，并且似乎陷入了无限操作 - 如果留得足够长，IETester 就会崩溃（尽管我没有与客户确认同样的事情发生在他们的网站上真正的IE）。

我花了很长时间才将其追踪到`<sup />`标签，然后将 CSS 应用于其父元素（它恰好是`<label />`我们实际网站中的标签，但它似乎与`<span />`标签的行为方式相同）。

**这个 HTML / CSS 有什么问题，还是只是 IE8 很有趣？**

在我的测试中，我尝试了 IE6、IE7、IE9、Chrome、FireFox、Opera 和 Safari，但它们都没有表现出与在客户站点上运行的特定 IE 版本相同的行为。

# hibernate - 在具有 Id().GeneratedBy.Assigned() 的实体上使用级联

> ID：13762330
> 
> 赞同：1
> 
> 时间：2012-12-07T11:38:06.690
> 
> 标签：hibernate, nhibernate, cascade

来自 NHibernate 文档：

> 由于其固有的性质，使用此生成器的实体无法通过 ISession 的 SaveOrUpdate() 方法保存。相反，您必须通过调用 ISession 的 Save() 或 Update() 方法来显式指定 NHibernate 是否应该保存或更新对象。

好的，所以当这些实体是另一个实体的子实体时，并且您想使用级联以便在保存父实体时它的子实体也被持久化，我们怎么能给出我们应该选择`Save`or `Update`？

我应该把我的聚合根吹走并开始拯救个别的孩子吗？在框架中涵盖这一点有多难？当我离开垃圾场时，我不应该关灯，我认为这应该是自动的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T15:17:19.017

这是可能的，具有轻微且不完全令人反感的副作用。

如果我们使用`Version`和`UnsavedValue`配置，我们可以再次使用`SaveOrUpdate()`我们的实体和级联按预期工作。

但是，因为 Version 值是在 db 端处理的，所以 NH 必须进行第二次调用以检索最新版本（在我的情况下是时间戳）。

我更喜欢聚合根处理孩子的保存，所以它对我有用。

...

```
public virtual byte[] Version { get; set; } 
```

...

```
mapping.Version(m => m.Version)
.UnsavedValue(null)
.CustomSqlType("timestamp")
.CustomType("BinaryBlob")
.Generated.Always(); 
```

# php - http_negotiate_language 问题

> ID：13762333
> 
> 赞同：0
> 
> 时间：2012-12-07T11:38:17.700
> 
> 标签：php, lang

也许我错过了什么但是当我打电话时

```
$result='';
      $langs = array(
          'en-US',
          'fr',
       );
var_dump(http_negotiate_language($langs,$result)); 
```

我有一条 500 错误消息。我应该添加一些扩展，我应该在我的 php.ini 上参数化一些东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:49:25.883

它需要 PECL pecl_http >= 0.1.0

# salesforce - 不工作

> ID：13762334
> 
> 赞同：2
> 
> 时间：2012-12-07T11:38:20.080
> 
> 标签：salesforce

我正在研究按钮。

我的组件代码如下。

```
<apex:commandButton action="{!sendAction}" 
value="SEND" styleClass="Button" rerender="messageId" immediate="true"/>

<apex:outputpanel rendered="{!showmsg}" id="messageId">
            <apex:outputtext value="{!outputMessage}" style="color:red;font-size:13px;font-weight:bold;"/>
            <br />    
        </apex:outputpanel> 
```

我的控制器代码如下。

```
public PageReference sendAction()
{ 
    showmsg=true;                     
    outputMessage='working';             
     return null;                        
 } 
```

但是我的操作方法 sendAction 没有被调用。当我在新窗口中打开我的页面时，函数被调用。但是在同一个窗口中它没有被调用。

任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T23:17:46.110

如果，正如 Matthew 已经暗示的那样，您的页面或组件引用了您的控制器，我相信这可能是由 showmsg 变量引起的。

如果由于 showMsg 最初为 false 而未呈现 messageId 输出面板，它也不会重新呈现，因此不会显示您的消息。如果我是对的，以下内容会更有意义，并解决您的问题。

```
<apex:outputpanel  id="messageId">
        <apex:outputtext rendered="{!showmsg}" value="{!outputMessage}" style="color:red;font-size:13px;font-weight:bold;"/>
        <br />    
    </apex:outputpanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-25T18:07:25.783

当您`<apex:commandButton>`或`<apex:commandLink>`似乎没有调用顶点控制器方法时，您可以尝试以下方法。

1.  尝试`immediate = true`为这两个设置属性。这在某些情况下有效。

2.  尝试使用`<apex:actionFunction>`.

3.  如果您仍然无法使用 调用 apex 控制器方法`<apex:actionFunction>`，请参阅[此](http://www.infallibletechie.com/2013/11/apexactionfunction-is-not-calling-apex.html)链接。

# c# - 从项目中存在的文件夹中读取文件

> ID：13762338
> 
> 赞同：106
> 
> 时间：2012-12-07T11:38:43.817
> 
> 标签：c#

我有一个 C# 项目（Windows 控制台应用程序）。我在项目中创建了一个名为**Data**的文件夹。文件夹 Data 中有两个文本文件。

如何从“数据”文件夹中读取文本文件。我试过下面的东西。

```
string[] files = File.ReadAllLines(@"Data\Names.txt") 
```

找不到文件是错误的。

我已经检查了之前发布的一些 Stackoverflow 答案，但没有一个对我有用。

我该如何进行？谢谢！

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2012-12-07T11:46:14.683

下面的代码应该工作：

```
string path = Path.Combine(Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location), @"Data\Names.txt");
string[] files = File.ReadAllLines(path); 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-12-07T11:46:06.257

这取决于您的数据文件夹在哪里

要获取 .exe 文件所在的目录：

```
AppDomain.CurrentDomain.BaseDirectory 
```

获取当前目录：

```
Environment.CurrentDirectory 
```

然后你可以连接你的目录路径（`@"\Data\Names.txt"`）

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-12-07T12:46:09.433

如果您需要获取名为“Data”的文件夹中的所有文件，只需将其编码如下

```
string[] Documents = System.IO.Directory.GetFiles("../../Data/"); 
```

现在，“文档”由“数据”文件夹“数据”中两个文本文件的完整对象名称数组组成。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2015-07-20T21:49:13.060

我有一个 C# 项目（Windows 控制台应用程序）。我在项目中创建了一个名为 Images 的文件夹。有一个名为 MyIcon.ico 的 ico 文件。我访问了Images文件夹中的MyIcon.ico，如下所示。

```
this.Icon = new Icon(@"../../Images/MyIcon.ico"); 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-12-09T16:37:49.073

设置始终复制到输出目录，然后尝试以下操作：

```
 Directory.SetCurrentDirectory(AppDomain.CurrentDomain.BaseDirectory);
 String Root = Directory.GetCurrentDirectory(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-08T15:01:42.250

对于 Xamarin.iOS，如果文件存在，您可以使用以下代码获取文件的内容。

```
var documents = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
var filename = Path.Combine(documents, "xyz.json");
if (File.Exists(filename))
{
var text =System.IO.File.ReadAllText(filename);
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-01-10T21:36:59.063

这对我很有帮助，如果您使用

```
var dir = Directory.GetCurrentDirectory() 
```

路径填充超出当前文件夹，它将包含此路径 \bin\debug 我向您推荐的是，您可以使用

```
string dir = Directory.GetParent(Directory.GetCurrentDirectory()).Parent.Parent.FullName 
```

然后打印 dir 值并验证路径是否为您提供

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-01-16T22:02:16.160

```
string myFile= File.ReadAllLines(Application.StartupPath.ToString() + @"..\..\..\Data\myTxtFile.txt") 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-11-30T06:24:02.653

使用此代码也可以读取文件夹和子文件夹中的所有文件

```
class Program
{
    static void Main(string[] args)
    {

        getfiles get = new getfiles();
        List<string> files =  get.GetAllFiles(@"D:\Document");

        foreach(string f in files)
        {
            Console.WriteLine(f);
        }

        Console.Read();
    }

}

class getfiles
{
    public List<string> GetAllFiles(string sDirt)
    {
        List<string> files = new List<string>();

        try
        {
            foreach (string file in Directory.GetFiles(sDirt))
            {
                files.Add(file);
            }
            foreach (string fl in Directory.GetDirectories(sDirt))
            {
                files.AddRange(GetAllFiles(fl));
            }
        }
        catch (Exception ex)
        {

            Console.WriteLine(ex.Message);
        }

        return files;
    }
} 
```

# c++ - 这个 valgrind 在 crypto++ 中使用大小为 8 的统一值是真实的还是红鲱鱼？

> ID：13762340
> 
> 赞同：3
> 
> 时间：2012-12-07T11:38:53.473
> 
> 标签：c++, valgrind, crypto++

我在**libcrypto++9_5.6.1-6_amd64.deb**`Use of uninitialised value of size 8`的库调用中 有一个 valgrind 报告。`CryptoPP::HuffmanEncoder::GenerateCodeLengths``Ubuntu 12.10`

 ***我需要进行完整性检查：应用程序代码有问题吗？（这是一个真正的可能性，因为我刚刚开始使用 crypto++。）或者我应该将 valgrind 警告抑制放入忽略过滤器中？*

尽管出现错误，但代码看起来可以正常工作。

```
make: `test3' is up to date.
==5420== Memcheck, a memory error detector
==5420== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==5420== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==5420== Command: ./test3
==5420== 
Plain text = 13312 bytes
==5420== Use of uninitialised value of size 8
==5420==    at 0x520D9A9: CryptoPP::HuffmanEncoder::GenerateCodeLengths(unsigned int*, unsigned int, unsigned int const*, unsigned long) (in /usr/lib/libcrypto++.so.9.0.0)
==5420==    by 0x520E0A5: CryptoPP::Deflator::EncodeBlock(bool, unsigned int) (in /usr/lib/libcrypto++.so.9.0.0)
==5420==    by 0x520EA2E: CryptoPP::Deflator::EndBlock(bool) (in /usr/lib/libcrypto++.so.9.0.0)
==5420==    by 0x520F221: CryptoPP::Deflator::Put2(unsigned char const*, unsigned long, int, bool) (in /usr/lib/libcrypto++.so.9.0.0)
==5420==    by 0x50F16DB: CryptoPP::BufferedTransformation::ChannelPut2(std::string const&, unsigned char const*, unsigned long, int, bool) (in /usr/lib/libcrypto++.so.9.0.0)
==5420==    by 0x50F1F76: CryptoPP::BufferedTransformation::TransferMessagesTo2(CryptoPP::BufferedTransformation&, unsigned int&, std::string const&, bool) (in /usr/lib/libcrypto++.so.9.0.0)
==5420==    by 0x50F2185: CryptoPP::BufferedTransformation::TransferAllTo2(CryptoPP::BufferedTransformation&, std::string const&, bool) (in /usr/lib/libcrypto++.so.9.0.0)
==5420==    by 0x4106A4: CryptoPP::StringSource::StringSource(std::string const&, bool, CryptoPP::BufferedTransformation*) (filters.h:767)
==5420==    by 0x40C7D5: main (test3.cpp:75)
==5420== 
==5420== Use of uninitialised value of size 8
==5420==    at 0x520D9A9: CryptoPP::HuffmanEncoder::GenerateCodeLengths(unsigned int*, unsigned int, unsigned int const*, unsigned long) (in /usr/lib/libcrypto++.so.9.0.0)
==5420==    by 0x520E0A5: CryptoPP::Deflator::EncodeBlock(bool, unsigned int) (in /usr/lib/libcrypto++.so.9.0.0)
==5420==    by 0x520EA4F: CryptoPP::Deflator::EndBlock(bool) (in /usr/lib/libcrypto++.so.9.0.0)
==5420==    by 0x520F221: CryptoPP::Deflator::Put2(unsigned char const*, unsigned long, int, bool) (in /usr/lib/libcrypto++.so.9.0.0)
==5420==    by 0x50F16DB: CryptoPP::BufferedTransformation::ChannelPut2(std::string const&, unsigned char const*, unsigned long, int, bool) (in /usr/lib/libcrypto++.so.9.0.0)
==5420==    by 0x50F1F76: CryptoPP::BufferedTransformation::TransferMessagesTo2(CryptoPP::BufferedTransformation&, unsigned int&, std::string const&, bool) (in /usr/lib/libcrypto++.so.9.0.0)
==5420==    by 0x50F2185: CryptoPP::BufferedTransformation::TransferAllTo2(CryptoPP::BufferedTransformation&, std::string const&, bool) (in /usr/lib/libcrypto++.so.9.0.0)
==5420==    by 0x4106A4: CryptoPP::StringSource::StringSource(std::string const&, bool, CryptoPP::BufferedTransformation*) (filters.h:767)
==5420==    by 0x40C7D5: main (test3.cpp:75)
==5420== 
Encrypted text = 110 bytes : JFuk7LvDTujLm3D8SdFZCwSXMQsslb0+AUf8sp53Z+oRDIp9aQY1azUF2PZZje/SV1q+IPz5
jGWYkJXlZv2ttADPUdMbg7ib+B4LGlb+7/k=
KEY[16]: ABD86728BB78D5722D07F247D8279CD9
IV [8]: BEBD442990B11C58
==5420== 
==5420== HEAP SUMMARY:
==5420==     in use at exit: 0 bytes in 0 blocks
==5420==   total heap usage: 118 allocs, 118 frees, 313,921 bytes allocated
==5420== 
==5420== All heap blocks were freed -- no leaks are possible
==5420== 
==5420== For counts of detected and suppressed errors, rerun with: -v
==5420== Use --track-origins=yes to see where uninitialised values come from
==5420== ERROR SUMMARY: 2 errors from 2 contexts (suppressed: 2 from 2) 
```

**编译**

`g++ -std=c++11 -g3 -O2 -Wall -Wextra -Wno-unused -o test3 test3.cpp -lrt -lcryptopp`

**test3.cpp 代码**

```
#include <cryptopp/blowfish.h>
#include <cryptopp/base64.h>
#include <cryptopp/files.h>
#include <cryptopp/filters.h>
#include <cryptopp/modes.h>
#include <cryptopp/gzip.h>
#include <cryptopp/osrng.h>
#include <cryptopp/hex.h>

#include <ctime>
#include <iostream>
#include <exception>

int main () 
{
    std::string plainText;
    timespec ts1, ts2;

    plainText = "Hello, world!";
    for (int i = 0; i < 10; i++) 
        plainText = plainText + plainText;

    byte   iv [ CryptoPP::Blowfish::BLOCKSIZE         ];
    byte   key[ CryptoPP::Blowfish::DEFAULT_KEYLENGTH ]; 

    const bool generate_fast = true;
    CryptoPP::AutoSeededRandomPool rng( !generate_fast ); 
    rng.GenerateBlock( iv,  sizeof( iv  ));
    rng.GenerateBlock( key, sizeof( key ));

    std::cout << "Plain text = " << plainText.size() << " bytes\n";

    std::string cipher, decipher;
    CryptoPP::StringSink*    sink       = new CryptoPP::StringSink( cipher  );
    CryptoPP::Base64Encoder* base64_enc = new CryptoPP::Base64Encoder( sink );
    CryptoPP::CBC_Mode<CryptoPP::Blowfish>::Encryption 
        twofish( key, CryptoPP::Blowfish::DEFAULT_KEYLENGTH, iv );
    CryptoPP::StreamTransformationFilter* 
        enc = new CryptoPP::StreamTransformationFilter( twofish, base64_enc );
    CryptoPP::Gzip *zip = new CryptoPP::Gzip( enc );
    CryptoPP::StringSource source( plainText, true, zip );
    std::cout << "Encrypted text = " << cipher.size() << " bytes : " << cipher;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-14T05:17:00.097

根据[这个](http://valgrind.org/docs/manual/mc-manual.html)valgrind 将在您使用尚未初始化的值时报告一个未初始化的值（相当明显）。

就您的代码而言，不同的 C++ 编译器会以不同的方式处理已声明但未初始化的值，具体取决于传递的标志。这可以将它们设置为零，但不应假设。

valgrind 输出中的 8 个字节可能是一个指针，并且对那些使用未初始化的值特别危险。

为了完全确定，您需要访问源代码，否则您总是会冒着未定义行为的风险。**

# javascript - 用于验证电子邮件的 Razor javascript 函数

> ID：13762341
> 
> 赞同：0
> 
> 时间：2012-12-07T11:38:57.490
> 
> 标签：javascript, razor

我在其他 javascript 的脚本标签中有以下 javascript 函数。它位于 _Layout.cshtml 中的 .net MVC3 Web 应用程序中。之所以 YSOD 是因为正则表达式中的“@”符号。我怎样才能让它在不爆炸的情况下工作？

```
 function checkEmail(emailAddress) {
        //Match emailAddress

        var regex = /^[a-z0-9\.\_%+-]+@[a-z0-9\.\-]+\.[a-z]{2,4}$/i;

        if (emailAddress.search(regex)) {
            return false;
        }
        else {
            return true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:41:27.490

@@ 转义它

像这样：

```
var regex = /^[a-z0-9\.\_%+-]+@@[a-z0-9\.\-]+\.[a-z]{2,4}$/i; 
```

# php - facebook 在重定向 url 中使用 url 片段（#）有什么原因吗？

> ID：13762345
> 
> 赞同：1
> 
> 时间：2012-12-07T11:39:04.483
> 
> 标签：php, facebook-php-sdk

我在我的网站上使用 facebook-php-sdk 进行 facebook 集成。我正在使用他们的 api 函数[getLoginUrl()](https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/)从 facebook 生成一个登录 url ，并在参数中传递一个 params 数组。params 数组包含一个名为 redirect_uri 的键。

当用户点击我网站上的 facebook 连接按钮时，它会链接到上面从 facebook 提供的登录 url。然后，Facebook 对用户进行身份验证，并将用户的浏览器重定向回我在 params 中指定的 redirect_uri。这个 url 包含 GET 参数和`#_=_`最后一个 url 片段。为什么 facebook 在重定向 url 的末尾添加一个 url 片段。有什么方法可以避免 url 片段？

# file-copying - 复制文件时如何在WIN APP中创建暂停、停止和恢复按钮？

> ID：13762350
> 
> 赞同：0
> 
> 时间：2012-12-07T11:39:20.523
> 
> 标签：file-copying

## 复制文件时如何在WIN APP中创建暂停和停止和恢复按钮？

MyProject 设计快照：

[http://www.uploadtak.com/images/f7636_Snapshot_20121207_14.jpg](http://www.uploadtak.com/images/f7636_Snapshot_20121207_14.jpg)

代码 MyProject 的快照：

[http://www.uploadtak.com/images/y564_Snapshot_20121207_14.jpg](http://www.uploadtak.com/images/y564_Snapshot_20121207_14.jpg)

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T06:17:58.277

```
 for (int i = 0; i <= inStream.Length; i++)
            {

                worker.ReportProgress(i);

                //System.Threading.Thread.Sleep(100);

                fileStream.SetLength(inStream.Length);
                int bytesRead = -1;
                byte[] bytes = new byte[bufferSize];

                while (puase);

                if (cancel)
                {
                    offsetw = 0; fileStream.Flush();
                    return;

                }
                bytesRead = inStream.Read(bytes, offsetw, bufferSize);

                fileStream.Write(bytes, offsetw, bytesRead);
                offsetw *= 1024;

            } 
```

内部空while循环，暂停操作，可以在Pause Button中切换puase值

# angularjs - 如何从 $resource.save() 触发模型更新？

> ID：13762352
> 
> 赞同：1
> 
> 时间：2012-12-07T11:39:38.570
> 
> 标签：angularjs

我目前正在尝试构建我的第一个 Angular 应用程序，我可能需要一些帮助。

我正在使用标准 $resource 操作访问 REST 服务：

```
angular.module('wtrack', ['ngResource']).
    factory('WtrackAPI', function($resource) {
      var WtrackAPI = $resource('http://hostname/wtrack/api/w/:id');
      return WtrackAPI;
    }); 
```

这是我的控制器：

```
function ListCtrl($scope, $timeout, WtrackAPI){

    $scope.wdata = WtrackAPI.query(); // a list of objects displayed in my view

    $scope.addEntry = function() {   // adding an object to the list
        console.log("Adding Entry");
        var entry = {day: $scope.wdata.day, value: $scope.wdata.value};
        WtrackAPI.save(entry, 
                          function(){console.log("WTF do I need to do here to rerun WtrackAPI.query()");});
    };

} 
```

我想要做的基本上是通过`$scope.wdata = WtrackAPI.query();`在 save() 完成后再次执行来更新我的模型。我怀疑角度方式只是`$scope.wdata.push(entry)`，但在这种情况下，数据库会使用触发器将一些数据添加到条目中并进行一些复杂的排序，所以我真的很想往返并使用查询重新加载整个列表。我怎样才能做到这一点？只是调用`$scope.wdata = WtrackAPI.query();`保存回调不起作用，因为 $scope 显然在那里不存在。我用 $emit 和 $rootScope 等尝试了一些其他的东西，但所做的一切都让我很困惑。所以请，有人可以给我一个提示，告诉我这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-04T06:47:24.013

接受的答案会让你瞬间看到一个空白模型。我推荐这个进行更清洁的模型更新：

```
function ListCtrl($scope, $timeout, WtrackAPI){
        $scope.queryWData = function() {
            WtrackAPI.query(function(response){
                // set the wdata here, in the callback
                $scope.wdata = response;
            })
        };
        $scope.addEntry = function() {   // adding an object to the list
            console.log("Adding Entry");
            var entry = {day: $scope.wdata.day, value: $scope.wdata.value};
            WtrackAPI.save(entry,
                function(){
                    $scope.queryWData();
                });
        };
        $scope.queryWData();
    } 
```

我建议不要设置`$scope.wdata`等于`$resource`直接，因为在该资源响应之前，您将 $scope.wdata 为空白。在您的模型实际更新之前，这将导致大量空白内容闪烁。

为了纠正这个问题，我们`$scope.wdata`在`$resource`回调中设置

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T17:46:26.313

该`$scope`对象应该可以在闭包范围内访问，因此您应该能够编写：

```
function ListCtrl($scope, $timeout, WtrackAPI){

    $scope.wdata = WtrackAPI.query(); // a list of objects displayed in my view

    $scope.addEntry = function() {   // adding an object to the list

        var entry = {day: $scope.wdata.day, value: $scope.wdata.value};
        WtrackAPI.save(entry, function() {
           //$scope should be accessible here
           $scope.wdata = WtrackAPI.query();
        });
    };
} 
```

# javascript - 尝试从 Rails 视图将字符串传递给 javascript 会出现“缺少；语句之前”错误

> ID：13762360
> 
> 赞同：1
> 
> 时间：2012-12-07T11:39:46.700
> 
> 标签：javascript, ruby-on-rails

尝试传递字符串数据会在 HTML 中产生所需的结果，但不确定为什么我会收到“缺少 ; before statement”错误。

```
<%= javascript_tag do %>
    window.context_user_email = <%= @context_user_email %>;
<% end %> 
```

给...

```
<script type="text/javascript">
//<![CDATA[

        window.context_user_email = some@example.com;

//]]>
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:40:38.213

如果添加引号，它将成为字符串变量，否则只是语法错误：

```
<%= javascript_tag do %>
    window.context_user_email = "<%= @context_user_email %>";
<% end %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T11:41:08.770

`some@example.com`应该像这样引用

```
"some@example.com" 

<%= javascript_tag do %>
    window.context_user_email = "<%= @context_user_email %>";
<% end %> 
```

因为它必须作为字符串值读取

# visual-studio-2012 - 通过 MTM 设置编码 UI 测试的远程执行

> ID：13762363
> 
> 赞同：1
> 
> 时间：2012-12-07T11:40:03.450
> 
> 标签：visual-studio-2012, automated-tests, coded-ui-tests, ui-testing

我已经为我的案例搜索了高低的明确说明。我什至遵循了使用 Visual Studio 2012 进行持续交付测试一书中的说明。

查询是：我想从 Microsoft 测试管理器运行我的编码 ui 测试。

*   我在 VS2012 中创建了有效的编码 UI 测试
    *   这是一个独立于 Web 应用程序的解决方案
*   我使用 TFS2012 管理 web 应用解决方案
*   测试控制器已设置在与 Web 应用程序相同的服务器上
    *   测试控制器已配置为使用 tfs 默认项目集合
*   测试/实验室管理器已在我的 PC 上设置
    *   我添加了一个标准的虚拟环境
*   我已将测试用例与编码的 ui 测试相关联

下一步是我卡住的地方......所有论坛和书籍都表明我需要创建一个部署 - 构建 - 测试过程。由于我的编码 ui 测试解决方案与 Web 应用程序分开，这是否会改变任何东西，如果没有，我该怎么做呢？

如果我的编码 ui 测试解决方案构建后我的理解是正确的，

*   我需要将它部署到通过 Lab Manager 创建的虚拟环境中的某个目录
    *   这会将编码的 ui 测试 dll 放入某个目录
*   我可以使用 Lab Manager 运行测试，该测试将在虚拟环境中使用 vs2012 从 dll 运行编码的 ui 测试

如果我错了，请纠正我，并提供我可以用来完成我的案例设置的步骤。

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T05:07:30.840

您需要创建一个运行自动化测试的环境。完成后，您应该将构建和环境与 AUT 的测试计划相关联。还使用正确的 .testsettings 指向您配置的环境。和 bazinga 你很高兴。

您应该能够找到许多关于此的博客文章。这是我喜欢的一个 - [http://www.deliveron.com/blog/post/Running-Automated-Tests-from-Microsoft-Test-Manager.aspx](http://www.deliveron.com/blog/post/Running-Automated-Tests-from-Microsoft-Test-Manager.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-25T18:30:40.177

如果您不希望每次构建和部署 Web 应用程序时都自动化测试，那么这些步骤会容易得多。

*   为您的自动化测试解决方案创建构建。
    *   在 Visual Studio 中，转到您的团队资源管理器并单击构建
    *   单击新建构建定义
    *   常规选项卡

        *   填写**构建定义名称**
        *   **启用**队列处理

    ***   触发选项卡
        *   我选择**持续集成**，以便每次签入时都会构建它。但是选择最适合您需求的那个。*   源设置选项卡
        *   您应该只需要一条状态为**活动的行**
        *   源代码管理文件夹指向您的自动化测试解决方案所在的目录
        *   构建代理文件夹**$(SourceDir)***   构建默认值选项卡
        *   选择您的构建控制器
        *   在 VS 2013 中，有一个**将构建输出复制到服务器**的选项，我发现这是最简单的。如果您没有该选项，或者您有可以使用的网络共享，那么我会使用它。它只需要您运行测试控制器和测试代理的任何用户都可以访问。*   处理选项卡
        *   默认的 .xaml 文件应该包含您需要的所有部分。
        *   您应该能够将所有内容保留为默认值，除了
            *   构建 -> 项目（为您的自动化测试解决方案选择您的解决方案）
            *   测试 -> 高级 -> 禁用测试（真）您不需要在每次构建时都运行它们。
            *   高级 -> 失败时创建工作项（假）您不需要更改此设置，但大多数人不需要每次构建此类解决方案失败时都需要一张票。如果您想要一个，您可以将其保留为 True。*   保留政策（您可以保留它，或调整您想要保存的任何构建）*   最后第一次运行你的构建。**
***   将构建分配给您的测试计划
    *   打开**MTM**并转到**测试中心内的****计划**选项卡
    ***   点击**属性***   确保自动运行部分为其选择了测试环境。*   在 Builds 部分中，将您的 Filter for Builds 设置为具有您刚刚创建的构建名称的构建*   在 Build In Use 旁边：单击 Modify 并选择最新版本。*   关闭并保存您的测试计划*****   将 CodedUI 测试链接到 MTM 测试用例。
    *   在 Visual Studio 中打开您的自动化测试解决方案
    *   转到**团队资源管理器**并单击**工作项**
    *   单击新查询并创建一个查询以查找您的测试用例并点击运行（我发现查询 ID 工作最快）
    *   双击打开你的测试用例
    *   转到测试用例中的**关联自动化选项卡**
    *   单击**...**按钮并选择您的测试用例。
        *   如果您的测试用例未显示，可能是因为您的解决方案未打开和构建，或者您可能打开了多个 TFS 项目并且您正在处理的项目不是按字母顺序排列的。如果您打开了多个 TFS 项目，我发现最好将它们完全删除，这样它们就不会显示在“连接到团队和项目”窗口中。
    *   最后保存您的测试用例。****

 ****此时您应该能够在 MTM 中运行它。

如果您更新了您的自动化测试解决方案并对其进行了重建，请记住返回到您在 MTM 中的测试计划并分配最新版本。我还没有弄清楚如何让它自动获取最新版本。****

# r - 如何找到R中列的最小值？

> ID：13762364
> 
> 赞同：28
> 
> 时间：2012-12-07T11:40:04.220
> 
> 标签：r

我是 R 的新手，我正在尝试做一些非常简单的事情。我已经加载了一个包含四列的 txt 文件，现在我想获得第二列的最小值。这是我拥有的代码：

```
 ## Choose the directory of the file

 setwd("//Users//dkar//Desktop")

 ## Read the txt file

 data<-read.table("export_v2.txt",sep="",header=T)

 str(data)

 ##  this command gives me the minimum for all 4 columns!!
 a<-apply(data,2,min) 
```

实际上，如果我想做这样的事情： min (data(:,2)). 但我不知道如何在 R 中做到这一点。有什么帮助吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-12-07T11:42:24.610

如果您需要特定列的最小值

```
min(data[,2]) 
```

注意：R 会考虑`NA`最小值和最大值，因此如果您的列中有 NA，它们会返回：`NA`。要补救，请使用：

```
min(data[,2], na.rm=T) 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-11-16T20:21:59.130

如果您更喜欢使用列名，您可以这样做：

```
min(data$column_name) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-07-15T18:14:40.883

```
df <- read.table(text = 
             "X  Y
             1  2  3
             2  4  5
             3  6  7
             4  8  9
             5 10 11",
             header = TRUE)

y_min <- min(df[,"Y"])

# Corresponding X value
x_val_associated <- df[df$Y == y_min, "X"]

x_val_associated 
```

首先，您仅使用“Y”列上的 min 函数找到 Y min。请注意，返回的结果只是一个整数值。然后，要找到关联的 X 值，您可以将 data.frame 子集化为仅最小 Y 值所在的行，并仅提取“X”列。

您现在有两个整数值 X 和 Y，其中 Y 是最小值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-16T22:03:06.743

由于它是一个数字运算，我们应该先将其转换为数字形式。如果数据是因子数据类型，则无法执行此操作。
使用 检查列的数据类型`str()`。

```
min(as.numeric(data[,2])) 
```

# java - 无法在 GlassFish 上更改 WAR 应用的上下文根

> ID：13762368
> 
> 赞同：3
> 
> 时间：2012-12-07T11:40:19.853
> 
> 标签：java, glassfish, war

我在 Netbeans 中创建了名为 TestA 的新战争应用程序。然后，我使用以下内容创建新的 Glassfish 部署描述符 glassfish-web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE glassfish-web-app PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 Servlet 3.0//EN" "http://glassfish.org/dtds/glassfish-web-app_3_0-1.dtd">
<glassfish-web-app error-url="">
  <context-root>/new_context_root</context-root>
</glassfish-web-app> 
```

然后我将我的应用程序部署到 GF。Context Root 仍然是 /TestA，而不是 /new_context_root。为什么？

Glassfish 版本是 3.1.2.2

**UPD**

如果我通过 autodeploy 文件夹进行部署，则上下文根目录会正常更改，但不会来自 web-admin

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-23T15:43:07.977

**在 glassfish 网络管理员中，当部署一个新的 WAR 时，您必须将Context Root:**字段置空以使用 glassfish-web.xml 文件中的那个。

# bash - 分配给位置参数

> ID：13762370
> 
> 赞同：19
> 
> 时间：2012-12-07T11:40:25.767
> 
> 标签：bash, positional-parameter

如何为 Bash 中的位置参数赋值？我想为默认参数赋值：

```
if [ -z "$4" ]; then
   4=$3
fi 
```

表示 4 不是命令。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-07T11:56:17.250

`set`内置是设置位置参数的唯一方法

```
$ set -- this is a test
$ echo $1 
```

> ```
> this 
> ```

```
$ echo $4 
```

> ```
> test 
> ```

`--`防止看起来像选项的东西（例如`-x`）。

在您的情况下，您可能想要：

```
if [ -z "$4" ]; then
   set -- "$1" "$2" "$3" "$3"
fi 
```

但它可能会更清楚

```
if [ -z "$4" ]; then
   # default the fourth option if it is null
   fourth="$3"
   set -- "$1" "$2" "$3" "$fourth"
fi 
```

您可能还想查看参数计数`$#`而不是测试`-z`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T11:58:26.017

您可以通过使用第四个参数再次调用脚本来做您想做的事情：

```
if [ -z "$4" ]; then
   $0 "$1" "$2" "$3" "$3"
   exit $?
fi
echo $4 
```

调用上面的脚本`./script.sh one two three`会输出：

> 三

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-19T08:03:34.150

这可以通过直接分配到具有导出/导入类型机制的辅助数组来完成：

```
set a b c "d e f" g h    
thisArray=( "$@" )
thisArray[3]=4
set -- "${thisArray[@]}"
echo "$@" 
```

输出'abc 4 g h'

# android - 在 ViewPager 中使用相机时丢失数据

> ID：13762372
> 
> 赞同：1
> 
> 时间：2012-12-07T11:40:24.780
> 
> 标签：android, android-camera, android-viewpager

我是整个 android 开发场景的新手，如果我问了一个愚蠢的问题，我很抱歉，但我找不到答案。

我目前有一个带有按钮的 ViewPager，它可以启动相机并使用它拍摄的图片更新 ImageView。问题出在模拟器（4.1.2）和摩托罗拉Razor x910（4.0.4）上，它工作得很好，它从相机获取图片并用图片更新ImageView。但是在 Galaxy S3 (4.1) 和 Motorola Milestone (2.3.7) 上，它崩溃并给出一个空引用（使用相机后 ImageView 设置为空），因此它无法将图片分配给 ImageView 并崩溃

有什么建议吗？

# asp.net - 网格视图中的列宽

> ID：13762387
> 
> 赞同：0
> 
> 时间：2012-12-07T11:41:29.197
> 
> 标签：asp.net

所以我尝试在 7 个地方（`ControlStyle-Width`, `ItemStyle-Width`, `HeaderStyle-Width`, `ControlStyle Width`, `ItemStyle Width`,`TextBox Width`最后在 a `css`）中定义模板字段的宽度，但它仍然包裹了内容（“1400 kr”）。这是怎么回事？

```
 <asp:TemplateField HeaderText="Totalt" ControlStyle-Width="100" ItemStyle-Width="100" ItemStyle-Wrap="True" HeaderStyle-Width="100" ControlStyle-CssClass="wide">
                  <ItemTemplate>
                        <asp:TextBox ID="tbTotalPrice" runat = server ReadOnly="true" Width="100px"></asp:TextBox>               
                    </ItemTemplate>
                    <ControlStyle Width="100px" />
                    <ItemStyle HorizontalAlign="Right" Width="100px" />
                </asp:TemplateField> 
```

样式表：

```
.wide {
    width: 120px;
    column-width: 120px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:10:07.203

确保您没有给出 Gridview 的总宽度。如果您给出了 Gridview 的总宽度，则将其删除。

由于您已经定义了手动列宽，因此无需为项目模板提供类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:23:51.213

使用列标签而不是 ItemTemplate 标签，然后设置列宽。你也可以使用 style="white-space: nowrap;overflow: hidden;" 如果文本大于列宽，它将截断文本。您可以使用 style="overflow: hidden;" 如果你想让你的文本被换行。

# javascript - 按生成的 id 显示隐藏图像

> ID：13762390
> 
> 赞同：1
> 
> 时间：2012-12-07T11:41:51.720
> 
> 标签：javascript, jquery

我有这段代码可以用 javascript 生成组 ID。它显示在这里：http: [//jsfiddle.net/LwtvK/5/](http://jsfiddle.net/LwtvK/5/)。现在，我希望它控制显示的图像，而不是写文本“Group id：X”。有 7 个组 id 和 7 个图像

```
 <div data-role="content" id="pictures"> 
        <img src="images/image1.jpg" alt="image" id="pict1">
        <img src="images/image2.jpg" alt="image" id="pict2">    
        <img src="images/image3.jpg" alt="image" id="pict3">    
        <img src="images/image4.jpg" alt="image" id="pict4">    
        <img src="images/image5.jpg" alt="image" id="pict5">    
        <img src="images/image6.jpg" alt="image" id="pict6">    
        <img src="images/image7.jpg" alt="image" id="pict7">    
    </div> 
```

现在，当组 ID 为 5 时，我希望“继续”按钮隐藏图像 1、2、3、4、6 和 7 并显示图像 5。我正在考虑做类似的事情

```
 function show_img(id)
    {
        if(id=='1')
        {
           $("#pict1").hide();
           $("#pict2").show();
        }
        else if(id=='2')
        {
            $("#pict2").show();
            $("#pict1").hide();
        }
    return false;
     } 
```

但这会导致大量的重新输入，我不确定如何让它工作。那么，有谁知道我如何在单击按钮时获取生成的组 ID 以显示正确的图像？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T11:46:24.030

您可以隐藏所有（使用一些通用选择器），然后只显示您需要的那个。例如

```
function show_img(id) {
    // hide every image that is immediate child of node with "pictures" id
    $('#pictures > img').hide();
    $('#pict'+id).show();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T11:48:00.630

以下代码将隐藏所有以 id 开头的图像，`img`然后显示传入 id 的图像：

```
function show_img(id)
{
    $('img[id^="img"]').hide();
    $('#img' + id).show();
} 
```

[http://jsfiddle.net/3U96T/1/](http://jsfiddle.net/3U96T/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T11:46:25.700

像这样的东西可能有用-

```
function show_img(id)
{
  // hide all other images (possibly only within a certain parent element)
  $("#parent_selector > img").hide();

  // display only specified image by id
  $("#img"+id).show();
  return false;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-07T11:52:27.480

我建议（尽管未经测试）：

```
 function show_img(id) {
    $('#img' + id).show().siblings().hide();
 } 
```

# r - R中的矩阵乘法，奇怪的结果

> ID：13762392
> 
> 赞同：3
> 
> 时间：2012-12-07T11:41:52.800
> 
> 标签：r, matrix-multiplication

在检查一些矩阵乘法运算时，我遇到了一个奇怪的行为。当我“手动”执行乘法（使用乘积和总和）以及使用矩阵乘法运算符 %*% 时，我得到不同的结果。

```
c <- 1:10
a <- 100^(0:9)
p1 <- sum(a*c)
p2 <- a%*%c
p1==p2
      [,1]
[1,] FALSE
p1-p2
      [,1]
[1,] -2048 
```

但是，当我对 a (例如，a <- 101^0:9) 使用任何其他值时，我确实得到了相同的结果：

```
c <- 1:10
a <- 101^(0:9)
p1 <- sum(a*c)
p2 <- a%*%c
p1==p2
      [,1]
[1,] TRUE
p1-p2
      [,1]
[1,] 0 
```

知道为什么会这样吗？

谢谢你，佩德罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:05:40.810

`%*%`确实以稍微不同的方式计算其结果，这意味着不同的地方会出现不同的舍入误差，从而导致不同的整体结果。

我只是猜测，但我相信这*可能*是由于`sum`将其累加器保存在机器浮点寄存器中，该寄存器在英特尔架构上具有[80 位扩展精度。](http://en.wikipedia.org/wiki/Extended_precision#x86_Extended_Precision_Format)如果您想确定，则必须查看 R 的汇编代码。

# c - C中的for循环仅返回数组的第一个值

> ID：13762394
> 
> 赞同：2
> 
> 时间：2012-12-07T11:41:56.010
> 
> 标签：c, arrays, loops, for-loop

我是初学者。好吧，我只是在尝试数据结构，但不明白为什么会出现错误。我认为发布代码和我得到的输出会更好。（我使用 C-Free 4.0 编译器），顺便说一下。所以这是代码

// 编写一个 C 程序来输入和显示数组的元素

```
 #include <stdio.h>
    int main(int argc, char *argv[])
{
    int a[44],n,i=0;
    // No. of elements:
    printf("\n How many elements in all?");
    scanf("%d",&n);

    // Entering all elements:
    printf("\n\n Plz do enter the elements:");
    for(;i<n;i++)
    scanf("%d",&a[i]);

    // Displaying all elements:
    printf("\n Array elements are:");

     for(i=0;i<n;)
     {

       printf("\n a[%d]=%d",i,a[i]);
       i++;
       break;

     }

    int sum=0;
    for(i=0;i<n;i++)

    {
      sum=sum+a[i];

    }

    printf("\nSum=%d",sum);

    return 0;
}
/*
  And here's the output when I say that I'm entering 3 elements into the array:

   How many elements in all?3

 Plz do enter the elements:12
0
-22

 Array elements are:
 a[0]=12
Sum=-10Press any key to continue . . . */ 
```

大家可以看到，我可以输入值 for(i=0;i

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T11:44:23.513

```
for(i=0;i<n;)
{
   printf("\n a[%d]=%d",i,a[i]);
   i++;
   break;
} 
```

你放了 a`break;`所以它只打印 1 个元素。

删除它`break;`，它将打印所有内容。

您也可以将其放在`i++`条件旁边，`i<n`如下所示。

```
for(i=0;i<n;i++)
{
    printf("\n a[%d]=%d",i,a[i]);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T11:57:57.607

```
for(i=0;i<n;)
{
   printf("\n a[%d]=%d",i,a[i]);
   i++;
   break;
} 
```

在这里，您使用的 break 语句让您脱离了循环。删除 break 语句，它将打印数组的所有元素....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:52:47.987

**for()**循环有两种使用方式，

```
for (Start value; end condition; increase value)
        statement; 
```

或者

```
Start value = initialization;
for (; end condition;){
        statement;
        increase value;
} 
```

在您的代码中，Start 值被初始化为 i = 0，因此您可以尝试任何方法，但为了方便和清晰，最好首先接受更多。

# c - 在 C 中使用共享内存的斐波那契数列

> ID：13762397
> 
> 赞同：0
> 
> 时间：2012-12-07T11:42:04.427
> 
> 标签：c, posix, fork, shared-memory, fibonacci

我有一个问题要解决，但它给了我错误：

```
2009-EE-182-Part2.c: In function ‘main’:
2009-EE-182-Part2.c:35:13: error: expected identifier or ‘(’ before ‘->’ token
2009-EE-182-Part2.c:40:22: error: expected identifier or ‘(’ before ‘->’ token
2009-EE-182-Part2.c:41:14: error: expected identifier or ‘(’ before ‘->’ token
2009-EE-182-Part2.c:42:22: error: expected expression before ‘shared_data’
2009-EE-182-Part2.c:44:15: error: expected identifier or ‘(’ before ‘->’ token
2009-EE-182-Part2.c:54:15: error: expected expression before ‘shared_data’
2009-EE-182-Part2.c:55:19: error: expected expression before ‘shared_data’ 
```

代码是：

```
# include <stdio.h>
# include <sys/shm.h>
# include <sys/stat.h>
# include <sys/types.h>
# include <unistd.h>
# define MAX_SEQUENCE 10

typedef struct{
long fib_sequence[MAX_SEQUENCE];
int sequence_size;
} shared_data;

char* shared_memory; /* a pointer to the shared memory segment */

int main()
{
int a,b,m,n,i,j;
a=0; b=1;
printf("Enter the number of a Fibonacci Sequence:\n");
scanf("%d", &m);

if (m < 0)
        printf("Please enter a non-negative integer\n");
else if (m> MAX_SEQUENCE)
        printf("Please enter an integer less than 10\n");

int segment_id; /* the identifier for the shared memory segment */

int segment_size = sizeof(shared_data); /* the size (in bytes) of the shared memory segment */
segment_id = shmget(IPC_PRIVATE, segment_size, S_IRUSR | S_IWUSR); /** allocate  a shared memory segment */
shared_data *shared_memory = shmat(segment_id, NULL, 0); /** attach the shared memory segment */
printf("\nshared memory segment %d attached at address %p\n", segment_id, shared_memory);

shared_data->sequence_size = m;
pid_t pid;
pid = fork();
    if (pid == 0){
        printf("Child is producing the Fibonacci Sequence...\n");
        shared_data->fib_sequence[0] = a;
    shared_data->fib_sequence[1] = b;
        for (i=2;i<shared_data->sequence_size;i++){
        n=a+b;
        shared_data->fib_sequence[i] = n;
        a=b;
        b=n;
        }
        printf("\nChild ends\n"); 
    }
    else{
        printf("Parent is waiting for child to complete...\n");
        wait(NULL);
        printf("Parent ends\n");
    for(i=0;i<= shared_data->sequence_size;i++)
        printf("%ld ", shared_data->fib_sequence[i]);
    }

/**printf("%s \n", shared_memory);  now print out the string from shared memory */

/** now detach the shared memory segment */ 
if ( shmdt(shared_memory) == -1) {
    fprintf(stderr, "Unable to detach\n");
}

/** now remove the shared memory segment */
shmctl(segment_id, IPC_RMID, NULL); 

return 0;
} 
```

声明是“设计斐波那契程序的一种方法是在父进程和子进程之间建立一个共享内存段。这种技术允许子进程将斐波那契数列的内容写入共享内存段并让父进程输出序列当子进程完成时。由于内存是共享的，因此子进程所做的任何更改也将反映在父进程中。该程序将使用 POSIX 共享内存构造，如 [http://graphics.im.ntu.edu.tw中所述/~robin/courses/os07/code/03proc/shm-posix.c](http://graphics.im.ntu.edu.tw/~robin/courses/os07/code/03proc/shm-posix.c) 该程序首先需要为共享内存段创建数据结构。使用结构最容易做到这一点。该数据结构将包含两项： 1\. 一个大小为 MAX_SEQUENCE 的固定大小的数组，它将保存斐波那契值和 2\. 子进程要生成的序列的大小，即 sequence_size，其中 sequence_size ≤ MAX_SEQUENCE。

这些项目可以在结构中表示如下：

```
# define MAX_SEQUENCE 10
typedef struct{
long fib_sequence[MAX_SEQUENCE];
int sequence_size;
} shared_data; 
```

父进程将通过以下步骤进行：接受命令行传递的参数，并进行错误检查，确保参数≤MAX_SEQUENCE。湾。创建一个大小为 shared_data 的共享内存段。C。将共享内存段附加到其地址空间。d。将 sequence_size 的值设置为命令行上的参数。e. fork 子进程并调用 wait() 系统调用以等待子进程完成。F。在共享内存段中输出斐波那契数列的值。G。分离并删除共享内存段。

共享内存段将附加到子地址空间以及父地址空间。子进程然后将斐波那契数列写入

共享内存段。父进程和子进程必须同步，以便父进程在子进程完成生成序列之前不会输出斐波那契数列。注意：在控制台上显示足够的消息让用户知道何时执行了某个操作，例如创建和终止子进程等。”

专家头脑请帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T12:11:29.493

第一个问题：

```
int a,b,m,n,i,j;

sequence.fib_sequence[0] = a;
sequence.fib_sequence[1] = b; 
```

你永远不会初始化`a`and `b`，因此你会得到垃圾（和未定义的行为）。初始化

```
a = 0;
b = 1; 
```

更深层次的问题：你设置了一个共享内存段，但从不使用它。你使用全局

```
shared_data sequence; 
```

在孩子中写入，在父母中阅读。由于该全局与您设置的共享内存无关，因此子项的操作不会修改父项的`sequence`.

您应该使用`shared_memory`, 指向要写入和读取的共享内存的指针。所以而不是 a `char*`，它应该是

```
shared_data *shared_memory = shmat(...); 
```

然后使用`shared_memory->sequence[i]`等

修复`shared_data/shared_memory`混淆并添加一些错误检查后，程序可能看起来像

```
# include <stdlib.h>
# include <stdio.h>
# include <sys/shm.h>
# include <sys/stat.h>
# include <sys/types.h>
# include <unistd.h>
# include <sys/wait.h>
# include <errno.h>

// So we could use other sizes without editing the source.
#ifndef MAX_SEQUENCE
# define MAX_SEQUENCE 10
#endif

// Check that MAX_SEQUENCE is large enough!
#if MAX_SEQUENCE < 2
#error MAX_SEQUENCE must be at least 2
#endif

typedef struct{
    long fib_sequence[MAX_SEQUENCE];
    int sequence_size;
} shared_data;

int main()
{
    int a, b, m, n, i;
    a = 0; b = 1;
    printf("Enter the number of a Fibonacci Sequence:\n");
    // Always check whether input conversion worked
    if (scanf("%d", &m) != 1) {
        printf("Invalid input, couldn't be converted.\n");
        return EXIT_FAILURE;
    }

    if (m <= 0) {
        printf("Please enter a positive integer\n");
        return EXIT_FAILURE;  // exit if input is invalid
    } else if (m > MAX_SEQUENCE) {
        printf("Please enter an integer less than %d\n", MAX_SEQUENCE);
        return EXIT_FAILURE;  // exit if input is invalid
    }

    /* the identifier for the shared memory segment */
    int segment_id;

    /* the size (in bytes) of the shared memory segment */
    size_t segment_size = sizeof(shared_data);

    /* allocate  a shared memory segment */
    segment_id = shmget(IPC_PRIVATE, segment_size, S_IRUSR | S_IWUSR);

    // Check result of shmget
    if (segment_id == -1) {
        perror("shmget failed");
        return EXIT_FAILURE;
    }

    /* attach the shared memory segment */
    shared_data *shared_memory = shmat(segment_id, NULL, 0);

    // Check whether attaching succeeded
    if ((void*)shared_memory == (void*)-1) {
        perror("shmat failed");
        goto destroy; // clean up
    }
    printf("\nshared memory segment %d attached at address %p\n", segment_id, (void*)shared_memory);

    shared_memory->sequence_size = m;
    pid_t pid;
    pid = fork();
    if (pid == 0){
        printf("Child is producing the Fibonacci Sequence...\n");
        shared_memory->fib_sequence[0] = a;
        shared_memory->fib_sequence[1] = b;
        for (i = 2; i < shared_memory->sequence_size; i++){
            n = a+b;
            shared_memory->fib_sequence[i] = n;
            a = b;
            b = n;
        }
        printf("\nChild ends\n"); 
    }
    else{
        printf("Parent is waiting for child to complete...\n");
        wait(NULL);
        printf("Parent ends\n");
        for(i = 0; i < shared_memory->sequence_size; i++) {
            printf("%ld ", shared_memory->fib_sequence[i]);
        }
        printf("\n");
    }

    /* now detach the shared memory segment */ 
    if (shmdt(shared_memory) == -1) {
        fprintf(stderr, "Unable to detach\n");
    }

    destroy:
    /* now remove the shared memory segment */
    shmctl(segment_id, IPC_RMID, NULL); 

    return 0;
} 
```

# iphone - url未在webview中加载

> ID：13762398
> 
> 赞同：0
> 
> 时间：2012-12-07T11:42:11.673
> 
> 标签：iphone, objective-c, uiwebview

我想在 UiWebView 中打开一个 URL

在我的 ios 5.1 和 6.0 模拟器中，以下代码工作正常，但在我的 ios 4.3 真实设备中它不工作。

```
NSURL *url = [NSURL URLWithString:@"http://www.google.com"];
    NSLog(@"url=%@",url);
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
    [webView loadRequest:requestObj]; 
```

我的代码中缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:21:21.167

请使用这个：

```
 webView.delegate = self;
  NSURL *url = [NSURL URLWithString:@"http://www.google.com"]; 
  NSURLRequest *request = [NSURLRequest requestWithURL:url]; 
  [webView setScalesPageToFit:YES];         
  [webView loadRequest:request]; 
```

在您的课程中添加此新方法

```
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{
   NSLog("Error : %@",error);
} 
```

希望对你有效。如果还有其他问题，例如连接，那么您将在 Log.xml 中看到它。

谢谢

# r - R矩阵行选择中的多个条件

> ID：13762402
> 
> 赞同：4
> 
> 时间：2012-12-07T11:42:41.083
> 
> 标签：r, matrix, row, selection, conditional-statements

> **可能的重复：**
> [R：subset() 用于组合条件的逻辑和运算符应该是 & 而不是 &&](https://stackoverflow.com/questions/6933598/r-subset-logical-and-operator-for-combining-conditions-should-be-not)

我有一个简单的问题，但我不知道如何解决这个问题......我想选择 value_1 > 0 和 value_2 > 0 的所有行。现在我有这个代码：

```
dataOnBoth<-data[data$value_1 > 0,][data$value_2 > 0,] 
```

当我在 log2_fold_change 上排序这些数据时，我有这个输出：

```
gene_id        sample_1 sample_2 status   value_1 value_2 log2_fold_change
86  uc001aen.1       q1       q2 NOTEST 0.0619347       0    -1.79769e+308
150 uc001ahx.1       q1       q2 NOTEST 0.0432199       0    -1.79769e+308
186 uc001ajk.1       q1       q2 NOTEST 0.0854541       0    -1.79769e+308
251 uc001amf.1       q1       q2 NOTEST 0.0636211       0    -1.79769e+308
358 uc001are.3       q1       q2 NOTEST 0.3642040       0    -1.79769e+308
394 uc001ass.1       q1       q2 NOTEST 0.0196794       0    -1.79769e+308
        test_stat   p_value q_value significant
86  -1.79769e+308 0.4767020       1          no
150 -1.79769e+308 0.3960920       1          no
186 -1.79769e+308 0.0631033       1          no
251 -1.79769e+308 0.4428030       1          no
358 -1.79769e+308 0.1083640       1          no
394 -1.79769e+308 0.1489190       1          no 
```

所以 R 没有测试第二个条件......当使用 & 测试两个条件时，我收到 0 行：

```
dataOnBoth<-data[data$value_1 > 0 && data$value_2 > 0,] 
```

如何选择 value_1 > 0 和 value_2 > 0 的所有行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T11:43:49.660

您需要使用单个“&”：

```
dataOnBoth = data[data$value_1 > 0 & data$value_2 > 0,] 
```

有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/6933598/r-subset-logical-and-operator-for-combining-conditions-should-be-not)。

# mobile - ADF Mobile 是否支持 ADF Web 服务代理客户端

> ID：13762403
> 
> 赞同：0
> 
> 时间：2012-12-07T11:42:42.330
> 
> 标签：mobile, oracle-adf

最近我开始开发 ADF 设备端移动应用程序。**是否可以将 ADF Web 服务代理客户端与设备上的移动应用程序一起使用？**我在一个文档中读到，ADF mobile 不支持“WebService Java Proxy”并且只支持“ADF webservice datacontrol”如果 ADF mobile 不支持 ADF webservice 代理客户端，那么我如何将 ADF 与 EBS 集成？

问候拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:25:42.220

不，不支持。有关 ADF Mobile 中 Web 服务的更多信息：http: [//andrejusb.blogspot.be/2012/11/adf-mobile-secured-web-service-access.html](http://andrejusb.blogspot.be/2012/11/adf-mobile-secured-web-service-access.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T18:16:25.560

您将使用 Web 服务数据控件来执行此操作。ADF Mobile 博客上提供了三个示例 - [https://blogs.oracle.com/mobile/](https://blogs.oracle.com/mobile/)

# objective-c - NSOperation - 强制一个操作动态等待其他操作

> ID：13762406
> 
> 赞同：28
> 
> 时间：2012-12-07T11:43:01.423
> 
> 标签：objective-c, ios, nsthread, nsoperation, nsoperationqueue

我正在尝试实现一个操作队列，我有以下场景：

```
NSOperation A
NSOperation B
NSOperation C
NSOperation D
NSOperationQueue queue 
```

我开始添加`A`到`queue`.

在执行期间，`A`我需要从中获取一些数据，直到返回我需要的数据`B`才能继续。`A``B`

`B`对于based on`C`和 for `C`based on也会出现同样的情况`D`。

为了管理这个，`NSOperation`我有这个代码：

```
NSOperation *operation; //This can be A, B, C, D or any other NSOperation

[self setQueuePriority:NSOperationQueuePriorityVeryLow]; //Set the current NSOperation with low priority

[queue addOperation: operation]; //Add the operation that I want to the queue

while(!operation.isFinished && !self.isCancelled){} //I need to wait the operation that I depend before moving on with the current operation

[self setQueuePriority:NSOperationQueuePriorityNormal]; //After the while, the other operation finished so I return my priority to normal and continue

if(self.isCancelled){ //If I get out of the while because the current operation was cancelled I also cancel the other operation.
[operation cancel];          
} 
```

我的问题是，当我有 3 或 4 个`NSOperations`等待并执行`while(!operacao.isFinished && !self.isCancelled){}`我的代码时，我的代码就会冻结，因为对我很重要的 NSOperation 不会被执行，即使它具有更高的优先级。

我试过的

*   在执行期间添加依赖项，但由于我的 NSOperation 已经在运行，我似乎没有任何效果。

*   我可以做一些事情，而不是将操作添加到队列中`[operation start]`。它有效，但取消当前操作也会取消我开始的其他操作？

*   我可以做类似的事情`while(!operacao.isFinished && !self.isCancelled){[NSThread sleepForTimeInterval:0.001];}`。它有效，但这是正确的方法吗？也许有更好的解决方案。

在这种情况下，我如何保证我想要的操作将运行而其他操作将在后台等待？解决这个问题的正确方法是什么？

如果有人问我为什么我不在开始队列之前添加依赖项，因为只有在某些条件为真时，一个操作才需要另一个。我只会在执行期间知道我是否需要其他操作。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-18T21:42:09.937

这里有两个想法给你人为的例子。我只使用了两个操作，但您可以将概念扩展到任何数字和/或根据需要嵌套它们。

### 示例 1：使用 Grand Central Dispatch

GCD 提供了轻量级的“调度组”，它允许你明确地对任务进行排序，然后等待它们完成。在这种情况下，AlphaOperation 创建一个组并进入它，然后启动 BetaOperation，这`completionBlock`会导致该组离开。当您调用`dispatch_group_wait`时，当前线程会阻塞，直到进入组的次数等于离开组的次数（很像保留计数）。不要忘记`isCancelled`在任何可能长时间运行的任务之后检查操作的状态。

```
@interface BetaOperation : NSOperation
@end
@implementation BetaOperation
- (void)main
{
    NSLog(@"beta operation finishing");
}
@end

@interface AlphaOperation : NSOperation
@end
@implementation AlphaOperation
- (void)main
{
    dispatch_group_t group = dispatch_group_create();
    dispatch_group_enter(group);

    BetaOperation *betaOperation = [[BetaOperation alloc] init];
    betaOperation.completionBlock = ^{
        dispatch_group_leave(group);
    };

    [betaOperation start];

    dispatch_group_wait(group, DISPATCH_TIME_FOREVER);

    if ([self isCancelled])
        return;

    NSLog(@"alpha operation finishing");
}
@end

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    dispatch_async(dispatch_get_main_queue(), ^{
        AlphaOperation *operation = [[AlphaOperation alloc] init];
        [operation start];
    });

    return YES;
}

@end 
```

### 示例 2：使用本地 NSOperationQueue

由于您已经在使用工作操作，另一种选择是创建一个队列作为 AlphaOperation 的属性，然后添加 BetaOperation 并调用`waitUntilAllOperationsAreFinished`队列。这还有一个额外的好处，即您可以在取消 AlphaOperation 时轻松取消队列的操作，只需覆盖该`cancel`方法即可。

```
@interface BetaOperation : NSOperation
@end
@implementation BetaOperation
- (void)main
{
    NSLog(@"beta operation finishing");
}
@end

@interface AlphaOperation : NSOperation
@property (strong) NSOperationQueue *queue;
@end
@implementation AlphaOperation
- (void)main
{
    self.queue = [[NSOperationQueue alloc] init];

    BetaOperation *betaOperation = [[BetaOperation alloc] init];
    [self.queue addOperation:betaOperation];
    [self.queue waitUntilAllOperationsAreFinished];

    if ([self isCancelled])
        return;

    NSLog(@"alpha operation finishing");
}

- (void)cancel
{
    [super cancel];

    [self.queue cancelAllOperations];
}
@end

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    dispatch_async(dispatch_get_main_queue(), ^{
        AlphaOperation *operation = [[AlphaOperation alloc] init];
        [operation start];
    });

    return YES;
}

@end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-14T08:02:43.717

一种方法是从操作类之外进行管理，即。在创建它们时正确设置 A/B/C/D 之间的操作依赖关系。

步骤：（在创建这些操作的方法中）

1) 创建操作 A

2）如果Operation B提供的数据不可用，则创建Operation B，并使Operation A依赖于Operation B。就像是`operationA.addDependency(operationB);`

3）。对 C 和 D 重复步骤 2。（即 B 取决于 C，C 取决于 D，如果需要）

4）将操作添加到队列中。队列将根据依赖关系执行，即。D、C、B、A。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-17T01:03:59.577

尝试`setCompletionBlock:`像这样使用：

```
NSOperationQueue *queue = [[NSOperationQueue alloc] init];
NSOperation *operationA;
NSOperation *operationB;

//... initialize operationA and operationB however you please ...

[operationA setCompletionBlock:^{
    if ([operationA satisfiesSomeCriteria]) {
        [queue addOperation:operationB];
    }
}];

[queue addOperation:operationA]; 
```

在操作上设置完成块时，它会在操作的主要任务完成或取消后执行。因此，操作正在执行的工作的结果是可用的，以便您可以决定是否应将下一个操作添加到队列中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-07T11:54:19.587

所以基本上你只需要确保第一个在开始下一个之前完成？NSOperationQueue 将并行运行，除非您告诉它不要这样做。您可以在您的操作队列上调用 setMaxConcurrentOperationCount: 并将其设置为 1 以基本上将其变成一个串行队列，其中一次只能运行一个操作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-16T08:32:52.230

一旦 NSOperation 处于其主要方法中，您就必须完成它。没有暂停状态，只有完成或取消。

我将在操作 A 上实现一个 NSCopying，它将整个状态复制到一个新实例中。您将有一个委托方法或块，它能够传达此操作无法通过的信息，因为它缺少操作 B 中的信息。

所以这个过程会这样：

*   创建操作A，设置委托
*   您无法继续，委托方法触发
*   委托创建一个新的操作 B，创建操作 A 的副本，设置依赖关系使得 A 将等待 B 的完成
*   然后委托取消原来的操作 A

在委托内部，您必须确保暂停队列以避免竞争条件。完成上述步骤后，您将恢复队列。在操作 A 中，您将在多个地方检查 isCancelled 以在 main 被取消后实际上不再做任何工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-18T00:58:27.883

我认为您采用了错误的方法。如果队列中的每个操作都有优先级，并且必须按顺序执行，那么为什么不使用 4 个不同的线程呢？
取一个表示状态的 ivar（0：没有操作完成，1：一个操作完成，以此类推），用一个条件保护它：

```
@property(nonatomic,strong) NSCondition* condition;
@property (nonatomic) NSUInteger state; 
```

初始化一切（状态从零开始），然后创建4个不同优先级的不同线程。这是线程A执行的选择器的示例：

```
- (void) threadA : (id) sender
{
    [condition lock];
    while(state!=3)
    {
        [condition wait];
    }
    // Do the job here
    state=4; // That's kinda useless but useful if in future you
    // want another thread that starts doing the job when A ends
    [condition unlock];
} 
```

所以一切都按照你想要的顺序执行。

**编辑**

你可以做和我在这里做的等效的事情，但是使用 NSOperationQueue：

```
NSOperationQueue* queue=[NSOperationQueue new];
[queue setMaxConcurrentOperationCount: 4];
[queue addOperation: [[NSInvocationOperation alloc]initWithTarget: self selector: @selector(threadA:) object: nil]] 
```

通过说您采用了错误的方法，我的意思是您不应该使用 1 作为 maxConcurrentOperationCount 的队列。主队列将此值设置为 1，这就是您遇到麻烦的原因。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-16T09:48:46.137

正如您所发现的，您不能真正对依赖项执行此操作，因为这只会影响操作何时开始 - 如果您不知道在主操作运行之前您将需要子操作，所以这不好。您无法使用单个操作队列来解决此问题。

但是，由于您已经在操作队列上运行，因此无需将进一步的操作添加到队列中。只需就地同步执行它们。无论如何，您必须等待他们返回，那为什么不呢？

# html - 如何防止用户通过地址直接访问网站中的文件

> ID：13762408
> 
> 赞同：1
> 
> 时间：2012-12-07T11:43:11.083
> 
> 标签：html, jsp, web, download

我正在用 JSP 开发一个网站（一个教育系统），它有不同的用户，具有不同的可访问性和优先级（包括教师、学生、经理......）现在我想向这个网站添加一些文件（例如一些 pdf） ，只有一组用户（如教师）登录系统后才能下载。现在我的问题是如何通过直接在地址栏中输入文件地址来防止其他人下载它们？换句话说，我不希望用户通过输入 URL 直接访问这些文件

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:59:03.970

您不能通过输入文件的 URI 来阻止人们下载文件。这就是网络的工作原理。（如果您不希望任何人下载某些内容，请不要将其放在会提供 URI 的地方）。

但是，听起来您的问题是“防止无权下载文件的人下载文件”，这是一个完全不同的问题。

解决此类问题有两种基本方法。

## 仅通过脚本使文件可用

首先，不要将文件保存在 webroot 下。然后编写一个脚本：

1.  检查用户想要下载的文件（例如通过查询字符串参数）
2.  检查用户是否经过身份验证
3.  检查用户是否有权下载文件
4.  识别文件类型并发送合适的 Content-Type 标头
5.  读取文件的内容并输出

## 配置您的 Web 服务器以执行 auth/authz

具体情况取决于您使用的 Web 服务器软件。我不知道是否有任何方法可以告诉任何支持 JSP 的服务器使用您正在使用的任何 Java 登录系统执行 auth/authz，但我过去使用 Apache/mod_perl 完成了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:00:31.437

谁说您甚至需要在 URL 上提供您的 PDF？

您可以有一个受密码保护的页面，例如`servepdf.jsp`...检查一个人是否已登录。

如果他们已登录，则您可以将参数传递给页面，例如`servepdf.jsp?pdf=HGJDF9798734FKJHKHJFSF`（存储在数据库中的某种唯一 ID）从 Web 根目录**之外**的目录（用户通常无法在该目录中获取文件）到达）。

Could that be an option?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T13:43:27.853

Your best bet is to setup a symbolic link and use .htaccess to redirect depending on your preferences.

# php - 更新 PHP-SQL 语句不起作用 - 未显示错误

> ID：13762410
> 
> 赞同：0
> 
> 时间：2012-12-07T11:43:27.960
> 
> 标签：php, sql, oracle, sql-update

我有以下代码...

```
$interactionid = '123';
$interactioncode = "ECWL";
$oldDOL = $_GET['oldDOL'];

$newDOL = $_GET['newDOL'];

    include("ORCLconfig.php");
    $addWSclaim = oci_parse($conn, "UPDATE claims SET DATE_OF_LOSS='$newDOL' WHERE NUMBER='32122'");
                  oci_execute($addWSclaim, OCI_COMMIT_ON_SUCCESS);

    $addtointeractionMAKE = oci_parse($conn, "INSERT INTO interaction_items VALUES (null, '$interactionid', '$interactioncode', '$oldDOL', '$newDOL', localtimestamp)");
                            oci_execute($addtointeractionMAKE, OCI_COMMIT_ON_SUCCESS); 
```

oldDOL 和 newDOL 是以 DD-MMM-YY 格式到达的日期，它与索赔表中的 DATE_OF_LOSS 列内联。

然而，只有第二条语句似乎有效，因为索赔表没有变化，也没有显示任何错误。

我正在使用 Oracle 数据库，如果我在 SQL 控制台中执行更新语句，它工作正常。

了解我这将是一件非常简单的事情，我以某种方式忽略了但任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:13:32.883

尝试

```
 $addWSclaim = oci_parse($conn, "UPDATE claims SET DATE_OF_LOSS='$newDOL' WHERE NUMBER='32122'");

 if ($addWSclaim) {
   if (oci_execute($addWSclaim, OCI_COMMIT_ON_SUCCESS)) {
      if (oci_num_rows($addWSclaim) === 0) {
        /* No rows affected */
      }
   } else {

      /*Handle error through oci_error*/
   }
 } else {
   /* Handle parse error */
 } 
```

[oci_execute](http://pl1.php.net/manual/en/function.oci-execute.php)成功时返回 TRUE，失败时返回 FALSE。

# php - mySQL 导出到具有多个选项卡的电子表格

> ID：13762412
> 
> 赞同：0
> 
> 时间：2012-12-07T11:43:31.973
> 
> 标签：php, mysql, csv, spreadsheet, xls

我有输入到 mySQL 后端的表单。每天我都会运行一个脚本，它会抓取过去 24 小时的数据并将其放入电子表格中。当前创建了 3 个表格和 3 个电子表格。

我已经做到了：

```
SELECT *
FROM `transfer-authority`
WHERE Time > DATE_SUB( NOW( ) , INTERVAL 24 HOUR )
INTO OUTFILE '/tmp/orders.csv'
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\n' 
```

所以这只是一个简单的 CSV。然后我使用 CRON 作业将此文件重命名为日期并通过电子邮件发送。

我的问题是是否有可能将所有**三个**表格的结果制作成一个电子表格，每个表格都有一个标签？我已经搜索过了，但在上面找不到任何东西。

非常感谢任何帮助或指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T16:33:10.010

我发现最简单的方法是使用 gnumeric 的 ssconvert （这里的手册页：http://manpages.ubuntu.com/manpages/lucid/man1/ssconvert.1.html [）](http://manpages.ubuntu.com/manpages/lucid/man1/ssconvert.1.html)。

导出到 3 个 CSV 后就像这个 bash 脚本一样简单：

```
#!/bin/sh

DATE="$(date +"%d-%m-%Y")"
ssconvert --merge-to $DATE-chit.xls "file1.csv" "file2.csv" "file3.csv" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:51:26.477

不使用 CSV，但有许多 PHP 库允许您创建真正的 Excel 文件，这些文件支持工作簿中的多个工作表。除了[PHPExcel 之外](http://phpexcel.codeplex.com)，这个[先前](https://stackoverflow.com/questions/3930975/alternative-for-php-excel)关于 SO 的答案列出了大量能够执行此操作的库

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:51:32.710

可以在 excel 中创建一个 vba 脚本来执行此操作。检查[http://www.excelforum.com/excel-programming-vba-macros/543839-combine-csv-files-into-1-excel-workbook-as-sheets.html](http://www.excelforum.com/excel-programming-vba-macros/543839-combine-csv-files-into-1-excel-workbook-as-sheets.html)

# c# - 传递函数 通过反射进入通用方法

> ID：13762414
> 
> 赞同：0
> 
> 时间：2012-12-07T11:43:33.297
> 
> 标签：c#, generics, reflection, delegates

我有一个实现的类

```
class MessageBus
{
    void Subscribe<T>(Func<T,Task> onMessage) {...}
} 
```

在我的代码中，我想动态订阅几种不同的消息类型。例如，我有消息类型：

```
class Message {}
class MessageA : Message {}
class MessageB : Message {} 
```

我写了类似这样的代码：

```
class MySubscriber
{
    void Initialize()
    {
         var mb = new MessageBus();
         var mbt = mb.GetType();
         var subscribeGeneric = mbt.GetMethods().First(x => x.Name == "Subscribe" && x.GetParameters().Length == 1);

         var subscribeConcrete = subscribeGeneric.MakeGenericMethod(typeof(Message1));
         subscribeConcrete.Invoke(mb, new object[]{ new Func<Message1,Task>(Handle) });
         // On this line I get exception TargetException("Type does not meet target type"). Message my be a bit different, on my system I see it in Russian.
    }
    Task Handle(Message msg) {}    
} 
```

当然，在这个例子中，通过反射调用是没有意义的，但在实际程序中，我动态地得到 typeof(Message1)，并且得到这些类型的数组。我究竟做错了什么？如果正常写入，它可以工作（即 Handle(Message) 成功转换为 Handle(Message1) 并被调用。

更新：所以上面的代码是正确的并且应该可以工作。在我的程序中，我只是有一个错字，并且在错误的对象上调用了该方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:11:52.983

在评论的帮助下解决了。我创建了一个单独的最小复制器并且它工作。然后检查原始代码，发现一个错字。所以基本的想法从一开始就是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:00:28.687

您可能正在寻找这样的东西：

```
public class Dispatcher<TTarget,TArgBase>
{
    private Dictionary<Type, Action<TTarget, TArgBase>> _handlers;

    public Dispatcher(string methodName)
    {
        _handlers = typeof(TTarget).GetMethods(BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic)
            .Where(m => m.Name == methodName)
            .Where(m => m.ReturnType == typeof(void))
            .Where(m => !m.ContainsGenericParameters)
            .Where(m =>
            {
                var pars = m.GetParameters();
                return pars.Length == 1 && typeof(TArgBase).IsAssignableFrom(pars[0].ParameterType);
            })
            .ToDictionary(m => m.GetParameters()[0].ParameterType, m => BuildWrapper(m));
    }

    private static Action<TTarget, TArgBase> BuildWrapper(MethodInfo m)
    {
        var target = Expression.Parameter(typeof(TTarget), "target");
        var dest = Expression.Parameter(typeof(TArgBase), "destination");
        var castEvent = Expression.TypeAs(dest, m.GetParameters()[0].ParameterType);
        var call = Expression.Call(target, m, castEvent);
        return Expression.Lambda<Action<TTarget, TArgBase>>(call, target, dest).Compile();
    }

    public bool Call(TTarget target, TArgBase evt)
    {
        Action<TTarget, TArgBase> handler;
        _handlers.TryGetValue(evt.GetType(), out handler);
        if(handler == null)
            return false;
        handler(target, evt);
        return true;
    }
} 
```

# magento - Magento - 我的块由于某种原因没有显示

> ID：13762415
> 
> 赞同：0
> 
> 时间：2012-12-07T11:43:38.897
> 
> 标签：magento, magento-1.4

我已经尝试按照[指南进行操作](http://www.magentocommerce.com/wiki/5_-_modules_and_development/catalog/how_to_create_a_featured_product)

我所做的一切都完全相同，除了我补充说：

```
<?php echo $this->getFeaturedProductHtml()?> 
```

代替

```
<?=$this->getFeaturedProductHtml()?> 
```

在 view.phtml 中

我检查了 exception.log 和 system.log，但在这些文件中找不到任何内容。

我经历了很多事情，但是我没有经验并且缺乏如何在 magento 环境中调试/寻找解决方案的知识。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:54:18.847

用于`Mage::log('debug text')`查看它来自哪些功能。从那里你可以发现问题出在哪里。或者，您可以只使用来自 inchoo 的模块，它可能写得更好、更简洁：http: [//www.magentocommerce.com/magento-connect/featured-products-4605.html](http://www.magentocommerce.com/magento-connect/featured-products-4605.html)

# c# - 文件不存在验证文件名是否存在 SaveFileDialog？

> ID：13762416
> 
> 赞同：0
> 
> 时间：2012-12-07T11:43:41.610
> 
> 标签：c#, savefiledialog

我想使用 SaveFileDialog 控件保存文件。为什么文件需要已经存在才能保存？

这是我正在使用的代码：

```
string month = dateTimePicker1.Value.Month.ToString();
string year = dateTimePicker1.Value.Year.ToString();
SaveFileDialog saveFileDialog1 = new SaveFileDialog();
saveFileDialog1.InitialDirectory = @"C:\";
saveFileDialog1.Title = "Save Sql Files";
saveFileDialog1.FileName = "MysqlBackup-"+month+"-"+year+".sql";
saveFileDialog1.CheckFileExists = true;
saveFileDialog1.DefaultExt = "Sql";
saveFileDialog1.Filter = "Sql files (*.Sql)|*.Sql";
saveFileDialog1.FilterIndex = 2;
saveFileDialog1.RestoreDirectory = true;
if (saveFileDialog1.ShowDialog() == DialogResult.OK)
    {
    // Here is the error. After typing in the filename, when I click OK it gives me an error stating that the file does not exist.
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T11:47:48.447

此行要求文件存在于所选文件夹中

```
saveFileDialog1.CheckFileExists = true; 
```

将其设置为 false，如果文件不存在，您可以使用 OK 退出

[MSDN 上的 CheckFileExists](http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.checkfileexists.aspx)

> 获取或设置一个值，该值指示如果用户指定的文件名不存在，对话框是否显示警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-18T09:50:46.443

你需要设置：

```
saveFileDialog.OverwritePrompt = true;
saveFileDialog.CreatePrompt = false; 
```

> **OverwritePrompt**：获取或设置一个值，该值指示如果用户指定的文件名已存在，则“另存为”对话框是否显示警告。
> 
> **CreatePrompt**：获取或设置一个值，该值指示如果用户指定的文件不存在，对话框是否提示用户创建文件的权限。

# javascript - FormData 不适用于 Firefox 上的字符串

> ID：13762424
> 
> 赞同：1
> 
> 时间：2012-12-07T11:43:57.587
> 
> 标签：javascript, ajax, firefox, cross-browser, xmlhttprequest

我制作了一个使用 1 级和 2 级 ajax XmlHttpRequest 的网站。使用 google chrome 它可以工作。但现在我正在尝试使用其他浏览器并使用 firefox 它返回此异常消息：

```
Component returned failure code: 0x80460001 (NS_ERROR_CANNOT_CONVERT_DATA) [nsIDOMFormData.append] 
```

现在，我使用的代码如下：

```
try {
            var sampleFile = document.getElementById("file").files[0];
            var ext = $("#file").val().substr(
                    $("#file").val().lastIndexOf(".") + 1).toLowerCase();
            if ($("#file").val() != "" && ext != "jpg" && ext != "jpeg"
                    && ext != "bmp" && ext != "png" && ext != "gif") {
                alert("Il formato dell'immagine purtroppo non è valido!\nSono ammesse immagini JPG,JPEG,GIF,PNG e BMP.");
                return;
            }

            var nomeDaPulire = document.getElementById("nome").value;

            var cognomeDaPulire = document.getElementById("cognome").value;
            var usernameDaPulire = document.getElementById("username").value;
            var pwdDaPulire = document.getElementById("password").value;
            var pwdBisDaPulire = document.getElementById("passwordBis").value;
            var anno = document.getElementById("anno").value;
            var professione = document.getElementById("comboProfessione").value;
            var città = Pulisci(document.getElementById("comboCittà").value);
            var sessoM = document.getElementById("M").checked;
            var sesso = "";
            var nome = "";
            var cognome = "";
            var username = "";
            var pwd = "";
            var pwdBis = "";
            var email = "";
            var emailDaPulire = document.getElementById("email").value;

            if (nomeDaPulire == "" 
                    || cognomeDaPulire == "" || emailDaPulire == ""
                    || pwdDaPulire == "" || pwdBisDaPulire == ""
                    || professione == "nullo" || anno == "nullo"
                    || città == "nullo") {
                alert("Riempi tutti i campi!");
                return;
            }

            if (checkSpecial(nomeDaPulire) == false
                    || checkSpecial(cognomeDaPulire) == false
                    || checkSpecialUser(usernameDaPulire) == false
                    || checkSpecialPwd(pwdDaPulire) == false
                    || checkSpecialPwd(pwdBisDaPulire) == false
                    || checkSpecialEmail(emailDaPulire) == false) {
                alert("Per favore, non inserire caratteri speciali!");
                return;
            } else {
                nome = Pulisci(nomeDaPulire);
                cognome = Pulisci(cognomeDaPulire);
                username = Pulisci(usernameDaPulire);
                pwd = Pulisci(pwdDaPulire);
                pwdBis = Pulisci(pwdBisDaPulire);
                email = Pulisci(emailDaPulire);
            }

            if (sessoM == true) {
                sesso = "M";
            } else {
                sesso = "F";
            }

            var celiaco = document.getElementById("celiaco").checked;
            if (celiaco == true)
                cel = 1;
            else
                cel = 0;

            var lattosio = document.getElementById("lattosio").checked;
            if (lattosio == true)
                lat = 1;
            else
                lat = 0;

            var animal = document.getElementById("animal").checked;
            if (animal == true)
                an = 1;
            else
                an = 0;

            var biologico = document.getElementById("bio").checked;
            if (biologico == true)
                bio = 1;
            else
                bio = 0;

            var linea = document.getElementById("linea").checked;
            if (linea == true)
                lin = 1;
            else
                lin = 0;

            var vegan = document.getElementById("vegan").checked;
            if (vegan == true)
                veg = 1;
            else
                veg = 0;

            if (pwd.localeCompare(pwdBis) == 0) {
                    d3.select("#button").remove();
                d3.select("#buttonLine").append("img").attr("id","immLoad").attr("src",
                        "imm/progressLoad.gif");
                formdata.append("username", username);
                formdata.append("pwd", pwd);
                formdata.append("nome", nome);
                formdata.append("cognome", cognome);
                formdata.append("sesso", sesso);
                formdata.append("professione", professione);
                formdata.append("anno", anno);
                formdata.append("citt", città);
                formdata.append("lattosio", lat);
                formdata.append("glutine", cel);
                formdata.append("linea", lin);
                formdata.append("vegan", veg);
                formdata.append("biologico", bio);
                formdata.append("animal", an);
                formdata.append("sampleFile", sampleFile);
                formdata.append("email", email);
                var xhr = new XMLHttpRequest();
                xhr.open("POST", "RegistraUtente", true);

                xhr.send(formdata);

                xhr.onreadystatechange = function() {
                    if (xhr.readyState == 4) {
                        if (xhr.status == 200) {
                            var str = xhr.responseText;
                            if (str.length == 2) {
                                alert("lo username scelto è già in uso, per favore scegline un'altro!");
                            } else {
                                alert("la registrazione è avvenuta correttamente! Tra pochi istanti arriverà l'email con il link di conferma!");
                                window.location.href = "#login";
                            }
                        } else {
                            alert("error with the server");
                            d3.select("#immLoad").remove();
                            d3.select("#buttonLine").append("a").attr("class", "super button blue").attr("id",
                            "button").text("REGISTRATI").style("font-size", "16px").style(
                            "font-family", "GeezaPro, Calibri").on(
                            "click",
                            function() {
                                registrazione();
                            });
                        }
                    }
                };
            } else {
                alert("Le due password devono coincidere!");
            }
        } catch (e) {
            alert(e.message);
            return;
        } 
```

Pulisci 函数如下：

```
function Pulisci(temp){
    temp=temp.ReplaceAll("è","#egrave;");
    temp=temp.ReplaceAll("à","#agrave;");
    temp=temp.ReplaceAll("ì","#igrave;");
    temp=temp.ReplaceAll("ò","#ograve;");
    temp=temp.ReplaceAll("ù","#ugrave;");
    temp=temp.ReplaceAll("é","#eacuta;");
    temp=temp.ReplaceAll("€","#euro;");
    temp=temp.ReplaceAll("°","#ordm;");
    return temp; 
```

}

这里有什么问题？为什么使用 Firefox 不起作用？请帮忙！！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T13:36:04.540

太好了，终于获得了足够的信息来解决您的问题，您几乎错过了问题中的所有重要内容。

根据[规范](http://dvcs.w3.org/hg/xhr/raw-file/tip/Overview.html#interface-formdata) `FormData`仅适用于`Blob`or `DOMString`。这意味着它不适用于`String`which is an`Object`而不是 literal `string`。

正如 Mozilla 所[指出](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData)的，它与`Blob`,`File`一起使用`string`，否则，它将执行强制转换为`string`. 但是不知何故，`String`实例无法自动转换（我认为您应该将其归档在[Bugzilla](https://bugzilla.mozilla.org/buglist.cgi?quicksearch=FormData+String)中），这会引发错误。

两个可能的修复：

*   停止使用`new String()`，当将文字字符串分配给变量时，将自动创建一个新的。
*   使用 强制您自己进行转换，`username.toString()`您需要对所有文本字段执行此操作。

PS：

您可能不应该使用 Unicode 变量名，尽管它可以用于 javascript。但看起来很奇怪。这个问题的实际名称应该是*FormData does not work with String on Firefox*。

# android - XML 解析问题（多个标签）

> ID：13762429
> 
> 赞同：0
> 
> 时间：2012-12-07T11:44:19.240
> 
> 标签：android, xml, parsing

我正在使用**DOM 解析器解析****XML** ，但我似乎遇到了一个问题，我的数据结构如下：**`XML`**

 **```
 <Bookings>
  <BookingNo>12345678</BookingNo>
  <Pickup>
    <AddressLine>Line 1</AddressLine>
    <AddressLine>Line 2</AddressLine>
    <AddressLine>Line 3</AddressLine>
    <AddressLine>Line 4</AddressLine>
    <AddressLine>Line 5</AddressLine>
    <Postcode>
      <PostcodeOut>pstOut</PostcodeOut>
      <PostcodeIn>pstIn</PostcodeIn>
    </Postcode>
    <AddressCoords>
      <Latitude>1.12345670</Latitude>
      <Longitude>-1.1234567890</Longitude>
    </AddressCoords>
  </Pickup>
  <Destination>
    <AddressLine>Line 1</AddressLine>
    <AddressLine>Line 2</AddressLine>
    <AddressLine>Line 3</AddressLine>
    <Postcode>
      <PostcodeOut>pstOut</PostcodeOut>
      <PostcodeIn>pstIn</PostcodeIn>
    </Postcode>
    <AddressCoords>
      <Latitude>1.1234567890</Latitude>
      <Longitude>-1.1234567890</Longitude>
    </AddressCoords>
  </Destination>
  <PickupTime>DateTime</PickupTime>
  <DestinationTime>DateTime</DestinationTime>
  <VehicleType>Car</VehicleType>
  <NumberOfPassengers>1</NumberOfPassengers>
  <Passengers>
    <PassengerName>Name</PassengerName>
    <PassengerContactNo>123456</PassengerContactNo>
  </Passengers>
   <Mileage>2</Mileage>
</Bookings> 
```

我遇到的问题是我需要`AddressLine`从两者中获取`pickup`，`destination`但它们需要分开，使用我拥有的当前代码，我将它们单独拉入，但我只拉入第一行（第 1 行）两个都。`XML`我正在使用的解析器代码是：

```
public class XMLParser {

    // constructor
    public XMLParser() {

    }

    /**
     * Getting XML from URL making HTTP request
     * @param url string
     * */
    public String getXmlFromUrl(String url) {
        String xml = null;

        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();

            xml = EntityUtils.toString(httpEntity);
            InputStream is = new ByteArrayInputStream(xml.getBytes("UTF-8"));
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sbtwo = new StringBuilder();
            String myfeed = null;
            while ((myfeed = reader.readLine()) != null) {
                final String newjsontwo = myfeed.replaceAll(
                        "throw 'allowIllegalResourceCall is false.';", "");
                sbtwo.append(newjsontwo);
            }
            is.close();

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        // return XML
        return xml;
    }

    /**
     * Getting XML DOM element
     * @param XML string
     * */
    public Document getDomElement(String xml){
        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
                is.setCharacterStream(new StringReader(xml));
                doc = db.parse(is); 

            } catch (ParserConfigurationException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (SAXException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (IOException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            }

            return doc;
    }

    /** Getting node value
      * @param elem element
      */
     public final String getElementValue( Node elem ) {
         Node child;
         if( elem != null){
             if (elem.hasChildNodes()){
                 for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                     if( child.getNodeType() == Node.TEXT_NODE  ){

                         return child.getNodeValue();
                     }
                 }
             }
         }
         return "";
     }

     /**
      * Getting node value
      * @param Element node
      * @param key string
      * */
     public String getValue(Element item, String str) {     
            NodeList n = item.getElementsByTagName(str);        
            return this.getElementValue(n.item(0));
        } 
```

我的主要活动中的代码是：

```
XMLParser parser = new XMLParser();
                    Document doc = parser.getDomElement(xml); // getting DOM
                    references = new ArrayList<String>();
                    NodeList nl = doc.getElementsByTagName("Bookings");
                    NodeList nlpickup = doc.getElementsByTagName("Pickup");
                    NodeList nldestination = doc
                            .getElementsByTagName("Destination");
                    AddressData = new StringBuilder();

                    // looping through all item nodes <item>
                    for (int i = 0; i < nl.getLength(); i++) {
                        HashMap<String, String> map = new HashMap<String, String>();

                        Element e = (Element) nl.item(i);
                        resultCode = parser.getValue(e, "BookingNo");
                        Pickup = parser.getValue(e, "Pickup");
                        DateTime = parser.getValue(e, "PickupTime");

                        Element etwo = (Element) nlpickup.item(i);

                        PAddressTwo = parser.getValue(etwo, "AddressLine");

                        // System.out.println("/// "+ AddressData);
                        // System.out.println("/////"+parser.getValue(etwo,
                        // "AddressLine"));

                        PPostIn = parser.getValue(etwo, "PostcodeOut");
                        PPostOut = parser.getValue(etwo, "PostcodeIn");

                        Element ethree = (Element) nldestination.item(i);
                        DAddressOne = parser.getValue(ethree, "AddressLine");
                        DPostIn = parser.getValue(ethree, "PostcodeOut");
                        DPostOut = parser.getValue(ethree, "PostcodeIn");

                        splitDate();

                        map.put("BookNo", resultCode);
                        map.put("Datetime", TimeFinal + " on " + DateFinal);
                        map.put("PickupAddress", PAddressTwo + " " + PPostIn
                                + " " + PPostOut);
                        map.put("DestinationAddress", DAddressOne + " "
                                + DPostIn + " " + DPostOut);

                        references.add(resultCode);

                        mylist.add(map);
                    }

                    adapter = new SimpleAdapter(
                            MyJourney.this,
                            mylist,
                            R.layout.myjourneys_item,
                            new String[] { "BookNo", "Datetime",
                                    "PickupAddress", "DestinationAddress" },
                            new int[] { R.id.journeysRefText,
                                    R.id.journeysDateText,
                                    R.id.journeysFromText, R.id.journeysToText });

                } 
```

我哪里错了？

我知道有一种叫做 SAX 解析器的东西，但我可以找到一个例子来匹配我正在寻找的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:51:40.637

试试这个 ：

```
 Element element = document.getDocumentElement();

    // For Pickup
    NodeList nodeListPickup = element.getElementsByTagName("Pickup");
    for (int i = 0; i < nodeListPickup.getLength(); i++) {
        Node node = nodeListPickup.item(i);
        NodeList pickUp = node.getChildNodes();

        for (int j = 0; j < pickUp.getLength(); j++) {

            Node nodePickup = pickUp.item(j);
            String name = nodePickup.getNodeName();

            if(name.equals("AddressLine")){ 
                System.out.println("Pickup > AddressLine > " +nodePickup.getFirstChild().getNodeValue());
            }       
        }
    }

    // For Destination
    NodeList nodeListDestination = element.getElementsByTagName("Destination");
    for (int i = 0; i < nodeListDestination.getLength(); i++) {
        Node node = nodeListDestination.item(i);
        NodeList destination = node.getChildNodes();                
        for (int j = 0; j < destination.getLength(); j++) {

            Node nodeDestination = destination.item(j);     
            String name = nodeDestination.getNodeName();

            if(name.equals("AddressLine")){                 
                System.out.println("Destination > AddressLine > " +nodeDestination.getFirstChild().getNodeValue());
            }       
        }
    } 
```

我为 Pickup 和 Destination 创建了不同的 NodeList，您可以在两者中获取其余的内部标签，目前我只为 AddressLine 显示。让我知道这是否有帮助。**

# r - 使用 print.xtables 添加行或加粗单个 row.names - 在行之间添加一些东西？

> ID：13762431
> 
> 赞同：5
> 
> 时间：2012-12-07T11:44:25.107
> 
> 标签：r, latex, xtable

我尝试使用`print.xtable` `add.to.row`这样的表格格式：

**运动的**

```
share of ballers    22.3 
share of skiers      4.6 
```

**瘾**

```
share of smokers    20.3 
share of drinkers    6.6 
```

我的 R 表确实包含额外的 row.names，即使这些行不包含任何值。我使用 add.to.row 选项为不同的行添加颜色，就像[这里](https://stats.stackexchange.com/questions/7952/how-to-create-coloured-tables-with-sweave-and-xtable)建议的那样，效果很好。但不起作用的是使用 xtable 添加粗体文本或`hline`在行之间添加其他内容。我总是收到如下错误消息：

`Bad type area settings!`检测到的线宽大约比启发式确定的线宽大 52%（typearea）。

因此，这可能意味着由于我的更改，该表的环境变得很大，但不知道该怎么做。注意我读过类似这样的帖子[，](https://stackoverflow.com/questions/10703802/include-dimension-names-in-row-and-column-headers-for-latex-formatted-contingenc)它修改了 xtable 输出本身，但即使这对我来说可能是可能的，但我正在寻找一个更简单的解决方案。因为如果我选择这个解决方案，我必须`capture.output`使用正则表达式替换在两者之间添加一些东西。

有没有解决的办法？还是有更简单的解决方案？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-07T12:08:45.050

对于`hline`部分，请参阅`?print.xtable`。

> `hline.after`：当' `type="latex"`'时，-1和''之间的数字向量`"nrow(x)"`，包括在内，表示应该出现水平线的行

为了让你所有的行名更加大胆：

```
bold.allrows <- function(x) {
  h <- paste('\\textbf{',x,'}', sep ='')
  h
}
print(xtable(yourTable), 
      sanitize.rownames.function =  bold.allrows) 
```

为了使某些行名称更加大胆，您可以为这些行添加“特殊标记”，例如`BOLD`：

```
bold.somerows <- 
        function(x) gsub('BOLD(.*)',paste('\\\\textbf{\\1','}'),x)

print(xtable(yourTable), 
      sanitize.rownames.function =  bold.somerows) 
```

例如：

```
require(xtable)
hh <- head(mtcars)[ , c(1:5)]
## I want to bold 1 and 3 rows 
rownames(hh)[c(1, 3)] <- paste('BOLD', rownames(hh)[c(1, 3)])
print(xtable(hh), sanitize.rownames.function =  bold.somerows) 
```

# clearcase - Clearcase 保留修改时间

> ID：13762436
> 
> 赞同：1
> 
> 时间：2012-12-07T11:44:37.613
> 
> 标签：clearcase, clearcase-ucm, cleartool

有什么方法可以阻止用户签入并保留修改时间。如果选中保留修改时间框，它将使用上次保存的时间而不是实际的签入时间签入。我只需要签到时间。因此，如果还检查了保留修改时间，则应使用当前时间进行检查，或者如果检查了保留修改时间，则不应允许检查。请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:54:56.617

由于这是*客户*偏好，因此您不能强求。

在以前的客户端中，我能够每天在所有 ClearCase 客户端上运行 .reg 文件以重置某些首选项，但这是一种并非在任何地方都可用的解决方法。

`cleartool co/ci`我看到的另一个选项是部署包装器（签出和签入自定义脚本），如果使用该`-ptime`选项，它将拒绝调用。
再次部署/维护并非易事。[可以在此处找到可](http://backpan.perl.org/authors/id/D/DS/DSB/?C=M;O=D)
用于控制某些命令的 cleartool 包装器示例：（perl 模块）`ClearCase::Wrapper`

[使用preop 触发器](https://publib.boulder.ibm.com/infocenter/cchelp/v7r1m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_proj.doc/c_bcc_ins_trggr_unix.htm)可以使用触发器阻止签入：

```
 cleartool mktrtype -element -all -preop checkin -execwin ... -execunix " -c "Checkin time check" ci_trigger 
```

我不知道您是否可以访问*本地*文件时间戳（您应该使用`$ENV{"CLEARCASE_PN"}`），以便与当前时间进行检查：如果不同，则表示`-ptime`有效，命令应该是否认。

# javascript - Asp Net 4.5 web 表单从 HTTP 处理程序重定向到页面

> ID：13762439
> 
> 赞同：0
> 
> 时间：2012-12-07T11:44:45.853
> 
> 标签：javascript, asp.net, redirect, asp.net-4.5

您好，我的 aspx 页面与下一次调用我的 ashx

```
<script type="text/javascript" src="/Handlers/MyRedirect.ashx">
</script> 
```

在 MyRedirect 内部，我做了一些硬逻辑并尝试重定向到我身边的其他页面，它看起来像：

```
public class MyRedirect : HttpTaskAsyncHandler, IReadOnlySessionState
    {     
        public override async Task ProcessRequestAsync(HttpContext context)
        {            
          //some logic here with out any output
          //context.Response.ContentType = "application/x-javascript";
          context.Response.Redirect("/adminDashboard.aspx", false);
        }
} 
```

但是在 Chrome 中我收到错误 ***资源解释为脚本但使用 MIME 类型 text/html 传输：*** 我做错了什么？怎么解决 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:49:17.337

您要重定向到的页面必须返回 javascript 并设置适当的响应内容类型标头。在您展示的示例中，您似乎正在重定向到一些`/adminDashboard.aspx`WebForm，我猜它返回 HTML 而不是 javascript。或者，如果它确实返回 javascript，它不会将正确的 Content-Type 标头设置为`text/javascript`.

这就是 Chrome 抱怨的原因：您将标签的`src`属性指向`<script>`服务器端处理程序，该处理程序未设置预期和正确的内容类型。

因此，如果您必须执行此重定向，请确保在一天结束时您重定向到的页面返回有效的 javascript，并将 Content-Type 标头设置为`text/javascript`. `Network`在分析从浏览器发送的不同 HTTP 请求时，您可以很容易地在选项卡中看到这一点。

# ios - 在 Xcode 中使用 squares.cpp 文件时遇到问题

> ID：13762441
> 
> 赞同：1
> 
> 时间：2012-12-07T11:44:46.773
> 
> 标签：ios, xcode, opencv

我在 Xcode 中使用了从 OpenCV 网站下载的 squares.cpp 文件。它给出了对 Point 的错误引用是雄心勃勃的。

请告诉我如何解决这个问题。如果我的问题不清楚，请告诉我。预先感谢

```
 using namespace cv;

    using namespace std;

int thresh = 50, N = 11;
const char* wndname = "Square Detection Demo";

static void help()
{
    cout <<
    "\nA program using pyramid scaling, Canny, contours, contour simpification and\n"
    "memory storage (it's got it all folks) to find\n"
    "squares in a list of images pic1-6.png\n"
    "Returns sequence of squares detected on the image.\n"
    "the sequence is stored in the specified memory storage\n"
    "Call:\n"
    "./squares\n"
    "Using OpenCV version %s\n" << CV_VERSION << "\n" << endl;
}

// helper function:
// finds a cosine of angle between vectors
// from pt0->pt1 and from pt0->pt2
static double angle( Point pt1, Point pt2, Point pt0 )
{
    double dx1 = pt1.x - pt0.x;
    double dy1 = pt1.y - pt0.y;
    double dx2 = pt2.x - pt0.x;
    double dy2 = pt2.y - pt0.y;
    return (dx1*dx2 + dy1*dy2)/sqrt((dx1*dx1 + dy1*dy1)*(dx2*dx2 + dy2*dy2) + 1e-10);
}

// returns sequence of squares detected on the image.
// the sequence is stored in the specified memory storage
static void findSquares( const Mat& image, vector<vector<Point> >& squares )
{

        squares.clear();

        Mat pyr, timg, gray0(image.size(), CV_8U), gray;

        // down-scale and upscale the image to filter out the noise
        pyrDown(image, pyr, Size(image.cols/2, image.rows/2));
        pyrUp(pyr, timg, image.size());
        vector<vector<Point> > contours;

        // find squares in every color plane of the image
        for( int c = 0; c < 3; c++ )
        {
            int ch[] = {c, 0};
            mixChannels(&timg, 1, &gray0, 1, ch, 1);

            // try several threshold levels
            for( int l = 0; l < N; l++ )
            {
                // hack: use Canny instead of zero threshold level.
                // Canny helps to catch squares with gradient shading
                if( l == 0 )
                {
                    // apply Canny. Take the upper threshold from slider
                    // and set the lower to 0 (which forces edges merging)
                    Canny(gray0, gray, 0, thresh, 5);
                    // dilate canny output to remove potential
                    // holes between edge segments
                    dilate(gray, gray, Mat(), Point(-1,-1));
                }
                else
                {
                    // apply threshold if l!=0:
                    //     tgray(x,y) = gray(x,y) < (l+1)*255/N ? 255 : 0
                    gray = gray0 >= (l+1)*255/N;
                }

                // find contours and store them all as a list
                findContours(gray, contours, CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE);

                vector<Point> approx;

                // test each contour
                for( size_t i = 0; i < contours.size(); i++ )
                {
                    // approximate contour with accuracy proportional
                    // to the contour perimeter
                    approxPolyDP(Mat(contours[i]), approx, arcLength(Mat(contours[i]), true)*0.02, true);

                    // square contours should have 4 vertices after approximation
                    // relatively large area (to filter out noisy contours)
                    // and be convex.
                    // Note: absolute value of an area is used because
                    // area may be positive or negative - in accordance with the
                    // contour orientation
                    if( approx.size() == 4 &&
                       fabs(contourArea(Mat(approx))) > 1000 &&
                       isContourConvex(Mat(approx)) )
                    {
                        double maxCosine = 0;

                        for( int j = 2; j < 5; j++ )
                        {
                            // find the maximum cosine of the angle between joint edges
                            double cosine = fabs(angle(approx[j%4], approx[j-2], approx[j-1]));
                            maxCosine = MAX(maxCosine, cosine);
                        }

                        // if cosines of all angles are small
                        // (all angles are ~90 degree) then write quandrange
                        // vertices to resultant sequence
                        if( maxCosine < 0.3 )
                            squares.push_back(approx);
                    }
                }
            }
        }
    }

    // the function draws all the squares in the image
    static void drawSquares( Mat& image, const vector<vector<Point> >& squares )
    {
        for( size_t i = 0; i < squares.size(); i++ )
        {
            const Point* p = &squares[i][0];
            int n = (int)squares[i].size();
            polylines(image, &p, &n, 1, true, Scalar(0,255,0), 3, CV_AA);
        }

        imshow(wndname, image);
    }

    int main(int argc, char** argv)
    {
        static const char* names[] = { "pic1.png", "pic2.png", "pic3.png",
            "pic4.png", "pic5.png", "pic6.png", 0 };
        help();
        namedWindow( wndname, 1 );
        vector<vector<Point> > squares;

        for( int i = 0; names[i] != 0; i++ )
        {
            Mat image = imread(names[i], 1);
            if( image.empty() )
            {
                cout << "Couldn't load " << names[i] << endl;
                continue;
            }

            findSquares(image, squares);
            drawSquares(image, squares);

            int c = waitKey();
            if( (char)c == 27 )
                break;
        }

        return 0;
    } 
```

# sql - 如何根据日期更改sql中的数据？

> ID：13762445
> 
> 赞同：0
> 
> 时间：2012-12-07T11:45:02.407
> 
> 标签：sql, sql-server-2008

我必须在一段时间后自动将列或'Y'的值设置为'N'。就像30天后我想在sql中将状态列'Y'更改为'N'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:54:31.467

根据我的建议，创建一个每 30 天运行一次的作业并调用它应该包含更新语句的 proc，比如......

更新表测试集标志=y 其中 falg=n 更新表测试集标志=n 其中 falg=y

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:55:31.783

听起来您需要运行一项工作来遍历这些记录并更新此列的值。

我将如何做到这一点是在同一个表上创建一个日期时间戳列，当“Y”或“N”列中的值更新时填充该列。将运行一项作业，例如每天一次，检查该时间戳并相应地调整列的值。然后它会清除时间戳以确保它不会再次被捕获。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:59:21.137

我们不清楚。如果您修改了该表上的列并将该列更新为 sysdate。

# javascript - jQuery 的 $(selector).eq(index) 和 $(selector)[index] 是一样的吗？

> ID：13762446
> 
> 赞同：3
> 
> 时间：2012-12-07T11:45:06.587
> 
> 标签：javascript, jquery

所有这些方式有什么区别？

```
//1
$('div').eq(index) 

//2
$('div')[index] 

//3
$($('div')[index] )

//4
$('div').get(1) 
```

他们是一样的吗？

![截屏](../Images/fd240044cdb25c5a1b5cfec00fcba3bd.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T11:45:49.160

# 不。

第*一个*和*第三个*返回 jQuery 对象，而*第二个*和*第四*个返回 DOM 元素：

```
$("div").eq(index) === $($("div")[index]);  // --> jQuery object

$("div")[index] === $("div").get(index);    // --> DOM element 
```

你可以在这里阅读最后一个案例：http: **[//api.jquery.com/get/](http://api.jquery.com/get/)**。

如果您需要查看类型之间的差异，您可以尝试在控制台中运行以下命令：

```
Object.prototype.toString.call($("div").eq(index)); // "[object Object]"
Object.prototype.toString.call($("div")[index]);    // "[object HTMLDivElement]" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T11:45:54.203

`First and third`会让你`jQuery`反对，第二个会给你`DOM`反对。

1.  `$('div').eq(index)` *// 将返回 jquery 对象*

2.  `$('div')[index]` *// 会给你 javascript DOM 对象*

3.  `$($('div')[index])` *//将通过转换DOM对象给你jQuery对象*

您需要不同的语法来获取对象的实例`id`的属性。

```
idofobject = $('div').eq(index).attr('id') //jQuery

idofobject = $('div')[index].id            //javascript 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T11:47:09.583

`$('div').eq(index)` 这将返回一个 JQuery 对象

`$('div')[index]` 这会给你javascript对象

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T11:56:58.857

*   v1 `$('div').eq(index)`::: 返回一个包含一个 div 的 jQuery 包装的集合。

*   v2 `$('div')[index]`::: 返回对 DOM 元素的引用（不是 jQuery 包装的）

*   v3 `$($('div')[index])`::: 返回一个包含一个 div 的 jQuery 包装的集合。这是 v1 的冗长且低效的版本。

你没有问`$('div').get(index)`，这是实现 v2.2 的另一种方式。AFAIK，它的效率并没有大大降低。

# iphone - 未收到推送通知

> ID：13762447
> 
> 赞同：1
> 
> 时间：2012-12-07T11:45:09.313
> 
> 标签：iphone, ios, apple-push-notifications

我正在我的应用程序中实现推送通知，一切似乎都很好，但我的设备没有收到推送通知。

当从上面的 URL 发出通知时，我得到了响应；

“连接到 APNS 消息已成功传递”。

但在那之后，我的设备上没有任何通知。请建议我如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:38:35.547

我得到了同样的错误，因为我写错了设备令牌请检查您的设备令牌@“< XXx XXXX xxx..>”更改为@“XXX XXX..”或按照步骤操作

应用内委托

在didlaunch

```
// Register for sound and alert push notifications.
    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:
     (UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)];

    // Check if the app was launched in response to the user tapping on a
    // push notification. If so, we add the new message to the data model.
    if (launchOptions != nil)
    {
        NSDictionary* dictionary = [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];
        if (dictionary != nil)
        {
            NSLog(@"Launched from push notification: %@", dictionary);
        //  [self addMessageFromRemoteNotification:dictionary updateUI:NO];
        }
    }

#pragma mark -
#pragma mark Apple Push notifications

- (void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken
{
    // We have received a new device token. This method is usually called right
    // away after you've registered for push notifications, but there are no
    // guarantees. It could take up to a few seconds and you should take this
    // into consideration when you design your app. In our case, the user could
    // send a "join" request to the server before we have received the device
    // token. In that case, we silently send an "update" request to the server
    // API once we receive the token.

    NSString* oldToken = [self deviceToken];

    NSString* newToken = [deviceToken description];
    newToken = [newToken stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"<>"]];
    newToken = [newToken stringByReplacingOccurrencesOfString:@" " withString:@""];

    NSLog(@"My token is: %@", newToken);

    [self setDeviceToken:newToken];

    // If the token changed and we already sent the "join" request, we should
    // let the server know about the new device token.
//  if ([dataModel joinedChat] && ![newToken isEqualToString:oldToken])
//  {
//      [self postUpdateRequest];
//  }
}

- (void)application:(UIApplication*)application didFailToRegisterForRemoteNotificationsWithError:(NSError*)error
{
    // If we get here, the app could not obtain a device token. In that case,
    // the user can still send messages to the server but the app will not
    // receive any push notifications when other users send messages to the
    // same chat room.

    NSLog(@"Failed to get token, error: %@", error);
}

- (void)application:(UIApplication*)application didReceiveRemoteNotification:(NSDictionary*)userInfo
{
    // This method is invoked when the app is running and a push notification
    // is received. If the app was suspended in the background, it is woken up
    // and this method is invoked as well. We add the new message to the data
    // model and add it to the ChatViewController's table view.

    NSLog(@"Received APNS notification: %@", userInfo);
    [self log:[NSString stringWithFormat:@"Received APNS notification: %@", userInfo]];

    UIAlertView* nofity = [[ UIAlertView alloc]initWithTitle:@"APNS" message:@"Test Successfull" delegate:nil
cancelButtonTitle:@"ok" otherButtonTitles: nil];
    [nofity show];

//  [self addMessageFromRemoteNotification:userInfo updateUI:YES];
}

- (NSString*)deviceToken
{
    return [[NSUserDefaults standardUserDefaults] stringForKey:@"DeviceTokenKey"];
}

- (void)setDeviceToken:(NSString*)token
{
    [[NSUserDefaults standardUserDefaults] setObject:token forKey:@"DeviceTokenKey"];
}

- (NSString*)udid
{
    UIDevice* device = [UIDevice currentDevice];
    return [device.uniqueIdentifier stringByReplacingOccurrencesOfString:@"-" withString:@""];
} 
```

**从上面的代码中获取设备令牌。**

**测试** 将设备令牌传递给[Push me baby 应用程序](https://github.com/stefanhafeneger/PushMeBaby)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T13:23:09.017

检查以下

1.  您是否获得推送令牌。如果是，请从推送令牌中删除空格和 <、>。

2.  检查设备是否连接到互联网

3.  检查是否在设置 -> 通知 -> 您的应用程序 -> 选择横幅或警报（弹出窗口）中启用了通知（横幅或弹出窗口）。

最有可能的是，这将是一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:51:46.170

首先检查您的**有效负载**，它描述了您的推送通知的性质，这意味着它应该是短信还是警报或应用程序图标上的徽章。所以我们需要在**JSON 的**格式中正确设置它。先看看再说

然后

浏览 Ray Wenderlich 论坛的这个不错的教程，你肯定会发现一些遗漏的领域或步骤，

[http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-26T20:48:53.933

一个简单的技巧：我遇到了同样的问题，仔细检查了所有内容，重新创建了 pem 等，但是在我的最后一个开发证书超时并重新创建它之后无法让它继续运行。在应用程序运行数月之前。

最后，真正帮助的是从手机上擦除它并重新安装它。似乎某些存储的数据以某种方式损坏了...

请记住，该应用程序随后将使用新令牌进行注册。

# iphone - 将数据从 plist 加载到 UITableView

> ID：13762452
> 
> 赞同：1
> 
> 时间：2012-12-07T11:45:33.187
> 
> 标签：iphone, ios, storyboard, uitableview

我正在开发一个使用 Storyboard 的 iPhone 应用程序。第一个场景，我有一个 Table View Controller。我有一个名为*公司*的属性文件，我正在尝试加载该文件的值以显示在 UITableView 中。我已经在这几个小时，但无济于事。[这个](https://stackoverflow.com/q/8133812/1077789)问题很接近，但它的答案也没有帮助我。

这是属性文件的格式。

![在此处输入图像描述](../Images/94283051c5dc0449532084f359b7183b.png)

这是我的代码。

**CompaniesTableViewController.m**文件

```
#import "CompaniesTableViewController.h"

@interface CompaniesTableViewController ()

@end

@implementation CompaniesTableViewController

NSMutableArray *companies;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *companiesFile = [[NSBundle mainBundle]pathForResource:@"companies" ofType:@"plist"];
    companies = [[NSMutableArray alloc]initWithContentsOfFile:companiesFile];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [companies count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    cell.textLabel.text = [[companies objectAtIndex:indexPath.row]objectForKey:@"Value"];

    return cell;
} 
```

表视图不会被填充。谁能告诉我我在这里忽略了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:50:07.787

首先你必须分配和初始化`UITableViewCell`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
if (cell == nil) {

        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

    }
    cell.textLabel.text = [[companies objectAtIndex:indexPath.row]objectForKey:@"Value"];

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:31:02.220

您好首先plist文件的结构必须是这样的（只显示了一部分）

![在此处输入图像描述](../Images/098346990083b79ad124f662ff411b97.png)

然后就是我放的地方（总统是根文件夹）

![在此处输入图像描述](../Images/d9590fbe1aa0ab937376847dbafe1d85.png)

然后我用来读取数据的代码是（总统在哪里`NSArray`）

![在此处输入图像描述](../Images/35079110b87666663fe26af2e42bb416.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:08:36.407

```
 NSString *path = [[NSBundle mainBundle] pathForResource:@"companies" ofType:@"plist"];
    NSData *plistData = [NSData dataWithContentsOfFile:path];
    NSString *error; NSPropertyListFormat format;
    NSArray *companyData = [NSPropertyListSerialization propertyListFromData:plistData
                                                                      mutabilityOption:NSPropertyListImmutable
                                                                                format:&format
                                                                      errorDescription:&error];

  companies= [[NSMutableArray alloc] initWithArray:companyData];
    NSLog(@"companyData:%@",companyData); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T12:00:21.420

pList 中的条目类型是什么。你能从你的 pList 中得到公司的名称吗？尝试通过公司的值键 NSLogging 公司名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T13:16:14.840

加载数据后，您需要重新加载表格视图。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *companiesFile = [[NSBundle mainBundle]pathForResource:@"companies" ofType:@"plist"];
    companies = [[NSMutableArray alloc]initWithContentsOfFile:companiesFile];

    [self.tableView reloadData];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-07T14:10:32.987

对于那种 plist.. 你必须创建一个 NSDictionary..

```
@implementation CompaniesTableViewController

    {
    NSDictionary *dict;
    NSArray *arayDict;
    } 
```

..

```
NSString *companiesFile = [[NSBundle mainBundle]pathForResource:@"companies" ofType:@"plist"];
//populate dicationary
dict = [[NSDictionary alloc] initWithContentsOfFile:companiesFile];
//populate array with allkeys from dict
arayDict = [dict allKeys]; 
```

--

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [arrayDict count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    NSString *key = [arayDict objectAtIndex:indexPath.row];
    NSDictionary *dictionary = [dict objectForKey:key];
    cell.textLabel.text =[NSString stringWithFormat:@"%@", dictionary];
    return cell;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-07T11:51:26.533

理想情况下，uor plist 应该有一个带有一个键的字典作为公司，它的值应该是一个 NSArray。

你读的是字典而不是数组。

# mysql - SQL 要求：从两个表中获取常见的模式列连接

> ID：13762456
> 
> 赞同：0
> 
> 时间：2012-12-07T11:45:45.947
> 
> 标签：mysql, sql

我有以下表格：

表格1：

```
col:
20kasi
30kasi
40eswar
00eswar 
```

表2：

```
col:
00kasi
05kasi
06kasi
03eswar
44eswar 
```

我想通过忽略数字以​​他们的名字加入这两个，以便我可以获得其他列。

```
select  {something from each tables}
  from table1, table2
 where t1.col1 = t2.col2 
```

它应该显示：

```
col             {other colums from one of tables after join}

kasi            ----            ----- \n
eswar           ----            ----- 
```

这没有正确的语法。但我想要这样。有什么建议么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:59:36.223

您总是将前 2 个字符作为数字？如果是，那么这将起作用

```
select  {something from each tables}
  from table1 t1, table2 t2
 where substr(t1.col1,3,length(t1.col1)) = substr(t2.col2,3,length(t2.col2)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:53:45.107

如果所有字符串都恰好有两位数字，则可以使用：

```
SELECT *
FROM table1 inner join table2
     on SUBSTRING(table1.col, 3)=SUBSTRING(table2.col, 3) 
```

如果位数可能不同，或者它们位于不同的位置，因为 MySql 不支持正则表达式，您可以使用以下内容：

```
 SELECT *
FROM table1 inner join table2
     on
        Replace(Replace(Replace(Replace(Replace(Replace(Replace(Replace(Replace(Replace(table1.col,'9',''),'8',''),'7',''),'6',''),'5',''),'4',''),'3',''),'2',''),'1',''),'0','') =
        Replace(Replace(Replace(Replace(Replace(Replace(Replace(Replace(Replace(Replace(table2.col,'9',''),'8',''),'7',''),'6',''),'5',''),'4',''),'3',''),'2',''),'1',''),'0','') 
```

（它看起来不太好，但它应该可以工作）

# asp.net - Page.IsValid 是如何工作的？

> ID：13762467
> 
> 赞同：37
> 
> 时间：2012-12-07T11:46:22.170
> 
> 标签：asp.net, validation

我有以下带有`RequiredFieldValidator`. 该`EnableClientScript`属性在验证控件中设置为“false”。我也在浏览器中禁用了脚本。

我没有`Page.IsValid`在后面的代码中使用。不过，当我在文本框中提交没有任何值时，我会得到`error message`.

从@Dai 的评论中，我知道这可能是一个问题，如果其中有任何代码`Page_Load`在`postback`. 不会引发验证错误。

（但是，对于按钮单击处理程序，无需检查`Page.IsValid`）

```
if (Page.IsPostBack)
{
    string value = txtEmpName.Text;
    txtEmpName.Text = value + "Appended";
} 
```

**问题**

1.  为什么服务器端验证之前没有发生`Page_Load`？
2.  为什么我使用时它工作正常`Page.IsValid`？
3.  您能否提供对解释这一点的文章的任何参考？（不是说 - 总是使用`Page.IsValid`；而是说什么是强制使用的场景`Page.IsValid`

**更新 1**

请参阅[ASP.NET 验证器常见误解](http://blogs.microsoft.co.il/blogs/linqed/archive/2009/09/01/asp-net-validators-common-misconception.aspx)

> `Page.IsValid`只有在运行`Page.Validate()`方法之后才能访问，该方法在`Page_Load`. 如果您将所有逻辑保存在 Page_Load 事件处理程序中（强烈建议不要这样做！），请`Page.Validate()`在检查`Page.IsValid`.

*注意*：建议*不要将*所有逻辑都保留在`Page_Load`. 如果按钮单击事件发生某些事情，请将其移至按钮单击事件处理程序。如果下拉事件发生某些事情，请将其移动到下拉选定项更改事件处理程序。

**更新 2**

看起来，如果我们使用服务器端验证，我们也需要添加`If(Page.IsValid)`。请参阅[CustomValidator 无法正常工作](https://stackoverflow.com/questions/11064613/customvalidator-not-working-well)。`button click``Custom Validator`

**注意**：此处存在客户端验证问题：[是否使用 Page_IsValid 或 Page_ClientValidate()（用于客户端事件）](https://stackoverflow.com/questions/13832818/whether-to-use-page-isvalid-or-page-clientvalidate-for-client-side-events)

**标记**

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<script type="text/javascript">
    alert('haiii');
</script>

</head>
<body>
<form id="form1" runat="server">
<div>
    <asp:ValidationSummary runat="server" ID="vsumAll" DisplayMode="BulletList" CssClass="validationsummary" ValidationGroup="ButtonClick" />
    <asp:TextBox ID="txtEmpName" runat="server"></asp:TextBox>
    <asp:RequiredFieldValidator ID="valEmpName" runat="server" ControlToValidate="txtEmpName"
        EnableClientScript="false" ErrorMessage="RequiredFieldValidator" Text="*" Display="Dynamic"
        ValidationGroup="ButtonClick"></asp:RequiredFieldValidator>
    <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" ValidationGroup="ButtonClick" />
</div>
</form>
</body>
</html> 
```

**代码背后**

```
protected void Button1_Click(object sender, EventArgs e)
{
    string value = txtEmpName.Text;
    SubmitEmployee(value);
} 
```

**参考资料**：

1.  [我应该总是调用 Page.IsValid 吗？](https://stackoverflow.com/questions/1039465/should-i-always-call-page-isvalid)
2.  [ASP.NET 验证控件——要点、提示和技巧](http://www.dotnetcurry.com/ShowArticle.aspx?ID=121)
3.  [CustomValidator 不能正常工作](https://stackoverflow.com/questions/11064613/customvalidator-not-working-well)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-07T13:06:57.477

验证发生在 之后`Page_Load`，但在事件处理程序之前（请参阅[http://msdn.microsoft.com/en-us/library/ms178472(v=VS.100).aspx](http://msdn.microsoft.com/en-us/library/ms178472(v=VS.100).aspx)）。

如果您的按钮没有引起验证，您必须手动触发`Page.Validate.`

`Page.IsValid`在 (1) 您已调用`Page.Validate`或 (2) 导致验证的控件是回发的来源/包含在回发中之前，您可能不会询问。

如果您需要在事件处理程序触发之前进行验证，您可以使用：

```
if (Page.IsPostback) 
{
   Page.Validate( /*Control Validation Group Name Optional*/ );
   if (Page.IsValid)
   {
       //Do some cool stuff
   }
} 
```

您可能还需要考虑重新设计，因此您不需要这样做。

在处理导致验证的控件的事件处理程序中，`Page.IsValid`保证可用。在所有其他情况下，重新请求验证通常更安全。在具有验证器的表单上处理提交的一种模型：

```
void btnSubmit_Click(object sender, EventArgs e)
{
   this.UpdateGUIWithSubmitRequest();
   if (Page.IsValid)
   {
      this.ProcessSuccessfulSubmission();
   }
   else
   {
      this.ProcessInvalidSubmission();
   }
} 
```

如果您使用的`CustomValidator`验证步骤非常昂贵，您可以考虑将结果缓存在 中，`HttpResponse.Cache`这样您就不必在多次调用 Page.Validate 时重新验证。

```
void CustomValidator_ServerValidate(object source, ServerValidateEventArgs args)
{
   CustomValidator self = (CustomValidator)source;
   string validatorResultKey = self.ClientID;
   bool? validatorResult = Context.Items[validatorResultKey] as bool?;
   if (validatorResult.HasValue)
   {
      args.IsValid = validatorResult.Value;
      return;
   }

   bool isValid = this.DoSomethingVeryTimeConsumingOrExpensive();
   Context.Items[validatorResultKey] = isValid;
   args.IsValid = isValid;
} 
```

当然，这 100% 取决于您的架构，以及您是否能够假设在初始验证期间通过/失败的验证在同一页面生命周期的后续验证期间仍然通过/失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-13T12:48:09.430

提交按钮应该具有与验证器控件相同的验证组。例如

```
 <asp:Button Text=" Submit " runat="server" ID="btnSubmit" OnClick="btnSubmit_Click" ValidationGroup="vgCustomerValidation" /> 
```

# c# - “System.StackOverflowException”类型的未处理异常

> ID：13762471
> 
> 赞同：0
> 
> 时间：2012-12-07T11:46:33.840
> 
> 标签：c#, stack-overflow

我创建了一个带有控件的 dll。当我浏览 dll 时，它成功地将控件添加到工具箱中。问题是当我运行应用程序时，我收到以下错误： `An unhandled exception of type 'System.StackOverflowException' occurred in xxx.dll`

调试器突出显示错误的方法在下面的函数中：

```
public ItemType this[int i]
{
    get
{
    return (ItemType)this[i];
}
set
{
    this[i] = value;
}
} 
```

我知道这个错误是由于递归调用而发生的，我该如何重写上面的内容或修改它来克服这个问题。请尽快提供任何代码帮助

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:48:36.963

您应该在您的班级中使用内部列表。

```
 private IList<ItemType> _list = new List<ItemType>();
    public ItemType this[int i]
    {
        get
        {
            return _list[i];
        }
        set
        {
            _list[i] = value;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:11:55.353

**我解决了这个问题，如下：**

```
public ItemType this[int i] 
{ 
    get 
    { 
        return (ItemType)((IList)this)[i]; 
    } 
    set 
    { 
        this[i] = value; 
    } 
} 
```

# django - 如何在我的 django 中添加静态

> ID：13762478
> 
> 赞同：0
> 
> 时间：2012-12-07T11:47:02.423
> 
> 标签：django

我的文件夹结构如下：

```
mysite_new/
          manage.py
          mysite/
                 __init__.py
                 urls.py
                 setting.py
                 wsgi.py
                 templates/
                          default.html
                 static/
                        admin/
                              img/
                                  logo.png

          ticket/
                __init__.py
                models.py
                view.py
                urls.py
                ...... 
```

在setting.py中，我设置

```
STATIC_URL = '/static/'
STATIC_ROOT = '' 
STATICFILES_DIRS = (

) 
```

在ticket/urls.py中我设置

```
from django.conf import settings
from django.conf.urls.static import static
urlpatterns += static(settings.STATIC_URL, document_root = settings.STATIC_ROOT ) 
```

# 默认.html

```
<html>
<head>
<img src="{{ STATIC_URL }}admin/img/logo.jpg" />

</head>
<body>
</body>
</html> 
```

然后我尝试访问包含 default.html 的页面，未显示 logo.jpg。表明![在此处输入图像描述](../Images/004462e9d95b0d41e2abfdd9dfc8c2e9.png)

所以可能是静态文件夹没有正确链接到我的项目，我的问题是谁能告诉我如何实现这个？我应该在`setting.py`(STATIC_ROOT, STATIC_URL, STATICFILES_DIRS) 中设置什么，`urls.py`以及如何修改`default.html`. 请在很短的时间内给出详细的步骤。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T15:01:10.757

我认为对于开发模式，您需要设置

```
PROJECT_ROOT = os.path.abspath(os.path.dirname(__file__))
STATICFILES_DIRS = (
    os.path.join(PROJECT_ROOT, 'static'),
)
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
) 
```

并在 urls.py

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
urlpatterns += staticfiles_urlpatterns() 
```

要收集静态，您需要像这样设置 STATIC_ROOT：

```
STATIC_ROOT = os.path.join(PROJECT_ROOT, '..', 'static') 
```

# eclipse - build.properties - Tycho 构建中的有效条目

> ID：13762481
> 
> 赞同：4
> 
> 时间：2012-12-07T11:47:17.337
> 
> 标签：eclipse, eclipse-plugin, tycho, eclipse-pde

当我创建 Eclipse 插件项目，然后尝试使用 Maven/Tycho 构建它时，生成的文件之一是 build.properties 文件。它包含几个条目，这些条目描述了要构建的项目的哪一部分。

我的问题是，Tycho 构建中 build.properties 文件的有效条目是什么？是否有任何官方文档可以在其中查看所有有效条目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T12:33:45.020

从 Tycho 0.21.0 开始，有一个文档页面列出[了 Tycho 支持的所有 build.properties 条目](http://www.eclipse.org/tycho/sitedocs/BuildProperties.html)。它还指出了不受支持的条目的替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:07:25.893

看

```
Plug-in Development Environment Guide > Reference > Build Configuration
Feature and Plug-in Build Configuration Properties 
```

在您的 Eclipse 帮助文档中。

# java - 将 Web 项目部署到 Glassfish 3.1 时出错

> ID：13762486
> 
> 赞同：0
> 
> 时间：2012-12-07T11:47:37.120
> 
> 标签：java, hibernate, jakarta-ee, jpa, glassfish

将 Web 项目战争文件部署到 Glassfish 3.1 时出现以下错误

```
[#|2012-12-07T11:38:25.695+0200|SEVERE|glassfish3.1.1|javax.enterprise.system.tools.admin.org.glassfish.deployment.admin|_ThreadID=26;_ThreadName=Thread-2;|Exception while preparing the app : org/slf4j/impl/StaticLoggerBinder
java.lang.ClassNotFoundException: org.slf4j.impl.StaticLoggerBinder
    at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1519)
    at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1369)
    at org.slf4j.LoggerFactory.getSingleton(LoggerFactory.java:223)
    at org.slf4j.LoggerFactory.bind(LoggerFactory.java:120) 
```

这是**war文件**结构：

```
WEB-INF
    lib
    classes
        META-INF
            persistance.xml
        com (compiled class files)
    web.xml
META-INF
    MANIFEST.MF
index.xhtml
login.xhtml 
```

这是**persistence.xml**文件

```
<persistence 
xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
 version="2.0">

<persistence-unit name="firsthibernate" transaction-type="JTA">
     <provider>org.hibernate.ejb.HibernatePersistence</provider>
     <jta-data-source>jdbc/firsthibernate</jta-data-source>

    <class>com.mkyong.dataaccess.entity.User</class>
    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect" />        
        <property name="hibernate.hbm2ddl.auto" value="update" />
        <property name="hibernate.current_session_context_class" value="jta" />
        <property name="hibernate.transaction.manager_lookup_class"
            value="org.hibernate.transaction.SunONETransactionManagerLookup" />
    </properties>
</persistence-unit> 
```

这是 pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.mkyong.common</groupId>
    <artifactId>JavaServerFaces</artifactId>
    <packaging>war</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>JavaServerFaces Maven Webapp</name>
    <url>http://maven.apache.org</url>

  <repositories>

    <!-- Primefaces Repository -->
    <repository>
      <id>prime-repo</id>
      <name>PrimeFaces Maven Repository</name>
      <url>http://repository.primefaces.org</url>
      <layout>default</layout>
    </repository>

    <repository>
      <id>repository.jboss.org-public</id>
      <name>JBoss repository</name>
      <url>https://repository.jboss.org/nexus/content/groups/public</url>
    </repository>

  </repositories>

    <dependencies>

        <dependency>
            <groupId>org.primefaces</groupId>
            <artifactId>primefaces</artifactId>
            <version>3.4.2</version>
        </dependency>

        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <version>2.1.7</version>
        </dependency>
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <version>2.1.7</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
        </dependency>

        <dependency>
            <groupId>com.sun.el</groupId>
            <artifactId>el-ri</artifactId>
            <version>1.0</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>3.5.6-Final</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>1.7.2</version>
        </dependency>

    </dependencies>

    <build>
        <finalName>JavaServerFaces</finalName>

        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.1</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project>

enter code here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:54:24.603

确保您的类路径中有 jcl-over-slf4j-1.5.8.jar。

**通过 Maven**

```
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>jcl-over-slf4j</artifactId>
    <version>1.7.2</version>
</dependency> 
```

**[下载](http://mirrors.ibiblio.org/pub/mirrors/maven2/org/slf4j/jcl-over-slf4j/1.5.8/jcl-over-slf4j-1.5.8.jar)**

`jcl-over-slf4j`对 slf4j-ap.jar 有依赖关系，可以在[此处](http://mirrors.ibiblio.org/pub/mirrors/maven2/org/slf4j/slf4j-api/1.4.3/slf4j-api-1.4.3.jar)下载。这也应该包含在您的类路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:02:53.780

将以下依赖项添加到 pom.xml 文件中解决了问题，感谢“kmb385”通过提供依赖项来显示解决方案的正确路径，即使它不能解决问题。

```
 <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.6.6</version>
    </dependency> 
```

# image - 如何选择列表框行中的单个项目

> ID：13762488
> 
> 赞同：1
> 
> 时间：2012-12-07T11:47:43.407
> 
> 标签：image, windows-phone-7, listbox, click, row

我想在一个`ListBox`. 我不能使用`WrapPanel`，因为它会失去虚拟化。所以我用`VirtualizingStackPanel`.

在我的`ListBoxItem`模板中，我有 3 张水平图像`StackPanel`。我想允许用户单击单个图像，但`ListBox`默认行为只允许单击整个图像`ListBoxItem`。

怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:49:06.023

如果您不想在整行上进行选择，则应切换到 a`ItemsControl`而不是 a `ListBox`。

要允许在每一行上选择图像，请将`ItemTemplate`this设置`ItemsControl`为 ListBox，绑定到图像集合。

这是一些应该工作的示例代码：

```
<ItemsControl ItemsSource="{Binding Collection}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <!--THe ItemTemplate is a ListBox of Images-->
            <ListBox>
                <ListBox.ItemTemplate ItemsSource="{Binding Images}">
                    <DataTemplate>
                        <Image Source="{Binding Img}" />
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </DataTemplate>
    </ItemsControl.ItemTemplate>

    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <VirtualizingStackPanel />
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>

    <!--This is required to have the scroll-->
    <ItemsControl.Template>
        <ControlTemplate TargetType="ItemsControl">
            <Border>
                <ScrollViewer>
                    <ItemsPresenter/>
                </ScrollViewer>
            </Border>
        </ControlTemplate>
    </ItemsControl.Template>
</ItemsControl> 
```

# security - 在网站上禁用客户端脚本（如 Greasemonkey）？

> ID：13762491
> 
> 赞同：0
> 
> 时间：2012-12-07T11:47:51.277
> 
> 标签：security, browser, userscripts

我想知道是否有办法阻止在我的浏览器游戏网站上使用用户脚本？

许多人使用 Greasemonkey 比其他玩家更有优势，我想要一种禁用这些脚本的方法。

我找到了这篇旧文章[“如何在您的网站上禁用 Greasemonkey”](http://dean.edwards.name/weblog/2005/03/ungreased/)，但它是 2005 年的，似乎不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T12:52:46.777

与聪明的脚本编写者作斗争是很困难的。他们占上风，因为他们的脚本可以在您的服务器之前触摸页面，并且可以阻止或替换几乎任何东西。请参阅[this answer to a very similar question](https://stackoverflow.com/a/8548311/331508)。

您最聪明、最具成本效益的对策是**制裁**正在“玩”游戏的用户。攻击窃贼，而不是开锁者。

如果您坚持与您的用户进行技术战争，那么您所做的任何事情都不会阻止所有人，但您可以让他们为之工作。
以下是您可以做的一些事情，让脚本编写者的生活更加艰难：

1.  经常更改页面的结构，尤其是元素 ID 和 CSS 类名称。如果可以，请定期插入或删除元素，例如，键`<div>`并不总是第二个中的第三个`<table>`。

    每次进行更改时，请监视性能或使用率突然下降的用户的日志——无论他们需要多少小时或几天来调整脚本。

2.  同样，经常更改您的 javascript 文件名，并更改脚本编写者可能使用的任何变量或函数的名称。

3.  将您的点击和键盘事件处理程序编写为仅适用于[*受信任*的事件](http://help.dottoro.com/ljoljvsn.php)，适用于支持它的浏览器。

4.  您可以将关键文本（包括倒数计时器）放在名称无法预测的图像中。使脚本难以检测关键事件。需要进行 OCR 会大大提高 Greasemonkey 编剧所需的技能水平。（至少现在。）

5.  如果您将关键的游戏动作移动到*Flash*中，编写脚本的难度会大一个数量级。他们甚至可能不得不对您的闪存进行逆向工程，并将其替换为具有可编写脚本挂钩的闪存。不过，切换到*Flash*会惹恼并赶走用户（比如我）。

有关更多信息，请参阅[该答案](https://stackoverflow.com/a/8548311/331508)，但最好和最具成本效益的方法是制裁违规用户。不过，请确保您*的服务条款*明确禁止他们所做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-26T13:23:00.397

作为 Brock Adams 自己的[回答](https://stackoverflow.com/a/13763489/1300875)的补充，这里有几种寻找可能的脚本编写者的方法。

*   定时功能，检查 DOM 树并搜索不是您的代码创建的添加元素，或查找丢失的元素。
    *   主要寻找更改 UI 的脚本编写者，但尚未阅读/理解游戏的 js-source。
    *   客户端。
    *   [“缺少元素”——搜索可能会从使用AdBlock Plus](https://addons.mozilla.org/firefox/addon/adblock-plus/)之类的东西的人那里得到误报。不是真正的误报，如果目标也是对它们进行排名的话。
*   检查 cookie 内容并寻找用户添加内容的提示。
    *   如果脚本编写者必须将信息从页面/会话传输到另一个，并且没有/不知道其他方法，他可能会尝试为此使用 cookie。
*   检查 URL 中的查询/哈希是否有您的代码未添加的内容。
    *   可以尝试通过更改链接将信息传输到其他页面。
    *   哈希内容（URL 中的#）只能在客户端访问。
*   检查会话/本地存储。
    *   客户端。
*   通过匿名服务禁用访问，例如[anonym.to](http://anonym.to/)。
    *   *可以绕开，但会让使用不需要的在线工具*的人生活更加困难。
*   *仅当引用者*正确 时才允许访问游戏页面，否则重定向到登录页面。
    *   另一种限制从外部来源访问游戏页面的方法。
    *   如果您想成为痛苦，请在重定向时终止活动会话。

**注意：**理解代码的脚本编写者可以绕过所有客户端功能。
**注意：**使用这些需要一些智慧和良好的计划。如果做错了事，那么使用客户端的东西，你就有可能让用户的浏览器跪下或对你自己的服务器进行 DDoSing。或者，如果您使用过多的自动化，您可能会在更新自己的代码后最终禁止至少一半的用户群。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-04-27T00:57:26.677

这是我的脚本之一。它肯定仍然可以使用一些工作，但是框架就在那里（尽管您可能需要将所有内容包装在一个大函数中以使变量私有）

```
var secureElements,secureTags,secureTagLoop,secureLoop,var secureReporter = secureAnalyzationFunction = 0;
function analyze(secureAnalyzation){
	if(secureAnalyzation.indexOf("function ")!=-1){
		secureAnalyzationFunction = secureAnalyzation.substring(secureAnalyzation.indexOf("function ")+9,secureAnalyzation.indexOf("()"));
		secureAnalyzationFunction = secureAnalyzationFunction+"=undefined;";
		eval(secureAnalyzationFunction);
	}
}
function secure(){
	var secureTags = ["script","link","meta","canvas"];
	for(secureTagLoop=0;secureTagLoop!=secureTags.length;secureTagLoop++){
		secureElements = document.getElementsByTagName(secureTags[secureTagLoop]);
		for(secureLoop=0;secureLoop!=secureElements.length;secureLoop++){
			if(secureElements[secureLoop].outerHTML.indexOf("verified")==-1){
				analyze(secureElements[secureLoop].outerHTML);
				secureElements[secureLoop].parentElement.removeChild(secureElements[secureLoop]);
				secureLoop--;
				secureReporter++;
				console.log("Deleted "+secureReporter+" foreign elements.")
			}
		}
	}
}
window.onload = function() {
	secure();
	setInterval(secure,1500);
};
```

# macros - Openoffice Writer 宏，可在保存时将当前文件上传到 Web 服务

> ID：13762494
> 
> 赞同：2
> 
> 时间：2012-12-07T11:48:03.547
> 
> 标签：macros, openoffice-writer

我想知道这是否可行，并获得一些关于如何实现这一目标的提示。我想至少它需要一个确认对话框来运行（可能是邪恶的）宏。

我想生成一个 OpenOffice 文档，该文档将在保存到硬编码 URL 时自行上传。

可能吗？

实现这一目标的粗略步骤是什么？

我的猜测是：

*   将宏绑定到保存事件
*   让那个宏获取当前文件的二进制数据
*   让它将此数据发布到 URL

但在研究如何做到这一点之前，我首先需要知道这是否可以做到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T03:22:34.337

我认为您不需要宏来执行此操作，而是根据您的操作系统，您可以远程映射 FTP 或其他类型的协议。

例如，在 Windows 中，您可以将 FTP“映射”为驱动器，这与您的描述完全相同，您从 FTP 打开文件，保存后将其写入远程服务器。FTP 在这里只是一个示例，您可以使用其他平台。

如果您对此方法完全感兴趣，请按照以下说明进行操作，否则请忽略。

> 在 Windows Vista 和 7 中映射网络驱动器。
> 
> 1.  单击 Windows 启动 orb，然后单击“计算机”。
> 2.  单击映射网络驱动器。
> 3.  映射网络驱动器将打开一个新对话框，您可以在其中单击“连接到网站”
> 4.  只需按照该易于使用的向导并单击添加新网络位置（选择自定义网络位置）
> 5.  输入您的 FTP 地址，包括用户名和密码。
> 6.  最后将您的网络位置命名为您想要的任何名称。

只是一个建议，我真的不认为你需要任何宏，除非你打算将这些文件分发给其他人然后是的，但是他们需要在他们的开放办公室安装那个宏/插件，因为没有办法对文档进行编码据我所知，它本身具有这些功能。

# visual-studio-2012 - 对非 VisualStudio 源代码使用本地 TFS 工作区

> ID：13762500
> 
> 赞同：1
> 
> 时间：2012-12-07T11:48:36.963
> 
> 标签：visual-studio-2012, azure-devops

我正在尝试使用 TFS 存储非 VisualStudio 源代码。使用 Visual Studio 2012 和 Microsoft 的在线 Team Foundation Service。

我已经设置了一个 TeamProject 并将其根映射到本地文件夹。它目前包含的只是一个 BuildProcessTemplates 文件夹。（这是作为 TeamProject 的一部分创建的）

我将源代码从外部（使用 Windows 资源管理器）复制到硬盘上的 TeamProject 根文件夹中，由于我的 TFS 工作区不是服务器工作区而是本地工作区，我希望 VS 检测文件夹/文件并将它们显示在Pending Changes 窗口....但它没有。

有趣的是，根文件夹中的新文件被检测为“排除的更改”，但未检测到新文件夹。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T23:18:40.250

首先确保新添加的文件夹包含文件。

**排除**的更改部分中是否显示任何[**检测到的更改**](http://msdn.microsoft.com/en-us/library/ms245454.aspx#add_existing_project)？ **![检测到的变化](../Images/6ac4ac69f2124c710828047ba84495a8.png)**

 ****待定更改**>**检测到的更改**链接 > 出现“**升级候选更改**”对话框 > 检查您想要的文件并单击“**升级**” 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:54:46.283

我不能说我从未注意到也不期望 TFS 会自动拾取添加到映射目录的文件或文件夹作为挂起的更改。

我总是使用源代码管理视图中的“添加现有项目”选项手动添加它们。

它实际上*可能*会（或至少*打算*这样做）自动检测，但我不能说我曾经依赖过它。我认为这没什么好担心的 - 手动添加它们很容易，并且“添加现有项目”选项通常足够聪明，可以向您显示哪些文件尚未受到源代码控制，因此即使您需要稍后添加更多文件，这不应该是太多额外的努力。**

# github - 关于 github 中的 java 应用程序托管

> ID：13762501
> 
> 赞同：0
> 
> 时间：2012-12-07T11:48:53.390
> 
> 标签：github

我正计划创建一个应用程序，以帮助建筑物、居民等施工人员及其各自的供应商（他们将提供建造水泥、砖块等建筑物所需的资源）相互协调。供应商将列出材料及其价格（根据位置、市场情况等），施工人员将能够根据预算选择合适的供应商。可以添加更多功能，例如建设者将列出他们当前的项目，供应商可以对这些项目进行投标、评级、评论等。

您对在 github 中托管应用程序有何看法？我可以让开发人员参与其中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:51:47.510

不确定这是否是问这个问题的地方，但是是的 - 我认为 github 是一个好地方。
但是为什么不在谷歌代码上创建一个镜像，这不可能吗？
我还鼓励您参加技术论坛，如果论坛允许，请
在您的签名中添加指向 github 存储库的链接。

# c# - 如何识别工作表已最小化？

> ID：13762502
> 
> 赞同：3
> 
> 时间：2012-12-07T11:48:55.573
> 
> 标签：c#, excel, excel-2007, excel-2010, vba

如何识别当前活动的工作表被最小化了？当 excel 中的当前工作表最小化时，我不想运行我的操作。我正在使用 excel 互操作和 C#

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:39:26.167

您可以对以下属性进行条件检查，

```
If Application.WindowState = xlMinimized Then
        // do something
End If 
```

虽然这是在 VBA 中。

这是 C# 中的基本代码

```
using Excel = Microsoft.Office.Interop.Excel; 

Excel.Application myXL = new Excel.Application();
myXL.Visible = true;

//adding a new book
Excel.Workbook xlBookN = myXL.Workbooks.Add();

//opening exising book
String xlPath = "c:/myprojects/test.xls";
Excel.Workbook xlBookE = myXL.Workbooks.Open(xlPath,
    0, false, 5, "", "", false, Excel.XlPlatform.xlWindows, "",
    true, false, 0, true, false, false);

Dim myWindowState As XlWindowState //you could also use a variable
myXL.WindowState = myWindowState

//or you can check the state directly 
If (myXL.WindowState = xlMinimized)
        // do something
End If 
```

*请检查语法和参考。*

您可以从以下方面获得更好的参考：

*   [MSDN](http://msdn.microsoft.com/en-us/library/office/aa168292%28v=office.11%29.aspx#excelobj_link3)

*   [MSDN 办公室互操作](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel._application.windowstate%28v=office.11%29.aspx)

# gcc - gcc -S 不工作？

> ID：13762506
> 
> 赞同：-1
> 
> 时间：2012-12-07T11:49:08.837
> 
> 标签：gcc, assembly, g++

我正在尝试查看 g++ 生成的汇编代码。正常的方式是`-S`。由于我也想要相应的源代码，所以我添加了一个`-fverbose-asm`. （我尝试了有和没有。）

我希望`.s`生成一个文件，但没有。

我究竟做错了什么 ？

```
Invoking: Cross G++ Compiler
arm-angstrom-linux-gnueabi-g++ -march=armv7-a -mtune=cortex-a8 -mfpu=neon -mfloat-abi=softfp -flax-vector-conversions -S -fverbose-asm -DNAMESPACE -I/usr/local/angstrom/arm/lib/gcc/arm-angstrom-linux-gnueabi/4.3.3/include -O2 -Wall -c -fmessage-length=0 -Wl,-rpath-link,/usr/local/angstrom/arm/arm-angstrom-linux-gnueabi/usr/lib,--hash-style=gnu -mthumb-interwork -mno-thumb -isystem/usr/local/angstrom/arm/arm-angstrom-linux-gnueabi/usr/include -fexpensive-optimizations -frename-registers -fomit-frame-pointer -fpermissive -fPIC  -mfpu=neon -MMD -MP -MF"Src/Kernel Filters SSEI.d" -MT"Src/Kernel\ Filters\ SSEI.d" -o "Src/Kernel Filters SSEI.o" "../Src/Kernel Filters SSEI.cpp" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T11:55:02.730

您的程序集输出是文件`Src/Kernel Filters SSEI.o`

另一个问题是`-MT`似乎使用不正确，它导致生成的依赖项的目标是依赖项文件本身，而不是目标文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:50:13.283

您不应该有任何`-o`选择 GCC 来获取`.s`文件。你传递`-fverbose-asm -S`给它是正确的。您可能需要一些优化，例如`-O1`

^(我怀疑您的`Src/Kernel Filters SSEI.o`文件可能包含汇编代码。我还强烈建议您在源文件名或目标文件名中避免使用空格。给它命名`Kernel_Filters_SSEI.cpp`)

# android - Android：startChildActivity(tabgroupactivity) 关闭应用

> ID：13762509
> 
> 赞同：0
> 
> 时间：2012-12-07T11:49:20.807
> 
> 标签：android, android-intent, tabs

我有这个代码：

```
public class IntroInventario extends Activity{
@Override 
public void onCreate(Bundle savedInstanceState){ 
    super.onCreate(savedInstanceState);
    setContentView(R.layout.intro_inventario);
    final Database db=new Database(this);
    db.open(); 
    Cursor password=db.dammi_password();
    final EditText inserisci=(EditText) findViewById(R.id.inserisci_password);
    Button entra_inventario=(Button) findViewById(R.id.entra_inventario);
    TextView dimenticata=(TextView) findViewById(R.id.dimenticata_password);
    final Toast toast=new Toast(this);
    while(password.moveToNext()){
        if(password.getString(password.getColumnIndex("password")).equals("")){
            // primo accesso
            TabGroupActivity parentActivity = (TabGroupActivity)getParent();
            Intent intent = new Intent(IntroInventario.this, InventarioNoPassword.class);
            finish();
            parentActivity.startChildActivity("InventarioNoPassword",intent);
        }
    }
    db.close();
    // inserisci password
    entra_inventario.setOnClickListener(new OnClickListener(){
        public void onClick(View v){
            db.open(); 
            Cursor password_2=db.dammi_password();
            while(password_2.moveToNext()){
                if(inserisci.getText().toString().equals(password_2.getString(password_2.getColumnIndex("password")))){
                    TabGroupActivity parentActivity = (TabGroupActivity)getParent();
                    Intent intent = new Intent(getParent(), Inventario.class);
                    finish();
                    parentActivity.startChildActivity("Inventario",intent);
                }else{
                    Toast.makeText(IntroInventario.this,"Password sbagliata",Toast.LENGTH_LONG);
                    toast.show();
                }
            }
            db.close();
        }
    });
    // password dimenticata
    dimenticata.setOnClickListener(new OnClickListener(){
        public void onClick(View v){
            TabGroupActivity parentActivity = (TabGroupActivity)getParent();
            Intent intent = new Intent(getParent(), InventarioDimenticata.class);
            finish();
            parentActivity.startChildActivity("InventarioDimenticata",intent);
        }
    });
}
} 
```

问题是，如果我在“// primo accesso”中，应用程序会自行关闭，而不是转到 InventarioNoPassword.class。这很奇怪，因为在我的其他项目中它有效。

logcat 告诉：12-07 12:43:46.756: W/InputManagerService(60): 在非聚焦客户端 com.android.internal.view.IInputMethodClient$Stub$Proxy@406705e8 (uid=10037 pid=649) 上开始输入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:02:32.570

最好在***onPause()***方法中完成当前正在运行的活动。通常不要在按钮 click 内使用***finish()方法。***使用这样的完成方法。它可能会解决您的问题

```
 @Override
public void onPause() {
    super.onPause();
    finish();
} 
```

然后代替这个

```
TabGroupActivity parentActivity = (TabGroupActivity)getParent();
        Intent intent = new Intent(getParent(), InventarioDimenticata.class);
        finish();
        parentActivity.startChildActivity("InventarioDimenticata",intent); 
```

使用此代码可能会对您有所帮助

```
 Intent intent = new Intent();
            intent.setClass(getBaseContext(), InventarioDimenticata.class);
            startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:57:17.423

您同时使用正常意图和父意图请使用一个，因为您正在使用选项卡组活动

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:53:05.360

我面临类似的问题，不确定它是否相同，但是当我们调用完成（）时；在 startActivity 应用程序进入后台之前。

`parentActivity.startChildActivity("Inventario",intent);` 所以先打电话`finish();`

请尝试给我输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-27T17:51:47.563

您需要将您的课程扩展到`TabGroupActivity`

```
 public class IntroInventario extends TabGroupActivity{ 
```

否则您需要创建一个引用 TabGroupActivity 类的对象，然后使用该类中的方法，即您的`startChildActivity()`

希望这可以帮助。

# angularjs - angularJS中的隐藏元素未编译

> ID：13762511
> 
> 赞同：0
> 
> 时间：2012-12-07T11:49:32.970
> 
> 标签：angularjs, javascript-framework

我的应用程序中有一个弹出窗口，当页面加载时它是隐藏的，它只在单击特定按钮时出现。我的弹出 DOM 中有以下代码

```
<a ng-click="settings();">welcome</a> 
```

当我将它放在页面加载时可见的 DOM 中时，相同的代码可以工作。但在弹出窗口内，它不起作用。它永远不会进入 settings() 函数。谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:22:46.130

您可能应该为它创建一个指令。请参阅[文档](http://docs.angularjs.org/api/ng.%24compile)和[此示例](http://jsfiddle.net/sveinatle/qFmP8/)。请注意，范围有效地应用于编译的返回值`var compiled=$compile(element.contents()); compiled($scope);`。

请注意，Angular 中已经[有一个内置的 include 指令](http://docs.angularjs.org/api/ng.directive%3angInclude)，它可能会做你想做的事。那里的示例响应下拉列表中的更改，尽管您可以轻松调整它以响应单击事件。

# sql - Derby db：sql 更新 select 语句的结果

> ID：13762513
> 
> 赞同：3
> 
> 时间：2012-12-07T11:49:39.473
> 
> 标签：sql, sql-update, derby

我有两张桌子：

**元素：**

```
ID (int. key)
TYPE (String) 
```

**元素属性：**

```
ELEMENT_ID (int)
ATTR_NAME (String) 
```

（我忽略了原始表格中对这个问题不是必需的字段）

我想做类似的事情：

```
UPDATE ELEMENT e, ELEMENT_ATTRIBUTES a
SET a.ATTR_NAME='new name'
WHERE e.ID = a.ELEMENT_ID
  AND e.TYPE = 'a specific type'
  AND a.ATTR_NAME = 'old name' 
```

这在 derby sql 中可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T14:46:04.990

查看[UPDATE 语句的 Derby 参考手册，](http://db.apache.org/derby/docs/10.9/ref/rrefsqlj26498.html)语法为：

```
{
    UPDATE table-Name [[AS] correlation-Name]
        SET column-Name = Value
        [ , column-Name = Value} ]*
        [WHERE clause] |
    UPDATE table-Name
        SET column-Name = Value
        [ , column-Name = Value ]*
        WHERE CURRENT OF
} 
```

所以不，你不能像你的问题那样执行查询。你需要修改它有点像：

```
UPDATE ELEMENT_ATTRIBUTES a
SET a.ATTR_NAME='new name'
WHERE a.ATTR_NAME = 'old name'
AND EXISTS (SELECT 1 
            FROM ELEMENT e 
            WHERE a.ELEMENT_ID = e.ID AND e.TYPE = 'a specific type') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-11-03T13:41:37.690

备案：我做到了。select 子句必须为每行返回一个要更新的结果，因此：

```
UPDATE MY_TABLE1 A SET 
    A.FIELD1 = (SELECT b.FIELD2 
                FROM MY_OTHERTABLE B 
                WHERE (A.FIELD3= B.FIELD3) AND (A.FIELD4= B.FIELD4)); 
```

# javascript - 如何将淡入淡出功能添加到现有的幻灯片脚本元素

> ID：13762517
> 
> 赞同：0
> 
> 时间：2012-12-07T11:50:06.170
> 
> 标签：javascript, html, slideshow, fadeout

我有以下脚本，它在我的网站 danmccready.com/Aviemore 上启动幻灯片我遇到的问题是幻灯片每 3 秒更改一次，但我希望它们随着渐变效果而改变。我没有高兴地更改了 crossFadeDuration 变量。任何想法，谢谢丹

```
 // set the following variables
 // Set slideShowSpeed (milliseconds)
 var slideShowSpeed = 3000

 // Duration of crossfade (seconds)
 var crossFadeDuration = 1000

 // Specify the image files
 var Pic = new Array() // don't touch this
 // to add more images, just continue
 // the pattern, adding to the array below
 Pic[0] = 'image1.jpg'

 }

 function runSlideShow(){
     if (document.all){
        document.images.SlideShow.style.filter="blendTrans(duration=2)"
        document.images.SlideShow.style.filter="blendTrans(duration=crossFadeDuration=1000)"
        document.images.SlideShow.filters.blendTrans.Apply()      
     }
     document.images.SlideShow.src = preLoad[j].src
     if (document.all){
         document.images.SlideShow.filters.blendTrans.Play()
     }
     j = j + 1
     if (j > (p-1)) j=0
         t = setTimeout('runSlideShow()', slideShowSpeed)
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:37:14.417

您可以使用 jquery 插件，而不是采用 javascript 方式。事情变得容易得多。我摆弄了一个小例子。看看，可能对你有帮助：http: [//jsfiddle.net/YueA6/](http://jsfiddle.net/YueA6/)

jQuery方法：

```
fadeOut() 
```

可以在这里使用，效果很好。

# c++ - 优化成员数组访问（mov指令）

> ID：13762522
> 
> 赞同：0
> 
> 时间：2012-12-07T11:50:17.107
> 
> 标签：c++, optimization, gcc, assembly

这是性能分析器报告的一部分：

```
for (node* p = array[index]; p != NULL; p = p->next )
   52,55 :           cb40a:       mov    (%edi,%edx,4),%ebp 
```

如您所见，在该函数中花费的一半时间花在表示“p = array[index]”访问的特定指令上（%edi 是“this”指针，%edx 是计算索引）。

1.  为什么需要这么长时间？循环内部有调用和比较，但大部分时间都花在执行一次简单的 mov 上。我想通常这个列表只包含很少的元素，因此循环体不会花费太多时间，但仍然......
2.  如何优化它？

数组访问只发生一次，函数从中获取起始元素。通常，该函数最终会将节点数据与键进行比较，如果比较失败，则返回“p”或 NULL。即大多数时候p->next 是NULL。

即使我们假设内存访问只发生两次：在 array[index] 和 p->next 中，那么为什么第一个比第二个慢得多（大约是函数的 5%）？

如果这是缓存问题，我想知道它为什么会发生以及如何找到可能的解决方案（即重新安排内存访问等）。

完整的功能（种类）：

```
node* list::find(int key)
{
  if (!this->array) return 0;
  node* dummy = 0;
  int index = calcindex(key);
  for (node* p = this->array[index]; p != NULL; p = p->next)
  {
    if (p->key() == key && check(p->data, key))
      return p;
    dummy = p; // forgot to remove this stuff, probably optimized away
  }
  return 0;
} 
```

这里的 key() 和 compare() 是简单的内联函数。

# mysql - 在单个 sql 查询中一起使用 JOIN 和 group by

> ID：13762525
> 
> 赞同：1
> 
> 时间：2012-12-07T11:50:31.063
> 
> 标签：mysql, select, join, group-by

我无法同时使用 JOINS 和 group-by：我搜索了这个...但我没有找到解决方案..问题如下：

我有两个表，第一个是`main_table`字段`eid`，，，`name``status`

第二个表是字段`fid`, `eid`, `last_date`,`remarks`和`next_date`

第二个表用于存储客户的后续详细信息（存储在 main_table 中的客户详细信息），我想获取每个客户的最后一个后续记录，其中包含选定的日期期间（从日期到 to_date），并按 next_date 降序排序。

我使用了以下查询但没有工作

```
SELECT * 
FROM main_table as MT 
JOIN followups as MF on MT.eid=MF.eid 
WHERE MT.status='open' AND MF.NDate<='2012-12-07' 
GROUP BY MF.eid 
ORDER BY MF.next_date DESC 
```

提前谢谢...伙计们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:03:37.180

你可以尝试这样的事情：

```
select m.eid,
  m.name,
  m.status,
  f1.last_date,
  f1.remarks,
  f1.next_date
from maintable m
left join
(
  select max(last_date) maxLast, eid
  from followups
  where last_date between from_date and to_date
  group by eid
) f
  on m.eid = f.eid
left join followups f1
  on f.maxLast = f1.last_date
  and f.eid = f1.eid
where m.status='open'
  and f1.next_date<='2012-12-07'
order by f1.next_date desc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-01T10:34:10.760

试试这个

```
SELECT * FROM main_table AS MT 
LEFT JOIN (SELECT * FROM (SELECT * FROM followups ORDER BY next_date DESC) AS A GROUP BY eid) AS MF ON MT.eid=MF.eid 
WHERE MT.status='open' 
AND MF.NDate<='2012-12-07'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T11:59:25.970

试试这个：

```
SELECT * FROM main_table AS MT 
LEFT JOIN (SELECT * FROM (SELECT * FROM followups WHERE NDate<='2012-12-07' ORDER BY next_date DESC) AS A GROUP BY eid) AS MF ON MT.eid=MF.eid 
WHERE MT.status='open'; 
```

# php - 从子域到主域的 PHP 会话变量

> ID：13762527
> 
> 赞同：0
> 
> 时间：2012-12-07T11:50:34.440
> 
> 标签：php, session

我在亚马逊 Web 服务器 EC2 实例上的 ISPConfig 中设置了 2 个域/站点，

我有一个名为[app.example.com](http://www.app.example.com)的域，另一个是[https://www.example.com](https://www.example.com) 两个域都在 ISpConfig3 中设置。所以两者都有单独的 webroot 和代码文件。我在 app.example.com 上设置了一些会话变量，而在[https://www.example.com](https://www.example.com)我只有静态内容。但在某些情况下，我需要从 app.example.com 访问会话变量到我的顶级域[https://www.example.com](https://www.example.com)

我试过在[http://app.example.com上设置](http://app.example.com)

```
ini_set('session.cookie_domain', '.example.com' );

session_start();

$_SESSION['user_name']= "my_session"; 
```

然后`$_SESSION['user_name']`访问[https://www.example.com](https://www.example.com)

```
print_r($_SESSION['user_name']); 
```

但似乎没有任何工作，我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:04:34.910

我认为@Alan Gularte 的第一条评论回复得很好。如果它不起作用，您可以考虑自己编写一个 cookie 来来回传递信息。

```
setcookie ("PassMySessionName", $_SESSION['user_name'], time() - 3600, "/", "example.com"); 
```

将 cookie 域设置为“example.com”将使其在 www 上都可用。和应用程序。

另一方面，您会在 $_COOKIE 数组中找到它。

```
$PassedUserName=$_COOKIE["PassMySessionName"]; 
```

如果您需要在不启用 cookie 的情况下全部工作，它会变得更加复杂，因为 $_SESSION 会透明地将参数附加到您的 url。在这种情况下（如果您从一个站点链接到另一个站点），您可以手动将它们添加到 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-16T11:58:01.160

我想稍微修正一下

坏的：`setcookie ("PassMySessionName", $_SESSION['user_name'], time() - 3600, "/", "example.com");`

正确的：`setcookie ("PassMySessionName", $_SESSION['user_name'], time() + 3600, "/", "example.com");`

# cuda - NVidia 的 ISA 语言

> ID：13762528
> 
> 赞同：1
> 
> 时间：2012-12-07T11:50:42.193
> 
> 标签：cuda, gpu, nvidia, amd-processor, instruction-set

AMD 为其 ISA 定义了每个 GPU 系列。据我了解，ISA 是一种指令集架构：类似于汇编的“语言”。NVidia的GPU怎么叫“汇编语言”？- PTX？有没有像 AMD 或 Intel 离线编译器这样的工具可以为 NVidia 内核生成这样的程序集？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T13:29:47.260

NVIDIA 汇编语言称为 SASS。`cuobjdump`您可以使用该工具从已编译的内核生成 SASS 。如果您的可执行文件的名称是`foo`，请使用`cuobjdump -sass foo` 输出与您获得的 PTX 输出类型足够接近`nvcc -ptx foo.cu`，您应该能够通过[PTX ISA 参考手册理解](http://docs.nvidia.com/cuda/pdf/ptx_isa_3.1.pdf)

# breeze - Breeze 多列外键错误

> ID：13762529
> 
> 赞同：1
> 
> 时间：2012-12-07T11:50:44.247
> 
> 标签：breeze

我想我发现了另一个错误：

我有一个带有多列外键的对象：

```
public class ConexionPalanca {
    public int ConexionPalancaID { get; set; }

    public int PalancaOrigenID { get; set; }
    public int PerspectivaOrigenID { get; set; }
    public int PanelOrigenID { get; set; }
    public virtual Palanca PalancaOrigen { get; set; }
}

public ConexionPalancaConfiguration() {
        HasKey(cp => cp.ConexionPalancaID);
        Property( p => p.ConexionPalancaID )
            .IsRequired()
            .HasDatabaseGeneratedOption( DatabaseGeneratedOption.Identity );

        HasRequired( cp => cp.PalancaOrigen ).WithMany().HasForeignKey( cp => new { cp.PanelOrigenID, cp.PerspectivaOrigenID, cp.PalancaOrigenID } ).WillCascadeOnDelete( false );
} 
```

我正在尝试使用此函数创建一个新对象：

```
var createConexion = function (origen, destino, panel) {
    var metadataStore = manager.metadataStore;
    var conexionType = metadataStore.getEntityType("ConexionPalanca");
    var newConexion = conexionType.createEntity();

    manager.addEntity(newConexion);

    newConexion.PalancaDestino(destino);
    newConexion.PalancaOrigen(origen);
    newConexion.Panel(panel);
    newConexion.Activa(true);

    return newConexion;
}; 
```

而且似乎新对象只有正确分配的外键的一部分（来自saveBundle）：

```
{
 "entities": [
  {
    "ConexionPalancaID": -1,
    "PanelID": 1,
    "PalancaOrigenID": 0,
    "PerspectivaOrigenID": 0,
    "PanelOrigenID": 1,
    "Anchor": "RightMiddle",
    "Activa": true,
    "entityAspect": {
        "entityTypeName": "ConexionPalanca:#CMIMVC4.DOM",
        "entityState": "Added",
        "originalValuesMap": {},
        "autoGeneratedKey": {
        "propertyName": "ConexionPalancaID",
        "autoGeneratedKeyType": "Identity"
      }
    }
  }
],
"saveOptions": {
  "allowConcurrentSaves": false
}
} 
```

我做错了什么还是一个错误？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T01:28:36.917

好的，这是一个错误，现在已在微风 v0.75.2 中修复......感谢您找到它。:)

# android - Android 应用程序中的 URL 路由

> ID：13762535
> 
> 赞同：1
> 
> 时间：2012-12-07T11:51:04.480
> 
> 标签：android, android-intent, android-webview, android-ui

我在我的 iOS 应用程序中使用具有多种类型链接的 web 视图。链接指向特定的 URL

```
appname/answers/1  -> load a view with answer 1
appname/questions/2/answer  -> load a view to answer question 2 
```

i 反过来指定系统应该采取的处理它的动作

如果我想在我的 android 应用程序中重用我的 webview，那么处理它的正确方法是什么？IE：

*   我在哪里放置路由代码
*   编写路由的最佳技术？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T15:01:28.317

你会想要这个，对于我们这些具有 Three20/iOS 背景的人来说非常方便： [https ://github.com/usepropeller/routeable-android](https://github.com/usepropeller/routable-android)

# crystal-reports - 在水晶报表中分组时只显示最后一个数据

> ID：13762538
> 
> 赞同：0
> 
> 时间：2012-12-07T11:51:22.437
> 
> 标签：crystal-reports

在水晶报表中分组时如何显示某一列的所有数据？它只显示该列字段的最后一条记录。有没有办法显示所有记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T15:24:42.287

在组标题中放置一个公式：`shared stringVar blah := ''`

在详细信息部分放置一个公式：`shared stringVar blah; blah := blah + ',' + {table.field}`

在组页脚中放置一个公式：`shared stringVar blah`

有时您需要在每个公式上方添加一行`whileprintingrecords;`

# php - PHP - 在函数参数中获取 URL

> ID：13762539
> 
> 赞同：-2
> 
> 时间：2012-12-07T11:51:23.583
> 
> 标签：php, function

当我手动将 URL 字符串放入参数中时，我有以下功能可以完美运行。我需要它是动态的，我正在使用 Wordpress。

```
 function get_tweets($url) {     
$json_string = file_get_contents('http://urls.api.twitter.com/1/urls/count.json?url=' .  $url);
$json = json_decode($json_string, true);
return intval( $json['count'] );
}
// Below is the one that works manually     
<?php echo get_tweets('http://www.someurl.com');

//ones I have tried that do not (trying to make dynamic)
$url = $get_permalink();

echo get_tweets('$url');
echo get_tweets($url);

$url = '$get_permalink()'; 
$url = $get_permalink(); // produces needs to be in string error
echo get_tweets($url); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:58:48.543

你所做的事情本身并没有错。我能看到的唯一明显错误是您没有正确编码 URL。您需要确保您在 URL 中输入的查询字符串参数经过正确的 URL 编码，否则远程主机可能无法正确解释请求。

```
function get_tweets($url) {     
    $json_string = file_get_contents('http://urls.api.twitter.com/1/urls/count.json?url=' .  urlencode($url));
    $json = json_decode($json_string, true);
    return intval( $json['count'] );
}

echo get_tweets('http://www.someurl.com'); // should work just fine 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:59:47.173

您是否尝试对您的 url 字符串进行[urlencode 编码？](http://php.net/manual/en/function.urlencode.php)

```
urlencode($foo); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:06:44.290

您的主要问题在下面一行

改变

```
//ones I have tried that do not (trying to make dynamic)
$url = $get_permalink(); 
```

至

```
//ones I have tried that do not (trying to make dynamic)
$url = get_permalink(); 
```

# actionscript-3 - 我想在 flex 3 中的 datagrid 的列标签内放置一个按钮

> ID：13762546
> 
> 赞同：1
> 
> 时间：2012-12-07T11:51:44.157
> 
> 标签：actionscript-3, apache-flex, flex3, mxml, itemrenderer

我需要在 datagrid 标签的一列中放置一个按钮，并且该列的值应该出现在按钮标签上。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T12:53:29.503

在 flex 3 中，使用标签`mx:itemRenderer`：

```
<mx:DataGrid id="myDataGrid" dataProvider="{myDP}">
        <mx:columns>
            <mx:DataGridColumn dataField="field">
                <mx:itemRenderer>
                    <mx:Component>
                        <mx:Button label="{data.field}"/>
                    </mx:Component>
                </mx:itemRenderer>
            </mx:DataGridColumn>
        </mx:columns>
    </mx:DataGrid> 
```

在 flex 4 中，使用 spark dataGrid 和`s:itemRenderer`标签：

```
<s:DataGrid dataProvider="{myDP}">
    <s:columns>
        <s:ArrayList>
            <s:GridColumn dataField="Price">
                <s:itemRenderer>
                    <fx:Component>
                        <s:GridItemRenderer>
                            <s:Button label="{data.Price}"/>
                        </s:GridItemRenderer>
                    </fx:Component>
                </s:itemRenderer>    
            </s:GridColumn>
        </s:ArrayList>
    </s:columns>
</s:DataGrid> 
```

# android - 片段未重新加载

> ID：13762549
> 
> 赞同：0
> 
> 时间：2012-12-07T11:51:53.690
> 
> 标签：android, dynamic, android-fragments, reload

我正在尝试实现片段。`Fragment`正在创建，但问题是它里面的视图是空的，并且显示了一个空白屏幕。当我第一次运行它时，会显示视图，但在重新加载时，它的视图变为空并显示一个空白屏幕。不知道是什么问题。

这是我的代码....

```
 public View onCreateView(LayoutInflater inflater, ViewGroup container,
                        Bundle savedInstanceState) {
                View root = inflater
                                .inflate(R.layout.winedescription, container, false);
                tvTitle = (TextView) root.findViewById(R.id.tvWineDescriptionTitle);
                tvDescription = (TextView) root
                                .findViewById(R.id.tvWineDescriptionDescription);
                tvWineName = (TextView) root
                                .findViewById(R.id.tvWineDescriptionWineName);
                tvWineType = (TextView) root.findViewById(R.id.tvWineDescriptionType);
                tvWinePrice = (TextView) root.findViewById(R.id.tvWineDescriptionPrice);
                btnSelect = (Button) root.findViewById(R.id.btnWineDescriptionSelect);
                imgWine = (ImageView) root.findViewById(R.id.ivWineImage);
                setDescription(position); 
                btnSelect.setOnClickListener(this);
                return root;
        } 
```

我的父活动它是一个适配器。

```
public class WineFragmentPagerAdapter extends FragmentPagerAdapter {

        public static ArrayList<WineSubCategoryNameListModel> itemData = new ArrayList<WineSubCategoryNameListModel>();
        private int size = 0;

        public WineFragmentPagerAdapter(FragmentManager fm,
                        ArrayList<WineSubCategoryNameListModel> wineSubCategory) {
                super(fm);
                try {
                        itemData.clear();
                        if (wineSubCategory != null) {
                                for (int i = 0; i < wineSubCategory.size(); i++) {
                                        itemData.add(wineSubCategory.get(i));
                                }
                                size = itemData.size();
                        }
                } catch (Exception e) {
                        e.printStackTrace();
                }
        }

        @Override
        public int getCount() {
                return size;
        }

        @Override
        public Fragment getItem(int position) {
                Log.d("wine", "Fragment Created");
                FragmentWineView f = FragmentWineView.newInstance();
                // f.setWineList(itemData);
                f.setPosition(position);
                return f;
        }
}

if (llWinePager.getChildCount() == 0) {
                    LayoutInflater infSelectTypeLayout = (LayoutInflater)     getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    wineDescriptionView = (LinearLayout) infSelectTypeLayout.inflate(
                                    R.layout.winedescriptionpager, null);
                    viewPage = (ViewPager) wineDescriptionView
                                    .findViewById(R.id.viewPager);
                    btnBackWineDescriptionView = (Button) wineDescriptionView
                                    .findViewById(R.id.btnBackWineDescriptionView);

                    WineFragmentPagerAdapter adapter = new WineFragmentPagerAdapter(
                                    getSupportFragmentManager(), wineSubCategory.get(0)
                                                    .getWineSubCategoryNameList());

                    viewPage.setAdapter(adapter);
                    viewPage.setOnPageChangeListener(WineMenu.this);
                    displayImage(subCategoryId);
                    llWinePager.addView(wineDescriptionView);
                    btnBackWineDescriptionView.setOnClickListener(this);
                    Log.d("wine", ".WineMenu .....IF....");
            } else {
                    WineFragmentPagerAdapter adapter = new WineFragmentPagerAdapter(
                                    getSupportFragmentManager(), wineSubCategory.get(0)
                                                    .getWineSubCategoryNameList());
                    viewPage.setAdapter(adapter);
                    displayImage(subCategoryId);
                    Log.d("wine", ".WineMenu .....Else....");
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:00:32.460

首先，您为扩展 FragmentActivity 定义父类，然后在内部定义 anyClass 扩展 Fragment，然后此代码实现并检查，

```
public class DemoFragment extends Fragment {

        public ConatactFragment() {
            // defult constructor
        }
        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            View view = inflater.inflate(R.layout.YOUR_LAYOUT,container,false);
            return view;
        }

    } 
```

# java - Java instanceof 实现/扩展

> ID：13762566
> 
> 赞同：5
> 
> 时间：2012-12-07T11:53:38.923
> 
> 标签：java, instanceof

instanceof 究竟是如何工作的？当我有一个相互扩展和实现的对象层次结构时，作为某物的实例是否通过这两条线起作用？

例如，我想知道我的对象是否是`List`or `ArrayList`or的实例`Collection`？

我检查了这棵树，[http://docs.oracle.com/javase/6/docs/api/java/util/package-tree.html](http://docs.oracle.com/javase/6/docs/api/java/util/package-tree.html)

他们似乎都属于`Object`当然，但我需要的是，我认为是`AbstractCollection`甚至是正常`Collection`的，因为这似乎是最高等级的。

当我只检查一个对象`Collection`以涵盖所有这 3 个类时，我会没事吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T11:56:00.420

> 当我仅针对 Collection 检查对象以涵盖所有这 3 个类时，我会好吗？

是的，`instanceof Collection`对于 Collection 接口的所有实现（直接或间接）都将返回 true。

在极少数情况下您不希望这样做，您必须使用反射。例如，[Class#getDeclaredClasses](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#getDeclaredClasses%28%29)将为您提供由该类直接扩展/实现的所有类和接口的列表。

一旦你知道某个东西是一个集合，你就可以强制转换它来访问它的方法（比如`iterator`）：

```
 if (myObject instanceof Collection){
      Collection<?> c = (Collection<?>) myObject;
      for (Object o: c){
         // do something with every element in the collection
      }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T11:55:44.930

```
if(obj instanceof Collection) 
```

如果对象是任何类型的集合，将返回 true。因此，对于您的 3 种情况，它将返回 true，但是对于 HashMap 等其他情况，它也会返回 true

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T11:55:56.053

> 当我仅针对 Collection 检查对象以涵盖所有这 3 个类时，我会好吗？

不总是。

`is-a`一个对象a `Collection`but是可能的`ArrayList`。

例如：

```
ArrayList anArrList = new ArrayList();
HashMap ahashMap = new HashMap();

anArrList instanceof Collection // true
ahashMap instanceof Collection // true 
```

但两者都处于不同的层次结构。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T11:58:13.743

`instanceof``true`如果检查的对象是给定类的类或子类，或者它（或其祖先之一）实现给定接口，则运算符将返回。

# jquery - JQuery/CSS 菜单不会浮动在 ipad 上的固定 div 上

> ID：13762573
> 
> 赞同：0
> 
> 时间：2012-12-07T11:53:57.780
> 
> 标签：jquery, html, css, ipad

我一直在开发一个网站，它有一个固定的顶部 div，里面有一个简单的下拉菜单，下面有一个固定的左 div。如果您将鼠标悬停在 IE 或 FF 中的“住宿地点”上，它可以完美运行，但是当您在 ipad 上查看它时，菜单子项会出现在固定的左侧 div 下。我尝试了各种 z-index，但我无法让它在 ipad 上正常运行。

谁能帮我？

我在这里编写了一个简单的版本：

[http://jsfiddle.net/LBv8f/](http://jsfiddle.net/LBv8f/)

忽略这一点。所以不会让我只发布一个指向 jsf 的链接，但是这里有太多代码要发布..

```
$(document).ready(function () 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:11:39.160

您必须先移动`#left-container`以`#top-nav-container`补偿固定位置。

工作[**演示**](http://jsfiddle.net/LBv8f/1/)（在 Ipad 上测试）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-07T12:09:45.330

ipad 上没有悬停的概念，所以显然悬停在 iPad 上不起作用。话虽如此，您已经使用了位置，您可以使用 ipad 的媒体查询在 iPad 上根据需要定位菜单。

```
@media (max-width:767px) {
  // css for ipad potrait mode
}

@media (max-width:979px) {
  // css for ipad landscape mode
} 
```

# php - Facebook API (Javascript)：发布到好友列表

> ID：13762576
> 
> 赞同：0
> 
> 时间：2012-12-07T11:54:11.967
> 
> 标签：php, javascript, facebook, facebook-graph-api, friend

有人可以指出我使用 Facebook JS API 将帖子发布到好友列表的正确方向吗？到目前为止，我一直在使用此代码：

```
 FB.api('me/feed', 'post', { message: msg,privacy: {value: "CUSTOM", friends: "SOME_FRIENDS", allow:selected_list}}, function(response) {
        if (!response || response.error) {
            console.log(response);
            console.log('ERROR ERROR ERROR');
        }
        else {
            console.log(response);
            console.log('successfully sent, now reload data');
            refreshData();
        }
    }) 
```

在这种情况下，*selected_list* 是好友列表的 id。我还尝试使用如下字符串传递一个 id 列表以发布到我的朋友墙上：“aID,bID,c_ID,d_ID”

它似乎是在我自己的墙上发帖，但不是在我的朋友墙上，更重要的是没有出现在好友列表中。我可以轻松地在提要上发表评论，但无法创建新帖子并在该列表中的朋友之间分享。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:40:56.983

您编写的代码发布到您自己的墙上。API 发布到`me/feed`的只是您自己的墙。应该是`FRIEND_ID/feed`

```
FB.api('/FRIEND_ID/feed', 'post', { message: body }, function(response) {
  if (!response || response.error) {
    alert('Error occured');
  } else {
    alert('Post ID: ' + response.id);
  }
}); 
```

上面的代码使用 FRIEND_ID 将消息发布到朋友的墙上。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T17:44:05.340

您对隐私对象使用不推荐使用的格式。我怀疑这是你的问题。

```
FB.api('/me/feed', 'post', { 'message': msg, 'privacy' : {'value': 'CUSTOM',
      'allow':'uid1,uid2,flid1,flid2'}}, function(response) {

    }
}); 
```

并且不要尝试在逗号分隔列表中使用空格。我花了 3 个小时才发现你不能这样做。

# wcf - 从多个客户端访问 App Fabric Cache

> ID：13762577
> 
> 赞同：1
> 
> 时间：2012-12-07T11:54:13.450
> 
> 标签：wcf, caching, appfabric, appfabric-cache

我正在尝试在多个主机上设置一个网站，这些应用程序使用 App Fabric Caching 框架。

我已经在**Machine1**上使用 SQL Server（不是 XML）设置了 App Fabric，并且我使用“NT Authority\Network Service”用户来配置 App Fabric。我已经在**同一台机器**上设置了网站，并将“网络服务”设置为应用程序池标识。我已使用“grant-CacheAllowedClientAccount”命令将缓存存储权限授予“网络服务”用户。该网站正常运行，并且能够将数据添加/编辑/删除到缓存中。一切顺利。

但是，当我尝试使用完全相同的 IIS 和应用程序池设置在另一台机器 ( **Machine2 ) 上托管相同的应用程序时，应用程序失败并出现以下错误：**

> *有一个暂时的故障。请稍后重试。（指定的一个或多个缓存服务器不可用，可能是由于网络或服务器繁忙。对于本地缓存集群，还要验证以下条件。确保已为此客户端帐户授予安全权限，并检查 AppFabric所有缓存主机上的缓存服务都允许通过防火墙，而且服务器端的 MaxBufferSize 必须大于或等于客户端发送的序列化对象大小。）*

如果我向**所有人**授予权限，它可以正常工作，但这不是一个很好的解决方案。

***两台机器都驻留在域中。***

您能否就此提供一些意见？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T07:34:40.863

看起来您只是缺少在 machine1 上运行以下命令

**Grant-CacheAllowedClientAccount -Account "DOMAIN1\Machine2$"**

完成此操作后，NETWORK SERVICE 帐户中 machine2 上运行的所有服务将能够访问 Machine1 上托管的 Appfabric 缓存

在这里详细解释 - [http://msdn.microsoft.com/en-us/library/ff921012(v=azure.10).aspx](http://msdn.microsoft.com/en-us/library/ff921012(v=azure.10).aspx)

*请注意，如果客户端应用程序作为内置计算机帐户运行，例如“NT Authority\Network Service”，您可以授予计算机访问缓存集群的权限。为此，请使用机器帐户，即域名和机器名称，并附加美元符号。以下示例授予对名为 DOMAIN1 的域中名为 Server1 的计算机的缓存集群访问权限。*

*Grant-CacheAllowedClientAccount -Account "NT Authority\Network Service"*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-20T06:17:30.127

另一种解决方案是在客户端配置和 AppFabric 缓存服务配置中都将安全和保护级别设置为无。

在 web.config/app.config 文件中

```
<dataCacheClient>
<securityProperties mode="None" protectionLevel="None"/>
<hosts>
  <host   name="XXXX" cachePort="22233"/>
</hosts> 
```

在 AppFabric 缓存服务配置文件中

```
 <advancedProperties>
        <securityProperties mode="None" protectionLevel="None" />
 </advancedProperties> 
```

# asp.net - 重置密码策略

> ID：13762581
> 
> 赞同：0
> 
> 时间：2012-12-07T11:54:31.047
> 
> 标签：asp.net, asp.net-membership, membership, membership-provider

我有一个自定义注册表单，其中包括一个安全问题和答案 - 工作正常。

但是，我有以下重置密码逻辑，仅当`requiresQuestionAndAnswer`我的 Web.Config 文件中的属性设置为 false 时才有效。有人可以向我展示一种将问题和答案逻辑编码到我的 ResetPassword 代码隐藏中的推荐方法吗？这里有必要再去一次数据库吗？

```
public void ResetPassword_OnClick(object sender, EventArgs args)
{
    string newPassword;
    u = Membership.GetUser(UsernameTextBox.Text, false);
    newPassword = u.ResetPassword();

    if (newPassword != null)
    {
        Msg.Text 
            = "Password reset. Your new password is: " 
                + Server.HtmlEncode(newPassword);
    }
    else
    {
        Msg.Text 
            = "Password reset failed. Please re-enter your values.";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:55:02.353

我在这里找到了答案：

[MembershipUser.PasswordQuestion 属性](http://msdn.microsoft.com/en-us/library/system.web.security.membershipuser.passwordquestion.aspx)

“如果 RequiresQuestionAndAnswer 为真，则会员用户的密码答案必须提供给 GetPassword 和 ResetPassword 方法。”

# numpy - 50Kx50K 稀疏矩阵

> ID：13762585
> 
> 赞同：2
> 
> 时间：2012-12-07T11:54:42.270
> 
> 标签：numpy, scipy, sparse-matrix

我需要保存一个 50,000x50,000 稀疏矩阵/二维数组，其中约 5% 的单元格均匀分布且非空。我将需要：

**编辑**我需要在 numpy/scipy 中执行此操作，如果不清楚，抱歉。此外，增加了要求。

1.  从数据库中读取 5% 的非空数据，并尽快将其分配给矩阵/二维数组单元。
2.  使用尽可能少的内存。
3.  使用花哨的索引（例如，获取列中所有非空值的索引）。这是不错的选择，内存和构建时间更重要。
4.  一旦构建，矩阵将不会改变。
5.  但是，我会想要使用它的转置，最好是 O(1) 内存和时间。

实现这一目标的最有效方法是什么？我可以用 nan 而不是 0 来表示“空”单元格吗？（0 对我来说是一个有效值），我可以有效地运行 nansum、nanmean 吗？如果不是，我可以有效地获取给定列/行中所有非零的索引和值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:14:47.453

[http://en.wikipedia.org/wiki/Sparse_matrix](http://en.wikipedia.org/wiki/Sparse_matrix)很好地总结了几种不同的方法。如果您从网站检索到的数据是无序的，我会推荐“列表列表”（或者在这种情况下更有效——可能是列/值对列表的数组）。如果您可以保证订购，我会推荐“耶鲁格式”。这两种解决方案都不需要存储 NAN，并使 nanmean/nanaverage 更快。

但是，这些解决方案提供了缓慢的插入。这些解决方案将使用大约 10% 的完整矩阵空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T16:35:33.713

好吧，就我的目的而言，似乎 csc 是要走的路。使用 5% 的“稀疏因子”，csc 中的行索引占用的内存仍然值得。这是我用来测试我需要的东西真的很快的代码：

```
def build_csc(N, SPARSITY_FACTOR):

    data = []
    row_indexes = []
    column_indexes = [0] * (N+1)

    current_index = 0
    for j in xrange(N):
        column_indexes[j] = current_index
        for i in xrange(N):
            if random.random() < SPARSITY_FACTOR:
                row_indexes.append(i)
                data.append(random.random())
                current_index += 1
    column_indexes[N] = current_index

    return sp.csc_matrix((data,row_indexes,column_indexes), shape=(N,N), dtype=np.float)

def take_from_col(m, col_index):
    col = m[:,col_index]
    indexes = col.nonzero()[0]
    values = col[indexes] 
```

运行它`%timeit`表明这确实很快。

# java - 向文本字段添加标签

> ID：13762589
> 
> 赞同：0
> 
> 时间：2012-12-07T11:54:50.400
> 
> 标签：java, swing

您好我正在尝试创建一个由 JComboBox 和 JTextField 组成的界面。我已经整理出向 JComboBox 添加标签的代码，但在向文本字段添加标签时遇到问题。任何帮助，将不胜感激。

```
 import javax.swing. *;
    import java.awt.event. *;   
    import java.awt.FlowLayout;
    import java.lang.Math; 

    public class AreaFrame3  extends JFrame
    {  

      public static void main(``String[]args)

      {

          //Create array containing shapes

         String[] shapes ={"(no shape selected)","Circle","Equilateral  Triangle","Square"};

         //Use combobox to create drop down menu

         JComboBox comboBox=new JComboBox(shapes);

         JPanel panel1 = new JPanel(new FlowLayout()); //set frame layout

         JLabel label1 = new JLabel("Select shape:");

         panel1.add(label1);

         panel1.add(comboBox); 

         JTextField text = new JTextField(10); //create text field

         JFrame frame=new JFrame("Area Calculator Window");//create a JFrame to put combobox

         frame.setLayout(new FlowLayout()); //set layout

         frame.add(panel1);

         frame.add(text);

         JButton button = new JButton("GO"); //create GO button

         frame.add(button);

         //set default close operation for JFrame

         frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

         //set JFrame ssize

         frame.setSize(400,250);

         //make JFrame visible. So we can see it

         frame.setVisible(true);

      }

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:03:34.143

这是一种方法。`panel1`只需按适当的顺序将所有小部件放在您的位置。

从长远来看，这可能不太容易维护，并且您希望拥有比 LayoutManager 更好的 LayoutManager `FlowLayout`，但如果您只是想学习 Swing，这可能是一个好的开始。如果你觉得 FlowLayout 不够好，可以看看 LayoutManager 教程。我个人最喜欢的是：`BorderLayout`和`GridBagLayout`。`MigLayout`也可能是一个不错的，但我从未使用过它，它不是 JVM 的一部分。

```
import java.awt.FlowLayout;

import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class AreaFrame3 {

    protected void initUI() {
        // Create array containing shapes
        String[] shapes = { "(no shape selected)", "Circle", "Equilateral  Triangle", "Square" };
        // Use combobox to create drop down menu
        JComboBox comboBox = new JComboBox(shapes);
        JLabel label1 = new JLabel("Select shape:");
        JPanel panel1 = new JPanel(new FlowLayout()); // set frame layout
        JLabel label2 = new JLabel("Text label:");
        JTextField text = new JTextField(10); // create text field
        panel1.add(label1);
        panel1.add(comboBox);
        panel1.add(label2);
        panel1.add(text);
        JFrame frame = new JFrame("Area Calculator Window");// create a JFrame to put combobox
        frame.setLayout(new FlowLayout()); // set layout
        frame.add(panel1);
        JButton button = new JButton("GO"); // create GO button
        frame.add(button);
        // set default close operation for JFrame
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        // make JFrame visible. So we can see it
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new AreaFrame3().initUI();
            }
        });
    }
} 
```

# vba - 检查表单的 CountOfLines

> ID：13762590
> 
> 赞同：1
> 
> 时间：2012-12-07T11:54:50.577
> 
> 标签：vba, ms-access

我尝试通过向模块和表单添加 VBA 行数来改进我为文档数据库制作的报告。以下代码在标准模块中完美运行：

```
Sub test()
    Dim accObj As AccessObject, bwasOpen As Boolean, objName As String
    objName = "Form1"
    Set accObj = CurrentProject.AllForms(objName)
    bwasOpen = accObj.IsLoaded
    If Not bwasOpen Then
        DoCmd.OpenForm objName, acDesign, WindowMode:=acHidden
    End If
    If Forms(objName).HasModule Then
        DoCmd.OpenModule "Form_" & objName
        Debug.Print Modules("Form_" & objName).CountOfLines
    End If
    If Not bwasOpen Then
        DoCmd.Close acForm, objName, acSaveNo
    End If
End Sub 
```

但是当我在报告本身中使用类似的代码时，我有一个错误。而且由于该错误发生在类模块（报告）中，我觉得调试有点卡住了。报告中的代码：

```
 Set accObj = CurrentProject.AllForms(objName)
    bwasOpen = accObj.IsLoaded
    If Not bwasOpen Then
        DoCmd.OpenForm objName, acDesign, WindowMode:=acHidden  'Breaks here
    End If
    If Forms(objName).HasModule Then
        DoCmd.OpenModule "Form_" & objName
        GetExtraInfo = Modules("Form_" & objName).CountOfLines
    End If
    If Not bwasOpen Then
        DoCmd.Close acForm, objName, acSaveNo
    End If 
```

使用 =GetExtraInfo() 从报表控件调用代码。整个事情运行良好，除了这个我想返回表单的 CountOfLines 的新部分。

更新：我添加了一些错误捕获，它给出了错误：
**2486 - 您目前无法执行此操作**

整个数据库可以在[这里](https://sites.google.com/site/idevlopcode/devlopment-library/dbDocu.mdb?attredirects=0&d=1)下载，它只有 300 KB。该报告名为“rptObjList”。“坏”代码已被注释掉。它是一个 Access 2003 数据库。
谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:40:41.167

您的代码打开一个表单并检查其`.HasModule`属性。如果表单有模块，则打开该模块以检查`.CountOfLines`. 但是，您无需打开模块即可确定其`.CountOfLines`. 我也会尽量避免打开表格。

```
? VBE.ActiveVBProject.VBComponents("Form_Form1").CodeModule.CountOfLines
 6 
```

如果您要求`.CountOfLines`一个不存在的模块，如下所示，您可以捕获错误 #9 (' *Subscript out of range* ') 为您提供检查`.HasModule`属性的替代方法：

```
? VBE.ActiveVBProject.VBComponents("bogus").CodeModule.CountOfLines 
```

或者，您可以使用类似于`ModuleExists()`下面概述的最低限度测试的功能来检查代码模块。

注意我不确定我的建议会有多大帮助，因为我很难遵循您的代码。此外，当它调用没有属性的对象时，我不明智地选择单步执行后面的代码，`rptObjList`并对所有未处理的错误感到沮丧。我只是放弃了。`GetDesc()``Description`

```
Public Function ModuleExists(ByVal pModule As String, _
        Optional ByVal pProject As String = "") As Boolean

    Dim blnReturn As Boolean
    Dim objVBProject As Object
    Dim strMsg As String

On Error GoTo ErrorHandler

    If Len(pProject) = 0 Then
        Set objVBProject = VBE.ActiveVBProject
    Else
        Set objVBProject = VBE.VBProjects(pProject)
    End If
    blnReturn = Len(objVBProject.VBComponents(pModule).Name) > 0

ExitHere:
    Set objVBProject = Nothing
    ModuleExists = blnReturn
    Exit Function

ErrorHandler:
    Select Case Err.Number
    Case 9  ' Subscript out of range
        ' no such module; function returns False
    Case Else
        strMsg = "Error " & Err.Number & " (" & Err.Description _
            & ") in procedure ModuleExists"
        MsgBox strMsg
    End Select
    GoTo ExitHere
End Function 
```

# c++ - 无法删除对象数组c ++

> ID：13762594
> 
> 赞同：2
> 
> 时间：2012-12-07T11:55:02.607
> 
> 标签：c++, arrays, oop, instance

您好我在删除对象数组时遇到问题。每当我启动我的代码时，它工作得很好，但是当我关闭时，我收到错误：0xC0000005：访问冲突读取位置 0xcccccccc。代码如下：

我初始化一个对象的实例并立即从中创建一个空数组。

```
Class* classObject[15]; 
```

之后，我在 for 循环中定义了空数组。

```
for(int i = 0; i < 15; i++){
  classObject[i] = new Class();
} 
```

当应用程序关闭时，以下代码应将数组从内存中删除。

```
for(int i = 0; i < 15; i++){
  delete classObject[i];
} 
```

我没有成功关闭，而是收到访问冲突错误。我该如何解决这个问题以及在哪里？另外，是否有其他方法可以在 for 循环中创建对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T12:19:37.100

```
class A
{
    public:
        A():a(0){};
    private:
        int a;
};

int main()
{
    A* arr[15];

    for(int i=0;i<15;i++)
    {
        arr[i] = new A();
    }
    for(int i =0;i<15;i++)
    {
        delete arr[i];
    }

    return 0;
} 
```

我的代码没有任何错误。您之前删除了该点吗？

# c++ - 带 omp 的 std::inner_product

> ID：13762601
> 
> 赞同：2
> 
> 时间：2012-12-07T11:55:38.340
> 
> 标签：c++, stl, openmp

是否可以`std::inner_product()`从 C++ 与`omp.h`库并行化？不幸的是，我无法`__gnu_parallel::inner_product()`在较新版本的 gcc 中使用 available 。我知道我可以实现自己的`inner_product`并将其并行化，但我想使用标准方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T13:29:57.617

简短的回答：没有。

像这样的算法的全部意义`inner_product`在于它们将循环从你身上抽象出来。但为了并行化算法，您需要并行化该循环——通过`#pragma omp parallel for`或通过并行部分。这两种方法在本质上都与代码结构中的循环相关联，因此即使循环可并行化（很可能），您也需要将 OpenMP pragma*放入*函数中以对其应用并行性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T14:48:18.253

跟进 Hristo 的评论，您可以通过在线程`inner_product`上分解数组，调用每个子数组，然后使用某种归约操作来组合子结果来做到这一点

```
#include <iostream>
#include <numeric>
#include <omp.h>

#include <sys/time.h>
void tick(struct timeval *t);
double tock(struct timeval *t);

int main (int argc, char **argv) {
  const long int nelements=1000000;
  long int *a = new long int[nelements];
  long int *b = new long int[nelements];
  int nthreads;
  long int sum = 0;
  struct timeval t;
  double time;

  #pragma omp parallel for
  for (long int i=0; i<nelements; i++) {
        a[i] = i+1;
        b[i] = 1;
  }

  tick(&t);
  #pragma omp parallel 
  #pragma omp single
  nthreads = omp_get_num_threads();

  #pragma omp parallel default(none) reduction(+:sum) shared(a,b,nthreads) 
  {
       int tid = omp_get_thread_num();
       int nitems = nelements/nthreads;
       int start = tid*nitems;
       int end   = start + nitems;
       if (tid == nthreads-1) end = nelements;

       sum += std::inner_product( &(a[start]), a+end, &(b[start]), 0L);
  }
  time = tock(&t);

  std::cout << "using omp: sum = " << sum << " time = " << time << std::endl;

  delete [] a;
  delete [] b;

  a = new long int[nelements];
  b = new long int[nelements];
  sum = 0;

  for (long int i=0; i<nelements; i++) {
        a[i] = i+1;
        b[i] = 1;
  }
  tick(&t);
  sum = std::inner_product( a, a+nelements, b, 0L);
  time = tock(&t);

  std::cout << "single threaded: sum = " << sum << " time = " << time << std::endl;

  std::cout << "correct answer: sum = " << (nelements)*(nelements+1)/2 << std::endl ;

  delete [] a;
  delete [] b;

  return 0;
}

void tick(struct timeval *t) {
    gettimeofday(t, NULL);
}

/* returns time in seconds from now to time described by t */
double tock(struct timeval *t) {
    struct timeval now;
    gettimeofday(&now, NULL);
    return (double)(now.tv_sec - t->tv_sec) + ((double)(now.tv_usec - t->tv_usec)/1000000.);
} 
```

运行它得到的加速比我预期的要好：

```
$ for NT in 1 2 4 8; do export OMP_NUM_THREADS=${NT}; echo; echo "NTHREADS=${NT}";./inner; done

NTHREADS=1
using omp: sum = 500000500000 time = 0.004675
single threaded: sum = 500000500000 time = 0.004765
correct answer: sum = 500000500000

NTHREADS=2
using omp: sum = 500000500000 time = 0.002317
single threaded: sum = 500000500000 time = 0.004773
correct answer: sum = 500000500000

NTHREADS=4
using omp: sum = 500000500000 time = 0.001205
single threaded: sum = 500000500000 time = 0.004758
correct answer: sum = 500000500000

NTHREADS=8
using omp: sum = 500000500000 time = 0.000617
single threaded: sum = 500000500000 time = 0.004784
correct answer: sum = 500000500000 
```

# c# - 如何在 C# 中用另一个 Xml 节点替换一个 Xml 节点

> ID：13762603
> 
> 赞同：2
> 
> 时间：2012-12-07T11:55:37.903
> 
> 标签：c#, xml

如何将一个 XML 文档中的 XML 节点替换为另一个 XML 文档中的另一个 XML 节点。请帮忙..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T12:10:57.100

您可以使用 LINQ to Xml[`XElement.ReplaceWith`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.replacewith.aspx)方法

```
// select node from one doc
XDocument xdoc1 = XDocument.Load(path_to_doc1);    
XElement one = xdoc1.Descendants("One").First(); 

// select node from another doc
XDocument xdoc2 = XDocument.Load(path_to_doc2);
XElement another = xdoc2.Descendants("Another").First(); 

// replace one xml node with another
one.ReplaceWith(another);
xdoc1.Save(path_to_doc1); 
```

# c# - 数据表没有排序没有错误

> ID：13762607
> 
> 赞同：1
> 
> 时间：2012-12-07T11:55:49.657
> 
> 标签：c#, datatable

我正在使用下面的代码对我的数据进行排序，程序运行时没有任何问题，但是行中的数据没有被排序..并且找不到会出现这种情况的原因。

```
DataTable extractedData = new DataTable();
//data added to datatable extractedData
DataView dv = new DataView();
dv =extractedData.AsDataView();
dv.Sort = dv.Table.Columns[10].ColumnName + "  DESC";
extractedData = dv.Table; 
```

下面的`apose.slides`代码用于将代码添加到演示表中。

```
 string val = "";
 int col = 0;
 int row = 0;
 for (int i = 1; i < table.Rows.Count; i++)
 {
    for (int j = 0; j < table.Columns.Count; j++)
    {
        if (j == 0)
         {
             val = extractedData.Rows[row][valuesUsed[col]].ToString();
             string[] removeQuestion = val.Split('[', ']');
             val = removeQuestion[1];
         }
         else
         {
             val = extractedData.Rows[row][valuesUsed[col]].ToString();
             if (val == "-" || val == "")
             {
                 val = extractedData.Rows[row][valuesUsed[col]].ToString();
             }
             else
             {
                 val = Convert.ToString(Math.Round(Convert.ToDouble(extractedData.Rows[row][valuesUsed[col]]), MidpointRounding.AwayFromZero));
             }
         }
         table[j, i].TextFrame.Text = val;
         col++;
     }
     row++;
     col = 0;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:28:14.203

这将起作用：-

```
DataView dv = extractedData.DefaultView;
dv.Sort = extractedData.Columns[10].ColumnName + "  DESC"; 
```

您需要将 DataView 设置为 DataTables 默认视图才能使其正常工作。

这是您也应该查看的链接。

[http://msdn.microsoft.com/en-us/library/system.data.dataview.sort.aspx](http://msdn.microsoft.com/en-us/library/system.data.dataview.sort.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:24:51.797

将代码的最后一行更改为[`dv.toTable()`](http://msdn.microsoft.com/en-us/library/a8ycds2f.aspx)而不是`dv.Table`.

```
DataTable extractedData = new DataTable();
//data added to datatable extractedData
DataView dv = new DataView();
dv = extractedData.DefaultView;
dv.Sort = "ColumnName  DESC";   //mention exact name of your column
//or else
//dv.Sort = extractedData.Columns[9].ColumnName + "  DESC";
extractedData = dv.toTable();  //Instead of dv.Table; 
```

有关信息，请通过此[链接](https://stackoverflow.com/a/3987217/1577396)。

# android - 在android eclipse中捏缩放布局

> ID：13762608
> 
> 赞同：0
> 
> 时间：2012-12-07T11:55:50.647
> 
> 标签：android, eclipse, android-layout, imageview, pinchzoom

我有一个布局，其中包括两个 ImageView。我想创建一种简单的方法来在 ImageViews 上包含捏缩放。我看过一些代码，但它们只适用于单个 ImageView。是否可以使用 ImageViews 在布局上进行这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:58:37.533

编写下面的代码，将两个图像拖到您的活动文件中，并在其中实现捏缩放代码。

```
windowwidth = getWindowManager().getDefaultDisplay().getWidth();
windowheight = getWindowManager().getDefaultDisplay().getHeight();

tv1 = (ImageView)findViewById(R.id.image);
tv1.setOnTouchListener(new View.OnTouchListener() {         

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        layoutParams1 = (RelativeLayout.LayoutParams) tv1.getLayoutParams();
        switch(event.getActionMasked())
        {
            case MotionEvent.ACTION_DOWN:
                break;
            case MotionEvent.ACTION_MOVE:
                int x_cord = (int) event.getRawX();
                int y_cord = (int) event.getRawY();
                if (x_cord > windowwidth) {
                    x_cord = windowwidth;
                }
                if (y_cord > windowheight) {
                    y_cord = windowheight;
                }
                layoutParams1.leftMargin = x_cord - 25;
                layoutParams1.topMargin = y_cord - 75;
                tv1.setLayoutParams(layoutParams1);
                break;
            default:
                break;
        }
        return true;
    }
});

tv2 = (ImageView)findViewById(R.id.image1);
tv2.setOnTouchListener(new View.OnTouchListener() {         

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        layoutParams2 = (RelativeLayout.LayoutParams) tv2.getLayoutParams();
        switch(event.getActionMasked())
        {
            case MotionEvent.ACTION_DOWN:
                break;
            case MotionEvent.ACTION_MOVE:
                int x_cord = (int) event.getRawX();
                int y_cord = (int) event.getRawY();
                if (x_cord > windowwidth) {
                    x_cord = windowwidth;
                }
                if (y_cord > windowheight) {
                    y_cord = windowheight;
                }
                layoutParams2.leftMargin = x_cord - 25;
                layoutParams2.topMargin = y_cord - 75;
                tv2.setLayoutParams(layoutParams2);
                break;
            default:
                break;
        }
        return true;
    }
}); 
```

XML 文件：-

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <ImageView android:layout_width="50sp" android:layout_height="50sp"
        android:id="@+id/image" android:src="@drawable/image">
    </ImageView>
    <ImageView android:layout_y="30dip" android:layout_x="118dip"
        android:layout_width="50sp" android:layout_height="50sp" android:id="@+id/image1"
        android:src="@drawable/image1">
    </ImageView>
</RelativeLayout> 
```

有关更多信息，请参见下面的链接。

[拖放两个图像](https://stackoverflow.com/questions/11027792/android-drag-and-drop-images-on-the-screen/11028521#11028521)

# visual-studio - Webdeploy 发布配置文件密码保存

> ID：13762615
> 
> 赞同：9
> 
> 时间：2012-12-07T11:56:19.303
> 
> 标签：visual-studio

我将发布配置文件连同所有登录信息一起保存到 .xml 中。但是当我将此 XML 导入另一台计算机并尝试发布时，它会说我的密码不正确。

如何将密码正确保存到发布配置文件并与其他计算机兼容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T22:47:23.247

我的猜测是，该程序故意使用当前 PC 的“盐”来混淆密码并生成唯一的哈希。因此，通过配置文件发布功能防止密码被盗。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-28T14:49:24.050

如 user1785999 所述，您可以将密码保存为纯文本，只需将密码元素添加到您的 .pubxml 文件中：

```
 <UserName>YourName</UserName>
    <Password>YourPassword</Password> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-22T06:09:15.233

如果您希望发布配置文件在不同的计算机上工作，您需要以纯文本形式保存密码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-08-08T08:50:44.013

只是为了添加一个额外的答案，这可能是特定于 .pubxml 的版本，但您可以添加这些行以确保 Visual Studio 保存密码。

确保对本地帐户使用“.\”前缀，对 Active Directory 帐户使用“domain\”前缀。

```
<UserName>.\PubUser1</UserName>
<UserPWD>Password1234</UserPWD>
<_SavePWD>True</_SavePWD> 
```

# jquery - 相对于非父 div 定位 div - 这可能吗？

> ID：13762616
> 
> 赞同：3
> 
> 时间：2012-12-07T11:56:19.907
> 
> 标签：jquery, html, css

是否可以将一个`div`相对于另一个`div`不是它的父母的相对定位？例如：

```
<div id="header"><!-- --></div>
<div id="content"><!-- --></div>
<div id="footer"><<!-- --></div> 
```

在上面的代码中，可以`#footer`相对定位到`#header`?

**更新**

我问是因为我打算实现的设计的语义结构与我想要呈现它的方式不匹配。在视觉上，我将在页面顶部有一个菜单和一个隐藏的 div，它会在单击事件时滑入菜单上方。因此，我需要打乱顺序或 div 以使 a`#menu`相对位于 a 下方，并且在 jQuery事件上滑动`#header`时将保持相对定位。`#header``slideToggle()`

```
<div id="menu"><!-- --></div>
<div id="header"><!-- --></div>
<div id="content"><!-- --></div>
<div id="footer"><<!-- --></div> 
```

`#header`应该固定在窗口的顶部。`#menu`应该相对于`#header`这样定位，当`#header`滑入时，`#menu`向下滑动相同的距离。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:00:33.680

是的。您还没有说您希望它们如何定位，但是您可以像这样获得当前`#header`使用的位置[`offset`](http://api.jquery.com/offset/)：

```
var pos = $("#header").offset(); 
```

...您可以`#footer`通过以下任一方式设置所需的位置`css`：

```
$("#footer").css({
    position: "absolute",
    left:     /* some value here*/,
    top:      /* some value here*/
}); 
```

...或通过[`offset`](http://api.jquery.com/offset/#offset2)：

```
$("#footer").offset({
    left:     /* some value here*/,
    top:      /* some value here*/
}); 
```

...根据标题的位置，您在哪里（在任何一种情况下）填写所需的左侧和顶部值。

`offset`接受`left`和的数字`top`。[Archer](https://stackoverflow.com/users/1023618/archer)在评论中告诉我们，这`css`同样适用并`"px"`为我们添加，这似乎确实有效，尽管我在文档中没有看到它，所以我总是把“px”放在自己身上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T13:41:55.113

[如何在 jQuery 中移动 HTML 元素？](https://stackoverflow.com/questions/4428312/jquery-move-an-element)

这个问题提供了我需要的答案。基本上你可以使用 jQuery 在页面加载时移动 DOM 中的元素；请注意，在尝试操作 DOM 之前允许页面先加载很重要。

# networking - 如何允许用户输入 IPv6 地址的子网掩码？真的有必要吗？

> ID：13762617
> 
> 赞同：0
> 
> 时间：2012-12-07T11:56:18.500
> 
> 标签：networking, web, ipv6

我正在开发的应用程序需要同时支持 IPv4 和 IPv6 页面。该应用程序公开了一个网页供用户配置服务器详细信息，如下所示。这非常适合 IPv4 地址。

由于 IPv6 地址将子网嵌入 IP 地址本身，因此如何接受子网信息有点令人困惑。

![输入表格](../Images/938d424e74257890df0dd2ad313290f0.png)

我可以采取以下方法

*   用户有一个 IPv6 地址，其中包含包括子网掩码在内的信息。让用户在屏幕上输入全部内容，我们将禁用 IPv4 子网掩码文本框。
*   用户有一个没有子网信息的 IPv6 地址。我们将允许用户在子网文本框中输入子网信息，然后将这些信息合并在一起以准备完整的 IPv6 地址。

第二种方法方法似乎并不优雅。据我了解，简单地`ipconfig`从控制台获取，`IPv6`它显示的地址也包含子网信息。这样用户就可以很容易地在输入页面中输入这些信息。这样做的标准方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:18:27.570

前缀长度（子网掩码）绝不是地址的一部分。就像您可以在 IPv4 中将 address+prefixlen 写为 192.0.2.0/24 您在 IPv6 中写 2001:db8:0:2::/64 一样。比旧的 255.255.255.0 子网掩码表示法容易得多。

我会在一个文本框中同时对 IPv4 和 IPv6 使用更方便的 (CIDR) 表示法。复制和粘贴时容易得多:-)

# c# - 整数存储在内存中是否与对象相同？

> ID：13762618
> 
> 赞同：3
> 
> 时间：2012-12-07T11:56:25.593
> 
> 标签：c#

当我们声明一个like

```
int myInt = 5; 
```

是 myInt 是对 int 类型对象的引用。

设置对对象的引用是否与设置类的方式相同？

```
StudentClass c = new StudentClass() 
```

c 是一个引用，它指向我们学生类的位置？

唯一的区别是在参数中传递时如何处理它。

我知道类对象是如何工作的，只是试图理解原始类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T11:58:50.640

不，an`int`是值类型（即结构），因此变量包含整数值本身，而不是对存储值的区域的引用。

更多阅读：[类型（C# 参考）](http://msdn.microsoft.com/en-us/library/3ewxz6et%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:00:48.377

了解[值类型和引用类型之间的区别](http://www.albahari.com/valuevsreftypes.aspx)

# c# - JQuery 方法控制进入成功块，但 msg.d 显示未定义

> ID：13762619
> 
> 赞同：0
> 
> 时间：2012-12-07T11:56:25.413
> 
> 标签：c#, asp.net, jquery-ui, jquery

我在 .net1.1 onload 的 body 中调用这个 javascript 方法“test”。我的 webmethod 返回字符串数据，但我无法在我的 Jquery 方法中获取该数据。在 HiddenPage.aspx ===============================

功能测试（） {

```
 debugger;

$.ajax({
                type: "POST",
                url: "HiddenPage.aspx/GetServerTime",
                //async : false,
                //data: "i=1",
                contentType: "application/json",
                //dataType: "text",
                success: function(msg) 
                // error: function(, textStatus, errorThrown) {
                {
                    debugger;
                         alert(msg.d);

                }, 
                error: function(msg) 
                //complete: function (jqXHR, textStatus) {

                {
                   debugger;
                   alert(msg.d); 
                    alert("Error! Try again..."); 
                    //return false;
                }

            })
     // return '';
  } 
```

在 HiddenPage.aspx.cs 我放了 webmthod.My WebMethod 是：-

```
 [WebMethod()]
    public static string GetServerTime()
    {

        return DateTime.Now.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:13:32.593

您能否发布您的返回数据代码。

我建议您创建一个 ASMX 文件以使用 Web 服务。它很容易使用。创建一个 web 服务，然后确保在 web 方法之前在 web 服务中添加以下行。

```
[System.Web.Script.Services.ScriptService] 
```

之后，您可以添加与您编写的相同的 Web 方法。

你的 jquery 应该是这样的。

```
 $.ajax({
            type: "POST",
            url: "webservice/WebService1.asmx/GetServerTime",
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: OnSuccessCall,
            error: OnErrorCall
        });        

    function OnSuccessCall(msg) {

        alert(msg.d);

    }

    function OnErrorCall(msg) {
        alert(msg.status + " " + msg.statusText);
    } 
```

它可能会帮助你。快乐编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:23:45.183

尝试以下

```
$.ajax({
  type: "POST",
  url: "HiddenPage.aspx/GetServerTime",
  data: "{}",
  contentType: "application/json; charset=utf-8",
  dataType: "json",
  success: function(msg) {
            alert(msg.d);
    // Do something interesting here.
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:08:41.440

不太确定您的返回数据如何，但您可以尝试以下方法。

```
$.ajax({
    type: "POST",
    url: "HiddenPage.aspx/GetServerTime",
    //async : false,
    //data: "i=1",
    contentType: "application/json",
    dataType: "html",
    success: function(data){
        alert(data);
    },
    error: function(jqXHR, textStatus) {
        debugger;
        if (jqXHR.status === 0) alert('Not connect.\n Verify Network.');
        else if (jqXHR.status == 404) alert('Requested page not found. [404]');
        else if (jqXHR.status == 500) alert('Internal Server Error [500].');
        else if (textStatus === 'parsererror') alert('Requested JSON parse failed.');
        else if (textStatus === 'timeout') alert('Time out error.');
        else if (textStatus === 'abort') alert('Ajax request aborted.');
        else alert('Uncaught Error.\n' + jqXHR.responseText);
        //return false;
    }
    //return '';
}​ 
```

# handlebars.js - 除非收到参数，否则 HandlebarsJS 不会输出 html 模板

> ID：13762620
> 
> 赞同：0
> 
> 时间：2012-12-07T11:56:37.580
> 
> 标签：handlebars.js

我有这个代码：

```
if (this.template) {
        var template = Handlebars.compile( $(this.template).html() );
        $(this.el).html(template());
    } 
```

使用此模板：

```
<script id="tmpl-nav-account" type="text/x-handlebars-template">
{{#this}}
<div class="nav-account">
    topbar
</div>
{{/this}} 
```

但是，如果在没有参数的情况下运行 'template()' 函数，则不会有任何输出。然而，如果我传入类似“template('ben')”的内容，它会输出静态 HTML。有人有什么想法吗？

template() 是否总是必须传递一些东西才能呈现模板？

编辑：

如果我从模板中删除 {{#this}}，那么它可以在没有参数的情况下工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:16:35.057

模板的`this`顶层是您提供给已编译模板函数的参数。所以，鉴于此：

```
var o = { ... };
var t = Handlebars.compile(some_template_text);
t(o); 
```

`this`将`o`位于模板的顶层。因此，如果您说`template()`,`this`在`undefined`模板内并且`{{#this}}`不会做任何事情，因为`undefined`在布尔上下文中是 false 。

如果您使用此模板，您可以清楚地看到这一点：

```
<script id="tmpl-nav-account" type="text/x-handlebars-template">
    {{#this}}
        <div class="nav-account">
            {{this.where_is}}
        </div>
    {{/this}}
</script>​ 
```

和这个JavaScript：

```
var t = Handlebars.compile($('#tmpl-nav-account').html());
console.log(t());
console.log(t({ where_is: 'pancakes house?' }));​ 
```

演示：http: [//jsfiddle.net/ambiguous/fS8c9/](http://jsfiddle.net/ambiguous/fS8c9/)

# c++ - 是否有一个标准的 C++ 函数，类似于地址运算符 &？

> ID：13762622
> 
> 赞同：3
> 
> 时间：2012-12-07T11:56:54.983
> 
> 标签：c++, stl, functor, memory-address

是否有一个标准的 C++ 函数，它类似于 Address-of 运算符 &，我可以将它用作带有 std::transform 和 std::compose1 等 stl 实体的函数对象？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T12:00:43.643

[`std::addressof`](http://en.cppreference.com/w/cpp/memory/addressof)可能适合您的目的。请注意，`operator&`如果该类型具有该运算符的重载，则该行为与普通的行为略有不同。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-07T11:58:38.457

我想你要找的是[`std::addressof`](http://en.cppreference.com/w/cpp/memory/addressof).

# r - 从给定的分位数计算概率

> ID：13762623
> 
> 赞同：0
> 
> 时间：2012-12-07T11:56:57.417
> 
> 标签：r, statistics

`df`给定一组存储在列下的数据框中的实数`A`，以及该集合中的一个元素`r`，您将如何求解以下“方程” `q`：

`r = quantile(df$A, q)`

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T12:04:10.193

在`?quantile`我们可以阅读

> 也可以看看
> 
> ecdf 用于分位数为倒数的经验分布

因此：

```
x <- rnorm(100)

r <- quantile(x, 0.05)
#       5% 
#-1.469996 

Fn <- ecdf(x)
Fn(r)
#[1] 0.05 
```

# linux - 与 cat 相比，Bash while read 循环非常慢，为什么？

> ID：13762625
> 
> 赞同：13
> 
> 时间：2012-12-07T11:56:59.093
> 
> 标签：linux, bash, performance, shell

这里有一个简单的测试脚本：

```
while read LINE; do
        LINECOUNT=$(($LINECOUNT+1))
        if [[ $(($LINECOUNT % 1000)) -eq 0 ]]; then echo $LINECOUNT; fi
done 
```

当我这样做时`cat my450klinefile.txt | myscript`，CPU 锁定在 100%，它每秒可以处理大约 1000 行。大约 5 分钟来处理`cat my450klinefile.txt >/dev/null`半秒内的事情。

有没有**更有效的方法**来做到这一点。我只需要从标准输入读取一行，计算字节数，然后将其写入命名管道。但即使是这个例子的速度也慢得令人难以置信。

每 1Gb 的输入行我需要执行一些更复杂的脚本操作（关闭和打开一些数据正在馈送到的管道）。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-07T13:38:59.983

之所以`while read`这么慢，是因为 shell 需要对每个字节进行系统调用。它不能从管道中读取大缓冲区，因为 shell 不能从输入流中读取多于一行，因此必须将每个字符与换行符进行比较。如果您`strace`在`while read`循环上运行，您可以看到此行为。这种行为是可取的，因为它可以可靠地执行以下操作：

```
while read size; do test "$size" -gt 0 || break; dd bs="$size" count=1 of=file$(( i++ )); done 
```

其中循环内的命令从 shell 读取的同一流中读取。如果 shell 通过读取大缓冲区消耗了大量数据，则内部命令将无法访问该数据。一个不幸的副作用是`read`速度慢得离谱。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T12:01:56.380

这是因为`bash`在这种情况下，脚本是被解释的，并没有真正针对速度进行优化。您通常最好使用以下外部工具之一：

```
awk 'NR%1000==0{print}' inputFile 
```

它与您的“每 1000 行打印一次”样本相匹配。

如果您想（对于每一行）输出行数（以字符为单位，然后是行本身），并将其通过另一个进程传递，您也可以这样做：

```
awk '{print length($0)" "$0}' inputFile | someOtherProcess 
```

像`awk`, `sed`,`grep`和`cut`更强大`perl`的工具比解释的 shell 脚本更适合这些任务。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T12:34:28.593

perl 对每个字符串的字节数的解决方案：

```
perl -p -e '
use Encode;
print length(Encode::encode_utf8($_))."\n";$_=""' 
```

例如：

```
dd if=/dev/urandom bs=1M count=100 |
   perl -p -e 'use Encode;print length(Encode::encode_utf8($_))."\n";$_=""' |
   tail 
```

为我工作 7.7Mb/s

比较使用了多少脚本：

```
dd if=/dev/urandom bs=1M count=100 >/dev/null 
```

以 9.1Mb/s 运行

似乎脚本没那么慢:)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-07T12:03:50.597

不太确定你的脚本应该做什么。因此，这可能不是您问题的答案，而是更多通用提示。

不要`cat`您的文件并将其通过管道传输到您的脚本，而是在使用 bash 脚本从文件中读取时这样做：

```
while read line    
do    
    echo $line
done <file.txt 
```

# php - FEDEX Rates API - 解析肥皂响应

> ID：13762627
> 
> 赞同：0
> 
> 时间：2012-12-07T11:57:02.940
> 
> 标签：php, api, soap, fedex

我正在使用 FEDEX Rates API 并有以下 SOAP 响应。我之前和下面从未解析过肥皂是我的尝试，但我没有结果。有人可以帮忙吗？

```
<soapenv:Envelope>
  <env:Header/>
  <soapenv:Body>
    <v10:RateReply>
      <v10:HighestSeverity>SUCCESS</v10:HighestSeverity>
      <v10:Notifications>
        <v10:Severity>SUCCESS</v10:Severity>
        <v10:Source>crs</v10:Source>
        <v10:Code>0</v10:Code>
        <v10:Message>Request was successfully processed. </v10:Message>
        <v10:LocalizedMessage>Request was successfully processed. </v10:LocalizedMessage>
      </v10:Notifications>
      <ns1:TransactionDetail>
        <ns1:CustomerTransactionId> *** Rate Available Services Request v10 using PHP ***</ns1:CustomerTransactionId>
      </ns1:TransactionDetail>
      <ns1:Version>
        <ns1:ServiceId>crs</ns1:ServiceId>
        <ns1:Major>10</ns1:Major>
        <ns1:Intermediate>0</ns1:Intermediate>
        <ns1:Minor>0</ns1:Minor>
      </ns1:Version>
      <v10:RateReplyDetails>
        <v10:ServiceType>INTERNATIONAL_FIRST</v10:ServiceType>
        <v10:PackagingType>YOUR_PACKAGING</v10:PackagingType>
        <v10:DeliveryStation>DKKA </v10:DeliveryStation>
        <v10:DeliveryDayOfWeek>MON</v10:DeliveryDayOfWeek>
        <v10:DeliveryTimestamp>2012-12-10T09:00:00</v10:DeliveryTimestamp>
        <v10:CommitDetails>
          <v10:CommodityName>DOCUMENTS</v10:CommodityName>
          <v10:ServiceType>INTERNATIONAL_FIRST</v10:ServiceType>
          <v10:CommitTimestamp>2012-12-10T09:00:00</v10:CommitTimestamp>
          <v10:DayOfWeek>MON</v10:DayOfWeek>
          <v10:DestinationServiceArea>A4</v10:DestinationServiceArea>
          <v10:BrokerToDestinationDays>0</v10:BrokerToDestinationDays>
          <v10:CommitMessages>
            <v10:Code>134</v10:Code>
            <v10:Message>REQUEST COMPLETED</v10:Message>
          </v10:CommitMessages>
          <v10:DeliveryMessages> 9:00 A.M. IF NO CUSTOMS DELAY</v10:DeliveryMessages>
          <v10:DocumentContent>DOCUMENTS_ONLY</v10:DocumentContent>
          <v10:RequiredDocuments>INTERNATIONAL_AIRWAY_BILL</v10:RequiredDocuments>
        </v10:CommitDetails>
        <v10:DestinationAirportId>BUF</v10:DestinationAirportId>
        <v10:IneligibleForMoneyBackGuarantee>false</v10:IneligibleForMoneyBackGuarantee>
        <v10:OriginServiceArea>AM</v10:OriginServiceArea>
        <v10:DestinationServiceArea>A4</v10:DestinationServiceArea>
        <v10:SignatureOption>INDIRECT</v10:SignatureOption>
        <v10:ActualRateType>PAYOR_ACCOUNT_SHIPMENT</v10:ActualRateType>
        <v10:RatedShipmentDetails></v10:RatedShipmentDetails>
        <v10:RatedShipmentDetails></v10:RatedShipmentDetails>
      </v10:RateReplyDetails>
      <v10:RateReplyDetails>
        <v10:ServiceType>INTERNATIONAL_PRIORITY</v10:ServiceType>
        <v10:PackagingType>YOUR_PACKAGING</v10:PackagingType>
        <v10:DeliveryStation>DKKA </v10:DeliveryStation>
        <v10:DeliveryDayOfWeek>MON</v10:DeliveryDayOfWeek>
        <v10:DeliveryTimestamp>2012-12-10T10:30:00</v10:DeliveryTimestamp>
        <v10:CommitDetails>
          <v10:CommodityName>DOCUMENTS</v10:CommodityName>
          <v10:ServiceType>INTERNATIONAL_PRIORITY</v10:ServiceType>
          <v10:CommitTimestamp>2012-12-10T10:30:00</v10:CommitTimestamp>
          <v10:DayOfWeek>MON</v10:DayOfWeek>
          <v10:DestinationServiceArea>A4</v10:DestinationServiceArea>
          <v10:BrokerToDestinationDays>0</v10:BrokerToDestinationDays>
          <v10:CommitMessages>
            <v10:Code>134</v10:Code>
            <v10:Message>REQUEST COMPLETED</v10:Message>
          </v10:CommitMessages>
          <v10:DeliveryMessages>10:30 A.M. IF NO CUSTOMS DELAY</v10:DeliveryMessages>
          <v10:DocumentContent>DOCUMENTS_ONLY</v10:DocumentContent>
          <v10:RequiredDocuments>INTERNATIONAL_AIRWAY_BILL</v10:RequiredDocuments>
        </v10:CommitDetails>
        <v10:DestinationAirportId>BUF</v10:DestinationAirportId>
        <v10:IneligibleForMoneyBackGuarantee>false</v10:IneligibleForMoneyBackGuarantee>
        <v10:OriginServiceArea>AM</v10:OriginServiceArea>
        <v10:DestinationServiceArea>A4</v10:DestinationServiceArea>
        <v10:SignatureOption>INDIRECT</v10:SignatureOption>
        <v10:ActualRateType>PAYOR_ACCOUNT_SHIPMENT</v10:ActualRateType>
        <v10:RatedShipmentDetails></v10:RatedShipmentDetails>
        <v10:RatedShipmentDetails></v10:RatedShipmentDetails>
      </v10:RateReplyDetails>
      <v10:RateReplyDetails>
        <v10:ServiceType>INTERNATIONAL_ECONOMY</v10:ServiceType>
        <v10:PackagingType>YOUR_PACKAGING</v10:PackagingType>
        <v10:DeliveryStation>DKKA </v10:DeliveryStation>
        <v10:DeliveryDayOfWeek>WED</v10:DeliveryDayOfWeek>
        <v10:DeliveryTimestamp>2012-12-12T16:30:00</v10:DeliveryTimestamp>
        <v10:CommitDetails>
          <v10:CommodityName>DOCUMENTS</v10:CommodityName>
          <v10:ServiceType>INTERNATIONAL_ECONOMY</v10:ServiceType>
          <v10:CommitTimestamp>2012-12-12T16:30:00</v10:CommitTimestamp>
          <v10:DayOfWeek>WED</v10:DayOfWeek>
          <v10:DestinationServiceArea>A4</v10:DestinationServiceArea>
          <v10:BrokerToDestinationDays>0</v10:BrokerToDestinationDays>
          <v10:CommitMessages>
            <v10:Code>134</v10:Code>
            <v10:Message>REQUEST COMPLETED</v10:Message>
          </v10:CommitMessages>
          <v10:DeliveryMessages> 4:30 P.M. IF NO CUSTOMS DELAY</v10:DeliveryMessages>
          <v10:DocumentContent>DOCUMENTS_ONLY</v10:DocumentContent>
          <v10:RequiredDocuments>INTERNATIONAL_AIRWAY_BILL</v10:RequiredDocuments>
        </v10:CommitDetails>
        <v10:DestinationAirportId>BUF</v10:DestinationAirportId>
        <v10:IneligibleForMoneyBackGuarantee>false</v10:IneligibleForMoneyBackGuarantee>
        <v10:OriginServiceArea>AM</v10:OriginServiceArea>
        <v10:DestinationServiceArea>A4</v10:DestinationServiceArea>
        <v10:SignatureOption>INDIRECT</v10:SignatureOption>
        <v10:ActualRateType>PAYOR_ACCOUNT_SHIPMENT</v10:ActualRateType>
        <v10:RatedShipmentDetails></v10:RatedShipmentDetails>
        <v10:RatedShipmentDetails></v10:RatedShipmentDetails>
      </v10:RateReplyDetails>
    </v10:RateReply>
  </soapenv:Body>
</soapenv:Envelope> 
```

代码：

```
$fedex_xml = simplexml_load_string($fedex_response); 
$RateReplyDetails = $fedex_xml->children("soapenv", true)->Body->children("v10", true)->RateReply->children()->RateReplyDetails;
var_dump($RateReplyDetails);        

foreach ($RateReplyDetails as $details) {
     print_r($details);
} 
```

我正在尝试遍历`<v10:RateReplyDetails>`节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:42:56.427

我在正确的路线上，请在下面回答：

```
$fedex_xml = simplexml_load_string($fedex_response);

$RateReply = $fedex_xml->children("env", true)->Body->children("v13", true)->RateReply;
foreach($RateReply->RateReplyDetails as $details){

} 
```

# javascript - 简单的 Javascript 验证

> ID：13762628
> 
> 赞同：1
> 
> 时间：2012-12-07T11:57:02.997
> 
> 标签：javascript, validation

我有一个日期字段，例如 dd/mm/yyyy 。我有验证代码，一旦日期不是正确的格式 dd/mm/yyyy，就不允许用户继续

我想要做的是有一个新字段，该字段的默认值 dd/mm/yyyy 。我希望用户能够像 dd/mm/yyyy 一样离开此字段并继续，否则如果他们在字段中输入其他任何内容，则它需要是有效日期。所以接受 dd/mm/yyyy 和任何有效日期，例如 12/12/2012

```
else if(!validateDate(document.lending.date.value)){alert("Please enter a valid date. The date must be of the format dd/mm/yyyy");document.lending.date.focus();return false;}                                                          

function validateDate(thedate){
 if(thedate.length <11)
    {
try{
  day = thedate.substring(0,2);
  mmonth = thedate.substring(3,5);
  year = thedate.substring(6,10);
  if((thedate.charAt(2)!="/") || (thedate.charAt(5)!="/") || (day<1) || (day>31) ||     (mmonth<1) || (mmonth>12) || (year<1999) || (year>9999) ||     (!validateNumberWithoutDecimal(day)) || (!validateNumberWithoutDecimal(mmonth)) ||     (!validateNumberWithoutDecimal(year)))
     {
       return false;
     }
  else
     return true;
}catch(e){return false;}
 }
 else
 return false;

} 
```

我正在考虑编写一个新函数 validateMyNewDate 并这样做，以便它接受 dd/mm/yyyy 以及验证日期。现在对我的逻辑有点困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T11:59:25.367

您可以尝试使用`Date`构造函数进行验证：

```
var isValidDate = function(str) {
    return !!new Date(str).getTime();
} 
```

它应该适用于“dd/mm/yyyy”格式，f.ex：

```
isValidDate('12/12/1999'); // true
isValidDate('12/52/1999'); // false 
```

如果您想确保用户使用了准确的 'dd/mm/yyyy' 格式，可以将其与正则表达式结合使用：

**更新**：添加，因此它还验证“dd/mm/yyyy”的默认输入。

```
var isValidDate = function(str) {
    return str == 'dd/mm/yyyy' || 
           ( /^\d{2}\/\d{2}\/\d{4}$/.test(str) && new Date(str).getTime() );
} 
```

# asp.net-mvc-4 - MVC 4 - 如何更改默认 SQL Server Express 数据库位置

> ID：13762630
> 
> 赞同：1
> 
> 时间：2012-12-07T11:57:14.553
> 
> 标签：asp.net-mvc-4, visual-studio-2012, sql-server-express, membership

在 VS 2012 中，我从 Internet 应用程序模板开始创建了一个新的 MVC 4 项目，然后将其属性更改为使用 SQL Server Express 而不是 LocalDB，然后尝试成功注册新用户。

首先，项目在文件夹中创建了自己的成员数据库`App_data`，但出于部署原因我想更改数据库位置，所以我将数据库物理文件从 移动`C:\MyProject\App_Data\`到`C:\MyData`并修改了文件中的相关路径`web.config`。为了确保 SQL Server Express 实例可以访问数据库，我在属性安全选项卡中添加了我自己的具有完全访问权限的用户帐户，然后在 SQL Server Management Studio 中成功显示了它的数据。

现在，当我运行项目并单击“登录”链接时，调试器停止`LazyInitializer.EnsureInitialized`并失败并出现错误；错误消息的内部异常说：

> *数据库“C:\MyProject\App_Data\aspnet-MyProject-20121206123456.mdf”已经存在。选择不同的数据库名称。
> 无法将文件“C:\MyData\aspnet-MyProject-20121206123456.mdf”附加为数据库“aspnet-MyProject-20121206123456.mdf”*

我检查了所有项目以找到任何不同的数据库连接设置，但一无所获。

在VS中，当我使用服务器资源管理器查看数据库表数据时，当我右键单击其中一个显示的表时，我找不到“显示数据”选项，当我转到`C:\MyData\`文件夹查看物理数据库文件属性时，在安全选项卡，我发现每次运行项目时，我使用完全访问权限的帐户都被删除了。

浏览器还**显示下一个异常文本**：

```
The data provider. Net Framework requested was not found. It may not be installed. 
```

C:\MyProject\Filters\InitializeSimpleMembershipAttribute.cs Ligne : 42

```
Ligne 40 :                 }
Ligne 41 : 
Ligne 42 :                     WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true);
Ligne 43 :                 }
Ligne 44 :                 catch (Exception ex) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:39:36.940

它看起来像一个不能识别 SQL Server 2012 Express 实例的 Visual Studio 2012 错误。我已经下载了 Microsoft WebMatrix2 并使用它来加载网站，并且可以使用移动的会员数据库成功登录。

有了这个错误，我已经失去了 2 天的时间来寻找解决方案。

# android - 翻译动画闪烁

> ID：13762632
> 
> 赞同：1
> 
> 时间：2012-12-07T11:57:18.283
> 
> 标签：android, android-animation

我在 Android 中遇到以下动画问题：我想为一些从右到左移动进出屏幕的船制作动画。这些船上面写着文字，这些文字必须与船一起移动。我实现的是一个有 4 艘船的布局，并使用平移动画将它们向左移动 1 个长度，然后重复此动画。中间的船有一个特定的文字，右边的船有第二个文字，所以当船进入屏幕时，用户可以看到它。但是，当动画重复时，右侧船的文本将绘制在新的中心船上，这会导致闪烁效果，而船动画看起来很好。请看[视频](http://www.youtube.com/watch?v=IYtsJazta84)例如。该视频是从模拟器录制的，它有点夸大了问题，在实际设备上它更像是一种闪烁效果。

我已经尝试了在 SO 上找到的几种可能的解决方案，例如`.setFillAfter(true)`延迟绘制下一次重复，但这些都不能解决问题。有谁知道这个问题的解决方案？

# php - 将 php 与 J2me Post 或 Get 一起使用

> ID：13762656
> 
> 赞同：-1
> 
> 时间：2012-12-07T11:58:56.813
> 
> 标签：php, java-me

我使用 POST 和 GET 创建的 j2me 应用程序可以从 ServerSide(php) 读取任意长度的数据。移动设备在线程中等待，直到所有数据都从服务器发送。但是，当我将数据从 Mobile 发送到 ServerSide 时，服务器无法等待移动设备发送其所有内容。当从移动设备发送的数据太长时，我在服务器端接收到一个空字符串。我期望服务器端应该包含移动设备发送的全部或一半字符串。

我怎样才能让服务器等待所有内容到达？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:49:51.527

这完全取决于您的 Web 服务器的配置。由于所有传入数据都在请求标头中发送到服务器 - 您应该增加请求超时。例如，在 nginx 中，它是由`client_header_timeout`和`client_body_timeout` [配置参数](http://nginx.org/en/docs/http/ngx_http_core_module.html)组成的。

# backbone.js - 一定长度的集合

> ID：13762666
> 
> 赞同：1
> 
> 时间：2012-12-07T12:00:06.850
> 
> 标签：backbone.js, underscore.js

无论如何我们可以将一定长度的集合传递给视图吗？

我正在尝试实现分页，这就是为什么我不想传递整个集合。

```
 var <new View> = new App.Views.photos({ collection: <Collection of certain length> }); 
```

这可能吗？我不介意添加另一种方法来返回一定长度的集合。

更新：

我创建了另一个具有相同模型的集合，并在每次分页时将其用作缓冲区。让我知道这是否是个好主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:39:10.423

您可以为您的集合实现一个分页方法，该方法返回集合的子集（“页面”）。

像这样的东西（未经测试）：

```
var PhotoCollection = Backbone.Collection.extend({
  model:TestModel,
  getPage: function(pageNumber, pageLength) {

    pageLength = pageLength || 10;

    var first = (pageNumber - 1) * pageLength;
    var last = Math.min(pageNumber * pageLength, this.length);
    var page = [];

    if(first <= this.length) {
        for(var i=first;i<last;i++) {
            page.push(this.at(i));
        }
    }

    return new PhotoCollection(page);
  }
}); 
```

因此，您可以从集合中检索任何“页面”：

```
//first page using default size of 10
photos.getPage(0);

//second page with page size 25
photos.getPage(1, 25); 
```

# python - 如何使用 REST API 从 Python 脚本更新 Jira v5.1 中的问题

> ID：13762667
> 
> 赞同：3
> 
> 时间：2012-12-07T12:00:10.887
> 
> 标签：python, rest, jira

我希望能够使用 REST api 从 Python 脚本更新 Jira v5.1 中的问题。我有以下代码来提取现有问题的信息，效果很好：

```
import urllib2
import urllib
import cookielib
import json

serverURL = 'http://jiraserver.com'

# Get the authentication cookie using the REST API
cj = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
authURL = serverURL + '/rest/auth/latest/session'
creds = {'username' : jirauser, 'password' : passwd}
req = urllib2.Request(authURL)
req.add_data(json.dumps(creds))
req.add_header("Content-type", "application/json")
req.add_header("Accept", "application/json")
fp = opener.open(req)
fp.close()

queryURL = serverURL + '/rest/api/latest/issue/SANDBOX-150'
req = urllib2.Request(queryURL)
req.add_header("Content-type", "application/json")
req.add_header("Accept", "application/json")
fp = opener.open(req)
data = json.load(fp)
fp.close() 
```

我想扩展它以便能够更新相同的问题，并且我有以下代码：

```
queryURL = serverURL + '/rest/api/latest/issue/SANDBOX-150'

issueUpdate =  {
    'update': {
        'comment': [
            {
                'add': {
                    'body': 'this is a comment'
                }
            }
        ]  
    }
}
req = urllib2.Request(queryURL)
req.add_data(json.dumps(issueUpdate))
req.add_header("Content-type", "application/json")
req.add_header("Accept", "application/json")
fp = opener.open(req)
fp.close() 
```

当我尝试执行代码时，我收到以下错误消息：

```
File "/usr/lib64/python2.6/urllib2.py", line 397, in open
response = meth(req, response)
    File "/usr/lib64/python2.6/urllib2.py", line 510, in http_response
        'http', request, response, code, msg, hdrs)

    File "/usr/lib64/python2.6/urllib2.py", line 435, in error
        return self._call_chain(*args)

    File "/usr/lib64/python2.6/urllib2.py", line 369, in _call_chain
        result = func(*args)
    File "/usr/lib64/python2.6/urllib2.py", line 518, in http_error_default 
        raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
    urllib2.HTTPError: HTTP Error 405: Method Not Allowed 
```

并且错误指向我的代码中的“fp = opener.open(req)”。

我试图在网上搜索以查看是否可以找到解决方案，但没有运气。有谁知道我做错了什么？

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T12:10:28.607

如果您使用的是 Python 2.7.x，我推荐 jira-python。它是一个 Python 包，用于处理与 Jira 的整个 REST 通信：

[http://jira-python.readthedocs.org/en/latest/](http://jira-python.readthedocs.org/en/latest/)

# c# - 在 ASP.NET 中动态填充时间下拉列表

> ID：13762668
> 
> 赞同：4
> 
> 时间：2012-12-07T12:00:13.550
> 
> 标签：c#, asp.net

我需要用小时和分钟填充 2 个下拉列表。我当前填充下拉列表的方法没有正确格式化数字，因为我需要前 9 个数字的前导 0，即 01,02,03 而不是当前发生的 1,2,3。

C＃

```
protected override void OnInit(EventArgs e)
{
  base.OnInit(e);
  if (!IsPostBack)
     {
        // Populate and Bind Time drop downs
        ddlOh1OpenHours.DataSource = Enumerable.Range(00, 24);
        ddlOh1OpenHours.DataBind();
        ddlOh1OpenMinutes.DataSource = Enumerable.Range(00, 60);
        ddlOh1OpenMinutes.DataBind();
      }
} 
```

ASPX

```
<asp:DropDownList ID="ddlOh1OpenHours" runat="server" />
<span>:</span>
<asp:DropDownList ID="ddlOh1OpenMinutes" runat="server" /> 
```

结果：

```
<select name="ctl00$MainContent$ddlOh1OpenHours" id="ctl00_MainContent_ddlOh1OpenHours">
    <option selected="selected" value="0">0</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
    <option value="14">14</option>
    <option value="15">15</option>
    <option value="16">16</option>
    <option value="17">17</option>
    <option value="18">18</option>
    <option value="19">19</option>
    <option value="20">20</option>
    <option value="21">21</option>
    <option value="22">22</option>
    <option value="23">23</option>
</select> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T12:03:40.550

只需使用`ToString`正确的格式：

```
var hours = Enumerable.Range(00, 24).Select(i => i.ToString("D2"));
var minutes  = Enumerable.Range(00, 60).Select(i => i.ToString("D2"));

dlOh1OpenHours.DataSource = hours;
ddlOh1OpenHours.DataBind();
ddlOh1OpenMinutes.DataSource = minutes;
ddlOh1OpenMinutes.DataBind(); 
```

[> 演示 <](http://ideone.com/qLXPYT)

[**标准数字格式字符串**](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

# c - 如何用 C 编写一个 FTP 客户端？

> ID：13762673
> 
> 赞同：1
> 
> 时间：2012-12-07T12:00:19.743
> 
> 标签：c, ftp

我必须为想要将文件传输到服务器的客户端编写代码，即协议 RCFTP。操作应该是：客户端发送请求保存文件的一部分，如果您收到此文件并且没有错误，服务器将响应。如果是这样，客户端仍然会发送文件的各个部分，直到您无误地提交所有文件。如果传输错误，客户端必须发回失败的文件。

会知道一点帮助开始吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-07T12:02:14.330

1.  调查您是否可以使用任何预先存在的代码，例如库。
2.  阅读[套接字](http://en.wikipedia.org/wiki/Berkeley_sockets)并尝试实现[FTP 协议](https://www.rfc-editor.org/rfc/rfc959)。
3.  当您有具体问题并可以显示一些代码时，请返回此处。:)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-07T12:49:20.407

首先，如果你想编写一个 ftp 客户端，请仔细阅读：[RFC959](https://www.rfc-editor.org/rfc/rfc959)。

为了帮助您一开始，这里有几个您需要知道的步骤（当然，我不会描述所有内容，但它可能会对您有所帮助）：

1.  将您的套接字（控制套接字）连接到端口 21 上的 ftp 服务器。
2.  您将在您的套接字上收到来自 ftp 服务器的消息（代码：220）。
3.  然后您使用命令 USER 将您的登录信息发送到 ftp 服务器并等待确认 (331)
4.  然后使用命令 PASS 发送您的密码并等待确认您已登录服务器 (230)。
5.  现在你可以在ftp上做一些操作了。

要发送文件，您必须使用被动模式：

1.  发送命令 PASV，你会得到一个答案，给你一个 IP 地址和一个端口（227），你将不得不解析这个消息。
2.  使用给定的配置连接第二个套接字（数据套接字）。
3.  在控制套接字上使用命令 STOR（定义要在服务器上创建的文件）
4.  通过数据套接字发送数据，完成后关闭数据套接字。

然后在控制套接字上使用命令 QUIT 离开您的会话。

如果您习惯于“套接字概念”，那么编写一个简单的 ftp 客户端显然很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:05:08.743

使用您最喜欢的互联网搜索引擎搜索套接字教程。

我在[这里找到了一个](http://www.linuxhowtos.org/C_C++/socket.htm)

# box-api - box.net 文件操作 - 在 box 控制台中显示链接

> ID：13762674
> 
> 赞同：1
> 
> 时间：2012-12-07T12:00:21.990
> 
> 标签：box-api

编辑 ：

看来这个问题不是很清楚。我试图让一个链接显示在页面顶部的黄色栏中，以便我可以在文件操作结束时将用户重定向到我的网站。

用户启动文件操作并在最终回调 url 上联系我的服务后，会出现黄色条。由于黄色条显示了我从最终回调 url 返回的任何内容，我尝试发送一个 href 标记。但这似乎不起作用。盒子服务器转义了 html，我看到了

```
<a href /a> 
```

作为黄色栏中的纯文本。

# php - jQuery ajax 聊天重新加载

> ID：13762675
> 
> 赞同：1
> 
> 时间：2012-12-07T12:00:23.353
> 
> 标签：php, jquery, chat

我正在为我的网站开发一个简单的网络聊天应用程序。但是，对我来说，使用间隔和每秒请求与 ajax 聊天感觉不对？

我今天要做的是

```
<script>

    $(function() {

        $('#chat_form').submit(function() {
            $.post('chat/post', $('#chat_form').serialize(), function(data){
                var message = $("#message").val();
                $("#message").val('');
                $("#chat_main").append('<li><b>Bruker: <?php echo " ".$this->session->userdata("chat_username") ?></b>: ' + message + '<br/></li>');
            });
            return false;
        });

        function loadchat()
        {
            $('#chat_main').load('chat/load');
        }

        setInterval(loadchat, 500);
        loadchat();

});

</script> 
```

还有其他更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:03:21.743

您可以使用[服务器端事件](http://dsheiko.com/weblog/html5-and-server-sent-events)，它应该允许相同的事情，但在数据发生更改时将数据发送到浏览器，这样用户就不会不断请求查看是否进行了更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:34:37.167

[这是](http://webscepter.com/simple-comet-implementation-using-php-and-jquery/)一篇关于聊天应用程序和使用 jQuery 实现彗星的最佳方法的非常酷的文章。

它对我有用。

为了使其完美，几乎不需要破解，因为它在时间戳中工作，因此当您更改机器日期时，它无法执行，但在服务器上它工作正常。

使用 xml 替换文本文件实现是一种很好的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:59:31.220

I wrote this couple of times. Ajax chat with polling from DB is not really a chat in real time. And you are right, using interval to poll data sucks. Anyway this is solution (one and only real solution).

[You need to read this book](http://professionalxmpp.com/). If you do not have jabber server I will give you acces to mine (user register update etc). Read the book and then contact me. It is XMPP + Strophe library chat (that what google and facebook are using)! So it is better to start over and learn something new!

# javascript - onchange后在javascript代码中获取文本框值

> ID：13762681
> 
> 赞同：1
> 
> 时间：2012-12-07T12:00:40.557
> 
> 标签：javascript, asp.net

在我的页面上，我使用带有日历扩展器的文本框来获取日期值。我已添加`onchange="ValidateStartDate();"`到文本框中。

```
 <asp:TextBox ID="TextBoxStartDate" runat="server"  ForeColor="Red"    
     onchange="ValidateRsmStartDate();"> 
     </asp:TextBox>               

<asp:CalendarExtender ID="CalendarExtenderStartDate" 
  TargetControlID="TextBoxStartDate"
  BehaviorID="ceStartDate"  
  PopupButtonID="CalendarExtenderStartDatePopup"                                                                     
  Format="MM/dd/yyyy" runat="server">
  </asp:CalendarExtender>

<img class="Spacer" id="CalendarExtenderStartDatePopup" src="Images/Calendar.png"                                                                                
   alt="Start Date" /> 
```

我的javascript函数：

```
function ValidateStartDate() {
   var txtDate = document.getElementById('<%=TextBoxStartDate.ClientID  %>');
   alert(txtDate.innerHTML);
} 
```

但是`alert()`，我根本没有任何价值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T12:01:56.233

文本框`not`有`innerHTML`，你需要使用`value`

改变

```
alert(txtDate.innerHTML); 
```

到

```
alert(txtDate.value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:04:02.517

您可以轻松地从 jquery 集成它。只需在您的函数中写下一行。

```
alert($("#<%=TextBoxStartDate.ClientID  %>").val()); 
```

或者

将您的代码替换`alert(txtDate.innerHTML);`为`alert(txtDate.value);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:05:43.163

**使用 jQuery：**

```
$(function(){
    $('<%=TextBoxStartDate.ClientID%>').on("change", function(){
     alert($(this).val());
    });
}); 
```

# ruby - 维基引用 API？

> ID：13762688
> 
> 赞同：6
> 
> 时间：2012-12-07T12:01:02.233
> 
> 标签：ruby, wikipedia, dbpedia, wikipedia-api

我想通过 JSON 获得 Wikiquote 页面的结构化版本（基本上我需要所有短语）

**示例：** [http://en.wikiquote.org/wiki/Fight_Club_(电影)](http://en.wikiquote.org/wiki/Fight_Club_(film))

我试过：[http ://en.wikiquote.org/w/api.php?format=xml&action=parse&page=Fight_Club_(film)&prop=text](http://en.wikiquote.org/w/api.php?format=xml&action=parse&page=Fight_Club_(film)&prop=text)

但我得到了所有的 HTML 源代码。我需要每个短语作为数组的一个元素

我如何使用**DBPEDIA**实现这一目标？

![http://f.cl.ly/items/2v3w1U2c0J0z1M0V0k0b/Schermata%2012-2456269%20alle%2013.06.24.png](../Images/ac4b1a9484695254135c6b1b85688973.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T12:48:30.867

一方面，我不确定您是否可以使用 DBpedia 查询 wiki 引用，其次，DBpedia 仅以结构化方式为您提供信息框数据，它绝不会以结构化方式提供文章内容。取而代之的是，您可以使用 Media wiki api 来获取数据

* * *

#### 编辑

您正在尝试的 URI 为您提供了一个文本，因此这将使事情变得更容易，但并不完全。

在您的控制台中尝试这段代码：

```
require 'Nokogiri'

content = JSON.parse(open("http://en.wikiquote.org/w/api.php?format=json&action=parse&page=Fight_Club_%28film%29&prop=text").read)

data = content['parse']['text']['*']

xpath_data = Nokogiri::HTML data

xpath_data.xpath("//ul/li").map{|data_node| data_node.text} 
```

这是我得出的最接近答案的答案，当然这并不完全正确，因为您会得到很多不必要的数据。但是，如果您深入研究`Nokogiri`并`xpath`找出如何精确定位您需要的节点，您可以获得一个解决方案，该解决方案将在至少 90% 的情况下为您提供正确的报价。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-25T20:42:12.263

只需将格式更改为 JSON。查找 Wikipedia API 以获取更多详细信息。 [http://en.wikiquote.org/w/api.php?format=json&action=parse&page=Fight_Club_(film)&prop=text](http://en.wikiquote.org/w/api.php?format=json&action=parse&page=Fight_Club_(film)&prop=text)

# ruby - 无法将符号从哈希表转换为整数

> ID：13762694
> 
> 赞同：2
> 
> 时间：2012-12-07T12:01:27.513
> 
> 标签：ruby

编辑：问题是无法在哈希中获取数组的数量，所以它可以是，x = 数组的数量。所以它可以用作 function.each_index{|x| 代码 }

尝试使用行数的索引作为重复操作 X 次的方式，具体取决于从 CSV 文件中提取的数据量。

终端发出

```
=> Can't convert symbol to integer (TypeError) 
```

完全错误：

```
=> ~/home/tests/Product.rb:30:in '[]' can't convert symbol into integer (TypeError) from ~home/tests/Product.rub:30:in 'getNumbRel'
from test.rb:36:in '<main>' 
```

执行动作的功能是：

```
def getNumRel
  if defined? @releaseHashTable
     return @releaseHashTable[:releasename].length
  else
      @releaseHashTable = readReleaseCSV()
      return @releaseHashTable[:releasename].length
  end
end 
```

csv 数据拉取只是数组的散列，没有什么时髦的。

```
def readReleaseCSV()
   $log.info("Method "+"#{self.class.name}"+"."+"#{__method__}"+" has started")
   $log.debug("reading product csv file")
   # Create a Hash where the default is an empty Array
   result = Array.new
   csvPath = "#{File.dirname(__FILE__)}"+"/../../data/addingProdRelProjIterTestSuite/releaseCSVdata.csv"
   CSV.foreach(csvPath, :headers => true, :header_converters => :symbol) do |row|
     row.each do |column, value|
       if "#{column}" == "prodid"
         proHash = Hash.new { |h, k| h[k] = [ ] }
         proHash['relid'] << row[:relid]
         proHash['releasename'] << row[:releasename]
         proHash['inheritcomponents'] << row[:inheritcomponents]

         productId = Integer(value)
         if result[productId] == nil
            result[productId] = Array.new
         end

         result[productId][result[productId].length] = proHash
      end
    end
  end
  $log.info("Method "+"#{self.class.name}"+"."+"#{__method__}"+" has finished")
  @productReleaseArr = result
 end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:09:53.270

你没有做太多，但它似乎`@releaseHashTable`包含一个数组，而不是一个哈希。

**更新**：根据您发布的实现，您可以看到它`productId`是一个整数，并且它的返回值`readReleaseCSV()`是一个数组。

为了得到`releasename`你想要的，你必须这样做：

```
@releaseHashTable[productId][n][:releasename] 
```

其中`productId`和`n`是整数。要么您必须具体指定它们，要么（如果您不知道`n`）您必须引入一个循环来收集特定`productId`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T12:28:18.377

对不起，无法抗拒，清理你的方法。

```
# empty brackets unnecessary, no uppercase in method names
def read_release_csv
  # you don't need + here
  $log.info("Method #{self.class.name}.#{__method__} has started")
  $log.debug("reading product csv file")
  # you're returning this array. It is not a hash. [] is preferred over Array.new
  result = []
  csvPath = "#{File.dirname(__FILE__)}/../../data/addingProdRelProjIterTestSuite/releaseCSVdata.csv"
  CSV.foreach(csvPath, :headers => true, :header_converters => :symbol) do |row|
    row.each do |column, value|
      # to_s is preferred
      if column.to_s == "prodid"
        proHash = Hash.new { |h, k| h[k] = [ ] }
        proHash['relid'] << row[:relid]
        proHash['releasename'] << row[:releasename]
        proHash['inheritcomponents'] << row[:inheritcomponents]
        # to_i is preferred
        productId = value.to_i
        # this notation is preferred
        result[productId] ||= []
        # this is identical to what you did and more readable
        result[productId] << proHash
      end
    end
  end
  $log.info("Method #{self.class.name}.#{__method__} has finished")
  @productReleaseArr = result
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T12:16:19.927

这就是马克托马斯的意思：

```
> a = [1,2,3] # => [1, 2, 3] 
> a[:sym]
TypeError: can't convert Symbol into Integer
# here starts the backstrace
    from (irb):2:in `[]'
    from (irb):2 
```

数组只能通过索引访问，因此`a[1]`这会从数组中获取第二个元素
您返回一个数组，这就是您的代码失败的原因：

```
#....
result = Array.new
#....
@productReleaseArr = result
# and then later on you call
@releaseHashTable = readReleaseCSV()
@releaseHashTable[:releasename] # which gives you TypeError: can't convert Symbol into Integer 
```

# android - 当我更改片段时，EditText 和 ImageButton 不会消失

> ID：13762695
> 
> 赞同：0
> 
> 时间：2012-12-07T12:01:29.890
> 
> 标签：android, view, android-fragments, android-edittext, visibility

我有以下片段：

```
public class ChooseAssigmentFragment extends Fragment {
private ListArrayAdapter listArrayAdapter;

private Assigments assigments;

private ListView assigList;

private Assigment assigment;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.assigments, container, false);
    init(v);
    assigments = new Assigments();
    ((MainFragmentActivity) getActivity()).getConfigAssigments();
    loadAssigments(assigments);
    return v;
}

private void init(View v) {
    // TODO Auto-generated method stub
    final EditText assigSearchET = (EditText) v.findViewById(R.id.AssigSearch);
    final ImageButton assigSearchIB = (ImageButton) v.findViewById(R.id.AssigSB);
    assigSearchET.setVisibility(View.VISIBLE);
    assigSearchIB.setVisibility(View.VISIBLE);
    assigList = (ListView) v.findViewById(R.id.assigListView);
    alert();

    assigList.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> assigList, View v, int position, long id) {
            Assigment assigment = ((ListArrayAdapter) assigList.getAdapter()).getItem(position);
            LogService.log(getTag(), "position: " + position);
            assigSearchET.setVisibility(View.GONE);
            assigSearchIB.setVisibility(View.GONE);
            ((MainFragmentActivity) getActivity()).setConfigAssig(position, assigment);
        }
    });

    OnClickListener searchListener = new OnClickListener() {

        public void onClick(View v) {
            LogService.log(getTag(), "Search Pressed");
        }
    };
    assigSearchIB.setOnClickListener(searchListener);

}
public void setAssigments(Assigments assigments) {
    this.assigments = assigments;
}

public void loadAssigments(Assigments assigments) {
    System.out.println("assigments"+assigments );
    this.assigments = assigments;
    listArrayAdapter = new ListArrayAdapter(ChooseAssigmentFragment.this, assigments);

    assigList.setAdapter(listArrayAdapter);
}

public void alert() {
    final Dialog dialog = new Dialog(getActivity());
    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    dialog.setCancelable(true);

    dialog.show();
    dialog.dismiss();

}
@Override
public void onDestroy() {
    // TODO Auto-generated method stub
    System.out.println("ChooseAssigmentFragment.onDestroy()");
    super.onDestroy();
}
@Override
public void onDestroyView() {
    // TODO Auto-generated method stub
    System.out.println("ChooseAssigmentFragment.onDestroyView()");
    super.onDestroyView();
}

} 
```

使用以下 xml：

```
 <?xml version="1.0" encoding="utf-8"?> 
```

```
<RelativeLayout
    android:id="@+id/RelativeLayoutAssig2"
    android:layout_width="match_parent"
    android:layout_height="20dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:background="@color/SlateGray"
    android:gravity="center"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_gravity="center"
        android:text="@string/sensor_conf" />
</RelativeLayout>

    <EditText
        android:id="@+id/AssigSearch"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/RelativeLayoutAssig2"
        android:layout_toLeftOf="@+id/AssigSB"
        android:visibility="gone"
        android:ems="10" >

    </EditText>

<ListView
    android:id="@+id/assigListView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/AssigSearch" >

</ListView>

<ImageButton
    android:id="@+id/AssigSB"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/assigListView"
    android:layout_alignParentRight="true"
    android:layout_alignTop="@+id/AssigSearch"
    android:background="@color/Transparent"
    android:src="@drawable/ic_action_search"
    android:visibility="gone" /> 
```

这是我的片段活动：

```
public class MainFragmentActivity extends MyBaseActivity implements OnClickListener {
private static final String TAG = MainFragmentActivity.class.getName();
private Fragment f;
RelativeLayout header, parentHeader;
Assigments assigments;

@Override
public void onBackPressed() {
    Class<?> previousFragment = getPreviousScreen();
    if (previousFragment != null) {
        navigateTo(previousFragment, AnimEffect.RIGHT_TO_LEFT);
    } else {
        super.onBackPressed();
    }
}

public Class<?> getPreviousScreen() {
    if ((f instanceof MainFragment) && f.isAdded()) {
        return null;
    } else if ((f instanceof ChooseAssigmentFragment) && f.isAdded()) {
        return MainFragment.class;
    }
    else if ((f instanceof ConfigFragment) && f.isAdded()) {
        return ChooseAssigmentFragment.class;
    }
    else if ((f instanceof EditNetworkFragment) && f.isAdded()) {
        return ConfigFragment.class;
    }
    return null;
}

@Override
protected void onCreate(Bundle arg0) {
    // TODO Auto-generated method stub
    super.onCreate(arg0);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.main_fragment_container);
    assigments = new Assigments();
    header = (RelativeLayout) findViewById(R.id.mainFragmentContainerheader);
    findViewById(R.id.notificationsButton).setOnClickListener(this);
    parentHeader = (RelativeLayout) findViewById(R.id.mainFragmentHeader);
    header.setOnClickListener(this);
    navigateTo(MainFragment.class, AnimEffect.BOTTOM_TO_TOP);
}

public void hideHeader() {
    parentHeader.setVisibility(View.GONE);
}

public void showHeader() {
    parentHeader.setVisibility(View.VISIBLE);
}

public void navigateTo(Class<?> fragmentClass, AnimEffect effect) {
    removeOldFragment(effect);
    try {
        f = (Fragment) fragmentClass.newInstance();
    } catch (Exception e) {
        LogService.err(TAG, e.getMessage(), e, LogService.LOG_LEVEL_LITE);
    }

    if (f != null) {
        getSupportFragmentManager().beginTransaction().disallowAddToBackStack().setCustomAnimations(AnimEffect.getInAnimation(effect), 0).add(R.id.mainFragmentContainer, f, fragmentClass.getSimpleName()).commitAllowingStateLoss();
    }
}

private void removeOldFragment(AnimEffect effect) {
    if ((f != null) && f.isAdded()) {
        System.out.println("removing:  " + f.getClass().getSimpleName());
        getSupportFragmentManager().beginTransaction().setCustomAnimations(0, AnimEffect.getOutAnimation(effect)).remove(f).commitAllowingStateLoss();
        getSupportFragmentManager().executePendingTransactions();
    }
}

public void onClick(View v) {
    switch (v.getId()) {
    case R.id.mainFragmentContainerheader:
        if (f.getClass() != MainFragment.class) {
            navigateTo(MainFragment.class, AnimEffect.RIGHT_TO_LEFT);
        }
        break;
    case R.id.notificationsButton:
        View x =getLayoutInflater().inflate(R.layout.help_fragment, null);
        ((RelativeLayout)findViewById(R.id.mainFragmentContainerx)).addView(x, new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT));
        Animation a=AnimationUtils.loadAnimation(this, R.anim.push_left_in);
        a.setFillAfter(true);
        x.startAnimation(a);

        break;
    default:
        break;
    }
    // TODO Auto-generated method stub

}

public void setConfigAssig(int position, Assigment assigment) {
    // TODO Auto-generated method stub
    navigateTo(ConfigFragment.class, AnimEffect.RIGHT_TO_LEFT);
    if ((f != null) && (f instanceof ConfigFragment)) {
        ((ConfigFragment) f).setAssigment(position, assigment);
    }
}

public void setConfigAssigments(Assigments assigments) {
    navigateTo(ChooseAssigmentFragment.class, AnimEffect.RIGHT_TO_LEFT);
    this.assigments = assigments;
}

public void getConfigAssigments() {
    if ((f != null) && (f instanceof ChooseAssigmentFragment)) {
        ((ChooseAssigmentFragment) f).setAssigments(assigments);
    }
}

} 
```

如您所见，我的 xml 中有一个名为 AssigSearch 的 EditText 和一个名为 AssigSB 的 imageButton。问题是，如果我更改我的片段（来自 MainFragmentActivity 的类 navigateTo），editText 和 imagebuttons 也会保留在其他页面上。我尝试从 ChooseAssigmentFragment 中删除与这两个有关的代码的每一部分，但它们仍然出现在其他片段上。如果我将它们放在 xml 代码中以显示：GONE，那么我将看不到它们。但我也不会在我的 xml 中看到它们。我尝试从我的片段以编程方式设置可见性，然后在我更改片段之前将其更改为 Gone，但仍然没有运气。试图在我的 onDestroyView 和 onDestroy 函数上调用 enable(false) ，仍然没有运气。任何想法我可以如何在我的片段上制作这个节目，而不是在其他人身上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:24:25.603

在此片段之前的片段中，我创建了 2 个实例，通过删除一个，将保留一个。

# mysql - 使用mysql查询获取一个月中的所有星期日？

> ID：13762696
> 
> 赞同：1
> 
> 时间：2012-12-07T12:01:29.297
> 
> 标签：mysql, sql, multithreading

例如。

这个月是 2012 年 12 月，我们知道 2012 年这个月的所有星期日都是 2、9、16、23、30。

谁能告诉我如何使用mysql查询在一个月内获得如下所示的所有星期天？

```
 _ _ _ _ _ _
|  Sundays  |
|- - - - - -| 
|    2      |
|    9      |
|    16     |
|    23     |
|    30     |
 - - - - - - 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:29:01.223

# [这是一个 SQLFiddle 演示](http://sqlfiddle.com/#!2/d41d8/4715)

```
select DATE_ADD('2012-12-01', INTERVAL ROW DAY) as Date,
row+1  as DayOfMonth from

(
SELECT @row := @row + 1 as row FROM 
(select 0 union all select 1 union all select 3 
        union all select 4 union all select 5 union all select 6) t1,
(select 0 union all select 1 union all select 3 
        union all select 4 union all select 5 union all select 6) t2, 
(SELECT @row:=-1) t3 limit 31
) b
where 
DATE_ADD('2012-12-01', INTERVAL ROW DAY)
between '2012-12-01' and '2012-12-31'
and
DAYOFWEEK(DATE_ADD('2012-12-01', INTERVAL ROW DAY))=1 
```

# jquery - 在jQuery中为父元素添加类

> ID：13762703
> 
> 赞同：-1
> 
> 时间：2012-12-07T12:01:47.590
> 
> 标签：jquery, parent

我有一些 li 标签，并且在每个 li 标签内都有无线电类型的输入标签。喜欢

```
<li><input type='radio' value='cool' name='radiooption' id='2'>2</li>
<li ><input type='radio' name='radiooption' value='cool1' id='3'>3</li>
<li><input type='radio' value='cool' name='radiooption' checked="checked" id='4'>4</li>
<li><input type='radio' value='cool' name='radiooption' id='5'>5</li> 
```

现在，如果我加载包含上述代码的页面，那么对于第三个 li，将添加一个类，因为相应的单选按钮已被选中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T12:02:58.073

```
$("input[name='radiooption']").on("change", function() {
    $(this)
        .parent()
        .addClass("myClass")
        .siblings()
        .removeClass("myClass");
});​ 
```

**演示：http:** [//jsfiddle.net/kEfkY/](http://jsfiddle.net/kEfkY/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:03:19.970

```
$('input[type="radio"]').click(function(){
$(this).parent().addClass('class');
}); 
```

顺便说一句，您应该更改可能会遇到问题的输入的 id，因此将其更改为 like a1,a2,a3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:03:33.623

```
$(function() {
    $('input[name="radiooption"]').each(function() {
        if (this.checked) $(this).closest('li').addClass('myClass');
    });
}); 
```

# c++ - c++ 类中的类默认构造函数

> ID：13762707
> 
> 赞同：1
> 
> 时间：2012-12-07T12:01:59.390
> 
> 标签：c++, class, initialization, default-constructor

我关心的是默认构造函数及其初始化列表。在一个简单的情况下很清楚，例如：

```
class A
{
  protected:
       double d1;
       //classB obj1; //how to initialize this one in a default constructor?
  public:
       A (double x = 0.0): d1(x){} //constructor
       virtual ~A(void) {};
  //something
} 
```

但是如何初始化拥有大量成员的classB的对象呢？或者通常如何在默认构造函数中初始化一些具有大量或未知数量要初始化的参数的类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:04:52.177

`member initializer list`您可以通过调用其默认构造函数或其他构造函数来初始化 obj1

```
class A
{
  protected:
       double d1;
       classB obj1; 
       pthread_mutex_t m_mutex;
  public:
       A (double x = 0.0): d1(x), obj1(), m_mutex(PTHREAD_MUTEX_INITIALIZER) {} 
       virtual ~A(void) {}
       //something
} 
```

如果 classB 有像你描述的那样大的成员，你可能会打破类设计规则 - `one class does one thing`。您可能希望将 classB 分解为小的独立类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:05:02.867

如果要显式初始化一个对象，只需将其添加到构造函数初始化器列表中：

```
struct Foo
{
    Foo(int arg) { ... }
};

struct Bar
{
    Foo foo;

    Bar()
        : foo(123)  // Initialize `foo` with an argument
    { ... }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T12:12:37.890

如果成员可以由其默认构造函数初始化，那么它甚至不必在初始化列表中，因为默认构造函数没有参数。将调用默认构造函数。基元没有默认构造函数，因此如果您想让它们初始化，它们必须在初始化列表中。

# javascript - 客户互动矢量图

> ID：13762711
> 
> 赞同：2
> 
> 时间：2012-12-07T12:02:09.023
> 
> 标签：javascript, jquery, html, css, map

我确信这不会是直截了当的，但是..我有一个英国的自定义矢量地图，它是一个动画地图。它显示了全国各地的不同位置，我需要能够允许用户单击地图上的某个位置。因此，用户将弹出有关他们选择的位置的信息。像这样的东西 - [http://jqvmap.com/](http://jqvmap.com/)但是就像我说的地图上有特征。

我想知道更改 Javascript 中的坐标以定位地图上的位置有多简单。有没有我可以得到的工具，它可以告诉您当前悬停时的坐标以提供帮助？

我们欢迎所有的建议！它需要在所有主流浏览器上工作，包括 IE 8/9（如果可能，7）。

谢谢，

乔什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:26:42.393

我发现了一些似乎可以解决问题的方法 - [http://www.outsharked.com/imagemapster/default.aspx?demos.html#frog](http://www.outsharked.com/imagemapster/default.aspx?demos.html#frog)

我已经在我的页面上实现了代码并且它有效。我已经设法从 Web 开发人员工具栏中获取坐标。

但是，我想实现一个放大功能，您可以在其中缩放和移动图像，就像您使用谷歌地图一样。所以你可以滚动房子。我担心会丢失图像上的坐标吗？因为我仍然希望用户能够点击地图上的位置。

# sql - 尝试持久化实体时，具有相同标识符值的不同对象已与会话相关联

> ID：13762713
> 
> 赞同：7
> 
> 时间：2012-12-07T12:02:14.957
> 
> 标签：sql, hibernate, seam

我有一个小问题，我不知道如何解决。请问你能帮帮我吗？当我试图持久化实体时，我得到下一个异常：

```
12:47:39,398 ERROR [org.black.dmitriy.entityHome.ScheduleHome] (http--127.0.0.1-8080-1)  javax.persistence.EntityExistsException: a different object with the same identifier value was already associated with the session: [org.black.dmitriy.entity.Schedule#1]
at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1333) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1289) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1295) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
at org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:859) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_04]
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_04]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_04]
at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_04]
at org.jboss.seam.persistence.EntityManagerInvocationHandler.invoke(EntityManagerInvocationHandler.java:46) [jboss-seam.jar:2.3.0.Final]
at $Proxy81.persist(Unknown Source) at org.jboss.seam.framework.EntityHome.persist(EntityHome.java:84) [jboss-seam.jar:2.3.0.Final]
at org.black.dmitriy.entityHome.ConversationHome.tryPersist(ConversationHome.java:147) [ejb.jar:]
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_04]
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_04]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_04]
at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_04]
at org.jboss.seam.util.Reflections.invoke(Reflections.java:22) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.intercept.RootInvocationContext.proceed(RootInvocationContext.java:32) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:56) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.transaction.RollbackInterceptor.aroundInvoke(RollbackInterceptor.java:28) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.core.ConversationInterceptor.aroundInvoke(ConversationInterceptor.java:65) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.transaction.TransactionInterceptor$1.work(TransactionInterceptor.java:97) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.util.Work.workInTransaction(Work.java:61) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.transaction.TransactionInterceptor.aroundInvoke(TransactionInterceptor.java:91) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.core.MethodContextInterceptor.aroundInvoke(MethodContextInterceptor.java:44) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.intercept.RootInterceptor.invoke(RootInterceptor.java:107) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.intercept.JavaBeanInterceptor.interceptInvocation(JavaBeanInterceptor.java:186) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.intercept.JavaBeanInterceptor.invoke(JavaBeanInterceptor.java:104) [jboss-seam.jar:2.3.0.Final]
at org.black.dmitriy.entityHome.ScheduleHome_$$_javassist_seam_8.tryPersist(ScheduleHome_$$_javassist_seam_8.java) [ejb.jar:]
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_04]
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_04]
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_04]
at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_04]
at org.jboss.el.util.ReflectionUtil.invokeMethod(ReflectionUtil.java:335) [jboss-el-1.0_02.CR6.jar:1.0_02.CR6]
at org.jboss.el.util.ReflectionUtil.invokeMethod(ReflectionUtil.java:348) [jboss-el-1.0_02.CR6.jar:1.0_02.CR6]
at org.jboss.el.parser.AstPropertySuffix.invoke(AstPropertySuffix.java:58) [jboss-el-1.0_02.CR6.jar:1.0_02.CR6]
at org.jboss.el.parser.AstValue.invoke(AstValue.java:96) [jboss-el-1.0_02.CR6.jar:1.0_02.CR6]
at org.jboss.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:276) [jboss-el-1.0_02.CR6.jar:1.0_02.CR6]
at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105) [jsf-impl-2.1.7-jbossorg-2.jar:]
at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102) [jsf-impl-2.1.7-jbossorg-2.jar:]
at javax.faces.component.UICommand.broadcast(UICommand.java:315) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81) [jsf-impl-2.1.7-jbossorg-2.jar:]
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.7-jbossorg-2.jar:]
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [jsf-impl-2.1.7-jbossorg-2.jar:]
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:83) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.web.LoggingFilter.doFilter(LoggingFilter.java:60) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.web.IdentityFilter.doFilter(IdentityFilter.java:40) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.web.MultipartFilter.doFilter(MultipartFilter.java:90) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.web.ExceptionFilter.doFilter(ExceptionFilter.java:64) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.web.RedirectFilter.doFilter(RedirectFilter.java:45) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.web.HotDeployFilter.doFilter(HotDeployFilter.java:53) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.servlet.SeamFilter$FilterChainImpl.doFilter(SeamFilter.java:69) [jboss-seam.jar:2.3.0.Final]
at org.jboss.seam.servlet.SeamFilter.doFilter(SeamFilter.java:158) [jboss-seam.jar:2.3.0.Final]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:397) [jbossweb-7.0.13.Final.jar:]
at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_04] 
```

我使用Seam 2.3，休眠。我的 import.sql 文件中有一个插入语句：

```
INSERT INTO Schedules (id, name, dayCount, lessonCount, firstTermSize, secondTermSize, subgroupSize) VALUES(1, '2012/2013', 5, 8, 9, 9, 18) 
```

它将一个实体插入到表 Schedules 中。

然后我使用 EntityHome 创建新的 Schedule 实体 throw 网页

```
@Name("scheduleHome")
@Scope(ScopeType.CONVERSATION)
public class ScheduleHome extends ConversationHome<Schedule> {
    private static final long serialVersionUID = 1L;

    public ScheduleHome() {
    }

    @Override
    protected boolean isUnique() {
        Schedule schedule = getInstance();
        Schedule foundSchedule = ScheduleDAO.instance().getByName(schedule.getName());

        if ((foundSchedule != null) && (!foundSchedule.equals(schedule))) {
            showExistsErrorMessage(getInstance().getName());
            return false;
        }

        return true;
    }

    @Override
    protected Schedule createInstance() {
        return new Schedule();
    }

    @Override
    public String getEditOutcome() {
        return "scheduleEdit";
    }

    @Override
    protected void prepareEntityForSaving() {

    }
} 
```

和超类

```
public abstract class ConversationHome<T> extends EntityHome<T> {
    private static final long serialVersionUID = 1L;
    private String parentView;

    public boolean isParentViewExists() {
        return parentView != null && parentView.length() > 0;
    }

    public void setParentView(String parentView) {
        this.parentView = parentView;
    }

    public String getParentView() {
        return parentView;
    }

    public abstract String getEditOutcome();

    protected abstract void prepareEntityForSaving();

    protected abstract boolean isUnique();

    @Override
    @Create
    public void create() {
        create(false);
    }

    protected void create(boolean createNestedConversation) {
        Conversation conversation = Conversation.instance();
        if (!createNestedConversation && conversation.isLongRunning()) {
            getLog().debug("conversation already started, nested will not create(isLongRunning = #0, isNested = #1)", conversation.isLongRunning(), conversation.isNested());
        } else {
            conversation.begin(false, conversation.isLongRunning());
            conversation.changeFlushMode(FlushModeType.MANUAL);
            getLog().debug("create(isLongRunning = #0, isNested = #1, id = #2)", conversation.isLongRunning(), conversation.isNested(), conversation.getId());
        }
        super.create();
    }

    private boolean init(Long id) {
        FacesContext context = FacesContext.getCurrentInstance();
        setParentView(Pages.getViewId(context));

        if (id != null) {
            setId(id);
            try {
                getInstance();
                getLog().debug("instance initialized #0", getInstance());
            } catch (EntityNotFoundException e) {
                getLog().error(e);
                return false;
            }
        }
        return true;
    }

    public String startEdit(Long id) {
        getLog().debug("start editing #0", id);
        if (init(id)) {
            return getEditOutcome();
        } else {
            return cancel();
        }
    }

    public String cancel() {
        if (isManaged()) {
            getEntityManager().refresh(getInstance());
        }
        return returnToParent();
    }

    @End
    protected String returnToParent() {
         if (isParentViewExists()) {
                Conversation conversation = Conversation.instance();
                getLog().debug("end conversation(id = #0, isLongRunning = #1, isNested = #2)",
                        conversation.getId(), conversation.isLongRunning(), conversation.isNested());
                conversation.end(true);
                return getParentView();
            } else {
                clearInstance();
                return null;
            }
    }

    public String tryPersist() {
        if (isUnique()) {
            try {
                prepareEntityForSaving();

                String outcome = persist();
                if (!"failed".equals(outcome)) {
                    return returnToParent();
                }
            } catch (Exception e) {
                getLog().error(getInstance(), e);
                showSaveErrorMessage(e);
            }
        }
        return "failed";
    }
} 
```

当我尝试坚持它时，我得到了这个例外。和网页上的消息

保存错误消息：具有相同标识符值的不同对象已与会话关联：[org.black.dmitriy.entity.Schedule#1]

它将休眠将 id 属性设置为 1，但我已经有了带有 的实体`id = 1`，因为我手动创建了它并抛出 import.sql。

这是我的 Schedule 实体：

```
import java.util.ArrayList;
import java.util.List;

import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.OneToMany;
import javax.persistence.Table;
import javax.validation.constraints.NotNull;

@Entity
@Table(name = "Schedules")
public class Schedule {

    @Id
    @GeneratedValue
    @Column(name = "id", nullable = false)
    private Long id;

    @NotNull
    @Column(name = "name", nullable = false, length = 40)
    private String name;

    @Column(name = "dayCount")
    private int dayCount = 5;

    @Column(name = "lessonCount")
    private int lessonCount = 8;

    @Column(name = "firstTermSize")
    private int firstTermSize = 9;

    @Column(name = "secondTermSize")
    private int secondTermSize = 9;

    @Column(name = "subgroupSize")
    private int subgroupSize = 18;

    @OneToMany(mappedBy = "schedule", cascade = CascadeType.ALL, targetEntity = Faculty.class)
    private List<Faculty> faculties = new ArrayList<>();

    @OneToMany(mappedBy = "schedule", cascade = CascadeType.ALL, targetEntity = Building.class)
    private List<Building> buildings = new ArrayList<>();

    public Schedule() {

    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getDayCount() {
        return dayCount;
    }

    public void setDayCount(int dayCount) {
        this.dayCount = dayCount;
    }

    public int getLessonCount() {
        return lessonCount;
    }

    public void setLessonCount(int lessonCount) {
        this.lessonCount = lessonCount;
    }

    public int getFirstTermSize() {
        return firstTermSize;
    }

    public void setFirstTermSize(int firstTermSize) {
        this.firstTermSize = firstTermSize;
    }

    public int getSecondTermSize() {
        return secondTermSize;
    }

    public void setSecondTermSize(int secondTermSize) {
        this.secondTermSize = secondTermSize;
    }

    public int getSubgroupSize() {
        return subgroupSize;
    }

    public void setSubgroupSize(int subgroupSize) {
        this.subgroupSize = subgroupSize;
    }

    public List<Faculty> getFaculties() {
        return faculties;
    }

    public void setFaculties(List<Faculty> faculties) {
        this.faculties = faculties;
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((id == null) ? 0 : id.hashCode());
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj) {
            return true;
        }
        if (obj == null) {
            return false;
        }
        if (!(obj instanceof Schedule)) {
            return false;
        }
        Schedule other = (Schedule) obj;
        if (id == null) {
            if (other.id != null) {
                return false;
            }
        } else if (!id.equals(other.id)) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return this.name;
    }
} 
```

如您所见，id属性上有@GeneratedValue注释，所以我认为hibernate应该自己生成id，hibernate应该知道数据库中有id = 1的实体，并在新实体中设置id = 2。但是Hibernate设置了id在新实体中到 1\. 你能阻止我吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-10T18:25:12.050

问题是hibernate如何生成你`id`的，它从1开始。当它在将对象保存到数据库之前将1分配给对象时，它会看到数据库中已经存在具有相同id的行并导致异常。这个问题的简单而自然的解决方案是简单地限制休眠，以便它不能`1`作为 id 分配给相关类的任何对象（在您的情况下）。

**mySql的解决方案：**

如果您使用的是 mySql，您可以手动创建表并设置自动增量，例如：

```
 CREATE TABLE IF NOT EXISTS `testTable` (
      `id` number(11) NOT NULL AUTO_INCREMENT,
       ...,
       ...,
       ...,
       PRIMARY KEY (`id`)
 ) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2; //assigning id by hibernate, will start from 2. 
```

在您的域类中，您可以像下面这样注释 id：

```
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name = "ID")
public long getId() {
   ....
} 
```

`GenerationType.AUTO`默认情况下在 mySql 中使用自动增量。并且在设置`AUTO_INCREMENT=2`休眠后将开始分配 id's from `2`(因此`1`被跳过)。

**甲骨文的解决方案：**

如果您限制休眠使用“序列”并且您将序列的初始点设置为您的意愿，则可以对 oracle 执行相同的操作。您可以创建一个序列以开始`2`和递增，`1`如下所示：

```
 create sequence idSequence
        start with 2
        increment by 1
        maxvalue 9999999999999; 
```

您可以指定要用于生成域类对象的 id 的序列，如下所示：

```
@Id
@SequenceGenerator(name = "idGeneratorSeq", sequenceName = "idSequence")
@GeneratedValue(strategy = GenerationType.AUTO, generator = "idGeneratorSeq")
@Column(name = "ID")
public long getId() {
   ....
} 
```

你的问题已经解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:05:51.253

`persist()`在调用方法之前执行以下步骤。

首先分离您当前的实例

```
getEntityManager().detach(getInstance()); 
```

现在将其设置`Id`为空

```
getInstance().setId(null); 
```

现在坚持

```
String outcome = persist(); 
```

# c# - 如何确定组合框是否包含值成员？

> ID：13762719
> 
> 赞同：2
> 
> 时间：2012-12-07T12:02:50.013
> 
> 标签：c#, winforms, combobox

情况是我有 2 个控件，一个文本框和一个组合框。用户可以在组合框中选择一些东西，它用值成员填充文本框，如果用户在文本框中输入，我想检查它是否存在于组合框的值中，然后选择相应的显示成员。

我期待的方法是这样的

```
if(cmb1.valueMembers.Contains(txt1.Text)) 
```

但我找不到这样的东西，我也认为循环通过它们可以找到它？所以我有

```
foreach (System.Data.DataRowView row in cmb1.Items)
        {} 
```

但在行中的任何地方都找不到值成员？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T12:38:24.427

好的，这是一个简单的例子，但我想这是主要思想。我们为 ValueMember 和DisplayMember 提供了一个`MyClass`。`Id``Name`

```
 public partial class Form1 : Form
{
    class MyClass
    {
        public MyClass(string name, int id)
        {
            Name = name;
            Id = id;
        }
        public string Name { get; set; }
        public int Id { get; set; }
    }

    List<MyClass> dsList = new List<MyClass>();

    public Form1()
    {

        for (int i = 0; i < 10; i++)
        {
            dsList.Add(new MyClass("Name" + i , i));
        }

        InitializeComponent();

        comboBox1.DataSource = dsList;
        comboBox1.ValueMember = "Id";
        comboBox1.DisplayMember = "Name";
    }

    private void textBox1_TextChanged(object sender, EventArgs e)
    {
        //Checks if item with the typed Id exists in the DataSource
        // and selects it if it's true
        int typedId = Convert.ToInt32(textBox1.Text);
        bool exist = dsList.Exists(obj => obj.Id == typedId);
        if (exist) comboBox1.SelectedValue = typedId;

    }

    private void comboBox1_SelectedValueChanged(object sender, EventArgs e)
    {
        MyClass obj = comboBox1.SelectedValue as MyClass;
        if (obj != null) textBox1.Text = obj.Id.ToString();
    }
} 
```

如果有不清楚的地方，请随时询问。

**PS：在示例中，我假设将在文本框中输入整数**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-02T23:17:41.260

游戏有点晚了，但我找不到任何有用的东西，所以我想出了这个简单的解决方案：

```
comboBox1.Items.OfType<SomeType>().Any(x => x == YourValue) 
```

或者：

```
comboBox1.Items.OfType<SomeType>().Any(x => x.SomeProperty == YourValue) 
```

* * *

## 演示示例：

```
class Person
{
    public int Id { get; set; }
    public string Name { get; set; }
}

// ...

var people = new List<Person>() { /* Add some data */ };
comboBox1.DisplayMember = "Name";
comboBox1.ValueMember = "Id";
comboBox1.DataSource = people;

// ...

bool exists = comboBox1.Items.OfType<Person>().Any(p => p.Id == 1); 
```

或者，如果您需要获取项目的索引，您可以使用以下内容：

```
var person = comboBox1.Items.OfType<Person>().FirstOrDefault(p => p.Id == 1);
var index = (person != null) ? comboBox1.Items.IndexOf(person) : -1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-01T13:36:54.367

```
ListSubCategoryProduct = await Task.Run<List<SubCategoryProduct>>(() => { 
    return productsController.ListSubCategoryProduct(CategoryProductId); }); // <- I search the database

                CboSubCategory.DataSource = ListSubCategoryProduct;
                CboSubCategory.DisplayMember = "Description";
                CboSubCategory.ValueMember = "SubCategoryProductId";

                CboSubCategory.AutoCompleteMode = AutoCompleteMode.Suggest;
                CboSubCategory.AutoCompleteSource = AutoCompleteSource.ListItems;

                this.CboSubCategory.SelectedValue = 1; // <- SubCategoryProductId. You have to know the ID. 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-22T02:21:19.433

```
Private Sub ComboBox1_SelectedValueChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ComboBox1.SelectedValueChanged
    If ComboBox1.SelectedIndex = -1 Then              
        Return
    Else
        TextBox1.Text = ComboBox1.SelectedValue.ToString   ' if find then show their displaymember in combobox.
    End If

Private Sub TextBox1_Leave(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TextBox1.Leave
    Dim value As String = TextBox1.Text
    ComboBox1.SelectedValue = value                                    ' if find then show their displaymember in combobox.

    If ComboBox1.SelectedValue Is Nothing Then                          ' if the id you entered in textbox is not find.
        TextBox1.Text = String.Empty

    End If 
```

# oracle - 在 sqlplus 中创建函数

> ID：13762720
> 
> 赞同：-1
> 
> 时间：2012-12-07T12:02:51.613
> 
> 标签：oracle, sqlplus

我在 oracle sql plus 中创建一个函数，它以 empno 作为参数并返回它的薪水。但它没有被创建，我哪里出错了？

这是我的功能：

```
CREATE FUNCTION GETEMPSALARY (EMPNUMBER IN INTEGER) RETURN INTEGER
IS
EMPSALARY INTEGER;
BEGIN
SELECT SAL INTO EMPSALARY FROM EMP WHERE EMP.EMPNO = EMPNUMBER;
RETURN EMPSALARY;
END GETEMPSALARY; 
```

这是错误：

```
Error at line 1: PLS-00103: Encountered the symbol "(" when expecting one of the following:

   . @ % ; is authid as cluster order using external character
   deterministic parallel_enable pipelined aggregate
   result_cache

1\. CREATE FUNCTION GETNAMES1 (EMPID IN INTEGER) RETURN VARCHAR(20)
2\. IS
3\. EMPNAME VARCHAR(50); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:10:32.677

你最后错过了 / 。

```
CREATE FUNCTION GETEMPSALARY (EMPNUMBER IN INTEGER) RETURN INTEGER
IS
DECLARE
EMPSALARY INTEGER;
BEGIN
SELECT SAL INTO EMPSALARY FROM EMP WHERE EMP.EMPNO = EMPNUMBER;
RETURN EMPSALARY;
END GETEMPSALARY;
/ 
```

编辑：由于您的新错误是完全不同的功能！

```
CREATE FUNCTION GETNAMES1 (EMPID IN INTEGER) RETURN VARCHAR(20) 
```

你不应该指定回报的精度，所以把

```
 RETURN VARCHAR2 
```

也不用`VARCHAR`，只用`VARCHAR2`

和 for 语句被忽略；

```
SQL> CREATE FUNCTION GETEMPSALARY (EMPNUMBER IN INTEGER) RETURN INTEGER
  2  IS
  3  EMPSALARY INTEGER;
  4  BEGIN
  5  SELECT SAL INTO EMPSALARY FROM EMP WHERE EMP.EMPNO = EMPNUMBER;
  6  RETURN EMPSALARY;
  7  END GETEMPSALARY;
  8  /

Warning: Function created with compilation errors.

SQL> show errors
Errors for FUNCTION GETEMPSALARY:

LINE/COL ERROR
-------- -----------------------------------------------------------------
5/1      PL/SQL: SQL Statement ignored
5/32     PL/SQL: ORA-00942: table or view does not exist
SQL> 
```

你看到的后续错误是什么，因为这个错误后面应该是一个真正的错误

# javascript - JavaScript 函数调用

> ID：13762722
> 
> 赞同：0
> 
> 时间：2012-12-07T12:03:10.513
> 
> 标签：javascript, function, onclick

Outer、Inner 和 Filter 是 DIV，Outer 包含 Inner，filter 是独立的。

执行关闭功能的按钮位于内部 div 内。单击按钮时，该功能不执行，但从地址栏执行时，它执行

即 javascript:close(); 在地址栏中执行工作正常。如何使这项工作，有什么错误？花了几个小时

```
<script type=text/javascript>
function close() {
  var x = document.getElementById("outer") ;
  var y = document.getElementById("inner") ;
  var z = document.getElementById("filter");    
  x.style.height = "0px" ;
  y.style.height = "0px";
  z.style.height = "0px";
  x.style.overflow = "hidden";
}
</script>

<div id="filter"></div>

<div id="outer"> 
  <div id="inner">
    <button onclick="close()">Close</button>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T12:11:52.787

将 your`close()`和 your重命名`function close()`为`closeme()`. ~~关闭是保留字~~查看评论来自`xiaoyi`

[看到这个小提琴](http://jsfiddle.net/xA73g/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T12:11:35.267

现在可以使用：http: [//jsfiddle.net/ckrxV/](http://jsfiddle.net/ckrxV/)

问题在于已经在 javascript 中定义的名称“close”

```
function close1() {
var x = document.getElementById('outer');
var y = document.getElementById('inner');
var z = document.getElementById('filter');
alert('worked');
x.style.height = "0px";
y.style.height = "0px";
z.style.height = "0px";
x.style.overflow = "hidden";
}​ 
```

# java - JSF-2 应用程序中的服务器端计时器

> ID：13762723
> 
> 赞同：2
> 
> 时间：2012-12-07T12:03:12.897
> 
> 标签：java, jsf, jsf-2

在我正在处理的 JSF-2 应用程序中，当用户执行操作时，我需要启动服务器端 Timer。
此计时器必须与应用程序本身相关，因此它必须在用户会话关闭时仍然存在。
为了解决这个问题，我想使用 java.util.Timer 类在 Application 范围的 bean 中实例化计时器对象。
这会是一个好的解决方案吗？还有其他更好的方法来实现这一目标吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T12:38:13.397

**没有 ejb 容器**

如果您的容器没有 ejb 功能（tomcat、jetty 等），您可以使用石英调度程序库：http: [//quartz-scheduler.org/](http://quartz-scheduler.org/)

他们也有一些不错的代码示例：http: [//quartz-scheduler.org/documentation/quartz-2.1.x/examples/Example1](http://quartz-scheduler.org/documentation/quartz-2.1.x/examples/Example1)

**EJB 3.1**

如果您的应用服务器具有 EJB 3.1（glassfish、Jboss），则有一种创建计时器的 java ee 标准方法。主要看@Schedule 和@Timeout 注解。

这样的事情可能会涵盖您的用例（当计时器用完时，将调用带注释的 @Timeout 方法）

```
import javax.annotation.Resource;
import javax.ejb.Stateless;
import javax.ejb.Timeout;
import javax.ejb.Timer;
import javax.ejb.TimerConfig;
import javax.ejb.TimerService;

@Stateless
public class TimerBean {
    @Resource
    protected TimerService timerService;

    @Timeout
    public void timeoutHandler(Timer timer) {
        String name = timer.getInfo().toString();
        System.out.println("Timer name=" + name);
    }

    public void startTimer(long initialExpiration, long interval, String name){      
        TimerConfig config = new TimerConfig();
        config.setInfo(name);
        config.setPersistent(false);
        timerService.createIntervalTimer(initialExpiration, interval, config);
    }
} 
```

# security - 上传文件到互联网的安全性？

> ID：13762727
> 
> 赞同：0
> 
> 时间：2012-12-07T12:03:27.400
> 
> 标签：security, file-upload, upload, webforms, browser

我一直在寻找这个问题的答案，尽管为网站管理员找到了大量与服务器端安全相关的信息，但对于那些将文件上传到网站的人，我找不到任何与客户端安全相关的信息。

我想知道当网站询问我要上传的文件在硬盘上的位置时，流程是什么。例如，如果我单击 Stack Overflow 合成框中的“*插入图像*”图标，然后单击“*从我的计算机*”，我会看到一个标准文件位置对话框，我可以在其中从硬盘驱动器中选择任何文件。

这与您在可以上传照片、文档等的任何网站上看到的对话框相同。如果您运行的是 OS-X 并单击“插入图像”或“附加文件”，您将触发文件位置对话框操作系统，然后能够导航到该文件。

所以，用外行的话来说，这个过程涉及什么，这个过程有多安全，什么阻止网站导航和上传我没有选择的文件，什么阻止网站扫描我的计算机以获取密码文件等，并且可以该网站了解有关我的计算机的任何信息？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:52:56.323

关于防止什么：**没有**。一切都与信任有关，您信任您的**浏览器**，不会将未选择的文件上传到服务器，否则网站将无法选择要上传的文件。您的**浏览器**会上传文件。这就是全部。

另一件事是使用第三方控件（例如用于文件上传的 Java 小程序），如果您决定启动它们，那么您信任发布者，他可以对您的文件做任何他想做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:08:22.047

浏览器会阻止网站访问您未选择的文件。它与您的浏览器一样安全。

java、activeX 和 flash 等插件提供了额外的漏洞，使您的浏览器安全性降低。

# model - 从 observable attr 获取对象

> ID：13762735
> 
> 赞同：0
> 
> 时间：2012-12-07T12:03:44.457
> 
> 标签：model, canjs, canjs-model

我的 JSON 需要一些可观察的。数据如下所示：

```
{
"event": [{
    "id": 1,
    "name": "First",
    "param": {
        "a": 1,
        "b": [1, 2, 3]
    }
}, {
    "id": 2,
    "name": "Second",
    "param": {
        "a": 1,
        "b": [1, 2, 3, 4, 5, 6, 7],
        "c": 3
    }
}] 
```

}

如何获得类似对象的参数？我不知道 - 参数中有多少 k=>v 或对象。我需要知道 - 参数有变化，我想得到 data.attr('event.1.param') 并得到

```
"param": {
    "a": 1,
    "b": [1, 2, 3, 4, 5, 6, 7],
    "c": 3
} 
```

可能吗？或者你可以告诉我更简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T16:10:14.157

有很多方法可以获得实际的对象总线，基本上你可以像对待任何数组一样对待它们：

```
var o = new can.Observe({
    "event": [{
        "id": 1,
        "name": "First",
        "param": {
            "a": 1,
            "b": [1, 2, 3]
        }
    }, {
        "id": 2,
        "name": "Second",
        "param": {
            "a": 1,
            "b": [1, 2, 3, 4, 5, 6, 7],
            "c": 3
        }
    }]
});

o.attr('event.0.param') // -> { "a": 1, "b": [1, 2, 3] }
// Get param 1
var index = 1;
o.attr('event.' + index + '.param');

// Got through all events
o.attr('event').forEach(function(data) {

});

// You can also handle it like a normal array
var index = 1;
o.event[index].attr('param') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T07:29:13.717

抱歉，我们只需要在最后添加 .attr() ......

```
o.attr('event.0.param').attr() 
```

在这种情况下，我们将有 { "a": 1, "b": [1, 2, 3] }

# tomcat7 - Eclipse 中的 Apache Tomcat 应用程序服务器出现问题

> ID：13762738
> 
> 赞同：-1
> 
> 时间：2012-12-07T12:03:56.667
> 
> 标签：tomcat7

我已经在 Eclipse 中从我的控制台复制了这个，任何人都可以帮助找到问题：

```
Dec 07, 2012 5:27:23 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in   production environments was not found on the java.library.path: C:\Program Files\Java\jre7\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:/Program Files/Java/jre7/bin/client;C:/Program Files/Java/jre7/bin;C:/Program Files/Java/jre7/lib/i386;C:\oraclexe\app\oracle\product\10.2.0\server\bin;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\Vodafone\Vodafone Mobile Broadband\Optimization Client\;D:\$ Programing\eclipse-jee-juno-SR1-win32\eclipse;;.
Dec 07, 2012 5:27:24 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-7070"]
Dec 07, 2012 5:27:24 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Dec 07, 2012 5:27:24 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1673 ms
Dec 07, 2012 5:27:24 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Dec 07, 2012 5:27:24 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.33
Dec 07, 2012 5:27:25 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-7070"]
Dec 07, 2012 5:27:25 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Dec 07, 2012 5:27:25 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 635 ms
Dec 07, 2012 5:27:25 PM org.apache.catalina.core.StandardServer await
SEVERE: StandardServer.await: create[localhost:8005]: 
java.net.BindException: Address already in use: JVM_Bind
    at java.net.DualStackPlainSocketImpl.bind0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketBind(Unknown Source)
    at java.net.AbstractPlainSocketImpl.bind(Unknown Source)
    at java.net.PlainSocketImpl.bind(Unknown Source)
    at java.net.ServerSocket.bind(Unknown Source)
    at java.net.ServerSocket.<init>(Unknown Source)
    at org.apache.catalina.core.StandardServer.await(StandardServer.java:427)
    at org.apache.catalina.startup.Catalina.await(Catalina.java:766)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:712)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:451)
Dec 07, 2012 5:27:25 PM org.apache.coyote.AbstractProtocol pause
INFO: Pausing ProtocolHandler ["http-bio-7070"]
Dec 07, 2012 5:27:26 PM org.apache.coyote.AbstractProtocol pause
INFO: Pausing ProtocolHandler ["ajp-bio-8009"]
Dec 07, 2012 5:27:27 PM org.apache.catalina.core.StandardService stopInternal
INFO: Stopping service Catalina
Dec 07, 2012 5:27:27 PM org.apache.coyote.AbstractProtocol stop
INFO: Stopping ProtocolHandler ["http-bio-7070"]
Dec 07, 2012 5:27:29 PM org.apache.coyote.AbstractProtocol stop
INFO: Stopping ProtocolHandler ["ajp-bio-8009"]
Dec 07, 2012 5:27:31 PM org.apache.coyote.AbstractProtocol destroy
INFO: Destroying ProtocolHandler ["http-bio-7070"]
Dec 07, 2012 5:27:31 PM org.apache.coyote.AbstractProtocol destroy
INFO: Destroying ProtocolHandler ["ajp-bio-8009"] 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:33:30.283

您似乎已经在端口 8005 上运行了某种服务器。通常它是 Tomcat 的另一个实例。

如果您使用的是 Windows，则可以打开命令控制台 (cmd) 并键入以下内容：

```
netstat -aon 
```

在列表中搜索端口 8005 并使用 PID 键入以下内容（将 xxxx 替换为 PID）：

```
tasklist /FI "PID eq xxxx" 
```

这将列出正在侦听此端口的进程。

# javascript - 通过 python 套接字将 JSON 传递给 Javascript

> ID：13762742
> 
> 赞同：0
> 
> 时间：2012-12-07T12:04:02.300
> 
> 标签：javascript, python, sockets, websocket

我正在使用 python 套接字与 JavaScript 客户端进行通信。

[http://docs.python.org/2/library/socket.html](http://docs.python.org/2/library/socket.html)

在 JavaScript 代码部分之后，

```
ws = new WebSocket("ws://localhost:7777/");
ws.onopen = function(){
  alert("websocket opened.");
}
ws.onclose = function(){
  alert("websocket closed.");
}
ws.onmessage = function(e) {
  alert(e.data);
} 
```

我需要将 json 或字符串从 python 套接字传递给 JavaScript。仍然找不到传递json的方法。没有任何编码机制支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:16:09.183

由于您在客户端使用 WebSocket，因此您的 Python 代码需要使用[Web Socket 协议](https://www.rfc-editor.org/rfc/rfc6455)向客户端发送消息。[查看javascript - WebSocket Server in Python](https://stackoverflow.com/questions/5839054/websocket-server-in-python)的答案，了解一些不错的选择。

*简短回答：*如果不实现[Web Socket 协议](https://www.rfc-editor.org/rfc/rfc6455)，您将无法通过*Web Socket*`socket`使用并向客户端发送消息。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:14:38.373

在 python 中，您可以使用[JSON 模块](http://docs.python.org/2/library/json.html)。在 JavaScript 中你可以使用[jQuery.parseJSON](http://api.jquery.com/jQuery.parseJSON/)

python 文档中的示例：

```
>>> import json
>>> json.dumps(['foo', {'bar': ('baz', None, 1.0, 2)}])
'["foo", {"bar": ["baz", null, 1.0, 2]}]'
>>> print json.dumps("\"foo\bar")
"\"foo\bar"
>>> print json.dumps(u'\u1234')
"\u1234"
>>> print json.dumps('\\')
"\\"
>>> print json.dumps({"c": 0, "b": 0, "a": 0}, sort_keys=True)
{"a": 0, "b": 0, "c": 0} 
```

来自 jQuery 文档的示例：

```
var obj = jQuery.parseJSON('{"name":"John"}');
alert( obj.name === "John" ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:14:08.623

嗯，事实上你不能将 python 的对象发送到你客户的 js。但是您可以在字符串中发送有效的 json 并在客户端上通过 jQuery.parseJSON 解析它。*

# c# - XNA 中的 Hitbox 检测

> ID：13762745
> 
> 赞同：-3
> 
> 时间：2012-12-07T12:04:12.773
> 
> 标签：c#, xna

我在检查我的角色是否在我的 XNA 游戏中被击中时遇到问题。我有一个包含命中框的字符类，但我怎么可能让它检查其他字符被击中？

有没有办法这样做：

```
if(this.hitbox.Y = [any other character using this class].attackbox.Y) 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-07T12:48:50.267

据我了解，“命中”是当 hitbox1 与 hitbox2 有非空交集时。我建议如下（对于 2d hitboxes）

在 XNA 框架中有一个方法：`Rectangle.Intersects()`，所以使用它。

手动的方法看起来有点像下面描述的：假设，hitbox 是一个坐标为 [(x1,y1),(x2,y2)] 的矩形，那么我们得到了几个类似于下面的替代情况

```
if(h1.x2 >= h2.x1 && h1.y2 >= h2.y1)
{
    \\this is one of cases when we got hit
} 
```

这是我会做的方式。

# c# - 将 XML 请求正文添加到 Oauth IConsumerRequest

> ID：13762746
> 
> 赞同：1
> 
> 时间：2012-12-07T12:04:13.220
> 
> 标签：c#, rest, quickbooks, intuit-partner-platform

大家好，我正在从事一个涉及从 Intuit Anywhere 获取数据的项目。当使用 Oauth 签名的 url 作为请求发送时，该过程工作正常。有人可以帮助我如何将 xml 请求添加到 IConsumerRequest 的正文中。

```
 OAuthConsumerContext consumerContext = new OAuthConsumerContext
                {
                    ConsumerKey = "consumerkey",
                    SignatureMethod = SignatureMethod.HmacSha1,
                    ConsumerSecret = "consumersecret"
                };

  OAuthSession oSession = new OAuthSession(consumerContext, "https://oauth.intuit.com/oauth/v1/get_request_token",
                                        "https://workplace.intuit.com/Connect/Begin",
                                        "https://oauth.intuit.com/oauth/v1/get_access_token");

                oSession.ConsumerContext.UseHeaderForOAuthParameters = true;
                oSession.AccessToken = new TokenBase
                {
                    Token = Session["accessToken"].ToString(),
                    ConsumerKey = "consumerkey",
                    TokenSecret = Session["accessTokenSecret"].ToString()
                };

                IConsumerRequest conReq = oSession.Request();
                 string body = @"<?xml version=""1.0"" encoding=""utf-8""?>
    <AccountQuery xmlns=""http://www.intuit.com/sb/cdm/v2"">
      <ListIdSet>
        <Id idDomain=""QB"">143</Id>
        <Id idDomain=""QB"">130</Id>
      </ListIdSet>
    </AccountQuery>";
                    conReq = conReq.Get();
                conReq = conReq.ForUrl("https://services.intuit.com/sb/account/v2/536779769");
  conReq.RequestBody=body;
                   try
                {
                    conReq = conReq.SignWithToken();
                }
                catch (Exception ex)
                {
                    throw ex;
                }
                string header = conReq.Context.GenerateOAuthParametersForHeader();
                string serviceResponse = conReq.ReadBody(); 
```

我收到一个错误无法发送具有此动词类型的内容正文。有人可以指出错误是什么，或者是否可以对 Web 请求执行相同的操作？请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T08:43:04.803

这很有效。下面是我从 intuit 论坛获得的示例代码 - [https://idnforums.intuit.com/messageview.aspx?catid=86&threadid=18870&enterthread=y](https://idnforums.intuit.com/messageview.aspx?catid=86&threadid=18870&enterthread=y)

```
 //using DevDefined.OAuth.Consumer;
//using DevDefined.OAuth.Framework;

protected void GetBalanceSheet()
{
    OAuthConsumerContext consumerContext = new OAuthConsumerContext
    {
        ConsumerKey = ConfigurationManager.AppSettings["consumerKey"].ToString(),
        SignatureMethod = SignatureMethod.HmacSha1,
        ConsumerSecret = ConfigurationManager.AppSettings["consumerSecret"].ToString()
    };

    OAuthSession oSession = new OAuthSession(consumerContext, "https://oauth.intuit.com/oauth/v1/get_request_token",
                            "https://workplace.intuit.com/Connect/Begin",
                            "https://oauth.intuit.com/oauth/v1/get_access_token");

    oSession.ConsumerContext.UseHeaderForOAuthParameters = true;

    oSession.AccessToken = new TokenBase
    {
        Token = Session["accessToken"].ToString(),
        ConsumerKey = ConfigurationManager.AppSettings["consumerKey"].ToString(),
        TokenSecret = Session["accessTokenSecret"].ToString()
    };

    var body = "<AdvancedReportQuery xmlns=\"http://www.intuit.com/sb/cdm/v2\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.intuit.com/sb/cdm/v2 ..//RestDataFilter.xsd\"><BalanceSheetStd><OfferingId>ipp</OfferingId><EndTransactionDate>2012-06-01</EndTransactionDate></BalanceSheetStd></AdvancedReportQuery>";

    IConsumerRequest conReq = oSession.Request();
    conReq = conReq.Post().WithRawContentType("text/xml").WithRawContent(System.Text.Encoding.ASCII.GetBytes(body)); ;
    conReq = conReq.ForUrl("https://services.intuit.com/sb/advancedreport/v2/508053445");
    try
    {
        conReq = conReq.SignWithToken();
    }
    catch (Exception ex)
    {
        throw ex;
    }

    string serviceResponse = conReq.ReadBody();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:22:39.947

Karthi，听起来您正在尝试执行 GET 请求并将内容添加到正文中，这会导致该错误。

请参阅有关为您的请求构建标头的文档： [https ://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0500_QuickBooks_Windows/0100_Calling_Data_Services/0010_Request_Header](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0500_QuickBooks_Windows/0100_Calling_Data_Services/0010_Request_Header)

问候，震惊

# php - 从不同的页面链接获取页面的所有查看次数

> ID：13762748
> 
> 赞同：2
> 
> 时间：2012-12-07T12:04:18.030
> 
> 标签：php

我想跟踪来自不同页面链接的页面的查看次数，而不是页面重新加载或刷新。

> 当从各个页面查看页面时，我想调用此函数。

```
trackDifferentViewCount($Infos->user_id,'1','','1'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:10:53.580

“刷新”是另一个页面请求。它与常规页面视图没有区别。要过滤掉这些，您需要记住用户访问的最后一个页面，如果该页面是同一页面，则不能将其视为不同的访问。您可以为此使用会话或 cookie。

这确实意味着如果用户关闭浏览器并稍后再次加载相同的页面，它仍然不会被视为不同的访问，即使它是。没有 100% 万无一失的方法来处理这个问题。

# r - 将表转换为向量以在 r 上使用 hist()

> ID：13762754
> 
> 赞同：6
> 
> 时间：2012-12-07T12:04:36.183
> 
> 标签：r, vector

这几天我正在学习一些 R，我在一个文件中有一些数据：

```
0.7300719696546073 0.5508739992014652 0.2371535688287479
0.9359803887798046 0.8249035576959065 0.3715476175169042
0.3403916445508408 0.8036890953987708 0.8079012937499597 
```

就像那样......（但更大）

```
data = read.table("data.txt") 
```

在某些操作中，我希望将所有数据放在一个向量上以供使用`hist(data)` ，但我得到：`'x' must be numeric`

我尝试了不同的东西，例如`as.vector(data)`or`lapply(c(data), as.numeric)`但没有任何效果。

你能帮我一把吗？

已解决：unlist(data)
PS：预计不起作用，因为我有一个 100(cols)*5000(rows) 的表

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T12:09:39.107

```
unlist(data) 
```

会成功的。这是将数据框转换为向量的简单方法。

* * *

使用您的数据：

```
data <- read.table(text="
0.7300719696546073 0.5508739992014652 0.2371535688287479
0.9359803887798046 0.8249035576959065 0.3715476175169042
0.3403916445508408 0.8036890953987708 0.8079012937499597")

unlist(data) 
```

结果是一个向量（带有命名元素）：

```
 V11       V12       V13       V21       V22       V23       V31       V32       V33 
0.7300720 0.9359804 0.3403916 0.5508740 0.8249036 0.8036891 0.2371536 0.3715476 0.8079013 
```

如果您不想拥有名称，请使用以下`use.names = FALSE`参数`unlist`：

```
unlist(data, use.names = FALSE)

[1] 0.7300720 0.9359804 0.3403916 0.5508740 0.8249036 0.8036891 0.2371536 0.3715476 0.8079013 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T12:12:04.183

`as.numeric(as.matrix(data))`会做的。不是特别是。优雅的！另外，在调用你的数据时要小心，数据。您可以使用它`str(data)`来查看数据的结构。但是，`read.table`返回一个`data frame`.

与 的答案相比`unlist(data)`，此方法不会为您提供自动构造的变量名称（V1...Vn）。

# java - Java 表格单元格渲染器仅在第一次单击后才处于活动状态

> ID：13762758
> 
> 赞同：0
> 
> 时间：2012-12-07T12:04:58.353
> 
> 标签：java, swing

我为即时交互创建了一个表（用于数独求解器），但鼠标事件（进入、退出、单击）只有在我单击单元格后才会到达单元格渲染器。（对于每个单元格，我必须在激活渲染器之前单击一次。稍后返回该单元格，它将立即工作。）

如何更改我的代码以立即激活表格单元格？或者我可以找出第一次鼠标点击到底发生了什么，这样我就可以在创建表后立即执行这些操作？（我试图在 UI 层次结构的所有级别上捕获鼠标事件，但找不到它。）

我已将表格缩小到最小 1x1 并删除了所有不必要的代码。其余代码如下所示。请注意，鼠标悬停（显示一个黑色小方块）仅在单击后才处于活动状态。（代码完整，可以按原样编译。）

```
import javax.swing.*;
import javax.swing.event.CellEditorListener;
import javax.swing.table.*;
import java.awt.*;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.util.EventObject;

public class GUI extends JFrame
{
  private class Table extends JTable
  {
    public Table()
    {
      super(new AbstractTableModel()
        {
          public int getRowCount() { return 1; }
          public int getColumnCount() { return 1; }
          public Object getValueAt(int x, int y) { return null; }
          @Override public boolean isCellEditable(int x, int y) { return true; }
        });
    }
    @Override public TableCellRenderer getCellRenderer(int x, int y) { return new Editor(); }
    @Override public TableCellEditor getCellEditor(int x, int y) { return new Editor(); }
  }

  private class Editor extends JComponent implements TableCellEditor, TableCellRenderer, MouseListener
  {
    private boolean hasFocus = false;

    public Editor()
    {
      addMouseListener(this);
    }

    @Override public void paintComponent(Graphics g)
    {
      if (hasFocus)
      {
        g.fillRect(0, 0, 9, 9);
      }
    }

    public void mouseEntered(MouseEvent e)
    {
      hasFocus = true;
      repaint();
    }

    public void mouseExited(MouseEvent e)
    {
      hasFocus = false;
      repaint();
    }

    public void mouseClicked(MouseEvent e) { }
    public void mousePressed(MouseEvent e) { }
    public void mouseReleased(MouseEvent e) { }

    public Object getCellEditorValue() { return 0; }
    public boolean isCellEditable(EventObject e) { return true; }
    public boolean shouldSelectCell(EventObject e) { return false; }
    public boolean stopCellEditing() { return true; }
    public void cancelCellEditing() { }
    public void addCellEditorListener(CellEditorListener l) { }
    public void removeCellEditorListener(CellEditorListener l) { }
    public Component getTableCellEditorComponent(JTable t, Object v, boolean s, int x, int y) { return this; }
    public Component getTableCellRendererComponent(JTable t, Object v, boolean s, boolean f, int x, int y) { return this; }
  }

  public static void main(String[] args)
  {
    new GUI();
  }

  public GUI()
  {
    setContentPane(new Table());
    setDefaultCloseOperation (WindowConstants.EXIT_ON_CLOSE);
    pack();
    setVisible(true);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:11:51.350

那是因为渲染器不应该处理事件。渲染器是一个独特的组件，仅用于绘制表格或列中的每个单元格。

当表格自己绘制时，它会遍历单元格。对于每个单元格，修改渲染器组件，然后获取渲染器组件的“屏幕截图”并将其粘贴到表格单元格中。所以它不能处理事件。您应该在表本身上添加一个事件侦听器。不在渲染器上。

单击后，它会起作用，因为您的渲染器也是编辑器，并且编辑器可以处理事件。但在我看来，您的表格实际上是不可编辑的，而且您根本不应该有编辑器。而是在表上添加一个侦听器。

# android - android：发生 onItemLongClick 时不会触发 onListItemClick

> ID：13762761
> 
> 赞同：1
> 
> 时间：2012-12-07T12:05:03.077
> 
> 标签：android

已经实现了 OnItemLongClickListener。当 LongClicked 列表项时，我启用了相关列表项的按钮。在 LongClicked 之后，按钮成功启用，但 onListItemClick 不会被触发。如果我在没有 LongClicked 的情况下 onListItemClick，它会成功触发。如果 LongClicked 在此之前触发，为什么 onListItemClick 不会触发？

```
 OnItemLongClickListener listener =  new OnItemLongClickListener(){
        public boolean onItemLongClick(AdapterView<?> av, View v, int position, long id) {
            Account a = null;
            a = (Account) av.getItemAtPosition(position);               
            Toast.makeText(AccountActivity.this, "Long Clicked : " + a.getAccountName(), Toast.LENGTH_LONG).show();
            v.findViewById(R.id.btn_delete).setVisibility(View.VISIBLE);
            return false;
        }
    };
    getListView().setOnItemLongClickListener(listener);

  public void onListItemClick(ListView l, View v, int position, long id) {
    // Do something when a list item is clicked
    Account a = null;
    a = (Account) l.getItemAtPosition(position);
    Toast.makeText(AccountActivity.this, a.getAccountName(), Toast.LENGTH_SHORT).show();
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:19:08.550

尝试如下实现，

**setOnItemLongClickListener**

**setOnItemClickListener**

```
getListView().setOnItemLongClickListener(new OnItemLongClickListener() {
    public boolean onItemLongClick(AdapterView<?> arg0, View arg1,int arg2, long arg3) {
        Account a = null;
        a = (Account) av.getItemAtPosition(position);               
        Toast.makeText(AccountActivity.this, "Long Clicked : " + a.getAccountName(), Toast.LENGTH_LONG).show();
         v.findViewById(R.id.btn_delete).setVisibility(View.VISIBLE);                   

        return false;
   }
});

getListView().setOnItemClickListener(new OnItemClickListener() {
   public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) {
     Account a = null;
     a = (Account) l.getItemAtPosition(position);
     Toast.makeText(AccountActivity.this, a.getAccountName(), Toast.LENGTH_SHORT).show();  
   };
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:38:21.960

```
 OnItemLongClickListener listener =  new OnItemLongClickListener(){
        public boolean onItemLongClick(AdapterView<?> av, View v, int position, long id) {
            Account a = null;
            a = (Account) av.getItemAtPosition(position);               
            Toast.makeText(AccountActivity.this, "Long Clicked : " + a.getAccountName(), Toast.LENGTH_LONG).show();
            v.findViewById(R.id.btn_delete).setVisibility(View.VISIBLE);
            return false;
        }
    };
    getListView().setOnItemLongClickListener(listener); 
```

我刚刚找到了问题的原因。这是我用来在单击 OnItemLongClick 时启用删除按钮的代码行。

**v.findViewById(R.id.btn_delete).setVisibility(View.VISIBLE);**

当我删除该行时，代码可以完美运行。但是我仍然没有解决问题的方法。单击 OnItemLongClick 时，我需要使用该行代码来启用删除按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T07:28:11.813

我只是用 ImageView 替换了按钮。然后就没有问题了。两项活动进展顺利。所以我意识到按钮有问题。我认为我们必须在按钮中设置一些属性才能在这种情况下正常工作。您可以模拟问题。1\. 使用 Listview。2\. 通过添加一个TextView 和一个ImageButton 或一个Button 作为ListItem 来自定义列表视图。默认情况下将按钮的可见性设置为不可见。3、如上实现onItemLongClick事件，在ItemLongClicked时制作按钮。4\. 一旦您 ItemLongClicked 一个 ListItem 并使 ListItem 中的按钮可见，特定 ListItem 的 onListItemClick 事件将不起作用。

# x11 - Libssh、X11 转发

> ID：13762762
> 
> 赞同：1
> 
> 时间：2012-12-07T12:05:06.213
> 
> 标签：x11, libssh

我正在尝试使用 libssh 进行用户 X11 转发。因为我还没有找到这样做的好例子，任何人都可以给我一些例子，如何将 X11 与 libssh 一起使用？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T09:34:09.110

您是否阅读了带有代码示例的教程？

[http://api.libssh.org/master/libssh_tutor_forwarding.html](http://api.libssh.org/master/libssh_tutor_forwarding.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T11:08:22.030

我也试图让 X11 与 libssh 一起工作，但没有成功。我只能通过不需要 GUI 的常规 cmds。

如果您可以选择 java，我会推荐 Java Secure Channel 库。文档不是很好，但是有一个包含 X11 代码的示例文件夹对我很有帮助。它与 xming 配合得很好。

[http://www.jcraft.com/jsch/](http://www.jcraft.com/jsch/)

# php - 在服务器端代码中确定浏览器类型 (PHP)

> ID：13762769
> 
> 赞同：-1
> 
> 时间：2012-12-07T12:05:34.577
> 
> 标签：php, internet-explorer, http

> **可能重复：**
> [确定浏览器的版本](https://stackoverflow.com/questions/7967008/determine-browsers-version)

我想确定服务器代码中的浏览器类型。

事实上，我花了太多时间来破解**HTML/CSS**来让网站在所有浏览器中一致地显示。网站呈现不同（不正确）的唯一浏览器是 IE，所以我想通知用户，以便他们了解为什么页面不符合他们的预期。

为此，我只对检测来自 IE 的请求感兴趣，以便通知 IE 用户最好使用其他 Web 浏览器查看该站点。

我相信浏览器类型是作为 GET 请求的一部分在 HTTP 标头之一中发送的。我正在考虑在我的逻辑中使用它。有没有更好的办法？

代码片段将非常有用。类似于：

```
<?php
 $flag = $_GET(SOME_VARIABLE); // check if it is ANY IE version
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T12:06:44.393

你可以看看 $_SERVER['HTTP_USER_AGENT'] :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T12:09:03.503

PHP 的[`get_browser`](http://us3.php.net/manual/en/function.get-browser.php)功能应该很适合你——

> **get_browser** - 告诉用户浏览器的功能
> 
> **返回值**- 信息以对象或数组的形式返回，其中将包含各种数据元素，例如，浏览器的主要和次要版本号和 ID 字符串；帧、JavaScript 和 cookie 等功能的 TRUE/FALSE 值；等等。

```
$browser = get_browser(null, true); 
```

该函数可以返回一个数组，其中包含有关用户浏览器的大量信息

```
Array
(
    ...
    [platform] => WinXP
    [browser] => Firefox
    [version] => 0.9
    [majorver] => 0
    [minorver] => 9
    ...
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T12:08:14.643

互联网上充满了浏览器检测的功能

```
 function detect_ie(){
     if (isset($_SERVER['HTTP_USER_AGENT']) && 
         (strpos($_SERVER['HTTP_USER_AGENT'], 'MSIE') !== false)){
           return true;
        }else{
           return false;
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T12:38:54.040

如果你想更具体，你可以试试。

```
 function getBrowser()
    {
        $u_agent = $_SERVER['HTTP_USER_AGENT'];
        $bname = 'Unknown';
        $platform = 'Unknown';
        $version= "";
        if (preg_match('/linux/i', $u_agent))
        {
            $platform = 'linux';
        }
        elseif (preg_match('/macintosh|mac os x/i', $u_agent))
        {
            $platform = 'mac';
        }
        elseif (preg_match('/windows|win32/i', $u_agent))
        {
            $platform = 'windows';
        }

        if(preg_match('/MSIE/i',$u_agent) && !preg_match('/Opera/i',$u_agent))
        {
            $bname = 'Internet Explorer';
            $ub = "MSIE";
        }
        elseif(preg_match('/Firefox/i',$u_agent))
        {
            $bname = 'Mozilla Firefox';
            $ub = "Firefox";
        }
        elseif(preg_match('/Chrome/i',$u_agent))
        {
            $bname = 'Google Chrome';
            $ub = "Chrome";
        }
        elseif(preg_match('/Safari/i',$u_agent))
        {
            $bname = 'Apple Safari';
            $ub = "Safari";
        }
        elseif(preg_match('/Opera/i',$u_agent))
        {
            $bname = 'Opera';
            $ub = "Opera";
        }
        elseif(preg_match('/Netscape/i',$u_agent))
        {
            $bname = 'Netscape';
            $ub = "Netscape";
        }

        $known = array('Version', $ub, 'other');
        $pattern = '#(?' . join('|', $known) .')[/ ]+(?[0-9.|a-zA-Z.]*)#';
        if (!preg_match_all($pattern, $u_agent, $matches))
        {

        }
        $i = count($matches['browser']);
        if ($i != 1)
        {
            if (strripos($u_agent,"Version")  $u_agent,
            'name'      => $bname,
            'version'   => $version,
            'platform'  => $platform,
            'pattern'    => $pattern
        );
    } 

```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T12:48:01.453

这可以解决问题[，](http://php.net/manual/en/function.get-browser.php)但您也应该使用 JavaScript 在客户端进行。

# spring - 使用spring security时如何更改密码哈希算法？

> ID：13762772
> 
> 赞同：6
> 
> 时间：2012-12-07T12:05:51.613
> 
> 标签：spring, spring-security

我正在开发一个基于 Spring MVC 的遗留 Web 应用程序，该应用程序使用 - 按照当前标准 - 不适当的散列算法。现在我想逐步将所有哈希迁移到 bcrypt。我的高级策略是：

*   默认情况下使用 bcrypt 生成新的哈希
*   当用户成功登录并且仍然有旧哈希时，应用程序会用新的 bcrypt 哈希替换旧哈希。

使用 Spring Security 实施此策略的最惯用的方法是什么？我应该使用自定义过滤器还是我的 AccessDecisionManager 或...？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T23:00:44.357

您可能需要自定义您的`AuthenticationProvider`的密码，因为那是密码与用户数据实际比较的地方，并且您拥有所需的所有信息。

在该`authenticate`方法中，您将首先加载用户数据。`BCryptPasswordEncoder`然后使用 a和您的旧密码检查用户提供的密码。如果两者都没有返回匹配项，则抛出一个`BadCredentialsException`.

如果用户身份验证成功（非常重要:-)）并且密码是旧格式（旧编码器匹配），那么您将调用一些额外的代码来更新用户的帐户数据并用 bcrypt 替换旧哈希。`BCryptPasswordEncoder`也可用于创建新的哈希。

如果需要，您可以在进行比较之前提前检测存储的哈希是否已经 bcrypt。Bcrypt 字符串具有非常独特的格式。

另请注意，为了更难猜测有效的帐户名称，您应该尝试使该方法在提供的用户名存在和不存在时都表现相同（就所花费的时间而言）。因此，即使您没有提供的用户名的任何用户数据，也要调用编码器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:15:07.637

我认为最好的方法是为身份验证提供者指定密码编码器，如下所示，有关更多信息，请参阅[doc](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/ns-config.html#ns-password-encoder)

```
<authentication-manager>
    <authentication-provider user-service-ref="userService">
        <password-encoder ref="passwordEncoder">
            <salt-source ref="saltSource" />
        </password-encoder>
    </authentication-provider>
</authentication-manager>

<beans:bean     class="org.springframework.security.authentication.encoding.Md5PasswordEncoder"
    id="passwordEncoder" />

<beans:bean     class="org.springframework.security.authentication.dao.ReflectionSaltSource"
    id="saltSource">
    <beans:property name="userPropertyToUse" value="userName" />
</beans:bean> 
```

# wordpress - 重用 Wordpress 类别

> ID：13762774
> 
> 赞同：0
> 
> 时间：2012-12-07T12:06:04.417
> 
> 标签：wordpress

`podcast`我的博客有一个从前`entcast`一段时间更改过的类别 slug 。

今天，我想重用`entcast`slug，但我不能用这个名字创建一个类别，因为 wp 说我已经有了那个。我认为 wp 保留一个旧注册表，就像它为帖子历史记录所做的那样。

我的问题是：

1.  我应该怎么做才能重新利用`entcast`蛞蝓？
2.  是否存在丢失数据的风险？

因为我确实认为这种更改应该在数据库本身中完成，所以这就是第二个问题的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:21:59.023

在管理员中，单击帖子 > 类别。浏览到您的播客类别。单击编辑以对其进行编辑。slug 字段很可能是“entcast”，尽管 Name 字段是“podcast”。更改 slug 字段（如果可用，则更改为“播客”）。然后您将能够创建一个“encast”类别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:39:55.893

您收到您所说的 WordPress 消息的唯一可能性是，如果您使用的类别名称与具有相同父级的现有类别名称相同。（否则，请发布您收到的确切 WordPress 消息）。因此，如果您想使用以前使用但不再使用的 slug（您可以通过查看 WordPress 数据库中 wp_terms 的内容来检查它是否仍然存在），您可以通过键入任何不存在的类别名称来完美地做到这一点已经用于同一个父级（这是逻辑上的必要），如果它与名称本身不对应，则通过手动指定 slug。没有理由不应该这样做。如果此答案不能解决您的问题，请：1）检查 wp_terms 以确保“encast”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T15:17:56.733

您必须检查 WordPress 数据库中的 wp_terms 以查看哪个类别使用此 slug。请注意所有类别都使用术语（这就是数据库表称为 wp_terms 的原因）。术语基本上是名称（显示名称）和 slug（ID 名称）的关联。因此，如果没有类别使用 slug “entcast”，这并不意味着该 slug 未被其他分类法使用（例如标签）。确定的最佳方法是检查 WordPress MySQL 数据库中的 wp_terms 表。如果另一个分类法使用相同的 slug，您将必须访问每个使用该 slug 的分类法并对其进行更改，使其再次变得“免费”。请参阅此图像以说明 WordPress 对术语和分类法的使用： ![在此处输入图像描述](../Images/69b52a830eeb4de6a5fd0d8a03a95ada.png)

# css - li 中的 div 是错误的用法吗？

> ID：13762779
> 
> 赞同：2
> 
> 时间：2012-12-07T12:06:36.937
> 
> 标签：css, html, xhtml, html-lists

例子;

```
<ul>
  <li>
   <div class="img1"><img src="img.jpg" /></div>
   <div class="cs1">Text text</div>
   <div class="cs2">text text</div>
   <div class="button">Next</div>  
  </li>
</ul> 
```

就像上面 li 中的代码块 div。听说用法不对。这是真的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T12:09:29.400

这两个元素都是块元素，因此嵌套它们很好。[查看Mozilla 文档](https://developer.mozilla.org/en-US/docs/HTML/Element/li)中允许的`<li>`内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T12:15:43.183

根据 W3C 验证器，使用除法是完全可以的。

[您还可以在w3cvalidator](http://validator.w3.org/#validate_by_input)中检查您的 html 是否有效

希望这个验证器有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:16:24.047

如果您有疑问，最好的检查位置是 HTML DTD。如果你第一次看它有点神秘，但它是一个很好的来源。

让我们看看你的例子： [http ://www.w3.org/TR/html4/struct/lists.html#edef-UL](http://www.w3.org/TR/html4/struct/lists.html#edef-UL)

DTD 表示在 UL（或 OL）中，您只能拥有 LI（一个或多个）

```
<!ELEMENT UL - - (LI)+                 -- unordered list --> 
```

然后，如果您看一下 LI 元素：

```
<!ELEMENT LI - O (%flow;)*             -- list item --> 
```

它可以从“流”快捷方式中获取任何元素（零个或多个，“*”代表）。您可以单击 %flow 链接以了解这些元素是什么。

您可以从中学到许多其他东西，即给定元素可以具有什么样的属性等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T12:39:49.063

HTML 语法（任何版本）允许`div`元素内的`li`元素，因为可以轻松地从规范中检查，或使用验证器。

除了纯粹的句法之外，“错误使用”问题实际上是使用`ul`带有单个项目的项目符号列表（元素）。它在形式上没有任何问题。它似乎没有任何意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T12:07:43.100

不，它经常被开发人员用作更简单的 CSS 友好下拉菜单，以及您可能想到的许多其他用途。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-07T12:11:02.350

不，这不是错误的用途，但这取决于您想要什么。如果你想要一个下拉菜单，每个 div 都必须在`<li>` 如下所示的示例中。

例如：

```
<ul>
   <li><div class="img1"><img src="img.jpg" /></div>
   <li><div class="cs1">Text text</div>  </li>
   <li><div class="cs2">text text</div>  </li>
</ul> 
```

# linux - 找到模式后 2 个单词的 Grep

> ID：13762783
> 
> 赞同：0
> 
> 时间：2012-12-07T12:06:43.897
> 
> 标签：linux, grep

场景是我有一个文件并包含一个字符串“日期和时间是 2012-12-07 17:11:50”

我已经搜索并找到了一个命令

```
grep 'the date and time is' 2012-12-07.txt | cut -d\   -f5 
```

它只显示第 5 个单词，我需要第 5 个和第 6 个的组合，所以我尝试了

```
grep 'the date and time is' 2012-12-07.txt | cut -d\   -f5 -f6 
```

但它的错误。

现在，如何用一个命令 grep 第 5 个和第 6 个单词

我只需要像这样的输出`2012-12-07 17:11:50`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T12:09:35.310

你应该可以使用

```
$ grep 'the date and time is' 2012-12-07.txt | cut -d' ' -f6-7 
```

检查[手册页](http://linux.die.net/man/1/cut)`-f`以获取选项参数的语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:15:59.667

这听起来像是一个工作`awk`，这*可能*比构建一个由多个进程组成的管道要快一点：

```
pax> echo 'hello
           the date and time is 2012-12-07 17:11:50
           goodbye' | awk '/the date and time is/ {print $6" "$7}'
2012-12-07 17:11:50 
```

它将搜索和修改结合在一个命令中。

请记住，与您的解决方案一样，如果您的搜索字符串*之前*有内容，则此解决方案将无济于事，但`awk`也可以根据您的需求的复杂性来执行此操作，例如：

```
pax> echo 'hello
           Today (Friday), the date and time is 2012-12-07 17:11:50
           goodbye' | awk '/the date and time is/ {
                               sub (".*is","",$0);
                               print $1" "$2
                               }'
2012-12-07 17:11:50 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:13:34.000

我猜它不是第 5 和第 6 而是第 6 和第 7

```
grep 'the date and time is' 2012-12-07.txt |awk '{print $6,$7}' 
```

# css - CSS3背景图片位置淡入淡出过渡

> ID：13762791
> 
> 赞同：1
> 
> 时间：2012-12-07T12:07:14.223
> 
> 标签：css, css-transitions

我有一个带有幻灯片控件的精灵图像。

当用户将鼠标悬停在每个控件上时，我想更改其背景位置，使其看起来处于活动状态。

我在用：

```
-moz-transition: background-position 0.45s linear;
-webkit-transition: background-position 0.45s linear;
-o-transition: background-position 0.45s linear; 
```

我的代码在[这个小提琴](http://jsfiddle.net/hespb/1/)中（显然 bg 图像不是我的控件，而是随机图像）。

我希望过渡效果是人们在将鼠标悬停在一个项目上时所期望的（可能会淡出），而不是看起来像 bg 图像实际移动的当前效果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T12:52:56.847

实现此目的的一种方法是在锚标记内放置一个隐藏的跨度，并设置背景位置以显示您希望在悬停时显示的精灵区域。最初，这个跨度将被隐藏，不透明度为 0。

然后，在悬停时，您可以将不透明度转换为淡入，而不是转换背景位置。

代码看起来像这样：

**html**

```
<a><span></span></a> 
```

**css**

```
a {
  display: block;
  width: 100px;
  height: 100px;
  border-radius: 50px;   
  background-image: url("http://example.com/somepic.jpg");
}

a span {
  display: block;
  width: 100px;
  height: 100px;
  border-radius: 50px;
  background-image: url("http://example.com/somepic.jpg");
  background-position: 150px 210px;
  opacity: 0;
  -moz-transition: opacity 0.45s;
  -webkit-transition: opacity 0.45s;
  -o-transition: opacity 0.45s;
}

a:hover span {
  opacity: 1;
}​​​ 
```

您可以在[http://jsfiddle.net/hespb/5/进行演示](http://jsfiddle.net/hespb/5/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-07T12:13:30.650

您的代码更改了背景位置。

```
背景位置：150px 210px；

```

要让它正面，您需要更改背景颜色，添加不透明度并为其设置动画。

```
  背景：RGBA（255,255,255,0）；

```

# r - 使用 ggplot2 从 KML 数据绘制 Choropleth 地图

> ID：13762793
> 
> 赞同：3
> 
> 时间：2012-12-07T12:07:32.467
> 
> 标签：r, ggplot2, kml

如何使用来自 KML 数据源的 ggplot2 绘制等值线图或专题图？

KML 示例：[https ://dl.dropbox.com/u/1156404/nhs_pct.kml](https://dl.dropbox.com/u/1156404/nhs_pct.kml)

示例数据：[https ://dl.dropbox.com/u/1156404/nhs_dent_stat_pct.csv](https://dl.dropbox.com/u/1156404/nhs_dent_stat_pct.csv)

这是我到目前为止所得到的：

```
install.packages("rgdal")
library(rgdal)
library(ggplot2)

fn='nhs_pct.kml'

#Look up the list of layers
ogrListLayers(fn)

#The KML file was originally grabbed from Google Fusion Tables
#There's only one layer...but we still need to identify it
kml=readOGR(fn,layer='Fusiontables folder')

#This seems to work for plotting boundaries:
plot(kml)

#And this:
kk=fortify(kml)
ggplot(kk, aes(x=long, y=lat,group=group))+ geom_polygon()

#Add some data into the mix
nhs <- read.csv("nhs_dent_stat_pct.csv")

kml@data=merge(kml@data,nhs,by.x='Name',by.y='PCT.ONS.CODE')

#I think I can plot against this data using plot()?
plot(kml,col=gray(kml@data$A.30.Sep.2012/100))
#But is that actually doing what I think it's doing?!
#And if so, how can experiment using other colour palettes?

#But the real question is: HOW DO I DO COLOUR PLOTS USING gggplot?
ggplot(kk, aes(x=long, y=lat,group=group)) #+ ???? 
```

所以我的问题是：我如何使用例如 kml@data$A.30.Sep.2012 值来为区域着色？

作为一个补充问题：然后我如何在 ggplot 上下文中尝试不同的调色板？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T20:51:20.563

在 R 中绘制地图通常很痛苦。这是一个很大程度上遵循哈德利在[https://github.com/hadley/ggplot2/wiki/plotting-polygon-shapefiles上的教程的答案](https://github.com/hadley/ggplot2/wiki/plotting-polygon-shapefiles)

```
library(maptools)
library(rgdal)
library(ggplot2)
library(plyr)

fn='nhs_pct.kml'
nhs <- read.csv("nhs_dent_stat_pct.csv")

kml <- readOGR(fn, layer="Fusiontables folder") 
```

注意：我收到一条关于孤儿洞的消息。[在阅读https://stat.ethz.ch/pipermail/r-help/2011-July/283281.html](https://stat.ethz.ch/pipermail/r-help/2011-July/283281.html)后，我加入了以下行

```
slot(kml, "polygons") <- lapply(slot(kml, "polygons"), checkPolygonsHoles)

## The rest more or less follows Hadley's tutorial 
kml.points = fortify(kml, region="Name")
kml.df = merge(kml.points, kml@data, by.x="id",by.y="Name",sort=FALSE)
kml.df <- merge(kml.df,nhs,by.x="id",by.y="PCT.ONS.CODE",sort=FALSE,all.x=T,all.y=F)

## Order matters for geom_path!
kml.df <- kml.df[order(kml.df$order),]

nhs.plot <- ggplot(kml.df, aes(long,lat,group=group,fill=A.30.Sep.2012)) + 
  geom_polygon() +
  geom_path(color="gray") +
  coord_equal() +
  scale_fill_gradient("The outcome") + 
    scale_x_continuous("") + scale_y_continuous("") +   theme_bw() 
```

# authentication - 是否可以在没有 Facebook 安装应用程序的情况下进行身份验证？

> ID：13762798
> 
> 赞同：1
> 
> 时间：2012-12-07T12:07:58.590
> 
> 标签：authentication, facebook-social-plugins, facebook-app-requests, facebook-authorization

我正在为公司的活动建立一个公众投票系统。Facebook auth 将是一种可行的实施方式。问题是客户特别不希望将应用程序安装在选民配置文件中。有没有办法在不安装应用程序的情况下对用户进行身份验证，或者安装应用程序通常是流程的核心？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:59:56.903

不可以。为了检索有关用户的信息（如 user_id、电子邮件等），他们必须通过您的应用进行身份验证。

请记住，虽然它以相同的方式工作，但您可以让用户使用他们的 facebook 帐户“登录”到您的应用程序，但不能发布任何内容，也不能请求任何特殊权限等。那里的观点有所改变。为每个用户在您的应用程序上设置默认隐私“只有我”，然后它肯定不会出现在任何地方。

# c++ - 使用 pthreads 时的后台线程（很好，优先级）

> ID：13762799
> 
> 赞同：5
> 
> 时间：2012-12-07T12:08:08.777
> 
> 标签：c++, c, linux, pthreads

我有一个使用 pthreads 进行繁重后台处理的 GUI 应用程序。

当后台处理正在运行时，GUI 非常无响应，我认为这是因为后台线程正在耗尽 CPU 时间。

在 Windows 上，您可以在后台线程上 ::SetThreadPriority(hThread, THREAD_PRIORITY_BELOW_NORMAL)，一切都很好。

但是在 Linux 上，我使用的是 pthreads，但我找不到一个好的选择。

我已经考虑过了；

*   ::sched_setscheduler(SCHED_FIFO) 或 ::sched_setscheduler(SCHED_RR) - 这是不可行的，因为它需要 root（对我的 GUI 应用程序不好） - 这也会使 GUI 线程有太多的 CPU；我只希望 GUI 优先于后台线程。
*   ::pthread_setschedparam 但是当使用除 SCHED_FIFO 或 SCHED_RR 以外的任何不支持的东西时（::sched_get_priority_min(SCHED_OTHER) 和 ::sched_get_priority_max(SCHED_OTHER) 都返回 0）
*   有多个进程并使用::nice。GUI 和后台线程之间存在太多耦合，无法实现这一点（并且将这么多代码移植到这个设计中是一项主要工作）
*   使用 ::setpriority 重新调整后台线程。这确实有效 - 但直接违背了文档所说的内容：[PThreads 文档](http://www.kernel.org/doc/man-pages/online/pages/man7/pthreads.7.html)（因此以后可能会在系统范围内“修复”）

我确信这是 GUI 应用程序的常见模式，所以我错过了什么？

马库斯。

编辑：将 ::setpriority 添加到选项列表（感谢 ZalewaPL）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T12:25:40.473

将后台线程的 nice 值设置为更高的值可能会有所帮助。
请参阅： [nice-Level for pthreads？](https://stackoverflow.com/questions/902539/nice-level-for-pthreads)

# linux - rpm build:spec 文件在客户端显示消息

> ID：13762800
> 
> 赞同：0
> 
> 时间：2012-12-07T12:08:10.493
> 
> 标签：linux, rpm, rpmbuild, specifications, rpm-spec

我想在卸载时在客户端打印消息，如果错误，那么我总是打印，如果它是简单的消息，如 rpm 卸载成功，那么它是可选的。客户端使用选项 -v 然后它打印（详细的其他明智的不是）

```
rpm -ivh xyz.rpm for install and rpm -ev xyz for uninstall as below. 
```

#预卸载部分

```
%preun
Processes=`ps -Ao"%p:%a"  --cols 150 |
 egrep "Launcher|rmiregistry" | grep -v grep | cut -d ":" -f1`
         if [ -n "$Processes" ]; then
                echo 'xyz is running ,first stop it then uninstall.' > /dev/stderr;
                exit 1;
         else
                 echo 'xyz service is not running' >/dev/stdout;
         fi 
```

目前上述代码打印每次 rpm 卸载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-27T12:28:20.967

您需要在 %preun 中区分升级和删除。

我在我的 *.spec 文件中使用了这个模式：

```
%preun

if [ "$1" = "0" ]; then
    # package removal
    true; # bash doesn't like 'empty' conditional blocks
elif [ "$1" = "1" ]; then
    # package upgrade
    true; # bash doesn't like 'empty' conditional blocks
fi 
```

一些 exrta 信息位于：[https ://fedoraproject.org/wiki/Packaging:ScriptletSnippets#Syntax](https://fedoraproject.org/wiki/Packaging:ScriptletSnippets#Syntax)

# java - Log4j - 记录器不工作

> ID：13762808
> 
> 赞同：1
> 
> 时间：2012-12-07T12:08:30.020
> 
> 标签：java, log4j

我有一个具有以下配置的 Log4j 属性文件：

```
log4j.rootLogger=INFO, A1

log4j.logger.metrics=INFO, METRICS

log4j.appender.A1=org.apache.log4j.ConsoleAppender
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n

log4j.appender.METRICS.layout=org.apache.log4j.PatternLayout
log4j.appender.METRICS.layout.ConversionPattern=%-4r [%t] %-5p %c %x - %m%n 
```

和Java代码：

```
private static Logger LOGGER = Logger.getLogger("com.me.MyClass");
private static Logger METRICS = Logger.getLogger("metrics");
...
LOGGER.info("This message appears");
METRICS.info("but this message does not appear"); 
```

正如所暗示的那样，发送到指标记录器的日志行永远不会出现，我正在努力找出原因。我已经确认该行确实被执行了，并且根据我读过的所有文档，就我所见，配置是正确的。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:18:53.843

如果将它添加到 log4 配置中会发生什么？

```
log4j.appender.METRICS=org.apache.log4j.ConsoleAppender 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:27:28.527

添加以下配置并查看。我认为这可能会对您有所帮助

```
log4j.rootLogger=INFO,METRICS
log4j.appender.METRICS=org.apache.log4j.ConsoleAppender 
```

# string - 检查是否可以在文件 shell 中找到包含字符串的变量

> ID：13762813
> 
> 赞同：1
> 
> 时间：2012-12-07T12:08:41.057
> 
> 标签：string, file, shell, variables

```
if grep -Fxq $name1 test.txt 
```

这似乎不起作用。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:21:04.253

你可以这样做：

```
match=`grep $name1 test.txt`
if [ -n "$match" ]; then
   echo found
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:28:28.490

你可以试试这个：

```
grep -Fxq $name1 test.txt  
if [ $? -eq 0 ]; then
    ... test.txt contains $name1 ...
else
    ... test.txt does not contain $name1 ...
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:21:26.277

就足够了：

```
 grep $name1 test.txt 
```

# javascript - 在 Web 应用程序中从 js 调用 Web 服务

> ID：13762821
> 
> 赞同：0
> 
> 时间：2012-12-07T12:09:40.653
> 
> 标签：javascript, wcf, web-services, web-applications, scriptmanager

我创建了一个简单的网络方法，用于保持会话处于活动状态：

```
Imports System.ServiceModel
Imports System.ServiceModel.Activation
Imports System.ServiceModel.Web

<ServiceContract(Namespace:="PMWebService")>
<AspNetCompatibilityRequirements(RequirementsMode:=AspNetCompatibilityRequirementsMode.Allowed)>
Public Class WebService

' To use HTTP GET, add <WebGet()> attribute. (Default ResponseFormat is WebMessageFormat.Json)
' To create an operation that returns XML,
'     add <WebGet(ResponseFormat:=WebMessageFormat.Xml)>,
'     and include the following line in the operation body:
'         WebOperationContext.Current.OutgoingResponse.ContentType = "text/xml"
<OperationContract()>
Public Shared Function KeepSessionAlive() As Integer

    'Keep the session alive by writing to a session variable
    HttpContext.Current.Session("KeepSessionAlive") = DateTime.Now
    'Give the user time to keep the session alive
    Dim iSecondsToKeepAlive As Integer = 50
    'Set the timeout before the 'keep alive' message is displayed
    Dim iTimeout As Integer = (HttpContext.Current.Session.Timeout * 60000) - (iSecondsToKeepAlive * 1000)
    Return iTimeout

End Function

' Add more operations here and mark them with <OperationContract()>

End Class 
```

我的脚本管理器定义如下：

```
<asp:ScriptManager ID="ScriptManagerMaster" EnablePartialRendering="true" runat="server">
    <Services>
        <asp:ServiceReference Path="~/Shared/WebService.svc" />
    </Services>
</asp:ScriptManager> 
```

我希望能够从我的所有网页中访问它。我尝试创建一个 wcf 服务来调用它：

```
 $('.renew-session').click(function () {
        clearTimeout(modalTimeout);
        var stayAlive = new PMWebService.WebService
        stayAlive.KeepSessionAlive(onTimeoutReturned, onDataFailure);
    }); 
```

然而，这在“var stayAlive = new MyWebService.WebService”处失败，表示 PMWebService 未定义。

我试图按照以下示例进行操作：[http](http://www.dotnetcurry.com/ShowArticle.aspx?ID=235) ://www.dotnetcurry.com/ShowArticle.aspx?ID=235 。然而，当我完成这些步骤时，我在第 4 步得到了不同。当我查看我的脚本管理器的属性时，我没有看到服务集合。我的网站作为 Web 应用程序运行，所以我不知道这是否会有所不同。

我希望有人可以帮助解决这个问题。我也尝试过将其作为 asmx 服务运行，但这给出了同样的错误。我可以将它作为 PageMethod 运行，但我必须将它放在每个页面上。我也尝试过 ashx 处理程序，但我认为我不能从中返回超时值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T21:49:33.223

我刚刚解决了这个问题。我不得不从“KeepSessionAlive”的定义中删除“共享”。我从其他地方复制了例程，并没有注意到定义不正确。

# jquery - 第二个通过 Ajax 调用的页面的 head 部分中的元素如何继承？

> ID：13762825
> 
> 赞同：0
> 
> 时间：2012-12-07T12:09:47.753
> 
> 标签：jquery, html, ajax, jquery-ui

我有两个 HTML 页面。第一个包含一个通过异步 HTTP (Ajax) 请求提交给第二个的表单。这样，一旦用户提交表单，第二页就会显示在表单的底部，而无需重新加载。

目前我的第一页是一个完整的 HTML 文档（带有*链接*和*脚本*元素 + 正文的头部），而第二页只包含 php 代码（没有*html*、*head*、*body*结构）。实际上，我将第二页视为“包含”在第一页中。

当我想在第二页中使用 jQuery UI显示[这个滑块时，问题就来了。](http://jqueryui.com/slider/#rangemax)

我在第一页的 head 部分添加了 jQuery UI：

```
 <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<script>
    $(function() {
        $( "#slider-range-max" ).slider({
            range: "max",
            min: 1,
            max: 10,
            value: 2,
            slide: function( event, ui ) {
                $( "#amount" ).val( ui.value );
            }
        });
        $( "#amount" ).val( $( "#slider-range-max" ).slider( "value" ) );
    });
    </script> 
```

当我尝试在第二页中显示滑块时，它没有正确显示。这是我在正文部分使用的代码：

```
 <p>
    <label for="amount">Minimum number of bedrooms:</label>
    <input type="text" id="amount" style="border: 0; color: #f6931f; font-weight: bold;" />
</p>
<div id="slider-range-max"></div> 
```

但是，如果我在第一页的正文部分尝试相同的代码，它们的滑块会完美显示。

因此我的问题是......页面头部部分的*链接*和*脚本*元素如何被第二个通过 Ajax 调用的页面继承？

第二页是否应该也是一个完整的 HTML 文档，其中我在 head 部分中包含我的*脚本*和*链接元素？*

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:24:51.567

两个文档之间没有“继承”。遇到时执行 JavaScript 在您描述的两种情况下发生的情况是，当您在头部有 JS 时，它会在第二个页面的加载完成之前执行。偶然地，当您将其作为正文的一部分嵌入时，会加载第二页，并且在执行滑块特定代码之前将 html 插入到第一页的 dom 中，这是它的工作方式。

您需要将特定于滑块的代码包含到 ajax 调用的成功处理程序中。类似于下面的代码

```
$.ajax({
   url: urlOfSecondPage,
   success : function() {
        $( "#slider-range-max" ).slider({
            range: "max",
            min: 1,
            max: 10,
            value: 2,
            slide: function( event, ui ) {
                $( "#amount" ).val( ui.value );
            }
        });
        $( "#amount" ).val( $( "#slider-range-max" ).slider( "value" ) );
    }
}); 
```

或者将原始 JS 作为第二页的一部分插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:16:14.273

我的理解是，第一页的 Javascript 只会在该页面完成加载时知道 DOM 内容。

之后加载的新内容将无法识别。

为了解决这个问题，您可以将第二个页面加载为一个完整的 HTML 页面，包括所有标题和脚本等。

或者，仍然将第二页作为您当前拥有的部分页面加载，但只需在部分页面顶部包含额外的“脚本”和“链接”部分，以确保它们应用于新加载的上下文DOM 内容。

# php - PHP：cURL：在同一个网站上运行多个查询

> ID：13762827
> 
> 赞同：1
> 
> 时间：2012-12-07T12:09:59.953
> 
> 标签：php, curl

我在弄清楚如何运行多个 cURL 请求时遇到了一些困难，而且我不完全确定我做错了什么。可能是我编写的通过网络表单登录的代码不正确，但很难自行测试，因为我确实需要先运行第一个查询才能执行此操作。

这是我第一次查询的代码；

```
$handle = curl_init();

$login_user = 'user';
$login_pass = 'pass';

$username = 'username';
$password = 'password';

$postdata = "username=".$username."&password=".$password; 

curl_setopt($handle, CURLOPT_URL, 'http://somewebsiteexample.php');
curl_setopt($handle, CURLOPT_USERPWD, $login_user . ":" . $login_pass );
curl_setopt($handle, CURLOPT_POST, true);

curl_setopt($handle, CURLOPT_POSTFIELDS, $postdata);
curl_setopt($handle, CURLOPT_RETURNTRANSFER, 1);

$response = curl_exec($handle);
curl_close($handle);

echo '<pre>';
print_r($response);
?> 
```

这让我通过了基本的 http 身份验证。现在我需要能够通过将请求发布到 webform php 页面来登录该站点。

我已经看到很多如何做到这一点的例子，但只是他们自己的，而不是作为第二个 cURL 请求。

我拥有完成每个单独请求所需的所有信息，但我不确定如何将这两个请求组合在一起。我是否在同一个 cURL 会话中执行此操作？

我觉得我确实需要执行单独的 curl 初始化请求，并且我需要使用 CURLOPT_COOKIEJAR 通过 cookie 存储来自第一个请求的登录信息。（或者我可以在同一个 curl_init() 中运行我的第二个查询吗？）

如果是这种情况，我如何存储基本的 http 身份验证请求，以便下次初始化 curl 时，我已经登录到可以 POST 到 webform 的网站？一旦我知道如何执行多个 cURL 请求，我可能会弄清楚其余的部分。

我对 cURL 还很陌生（我仍然经常在网页上使用 file_get_contents()），所以我也有点不确定哪些 cURL 选项对于通过 webform 登录是绝对必要的。有些看起来很明显，而另一些则不然。这可能是我自己可以弄清楚的，但是很难找到一个可靠的使用 cURL 登录的教程，其中详细介绍了每个 CURLOPT 常量在该特定上下文中的作用。

php.net 手册有很多信息，虽然它确实告诉您各种 cURL 选项的关系，但它没有提供其具体用法的具体示例。如果有另一个资源站点可以让我更深入地解释 cURL，那也将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T12:23:30.253

登录是通过 cookie 处理的（假设它们*不是*通过 URL 参数处理的）。您需要做的是存储在对登录查询的响应中收到的 cookie，并在每次请求时将 cookie 发回。如果您使用*存储*接收到的 cookie 并`CURLOPT_COOKIEJAR`为每个请求*加载cookie，cURL 可以为您自动执行此操作。*只需将两个选项设置为同一个文件。*`CURLOPT_COOKIEFILE`*

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T18:09:42.083

您需要研究 curl 的调试方式。Curl 自然不会追踪任何东西，你需要在请求之后调用 for `curl_error($curl)`and `curl_errno($curl)`，但是在资源关闭之前调用`curl_close($curl)`.

您还需要跟踪`curl_getinfo($curl)`有关请求和响应的详细信息。确保您的*空白页*不是由脚本中的语法错误引起的。

下一部分。添加`CURLOPT_COOKIEJAR`和`CURLOPT_COOKIEFILE`用于 cookie 处理。在同一个 curl 资源上执行第二个请求，`curl_close($curl)`在所有请求完成后运行。Curl 保存了请求之间的大部分设置，所以不用担心。

我还建议添加用户代理和引用设置，以使您的请求看起来更自然。**

# c# - VS2010 C# WPF web-browser控件在应用程序外打开ppt/pptx

> ID：13762828
> 
> 赞同：1
> 
> 时间：2012-12-07T12:10:00.883
> 
> 标签：c#, wpf, powerpoint

大家好，

我正在使用 C# WPF 创建一个小型应用程序。此应用程序必须在 WPF 表单中打开 PDF、PPT。我已经使用网络浏览器控件打开 pdf，它工作得非常好。

但是当我尝试使用网络浏览器控件打开 ppt/pptx 文件时，它会弹出一个下载窗口并在应用程序外部打开 ppt。

我无法弄清楚这个问题。是否有使用网络浏览器控件打开 ppt/pptx 的正确方法，或者我们需要使用任何其他控件？

提前致谢

问候

维杰·库姆哈尔

# android - 设备重启时如何取消服务？

> ID：13762829
> 
> 赞同：0
> 
> 时间：2012-12-07T12:10:02.340
> 
> 标签：android, android-intent, android-service

关于android中的服务通知，我有两个问题：

1.  如果我选择重启设备，如何取消服务？

2.  如果我关闭我的设备并重新启动它，如何保持服务运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:15:52.053

您只需在清单文件中调用 bootcompiled 即可重新创建服务。

见下面的代码：

```
<!-- To receive the Alarm Notification -->

    <receiver android:name=".RecreateTwoMonthAlarm" >         
        <intent-filter>             
            <action android:name="android.intent.action.BOOT_COMPLETED" /> 
            <category android:name="android.intent.category.HOME" />         
        </intent-filter>     
    </receiver> 
```

现在，如果您不想在设备重新启动时重新创建服务，那么只需在清单中定义接收器，无需任何 BOOT_COMPLETED 操作。

就像下面的代码：

```
 <receiver android:name=".AlarmReceiverNotificationForTwoMonth" /> 
```

这是我的情况下的接收器。如果您想要同样的服务，那么您也可以这样做。

希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:24:35.550

1)如果我选择重启我的设备，如何取消服务？无事可做，如果没有 BOOT_COMLETED 接收器。

2）如果我关闭我的设备并重新启动它，如何保持服务运行？您应该创建一个接收器类：

```
public class StartupReceiver extends BroadcastReceiver {
     @Override
     public void onReceive(Context context, Intent intent) {
         context.startService(new Intent(context,YourService.class));
     }
} 
```

并在清单文件中声明：

```
<receiver android:name=".StartupReceiver" >
   <intent-filter>
      <action android:name="android.intent.action.BOOT_COMPLETED" />
      <category android:name="android.intent.category.HOME" />
  </intent-filter> 
```

# android - 为什么 MediaPlayer prepare() 不能与流一起使用？

> ID：13762834
> 
> 赞同：3
> 
> 时间：2012-12-07T12:10:22.723
> 
> 标签：android, streaming, android-mediaplayer

`MediaStream`的方法的文档`prepareAsync()`说：

> 异步准备播放器进行播放。设置数据源和显示表面后，您需要调用 prepare() 或 prepareAsync()。**对于流，您应该调用 prepareAsync()，它会立即返回**，而不是阻塞直到缓冲了足够的数据。

如果我们用于播放流，**会出现**什么问题？`prepare()`我一直在使用`prepare()`，我从来没有遇到任何麻烦。

相反，在我自己的情况下，当我**使用 'prepareAsync()'**时，流永远不会开始。当我**使用“prepare()”**时，流在缓冲期（1s-2s）之后开始并且播放良好。为什么异步方法会发生这种情况？async prepare 的形式是否与 for 相同`prepare()`？

```
 mPlayer = new MediaPlayer();
    mPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
    mPlayer.setDataSource(STREAM_URL);
    mPlayer.prepareAsync();
    mPlayer.start(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T12:24:58.977

问题`prepare()`在于它阻塞了`UI`线程。如果准备媒体的时间过长，您的应用程序将因`ANR`错误而被终止。

事件然后，阻塞`UI`线程 1 到 2 秒并不是很酷。如果您要访问网络服务器，那么您迟早会被杀死，这是肯定的。

要开始`prepareAsync`工作，您必须调用`MediaPlayer.setOnPreparedListener`，然后调用`MediaPlayer.start()`处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:42:01.060

在 UI 线程中执行复杂的操作是一种不好的做法。它可能会长时间阻塞您的 UI，Android 可能会杀死您的应用程序。在这种情况下，由于解码和获取数据，prepare() 方法可能会花费大量时间。

您应该在监听 OnPrepared 事件时调用 prepareAsync() 方法。当事件被触发时，您应该通知您的 UI 并启动播放器。

```
mPlayer = new MediaPlayer();
mPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
mPlayer.setDataSource(STREAM_URL);
mplayer.setOnPreparedListener(/*your listener here*/)
mPlayer.prepareAsync(); 
```

# c# - Asp.net c#从列表视图中的文本框中获取值，其中包含手动绑定的数据

> ID：13762840
> 
> 赞同：0
> 
> 时间：2012-12-07T12:10:34.330
> 
> 标签：c#, asp.net

我试图在我的列表视图中简单地阅读一个文本框。这是一个购物车，当输入“新数量”时，我需要手动编辑 cookie。我正在尝试使用我为下拉框所做的，但我猜是因为**我手动绑定数据而不是使用数据源**是阻止我访问文本框中值的区别。

奇怪的是它没有得到空值，只是没有得到任何价值？我在标签中添加了其他东西，所以我知道这不是我所说的标签。我在网上找到的所有结果都是调用无效的东西，例如listview1.items[0].subitems[0]，这些不是我可以调用的成员。

任何帮助是极大的赞赏

按钮处理程序

```
 protected void editQ_Click(Object sender, CommandEventArgs e)
    {

        LinkButton lbSender = (LinkButton)sender;
        TextBox tb = (TextBox)lbSender.FindControl("tb1"); // this is the textbox
        productTableAdapter ad = new productTableAdapter();
        int idIn = int.Parse(e.CommandArgument.ToString());
        HttpCookie c = Request.Cookies["cart"];
        Label2.Text = tb.Text.ToString();
        // Label2.Text = tb.Text; doesn't work either.
        if (tb == null)
        {
            Label2.Text = "NULL ERROR";
        }

           ....

    } 
```

列表显示

```
<asp:ListView ID="ListView1" runat="server" DataKeyNames="productNo" 
         >
        <AlternatingItemTemplate>
            <span style="">productNo:
            <asp:Label ID="productNoLabel" runat="server" Text='<%# Eval("productNo") %>' />
            <br />
            Name:
            <asp:Label ID="productNameLabel" runat="server" Text='<%# Eval("productName") %>' />
            <br />
            Quantity:
            <asp:Label ID="productQuantityLabel" runat="server" Text='<%# Eval("Quantity") %>' />

           <asp:TextBox id = "tb1" runat="server"></asp:TextBox>
           <asp:LinkButton id="editQ" runat="server" CommandArgument='<%# Eval("productNo") %>' onCommand ="editQ_Click">Change Quantity</asp:LinkButton>

            <br />
            price:
            <asp:Label ID="priceLabel" runat="server" Text='<%# Eval("price") %>' />

            <br />
            <asp:Image ID = "img" runat="server" height = "150" ImageUrl='<%# Eval("imgURL")%>'></asp:Image>

            <br />
<br /></span>
        </AlternatingItemTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:19:05.383

`FindControl`用于在容器中查找控件。从您的标记来看，LinkBut​​ton 不是您的文本框的容器。您的文本框在您的 ListView 中

试试这个，虽然不确定

```
TextBox tb = (TextBox)lbSender.NamingContainer.FindControl("tb1"); 
```

# iphone - 如何用 UIColor 屏蔽 UIimage？

> ID：13762843
> 
> 赞同：0
> 
> 时间：2012-12-07T12:10:41.180
> 
> 标签：iphone, core-graphics, quartz-2d

我希望`UIimage`用`UIColor`. 请参阅下面的代码。它不适合我。*我正在尝试将图像中的浅色遮盖为中等棕色。*

> `ivMasking1`是源`Imageview`。

代码：

```
 UIGraphicsBeginImageContext(ivMasking1.frame.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    const CGFloat myMaskingColors[6] = {124, 255,  68, 222, 0, 165};
    CGImageRef myColorMaskedImage = CGImageCreateWithMaskingColors (ivMasking1.image.CGImage,
                                                         myMaskingColors);
    CGRect myContextRect = CGRectMake(0,0,50,50);

    CGContextDrawImage (context, myContextRect, myColorMaskedImage);

    ivMasking2 = [[UIImageView alloc] initWithImage:UIGraphicsGetImageFromCurrentImageContext()];
    ivMasking2.frame = CGRectMake(0 ,125, 300,200);
    ivMasking2.contentMode = UIViewContentModeScaleAspectFit;
    ivMasking2.backgroundColor = [UIColor redColor];
    [self.view addSubview:ivMasking2]; 
```

谢谢！PS：您可以参考主题：**Masking an Image with Color** from **[Quartz Programming Guide](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/Introduction/Introduction.html)**

# google-visualization - 从 Google 折线图可视化中删除内部填充

> ID：13762844
> 
> 赞同：4
> 
> 时间：2012-12-07T12:10:46.140
> 
> 标签：google-visualization

有谁知道删除出现在内部图表区域两侧的默认填充的方法，在此屏幕截图中以浅蓝色突出[显示](http://filesource10.net/lineChart.jpg)

![在此处输入图像描述](../Images/6aa7a6842dae26d695b4972fdecdf5bc.png)

这是我当前用来生成图表的代码...

```
google.load("visualization", "1", {packages:["corechart"]});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = google.visualization.arrayToDataTable([
      [<?php echo $colTitles; ?>], 
      <?php echo $values; ?>
    ]);

    var options = {
        width: 785, height: 440,
        chartArea: {top:20,left:20,right:0,bottom:0,width:"70%",height:"80%"},
        legend: {position: 'right', textStyle: {fontSize: 10}, alignment: 'start'},
        hAxis: {
            direction:-1,
            slantedText:true,
            slantedTextAngle:90 // here you can even use 180
        },
        vAxis: {maxValue:40, minValue:0, format:'#',gridlines:{count:10}}
    };

    var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:44:53.137

安东尼奥

我从未见过这样的请求，并且查看 API 并没有`vAxis`在指定的某个点（像素）开始线条的选项。

无论如何，我使用 CSS 样式选项来解决一个[变通](http://jsfiddle.net/BrOSs/aRuzF/)的解决方案。

基本上，我只是裁剪了图表的右侧填充部分，并将 vAxis 标题放在里面以保留标题并在 ( *aprovechar el espacio* ) 填充空白处绘制。

*萨鲁多斯！*

# c# - Winforms 应用程序与不同线程中的表单

> ID：13762854
> 
> 赞同：1
> 
> 时间：2012-12-07T12:11:25.377
> 
> 标签：c#, winforms

在我正在处理的应用程序中，有几种形式；一个用于显示 3d 图像，另一个用于管理它。图像中的某些更改非常耗时，并且在进行更改时，两种形式都没有被重绘。

我想要实现的是至少控制表单（仅由相当标准的组件组成）以继续与用户交互并继续重绘。在我看来，它应该被移到不同的线程中，因为它现在使用的线程太忙了。

我该怎么做？Application.Run(secondForm) 就足够了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:18:53.307

您应该在另一个线程中完成繁重的工作。您可以使用后台工作人员来简化工作或管理自己的线程。

像这样的东西：

*   控制器表单按下开始 => 启动一个线程/后台工作人员并在其中进行计算
*   计算完成后，更新您的图像表单。您可以在完成后调用一个事件并让您的图像/控制器表单订阅它。
*   或者当控制器表单在计算完成之前发生更改时，您可以取消后台工作程序并重新开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:49:23.167

[正如Carra 建议](https://stackoverflow.com/a/13762966/87399)的那样，通常最好将繁重的工作转移到 BackgroundWorker 上。

但是要直接回答您的问题，是的，您*可以*将表单放入单独的线程中。在这种情况下它可能并不理想，因为您的背景窗口在很多时候仍然没有响应；但这是可能的。

您希望使用手动创建的[线程](http://msdn.microsoft.com/en-us/library/system.threading.thread(v=vs.110).aspx)（而不是[任务](http://msdn.microsoft.com/en-us/library/vstudio/system.threading.tasks.task(v=vs.110).aspx)或[ThreadPool](http://msdn.microsoft.com/en-us/library/vstudio/system.threading.threadpool(v=vs.110).aspx)线程），并确保在启动线程之前调用[Thread.SetApartmentState](http://msdn.microsoft.com/en-us/library/system.threading.thread.setapartmentstate.aspx) (ApartmentState.STA)，因为大多数 UI 需要单线程公寓。然后，您可以在该线程内创建一个 Form，并调用 Application.Run 或 Form.ShowDialog。

当然，所有常见的线程限制都适用（只能从创建它们的线程访问表单及其控件）。

# c# - 使用 AForge.net 识别特殊模式

> ID：13762855
> 
> 赞同：5
> 
> 时间：2012-12-07T12:11:27.850
> 
> 标签：c#, image-recognition, aforge

我想使用 AForge.net 来识别下图中的模式。

我使用过滤器来提取黄橙红色，所以我现在可以找到彩色斑点，但是：

1.  我想找到被蓝色大圆圈包围的斑点（如图所示）

2.  我想过滤椭圆形的对象

3.  我不想要确切的代码，只显示我应该使用的基本大纲和功能。

![在此处输入图像描述](../Images/5536e1fe5e27daf6aef0c0b4c6588dcd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T00:29:43.053

我使用 [IPLab] (http://code.google.com/p/iplab/) 快速找到一些参数来提取图像的红色和蓝色特征。以下是我找到的步骤：

1.  使用 HSL 过滤并仅保留从 270 到 360 的 H 值。
2.  使用 HSL 过滤，只保留从 180 到 270 的 H 值，饱和度超过 0.100。

第 1 步会给你红色圆圈，第 2 步会给你蓝色圆圈。您可以应用一些形态运算符来清理结果。现在，您可以从两个输出图像中计算 blob，并确定红色 blob 的中心是否在蓝色 blob 内。

至于验证 blob 是否为椭圆形，我认为 AForge 在其 blob 类中没有此类统计信息。您可能必须使用 EmguCV 等另一个图像处理库来验证 blob 的时刻。

# authentication - 在 CakePHP 2.1 中使用电子邮件和密码登录

> ID：13762858
> 
> 赞同：0
> 
> 时间：2012-12-07T12:11:31.537
> 
> 标签：authentication, cakephp-2.1

我知道以前有人问过这个问题，但是我几乎浏览了互联网上可以找到的所有文章，但没有解决我的问题-.-

我试图让我的 CakePHP 2.1 应用程序使用他们的电子邮件（而不是用户名）和密码登录用户。另外，请考虑到我使用的控制器称为“配置文件”，而不是“用户”。这有什么区别吗？无论如何，这是我的代码......

应用控制器.php

```
<?php
class AppController extends Controller {
    public $components = array(
        'Session',
        'Auth'=>array(
            'authorize => array('Controller'),
            'Form'=>array(
                'fields' => array('username' => 'email'),
                'userModel' => 'Profile'
            )
        )
    );
}
?> 
```

ProfilesController.php

```
<?php
class ProfilesController extends AppController {

    function login() {
        if ($this->request->is('post')) {
            if ($this->Auth->login()) {
                $this->Session->setFlash('You have been signed in.', 'flash_success');
                $this->redirect($this->Auth->redirect());
            } else {
                $this->Session->setFlash('Login failed. Your username/password was incorect.');
            }
        }
    }

}
?> 
```

登录.ctp

```
<?php
echo $this->Form->create();
echo $this->Form->input('email');
echo $this->Form->input('password');
echo $this->Form->submit('Sign In');
?> 
```

任何想法/建议为什么此登录仍然无法正常工作！？我很困惑。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:54:05.407

这个函数是你写的吗？

*ProfilesController.php*

```
function beforeFilter() {
     $this->Auth->fields = array('username' => 'email', 'password' => 'password');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T07:42:44.487

检查我给类似问题的答案

[无法使用不同的表登录 cakephp](https://stackoverflow.com/questions/13491937/unable-to-login-in-cakephp-using-different-table/13492707#13492707)

如果这不能解决，请返回

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-08T08:29:16.893

谢谢你的回答！我刚刚解决了我的问题，这实际上是一个非常容易犯的错误。

我实际上正在使用：

```
'Form' => array(
    'userModel'=>'Profile',
    'fields' => array('username' => 'email')
) 
```

就其本身而言，而不是在 'authenticate' 参数中使用它，如下所示：

```
'authenticate' => array(
    'Form' => array(
        'userModel'=>'Profile',
        'fields' => array('username' => 'email')
    )
) 
```

谢谢你们的帮助！欣赏它。

# javascript - 填充数据：未捕获的语法错误意外结束输入

> ID：13762862
> 
> 赞同：0
> 
> 时间：2012-12-07T12:11:38.183
> 
> 标签：javascript

我在 iframe 中有一个表单，我想用某些数据预先填充表单。

我正在尝试使用 php 和 javascript 来完成此操作。

我的代码看起来像这样：

```
 <script type="text/javascript">
      $(window).load(function() {
          document.getElementById('20988888993483').document.getElementById('input_13').value = <?=htmlspecialchars($_POST['input_13'])?>;
      }
  </script> 
```

iframe的id是20988888993483，input的id是input_13。我从以前的表单提交中预加载了值。

不过，这段代码是串在一起的，我不太确定该怎么做。

加载 javascript 时出现的错误是：`uncaught syntaxerror unexpected end of input`

**更新**

除了人们的建议，我还在 PHP 字符串周围添加了引号。在野外，值为 5，javascript 看起来像这样 -->

```
 <script type="text/javascript">
      $(window).load(function() {
        document.getElementById('20988888993483').document.getElementById('input_13').value = "5";
      }
  </script> 
```

我仍然得到错误。非常感谢的想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:15:56.003

如果其中的数据`$_POST['input_13']`是字符串（即：不是数字或`null`），则需要将其括在引号中。

[要处理启用魔术引号](http://php.net/manual/en/security.magicquotes.php)配置设置的可能性：

```
$strValue = $_POST['input_13'];
if(get_magic_quotes_gpc()) {
    $strValue = stripslashes($strValue);
} 
```

然后，您只需要转义双引号：

```
$strValue = addcslashes($strValue, '"'); 
```

该字符串现在可以安全地插入 JavaScript。另请注意，无需使用`htmlspecialchars()`，因为您正在设置`value`元素的属性，而不是`innerHTML`属性。

```
document.getElementById('20988888993483').document.getElementById('input_13').value = "<?= $strValue ?>"; 
```

**编辑**

或者，如果您正在运行 PHP >= 5.2.0，那么最好的解决方案是使用[`json_encode()`](http://php.net/manual/en/function.json-encode.php)：

```
$strValue = $_POST['input_13'];
if(get_magic_quotes_gpc()) {
    $strValue = stripslashes($strValue);
}

document.getElementById('20988888993483').document.getElementById('input_13').value = <?= json_encode($strValue) ?>; 
```

# javascript - contentEditable 字段在数据库输入时维护换行符

> ID：13762863
> 
> 赞同：15
> 
> 时间：2012-12-07T12:11:49.260
> 
> 标签：javascript, jquery, html, newline, contenteditable

我有一个设置了属性 contentEditable 的 div。

这使我可以拥有一个自由格式的可编辑文本区域，而无需任何表单输入字段：http: [//jsfiddle.net/M8wx9/8/](http://jsfiddle.net/M8wx9/8/)

但是，当我创建几行新行并单击保存按钮时，我`.text()`会使用继续删除我刚刚输入的换行符的方法来获取内容。如果可能的话，我需要维护换行符并将内容作为纯文本存储在数据库中。

`.html()`我可以通过使用而不是将 HTML 直接存储到数据库中，`.text()`但我不喜欢这个想法，因为我将来可能需要将这些数据提取为纯文本。此外，在 Firefox 中按 enter 会换行`<br>`，Chrome 和 Safari 会换行，`<div>...</div>`而 Internet Explorer 和 Opera 使用段落`<p>...</p>`换行，因此解析 html 听起来并不容易。

如何保留这些换行符并将内容作为纯文本存储在数据库中（类似于 textarea 的方式）？

最好的问候， **ns**

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-07T13:36:11.510

jQuery 使用`textContent`on a`Node`返回元素的文本值，这将压缩空白。如果要维护换行符，则需要使用`innerText`which 表示直接访问元素而不是通过 jQuery。

从你的jsfiddle：

```
console.log($(Comments)[0].innerText); 
```

[http://jsfiddle.net/M8wx9/10/](http://jsfiddle.net/M8wx9/10/)

==== 更新：
作为一个警告（正如 Tim Down 指出的那样），使用`innerText`仅适用于 webkit 和 microsoft 浏览器。如果您的应用程序还支持 Firefox，则需要在 innerHTML 上使用正则表达式以保持换行符。举个例子：

 ~~~~```
$(Comments).html().trim()
.replace(/<br(\s*)\/*>/ig, '\n') // replace single line-breaks
.replace(/<[p|div]\s/ig, '\n$0') // add a line break before all div and p tags
.replace(/(<([^>]+)>)/ig, "");   // remove any remaining tags 
```~~ 

[http://jsfiddle.net/M8wx9/12/](http://jsfiddle.net/M8wx9/12/)

~~正如评论中提到的，前一个在 Chrome 中不起作用。这是一个有效的解决方案：~~

 ~~```
$(Comments).html().trim()
.replace(/<br\s*\/*>/ig, '\n') 
.replace(/(<(p|div))/ig, '\n$1') 
.replace(/(<([^>]+)>)/ig, ""); 
```

[http://jsfiddle.net/M8wx9/81/](http://jsfiddle.net/M8wx9/81/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-09T22:13:11.230

```
function readContentWithBreaks(elem){
  if(elem[0].innerText){
    return elem[0].innerText.replace(/\n/ig,"<br>");
  }else{
    return elem.html();
  }
} 
```

由于 webkit 浏览器支持 innerText 我决定检测他们添加的 /n 交换。对于 Firefox，它已经提供了内容，`<br>`所以我们可以按原样处理。~~~~

# javascript - 客户端脚本中的图像亮度检测

> ID：13762864
> 
> 赞同：30
> 
> 时间：2012-12-07T12:11:50.913
> 
> 标签：javascript, image, canvas, client-side

有谁知道是否有一个脚本可用于使用客户端脚本检测图像中的暗度/亮度（包括 HTML）？

我基本上希望能够检测背景中使用的图像的亮度（暗/亮），并让 CSS/HTML/jQuery/JS 根据暗或亮（真或假）的变量调整页面。

我知道有可用的服务器端脚本，但不能用于这个特定的开发项目。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-12-07T12:25:23.030

此函数会将每种颜色转换为灰度并返回所有像素的平均值，因此最终值将介于 0（最暗）和 255（最亮）之间

```
function getImageLightness(imageSrc,callback) {
    var img = document.createElement("img");
    img.src = imageSrc;
    img.style.display = "none";
    document.body.appendChild(img);

    var colorSum = 0;

    img.onload = function() {
        // create canvas
        var canvas = document.createElement("canvas");
        canvas.width = this.width;
        canvas.height = this.height;

        var ctx = canvas.getContext("2d");
        ctx.drawImage(this,0,0);

        var imageData = ctx.getImageData(0,0,canvas.width,canvas.height);
        var data = imageData.data;
        var r,g,b,avg;

        for(var x = 0, len = data.length; x < len; x+=4) {
            r = data[x];
            g = data[x+1];
            b = data[x+2];

            avg = Math.floor((r+g+b)/3);
            colorSum += avg;
        }

        var brightness = Math.floor(colorSum / (this.width*this.height));
        callback(brightness);
    }
} 
```

用法：

```
getImageLightness("image.jpg",function(brightness){
    console.log(brightness);
}); 
```

JSF中：

[http://jsfiddle.net/s7Wx2/](http://jsfiddle.net/s7Wx2/)

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-12-07T15:56:53.213

我的答案重用了@lostsource 答案中的大部分代码，但它使用不同的方法来尝试区分暗图像和亮图像。

首先，我们需要（简要地）分析一下 RGB 通道之和的平均值是什么结果。对于人类来说，这毫无意义。粉红色比绿色亮吗？即，为什么您希望 (0, 255, 0) 给出比 (255, 0, 255) 更低的亮度值？另外，中灰（128、128、128）是否和中绿（128、255、0）一样亮？考虑到这一点，我只处理通道的颜色亮度，就像在 HSV 颜色空间中所做的那样。这只是给定 RGB 三元组的最大值。

剩下的就是启发式了。让我们`max_rgb = max(RGB_i)`谈谈`i`。如果`max_rgb`低于 128（假设是 8bpp 图像），那么我们发现了一个新的点`i`是暗点，否则是亮点。对每个点都这样做`i`，我们得到`A`亮点和`B`暗点。如果`(A - B)/(A + B) >= 0`那时我们说图像很轻。请注意，如果每个点都是暗点，那么你得到的值是 -1，相反，如果每个点都是亮点，你得到 +1。可以调整之前的公式，以便您可以接受几乎不暗的图像。在代码中，我将变量命名为，但它对图像处理中的字段`fuzzy`不公平。`fuzzy`所以，如果 ，我们说图像是轻的`(A - B)/(A + B) + fuzzy >= 0`。

代码在[http://jsfiddle.net/s7Wx2/328/](http://jsfiddle.net/s7Wx2/328/)，非常简单，不要让我的符号吓到你。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-10-01T12:15:31.197

称为背景检查的脚本可以检测图像中的暗度/亮度。它使用 JavaScript 来做到这一点。

这是它的链接：

[http://www.kennethcachia.com/background-check/](http://www.kennethcachia.com/background-check/)

我希望这可以帮助任何想要在其中制作带有这种类型检测的滑块的人。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-29T12:27:36.440

[MarvinJ](https://marvinj.org)提供了**averageColor(image)**方法来获取给定图像的平均颜色。有了平均颜色，您可以创建规则来定义图像上标签的颜色。

**加载图像：**

```
var image = new MarvinImage();
image.load("https://i.imgur.com/oOZmCas.jpg", imageLoaded); 
```

**获得平均颜色：**

```
var averageColor = Marvin.averageColor(image2); // [R,G,B] 
```

**这篇文章的片段的输出：**

[![在此处输入图像描述](../Images/23a6a50a0183900856eefc6e61432396.png)](https://i.stack.imgur.com/ukBp8.jpg)

```
var canvas = document.getElementById("canvas");
var image1 = new MarvinImage();
image1.load("https://i.imgur.com/oOZmCas.jpg", imageLoaded);
var image2 = new MarvinImage();
image2.load("https://i.imgur.com/1bZlwv9.jpg", imageLoaded);
var loaded=0;

function imageLoaded(){
  if(++loaded == 2){
    var averageColor;
    averageColor = Marvin.averageColor(image1);
    setText("LION", averageColor, "text1");
    averageColor = Marvin.averageColor(image2);
    setText("LION", averageColor, "text2");
  }
}

function setText(text, averageColor, id){
  if(averageColor[0] <= 80 && averageColor[1] <= 80 && averageColor[2] <= 80){
     document.getElementById(id).innerHTML = "<font color='#ffffff'>"+text+"</font>";
  }
  else if(averageColor[0] >= 150 && averageColor[1] >= 150 && averageColor[2] >= 150){
     document.getElementById(id).innerHTML = "<font color='#000000'>"+text+"</font>";
  }

}
```

```
.divImage{
  width:400px; 
  height:268px;
  display:grid;
}

.divText{
  font-family:Verdana;
  font-size:56px;
  font-weight:bold;
  margin:auto;
  display:table-cell;
}
```

```
<script src="https://www.marvinj.org/releases/marvinj-0.8.js"></script>
<div id="result"></div>
<div style="background-image:url(https://i.imgur.com/oOZmCas.jpg);" class="divImage">
   <div id="text1", class="divText"></div>
</div>
<div style="background-image:url(https://i.imgur.com/1bZlwv9.jpg);" class="divImage">
   <div id="text2", class="divText"></div>
</div>
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-08T20:00:58.040

在我的场景中，我正在处理具有透明背景的图像，因此我需要以不同的方式处理这些像素。

有关代码，请参见[this fiddle](http://jsfiddle.net/tylercollier/ocvrkdsb/14/)。有两个具有透明背景的图像。具有浅色前景的图像以前被认为是带有@mmgp 代码的深色图像，但现在它被正确解释为浅色。

我的答案是基于 mmgp[这个答案的 jsfiddle](https://stackoverflow.com/a/13766539/135101)。不同之处在于完全透明的像素不计为亮或暗。此外，明暗比仅考虑一个或另一个像素，而不是透明的。

```
// Ignore transparent pixels
if (data[x+3] === 0) {
  continue;
} 
```

```
// Calculate the dark to light ratio
var dl_diff = ((light - dark) / (light + dark)); 
```

希望对 alpha 通道有更多了解的人可以改进它。我觉得只考虑完全透明（0？）的像素是透明的而不处理其他值（1到255）是错误的。可能需要做一些数学运算，比如将 alpha 值除以 255，然后......？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-17T16:19:33.767

在我的设置中，我想检查图像是否透明，如果是，则在不透明像素中主要是暗还是亮。我还想使用远程图像（URL）而不是 base64 编码的数据图像，所以我调整[了@lostsource 的优秀答案](https://stackoverflow.com/a/13763063/827129)以包含一些额外的功能：

*   返回`transparency`和`nonTransparentBrightness`（以及`brightness`）
*   CORS 支持`crossOrigin="anonymous"`( [src](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/crossorigin) )
*   使用`0`-`100`所以结果是 %'s (而不是`0`- `255`)
*   确保使用完整图像大小而不是渲染图像大小（使用`img.naturalWidth`和`img.naturalHeight`），因为图像越小，结果越不可靠（可能是由于像素化）

在我的设置中，我在深色背景上显示图像，所以如果`nonTransparentBrightness <= 60 && transparency > 0`我添加少量填充和白色背景。

这还没有经过彻底的测试，所以可能有一些怪癖，但看起来方向正确并且到目前为止适用于我的用例。

```
const getImageBrightness = (img) => {
  if (!img) return null;

  let alphaSum = 0;
  let colorSum = 0;

  var canvas = document.createElement("canvas");

  // make the canvas use the full size of the image, not the rendered size
  canvas.width = img.naturalWidth;
  canvas.height = img.naturalHeight;

  var ctx = canvas.getContext("2d");
  ctx.drawImage(img, 0, 0);

  var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
  var data = imageData.data;
  var r, g, b, a, avg;

  for (var x = 0, len = data.length; x < len; x += 4) {
    r = data[x];
    g = data[x + 1];
    b = data[x + 2];
    a = data[x + 3];

    avg = Math.floor((r + g + b) / 3);
    colorSum += avg;
    alphaSum += a;
  }

  const transparency = 100 - Math.floor((alphaSum / (img.naturalWidth * img.naturalHeight) / 255) * 100);
  const brightness = Math.floor((colorSum / (img.naturalWidth * img.naturalHeight) / 255) * 100);
  const nonTransparentBrightness = Math.floor((brightness / (100 - transparency)) * 100);

  return { brightness, transparency, nonTransparentBrightness };
};

var imgs = document.body.getElementsByTagName('img');

const handleImage = (imageSrc) => {
  const img = document.createElement("img");
  img.src = imageSrc;
  img.style.display = "none";
  img.crossOrigin = "anonymous";
  document.body.appendChild(img);

  img.onload = () => {
    const { brightness, nonTransparentBrightness, transparency } =
      getImageBrightness(img);

    document.getElementsByTagName('pre')[0].innerHTML = `brightness: ${brightness} | nonTransparentBrightness: ${nonTransparentBrightness} | transparency: ${transparency}`;
  };
}

for(var x = 0; x < imgs.length; x++) {
  imgs[x].onclick = function() {
    const imgEl = this;
    handleImage(imgEl.src);
  }
}
```

```
body {
  background-color: #999;
}

img {
  width: 100px;
}
```

```
<img src="https://static.files.bbci.co.uk/orbit/8161b75793cc3c38d814e1a4a19a2f6a/img/blq-orbit-blocks_grey.svg" />
<img src="https://static.aviva.io/assets/logo/aviva-logo.svg" />
<img src="https://www.moneyrates.com/wp-content/uploads/imagesrv_wp/2516/barclays_bank_logo_thumbnail.png" />

<pre>Click on image to get values</pre>
```

# regex - 如何从 R 中的推文中提取主题标签？

> ID：13762868
> 
> 赞同：6
> 
> 时间：2012-12-07T12:11:58.963
> 
> 标签：regex, r, tweets

我知道这个问题已经在[这里](https://stackoverflow.com/questions/952835/retrieve-all-hashtags-from-a-tweet)和[这里](https://stackoverflow.com/questions/8855535/regular-expression-to-extract-words-names-hashtags-and-phrases-from-tweets)被问过，但是当我尝试它时出现了一个小问题：

```
x<- str_extract("Hello peopllz! My new home is #crazy gr8! #wow", "#\S+")
Error: '\S' is an unrecognized escape in character string starting "#\S" 
```

我将正则表达式更改为`"#(.+) ?"`, `"#\\s"`，但他们没有提取主题标签。

然后我尝试了 gsub 方式：

```
x<- gsub("[^#(.+) ?]","","Hello! #London is gr8\. #Wow") 
```

它给出了：`" # . #"`

有什么想法我哪里出错了吗？我希望我的输出作为推文中所有主题标签的向量/列表（没有哈希！）

编辑：我不希望对推文进行标记，因为：1\. 我没有为我的程序的其余部分标记推文，2\. 如果我将其扩展以处理大量推文，这将成为一个非常昂贵的步骤。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T12:30:06.863

使用`"#\\S+"`而不是`"#\S+"`.

```
str_extract_all("Hello peopllz! My new home is #crazy gr8! #wow", "#\\S+")
# [[1]]
# [1] "#crazy" "#wow" 
```

这里有两个级别的解析。在其中的低级正则表达式函数`str_extract`获得您要搜索的模式之前（*即* `"#\S+"`），它首先由 R 解析。R 不识别`\S`为有效的转义字符并引发错误。通过转义斜线，`\\`您告诉 R 将`\`and`S`作为*两个普通字符*传递给 regexp 函数，而不是将其解释为*一个转义字符*。

### 侧轨

这会产生相当奇怪的表达。想象一下，您有一个 Windows 网络上计算机的地址列表，格式为`"\\computer"`. 要搜索它，您需要输入`str_extract(adr, "\\\\\\w+")`将在`"\\\w+"`内部变为的然后搜索。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T17:56:31.433

只是插话。根据您访问 twitter 数据的方式，可能已经为您解析了此信息。例如，如果您访问示例流，原始 JSON 格式有一个条目，可以将引用、标签等解析为您的数组。在此处查看[twitter api 文档](https://dev.twitter.com/docs/api/1/get/statuses/show/%3aid)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:29:24.033

如何`#\S+`替换`#\\\S+`

# html - 使所有 在垂直菜单中相同宽度的 CSS

> ID：13762870
> 
> 赞同：1
> 
> 时间：2012-12-07T12:12:08.287
> 
> 标签：html, css

嗨，我正在尝试使用 UL 构建垂直菜单，但我希望所有链接都具有相同的宽度，而与文本的长度无关...

所以现在我丑陋的菜单有这个代码：

```
<html>
<head>
    <link href="gg.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Droid+Sans' rel='stylesheet' type='text/css'>
</head>
<body>
<div id="x">    
    <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">Quem somos</a></li>
        <li><a href="#">Blog</a></li>
        <li><a href="#">Onde Estamos</a></li>
        <li><a href="#">Contactos</a></li>
    </ul>
</div>
</body>
</html> 
```

这个CSS：

```
body{
font-family: 'Droid Sans', sans-serif;
background-color:#D0DCE8;
}

ul{
list-style:none;
margin:0px;
padding:0px;
}

li{
display:table;
background-color:#FFC0CB;
}

a{
text-decoration:none;
color:#4183A7;
padding:10px 40px;
background-color:#FFC0CB;
display:block;
}a:hover{
    color:#6B9CD0;
}

#x{
width:150px;
} 
```

我在任何地方都找不到制作所有

*   有相同的宽度...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:14:20.053

你可以通过设置宽度来做到这一点`li`。例如

```
li{
width:40px;
max-width:40px; // to make sure that width will be 40px 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:18:19.287

您可以通过两种方式做到这一点。

您已将`a`元素设置为块，因此您可以通过设置它的宽度或其直接容器的宽度来设置宽度。

```
#x ul li a {
  width:150px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:16:31.340

将您`li`的 CSS 部分更改为

```
li{
    display:inline-block;
    width: 150px;
    ....
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T12:18:23.337

您可以将您的 li CSS def 更改为：

```
li {
  display:block;
  background-color:#FFC0CB;
} 
```

# javascript - 如何将单击事件绑定到表头中的 Div

> ID：13762872
> 
> 赞同：1
> 
> 时间：2012-12-07T12:12:09.850
> 
> 标签：javascript, jquery, asp.net-mvc

```
<table class="table lsttabl">
    <thead>
    <tr>
        <th><div id="NameLabel">Customer Name</div></th>
        <th>Email</th>
        <th>Registered</th>
        <th id="Date1Label">Created Date</th>
        <th id="Date2Label">Last Updated Date</th>
        <th id="Date3Label">Expiry Date</th>
        <th id="UserCountLabel">User Count</th>
        <th>Active</th>
        <th>Configure</th>
        <th>Edit</th>
    </tr>
    </thead>

    <tbody> 
    </tbody>
</table> 
```

我正在尝试使用下面的代码绑定事件

```
$("#NameLabel").click(function () { alert("hello"); }); 
```

我尝试了很多变化，但它不起作用..请分享您的知识。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T12:15:28.150

如果此代码是在页面加载后动态添加的，您可能需要使用委托函数。

```
$('body').delegate('click','#NameLabel',function(){
  alert("hello");
}); 
```

在这里，我使用`body`选择器，因为我可以确定页面加载时 body 元素就在那里。如果您正在将动态内容加载到另一个父元素中，则可以使用它而不是将事件附加到正文。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T12:22:23.347

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#NameLabel').click(function () {
            alert("Customer Name Clicked");
        });
    });
</script>
<table class="table lsttabl">
    <thead>
    <tr>
        <th><div id="NameLabel">Customer Name</div></th>
        <th>Email</th>
        <th>Registered</th>
        <th id="Date1Label">Created Date</th>
        <th id="Date2Label">Last Updated Date</th>
        <th id="Date3Label">Expiry Date</th>
        <th id="UserCountLabel">User Count</th>
        <th>Active</th>
        <th>Configure</th>
        <th>Edit</th>
    </tr>
    </thead>

    <tbody> 
    </tbody>
</table> 
```

不要忘记导入 JQuery 库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T12:13:45.487

您需要在[document.ready](http://api.jquery.com/ready/)中绑定它，以确保该元素在脚本访问之前可用。

**[现场演示](http://jsfiddle.net/rajaadil/sBsMd/)**

```
$(document).ready(function(){

   $("#NameLabel").click(function () {
          alert("hello");
   });

}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-07T12:14:26.543

尝试以下操作：

```
$(document).ready(function(){
    $('table.lsttabl thead th div[id$=NameLabel]').click(function(){
    alert("hii");
    });
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-07T12:18:00.483

尝试：

```
$(document).ready(function(){
    $('table').on('click', 'th', function(){
        console.log(event.target);
    });
}); 
```

如果你想要它专门用于#NameLabel，然后将 on 选择器更改为 '#NameLabel'

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-07T12:16:22.200

你可以用这个

这是一个有效的 jsfiddle [http://jsfiddle.net/9PNk6/](http://jsfiddle.net/9PNk6/)

```
$("#NameLabel").on('click',function () {
   alert("hello");
}); 
```

# tabs - 错误时的Xcode选项卡切换

> ID：13762879
> 
> 赞同：1
> 
> 时间：2012-12-07T12:13:04.770
> 
> 标签：tabs, switch-statement, xcode4.5

我在 Xcode4.5.2 中遇到了一些显示问题当我的代码运行期间发生错误时（无论它是什么），Xcode 的选项卡从我所在的选项卡（大部分时间 main.cpp）切换到另一个显示已检测到的库的选项卡问题。我想禁用这个自动开关。

我已经在 Xcode>preferences>behavior 中尝试了很多按钮

但我还没有得到它

你能帮助我吗？谢谢

# javascript - jQuery中的AJAX回调返回值处理

> ID：13762880
> 
> 赞同：0
> 
> 时间：2012-12-07T12:13:05.637
> 
> 标签：javascript, jquery, ajax, callback, return

我有一个从 mapquest 获取 gis 数据的简单函数：

```
function reverseGeocoding(lat,lng){
    var url = 'http://open.mapquestapi.com/nominatim/v1/reverse?format=json&lat=' + lat + '&lon=' +lng+' &zoom=18&addressdetails=1';
    $.ajax({
        url: url,                       
        crossDomain:true,
        success: function(response){                
            $("#revgeo-place").html(response.display_name);                 
        }
    });

} 
```

我该如何改进它，以便当从另一个函数调用此函数时，返回值会异步更新？

我不想在函数中显式地放置任何 DOM 引用，并且我想保持 ajax 异步，理想情况下应该是这样的：

```
$("#revgeo-place").html(reverseGeocoding(lat,lng).display_name);

function reverseGeocoding(lat,lng){
    var url = 'http://open.mapquestapi.com/nominatim/v1/reverse?format=json&lat=' + lat + '&lon=' +lng+' &zoom=18&addressdetails=1';
    $.ajax({
        url: url,                       
        crossDomain:true,
        success: function(response){
            console.log(response);
            return response;                                    
        }
    });

} 
```

看起来当我这样做时 DOM 对象没有更新，然后函数返回响应。

任何想法都会有所帮助，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T12:20:02.950

您可以使用回调：

```
function reverseGeocoding(lat,lng, callback){
    var url = 'http://open.mapquestapi.com/nominatim/v1/reverse?format=json&lat=' + lat + '&lon=' +lng+' &zoom=18&addressdetails=1';
    $.ajax({
        url: url,                       
        crossDomain: true,
        success: callback
    });
};

reverseGeocoding(lat,lng, function(response){

    $("#revgeo-place").html(response.display_name);

}); 
```

所以你的`reverseGeocoding`函数对 DOM 是不可知的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T12:17:34.447

从 ajax 调用返回延迟对象，并`done()`在 ajax 调用完成时使用该函数更新 HTML：

```
reverseGeocoding(lat,lng).done(function(data) {
    $("#revgeo-place").html(data.display_name);
});

function reverseGeocoding(lat,lng){
    var url = 'http://open.mapquestapi.com/nominatim/v1/reverse?format=json&lat=' + lat + '&lon=' +lng+' &zoom=18&addressdetails=1';
    return $.ajax({
        url: url,                       
        crossDomain:true
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:19:08.190

您的第二个示例不起作用，因为在您设置`$("#revgeo-place").html()`.

如果您希望能够修改更新的元素，请将其作为参数添加到您的函数中，如下所示：

```
function reverseGeocoding(lat, lng, $updateElement){
    var url = 'http://open.mapquestapi.com/nominatim/v1/reverse?format=json&lat=' + lat + '&lon=' +lng+' &zoom=18&addressdetails=1';
    $.ajax({
        url: url,                       
        crossDomain:true,
        success: function(response){                
            $updateElement.html(response.display_name);                 
        }
    });
}

reverseGeocoding(latitude, longitude, $("#revgeo-place")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T12:19:52.090

您可以将`onSuccess`参数添加到`reverseGeocoding`ajax 函数完成时调用的函数

```
function reverseGeocoding(lat, lng, onSuccess){
    var url = 'http://open.mapquestapi.com/nominatim/v1/reverse?format=json&lat=' + lat + '&lon=' +lng+' &zoom=18&addressdetails=1';
    $.ajax({
        url: url,                       
        crossDomain:true,
        success: function(response){
            onSuccess();                                 
        }
    });
}

function onReverseGeocodingSuccess() {
    $("#revgeo-place").html(response.display_name); 
}

reverseGeocoding(100, 200, onReverseGeocodingSuccess); 
```

# java - 如何使用 java 从 xml 文件中提取详细信息？

> ID：13762881
> 
> 赞同：1
> 
> 时间：2012-12-07T12:13:08.600
> 
> 标签：java, xml, xml-parsing

我有以下类型的 XML 文件，

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE eSummaryResult PUBLIC "-//NLM//DTD eSummaryResult, 29 October 2004//EN" "http://www.ncbi.nlm.nih.gov/entrez/query/DTD/eSummary_041029.dtd">
<eSummaryResult>
<DocSum>
    <Id>224589801</Id>
    <Item Name="Caption" Type="String">NC_000010</Item>
    <Item Name="Title" Type="String">Homo sapiens chromosome 10, GRCh37.p10 Primary Assembly</Item>
    <Item Name="Extra" Type="String">gi|224589801|gnl|ASM:GCF_000001305|10|ref|NC_000010.10||gpp|GPC_000000034.1||gnl|NCBI_GENOMES|10[224589801]</Item>
    <Item Name="Gi" Type="Integer">224589801</Item>
    <Item Name="CreateDate" Type="String">2002/08/29</Item>
    <Item Name="UpdateDate" Type="String">2012/10/30</Item>
    <Item Name="Flags" Type="Integer">544</Item>
    <Item Name="TaxId" Type="Integer">9606</Item>
    <Item Name="Length" Type="Integer">135534747</Item>
    <Item Name="Status" Type="String">live</Item>
    <Item Name="ReplacedBy" Type="String"/>
    <Item Name="Comment" Type="String"><![CDATA[  ]]></Item>
</DocSum>

</eSummaryResult> 
```

如何根据它的名称值从 node="Item" 中提取详细信息？使用标准的 java dom xml 还是更好地使用任何其他 xml 解析器库来达到这个目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:58:49.093

如果只使用标准 Java，XPath 是可行的方法：

```
private URL xml = getClass().getResource("/example.xml");

@Test
public void testExamples() throws Exception {
    //assertEquals("NC_000010", extractUsingDom("Caption"));
    assertEquals("NC_000010", extractUsingXPath("Caption"));
}

public String extractUsingXPath(final String name) throws XPathExpressionException, IOException {
    // XPathFactory class is not thread-safe so we do not store it
    XPath xpath = XPathFactory.newInstance().newXPath();
    return xpath.evaluate(
        String.format("/eSummaryResult/DocSum/Item[@Name='%s']", name), // xpath expression
        new InputSource(xml.openStream()));                             // the XML Document
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:41:24.163

试试下面的代码

```
/* Create a Document object (doc) from the xml */
NodeList list = doc.getElementsByTagName("Item");

for(int i=0;i<list.getLength();i++)
{
    Node node = list.item(i);
    NamedNodeMap namedNodeMap = node.getAttributes();
    if(namedNodeMap.getNamedItem("Name").getTextContent().equalsIgnoreCase("Caption"))
    {
         System.out.println(node.getTextContent());
    }
} 
```

输出应该是`NC_000010`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T13:05:39.890

我建议 StAX，试试这个 (javax.xml.stream.*)

```
 XMLInputFactory f = XMLInputFactory.newInstance();
    XMLStreamReader rdr = f.createXMLStreamReader(new FileReader("test.xml"));
    while (rdr.hasNext()) {
        if (rdr.next() == XMLStreamConstants.START_ELEMENT) {
            if (rdr.getLocalName().equals("Item")) {
                System.out.println(rdr.getAttributeValue("", "Name"));
                System.out.println(rdr.getElementText());
            }
        }
    } 
```

StAX 必须始终是首先要考虑的事情。请参阅[http://en.wikipedia.org/wiki/StAX](http://en.wikipedia.org/wiki/StAX)你会知道为什么

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T12:45:57.213

也许使用 XPath？

```
Document dom = ...;
XPath xpath = XPathFactory.newInstance().newXPath();
String result = xpath.evaluate("/eSummaryResult/DocSum/Item[@Name='Title']", dom); 
```

# java - 当我从另一个屏幕返回时，前一个屏幕关闭（调用 onDestroy）

> ID：13762883
> 
> 赞同：1
> 
> 时间：2012-12-07T12:13:10.917
> 
> 标签：java, android, android-intent

我有一个主页和登录屏幕。在主屏幕中，我调用了登录屏幕。

问题是当我登录并返回主页时。该应用程序调用 onDestroy of Home 并关闭。

这是代码：

```
public class Home extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.home);

        final ImageView login_username_btn = (ImageView) findViewById(R.id.login_username_btn);

        login_username_btn.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent intent = new Intent(getApplicationContext(), Login.class);
                startActivity(intent);
            }
        });
    }

}

public class Login extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.getWindow().setSoftInputMode(
                WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);
        setContentView(R.layout.login);

        final EditText etUsuario = (EditText) findViewById(R.id.txtUsuario);
        final EditText etSenha = (EditText) findViewById(R.id.txtSenha);
        final ImageView ivVoltar = (ImageView) findViewById(R.id.voltarBtn);

        ivVoltar.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(findViewById(android.R.id.content)
                    .getWindowToken(), 0);

                finish();
            }
        });

    @Override
    protected void onPause() {
        super.onPause();

        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.hideSoftInputFromWindow(findViewById(android.R.id.content)
            .getWindowToken(), 0);
    }
}

And on LogCat shows "GC_EXTERNAL_ALLOC freed" and "GC_EXPLICIT freed" messages. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:23:06.687

要返回您正在调用的主页`finish();`，这会破坏活动（完成活动已经在 onClose() 之后）。

![在此处输入图像描述](../Images/a5ede7290c6eb09fef2c93e18c8bf169.png)

取而代之的是创建 HomeActivity 的意图。这样就解决了问题。

```
startActivity(new Intent(getBaseContext(), HomeActivity.class); 
```

或者

```
@Override
public void onBackPressed() 
{
    super.onBackPressed();
}

ivVoltar.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(findViewById(android.R.id.content)
                .getWindowToken(), 0);

            onBackPressed();
        }
    }); 
```

# wcf - MEX 客户端行为因机器而异

> ID：13762884
> 
> 赞同：1
> 
> 时间：2012-12-07T12:13:20.180
> 
> 标签：wcf, wcf-client

我有一个运行在服务器上的 .NET WCF Web 服务，我可以从几台不同的计算机访问该服务。为了测试我的连接性，我有一个 PowerShell 脚本，它构建代理、连接到 Web 服务、发送消息并断开连接。构建代理的代码来自这里：[http ://www.ilovesharepoint.com/2008/12/call-wcf-services-with-powershell.html](http://www.ilovesharepoint.com/2008/12/call-wcf-services-with-powershell.html)

我有一个批处理文件，它运行脚本的多次迭代（500 次），我看到不同的行为取决于我在哪台客户端计算机上运行测试脚本：

*   COMPUTER A：成功运行脚本，没有任何失败。完成所有 500 次迭代大约需要 15 分钟。
*   计算机 B：迭代失败的概率约为 3% - 4%。完成所有 500 次迭代需要**1 个多小时。**故障每 3-5 分钟发生一次。

当脚本失败时，我收到的消息是：

> 使用“0”参数调用“GetMetadata”的异常：“元数据包含无法解析的引用：'https://SERVER:8733/WSEngineService/?WSDL'。” 在 D:\CLIENT\proxyTest.ps1:32 char:41 + $metadataSet = $mexClient.GetMetadata <<<< () + CategoryInfo : NotSpecified: (:) [], ParentContainsErrorRecordException + FullyQualifiedErrorId : DotNetMethodException

异常的堆栈跟踪是：

> 在 System.Management.Automation.DotNetAdapter.AuxiliaryMethodInvoke(Object target, Object[] arguments, MethodInformation methodInformation, Object[] originalArguments) 在 System.Management.Automation.DotNetAdapter.MethodInvokeDotNet(String methodName, Object target, MethodInformation [] methodInformation,对象 [] 参数）在 System.Management.Automation.Adapter.BaseMethodInvoke（PSMethod 方法，对象 [] 参数）在 System.Management.Automation.ParserOps.CallMethod（令牌令牌，对象目标，字符串方法名，对象 [] 参数阵列， Boolean callStatic, Object valueToSet) at System.Management.Automation.MethodCallNode.InvokeMethod(Object target, Object[] arguments, Object value) at System.Management.Automation.MethodCallNode.Execute(Array input, Pipe outputPipe,ExecutionContext 上下文）在 System.Management.Automation.AssignmentStatementNode.Execute（数组输入，管道 outputPipe，ExecutionContext 上下文）在 System.Management.Automation.StatementListNode.ExecuteStatement（ParseTreeNode 语句，数组输入，管道输出管道，ArrayList 和结果列表，ExecutionContext 上下文)

MEX 客户端属性为：

```
PS D:\CLIENT>>> $mexClient

SoapCredentials           : System.ServiceModel.Description.ClientCredentials
HttpCredentials           :
OperationTimeout          : 00:01:00
MaximumResolvedReferences : 2147483647
ResolveMetadataReferences : True 
```

这是发生异常的代码：

```
# get metadata of a service
function global:Get-WsdlImporter($wsdlUrl=$(throw "parameter -wsdlUrl is missing"), $httpGet)
{
        if($httpGet -eq $true)
        {
                $local:mode = [System.ServiceModel.Description.MetadataExchangeClientMode]::HttpGet
        }
        else
        {
                $local:mode = [System.ServiceModel.Description.MetadataExchangeClientMode]::MetadataExchange
        }

        $mexClient = New-Object System.ServiceModel.Description.MetadataExchangeClient((New-Object System.Uri($wsdlUrl)),$mode)
        $mexClient.MaximumResolvedReferences = [System.Int32]::MaxValue
        $metadataSet = $mexClient.GetMetadata()   # <-- Fails sometimes on COMPUTER B but never on COMPUTER A.
        $wsdlImporter = New-Object System.ServiceModel.Description.WsdlImporter($metadataSet)

        return $wsdlImporter   
} 
```

我的网络服务配置如下：

```
 <behavior name="WsTuBehaviorConfig">
      <serviceMetadata httpGetEnabled="false" httpsGetEnabled="true" httpsGetBinding="" />
      <serviceDebug includeExceptionDetailInFaults="true" />
      <serviceThrottling maxConcurrentCalls="40" maxConcurrentSessions="40" maxConcurrentInstances="40" />
      <serviceCredentials>
        <clientCertificate>
          <authentication certificateValidationMode="PeerTrust" />
        </clientCertificate>
        <userNameAuthentication userNamePasswordValidationMode="Custom" membershipProviderName="Ldap" customUserNamePasswordValidatorType="MyProduct.Framework.Security.AuthenticationProvider.UserNamePasswordLdapUserId,MyProduct.Framework.Security.AuthenticationProvider" />
      </serviceCredentials>
      <serviceAuthorization principalPermissionMode="UseAspNetRoles" roleProviderName="LdapOperationProvider" />
      <useRequestHeadersForMetadataAddress />
    </behavior>

  <ws2007HttpBinding>
    <binding name="ws2007HttpTuBindingConfig" maxReceivedMessageSize="2147483647">
      <readerQuotas maxDepth="3200" maxStringContentLength="8192" maxArrayLength="2147483647" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="Transport">
        <transport clientCredentialType="Basic" proxyCredentialType="None" />
        <message clientCredentialType="None" negotiateServiceCredential="false" establishSecurityContext="false" />
      </security>
    </binding>
  </ws2007HttpBinding>

  <service behaviorConfiguration="WsTuBehaviorConfig" name="MyProduct.BusinessLibrary.Services.WSEngineService">
    <endpoint name="WsEngineWs2007HttpEp" address="ws2007HttpEP" binding="ws2007HttpBinding" bindingConfiguration="ws2007HttpTuBindingConfig" behaviorConfiguration="accessDeniedFaultBehaviorConfig" contract="MyProduct.BusinessLibrary.Services.IWSEngineService" />
    <endpoint name="mexWSEngineEP" address="mex" binding="mexHttpsBinding" contract="IMetadataExchange" />
    <host>
      <baseAddresses>
        <add baseAddress="https://SERVER:8733/WSEngineService/" />
      </baseAddresses>
    </host>
  </service> 
```

我告诉代理测试脚本忽略任何 SSL 警告：

```
[System.Net.ServicePointManager]::ServerCertificateValidationCallback = {$true} 
```

我不知道为什么脚本偶尔会在计算机 B 上失败，但在计算机 A 上从未失败。不幸的是，计算机 B 是一个负载驱动程序，用于针对 Web 服务运行性能测试，并且这些故障阻碍了我的能力进行测试。我不能使用 COMPUTER A 进行测试，因为我不想进入这里。我可以看到两台计算机之间的唯一区别是计算机 A 是 Windows 7 Professional 工作站，计算机 B 是 Windows 2008 R2 服务器。两者都安装了相同版本的 .NET 框架和 PowerShell。

有人对为什么 COMPUTER B 无法尝试获取我的 Web 服务的元数据有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T16:33:06.957

我想我找到了原因和治疗方法。

COMPUTER B 有 6 个网络适配器，一个连接到我们的公司网络，一个禁用，另外 4 个启用，每个都有自己的 IP 地址，并连接到“未知网络”。我禁用了除连接到我们网络的 1 个适配器之外的所有适配器，计算机 B 现在的行为类似于计算机 A。

# mysql - 快查询来慢日志【mysql】

> ID：13762885
> 
> 赞同：1
> 
> 时间：2012-12-07T12:13:20.967
> 
> 标签：mysql, query-optimization, mysql-slow-query-log

有时我在慢日志中看到不应该存在的查询。

我知道这样的查询每天执行很多次，而且速度足够快，当我分析慢日志时，我发现这个特定的查询只一次记录下来，

```
### 1 Query 
### Total time: 23.728427, Average time: 23.728427
### Taking 23.728427  seconds to complete
### Rows analyzed 349012 
```

这是否意味着由于某些表被锁定而变得缓慢？或者其他一些查询使数据库服务器忙？或者是其他东西 ？？？

如何找出原因，肯定是快速查询出现在日志中？

# c - 为什么我的设备驱动程序不打印我输入的内容

> ID：13762887
> 
> 赞同：0
> 
> 时间：2012-12-07T12:13:27.777
> 
> 标签：c, linux, linux-kernel, linux-device-driver

```
static ssize_t my_read(struct file *f, char __user *buf, size_t
      len, loff_t *off)
{
    static int first=1;
    printk(KERN_INFO "Driver: read()\n");
    printk(KERN_INFO "Value of loff_t %ld",*off);
    printk(KERN_INFO "Inside value of stringlength is %d",strlen(buffer));

    if (copy_to_user(buf,buffer, 1) != 0)
        return -EFAULT;
    else
    {
        if(first<=strlen(buffer))
        {   
            first=first+1;
            printk(KERN_INFO "INside value of first is %d",first);
            printk(KERN_INFO "Inside value of stringlength is %d",strlen(buffer));

            return 1;
        }
        else 
              return 0;
    }

    }
      static ssize_t my_write(struct file *f, const char __user *buf,
      size_t len, loff_t *off)
    {
       printk(KERN_INFO "Driver: write()\n");
       if (copy_from_user(buffer, buf+len-1, 1) != 0)
            return -EFAULT;
       else
            return len;

    } 
```

但是，我第一次执行 echo -n "HEllo" and`cat /dev/mynull`时，它只打印`o`并出于某种原因释放设备。后续不`cat /dev/mynull`返回任何内容。的值为`strlen(buffer)`1。
为什么会这样？预期的结果是 Hello 应该被打印并且`strlen()`应该返回`5`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:26:45.450

这一行在`my_write`：

```
copy_from_user(buffer, buf+len-1, 1) 
```

将 1 个字符从`buf+len-1`用户地址复制到内核缓冲区。那是用户字符串的最后一个字符，即`'o'`. 我认为应该是：

```
copy_from_user(buffer, buf, len); 
```

接着：

```
buffer[len] = 0; 
```

以防万一用户缓冲区不是 NUL 终止的。

所有这些都没有考虑`off`价值，但这取决于你到底想做什么（也许复制到`buffer + *off`？）。顺便说一句，您还应该检查缓冲区溢出等。

# sql - 开放数据源和日期时间2

> ID：13762891
> 
> 赞同：0
> 
> 时间：2012-12-07T12:13:36.917
> 
> 标签：sql, sql-server-2008, ms-access, datetime2

我正在使用此技巧将 Access 数据加载到临时表中，而无需指定所有列（SQL Server 2008）。

```
SELECT * INTO #tempTable FROM OPENDATASOURCE('Microsoft.ACE.OLEDB.12.0',
                             'Data Source="d:\Data.MDB"' )...TableName 
```

这在大多数情况下都可以正常工作，只是它将访问日期转换为日期时间字段而不是 datetime2，这使得这在 1753 年之前不起作用。

是否有任何技巧可以强制使用 datetime2*而无需*手动指定所有列？

# youtube-api - 视频有广告时 youtube api 失败

> ID：13762892
> 
> 赞同：0
> 
> 时间：2012-12-07T12:13:43.163
> 
> 标签：youtube-api

我一直在创建一个使用 youtube 视频的网站。为了测试它，我只使用从 youtube 获得的 url 数据库。我发现我对 youtube api 的使用适用于某些视频，但不适用于其他视频。因此，为了找出原因，我右键单击视频，发现这两种类型都是 Flash 视频。但是，我发现我的第一次“搜索”与开头卡住了广告的视频不起作用，即使当视频嵌入到我的 iframe 中时，广告也不会出现。我认为这是一个错误。有一点可能不是广告，而是这些视频的其他内容，因为我的样本相当少。谢谢，

# linux - 使用 pam 设置用户密码

> ID：13762896
> 
> 赞同：1
> 
> 时间：2012-12-07T12:14:07.247
> 
> 标签：linux, security, pam

我有一个以 root 身份运行的 C 程序，并通过调用 pam_chauthtok 使用 PAM 设置用户密码。这可行，但它允许设置弱密码，并且不会保存用户更改自己的密码时将保存的密码历史记录。

有什么办法可以强制 pam 像我正在以我正在更改其密码的用户身份运行一样行事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:36:53.387

如果它从 pam 接收到类型错误的消息，我已经通过 pam 转换函数错误解决了这个问题。这似乎有效。

# ajax - 在 Safari 中将文件上传到 Express.js 服务器失败

> ID：13762901
> 
> 赞同：1
> 
> 时间：2012-12-07T12:14:22.500
> 
> 标签：ajax, node.js, safari, express, valums-file-uploader

我正在使用 ajax Valum 的 qq 上传器 (https://github.com/valums/file-uploader) 将图片上传到 Express.js (3.0.0) 服务器。它适用于除 Safari 之外的所有流行浏览器。出现以下错误：

TypeError：无法读取提升时未定义的属性“长度”（/home/andrew/projects/dreamshare-git/src/main/node_modules/express/node_modules/connect/node_modules/qs/lib/querystring.js:15:18）在解析 (/home/andrew/projects/dreamshare-git/src/main/node_modules/express/node_modules/connect/node_modules/qs/lib/querystring.js:53:58) 在解析 (/home/andrew/projects/ dreamshare-git/src/main/node_modules/express/node_modules/connect/node_modules/qs/lib/querystring.js:50:7）在合并（/home/andrew/projects/dreamshare-git/src/main/node_modules/ express/node_modules/connect/node_modules/qs/lib/querystring.js:68:5) 在 String.split.reduce.base (/home/andrew/projects/dreamshare-git/src/main/node_modules/express/node_modules/ connect/node_modules/qs/lib/querystring.js:111:14) 在数组。在 Object.exports.parse 的 parseString (/home/andrew/projects/dreamshare-git/src/main/node_modules/express/node_modules/connect/node_modules/qs/lib/querystring.js:101:6) 处减少（本机） (/home/andrew/projects/dreamshare-git/src/main/node_modules/express/node_modules/connect/node_modules/qs/lib/querystring.js:127:7) 在 IncomingMessage.module.exports (/home/andrew/ projects/dreamshare-git/src/main/node_modules/express/node_modules/connect/lib/middleware/urlencoded.js:66:18) 在 IncomingMessage.EventEmitter.emit (events.js:90:17)在 IncomingMessage.EventEmitter.emit (events.js:90: 17)在 IncomingMessage.EventEmitter.emit (events.js:90: 17)

你能建议任何解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:53:14.203

好的，我们在深入研究 express.js 内部后对其进行了排序。问题是旧版本的文件上传器没有为上传的文件设置类型，而 Safari 将其设置为默认的普通帖子，因此 express.js 错误地将其处理为普通帖子查询。解决方案是更新上传库。其中以下行正确设置了内容类型：

```
xhr.setRequestHeader("Content-Type", file.type); 
```

# eclipse - 在 OCL 中导航 UML 关联

> ID：13762906
> 
> 赞同：2
> 
> 时间：2012-12-07T12:14:37.283
> 
> 标签：eclipse, uml, ocl, eclipse-mdt

我正在尝试使用 eclipse OCL 实现在 OCL 中导航 UML 关联。我知道 UML`Associations`被视为`Attributes`，并且`getAttributes()`在 a 上调​​用的函数`Class`将返回一个包含 的集合`Attributes`以及`Property`每个 的对象`Association`。然而，我需要的不是，`Property`而是`Class`.`Association`

对于双向`Associations`，下面的代码可以工作，虽然它看起来不是很优雅：

`self.getAllAttributes().opposite.class`

它不仅不优雅，而且在定向上也不起作用`Associations`（那里没有对立面`Property`）。`Associations`在 OCL 中是否有更好的导航方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:51:12.320

使用 property.type 怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-10T18:29:31.733

您为什么不尝试使用 OCL 控制台，如本文中所述

[http://lowcoupling.com/post/47845805110/ocl-and-the-eclipse-ocl-console](http://lowcoupling.com/post/47845805110/ocl-and-the-eclipse-ocl-console)

# sql-server-2005 - 计算范围内的日期差异

> ID：13762908
> 
> 赞同：-3
> 
> 时间：2012-12-07T12:14:41.590
> 
> 标签：sql-server-2005

我需要帮助才能在 sql 2005 中创建查询。

我有 4 个日期：1 个标准开始日期和 3 个要比较的日期。我需要以 10 天为单位计算日期差异。

datediff（天，开始日期，结束日期 1）

从 1 到 10、从 11 到 20 和从 21 到 30 的范围会出现多少次。

这是每 3 个结束日期！

然后是所有（3 个结束日期）1 到 10 aso 的总和（510 次 < 11、275 次 > 10 和 < 21）

在此之后计算所有结束日期的范围百分比。

比如 510/785 = XX.XX% 和 275/785 = XX.XX%

我说清楚了吗？

在此先感谢 1SeoAdvies

@mitch-wheat，这不是一个糟糕的问题，而是一个难以解释的问题！没有表格可以解释这一点。几乎每个表都有一个数据时间字段！

我将再次尝试用非常简单的英语解释这一点。我有一个带有日期时间字段的表。在 excelsheet 中，我有另一个日期时间。两者都有相同的密钥。我知道如何以天为单位计算 datediff。我想知道 1 到 10 之间的 datediff 会出现多少次。

例子：

datediff（天，DateTime1，DateTime2）= 2

datediff（天，DateTime1，DateTime2）= 3

datediff（天，DateTime1，DateTime2）= 11

datediff（天，DateTime1，DateTime2）= 2

datediff（天，DateTime1，DateTime2）= 3

datediff（天，DateTime1，DateTime2）= 11

datediff（天，DateTime1，DateTime2）= 7

datediff（天，DateTime1，DateTime2）= 6

结果是

```
 < 11  = ***6*** (smaller then 11) 
```

> 10 和 <21 = ***2***（在 10 和 21 之间）

将结果相加 6 + 2 = ***8***

计算百分比：

***小于 11 = 6\8 = 75%***

***大于 11 + <21 = 2\8 = 25%***

粗体 /invers 项目是我需要的值！

我现在说清楚了吗？？？？？？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:31:15.717

[SQL小提琴](http://sqlfiddle.com/#!3/db98f/2)

**MS SQL Server 2008 架构设置**：

```
create table YourTable
(
  dt1 datetime,
  dt2 datetime
)

insert into YourTable values(getdate(), dateadd(day, 2, getdate()))
insert into YourTable values(getdate(), dateadd(day, 3, getdate()))
insert into YourTable values(getdate(), dateadd(day, 11, getdate()))
insert into YourTable values(getdate(), dateadd(day, 2, getdate()))
insert into YourTable values(getdate(), dateadd(day, 3, getdate()))
insert into YourTable values(getdate(), dateadd(day, 11, getdate()))
insert into YourTable values(getdate(), dateadd(day, 7, getdate()))
insert into YourTable values(getdate(), dateadd(day, 6, getdate())) 
```

**查询 1**：

```
select S1 / S2 as 'smaller than 11',
       (S2 - S1) / S2 as 'greater than 11 + < 21'
from (
     select 1.0 * sum(case when datediff(day, dt1, dt2) < 11 then 1 else 0 end) as S1,
            1.0 * sum(case when datediff(day, dt1, dt2) < 21 then 1 else 0 end) as S2
     from YourTable
     where datediff(day, dt1, dt2) < 21
     ) as T 
```

**[结果](http://sqlfiddle.com/#!3/db98f/2/0)**：

```
| SMALLER THAN 11 | GREATER THAN 11 + < 21 |
--------------------------------------------
|            0.75 |                   0.25 | 
```

# c# - 如何从客户端访问服务器端 WebControl？

> ID：13762910
> 
> 赞同：1
> 
> 时间：2012-12-07T12:14:51.193
> 
> 标签：c#, javascript, jquery, .net, ajax

**问题描述：**

我有一个带有下拉列表和文本框的简单对话框。根据下拉列表的值，所需的值可以是简单文本、日期或数据库中的特定文本。对于第一种情况，我拥有的简单文本框工作得很好。对于第二种情况，我需要一个日期选择器。对于第三种情况，我保留文本框，但在其上添加了自动完成功能。

我的问题是第二种情况。我尝试了 JQuery Datepicker，它工作正常，但我需要使用不同的（特定于框架的）datepicker，它是一个服务器端 Web UI 控件。

当从下拉列表中选择日期类型时，我隐藏文本框（使用 JQuery）并显示（隐藏的）日期选择器，反之亦然。隐藏效果很好，但是当我尝试保存时，服务器端保存功能无法识别 DatePicker 何时隐藏。我需要这样做的原因是因为我想知道何时保存 DatePicker 或 Textbox 中的值，具体取决于当前可见的值。

我尝试了所有与 css 相关的东西，而服务器似乎无法将这些属性识别为除真实之外的任何其他属性。

**可能的解决方案：**

**1）**我可以做一个“hack”解决方案并添加一个隐藏的文本框，并在每次切换日期选择器时在其中传递一个真假字符串。这样我可以在保存时检查文本框的值，以了解日期选择器是否隐藏。

**2）**另一个（目前正在测试它）是在我的 .cs 文件中创建一个 void 函数，该函数接受一个布尔输入并将一个自定义可见性属性设置为我将添加到日期选择器的框架中为真或假。每当我切换 datepicker 时，我都会使用 AJAX 调用来调用该函数并更改服务器端 datepicker 属性。但是我不知道这个属性是否会在我单击保存之前保持更改，或者它会以某种方式回到它的默认值。

**我的问题：** 上述任何解决方案对您来说都可以吗？为什么？你能想出一个更好的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:46:17.697

我认为您最好的选择是始终在您的页面中拥有 3 个表单控件，并使用选择框的事件`display`使用 jquery 简单地切换它们的状态。`change`这样，您可以在表单验证期间简单地删除未使用的表单元素并提交使用的字段。

或者，您必须编写某种回发函数来处理每次`change`触发选择时重新打印表单的该部分。

- - 编辑 - -

这是您可以使用的表单验证示例：

```
$('form').submit(function(e){
    e.preventDefault();

    if($('select.group', this).val() == "datepicker"){
        // Remove the other elemnts from the DOM
        $('input.group, textbox.group').remove();
    }

    // Submit the form
    $(this).submit();
}); 
```

以下是该`remove`方法的 jQuery 文档：http: [//api.jquery.com/remove/](http://api.jquery.com/remove/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:09:11.720

为了结束这个问题，Infadelic 的评论解决了我的问题。为了更清楚，我将其发布为接受它的答案。

> 为什么不只区分下拉列表中的选择项？你有信息，你应该保存哪个值。

毕竟它比我预期的要简单。

# asp.net - 在gridview按钮字段的新窗口中打开新页面

> ID：13762915
> 
> 赞同：0
> 
> 时间：2012-12-07T12:15:36.503
> 
> 标签：asp.net

我的asp.net 页面中有gridview。

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="true" CssClass="Gridview"
                    OnRowCommand="GridView1_RowCommand">
                    <Columns>
                        <asp:ButtonField Text="VIEW" ButtonType="link" CommandName="view" />
                    </Columns>
                </asp:GridView> 
```

我想在新窗口中打开新页面。

为此我使用了下面的代码。（此代码不起作用！-请检查是否有任何错误）

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName.Equals("view"))
    {
        int index = Convert.ToInt32(e.CommandArgument);
        GridViewRow gvrow = GridView1.Rows[index];
        String id= gvrow.Cells[1].Text;
        string url = "~/Mypage.aspx?myid=" + id;
        Response.Write("<script>window.open( 'www.google.com' , '-blank' );</script>");
    }
} 
```

**我在运行时在 GRIDVIEW 中绑定数据，** 请记住这一点。

这样我就不能使用超链接字段。

建议我使用 gridview 中的编码在新窗口中打开新页面的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-28T12:44:12.990

迟到总比永远好……我自己也遇到了同样的问题，所以我在这里发帖供其他编码人员寻求帮助。

首先我使用链接按钮而不是按钮域...

```
<ItemTemplate>
   <asp:LinkButton ID="viewLink" runat="server" CommandName="Select"  >
       <img class="pdficon" src="../Pictures/pdf_icon.png" />
   </asp:LinkButton>
</ItemTemplate> 
```

（有一张图片可以点击在新窗口中打开一个文档，忽略它）

我的 gridview 有以下代码...（gridview documentGridView 上的名称）

```
OnSelectedIndexChanged="openLinkClick"
DataKeyNames="docfolder" 
```

在我的代码隐藏中，当我请求新的“默认”页面时，我将指向新页面的链接作为参数传递

```
protected void openLinkClick(object sender, EventArgs e)
{
    //lots of code for constructing link, the important thing is SelectedDataKey
    string docId = documentsGridView.SelectedDataKey.Value.ToString();    
    //passing link as parameter when opening a new default page with given
    //dimensions for new window
    ClientScript.RegisterStartupScript(this.Page.GetType(), "", "window.open('Document.aspx?param1=" + link + "','Graph','height=900,width=1100');", true);
    //refresh page
    Page_Load(this, null);
} 
```

最后在 Document.aspx 的 Page_Load 中，我有以下用于获取链接并打开我的文件的代码，因为您应该可以获取链接并进行重定向。

```
public partial class Document : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        //Open pdf in browser
        Response.ContentType = "Application/pdf";
        //get the parameter containing the adress for the file
        string link = Request.QueryString["param1"];
        //open the file
        Response.WriteFile(link);
        Response.End();
    }
} 
```

也许不是最简单的解决方案，而是一种解决在客户端而不是服务器端打开的空白页面的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:20:45.393

替换您的代码

```
Response.Write("<script>window.open( 'www.google.com' , '-blank' );</script>"); 
```

至

```
ClientScript.RegisterClientScriptBlock(this.GetType(), "Message", "window.open('www.google.com','_blank');", true); 
```

# gzip - 设置 zlib 以生成 gzip 压缩数据

> ID：13762918
> 
> 赞同：6
> 
> 时间：2012-12-07T12:15:45.053
> 
> 标签：gzip, zlib

我有一个关于使用 zlib 库压缩数据的问题。我想设置zlib（即deflateInit函数），使压缩数据是二进制等于命令生成的数据：gzip -9。这可能吗？先感谢您

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-05T14:58:34.510

windowsBits 参数的默认值为 15。
添加 16 将是 31。
15 | 16 返回 31。

```
z_stream strm;
unsigned char* in = DATA TO COMPRESS;

strm.zalloc = Z_NULL;
strm.zfree = Z_NULL;
strm.opaque = Z_NULL;
strm.next_in = in;

int windowsBits = 15;
int GZIP_ENCODING = 16;

deflateInit2 (&strm, Z_DEFAULT_COMPRESSION, Z_DEFLATED,
              windowsBits | GZIP_ENCODING,
              8,
              Z_DEFAULT_STRATEGY)); 
```

[http://www.lemoda.net/c/zlib-open-write/index.html](http://www.lemoda.net/c/zlib-open-write/index.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T15:55:04.603

您无法获得与 gzip 完全相同的输出。但是，您可以获得与 gzip 兼容的输出，以便 gzip 能够解压缩它。你需要使用`deflateInit2()`.

# php - 通过给定值返回多维数组中的对应值和相同的百分比。(PHP)

> ID：13762920
> 
> 赞同：1
> 
> 时间：2012-12-07T12:15:55.227
> 
> 标签：php, arrays, multidimensional-array

我想检查多维数组中的值是否与给定百分比相同。

例如这是我的数组：

```
$shop = array( array( Title => "rose", 
                      Price => 1.25,
                      Number => 15 
                    ),
               array( Title => "daisy", 
                      Price => 0.75,
                      Number => 25,
                    ),
               array( Title => "orchid", 
                      Price => 1.15,
                      Number => 7 
                    )
             ); 
```

如果给定值（比如“testorchid”）与多维数组中的值相同 55%。返回多维数组中对应的值和相同的procent。

所以在这种情况下。如果我检查“testorchid”，它会返回“orchid”和 55.56 procent。有点像similar_text(): 工作

我有一个函数可以检查给定值（针）是否与多维数组中的值相同：

```
function in_array_r($needle, $haystack, $strict = true) {
    foreach ($haystack as $item) {
        if (($strict ? $item === $needle : $item == $needle) || (is_array($item) && in_array_r($needle, $item, $strict))) {
            return true;
        }
    }

    return false;
    } 
```

但它仅在值完全相同时才返回 true。不是多维数组中的对应值，也不是相同值的百分比。

我想说这样的话：如果“orchidtest”与多维数组中的 [“title”] 相同 > 60%，则将该值以百分比表示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:42:30.103

```
<?php
    $shop = array(
        array(
            'Title' => "rose",
            'Price' => 1.25,
            'Number' => 15
        ),
        array(
            'Title' => "daisy",
            'Price' => 0.75,
            'Number' => 25,
        ),
        array(
            'Title' => "orchid",
            'Price' => 1.15,
            'Number' => 7
        )
    );

    function find_similar($compare, $array, $threshold = 0)
    {
        $return = array();
        $score;
        foreach ($array as $k => $v)
        {
            similar_text($compare, $v['Title'], $score);
            if ($score >= $threshold)
            {
                $return[] = array(
                    'compared' => $compare,
                    'title' => $v['Title'],
                    'score' => number_format($score, 2)
                );
            }
        }
        usort($return, function ($a, $b)
        {
            if((double)$a['score'] == (double)$b['score'])
            {
                return 0;
            }
            return ($a['score'] < $b['score']) ? 1 : -1;
        });
        return $return;
    }

    $similar = find_similar('testorchid', $shop, 14);
?> 
```

给你一个按最相似排序的数组`$similar`，你可以指定一个阈值来切断无用的值。

输出`print_r($similar)`：

```
Array
(
    [0] => Array
        (
            [compared] => testorchid
            [title] => orchid
            [score] => 75.00
        )

    [1] => Array
        (
            [compared] => testorchid
            [title] => rose
            [score] => 14.29
        )

) 
```

请注意，daisy 尚未返回，因为它的相似性低于阈值。作为参考，它的相似性是 13.3333333r

# php - PHP MySQL查询将动态字段值与其他字段动态匹配值条件匹配

> ID：13762922
> 
> 赞同：0
> 
> 时间：2012-12-07T12:15:56.013
> 
> 标签：php, mysql

下面是我在 MySQL 中的数据库表结构 - 我想将特定的动态字段值相互匹配，如下所述：

```
meta_id post_id     meta_key            meta_value
616     472         "machine_type"      "Combined pipe cutting"
561     472         _edit_lock          1354882015:1
560     472         _edit_last          1
562     472         _mf_write_panel_id  1
565     472         _wp_page_template   machine_layout.php
617     472         jet_filter          
618     472         "length_x_axis"     "3000mm"
619     472         machine_image       488 
```

上面我`""`引用了标记字段 - 我必须针对这些字段应用查询并获取结果。

现在在这里，我想检查`meta_key`字段和`meta_value`字段，并想检索匹配`post_id`字段的值。

例如：我的第一个参数 on `meta_key`will`length_x_axis`和它的匹配值`meta_value`will`3000mm`和`AND`条件将是`meta_key`for`machine_type`和它的匹配值`meta_value`will `Combined pipe cutting`。

我需要的结果是`post_id`价值`472`

这是一个完整的动态 wordpress`wp_postmeta`表，其中包含许多具有此类条件的记录。

最早的 MySQL 查询结果将不胜感激。

如果有任何拼写错误，请原谅我，我已尽力向社区解释我的问题。

请帮忙 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:28:53.027

我不确定你真正想要什么，但我认为这是你正在寻找的查询：

```
SELECT t1.post_id 
FROM mytable t1 inner join mytable t2 on t1.post_id = t2.post_id 
WHERE t1.meta_key = "length_x_axis" and t1.meta_value="3000mm" 
AND t2.meta_key="machine_type" and t2.meta_value="Combined pipe cutting" 
```

# php - SESSION 和 jquery 菜单

> ID：13762925
> 
> 赞同：1
> 
> 时间：2012-12-07T12:15:59.850
> 
> 标签：php, jquery, html, jquery-ui

我对 jQuery 菜单和用户会话有疑问。我在 jQuery 中有一个菜单，该菜单的一个选择是“登录”，当您将鼠标悬停在此菜单下时，打开一个带有“登录”和“注册新帐户”的子菜单。现在我想更改“注销”中的“登录”声音。我试过这段代码：

```
<li>
    <a href="#">
        <img src="images/1.gif" alt=""/>
        <span class="sdt_active"></span>
        <span class="sdt_wrap">
            <span class="sdt_link">Login</span>
            <span class="sdt_descr">Enter or register an account</span>
        </span>
    </a>
    <div class="sdt_box">
        <?php  
            session_start(); 
            if(!isset($_SESSION['username'])){
                print("<A HREF=\"login.php?logout=1\">login</A>");
            } else { 
                print("<A HREF=\"login.php?logout=1\">logout</A>");
            } 
        ?>
        <a href="#">Register an new account</a>         
    </div>
</li> 
```

这段代码对我不起作用，因为菜单不再是动画的，而是静态的，它不起作用。

然后，如果有会话，它必须显示“注销”，否则显示“登录”。你能帮助我吗？

编辑：这是 Login2.php （如果用户名和密码正确，会话开始与否），在 login1 tjere 中只有 html 表单。

```
 <?php $con = mysql_connect("localhost","root","ascent");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}
mysql_select_db("utenti", $con);
$sql="SELECT username, password FROM utenti where username='$_POST[username]' and password='$_POST[password]'
union
select username, password from aziende where username='$_POST[username]' and password='$_POST[password]'";
$risultato=mysql_query($sql);
$prova=mysql_num_rows($risultato);
if($prova==1){
$_SESSION['username'] = 1;
header("location: lavori.php");
echo "Login effettuato con successo";
}
else {
echo "Dati incorretti";
}
mysql_close($con);
?> 
```

页面的前 2 行是

```
<?php ob_start(); ?>
<?php session_start(); ?> 
```

编辑：编辑：我终于解决了这个问题！

```
 <?php if(!isset($_SESSION['username']))
                {
                        echo'<a href="login.html">Esegui l accesso</a>';
                }
                else
                {
                    echo'<a href="logout.php">Esegui il logout</a>';
                }
                ?> 
```

问题出在 ECHO 中，我使用 (" ")，但对于输出 html 代码，我们必须使用 ' '

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:26:18.860

尝试放在`session_start();`文件的开头。

```
<?php session_start(); ?>
<html>
  <head>
    ...
  </head>
  <body>
    <li>
      <a href="#">
        <img src="images/1.gif" alt=""/>
        <span class="sdt_active"></span>
        <span class="sdt_wrap">
          <span class="sdt_link">Login</span>
          <span class="sdt_descr">Enter
                  or register an account</span>
          </span>
       </a>
       <div class="sdt_box">
       <?php if(empty($_SESSION['username'])) : ?>
           <A HREF="login.php?logout=1">login</A>
       <?php else : ?>
           <A HREF="login.php?logout=1">logout</A>
       <?php endif; ?>
         <a href="#">Register an new account</a>         
        </div>
     </li>
  </body>
</html> 
```

# c# - 如何等到定时器停止？

> ID：13762926
> 
> 赞同：2
> 
> 时间：2012-12-07T12:16:00.100
> 
> 标签：c#, winforms, timer, wait

我正在尝试使用 C# 构建二十一点游戏。我有一个赌场类和 player 、 card 和 deck 类，它们是赌场的对象。赌场向具有以下功能的玩家发一张随机牌：

```
 public void giveRandomCardTo(Player P)
        {
            P.takeCard(this.deck.getRandomCard());
        } 
```

这很好用，但后来我想添加一个动画，比如使用计时器将封闭的卡片图像移动到玩家的卡片图片框。所以我将这部分添加到函数中：

```
public void giveRandomCardTo(Player P)
        {
            while (_timerRunning) {/*wait*/ }
            this.currentDealingID = P.id;
            if (this.currentDealingID >= 0 && this.currentDealingID < this.NumberOfPlayers && this.currentDealingID!=10) 
            {//Checking the current player is not the dealer.
                this.MovingCard.Show(); //Moving card is a picture box with a closed card
                _timerRunning=true;
                T.Start();
            }
            P.takeCard(this.deck.getRandomCard());    
        } 
```

Timer T 的 Timer.Tick 事件处理程序是：

```
public void TimerTick(object sender, EventArgs e)
{
              movingcardvelocity = getVelocityFromTo(MovingCard.Location, this.Players[this.currentDealingID].CardPBS[0].Location);
              double divide=5;
              movingcardvelocity = new Point((int)(movingcardvelocity.X / divide), (int)(movingcardvelocity.Y / divide));
              this.MovingCard.Location = new Point(this.MovingCard.Location.X + movingcardvelocity.X, this.MovingCard.Location.Y + movingcardvelocity.Y);
//Stop if arrived:
              double epsilon = 20;
              if (Distance(this.MovingCard.Location, this.Players[this.currentDealingID].CardPBS[0].Location) < epsilon) 
    {
    _timerRunning=false;  
    this.MovingCard.Hide();
    T.Stop();
    }
} 
```

定时器也很好用。但是当我一个接一个地发牌时，我必须等到第一个动画完成。并且中的`while(_timerRunning){/*wait*/}`行将`void giveRandomCardTo`程序卡在无限循环中。

我怎样才能让它等到`bool _timerRunning = false`？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:20:20.923

它可能对您有所帮助 - [WaitHandle.WaitOne](http://msdn.microsoft.com/en-us/library/58195swd.aspx)方法

有一个可以重用/修改的例子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:22:30.757

你不需要等待。只需从事件处理程序调用您的方法`Tick`而不使用`_timerRunning`标志。停止计时器并将卡片交给玩家：

```
T.Stop(); 
this.MovingCard.Hide();
giveRandomCardTo(this.Players[this.currentDealingID]); 
```

我还创建了一种`IsCardArrivedTo(Point location)`简化条件逻辑的方法：

```
public void TimerTick(object sender, EventArgs e)
{
     var player = Players[currentDealingID];
     Point pbsLocation = player.CardPBS[0].Location;
     MoveCard();

     if (IsCardArrivedTo(pbsLocation)) 
     {        
        MovingCard.Hide();
        T.Stop();
        giveRandomCardTo(player);
     }
}

private bool IsCardArrivedTo(Point location)
{
    double epsilon = 20;
    return Distance(MovingCard.Location, location) < epsilon;
}

private void MoveCard()
{
   // calculate new location
   MovingCard.Location = newLocation;
} 
```

*顺便说一句*，在 C# 中，我们使用 CamelCasing 作为方法名称。

# java - 如何使用 java 脚本在 selenium webdriver 中处理 Ajax

> ID：13762927
> 
> 赞同：0
> 
> 时间：2012-12-07T12:16:04.150
> 
> 标签：java, selenium, webdriver, selenium-webdriver

我正在编写代码来测试 web 应用程序，但在我的应用程序中我们有 AJAX 请求，数据将来自后端组件。因此获取数据需要一些时间。

所以你能建议我什么是最好的使用方法。

提前感谢拉朱

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:30:52.470

```
WebElement myDynamicElement = (new WebDriverWait(driver, 10))
.until(new ExpectedCondition<WebElement>(){
@Override
public WebElement apply(WebDriver d) {
    return d.findElement(By.id("myDynamicElement"));
}}); 
```

这将等待页面中通过 ajax 加载的特定元素（myDynamicElement）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:05:35.097

在驱动程序上设置隐式超时

```
driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS); 
```

当没有立即找到一个元素时，它将在抛出异常之前等待它 10 秒。这应该给你的 ajax 调用足够的时间来回叫。

# javascript - 如何将 24 小时添加到 javascript 的日期时间对象

> ID：13762930
> 
> 赞同：19
> 
> 时间：2012-12-07T12:16:12.563
> 
> 标签：javascript, datetime

> **可能重复：**
> [向 Javascript 日期对象添加小时数？](https://stackoverflow.com/questions/1050720/adding-hours-to-javascript-date-object)

我有 javascript 日期时间对象。

我想在该日期时间上增加 24 小时

例如。

如果是`2 dec 2012 3:30:00`=>`3 dec 2012 3:29:00`

如果是`31 dec 2012 3:30:00`=>`1 jan 2013 3:29:00`

ETC

有什么建议吗？？？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-07T12:19:35.457

一种可能的解决方案：

```
new Date(new Date(myStringDate).getTime() + 60 * 60 * 24 * 1000); 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-12-07T12:18:41.503

这将是一种方式

```
var myDate = new Date("2 dec 2012 3:30:00") // your date object
myDate.setHours(myDate.getHours() + 24)
console.log(myDate) //Mon Dec 03 2012 03:30:00 GMT+0100 (Mitteleuropäische Zeit) 
```

*   `Date.setHours`允许您设置日期对象的时间
*   `Date.getHours`检索它们

在此解决方案中，它只是从您的 Date 对象中获取 Hours 添加 24 并将它们写回您的对象。

当然还有其他可能的方法可以达到相同的结果，例如

*   调整毫秒

    *   `Date.getTime`为您提供自 1970 年 1 月 1 日午夜以来对象的毫秒数
    *   `Date.setTime`设置它们

因此，向您的日期对象添加`24 * 60 * 60 * 1000`或`86400000`毫秒将导致相同的结果请参阅[VisioN](https://stackoverflow.com/a/13762981/1487756)的答案

*   添加一天
    *   `Date.getDate``Date`获取对象的月份日期
    *   `Date.setDate`设置它们

将其增加一，将再次导致与
Ian[在](https://stackoverflow.com/users/1317927/ian)评论中提到的相同

所以它只是取决于你觉得最容易理解的东西如果你愿意，看看这个 w3schools[例子](http://www.w3schools.com/js/js_obj_date.asp)，以获得处理日期的起点

# html - 如何隐藏导航菜单列表？

> ID：13762931
> 
> 赞同：0
> 
> 时间：2012-12-07T12:16:12.923
> 
> 标签：html, css, drop-down-menu, navigation

我正在做网站，我有如下图所示的下拉列表![在此处输入图像描述](../Images/8b237c37f00d06c0eb8024c34320fd3b.png)

它工作正常，但是当我的浏览器尺寸减小时，该菜单会像下图一样下降![在此处输入图像描述](../Images/9e4e3b1e54843fb60561b4d9e1783ab7.png)

这是我的CSS代码：

```
 nav ul ul {
display: none;
        }
  nav ul li:hover > ul {
    display: block;
}
nav ul {
background: #efefef; 
background: linear-gradient(top, #efefef 0%, #bbbbbb 100%);  
background: -moz-linear-gradient(top, #efefef 0%, #bbbbbb 100%); 
background: -webkit-linear-gradient(top, #efefef 0%,#bbbbbb 100%); 
box-shadow: 0px 0px 9px rgba(0,0,0,0.15);
padding: 0 20px;
border-radius: 10px;  
list-style: none;
position: fixed;
display: inline-table;
overflow:hidden;
   }
  nav ul:after {
    content: ""; clear: both; display: block;

}
nav ul li {
float: left;

    }
nav ul li:hover {
    background: #4b545f;
    background: linear-gradient(top, #4f5964 0%, #5f6975 40%);
    background: -moz-linear-gradient(top, #4f5964 0%, #5f6975 40%);
    background: -webkit-linear-gradient(top, #4f5964 0%,#5f6975 40%);
}
    nav ul li:hover a {
    color: #fff;
    }

 nav ul li a {
display: block; padding: 25px 40px;
color: #757575; text-decoration: none;
}
nav ul ul {
background: #5f6975; border-radius: 0px; padding: 0;
position: absolute; top: 100%;
   } 
```

这是我的html代码：

```
![enter image description here][3] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:22:45.713

当屏幕分辨率变小时，您可以使用 CSS 媒体查询来隐藏菜单。将此添加到您的 CSS 代码中：

```
@media (max-width: 640px) {

nav {
    display:none;
}

} 
```

对于移动用户，将此行`<head>`也添加到您的细分：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"> 
```

# c# - 如何防止在更新接口后必须更新所有实现类？

> ID：13762940
> 
> 赞同：4
> 
> 时间：2012-12-07T12:16:37.660
> 
> 标签：c#, interface

我们有一个 WPF 应用程序，它主要是一个图表应用程序。大约有 30 个图表。每个图表在数据库中都有自己的表，其中包含图表的配置信息。每个图表在应用程序中都有一个类，其中包含与图表相关的配置信息。

我们的应用程序 ( `IChartConfiguration`) 中有一个接口，每个图表配置类都实现了该接口。它允许应用程序以一致和相似的方式处理任何特定的图表配置。

我们遇到的“问题”是，每次我们需要向界面添加一个属性时，对于一个添加了我们尚未处理的新配置属性的新图表，我们必须回到每个图表配置类，即还没有实现这个新属性（通常是大多数）并添加它。以满足接口实现。这不是一个巨大的负担，但在我看来，必须有更好的方法来处理这个问题。

有没有更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T12:23:40.423

您的问题出在其他地方，您遇到的“有问题的”行为根本没有问题。**这是接口的预期用途。**通过实现你所说的接口，'这个类支持这个接口'。如果您*不*更新实现该接口的所有类，您将不再支持此合同。

您应该问自己的主要问题是您刚刚添加的配置属性是否对其他图表有意义。如果不是，则不应在一个通用接口中指定。

只有几个值得探索的替代方案：

*   拥有一个主界面并从中扩展其他界面。
*   具有通用实现的抽象类。
*   跨多个接口划分行为。

在不确切知道图表之间的差异的情况下，我不能推荐任何一种方法作为最好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:23:43.427

在我对接口的理解中，**这正是接口的用途**。所以不，我不认为你可以通过实现 IChartConfiguration 来防止这种情况。

但也许您可以将 IChartConfiguration 拆分为几个较小的接口，并仅实现与特定图表类匹配的接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T12:29:07.007

试试这个架构：

```
interface IChart
{
    string newProperty { get; set; }
}

abstract class BaseChart : IChart
{
    public virtual string newProperty
    {
        get
        {
            throw new NotImplementedException();
        }
        set
        {
            throw new NotImplementedException();
        }
    }
}

class Chart1 : BaseChart
{
    private string _newProperty;
    public override string newProperty
    {
        get
        {
            return _newProperty;
        }
        set
        {
            _newProperty = value;
        }
    }
}

class Chart2 : BaseChart
{

} 
```

然后，当向其中一个图表添加新属性时，您只需将其添加到您的接口和抽象类中。其他图表将保持不变。

# android - box2d (andengine gles2) PhysicsConnector 语法错误

> ID：13762943
> 
> 赞同：2
> 
> 时间：2012-12-07T12:16:55.567
> 
> 标签：android, box2d, andengine, physics

我已经在我的球上应用了重力，它是动态的圆形体。当它到达屏幕底部时，它会离开屏幕。我想为我的物理世界划出界限。

我分别创建了 4 条线和 4 条线体。但是当我尝试注册物理连接器时，它适用于我的箱体和精灵，但不适用于我的线体:(

## 代码：

```
Line line_top = new Line(0, 0, CAMERA_WIDTH, 0, this.getVertexBufferObjectManager());
    Line line_left = new Line(0, 0, 0, CAMERA_HEIGHT, this.getVertexBufferObjectManager());
    Line line_right = new Line(CAMERA_WIDTH, 0, CAMERA_WIDTH, CAMERA_HEIGHT, this.getVertexBufferObjectManager());
    Line line_bottom = new Line(0, CAMERA_HEIGHT, CAMERA_WIDTH, CAMERA_HEIGHT, this.getVertexBufferObjectManager());
    line_top.setColor(1, 1, 1); // RGB
    line_left.setColor(1, 1, 1);
    line_right.setColor(1, 1, 1);
    line_bottom.setColor(1, 1, 1);

    Body wall_top = PhysicsFactory.createLineBody(mPhysicsWorld, line_top, FIXTURE_DEF);
    Body wall_left = PhysicsFactory.createLineBody(mPhysicsWorld, line_left, FIXTURE_DEF);
    Body wall_right = PhysicsFactory.createLineBody(mPhysicsWorld, line_right, FIXTURE_DEF);
    Body wall_bottom = PhysicsFactory.createLineBody(mPhysicsWorld, line_bottom, FIXTURE_DEF); 
```

这对我来说很好

```
mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(playButtonSprite, BoxBody2, true, true)); 
```

但是当我把我的台词作为参数传递时

```
mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(line_top, BoxBody, true, true)); 
```

它显示了这个错误

```
The constructor PhysicsConnector(Line, Body, boolean, boolean) is undefined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T00:19:47.190

我的游戏中有类似的东西（屏幕边界作为物理对象）。显然，我也遇到了这个问题，`PhysicsConnector`不接受`Line`- 所以我`Rectangle`改用了。您可以创建一个宽度为 1 的矩形，例如，等效的矩形`line_top`将是：

```
Rectangle rect_top = new Rectangle(0, 0, CAMERA_WIDTH, 1); 
```

# php - 启用目标表上的触发器时，从 php 发送到 SQL Server 的更新查询失败

> ID：13762946
> 
> 赞同：0
> 
> 时间：2012-12-07T12:17:00.890
> 
> 标签：php, sql-server, sql-server-2008

在 php 脚本中有对 SQL Server 表的 T-SQL 更新查询。它工作正常，直到我在目标表上启用触发器。启用触发器后，我收到 DBDatabase 错误：无效 SQL，MSSQL 错误：1（一般错误（MSSQL 接口无法返回详细的错误消息）。）会话暂停。但是，如果我直接在 Management Studio 中运行查询 - 即使触发器打开，它也可以正常工作。如何解决？

更新：查询`UPDATE T_USER SET US_KEY='30087', US_TEXT=NULL, US_LIC=NULL, US_PRKEY=14696, US_TURAGENT=0, US_REG=1, US_3=0, US_4=0, US_KOL=0, US_2=0, US_ID='test', US_PASSWORD='111', us_manager='manager', US_EMAIL=NULL, US_HOST=NULL, US_ADDRESS=NULL, US_PHONE=NULL, US_COMPANYNAME='Individual', US_AGENT='Individual', US_FAX=NULL WHERE US_KEY = 30087`

扳机

```
ALTER TRIGGER [dbo].[tt_updEncryptedPassword] 
   ON  [dbo].[T_USER]
FOR UPDATE
AS 
BEGIN
    SET NOCOUNT ON;
IF UPDATE(US_PASSWORD)
begin 
declare @str    varchar(256),@uskey int,@encrypted  varchar(256)    
select @uskey=US_KEY,@str=US_PASSWORD from Inserted
DECLARE  @URL SysName,@Header XML,@Body XML
;WITH XMLNAMESPACES (DEFAULT 'http://tempuri.org/')
SELECT   @URL   = 'http://10.0.10.1/encryptionservice/EncryptionService.asmx'
    ,@Body      = '    <EncryptString xmlns="http://www.qwe.com/">
      <source>'+@str+'</source>
    </EncryptString>'
EXEC    dbo.spSOAPMethodCall @URL,@Header OUT,@Body OUT
;WITH XMLNAMESPACES(DEFAULT 'http://www.qwe.com')
select @encrypted=X.z.value('EncryptStringResult[1]', 'varchar(250)') from @Body.nodes('/EncryptStringResponse') AS X(z)

update [T_USER] set US_BANKNAME=@encrypted where US_KEY=@uskey
end

END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:41:40.693

通过`SET CONCAT_NULL_YIELDS_NULL ON; SET ANSI_WARNINGS ON; SET ANSI_PADDING ON;`在运行插入/更新之前添加解决。

# android - 选项卡中的背景图像溢出

> ID：13762949
> 
> 赞同：0
> 
> 时间：2012-12-07T12:17:20.450
> 
> 标签：android, android-layout, tabs, android-tabhost

我正在开发一个使用 2 TabActivity Control 的应用程序。当我设置它覆盖全屏的任何选项卡的背景图像时，它甚至覆盖选项卡控件。但是选项卡控件保留在图像的背面。这真是奇怪的行为。任何人请帮帮我。

这是我的主选项卡控件的代码：\

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@android:id/tabhost"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent">
 <LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dp">
    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp" />
</LinearLayout> 
```

这是正在添加背景的选项卡的代码：

**表 1：**

```
public class FirstTab extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    /* First Tab Content */
    TextView textView  =(TextView) findViewById(R.id.textview);
    textView.setText("First Tab");
} 
```

}

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:orientation="vertical" 
      android:background="@drawable/lux">

<TextView
    android:id="@+id/textview"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />

</LinearLayout> 
```

勒克斯图像全屏显示...我希望它显示在选项卡下。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:21:19.767

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:orientation="vertical" 
      android:background="@drawable/lux"> 
```

看到你有 layoutSet 高度和宽度填充父级，使其 wrap_content 并保持 lux 图像尺寸非常小以适合选项卡，或者使 dp 中的高度和宽度为 48dp/64dp/72dp/96dp

# bash - 如何将字符串的一部分提取到 bash shell 脚本中的变量中？

> ID：13762950
> 
> 赞同：0
> 
> 时间：2012-12-07T12:17:21.170
> 
> 标签：bash, shell, sed, awk, grep

我有一个包含许多行的 eclipse .classpath 文件，例如

```
<classpathentry kind="lib" path="/somepath/somelibrary.jar"/> 
```

我的目的是编写一个 bash 脚本来解析每一行以测试该库是否存在。对于奖励积分，因为我知道我的机器上可能存在库的备用位置，如果在类路径文件指定的位置中找不到，我也会搜索备用位置并尽可能修复类路径文件。

我怎样才能做到这一点？

似乎[如何通过 shell 脚本提取字符串的一部分？](https://stackoverflow.com/questions/1704234/how-can-i-extract-part-of-a-string-via-a-shell-script)是相关的，但不确定如何将其转换为类似的格式

```
#!/bin/sh
while read f
do
   if [ -f $f ]
   then
      echo "Found: $f"
   else
      echo "Missing: $f"
   fi
done < $1 
```

我认为这是我的目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:25:15.683

```
sed -n 's/.*path="\([^"]*\)".*/\1/p' file |
while IFS= read -r file
do
   if [ -f "$f" ]
   then
      echo "Found: $f"
   else
      echo "Missing: $f"
   fi
done 
```

它不适用于包含换行符或双引号的文件名。如果您有其中任何一个，请告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T17:32:24.403

用于`egrep`首先从类路径文件中获取 jar 路径，然后遍历每个路径。

```
for f in $(egrep -o '[/a-zA-Z0-9]+\.jar' .classpath); do
   if [ -f $f ]
   then
       echo "Found: $f"
   else
      echo "Missing: $f"
  fi
done 
```

# r - 两个连续值之间差异最小的样本

> ID：13762954
> 
> 赞同：2
> 
> 时间：2012-12-07T12:17:48.737
> 
> 标签：r, sampling

我想对值进行采样，但有一个约束要求两个值至少`window`分开。这类似于一年中的采样天数，但`window`至少相隔两周。到目前为止，我已经像这样尝试过

```
check.diff <- TRUE
window <- 14
while (check.diff == TRUE) {
    sampled.session <- sort(sample(1:365, size = 5, replace = FALSE))
    check.diff <- any(diff(sampled.session) < window)
} 
```

如果`window`约束很小，这很有效。如果指定一个相当大的值，这可能会变成一个无限循环。虽然我可以插入各种检查和最大迭代次数，但我想知道是否有更聪明的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:33:32.040

一种方法是从您抽取样本的总体中删除候选人：

```
set.seed(42)

population <- 1:356
n_samples <- 5
window <- 14

sampled_session <- rep(sample(population, 1), n_samples) # initialize the vector

for (i in seq.int(2, n_samples)) {
    borders <- sampled_session[i - 1] + (window - 1) * c(-1, 1)
    days_in_window <- seq.int(borders[1], borders[2])
    population <- setdiff(population, days_in_window)
    sampled_session[i] <- sample(population, 1) 
}

sort(sampled_session)
# [1]  90 193 264 309 326

diff(sort(sampled_session))
# [1] 103  71  45  17 
```

另一种方法是

```
set.seed(357)
population <- 1:357
n_samples <- 5
window <- 14

sampled.session <- numeric(n_samples) 
for (i in seq_len(n_samples)) {
    sampled.session[i] <- pick <- sample(population, 1)
    population <- population[-which(population < pick + window & population > pick - window)]
}
sort(sampled.session)
[1]  19  39 111 134 267 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T12:32:38.043

好吧，这样的事情怎么样。

```
window <- 14
sample_pair <- sample(1:365, size=2)
sample_pair[2] <- sample_pair[2] + window*(diff(foo)<window) 
```

然后将该对转储到任何更大的样本组中。

或者，您可以在绘制后缩放整个样本集。伪代码：

```
samp.window <- diff(range(sample.set))
if (sample.window < window) sample.set <- sample.set *window/sample.window 
```

如果需要，后跟一个`round`或。`truncate`可能值得检查以确保这些分布是均匀的:-(

# java - Maven填充属性文件切换配置文件而不在类路径中添加文件

> ID：13762955
> 
> 赞同：1
> 
> 时间：2012-12-07T12:17:54.930
> 
> 标签：java, maven, properties, classpath, environment

我想用取决于环境配置文件（dev，prod ...）的值填充属性文件 common.properties，但我不希望将文件添加到类路径中。

我阅读了几个主题，例如 [使用配置文件从属性文件中读取 Maven 变量](https://stackoverflow.com/questions/11600372/read-maven-variable-from-properties-file-using-profile)

所以我设法用配置文件填充属性：

```
<profiles>
    <profile>
    <id>dev</id>
    <activation>
        <activeByDefault>true</activeByDefault>
    </activation>
    <build>
        <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
                <artifactId>properties-maven-plugin</artifactId>
                <version>${properties-maven-plugin.version}</version>
                <executions>
                    <execution>
                        <id>read-project-properties</id>
                        <phase>initialize</phase>
                        <goals>
                            <goal>read-project-properties</goal>
                        </goals>    
                        <configuration>
                            <files>
                                <file>config/common_dev.properties</file>
                            </files>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
    </profile>
</profiles>

<build>
    <resources>
        <resource>
            <directory>config</directory>
            <filtering>true</filtering>
        </resource>
        ...
    </resources>
    ...
</build> 
```

在模块中，我有一个文件夹配置，其中包含文件 common.properties 和 common_dev.properties：

```
common_dev.properties:
    common.reception.directory.norm = PHASE1V1
common.properties:
    common.reception.directory.norm = ${common.reception.directory.norm} 
```

common.properties 很好地填充了 mvn clean install，但是 config 目录成为 Eclipse 中的源文件夹，已添加该目录的类路径条目。这是我的问题，common.properties 文件位于应用程序中，环境变量包含其路径，而不是从类路径中读取。它有效，但对项目开发人员来说很困惑。

我也尝试使用 properties-maven-plugin 的 write-project-properties 和 write-active-profile-properties 但第一个将我所有的项目属性写入文件，第二个什么都不写，因为 read-project-properties 读取属性作为项目属性而不是配置文件属性。

有没有办法做我想做的事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:44:05.957

您可以尝试使用 maven eclipse 插件来专门配置 eclipse 以排除特定的文件夹/文件。

# eclipse - Eclipse Indigo 3.7 中未安装 Spring Tool Suit(STS)

> ID：13762963
> 
> 赞同：2
> 
> 时间：2012-12-07T12:18:40.873
> 
> 标签：eclipse, spring, eclipse-indigo

我正在使用[http://dist.springsource.com/release/TOOLS/update/e3.7](http://dist.springsource.com/release/TOOLS/update/e3.7)在 Eclipse Indigo 3.7 中安装 STS 。我只想安装 Core/Spring IDE。但我收到一个错误：

无法完成安装，因为找不到一项或多项所需项目。正在安装的软件：Spring IDE Core（必需）3.2.0.201212062225-CI-B190（org.springframework.ide.eclipse.feature.feature.group 3.2.0.201212062225-CI-B190）缺少要求：Spring IDE Live Beans Graph 3.2.0.201212062225 -CI-B190 (org.springframework.ide.eclipse.beans.ui.livegraph 3.2.0.201212062225-CI-B190) 需要'bundle org.eclipse.zest.core [1.0.0,2.0.0)' 但它不能发现无法满足依赖：来自：Spring IDE Core (required) 3.2.0.201212062225-CI-B190 (org.springframework.ide.eclipse.feature.feature.group 3.2.0.201212062225-CI-B190) 到：org.springframework.ide .eclipse.beans.ui.livegraph [3.2.0.201212062225-CI-B190]

我应该怎么做才能安装？

# c# - C# 中的泛型和对象转换

> ID：13762965
> 
> 赞同：1
> 
> 时间：2012-12-07T12:18:47.643
> 
> 标签：c#, generics, object, types, type-conversion

我有一个以相同方式处理对象的类。就像是：

```
class Handler<T>{
    private T _obj;
    public T obj{
        get{
            ...//do sth
            return _obj;
        }
        set{
            ...//do sth
            _obj = value;
        }
    }
    ... // some other properties, no T anymore
} 
```

有大量代码处理`Handler`对象，忽略类型。我的意思是，类型`T`不适合他们，还有设置其他字段。有容器用`Handler<>`等等。

最后我需要以正确的类型返回 Handler 。

我想使用`Handler<object>`，但我不知道如何将其转换为`Handler<SomeClass>`.

我该如何处理这样的情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T12:36:08.850

为什么不创建一个`Handler<T>`包含所有非泛型代码的基类？

```
class HandlerBase
{
   // some other properties
}

class Handler<T> : HandlerBase
{
    public T obj { ... }
} 
```

`T`如果您的“大量代码”忽略`HandlerBase`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:45:57.260

您可以尝试使用 IHandler 接口。

```
IHandler<SomeClass> h1 = new Handler<SomeClass>();
IHandler<Object> h2 = h1; 
```

这会奏效！[MSDN](http://msdn.microsoft.com/en-us/library/ee207183.aspx)
上有关协方差的更多信息

# html - 如何将两行左侧的单元格更改为右侧？（HTML/表格...）

> ID：13762976
> 
> 赞同：1
> 
> 时间：2012-12-07T12:19:21.613
> 
> 标签：html, html-table

我喜欢下面的代码来创建一个表；但是，我希望在小数方程的右侧有“x =”部分。目前，“x =”位于分数方程的左侧。

如何更改代码，使“x =”在右侧？

```
<style>
td.upper_line { border-top:solid 1px black; }
table.fraction { text-align: center; vertical-align: middle;
margin-top:0.5em; margin-bottom:0.5em; line-height: 2em; } 
</style>

<table class="fraction" align="center" cellpadding="0" cellspacing="0">
    <tr>
        <td rowspan="2" nowrap="nowrap"> <i>x</i> = </td>
        <td nowrap="nowrap"> <i>x</i> <sup>2</sup> + <i>x</i> + 1</td>
    </tr>
    <tr>
        <td class="upper_line">2 cos(<i>x</i>)</td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:26:56.960

这就是你所追求的吗？我已将 x= 更改为 =x，以便等式看起来正确。

```
<table class="fraction" align="center" cellpadding="0" cellspacing="0">
<tr>
    <td nowrap="nowrap">
        <i>x</i><sup>2</sup> + <i>x</i> + 1
    </td>
    <td rowspan="2" nowrap="nowrap">
      =  <i>x</i>  
    </td>
</tr><tr>
    <td class="upper_line">
        2 cos(<i>x</i>)
    </td>
</tr> </table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:27:50.953

```
<html>
<head>
<style>
td.upper_line { border-top:solid 1px black; }
table.fraction { text-align: center; vertical-align: middle;
margin-top:0.5em; margin-bottom:0.5em; line-height: 2em; } 
</style>
</head>
<body>

<table class="fraction" align="center" cellpadding="0" cellspacing="0">
    <tr>

        <td nowrap="nowrap"> <i>x</i> <sup>2</sup> + <i>x</i> + 1</td>
                       <td  rowspan="2" nowrap="nowrap"> = <i>x</i>  </td>
    </tr>
    <tr>

        <td class="upper_line">2 cos(<i>x</i>)</td>
    </tr>

</table>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:28:01.873

你的意思是：

```
<td rowspan="2" nowrap="nowrap"> <i>x</i> = </td>
<td nowrap="nowrap"> <i>x</i> <sup>2</sup> + <i>x</i> + 1</td> 
```

至

```
<td nowrap="nowrap"> <i>x</i> <sup>2</sup> + <i>x</i> + 1</td>
<td rowspan="2" nowrap="nowrap"> <i>x</i> = </td> 
```

# java - Java/android：结合两个库，android文件布局？

> ID：13762978
> 
> 赞同：0
> 
> 时间：2012-12-07T12:19:24.243
> 
> 标签：java, android

我正在尝试制作的 android 应用程序中使用两个库。安卓新手。该应用程序用于连接到串行设备并通过终端控制其控制台。

一个库用于设置串行连接、设置波特率等，还可以通过串行写入读取/数据。另一个用于创建终端会话。我可以毫无问题地运行这些库来启动和运行简单的单独示例。例如，使用第一个库，我可以建立与路由器的串行连接，并通过如下所示的文本框发送/接收数据：

[https://lh5.ggpht.com/R4CAJXY9ZPDVsgt8jUZg5hc-v81aa70sctiegIGDjzv2lyvuG6OZyYas_4I-h_es-4Aq](https://lh5.ggpht.com/R4CAJXY9ZPDVsgt8jUZg5hc-v81aa70sctiegIGDjzv2lyvuG6OZyYas_4I-h_es-4Aq)

使用第二个库，我可以在平板电脑上设置本地终端并查看目录等。我的问题在于将这两者结合在一起以拥有一个连接到串行设备并具有数据布局/传递的终端.

在终端库中，我需要提供 InputStream 和 OutputStream 来为终端提供输入和输出。所以我必须调用 setTermIn(java.io.InputStream) 和 setTermOut(java.io.OutputStream) 将输入和输出流连接到模拟器。

然而，在串行库中，有两种发送和接收方法，它们处理字节数组。sendData(byte[] data) 用于发送数据和 dataListener 用于接收数据。我必须实现这一点并编写方法 onDataReceived(int id, byte[] data) ，其中 id 是设备的名称。

所以我的问题是，我如何连接这些？我是否在 sendData 和 OnDataReceived 之上创建 java.io.InputStream/OutputStream 实现，只需将数组转换为流并调用 setTermIn/Out 方法？

对于 OnDataReceived，我想我所做的只是接收 byte[] 数据并将其转换为方法内的流并将其发送到 terminalActivity？但是 sendData 呢，我没有实现这个，我只是发送一个字节数组，如何将它作为流发送而不是 setTermIn？

我也很困惑让这些事情发生在不同的活动中以及它是如何工作的。因为我在一个活动中发生了串行的事情，所以我点击连接，它读取相关的波特率等并连接到串行设备，然后在一个新的终端活动中打开一个终端，该终端活动当前没有连接，看起来像一个空白终端。我不确定应该如何布置所有内容。就像我在终端中按下回车键一样，通过串行发送数据的实现是否应该不在同一个活动中，而不是我最初连接到串行设备的那个活动？但是要知道我是否首先连接到串行设备，我需要发送/接收数据......是否应该在这两个活动中实现这些方法？！

我应该将这两者结合在一项活动中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:11:00.433

最简单的方法是组合成一个活动。

# javascript - IE中不同的动态链接创建

> ID：13762979
> 
> 赞同：0
> 
> 时间：2012-12-07T12:19:25.693
> 
> 标签：javascript, jquery, regex, internet-explorer, split

我的字符串：

```
"<SPAN style=\"COLOR: #000000; PADDING-RIGHT: 30px\">Reason 1:</SPAN> My Text Here!" 
```

IE浏览器：

```
"SPANstyleCOLOR000000PADDINGRIGHT30pxReason1SPANMyTextHere" 
```

其它浏览器：

```
"Reason1BankbeatingexchangeratesCompareourratestoday"

// Remove all characters, keep alphanumerical + spaces 
reasonTitleSpaces = reasonTitle.replace(/[^A-Za-z0-9\s]+/g, '');

// Remove all characters, keep alphanumerical
reasonTitle = reasonTitle.replace(/[^A-Za-z0-9]+/g, ''); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:57:56.647

您可以使用 jQuery API 创建链接，而不是将其作为字符串操作...

这将为您提供更好的结果和跨浏览器兼容性。

而不是`reasonTitle = $(this).html();`，克隆 DOM 结构，以便您可以在不更改页面的情况下自由操作：

```
<script>
reasonTitle = $(this).clone();

//Remove the span tag, now you have only the reason
reasonTitle.find('span').remove()

//Get the text value
reasonTitle = $.trim(reasonTitle.text());

//Create the anchor
anchorLink = $("<a />",{id:'anchor', name:reasonTitle})
$(this).parent().before(anchorLink);

//You don't need to count your `<li>`, use `<ol>` for ordinal lists
//Create the link:
$("<a />",{href:'#'+reasonTitle}).click(function(){
    _gaq.push(['_trackEvent', experimentConversionReference, 'ReasonClicked', $(this).text()]);
}).text(reasonTitle );
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:12:57.733

我知道它很脏，但它确实有效

```
// Remove extras for IE
reasonTitle = reasonTitle.split("Reason").slice(1).join("Reason");
reasonTitleSpaces = reasonTitleSpaces.split("Reason").slice(1).join("Reason");

// Remove any extra occurances of "span" for IE
reasonTitle = reasonTitle.replace("SPAN","");
reasonTitleSpaces = reasonTitleSpaces.replace("SPAN",""); 
```

# extjs - 通过服务调用获取数据时，extjs store collect 不起作用

> ID：13762980
> 
> 赞同：0
> 
> 时间：2012-12-07T12:19:32.393
> 
> 标签：extjs

我正在使用 ext4。我必须使用存储中的数据填充四个具有不同值的组合框。但是在 store 上使用 collect 方法时，它会给出空数组。当我在商店中有静态数据时它可以工作，但是当我在商店中使用代理获取数据时它不起作用。

```
 /* inside view */
    initComponent: function() {
            console.log('inside menu Panel ');
            var me = this;
            var filterCriteriaStore = Ext.create('ITChart.store.StoreForMenu');
            Ext.applyIf(me, {
                defaults:{
                    margin:'20 40 20 20'
                },
                items: [
                        {
                            xtype: 'combo',
                            id: 'territory',
                            store: filterCriteriaStore.collect('territory'),
                            displayField: 'territory',
                            valueField:'territory',
                            maxWidth:'100',
                            margin: '20 40 20 0',
                            value: 'ABC'
                        },
                        {
                            xtype: 'combo',
                            id: 'content',
                            store: filterCriteriaStore.collect('content'),
                            displayField: 'content',
                            valueField:'content',
                            maxWidth:'100',
                            value: 'XYZ'
                        }
                        ]

            });
            me.callParent(arguments);
        }

    /* not working */
    /* inside store */
    proxy: {
            type: 'ajax',
            url : 'http://localhost:8080/ServiceName/getFilterCriteriaExt',
            reader: {
                type: 'json',
                root: 'responseDTO'
            }/*,
            headers: {
                'Content-Type': 'application/json; charset=utf-8; Cache-Control: no-cache'
            }*/
            //actionMethods: 'POST'
        },

    /* working */
    /* inside store */
    data : [
{"content":"XYZ","type":"Song","territory":"ABC","payment":"Paid","errorCode":""},{"content":"Music","type":"Album","territory":"ABC","payment":"Paid","errorCode":""},{"content":"XYZ","type":"Song","territory":"IND","payment":"Paid","errorCode":""},
{"content":"Music","type":"Album","territory":"ABC","payment":"Paid","errorCode":""},
{"content":"Movie","type":"Song","territory":"CHINA","payment":"NotPaid","errorCode":""},
{"content":"Music","type":"Song","territory":"IND","payment":"NotPaid","errorCode":""}
    ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:48:43.037

您确定商店此时已加载吗？否则，您必须先加载您的商店，因为当您定义静态数据时，它不必实际加载。

```
var filterCriteriaStore = Ext.create('ITChart.store.StoreForMenu');
filterCriteriaStore.load(); 
```

# nullpointerexception - 卡住线程异常

> ID：13762983
> 
> 赞同：1
> 
> 时间：2012-12-07T12:19:37.633
> 
> 标签：nullpointerexception

我在 oracle weblogic 服务器上部署了一个 JSF 应用程序。服务器在加载时崩溃，我开始使用 J-meter 进行性能测试，它给了我关于哪个页面加载失败的信息。我开始使用单个用户进行调试，并从管理日志中获得了以下提要：

管理服务器日志

```
####<Dec 7, 2012 2:53:34 PM GMT+05:30> <Error> <HTTP> <CDCUBPEDB> <AdminServer> <[STUCK] 

ExecuteThread: '18' for queue: 'weblogic.kernel.Default (self-tuning)'> <<WLS Kernel>> 

<> <> <1354872214767> <BEA-101107> <[ServletContext@6958453[app:dummyapp module:/app 

path:/app spec-version:1.0]] Problem occurred while serving the error page.
java.lang.IllegalStateException: parent is null?
    at javax.faces.webapp.UIComponentTag.findComponent(UIComponentTag.java:545)
    at javax.faces.webapp.UIComponentTag.doStartTag(UIComponentTag.java:315)
    at org.apache.myfaces.taglib.core.ViewTag.doStartTag(ViewTag.java:73)
    at jsp_servlet._pages.__errordisplay._jspService(__errordisplay.java:94)
    at weblogic.servlet.jsp.JspBase.service(JspBase.java:34)
    at 

weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper

.java:227)
    at 

weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:183)
    at 

weblogic.servlet.internal.RequestDispatcherImpl.invokeServlet(RequestDispatcherImpl.java

:523)
    at 

weblogic.servlet.internal.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:253)
    at 

org.apache.myfaces.context.servlet.ServletExternalContextImpl.dispatch(ServletExternalCo

ntextImpl.java:419)
    at 

org.apache.myfaces.tomahawk.application.jsp.JspTilesViewHandlerImpl.dispatch(JspTilesVie

wHandlerImpl.java:236)
    at 

org.apache.myfaces.tomahawk.application.jsp.JspTilesViewHandlerImpl.renderView(JspTilesV

iewHandlerImpl.java:222)
    at 

org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:

41)
    at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:132)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:140)
    at 

weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper

.java:227)
    at 

weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:183)
    at 

weblogic.servlet.internal.RequestDispatcherImpl.invokeServlet(RequestDispatcherImpl.java

:523)
    at 

weblogic.servlet.internal.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:253)
    at 

weblogic.servlet.internal.ServletResponseImpl.sendError(ServletResponseImpl.java:720)
    at 

weblogic.servlet.internal.ServletResponseImpl.sendError(ServletResponseImpl.java:591)
    at weblogic.servlet.internal.ErrorManager.handleException(ErrorManager.java:150)
    at 

weblogic.servlet.internal.WebAppServletContext.handleThrowableFromInvocation(WebAppServl

etContext.java:2348)
    at 

weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2190)
    at 

weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:207)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:176)
> 
```

当负载增加时，它会在控制台开始时显示“您的会话已过期”。一两个用户有时会很好，但有时仍然会在浏览器和控制台上显示：连接超时”，它说：

```
Problem occurred while serving the error page.
javax.servlet.ServletException: Connection reset by peer: socket write error
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:154)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:183)
    at weblogic.servlet.internal.RequestDispatcherImpl.invokeServlet(RequestDispatcherImpl.java:523)
    at weblogic.servlet.internal.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:253)
    at weblogic.servlet.internal.ForwardAction.run(ForwardAction.java:22)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.internal.ErrorManager.handleException(ErrorManager.java:144)
    at weblogic.servlet.internal.WebAppServletContext.handleThrowableFromInvocation(WebAppServletContext.java:2348)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2190)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:207)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:176)
Caused By: javax.faces.FacesException: Connection reset by peer: socket write error
    at org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:43)
    at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:132)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:140)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:183)
    at weblogic.servlet.internal.RequestDispatcherImpl.invokeServlet(RequestDispatcherImpl.java:523)
    at weblogic.servlet.internal.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:253)
    at weblogic.servlet.internal.ForwardAction.run(ForwardAction.java:22)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.internal.ErrorManager.handleException(ErrorManager.java:144)
    at weblogic.servlet.internal.WebAppServletContext.handleThrowableFromInvocation(WebAppServletContext.java:2348)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2190)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:207)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:176)
Caused By: java.net.SocketException: Connection reset by peer: socket write error
    at java.net.SocketOutputStream.socketWrite0(Native Method)
    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:92)
    at java.net.SocketOutputStream.write(SocketOutputStream.java:136)
    at weblogic.servlet.internal.ChunkOutput.writeChunkNoTransfer(ChunkOutput.java:591)
    at weblogic.servlet.internal.ChunkOutput.writeChunks(ChunkOutput.java:540)
    at weblogic.servlet.internal.ChunkOutput.flush(ChunkOutput.java:427)
    at weblogic.servlet.internal.ChunkOutputWrapper.flush(ChunkOutputWrapper.java:188)
    at weblogic.servlet.jsp.JspWriterImpl.flush(JspWriterImpl.java:99)
    at org.apache.myfaces.shared_impl.renderkit.html.HtmlResponseWriterImpl.endDocument(HtmlResponseWriterImpl.java:160)
    at org.apache.myfaces.taglib.core.ViewTag.doEndTag(ViewTag.java:103)
    at jsp_servlet._pages.__errordisplay._jspService(__errordisplay.java:149)
    at weblogic.servlet.jsp.JspBase.service(JspBase.java:34)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:183)
    at weblogic.servlet.internal.RequestDispatcherImpl.invokeServlet(RequestDispatcherImpl.java:523)
    at weblogic.servlet.internal.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:253)
    at org.apache.myfaces.context.servlet.ServletExternalContextImpl.dispatch(ServletExternalContextImpl.java:419)
    at org.apache.myfaces.tomahawk.application.jsp.JspTilesViewHandlerImpl.dispatch(JspTilesViewHandlerImpl.java:236)
    at org.apache.myfaces.tomahawk.application.jsp.JspTilesViewHandlerImpl.renderView(JspTilesViewHandlerImpl.java:222)
    at org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:41)
    at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:132)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:140)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:300)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:183)
    at weblogic.servlet.internal.RequestDispatcherImpl.invokeServlet(RequestDispatcherImpl.java:523)
    at weblogic.servlet.internal.RequestDispatcherImpl.forward(RequestDispatcherImpl.java:253)
    at weblogic.servlet.internal.ForwardAction.run(ForwardAction.java:22)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.internal.ErrorManager.handleException(ErrorManager.java:144)
    at weblogic.servlet.internal.WebAppServletContext.handleThrowableFromInvocation(WebAppServletContext.java:2348)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2190)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1454)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:207)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:176)
> 
```

# android-animation - TranslateAnimation 偶尔会重置视图

> ID：13762985
> 
> 赞同：-1
> 
> 时间：2012-12-07T12:19:45.773
> 
> 标签：android-animation

我正忙于开发我的第一个安卓应用程序，它本质上是一款泡沫破灭类型的游戏。到目前为止，一切正常，除非我想用分数更新文本框。使用 translateanimation 移动视图，只要不使用简单的 .setText()，所有工作都会按预期进行。当偶尔添加这个时，一些之前已经移动的视图突然回到原来的位置。此外，一些变量也被设置回它们的原始值。我尝试通过 asyntask 和 runonuithread 更新分数，但同样的问题发生了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:27:00.140

我整理了一下。我在单独的 xml 中有用于得分的文本框，在该 xml 中我有一个包含语句，指向另一个 xml 文件，该文件具有用作气泡/块的所有控件。通过在同一个 xml 中包含分数文本框，问题得到了解决。Android 必须有一些关于跨两个单独布局的动画/更新控件的规则。

# java - hasMoreTokens 函数强制关闭应用程序

> ID：13762987
> 
> 赞同：3
> 
> 时间：2012-12-07T12:19:54.853
> 
> 标签：java, android, android-layout

我想读取带有分隔符“！”的 csv 文件。但是，当我在我的 android 应用程序中运行以下代码时，整个应用程序就会挂起。请帮助我解决问题。

在记事本中打开时，输入文件如下所示：

```
/////////////////////////////////////////////////////////

Line Number"!Shift!"QC Operator"!"Line Operator"!"Printing Operator"!"Product 
Group"!"Product Series"!Product!" Type of Defect"!"PCBType"!CORRECTIVE ACTION (CA)
1!DAY!Deepak!Chetan!Arun!TIMER!MM30XX!55Q!NO Solder!POWER!REWORK
2!NIGHT!Kajal!Kajal!Ashish!TEMP!MM10XX!55Q!Less solder!LOGIC!Replacement
3!!Kavita!Mahesh G!B.C!COUNTER!TC!EM306A!Dry solder!DISPLAY!NA
4!!Madhuri!Mahesh.P!Pabitra!PLC!PID !EM368 !IC PIN SOLDER SHORT!CARD!
5!!Namita!Namita!Sachin!METER!XT!EM368-C!Tombs toning!!
!!Sneha!Naveen!Sayali!DPM!800!MF16 !One side open !!

/////////////////////////////////////////////////////// 
```

读取文件的代码：

```
 public void ReadConfigFile() throws IOException 
{      
    File myFile = new File(Environment.getExternalStorageDirectory() + File.separator + "QCVerification"+ File.separator+"List of Entries.csv");
    FileInputStream fIn = new FileInputStream(myFile);
    BufferedReader myReader = new BufferedReader(
            new InputStreamReader(fIn));
    String aDataRow = "";
    ArrayList<String> FileWholeData = new ArrayList<String>();
    FileWholeData.removeAll(null);
    while ((aDataRow = myReader.readLine()) != null) 
    {
        FileWholeData.add(aDataRow);
    }
    MyQcDataStructure = new QCDataStructure();
    for(Integer __index = 0;__index <FileWholeData.size();__index++)
    {   
        String TempString = "";
        TempString = FileWholeData.get(__index);
        StringTokenizer tokenizer = new StringTokenizer(TempString,"!");   
        int columnIndex = 0;   
        while (tokenizer.hasMoreTokens()) 
        {                  
            switch (columnIndex) 
            {     
            case 0:   
                MyQcDataStructure.QCLineNo.add(tokenizer.nextToken());
                break;
            case 1:
                    MyQcDataStructure.QCShift.add(tokenizer.nextToken());
                    break;
            case 2:
                    MyQcDataStructure.QCQCOPer.add(tokenizer.nextToken());
                    break;
            case 3:
                    MyQcDataStructure.QCLineOper.add(tokenizer.nextToken());
                    break;
            case 4:
                    MyQcDataStructure.QCPrintingOper.add(tokenizer.nextToken());
                    break;
            case 5:
                    MyQcDataStructure.QCProductGorup.add(tokenizer.nextToken());
                    break;
            case 6:
                    MyQcDataStructure.QCProductSeries.add(tokenizer.nextToken());
                    break;
            case 7:
                    MyQcDataStructure.QCProduct.add(tokenizer.nextToken());
                    break;
            case 8:
                    MyQcDataStructure.QCPDefect.add(tokenizer.nextToken());
                    break;
            case 9:
                    MyQcDataStructure.QCPCBType.add(tokenizer.nextToken());
                    break;
            case 10:
                    MyQcDataStructure.QCCA.add(tokenizer.nextToken());
                    break;
            }                      
            columnIndex++; 
        }
        break;
    }
    String aBuffer;
    aBuffer = "";
    for(int __secondIndex = 0;__secondIndex < MyQcDataStructure.QCLineNo.size();__secondIndex++)
    {
        aBuffer = aBuffer + MyQcDataStructure.QCLineNo.get(__secondIndex);
        aBuffer = aBuffer + "$";
        aBuffer = aBuffer + MyQcDataStructure.QCShift.get(__secondIndex);
        aBuffer = aBuffer + "$";
        aBuffer = aBuffer + MyQcDataStructure.QCQCOPer.get(__secondIndex);
        aBuffer = aBuffer + "$";
        aBuffer = aBuffer + MyQcDataStructure.QCLineOper.get(__secondIndex);
        aBuffer = aBuffer + "$";
        aBuffer = aBuffer + MyQcDataStructure.QCPrintingOper.get(__secondIndex);
        aBuffer = aBuffer + "$";
        aBuffer = aBuffer + MyQcDataStructure.QCProductGorup.get(__secondIndex);
        aBuffer = aBuffer + "$";
        aBuffer = aBuffer + MyQcDataStructure.QCProductSeries.get(__secondIndex);
        aBuffer = aBuffer + "$";
        aBuffer = aBuffer + MyQcDataStructure.QCProduct.get(__secondIndex);
        aBuffer = aBuffer + "$";
        aBuffer = aBuffer + MyQcDataStructure.QCPDefect.get(__secondIndex);
        aBuffer = aBuffer + "$";
        aBuffer = aBuffer + MyQcDataStructure.QCPCBType.get(__secondIndex);
        aBuffer = aBuffer + "$";
        aBuffer = aBuffer + MyQcDataStructure.QCCA.get(__secondIndex);
        aBuffer = aBuffer + "$";

    }
    txtData.setText(aBuffer);
    myReader.close();
    Toast.makeText(getBaseContext(),
            "Done reading santosh SD 'mysdfile.txt'",
            Toast.LENGTH_SHORT).show();
} 
```

但是当以下代码在我的应用程序中运行时，应用程序会挂起：

```
while (tokenizer.hasMoreTokens()) 
        {                  
            switch (columnIndex) 
            { 
```

任何解决此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:25:30.953

您的 switch 块中没有默认情况。所以当列达到 11 时，你就有了一个无限循环。

添加

```
default : 
    tokenizer.nextToken();
    break; 
```

到你的 switch 语句，或者做

```
while (tokenizer.hasMoreTokens() && columnIndex <= 10) 
```

# silverlight - 与 DataContractSerializer 相比，Protobuf.net 需要更多时间来处理

> ID：13762988
> 
> 赞同：3
> 
> 时间：2012-12-07T12:19:57.020
> 
> 标签：silverlight, serialization, protobuf-net

我有一个由 silverlight 应用程序使用的 WCF 服务。为了提高我的应用程序的性能，我考虑使用 protobuf.net。

为了支持 Silverlight 应用程序，操作合约已修改为返回 byte[]。

Protobuf.net 版本：v2.0.50727

使用 protobuf.net 序列化程序后，消息大小减少了 40%。但是，与 DataContractSerializer 相比，它似乎需要更多的处理时间。

我相信 byte[] 再次被 DataContractSerializer 序列化并导致延迟。我一直在 Windows 7 上测试该应用程序。并使用 fiddler 在服务器上测量时间。使用 protobuf-net 进行序列化时，与 DCS 相比，它似乎要多花几秒钟。任何建议或想法为什么需要更多时间以及如何使用 protobuf-net 提高性能？提前致谢。

# hadoop - Hbase中的日志结构化合并树

> ID：13762992
> 
> 赞同：6
> 
> 时间：2012-12-07T12:20:16.457
> 
> 标签：hadoop, hbase, hive, hdfs

我正在研究 Hbase。我对 Hbase 如何使用 LSM 按排序顺序存储数据有疑问。

据我了解，Hbase 在大规模数据处理中使用 LSM Tree 进行数据传输。当数据来自客户端时，它首先顺序存储在内存中，然后排序并存储为 B-Tree 作为存储文件。比它将 Store 文件与 Disk B-Tree(of key) 合并。这是正确的吗 ？我错过了什么吗？

*   如果是，则比在集群环境中。有多个 RegionServers 接受客户端请求。在那种情况下，（每个 regionServer 的）所有 Hlogs 如何与磁盘 B-Tree 合并（作为分布在所有 dataNode 磁盘上的现有密钥）？

*   是不是像 Hlog 只将数据与同一 regionServer 的 Hfile 合并？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-07T13:13:52.900

你可以看看这两篇描述你想要什么的文章

[http://blog.cloudera.com/blog/2012/06/hbase-io-hfile-input-output/](http://blog.cloudera.com/blog/2012/06/hbase-io-hfile-input-output/)

[http://blog.cloudera.com/blog/2012/06/hbase-write-path/](http://blog.cloudera.com/blog/2012/06/hbase-write-path/)

简单来说：

*   客户端向负责处理密钥的区域服务器发送数据
*   （.META. 包含每个区域的关键范围）
*   用户操作（例如put）被写入Write-Ahead-Log（WAL，HLog）
*   （该日志仅用于“安全”，如果区域服务器崩溃，则重播日志以恢复未写入磁盘的数据）
*   写入日志后，数据也写入 MemStore
*   ...一旦 memstore 达到阈值（conf 属性）
*   memstore 刷新到磁盘上，创建单个 hfile
*   ...当 hfile 的数量增长过多（conf 属性）时，压缩开始（合并）

在磁盘数据结构方面：http: [//blog.cloudera.com/blog/2012/06/hbase-io-hfile-input-output/](http://blog.cloudera.com/blog/2012/06/hbase-io-hfile-input-output/) 上面的文章涵盖了hfile格式......这是一种仅附加格式，并且可以看作是 b+树。（请记住，这个 b+tree 不能就地修改）

HLog仅用于“安全”，一旦将数据写入hfiles，日志就可以丢弃

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-02-22T11:10:38.813

根据 HBase 中的 LSM-tree 模型，数据由两部分组成 - 内存中的树，其中包含对数据的最新更新和磁盘存储树，它将数据的其余部分排列成一种不可变的顺序 B 树，位于硬盘。HBase 服务有时会决定它在内存中有足够的更改以将它们刷新到文件存储中。在这种情况下，它执行从虚拟空间到磁盘的数据滚动合并，执行类似于合并排序算法的合并步骤的操作。

在 HBase 基础架构中，此类数据模型基于多个组件，这些组件将集群中的所有数据组织为位于从属服务器上并由主主服务驱动的 LSM 树的集合。该系统由以下组件驱动：

**HMaster** - 主要的 HBase 服务，通过管理和平衡它们之间的数据来维护从属 Region Server 节点的正确状态。此外，它还驱动存储中元数据信息的更改，例如表或列的创建和更新。

**Zookeeper** - 表示 HBase 服务及其客户端使用的分布式缓存，用于存储协调一致的有关命名和配置的最新信息。

**区域服务器**- HBase 工作节点，以 LSM-tree 方式执行信息片段的管理和存储 HDFS - 由区域服务器在后台用于实际存储数据

从底层开始，HBase 功能的大部分位于区域服务器中，该服务器对表执行读写工作。从技术上讲，每个表都可以作为称为 HRegions 的单独部分的集合分布在不同的区域服务器上。单个区域服务器节点可以容纳一个表的多个 HRegions。每个 HRegion 保存一定范围的内存和磁盘空间之间共享的行，并按 key 属性排序。这些范围在不同区域之间不相交，因此我们可以在集群中传递它们的顺序行为。单个区域服务器 HRegion 包括以下部分：

**预写日志 (WAL) 文件**- 数据在进入内存之前在每次写入操作中被持久化的第一个位置。正如我之前提到的，LSM 树的第一部分保存在内存中，这意味着它可能会受到一些外部因素的影响，例如示例中的功率损耗。将此类操作的日志文件保存在单独的位置将允许轻松恢复这部分而不会丢失任何内容。

**Memstore** - 在内存中保留最新信息更新的排序集合。它是前面描述的 LMS-tree 结构第一部分的实际实现。定期对本地硬盘上称为 HFiles 的存储文件执行滚动合并

**HFile** - 表示从 Memstore 接收并保存在 HDFS 中的一小段日期。每个 HFile 包含排序的 KeyValues 集合和 B-Tree+ 索引，允许在不读取整个文件的情况下查找数据。HBase 定期对这些文件执行归并排序操作，使它们符合标准 HDFS 块的配置大小，避免小文件问题

[![在此处输入图像描述](../Images/c4ea6cf884bf4db73bce8755091f6e6c.png)](https://i.stack.imgur.com/DYRA6.png)

您可以通过推送数据并将其传递给整个 LSM-tree 过程来手动遍历这些元素。我在最近的文章中描述了如何做到这一点：

[https://oyermolenko.blog/2017/02/21/hbase-as-primary-nosql-hadoop-storage/](https://oyermolenko.blog/2017/02/21/hbase-as-primary-nosql-hadoop-storage/)