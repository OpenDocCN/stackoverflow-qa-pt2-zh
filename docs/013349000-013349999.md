# StackOverflow 问答 13349000-13349999

# c++ - “If-Modified-Since”标头

> ID：13349001
> 
> 赞同：0
> 
> 时间：2012-11-12T18:03:46.963
> 
> 标签：c++, http, networking, protocols

谁能解释一下为什么“If modified-Since”在我的 http 客户端中不起作用......？

我检查了我在 httpbin.org 中发送的内容：

```
{
"url": "http://www.httpbin.org/get",
"headers": {
"Content-Length": "",
"Connection": "keep-alive",
"Accept": "*/*",
"Host": "www.httpbin.org",
"If-Modified-Since": "Mon, 12 Nov 2012 18:00:00 GMT",
"Content-Type": ""
},
"args": {    },
"origin": "89.70.183.105"
} 
```

但我仍然得到每个文件。“If-modified-since”根本行不通。也许它没有在服务器中实现？如果是这样，任何人都可以指出我已经实现了这个标头的服务器吗？或者解释我做错了什么？

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T18:09:39.600

您的请求对我来说看起来是正确的，所以我猜测您请求的服务器未配置为 return `304 (Not Modified)`。

我注意到您的请求并未明确说明您要检索的文件类型，但服务器通常**不会**返回`Not Modified`有关动态内容（例如 PHP、ASPX 等）的消息，因为服务器不会知道内容是否已更改，因为它无法预测脚本的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T22:35:46.040

谢谢您的帮助！

你无法相信我在哪里出错了......在我的代码中，我写了“If-Modified_Since”而不是“If-Modified-Since”......

这很奇怪，因为 httpbin.org/get 告诉我我发送“If-Modified-Since”...（！！！）

但是，例如，当我的请求是：“zbcdefghijk”-httpbin.org/get 显示我发送的正是该标头（当然不存在）。

我花了 7 个小时寻找我的错误。;( 很难找到，因为我太信任 httpbin.org 了。:((((((

# jquery - 将 jQuery 表单结果提交回动态选项卡

> ID：13349005
> 
> 赞同：0
> 
> 时间：2012-11-12T18:03:54.390
> 
> 标签：jquery, jquery-ui

我一直在努力将表单提交到动态选项卡中。它似乎所做的只是打破我的标签并最终显示更新页面。

长期领先。我在索引页面上创建了 2 个选项卡，我的搜索是内部的，第二个调用我的大型表单页面：

```
 <div id="tabs">
   <ul>
     <li><a href="create.cfm"><span>Create</span></a></li>
     <li><a href="#searchtab"><span>Search</span></a></li>
   </ul>
   <div id="searchtab">
     [search page stuff]
   </div>
 </div> 
```

两个页面都很好，创建选项卡允许我填写新表格并提交。当它提交时，它会验证然后在创建选项卡中显示“谢谢”。

这是提交代码的片段：

```
 $(document).ready(function(){                     
   $("#saCreate").validate({
        [validation stuff]
    },
    submitHandler: function(form) {
        if (confirm("Are you sure you want to submit?")) {
    form.submit();
        } 
```

这可以按需要工作。

搜索页面显示所有“打开”表单的列表，允许您选择一个，它将在新的动态选项卡中打开其详细信息。

例如：

```
 gridSelect = function(satrk) {
 var checkName = satrk;
 var tabExists = false;
   $('#tabs ul li a').each(function(i) {
   if($(this).text() == checkName) {
    tabExists = true;
}
});

// React to existance:
if(!tabExists){
$("#tabs").tabs("add","details.cfm?satrk="+satrk,satrk);
$("#tabs").tabs("select", satrk); // select tab by index
}else{
$("#tabs").tabs("select", satrk); // select tab by index
} 
```

基本上，如果选项卡打开，只需选择它，但如果没有，则创建一个新选项卡，使用传递给 gridSelect 的“id”作为名称。这个 id 实际上就是 db id。

这也很好用。我现在正在查看一个带有旧表单详细信息的新动态选项卡。它只不过是创建时使用的旧表格，但表格框是从数据库中填写的。

如果我需要做出改变，我会做出改变，然后点击“更新”按钮。它执行与以前相同的验证，如果良好则提交。

这就是一切都变成废话的地方。此表单不会提交并在我漂亮的动态选项卡中显示感谢。此表单提交并在覆盖旧表单界面的新 URL 中显示感谢。例如，blah,blah,blah/update.cfm

我对 jQuery 很陌生，我已经做了很多测试和搜索，尝试和修补以达到我现在的位置，但我担心我已经达到了我的基本能力。

我希望我的更新页面通过我的更新确认来简单地刷新我的动态选项卡。

帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T18:57:51.563

一个标准的 POST 请求确实会指示浏览器呈现一个新页面。您正在寻找的是 ajax 提交。您可以根据需要使用成功回调根据结果操作 DOM。

至于表单变量，您可以使用`$('form').serialize()`将所有表单字段转换为json对象进行提交。有关更多信息，请参阅[http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)。

# .htaccess - 如何删除 / 之前的索引？

> ID：13349011
> 
> 赞同：1
> 
> 时间：2012-11-12T18:04:15.730
> 
> 标签：.htaccess

我怎样才能删除`/`之前的`index.(php|html ...)`？

例子：

```
www.HTTP_HOST.com/x/index.php to www.HTTP_HOST.com/x

www.HTTP_HOST.com/../../../index.php to www.HTTP_HOST.com/../../.. 
```

我使用这种重写条件，但`/`仍然存在。

```
RewriteCond %{THE_REQUEST} ^GET\ .*/index\.(php|html|hml)\ HTTP
RewriteRule ^(.*)/index\.(php|html|hml)$ $1 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T18:20:29.703

这应该适用于删除“/index.php”部分：

```
 RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^/]+/)*index\.php\ HTTP/ RewriteRule        
    ^(([^/]+/)*)index\.php$ http://www.%{HTTP_HOST} [R=301,NS,L] 
```

重定向 301 意味着永久移动，因此大多数搜索引擎将从 URL 中删除 index.php。

请记住检查您的 mod_rewrite 是否在您的服务器上启用。通常在 Linux 服务器上启用 mod_rewrite 而不是 windows，

您可以通过查看 phpinfo() 来检查这一点。

迅速

# ms-access - microsoft access 自动从一张表复制到另一张表

> ID：13349012
> 
> 赞同：1
> 
> 时间：2012-11-12T18:04:16.820
> 
> 标签：ms-access

我是新手，主要使用 SQL Server。我正在尝试为我们的用户完成一项任务，但不知道如何处理它。

我们有一种情况，用户需要操作各种访问表中的一些数据，然后将最终结果放入 SQL Server 中定义并链接到访问的几个“链接表”之一。sql server 表将非常通用地定义为列名，如“col1”、“col2”等，以允许上传不同类型的数据。

我想做的是有某种宏或模块来执行此操作：1）让用户选择源（访问表）2）让用户选择目标（链接的 sql 服务器）表 3）让用户映射他想从源表复制到目标表的列。（如果这太难了，那么复制前 x 列的东西就可以了）。4) 从目标表中删除所有预先存在的数据 5) 将所有数据从源表复制到目标表。

有人能给我一个想法，什么是最好的方法，或者甚至是做类似事情的一些代码的例子吗？提前致谢。我们正在使用 Microsoft Access 2010。

# java - Spring mvc绑定错误国际化

> ID：13349015
> 
> 赞同：0
> 
> 时间：2012-11-12T18:04:27.740
> 
> 标签：java, spring, validation, spring-mvc, internationalization

我在解决绑定时的 typeMismatch Exceptions 时遇到了一些问题。类型不匹配错误无法从我的 messages.properties 中解决。

我的控制器处理程序：

```
@RequestMapping(method = RequestMethod.POST)
public @ResponseBody
    ValidationResponse addOrder(@ModelAttribute(value = PARAM_NAME) @Valid Orders orders, BindingResult bindingResult) {
    ...
} 
```

我从 bindingResult 收到此消息。

弹簧配置：

```
...
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="/WEB-INF/messages" />
    <property name="defaultEncoding" value="UTF-8"/>
</bean>

<bean name="validator"
      class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean">
    <property name="validationMessageSource">
        <ref bean="messageSource"/>
    </property>
</bean>
... 
```

`/WEB-INF/messages.properties`：

```
...
Orders.width.NotNull=Null error
Orders.height.NotNull=Null error
typeMismatch.java.util.Date=Format error
typeMismatch.java.lang.Integer=Format error
typeMismatch.java.lang.Long=Format error
java.lang.NumberFormatException=Format error
typeMismatch.java.lang.NumberFormatException=Format error
typeMismatch.java.lang.NumberFormat=Format error
typeMismatch.orderAdd.width=Format error
typeMismatch=Format error
... 
```

对于这样的检查：

```
...
@NotNull(message="{Orders.width.NotNull}")
private Long width;
... 
```

我收到了正确的信息。

**更新**

此示例打印错误消息：

```
List<FieldError> allErrors = bindingResult.getFieldErrors();
  for (FieldError objectError : allErrors) {
    System.out.println(objectError.getDefaultMessage());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T23:32:15.140

我在[这个](https://stackoverflow.com/questions/4202437/spring-how-to-resolve-a-validation-error-error-code-error-message)问题中找到了解决方案。要翻译消息，我必须注入`messageSource`并使用以下代码：

```
messageSource.getMessage(objectError, locale) 
```

这会从我的属性文件中获取消息。

# checkstyle - Checkstyle 不适用于 SuppressionCommentFilter

> ID：13349016
> 
> 赞同：5
> 
> 时间：2012-11-12T18:04:28.163
> 
> 标签：checkstyle

下面是我关于检查样式的代码 - 但它似乎并没有抑制抑制注释行之间的审计。我还尝试使用内联注释 // 而不是 /* */

请帮忙。我尝试了很多方法 - 排列/组合这些方法来解决这个问题。谢谢你。如果您需要更多信息，请告诉我。

```
/* CHECKSTYLE:OFF */
private abc createTimerChart(String title, String yAxisLabel, XYDataset dataset) {
    final abc chart = ChartFactory.createXYLineChart(title, // chart title
            "Time Elapsed (" + pollUnit.toString() + ")", // x axis label
            yAxisLabel, // y axis label
            dataset, // data
            PlotOrientation.VERTICAL, true, // include legend
            true, // tooltips
            false // urls
            );
/* CHECKSTYLE:ON */ 
```

CONFIG.XML 读取：

```
 <module name="FileContentsHolder">
        <module name="SuppressionCommentFilter">
            <property name="checkFormat" value="IndentationCheck"/>
        </module>
    </module> 
```

在检查器下移动 SuppressionCommentFilter 后：

```
<module name="Checker">

<!-- setting the default severity to warning -->
<property name="severity" value="warning" />

<module name="SuppressionCommentFilter">
    <property name="checkFormat" value="Indentation"/>
</module>

<!-- No TAB characters in the source code -->
<module name="FileTabCharacter" />

<!-- List of files to ignore . -->
<!-- TODO Add all auto-generated files to this file -->
<module name="SuppressionFilter">
    <property name="file" value="checkstyle/kepler-checkstyle-suppressions.xml"/>
</module>
<module name="TreeWalker">
..
..
.. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:52:36.143

缩进检查称为`Indentation`。`checkFormat`如果您将属性更改为 just ，它将起作用`Indentation`：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE module PUBLIC "-//Puppy Crawl//DTD Check Configuration 1.3//EN"
    "http://www.puppycrawl.com/dtds/configuration_1_3.dtd">
<module name="Checker">
    <property name="severity" value="warning" />
    <module name="TreeWalker">
        <module name="JavadocType" />
        <module name="Indentation" />
        <module name="FileContentsHolder"/>
    </module>
    <module name="SuppressionCommentFilter">
        <property name="checkFormat" value="Indentation" />
    </module>
</module> 
```

或者，更一般地说，我建议根本不设置该`checkFormat`属性，这将使抑制注释抑制该代码块的*所有*警告。

# asp.net-mvc - 如何处理奇怪的列格式

> ID：13349017
> 
> 赞同：0
> 
> 时间：2012-11-12T18:04:29.597
> 
> 标签：asp.net-mvc, webgrid

我的 webgrid 中有以下内容：

```
grid.Column(header: "Action", 
        format: delegate(dynamic i)
                {
                    return Ajax.ActionLink("Remove", "SomeAction", new {dataId = @i.id},
                                new AjaxOptions
                                    {
                                        InsertionMode = InsertionMode.Replace,
                                        UpdateTargetId = "ropeDiv"
                                    });
                }
        ) 
```

并且我希望将列的内容包裹在 DIV 中......但是我无法实现这一点。我可以在不需要委托的情况下做简单的简单格式……而且我已经看到了很多简单的格式。然而，我没有看到任何东西让我对此做出回答。

我试过这个：

```
grid.Column(header: "Action", 
        format: @<DIV> delegate(dynamic i)
                {
                    return Ajax.ActionLink("Remove", "SomeAction", new {dataId = @i.id},
                                new AjaxOptions
                                    {
                                        InsertionMode = InsertionMode.Replace,
                                        UpdateTargetId = "ropeDiv"
                                    });
                }
                </DIV>
        ) 
```

这没用...

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:50:10.853

根据[这篇文章](http://msdn.microsoft.com/en-us/magazine/hh288075.aspx)，你可以试试这个：

```
grid.Column(header: "Action",
  format: @<div>@Ajax.ActionLink("Remove", "SomeAction", new{dataId=item.Id},
    new AjaxOptions
    {
      InsertionMode = InsertionMode.Replace,
      UpdateTargetId = "ropeDiv"
    })</div>
) 
```

# objective-c - 堆叠 presentViewController 后 statusBarFrame = 0

> ID：13349018
> 
> 赞同：4
> 
> 时间：2012-11-12T18:04:31.020
> 
> 标签：objective-c, ios, uiviewcontroller, ios6

1.  我的主视图控制器调用`presentViewController`以显示配置屏幕。
2.  该配置屏幕上的按钮调用`presentViewController`以允许用户选择照片。
3.  一旦第二个视图控制器被解除，第一个视图控制器在 iOS 6 的状态栏下重新绘制（在 iOS 5 上工作正常）。

在第一个配置控制器的 viewWillAppear 方法（模态显示的那个）中，我尝试了几件事：

*   检查 statusBarFrame（它`20`在第一个视图中返回；`20`在以下视图中）
*   检查主屏幕的框架（它`{{0, 20}, {320, 460}}`在第一个视图中返回，`{0, 0}`在后续视图中）
*   手动将框架的 y 坐标设置为 20（即使自动调整大小掩码设置为无，iOS 也会将其更改回 0）

在这一点上，除了手动将所有子视图向下移动 20 像素之外，我什么都想不出来，这是超级 janky。关于可能导致这种情况的任何想法？

iOS 6 中发生了什么变化可能会导致这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T00:59:48.573

我不知道为什么，但是通过删除 iOS 6 旋转方法来解决这个问题，因为该应用程序仅是纵向的（shouldAutorotate 和supportedInterfaceOrientations），所以这些方法未使用。

# javascript - 根据时间设置背景

> ID：13349022
> 
> 赞同：0
> 
> 时间：2012-11-12T18:04:37.353
> 
> 标签：javascript, jquery

我有两张图片将作为页面的背景：

```
<img src="http://www.narm.org.uk/home/images/Daylight%20design.jpg" id="background" alt="day" />
<img src="http://www.aphoenix.ca/photoblog/photos/NighttimeColours.jpg" id="h_background" alt="night" /> 
```

CSS 将隐藏一个并显示另一个：

```
#background {
width: 100%;
height: 100%;
z-index: -1;
position: absolute;
}

#h_background {
width: 100%;
height: 100%;
display: none;
position: absolute;
z-index: -1;
} 
```

javascript 应该检查现在几点并设置正确的背景。如果秒数 > 30，则使用一个背景。如果没有，请设置另一个。

```
function setBackground() {

if (secs > 30) {
    $('#h_background').attr('id', 'background');
    $('#background').attr('id', 'h_background');
}

else if (secs < 30) {
    $('#background').attr('id', 'h_background');
    $('#h_background').attr('id', 'background');
}

setTimeout(function() {setBackground()}, 1000);

}​ 
```

我想做的是在时间切换时添加到新背景的过渡。

目前，背景会自动切换，但不流畅。关于什么是实现这一目标的有效方法有什么想法吗？下面是完整的 jsfiddle，它显示了我到目前为止所拥有的内容。 [http://jsfiddle.net/gkMVf/2/](http://jsfiddle.net/gkMVf/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T18:07:59.090

我会尝试css3 必须提供的[不透明度。](http://www.css3.info/preview/opacity/)我会创建一个更可控的淡入淡出效果，以实现更平滑的过渡。一张图像的不透明度会逐渐增加，而另一张图像的不透明度会逐渐降低。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:12:42.390

使用 jQuery，您可以使用 fadeIn 和 fadeOut 函数。

```
function setBackground() {

    if (secs > 30) {
        $('#h_background').fadeIn();
        $('#background').fadeOut();
    } else {
        $('#background').fadeIn();
        $('#h_background').fadeOut();
    }

    setTimeout( setBackground, 1000 );

} 
```

这不依赖 CSS3 或 HTML5 这么好的浏览器兼容性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T18:14:19.530

正如另一位用户提到的，您可以尝试使用 CSS3 过渡。

像这样的一些CSS：

```
.background {
    width: 100%;
    height: 100%;
    z-index: -1;
    position: absolute;
    -webkit-transition: opacity 1s;
    -moz-transition: opacity 1s;
    -ms-transition: opacity 1s;
    -o-transition: opacity 1s;
    transition: opacity 1s;
}

.background.hidden {
    opacity: 0;   
} 
```

然后一些像这样的javascript：

```
setInterval(function() {
    $('.background').toggleClass('hidden');
}, 30000)​ 
```

你可以让它工作得更简单一些。试试 jsFiddle：http: [//jsfiddle.net/gkMVf/3/](http://jsfiddle.net/gkMVf/3/)

# php - 解析命名空间的 xml

> ID：13349023
> 
> 赞同：0
> 
> 时间：2012-11-12T18:04:38.457
> 
> 标签：php, xml, simplexml

> **可能重复：**
> [使用 SimpleXML 使用命名空间解析 XML](https://stackoverflow.com/questions/595946/parse-xml-with-namespace-using-simplexml)

我很难解析 simpleXml 字符串以获取值。我试过了

```
$xml = new SimpleXmlElement($simpleXml);

$xml->registerXPathNamespace("ns0", "http://www.openapplications.org/oagis");
foreach($xml->xpath('//ns0:applicationarea/a:sender') as $n) {
  echo $n->creationdatetime . "success";
} 
```

获取 creationdatetime 字段，但这并没有为我返回任何内容。我熟悉解析简单的 xml，但命名空间 xml 给我带来了困难，特别是因为所有示例总是嵌入命名空间 xml，而不是整个东西都被命名空间。

我试过这段代码。

```
$simpleXml = simplexml_load_string($xml);
    print $simpleXml->children('ns0', true)->applicationarea->creationdatetime;

    print print_r($simpleXml, TRUE); 
```

但这并没有为创建日期时间打印出任何内容。当我打印出 $simpleXml 时，它会打印出这个

```
SimpleXMLElement Object ( [@attributes] => Array ( [revision] => 1.0 [environment] => Production [lang] => en-US ) 
```

下面是 $simpleXml 的值，打印出来

```
<ns0:syncparty xmlns:ns0="http://www.openapplications.org/oagis" revision="1.0" environment="Production" lang="en-US">
<ns0:applicationarea>
    <ns0:sender>
        <ns0:authorizationid>QPIM</ns0:authorizationid>
    </ns0:sender>
    <ns0:creationdatetime>2012-11-12T09:58:32.257-08:00</ns0:creationdatetime>
</ns0:applicationarea>
<ns0:dataarea>
    <ns0:sync>
        <ns0:synccriteria expressionlanguage="XPath">
            <ns0:syncexpression action="Sync">GetContact</ns0:syncexpression>
        </ns0:synccriteria>
    </ns0:sync>
    <ns0:party active="false" onetime="false">
        <ns0:contacts>
            <ns0:primarycontact>
                <ns0:person>
                    <ns0:personcode>409090</ns0:personcode>
                    <ns0:personname>
                        <ns0:givenname>Erik</ns0:givenname>
                        <ns0:familyname>Sparrow</ns0:familyname>
                        <ns0:userarea>
                    </ns0:userarea></ns0:personname>
                    <ns0:userarea>
                </ns0:userarea></ns0:person>
                <ns0:qctelex>
                <ns0:emailaddress>artest02@qcomtest.com</ns0:emailaddress>
                <ns0:addresses>
                    <ns0:primaryaddress>
                        <ns0:country>UNITED STATES</ns0:country>
                        <ns0:qccountrycode>
                            <ns0:qcccode>US</ns0:qcccode>
                        </ns0:qccountrycode>
                        <ns0:userarea>
                    </ns0:userarea></ns0:primaryaddress>
                </ns0:addresses>
                <ns0:userarea>
                    <ns0:property>
                        <ns0:namevalue name="reg_id">172914</ns0:namevalue>
                        <ns0:description>QPIM Registration Id</ns0:description>
                    </ns0:property>
                    <ns0:property>
                        <ns0:namevalue name="qcOldDN">N/A</ns0:namevalue>
                        <ns0:description>QPIM Rename Values</ns0:description>
                    </ns0:property>
                    <ns0:useraccount>
                        <ns0:systemid>artest02@qcomtest.com</ns0:systemid>
                        <ns0:authorization>
                            <ns0:id>422</ns0:id>
                            <ns0:type>bus_role</ns0:type>
                            <ns0:status>
                                <ns0:code>A</ns0:code>
                                <ns0:change>
                                    <ns0:changedate>2012-02-06T11:20:34-08:00</ns0:changedate>
                                    <ns0:userarea>
                                        <ns0:property>
                                            <ns0:namevalue name="UPDATED_BY">QPIM</ns0:namevalue>
                                        </ns0:property>
                                    </ns0:userarea>
                                </ns0:change>
                            </ns0:status>
                            <ns0:dateauthorized>2012-02-06T11:20:34-08:00</ns0:dateauthorized>
                            <ns0:authorizationcode>CRD_AR</ns0:authorizationcode>
                            <ns0:userarea>
                                <ns0:property>
                                    <ns0:namevalue name="CREATED_BY">QPIM</ns0:namevalue>
                                </ns0:property>
                                <ns0:property>
                                    <ns0:namevalue name="DESCRIPTION">Provisioning Role for CRD_AR</ns0:namevalue>
                                </ns0:property>
                                <ns0:property>
                                    <ns0:namevalue name="TAG">ar</ns0:namevalue>
                                </ns0:property>
                                <ns0:property>
                                    <ns0:namevalue name="OWNER_ID">484</ns0:namevalue>
                                </ns0:property>
                                <ns0:property>
                                    <ns0:namevalue name="OWNER_NAME">CRD_Admins</ns0:namevalue>
                                </ns0:property>
                            </ns0:userarea>
                        </ns0:authorization>
                        <ns0:authorization>
                            <ns0:id>402</ns0:id>
                            <ns0:type>bus_role</ns0:type>
                            <ns0:status>
                                <ns0:code>A</ns0:code>
                                <ns0:change>
                                    <ns0:changedate>2012-07-18T13:55:41-07:00</ns0:changedate>
                                    <ns0:userarea>
                                        <ns0:property>
                                            <ns0:namevalue name="UPDATED_BY">arsrvc</ns0:namevalue>
                                        </ns0:property>
                                    </ns0:userarea>
                                </ns0:change>
                            </ns0:status>
                            <ns0:dateauthorized>2012-07-18T13:55:41-07:00</ns0:dateauthorized>
                            <ns0:authorizationcode>CRD_Alpha</ns0:authorizationcode>
                            <ns0:userarea>
                                <ns0:property>
                                    <ns0:namevalue name="CREATED_BY">arsrvc</ns0:namevalue>
                                </ns0:property>
                                <ns0:property>
                                    <ns0:namevalue name="DESCRIPTION">Provisioning role for CRD_ALPHA</ns0:namevalue>
                                </ns0:property>
                                <ns0:property>
                                    <ns0:namevalue name="TAG">alpha</ns0:namevalue>
                                </ns0:property>
                                <ns0:property>
                                    <ns0:namevalue name="OWNER_ID">484</ns0:namevalue>
                                </ns0:property>
                                <ns0:property>
                                    <ns0:namevalue name="OWNER_NAME">CRD_Admins</ns0:namevalue>
                                </ns0:property>
                            </ns0:userarea>
                        </ns0:authorization>
                        <ns0:authorization>
                            <ns0:id>22</ns0:id>
                            <ns0:type>policy_role</ns0:type>
                            <ns0:status>
                                <ns0:code>A</ns0:code>
                                <ns0:description>Approved</ns0:description>
                                <ns0:change>
                                    <ns0:changedate>2012-02-06T11:20:43-08:00</ns0:changedate>
                                    <ns0:userarea>
                                        <ns0:property>
                                            <ns0:namevalue name="UPDATED_BY">QPIM_VALID_DPL</ns0:namevalue>
                                        </ns0:property>
                                    </ns0:userarea>
                                </ns0:change>
                            </ns0:status>
                            <ns0:dateauthorized>2012-02-06T11:20:34-08:00</ns0:dateauthorized>
                            <ns0:authorizationcode>QPIM_VALID_DPL</ns0:authorizationcode>
                            <ns0:userarea>
                                <ns0:property>
                                    <ns0:namevalue name="CREATED_BY">QPIM</ns0:namevalue>
                                </ns0:property>
                                <ns0:property>
                                    <ns0:namevalue name="DESCRIPTION">This role is used to flag if a person has been DPL approved</ns0:namevalue>
                                </ns0:property>
                                <ns0:property>
                                    <ns0:namevalue name="TAG">dpl,validation</ns0:namevalue>
                                </ns0:property>
                                <ns0:property>
                                    <ns0:namevalue name="OWNER_ID">82</ns0:namevalue>
                                </ns0:property>
                                <ns0:property>
                                    <ns0:namevalue name="OWNER_NAME">QPIM_POLICY_ADMINS</ns0:namevalue>
                                </ns0:property>
                            </ns0:userarea>
                        </ns0:authorization>
                        <ns0:authorization>
                            <ns0:id>21</ns0:id>
                            <ns0:type>policy_role</ns0:type>
                            <ns0:status>
                                <ns0:code>A</ns0:code>
                                <ns0:change>
                                    <ns0:changedate>2012-02-06T11:21:24-08:00</ns0:changedate>
                                    <ns0:userarea>
                                        <ns0:property>
                                            <ns0:namevalue name="UPDATED_BY">arsrvc</ns0:namevalue>
                                        </ns0:property>
                                    </ns0:userarea>
                                </ns0:change>
                            </ns0:status>
                            <ns0:dateauthorized>2012-02-06T11:20:34-08:00</ns0:dateauthorized>
                            <ns0:authorizationcode>QPIM_VALID_EMAIL</ns0:authorizationcode>
                            <ns0:userarea>
                                <ns0:property>
                                    <ns0:namevalue name="CREATED_BY">QPIM</ns0:namevalue>
                                </ns0:property>
                                <ns0:property>
                                    <ns0:namevalue name="DESCRIPTION">This role is used to flag if a person has been email validated</ns0:namevalue>
                                </ns0:property>
                                <ns0:property>
                                    <ns0:namevalue name="TAG">email,validation</ns0:namevalue>
                                </ns0:property>
                                <ns0:property>
                                    <ns0:namevalue name="OWNER_ID">82</ns0:namevalue>
                                </ns0:property>
                                <ns0:property>
                                    <ns0:namevalue name="OWNER_NAME">QPIM_POLICY_ADMINS</ns0:namevalue>
                                </ns0:property>
                            </ns0:userarea>
                        </ns0:authorization>
                        <ns0:authorization>
                            <ns0:id>122</ns0:id>
                            <ns0:type>bus_role</ns0:type>
                            <ns0:status>
                                <ns0:code>A</ns0:code>
                                <ns0:change>
                                    <ns0:changedate>2012-02-06T11:24:46-08:00</ns0:changedate>
                                    <ns0:userarea>
                                        <ns0:property>
                                            <ns0:namevalue name="UPDATED_BY">brewsrvc</ns0:namevalue>
                                        </ns0:property>
                                    </ns0:userarea>
                                </ns0:change>
                            </ns0:status>
                            <ns0:dateauthorized>2012-02-06T11:24:46-08:00</ns0:dateauthorized>
                            <ns0:authorizationcode>REG_DEV</ns0:authorizationcode>
                            <ns0:userarea>
                                <ns0:property>
                                    <ns0:namevalue name="CREATED_BY">brewsrvc</ns0:namevalue>
                                </ns0:property>
                                <ns0:property>
                                    <ns0:namevalue name="DESCRIPTION">Provisioning group for Registered Developers</ns0:namevalue>
                                </ns0:property>
                                <ns0:property>
                                    <ns0:namevalue name="TAG">regdev</ns0:namevalue>
                                </ns0:property>
                                <ns0:property>
                                    <ns0:namevalue name="OWNER_ID">182</ns0:namevalue>
                                </ns0:property>
                                <ns0:property>
                                    <ns0:namevalue name="OWNER_NAME">REG_DEV_ADMIN</ns0:namevalue>
                                </ns0:property>
                            </ns0:userarea>
                        </ns0:authorization>
                    </ns0:useraccount>
                </ns0:userarea>
            </ns0:qctelex></ns0:primarycontact>
        </ns0:contacts>
    </ns0:party>
</ns0:dataarea> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:18:40.823

没有必要仅仅因为你有命名空间就使用 XPath。请阅读[`->children()`](http://uk.php.net/manual/en/simplexmlelement.children.php)和[`->attributes()`](http://uk.php.net/manual/en/simplexmlelement.attributes.php)方法。

在你的情况下：

```
$xml->children('ns0', true)->applicationarea->creationdatetime 
```

或者，如果您不想依赖“ns0”前缀，请使用完整的命名空间标识符：

```
$xml->children('http://www.openapplications.org/oagis')->applicationarea->creationdatetime 
```

另外，请注意，在您显示的代码段中，`creationdatetime`节点不在`sender`节点中，并且没有`a:`名称空间前缀，您当前的代码都假定这两者。

# visual-c++ - VC++ 错误 LNK 2019 LNK 1120

> ID：13349026
> 
> 赞同：0
> 
> 时间：2012-11-12T18:04:51.657
> 
> 标签：visual-c++

我正在构建一个使用 ICloneable 的学校项目。这是一个非常直接的项目，但我似乎无法通过这个错误：

```
MSVCRTD.lib(crtexe.obj) : error LNK2019: unresolved external symbol _main referenced in   function ___tmainCRTStartup
1>C:\Users\Ed\Documents\Visual Studio 2012\School_Projects\Cpp   Programs\CppInterfaceProgramming\Debug\CppInterfaceProgramming.exe : fatal error LNK1120: 1   unresolved externals
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 
```

该项目使用 VS2012 设置为 CLR 控制台应用程序。我确定我选择了正确的应用程序。

这是给我问题的代码：

```
/*
TestCloning class provides for testing of Circle and Square classes

*/
#include "stdafx.h"
#include "Square.h"
#include "Circle.h"

using namespace System;

ref class TestCloning
{
private: static ConsoleKeyInfo^ cki;
     static Object^ Copy (ICloneable^ o)
     {
         Object^ newObject = o->Clone();
         return newObject;
     }

     static void main()
     {
         while (true)
         {
             copyOrExit();
             if (cki->ToString() == "S")
             {
                 displayAndCopySquare();
             }
             else if (cki->ToString() == "C")
             {
                 displayAndCopyCircle();
             }
             else if (cki->Key == ConsoleKey::Escape)
             {
                 Environment::Exit(0);
             }
         }// while
     } // main

     // provide prompt for user to copy object or exit
     static void copyOrExit()
     {
         Console::WriteLine(L"Press the Escape key to exit, S to display and copy a Square object, " +
             "or C to display and copy a Circle object. ");
         cki = Console::ReadKey(true);
         Console::WriteLine(L"\n");
     } // end copyOrExit method

     // method to display and copy features of a square based on user input
     static void displayAndCopySquare()
     {
         String^ userInput;
         bool isNum;
         double sideLength = 0;

         while (true)
         {
             Console::WriteLine(L"Please enter a number representing the length of one side of a squareto "+
                 "examine and copy...");
             userInput = Console::ReadLine();
             isNum = double::TryParse(userInput, sideLength);

             if (isNum)
             {
                 sideLength = double::Parse(userInput);
                 break;
             }
             else
             {
                 Console::WriteLine(L"The value you entered is not a qualified value.  Please try again...");
                 Console::WriteLine("");
             }
         }// while (true)

         // create Square object and display
         Square^ mySquare = gcnew Square(sideLength);

         Console::WriteLine("The length of one side of this square is " + mySquare->Side);
         Console::WriteLine("The perimeter of this square is " + mySquare->Perimeter);
         Console::WriteLine("The area of this square is " + mySquare->Perimeter);

         // clone square to new object and display
         ICloneable^ clonedSquare = mySquare;
         Square^ newSquare = (Square^)Copy(clonedSquare);
         Console::WriteLine(L"The length of one side of the square clone is " + newSquare->Side);
         Console::WriteLine(L"The perimeter of the square clone is " + newSquare->Perimeter);
         Console::WriteLine(L"The area of the square clone is " + newSquare->Area);
         Console::WriteLine(L"\n");

     } // end of displayAndCopySquare method

     // method to display and copy features of a circle based on user input
     static void displayAndCopyCircle()
     {
         String^ userInput;
         double radius = 0;
         bool isNum;

         while (true)
         {
             Console::WriteLine(L"Please enter an integer representing the radius of a circle to examine and copy");
             userInput = Console::ReadLine();
             isNum = double::TryParse(userInput, radius);
             if (isNum)
             {
                 radius = double::Parse(userInput);
                 break;
             }
             else
             {
                 Console::WriteLine(L"The value you entered is not a qualified value.  Please try again...");
                 Console::WriteLine(L"\n");
             }
         } // while loop

         // create circle object and display
         Circle^ myCircle = gcnew Circle(radius);
         Console::WriteLine(L"The radius of this circle is " + myCircle->Radius);
         Console::WriteLine(L"The circumference of this circle is " + myCircle->Circumference);
         Console::WriteLine(L"The area of this circle is " + myCircle->Area);

         // clone circle to new object and display
         ICloneable^ clonedCircle = myCircle;
         Circle^ newCircle = (Circle^)Copy(clonedCircle);
         Console::WriteLine(L"The radius of this circle clone is " + newCircle->Radius);
         Console::WriteLine(L"The circumference of this clircle clone is " + newCircle->Circumference);
         Console::WriteLine(L"The area of this circle clone is " + newCircle->Circumference);
         Console::WriteLine(L"\n");
     } // end displayAndCopyCircle
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:17:38.977

您将需要一个 main() 函数，以便链接器可以找到它。

```
int main(array<System::String ^> ^args)
{ 
    TestCloning::main();
    return 0;
} 
```

# ember.js - emberjs 处理 401 未授权

> ID：13349035
> 
> 赞同：11
> 
> 时间：2012-11-12T18:05:28.930
> 
> 标签：ember.js, ember-data, rails-api

我正在构建一个 ember.js 应用程序并挂断了身份验证。json rest 后端是 rails。每个请求都使用会话 cookie ( [warden](https://github.com/hassox/warden) ) 进行身份验证。

当用户第一次导航到应用程序根时，rails 会重定向到登录页面。一旦会话被授权，ember.js 应用程序就会被加载。加载后，ember.js 应用程序使用 ember-data RESTadapter 和会话向后端发出请求以进行授权。

问题是会话将在预定时间后过期。很多时候，当这种情况发生时，ember.js 应用程序仍处于加载状态。因此，对后端的所有请求都会返回 401 {notautorized} 响应。

为了解决这个问题，我认为 ember.js 应用程序需要在每次从服务器返回 401 {not autorized} 响应时使用登录模式通知用户。

有谁知道如何收听 401 {notautorized} 响应并允许用户重新登录而不会丢失任何更改或状态。

我见过其他方法，例如令牌授权，但我担心安全隐患。

有人对这个问题有有效的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-28T03:47:08.703

从 Ember Data（1.0 beta）的当前版本开始，您可以覆盖以下`ajaxError`方法`DS.RESTAdapter`：

```
App.ApplicationAdapter = DS.RESTAdapter.extend({
  ajaxError: function(jqXHR) {
    var error = this._super(jqXHR);
    if (jqXHR && jqXHR.status === 401) {
      #handle the 401 error
    }
    return error;
  }
}); 
```

请注意，您应该调用`@_super`，特别是如果您要覆盖更复杂的适配器之一`DS.ActiveModelAdapter`，例如处理`422 Unprocessable Entity`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T12:09:34.153

AFAIK ember-data 的当前实现没有解决这个问题，并且 ember-data README 声明“处理错误状态”在[Roadmap](https://github.com/emberjs/data#roadmap)上。

目前，您可以实现自己的错误处理适配器。看一下[DS.RestAdapter 的实现](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/adapters/rest_adapter.js) 。通过使用它作为启动器，在那里添加错误处理应该不会太难（例如，只需将错误函数添加到传递给 jQuery.ajax 调用的数据散列）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T21:14:44.033

对于那些愿意接受丢失更改和状态的解决方案的*人*，您可以注册一个 jQuery ajaxError 处理程序以重定向到登录页面。

```
$(document).ajaxError(function(event, jqXHR, ajaxSettings, thrownError) {
  // You should include additional conditions to the if statement so that this
  // only triggers when you're absolutely certain it should
  if (jqXHR.status === 401) {
    document.location.href = '/users/sign_in';
  }
}); 
```

每当任何 jQuery ajax 请求完成并出现错误时，都会触发此代码。

当然，您永远不会真正使用这样的解决方案，因为它会造成非常糟糕的用户体验。用户被从他们正在做的事情中拉出来，他们失去了所有的状态。你真正要做的是渲染一个登录视图，可能在一个模态框内。

此解决方案的另一个优点是即使您偶尔在 ember-data 之外向您的服务器发出请求，它也能正常工作。*危险*在于，如果 jQuery 被用于从其他来源加载数据，或者您已经在其他地方内置了一些 401 错误处理。您需要在上面的 if 语句中添加适当的条件，以确保仅在您绝对确定它们应该触发时触发。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-12T18:20:27.257

ember-data 没有解决它（可能不会），但您可以重新打开 DS 类并扩展 ajax 方法。

它看起来像这样：

```
ajax: function(url, type, hash) {
  hash.url = url;
  hash.type = type;
  hash.dataType = 'json';
  hash.contentType = 'application/json; charset=utf-8';
  hash.context = this;

  if (hash.data && type !== 'GET') {
    hash.data = JSON.stringify(hash.data);
  } 

  jQuery.ajax(hash);
}, 
```

你可以用这样的东西重写它（免责声明：未经测试，可能行不通）：

```
DS.reopen({
    ajax: function(url, type, hash) {
        var originalError = hash.error;
        hash.error = function(xhr) {
            if (xhr.status == 401) {
                var payload = JSON.parse(xhr.responseText);
                //Check for your API's errorCode, if applicable, or just remove this conditional entirely
                if (payload.errorCode === 'USER_LOGIN_REQUIRED') {
                    //Show your login modal here
                    App.YourModal.create({
                        //Your modal's callback will process the original call
                        callback: function() {
                            hash.error = originalError;
                            DS.ajax(url, type, hash);
                        }
                    }).show();
                    return;
                }
            }
            originalError.call(hash.context, xhr);
        };
        //Let ember-data's ajax method handle the call
        this._super(url, type, hash);
    }
}); 
```

我们在这里所做的基本上是推迟收到 401 的调用，并保留登录完成后再次调用的请求。模态的 ajax 调用具有从原始 ajax 调用的哈希应用到它的原始错误，因此只要定义了原始错误，原始错误仍然有效:-)

这是我们与我们自己的数据持久性库一起使用的东西的修改实现，因此您的实现可能会有所不同，但相同的概念应该适用于 ember-data。

# java - 采用 Swing 对话框方法并将其转换为 SWT

> ID：13349036
> 
> 赞同：0
> 
> 时间：2012-11-12T18:05:30.563
> 
> 标签：java, swing, dialog, swt

我正在尝试采用以下 Swing 代码方法并为我的应用程序迁移到 SWT。

我知道一些。

SWT SWING 标签 JLabel 按钮 JButton 对话框 JDailog ??? 盒子

该方法看起来像是在创建一个状态对话框并有一个取消按钮。

除了在 SWT 中，我怎么能做同样的事情？
我不确定 Swing Box 在做什么？这基本上是一个带有取消按钮和一些标签的简单对话框吗？

```
 private void createPrintDialog() {
    pd = new JDialog((Frame) null, "Printing...", false);
    Container top = pd.getContentPane();
    Box lines = Box.createVerticalBox();
    Box line = Box.createHorizontalBox();
    line.add(new Label("Now printing: "));
    Label title = new Label("file.pdf");
    line.add(title);
    lines.add(line);

    line = Box.createHorizontalBox();
    line.add(Box.createHorizontalStrut(10));
    line.add(new Label("page "));
    pagenumlabel = new JLabel("1");
    line.add(pagenumlabel);
    line.add(new JLabel(" of "));
    JLabel totalpages = new JLabel(String.valueOf(file.getNumPages()));
    line.add(totalpages);
    lines.add(line);

    top.add(lines, BorderLayout.CENTER);

    Box cancelbox = Box.createHorizontalBox();
    cancelbox.add(Box.createHorizontalGlue());
    cancel = new JButton(new AbstractAction("Cancel") {

        public void actionPerformed(ActionEvent evt) {
            doCancel();
        }
    });
    cancelbox.add(cancel);
    top.add(cancelbox, BorderLayout.SOUTH);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:52:22.497

使用`org.eclipse.jface.dialogs.MessageDialog`. （有静态方法打开错误，信息...等根据您的需要使用）

# c# - Ubuntu MySqlConnection.Open 上的 Mono 导致 System.OverflowException

> ID：13349039
> 
> 赞同：1
> 
> 时间：2012-11-12T18:05:42.390
> 
> 标签：c#, mysql, mono, ubuntu-11.10

我正在尝试使用 Mono 2.10.5 从[http://www.mono-project.com/MySQL](http://www.mono-project.com/MySQL)在 Ubuntu 11.10 上获取演示。

将 MySQL v2 驱动程序（重命名后）安装到 gac。在 machine.config 中添加了 provider 一行。

Hello World 演示编译并运行良好。以下代码在 MSVS 上正常执行和连接。

编译 cmd 有效： mcs TestMysqlConnect.cs -r:System.Data.dll -r:/home/steve/MONO/Assemblies/Mysql/v2/MySql.Data.dll

```
using System;
using System.Data;
using MySql.Data.MySqlClient;

public class Test
{
   public static void Main(string[] args)
   {
      string connectionString =
      "Server=192.168.111.4;" +
      "Database=LOADTRACKER;" +
      "Port=3306;" +
      "User ID=oec;" +
      "Password=oec;" +
      "Pooling=false";

    Console.WriteLine("Create MySqlConnection");

   IDbConnection dbcon;
   dbcon = new MySqlConnection(connectionString);

    Console.WriteLine("dbcon.Open();");

   dbcon.Open();

   IDbCommand dbcmd = dbcon.CreateCommand();

    Console.WriteLine("dbcon.CreateCommand();");

   // requires a table to be created named employee
   // with columns firstname and lastname
   // such as,
   //        CREATE TABLE employee (
   //           firstname varchar(32),
   //           lastname varchar(32));
   string sql =
       "SELECT Account, Security " +
       "FROM accesslist";
   dbcmd.CommandText = sql;
   IDataReader reader = dbcmd.ExecuteReader();
   while(reader.Read()) {
        string acct = (string) reader["Account"];
        string sec = (string) reader["Security"];

        Console.WriteLine("Acct: " + acct + " (" + sec + ")");
   }
   // clean up
   reader.Close();
   reader = null;
   dbcmd.Dispose();
   dbcmd = null;
   dbcon.Close();
   dbcon = null;
   }
} 
```

执行此代码会产生：

```
$mono ./TestMysqlConnect.exe
Create MySqlConnection
dbcon.Open();

Unhandled Exception: System.OverflowException: Number overflow.
  at (wrapper managed-to-native) object:__icall_wrapper_mono_array_new_specific (intptr,int)
  at MySql.Data.MySqlClient.Authentication.MySqlAuthenticationPlugin.HandleAuthChange (MySql.Data.MySqlClient.MySqlPacket packet) [0x00000] in <filename unknown>:0
  at MySql.Data.MySqlClient.Authentication.MySqlAuthenticationPlugin.Authenticate (Boolean reset) [0x00000] in <filename unknown>:0
  at MySql.Data.MySqlClient.NativeDriver.Authenticate (System.String authMethod, Boolean reset) [0x00000] in <filename unknown>:0
  at MySql.Data.MySqlClient.NativeDriver.Open () [0x00000] in <filename unknown>:0
  at MySql.Data.MySqlClient.Driver.Open () [0x00000] in <filename unknown>:0
  at MySql.Data.MySqlClient.Driver.Create (MySql.Data.MySqlClient.MySqlConnectionStringBuilder settings) [0x00000] in <filename unknown>:0
  at MySql.Data.MySqlClient.MySqlConnection.Open () [0x00000] in <filename unknown>:0
[ERROR] FATAL UNHANDLED EXCEPTION: System.OverflowException: Number overflow.
  at (wrapper managed-to-native) object:__icall_wrapper_mono_array_new_specific (intptr,int)
  at MySql.Data.MySqlClient.Authentication.MySqlAuthenticationPlugin.HandleAuthChange (MySql.Data.MySqlClient.MySqlPacket packet) [0x00000] in <filename unknown>:0
  at MySql.Data.MySqlClient.Authentication.MySqlAuthenticationPlugin.Authenticate (Boolean reset) [0x00000] in <filename unknown>:0
  at MySql.Data.MySqlClient.NativeDriver.Authenticate (System.String authMethod, Boolean reset) [0x00000] in <filename unknown>:0
  at MySql.Data.MySqlClient.NativeDriver.Open () [0x00000] in <filename unknown>:0
  at MySql.Data.MySqlClient.Driver.Open () [0x00000] in <filename unknown>:0
  at MySql.Data.MySqlClient.Driver.Create (MySql.Data.MySqlClient.MySqlConnectionStringBuilder settings) [0x00000] in <filename unknown>:0
  at MySql.Data.MySqlClient.MySqlConnection.Open () [0x00000] in <filename unknown>:0 
```

有趣的是，如果我提供了错误的用户/密码，我会得到预期的异常：

```
[ERROR] FATAL UNHANDLED EXCEPTION: MySql.Data.MySqlClient.MySqlException: Authentication to host '192.168.111.4' for user 'root' using method 'mysql_native_password' failed with message: Access denied for user 'root'@'linux' (using password: YES) ---> MySql.Data.MySqlClient.MySqlException: Access denied for user 'root'@'linux' (using password: YES) 
```

任何帮助是极大的赞赏。谢谢你。

# java - hibernate 有什么可以序列化/反序列化 json（或 xml）列将其转换为真实模型属性的东西吗？

> ID：13349045
> 
> 赞同：5
> 
> 时间：2012-11-12T18:06:10.530
> 
> 标签：java, hibernate

在 Rails 中，我们有一个`serialize`方法，它接受一个属性（或列），当保存在数据库中时，该属性（或列）将自动序列化为 json。

保存并查询该对象后，可以将对象序列化的 json 作为真实的类属性进行访问。

我的问题是：是否有任何内置或包可以将此功能添加到休眠？如果是否定的，是否可以使用反射 java api 动态创建属性？

我对此提出质疑是因为我对学习一点 Java 以及你可以用 JVM 做什么很感兴趣。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T19:25:58.950

我真的不明白你想要什么，对不起。

但是，如果您想要一个对象的字段，其值以单列中的序列化形式保存到数据库中，而不是映射到另一个表中的行的引用，那么这是 JPA 的标准部分。您只需定义一个字段，然后不要使用关系注释对其进行注释。我相信该字段的类型必须是 的子类型`Serializable`，但（遗憾的是）。例如：

```
@Entity
public class Colleague {
    @Id
    private int id;
    private HashMap<Date, String> diary;
} 
```

这将映射到这样的表：

```
create table Colleague (
    id integer primary key,
    diary blob
) 
```

现在，您提到了 JSON。这不会使用 JSON；它将使用标准的 Java 序列化。我认为没有什么特别理智的方法可以让它使用 JSON 来代替。最简单的可能是将要序列化的对象包装在 JSONifying 包装器中。不是太难，但有点奇怪。

尽管如此，即使这不是 JSON，它的用处也大致相同：数据进入数据库，然后返回。

再说一次，不知道这是否真的是你想要的，对不起！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T18:13:04.790

您可以使用现有的 JSON 库（如 Jackson 或 Gson）为此编写自己的自定义用户类型。

1.  [jackson-hibernate-module](https://github.com/FasterXML/jackson-module-hibernate)：基于 Jackson 的预先存在的库。支持延迟加载的概念
2.  [创建自定义 JSON 用户类型。](http://blog.janjonas.net/2010-04-27/hibernate-json-usertype-persist-json-objects)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T18:14:40.497

我认为，您可以为此使用[Gson](http://code.google.com/p/google-gson/)库。它允许您序列化和反序列化 json 对象或 java 对象。

对于 XML 文件，您可以使用[XStream](http://xstream.codehaus.org/)库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T18:21:28.937

我不认为 Hibernate 有这样的工具。但我看到了两种模拟这种行为的方法

1.  在您的实体中使用 JPA @PrePersit 方法并使用 Json 库重新呈现值
2.  在您的实体方法上使用一些 AOP 并以相同的方式重新渲染

# php - 使用 jQuery 或 PHP 将“.active”类添加到菜单中的当前页面链接

> ID：13349046
> 
> 赞同：1
> 
> 时间：2012-11-12T18:06:13.227
> 
> 标签：php, jquery, css

我需要`.active`在页面上的活动任务的菜单链接上添加类。我在本地主机上工作，这里有几个示例 URL：

```
http://localhost/webapp/index.php?task=validate
http://localhost/webapp/index.php?task=register 
```

和菜单的结构：

```
 <div class="menu">
       <ul class="sf-menu">
          <li><a href="index.php">Inicio</a></li>
          <li><a href="?task=validator">Validar</a></li>
          <li><a href="?task=register">Registro</a></li>
       </ul>
    </div> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-12T18:13:37.813

您可以使用 jQuery 遍历所有链接并将它们的 URL 与`location`. 这是一个例子：

```
$(".sf-menu a").filter(function(){
    return this.href == location.href.replace(/#.*/, "");
}).addClass("active"); 
```

# c# - 如何将 User.Identity.Name 自动填充到 MVC 4 Intranet 表单中

> ID：13349049
> 
> 赞同：1
> 
> 时间：2012-11-12T18:06:22.027
> 
> 标签：c#, asp.net-mvc-4, entity-framework-4.1

我正在使用 C# 中的 MVC 4 和 Entity Framework 4.1 构建我的第一个 MVC 站点。我有一个模型，它显示带有标准“添加”、“编辑”、“详细信息”和“删除”选项的项目列表。

链接到模型的数据库有一个“用户名”列，我的应用程序当前显示一个文本框，供用户通过 Create.cshtml 文件中的以下代码输入他们的用户名。

```
 <div class="editor-field">
        @Html.EditorFor(model => model.UserName)
        @Html.ValidationMessageFor(model => model.UserName)
    </div> 
```

我试图改变这一点，以便他们的 User.Identity.Name（例如 DOMAIN\user）值将自动填充到文本框中，或者更好的是，只存储而不向用户显示它正在发生。

有没有一种相对轻松的方法来实现这一点？

编辑：我的“创建”部分的控制器代码目前如下所示：

```
 public ActionResult Create(Occurrence occurrence)
    {
        if (ModelState.IsValid)
        {
            db.Occurrences.Add(occurrence);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        ViewBag.EmployeeID = new SelectList(db.Employees, "EmployeeID", "EmployeeName", occurrence.EmployeeID);
        return View(occurrence);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:11:36.293

您可以在控制器中设置用户名

```
public ActionResult Create()
{
    string username = Environment.UserName // or however you get it
    User user = new User{UserName = username};
    return View(user);
} 
```

另一种选择是在视图中处理它

```
@Html.ValidationMessageFor(model => model.UserName, new{@Value = Environment.UserName}) 
```

# svn - 如何知道谁修改了文件？

> ID：13349053
> 
> 赞同：0
> 
> 时间：2012-11-12T18:06:52.403
> 
> 标签：svn, vim

你用什么来查看谁修改了文件？

我的意思是，我正在与一群人和 svn 一起工作，所以我的伙伴可以在 Netbeans 中看到谁编写/修改了文件的**每一行**！我如何在 vim 中看到这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T18:12:17.270

也许您正在寻找 svn blame 命令？

```
svn blame <filename> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T18:16:09.183

首先了解版本控制系统的工作原理。由于我是 Git 粉丝，所以我对 SVN 了解不多，但它们的目的基本相同：管理团队（甚至是单个人）源代码。

当您使用 VCS 并进行一些更改后，您可以提交更改并将它们推送到主存储库。在您的机器中配置 VCS 时，您可以使用您的姓名和电子邮件设置您的帐户。这就是 VCS 识别您的提交的方式。

我不是世界上最适合谈论这个问题的人，但如果你有兴趣，Eric Sink 正在免费提供他的书 -*示例版本控制*- （并且也会免费为你提供）。去年我拿到了这本书，虽然它并不广泛或高级，但它向我介绍了一堆 VCS，我决定坚持使用 Git。

最后，如果您想查看 VIM 中的更改，您需要一个插件。NetBeans 有一个 SVN 插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T18:41:01.980

我还发现这在 vim 内部受到指责：

[http://svn.haxx.se/dev/archive-2009-10/0776.shtml](http://svn.haxx.se/dev/archive-2009-10/0776.shtml)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T07:28:17.783

您想要在 Subversion 以及许多其他版本控制系统中找到的*annotate* aka *blame功能。*

在[vcscommand 插件](http://www.vim.org/scripts/script.php?script_id=90)的帮助下，您可以在 Vim 中显示此信息，可以作为增强的暂存缓冲区 ( `:VCSAnnotate`) 或拆分到原始缓冲区左侧的窗口 ( `:VCSAnnotate!`)。它还提供与版本控制相关的各种其他命令，并支持 CVS/SVN/SVK/git/hg/bzr。

# android - 如何在 onTimeSet 方法中显示对话框？

> ID：13349057
> 
> 赞同：0
> 
> 时间：2012-11-12T18:07:08.563
> 
> 标签：android, timepicker

我想知道当我从 TimePicker 中选择这些值时是否设置了 timerMinute 和 timerSecond 的值。

```
public void onTimeSet(TimePicker view, int minute, int second) {
        // Do something with the time chosen by the user
        this.timerMinute = minute;
        this.timerSecond = second;
        Toast.makeText(getActivity(), "Minute: " + minute, 
            Toast.LENGTH_SHORT).show();
    } 
```

我想在方法 onTimeSet 中显示一个对话框并显示选择的值。

我用 Toast 来显示值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:25:47.433

这取决于您使用的是什么框架，您使用的是 Fragments 吗？您想调用`Activity#showDialog(int)`或使用 FragmentManager 来创建 DialogFragment。

但这是最基本的方法：

```
public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
    AlertDialog.Builder builder = new AlertDialog.Builer(this);
    builder.setMessage("You chose " + hourOfDay + ":" + minute).show();
} 
```

注意参数是小时和分钟（没有秒）。

# c# - 剃刀语法错误

> ID：13349060
> 
> 赞同：2
> 
> 时间：2012-11-12T18:07:25.643
> 
> 标签：c#, asp.net, razor, web

我刚开始做一个项目来接管现有程序员的代码。这是一个相当大的 ASP.NET 网页项目，它使用带有 c# 的 Razor 语法。显然，该代码在客户端机器上运行，但是，当我将它加载到本地机器上时，我收到了一些语法错误。这些错误似乎表明它认为它在我的代码底部缺少一个花括号。我已将语法错误缩小到以下代码：

```
 @{
              string[] sOption = {"", "0"};
              var sDescription = @Id.iDescription;
              if (sDescription == null) {}
              else {sOption = sDescription.Split('.');}
             } 
```

当我将语法更改为：

```
 @{
              string[] sOption = {"", "0"};
              var sDescription = @Id.iDescription;
              if (sDescription != null)
                 sOption = sDescription.Split('.');
             } 
```

有用。

任何想法为什么这首先会导致问题。解析器有问题吗？是否有不同的 Razor 可以使用。我在想我的客户可能有不同的版本。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T18:14:08.140

这里的第一个示例代码没有错误。

第二个有错误： `Block statements must be enclosed in "{" and "}"`.

我已更改您的示例代码以包含缺少的变量。

**第一个样本**在这里工作

```
 var @Id = new { iDescription = (string)null};
          string[] sOption = {"", "0"};
          var sDescription = @Id.iDescription;
          if (sDescription == null) {}
          else {sOption = sDescription.Split('.');} 
```

**此处的第二个示例**语法错误

```
 var @Id = new { iDescription = (string)null};
          string[] sOption = {"", "0"};
          var sDescription = @Id.iDescription;
          if (sDescription != null)
              sOption = sDescription.Split('.'); 
```

# iphone - [sender resignFirstResponder] 的反义词是什么；Objective-C

> ID：13349065
> 
> 赞同：3
> 
> 时间：2012-11-12T18:07:43.100
> 
> 标签：iphone, objective-c, xcode, ipad, xcode4

嗨，我想知道是否有相反的

```
[sender resignFirstResponder]; 
```

我想知道，因为我正在使用 2 个 UITextFields（“用户名”和“密码”）做一个登录页面，并希望用户名完成按钮打开密码字段的键盘。

也许有类似的东西

```
[sender assignFirstResponder]; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-12T18:09:49.823

`[sender becomeFirstResponder];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T18:12:11.720

你可以用这个

```
[myTextField becomeFirstResponder]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T18:14:48.390

```
if(textfield==nameTextfield)
{

[passwordTextField becomeFirstResponder];
} 
```

# asp.net-mvc - MVC 3 项目 - 找不到资源

> ID：13349071
> 
> 赞同：0
> 
> 时间：2012-11-12T18:07:59.340
> 
> 标签：asp.net-mvc, asp.net-mvc-3, controller, jsonresult, maproute

我在使用 MVC 3 路由时遇到问题。我在 Global.asax 中有这个功能：

```
routes.MapRoute("Invitations",
                        "api/invitations",
                        new { controller = "Invitations", action = "Invitation" }); 
```

我有一个控制器：

```
public class InvitationsController : Controller
{
    [HttpPut]
    public JsonResult Invitation(InvitationResponse invitationResponse)
    {
        //code
    }
} 
```

问题是我得到了错误`NotFound or The resource cannot be found`。任何人都可以看到问题吗？

编辑：我使用的 URL 是“http://localhost:6055/API/Invitations”

# database - 如何在不应用挂起更新的情况下刷新 TClientDataSet？

> ID：13349075
> 
> 赞同：2
> 
> 时间：2012-11-12T18:08:03.413
> 
> 标签：database, delphi, dbexpress, tclientdataset

这是我要完成的工作：

1.  通过 TSQLDataset 的 CommandText 从数据库中检索 1 条记录：SELECT * FROM myTable WHERE ID = 1
2.  使用 TClientDataset 修改记录。（1 个待更新）
3.  检索下一条记录。SELECT * FROM myTable WHERE ID = 2
4.  修改记录。（现在有 2 个待更新）
5.  最后，通过 ApplyUpdates 函数将 2 个挂起的更新发送回数据库。

当我执行第 3 步时，我得到“必须在刷新数据之前应用更新”。

如何在不应用挂起更新的情况下刷新 TClientDataSet？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T20:15:17.700

您可以调用[AppendData](http://docwiki.embarcadero.com/Libraries/XE3/en/Datasnap.DBClient.TCustomClientDataSet.AppendData)方法手动将数据包附加到 DataSet。

在提供者与 ClientDataSet 位于同一应用程序中的应用程序中，您可以编写如下代码：

```
begin
  ConfigureProviderToGetRecordWithID(1);
  //make the ClientDataSet fetch this single record and not hit the EOF.
  ClientDataSet1.PacketRecords := 1; 
  ClientDataSet1.Open;
  ClientDataSet1.Edit;
  ModifyFirstRecord;
  ClientDataSet1.Post;
  ConfigureProviderToGetRecordWithID(2);
  ClientDataSet1.AppendData(DataSetProvider1.Data, False); 
  //now you have two records in your DataSet without losing the delta.
end; 
```

这是一种伪代码，但显示了您可以使用的一般技术。

# java - 在 Java 中以低内存消耗调整图像大小

> ID：13349079
> 
> 赞同：7
> 
> 时间：2012-11-12T18:08:17.700
> 
> 标签：java, image

ImageMagick 的“转换”命令行工具允许您在执行其操作时指定内存使用限制。我想找到一个提供相同选项的 Java 图像大小调整库。我的应用程序有时会得到非常大的 JPEG，需要将它们下采样到合理的大小。例如，一张 11600 x 5152 的图像仅在解压缩时会消耗大约 227MB 的内存；调整大小的过程最终会使用更多。

在 Java 中，有没有办法在不解压缩内存中的整个图像的情况下将非常大的图像调整为合理的大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T18:46:09.623

我认为这个话题已经在某种程度上讨论过：[什么是最好的java图像处理库/方法？](https://stackoverflow.com/questions/603283/what-is-the-best-java-image-processing-library-approach)

然而，Java 本身提供了一个图像操作和处理 API，它具有读取（并因此操作）块中像素数据的可能性；您*可以*围绕它编写代码以按预期执行，但根据您的需要，性能的实际改进不值得麻烦。

根据您的需要，实现最佳性能的*可靠*方法是通过 JNI，通过使用某种本机解决方案（如纯 C OpenGL 代码）来处理图像加载和处理。但是您当然意识到，出于同样的原因，这可能被认为是矫枉过正，根本不值得麻烦。同样，已经在这里讨论过：[Load a PNG image into Java as BufferedImage through JNI C code](https://stackoverflow.com/questions/842386/load-a-png-image-into-java-as-bufferedimage-through-jni-c-code)

# java - Javascript/Java HTML 模板/数据绑定库

> ID：13349082
> 
> 赞同：-1
> 
> 时间：2012-11-12T18:08:42.067
> 
> 标签：java, javascript, html, templates, toolkit

我想了解具有以下属性的库：

*   客户端的 Javascript 实现，
*   服务器端的 Java 实现，
*   轻量级语法：没有通用的“代码”，只有简单的表达式，
*   但简单的 for 循环、'include' 和 'if'。

（简而言之，语法类似于 Django 模板，如果这能告诉你什么的话。）

有人知道满足这些要求的开源库吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T18:11:40.563

你考虑过使用[Mustache](http://mustache.github.com/)吗？它提供了非常简单的模板，可以在[java](https://github.com/spullara/mustache.java)和[javascript](https://github.com/janl/mustache.js)中使用。

如果您查看文档，您可以看到简单的循环示例：

```
{{#names}}
  Hi {{name}}!
{{/names}} 
```

和条件：

```
{{#value}}
  Value was true
{{/value}}
{{^value}}
  Value was false
{{/value}} 
```

可以使用部分处理包含，这让您可以拉入另一个模板。

# entity-framework - 你能给我一个例子，说明如何附加一个处于已删除状态的对象 - 我一直收到异常

> ID：13349095
> 
> 赞同：0
> 
> 时间：2012-11-12T17:24:49.277
> 
> 标签：entity-framework

来自[MSDN](http://msdn.microsoft.com/en-us/library/bb896408%28v=vs.90%29.aspx)：

> 只有当 ObjectStateManager 已经在跟踪关系实例时，才能附加处于 Deleted 状态的对象。

你能给我一个例子，说明如何附加一个处于*已删除*状态的对象。我尝试了以下并得到“ *System.InvalidOperationException：正在附加的对象处于添加或删除状态。无法为处于此状态的对象创建关系*”。

```
 var contact = context.Contacts.First();
        Console.WriteLine(contact.Addresses.Count()); // 2

        var address = contact.Addresses.First();

        context.Addresses.DeleteObject(address);
        contact.Addresses.Attach(address); // InvalidOperationException 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:12:11.547

发生异常是因为调用 DeleteObject 后对象已附加。如果要提交删除，则应调用

```
context.SubmitChanges(); 
```

# java - 在 Swing 文本控件中查找字符索引的位置

> ID：13349102
> 
> 赞同：0
> 
> 时间：2012-11-12T18:10:34.297
> 
> 标签：java, swing, model, jtextcomponent, swing-highlighter

我想在 Java Swing 的文本控件中围绕某些文本进行括号的自定义绘制。但我需要知道在哪里画它们。我确实知道文本内容中字符的确切范围，所以我只需要能够将这些索引翻译到控件上的特定位置，以便我可以绘制。

有没有办法做到这一点？

# bash - Bash中两个相同格式文件的总和值

> ID：13349108
> 
> 赞同：1
> 
> 时间：2012-11-12T18:11:03.313
> 
> 标签：bash, shell

我得到了一个如下的txt格式，每个用户（a，b，c ...）都有一个数值

旧值文件

```
a,1000130103828
b,9230032882842
c,98247249242402
... 
```

和新值文件

```
a,20200203020
b,1029328428429
c,102492290011
... 
```

如何通过在 Bash 中对每个用户的值求和来轻松计算新文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:23:30.733

打电话给awk？

```
 awk '-F,' '{users[$1]+=$2}; END{for (u in users) {printf("%s,%s\n", u, users[u])}}' file1 file2 > sumFile 
```

输出

```
cat sumFile
a,1020330306848
b,10259361311271
c,98349741532413 
```

可能有超过 3 个用户，输出不会像您的文件中那样排序，如果您需要排序，请添加

```
 | sort -t, -k1 
```

到上面。

IHTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:29:06.383

```
$ join -j1 -t, old new | tr ',' ' ' | while read r; do
> ra=($r); echo ${ra[0]},$(( ${ra[1]} + ${ra[2]} )); done
a,1020330306848
b,10259361311271
c,98349741532413 
```

您拥有的两个文件在哪里`old`和是。`new`如果需要，通过添加重定向到新文件

```
> newfile 
```

# css - ie8 在第一页加载时不渲染/加载@font-face 字体

> ID：13349113
> 
> 赞同：3
> 
> 时间：2012-11-12T18:11:38.570
> 
> 标签：css, internet-explorer-8, fonts, web, font-face

所有其他浏览器——FF、Chrome、Safari、Opera 和 IE9——都可以正常工作。

但在 IE8 中它不会加载 @font-face 字体 - 但如果您导航到另一个页面然后返回，字体会呈现/加载正常。

见图片：

![在此处输入图像描述](../Images/f5c7c0fb1aa39381f01637d872ec30e5.png)

顶部：导航到另一个页面后显示的文本，底部：网站首次加载时显示的文本

CSS 代码：

```
@font-face {
    font-family: 'FontNameHere';
    src: url('/font/webfont.eot');
    src: local('?'), url('/font/webfont.woff') format('woff'),
    url('/font/webfont.ttf') format('truetype'),
    url('/font/webfont.svg#webfontkKNhbsUZ') format('svg');

} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-20T06:08:10.600

Internet Explorer 9+、Firefox、Chrome、Safari 和 Opera 支持 WOFF（Web 开放字体格式）字体。

Firefox、Chrome、Safari 和 Opera 支持 TTF（True Type 字体）和 OTF（OpenType 字体）类型的字体。

Chrome、Safari 和 Opera 也支持 SVG 字体/形状。

Internet Explorer 还支持 EOT（嵌入式 OpenType）字体。

注意：Internet Explorer 8 及更早版本，不支持@font-face 规则。

**但是，** IE8 与网络字体的关系比“它不支持它”要复杂一些。它确实支持它们，但在某种程度上使使用它们变得痛苦。

有五种类型的网络字体格式：

Embedded Open Type (EOT) TrueType (TTF) OpenType (OTF) Scalable Vector Graphics (SVG) Web Open Font Format (WOFF) 其中，WOFF 将成为标准。Chrome、Firefox（自 3.6 起）、Opera、Safari 和 IE9 都支持它。

当然IE8对WOFF一无所知，而是专门支持EOT（公平地说，这主要是因为IE8先于WOFF）。这意味着要使用可以在 IE8 和其他浏览器中显示的网络字体，您必须提供 EOT 和 WOFF 格式。

更糟糕的是，IE8 有一个错误，它会阻止它为同一种字体加载多种格式。幸运的是，您可以使用一个 hack。

无论如何，这是@font-face 的跨浏览器 CSS

```
@font-face {
    font-family: 'OpenSans';
    src: url('fonts/OpenSans-Light-webfont.eot');
    src: url('fonts/OpenSans-Light-webfont.eot?#iefix') format('embedded-opentype'),
         url('fonts/OpenSans-Light-webfont.woff') format('woff'),
         url('fonts/OpenSans-Light-webfont.ttf') format('truetype'),
         url('fonts/OpenSans-Light-webfont.svg#OpenSansLight') format('svg');
    font-weight: 300;
    font-style: normal;
} 
```

在此示例中，我使用了一种名为 Open Sans 的字体及其多种格式（EOT、WOFF、TTF 和 SVG），它们存储在我网站的“fonts”文件夹中。

*   如果您想知道我为什么包含 SVG 格式，答案是因为移动 Safari (iPhone/iPad) 直到 4.1 版才支持这种格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T15:50:09.713

我知道这是一个老问题，但它在谷歌搜索中的排名很高，所以我认为在这里添加答案可能会有一些价值......

我还没有得出一个明确的答案，但我找不到其他人患有与您描述的相同的症状。

一般来说，使用 IE8，webfonts 要么工作要么不工作——但我让它们在某些页面加载时不加载（通常但不总是第一个），并且偶尔看到它们不会在网站上从一个页面加载到另一个页面我'米工作。

我使用单独的开发服务器，这个问题只发生在那里，而不是生产！

我还没有弄清楚为什么会这样。我的第一直觉是 EOT 字体的 MIME 类型，所以我在我的开发服务器上添加了一个。那并没有解决它。我还没有时间进行全面诊断，而且由于生产更重要而且我很忙，我可能无法再深入研究一下——但也许有人会在一些谷歌的顶部看到这个结果，这将成为他们找出问题的催化剂......

# asp.net-mvc - asp.net mvc 应用程序关闭

> ID：13349119
> 
> 赞同：0
> 
> 时间：2012-11-12T18:11:53.417
> 
> 标签：asp.net-mvc, api

我有一个名为 API Web 的 Live 网站，使用 ASP.NET MVC 4 构建。这个应用程序是为其他网站提供 JavaScript 文件。我有 20 个网站向其请求 JavaScript。

但是，有时这个 API Web 出现故障，我很难让应用程序重新运行。我不知道为什么会发生这种情况，我该如何解决这个问题？

**编辑**

这是控制器，如果请求路径的网站说[http://api.example.com/get/js/folderA?js=jquery.js](http://api.example.com/get/js/folderA?js=jquery.js) 应用程序将返回一个 javascript 内容。但是，请求网站的加载速度会变慢。我认为如果 API Web 有太多的请求，它会下降（瓶颈问题）。

```
public ActionResult js(string id, string js) {
            string fileLocation = Server.MapPath("~/content/" + id + "/js/" + CryptKeys.Decrypt(js) + "");

            string contentType = "text/javascript";
            var file = System.IO.File.Open(fileLocation, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
            var stream = (Stream)(file);

            return new FileStreamResult(stream, contentType);

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:54:40.667

您有可能没有关闭由`System.IO.File.Open`类打开的文件流，这可能会导致下一次调用返回相同的文件以引发异常。并且由于未处理异常，这最终可能导致站点关闭。

您是否在事件查看器中检查了错误日志？

根据您在下面的输入，您可以尝试这段代码吗？注意`using`我添加的块

```
public ActionResult js(string id, string js) {
        string fileLocation = Server.MapPath("~/content/" + id + "/js/" + CryptKeys.Decrypt(js) + "");

        string contentType = "text/javascript";
        using(var file = System.IO.File.Open(fileLocation, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
        {
            var stream = (Stream)(file);

            return new FileStreamResult(stream, contentType);
        }

    } 
```

# android - 使用 Android 应用远程监控 SCADA

> ID：13349122
> 
> 赞同：1
> 
> 时间：2012-11-12T18:12:05.353
> 
> 标签：android, scada

我正计划开发一个可以访问 HMI/SCADA 系统的安卓应用程序，所以这个应用程序的用户可以使用平板电脑远程监控和控制他们的工厂。这实际上是一个毕业设计的想法。

我对 SCADA 系统有一些经验，而几乎没有应用程序开发经验。

我的问题是：

1.  首先，是否有可能实现这个想法？

2.  我应该使用 PC 和平板电脑之间的哪种通信方式？通过互联网或局域网？

3.  一定要使用OPC吗？（我用谷歌搜索过，这似乎是唯一的方法。甚至 teslaScada 应用程序也在使用它）..

4.  最后，从 HMI/SCADA 获取数据的想法是什么？

我只需要有人帮助我在正确的道路上站稳脚跟，知道我应该搜索和学习哪些主题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:52:18.433

1.  当然，将电子系统与另一个系统连接[是可能的](http://www.bash.org/?5804)。但是，这可能并不*容易*，尤其是如果您没有网络应用程序的经验。

2.  Internet 和 LAN 之间没有根本区别。您必须考虑安全性（并注意[陷阱](http://en.wikipedia.org/wiki/Cross-site_request_forgery)）。此外，为了使您的应用程序可以通过 Internet 访问，您必须拥有一个域名和/或静态 IP 地址。

3.  您可以使用任何协议。通常，大多数应用程序都使用 HTTP，因为它易于理解、可扩展、可在几乎所有平台上使用，并且在某种程度上知道如何保护它。这些都不适用于[OPC](http://en.wikipedia.org/wiki/OLE_for_process_control)。要回答问题的字母，没有必要；您可以使用任何协议。

4.  那么，您现在通过什么协议获取数据（在您当前的 CLI 或 GUI 应用程序中）？这应该是（经过仔细的安全考虑）一个好的起点。

# ios - 错误：[__NSCFConstantString 路径]：发送了无法识别的选择器

> ID：13349130
> 
> 赞同：1
> 
> 时间：2012-11-12T18:12:30.203
> 
> 标签：ios, core-data, sync, icloud, managedobjectcontext

我正在尝试实现**Core Data**与**iCloud**的同步。

当我尝试**[self fetchedResultsControllerICloud] performFetch:&error** ]

**-（id）初始化**

```
 [self managedObjectModelICloud];
    [self managedObjectContextICloud];

    if (![[self fetchedResultsControllerICloud] performFetch:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        exit(-1);  // Fail
    } 
```

我有一个错误

```
 2012-11-12 23:50:34.917 My English words[1072:907] iCloud access at file://localhost/private/var/mobile/Library/Mobile%20Documents/LUB2V2L4R3~ru~________~My-English-words/
 2012-11-12 23:50:34.920 My English words[1072:907] count: 0
 2012-11-12 23:50:34.935 My English words[1072:110b] iCloudData: /private/var/mobile/Library/Mobile Documents/LUB2V2L4R3~ru~________~My-English-words/Documents/My_English_words.sqlite
 2012-11-12 23:50:34.938 My English words[1072:110b] -[__NSCFConstantString path]: unrecognized selector sent to instance 0x8ca28
 2012-11-12 23:50:34.940 My English words[1072:110b] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFConstantString path]: unrecognized selector sent to instance 0x8ca28'
 *** First throw call stack:
 (0x331012a3 0x33fbf97f 0x33104e07 0x33103531 0x3305af68 0x344b840b 0x343805cf 0x3437e73d 0x7fe33 0x356f111f 0x356ff259 0x356ff3b9 0x3572fa11 0x3572f8a4)
 libc++abi.dylib: terminate called throwing an exception
 (lldb) 
```

与 **[_persistentStoreCoordinatorICloud addPersistentStoreWithType:NSSQLiteStoreType**字符串链接**- (NSPersistentStoreCoordinator *)persistentStoreCoordinatorICloud**方法

```
#define sqlLiteDataBaseName @"My_English_words.sqlite"
#define sqlLiteDataBasePath @"Documents"
#define iCloudEnabledAppID @"LUB2V2L4R3.ru.________.My-English-words"

//************************************************

- (NSManagedObjectContext *)managedObjectContextICloud
{
    if (_managedObjectContextICloud != nil) {
        return _managedObjectContextICloud;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinatorICloud];
    if (coordinator != nil) {
        _managedObjectContextICloud = [[NSManagedObjectContext alloc] init];
        [_managedObjectContextICloud setPersistentStoreCoordinator:coordinator];
    }
    return _managedObjectContextICloud;
}
//************************************************

- (NSManagedObjectModel *)managedObjectModelICloud
{
    if (_managedObjectModelICloud != nil) {
        return _managedObjectModelICloud;
    }
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"My_English_words" withExtension:@"momd"];
    _managedObjectModelICloud = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
    return _managedObjectModelICloud;
}
//************************************************
    - (NSPersistentStoreCoordinator *)persistentStoreCoordinatorICloud
    {
        NSURL *iCloud = [[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil];
        NSLog(@"iCloud access at %@", iCloud);
        NSString *pathString=[[iCloud path] stringByAppendingPathComponent:sqlLiteDataBasePath];
        _persistentStoreCoordinatorICloud = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModelICloud]];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        if([[NSFileManager defaultManager] fileExistsAtPath:pathString] == NO)
        {
            NSLog(@"!Exist");
            NSError *fileSystemError;
            [[NSFileManager defaultManager] createDirectoryAtPath:pathString
                                      withIntermediateDirectories:YES
                                                       attributes:nil
                                                            error:&fileSystemError];
            if(fileSystemError != nil) {
                NSLog(@"Error creating database directory %@", fileSystemError);
            }

        }

        NSString *iCloudData = [[[iCloud path] stringByAppendingPathComponent:sqlLiteDataBasePath] stringByAppendingPathComponent:sqlLiteDataBaseName];
        NSLog(@"iCloudData: %@",iCloudData);
        NSMutableDictionary *options = [NSMutableDictionary dictionary];
        [options setObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];
        [options setObject:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];
        [options setObject:iCloudEnabledAppID            forKey:NSPersistentStoreUbiquitousContentNameKey];
        [options setObject:sqlLiteDataBasePath           forKey:NSPersistentStoreUbiquitousContentURLKey];

        [_persistentStoreCoordinatorICloud lock];

        [_persistentStoreCoordinatorICloud addPersistentStoreWithType:NSSQLiteStoreType
                                                        configuration:nil
                                                                  URL:[NSURL fileURLWithPath:iCloudData]
                                                              options:options
                                                                error:nil];

        [_persistentStoreCoordinatorICloud unlock];

        dispatch_async(dispatch_get_main_queue(), ^{
            NSLog(@"asynchronously added persistent store!");
            [[NSNotificationCenter defaultCenter] postNotificationName:@"RefetchAllDatabaseData" object:self userInfo:nil];
        });
    });    
    return _persistentStoreCoordinatorICloud;
}
//************************************************
    - (NSFetchedResultsController *)fetchedResultsControllerICloud{

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"OriginalWords" inManagedObjectContext:_managedObjectContextICloud];
    [fetchRequest setEntity:entity];

    NSSortDescriptor *sort = [[NSSortDescriptor alloc] initWithKey:@"date" ascending:NO];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:sort]];
    [fetchRequest setFetchBatchSize:1000];

    NSFetchedResultsController *theFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                                                                                  managedObjectContext:_managedObjectContextICloud
                                                                                                    sectionNameKeyPath:nil
                                                                                                             cacheName:nil];

    self.fetchedResultsControllerICloud  = theFetchedResultsController;
    _fetchedResultsControllerICloud.delegate = self;

    return _fetchedResultsControllerICloud;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T05:16:09.030

该错误已得到解决。问题出在

```
[options setObject:sqlLiteDataBasePath forKey:NSPersistentStoreUbiquitousContentURLKey]; 
```

sqlLiteDataBasePath**路径**应该是完整的

```
[[iCloud URLByAppendingPathComponent:sqlLiteDataBasePath] URLByAppendingPathComponent:sqlLiteDataBaseName] 
```

非常愚蠢的错误，但现在我又遇到了一个错误：

```
'This NSPersistentStoreCoordinator has no persistent stores. It cannot perform a save operation'. 
```

我认为这是由于

```
[_managedObjectContextICloud save:&error] 
```

# php - 在 MediaWiki 中禁用用户帐户

> ID：13349142
> 
> 赞同：1
> 
> 时间：2012-11-12T18:13:16.787
> 
> 标签：php, mediawiki, user-accounts

我有一个 wiki 家族，有几千个我需要管理的用户。我们没有一种优雅的方法来禁用任何离开程序的用户，过去我们已经能够更改他们的密码，但这不是未来的持久解决方案。我研究了几种禁用用户帐户的不同方法，但我不确定选择哪个选项。

1.  [CentralAuth](http://www.mediawiki.org/wiki/Extension%3aCentralAuth)扩展 - 为 wiki 家族设置这非常复杂，并且与 wikipedia 核心开发密切相关。我将我的用户迁移到 centralauth 全局用户表中。此设置不考虑我们广泛使用的表前缀。与扩展相关的特殊页面都因此而损坏。

2.  IP Blocking - 我不能使用这个，因为多个用户可能在工作站或计算机实验室从同一个 IP 访问 wiki。

3.  登录挂钩 - 用户登录时可能会使用挂钩 (UserLoginComplete)，然后根据数据库中设置的标志立即将其注销。

4.  共享权限 - 我查看了一些允许全局权限的扩展，但其中许多都不稳定或处于测试阶段，例如：[SharedUserRights](http://www.mediawiki.org/wiki/Extension%3aSharedUserRights)。这里的想法是创建一个“非活动”权限并使用该权限组全局管理帐户。

我对想法持开放态度！希望这一切都有意义，在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T12:24:55.677

如果您想完全锁定它们（禁用登录），请使用[AbortLogin 挂钩](https://www.mediawiki.org/wiki/Manual%3aHooks/AbortLogin)检查黑名单中的用户名。有关示例，请参见[扩展：锁定。](https://www.mediawiki.org/wiki/Extension%3aLockout)

如果您希望他们能够登录但不能编辑，您可以使用[UserGetRights 挂钩](https://www.mediawiki.org/wiki/Manual%3aHooks/UserGetRights)来剥夺他们的编辑权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T21:01:51.387

谢谢大家的建议！我最终使用了全局 ipblocks 表和[Extension:Lockout](https://www.mediawiki.org/wiki/Extension%3aLockout)来阻止用户登录，从而有效地禁用了他们的帐户。我在 LocalSettings.php 文件中为全局用户设置了共享表和共享数据库：

```
 $wgSharedDB = 'up_commonusers';
 $wgSharedTables = array(  'user', 'user_groups', 'account_requests', 'account_credentials', 'ipblocks'); 
```

我计划使用以下列表根据用户名管理被阻止的帐户：Special:BlockList。这个列表的缺点是它没有用户的主页 wiki，所以我在 ipblocks 表中添加了一个“ipb_user_home”列，以便稍后使用这个钩子作为参考：

```
 $wgHooks['BlockIpComplete'][] = 'addHomeWikiData';

 function addHomeWikiData(&$block, &$user){
     $userId = $block->getTarget() instanceof User ? $block->getTarget()->getID() : 0;

     if($userId>0){
        $dbw = wfGetDB(DB_MASTER);
        $row = $dbw->selectRow('user', '*', array('user_id'=>$userId));
        $dbw->begin();
        $dbw->update('ipblocks', array('ipb_user_home'=>$row->user_home), array('ipb_user'=>$userId));
        $dbw->commit();
        return true;
     }
     return false;
} 
```

将来我最终会编写自己的阻止列表表，它将使用此信息，但现在我有我需要的东西。

所以工作流程非常简单。我使用普通的 Special:Block 页面来阻止用户。被阻止的用户被添加到全局 ipblocks 表而不是本地表，因为我们配置了一个 SharedTable，然后它使用钩子添加他们的主页 wiki 数据。Lockout 扩展在登录时使用了不同的钩子，它将检测用户是否被阻止并抛出错误消息。弹出错误，您无法登录。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T21:27:33.863

mediawiki[标准用户权限处理](http://www.mediawiki.org/wiki/Manual%3aUser_rights)有什么问题？只需授予特定组的读/写访问权限，并在不再相关时[从该组中删除用户？](http://www.mediawiki.org/wiki/Manual%3aSetting_user_groups_in_MediaWiki#Revoking_user.27s_privileges)

# c++ - 使用 typedef 包装函数

> ID：13349143
> 
> 赞同：0
> 
> 时间：2012-11-12T18:13:22.043
> 
> 标签：c++, function, pointers, wrapper, typedef

我的一位老师使用这种类型声明：

```
typedef void (*SortFunction)(int a[], int n); 
```

创建一个类型，该类型可以保存指向函数的指针，并且可以用于稍后在程序中调用该函数。

我也知道，要将函数作为参数传递，您必须将函数名括在括号中，并将函数的参数括在函数名之后的括号中，就像这样

```
function someFunction( (anotherfunction)(type arg1, type arg2,...)){
  ...
} 
```

我想知道的是为什么你必须像这样在括号中包装一个函数？这是大多数 c++ 编译器的内置函数，还是我们程序员为了在代码中启用函数作为参数而使用的一种技巧？还有，为什么需要引用typedef语句中的“SortFunction”，为什么你用来利用SortFunction的变量不能只保存函数而不是指向它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:20:52.197

函数参数没有什么特别之处。每当您声明一个函数指针（作为局部变量、全局变量、类成员变量、函数参数、typedef 等）时，它总是这样声明：

```
return_type (*var_name)(T1 param1, T2 param2, /* etc. */ );
//           ^
//           |
// This * is very important! 
```

`var_name`函数指针变量的名称在哪里。需要括号的原因`*var_name`是由于运算符优先级：没有括号，`*`（指示某物是指针）将与函数的返回类型匹配，相反，您会得到类似`int*`（指向`int`）的返回类型平原`int`。

您不能将函数作为参数传递，因为函数不是 C 和 C++ 中的一等对象。传递函数的唯一方法是传递一个指向函数的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T18:52:14.393

*“我也知道要将函数作为参数传递，您必须将函数名称括在括号中......”*您“知道”错误。

为了将函数指针作为参数传递，您不必将名称括在括号中。例如，这将完全正常

```
void foo(int i) {
} 

void bar(void f(int)) {
  f(5);
}

int main() {
  bar();
} 
```

在上面的示例中，函数`bar`接收一个指向函数的指针`foo`作为参数，并`foo`通过该指针调用，`5`作为参数传递。如您所见， `f`参数声明中的函数名*没有*用括号括起来。

在这种情况下，参数的类型`f`实际上是*指向*函数的指针，即使它没有显式声明为指针。在函数参数声明中使用函数类型时，编译器会自动将其隐式“替换”为函数指针类型。

如果要显式使用函数指针类型，则必须声明`bar`为

```
void bar(void (*f)(int)) {
  f(5);
} 
```

在这种情况下，括号中的括号`(*f)`是必要的，以确保`*`将绑定到`f`而不是`void`。没有括号的`void *f(int)`声明将代表“函数返回`void *`”而不是所需的“指向函数返回的指针`void`”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T18:21:04.457

这是语法问题。您首先`typedef`定义了一个类型，它是一个接收`int`和 a的向量`int`并且不返回任何内容的函数 ( `void`)。

类型变量 `SortFunction`在概念上与任何其他变量一样，尽管它指向某个函数。优点是您可以更改它指向的函数和/或动态调用该函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T18:41:09.643

> 我想知道的是为什么你必须像这样在括号中包装一个函数？

因为必须有某种方法来识别指向编译器（或者更确切地说，解析器）的函数指针，而且这种方法看起来和任何方法一样好。在 C++11 领域，您可以改用它：`std::function<void(std::array<int>&)>`代替。

> 这是大多数 c++ 编译器的内置函数，还是我们程序员为了在代码中启用函数作为参数而使用的一种技巧？

函数指针需要一点额外的魔法，如果没有编译器的支持，它们使用起来会非常非常不方便。我也相当肯定，几乎所有程序员的技巧最终都是编译器的功能，这在编程的本质上是有道理的！

> 还有，为什么需要引用typedef语句中的“SortFunction”，为什么你用来利用SortFunction的变量不能只保存函数而不是指向它？

唔。不完全确定你在这里的意思。你的意思是“*为什么这需要一个`typedef`...为什么我不能在我的函数参数中写出整个函数指针原型*”？因为你可以：

```
void foo(void(*funcptr)()) {} 
```

如果您的意思是“*为什么函数指针必须指向函数而不是内联代码*”，那么为此您需要 C++11 和 lambda：

```
#include <iostream>
#include <functional>

void foo(std::function<void(void)> bar) { bar(); }

int main(int argc, char* argv[])
{
    foo([]() { std::cout << "hi!" << std::endl; });
} 
```

（同样，lambdas 需要特殊语法`[](){}`，只是告诉解析器发生了什么）

# matlab - 错误仅在我不使用 parfor 时触发？

> ID：13349145
> 
> 赞同：1
> 
> 时间：2012-11-12T18:13:24.817
> 
> 标签：matlab, bsxfun

在下面的第一个 Matlab 脚本中，当我如图所示运行它时，我没有遇到任何错误，并且代码产生了预期的结果，但是当我取出 matlabpool open 和 matlabpool close 以及将 parfor 循环更改为 for 循环时，我得到以下错误：

```
Running...       ??? Error using ==> mldivide
Matrix is singular to working precision.
Error in ==> NSS_betas at 11
    betas = G\data.y2.';
Error in ==> DElambda at 19
        betas(:,ii) = NSS_betas(P1(:,ii),data); end
Error in ==> Individual_Lambdas at 46
    beta{ii} = DElambda(de,dataList, @OF_NSS); 
```

如果需要，我很乐意发送 CRM_22_12.mat。

为什么只有当我使用常规 for 循环而不是 parfor 循环时才会触发错误？

```
clear all, clc

load Euro_CRM_22_12.mat

matlabpool open 

tic

warnState(1) = warning('error', 'MATLAB:singularMatrix'); 
warnState(2) = warning('error', 'MATLAB:illConditionedMatrix'); 

mats  = 1:50;
mats2 = [2 5 10 30];

% RO: unloop these
de = struct(...
'min', [0;0],...
'max', [50;50],...
'd'  , 2,...
'nP' , 500,...
'nG' , 600,...
'ww' , 0.1,...
'F'  , 0.5,...
'CR' , 0.99,...
'R'  , 0,...
'oneElementfromPm',1);

% RO: initialize beta
beta  = cell(size(rates,1),1);

clc, fprintf('Running...       ');

%for ii = 1:size(rates,1)
parfor ii = 1:size(rates,1)    
% RO: use status indicator for things that take this long
%fprintf('\b\b\b\b\b\b\b%6.2f%%', ii/size(rates,1)*100);

dataList = struct(...
    'yM'   , rates(ii,:),...
    'mats' , mats,...
    'model', @NSS,...
    'mats2', mats2,...
    'y2'   , rates(ii,mats2));

beta{ii} = DElambda(de,dataList, @OF_NSS);

end

toc

matlabpool close 
```

%

```
function [output] = DElambda(de,data,OF)

% RO: also saves time
 %   warning off; %#ok
warning on verbose;

P1 = zeros(de.d,de.nP);
Pu = zeros(de.d,de.nP);

for ii = 1:de.d
    P1(ii,:) = de.min(ii,1)+(de.max(ii,1)-de.min(ii,1))*rand(de.nP,1); end

P1(:,1:de.d) = diag(de.max);
P1(:,de.d+1:2*de.d) = diag(de.min);

%  RO: pre allocate betas
betas = zeros(size(data.y2,2), de.nP);
for ii = 1:de.nP
    betas(:,ii) = NSS_betas(P1(:,ii),data); end

Params = vertcat(betas,P1);

Fbv = NaN(de.nG,1);

% must pass OF as @OF
F = zeros(de.nP,1);
P = zeros(de.nP,1);

for ii = 1:de.nP
    F(ii) = OF(Params(:,ii)',data);
    P(ii) = pen(P1(:,ii),de,F(ii));
    F(ii) = F(ii)+P(ii);
end

[Fbest indice]  = min(F);
xbest = Params(:,indice);

Col = 1:de.nP;

% RO: pre allocate betasPu
betasPu = zeros(size(data.y2,2), de.nP);

% RO: if Fbest hasn't changed for 25 generations, 
% it's not gonna anymore: break off
count = 0;

for g = 1:de.nG

    P0 = P1;
    rowS = randperm(de.nP).';
    colS = randperm(4).';

    % RO: replace circshift for JIT accelleration
%         RS = circshift(rowS,colS(1));
%         R1 = circshift(rowS,colS(2));
%         R2 = circshift(rowS,colS(3));
%         R3 = circshift(rowS,colS(4));

    RS = rowS([end-colS(1)+1:end 1:end-colS(1)]);        
    R1 = rowS([end-colS(2)+1:end 1:end-colS(2)]);
    R2 = rowS([end-colS(3)+1:end 1:end-colS(3)]);
    R3 = rowS([end-colS(4)+1:end 1:end-colS(4)]);

    % mutate
    Pm = P0(:,R1) + de.F*(P0(:,R2)-P0(:,R3));
    if de.R>0, Pm = Pm+de.r*randn(de.d,de.nP); end

    % crossover
    PmElements = rand(de.d,de.nP)<de.CR;        
    if de.oneElementfromPm
        % RO: JIT...
        %Row = unidrnd(de.d,1,de.nP);
        Row = ceil(de.d .* rand(1,de.nP));

        ExtraPmElements = sparse(Row,Col,1,de.d,de.nP);
        PmElements = PmElements|ExtraPmElements;
    end

    P0_Elements = ~PmElements;
    Pu(:,RS) = P0(:,RS).*P0_Elements+PmElements.*Pm;

    % RO: inline NSS_betas, so that this loop can
    % be compiled by the JIT
    mats = data.mats2.';
    yM   = data.y2.';
    nObs = size(data.y2,2);
    one  = ones(nObs,1);

    % RO: version below is faster
%         for ii = 1:de.nP
%             %betasPu(:,ii) = NSS_betas(Pu(:,ii),data);
%             
%             lambda = Pu(:,ii);
%             G =  [one,...
%                  (1-exp(-mats/lambda(1)))./(mats/lambda(1)),...
%                 ((1-exp(-mats/lambda(1)))./(mats/lambda(1)) - exp(-mats/lambda(1))),...
%                 ((1-exp(-mats/lambda(2)))./(mats/lambda(2)) - exp(-mats/lambda(2)))];
%             
%             betasPu(:,ii) = G\yM;
%             
%         end

    aux  = bsxfun(@rdivide, mats, Pu(:).');
    aux2 = exp(-aux);
    aux3 = (1-aux2)./aux;
    for ii = 1:2:2*de.nP            
%             betasPu(:,(ii+1)/2) =[...
%                one,...
%                aux3(:,ii),...
%                aux3(:,ii) - aux2(:,ii),...
%                aux3(:,ii+1) - aux2(:,ii+1)] \ yM;   
        G=[one, aux3(:,ii), aux3(:,ii) - aux2(:,ii),aux3(:,ii+1) - aux2(:,ii+1)];

        try
        betasPu(:,(ii+1)/2) =G\yM;
        catch ME
         CondPen(1,(ii+1)/2)=0;
        end
     end

    ParamsPu = [betasPu;Pu];
    flag = 0;

    mats  = data.mats;
    yM    = data.yM;

    for ii = 1:de.nP

        % RO: inline OF_NSS.m here for JIT accelleration
        %Ftemp = OF(ParamsPu(:,ii).',data);

        beta = ParamsPu(:,ii).';

        %model = data.model;

        yy = zeros(size(yM));
        for jj = 1:size(beta,3)

            % RO: inline for JIT accelleration
            %y(ii,:) = model(beta(:,:,ii),mats);

            betai = beta(:,:,jj);
            gam1  = mats/betai(5);
            gam2  = mats/betai(6);
            aux1  = 1-exp(-gam1);
            aux2  = 1-exp(-gam2);

            % I have a feeling this is the same as G and therefore 
            % this can be done shorter and quicker...
            % something like yy(jj,:) = sum(G,2)
            yy(jj,:)  = ...
                betai(1) + ...
                betai(2)*(aux1./gam1) + ...
                betai(3)*(aux1./gam1+aux1-1) + ...
                betai(4)*(aux2./gam2+aux2-1);

        end

        yy = yy-yM;

        % RO: this whole loop can be replaced...

        % ObjVal = 0;
        % for i = 1:size(yM,1) %dim
        % ObjVal = ObjVal+dot(aux(i,:)',aux(i,:)');
        % %ObjVal = sum(ObjVal);
        % end
        % ObjVal

        % RO ...by this one-liner
        Ftemp = sum(yy(:).^2);

        % RO: inline penalty here as well
        Ptemp = 0;%pen(Pu(:,ii),de,F(ii));

        Ftemp = Ftemp+Ptemp;%+CondPen(1,ii);

        if Ftemp <= F(ii);
            P1(:,ii) = Pu(:,ii);
            F(ii) = Ftemp;
            if Ftemp < Fbest
                Fbest = Ftemp; xbest = ParamsPu(:,ii); 
                flag = 1; 
                count = 0; 
            end

        else
            P1(:,ii) = P0(:,ii);

        end
    end

    if flag
        Fbv(g) = Fbest; end

    % RO: if Fbest hasn't changed for 25 generatios, break off
    count = count + 1;
    if count > 25, break; end

end

output.Fbest = Fbest; 
output.xbest = xbest; 
output.Fbv = Fbv;    

end

% look to inline penalty later (i.e. incoporate into code
function penVal = pen(~,~,~)%pen(beta,pso,vF,data)
penVal = 0;  
end 
```

%

```
function [betas r r2] = NSS_betas(lambda,data)

mats = data.mats2.';        
nObs = size(data.y2,2);

G =  [ones(nObs,1),...
     (1-exp(-mats/lambda(1)))./(mats/lambda(1)),...
    ((1-exp(-mats/lambda(1)))./(mats/lambda(1)) - exp(-mats/lambda(1))),...
    ((1-exp(-mats/lambda(2)))./(mats/lambda(2)) - exp(-mats/lambda(2)))];

betas = G\data.y2.';

% RO: output hardly ever needed, while rank() 
% is very time consuming
if nargout > 1 && ~isnan(G)
    r = rank(G);
    r2 = rcond(G);
end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:19:57.933

这有点神秘，但这是我可以肯定地告诉你的。

```
Error in ==> NSS_betas at 11
    betas = G\data.y2.';
Error in ==> DElambda at 19
        betas(:,ii) = NSS_betas(P1(:,ii),data); end
Error in ==> Individual_Lambdas at 46
    beta{ii} = DElambda(de,dataList, @OF_NSS); 
```

本质上，这意味着 G 矩阵是奇异的，因此没有解。那将是这样的：

```
G =  [ones(nObs,1),...
     (1-exp(-mats/lambda(1)))./(mats/lambda(1)),...
    ((1-exp(-mats/lambda(1)))./(mats/lambda(1)) - exp(-mats/lambda(1))),...
    ((1-exp(-mats/lambda(2)))./(mats/lambda(2)) - exp(-mats/lambda(2)))];

betas = G\data.y2.'; 
```

我会做进一步诊断这是设置错误标志停止。有几种方法可以做到这一点，一种来自[gui](http://blogs.mathworks.com/pick/2008/04/28/matlab-basics-using-dbstop-if-error/)，另一种[通过 command](http://www.mathworks.com/help/matlab/ref/dbstop.html;jsessionid=60e90f04f480e65fcca674072fd4)。看看矩阵是否正确。奇怪的是，有些事情是不对的。追溯错误，你就会发现。

# android - Android：谷歌地图的自定义

> ID：13349154
> 
> 赞同：1
> 
> 时间：2012-11-12T18:13:53.927
> 
> 标签：android, google-maps

如何在我的 Android 应用中自定义 Google 地图的外观？任务是将饱和度值设为 0。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:49:52.223

@Vladimir Zimogorov

您是在谈论 MapView 还是 GoogleMapsAPI-v3？Google Maps API v3 支持“styledMapType”，它使您能够控制 Google Maps 的外观，Mr.hd1 显示了一个示例。同时，我认为 MapView 还没有支持未来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:19:28.157

Zimogorov 先生，也许[在 Stackoverflow 上快速搜索一下](https://stackoverflow.com/questions/8058787/custom-google-maps-styling-for-android)会得到你的答案——未经测试：

```
var pinkParksStyles = [
  {
  featureType: "all",
  stylers: [
  { saturation: 0 }
 ]
},
];

map.setOptions({styles: pinkParksStyles}); 
```

# security - 在 FuelPHP 中清理用户输入

> ID：13349155
> 
> 赞同：2
> 
> 时间：2012-11-12T18:14:00.063
> 
> 标签：security, sql-injection, fuelphp

我对 FuelPHP 框架很陌生。现在我正在为位置列表实现“自动完成”。

我的代码如下所示：

```
public function action_search($term=null){
    $clean_query =  Security::clean($term);
    $data["locations"] = array();
    if ($clean_query != "") {
        $data["locations"] = Model_Orm_Location::query()
                             ->where("title", "like", $clean_query."%")
                             ->get();
    }

    $response = Response::forge(View::forge("location/search", $data));
    $response->set_header("Content-Type","application/json");
    return $response;
} 
```

正如你所看到的，我正在连接一个`LIKE`语句，这让我感觉很糟糕。这段代码对 SQL 注入安全吗？如果是，那是因为：

*   `Security::clean`将消除所有混乱；
*   `where()`在 ORM 查询中会做过滤吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T21:57:49.267

查看[*core/class/security.php*](https://github.com/fuel/core/blob/1.5/develop/classes/security.php#L92)[的源代码中的](https://github.com/fuel/core/blob/1.5/develop/classes/security.php#L92)[实现`Security::clean`](https://github.com/fuel/core/blob/1.5/develop/classes/security.php#L92)*，在您的情况下，应用的过滤器取决于[配置*security.input_filter*，默认情况下为空](https://github.com/fuel/core/blob/1.5/develop/config/config.php#L142)。所以没有应用过滤器。*

 *但是，当您深入研究数据库抽象时，您会看到，当查询在执行之前被[编译时，](https://github.com/fuel/core/blob/1.5/develop/classes/database/query.php#L188)[查询构建器将应用于`quote`](https://github.com/fuel/core/blob/1.5/develop/classes/database/query/builder.php#L126)*where*条件中提供[的值，](https://github.com/fuel/core/blob/1.5/develop/classes/database/query/builder.php#L126)[然后将应用于`escape`字符串值](https://github.com/fuel/core/blob/1.5/develop/classes/database/connection.php#L442)。该`escape`方法的实现取决于 DBMS 连接：

*   [`mysql_real_escape_string`对于*mysql*](https://github.com/fuel/core/blob/1.5/develop/classes/database/mysql/connection.php#L424) ,
*   [`mysqli::real_escape_string`对于*mysqli*](https://github.com/fuel/core/blob/1.5/develop/classes/database/mysqli/connection.php#L441)，和
*   [`PDO::quote`对于 PDO](https://github.com/fuel/core/blob/1.5/develop/classes/database/pdo/connection.php#L318)。

这反映了当今的最佳实践。所以，是的，这对 SQL 注入是安全的。*

# c# - 从异步任务中止当前进程

> ID：13349157
> 
> 赞同：5
> 
> 时间：2012-11-12T18:14:08.190
> 
> 标签：c#, .net, task-parallel-library, windows-error-reporting

`Task`我有一些通过 TPL以异步方式运行的复杂函数，有时可能会以*意想不到*的方式失败。当发生此类故障时，这表明可能导致程序状态损坏的编程错误。因此，我不希望我的程序捕获异常、处理它并“跛行”，我希望我的进程**崩溃**并终止。

我还希望这个东西以这样的方式死掉，即 Windows 错误报告系统将其检测为崩溃，并执行所有有用的调试操作，例如捕获小型转储、将其发送给 Microsoft 等。

我意识到这可能与您对程序在错误情况下应该做什么的看法背道而驰，但问题不在于那个。

我遇到的问题是，因为异常是从任务中引发的，所以它不会立即导致进程崩溃。一段时间后，当垃圾收集器根据自己的智慧决定收集“未观察到的”异常时，它会崩溃。

我希望该过程立即崩溃，因为...

*   来自实际错误的调用堆栈和线程转储是我想在故障转储中收集的
*   进程“一瘸一拐”并在稍后不确定的时间崩溃可能会导致进一步的损害，因为它将在可能损坏的程序状态下工作
*   用户对实际导致崩溃发生的操作感到困惑

所以，简而言之，问题是：

如何使我的进程从`Task`使用 TPL 创建的 async 崩溃，以便 Windows 错误报告能够创建有用的小型转储？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T19:02:11.343

你可以试试这个，或者类似的东西：

```
public static Task FailFastOnException(this Task task) 
{ 
    task.ContinueWith(c => Environment.FailFast(“Task faulted”, c.Exception), 
        TaskContinuationOptions.OnlyOnFaulted | 
        TaskContinuationOptions.ExecuteSynchronously | 
        TaskContinuationOptions.DetachedFromParent); 
    return task; 
} 
```

接着：

```
var t = Task.Factory.StartNew(…).FailFastOnException(); 
```

我们刚刚将它用于“一劳永逸”的任务，如果它们由于某种原因失败，我们希望取消该过程。

摘自 Stephen Toub 撰写的博客文章：http: [//blogs.msdn.com/b/pfxteam/archive/2009/05/31/9674669.aspx](http://blogs.msdn.com/b/pfxteam/archive/2009/05/31/9674669.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-12T15:25:42.887

看一下[`ThrowUnobservedTaskExceptions`](https://docs.microsoft.com/en-us/dotnet/framework/configure-apps/file-schema/runtime/throwunobservedtaskexceptions-element)（`app.config`设置）：

```
<configuration>   
    <runtime>   
        <ThrowUnobservedTaskExceptions enabled="true"/>   
    </runtime>   
</configuration> 
```

> 如果未观察到与 Task 关联的异常，则没有 Wait 操作，未附加父级，并且未读取 System.Threading.Tasks.Task.Exception 属性，则认为未观察到任务异常。
> 
> 在 .NET Framework 4 中，默认情况下，如果对具有未观察到的异常的任务进行垃圾回收，则终结器会引发异常并终止进程。进程的终止由垃圾收集和终结的时间决定。
> 
> 为了让开发人员更轻松地编写基于任务的异步代码，.NET Framework 4.5 更改了这种未观察异常的默认行为。未观察到的异常仍然会引发 UnobservedTaskException 事件，但默认情况下，进程不会终止。相反，无论事件处理程序是否观察到异常，都会在引发事件后忽略异常。
> 
> 在 .NET Framework 4.5 中，您可以使用应用程序配置文件中的元素来启用 .NET Framework 4 引发异常的行为。
> 
> 您还可以通过以下方式之一指定异常行为：
> 
> *   通过设置环境变量 COMPlus_ThrowUnobservedTaskExceptions（设置 COMPlus_ThrowUnobservedTaskExceptions=1）。
>     
>     
> *   通过在 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft.NETFramework 项中设置注册表 DWORD 值 ThrowUnobservedTaskExceptions = 1。

# c# - 无法捕获 System.Reflection.TargetInvocationException（使用 TPL）

> ID：13349160
> 
> 赞同：2
> 
> 时间：2012-11-12T18:14:27.110
> 
> 标签：c#, .net, task-parallel-library, spring.net

我有一个具有以下结构的匿名 TPL 任务：

```
 Task.Factory.StartNew(() =>
        {
            try
            {
                DoStuff();
            }
            catch (OperationCanceledException ex)
            {
                // process cancellation
            }
            catch (Exception ex)
            {
                // process (log) all exceptions
            }
            finally
            {
                // tie up various loose ends
            }
        },
            myCancellationToken, // cancellation token
            TaskCreationOptions.LongRunning, // always create a new thread
            TaskScheduler.Default // default task scheduler
        ); 
```

在 DoStuff() 函数内部，我使用Dropbox 的[Spring.NET 社交扩展](http://www.springframework.net/social-dropbox/)将大文件上传到 Dropbox。出于某种我还不明白的原因，在文件上传期间正在生成一个异常（通过 UploadFileAsync() 方法调用）：

```
(System.Net.Sockets.SocketException (0x80004005): An established connection was aborted by the software in your host machine). 
```

我仍在研究为什么会发生这种异常，但这不是我现在关心的部分。更大的问题是异常最终被 System.Reflection.TargetInvocationException 包装，并且由于某种奇怪的原因，我的 try/catch 块（在我的原始代码片段中）没有捕捉到它。

由于我无法捕捉到异常，它最终使应用程序崩溃。

尽管我认为没有必要，但我什至尝试为 TargetInvocationException 添加显式 catch 块，但它再也不会触发。

所以我的问题是 - 我如何捕获这个异常，为什么它没有被上面代码中显示的构造捕获？

**更新：**

毕竟这个问题似乎与 TPL 无关。我修改了调用以删除对 StartNew() 的调用，以便代码同步执行，但我仍然无法捕获此异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:30:40.003

我使用这段代码来验证 TargetInvocationException 是否可以被捕获：

```
[Test]
public void TaskExceptionTest()
{

    var task = Task.Factory.StartNew(
        () =>
        {
            try
            {
                throw new TargetInvocationException(null);
            }
            catch (Exception e)
            {
                Console.WriteLine("Caught one (inside):" + e.GetType().Name);
            }
        });
    try
    {
        task.Wait();
    }
    catch (AggregateException ae)
    {
        // Assume we know what's going on with this particular exception. 
        // Rethrow anything else. AggregateException.Handle provides 
        // another way to express this. See later example. 
        foreach (var e in ae.InnerExceptions)
        {
            if (e is TargetInvocationException)
            {
                Console.WriteLine("After:" + e.GetType().Name);
            }
            else
            {
                throw;
            }
        }
    }
} 
```

您可以[在此处](http://msdn.microsoft.com/en-us/library/dd997415.aspx)阅读有关异常处理和任务的信息。

# android - WebViewClient 的方法何时被调用？

> ID：13349162
> 
> 赞同：1
> 
> 时间：2012-11-12T18:14:33.990
> 
> 标签：android, webview, webviewclient

我的应用程序中有一个 webview，首先它加载 a.html，单击 a.html 内的按钮，然后加载 b.html，单击 b.html 内的按钮，然后将启动一个活动。简而言之，顺序是**a.html->b.html->启动一个活动**。我的 webView 扩展了 WebViewClient，并覆盖了它的方法如下。

```
private class WebViewHandler extends WebViewClient
    {
        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) 
        {
            Log.d("onPageStarted", "onPageStarted:" + url );
            mProgress.setVisibility(View.VISIBLE);
        }

        @Override
        public void onPageFinished(WebView view, String url) 
        {
            Log.d("onPageFinished", "onPageFinished:" + url );
            mProgress.setVisibility(View.GONE);
        }

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) 
        {
            Log.d("url", "onPageoverloaded the url: "+url);
            String tutorialId = url.substring(url.lastIndexOf("=") + 1);
            MetaioDebug.log("Tutorial Id detected: "+tutorialId);
            if (url.startsWith("metaio://"))
            {
                if (tutorialId != null)
                {
                    MetaioDebug.log("Native code tutorial to be loaded #"+tutorialId);
                    if (tutorialId.equals("1"))
                    {
                        Intent intent = new Intent(getApplicationContext(), Tutorial1.class);
                        startActivity(intent);
                    }

                return true;
            }
    } 
```

问题是`onPageStarted()`它只在 a.html 开始加载时被调用，但在 b.html 开始加载时不会被调用。 `shouldOverrideUrlLoading(WebView view, String url)`仅当我单击 b.html 中的按钮而不是 a.html 中的按钮时才调用。

我很困惑什么时候应该调用这三种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:32:17.553

我想`onPageFinished()`大概应该回归`false`。

从[shouldOverrideUrlLoading () 的文档中](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldOverrideUrlLoading%28android.webkit.WebView,%20java.lang.String%29)：

`If WebViewClient is provided, return true means the host application handles the url, while return false means the current WebView handles the url.`

不知道为什么它不起作用`a.html`，但它可能与您的返回值有关，因为系统将在某个时候确定它是否会自行处理前进的事情。

至于您的`onPageStarted`问题，我认为您正在看到预期的行为。[onPageStarted() 的文档：](http://developer.android.com/reference/android/webkit/WebViewClient.html#onPageStarted%28android.webkit.WebView,%20java.lang.String,%20android.graphics.Bitmap%29)

`Notify the host application that a page has started loading. This method is called once for each main frame load so a page with iframes or framesets will call onPageStarted one time for the main frame. This also means that onPageStarted will not be called when the contents of an embedded frame changes, i.e. clicking a link whose target is an iframe.`

我认为您的 WebView 认为自己处于“完成”状态，因为它已经完成了您已经要求它从 a.html 执行的原始渲染。

一种解决方法可能是使用 b.html 创建和扩展一个新的 WebView 以保证`onPageFinished()`被调用。我认为这取决于您如何将 b.html 加载到 webview 中。

您是否暗示您`onPageFinished()`在加载后看到调用`b.html`，而不是`onPageStarted()`？或者两者都没有被调用？

**根据评论添加：**

尝试`b.html`以另一种方式加载，以便 WebView 了解它正在加载一个全新的资源：

让其`href`当前值`b.html`指向一个 JavaScript 方法，该方法回调一个 JavaScript 接口对象，该对象在 Java 中调用类似这样的东西：

`webview.loadURL("file:///b.html"); //or whatever the file location of b.html is.`

我认为这会让您的 WebView 认为它正在加载新资源，因此同时调用`onPageStarted()`and `onPageFinished()`。

# algorithm - 最小距离

> ID：13349164
> 
> 赞同：3
> 
> 时间：2012-11-12T18:14:45.580
> 
> 标签：algorithm

有一组 9 个学生和 3 个学校 每个学校最多可以分配 3 个学生。每个学校和学生都有自己的坐标。现在我们必须以这样的方式分配学生，即所有学生到学校的距离总和应该是最小的。

我在一次采访中被问到这个问题。有人可以为此建议一个算法吗？

最初我尝试了贪婪的方法，但这不起作用。然后我尝试应用动态编程方法，但无法提出最佳的子结构。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T18:25:48.130

每所学校有3个名额，3所学校都有9个名额。你应该找到 9 个地方和 9 个学生之间的最佳匹配。

这个分配问题可以用[匈牙利算法](http://en.wikipedia.org/wiki/Hungarian_algorithm)来解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T18:44:20.707

由于问题规模足够小，如何进行穷举搜索？

*   第一所学校从 9 名学生中选择 3 名开始。
*   第二所学校从剩下的 6 名学生中选择 3 名。
*   最后一所学校被剩下的 3 名学生困住了。

所以`(9 choose 3) * (6 choose 3) = 1680`

# java - 在除 8 之外的所有 API 中打开默认的谷歌地图崩溃程序

> ID：13349166
> 
> 赞同：0
> 
> 时间：2012-11-12T18:14:49.683
> 
> 标签：java, android, google-maps, android-emulator

我不确定我做错了什么。以下代码我在一个按钮的点击监听器中使用，它在 API8 中运行良好，现在我正在检查兼容性，它在其他任何地方都崩溃了。我究竟做错了什么？

```
startActivity(getPackageManager().getLaunchIntentForPackage("com.google.android.apps.maps")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:12:39.020

我弄清楚了这个问题。与 AVD 管理器一起使用的模拟器必须是 google API 版本而不是 android 版本。后者没有安装地图应用程序。

# .net - .NET 不反序列化 XSD maxOccurs="unbounded" 元素

> ID：13349168
> 
> 赞同：1
> 
> 时间：2012-11-12T18:14:59.137
> 
> 标签：.net, serialization, xsd, wsdl

在尝试使用声明类型数组的 WSDL 时，.NET 无法反序列化响应消息。

**WSDL**

[https://docs.google.com/open?id=0B5Se_xHASR2LS0EtdmxfNGZWMTg](https://docs.google.com/open?id=0B5Se_xHASR2LS0EtdmxfNGZWMTg)

**自动生成的客户端代理代码**

Visual Studio 为此服务操作响应消息创建以下定义。

```
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.ServiceModel", "4.0.0.0")]
[System.ComponentModel.EditorBrowsableAttribute(System.ComponentModel.EditorBrowsableState.Advanced)]
[System.ServiceModel.MessageContractAttribute(WrapperName="GetServiceRequestSummariesMatchingProfileResponse", WrapperNamespace="http://www.acme.com/webservices/connectors/731/servicerequest/message" +
    "types", IsWrapped=true)]
public partial class GetServiceRequestSummariesMatchingProfileResponse {

    [System.ServiceModel.MessageBodyMemberAttribute(Namespace="http://www.acme.com/schema/uniform/731/servicerequest/sr/srtypes", Order=0)]
    [System.Xml.Serialization.XmlElementAttribute("ServiceRequestSummary")]
    public ServiceRequestSummaryType[] ServiceRequestSummary;

    public GetServiceRequestSummariesMatchingProfileResponse() {
    }

    public GetServiceRequestSummariesMatchingProfileResponse(ServiceRequestSummaryType[] ServiceRequestSummary) {
        this.ServiceRequestSummary = ServiceRequestSummary;
    }
} 
```

这不起作用，并且序列化程序无法反序列化 ServiceRequestSummaryType[] 中的 ServiceRequestSummaryType 对象，因此无论响应是否包含它们，它始终为空。

**响应 SOAP 消息**

```
 <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <s:Header xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"></s:Header>
    <soap:Body>
        <GetServiceRequestSummariesMatchingProfileResponse xmlns="http://www.acme.com/webservices/connectors/731/servicerequest/messagetypes">
            <ServiceRequestSummary xmlns="http://www.acme.com/schema/uniform/731/servicerequest/sr/srtypes">
                <ServiceRequestIdentification>
                    <ServiceRequestTechnicalKey>MD2P24BENM001</ServiceRequestTechnicalKey>
                    <ReferenceValue>12/00056/SR</ReferenceValue>
                    <AlternativeReferences>
                        <AlternativeReference xmlns="http://www.acme.com/schema/uniform/72b/common/uniformtypes">
                            <ReferenceValue>ssa</ReferenceValue>
                            <ReferenceType>FIRM</ReferenceType>
                        </AlternativeReference>
                    </AlternativeReferences>
                </ServiceRequestIdentification>
                <SiteLocation>
                    <Address>                       </Address>
                    <UPRN></UPRN>
                </SiteLocation>
                <NatureOfComplaint>Test</NatureOfComplaint>
                <AdministrationDetails>
                    <RequestTypeCode>DFOUL</RequestTypeCode>
                    <RequestTypeText>Dog fouling</RequestTypeText>
                    <RequestKindCode>D</RequestKindCode>
                    <RequestKindText>Dog Request</RequestKindText>
                    <AllocatedToCode>EHCALL</AllocatedToCode>
                    <AllocatedToText></AllocatedToText>
                    <TimeAllocated></TimeAllocated>
                    <AllocationHistory>
                        <AllocationHistoryDetail>
                            <OfficerCode>EHCALL</OfficerCode>
                            <OfficerName>EH Call Centre</OfficerName>
                            <AllocationDateTime>2012</AllocationDateTime>
                        </AllocationHistoryDetail>
                    </AllocationHistory>
                    <HowReceivedCode>TELE</HowReceivedCode>
                    <HowReceivedText>telephone</HowReceivedText>
                    <TimeReceived>2012-11-02T13:40:00</TimeReceived>
                    <StatusCode>1_NEW</StatusCode>
                    <StatusText>1_NEW - New Request</StatusText>
                </AdministrationDetails>
                <SubjectDetails>
                    <SubjectContactDetails></SubjectContactDetails>
                </SubjectDetails>
                <RequestType>DOG</RequestType>
                <RequestKindCode>D</RequestKindCode>
                <RequestKindText>Dog Request</RequestKindText>
            </ServiceRequestSummary>
        </GetServiceRequestSummariesMatchingProfileResponse>
        <TransactionReport xmlns="">
            <TransactionComplete>True</TransactionComplete>
            <TransactionSuccess>True</TransactionSuccess>
            <TransactionMessages></TransactionMessages>
        </TransactionReport>
    </soap:Body>
</soap:Envelope> 
```

然而，在网上搜索之后，我注意到了类似的东西，但没有任何解释。如果我更改自动生成的代码以包含命名空间；

如此执着

```
[System.Xml.Serialization.XmlElementAttribute("ServiceRequestSummary")] 
```

我们有

```
[System.Xml.Serialization.XmlElementAttribute("ServiceRequestSummary", Namespace = "http://www.acme.com/schema/uniform/731/servicerequest/sr/srtypes")] 
```

然后它将起作用。我不明白 WSDL 有什么问题或导致反序列化失败的响应消息，毕竟 VS 已经从 WSDL 自动生成其客户端代理代码而没有任何错误。

更改自动生成代码不是一个可行的解决方案，如果您能发现可能导致这支雪茄的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T18:47:15.423

根据 XMLSpy，此 WSDL 无效：

```
File C:\Temp\Untitled1.wsdl is not valid.
    Invalid XML schema: ''s4:ServiceRequestIdentificationType' must refer to an existing simple or complex type.'
        Error location: wsdl:definitions / wsdl:types / s:schema / s:complexType / s:sequence / s:element / @type 
```

你是如何生成代理的？SVCUTIL？如果是这样，那么您需要在命令行上提供*所有*XML Schema 文件的路径。

# cvs - doxygen 的 $Id: ... $ 是什么意思

> ID：13349171
> 
> 赞同：6
> 
> 时间：2012-11-12T18:15:19.433
> 
> 标签：cvs, doxygen, rcs

我正在查看一个 doxygen 代码示例并看到以下内容。

```
/**  
  @file test.h  
  @brief Define helper functions  
  $Id: test.h,v 1.10 2012/10/10 10:10:10 author Exp $  
*/ 
```

谁能解释 $Id: 在这里做什么？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-12T18:25:33.883

这根本不是一条强力线。这是一个源代码控制命令字符，告诉它替换版本信息，以便您可以在源代码中看到您正在使用的提交版本。见[http://www.badgertronics.com/writings/cvs/keywords.html](http://www.badgertronics.com/writings/cvs/keywords.html)

# c++ - 结构中的字符数组删除了第一个字母

> ID：13349172
> 
> 赞同：1
> 
> 时间：2012-11-12T18:15:23.863
> 
> 标签：c++, arrays, char

我刚刚开始学习 C++，在整个指针/数组章节中，我试图编写一些代码来掌握这些概念。我想要我的代码做的是：1）询问一些学生，2）询问每个学生的名字，3）在结构中为这个学生分配一个 ID 和名字，4）打印学生 ID 和名字进行验证。

问题如下。例如，假设我选择输入 3 个学生并输入以下名称：

```
JOHN
GEORGE
NICK 
```

程序作为学生 ID/姓名打印回来的内容将是：

```
0 JOHN
1 EORGE
2 ICK 
```

它似乎削减了所有名字的第一个字母，但第一个。

```
#include <iostream>
using namespace std;

struct STUDENT
{
char chName[256];
int nID;
};

int main(){

//array tests

int i=0;
int nLoops=0;                   //number entered by user
STUDENT *pnStudents;            //pointer to our student array

cout << "Enter number of students: ";
cin >> nLoops;

pnStudents = new STUDENT[nLoops];

for (i=0 ; i < nLoops ; i++)
{
    cout << endl << "Full Name of Student " << i <<": ";
    cin.ignore();
    cin.getline(pnStudents[i].chName,255);

    pnStudents[i].nID=i;
}

for (i=0 ; i < nLoops ; i++)
{
    cout << pnStudents[i].nID << " " << *pnStudents[i].chName << endl;
}

system("pause");

return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T18:20:37.263

**[`cin.ignore();`](http://www.cplusplus.com/reference/iostream/istream/ignore/)**没有参数从 中丢弃`cin`大小为 1 的流。

> **istream& 忽略 (streamsize n = 1, int delim = EOF);**
> 
> 提取和丢弃字符 从输入序列中提取字符并丢弃它们。

**删除它。**这似乎是您的代码中唯一可以吃掉一个字符的东西。此外，如果您需要使用忽略，请使用以下内容：

```
cin.ignore(256,' ');
            ^   ^   (number of char, delim) 
```

如果您试图忽略作为 输入的字符`nLoops`，则无需在每次迭代中都这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:26:00.810

```
for (i=0 ; i < nLoops ; i++)
{
    cout << endl << "Full Name of Student " << i <<": ";
    cin.ignore();
    cin.getline(pnStudents[i].chName,255);

    pnStudents[i].nID=i;
} 
```

在循环的第一次迭代中，提取通过调用`ignore()`留在流中的换行符。，另一方面，丢弃尾随，因此每次后续迭代都会等待并丢弃输入的第一个字符。`cin >> nLoops;``istream::getline()``'\n'`

`cin.ignore()`在循环之前移动。

# magento - 在 Magento 中将产品从一个站点导入到另一个站点

> ID：13349173
> 
> 赞同：1
> 
> 时间：2012-11-12T18:15:33.877
> 
> 标签：magento

我目前托管我的 Magento 网站，我想制作另一个网站，而不在 newsite 中添加任何新产品。我想将旧网站上的产品导入新网站。

我尝试将旧数据库转储到新数据库，但没有帮助。有没有其他可能的方法？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:05:41.357

您可以在旧站点上重新创建属性集和类别并使用导出产品

```
System > Import/Export > Dataflow - Profiles 
```

但是，这并不能解决分组或可配置产品或产品选项（如果有）的问题。如果是这种情况，您可能需要升级现有安装（或确保它与新网站的版本相同），然后复制数据库。

# .net - 等效于 CastleWindsor container.Release() 方法的 StructureMap

> ID：13349175
> 
> 赞同：0
> 
> 时间：2012-11-12T18:15:39.320
> 
> 标签：.net, dependency-injection, castle-windsor, structuremap

我正在尝试手动释放由 StructureMap 创建的实例。在 CastleWindsor 中，可以这样做：

```
private readonly IWindsorContainer _container;

public void GetInstanceThenRelease(Type myType)
{
    var instance = (myType)this._container.Resolve(myType);
    this._container.Release(instance);
} 
```

我将如何在 StructureMap 中实现这一点？

# c++ - c++ 外部类接口和模板

> ID：13349180
> 
> 赞同：4
> 
> 时间：2012-11-12T18:16:03.703
> 
> 标签：c++, namespaces

在 C++ 中，如果使用函数的第一个参数是在与我们的函数相同的命名空间中声明的类型的对象，我们可以省略命名空间限定。但是，我注意到这不适用于模板函数（如*std::get*）。我写了一个简单的例子来确认这确实与模板有关：

```
namespace ns {

    struct S {};

    void sFoo(const S&) {}
    template<typename T> void sBar(const S&) {}
}

void foo()
{
    ns::S s;
    sFoo(s); // ok
    sBar<int>(s); // error: ‘sBar’ was not declared in this scope
    ns::sBar<int>(s); // ok
} 
```

我尝试了显式实例化，但它没有改变任何东西（即使它会改变，它也比仅仅使用*using*更糟糕）。

那么，为什么我不能在不指定其命名空间的情况下调用模板化函数（并且假设既不*使用*也不*使用命名空间*指令）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:21:54.627

`sBar`不是函数，而是*函数模板*。依赖于参数的查找仅适用于*函数*名称。确实`sBar<int>`是一个函数，但是如果你不知道它的正确名称，你就不能实例化模板！

不相关的是，如果可以推断出模板参数，那么 ADL 确实有效：

```
namespace ns
{
    template <typename T> void sZip(T &) { }
}

void foo()
{
    ns::S s;
    sZip(s);  // OK, deduces T = ns::S
} 
```

C++ 的一般“最佳实践”是仅在可以推导出参数的情况下制作函数模板，并且永远不要明确指定参数。（此规则的例外情况是`std::forward`各种`make_*`需要一个强制参数来表示所需结果类型的函数。）

# python - 使用 scipy.signal.spectral.lombscargle 进行周期发现

> ID：13349181
> 
> 赞同：5
> 
> 时间：2012-11-12T18:16:04.143
> 
> 标签：python, numpy, scipy, signal-processing, scientific-computing

新的 Scipy v0.11 提供了一个光谱分析包。不幸的是，文档很少，可用的示例也不多。

作为一个小例子，我正在尝试对正弦波进行周期发现。不幸的是，它预测的是一个时期`1`而不是预期的`2pi`. 有任何想法吗？

```
# imports the numerical array and scientific computing packages
import numpy as np
import scipy as sp
from scipy.signal import spectral

# generates 100 evenly spaced points between 1 and 1000
time = np.linspace(1, 1000, 100)

# computes the sine value of each of those points
mags = np.sin(time)

# scales the sine values so that the mean is 0 and the variance is 1 (the documentation specifies that this must be done)
scaled_mags = (mags-mags.mean())/mags.std()

# generates 1000 frequencies between 0.01 and 1
freqs = np.linspace(0.01, 1, 1000)

# computes the Lomb Scargle Periodogram of the time and scaled magnitudes using each frequency as a guess
periodogram = spectral.lombscargle(time, scaled_mags, freqs)

# returns the inverse of the frequence (i.e. the period) of the largest periodogram value
1/freqs[np.argmax(periodogram)] 
```

这将返回`1`而不是预期的`2pi ~= 1/0.6366`. 有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T18:45:19.940

请注意，最后一个参数`spectral.lombscargle`是根据文档字符串的角[频率](https://github.com/scipy/scipy/blob/master/scipy/signal/spectral.pyx)：

```
Parameters
----------
x : array_like
Sample times.
y : array_like
Measurement values.
freqs : array_like
Angular frequencies for output periodogram. 
```

# iphone - 尝试使用 Twitter ACAccount 时的奇怪行为

> ID：13349187
> 
> 赞同：19
> 
> 时间：2012-11-12T18:16:16.653
> 
> 标签：iphone, ios, ios6, core-services, social-framework

我一直在使用新的 Social.Framework，尤其是 SLRequest，它们都可以在 iOS 6 及更高版本上使用。问题是，我在尝试发布此类请求时遇到的崩溃让我感到非常惊讶。

我一直在使用 Facebook 和 Twitter 帐户崩溃，这就是为什么我知道这与其中一个帐户的任何特定问题无关。它必须与我以这种方式得到的 ACAccount 对象相关：

```
if (SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"6.0")) {
    //iOS 6
    if (_twitterEnabled) {
        if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter]) {
            //Set up account
            [accountStore requestAccessToAccountsWithType:accountTypeTwitter options:nil completion:^(BOOL granted, NSError *error) {
                if (granted && !error) {
                    //Get account and get ready to post.
                    NSArray *arrayOfAccounts = [accountStore accountsWithAccountType:accountTypeTwitter];
                    if ([arrayOfAccounts count] > 0) {
                        _twitterAccount = [arrayOfAccounts lastObject];
                    }
                }
            }];
        }
    }
    if (!_facebookEnabled) {
        ACAccountType *accountTypeFacebook = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
        if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {
            NSArray *permissions = @[@"user_about_me",@"user_likes",@"email"];
            NSMutableDictionary *options = [NSMutableDictionary dictionaryWithObjectsAndKeys:kFacebookAppIDString, ACFacebookAppIdKey, permissions, ACFacebookPermissionsKey, ACFacebookAudienceFriends, ACFacebookAudienceKey, nil];
            [accountStore requestAccessToAccountsWithType:accountTypeFacebook options:options completion:^(BOOL granted, NSError *error) {
                if (granted && !error) {
                    [options setObject:@[@"publish_stream",@"publish_actions"] forKey:ACFacebookPermissionsKey];
                    [accountStore requestAccessToAccountsWithType:accountTypeFacebook options:options completion:^(BOOL granted, NSError *error) {
                        if (granted && !error) {
                            NSArray *arrayOfAccounts = [accountStore accountsWithAccountType:accountTypeFacebook];
                            if ([arrayOfAccounts count] > 0) {
                                _fbAccount = [arrayOfAccounts lastObject];
                            }

                        }
                    }];
                }
            }];
        }
    }
} 
```

_twitterAccount 和 _fbAccount 都是 ACAccount 对象，当我从 Account Store 检索时，我将相关帐户存储在其中。

后来我尝试使用此类对象时出现了问题（为简洁起见，我将发布 twitter 方法）：

```
 NSDictionary *twitterMsg = @{@"status" : message};
        if (SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"6.0")) {
            SLRequest *postRequest = [SLRequest requestForServiceType:SLServiceTypeTwitter requestMethod:SLRequestMethodPOST URL:kTwitterUpdateStatusURL parameters:twitterMsg];
            [postRequest setAccount:_twitterAccount];
            [postRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
                NSLog(@"Twitter HTTP response: %d", [urlResponse statusCode]);
            }];
        } 
```

在 postRequest 上调用 setAccount: 时，我收到一条异常消息：“此请求的帐户类型无效”，这显然是错误的。我还尝试调试代码，奇怪的是 _twitterAccount 上的 accountType 在被发送到 ACAccount 对象之前被设置为 nil。更奇怪的是，如果我把

```
NSLog(@"%@",_twitterAccount); 
```

就在下面

```
_twitterAccount = [arrayOfAccounts lastObject] 
```

在代码的第一部分，它没有问题。

我已经查看了我的代码，我认为我没有做错任何事情，所以我认为这可能是框架上的错误？看起来 ACAccountType 是在不应该发布的时候发布的，但我想检查你们中的任何人是否可以看到我的代码有什么问题导致它和/或找到问题的解释，我无法自己解决。

谢谢

**更新**

似乎其他一些人也有同样的问题，我接受其中一个答案，因为它实际上解决了这个问题，但我期待任何能找到该问题解释的人。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-22T07:16:01.737

在通过以下两个检索到的帐户上使用 SLRequest 时，我也收到“此请求的帐户类型无效”

```
ACAccountStore *account_store = [[ACAccountStore alloc] init];
ACAccountType *account_type_twitter = [account_store accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
// A.
NSArray *accounts = [account_store accountsWithAccountType:account_type_twitter]; 
// B.
NSString *account_id = @"id from doing account.identifier on one of the above";
ACAccount *account = [account_store accountWithIdentifier:account_id]; 
```

帐户上的 NSLog 已按预期填充所有内容，但类型设置为 null。猜测这是 Apple SDK 的一个错误。执行以下操作为我修复了帐户，以便我可以将它们与 SLRequest 一起使用：

```
ACAccountType *account_type_twitter = [account_store accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
account.accountType = account_type_twitter; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-01-11T20:15:16.577

您必须保留 ACAccountStore：

```
@property (nonatomic, strong) ACAccountStore *accountStore; 
```

ACAccount 文档从未明确声明您必须保留 ACAccountStore，但它确实声明了

> “要从 Accounts 数据库创建和检索帐户，您必须创建一个 ACAccountStore 对象。每个 ACAccount 对象都属于一个 ACAccountStore 对象。”

你打电话时：

```
NSArray *accounts = [accountStore accountsWithAccountType:accountType] 
```

数组中的那些 accountStore 对象不一定具有从数据库中获取的所有属性。某些属性（如 accountType）仅在需要时从 Accounts 数据库中检索。这导致了您在登录帐户时看到的奇怪行为，并且一切都神奇地起作用了。当您记录帐户时，ACAccountStore 对象仍在内存中，并且记录导致检索 AccountType 属性。那时，AccountType 保留在 ACAccount 中，即使在 ACAccountStore 发布之后，一切都可以正常工作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-17T06:47:05.890

您是否保留了用于获取 arraryOfAccounts 的 ACAccountStore？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T20:42:30.860

我使用这段代码没有问题。（仅限推特）

```
ACAccountStore *accountStore = [[ACAccountStore alloc] init];
ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
[accountStore requestAccessToAccountsWithType:accountType options:nil completion:^(BOOL granted, NSError *error) {
    if (!granted) {
        NSLog(@"Access denied.");
    }
    else {
        NSArray *accounts = [accountStore accountsWithAccountType:accountType];
        if (accounts.count > 0) {
            twitterAccount = [accounts objectAtIndex:0];
        }
    }
}]; 
```

我想一些关于 accountStore 初始化问题的事情？

Twitter 的官方参考资料在这里。 [Twitter：使用 TWRequest 的 API 请求](https://dev.twitter.com/docs/ios/making-api-requests-twrequest)

# svn - 设置 SVN 服务器的根目录以从 Tortoise SVN 中查看

> ID：13349188
> 
> 赞同：1
> 
> 时间：2012-11-12T18:16:17.323
> 
> 标签：svn, tortoisesvn, visualsvn-server

我是 SVN 服务器端的新手（已经在客户端使用了一段时间）。我已经完成了所有设置，我可以提交和更新没有问题，但我有一个问题。有没有办法让 SVN 服务器的“根”可以从 Tortoise SVN 中查看？我的意思是当你进入 Repo-Browse 时，有没有办法一次提取所有的存储库？我想一种快速的方法是拥有一个存储库并将所有项目放在那里，但这不会弄乱版本控制吗？任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:57:37.373

> 有没有办法让 SVN 服务器的“根”可以从 Tortoise SVN 中查看？

不，至少在 1.8 之前（这是计划中的功能）

> 我想一种快速的方法是拥有一个存储库并将所有项目放在那里，但这不会弄乱版本控制吗？

是的，它会 - 因为修订是存储库范围的，您将在所有项目之间共享一行编号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-19T07:31:41.383

在设置 SVN 之前你需要： 1.Install Putty [http://www.putty.org/](http://www.putty.org/) 2.Creat Droplet on Digital Ocean 3.Install Apache,Install PHP,Install phpMyAdmin

之后按照以下链接中的步骤操作：

[https://progtec.wordpress.com/2015/10/18/how-to-setup-svn-server/](https://progtec.wordpress.com/2015/10/18/how-to-setup-svn-server/)

# java - Android：使用计时器每 30 分钟获取一次位置，窗口为 1 分钟

> ID：13349191
> 
> 赞同：0
> 
> 时间：2012-11-12T18:16:23.813
> 
> 标签：java, android, timer, geolocation

我正在研究我的顶点，我们正在开发一个应用程序，它可以获取用户位置并将其绘制在地图上。我们试图获取每个 x 变量的位置（x 是用户从 5、10、15、30 和 60 分钟的选择中输入的设置）并将最佳位置发送到数据库以供以后共享。应用程序的基本流程是，每次用户打开应用程序时，他们都会看到一张地图，并尽快显示他们当前的位置。然后将该位置发送到数据库以与其他人共享。在他们获得位置后，将启动一个计时器，每隔一段时间再次获得他们的位置，假设他们想要 30 分钟，然后将该位置发送到数据库并再次启动计时器。每次用户访问应用程序时，计时器都需要重置，因为他们将在启动应用程序时立即获取其位置。我遇到的问题是在后台创建一个计时器，该计时器将在不在应用程序中发送到数据库时获取他们的位置。我还想实现这样的逻辑，即在我们获得他们的位置后，我们会在一小段时间内停止侦听更新。

我目前了解 requestLocationUpdates() 方法并已实现它，以便用户访问应用程序时，他们从 GPS 和 NETWORK 获得位置，它的最短时间为 60 秒，距离为 100 英尺或 30.48 米。这也会在用户暂停应用程序时停止，并在用户导航回应用程序时启动。我注意到，尽管我们已经收到了更新，但我们仍然在请求更新。这让我相信 requestLocationUpdates 在侦听更新更改时会继续使用电池寿命。

如何创建此逻辑以在收到位置后停止更新，但在特定时间后开始侦听位置？读取 requestLocationUpdates 的当前 android 方法，minTime 和 minDistance 只是“提示”，但它不服从它们。我需要 locationUpdater 来遵守设置的参数。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    /** Session Creation and Checker */
    session = new SessionManagement(getApplicationContext());
    // Check if the user is logged in
    session.checkLogin();

    /** Setup basic session and content view */
    // Set the Content View
    setContentView(R.layout.activity_main);
    /** Start of the MapView Elements */
    // extract MapView from layout
    mapView = (MapView) findViewById(R.id.mapview);
    // Set a mapController
    mapController = mapView.getController();
    // set the map to have built in zoom controls
    mapView.setBuiltInZoomControls(true);

    /** Getting the device location */
    locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
    geoCoder = new Geocoder(this);

    isEnabled = locationManager
            .isProviderEnabled(LocationManager.GPS_PROVIDER);
    // Check if the GPS is enabled
    if (!isEnabled) {
        alert.showAlertDialog(MainActivity.this, 12);
    }

    // Retrieve a list of location providers that have fine accuracy, no
    // monetary cost, etc
    Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_HIGH);
    criteria.setAltitudeRequired(false);
    criteria.setBearingRequired(false);
    criteria.setCostAllowed(true);
    criteria.setPowerRequirement(Criteria.POWER_LOW);
    provider = locationManager.getBestProvider(criteria, true);

    // If no suitable provider is found, null is returned.
    if (provider != null) {
        provider = locationManager.getBestProvider(criteria, false);
        BCT = (session.getBCT() * 60000);
        // Initialize with last known location
        locationManager.requestLocationUpdates(provider, BCT, 31,
                locationListener);

        // Check the map settings
        if (session.isSatellite()) {
            SatelliteChecked = true;
            mapView.setSatellite(true);
        }
        if (session.isTraffic()) {
            TrafficChecked = true;
            mapView.setTraffic(true);
        }
    } else {
        alert.showAlertDialog(getApplicationContext(), 15);
        locationManager.removeUpdates(locationListener);
    }

}

// Define a listener that responds to location updates
LocationListener locationListener = new LocationListener() {
    public void onLocationChanged(Location location) {
        // Called when a new location is found by the network location
        // provider.

            Toast.makeText(getApplicationContext(), location.toString(),
                    Toast.LENGTH_LONG).show();

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {

    }

    public void onProviderEnabled(String provider) {
        Toast.makeText(getApplicationContext(), provider.toUpperCase() + " enabled.", Toast.LENGTH_SHORT).show();
    }

    public void onProviderDisabled(String provider) {
        Toast.makeText(getApplicationContext(), provider.toUpperCase() + " disabled.", Toast.LENGTH_SHORT).show();
    }
};
@Override
protected void onResume() {
    super.onResume();
    BCT = (session.getBCT() * 60000);
    // when our activity resumes, we want to register for location updates
    locationManager.requestLocationUpdates(
            provider, BCT, 31, locationListener);
}

@Override
protected void onPause() {
    super.onPause();
    // when our activity pauses, we want to remove listening for location
    // updates
    locationManager.removeUpdates(locationListener);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:01:48.190

这是使用[警报](http://developer.android.com/reference/android/app/AlarmManager.html)和[IntentService](http://developer.android.com/reference/android/app/IntentService.html)的完美情况。启动 IntentService 并将重复警报设置为用户所需的间隔，并让 IntentService 处理位置更新。

这一切都是在后台为您完成的，您不需要运行任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:24:19.220

您需要的是计时器的**后台线程**。

你可以试试：

1.  使用警报管理器每隔 x 分钟安排一次。看到这个问题的答案：[Android：如何使用 AlarmManager](https://stackoverflow.com/questions/1082437/android-alarmmanager)
2.  `postDelayed`在 x 分钟内使用 AsyncTask 或 Handler ，如[http://developer.android.com/reference/android/os/Handler.html#postDelayed(java.lang.Runnable](http://developer.android.com/reference/android/os/Handler.html#postDelayed(java.lang.Runnable) , long)

因为这是你的顶点项目，我不想给出太多代码。但我可以更详细地解释后台线程：

您现在的计时全部在前台完成，这意味着除非打开应用程序，否则计时器不会滴答作响。您需要做的是让您的计时器在后台线程中。这是一个由操作系统管理的线程，即使您的应用程序没有运行，它仍在运行。由于您是为项目而不是商业项目执行此操作，因此我建议您使用 Handler 方法。像这样：

```
//make instance variable of the time the user chose, say... delayInMinutes
int delayInMinutes;
...
//then whenever you want to start the timer...
final Runnable updateLocation = new Runnable() {
    public void run() {
        //
        ... do your update location here
        //
    }
};

handler.postDelayed(updateLocation, delayInMinutes * 60 * 1000); 
```

那应该可以

# jquery - 链式 jQuery 承诺

> ID：13349192
> 
> 赞同：3
> 
> 时间：2012-11-12T18:16:26.513
> 
> 标签：jquery, asynchronous, eval, promise

我试图链接承诺，而不是管道，只是链接。

例如，我有这个方法：

```
var execute = function(x){
   // this could be an AJAX call
   var d= $.Deferred();

    console.log('Begin ' + x);

    setTimeout(function(){
       console.log('End ' + x);            
       d.resolve();
    },500);

    return d;
}; 
```

我想多次执行这个方法，但是一个接一个。我创建了一个比 using 更有效的方法`eval`，但我对 using 不太满意`eval`：

```
var executeTimes = function(r){
    var s = '';
    for(var i=0;i<r;i++){
        s = s + 'execute('+i+')';
        if(i!==r-1)
        s = s + '.then(function(){';
    }

    for(var i=0;i<r-1;i++){
        s= s+'})';
    }

    eval(s);
} 
```

这个想法是`executeTimes(3);`你得到这个输出：

```
Begin 0 
End 0 
Begin 1 
End 1 
Begin 2 
End 2 
```

我在这里创建了一个实时示例：http: [//jsfiddle.net/vtortola/Cfe5s/](http://jsfiddle.net/vtortola/Cfe5s/)

最好的解决方案是什么？

干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T18:24:16.523

递归在这里看起来很整洁：http: [//jsfiddle.net/Cfe5s/3/](http://jsfiddle.net/Cfe5s/3/)。

```
var executeTimes = function(r) {
  (function recurse(i) {
    execute(i).then(function() {
      if(i + 1 < r) {
        recurse(i + 1);
      }
    });
  })(0);
}; 
```

您启动一个使用 运行的函数，`execute`完成`0`后您重新开始（通过递归），但这次使用`1`. 在递归之前，您必须检查是否继续：仅当增量值仍低于`r`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T18:36:46.063

我的方法与您的方法相似，但不是连接字符串，而是嵌套函数调用：P

```
var executeTimes = function(r){   
    // The last (inner-most) step does nothing. 
    // just in the case we pass r <= 0
    var f = function(){}; 

    for(;  r > 0 ; --r){
        // Create closure with call to execute( ... ).then( ... )
        f = (function(_f, _r){
            return function(){ execute(_r).then(_f); }; 
        })(f, r - 1);
    }
    return f;
} 
```

它返回一个行为如你所愿的函数。如果你这样做：

```
executeTimes​(3)()​​ 
```

这会产生与您的示例相同的输出。可以很容易地调整这个例子来支持任何函数和任何最后一步（我假设函数`toExec`想要接收调用的“号码”）：

```
var executeTimes2 = function(toExec /*a function*/, 
                            steps /*a number*/, 
                            finalStep /*a function*/)
{   
    // The last (inner-most) step.
    // just in the case we pass r <= 0
    var f = finalStep? finalStep : function(){}; 

    for(;  steps > 0 ; --steps){
        // Create closure with call to execute( ... ).then( ... )
        f = (function(_f, _r){
            return function(){ toExec(_r).then(_f); }; 
        })(f, steps - 1);
    }
    return f;
} 
```

所以你的函数可以像这样被调用 3 次：

```
executeTimes2(execute, 3)() 
```

# sql - 如何在sql Join查询中选择所有属性

> ID：13349193
> 
> 赞同：0
> 
> 时间：2012-11-12T18:16:33.750
> 
> 标签：sql, oracle

下面的以下 sql 查询产生指定的结果。

```
 select product.product_no,product_type,salesteam.rep_name,salesteam.SUPERVISOR_NAME
 from product
 inner join salesteam
 on product.product_rep=salesteam.rep_id
 ORDER BY product.Product_No; 
```

然而，我的意图是进一步产生更详细的结果，其中将包括 PRODUCT 表中的所有属性。我的方法是在查询的第一行列出所有属性。

```
 select product.product_no,product.product_date,product.product_colour,product.product_style,
 product.product_age product_type,salesteam.rep_name,salesteam.SUPERVISOR_NAME
 from product
 inner join salesteam
 on product.product_rep=salesteam.rep_id
 ORDER BY product.Product_No; 
```

有没有另一种方法可以做到，而不是一个一个地列出 PRoduct 表的所有属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T18:21:20.060

您可以使用`*`选择所有表中的所有列，也可以使用`[table/alias].*`选择指定表中的所有列。在您的情况下，您可以使用`product.*`：

```
select product.*,salesteam.rep_name,salesteam.SUPERVISOR_NAME
from product
inner join salesteam
on product.product_rep=salesteam.rep_id
ORDER BY product.Product_No; 
```

需要注意的是，**只有在 100% 确定需要每一列并且始终需要时，才应该这样做**。有与此相关的性能影响；如果您从表中选择 100 列，而实际上只需要其中的 4 或 5 个，那么您会为查询增加很多开销。DBMS 必须更努力地工作，而且您还要通过网络发送更多数据（如果您的数据库与执行代码不在同一台机器上）。

如果稍后将任何列添加到`product`表中，则该查询将来也将返回这些列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T18:21:45.547

```
 select 
      product.*, 
      salesteam.rep_name,
      salesteam.SUPERVISOR_NAME
 from product inner join salesteam on 
      product.product_rep=salesteam.rep_id
 ORDER BY 
      product.Product_No; 
```

这应该做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T18:21:22.010

你可以这样写

```
select P.*  ---  all Product columns 
,S.* --- all salesteam columns
 from product P
 inner join salesteam S
 on P.product_rep=S.rep_id
 ORDER BY P.Product_No; 
```

# php - HREF 链接调用 php 函数

> ID：13349196
> 
> 赞同：-2
> 
> 时间：2012-11-12T18:16:41.877
> 
> 标签：php, html

我有两个文件。index.php 和 cart.php。我的所有功能、与数据库的连接等都位于文件 cart.php 中。如果用户单击 HREF 链接，我想调用一些函数。

我的 index.php：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
</head>
<body>
    <div id="wrapper" align="center" style="width:90%; height:auto; margin-left:auto; margin-right:auto;">      
    <?php cart(); ?>
    <br><br>
        <div id="sidebar" align="left" style="width:15%; height:auto; background-color:#999999; float:left;">
            <ul style="list-style-type:none;">
                <li><a href="#" id="all">ALL</a></li>
                <li><a href="#" id="shirts">SHIRTS</a></li>
                <li><a href="#" id="hoodies">HOODIES</a></li>
        </ul>
        </div>
        <div id="products" style="width:85%; height:auto; background-color:#888888; float:left;">
            <?php
            products_all();
            ?>
        </div>
    </div>
</body>
</html> 
```

那么，如何让 HREF 链接调用特定函数（位于 cart.php 中）并将其显示在 div 标签内（在我的情况下，在 div id="products" 中）？

这可能很容易，我只是一个初学者。

这是我的 cart.php 以防万一。

```
<?php

session_start();

$page = 'index.php';

// ***
/*
$mysql_host = "***";
$mysql_database = "***";
$mysql_user = "***";
$mysql_password = "***";
*/

// localhost
$mysql_host = "localhost";
$mysql_database = "cartt";
$mysql_user = "root";
$mysql_password = "";

mysql_connect($mysql_host, $mysql_user, $mysql_password) or die(mysql_error());
mysql_select_db($mysql_database) or die(mysql_error());

if (isset($_GET['add'])) {
    $quantity = mysql_query('SELECT id, quantity FROM products WHERE id='.mysql_real_escape_string((int)$_GET['add']));
    while ($quantity_row = mysql_fetch_assoc($quantity)) {
        if ($quantity_row['quantity']!=$_SESSION['cart_'.(int)$_GET['add']]) {
            $_SESSION['cart_'.(int)$_GET['add']]+='1';

        }
    }
    header('Location: '.$page); 
}

if (isset($_GET['remove'])) {
    $_SESSION['cart_'.(int)$_GET['remove']]--;
    header('Location: '.$page); 
}

if (isset($_GET['delete'])) {
    $_SESSION['cart_'.(int)$_GET['delete']]='0';
    header('Location: '.$page); 
}

function products_all() {
    $get_all = mysql_query('SELECT id, name, description, price FROM products ORDER BY id DESC');

        if (mysql_num_rows($get_all)==0) {
            echo "There are no products to display!";
        }
        else {                                      
            echo '<table width="900px" allign="center" cellpadding ="5" style="background-color:transparent;">
                  <tr align="center" valign="middle">';

                  $i = 0;

            while ($get_row = mysql_fetch_assoc($get_all)) {

                echo '<td><img src="./cartimages/'.$get_row['id'].'.jpeg" alt=" " height="225px" align="center"><br />'.$get_row['name'].'<br />'.$get_row['description'].'<br />&pound'.number_format($get_row['price'], 2).'<br /><a href="cart.php?add='.$get_row['id'].'">Add</a></td>';                

                $i++;
                if ($i == 4) {
                    echo '</tr>
                          <tr align="center" valign="middle">';
                          $i = 0;
                }

            }
        }
    }

function products_shirts() {

    $get_shirts = mysql_query('SELECT id, name, description, price FROM products WHERE type = "shirt" ORDER BY id DESC');

        if (mysql_num_rows($get_shirts)==0) {
            echo "There are no products to display!";
        }
        else {                                      
            echo '<table width="900px" allign="center" cellpadding ="5" style="background-color:transparent;">
                  <tr align="center" valign="middle">';

                  $i = 0;

            while ($get_row = mysql_fetch_assoc($get_shirts)) {

                echo '<td><img src="./cartimages/'.$get_row['id'].'.jpeg" alt=" " height="225px" align="center"><br />'.$get_row['name'].'<br />'.$get_row['description'].'<br />&pound'.number_format($get_row['price'], 2).'<br /><a href="cart.php?add='.$get_row['id'].'">Add</a></td>';                

                $i++;
                if ($i == 4) {
                    echo '</tr>
                          <tr align="center" valign="middle">';
                          $i = 0;
                }

            }
        }
    }

function products_hoodies() {
$get_hoodies = mysql_query('SELECT id, name, description, price FROM products where type = "hoodie" ORDER BY id DESC');

        if (mysql_num_rows($get_hoodies)==0) {
            echo "There are no products to display!";
        }
        else {                                      
            echo '<table width="900px" allign="center" cellpadding ="5" style="background-color:transparent;">
                  <tr align="center" valign="middle">';

                  $i = 0;

            while ($get_row = mysql_fetch_assoc($get_hoodies)) {

                echo '<td><img src="./cartimages/'.$get_row['id'].'.jpeg" alt=" " height="225px" align="center"><br />'.$get_row['name'].'<br />'.$get_row['description'].'<br />&pound'.number_format($get_row['price'], 2).'<br /><a href="cart.php?add='.$get_row['id'].'">Add</a></td>';                

                $i++;
                if ($i == 4) {
                    echo '</tr>
                          <tr align="center" valign="middle">';
                          $i = 0;
                }

            }
        }
    }

function paypal_items() {
    $num = 0;
    foreach($_SESSION as $name => $value) {
        if ($value!=0) {
            if (substr($name, 0 , 5)=='cart_') {
                $id = substr($name, 5, strlen($name)-5);
                $get = mysql_query('SELECT id, name, price, shipping FROM products WHERE id='.mysql_real_escape_string((int)$id));
                while ($get_row = mysql_fetch_assoc($get)) {
                    $num++;
                    echo '<input type="hidden" name="item_number_'.$num.'" value="'.$id.'">';
                    echo '<input type="hidden" name="item_name_'.$num.'" value="'.$get_row['name'].'">';
                    echo '<input type="hidden" name="amount_'.$num.'" value="'.$get_row['price'].'">';
                    echo '<input type="hidden" name="shipping_'.$num.'" value="'.$get_row['shipping'].'">';
                //  echo '<input type="hidden" name="shipping2_'.$num.'" value="'.$get_row['shipping'].'">';
                    echo '<input type="hidden" name="quantity_'.$num.'" value="'.$value.'">';
                }
            }   
        }
    }
}

function cart() {
    $total = 0;
    foreach($_SESSION as $name => $value) {
        if ($value>0) {
            if (substr($name, 0, 5)=='cart_') {
                $id = substr($name, 5, (strlen($name)-5));
                $get = mysql_query('SELECT id, name, price FROM products WHERE id='.mysql_real_escape_string((int)$id));
                while ($get_row = mysql_fetch_array($get)) {
                    $sub = $get_row['price']*$value;
                    echo $get_row['name'].' x '.$value.' @ &pound;'.number_format($get_row['price'], 2).' = &pound;'.number_format($sub, 2).'<a href="cart.php?remove='.$id.'">[-]</a> <a href="cart.php?add='.$id.'">[+]</a> <a href="cart.php?delete='.$id.'">[Delete]</a><br />';
                }
            }
            $total += $sub;
        }
    }
    if ($total==0) {
        echo "Your cart is empty.";
    }
    else {
        echo '<p>Total: &pound;'.number_format($total, 2).'</p>';

        ?>
        <p>
        <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
        <input type="hidden" name="cmd" value="_cart">
        <input type="hidden" name="upload" value="1">
        <input type="hidden" name="business" value="*************">
        <?php paypal_items(); ?>        
        <input type="hidden" name="currency_code" value="GBP">
        <input type="hidden" name="amount" value="<?php echo $total; ?>">
        <input type="image" src="http://www.paypal.com/en_US/i/btn/x-click-but03.gif" name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
        </form>
        </p>
        <?php

    }
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:23:29.747

如果您希望在客户端上执行某些操作时运行 php 函数，则必须发出调用该函数的 AJAX 请求，然后在 AJAX 请求返回时动态插入 HTML。

请记住，PHP 仅生成通过网络发送的文本作为 HTML、CSS、JavaScript、JSON、XML ...... PHP 无法直接与您的页面交互，它只能生成新内容

这是您可以使用的基本 AJAX 示例；我将使用 jQuery 和一些简化的 PHP 代码

ajax.php

```
function doit() { echo "anything"; }
doit(); 
```

page.html

```
<a href="#" id="mylink"> Load stuff </a>
<div id="products"></div> 
```

page.js

```
$("#mylink").click(function() { 
    $('#products').load("/ajax.php");
}) 
```

`doit`当您单击 ID 为“page.html”的链接时，该代码会将 ajax.php 中的结果加载到 ID 为“products”的 div 中

[http://api.jquery.com/load/](http://api.jquery.com/load/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:24:28.123

您需要使用客户端 javascript AJAX。查找并阅读有关 AJAX 请求的信息。

一旦您知道 AJAX 有效，您可以在点击按钮上调用 cart.php?runco​​mmand=xyz，在 cart.php 中您可以检查 $_GET['runco​​mmand'] == 'xyz' 是否然后执行 x。你会发现 jQuery javascript 库有很好的 AJAX 支持。

最好不要在一个 php 文件中包含所有内容，然后您可以出于不同目的向不同文件发出 AJAX 请求。例如，在您的情况下，listproducts.php。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-12T18:26:12.347

我想你正在寻找这样的东西：

```
<script type="text/javascript" language="javascript">
function showHide() {
var ele = document.getElementById("showHideDiv");
if(ele.style.display == "block") {
        ele.style.display = "none";
  }
else {
    ele.style.display = "block";
}
}
</script>

<form method="post" action="">
<p><input type="button" value="Show-Hide" onclick="return showHide();" /></p>
</form>
<div id="showHideDiv" style="display:none;">hello!</div> 
```

# php - 设计一个PHP用户登录系统

> ID：13349197
> 
> 赞同：2
> 
> 时间：2012-11-12T18:16:44.233
> 
> 标签：php, login, system

所以我想设计一个高安全性的php用户系统。我决定从登录/会话结束开始。我希望有人查看我的计划并告知我漏洞和安全漏洞。

这是我第一次尝试在这样的级别上创建系统，如果您发现问题，可以向我发送资源以帮助我修复它。

连接到数据库 *我将使用 MYSQL，因此它是您的标准数据库连接，存储在站点根目录之外的文件中。

注册 *注册将是一个简单的表单，我使用存储在外部文件中的函数来清理输入并防止 SQL 注入

```
// A function to sanitize input for data being input into a database
function sanitizeinput($rawinput) {
$sanitizedinput = mysql_real_escape_string($rawinput);
return $sanitizedinput;
} 
```

我需要这个功能来保护它吗？

密码是使用 SHA-512 或 BCrypyt 进行散列，我做了一些研究，看到很多人说 MD5 不再足够安全，我想确保最好的安全性，所以我应该使用什么来散列密码。

我还使用以下代码段添加了一个随机生成的盐，它附加到散列密码的前面，然后重新散列。然后盐以纯文本格式存储在数据库中，我是否应该考虑对其进行加密以提高安全性？

当用户登录时，他们输入的密码将被散列，来自数据库的盐添加并重新散列，然后与存储在数据库中的密码进行比较。

如果密码匹配，将创建一个会话，然后将其锁定到单个 IP 地址和用户代理。会话将在短时间内到期。会话将仅用于存储登录令牌，用户名和密码当然不会存储在会话中。

当用户登录时，令牌将被存储到数据库中，并分配给它的用户名，这样我们就可以使用令牌安全地从数据库中提取用户详细信息，而不会有将其存储在会话中的风险。

如果密码不正确，用户将无法登录……呃，我也会对此实施蛮力保护，三次尝试后，用户 IP 和用户代理将被锁定 15 分钟，十次失败尝试后被阻止在防火墙中。

我觉得我忘记了什么，但我不能将手指直接放在它上面。

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:26:26.823

我绝不是这方面的专家，但首先切换到 PDO 以连接到 mySQL。如果使用得当，这似乎有点困难，但可以 100% 保护您免受任何试图进行 sql 注入的人的伤害。对于加密，我使用它为每个用户生成一个随机盐：

```
 function generateSalt($length, $chars)
{
  $randString = '';
  $charLength = strlen($chars);
  for($count = 0; $count < $length; $count++)
  {
    $randString .= substr($chars, mt_Rand(0, ($charLength-1)), 1);
  }
  return $randString;
} 
```

如果你给它一个字符串，它会从该字符串中的字符中吐出给定长度的盐。然后我相信我用了河豚，因为它不容易开裂。

你考虑过 XSS 漏洞吗？我还没有，需要继续。确保用户没有将 html 或 javascript 代码注入到您的数据库中，这些代码稍后可能会显示在页面的某个位置。

祝你好运。

编辑：这是我用于“散列”的内容

```
$cryptOptions = '$2y$10$' . $salt . '$';
$hashedPassword = crypt($password1, $cryptOptions); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:37:22.040

抱歉，我无法评论 m02ph3u5 的帖子，所以我必须发布另一个答案。在数据库中存储盐是完全标准的。存在盐的原因是为了防止彩虹表的暴力破解。Rainbow 表是预先计算的哈希值，可以快速破解数据库中的所有密码。使用盐，即使是攻击者已知的盐，也无法预先计算彩虹表。这意味着人们必须暴力破解每个密码。这很好，因为如果你使用像河豚这样的算法，那么破解数百个密码就变得不切实际了。

这不是使密码无法破解的方法。这是一种使破解所有密码变得不切实际的方法。

编辑：如果他们可以访问您的数据库，他们将只有您的散列密码和盐。他们仍然需要纯文本密码。

EDIT2：所以他们的想法是他们可以访问该网站，所以我们当时唯一想做的就是保护密码。通常人们会重复使用密码。散列实际上只是为了保护这类人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T18:28:59.397

为什么要将盐存储在数据库中？假设有人可以访问您的数据库 - 他将拥有密码和盐。如果你有你的盐硬编码或其他地方他只会有散列密码。如果攻击者获得了对您系统的完全访问权限，这无关紧要。

另外，您会使用 https 作为登录程序吗？

假设您有多个数据库连接并且它们具有不同的编码 - 您应该将正确的链接传递给您的 sanitizer 函数。顺便说一句，用另一个不添加任何东西（但实际上限制实际功能）的函数包装 mysql_real_escape_string 有什么好处？我鼓励你使用 PDO。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T18:33:39.287

几个月前用 Java 实现了一个类似的原型。

从我所见，它看起来与我所拥有的非常相似。我已经做过（或至少计划要做）的一些事情，我从你的解释中看不到

1.  显然，使用 TLS 保护 HTTP 通道，否则您将以明文形式发送密码。
2.  使用一些关键的拉伸功能，例如[http://en.wikipedia.org/wiki/PBKDF2](http://en.wikipedia.org/wiki/PBKDF2)，这样蛮力攻击将更加计算密集。
3.  我多次应用哈希。（我使用了 1024 次迭代），再次防止暴力攻击。如果我必须再做一次，我宁愿花时间实施 2。
4.  会话应在最后一次访问的基础上过期。

希望能给你一些额外的想法。

# c# - 我该怎么做这些按钮，你可以在 Windows 7 中看到？

> ID：13349199
> 
> 赞同：0
> 
> 时间：2012-11-12T18:17:00.537
> 
> 标签：c#, windows-7, skype

我的意思是这些`online, away, busy and offline buttons`，你可以在这张图片上看到：

![Skype](../Images/1aa80255452b4e494c5df95ccb2d1ccd.png)

我想在 C# 中做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:20:19.187

这些被称为[缩略图工具栏](http://msdn.microsoft.com/en-us/library/windows/desktop/dd378460%28v=vs.85%29.aspx#thumbbars)，并具有一些相关的 API：

*   [ITaskbarList3::ThumbBarAddButtons](http://msdn.microsoft.com/en-us/library/windows/desktop/dd391703%28v=vs.85%29.aspx)
*   [ITaskbarList3::ThumbBarSetImageList](http://msdn.microsoft.com/en-us/library/windows/desktop/dd391704%28v=vs.85%29.aspx)
*   [ITaskbarList3::ThumbBarUpdateButtons](http://msdn.microsoft.com/en-us/library/windows/desktop/dd391705%28v=vs.85%29.aspx)
*   [大拇指按钮](http://msdn.microsoft.com/en-us/library/windows/desktop/dd391559%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T18:24:37.403

您正在寻找缩略图工具栏。这是来自 MSDN 和 c# 的示例（使用 [Windows API CodePack](http://archive.msdn.microsoft.com/WindowsAPICodePack)）。

[使用 Windows 7 缩略图](http://visualstudiomagazine.com/articles/2010/08/04/windows-7-thumbnails.aspx)

# c++ - 操作输入文件流

> ID：13349204
> 
> 赞同：1
> 
> 时间：2012-11-12T18:17:42.730
> 
> 标签：c++

我有一个包含这个的数据文本文件

```
Map2D, [3, 2]
Dot3D, [25, -69, -33], [-2, -41, 58]
Map3D, [6, 9, -50]
Map2D, [3, 2]
Dot3D, [7, -12, 3], [9, 13, 68]
Map3D, [6, 9, 5]
Map2D, [3, 2]
Dot3D, [70, -120, -3], [-29, 1, 268]
Dot3D, [7, 12, 3], [-9, 13, 68]
Map3D, [1, 3, 8]
Dot2D, [5, 7], [3, 8] 
```

基本上，文本文件的第一个数据是我得到 4 类的类名

```
Map2D
Map3D
Dot2D
Dot3D 
```

我试图编写自己的文件操纵器，以便我的程序可以提取上面的数据并为 4 个类中的每一个重载提取运算符 >>，然后将其存储到相关对象中。

我正在考虑使用矢量、地图、集合或列表来存储 . 但是为此我如何实现我想做的事情，例如存储到类的相关对象中。

我尝试在谷歌上搜索如何创建我自己的文件操纵器，但如果有人可以向我展示一些示例代码并且我可以在测试文件中编译和执行它然后自己观察输出，那就太好了。我想使用 iomanip 对 >> 运算符进行重载

我必须使用操纵器，因为我需要创建类似的东西

我需要做类似的事情

```
cout << "Input File Name";
cin >> readFile; 
```

并执行所有数据读取和对象创建

对于造成的所有麻烦，我深表歉意。然后它将逐行读取记录，然后创建类以及其中的数据。

**感谢你的帮助！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T19:38:26.207

这是一个例子`std::cin`。它应该与`fstream`. 解析你的输入真的很讨厌。是否可以从输入中删除括号（“[”amd“]”）？

```
#include <iostream>
#include <string>
#include <vector>
#include <sstream>
#include <algorithm>
#include <c>

class Map2D {
    std::vector<int> values;
public:
    friend std::istream& operator>>(std::istream& in, Map2D m) {
        std::string i;
        in >> i;
        std::stringstream ss(i);
        std::getline(ss, i, '[');
        std::getline(ss, i, ',');
        ss >> i;
        std::cout << i << std::endl;
        in >> i;
        ss.str("");
        ss << i;
        i = i.substr(0, i.size()-1);
        ss >> i;
        std::cout << i << std::endl;;
    }
};

int main() {
    std::string type, file_name;
    std::cout << "Input File Name";
    std::cin >> file_name;
    std::fstream file(file_name.c_str());
    Map2D m;
    while (std::getline(std::cin, type, ',')) {
        if(type.find("Map2D") != std::string::npos) {
            file >> m;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T19:10:13.930

您可以使用`cin`来获取文件名，但是您应该编写一个可以解析文件的辅助方法。

我的建议是创建一个名为`DataMembers`或类似的类。在该类中，您可以有一个读取数据成员文件的辅助方法。该类可能有 4 个向量用于存储您从文件中读取的数据。

```
class DataMembers
{
    private:
        std::vector<Map2D> _map2Ds;
        std::vector<Map3D> _map3Ds;
        ....
    public:
        void readDataFile(std::string inFileName);
        void writeDataFile(std::string outFileName);
}; 
```

readDataFile 方法应该执行以下操作

1.  一次读取一行文件
2.  解析该行以确定要创建的对象类型（如果无法识别类型，则会出错）
3.  验证该行是否包含指示类型的正确数据
4.  创建正确类型的对象
5.  将对象分配给正确的对象集合

您可能想要编写一些其他私有方法来处理数据类型的创建并分配给适当的集合。

# python - BeautifulSoup 内容的正确编码

> ID：13349206
> 
> 赞同：2
> 
> 时间：2012-11-12T18:18:01.933
> 
> 标签：python, beautifulsoup

我有这段代码，它使用 BeatifulSoup 从网站上抓取内容。

```
short_description = soup.find('div', attrs={"class":"short-description"})
if short_description:
    short_desc = short_description.find('div', attrs={"class": "std"})
    if short_desc:
        adm_product.append(short_desc.renderContents())

long_description = soup.find('div', attrs={"class": "box-collateral box-description"})
if long_description:
    long_desc = long_description.find('div', attrs={"class": "std"})
    if long_desc:
    adm_product.append(long_desc.renderContents())
        L = []
        for tag in long_desc.recursiveChildGenerator():
            if isinstance(tag,BeautifulSoup.Tag):
                L.append(tag.renderContents())
        desc = " ".join(v for v in L if v > 0)
        print desc
        adm_product.append(desc)
    else:
        adm_product.append('pas du description')

# we get the country and producer
for txt in product_shop.findAll(text=True):
    if re.search('Origine',txt,re.I):
        origin = txt.next.strip()
        try:
            country, producer = origin.split(', ')
        except Exception, e:
            pass
        else:
            adm_product.append(country)
            adm_product.append(producer) 
```

HTML 示例输入：

```
<div class="short-description">
                                        <div class="std">Barre chocolat au lait fourrée à la crème de lait<br>25g, bio et équitable<br>Produit bio contrôlé par Bio Inspecta</div>
                </div>

<div class="box-collateral box-description">
    <h2>Description du produit</h2>
    <div class="std">
        <div><strong>CHOKICHOC : la barre de chocolat au lait, fourrée à la crème de lait</strong></div><br>
<div style="text-align: justify;">Exquis mélange des plus fins cacaos et de l’aromatique sucre bio du Paraguay, CHOKICHOC est composée exclusivement de matières premières cultivées sans additif ni arôme artificiel. Tous les ingrédients proviennent de cultures biologiques. <strong>Légère, fondante, idéale pour le goûter, un vrai délice!</strong></div><br>
<div>La commercialisation des barres CHOKICHOC garantit un prix minimum pour le producteur, des contrats d’achats à long terme ainsi que le préfinancement partiel de la récolte.</div>    </div>
</div>
<div class="product_shop">
<p>

                <label class="garanties_adm">
                <strong>Les garanties :</strong></label>
                <img src="/images/adm/icon-garantie-fairtrade-ab.png">
                            </p>
<p>
                                <label><strong>Origine :</strong></label> 
                Burkina Faso, Cercle des Sécheurs                           </p>
<p> </p>

</div> 
```

当我打印 adm_product 列表时，我得到：

```
['002267', 'Barre chocolat au lait fourr\xc3\xa9e \xc3\xa0 la
cr\xc3\xa8me de lait<br />25g, bio et \xc3\xa9quitable<br />Produit
bio contr\xc3\xb4l\xc3\xa9 par Bio Inspecta', '<strong>CHOKICHOC : la
barre de chocolat au lait, fourr&eacute;e &agrave; la cr&egrave;me de
lait</strong> CHOKICHOC : la barre de chocolat au lait, fourr&eacute;e
&agrave; la cr&egrave;me de lait  Exquis m&eacute;lange des plus fins
cacaos et de l&rsquo;aromatique sucre bio du Paraguay, CHOKICHOC est
compos&eacute;e exclusivement de mati&egrave;res premi&egrave;res
cultiv&eacute;es sans additif ni ar&ocirc;me artificiel. Tous les
ingr&eacute;dients proviennent de cultures biologiques.
<strong>L&eacute;g&egrave;re, fondante, id&eacute;ale pour le
go&ucirc;ter, un vrai d&eacute;lice!</strong> L&eacute;g&egrave;re,
fondante, id&eacute;ale pour le go&ucirc;ter, un vrai d&eacute;lice!
La commercialisation des barres CHOKICHOC garantit un prix minimum
pour le producteur, des contrats d&rsquo;achats &agrave; long terme
ainsi que le pr&eacute;financement partiel de la r&eacute;colte.',
'0,90\xc2\xa0',
u'/product/cache/1/image/9df78eab33525d08d6e5fb8d27136e95/0/0/002267_2.jpg',
u'Burkina Faso', u'Cercle des S\xe9cheurs'] 
```

我的列表`item[1]`编码正确，但`item[2]`不是；最后两项也不是。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:28:23.033

我可以让它工作的唯一方法是将编码设置为：

```
# we get the country and producer
for txt in product_shop.findAll(text=True):
   get_origin = re.search('Origine',txt,re.I)
   if re.search('Origine',txt,re.I):
       origin = txt.next.strip()
       try:
           country, producer = origin.split(', ')
       except Exception, e:
           pass
       else:
           adm_product.append(country.encode("iso-8859-1"))
           adm_product.append(producer.encode("iso-8859-1")) 
```

然后返回“列表”，如：

```
.... 'Burkina Faso', 'Cercle des S\xe9cheurs'] 
```

item[1] 被正确添加到列表中，因为我使用 chrome 检查元素，它正确地将 html 更改为：

```
<div style="text-align: justify;">Exquis mélange des plus fins cacaos et de l’aromatique sucre bio du Paraguay, CHOKICHOC est composée exclusivement de matières premières cultivées sans additif ni arôme artificiel. Tous les ingrédients proviennent de cultures biologiques. <strong>Légère, fondante, idéale pour le goûter, un vrai délice!</strong></div> 
```

好像我在看源代码，就像：

```
<div style="text-align: justify;">Exquis m&eacute;lange des plus fins cacaos et de l&rsquo;aromatique sucre bio du Paraguay, CHOKICHOC est compos&eacute;e exclusivement de mati&egrave;res premi&egrave;res cultiv&eacute;es sans additif ni ar&ocirc;me artificiel. Tous les ingr&eacute;dients proviennent de cultures biologiques. <strong>L&eacute;g&egrave;re, fondante, id&eacute;ale pour le go&ucirc;ter, un vrai d&eacute;lice!</strong></div><br /> 
```

# c# - 在 asp.net C# 中读取表单变量的问题

> ID：13349210
> 
> 赞同：6
> 
> 时间：2012-11-12T18:18:27.650
> 
> 标签：c#, asp.net, forms

**背景**：我被要求处理一个遗留的 asp.net 应用程序，该应用程序没有文档，原始程序员也无法咨询。我主要是一个 Perl 程序员，主要是在 *nix 系统上，所以虽然我对系统的实际逻辑没有什么大问题，但我被下面的一些“裸露的骨头”东西缠住了。

**大纲**: 我正在尝试扩展现有的 aspx 表单以增加其功能，该表单是购买电话号码系统的一部分。目前，第一次调用的表单在 HTML 下拉列表中显示位置和电话区号列表，并希望用户选择一个。When a value is selected (or selected and the select button clicked, if JS is disabled) and the form submitted, the page in postback mode then provides an appropriate redirect to a purchase page, with various values set in the query string. 我想通过在同一个表单上添加第二行控件来扩展功能，包括一个供用户输入区号的文本框和一个“搜索”按钮。这个想法是，当用户这样做时，系统将对该区号进行数据库搜索，如果找到匹配项，生成适当的重定向到销售该区域的页面。所有代码都是（并且将是）在 C# 中。

**问题**：在 Stack Overflow 上找到了很多关于从 asp.net 表单中提取表单变量的有用信息后，我尝试使用 Request.form["variable_name"] 检索我的新变量。但很快就清楚这些价值观并没有通过。

这是表单新位的 aspx 页面代码：

```
<tr>
    <td align='left'><b>STD code:</b></td>
    <td align='left'>
        <asp:TextBox id="STD_Code_Search"
             AutoPostBack="True"
             Columns="7"
             Text=""
             TextMode="SingleLine"
             Wrap="False"
             runat="server"/>
    </td>
        <td><asp:Button ID="Button2" runat="server" Text="Search" /></td>
</tr> 
```

我希望能够通过

```
Button2_Clicked = Request.Form["Button2"]
STD_Code_Search = Request.Form["STD_Code_Search"] 
```

然而，什么都没有发生。根据更多搜索，我发现这段代码可以显示表单中的所有变量：

```
 foreach(string key in Request.Form.Keys)
    {
        LOG.WriteLine(key + ": " + Request.Form[key] + "<br/>");
    } 
```

LOG 对象是一个 StreamWriter 去一个文本文件，这似乎工作正常。

但是文件中的数据如下所示：

```
ctl00$ctl00$ctl00$ContentPlaceHolder1$Main$Range_Data$STD_Code_Search: 01952<br/>
ctl00$ctl00$ctl00$ContentPlaceHolder1$Main$Range_Data$Button2: Search<br/> 
```

很公平，然后我尝试使用以下内容来检索 C# 中的数据

```
STD_Search = Request.Form["ctl00$ctl00$ctl00$ContentPlaceHolder1$Main$Range_Data$STD_Code_Search"]; 
```

这确实有效，如果我将 STD_Search 发送到 StreamWriter LOG，我可以在我的文本文件中看到输入的值。

但是，如果我然后尝试读取第二个值（在这种情况下，我试图捕获 Button2 的值，因此如果单击该按钮而不是原始按钮，我可以触发特定行为），使用以下代码：

```
STD_Search = Request.Form["ctl00$ctl00$ctl00$ContentPlaceHolder1$Main$Range_Data$STD_Code_Search"];
Button2_Clicked = Request.Form["ctl00$ctl00$ctl00$ContentPlaceHolder1$Main$Range_Data$Button2"]; 
```

然后，虽然 asp.net 进程似乎都正确完成（没有错误或页面崩溃），但文本文件的写入停止了，并且根本没有写入任何数据。

**问题**：

1.  我确定我不应该包含所有占位符的东西（继续阅读，我认为这是底层框架的一部分，asp 实际上应该只向我提供命名变量，就像 Perl 或 PHP 系统一样使用纯 HTML 表单），是否有任何关于为什么会发生这种情况以及我应该做些什么来处理/提取数据的指针？

2.  为什么当我尝试读入第二个变量时，尽管我只读入一个变量（对于一些大的工作值）工作，但它都死了？

3.  有推荐的asp.net和C#书籍吗？我有 Sitepoint 的“使用 C# 和 VB 构建您自己的 asp.net 4 网站”，它有所帮助，但对于尝试将其他人的代码拆开并重新构建它并不是那么有用。

**先前的研究**：我对此进行了广泛的搜索，但是到目前为止，我看到的大多数答案都与使用 asp.net 处理从外部站点等提交的数据或通过脚本直接使用 post 提交的数据有关。我在 asp.net 上查看的所有教程网站似乎都说我应该只使用 Request.Form["variable_name"]，所以这里似乎还有其他事情发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T18:25:02.457

您应该使用代码隐藏来完成所有这些工作。这会让事情变得更容易。

```
string searchText = STD_Code_Search.Text; 
```

要知道是否单击了按钮，您会这样做

```
<asp:Button ID="Button2" runat="server" Text="Search" OnClick="Button2_Click" /> 
```

并进行处理

```
protected void Button2_Click(object sender, EventArgs e)
{
    //button2 was clicked
} 
```

Asp.Net 是一个事件驱动的框架，与 PHP 或 JSP 不同。[在 Asp.Net 上选择一本好书并阅读](http://asp.net-tutorials.com/)。Asp.Net 已经为您处理了您尝试做的大部分事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T18:26:48.193

该`Request.Form`集合仅在您想直接访问“原始”POST 正文内容时使用。ASP.NET WebForms 运行一个抽象层，这意味着您通常不需要使用此集合。

而是通过其父控件访问提交的值。在这种情况下，该控件称为“STD_Code_Search”（严重违反 .NET 的命名和样式约定，但我离题了）。假设您正在使用 Visual Studio 的工具，将会有一个自动生成的文件与您的 *.aspx 文件同名，后缀为“designer.cs”，其中包含一个名为“ `protected TextBox STD_Code_Search;`”的类字段。您需要做的就是访问此字段。请注意，此字段只会在`Init`页面事件之后填充。

```
string search = STD_Code_Search.Text; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T18:25:30.820

你试过它*应该*如何工作吗？

.cs 文件中的每个表单控件都应该有一个受保护的变量。较新版本的 Visual Studio 会为您执行此操作（当您添加服务器端标记标签时），但基本上如果您在 .cs 文件中没有用于变量 .g 的智能感知。

```
STD_Code_Search 
```

如果未声明，只需在页面顶部执行此操作：

```
protected TextBox STD_Code_Search; 
```

现在当你回帖时`STD_Code_Search.Text` *应该*有一个值

正如我所说，它应该如何工作。

除非有一些令人信服的理由使用 Request.Form 你不应该去那里，但值得知道它写在客户端的“名称”属性中的任何内容（因此是可怕的占位符内容）。它可以被覆盖为更漂亮的东西（基于您的 asp.net 版本的选项）。

# gwt - 使用 gwt 的 Amazon S3 上传程序

> ID：13349211
> 
> 赞同：2
> 
> 时间：2012-11-12T18:18:34.920
> 
> 标签：gwt, jar, amazon-s3, amazon-web-services

这就是我所做的。

我在其中创建了一个 S3 上传器并将其导出为 .jar 文件。我试图在一个 gwt 项目中导入这个 jar 文件，但它总是给我一个运行时错误。我们的包名是 com.soul.uploader，类名是 UpLoader。这是错误。

> 无法导入 com.soul

这是我用于 S3 项目的 xml 文件

```
 <?xml version="1.0" encoding="UTF-8"?>
    <module> 
     <inherits name='com.google.gwt.user.User'/>
     <source path="uploader"></source>
    </module> 
```

我只是想知道如何将 jar 文件导入 gwt 项目。

谢谢你。

# android - 涉及系统应用的 Android 仪器测试

> ID：13349214
> 
> 赞同：2
> 
> 时间：2012-11-12T18:18:57.680
> 
> 标签：android, robotium, instrumentation, android-testing

我必须在这里遗漏一些明显的东西：

我也在 Robotium 的帮助下在设备上运行仪器测试用例。在某些时候，我正在测试的应用程序会触发默认的电子邮件撰写活动。

我想知道的是：如何关闭该活动以便再次显示我的应用活动？*至少*出于一个原因需要这样做：在当前测试用例完成后，电子邮件活动仍处于前台，这会阻止下一个测试用例正常运行。

我尝试将所需的返回键发送到电子邮件活动 - 使用`this.sendKeys(KeyEvent.KEYCODE_BACK)`或`solo.goBack()`- 但没有运气。

如果我运行**或**`solo.getCurrentActivity()`获得对包中*最顶层*活动`this.getActivity()`的引用，但无法获取实际的前台活动。此外，提到的直接进入我的活动，而不是电子邮件。***`sendKeys/goBack`***

 ***当我的应用启动 Play Store 主要活动时，也会出现同样的问题。
我意识到电子邮件活动不是我正在测试的包的一部分，这可能是问题的一部分。

那么，有没有办法关闭电子邮件活动？

**编辑**
现在我坚持@Joe Malin 的第一个建议：

在我的 ViewModel（或 Controller）中，有一个`private static boolean _productionMode = true;` 并且有一些仅在测试期间使用的辅助方法（如果在某些内部辅助类中更好）：

```
public void dontLaunchExternalApps()
{
  _productionMode = false;
} 
```

然后在一些 ViewModel 常规方法中：

```
if (_productionMode)
{
   launchSomeExternalApp();
}
else
{
   // Do Nothing Or Set Some Internal Flag
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:38:03.083

没有什么好办法。Android 检测框架实际上是为了对 Android 组件进行单元测试。一旦控制权传递出组件，就必须由其他一些框架接管。

也许您可以使用扩展数据启动初始活动，告诉活动发送存根电子邮件 Intent 而不是真实的。真正的问题不是关闭电子邮件活动，而是在*模拟它，*以便您从中获得您期望得到的东西。不幸的是，Android 组件不支持模拟。*解决这个*问题的方法是将大多数操作委托给 POJO 子类，然后模拟它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T08:29:15.730

您可以在测试中创建一个意图过滤器来检查正确的意图是否被触发，然后处理返回结果，或者您可以制作一个仅用于测试的应用程序，例如处理电子邮件意图并将其设置为系统默认值的应用程序，这个应用程序实际上可以没有 gui 并自动返回您想要的结果，无论是硬编码的还是基于您可以读取的某个文件，或者甚至作为意图中的额外信息。

这是一个例子：

```
//set up the filter
final Instrumentation inst = getInstrumentation();
IntentFilter intentFilter = new IntentFilter(Intent.ACTION_VIEW);
intentFilter.addDataScheme("http");
intentFilter.addCategory(Intent.CATEGORY_BROWSABLE);

//Set up the monitor
//THE BOOLEAN ON THE END TELLS THE SYTEM TO BLOCK IT FROM OCCURING, you probably want true here
ActivityMonitor monitor = inst.addMonitor(intentFilter, null, true);

assertEquals(0,monitor.getHits()); 

//click the link here with whatever framework you are using
solo. clickOnText("link text")

//Wait for the activity to get hit
monitor.waitForActivityWithTimeout(2000); 

//Here is where you actually check it happened
assertEquals(1, monitor.getHits()); 
inst.removeMonitor(monitor); 
```***

# java - 如何在 java 中刷新 memcached / spymemcached

> ID：13349220
> 
> 赞同：2
> 
> 时间：2012-11-12T18:19:35.447
> 
> 标签：java, memcached, spymemcached, amazon-elasticache

我想清除托管的 aws elasticache memcached 实例。我想从 java 以编程方式执行此操作。

我试过这个没有成功：

```
 net.spy.memcached.MemcachedClient client = new net.spy.memcached.MemcachedClient(new BinaryConnectionFactory(),
 AddrUtil.getAddresses(endpoint1+":11211"+" "+ endpoint2+":11211"));

    client.flush(); 
```

如何在java中以编程方式清除缓存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:26:46.677

上面的代码有效。这是一个访问端点的权限问题。

# objective-c - Cocoa PDFView，setDocument，如何将文档旋转90度？

> ID：13349225
> 
> 赞同：1
> 
> 时间：2012-11-12T18:19:57.597
> 
> 标签：objective-c, cocoa, image-rotation, pdfview

我正在用 cocoa 绘制一个文档，它旋转了 90 度，因此打印作业被正确发送到热敏标签打印机。它工作正常，因为文档根据标签打印机布局正确旋转了 90 度。但是我想在 PDFView 中正确地为用户显示文档，如何在使用“setDocument”插入整个文档时将整个文档旋转 90 度？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:28:40.390

首先创建一个PDF。在 PDF 中，您可以通过 2 种方式创建旋转页面：将页面大小设置为 8.5*11 英寸并将旋转页面属性设置为 90，或者简单地将页面大小设置为 11*8.5 英寸。视觉上没有区别。Preview 的问题（我假设它后面还有 PDFKit）是当您将旋转设置为 90 时，它不会简单地将 Rotate 属性设置为 90，而是会切换页面宽度和高度并对页面内容应用转换流，以便页面内容显示为旋转。因为 [PDFPage rotation] 和 CGPDFPageGetRotationAngle 返回 Rotate 属性的值，所以在使用 Preview 和 PDFKit 旋转的页面上它们将始终返回 0。

# java - 惰性列表复制（写入时复制）

> ID：13349226
> 
> 赞同：1
> 
> 时间：2012-11-12T18:20:02.247
> 
> 标签：java, collections

任何人都知道 List 复制 impl 仅在突变时才实际制作副本？对于以读取为主的用例，它（编辑：可能）比`new ArrayList<>(oldList)`. 就像`CopyOnWriteArrayList`它只会复制元素零次或一次。

例子：

```
List list = Lists.lazyCopy(oldList);     // no copy
list.get(0);                             // delegate to oldList
list.set(0, null);                       // make a copy, mutate the copy
list.get(0);                             // read from copy
list.set(0, null);                       // mutate the copy, don't copy again 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-12T18:43:28.587

正如您在评论中提到的那样，您有一个：为什么不在您的 ImmutableList 中`com.google.common.collect.ImmutableList`使用简单的？`java.util.concurrent.CopyOnWriteArrayList`

`CopyOnWriteArrayList(Collection<? extends E> c)` [只需使用源集合的`toArray`方法](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/concurrent/CopyOnWriteArrayList.java#CopyOnWriteArrayList.%3Cinit%3E%28java.util.Collection%29)来创建 CopyOnWriteArrayList 的支持数组。并且非单例、非空的RegularImmutableList 的实现`toArray`也只是[将System.arraycopy](http://grepcode.com/file/repo1.maven.org/maven2/com.google.guava/guava/13.0.1/com/google/common/collect/RegularImmutableList.java#RegularImmutableList.toArray%28%29)从它自己的后备数组复制到一个新数组。因此，新的后备数组和 System.arraycopy 只有一个大内存分配，在任何一种情况下都应该很快。当然，缺点是重复的后备数组的内存使用量增加。

# jquery - 如何在 jQuery attr('src',value) 中使用图像 id 作为源？

> ID：13349234
> 
> 赞同：-3
> 
> 时间：2012-11-12T18:20:42.247
> 
> 标签：jquery

我在 Jquery 代码中遇到问题。请帮我解决这个问题。

用于显示图像的 HTML 代码：

```
<body>
    <div class="info_image">image1</div>
    <div class="info_image">image2</div>
    <div class="info_image">image3</div> 
```

带有 id 的图片链接：

```
 <div class="reference">
            <p><img id="image1" src="brush-seller.jpg"/></p>
            <p><img id="image2" src="Pest-seller.jpg"/></p>
            <p><img id="image3" src="pick-seller.jpg"/></p>
</body> 
```

现在问题出在 JavaScript 上。我必须使用**.attr('src',value)**标签来使用图像 ID 作为源并在前 3 个 div 中显示该图像。到目前为止，我发现了一个不起作用的代码：

```
.attr('src','image/'+info_elem.find('.info_image').html()) 
```

请帮我修复这个 jquery 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:26:27.197

用于`.each()`迭代 Div 的 . 获取 html

并`.css()`用来设置对应的背景图片

```
$('.info_image').each(function() {
    var $this = $(this);  
    var imgId = $this.html(); // Assuming the div html contains just the image ID
    var imgSrc = $('#' + imgId).attr('src');

    $this.css('backgroundImage','url('+ imgSrc + ')');
}) 
```

最好使用 HTML5 数据属性来存储图像 ID 而不是 html，因为您可能需要处理空格或其他字符的情况......

```
<div class="info_image" data-image="image1">Here comes image1</div>
<div class="info_image" data-image="image2">Here comes image2</div>
<div class="info_image" data-image="image3">Here comes image3</div> 
```

**Javascript**

```
 $('.info_image').each(function() {
            var $this = $(this);  
            var imgId = $this.data('image'); 
            var imgSrc = $('#' + imgId).attr('src');

            $this.css('backgroundImage','url('+ imgSrc + ')');
        }) 
```

这会更干净

# mysql - mysql EAV模型-如何选择堆叠的多个属性

> ID：13349237
> 
> 赞同：0
> 
> 时间：2012-11-12T18:20:52.677
> 
> 标签：mysql, entity-attribute-value

我有两列的表：

> product_id 和 attr_value_id

通过这个查询，我得到 39 行：

> SELECT * FROM ka_product_attributes WHERE attr_value_id IN (655, 656, 658)

通过这个查询，我得到 58 行：

> SELECT * FROM ka_product_attributes WHERE attr_value_id IN (655, 656, 658, 589)

如何选择所有具有 attr_value_id 589 和以下 attr_value_id 655、656、658 之一的 product_id？

像这样的东西：

> SELECT * FROM ka_product_attributes WHERE ( attr_value_id IN ( 655, 656, 658 ) AND attr_value_id IN ( 589 ) ) GROUP BY product_id HAVING COUNT( product_id ) >1

但这行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T18:27:08.127

由于 EAV 模型将单个记录的属性（在传统关系模型下）“传播”到多个表行中，因此需要使用如下自连接来根据多个属性搜索项目。

```
SELECT DISTINCT A1.product_id    -- see note about DISTINCT, below
FROM ka_product_attribute A1
JOIN Ka_product_attribute A2 ON A1.product_id == A2.product_id
WHERE A1.attr_value_id = 589
  AND A2.attr_value_id in (655, 656, 658)

-- The 'DISTINCT' is only necessary if duplicates are allowed for values of the
-- attribute 589\. (in other words if ka_product_attributes can have several
-- records with for a product_id + attr_value_id combination). 
```

# wpf - treeview getdirectories 出错

> ID：13349239
> 
> 赞同：-1
> 
> 时间：2012-11-12T18:21:05.107
> 
> 标签：wpf, treeview, runtime-error

我试图让 wpf 应用程序显示带有我的文件的树视图。我无法将 driveinfo 正确放入目录信息中：

```
 DirectoryInfo sdf = new DirectoryInfo(DriveInfo.GetDrives()[x].ToString());

            foreach (DirectoryInfo z in sdf.GetDirectories()) //Run time error here
            { } 
```

它给出了运行时错误。以下是完整代码：

```
 private void button1_Click(object sender, RoutedEventArgs e)
    {
        treeView1.Items.Clear();
        for (int x = 0; x < DriveInfo.GetDrives().Length; x++)
        {
            TreeViewItem y = new TreeViewItem() { Header = DriveInfo.GetDrives()[x] };
            treeView1.Items.Add(y);
            comboBox1.Items.Add(DriveInfo.GetDrives()[x]);

            DirectoryInfo sdf = new DirectoryInfo(DriveInfo.GetDrives()[x].ToString());

            foreach (DirectoryInfo z in sdf.GetDirectories()) //Run time error here
            {
                TreeViewItem newmain = new TreeViewItem();
                newmain.Header = z.Name;
                newmain.Tag = z.FullName;
                y.Items.Add(newmain);

            }
        } 
```

错误是：

IOException 未处理

[http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28EHIOEXCEPTION%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK%2cVERSION%3dV4.0%22%29;k %28DevLang-CSHARP%29&rd=true](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28EHIOEXCEPTION%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK%2cVERSION%3dV4.0%22%29;k%28DevLang-CSHARP%29&rd=true)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T18:48:31.980

您正在尝试访问尚未准备好的驱动器 - 例如，未插入媒体的 CD/DVD 驱动器。在尝试访问之前，您需要检查类的`IsReady`属性：`DriveInfo``RootDirectory`

```
foreach (DriveInfo drive in DriveInfo.GetDrives())
{
   TreeViewItem y = new TreeViewItem { Header = drive.Name };
   treeView1.Items.Add(y);
   comboBox1.Items.Add(drive.Name);

   if (!drive.IsReady) continue;

   DirectoryInfo root = drive.RootDirectory;
   if (!root.Exists) continue;

   foreach (DirectoryInfo z in root.GetDirectories())
   {
      y.Items.Add(new TreeViewItem
      {
         Header = z.Name,
         Tag = z.FullName
      });
   }
} 
```

# c - 试图理解 C 指针、块和 go to 语句的问题

> ID：13349256
> 
> 赞同：3
> 
> 时间：2012-11-12T18:22:00.633
> 
> 标签：c

当我通过 Jim Trevor为 PL 课程编写的“ [Cyclone: A safe dialect of C ”时，我正在尝试掌握 C 和 Cyclone。](http://www.cs.umd.edu/projects/cyclone/papers/cyclone-safety.pdf)Trevor 给出了一个不安全的 go-to 语句的例子：

```
int z;
{ int x = 0xBAD; goto L; }
{ int *y = &z;
L: *y = 3; // Possible segfault
} 
```

Trevor 对上述代码中的安全问题解释如下：

许多编译器在进入块时堆栈分配块的局部变量，并在块退出时释放（弹出）存储（尽管这不是 C 标准强制要求的）。如果示例以这种方式编译，那么当程序进入第一个块时，x 的空间会在堆栈上分配，并使用值 0xBAD 进行初始化。goto 跳转到第二个块的中间，直接对指针 y 的内容进行赋值。由于 y 是在第二个块中声明的第一个（唯一）变量，因此赋值期望 y 位于堆栈的顶部。不幸的是，这正是 x 被分配的位置，因此程序尝试写入位置 0xBAD，可能会触发分段错误。

我不明白为什么`go to`这里的声明是一个问题。似乎问题是来自未初始化的指针 Z 的不可预测的行为。在第二个块的开头，`int * y`用 Z 的地址填充。Z 未初始化，因此它将`int* y`用堆栈上的位模式填充Z 引用的内存。我不明白为什么 Trevor 的论文暗示 Z 和 X 都引用了 0xBAD。C 不会为第一个块创建一个新的堆栈帧（如 Trevor 所述）：因此将 0xBAD 写入内存中的新帧（而不是 Z 引用的内存位置）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T18:26:26.880

> 我不明白为什么 go to 声明在这里是一个问题。

`goto L`绕过`y`(`y`不会被设置为`&z`) 的初始化，因此分配给 who-knows-where-it's-pointing 时会出现问题`*y`。

> 似乎问题是来自未初始化的指针 Z 的不可预测的行为

不，指针`&z`实际上是有效的。该`int`值`z`未初始化，但这并不重要，因为您从不尝试读取它；您实际上是在尝试覆盖它。

> 在第二个块的开始处， int * y 被填入 Z 的地址。

这就是我想说的。 `goto L`绕过它。

> 我不明白为什么 Trevor 的论文暗示 Z 和 X 都以某种方式引用 0xBAD

我认为 Trevor 在这里暗示了第二个潜在问题，尽管我不确定有多少编译器（如果有的话）会真正展示它。当使用 离开块时`goto`，堆栈指针（例如`ESP`在 x86 上）理论上可能不会递减。通过跳过 的初始化`y`，堆栈指针也可能不会增加。因此，如果编译器使用堆栈指针（而不是帧指针，例如在 x86 上）来引用局部变量，那么`EBP`理论上这样的编译器可能会误认为`x`，`y`就好像`int* y = 0xBAD`发生了一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T18:31:44.643

如果您删除块并分离出值的初始化和声明，则更容易理解问题。

```
int z;
int *y;
goto L;
y = &z;
L: 
*y = 42; 
```

这基本上是原始样本中发生的情况，但更清晰一些。在这里，该行`y = &z`永远不会执行，因此`y`指向一个未定义的位置，因此它的设置是不安全的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T19:03:56.570

就语言而言，程序的行为只是未定义的。`goto`跳过`y`初始化；指针对象存在，但它不指向任何已定义的位置。取消引用`y`具有未定义的行为。

但是更详细地查看代码，并对它的行为方式做出一些（无根据的）假设：

```
int z;
{ 
    int x = 0xBAD; goto L; 
}   
{ 
    int *y = &z;
    L: *y = 3; // Possible segfault
} 
```

局部变量（通常）分配在堆栈上。当控制到达包含其定义的块的末尾时，每个局部变量将不复存在。

我认为这个想法是第一个块创建一个`int`object `x`，并将值分配`0xBAD`给它。 当将控制权转移出该块`x`时不再存在- 但该值可能仍然存在于堆栈顶部的上方。`goto``0xBAD`

将`goto`控制权转移到第二个块。它跳过 的初始化`y`，但不跳过它的分配；指针对象`y`仍然分配在堆栈上，无论控制是直接进入块还是通过`goto`语句进入块。如果该`0xBAD`值留在栈顶之上，那么`y`可以很容易地分配到相同的位置；由于跳过了初始化，因此`0xBAD`可以将值保留在中`y`（或者更确切地说，构成保留`int`表示的位并被解释为指针值）。`0xBAD``y`

所以赋值`*y = 3;`尝试将值存储`3`在内存位置`0xBAD`。

这可能是定义、初始化和使用变量的基本原理`x`：将特定的垃圾值留在`y`.

但事实上，我在这里（在第一段之后）描述的行为*都不是 C 标准所要求的。*并行块中的对象（如示例中的对象）可能存储或可能不存储在相同的内存位置。的初始化`x`，甚至它在堆栈上的分配，都可以很容易地被优化编译器消除。甚至不需要在“堆栈”上分配局部变量（在由堆栈指针管理的连续内存区域的意义上）；C 标准甚至不使用“堆栈”这个词。连续堆栈是实现局部变量所需语义的最自然方式，但这不是必需的。nd 当然 an`int`和 an`int*`不必是相同的大小。

底线：`*y = 3;`执行时，值`y`是未初始化的垃圾（我故意避免使用“随机”一词），因此取消引用的行为`y`是未定义的。给定某些假设，这些垃圾*可能*恰好看起来像`0xBAD`，但这并不重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T18:29:51.060

正如您所说，问题在于变量`y`可能在初始化之前被访问。您提供的代码片段只是可能证明问题的一种方式。

当我使用带有`-Wall`选项的 GCC 编译它时，它会警告`warning 'y' is used uninitialized in this function`. 如果我用 g++ 将它编译为 C++ 代码，那实际上是一个错误：

```
test.cc:8:3: error: jump to label ‘L’
test.cc:6:25: error:   from here
test.cc:7:10: error:   crosses initialization of ‘int* y’ 
```

尽管在这种情况下`y`是 POD 类型，但如果它是具有构造函数的类，`goto`则会跳过构造函数。C++ 语言规范说这在所有情况下都是非法的。

# php - Foreach 没有显示多个变量

> ID：13349259
> 
> 赞同：0
> 
> 时间：2012-11-12T18:22:08.093
> 
> 标签：php, xml, foreach

目前我有以下代码，但由于某种原因它只输出一项

基本上我试图做的是说 foreach`mainPropertyUrl`创建一个列表 foreach 列表但由于某种原因我只得到一个`ListingId`

主要提要位于 - [http://api.trademe.co.nz/v1/Member/4389666/Listings/All.xml](http://api.trademe.co.nz/v1/Member/4389666/Listings/All.xml)

**PHP：**

```
 $mainXmlUrl = simplexml_load_file("http://api.trademe.co.nz/v1/Member/4389666/Listings/All.xml");

 $listing = $mainXmlUrl->List->Listing;

 $mainPropertyUrl = simplexml_load_file("http://api.trademe.co.nz/v1/Listings/$listing->ListingId.xml"); 
```

在我的 HTML 中，我尝试做一个通用的 foreach 循环，但不使用该`$url`变量，因为我不确定如何使用适用于一个列表的代码来实现它。

我还尝试创建一个列表 ID 数组，但它没有显示数据：

```
$ListingArray = array();

            foreach ($listing[0] as $id) {

                $IDNum = $id->ListingId;

                $ListingArray[] = $IDNum;
            }

            var_dump($ListingArray); 
```

**HTML 片段：**

```
<?php foreach ($mainPropertyUrl as $url): ?>

<div class="listingContainer">
<h2><?php echo $tradeMePropertyAddressFull;?></h2>
<div class="listingAttributes">
<div class="col0">
<span class="name"><?php echo $mainPropertyDetails[0]->Attribute[0]->DisplayName;?>:</span>
<span class="value"><?php echo $tradeMePropertyBathrooms[0];?></span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T18:49:23.220

尝试：

```
$mainPropertyUrl = simplexml_load_file("http://api.trademe.co.nz/v1/Listings/{$listing->ListingId}.xml"); 
```

您需要使用`{}`对象访问语法。

更新：

`$listing`是一个数组，所以你的循环应该是：

```
foreach($listing as $l) {
    $ListingArray[] = "$l->ListingId";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T20:18:36.297

您的 $mainXmlUrl 包含一个简短格式的几个列表的列表。对于这些列表中的每一个，您都需要使用新的 ListingId 调用 $mainPropertyUrl 以获取该特定列表的详细信息。

您可以循环访问 $mainXmlUrl->List->Listing，并且在每个节点上，您将能够检索 ListingId 作为属性。

```
$mainXmlUrl = simplexml_load_file("http://api.trademe.co.nz/v1/Member/4389666/Listings/All.xml");

$listingIds = array();

foreach ($mainXmlUrl->List->Listing as $listing) {
    // $listing->ListingId is actually an XML object that has a __toString method.
    // Hence the type casting below.
    $listingIds[] = (string) $listing->ListingId;
}

print_r($listingIds); 
```

要检索有关每个列表的详细信息，您需要在每个列表 ID 上调用 mainPropertyUrl。

```
$mainXmlUrl = simplexml_load_file("http://api.trademe.co.nz/v1/Member/4389666/Listings/All.xml");

foreach ($mainXmlUrl->List->Listing as $listing) {
    $mainPropertyUrl = simplexml_load_file("http://api.trademe.co.nz/v1/Listings/{$listing->ListingId}.xml");

    // $mainPropertyUrl is an XML object containing the detailed information on one listing
    print_r($mainPropertyUrl);
} 
```

这将导致对每个属性进行单独的 API 调用，因此如果 TradeMe 限制了您在给定时间段内可以发出的请求数量，请注意 API 速率限制。

可能有一种方法可以在一次点击中检索多个列表详细信息，这比点击 API 一次以获取产品列表，然后再次针对该结果中的每个列表点击更有效。你需要查阅他们的文档，因为我不熟悉这个 API。

```
$mainXmlUrl = simplexml_load_file("http://api.trademe.co.nz/v1/Member/4389666/Listings/All.xml");

foreach ($mainXmlUrl->List->Listing as $listing) {
    $mainPropertyUrl = simplexml_load_file("http://api.trademe.co.nz/v1/Listings/{$listing->ListingId}.xml");

    echo '<div class="listingContainer">';
    foreach ($mainPropertyUrl->Attributes->Attribute as $attribute) {
        echo '<span class="name">'.$attribute->DisplayName.':</span>';
        echo '<span class="value">'.$attribute->Value.'</span>';
    }
} 
```

# ios - 鉴于 Xcode 不再支持 armv6，您如何为 < iOS 4.3 构建/分发？

> ID：13349262
> 
> 赞同：2
> 
> 时间：2012-11-12T18:22:19.683
> 
> 标签：ios, xcode

> **可能重复：**
> [如何支持 armv6 和 armv7s 以在 xcode 4.5 中发布构建](https://stackoverflow.com/questions/12619124/how-to-support-both-armv6-and-armv7s-for-release-build-in-xcode-4-5)

我需要支持 iOS 4.0 及更高版本。

但是 Xcode 不再支持 armv6，因此是否可以构建和分发支持 4、5 和 6 的单个应用程序？

我的理解是，如果我要使用旧版本的 Xcode 构建，那么它将无法支持 4 英寸 iPhone 5 屏幕尺寸。

因此，现在似乎不可能创建一个可以支持 4.0 以上的应用程序。这是正确的吗？是否有必要为 4.3 及更高版本创建一个应用程序，为 < 4.3 创建一个应用程序？

如果是这种情况，那么这是否意味着 2 个单独的应用程序提交？他们是否必须在应用商店中以不同的名称命名，或者它们是否可以具有相同的名称等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:45:33.463

苹果希望你升职，所以他们强迫你做出这个决定。我认为制作两个版本不是一个好主意。问题是旧版本可以用于所有设备，但新版本只能在现代设备上运行（无论如何这是绝大多数设备）。

我认为你应该考虑这个计划。

1.  如果您的应用程序已经在商店中，请尽可能多地更新它，同时继续支持 < iOS 4.3 并让人们有时间升级到它。如果它是一个新应用程序，则提交它并执行相同的操作。

2.  将其更新到最新的 SDK 并最终提交更新，即 > iOS 4.3。

这将使您给每个人一个机会，但最终您将在商店中只有一个构建（有两个会使人们感到困惑并降低您的排名，因为它将被共享）。

我认为这可能是一个很好的策略，除非您拥有数百万用户，并且您知道您的大部分活跃使用是在无法升级的非常旧的硬件上。

# php - 在同一个 div 中解析嵌套的 json

> ID：13349264
> 
> 赞同：0
> 
> 时间：2012-11-12T18:22:26.853
> 
> 标签：php, ajax, json, parsing

> **可能重复：**
> [嵌套 json 到 php 搜索列表](https://stackoverflow.com/questions/8462618/nested-json-to-php-search-listing)

我正在尝试解析一些 JSON，我目前在一个页面上解析了所有内容，但是它的信息太多，无法放在一个页面上，我希望能够通过列出父对象“教堂”来过滤它，然后是父单击我希望列出子（嵌套）对象“曲目”（基本上是通过 JSON 过滤），（想想你的 iPod 你点击一个艺术家（这是“教堂”）然后是一张专辑（其中是“专辑”，然后是曲目（在 json 中是“曲目”）

**那么如何使父对象成为解析下一级 JSON 的链接呢？**

你可以访问[http://ggcc.tv/JSON_Parsers/Music.php](http://ggcc.tv/JSON_Parsers/Music.php)看看我到目前为止有什么

请帮忙，谢谢。

PHP：http://www.godsgypsychristianchurch.net/music.json'；$content = file_get_contents($filepath); $json = json_decode($content, true);

```
 $count = 0;
    foreach ($json['rows'] as $row) {
        ++$count;

        echo "<h1>Row: {$count}</h1>";
        echo "Album: {$row[doc]['album']}<br />";
        echo "Church: {$row[doc]['church']}<br />";
        echo "Description: {$row[doc]['des']}<br />";
        echo "<img src=\"{$row['doc']['artwork']}\" alt=\"my image \" width=\"250\" /><br /><br />";

        $songCount = 0;
        foreach ($row['doc']['tracks'] as $song) {
            ++$songCount;
            echo $song['name'] . ' - ';

            $songUrl = $row['doc']['baseurl'] . urldecode($song['url']);
            echo "<a href=\"{$songUrl}\">{$songUrl}</a><br />";
        }
        echo '<br /><br />';
    }

    exit;
?> 
```

JSON（[http://www.godsgypsychristianchurch.net/music.json](http://www.godsgypsychristianchurch.net/music.json)）：

```
{"total_rows":1,"offset":0,"rows":[

              {"id":"All Things Are Possible",
"key":"All Things Are Possible",
"doc":{"_id":"All Things Are Possible",
"album":"All Things Are Possible",
"artwork":"http://godsgypsychristianchurch.net/music_artwork/DEFAULT_COVER2.png",
"baseurl":"http://www.godsgypsychristianchurch.net/music",
"church":"Atlanta GA",
"cityartwork":"http://www.ggcc.tv/LogoNE.png",
"des":"All Things Are Possible from the Atlanta GA Church, Pastor Nick White",
"tracks":[
    {"name":"1 Intro",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/01%20Intro.mp3"},

            {"name":"2 Wo si O Drom",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/02%20Wo%20si%20O%20drom.mp3"},

            {"name":"3 Nas Murrgo Shov",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/03%20Nas%20murrgo%20shov.mp3"},

            {"name":"4 To Cho Vos",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/04%20To%20cho%20vos.mp3"},

            {"name":"5 Tu Son Kai Sastridas",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/05%20Tu%20son%20kai%20sastridas.mp3"},

            {"name":"6 Now I Am Strong",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/06%20Now%20I%20am%20strong.mp3"},

            {"name":"7 Sorr Nevee",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/07%20Zorr%20nevee.mp3"},

            {"name":"8 Preaching",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/08%20Preaching.mp3"},

            {"name":"9 Arkadyan Amey",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/09%20Arkadyan%20amey.mp3"},

            {"name":"10 O Christo Ka Wudarr",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/10%20O%20Christo%20ka%20wudarr.mp3"},

            {"name":"11 Eloi, Eloi",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/11%20Eloi%2C%20Eloi.mp3"},

            {"name":"12 Amadow Dell",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/12%20Amadow%20Dell.mp3"},

            {"name":"13 Sastiar Amey Devla",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/13%20Sastiar%20amey%20Devla.mp3"},

            {"name":"14 Tu Skepeese",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/14%20Tu%20skepeese.mp3"},

            {"name":"15 Dov Ma Godgee",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/15%20Dov%20ma%20godgee.mp3"},

            {"name":"16 The Lord is my strength",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/16%20The%20Lors%20is%20my%20strength.mp3"}
  ]}}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:42:41.120

假设你想把教堂和他们的音乐联系起来，首先你会循环遍历教堂的名字，把它们排列起来，去重复，打印出来，像这样链接它们

```
$churches = array();

foreach ($json['rows'] as $row)
{
    if (!in_array($row[doc]['church'], $churches))
        $churches[] = $row[doc]['church'];
}

foreach ($churches as $church)
{
    print '<a href="getchurchmusic.php?churchname=' . urlencode($church) . '><br />' . htmlentities($church) . '</a>'; }
} 
```

然后在 getchurchmusic.php 中做你现在正在做的事情，但过滤教堂

```
 foreach ($json['rows'] as $row)
    {
            if ($_GET['churchname'] == $row[doc]['church'])
            {
                    /* print out songs or whatever */

            }
    } 
```

这未经测试，效率不高 - 您应该将所有这些数据放入数据库中，缓存文件等，并且不是 XSS 免费的，这只是粗略的代码，可以为您提供一个起点

# passwords - phpmyadmin(APPSERV v:2.5.9) 为什么我无法访问 phpmyadmin 主页

> ID：13349267
> 
> 赞同：0
> 
> 时间：2012-11-12T18:22:59.873
> 
> 标签：passwords, localhost, root, appserver

当我尝试转到“localhost/phpymadmin”时，它要求我输入名称和密码

```
name : root
password: 123 
```

虽然我输入了我的密码，但我无法访问它，它一遍又一遍地问我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T14:42:10.173

当您安装 AppServ 时，它会询问用户名和密码，您可以在那里设置自己的用户名和密码。

你可以试试user=root，password=root

试试这个，希望它能让你访问

谢谢

# python - 为什么我的客户端/服务器不工作？

> ID：13349271
> 
> 赞同：-3
> 
> 时间：2012-11-12T18:23:16.487
> 
> 标签：python, sockets

当我一起运行客户端/服务器并尝试发送消息时，它们似乎都没有收到任何东西。为什么？

客户端.py：

```
import socket, sys
import threading

# Client for WutChat #

PORT = 5000

queue = []

def exitClient(s):
    s.close()
    print "Exiting..."
    sys.exit()

def connect(host, port):
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    try: s.connect((host, port))
    except: return "error"
    return s

def recieveData(s):
    while True:
        data = s.recv(512)
        if not data: continue
        if data in queue:
            continue
        queue.append(data)
        print data

def sendData(s):
    while True:
        try: data = raw_input(">")
        except EOFError: exitClient(s)
        if data == "": print "no msg"; continue;
        if data.startswith("/"):
            print "Command detected"
            continue
        s.send(data)

if __name__ == "__main__":
    s = connect(sys.argv[1], int(sys.argv[2]))
    threading.Thread(target=recieveData, args=(s,)).start()
    threading.Thread(target=sendData, args=(s,)).start() 
```

服务器.py：

```
import socket, sys
import threading

# Server for WutChat #

PORT = 5000
DEBUG = True

conns = {}
msgqueue = []

def connect():
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    try: s.bind(("", int(sys.argv[1])))
    except IndexError: s.bind(("", PORT))
    s.listen(1)

    while True:
        addr, obj = s.accept()
        conns[addr] = obj

        print str(addr)+" connected!"

        threading.Thread(target=handle, args=(addr, obj, s,)).start()

def handle(addr, obj, s):
    while True:
        try: msg = obj.recv(512)
        except:
            continue

        print msg
        msg = addr + msg

        msgqueue.append(msg)
        if DEBUG: print msgqueue

        for conn in conns:
            for message in msgqueue:
                conns[conn].send(message)
                del message

if __name__ == "__main__":
    connect() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:29:47.973

您已经切换了[accept](http://docs.python.org/2/library/socket.html#socket.socket.accept)的结果元组：

```
addr,obj = s.accept() 
```

应该

```
obj,addr = s.accept() 
```

要查找此类错误，请删除通用的 try..except 块`handle`，并仅捕获您想要的特定错误。在您的特定情况下（如果`obj.recv`失败），您可以*catch* `socket.error`，但发生这种情况时唯一明智的做法是关闭套接字并终止线程。

在不相关的注释中，您可能希望有一个比`obj`. 怎么`client_sock`样`sock`？

还，

```
msg = addr + msg 
```

将失败，因为 addr 是一个元组，而 msg 是一个字节串。你要

```
msg = repr(addr).encode('utf-8') + msg 
```

此外，

```
del message 
```

只是删除 name `message`，并且在您的情况下是[无操作](http://en.wikipedia.org/wiki/No-op)的。您可能想[`Queue.get`](http://docs.python.org/2/library/queue.html#Queue.Queue.get)改用。

# algorithm - 寻找更好的压缩技术

> ID：13349278
> 
> 赞同：8
> 
> 时间：2012-11-12T18:23:46.027
> 
> 标签：algorithm, compression

我正在压缩由数据包组成的二进制流

一个数据包由 256 个 32 位整数（样本）组成。问题是大多数整数与前一个整数相比仅更改了几位（通常，与流中的前一个样本相比，0 - 4 位最多更改）。

这是一个例子：

```
3322 2222 2222 1111 1111 1110 0000 0000    BIT POSITIONS
1098 7654 3210 9817 6543 2109 8765 4321
--------------------------------------------------------
1100 1001 1110 0010 0001 0101 0110 1101    Sample 1  
               *                   * 
1100 1001 1110 1010 0001 0101 0110 0101    Sample 2     changes: bit 19, 4

1100 1001 1110 1010 0001 0101 0110 0101    Sample 3     changes: none
     *            *            *   
1100 0001 1110 1011 0001 0101 0010 0101    Sample 4     changes: bit 27, 17, 7
... 
```

我目前的无损压缩方案是基于半字节的。基本上我使用的是一个控制字节，我正在编码 - 使用单个位 - 它的半字节从前一个样本发生了变化；如果有变化，我将在压缩流中包含修改后的半字节，否则它们将在解压缩时从先前的样本中重建。

以下是我提供的示例流的压缩方式：

```
Control Byte: 11111111     // all nibbles change, since this is first sample
Data:         1100 1001 1110 0010 0001 0101 0110 1101 // data for all nibbles
Control Byte: 00010001     // only nibbles 3 and 7 have changes
Data:         1010 0101    // data for nibbles 3 and 7
Control Byte: 00000000     // no nibbles are changing
Data:                      // no data is required
Control Byte: 01010010     // nibbles 1, 3 and 6 have changes
Data:         0001 1011 0010   // nibbles 1, 3 and 6
... 
```

使用这种方案，我们有 256 字节（控制字节）的固定开销，平均可变压缩数据长度为 260 字节（从样本到样本变化的半字节）。考虑到未压缩数据包的长度为 1024 字节，这实际上给了我们 50% 的平均压缩率。

这还不错，但我的直觉是可能有更好的方法。有没有人知道更好的压缩策略，它利用了很少有位从样本到样本的变化这一事实？只要解压缩后的误码率很小（小于 3%），有损压缩就是一种替代方案——对于这个特定的数据流，位位置的数值权重是无关紧要的，因此在较高位中发生的错误是完全不用担心。

提前谢谢大家！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T18:44:07.257

如果您发送未压缩的第一个整数，并为其他 255 个整数计算此整数与前一个整数之间的异或，您将获得一个位流，其中非零位非常罕见。这个比特流可以用[算术编码进行编码](http://en.wikipedia.org/wiki/Arithmetic_coding)。

如果在计算相邻值之间的异或之后，我们有一个比特流，其中比特相互独立（每个“0”或“1”比特具有相同的概率，独立于整数中的比特位置，独立于数据包中的整数位置） ，算术编码保证最佳的无损压缩率。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T18:38:32.690

您最好的选择是使用现有技术（例如，Lempel-Ziv-Welch；flate）或在这种方法之前使用差异编码（可能更好）。使用差异编码，您将用该字节与之前字节之间的差异替换每个字节（第一个字节除外）。现在你应该得到很多零，并穿插一些小值。霍夫曼编码或类似 LZW 的东西将非常彻底地压缩大部分为零的字符串。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-12T19:04:59.980

您可以对输入数据进行 XOR。因为只有少数位发生变化，所以这将为您提供主要由少数位组成的`0`结果`1`。

```
1100 1001 1110 0010 0001 0101 0110 1101    Sample 1  
1100 1001 1110 1010 0001 0101 0110 0101    Sample 2     
1100 1001 1110 1010 0001 0101 0110 0101    Sample 3     
1100 0001 1110 1011 0001 0101 0010 0101    Sample 4 
```

在起始值之后，这将产生一个序列

```
0b0000 0000 0000 1000 0000 0000 0001 0000, 
0b0000 0000 0000 0000 0000 0000 0000 0000, 
0b0000 1000 0000 0010 0000 0000 1000 0000 
```

您现在可以使用各种标准压缩算法。8 字节序列的 Huffman 编码、LZW 或熵编码，但一个好的尝试可能是简单的位运行长度编码，从位位置 0 开始计算每个位之间的零位：

```
4, 14, 51, 9, 9 
```

如果您将运行长度限制为 30 并选择转义符号 31，意思是“将 31 添加到下一个运行长度”，您会得到

```
4, 14, 31, 20, 9, 9 
```

这将是整个序列的 6*5 位。您现在可以对其进行霍夫曼*编码*...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T19:02:16.367

从您的示例看来，更改的少数位并不总是相同的（例如，始终是最低的 4 位）。所以我建议对转置数组上的位进行简单的运行长度编码。如果没有您的数字/数据的分布，我建议从 4 位开始，但您可以尝试一些示例输入。

伪代码（用于压缩）如下所示：

```
 for bitpos = 0 to 31
     for datapos = 0 to 255 
         BitString.append(getbit(data[datapos], bitpos);
     endfor
 endfor

 result="";
 pos = 0;
 while (notEndOfString)
     # count 1s
     count = 0;
     while (pos < 32*256 AND count < 16 AND BitString[pos]==1)
         count++;
         pos++;
         endwhile
     result.append4BitNumber(count);
     # count 0s
     count = 0;
     while (pos < 32*256 AND count < 16 AND BitString[pos]==0)
         count++;
         pos++;
         endwhile
     result.append4BitNumber(count);
 endwhile 
```

也许可以通过事后应用 Lempel-Ziv 或 Huffman 编码来增加压缩率——但如果没有关于输入数据分布的更多信息，就不能说更多（这通常适用于这个问题——输入数据的更好信息，可以对其进行某种压缩）。

**编辑**：另一种简单的方法是对变化的位位置进行编码：从初始的 32 位字开始，然后为每个数据字存储 3 位，定义位的变化量（即 0..7），然后您存储 0..7 乘以 4 位，其中 4 位编码 chaning 位的位置。这意味着当平均 2 位更改时，您的 32*256 位数据包需要 32+255*(3+8)=2837 => 大约其原始大小的 35%。

如果您经常有相同数量的位变化，那么这 4 位模式中的一些会经常出现，而另一些则根本不会出现 => 在这 4 个位组上的霍夫曼编码会将其压缩到最佳状态（如果您知道这些模式概率永远不会改变，你甚至可以制作一个静态的霍夫曼树，所以你不必存储它）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-12T19:10:58.633

我的想法与 Evgeny Kluev 的想法相似。第一个整数未压缩发送，其余的变为自身和前一个整数的 XOR。

```
1100 1001 1110 0010 0001 0101 0110 1101    Sample 1  
               *                   * 
0000 0000 0000 1000 0000 0000 0000 1000    Sample 2

0000 0000 0000 0000 0000 0000 0000 0000    Sample 3
     *            *            *   
0000 1000 0000 0001 0000 0000 0100 0000    Sample 4 
```

现在，我没有将稀疏数据分成块并在这里进行算术编码，而是进一步转换数据。因为实际上，算术编码是基于数据频率不相等的。看着这个，你觉得

```
0000 0000 0000 1000 0000 0000 0000 1000 
```

会出现比

```
0000 1000 0000 0001 0000 0000 0100 0000 
```

或相反亦然？

好的，这就是我将如何进一步转换数据。让其余数据成为描述连续零个数的数字序列。例如，数据变为：

```
1100 1001 1110 0010 0001 0101 0110 1101    Sample 1  followed by decimals
12, 15, 39, 10, 9, 6 
```

现在您可以对这些尾随小数执行算术编码。这次频率会有意义！因为您在问题中说变化很小，这意味着更多的连续零会出现更多。

编辑：这个答案与 hirschhornsalz 的答案完全相同。除了他还提到你可以限制零的最大数量并将它们分开......

# xcode - iOS 应用程序中的间歇性 SIGABRT 和 SIGSEGV 崩溃

> ID：13349283
> 
> 赞同：2
> 
> 时间：2012-11-12T18:24:09.287
> 
> 标签：xcode, sigabrt, segmentation-fault, ios

我一直在我的 iOS 应用程序中注意到一些崩溃问题。但是，我无法观察到我的任何设备发生的崩溃，因此我依赖于用户发送给我的崩溃日志。这是 3 个看起来相似的符号化崩溃日志的示例（我在线程 0 堆栈跟踪之后切断了所有内容，其余的崩溃日志似乎没有任何有用的信息）：

崩溃日志 1：

```
Date/Time:       2012-11-07 16:40:21 +0000
OS Version:      iPhone OS 6.0 (10A403)
Report Version:  104

Exception Type:  SIGABRT
Exception Codes: #0 at 0x3c210350
Crashed Thread:  0

Thread 0 Crashed:
0   libsystem_kernel.dylib              0x00011350 __pthread_kill + 8
1   libsystem_c.dylib                   0x0006b973 abort + 95
2   libc++abi.dylib                     0x00003d4f abort_message + 75
3   libc++abi.dylib                     0x00000ff9 default_terminate() + 25
4   libobjc.A.dylib                     0x00008a77 _objc_terminate() + 147
5   libc++abi.dylib                     0x0000107b safe_handler_caller(void (*)()) + 79
6   libc++abi.dylib                     0x00001114 std::terminate() + 20
7   libc++abi.dylib                     0x00002599 __cxa_current_exception_type + 1
8   libobjc.A.dylib                     0x000089d1 objc_exception_rethrow + 13
9   CoreFoundation                      0x00008f21 CFRunLoopRunSpecific + 457
10  CoreFoundation                      0x00008d49 CFRunLoopRunInMode + 105
11  GraphicsServices                    0x000052eb GSEventRunModal + 75
12  UIKit                               0x00057301 UIApplicationMain + 1121
13  TheApp                              0x000c7c17 -[StatusEditViewController grabData] (StatusEditViewController.m:75) 
```

崩溃日志 2：

```
Date/Time:       2012-10-25 14:46:23 +0000
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  SIGABRT
Exception Codes: #0 at 0x35d1b32c
Crashed Thread:  0

Thread 0 Crashed:
0   libsystem_kernel.dylib              0x35d1b32c __pthread_kill + 8
1   libsystem_c.dylib                   0x34efc29f abort + 94
2   libc++abi.dylib                     0x35513f6b abort_message + 46
3   libc++abi.dylib                     0x3551134d _ZL17default_terminatev + 24
4   libobjc.A.dylib                     0x338c9357 _objc_terminate + 146
5   libc++abi.dylib                     0x355113c5 _ZL19safe_handler_callerPFvvE + 76
6   libc++abi.dylib                     0x35511451 _ZdlPv + 0
7   libc++abi.dylib                     0x35512825 __cxa_current_exception_type + 0
8   libobjc.A.dylib                     0x338c92a9 objc_exception_rethrow + 12
9   CoreFoundation                      0x35bfb50d CFRunLoopRunSpecific + 404
10  CoreFoundation                      0x35bfb36d CFRunLoopRunInMode + 104
11  GraphicsServices                    0x33996439 GSEventRunModal + 136
12  UIKit                               0x333d3cd5 UIApplicationMain + 1080
13  TheApp                              0x000c7c17 -[StatusEditViewController grabData] (StatusEditViewController.m:75) 
```

尤其令人困惑的是，崩溃日志 3：

```
Date/Time:       2012-11-12 11:00:21 +0000
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  SIGSEGV
Exception Codes: SEGV_ACCERR at 0x7142fa3c
Crashed Thread:  0

Thread 0 Crashed:
0   libobjc.A.dylib                     0x314d8f78 objc_msgSend + 15
1   UIKit                               0x31c1d6d7 -[UIPrintPanelViewController dismissPrintPanel:animated:] + 50
2   UIKit                               0x31c920dd __73-[UIPopoverController _completionBlockForDismissalWhenNotifyingDelegate:]_block_invoke_0 + 284
3   UIKit                               0x318db4db -[UIViewAnimationBlockDelegate _didEndBlockAnimation:finished:context:] + 214
4   UIKit                               0x318d5aab -[UIViewAnimationState sendDelegateAnimationDidStop:finished:] + 470
5   UIKit                               0x318db3d5 -[UIViewAnimationState animationDidStop:finished:] + 52
6   QuartzCore                          0x3552ec2f _ZN2CA5Layer23run_animation_callbacksEPv + 202
7   libdispatch.dylib                   0x34838ee7 _dispatch_main_queue_callback_4CF$VARIANT$mp + 194
8   CoreFoundation                      0x316662ad __CFRunLoopRun + 1268
9   CoreFoundation                      0x315e94a5 CFRunLoopRunSpecific + 300
10  CoreFoundation                      0x315e936d CFRunLoopRunInMode + 104
11  GraphicsServices                    0x32ac2439 GSEventRunModal + 136
12  UIKit                               0x318eecd5 UIApplicationMain + 1080
13  TheApp                              0x000c7c17 -[StatusEditViewController grabData] (StatusEditViewController.m:75) 
```

如您所见，这些崩溃日志在线程 0 堆栈跟踪中都有 14 个条目（不确定这是不是巧合），并且底部的项目是应用程序中的同一行代码。这行代码非常无害，它只是调用了一个类方法，该方法在编辑视图控制器上输入的数据无效的实例中显示 UIAlertView，并且传入的字符串是常量，而不是变量。

在崩溃日志 3 中，有对 UIPrintPanelViewController 的引用，虽然我的应用确实具有打印功能，但无法同时打开打印弹出框和状态编辑弹出框，所以我不确定为什么会这样说它试图在崩溃期间关闭打印面板。

有人对我如何解决这个问题有任何提示或策略吗？（我正在针对最新的 iOS SDK 和 Xcode 4.5.1 进行构建。）

编辑：这是应用程序中的违规代码行：

```
[Utils msgBox:@"Entry required" message:@"Please enter a value for the Status field before tapping Save."]; 
```

由于这可能是下一条评论的主题，这里是 Utils.m 中 msgBox 的类方法：

```
+ (void)msgBox:(NSString *)inTitle message:(NSString *)inMessage
{

    UIAlertView *alert = [[UIAlertView alloc]
                      initWithTitle:inTitle
                      message:inMessage
                      delegate:nil
                      cancelButtonTitle:@"OK"
                      otherButtonTitles:nil];
    [alert show];
    [alert release];
} 
```

由于堆栈跟踪没有显示任何进入 Utils 类的记录，我猜想在调用类方法之前发生了一些事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T16:41:19.970

你得到这个是因为你`[alert show];`从后台线程（从`grabData`）调用。

最快的解决方案：

```
dispatch_async(dispatch_get_main_queue(), ^{
   [alert show];
}); 
```

*我知道你（一年前）已经解决了它，但也许它会帮助其他人（比如我）。*

# python - 使用列表进行排序

> ID：13349295
> 
> 赞同：-4
> 
> 时间：2012-11-12T18:24:52.850
> 
> 标签：python, sorting

```
nonpalidrome=[]
for word in lowers:
    if len(word)>=7:
        if word[2:-2:1]==word[2:-2:-1]:
            if word[1]!=word[-1]:
                nonpalidrome.append(word) 
```

这就是我到目前为止我想做的是：

> 通过过滤 lowers 列表，创建满足以下所有三个条件的单词列表，完成后打印列表：
> 
> 该词至少有 7 个字符长；单词的中间，跳过第一个和最后一个字母，是一个回文（向前和向后一样）；这个词本身不是回文。

我觉得我真的很亲近..我错过了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:32:57.013

由于您的问题是您的结果列表为空，这意味着您的条件之一不起作用：

```
if len(word)>=7:

if word[2:-2:1]==word[2:-2:-1]:

if word[1]!=word[-1]: 
```

我会尝试的第一件事是`print`在每个语句之后添加语句以缩小问题范围：

```
nonpalidrome=[]
for word in lowers:
    print("Got word " + word)
    if len(word)>=7:
        print("len(word) >= 7")
        if word[2:-2:1]==word[2:-2:-1]:
            print("word[2:-2:1]==word[2:-2:-1]")
            if word[1]!=word[-1]:
                print("word[1]!=word[-1]")
                nonpalidrome.append(word) 
```

现在您可以查找没有出现的打印语句，并且您会知道哪个`if`语句没有达到您的预期结果。

顺便说一句，您的代码比它需要的要复杂得多。为什么不循环遍历字符串而不是比较像 1 和 2 这样的硬编码索引？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:32:20.133

尝试这样的事情：

```
for word in lowers :
   if len(word) >=7 and word[1:-1] == word[1:-1][::-1] and word [0] != word[-1]:
       nonpalindrome.append(word) 
```

用于`[1:-1]`获取单词的中间，`[::-1]`用于获取反转字符串以匹配是否为回文：

```
In [172]: word='ballooned'

In [173]: word[1:-1] 
Out[173]: 'alloone'

In [174]: word[1:-1][::-1]
Out[174]: 'enoolla'

In [175]: word[::-1]
Out[175]: 'denoollab' 
```

或使用列表理解：

```
non_palindrome=[x for x lowers if len(x)>=7 and x[1:-1]==x[1:-1][::-1] and x[0] != x[-1] ] 
```

# django - 我如何使用tastepie 登录facebook？

> ID：13349298
> 
> 赞同：2
> 
> 时间：2012-11-12T18:25:07.740
> 
> 标签：django, tastypie

我正在构建一个 Django-tastypie 服务器来与移动客户端进行通信。为了登录 Django 服务器，用户必须首先在移动客户端登录他的 facebook 帐户。移动客户端获取 accessToken 和 facebook id 后，会将 AuthResouce 与 facebook_id(as userName) 和 accessToken 发布到 Django 服务器。

在 AuthResource 的 obj_create

1.  使用 userName 查找用户。
2.  如果用户存在。我将查找用户和 api 密钥。
3.  如果没有找到用户，我会创建一个用户。

问题是我不知道

1.  我应该使用什么 AuthResource 的身份验证？身份验证（）或 APIkeyAuthentication（）？
2.  如何处理用户模型的密码属性？设置为NULL？
3.  我的代码对吗？

```
 class UserResource(ModelResource):
    def get_object_list(self, request, *args, **kwargs):
        return User.objects.filter(username=request.user.username)

    class Meta:
        queryset = User.objects.all()
        resource_name = 'auth/user'
        excludes = ['email']
        authentication = ApiKeyAuthentication()
        authorization = Authorization()
        models.signals.post_save.connect(create_api_key, sender=User)

    def determine_format(self, request):
        return "application/json"

class AuthResource(ModelResource):
    class Meta:
        queryset = AuthInfo.objects.all()
        resource_name = "auth"
        authentication = Authentication()
        authorization = Authorization()

    def obj_create(self, bundle, **kwargs):
        userId, accessToken = bundle.data['userId'], bundle.data['accessToken']
        user = User.objects.filter(username=userId)
        if not user:
            user = User.objects.create_user(username=userId)
        else:
            bundle.obj = AuthInfo.objects.create_auth(userId, accessToken)
        return bundle

    def determine_format(self, request):
        return "application/json" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T19:58:24.197

您可以使用[django-facebook](https://github.com/tschellenbach/Django-facebook)通过移动客户端的 Facebook 访问令牌登录到您的 Django-Tastypie 服务器。

示例：[https ://gist.github.com/4574656](https://gist.github.com/4574656)

# iphone - XCode 4.5.2 的“架构的未定义符号”

> ID：13349300
> 
> 赞同：0
> 
> 时间：2012-11-12T18:25:20.173
> 
> 标签：iphone, sdk, xcode4.5

我正在尝试将 Apsalar Metrics 集成到我的应用程序中并遵循文档。但是我收到以下错误：

架构 armv7 的未定义符号：“_OBJC_CLASS_$_Apsalar”，引用自：AppDelegate.o ld 中的 objc-class-ref：未找到架构 armv7 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v查看调用）

我已经添加了所有需要添加的框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:48:04.623

您的 Apsalar Metrics 库（我假设有一个）是否仅针对 armv6 编译？如果是这样，您最好获得一个新的更新版本，或者您可以使用将处理 armv6 构建的早期版本的 XCode。如果您无法获得更高版本，您可以尝试我为另一个库编写的这个 hack：[如何在 armv7 应用程序中使用 armv6 第三方库？](https://stackoverflow.com/questions/10625253/how-to-use-armv6-third-party-libraries-in-an-armv7-app) 如果您不确定，可以按照链接中的说明来确定编译的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T23:40:34.053

我是 Apsalar 的产品支持工程师，之前已经看到过这个问题。

当您添加 Apsalar 文件时，您是否选择了“为任何添加的文件夹创建文件夹引用”这可能会导致您的错误：

架构 armv7 的未定义符号：“_OBJC_CLASS_$_Apsalar”，引用自：AppDelegate.o ld 中的 objc-class-ref：未找到架构 armv7 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v查看调用）

为了涵盖所有内容，您添加了 libsqlite3.0dylib、SystemConfiguration.framework、Security.framework 和 AdSupport.framework？这可能与链接器问题有关，特别是如果您在 Build Settings 中将 Architectures 设置为 armv7、armv7s 时。有时“清理所有目标”（产品 > 清理）和退出 Xcode 可能会起作用。

我制作了有关安装 SDK 的教程视频。时长 3-4 分钟，从头到尾涵盖了 integratino：www.youtube.com/watch?v=Dq68XSJ98Hk&feature=youtu.be

# algorithm - 在 Jurafsky + Martin，第 2 版中实施前进后退/Baum-Welch

> ID：13349304
> 
> 赞同：2
> 
> 时间：2012-11-12T18:25:37.653
> 
> 标签：algorithm, machine-learning, nlp

我正在实施 Jurafsky + Martin 的*语音和语言处理*（第 2 版）中介绍的 forward-backward/Baum-Welch 算法，作为词性标注器。我的代码大致结构如下：

```
#Initialize transition probability matrix A and observation likelihood matrix B
(A,B) = init() #Assume this is correct

#Begin forward-backward/Baum-Welch algorithm
for training_sentence in training_data:
    (A,B) = forward_backward(A,B,training_sentence, vocabulary, hidden_state_set)

#Use new A,B to test
i = 0
for test_sentence in test_data:
    predicted_tag_sequence = viterbi(test_sentence, vocabulary, A,B)
    update_confusion_matrix(predicted_tag_sequence, actual_tag_sequences[i])
    i += 1 
```

我的实现在调用 forward_backward 之前初始化 A 和 B。然后，用于 forward_backward 每次迭代的 A,B 是从前一次迭代计算的 A,B。

我遇到了两个问题：

1.  在第一次迭代之后，A 和 B 非常稀疏，以至于 forward_backward 的未来迭代没有期望最大化步骤。
2.  最终的 A 和 B 非常稀疏，以至于在应用 Viterbi 时，每个单词都被分配了一些任意标签（因为 A 和 B 非常稀疏，句子上几乎任何标签序列的概率都是 0）。

我可能做错了什么？我最大的担忧是理论上的：我在上一次迭代中使用 A、B 调用 forward_backward 是否正确？或者我应该将我的初始 A,B 用于 forward_backward 的所有迭代，将我的最终 A,B 作为结果的平均值？如果我的代码理论上没问题，还有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:14:02.410

不，您不应该在每个句子之后更新 A 和 B 矩阵；每次通过训练数据时，A 和 B 应该只更新一次。您应该使用上一次迭代的 A 和 B 来计算每个句子的部分计数，然后将这些计数相加以获得新的 A 和 B 以便下一次遍历数据。

程序应该是：

1.  初始化 A 和 B
2.  对于每个句子，使用 forward-backward 计算预期计数
3.  将预期计数相加得到下一个 A 和 B
4.  重复步骤 2 和 3，直到收敛。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T20:11:48.903

可能是数值问题。在您的`forward_backward`情况下，您可能将一大堆小数字相乘，最终使产品小于机器精度。如果是这种情况，您可以尝试使用日志。您应该将概率的对数相加，而不是将“原始”概率相乘。

# android - 三星 Galaxy S3 Android 浏览器上的 Web 套接字？

> ID：13349305
> 
> 赞同：8
> 
> 时间：2012-11-12T18:25:38.207
> 
> 标签：android, websocket, galaxy

因此，显然我们所做的使用 websockets 的 webapp 不适用于三星 Galaxy S3 库存的 Android 浏览器。问题是，Android 浏览器不应该支持 web sockets，但看起来这个有，虽然 websockets 不起作用，连接永远不会成功。我们的 webapp 有一个 Android 浏览器的后备方案，它使用 flash websockets 实现，以防用户安装了 flash，但由于它检测到 S3 支持 websockets，所以它不使用后备方案。

有没有人遇到过同样的问题？有谁知道 S3 浏览器实现的 websockets 版本是什么？（甚至 WebSocket.org 回显测试失败）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T10:29:54.780

I had the same issue with SGS 3 like you and also we had flash fallback. The problem is that other androids return for us `undefined` when you call `window.WebSocket` BUT SGS3 doesn't. So we solved this issue with `window.WebSocket = undefined;`. So our flash fallback began to work.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-10T20:09:41.087

看起来 Android 的默认浏览器实现了`WebSocket`API，但它什么也没做。但是（至少在我的 S2+ 上）， 中没有`CLOSING`属性`WebSocket`，因此您可以使用以下函数来检测是否实际支持 WebSocket：

```
websocketSupported = function() {
    if(typeof WebSocket === 'undefined') {
        return false;
    }

    return 'CLOSING' in WebSocket.prototype;
} (); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T07:34:17.997

但是我很晚才回答这个问题。但我仍然想分享的是，没有一个 ANDROID 浏览器仍然支持 WebSockets。参考[这个](http://caniuse.com/websockets)

我还使用 SignalR 使用数据推送制作了一个基本的 PhoneGap 应用程序，并尝试在不同的 ANDROID 版本上运行，发现它在 SAMSUNG ACE DUOS、MICROMAX A116 和一个非常旧的 SAMSUNG 型号上运行良好（抱歉，我不记得型号了) 但在 SAMSUNG GALAXY S3 上失败。

# c++ - 在两个模板堆栈上打印单独的数据类型 (C++)

> ID：13349306
> 
> 赞同：0
> 
> 时间：2012-11-12T18:25:46.320
> 
> 标签：c++, templates, types, stack

c++新手在这里。我目前正在尝试编写一个涉及模板堆栈的程序，该程序可以处理两种单独的数据类型，int 和 Student 对象。虽然程序的堆栈逻辑工作正常，但我不确定如何为每种数据类型打印堆栈顶部的值。现在我有两个可能的想法，为一个类重载'<<' 运算符（我不确定是哪一个）或为 TopStack() 编写重载函数（即`template <> int Stack<int>::TopStack() const`）。我已经实现了后者，但不正确。有谁知道实现这一目标的最有效方法是什么？我愿意接受任何建议。

我将发布我的代码的相关部分，以便您可以看到我在说什么。

```
template <class DataType>
struct StackNode
{
    DataType data;                      // data can be of any type
    StackNode<DataType> *next;          // point to the next node
};

template <class DataType>
class Stack
{

private:
    StackNode<DataType> *top;                                 // point to the top node of the stack
    int maxSize;                                              // maximum stack size
    int numNodes;                                             // number of nodes in the stack

public:
    Stack();                                                  // constructor, create a stack with size 10
    ~Stack();                                                 // destructor

    bool isEmpty() const { return (top == 0); }               // check if the stack is empty
    bool isFull() const { return (numNodes == maxSize); }     // check if the stack is full
    void Push(const DataType &elem);                          // push a node onto the top of the stack
    void Pop();                                               // pop a node from the top of the stack
    int TopStack() const;                                // return data from the top of the stack
};

struct Students
    {
        char lastName[20];               // student's last name
        char firstName[20];              // student's first name
        int IDNumber;                    // student ID #
        Students();                      // constructor
        void PrintStudent();             // print a student's information
    };

void Students::PrintStudent()
{
    cout << "\nID# " << this->IDNumber << " - " << this->lastName << ", "
         << this->firstName << endl;
}

// in main() snippet
// if the user asks for top of stack
case 3:
    if (!intStack)            // I use a boolean to switch the stack being accessed
        sstack.TopStack();    // Student stack
    else if (intStack)
        istack.TopStack();    // Int stack
    break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:35:28.987

```
int TopStack() const;                                // return data from the top of the stack 
```

应该

```
DataType TopStack() const;                                // return data from the top of the stack 
```

因为数据的类型随栈的类型而变化。

实现了这样的事情：

```
template<typename DataType>
DataType Stack<DataType>::TopStack() const
{
   Assert(top != nullptr);
   if (top == nullptr)
     return DataType();
   return top->data;
} 
```

但是，您的班级做了哪些没有`std::stack<T>`做的事情？甚至`std::vector<T>`（有趣的是，这通常是比 更好的堆栈`stack`）。

使用你的代码`Stack<DataType>`将知道数据的类型，要么是因为它正在与之交谈的变量的类型，要么是它本身具有的模板参数。为您的学生类添加一个`operator<<`重载，这样您就可以打印它们而无需跳过任何特殊的箍。

如果你发现重载很可怕，你可以编写一个带有和重载`operator<<`的独立`Print`函数。`int``Student const&`

# c++ - 如何使用单个 boost 库发布 C++ 应用程序

> ID：13349309
> 
> 赞同：8
> 
> 时间：2012-11-12T18:25:46.973
> 
> 标签：c++, boost

起初很抱歉，如果之前问过这个问题，但我通过搜索一无所获。

第二：

*   我正在使用 Kubuntu 12.04，
*   gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3,
*   提升 v1.48.0

正如标题所说，我有一个使用*boost / 程序选项*库的应用程序。

现在我想将应用程序的源代码发送给我的老师，但他还没有安装 Boost。我正在寻找一种从整个 boost 库中提取相应源文件的方法，以仅发送那些真正需要的文件。

我现在想要的是一个包含头文件和 cpp 文件的文件夹`make`，我的老师在他的机器上做一个简单的工作。

但我不知道如何获取这些文件。

*   我找到`bcp`了，但我不知道如何处理输出。有 .hpp 和 .cpp 文件，但是当我尝试编译时，我得到错误而不是错误...

*   然后我`bootstrap.sh`在 boost 文件夹中看到了脚本，我用`bootstrap.sh --with-libraries=program_options`. **这为每个**库构建了一个二进制库和头文件。

现在我将`libboost_program_options.a`第二步中的头文件和第一步中的头文件*一起*使用：

我将标题的路径`-I path_to_header`放在包含路径上并静态链接到`libboost_program_options.a`.

这甚至可以完美地编译并运行，但仅在我的机器上而不是在使用 Fedora 17 和 gcc 4.7.x 的朋友的机器上。

有没有像*“将头文件和cpp文件放在一个文件夹中并将cpp文件的路径添加到Makefile中的列表然后运行make并嘿你有程序”*这样的工作和简单的方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T11:06:11.877

为什么不创建源代码的合并？对于每个源文件，您可以运行

```
gcc -E source.cpp 
```

获取预处理器输出。然后，为了清楚起见，您可以将标题部分与实际源代码分开。包含减少到仅一个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T17:05:21.267

我不知道，如果这是*答案*，你想听我说，但是现在我的老师在他的电脑上安装了boost库，在他听说这些问题之后......

现在我可以将文件与该`-lboost_program_options`选项链接起来，它可以在我的机器、我朋友的机器和（可能是最重要的）我老师的机器上运行......

感谢您的时间 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T17:33:56.280

您可以尝试使用[-M（或 -MM）](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Preprocessor-Options.html#index-M-926)命令行选项，该选项应该为您提供特定源文件所依赖的所有文件。

# templates - 为什么 Kendo-UI 模板没有输出？

> ID：13349314
> 
> 赞同：2
> 
> 时间：2012-11-12T18:25:53.440
> 
> 标签：templates, kendo-ui

我正在尝试使用 Kendo-UI 模板来显示 JavaScript 数组中的值，但 HTML 中没有出现任何内容。

```
<script id="javascriptTemplate" type="text/x-kendo-template">
    <table>
        # for (var i = 0; i < tableData.length; i++) { #
            <tr><td>#: tableData[i]#</td></tr>    
        # } #
     </table>
</script>
<script type="text/javascript">
    var template = kendo.template($("#javascriptTemplate").html());
    var tableData = ["1", "2"];
    template(tableData);
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T19:32:04.590

我发现了三个问题： 1) template(tableData) 必须设置为 DOM 元素，如 $("#output").html(template(tableData)); 2）模板内的变量名必须是数据；3) 加载模板的代码必须在 DOM 准备好后执行。这是完整和更正的代码：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <link href="Content/kendo/2012.2.710/kendo.common.min.css" rel="stylesheet" />
    <link href="Content/kendo/2012.2.710/kendo.default.min.css" rel="stylesheet" />
    <script src="Scripts/jquery-1.8.2.min.js"></script>
    <script src="Scripts/kendo/2012.2.710/kendo.web.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var template = kendo.template($("#javascriptTemplate").html());
            var tableData = ["1", "2"];
            $("#output").html(template(tableData));
        });
    </script>
</head>
<body>
    <form id="form1" runat="server">
        <div id="output"></div>
        <script id="javascriptTemplate" type="text/x-kendo-template">
            <table>
            # for (var i = 0; i < data.length; i++) { #
                <tr><td>#=data[i]#</td</tr>  
            # } #
            </table>
       </script>            
    </form>
</body> 
```

# html - 在 vim 中用 HTML 标签包装部分

> ID：13349315
> 
> 赞同：4
> 
> 时间：2012-11-12T18:25:57.713
> 
> 标签：html, vim, plugins

我希望能够用其他标签快速包装我的 HTML 的整个部分。当我意识到我需要一个围绕其他 div 的外部 div 时，我经常遇到这种情况，如下所示：

**原始 HTML：**

```
<div id='a'>
   <img src='a.png'>
</div>
<div id='b'>
   <img src='b.png'>
</div> 
```

**修改后的 HTML：**

```
<div id='Main'>
   <div id='a'>
      <img src='a.png'>
   </div>
   <div id='b'>
      <img src='b.png'>
   </div>
</div> 
```

我可以使用[matchit.vim](http://www.vim.org/scripts/script.php?script_id=39)和[环绕](http://www.vim.org/scripts/script.php?script_id=1697).vim，但我不相信环绕.vim 用单词（即。`<div>`）包围，只是单个字符（即。`<`），它也不缩进。

我现在能想到的最接近的事情需要按下 15-20 次按钮。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T18:53:42.937

[`surround.vim`](http://www.vim.org/scripts/script.php?script_id=1697)可以用 html 标签包围，但它~~不会~~缩进只有在`S`从可视模式使用时才缩进，`ys`而不是`s`在可视模式下，这要归功于@RandyMorris。`ys`如果使用的运动或视觉选择是逐行的，它还会在下一行和上一行（不缩进）上放置相同缩进的 div 。甚至不这样做`yss`，所以`ysg@<div>j>>`如果你真的想避免视觉模式，你必须使用。

**更新**：有`g:surround_indent`和`b:surround_indent`选项。如果你设置其中的任何一个，surround.vim 将使用`=`它来缩进被包围的文本及其周围，上面`ys`没有缩进的混乱将是错误的，以及`S`(`S`也将使用`=`)。需要`filetype indent on`和正确的缩进设置。

如果您不设置这些选项，您将看到第一段中描述的行为：`S`无条件缩进。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-12T20:20:05.240

是的，环绕确实是要走的路。假设您的光标位于第一个`div`：

```
V%j%S<div id="Main"<CR> 
```

或者

```
V5jS<div id="Main"<CR> 
```

做的伎俩。

根据上下文，整个事情甚至可以缩短为：

```
Vat<div id="Main"<CR> 
```

这`<div id="Main"`部分似乎很难跳过。

当然，还有其他方法。

例如，ZenCoding 允许您使用这样的 CSS 语法：

```
V5j<C-y>,div#Main<CR> 
```

我不知道有什么更快的方法可以得到你想要的。

TextMate`Control``Shift``w`很好，这是肯定的，但它默认为，所以无论如何`<p>`你都必须输入。`div id="Main"`

# javascript - 没有 base64 的 HTML 中的内联图像

> ID：13349320
> 
> 赞同：0
> 
> 时间：2012-11-12T18:26:15.147
> 
> 标签：javascript, html, image, web

好吧，我知道我可以将图像转换为 base64，然后将其添加到我的 html 中。base64 的问题在于它生成的数据在我的例子中比我的 png 图像文件大 33%，这是一个最大压缩 300KB 的 css sprite。

有什么方法可以不使用base64传输图像数据，然后在客户端组装成图像？

我正在考虑传输十六进制图像数据，然后使用 javascript 将其转换为 base64。似乎有可能，但非常多余，因为它会立即从 base64 解码回来，只是为了显示。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T18:11:33.047

我刚刚做了一些测试来检查文件大小，我发现没有显着差异。

sizeof(gzip(index.html + sprite.png)) = 301KB

sizeof(gzip(index_inline_b64_sprite.html)) = 302KB

虽然 base64 文本比 png 本身大 33% 左右，但一旦 gzip 压缩，它似乎没有任何显着差异。

一旦您考虑到任何解决方案都可能具有严重的跨浏览器甚至可能将奇怪的十六进制的安全问题附加到 html 文件，在我的情况下，坚持使用 base64 似乎是一个更好的解决方案。

还要感谢 Barmar 指出 html 中的 ascii hex 会大得多，起初我没有意识到这一点。

# javascript - 为什么我的媒体查询不起作用？

> ID：13349326
> 
> 赞同：1
> 
> 时间：2012-11-12T18:26:30.687
> 
> 标签：javascript, html, css, media-queries

我的 CSS 如下所示：

```
@media  (max-device-width:480px) {
    {
        body{background: red;}
   }
} 
```

当我将浏览器的大小调整为 iphone 宽度时，我看不到正文变成红色背景。你们知道发生了什么吗。我也试过`@media (max-width:480px)`

仅供参考，我的元视图帖子标签也设置为：

```
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no" name="viewport"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:31:39.027

您必须将其设置为此

```
@media only screen and (max-width:480px) {

    body{background: red;}

} 
```

编辑忘记解释我的更改。

我删除了媒体查询中多余的括号。但最重要的是对其进行了更改，使其仅针对屏幕（如上所述是可选的）。并更改`max-device-width`为`max-width`您已经在`meta`标签中声明的宽度应该是设备宽度的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T18:31:43.403

`max-width`是正确的（`max-device-width`将是屏幕大小，而不是窗口大小），但你有额外的大括号。带他们出去：

```
@media  (max-width:480px) {
    body {
        background: red;
    }
} 
```

# qt - 带有 mingw-builds 错误的 Qt5 构建 _MCW_EM 未在此范围内声明

> ID：13349328
> 
> 赞同：2
> 
> 时间：2012-11-12T18:27:02.040
> 
> 标签：qt, build, mingw, mingw32, qt5

错误：

```
..\..\corelib\tools\qlocale_tools.cpp: In function 'char* qdtoa(double, int, int
, int*, int*, char**, char**)':
..\..\corelib\tools\qlocale_tools.cpp:2257:25: error: '_MCW_EM' was not declared
 in this scope
..\..\corelib\tools\qlocale_tools.cpp:2257:33: error: '_MCW_DN' was not declared
 in this scope
..\..\corelib\tools\qlocale_tools.cpp:2257:41: error: '_MCW_RC' was not declared
 in this scope
Makefile.Release:5718: recipe for target 'tmp/obj/release_shared/qlocale_tools.o
' failed
mingw32-make[5]: *** [tmp/obj/release_shared/qlocale_tools.o] Error 1
mingw32-make[5]: Leaving directory 'C:/qt5/2012.11/qtbase/src/tools/bootstrap'
Makefile:33: recipe for target 'release' failed
mingw32-make[4]: *** [release] Error 2
mingw32-make[4]: Leaving directory 'C:/qt5/2012.11/qtbase/src/tools/bootstrap'
Makefile:41: recipe for target 'sub-tools-bootstrap-make_first' failed
mingw32-make[3]: *** [sub-tools-bootstrap-make_first] Error 2
mingw32-make[3]: Leaving directory 'C:/qt5/2012.11/qtbase/src/tools'
Makefile:50: recipe for target 'sub-tools-make_first' failed
mingw32-make[2]: *** [sub-tools-make_first] Error 2
mingw32-make[2]: Leaving directory 'C:/qt5/2012.11/qtbase/src'
Makefile:39: recipe for target 'sub-src-make_first' failed
mingw32-make[1]: *** [sub-src-make_first] Error 2
mingw32-make[1]: Leaving directory 'C:/qt5/2012.11/qtbase'
makefile:51: recipe for target 'module-qtbase-make_first' failed
mingw32-make: *** [module-qtbase-make_first] Error 2 
```

信息：

视窗 7 x64 专业版 sp1

[MinGW 版本](http://sourceforge.net/projects/mingwbuilds/)

[来自 git 的 Qt5](http://qt.gitorious.org/qt/qt5)

环境变量：

> C:\Python33\;C:\Perl64\site\bin;C:\Perl64\bin;C:\mingw\bin;C:\Program Files (x86)\Programming\Git\cmd;C:\Program Files ( x86)\编程\Git\bin

旧环境变量：

> C:\Python33\;C:\Perl64\site\bin;C:\Perl64\bin;C:\Program Files (x86)\AMD APP\bin\x86_64;C:\Program Files (x86)\AMD APP\ bin\x86;%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\SystemTools\ATI Technologies\ATI .ACE\核心静态；C:\Program Files (x86)\Programming\Java\jre7\bin;C:\Program Files (x86)\Programming\Windows Kits\8.0\Windows Performance Toolkit\;C:\cygwin\bin\;C:\MinGW \bin\;C:\Program Files\Microsoft\Web 平台安装程序\;C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v1.0\;C:\Program Files\Microsoft SQL服务器\110\Tools\Binn\;C:\Program Files\Programming\doxygen\bin;C:\Program Files (x86)\Programming\Git\cmd;C:\Program Files (x86)\Programming\Git\bin

配置我使用的选项（配置似乎工作正常，没有错误）：

> -debug-and-release -opensource -confirm-license -opengl desktop -nomake 演示 -nomake 示例 -nomake 测试

制作命令（dah）：mingw32-make

任何有关如何解决此问题的帮助将不胜感激！

编辑1：我做了一些更多的研究，它似乎与OpenGL有关，但没有关于如何解决这个问题。

edit2：我用-no-opengl 配置并运行mingw32-make，得到了同样的错误，所以这里需要更多的ide。

编辑3：如果我改变这一行

> _control87（旧位，_MCW_EM|_MCW_DN|_MCW_RC）；

在 qlocale_tools.cpp 到

> _control87（旧位，MCW_EM）；

它一直运行，直到我收到此错误：

> c:/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.7.2/../../../../x86_64-w64-mingw32/bin/ld.exe: 找不到-lQt5Cored0 collect2.exe：错误：ld返回1退出状态

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T00:37:48.957

> c:/mingw/bin/../lib/gcc/x86_64-w64-mingw32/4.7.2/../../../../x86_64-w64-mingw32/bin/ld.exe: 找不到-lQt5Cored0

这是由于 Qt 源代码本身的一个错误，该错误潜入 Git 存储库，因为开发人员在 MSVS 上对其进行了测试，但没有意识到 MinGW 的行为有所不同。现在已经修复（顺便说一句，我当时确实设法使用 VS2012 命令提示符编译了 Qt5）；因此，如果您从 Git 获取最新代码，它将正常工作。

# macos - 在 Google Chrome 中打开 URL 并调整窗口大小

> ID：13349329
> 
> 赞同：0
> 
> 时间：2012-11-12T18:27:02.803
> 
> 标签：macos, google-chrome, command-line, macros, launching-application

我为我的移动应用程序设置了一些监控站点（例如crittercism），并且我设置了一个额外的监视器来监控所有内容。我有几个 Chrome 窗口的大小缩小到我感兴趣的值并间隔开，以便所有内容都适合屏幕。

我想编写一个宏来启动所有（此时为 8 个站点）这些 Chrome/浏览器窗口并相应地间隔它们。

现在重新启动和调整大小是一种痛苦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:44:43.840

可能您对[open](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/open.1.html)感兴趣。所以你可以`open /Applications/Google\ Chrome.app`或者你可以类似地`open http://www.google.com`。您还可以使用 AppleScript 自动定位窗口，包括通过[osascript](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/osascript.1.html)直接从命令行- 请参阅[Linux 和 Unix StackExchange 上的这个答案](https://unix.stackexchange.com/questions/39900/using-terminal-mac-os-x-to-move-position-of-an-applications-window)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T19:20:20.913

您可以使用 JavaScript。将以下代码另存为 .html 文件：

```
<html>
<script>
function openWindows() {
  window1=window.open('http://google.com/','','width=400,height=300');
  window1.moveTo(0, 0);
  window2=window.open('http://yahoo.com/','','width=400,height=200');
  window2.moveTo(0, 300);
  window3=window.open('about:blank','','width=200,height=500');
  window3.moveTo(400, 0);
};
</script>
<button onclick="openWindows();">Open Windows</button>
</html> 
```

在浏览器中打开它并单击按钮。您应该看到如下内容：

![多个弹出窗口](../Images/e8c55054a0b1aa149a393feb3e4fc4ff.png)

注意：您可能必须放松弹出窗口阻止程序设置。以下是更改 Chrome 上的
![Chrome 弹窗设置](../Images/6d7dddfb29bf48e11c08f9c11a740507.png)
弹出窗口设置的方法：这不会更改其他网站的弹出窗口阻止程序设置。

在 Mac 上，额外的显示器会扩大屏幕尺寸。例如，如果您的辅助显示器布置在主显示器的左侧，则`window4.moveTo(-300, 0);`应该可以解决问题。

# delphi - FindFirst,FindNext,FindClose

> ID：13349331
> 
> 赞同：-1
> 
> 时间：2012-11-12T18:27:24.333
> 
> 标签：delphi

我想制作一个新的 .txt 文件，我从 .script 文件加载参数。它在根中工作正常。.script 文件位于根目录中。结果是：

> 1.  192.121.2.2登录Lucey密码红色
> 2.  192.321.2.1登录史蒂夫密码苹果

.

```
 if FindFirst('*.*', faAnyFile, Search) = 0 then
  begin
    while FindNext(Search) = 0 do
    begin
      if FileExists(Search.Name) then
      begin
        if pos('.txt', Search.Name) <> 0 then
        begin
          Assignfile(txtfile, Search.Name);
          Erase(txtfile);
        end;
      end;
    end;
  end;
  findclose(Search);

  if FindFirst('*.*', faAnyFile, Search) = 0 then
  begin
    while FindNext(Search) = 0 do
    begin
      if FileExists(Search) then
      begin
        if pos('.script', Search.Name) <> 0 then
        begin
          data_file := TStringList.Create;
          data_file.LoadFromFile(Search.Name);
          txtdata := data_file.Strings[1].+ 'login' + data_file.Strings[2] +
            'password' + data_file.Strings[3];
          txtfile := TStringList.Create;
          if FileExists('.txt') then
          begin
            txtfile.LoadFromFile('.txt');
          end;
          txtfile.Add(txtdata);
          txtfile.SaveToFile('.txt');
        end;
      end;
    end;
  end;

  findclose(Search); 
```

但是如果我想添加 C:\Script\Files 我使用的代码是错误的，有什么问题？请帮忙！

```
 if FindFirst('c:\Script\Files\*.*', faAnyFile, Search) = 0 then
  begin
    while FindNext(Search) = 0 do
    begin
      if FileExists(Search.Name) then
      begin
        if pos('c:\Script\Files\.txt', Search.Name) <> 0 then
        begin
          Assignfile(txtfile, Search.Name);
          Erase(txtfile);
        end;
      end;
    end;
  end;
  findclose(Search);

  if FindFirst('*.*', faAnyFile, Search) = 0 then
  begin
    while FindNext(Search) = 0 do
    begin
      if FileExists(Search) then
      begin
        if pos('.script', Search.Name) <> 0 then
        begin
          data_file := TStringList.Create;
          data_file.LoadFromFile(Search.Name);
          txtdata := data_file.Strings[1] + 'login' + data_file.Strings[2] +
            'password' + data_file.Strings[3];
          txtfile := TStringList.Create;
          if FileExists('c:\Script\Files\.txt') then
          begin
            txtfile.LoadFromFile('c:\Script\Files\.txt');
          end;
          txtfile.Add(txtdata);
          txtfile.SaveToFile('c:\Script\Files\.txt');
        end;
      end;
    end;
  end;

  findclose(Search); 
```

结果是：

> 1.  192.121.2.2登录Lucey密码红色
> 2.  192.121.2.2登录Lucey密码红色
> 3.  192.321.2.1登录史蒂夫密码苹果

第一项显示两次，依此类推。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:29:38.590

您的代码中有很多逻辑错误。试试这个：

```
if FindFirst('c:\Script\Files\*.txt',faAnyFile,Search) = 0 then
begin
  repeat
    DeleteFile('c:\Script\Files\' + Search.Name);
  until FindNext(Search) <> 0;
  FindClose(Search);
end;

txtfile := TStringList.Create;
try
  if FindFirst(PathToScriptFiles + '*.script',faAnyFile,Search) = 0 then
  begin
    repeat
      data_file := TStringList.Create;
      try
        data_file.LoadFromFile(PathToScriptFiles + Search.Name);
        txtdata := data_file.Strings[1] + ' login ' + data_file.Strings[2] + ' password ' + data_file.Strings[3];
        txtfile.Add(txtdata);
      finally
        data_file.Free;
      end;
    until FindNext(Search) <> 0;
    FindClose(Search);
  end;
  txtfile.SaveToFile('c:\Script\Files\.txt');
finally
  txtfile.Free;
end; 
```

# c# - C# 和 android 应用程序之间的 RPC 通信

> ID：13349335
> 
> 赞同：4
> 
> 时间：2012-11-12T18:28:00.110
> 
> 标签：c#, rpc, .net-4.5

我真的需要你们的帮助。我正在尝试使 C# 控制台应用程序与 android 应用程序（基本上是 java）进行通信。C# 应用程序是主服务器，但我需要双方通信（双方远程函数调用返回）。

你能给我一些教程或示例项目的建议吗:-(

还是我应该使用 JSON-RPC？还是 RPC-XML？.. 我真的迷路了。

**编辑**

我正在尝试从 Android 应用程序调用 C# 函数并从 Android 到 C# 得到答案（例如`Object[]`）和相同的东西。两者都在同一个网络上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:06:08.750

在服务器端使用[jni4net](http://jni4net.sourceforge.net/)。从 Android 的角度来看，它将是纯 Java 到 Java RPC，在服务器端您将有效地在 .NET 上编码。

# wordpress - 可以更改自定义帖子类型中的 css 类的自定义字段值

> ID：13349342
> 
> 赞同：0
> 
> 时间：2012-11-12T18:28:53.250
> 
> 标签：wordpress, custom-post-type, custom-fields, meta-boxes

我在 wordpress 主题中创建了投资组合页面类型，为投资组合项目的 3 列布局。我想创建带有下拉菜单的元框以选择投资组合列表项的列号（可能是图像），因此我可以将列号从 1 列更改为 4 列布局。我有负责 3 列布局的列表项的 css 类。如何更改具有自定义字段值的列表项的 css 类以更改列布局的数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T21:38:40.763

行。创建您的自定义字段。让我们说“number_of_columns”。在每页的此自定义字段中键入您的值。然后在您的页面模板中，只需使用`get_post_meta`以输出 CSS 规则名称中的值，如下所示：

```
<div class="<?php get_post_meta($postid, 'number_of_columns', true); ?>_column_layout">
Create the layout here with the n_column_layout CSS class...
</div> 
```

你去吧。如果 number_of_columns 为 2，您将得到一个 2_column_layout 类的 div，等等。正确答案？

# entity-framework - 实体框架更新具有一对一关系的实体

> ID：13349347
> 
> 赞同：1
> 
> 时间：2012-11-12T18:29:27.013
> 
> 标签：entity-framework, entity-relationship

我有两个实体：

```
public class Tournament
{
    [Key]
    public Int32 Id { get; set; }
    public string Name { get; set; }

    public virtual TournamentSite Site { get; set; }
}

public class TournamentSite
{
    [Key]        
    public Int32 Id { get; set;}
    public string Name { get; set; }
} 
```

在 DbContext 中：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
        modelBuilder.Entity<Tournament>()
                    .HasRequired<TournamentSite>(t => t.Site)
                    .WithRequiredDependent()
                    .Map(p => p.MapKey("IdSite"));

        base.OnModelCreating(modelBuilder);
} 
```

一切正常，我的意思是当我加载锦标赛时，它会获得具有正确 ID 和名称的 TournamentSite 问题是我想为特定锦标赛更改 TournamentSite。我尝试过这样的事情：

```
var tournament = dbContext.Tournaments.Find(1); // Get tournament with id 1
tournament.Site.Id = 2;

dbContext.SaveChanges(); 
```

我希望在 Tournament 表中，IdSite 字段现在为 2 而不是 1，但无论我做什么，用于将 Tournament 链接到 TournamentSite 的 IdSite 字段始终为 1。

欢迎任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:57:31.517

另一种选择是像这样将 IdSite 实际映射到您的 Tournament 对象

```
public class Tournament
{
    [Key]
    public Int32 Id { get; set; }
    public string Name { get; set; }
    public Int32 TournamentSiteId { get; set;}
    public virtual TournamentSite Site { get; set; }
}

protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
        modelBuilder.Entity<Tournament>()
                    .HasRequired<TournamentSite>(t => t.Site)
                    .WithRequiredDependent()
                    .Map(p => p.MapKey("IdSite"));
        modelBuilder.Entity<Tournament>()
                    .Property(p => p.TournamentSiteId)
                    .HasColumnName("IdSite");
        base.OnModelCreating(modelBuilder);
} 
```

现在你应该能够做到这一点

```
var tournament = dbContext.Tournaments.Find(1); // Get tournament with id 1
tournament.TournamentSiteId = 2;

dbContext.SaveChanges(); 
```

瞧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:40:58.367

您的代码正在尝试更改 的 ID，而`TournamentSite`不是`IdSite`. `Tournament`您需要改为分配`Site`属性：

```
var tournament = dbContext.Tournaments.Find(1);
tournament.Site = dbContext.TournamentSites.Find(2);
dbContext.SaveChanges(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T10:32:03.910

我终于设法做到了，我重做了这样的模型：

```
public class Tournament
{
    [Key]
    public Int32 Id { get; set; }
    public string Name { get; set; }

    public Int32 IdSite { get; set; }

    [ForeignKey("IdSite")]
    public virtual TournamentSite Site { get; set; }
}

public class TournamentSite
{
    [Key]        
    public Int32 Id { get; set;}
    public string Name { get; set; }
} 
```

在 OnModelCreating 中不需要做任何事情，该函数如下所示：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
     base.OnModelCreating(modelBuilder);
} 
```

现在我可以使用：

```
var tournament = dbContext.Tournaments.Find(1);
tournament.IdSite = 2;

dbContext.SaveChanges(); 
```

感谢帮助。

# r - R中的条形图数组中的恒定条形宽度

> ID：13349349
> 
> 赞同：5
> 
> 时间：2012-11-12T18:29:34.433
> 
> 标签：r, plot, width

我正在尝试制作一个（1 行，3 列）条形图数组，它们**都具有相同的条形宽度**。

所有三个条形图都有不同数量的观测值，因此每个图的条形宽度最终不同（即，观测值最多的图具有最窄的条，而观测值最少的图具有最宽的条）。我从`barplot {graphics}` `R`文档中了解到，

> “除非指定，否则指定单个值将没有可见的效果`xlim`”

但是，我`x labels`是字符串，所以我不确定如何指定`xlim`. 我不介意我的地块宽度是否不同，但我需要以某种方式指定吗？

这是一些假数据和我正在使用的代码...谢谢您的帮助。

```
height4plot1 <- c(1,6,9,2,3,10,7,15)
names4plot1 <- c("P1","P2","P3","P4","P5","P6","P7","P8")

height4plot2 <- c(5,4,10,2)
names4plot2 <- c("M1","M2","M3","M4")

height4plot3 <- c(4,12)
names4plot3 <0 c("U1","U2")

par(mfrow=c(1,3),
    mar=c(10,5,2,1),
    cex.axis=0.7,
    mgp=c(3,0.5,0))
barplot(height4plot1,
    names.arg=names4plot1,
    las=3,
    axes=TRUE,
    axisnames=TRUE,
    ylab="YLAB",
    ylim=ylim,
    plot=TRUE,
    main="PLOT1",
    width=1)
barplot(height4plot2,
    names.arg=names4plot2,
    las=3,
    axes=TRUE,
    axisnames=TRUE,
    ylim=ylim,
    plot=TRUE,
    main="PLOT2",
    width=1)
barplot(height4plot3,
    names.arg=names4plot3,
    las=3,
    axes=TRUE,
    axisnames=TRUE,
    ylim=ylim,
    plot=TRUE,
    main="PLOT3",
    width=1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:08:30.847

如果没有诸如 etc. 之类的变量`height4plot1`，就很难测试您的代码和修改，但这里有一些可能性：

您可以`width=0.8`为每个图指定，`xlim=c(0,maxnum)`其中 maxnum 是不同图中的最大条数。这将在每个较小的条形图中留下一个空白部分。

您可以填充较短的高度向量，`NA`直到它们的长度相同（这仍然会给出空白部分）。

您可以将 3 个向量连接在一起并制作一个箱线图，可能对 3 个组进行不同的着色以帮助区分它们。该`abline`函数可用于在组之间添加分隔线（并参见`space`barplot 的参数，或包含“NA”作为分隔线以在组之间提供更多空间）。您可以使用返回值来帮助将标题放置在每个组之上。

您可以使用`layout`而不是`par`将您的 3 个绘图区域设置为具有不同的宽度，但是获得精确的宽度比率以给出完全相同大小的条并不简单（尽管您可能会通过反复试验来接近）。如果您真的想要这条路线`grconvertX`，那么`optim`可能会有所帮助。

我建议上面的第二个选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T20:13:42.557

我用我的替换了您不可复制的示例，并且似乎有效。barplot 的 xlim 参数是一个整数值，范围从 1 到组数：

```
tN <- table(Ni <- stats::rpois(100, lambda=5))
opar <- par(mfrow=c(1,3),
    mar=c(10,5,2,1),
    cex.axis=0.7,
    mgp=c(3,0.5,0))
barplot(tN[1:3],
   xlim=c(1, length(tN) ), 
    las=3,
    axes=TRUE,
    axisnames=TRUE,
    ylab="YLAB",
    plot=TRUE,
    main="PLOT1",
    width=1)
barplot(tN[1:4],
   xlim=c(1, length(tN) ), 
    las=3,
    axes=TRUE,
    axisnames=TRUE,
    plot=TRUE,
    main="PLOT2",
    width=1)
barplot(tN[1:5],
   xlim=c(1, length(tN) ), 
    las=3,
    axes=TRUE,
    axisnames=TRUE,
    plot=TRUE,
    main="PLOT3",
    width=1)    
par(opar) 
```

# oracle - Oracle 每月触发检查约束

> ID：13349350
> 
> 赞同：1
> 
> 时间：2012-11-12T18:29:36.060
> 
> 标签：oracle, count, constraints

只是想知道是否可以创建一个触发器来每月检查指定的约束。

例如。
桌租
|ID|会员|图书|
----------------------
1 | 约翰 |童话|

2 | 约翰 |摩擦|

3 | 约翰 |漫画|

4 | 约翰 |杂志|

限制：会员每月只能借4本书。

我想过使用 count(book) <= 4 但不知道如何实施每月基础约束。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:12:27.470

如果表只存储实际数据，那么它很简单：

```
create or replace trigger tr_rent
before insert on rent
for each row 
declare
  v_count number;
begin
  select count(*) into v_count
  from rent where member = :new.member;

  if v_count >= 4 then
    raise_application_error(-20001, 'Limit reached');
  end if;
end;
/ 
```

但是如果表也存储历史数据，那么您需要一些时间戳列，ferent_date。因此计数查询应更改为以下内容：

```
select count(*) into v_count
from rent where member = :new.member
and rent_date > add_months(sysdate, -1); 
```

在某些情况下，读取当前正在修改的表可能会导致“变异表错误”，但上面的触发器是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T19:56:12.910

使用触发器，虽然它似乎有效，但这样做是一种危险的方式，因为并行运行的会话不会看到正在进行的会话中插入的数据。你可以通过一个实体化的视图来做到这一点：

```
SQL> create table rent (id number primary key, member varchar2(30), book varchar2(20), date_rented date);

Table created.

SQL> create index rent_ix1 on rent ( member, date_rented);

Index created.

SQL> create materialized view log on rent with rowid(member,date_rented)
  2  including new values;

Materialized view log created.

SQL> create materialized view rent_month_check
  2  refresh fast on commit
  3  as
  4  select trunc(date_rented, 'mm') month, member, count(*) rentals
  5    from rent
  6   group by trunc(date_rented, 'mm'), member;

Materialized view created.

SQL> alter table rent_month_check
  2  add constraint rent_month_check_ck1 check (rentals <= 4);

Table altered.

SQL> insert into rent values(1, 'DazzaL', 'crime', sysdate);

1 row created.

SQL> commit;

Commit complete.

SQL> insert into rent values(2, 'DazzaL', 'mystery', sysdate+1);

1 row created.

SQL> commit;

Commit complete.

SQL> insert into rent values(3, 'DazzaL', 'fantasy', sysdate+2);

1 row created.

SQL> commit;

Commit complete.

SQL> insert into rent values(4, 'DazzaL', 'politics', sysdate+3);

1 row created.

SQL> commit;

Commit complete.

SQL> insert into rent values(5, 'DazzaL', 'thriller', sysdate+4);

1 row created.

SQL> commit;
commit
*
ERROR at line 1:
ORA-12008: error in materialized view refresh path
ORA-02290: check constraint (TEST.RENT_MONTH_CHECK_CK1) violated

SQL> select * from rent_month_check;

MONTH     MEMBER                            RENTALS
--------- ------------------------------ ----------
01-NOV-12 DazzaL                                  4 
```

# r - 我可以批量分配变量吗？

> ID：13349353
> 
> 赞同：1
> 
> 时间：2012-11-12T18:29:52.560
> 
> 标签：r

例如，我有 2 个变量`a`并且`b`（在我的实际情况中实际上超过 2 个），我可以像Python`c(a,b)<-c(0,0)`中的*元组一样为它们分配值吗？*谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:55:25.710

没有内置的方法来做到这一点-您要查找的内容与`lists`and非常`vectors`相似`R`-而不是回调`a`, `b`, and `c`，而是回调`a[1]`, `a[2]`, and `a[3]`。如果能够通过单独的名称回调此值并能够从同一行分配它们对您很重要，您可以创建一个简单的函数：

```
Assign <- function(Names, Values) {
             for(i in 1:length(Names)){
                  assign(Names[i], Values[i], envir=.GlobalEnv)
             }}

>A <- c("a", "b", "c", "d")
>B <- c(0,4,2,3)
>Assign(A,B)
>c
#[1] 2 
```

我想不出一种方法让`apply`家人解决这个问题而不让它变得太复杂——也许有人可以帮助我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T00:04:07.787

您可以按照[this question](https://stackoverflow.com/questions/7519790/assign-multiple-new-variables-in-a-single-line-in-r/13353585#13353585)`%=%`中的说明使用*（您必须复制并粘贴四个功能）*

 *```
# Example Call;  Note the use of g()  AND  `%=%`
#     Right-hand side can be a list or vector
g(a, b, c)  %=%  list("hello", 123, list("apples, oranges"))

# Results: 
> a
[1] "hello"
> b
[1] 123
> c
[[1]]
[1] "apples, oranges" 
```*

# c++ - 用 C++ 或 haskell 编写的 SAT Solver 的建议。优点和缺点

> ID：13349354
> 
> 赞同：0
> 
> 时间：2012-11-12T18:30:07.410
> 
> 标签：c++, haskell, sat-solvers

我需要一个 SAT 求解器库或程序，用 C++ 或 haskell 编写。我想知道您为什么会选择它，以及该库/程序的优缺点是什么。我需要它尽可能快，并且易于使用。

感谢您的回答！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T18:31:55.440

试试这个（快速 SAT 求解器）：

[http://dudka.cz/fss](http://dudka.cz/fss)

# google-chrome-extension - 在 chrome 扩展中复制到剪贴板

> ID：13349355
> 
> 赞同：10
> 
> 时间：2012-11-12T18:30:25.230
> 
> 标签：google-chrome-extension

我整天都在努力让这个工作，但我不能......我已经尝试过：-Flash 版本（至少 3 个不同的版本）-内容脚本中的 document.execCommand("copy")，但也在后台页面中我已经检查了很多关于 stackoverflow 的页面......每个可用的解决方案。

有没有人有一个工作的例子？

编辑：

清单.json

```
{
    "name": "test",
    "manifest_version": 2,
    "version": "1.0",
    "description": "test",
    "content_scripts": [{
            "matches": ["https://somesite.com*"],
            "js": ["jquery.js", "script.js"],
            "run_at": "document_end",
            "css": ["style.css"]
    }],
    "permissions": [
            "clipboardWrite",
            "clipboardRead"
    ]
} 
```

脚本.js

```
$(document).ready(function () {
    $('body').append('<textarea id="test"/>');
    var $test = $('#test');
    $test.text('some text which should appear in clipboard');
    $test.select();
    document.execCommand('copy');
    alert('copied!');
}); 
```

以上不起作用。显示警报...

EDIT2：我也尝试过使用 Flash 版本，但它可能不起作用，因为我认为该扩展是在 localhost 上运行的东西。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-07-14T14:24:05.227

复制工作很奇怪。您应该为副本注册一个事件侦听器，然后在您执行`document.execCommand('copy')`.

这是事件处理程序的一个工作示例：

```
document.addEventListener('copy', function(e) {
  var textToPutOnClipboard = "some text which should appear in clipboard";
  e.clipboardData.setData('text/plain', textToPutOnClipboard);
  e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-12T18:40:38.360

确保您在 manifest.json 中拥有复制权限：

```
"permissions": [
  "clipboardWrite", // for copy and cut
  "clipboardRead", // for paste

], 
```

然后`document.execCommand('copy')`在选择某些内容后使用

更多信息[在这里](http://developer.chrome.com/extensions/declare_permissions.html)。

# c# - 选择 distinct 而不创建 IEqualityComparer

> ID：13349357
> 
> 赞同：2
> 
> 时间：2012-11-12T18:30:38.290
> 
> 标签：c#, linq

我想使用 Linq 从集合中选择一组不同的元素，*而不*创建 IEqualityComparer 类。我不知道如何创建一个 lambda 表达式，该表达式被评估为 IEqualityComparer 以与`Distinct()`. 因此，我使用分组来选择具有不同名称的客户：

```
var distinctCustomers = new List<Customer>();
var groups= customers.GroupBy (cust => cust.Name);
foreach (var g in groups)
{
  foreach (var customer in g)
  {
    distinctCustomers.Add (customer);
    break;
  }
} 
```

但这似乎很恶心。

我要么想使用`Distinct`lambda 表达式

```
var distinctCustomers = customers.Distinct ( <lambda here ?> ) 
```

或者比上面列出的更干净的 Linq 表达式。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T18:36:08.843

如果您不想重新实现 a `DistinctBy`（或使用类似[MoreLINQ 中的那个](http://code.google.com/p/morelinq/source/browse/MoreLinq/DistinctBy.cs)），您可以通过`GroupBy`和 a执行此操作`Select`，您只需选择每个组中的第一个元素：

```
var distinctCustomers = customers.GroupBy(cust => cust.Name).Select(g => g.First()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T18:35:27.550

使用Jon Skeet 的[MoreLINQ](http://code.google.com/p/morelinq/)，它有一个 DistinctBy 方法。或者将其实现到您的代码中。

```
IEnumerable<Customer> distinctCustomers = customers.DistinctBy(c => c.Name); 
```

# string - 按下“Enter”键时忽略字符串

> ID：13349364
> 
> 赞同：1
> 
> 时间：2012-11-12T18:31:12.633
> 
> 标签：string, scanf

我对这行代码有疑问：

```
scanf("%s %s %s", &op, &s1, &s2);
opPtr = &op;
s1Ptr = &s1;
s2Ptr = &s2;

if (strcmp(opPtr, "^") == 0 && (strcmp(s1Ptr, "A") == 0) && (strcmp(s2Ptr, "") == 0))
    matrix_transpose(matA, ArowsPtr, AcolsPtr); 
```

我`scanf(op, s1, s2)`的目的是让用户输入对两个矩阵（s1 和 s2）的操作以及对它们的操作（op）。这包括 op = "*" || "+" || “^”，其中“^”是转置。

对于转置，我只需要 s1。因此，用户将输入“^ A[ENTER]”，然后 matA、ArowsPtr 和 AcolsPtr 将被调用到 matrix_transpose 函数中。

我的问题是当输入的操作是 '^' 时，我不明白如何忽略 s2Ptr 。我尝试将 s2Ptr 设置为空字符串并将 '\n' 添加到 strcmp(s1Ptr, "A\n") == 0 但这无助于忽略 s2。

我假设需要创建某种时间（EOF）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T18:07:53.097

```
scanf("%s %s %s", &op, &s1, &s2); 
```

由于 ,和的类型`&op`，这条线不能很好地定义。它们被期望为s，但唯一可能发生的方法是 if ，并且声明为：。这意味着您的输入字段最多为零个字符。`&s1``&s2``scanf``char *``op``s1``s2``char op, s1, s2;`

更有可能是您已经声明了`op`，`s1`并且`s2`被声明为：`char op[max], s1[max], s2[max];`。这意味着和`&op`的类型。这些指针可能指向同一个地方，但它们不需要具有相同的表示。只是巧合，它们在您的系统上确实具有相同的表示形式。如果您关心可移植性，您将理解数组默默地转换为指针，并使用类似这样的东西：`&s1``&s2``char (*)[max]`

```
/* TODO: Handle errors from scanf! */
assert(scanf("%s %s %s", op, s1, s2) == 3); 
```

`scanf`将其格式字符串中的空格解释为“尽可能多地读取空白字符”。`'\n'`算作空格。因此，当您在标准输入中输入“^ A\n”时，`scanf`已经读取并存储了您的两个*单词*，并且正在等待第三个。这可以解释为什么它看起来好像你不能忽略第三个。也许您可以阅读其中一个词，然后检查是否`op`是，然后`"^"`再决定要检索多少。例如：

```
/* TODO: Handle errors from scanf! */
assert(scanf("%s", op) == 1);

if (strcmp(op, "^") == 0) {
    assert(scanf("%s", s1) == 1);
    if (strcmp(s1, "A") == 0) {
        matrix_transpose(matA, ArowsPtr, AcolsPtr);
    }
}
else {
    assert(scanf("%s %s", s1, s2) == 2);
    /* TODO: Do something with s1 and s2... */
} 
```

# android - 如果存在自定义视图，Robolectric 无法扩展布局文件

> ID：13349367
> 
> 赞同：5
> 
> 时间：2012-11-12T18:31:16.903
> 
> 标签：android, unit-testing, robolectric

这就是我的测试方法的样子：

```
@RunWith(RobolectricTestRunner.class)
public class TestMyApplication{
    private About aboutActivity;

    @Test
    public void AboutActivityTest() throws Exception{

        aboutActivity = new About();
        aboutActivity.onCreate(null);

        TextView aboutInfo = (TextView) sobreActivity.findViewById(R.id.text_version);
        assertThat(sobreInfo.getText().toString(), equalTo("My Application v1.0"));
    }

} 
```

关于Activity.onCreate(null); 的行 运行此测试时引发以下异常

```
java.lang.RuntimeException: error inflating layout/about
    at com.xtremelabs.robolectric.res.ViewLoader.inflateView(ViewLoader.java:106)
    at com.xtremelabs.robolectric.res.ViewLoader.inflateView(ViewLoader.java:82)
    at com.xtremelabs.robolectric.res.ViewLoader.inflateView(ViewLoader.java:86)
    at com.xtremelabs.robolectric.res.ResourceLoader.inflateView(ResourceLoader.java:336)
    at com.xtremelabs.robolectric.shadows.ShadowLayoutInflater.inflate(ShadowLayoutInflater.java:43)
    at com.xtremelabs.robolectric.shadows.ShadowLayoutInflater.inflate(ShadowLayoutInflater.java:48)
    at android.view.LayoutInflater.inflate(LayoutInflater.java)
    at com.xtremelabs.robolectric.shadows.ShadowActivity.setContentView(ShadowActivity.java:102)
    at android.app.Activity.setContentView(Activity.java)
    at br.com.About.onCreate(About.java:22)
    at br.com.MyApplication.AboutActivityTest(MyApplication.java:48)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at com.xtremelabs.robolectric.RobolectricTestRunner$1.evaluate(RobolectricTestRunner.java:269)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.xtremelabs.robolectric.res.ViewLoader$ViewNode.constructView(ViewLoader.java:178)
    at com.xtremelabs.robolectric.res.ViewLoader$ViewNode.create(ViewLoader.java:158)
    at com.xtremelabs.robolectric.res.ViewLoader$ViewNode.inflate(ViewLoader.java:133)
    at com.xtremelabs.robolectric.res.ViewLoader$ViewNode.inflate(ViewLoader.java:136)
    at com.xtremelabs.robolectric.res.ViewLoader.inflateView(ViewLoader.java:102)
    at com.xtremelabs.robolectric.res.ViewLoader.inflateView(ViewLoader.java:82)
    at com.xtremelabs.robolectric.res.ViewLoader.inflateView(ViewLoader.java:86)
    at com.xtremelabs.robolectric.res.ResourceLoader.inflateView(ResourceLoader.java:336)
    at com.xtremelabs.robolectric.shadows.ShadowLayoutInflater.inflate(ShadowLayoutInflater.java:43)
    at com.xtremelabs.robolectric.shadows.ShadowLayoutInflater.inflate(ShadowLayoutInflater.java:48)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.xtremelabs.robolectric.bytecode.ShadowWrangler.methodInvoked(ShadowWrangler.java:100)
    at com.xtremelabs.robolectric.bytecode.RobolectricInternals.methodInvoked(RobolectricInternals.java:111)
    at android.view.LayoutInflater.inflate(LayoutInflater.java)
    at com.xtremelabs.robolectric.shadows.ShadowActivity.setContentView(ShadowActivity.java:102)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.xtremelabs.robolectric.bytecode.ShadowWrangler.methodInvoked(ShadowWrangler.java:100)
    at com.xtremelabs.robolectric.bytecode.RobolectricInternals.methodInvoked(RobolectricInternals.java:111)
    at android.app.Activity.setContentView(Activity.java)
    at br.com.About.onCreate(Sobre.java:22)
    at br.com.TestMyApplication.AboutActivityTest(TestMyApplication.java:48)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    ... 21 more
Caused by: java.lang.NullPointerException
    at br.com.getCustomFont(FontsUtil.java:20)
    at br.com.ActionBar.<init>(ActionBar.java:69)
    ... 56 more 
```

只有当我从 about.xml 布局文件中评论以下视图（自定义 RelativeLayout）时，我的测试才能完美运行：

```
 <br.com.componente.ActionBar
        android:id="@+id/actionbar"
        style="@style/ActionBar" 
        android:layout_alignParentTop="true"/> 
```

我无法从 xml 文件中删除此视图，因为我也需要对其进行测试。有谁知道如何解决它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T02:04:15.697

我在项目中包含的第三方库也有类似的问题（可能与自定义属性有关）。[我通过添加一个函数来膨胀自定义视图并在测试中中性化它来解决它。](https://stackoverflow.com/questions/11695774/how-do-i-create-a-shadow-class-to-work-around-crashes-related-to-custom-attribut)然后您可以为自定义小部件编写一个单独的测试类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T04:42:20.753

该问题已在最新版本的 Robolectric 版本 2 中得到解决。

# gdb - 将 mac osx 10.8 上的 GDB 从 6.3 更新到 7.*

> ID：13349368
> 
> 赞同：6
> 
> 时间：2012-11-12T18:31:17.487
> 
> 标签：gdb, installation, osx-mountain-lion, uninstallation

我现在有来自 Xcode 的 gdb-6.3。想要升级到 gdb-7.*

这是发生的事情：我使用 macports 安装 GDB-7.5，安装过程中一切都很好，直到我尝试运行 gdb，

ggdb 可执行文件

这显示了，

BFD：/Users/jiaxilong/Desktop/EECS281_proj3/proj2：未知加载命令0x2a BFD：/Users/jiaxilong/Desktop/EECS281_proj3/proj2：未知加载命令0x28 BFD：/Users/jiaxilong/Desktop/EECS281_proj3/proj2：未知加载命令0x29 BFD: /Users/jiaxilong/Desktop/EECS281_proj3/proj2: 未知加载命令 0x2b BFD: /Users/jiaxilong/Desktop/EECS281_proj3/proj2: 未知加载命令 0x2a BFD: /Users/jiaxilong/Desktop/EECS281_proj3/proj2: 未知加载命令0x28 BFD：/Users/jiaxilong/Desktop/EECS281_proj3/proj2：未知加载命令0x29 BFD：/Users/jiaxilong/Desktop/EECS281_proj3/proj2：未知加载命令0x2b

可执行文件编译为，

g++ -ggdb a.cpp 可执行文件

我也尝试使用 -g 。不工作。

另一件事是， gdb -v 显示版本 6.3 ggdb -v 显示版本 7.5

如果您知道我应该在这里做什么，请帮忙:) 提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T15:15:57.447

似乎没有人知道答案......或者答案是显而易见的太微不足道了。无论如何，我找到了这个问题的答案。

基本上，一个人还不能在 mac osx 上安装 gdb 7.* 仅仅是因为 mac 对此有一个束缚，可能是因为它与 xcode 的兼容性。

希望我早点知道这一点，这样我就没有花费大量时间进行研究和尝试。但希望这可以拯救那些像我一样大胆和冒险的人。干杯。

# javascript - 点击链接无效

> ID：13349369
> 
> 赞同：0
> 
> 时间：2012-11-12T18:31:19.223
> 
> 标签：javascript, onclick

我有一个书签，用户可以将其添加到他们的浏览器中，简单的代码：

```
javascript:(function(){ListIt=document.createElement('script');ListIt.src='http://***.com/js/list_it/feed.js';document.body.appendChild(ListIt);})();void(0); 
```

我还希望有一个按钮，用户可以将其添加到他们自己的网站中，因此希望执行与上述相同的操作，但 onclick，但我正在尝试的只是什么都不做

这是我正在尝试的：

```
<a href="#" onclick="(javascript:(function(){ListIt=document.createElement('script');ListIt.src='http://***.com/js/list_it/feed.js';document.body.appendChild(ListIt);})();void(0);)"><img src="http://***.com/images_/icons/list-it-button.png" border="0" title="List It!"></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:38:34.907

关于您的代码，我注意到两件事是：

第一的：

在本节中：`href="#" onclick="(javascript:(`您错过`"javascript:"`了浏览器检测到的用于执行 JavaScript 代码的协议。它应该用在 URL 值中，例如`href`属性的值，而不是`onclick`事件。另一方面，您可以简单地`javascript:`从`onclick`事件中删除，一切都会正常工作。

第二：

`javascript:`像`http:`or`https:`并且不能以像 . 的括号开头`(javascript:(`。

你应该使用这个：

```
<a href="javascript:((function(){ListIt=document.createElement('script');ListIt.src='http://***.com/js/list_it/feed.js';document.body.appendChild(ListIt);})();void(0);)">
    <img src="http://***.com/images_/icons/list-it-button.png" border="0" title="List It!">
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:38:05.233

```
<a href="#" onclick="(function(){var ListIt=document.createElement('script');ListIt.src='http://example.com/js/list_it/feed.js';document.body.appendChild(ListIt);}())' return false;"><img src="http://example.com/images_/icons/list-it-button.png" border="0" title="List It!"></a>​ 
```

# windows - 如何检查 Windows 可执行文件的存在？

> ID：13349372
> 
> 赞同：0
> 
> 时间：2012-11-12T18:31:20.660
> 
> 标签：windows, perl, exe

```
my $exe = "'C:/Program Files/Common Files/executable.exe'";

if(! -X $exe) {
    print "exe file not found";
    exit 3;
}

my $cmd = $exe.' status';
@lines = qx ( $cmd ); 
```

我的问题是我可以很好地执行这个命令，但我一辈子都无法弄清楚如何检查 exe 文件是否存在。有什么提示吗？我尝试了不同类型的引号，-f、-X、-e ... 没有任何效果！任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T18:35:32.480

该[`-f`](http://perldoc.perl.org/functions/-X.html)运算符可以正常工作，只是文件名中有多余的引号。

当然，`-f`在 Windows 上告诉您的只是文件存在并且不是目录，但大概这就是您所需要的。

如果路径包含空格，则需要在可执行文件名称周围的命令行中添加额外的*双*引号，但最好在您需要它们的时候而不是更早地这样做。尝试这个：

```
my $exe = 'C:/Program Files/Common Files/executable.exe';

unless (-f $exe) {
    print "exe file not found";
    exit 3;
}

my $cmd = qq("$exe" status);
my @lines = qx($cmd); 
```

# python - 在 Python 中附加到 .csv 文件

> ID：13349378
> 
> 赞同：3
> 
> 时间：2012-11-12T18:31:46.733
> 
> 标签：python, csv

我正在尝试使用 Python 写入现有的 .csv 文件，但我不想将数据附加到现有文件的底部，而是想将新信息附加到 .csv 文件的新列中。这样做的原因是我想“无限地”循环通过代码的读取数据部分，然后将每次循环迭代期间读取的数据添加到新列而不是行。本质上，我想要以下内容：

```
Row1Iteration1, Row1Iteration2, Row1Iteration3,..., Row1IterationX
Row2Iteration1, Row2Iteration2, Row2Iteration3,..., Row2IterationX
Row3Iteration1, Row3Iteration2, Row3Iteration3,..., Row3IterationX
Row4Iteration1, Row4Iteration2, Row4Iteration3,..., Row4IterationX
Row5Iteration1, Row5Iteration2, Row5Iteration3,..., Row5IterationX 
```

代替：

```
Row1Iteration1
Row2Iteration1
Row3Iteration1
Row4Iteration1
Row5Iteration1
Row1Iteration2
Row2Iteration2
Row3Iteration2
etc... 
```

有谁知道这样做的方法，或者这是 .csv 文件的不可能约束？除了 .csv 之外，还有其他方法可以做到这一点并仍然使用 Excel 进行操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:45:05.197

这在我所知道的任何系统或文件类型上都是不可能的。您必须读取数据，对其进行操作并保存/覆盖原始文件。这就是文件 I/O 在几乎任何操作系统上的工作方式。您可以读取文件，（覆盖）写入文件并附加到文件末尾，仅此而已。

如果您的文件非常大，您可以逐个读取它，进行操作并将其写入临时文件。完成后，可以将原始文件替换为新的临时文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T19:37:13.757

我希望这个例子可以帮助你：

```
# of course you should read the file someway
s = """
Row1Iteration1, Row1Iteration2, Row1Iteration3
Row2Iteration1, Row2Iteration2, Row2Iteration3
Row3Iteration1, Row3Iteration2, Row3Iteration3
Row4Iteration1, Row4Iteration2, Row4Iteration3
Row5Iteration1, Row5Iteration2, Row5Iteration3
"""
ncols = 3

iterations = []
for line in s.strip().split('\n'):
    iterations.append([l.strip() for l in line.split(',')])

with open('output.csv', 'w') as out:
    for col in xrange(ncols):
        for it in iterations:
            print it[col]
            out.write(col) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T18:56:44.660

正如钦梅所说，您最好的选择可能是读取 csv 文件，对其进行按摩，然后将其输出回 csv。看一下[这个 stackoverflow 讨论](https://stackoverflow.com/questions/4872077/how-to-add-new-column-in-beginning-of-csv-file-by-python)，它似乎解决了与您所问问题类似的问题。

# php - 徽标图像未加载 - PHP

> ID：13349384
> 
> 赞同：0
> 
> 时间：2012-11-12T18:32:20.537
> 
> 标签：php, image, loading

我正在处理一个模板文件，我遇到了一些让我头疼的事情。

在 header.php 文件中，我有以下内容

```
<div id="logo">
<a href="index.php"><img src="images/logo.png" alt="MY COMPANY""/></a>
<p class="tagline">MY COMPANY</p> 
```

但是 logo.png 文件没有显示出来。只有 alt= 文本和“标语”出现。

1.  .png 文件位于 images 文件夹中
2.  css 文件配置正确（至少据我所知）
3.  header.php 文件位于“images”文件夹之外，因此图像路径应该没问题。

这是我的css代码仅供参考。

```
#logo {
float:left;
margin:22px 0 0 0;
}
#logo a {
    float:left;
    }
#logo .tagline {
    display:inline;
    float:left;
    margin:0;
    width:115px;
    line-height:14px;
    color:#aeaeae;
    margin:0 0 0 10px;
    padding-top:5px;
    font-family:Arial, Helvetica, sans-serif;
    } 
```

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:53:04.777

您的 imgtag 语法有错误，请删除 alt 属性末尾的关闭 "

```
<img src="images/logo.png" alt="MY COMPANY"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T18:42:16.653

your extra " prevents the img tag from closing causing your problems (highlighted with [])

```
<a href="index.php"><img src="images/logo.png" alt="MY COMPANY"["]/></a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T18:39:50.440

我认为您的 PHP 托管在 linux 主机上，请检查您的图像及其文件夹的文件权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T18:39:17.550

你可以试试相对路径吗？像“/你的网络应用程序的路径/images/logo.png”这样的东西。它也可能是文件权限或拼写错误。

# php - AngularJS JSON 压缩

> ID：13349385
> 
> 赞同：0
> 
> 时间：2012-11-12T18:32:27.427
> 
> 标签：php, javascript, json, angularjs

我试图找出一种将压缩的 JSON 字符串从服务器传输到前端的方法。在后端，我只是使用 gzcompress 来压缩从 json_encode 返回的字符串。是否有可以解压缩使用 gzcompress 压缩的字符串的 javascript 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:36:29.293

要在客户端解压缩并运行此代码，HTML 代码中必须包含以下代码：

```
<script src="./jsxcompressor.js" type="text/javascript"></script>
<script type="text/javascript">
eval(JXG.decompress(jxgcompressed));
</script> 
```

看到这个链接[gc 压缩](http://jsxgraph.uni-bayreuth.de/wp/2009/09/29/jsxcompressor-zlib-compressed-javascript-code/)

# windows - Netbeans 无法识别项目文件夹

> ID：13349388
> 
> 赞同：2
> 
> 时间：2012-11-12T18:32:39.040
> 
> 标签：windows, netbeans-7, xubuntu

我有几个在 Windows XP SP3 上安装的 Netbeans 7.2 项目。上周我在同一台机器上安装了 Xubuntu 12.10（在不同的分区中），在 Xubuntu 上我还安装了 Netbeans 7.2。到目前为止，没有出现任何问题，一切运行顺利。

现在我面临的问题是，并非我在 Windows 上的 Netbeans 中完成的所有项目都能被 Xubuntu 上的 Netbeans 识别，它只是无法识别项目文件夹。为什么会发生这种情况，为什么有些项目得到认可而其他项目没有得到认可？

我正在处理的另一个问题是，当我在 Xubuntu 上的 Netbeans 中单击“打开项目”时，在“查看”选项下，我的 USB 拇指驱动器都没有出现，但我可以在任何其他应用程序中使用它们许本图。

我非常感谢任何可以帮助我了解我正在处理的这两个问题的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:15:27.793

好吧，我终于通过在 Xubuntu Netbeans 中启动一个新项目来解决它。我保持一切不变，不仅是类，还有 Substance LAF 库，它运行良好。

唯一的区别是项目文件夹的名称，最初是“Calculador Validade Concessões”，现在我将其更改为“Calculador Validade Concessoes”。我认为这是由项目文件夹名称中的“õ”字符引起的，因为 java 代码文件是 Unicode。

# c# - 将隐藏字段传递给jquery

> ID：13349389
> 
> 赞同：0
> 
> 时间：2012-11-12T18:32:44.337
> 
> 标签：c#, jquery, asp.net, parameters, hidden-field

我正在使用 json 在我的应用程序后面的代码中运行一个函数。一切正常，除了我无法弄清楚如何将隐藏字段传递给它这是我的 jquery 代码：

```
 $(document).ready(function () {
             $("input[id$='btnP']").click(function (e) {
 var hiddenfield= $("#<%=hidden.UniqueID%>"); //This Does not work!!!!!
                 $.ajax({
                     type: "POST",
                     url: "MyDoc.aspx/BtnOpen",
                     data: "{'message': '" + hidden.val() + "'}",
                     contentType: "application/json; charset=utf-8",
                     dataType: "json",

                     success: function (msg) {
                         if (msg.d == 'Sent') {

                         }
                         else {

                         }
                     }

                 });

                 e.preventDefault();
             }); 
```

编辑：：：

我的隐藏字段在 gridview 中，如下所示：

```
 <asp:TemplateField HeaderText="View">                      
         <ItemTemplate>
    <input type="submit" value="Send" id="btnP"  runat="server" />
    <asp:HiddenField runat="server" ID="hidden"  Value='<%# Eval("ID" )%>'  />
           </ItemTemplate>
             </asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:51:30.977

有几个选项可以获取隐藏字段值：

1）您可以将隐藏字段的 ClientIDMode 属性设置为静态

```
<asp:HiddenField runat="server" ID="hidden" ClientIDMode="Static" Value="yourValue"/> 
```

然后您可以使用以下代码：

```
var hiddenField = document.getElementById('hidden');
....
hiddenField.value 
```

2) 使用 ClientID 属性：

```
var hiddenField = $("#<%=hidden.ClientID %>");
...
hiddenField.val(); 
```

[在此处](http://dotnetslackers.com/ASP_NET/re-113573_The_difference_between_ID_ClientID_and_UniqueID.aspx)阅读有关 ClientID 和 UniqueID 之间的区别

**UPD。**

如果您需要将一些参数从 GridView 传递给函数，则可能不使用 HiddenField：

只需从您的输入中删除“服务器”标签并添加 onclick 事件。

```
<asp:TemplateField HeaderText="View">                      
    <ItemTemplate>
       <input type="submit" value="Send" id="btnP" onclick="BtnOpen('<%# Eval("ID" ) %>');" />
    </ItemTemplate>
</asp:TemplateField> 
```

而不是添加你的功能：

```
<script>
    function BtnOpen(id) {
        $.ajax({
            type: "POST",
            url: "MyDoc.aspx/BtnOpen",
            data: "{'message': '" + id + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",

            success: function (msg) {
                if (msg.d == 'Sent') {

                }
                else {

                }
            }
        });
    }
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T18:34:16.347

```
var hiddenfield= $("# ... 
```

和

```
hidden.val() 
```

变量未被调用`hidden`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T18:38:12.847

你应该这样做

```
 $(document).ready(function () {
         $("input[id$='btnP']").click(function (e) {

             var hiddenfieldValue = $("#<%=hidden.ClientID %>").val(); //This works!!!!!

             $.ajax({
                 type: "POST",
                 url: "MyDoc.aspx/BtnOpen",
                 data: {"message": hiddenfieldValue},
                 contentType: "application/json; charset=utf-8",
                 dataType: "json",

                 ...
             });

             e.preventDefault();
         }); 
```

# mercurial - Mercurial 通知扩展 glob 被忽略

> ID：13349392
> 
> 赞同：1
> 
> 时间：2012-11-12T18:33:15.943
> 
> 标签：mercurial, mercurial-hook

我正在尝试使用文件模式将推送通知限制到特定目录。[usersubs] 中的以下 glob 模式不会触发电子邮件，尽管 asterix 和双 asterix 的基本模式有效。操作系统：Windows XP。

```
**.sql
*.sql
一/*.sql
**.???
**/*.sql

```

回购内容是：

```
.hg
根.sql
/one/one.sql

```

hgrc 是：

```
[扩展]
通知 =

[钩子]
传入.notify = python:hgext.notify.hook

[电子邮件]
来自 = 我@company.com

[smtp]
主机 = 12.34.56.78

基本网址 =

[通知]
来源 = 服务推拉捆绑
测试 = 假
配置 =

[用户订阅]
我@company.com = **.sql

最大差异 = 300

```

使用的过程：
1) 使用这些设置克隆 repo
2) 更改列出的两个 sql 文件，以便可以提交它们
3) hg commit -m "comment here"
4) hg push

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:10:00.147

通知扩展不支持使用模式来匹配特定文件。从“汞帮助通知”：

> [usersubs] # key 是订阅者电子邮件，value 是 repo 模式的逗号分隔列表 user@host = pattern
> 
> [reposubs] # key 是 repo 模式，value 是逗号分隔的订阅者电子邮件列表 pattern = user@host
> 
> “模式”是与存储库的绝对路径匹配的“glob”，可以选择与 revset 表达式结合使用。revset 表达式（如果存在）通过散列与 glob 分隔。

问题中列出的模式被视为与存储库的绝对路径匹配的模式。

可能的替代方案：

*   将您希望通知的文件拆分到单独的存储库中（然后应该由通知扩展支持）
*   在 Mercurial 2.4 中，尝试使用 revset reposubs 模式，例如“ *#file('* .sql')=me@company.com”。
*   编写一个自定义钩子以根据每个文件更改的检测执行所需的通知
*   不要使用通知，而是让收件人监视 hgweb 提供的每个文件 RSS 提要的更改（由 IRC 上的 mpm 建议）

# c# - 类和方法

> ID：13349402
> 
> 赞同：1
> 
> 时间：2012-11-12T18:34:08.803
> 
> 标签：c#

我不确定到底要问什么。`Car`当我单击“加速”按钮时，我创建了一个名为“`Form1`我希望它加速 5 个增量”的类。我需要使用 Car 类中的 Accelerate 方法来执行此操作。我以为我调用它是正确的，但没有任何效果。我需要简单的答案，因为我是初学者。

```
namespace Car_Class
{
    class Car
    {
        public string _year;
        public string _make;
        public double _speed;

        public Car(string year, string make, double speed)
        {
            _year = year;
            _make = make;
            _speed = 0;
        }

        public string Year
        {
            get { return _year; }
            set { }
        }

        public string Make
        {
            get { return _make; }
            set { }
        }

        public double Speed 
        {
            get { return _speed; }
            set { }
        }

        public double Accelerate()
        {
            return _speed += 5;
        }

        public double Brake()
        {
           return  _speed -= 5;
        }
    }
} 
```

然后按钮....

```
namespace Car_Class
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void accButton_Click(object sender, EventArgs e)
        {
            string _year = "";
            string _make = "";
            int _speed = 0;

            Car acc = new Car(_year, _make, _speed);

            acc.Accelerate();

            currentspeedListBox.Text = ???????
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:40:24.553

您需要设置 currentspeedListBox.Text = acc.Speed.ToString()

您是否知道您不会看到速度增加但您只会看到 5？当您击中框（从 0 开始）时，您正在创建一辆新车，然后在您加速时将其增加 5。一切都完成后，汽车就会离开，如果你再次按下按钮，过程就会重新开始。（以速度 0 创建一辆新车，然后将其增加到 5）

如果您想继续看到文本框的增加，您需要将汽车作为私有变量放在 Form1 中，或者您需要采用生成的速度 (5) 并将其存储为方法外部的私有变量。

编辑：

```
private Car _car = new Car("","",0)

private void accButton_Click(object sender, EventArgs e)
{
     _car.Accelerate();
     currentspeedListBox.Items.Add(car.Speed.ToString());
} 
```

我假设文本框，即使它另有说明。ListBox 是包含许多项目的容器，因此它有一个 Items 属性，其中包含所有内容。列表框的文本属性是指当前在列表框中选择了哪一个。由于列表框中没有任何内容，因此没有选择（或出现）任何内容。您需要将项目添加到 ListBox，在本例中为当前加速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T18:38:43.173

您的问题是每次单击按钮时您都在创建一辆新车

您需要一辆属于表格成员的汽车

Form1 是一个类，就像 Car 一样。添加一个类型为 car 的成员 _car （就在 class 语句之后）

在表单的构造函数中

```
_car = new Car(); 
```

在点击方法中做

```
_car.Accelerate(); 
```

# c++ - 特殊模板功能

> ID：13349407
> 
> 赞同：2
> 
> 时间：2012-11-12T18:34:23.433
> 
> 标签：c++, templates

考虑以下模板来存储简化的 SI 单位：

```
template < int Mass, int Length, int Time >
class TUnit
{
public:
    // Used type.
typedef float DataType;
    .....
} 
```

例如 SI 单位“长度”定义如下：

```
typedef TUnit< 0, 1, 0 > Length; 
```

存在一个将 DataTypes 转换为 TUnits 的全局通用函数：

```
template < int Mass, int Length, int Time >
TUnit< Mass, Length, Time > convert( const typename TUnit< Mass, Length, Time >::DataType& src ); 
```

我们有一个专门的版本来将浮点数转换为长度，例如从 [km] 到 [m] 的隐式转换：

```
template < >
Tools::DataTypes::Length convert( const Tools::DataTypes::Length::DataType& src ); 
```

现在尝试将浮点数转换为长度：

```
float f = 1.0;
Length l = ::convert( f ) 
```

现在 VC2012 无法编译并出现错误代码：

```
error C2783: could not deduce template argument for 'Mass'
             could not deduce template argument for 'Length'
             could not deduce template argument for 'Time' 
```

为了解决这个问题，我将代码更改为：

```
float f = 1.0;
Length l = ::convert< 0, 1, 0 >( f ) 
```

很好，但这不是我想要的:) 我首选的语法是：

```
float f = 1.0;
Length l = ::convert< Length >( f ) 
```

我想我必须将通用模板函数的签名更改为：

```
template < TUnit< int Mass, int Length, int Time > >
TUnit< Mass, Length, Time > convert( const typename TUnit< Mass, Length, Time >::DataType& src ); 
```

但是，这种语法当然是错误的。有什么提示可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:46:52.410

## 1\. 变体（通过模板类）

您不能专门化功能模板。如果您真的想这样做，请创建一个具有单个静态函数的类并专门化该类。然后，您可以使函数调用该类的静态方法。

```
template < int Mass, int Length, int Time >
TUnit< Mass, Length, Time > convert( const typename TUnit< Mass, Length, Time >::DataType& src ) {
  return Converter<Mass, Length, Time>::call();
} 
```

然后定义模板类：

```
template < int Mass, int Length, int Time >
struct Converter {
   static TUnit< Mass, Length, Time > call( const typename TUnit< Mass, Length, Time >::DataType& src) {
     [...]
   }
}; 
```

及其专业化，例如长度：

```
template < >
struct Converter<0,1,0> {
   static const int Mass = 0;
   static const int Length = 1;
   static const int Time = 0;

   static TUnit< Mass, Length, Time > call( const typename TUnit< Mass, Length, Time >::DataType& src) {
     [...]
   }
}; 
```

## 2.变体重载

或者，我建议改用函数重载，这基本上是等价的，我的意思是

```
// NOTE: no `template < >`
Tools::DataTypes::Length convert( const Tools::DataTypes::Length::DataType& src ); 
```

由于 C++ 重载机制，这个重载函数优先于函数模板`convert<Mass, Length, Time>`。只要您不使用显式模板参数调用该函数。

## 3.变体附加功能模板

如果您想采用第二种工作方式，那么我建议：

```
template < int Mass_, int Length_, int Time_ >
class TUnit
{
public:
  static const int Mass = Mass_;
  static const int Length = Length_;
  static const int Time = Time_;
[...] 
```

接着

```
template < class TUnitT >
TUnitT convert( const typename TUnitT::DataType& src ) {
  return convert<TUnitT::Mass, TUnitT::Length, TUnitT::Time>(src);
} 
```

但我会推荐第一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:51:55.587

当然，您可以使用模板作为模板参数。在这种情况下，它将是一种特殊类型，因此您甚至不必使用模板模板习语。写这样的东西：

```
template < class TUNIT>
TUNIT convert( const typename TUNIT::DataType& src );

template < int M, int A, int B>
TUnit<M,A,B> convert( const typename TUnit<M,A,B>::DataType& src )
{
    typedef TUnit< M,A,B > TUnit_;
    return ::convert<TUnit_>(src);
}

...

typedef TUnit< 0, 1, 0 > Length;

...

float f = 1.0f;
Length l = ::convert< Length >( f ); 
```

这将编译得很好。

# printing - 如何在我自己的 Joomla2.5 中添加打印按钮！模块？

> ID：13349410
> 
> 赞同：-1
> 
> 时间：2012-11-12T18:34:38.583
> 
> 标签：printing, joomla2.5, joomla-extensions, joomla-module

我想在我自己的 joomla2.5 工资模块中添加“打印按钮”。我的模块`default.php`是：

```
<?php
$document =& JFactory::getDocument();
$document->addStyleSheet(JURI::base() . 'modules/mod_salary/assets/style.css');
$document->addStyleSheet(JURI::base() . 'modules/mod_salary/assets/print.css'); 
defined('_JEXEC') or die('Restricted access');
    $user = &JFactory::getUser();
    $tbn = $params ->get('table_name');
    $t = $params->get('total_fields');
    $p = $params->get('pay_fields');
    $d = $params->get('deficits_fields');
    $e = $params->get('debt_fields');
    $er = $params->get('debr_fields');
    $wh =$params->get('workhours_fields');//work hours detail
    $emp = $params->get('emp_fields');
    $date =F.$params->get('date_fields');
    $work =F.$params->get('work_fields');
    $bank =F.$params->get('bank_fields');

                $payed = explode (";", $p);
                $deficits = explode (";", $d);
                $debt = explode (";", $e);
                $debr = explode (";", $er);
                $whd = explode (";", $wh);
                echo "<table class='sample' width=100%>";
                echo "<tr>";
                  echo "<td colspan=6>"."<center>"."<h3>"."</center>"."</td>";
                  echo "</tr>";               
                      echo "<tr>";
                      echo "<td>"."فيش حقوقي متعلق به "." "."<b>".$user->name." "."</b> "."دارای شماره پرسنلي"."<b> ".$user->username."</b>"."  مربوط به  "."<b>".$item->$date."</b>"."</td>";
                      echo "</tr>"."<tr>";
                      echo "<td>"."محل کار :"."<b> ".$item->F6."</b>"."  ، "."کارکرد : "."<b>".$item->$work."</b>"."  روز  ،   "."شماره حساب بانکی : "."<b>".$item->$bank."</b>"."</td>";
                      echo "</tr>";
                      echo "<td>"."<table width=100%>";
                      //سر تیتر ستون ها 
                      echo "<td style='background-color:cornsilk; border-color:#D5D5FF' width=34%>"."پرداخت ها"."</td>";
                      echo "<td style='background-color:cornsilk; border-color:#D5D5FF' width=33%>"."کسری ها"."</td>";
                      echo "<td style='background-color:cornsilk; border-color:#D5D5FF' width=33%>"."بدهی ها"."</td>";
                      // ستون ها
                      // ستون پرداخت ها
                      echo "<tr>"."<td>";
                        echo"<table class='s' width=100%>";
                        echo "<tr>";
                        $result = count($payed);
                        for($i=0;$i<$result;$i++){
                        $pay='F'.$payed[$i];
                            if (!empty($item->$pay)){
                                echo "<td style='vertical-align:middle'>".JText::_($pay)."</td>";
                                echo "<td style='text-align:left'>"."<h4>".number_format($item->$pay)."</h4>"."</td>";
                                $paytotal=$item->$pay+$paytotal;  // متغییر پرداخت کل
                                echo "</tr>";
                                }
                            }
                        echo "</table>";
                        echo "</td>";
                //ستون کسورات
                    echo "<td>";
                        echo"<table class='s' width=100%>";
                        echo "<tr>";
                        $result = count($deficits);
                            for($i=0;$i<$result;$i++){
                                $def='F'.$deficits[$i];
                                    if (!empty($item->$def)){
                                    echo "<td  style='vertical-align:middle'>".JText::_($def)."</td>";
                                    echo "<td style='text-align:left'>"."<h4>".number_format($item->$def)."</h4>"."</td>";
                                    $deftotal=$item->$def+$deftotal;  // متغییر کسری کل
                                    echo "</tr>";
                                    }
                            }
                            echo "</table>";
                            echo "</td>";

                    //ستون بدهی ها
                    echo "<td>";
                        echo"<table class='s' width=100%>";
                        echo"<tr>"."<td>"."عنوان"."</td>"."<td>"."مبلغ"."</td>"."<td>"."مانده"."</td>"."</tr>";
                        echo "<tr>";
                        $result = count($debt);
                            for($i=0;$i<$result;$i++){
                                $deb='F'.$debt[$i];
                                $debres='F'.$debr[$i];
                                    if (!empty($item->$deb)){
                                    echo "<td  style='vertical-align:middle'>".JText::_($deb)."</td>";
                                    echo "<td style='text-align:left'>"."<h4>".number_format($item->$deb)."</h4>"."</td>";
                                    echo "<td style='text-align:left'>"."<h4>".number_format($item->$debres)."</h4>"."</td>";
                                    $debtotal=$item->$deb+$debtotal;                                    // متغییر بدهی کل
                                    //$debtreservtotal=$item->$debres+$debreservtotal;                  // متغییر باقیمانده بدهی
                                    echo "</tr>";
                                    }
                            }
                            echo "</table>";
                            echo "</td>";
                        echo "</tr>";
                        echo "<tr>"."<td style='background-color:#F7F7F7; text-align:center; vertical-align:middle'>".JText::_(TOTALPAY)."<h3>".number_format($paytotal)."</h3>"."</td>"."<td style='background-color:#F7F7F7; text-align:center'>".JText::_(TOTALDEF)."<h3>".number_format($deftotal)."</h3>"."</td>"."<td style='background-color:#F7F7F7; text-align:center'>".JText::_(TOTALDEB)."<h3>".number_format($debtotal)."</h3>"."</td>";
                        echo "</tr>";
                        $finallpay=$paytotal-($deftotal+$debtotal);
                        echo "<tr>"."<td colspan=6 style='text-align:center; background-color: cornsilk; vertical-align:middle; direction:rtl' >".JText::_(FINALLPAY)."<h3>".number_format($finallpay)."</h3>"."</td>"."</tr>"."<h4>";
                echo "</table>";
                echo "<p>";
                echo"<table  width=100%>";
                        echo "<td>"."<table width=100%>";
                        echo"<tr>"."<td colspan=10 style='background-color: lavender'>"."<center>"."<h3>"." ریز کارکرد ماهیانه "."</h3>"."</center>"."</td>"."</tr>";
                        echo "<tr>";
                        $result = count($whd);
                            for($i=0;$i<$result;$i++){
                                $whs='F'.$whd[$i];
                                    if (!empty($item->$whs)){
                                    echo "<td width=67%>".JText::_($whs)."</td>";
                                    echo "<td width=33% style='text-align:center'>"."<h4>".number_format($item->$whs)."</h4>"."</td>";
                                    echo "</tr>";
                                    }
                            }
                    echo "</td>"."</table>";
                echo"</table>";
                echo"<a href='javascript:window.print()'>"."Print this Article"."</a>";

            echo "<a href='http://**************'>"."<img width='113' height='37' border='0' style='float: left;' alt='بازگشت به صفحه اصلی' src='images/back.gif'>"."</a>";
            echo "</table>";
?> 
```

当我使用 Java Script Function 打印所有图像时。我想将此数据库报告打印到 A4 ISO 纸上。我用Joomla2.5！并制作我的 style.css 和 print.css。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:27:48.797

我不确定我是否完全按照，但如果您不希望在 print.css 中打印时显示图像

```
img {
    display:none;
} 
```

您还应该使用百分比宽度，以便页面上的主包装器应该是 100%，而不是 992px（例如）

# telerik - Telerik RadEditor 的 ImageManager 坏了，甚至没有应用 css

> ID：13349412
> 
> 赞同：0
> 
> 时间：2012-11-12T18:35:03.463
> 
> 标签：telerik, image-editor

我在 asp.net 中使用 Tererik:RadEditor。当我单击 ImageManger 时，它显示为完全损坏。我没有对页面或任何控件应用任何 CSS。

![在此处输入图像描述](../Images/f9d4409d626dbd92276e9d23f45729df.png)

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T06:26:46.277

嗨，这个问题是因为缺少一些处理程序。请将以下内容添加到 Web.config 文件中的处理程序以解决上述问题。

```
<httpHandlers>
  <add verb="*" path="Telerik.Web.UI.WebResource.axd" type="Telerik.Web.UI.WebResource, Telerik.Web.UI" validate="false" />
  <add verb="*" path="Telerik.Web.UI.DialogHandler.aspx" type="Telerik.Web.UI.DialogHandler, Telerik.Web.UI" validate="false" />
</httpHandlers>

<system.webServer>
    <handlers>
     <add name="Telerik_Web_UI_DialogHandler_aspx" path="Telerik.Web.UI.DialogHandler.aspx" type="Telerik.Web.UI.DialogHandler" verb="*" preCondition="integratedMode"/>
    </handlers>
</system.webServer> 
```

这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:41:38.233

发生这种情况正是因为您没有将 Telerik Css 文件应用于您的控件。要解决此问题，您需要将用于编辑器控制的 css 文件添加到您的页面。您可以通过选择皮肤在标记或设计模式下执行此操作。

如果你要检查你的代码，你应该会看到 404 错误。你看到他们了吗？

# axapta - 在表单的数据网格上的行之间复制的数据

> ID：13349414
> 
> 赞同：0
> 
> 时间：2012-11-12T18:35:05.350
> 
> 标签：axapta, dynamics-ax-2009

在 AX 2009 中，通过比较和编译，我在表单的数据网格中添加了两个新控件，一个 Real 编辑和一个组合框。我编译没有问题。两个控件上的 Allow Edit 属性都设置为 Yes。

但是，在表单上，​​如果我编辑一行，无论是使用 Real 编辑还是组合框输入一个新数字，并且不点击保存但点击向下箭头键，我在以前记录中键入的数据在下一条记录中是重复的依此类推，直到我释放向下箭头键，而不仅仅是将焦点设置在新记录上。

创建这些字段的表没有表现出这种行为。焦点只是移动到下一条记录，键入的内容不会转移到下一条记录。只有表格才能做到这一点......

以前有人用 AX 表格见过这种行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T08:30:33.100

您可能没有在网格本身上指定数据源？

或者如果新控件是基于数据源上的编辑方法，你有没有在方法签名中得到数据源参数？

请参阅[http://msdn.microsoft.com/en-us/library/aa637541(AX.10).aspx](http://msdn.microsoft.com/en-us/library/aa637541(AX.10).aspx)

# javascript - AngularJS 选项卡示例和 IE8

> ID：13349416
> 
> 赞同：3
> 
> 时间：2012-11-12T18:35:22.363
> 
> 标签：javascript, angularjs

我正在使用 AngularJS 主页上的选项卡示例。我基本上只是逐字提取该代码，所以它看起来像这样：

```
app.directive('tabs', function() {
    return {
        restrict: 'E',
        transclude: true,
        scope: {},
        controller: function($scope, $element) {
            var panes = $scope.panes = [];

            $scope.select = function(pane) {
                angular.forEach(panes, function(pane) {
                    pane.selected = false;
                });
                pane.selected = true;
            }

            this.addPane = function(pane) {
                if (panes.length == 0) $scope.select(pane);
                panes.push(pane);
            }
        },
        template:
            '<div class="tabbable">' +
                '<ul class="nav nav-tabs">' +
                '<li ng-repeat="pane in panes" ng-class="{active:pane.selected}">'+
                '<a href="" ng-click="select(pane)">{{pane.title}}</a>' +
                '</li>' +
                '</ul>' +
                '<div class="tab-content" ng-transclude></div>' +
                '</div>',
        replace: true
    };
});

app.directive('pane', function() {
        return {
            require: '^tabs',
            restrict: 'E',
            transclude: true,
            scope: { title: '@' },
            link: function(scope, element, attrs, tabsCtrl) {
                tabsCtrl.addPane(scope);
            },
            template:
                '<div class="tab-pane" ng-class="{active: selected}" ng-transclude>' +
                    '</div>',
            replace: true
        };
    }) 
```

这很好用，除了在 IE8 中，您单击以更改当前选项卡的实际选项卡丢失并且我收到此控制台错误：

```
 Error: No controller: tabs<div class=tab-pane title="Change Log" ng-class="{active: selected}" ng-transclude> 
```

IE8 可能出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T05:01:22.787

在您的指令上，尝试替换限制：'E'，以限制：'A' 然后将所有指令更改为使用属性。这就是我如何让[http://angular-ui.github.io/bootstrap/](http://angular-ui.github.io/bootstrap/)中的选项卡在我正在处理的必须支持 IE8 的项目中工作。

# java - Java中的无限do..while循环

> ID：13349422
> 
> 赞同：0
> 
> 时间：2012-11-12T18:35:42.883
> 
> 标签：java, do-while

有人可以解释为什么吗？当我使用 do-while 循环时，我总是遇到无限循环。我错过了什么？

```
package com.assignment2;

public class FooCorporation {

    public static void main(String[] args) {

        employee(9.50, 55);
        employee(8.20, 47);
        employee(10.00, 73);

    }

    public static void employee(double basePay, int hoursWorked) {

        double salary = 0;
        int overtimeHours = 40;

        do {
            if (basePay >= 8.00 || hoursWorked > 40 ) {
                if (hoursWorked > 40) {
                    salary = basePay * hoursWorked
                            * ((hoursWorked - overtimeHours) * 1.5);
                } else {
                    salary = basePay * hoursWorked;
                }

            }

            else 
                System.out.println("According to law: Base Pay should be more than $8.00");

            System.out.printf("Total Pay: %d %.2f\n", hoursWorked, salary);

        } while (hoursWorked <= 60);

    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T18:37:07.903

您永远不会修改`hoursWorked`' 的值，因此始终满足条件，因此是无限循环。您需要在每次迭代结束时增加它的值，之后

```
 else 
        System.out.println("According to law: Base Pay should be more than $8.00");

    System.out.printf("Total Pay: %d %.2f\n", hoursWorked, salary);

    //Right here
} while (hoursWorked <= 60); 
```

**编辑**就像加倍努力，我没有理解那个循环的含义。你什么时候会增加`hoursWorked`'s 的价值？这不应该与特定员工有关吗？好像你想为每个工作 60 小时或更少的员工这样做。在这种情况下，您应该有一个`Employee`对象列表并对其进行迭代，只挑选那些工作了您想要的小时数的员工。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T18:37:17.283

`hoursWorked`永远不会改变，所以你的循环条件永远不会是假的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T18:37:28.420

hoursWorked 的值永远不会改变。它始终小于或等于 60。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T18:38:09.037

您的 while 条件永远不会停止。您没有在循环中修改 hoursWorked 的值，因此它将无限运行。然而，如果你传入一个大于 60 的值，那么它只会执行一次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T18:46:00.147

您设计代码的方式看起来根本不需要`do-while loop`块，因为您根本没有更改`hoursworked`值。

# actionscript-3 - 如何访问 AS3 中的单选按钮组？

> ID：13349423
> 
> 赞同：0
> 
> 时间：2012-11-12T18:35:43.010
> 
> 标签：actionscript-3, radio-button, radio

我在 CS5.5 的舞台上添加了一堆单选按钮，将它们的“groupName”属性设置为一个通用名称，但我似乎找不到任何关于如何在 AS3 中访问组的教程。我要做的就是获取所选收音机的标签名称。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T07:44:59.983

[RadioButtonGroup.selection](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/controls/RadioButtonGroup.html#selection)可能是您正在寻找的...

或者，您可以实现一个自定义类，该类继承一个精灵，包装一个组的所有单选按钮并添加额外的跟踪属性来控制单选按钮。

# c - 为什么组框是静态的，是一种 Button 控件？

> ID：13349424
> 
> 赞同：3
> 
> 时间：2012-11-12T18:35:49.103
> 
> 标签：c, winapi, visual-c++, controls

只是出于好奇，

Win32 Group Box 控件实际上是一个`BS_GROUPBOX`应用了样式的 Button 控件。由于控件是静态的，只是带有特殊边框的文本，为什么它是 Button 样式之一，而其余的都是用于接收用户输入的实际按钮或类似按钮的 UI 元素？

提前感谢您的任何见解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T18:46:18.377

这可以*追溯到*1980 年代。今天在夏威夷工作的每个人都在喝可乐，所以我们必须靠猜测来凑合。可能的原因是，由于当时最小化 Windows 的占用空间非常重要，因此 BUTTON 控件的现有管道也可重用于实现组框。

# sql - PostgreSQL 上的简单更新触发器返回错误

> ID：13349426
> 
> 赞同：0
> 
> 时间：2012-11-12T18:35:55.303
> 
> 标签：sql, postgresql, triggers

```
CREATE FUNCTION update_status() RETURNS TRIGGER AS ' 
BEGIN 
SELECT status FROM animals
IF status = "Alive" 
THEN 
UPDATE animals SET status = "Sold" WHERE status="Alive";   
END IF;   
RETURN NULL; 
END; ' LANGUAGE plpgsql;  

CREATE TRIGGER updatetrigger AFTER UPDATE OF id_selling ON animals EXECUTE PROCEDURE     update_status(); 
```

它说我没有使用选定的属性，我应该使用 Perform 而不是 Select。但是在执行后它不识别IF。我对这些语法真的很陌生，所以它可能是错误的。我认为我想做什么很清楚（我相信对于有经验的人来说这很简单）。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T19:00:43.927

在标准 SQL（和 PostgreSQL）中，这是一个带引号的标识符（表名、列名……）：

```
"Alive" 
```

这是一个字符串文字：

```
'Alive' 
```

您将收到有关“未知列”的投诉，因为您为字符串使用了错误的引号。

函数通常用[美元引用](http://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-DOLLAR-QUOTING)来定义以避免这种事情：

```
CREATE FUNCTION update_status() RETURNS TRIGGER AS $$
BEGIN 
    SELECT status FROM animals
    IF status = 'Alive' THEN 
        UPDATE animals SET status = 'Sold' WHERE status = 'Alive';   
    END IF;   
    RETURN NULL; 
END;
$$ LANGUAGE plpgsql; 
```

[触发器可以访问 NEW 和 OLD](http://www.postgresql.org/docs/current/interactive/trigger-definition.html)来表示行的先前/当前状态和行的新/更新状态，您应该咨询这些而不是尝试 SELECT 来查找状态：

```
CREATE FUNCTION update_status() RETURNS TRIGGER AS $$
BEGIN 
    IF NEW.status = 'Alive' THEN 
        UPDATE animals SET status = 'Sold' WHERE status = 'Alive';   
    END IF;   
    RETURN NULL; 
END;
$$ LANGUAGE plpgsql; 
```

您可能还想在该 UPDATE 的 WHERE 子句中添加更多内容，只是`WHERE status = 'Alive'`看起来有点宽泛。

# opengl - 处理 OpenGL VBO 中的死对象

> ID：13349429
> 
> 赞同：2
> 
> 时间：2012-11-12T18:36:17.730
> 
> 标签：opengl, vbo

想象一个典型的游戏，其中模拟世界中的对象被创建和销毁。创建这些对象时，它们的顶点数据存储在 VBO 中。此 VBO 每帧渲染一次。

是否有处理死物的最佳实践？即当对象被销毁并因此不再需要渲染时，其对应的 VBO 数据会发生什么？

似乎您想“释放”该内存以供其他对象将来使用。否则，您的 VBO 最终将几乎完全充满死数据。

我有一个可能的想法来实现这一点：一个 VBO 内存映射，其中单个字节被标记为空闲或正在使用。（此映射将作为普通数组存在于 CPU 上，而不是 GPU 上。）创建对象时，我们将其数据缓冲到由映射确定的空闲区域。我们将该区域标记为地图上使用的区域。然后当对象被销毁时，我们将同一区域标记为空闲。我想如果你很懒，你可以将地图存储为布尔数组，或者如果你想做对的话，可以将它打包为每个 VBO 字节的一个地图位。

到目前为止，这听起来像是最好的方法吗？有没有我没有看到的更常见的方法？

我知道很多这些问题都取决于您正在渲染的场景的特征，所以这里是上下文。我的场景由数百个对象组成。每个对象大约有八个顶点。每个顶点都有一个存储为浮点数的位置和纹理坐标。因此，我们正在研究大约：

```
4 bytes per float * 6 floats per vert * 8 verts per object * 500 objects
= 96,000 bytes of vertex data 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T18:51:41.233

听起来您正在考虑使用池分配器。在这些方面已经完成了很多现有的工作，这些工作也应该很好地适用于 VBO 内的分配。

如果所有元素的大小相同，这将非常简单。否则，您需要关注碎片，但堆管理器是众所周知的。

我将提供的最简单的改进是从最后一个填充的插槽开始扫描空闲插槽，而不是总是从头开始。

您可以通过使用 -style 数据结构来存储空闲位置列表来以空间换取速度`deque`，从而无需扫描空闲位置。

存储在 VBO 中的数据大小确实对管理器没有影响。只有可以单独重新利用的插槽数。

# php - Yii Emongodocuments 在忽略 maxDistance 的查询附近

> ID：13349430
> 
> 赞同：0
> 
> 时间：2012-11-12T18:36:19.793
> 
> 标签：php, mongodb, geolocation, yii

我正在尝试使用 $near 来查找靠近我的用户的地方。

```
 $places = Places::model ()->findAll(array (
            "conditions" => array (
                'location' => Array('near' => array((float)$this->latitudeUser,(float)$this->longitudeUser)),
            ),
            "maxDistance" => 1,
            "limit" => 5,
        )); 
```

一切似乎都有效，除了它可以找到远至美国德克萨斯州的地方，而我在加拿大蒙特利尔。我不知道我能做些什么来使 maxDistance 工作。看来我不能使用 GeoNear 或 nearSphere，因为 EMongoDocuments 似乎不支持它们。

所以我错过了一些明显的东西吗？

我知道[mongomapper-near-with-maxdistance-mongooperationfailure-geo-values-have-to](https://stackoverflow.com/questions/10020755/mongomapper-near-with-maxdistance-mongooperationfailure-geo-values-have-to)但没有任何帮助。

编辑：更改经度纬度的顺序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:37:27.337

MongoDB 需要以下格式的坐标：纬度、经度。你的数组有错误的方法。距离应该以度为单位，除非您使用 nearSphere。nearSphere 的结果应该与 near 相似，因此 EMongoDocuments 应该支持。如果您使用 nearSphere，则 maxdistance 以*弧度为单位*，因此如果您使用它，则将距离（以 km 为单位）除以地球的半径（以 km 为单位，~6371）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:39:51.770

引用 mongolabs 的出色人物的话：我相信您需要将 maxDistance 放在 $near 条件中。像这样的东西：

```
$places = Places::model ()->findAll(array (
"conditions" => array (
'location' => Array('near' => array((float)$this->latitudeUser,(float)$this->longitudeUser), 'maxDistance' => 1),
),
"limit" => 5,
)); 
```

我不熟悉这个框架，所以我不完全确定这是否正确，但我基于等效 MongoDB 查询的正确语法：

```
db.places.find( { location : { $near : [50,50] , $maxDistance : 5 } } ).limit(5) 
```

注意 $maxDistance 与 $near 处于相同的条件内。试一试，让我们知道它是否有帮助。谢谢，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-06T11:58:40.750

YiiMongoDbSuite 中的 EMongoCriteria 改变了 mongo 操作符的 char 大小写，maxDistance 将变为 "$maxdistance"，然后 mongodb 服务器将忽略它并返回用户位置附近的所有 100 个项目。使用 MongoYii，它不会改变你的查询条件：[http ://sammaye.github.io/MongoYii/](http://sammaye.github.io/MongoYii/)

# jquery - 调用 jQuery 扩展停止循环

> ID：13349432
> 
> 赞同：0
> 
> 时间：2012-11-12T18:36:26.550
> 
> 标签：jquery, jquery-plugins, for-loop

所以我写了一个 jquery 插件，它可以将选择元素转换为具有相同功能的可样式化 div 和 ul。我以前单独调用每个选择元素，如下所示：

```
$("#myElementId").selectList(); 
```

但是现在我决定我希望能够将“selectList”类添加到选择列表中，然后使用 selectList 类遍历所有元素并将它们转换为动态元素，如下所示：

```
var selects = $(".selectList");
for (i=0,j=selects.length;i<j;i++){
    $(selects[i]).selectList();
} 
```

效果很好，但仅适用于第一个元素。出于某种原因，一旦 .selectList() 被调用，它就会结束我的 for 循环，并且永远不会进行下一次迭代。我不知道为什么。我已经验证它`$(".selectList")`确实比 1 长，并且如果我在循环中什么都不放，除了`console.log(selects[i])`我按预期得到每个元素的日志。直到我在其中一个上调用我的扩展程序，它才停止循环。

有人可以向我解释这种行为吗？

如果您需要，这是我的插件代码。请不要在 js 文件的评论中重新分发或重用我：

```
// Custom select element functionality.
jQuery.fn.selectList = function(){

// Grab the original select element and it's options
var originalSelect = this;
var originalOptions = originalSelect.children("option");
var originalId = originalSelect.attr("id");

// Set the original select item to be hidden
originalSelect.css({"display": "none !important"});

// Set up our replacement block
var newContainer = "<div class='selectList_container' id='" + originalId + "_selectList' tabindex='0'>" + 
                      "<p class='selectList_value'>" + $(originalOptions[0]).html() + "</p>" + 
                      "<div class='selectList_optionsWrapper' style='height: 0 !important'>" + 
                         "<ul class='selectList_options' style='display: none;'></ul>" + 
                      "</div>" + 
                   "</div>";

// Append it to the original container
$(newContainer).insertAfter(originalSelect);

// Set up our new variables.  All references from here on in the script will reference the existing element already added to the document.
newContainer = $("#" + originalId + "_selectList");
var newValue = newContainer.find(".selectList_value");
var newList = newContainer.find(".selectList_options");
var newItems;

// Function to toggle the list
var toggleList = function(){
    newList.toggle();
};

// Create our options and add them to our new list
for (i=0, j=originalOptions.length; i<j; i++){

    // Get original option values
    var thisOption = $(originalOptions[i]);
    var optionText = thisOption.html();
    var optionValue = thisOption.val();

    // Build out our new item
    var newItem = "<li name='" + optionValue + "'";

    // Add a class of first and last to the first and last options to aid in styling
    if (i == 0) {
        newItem += " class='first' ";
    } else if (i == (j-1)){
        newItem += " class='last' ";
    };

    // Close out our new item
    newItem += ">" + optionText + "</li>";

    // Add our new item to the newItems string to be added to the dom later
    newItems += newItem;
};

// Add our new item to the list we've made
$(newItems).appendTo(newList);

// Reference to the new list items
var newOptions = $("#" + originalId + "_selectList .selectList_options li");

// Default CSS values for our new dom elements
newContainer.css({position: "relative"});
newValue.css({cursor: "pointer", display: "block", "text-align": "left"});
newList.css({margin: "0 auto", "z-index": "9999999"});
newOptions.css({cursor: "pointer", display: 'block'})

// Opens and closes the new select list when the select value is clicked on
newValue.click(toggleList);

// Closes the list if the select element loses focus (mimics default select element behavior).
// In order for this to work, the element the blur event listener is being bound to must have the attribute tabIndex=0.
// This tricks the browser into thinking it is a form element, otherwise blur will not fire.
newContainer.blur(function(){
    // This is in a setTimeout function because of the way IE detects the blur. 
    // 150ms is seamless to the end user but upholds the functionality in IE.
    window.setTimeout(function hide_list(){
        if (newList.is(":visible")) {
            toggleList();   
        };
    },150);
});

// Changes the value of our new select value and activates the old select option when one of our new list items is clicked
for (i=0, j=newOptions.length; i<j; i++) {
    $(newOptions[i]).click(function(){
        var thisText = $(this).html();
        var thisValue = $(this).attr("name");

        newValue.html(thisText).attr({"name": thisValue});
        newList.toggle();
        originalSelect.val($(this).attr("name")).trigger('change');
    });
};

// Make sure if the original select list changes without the use of our new elements, that the new elements stay updated.
this.change(function(){
    newValue.html($(this).find("option:selected").text());
});
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:39:08.260

如何使用**$.each**当前上下文使用它应该有帮助..

```
$(".selectList").each(function() {

   $(this).selectList()

}); 
```

可能将其转换为 DOM 元素**selects[i]**似乎正在造成问题..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T18:41:35.330

Look at the [authoring plugin guide](http://docs.jquery.com/Plugins/Authoring). You need to use `this.each` within your plugin to loop over selected elements and return this so as to maintain chainability.

```
$.fn.selectList = function() {  

   return this.each(function() {
     var $this = $(this);
   }); 

}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T18:42:33.033

您应该将所有代码应用到

```
$.fn.selectList = function() { 
         this.each(function() {
  :
   //your code
   :
         });
} 
```

块以确保它适用于选择器中的所有元素。在 each() 循环中，此关键字将使您可以访问单个项目。

参考：[http ://docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)

# iphone - 自动定位兄弟 UIView

> ID：13349435
> 
> 赞同：0
> 
> 时间：2012-11-12T18:36:31.567
> 
> 标签：iphone, ios, uiview

我在 UIScrollView 中堆叠了 4 个 UIView。

当任何一个 UIView 被点击时，我希望该特定视图展开并显示更多内容，这意味着所选视图下方的同级视图必须将自己向下推。

我本可以使用 UITableView，但是当您动态更改行高时会发生各种奇怪的事情，这就是我选择这个后备的原因。

我可以使用 autoresizingmask 来做到这一点吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:23:06.617

你的问题答案不是那么简单，你需要使用不同的逻辑手段你知道点击后每个视图有多少宽度和高度，然后你可以将视图的引用传递给 Scrollview 的 setContentSize。这里是一些解决的教程我在 Scrollview 中放置一些运行时数据时遇到的问题。

[关联](http://idevzilla.com/2010/09/16/uiscrollview-a-really-simple-tutorial/)

[关联](https://stackoverflow.com/questions/820557/are-there-any-good-uiscrollview-tutorials-on-the-net)

希望对您有所帮助。

# multithreading - nodejs函数调用线程处理::必须有其他线程

> ID：13349437
> 
> 赞同：0
> 
> 时间：2012-11-12T18:36:33.367
> 
> 标签：multithreading, node.js

我有一个问题由于nodejs是单线程模型并将函数调用放入堆栈中以异步调用。这将有助于主线程不被阻塞。现在我的问题是；难道我们没有另一个线程来处理堆叠的函数调用。这是正确的理解吗

谢谢

# objective-c - UIView 中的 UISearchBar

> ID：13349439
> 
> 赞同：0
> 
> 时间：2012-11-12T18:36:42.800
> 
> 标签：objective-c, xcode, ios6

我很难听从指示。我在 UIView 中有一个 UISearchBar。用户将搜索字符串输入到 UISearchBar 并单击搜索图标进行搜索。结果将显示在新窗口（UITableView）中。

我的搜索向我展示了这一点：

> UISearchDisplayController 不能添加到 UIView，因为它不是从 UIView 继承的。您可以使用 IBOutlet 在界面构建器中添加 UISearchBar，然后以编程方式使用该 UISearchBar 创建 UISearchDisplayController。
> 
> 只需在代码中执行，例如（假设视图控制器是 vc）： [vc addSubview:mySearchDisplayController.searchBar]; // 注意 searchBar 是视图，mySearchDisplayController 只控制 searchBar 等。

还有这个：

> 只需让您的视图控制器实现 UISearchBarDelegate。在您的 xib 文件中，您需要做的就是将 UISearchBar 添加到您的视图并根据需要对其进行配置，为其创建一个出口（实际上是可选的，但有助于明确），并将委托出口分配给您的视图控制器。然后，为了响应搜索栏事件，根据需要实现 UISearchBarDelegate 协议方法。例如： - (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar { [self handleSearch:searchBar]; }
> 
> *   (void)searchBarTextDidEndEditing:(UISearchBar *)searchBar { [self handleSearch:searchBar]; }
>     
>     
> *   (void)handleSearch:(UISearchBar *)searchBar { NSLog(@"用户搜索 %@", searchBar.text); [searchBar resignFirstResponder]; // 如果你想让键盘消失 }
>     
>     
> *   (void)searchBarCancelButtonClicked:(UISearchBar *) searchBar { NSLog(@"用户取消搜索"); [searchBar resignFirstResponder]; // 如果你想让键盘消失 }

我只是不明白！我应该将 mySearchController 添加到我的 UIView 吗？还是我的 UISearchBar？将它添加到我的 UIView 中，没有任何反应；将它添加到我的 UISearchBar 真的假发应用程序。我什至没有收到错误 - 它只是挂起。

然后是第二部分：委托。我应该把委托放在我的 UIView 中吗？还是在 UISearchDisplayController 中？不知道该往哪个方向走，到目前为止还没有任何效果。请帮忙。

在这一点上，我真正想要的只是让 handleSearch 方法得到执行。非常感谢您的任何帮助。

很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T09:25:48.940

这个想法是您在 Interface Builder 中创建一个搜索栏作为出口，然后使用以下代码创建 UISearchDisplayController：

```
self.searchDisplayController2 = [[UISearchDisplayController alloc] initWithSearchBar:self.searchBar contentsController:self];
self.searchDisplayController2.delegate = self;
self.searchDisplayController2.searchResultsDelegate = self;
self.searchDisplayController2.searchResultsDataSource = self; 
```

此代码将在您的视图控制器中实现，例如在`viewDidLoad`. 您还必须在同一个 VC 中实现至少两个委托函数：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath; 
```

# php - 如果尚未发布任何内容，如何设置 PHP 变量？

> ID：13349441
> 
> 赞同：1
> 
> 时间：2012-11-12T18:36:46.050
> 
> 标签：php, variables

我有一个 PHP 图形页面，它显示从另一个 PHP 文件生成的图形。

该图形生成 PHP 文件将通过 AJAX 脚本更改其变量。

当 PHP 图形页面首次加载时，我需要能够确定生成的 PHP 文件中的变量是否为空，以便我可以将其更改为默认值，直到数据通过 $_get 函数覆盖它。

到目前为止，我已经尝试过这个没有运气并且有点卡住，任何帮助将不胜感激，因为我对 PHP 非常陌生。谢谢 ：）

```
$course = $_GET['usercourse'];

if (empty($course))
{
    $course = 'All';
}

else
{
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T18:38:54.030

使用该**[`isset()`](http://php.net/manual/en/function.isset.php)**功能。

```
if (isset($_GET['usercourse'])
{
    //do something
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T18:43:06.217

使用**[`isset()`](http://php.net/manual/en/function.isset.php)**功能。

```
if (isset($_GET['usercourse'])
{
    //do something
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T18:45:08.143

检查变量是否已设置且不等于空字符串的简单代码示例：

```
$course = isset($_GET['usercourse']) && $_GET['usercourse'] !== ''
    ? $_GET['usercourse']
    : 'All'; 
```

稍微好一些：

```
$course = isset($_GET['usercourse']) && preg_match('@^(LIST|of|AccEPtabLE|vaLUes)$@i', $_GET['usercourse'])
    ? $_GET['usercourse']
    : 'All';

$course = isset($_GET['usercourse']) && in_array($_GET['usercourse'], array('list', 'of', 'acceptable', 'values'))
    ? $_GET['usercourse']
    : 'All'; 
```

更好的是：

使用[过滤功能](http://www.php.net/manual/en/ref.filter.php)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T19:08:51.317

其他答案已经回答了你的直接问题，但我认为这里有一些更深层次的东西需要解释。

您通常希望避免访问您不确定存在的数组索引。

例如：

```
$a = array('foo' => 'bar');
echo $a['test']; //bad! 
```

这同样适用于 $_GET、$_POST、$_COOKIE 等。除非您知道它们存在，否则不要访问索引。

**请注意，对于用户定义的索引，这转换为“除非您检查过索引是否存在，否则不要访问索引”。**

```
$content = $_GET['content']; //ALWAYS wrong 
```

您可以使用三个选项来检查数组索引：isset、empty 和 array_key_exists。

`isset($x)`如果 $x 不为空，则返回 true。 `isset`本质上等同于: `$x !== null`，除了 isset 不会发出未定义的索引/变量通知。

`(empty($x) === (!isset($x) || !$x))`

换句话说，empty 认为任何松散地等于 false 的东西都是空的。这在某些情况下很有用。

`array_key_exists($key, $array)`是一个简单的保证，`$array[$key]`不会发出未定义的索引通知。

那么以正确的方式提取用户输入的最简单方法是什么？

```
$content = (isset($_GET['content'])) ? $_GET['content'] : null; 
```

在这一点上，您有一个重要的保证，即`$content !== null`如果用户提供了输入。

* * *

请注意，您还应该避免使用未定义变量的执行路径：

```
if (isset($_GET['content'])) {
    $content = $_GET['content'];
}

echo $content; //WRONG - $content is not guaranteed to be defined 
```

如果 $content 被包裹在 isset 或 empty 中，您可以在这种情况下使用它，但这会妨碍代码的可读性。如果您想在某些条件下保留未定义的变量，请将其定义为 null。这将其保留为“未定义”，而不会发出变量不存在警告。

```
$a = null;
var_dump($a === $b); //true, because the non-existent $b is treated as false
//(note that this is terrible style though -- this would issue a variable doesn't exist warning for $b 
```

* * *

当然，还有 PHP 的[过滤器](http://php.net/filter)扩展。特别是，您可以使用[filter_input](http://php.net/filter_input)来避免重写大量处理用户输入的代码。

[您可以在此处](https://codereview.stackexchange.com/questions/12757/basic-user-registration-code-in-php/12769#12769)或[此处](https://codereview.stackexchange.com/questions/12647/php-dynamic-insert-mysql-is-there-a-better-way-than-this/12649#12649)的正确部分中阅读有关正确（或偏执狂，有些人可能称之为）输入处理的更多信息。

* * *

顺便说一句，您应该始终在错误的情况下进行开发，并且应该监视任何类型的错误（警告、通知等）。这将有助于防止潜在的逻辑错误，并倾向于保持代码清洁。（似乎从不发出通知的代码和编写良好的代码之间存在相关性。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-12T18:41:18.187

使用`isset`函数，像这样，

```
if(isset($_GET['usercourse']))
$course = $_GET['usercourse'];

if (empty($course))
{
$course = 'All';
} else {
 //do something...
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-12T18:39:08.773

为什么不与空字符串进行比较？

```
if (!isset($course) || empty($course) ) {
    $course = 'All';
} 
```

# wordpress - .htaccess 文件：重定向文件夹内的文件

> ID：13349449
> 
> 赞同：0
> 
> 时间：2012-11-12T18:37:21.360
> 
> 标签：wordpress, .htaccess, directory, blogs, move

我试图让我的服务器在本地看起来很整洁（我发誓我是强迫症），我正在做的是将 wordpress 博客与我所有的子域结合起来。

我的 wordpress 博客是我的主要网站 example.com。而我的子域位于 sub.example.com。

现在，我有这个设置：

```
public_html
   ( wordpress files here )
   subdomains
      sub1 - (sub1.example.com)
      sub2 - (sub2.example.com)
      sub3 - (sub3.example.com)
   blog - (empty) 
```

**博客**文件夹是空的。但是，我想将所有 wordpress 文件移动到 blog/ 但将博客的 URL 保留在[http://www.example.com/](http://www.example.com/)。因此，[http://www.example.com/index.php](http://www.example.com/index.php)将转到[http://www.example.com/blog/index.php](http://www.example.com/blog/index.php)以及 blog/ 中的所有目录。

此代码不起作用：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)$ blog/$1.php [L] 
```

相反，它给了我 / 的索引。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:12:25.690

最好的方法是将所有文件移动到 /blog，然后重新定义您的 Apache 站点根目录为 www. 域包括博客文件夹，如

`DocumentRoot /(path)/public_html`->`DocumentRoot /(path)/public_html/blog`

这样，您甚至不必使用 .htaccess 重写来将您的博客文件夹正确映射到 www 域的根目录。

如果由于某种原因你不能这样做，让我们看看你的 htaccess 规则：

```
RewriteCond %{REQUEST_FILENAME} !-f    
RewriteCond %{REQUEST_FILENAME}.php -f 
```

这2个冲突。`[OR]`如果您的 结尾没有 a `RewriteCond`，则规则充当 AND 运算符，这意味着每个条件都必须为真。因此，您永远不会遇到既不是文件 ( `!-f`) 又是 .php 文件 ( `.php -f`) 的匹配项。

```
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)$ blog/$1.php [L] 
```

在这里，您将根据 RewriteCond 将 .php 附加到已经包含 .php 的匹配项。

我会尝试以下方法：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?example\.com$
RewriteCond %{REQUEST_URI} !^/blog/
RewriteRule ^(.*)$ /blog/$1 [NC,L] 
```

如果您将所有文件移动到 /public_html/blog 并且 /public_html 除了您的 /blog 和 /subdomain 文件夹之外什么都没有，那么您甚至真的不需要`!-d`&`!-f`因为没有文件或文件夹可以匹配（除了您的子域文件夹但我不确定你是否希望那些在 www 域下提供服务）。看到你的 wordpress css、js 和图像现在也将出现在 /blog 中，你会希望它们的 url 也被转发。`RewriteBase /`在根文件夹中工作时也不需要。只需用斜杠（如`/blog/$1`. 最后我添加了一个条件来检查目标请求是否已经包含 /blog 以防止无限重定向......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T02:11:50.097

不要忘记，即使有重定向，您仍然需要使用 /blog 配置您的站点地址 -

[http://www.example.com/blog/](http://www.example.com/blog/)

*   在 Wordpress 设置中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T18:54:21.877

这是另一个工作示例：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www.)?example\.com$ [NC]
RewriteRule ^$ /blog/$1 [R=303,L] 
```

# solr - Solrnet 分组 - 我可以得到每组 n 个结果吗

> ID：13349451
> 
> 赞同：0
> 
> 时间：2012-11-12T18:37:26.503
> 
> 标签：solr, solrnet, fieldcollapsing

我正在使用 solrnet 0.40 分组功能。我在一个字段上分组（比如文件名）。

但在结果中，我想显示组（文件名）的多个命中。

*   文件名-1

    *   命中 1，命中 2 ....命中 n
*   文件名-2

    *   击中 1，击中 2....

等等....

除了为每个组运行辅助查询的明显方式之外，还有什么方法可以让我获得聚类结果的功能？

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:29:28.587

只需将分组参数设置为所需值。例如，将其设置为 10 以每组获得 10 个结果。

```
 Grouping = new GroupingParameters()
        {
            Fields = new [] { "manu_exact" },
            Format = GroupingFormat.Grouped,
            Limit = 10,
        } 
```

# java - java - 如何使用多线程在java中的套接字编程中同时发送和接收数据？

> ID：13349457
> 
> 赞同：-3
> 
> 时间：2012-11-12T18:37:50.880
> 
> 标签：java, sockets, concurrency, datagram

我是 Java 新手，正在尝试使用 Datagram 套接字编写程序来在客户端和服务器之间发送和接收数据包。问题是当光标到达该`receive()`行时，它会卡在那里直到数据包到达。在这段时间里，我怎样才能向对方发送数据？换句话说，我怎样才能让它使用数据报套接字同时发送和接收？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T18:40:26.720

您需要**线程**（或 NIO/netty，但要高级得多）。

如果不能一次处理，基本上阻塞 IO（顾名思义）会在每个读/写操作上阻塞当前线程。因此，您需要第二个线程来处理写入。每个好的 Java 套接字教程都将包含一个多线程服务器的示例。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-12T18:52:47.293

您似乎指的是异步 I/O，虽然这确实是通过使用线程和套接字（如前所述）实现的，但最好使用 NIO：[http ://en.wikipedia.org/wiki/New_I/O](http://en.wikipedia.org/wiki/New_I/O)

它的扩展性要好得多，并且是基于事件的，这比多线程更容易掌握，假设您对 IO 和网络没有太多经验。你可以通过使用 Apache MINA 来避免它的一些复杂性：http: [//mina.apache.org/](http://mina.apache.org/)

# android - 未检测到 Nexus7 USB 主机 FTDI 设备

> ID：13349459
> 
> 赞同：3
> 
> 时间：2012-11-12T18:37:58.130
> 
> 标签：android, android-4.0-ice-cream-sandwich, atmel, usb-otg, ftdi

我有一个简单的 ATMEL 微控制器，板上有一个 LED 灯，通过 FTDI-232 电缆和 USB->micro-USB OTG 电缆连接到 Nexus 平板电脑。

如果出现以下情况，则无法识别设备：

```
1)FTDI cable is connected to the board + micro-controller
2)The OTG cable is connected to the FTDI cable
3)OTG cable is connected to the tablet 
```

在以下情况下被认可：

```
1)The FTDI cable is connected to the board + micro-controller
2)the OTG cable is plugged into the tablet
3)the FTDI cable is plugged into the OTG cable 
```

在以下情况下被认可：

```
1)FTDI cable is plugged into the OTG cable
2)OTG cable is plugged into the tablet
3)FTDI cable is plugged into the board + micro controller 
```

我还有一个独立于连接顺序的 Arduino UNO 板。

我需要它在 OTG 电缆最后连接到平板电脑的第一个示例中工作。

编辑：环顾四周并测试了一些东西后，我认为 OTG 电缆根据第一个有电的设备来决定哪个设备是主机。如果我断开 ATMEL 板/芯片的电源，然后插入整个设备，它会将平板电脑设置为主机。

所以我需要一些方法来强制将 Nexus7 平板电脑设置为主机，即使它已经插入有源设备。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T21:42:08.833

搞乱 FTDI 设备时，您是否在 android 端运行任何应用程序？或者只是一些 Arduino 代码？
如果您正在运行 Android 应用程序，您的清单中是否有此行？
`<uses-feature android:name="android.hardware.usb.host" android:required="true"></uses-feature>`
仍然在清单中，但介于`<activity></activity>`：

```
 <intent-filter>
     <action android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED" />
 </intent-filter>

 <meta-data android:name="android.hardware.usb.action.USB_DEVICE_ATTACHED"
     android:resource="@xml/device_filter" />` 
```

以下几行出现在我的 AndroidManifest.xml 文件中，以允许我的应用程序与我目前正在使用的 FTDI 设备通信。同样，如果您实际上没有运行任何 Android 代码，请忽略！我确实希望它可以提供帮助。我正在开发三星 Galaxy Tab 2 7.0，希望很快扩展到其他平板电脑。因此，如果您可以在 Nexus 7 上运行，我将非常感谢您了解成功！

# .net - Windows 8 应用程序中没有 FileTypeFilter 的 FileOpenPicker

> ID：13349462
> 
> 赞同：5
> 
> 时间：2012-11-12T18:38:08.113
> 
> 标签：.net, windows-8, microsoft-metro

我需要一个没有任何 FileTypeFilter 的 FileOpenPicker ！！当我不添加任何 FileTypeFilter 时，它会给出如下异常：“FileTypeFilters 属性必须至少指定一个文件类型过滤器。” 但我需要在 FileOpenPicker 中查看所有类型的文件！

```
FileOpenPicker fileOpenPicker = new FileOpenPicker();
fileOpenPicker.ViewMode = PickerViewMode.Thumbnail;
//fileOpenPicker.FileTypeFilter.Add(".txt"); I dot not need any filter !!
fileOpenPicker.CommitButtonText = "Select Files";
fileOpenPicker.SuggestedStartLocation = PickerLocationId.PicturesLibrary;
IReadOnlyList<StorageFile> files =await fileOpenPicker.PickMultipleFilesAsync();

List<string> fileList = new List<string>();
StringBuilder sb = new StringBuilder();
foreach (StorageFile file in files)            
{
    fileList.Add(file.Name);
    sb.AppendLine(file.Name);
} 
```

谁能帮我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-12T18:44:09.207

采用：

```
fileOpenPicker.FileTypeFilter.Add("*"); 
```

能够选择任何类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T20:50:00.137

FileOpenPicker.FileTypeFilter - 获取文件打开选择器显示的文件类型的集合。

```
 FileOpenPicker fileOpenPicker = new FileOpenPicker();
    fileOpenPicker.ViewMode = PickerViewMode.Thumbnail;
    fileOpenPicker.FileTypeFilter.Add("*");
    fileOpenPicker.CommitButtonText = "Select Files";
    fileOpenPicker.SuggestedStartLocation = PickerLocationId.PicturesLibrary;
    IReadOnlyList<StorageFile> files =await fileOpenPicker.PickMultipleFilesAsync();

    List<string> fileList = new List<string>();
    StringBuilder sb = new StringBuilder();
    foreach (StorageFile file in files)            
    {
        fileList.Add(file.Name);
        sb.AppendLine(file.Name);
    } 
```

# ruby-on-rails - 合并 ActiveRecord 模型对象

> ID：13349466
> 
> 赞同：0
> 
> 时间：2012-11-12T18:38:17.433
> 
> 标签：ruby-on-rails, activerecord

有没有一种简单的方法可以做到这一点。
假设我有 4 个`Person`对象以某种方式指代同一个人。
他们都有一些正确填写的属性，例如`@person1`has `age`and `gender`, `@person2`have `last_name`, `@person3`have`observation`和`@person4`have `mother_name`。

除了这些简单的属性之外，其他`ActiveRecord`模型之间还有一些关系。
例如`@person1`，可能有 2 个注释，`@person2`可能有 1 个注释和 2 个地址，等等。

我正在寻找的东西是一种将所有这四个对象合并在一起的方法，以保留所有填充的属性和所有 relashionships。
例如，最后我会有这样的东西：一个`Person`带有`age, gender, last_name, observation, mother_name, 3 notes, 2 adresses, etc`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:47:54.987

您看过 ar_merge gem 了吗？[https://github.com/grosser/ar_merge](https://github.com/grosser/ar_merge) 好几个月没更新了，看了一下，应该还是兼容的。

# c++ - 迭代器实现

> ID：13349468
> 
> 赞同：0
> 
> 时间：2012-11-12T18:38:30.273
> 
> 标签：c++, insert, iterator

当实现插入函数时，一般`pair<iterator,bool>`返回的是stl库我正在实现类似stl的类。我可以在对中返回一个迭代器作为局部变量，即

```
itartor it;//init it
return pair<iterator,bool>(it,true); 
```

或者我应该动态分配迭代器，即：

```
itartor it = new iterator;
return pair<iterator,bool>(*it,true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:40:45.930

按值返回迭代器。迭代器被设计为轻量级和可复制的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T18:42:17.643

You should use the first option. There is no reason whatsoever for the second, since you are dereferencing the pointer anyway. And leaking memory:

```
iterator it = new iterator;
return pair<iterator,bool>(*it,true);
                             ^ dereference here -> memory leak. 
```

Standard library iterators are designed to be passed by value. You should make sure your iterators are cheap to copy, and avoid all dynamic memory management pitfalls.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T18:42:52.180

除非您知道自己在做什么（并且您能够正确处理它），否则永远不要返回动态分配的内容。因此，选择第一个。

鉴于您甚至无法在此处返回指针，这将不起作用（在您的代码示例中，您仍然会创建已分配对象/内存的副本）。

# delphi - Delphi - Listview+OwnerData = 按键音

> ID：13349470
> 
> 赞同：2
> 
> 时间：2012-11-12T18:38:33.013
> 
> 标签：delphi, listview, virtual

使用使用 OwnerData（虚拟）的 TListView，当我按下 LV 作为活动控件的键时，它会发出 BEEP 声。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T20:43:56.930

正如 Remy Lebeau 所说，问题`OnDataFind`没有实现，但你应该像这样实现它：

```
procedure TForm1.ListViewDataFind(Sender: TObject; Find: TItemFind; const FindString: string;
  const FindPosition: TPoint; FindData: Pointer; StartIndex: Integer; Direction: TSearchDirection;
  Wrap: Boolean; var Index: Integer);
begin
  // Here we must find currently selected element
  if Assigned((Sender as TListView).Selected) then
    Index := (Sender as TListView).Selected.Index;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T19:14:16.610

该控件可能会尝试搜索列表数据以查找与您正在键入的文本匹配的项目。你实施了这个`OnDataFind`活动吗？

# sql - If语句VBA访问的布尔问题

> ID：13349472
> 
> 赞同：2
> 
> 时间：2012-11-12T18:38:34.900
> 
> 标签：sql, vba, ms-access-2010

我对 VBA 的条件运算符感到困惑。它可能与奇怪的类型转换有关，但我被卡住了，需要一些帮助 -

```
query = "SELECT * FROM [records_table] " & _
    "WHERE [po_number] = " & Chr(39) & po_number & Chr(39) & ";"

Set rec_set = data_base.OpenRecordset(query)
MsgBox rec_set.Fields("po_ack")
If rec_set.Fields("po_ack") <> Null Then _
    po_ack = True
If rec_set.Fields("po_ack") = Null Then _
    po_ack = False 
```

现在，这应该返回 true，但它返回 false？当我 msgbox 记录集值时，我得到“11/12/2012”，但是当我 msgbox 函数返回时，它是 false？

po_ack 存储一个日期值，这个特定的值是“2012 年 11 月 12 日”，那么为什么当我检查它是否为空时，它说“2012 年 11 月 12 日”== 空？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T18:51:56.087

Null 永远不等于任何东西，甚至不等于另一个 Null。

Null 永远不等于任何东西，甚至不等于另一个 Null。

使用该`IsNull()`函数来检查某物是否为 Null。

```
If IsNull(rec_set!po_ack) = False Then
    po_ack = True
Else
    po_ack = False
End If 
```

看看该`IsDate()`功能是否对您想要做的事情有用。以下是从立即窗口复制的一些示例表达式。

```
? IsDate(Null)
False
? IsDate(Now())
True
? IsDate("2012-11-12")
True
? IsDate("No way, dood")
False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T18:53:50.920

先生，我认为您应该看看下面列出的链接。`NULL`和 VB中`Nothing`的空白值之间存在巨大差异。`Null`是未知数，因此它不等于,`1`或其他任何值。永远不要将变量与 null 进行比较，因为它会导致不正确的逻辑。检查您是否混淆了这些类型。`TRUE``""`

[http://www.techrepublic.com/article/learn-the-differences-between-is-null-and-isnull-in-access/5034252](http://www.techrepublic.com/article/learn-the-differences-between-is-null-and-isnull-in-access/5034252)

[http://www.everythingaccess.com/tutorials.asp?ID=Common-Errors-with-Null](http://www.everythingaccess.com/tutorials.asp?ID=Common-Errors-with-Null)

[http://www.tek-tips.com/faqs.cfm?fid=3710](http://www.tek-tips.com/faqs.cfm?fid=3710)

# ruby-on-rails - 使用预定义的高度、宽度和 (x , y) 索引保存在轨道中后自动裁剪图像

> ID：13349476
> 
> 赞同：0
> 
> 时间：2012-11-12T18:38:46.623
> 
> 标签：ruby-on-rails, image, resize, paperclip, crop

![我想自动删除蓝色多余背景而不是手动](../Images/b7b987afda8768f39e1ddc42621d54a1.png) 我正在寻找保存图像后自动裁剪图像的方法：

在将 html 转换为 rails 中的图像时，我遇到了一个乏味的问题。 **我的问题是当 html 转换为图像时，额外的背景也会附加到 image**，我不需要它，所以在通过一些代码保存回调后尝试裁剪图像。

我需要针对问题的具体答案，任何帮助都会得到帮助。

提前致谢

朋友们，我在下面提供了解决方案来回答，但我需要比我提供的解决方案更高效和有效。

1）我想用更短的线做

2) 种植成本低

3) 高效算法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T18:53:20.047

我认为最合适的方法是使用 ImageMagic，它有自己的脚本语言（或 API）。看看这个[Railscast](http://railscasts.com/episodes/374-image-manipulation?autoplay=true)。它使用 CarrierWawe ，我认为这对您来说不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T09:21:13.663

[Cloudinary](http://cloudinary.com/ "多云的")为这种事情提供了很棒的服务。也可以轻松与 Heroku 集成！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T09:15:39.567

保存图像后，我调用此方法来裁剪图像

```
def reprocess_final_image

    image_file_url = Rails.root.to_s+'/public'+self.final_image.url(:original).split('?')[0]
    img = Magick::Image.read(image_file_url).first
    img.format = "PNG"
    img.crop_resized!(240,200, Magick::NorthWestGravity)
    img.write(image_file_url)

  end 
```

其中裁剪调整大小的方法具有参数 img.crop_resized!(width,height,Gravity)

# php - 在字符串中搜索模式

> ID：13349478
> 
> 赞同：-2
> 
> 时间：2012-11-12T18:38:50.780
> 
> 标签：php, algorithm, search, pattern-matching

字符串中的模式搜索。

例如。

```
$string = "111111110000";
FindOut($string); 
```

函数应该返回 0

```
function FindOut($str){    
    $items =  str_split($str, 3);    
    print_r($items);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:03:13.513

如果我理解正确，您的问题归结为找出 3 个字符的子字符串是否在字符串中出现两次而没有重叠。如果确实如此，这将为您提供第一次出现的位置：

```
function findPattern($string, $minlen=3) {
    $max = strlen($string)-$minlen;
    for($i=0;$i<=$max;$i++) {
        $pattern = substr($string,$i,$minlen);
        if(substr_count($string,$pattern)>1)
            return $i;
    }
    return false;
} 
```

或者我在这里错过了什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T18:52:49.733

您在这里拥有的东西在概念上可以通过滑动窗口来解决。对于您的示例，您有一个大小为 3 的滑动窗口。

对于字符串中的每个字符，您将当前字符的子字符串和接下来的两个字符作为当前模式。然后将窗口向上滑动一个位置，并检查字符串的其余部分是否包含当前模式包含的内容。如果是，则返回当前索引。如果没有，你重复。

例子：

```
1010101101
|-| 
```

所以，模式 = `101`。现在，我们将滑动窗口推进一个字符：

```
1010101101
 |-| 
```

并查看字符串的其余部分是否有`101`，检查 3 个字符的每个组合。

从概念上讲，这应该是解决此问题所需的全部内容。

**编辑：**我真的不喜欢人们只是要求代码，但由于这似乎是一个有趣的问题，这是我对上述算法的实现，它允许窗口大小变化（而不是固定在 3，该功能仅经过简要测试，省略了明显的错误检查）：

```
function findPattern( $str, $window_size = 3) {
    // Start the index at 0 (beginning of the string)
    $i = 0;

    // while( (the current pattern in the window) is not empty / false)
    while( ($current_pattern = substr( $str, $i, $window_size)) != false) {
        $possible_matches = array();

        // Get the combination of all possible matches from the remainder of the string
        for( $j = 0; $j < $window_size; $j++) {
            $possible_matches = array_merge( $possible_matches, str_split( substr( $str, $i + 1 + $j), $window_size));
        }

        // If the current pattern is in the possible matches, we found a duplicate, return the index of the first occurrence
        if( in_array( $current_pattern, $possible_matches)) {
            return $i;
        }

        // Otherwise, increment $i and grab a new window
        $i++;
    }
    // No duplicates were found, return -1
    return -1;
} 
```

应该注意的是，这当然不是最有效的算法或实现，但它应该有助于澄清问题并给出如何解决问题的简单示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T18:57:39.457

看起来您更想使用子字符串函数来走动并检查每三个字符，而不仅仅是将其分成 3 个

```
function fp($s, $len = 3){
  $max = strlen($s) - $len; //borrowed from lafor as it was a terrible oversight by me
  $parts = array();

  for($i=0; $i < $max; $i++){
    $three = substr($s, $i, $len);
    if(array_key_exists("$three",$parts)){
          return $parts["$three"];  
    //if we've already seen it before then this is the first duplicate, we can return it
    }
    else{
      $parts["$three"] = i; //save the index of the starting position.
    }
  }

  return false; //if we get this far then we didn't find any duplicate strings
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T18:59:23.167

这种模式搜索的快速而肮脏的实现：

```
function findPattern($string){
    $matches = 0;
    $substrStart = 0;

    while($matches < 2 && $substrStart+ 3 < strlen($string) && $pattern = substr($string, $substrStart++, 3)){
        $matches = substr_count($string,$pattern);
    }

    if($matches < 2){
        return null;
    }
    return $substrStart-1; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T18:53:48.160

根据[`str_split`文档](http://php.net/manual/en/function.str-split.php)，调用`str_split`将`"1010101101"`导致：

```
Array(
  [0] => 101
  [1] => 010
  [2] => 110
  [3] => 1
} 
```

这些都不会相互匹配。

您需要查看字符串的每个 3 长切片（从索引 0 开始，然后是索引 1，依此类推）。

我建议查看[`substr`](http://php.net/substr)，您可以像这样使用它：

```
substr($input_string, $index, $length) 
```

它将为您提供从长度`$input_string`开始的部分。`$index``$length`

# sql-server - 如何使用 CTE 从分层视图中获取元素

> ID：13349488
> 
> 赞同：1
> 
> 时间：2012-11-12T18:39:16.167
> 
> 标签：sql-server, sql-server-2008, common-table-expression

我有一个通过两个字段存储递归记录的表：ID 和 PARENTID。

我有一个功能可以将父级关联到树的元素。当我选择可以是我自己的“父”元素时，我显然会从结果列表中排除直接或间接依赖于我的所有元素，以及我已经依赖的元素。

让我们举个例子。给定以下示例层次结构：

```
ID                  PARENT_ID
-----------         ------------------
1                    NULL
2                    1
3                    NULL
4                    2
5                    1
6                    3 
```

如果我想找到可以作为元素父级的元素，`ID = 4`我将只考虑元素`5 - 3 - 6`，因为它们与实际结构没有任何关系。

如何通过 CTE 查询获取这些元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:22:39.677

```
Select *
into #tmp
From Tree2

;WITH Rollups AS (
    SELECT ID, Parent_Id
    FROM tree2 where ID=4
    UNION ALL
    SELECT parent.Id, parent.Parent_Id
    FROM tree2 parent 
    INNER JOIN Rollups child ON child.Id = parent.Parent_Id
)
Delete #tmp from Rollups where #tmp.ID=Rollups.ID

;WITH Rollups AS (
    SELECT ID, Parent_Id
    FROM tree2 where ID=4
    UNION ALL
    SELECT parent.Id, parent.Parent_Id
    FROM tree2 parent 
    INNER JOIN Rollups child ON child.Parent_Id = parent.Id
)
Delete #tmp from Rollups where #tmp.ID=Rollups.ID

Select * from #tmp
Drop Table #tmp 
```

# sql - 如何建立两个表之间的一对多关系

> ID：13349499
> 
> 赞同：2
> 
> 时间：2012-11-12T18:40:08.907
> 
> 标签：sql, sql-server, database, relation

我正在处理这种情况。我在 SQL SERVER 中有三个名为`Movies`,`Series`和`Orders`.

`Orders`有一个`ItemId`可能是`MovieId`（电影PK）或`SerieId`（系列PK）的地方。我的意思是，在 Orders 表中可能有来自系列电影的记录。

我不知道如何维持这种关系，也不知道哪种方式可能是实现它的最佳方式。在我知道之前，我只能在 2 个表之间创建 1 对 1 或 1 对多的关系，而不是 3 个。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T18:43:49.537

在这种情况下，我认为最好将 Movies 和 Series 存储在具有公共属性的同一个表中，包括。一列指示类型（电影或系列），然后在单独的表中（如果要规范化）甚至在同一个表中（以避免连接）中具有附加属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:44:20.103

您应该了解在 sql-server 中**实现[表继承。](http://www.sqlteam.com/article/implementing-table-inheritance-in-sql-server)**

您有**产品**吗？这个产品可能是**电影**或**系列**。

在链接样本中，一个**人**可能是**学生**或**教师**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T18:48:30.367

最好的方法是：

1.  为电影和连续剧创建一个通用表，其中包含两个实体应共享的字段（如 ItemId）。
2.  为电影创建一个表，该表引用在步骤 1 中创建的表，其中包含必须仅为电影编译的字段。这个新表将与前一个表一一对应。
3.  系列也是一样。
4.  创建 orders 表并将 ItemId 外键设置为指向在步骤 1 中创建的表的 ItemId 主键。

# c# - 使用 .Net 和 Javascript 以 PNG 作为掩码覆盖图像

> ID：13349507
> 
> 赞同：1
> 
> 时间：2012-11-12T18:40:58.517
> 
> 标签：c#, jquery, .net, asp.net-mvc, system.drawing

我有一个项目，用户可以上传 PNG 格式的帧图像。在他们上传相框后，他们可以上传一张将放置在相框后面的照片。照片可以调整大小和移动，以便他们可以将照片放入框架中。一旦他们对自己的工作感到满意，他们就可以保存他们的工作。

画布在客户端是固定大小的。这是一个 ASP.Net MVC4 应用程序，我们使用的是 JavaScript / JQuery。我只对 System.Drawing 库做了一点工作，但还不确定它们如何组合在一起。如果仅使用 .Net 和 JavaScript / JQuery 就可以轻松做到这一点，那就太好了，但我不反对在 JavaScript / JQuery 旁边使用第 3 方 .Net 库。

更新我正在分享用户将要执行的调整大小、移动和裁剪图像的步骤。

第 1 步：用户通过单击某些 UI 来加载框架，它会打开一个弹出窗口，其工作区域为 432 像素 x 348 像素。框架是具有透明中心和外边缘的 PNG。在该窗口上将是用户上传图像的区域。正如您在图 1 中看到的，图像以 100% 的速度加载并通过窗口。用户可以选择移动图像并裁剪或移动到第 2 步。

![步骤1](../Images/b21c84237e9d5452f48841d9c2d965ba.png)

第 2 步：用户将四处移动图像以找到句柄，以便他们可以调整图像大小。他们也可以选择在此时裁剪而不调整大小，或者转到第 3 步。

![第2步](../Images/97bc1e0022d61e0dd24735c28147f2fe.png)

第 3 步：用户将调整图像大小并将其移动到位。完成后，他们将裁剪上传的图像。

![第 3 步](../Images/990cfc3384906b333114ba90d5a9c4b8.png)

第四步：这是数据发送到服务器进行处理后的最终结果。

![在此处输入图像描述](../Images/2f68cadec1447b20896c84aef2240b9d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:11:34.010

它可以在纯 .NET 中完成。无需使用其他库。

为了向您的应用程序添加图像上传功能，请在此处查看答案：将[照片上传到 MVC 4 应用程序](https://stackoverflow.com/questions/11069107/upload-photo-to-mvc-4-applications)。

如果您让用户上传带有透明度支持的*png*格式框架的图像，您应该能够在另一个图像上绘制一个图像，就像这里的示例代码一样（那里使用了 gif）：[http://www.daniweb .com/web-development/aspnet/threads/112667/how-to-overlay-two-images-in-c](http://www.daniweb.com/web-development/aspnet/threads/112667/how-to-overlay-two-images-in-c)。

您还可以支持其他格式的帧（如*jpg*或*bmp*），但是，为了支持这种情况，您应该手动选择要在原始图像上绘制的像素。最简单的解决方案之一是将其中一种颜色设置为透明度键，因此当像素处于这种颜色时，它不会在生成的图像中绘制。您可以选择亮粉色或其他很少使用的颜色（甚至允许用户选择）。它仍然不是很复杂，购买它需要更多代码，一些额外的工作以使其快速，并且在质量差的帧图像的情况下检测相似像素的阈值。

如果您需要有关代码的帮助，请告诉我。

# javascript - 一页上有多个拉斐尔时钟，不超过小时/分钟

> ID：13349512
> 
> 赞同：0
> 
> 时间：2012-11-12T18:41:10.290
> 
> 标签：javascript, arrays, raphael, clock

通过一个非常清晰的拉斐尔图书馆世界时钟的教学示例，我在某处遗漏了一些东西：时钟显示`serverHours`并`serverMinutes`设置为静态值。下面的代码不显示。非常感谢第二（或更多）眼睛捕捉到我所缺少的东西。谢谢！

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
   <html xmlns="http://www.w3.org/1999/xhtml"><head>
       <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
       <title>Multiple Raphael Clocks on Same Page</title>
       <meta name="description" content="">
       <meta name="keywords" content="">
       <script type="text/javascript" src="js/raphael-min.js"></script>
       <script type="text/javascript"  
   function updateClock()
   {
     var currentTime = new Date();
     var currentHours = currentTime.getHours ( );
     var currentMinutes = currentTime.getMinutes ( );
   currentHours = ( currentHours < 10 ? "0" : "" ) + currentHours;
   currentMinutes = ( currentMinutes < 10 ? "0" : "" ) + currentMinutes;
   </script>

   <body onload="updateClock();">

            <div id="clock" style="padding:0px;"></div>

   <script type="text/javascript">
   cities = [['Houston',-6],['Charleston',-5],['London',0],['Malta',1],['Bucharest',2],['Brisbane',10],['San Diego',-9]];
   serverHours = currentHours;
   serverMinutes = currentMinutes;
   clock24 = false;
   </script>
   <script type="text/javascript">
   function Clock( paper, x, y, offH, offM, title, clock24 )
   {
       this.paper = paper;
       this.centerX = x;
       this.centerY = y;
       this.offsetHour = offH;
       this.offsetMinute = offM;
       this.title = title;
       this.radius = 14;
       this.circle;
       this.arrowHour;
       this.arrowMinute;
       this.clock24 = clock24;
       this.Clock = function()
       {
           this.circle = this.paper.circle(this.centerX, this.centerY, this.radius);
           this.circle.attr({"fill": "#fff", "stroke": "#fff"});
           this.arrowHour = this.paper.path(
               "M" + this.centerX + " " + (this.centerY - this.radius + 6) + " "
               + "L" + this.centerX + " " + this.centerY
               );
           this.arrowHour.attr({"stroke": "#fff", "stroke-width": "2"});
           this.arrowMinute = this.paper.path(
               "M" + this.centerX + " " + (this.centerY - this.radius + 2) + " "
               + "L" + this.centerX + " " + this.centerY
               );
           this.arrowMinute.attr({"stroke": "#fff", "stroke-width": "2"});
           var label = this.paper.text(this.centerX, (this.centerY + this.radius + 10), title);
           label.attr({"fill" : "#666", "font-size" : "9"});
       }
       this.showTime = function()
       {
           var date = new Date();
           var hours = date.getHours() + this.offsetHour;
           if (hours > 24) hours -= 24;
           if (hours < 0) hours += 24;
    var dHours = hours;
    var dPostfix = "";
           var color = (13 - Math.ceil(13.0/144.0 * Math.pow(Math.abs(hours-12), 2))).toString(16);
           var minutes = date.getMinutes() + this.offsetMinute;
           this.arrowMinute.rotate(minutes*6, this.centerX, this.centerY);

           if (hours > 12) hours -= 12;
    if (!this.clock24)
    {
        dPostfix = (dHours >= 12 ? " PM" : " AM");
        dHours = hours;
    }
           this.arrowHour.rotate((parseFloat(hours)+parseFloat(minutes)/60)*30, this.centerX, this.centerY);
    if (minutes < 10) minutes = "0" + minutes;
           this.circle.attr({"fill": "#"+color+color+color, "stroke": "#"+color+color+color, "title": "" + dHours+":"+minutes+dPostfix});
       }
       this.Clock();
   }
   var clock = new Array();
   function refreshTime()
   {
       if (clock)
       {
           for (var i = 0; i < clock.length; i++)
           {
               clock[i].showTime();
           }
       }
   }
   var paper = Raphael("clock", 330, 60);
   var date = new Date();
   var offsetHours = serverHours - date.getHours();
   var offsetMinutes = serverMinutes - date.getMinutes();
   var x = 20;
   var y = 21;
   for (i = 0; i < cities.length; i++)
   {
    clock.push(new Clock(paper, x, y, offsetHours + cities[i][1], offsetMinutes, cities[i][0], clock24));
    x += 55;
   }
   refreshTime();
   setInterval( "refreshTime()", 30000 );
   </script>
   </body></html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:27:05.133

你的 JavaScript 中有很多错误。在 Google Chrome 中打开您的页面，按 F12，切换到“控制台”选项卡，然后查看所有标有红色的错误。

此外，您在所有地方都使用#fff 填充/描边颜色，它是白色的，因此它在白色背景上变得不可见。

此外，您正在尝试全局使用变量“currentHours”等，该定义包含在函数中，因此它不是全局的，而是局部的。将其移至全局范围（在所有功能之上）。

# scala - 当只需要一个“案例”时，如何避免“匹配并不详尽”？

> ID：13349514
> 
> 赞同：0
> 
> 时间：2012-11-12T18:41:17.997
> 
> 标签：scala, pattern-matching

> **可能重复：**
> [如何抑制“匹配并不详尽！” Scala中的警告](https://stackoverflow.com/questions/13229930/how-to-suppress-match-is-not-exhaustive-warning-in-scala)

```
object Euler extends App {
val Max = 4000000

def p2: Int = p2(0 :: 1 :: Nil).filter(_ % 2 == 0).sum

def p2(list: List[Int]): List[Int] = {
    list match {
        case n1 :: n2 :: tail => if (Max < n1) n2 :: tail
                                 else p2(n1 + n2 :: list)
        // case _ => 0 :: 0 :: Nil // "match is not exhaustive"
    }
}   
println(p2)
} 
```

有人可以向我展示一个示例，说明如何在没有第二种情况的情况下使我的代码段可编译吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-12T18:47:13.310

您可以使用[`@unchecked`](http://www.scala-lang.org/api/current/scala/unchecked.html)：

```
(list: @unchecked) match { ... } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-12T18:47:22.447

如果只需要一个案例，那么看到其他案例将意味着错误。我要补充`case _`一点，这会引发错误。例如，如果您传递的列表长度少于 2 个元素，它将触发。

或者，您可以手动剪切列表的头部两次，尽管它不会那么简洁。

# php - 从 ExpressionEngine 中的 Comments 获取原始代码

> ID：13349519
> 
> 赞同：0
> 
> 时间：2012-11-12T18:41:30.563
> 
> 标签：php, jquery, sql, expressionengine

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:05:22.207

您最好通过 ajax 调用检索原始评论，而不是为页面上的每条评论添加查询。您将避免性能损失，并且无需担心在数据属性中存储大字符串。我可能会做这样的事情：

*   创建一个包含`{exp:query}`标签的新“get_comment”模板`WHERE comment_id = '{segment_X}'`

*   当用户点击回复/引用按钮时，使用[jQuery.get()](http://api.jquery.com/jQuery.get/)向您的 get_comment 模板发送请求，并根据`data-commentid`回复按钮上的属性传入 comment_id。

*   使用 .get() 响应更新您的输入值。

# java - Android 测试：对话框。检查它是显示（）

> ID：13349530
> 
> 赞同：7
> 
> 时间：2012-11-12T18:42:21.757
> 
> 标签：java, android, unit-testing, reflection, dialog

这是我的方法，它工作正常并显示对话框。

```
public void showDialog(){
    final Dialog dialog = new Dialog(this);
    dialog.setContentView(R.layout.mylayout);
    dialog.show();
} 
```

我有一个测试项目，我想测试对话框是否出现。我想应用 .isShowing() 方法。像这样的东西...

```
assertTrue(dialog.isShowing()); 
```

但我不知道如何在我的测试中访问对话框变量。

我没有使用 Robotium（这不是我的选择）。我目前正在使用 ActivityUnitTestCase 进行测试。如果需要更多信息，请随时询问。

**编辑**

我试图通过公开对话框来使用下面的答案

```
public Dialog getDiag(){
    return dialog;
} 
```

使用这个答案：我在测试中运行 showDialog() 时遇到了一个新问题，它在命中时会中断： dialog.show();

android.view.WindowManager$BadTokenException: * 无法添加窗口 -- token null

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T19:27:19.650

在 showDialog 函数之外声明 Dialog，然后实现一个返回此 Dialog 实例的方法。

```
public Dialog getDiag(){
    return dialog;
} 
```

然后做这样的事情

```
assertTrue(new YourClassName().getDialog().isShowing()); 
```

# javascript - 菜单淡入仅某个类的 div 并隐藏其他 div

> ID：13349536
> 
> 赞同：0
> 
> 时间：2012-11-12T18:42:43.550
> 
> 标签：javascript, jquery, html, css, ajax

我正在尝试制作一个菜单，如果您单击一个项目，它会显示特定类的 div 并隐藏所有其他项目。

这就是我所做的：

```
 <ul class="pdf_documents clearfix">
        <li class="tab-periodicos active"><a href="javascript:void(0)">Informes periódicos</a></li>
        <li class="tab-folletos"><a href="javascript:void(0)">Folleto/DFI</a></li>
        <li class="tab-fichas"><a href="javascript:void(0)">Fichas</a></li>
        <li class="tab-accionistas"><a href="javascript:void(0)">Junta de accionistas</a></li>
        <li class="tab-otros"><a href="javascript:void(0)">Otros</a></li>
    </ul>

    <div class="pdf_box clearfix">
        <div class="pdf_file periodicos">
            <img src="images/pdf.png" alt="pdf" width="70" height="70">
            <p>Último informe anual</p>
        </div>
        <div class="pdf_file periodicos">
            <img src="images/pdf.png" alt="pdf" width="70" height="70">
            <p>Último informe semestral</p>
        </div>
        <div class="pdf_file periodicos">
            <img src="images/pdf.png" alt="pdf" width="70" height="70">
            <p>Último informe trimestral</p>
        </div>
        <div class="pdf_file periodicos">
            <img src="images/pdf.png" alt="pdf" width="70" height="70">
            <p>Penúltimo informe trimestral</p>
        </div>
        <div class="pdf_file folletos">
            <img src="images/pdf.png" alt="pdf" width="70" height="70">
            <p>Folleto simplificado</p>
        </div>
        <div class="pdf_file folletos">
            <img src="images/pdf.png" alt="pdf" width="70" height="70">
            <p>Folleto completo</p>
        </div>
        <div class="pdf_file fichas">
            <img src="images/pdf.png" alt="pdf" width="70" height="70">
            <p>Ficha mensual</p>
        </div>
        <div class="pdf_file fichas">
            <img src="images/pdf.png" alt="pdf" width="70" height="70">
            <p>Ficha comercial</p>
        </div>
        <div class="pdf_file accionistas">
            <img src="images/pdf.png" alt="pdf" width="70" height="70">
            <p>Convocatoria</p>
        </div>
        <div class="pdf_file accionistas">
            <img src="images/pdf.png" alt="pdf" width="70" height="70">
            <p>Propuestas</p>
        </div>
        <div class="pdf_file accionistas">
            <img src="images/pdf.png" alt="pdf" width="70" height="70">
            <p>Informe técnico</p>
        </div>
        <div class="pdf_file otros">
            <img src="images/pdf.png" alt="pdf" width="70" height="70">
            <p>Otros</p>
        </div>
    </div> 
```

CSS：

```
.pdf_box .folletos{ 
    display:none; 
} 
```

这是我写的脚本：

```
 $('.tab-periodicos').click(function(e){
        $('.pdf_documents li').removeClass('active');
        $(this).addClass('active');    
        $('.pdf_box .folletos').hide();
        $('.pdf_box .periodicos').fadeIn();
    });
    $('.tab-folletos').click(function(e){
        $('.pdf_documents li').removeClass('active');
        $(this).addClass('active');
        $('.pdf_box .periodicos').hide();
        $('.pdf_box .folletos').fadeIn();
    }); 
```

脚本的问题在于，我认为它应该是一种简单的方法，只需指出淡入一个 div 类并隐藏其他项目，而不是编写每个 div 类来隐藏，这会使脚本变得非常大。

关于如何简化它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:52:51.067

根据您的 li 类获取您的 div

```
$('.pdf_documents li').click(function(){
    $('li.active').removeClass('active'); // remove active class
    var c = $(this).attr('class').split('-')[1]; // used to get correct divs
    var $ele = $('.pdf_box div.'+c); // the divs you want
    $('.pdf_box div').not($ele).hide(); // hide all other divs
    $ele.show(); // show your divs
    $(this).addClass('active'); // add active to current li
});​ 
```

[http://jsfiddle.net/TWAK2/](http://jsfiddle.net/TWAK2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:49:47.703

您可以将所有事件处理程序合并到一个事件中，因为它们似乎具有相同的功能。

```
$('.tab-folletos , .tab-periodicos').click(function(e){

        var $this = $(this) ;
         // Remove active class for all li
        $('.pdf_documents li').removeClass('active');
        // Get the corresponding div class from li class
        var classID = $this.attr('class').split('-')[1] ;
        // Hide all children div inside pdf._box
        $('.pdf_box > div').hide();
        // Fade in the corresponding div 
        $('.pdf_box .' + classID).fadeIn();
        // Ass active class
        $this.addClass('active');
}); 
```

# ruby-on-rails-3 - 宝石与模型

> ID：13349537
> 
> 赞同：3
> 
> 时间：2012-11-12T18:42:47.433
> 
> 标签：ruby-on-rails-3, gem, paperclip

我创建了一个带有模型的 Gem（实际上是从主项目中提取的），以便在我们平台上的项目中共享。

我们有几十个模型，所以我没有一个一个地要求它们，而是编写了以下代码：

```
Gem.find_files("my_gem/models/*.rb").each { |path| require path } 
```

我访问在 gem 文件中有 my_gem 的项目之一并运行`rails c`我得到以下输出：

```
/Users/myuser/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.8/lib/active_record/dynamic_matchers.rb:50:in `method_missing': undefined method `has_attached_file' for #<Class:0x007fad4b93ccb8> (NoMethodError) 
```

我的一个模型是使用宝石回形针，奇怪的是：

1.  如果我删除上面声明的行以自动加载所有模型，`rails c` 运行良好
2.  如果我尝试仅包含使用回形针的模型，`require "my_gem/models/paperclip_model"`我会收到相同的错误

所以然后我将我的 gem 更改为不加载任何模型，当我尝试从 rails 控制台引用任何模型时，它说类未加载，但随后我运行`Gem.find_files("my_gem/models/*.rb").each { |path| require path }`或`require "my_gem/models/paperclip_model"`'它们完美地工作并且我能够使用模型.

你们中有人见过同样的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T11:15:03.147

似乎改变`require`为`autoload`解决了问题

我变了`Gem.find_files("my_gem/models/*.rb").each { |path| require path }`

为了

```
Gem.find_files("my_gem/models/*.rb").each do |f| 
  filename = File.basename(f, '.*')
  class_name_symbol = filename.classify.to_sym
  autoload class_name_symbol, "my_gem/models/#{filename}"
end 
```

现在它正在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:55:04.393

听起来您的 gem 中的模型之一依赖于 Paperclip，但您没有明确将其设置为依赖项。所以发生的情况是，如果您的模型在回形针加载之前*加载*，您将看到.`UndefinedMethod``has_attached_file`

如果您在具有回形针作为依赖项的 Rails 应用程序中使用模型，并且在控制台（或服务器）启动*后*加载这些模型，回形针将出现，因此您不会看到此错误。

解决方案是在 gemspec 中显式添加回形针作为依赖项，例如：

```
s.add_dependency('paperclip') 
```

假设这个 gem 将始终在 Rails 应用程序的上下文中使用，这应该可以工作。如果没有，您*可能*还需要将以下行添加到使用回形针的模型的顶部：

```
require "paperclip" 
```

# python - 如果链接点击了 beautifulsoup (python) 事件

> ID：13349538
> 
> 赞同：0
> 
> 时间：2012-11-12T18:42:48.277
> 
> 标签：python, beautifulsoup

如果有人单击链接，是否可以做某事？我需要知道何时有人单击该链接，因为如果是这样，我想执行一些代码。

```
a = soup.find('a') #there is only one link in the page 
```

所以在伪代码中我需要这样的东西：

```
if a.clicked() == "true":
    print "link clicked" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:45:20.720

不，单击是 Web 浏览器中的事件，而不是页面的 HTML 结构中发生的事件。

当您使用 BeautifulSoup 时，您加载的 HTML 与浏览器加载的相同，但没有任何东西将该 HTML 结构与加载到某个随机用户浏览器中的内容联系起来，后者负责处理链接点击。

# mysql - MySql 查询运行，但它在 sp 中不起作用

> ID：13349545
> 
> 赞同：0
> 
> 时间：2012-11-12T18:43:22.197
> 
> 标签：mysql, sql, stored-procedures

这是我的 sp 查询：

```
 -- --------------------------------------------------------------------------------
-- Routine DDL
-- Note: comments before and after the routine body will not be stored by the server
-- --------------------------------------------------------------------------------
DELIMITER $$

CREATE DEFINER=`root`@`%` PROCEDURE `USP_GetUserOrders`(UserId INT)
BEGIN
SELECT op.OrderId,
    O.Number,    
    SUM(op.Price) Price,
    (SELECT CONCAT(A.Detail, ' ',C.Name, ' / ', Ci.Name) FROM kobiakinlar.Address AS A
                INNER JOIN County AS C ON C.CountyId = A.CountyId
                INNER JOIN City AS Ci ON C.CityId = Ci.CityId
                WHERE UserId = O.UserId) AS UserAddress,
   ( SELECT CASE WHEN O.Status =0 THEN 'Onay Bekliyor'  WHEN O.Status =1 THEN 'Onaylandı' WHEN O.Status = 2 THEN 'Reddedildi' END) Status,
    O.Creation,
    ( SELECT CASE WHEN O.IsDelivered =0 THEN 'Teslim Edilmedi' ELSE 'Teslim Edildi' END) IsDelivered,
    group_concat(P.Name) Product
FROM
    kobiakinlar.product P
        JOIN
    kobiakinlar.orderproduct op ON op.ProductId = P.productId
        JOIN
    kobiakinlar.order O ON O.orderId = op.OrderId
   JOIN 
kobiakinlar.address A ON A.addressId = O.AddressId
WHERE O.UserId = UserId
GROUP BY op.OrderId;
END 
```

`Error Code: 1242\. Subquery returns more than 1 row`当我返回时`CALL USP_GetUserOrders(3)`

但我只在查询选项卡中运行 sql，它运行并返回我想要的。您可以在图像中看到查询的结果：

![在此处输入图像描述](../Images/a0b6bd7b596d885a466db4d15aab81ad.png)

你有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T18:59:41.713

我很确定原因是 UserId 和 o.UserId 之间的混淆。

在查询上下文中，它不知道您指的是 sp 的参数。将争论的名称更改为“arg_UserId”之类的名称，并在适当的查询中替换它。

您还可以简化查询语法。case 语句的`SELECT`外部是多余的。此外，假设 County 和 City 的连接总是 1-1，您可以将查询重写为：

```
SELECT op.OrderId, O.Number,  SUM(op.Price) Price,
       CONCAT(A.Detail, ' ', C.Name, ' / ', Ci.Name) AS UserAddress,
       (CASE WHEN O.Status =0 THEN 'Onay Bekliyor'  WHEN O.Status =1 THEN 'Onaylandı' WHEN O.Status = 2 THEN 'Reddedildi' END) Status,
       O.Creation,
       (CASE WHEN O.IsDelivered =0 THEN 'Teslim Edilmedi' ELSE 'Teslim Edildi' END) IsDelivered,
       group_concat(P.Name) as Product
FROM kobiakinlar.product P JOIN
     kobiakinlar.orderproduct op
     ON op.ProductId = P.productId JOIN
     kobiakinlar.order O
     ON O.orderId = op.OrderId JOIN 
     kobiakinlar.address A ON A.addressId = O.AddressId join
     County C
     ON C.CountyId = A.CountyId join
     City AS Ci
     ON C.CityId = Ci.CityId
WHERE O.UserId = arg_UserId
GROUP BY op.OrderId; 
```

# c# - 通过 linq 比较无值

> ID：13349551
> 
> 赞同：1
> 
> 时间：2012-11-12T18:43:58.480
> 
> 标签：c#, linq

我在 sql server 2008 数据库/表中有一个整数列（非空），我想检索它。

```
 // go to the table and get the largest number, if none exists, use 0.
        int iNumber = iContext.DetailsRecords.Max(x => x.Number); // from entity 
```

但一开始，桌子是空的。我想设置为0。如何更改代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T18:53:05.503

如果您不想检查 DetailsRecords 是否为空，而是想处理源序列是否为空，请使用此答案（我根据您的 LINQ 使用情况对其进行了一些不同的调整）：

[最大还是默认？](https://stackoverflow.com/questions/341264/linq-max-or-default)

* * *

`int iNumber = iContext.DetailsRecords.Select(x => (int?)x.Number).Max() ?? 0;`

*   [`Enumerable.Max Method (IEnumerable<Int32>)`](http://msdn.microsoft.com/en-us/library/bb292667.aspx): InvalidOperationException - 源不包含任何元素。
*   [`Enumerable.Max Method (IEnumerable<Nullable<Int32>>)`](http://msdn.microsoft.com/en-us/library/bb302925.aspx)：如果源序列为空或仅包含 null 值，则此函数返回 null。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T18:45:52.773

试试这个：
`int iNumber = iContext.DetailsRecords==null? iContext.DetailsRecords.Max(x => x.Number) : 0;`
或者
`int iNumber = iContext.DetailsRecords.Any()? iContext.DetailsRecords.Max(x => x.Number) : 0;`如果表不为空并且包含 0 条记录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T18:46:54.003

你可以用`DefaultIfEmpty`这个。如果序列为空，它将返回提供的项目作为序列中的唯一项目，否则将返回原始序列。

```
IEnumerable<int> numbers = new int [] { };

numbers.DefaultIfEmpty(0).Max(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T18:48:00.670

使用`Any`函数查看是否有记录：

```
int iNumber = iContext.DetailsRecords.Any() 
              ? iContext.DetailsRecords.Max(x => x.Number) 
              : 0; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T19:10:25.333

我知道这已经有一个公认的答案，但另一个好方法就是 FirstOrDefault()。

```
int iNumber = iContext.DetailsRecords.OrderByDescending(x => x.Number).FirstOrDefault(); 
```

我经常使用这种方式，如果结果为空，也可以让你设置一个新对象。

```
 MyObject m = mySearch.GetItems.Where(a => a.id == id).FirstOrDefault() ?? new MyObject(); 
```

# matlab - 从矩阵中删除特定元素

> ID：13349553
> 
> 赞同：3
> 
> 时间：2012-11-12T18:44:02.640
> 
> 标签：matlab

我想从我的矩阵中删除一个 ( ***** ) 星号并将该矩阵写出到一个文本文件中，并且剩余的元素将在没有空格或任何类型的分隔符的情况下相互连接。我写了这段代码

```
for b = 1 : length(out7num_r7_nt_back)
    if ~(out7num_r7_nt_back(b) == '*')
        out7num_r7_back(b) = '';
    end
end
disp(out7num_r7_nt_back);
dlmwrite('my_data.txt',out7num_r7_nt_back, ''); 
```

我收到此错误消息：

> > ？？？要删除的元素索引超出矩阵维度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:19:01.337

您可以使用矢量化布尔索引，将循环替换如下：

```
out7num_r7_nt_back = out7num_r7_nt_back(out7num_r7_nt_back(b) ~= '*'); 
```

那也应该快得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:02:08.130

`for`loop( )的上界`length(out7num_r7_nt_back)`值只计算***一次***！

假设你有`'*ab'`一个变量。循环将计数到 3（变量的长度）。当程序擦除时，在循环内部`'*'`，您将得到`'ab'`长度为 2 的内容。由于循环正在迭代到 3，程序将尝试访问*超出范围的*`out7num_r7_nt_back(3)`内容。

 *您可以在向后移动时删除字符：

```
...
for b = length(out7num_r7_nt_back) : -1 : 1
... 
```

但是你应该更喜欢向量化的方法，因为它写起来更快更干净。*

# servicestack - 服务栈验证

> ID：13349557
> 
> 赞同：1
> 
> 时间：2012-11-12T18:44:12.780
> 
> 标签：servicestack

我有一个模型

```
[Validator(typeof(ContractValidator))]
[Route("/contracts", "POST")]
public class Contract
{
    public int ContractID{get; set;}
    public string ContractNumber{get;set;}
} 
```

我还有一个用于上述模型的验证类。

```
public class ContractValidator : AbstractValidator<Contract>
{
    public ContractValidator()
    {
        RuleFor(x => x.ContractNumber).Length(0, 10);
    }
} 
```

我还有一个类来映射“GET”请求：

```
[Route("/contracts/{ContractID}", "GET")]
public class GetContract
{
   public int ContractID { get; set; }
} 
```

...和一项服务：

```
public class ContractService : ServiceStack.ServiceInterface.Service
{
    public object Get(GetContract request)
    {
        IContractRepository repository = new ContractRepository();
        return repository.GetById(request.ContractID);
    }

public object Post(Contract request)
    {
        IContractRepository repository = new ContractRepository();
        repository.Save(request);
        return request; 
    } 
```

}

现在在我的 Razor 视图中编辑我拥有的合同对象

@inherits ViewPage 。. .

但问题是当我尝试保存时出现以下错误并且存在模型验证错误：

无法将“ServiceStack.ServiceInterface.ServiceModel.ErrorResponse”类型的对象转换为“DTO.Contract”类型

有人可以让我知道如何处理吗？

谢谢，

厄米亚斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:28:29.710

我刚刚[对此进行了修复，](https://github.com/ServiceStack/ServiceStack/commit/b8ed594dd89e392179094dd95b405701795d70d3)因此您现在不应再在 HEAD 中使用下一版本的 ServiceStack（或在本周末在 NuGet 上）出现此错误。

新行为是任何异常都将填充`ModelError`Razor 视图上的属性。`@Model`将为空，但您可以通过查看视图页面上的属性来访问键入的错误`base.ResponseStatus`。

# javascript - jvectormap标记颜色问题

> ID：13349561
> 
> 赞同：2
> 
> 时间：2012-11-12T18:44:36.960
> 
> 标签：javascript, jquery, jvectormap

我正在尝试使用 jvectormap 创建带有标记的美国地图。我希望这些标记是红色或蓝色，并且我想手动指定哪种颜色对应哪个标记（不使用任何类型的比例或过于复杂的数据可视化功能）。有没有办法做到这一点？新的 jvectormap 的 API 对我来说太抽象了，无法轻松实现。

我试过使用旧的 jvectormap，但它似乎有问题，并且没有在正确的位置显示标记。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T21:00:29.997

[这](http://jsfiddle.net/solarsaturn9/g7SKk/23/ "jsFiddle")是基于标记列表中称为*type*的第三个元素的两种不同类型标记的示例。我基本上创建了另一个名为颜色的数组，用于数据系列表示中的值。创建地图之前的循环遍历标记列表并提取*类型并根据**类型*决定颜色值应该是什么。

```
for (var i = 0; i < markers.length; i++) {
    if (markers[i].type == 'call-center') {
        colors[i] = 0;
    }
    else {
        colors[i] = 1;
    };
}; 
```

*如果您添加额外的if*语句，则可以为不同的类型实现类似的设置。

# django - 使用 redis 的非 orm 的 django sweetpie 不返回任何对象

> ID：13349570
> 
> 赞同：3
> 
> 时间：2012-11-12T18:45:04.437
> 
> 标签：django, redis, tastypie

我正在尝试使用 redis 将美味派与非 orm 一起使用。

我实现了一个自定义资源，如[http://django-tastypie.readthedocs.org/en/v0.9.11/non_orm_data_sources.html上的建议](http://django-tastypie.readthedocs.org/en/v0.9.11/non_orm_data_sources.html)

这是代码的一部分：

```
class OrderResource(Resource):
    order_id = fields.CharField(attribute='order_id')
    store_url = fields.CharField(attribute='store_url')
    products = fields.ListField(attribute='products')

    class Meta:
        queryset = Order
        resource_name = 'order'
        allowed_methods = ['get', 'post', 'put', 'delete', 'patch']
        authorization = Authorization()

    def _client(self):
        return redis.Redis('localhost')

    def detail_uri_kwargs(self, bundle_or_obj):
        kwargs = {}
        if isinstance(bundle_or_obj, Bundle):
            kwargs['pk'] = bundle_or_obj.obj.order_id
        else:
            kwargs['pk'] = bundle_or_obj.order_id

        return kwargs

    def get_object_list(self, request):
        query = self._client()
        results = list()

        for store_url in query.smembers('store_url'):
            orders_id = query.hgetall('store_url:%s' % store_url)
            for order in orders_id.keys():
                order = Order(store_url=store_url, order_id=order)
                results.append(order)

        return results

    def obj_get_list(self, request=None, **kwargs):
        # Filtering disabled for brevity...
        return self.get_object_list(request) 
```

但是当我尝试检索所有订单时，json`objects`是空的，即使是`total_count`正确的。我检查了一下，Bundle 是正确的：

```
<Bundle for obj: '<orders.models.Order object at 0x10c6f1e90>' and with data: '{'order_id': u'1', 'store_url': u'test.com', 'products': [u'a', u'b', u'c'], 'resource_uri': None}'> 
```

我究竟做错了什么？

OBS：我不能使用 django-nonrel

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-10T12:05:34.937

你`Order`的代码中有什么？有了`Resource`你就不需要了`Meta.queryset`。尝试删除它。

另外，确保`Order`是可序列化的。很可能 Tastypie 无法对其进行序列化。首先尝试使用简单的字典对象而不是 Order。阅读更多关于[序列化](http://django-tastypie.readthedocs.org/en/latest/serialization.html)和[脱水](https://django-tastypie.readthedocs.org/en/latest/resources.html?highlight=hydrate#the-dehydrate-cycle)的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-10T16:33:03.510

加入`object_class`解决`Meta`问题

# python - 如何将 django QueryDict 更改为 Python Dict？

> ID：13349573
> 
> 赞同：127
> 
> 时间：2012-11-12T18:45:07.893
> 
> 标签：python, django

假设我有以下 QueryDict：

```
<QueryDict: {u'num': [0], u'var1': [u'value1', u'value2'], u'var2': [u'8']}> 
```

我想要一本字典，例如：

```
{'num': [0], 'var1':['value1', 'value2'], 'var2':['8']} 
```

（我不在乎 unicode 符号`u`是留下还是消失。）

如果我按照[django 站点](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.QueryDict.dict)`queryDict.dict()`的建议这样做，我会丢失属于的额外值，例如：`var1`

```
{'num': [0], 'var1':['value2'], 'var2':['8']} 
```

我正在考虑这样做：

```
myDict = {}
for key in queryDict.iterkeys():
    myDict[key] = queryDict.getlist(key) 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：232
> 
> 时间：2013-03-07T23:01:03.867

Django >= 1.4 中的新功能。

`QueryDict.dict()`

[https://docs.djangoproject.com/en/stable/ref/request-response/#django.http.QueryDict.dict](https://docs.djangoproject.com/en/stable/ref/request-response/#django.http.QueryDict.dict)

* * *

## 回答 #2

> 赞同：111
> 
> 时间：2012-11-12T18:57:47.840

这应该有效：`myDict = dict(queryDict.iterlists())`

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-02-28T16:18:03.450

这就是我最终使用的：

```
def qdict_to_dict(qdict):
    """Convert a Django QueryDict to a Python dict.

    Single-value fields are put in directly, and for multi-value fields, a list
    of all values is stored at the field's key.

    """
    return {k: v[0] if len(v) == 1 else v for k, v in qdict.lists()} 
```

根据我的用法，这似乎为您提供了一个列表，您可以将其发送回例如表单构造函数。

**编辑：**也许这不是最好的方法。看来，如果您想`QueryDict`出于任何疯狂的原因写入文件，`QueryDict.urlencode()`就是要走的路。重构`QueryDict`你只需要做`QueryDict(urlencoded_data)`。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-06-29T11:12:23.497

```
from django.utils import six 
post_dict = dict(six.iterlists(request.POST)) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-11-28T16:58:34.380

如果您不希望将值作为数组，您可以执行以下操作：

```
# request = <QueryDict: {u'key': [u'123ABC']}>
dict(zip(request.GET.keys(), request.GET.values()))
{u'key': u"123ABC" }

# Only work for single item lists
# request = <QueryDict: {u'key': [u'123ABC',U 'CDEF']}>
dict(zip(request.GET.keys(), request.GET.values()))
{u'key': u"CDEF" } 
```

zip 是一个强大的工具在这里阅读更多关于它[http://docs.python.org/2/library/functions.html#zip](http://docs.python.org/2/library/functions.html#zip)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-11-30T19:17:52.497

只需简单地添加

`queryDict=dict(request.GET)` 或者`queryDict=dict(QueryDict)`

在您的视图中，数据将作为 python Dict 保存在 querDict 中。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-01-22T13:04:46.780

我遇到了类似的问题，想将表单中的任意值保存为序列化值。

我的回答避免显式迭代字典内容：`dict(querydict.iterlists())`

为了检索一个类似于字典的值作为原始值，逆函数用于`QueryDict.setlist()`填充一个新`QueryDict`值。在这种情况下，我不认为显式迭代是可以避免的。

我的辅助函数如下所示：

```
from django.http import QueryDict

def querydict_dict(querydict):
    """
    Converts a Django QueryDict value to a regular dictionary, preserving multiple items.
    """
    return dict(querydict.iterlists())

def dict_querydict(dict_):
    """
    Converts a value created by querydict_dict back into a Django QueryDict value.
    """
    q = QueryDict("", mutable=True)
    for k, v in dict_.iteritems():
        q.setlist(k, v)
    q._mutable = False
    return q 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-02-01T08:06:58.140

**更新：**

```
myDict = dict(queryDict._iterlists()) 
```

请注意：`_`iterlists 方法中的下划线`queryDict`。Django 版本：1.5.1

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-01-03T15:24:56.097

`dict(request.POST)`返回一个带有数组包装值的怪异 python 字典。

```
{'start': ['2017-01-14T21:00'], 'stop': ['2017-01-14T22:00'], 'email': ['sandeep@sakethtech.com']} 
```

其中 as`{x:request.POST.get(x) for x in request.POST.keys()}`返回预期输出。

```
{'start': '2017-01-14T21:00', 'stop': '2017-01-14T22:00', 'email': 'sandeep@sakethtech.com'} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-08-05T08:58:07.540

几乎`Django 2.2`没有干净的解决方案：

1.  `QueryDict.dict()`最简单，但它会破坏`QueryDict`列表作为值，例如：

```
from django.http.request import QueryDict, MultiValueDict

query_dict = QueryDict('', mutable=True)
query_dict.update(MultiValueDict({'a': ['one', 'two']}))
query_dict.update({'b': 'three'})

for key, value in query_dict.dict().items():  # ---> query_dict.dict()
    print(key, value) 
```

将输出

```
a two  # <--- missed 'one'
b three 
```

2.  `dict(QueryDict)`更好，因为它将制作正确的列表字典：

```
from django.http.request import QueryDict, MultiValueDict

query_dict = QueryDict('', mutable=True)
query_dict.update(MultiValueDict({'a': ['one', 'two']}))
query_dict.update({'b': 'three'})

for key, value in dict(query_dict).items():  # ---> dict(query_dict)
    print(key, value) 
```

将输出

```
a ['one', 'two']
b ['three'] 
```

哪个是对的。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-12-19T04:42:05.993

这就是我解决这个问题的方法：

```
dict_ = {k: q.getlist(k) if len(q.getlist(k))>1 else v for k, v in q.items()} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-02-01T19:19:47.143

和我一样，你可能更熟悉`Dict()`python 中的方法。但是，`QueryDict()`它也是一个易于使用的对象。例如，也许您想从`request.GET QueryDict()`.

你可以这样做`request.GET.__getitem__(<key>)`：

`QueryDict()`文档：[https ://docs.djangoproject.com/en/2.0/ref/request-response/#django.http.QueryDict](https://docs.djangoproject.com/en/2.0/ref/request-response/#django.http.QueryDict)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-07-22T19:46:44.327

我尝试了这两种方法`dict(request.POST)`，`request.POST.dict()`并意识到如果你有嵌套在你的`list`值中，later( ) 只允许我访问嵌套列表中的最后一项，而前者( ) 允许我访问嵌套列表中的所有项目。`'var1':['value1', 'value2']``request.POST``request.POST.dict()``dict(request.POST)`

我希望这可以帮助别人。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-03-19T12:54:25.387

你可以使用一个简单的技巧

```
queryDict._mutable = False
# Change queryDict
your_dict = {'num': [0], 'var1':['value1', 'value2'], 'var2':['8']}
queryDict.upate(your_dict)
# reset the state
queryDict._mutable = True 
```

我认为这会更好地帮助你： [这个 QueryDict 实例是不可变的](https://stackoverflow.com/questions/44717442/this-querydict-instance-is-immutable/#51196932)

# javascript - 防止javascript setInterval函数堆积

> ID：13349576
> 
> 赞同：3
> 
> 时间：2012-11-12T18:45:19.103
> 
> 标签：javascript, setinterval

我有一个在单击事件上运行的函数，该函数对我的一些动画（我正在玩游戏）使用 javascript 的 setIterval，所以问题是如果用户在动画仍在显示时单击（setInterval 仍在执行）setInterval堆积在事件堆栈中，或者这就是我发现的结果，因此要么破坏我的游戏，要么以两倍的速度运行（动画）。我的问题是有什么方法可以防止事件堆叠？我不希望 setInterval 叠加在前面的 setInterval 上，依此类推。我知道我可以像这样使用 clearInterval 函数：

```
 var timerInterval = setInterval(drawPlayerRunning, 50);
  clearInterval(timerInterval); 
```

但它并没有真正像我想要的那样工作，因为如果用户在函数仍在执行时多次单击怎么办，clearInterval 只会摆脱事件堆栈的最后一个事件，而所有以前的事件仍然在“游戏”。知道如何防止此事件堆积，或者至少有效地删除它们吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T18:47:08.843

您可以创建一个监视间隔状态的标志：1）

```
var isIntervalInProgress = false;
setInterval(function()
{
  if ( isIntervalInProgress )
    return false;

  isIntervalInProgress = true;

  drawPlayerRunning();

  isIntervalInProgress = false;

}, 50); 
```

或者只是一个超时，一旦完成就会自行运行：2）

```
var func = function()
{
  setTimeout(function()
  {
    drawPlayerRunning();
    func();
  }, 50)
} 
```

随你喜欢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:50:19.263

您想使用[requestAnimationFrame](https://developer.mozilla.org/en-US/docs/DOM/window.requestAnimationFrame)。它在设计时考虑到了游戏，如果您的代码恰好太慢，它会相应地降低您的帧速率（例如从 60 fps 到 30 fps）。但它不会叠加事件。

编辑：对不起，我想我误解了你的问题。让我再试一次。

您应该只有一个`draw`每隔几毫秒调用一次的函数（使用 设置间隔`requestAnimationFrame(draw)`）。

单击不应添加新的间隔，而是创建一个`floatingAnimation`对象并将其添加到要渲染的对象列表中。`draw`每次浏览器调用时，该函数都会渲染所有动画对象`draw`。在传递给 的参数中`draw`，会有一个时间戳。使用此时间戳减去创建日期`floatingAnimation`来确定如何在角色上方绘制浮动物体。

# typescript - 如何在现有 JavaScript 系统中慢慢迁移到/迁移到 TypeScript

> ID：13349579
> 
> 赞同：32
> 
> 时间：2012-11-12T18:45:24.853
> 
> 标签：typescript

我们已经有一个现有的 JavaScript 系统。

**我们想做的事情：** 我们想开始将 TypeScript 集成到当前系统中；我们不能只是将所有内容都迁移到 TypeScript。我们想慢慢开始用 TypeScript 编写一些新模块。

**我们尝试了什么：** 我们使用一种类似于 MODULE TypeScript 构造的模式来组织我们的 JS 代码。

我们尝试用 TypeScript 重写一个简单的类/对象并且成功了，但是我们在访问我们的代码中定义的 JS 函数时遇到了麻烦，在其他文件中。

**遇到的问题：** 我们必须创建虚拟接口，以及使用这些接口的虚拟函数等。

**所以问题是**：任何人都可以评论一下，将 TypeScript 慢慢集成到现有 JavaScript 系统中的最佳方法是什么。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-12T19:47:41.753

听起来你有一个明智的计划。以下是我的观察！

最好确保您的 TypeScript 依赖于您的 JavaScript，而不是*在可能*的情况下相反。这是因为使用 Visual Studio 工具重构 TypeScript 非常容易，但它不会重构调用 TypeScript 的 JavaScript。

您必须为需要从 TypeScript 调用的 JavaScript 部分编写定义文件。您需要平衡编写定义的成本与将 JavaScript 转换为 TypeScript 的成本。

如果您只调用一个函数，只需编写该函数的定义 - 在需要之前不要编写定义。这将降低调用旧代码的成本。

您也可以暂时使用该`any`类型来避免在 JavaScript 代码上调用任何内容。当您将文件转换为 TypeScript 时，您将获得更好的类型检查。这是一个“取决于”的决策点。与其花很多时间编写定义，不如以类型检查为代价来节省时间。

例如...

```
declare var MyExistingClass: any; 
```

你现在可以打电话...

```
var example = new MyExistingClass.Anything();
example.anythingYouLike(); 
```

您必须作为一个团队决定这是否可以接受，或者您是否要编写定义：

```
declare class MyExistingClass {
    anythingYouLike(): void;
} 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-15T08:53:02.873

这是我们最近将大约 100,000 行 JavaScript 的 HTML5 游戏引擎迁移到 TypeScript 时遇到的问题。我们必须分阶段进行，首先将文件从 .js 重命名为 .ts 并从那里逐步进行。有兴趣的人可以在这里查看完整的描述：

[http://hardcoded.blogspot.jp/2013/02/mostly-painless-migrating-3d-game.html](http://hardcodeded.blogspot.jp/2013/02/mostly-painlessly-migrating-3d-game.html)

# mercurial - 不同路径的不同 SSH 密钥

> ID：13349580
> 
> 赞同：1
> 
> 时间：2012-11-12T18:45:26.443
> 
> 标签：mercurial, ssh, key, host, ssh-keys

我正在尝试找到一种方法来使用不同的 ssh 密钥从 bitbucket 克隆不同的项目。我尝试使用 ssh_config 但我设法为**单个特定主机****的**连接定义了一个不同的 ssh 密钥。

 **我想要实现的是拥有

**bitbucket.org/myteam1/myproject**的密钥 A****

 **和

**bitbucket.org/myteam2/myotherproject 的**密钥 B****

 **可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T00:30:07.900

最后我发现对我来说最好的解决方案是使用该`-e sshcommand`选项并在其中`-i key`指定我想要的私钥的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T01:20:18.780

使用 ssh-agent 的最简单的方法。当您运行 ssh-agent 时，您会添加所有密钥，它会尝试每个密钥，直到其中一个有效。您的操作系统很可能已经在运行 ssh-agent，因此请尝试

```
ssh-add /path/to/key1
ssh-add /path/to/key2 
```

那么当您尝试连接时，如果任一键都可以使用。如果您没有运行 ssh-agent，则可以使用（在 unix/OS X 上）启动它：

```
eval $(ssh-agent) 
```

然后添加两个密钥文件。

如果由于某种原因您无法忍受使用 ssh-agent，那么我找到了一个使用稍微棘手的`.ssh/config`文件的解决方法。像这样的东西：

```
Host myteam1.bitbucket.org
    Hostname bitbucket.org
    HostKeyAlias bitbucket.org
    IdentityFile ~/.ssh/keyA

Host myteam2.bitbucket.org
    Hostname bitbucket.org
    HostKeyAlias bitbucket.org
    IdentityFile ~/.ssh/keyB 
```

然后，当您使用`hg clone ssh://hg@myteam2.bitbucket.org/myteam2/myproject`ssh 之类的假主机名克隆或推送 URL 时，将交换真实主机名和正确的密钥。

但实际上，只是使用`ssh-agent`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T22:57:11.537

您可以在存储库 hgrc 级别覆盖您的密钥

请参阅[Mercurial 的配置文件](http://www.selenic.com/mercurial/hgrc.5.html#files)******

# objective-c - AFNetworking JSON-RPC 预期的内容类型 - 错误域 = AFNetworkingErrorDomain

> ID：13349583
> 
> 赞同：2
> 
> 时间：2012-11-12T18:45:37.743
> 
> 标签：objective-c, json, afnetworking, json-rpc

我正在使用这个基于 AFNetworking 的[JSON-RPC 客户端](https://github.com/wiistriker/AFNetwork-JSON-RPC-Client)

拨打此电话后：

```
 AFJSONRPCClient *client = [[AFJSONRPCClient alloc] initWithURL:[NSURL URLWithString:kAPIHost]];

[client invokeMethod:@"auth.login"
      withParameters:params
                 success:^(AFHTTPRequestOperation *operation, id responseObject) {

                     //success handling
                     completionBlock(responseObject);

} failure:^(AFHTTPRequestOperation *operation, NSError *error) {

    //error handling
    NSLog(@"error: %@", [error description]);
}]; 
```

我在 NSLog 中得到这个错误：

> 错误：错误域=AFNetworkingErrorDomain 代码=-1016“预期的内容类型 {(“text/json”、“application/json”、“text/javascript”)}，得到了 application/json-rpc”UserInfo=0xd02f680 **{NSLocalizedRecoverySuggestion={ “错误”：空，“jsonrpc”：“2.0”，“id”：“1”，“结果”：{“key”：“38c491c894aa057d532e8b314d”，“成功”：true}}**，AFNetworkingOperationFailingURLResponseErrorKey=，NSErrorFailingURLKey=someurl， NSLocalizedDescription=预期的内容类型 {( "text/json", "application/json", "text/javascript" )}，得到 application/json-rpc, AFNetworkingOperationFailingURLRequestErrorKey=http://rpc.development.hotelzilla.net/>}

我也不明白为什么会出现所有正确数据的响应（以粗体突出显示）。

到目前为止，这是我尝试过的：

```
 [AFJSONRequestOperation addAcceptableContentTypes:[NSSet setWithObject:@"application/json-rpc"]];

    // Accept HTTP Header; see http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1
    [self setDefaultHeader:@"Accept" value:@"application/json-rpc"];

    [self registerHTTPOperationClass:[AFJSONRequestOperation class]]; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T20:23:49.913

如果您遇到此问题，您第一次尝试的解决方案`[AFJSONRequestOperation addAcceptableContentTypes:[NSSet setWithObject:@"application/json-rpc"]];`可能会奏效，`AFJSONRequestionOperation`但由于您使用的是不是子类的客户端，`AFHTTPRequestOperation`因此它不会响应此方法。

如果您更改正在使用的客户端的代码，这可能是一个可行的解决方案。在源代码中创建了一个`AFJSONRequestOperation`被调用`operation`的对象，如果您尝试`[AFJSONRequestOperation addAcceptableContentTypes:[NSSet setWithObject:@"application/json-rpc"]];`在这里附近的某个地方使用，您可能能够解决该问题。

# spring - 什么会导致 Spring IoC 为每个 WebApp 实例化多个单例 bean 实例？

> ID：13349584
> 
> 赞同：1
> 
> 时间：2012-11-12T18:45:39.750
> 
> 标签：spring, dependency-injection

我有一个基于 Spring 的 WebApp。在我的应用程序上下文中，我定义了这个 bean：

```
<bean id="someSingleton" class="com.fake.SomeSingleton" scope="singleton"/> 
```

我有一个 Spring dispatch servlet 定义和一个类，该类具有`@Controller`我自动连接这个 bean 的注释，期望 Spring 只实例化这个类一次。然而，根据下面的调试代码，Spring不止一次地实例化了这个类：

```
private static final Semaphore SANITY_CHECK = new Semaphore(1);

public FakeSingleton(){
    if(!SANITY_CHECK.tryAcquire()){
      log.error("why?");
      System.exit(-1);
    else{
      log.error("OK");
    }
} 
```

可能是什么原因？

注意：我使用spring 3.1.2.RELEASE

**编辑：** 感谢我得到的提示，我找到了罪魁祸首。
除了 DispatcherServlet，我的 web.xml 中还有一个 ContextLoaderListener。删除它后， SomeSingleton 只被实例化了一次。

```
<!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<servlet>
    <servlet-name>FakeService</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T18:47:51.540

有几个可能的原因：

*   您的类由一些 CGLIB 代理包装，这会导致构造函数运行两次（与`@PostConstruct`每个 bean 始终运行一次的回调相反）- 一次用于您的类，一次用于继承代理

*   更有可能的是，您的 bean 被两种上下文拾取：主要的一种和 Spring MVC 的一种。这是一个不好的做法，你应该避免它。通过一些 CLASSPATH 扫描检查您的`SomeSingleton`类是否未被 MVC 调度程序 servlet 上下文拾取。

顺便说一句，在这样的代码中，使用 simple`AtomicInteger`而不是`Semaphore`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T18:47:35.743

单例是每个上下文一次，而不是每个宇宙热死亡一次。

打开日志记录并查看为什么/是否多次创建整个应用程序上下文。

# jquery - 花式盒冲突？

> ID：13349594
> 
> 赞同：0
> 
> 时间：2012-11-12T18:46:27.183
> 
> 标签：jquery, html, fancybox

我正在尝试在网站上实施 Fancybox 电子邮件表单，但无法在实时网站上运行。

当我在 JSFiddle 上使用代码时它工作正常：http: [//jsfiddle.net/svsdx/](http://jsfiddle.net/svsdx/)

但是，我认为可能与 . 我尝试删除一些元素，但找不到导致它的原因。毫无疑问，我是个十足的白痴，但有人能在这里发现一个可能的问题吗？

```
<head>  

<!--Favicon-->
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon"> 

<!-- CSS -->
<link rel="stylesheet" href="style.css">
<!-- /CSS -->

<!-- Fonts --> 
<script type="text/javascript" src="//use.typekit.net/hte5kvm.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
<!-- /Fonts -->

<!-- Ticker -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript" src="http://labs.ft.com/wp-content/uploads/2010/03/jquery.ticker.js"></script>
<!-- /Ticker -->

<!-- FancyBox -->   
<link rel="stylesheet" href="fancybox/source/jquery.fancybox.css" type="text/css" media="screen" />
<script type="text/javascript" src="fancybox/source/jquery.fancybox.pack.js"></script>
<link rel="stylesheet" href="fancybox/source/helpers/jquery.fancybox-buttons.css" type="text/css" media="screen" />
<script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-buttons.js"></script>
<script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-media.js"></script>
<link rel="stylesheet" href="fancybox/source/helpers/jquery.fancybox-thumbs.css" type="text/css" media="screen" />
<script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-thumbs.js"></script>
<!-- /FancyBox -->

<!-- JS -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
<!-- /JS -->

 <!--Analytics-->
 <script type="text/javascript">

   var _gaq = _gaq || [];
   _gaq.push(['_setAccount', 'UA-XXXXXXXX-1']);
   _gaq.push(['_trackPageview']);

   (function() {
     var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
     ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
   })();

 </script>     

  </head> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:44:17.777

尝试删除 Typekit 脚本链接。如果 TypeKit 脚本是问题所在，请尝试使用他们的高级嵌入代码：http: [//help.typekit.com/customer/portal/articles/649336-embed-code](http://help.typekit.com/customer/portal/articles/649336-embed-code)

# spring - 未正确检索更新的实体

> ID：13349595
> 
> 赞同：0
> 
> 时间：2012-11-12T18:46:36.190
> 
> 标签：spring, hibernate, jpa, jta

我有一个在 glassfish 上运行的 spring mvc 应用程序。我不知道我的问题的根源，所以尽可能详细说明。我有 2 个类
一个用户类

```
@Entity
@Table(name="Users")
public class User extends BaseEntity<User> {
    // other fields

    @OneToMany(fetch = FetchType.EAGER, mappedBy = "user")
    @OrderBy(value = "id DESC")
    private Set<OtherClass> objs;

    // getters and setters         
} 
```

和其他类：

```
@Entity
@Table(name="OtherObjects")
public class OtheClass extends BaseEntity<OtheClass> {
    // other fields

    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "User", nullable = false)
    private User user;

    // getters and setters
} 
```

我在应用程序启动时检索用户对象并将其放入会话对象中。在运行时，用户可以向 DB 添加“OtherClass”对象。otherClass 对象正确保存在数据库中（与用户表中正确的用户行相关）。问题是在用户在运行时添加 otherClass 对象后，其他对象的 Set 不会更新。更奇怪的是，即使我再次从数据库中检索用户对象，我也没有得到更新的 OtherClass 集。这是我的persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0">
    <persistence-unit name="myPU" transaction-type="JTA">

        <jta-data-source>jdbc/MyDataSource</jta-data-source>

        <class>org.company.entities.OtherClass</class>
        <class>org.company.entities.User</class>

        <exclude-unlisted-classes />

        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQL5Dialect" />
            <property name="hibernate.show_sql" value="false" />
            <property name="hibernate.current_session_context_class" value="thread" />
            <property name="hibernate.cache.provider_class" value="org.hibernate.cache.NoCacheProvider" />
            <property name="hibernate.hbm2ddl.auto" value="create" />
        </properties>

    </persistence-unit>
</persistence> 
```

我最近把我的事务管理器从spring的jpa事务管理器改成了JTA事务管理器。（我想这与它有关）。有任何想法吗？如果需要进一步的代码或配置，请告诉我，我会发布更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:45:38.703

JPA 不会自动维护双向关联，由开发人员来更新关系的双方。在这种情况下，在创建 OtherClass 对象时，您应该将其添加到 User 对象中的 objs 集合中。

# android - 7英寸平板电脑上的碎片

> ID：13349600
> 
> 赞同：0
> 
> 时间：2012-11-12T18:47:00.650
> 
> 标签：android, android-fragments

我可以在 7 英寸 android 平板电脑上使用具有 2 列布局的 android 片段吗？它具有 800 x 480 分辨率。当我在分辨率为 480 x 800 的智能手机上使用它时，它显示为一列布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:53:32.993

是的。由于智能手机的屏幕尺寸很小，片段显示为单独的活动，而在平板电脑中则显示为 2 列布局。此外，它与屏幕分辨率无关参考：http: [//developer.android.com/guide/practices/tablets-and-handsets.html](http://developer.android.com/guide/practices/tablets-and-handsets.html)

# jquery - jQuery全屏最小背景图片大小

> ID：13349607
> 
> 赞同：0
> 
> 时间：2012-11-12T18:47:28.747
> 
> 标签：jquery, css, resize, fullscreen

我正在使用 jQuery Fullscreen 插件来实现全屏背景图像，该图像在浏览器窗口调整大小（[链接到站点](http://www.thenally.com/wordpress)）时动态缩放。它一直对我很有效。在此特定项目中，单击每个链接的背景图像都会发生变化。这是一个单页站点，当使用 jQuery ScrollTo 插件单击菜单项时会滚动。

我很难弄清楚如何设置最小背景图像宽度。如果浏览器窗口变得足够小，则背景图像中的白色会干扰白色文本。我想设置一个最小宽度，这样背景图像就会缩放到某个点，然后不管窗口有多小都会停止。我的 Javascript 技能非常业余，我尝试过简单地使用 CSS 无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:04:28.567

考虑[`background-size`](https://developer.mozilla.org/en-US/docs/CSS/background-size)结合[CSS 媒体查询](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)使用缩放背景图像，以便为不同宽度的浏览器窗口使用不同`background-size`的值。

# c++ - 如何重载cin来读取文件

> ID：13349610
> 
> 赞同：1
> 
> 时间：2012-11-12T18:47:37.997
> 
> 标签：c++, operator-overloading

> **可能重复：**
> [操作输入文件流](https://stackoverflow.com/questions/13349204/manipulate-input-file-stream)

C++如何重载cin来读取文件

我正在尝试使用运算符重载进行以下操作..

```
struct myself
{
string myname;
}

istream &operator>> (istream &stream, myself &mm)
{
cout << "Enter my name:";
stream >> mm.myname;
return stream;
}

int main()
{
myself mm;
cin >> mm;

cout << mm.myname;

} 
```

及其工作，能够呼应我实际输入的内容。

现在我试图继续

```
cout << "Enter file name to read: ";

//assume user type myfile.txt

cin >> readFile; 
```

我如何重载我的 cin 以使其读取文件。

考虑我的文件类似于

sometextdocument.txt 包含类似的数据

```
Map2D, [3, 2]
Dot3D, [25, -69, -33], [-2, -41, 58]
Map3D, [6, 9, -50]
Map2D, [3, 2]
Dot3D, [7, -12, 3], [9, 13, 68]
Map3D, [6, 9, 5]
Map2D, [3, 2]
Dot3D, [70, -120, -3], [-29, 1, 268]
Dot3D, [7, 12, 3], [-9, 13, 68]
Map3D, [1, 3, 8]
Dot2D, [5, 7], [3, 8] 
```

然后我想做`cout << "Number of records read: " << number << endl;` 一个返回流，我如何重载它以在 cin 读取文件时工作

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-12T19:09:19.450

**试试这样：**希望它会有所帮助

```
istream &operator>> (istream &in, char* fname){ 
  inFile.open(fname);
  char ch1;
  while (inFile.get(ch1)) {
       cout<<ch1;
  }
} 
```

# objective-c - Core Data 撤消管理是否在应用程序重新启动时起作用？

> ID：13349611
> 
> 赞同：1
> 
> 时间：2012-11-12T18:47:43.600
> 
> 标签：objective-c, ios, core-data, nscoding, nsundomanager

我一直在使用 Core Data。我正在写一个纸牌游戏，我能够存储和检索游戏统计数据。我还在每次移动后存储游戏的状态，以允许应用程序在应用程序退出时恢复正在进行的游戏，并促进我的自制撤消系统。

不幸的是，我玩游戏的时间越长，感觉就越慢。我认为这是因为每次移动后我都会在 SqlLite 中存储 52 张卡片及其特定状态。我怀疑我塞进数据库的数据越多，这就越慢。

因此，我打算尝试使用 Core Data 中内置的撤消管理。（我不记得这是在那里，直到我最初的实施为时已晚。）我的问题是，如果应用程序在游戏中途关闭，是否可以在相同状态下使用撤消管理重新启动它？

IE：想象一个用户在这个游戏中做了十步。他们将能够撤消十次。如果他们退出应用程序并完全关闭它然后重新启动应用程序，我可以将 Core Data 恢复到用户仍然可以执行十个撤消步骤的状态吗？

一些研究表明，当应用程序关闭时，我可以简单地使用 NSCoding 将 NSManagedObjectContext 持久化到序列化文件中，然后在应用程序重新启动时从该文件恢复它的状态。

我在正确的道路上吗？有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:15:38.063

NO UndoManager 不是持久的。是的，您可以使用 NSCoding 甚至 Plist 来保存状态。

有关此主题的更多信息，您可以参考 [http://www.cimgf.com/2011/10/11/core-data-and-the-undo-manager/](http://www.cimgf.com/2011/10/11/core-data-and-the-undo-manager/)

# r - R填充向量

> ID：13349613
> 
> 赞同：6
> 
> 时间：2012-11-12T18:47:50.657
> 
> 标签：r, vector, operations

我有一个零向量，比如长度为 10。所以

```
v = rep(0,10) 
```

我想根据 v1 中的一组索引和另一个实际上按顺序具有值的向量 v2 填充向量的一些值。所以另一个向量 v1 有索引说

```
v1 = c(1,2,3,7,8,9) 
```

和

```
v2 = c(0.1,0.3,0.4,0.5,0.1,0.9) 
```

最后我想要

```
v = c(0.1,0.3,0.4,0,0,0,0.5,0.1,0.9,0) 
```

所以 v1 中的索引是从 v2 映射的，其余的为 0。我显然可以编写一个 for 循环，但由于实际矩阵的长度，这在 R 中花费了太长时间。有什么简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T18:50:01.080

你可以这样分配它：

```
v[v1] = v2 
```

例如：

```
> v = rep(0,10)
> v1 = c(1,2,3,7,8,9)
> v2 = c(0.1,0.3,0.4,0.5,0.1,0.9)
> v[v1] = v2
> v
 [1] 0.1 0.3 0.4 0.0 0.0 0.0 0.5 0.1 0.9 0.0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T19:03:30.207

你也可以这样做`replace`

```
v = rep(0,10)
v1 = c(1,2,3,7,8,9)
v2 = c(0.1,0.3,0.4,0.5,0.1,0.9)

replace(v, v1, v2)
[1] 0.1 0.3 0.4 0.0 0.0 0.0 0.5 0.1 0.9 0.0 
```

详情请参阅`?replace`。

# html - 帆布 - 淡出案例

> ID：13349623
> 
> 赞同：1
> 
> 时间：2012-11-12T18:48:28.247
> 
> 标签：html, html5-canvas

我正在使用画布生成具有间隔的随机彩色对象。我想要做的是，将物体淡化成白色，就像它们淡化成雾一样。

我想在不需要重绘每一帧中的每个对象的情况下实现这一点。相反，我在对象之间放置了白色层（不透明度很小），这样它就可以产生淡出效果。

这是我目前的方法：http: [//jsfiddle.net/zettam/pUVkA/26/](http://jsfiddle.net/zettam/pUVkA/26/)

```
var cvas = document.getElementById("ctxt");
var cx = cvas.getContext("2d");

function randomColor(num) {
    return Math.floor(Math.random() * num);
}

setInterval(function() {
    var r = randomColor(255);
    var g = randomColor(255);
    var b = randomColor(255);
    cx.fillStyle = "rgba(" + r + "," + g + "," + b + ",1.0)";
    cx.fillRect(200*Math.random(), 200*Math.random(), 300*Math.random(), 300*Math.random());
}, 200);

setInterval(function() {
    cx.fillStyle = "rgba(255,255,255,0.025)"
    cx.fillRect(0, 0, 500, 500);
}, 20);​ 
```

如您所见，这些对象永远不会淡出为全白，而是停留在灰色的某个地方。

我怎样才能实现我所需要的，而不必在每一帧都重新绘制所有内容？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:37:59.820

`cx.fillStyle = "rgba(255,255,255,0.025)"`当小于 时，不透明度设置不起作用`0.1`。（该函数的一些计算问题？）

尝试将其设置为`0.1`而不是`0.025`将间隔更改为更高的值以进行补偿，例如`50`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T21:31:37.113

试试这个：http: [//jsfiddle.net/pUVkA/31/](http://jsfiddle.net/pUVkA/31/)

这是两种方法之间的折衷。正如@Josh 所提到的，画布合成代码存在完全覆盖的问题，其不透明度小于`0.1`.

```
var cvas = document.getElementById("ctxt"),
    cx = cvas.getContext("2d"),
    lFade = new Date(),
    lBox = new Date(),
    lClear = new Date();

function randomColor(num) {
    return Math.floor(Math.random() * num);
}

(function draw(){
    var now = new Date();

    if (now - lFade > 20){
        cx.fillStyle = "rgba(255,255,255,0.025)"
        cx.fillRect(0, 0, 500, 500);
        lFade = now;
    }
    if (now - lClear > 800){
        cx.fillStyle = "rgba(255,255,255,0.1)"
        cx.fillRect(0, 0, 500, 500);
        lClear = now;
    }

    if (now - lBox > 200){
        var r = randomColor(255);
        var g = randomColor(255);
        var b = randomColor(255);
        cx.fillStyle = "rgba(" + r + "," + g + "," + b + ",1.0)";
        cx.fillRect(200*Math.random(), 200*Math.random(), 300*Math.random(), 300*Math.random());
        lBox = now;
    }

    setTimeout(draw, 1000/60);
})(); 
```

# eclipse - Netbeans 需要 Tomcat 密码 Eclipse 不需要

> ID：13349627
> 
> 赞同：0
> 
> 时间：2012-11-12T18:48:43.003
> 
> 标签：eclipse, tomcat, netbeans

我有 Eclipse 和 Netbeans，我正在运行 Tomcat。我无法在没有密码的情况下在 Netbeans 中启动 Tomcat，但在 Eclipse 中可以。我没有在 tomcat-users.xml 中设置用户名或密码，并且 eclipse 工作正常。为什么我不能用 Netbeans 做到这一点。

# php - 当我从数据库表中选择下拉值时，页面刷新和值返回选择选项

> ID：13349628
> 
> 赞同：1
> 
> 时间：2012-11-12T18:48:51.320
> 
> 标签：php, mysql

当我从数据库表中选择下拉值然后刷新页面时，该值返回到选择选项

这是我的代码：

```
<select name="customers" id="customers" style="width:150px;"  >
    <option value=""><--Select--></option>
    <?php 
        $query=mysql_query("SELECT cn FROM customerinformation order by id");
        while($row=mysql_fetch_assoc($query))
        {
             $val2=$row['cn'];
    ?>
        <option  value="<?=$val2;?>"
            <?if ($_REQUEST['cn'] == $val2){ echo "selected='selected'"; }?>> 
            <?=$row['cn'];?> 
        </option>
    <?php }?>
</select> 
```

请告诉我或指导我哪里做错了。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:09:25.300

我不明白你的问题，但我认为你应该把 $_REQUEST['customers'] 而不是 $_REQUEST['cn'] （因为你选择的名字）例子：

* * *

```
<select name="customers" id="customers" style="width:150px;"  >
<option value=""><--Select--></option>
  <?php

  $query=mysql_query("SELECT cn FROM customerinformation order by id");
  while($row=mysql_fetch_assoc($query)) {
      $selected = ($_REQUEST['customers'== $row['cn']?'selected="selected"':'');
      echo '<option value="'.$row['cn'].'" $selected>'.$row['cn'].'</option>';
  }

  ?>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:52:18.323

您需要 中`unset()`的值`$_REQUEST['cn']`，一旦用于评估，

```
 <? if ($_REQUEST['cn'] == $val2) { 
        echo "selected='selected'"; 
        unset($_REQUEST['cn']); 
    }?> > <?=$row['cn'];?> </option> 
```

# opencl - 复制后本地和全局内存之间的不同值

> ID：13349629
> 
> 赞同：1
> 
> 时间：2012-11-12T18:48:57.747
> 
> 标签：opencl, gpu

我在 GPU 内核中工作，我在将数据从全局内存复制到本地内存时遇到了一些问题，这是我的内核函数：

```
__kernel void nQueens( __global int * data, __global int * result, int board_size) 
```

所以我想从**__global int * data**复制到**__local int aux_data[OBJ_SIZE]** 我试图像普通数组一样复制：

```
for(int i = 0; i < OBJ_SIZE; ++i)
{
    aux_data[stack_size*OBJ_SIZE + i] = data[index*OBJ_SIZE + i];
} 
```

并具有复制功能：

```
event_t e = async_work_group_copy ( aux_data,   (data + (index*OBJ_SIZE)),  OBJ_SIZE, 0);
wait_group_events (1, e); 
```

在这两种情况下，我在全局内存和本地内存之间得到不同的值。我不知道我做错了什么......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T19:27:54.967

在第一个答案中复制数据的方式的一个问题是，您正在将数据分配给不存在的数组部分。每当> 1`aux_data[stack_size*OBJ_SIZE + i]`时都会溢出。`stack_size`

答案二的问题可能是您需要传递一系列事件，而不仅仅是一个事件。

要确保的一件事是了解`index`所指的内容。我假设我的解决方案是指组 ID 而不是线程 ID。如果确实是线程ID，那么我们还有其他问题。

**可能的解决方案1：**

```
int gid = get_group_id(0);
int lid = get_local_id(0);
int l_s = get_local_id(0);
for(int i = lid; i < OBJ_SIZE; i += l_s)
{
    aux_data[i] = data[gid*OBJ_SIZE + i];
}
barrier(CLK_LOCAL_MEM_FENCE); 
```

**可能的解决方案2：**

```
int gid = get_group_id(0);
event_t e = async_work_group_copy (aux_data, data + (gid*OBJ_SIZE), OBJ_SIZE, 0);
wait_group_events (1, &e); 
```

# hadoop - 在使用 jar 选项时将作业提交到不同的公平调度程序池

> ID：13349630
> 
> 赞同：2
> 
> 时间：2012-11-12T18:49:10.803
> 
> 标签：hadoop, mapreduce

我对 Hadoop 比较陌生，并且试图在使用 hadoop jar 选项时在运行时将同一用户的不同作业提交到公平调度程序的不同池。

基于[http://osdir.com/ml/hive-user-hadoop-apache/2009-03/msg00162.html](http://osdir.com/ml/hive-user-hadoop-apache/2009-03/msg00162.html)中的解决方案，我`-D`在运行作业时使用了该选项。

具体来说，我运行了以下命令：`bin/hadoop jar hadoop-examples-1.0.4.jar grep input output 'dfs[a-z.]+' -D pool.name=sample_pool`

我可以在作业跟踪器调度程序页面中看到池，但作业仍提交到用户池。我发现`-D`jar 选项不支持该选项：[http://hadoop.apache.org/docs/r1.0.4/commands_manual.html#job](http://hadoop.apache.org/docs/r1.0.4/commands_manual.html#job)。

如何在运行时指定它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-12T02:02:47.860

我认为您可以指定参数`mapred.fairscheduler.pool`或`mapred.fairscheduler.poolnameproperty`.

例如，您可以运行命令

`bin/hadoop jar hadoop-examples-1.0.4.jar -Dmapred.fairscheduler.pool=sample_pool grep input output 'dfs[a-z.]+'`

**mapred.fairscheduler.pool：**

> 指定作业所属的池。如果指定，则忽略 mapred.fairscheduler.poolnameproperty。

**mapred.fairscheduler.poolname 属性：**

> 指定使用哪个jobconf 属性来确定作业所属的池。字符串，默认值：user.name（即每个用户一个池）。另一个有用的值是 mapred.job.queue.name 使用 MapReduce 的“队列”系统访问控制列表（见下文）。mapred.fairscheduler.poolnameproperty 仅用于未明确设置 mapred.fairscheduler.pool 的作业。

**参考**： [hadoop 公平调度器](http://hadoop.apache.org/docs/r1.2.1/fair_scheduler.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:23:42.460

几个建议：

*   自从您做出第一个链接中建议的更改后，您是否重新启动了作业跟踪器？
*   您以前需要在其他参数之前设置所有 -D 属性（我不确定这在最近的版本中是否已更改）。尝试：

    `bin/hadoop jar hadoop-examples-1.0.4.jar -Dpool.name=sample_pool grep input output 'dfs[a-z.]+'`

如果可能没关系，但我总是把（和`-Dkey=value options`之间没有空格）聚在一起，我发现这更明显地表明这不是变量 args 列表的一部分。`-D``key=value`

验证已正确获取此内容的一种方法是检查作业跟踪器中的作业的 job.xml - 它是否列出了 pool.name 属性，是否具有您配置的值。

**编辑**只是阅读示例如何捆绑，您需要在程序名称之后和其他参数之前添加 -D：

```
`bin/hadoop jar hadoop-examples-1.0.4.jar grep -Dpool.name=sample_pool input output 'dfs[a-z.]+' ` 
```

# c++ - 提取特征。一个类中有很多 getter/setter 是否正常？

> ID：13349633
> 
> 赞同：2
> 
> 时间：2012-11-12T18:49:26.430
> 
> 标签：c++, image-processing, opencv, getter-setter

我有一堆不同的`Feature`类来计算图像特征。
我必须从这些类中提取“关键特征”，这些“关键特征”将打包在一起作为搜索键。
我还将存储部分`Feature`课程。我不能存储整个要素类，因为那样效率很低。

现在，我想到的是编写一个`Stored_features`将“关键特性”放在一起的类。
我的布局是：

```
 Facial_features
   |      |       |
   |      V       |
   | .---Feature1 V   <|-- Abstract_feature
   | | .---Feature2   <|---'
   V V V
  Stored_features 
```

我的问题是这样的`Stored_features`类会有很多 getter 和 setter，据我所知，**getter 和 setter 表示设计不好**。有没有一种易于维护的方法来避免这里有太多的 getter 和 setter？

关键是**我看到我的代码在这里与这个布局非常紧密地结合在一起:(**

编辑：

我的代码按要求提取。

```
#include <opencv2/core/core.hpp>

class Abstract_feature{
public:
  virtual void calculate()=0;
  virtual void draw(cv::Mat& canvas)=0;
  /// to put values into Stored_features
  virtual void registrate_key_values(Stored_features&) const=0;
};

class Facial_features : Abstract_feature{
public:
  virtual void calculate()
  { 
    es.calculate; sc.calculate; 
    /*etc but iterating over a list of Abstract_feature's*/
  }
  Stored_features get_stored_features() const
  {
    return sf.clone();
  }
private:
  Stored_features sf;
  Head_size es;
  Skin_color sc;
};

class Head_size : public Abstract_feature{
  //you can guess the impl.
};    

class Stored_features{
public:
  typedef enum{SKIN_COLOR=0, HEAD_SIZE_WIDTH,HEAD_SIZE_HEIGHT} Name;
public:
  void set_key_feature(Name, double value);
  cv::Mat get_feature_vector() const {return key_values;}
private:
  cv::Mat key_values;
  // and here would come other features eg.
  cv::Rect head_roi; // I don't search based on these. (So I should not use getters/setters?)
}; 
```

添加了 opencv 因为它无论如何都是一个基于 opencv 的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:31:37.533

许多 getter 和 setter 本身并不表示设计不好。但是，它们可能暗示您的课程可以分解为较小的课程。以“客户”为例，如果您将所有名称、地址、送货地址字段放在一个类中，那将是一个糟糕的设计，您应该使用“地址”类进行拆分。

我不确定你的设计是关于什么的，关键是如果你需要 100 个吸气剂，因为你有 100 个，不相关的字段使用 100 个吸气剂

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T20:23:16.153

你可能应该少`literal`考虑你的特征，多考虑抽象和数学术语。您似乎将面部描述为面部特征的组合，每个面部特征都使用某种程序计算，因此每个单独的面部特征都会为单个特征向量贡献一个（或可能几个）标量值。因此，我建议将您的特征存储为：向量。使用一些向量类（std::vector 可能有效，但您可能会考虑使用线性数学库，原因我将在下面解释）。

`extract`如果您愿意，您仍然可以从这些向量中标量面部特征。例如，如果您有`N`特征，则可以将其保存在一`N`维列特征向量`x`中。现在，您可以将任何线性提取运算符编写为行向量甚至矩阵`A`，并获得所需的`f`特征`f = A*x`。如果你想存储这些矩阵和向量，你最好使用像 Boost uBLAS 这样的库。

现在，您仍然应该以某种方式表达您的搜索查询。然后，您应该在向量中重写您的搜索查询，而不是使用 getter 和 setter，并且您可以以距离（欧几里德、曼哈顿）为例来计算存储的人脸与查询的匹配程度。

总结一下：以更数学的方式开发您的业务逻辑，因为这使您以后可以更自由地扩展系统，并且还可以省去您的麻烦，因为您不必为每个功能都想好名字。并制作一个漂亮的 GUI，这样用户就不必输入复杂的数学公式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T14:32:52.360

类的大小应该是它自己的问题。

在这种情况下，我发现我需要的只是`pack()`每个要素类的一个函数，它可以删除我不想存储的所有数据。然后我可以按原样存储类，而不必关心它们的大小。

# java - 当我旋转我的 Android 设备时，XML 变回 main.xml

> ID：13349634
> 
> 赞同：0
> 
> 时间：2012-11-12T18:49:26.503
> 
> 标签：java, android

我正在编写一个 Android 应用程序。我有两个重要的 XML 文件 - main.xml 和 new.xml。这是我的 Java 活动源代码：

```
// package declarations, imports, etc

public class MainActivity extends Activity {
    @Override
    public void onCreate(savedInstanceState) {
        super.onCreate(savedInstancestate);
        setContentView(R.layout.main);
    }

    // as you can see, the content of the initial layout is found in main.xml
    // I want to change the layout so it has the content of new.xml (when I press a button)

    public void ButtonAction(View view) {
        setContentView(R.layout.new);
    }
} 
```

所以它是这样的：在我的 main.xml 文件中，有一个按钮。如 main.xml 文件中所述，当我按下该按钮时，它会调用 ButtonAction 方法。当按下按钮并调用 ButtonAction 时，我想将布局的内容更改为 new.xml 的内容。

上面的代码有效，但只是一种 - 它不是永久性的。当我旋转我的设备时，它似乎用 main.xml 的内容刷新了活动。所以我可以让它做我想做的事，但是当我旋转设备并以横向布局而不是典型的纵向布局查看它时，它会恢复。

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T18:52:57.960

当您旋转屏幕时，整个 Activity 将被销毁并从头开始，包括`onCreate()`使用`setContentView(R.layout.main);`. 您应该将最后选择的布局存储在一个变量中，并使用以下命令加载此变量：

```
setContentView(lastLayout); 
```

您需要在应用程序运行时覆盖`onSaveInstanceState()`并`onRestoreInstanceState()`记住布局选择。这种方法只是暂时的，因为当应用程序关闭时这种状态会丢失。
否则，您可以使用 SharedPreferences（或类似数据库或通用文件之类的东西）来记住跨多个会话的布局选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T19:06:43.480

使用 onSaveInstanceState() 保存您的活动状态，并使用 onRestoreInstanceState() 检索您的活动状态。

onRestoreInstanceState() 在 onStart() 之后调用，而 onCreate() 在 onStart() 之前调用。onRestoreInstanceState() 仅在被操作系统杀死后重新创建活动时调用。使用 put 方法将值存储在 onSaveInstanceState() 中：

```
protected void onSaveInstanceState(Bundle icicle) {
  super.onSaveInstanceState(icicle);
  icicle.putLong("param", value);
} 
```

这是一个教程 [http://www.androidcompetencycenter.com/tag/onrestoreinstancestate/](http://www.androidcompetencycenter.com/tag/onrestoreinstancestate/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T18:57:40.897

澄清一下，如果您是横向或纵向，Android 首先在 -land 目录中查找布局文件，如果未找到，则检查默认布局目录。您的文件应命名如下，系统将根据设备的当前配置在运行时加载：

```
res/layout/main.xml
res/layout-land/main.xml 
```

查看有关[提供资源](http://developer.android.com/guide/topics/resources/providing-resources.html)的文档以获取更多信息。

# jquery - 在jQuery中选择另一个类的元素的类子元素的第一个元素

> ID：13349635
> 
> 赞同：0
> 
> 时间：2012-11-12T18:49:28.363
> 
> 标签：jquery, html, css-selectors

我想选择一个类的第一个元素，它们是使用 jQuery 的另一个类的元素的子元素。请查看下面的示例以了解我的问题。

```
<div class="a">
    <div class="c"></div>
    <div></div>
    <div class="b">Select this</div>
    <div class="b"></div>
    <div class="b"></div>
</div>
<div class="a">
    <div></div>
    <div class="c"></div>
    <div class="b">Select this</div>
    <div class="b"></div>
    <div class="b"></div>
</div>
<div class="a">
    <div class="b">Select this</div>
    <div class="b"></div>
    <div class="b"></div>
    <div></div>
    <div class="c"></div>
</div> 
```

我想在 jQuery 中编写一个代码，它将在 a 类的所有元素下选择 b 类的所有第一个元素。

如果我在 jQuery 中使用以下代码，它将不起作用：

```
$(".a div.b:first-child").html('Changed!!!!');​ 
```

如何选择那些我在 html 中标记为“选择这个”的 div？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T18:52:31.827

使用`:first`代替`:first-child`和也`.find`用于特定部分。见下文，

```
$(".a").find("div.b:first").html('Changed!!!!'); 
```

**演示：http:** [//jsfiddle.net/kjV5j/1/](http://jsfiddle.net/kjV5j/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:52:06.657

这应该有效：

```
.a > .b:first-child, .a > :not(.b) + .b 
```

[jsFiddle 演示](http://jsfiddle.net/K9p9e/)

与`:first`jQuery 支持的非标准伪类相比，这应该在原生支持的浏览器（IE9+）中运行得*更快。*`querySelectorAll()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T18:53:16.930

试试这个：

```
 $(".a div.b:eq(0)").html('Changed!!!!'); 
    // OR
    $(".a div.b:first").html('Changed!!!!'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T18:53:25.003

如果要更改具有“选择此”的标签中的文本：

```
$('.a div').each(function()
{
  if ( $(this).html() == 'Select this' )
    $(this).html('changed');
}); 
```

# c# - 从字符串中提取数字

> ID：13349636
> 
> 赞同：0
> 
> 时间：2012-11-12T18:49:28.503
> 
> 标签：c#, regex

我需要从这样的字符串中获取所有数字：

```
"156234   something 567345 another thing 45789 anything" 
```

结果应该是一组数字，具有：

```
156234, 567345, 45789 
```

我试过`@"\d+"`了，但它只会给我`156234`。

编辑：这些数字是整数，但是它们也可以像这样出现“156234 567345 另一个 45789 任何 2345”。在这种情况下，我只需要整数，即 156234、567345、45789 而不是 156234、567345、45789、2345。

此外，我不想要的整数将始终以 ex:anything2345 的文本开头。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T18:54:25.663

您的正则表达式一切正常，您只需要完成所有匹配即可。

```
Regex regex = new Regex(@"\d+");

foreach (Match match in regex.Matches("156234 something 567345 another thing 45789 anything"))
{
    Console.WriteLine(match.Value);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-12T18:54:15.720

你想分割字符，而不是数字。使用大写 D

```
string[] myStrings = Regex.Split(sentence, @"\D+"); 
```

[来源](http://www.dotnetperls.com/regex-split)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T21:13:47.747

如果 2345 不应该在您修改后的示例字符串中匹配（156234 某事 567345 另一事 45789 任何事2345），您可以使用 Dima 的解决方案，但使用正则表达式：

```
\b\d+\b 
```

这确保了数字被单词边界包围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T01:58:50.960

这在java中。您实际上并不需要正则表达式 .. 只需一个普通的 replaceAll 就可以为您解决问题！：例如：您可以剥离非数字，然后拆分并计算总和。

```
 public static int getSumOfNumbers(String s) {
    int sum = 0;
    String x = s.replaceAll("\\D+", " ");
    String[] a = x.split(" ");
    for(int i = 0; i < a.length; i++)
         sum += Integer.parseInt(a[i]);
    System.out.println(x + " : and sum is : "+sum);
    return sum;
} 
```

# c++ - 使用 std::find 从向量中选择一个项目

> ID：13349637
> 
> 赞同：3
> 
> 时间：2012-11-12T18:49:38.353
> 
> 标签：c++, syntax, if-statement, vector, find

我在让基于矢量的库存系统工作时遇到问题。我能够列出库存中的物品，但不能允许访问用户选择的物品。这是代码：

```
struct aItem
{
    string  itemName;
    int     damage;

    bool operator==(aItem other)
    {
        if (itemName == other.itemName)
            return true;
        else
            return false;
    }
};

int main()
{
    int selection = 0;

    aItem healingPotion;
    healingPotion.itemName = "Healing Potion";
    healingPotion.damage= 6;

    aItem fireballPotion;
    fireballPotion.itemName = "Potion of Fiery Balls";
    fireballPotion.damage = -2;

    aItem testPotion;
    testPotion.itemName = "I R NOT HERE";
    testPotion.damage = 9001;
    int choice = 0;
    vector<aItem> inventory;
    inventory.push_back(healingPotion);
    inventory.push_back(healingPotion);
    inventory.push_back(healingPotion);
    inventory.push_back(fireballPotion);

    cout << "This is a test game to use inventory items. Woo!" << endl;
    cout << "You're an injured fighter in a fight- real original, I know." << endl;
    cout << "1) Use an Item. 2) ...USE AN ITEM." << endl;

switch (selection)
    {
    case 1:
        cout << "Which item would you like to use?" << endl;
        int a = 1;
        for( vector<aItem>::size_type index = 0; index < inventory.size(); index++ ) 
        {

            cout << "Item " << a << ": " <<  inventory[index].itemName << endl;
            a+= 1;
        }
        cout << "MAKE YOUR CHOICE." << endl << "Choice: ";

        cin >> choice; 
```

^^^^ 这条线以上的一切，都有效。我认为我的问题是 if 语句，但我无法弄清楚我的语法哪里出错了，或者是否有更好的方法来做我正在做的事情。

```
 if (find(inventory.begin(), inventory.at(choice), healingPotion.itemName) != inventory.end())
            cout << "You used a healing potion!";
        else
            cout << "FIERY BALLS OF JOY!";
        break;

    case 2:
        cout << "Such a jerk, you are." << endl;
            break;

    } 
```

编辑：我认为我没有正确表示这一点。我需要让玩家的选择影响显示的消息。这是第一个片段的示例输出：

```
Item 1: Healing Potion
Item 2: Healing Potion
Item 3: Healing Potion
Item 4: Potion of Fiery Balls

MAKE YOUR CHOICE. 
Choice: 
```

从那里，玩家可以输入 1-4，我想要的是将数字（减 1，以反映从零开始的向量）传递给 find，然后它将确定（在这个小例子中）是否库存中的物品[选择 - 1] 是一种治疗药水。如果是这样，显示“你使用了治疗药水！” 如果不是，则显示“快乐的火球”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:02:21.443

三个问题。

一，您的运营商应声明为：

`bool operator==(const aItem& other) const`

二，在这段代码中：

`find(inventory.begin(), inventory.at(choice), healingPotion) != inventory.end())`

您不是从`begin()`to搜索整个向量`end()`- 您只是在搜索 from `begin()`to `at(choice)`where`at(choice)`指向您的搜索集的最后一个位置。所以你要么应该这样做：

```
find(&inventory.at(0), &inventory.at(choice), healingPotion) != &inventory.at(choice)) 
```

或这个...

```
find(inventory.begin(), inventory.end(), healingPotion.itemName) != inventory.end()) 
```

**编辑**三，您正在尝试将苹果与橙子进行比较。您正在搜索对象以找到匹配的`vector`对象，但您发送到的参数不是对象，它是数据成员之一。`aItem``aItem``find``aItem``aItem`

您应该搜索匹配的项目，如下所示：

```
find( inventory.begin(), inventory.end(), healingPotion ) != inventory.end() )
                                            ^^^^^^^^ 
```

在 C++03 中，您可以提供一个仿函数：

```
#include <functional>
struct match_name : public std::unary_function<aItem, bool>
{
    match_name(const string& test) : test_(test) {}
    bool operator()(const aItem& rhs) const
    {
        return rhs.itemName == test_;
    }
private:
  std::string test_;
}; 
```

...然后使用搜索匹配`find_if`：

```
find_if( inventory.begin(), inventory.end(), match_name(healingPotion.itemName) ) // ... 
```

在 C++11 中，您可以使用闭包来简化这种混乱：

```
string test = healingPotion.itemName;
if( find_if( inventory.begin(), inventory.end(), [&test](const aItem& rhs)
{
    return test == rhs.itemName;
}) == inventory.end() )
{
  // not found
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T10:40:03.123

代替：

```
case 1:
        cout << "Which item would you like to use?" << endl;
        int a = 1;
        for( vector<aItem>::size_type index = 0; index < inventory.size(); index++ ) 
        {

            cout << "Item " << a << ": " <<  inventory[index].itemName << endl;
            a+= 1;
        }
        cout << "MAKE YOUR CHOICE." << endl << "Choice: ";

        cin >> choice;
        if (find(inventory.begin(), inventory.at(choice), healingPotion.itemName) != inventory.end())
            cout << "You used a healing potion!";
        else
            cout << "FIERY BALLS OF JOY!";
        break;

    case 2:
        cout << "Such a jerk, you are." << endl;
            break;

    } 
```

我没有意识到向量的奇迹之一是能够直接访问值 - Ryan Guthrie 在他的评论中提到了这一点，但我找到了一个更简单的“答案”。即：

```
case 1:
    cout << "Which item would you like to use?" << endl;
    //TODO: Learn what the hell the following line actually means.
    for( vector<aItem>::size_type index = 0; index < inventory.size(); index++ ) 
    {
        //Makes a numerical list.
        cout << "Item " << index + 1 << ": " <<  inventory[index].itemName << endl;
        a+= 1;
    }
    cout << "MAKE YOUR CHOICE." << endl << "Choice: ";

    cin >> choice;
    //Cannot define this outside of the statement, or it'll initialize to -1
    invVecPos = (choice - 1);

    //This checks for an invalid response. TODO: Add in non-int checks. 
    if ((invVecPos) >= inventory.size())
    {
        cout << "Choice out of bounds. Stop being a dick." << endl;
    }
    //If the choice is valid, proceed.
    else
    {
        //checking for a certain item type.
        if(inventory[invVecPos].itemType == "ITEM_HEALTHPOT")
        {
            cout << "You used a healing potion!" << endl;
            //this erases the potion, and automagically moves everything up a tick.
            inventory.erase (inventory.begin() + (invVecPos));
        }

        else if(inventory[invVecPos].itemType == "ITEM_FIREPOT")
        {
            cout << "FIERY BALLS OF JOY!" << endl;
        }

        else
        {
            //error-handling! Whee!
            cout << "Invalid Item type" << endl;
        }
    }

    break;
case 2:
    cout << "Why do you have to be so difficult? Pick 1!" << endl;
    break; 
```

谢谢你，Ryan - 在你的推动下，我能够在别处寻找我需要的代码！“固定”代码被大量注释，因此遇到问题的任何其他人都应该能够收集他们需要的内容！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T19:35:26.907

要添加到 John Dibling 的答案，最后一部分是您正在寻找一个名称，而不是 aItem。

所以它要么需要：

```
find(inventory.begin(), inventory.end(), healingPotion) != inventory.end(); 
```

其中 operator== 定义为：

```
bool operator==(const aItem& other) const
{
   return itemName == other.itemName;
} 
```

或者你需要让你的 operator== 接受一个字符串：

```
find(inventory.begin(), inventory.end(), healingPotion.itemName) != inventory.end(); 
```

其中 operator== 定义为：

```
bool operator==(const std::string& name) const
{
   return itemName == name;
} 
```

# .net - 如何在.Net中获取Windows文件系统路径的所有有效文件夹和文件字符列表

> ID：13349640
> 
> 赞同：1
> 
> 时间：2012-11-12T18:49:49.070
> 
> 标签：.net, windows, file-io, character

`System.IO.Path.GetInvalidPathChars()`给出无效字符列表。

但我需要列出所有有效字符。

想到的第一个简单的想法是从 0 迭代到 255 并排除无效字符，但它只会给出有效字符吗？还有 Unicode 呢？我应该从 0 迭代到 65535 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:07:48.930

AFAIK .NET 中没有任何东西可以获取此信息。

您可以查看以下微软页面：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx)

相关摘录：

```
Use any character in the current code page for a name, including Unicode characters and characters
in the extended character set (128–255), except for the following:

    The following reserved characters:

        < (less than)  
        > (greater than)
        : (colon)
        " (double quote)
        / (forward slash)
        \ (backslash)
        | (vertical bar or pipe)
        ? (question mark)
        * (asterisk)

    Integer value zero, sometimes referred to as the ASCII NUL character.

    Characters whose integer representations are in the range from 1 through 31,
    except for alternate data streams where these characters are allowed.

    Any other character that the target file system does not allow. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T09:46:39.407

这个怎么样：

```
 private static IEnumerable<char> GetValidFileNameChars()
    {
        var invalidChars = new List<char>(System.IO.Path.GetInvalidFileNameChars());
        var allChars = new List<char>();
        for (var i = 0; i < 255; i++)
        {
            allChars.Add((char) i);
        }

        var validChars = allChars.AsEnumerable().Except(invalidChars.AsEnumerable());
        return validChars;
    } 
```

或者，您可以从 0 迭代到 65535 ( `char.MinValue`to `char.MaxValue`)。

# ios - 带有 Storyboard 的 iOS 应用程序因 *'NSInternalInconsistencyException' 而崩溃，原因：'NIB 数据无效。'

> ID：13349642
> 
> 赞同：4
> 
> 时间：2012-11-12T18:49:55.493
> 
> 标签：ios, ios5, ios6, uistoryboard, xcode-storyboard

我们有一个使用 iOS 6 sdk（可在 iOS 5 上部署）使用 Storyboards 构建的应用程序，它在 iOS 5（仅）中崩溃并出现以下错误：

[myApp] ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“NIB 数据无效。”

有问题的场景是 UITableViewController 的子类，它包含一个 UITableView 和一个添加的 UITextView 属性。

我不知道什么是无效的，或者为什么它在 iOS 6 中运行良好。

有任何想法吗？

PS：我看到一个关于笔尖和创建自定义单元格的问题似乎很相似，建议关闭自动布局，但是这个应用程序使用故事板，有静态单元格，并且自动布局已经关闭。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T19:01:59.680

确保您没有为该视图启用“使用自动布局”。在 ios 6 之前的版本上运行时会抛出该错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T03:39:42.607

我建议以下清单

1.  确保未勾选自动布局复选框
2.  在 IB 中，转到 File Inspector > Document Versioning > Deployment 并确保它是 iOS 5.1 或更低版本，并且 > Development 确保它是以前版本的 XCode (XCode 4.5)
3.  将文件类型从 [Default - Interface Builder Cocoa Touch XIB] 更改为任何其他 C 源代码或其他内容，然后转到其他文件并返回并更改回 [Default - Interface Builder Cocoa Touch XIB]

第三个清单已经救了我很多次。AAPL 真的有非常蹩脚和错误的开发工具

# javascript - javascript中数组的意外令牌非法

> ID：13349649
> 
> 赞同：0
> 
> 时间：2012-11-12T18:50:21.860
> 
> 标签：javascript

```
var list =["<script></script>", "A", "B", "C"] 
```

我在这里遇到了意外的令牌非法错误。说，如果我确实希望包含脚本标签，但只是纯文本，我该如何格式化列表。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T18:53:03.180

如果您使用的是内联脚本¹，则将`</script>`在数组构造函数的中间终止脚本元素（所有 HTML 在元素中的文本节点传递给 JS 引擎之前解析，`</script>`对于在内部没有特殊处理JS 字符串文字）。

逃脱`/`：

```
var list =["<script><\/script>", "A", "B", "C"] 
```

您还可以将脚本移动到外部文件`src`中。

1.  即`<script>`直接在其内部带有 JS 的元素，而不是带有`src`属性或固有事件属性（如`onclick`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T18:52:52.167

用。。。来代替

```
var list =["<script></"+"script>", "A", "B", "C"] 
```

`"</script>"`结束了您拥有脚本的脚本元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T18:53:16.290

需要转义`</script>"` 标签

```
<\/script>"

var list =["<script><\/script>", "A", "B", "C"]; 
```

否则，它倾向于将其视为脚本标签的结尾..

# azure - 有没有办法在 azure 上安装 seotoaster CMS？

> ID：13349655
> 
> 赞同：1
> 
> 时间：2012-11-12T18:51:00.943
> 
> 标签：azure

有关如何将 seotoaster 安装到 Windows azure 的任何信息？

# gmail - 创建 Gmail 小工具的过程

> ID：13349658
> 
> 赞同：0
> 
> 时间：2012-11-12T18:51:30.797
> 
> 标签：gmail, google-gadget, gmail-contextual-gadgets

我正在尝试为我的域应用程序的电子邮件创建一个上下文小工具。搜索了很多程序，并按照谷歌发布的文件进行操作。

完成以下步骤：

*   为小工具创建清单。
*   创建小工具 XML 并上传到公共服务器。与小工具链接的清单。
*   验证清单并部署应用程序。

我可以在顶部导航栏中看到该应用程序，但它不是由邮件触发的。我尝试了 Hello World 示例等等，但未能运行小工具。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:40:29.230

您确定您的测试邮件会触发该小工具吗？提供的 hello world-example 区分大小写，因此“Hello World”将触发小工具，但“hello world”不会。

# c++ - 在 DWARF 信息中，DW_OP 寄存器的确切含义是什么？

> ID：13349665
> 
> 赞同：3
> 
> 时间：2012-11-12T18:51:55.733
> 
> 标签：c++, c, debugging, stack, dwarf

我正在尝试解析`DWARF`信息，然后使用该信息使用 pin 工具从程序中获取局部变量。这有点像在类固醇上使用`pin`as `GDB`。但是，我很难理解它们对局部变量和分配的寄存器的含义。

例如，

```
<2>< 1214>  DW_TAG_variable
    DW_AT_name                  mts
    DW_AT_decl_line             69
    DW_AT_type                  <90>
    DW_AT_location              DW_OP_breg4+44 
```

我知道，为了从变量 mts 中获取数据，我必须在某个寄存器中添加 44，我的问题是我不知道他们在谈论哪个寄存器。我该如何解释这个？我在网上找不到任何东西。

另一个例子是`DW_OP_fbreg`，`DW_OP_breg5`等等。

`x86`任何人都知道他们在上下文中谈论哪些寄存器？他们在谈论ebp还是esp？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T19:08:41.100

这是一个象征性的寄存器名称。请参阅[WineHQ](http://www.winehq.org/)`xxx_map_dwarf_register`源代码中的方法：

*   [i386](http://source.winehq.org/source/dlls/dbghelp/cpu_i386.c#L517)
*   [x86_64](http://source.winehq.org/source/dlls/dbghelp/cpu_x86_64.c#L739)
*   [火花](http://source.winehq.org/source/dlls/dbghelp/cpu_sparc.c#L55)
*   [手臂](http://source.winehq.org/source/dlls/dbghelp/cpu_arm.c#L160)

例如，`DW_OP_breg4`在`ESP`i386 上。

如果您还没有这样做，请参阅以下内容。

*   [http://source.winehq.org/source/dlls/dbghelp/dwarf.c](http://source.winehq.org/source/dlls/dbghelp/dwarf.c)
*   [http://www.dwarfstd.org/doc/040408.1.html](http://www.dwarfstd.org/doc/040408.1.html)

# javascript - 使正文背景图像充当链接

> ID：13349677
> 
> 赞同：1
> 
> 时间：2012-11-12T18:52:40.477
> 
> 标签：javascript, html, css

我在网上阅读了很多东西，但我还没有找到让它工作的方法..

我想要的是：

我有一个正文背景图片，我被要求将其作为广告链接。问题是无论我尝试什么都会使整个页面成为链接，而我只希望网页的背景作为链接。有可能，通过html和css吗？甚至使用javascript？任何解决方案都被接受......我被卡住了......提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T18:56:35.270

您不能将背景图像作为链接。您可以使用 JS 来捕捉身体上的所有点击，但不能捕捉到它的一个孩子

```
// This is not cross browser, that would be a separate question
document.body.onclick = function(e) {
  if (e.target === document.body) {
      window.location = "link.html"
  }
} 
```

您可以将 jQuery 用于跨浏览器版本

```
$('body').click(function(e){
    if (e.target === this) {
        window.location = "link.html"
    }
}); 
```

如果你想给背景光标外观，你可以应用下面的 CSS

```
body {
   background-image: url(http://www.blutest.com/sites/default/files/butterfly2_large_0.jpg);
   cursor: pointer;
}

body, html {
   width: 100%;
   height: 100%;
}

body * {
  cursor: default;
}
​ 
```

[在此处](http://jsfiddle.net/BcqBB/)查看实际操作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T18:56:57.057

使用 jQuery，您可以检测事件是否直接在主体上：

```
$('body').on('click', function(e) {
    if( e.target != this ) return;
    window.location = 'http://google.com';
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-22T08:56:15.033

不。

这是一种非常烦人且普遍讨厌的做法。用户应该能够单击“白色”（*）而不会产生令人惊讶的效果。

实际上，我在搜索阻止这种讨厌的“人类利用”的方法时发现了您的问题，**我发誓永远抵制任何以这种方式做广告的供应商**。

(*) 当然，“白色”的隐喻概念包括主布局之外的任何区域（如果侧边栏比主列短，则在侧边栏内容下方），无论该区域是白色、纯色还是有背景图片。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T18:57:30.683

不，这里在 body dvision 中保留一个页面划分

将 onclick 添加到正文和 onclick 到页面，

在页面中点击添加`event.stopPropagation()`

# opencv - cvCaptureFromCAM() / cvQueryFrame()：禁用自动图像校正？

> ID：13349678
> 
> 赞同：4
> 
> 时间：2012-11-12T18:52:41.497
> 
> 标签：opencv, camera, video-capture, image-capture

我正在使用上面提到的两个 OpenCV 函数从我的网络摄像头中检索帧。没有设置其他属性，只是使用默认参数运行。

在循环读取帧时，我可以看到图像发生变化，亮度和对比度似乎是自动调整的。这绝对看起来像是 OpenCV 的操作，因为摄像头捕捉到的图像并没有变化，而且一直亮着。

那么如何禁用这种自动更正呢？我找不到似乎能够完成这项工作的房产。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T21:18:34.360

您应该尝试使用以下三个参数：

> CV_CAP_PROP_BRIGHTNESS 图像亮度（仅适用于相机） CV_CAP_PROP_CONTRAST 图像对比度（仅适用于相机） CV_CAP_PROP_SATURATION 图像饱和度（仅适用于相机）

尝试将它们全部设置为 50。另外（如果没有帮助）尝试从[文档](http://opencv.willowgarage.com/documentation/cpp/reading_and_writing_images_and_video.html#cv-videocapture-set)中更改另一个相机捕获参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:12:20.347

为我自己回答这个问题：OpenCV 在这里是错误的或过时的。

*   似乎不可能以相机的原始分辨率获得图像，它们总是 640x480；也通过设置宽度和高度属性将其强制为其他值不会改变任何东西
*   似乎无法禁用自动图像校正，上面提到的属性似乎不起作用
*   亮度/对比度属性似乎效果不佳 - 或者至少我找不到任何好的值，或者自动图像校正总是覆盖它们

总结一下：我不建议使用 OpenCV 进行一些更增强的图像捕获。

# ios - UIViewcontroller 中的 AppDelegate 功能

> ID：13349685
> 
> 赞同：0
> 
> 时间：2012-11-12T18:52:57.270
> 
> 标签：ios, xcode

我有一个视图控制器，其中包含实现 Facebook 窗口的代码。问题是要运行代码，我需要这个 url：

```
- (BOOL)application:(UIApplication *)application
 openURL:(NSURL *)url
 sourceApplication:(NSString *)sourceApplication
annotation:(id)annotation {
// attempt to extract a token from the url
 self.openedURL = url;
// attempt to extract a token from the url
 return [FBSession.activeSession handleOpenURL:url];       
 } 
```

...据我所知，它只能在应用程序委托中运行，但我需要它来获取 url。如果我只是将它添加到委托中，它不会被调用，而且我不知道它何时被调用以及如何调用。有什么建议么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:13:34.720

如果您需要在另一个类中使用应用程序委托的属性，您可以在视图控制器类中使用以下代码（假设您的应用程序委托类的名称是 AppDelegate）：

```
NSURL *theURL = [(AppDelegate *)[[UIApplication shardApplication]delegate] openedURL]; 
```

我在这里假设您想将此 URL 传递给您的控制器。您还需要将 AppDelegate.h 文件导入控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:15:28.257

如果您需要查看 url，您可以使用全局变量从该函数存储它并在以后使用它，让我们假设您有一个名为 appData 的单例声明一个静态变量

.h 文件

```
+(appData*)sharedAppData;
@property (nonatomic,retain) nsurl * myUrl; 
```

在 .m 文件中

```
static appData* = nil;

 initFunction {

      if(! appData) {  appData = [[appData alloc] init];}
  }

 +(appData*)sharedAppData{
  return appData;
  } 
```

在 init 函数中初始化此对象，因此在系统中的任何位置，您都可以通过以下方式访问此数据

appData * data = [appData sharedData]; data.myurl =.... nslog(@"我的 url %@",data.url);

# javascript - 如果我的应用程序中有条件语句，我该如何重构这些 javascript？

> ID：13349689
> 
> 赞同：0
> 
> 时间：2012-11-12T18:53:02.790
> 
> 标签：javascript, refactoring, conditional-statements

我正在构建一个使用两个滑块的计算器，如下所示：

![在此处输入图像描述](../Images/487e1d23a2ec9ea472990a3c33d1246a.png)

我有一系列存储在这样的对象中的 CPU 和 RAM 数据：

```
var CloudPlans = {
   small: {

        id: 'small',

        from: {
            cpu: 1,
            ram: 1
        },

        to: {
            cpu: 2,
            ram: 2
        },

        price: {
            linux: 3490,
            windows: 4190
        }
    },

    medium:  {

        id: 'medium',

        from: {
            cpu: 2,
            ram: 2
        },

        to: {
            cpu: 4,
            ram: 4
        },

        price: {
            linux: 5600,
            windows: 6300
        }

    },

    large: {

        id: 'large',

        from: {
            cpu: 4,
            ram: 4
        },

        to: {
            cpu: 6,
            ram: 8
        },

        price: {
            linux: 9500,
            windows: 10200
        }

    },

           [...more configs here]

} 
```

现在根据滑块的位置和值，我必须检查用户选择了哪个计划，然后计算组件的价格。这是检查价格范围的函数：

```
 checkPlaninRange: function(cpuVal, ramVal) {
        if(cpuVal >= CloudPlan.small.from.cpu && cpuVal <= CloudPlan.small.to.cpu ) {
            return "small";
        } else if (ramVal >= CloudPlan.small.from.cpu && ramVal <= CloudPlan.small.to.cpu) {
            return "small";
        }
    } 
```

如您所见，我将处理几乎无穷无尽的条件列表以返回所选计划。除了条件或案例语句之外，有什么方法可以简化基于代码的这些计划配置的存储或选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T18:56:49.577

改用数组：

```
var CloudPlans = [
   {
        id: 'small',
        from: {
            cpu: 1,
            ram: 1
        },
        to: {
            cpu: 2,
            ram: 2
        },
        price: {
            linux: 3490,
            windows: 4190
        }
    },

    {
        id: 'medium',
        from: {
            cpu: 2,
            ram: 2
        },
        to: {
            cpu: 4,
            ram: 4
        },
        price: {
            linux: 5600,
            windows: 6300
        }
    },
    {
        id: 'large',
        from: {
            cpu: 4,
            ram: 4
        },
        to: {
            cpu: 6,
            ram: 8
        },
        price: {
            linux: 9500,
            windows: 10200
        }
    },
           //[...more configs here]
} 
```

现在您可以简单地迭代`CloudPlans`：

```
for(int planIdx = 0; planIdx < CloudPlans.length; ++planIdx) {
    var plan = CloudPlan[planIdx];
    if(cpuVal >= plan.from.cpu && cpuVal <= plan.to.cpu  || 
       ramVal >= plan.from.ram && ramVal <= plan.to.ram) {
           return plan.id;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T20:41:06.843

好吧，回到这个问题，我想我会投入两分钱......

我会通过使用数组来稍微压缩您的数据存储，因此不再需要这些`min`值。

```
var CloudPlans = [
   {    id: 'small',
        maxcpu: 2,
        maxram: 2,
        price: {
            linux: 3490,
            windows: 4190
        }
    }, {id: 'medium',
        maxcpu: 4,
        maxram: 4,
        price: {
            linux: 5600,
            windows: 6300
        }
    }, {id: 'large',
        maxcpu: 6,
        maxram: 8,
        price: {
            linux: 9500,
            windows: 10200
        }
    }, 
    // etc
].reverse(); // reverse it so the highest plan is first 
```

注意`.reverse()`. 我们将从最高层进行比较。

* * *

然后使用reduce函数：

```
checkPlaninRange: function(cpuVal, ramVal) {
    return CloudPlans.reduce(function(plan, compare) {
        return cpuVal <= compare.maxcpu && 
               ramVal <= compare.maxram    ? compare : plan;
    }).id; // remove .id to return the entire object
} 
```

* * *

或者，如果您想要更高效的东西，`for`请以相同的方式使用循环：

```
checkPlaninRange: function(cpuVal, ramVal) {
    var plan = CloudPlans[0];
    for (var i = 1; i < CloudPlans.length; i++) {
        if (cpuVal <= CloudPlans[i].maxcpu && 
            ramVal <= CloudPlans[i].maxram    ) {
            plan = CloudPlans[i];
        } else break;
    }
    return plan.id; // remove .id to return the entire object
} 
```

不是很干净，但它可以让你及早打破循环。

* * *

这些很容易通过额外的类似比较来扩展。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T18:56:24.597

您可以使用给定的 val 遍历配置。就像是

```
var planFrom, planTo, cpuInRange, ramInRange;

for (var plan in CloudPlans) {
   planFrom = plan.from;
   planTo = plan.to;
   cpuInRange = cpuVal >= planFrom.cpu && cpuVal < planTo.cpu;  
   ramInRange = ramVal >= plamFrom.ram...; 
   if (cpuInRange || ramInRange) {
      return plan.id; 
   } 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T19:02:24.733

您可以从中制作更通用的功能：

```
function check(plan, values) {
    for (var prop in values)
        if (plan.from[prop] <= values[prop] && plan.to[prop] >= values[prop])
             return true; // if only one property is met
    return false;
}
// yet I guess this is what you want:
function check(plan, values) {
    for (var prop in values)
        if (plan.from[prop] > values[prop] || plan.to[prop] < values[prop])
             return false; // if only one property is not met
    return true; // if all properties are met
} 
```

现在您的`checkPlaninRange`方法可能如下所示：

```
checkSmallRange: function(cpuVal, ramVal) {
    if ( check(CloudPlan.small, {cpu:cpuVal, ram:ramVal}) )
        return "small";
} 
```

当然，您也可以使用以下方式循环您的云计划：

```
getPossiblePlans: function(cpuVal, ramVal) {
    var plans = []
    for (var id in CloudPlans)
        if ( check(CloudPlans[id], {cpu:cpuVal, ram:ramVal}) )
            plans.push(id);
    return plans;
} 
```

正如@Tomasz Nurkiewicz 提到的，具有定义循环顺序的数组在这里会更好。作为`CloudPlans`一个对象，枚举顺序是未定义的（依赖于实现），因此当它们的范围不明确时，它可能会返回任何计划。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-12T19:14:10.570

您可以做的一件简单的事情是（动态地，预先）创建其值代表各自范围的数组：

```
var cpu = ["small", "small", "medium", "medium", "medium", "large"];
var ram = ["small", "medium", "medium", "medium", "large"]; 
```

你会像这样使用它：

```
function checkPlaninRange(cpuVal, ramVal) {
    return cpu[Math.floor(cpuVal)] || "large";
}

checkPlaninRange(4.2); // "medium" 
```

# wpf - 用于构建 Windows 应用程序的长期客户端 API 策略？

> ID：13349694
> 
> 赞同：1
> 
> 时间：2012-11-12T18:53:19.143
> 
> 标签：wpf, silverlight, html, windows-runtime, rich-client-platform

我开始构建一个新的 Windows 应用程序，它需要一个相当丰富的客户端界面，但我不知道我应该使用什么客户端 API（WPF、Silverlight、WinRT、HTML5 等？）。实际上，我很不安，因为 MS 提供的指导很少能帮助人们做出这个决定。

不同客户端 API 的 MS 支持策略是什么？每个人的寿命是多少？我不想在当前已知且受支持的 API（WinForms 或 WPF）中编写完整的客户端应用程序，只是为了在两年内获得 MS 对它的拉取支持，并被迫重新编写它。但我真的不能在 WinRT 中编写它，因为大规模企业部署至少要 2 年才能到位。那么我是否被迫采用基于 Web 的方法，例如 Silverlight？它的支持/长寿故事是什么？我改用 HTML5 吗？如果我走那条路，使用 Microsoft 堆栈而不是仅仅使用开源堆栈有什么好处？

感觉就像我在这里总共遇到了 22 个问题，我无法从微软那里找到任何好的指导。从事情的声音来看，在 WPF 中编写软件是愚蠢的，因为它被删除（很快？），但我不能在 WinRT 中编写它，因为公司不会在几年内部署它。这整件事对我来说完全是疯狂的。

想法或想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:40:50.370

考虑到您的经验，以及您所说的“Windows 应用程序”（不是 Web 应用程序）这一事实，我肯定会选择 WPF。请记住，无论使用一组不同的底层 API，WinRT 仍然保留了 WPF 的核心概念：XAML、绑定、样式、触发器、数据模板等。因此，虽然您确实无法将代码从 WPF 复制粘贴到 WinRT 并按 F5，但在这些技术（即与视图无关的 ViewModel）与 HTML、Winforms 和其他框架之间有大量工作可以兼容有完全不同的做事方式，需要不同的心态来工作。

至于微软会做什么。我不会太担心，因为有证据表明，即使是像 VB6 这样的旧技术在当前版本的操作系统中仍然保持“可运行”，我认为没有必要即使 Metro 成为标准，也要在 2 年内重写整个应用程序。Metro 无法取代桌面传统应用程序，而后者仍被证明是数据密集型应用程序的最佳选择。

而且，如果真的到了我们所有人都真正被推入 WinRT 的时刻，那么对于那些已经使用 MVVM 和 XAML 编写 SL/WPF 应用程序的人来说，这将比那些使用 HTML 或 winforms 的人容易得多。

无论您最终选择什么，请确保尽可能将应用程序的功能与 UI 分开。当需要更改 UI 框架时，这肯定会变得容易得多。

这只是我个人的看法，我也想听听其他人对这个问题的看法。

编辑：另一个非常重要的方面是，如果你真的需要制作一个动画密集的 UI，或者远离传统的战舰灰色 UI，你最终会因为 winforms 或 HTML/ Javascript 地狱，所有浏览器都以不同的方式呈现事物，更不用说这些技术所需的代码量来实现在 WPF / SL / WinRT 中需要 3 行 XAML 的东西。

# dapper - 如何在 MultiMap 查询中指定列而不是使用 *（星号）

> ID：13349697
> 
> 赞同：0
> 
> 时间：2012-11-12T18:53:24.917
> 
> 标签：dapper

有时我不想完全填充我的实体（某些属性并不总是必需的），但是，如何在 MultiMap 查询中指定表列？

只是一个例子：

餐桌客户 ID (PK) 姓名 地址 CityID（FK 到餐桌城市，列 ID） 电子邮件

表 城市 ID (PK) 名称 状态

我需要使用这样的查询：

```
 SELECT Costumer.ID, Costumer.Name, Costumer.Email, City.ID AS CityID, City.Name AS CityName
    FROM Costumer INNER JOIN City ON Costumer.CityID = City.ID 
```

我的问题是：如何在没有名称冲突的情况下指定连接列并且让 dapper 识别列和实体属性之间的映射？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T11:47:17.320

随着评论中的澄清，它*应该*像这样工作：

```
var custs = conn.Query<Customer,City,Customer>(sql,
       (cust,city) => { cust.City = city; return cust; },
       splitOn: "ID,CityID").ToList(); 
```

# vim - .vimrc 是什么格式的文件？

> ID：13349699
> 
> 赞同：2
> 
> 时间：2012-11-12T18:53:34.170
> 
> 标签：vim

.vimrc 是 vim 的配置文件，但我有疑问..

是什么样的文件？它里面的语言是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T18:55:44.343

它只是文本文件中的 Vim 命令。

[http://vimdoc.sourceforge.net/htmldoc/starting.html#initialization](http://vimdoc.sourceforge.net/htmldoc/starting.html#initialization)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T18:56:46.743

请参考文章：http: [//vim.wikia.com/wiki/Open_vimrc_file](http://vim.wikia.com/wiki/Open_vimrc_file)

> vimrc 文件包含可选的运行时配置设置，用于在 Vim 启动时对其进行初始化。

# android - 在 Google Play 中更新现有的 Android 应用程序

> ID：13349704
> 
> 赞同：1
> 
> 时间：2012-11-12T18:53:47.863
> 
> 标签：android, google-play

我已经阅读了谷歌播放文档，但我没有看到它真正解释了应用程序更新过程的地方。停用旧应用程序并激活新应用程序后，它是否对客户有效？我的印象是激活后有一个发布选项，但除了这样做之外我没有真正的方法知道。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:12:19.483

在您的应用程序上激活您的 apk 并单击右上角的发布后，您的应用程序就会对客户生效。请注意，这仅适用于您的应用已发布的任何后续更新的首次发布

要发布更新，请单击`APK files`右上角的 。然后在您现有的 apk 详细信息下方，您将看到一个上传新 apk 的按钮。单击此按钮并上传您的新 apk 文件。但是，您的用户还不会收到他们的更新，您首先必须单击`Activate`新的 apk 文件，该文件将显示在新 apk 描述的右侧。

完成此操作后，更新将发送给您的用户，但 Play 商店通常需要几个小时来处理您的更新并将其发送给您的用户

请参阅此处 - [Android 开发者控制台应用程序更新](https://stackoverflow.com/questions/6820688/android-developer-console-app-update)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:00:18.983

你上传你的新的`apk`，保存它，激活它。这将告诉您旧的将被替换。并发布。平均需要一小时才能变得可见。
有关详细信息，请参阅[更新您的应用程序](https://support.google.com/googleplay/android-developer/answer/113476?hl=en)站点。

# orchardcms - 如何在 Orchard CMS 自定义模块中添加 MVC 视图

> ID：13349707
> 
> 赞同：0
> 
> 时间：2012-11-12T18:53:56.907
> 
> 标签：orchardcms

当我创建包含我自己的控制器和视图的自定义模块时，代码生成创建的默认项目会创建一个类似于 MVC 的项目，但 Visual Studio 无法将其识别为 MVC 项目，因此它不提供正常的“添加视图” ” 工具，就像它在“真正的”MVC 项目中所做的那样。

我已经看到有关在项目文件中更改项目类型 GUID 的帖子，但我希望有一种替代方法。我还看到了演示者使用 Resharper 的教程。我目前不是 Resharper 用户，所以我也没有准备好采用这种方法。

是否有可用的项目模板？我可以利用任何代码生成模块功能吗？我主要想了解人们现在是如何做到这一点的，以使开发工作流程更快。

谢谢，布赖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T22:23:27.037

是的，这就是代码生成工具所做的，这样我们就可以将 Orchard 需求减少到 ASP.NET 4。现在模块只是一个项目和一个清单，位于 Modules 的子文件夹中。命令行没有什么神奇之处，从 VS 创建项目非常好。或者您可以修改代码生成命令，使其在创建时添加项目类型 guid。这两种选择都是有效的，您只需要注意，如果有其他用户而不是您自己，您可能会阻止他们在 VS 中打开模块，除非他们先安装 MVC 工具。这不应该是一个大问题，而只是需要注意的事情。

# slice - 石墨/碳/谷神星节点重叠

> ID：13349708
> 
> 赞同：1
> 
> 时间：2012-11-12T18:53:58.940
> 
> 标签：slice, overlap, graphite, graphite-carbon

我正在使用 Carbon 和 Ceres 作为存储方法进行 Graphite 监控。我在纠正不良数据时遇到了一些问题。看来（由于各种问题）我最终得到了重叠的文件。也就是说，由于 Carbon / Ceres 将数据存储为 timestamp@interval.slice，我可以拥有两个或多个具有重叠时间范围的文件。

有两种重叠：

```
File A:  +------------+        orig file
File B:      +-----+           subset
File C:          +---------+   overlap 
```

这会导致问题，因为现有的可用工具（ceres-maintenance defrag 和 rollup）无法处理这些重叠。相反，他们跳过目录并继续前进。这显然是个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T18:53:58.940

我创建了一个脚本来解决这个问题，如下所示：

1.  对于子集，只需删除子集文件。

2.  对于重叠，在下一个文件开始的位置对原始文件使用文件系统“截断”。虽然可以切断重叠文件的开头并正确重命名，但我认为这充满了危险。

我发现可以通过两种方式做到这一点：

1.  遍历目录并遍历文件，边走边修复，找到文件子集，删除它们；

2.  在继续之前，遍历目录并解决目录中的所有问题。这是 BY FAR 更快的方法，因为 dir walk 非常耗时。

代码：

```
#!/usr/bin/env python2.6
################################################################################

import io
import os
import time
import sys
import string
import logging
import unittest
import datetime
import random
import zmq
import json
import socket
import traceback
import signal
import select
import simplejson
import cPickle as pickle
import re
import shutil
import collections
from pymongo import Connection
from optparse import OptionParser
from pprint import pprint, pformat

################################################################################

class SliceFile(object):
    def __init__(self, fname):
        self.name       = fname
        basename        = fname.split('/')[-1]
        fnArray         = basename.split('@')
        self.timeStart  = int(fnArray[0])
        self.freq       = int(fnArray[1].split('.')[0])
        self.size       = None
        self.numPoints  = None
        self.timeEnd    = None
        self.deleted    = False

    def __repr__(self):
        out = "Name: %s, tstart=%s tEnd=%s, freq=%s, size=%s, npoints=%s." % (
            self.name, self.timeStart, self.timeEnd, self.freq, self.size, self.numPoints)
        return out

    def setVars(self):
        self.size       = os.path.getsize(self.name)
        self.numPoints  = int(self.size / 8)
        self.timeEnd    = self.timeStart + (self.numPoints * self.freq)

################################################################################

class CeresOverlapFixup(object):

    def __del__(self):
        import datetime
        self.writeLog("Ending at %s" % (str(datetime.datetime.today())))
        self.LOGFILE.flush()
        self.LOGFILE.close()

    def __init__(self):
        self.verbose            = False
        self.debug              = False
        self.LOGFILE            = open("ceresOverlapFixup.log", "a")
        self.badFilesList       = set()
        self.truncated          = 0
        self.subsets            = 0
        self.dirsExamined       = 0            
        self.lastStatusTime     = 0

    def getOptionParser(self):
        return OptionParser()

    def getOptions(self):
        parser = self.getOptionParser()
        parser.add_option("-d", "--debug",      action="store_true",                 dest="debug",   default=False, help="debug mode for this program, writes debug messages to logfile." )
        parser.add_option("-v", "--verbose",    action="store_true",                 dest="verbose", default=False, help="verbose mode for this program, prints a lot to stdout." )
        parser.add_option("-b", "--basedir",    action="store",      type="string",  dest="basedir", default=None,  help="base directory location to start converting." )
        (options, args)     = parser.parse_args()
        self.debug          = options.debug
        self.verbose        = options.verbose
        self.basedir        = options.basedir
        assert self.basedir, "must provide base directory."

    # Examples:
    # ./updateOperations/1346805360@60.slice
    # ./updateOperations/1349556660@60.slice
    # ./updateOperations/1346798040@60.slice

    def getFileData(self, inFilename):
        ret = SliceFile(inFilename)
        ret.setVars()
        return ret

    def removeFile(self, inFilename):
        os.remove(inFilename)
        #self.writeLog("removing file: %s" % (inFilename))
        self.subsets += 1

    def truncateFile(self, fname, newSize):
        if self.verbose:
            self.writeLog("Truncating file, name=%s, newsize=%s" % (pformat(fname), pformat(newSize)))
        IFD = None
        try:
            IFD = os.open(fname, os.O_RDWR|os.O_CREAT)
            os.ftruncate(IFD, newSize)
            os.close(IFD)
            self.truncated += 1
        except:
            self.writeLog("Exception during truncate: %s" % (traceback.format_exc()))
        try:
            os.close(IFD)
        except:
            pass
        return

    def printStatus(self):
        now = self.getNowTime()
        if ((now - self.lastStatusTime) > 10):
            self.writeLog("Status: time=%d, Walked %s dirs, subsetFilesRemoved=%s, truncated %s files." % (now, self.dirsExamined, self.subsets, self.truncated))
            self.lastStatusTime = now

    def fixupThisDir(self, inPath, inFiles):

        # self.writeLog("Fixing files in dir: %s" % (inPath))
        if not '.ceres-node' in inFiles:
            # self.writeLog("--> Not a slice directory, skipping.")
            return

        self.dirsExamined += 1            

        sortedFiles = sorted(inFiles)
        sortedFiles = [x for x in sortedFiles if ((x != '.ceres-node') and (x.count('@') > 0)) ]
        lastFile    = None
        fileObjList = []
        for thisFile in sortedFiles:
            wholeFilename = os.path.join(inPath, thisFile)
            try:
                curFile = self.getFileData(wholeFilename)
                fileObjList.append(curFile)
            except:
                self.badFilesList.add(wholeFilename)
                self.writeLog("ERROR: file %s, %s" % (wholeFilename, traceback.format_exc()))

        # name is timeStart, really.
        fileObjList = sorted(fileObjList, key=lambda thisObj: thisObj.name)

        while fileObjList:

            self.printStatus()

            changes = False
            firstFile = fileObjList[0]
            removedFiles = []
            for curFile in fileObjList[1:]:
                if (curFile.timeEnd <= firstFile.timeEnd):
                    # have subset file. elim.
                    self.removeFile(curFile.name)
                    removedFiles.append(curFile.name)
                    self.subsets += 1
                    changes = True
                    if self.verbose:
                        self.writeLog("Subset file situation.  First=%s, overlap=%s" % (firstFile, curFile))
            fileObjList = [x for x in fileObjList if x.name not in removedFiles]
            if (len(fileObjList) < 2):
                break
            secondFile = fileObjList[1]

            # LT is right.  FirstFile's timeEnd is always the first open time after first is done.
            # so, first starts@100, len=2, end=102, positions used=100,101\. second start@102 == OK.
            if (secondFile.timeStart < firstFile.timeEnd):
                # truncate first file.
                # file_A (last):    +---------+
                # file_B (curr):         +----------+ 
                # solve by truncating previous file at startpoint of current file.
                newLenFile_A_seconds = int(secondFile.timeStart - firstFile.timeStart)
                newFile_A_datapoints = int(newLenFile_A_seconds / firstFile.freq)
                newFile_A_bytes      = int(newFile_A_datapoints) * 8
                if (not newFile_A_bytes):
                    fileObjList = fileObjList[1:]
                    continue
                assert newFile_A_bytes, "Must have size.  newLenFile_A_seconds=%s, newFile_A_datapoints=%s, newFile_A_bytes=%s." % (newLenFile_A_seconds, newFile_A_datapoints, newFile_A_bytes)
                self.truncateFile(firstFile.name, newFile_A_bytes)
                if self.verbose:
                    self.writeLog("Truncate situation.  First=%s, overlap=%s" % (firstFile, secondFile))
                self.truncated += 1
                fileObjList = fileObjList[1:]
                changes = True

            if not changes:
                fileObjList = fileObjList[1:]

    def getNowTime(self):
        return time.time()

    def walkDirStructure(self):

        startTime           = self.getNowTime()
        self.lastStatusTime = startTime
        updateStatsDict     = {}
        self.okayFiles      = 0
        emptyFiles          = 0 

        for (thisPath, theseDirs, theseFiles) in os.walk(self.basedir):
            self.printStatus()
            self.fixupThisDir(thisPath, theseFiles)
            self.dirsExamined += 1

        endTime = time.time()
        # time.sleep(11)
        self.printStatus()
        self.writeLog( "now = %s, started at %s, elapsed time = %s seconds." % (startTime, endTime, endTime - startTime))
        self.writeLog( "Done.")

    def writeLog(self, instring):
        print instring
        print >> self.LOGFILE, instring
        self.LOGFILE.flush()

    def main(self):
        self.getOptions()
        self.walkDirStructure() 
```

# c++ - 搞砸了 OpenGL 深度缓冲区？

> ID：13349714
> 
> 赞同：0
> 
> 时间：2012-11-12T18:54:33.853
> 
> 标签：c++, opengl-es, blackberry-playbook

我的代码目前正在发生一些相当奇怪的事情。我在 BlackBerry Playbook 上运行它，它是 OpenGL ES 1.1

编辑4：我删除了我发布的所有内容以简化我的问题。

我将代码简化为绘制两个重叠的三角形。这是包含坐标的数组以及包含颜色的数组：

```
GLfloat vertices[] =
{
          // front
           175.0f, 200.0f, -24.0f,
           225.0f, 200.0f, -24.0f,
           225.0f, 250.0f, -24.0f,

          // back
           200.0f, 200.0f, -25.0f,
           250.0f, 200.0f, -25.0f,
           250.0f, 250.0f, -25.0f
};

static const GLfloat colors[] =
{
       /* front  */  1.0f,0.0f,0.0f,1.0f,1.0f,0.0f,0.0f,1.0f,1.0f,0.0f,0.0f,1.0f, //Red
       /* back  */  0.0f,1.0f,0.0f,1.0f,0.0f,1.0f,0.0f,1.0f,0.0f,1.0f,0.0f,1.0f //Green
}; 
```

请注意，我的坐标在 x 方向上是 0 到 1024，在 y 方向上是 0 到 600，在 z 方向上是 0 到 -10000。

这是我的设置代码，它反映了这一点：

```
 glClearDepthf(1.0f);
    glClearColor(1.0f,1.0f,1.0f,1.0f);
    glEnable(GL_DEPTH_TEST);
    glDepthMask(GL_TRUE);
    glShadeModel(GL_SMOOTH);

    glViewport(0, 0, surface_width, surface_height);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();

    glOrthof(0, surface_width, 0, surface_height, 0, 10000);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    glEnable(GL_DEPTH_TEST);
    glDepthMask(GL_TRUE); 
```

我在两个地方启用了深度，因为我试图排除在选择某种矩阵模式时应该使用它的可能性。

最后这里是我的渲染代码：

```
void render()
{
    //Typical render pass
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glEnableClientState(GL_VERTEX_ARRAY);
    glVertexPointer(3, GL_FLOAT, 0, vertices);

    glEnableClientState(GL_COLOR_ARRAY);
    glColorPointer(4, GL_FLOAT, 0, colors);

    glDrawArrays(GL_TRIANGLES, 0 , 6);

    glDisableClientState(GL_VERTEX_ARRAY);
    glDisableClientState(GL_COLOR_ARRAY);

    //Use utility code to update the screen
    bbutil_swap();
} 
```

问题是无论我做什么，绿色三角形总是覆盖在红色三角形上。以任何一种方式更改 z 值对完成的图像都没有影响。我无法弄清楚这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T06:02:00.197

我终于让它工作了。问题在于我使用的 EGL 设置代码。在 bbutil.c（在我的情况下为 .cpp）中有一些代码：

```
if(!eglChooseConfig(egl_disp, attrib_list, &egl_conf, 1, &num_configs)) {
        bbutil_terminate();
        return EXIT_FAILURE;
    } 
```

（这不是文件中的所有代码，而是重要的一点）

如果不支持给定的属性列表，这基本上会很奇怪。up 文件 attrib_list 中的上层设置如下：

```
EGLint attrib_list[]= { EGL_RED_SIZE,        8,
                        EGL_GREEN_SIZE,      8,
                        EGL_BLUE_SIZE,       8,
                        EGL_SURFACE_TYPE,    EGL_WINDOW_BIT,
                        EGL_RENDERABLE_TYPE, 0,
                        EGL_NONE}; 
```

没有指定深度缓冲区。现在，如果您查看 EGL 规范，它会说没有深度是默认值。宾果游戏，这就是问题所在。所以我只是修改它看起来像这样：

```
EGLint attrib_list[]= { EGL_RED_SIZE,        8,
                        EGL_GREEN_SIZE,      8,
                        EGL_BLUE_SIZE,       8,
                        EGL_SURFACE_TYPE,    EGL_WINDOW_BIT,
                        EGL_RENDERABLE_TYPE, 0,
                        EGL_DEPTH_SIZE, 24,
                        EGL_NONE}; 
```

注意 EGL_DEPTH_SIZE 和 24。这会将深度缓冲区设置为 24 位。在 PlayBook 上，32 会引发分段错误，尽管通常不支持 32。也许这会帮助那里的人试图弄清楚为什么提供的包含会导致我描述为我的问题的这个有趣的结果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T05:42:19.463

默认情况下，深度测试被禁用。您必须使用 glEnable(GL_DEPTH_TEST) 启用它。启用剔除时它起作用的原因是因为未绘制背面三角形，并且由于立方体是凸多面体，因此没有正面四边形与另一个正面四边形重叠。但是，如果您尝试渲染第二个立方体，您也会看到深度问题，除非您启用深度测试。

# android - 自动从 Android 和 IOS 发送短信

> ID：13349719
> 
> 赞同：1
> 
> 时间：2012-11-12T18:54:56.787
> 
> 标签：android, ios, sms

据我了解，这是可能的，但官方商店不允许此类应用程序。

应用程序应提前从用户那里获得权限，然后随机向手机联系人列表中的随机用户发送短信，无需进一步的用户交互。
我的问题是：

1）有可能吗？2）如果是，是不是官方商店会批准？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:08:00.863

1）在Android中这是可能的。如果我没记错的话，iOS 中没有发送短信的 API，无需通过股票短信应用程序。

2）它很粗略......如果它甚至可以在iOS中制作，Apple可能不会批准这种应用程序。在用户背后做事从来都不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T21:31:55.213

苹果绝对不会批准这种应用程序！

我已经尝试了 2 年多，甚至联系了 Apple - 没有批准！

iTunes 中曾经有一个应用程序（它是如何通过审查过程的——没人知道）苹果一知道这一点就被删除了。

除了批准问题之外，甚至没有官方方法可以做到这一点。

虽然有/曾经有一些对私人图书馆的直接调用，但使用这些会立即被识别（即使现在是自动的）。

如果您的应用程序允许，只需遵守 Apple 的规则——给用户一些背景信息，为什么他们需要再次明确地按下“发送”——否则你可能会得到一些不好的评论，因为这一事实肯定不是所有 iPhone 用户都知道的。

在Android中，这只是一个正常的用法`SmsManager.getDefault();`

# c - 如何创建单个结构语句来声明数组并初始化？

> ID：13349722
> 
> 赞同：0
> 
> 时间：2012-11-12T18:55:13.270
> 
> 标签：c

到目前为止，我有以下代码，我很确定我可以用多个语句进行显式初始化，但我想学习如何用一个语句来做。

```
#include <stdio.h>
#include <stdlib.h>
#define LUNCHES 5

int main(void)
{
    struct Food
    {
        char *n;  /* “n” attribute of food */
        int w, c; /* “w” and “c” attributes of food */
    }

    lunch[LUNCHES], 
    lunch[0] = {"apple pie", 4, 100}, 
    lunch[1] = {"salsa", 2, 80};
} 
```

我认为以下内容会起作用，但这是另一种说法。

```
 int main(void)
 {
     struct Food
     {
         char *n;  /* “n” attribute of food */
         int w, c; /* “w” and “c” attributes of food */
     }

     lunch[LUNCHES];
     lunch[0] = {"apple pie", 4, 100};
     lunch[1] = {"salsa", 2, 80}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T18:57:11.913

你快到了：

```
 = { [0] = {"apple pie", 4, 100}, [1] = {"salsa", 2, 80} } 
```

将是您的数组的初始化。

仅当您的编译器支持 C99 附带的“指定”初始化程序时。

除此以外

```
 = { {"apple pie", 4, 100}, {"salsa", 2, 80} } 
```

也会这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T18:57:42.380

尝试：

```
struct { ... } lunch[LUNCHES] = {{"apple pie", 4,100}, {"salsa",2,80}}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T18:57:46.000

你可以这样定义

```
int main(void)
{
    struct Food
    {
        char *n;                                                            /* “n” attribute of food */
        int w, c;                                                  /* “w” and “c” attributes of food */
    }lunch[LUNCHES] = { {"apple pie", 4, 100}, {"salsa", 2, 80}};
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T18:59:39.987

大概是这样的？

```
#include <stdio.h>
#include <stdlib.h>

#define LUNCHES 5

struct Food {
   char *n;   /* “n” attribute of food */
   int w, c;  /* “w” and “c” attributes of food */
} lunch[LUNCHES] = {
    {"apple pie", 4, 100}, 
    {"salsa", 2, 80}
};

int 
main(void)
{
  printf ("lunches[0].n= %s\n", lunches[0].n);
  return 0;
} 
```

# jquery - 邮政编码谷歌地图返回

> ID：13349724
> 
> 赞同：0
> 
> 时间：2012-11-12T18:55:27.597
> 
> 标签：jquery, ajax, jquery-ui, google-maps

我一直试图弄清楚这一点，以至于我确信它正盯着我的脸。

我正在使用 jquery 使用以下代码自动完成用户输入的地址：

```
 $(function() {
      $("#address").autocomplete({
      //This bit uses the geocoder to fetch address values
      source : function(request, response) {
      geocoder.geocode({'address' : request.term },

function(results, status) {
   response($.map(results, function(item) {
   return {
      label : item.formatted_address,
      value : item.formatted_address,
      latitude : item.geometry.location.lat(),
      longitude : item.geometry.location.lng(),
      streetNo : item.address_components[0].long_name,
      streetName : item.address_components[1].long_name,
      town : item.address_components[2].long_name,
      province : item.address_components[4].long_name,
             }
         }));
      })
  } 
```

我需要专门提取地址组件，即邮政编码。现在我正在使用数字，但根据输入的地址，这些字段可能正确也可能不正确。

我几乎有同样的问题这个家伙做了：

[谷歌地图地理编码器：返回 postal_code](https://stackoverflow.com/questions/8380511/google-maps-geocoder-return-postal-code)

该问题的答案是适当的，但是当我尝试循环时遇到的问题，或者除了提取信息之外的*任何*其他操作，它已经在此处完成，脚本失败了。

基于 jquery 自动完成它是谷歌查询的方式，我可以将“结果”分配给一个变量，然后以这种方式解析它以获得正确的类型名称吗？

到目前为止我尝试过的一切都失败了，通常导致脚本无法运行。

我在这里变得绝望，希望我的问题是连贯的！:P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T03:37:28.397

以下代码适用于我将邮政编码提取到`postal_code`：

```
$(function() {
  var geocoder = new google.maps.Geocoder();

  $("#address").autocomplete({
    //This bit uses the geocoder to fetch address values
    source : function(request, response) {
      geocoder.geocode({'address' : request.term },

      function(results, status) {
        response($.map(results, function(item) {
          var postalCode = "";
          if (item.address_components) {
            for (var i in item.address_components) {
              if (typeof(item.address_components[i]) === "object" && item.address_components[i].types[0] == "postal_code") {
                postalCode = item.address_components[i].long_name;
              }
            }
          }

          return {
            label : item.formatted_address,
            value : item.formatted_address,
            latitude : item.geometry.location.lat(),
            longitude : item.geometry.location.lng(),
            streetNo : item.address_components[0].long_name,
            streetName : item.address_components[1].long_name,
            town : item.address_components[2].long_name,
            province : item.address_components[4].long_name,
            postal_code : postalCode
          }
        }));
      })
    }
  });
}); 
```

看到这个jsfiddle：http: [//jsfiddle.net/mccannf/uzvvq/3/](http://jsfiddle.net/mccannf/uzvvq/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T12:29:51.117

好的，伙计们，所以我设法弄清楚了。在这里发布答案，以防其他人被困在这件事上。

它的编码方式允许程序员通过使用在stackoverflow上的另一个答案中编写的函数来*准确*提取他们正在寻找的类型：

[提取地址组件的更有效方法](https://stackoverflow.com/questions/8313876/more-efficient-way-to-extract-address-components)

我使用了用户：约翰的答案，但我将包含我的代码只是为了为像我这样可能难以“弥合差距”的其他“爱好”程序员提供更大的整体“范围”。

```
$(function() {
    $("#address").autocomplete({
        //This bit uses the geocoder to fetch address values
        source : function(request, response) {  

            geocoder.geocode({
                'address' : request.term
            },function(results, status) {
                //Here we take the response and manipulate the map
                response($.map(results, function(item) {
                    //Function here to be called by the variables we want, essentially it loops through the array
                    //of address_components that come back from the geolocate, and loops until it finds the 'type'
                    //Entered in the "return" section below
                    function extractFromAdress(components, type){
                        for (var i=0; i<components.length; i++)
                            for (var j=0; j<components[i].types.length; j++)
                                if (components[i].types[j]==type) return components[i].long_name;
                            return "";
                            }
                    //Returns the variables, left of the ':' to the script
                    //Code right of the ':' is whatever we want to assign to the variable
                    return {
                        label : item.formatted_address,
                        value : item.formatted_address,
                        //Lat and Long from the geo-locate
                        latitude : item.geometry.location.lat(),
                        longitude : item.geometry.location.lng(),
                        //Typical street address values a user would input, and what a typical program would need.                          
                        streetNo : extractFromAdress(item.address_components, "street_number"),
                        streetName : extractFromAdress(item.address_components, "route"),
                        town : extractFromAdress(item.address_components, "administrative_area_level_3"),
                        province : extractFromAdress(item.address_components, "administrative_area_level_1"),
                        postal : extractFromAdress(item.address_components, "postal_code"),
                    }

                }));
            })
        } 
```

有关地址中可用的类型的参考，请查看此链接：

[https://developers.google.com/maps/documentation/geocoding/index#JSON](https://developers.google.com/maps/documentation/geocoding/index#JSON)

大家加油。

# cassandra - 新的接口方法 Cassandra::get_paged_slice 是如何工作的，它的目的是什么？

> ID：13349725
> 
> 赞同：2
> 
> 时间：2012-11-12T18:55:40.630
> 
> 标签：cassandra, thrift

在更新后的 Cassandra 节俭界面中，我找到了新的服务方法`get_paged_slice`，但它仍然没有在 wiki 中描述。

谁能解释一下它是如何工作的，它的目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T08:46:19.870

此方法旨在遍历行范围的所有列。当行太长时，应该使用它，并且方法`get_range_slices`不方便。

该方法返回由 指定的行的所有列`KeyRange`，从 指定的列开始`start_column`。如果该行在收集到足够的结果之前结束，则响应将填充下一行的起始列。下次应该使用最后返回的行 id 和最后一个列名作为参数调用它。

我想，它没有在 wiki 上描述，因为它还处于实验阶段（从 1.1.6 版开始）：

*   我可能只返回整行，没有办法指定 SlicePredicate；
*   KeyRange.count 用于指定行数，这里用于指定列数；
*   cassandra jira 中有一些看起来很严重的开放错误，例如：[https ://issues.apache.org/jira/browse/CASSANDRA-4596](https://issues.apache.org/jira/browse/CASSANDRA-4596)

# c# - 如何从同一命名空间中的不同类调用 VisualWebPart (.cs) 中的 C# 方法

> ID：13349727
> 
> 赞同：5
> 
> 时间：2012-11-12T18:55:45.677
> 
> 标签：c#, sharepoint

我对 C# 和 Sharepoint 编程非常陌生。

我正在尝试了解其上使用的 WebPart 和 C#。我制作了一个可视化的 webpart，可以在列表中添加/删除项目。我有一个在单击按钮时调用的方法，该方法在列表中添加项目。

这是我的方法：

```
public void TestMethod()
{
    using (SPSite oSPSite = SPContext.Current.Site)
    {
        using (SPWeb ospweb = oSPSite.OpenWeb())
        {
            SPList lst = ospweb.Lists["CusomList1"];

            SPListItem item = lst.Items.Add();

            item["Item1"] = txt1.Text;
            item["Item2"] = txt3.Text;
            item["Item3"] = Convert.ToInt32(txt3.Text);
            item["Item4"] = txt4.Text;
            item.Update();
        }
    }            
} 
```

这被称为：

```
protected void Button1_Click(object sender, EventArgs e)
{
    TestMethod();
} 
```

这很好用。我正在尝试在执行相同操作（添加项目）的第二个 WebPart 上使用相同的方法。

但是，当我在同一个项目中添加一个新的 Visual Webpart 并将类和方法称为

```
protected void Button1_Click(object sender, EventArgs e)
{
    VWP1 NewClass = new VWP1();
    NewClass.TestMethod();
} 
```

此添加按钮不起作用，当我进行调试时，我收到以下消息：

> ```
> 你调用的对象是空的。
> ```

有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:05:32.307

您需要做的是将保存列表中的项目的逻辑与与用户界面交互的逻辑分开。

制作一个单独的函数来获取要保存的数据并保存它：

```
public static void SaveItem(string item1, string item2, int item3, string item4)//TODO rename parameters
{
    SPListItem newItem = SPContext.Current.Web.Lists["CusomList1"].AddItem();
    //set fields of new item
    newItem.Update();
} 
```

然后，您可以将该方法放在某个实用程序类中。

完成后，您可以从每个 Web 部件调用该方法：

```
protected void Button1_Click(object sender, EventArgs e)
{
    MyUtilityClass.SaveItem(txt1.Text, txt2.Text, Convert.ToInt32(txt3.Text), txt4.Text);
} 
```

至于为什么，这里发生了很多事情。主要问题是，当您创建第一个可视 Web 部件的新实例并调用该方法时，它不会访问第二个 Web 部件的文本框值，而是访问新创建的 Web 部件的文本框值；从未向用户展示过或由 ASP 初始化的那个。因为 ASP（或您）从未调用它的初始化函数，所以文本框字段全部为空，因此您的错误。如果您确实对其进行了初始化，那么它们都会有空的文本值，但它仍然对您没有帮助。与文本框的交互需要在每个不同的 Web 部件中进行；你不能（或者至少不应该；允许它是不好的做法）从另一个类访问内部控制。除了实际的 UI 交互之外，您可以转移到另一个类的所有内容；在这种情况下，将项目保存到列表中。

几个旁注：

*   您将当前上下文的 SPSite 放在一个`using`块中；这将处理它。 **不要那样做**。仅处置您创建的站点/Web 对象。当前上下文的站点/网络对象被重新用于不同的请求；如果您处置它，该请求将起作用，但是当处置的对象传递给下一个请求时，它将中断，并且由于问题完全出在另一个请求中，因此通常难以调试错误。
*   在该示例中，您打开了一个新网络；您确定当前上下文的网络不合适吗？如果不是，并且您确实想要根网站并且不会总是在根网站上，您可以使用`SPContext.Current.Web.RootWeb`它来访问它而无需打开一个新网站。
*   您正在使用`Convert.ToInt32`用户提供的值。如果他们没有输入正确的数字，如果他们包含逗号等，这将中断。考虑使用`int.TryParse`，以便在他们输入无效值时更优雅地失败。
*   您不应该使用`list.Items.Add()`来添加项目；你应该使用`list.AddItem()`. `Items.Add`被认为已弃用。

# java - 如何在java中初始化一个静态对象数组

> ID：13349729
> 
> 赞同：8
> 
> 时间：2012-11-12T18:55:50.367
> 
> 标签：java

基本上我想创建一个在编译时已知的值的数据结构。在 C 中，我会这样做：

```
struct linetype { int id; char *descr; };

static struct linetype mylist[] = {
    { 1, "first" },
    { 2, "second" }
}; 
```

我在 Java 中发现的唯一灵魂是在运行时创建数组：

```
public class Outer {

    public class LineType {
        int id;
        String descr;

        private LineType( int a, String b) {
          this.id = a;
          this.descr = b;
        }
    }

    LineType[] myList = { 
        new LineType( 1, "first" ),
        new LineType( 2, "second" ),
    }; 
```

这看起来既麻烦又无效（当结构变得又长又复杂时）。还有其他方法吗？

（注意：请忽略任何语法错误，因为这只是为此问题创建的示例代码。另外，我知道字符串不是指向数据段的字符指针。但是，该参数也适用于原始数据类型）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T19:01:54.413

您必须使 LineType 成为静态类：

```
public class Outer {

    public static class LineType {
        int id;
        String descr;

        private LineType( int a, String b) {
          this.id = a;
          this.descr = b;
        }
    }

    static LineType[] myList = { 
        new LineType( 1, "first" ),
        new LineType( 2, "second" ),
    };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T19:00:07.390

如果要避免使用新对象，可以使用 a`Map`而不是数组。请注意，第一个值（1、2 等）始终必须是唯一的。请参阅[Map 的 Oracle 文档](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)。

```
private static Map<Integer, String> myMap = new TreeMap<Integer, String>();

static {
    myMap.put(1, "first");
    myMap.put(2, "second");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T19:02:40.747

除非有什么我没有得到，这应该很简单：

```
Object[][] mylist = {{1, "first"}, {2, "second"}}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T18:57:26.143

在 Java 中，您不能在编译时创建数组（数组是特殊类型的对象）。使用静态块（或）运行时（作为实例变量）的类加载时间都可以创建数组。

静态块示例：

```
class TestClass
{
     static {
     arr[0] = "Hi";     
     arr[1] = "Hello";     
     arr[2] = "How are you?"; 
    }
....
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T19:07:48.680

如果数据结构真的很混乱和复杂，并且你真的不想用它“混乱”你的代码，你可以在一个完全独立的小程序中创建它，然后将它序列化/保存到磁盘。您的“真实”程序只是反序列化/读取它。

当然，这真的掩盖了正在发生的事情，所以除非你真的需要它，否则我会避免使用这种技术。

如果问题只是应用程序的初始加载速度很慢，您可以使用[Holder Pattern延迟静态初始化程序](http://en.wikipedia.org/wiki/Initialization-on-demand_holder_idiom)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-12T18:57:14.160

[**您可以使用Java 中的静态块**](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)来初始化它们。

```
class Outer
{
  static 
  {
    // whatever code is needed for initialization goes here
  }
} 
```

# postgresql - 与直接插入相比，创建“可更新视图”有什么好处？

> ID：13349737
> 
> 赞同：3
> 
> 时间：2012-11-12T18:56:49.177
> 
> 标签：postgresql, sql-view

正如它在 PostgreSQL 手册中提到的那样

> 目前，视图是只读的：系统不允许对视图进行插入、更新或删除。您可以通过创建将视图上的插入等内容重写为其他表上的适当操作的规则来获得可更新视图的效果。

使用规则创建可更新视图与直接插入/更新操作相比有什么好处？是否有任何我需要注意的隐藏“陷阱”？

- 更新 -

似乎 9.3 将包括可更新的视图：

[http://www.depesz.com/2012/12/11/waiting-for-9-3-support-automatically-updatable-views/](http://www.depesz.com/2012/12/11/waiting-for-9-3-support-automatically-updatable-views/)

> PostgreSQL 的下一个版本计划是 9.3 版本。该版本的暂定时间表将在 2013 年第三季度发布。

这还有一段路要走，但看起来这可能会让任何需要它的人的生活变得更轻松。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T19:17:28.573

*   只要您相应地编辑视图上的规则，您就可以拥有一个**稳定的客户端接口，并且仍然可以更改基础表的结构。**过去我碰巧使用过这个，当我不得不删除一个表并且不想唤醒一个困难的客户时，所以我提供了一个视图作为 drop in 并且客户从未注意到这个变化。

*   在多用户环境中，您可以更轻松地**管理**一个视图的权限，而不是管理多个表的权限。

*   另一个好处是你引用的最后一句话：*表格*- 复数。这样，客户端可以发送***一个*查询**，您可以更改多个基础表。大多数情况下，您也可以使用触发器来实现这一点。

除此之外，使用触发器操作通常更简单。

# php - 如何正确更新基于 Web 的系统？

> ID：13349738
> 
> 赞同：0
> 
> 时间：2012-11-12T18:56:51.283
> 
> 标签：php, javascript

我们有一个基于 Web 的小型业务系统，每天有 100 多个用户使用。

在进行更新时，我们遇到了一些问题，用户必须先清除缓存才能正常工作。

这当然会让他们非常沮丧。

所以我的问题是。你如何避免用户不得不清除他们的缓存？

该系统是用PHP编写的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:00:57.407

使用 .htaccess 更改网页、图像、样式和客户端脚本的缓存时间`Cache-Control`。一旦用户计算机上的文件超过指定的缓存长度，浏览器将请求过期数据的新副本。

这里有一些信息：[http ://www.askapache.com/htaccess/speed-up-sites-with-htaccess-caching.html](http://www.askapache.com/htaccess/speed-up-sites-with-htaccess-caching.html)

# android - Android 在视图内启动应用程序

> ID：13349749
> 
> 赞同：5
> 
> 时间：2012-11-12T18:57:41.320
> 
> 标签：android

好的，所以我有一个应用程序，我想使用其他应用程序。例如，我有一个应用程序可以做很多事情，除了目录查找，因为已经有一个应用程序可以为我的学校做这件事。我知道我可以使用意图启动应用程序，但这也会使它们远离我的应用程序的导航菜单。无论如何我可以在视图布局中运行应用程序。我对此不抱希望，但我想我还是有机会问它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T19:06:47.827

这在技术上可以通过使用小部件来实现。您可以实现[AppWidgetHost](http://developer.android.com/reference/android/appwidget/AppWidgetHost.html)，其他应用程序可以创建[App Widgets](http://developer.android.com/guide/topics/appwidgets/index.html)以在您自己的应用程序中使用。这就是 Android 中的启动器屏幕的工作方式。

当然，这只有在相关的其他应用程序实现小部件时才有效。因此，您的问题的一般答案是否定的，不可能在您自己的内部托管来自其他应用程序的任意应用程序或视图/活动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T20:30:20.773

这不是 Android 的设计理念。您应该向目录应用程序发送一个 Intent，我希望它旨在查找结果，然后将其返回给您。机制是你的应用程序中的 startActivityForResult() 和目录应用程序中的 setResult() 。

# sitecore - prettyPhoto 与 Sitecore 6.5 的集成

> ID：13349757
> 
> 赞同：0
> 
> 时间：2012-11-12T18:58:07.417
> 
> 标签：sitecore, prettyphoto

我正在尝试通过单击锚标记将我网站上的页面加载到 prettyPhoto 灯箱中。发生的情况是灯箱似乎开始加载，并且它获取了正确的内容，但它没有加载灯箱中的内容，而是覆盖了整个页面。

我也尝试通过以下操作在 iframe 中加载外部内容：

```
<a href="http://www.google.com?iframe=true&width=100&height=100" rel="prettyPhoto[iframes]">TEST</a> 
```

它把我带到谷歌，让我离开我的网站，而不是将它加载到 iframe 中。

有没有人遇到过类似的问题？我正在使用站点核心 6.5。

# php - 读取 SimpleXmlElement 对象

> ID：13349758
> 
> 赞同：2
> 
> 时间：2012-11-12T18:58:10.147
> 
> 标签：php, cakephp, xml-parsing

我有以下要解析的xml。

```
Array
(
 [0] => SimpleXMLElement Object
    (
        [@attributes] => Array
            (
                [rel] => http://schemas.google.com/g/2005#other
                [address] => xyz@gmail.com
                [primary] => true
            )

    )

[1] => SimpleXMLElement Object
    (
        [@attributes] => Array
            (
                [rel] => http://schemas.google.com/g/2005#other
                [address] => abc@gmail.com
                [primary] => true
            )

    )
) 
```

我有这个上面的 xml，我只需要从这个 xml 中获取地址。

```
foreach ($result as $title) {
   $email[$count++]=$title->attributes()->address->__toString; 
}
debug($email); 
```

结果是这样的。但我只想要地址。需要一些帮助。

```
Array
(
[0] => SimpleXMLElement Object
    (
    )

[1] => SimpleXMLElement Object
    (
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:26:40.423

见：[http ://www.php.net/manual/en/simplexmlelement.attributes.php](http://www.php.net/manual/en/simplexmlelement.attributes.php)

> > **返回值**
> > 
> > 返回一个 SimpleXMLElement 对象，可以对其进行迭代以循环遍历标记上的属性。

解决方案是将值转换为字符串，
例如：

```
$email[$count++]=(string)$title->attributes()->address; 
```

或者迭代返回值也可以

例如：

```
foreach($title->attributes() as $key => $val)
{
  if ($key == 'address') $email[$count++] = $val;
} 
```

# python - 如何撤消字符串并计算

> ID：13349760
> 
> 赞同：0
> 
> 时间：2012-11-12T18:58:14.323
> 
> 标签：python

> **可能重复：**
> [在 python 中解析数学表达式并求解以找到答案](https://stackoverflow.com/questions/13055884/parsing-math-expression-in-python-and-solving-to-find-an-answer)

如何“撤消”带有加号和加号的字符串以计算它们？

例如，我有一个字符串：

> '6*1+7*1+1*7'

我试过 int() 但我有错误。如何撤消整个字符串以获得纯整数计算？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T19:02:36.747

您必须通过解析字符串并计算结果来实际实现您想要支持的操作。一个简单的解析器看起来像：

```
>>> import functools,operator
>>> sum(functools.reduce(operator.mul, map(int, summand.split('*')), 1)
...     for summand in '6*1+7*1+1*7'.split('+'))
20 
```

请注意，内置[`eval`](http://docs.python.org/3/library/functions.html#eval)可以在一次性脚本或交互式控制台中工作，但它将字符串解释为 Python 源代码，因此允许控制字符串的任何人（即用户）[执行任意 Python 命令](http://en.wikipedia.org/wiki/Arbitrary_code_execution)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T18:59:21.487

使用[`eval()`](http://docs.python.org/2/library/functions.html#eval)：

```
In [177]: eval('6*1+7*1+1*7')
Out[177]: 20 
```

或`exec`：

```
In [188]: exec compile('6*1+7*1+1*7','None','single')
Out[188]: 20 
```

# jquery - 更多开发人员不命名自定义 jQuery 事件是否有充分的理由？

> ID：13349764
> 
> 赞同：9
> 
> 时间：2012-11-12T18:58:41.793
> 
> 标签：jquery, jquery-ui, dom, jquery-plugins, twitter-bootstrap

jQuery 事件有一个内置的命名空间概念，可以轻松安全地解除您添加的事件的绑定。

然而，当不同的插件触发相同的基本事件时，这些命名空间并不能防止冲突。例如，如果插件 A 触发`hide.foo`事件而插件 B 触发`hide.bar`事件，则任何侦听`hide`事件的处理程序都将被调用两次，即使使用命名空间也是如此。

当插件触发过于通用的名称（如`open`, `close`, `show`, `hide`, `start`,`end`等）时，这可能会导致问题，但是那里有如此多的插件（甚至来自 jQueryUI 和 bootstrap 等大型库的插件）在没有二级命名空间的情况下触发这些通用事件。

所以这是我的问题。似乎第二级命名空间是谨慎的，既可以将您的事件与其他插件和标准 DOM 事件区分开来。约定可能类似于`namespace:eventName`或`namespace:eventName.secondaryNamespace`使用标准的 jQuery 点表示法。

但似乎没有人这样做，所以我想知道是否有一些令人信服的理由不这样做。有人知道吗？

**更新：**

举一个更具体的例子，假设我正在使用插件 A，当用户将鼠标悬停在某些文本上时，它会触发工具提示上的`show`和 事件。`hide`由于事件传播并且我的 DOM 不断变化，我决定将我的事件侦听器绑定到元素以从所有工具提示`document`中捕获`show`和事件。`hide`

然后，几周后，我将插件 B 添加到我的应用程序中，这也会`hide`在用户关闭警报消息后触发事件。现在突然之间，我的工具提示代码将被调用超过我想要的，因为工具提示和警报消息插件都在触发具有相同名称的事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:33:03.033

事实证明，我特别提到的两个库（jQueryUI 和 Bootstrap）要么正在做，要么正在计划为其自定义事件添加前缀。

这是 jQueryUI 在其自定义`_trigger`方法中所做的：

```
event.type = ( type === this.widgetEventPrefix ? type : this.widgetEventPrefix + type ).toLowerCase(); 
```

`this.widgetEventPrefix`这允许您通过在任何包含的小部件或您使用小部件工厂制作的小部件上定义自己的前缀。

Bootstrap 尚未实现前缀，但计划在下一个主要版本（3.0.0）中实现。

这是@fat 在这个[Github 问题](https://github.com/twitter/bootstrap/pull/4104)中所说的：

> 将来我们可能会使用引导程序命名所有内容（数据属性和事件 - 但这将是 3.0.0 的东西，因为它破坏了向后兼容性）

这是[他的推文](https://twitter.com/philwalton/status/268078072778067968)，以回答我的问题。

--

至于我，我决定使用以下模式之一（取决于上下文）命名我的自定义事件，以避免将来与其他库发生任何可能的冲突。

```
prefix:event.namespace
appname:widgetname:event.namespace
libraryname:widgetname:event.namespace 
```

# html - 我可以限制哪些父（仅限html）访问我在不同域上的子iframe（PHP）吗？

> ID：13349765
> 
> 赞同：0
> 
> 时间：2012-11-12T18:58:42.377
> 
> 标签：html, cors, verify

场景是这样的： Parent.com 可以有一个“仅 html”文件，并且它有 iframe 和 iframe.com（我有完整的 \controll 的 php）。

问题是这样的：我如何检查 iframe.com 是否仅由父级加载并且不能由其他域进行 iframe

编辑：一些解决方案建议检查推荐人，但这可以被欺骗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:15:11.753

`referer`在进入真正复杂的领域之前尽可能接近。

虽然它可以被欺骗，但它只能被客户端欺骗。第三方网站无法让客户欺骗它。

也就是说，`referer`是可选的。浏览器不必发送它，而且在很多情况下（例如通过 HTTPS 提供引用文档时）它们往往不会发送。

以下*可能*有效...</p>

1.  iframe.example.com 使用服务器端代码从 framed.example.net 请求令牌，请求包括浏览器的 IP 地址和授权 iframe.example.com 到 framed.example.net 的密码
2.  framed.example.net 生成一个令牌并将其提供给 iframe.example.com，将其注册到浏览器的 IP 地址
3.  iframe.example.com 使用查询字符串中的令牌生成一个 URI，并将其用作 iframe 的 src
4.  framed.example.net 检查令牌是否存在，并且记录中的 IP 地址与请求来自（浏览器）的 IP 地址匹配

当浏览器没有一致的 IP 地址时（例如在一组代理服务器后面，我记得这在蜂窝宽带中很常见），这会产生误报，所以我不推荐它。

# hibernate - hibernate 命名查询是否可以防止 SQL 注入攻击？

> ID：13349768
> 
> 赞同：5
> 
> 时间：2012-11-12T18:59:04.403
> 
> 标签：hibernate, security, sql-injection

Hibernate 的命名查询特性是否有助于防止 SQL 注入攻击？我在 hbm.xml 文件中定义命名查询而不是注释。

```
I am working on a Flex-Hibernate-JBoss application 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T19:02:57.650

是的。阅读这篇[如何避免 Hibernate 中的 SQL 注入](http://blog.harpoontech.com/2008/10/how-to-avoid-sql-injection-in-hibernate.html)和[如何修复 Hibernate 中的 SQL 注入](http://software-security.sans.org/developer-how-to/fix-sql-injection-in-java-hibernate)。

# java - WAS AdminClient 出现致命异常

> ID：13349769
> 
> 赞同：0
> 
> 时间：2012-11-12T18:59:05.700
> 
> 标签：java, websphere, jmx

我正在尝试使用 MBean 监视 Websphere 7 环境，但遇到了许多问题。首先，使用下面发布的代码时，我收到以下异常：

> com.ibm.websphere.management.exception.ConnectorException：无法创建 RMI 连接器以连接到端口 2809 上的主机 localhost

这是生成异常的代码：

```
import java.util.Properties;

import com.ibm.websphere.management.AdminClient;
import com.ibm.websphere.management.AdminClientFactory;

public class JustAdminClient {
private AdminClient adminClient;

private void initialize() throws Exception {
    try {
        // Initialize the AdminClient.
        Properties adminProps = new Properties();
        adminProps.setProperty("type", AdminClient.CONNECTOR_TYPE_RMI);
        adminProps.setProperty(AdminClient.CONNECTOR_SECURITY_ENABLED, "false"); 
        adminProps.setProperty(AdminClient.CONNECTOR_HOST, "localhost");
        adminProps.setProperty(AdminClient.CONNECTOR_PORT, "2809");
        adminClient = AdminClientFactory.createAdminClient(adminProps);
    } catch (Exception ex) {
        ex.printStackTrace(System.out);
        throw ex;
    }
}   // end method

/**
 * @param args
 */
public static void main(String[] args) {
    JustAdminClient adClient = new JustAdminClient();
    try {
        adClient.initialize();
    } catch (Exception e) {
        e.printStackTrace();
    }
}   // end main

}   // end class 
```

其次，我在禁用安全性的情况下独立运行 WAS。我需要配置任何自签名证书吗？

我的 security.xml 显示：

```
<security:Security xmi:version="2.0" xmlns:xmi="http://www.omg.org/XMI"
  xmlns:orb.securityprotocol="http://www.ibm.com/websphere/appserver/schemas/5.0/orb.securityprotocol.xmi"
  xmlns:security="http://www.ibm.com/websphere/appserver/schemas/5.0/security.xmi" xmi:id="Security_1"
  useLocalSecurityServer="true" useDomainQualifiedUserNames="false" 
  issuePermissionWarning="true" activeProtocol="BOTH" 
  enforceJava2Security="false" enforceFineGrainedJCASecurity="false"
  appEnabled="true" dynamicallyUpdateSSLConfig="true" 
  allowBasicAuth="true" activeAuthMechanism="LTPA_1"
  activeUserRegistry="LocalOSUserRegistry" enabled="false" cacheTimeout="600"
  defaultSSLSettings="SSLConfig_RXCW510MONNode01_1" adminPreferredAuthMech="RSAToken_1"> 
```

每个链接： [http ://www-01.ibm.com/support/docview.wss?uid=swg21295051](http://www-01.ibm.com/support/docview.wss?uid=swg21295051)

请注意，我可以通过 WSadamin 和包含以下内容的 Java prog 两种方式联系端口 2809：

```
private void connect(String host,String port) throws Exception
    {
        String jndiPath="/WsnAdminNameService#JMXConnector";

        JMXServiceURL url = new JMXServiceURL("service:jmx:iiop://"+host+"/jndi/corbaname:iiop:"+host+":"+port+jndiPath);
        System.out.println("URL = " + url);
        //JMXServiceURL url = new JMXServiceURL("service:jmx:iiop://192.168.0.175:9100/jndi/JMXConnector");

        Hashtable h = new Hashtable();

        //Specify the user ID and password for the server if security is enabled on server.

        //Establish the JMX connection.
        System.out.println("Before JMXConnector");
        JMXConnector jmxc = JMXConnectorFactory.connect(url, h);

        //Get the MBean server connection instance.
        System.out.println("Before getMBeanServerConnection");
        mbsc = jmxc.getMBeanServerConnection();

        System.out.println("Connected to Application Server");
    }   // end method 
```

有任何想法吗？我迷路了，并为长线程道歉，但最好提前查看信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:18:04.910

要在 Sun/Oracle JRE 上使用禁用安全性的 AdminClient API，您需要在类路径中包含以下 JAR：

*   运行时/com.ibm.ws.admin.client_7.0.0.jar
*   运行时/com.ibm.ws.ejb.thinclient_7.0.0.jar
*   运行时/com.ibm.ws.orb_7.0.0.jar

使用这些 JAR，RMI 也应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:11:16.793

使用以下示例代码片段和符号解决了我的问题。注意，特别注意抛出的异常和消息：mssing 类；即专注于消息“无法创建”消息可能会误导您

需要以下 jar 文件：

*   %WAS_HOME%\runtimes\com.ibm.jaxws.thinclient_7.0.0.jar %WAS_HOME%\plugins\com.ibm.ws.runtime.jar %WAS_HOME%\plugins\deploytool\itp\com.ibm.websphere.v7_7。 0.0.v20080817\wasJars\com.ibm.ws.admin.core.jar %WAS_HOME%\runtimes\com.ibm.ws.admin.client_7.0.0.jar 需要 CONNECTOR_TYPE_SOAP。CONNECTOR_TYPE_RMI 连接失败；可能是基于堆栈跟踪消息的 jar 问题

公共类 JMXAdminClientSimple {

`private AdminClient adminClient; 私有对象名节点代理 = null;

```
public void initialize() throws Exception {
    try {
        // Initialize the AdminClient.
        Properties props = new Properties();
          props.setProperty(AdminClient.CONNECTOR_HOST, "localhost");
          props.setProperty(AdminClient.CONNECTOR_PORT, "8880");
          props.setProperty(AdminClient.CONNECTOR_TYPE, AdminClient.CONNECTOR_TYPE_SOAP);
          props.setProperty(AdminClient.CONNECTOR_SECURITY_ENABLED, "false");
          props.setProperty(AdminClient.USERNAME, "");
          props.setProperty(AdminClient.PASSWORD, "");
          adminClient = AdminClientFactory.createAdminClient(props);

    } catch (Exception ex) {
        ex.printStackTrace(System.out);
        throw ex;
    }
}` 
```

# ios - 运行单元测试时的初始化方法覆盖率

> ID：13349770
> 
> 赞同：1
> 
> 时间：2012-11-12T18:59:05.227
> 
> 标签：ios, unit-testing, code-coverage

我的类中有一个 init 方法，它在测试文件中有相应的单元测试并且也成功执行，但是当我使用 Cover Story 工具检查单元测试的覆盖率时，它没有考虑 init 方法。知道为什么会这样吗？有什么办法可以让 init 方法计入覆盖范围？

下面是我的初始化方法和单元测试：

***类的初始化方法：***

```
- (id)init
{
    NSException *exception = [NSException exceptionWithName:@"Incorrect initializer."
                                                     reason:@"Use initWithDelegate as the initializer."
                                                   userInfo:nil];
    @throw exception;
} 
```

***init 方法的单元测试：***

```
- (void)testInit
{
    ClassA *temp = [ClassA alloc];

    STAssertThrows(temp = [temp init], @"init should have thrown an exception.");
} 
```

# php - PHP：$pdf-> 图像崩溃 (TCPPDF)

> ID：13349771
> 
> 赞同：1
> 
> 时间：2012-11-12T18:59:17.667
> 
> 标签：php, pdf, tcpdf

我正在使用 TCPDF 和 FPDI 创建一个新的 PDF，并希望在整个页面上添加一个图像（具有 alpha 透明度）。奇怪的是，TCPDF 有时会创建一个 PDF，有时只是崩溃而没有错误（即，除了标准响应标头（用于文本/html）之外，根本不产生任何输出。它总是取决于我传递给图像的尺寸功能：

```
 $this->Image($markupfile,0,0,120, 50, 'png', '', '', true, 300); 
```

有效（尽管图像太小），但是

```
 $this->Image($markupfile,0,0,1200, 50, 'png', '', '', true, 300); 
```

才不是。原始尺寸为 width: 968px; 高度：685px；

```
 require_once "config/sessions_class.php";
    require_once "config/sanitation_class.php";
    require_once('tcpdf/tcpdf.php');
    require_once('tcpdf/config/lang/eng.php');
    require_once('FPDF/fpdi.php');
    require_once('config/settings.php');
    require_once('phpfpm/pdfVersion.php');

 class concatPdf extends FPDI{

     ....

    function concat() {
                $dir = $this->dir;
                $pagecount = $this->setSourceFile($dir.$this->file);
                for ($i = 1; $i <= $pagecount; $i++) {
                    $this->_tplIdx = $this->importPage($i);
                    $s = $this->getTemplatesize($this->_tplIdx);
                    $this->AddPage($s['w'] > $s['h'] ? 'L' : 'P', array($s['w'], $s['h']));
                    $this->useTemplate($this->_tplIdx);
                    $markupfile = "markups/".$this->pdfid."_".$i.".png";
                    if ( file_exists  ($markupfile)) {
                           $this->Image($markupfile,0,0,1020, 50, 'png', '', '', true, 300);

                    }

                 }

     }

     ....

  }

    $filename;
    $pdf = new concatPdf();

    $pdf->setImageScale(1.53);
    $pdf->SetAutoPageBreak(true, 40);
    $pdf->setFontSubsetting(false);
    $pdf->SetMargins(PDF_MARGIN_LEFT, 40, PDF_MARGIN_RIGHT);

    $pdf->concat();

    $pdf->Output('ed_'."filename", 'I'); 
```

# git - Git 提交错误

> ID：13349777
> 
> 赞同：4
> 
> 时间：2012-11-12T18:59:32.383
> 
> 标签：git, version-control

我是 Git 的新手，对它完全感到沮丧。我在 Windows 中使用 Eclipse。我已经从存储库导入并进行了一些更改。现在我想将这些更改发送回存储库。从我所做的阅读中（我已经做了很多），我知道我需要提交这些更改。在我的项目名称旁边，我可以看到一个向上箭头和括号内的数字 1。

因此，我右键单击项目名称，选择 Team，然后选择 Commit。然后我得到这个错误：

> 错误计算差异缺少树

后跟一个十六进制字符串。

我完全不知所措。我已经尝试通过 github.com 和 Windows 桌面应用程序执行此操作。没有任何效果。有人能帮帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:06:54.690

在命令行上使用 MSysGit。对于日常使用，IDE Git 集成被高估了。您将拥有所做操作的历史记录（无需记住您选择的菜单项或在工具栏中按下的按钮）、管道、可编写脚本和选项卡完成。您无法从 ide 集成的 SCM 工具中获得这些好处。

此外，按照预期的方式使用 Git，从命令行，您会发现比其他方式更多的在线帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T13:50:31.817

在 windows update 安装更新但未重新启动计算机后，我收到此错误。重新启动后，一切都恢复了。

# java - 自我更新程序

> ID：13349778
> 
> 赞同：7
> 
> 时间：2012-11-12T18:59:34.980
> 
> 标签：java, auto-update

所以，这是我一段时间以来一直在想的事情。您如何获取程序并使其“自动更新”。因此，假设一个外壳检查 Myserver.com/myProg/updates.xml（或其他一些资源）并检查以确保版本号相同。一旦我这样做了，我该如何处理更新程序？

假设我的程序是一个简单的主类，唯一的输出是：

System.out.println("Hello World"); 在更新它变成 System.out.println("Hello Java");

我怎样才能在运行时使这种变化到位？

注意：JNLP 不适用于此，因为我不想扩展的签名问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T19:06:43.833

您需要 2 个“应用程序”：

1.  检查更新并运行主应用程序的最小引导应用程序；
2.  主要应用。

用户总是启动引导应用程序，而不是主应用程序（实际上用户并不知道引导应用程序）。这是迄今为止我见过的最常见的模式。

如果你想在运行时进行自动更新，你需要使用 OSGI 作为 javabeats 提到的。但只有在你**真的**需要时才走这条路。我从未使用过 OSGI，但我可以想象它的重要性。

### 编辑

我没有具体的例子，但我可以想象

1.  引导程序下载一些 jar 和配置文件
2.  其中一个配置文件包含类路径中所需的文件（这可以由您的应用程序自动完成，如果它选择给定文件夹内的所有 jar 文件）。
3.  使用前面的列表，创建一个新的类加载器（参见[此处](https://stackoverflow.com/questions/252893/how-do-you-change-the-classpath-within-java)的示例）以将 jar 文件添加到类路径中。
4.  在新的类加载器中运行应用程序的主类。

抱歉，如果不自己编写代码，我无法给你更详细的答案，但我会为此收费:)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T19:03:56.197

如果排除 JNLP，我认为只有使用[OSGI](http://felix.apache.org/)的解决方案才能实现这一目标。否则，即使是最简单的设计，您也需要另一个程序来管理和下载当前程序的版本。

# php - SELECT查询中的PDO绑定字段名称？

> ID：13349779
> 
> 赞同：1
> 
> 时间：2012-11-12T18:59:37.517
> 
> 标签：php, pdo

为什么这行不通？

```
$stmt = $pdo->prepare("SELECT :columns FROM table");
$stmt->bindParam(':columns', implode(', ', $columns), PDO::PARAM_STR); 
```

有没有有效的方法来做到这一点？也许就像我上面的初始代码一样简单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:12:16.347

```
$pdo->prepare('SELECT ' . implode(', ', $columns)  . 'FROM table'); 
```

# google-maps - 如何使用 Google Maps API 搜索地址？

> ID：13349785
> 
> 赞同：-2
> 
> 时间：2012-11-12T18:59:45.477
> 
> 标签：google-maps, google-maps-api-3

我正在开发一个简单的应用程序，其中有 100 条带有地址的客户记录。要求是具有半径和地址的字段。这两个字段将成为搜索客户的参数。

例如：半径 = 500 英里，地址 = 纽约

结果应该是纽约附近 500 英里的客户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:18:22.133

您应该首先在纽约标记一个位置，可能是在文本输入中搜索或进行地理编码给出的默认位置，传递带有方向的字符串，一旦您标记了该点，您就可以用您需要的半径绘制一个圆，当您绘制此圆时，您会计算客户地址的每条记录与中心之间的距离，如果结果等于或小于 500 英里，请在客户记录中添加一个标记。

例如，地理编码（假设自动完成）将类似于

```
<input type="text" id="prueba" size="50">
<div id="map-canvas" style="width:800px;height:550px"> </div>

google.maps.event.addListener(autocomplete, 'place_changed', function() {
     var place = autocomplete.getPlace();
      if (place.geometry.viewport) {
        map.fitBounds(place.geometry.viewport);
      } else {
        map.setCenter(place.geometry.location);
        map.setZoom(17); 
      }
    marker.setPosition(place.geometry.location);
} 
```

现在在设置你的中心点之后画一个圆并计算中心和每个记录位置之间的距离

```
var populationOptions = {
    strokeColor: "#FF0000",
    strokeOpacity: 0.8,
    strokeWeight: 2,
    fillColor: "#FF0000",
    fillOpacity: 0.35,
    map: map,
    center: marker.getPosition(),
    radius: 1000,
    editable: true
};

circle = new google.maps.Circle(populationOptions); 
```

从这里你可以计算距离

```
var distance = google.maps.geometry.spherical.computeDistanceBetween(circleCenter, yourPosition); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T19:57:47.857

另一种选择是在数据库上进行距离计算。假设您有一个关系数据库，并且每个客户地址记录都有纬度/经度......您可以对输入地址进行地理编码以获取纬度/经度，然后使用 SQL 查询来计算输入位置与客户之间的距离。然后按给定的半径过滤查询结果。从查询结果来看，只需在地图上绘制过滤后的客户。

[在 S](https://stackoverflow.com/questions/5549237/sql-query-to-pull-locations-based-on-distance-from-lat-lng-in-linq2sql) O 上有几篇关于使用 SQL 计算从纬度/经度的距离的帖子。

您可以使用 对`google.maps.Geocoder`给定地址的纬度/经度进行地理编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T19:13:19.653

对于数学，当可以找到边界框时，您需要 harvesine 公式或空间索引。互联网和stackoverflow上有很多关于harvesine公式的例子。空间索引通常是边界框、矩形或正方形，可以使用空间填充曲线来降低维度，提高查询速度。阅读空间索引： http: [//www.blog.notdot.net/2009/11/Damn-Cool-Algorithms-Spatial-indexing-with-Quadtrees-and-Hilbert-Curves](http://www.blog.notdot.net/2009/11/Damn-Cool-Algorithms-Spatial-indexing-with-Quadtrees-and-Hilbert-Curves)。

# php - Wayne Munro 如何在 Cpdf 中使用另一种字体

> ID：13349788
> 
> 赞同：1
> 
> 时间：2012-11-12T19:00:06.017
> 
> 标签：php, pdf

我正在使用 Wayne Munro 的 Cpdf，它非常适合使用 PHP 创建 PDF。但是，除了内置的 Helvetica，我似乎无法使用任何字体。该类带有一个加载有 *.afm 文件的 /fonts 目录。我已经查看了文档，但似乎无法弄清楚。我已经尝试了详尽的谷歌搜索，但我没有找到任何东西。

任何人都可以引导我走向有用的方向吗？

谢谢！

周杰伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:06:57.447

通常指向 ttf 字体对于 cpdf 来说是不够的……你还需要一个支持的“afm”或“ufm”文件，它基本上描述了 cpdf 的字体，所以当它放置字符时，它可以快速查找知道他们的大小和其他细节。

我建议您现在查看 DOMPDF：

[https://github.com/dompdf/dompdf](https://github.com/dompdf/dompdf)

它通常在后台使用 cpdf ......您可以直接从“./lib/class.pdf.php”使用它（它已经过编辑以支持 Unicode）。

它还提供了几种 ttf/ufm 字体，或者您可以从它们提供的脚本中自己生成它们（这可能有点难以工作），或者使用以下服务：

[http://eclecticgeek.com/dompdf/load_font.php](http://eclecticgeek.com/dompdf/load_font.php)

# python - 如何将 URL 的内容放入模型中的 Django ImageField？

> ID：13349794
> 
> 赞同：0
> 
> 时间：2012-11-12T19:00:25.357
> 
> 标签：python, django, model, download

假设我有以下模型定义：

```
class Image(models.Model):
    image = models.ImageField(upload_to='images') 
```

现在进一步假设我想获取远程 URL 的内容并在上面的模型中插入一行。以这张图片为例：

[https://www.python.org/images/python-logo.gif](https://www.python.org/images/python-logo.gif)
![](../Images/3b394cb1bbc66925fdb8ca8ae62134d5.png)

我从以下代码开始：

```
from tempfile import NamedTemporaryFile

fn = 'https://www.python.org/images/python-logo.gif'

# Read the contents into the temporary file.
f = NamedTemporaryFile()
f.name = fn
f.write(urlopen(fn).read())
f.flush()

# Create the row and save it.
r = Image(image=File(f))
r.save() 
```

我认为这不应该起作用。经过一番调试，我发现：

*   远程图像被正确下载并存储在临时文件中
*   该文件在`MEDIA_ROOT`目录中创建，但大小为 0
*   该行未保存，*但未引发异常！*

任何人都可以阐明这里发生了什么吗？我究竟做错了什么？有没有更简单的方法来做到这一点？

如果有帮助，我正在 Linux 上运行 Django 1.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:26:40.167

你确定没有例外？当我尝试这个时，我得到`AttributeError: Unable to determine the file's size.` 这可能是由`f.name = fn`. 无法测量没有实际路径（fn 是 URL）的文件。将 f.name 恢复为其原始值可以解决您的两个问题。

如果要显式设置新文件的名称，请使用：

```
newfile = File(f,name='python-logo.gif')
r=Image(image=newfile)
r.save()
newfile.close() 
```

（额外的行是因为 File 对象不会自动关闭）

# php - 选择的 jQuery 插件返回“空”

> ID：13349796
> 
> 赞同：1
> 
> 时间：2012-11-12T19:00:42.500
> 
> 标签：php, jquery, html, forms, jquery-chosen

我正在为 jQuery 使用 Chosen 并且文件夹字段返回 null，但是当我查看页面的源时，给出了值。我不知道我做错了什么，我的代码如下：

**对于 HTML：**

```
 <!doctype html>
<html><head>
<meta name="viewport" content="width = 1300">
<meta charset="UTF-8">
<title>Back Office | Home</title>
<link rel="stylesheet" type="text/css" href="../Style Sheets/styles.css"/>
<link rel="stylesheet" type="text/css" href="../chosen/chosen.css">
<script src="../chosen/jquery.js"></script>
<script src="../chosen/chosen.jquery.js"></script>
<script>
jQuery(document).ready(function(){
  jQuery(".folderselector").chosen();
  jQuery(".chosenyesno").chosen({disable_search_threshold: 3});
});
</script>
<link rel="stylesheet" type="text/css" href="../jquery-ui-1.9.1/themes/base/jquery-ui-1.9.1.custom.css">
    <script src="../js/jquery-ui-1.9.1.custom.js"></script>
    <link rel="stylesheet" type="text/css" href="../jquery-ui-1.9.1/themes/base/jquery.ui.all.css">
<script>
$(function() {
    $( document ).tooltip();
});
</script>
<link class="theme-css" href="../Style Sheets/headermenu.css" rel="stylesheet">
<style type="text/css">
body {
    margin-left: 0px;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 0px;
}
</style>

<script src="../Scripts/instantiatemenu.js"></script>
</head>

<body>
<div align="center">
  <div class="wrapper">
    <div class="welcome">
    <div class="user-panel header-divider">
                                                        <div class="user-info">
                                <nobr>
                                    <a href="#" style="padding-right: 8px;">Alex Cross</a>
                                </nobr>
                            </div>

                            <div class="user-dropbox">
                                <ul>
                                    <li class="procaptureli"><a href="/Members/profile.php">PROCapture Home</a></li>
                                    <li onclick="location.href='/BackOffice/Home.php?doLogout=true';" class="logout"><a href="/BackOffice/Home.php?doLogout=true">Logout</a></li>
                                </ul>
                            </div>

                        </div><!-- User panel end -->

<script type="text/javascript" src="../Scripts/header.js"></script>
    </div>
    <div class="header">
    </div>
    <!--end header-->
    <div class="content_wrapper">
      <div class="main_content">
        <div class="sidebar">
          <div class="sidebar_main">
            <div class="menu_holder">
              <h1>Control Panel</h1>
              <ul class="menu_items">
                <li class="menu-1"><a href="Home.php">Home</a></li>
                <li class="menu-2"><a href="Manage Leads.php" class="current">Manage Leads</a></li>
                <li class="menu-3"><a href="Manage Autoresponses.php">Manage Autoresponses</a></li>
                <li class="menu-4"><a href="My NMVT.php">My NMVT</a></li>
                <li class="menu-5"><a href="Home.php">Lead Capture Settings</a></li>
                <li class="menu-6"><a href="Upcoming Appointments.php">Appointments</a></li>
                <li class="menu-7"><a href="Home.php">Resources</a></li>
                <li class="menu-8"><a href="Home.php">Referral System</a></li>
                <li class="menu-9"><a href="Home.php">My Account</a></li>
                <li class="menu-10"><a href="Contact Support.php">Contact Support</a></li>
              </ul>
            </div>
          </div>
        </div>
        <!--end sidebar-->
        <div class="content">
          <div class="content_container">
          <div class="page_container">
          <div class="content_page_header_2">
          <span>New Lead</span>
          </div>
          <form method="POST" action="/BackOffice/New Lead.php?" class="formid1" name="form">
          <input name="username_field" type="hidden" value="homesuccessgroup">
            <div class="box_container">
            <div class="View_Edit_Lead_LongBox Boxes">
            <div class="View_Lead_Header">
            <input title="Input The Full Name Of The Lead." onFocus="if(this.value=='Full Name')this.value='';" onblur="if(this.value == ''){ this.value = 'Full Name';}" name="Lead_Name" type="text" class="FullNameInput" value="Full Name" size="25">
            </div>
            <div class="View_Lead_Info_Side">
            <span>Info</span>
            <div class="BlueBox Medium_BlueBox_2">
            <div class="wrapper_text_1">
            <p class="paragraph_1">Phone: <input title="Input The Phone Number Of The Lead." onFocus="if(this.value=='Phone Number')this.value='';" onblur="if(this.value == ''){ this.value = 'Phone Number';}" name="Phone_Field" type="text" value="Phone Number"> <br/> Email: <input title="Input The Email Of The Lead." onFocus="if(this.value=='Email')this.value='';" onblur="if(this.value == ''){ this.value = 'Email';}" name="Email_Field" type="text" value="Email"></p>
            </div>
            </div>
            <div class="BlueBox Small_BlueBox">
            <p class="paragraph_2">Have You Contacted This Lead? <select class="chosenyesno" name="contacted_field">
              <option value="Yes">Yes</option>
              <option value="No" selected="selected">No</option>
            </select>
             </p>
            </div>
            <div class="BlueBox Small_BlueBox">
              <p class="paragraph_2">
              Put Lead In Folder:  <select class="folderselector" name="selectleads">
                                <option value="Alexs Folder">Alexs Folder</option>
                                <option value="Aweber Imports">Aweber Imports</option>
                                <option value="Cold Leads">Cold Leads</option>
                                <option value="Contacted">Contacted</option>
                                <option value="Contacted Once">Contacted Once</option>
                                <option value="Contacted Twice">Contacted Twice</option>
                                <option value="Family Guy">Family Guy</option>
                                <option value="GVO Imports">GVO Imports</option>
                                <option value="Hot Leads">Hot Leads</option>
                                <option value="MCA Imports">MCA Imports</option>
                                <option value="New Leads">New Leads</option>
                                <option value="Not Contacted">Not Contacted</option>
                                <option value="UPP Leads">UPP Leads</option>
                                <option value="Visited">Visited</option>
                              </select></p>
            </div>
            <div class="shorter_blue_box FooterBox"> 
            <p>This Lead Came From: <select>Big select box... etc.</select></p>
            </div>
            </div>
            <div class="View_Lead_Notes_Side">
            <span>Notes</span>
            <div class="BlueBox Large_BlueBox">
            <div class="notes_wrapper_2">
            <textarea title="Input Any Notes You Have For The Lead(Optional)" name="Notes_Field" cols="" rows="" class="notes_field_1"></textarea>
            </div>
            </div>
            </div>
            </div>
            <div class="Manage_Leads_ShortBox_1 Boxes">
          <span>Create New Lead?</span>
          <div class="button_container_1">
          <div onClick="location.href='View Folder.php?Folder=';" class="no_button SpritesPage2">
          </div>
          <input name="submit_button" type="submit" class="yes_button SpritesPage2" value=" ">
          </div>
          </div>
          </div>
          <div class="content_page_footer">
          </div>
          <input type="hidden" name="MM_insert" value="form">
          </form>
          </div>
          </div>
          <!--end content_container-->
        </div>
        <!--end content-->
      </div>
      <!--end main_content-->
    </div>
    <!--end content_wrapper-->
  </div>
  <!--end wrapper-->
  <div class="footer">
    <div class="text_wrapper">
      <p>Copyright © 2012 PROCapture LLC</p>
      <p>Privacy Policy  |  Terms And Conditions</p>
    </div>

  </div>
</div>
</body>
</html> 
```

**继承人的形式行动：**

```
$currenttime = time();

$editFormAction = $_SERVER['PHP_SELF'];
if (isset($_SERVER['QUERY_STRING'])) {
  $editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
}

if($_POST['Notes_Field'] != "") {
if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "form")) {
    if (strpos($_POST['Lead_Name'], "'") === false) {
      if (strpos($_POST['Lead_Name'], '"') === false) {
          if (strpos($_POST['Lead_Name'], '#') === false) {
  $insertSQL = sprintf("INSERT INTO Leads (FullName, Email, PhoneNumber, Country, Folder, Notes, `User`, TimeAdded, Contacted) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)",
                       GetSQLValueString($_POST['Lead_Name'], "text"),
                       GetSQLValueString($_POST['Email_Field'], "text"),
                       GetSQLValueString($_POST['Phone_Field'], "text"),
                       GetSQLValueString($_POST['Country_Field'], "text"),
                       GetSQLValueString($_POST['Folder'], "text"),
                       GetSQLValueString($_POST['Notes_Field'], "text"),
                       GetSQLValueString($_POST['username_field'], "text"),
                       GetSQLValueString($currenttime, "int"),
                       GetSQLValueString($_POST['contacted_field'], "text"));

  mysql_select_db($database_myBackOfficeConn, $myBackOfficeConn);
  $Result1 = mysql_query($insertSQL, $myBackOfficeConn) or die(mysql_error());

  $insertGoTo = "View Folder.php?Folder=" . $_POST['Folder'] . "";
  header(sprintf("Location: %s", $insertGoTo));
          }
          else{
          header(sprintf("Location: %s", "Error102.php"));
          }
      }
      else{
          header(sprintf("Location: %s", "Error102.php"));
      }
    }
    else {
      header(sprintf("Location: %s", "Error102.php"));
      }
}
}
else {
    if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "form")) {
        if (strpos($_POST['Lead_Name'], "'") === false) {
          if (strpos($_POST['Lead_Name'], '"') === false) {
            if (strpos($_POST['Lead_Name'], '#') === false) {
  $insertSQL = sprintf("INSERT INTO Leads (FullName, Email, PhoneNumber, Country, Folder, `User`, TimeAdded, Contacted) VALUES (%s, %s, %s, %s, %s, %s, %s, %s)",
                       GetSQLValueString($_POST['Lead_Name'], "text"),
                       GetSQLValueString($_POST['Email_Field'], "text"),
                       GetSQLValueString($_POST['Phone_Field'], "text"),
                       GetSQLValueString($_POST['Country_Field'], "text"),
                       GetSQLValueString($_POST['Folder'], "text"),
                       GetSQLValueString($_POST['username_field'], "text"),
                       GetSQLValueString($currenttime, "int"),
                       GetSQLValueString($_POST['contacted_field'], "text"));

  mysql_select_db($database_myBackOfficeConn, $myBackOfficeConn);
  $Result1 = mysql_query($insertSQL, $myBackOfficeConn) or die(mysql_error());

  $insertGoTo = "View Folder.php?Folder=" . $_POST['Folder'] . "";
  header(sprintf("Location: %s", $insertGoTo));
            }
            else{
                header(sprintf("Location: %s", "Error102.php"));
                }
           }
           else{
           header(sprintf("Location: %s", "Error102.php"));
           }
        }
        else {
             header(sprintf("Location: %s", "Error102.php"));
             }
    }
} 
```

# android - 不幸的是，Msger 已经停止了。致命例外：主要

> ID：13349801
> 
> 赞同：-1
> 
> 时间：2012-11-12T19:01:01.107
> 
> 标签：android, multithreading, user-interface

> **可能重复：**
> [android.os.NetworkOnMainThreadException](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)

当我尝试从第一个活动的侦听器运行我的第二个活动时，main.xml 有一个致命异常。当我取出 runTcpClient(); 在 TcpClient Thread() 上它加载得很好。

我遇到了使用 aSyncTask 管理的 UI 线程：[Android UI aSyncTask](http://android-developers.blogspot.in/2009/05/painless-threading.html)

**TcpClientJava.java 的代码**

```
package com.mesger;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.net.Socket;
import java.net.UnknownHostException;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;

public class TcpClient extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    runTcpClient();
    finish();
}

private static final int TCP_SERVER_PORT = 1234;
private void runTcpClient() {
    try {
        Socket s = new Socket("10.0.2.2", TCP_SERVER_PORT);
        BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));
        BufferedWriter out = new BufferedWriter(new OutputStreamWriter(s.getOutputStream()));
        //send output msg
        String outMsg = "TCP connecting to " + TCP_SERVER_PORT + System.getProperty("line.separator"); 
        out.write(outMsg);
        out.flush();
        Log.i("TcpClient", "sent: " + outMsg);
        //accept server response
        String inMsg = in.readLine() + System.getProperty("line.separator");
        Log.i("TcpClient", "received: " + inMsg);
        //close connection
        s.close();
    } catch (UnknownHostException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
}
//replace runTcpClient() at onCreate with this method if you want to run tcp client as a service
private void runTcpClientAsService() {
    Intent lIntent = new Intent(this.getApplicationContext(), TcpClientService.class);
    this.startService(lIntent);
} 
```

}

**LOGCAT**

```
11-12 13:41:22.725: D/gralloc_goldfish(738): Emulator without GPU emulation detected.
11-12 13:42:32.409: D/AndroidRuntime(738): Shutting down VM
11-12 13:42:32.409: W/dalvikvm(738): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
11-12 13:42:32.465: E/AndroidRuntime(738): FATAL EXCEPTION: main
11-12 13:42:32.465: E/AndroidRuntime(738): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.i911.emergency.response/com.mesger.TcpClient}: android.os.NetworkOnMainThreadException
11-12 13:42:32.465: E/AndroidRuntime(738):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
11-12 13:42:32.465: E/AndroidRuntime(738):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
11-12 13:42:32.465: E/AndroidRuntime(738):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
11-12 13:42:32.465: E/AndroidRuntime(738):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
11-12 13:42:32.465: E/AndroidRuntime(738):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-12 13:42:32.465: E/AndroidRuntime(738):  at android.os.Looper.loop(Looper.java:137)
11-12 13:42:32.465: E/AndroidRuntime(738):  at android.app.ActivityThread.main(ActivityThread.java:4745)
11-12 13:42:32.465: E/AndroidRuntime(738):  at java.lang.reflect.Method.invokeNative(Native Method)
11-12 13:42:32.465: E/AndroidRuntime(738):  at java.lang.reflect.Method.invoke(Method.java:511)
11-12 13:42:32.465: E/AndroidRuntime(738):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-12 13:42:32.465: E/AndroidRuntime(738):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-12 13:42:32.465: E/AndroidRuntime(738):  at dalvik.system.NativeStart.main(Native Method)
11-12 13:42:32.465: E/AndroidRuntime(738): Caused by: android.os.NetworkOnMainThreadException
11-12 13:42:32.465: E/AndroidRuntime(738):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
11-12 13:42:32.465: E/AndroidRuntime(738):  at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
11-12 13:42:32.465: E/AndroidRuntime(738):  at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
11-12 13:42:32.465: E/AndroidRuntime(738):  at libcore.io.IoBridge.connect(IoBridge.java:112)
11-12 13:42:32.465: E/AndroidRuntime(738):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
11-12 13:42:32.465: E/AndroidRuntime(738):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
11-12 13:42:32.465: E/AndroidRuntime(738):  at java.net.Socket.startupSocket(Socket.java:566)
11-12 13:42:32.465: E/AndroidRuntime(738):  at java.net.Socket.tryAllAddresses(Socket.java:127)
11-12 13:42:32.465: E/AndroidRuntime(738):  at java.net.Socket.<init>(Socket.java:177)
11-12 13:42:32.465: E/AndroidRuntime(738):  at java.net.Socket.<init>(Socket.java:149)
11-12 13:42:32.465: E/AndroidRuntime(738):  at com.mesger.TcpClient.runTcpClient(TcpClient.java:32)
11-12 13:42:32.465: E/AndroidRuntime(738):  at com.mesger.TcpClient.onCreate(TcpClient.java:25)
11-12 13:42:32.465: E/AndroidRuntime(738):  at android.app.Activity.performCreate(Activity.java:5008)
11-12 13:42:32.465: E/AndroidRuntime(738):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
11-12 13:42:32.465: E/AndroidRuntime(738):  at     android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
11-12 13:42:32.465: E/AndroidRuntime(738):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:11:47.690

你不应该从主线程接触网络。为网络操作实现 AsyncTask。

```
 private class MyInnerClass extends AsyncTask<String, Void, String> {
       @Override
       protected void onPreExecute() {
       super.onPreExecute();

       }

       @Override
       protected String doInBackground(String params) {

       return "Done";
       }

       @Override
       protected void onPostExecute(String result) {
       super.onPostExecute(result);
       }
   } 
```

调用 new MyInnerClass().execute(); 从你的主 Activity 和 android 将自动调用 onPreExecute() 在你的网络访问之前在这个方法中做任何你想做的事情。

然后，Android 将调用 doInBackground
DoInBackground() 中与网络相关的内容，完成后它将自动调用 onPostExecute()，结果将作为参数传递给此方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T19:03:47.000

```
Caused by: android.os.NetworkOnMainThreadException 
```

您正在尝试在主线程上执行可能很慢的网络操作，这在 Android 3.0+ 中成为了一个致命的异常。只需`runTcpClient()`使用 AsyncTask 或 Loader 移动到新线程。

这是一个示例：[如何修复 android.os.NetworkOnMainThreadException？](https://stackoverflow.com/q/6343166/1267661).

* * *

试试这个：

```
class TcpClientTask extends AsyncTask<Void, Void, Void> {
    private static final int TCP_SERVER_PORT = 1234;
    private boolean error = false;

    protected Void doInBackground(Void... arg0) {
        try {
            Socket s = new Socket("10.0.2.2", TCP_SERVER_PORT);
            BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));
            BufferedWriter out = new BufferedWriter(new OutputStreamWriter(s.getOutputStream()));
            //send output msg
            String outMsg = "TCP connecting to " + TCP_SERVER_PORT + System.getProperty("line.separator"); 
            out.write(outMsg);
            out.flush();
            Log.i("TcpClient", "sent: " + outMsg);
            //accept server response
            String inMsg = in.readLine() + System.getProperty("line.separator");
            Log.i("TcpClient", "received: " + inMsg);
            //close connection
            s.close();
        } catch (UnknownHostException e) {
            error = true;
            e.printStackTrace();
        } catch (IOException e) {
            error = true;
            e.printStackTrace();
        }
        return null;
    }

    protected void onPostExecute() {
        if(error) {
            // Something bad happened
        }
        else {
            // Success
        }

    }
} 
```

要使用它，请调用：`new TcpClientTask().execute();`

* * *

> 我还有 1 个问题。`String inMsg = in.readLine() + System.getProperty("line.separator");`接收消息，我将如何设置它以每 15 毫秒获取一次，或者任何稳定的东西来保持接收数据。

我不确定您要做什么。但我注意到您只调用`readLine()`一次，如果您想阅读多行，请使用循环：

```
StringBuilder msg = new StringBuilder();
String line;
while((line = in.readLine()) != null) // Keep reading until the end of the file is reached
    msg.append(in.readLine()).append(System.getProperty("line.separator")); 
```

StringBuilders 在将字符串添加在一起时创建的开销更少，只需`msg.toString()`在您想要获取整个消息时使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T19:12:28.873

尝试使用 Small Piece Of Code。但这不是一个好习惯。

```
 StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()
   .detectNetwork()
   .permitNetwork() //permit Network access 
   .build()); 
```

您可以使用 AsynTask 或任何线程概念。 [它可能会有所帮助](http://www.vogella.com/articles/AndroidPerformance/article.html)

# c# - 在实体框架中自动初始化 PK

> ID：13349802
> 
> 赞同：0
> 
> 时间：2012-11-12T19:01:13.260
> 
> 标签：c#, entity-framework, entity-framework-4, entity, primary-key

我正在使用实体框架，并希望在我的每个实体中都有一个构造函数，将 PK 属性初始化为`Guid.NewGuid()`. 我想知道是否有一种方法可以自动完成这项工作，而不必自己动手，也许可以使用创建我的 C# 源代码的 .TT 文件脚本。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:03:46.983

T4 模板不是面向对象的......

也许你可以在基类的构造函数中做到这一点......

# android - 为什么 Gingerbread 设备上的“下载完成”通知会消失？

> ID：13349806
> 
> 赞同：15
> 
> 时间：2012-11-12T19:01:47.563
> 
> 标签：android, android-notifications, android-notification-bar, android-download-manager

我正在使用`DownloadManager`该类以编程方式下载文件。一切正常，但我无法让下载完成通知持续存在。下载完成后立即消失。这是我的代码：

```
Request rqtRequest = new Request(Uri.parse(((URI) vewView.getTag()).toString()));
if (Build.VERSION.SDK_INT < Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
    rqtRequest.setShowRunningNotification(true);  
} else {
    rqtRequest.setNotificationVisibility(Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
}
((DownloadManager) getSystemService(DOWNLOAD_SERVICE)).enqueue(rqtRequest); 
```

我在网上看到了一些与此相关的问题，但我找不到解决方案。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-11T16:28:37.373

[`DownloadManager`](https://developer.android.com/reference/android/app/DownloadManager.html)不支持 Gingerbread 的完成通知；你必须自己展示它。

使用[BroadcastReceiver 检测下载何时完成](https://developer.android.com/reference/android/app/DownloadManager.html#ACTION_DOWNLOAD_COMPLETE)并显示您自己的通知：

```
public class DownloadBroadcastReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();

        if (DownloadManager.ACTION_DOWNLOAD_COMPLETE.equals(action)) {
            //Show a notification
        }
    }
} 
```

并将其注册到您的清单中：

```
<receiver android:name="com.zolmo.twentymm.receivers.DownloadBroadcastReceiver">
    <intent-filter>
        <action android:name="android.intent.action.DOWNLOAD_COMPLETE"/>
    </intent-filter>
</receiver> 
```

此外，`setNotificationVisibility`在 API 级别 11（Honeycomb）而不是 ICS 中添加。我不确定您是否有意使用 ICS 常量，但您可以将代码更改为以下内容以在 Honeycomb 上使用系统通知：

```
if (Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB) {
    rqtRequest.setShowRunningNotification(true);  
} else {
    rqtRequest.setNotificationVisibility(Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T01:56:14.673

您必须为 Gingerbread 创建自己的下载完成通知。

首先，从以下位置获取对下载的引用`DownloadManager`：

```
DownloadManager downloadManager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE); 
DownloadManager.Request request = new Request(someUri); 
//...
long downloadReference = downloadManager.enqueue(request); 
```

然后在您的自定义中收听下载完成广播`BroacastReceiver`：

```
IntentFilter filter = new IntentFilter( DownloadManager.ACTION_DOWNLOAD_COMPLETE);

BroadcastReceiver receiver = new BroadcastReceiver() { 
    @Override public void onReceive( Context context, Intent intent) { 
      long reference = intent.getLongExtra( DownloadManager.EXTRA_DOWNLOAD_ID, -1); 
       if (downloadReference == reference) { 
                // Send your own notification
        } 
     } 
}; 

registerReceiver( receiver, filter); 
```

并发送您自己的下载完成通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T20:24:27.283

好吧，你测试的是哪个版本？设置 VISIBILITY_VISIBLE_NOTIFY_COMPLETED 应该设置通知，以便它仅在下载完成时显示。如果在下载过程中显示通知，那么我必须假设您在 ICS 之前的平台上运行。我会调试应用程序。设置断点以查看正在执行哪些“如果”选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T10:56:20.527

也许这是一种粗略（但简单）的方式：您可能更喜欢在下载完成后创建新通知 PS：啊，对不起，这实际上不是对“为什么”问题的回答，但它仍然可能对你

# java - android 应用程序上的 if 语句帮助

> ID：13349815
> 
> 赞同：0
> 
> 时间：2012-11-12T19:02:17.120
> 
> 标签：java, android, if-statement

iv创建了一个android应用程序，我的问题是当我在输入数字之前按下+ = - / *按钮时，我的应用程序停止工作，无论如何我可以做到，如果没有数字输入它不会停止工作？

* * *

```
package steven.mcilhone.calculatorcoursework;

import java.math.BigDecimal;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class Calculator extends Activity {

EditText firstValue;
EditText secondValue;
TextView result;
Button addbtn, subtractbtn, dividebtn, multiplybtn, equalbtn, clearbtn;
BigDecimal firstNum, secondNum;

String Operator = "";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_calculator);

    addbtn = (Button) findViewById(R.id.addbtnID);
    subtractbtn = (Button) findViewById(R.id.subtractbtnID);
    dividebtn = (Button) findViewById(R.id.dividebtnID);
    multiplybtn = (Button) findViewById(R.id.multiplybtnID);
    equalbtn = (Button) findViewById(R.id.equalbtnID);
    clearbtn = (Button) findViewById(R.id.clearbtn);
    firstValue = (EditText) findViewById(R.id.edttxt1);
    secondValue = (EditText) findViewById(R.id.edttxt1);

    clearbtn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            EditText edttxt1 = (EditText) findViewById(R.id.edttxt1);
            edttxt1.setText("");
        }
    });

    addbtn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            Operator = "+";
            addandclear();
        }
    });

    subtractbtn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Operator = "-";             
            addandclear();
        }
    });

    dividebtn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Operator = "/";
            addandclear();

        }
    });

    multiplybtn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Operator = "*";
            addandclear();
        }
    });

    equalbtn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            secondNum = new          BigDecimal(secondValue.getText().toString());
            EditText edttxt1 = (EditText) findViewById(R.id.edttxt1);
            edttxt1.setText("");
            if (Operator == "+"){
                edttxt1.setText(firstNum.add(secondNum).toString());
            }
            else if (Operator == "-"){
                edttxt1.setText(firstNum.subtract(secondNum).toString());
            }
            else if (Operator == "/"){
                edttxt1.setText(firstNum.divide(secondNum).toString());
            }   
            else if (Operator == "*"){
                edttxt1.setText(firstNum.multiply(secondNum).toString());
            }   

        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_calculator, menu);
    return true;
}

        public void addandclear(){

            firstNum = new BigDecimal(firstValue.getText().toString());             
            EditText edttxt1 = (EditText) findViewById(R.id.edttxt1);
            edttxt1.setText("");
        }

} 
```

* * *

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<EditText
    android:id="@+id/edttxt1"
    android:layout_width="250dp"
    android:layout_height="100dp"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:background="?android:attr/editTextBackground"
    android:ems="15"
    android:inputType="numberDecimal" 
    android:gravity="right"/>

<Button
    android:id="@+id/addbtnID"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:layout_below="@+id/edttxt1"
    android:layout_marginLeft="20dp"
    android:text="@string/add" />

<Button
    android:id="@+id/dividebtnID"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:layout_below="@+id/edttxt1"
    android:layout_toRightOf="@+id/addbtnID"
    android:text="@string/divide" />

<Button
    android:id="@+id/multiplybtnID"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:layout_below="@+id/edttxt1"
    android:layout_toRightOf="@+id/dividebtnID"
    android:text="@string/multiply" />

<Button
    android:id="@+id/subtractbtnID"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:layout_alignBaseline="@+id/multiplybtnID"
    android:layout_alignBottom="@+id/multiplybtnID"
    android:layout_toRightOf="@+id/multiplybtnID"
    android:text="@string/subtract" />

<Button
    android:id="@+id/zerobtn"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:layout_alignLeft="@+id/addbtnID"
    android:layout_alignParentBottom="true"
    android:layout_alignRight="@+id/twobtn"
    android:text="@string/zero" />

<Button
    android:id="@+id/onebtn"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:layout_above="@+id/zerobtn"
    android:layout_alignLeft="@+id/zerobtn"
    android:text="@string/one" />

<Button
    android:id="@+id/twobtn"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:layout_above="@+id/zerobtn"
    android:layout_toLeftOf="@+id/multiplybtnID"
    android:text="@string/two" />

<Button
    android:id="@+id/threebtn"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:layout_above="@+id/zerobtn"
    android:layout_toLeftOf="@+id/subtractbtnID"
    android:text="@string/three" />

<Button
    android:id="@+id/fourbtn"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:layout_above="@+id/onebtn"
    android:layout_toLeftOf="@+id/twobtn"
    android:text="@string/four" />

<Button
    android:id="@+id/fivebtn"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:layout_alignBaseline="@+id/fourbtn"
    android:layout_alignBottom="@+id/fourbtn"
    android:layout_toLeftOf="@+id/threebtn"
    android:text="@string/five" />

<Button
    android:id="@+id/sixbtn"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:layout_alignBaseline="@+id/fivebtn"
    android:layout_alignBottom="@+id/fivebtn"
    android:layout_toRightOf="@+id/fivebtn"
    android:text="@string/six" />

<Button
    android:id="@+id/sevenbtn"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:layout_above="@+id/fourbtn"
    android:layout_toLeftOf="@+id/fivebtn"
    android:text="@string/seven" />

<Button
    android:id="@+id/eightbtn"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:layout_above="@+id/fivebtn"
    android:layout_toLeftOf="@+id/sixbtn"
    android:text="@string/eight" />

<Button
    android:id="@+id/ninebtn"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:layout_alignBaseline="@+id/eightbtn"
    android:layout_alignBottom="@+id/eightbtn"
    android:layout_toRightOf="@+id/eightbtn"
    android:text="@string/nine" />

<Button
    android:id="@+id/equalbtnID"
    android:layout_width="70dp"
    android:layout_height="120dp"
    android:layout_alignBottom="@+id/threebtn"
    android:layout_alignTop="@+id/sixbtn"
    android:layout_toRightOf="@+id/threebtn"
    android:text="@string/equal" />

<Button
    android:id="@+id/clearbtn"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:layout_above="@+id/equalbtnID"
    android:layout_alignLeft="@+id/equalbtnID"
    android:text="@string/clear" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T19:02:57.380

```
 if (Operator == "+"){ 
```

应该

```
 if (Operator.eqauls("+")){ 
```

这同样适用于代码中的其他 if/else 块。

对我们来说总是比`.equals()`比较`==`字符串更好（除了字符串文字的情况，字符串文字可能通过 == 条件）。

`==`检查引用相等性。`equals()`检查内容是否相等。[这个讨论](https://stackoverflow.com/questions/3052442/what-is-the-difference-between-text-and-new-stringtext-in-java?lq=1)可能会对你有所帮助。

**编辑：**

正如 TedHopp 评论的那样，您的代码引用了编译时间常量，这里的字符串比较可能不是问题，以上答案仍然是字符串比较的好习惯。

因为没有可用的堆栈跟踪问题，假设 flow 满足 if/else 条件之一，错误的另一种可能性是`NumberFormatException`.

`EditText`在创建`BigDecimal(String)`实例之前确保您正在读取的数字是有效数字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T19:11:27.890

在几个地方，您将用户输入转换为 a`BigDecimal`而不进行任何错误检查。特别是在没有输入时，`new BigDecimal(String)`会生成一个`NumberFormatException`因为“”不是有效数字。从[文档](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html#BigDecimal%28java.lang.String%29)：

> 字符串必须在整数或小数中至少包含一位数字。

找到您使用用户输入的每个地方并进行一些错误检查。例如，在`addandclear()`：

```
public void addandclear(){
    String val = firstValue.getText().toString();
    try {
        firstNum = new BigDecimal(val);
        EditText edttxt1 = (EditText) findViewById(R.id.edttxt1);
        edttxt1.setText("");
    } catch (NumberFormatException e) {
        if (val.length() == 0) {
            // blank field
        } else {
            // something wrong with the input
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T20:41:32.763

要减少代码，您可以将 android:onClick="addandclear" 添加到 xml 中的按钮（使 addandclear 将 View v 作为参数）。然后通过 v.getText().toString() 获取操作符

# mysql - 从时间序列构建数据库

> ID：13349819
> 
> 赞同：0
> 
> 时间：2012-11-12T19:02:28.227
> 
> 标签：mysql, database, database-design

所以，我有以下问题：

我正在做一些时间序列分析，我有一个类似 10^7 身份或 ids 的模型（例如一个国家的每部手机）。

每个 Id 都有关联的事件（例如天），最多可以跨越 10^4 个事件。对于每个事件和身份，都有不同的“属性”（例如电话 X 在那天 Y 发送的消息数量）。

我正在尝试设计一个 mysql 数据库来处理如此大量的信息。我主要感兴趣的是查询时间分布（例如，特定日期的消息数量；或 X 天和 Y 天之间的活动电话数量）。

1.  我的第一个想法是为每个不同的值使用一个表：在每个表上，行是一个标识，每一列都有一天。如果有 N 个不同的属性，那么我将有 N 个不同的表。这带来了每个表上有 10^4 列的问题；我不确定这是一个好的/标准/有效的做法。

2.  我的第二个虽然是有一个 10^7*10^4 行的单表（所谓的多对多关系）：第一列有一个主键，第二个是身份的 id，第三个是事件的日期，和下一列是该特定日期该身份的相关属性。

我问你有什么建议：“出于历史原因”我已经创建了一个非 mysql 数据库（有很多很多 .txt 文件），在尝试迁移它之前，我想知道它是否真的值得。正如您可能理解的那样，目前我的 *.txt 数据库中的查询可能会尽可能昂贵：我通常必须打开每个 .txt 对查询执行的操作。对于每个查询，这相当于 10-30m。因此，任何低于该限制的建议实际上对我的问题都非常有用。

谢谢你的时间，豪尔赫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T21:41:46.537

您正试图在关系数据库中存储一个相当复杂的信息矩阵。在开始之前，您需要回答以下几个问题：

*   是否有任何一天的数据缺失？也就是说，id=x 是否可以具有 item=y 的实际值，但由于某些操作原因，该值从数据库中丢失。
*   对于给定的 id，大多数或所有项目在任何给定日期都有值吗？也就是说，您是否在处理稀疏矩阵问题？

将项目存储在单独的列中是不可能的。MySQL 的硬限制是每行 4,096 列（参见[此处](http://dev.mysql.com/doc/refman/5.6/en/column-count-limit.html)），小于 10^4。

似乎更规范化的方法是可行的，尽管每一行都需要 id 和 item id 并且值需要类型一致。如果您要存储数字，没问题。如果一些更好地存储为整数，另一些存储为货币值，而另一些存储为字符串，那么您可能会遇到挑战。

我怀疑混合方法可能会奏效。您可能有一些经常使用的项目可以存储在一个表中。更多项目将使用标准化方法存储。然后，您可以考虑分区策略以优化访问。

您没有提供足够的细节来制定这样的策略。通常，方法是按时间对数据进行分区。但是，在这种情况下，最好按项目对数据进行分区，这样所有值都可以在一个分区中获取。

# vb.net - Dim Doubles 和 Strings 用于计算插入文本框中的百分比

> ID：13349820
> 
> 赞同：-1
> 
> 时间：2012-11-12T19:02:33.157
> 
> 标签：vb.net

我正在尝试为男性、女性两个字段范围内的值计算百分比。

在EmployeesData.vb

```
Public Function getPercentMen() As Double

Dim result As Double

result = 0

If Men + Women > 0 Then result = (Men * 100) / (Men + Women)
        End If

Return result

End Function 
```

在我的 Demographics.vb 我有以下输出：

```
Private Sub updateView()

    ' The percentage Men and Women recorded is displayed in
    ' the appropriate text boxes.

    percentMenTextBox.Text = fEmployeesData.getPercentMen().ToString()
    percentWomenTextBox.Text = fEmployeesData.getPercentWomen().ToString()

    updateView()
End Sub 
```

我得到的错误是

```
An unhandled exception of type 'System.StackOverflowException' occurred in mscorlib.dll 
```

Visual Studio 将我指向以下行

```
percentMenTextBox.Text = fEmployeesData.getPercentMen().ToString() 
```

我认为问题在于我试图错误地将 Double 强制转换为 String 或类似的东西

我已经添加了整个班级

```
Public Class EmployeesData
    Private fMen As Integer
    Private fWomen As Integer

    Public Sub New()
        fMen = 0
        fWomen = 0
    End Sub

    Public ReadOnly Property Men As Integer
        Get
            Return fMen
        End Get
    End Property

    Public ReadOnly Property Women As Integer
        Get
            Return fWomen
        End Get
    End Property

    Public Sub addMen()
        fMen = fMen + 1
    End Sub

    Public Sub addWomen()
        fWomen = fWomen + 1
    End Sub

    Public Function getPercentMen() As Double
        Dim result As Double
        result = 0
        If Men + Women > 0 Then
            result = (Men * 100) / (Men + Women)
        End If
        Return result
    End Function

    Public Function getPercentWomen() As Double
        Dim result As Double
        result = 0
        If Men + Women > 0 Then
            result = (Women * 100) / (Men + Women)
        End If
        Return result
    End Function

    Public Sub reset()
        fMen = 0
        fWomen = 0
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T20:19:02.583

此错误的原因是这部分：

```
Private Sub updateView()

'... snipped

    updateView()
End Sub 
```

您在这里所拥有的基本上是一个永无止境的循环，递归地调用一个子例程（它添加到堆栈中），最终将导致堆栈溢出。

VS 指向您的原因`fEmployeesData.getPercentMen()`是该调用基本上是使玻璃溢出的下降，可以这么说，因为它对此时已满的堆栈执行了额外的添加。换句话说，错误消息具有误导性，因为它很可能是下一次调用，或者是下一次往返调用本身。

`updateView()`解决方案是从自身内部删除调用。只能从外部代码调用它。如果您需要不断地调用它，请考虑使用计时器，或者仅在需要时从事件中使用它。

您的其他代码很好，与此错误无关。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:12:16.877

我在这里看到两个问题。首先，我猜你使用的 Men 和 Women 变量都是整数，所以你看到的是整数除法。整数除以整数的结果仍然是……整数。

试试这个：

```
Public Function getPercentMen() As Double

    Dim result As Double = 0.0  
    If Men + Women > 0 Then result = (Men * 100.0) / (Men + Women)   
    Return result

End Function 
```

其次，要获得 StackOverflow 异常，您可能有一个自引用属性。检查您的 Men 和 Women 变量是如何实现的。如果他们使用自己，或者如果他们使用这个 getPercentMen() 方法，您可以创建一个没有基本情况的递归调用，这将导致 StackOverflow。

# algorithm - 责任链可以有多个节点修改请求吗？

> ID：13349822
> 
> 赞同：2
> 
> 时间：2012-11-12T19:02:37.237
> 
> 标签：algorithm, design-patterns, chain-of-responsibility

如果我有多个节点需要修改请求，那么仍然使用“责任链”设计模式是否是个好主意？还是应该只在只有一个（未知）节点专门处理请求时才使用这种模式？

IE：节点 2 和节点 3 都需要影响请求 (R)。因此，即使节点 2 处理了请求，我仍然想继续将请求向下传递到列表中的下一个处理程序

```
 +--------+ (R)  +--------+ (R)  +--------+ (R)
Client Request (R)  | Node 1 |----->| Node 2 |----->| Node 3 |----->etc...
                    +--------+      +--------+      +--------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:18:42.857

从我的角度来看，您最好使用[管道和过滤器](http://www.enterpriseintegrationpatterns.com/PipesAndFilters.html)模式，因为每个步骤都会添加某种转换和/或验证。

这张图片取自上面的类似图片

![在此处输入图像描述](../Images/a17f8bdc63d4dccb6c146c1d0ac12b66.png)

在任何时候，其中一个过滤器都可以决定处理请求而不将其传递给下一个过滤器。在上面的示例中，（如果是 http 请求），未经身份验证的请求将导致 401 http 状态代码。

# jquery - JQuery UI拖放列表重叠问题

> ID：13349824
> 
> 赞同：0
> 
> 时间：2012-11-12T19:02:44.047
> 
> 标签：jquery, jquery-ui

我遇到的问题是，如果您稍微向上拖动（5-10px-ish）并放下......它会将放置的列表对象堆叠在第一个列表对象的顶部。如果你移动它更多，它工作正常......它只会在对象被轻微移动并掉落时失败。

我正在使用最新版本的 JQuery 和 JQuery UI。

有人看到这个问题或知道它可能是由什么引起的吗？谢谢

![问题...在左侧拖动...在右侧丢弃问题](../Images/4eb52942e5b5367cf58c43c41faca94f.png)

在代码方面，我在这里使用基本的可排序功能：

```
#object_list {list-style: none;}
#object_list li {width: 264px; display: inline-block; color: #FFF; position: relative;    margin-right: 5px; margin-left: -33px; padding: 10px 8px 7px 48px; cursor: pointer;}
#object_list li:hover {background: #12191F;}

$(document).ready(function(){                      
    $(function() {
        $("#object_list").sortable();
        $("#object_list").disableSelection();
    });
});

<ul id="object_list">
    <li onClick="window.location = 'page.php'">
         <a href="page.php">
         <img alt="" src="imagesource.jpg" style="width: 28px; height: 28px; border: 1px solid #0C1013; background: #181E26; padding: 2px; position: absolute; top: 10px; left: 8px;" />
         </a>
         <span style="float: left; word-wrap: break-word; color: #EEE; font-size: 15px; font-weight: bold; font-family: 'Source Sans Pro'; text-shadow: 0px 1px 1px #000;">Name of Group</span>
    </li>
    .
    .
    .
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:45:37.923

**[DEMO——](http://jsfiddle.net/4Xqys/)**你的 CSS 一团糟。

您的`<li>`标签没有正确封装其内容，从而导致您的问题。

# git - git-tf：签入从要删除的文件夹中移动文件的提交

> ID：13349825
> 
> 赞同：4
> 
> 时间：2012-11-12T19:02:55.903
> 
> 标签：git, tfs, git-tf

我在使用 git-tf 检查特定提交时遇到问题。有问题的提交涉及移动（重命名）一个文件，该文件是要删除的文件夹的子文件夹。显然，这是 TFS 中的禁忌（请参阅[此 SO 帖子](https://stackoverflow.com/questions/6116482/tfs-2010-deleting-a-folder-in-visual-studio-solution-before-check-in-of-change)）。

将来，我显然会尽量避免在 git 端的一次提交中这样做。但由于我已经犯了这个错误，我需要想办法让 git-tf checkin 工作。我对 git 比较陌生，所以也许有一个简单的解决方案。似乎我需要以某种方式返回并将有问题的提交“拆分”为两部分：文件被移动/重命名出文件夹的地方，以及文件夹被删除的地方。或者也许我可以在 TFS 方面做一些事情来让它开心。

TFS 抛出的错误如下： TF14060: 项目 $/blah/... 无法删除。一个或多个孩子有待处理的更改。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T19:22:22.877

来自 codeplex 的乐于助人的人：

> 要克服此错误，您可以尝试以下操作
> 
> git tf checkin --renamemode=justFiles
> 
> 这样做的目的是重命名需要重命名的文件，但将空文件夹留在 TFS 中。

这对我有用。正如所承诺的，此选项在 TFS 端留下了一个空文件夹。我能够删除 TFS 上的文件夹，然后执行“git-tf pull”，没有任何进一步的问题。

# php - 保护 PHP 会话

> ID：13349830
> 
> 赞同：-2
> 
> 时间：2012-11-12T19:03:12.320
> 
> 标签：php, session

我一直在阅读让用户登录到我的网站的最佳方式，这样他们就不需要登录来执行每个操作或查看每个页面。

我已经意识到会话是遍历 Cookie 的方式，因为它们的数据存储在服务器端而不是客户端。

我有一个计划，我要将会话分配给单个 IP 地址和用户代理，并验证它每次都是相同的 IP 和用户代理。然而，显然这不是要走的路。

所以真的我的问题是什么是做一些真正防弹、安全会话的最佳方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:04:38.050

您需要同时使用**COOKIES**和 PHP 会话。

使用 cookie 存储某种形式的会话 id，并在看到 cookie 时加载该会话 id。

PHP 会话本身就是一个浏览器 cookie，它通常会在用户关闭浏览器窗口时过期。

# python - SqlAlchemy：过滤以匹配所有而不是列表中的任何值？

> ID：13349832
> 
> 赞同：10
> 
> 时间：2012-11-12T19:03:14.207
> 
> 标签：python, mysql, sql, sqlalchemy

我想在联结表中查询与 column`aID`中 id 列表的所有值匹配的`ids=[3,5]`column值`bID`。

这是我的联结表（`JT`）：

```
 aID    bID
   1      1
   1      2
   2      5
   2      3
   1      3
   3      5 
```

我有这个查询：`session.query(JT.aID).filter(JT.bID.in_(ids)).all()`

此查询返回`aID`values `1`，`2`并且`3`因为它们都在列中包含`3`or`5`的`bID`行。我希望查询返回的是`2`因为这是唯一在其列`aID`中具有列表所有值的值。`ids``bID`

不知道如何更好地解释问题，但我怎样才能得到结果？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-14T01:41:43.467

基于@Gordon Linoff 的回答和两个表`A`，`B`其中与称为SqlAlchemy 等价物的一对多`A`关系将是：`B``A.bs`

```
from sqlalchemy import func  
session.query(A).join(B).filter(B.id.in_(<your_list>)).group_by(A.id).having(func.count(A.bs) == len(<your_list>)).all() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T20:07:17.350

您正在寻找适用于行集的查询。我认为使用有子句的组是最好的方法：

```
select aid
from jt
where bid in (<your list>)
group by aid
having count(distinct bid) = 2 
```

如果您可以将所需的 id 放入表中，则可以执行以下更通用的方法：

```
select aid
from jt join
     bids
     on jf.bid = bids.bid
group by aid
having count(distinct jt.bid) = (select count(*) from bids) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-01T06:49:51.737

尝试：

```
 session.query(JT.aID).filter(not_(JT.bID.in_(ids))).all() 
```

# php - 使 wkhtmltoimage 工作（分段错误）

> ID：13349833
> 
> 赞同：-1
> 
> 时间：2012-11-12T19:03:27.630
> 
> 标签：php, wkhtmltopdf, shell-exec, wkhtmltoimage

在过去的三天里，我试图让 wkhtmltoimage 在我的共享网络空间上工作。我没有root访问权限。因此，wkhtmltoimage 直接在我的 htdocs 目录中。

这是我的代码：

```
shell_exec('wget http://wkhtmltopdf.googlecode.com/files/wkhtmltoimage-0.11.0_rc1-static-  i386.tar.bz2');

shell_exec('tar -xvf wkhtmltoimage-0.11.0_rc1-static-i386.tar.bz2');

$output = shell_exec('wkhtmltoimage-i386 google.com google.png');
echo "<pre>$output</pre>"; 
```

前两个 shell_exec 工作正常，但我无法截屏。有任何想法吗？（已尝试省略“i386”以及在 wkthmltoimage 之前放置“./”，但没有成功）。

这篇文章：[How to install wkhtmltopdf on a linux based (shared hosting) web server](https://stackoverflow.com/questions/2273534/how-to-install-wkhtmltopdf-on-a-linux-based-web-server)也没有帮助。

任何帮助都将不胜感激。

**更新**使用 SSH 连接我得到以下终端代码

```
$ wkhtmltoimage-i386 google.com google.png
wkhtmltoimage-i386: not found
$ ./wkhtmltoimage-i386 google.com google.png
$ Segmentation Fault 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T19:36:10.880

如果您有错误`wkhtmltoimage`，（运行二进制文件 wkhtmltoimage-amd64 时出现分段错误）此步骤对我有用：

环境：CentOS 5.9，64 位，Xen 虚拟化云环境，只有终端/SSH 设置（没有任何 x-windows 引擎）。

安装依赖/包（顺序不相关）：

*   openssl-开发
*   urw-字体
*   libXext
*   libXrender
*   libfontconfig.so.1

下载 32 位最新稳定版本 (wkhtmltoimage-i386) 并运行（是的，您的系统是 64 位）。

简单测试：

```
wkhtmltoimage http://test.com/testpage.php /home/user/testimage.jpg 
```

笔记：

运行应用程序时仍然会出现图形模式的警告消息。忽略它或安装一个 x-window 引擎（也许你永远不会使用或设置它）。

确保将二进制文件放在具有适当权限的目录中。

确保以相对或绝对形式运行所有参数的二进制文件（例如`/usr/local/bin/wkhtmltoimage /home/user/test.html /home/user/test.jpg`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T05:36:41.963

根据我最近对该主题的研究，wkhtmltoimage 0.11 版本似乎存在问题。[这](https://drupal.org/node/870058)将帮助您为 linux 设置 wkhtmltoimage。您必须使用[Xvfb](http://en.wikipedia.org/wiki/Xvfb)显示服务器。

编辑：其他帮助文章

1.  [设置 wkhtmltoimage](https://code.google.com/p/wkhtmltopdf/issues/detail?id=730#c29)
2.  [使用 Xvfb](http://www.x.org/releases/X11R7.6/doc/man/man1/Xvfb.1.xhtml#heading6)

问候，
HBKsagar

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-14T10:02:29.890

1.  尝试使用来自 wkhtmltopdf.org 的 wkhtmltoimage 0.12.0
2.  检查使用 --disable-javascript 是否适用于示例页面。
3.  看看[邮件列表上的这个解决方案](https://groups.google.com/d/msg/wkhtmltopdf-general/hanlI7aAQJc/w8M5pam3X8EJ)是否适合你。

# sql-server - SSDT 生成非 SQLCMD 部署脚本

> ID：13349835
> 
> 赞同：7
> 
> 时间：2012-11-12T19:03:31.690
> 
> 标签：sql-server, sql-server-data-tools

我正在使用 SSDT 来管理我的数据库。现在它会生成 SQLCMD 部署脚本。有没有办法让它生成普通的 t-sql 脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-01T15:28:52.303

简短的回答：不。它们被设计成以这种方式工作。

更长的答案：不。SQL 项目在发布数据库时使用大量 SQLCMD 命令来管理变量等。这些可以从调用应用程序以标准 T-SQL 无法处理或处理不好的方式传入。SSDT 对旧 DB 项目所做的一项改进是，您现在被告知 SQLCMD 未启用，因此脚本根本不会运行。

我不确定您的方案，但您可以使用 SQLPackage 自动构建/发布项目。我们已经为我们的开发团队做到了这一点，因此他们可以轻松地刷新本地工作副本，而无需打开项目或运行脚本。

# c# - 如何检测 ListView 项目的重新排序

> ID：13349836
> 
> 赞同：0
> 
> 时间：2012-11-12T19:03:31.533
> 
> 标签：c#, xaml, windows-runtime

我有一个绑定到 ObservableCollection 的 ListView；此列表视图中的项目可以重新排序。

但是，我不知道如何检测项目何时重新排序。我找不到任何相关的 ListView 事件。ObservableCollection 的 CollectionChanged 事件在拖动项目时会触发两次（“添加”和“删除”事件），因此我认为无法判断项目是否实际在 UI 中移动，或者我是否以编程方式添加了新物品。

有什么方法可以检测物品何时被重新排序？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T08:55:04.593

你应该改变你的拖放。检查您的 ItemsControl.DataContext 是否是 ObservableCollection 以及是否调用 .Move 而不是 .Remove 然后 .Add。这样，您的基础集合将获得正确的事件，并且您可以简单地处理它。

你说你不能自己实现拖动，这是可能的。这是一个 ListView 上的示例，它实现了相同列表和其他列表之间的拖放。一种选择是从这里开始并将其修改为调用 .Move 。它还具有能够绘制装饰器以使其看起来漂亮的优点。

[如何在数据绑定的 ItemsControls 之间拖放项目](http://www.zagstudio.com/blog/488#.UKJaGoex9vA)

我了解您可能希望避免实现这一点，我认为您唯一的其他选择是为您的 Collection 公开 CollectionView 而不是依赖于创建的默认视图。我不确定这是否可以让您检测运动而不是添加/删除。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-14T21:23:47.413

似乎有用于重新排序列表的事件：DragItemsStarting 和 Drop。但是，Drop 事件目前仅适用于`ObservableVector<object>`

[http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/431cb3b4-0643-4a0e-8f1a-fc6e1e726ffb](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/431cb3b4-0643-4a0e-8f1a-fc6e1e726ffb)

# java - 基于 Java 的服务器无法使用完整的 VPS 内存运行

> ID：13349850
> 
> 赞同：0
> 
> 时间：2012-11-12T19:04:31.593
> 
> 标签：java, out-of-memory, minecraft

我已经购买了具有 2GB 内存和 Debian x64 的 VPS 服务器。当我想使用以下命令运行 Minecraft 服务器时：
**screen java -Xmx1600M -Xms1600M -jar craftbukkit.jar**
但服务器不断关闭并显示信息*[screen is terminating]，*在日志中我可以找到：[http://pastebin.com /YupAEnyN](http://pastebin.com/YupAEnyN)
系统使用的内存不足：http: [//i.stack.imgur.com/2Yrl2.png](http://i.stack.imgur.com/2Yrl2.png)
不幸的是，我无法进行交换，因为 VPS 在 OpenVM 下工作。
如果我想用尽可能多的 RAM 运行服务器，我应该怎么做？服务器正在运行 -Xms1536M -Xmx1536M 但我想获得更多...
感谢您的提前！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:18:16.723

我认为您需要减少内存设置而不是尝试增加它们。

请注意，错误是`Native memory allocation (malloc) failed`

-Xmx 标志会增加 Java 堆内存。它为 Java 代码提供了更多内存。但是，这不是您的问题所在。Java 有足够的内存。该错误表明本机代码内存不足。

假设使用 2GB 的 RAM，Java 进程将有 1.7GB 可用。这是绝对不能超过的操作系统定义的限制。（我不知道你的系统的真正价值是多少，我只是假装它是 1.7GB） 现在你指定 -Xms1600M。您刚刚为 Java 代码保留了 1.6GB，并为任何其他本机代码留下了微不足道的 100MB。

如果是我，我会从 -Xms1024 -Xmx1024 开始，为 Java 代码提供 1GB 的空间，为其他本机代码提供数百 MB 的空间。只有当进程开始在 Java 代码（不是本机代码）中出现 OutOfMemory 异常时，我才会考虑提高这些值。

这整个事情是相当违反直觉的。有关更深入的解释，请参阅以下文章： [http ://www.ibm.com/developerworks/linux/library/j-nativememory-linux/index.html](http://www.ibm.com/developerworks/linux/library/j-nativememory-linux/index.html)

# algorithm - 在特定级别查找二叉树中的所有节点（面试查询）

> ID：13349853
> 
> 赞同：4
> 
> 时间：2012-11-12T19:04:39.830
> 
> 标签：algorithm, binary-tree, breadth-first-search

我的意思是在特定级别上，而不是在特定级别上。有人可以检查我修改后的 BFS 算法吗？（大部分来自维基百科）

```
Queue levelorder(root, levelRequested){
      int currentLevel = 0;
      q = empty queue
      q.enqueue(root)
      while not q.empty do{
           if(currentLevel==levelRequested)
                 return q;
           node := q.dequeue()
           visit(node)
           if(node.left!=null || node.right!=null){
                 currentLevel++;
                 if node.left ≠ null
                       q.enqueue(node.left)
                 if node.right ≠ null
                       q.enqueue(node.right)
           }
      }
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-12T19:44:51.890

我认为递归解决方案会更简洁：

```
/*
 * node - node being visited
 * clevel - current level
 * rlevel - requested level
 * result - result queue
 */
drill (node, clevel, rlevel, result) {
  if (clevel == rlevel) {
    result.enqueue (node);
  else {
    if (node.left != null)
      drill (node.left, clevel + 1, rlevel, result);
    if (node.right != null)
      drill (node.right, clevel + 1, rlevel, result);
  }
} 
```

初始调用如下所示：`drill (root, 0, n, rqueue);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T20:06:44.597

您的算法的问题是所有处于同一级别的节点错误地增加了级别计数。

**解释 ：**

1.  将根的级别设置为0

2.  在任何级别添加节点时，请将其级别设置为比其父级高 1。

3.  一旦你得到任何级别号等于你需要的级别号的节点，简单地跳出 BFS，并转储队列中具有相同级别号的当前节点后面的所有节点。

详情请看评论。

这是一种解决方案：

```
void Tree::printSameLevel(int requiredLevel) {
    queue BFSQ;
    TreeNode * temp;
    BFSQ.push(getHead());
    while(!BFSQ.empty()) {
        temp = BFSQ.front();
        BFSQ.pop();
        //if the level of the current node is equal to the 
        //required level, we can stop processing now and simply 
        //remove from the queue all the elements that follow 
        //and have the same level number.
        //It follows from properties of BFS that such elements 
        //will occur in a series ( level by level traversal).
        if(temp->level == requiredLevel) {
            break;
        }
        if(temp->right) {
            BFSQ.push(temp->right);
            temp->right->level = temp->level + 1;
        }
        if(temp->left) {
            BFSQ.push(temp->left);
            temp->left->level = temp->level + 1;
        }
    }
    if(!BFSQ.empty() || requiredLevel==0) {
        cout << "Printing all the nodes at level " << requiredLevel << " : ";
        while(temp&&temp->level == requiredLevel) {
            cout << temp->data << "  ";
            temp = BFSQ.front();
            BFSQ.pop();
        }
    }
} 
```

这是一些示例输出：

```
 5    
  7       3
8   6   4   2  

TREE STATS
_____________________
Inorder Trace =  2 3 4 5 6 7 8
Height = 2
Internal Nodes = 3
Leaf Nodes = 4
Total Nodes = 7
_____________________

Trees printed above are mirrors!

Printing all the nodes at level 0 : 5  
Printing all the nodes at level 1 : 7  3 
```

[如果您有兴趣，我已在此处](https://github.com/madaan/entire-src/blob/master/DS/trees/tree.h)将函数添加到我的通用树实现中。你会发现大量的树操作供参考（镜子、高度、漂亮的打印等）。

# python - 在列表推导中使用集合

> ID：13349856
> 
> 赞同：0
> 
> 时间：2012-11-12T19:04:51.410
> 
> 标签：python

我正在尝试做的事情：创建并打印一个单词列表，其中单词的反面位于小写单词集中。例如，“timer”及其反义词“remit”都在小写单词列表中。

到目前为止我所拥有的：

```
 s = set(lowers)
     [word for word in s if list(word).reverse() in s] 
```

我只是得到一个空列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T19:06:14.620

只需使用`[::-1]`，这里不需要使用 list() 并在原地更改列表时`list(word).reverse()`返回。`None`您也可以使用`"".join(reversed(word))`，但我想这`word[::-1]`很简单：

`[word for word in s if word[::-1] in s]`

```
In [193]: word="timer"

In [194]: print list(word).reverse()
None

In [195]: word[::-1]
Out[195]: 'remit'

In [196]: "".join(reversed(word))
Out[196]: 'remit' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T19:06:52.787

该`list.reverse()`方法将列表反转到位。它的返回值为`None`。如果你想反转一个字符串，只需使用`word[::-1]`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T19:06:44.927

`list.reverse()`将列表反转到位并且不返回任何内容。你需要`"".join(reversed(list))`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-12T19:08:26.793

试试这个：

```
s = set(lowers)
[word for word in s if word.lower()[::-1] in s] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T19:10:23.980

您应该`[::-1]`用于反转字符串 -

```
[word for word in s if word[::-1] in s] 
```

# http - 我可以从一台客户端机器上模拟繁重的 http 负载吗

> ID：13349859
> 
> 赞同：6
> 
> 时间：2012-11-12T19:05:01.090
> 
> 标签：http, networking, tcp

我有一个在 linux 主机上运行的 http 服务器程序，说 B 侦听端口并使用请求。我正在尝试为此 http 服务器生成巨大的负载（> 每秒 10k 个请求）。为此，我编写了一个 http 客户端程序，它将重复地从主机 A 向这个 http 服务器发布一个固定大小的请求。

现在，如果我在主机 A 上运行 httpclient 程序的多个实例会有什么影响。这会产生足够的负载吗？或者我可以从一台与一个服务器端口通信的机器上运行多少个 http 客户端是否有限制。

到目前为止，我的观察是增加实例数量并不能真正产生足够的负载，或者 http 服务器程序/操作系统不接受。而且我看到 CPU/内存/网络消耗很少。

有任何想法吗？我如何衡量瓶颈？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-12T19:25:11.183

尝试 apache ab 对您的网络服务器进行基准测试。这非常有效地生成并发 http 请求，并且是为此目的的事实标准。

使用 ab，您可以轻松地在一个 URL 上创建高负载并分析结果

[http://httpd.apache.org/docs/2.2/programs/ab.html](http://httpd.apache.org/docs/2.2/programs/ab.html)

```
$ ab -n 1000 -c 5 
```

总共创建 1000 个，5 个并发请求。很好的教程如何使用 ab [http://www.cyberciti.biz/tips/howto-performance-benchmarks-a-web-server.html](http://www.cyberciti.biz/tips/howto-performance-benchmarks-a-web-server.html)

# java - spock 测试中的对象比较失败

> ID：13349863
> 
> 赞同：0
> 
> 时间：2012-11-12T19:05:11.793
> 
> 标签：java, unit-testing, groovy, spock

我正在尝试使用 spock 为我拥有的方法编写测试。

该方法看起来像这样 -

```
InvoiceView getInvoiceDetailView(String invoiceNumber, Boolean isNew) {
    InvoiceView detailView;
    if (isNew) {
        newInvoiceDao.em = billingEm;
        //call InvoiceDao
        List<GroovyRowResult> invoiceSummaryRowResult = billingAdmin.rows(InvoiceQueries.GET_NEW_INVOICE_SUMMARIES_BY_NUMBER, [invoiceNumber:invoiceNumber]);
        List<GroovyRowResult> invoiceDetailsRowResult = billingAdmin.rows(InvoiceQueries.GET_NEW_INVOICE_DETAILS_BY_NUMBER, [invoiceNumber:invoiceNumber]);
        InvoiceModel invoiceModel = newInvoiceDao.getInvoice(invoiceNumber);
        detailView = new InvoiceView(invoice:invoiceModel,
                                             summary:invoiceSummaryRowResult,
                                            details:invoiceDetailsRowResult);
} ... 
```

我的测试只是试图断言，当调用此方法时将 true 作为 isNew 参数的值传入，将返回一个有效的 InvoiceView 对象。

在我的 spock 测试中，我创建了一些我希望从该方法返回的对象：

```
def expectedInvoiceModel = new InvoiceModel()
def expectedInvoiceSummaryRowResult = new ArrayList<GroovyRowResult>()
def expectedInvoiceDetailsRowResult = new ArrayList<GroovyRowResult>()

def expectedInvoiceView = new InvoiceView(invoice:expectedInvoiceModel,
                                          summary:expectedInvoiceSummaryRowResult,
                                          details:expectedInvoiceDetailsRowResult) 
```

我还模拟了我将调用的 dao 对象：

```
def setup() {
    ...
    service.billingAdmin = Mock(Sql)
    ...
} 
```

所以最后到了Spock夹具上。我已将有问题的比较行注释掉并进行了解决。我的问题是 - 为什么我的“then”块中的第一行失败？

```
def "getInvoiceDetailView returns valid InvoiceView for new invoice"() {
    given:
        service.billingAdmin.rows(InvoiceQueries.GET_NEW_INVOICE_SUMMARIES_BY_NUMBER, [invoiceNumber:invoiceNumber]) >> expectedInvoiceSummaryRowResult
        service.billingAdmin.rows(InvoiceQueries.GET_NEW_INVOICE_DETAILS_BY_NUMBER, [invoiceNumber:invoiceNumber]) >> expectedInvoiceDetailsRowResult
        service.newInvoiceDao.getInvoice(_) >> expectedInvoiceModel

    when:
        def result = service.getInvoiceDetailView(invoiceNumber, true)
    then:
        //result == expectedInvoiceView -- Why doesn't this work?
        result.invoice == expectedInvoiceModel
        result.summary == expectedInvoiceSummaryRowResult
        result.details == expectedInvoiceDetailsRowResult
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T21:17:28.357

`equals`显然，根据 class的方法，对象并不相等`InvoiceView`。或者，也许该类没有声明`equals`方法，并且对象不相同（根据`Object.equals`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:49:54.713

扎卡里。

您没有正确模拟 getInvoice 方法。尽管您通过两个参数调用它，但您的模拟调用只需要一个（“_”字符接受任何参数，但将与一个完全匹配）。由于没有匹配的模拟方法，对 getInvoice 的调用将返回默认值 null，从而使您的测试失败。

您应该执行以下操作以使您的测试通过：

```
service.newInvoiceDao.getInvoice(_, _) >> expectedInvoiceModel 
```

我写了一个小测试来更清楚地说明这一点。给定以下课程：

```
private static class StringUtils {
    public String concatenate(String a, String b) {
        return a + b;
    }
} 
```

以下测试将失败：

```
def "concatenation should work!"() {
    given: 
    StringUtils su = Mock()
    su.concatenate(_) >> "ab"

    when:
    def result = su.concatenate("a", "b")

    then:
    result == "ab" 
} 
```

请注意，我的模拟方法只需要一个参数：

```
su.concatenate(_) >> "ab" 
```

这是显示我返回空值的错误消息：

```
Condition not satisfied:

result == "ab"
|      |
null   false 
```

但是，如果我正确模拟连接方法，测试将成功：

```
su.concatenate(_, _) >> "ab" 
```

# prestashop - 为自定义类实现“默认”行为（在任何给定时间只有一项可能处于活动状态）

> ID：13349865
> 
> 赞同：0
> 
> 时间：2012-11-12T19:05:20.893
> 
> 标签：prestashop

我正在构建一个将 URL 与标题相关联的视频模块（它很简单），但我需要它来强制执行“默认”行为，其中在任何给定时间只有一个项目可能处于活动状态。Prestashop 的悲惨文件将是我的死亡......

可以在[此处](https://stackoverflow.com/questions/13313782/associating-an-item-to-multiple-other-items-of-a-different-class-using-prestas)找到此小型努力的代码（关于我正在努力解决的另一个 SO 问题）。

我的想法是在后台的 AdminVideo 控制器内的 postProcess 函数中运行 SQL 查询。在这里 - 在插入/更新之后 - 我会触发一个 SQL 查询，它将所有其他行上的“活动”列的值设置为 0。

我的问题是这个函数 - postProcess() - 被一次又一次地调用（包括当需要列出视频时）并且查询不能每次都运行。

我整天都在为这个问题苦苦挣扎，不知道下一步该怎么做。

我究竟做错了什么？

是否有另一种方法可以重载以便在每次更新/创建行时轻松触发 SQL 查询？

1.5版有没有关于这个主题的好书？花更多时间在 SO 中寻找答案而不是做一些实际工作真的很令人沮丧。

谢谢，我真的很感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T22:00:04.130

您必须检查 _postProcess 函数中的提交按钮。
例如，在`modules/bankwire/bankwire.php`脚本中查看 bankwire 模块的 _postProcess 函数：

```
private function _postProcess() {
  if (Tools::isSubmit('btnSubmit')) {
    Configuration::updateValue('BANK_WIRE_DETAILS', Tools::getValue('details'));
        ...
  }
} 
```

# excel - Excel VBA 写入文件以获取多维数据

> ID：13349866
> 
> 赞同：1
> 
> 时间：2012-11-12T19:05:30.577
> 
> 标签：excel, vba, multidimensional-array

我有我想在 VBA 中写入文件的三维数据。数据将具有时间轴、空间轴和幅度轴。因此，幅度数据将采用 A（空间，时间）的形式。有谁知道如何将其“写入”到 vba 代码中的文本文件中？我不确定如何用两个索引循环“Write #1”。感谢您的帮助！

这是我期待的输出：

```
 space1  space2  space3
time1    A(1,1)  A(1,2)  A(1,3)
time2    A(2,1)  A(2,2)  A(2,3)
time3    A(3,1)  A(3,2)  A(3,3) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T03:34:33.247

我会使用`Scripting Runtime`图书馆。你可以做一个简单的制表符分隔文件。如果您愿意，可以`Scripting`直接在 VBE 编辑器中引用该库：工具->参考->Microsoft Scripting Runtime

这是一些您可以使用的未经测试的代码：

```
Dim fso As FileSystemObject
Dim oFile As TextStream
Dim iTime As Integer, iSpace As Integer

Set oFile = fso.CreateTextFile(stringPath)

For iTime = 1 To UBound(A)
    For iSpace = 1 To UBound(A, 2)
        oFile.WriteLine (iTime & vbTab & iSpace & vbTab & A(iTime, iSpace))
    Next iSpace
Next iTime

oFile.Close
Set oFile = Nothing 
```

有关库的后期绑定参考，请参阅： [如何使用 VBA 创建和写入 txt 文件](https://stackoverflow.com/questions/11503174/how-to-create-and-write-to-a-txt-file-using-vba)

# python - 视觉反应时间的 Python 程序

> ID：13349869
> 
> 赞同：7
> 
> 时间：2012-11-12T19:05:44.927
> 
> 标签：python

我不是程序员。我正在做一个生物学项目，我将在其中进行反应时间实验。简而言之，只要屏幕上出现一个点或圆（一些图形），主题就应该点击屏幕上的任意位置。

细节：

1.  程序必须在设定的时钟时间（例如 16:03:00）开始，每次都会输入
2.  程序启动时定时器必须启动 (t=0)
3.  图形将根据相对于开始的预定时间（例如，1.5 秒、2 秒、3.5 秒……）在同一点（坐标）出现 2 分钟。
4.  每次受试者按下鼠标时，都必须记录相对于计时器的时间。

之后，我将在电子表格上将数据制成表格，并计算图形出现时间与受试者按下鼠标时间之间的时间差。

我对 Python 的了解非常有限。我从来没有对 Python 上的图形做过任何事情。这是我能想到的满足我需求的最佳设置。

我做了一些研究，这是我迄今为止发现的：

*   对于图形：Pyglet 有一个内置的调度功能（pyglet.clock.schedule_interval）
*   我可以使用 time.time 或 time.clock 来测量反应时间。我对使用哪个感到困惑。似乎有一些我不理解的细微差别。

也请不要该程序可以在 Windows 7 PC 或 MacBook 上运行。

我不需要完整的答案。只是一些建议和提示可以为我指明进一步研究的正确方向。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T19:18:03.223

您可以[`Pygame`](http://www.pygame.org/news.html)用于图形（在屏幕上绘制一个点等）。

您可以使用 datetime 来捕获开始时间：

```
from datetime import datetime

Time = datetime.now()

print(Time) 
```

[`Pyhook`](http://sourceforge.net/apps/mediawiki/pyhook/index.php?title=Main_Page)将捕获鼠标移动。

# magento - 带有消息“无效块类型：Mage_Catalog_Block_Category_List”的异常“Mage_Core_Exception”

> ID：13349872
> 
> 赞同：1
> 
> 时间：2012-11-12T19:05:55.020
> 
> 标签：magento, exception, block, categories

我的 exception.log 中反复出现以下错误。对故障排除和跟踪有什么建议吗？我在确定问题方面没有任何成功。

```
exception 'Mage_Core_Exception' with message 'Invalid block type: Mage_Catalog_Block_Category_List' in /chroot/home/mysite/mywebsite/html/app/Mage.php:550
Stack trace:
#0 /chroot/home/mysite/mywebsite/html/app/code/core/Mage/Core/Model/Layout.php(469): Mage::throwException('Invalid block t...')
#1 /chroot/home/mysite/mywebsite/html/app/code/core/Mage/Core/Model/Layout.php(411): Mage_Core_Model_Layout->_getBlockInstance('catalog/categor...', Array)
#2 /chroot/home/mysite/mywebsite/html/app/code/core/Mage/Core/Model/Layout.php(446): Mage_Core_Model_Layout->createBlock('catalog/categor...', 'catalog.categor...')
#3 /chroot/home/mysite/mywebsite/html/app/code/core/Mage/Core/Model/Layout.php(238): Mage_Core_Model_Layout->addBlock('catalog/categor...', 'catalog.categor...')
#4 /chroot/home/mysite/mywebsite/html/app/code/core/Mage/Core/Model/Layout.php(204): Mage_Core_Model_Layout->_generateBlock(Object(Mage_Core_Model_Layout_Element), Object(Mage_Core_Model_Layout_Element))
#5 /chroot/home/mysite/mywebsite/html/app/code/core/Mage/Core/Model/Layout.php(209): Mage_Core_Model_Layout->generateBlocks(Object(Mage_Core_Model_Layout_Element))
#6 /chroot/home/mysite/mywebsite/html/app/code/core/Mage/Core/Controller/Varien/Action.php(343): Mage_Core_Model_Layout->generateBlocks()
#7 /chroot/home/mysite/mywebsite/html/app/code/core/Mage/Catalog/controllers/ProductController.php(115): Mage_Core_Controller_Varien_Action->generateLayoutBlocks()
#8 /chroot/home/mysite/mywebsite/html/app/code/core/Mage/Catalog/controllers/ProductController.php(149): Mage_Catalog_ProductController->_initProductLayout(Object(Mage_Catalog_Model_Product))
#9 /chroot/home/mysite/mywebsite/html/app/code/core/Mage/Core/Controller/Varien/Action.php(418): Mage_Catalog_ProductController->viewAction()
#10 /chroot/home/mysite/mywebsite/html/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(254): Mage_Core_Controller_Varien_Action->dispatch('view')
#11 /chroot/home/mysite/mywebsite/html/app/code/core/Mage/Core/Controller/Varien/Front.php(177): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#12 /chroot/home/mysite/mywebsite/html/app/code/core/Mage/Core/Model/App.php(304): Mage_Core_Controller_Varien_Front->dispatch()
#13 /chroot/home/mysite/mywebsite/html/app/Mage.php(596): Mage_Core_Model_App->run(Array)
#14 /chroot/home/mysite/mywebsite/html/index.php(78): Mage::run('', 'store')
#15 {main} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:00:49.637

做

```
Mage_Catalog_Block_Category_List 
```

作为一个类存在于：

```
app/code/core/Mage/Catalog/Block/Category 
```

或者

```
app/code/local/Mage/Catalog/Block/Category 
```

我正在运行 Magento 1.7 并且找不到该类。也许您正在寻找：

```
Mage_Catalog_Block_Product_List 
```

# php - 如何从子ID获取父ID（根父）

> ID：13349877
> 
> 赞同：3
> 
> 时间：2012-11-12T19:06:38.043
> 
> 标签：php, recursion, hierarchical-trees

> **可能重复：**
> [函数只返回一次，为什么？](https://stackoverflow.com/questions/13348229/function-returning-only-once-why)

我的数据库结构看起来像

```
id|parent|
1 |   0  |
2 |   0  |
3 |   0  |
4 |   1  |
5 |   4  |
6 |   5  | 
```

我需要一个将id作为参数的父（即父=0）的函数例如.. get_parent(6)==returns 1 我做了一些研究，发现了这个问题

[如何递归获取此 MySQL 表中行的“父 ID”？](https://stackoverflow.com/questions/4006974/how-can-i-recursively-obtain-the-parent-id-of-rows-in-this-mysql-table)

我试着做这个功能

```
 function get_parent_id($cid,$found=array())
    {
     array_push($found,$cid);
     $sql="SELECT * FROM tbl_destinations WHERE id=$cid";
     $result = mysql_query($sql) or die ($sql);
     if(mysql_num_rows($result))
     {

        while($row = mysql_fetch_assoc($result))
        {
        $found[] = get_parent_id($row['parent'], $found);
        }
     }
return $found;
       } 
```

我打电话

```
$fnd=get_parent_id();
$array_reverse($fnd);
$parent_root=$fnd['0']; 
```

但是我的方法是错误的。我哪里做错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T19:36:44.907

您是尝试在 SQL 查询中获取父 ID，还是使用 PHP？如果您正在考虑使用 PHP，您可以`$arr[6]['parent']`假设您将数据库中的信息放入数组中。或者，你可以有一个功能：

```
<?php
//Let's assume you have your data from the database as such
$arr = array(
    array('id' => 1, 'parent' => 0),
    array('id' => 2, 'parent' => 0),
    array('id' => 3, 'parent' => 0),
    array('id' => 4, 'parent' => 1),
    array('id' => 5, 'parent' => 4),
    array('id' => 6, 'parent' => 5));

function get_key($arr, $id)
{
    foreach ($arr as $key => $val) {
        if ($val['id'] === $id) {
            return $key;
        }
    }
    return null;
}

function get_parent($arr, $id)
{
    $key = get_key($arr, $id);
    if ($arr[$key]['parent'] == 0)
    {
        return $id;
    }
    else 
    {
        return get_parent($arr, $arr[$key]['parent']);
    }
}

echo get_parent($arr, 6);
?> 
```

请注意，该代码未经测试，只是一个示例。

# iphone - iOS 中的 LocationManager 在调用委托之前重新分配

> ID：13349878
> 
> 赞同：0
> 
> 时间：2012-11-12T19:06:42.677
> 
> 标签：iphone, objective-c, ios, ipad, cocoa

我正在使用 ARC 并调用 LocationManager 来获取纬度和经度，但是在调用代表之前，内容正在被释放。以前有人遇到过这个问题吗？如果可能，我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:20:25.467

定义一个属性来保存对您的位置管理器的引用：

```
@proerty (strong,nonatomic) CLLocationManager *locationManager; 
```

然后在分配位置管理器时的 .m 文件中：

```
self.locationManager = [[CLLocationManager alloc] init]; 
```

# csv - SSRS 报告导出到 .csv 时显示的不可见列

> ID：13349888
> 
> 赞同：3
> 
> 时间：2012-11-12T19:06:54.353
> 
> 标签：csv, reporting-services, export

我有一个 SSRS 报告。我在 tablix 成员的隐藏属性中使用了一个表达式。我的意图是仅显示表达式的评估结果为“假”的那些记录。

当我将此报告导出到 excel 时，一切正常，即不显示隐藏记录，但是当我将相同的报告导出到 .csv 时，也会显示隐藏记录。

我曾尝试在隐藏属性中使用 =iif(Globals!RenderFormat.Name="CSV", True, False) 并尝试将“数据元素输出”从自动更改为输出，但它们没有奏效。

有人早点解决过这个问题吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T08:10:13.427

“隐藏”属性是报表项的格式属性。导出到 CSV 时，所有格式和布局属性都将被忽略，因此报告中存在的任何数据都将导出到 CSV 文件，无论“隐藏”属性的值如何。

一种解决方法是使用表达式来设置报表项的*值*，以便将其设置为空或零，而不是被隐藏（或被隐藏）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-11T13:30:05.050

CSV 或 XML 是数据渲染器，它只关心数据。这意味着数据仍然包含在 CSV 文件中，即使它们隐藏在 excel 导出中。要隐藏某些字段，您应该设置 DataElementOutput = "NoOutPut"。

# visual-c++ - 使用 Visual c++ 6.0 显示 ADDBTimeStamp

> ID：13349892
> 
> 赞同：0
> 
> 时间：2012-11-12T19:07:34.003
> 
> 标签：visual-c++, ado, foxpro

我正在使用 ADO (msado15.dll) 从 Visual c++ 6.0 控制台应用程序访问 Visual foxpro dbf 表并将信息显示到屏幕上。我可以访问表中的所有数据类型并将它们打印到屏幕上，除了 addbtimestamp 类型。如何打印一个 adddbtimestamp？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:32:17.967

I've found a solution. I did some MFC/Database tutorials and VC uses the COleDateTime to convert the database dateTime field.

```
// CREATE COleDateTime VAR m_TDATE = COleDateTime::GetCurrentTime(); m_TDATE = m_pSet->m_tableDateTime; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T21:26:47.320

听起来可能是由 ADO 驱动程序创建的列。VFP 具有 DateTime 和 Date 列类型，但没有您提到的类型。它可能是驱动程序添加的列。

# css - Kendo UI Grid：如果没有任何数据，则隐藏 detailInit 网格

> ID：13349900
> 
> 赞同：1
> 
> 时间：2012-11-12T19:08:08.877
> 
> 标签：css, asp.net-mvc, kendo-ui

我正在使用 KendoUI 层次结构网格来显示父/子数据。

我能够正确填写所有内容并填充网格，但在某些情况下，父数据没有相应的子记录。

发生这种情况时，子网格标题仍然显示没有相应的记录。我想完全隐藏网格，或者至少不显示标题（这将呈现几乎相同的东西）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:56:09.997

您没有共享任何代码，因此我们可以更好地了解您当前的设置究竟是什么 - 根据您的配置，有不同的方法。

您是否有主网格模型的属性，可用于确定您是否有子记录？

如果没有这样的属性，您将需要初始化您的子 Grid 并且它应该执行请求。根据响应，如果没有记录，您可以使用[dataBound事件并隐藏 Grid。](http://docs.kendoui.com/api/web/grid#databound)**或者你可以做相反的事情 - 你可以让 Grid 最初隐藏并在dataBound**事件发生时显示它是否有任何记录。

如果主行中有属性表明没有子记录，则可以使用 Grid 的[detailInit](http://docs.kendoui.com/api/web/grid#detailinit)事件来完全删除子 Grid 或隐藏它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-25T20:15:53.090

在某些情况下，我需要隐藏子网格（取决于一个变量）。我所做的是：

```
detailInit: function (e) {
                    if (globalVariable == "SomeValue") {
                        div = jQuery("<div class = 'addMaterialVendors'/>");
                        subGrid = MethodToCreateSubgrid(div, variables, e.data);
                        div.appendTo(e.detailCell);
                    }
                    else {
                        $(".k-hierarchy-cell").remove();
                        $(".k-hierarchy-col").remove();
                    }
                }, 
```

# cryptography - WinRT 流加密

> ID：13349901
> 
> 赞同：6
> 
> 时间：2012-11-12T19:08:12.247
> 
> 标签：cryptography, windows-runtime

我需要下载一个大的视频文件并将其保存到硬盘上。然后我需要使用 XAML 媒体元素播放此视频文件。但该文件必须使用 AES 256 算法和加密密钥进行加密。任何时候都不得将未加密的数据写入硬盘驱动器。

例如，我可以有一个流，可以将未加密的数据转换为文件，反之亦然。

WinRT 有一个[API](http://msdn.microsoft.com/en-us/library/windows/apps/br241490.aspx) ，允许我加密缓冲区。但是如果文件很大，这将不起作用。WinRT 有一个 API，允许加密流[DataProtectionProvider](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh464970.aspx)。但是有一个神奇的 protectionDescriptor 参数，我没有找到有关如何指定算法和密钥的信息。

我能够做的是在 C# 中实现 IRandomAccessStream。它有效，但速度很慢。

请不要提供与 WinRT 平台无关的答案。任何其他帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:36:13.100

此处的示例：http: [//msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.security.cryptography.dataprotection.dataprotectionprovider.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.security.cryptography.dataprotection.dataprotectionprovider.aspx)为您提供有关 protectionDescriptor 的信息，简而言之，它识别将提供加密密钥的用户或组或计算机，在您的示例中：

```
String strDescriptor = "LOCAL=user"; 
```

然后：

```
DataProtectionProvider Provider = new DataProtectionProvider(strDescriptor); 
```

这意味着密钥的提供者将是当前用户，从这个类的外观来看，它似乎是为了保护用户的信息，可能使用用户自己生成的证书和默认算法，它不能被覆盖，所以如果您正在寻找一种明确指定密钥和算法的方法，您可能会遇到困难`CryptographicEngine`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T19:53:31.707

我能够实现使用 AES_CBC_PKCS7 算法即时加密或解密数据的 IRandomAccessStream。它支持顺序写入和随机访问读取。不幸的是，我无法分享源代码。

# algorithm - 线性时间排序

> ID：13349902
> 
> 赞同：2
> 
> 时间：2012-11-12T19:08:16.420
> 
> 标签：algorithm, sorting

我需要编写一个对大小为 [0..N-1] 的数组进行排序的算法，该算法填充了范围 [0..N-1] 的值。数组中的值不能重复。排序应该在线性时间内工作，我只允许使用一些额外的变量。

请评论我写的代码。据我猜测，最糟糕的时间是 2*N。难道还是线性时间？是否有可能更快？

```
public int sort(){
    int i  = 0;             
    while (i < n){
        if (a[i] != i)      
            switchElements(a[i], a[a[i]]);                  
        else
            i++;                    
    }
    return count;
} 
```

**附加 1** 我真的需要对数组进行排序，因为排序只是任务的一部分。完整的任务是在线性时间内查找数组中是否存在重复值，并且没有其他变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T19:10:37.860

**回答原始问题：**

带有元素的数组`[0..N-1]`，包含**不重复的**元素`[0..N-1]`

为什么还要排序？排序后的数组是**已知**的并且是`[0..N-1]`.

* * *

**考虑到您的附加 1：**您的算法看起来不错，您正在查看每个元素一次，并且必须至少查看每个元素一次，因此它不会变得更好。亦`2*N`是也`O(N)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T19:39:44.590

为了检测重复项，您可以进一步扩展该逻辑，将值强制放入各自的位置。

```
public int sort(){
    int i  = 0;             
    while (i < n){
        while (a[i] != a[a[i]])      
            switchElements(a[i], a[a[i]]);                  
        ++i;                    
    }
    return count;
} 
```

最后，如果对于任何`i`, `i`并且`A[i]`不匹配，则表示重复！
总的来说，它仍然是`O(N)`程序。

有关更多详细信息，请参阅以下帖子：
[在 O(n) 时间和 O(1) 空间中查找重复项](https://stackoverflow.com/questions/5739024/finding-duplicates-in-on-time-and-o1-space)

# javascript - 向 ASHX 处理程序发送大量数据

> ID：13349907
> 
> 赞同：1
> 
> 时间：2012-11-12T19:08:53.077
> 
> 标签：javascript, ashx, generic-handler

我需要将大量数据从 Web 应用程序发送到 ASHX 处理程序。然后，处理程序会将数据发送到 Web 服务以获取响应。（处理程序处理 Web 服务的原因是因为 Web 应用程序是用经典 ASP 编写的，并且处理程序我使用的是 .NET，所以我可以使用该服务。）

我需要做的是使用 Javascript 将数据发送到处理程序。现在我正在使用 XMLHttpRequest 并打开正确的 URL。但我不想通过查询字符串发送大量数据。所以我的问题是，我将如何向处理程序发送大量数据？如果除了使用 XMLHttpRequest 之外还有其他方法，我会全力以赴。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T19:11:16.233

您可以使用**POST**请求而不是**GET**请求

通常由发送的数据`get`附加到查询字符串..

发送的数据`post`未附加到查询字符串

```
var url = "get_data.ashx";
var params = "lorem=ipsum&name=binny";

http.open("POST", url, true);

http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
http.setRequestHeader("Content-length", params.length);
http.send(params); 
```

# c++ - 具有函数模板和重载的 C++ 类

> ID：13349910
> 
> 赞同：0
> 
> 时间：2012-11-12T19:09:22.017
> 
> 标签：c++, class, templates, overloading

我正在寻找在 C++ 中创建一个序列化类以满足我正在从事的项目的需要。考虑以下：

```
class serializer {
    private:
        void s(int in, std::string &out);
        void d(std::string in, int &out);

    public:    
        template<typename T> void serialize(T in, std::string &out){
            s(in, out);
        };

        template<typename T> void deserialize(std::string in, T &out){
            d(in, out);
        };
}; 
```

我是模板新手，所以我在那里做的一定有一些非常错误的事情，因为它不会链接抱怨“未定义的引用”：

```
undefined reference to `void serializer::serialize<int>
(int, std::basic_string<char, std::char_traits<char>, std::allocator<char> >&)' 
```

当这样调用时：

```
serializer s;
int t = 0;
std::string str;
s.serialize(t, str); 
```

我想要做的是有一个具有两个公共方法的类，无论它们的参数类型如何`serialize`，`deserialize`都可以调用它们，并且每个方法都会根据函数重载调用适当的私有函数。

我究竟做错了什么？

**编辑：**

问题是链接器错误是错误的。问题不在于函数模板，而在于 .cpp 文件中未正确声明为类成员的`s()`and函数。`d()`所以错误源于函数模板无法调用`d()`，`s()`因为它们没有被定义，只是被声明，生效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:50:23.687

问题很可能是您在 .cpp 文件中指定`s`并没有对类型进行[显式模板实例化](http://www.cplusplus.com/articles/1C75fSEw/)。尝试仅在头文件中实现这些方法。`d`

# user-interface - j2me 移动应用的 GUI 库

> ID：13349914
> 
> 赞同：3
> 
> 时间：2012-11-12T19:09:40.407
> 
> 标签：user-interface, mobile, java-me, lwuit

我正在开发一个简单的 j2me 应用程序。我正在使用 LWUIT 库为其创建 GUI。但事实证明，这个库在真实手机上非常慢（例如，当我按下一个将我重定向到另一个表单的按钮时，加载这个表单需要 0.5 到 1 秒。我已经在我的诺基亚上测试过C5-03\. 在模拟器中一切都很快。）。

所以现在我正在为 j2me 寻找另一个更快的 GUI 库。拜托，谁能给我一条关于什么lib更好用的建议？我的要求是：

1.  lib 附带了一些用于可视化 GUI 开发的程序（如 LWUIT 的资源编辑器）。
2.  我将完全控制屏幕上所有 GUI 元素的位置
3.  有一些有效的方法可以为我的应用创建和应用主题
4.  它应该相对较快地工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:34:33.380

我认为当我为诺基亚 s40 开发时，每个诺基亚系列都有一个定制的 lwuit 版本，当我使用 s40 lwuit 库
时，如果你找不到你正在开发的诺基亚系列的库，这个问题就解决了，你可以使用画布和绘制你自己的 GUI 它是如此之快

# c - C中的计数排序

> ID：13349915
> 
> 赞同：0
> 
> 时间：2012-11-12T19:09:41.280
> 
> 标签：c, sorting, counting

我对计数排序有疑问。当我对表格进行排序时，有时它会起作用，但有时不会（当 k == 大小时它不起作用），我不知道为什么。请帮忙。这是我的代码：

```
#include <stdio.h>
#include <time.h>
#include <stdlib.h>
#define MAX 100000
int tabA[MAX];
int tabB[MAX];
int tabC[MAX];
int k;

void scope(int size){
int i, max = 0, min;

min = tabA[1];

    for(i = 1; i <= size; i++){
        if(tabA[i] > max)
            max = tabA[i];
        if(tabA[i] < min)
            min = tabA[i];
    }

    k = max - min + 1;
}

void rand1(int size){
    int i;
    srand(time(NULL));

    for(i = 0; i <= size; i++)
        tabA[i] = rand() % 8;
} 

void countingsort(int size){
    int i;

    for(i = 0; i < k; i++)
        tabC[i] = 0;

    for(i = 0; i < size; i++)
        tabC[tabA[i + 1]] = tabC[tabA[i + 1]] + 1;

    for(i = 1; i <= k; i++)
        tabC[i] = tabC[i] + tabC[i - 1];

    for(i = size; i >= 1; i--){
        tabB[tabC[tabA[i]]] = tabA[i];
        tabC[tabA[i]] = tabC[tabA[i]] - 1;
    }   
}

int main(void){
    int size, i;

    printf("Please write how many numbers you wont to sort: ");
    scanf("%d", &size);

    rand1(size);
    scope(size);
    countingsort(size);

    printf("Numbers to sort:\n");
    for(i = 1; i <= size; i++)
        printf("%d\n", tabA[i]);

    printf("\nK: %d\n\n", k);

    printf("Sorting numbers:\n");
    for(i = 1; i <= size; i++)
        printf("%d\n", tabB[i]);

    return 0;
} 
```

谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:38:53.460

至少这段代码：

```
for(i = 0; i < k; i++)
    tabC[i] = 0;

for(i = 0; i < size; i++)
    tabC[tabA[i + 1]] = tabC[tabA[i + 1]] + 1;

for(i = 1; i <= k; i++)
    tabC[i] = tabC[i] + tabC[i - 1]; 
```

有问题，在第一个初始化循环中，但在最后一个循环中，从 开始`i`，而假设被初始化。此外，中间循环假设值的范围是，它可能不是（看看随机化函数，它实际上可能是，但这只是我想的巧合）。`0..k-1``i``1..k``tabC``tabA``0..k`

# c# - 如何在帖子中保留 IEnumerable 值

> ID：13349918
> 
> 赞同：0
> 
> 时间：2012-11-12T19:10:09.160
> 
> 标签：c#, asp.net-mvc

我有以下视图模型：

```
 public class ViewModel
    {
        public Address Address {get;set;}
        [DisplayName("State")]
        public IEnumerable<SelectListItem> StateSelect { get; set; }
        public string StateID { get; set; }

        public ViewModel()
        {
        }

        public ViewModel(Stuff s, IDataContext dc)
        {
            StateSelect = dc.States.ToList().Select(x => new SelectListItem
                                                             {
                                                                 Value = x.Id.ToString(),
                                                                 Text = x.Name
                                                             });
           Address = s.Address;

        } 
```

在我的编辑视图中：

```
<div class="display-field">
                @Html.DropDownListFor(model => model.Address.StateID, Model.StateSelect,)
                @Html.ValidationMessageFor(model => model.StateSelect)
            </div> 
```

我的控制器：

```
public ActionResult Edit(int id)
        {
            var stuff = context.Stuff.Find(id);
            if (stuff== null)
            {
                throw new Exception("Stuff not found.");
            }
            return View(new ViewModel(stuff, context));
        }

        [HttpPost]
        public ActionResult Edit(ViewModel model)
        {
            try
            {
                if (ModelState.IsValid)
                {
                    //deeper logic, adds to ModelState.AddModelError
                    if(stillNotValid)
                         return View(model)
                }
                return RedirectToAction("Index");
            }
            catch
            {
                return View();
            }
        } 
```

现在，在我`Edit`看来，下拉列表已正确填充。但是，当我`Edit`在控制器中发布到时，我的模型总是有一个空 StateSelect。

如何确保将 StateSelect 推送到我`Edit`的帖子，以便在出现验证错误时可以重新填充下拉列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:24:50.030

您需要将您的收藏放在里面，`<form />`以便通过请求将其发布到服务器。在这种情况下，您很可能必须使用隐藏输入“手动”构建标记，或者将标记放在隐藏块中以对用户隐藏它。

您确定要来回发送此列表只是为了在视图模型中拥有此集合吗？还有另一种解决方案 - 将此列表发送到 ViewBag 中的视图并将其绑定到您的操作中。这将使您无法`<form />`建模并减少发布请求的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:32:46.323

要将 StateSelect 发布到控制器，您必须将其元素写入具有特殊名称的隐藏字段（[查看此操作方法](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)）。但是您可以在发布后在控制器操作 Edit 中重新填充此 IEnumerable。这将是正确的决定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T19:41:53.497

由于各种原因，我会避免在这样的浏览器请求中保留数据

1.  HTTP 被设计为无状态，如果您将表单开发为尽可能无状态，它可以很好地扩展
2.  在这样的表单中添加状态信息意味着生成不必要的 HTML，这需要时间在服务器上构建，需要时间传输到客户端并需要时间在浏览器中呈现，总体上会对性能造成很大影响（尽管你可以反对它使用“请求压缩”之类的东西）
3.  如果你有 jQuery 之类的东西在客户端运行，那么 DOM 解析就会变得低效，因为你的 DOM 有太多的 HTML

话虽如此，您可以在 cookie 中以隐藏变量的形式实现一些数据持久性，因为它的数据量很小，并用于跟踪您的用户如何结束您的表单，或者向导用户完成了多少等。

# javascript - D3 过渡：旋转和平移

> ID：13349925
> 
> 赞同：0
> 
> 时间：2012-11-12T19:10:32.370
> 
> 标签：javascript, d3.js

我是 d3 的新手，到目前为止我很喜欢它，但我试图把一些东西放在一起，但不知道如何纠正某些行为。

这是我正在尝试做的演示：

[已删除] 死链接

第一个行为是每个仪表的“起始”点始终默认为黑色，并且颜色从那里过渡。

第二个行为是旋转之间的过渡“反弹”。这是因为它不是围绕 (150,150) 旋转，而是围绕 (0,0) 旋转，这使得它在过渡中“反弹”，但我不知道如何解决这个问题。

有人可以帮我看看我哪里出错了吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:17:18.683

这两种行为都是您在每次重绘时重置仪表当前状态的结果。尝试取出线条：

```
pointer
  .attr("transform", null)
  .style("fill", null); 
```

变换将仪表带回原点，填充将其带回黑色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T20:50:15.657

此功能将修复弹跳。我需要一个插值函数来消除弹跳。a 是优先位置。

```
pointer.transition()
        .style("fill", this.valueToColor(value))
        .duration(1000)
        .ease("bounce")
        .attrTween("transform", tween);

    function tween(d, i, a) {
      return d3.interpolateString(a, "rotate(" + rotateAngle + ", 150, 150)");
    } 
```

# javascript - Javascript 功能在移动 Safari 上运行良好

> ID：13349929
> 
> 赞同：1
> 
> 时间：2012-11-12T19:10:47.247
> 
> 标签：javascript, ios, mobile-safari

我使用由[Lazar Laszlo](https://github.com/LazarSoft/jsqrcode)`QR Reader`开发的 JavaScript 。很不错的剧本。除了在移动 Safari 上，一切正常。

如果我使用大于 2000x2000 像素的图像（例如 iPhone 5 相机图像），它将返回错误`cannot parse qr code`。同样的图片在桌面浏览器或 Android 系统上也能正常工作。

错误将发生在`line 70: http://cxg.de/_1ac831.htm`

你知道我为什么会有这么奇怪的行为吗？也许这是存储限制问题或其他问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-12T09:21:24.267

关闭此线程：导致此问题的[问题](https://github.com/LazarSoft/jsqrcode/issues/5)仍然存在。我怀疑这将永远是一个悬而未决的问题。

# python - 为什么 Mechanize(-Python) 似乎忽略了一些隐藏的表单字段而不是其他字段？

> ID：13349940
> 
> 赞同：2
> 
> 时间：2012-11-12T19:11:47.910
> 
> 标签：python, mechanize-python

我正在使用一个包含多个字段、一些文本和几个隐藏的表单。问题是，当我查看 mechanize.Browser 对象“看到”的字段列表时，缺少一些重要的隐藏字段，但不是全部。根据[这个类似问题](https://stackoverflow.com/questions/3338214/mechanize-does-not-see-some-hidden-form-inputs)的最流行的答案，这是因为网页正在查询用户代理字符串。对我来说不是这样，我知道这有两个原因：

1.  当我将“抓取”的表单保存到文件时，我可以看到缺少的字段，并且
2.  正如该解决方案所建议的那样，我已经更改了浏览器对象的用户代理字符串，但这对我没有帮助。

对我有帮助的是该问题的[第二受欢迎的解决方案](https://stackoverflow.com/a/11394457/1335290)，但我不明白为什么会这样。为什么 Mechanize 会“看到”一些隐藏的表单字段而不是其他字段，需要手动输入缺失的字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:24:41.727

诚然，我不知道您实际上想对您做什么 - 但作为多年来一直在抓取网页的人，我必须给您一些不请自来的建议。我提前道歉。

我强烈建议您过渡到可以处理 javascript 的东西。Mechanize 是一个很棒的模块，它在过去非常有用，但是网络上全是闪烁的灯光、CSS 和跳舞的婴儿，你必须点击。

我这么说的原因是，“隐藏”字段可能是一些花哨的东西，或者它们可能是 javascript 修改的形式，你会浪费数小时试图逆向工程它是如何工作的，只是将方形钉锤入圆孔。

我建议的现代但不幸的是 Mechanize 的重量级替代品是：

*   [phantomjs](http://phantomjs.org/)提供基于 WebKit 的以 javascript 为中心的方式与网页交互（无头，这是一个奖励）它基于 Qt，但具有可靠的发布二进制文件，如果您从源代码构建它实际上包含运行所需的所有内容，而无需同步使用某些特定版本的 Qt。

*   [QtWebKit 的PySide](http://www.pyside.org/)绑定很漂亮，虽然可能会有一些学习曲线，但恕我直言，我最喜欢的是因为能够进入浏览器内部并弄脏我的手来看看发生了什么真是太好了。

*   [WebKit 还提供了一个不错的接口（虽然 Python 对它的支持很差），您可以在其中启用浏览器中的 websocket 服务器，并使用Inspector.json](http://trac.webkit.org/browser/trunk/Source/WebCore/inspector/Inspector.json)中定义的 API 通过 websocket 驱动它。Stock Chrome 开箱即用地支持此功能。您可以[在 Chrome 开发者网站上找到更多详细信息。](https://developers.google.com/chrome-developer-tools/docs/remote-debugging)

    因此，WebKit 非常重，与您要询问的内容无关 - 但从长远来看，这将是您最终能够真正自动导航和抓取网络的地方。

# c# - 在这种情况下，组合优于继承？

> ID：13349942
> 
> 赞同：3
> 
> 时间：2012-11-12T19:12:04.477
> 
> 标签：c#, inheritance, composition

想询问组合而不是继承在这里是否有意义，如果是这样的话，这是一个很好的方法。

我有一个这样的界面：

```
public interface IUser
{
  string FirstName {get; set}
  string LastName  {get; set}
} 
```

还有一个“高级”用户界面，它具有与 IUser 相同的字段，但有一些附加功能。电话号码、电子邮件地址等

这个`IAdvancedUser`接口是否应该继承`IUser`并添加它自己的属性，或者在其中包含一个实例`IUser`，并使用 setter 注入来实例化该成员，是否也有意义？如果是后者，是否有一些 .Net/C# 习语在这些情况下运行良好——例如，通过包装或其他方法将`IUser`成员公开为成员？`IAdvancedUser`

这些是 DTO 对象，其中没有方法，只有属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:19:25.457

答案是：一定`IAdvancedUser`是一个`IUser`？

在这种情况下：不，使用继承。

但是，“ `composition over inheritance`”不适用于接口，因为它们不遵循与类相同的规则。

例如，您可以这样做：

```
interface IAdvancedFeatures
interface IUser
interface IAdvancedUser : IUser, IAdvancedFeatures 
```

通过这种方式，您可以启用任何东西来实现高级功能，而不是强迫它成为用户，而在其他情况下，每个人都必须是高级用户。

我通常尝试将接口视为定义功能而不是角色。所以你可以说你应该支持组合（比如 my `IAdvancedUser`），但与类（你在内部组合）不同。

# ruby-on-rails - 如何保存访问数据以便在 google api 上进一步使用？

> ID：13349943
> 
> 赞同：0
> 
> 时间：2012-11-12T19:12:08.250
> 
> 标签：ruby-on-rails, ruby, google-api-client, google-api-ruby-client

允许 我有一项服务可以访问另一个数据服务（googledrive）。

这是否可以保存用户的访问数据以供进一步使用？

用户在我的服务中选择了一个 googledrive，我将他重新定义为 google 的身份验证页面。他接受这一点并为此努力。通过某些日子，他希望在 googledrive 服务上工作，并且他应该能够在不接受的情况下做到这一点。我怎样才能做到这一点？

我希望我解释想要什么..

提前问好！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:06:58.797

如果用户在您需要连接到 Drive API 时出现/与您的应用交互，那么您不需要做任何特别的事情。每当访问令牌过期（每 1 小时）时，只需在弹出窗口中重新授权（或隐藏 iframe，如果您在请求中设置了 immediate=true），这将生成一个新的访问令牌而不重新提示用户。只要用户不撤销对您的应用程序的访问权限，这就会起作用。

如果您需要在无法与用户交互的后台进程或队列中访问云端硬盘，请在发出初始授权请求时包含 access_type=offline。除了访问令牌之外，这还将生成一个刷新令牌。刷新令牌可用于在没有用户交互的情况下获取新的访问令牌，只要它们没有撤销访问权限。

# core-data - 核心数据 entityForName：nil 不是合法的 NSManagedObjectContext

> ID：13349945
> 
> 赞同：0
> 
> 时间：2012-11-12T19:12:12.790
> 
> 标签：core-data, nsuserdefaults, managedobjectcontext

我正在努力将数据添加到核心数据中并进行检索。看起来这段代码应该可以工作，但它抛出了我的标题中看到的错误。我基本上是从 NSUserDefaults 获取数据并尝试将其写入我的核心数据。

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *sellTitle = [defaults objectForKey:@"sellTitle"];

Item *item = (Item *)[NSEntityDescription insertNewObjectForEntityForName:@"Item" inManagedObjectContext:managedObjectContext];

[item setValue:sellTitle forKey:@"title"];
NSError *error;
if (![managedObjectContext save:&error]);
        NSLog(@"Failed to add all the data: %@", [error domain]); 
```

+entityForName: nil 不是搜索实体名称“项目”的合法 NSManagedObjectContext 参数

知道为什么吗？我已经尝试了一些在这里找到的解决方案，但没有任何效果。例如，我试图将它实现到 AppDelegate 中，但我的 ManagedObjectContext 仍然得到零回报。谢谢！

# python - 正则表达式：标点和贪婪

> ID：13349946
> 
> 赞同：2
> 
> 时间：2012-11-12T19:12:14.897
> 
> 标签：python, regex

假设这是我们的文本：

```
text = 'After 1992 , the winter and summer Olympics will be held two years apart , with the revised schedule beginning with the winter games in 1994 and the summer games in 1996 . ) Now , Mr. Pilson -- a former college basketball player who says a good negotiator needs `` a level of focus and intellectual attention  similar to a good athlete-s is facing the consequences of his own aggressiveness . Next month , talks will begin on two coveted CBS contracts'
print re.search(r'(\w+ |\W+ ){0,4}1992( \W+| \w+){4}', text).group(0) 
```

> **输出：** 1992年之后的冬天和

但是这个给了我：

```
print re.search(r'(\w+ |\W+ ){0,4}1992( \W+| \w+){0,4}', text).group(0) 
```

> **输出：** 1992 年之后，

这对我来说似乎很奇怪，因为为什么第二个正则表达式不贪婪？

这个比其他的有点奇怪：

```
print re.search(r'(\w+ |\W+ ){0,4}summer( \W+| \w+){0,4}', text).group(0) 
```

> **输出**, 冬夏 奥运会 将 举行

**问题**

1-第一个和第二个有什么区别。对我来说，它应该给出相同的文本，因为唯一的区别是`{0,4}`如果`{4}`给出长字符串，`{0,4}`应该给出相同的字符串，因为正则表达式是贪婪的。

2-问题可能与标点符号有关，因为第三个示例`{0,4}`和`{4}`..

我很困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T19:16:49.710

# php - 试图回显到新行但不起作用

> ID：13349954
> 
> 赞同：-6
> 
> 时间：2012-11-12T19:12:31.207
> 
> 标签：php

> **可能重复：**
> [PHP：尝试在 PHP 中使用“\n”</a>](https://stackoverflow.com/questions/2674703/php-trying-to-create-a-new-line-with-n) [换行帮助创建新行](https://stackoverflow.com/questions/6879617/line-break-help-in-php)

您好，我一直在尝试使用 \n 东西回显到 PHP 中的新行，但它不起作用，我尝试将它分开以防万一 PHP 感到困惑或其他东西，但它仍然无法正常工作，帮助！

这是我的代码，你不需要知道这一切：

取“id”为1，“sender”为“test”，“message”为“test”

```
echo($rows."\n");

while($rowarray = mysql_fetch_array($result)){

echo($rowarray["id"].") From: ".$rowarray["sender"]." - ".$rowarray["message"]."\n");

} 
```

我希望它像这样打印出来：

```
1 (or how many rows there are)
1) From: test - test 
```

我不知道我做错了什么。我真的很感激帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T19:14:41.910

如果您在浏览器中查看此输出，请尝试添加中断标记而不是换行符。

```
echo($rows."<br />");

while($rowarray = mysql_fetch_array($result)){
    echo($rowarray["id"].") From: ".$rowarray["sender"]." - ".$rowarray["message"]."<br />");
} 
```

我还要补充一点，不推荐使用 mysql* 扩展，您应该使用`mysqli`or`PDO`代替。

# django - django 自定义外部库

> ID：13349955
> 
> 赞同：2
> 
> 时间：2012-11-12T19:12:34.717
> 
> 标签：django, python-2.7

我想添加一些 Python 脚本以在我的项目中使用。我正在使用 django、python27、apache、mysql、mod_wsgi。这些脚本可以在 Django 之外自行运行。他们做到了。但是，我想将它们添加到我的 django 项目中，以便在整个项目中使用。我将 sys.path.append('path to my scripts') 添加到我的 settings.py 文件中。但是，当我在 django 视图中执行“从脚本导入 *”时，我收到一个导入错误，提示该模块不存在。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:20:28.070

您是否`__init__.py`在脚本文件夹中添加了一个文件以使该文件夹成为 python 包？该文件将常规文件夹与 python 包（除其他外）区分开来。

有关更多信息，请参阅 python 文档：http: [//docs.python.org/2/tutorial/modules.html](http://docs.python.org/2/tutorial/modules.html)

干杯

戴夫

# c# - Gstream MonoDeveloper

> ID：13349959
> 
> 赞同：3
> 
> 时间：2012-11-12T19:12:42.517
> 
> 标签：c#, monodevelop, gstreamer

我想使用`monodevelop`. 由于我需要用Gstreamer#播放音视频（实际上我必须使用Gstreamer-#），所以我尽力弄清楚如何做到这一点，但不幸的是，我没有找到任何合适的链接。

如果有人知道一些事情，如果您与我分享，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T23:45:57.757

就像文档说的那样，您需要引用 gstreamer-sharp.dll，而这又需要 gstreamersharpglie-0.10.dll 在同一个目录中。

```
Gst.Application.Init(); // First init GStreamer - important!!
var pipeDescription = "playbin uri=myVid.avi name=myBin";
var pipeline = Gst.Parse.Launch(pipeDescription) as Gst.Bin; //Launch Pipeline
var someElementInPipe = pipeline.GetChildByName("myBin") as Gst.Element;
pipeline.SetState(Gst.State.Playing); 
```

----或使用 ElementFactory 进行手动管道构建----

```
Gst.Application.Init();
var pipeline = new Gst.Pipeline();
var elementA = Gst.ElementFactory.Make("someElement");
var elementB = Gst.ElementFactory.Make("someElement");
pipeline.Add(elementA, elementB);
elementA.Link(elementB);
pipeline.SetState(Gst.State.Playing); 
```

有关更多示例，请查看以下测试： [http ://cgit.freedesktop.org/gstreamer/gstreamer-sharp/tree/tests](http://cgit.freedesktop.org/gstreamer/gstreamer-sharp/tree/tests)

# java - 如何在选择时预先选择一个选项（Struts 2）

> ID：13349961
> 
> 赞同：0
> 
> 时间：2012-11-12T19:12:54.050
> 
> 标签：java, jsp, struts2

我在使用 struts 2 预先选择值时遇到问题。

我正在使用标签 value="country" 定位到 String country="Japan" ，并且选择从列表（字符串列表）中加载元素。

但是，在加载时，选择只针对列表中的第一项。

看：

```
<s:select list="countries" value="country" label="Conutry" 
                                  headerKey="null" name="country" id="selectCountry"
                                  />

public List<String> countries;
public String country;
.....

public Countries(){
         countries=dao.list();
}

.........

getter and setter

........
//Action Used to get information
public getInfo(){
    country="USA"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:26:02.803

尝试：

```
<s:select list="countries" 
          value="country" 
          label="Conutry" 
          headerKey="country" 
          headerValue="contry" 
          name="countries" 
          id="selectCountry"/> 
```

`headerKey`表示您发布的值。
`headerValue`将显示在列表中。

# jquery - JQuery 选择器：(class1 OR class2) AND (class3 OR class4) - 我如何编写这个选择器？

> ID：13349962
> 
> 赞同：2
> 
> 时间：2012-11-12T19:13:01.540
> 
> 标签：jquery, jquery-selectors

我有一个网页，其中显示了元素，并且侧面有一个过滤选项。用户可以过滤多个类别。

这有点像 Amazon.com，您可以在其中按价格或品牌等过滤搜索结果。

因此，如果我的用户同时检查 $10-$25 和 $25-$50，但不检查 $50-$100 或任何其他价格范围，则选择器应返回匹配 $10-$25 或 $25-$50 的项目，但不应返回下降的项目在任何其他价格范围内。如果另外用户检查了“蓝色”和“红色”但没有检查任何其他颜色，那么选择器应该返回蓝色或红色的项目，但它应该保持价格范围内的原始选择。

所有这些选项都作为类给出，所以我想要一个看起来像这样的选择器：

`(.tenToTwentyfive OR .twentyfiveFift) AND (.Blue OR .Red)`.

这可能吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T19:14:51.737

您可以使用[过滤器](http://api.jquery.com/filter/)：

```
$('.tenToTwentyfive, .twentyfiveFift').filter('.Blue, .Red'); 
```

如果您真的需要在一个选择器中包含所有内容（这意味着在我看来您使用的是设计糟糕的插件），您可以使用

```
'.tenToTwentyfive.Blue, .tenToTwentyfive.Red, .twentyfiveFift.Blue, .twentyfiveFift.Red' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T19:15:08.330

采用`.filter()`

```
$('.tenToTwentyfive , .twentyfiveFift').filter('.Blue , .Red') 
```

这将选择所有元素`.tenToTwentyfive OR .twentyfiveFift`

将`.filter()`仅选择`.Blue OR .Red`先前选择的元素中的元素。

# c++ - C++：如何拥有一个 boost::multi_array 数组

> ID：13349964
> 
> 赞同：0
> 
> 时间：2012-11-12T19:13:08.757
> 
> 标签：c++, boost, multidimensional-array, boost-multi-array

嗨，我有一些 boost::multi_array 定义如下：

```
typedef boost::multi_array<double, 3> region_prior_integral_image 
```

我正在尝试创建一个`region_prior_integral_image`类似以下的数组：

```
unordered_map<string, int> filename_to_hash_key_map = get_filename_to_hash_key_map();

unordered_map<string, region_prior_integral_image> filename_to_region_prior_map = get_region_prior_integral_images();

region_prior_integral_image* image_cache = new region_prior_integral_image[5];
for(unordered_map<string, int>::iterator it = filename_to_hash_key_map.begin(); it != filename_to_hash_key_map.end(); it++){
    image_cache[it->second] = filename_to_region_prior_map[it->first];
} 
```

但是程序以以下内容终止：`SemanticTextonForest: /home/aly/libs/boost_1_51_0/stage/include/boost/multi_array/multi_array_ref.hpp:488: boost::multi_array_ref<T, NumDims>& boost::multi_array_ref<T, NumDims>::operator=(const ConstMultiArray&) [with ConstMultiArray = boost::multi_array<double, 3ul>, T = double, long unsigned int NumDims = 3ul, boost::multi_array_ref<T, NumDims> = boost::multi_array_ref<double, 3ul>]: Assertion`std::equal(other.shape(),other.shape()+this->num_dimensions(), this->shape())' failed.`

我不知道为什么？

我知道我可以只使用一个向量，但为了论证，可以说我想要一个 region_prior_integral_images 数组

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:33:13.647

假设我们有两个`region_prior_integral_image`实例：A 和 B。如果要将 B 分配给 A，like ，和`A = B;`的形状必须相等。错误消息是说，在您的代码中，两个数组的形状不同。`A``B``image_cache[it->second] = filename_to_region_prior_map[it->first];`

你是如何创建数组的`filename_to_region_prior_map`？我猜你使用这个构造函数来指定形状`multi_array<double,3> B(boost::extents[i][j][k])`：因此它们的形状是`[i][j][k]`。但是当您创建 时`image_cache`，会调用默认构造函数。所以这两个形状不匹配。

我的意见是`region_prior_integral_image`在你的代码中存储指针，这也将节省大量的副本。

# c# - 在 IIS 中，20 分钟空闲时间后关闭工作进程的原因是什么？

> ID：13349965
> 
> 赞同：1
> 
> 时间：2012-11-12T19:13:15.223
> 
> 标签：c#, asp.net-mvc, iis, windows-2003-webserver

在 IIS 中，默认是在 20 分钟不活动后关闭工作进程？其背后的理性是什么？似乎人们去吃午饭，然后回来强迫重新加载所有东西。

特别是关于 .NET 4、ASP.NET MVC、C# 应用程序。是否有任何理由启用空闲超时？

![在此处输入图像描述](../Images/0d3df7cbfa4d3301dcb9818c772ea745.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T20:09:59.867

节省服务器资源。

如果服务器专门为单个站点提供服务，那么这没什么大不了的，但是如果您托管了许多站点，并且一些站点很少被访问，那么没有理由让应用程序池一直处于空闲状态，并占用宝贵的资源。

另一个很好的理由是代码总是有可能存在内存泄漏。如果确实如此，并且该进程永远不会被回收，那么它最终将关闭整个服务器。

我敢肯定还有其他原因，这些是我首先想到的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T20:09:25.837

该选项专为在 IIS 服务器上运行许多应用程序且不经常使用其中一些应用程序的情况而设计。如果您只有少数应用程序，则空闲超时没有多大用处。

# wordpress - 访问 wordpress 网站上的页面模板

> ID：13349968
> 
> 赞同：0
> 
> 时间：2012-11-12T19:13:25.547
> 
> 标签：wordpress

我需要访问 wordpress 站点中的页面模板来编辑间距问题。无论如何可以通过界面执行此操作，还是我需要在 Web 服务器上查找文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T19:18:57.407

转到菜单`"Appearance" -> "Editor"`（您应该以管理员身份登录）并在右侧边栏中找到您的页面模板。如果模板文件具有这些权限，您可以在面板中对其进行编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T19:36:03.513

必须在您使用的主题的主题文件夹中找到页面模板。

它应该命名为类似于页面模板名称的名称。您应该能够找到它的页面模板注释标签，其名称位于文件顶部。

如此处所定义，[http://codex.wordpress.org/Pages#Page_Templates](http://codex.wordpress.org/Pages#Page_Templates)

希望能帮助到你

# python - 如何使用 AST 将文本编译为函数？

> ID：13349971
> 
> 赞同：5
> 
> 时间：2012-11-12T19:13:41.263
> 
> 标签：python, exec, abstract-syntax-tree

我需要将输入字符串（来自数据库）编译为函数并运行它。这是我目前使用的方法：

假设我已经定义了这个函数：

```
def foo():
    print "Yo foo! I am a function!" 
```

我从数据库中读取的字符串说我应该调用这个函数：

```
string_from_db = "foo()" 
```

然后我形成一个函数（我可以控制它的名字），它返回我从数据库中读取的函数：

```
my_func_string = "def doTheFunc():\n\t return " + string_from_db 
```

现在我编译字符串，并将其设置为稍后用于处理的函数名称：

```
exec my_func_string
processor = doTheFunc 
```

我可以稍后通过运行`processor()`which 来调用它：`Yo foo! I am a function!`

**我的问题：**在这段代码上方有一条评论（由一位失散多年的开发人员留下）：

```
 ###############################################################
    # The following method for getting a function out of the text #
    # in the database could potentially be replaced by using      #
    # Python's ast module to obtain an abstract syntax tree and   #
    # put it inside of a function node                            #
    ############################################################### 
```

我想了解更多关于这个“潜在替代品”的信息。我看过 AST，但我很困惑它如何帮助我做我已经用上面的代码做的事情。

1.  我怎样才能使用 AST 完成同样的事情？或者 AST 在这个过程中可以在哪里帮助我？
2.  使用 AST 的实现是否更好，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T19:24:28.363

在评估不受信任的代码时，AST 是一个更安全的选择，它可能包含恶意指令，`eval`或者`exec`可以执行任何表达式，而另一方面，AST 允许您自己解析和验证表达式，或者使用 执行有限的表达式`ast.literal_eval`，有点像一个沙箱，它只允许字符串、列表、数字和其他一些东西。这只是一个简单的例子：

```
import ast
a = ast.literal_eval("[1,2,3,4]") //evaluate an expression safely. 
```

将字符串解析为 AST 的另一个示例：

```
import ast
source = '2 + 2'
node = ast.parse(source, mode='eval')
ast.dump(node) 
```

这打印：

```
Expression(body=BinOp(left=Num(n=2), op=Add(), right=Num(n=2))) 
```

[这里](http://eli.thegreenplace.net/2009/11/28/python-internals-working-with-python-asts/)有一个很好的教程和[文档](http://docs.python.org/dev/library/ast.html)

# c# - 如何在 C# 中设计多实例应用程序？

> ID：13349979
> 
> 赞同：2
> 
> 时间：2012-11-12T19:14:16.913
> 
> 标签：c#, .net, design-patterns, rabbitmq

任务：需要使用 c#.net 创建一个可以在多个实例上运行的控制台应用程序。（出于可扩展性目的）

现在，如果您创建一个简单的应用程序，这很容易。我现在的问题是在我的应用程序上我有一个全局变量。让您了解这个应用程序是什么。这是一个接收 JSON 消息的小程序（我使用 RabbitMQ 作为消息传递部分）。然后它将接收到的消息存储在全局变量中。现在，这使得在多个实例上运行应用程序变得困难。因为如果您运行超过 1 个应用程序实例，则可能会在另一个应用程序上收到消息。这是因为 RabbitMQ 的循环行为。（创建 Exchange 或路由密钥不是一种选择。）

我尝试过使用共享内存或 MemoryMappedFile，但这也不起作用。

我想到的另一件事是使用数据库。但我需要好的设计来做到这一点。如果有人知道一种模式、一个例子或任何参考资料。让我知道。

非常感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T20:33:04.877

我会使用`MemoryMappedFiles`，它们看起来是最简单的方法（忽略数据库）。我不知道为什么没有为你做这项工作？

应用程序的每个实例都将在此文件中“注册”自身并分配要在其中写入数据的文件部分。当您收到消息时，请检查文件中存储的其他实例的数据。

您可以将 Mutex 用于所有操作（实例寄存器、写入、读取）——它将保证您拥有一致的数据图片。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T20:41:00.613

如果内存映射文件真的不适合你，那么稍微改变一下架构怎么样。拥有主控制台应用程序（某种服务器），这可以根据需要生成其他控制台应用程序（某种客户端）。然后，他们可以使用[匿名管道进行本地进程间通信](http://msdn.microsoft.com/en-us/library/bb546102.aspx)（或任何其他进程间通信机制）来与服务器检查消息是否已被处理，如果没有，则将其添加到列表中或其他任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T20:48:24.887

您需要的架构是：

1 控制器。这负责从队列中读取消息并分配它。

1+ 处理程序。控制器将根据您的负载实例化一个或多个处理程序。处理程序应该有一个明确的开始/结束。这意味着您执行一个，将消息传递进来，一旦该消息被正确处理，它就会完全退出。

* * *

或者，只是去购买 Biztalk 或类似的消息处理应用服务器。这就是这些东西的目的。

您主要关心的是可靠性。具体来说，知道一条消息实际上已被处理。因此，您需要一种能够在硬件故障（例如数据库）中幸存下来的存储机制、控制器和处理程序（可以是任何东西）之间的通信机制以及假设长时间运行的进程的某种响应方式。可能是一个心跳片，以确保其中一个处理程序没有刚刚倒下。当然是一种重新处理消息的方法，也许是自动的，以防失败。最后，您需要一种方法来限制处理程序，以便您只同时运行 X 个数，以防止系统不堪重负。

简而言之，这不是一个“简单”的应用程序，除非消息可以被删除、忽略或以其他方式不处理。

# c# - 使用 C#/Linq 生成固定的字符串序列

> ID：13349982
> 
> 赞同：3
> 
> 时间：2012-11-12T19:14:35.670
> 
> 标签：c#, linq

我想以一种简单的方式生成 500 个字符而不做：

```
String range = "0123456789101112131415..."; 
```

我想要一个精确的 500 个字符的字符串。

我怎样才能做到这一点？

`Enumerable.Range(0,500).Select( c => c.ToString());`

没有帮助，因为

数字 123 是 3 个字符而不是 1，这就是问题所在。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-12T19:23:57.643

如果您不关心哪些字符，那么您可以使用 String 构造函数：

```
String s = new String('0', 500); 
```

这将为您提供一个包含 500 个“0”的字符串。或者对于 500 X：

```
String s = new String('X', 500); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T19:25:58.030

您想使用[Aggregate](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aggregate.aspx)：

```
 string range = Enumerable.Range(0,500)
                .Select(x => x.ToString()).Aggregate((a, b) => a + b);
  Console.WriteLine(range); 
```

这会给你一串从 0 到 500 的连接数字。像这样：`01234567891011121314151617...`
如果你需要从这个大字符串中取出 500 个字符，你可以进一步使用 substring。

```
string range = Enumerable.Range(0,500)
              .Select(x => x.ToString()).Aggregate((a, b) => a + b);
Console.WriteLine(range.Substring(0, 500)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T19:20:11.723

这应该可以解决问题。

```
var range = new string(String.Concat(Enumerable.Range(0, 500)
                                               .Select(c => c.ToString()))
                             .Take(500).ToArray()
                      ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T19:23:58.223

LINQ 很漂亮，但你并不*总是*需要它......：

```
static string NumString(int length) {
    var s = "";
    var i = 0;
    while (s.Length < length) {
        s += i.ToString();
        i++;
    }
    return s.Substring(0, length);
} 
```

或使用聚合的变体：

```
var str = Enumerable.Range(0, 500)
          .Aggregate("", (s, next) => s += next.ToString(), 
                         s => s.Substring(0, 500)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-07T03:49:30.717

还有一个选项，不是原始问题所要求的输出——数字是随机的，而不是增加的——但相当简洁（我知道，OP 不需要一串*随机*数字，但无论如何这里都是一个）。

```
var rand = new Random();
string.Join("",Enumerable.Repeat(0, 500).Select(i => rand.Next(10))); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-12T19:45:24.287

```
new string(Enumerable.Range(0,500).SelectMany(x => x.ToString()).Take(500).ToArray()) 
```

使用 LINQ 的最简单方法。由于字符串在技术上是可枚举的 (char[])，因此您可以使用 SelectMany（它将多个 Enumerables 并展平到一个集合中）后跟 Take(500) 仅获取 500 个字符，调用 ToArray 获取 char[]实例化一个新的字符串。

# css - 不透明度为 50% 的 CSS 2 种颜色 == 其他颜色

> ID：13349991
> 
> 赞同：0
> 
> 时间：2012-11-12T19:14:52.190
> 
> 标签：css, math, colors

我有 2 个 div 的不透明度均为 50%，当这 2 个 div 相互重叠时，它们应该与我的最终十六进制颜色相匹配：

```
#66984D 
```

使用 HSB（不是 HSL！）值：

```
Hue: 100deg
Saturation: 50%
Brightness: 60% 
```

HSL 值：

```
Hue: 100deg
Saturation: 33%
Lightning: 45% 
```

这个可以计算吗？我也不喜欢使用 2 种完全不同的颜色，但 2 种几乎相同。

![在此处输入图像描述](../Images/f70880e3f7103a2610766539b92d8dec.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T04:24:39.073

假设您想要的颜色是`x`，它将由另一种颜色`y`乘以自身的 50% 不透明度版本组成。这给了我们这个等式：`x = .5y * .5y`。假设我的代数是正确的，这转化为`y = 2 * squareroot(x)`.

你`x`是#66984D - 即 102 R、152 G、77 B。将其代入等式，你的起始颜色应该大约是 20 R、25 G 和 18 B。在十六进制中，即 #143712。