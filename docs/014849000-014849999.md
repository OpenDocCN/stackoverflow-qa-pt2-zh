# StackOverflow 问答 14849000-14849999

# c++ - 使用 C++ 将 STDIN 数据读入控制台应用程序的最快方法是什么

> ID：14849001
> 
> 赞同：1
> 
> 时间：2013-02-13T08:06:44.897
> 
> 标签：c++, winapi, console-application, stdout, stdin

我有一个用 C++ 编写的控制台应用程序，它需要通过 writeline 接受来自另一个进程的文本输入（然后是截止日期。）我假设这需要通过 STDIN 完成，但它也需要以最快的方式工作. 然后我的控制台应用程序需要回复该过程。

我已经有一段时间没有做过控制台编程了，但我记得在学校的 C 课上，有很多 C 类型的函数，比如`fgets`,`getline`等，但我记得它们似乎很慢。

那么有什么方法可以使用 WinAPI 进行这种交换（同样，“快速进入然后退出”）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:14:42.717

The fastest method in theory will almost certainly be the system level input routines, since both the `stdin` (in C, but also available in C++) and `std::cin` build on these. On the other hand, they have generally been optimized for the platform, so unless you can find the optimal configuration yourself (e.g. things like buffer size), you might not gain much, if anything: calling `read` (Unix) or `ReadFile` (Windows) for each character will probably be slower than using something like `std::getline`.

The other question is what you plan on doing with the data after you've read it. Functions like `read` or `ReadLine` give you a buffer (`char[]`) with a certain number of characters; you then have to analyse it, break it into lines, etc. Functions like `std::getline` give you an `std::string` with the line in it. If you're a really skilled C++ programmer, you can probably organize things so that the actual data are never moved from the `char[]`, but this would require re-implementing a lot of things that are already implemented in the standard library. The use of templates in the standard library means that you don't have to implement nearly as much as you would have to otherwise, but you'll still need to create an equivalent to `std::string` which maintains two iterators (`char const*`) rather than the data itself.

In the end, I'd start by writing the application using `std::getline` and `std::string`. Once it's working, I'd see what its actual performance is, and only then, if necessary, consider ways of improving it.

# menu - 如何制作像 Ministersofdesign.com 一样的菜单栏？

> ID：14849004
> 
> 赞同：-1
> 
> 时间：2013-02-13T08:06:51.617
> 
> 标签：menu, scroll

有没有办法制作一个像网站 www.ministersofdesign.com 一样的菜单栏？如果我将鼠标悬停在菜单上，字体会变成红色，或者如果我向下滚动到某个部分，菜单也会自动变成红色字体。

太感谢了 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:36:49.120

您必须使用 ScrollTop jQuery 属性。并且要检测您为每个 ScrollTop 值选择的菜单选项，您可以使用简单的 if 来执行此操作：

**Javascript**

```
if ($(window).scrollTop() < 280) {
    $("#btn1").css({'background-color':'#ccc'});
    $("#btn2").css({'background-color':'#fff'});
    $("#btn3").css({'background-color':'#fff'});

    $("#c1").css({'border-color':'#000'});
    $("#c2").css({'border-color':'#ccc'});
    $("#c3").css({'border-color':'#ccc'});
}
if (($(window).scrollTop() > 280) && ($(window).scrollTop() < 450)) {
    $("#btn2").css({'background-color':'#ccc'});
    $("#btn1").css({'background-color':'#fff'});
    $("#btn3").css({'background-color':'#fff'});

    $("#c2").css({'border-color':'#000'});
    $("#c1").css({'border-color':'#ccc'});
    $("#c3").css({'border-color':'#ccc'});
}
if ($(window).scrollTop() > 450) {
    $("#btn3").css({'background-color':'#ccc'});
    $("#btn2").css({'background-color':'#fff'});
    $("#btn1").css({'background-color':'#fff'});

    $("#c3").css({'border-color':'#000'});
    $("#c1").css({'border-color':'#ccc'});
    $("#c2").css({'border-color':'#ccc'});
} 
```

在这里，我有一个用[jsFiddle](http://jsfiddle.net/newpatriks/53Run/)完成的小测试:)

# haskell - 提升类型的模式匹配

> ID：14849006
> 
> 赞同：5
> 
> 时间：2013-02-13T08:06:57.903
> 
> 标签：haskell, pattern-matching, higher-kinded-types, type-kinds

我们可以为 kind 参数编写单一的、综合的实例`*`：

```
class MyClass d where
    f :: d -> Int

instance MyClass (Maybe d) where  
    f _ = 3

test1 :: Maybe d -> Int
test1 x = f x 
```

这编译得很好，请注意我们不需要对 test1 的 (MyClass (Maybe d)) 约束，因为编译器会找到任何匹配的实例`Maybe d`。

我们甚至可以为类型构造函数的类参数编写一个包罗万象的实例：

```
class MyClass2 (a :: * -> *) where
    g :: Tagged (a Int) Int

instance MyClass2 a where
    g = Tagged 3

test2 :: Int
test2 = untag (g :: Tagged (Maybe Int) Int) 
```

这也编译得很好，并且 test2 不需要 (MyClass2 Maybe) 约束，因为编译器会找到匹配的实例。

考虑以下玩具代码来计算（提升）类型列表的长度：

```
{-# LANGUAGE TypeOperators,
DataKinds,
KindSignatures,
GADTs,
FlexibleInstances,
FlexibleContexts,
ScopedTypeVariables #-}

import Data.Tagged
import Data.Proxy

data HList :: [*] -> * where
              HNil :: HList '[]
              HCons :: a -> HList as -> HList (a ': as)

class ListLen a where
    len :: Tagged a Int

instance ListLen (HList '[]) where
    len = Tagged 0

instance (ListLen (HList as)) => ListLen (HList (a ': as)) where
    len = Tagged (1+(untag (len :: Tagged (HList as) Int)))

test3 :: Int
test3 = untag (len :: Tagged (HList '[Int, Double, Integer]) Int)

test4 :: (Proxy (HList qs)) -> Int
test4 (_ :: Proxy (HList qs)) = untag (len :: Tagged (HList qs) Int) -- error occurs here 
```

这会导致错误：

```
No instance for (ListLen (HList qs))
      arising from a use of `len'
    Possible fix: add an instance declaration for (ListLen (HList qs))
    ... 
```

如果我们注释掉 的签名`test4`，GHCi 将类型推断为

```
test4 :: (ListLen (HList qs)) => (Proxy (HList qs)) -> Int 
```

*但这不应该是必要*的。显然，我已经为它编写了`ListLen`匹配任何可能的类型列表的实例：一个“空列表”案例和一个“缺点”案例。如果我将`ListLen`参数的种类更改为有种类`[*]`（即删除`HList`包装器`ListLen`及其实例），问题仍然存在。

如果我们注释掉`test4`，`test3`编译并运行良好：因为我（本质上）为我如何构造类型列表提供了明确的语法（`'[Int,Double,Integer]`），编译器能够找到匹配的实例。

我正在尝试编写为我构建类型列表的代码，因此我不必写出显式类型列表语法。然而，使用显式语法似乎是 GHC 能够匹配这些综合实例的唯一方法。也许我错过了一个案例？我没有使用的语法？

*我能做些什么来让 GHC 意识到我有一个适用于所有类型的实例`[*]`？* 我正在使用 GHC 7.4.2。这*可能*与[之前](https://stackoverflow.com/questions/14273085/type-deconstruction)关于解构非提升类型的帖子有关。*关于类型提升的*论文可以在[这里](http://research.microsoft.com/en-us/people/.../fc-kind-poly.pdf)找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T17:47:19.443

这不完全是您想要的，但非常接近。我从

```
data Proxy a where
  Proxy :: ListLen a => Proxy 
```

然后

```
data Proxy a where
  Proxy :: Tagged a Int -> Proxy a 
```

导致

```
test4 :: (Proxy (HList qs)) -> Int
test4 (Proxy len) = untag len 
```

问题是您要么需要约束，要么`Proxy`包含所需类的证据（即使所有可用类型都存在实例）。在这里，类方法只是包含在`Proxy`.

一个完全不同的选择是根本不使用类型类，并`len`以通常的方式实现（转录自`Data.List.length`）。

```
len :: HList a -> Int
len l = len' l 0
  where
    len' :: HList a -> Int -> Int
    len' HNil a = a
    len' (HCons _ xs) a = len' xs $! a + 1 
```

# groovy - 从 groovy 列表中删除除最后一项之外的所有内容的最简洁方法是什么？

> ID：14849007
> 
> 赞同：-1
> 
> 时间：2013-02-13T08:07:03.270
> 
> 标签：groovy

我一直在尝试找到一种巧妙的方法来从 groovy 列表中删除除最后一个元素之外的所有元素，但我尝试过的所有事情似乎都有些过于复杂。有没有更简洁的方法？

失败：`java.util.ConcurrentModificationException`

```
void removeAllButLastInPlace(list) {
    if(list.size() > 1) {
        def remove = list[0..-2]
        remove.each { list.remove(it) }
    }
} 
```

失败：`java.lang.CloneNotSupportedException: java.util.ArrayList$SubList`

```
void removeAllButLastInPlace(list) {
    if(list.size() > 1) {
        def remove = list[0..-2].clone()
        remove.each { list.remove(it) }
    }
} 
```

工作，但列表构造似乎没有必要

```
void removeAllButLastInPlace(list) {
    if(list.size() > 1) {
        def remove = [] + list[0..-2]
        remove.each { list.remove(it) }
    }
} 
```

工作，但似乎有点神秘

```
void removeAllButLastInPlace(list) {
    (list.size() - 1).times { list.remove(0) }
} 
```

工作，也许最“正确”

```
void removeAllButLastInPlace(list) {
    list.retainAll { list.lastIndexOf(it) == list.size() - 1 }
} 
```

代码应满足以下测试：

```
list = []
removeAllButLastInPlace(list)
assert list == []

list = ['a']
removeAllButLastInPlace(list)
assert list == ['a']

list = ['a', 'b']
removeAllButLastInPlace(list)
assert list == ['b']

list = ['a', 'b', 'c']
removeAllButLastInPlace(list)
assert list == ['c'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:05:56.673

与其改变现有列表，不如返回一个新列表？

然后你可以简单地做：

```
List removeAllButLast( List list ) {
  list ? [list[-1]] : []
} 
```

或者：

```
List removeAllButLastInPlace( List list ) {
  list.drop( list.size() - 1 )
} 
```

### 编辑：

你也可以使用一个循环（如果你必须有一个变异方法）

```
void removeAllButLastInPlace( List list ) {
   while( list.size() > 1 ) list.remove( 0 )
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:14:32.943

```
void removeAllButLastInPlace( List list ) {
    def index = 0
    list.reverse(true).retainAll({index++ == 0})
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-09T10:39:27.250

我会去其中之一。我的标准是 a）按照您的要求修改列表（不返回新列表）和 b）简洁。

然而，我让两个版本都返回对修改列表的引用，只是为了简化`println`示例。如果愿意，您可以将返回类型设置为“void”，并从每个中删除最后一个“xs”行。

```
def xs1 = [1, 2, 3, 4, 5]
def xs2 = [9]
def xs3 = []

def keepOnlyLast1(xs) {
    while(xs.size() > 1) xs.remove(0)
    xs
}

def keepOnlyLast2(xs) {
    xs[0 ..< xs.size()-1] = []
    xs
}

println "Version 1"
println keepOnlyLast1([] + xs1)
println keepOnlyLast1([] + xs2)
println keepOnlyLast1([] + xs3)

println "Version 2"
println keepOnlyLast2([] + xs1)
println keepOnlyLast2([] + xs2)
println keepOnlyLast2([] + xs3)

/* Sanity check that these methods *really* modify the list. */
println "Sanity Check"
keepOnlyLast1(xs1)
println xs1
keepOnlyLast2(xs2)
println xs2 
```

旁白：如果可能的话，我也会选择一种更实用的样式（即返回一个新列表而不是修改现有列表），但那不是您所要求的。无论如何，这是一个例子：

```
def lastAsList(xs) {
    xs.isEmpty() ? [] : [xs[-1]]
}
println lastAsList([1, 2, 3])
println lastAsList([]) 
```

# php - 致命错误：调用未定义函数 pg_connect

> ID：14849010
> 
> 赞同：7
> 
> 时间：2013-02-13T08:07:47.390
> 
> 标签：php, windows, wamp

我正在使用 Windows 7、php 5.3.5 和 WAMP 服务器。我有两个 php 文件：trigger.php 和 background.php。
我想将 background.php 作为后台进程运行。我必须从 trigger.php 调用这个文件。为此，我使用了以下方法。我在 trigger.php 中包含以下代码以使 background.php 在后台处理。

```
$handle = popen('start /b C:\wamp\bin\php\php5.3.5\php.exe     C:\wamp\www\email3.php','r'); 
```

在 background.php 我有以下代码连接到数据库。

```
$conn_string = "host=localhost port=5432 dbname=tagbase user=postgres password=postgres"; 
```

现在，在解析这一行时，我得到了以下错误：

> 致命错误：在第 3 行调用 C:\wamp\www\background.php 中未定义的函数 pg_connect() 调用堆栈：0.0002 322792 1\. {main}() C:\wamp\www\background.php:0

通过在互联网上搜索，我找到了一些解决方案，并按照以下 php.ini 中的建议进行了更改，

```
uncommented, extension=php_pdo_pgsql.dll,
uncommented, extension=php_pgsql.dll,
uncommented, extension_dir = "c:/wamp/bin/php/php5.3.5/ext/", 
```

我也确实在文件夹中有 php_pdo_pgsql.dll 和 php_pgsql.dll 文件`c:/wamp/bin/php/php5.3.5/ext/`。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-13T08:15:33.137

**Apache 2.2.X 配置**

将下一行添加到 Apache 2.2.x httpd.conf 配置：

```
LoadFile "C:/Program Files/PostgreSQL/{version}/bin/libpq.dll" 
```

上一行必须在下一行之前输入。

*`LoadModule php5_module "c:/wamp/bin/php/php5.2.11/php5apache2_2.dll"`*

**PHP 5.2.X 配置**

在 php.ini 配置文件中启用以下两行。“启用”是指删除尾随；（分号）。通过这些，您取消注释该行。

```
extension=php_pdo_pgsql.dll
extension=php_pgsql.dll 
```

**重启 WAMP**

通过在你的 index.php 中添加这个来测试

```
echo extension_loaded('pgsql') ? 'yes':'no'; 
```

（来源：[http](http://www.plaatsoft.nl/wamp-postgresql-integration/) ://www.plaatsoft.nl/wamp-postgresql-integration/ ）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T12:30:04.450

如果我们安装 WAMP 服务器，我们会得到两个 php.ini 文件。一个在 C:\wamp\bin\php\php5.3.5 中，另一个在 C:\wamp\bin\apache\Apache2.2.17\bin 中。

**如果我们从浏览器执行一个 php 文件，则将引用 C:\wamp\bin\apache\Apache2.2.17\bin 中的 php.ini 文件。如果我们从命令行执行一个 php 文件，那么将引用 C:\wamp\bin\php\php5.3.5 中的 php.ini 文件。**

我所做的任何更改都启用/禁用 PHP-> PHP 扩展中的 dll，所有更改都将保存在 C:\wamp\bin\apache\Apache2.2.17\bin\php.ini 文件中。但 C:\wamp\bin\php\php5.3.5\php.ini 文件保持不变。

对于我的问题，我做了以下更改

```
uncommented, extension=php_pdo_pgsql.dll,
uncommented, extension=php_pgsql.dll,
uncommented, extension_dir = "c:/wamp/bin/php/php5.3.5/ext/", 
```

在 C:\wamp\bin\php\php5.3.5\php.ini 文件中。现在它工作得很好。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-09T14:43:58.383

在我使用 Apache/2.4.10 PHP 版本 5.4.32 PostgeSQL 9.3 的情况下，我从 PHP 目录将 libpq.dll 添加到 Apache httpd.conf 中，因为 Apache 拒绝从 PostgreSQL 9.3 开始使用 libpq.dll

# c# - 在 asp.net 中使用 HTML5 文件（多个）控件

> ID：14849014
> 
> 赞同：0
> 
> 时间：2013-02-13T08:07:58.920
> 
> 标签：c#, asp.net, html, file-upload

我正在寻找一种`<input type="file" multiple="multiple">`在我的 asp.net 3.5 项目中完美管理 HTML 5 标记的方法。我之前在页面上使用了一个控件，但是如果我们在同一页面上有多个上传控件怎么办。请看我的代码：

```
protected void btnSave_Click(object sender, EventArgs e)
{
//---------Need to check if my upload control has files: Please suggest a perfect way 
if (fupAttachment.PostedFile != null || fupAttachment.PostedFile.FileName != "" || fupAttachment.PostedFile.ContentLength>0)//here is a problem, as it does not checks for a blank file upload control
HttpFileCollection hfc = Request.Files;
            string strDirectory = Server.MapPath("~/") + "Mailer/" + hidCampID.Value;
            if (hfc.Count>0)
            {
                if (!System.IO.Directory.Exists(strDirectory))
                {
                    System.IO.Directory.CreateDirectory(strDirectory);
                }
                if (System.IO.Directory.Exists(strDirectory))
                {
                    for (int i = 0; i < hfc.Count - 1; i++)
                    {
                        hfc[i].SaveAs(strDirectory + "/" + hfc[i].FileName.Replace(" ", "_"));
                    }
                }
            }
     }
} 
```

我的asp页面是这样的：

```
//----this control is from which I want to multiple upload files
<input type="file" multiple="multiple" runat="server" id="fupAttachment" />

// Another upload control is there which takes input when page loads
<asp:FileUpload ID="fupMailingList" runat="server" /> 
```

所以，正是我的问题是，当页面加载“fupMailingList”时已经获取了一个文件，然后当我想使用我的多个上传控件“fupAttachment”时，我无法检查它是否有任何文件，因为`hfc`检查所有上传控件并在其中一个中获取文件。所以，请告诉我一种只检查“fupAttachment”控件的方法，然后正确地完成我的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:25:28.543

您应该逐个输入检查，而不是遍历请求中的所有文件。

```
var uploadedFiles = Request.Files.GetMultiple("fupAttachment");
if(uploadedFiles.Count > 0)
{
  //
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:24:11.013

只需检查 HasFile 属性。

```
if(fupMailingList.HasFile){
//Do something
} 
```

# selenium-webdriver - 在 Selenium Webdriver 中根据用户输入选择单选按钮

> ID：14849015
> 
> 赞同：7
> 
> 时间：2013-02-13T08:08:02.413
> 
> 标签：selenium-webdriver

我希望能够根据用户输入选择一个单选按钮。此单选按钮有多个同名选项。

```
<th class="radio">
 <td>
  <label for="form-1-input-3">
   <input id="form-1-input-3" type="radio" checked="" value="true" name="enabled">
   Enabled  
  </label>
  <label for="form-1-input-4">
   <input id="form-1-input-4" type="radio" value="false" name="enabled">
   Disabled  
  </label> 
```

如果“启用”作为字符串传递，我应该能够选择第一个具有可见文本的单选按钮启用，如果“禁用”作为字符串传递，我应该能够选择具有可见文本的单选按钮, 禁用。

由于单选按钮的名称相同，我遇到了困难。下面的代码找不到 Xpath 的 AND 运算符的元素。有没有人遇到过这种情况并找到了解决方案？

```
String enableRadioButtonXPath = "//input[contains(@id,'form-') and contains(@value, 'enabled')]";
String enableRadioButtonOption = "enabled";
String disableRadioButtonOption = "disabled";

WebElement enableRadioButton = webdriver1.findElement(By.name(enableRadioButtonOption));
enableRadioButton.click(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T08:20:08.577

这个逻辑可能对你有用。

要选择第一个单选按钮，请使用下面的定位器

```
 driver.findElement(By.xpath("//label[contains(.,'Enable')]/input")).click(); 
```

用于选择具有禁用文本的第二个单选按钮

```
driver.findElement(By.xpath("//label[contains(.,'Disable')]/input")).click(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T12:13:12.293

也许这会有所帮助：

```
public void selectByName (final WebDriver driver, final String status) {
    final List<WebElement> radios = driver.findElements(By.name("enabled"));

    for (WebElement radio : radios) {
        if (radio.getText().equals(status)) {
            radio.click();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-04T08:22:09.903

获取用户输入并分配给一个名为的变量`Usrinput`

```
List<WebElement> radiobuttons = driver.findElements(By.name("radiobuttonname"));
    for(WebElement radiobutton: radiobuttons) { 

    if(radiobutton.getAttribute("value").equals("Usrinput"))
        radiobutton.click();
} 
```

# html - 如何裁剪和对齐彼此相邻的图像？

> ID：14849017
> 
> 赞同：0
> 
> 时间：2013-02-13T08:08:11.837
> 
> 标签：html, css, image, margin

在这个[语法页面](http://www.imparare-inglese.it/plurale-inglese.html)上，顶部有一个 590px X 183px 的主图像，底部有 5 个 121px X 137px 的图像，彼此水平对齐：

![带有调整大小和裁剪图像的页面](../Images/9e2721ee9c43161add9f475c79385864.png)

底部图像是顶部主图像的调整大小的裁剪。在屏幕截图示例中，底部的第三张图像是顶部图像的调整大小的裁剪，总线。如果您单击第一个底部图像（书籍），它将带您到一个页面，其中书籍也是顶部的图像（如上面的公共汽车）。

所有这些冗长但希望清晰的介绍都是为了问**我如何将底部图像水平对齐为顶部图像的调整大小裁剪？** 现在，底部的图像被裁剪并离线调整大小，然后作为新文件上传。因此，要访问从底部图像链接到的所有 5 个页面，必须下载 10 个图像文件。但如果我可以调整大小和裁剪（并且仍然让图像水平对齐），那将只有 5 个文件。我尝试了左边距（和高度）来调整大小和裁剪：

```
<img style="height:135px; margin-left:-290px;" src="http://www.imparare-inglese.it/uploads/1/1/1/6/11169156/7674785.png"/>
<img style="height:135px; margin-left:-610px;" src="http://www.imparare-inglese.it/uploads/1/1/1/6/11169156/6647450.png"/> 
```

但就像我在第二张图片上设置左边距一样，第二张图片超过了第一张。我该如何防止呢？我错过了什么？

表格示例：http: [//jsfiddle.net/EZnAg/](http://jsfiddle.net/EZnAg/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:23:02.203

将图像放在 div 中，在包含图像的 div 上应用宽度、高度、浮动：左、位置：相对和溢出：隐藏，然后根据需要对图像进行绝对定位。如果图像需要人造/css 调整大小，也可以在 css 中应用。

```
* {
        padding:0;
        margin:0;
    }
    .panels {
        float:left;
    }
    .placeholder {
        width:200px;
        height:200px;
        float:left;
        overflow:hidden;
        margin:0 20px 0 0;
    }
    .placeholder img {
        /*width:100%;*/
    }

<div class="panels">
    <div class="placeholder">
        <img src="http://www.jakss.co.uk/common/images/shell/header/client-logo.png" />
    </div>
    <div class="placeholder">
        <img src="http://www.jakss.co.uk/common/images/shell/header/client-logo.png" />
    </div>
    <div class="placeholder">
        <img src="http://www.jakss.co.uk/common/images/shell/header/client-logo.png" />
    </div>
</div> 
```

[http://jsfiddle.net/seemly/PmUzY/](http://jsfiddle.net/seemly/PmUzY/)

如果恢复宽度：100%；在我的 jsfiddle 中的 .placeholder img 上，希望这能提供您想要的效果，或者至少让您领先一步？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:17:35.057

裁剪的图像实际上是具有不同纵横比的新创建的图像（来自原始图像）。假设这些图像是完全不同的图像（而不是显示为 width="smallpx" height=smallpx" 的相同图像），您可以将它们放在类似这样的 div 中

```
<div id="all_image contained" style="width: 300px;">
  <div style="width: 100px; float:left">
      <img src="images/img1.jpg" width="80px" height="50px"/>
  </div>
  <div style="width: 100px; float:left">
      <img src="images/img2.jpg" width="80px" height="50px"/>
  </div>
  <div style="width: 100px; float:left">
      <img src="images/img3.jpg" width="80px" height="50px"/>
  </div>
</div> 
```

为了裁剪，你必须使用 jquery 脚本来创建具有小纵横比和尺寸的新图像....

否则，如果您想以小缩略图大小显示相同的大图像，那么您可以使用固定大小的 div 并将溢出设置为隐藏

# sql - 如何获取表中相同记录的总和/数量

> ID：14849019
> 
> 赞同：0
> 
> 时间：2013-02-13T08:08:19.137
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有两张桌子`Company`和`CompanyLike`

**公司赞**

1.  ID
2.  评级之星
3.  数数
4.  公司编号

Company 和 CompanyLike 有`1 to Many`关系。一家公司可以有很多赞

像桌子一样的公司看起来像这样

```
+----------------------------+
| ID  RatingStar   Companyid |
+----------------------------+
| 1      5           5636    |
| 2      5           5636    |
| 3      1           101     |
| 4      2            959    |
+----------------------------+ 
```

现在我想计算 RatingStar 的次数`5`，以及它对`2`每个Companyid 的次数

我目前的工作是

```
 SELECT RatingStar AS RatingStar,com.id AS Companyid , c.Id AS Id ,
        com.Name AS CompanyName, Count(RatingStar) AS ratingCount
   FROM CompanyReviewLike AS c
   INNER JOIN Company AS com ON com.id = c.Companyid
   GROUP BY RatingStar ,com.Name , com.id ,c.Id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:50:26.510

如果您只关心评级星 5 和 2 计数，请检查此项

```
SELECT COM.Name AS CompanyName, C.RatingStar AS RatingStar, COUNT(*) AS RatingCount
FROM CompanyLike AS C
INNER JOIN Company AS COM ON COM.id = C.Companyid
GROUP BY C.RatingStar ,COM.Name 
HAVING C.RatingStar IN (5,2) 
```

检查这个最新的

```
SELECT C.id,COM.Name AS CompanyName, C.RatingStar AS RatingStar, COM.RatingCount AS RatingCount
    FROM CompanyLike C
    INNER JOIN ( SELECT COM.Name AS CompanyName,C.CompanyId, C.RatingStar AS RatingStar, COUNT(*) AS RatingCount
                FROM CompanyLike AS C
                INNER JOIN Company AS COM ON COM.id = C.Companyid
                GROUP BY C.RatingStar ,COM.Name ,C.CompanyId
                HAVING C.RatingStar IN (5,2)) COM
    ON C.RatingStar = Com.RatingStar AND C.CompanyId = COM.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:17:35.853

我认为您只想`c.id`从查询中删除：

```
select RatingStar as RatingStar,com.id as Companyid  ,com.Name as  
         CompanyName ,  

 Count(RatingStar) as Count,MIN(c.ID) as Id
     from CompanyReviewLike as c
   inner join Company as com on com.id = c.Companyid
 Group By 
 RatingStar ,com.Name , com.id 
```

由于每一行都有不同的`c.id`，如果将其包含在分组中，则每个组仅包含一行。如果您想在结果中包含*一个* `id`值，请选择一个合适的聚合（`MIN`或`MAX`想到）从组中选择一个。

* * *

[小提琴](http://sqlfiddle.com/#!6/4e019/1)。结果：

```
RATINGSTAR  COMPANYID   COMPANYNAME COUNT
1           101         CompanyB    1
2           959         CompanyC    1
5           5636        CompanyA    2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T08:26:40.940

您需要透视数据。假设您的表格是：

```
create table compa ( id int, name varchar(10) );
create table likes (idComp int, rating int);
create table rates ( id int); 
```

那么您的查询是：

```
select * 
from (
    select r.id as rate, 
         c.id as comp,
         l.idComp as n
  from compa c
  cross join rates r
  left join likes l
     on l.rating = r.id
        and c.id = l.idComp
) as src
PIVOT
(
count( n )
FOR rate IN ( [1], [2], [3], [4], [5] )
) as pvt ; 
```

[结果](http://sqlfiddle.com/#!6/5bf22/8/0)：_

```
| COMP | 1 | 2 | 3 | 4 | 5 |
----------------------------
|    1 | 3 | 1 | 0 | 0 | 1 |
|    2 | 0 | 3 | 0 | 0 | 0 | 
```

.

**解释**

选择表之间的内部查询连接结果以获取费率原始数据。Pivot 子句对数据进行计数并将行数据移动到列以仅按公司获取一列。

通知费率交叉加入以获得公司的所有费率，也离开加入以获得无费率公司。

享受。

# mysql - Sequelize 和 MySQL 与 MAMP，我得到一个错误

> ID：14849021
> 
> 赞同：0
> 
> 时间：2013-02-13T08:08:36.017
> 
> 标签：mysql, node.js, express, sequelize.js

我遇到了 Sequelize for Express (node.js) 的问题。我尝试将 MAMP Mac 中的 MySQL 数据库与 Sequelize for express 连接，但它不起作用，我不明白为什么，但出现错误：

也许我必须编辑 MySQL 配置文件以注释“MAMP_skip-networking_MAMP”，但我没有找到 MAC 的 MySQL Conf 文件...

我的代码：

```
var Sequelize = require("sequelize");

var db = new Sequelize('express', 'root', 'root', {
    host: '127.0.0.1',
    port: '3306'
});

var Project = db.define('Project', {
    date: Sequelize.DATE,
    title: Sequelize.STRING,
    description: Sequelize.TEXT
});

var project = Project.build({
    date: new Date(),
    title: 'Mon premiéé projeétçç!!',
    description: 'dsqlmdskq lkqskl ksqlmk lsmdqklm'
});

project
    .save(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T09:15:14.737

Try using port `8889` instead of `3306`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:47:59.070

尝试这个：

```
var Sequelize = require("sequelize"); 
var db = new Sequelize('express', 'root', 'root', {
  host: '127.0.0.1',
  port: '3306' 
});

var Project = db.define('Project', {
  date: Sequelize.DATE,
  title: Sequelize.STRING,
  description: Sequelize.TEXT 
});

db.sync().success(function() {
  var project = Project.build({
    date: new Date(),
    title: 'Mon premiéé projeétçç!!',
    description: 'dsqlmdskq lkqskl ksqlmk lsmdqklm' 
  });

  project.save();
}) 
```

# ios - 如何恢复 Cordova iOS 应用程序

> ID：14849023
> 
> 赞同：1
> 
> 时间：2013-02-13T08:08:48.153
> 
> 标签：ios, jquery-mobile, cordova

我正在使用 iOS cordova-2.1.0、jqueryMobile 和 html5。我在应用程序中添加了电话呼叫功能，当我点击“电话呼叫”链接时，它会提示我打电话或取消。如果我选​​择取消按钮，那么应用程序会恢复，但是如果我选择通话，那么在结束通话后应用程序不会恢复重新启动。我在 appName.plist 中添加了 UIApplicationExitsOnSuspend，因为我想在应用程序在按下主页按钮后进入后台时退出应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:58:20.837

触发呼叫时，应用程序进入后台。如果应用程序不支持暂停/恢复功能，就像你的“ `UIApplicationExitsOnSuspend`”，它与按应用程序的 HOME 按钮相同，因此应用程序不会恢复。

要么您必须删除此密钥并让应用程序恢复，要么别无选择

# javascript - 自定义 JavaScript 数组的排序功能

> ID：14849025
> 
> 赞同：3
> 
> 时间：2013-02-13T08:09:06.203
> 
> 标签：javascript, jquery

我有这个非常简单的排序方法：

```
sortByNumericAttr : function (a, b,attr){            
        a = a[attr];
        b = b[attr];
        return ((a < b) ? -1 : ((a > b) ? 1 : 0));
} 
```

这里的想法是我有不同的对象需要排序（id，类型等），所以我想而不是为每个对象编写不同的排序函数（所有的区别只是排序的属性），我会写一个通用方法并将属性传递给它。

所以如果它是这样写的，我可以这样称呼它：

```
arr.sort(utils.sortByNumericAttr,'typeId'); 
```

基于这个功能，我怎样才能达到这个或类似的效果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T08:11:12.583

您可以使用另一个函数创建一个函数：

```
function sort_by(attr) {
    return function(o1, o2) {
        var a = o1[attr];
        var b = o2[attr];

        return ((a < b) ? -1 : ((a > b) ? 1 : 0));
    };
} 
```

然后将其称为`.sort(sort_by('id'))`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:20:06.753

如果你有这样的列表：

```
var list = [
    {id:5, color:"Green", name:"Audi"},
    {id:1, color:"Red", name:"Ferrari"},
    {id:3, color:"Silver", name:"Mercedes"}
]; 
```

您可以创建排序函数来为每个使用的键排序此列表：

```
function sortById(a,b) { return (a.id-b.id); }
list.sort(sortById);

function sortByName(a,b) { return (a.name.localeCompare(b.name)); }
list.sort(sortByName);

function sortByColor(a,b) { return (a.color.localeCompare(b.color)); }
list.sort(sortByColor); 
```

# php - jQuery PHP在函数中传递值与实时点击？

> ID：14849026
> 
> 赞同：1
> 
> 时间：2013-02-13T08:09:14.457
> 
> 标签：php, jquery, ajax, function, onclick

我正在尝试通过 onclick 传递一些值，这对我来说要快得多。但我需要使用某种“实时”点击，我正在研究 .on() 或 .delegate()。但是，如果我做任何这些，在其中传递这些值`followme()`似乎有点难以获得。有没有我没有看到的某种方法？

```
 <div class='btn btn-mini follow-btn' 
         data-status='follow' 
         onclick="followme(<?php echo $_SESSION['user_auth'].','.$randId;?>)">
            Follow 
    </div>

function followme(iduser_follower,iduser_following)
{

        $.ajax({
        url: '../follow.php',
        type: 'post',
        data: 'iduser_follower='+iduser_follower+'&iduser_following='+iduser_following+'&unfollow=1',
        success: function(data){
                $('.follow-btn').attr("data-status",'follow');
                $('.follow-btn').text('Follow');
            }

        });

} 
```

如您所见，将值从 PHP 传递到 jQuery 更容易......还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:18:30.703

您可以分配更多的数据值，并且您知道登录的用途，您只需传递要关注的人：

```
<div class='btn btn-mini follow-btn' 
     data-status='follow' 
     data-who='<?php echo $randId; ?>'
     id='followBTN'>
        Follow 
</div>

<script>
    $('#followBTN').on('click', function(){
        $.ajax({
            url: '../follow.php',
            type: 'post',
            data: {
                iduser_following: $(this).attr('data-who')
            },
            success: function(data){
                $('.follow-btn').attr("data-status",'follow');
                $('.follow-btn').text(data.text);
            }

        });
    });
</script> 
```

您可以`$_SESSION['user_auth']`直接从 PHP 处理和状态，无需在 jQuery 中传递它们。确保在插入点击事件`document`时已准备就绪。`on`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:19:24.263

只需使用 jquery 'on' 事件。将一个名为 data-session 的新属性附加到 div，然后使用 .attr 方法检索它。您有下面的示例向您显示数据警报，您只需将其替换为您的代码

```
<html>
<head>
   <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
   <script>
      $(document).ready(function(){
         $(document).on('click', '#follow-me-button', function(){
            alert($(this).attr('data-session'));
         })
      })
   </script>
</head>
<body>
   <div id="follow-me-button" class='btn btn-mini follow-btn' data-status='follow' data-session ="MY-SESSION-DATA-FROM-PHP">
            Follow
    </div>
</body>
</html> 
```

# asp.net-mvc - 在 MVC3 应用程序中设置浏览器模式和文档模式 IE

> ID：14849028
> 
> 赞同：1
> 
> 时间：2013-02-13T08:09:22.520
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我在 MVC3 中开发了一个应用程序。它在 Mozilla 和 Chrome 中运行良好。如果我将**Browser Mode 和 Document Mode 设置为 IE9**，它也可以在 IE 中正常工作，但是当我的应用程序在 IE 中加载时，它默认设置为**Browser Mode 和 Document Mode IE7**。

当我的网站在 IE 中打开时，如何设置默认浏览器模式和文档模式 IE9？我也试过把它放在`<head>`标签中，但我没有运气。请让我知道我该怎么做。

```
<meta http-equiv="X-UA-Compatiable" content="IE=edge,chrome=1"> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T08:27:40.093

您的元标记中似乎有错字。应该是`X-UA-Compatible`，不是`X-UA-Compatiable`。

此外，我更喜欢将这些标志作为标题而不是元标记发送。您可以在 web.config 中进行配置。

```
<system.webServer>
  <httpProtocol>
    <customHeaders>
      <add name="X-UA-Compatible" value="IE=edge,chrome=1"/>
    </customHeaders>
  </httpProtocol>
</system.webServer> 
```

这样您就无需在 HTML 代码中担心它。然后，您可以在必要时使用元标记覆盖单个页面的行为，因为元标记优先于标题。（请参阅[哪个 X-UA-Compatible 优先？Http-header 还是 Meta-tags？](https://stackoverflow.com/questions/9128739/which-x-ua-compatible-takes-precedence-http-header-or-meta-tags)）

# c# - WCF服务中C#中字符串的本地化

> ID：14849034
> 
> 赞同：0
> 
> 时间：2013-02-13T08:10:06.230
> 
> 标签：c#, wcf, localization

我们有一个突然出现的需求，我们需要本地化从 WCF 服务发送的字符串。挑战在于我们有一大堆从服务返回的数据模型对象，这些对象有字符串作为数据成员。有什么方法可以将这些字符串定位在一个中心位置，而不是单独定位每个字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:01:12.420

嗯，我不确定您在“将这些字符串定位在中心位置”下的理解。我认为，您有以下选择。

1.  在资源字典中创建一个包含本地化字符串的库。wcf 服务和您正在实施的前端可以使用它。然后您可以从 WCF 服务传递资源密钥。如果您不想发布 WCF 服务，这只会很好地工作。优势在于开发过程中的单点变化这里的一个主要问题是区分资源键和“普通字符串值”，它们不需要解释。我只会在字符串很少的情况下使用这个选项。
2.  当请求 WCF 服务时传递一个`CultureInfo`eg`en-GB, de-DE, ...`并让服务以正确的文化返回字符串。如果不支持文化，则返回后备文化中的字符串。在此选项中，您可以相对自由地实施本地化。数据库中的资源字典或额外的表都是可以想象的解决方案。与选项 1 相比的巨大优势，您无需在前端解释返回的字符串。

我希望这会有所帮助。

# c++ - 如何正确使用 std::istream

> ID：14849036
> 
> 赞同：0
> 
> 时间：2013-02-13T08:10:09.887
> 
> 标签：c++, istream

我想做以下事情：

```
// I want 'is' to be either opened file or stringstream ...
void ParseTokens(const std::istream &is, std::vector<TokenClass> &vToks)
{
    char ch;
    ...
    is >> ch;
    ...
} 
```

编译器抱怨：

```
error: ambiguous overload for ‘operator>>’ in ‘is >> ch’ 
```

我需要做什么才能完成这项工作？

[编辑]
只是一个警告：`operator>>`提供*格式化*输出 - 它会丢失空白字符（制表符、换行符等）。要访问所有字符，您需要使用`get()`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:16:50.713

由于从`is >> ch;`中提取字符`is`，因此它会修改流。因此，它不能`const`在函数签名中，这可能会导致看似无关的错误，因为没有完全匹配。将函数更改为`std::istream &`.

# itextsharp - iTextSharp 5.3.3：在 PDF 和 SetAction 中插入 PushbuttonField

> ID：14849041
> 
> 赞同：0
> 
> 时间：2013-02-13T08:10:25.427
> 
> 标签：itextsharp

我想在 PDF 文档中创建 PushButton 并设置 Action (GoToLocalPage)：

```
PushButton:=New PushbuttonField(stamper.writer, New Rectangle(300, 300,330,330),"Text");
PushButton.Image:=img;
PushButton.ProportionalIcon:=True;
PushButton.Layout:=PushbuttonField.LAYOUT_ICON_ONLY;
PushButton.Field.Action:=PdfAction.GotoLocalPage(2, New PdfDestination(PdfDestination.FIT), stamper.Writer);
stamper.AddAnnotation(PushButton.Field,5); 
```

结果，该操作不起作用。我究竟做错了什么？

在所有编写的示例中：PushButton.GetFields().SetAction(...)。但是在 iTextSharp 5.3.3 方法中 GetFields 不存在...

我试过了：

```
Action:=PdfAction.GotoLocalPage(2, New PdfDestination(PdfDestination.FIT), stamper.Writer);

PushButton.Field.SetAdditionalActions(iTextSharp.text.pdf.PdfName.D, Action); 
```

但它也不起作用..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:47:20.350

我会这样做：

```
PdfAnnotation pushbuttonAnn = PushButton.Field;  
pushbuttonAnn.Action:=PdfAction.GotoLocalPage(2, New PdfDestination PdfDestination.FIT), stamper.Writer);  
stamper.AddAnnotation(pushbuttonAnn,5); 
```

# python - Python：这个局部变量是静态的吗？

> ID：14849043
> 
> 赞同：-1
> 
> 时间：2013-02-13T08:10:33.250
> 
> 标签：python, django, recursion

**我的第一次尝试：**

```
def generate_id():

    """ Create unique id of alphanumeric characters """
    i = 0
    id = ''
    while i!=10:
        id = id + random.choice(string.ascii_letters + string.digits)
        i+=1

    if check_unique(id):
           return id 

    id = generate_id()
    return id

def check_unique(id):
    """Check if id is unique"""
    try:
        instances = SomeModel.objects.get(id=id)
    except ObjectDoesNotExist:
        return True

    return False 
```

**第二种方式：**

```
def generate_id():

    """ Create unique id of alphanumeric characters """
    i = 0
    id = ''
    while i!=10:
        id = id + random.choice(string.ascii_letters + string.digits)
        i+=1

    if check_unique(id):
           return id 

    generate_id()

def check_unique(id):
    """Check if id is unique"""
    try:
        instances = SomeModel.objects.get(id=id)
    except ObjectDoesNotExist:
        return True

    return False 
```

如果我采用***第二种方式***，我生成唯一 ID 的逻辑会不会出错？因为我可能会从上次通话中丢失 id 。

我是 python 新手，我不知道，但我认为我的`recursion`概念看起来很混乱

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:18:56.493

按照您的代码：

```
if check_unique(id):  # If this is `false`, you keep going
    return id 

generate_id()  # Now what? You call the function. Nothing gets returned. 
```

如果要创建唯一 ID，请不要使用递归。`while`只要它们不是唯一的，只需使用循环并生成新的 ID：

```
characters = string.ascii_letters + string.digits

def generate_id(length=10):
    return ''.join(random.choice(characters) for i in range(length))

def generate_unique_id(length=10):
    id = generate_id(length)

    while not check_unique(id):
        id = generate_id(length)

    return id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:14:45.967

在第二种方式中，您应该*返回*generate_id 函数的结尾：

```
return generate_id() 
```

我还建议进行迭代而不是递归调用……在这种情况下似乎更干净。

# workflow - Tridion 工作流程 - 如何在事件处理程序中的活动中获取组件

> ID：14849053
> 
> 赞同：6
> 
> 时间：2013-02-13T08:11:15.043
> 
> 标签：workflow, tridion

我需要在事件系统中获取与 Activity 关联的组件。

我尝试使用以下方法获取组件 ID：

```
 public void OnActivityInstanceFinishPost(ActivityInstance activityInstance, string finishMessage, string nextActivity, string dynamicAssignee)
    {

        if (activityInstance.ProcessInstance.ProcessDefinition.Title.Equals("Component Process IESE"))
        {
            if (activityInstance.ActivityDefinition.Title.Equals("Create or Edit Component"))
            {
                WFE workflow = tdse.GetWFE();
                try
                {
                    Component comp = (Component)activityInstance.ProcessInstance.Item;

                    XMLReadFilter filter = new XMLReadFilter();
                    String processHistoryId = activityInstance.ProcessInstance.ID.Replace("131076", "131080");

                   ProcessHistory hist = (ProcessHistory)tdse.GetObject(activityInstance.ProcessInstance.ID, EnumOpenMode.OpenModeView, Constants.URINULL, filter);

                }
                catch (Exception e)
                { }

            }
        }
    } 
```

我们尝试不同的选择：

```
 Component comp = (Component)activityInstance.ProcessInstance.Item; 
```

但是这个解决方案返回一个空值。

然后我在互联网上找到了下一个解决方案：

```
 XMLReadFilter filter = new XMLReadFilter();
 String processHistoryId = activityInstance.ProcessInstance.ID.Replace("131076", "131080");

 ProcessHistory hist = (ProcessHistory)tdse.GetObject(activityInstance.ProcessInstance.ID, EnumOpenMode.OpenModeView, Constants.URINULL, filter);
 Component comp = hist.Item as Component; 
```

但是 ProcessHistory 对象为空。

如何确定与 activityInstance 关联的组件？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T15:15:51.490

在查看了 Guskermitt 所需的功能之后，我向他展示了一种更简洁的方式来完成他需要做的事情。简而言之，在这种情况下不需要 EventSystem。

他的目标是在组件获得批准后发送电子邮件，方法如下：

1.  向工作流添加新的自动活动。
2.  创建一个新的 .NET 程序集，在本例中是一个 C# 类来完成他需要做的事情。
3.  在 GAC 中注册程序集。
4.  在工作流中的新自动活动中添加逻辑以使用 .NET 程序集。

2#

```
[ProgId("WfHelper")]
[ComVisible(true)]
public class Helper
{    
public void SendMail(string workItemId)
{
var session = new Session();
.
.
. 
```

4#

```
dim helper 
set helper = CreateObject("WfHelper")
call helper.SendMail(CurrentWorkItem.ID)
set helper = nothing 
FinishActivity “Email has been sent" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T08:46:58.440

`ActivityInstance`有一个`WorkItems`属性（继承自`Activity`），其中包含对您的`Component`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T14:58:05.087

OnActivityInstanceFinishPost 表示您的活动已完成。因此，不再有与​​之关联的工作项。但是，您将获得流程实例和与之关联的工作项。如果您在此处获得 null，则表明您的工作流程过程已完成并且组件已移出工作流程。通过查看您的代码，您的 ProcessInstance 很可能已完成（它不会为空，但不会有任何关联的项目）。

我怀疑您已经阅读了这篇文章[http://www.tridiondeveloper.com/autopublishing-on-workflow-finish](http://www.tridiondeveloper.com/autopublishing-on-workflow-finish)建议查看历史。您是否通过 CM GUI 查看过历史记录，是否存在历史记录项？如果不是，这就是你得到 null 的原因。工作流程过程在完成后会移至历史记录。因此，在查看历史记录之前，请仔细检查您是否确实处于最后一个工作流活动中。

通过查看您的代码，错误似乎是您正在尝试使用 activityInstance.ProcessInstance.ID 获取历史对象。GetObject() 应该返回一个项目，但是您对 ProcessHistory 的强制转换应该中断，然后您悄悄地吃掉异常。您需要传入 History ID，而不是 ProcessInstance ID，如下所示：

```
ProcessHistory hist = (ProcessHistory)tdse.GetObject(processHistoryId, EnumOpenMode.OpenModeView, Constants.URINULL, filter); 
```

# ios - 从 calloutAccessoryControlTapped 设置 ViewController 标题

> ID：14849063
> 
> 赞同：0
> 
> 时间：2013-02-13T08:11:56.263
> 
> 标签：ios, objective-c, mkmapview, mapkit, mkannotation

一旦点击了调出附件控件，我试图简单地将 detailViewController 的标题设置为 pin 的标题。

**这是我设置 MKAnnotation 的地方：**

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id 
<MKAnnotation>)annotation
{
MKAnnotationView *annotationView = [[MKPinAnnotationView alloc] 
initWithAnnotation:annotation reuseIdentifier:@"loc"]; 
```

**这是我想将详细视图控制器的标题设置为图钉标题的地方：**

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view     
calloutAccessoryControlTapped:(UIControl *)control
{

DetailViewController *controller = [[DetailViewController alloc] initWithNibName:nil
                                                                            bundle:nil];
[self.navigationController pushViewController:controller animated:YES]; // or use     
presentViewController if you're using modals

controller.title = pin.annotationView.subtitle;

} 
```

最后一行是搞砸了。有任何想法吗？谢谢你们！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:17:05.623

想通了 - 将控制器标题替换为：

```
controller.title = view.annotation.title; 
```

谢谢大家！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:39:43.743

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view     
calloutAccessoryControlTapped:(UIControl *)control
{
MKAnnotation * annotation = (MKAnnotation *)annotation;

DetailViewController *controller = [[DetailViewController alloc] initWithNibName:nil
                                                                            bundle:nil];
controller.title = annotation.subtitle;

[self.navigationController pushViewController:controller animated:YES]; // or use     
presentViewController if you're using modals

} 
```

上面的代码对我来说很好，布兰登先生

# html - 调整div中文本的CSS问题

> ID：14849068
> 
> 赞同：1
> 
> 时间：2013-02-13T08:12:04.567
> 
> 标签：html, css

在图片标题“账户和控股披露中越过白线而 DRF 远高于白线...

![在此处输入图像描述](../Images/a0f771216fc66aa8caf360c46a7b2dcd.png)

如何使用 css 将文本放在行上方。

html代码是

```
 <div class="tabs">
            <img src="images/disclosure.png" />
            Accounts and Holdings Disclosure</div>
        <div class="tabs">
            <img src="images/drf.png" />
            DRF</div> 
```

CSS是

```
.tabs
{
height: 85px;
border-bottom: 1px solid #fff;
text-align: center;
color: #fff;
padding-bottom:7px;
}
.tabs img
{
display: block;
margin-left: auto;
margin-right: auto;
height: 70px;
margin-top: 5px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:14:51.947

你应该写：

```
.tabs {
  height: auto;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:16:17.157

第一个块中根本没有足够的空间来应用填充。.tabs 高度为 85px，图像高度为 70px，顶部边距为 5px。因此，文本的剩余垂直空间仅为 10 像素，并且添加了 7 像素的填充。

在我看来，您需要减小图像的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T08:17:24.137

应该 ：

```
.tabs {
   height: 90px;
} 
```

# python - Django：从 Django 中的不同表中搜索

> ID：14849074
> 
> 赞同：0
> 
> 时间：2013-02-13T08:12:34.347
> 
> 标签：python, django, django-search-lucene

我正在尝试在 Django 中为用户实现搜索功能。

我可以使用`Q`一个表搜索，但这里的场景是不同的。

这是我的模型：

```
Class Profile(models.Model)        
    name = models.OnoeToOneField(User)
    category = models.ForeignKey(Category)
    Tags   = models.ForeignKey(Tags)

class Category(models.Model)
    name = models.Charfield(max_length = 100)
    sub_cat =  models.ForeignKey(SubCategory) 
```

我想搜索属于某个类别和/或某个标签的用户

但我无法找到一种方法来做到这一点。我不想使用 Haystack 或 Whoosh。

请向我建议一些简单的方法来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:22:50.607

你试过这样的查询集吗？

```
User.objects.filter(
    Q(profile__category__name__icontains=search_string) |
    Q(profile__Tags__name__icontains=search_string)
).distinct() 
```

有关详细信息，请参阅[使用 Q 对象的复杂查找](https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects)。

请注意，我`distinct()`用于消除重复结果，因为可以出于两个原因（每个对应于 Q 对象）选择相同的用户。

（当然，`Tags__name`为了示例，您应该按原样调整，但我没有标签模型的来源）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:25:23.040

其实很简单：

使用类别名称过滤：

```
Profile.objects.filter(category__name__iexact='category 1') 
```

使用类别 ID 过滤：

```
Profile.objects.filter(category__pk=27) 
```

使用子类别名称过滤：

```
Profile.objects.filter(category__sub_cat__name__iexact='exact sub category name') 
```

# jquery-ui - 如何在我的 flexslider 中停止自动滑动？

> ID：14849075
> 
> 赞同：17
> 
> 时间：2013-02-13T08:12:39.927
> 
> 标签：jquery-ui, jquery-mobile, carousel, flexslider

如何在 flex 滑块中停止自动滑动？我已经在我的移动网页中加载了该滑块。当页面打开时，它会滑动到下一个图像，没有任何滑动或点击事件。如何停止这种自动幻灯片过渡？我只需要在点击或滑动屏幕时让它工作。

这是我的代码：

```
<script type="text/javascript" charset="utf-8">
    $(window).load(function() {
        $('.flexslider').flexslider();
    });
</script>

<div class="flexslider">
    <ul class="slides">
        <li>
            <img src="img1.png"/>
        </li>
        <li>
            <img src="img2.png"/>
        </li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-02-15T06:35:33.040

默认情况下，Flexslider 的值为 slideshow: true，因此您必须将值更改为 false。

```
$(window).load(function() {
  $('.flexslider').flexslider({
    slideshow: false
  });
}); 
```

# json - 检查 json 数据以便在 extjs 中进行比较

> ID：14849077
> 
> 赞同：0
> 
> 时间：2013-02-13T08:12:52.303
> 
> 标签：json, extjs, extjs4.1, extjs-mvc

我使用 extjs MVC 创建了一个简单的登录页面，以了解 extjs 的 MVC 架构。正如您在下面看到的，我正在尝试将 json 数据放入存储中，然后我将使用输入的登录凭据检查该数据中的每个用户名和密码。我现在感到困惑的是，如何从文件夹中存在的检索到的 json 数据中检查用户名和密码`store`到`view`文件夹中？（以下代码只是有问题的相关代码）

我知道这可能会引发安全威胁，因为我正在客户端进行检查。

**“查看”文件夹 --> Code.js**

```
function checkJson(username, password){
    //if matched, return true.
    //else, return false.
} 
```

**“模型”文件夹 --> Code.js**

```
Ext.define('AM.model.User', {
   extend: 'Ext.data.Model',
   fields: ['name', 'email']
}); 
```

**“商店”文件夹-> Code.js**

```
Ext.define('LoginPage.store.Code', {
   extend: 'Ext.data.Store',
   model: 'LoginPage.model.Code',
   autoLoad: true,

   proxy: {
        type: 'ajax',
        api: {
            read: 'data/loginResponse.json',
            update: 'data/checkCredentials.json'  //Contains:  {"success": true}
        },
        reader: {
            type: 'json',
            root: 'loginResponse',
            successProperty: 'success'
        }
   }
}); 
```

**登录响应.json**

```
{
"form": {
   "login": [
     {
       "username": "venkat",
       "password": "123"
     },
     {
       "username": "admin",
       "password": "345"
     }
   ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:21:34.353

您应该将代码的检查部分放到控制器中（视图用于演示）。在视图中定义一些带有登录名和密码字段的表单。在 Controller catch `click`event on form `OK`( `Login`) 按钮中，获取表单值（登录名 + 密码），然后使用`Ext.data.Store.query()`方法来查找凭据是否适合：

[在这里](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Controller-method-control)查看如何在 MVC 中使用控制器来捕获事件的示例；

在您的控制器中放置：

```
init: function() {
    this.control({
        '#form_ok_button': { // this is the `id` property of your form's Login button
            click: function(button) {
                 var fValues = button.up('form').getValues(); // Assume your button is bound to the form
                 // Or you can use `Controller.refs` property (http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Controller-cfg-refs) to get form
                 var matched = store.query('username', fValues.username);
                 if(matched.length && matched[0].get('password') === fValues.password) {
                     // login OK!
                 }
            }
        }
    });
}, 
```

如何使用`refs`（在控制器中）：

```
refs: [
   { ref: 'usernameField', selector: '#username_field' }, // username field id is "username_field"
   { ref: 'passwordField', selector: '#password_field' }, // password field id is "password_field"
],

init: function() {  
   this.control({
       '#form_ok_button': {
            click: function() {
                // with `refs` autogetters are created for every `ref`:
                var username_field = this.getUsernameField();
                var password_field = this.getPasswordField();
            }
        }
   })
} 
```

你可以在`referencing` [这里](http://docs.sencha.com/ext-js/4-1/#!/guide/mvc_pt3)阅读。

对于`Ext.app.Controller.stores`数组中的每个存储，也会创建自动获取器（在您的情况下，用于控制器内部的`Code`存储`this.getCodeStore()`）。

**这是流程：**

1.  `this.getUsernameField()`您可以使用and获得用户名和密码字段值`this.getPasswordField()`；
2.  您`query()`存储用户名
3.  如果用户名存在于商店中，则检查密码是否合适。

# android - 当行数增加但父布局与其重叠时，ListView 会自动滚动

> ID：14849080
> 
> 赞同：0
> 
> 时间：2013-02-13T08:12:59.760
> 
> 标签：android, android-layout, listview, android-linearlayout, android-relativelayout

我有一个自定义的列表视图，我把它放在一个相对布局中，它周围有一些按钮和标签，这个布局存储在 table_layout.xml 文件中，在列表视图的每一行中有三个文本视图和一个复选框，这些文本框将在运行时使用从数据库中提取的数据进行填充，我在一个名为 cell.xml 的单独 xml 文件中编写了这个布局，但是当我运行应用程序时，table_layout.xml 中的按钮和文本视图相互重叠，并且列表视图。但是当添加行时列表视图会滚动。我找不到原因，如果你建议我一个解决方案，我会很高兴。

这是 table_layout.xml

```
 <?xml version="1.0" encoding="utf-8"?>

<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#000000"
    >

    <TextView 
        android:id="@+id/GOODNAME_CELL"
        android:layout_width="180dp"
        android:layout_height="wrap_content"
        android:background="@drawable/border"
        android:textSize="18dp"
        android:text="Order"
        android:paddingLeft="5dp"
        android:layout_alignParentTop="true"
        android:layout_alignParentLeft="true"

        />
     <TextView 
        android:id="@+id/GOODUNITPRICE_CELL"
        android:layout_width="180dp"
        android:layout_height="wrap_content"
        android:background="@drawable/border"
        android:textSize="18dp"
        android:text="Unit Price"
        android:paddingLeft="5dp"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@id/GOODNAME_CELL"
        />
      <TextView 
        android:id="@+id/QUANTITYCELL"
        android:layout_width="120dp"
        android:layout_height="wrap_content"
        android:background="@drawable/border"
        android:textSize="18dp"
        android:text="Quantity"
        android:paddingLeft="5dp"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@id/GOODUNITPRICE_CELL"
        />

 <ListView 
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    style="@style/CodeFont"
    android:layout_alignParentLeft="true"
    android:layout_below="@id/GOODUNITPRICE_CELL"
     >
    </ListView>

 <TextView
     android:id="@+id/TotalPriceTextview"
     android:layout_width="600dp"
     android:layout_height="wrap_content"
     android:text=""
     android:layout_below="@android:id/list"
     android:layout_centerHorizontal="true"
     android:background="@drawable/back"
     android:textColor="#FFFFFF"
     android:textSize="20dp"
        />
 <Button 
     android:id="@+id/DeleteSelectedGoodsButton"
     android:layout_width="150dp"
     android:layout_height="45dp"
     android:text="@string/DeleteSelectedGoods"
     android:layout_alignParentBottom="true"
     android:layout_alignParentLeft="true"
   />
 <Button 
     android:id="@+id/ConfirmDelete"
     android:layout_width="150dp"
     android:layout_height="45dp"
     android:text="@string/ConfirmDeleteButton"
     android:layout_alignParentBottom="true"
     android:layout_centerHorizontal="true"

     />
 <Button 
     android:id="@+id/CancelButton"
     android:layout_width="150dp"
     android:layout_height="45dp"
     android:text="@string/CancelButton"
     android:layout_alignParentBottom="true"
     android:layout_alignParentRight="true"

     />

</RelativeLayout> 
```

这是cell.xml

```
 <?xml version="1.0" encoding="utf-8" ?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:paddingTop="4dip"
    android:paddingBottom="6dip"
    android:orientation="horizontal"
    android:background="#000000"
    android:layout_marginRight="5dp"

    >

    <TextView 
        android:id="@+id/GOOD_NAME_CELL"
        android:layout_width="110dp"
        android:layout_height="55dp"
        android:layout_weight="1"
        android:textSize="18dp"
        android:textColor="#FFFFFF"
         android:paddingLeft="5dp"

        />
     <TextView 
        android:id="@+id/GOOD_UNITPRICE_CELL"
        android:layout_width="110dp"
        android:layout_height="55dp"
        android:layout_weight="1"
        android:textSize="18dp"
        android:textColor="#FFFFFF"
         android:paddingLeft="5dp"

        />
      <TextView 
        android:id="@+id/QUANTITY_CELL"
        android:layout_width="80dp"
        android:layout_height="55dp"
        android:layout_weight="1"
        android:textSize="18dp"
        android:paddingLeft="5dp"
        android:textColor="#FFFFFF"

        />
        <CheckBox 
          android:layout_width="40dp"
          android:layout_height="40dp"
          android:id="@+id/ChkOrder"
         android:layout_marginRight="15dp"
         android:clickable="true"
         android:focusable="false"

          />  

    </LinearLayout> 
```

这是屏幕截图： ![在此处输入图像描述](../Images/dfc33a7a0fd36d330d9404f86e093e90.png)

代码.java：

```
package com.example.nfc;

import java.text.DecimalFormat;
import java.text.NumberFormat;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Locale;
import java.util.Map;
import com.example.nfc.ExternalDbOpenHelper;

import android.R.integer;
import android.R.string;
import android.app.AlertDialog;
import android.app.ListActivity;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.support.v4.widget.SimpleCursorAdapter;
import android.util.SparseBooleanArray;
import android.view.KeyEvent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.WindowManager;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.LinearLayout;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;
import android.widget.Toast;

public class PrepopSqliteDbActivity extends ListActivity {

    private static final String DB_NAME = "NFC.sqlite";
    //------------------------------------------------------------
    private static final String TABLE_NAME = "Tbl_Goods";
    private static final String GOOD_ID = "Good_ID";
    private static final String CART_ID = "Cart_ID";
    private static final String GOOD_NAME = "Good_Name";
    private static final String GOOD_UNITPRICE = "Good_UnitPrice";
    private static final String QUANTITY = "Quantity";

     Cursor goodsCursor;

    private SQLiteDatabase database;
    private ListView listView;
     int checkedItemPosition;

    ArrayList<HashMap<String, String>> goods=new ArrayList<HashMap<String,String>>();
    HashMap<String, String> map;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.table_layout);

        //-------------------------------------------------------
        ExternalDbOpenHelper dbOpenHelper = new ExternalDbOpenHelper(this, DB_NAME);
        database = dbOpenHelper.openDataBase();
        //--------------------------------------

        fillgoods();
        ShowTotalPrice() ;
        setUpList(); 

  //////Delete Button

       Button DeleteGoods=(Button)findViewById(R.id.DeleteSelectedGoodsButton);
       DeleteGoods.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                /** Getting the position of the currently selected item**/

                  DeleteCheckedItem(checkedItemPosition);

                Toast.makeText(getApplicationContext(),"The selected order has been deleted successfully.", Toast.LENGTH_SHORT).show();

                finish();
                startActivity(getIntent());

            }

        });

        ///Confirm Button
       Button btnConfirm=(Button)findViewById(R.id.ConfirmDelete);
       btnConfirm.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            //ShowTotalPrice();

        }
    });
        ///Cancel Button
        Button btnCancel=(Button)findViewById(R.id.CancelButton);
        btnCancel.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {

                finish();
            }
        });

//ListView OnItemClickListener

listView.setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {

        CheckBox cbx = (CheckBox)view.findViewById(R.id.ChkOrder);

            int firstPosition = listView.getFirstVisiblePosition();
            for(int i=firstPosition;i<listView.getCount();i++){
            View v=listView.getChildAt(i);
            cbx = (CheckBox)v.findViewById(R.id.ChkOrder);
            if(cbx.isChecked()){

                 Toast.makeText(getApplicationContext(), 
                                 "Checked position " + goods.get(i), 
                                  Toast.LENGTH_SHORT).show();
                 checkedItemPosition=i;

           }
        }

     }

});

    }

    private void setUpList() {

        setListAdapter(new SimpleAdapter(this, goods, R.layout.cells,
                new String[]{GOOD_NAME,GOOD_UNITPRICE,QUANTITY},
                new int[]{R.id.GOOD_NAME_CELL,R.id.GOOD_UNITPRICE_CELL,
                R.id.QUANTITY_CELL}));

        //---------------------------------layout------------------------------------

        listView = getListView();
        listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);

///////////////////////
View footer = LayoutInflater.from(this).inflate(
  R.layout.footer, null);

listView.addFooterView(footer);
///////////////////////////////////////

            }
    private void DeleteCheckedItem(int chkPosition)
    {   
        String strName=goods.get(chkPosition).get(GOOD_NAME);
        String strPrice=goods.get(chkPosition).get(GOOD_UNITPRICE);
        String strQuantity=goods.get(chkPosition).get(QUANTITY);

        String whereClause = "GOOD_NAME = ? AND GOOD_UNITPRICE= ? AND QUANTITY= ?";
        String[] whereArgs = {strName,strPrice,strQuantity};

        database.delete(TABLE_NAME, whereClause, whereArgs);

        fillgoods();
    }

    //--------------------------------------------------------------------
    private void fillgoods() {
        goods = new ArrayList<HashMap<String, String>>();
         Cursor goodsCursor = database.query(TABLE_NAME,
                                             new String[] 
                                             {GOOD_ID,CART_ID,GOOD_NAME,GOOD_UNITPRICE,QUANTITY},
                                             null, null, null, null
                                             , GOOD_NAME);

        String[] goodsTable=new String[] 
                 {GOOD_NAME,GOOD_UNITPRICE,QUANTITY};
        goodsCursor.moveToFirst();
        String[] names=new String[1000];
        if(!goodsCursor.isAfterLast()) {
            do {
                 int i=0;

                 names[i] = goodsCursor.getString(2);
                 names[i+1]=goodsCursor.getString(3);
                 names[i+2]=goodsCursor.getString(4);

                 map=new HashMap<String, String>();

                 map.put(goodsTable[i],names[i]);
                 map.put(goodsTable[i+1], names[i+1]);
                 map.put(goodsTable[i+2], names[i+2]); 

                 goods.add(map);

            } while (goodsCursor.moveToNext());
        }

        goodsCursor.close();

    }

    /////////////////////////////////////////////////////

    //////////////Home And Back Button
    @Override
    public void onAttachedToWindow() {
       this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
      super.onAttachedToWindow();

    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
       if(keyCode == KeyEvent.KEYCODE_HOME)

           BackToMainIntent();

     else if(keyCode==KeyEvent.KEYCODE_BACK)
       {
         BackToMainIntent();
      }
       return false;
    }

    public void BackToMainIntent()
    {
        Intent intent = new Intent(this, Main.class);
           intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
           startActivity(intent);
      }
    } 
```

日志猫：

```
02-16 11:26:51.171: E/AndroidRuntime(222): Uncaught handler: thread main exiting due to uncaught exception
02-16 11:26:51.182: E/AndroidRuntime(222): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.nfc/com.example.nfc.PrepopSqliteDbActivity}: java.lang.NullPointerException
02-16 11:26:51.182: E/AndroidRuntime(222):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
02-16 11:26:51.182: E/AndroidRuntime(222):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
02-16 11:26:51.182: E/AndroidRuntime(222):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
02-16 11:26:51.182: E/AndroidRuntime(222):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
02-16 11:26:51.182: E/AndroidRuntime(222):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-16 11:26:51.182: E/AndroidRuntime(222):  at android.os.Looper.loop(Looper.java:123)
02-16 11:26:51.182: E/AndroidRuntime(222):  at android.app.ActivityThread.main(ActivityThread.java:4363)
02-16 11:26:51.182: E/AndroidRuntime(222):  at java.lang.reflect.Method.invokeNative(Native Method)
02-16 11:26:51.182: E/AndroidRuntime(222):  at java.lang.reflect.Method.invoke(Method.java:521)
02-16 11:26:51.182: E/AndroidRuntime(222):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
02-16 11:26:51.182: E/AndroidRuntime(222):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
02-16 11:26:51.182: E/AndroidRuntime(222):  at dalvik.system.NativeStart.main(Native Method)
02-16 11:26:51.182: E/AndroidRuntime(222): Caused by: java.lang.NullPointerException
02-16 11:26:51.182: E/AndroidRuntime(222):  at com.example.nfc.PrepopSqliteDbActivity.ShowTotalPrice(PrepopSqliteDbActivity.java:164)
02-16 11:26:51.182: E/AndroidRuntime(222):  at com.example.nfc.PrepopSqliteDbActivity.onCreate(PrepopSqliteDbActivity.java:79)
02-16 11:26:51.182: E/AndroidRuntime(222):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-16 11:26:51.182: E/AndroidRuntime(222):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
02-16 11:26:51.182: E/AndroidRuntime(222):  ... 11 more
02-16 11:26:51.192: I/Process(51): Sending signal. PID: 222 SIG: 3
02-16 11:26:51.192: I/dalvikvm(222): threadid=7: reacting to signal 3
02-16 11:26:51.202: E/dalvikvm(222): Unable to open stack trace file '/data/anr/traces.txt': Permission denied
02-16 11:26:51.373: I/ARMAssembler(51): generated scanline__00000077:03515104_00000000_00000000 [ 33 ipp] (47 ins) at [0x4e2f38:0x4e2ff4] in 383010 ns 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T07:22:03.853

有两种解决方案：

**首先**，您可以将带有 textview 的树按钮放在线性布局中，并将此线性布局放在 xml 布局的底部

### 在这种情况下，按钮不会随着项目滚动

```
<Linearlayout layout_width= "fill_parent"
layout_hight = "warp_conetent"
orentation = "horizantally"
alighparentbotton = "true"
>
<TextView
     android:id="@+id/TotalPriceTextview"
     android:layout_width="600dp"
     android:layout_height="wrap_content"
     android:text=""
     android:background="@drawable/back"
     android:textColor="#FFFFFF"
     android:textSize="20dp"
        />
 <Button 
     android:id="@+id/DeleteSelectedGoodsButton"
     android:layout_width="150dp"
     android:layout_height="45dp"
     android:text="@string/DeleteSelectedGoods"
   />
 <Button 
     android:id="@+id/ConfirmDelete"
     android:layout_width="150dp"
     android:layout_height="45dp"
     android:text="@string/ConfirmDeleteButton"

     />
 <Button 
     android:id="@+id/CancelButton"
     android:layout_width="150dp"
     android:layout_height="45dp"
     android:text="@string/CancelButton"
     android:layout_alignParentBottom="true"
     android:layout_alignParentRight="true"

     />
</linearlayout> 
```

**其次**，您可以使用将这三个按钮和文本视图放在页脚中并将此页脚添加到列表视图中**。在这种情况下，页脚将随项目一起滚动**

```
 View footer = LayoutInflater.from(this).inflate(
                    R.layout.footer, null);

yourListView.addFooterView(footer); 
```

### 页脚.xml

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#000000"
    >
 <TextView
     android:id="@+id/TotalPriceTextview"
     android:layout_width="600dp"
     android:layout_height="wrap_content"
     android:text=""
     android:layout_below="@android:id/list"
     android:layout_centerHorizontal="true"
     android:background="@drawable/back"
     android:textColor="#FFFFFF"
     android:textSize="20dp"
        />
 <Button 
     android:id="@+id/DeleteSelectedGoodsButton"
     android:layout_width="150dp"
     android:layout_height="45dp"
     android:text="@string/DeleteSelectedGoods"
     android:layout_alignParentBottom="true"
     android:layout_alignParentLeft="true"
   />
 <Button 
     android:id="@+id/ConfirmDelete"
     android:layout_width="150dp"
     android:layout_height="45dp"
     android:text="@string/ConfirmDeleteButton"
     android:layout_alignParentBottom="true"
     android:layout_centerHorizontal="true"

     />
 <Button 
     android:id="@+id/CancelButton"
     android:layout_width="150dp"
     android:layout_height="45dp"
     android:text="@string/CancelButton"
     android:layout_alignParentBottom="true"
     android:layout_alignParentRight="true"

     />

</RelativeLayout> 
```

### 编辑后

```
package com.stackoverflow.questions;

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import java.text.DecimalFormat;
import java.text.NumberFormat;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Locale;
import java.util.Map;

import android.R.integer;
import android.R.string;
import android.app.AlertDialog;
import android.app.ListActivity;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;

import android.util.SparseBooleanArray;
import android.view.KeyEvent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.WindowManager;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.LinearLayout;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;
import android.widget.Toast;

public class StackActivity extends Activity {

    private static final String DB_NAME = "NFC.sqlite";
    // ------------------------------------------------------------
    private static final String TABLE_NAME = "Tbl_Goods";
    private static final String GOOD_ID = "Good_ID";
    private static final String CART_ID = "Cart_ID";
    private static final String GOOD_NAME = "Good_Name";
    private static final String GOOD_UNITPRICE = "Good_UnitPrice";
    private static final String QUANTITY = "Quantity";

    Cursor goodsCursor;

    private SQLiteDatabase database;
    private ListView listViewsssss;
    int checkedItemPosition;

    ArrayList<HashMap<String, String>> goods = new ArrayList<HashMap<String, String>>();
    HashMap<String, String> map;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.table_layout);
        // fillgoods();
        setUpList();

    }

    private void setUpList() {

        listViewsssss = (ListView) findViewById(R.id.list);

        View footer = LayoutInflater.from(this).inflate(R.layout.footer, null);

        listViewsssss.addFooterView(footer);

        listViewsssss.setAdapter(new SimpleAdapter(this, goods, R.layout.cell,
                new String[] { GOOD_NAME, GOOD_UNITPRICE, QUANTITY },
                new int[] { R.id.GOOD_NAME_CELL, R.id.GOOD_UNITPRICE_CELL,
                        R.id.QUANTITY_CELL }));

        // ---------------------------------layout------------------------------------

        listViewsssss.setChoiceMode(ListView.CHOICE_MODE_SINGLE);

        // /////////////////////

        // /////////////////////////////////////

    }

    // --------------------------------------------------------------------

    @Override
    public void onAttachedToWindow() {
        this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
        super.onAttachedToWindow();

    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_HOME)

            BackToMainIntent();

        else if (keyCode == KeyEvent.KEYCODE_BACK) {
            BackToMainIntent();
        }
        return false;
    }

    public void BackToMainIntent() {
        Intent intent = new Intent(this, StackActivity.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
    }
} 
```

![在此处输入图像描述](../Images/28b7a31fc2de07706490643145576d67.png)

### 我将页脚更改为

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#000000"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/TotalPriceTextview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="asdf"
        android:textColor="#FFFFFF"
        android:textSize="20dp" />

    <Button
        android:id="@+id/DeleteSelectedGoodsButton"
        android:layout_width="wrap_content"
        android:layout_height="45dp"
        android:text="asdf" />

    <Button
        android:id="@+id/ConfirmDelete"
        android:layout_width="wrap_content"
        android:layout_height="45dp"
        android:text="sdaf" />

    <Button
        android:id="@+id/CancelButton"
        android:layout_width="wrap_content"
        android:layout_height="45dp"
        android:text="asdf" />

</LinearLayout> 
```

# apache - 某些页面上的服务器编译错误apache mono

> ID：14849083
> 
> 赞同：0
> 
> 时间：2013-02-13T08:13:05.327
> 
> 标签：apache, mono, mod-mono

我们有一个在 Apache 和 mono 1.1.18 版本下的 fedora 6 中运行的 .net Web 应用程序。这么久它工作得很好。突然我在某些页面中收到以下服务器错误，

```
Server Error in '/' Application
Compilation Error
Description: Error compiling a resource required to service this request. Review your source file and modify it to fix this error.

Error message:
(0,0) : error CS0006: Cannot find assembly `/tmp/apache-temp-aspnet-0/383ed40f/shadow-J7sRQf' 
```

但请注意，其余页面加载正常。我知道它与 JIT 编译有关，但为什么它会发生在某些特定页面上。错误“找不到程序集 -----/shadow-J7sRQf”也很可疑。所有浏览器始终显示相同的错误。

我没有重新启动 apache 或重新启动系统，因为我不确定这个错误是否会再次发生，我想从根本上导致它而不是忽略它。我也没有在 httpd 日志上找到任何东西。我试图用谷歌搜索它，但不幸的是找不到任何具体的东西。谁可以帮我这个事？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T10:46:24.133

哇，mono 1.1.18 真的太老了！

如果我是你，我会尝试停止 apache 并清理临时编译目录 /tmp/apache-temp-aspnet-0/ 中的所有内容，这应该会强制 mono 重新生成该目录中的所有内容。

然后，重新启动apache，看看它是否有帮助。

# java - 如何在 java 接口中使用泛型？

> ID：14849087
> 
> 赞同：1
> 
> 时间：2013-02-13T08:13:20.223
> 
> 标签：java, generics, interface

我正在尝试使用泛型构建一个简单的界面，这是我尝试使用的代码：

```
public interface MyInterface<T>
{
   public ArrayList<T> items;
   //...
} 
```

但是，我在从非静态上下文等访问静态变量 T 时遇到错误。我怎样才能完成我想要做的事情？这就是我设想使用实现此接口的类的方式：

```
MyInterface<SomeObject> foo = new MyInterfaceImpl<>();

for (SomeObject bar: foo.items)
{
     bar.someMethod();
} 
```

这可以通过接口指定吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:17:37.190

在接口中声明的所有变量都是默认静态和最终的所以你的泛型类型 T 不能适用于`ArrayList`. 所以它正在促进错误*无法对非静态类型 T 进行静态引用*

来自[Java 语言规范 Sec。8.1.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.1.2)

*   在以下任何地方引用泛型类 C 的类型参数是编译时错误：
*   C 的静态成员的声明（§8.3.1.1、§8.4.3.2、§8.5.1），或
*   嵌套在 C 中的任何类型声明的静态成员的声明，或
*   C 的静态初始化程序（第 8.7 节），或
*   嵌套在 C 中的任何类声明的静态初始化程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T08:23:35.953

主要问题是数据成员，在接口中声明时默认是静态的。

不允许静态数据成员引用泛型参数。如果允许，这将破坏类型安全，因为应该允许不同的实例具有不同的类型参数，但是静态成员由所有实例共享，因此它不能链接到特定的类型参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T08:25:34.193

基本上，接口描述的是功能（也***就是***类可以做什么）而不是实现（也就是***实例如何***实现这些功能）。

从[this other stackoverflow question](https://stackoverflow.com/questions/2430756/why-are-interface-variables-static-and-final-by-default)

> 接口变量是静态的，因为 Java 接口不能单独实例化；变量的值必须在不存在实例的静态上下文中分配。final修饰符确保分配给接口变量的值是一个真正的常量，程序代码不能重新分配。

你在这里真正需要的是一个***抽象***基类

```
class abstract Base<T> implements MyInterface<T> {
    //btw it's recommended that you use interfaces as the declaring type not implementations
    public List<T> items = new ArrayList<T>;
}

class MyInterfaceImpl<T> extends Base<T> {
   //...
} 
```

抽象基类的优点是它们可以包括从 0 到 100% 的实现，包括公共/保护/私有实例字段。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T08:29:27.003

按照 Eyal 的解释，这样做：

```
public interface MyInterface<T> {
  Collection<T> getItems();
} 
```

实现类将持有一个动态数据成员：

```
public class MyImpl<T> implements MyInterface<T> {
  private Collection<T> items;
  public Collection<T> getItems() { return items; }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T08:15:44.110

你必须这样做：

```
MyInterface<SomeObject> foo = new MyInterfaceImpl<SomeObject>();

for (SomeObject bar: foo.items)
{
    bar.someMethod();
} 
```

请注意，如果 MyInterfaceImpl 是泛型的或不是泛型的，则必须使用适当的类对其进行参数化，而不需要括号。

# uicollectionview - HSC 评估 - UICollectionView 信号 SIGABRT

> ID：14849089
> 
> 赞同：1
> 
> 时间：2013-02-13T08:13:26.697
> 
> 标签：uicollectionview, sigabrt

好的，所以我正在 Xcode 中构建一个基本的 UIColletoion 视图应用程序，从 Ray Wenderlich 网站上的教程开始，当我开始运行它时，它会搜索照片，然后我在这行代码中遇到错误代码...

```
 - (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath {
        UICollectionViewCell *cell = [cv dequeueReusableCellWithReuseIdentifier:@"FlickrCell " forIndexPath:indexPath]; //< error on this line
        cell.backgroundColor = [UIColor whiteColor];
        return cell; 
```

}

什么会解决这个问题并允许应用程序继续运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T10:15:18.897

注意标识符字符串中的尾随空格。

```
"FlickrCell "
 ..........^ 
```

它应该是“FlickerCell”。

# oracle - Oracle Text 查询重写模板不起作用

> ID：14849094
> 
> 赞同：2
> 
> 时间：2013-02-13T08:13:38.947
> 
> 标签：oracle, oracle-text

为什么 Oracle 文档中示例中的最后两个重写规则不起作用？

来源[http://docs.oracle.com/cd/B28359_01/text.111/b28303/query.htm#i1007557](http://docs.oracle.com/cd/B28359_01/text.111/b28303/query.htm#i1007557)

> 查询应用程序有时会解析最终用户查询，使用不同的运算符组合以一种或多种方式解释查询字符串。例如，如果用户输入查询 kukui nut，您的应用程序可能会输入查询 {kukui nut} 和 {kukui or nut} 以增加召回率。
> 
> 查询重写功能使您能够提交将原始查询扩展为重写版本的单个查询。结果返回没有重复。
> 
> 您可以使用查询模板功能指定重写序列。只需调用一次 CONTAINS 或 CATSEARCH 即可有效地执行重写后的查询版本。
> 
> 以下模板定义了查询重写序列。{kukui nut}的查询改写如下：
> 
> {kukui} {坚果}
> 
> {kukui} ; {坚果}
> 
> {kukui} 和 {nut}
> 
> {kukui}累积{坚果}
> 
> 这些转换的查询重写模板如下：
> 
> ```
> select id from docs where CONTAINS (text,
>  '<query>
>    <textquery lang="ENGLISH" grammar="CONTEXT"> kukui nut
>      <progression>
>        <seq><rewrite>transform((TOKENS, "{", "}", " "))</rewrite></seq>
>        <seq><rewrite>transform((TOKENS, "{", "}", " ; "))</rewrite></seq>
>        <seq><rewrite>transform((TOKENS, "{", "}", "AND"))</rewrite></seq>
>        <seq><rewrite>transform((TOKENS, "{", "}", "ACCUM"))</rewrite></seq>
>      </progression>
>    </textquery>
>   <score datatype="INTEGER" algorithm="COUNT"/>
> </query>')>0; 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:13:38.947

Oracle 提供的示例中存在错误。查询运算符必须用空格分隔：

```
<seq><rewrite>transform((TOKENS, "{", "}", " AND "))</rewrite></seq>
<seq><rewrite>transform((TOKENS, "{", "}", " ACCUM "))</rewrite></seq> 
```

所以“AND”和“ACCUM”而不是文档中的“AND”和“ACCUM”。

# ruby-on-rails-3 - 创建没有 HTML 重定向的新 Rails 记录

> ID：14849096
> 
> 赞同：0
> 
> 时间：2013-02-13T08:13:40.253
> 
> 标签：ruby-on-rails-3, activerecord

我有一个 Rails 应用程序，其中有 Article 和 Like 模型。我希望有人能够创建类似于 Facebook 的 Like 记录，其中数据库记录新记录而不重定向它们。我的两个要求是：在不重定向用户的情况下创建一个新的 Like 记录，并有一条 flash 或 js 消息确认该记录已创建。

我试着把它放在我的视野中。但是，当我这样做时，它会创建两个相同的记录：

```
<%= form_for @like, :remote=> true do |f| %>
  <%= f.hidden_field(:article_id, :value => article.id) %>      
  <%= f.submit "Like" %>
<% end %> 
```

我也试过这个，结果创建了一条记录，但它把我带到了 localhost:3000/likes：

```
<%= form_for @like do |f| %>
  <%= f.hidden_field(:article_id, :value => article.id) %>      
  <%= f.submit "Like" %>
<% end %> 
```

然后在 Like Controller 中注释掉 format.html 和 json：

```
 def create
    @like = Like.new(params[:like])

    respond_to do |format|
      if @like.save
        #  format.html { redirect_to @like, notice: 'Like was successfully created.' }
        #  format.json { render json: @like, status: :created, location: @like}
      else
        format.html { render action: "new" }
        format.json { render json: @like.errors, status: :unprocessable_entity }
      end
    end
   end 
```

满足我的两个要求的最佳方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:24:15.153

我假设文章和喜欢是相关的。当您想“喜欢”一篇文章时，您实际上是在更新该文章，对吗？换句话说，您必须在文章控制器的更新操作中更改重定向。

PS我会使用一些javascript来提交表单，例如：

```
<script type="text/javascript">
  $(document).ready(function() {
    $('.edit_[here_comes_the_name] input[type=checkbox]').click(function() {
      $(this).parent('form').submit();
    });
  });
</script> 
```

此示例在单击复选框时提交来自特定表单（父级）的输入。当然，您必须对其进行调整以适应您的需求。

# java - 如何在 GXT 3.x 中实现冻结列？

> ID：14849097
> 
> 赞同：8
> 
> 时间：2013-02-13T08:13:40.743
> 
> 标签：java, gwt, extjs, gxt

如何在 GXT 3.x（来自 Sencha）中实现冻结列？Sencha 的另一款产品 Ext-JS 似乎实现了这一点，但我看不出基于 Java 的 GXT 在哪里实现了同样的功能：

[http://dev.sencha.com/deploy/ext-4.0.0/examples/grid/locking-grid.html](http://dev.sencha.com/deploy/ext-4.0.0/examples/grid/locking-grid.html)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-24T04:04:50.457

基本思想是您需要两个不同的滚动容器，一个带有固定列，一个带有滚动列。这些中的每一个都需要位于不同的视口中，因此标准的 Grid/GridView 不能很好地处理这个问题——它们会假设滚动应该如何表现，因此简单地对一个或两个进行子类化可能会相当涉及。

相反，您可以构建两个网格，一个用于锁定列，一个用于滚动列。每个都可以处理自己的`ColumnConfig`类，绘制标题和行，并将链接到相同的类`ListStore`以确保它们的数据同步 - 存储中的更改将传递到两个侦听网格。

为了获得完整的效果，需要一些额外的布线：

*   链接滚动。收听`BodyScrollEvent`来自每个网格的 ，并将另一个滚动到同一个位置（仅更改`top`，不更改`left`，因为您不希望一个控制另一个）。
*   大小是第二大部分 - 两个网格都需要它们的可滚动高度相同，但水平滚动需要在底部有一个缓冲区，当它实际显示滚动条时。通常 Grid 会根据其父级的指示来调整大小，尽管有时您会直接调整 Grid 的大小 - 在这种情况下，不需要此步骤，只需稍微调整两个网格的大小即可。否则，您需要构建布局以正确配置它。
*   最后，锁定列需要隐藏它的垂直滚动条——用户不需要看到两个垂直滚动条。

这涵盖了基本用例，但不处理诸如替代`GridView`实现之类的事情 -`GroupingView`子类将需要链接扩展（并隐藏组标题以便它们不会出现两次，加上处理组行应该'当后半部分横向滚动时不会被拆分），`TreeGridView`并且`TreeGrid`需要链接扩展节点并从第二个网格中隐藏树 +/- 图标。

这是应用于[http://www.sencha.com/examples/#ExamplePlace:basicgrid](http://www.sencha.com/examples/#ExamplePlace:basicgrid)的基本网格示例的一组基本修改。为了避免混淆问题，我删除了该网格中的许多其他功能，例如工具提示和更改选择模型：

```
public class GridExample implements IsWidget, EntryPoint {
  private static final StockProperties props = GWT.create(StockProperties.class);

  private ContentPanel root;

  @Override
  public Widget asWidget() {
    if (root == null) {
      final NumberFormat number = NumberFormat.getFormat("0.00");

      ColumnConfig<Stock, String> nameCol = new ColumnConfig<Stock, String>(props.name(), 50, SafeHtmlUtils.fromTrustedString("<b>Company</b>"));

      ColumnConfig<Stock, String> symbolCol = new ColumnConfig<Stock, String>(props.symbol(), 100, "Symbol");
      ColumnConfig<Stock, Double> lastCol = new ColumnConfig<Stock, Double>(props.last(), 75, "Last");

      ColumnConfig<Stock, Double> changeCol = new ColumnConfig<Stock, Double>(props.change(), 100, "Change");
      changeCol.setCell(new AbstractCell<Double>() {

        @Override
        public void render(Context context, Double value, SafeHtmlBuilder sb) {
          String style = "style='color: " + (value < 0 ? "red" : "green") + "'";
          String v = number.format(value);
          sb.appendHtmlConstant("<span " + style + " qtitle='Change' qtip='" + v + "'>" + v + "</span>");
        }
      });

      ColumnConfig<Stock, Date> lastTransCol = new ColumnConfig<Stock, Date>(props.lastTrans(), 100, "Last Updated");
      lastTransCol.setCell(new DateCell(DateTimeFormat.getFormat("MM/dd/yyyy")));

      List<ColumnConfig<Stock, ?>> l = new ArrayList<ColumnConfig<Stock, ?>>();
      //Remove name from main set of columns
      //      l.add(nameCol);
      l.add(symbolCol);
      l.add(lastCol);
      l.add(changeCol);
      l.add(lastTransCol);

      //create two column models, one for the locked section
      ColumnModel<Stock> lockedCm = new ColumnModel<Stock>(Collections.<ColumnConfig<Stock, ?>>singletonList(nameCol));
      ColumnModel<Stock> cm = new ColumnModel<Stock>(l);

      ListStore<Stock> store = new ListStore<Stock>(props.key());
      store.addAll(TestData.getStocks());

      root = new ContentPanel();
      root.setHeadingText("Locked Grid Sample");
      root.setPixelSize(600, 300);

      final Resizable resizable = new Resizable(root, Dir.E, Dir.SE, Dir.S);
      root.addExpandHandler(new ExpandHandler() {
        @Override
        public void onExpand(ExpandEvent event) {
          resizable.setEnabled(true);
        }
      });
      root.addCollapseHandler(new CollapseHandler() {
        @Override
        public void onCollapse(CollapseEvent event) {
          resizable.setEnabled(false);
        }
      });

      //locked grid
      final Grid<Stock> lockedGrid = new Grid<Stock>(store, lockedCm) {
        @Override
        protected Size adjustSize(Size size) {
          //this is a tricky part - convince the grid to draw just slightly too wide
          //and so push the scrollbar out of sight
          return new Size(size.getWidth() + XDOM.getScrollBarWidth() - 1, size.getHeight());
        }
      };
      lockedGrid.setView(new GridView<Stock>(){{
        this.scrollOffset=0;
      }});
      //require columns to always fit, preventing scrollbar
      lockedGrid.getView().setForceFit(true);

      //main grid, with horiz scrollbar
      final Grid<Stock> grid = new Grid<Stock>(store, cm);
      //don't want this feature, want to encourage horizontal scrollbars
      //      grid.getView().setAutoExpandColumn(nameCol);
      grid.getView().setStripeRows(true);
      grid.getView().setColumnLines(true);
      grid.setBorders(false);

      grid.setColumnReordering(true);
      grid.setStateful(true);
      grid.setStateId("gridExample");

      //link scrolling
      lockedGrid.addBodyScrollHandler(new BodyScrollHandler() {
        @Override
        public void onBodyScroll(BodyScrollEvent event) {
          grid.getView().getScroller().scrollTo(ScrollDirection.TOP, event.getScrollTop());
        }
      });
      grid.addBodyScrollHandler(new BodyScrollHandler() {
        @Override
        public void onBodyScroll(BodyScrollEvent event) {
          lockedGrid.getView().getScroller().scrollTo(ScrollDirection.TOP, event.getScrollTop());
        }
      });

      HorizontalLayoutContainer gridWrapper = new HorizontalLayoutContainer();
      root.setWidget(gridWrapper);

      //add locked column, only 300px wide (in this example, use layouts to change how this works
      HorizontalLayoutData lockedColumnLayoutData = new HorizontalLayoutData(300, 1.0);

      //this is optional - without this, you get a little offset issue at the very bottom of the non-locked grid
      lockedColumnLayoutData.setMargins(new Margins(0, 0, XDOM.getScrollBarWidth(), 0));

      gridWrapper.add(lockedGrid, lockedColumnLayoutData);

      //add non-locked section, taking up all remaining width
      gridWrapper.add(grid, new HorizontalLayoutData(1.0, 1.0));
    }

    return root;
  }

  @Override
  public void onModuleLoad() {
    RootPanel.get().add(asWidget());
  }
} 
```

有一些问题（锁定列和未锁定列之间没有界限，锁定列标题菜单上下文图标有点不合适），但它涵盖了大部分细节，没有太多麻烦，并且几乎所有这些都可以配置 - 想要最后的锁？只需移动修改 - 想要多个锁定列？只需向lockedCm 添加更多内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T19:20:41.103

该功能未在 GXT 中实现，但有一个名为**The_Jackal的用户在**[Sencha 论坛 - Thread](http://www.sencha.com/forum/showthread.php?86653-Locked-Freeze-Column-Grid)中针对此问题进行了解决。我还没有尝试过，但我希望它可以帮助你。

[GXT - 冻结网格解决方法 下载](http://www.sencha.com/forum/attachment.php?attachmentid=33601&d=1333582508)

# actionscript-3 - 如果不是，我们可以在 textArea 中使用 textArea 那么如何编写三角函数矩阵

> ID：14849098
> 
> 赞同：2
> 
> 时间：2013-02-13T08:13:41.237
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.6

如何`textArea`在一个`textArea` 或可以是另一个文本编辑器中使用来编写一些数学方程、矩阵等？![在此处输入图像描述](../Images/88e34aea141b940510072da4d6160a29.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:38:31.117

所以本质上你想编写和编辑数学方程。[fMath](http://www.fmath.info/flex/download.jsp)将是启动和运行的最快途径，并且可以避免手动滚动的头痛。

# ruby-on-rails - 在 mongomapper 中查找索引键列表

> ID：14849104
> 
> 赞同：1
> 
> 时间：2013-02-13T08:13:52.960
> 
> 标签：ruby-on-rails, mongodb, indexing, mongomapper

我正在使用 mongodb 和 mongomapper 开发 Rails 应用程序。我想索引数据库中的几个键。这是我在 mongo 上的第一个项目。

我想索引的键可以这样指定

```
User.ensure_index(:email) 
```

[如此处](http://mongomapper.com/documentation/plugins/indexes.html)所述

我的问题是，我是否需要手动调用它（可能将其包装在一个方法中）以使索引真正发生？

以及如何找到具有索引的键列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:56:55.097

以下是我的问题的答案

我是否需要手动调用它（可能将其包装在一个方法中）以使索引真正发生？

是的，我们必须手动调用 Model 上的 ensure_index 方法。所以我们可以将它包装在一个方法中，并可以从控制台甚至是 rake 任务中调用。

```
def self.create_index
  self.ensure_index(:email)
  self.ensure_index(:first_name)
  self.ensure_index(:last_name)
  true
end 
```

然后从控制台

```
User.create_index 
```

您可以像这样使用 mongo 的 getIndexes() 方法检查哪些键被索引

```
mongo                      #=> enter the mongo console
show dbs                   #=> see the list of available dbs
use my_database            #=> switch to your database
db.table_name.getIndexes() #=> replace table_name with your's 
```

就是这样，你可以在你的桌子上看到索引列表

谢谢！

# c++ - 什么时候不使用`auto&&`？

> ID：14849107
> 
> 赞同：19
> 
> 时间：2013-02-13T08:14:02.800
> 
> 标签：c++, c++11, auto, universal-reference

```
 auto&& mytup = std::make_tuple(9,1,"hello");
  std::get<0>(mytup) = 42;
  cout << std::get<0>(mytup) << endl; 
```

1.  从 make_tuple 返回时是否涉及复制/移动（没有 RVO）？
2.  它会导致未定义的行为吗？
3.  我都可以读写通用参考。可以`auto&& var = func()`一直使用而不是`auto var = func()`这样就没有复制/移动？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-13T08:39:47.850

只有在初始化程序是返回短期右值引用的函数调用的情况下，它才会出现问题。用更少的词和更多的代码：

```
// Fine; lifetime extension applies!
auto&& ref = 42;

auto id = [](int&& i) -> int&& { return std::move(i); };
auto&& uhoh = id(42);
// uhoh is now a stale reference; can't touch it! 
```

相比之下，`auto uhoh = id(42);`会工作得很好。

在您的情况下，因为`std::make_tuple`返回一个值而不是右值引用，所以没有问题。

我认为真正的危险来自那些带有右值引用参数的函数和函数模板，它们返回一个右值引用，指向某些子对象的生命周期取决于这些子对象。（话虽这么说，`auto&& ref = std::move(42);`但问题很简单！）

从 C++11 开始，这种情况并不是全新的，请考虑：`T const& ref = bar(T_factory());`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-13T08:43:13.750

1.  是的。任何不返回引用类型的函数的返回都可能涉及复制/移动。消除这就是 RVO 的意义所在。您的引用绑定到的对象需要以某种方式初始化。

2.  不，为什么要这样做？绑定到引用的临时/prvalue 的生命周期由引用的范围决定。

3.  如果 func() 不返回引用类型，则效率（或行为）不应该有任何差异

之间

```
auto&& var = func(); 
```

和

```
auto var = func(); 
```

在这两种情况下，都会构造一个生命周期到包含块末尾的对象。在一种情况下，它有自己的名称，在另一种情况下，它是通过引用命名的。在这两种情况下，名称都可以用作左值。RVO 同样适用于任何一种情况。

一些编译器对本地对象的优化可能比对引用的优化更好，即使在当前情况下，临时引用实际上与本地对象没有什么不同。

如果`func()`可能返回一个引用，情况就大不相同了——在这种情况下，您必须决定是否要复制/移动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T08:42:07.633

C++ 中有一条特定规则（甚至在 C++11 之前），如果将引用绑定到临时，则临时的生命周期将延长到引用的生命周期。

一个更简单的情况是：

```
int foo () {
    return 42;
}

int bar () {
    const int& x = foo();
    return x; // Here is safe to use x
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T08:37:18.257

评估调用的结果是实例化`make_tuple`的prvalue 临时。*类型说明符*`tuple`将被推断为相同的实例化（7.1.6.4p6），类型也是如此。然后，prvalue 临时值由引用(12.2p5) 延长生命周期。`auto` *`tuple``mytup``tuple<...> &&``mytup`*

 *1.  因为临时*是*函数的返回值，所以不涉及复制/移动（可能仍然存在 RVO 内`make_tuple`）。
2.  行为是完全定义的。
3.  对于几乎所有情况，`mytup`即使它的类型是右值引用，也会被视为左值。`auto &&`然而，使用所有明智的编译器都会忽略临时的复制/移动是没有意义的。

`mytup`澄清一下，被视为右值的唯一方法是使用`std::forward<decltype(mytup)>(mytup)`，如[auto&& 告诉我们什么？](https://stackoverflow.com/questions/13230480/what-does-auto-tell-us); 但是，如果您*知道*`mytup`(在这种情况下)的类型，`tuple<...>`那么您也可以使用`std::move`.*

# css - 在 css3 中使用多个背景图像

> ID：14849108
> 
> 赞同：0
> 
> 时间：2013-02-13T08:14:05.190
> 
> 标签：css, background-image

我正在尝试在 div 上使用多个背景但没有任何成功，任何人都可以建议我在哪里弄错了，下面是我正在使用的 css：

```
.box-text{
font-size: 14px; color: #ffffff; line-height: 22px;  
background-image:url('/images/p-top.png'), url('/images/p-center.png'),url('/images/p-bottom.png'); 
background-position: top center, center center, bottom center; 
background-repeat: no-repeat, repeat-y,no-repeat;}

<div class="box-text">
variable text.............
</div> 
```

结果我得到：

![在此处输入图像描述](../Images/8ed1c6ca21e9f846ff2e29cd2c29bc94.png)

预期结果：

![在此处输入图像描述](../Images/2b1be1b0f4737d06cf36f693e1672173.png)

我已经完成了盒子的切片以获得 3 张图像，一张是顶部的另一张中间的一张，我已经使用了 repeat-y，第三张图像是底部的图像来覆盖盒子。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:26:25.540

背景位置首先用水平值指定，所以你应该切换它们：

```
background-position: center top, center center, center bottom; 
```

# interface - VB6 RS232 未使用 MSCOMM Controll 从设备接收完整数据

> ID：14849114
> 
> 赞同：1
> 
> 时间：2013-02-13T08:14:28.807
> 
> 标签：interface, vb6, serial-port

我有一个在 com 端口上发送数据的临床设备，我想从设备接收数据，它在 ENQ 上发送 ACK 后也接收到第一帧（254）字符，它接收**[ETB] [CR][LF]**字符然后我再次发送 ACK对于下一帧，但不接收数据只接收 EOT char

根据设备的设备通信是：

> <-[ENQ]
> 
> ->[确认]
> 
> <-[STX]1H| ***** ** *** ** *** ** *** ** *** ** *** ** *** ** ***** -[ETB]21[CR][LF]
> 
> ->[确认]
> 
> <-[STX]1H| ***** ** *** ** *** ** *** ** *** ** *** ** *** ** ***** -[ETX]8E[CR][LF]
> 
> ->[确认]
> 
> <-[EOT]

我的代码是：

```
'MSComm1.Settings = "9600,n,8,1"
'MSComm1.InputLen = 1
Private Sub MSComm1_OnComm()
    Dim InBuff As String

    InBuff = MSComm1.Input
    if Chr$(5)=InBuff then    'ENQ received
        MSComm1.Output=Chr$(6) & VbCr
    elseif Chr$(10)=InBuff then 'LF received
        MSComm1.Output=Chr$(6) & VbCr
    else
        text1.text=text1.text & InBuff
    end if
End Sub 
```

设备发送完整数据，因为 1 个软件带有接收完整数据的设备，但在再次发送 ACK 后我没有收到下一帧，如果有人知道下一个 ACK​​ 必须发送什么输出，请告诉我

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-03T12:25:58.027

做这样的事情...

```
MSComm1.InputLen = 1 ' for sending single character from device
MSComm1.RThreshold = 1 ' for firing events on receiving a single character

Dim InBuff As String

if MSComm1.CommEvent = comEvReceive then
do 
    InBuff = MSComm1.Input
    Loop Until MSComm1.InBufferCount < 1 
```

首先接收所有数据，然后以您自己的方式使用这些数据。

# jquery - 禁用可拖动容器元素内的 div

> ID：14849121
> 
> 赞同：0
> 
> 时间：2013-02-13T08:14:57.440
> 
> 标签：jquery, jquery-ui

JSF中：

[http://jsfiddle.net/SaGtw/8/](http://jsfiddle.net/SaGtw/8/)

好的。所以我希望#drag-box 可以拖动，这很容易完成。但我不希望 #element-1 与它一起拖动，但我仍然希望 element-1 位于 #drag-box div 内。

```
<div id="drag-box">
    <div id="element-1">HECK YA!</div>
    <div id="element-2">HECK NO!</div>
</div>

$('#drag-box').draggable(); 
```

可能吗？可以做到吗？对不起，如果这听起来太复杂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:36:16.193

如果您不希望该 div 移动，为什么要将 element-1 放在可拖动框中？如果您定义 div 可拖动，则该 div 内的元素也会移动是合乎逻辑的。为什么不把 element-1 div 放在可拖动的 div 外面，把 element-2 放在里面？

# flash - 如何链接多个 continueTo() 补间

> ID：14849123
> 
> 赞同：0
> 
> 时间：2013-02-13T08:15:05.227
> 
> 标签：flash, actionscript, actionscript-2, flash-cs5, tween

我有一个我想以增量移动的影片剪辑（每个增量移动都应该应用缓动）。为了让剪辑在我使用的第一个动作后进行动画处理：

```
var sheepMoveX:Tween = new Tween (inst_sheep, "_x", Regular.easeOut, 1142, 1092, 10, false);
sheepMoveX.onMotionFinished = function() {
    sheepMoveX.continueTo(1042, 10);
} 
```

但在此之后，我想要多个后续动作。这不起作用：

```
var sheepMoveX:Tween = new Tween (inst_sheep, "_x", Regular.easeOut, 1142, 1092, 10, false);
sheepMoveX.onMotionFinished = function() {
    sheepMoveX.continueTo(1042, 10)
    .onMotionFinished.continueTo(992, 10)
    .onMotionFinished.continueTo(892, 10)
    .onMotionFinished.continueTo(852, 10);
} 
```

链接补间事件的正确格式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:17:34.260

Adobe 的 Tween 库设计得不是很好。我会避免它并使用 Greensock 的 TweenLite。他们有一个系统，您可以在其中将 Tweens 排队，以便他们按照您的描述一个接一个地播放。

# java - >> 运算符优于 / 运算符

> ID：14849124
> 
> 赞同：2
> 
> 时间：2013-02-13T08:15:05.477
> 
> 标签：java

使用 >> 运算符优于 / 运算符的优势是什么？它在我维护的代码中被广泛使用。例如， `int width = previousWidth >> 2;`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T08:19:05.827

当您想将一个值移动一定数量的位时，理解起来要简单得多。例如：

```
byte[] bits = new byte[4];
bits[0] = (byte) (value >> 24);
bits[1] = (byte) (value >> 16);
bits[2] = (byte) (value >> 8);
bits[3] = (byte) (value >> 0); 
```

这显然是移动了不同的位数。你*真的*想用除法来表达吗？

当然，当你真正想要的是除法时，为了便于阅读，你应该使用除法运算符。有些人可能会为了性能而使用位移，但与以往一样，对于大多数代码来说，可读性比微优化更重要。因此，在您的情况下，如果*实际*需要除以 4，则代码​​应该*绝对反映`width`：`previousWidth`

```
int width = previousWidth / 4; 
```

在证明性能差异显着之后，我只会使用位移位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:17:13.570

它们是不同的操作：

*   `>> 2`将位模式向右移动两位（本质上是将***整数***除以 2^2 = 4）。
*   `/ 2`将数字除以 2（可以实现为`>> 1`）。

请注意，使用`>> 1`将其他数字类型除以 2 可能会产生意想不到的结果。

如果您的意思是“除以二”，请输入“/2”。阅读您的代码的人（包括您，一段时间后）会感谢您没有掩盖其含义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T08:18:10.720

很可能什么都没有。将除法转换为位移将是 JVM 优化。

如果它是对位掩码进行的，那么很好，但是如果在上述情况下，这似乎是一种编写数学运算的尴尬方式，那么考虑将其作为维护的一部分进行更改（或者只是接受它作为一个坏主意但离开单独）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T08:35:24.323

正如其他人已经说过的那样，我建议您始终偏爱更具可读性的选项而不是优化，除非您

*   绝对需要优化
*   知道它的工作原理
    *   了解你的编译器
    *   了解你的 JVM
    *   实施绩效衡量
    *   考虑对这些测量值的统计评估（极值、方差、第一次与后来的测量值，...）

# python - 迭代嵌套列表并更改值

> ID：14849126
> 
> 赞同：1
> 
> 时间：2013-02-13T08:15:08.993
> 
> 标签：python, iteration, nested-lists

我试图找到这个答案，但只能在我难以拼凑的部分中找到它。

假设我有：

`aList = [["Monday", "2.03","4.03"],["Tuesday","4.03","5.03"],["Wednesday","3.2","4.3"]]`

我想遍历这个嵌套列表并将编号的字符串值更改为浮点数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T08:23:47.530

```
aList = [["Monday", "2.03","4.03"],
         ["Tuesday","4.03","5.03"],
         ["Wednesday","3.2","4.3"]]

def helper(s):
    try: return float(s)
    except ValueError: return s

aList[:] = [[helper(item) for item in subl] for subl in aList]
print aList 
```

出去：

```
[['Monday', 2.03, 4.03], ['Tuesday', 4.03, 5.03], ['Wednesday', 3.2, 4.3]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:24:06.677

```
for item in aList:
    item[1] = float(item[1])
    item[2] = float(item[2]) 
```

# dialog - 无法在 liferay 对话框中打开 portlet

> ID：14849127
> 
> 赞同：3
> 
> 时间：2013-02-13T08:15:17.447
> 
> 标签：dialog, liferay, portlet, portal

我的门户中有一个对话框，它打开了一个 portlet。当我单击链接并打开对话框时，对话框显示

> 您没有访问此 Portlet 所需的角色。

但是，如果我在页面上添加相同的 portlet，则该 portlet 在页面和对话框上都会毫无障碍地打开。我在这里想念什么？有人知道吗？

我的代码是：

```
#set ($profile_url = $portletURLFactory.create($request, "profile_WAR_profileportlet", $getterUtil.getLong($plid), "RENDER_PHASE"))
 $profile_url.setParameter("p_p_state", "exclusive")

<a href="#" id="profile" onclick="openDialog('$profile_url','preferences-dialog',500,500)"> Profile </a> 

window,
        'openDialog', //function name
        function(url, popupID, wd, ht) { // parameters to the function
            var A = AUI();

            popupDialog = new A.Dialog({

                    id: popupID, // popupId passed so that it would be easy to close it through events other than the close button
                    centered: false, // all the different parameters function you can check in the Alloy API
                    draggable: true,
                    resizable: false,
                    width: wd,
                    stack: true,
                    modal: true,
                    height: ht,
                    scrollbars: true,
                    xy: [getWidth()/2-wd/2,10]
                }
            ).plug(
                A.Plugin.IO,
                {
                    uri: url
                }
            );

            popupDialog.render();
        },
        ['aui-dialog','aui-dialog-iframe']
    ); 
```

提前感谢任何人都可以提供的任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T09:50:06.280

`liferay-portlet.xml`我认为您在`profile_WAR_profileportlet`portlet中缺少以下配置：

```
<add-default-resource>true</add-default-resource> 
```

这应该`true`为在弹出对话框中访问的 portlet 设置为，这里是这个元素的[文档](https://github.com/liferay/liferay-portal/blob/6.1.x/definitions/liferay-portlet-app_6_1_0.dtd#L697 "liferay-portlet-app_6_1_0.dtd 用于 git-hub 上的 liferay-portlet.xml")。

有关更多信息，您可以查看此[答案](https://stackoverflow.com/a/14279195/468763 "PortletURL 在弹出窗口中打开另一个 portlet")，答案的第 4 点和第 5 点将对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:27:37.800

可能是您设置了 $profile_url 但实际上在 $preferences_url 上打开了对话框？我猜想早先已经定义了preferences_url - 并且preferences（例如portlet 编辑模式）通常需要比常规渲染阶段更多的权限。通过以管理员身份访问此交叉检查..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-25T09:23:32.343

在您的 portal-ext.properties 文件中添加以下两行

```
portlet.add.default.resource.check.enabled=true
portlet.add.default.resource.check.whitelist=3,56_INSTANCE_0000,58,82,86,103,113,145,164,166,170,33,---here append the portlet id which you want to display 
```

# javascript - 如何在后面的代码中使用弹出窗口中的 JavaScript 变量？

> ID：14849130
> 
> 赞同：0
> 
> 时间：2013-02-13T08:15:42.163
> 
> 标签：javascript, asp.net

我有包含母版页的 ASP.NET Web 应用程序。母版页包含内容页。内容页面包含用户控件。用户控件包含 Telerik 网格及其上下文菜单。

我想单击网格上下文菜单中的项目并打开新的弹出模式窗口。在那个窗口中有下拉列表。我从下拉列表中选择一些选项，然后单击确定。我想从下拉列表中选择值并在我的 ASP.NET 代码中使用它以进一步进行。

我尝试使用隐藏字段来存储下拉列表中的值，但它不起作用，因为我不确定隐藏字段应该放在哪里。

这是我的代码：

打开弹出窗口：

```
function ClientItemClicked(sender, eventArgs)
{
    if (eventArgs.get_item().get_value() == "excel")
    {
        var retVal = window.showModalDialog("ExportToExcelChoice.aspx", null, "dialogWidth: 400; dialogHeight: 200; center: yes; resizable: no;");
    }
} 
```

单击“确定”关闭弹出窗口：

```
function ReturnValue() {
    var choice = document.getElementById("DropDownList1").value;
    if ((window.opener != null) && (!window.opener.closed)) {
        window.opener.document.getElementById("HiddenField1").value = choice;
    }
    window.close();
} 
```

它在这一行失败：

```
window.opener.document.getElementById("HiddenField1").value = choice; 
```

因为隐藏字段被放置在用户控件中，代码无法获取对隐藏字段的引用。

有人可以帮我让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:22:22.223

尝试这个

```
window.opener.document.getElementById('<%= HiddenField1.ClientID %>').value = choice; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:22:42.143

如果您使用的是 window.open()，您可以通过属性 window.opener 查看父窗口，这将让您在父页面和弹出窗口之间进行通信。

如果您使用的是 window.showModalDialog()，请参阅此问题的第二个答案：[window.opener alternatives](https://stackoverflow.com/questions/4885765/window-opener-alternatives)

# iphone - 在 iPhone 应用程序中使用 PayPal 实现简单支付？

> ID：14849131
> 
> 赞同：0
> 
> 时间：2013-02-13T08:15:42.443
> 
> 标签：iphone, ios, objective-c, paypal

我正在尝试在 IOS 应用程序中通过 PayPal 实现简单付款。我尝试了 PayPal API。API 提供的示例代码运行良好。我正在尝试在我的应用程序中实现它不会正确它会崩溃。有没有最简单的方法来实现这一点。

我添加了图书馆文件。并按照代码：

```
[PayPal getPayPalInst].feePayer = feePayer;
[PayPal getPayPalInst].shippingEnabled = shippingSwitch.on;
[PayPal getPayPalInst].dynamicAmountUpdateEnabled = dynamicAmountCalculationSwitch.on;

if (isAdvanced) {
    [[PayPal getPayPalInst] advancedCheckoutWithPayment:advancedPayment];
} else {
    [[PayPal getPayPalInst] checkoutWithPayment:payment];
} 
```

对于付款操作，它会出错请帮助解决此问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:04:12.873

导入整个贝宝库后使用此代码

```
#import "PayPal.h"

typedef enum PaymentStatuses {
PAYMENTSTATUS_SUCCESS,
PAYMENTSTATUS_FAILED,
PAYMENTSTATUS_CANCELED,
} PaymentStatus;

@interface Paybypal : UIViewController<PayPalPaymentDelegate>{

@private
CGFloat y;
BOOL resetScrollView;
PaymentStatus status;
 }

@property(nonatomic,retain)NSString *details;
@property(nonatomic,retain)NSDecimalNumber *totalvaluemin;

in .m file

#import "Paybypal.h"
#import "PayPalPayment.h"
#import "PayPalAdvancedPayment.h"
#import "PayPalAmounts.h"
#import "PayPalReceiverAmounts.h"
#import "PayPalAddress.h"
#import "PayPalInvoiceItem.h"
#import "SuccessViewController.h"

#define SPACING 3.

@interface Paybypal ()

@end

@implementation Paybypal

 @synthesize details,totalvaluemin;

 -(void)addLabelWithText:(NSString *)text andButtonWithType:(PayPalButtonType)type withAction:(SEL)action {
UIFont *font = [UIFont boldSystemFontOfSize:14.];
CGSize size = [text sizeWithFont:font];

UIButton *button = [[PayPal getPayPalInst] getPayButtonWithTarget:self andAction:action andButtonType:type];
CGRect frame = button.frame;
frame.origin.x = round((self.view.frame.size.width - button.frame.size.width) / 2.);
frame.origin.y = round(y + size.height);
button.frame = frame;
[self.view addSubview:button];

UILabel *label = [[[UILabel alloc] initWithFrame:CGRectMake(frame.origin.x, y, size.width, size.height)] autorelease];
label.font = font;
label.text = text;
label.backgroundColor = [UIColor clearColor];
[self.view addSubview:label];

y += size.height + frame.size.height + SPACING;
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

self.view = [[[UIView alloc] initWithFrame:[UIScreen mainScreen].applicationFrame] autorelease];
self.view.autoresizesSubviews = FALSE;
UIColor *color = [UIColor groupTableViewBackgroundColor];
if (CGColorGetPattern(color.CGColor) == NULL) {
    color = [UIColor lightGrayColor];
}
self.title = @"";

UIImageView *backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Background.JPG"]];
backgroundView.frame = self.view.bounds;
[[self view] addSubview:backgroundView];

status = PAYMENTSTATUS_CANCELED;

y = 2.;

UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
button.frame = CGRectMake((self.view.frame.size.width - 125), 222, 75, 25);

[button setTitle:@"" forState:UIControlStateNormal];
[button addTarget:self action:@selector(RetryInitialization) forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:button];

[self addLabelWithText:@"" andButtonWithType:BUTTON_294x43 withAction:@selector(simplePayment)];

 }

 - (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
}

 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
 {
return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
 }

 - (void)simplePayment {

[PayPal getPayPalInst].shippingEnabled = TRUE;

[PayPal getPayPalInst].dynamicAmountUpdateEnabled = TRUE;

[PayPal getPayPalInst].feePayer = FEEPAYER_EACHRECEIVER;

PayPalPayment *payment = [[[PayPalPayment alloc] init] autorelease];
payment.recipient = @"receiver email id";
payment.paymentCurrency = @"USD";
payment.description = [NSString stringWithFormat:@"%@",details];
payment.merchantName = @"receiver name";

payment.subTotal = totalvaluemin;

payment.invoiceData = [[[PayPalInvoiceData alloc] init] autorelease];
payment.invoiceData.totalShipping = [NSDecimalNumber decimalNumberWithString:@"0"];
payment.invoiceData.totalTax = [NSDecimalNumber decimalNumberWithString:@"0.00"];

payment.invoiceData.invoiceItems = [NSMutableArray array];
PayPalInvoiceItem *item = [[[PayPalInvoiceItem alloc] init] autorelease];
item.totalPrice = payment.subTotal;
item.name =[NSString stringWithFormat:@"%@",details];
[payment.invoiceData.invoiceItems addObject:item];

[[PayPal getPayPalInst] checkoutWithPayment:payment];
    }

     #pragma mark -
     #pragma mark PayPalPaymentDelegate methods

    -(void)RetryInitialization
{
//[PayPal initializeWithAppID:@"APP-80W284485P519543T" forEnvironment:ENV_SANDBOX];

//DEVPACKAGE
    //[PayPal initializeWithAppID:@"APPLIVEID" forEnvironment:ENV_LIVE];
//  [PayPal initializeWithAppID:@"anything" forEnvironment:ENV_NONE];
}

- (void)paymentSuccessWithKey:(NSString *)payKey andStatus:(PayPalPaymentStatus)paymentStatus {
NSString *severity = [[PayPal getPayPalInst].responseMessage objectForKey:@"severity"];
NSLog(@"severity: %@", severity);
NSString *category = [[PayPal getPayPalInst].responseMessage objectForKey:@"category"];
NSLog(@"category: %@", category);
NSString *errorId = [[PayPal getPayPalInst].responseMessage objectForKey:@"errorId"];
NSLog(@"errorId: %@", errorId);
NSString *message = [[PayPal getPayPalInst].responseMessage objectForKey:@"message"];
NSLog(@"message: %@", message);

status = PAYMENTSTATUS_SUCCESS;
}

- (void)paymentFailedWithCorrelationID:(NSString *)correlationID {

NSString *severity = [[PayPal getPayPalInst].responseMessage objectForKey:@"severity"];
NSLog(@"severity: %@", severity);
NSString *category = [[PayPal getPayPalInst].responseMessage objectForKey:@"category"];
NSLog(@"category: %@", category);
NSString *errorId = [[PayPal getPayPalInst].responseMessage objectForKey:@"errorId"];
NSLog(@"errorId: %@", errorId);
NSString *message = [[PayPal getPayPalInst].responseMessage objectForKey:@"message"];
NSLog(@"message: %@", message);

status = PAYMENTSTATUS_FAILED;
}

- (void)paymentCanceled {
status = PAYMENTSTATUS_CANCELED;
}

- (void)paymentLibraryExit {
UIAlertView *alert = nil;
switch (status) {
    case PAYMENTSTATUS_SUCCESS:
        [self.navigationController pushViewController:[[[SuccessViewController alloc] init] autorelease] animated:TRUE];
        break;
    case PAYMENTSTATUS_FAILED:
        alert = [[UIAlertView alloc] initWithTitle:@"Order failed"
                                           message:@"Your order failed. Touch \"Pay with PayPal\" to try again."
                                          delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        break;
    case PAYMENTSTATUS_CANCELED:
        alert = [[UIAlertView alloc] initWithTitle:@"Order canceled"
                                           message:@"You canceled your order. Touch \"Pay with PayPal\" to try again."
                                          delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        break;
}
[alert show];
[alert release];
}

- (PayPalAmounts *)adjustAmountsForAddress:(PayPalAddress const *)inAddress andCurrency:(NSString const *)inCurrency andAmount:(NSDecimalNumber const *)inAmount
                                andTax:(NSDecimalNumber const *)inTax andShipping:(NSDecimalNumber const *)inShipping andErrorCode:(PayPalAmountErrorCode *)outErrorCode {
//do any logic here that would adjust the amount based on the shipping address
PayPalAmounts *newAmounts = [[[PayPalAmounts alloc] init] autorelease];
newAmounts.currency = @"SGD";
newAmounts.payment_amount = (NSDecimalNumber *)inAmount;

//change tax based on the address
if ([inAddress.state isEqualToString:@"CA"]) {
    newAmounts.tax = [NSDecimalNumber decimalNumberWithString:[NSString stringWithFormat:@"%.2f",[inAmount floatValue] * .1]];
} else {
    newAmounts.tax = [NSDecimalNumber decimalNumberWithString:[NSString stringWithFormat:@"%.2f",[inAmount floatValue] * .08]];
}
newAmounts.shipping = (NSDecimalNumber *)inShipping;

//if you need to notify the library of an error condition, do one of the following
//*outErrorCode = AMOUNT_ERROR_SERVER;
//*outErrorCode = AMOUNT_CANCEL_TXN;
//*outErrorCode = AMOUNT_ERROR_OTHER;

return newAmounts;
}

 - (NSMutableArray *)adjustAmountsAdvancedForAddress:(PayPalAddress const *)inAddress andCurrency:(NSString const *)inCurrency
                             andReceiverAmounts:(NSMutableArray *)receiverAmounts andErrorCode:(PayPalAmountErrorCode *)outErrorCode {
NSMutableArray *returnArray = [NSMutableArray arrayWithCapacity:[receiverAmounts count]];
for (PayPalReceiverAmounts *amounts in receiverAmounts) {
    //leave the shipping the same, change the tax based on the state
    if ([inAddress.state isEqualToString:@"CA"]) {
        amounts.amounts.tax = [NSDecimalNumber decimalNumberWithString:[NSString stringWithFormat:@"%.2f",[amounts.amounts.payment_amount floatValue] * .1]];
    } else {
        amounts.amounts.tax = [NSDecimalNumber decimalNumberWithString:[NSString stringWithFormat:@"%.2f",[amounts.amounts.payment_amount floatValue] * .08]];
    }
    [returnArray addObject:amounts];
}

//if you need to notify the library of an error condition, do one of the following
//*outErrorCode = AMOUNT_ERROR_SERVER;
//*outErrorCode = AMOUNT_CANCEL_TXN;
//*outErrorCode = AMOUNT_ERROR_OTHER;

return returnArray;
}

#pragma mark -
#pragma mark UITextFieldDelegate methods

- (BOOL)textFieldShouldReturn:(UITextField *)textField {
[textField resignFirstResponder];
return TRUE;
}

- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
resetScrollView = FALSE;
return TRUE;
 }

 - (void)textFieldDidBeginEditing:(UITextField *)textField {
resetScrollView = TRUE;

[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:.3];
[UIView setAnimationBeginsFromCurrentState:TRUE];
self.view.frame = CGRectMake(0., -216., self.view.frame.size.width, self.view.frame.size.height);
[UIView commitAnimations];
 }

 - (void)textFieldDidEndEditing:(UITextField *)textField {
if (resetScrollView) {
    resetScrollView = FALSE;

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:.3];
    [UIView setAnimationBeginsFromCurrentState:TRUE];
    self.view.frame = CGRectMake(0., 0., self.view.frame.size.width, self.view.frame.size.height);
    [UIView commitAnimations];
}
 }

 -(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
return TRUE;
 }

 @end 
```

# mysql - 使用 iPhone 的 ASIFormDataRequest (BLOB) 将图像加载/上传到 mysql 数据库？

> ID：14849134
> 
> 赞同：0
> 
> 时间：2013-02-13T08:16:04.230
> 
> 标签：mysql, objective-c, database, image, asiformdatarequest

嗨，我需要通过 BLOB 将图像（用户的个人资料图片）存储到 mySQL DB，现在我知道更好的方法是将图像存储到服务器的文件系统并仅将它们的 url 保存到 DB，但不是我老板 :)，所以我将图像存储到数据库！我有适用于 android 的 java 脚本的 php 代码（使用 base64 转换为二进制数据），我现在需要将它用于 iPhone：这是我需要用来插入图像的 php：

```
 <?php
$base     = $_REQUEST['image'];
$filename = $_REQUEST['filename'];

    //connect to the db  
$user = ‘root’;  
$pswd = '';  
$db = ‘test’;  
$conn = mysql_connect(‘localhost’, $user, $pswd);  
mysql_select_db('test'); 
$query = "INSERT INTO `test`.`photos` (`id`, `image`) VALUES (NULL,'$base')";
mysql_query($query) or die(mysql_error());
echo "Image id is ".mysql_insert_id();
echo $base;

?> 
```

这用于获取图像：

```
<?php
$id = $_REQUEST['id'];
$username = "root";
$password = "";
$host = "localhost";
$database = "test";

mysql_connect($host, $username, $password) or die("Can not connect to database: ".mysql_error());

mysql_select_db($database) or die("Can not select the database: ".mysql_error());
//select image
$query = "SELECT * FROM  `photos` WHERE id =30 LIMIT 0 , 30";
$sql = mysql_query($query) or die(mysql_error());
while($image = mysql_fetch_array($sql)){
echo $image['image'];
}
?> 
```

我正在尝试做这样的事情来存储图像：

```
 //converting image to data end to binary data (base64)
         NSData* data = UIImagePNGRepresentation(Image);
         [Base64 initialize];
         NSString *strEncoded = [Base64 encode:data];
//prepare request
         NSString *strURL = @"My URL Here.";
         ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:
    [NSURL URLWithString:strURL]];
         [request setDelegate:self];
         [request setData:strEncoded withFileName:@"image.png" andContentType:@"image/png" forKey:@"image"];

         [request startAsynchronous]; 
```

我在 mySQL 中看到它添加了新的 BLOB，但没有我的图像 ([BLOB-0B])。我丢失图像数据的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T10:15:24.907

我找到了问题的答案：我只需要更改 :$base = $_REQUEST['image']; 到 $base = $_POST['image'];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:07:33.213

将以下内容用于 PHP/Mysql

当您从 DB（图像文件）中获取结果时，将内容存储到文件中......类似

file_put_contents('User_photo.png', $image['image'] );

如果您能够查看文件（作为图像），那么您的 PHP 代码就可以了...

选择查询必须仅适用于图像列（从照片中选择图像）

# c# - 如何获得“200 OK”的 HttpWebResponse？

> ID：14849136
> 
> 赞同：1
> 
> 时间：2013-02-13T08:16:09.660
> 
> 标签：c#, .net, wcf, http

我知道如何在[出错的情况下](https://stackoverflow.com/questions/516174)`HttpWebResponse`捕获 HTTP 响应（以 an 的形式），但是当方法返回 200 OK 时我该怎么做呢？我想统一处理所有回复。

```
// IService.cs
public async Task Ping();

// Client.cs
public static void ReactToHttpResponse(HttpWebResponse res)
{
    // Play with the http response ...
}

await service.Ping();                  // => 200 OK, on the wire
ReactToHttpResponse(/* ??? */)   // How to capture the HttpWebResponse? 
```

或者我应该捕获不同的响应类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:30:20.240

状态码属性有帮助吗？

[http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.statuscode.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.statuscode.aspx)

# jquery - .live('click',fn 与遍历一起使用时的问题

> ID：14849138
> 
> 赞同：0
> 
> 时间：2013-02-13T08:16:14.030
> 
> 标签：jquery

好的，所以我有一个通常不加载 ajax 的元素，但是单击它会通过 ajax 重新加载（以及其他内容）。不，我不能让点击元素在点击时加载非 ajax。

一切正常，除了我在 .live 点击事件上执行以下操作：

```
$('.product-sort a.type-a').removeClass('active');
$(this).addClass('active'); 
```

现在第一次它工作正常。但是然后第二次/第三次取决于我单击的元素，它不仅删除了 type-a 它还从 type-b 元素中删除了活动类...我做了`console.log($('.product-sort a.type-a'))`，在 ajax 之后，一些元素正在加载两次。是否只是简单地 ajax 加载导航开始的解决方案，所以没有 predom/postdom 元素？还是有另一种解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:20:32.923

您是否将正确的类应用于重新加载的 DOM 元素，因为如果您这样做，选择器不应该失败。您可能将`.type-a`类应用于应该是的锚，`.type-b`或者您正在应用这两个类。

还有一个建议，在1.7`live()`中已弃用并在 1.9 中删除，请改用。`jQuery`[`on()`](http://api.jquery.com/on/)

# asp.net-web-api - 代码设计。如何在业务逻辑中访问您的 api-key？

> ID：14849139
> 
> 赞同：1
> 
> 时间：2013-02-13T08:16:13.670
> 
> 标签：asp.net-web-api

这是一个代码设计问题:)

我有一个 DelegatingHandler 接受 http 请求标头并验证 API 密钥。我猜这是很常见的任务。在我的控制器中，我调用我的业务逻辑并传递所有与业务相关的信息。但是，现在我面临的挑战是根据某些 api 键来改变我的业务逻辑（单独的程序集）中的行为。

**我想到了各种可能的解决方案......**

1.  更改业务逻辑方法签名以请求 API 密钥。

    public void SomeUseCase(Entity1 e1, Entity2 e2, string apiKey);

2.  使用 HttpContext.Current 访问当前请求上下文。但是，我在某处读到使用 HttpContext 将我的托管选项限制为 IIS。有没有更适合的选择？

    var request = HttpContext.Current.Request; // 接下来提取头信息

3.  使用会话（真的不想走那条路......）

**你对这个话题有什么看法？**

我会选择#1，尽管我不喜欢在业务逻辑方法中混入环境的东西。但是根据您的观点，您可能会认为 api-key 实际上与逻辑相关。

* * *

**更新 #1：** 我使用 delegatingHandler 来验证 apiKey，一旦验证，我将其添加到请求的属性集合中。

有问题的部分是“api-key”或 RegisteredIdentifier 如何传递到业务逻辑层。现在我将对象（例如 IRegisteredIdentifier）作为参数传递给业务逻辑类的构造函数。我知道没有更优雅的方法来解决这个问题（？）。我考虑过更改方法签名，但不确定是否是接口污染。有些方法需要使用 api-key，大多数不需要。经验告诉我，这个数字更有可能增长而不是下降 :) 所以在我的 bl 类中保留对它的引用似乎是一个不错的选择。

感谢您的回答 - 我认为它们都是我解决方案的一部分。我是 StackOverflow 的新手.. 但据我所知 - 我还不能评价答案。请放心，我仍然很感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:05:56.967

我会建议两种不同的选择。

*   将该值提升为自定义 HTTP 标头（例如 mycompany-api-key: XXXX 之类的东西）。这使您的委托处理程序更像一个标准的 HTTP 中介。如果您将请求移交给某个辅助内部服务器，这将非常方便。

*   将 api-key 放入 request.Properties 字典中。Properties 字典的想法是提供一个放置有关请求的自定义元信息的地方。

HTTP 努力确保身份验证/授权与实际请求是正交的，这就是为什么我会尝试将其排除在操作签名之外的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:17:19.603

业务逻辑层依赖于 API 密钥。所以我建议：

```
interface IApiKeyProvider
{
    string ApiGet { get; }
} 
```

..然后让您的 BLL 要求向其提供实现该接口的对象（在构造函数、设置甚至每个需要它的方法中）。

因为将来它可能不是一个 API 密钥。关键是这表明 BLL 依赖于某物，并为某物定义了合同。

真实世界的例子：

然后，在您的 DI 容器（Ninject 等）中，将您自己的 ConfigFileApiKeyProvider（或其他）实现绑定到该接口，在具有 API 密钥的“位置”（层）中。因此调用 BLL 的应用程序指定/配置 API 密钥的指定方式。

**编辑**：我误解了这部分是“如何通过 HTTP 做的”问题，而不是代码架构/代码设计问题。所以：

*   HTTP标头是传输方面的方式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T08:26:29.410

我会选择选项 1。但是您可以在业务逻辑中引入实体 RegisteredIdentifier（Jim Arlow 和 Ila Neustadt 的企业模式和 MDA）。api-key 可以转换为 RegisteredIdentifier。

```
RegisteredIdentifier id = new RegisteredIdentitief(api-key);

public void SomeUseCase(Entity1 e1, Entity2 e2, RegisteredIdentifier id); 
```

# spring - 如何从 MemCache 服务器中删除/刷新特定的键集？

> ID：14849143
> 
> 赞同：0
> 
> 时间：2013-02-13T08:16:26.987
> 
> 标签：spring, hibernate, caching, memcached, spymemcached

我在 MemCached 服务器中存储的密钥很少。喜欢...

```
KEY-2312sdasd78
KEY-5lk65klk343
KEY-klk34k3lkl3
TEST-34k3l4k3l4
TEST-kl3k2lk3l2 
```

现在，我想从 MemCached 服务器中删除以“KEY”开头的密钥。

我试图找到谷歌，但在 MemCached 中没有基于 RegEX 的支持。

有没有人遇到过这种问题，解决这个问题的最佳方法是什么。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T13:56:34.697

可能重复：[内存缓存键上的正则表达式？](https://stackoverflow.com/questions/2497159/regex-on-memcached-key)

另请参阅[http://code.google.com/p/memcached-tag/](http://code.google.com/p/memcached-tag/)

我认为像 Redis 这样的东西会更容易，因为它：

*   [支持交易](http://redis.io/topics/transactions)
*   支持列表等原子数据结构

因此，在 Redis 中，当您添加键值时，您会将键添加到同一事务中的某个巨大的全局列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:20:25.303

不知道密钥是没有办法做到这一点的。

你可以做这样的事情的唯一方法是在每组键前面加上一些常见的东西，例如`KEY-KEYSET1-`. 然后，您可以通过在代码中内部碰撞`1`来使它们全部无效`2`，这意味着现有值将不会被访问并最终过期。

# android - 更改分隔线颜色 Android DatePicker 对话框

> ID：14849147
> 
> 赞同：2
> 
> 时间：2013-02-13T08:16:41.083
> 
> 标签：android, colors, datepicker, divider

我要更改 DatePicker 对话框的分隔线颜色。

我创建了样式：

```
<style name="dialog_custom" parent="@android:style/Widget.DatePicker">
        <item name="android:divider">@drawable/dialog_divider</item>
    </style> 
```

[并像这样](https://dl.dropbox.com/u/30331820/dialog_divider.png)创建可绘制对象

结果是[这样的](https://dl.dropbox.com/u/30331820/device-2013-02-13-090847.png)

分隔线没有改变颜色，对话框采用内容大小..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-17T12:14:15.493

这是我在 NumberPickers、TimePickers、DatePickers 和 TimePickerDialog 中更改分隔线颜色的解决方案。对于 DatePickerDialog，您可以调用 DatePickerDialog.getDatePicker()

```
public class NumberPickerStylingUtils {

private static final Drawable PICKER_DIVIDER_DRAWABLE = //Place your drawable here

private NumberPickerStylingUtils() {}

public static void applyStyling(TimePickerDialog timePickerDialog) {
    try {
        Field field = TimePickerDialog.class.getDeclaredField("mTimePicker");
        field.setAccessible(true);
        applyStyling((TimePicker) field.get(timePickerDialog));
    } catch (NoSuchFieldException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    }
}

public static void applyStyling(TimePicker timePicker) {
    try {
        Field fields[] = TimePicker.class.getDeclaredFields();
        for (Field field : fields) {
            if (field.getType().equals(NumberPicker.class)) {
                field.setAccessible(true);
                applyStyling((NumberPicker) field.get(timePicker));
            }
        }
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    }
}

public static void applyStyling(DatePicker datePicker) {
    try {
        Field fields[] = DatePicker.class.getDeclaredFields();
        for (Field field : fields) {
            if (field.getType().equals(NumberPicker.class)) {
                field.setAccessible(true);
                applyStyling((NumberPicker) field.get(datePicker));
            }
        }
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    }
}

public static void applyStyling(NumberPicker numberPicker) {
    try {
        Field field = NumberPicker.class.getDeclaredField("mSelectionDivider");
        field.setAccessible(true);
        field.set(numberPicker, PICKER_DIVIDER_DRAWABLE));
    } catch (NoSuchFieldException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    }
} 
```

}

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T08:25:24.547

您可以使用主题来执行此操作。检查此[问题](https://stackoverflow.com/questions/9688724/change-basic-theme-color-of-android-application)的已接受答案。我认为这会对你有所帮助。

**更新**

展开`res`应用程序中的文件夹并展开`values`文件夹。然后在文件夹`themes.xml`上创建文件`values`。然后用下面的代码替换`themes.xml`文件中的所有代码。

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">

    <style name="MYTheme" parent="@android:style/Theme">

       <item name="android:divider">@drawable/dialog_divider</item>

    </style>

</resources> 
```

然后打开你的`AndroidManifest.xml`文件。并找到 `android:theme`并复制`android:theme="@style/MYTheme"`

# android - 如何将 ListView 膨胀为 LinearLayout

> ID：14849152
> 
> 赞同：1
> 
> 时间：2013-02-13T08:17:21.680
> 
> 标签：android, listview, android-linearlayout

我`ListView`通过使用`ArrayAdapter`包含项目列表的位置创建了一个。我想将其添加`ListView`到另一个`LinearLayout`地方，如果有人单击它将显示项目列表。能达到吗。。请任何人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:37:26.967

所以我猜你只需要从你的 Iten 文本创建一个 TextView ，然后将它添加到你的 LinearLayout ：

```
public void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    // String define above
    strText = l.getItemAtPosition(position).toString();

    LinearLayout lr = (LinearLayout)findViewById(R.id.yourLinearlayout);
    //Create a textview 
    TextView tv = new TextView(getActivity());
    //Set the text of the TextView with the Item Text
    tv.setText(strText);
    //Add it to your ListView
    lr.addView(Listview);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:01:42.477

您必须将 OnClickListener 添加到您的 LinearLayout 中，然后在 Listener 中添加：

```
LinearLayout lr = (LinearLayout)findViewById(R.id.yourLinearlayout);
lr.addView(Listview); 
```

# javascript - 如何在我的 HTML 网页中包含我的 Javascript 文件和/或 jQuery

> ID：14849154
> 
> 赞同：2
> 
> 时间：2013-02-13T08:17:29.147
> 
> 标签：javascript, ruby-on-rails, alert

我有：

1.  `controller/reports_controller.rb`

2.  `views/reports/index.html.erb`

3.  `assets/reports.js`

我有一张图片`index.html.erb`：

```
<div class="main_mark">
   <img src="/assets/welcome_main.png" alt="main" class="main_mark_image" />
</div> 
```

当用户按下图像时，我想在屏幕上打印一条消息（警报消息）。所以我想在`reports.js`打印消息中编写一个函数。

`reports.js`：

```
$(document).ready(function() {
    $(".main_mark_image").click(function () {
        alert("alon");
    });
}); 
```

但我认为我必须在 java 脚本和 html 之间建立联系。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:29:19.173

使用外部脚本时，您需要告诉您的 HTML 文件：

```
<script src="assets/reports.js"></script> 
```

以上假设您的“资产”文件夹与您的索引位于同一文件夹中。您还需要包含 jQuery 库。它可供下载，或者您可以使用 Google 的：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

或者，对于 jQuery UI：

```
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/jquery-ui.min.js"></script> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:22:23.093

尝试：

```
<img src="/assets/welcome_main.png" onclick="alert('alon');" alt="main" class="main_mark_image" /> 
```

# wordpress - 我的 wordpress 插件在本地主机上运行良好，但在我发布帖子时在远程服务器上显示白屏

> ID：14849156
> 
> 赞同：-1
> 
> 时间：2013-02-13T08:17:35.210
> 
> 标签：wordpress

这是我的插件代码，激活和停用挂钩在服务器上工作正常，但是当我添加 HTML 部分时，它会在发布帖子后显示白屏。

```
register_activation_hook(__FILE__,'hs_install');
register_deactivation_hook(__FILE__,'hs_uninstall');
//<--------- Installation ----------->
function hs_install(){
global $wpdb;
$table_name1=$wpdb->prefix.'hs_image_tag';
 //Table structure for table `image_tag`
    $wpdb->query("CREATE TABLE IF NOT EXISTS $table_name1 (
  id int(11) NOT NULL auto_increment,
  pic_id int(11) NOT NULL,
  name varchar(100) NOT NULL,
  pic_x int(11) NOT NULL,
  pic_y int(11) NOT NULL,
  PRIMARY KEY  (`id`),
  KEY pic_id (pic_id))");

$table_name2=$wpdb->prefix.'hs_categories';
//Table structure for table `wp_hs_categories` `$table_name2`
$query = $wpdb->query("CREATE TABLE IF NOT EXISTS $table_name2 (
 id int(11) NOT NULL AUTO_INCREMENT,
  cat_name varchar(30) NOT NULL,
  PRIMARY KEY (id))");

//Dumping data for table `wp_hs_categories`
if($query)
$wpdb->query("INSERT INTO $table_name2 (id,cat_name) VALUES
(1, 'Fruits'),
(2, 'Cars'),
(3, 'Electronics'),
(4, 'Laptops'),
(5, 'Nature'),
(6, 'Sports'),
(7, 'Cats')");

//--------------------------------------------------------

//Table structure for table `wp_hs_image_details`

$table_name3=$wpdb->prefix.'hs_image_details';
$query = $wpdb->query("CREATE TABLE IF NOT EXISTS $table_name3 (
  id int(11) NOT NULL AUTO_INCREMENT,
  title varchar(30) NOT NULL,
  image_name varchar(30) NOT NULL,
  category varchar(30) NOT NULL,
  last_save varchar(20) NOT NULL,
  path varchar(200) NOT NULL,
  PRIMARY KEY (id)
)");

//Dumping data for table `wp_hs_image_details`

if($query)
$query = $wpdb->query("INSERT INTO $table_name3 
(id,title,image_name,category,last_save,path) VALUES
(1, 'Title 1', 'm1.jpg', 'Electronics', '13-10-2012', 'uploads/m1.jpg'),
(2, 'Title 2', 'm2.jpg', 'Electronics', '13-10-2012', 'uploads/m2.jpg'),
(3, 'Title 3', 'm3.jpg', 'Electronics', '13-10-2012', 'uploads/m3.jpg'),
(4, 'Title 4', 'm4.jpg', 'Electronics', '13-10-2012', 'uploads/m4.jpg'),
(5, 'Title 5', 'car1.jpg', 'Cars', '13-10-2012', 'uploads/car1.jpg'),
(6, 'Title 6', 'car2.jpg', 'Cars', '13-10-2012', 'uploads/car2.jpg'),
(7, 'Title 7', 'car3.jpg', 'Cars', '13-10-2012', 'uploads/car3.jpg'),
(8, 'Title 8', 'car4.jpg', 'Cars', '13-10-2012', 'uploads/car4.jpg'),
(9, 'Title 9', 'cat1.jpg', 'Cats', '13-10-2012', 'uploads/cat1.jpg'),
(10, 'Title 10', 'cat2.jpg', 'Cats', '13-10-2012', 'uploads/cat2.jpg'),
(11, 'Title 11', 'cat3.jpg', 'Cats', '13-10-2012', 'uploads/cat3.jpg'),
(12, 'Title 12', 'cat4.jpg', 'Cats', '13-10-2012', 'uploads/cat4.jpg')");

//--------------------------------------------------------

//Table structure for table `wp_hs_template_images`
$table_name4=$wpdb->prefix.'hs_template_images';

$query = $wpdb->query("CREATE TABLE IF NOT EXISTS $table_name4 (
  id int(11) NOT NULL AUTO_INCREMENT,
  image_name varchar(30) NOT NULL,
  category varchar(30) NOT NULL,
  path varchar(200) NOT NULL,
  PRIMARY KEY (id)
)");

//Dumping data for table `wp_hs_template_images`

if($query)
$wpdb->query("INSERT INTO $table_name4 (id,image_name,category,path) VALUES
(1, 'Laptop 1', 'Laptops', 'template_images/l1.jpg'),
(2, 'Laptop 2', 'Laptops', 'template_images/l2.jpg'),
(3, 'Laptop 3', 'Laptops', 'template_images/l3.jpg'),
(4, 'Laptop 4', 'Laptops', 'template_images/l4.jpg'),
(5, 'Laptop 5', 'Laptops', 'template_images/l5.jpg'),
(6, 'Car 1', 'Cars', 'template_images/c1.jpg'),
(7, 'Car 2', 'Cars', 'template_images/c2.jpg'),
(8, 'Car 3', 'Cars', 'template_images/c3.jpg'),
(9, 'Car 4', 'Cars', 'template_images/c4.jpg'),
(10, 'Car 5', 'Cars', 'template_images/c5.jpg'),
(11, 'Device 1', 'Electronics', 'template_images/e1.jpg'),
(12, 'Device 2', 'Electronics', 'template_images/e2.jpg'),
(13, 'Device 3', 'Electronics', 'template_images/e3.jpg'),
(14, 'Device 4', 'Electronics', 'template_images/e4.jpg'),
(15, 'Device 5', 'Electronics', 'template_images/e5.jpg')");
}
//Table structure for table `wp_hs_categories`
//<--------- Uninstallation ----------->
function hs_uninstall(){
    global $wpdb;
    $table_name1=$wpdb->prefix.'hs_image_tag';
    $table_name2=$wpdb->prefix.'hs_categories';
    $table_name3=$wpdb->prefix.'hs_image_details';
    $table_name4=$wpdb->prefix.'hs_template_images';
    $wpdb->query("DROP TABLE IF EXISTS    
$table_name2,$table_name3,$table_name4,$table_name1");
}
function addYouTube($atts, $content = null) {
        extract(shortcode_atts(array( "id" => '' ), $atts));
        return '<p style="text-align:center"><a href="http://www.youtube.com   
/v/'.$id.'"><img src="http://img.youtube.com/vi/'.$id.'/0.jpg" width="400"   
height="300" class="aligncenter" /><span>Watch the video</span></a></p>';
}
    add_shortcode('youtube', 'addYouTube');

    function add_youtube_button() {
   // Don't bother doing this stuff if the current user lacks permissions
   if ( ! current_user_can('edit_posts') && ! current_user_can('edit_pages') )
     return;

  // Add only in Rich Editor mode
   if ( get_user_option('rich_editing') == 'true') {
     add_filter("mce_external_plugins", "add_youtube_tinymce_plugin");
     add_filter('mce_buttons', 'register_youtube_button');
     ?>
//the problem is with this section,, i tried placing this section in init_admin() hook
// and related hooks but out of luck.   
<script type="text/javascript" src="<?php echo plugins_url();      
    ?>/brettsyoutube/js/jquery-1.9.0.min.js"></script>
  <script type="text/javascript" src="../wp-content/plugins/brettsyoutube 
/multizoom.js" />
</script>

<!-- Add fancyBox main JS and CSS files -->

<style type="text/css">
#fancy_close{
background: url("<?php echo plugins_url(); ?>/brettsyoutube/images
/fancy_buttons.png")     
repeat scroll 0 0 transparent;
float: right;
height: 34px;
 position: relative;
top: 0;
width: 37px;
z-index: 9800;
display:block;  }   
</style>

     <div id="fancydiv" style="background-color:#FFF;
    display: none;
    height: 540px;
    left: 172px;
    position: absolute;
    top: 298px;
    width: 840px;
    z-index: 999;">
    <span id="fancy_close"></span>

     <div id="myfancybox" style="margin:0; background-color:#FFF;">
<?php global $d_path; 
     $d_path= '../wp-content/plugins/brettsyoutube/';
     include('../wp-content/plugins/brettsyoutube/main.php');?>
     </div>
     <div id="nxt" style="color: red;
    display: none;
    font-size: 38px;
    font-weight: bold;
    height: 100px;
    left: 309px;
    position: absolute;
    top: 489px;
    width: 238px;">Add to post</div>
   </div>
<?php
   }
}

function register_youtube_button($buttons) {
   array_push($buttons, "|", "youryoutube");
   return $buttons;
}

// Load the TinyMCE plugin : editor_plugin.js (wp2.5)
function add_youtube_tinymce_plugin($plugin_array) {
   $plugin_array['youryoutube'] = plugins_url().'/brettsyoutube/editor_plugin.js';
   return $plugin_array;
}

function my_refresh_mce($ver) {
  $ver += 3;
  return $ver;
}

add_filter( 'tiny_mce_version', 'my_refresh_mce');
add_action('init', 'add_youtube_button');
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:28:03.610

在您的文件中设置[WP_DEBUG](http://codex.wordpress.org/WP_DEBUG)，您将能够看到导致该白屏的错误。`true``wp-config.php`

# ios - 如何在 soundcloud API 中过滤聚光灯轨道

> ID：14849161
> 
> 赞同：2
> 
> 时间：2013-02-13T08:18:08.847
> 
> 标签：ios, soundcloud

我目前正在使用 Soundcloud API 开发一个 iOS 应用程序，到目前为止它运行良好。然而，我无法弄清楚的是如何构造一个 URL，以便仅从某个用户那里获取固定为聚光灯轨道的轨道。

例如，假设我正在使用以下 URL： [http ://api.soundcloud.com/users/username/tracks.json?client_id=mySecretId](http://api.soundcloud.com/users/username/tracks.json?client_id=mySecretId)

我已经仔细阅读了developers.soundcloud.com/docs/api/ 上的API 文档，但感觉好像缺少了一个子资源。

我知道我可以使用 created_at 过滤器来显示最近添加的曲目，但如果我正确理解平台，聚光灯轨道不一定必须是最近添加的曲目之一？

我将非常感谢有关此主题的反馈！

干杯

/安德斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:16:23.963

Spotlight 无法通过公共 API 使用，抱歉。

# java - 在 Java 中实现自动完成 - 我做得对吗？

> ID：14849176
> 
> 赞同：11
> 
> 时间：2013-02-13T08:19:19.833
> 
> 标签：java, swing, autocomplete, jframe, jwindow

## 算法

1.  开始
2.  输入城市名称 - 部分或完整
3.  如果用户点击 enter ，则从`JTextField`
4.  开始蛮力搜索。
5.  如果找到匹配项，将它们放入 a`Vector`并放入 a`JList`
6.  如果未找到匹配项，请在其中添加`String`“未找到匹配项”`Vector`
7.  向用户显示`JWindow`包含结果
8.  停止

## 代码：

```
package test;
import javax.swing.*;

import java.awt.Dimension;
import java.awt.event.*;
import java.util.Vector;

public class AutoCompleteTest extends JFrame{
    JTextField city = new JTextField(10);
    String enteredName = null;
    String[] cities = {"new jersey","new hampshire",
            "sussex","essex","london","delhi","new york"};
    JList list = new JList();
    JScrollPane pane = new JScrollPane();
    ResultWindow r = new ResultWindow();
//------------------------------------------------------------------------------
    public static void main(String[] args) {
        new AutoCompleteTest();
    }
//------------------------------------------------------------------------------
    public AutoCompleteTest(){
        setLayout(new java.awt.FlowLayout());
        setVisible(true);
        add(city);
//      add(pane);
        pack();
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        city.addKeyListener(new TextHandler());
    }
//------------------------------------------------------------------------------
    public void initiateSearch(String lookFor){
        Vector<String> matches = new Vector<>();
        lookFor = lookFor.toLowerCase();
        for(String each : cities){
            if(each.contains(lookFor)){
                matches.add(each);
                System.out.println("Match: " + each);
            }
        }
        this.repaint();

        if(matches.size()!=0){
            list.setListData(matches);
            r.searchResult = list;
            r.pane = pane;
            r.initiateDisplay();
        }else{
            matches.add("No Match Found");
            list.setListData(matches);
            r.searchResult = list;
            r.pane = pane;
            r.initiateDisplay();
        }

    }
//------------------------------------------------------------------------------
    public class ResultWindow extends JWindow{
        public JScrollPane pane;
        public JList searchResult;
//------------------------------------------------------------------------------
        public ResultWindow(){

        }
//------------------------------------------------------------------------------
        public void initiateDisplay(){
            pane.setViewportView(searchResult);
            add(pane);
            pack();
            this.setLocation(AutoCompleteTest.this.getX() + 2, 
                    AutoCompleteTest.this.getY()+
                    AutoCompleteTest.this.getHeight());

//          this.setPreferredSize(city.getPreferredSize());
            this.setVisible(true);
        }
    }
//------------------------------------------------------------------------------

    class TextHandler implements KeyListener{
        @Override
        public void keyTyped(KeyEvent e){

        }

        @Override
        public void keyPressed(KeyEvent e){
            if(r.isVisible()){
                r.setVisible(false);
            }
            if(e.getKeyChar() == '\n'){
                initiateSearch(city.getText());
            }
        }

        @Override
        public void keyReleased(KeyEvent e){

        }
    }
//------------------------------------------------------------------------------
} 
```

## 输出

![在此处输入图像描述](../Images/7fe46051378ffc912170d0a736631fd5.png)

## 问题

`JWindow`显示结果的大小（`JList`在 a 中`JScrollPane`）根据结果而变化 - 如果城市名称小，`JWindow`则小，如果城市名称大，`JWindow`则大。

我已经尝试了所有可能的组合。我尝试使用`setPreferredDimension()`, the `JWindow`，`JList`但`JScrollPane`问题不会解决。无论如何
，我都希望它与装饰的大小相匹配`JFrame`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T08:31:04.230

*   `JList`或`JComboBox`不返回正确`PreferredSize`，必须设置此值，将[JList.setPrototypeCellValue()](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html#setPrototypeCellValue%28E%29)与`pack()`for `JWindow`（必须在任何更改后打包）和或与[JList.setVisibleRowCount()](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html#setVisibleRowCount%28int%29)一起使用，然后 value 返回`getPreferredScrollableViewportSize()`for `JList`in`JScrollPane`

*   不要使用[`KeyListener`](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)，使用[`DocumentListener`](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)（可以从系统剪贴板插入字符）[`JTextComponents`](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html)

*   不要重新发明轮子，使用[AutoComplete JComboBox / JTextField](https://stackoverflow.com/a/7255918/714968)，您可以将匹配结果重定向/返回到弹出窗口[`JWindow`/未装饰`JDialog`（弹出回收的最佳解决方法）](http://www.toedter.com/en/jcalendar/)

编辑

> 无论如何，基本上我将不得不手动创建所有要支持的城市的列表，对吗？？bx @小孩子

*   这个想法可能很容易，你可以[`JTable`把`JWindow`](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

*   与一个`Column`，

*   没有`JTableHeader`

*   在那里添加[RowSorter](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)（参见教程中的代码示例）

*   然后每个步骤都完成了:-)，那里不需要其他任何东西（在没有返回匹配项的情况下，可能会有额外`Background`的好处，添加弹出窗口（一定要测试））`JTextField``RowFilter``setVisible``DocumentListener``!isVisible`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:32:48.430

`JFrame`每次启动搜索时都需要使用宽度，并使用它来计算列表的宽度。

只需像这样更改initialSearch() 函数：

```
public void initiateSearch(String lookFor){

    //add the following two statements to set the width of the list.
    int newWidth = AutoCompleteTest.this.getSize().width;        
    list.setPreferredSize(new Dimension(newWidth, list.getPreferredSize().height));

        Vector<String> matches = new Vector<String>();
        lookFor = lookFor.toLowerCase();
        for(String each : cities){
            if(each.contains(lookFor)){
                matches.add(each);
                System.out.println("Match: " + each);
            }
        }
        this.repaint();

        if(matches.size()!=0){
            list.setListData(matches);
            r.searchResult = list;
            r.pane = pane;
            r.initiateDisplay();
        }else{
            matches.add("No Match Found");
            list.setListData(matches);
            r.searchResult = list;
            r.pane = pane;
            r.initiateDisplay();
        }

    } 
```

这是一个示例输出：

![小尺寸](../Images/76b888734ec93bb9093d80492a7f816b.png)

和

![在此处输入图像描述](../Images/0480905a8659c6a4c37df5d7d4079c16.png)

PS：为了更好的美学尝试使用一些布局使文本字段填满整个宽度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T08:36:14.363

您应该使用[JComboBox](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)，对于自动完成功能，请阅读[这篇文章](http://www.orbital-computer.de/JComboBox/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T08:42:37.700

一种解决方案是将 initialDisplay() 更改为此：

```
public void initiateDisplay()
    {
        this.pane.setViewportView(this.searchResult);
        this.add(this.pane);
        this.pack();
        this.setLocation(AutoCompleteTest.this.getX() + 2, AutoCompleteTest.this.getY()
                + AutoCompleteTest.this.getHeight());

        int padding = 5;
        int height = this.searchResult.getModel().getSize()
                * AutoCompleteTest.this.city.getSize().height;
        int windowWidth = AutoCompleteTest.this.getSize().width;

        this.setSize(windowWidth, height);
        this.setVisible(true);
    } 
```

# javascript - 键入时使用 Javascript 更新 HTML 表单

> ID：14849178
> 
> 赞同：3
> 
> 时间：2013-02-13T08:19:25.803
> 
> 标签：javascript, html

我可以使用 Javascript 更新 HTML 表单，当用户在表单上的某些内容上或当他在“提交”按钮上触发`onclick`事件时按 Enter 时，但我希望在用户输入内容时更新表单。

我知道我可以做到`Infinity loop`，但这不是一个好主意；或者我可以在间隔后检查，但这会导致不必要的检查，这是我不想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:23:47.113

将`keyUp`事件处理程序与表单中包含的输入字段一起使用。

参考：[Javascript](http://www.w3schools.com/jsref/event_onkeyup.asp) , [jQuery](http://api.jquery.com/keyup/)

[更新]

您在函数定义中错过了圆括号，请检查更新的[小提琴](http://jsfiddle.net/sohelkhalifa/tQcWf/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-31T16:14:25.577

我有同样的问题，根据[这篇文章](http://www.javascript-coder.com/javascript-form/javascript-form-value.phtml)和[sohel 的回答](https://stackoverflow.com/a/14849240/918015)，我设法让它工作。现在我想以一个简短的工作示例的形式分享我的解决方案：如果您在第一个字段中输入您的姓名，它将在第二个字段中建议一个电子邮件地址。

```
<!DOCTYPE html>
<html>
<head>
<script> 
function nameModify(emailElement, nameElement) {

        emailElement.value = nameElement.value + '@stackoverflow.com';
}
</script>
</head>
<body>
<form name="aform" action="#"> 
        <input type="text" name="name" onkeyup="nameModify(this.form.elements['email'], this);" >
        <input type="text" name="email" >
</form>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T08:26:18.130

您正在寻找[自动完成](http://jqueryui.com/autocomplete/)

# excel - 如何在任务管理器中识别用于启动 excel 进程的应用程序

> ID：14849179
> 
> 赞同：1
> 
> 时间：2013-02-13T08:19:26.740
> 
> 标签：excel, vb6

我的 vb 应用程序用于生成 excel 报告。在上次运行期间，它在两者之间失败，但 excel 进程仍在服务器的后台运行。

问题是还有一些其他应用程序使用 excel 过程来生成报告。我需要终止仍在后台运行的特定 excel 实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:55:18.973

我之前问过这个问题，坏消息是，没有直接的方法可以做到这一点。可以做什么：当您在应用程序中启动 excel 时，存储 PID（如果可用，我不确定）和/或创建文档的路径。如果出现错误，通过PID终止特定的excel进程。或者，如果这是不可能的：遍历所有打开的 excel 实例并找到打开路径的实例 - 而不是杀死该实例。后一种方法在多用户环境中存在问题，因为 Excel 在被多个应用程序使用时反应不佳。

最好的方法是完全摆脱服务器上的 excel 并转移到独立的 excel 编写库，如 EPPLUS 或 Aspose.Cells 或其他替代方案。但我不知道，这些库是否仍可用于 VB6。请注意，Microsoft 建议不要在服务器上使用 Office

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:24:31.437

我不了解任务管理器，但 Sysinternals Process Explorer 会为您提供该信息。它在显示父/子进程层次结构的树视图中列出所有进程。[http://technet.microsoft.com/en-gb/sysinternals/bb896653.aspx](http://technet.microsoft.com/en-gb/sysinternals/bb896653.aspx)

# android - 单击listitem时如何使用listitem设置textview的文本

> ID：14849182
> 
> 赞同：1
> 
> 时间：2013-02-13T08:19:37.897
> 
> 标签：android, listview, settext

单击列表项时，我想用 listitem 设置 textview 的文本。我有物品清单。当我单击一个项目时，它会显示 html 页面。我有显示 HTML 页面（使用 WebView）、标题（TextView）和后退按钮（Imagebutton）的布局。我能够在 webview 中显示 html 页面而没有任何问题。问题出在标题上。当我单击列表的列表项时。我希望将相同的项目设置为文本视图中的标题。请给我建议。我可以为列表项干杯，但我不需要它。我想在 textview 的文本中设置。请参阅下面的代码。

主题.java

```
public class Topics extends ListActivity {

@Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

          // storing string resources into Array
          String[] topic_sections =   getResources().getStringArray(R.array.topic_sections);

    // Binding resources Array to ListAdapter
         this.setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, R.id.label, topic_sections));
}     

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    change(position);
    }
void change(int position){
   switch(position){  
            case 0 :{
        Intent intent = new Intent(getApplicationContext(), TopicsDisplay.class);
        intent.setData(Uri.parse("file:///android_asset/home.html"));
        startActivity(intent);
            }
           break;

    case 1 :{
        Intent intent = new Intent(getApplicationContext(), TopicsDisplay.class);
        intent.setData(Uri.parse("file:///android_asset/program.html"));
        startActivity(intent);}
           break;

       } } } 
```

主题显示.java

```
public class TopicsDisplay extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
this.setContentView(R.layout.topic_display);

WebView webview1 = (WebView) findViewById(R.id.webView1);
webview1.loadUrl(getIntent().getDataString());
webview1.getSettings().setBuiltInZoomControls(true);
webview1.setInitialScale(1);
webview1.setPadding(0, 0, 0, 0);

 }

 public void finishActivity(View v){
 finish();
  }

  } 
```

list_item.xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <!--  Single List Item Design -->
 <TextView xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/label"
      android:textColor="#ea9999"
      android:background="#000000"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:padding="10dp"
      android:textSize="20sp"
      android:textStyle="bold" 
      android:focusable="false"  
      android:clickable="false">
 </TextView> 
```

topic_display.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical" 
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@color/myBackground">

 <RelativeLayout 

    android:orientation="horizontal" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <ImageButton
    android:id="@+id/imageButton1"
    android:layout_width="42dp"
    android:layout_height="42dp"
    android:onClick="finishActivity"
    android:contentDescription="@string/back"
    android:src="@drawable/back_button" />

    <TextView 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="45dp" 
    android:textStyle="bold"
    android:textColor="#000000"
    android:gravity="center_vertical"
    android:layout_alignParentRight="true"
    android:layout_centerVertical="true"
    android:paddingLeft="10dp"
    android:id="@+id/header"

    />

 </RelativeLayout>

 <WebView 

    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:id="@+id/webView1"/>

 </LinearLayout> 
```

从列表视图中获取项目后，如何在 topic_display 布局中的 textview 文本中设置该列表项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:47:27.837

我的建议是将您想要显示的标题放在 Intent 的附加内容中。这意味着，当你打电话时

```
 Intent intent = new Intent(getApplicationContext(), TopicsDisplay.class);
    intent.setData(Uri.parse("file:///android_asset/home.html"));
    startActivity(intent); 
```

您应该在调用 startActivity() 方法之前将标题放在 Intent 的额外内容中（在这两种情况下，您都在调用 TopicsDisplay 活动）

```
 Intent intent = new Intent(getApplicationContext(), TopicsDisplay.class);
    intent.setData(Uri.parse("file:///android_asset/home.html"));
    intent.putExtra("title", topic_sections[position]);
    startActivity(intent); 
```

然后，在 TopicsDisplay 活动中，您可以通过调用

```
getIntent().getStringExtra("title") 
```

最后，您应该在 TopicsDisplay.onCreate 方法中得到类似的结果：

```
TextView titleTV = (TextView) findViewById(R.id.header)
titleTV.setText(getIntent().getStringExtra("title")); 
```

希望这可以帮助！

# wcf - WCF：relativeAddress、baseAddress 和绑定

> ID：14849183
> 
> 赞同：3
> 
> 时间：2013-02-13T08:19:38.233
> 
> 标签：wcf, web-config, wcf-binding

我是 WCF 的新手，我从一个简单的无文件应用程序部分（web.config）开始我的体验，您可以在下面看到：

```
 <serviceHostingEnvironment multipleSiteBindingsEnabled="true">
        <serviceActivations>
            <add
                factory="System.ServiceModel.Activation.ServiceHostFactory"
                relativeAddress="./RelativeAddress.svc"
                service="WCF_Transactions.MyService1"/>
        </serviceActivations>
    </serviceHostingEnvironment> 
```

现在我可以访问服务了

```
http://localhost:18148/RelativeAddress.svc 
```

然后我添加下一行：

```
 <services>
        <service name="WCF_Transactions.MyService1" behaviorConfiguration="MyBehavior1">
            <host>
                <baseAddresses>
                    <add baseAddress="http://localhost:18148/" />
                </baseAddresses>
            </host>
            <endpoint  address="/RelativeAddressX.svc" binding="basicHttpBinding" contract="WCF_Transactions.IService1"></endpoint>
        </service>
    </services>

    <behaviors>
        <serviceBehaviors>
            <behavior name="MyBehavior1">
                <serviceMetadata httpGetEnabled="true" />
            </behavior>
        </serviceBehaviors>
    </behaviors> 
```

所以我希望我的服务可以通过下一个地址访问：

```
 http://localhost:18148/RelativeAddressX.svc 
```

但我不能这样做。我误解了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T09:28:27.383

MSDN [http://msdn.microsoft.com/en-us/library/ms733749.aspx：*](http://msdn.microsoft.com/en-us/library/ms733749.aspx) _

> 有两种方法可以在 WCF 中为服务指定终结点地址。您可以为与服务关联的每个端点指定绝对地址，也可以为服务的 ServiceHost 提供基地址，然后为与此服务关联的每个端点指定一个地址，该地址是相对于该基地址定义的。您可以使用这些过程中的每一个在配置或代码中指定服务的端点地址。如果不指定相对地址，则服务使用基地址。

*所以根据你的例子你有基本地址

```
 http://localhost:18148/ 
```

它将与RelativeAddress.svc 结合，作为您的svc 文件的名称。然后它将尝试将此字符串与 /RelativeAddressX.svc 组合为端点地址的一部分。所以你会有类似的东西

```
 http://localhost:18148/RelativeAddress.svc/RelativeAddressX.svc. 
```

您的端点不得在 IIS 中指定 svc 的路径。它应该只包含一个与这一点相关的逻辑地址。因此，尝试将您的端点更改为以下内容：

```
 <endpoint  address="RelativeAddressX" binding="basicHttpBinding" contract="WCF_Transactions.IService1"></endpoint> 
```

它应该可以通过路径访问

```
 http://localhost:18148/RelativeAddress.svc/RelativeAddressX 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T09:04:31.943

在 IIS 或 Cassini 中托管时，您无需在配置文件中指定 - 基本 URL 由 Web 服务器提供。自托管时使用该元素。Cassini (VS build in web-server) 会忽略它。

这是一个关于 WCF 寻址的好页面：http: [//msdn.microsoft.com/en-us/magazine/cc163412.aspx](http://msdn.microsoft.com/en-us/magazine/cc163412.aspx)

以下是一些相关帖子： [WCF Service Endpoints vs Host Base address](https://stackoverflow.com/questions/6937853/wcf-service-endpoints-vs-host-base-address) [WCF, changed the baseAdress of an endpoint](https://stackoverflow.com/questions/909332/wcf-changing-the-baseadress-of-an-endpoint)

# iphone - 在objective-c中比较NSDates

> ID：14849185
> 
> 赞同：0
> 
> 时间：2013-02-13T08:20:00.907
> 
> 标签：iphone, ios, objective-c, cocoa, nsdate

我有一个 2 `NSDates`，一个`startdate`和`enddate`。这些日期具有以下格式。

```
startDate = 2013-02-22 12:00:00 +0000; endDate = 2013-02-25 13:00:00 +0000; 
```

现在我想比较这些日期。因此我有这个代码。

```
if([event.startDate isEqualToDate:event.endDate]){
     NSLog(@"event %@ is in the same day",event.title);
}else{
     NSLog(@"event %@ is NOT in the same day",event.title);
} 
```

但问题是它总是出现在 else 语句中。我希望如果 startDate 和 endDate 在同一天、同一个月和同一年，他们给我第一个`NSLog`，否则他们给我第二个`NSLog`

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:32:29.890

**尝试这个 ：**

```
if ([event.startDate compare:event.endDate]==NSOrderedSame)
{
    // The same
}
else
{
    // Not the same
} 
```

* * *

**编辑：** 现在我已经注意到（@trojanfoe 的*正确*评论）：确保时间也相等，或者只是将其从您的`NSDate`对象中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:39:23.063

```
 NSCalendar *calendar = [NSCalendar currentCalendar];
    NSDateComponents *startDateComponents = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit) fromDate:startDate];
    NSDateComponents *endDateComponents = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit) fromDate:endDate];
    NSDate *startDate = [calendar dateFromComponents:startDateComponents];
    NSDate *endDate = [calendar dateFromComponents:endDateComponents];

    if([startDate isEqualToDate:endDate])
    {
        NSLog(@"event %@ is in the same day",event.title);
    }
    else{
        NSLog(@"event %@ is NOT in the same day",event.title);
    } 
```

# python - 常量 Flask 会话 ID

> ID：14849188
> 
> 赞同：8
> 
> 时间：2013-02-13T08:20:07.430
> 
> 标签：python, session, flask, session-cookies, sessionid

我有一个`Flask`应用程序，使用 Nginx+WSGI (FastCGI & Gevent) 并使用标准的 Flask 会话。我*不*使用`session.permanent=True`或任何其他额外选项，而只是`SECRET_KEY`在默认配置中设置。

我*不在*会话中保存任何 (key,value) 对，并且仅依靠`SID = session['_id']`条目来识别返回用户。我使用以下代码读取`SID`：

```
@page.route ('/')
def main (page='home', template='index.html'):

    if not request.args.get ('silent', False):
        print >> sys.stderr, "Session ID: %r" % session['_id'] 
```

我做了以下观察：

1.  对于相同的 IP 地址，但不同的浏览器我得到不同`SIDs`的 - 这是预期的；
2.  对于不同的 IP 和相同的浏览器，我再次有不同的`SIDs`- 预期的；
3.  对于具有相同浏览器的相同 IP 地址，我得到相同的`SID`- 也是预期的；

现在，第 (3) 点很有趣，因为即使*删除*了相应的 cookie，它`SID`仍然保持**不变**！在某种程度上，这可能是可以理解的，但实际上我希望`SID`在不同的 cookie 之间发生变化。但我看到的唯一区别是

```
session.new is True 
```

删除 cookie 后的第*一个请求。*即使这是非常值得期待的。但鉴于这些事实，我面临以下问题：

1.  这是否意味着对于坐在*同一IP 后面（具有相同浏览器配置）的**不同*用户，我的后端会将他们误认为是*同一*用户？

***   如果*不是*第 (1) 点，那么这些“粘性”会话的当前行为实际上是非常令人愉快的，因为这避免了我的用户可能因为删除了相应的 cookie 而丢失数据的情况。

    他们仍然可以通过使用同一浏览器从同一网络重新访问该站点来节省时间。我喜欢这样，但前提*是*第 (1) 点*不是*这种情况。

    *   我假设第 (1) 点实际上会咬我，结论实际上是`token`在会话中保存 a 并因此接受用户可以通过简单地删除他的 cookie 来炸毁自己的命运吗？

    *   或者有没有办法告诉每个新鲜饼干`Flask`不同？`SIDs`** 

 **实际上，这个问题是因为我使用了负载影响服务，它模拟了*不同*的用户（在同一个 IP 上），但我的后端一直将它们视为单个用户，因为对应`SIDs`的都是相同的。

该应用程序可在[http://webed.blackhan.ch](http://webed.blackhan.ch)进行测试（在发布时将移动**[https://notex.ch](https://notex.ch)** [基于浏览器的文本编辑器]）。谢谢您的回答。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T08:35:16.167

看起来您正在使用 Flask-Login 扩展。这是生成 id 令牌的代码：

```
def _create_identifier():
    base = unicode("%s|%s" % (request.remote_addr,
                              request.headers.get("User-Agent")), 'utf8', errors='replace')
    hsh = md5()
    hsh.update(base.encode("utf8"))
    return hsh.digest() 
```

基本上只是`md5(ip_address + user_agent)`。

Flask 使用[Werkzeug 的安全 cookie](http://werkzeug.pocoo.org/docs/contrib/securecookie/)来存储这个标识符。安全 cookie（顾名思义）是安全的：

> 该模块实现了一个客户端不可更改的 cookie，因为它添加了服务器检查的校验和。如果您只有一个用户 ID 或用于标记登录用户的东西，您可以将其用作会话替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-27T21:16:50.830

`session['_id']`不是实际的会话标识符。它只是 Flask-Login 用来实现[Session Protection](https://flask-login.readthedocs.io/en/latest/#session-protection)的值。

*标准*Flask 会话没有 SID——因为会话的实际内容存储在 cookie 本身中，所以它没有任何作用。也看到[这个](https://stackoverflow.com/questions/15156132/flask-how-to-get-session-id)。**

# php - 禁用浏览器的javascript时如何验证表单数据？

> ID：14849190
> 
> 赞同：4
> 
> 时间：2013-02-13T08:20:14.490
> 
> 标签：php, javascript

我进行了一些验证来检查输入数据是否有效。此检查由 javascript 完成。但是，当我禁用浏览器的 javascript 时，验证不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:22:08.687

即使启用了 javascript，您也应该始终在服务器端验证数据（那里有 PHP）。

使用 HTML5，您可以添加`required`属性：

```
<input type="text" required="true" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:22:10.997

提交表单（服务器端）后，您可以通过 PHP 或 PERL 进行检查。您应该每次都这样做，除了 javascript 检查

看看这个[http://buildinternet.com/2008/12/how-to-validate-a-form-complete-with-error-messages-using-php-part-1/](http://buildinternet.com/2008/12/how-to-validate-a-form-complete-with-error-messages-using-php-part-1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T08:27:02.777

服务器端验证始终是最佳选择。但是，如果服务器端验证超出范围，您可以利用 HTML5 表单验证。

> HTML5 还提供对字段中输入的网址和字段中数字的验证。数字的验证甚至考虑了 min 和 max 属性，因此如果您输入的数字太大，浏览器将不允许您提交表单。

如果您不想使用 HTMl5 简单地验证表单，请使用`novalidate`属性

```
<form novalidate>
  <input type="email" id="addr">
  <input type="submit" value="Subscribe">
</form> 
```

# c# - 什么允许匿名无参数委托类型有所不同？

> ID：14849195
> 
> 赞同：4
> 
> 时间：2013-02-13T08:20:54.257
> 
> 标签：c#, delegates, lambda, anonymous-types, anonymous-methods

在[文章“匿名方法”](http://www.informit.com/articles/article.aspx?p=1245158&seqNum=2)（作为文章系列“C# 3.0 中的委托和 Lambda 表达式”的一部分）中阅读了这句话：

*   "**进阶主题：无参数匿名方法**

    ...允许匿名方法省略参数列表（`delegate { return Console.ReadLine() != ""}`例如）。这是非典型的，但它确实**允许相同的匿名方法**出现在多个场景中，即使**委托类型可能不同**“*

我变得有些困惑。

IMO（现在找不到，但据我所知），类型由参数列表决定，而不是由方法的返回类型决定。这是正确的吗？

那么，无参数方法或委托的类型有什么不同呢？

任何（最简单的）代码示例说明相同匿名方法的不同无参数委托类型将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T09:06:48.650

参数列表*不允许*不同。但是对于匿名方法，完全*省略*参数列表是合法的。编译器将知道参数列表必须是什么样子，因此无需编写它。当然，如果您要*使用*参数（通常是这样），那么您必须指定并命名它们。

我认为这说明了：

```
internal delegate void NoParameters();

internal delegate void SomeParametersThatYouMightNotUse(int i, ref string s, Uri uri); 
```

那么以下是合法的：

```
NoParameters f = delegate { Console.WriteLine("Hello"); };
SomeParametersThatYouMightNotUse g = delegate { Console.WriteLine("Hello"); }; 
```

`( ... )`注意，关键字后面没有括号`delegate`。

*但是，*如果您在括号中指定参数，那么它们当然必须与类型匹配：**

 *```
NoParameters f = delegate() { Console.WriteLine("Hello"); };
SomeParametersThatYouMightNotUse g = delegate(int i, ref string s, Uri uri) { Console.WriteLine("Hello"); }; 
```

在所有情况下，当您*调用*委托时，请使用正确的参数：

```
f();

string myString = "Cool";
g(42, ref myString, new Uri("http://stackoverflow.com/")); 
```

Lambda 表达式语法在这方面略有不同。她永远不能省略参数。但是在很多情况下你可以省略参数的类型。如果只有一个参数，而你省略了它的类型，那么你也可以省略括号。*

# shell - 带有两个或多个条件的 if 语句

> ID：14849196
> 
> 赞同：1
> 
> 时间：2013-02-13T08:20:56.417
> 
> 标签：shell, if-statement

我正在修改一个脚本，但不知道如何在 if 语句中编写多个条件。我想用 AND 连接这两个条件。

```
if [ envoi1 -eq 2 ];then
    if [ envoi2 -eq 0 ];then
        echo 'Ahora mismo.'
        envoi = 1
    fi
else
    if [ envoi2 -eq 1 ];then
        if [ envoi1 -eq 1 ];then
            echo 'Situacion Normal.'
            envoi = 1
        fi
    else
        echo 'Raruno'
        envoi=`expr $envoi1 + envoi2`
    fi
fi 
```

现在我使用嵌套的 if 来做同样的事情，但代码对我来说不是那么清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:26:03.183

试试这个：

```
if [ $envoi1 -eq 2 ] && [ $envoi2 -eq 0 ] ; then
  envoi = 1
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:40:24.673

在`bash`中，您可以`[[`按如下方式使用：

```
if [[ $envoi2 -eq 1 && $envoi1 -eq 1 ]]; then 
    echo "Situacion Normal."
    envoi=1
fi 
```

但是，`[[`它不是 POSIX，如果您使用的是`/bin/sh`shell，它将无法工作。因此，如果需要便携性，请使用：

```
if [ $envoi2 -eq 1 -a $envoi1 -eq 1 ]; then
    echo "Situacion Normal."
    envoi=1
fi 
```

另请注意，在分配变量时，您不应在`=`.

# javascript - 在灯箱中滚动到顶部

> ID：14849197
> 
> 赞同：-1
> 
> 时间：2013-02-13T08:20:58.350
> 
> 标签：javascript

我创建了一个自定义菜单。见[这里](http://www.richihotel.com/catering_menu.php)。单击此链接后，我会弹出一个影子框，其中包含一长串项目。现在我想要一个“回到顶部”的锚链接，它可以让我回到菜单列表的顶部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:57:05.207

我已经用`#box`id 设置了你的灯箱。

**html**

```
<div id="box">
...
<!-- long content there -->
<a href="#" id="toTop">To Top</a>
</div> 
```

**CSS**（设置元素的宽度）

```
#box {
    position:relative;
    width:200px;
    height:250px;
    overflow:auto;
}

#box #toTop {
    position:absolute;
    display:none;
    left:150px;
    top:10px;
} 
```

**jQuery**

```
$('#box').bind('scroll', function(e) {
   if ($(this).scrollTop() > 100) {
        $('#toTop').fadeIn();
        $('#toTop').css({'top' : $(this).scrollTop() + 100});
   } else {
        $('#toTop').fadeOut();
    }
});

$(document).on('click', '#toTop', function(e) {
    e.preventDefault();
    //$('#box').scrollTop(0); //just go to top
    $('#box').animate({scrollTop : 0},'slow'); //animate
}); 
```

[小提琴](http://jsfiddle.net/soyuka/yrrt9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:04:10.883

很容易：

```
document.querySelector("iframe").contentWindow.scrollTo(0,0); 
```

现在在页面上放置一个按钮并在点击时调用它。哦，省略`height:100%`iframe 主体上的 ，这样你就摆脱了第二个滚动条。

您可以通过粘贴上面的行并在您的网页的浏览器控制台中执行它来尝试这一点。

# shipping - 为什么我的 Zen Cart UPS 插件不起作用？

> ID：14849199
> 
> 赞同：0
> 
> 时间：2013-02-13T08:20:58.587
> 
> 标签：shipping, zen-cart

我正在尝试为当地爬行动物商店设置运输。出于显而易见的原因，他要求为爬行动物提供通宵运输，但对于干燥用品，例如加热器、灯泡、水箱等，不需要通宵运输，只需采用标准运费即可。所以我需要根据爬行动物的地址和重量创建强制性的隔夜运输，但标准运输也基于干货的地址和重量。我尝试了 zen cart 网站上的 UPS 插件，但一旦我尝试估算模拟订单的运费，它就不会显示。我已启用它，并且我拥有包括访问密钥在内的帐户信息。还有什么可能是错的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:13:31.253

这种情况需要比 StackOverflow 的用途更多的讨论。听起来您的 USPS 模块确实过时或配置错误，这超出了 StackOverflow 的范围。

请将您的情况发布到位于 www.zen-cart.com/forum.php 的 Zen Cart 支持论坛，我们可以在此与您讨论您的站点、您的 ZC 版本、您的 USPS 模块版本以及您的独特要求。

# android - Google Analytics - 列出每个事件标签的事件值

> ID：14849201
> 
> 赞同：11
> 
> 时间：2013-02-13T08:21:02.527
> 
> 标签：android, events, google-analytics

**我现在的情况：**

*我可能对此有完全错误的方法，所以请告诉我是否应该以不同的方式执行此操作。*

我从我的 Android 应用程序发送一个事件来跟踪数据库加载时间。

*   事件类别：'DB'
*   事件标签：'DBLoadTime'
*   事件值：2356（或者数据库加载时间以毫秒为单位）

在 Analytics 中，我想获得所有不同加载时间的表格视图，并在彼此下方列出。从分析[文档](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide#Values)中，我可以看到它们似乎在收到所有事件值时累积了它们。这意味着我只能得到总值或平均值。但是，他们也使用与我类似的示例，他们使用事件值来存储视频的“下载时间”。

**我的问题**

1.  这是可能的，还是默认累积的类似事件标签的值，并且没有办法将它们列为单独的值。
2.  如果不可能，我怎样才能得到这个信息？也许通过将加载时间作为事件标签发送？

**为什么我需要知道：**

最高值并没有真正为我服务，因为可能有一个人的设备非常慢，加载时间很长，而第二长的加载时间已经是这个时间的一半。平均值也不能告诉我太多，因为有很多人在试用该应用程序，数据库中只有一两条记录，加载速度总是很快。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-19T21:16:30.203

看起来您想要的是一个直方图，以查看该 eventLabel 和 eventCategory 的事件值分布。我们希望看到同样的事情——因为看到实际分布（甚至四分位数）*比*仅仅看到平均值和总和更有帮助。

不幸的是（d'oh！）GA 目前不支持报告 eventValue 的直方图。我已经与几位 GA 开发人员谈过这件事，但没有人说这会很快发生（d'oh！）。

值得庆幸的是，我们找到了 GA 开发人员所说的解决方法——即不违反服务条款。

除了报告设备加载所需的毫秒数，您可以将此数字作为字符串包含在自定义维度中，或者 - 在这种情况下 - 作为 eventAction 中的字符串。这将允许您报告每个毫秒数的命中次数。

如果您使用的是 GA 报告 API（或非常有用的[资源管理](http://ga-dev-tools.appspot.com/explorer/)器），那么您可以根据需要重新分类，从中可以生成直方图以查看分布。

# c# - ObjectStateManager 无法跟踪具有相同键的多个对象

> ID：14849202
> 
> 赞同：3
> 
> 时间：2013-02-13T08:21:04.270
> 
> 标签：c#, entity-framework

我知道已经问过很多这样的问题，但我似乎无法理解出了什么问题。这是我的代码：

```
[HttpGet]
public ViewResult Edit(int id)
{
    User user = userRepository.GetAll().FirstOrDefault(x => x.ID == id);

    return View("Edit", user);
}

[HttpPost]
[ValidateAntiForgeryToken]
public ActionResult Edit(User user)
{
    if (ModelState.IsValid)
    {
        user.Password = HashHelper.GetHash(user.Password);
        if (user.ID == 0) // new user
        {
            User testUser = userRepository.GetAll().FirstOrDefault(x => x.Name.Equals(user.Name));

            if (testUser == null)
                userRepository.AddEntity(user);
            else
            {
                ModelState.AddModelError("", "Deze gebruikersnaam bestaat al");
                return View(user);
            }
        }
        else // edit existing user
        {   
            User tempUser = userRepository.GetAll().First(x => x.ID == user.ID);

            if (!user.Name.Equals(tempUser.Name))
            {
                // naam werd aangepast
                int count = userRepository.GetAll().Count(x => x.Name.Equals(user.Name));

                if (count > 0)
                {
                    ModelState.AddModelError("", "Deze gebruikersnaam bestaat al");
                    return View(user);  
                }

            }

            userRepository.UpdateEntity(user);

        }
        userRepository.SaveChanges();
        return RedirectToAction("Index");
    }
    else
    {
        return View(user);
    }
} 
```

更新实体：

```
public void UpdateEntity(T entity)
{
    var entry = context.Entry(entity);
    if (entry.State == EntityState.Detached)
        context.Set<T>().Attach(entity);

    context.Entry<T>(entity).State = EntityState.Modified;
} 
```

这会导致此错误：

```
An object with the same key already exists in the ObjectStateManager. The ObjectStateManager cannot track multiple objects with the same key 
```

我不明白。为什么这不起作用，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:47:37.077

存在多个问题；

*   `GetAll()`如果您想获取单个实体，请不要调用，如果您在数据库中有数千个实体怎么办。只需在存储库中实现 SingleOrDefault 。

采用 ：

`User testUser = userRepository.FirstOrDefault(x => x.Name.Equals(user.Name));`

代替 ：

```
User testUser = userRepository.GetAll().FirstOrDefault(x => x.Name.Equals(user.Name)); 
```

*   从数据库中获取现有用户后，只需使用新值更新此项目，而不是尝试保留从页面返回的用户；

采用

```
User tempUser = userRepository.GetAll().First(x => x.ID == user.ID);
tempUser.UserName = user.UserName;
....
SaveChanges(); 
```

而不是尝试持久化从页面检索到的用户。

*   您需要确定实体的密钥；它是名称，是 Id 还是两者兼而有之。

# browser-automation - 在触摸屏显示器上的网站上弹出文本框

> ID：14849203
> 
> 赞同：0
> 
> 时间：2013-02-13T08:21:07.523
> 
> 标签：browser-automation

每当我使用触摸屏显示器单击特定网站上的文本框时，我都希望弹出一个文本框。我宁愿不干扰网站的代码。我还有其他方法可以做到这一点吗？也许把它写成浏览器的插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:38:24.120

找到了一个谷歌浏览器扩展，虚拟键盘界面

# java - 非宽松模式中的 SimpleDateFormat 在解析有效日期时抛出 ParseException

> ID：14849208
> 
> 赞同：0
> 
> 时间：2013-02-13T08:21:43.400
> 
> 标签：java, parsing, scala, simpledateformat

我有一个非常简单的 scala 类：

```
class StrictDateFormat(pattern: String) extends java.text.SimpleDateFormat {
  setLenient(false)
} 
```

解析有效日期时出现 ParseException：

```
new StrictDateFormat("yyyy-MM-dd HH:mm").parse("2013-02-05 16:47")
java.text.ParseException: Unparseable date: "2013-02-05 16:47"
at java.text.DateFormat.parse(DateFormat.java:337) 
```

我已经尝试了一切，它不起作用。

令人惊讶的是，如果我在实例化 SimpleDataFormat 时设置 lenient 方法，它会起作用：

```
new SimpleDateFormat("yyyy-MM-dd HH:mm"){setLenient(false)}.parse("2013-02-05 16:47")
res0: java.util.Date = Tue Feb 05 16:47:00 CET 2013 
```

这没有任何意义！这和我声明的不是同一类吗？为什么我在第一种情况下得到 ParseException？这是java还是scala中的错误？

我的 Java 版本：jdk1.6.0_26 我的 scala 版本：2.9.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:58:50.417

你需要做：

```
class StrictDateFormat(pattern: String) extends java.text.SimpleDateFormat(pattern) {
  setLenient(false)
} 
```

（调用正确的超类构造函数`java.text.SimpleDateFormat(pattern)`而不是`java.text.SimpleDateFormat`）

# java - Java 编译器 API 来获取令牌？

> ID：14849215
> 
> 赞同：0
> 
> 时间：2013-02-13T08:22:13.863
> 
> 标签：java, compiler-construction

JavaCompiler 或 Java ToolProvider 的某些部分是否允许我获取 Java 文件中所有标记的列表？也就是所有合法的token（最好每个都作为一个数据结构），并把它们放在一个列表（或其他数据结构）中？我知道某处可能有一个 3rd 方 api，但我想知道它是否可以通过 javax.tools 库或其他方式完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:39:52.017

[您可以从Eclipse JDT API](http://www.eclipse.org/jdt/)查询 Java 编译单元的抽象语法树。稍加努力，它也可以独立使用。您可以使用[AST 视图](http://www.eclipse.org/jdt/ui/astview/index.php)作为示例。

# c++ - 如何使用 C++ 为特定用户获取文件夹的 ACL 权限？

> ID：14849221
> 
> 赞同：2
> 
> 时间：2013-02-13T08:22:40.407
> 
> 标签：c++, winapi, permissions, acl

首先，让我问一下，Windows-NT 上每个用户的 ACL 权限是否会更改？我问的原因是因为[accesschk](http://technet.microsoft.com/en-us/sysinternals/bb664922.aspx)实用程序似乎将用户名作为参数，同时还需要检查对象（在我的情况下是文件夹路径）。

在任何一种情况下，您如何使用 C++ 为特定 Windows 用户获取文件夹的 ACL 权限（[这个东西）？](http://www.installsetupconfig.com/win32programming/windowsfileapis4_12.html)我假设我需要调用[GetNamedSecurityInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446645%28v=vs.85%29.aspx)但我如何获得用户帐户的权限？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T09:23:32.423

ACL 的全部意义在于区分用户。它们是访问控制列表；他们控制哪些用户可以访问资源。

你是对的`GetNamedSecurityInfo`。它为您提供两种 ACL，即 SACL 和 DACL。SACL 处理文件访问审计（很少使用），DACL 有权限。您可以分解使用返回的 DACL `GetExplicitEntriesFromAcl`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-18T23:33:06.773

“无论哪种情况，您如何使用 C++ 为特定 Windows 用户获取文件夹的 ACL 权限（这些东西）？”

DACL 返回一个指针，您可以使用该指针从中提取值。

我有一个你可以看的演示程序，它基本上从给定的文件或目录加载 DACL 信息。该页面的链接如下所示。

[示例 GetNamedSecurityInfo() 调用](https://github.com/MagnusTiberius/win32acl/blob/master/win32acl.cpp)

“我假设我需要调用 GetNamedSecurityInfo，但我如何获得用户帐户的权限？”

您可以通过调用 GetAce() 遍历列表并从每个项目中提取域/用户名。

同样，请参阅我用 C++ 编写的示例代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-22T04:47:25.783

```
#include <windows.h>
#include <iostream>
#include<fileapi.h>
#include<aclapi.h>
#include <unistd.h>
#include <sys/stat.h>
#include<time.h>
using namespace std;

void printFileProperties(struct stat stats)
{
    struct tm dt;
    printf("\nFile access: ");
    if (stats.st_mode & R_OK)
        printf("read ");
    if (stats.st_mode & W_OK)
        printf("write ");
    if (stats.st_mode & X_OK)
        printf("execute");

    printf("\nFile size: %d Bytes", stats.st_size);  
    dt = *(gmtime(&stats.st_ctime));
    printf("\nCreated on: %d-%d-%d %d:%d:%d", dt.tm_mday, dt.tm_mon, dt.tm_year + 1900, 
                                              dt.tm_hour, dt.tm_min, dt.tm_sec);
    dt = *(gmtime(&stats.st_mtime));
    printf("\nModified on: %d-%d-%d %d:%d:%d", dt.tm_mday, dt.tm_mon, dt.tm_year + 1900, 
                                              dt.tm_hour, dt.tm_min, dt.tm_sec);
    dt = *(gmtime(&stats.st_atime));
    printf("\nAccessed on: %d-%d-%d %d:%d:%d", dt.tm_mday, dt.tm_mon, dt.tm_year + 1900, 
                                              dt.tm_hour, dt.tm_min, dt.tm_sec); 

}
void printGroupProperties(char filepath[])
{
    LPCSTR fname;

    fname = filepath;

    DWORD dwRtnCode = 0;
    PSECURITY_DESCRIPTOR psd = NULL;
    PACL pdacl;
    ACL_SIZE_INFORMATION aclSize = {0};
    PSID sidowner = NULL;
    PSID sidgroup = NULL;
    HANDLE hFile;
    LPTSTR   oname = NULL;
    LPTSTR doname=NULL;
    DWORD namelen=0;        
    DWORD domainnamelen=0;
    SID_NAME_USE peUse;
    ACCESS_ALLOWED_ACE* ace;

    dwRtnCode = GetNamedSecurityInfo(fname
            ,SE_FILE_OBJECT
            ,OWNER_SECURITY_INFORMATION | GROUP_SECURITY_INFORMATION | DACL_SECURITY_INFORMATION 
            ,&sidowner
            ,&sidgroup
            ,&pdacl
            ,NULL
            ,&psd);

    LookupAccountSid(NULL, sidowner,  oname, (LPDWORD)  &namelen, doname,  (LPDWORD) &domainnamelen, &peUse);

       oname = (LPTSTR)GlobalAlloc(
          GMEM_FIXED,
          namelen);
           doname = (LPTSTR)GlobalAlloc(
           GMEM_FIXED,
           domainnamelen);

//  wcout<<"Owner: " << doname << "/" << oname <<"\n";

    LookupAccountSid(NULL, sidgroup, oname,  (LPDWORD) &namelen, doname,   (LPDWORD)&domainnamelen, &peUse);
    wcout<<"\n\nGroup: " << doname << "/" << oname;      
    wcout<< "\n::ACCESS CONTROL LIST::";
    SID *sid;
    unsigned long i, mask;
    char *stringsid;

    for (int i=0; i<(*pdacl).AceCount; i++) {
        int c=1;
        namelen=0;
        domainnamelen=0;
        BOOL b = GetAce(pdacl, i, (PVOID*)&ace);
        //SID *sid = (SID *) ace->SidStart;
        if (((ACCESS_ALLOWED_ACE *) ace)->Header.AceType == ACCESS_ALLOWED_ACE_TYPE) {
            sid = (SID *) &((ACCESS_ALLOWED_ACE *) ace)->SidStart;
            LookupAccountSid(NULL, sid,  oname,  (LPDWORD) &namelen, doname,   (LPDWORD)&domainnamelen, &peUse);
            oname = (LPTSTR)GlobalAlloc(GMEM_FIXED,namelen);
            doname = (LPTSTR)GlobalAlloc(GMEM_FIXED,domainnamelen);
            LookupAccountSid(NULL, sid,  oname,  (LPDWORD) &namelen, doname,   (LPDWORD)&domainnamelen, &peUse);
            wcout<<"\nUser Group "<<i+1<<":"<< doname << "/" << oname;
            mask = ((ACCESS_ALLOWED_ACE *) ace)->Mask;
        }
        else if (((ACCESS_DENIED_ACE *) ace)->Header.AceType == ACCESS_DENIED_ACE_TYPE) {
            sid = (SID *) &((ACCESS_DENIED_ACE *) ace)->SidStart;
            LookupAccountSid(NULL, sid,  oname,(LPDWORD) &namelen, doname, (LPDWORD)&domainnamelen, &peUse);
            oname = (LPTSTR)GlobalAlloc(GMEM_FIXED,namelen);
            doname = (LPTSTR)GlobalAlloc(GMEM_FIXED,domainnamelen);
            LookupAccountSid(NULL, sid,  oname,  (LPDWORD) &namelen, doname,   (LPDWORD)&domainnamelen, &peUse);
                wcout<<"\nUser Group "<<i+1<<":"<< doname << "/" << oname;
            mask = ((ACCESS_DENIED_ACE *) ace)->Mask;
        }
        else printf("Other ACE\n");
        cout<<"\nPERMISSIONS:\n";
    //  wcout<<"ACE: mask:" << ace->Mask << " sidStart:" << ace->SidStart << " header type=" << ace->Header.AceType << " header flags=" << ace->Header.AceFlags <<"\n";

        if (DELETE & ace->Mask) {
            wcout<< " Delete" << "\n";
        }
        if (FILE_GENERIC_READ & ace->Mask) {
            wcout<< " File_Generic_Read" << "\n";
        }
        if (FILE_GENERIC_WRITE & ace->Mask) {
            wcout<< " File_Generic_Write" << "\n";
        }
        if (FILE_GENERIC_EXECUTE & ace->Mask) {
            wcout<< " File_Generic_Execute" << "\n";
        }
        if (GENERIC_READ & ace->Mask) {
            wcout<< " Generic_Read" << "\n";
        }
        if (GENERIC_WRITE & ace->Mask) {
            wcout<< " Generic_Write" << "\n";
        }
        if (GENERIC_EXECUTE & ace->Mask) {
            wcout<< " Generic_Execute" << "\n";
        }
        if (GENERIC_ALL & ace->Mask) {
            wcout<< " Generic_All" << "\n";
        }
        if (READ_CONTROL & ace->Mask) {
            wcout<< " Read_Control" << "\n";
        }
        if (WRITE_DAC & ace->Mask) {
            wcout<< " Write_DAC" << "\n";
        }
        if (WRITE_OWNER & ace->Mask) {
            wcout<< " Write_Owner" << "\n";
        }
        if (SYNCHRONIZE & ace->Mask) {
            wcout<< " Synchronize" << "\n";
        }
        wcout<<"\n";
    }

    SECURITY_DESCRIPTOR* p1 = (SECURITY_DESCRIPTOR*)psd;

    wcout<< "\n::SECURITY_DESCRIPTOR_CONTROL::" << "\n";

    SECURITY_DESCRIPTOR_CONTROL ctrl = (*p1).Control;
        if (SE_OWNER_DEFAULTED & ctrl) {
            wcout<< " SE_OWNER_DEFAULTED" << "\n";
        }
        if (SE_DACL_PRESENT & ctrl) {
            wcout<< " SE_DACL_PRESENT" << "\n";
        }
        if (SE_DACL_DEFAULTED & ctrl) {
            wcout<< " SE_DACL_DEFAULTED" << "\n";
        }
        if (SE_SACL_PRESENT & ctrl) {
            wcout<< " SE_SACL_PRESENT" << "\n";
        }
        if (SE_SACL_DEFAULTED & ctrl) {
            wcout<< " SE_SACL_DEFAULTED" << "\n";
        }
        if (SE_DACL_AUTO_INHERIT_REQ & ctrl) {
            wcout<< " SE_DACL_AUTO_INHERIT_REQ" << "\n";
        }
        if (SE_SACL_AUTO_INHERIT_REQ & ctrl) {
            wcout<< " SE_SACL_AUTO_INHERIT_REQ" << "\n";
        }
        if (SE_SACL_AUTO_INHERITED & ctrl) {
            wcout<< " SE_SACL_AUTO_INHERITED" << "\n";
        }
        if (SE_DACL_PROTECTED & ctrl) {
            wcout<< " SE_DACL_PROTECTED" << "\n";
        }
        if (SE_SACL_PROTECTED & ctrl) {
            wcout<< " SE_SACL_PROTECTED" << "\n";
        }
        if (SE_RM_CONTROL_VALID & ctrl) {
            wcout<< " SE_RM_CONTROL_VALID" << "\n";
        }
        if (SE_SELF_RELATIVE & ctrl) {
            wcout<< " SE_SELF_RELATIVE" << "\n";
        }

//  LocalFree(psd);
//  LocalFree(sidowner);
//  LocalFree(pdacl);
}

void printFileAttributes(char filepath[])
{
    long unsigned int FileAttributes;
    FileAttributes=GetFileAttributesA(filepath);
    printf("\nFile type:");
    if (FileAttributes & FILE_ATTRIBUTE_ARCHIVE) 
    {
        printf("Archive ");
    }
    if (FileAttributes & FILE_ATTRIBUTE_DIRECTORY)
    {
        printf("Directory ");
    }
    if (FileAttributes & FILE_ATTRIBUTE_READONLY) 
    {
        printf("Read-Only ");
    }
    if (FileAttributes &    FILE_ATTRIBUTE_HIDDEN) 
    {
        printf("Hidden");
    }
}

int main()
{
    WIN32_FIND_DATA data;
    char dir[100];
    cout<<"\nEnter the directory path:";
    gets(dir);
    char dirname[100];
    strcpy(dirname,dir);
    strcat(dirname,"\\*");
    //cout<<dirname;
    HANDLE hFind = FindFirstFile(dirname, &data);      // DIRECTORY
    struct stat stats;
    if ( hFind != INVALID_HANDLE_VALUE ) {
        do {
            std::cout << "\n\nFile name:"<<data.cFileName;
            //cout<<"\nFile Type:";
            char filepath[100];
            strcpy(filepath,dir);
            strcat(filepath,"\\");
            strcat(filepath,data.cFileName);

            if( stat(filepath, &stats) == 0)   
            {
                printFileProperties(stats); 
           }
          printFileAttributes(filepath);
         printGroupProperties(filepath);

        } while (FindNextFile(hFind, &data));
        FindClose(hFind);
    }
} 
```

# java - 找到最长的白色节点路径

> ID：14849224
> 
> 赞同：2
> 
> 时间：2013-02-13T08:22:47.250
> 
> 标签：java, c, algorithm

在一次采访中提出了这个问题：给出了具有黑白节点的树。在给定的树中找到最长的白色节点路径。下面的方法是否正确或有人帮助提供更好的方法谢谢！

```
int Longest(node root, int max)
{
    if(root==null || root.color == black)
        return 0;
    if(root.color == white)
    {

      int curmax =1+ firstlongest(root.child) + secondlongest(root.child); 

        if(curmax>max) 
            max = curmax;
        return curmax;
    }
    if(root.color == black)
    {
        for(all children)
        {
            int curmax =1+ firstlongest(root.child) + secondlongest(root.child); 
        }
        if(curmax>max) 
            max =curmax;
        return 0;
    }
}

 int firstlongest(node* child){//will calculate first longest of children and similarly 
 secondlongest gives second.Finally max will have length of longest path. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:57:30.750

**简介：**
首先记住如何在树中找到最长的路径。你取一个任意顶点**v**，用 bfs 找到离它最远的顶点**u**，然后再用 bfs 找到离**u**最远的顶点**t**，并且**(u,t)**路径将是树中最长的。我不会在这里证明它，您可以搜索它或尝试证明自己（不过，如果您在一些示例上运行它，这很明显）。

**解决方案：**
现在你的问题。我们不需要黑色节点，所以让我们把它们扔掉吧:) 剩下的图将是一个森林，即一组树。用已知算法为每棵树找到最长的路径，并在所有路径中选择最长的。

**复杂性：**
描述的算法将执行一次线性传递以删除黑色节点，并为森林中的每棵树执行两个线性 bfs，这对图中的所有节点都是线性的。总共：O(n) + O(n+m) + O(n+m) = **O(n+m)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T08:31:32.940

代码对我来说似乎不正确。以下部分：

```
if(root.color == black)
{
    for(all children)
    {
        int curmax = max(longest(root.child[i], max));
    }
    if(curmax>max) 
        max =curmax;
    return 0;
} 
```

永远不会被执行，因为 if`root.color == black`方法会提前返回 0。

这是我将如何做到这一点：

```
private static int longestWhitePathFromRootLength (Node node)
{
    if (node.color == BLACK)
        return 0;
    else // node.color == WHITE
    {
        int l = 0;

        for (Node n: node.children)
        {
            l = Math.max (l, longestWhitePathFromRootLength (n));
        }

        return l + 1;
    }
}

public static int longestWhitePathLength (Node node)
{
    int l = 0;

    for (Node n: node.children)
    {
        l = Math.max (l, longestWhitePathLength (n));
    }

    return Math.max (l, longestWhitePathFromRootLength (node));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T08:36:47.467

您的程序似乎只计算下降的路径。假设所有节点都是白色的，它将错过这棵树中最长的路径：

```
 r
     /
    a
   / \
  b   c
 /     \
d       e 
```

最长的路径是`dbace`。

# matlab - matlab中的小波分解与重构

> ID：14849232
> 
> 赞同：0
> 
> 时间：2013-02-13T08:23:08.240
> 
> 标签：matlab, wavelet

通过使用小波工具箱，可以分解和重建时间序列，例如

```
load leleccum; 
s = leleccum(1:3920); 

% decomposition
[c,l] = wavedec(s,3,'db5');

% Reconstruction
a0 = waverec(c,l,'db5'); 
```

由此，如何从系列中删除特定频率？例如，一旦我将序列分解为其频率分量，如何在重建之前从中删除频率，例如每日周期？

具有 24 个单位周期的信号示例：

```
t = 1:365;
raw =  20+(10-2).*rand(1,length(t)); 
signal_1 = 10*sin(2*pi*t/24); 

y = raw + signal_1; % example data series

% decomposition
[c,l] = wavedec(y,3,'db5'); 
```

您将如何从最终系列中删除周期为 24 的信号，即“signal_1”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:36:04.270

您需要修改向量`c`并且`l`从`wavedec`. 如果要删除某些频率，请找到与这些频率相对应的数据并将其归零。然后调用 call`waverec`重构修改后的时间序列。

# html - java小程序上面的DIV

> ID：14849236
> 
> 赞同：1
> 
> 时间：2013-02-13T08:23:27.493
> 
> 标签：html, css, applet

当 java 小程序打开时，我一生都无法弄清楚我可以做些什么来让它在 IE 或 Chrome 中按预期呈现。

div 应该作为 java 小程序顶部的覆盖加载，`currencChoiceDisplay`但由于某种原因，它的一半被切断了。这里有一个 JSFiddle 示例：

[http://jsfiddle.net/SN6Je/5/](http://jsfiddle.net/SN6Je/5/)

比较一下firefox和ie的区别，你就会明白我的意思了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:20:47.980

`position: absolute`从 div中删除`#currencChoiceDisplay`。[更新了 jsfiddle](http://jsfiddle.net/SN6Je/19/)

# node.js - node.js 只有一个客户端正在接收消息

> ID：14849247
> 
> 赞同：0
> 
> 时间：2013-02-13T08:24:18.853
> 
> 标签：node.js, websocket

据我所知，除非另有说明，否则如果服务器发送消息，所有客户端都应该收到它。但在我的情况下，只有一个客户收到消息。

客户 ：

```
(function () {
  window.Network = {
    socket : null,  
    initialize : function(socketURL) {
      this.socket = io.connect(socketURL);
      this.socket.on('new move', this.add);     
    },  
   add : function(data) {   
      var msg = $('<div class="msg"></div>')       
      .append('<span class="text">' + data.x+'/'+data.y + '</span>');

      $('#messages')
        .append(msg)
        .animate({scrollTop: $('#messages').prop('scrollHeight')}, 0);
    },   
   send : function(data) {
      this.socket.emit("move",data);
      return false;
    }
  };
}()); 
```

服务器：

```
io.sockets.on('connection', function (socket) {
    socket.on('move', function (data) {
    console.log(data);
    socket.emit("new move",data);
  }); 
}); 
```

如果我打开多个客户端并使用“发送”功能，则只有发送它的客户端会收到来自服务器的发射。知道我做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:36:13.383

要在服务器端全局发出，请使用：

```
io.sockets.emit('new move', 'data1'); 
```

发射到当前套接字：

```
socket.emit('function', 'data1', 'data2'); 
```

向除客户以外的所有人广播：

```
socket.broadcast.emit('function', 'data1', 'data2'); 
```

[来源](http://psitsmike.com/2011/10/node-js-and-socket-io-multiroom-chat-tutorial/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T08:30:55.760

当您使用套接字时，您正在直接与连接的客户端交谈。

但是，您可以使用房间，在此代码段中，我将套接字添加到 room1

```
// Add the player socket, to the room.
socket.join('room1'); 
```

然后你可以通过

```
io.sockets.in('room1').emit('startGame', true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T08:31:11.187

代码按预期工作。你正在做`socket.emit("new move",data);`，这将发出一个`new move`事件回那个特定`socket`的，在你的情况下，它是连接的同一个套接字。

如果您还希望将其发送到已连接的其他客户端，则需要将事件显式发送给其他客户端。

```
socket.emit("new move",data);
socket.broadcast.emit("new move",data); 
```

# javascript - javascript - 方法的一部分被调用两次

> ID：14849250
> 
> 赞同：-1
> 
> 时间：2013-02-13T08:24:28.237
> 
> 标签：javascript, methods

我正在尝试在 javascript 中编写一个自定义的、简单的高度图生成。到目前为止，我已经完成了代码，但我遇到了一些非常奇怪的事情，阻碍了我的前进。我不确定这是一个错误还是我只是瞎了眼。部分代码如下：

```
function fillNeighboursHill(life) {
    //...
    life--;
    neighbours = this.getNeighbours();
    neighbourstring = 'Before:'+neighbours.length+'\n';
    for (var i=0; i < neighbours.length; i++) {
        //do something
        neighbours[i].fillNeighboursHill(life);
    }
    neighbourstring += 'After:'+neighbours.length+'\n';
    alert(neighbourstring);
} 
```

这是一个递归调用自身几次的函数。但是，如果您查看 neighbourstring，您将始终期望在此模式的末尾出现警报：

> 之前：8
> 之后：8

几乎所有情况都是这种情况，但有时我会得到

> 之前：8
> 之后：8
> 之后：8

没有可以理解的原因。对我来说，这没有任何意义，因为这意味着函数的底部会执行两次，尽管没有什么可以强迫这种行为。我错过了什么吗？

任何关于我的问题的提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:46:57.417

作为`neighbours`一个全局函数，可能会在两个赋值之间执行函数的另一个调用`neighbourstring = 'Before:'+neighbours.length+'\n';`。`neighbourstring += 'After:'+neighbours.length+'\n';`声明它`var neighbours`应该可以解决它。

# nagios - 如何使用 cacti 监控远程主机

> ID：14849259
> 
> 赞同：0
> 
> 时间：2013-02-13T08:25:12.623
> 
> 标签：nagios, cacti

我在服务器中安装了 nagios，它使用不同的插件监视不同的远程主机。但我无法以图形格式查看每个系统的进程。是否可以将仙人掌用于相同目的？我刚刚在同一台机器上安装了仙人掌。但不确定如何安装插件和监控不同的服务器。也只是想知道我可以使用 cacti 作为 Nagios 的前端工具吗？仙人掌的工作原理

有人可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T12:45:47.283

我不确定 Cacti 如何与 Nagios 交互，但我确实为我的一个 Nagios 实例安装和配置了 pnp4nagios 插件/扩展，这让我可以很好地概览我监控的服务的图表。（不是所有的，但只有那些可变的并且在图表中有用的）这是一个非常好的工具，而且设置起来并不难。我从源代码编译它，它的 install.php 为您在安装过程中下一步做什么提供了很好的反馈。他们没有提到的一件事是您必须在 Nagios 实例的 apache2 配置文件中启用 Includes。（如果您想在 Nagios CGI 文件中使用 SSI 包含，这是必需的。此 SSI 文件包含 jQuery Javascript 定义，当您将鼠标悬停在 Nagios 中的图形上时，将启用弹出 png 图形）它还使用使用固定大小存储的 rrdtool（循环数据库文件）。（如果您的硬盘空间很小，可能会有所帮助）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T09:51:39.200

对于 nagios，有 nagiosgraph，它为 nagios 中定义的每个服务生成图表，您只需为 nagiosgraph 添加配置。

至于仙人掌，有一个名为 NPC 的插件，它是在仙人掌上生成新选项卡，其中包含在 nagios 中定义的服务。

# embedded - 是否存在用于模拟具有可编程 CAN 节点的 CAN 总线的开源工具？

> ID：14849263
> 
> 赞同：5
> 
> 时间：2013-02-13T08:25:18.810
> 
> 标签：embedded, can-bus

我正在寻找一种工具，以便更轻松地尝试对[控制器局域网](http://en.wikipedia.org/wiki/CAN_bus)(CAN) 协议进行调整，以及在其之上尝试构建协议。

特别是，我正在寻找具有可编程节点的 CAN 总线模拟，以便每个节点能够完全控制它在任何给定数据包中在总线上输出的位，但通常的 CAN 节点行为（例如帧间间距）和 CAN 总线功能（如仲裁）仍然可用。

但是，如果存在与此类工具接近的任何东西并且是开源的，我很可能会对其进行修改以满足我的要求。

我查看了 CANOpen Magic 和 RTaW-Sim，但它们没有提供我正在寻找的确切功能，并且我无法修改它们来这样做，因为它们不是开源的。

如果不存在这样的库，请在评论中提及。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:16:53.653

对于纯模拟，您可以使用[OpenCores CAN 控制器](http://opencores.org/project,can)。您必须学习[Verilog](https://en.wikipedia.org/wiki/Verilog)并加快运行 Verilog 模拟的速度 - 您可以使用[Icarus Verilog](http://iverilog.icarus.com/)或[CVer](http://sourceforge.net/projects/gplcver/)来运行模拟。

通过修改 Verilog 源，您可以完全访问 CAN 控制器的所有方面。

# c# - 基于用户选择列的表上的通用交叉连接

> ID：14849273
> 
> 赞同：0
> 
> 时间：2013-02-13T08:25:43.417
> 
> 标签：c#, linq, generics, lambda

我需要对数据库中的表列执行交叉连接。我使用 linq 和 C# 来做到这一点。这是我写的代码：

```
var res = (from item_1 in set1
           join item_2 in set_2 on new
           {
               item_1.columnA,
               item_1.columnB,
               item_1.columnC,
               item_1.columnD,
               item_1.columnE,
               //etc...
           }
           equals new
           {
               item_2.columnA,
               item_2.columnB,
               item_2.columnC,
               item_2.columnD,
               item_2.columnE,
               //etc...
           }
           select new { item_1,item_2}; 
```

我有一个 asp.net 页面，用户可以在其中选择他们希望在哪些列上执行交叉连接。查询应该反映他们的选择。一些用户只希望使用其中的 2 个列，而其他用户会选择 10 个。

我显然不想在某些 switch 语句中重复此查询并包含选定的列。如果有一种通用的方法可以做到这一点，我正在徘徊。传递一个 lambda 表达式......我只是不确定应该如何完成。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:35:47.797

看看 Scott Gu 关于[**Dynamic LinQ**](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)的这篇博文。

它不仅包含对此事的解释，还提供了下载链接和示例。希望这可以帮助！

# java - 未知的 SMTP 主机：smtp.live.com

> ID：14849275
> 
> 赞同：0
> 
> 时间：2013-02-13T08:25:52.607
> 
> 标签：java, spring, hibernate, jakarta-mail

很抱歉重复的问题。

但我不明白这个错误是如何发生的......当我发送邮件时（使用 Hotmail）

听到是我的示例代码..

```
<bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl">
    <property name="host" value="smtp.live.com" />
    <property name="port" value="587" />
    <property name="username" value="narasimham@sitsonline.com" />
    <property name="password" value="**********" />

    <property name="javaMailProperties">
        <props>
            <prop key="mail.smtp.auth">true</prop>
            <prop key="mail.smtp.starttls.enable">true</prop>
        </props>
    </property>
</bean> 
```

但我得到了这个例外..

```
 org.springframework.mail.MailSendException: Mail server connection failed; nested exception is javax.mail.MessagingException: Unknown SMTP host: smtp.live.com;
  nested exception is:
    java.net.UnknownHostException: smtp.live.com. Failed messages: javax.mail.MessagingException: Unknown SMTP host: smtp.live.com;
  nested exception is:
    java.net.UnknownHostException: smtp.live.com; message exception details (1) are:
Failed message 1:
javax.mail.MessagingException: Unknown SMTP host: smtp.live.com;
  nested exception is:
    java.net.UnknownHostException: smtp.live.com
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1280)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:370)
    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
    at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:689)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.flex.core.MessageInterceptionAdvice.invoke(MessageInterceptionAdvice.java:66)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.adapter.ThrowsAdviceInterceptor.invoke(ThrowsAdviceInterceptor.java:124)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.Cglib2AopProxy$FixedChainStaticTargetInterceptor.intercept(Cglib2AopProxy.java:573)
    at flex.messaging.endpoints.AMFEndpoint$$EnhancerByCGLIB$$ace25600.serviceMessage(<generated>)
    at flex.messaging.endpoints.amf.MessageBrokerFilter.invoke(MessageBrokerFilter.java:103)
    at flex.messaging.endpoints.AMFEndpoint$$EnhancerByCGLIB$$ace25600.service(<generated>)
    at org.springframework.flex.servlet.MessageBrokerHandlerAdapter.handle(MessageBrokerHandlerAdapter.java:109)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.net.UnknownHostException: smtp.live.com 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:33:12.417

这有点奇怪。例外情况是 smtp.live.com 的 DNS 查找失败。然而，当我查找“smtp.live.com”时，我得到了这个：

```
$ nslookup smtp.live.com
Server:     10.0.0.138
Address:    10.0.0.138#53

Non-authoritative answer:
smtp.live.com   canonical name = smtp.hot.glbdns.microsoft.com.
Name:   smtp.hot.glbdns.microsoft.com
Address: 65.55.162.200 
```

因此，我怀疑您的 DNS 临时/本地中断，或者您的 DNS 配置有问题。DNS条目也有可能正在被撤回......并且您的上游DNS缓存在我之前过期了它。

尝试自己进行 DNS 查找并告诉我们它报告的内容。如果它失败了，我建议你为“live.com”/hotmail/它自己调用的任何东西寻找一个更新的 SMTP 主机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:30:11.550

`smtp.live.com`可能已经过时了。live.com 的 MX 记录通过 mx4.hotmail.com 指向 mx1.hotmail.com；尝试其中之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T20:09:19.830

smtp.live.com 应该可以工作。您很可能位于阻止直接 Internet 访问的公司防火墙后面，因此您无法查找名称。JavaMail FAQ[提供了调试连接问题的技巧](http://www.oracle.com/technetwork/java/javamail/faq/index.html#condebug)。

# javascript - 通过特定应用程序获取曲目时，标签过滤似乎不起作用

> ID：14849280
> 
> 赞同：2
> 
> 时间：2013-02-13T08:26:18.037
> 
> 标签：javascript, api, soundcloud

我正在尝试按特定应用程序获取曲目，同时按某个标签进行过滤。无论标签参数如何，似乎都会返回应用程序中的所有曲目。如果我查询所有曲目（即不指定应用程序 ID），则标签过滤按预期工作。这是我正在运行的代码：

```
var appId = 12345; // Real app id in the actual code.
SC.get('/apps/' + appId + '/tracks', {
    limit: 10,
    filter: 'public,streamable',
    tags: 'Acid House'
} 
```

这是一个 API 错误，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:58:10.073

过滤标签是`/tracks`端点的一项功能。如果 API 参考或 SDK 文档中没有立即明确，我很抱歉。

# c#-4.0 - 使用 DataAnnotatoins 的 mvc 4 验证

> ID：14849283
> 
> 赞同：0
> 
> 时间：2013-02-13T08:26:20.920
> 
> 标签：c#-4.0, asp.net-mvc-4

我正在练习 MVC4 验证并得到了一些基本的想法。但我不确定我下面的代码中的错误消息来自哪里以及如何**覆盖该消息**

我的模型：

```
[Required(ErrorMessage = "Contact number field is required.")]
        public int ContactNumber { get; set; } 
```

当我把田野留空时

> 联系电话字段为必填项

但是当我输入任何字符串并提交时

> 值“我键入的字符串”对 ContactNumber 无效

如何覆盖我的错误信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:36:04.387

将此验证添加到与有效数字匹配的属性中。这样你就可以覆盖它。

```
[Required(ErrorMessage = "Contact number field is required.")]
[RegularExpression(@"[0-9]*\.?[0-9]+", ErrorMessage = "Contact number must be a Number.")]
public int ContactNumber { get; set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:47:23.220

您添加的错误消息位于“必需”属性中，因此仅在“必需”检查失败时才使用它，即。当它留空时。如果您想要在它不是数字时的特定消息，那么您需要添加一个属性来检查它，并给它一个自定义错误消息。正则表达式应该这样做。作为一个很好的副作用，您还可以借此机会在此处进行一些更详细的检查，例如确保它实际上是具有正确位数和内容的电话号码格式，而不仅仅是检查该值是否为数字。

# python - Pygame 粒子效果

> ID：14849284
> 
> 赞同：2
> 
> 时间：2013-02-13T08:26:23.317
> 
> 标签：python, recursion, pygame, effects, particles

所以我有这个产生向上移动的圆圈的迷你粒子效果。我想让它看起来像烟雾。不过我有很多问题。

1.  首先，我想让它递归，这样当粒子到达顶部时，它会返回到原来的位置并重新开始，我所拥有的工作有点但不完全。
2.  另一件事是我不觉得它真的看起来像烟雾，任何人都可以建议进行更改以使其看起来更好吗？
3.  另外我想将它添加到我的游戏中，我将如何使我的游戏可以调用它，这样我就可以调用粒子并给它一个位置，它就会出现在那里。任何人都可以帮忙吗？

**我的代码**

```
import pygame,random
from pygame.locals import *

xmax = 1000    #width of window
ymax = 600     #height of window

class Particle():
    def __init__(self, x, y, dx, dy, col):
        self.x = x
        self.y = y
        self.col = col
        self.ry = y
        self.rx = x
        self.dx = dx
        self.dy = dy

    def move(self):
        if self.y >= 10:
            if self.dy < 0:
                self.dy = -self.dy

        self.ry -= self.dy
        self.y = int(self.ry + 0.5)

        self.dy -= .1
        if self.y < 1:
            self.y += 500

def main():
    pygame.init()
    screen = pygame.display.set_mode((xmax,ymax))
    white = (255, 255, 255)
    black = (0,0,0)
    grey = (128,128,128)

    particles = []
    for part in range(25):
        if part % 2 > 0: col = black
        else: col = grey
        particles.append( Particle(random.randint(500, 530), random.randint(0, 500), 0, 0, col))

    exitflag = False
    while not exitflag:
        for event in pygame.event.get():
            if event.type == QUIT:
                exitflag = True
            elif event.type == KEYDOWN:
                if event.key == K_ESCAPE:
                    exitflag = True

        screen.fill(white)
        for p in particles:
            p.move()
            pygame.draw.circle(screen, p.col, (p.x, p.y), 8)

        pygame.display.flip()
    pygame.quit()

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T20:24:20.287

我对您的代码进行了一些重大修改。首先，我清理了你的课很多。让我们从参数和`__init__`函数开始。

首先，粒子不会下降 500 来重置，而是会转到设置为起点的位置。它开始的位置现在是在`__init__`函数中随机选择的，而不是在游戏中。我也摆脱了一些不必要的争论。

在`move`你的类的功能上，我简化了不少。为了让粒子检测它是否应该重置，它只是查看它是否高于 0。上升只是 y 简单地减少 1。我添加的一个变化是 x 随机变化并向右移动走了。这将使烟雾看起来更好/更逼真。

我没有对您的其余代码进行太多更改。我改变了你对`Particle`班级的要求以适应新的论点。我制作了更多的粒子，再次用于视觉效果。我还大大减小了为（你能猜到吗？）视觉效果绘制的圆圈的大小。我还添加了一个时钟，以防止粒子以超音速运行。

这是最终的代码。我希望你喜欢它。

```
import pygame,random
from pygame.locals import *

xmax = 1000    #width of window
ymax = 600     #height of window

class Particle():
    def __init__(self, startx, starty, col):
        self.x = startx
        self.y = random.randint(0, starty)
        self.col = col
        self.sx = startx
        self.sy = starty

    def move(self):
        if self.y < 0:
            self.x=self.sx
            self.y=self.sy

        else:
            self.y-=1

        self.x+=random.randint(-2, 2)

def main():
    pygame.init()
    screen = pygame.display.set_mode((xmax,ymax))
    white = (255, 255, 255)
    black = (0,0,0)
    grey = (128,128,128)

    clock=pygame.time.Clock()

    particles = []
    for part in range(300):
        if part % 2 > 0: col = black
        else: col = grey
        particles.append( Particle(515, 500, col) )

    exitflag = False
    while not exitflag:
        for event in pygame.event.get():
            if event.type == QUIT:
                exitflag = True
            elif event.type == KEYDOWN:
                if event.key == K_ESCAPE:
                    exitflag = True

        screen.fill(white)
        for p in particles:
            p.move()
            pygame.draw.circle(screen, p.col, (p.x, p.y), 2)

        pygame.display.flip()
        clock.tick(50)
    pygame.quit()

if __name__ == "__main__":
    main() 
```

# 更新

为了将粒子添加到您的代码中，只需执行您在上面的代码中所做的操作。它工作正常。如果你想做一些事情来显示烟雾开始，只需在你的论点中暂停时间并抑制烟雾的移动，直到这段时间过去。添加的新类：

```
class Particle():
    def __init__(self, startx, starty, col, pause):
        self.x = startx
        self.y = starty
        self.col = col
        self.sx = startx
        self.sy = starty
        self.pause = pause

    def move(self):
        if self.pause==0:
            if self.y < 0:
                self.x=self.sx
                self.y=self.sy

            else:
                self.y-=1

            self.x+=random.randint(-2, 2)

        else:
            self.pause-=1 
```

创建新粒子所需的代码：

```
for part in range(1, A):
    if part % 2 > 0: col = black
    else: col = grey
    particles.append( Particle(515, B, col, round(B*part/A)) ) 
```

A 和 B 是变量（我建议 A 约为 300，B 将是 Y 值）

新代码将使粒子在起始位置产生，并不断上升而没有中断。希望你喜欢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T17:45:26.703

我对您的代码进行了很多更改，尤其是在`Particle`课堂上。
尽管这段代码中有一些令人费解的地方，但它会比你当前的代码更灵活。

在这里，
我已经相当有文字地重写了你`Particle`的课程。
除了更改`__init__`, 来获取许多参数（准确地说是 7 个）之外，
我还使用了三角函数和粒子`math`模块`move`，使其更易于管理（如果你擅长数学！）。而且我还在 , 中添加了`bounce`和`draw`方法`Particle`，并使代码更具可读性。
就像[@PygameNerd](https://stackoverflow.com/a/14862423/1931274)一样，我添加了一个时钟，用于限制最大 fps。我没有更改任何事件处理，但在循环中使用了`bounce`and函数。`draw``for p in particles:`

```
import pygame, random, math

def radians(degrees):
    return degrees*math.pi/180

class Particle:
    def __init__(self, (x, y), radius, speed, angle, colour, surface):
        self.x = x
        self.y = y
        self.speed = speed
        self.angle = angle
        self.radius = 3
        self.surface = surface
        self.colour = colour
        self.rect = pygame.draw.circle(surface,(255,255,0),
                           (int(round(x,0)),
                            int(round(y,0))),
                           self.radius)
    def move(self):
        """ Update speed and position based on speed, angle """
        # for constant change in position values.
        self.x += math.sin(self.angle) * self.speed
        self.y -= math.cos(self.angle) * self.speed
        # pygame.rect likes int arguments for x and y
        self.rect.x = int(round(self.x))
        self.rect.y = int(round(self.y))

    def draw(self):
        """ Draw the particle on screen"""
        pygame.draw.circle(self.surface,self.colour,self.rect.center,self.radius)

    def bounce(self):
        """ Tests whether a particle has hit the boundary of the environment """

        if self.x > self.surface.get_width() - self.radius: # right
            self.x = 2*(self.surface.get_width() - self.radius) - self.x
            self.angle = - self.angle

        elif self.x < self.radius: # left
            self.x = 2*self.radius - self.x
            self.angle = - self.angle            

        if self.y > self.surface.get_height() - self.radius: # bottom
            self.y = 2*(self.surface.get_height() - self.radius) - self.y
            self.angle = math.pi - self.angle

        elif self.y < self.radius: # top
            self.y = 2*self.radius - self.y
            self.angle = math.pi - self.angle

def main():
    xmax = 640    #width of window
    ymax = 480     #height of window
    white = (255, 255, 255)
    black = (0,0,0)
    grey = (128,128,128)

    pygame.init()
    screen = pygame.display.set_mode((xmax,ymax))
    clock = pygame.time.Clock()

    particles = []

    for i in range(1000):
        if i % 2:
            colour = black
        else:
            colour = grey
        # for readability
        x = random.randint(0, xmax)
        y = random.randint(0, ymax)
        speed = random.randint(0,20)*0.1
        angle = random.randint(0,360)
        radius = 3
        particles.append( Particle((x, y), radius, speed, angle, colour, screen) )

    done = False
    while not done:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                done = True
                break
            elif event.type == pygame.KEYDOWN:
                if event.key == pygame.K_ESCAPE:
                    done = True
                    break
        if done:
            break

        screen.fill(white)
        for p in particles:
            p.move()
            p.bounce()
            p.draw()

        clock.tick(40)

        pygame.display.flip()
    pygame.quit()

if __name__ == "__main__":
    main() 
```

# emacs - brew安装emacs错误

> ID：14849291
> 
> 赞同：1
> 
> 时间：2013-02-13T08:26:57.073
> 
> 标签：emacs, installation, homebrew

通过自制软件安装 emacs 时遇到问题。任何想法都值得赞赏 - 这就是我得到的：

```
==> Downloading http://ftpmirror.gnu.org/emacs/emacs-24.2.tar.bz2
Already downloaded: /Library/Caches/Homebrew/emacs-24.2.tar.bz2
==> Downloading patches
######################################################################## 100.0%
==> Patching
patching file lisp/term/ns-win.el
Hunk #1 succeeded at 931 with fuzz 1 (offset -332 lines).
patching file src/nsfns.m
Hunk #1 succeeded at 2681 (offset 92 lines).
Hunk #2 succeeded at 2794 (offset 90 lines).
patching file src/nsterm.h
Hunk #1 succeeded at 116 (offset 21 lines).
patching file src/nsterm.m
Hunk #1 succeeded at 797 (offset 111 lines).
Hunk #2 succeeded at 1281 (offset 143 lines).
Hunk #3 succeeded at 1337 (offset 127 lines).
Hunk #4 succeeded at 6088 with fuzz 2 (offset 466 lines).
Hunk #5 succeeded at 6196 (offset 463 lines).
==> ./configure --prefix=/usr/local/Cellar/emacs/24.2 --without-dbus --enable-lo
checking whether make sets $(MAKE)... ./configure: /usr/local/Library/ENV/4.3/sed:     /bin/bash^M: bad interpreter: No such file or directory
no
configure: error: cannot run /bin/sh build-aux/config.sub
./configure: /usr/local/Library/ENV/4.3/sed: /bin/bash^M: bad interpreter: No such file or     directory
./configure: /usr/local/Library/ENV/4.3/sed: /bin/bash^M: bad interpreter: No such file or directory

READ THIS: https://github.com/mxcl/homebrew/wiki/troubleshooting 
```

这是 brew doctor 的输出：

警告：/usr/bin 出现在 /usr/local/bin 之前 这意味着将使用系统提供的程序而不是 Homebrew 提供的程序。两条路径都存在以下工具：

aclocal autoconf autoheader autom4te automake autoreconf autoscan autoupdate clusterdb createdb createlang createuser dropdb droplang dropuser ecpg ifnames pg_config pg_dump pg_dumpall pg_restore pg_upgrade psql reindexdb Vacuumdb

考虑修改您的 PATH，以便 /usr/local/bin 在您的 PATH 中出现在 /usr/bin 之前。警告：您的 Homebrew 已过时您至少 24 小时没有更新，这在 brewland 中已经很长时间了！

# python - 根据列表中项目内的部分字符串查找列表中的所有索引位置

> ID：14849293
> 
> 赞同：95
> 
> 时间：2013-02-13T08:27:02.613
> 
> 标签：python, list, substring, enumerate

```
mylist = ["aa123", "bb2322", "aa354", "cc332", "ab334", "333aa"] 
```

我需要所有包含`'aa'`. 我在`enumerate()`与部分字符串匹配结合时遇到问题。我什至不确定我是否应该使用枚举。

我只需要返回索引位置：0,2,5

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2013-02-13T08:29:31.360

您可以[`enumerate`](https://docs.python.org/3/library/functions.html#enumerate)在[list-comprehension](https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions)中使用：

```
indices = [i for i, s in enumerate(mylist) if 'aa' in s] 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-02-13T08:28:48.113

您的使用想法`enumerate()`是正确的。

```
indices = []
for i, elem in enumerate(mylist):
    if 'aa' in elem:
        indices.append(i) 
```

或者，作为列表理解：

```
indices = [i for i, elem in enumerate(mylist) if 'aa' in elem] 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-02-13T08:30:37.193

没有`enumerate()`：

```
>>> mylist = ["aa123", "bb2322", "aa354", "cc332", "ab334", "333aa"]
>>> l = [mylist.index(i) for i in mylist if 'aa' in i]
>>> l
[0, 2, 5] 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2019-03-07T19:49:21.940

```
spell_list = ["Tuesday", "Wednesday", "February", "November", "Annual", "Calendar", "Solstice"]

index=spell_list.index("Annual")
print(index) 
```

# javascript - Ext.Msg.confirm 内部函数返回值

> ID：14849299
> 
> 赞同：3
> 
> 时间：2013-02-13T08:27:23.303
> 
> 标签：javascript, extjs

我需要创建一个函数，当用户单击是或否时返回（布尔）结果。我正在使用一个`Ext.Msg.confirm`. 在我的函数下方（测试用例）。

```
function returnAnswer() {

    Ext.Msg.confirm('HardCoded', 'Do you want hard-coded strings in your application?', 
    function(btn) {
        if (btn === 'yes') {
            return true;
        } else {
            return false;
        }
    });
} 
```

在上面的函数中，“回调”函数返回一个结果，而不是我的实际函数。
如何让`returnAnswer`函数返回结果？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T08:30:16.837

`returnAnswer`应该传递一个回调：

```
function returnAnswer(callback) {
    Ext.Msg.confirm('HardCoded', 'Do you want hard-coded strings in your application?', 
    function(btn) {
       callback.call(this, btn === 'yes');
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:30:10.217

您可以使用`window.confirm()`它返回布尔值。

# php - 使用codeigniter将字符串日期时间插入mysql数据库

> ID：14849303
> 
> 赞同：4
> 
> 时间：2013-02-13T08:27:40.220
> 
> 标签：php, mysql, codeigniter, datetime

我有以下 MySQL 表

```
EventId     ObjectKey   Title           Description     When        Duration        Where           Status
INT         CHAR(36)    VARCHAR(500)    VARCHAR(8000)   DATETIME    VARCHAR(500)    VARCHAR(500)    TINYINT 
```

我的 PHP 数组是

```
$data = array(
    'Title' => $title,
    'Description' => $description,
    'When' => $when,
    'Duration' => $duration,
    'Where' => $where
); 
```

变量`$when`包含`02/21/2013`. 当我尝试使用 CodeIgniter 插入表时

```
public function insert_event($guid, $data)
{
    $CI = & get_instance();
    $CI->load->database('default');
    $CI->db->set($data);
    $CI->db->set('ObjectKey', $guid);
    $CI->db->set('Status', 1);
    $vari = $CI->db->insert('Events');
    return $vari;
} 
```

一切都正确插入，除了`date`. 你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-13T08:29:44.597

对日期使用正确的 MYSQL 格式`YYYY-MM-DD`。例如在你的代码中改变这个：

```
$data = array(
    'Title' => $title,
    'Description' => $description,
    'When' => date('Y-m-d', strtotime($when)),
    'Duration' => $duration,
    'Where' => $where
); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T08:28:44.953

mySQL 中的日期是`YYYY-MM-DD`

您正在插入日期`MM/DD/YYYY`

所以试试这个：

```
$data = array(
    'Title' => $title,
    'Description' => $description,
    'When' => date('Y-m-d', strtotime($when)),
    'Duration' => $duration,
    'Where' => $where
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-29T08:52:08.333

在mysql中以任何格式存储字符串日期的最简单方法

```
$srcFormat = "m/d/Y"; //convert string to php date
$destFormat = "Y-m-d" //convert php date to mysql date string

$data = array(
  'Title' => $title,
  'Description' => $description,
  'When' => DateTime::createFromFormat($srcFormat, $when)->format($destFormat),
  'Duration' => $duration,
  'Where' => $where
); 
```

# sql - 在第二个日期范围内从第一个日期开始连接两个表

> ID：14849304
> 
> 赞同：5
> 
> 时间：2013-02-13T08:27:52.207
> 
> 标签：sql, sql-server, date, join, intervals

我有两个如下表（日期格式：yyyy-MM-dd）：
1）Table1 - EMPLOYEE_OVERTIMES（别名：EO）

```
EMPLOYEE_ID | OVERTIME_DATE
------------------------------------------------
1           | 2012-04-01
2           | 2012-08-14
3           | 2012-07-22
4           | 2012-10-30
5           | 2012-06-07 
```

2) 表 2 - EMPLOYEE_HOLIDAYS（别名：EH）

```
EMPLOYEE_ID | START_DATE | END_DATE   |
-----------------------------------------
1           | 2012-03-28 | 2012-04-10
2           | 2012-01-14 | 2012-01-30
3           | 2012-07-15 | 2012-07-25
4           | 2012-10-10 | 2012-10-13
5           | 2012-06-01 | 2012-06-07 
```

表 EMPLOYEE_OVERTIMES 和 EMPLOYEE_HOLIDAYS 是从其他表连接的。我想查找符合以下条件的所有记录：EH.START_DATE <= EO.OVERTIME_DATE <= EH.END_DATE

3) 结果表

```
EMPLOYEE_ID | START_DATE | END_DATE   | OVERTIME_DATE
-------------------------------------------------------
1           | 2012-03-28 | 2012-04-10 | 2012-04-01
3           | 2012-07-15 | 2012-07-25 | 2012-07-22
5           | 2012-06-01 | 2012-06-07 | 2012-06-07 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:33:50.080

[SQLFiddle 演示](http://sqlfiddle.com/#!6/6887d/1)

```
SELECT EH.*, EO.OVERTIME_DATE 
FROM EMPLOYEE_HOLIDAYS EH
JOIN EMPLOYEE_OVERTIMES EO
ON (EO.EMPLOYEE_ID = EH.EMPLOYEE_ID) AND 
   (EO.OVERTIME_DATE BETWEEN EH.START_DATE AND EH.END_DATE) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:34:40.173

这行得通吗？

```
SELECT
  EO.Employee_ID,
  EH.Start_Date,
  EH.End_Date,
  EO.OverTime_Date
FROM
  EMPLOYEE_OVERTIMES EO INNER JOIN
  EMPLOYEE_HOLIDAYS EH ON EO.Employee_ID = EH.Employee_ID
WHERE
  EO.Overtime_Date BETWEEN EH.Start_date and EH.End_Date 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T08:37:25.033

您可以使用简单的 INNER JOIN

```
;WITH EO AS 
(
    SELECT 1 AS EID, '2012-04-01' AS OD
    UNION ALL
    SELECT 2, '2012-08-14'
    UNION ALL
    SELECT 3, '2012-07-22'
    UNION ALL
    SELECT 4, '2012-10-30'
    UNION ALL
    SELECT 5, '2012-06-07'
), EH AS
(
    SELECT 1 AS EID, '2012-03-28' AS SD, '2012-04-10' AS ED
    UNION ALL
    SELECT 2, '2012-01-14', '2012-01-30'
    UNION ALL
    SELECT 3, '2012-07-15', '2012-07-25'
    UNION ALL
    SELECT 4, '2012-10-10', '2012-10-13'
    UNION ALL
    SELECT 5, '2012-06-01', '2012-06-07'
)

SELECT EH.EID, EH.SD, EH.ED, EO.OD 
FROM EO
INNER JOIN EH
    ON EH.SD <= EO.OD AND EO.OD <= EH.ED 
```

# haskell - SDL 中的全屏

> ID：14849305
> 
> 赞同：4
> 
> 时间：2013-02-13T08:28:07.790
> 
> 标签：haskell, sdl, fullscreen

我正在用 SDL 在 Haskell 中编写程序。当我这样做时：

```
screen <- trySetVideoMode width height depth [HWSurface,OpenGL] 
```

程序运行正确。现在，如果我这样做：

```
screen <- trySetVideoMode width height depth [HWSurface,OpenGL,Fullscreen] 
```

该程序以黑色全屏模式开始，然后以窗口形式返回并继续进行。我补充说应用程序中使用的分辨率是 1920x1080——这也是我的屏幕分辨率。

有谁知道为什么？我怎样才能让它全屏？

# mysql - Mysql将不带空格的字符串与带空格的db-field进行比较

> ID：14849309
> 
> 赞同：0
> 
> 时间：2013-02-13T08:28:28.480
> 
> 标签：mysql, ruby, space

我有几个字段必须与 mysql 字段进行比较：例如：

> 0092S40050

但在分贝我有

> 0 092 S40 050

它们是相等的，但是有空格，没有它们……但是如何在 ruby​​ 上使用 mysql 查询呢？

我的问题有点像： [Mysql format string when like compare](https://stackoverflow.com/questions/14840754/mysql-format-string-when-like-compare)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:31:57.370

如果我正确理解你的问题，你可以在 MySql 中做这样的事情

```
SELECT * FROM mytable
WHERE REPLACE(mycolumn, ' ', '') = '0092S40050' 
```

或者

```
SELECT * FROM mytable
WHERE REPLACE(mycolumn, ' ', '') LIKE '____S50%' 
```

这是[sqlfidlle](http://sqlfiddle.com/#!2/4d460/4)

# javascript - 测量服务器响应时间（客户端）

> ID：14849314
> 
> 赞同：6
> 
> 时间：2013-02-13T08:28:52.590
> 
> 标签：javascript, jquery, client-side, httpresponse, response-time

我想实现一个脚本，该脚本将使用常规浏览器从客户端测量我的服务器（=远程 url）的响应时间，而无需任何额外的插件（Java 等）。

我只看**网络速度**（响应时间），**而不是页面加载速度**。

你会建议我测量什么？它必须在 tcp/ip 上运行，而不是像 ICMP (ping) 这样的其他任何东西。

您将如何绕过客户端的实施？我更喜欢使用 JavaScript (JQuery)。

* * *

**更新：**因为我需要一个跨域检查，ajax 调用似乎不是一个选项

此外，ajax 方法似乎根本不精确。与来自 FireBug 的信息相比，测试机器上的结果似乎有大约 50 毫秒的开销（它几乎是一个恒定值，无论域是什么 - 我猜这是两者之间的处理时间）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T08:35:54.353

您只需要对请求进行计时：

```
var sendDate = (new Date()).getTime();

$.ajax({
    //type: "GET", //with response body
    type: "HEAD", //only headers
    url: "/someurl.htm",
    success: function(){

        var receiveDate = (new Date()).getTime();

        var responseTimeMs = receiveDate - sendDate;

    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:35:46.620

创建一个始终在 mysite.net/speedtest 之类的 url 返回空的 200 OK 响应的资源。然后是这样的：

```
var startTime = (new Date()).getTime(),
    endTime;

$.ajax({
    type:'GET',
    url: 'http://mysite.net/speedtest',
    async: false,
    success : function() {
        endTime = (new Date()).getTime();
    }
});

alert('Took ' + (endTime - startTime) + 'ms'); 
```

这将为您提供向服务器发送请求所需的时间，以及服务器加载响应请求所需的最少资源集所需的时间。

新：您的问题现在与您添加的附加信息不一致。您希望客户端对您无法控制的 URL 进行 ping - 这与您最初要求的完全不同的事情，即从*您的*服务器获取响应时间。如果您试图让客户端对您的服务器执行 ping 操作，那么 ajax 调用就可以解决问题。如果您试图让他们的 ping 到其他服务器，那么我对您的目标有点困惑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T08:40:09.903

```
var startTime = (new Date()).getTime(),
    endTime;
$.ajax({
type: "GET",
url: "test.html",
dataType: "html",
success:function(data){
endTime = (new Date()).getTime();
}
}); 
```

现在拿差价。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T09:08:50.297

你可以很容易地做到这一点。

```
var t = Date.now();
var t2;
$.ajax({
    url:'page',
    success:function(){
       t2 = Date.now();
       console.log(t2-t);//the time needed to do the request
    }
}); 
```

要请求的页面应该是空的，以模拟额外的加载时间。

# objective-c - 创建一个新的开发配置文件，未知的团队

> ID：14849315
> 
> 赞同：1
> 
> 时间：2013-02-13T08:29:11.740
> 
> 标签：objective-c, xcode4.5, ios-provisioning

我有一个新的 iPhone 5，我想添加到开发列表中。

因此，我将其添加为 Xcode 的“开发”，并从 IOS Provisioning Portal 创建一个新的开发配置文件。

证书已创建并与设备关联：

![在此处输入图像描述](../Images/5017cf892ee11810b8b14b7794dfd88a.png)

此开发配置文件适用于我公司的所有 ios 设备。

我像往常一样下载配置文件，并安装在 XCode 中，但团队未知：

我该如何解决这个问题？ ![在此处输入图像描述](../Images/5da4be942da0acba8a81fa5ad4cea5ad.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:55:00.093

你必须使用刷新你的`provision profiles`：

打开`XCode`并导航到`organizer`（右上角按钮）。
然后转到`provision profiles`并单击`refresh`。

# sql - 如何在Oracle中获取连续的记录对

> ID：14849316
> 
> 赞同：1
> 
> 时间：2013-02-13T08:29:14.340
> 
> 标签：sql, oracle, plsql, analytics, grouping

有人可以给我一个关于棘手的 SQL 问题的线索吗？我搜索了类似的问题，最接近的方法似乎是这样，但这不是我的问题的解决方案： [Oracle - grouping between pairs of records](https://stackoverflow.com/questions/2374084/oracle-grouping-between-pairs-of-records)

我知道这可以通过 PL/SQL 过程来实现，但在这种情况下（Oracle）SQL 是必要的。我正在寻找一个 Oracle SQL SELECT 来隔离普通表的 ID = 4 和 5 的特殊记录。该表仅包含 2 列：ID 和 DATE 它包含如下数据：

```
ID  DATE          REMARK (this row is not part of table!)
---------------   ------------------------------------------
2   01-JAN-2013     
4   02-JAN-2013   A  
7   03-JAN-2013  
5   05-JAN-2013   A  
6   07-JAN-2013  
4   08-JAN-2013   B  
1   11-JAN-2013  
5   12-JAN-2013   B  

... more follows 
```

如果 ID 4 和 5 及时跟随，则它们属于同一组。因此，我标记为“A”的行属于一起，“B”也是如此。两个 As 和两个 B 属于一起，因为它们的日期是连续的。现在我想要得到的是一个返回 4 列的 SELECT，即一行中的两行 A，以及一行中的行 B。

所以输出应该是这样的：

```
ID4 DATE4        ID5 DATE5           Comment (no column, just comment)  
---------------------------------    ------------------------------------
4   02-JAN-2013  5   05-JAN-2013     First set of 4 and 5  
4   08-JAN-2013  5   12-JAN-2013     Second set of 4 and 5  

...more follows 
```

（当然 ID4 和 ID5 列已经过时，仅用于演示目的）

我希望我让自己可以理解？有人有想法吗？

* * *

更新：感谢您的想法和选择，很抱歉我的问题不够清楚。只应考虑成对的 4 和 5，并且只能按日期升序排列。对于上面的示例，Alex Pool 和 Florin Ghita 的解决方案很棒，谢谢！
4er 的日期必须小于或等于 5er 的日期。如果有一个 4er 或 5er 没有匹配的伙伴，它可以被忽略。

但这是另一个包含真实数据和陷阱的示例（解决方案在这里失败）：按时间顺序遍历数据，有 2 行，连续 5 行。

```
4    16.03.2012 17:49:28  A
5    10.05.2012 09:38:56  A1     Either A1 is possible
5    12.06.2012 07:51:03  A2     or A2 whichever is easier to code
4    12.06.2012 08:47:52  B
5    02.08.2012 11:27:43  B
4    03.08.2012 13:24:54  C
5    03.08.2012 14:14:07  C
4    04.08.2012 15:00:00      should be ignored, as there is no following 5er 
```

想要的输出：

```
4    16.03.2012 17:49:28    5    10.05.2012 09:38:56   (alternat.:  5  12.06.2012 07:51:03)
4    12.06.2012 08:47:52    5    02.08.2012 11:27:43  
4    03.08.2012 13:24:54    5    03.08.2012 14:14:07 
```

建议的 SELECTS 失败，因为他们不认为 4er 在时间上必须在 5er 之前。如果没有对应的伙伴，则忽略此行。我说得不够清楚，对不起。

非常感谢弗里德海姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:54:59.810

像其他评论者一样，我不完全确定我是否遵循，但如果您只想查看 ID 4 和 5 并希望按日期顺序匹配它们，您可以执行以下操作：

```
with t as (
    select id, dt, row_number() over (partition by id order by dt) as rn
    from t42
    where id in (4, 5)
)
select t4.id as id4, t4.dt as date4, t5.id as id5, t5.dt as date5,
    case t4.rn when 1 then 'First' when 2 then 'Second' when 3 then 'Third' end
        || ' set of 4 and 5' as "Comment"
from t t4
join t t5 on t5.rn = t4.rn
where t4.id = 4
and t5.id = 5
order by t4.rn;

       ID4 DATE4            ID5 DATE5     Comment             
---------- --------- ---------- --------- ---------------------
         4 02-JAN-13          5 05-JAN-13 First set of 4 and 5  
         4 08-JAN-13          5 12-JAN-13 Second set of 4 and 5 
```

我现在不确定您是否真的想要返回/显示“评论”......可能不会，这会稍微简化它。

* * *

对于修改后的要求：

```
with t as (
    select id, dt, lead(dt) over (partition by id order by dt) as next_dt
    from t42
    where id in (4, 5)
)
select t4.id as id4, t4.dt as date4, t5.id as id5, min(t5.dt) as date5
from t t4
join t t5 on t5.dt > t4.dt and (t4.next_dt is null or t5.dt <= t4.next_dt)
where t4.id = 4
and t5.id = 5
group by t4.id, t4.dt, t5.id
order by t4.dt;

       ID4 DATE4                        ID5 DATE5               
---------- --------------------- ---------- ---------------------
         4 16.03.2012 17:49:28            5 10.05.2012 09:38:56   
         4 12.06.2012 08:47:52            5 02.08.2012 11:27:43   
         4 03.08.2012 13:24:54            5 03.08.2012 14:14:07 
```

CTE 用于`LEAD`查看每个 ID 的下一个日期，这仅在 ID 为 4 时才真正相关；如果最后没有没有匹配项的额外 ID 4，则可以为 null。然后，连接只查找两个 ID 4 日期之间（或最后一个 ID 4 日期之后）的 ID 5 记录。如果您想在第一个结果中使用备用（稍后）ID 5 日期，只需使用`MAX`而不是`MIN`. （我不是 100% 关于`>`和`<=`匹配；我试图解释你所说的，但如果它不太正确，你可能需要调整它）。

* * *

要解决似乎是 9i 的错误（根据 MOS，可能已在 9.2.0.3 或 9.2.0.6 中修复，但完全取决于您遇到的错误）：

```
select t4.id as id4, t4.dt as date4, t5.id as id5, min(t5.dt) as date5
from (
    select id, dt, lead(dt) over (partition by id order by dt) as next_dt
    from t42
    where id = 4
) t4
join (select id, dt
    from t42
    where id = 5
) t5 on t5.dt > t4.dt and (t4.next_dt is null or t5.dt <= t4.next_dt)
group by t4.id, t4.dt, t5.id
order by t4.dt; 
```

不幸的是，我没有足够旧的版本来测试它。您不必使用`t5`子选择，您可以直接将主表加入到`t4`，但我认为这更清楚一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:53:31.863

你想要的很简单。只需根据 id 对您的记录进行排名。

```
with ranked_data

as (select 
       id, 
        date_col, 
       row_number() over (partition by id order by date_col) as rnk
   from your_table
   where id in (4, 5))

select t4.id as id4, t4.date_col as date4, t5.id as id5, t5.date_col as date5
from ranked_data t4
full outer join ranked_data t5 
  on (t4.rnk=t5.rnk and t4.id=4 and t5.id=5) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T09:00:14.840

没有使用分析的自加入是可能的：

```
SELECT distinct 
         first_value(id) over (partition by rk order by dt), 
         min(dt) over (partition by rk),
         last_value(id) over (partition by rk order by dt rows between unbounded preceding and unbounded following) id5 ,
         max(dt) over (partition by rk) 
FROM (
SELECT id, dt, dense_rank() over (partition by id order by dt) rk 
FROM t
where  id in (4, 5)
) 
```

这会找到对应于“第一个”日期的 id 值，因此如果 4 和 5 的日期顺序颠倒，那么您将 5 出现在“4”列中。目前尚不清楚这是否是您想要的。

# javascript - 似乎无法使用 socket.io 发出自定义事件

> ID：14849323
> 
> 赞同：1
> 
> 时间：2013-02-13T08:29:38.627
> 
> 标签：javascript, jquery, node.js, socket.io

好吧，伙计们，所以我坚持这一点，似乎无法弄清楚为什么它不起作用。我对使用 socket.io 还是比较陌生，希望有更多经验的人可以帮助我。我为“打字”添加了一个事件侦听器，因此当用户打字时，它会像打字一样将其广播到房间`user`......

在我的“bindSocketEvents”服务器端我有以下

```
//nickname is already set 
socket.emit('typing', { nick: nickname }); 
```

然后在我的“bindDOMEvents”函数中

```
socket.on('typing', function(data){
    $('<li>' + data.nick + ' is typing...</li>').appendTo('.chat-rooms ul li');
});
//dont mind what its appending to i am just trying to get it working 
```

我的事件似乎没有被发出，并且 socket.on 'typing' 永远不会被触发

# windows-8 - 我如何混淆一个monogame windows8 metro 应用程序？

> ID：14849328
> 
> 赞同：1
> 
> 时间：2013-02-13T08:29:52.093
> 
> 标签：windows-8, obfuscation, monogame

我有一个我开发并计划提交到 Windows 8 应用商店的 Windows 8 Metro 游戏（使用 Monogame），我希望对其进行混淆。我该怎么做？混淆会导致运行时错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T10:27:04.373

我们使用[加密混淆器](http://www.ssware.com/cryptoobfuscator/obfuscator-net.htm)。它有一个非常不错的 GUI、一个强大的支持团队，最重要的是 Visual Studio 集成和对混淆 Windows 8 应用商店应用程序的支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-12T08:18:20.923

你可以试试[Manco .NET Obfuscator](http://www.mancosoftware.com/licensing/index.htm)。4.5 版支持对 .NET Windows 8 应用商店应用程序进行混淆处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T10:20:03.460

检查[babel 混淆器](http://babelobfuscator.blogspot.pt/2012/10/babel-obfuscator-6000-released.html)。混淆器通常“只是”使您的代码不可读，单独它不会导致任何运行时异常，但如果发生一些异常（由于应用程序问题），您可能无法跟踪错误（因为一切都被混淆了）。

PS：谷歌是我们的朋友

# wpf - 所选项目未与所选项目同步 - WPF DataGrid

> ID：14849329
> 
> 赞同：2
> 
> 时间：2013-02-13T08:30:01.333
> 
> 标签：wpf, data-binding, datagrid

怎么可能`SelectedItem`是 null 并`SelectedItems`选择了一个项目？

这是选择更改事件的屏幕截图：

![在此处输入图像描述](../Images/dfdafebf45f5c27189600f2711f2c1a9.png)

我的数据网格：

```
 <DataGrid SelectionChanged="CustomCmdDg_SelectionChanged" SelectedItem="{Binding CurrentX,Mode=TwoWay}" DataContext="{Binding MyViewModel}" x:Name="CustomCmdDg"  ItemsSource="{Binding xList}" AutoGenerateColumns="False" GridLinesVisibility="Horizontal"> 
```

...在我的视图模型中：

`xList`= 类 x 的列表（可观察的集合）

```
 private x currentX;

    public x CurrentX
    {
        get { return currentX; }
        set
        {
            currentX = null;
            NotifyPropertyChanged("CurrentX");
        }
    } 
```

故意希望所选项目为空

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:14:18.300

如果将 currentitem 设置为 null，则应首先将其从集合中删除，然后它将从所选项目中消失：

```
Public ObservableCollection<x> xList

public x CurrentX
{
    get { return currentX; }
    set
    {
        xList.Remove(currentX)
        currentX = null;
        NotifyPropertyChanged("CurrentX");
    }
} 
```

您的可观察列表将自行更新

如果您需要能够操作`SelectedItems`集合，您还必须提供绑定并执行所需的代码

# java - 动态对象创建

> ID：14849339
> 
> 赞同：0
> 
> 时间：2013-02-13T08:30:32.903
> 
> 标签：java, object, dynamic

我想以动态方式创建一个对象，我使用以下代码：

```
// Object technical name is xxxx.objectname

String[] ObjectNameArray;   
ObjectNameArray = ObjectName.split(".");

// if the objectname is for exaple deleteme Java should intrpet the code
// as follows deleteme DeletebleObject = new deleteme(getContext());

ObjectNameArray[1] DeletebleObject = new ObjectNameArray[1](getContext()); 
```

这可能吗？以及如何做到这一点？

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:34:26.973

无论如何，您都需要编写类文件列表来创建动态对象。我要做的是创建一个 Map ，其中将类名作为键，将对象作为值。他们我调用地图并获取对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:37:34.773

1.  您的命名约定倒退了。
2.  不确定这是否是您的意思，但是您可以使用以下方法从其名称中获取类实例：

    `Class.forName("deleteMe").newInstance();`

假设你的类有一个空的构造函数。如果要使用参数化构造函数：

```
Class.forName("deleteMe").getConstructor(...).newInstance(...); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T08:39:56.943

我认为您可以在这里使用泛型...例如

```
 MyClass <T extends Object> 
```

然后，您可以使用通配符访问它们而无需关心它们的类型。

```
 MyClass<?> myClass; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T08:40:28.247

查看反射包和Class类。它们具有从现有类定义创建对象的方法。

```
Object o =  Class.forName(ObjectNameArray[1]).newInstance(); 
```

从[newInstance()](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#newInstance%28%29)

> 创建由此 Class 对象表示的类的新实例。该类被实例化为一个带有空参数列表的新表达式。如果尚未初始化该类，则将其初始化。请注意，此方法传播由 nullary 构造函数引发的任何异常，包括已检查的异常。使用此方法可以有效地绕过编译器执行的编译时异常检查。Constructor.newInstance 方法通过将构造函数抛出的任何异常包装在（已检查）InvocationTargetException 中来避免此问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T08:40:56.780

> 您可以使用工厂设计模式通过发送名称来创建不同类型的动态对象

参考链接[工厂设计模式](http://3.bp.blogspot.com/_sTrTj4nImJ8/TRh1lDMQfSI/AAAAAAAAAAc/6yW0pvAjbMI/s1600/factory1.jpeg)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-13T08:46:22.127

可能你应该看看Java“反射”机制并动态创建/调用你需要的对象/方法。请参见以下示例：

```
// - specifies which class (className) is to be loaded (e.g.: com.example.objectname)
Class<?> loca = Class.forName(className);
// - specifies method (methodName) to be used (e.g.: getContext)
// - assumes the method returns a "String" (String.class)
Method method = loca.getMethod(methodName, new Class[]{String.class});
// - creates a new instance of the class, i.e., an object
Object obj = loca.newInstance();
// - call the actual method in the function
String result = (String) method.invoke(obj, inputParameters); 
```

希望能帮助到你。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-13T08:48:52.207

通过java反射：

```
 String[] objectNameArray;   
    objectNameArray = objectName.split(".");

    try {
        Class<?> clazz = Class.forName(objectNameArray[1]);
        Object context = getContext();
        Constructor<?> constructor = clazz.getConstructor( context.getClass() );
        Object instance = constructor.newInstance( context );

    } catch( ClassNotFoundException e ) {
        e.printStackTrace();
    } catch( SecurityException e ) {
        e.printStackTrace();
    } catch( NoSuchMethodException e ) {
        e.printStackTrace();
    } catch( IllegalArgumentException e ) {
        e.printStackTrace();
    } catch( InstantiationException e ) {
        e.printStackTrace();
    } catch( IllegalAccessException e ) {
        e.printStackTrace();
    } catch( InvocationTargetException e ) {
        e.printStackTrace();
    } 
```

# php - 使用正则表达式时总是得到“未知修饰符”

> ID：14849346
> 
> 赞同：1
> 
> 时间：2013-02-13T08:31:05.447
> 
> 标签：php, regex, preg-match

我正在尝试使用`preg_match()`此页面中的第二个单行 RegEx：http: [//daringfireball.net/2010/07/improved_regex_for_matching_urls](http://daringfireball.net/2010/07/improved_regex_for_matching_urls)

```
(?i)\b((?:https?://|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’])) 
```

总是得到：

> ... 中的未知修饰符 '\'

谁能告诉我如何正确使用这个`preg_match()`正则表达式或者正则表达式不正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:34:48.320

你需要用分隔符包围你的正则表达式（在这种情况下，我建议`~`因为它没有在你的正则表达式中的任何地方使用）并使用模式修饰符（`~i`）而不是内联修饰符（`(?i)`）：

```
~\b((?:https?://|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))~i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:35:09.673

该功能`filter_var`可以更轻松地匹配电子邮件、ips、url，而无需使用正则表达式。

尝试使用这个：

```
if(filter_var($url, FILTER_VALIDATE_URL) {
    // match!
} 
```

所有过滤器列表： [http ://www.php.net/manual/en/filter.filters.php](http://www.php.net/manual/en/filter.filters.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T08:39:06.907

请参阅PHP 手册中的[分隔符部分：](http://www.php.net/manual/en/regexp.reference.delimiters.php)

> 使用 PCRE 函数时，**需要用分隔符将模式括起来**。定界符可以是任何非字母数字、非反斜杠、非空白字符。
> 
> 常用的分隔符是正斜杠 (/)、井号 (#) 和波浪号 (~)。

# sql - 将 SQL 调优向导与 sp_prepexec 语句一起使用

> ID：14849349
> 
> 赞同：3
> 
> 时间：2013-02-13T08:31:30.580
> 
> 标签：sql, sql-server-2008, odbc, database-tuning

我正在尝试使用 SQL 分析器和调优向导来调查我的 SQL 2008 R2 数据库中的索引使用情况。应用程序使用 ODBC 连接到数据库。数据库没有存储过程，所有数据都是使用 SQL 语句访问的。探查器将语句显示为

```
declare @p1 int
set @p1=10234
exec sp_prepexec @p1 output,N'@P1 varchar(max),@P2 varchar(max),@P3 int,@P4 int',
N'SELECT  p.PaymentID from Payment where DivisionCode = @P1 and [...],','DM','A',1,1
select @p1 
```

调优向导将分析数据并给出警告

```
49% of consumed workload has syntax errors. Check tuning log 
```

日志显示原因

> 事件不引用任何表。

或者

> [Microsoft][SQL Server Native Client 10.0][SQL Server]无效的对象名称“付款”。

我需要使用哪些设置来让调整向导了解 sp_prepexec 查询？我必须对跟踪文件进行哪些更改才能使其可供调整向导使用？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-10T17:52:13.073

我能够让我的工作！像这样简单地注释掉`set`语句：

```
declare @p1 int;
--set @p1=9
exec sp_prepexec @p1 output,N'@p0 bit,@p1 varchar(8000),@p2 bit',N'select blah from blah where @p0=1 and blah.LastName=@p1',@p0=0,@p1='Kumar'
select @p1 
```

# matlab - 多光谱图像的像素环

> ID：14849355
> 
> 赞同：1
> 
> 时间：2013-02-13T08:31:38.987
> 
> 标签：matlab

我有一张有 6 个波段的多光谱图像。

```
imagen1=imread('re_2008.tif')
size2=size(imagen1);
nrow= size2(1);
ncol= size2(2);
nband= size2(3); 
```

我想要做的是让每个波段的每个像素（在同一位置）都有它们的值，进行插值并使用位于其他波长的新值，替换它。如果我向您展示代码，也许您会更了解我。

```
imagen3_2 = zeros(nrow, ncol, nband);
var1= [1 2 3 4 5 6]'; %'

for row=1:nrow;
    for column=1:ncol;
        for band=1:nband;              
            v = imagen1(nrow(1),nband(2),:); v = v(:); 
            t= 0:100;

            interplan= interp1(var1, v, t,'cubic');
            y5 = interplan(5); % I get the value of the interpolation on this position
            y12 = interplan(12);
            y20 = interplan(20);
            y50 = interplan(50);
            y80 = interplan(80);
            y90 = interplan(90);

            imagen3_2(:,:,1)= (y5); % and I replace it
            imagen3_2(:,:,2)= (y12);
            imagen3_2(:,:,3)= (y20);
            imagen3_2(:,:,4)= (y50);
            imagen3_2(:,:,5)= (y80);
            imagen3_2(:,:,6)= (y90);
        end 
    end
end 
```

结果，我得到了相同的值，而不是每个像素。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:55:34.247

怎么样

```
imagen3_2 = zeros(nrow, ncol, nband);
var1= [1 2 3 4 5 6]'; %'

for row=1:nrow;
    for column=1:ncol;
            v = imagen1(row, column, :); v = v(:); 
            t= 0:100;

            interplan= interp1(var1, v, t,'cubic');
            y5 = interplan(5); % I get the value of the interpolation on this position
            y12 = interplan(12);
            y20 = interplan(20);
            y50 = interplan(50);
            y80 = interplan(80);
            y90 = interplan(90);

            imagen3_2(row,column,1)= (y5); % and I replace it
            imagen3_2(row,column,2)= (y12);
            imagen3_2(row,column,3)= (y20);
            imagen3_2(row,column,4)= (y50);
            imagen3_2(row,column,5)= (y80);
            imagen3_2(row,column,6)= (y90);
    end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T09:34:47.910

我看到 Shai 已经回答了您的问题，但是如果您对 variables 等不感兴趣`y5`，`y12`有一种方法可以使代码更紧凑且更易于维护：

```
imagen3_2 = zeros(nrow, ncol, nband);
var1= [1 2 3 4 5 6]'; %'

for row=1:nrow;
    for column=1:ncol;
            v = imagen1(row, column, :); v = v(:); 
            t= 0:100;

            interplan= interp1(var1, v, t,'cubic');

            y = [5 12 20 50 80 90];
            for i = 1:length(y)         
               imagen3_2(row,column, i)= interplan(y(i));% repace interpolation value
            end
    end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T10:11:44.977

为了提高效率，请尽量避免在 Matlab 中出现循环，您可以尝试以下操作：

```
x = [1 2 3 4 5 6];
y = imread('re_2008.tif');
y_size = size((y(:,:,1)));

xi = 0:100;
yi = zeros([y_size,numel(xi)]);

for i_pix=1:prod(y_size)
    [aux_x,aux_y] = ind2sub(y_size,i_pix);
    yi(aux_x,aux_y,:) = interp1(x,squeeze(y(aux_x,aux_y,:)),xi,'cubic');
end 
```

甚至像这样：

```
x = [1 2 3 4 5 6];
y = imread('re_2008.tif');
xi = 0:100;

yi = arrayfun(@(y1,y2,y3,y4,y5,y6) interp1(x,[y1,y2,y3,y4,y5,y6],xi,'cubic'), ...
y(:,:,1), y(:,:,2), y(:,:,3), y(:,:,4), y(:,:,5), y(:,:,6)) 
```

我无法检查代码，因此可能存在错误；但这只是提供有关其他类型实施的想法。

# c# - 如何确定调用方法和类名？

> ID：14849367
> 
> 赞同：42
> 
> 时间：2013-02-13T08:32:30.987
> 
> 标签：c#, .net, logging, reflection, .net-assembly

我目前正在使用内置的 TraceListener 开发一个应用程序日志库。这个库将在许多项目中使用，并且应该提供一个简单的界面，我只需要关心将要写入日志文件的内容，而不是如何写入。

通过使用反射命名空间，我可以找出当前调用日志函数的应用程序（检索执行程序集名称），但我还想要调用日志函数的函数和类的名称。

假设我有：

```
public static void LogInfo(string vLogText) {
   Trace.WriteLine(
        MethodInfo.GetCurrentMethod().Name
        + this.GetType().ToString() + vLogText);
   } 
```

当我从另一个项目（类：TestClass，方法：TestMethod）调用时

```
Tracer.LogInfo("log this!") 
```

我希望在日志中看到：

```
TestClass, TestMethod, log this! 
```

但相反我得到了

```
TracerClass, LogInfo, log this! 
```

如何获取父方法和类名？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-13T08:36:21.150

尝试做这样的事情：

```
var mth = new StackTrace().GetFrame(1).GetMethod();
var cls = mth.ReflectedType.Name;
// where 1 illustrates how deep into the stack to reflect. 
```

C# 5.0 中有更优雅的解决方案>，但是如果您使用的是较旧的框架，以上将有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T08:39:03.147

您可以只记录完整的堆栈跟踪，而不仅仅是使用`Environment.StackTrace`. 如果您想使用相同的日志记录结构来记录异常，这可能会对您有所帮助。

有关详细信息，请参阅[此 msdn 页面](http://msdn.microsoft.com/en-us/library/system.environment.stacktrace.aspx)。

# c++ - 验证 STACK_OF(X509) 中的证书链

> ID：14849369
> 
> 赞同：0
> 
> 时间：2013-02-13T08:32:37.333
> 
> 标签：c++, openssl, x509certificate, x509

所以我有一个证书链存储在 STACK_OF(X509) 中。这就是我所做的：

```
STACK_OF(X509) *chain = SSL_get_peer_cert_chain(ssl);

X509_STORE_CTX* newCert = X509_STORE_CTX_new();
if(newCert){
    X509_STORE_CTX_set_chain(newCert, chain);
    std::cout << X509_verify_cert(newCert) << std::endl;
}
std::cout << "ERROR : " << X509_STORE_CTX_get_error(newCert) << std::endl; 
```

问题是`X509_verify_cert(newCert)`返回 -1 意味着初始化`X509_STORE_CTX`没有正确关闭。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:42:13.730

我想，这与[使用 STACK_OF(X509)](https://stackoverflow.com/a/14848533/1741542)有关。

[您不应该只复制apps/verify.c](http://git.openssl.org/gitweb/?p=openssl.git;a=blob;f=apps/verify.c;h=893670ff41321317e7a057e0a8c3fd64cb7d048a;hb=46ebd9e3bb623d3c15ef2203038956f3f7213620)中的一半源代码。如果你看得更深，你会发现，除其他外，

```
 286         if(!X509_STORE_CTX_init(csc,ctx,x,uchain)) 
```

# .net - Visual Studio 将不必要的 XML doc 文件打包到 WP8 XAP 中

> ID：14849374
> 
> 赞同：8
> 
> 时间：2013-02-13T08:33:09.000
> 
> 标签：.net, visual-studio, visual-studio-2012, windows-phone-8, xap

如果您在 Visual Studio 中创建 Windows Phone 8 应用程序并使用从 nuget 或手动提供的 XML 文档文件引用任何库，Visual Studio 也会自动将这些 XML 文件打包到输出 XAP 中。

在我们的例子中，Visual Studio 的这种奇怪行为几乎将 XAP 的大小增加了两倍。（我们总共有 8Mb 的 xml 文档。）

WP7 应用项目不存在这样的问题。

如何通过强制 Visual Studio 不打包不必要的文档文件来减小 xap 文件的大小？

**2013 年 14 月 2 日更新：**

重现问题的步骤：

1.  使用 Visual Studio 创建 Windows Phone 8 应用项目
2.  使用 NuGet 包管理器参考“反应式扩展 - 主库”
3.  构建解决方案
4.  转到 Bin 文件夹并解压缩 XAP 存档

你会发现有很多不必要的 XML 文档文件，比如“System.Reactive.Core.xml”</p>

我相信这是安全问题，因为如果您为您的项目（或解决方案中的其他项目）启用 XML 文档生成，这些 XML 文档也将被打包到 XAP 中——当任何人都可能阅读您的代码的注释时，这是非常不可取的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T13:56:27.257

**更新于 20/02/2013**

正如@A-student 在评论中指出的那样，我之前的解决方案会强制您在解决方案的每个项目中添加 MSBuild 内容。

这个只需要你在实际有 XAP/APPX 文件输出的项目上输入它：

```
<PropertyGroup>
  <FilesToXapDependsOn>$(FilesToXapDependsOn);AfterFilesToXapDependsOn</FilesToXapDependsOn>
</PropertyGroup>
<Target Name="AfterFilesToXapDependsOn">
  <ItemGroup>
    <FilteredPackagingOutputs Remove="@(FilteredPackagingOutputs)" Condition="'%(FilteredPackagingOutputs.OutputGroup)' == 'CopyLocalFilesOutputGroup' AND '%(FilteredPackagingOutputs.Extension)' == '.xml'" />
  </ItemGroup>
</Target> 
```

这有点像 hack，应该小心使用（现在不确定这可能实际上有什么影响），但现在似乎完美地完成了这项工作！

# asp.net - CheckBox 仅在 Check 时导致验证，在 Uncheck 时不会导致验证

> ID：14849382
> 
> 赞同：1
> 
> 时间：2013-02-13T08:33:36.350
> 
> 标签：asp.net, checkbox, webforms, postback, validation

我在我的 ASP.NET WebForms 页面上观察到一个非常奇怪的行为。我有一些输入控件，其中分配了一个或多个验证器。

`TextBox`输入控件的简化示例：

```
<asp:TextBox ID="TextBoxX" runat="server" 
CausesValidation="True"></asp:TextBox>

<asp:RequiredFieldValidator ID="V1" runat="server" 
ControlToValidate="TextBoxX"
ErrorMessage="blah blah"
EnableViewState="False" />

<asp:RangeValidator ID="V2" Type="Integer" runat="server"
ControlToValidate="TextBoxX" 
ErrorMessage="blah blah"
MinimumValue="0" MaximumValue="9999" 
EnableViewState="False" />

<asp:CustomValidator ID="V3" runat="server"
ErrorMessage="blah blah"
OnServerValidate="MyCustomValidateMethod" 
EnableViewState="False" 
EnableClientScript="False" /> 
```

EnableViewState 有意设置为 false 以保持低网络负载。V3 是一个令人感兴趣的。在服务器上，我的自定义方法将根据值的合理性进行验证。

```
protected void MyCustomValidateMethod(object source, ServerValidateEventArgs args)
{//...} 
```

到目前为止，一切都按预期工作。但我也有一个复选框，允许用户在显示警告后明确覆盖合理性检查。

```
<asp:CheckBox ID="CheckBoxOverride" runat="server" Text="You can override here!"
AutoPostBack="True" 
CausesValidation="True"  /> 
```

按预期检查/取消检查`CheckBox`导致回发的原因，**但验证器（尤其是“V3”）仅在复选框被选中时被调用，而不是在它被取消选中时被调用！**

是什么导致了这种奇怪的行为以及如何解决它？

以下是更多信息：

*   我正在使用 .NET 3.5。
*   如果重要的话，这里的全部内容都在一个 UpdatePanel 中。
*   我可以显式调用`Page.Validate();`回发，但这对我来说似乎很脏，并且当复选框被选中时，验证器会被调用两次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:33:01.180

由于似乎没有解决方案，我帮助自己解决了一个问题： CheckBox 将不再导致验证，但会触发更改的回发：

```
<asp:CheckBox ID="CheckBoxOverride" runat="server" Text="You can override here!"
AutoPostBack="True"    
oncheckedchanged="Override_CheckedChanged" /> 
```

然后，在更改处理程序中，调用验证：

```
protected void Override_CheckedChanged(object sender, EventArgs e)    {
        Page.Validate();
} 
```

这现在按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:51:30.817

您需要设置`ValidateEmptyText`为`true`.

你错过了一个`ControlToValidate`吗`CustomValidator`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T08:59:04.037

您是否尝试过将控件组合在一起？在他们身上放置一个 ValidationGroup。

# c# - 将数据字典从控制器“同步”传递到 MVC 视图

> ID：14849385
> 
> 赞同：0
> 
> 时间：2013-02-13T08:33:44.827
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-partialview

我的视图显示多个案例的结果，所以我有大约三种类型的结果面板

并且每个结果都应显示与结果面板类型匹配的所有项目

*   我做一个局部视图来显示每一个项目
*   制作一个 for 循环以显示每个结果面板中的所有项目
*   具有三个结果面板的视图
*   每个面板 - 编码为 html div - 具有子项目的部分视图

我想做的是找到以字符串类型作为键的字典和我的项目列表 - 列表 - 并在每个部分控制调用中传递一个具有类似面板的字典项目

```
<%= Html.Partial("myPartialControl",myDictionary["KindOfPanel"] %> 
```

那么如何将该字典同步传递给我的视图呢？这个问题有什么好主意，特别是洞视图应该每 5 秒刷新一次！就像使用 json 或任何 ajaxing 解决方案一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:41:42.887

这个词是异步的。

如果您只想更新页面的一部分而不重新加载整个页面，那么使用 AJAX 异步完成。

如果在第一种情况下，您有一个执行此操作的视图（基于上述）

```
...bla
<div id="my-container">
   <%= Html.Partial("myPartialControl",myDictionary["KindOfPanel"] %>
</div> 
```

然后在你的控制器中创建一个看起来像这样的动作：

```
public ActionResult MyPartialControl()
{
    return PartialView("myPartialControl", theData);
} 
```

然后添加以下 JQuery 函数并在需要时触发：

```
 $('.my-trigger').click(function(){
      $.get('@Url.Action("MyPartialControl")', function(data) {
         $('#my-container').html(data); 
      });
 }); 
```

在没有编译器的情况下编写我没有对此进行测试，但它应该可以工作，显然可以填补空白并试一试，但这是一般的想法。

# android - 用户单击 Urban Airship 通知时重新启动 android 应用程序

> ID：14849388
> 
> 赞同：4
> 
> 时间：2013-02-13T08:33:54.370
> 
> 标签：android, notifications, urbanairship.com

我有一个 android 应用程序成功设置为使用 Urban Airship 接收通知，但在处理 PushManager.ACTION_NOTIFICATION_OPENED) 广播时遇到问题。我的 BroadcastReceiver 正在工作、接收消息并调用以下命令（来自示例代码）：

```
Intent launch = new Intent(Intent.ACTION_MAIN);
launch.setClass(UAirship.shared().getApplicationContext(), Main.class);
launch.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
UAirship.shared().getApplicationContext().startActivity(launch); 
```

这可以正常工作并将主要活动带回前台，除非应用程序不再运行。如果我向手机发送通知，关闭应用程序，然后打开通知，应用程序会在 NullPointerException 上崩溃：

```
Failed to load meta-data, NullPointer: null
Unable to takeOff automatically
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to start receiver com.urbanairship.CoreReceiver:         java.lang.NullPointerException
at android.app.ActivityThread.handleReceiver(ActivityThread.java:2236)
at android.app.ActivityThread.access$1500(ActivityThread.java:130)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1271)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4745)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
at dalvik.system.NativeStart.main(Native Method) 
```

我不知道是什么原因造成的。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T20:55:59.193

好的，想通了。

我正在实例化 UrbanAirship 并从 Activity 上下文注册 IntentReceiver，而不是从 Application 上下文。

哎呀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-12T11:43:46.370

我遇到了同样的问题。我通过将 UAirship 初始化放入应用程序的 onCreate 而不是活动来解决它。

嗨 Amit Jayaswal，请参阅以下示例：

公共类 MyApplication 扩展应用程序 {

```
@Override
public void onCreate() {
    super.onCreate();

    // Optionally, customize your config at runtime:
    //
    // AirshipConfigOptions options = new AirshipConfigOptions();
    // options.inProduction = false;
    // options.developmentAppKey = "Your Development App Key";
    // options.developmentAppSecret "Your Development App Secret";
    //
    // UAirship.takeOff(this, options);

    UAirship.takeOff(this, new UAirship.OnReadyCallback() {
        @Override
        public void onAirshipReady(UAirship airship) {
            // Perform any airship configurations here

            // Create a customized default notification factory
            DefaultNotificationFactory defaultNotificationFactory = new DefaultNotificationFactory(getApplicationContext());
            defaultNotificationFactory.setSmallIconId(R.drawable.ic_notification);
            //defaultNotificationFactory.setColor(NotificationCompat.COLOR_DEFAULT);

            // Set it
            airship.getPushManager().setNotificationFactory(defaultNotificationFactory);

            // Enable Push
            airship.getPushManager().setPushEnabled(true);
        }
    });
} 
```

}

# python - 通过python在sqlite中导入带有两个参数的文本文件

> ID：14849389
> 
> 赞同：0
> 
> 时间：2013-02-13T08:33:59.737
> 
> 标签：python, sqlite, text, import

我尝试将 5 个配置文件（*rubin1.cfg...rubin5.cfg*）导入 sqlite3 数据库。配置文件是明显的字符串列表。每个字符串都以换行符开始。我会将文件字符串导入 sqlite 表并在字段*FileID*插入配置文件的索引。

```
import sqlite3, codecs
con = sqlite3.connect("ConfigImport.db")
cur = con.cursor() 
n = 0
sql = """\
        DROP TABLE IF EXISTS
        TblRubin;

        CREATE TABLE TblRubin 
        (StringId INTEGER PRIMARY KEY,
        FileId INTEGER
        String TEXT)
        """
cur.executescript(sql)
while n < 5:
    n = n + 1
    i = 0
    path = r'C:\\t7\\config\\rubi'+ str(n) + '.cfg'
    f = codecs.open(path, "r", encoding='cp1251') 
    str2 = codecs.open(path, "r", encoding='cp1251').readlines()
    print 'File', path, 'opened. Number of strings: ', str(len(str2))
    for line in f:
        cur.execute('insert into tblrubin values (null, ?, ?)', n, [str2[i].rstrip()])
        i = i + 1
    con.commit()               
cur.close()                
con.close() 
```

结果：

```
File C:\\t7\\config\\rubi1.cfg opened. Number of strings:  6528
Traceback (most recent call last):
  File "C:\t7\programs\analysis\ConfigImport.py", line 25, in <module>
    cur.execute('insert into tblrubin values (null, ?, ?)', (n, str2[i].rstrip()))
sqlite3.OperationalError: table tblrubin has 2 columns but 3 values were supplied 
```

当我尝试仅导入一个文件并且脚本包含一个参数时，如下所示...：

```
cur.execute('insert into tblrubin2 values (null, ?)', [str2[i].rstrip()]) 
```

...导入插入操作成功。

您能否建议如何使用两个参数制作将文本​​文件导入到 sqlite db 的正确脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:38:52.380

您应该在`CREATE TABLE`语句中添加一个逗号：

```
 ....
    FileId INTEGER , -- HERE
    String TEXT
    .... 
```

否则你将没有`String`专栏。

# c - 如何在 C 中处理数据类型不匹配异常

> ID：14849390
> 
> 赞同：2
> 
> 时间：2013-02-13T08:33:59.987
> 
> 标签：c, exception, types, mismatch

是否可以在 C 中处理数据类型不匹配异常？

在 C++ 和其他高级语言中，代码通常被 try...catch 包围。但是，由于 C 中没有异常处理机制，我们如何处理数据类型不匹配异常呢？

例如，假设我有一个程序要求用户输入一个整数。如果用户误打了字母字符，程序就会崩溃。我如何在 C 中处理这个问题？

这是一些示例代码：

```
#include "stdafx.h"

void main()
{
    int x = 0;
    printf("Hello World!\n\n");
    printf("Please enter an integer: ");
    scanf("%d", &x);
    printf("\n");
    printf("The integer entered is %d", x);
    printf("\n\n");
    printf("Press any key to exit!");
    getchar();
    getchar();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T08:37:39.890

我将假设您正在使用`scanf`来处理输入。程序不应该崩溃。您需要阅读[scanf](http://linux.die.net/man/3/scanf)的手册页，并在返回值部分告诉您该函数返回匹配的项目数。您将此数字与预期的数字进行比较。如果它们不同，则采取适当的措施。

**编辑**

Matthew 和 Bart 的一些代码：

```
int i;

if (scanf("%d", &i) == 1)
{
    printf("You have entered %d\n", i);
}
else
{
    printf("You have entered an invalid number\n");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T08:55:40.100

将代码添加到@EdHeal 上面正确地说的内容中。示例说明代码：

int main(int argc, char** argv) {

```
int num;
int ret;

printf("Enter a number\n");
ret=scanf("%d",&num);
/* For better clarity From the man page 
 Upon successful completion, these functions shall return the number of successfully matched and assigned input items; this number can be zero in the event of an early matching failure */
printf("Number of items assigned %d",ret);
printf("The input number is %d",num);
return (EXIT_SUCCESS); 
```

}

因此，为了您的简单起见，请查看 scanf 语句的返回值。成功后，即当它读取一个整数时，它返回 1 。如果是字符串，它读取 0 。

样本输出 a) 输入一个整数

```
Enter a number
68
Number of bytes read 1
The input number is 68
RUN SUCCESSFUL (total time: 2s) 
```

b) 输入一个字符串

```
Enter a number
yiy idfd
Number of bytes read 0
The input number is 2665608
RUN SUCCESSFUL (total time: 4s) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T08:58:29.683

数据输入的几个选项：

您可以使用上面提到的 scanf，但我也建议阅读有关 getopt、getoptlong 的手册页

至于验证，您可以尝试 regcomp、regexec、regerror、regfree。例如 ：

```
 const char* pattern = "^[\\+,-]*[0-9]*$";
   regex_t regex;
   int reti;
   reti = regcomp(&regex, pattern, REG_EXTENDED);
   if(reti){
   printf("error");
   exit(1);
   }
   reti = regexec(&regex, "34567", 0, NULL, 0);
   if(reti == 0) {
   printf("String matches pattern.");
   } 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-13T08:50:27.493

C 使用返回值和`errno`全局来指示是否出现任何问题。因此，在您的情况下，让我们假设（因为您没有提供任何代码），您正在使用[`strtol`](http://www.cplusplus.com/reference/cstdlib/strtol/)将字符串转换为整数：

```
 char *s = "1234";
 int number;
 number = strtol(s, NULL, 10); 
```

如果 number is`0`并且`errno`已设置，则出现问题。

C 中的所有函数都以这种方式工作。为了使您的代码更健壮，请读取字符串而不是数字并进行转换。

事实上，有很多关于异常和返回码的内容。在我看来，异常应该用于异常的东西。并且错误的数据输入并不例外（实际上它更像是一个规则;-)），因此在连接转换时应该不会抛出异常。也许这就是 C# 也有`TryParse`方法的原因。

# c# - 将测试结果写入 Excel -nunit

> ID：14849396
> 
> 赞同：0
> 
> 时间：2013-02-13T08:34:30.300
> 
> 标签：c#, nunit

是否可以使用 nunit 和 C# 将测试结果写入 excel，例如通过或失败。如果可以提供任何示例，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:49:19.693

使用[nunit-console](http://www.nunit.org/index.php?p=consoleCommandLine&r=2.2)，您可以将测试运行结果导出到 XML 并指定 XSLT 转换。例如，通过 XSLT 转换，您可以[将 XML 转换为 CSV](https://stackoverflow.com/questions/365312/xml-to-csv-using-xslt)，然后使用 Excel 对 CSV 中的测试运行结果执行您想做的任何事情。

# jquery-mobile - jQuery Mobile：如何使用参数打开 url 哈希？

> ID：14849401
> 
> 赞同：0
> 
> 时间：2013-02-13T08:34:40.597
> 
> 标签：jquery-mobile, routing

我正在使用[jQuery Mobile 1.2.0](http://jquerymobile.com/)

带参数的hash是不可能打开的。
工作 - [http://jquerymobile.com/demos/1.2.0/docs/pages/multipage-template.html#two](http://jquerymobile.com/demos/1.2.0/docs/pages/multipage-template.html#two)
不工作[http://jquerymobile.com/demos/1.2.0/docs/pages/multipage -template.html#two?id=33](http://jquerymobile.com/demos/1.2.0/docs/pages/multipage-template.html#two?id=33)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:23:55.177

官方不支持它，但有一些解决方法。在[文档](http://jquerymobile.com/demos/1.2.0/docs/pages/page-navmodel.html)中，您可以阅读更多关于此的内容（在已知限制下搜索传递参数）。

报价：

> jQuery Mobile 不支持将查询参数传递给内部/嵌入式页面，但是您可以添加两个插件到您的项目中来支持此功能。有一个轻量级[页面参数插件](https://github.com/jblas/jquery-mobile-plugins/tree/master/page-params) 和一个功能更全面的[jQuery Mobile 路由器插件](https://github.com/azicchetti/jquerymobile-router)，可与主干.js 或脊柱.js 一起使用。一个名为 [routerlite](https://github.com/1Marc/jquery-mobile-routerlite)的较新插件仅使用四种方法使其变得简单：routeinit、routechange、pageinit 和 pagechange。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:29:15.983

如果您想这样做以便能够在 jquery 移动项目中传递变量，您还可以在 javascript 中使用全局变量或使用 localstorage / cookies。

# php - Magento 代码适配以在比较页面中显示自定义属性值

> ID：14849404
> 
> 赞同：0
> 
> 时间：2013-02-13T08:34:43.977
> 
> 标签：php, magento, magento-1.7

我正在运行 magento 1.7.0.2，我有一个扩展，它会覆盖导航和产品页面中的属性值，但不会覆盖比较页面中的属性值。

为此，我需要将代码从 attributes.phtml 调整为 list.phtml，但由于我的编程技能非常有限，我真的不知道如何做到这一点。

product attributes.phtml 文件，它给了我所需的输出：

```
<?php
/**
 * Product additional attributes template
 *
 * @see Mage_Catalog_Block_Product_View_Attributes
 */
?>

<?php
    $_helper = $this->helper('catalog/output');
    $_product = $this->getProduct()
?>
<?php if($_additional = $this->getAdditionalData()): ?>
<div class="box-collateral box-additional">
    <table class="data-table" id="product-attribute-specs-table">
        <col width="25%" />
        <col />
        <tbody>
        <?php foreach ($_additional as $_data): ?>
            <tr>
                <th class="label"><?php echo $this->htmlEscape($this->__($_data['label'])) ?></th>

//edited to check and print custom value

                   <?php if (($numberOptions = Mage::getModel('mana_filters/filter2')->load($_data['code'], 'code')) && $numberOptions->getDisplay() == 'slider') : ?> 
                       <td class="data"><?php  echo Mage::helper('manapro_filtersuperslider')->formatNumber($_product->getData($_data['code']), $numberOptions) ?></td> 
                   <?php else : ?>
                       <td class="data"><?php echo $_helper->productAttribute($_product, $_data['value'], $_data['code']) ?></td> 
                   <?php endif; ?>
//edit end

            </tr>
        <?php endforeach; ?>
        </tbody>
    </table>
    <script type="text/javascript">decorateTable('product-attribute-specs-table')</script>
</div>
<?php endif;?> 
```

编辑后的代码应该适应这个这个lists.phtml

```
<?php
/**
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2012 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
/* @var $this Mage_Catalog_Block_Product_Compare_List */
?>
<div class="page-title title-buttons">
    <h1><?php echo $this->__('Compare Products') ?></h1>
    <a href="#" onclick="window.print(); return false;" class="link-print"><?php echo $this->__('Print This Page') ?></a>
</div>
<?php $_total=$this->getItems()->getSize() ?>
<?php if($_total): ?>
    <table class="data-table compare-table" id="product_comparison">
    <?php $_i=0 ?>
    <?php foreach($this->getItems() as $_item): ?>
        <?php if($_i++%10==0): ?>
            <col width="1" />
        <?php endif; ?>
            <col width="<?php echo floor(100/$_total); ?>%" />
    <?php endforeach; ?>
<?php if ($_total>2): ?>
        <thead>
            <tr>
            <?php $_i=0 ?>
            <?php foreach($this->getItems() as $_item): ?>
                <?php if($_i++%10==0): ?>
                    <th>&nbsp;</th>
                <?php endif; ?>
                <td class="a-right"><a href="#" class="btn-remove" onclick="removeItem('<?php echo $this->helper('catalog/product_compare')->getRemoveUrl($_item) ?>');" title="<?php echo $this->__('Remove This Item') ?>"><?php echo $this->__('Remove This Item') ?></a></td>
            <?php endforeach; ?>
            </tr>
        </thead>
<?php endif ?>
        <tbody>
            <tr class="product-shop-row">
            <?php $_i=0 ?>
            <?php foreach($this->getItems() as $_item): ?>
                <?php if($_i++%10==0): ?>
                    <th>&nbsp;</th>
                <?php endif; ?>
                <td>
                    <a class="product-image" href="#" onclick="setPLocation('<?php echo $this->getProductUrl($_item) ?>', true)" title="<?php echo $this->stripTags($_item->getName(), null, true) ?>"><img src="<?php echo $this->helper('catalog/image')->init($_item, 'small_image')->resize(125, 125); ?>" width="125" height="125" alt="<?php echo $this->stripTags($_item->getName(), null, true) ?>" /></a>
                    <h2 class="product-name"><a href="#" onclick="setPLocation('<?php echo $this->getProductUrl($_item) ?>', true)" title="<?php echo $this->stripTags($_item->getName(), null, true) ?>"><?php echo $this->helper('catalog/output')->productAttribute($_item, $_item->getName(), 'name') ?></a></h2>
                    <?php echo $this->getReviewsSummaryHtml($_item, 'short') ?>
                    <?php echo $this->getPriceHtml($_item, true, '-compare-list-top') ?>
                    <?php if($_item->isSaleable()): ?>
                        <p><button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setPLocation('<?php echo $this->helper('catalog/product_compare')->getAddToCartUrl($_item) ?>', true)"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button></p>
                    <?php else: ?>
                        <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
                    <?php endif; ?>
                    <?php if ($this->helper('wishlist')->isAllow()) : ?>
                        <ul class="add-to-links">
                            <li><a href="<?php echo $this->getAddToWishlistUrl($_item) ?>" class="link-wishlist" onclick="setPLocation(this.href, true)"><?php echo $this->__('Add to Wishlist') ?></a></li>
                        </ul>
                    <?php endif; ?>
                </td>
            <?php endforeach; ?>
            </tr>
        </tbody>
        <tbody>
        <?php foreach ($this->getAttributes() as $_attribute): ?>
            <tr>
                <?php $_i=0 ?>
                <?php foreach($this->getItems() as $_item): ?>
                <?php if($_i++%10==0): ?>
                <th><span class="nobr"><?php echo $_attribute->getStoreLabel() ?></span></th>
                <?php endif; ?>

//I think the adapted code should go somewhere here

                    <td>
                    <?php switch ($_attribute->getAttributeCode()) {
                        case "price": ?>
                            <?php echo $this->getPriceHtml($_item, true, '-compare-list-' . $_attribute->getCode()) ?>
                            <?php break;
                        case "small_image": ?>
                            <img src="<?php echo $this->helper('catalog/image')->init($_item, 'small_image')->resize(125, 125); ?>" width="125" height="125" alt="<?php echo $this->htmlEscape($_item->getName()) ?>" title="<?php echo $this->htmlEscape($_item->getName()) ?>" />
                            <?php break;
                        case "date":
                              echo substr($this->getProductAttributeValue($_item, $_attribute),0,10);
                              break;
                        default: ?>
                            <div class="std">
                                <?php echo $this->helper('catalog/output')->productAttribute($_item, $this->getProductAttributeValue($_item, $_attribute), $_attribute->getAttributeCode()) ?>
                            </div>
                            <?php break;
                    } ?>
                </td>
                <?php endforeach; ?>
            </tr>
        <?php endforeach; ?>
        </tbody>
        <tbody>
                <tr class="add-to-row">
                <?php $_i=0 ?>
                <?php foreach($this->getItems() as $_item): ?>
                <?php if($_i++%10==0): ?>
                <th>&nbsp;</th>
                <?php endif; ?>
                <td>
                    <?php echo $this->getPriceHtml($_item, true, '-compare-list-bottom') ?>
                    <?php if($_item->isSaleable()): ?>
                        <p><button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setPLocation('<?php echo $this->helper('catalog/product_compare')->getAddToCartUrl($_item) ?>', true)"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button></p>
                    <?php else: ?>
                        <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
                    <?php endif; ?>
                    <?php if ($this->helper('wishlist')->isAllow()) : ?>
                        <ul class="add-to-links">
                            <li><a href="<?php echo $this->getAddToWishlistUrl($_item);?>" class="link-wishlist" onclick="setPLocation(this.href, true)"><?php echo $this->__('Add to Wishlist') ?></a></li>
                        </ul>
                    <?php endif; ?>
                </td>
                <?php endforeach; ?>
            </tr>
        </tbody>
    </table>
    <div class="buttons-set">
        <button type="button" title="<?php echo $this->__('Close Window') ?>" class="button" onclick="window.close();"><span><span><?php echo $this->__('Close Window') ?></span></span></button>
        <span class="please-wait" id="compare-list-please-wait" style="display:none;">
            <img src="<?php echo $this->getSkinUrl('images/opc-ajax-loader.gif') ?>" alt="<?php echo $this->__('Please wait...') ?>" title="<?php echo $this->__('Please wait...') ?>" class="v-middle" /> <?php echo $this->__('Please wait...') ?>
        </span>
    </div>
    <script type="text/javascript">
        decorateTable('product_comparison');

        /**
         * Send remove item request, after that reload windows
         */
        function removeItem(url)
        {
            new Ajax.Request(url, {
                parameters: {isAjax: 1, method: 'POST'},
                onLoading: function(){$('compare-list-please-wait').show();},
                onSuccess: function(transport) {
                    $('compare-list-please-wait').hide();
                    window.location.reload();
                    window.opener.location.reload();
                }
            });
        }
    </script>
<?php else: ?>
    <script type="text/javascript">window.close();</script>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:50:40.360

您应该在 switch 的默认情况下添加代码：

```
default: ?>
                        <div class="std">
                            <?php echo $this->helper('catalog/output')->productAttribute($_item, $this->getProductAttributeValue($_item, $_attribute), $_attribute->getAttributeCode()) ?>
                        </div>
                        <?php break; 
```

变成

```
 default: ?>
                        <div class="std">
                            <?php if (($numberOptions = Mage::getModel('mana_filters/filter2')->load($_attribute->getAttributeCode(), 'code')) && $numberOptions->getDisplay() == 'slider') : ?> 
                  <?php  echo Mage::helper('manapro_filtersuperslider')->formatNumber($_item->getData($_attribute->getAttributeCode()), $numberOptions) ?>
               <?php else : ?>
                  <?php echo $this->helper('catalog/output')->productAttribute($_item, $this->getProductAttributeValue($_item, $_attribute), $_attribute->getAttributeCode()) ?>
               <?php endif; ?>
                        </div>
                        <?php break; 
```

# ios - 自定义 UIStoryboardSegue 中的视图之间未显示过渡

> ID：14849405
> 
> 赞同：0
> 
> 时间：2013-02-13T08:34:46.037
> 
> 标签：ios, xcode, cocoa-touch, uistoryboardsegue, uiviewanimationtransition

我写了一个自定义的 UIStoryboardSegue。

我的 CustomSegue.m 文件中的唯一代码是：

```
-(void) perform {
    UIViewController* sourceViewController = (UIViewController *) self.sourceViewController;
    UIViewController* destinationViewController = (UIViewController *) self.destinationViewController;

    UIWindow* window = UIApplication.sharedApplication.keyWindow;
    window.rootViewController = destinationViewController;
    window.rootViewController = sourceViewController;    

    [UIView transitionWithView: sourceViewController.view.window
                        duration: 0.5
                         options: UIViewAnimationOptionTransitionFlipFromLeft
                      animations: ^{window.rootViewController = destinationViewController;}
                      completion: ^(BOOL finished) {}
     ];
} 
```

如果我设置了一个故事板，所以它只有两个 UIViewController，第一个上的按钮链接到第二个，所有工作都按计划进行：从左过渡有一个翻转。

但是：如果我在第一个 UIViewController 之前放置一个 UINavigationController，则 segue 现在会调出第二个视图控制器，而无需从左侧翻转。

到底是怎么回事？为什么过渡不适用于导航控制器？

谢谢你的帮助！

（如果您有兴趣，我使用自定义 segue 的原因是这样我可以在一些介绍页面之后出现一个主从视图。我受到[这个 Stackoverflow 答案](https://stackoverflow.com/questions/9044586/storyboard-uiviewcontroller-and-uisplitviewcontroller#answer-12730697)的启发。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:51:10.400

我从来没有解决这个问题，但找到了一个简单的解决方法。我从前面移除了导航控制器，但在 segue 之后放置了一个。然后我在源屏幕的顶部放置了一个简单的导航栏。segue 还触发了向目标视图控制器添加后退按钮。因此，我的自定义转场变成了“伪推送”转场。

# sql - 使用 SQL CTE 表包含路径和所有子项

> ID：14849410
> 
> 赞同：7
> 
> 时间：2013-02-13T08:35:13.647
> 
> 标签：sql, sql-server, common-table-expression

我有以下分层树表

```
GO
DROP TABLE #tbl 
GO
CREATE TABLE #tbl (Id int , ParentId int)
INSERT  INTO #tbl (Id, ParentId) VALUES  (0, NULL)
INSERT  INTO #tbl (Id, ParentId) VALUES  (1, 0)
INSERT  INTO #tbl (Id, ParentId) VALUES  (2, 1)
INSERT  INTO #tbl (Id, ParentId) VALUES  (3, 1)
INSERT  INTO #tbl (Id, ParentId) VALUES  (4, 2)
INSERT  INTO #tbl (Id, ParentId) VALUES  (5, 2)
INSERT  INTO #tbl (Id, ParentId) VALUES  (6, 3)
INSERT  INTO #tbl (Id, ParentId) VALUES  (7, 3)
GO 
```

映射到以下树

```
0
+- 1
   +- 2
      +- 4
      +- 5
   +- 3
      +- 6
      +- 7 
```

使用 CTE 递归表，如何获取路径以及所选节点的所有子节点。例如`2`作为输入，我怎样才能获得以下数据（如果可能，请订购）

```
Id, ParentID
-------
 0, NULL 
 1, 0
 2, 1
 4, 2
 5, 2 
```

我知道我可以使用以下语句在树中向上遍历（获取路径）

```
WITH RecursiveTree AS (
    -- Anchor
    SELECT *
        FROM #tbl
        WHERE Id = 2
    UNION ALL
        -- Recursive Member
        SELECT Parent.*
        FROM 
            #tbl AS Parent
            JOIN RecursiveTree AS Child ON Child.ParentId = Parent.Id
)
SELECT * FROM RecursiveTree 
```

并使用以下语句，在树中向下遍历（获取所有孩子）

```
WITH RecursiveTree AS (
    -- Anchor
    SELECT *
        FROM #tbl
        WHERE Id = 2
    UNION ALL
        -- Recursive Member
        SELECT Child.*
        FROM 
            #tbl AS Child
            JOIN RecursiveTree AS Parent ON Child.ParentId = Parent.id
)
SELECT * FROM RecursiveTree 
```

**问题：**如何将这两个命令合二为一？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T08:51:32.590

只需使用这两个选择的 UNION

[SQLFiddle 演示](http://sqlfiddle.com/#!6/7781a/8)

```
WITH RecursiveTree AS (
    -- Anchor
    SELECT *
        FROM #tbl
        WHERE Id = 2
    UNION ALL
        -- Recursive Member
        SELECT Parent.*
        FROM 
            #tbl AS Parent
            JOIN RecursiveTree AS Child ON Child.ParentId = Parent.Id
),
RecursiveTree2 AS
(
    -- Anchor
    SELECT *
        FROM #tbl
        WHERE Id = 2
    UNION ALL
        -- Recursive Member
        SELECT Child.*
        FROM 
            #tbl AS Child
            JOIN RecursiveTree2 AS Parent ON Child.ParentId = Parent.id
)
select * from
(
SELECT * FROM RecursiveTree
union
SELECT * FROM RecursiveTree2
) t
order by id 
```

# powershell - 在 powershell 中使用 get-date 创建日志字符串

> ID：14849421
> 
> 赞同：9
> 
> 时间：2013-02-13T08:35:55.510
> 
> 标签：powershell, getdate

我在脚本中使用这些行来编写一些我最终会放入日志文件的信息。

```
$log = "some text: "
$log += Get-Date
$log += "; some text" 
```

这样我就可以正确获取我的数据，所以我的输出将是`some text: 02/13/2013 09:31:55; some text`. 有没有更短的方法来获得这个结果？我的意思是这样的（实际上不起作用）

```
$log = "some text: " + Get-Date + "; some text" 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-13T08:40:46.017

尝试：

```
$log = "some text: $(Get-Date); some text" 
```

函数或变量属性 es的`$()`扩展值：$($myvar.someprop) 当它们在字符串中时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-13T01:11:07.253

我为此创建了一个函数：

## 功能

```
function log ($string, $color) {
    if ($color -eq $null) { $color = "White" }
    if (Test-Path ".\logs") {} else { new-item ".\logs" -type directory | out-null }
    Write-Host $string -Foreground $color
    "$(get-date -Format 'hh:mm, dd/MM/yyyy') - $($string)" | Out-File .\logs\$(Get-Date -Format dd-MM-yyyy).log -Append -Encoding ASCII 
} 
```

## 例子：

```
# colours are named by function to make console output more organised
$c_error = "Red"
$c_success = "Green"
$c_check = "Cyan"
$c_logic = "Yellow"

log "Starting loop" $c_logic
log "Checking files" $c_check
log "error detected" $c_error
log "File successfully cleaned" $c_success 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T08:50:56.263

另一种方式是这样的：

```
$log = "some text: {0}; some text" -f (Get-Date) 
```

# apache - XSL-FO 外部图形未正确旋转

> ID：14849422
> 
> 赞同：1
> 
> 时间：2013-02-13T08:35:55.633
> 
> 标签：apache, xslt, pdf, xsl-fo, apache-fop

我突然发现生成的 PDF 中的图形没有正确旋转或方向的问题。使用 iPhone 纵向拍摄的照片已开始以横向模式出现在 PDF 中。风景项目正确地保持在风景中，但肖像也解析为风景。正如我所说，这是一个新问题，自 11 月以来我没有对任何相关软件进行任何更改。唯一远程连接的变化是我在大约一周前更新了我的 Java。

所以我的问题是，是否有任何关于尊重 EXIF 轮换信息的设置，或者类似的东西？我不能逐个图像地进入并设置强制旋转，而在过去，正确的方向刚刚发生。

```
<fo:external-graphic src="../../MMSimages/IMG_9162.jpg" content-height="1.8in"/> 
```

此代码适用于几天前的图像，但不适用于任何较新的图像。使用 saxonhe9-2-0-6j/saxon9he.jar 作为我的处理器和 FOP 1.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T13:03:01.463

这可能是硬件问题：如果 iPhone 中的加速度传感器出现问题，图片的方向将不再正确添加到图片的 EXIF 数据中。问题只是您最近拍摄的照片，还是您在 iPhone 上拍摄的旧照片也有同样的问题？当您在照片编辑程序中打开图片时会发生什么？

# c# - 单击链接时在标签上打印值

> ID：14849432
> 
> 赞同：0
> 
> 时间：2013-02-13T08:36:17.127
> 
> 标签：c#, asp.net, html

我有一个标签声明如下；

```
<asp:Label ID="Label1" runat="server" Text=" "></asp:Label> 
```

此外，我已声明如下链接；

> `<a> Hello </a>`

当用户单击链接时，`Hello`我需要将文本复制`Hello`到上面声明的标签中。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:41:56.550

你可以使用`jquery`它。但你必须在你的页面上使用 jquery.js。

```
$(document).ready(function(){
  $('a').click(function() {
    $("#Label1").attr('Text',$("a").text());
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:42:21.357

标记：

```
<asp:Label ID="Label1" runat="server" Text=" "></asp:Label>
<asp:LinkButton id="button" runat="server" Text="Hello" onClick="button_onclick" /> 
```

后面的代码：

```
protected void button_onclick(Object sender,EventArgs e)
{
    Label1.Text = button.Text;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T08:47:17.610

这个简单的 JavaScript 有效：

```
<asp:Label ID="Label1" runat="server" Text="lol"></asp:Label>
<a id="myLink" onclick="linkClick()"> Hello </a>

<script type="text/javascript" language="javascript">
    function linkClick() {
        var value = document.getElementById('myLink').innerText;
        document.getElementById('<%= Label1.ClientID %>').innerText = value;
    }
</script> 
```

或者正如 Devang Rathod 建议的那样，您可以使用 jQuery。

# java - 具有内部联接的 2 个不同表中的 Entitymanager 查询

> ID：14849439
> 
> 赞同：1
> 
> 时间：2013-02-13T08:36:57.970
> 
> 标签：java, jpa

我当前的代码：

```
TypedQuery<Account> tp = em.createQuery("SELECT a FROM Account a INNER JOIN User u ON u.account_id = a.id WHERE a.email = :email AND a.pwd = :pwd AND a.role = 'admin'", Account.class);
                tp.setParameter("email", this.username);
                tp.setParameter("pwd", this.password);
                Account result = tp.getSingleResult(); 
```

但我会得到一个 java.lang.IllegalArgumentException。

我需要的是在用户表中显示一列。

类似`String name = Account.getName();`但 Account 实体没有 getName() 只有 User 实体有。

*更新

这是错误

java.lang.IllegalArgumentException：在 EntityManager 中创建查询时发生异常：异常描述：解析查询的语法错误 [SELECT a FROM Account a INNER JOIN User u ON u.account_id = a.id WHERE a.email = :email AND a.pwd = :pwd AND a.role = 'admin']。内部异常：org.eclipse.persistence.internal.libraries.antlr.runtime.EarlyExitException

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-27T10:30:21.800

[这篇](https://stackoverflow.com/questions/9911616/join-two-un-related-tables-using-jpa-entitymanager)文章解释了你必须像这样加入：你指定用逗号分隔的表名，然后将`ON`条件移动到`WHERE`.

```
TypedQuery<Account> tp = em.createQuery("SELECT a FROM Account a, User u   WHERE u.account_id = a.id AND a.email = :email AND a.pwd = :pwd AND a.role = 'admin'", Account.class);
            tp.setParameter("email", this.username);
            tp.setParameter("pwd", this.password);
            Account result = tp.getSingleResult(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:49:01.253

尝试这个。

`result.getUser().getName();`

不过，这是假设您的 Account 类与 User 类有关系。

这是**Hibernate/JPA**关系的假设来自您之前的[问题](https://stackoverflow.com/questions/14848637/extracting-the-values-inside-an-object)以及上面代码中的使用**HQL**。

# javascript - 由于 HTML 编码，硬编码 URL 无效

> ID：14849440
> 
> 赞同：-2
> 
> 时间：2013-02-13T08:36:58.610
> 
> 标签：javascript

由于存在 amp，以下下载 url 无法正常工作；在网址中

```
window.open('dev.test.com/download?parent_id=223344553268&amp;sid=28&amp;child=2454367720'); 
```

如何处理上述问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:41:27.243

使用此正则表达式替换`&amp;`为 &

```
$url =~ s/amp;//gis; 
```

这是 perl 语法。您可以在 Javascript 中检查正则表达式，但模式将保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:19:39.660

```
var url = 'http://dev.test.com/download?parent_id=223344553268&amp;sid=28&amp;child=2454367720';

url.replace(/\&amp;/g,'&'));

window.open(url); 
```

# asp.net - 在 .net 3.5 中用两个值绑定下拉菜单

> ID：14849441
> 
> 赞同：4
> 
> 时间：2013-02-13T08:37:02.277
> 
> 标签：asp.net, sql-server-2008

我想在 .net 3.5 中使用一些分隔符将我的**下拉列表与两个值绑定 [如 '-' 或 '/']。**

```
 qry = "SELECT CityName, MasterState.StateName FROM MasterCity INNER JOIN "+
              "MasterState ON MasterCity.StateID = MasterState.StateID order by CityName";

DropCity.DataMember = "DeafultView";
//DropCity.DataTextField = "CityName";
//DropCity.DataValueField = "CityName";
DropCity.DataTextFormatString = "{0} - {1}";
DropCity.DataTextField = "CityName,StateName";
DropCity.DataSource = dt;
DropCity.DataBind();
DropCity.Items.Insert(0, "-Select-");** 
```

我做到了，但它给出了错误

**DataBinding：“System.Data.DataRowView”不包含名为“CityName,StateName”的属性。”}**

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:44:20.977

```
DropCity.DataTextField = "CityName,StateName"; 
```

`DataTextField`将寻找列`CityName,StateName`，但它不存在。

也许您可以像这样更改您的查询

```
qry = "SELECT CityName, CityName + '-' + MasterState.StateName as CityState
    FROM MasterCity INNER JOIN "+
          "MasterState ON MasterCity.StateID = MasterState.StateID order by CityName";

    DropCity.DataTextField = "CityState"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:44:48.033

不要认为一次绑定两个东西是可能的，尽管你可以改变你的 SQL 查询来返回你需要的东西。

改变：-

```
qry = "SELECT CityName, MasterState.StateName FROM MasterCity INNER JOIN "+
  "MasterState ON MasterCity.StateID = MasterState.StateID order by CityName"; 
```

到

```
qry = "SELECT CityName, MasterState.StateName, " + 
     "CityName + ' - ' + MasterState.StateName AS DDName " +
      " FROM MasterCity INNER JOIN "+
      "MasterState ON MasterCity.StateID = MasterState.StateID order by CityName"; 
```

然后改变： -

```
DropCity.DataTextField = "CityName,StateName"; 
```

到 ：-

```
DropCity.DataTextField = "DDName"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T08:55:05.150

试试这个..我稍微修改了查询。希望它有效。

```
qry = "SELECT CityName , CityName + "-" + MasterState.StateName as CityNState FROM
        MasterCity INNER JOIN MasterState ON MasterCity.StateID = MasterState.StateID order by
        CityName";

DropCity.DataMember = "DeafultView";
DropCity.DataTextField = "CityNState";
DropCity.DataSource = dt;
DropCity.DataBind();
DropCity.Items.Insert(0, "-Select-"); 
```

# jquery - 新 MVC 项目中的运行时错误 0x800a139e？

> ID：14849443
> 
> 赞同：2
> 
> 时间：2013-02-13T08:37:13.037
> 
> 标签：jquery, asp.net-mvc

在创建和运行一个完全空白的新 MvcApplication（Internet 站点模板，VS2012 SP1，Win8 上的 MVC4）时，调试输出显示：

```
Exception was thrown at line 5108, column 4 in http://localhost:64687/Scripts/jquery-1.7.1.js
0x800a139e - Laufzeitfehler in JavaScript: SyntaxError 
```

jQuery 是 1.7.1.1

我在使用其他 jQuery 版本的其他项目中也遇到此错误。可能是什么原因？

感谢您的提示。

编辑：jquery-1.9.1.js 中其他项目的行号为 4224 或 3983。
很抱歉描述很弱，但我无法真正掌握错误。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T19:39:10.133

我在查看 jquery-1.7.1.js 时发现了这段代码。matchs.call 是第 5108 行...看起来 jquery 是故意造成这个异常的，所以我将忽略它并继续前进。其他人在另一个板上建议 jquery 试图与 Sizzle 互操作。

如果你愿意，你可以只删除 try-catch 块。

```
try {
    // This should fail with an exception
    // Gecko does not error, returns false instead
    matches.call( document.documentElement, "[test!='']:sizzle" );

    catch( pseudoError ) {
        pseudoWorks = true;
    }
} 
```

# highcharts - 双轴线与列和缩放工具提示损坏

> ID：14849445
> 
> 赞同：1
> 
> 时间：2013-02-13T08:37:19.847
> 
> 标签：highcharts

当我尝试制作双轴图表时遇到问题，我使用图表 1 = 列和图表 2 = 线。图表 1（列）有许多空值，并且每天 00:00 时有一个不为零的值。问题的原因是，当我放大图表并将鼠标悬停在图表 1 上时，工具提示会破坏它并且图表会冻结，直到您再次放大​​其他区域。我的小提琴：

```
[code]
http://jsfiddle.net/revor44/9vbX7/
[/code] 
```

这是一个简单的例子。

进行缩放，并查看柱形图上的工具提示。

我的问题是什么？有可能修复它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:51:11.233

我认为解决方案是删除所有空值（它们有必要吗？）并且只使用`[x,y]`列格式，请参阅：http: [//jsfiddle.net/4BXuJ/2/](http://jsfiddle.net/4BXuJ/2/)

# php - PHP以ISO格式解析日期

> ID：14849446
> 
> 赞同：10
> 
> 时间：2013-02-13T08:37:21.587
> 
> 标签：php, datetime

我目前正在使用 ConstantContact 它返回带有更新字段的 XML，格式如下：

```
2013-02-13T08:35:34.195Z 
```

我假设这是**date('c')**格式。如何解析这种格式？**strtotime**没有返回正确的值。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-13T08:41:38.200

您可能想查看[DateTime::createFromFormat()](http://www.php.net/manual/en/datetime.createfromformat.php)函数。

```
$datetime = DateTime::createFromFormat('Y-m-d\TH:i:s+', '2013-02-13T08:35:34.195Z'); 
```

这样做的问题是您将失去毫秒数。

格式字符串中的`+`符号只是告诉该函数忽略字符串的其余部分而不是创建错误。

在 PHP7.2 中确认。在下面的评论中，您可以使用`Y-m-d\TH:i:s.u\Z`来匹配 toISOString 给出的确切 Js 字符串。

# java - DrJava 设置环境变量

> ID：14849447
> 
> 赞同：0
> 
> 时间：2013-02-13T08:37:22.547
> 
> 标签：java, drjava

我将 DrJava 用于一个简单的 java 项目，但需要设置环境变量`R_HOME`。

有人可以告诉我该怎么做吗？

我可以在命令行中执行此操作并使用以下方法进行测试：

```
String environmentVariable = System.getenv("R_HOME");
System.out.print("Environment Variable are =>"+environmentVariable); 
```

在命令行中有效，但在 DrJava 中无效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:52:17.260

如果您使用的是 MS Windows，请转到控制面板，然后转到系统、高级、环境变量、新建。

您可以通过转到相关面板为您的用户或系统创建变量。

该变量将在您创建后启动的任何新窗口/应用程序中处于活动状态，但对于任何已经处于活动状态的窗口/应用程序均无效。

# xpages - 当我使用 xpages 创建时，日历邀请不起作用？

> ID：14849453
> 
> 赞同：-1
> 
> 时间：2013-02-13T08:37:43.540
> 
> 标签：xpages

当我尝试使用 xpages 发送日历邀请时，出现以下错误

我无法在邮件数据库中创建文档。

注意：邮件数据库和应用程序数据库位于同一域的不同服务器中。

> ```
> Error: 
> 
> Unexpected runtime error
> The runtime has encountered an unexpected error.
> Error source
> Page Name:/xp_Home.xsp
> Control Id: button1
> Property: onclick
> 
> Exception
> Error while executing JavaScript action expression
> Script interpreter error, line=454, col=56: [TypeError] Exception occurred calling method NotesDatabase.createDocument() null
>    at [/Actions.jss].createCalendarEntry() 
> ```

JavaScript 代码

```
function validateReq(){
  var fldFocusFlag =false
  var valid = true; 
```

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:55:29.783

手头的代码进一步帮助您有点困难。从消息中可以看出，您可能已尝试使用 NotesDatabase 作为静态类来创建文档。你不能这样做。您将必须获得要在其中创建文档的数据库的句柄（日历条目只是具有一些字段的普通文档......）

因此，假设您正在尝试在当前数据库中创建文档，您必须按照以下方式进行操作：

```
var db:NotesDatabase = Session.getCurrentDatabase()
var doc:NotesDocument = db.createDocument() 
```

还有一个全局对象可供您立即提供当前数据库，因此您可以将代码简化为：

```
var doc:NotesDocument = database.createDocument() 
```

您不必指定数据/对象类型（例如：NotesDatabase），但是，这将帮助编辑器帮助您提供建议；-)

HTH /约翰

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:12:29.583

您不会直接在用户邮件文件中创建日历条目。很可能您无权访问它（ACL 或远程服务器）。正确的方法是向该用户发送日历邀请。有关字段详细信息，请参阅[此技术](http://www-01.ibm.com/support/docview.wss?uid=swg21229486)说明。您可以设置为不需要回复并使用策略来自动处理来自签名者 ID 的通知。注意：在 Notes 9 中有更完整的日历 API

# php - 使用 tcpdf 在 pdf 中创建链接

> ID：14849454
> 
> 赞同：5
> 
> 时间：2013-02-13T08:37:44.977
> 
> 标签：php, html, tcpdf

如何创建与 TCPDF 的链接？

使用该`writeHTML()`函数并传递我的整个 html 内容时，TCPDF 不会使我的链接可点击。它们是蓝色的并带有下划线，但我无法单击它们。

这就是我所做的。

```
$html = "<a href='www.stackoverflow.com'>stackoverflow.com</a>";
$tcpdf = new TCPDF();
$tcpdf->writeHTML($html);
$tcpdf-Output('output.pdf', 'F'); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T08:51:38.037

根据[文档](http://www.tcpdf.org/doc/code/classTCPDF.html#a6669ae88090963e9487d0388c7577dc9)，您可以使用`Write()`TCPDF 对象上的方法来实现此目的。例如：

```
$tcpdf->Write(10, 'Google', 'http://www.google.com/', false, 'L', true); 
```

将使用文本 Google 写一行（左对齐并带有换行符，只是为了更好的示例而添加）。

# python - jquery跨域ajax请求总是报错

> ID：14849463
> 
> 赞同：1
> 
> 时间：2013-02-13T08:38:45.503
> 
> 标签：python, ajax, json, jquery, bottle

我正在尝试创建一个简单的 Jquery 移动应用程序。我的设置如下：

1.  jQuery 客户端在**localhost:9090/myapp**上运行。
2.  我的服务器在**localhost:9010/paperboy上运行**
3.  因为我在 Windows 上，所以在服务器端我使用了一个简单的服务器，使用“ **bottle** ”创建，这是一个 python 微框架。
4.  服务器根据请求返回 json，我可以在 Chrome 或 Firefox 中清楚地看到。
5.  我已经验证了我的回复，它是一个有效的 JSON。

我面临的问题是，我希望我的客户端从服务器响应中读取 json。
但由于它是一个跨域问题，它不能这样做。
这是我的客户端ajax代码：

```
$.ajax({
        url: "http://localhost:9010/paperboy/toi",
        type:"GET",
        data:$(this),
        dataType:"jsonp",
        //jsonp:"callback",   no support on the server

        success:function(result){
            console.log("ajax result: " + result);
        },

        error:function(e){
            console.log("Error :" + e);
        }
    }); 
```

我的瓶子服务器代码是：

```
from bottle import route, run, template, response
from paperboy import getToiNews

''' call http://localhost:9010/paperboy/toi in browser'''

@route('/paperboy/:source')
def index(source='All'):
    print "requesting news list for %s" % source
    resultJson = getToiNews()
    response.content_type = "application/javascript"
    return resultJson

run(host='localhost', port=9010) 
```

然而，在运行应用程序时，我最初收到“ajax 源策略错误”，一旦我将内容类型添加到我的服务器，它很快就消失了。
现在 ajax 调用没有错误地通过，但总是调用“错误”处理程序。我尝试了各种组合，但都是徒劳的。我想不通的一件事是向我的服务器添加 jsonp 支持。
感谢您在此问题上的任何帮助，并提前感谢您提供的所有帮助。
谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T08:40:31.820

你自己说的，因为它是一个跨域调用，默认情况下它是[SOP](http://en.wikipedia.org/wiki/Same_origin_policy)不允许的。

如果您控制服务器（并且您是），您可以使用[CORS](http://www.w3.org/TR/access-control/)来允许请求。这适用于任何现代浏览器。（虽然遗憾的是在 IE8 和 IE9 的情况下，您需要一个 jQuery 补丁来启用 Microsoft 特定`XDomainRequest`对象而不是标准`XMLHttpRequest`的使用；jQuery 团队拒绝将其放入库中。IE10 最终添加了跨域处理到`XMLHttpRequest`。）

或者，由于响应是 JSON，您可以改用非常相似的[JSON-P](http://en.wikipedia.org/wiki/JSONP#JSONP)，它具有适用于所有浏览器的优势（并且没有 jQuery 补丁）。

# aem - 在 cq5 中获取日期作为类型日期

> ID：14849476
> 
> 赞同：3
> 
> 时间：2013-02-13T08:39:24.393
> 
> 标签：aem

我在我的组件中使用 xtype 日期字段。我想从我的对话框中获取值作为日期而不是字符串。是否有任何方法可以获取字符串以外的任何其他类型的对话框值？因为这里我需要日期。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-13T11:17:09.520

是的。您可以使用[ValueMap](http://sling.apache.org/apidocs/sling5/org/apache/sling/api/resource/ValueMap.html#get%28java.lang.String,%20java.lang.Class%29)`get(java.lang.String name, java.lang.Class<T> type)`类的方法来获取一个值并将其转换为指定的类型。

即，如果您希望您的属性值为 Date，您可以使用以下语法。

```
Date date = properties.get("date", Date.class); 
```

`get(java.lang.String name, T defaultValue)`如果存储库中不存在该属性，您还可以返回默认值。对于前

```
Date date = properties.get("date", new Date());
Date date = properties.get("text", "default_text"); 
```

默认值还用于定义要将值转换为的类型。即，如果默认值为String，它将返回一个String，或者如果默认值为Date 对象，它将返回一个Date 对象。

**注意：***属性*对象是 ValueMap 的一个实例

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T22:37:01.730

您也可以使用默认值。您提供的默认值必须是您希望返回的类型。

```
Date date = properties.get("date", new Date()); 
```

[http://sling.apache.org/apidocs/sling5/org/apache/sling/api/resource/ValueMap.html](http://sling.apache.org/apidocs/sling5/org/apache/sling/api/resource/ValueMap.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-09T11:15:04.220

当我们在 cq5 对话框中使用 datefield 时，它的值默认保存为 CRX 中的“Date”类型。在从 CRX 检索该属性值到 CQ 页面时，我们必须将其显式类型转换为 java.util.Date 对象，如下所述。

```
java.util.Date date = properties.get("publishDate",java.util.Date.class); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-15T05:55:23.523

我将重提这个老问题，因为我遇到了同样的问题，并且我认为找到了一个更优雅的解决方案。

如果您在对话框中为您的字段使用以下配置，您将只会获得一个日期选择字段，但它将在 CRX-DE 中另存为日期：

```
xtype="datetime"
hideTime="{Boolean}true" 
```

# python - .properties 文件的 Python 正则表达式

> ID：14849490
> 
> 赞同：0
> 
> 时间：2013-02-13T08:40:31.467
> 
> 标签：python, regex

我有一个属性文件，我需要从中提取一些特定的属性行：

我的属性文件内容是：

```
datahelper.SecLegalAgreementParty.queryAttributes = type=DataProcessorHelper, contextType=REFERENCE, dataSource=CIT, dataSubType=SecLegalAgreementParty
datahelper.SecLegalAgreementParty.indexes = agreementIdPartitionIdClientId
datahelper.SecLegalAgreementParty.index.agreementIdPartitionIdClientId.columns=agreementID, partitionID, clientID
datahelper.CITPricerOverrideByTrade.queryAttributes = type=DataProcessorHelper, contextType=REFERENCE, dataSource=CIT, dataSubType=PricerOverrideByTrade
datahelper.CITPricerOverrideByTrade.preload    = true
datahelper.CITCrisiDerivativePosition.queryAttributes = type=DataProcessorHelper, contextType=CALC, dataSource=CIT, dataSubType=Exposure, dataProcessorHelperType=result, CanonicalClassName=com.jpmorgan.gcrm.calc.crisi.deriv.common.data.result.CECrisiDerivativePosition
datahelper.CITCrisiDerivativePositionCalcMetricResult.queryAttributes = type=DataProcessorHelper,  dataSource=CIT, dataSubType=Exposure, dataProcessorHelperType=result, CanonicalClassName=com.jpmorgan.gcrm.calc.crisi.deriv.common.data.result.CECrisiDerivPsnCalcMetric 
```

我只需要提取所有属性，我们可以在同一个表达式中`datahelper.{anything}.queryAttributes` 省略属性吗？`CanonicalClassName=`我的代码是这样的：

```
for line in file:
    if re.match("^[datahelper.CIT]", line, False): 
        print line 
```

请协助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:43:32.633

`^[datahelper.CIT]`匹配该字符组中的一个字母。那不是你想要的。

像这样的东西会起作用：

```
for line in file:
    if re.match(r'datahelper\.(.*?)\.queryAttributes', line):
        print line 
```

或以编译形式：

```
matcher = re.compile(r'datahelper\.(.*?)\.queryAttributes')

for line in file:
    if matcher.match(line):
        print line 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T08:43:45.567

```
for line in file:
    if re.match("datahelper\.\w+\.queryAttributes", line): 
        print line 
```

此正则表达式匹配以 开头`datahelper.`、后跟一个或多个字母数字字符、后跟`.queryAttributes`（以及之后的任意数量的字符）的行。

为了进一步避免包含`CanonicalClassName=`在同一行中的那些，您可以添加一个前瞻断言：

```
for line in file:
    if re.match("datahelper\.\w+\.queryAttributes(?!.*CanonicalClassName=)", line): 
        print line 
```

# android - 使用可序列化购买的片段之间传递对象会导致按下主页按钮时出错

> ID：14849492
> 
> 赞同：2
> 
> 时间：2013-02-13T08:40:33.527
> 
> 标签：android, android-fragments

我有 2`Fragments`第一个包含 4 个按钮。当一个按钮被按下时，第二个`fragment`被加载。第二个片段有一个编辑文本。当第二个文本更改时，`fragment`我希望第一个按钮中的文本更改。

![第一个片段](../Images/2a9d08b0a8695623395519196c13a86e.png) ![第二个片段](../Images/a95d00ba49a66022a319bbf7076cb3cb.png)

为了实现这一点，我将第一个片段设置为可序列化，并将第一个片段的对象作为可序列化传递给第二个片段。通过使用这个对象，我改变了第一个片段中的文本。

现在的问题是，当加载第二个片段时按下主页按钮时，应用程序崩溃并出现异常 parcelable 遇到 ioexception 写入可序列化。现在我该怎么办？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:17:29.773

用户喜欢存储文本的值，从片段 onResume() 方法，更新您的 TextView。

# java - Tomcat 未启动（Struts 2 jquery 问题）

> ID：14849494
> 
> 赞同：-2
> 
> 时间：2013-02-13T08:40:39.020
> 
> 标签：java, tomcat, struts2, struts2-jquery

在启动tomcat时，我收到了这个错误：

```
 Caused by: java.io.FileNotFoundException: http://struts.apache.org/dtds/struts-2.3.dtd
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1401)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.setupCurrentEntity(XMLEntityManager.java:654)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.startEntity(XMLEntityManager.java:1292)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityManager.startDTDEntity(XMLEntityManager.java:1259)
    at com.sun.org.apache.xerces.internal.impl.XMLDTDScannerImpl.setInputSource(XMLDTDScannerImpl.java:260)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$DTDDriver.dispatch(XMLDocumentScannerImpl.java:1169)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$DTDDriver.next(XMLDocumentScannerImpl.java:1065)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:978)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:625)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:116)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:819)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:748)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1208)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:525)
    at javax.xml.parsers.SAXParser.parse(SAXParser.java:392)
    at com.opensymphony.xwork2.util.DomHelper.parse(DomHelper.java:113)
    ... 28 more 
```

我的代码一直工作到最后一天。今天，当我尝试启动 tomcat 时出现此错误。我在我的项目中使用 struts2-core-2.2.1.1.jar 和 struts2-jquery-plugin-3.3.1.jar 文件。

为什么我的代码只是停止工作？相同的代码工作到昨天。

还链接[http://struts.apache.org/dtds/struts-2.3.dtd](http://struts.apache.org/dtds/struts-2.3.dtd)给出 404 错误。在该位置找不到文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:33:29.647

您的代码不应尝试在线访问 dtd。

你不应该假设 dtd **URI**是一个有效的**URL**，即使这通常也是一个 URL。

您可以提供一个本地的、可访问的 DTD 路径。

一般来说，你不应该假设你的服务器可以访问“互联网”来处理这些事情，这是不可靠的。

编辑：使用 struts 2.3.8 可能会解决问题。

```
http://mvnrepository.com/artifact/org.apache.struts/struts2-core/2.3.8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:15:45.373

昨天，当以前工作的网络应用程序停止工作并出现上述错误时，我遇到了完全相同的问题。经过一番摸索，这是 2013 年 2 月 12 日至 2013 年 2 月 13 日的一个问题，是由 Apache Struts 项目迁移服务器引起的。从今天早上（格林威治标准时间 06:00）起，网址[http://struts.apache.org/dtds/struts-2.3.dtd](http://struts.apache.org/dtds/struts-2.3.dtd)现在可以再次使用 - 但是，尝试下载最新版本的 Struts (2.3.8)我仍然是 403 禁止响应。

# c# - 无法确定用户的配置路径（尝试获取修订号时）

> ID：14849515
> 
> 赞同：2
> 
> 时间：2013-02-13T08:42:40.883
> 
> 标签：c#, svn, sharpsvn

我将 SharpSVN dll 与我的 Visual Studio 2010 一起使用以获取最新的修订号，以便我可以使用此编号对我的项目进行版本控制。我在下面尝试了这段代码，但它给了我错误提示：

```
Can't determine the user's config path 
```

我什至不明白那是什么意思。我要做的就是提供 svn 链接、我的用户名和密码等凭据并获取最新的修订号。

这是我到目前为止尝试的代码：

```
using(SvnClient client = new SvnClient())
{
    //client.LoadConfiguration(Path.Combine(Path.GetTempPath(), "Svn"), true);
    Collection<SvnLogEventArgs> list;
    client.Authentication.DefaultCredentials = new NetworkCredential("john.locke", "s7y5543a!!");

    SvnLogArgs la = new SvnLogArgs();
    client.GetLog(new Uri("https://100.10.20.12/svn/P2713888/trunk/src/"), la, out list);

    string sRevisionNumber = string.Empty;
    int iRevisionNumber = 0;
    foreach(SvnLogEventArgs a in list)
    {
       if (Convert.ToInt32(a.Revision) > iRevisionNumber)
       {
           iRevisionNumber = Convert.ToInt32(a.Revision);
       }
    }
    RevisionNumber.Text = iRevisionNumber.ToString();
} 
```

也可以选择其他获取修订号的方法作为答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T13:18:33.520

我也遇到了这个问题——使用前需要在 SvnClient 上查找/设置属性。这是我最终使用的。尝试使用这种方法而不是仅仅实例化您的客户端对象——如果它不存在，它将自动创建一个配置文件夹：

```
private SvnClient GetClient()
{
    SvnClient client = new SvnClient();

    // Note: Settings creds up here is optional
    // client.Authentication.DefaultCredentials = _creds;

    string configPath = Path.Combine(Path.GetTempPath(), "sharpsvn");
    if (!Directory.Exists(configPath))
    {
        Directory.CreateDirectory(configPath);
    }
    client.LoadConfiguration(configPath, true);

    return client;
} 
```

或者，如果您想最小化文件 IO 检查以查看目录是否存在，您可以尝试 LoadConfiguration，并且仅在调用失败时创建并重新分配目录，但每次仅检查更简单。

无论如何，您可以使用以下代码获取某个位置的最新修订号：

```
public long GetLatestRevisionNumber(Uri svnPath)
{
    using (SvnClient client = GetClient())
    {
        SvnInfoEventArgs info;
        client.GetInfo(svnPath, out info);
        return info.LastChangeRevision;
     }
} 
```

# android - 在android中隐藏/显示通知栏

> ID：14849516
> 
> 赞同：0
> 
> 时间：2013-02-13T08:42:44.403
> 
> 标签：android, notifications

我可以使用此代码隐藏通知栏

```
setWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                                WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

但我希望用户可以选择显示和隐藏通知栏。目前我的`Activity`永久隐藏通知栏。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:46:32.090

您可以使用以下命令退出全屏模式（即显示状态栏）：

```
getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);
getWindow().addFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN); 
```

# android - 如何在 Android 中使用 .net Web 服务单击 itemclick 时从 listview 获取子文件夹？

> ID：14849517
> 
> 赞同：1
> 
> 时间：2013-02-13T08:42:49.480
> 
> 标签：android, .net, web-services, android-listview

在使用 .net Web 服务单击列表中的项目后，我试图获取子文件夹。请建议。谢谢

```
 public void Treedata(){
            try {

                SoapObject datarequest = new SoapObject(NAMESPACE, TREEDATA_METHOD);

                datarequest.addProperty("UserID", 1);

                SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                envelope.dotNet = true; 
                envelope.setOutputSoapObject(datarequest);

                Log.i("LoginDetail", "UserID " + 1);

                HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
                androidHttpTransport.debug = true;

                androidHttpTransport.call(SOAP_ACTION_TREEDATA, envelope);

                SoapObject dataresponse = (SoapObject)envelope.getResponse();

                Log.i("myData", dataresponse.toString());

                datalist = new String[dataresponse.getPropertyCount()];
                for(int i=0; i< dataresponse.getPropertyCount(); i++)

                datalist[i] = dataresponse.getProperty(i).toString();

                treedata = (ListView)findViewById(R.id.treedata);

                ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, datalist);

                treedata.setAdapter(adapter);

                treedata.setOnItemClickListener(new OnItemClickListener()
                {
                    @Override
                    public void onItemClick(AdapterView<?> arg0, View v,int position, long id) {
                        // TODO Auto-generated method stub

    // What to do here??? So that sub folders can get into next activity.       

                        Intent intent = new Intent(getApplicationContext(), Files_Folders_Activity.class);

                        startActivity(intent);

                    }   
                });
            }
        } 
```

}

下一个活动：

```
public void subfolderTreedata(){
    try {

 SoapObject subfolderrequest = new SoapObject(NAMESPACE, SUBFOLDERTREEDATA_METHOD);

 subfolderrequest.addProperty("FolderID", 13002);    //13002 is folderID how can I get multiple Id Dynamically?

 subfolderrequest.addProperty("UserID", 1);

 SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
 envelope.dotNet = true;
 envelope.setOutputSoapObject(subfolderrequest);

 HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
 androidHttpTransport.debug = true;

 androidHttpTransport.call(SOAP_ACTION_SUBFOLDERTREEDATA , envelope);

 SoapObject dataresponse = (SoapObject)envelope.getResponse();

 Log.i("subfoldersData", dataresponse.toString());

// if(UserID || FolderID == dataresponse){    //How to get dynamic userId and Password right now I am having static 1 for user password authentication, what to do for multiple authentication.

 subfolderslist = new String[dataresponse.getPropertyCount()];
 for(int i=0;i< dataresponse.getPropertyCount(); i++)

 subfolderslist[i] = dataresponse.getProperty(i).toString();
 subfolderstreedata = (ListView)findViewById(R.id.subfolderstreedata);

 ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, subfolderslist);

 subfolderstreedata.setAdapter(adapter); 
```

我的网络服务：

```
Host: ***.***.*.*
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "http://tempuri.org/TreeDataSubFolder"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"       
xmlns:xsd="http://www.w3.org/2001/XMLSchema"   
xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
<soap:Body>
<TreeDataSubFolder xmlns="http://tempuri.org/">
  <FolderID>string</FolderID>
  <UserId>string</UserId>
</TreeDataSubFolder>
 </soap:Body>
 </soap:Envelope>
  HTTP/1.1 200 OK
   Content-Type: text/xml; charset=utf-8
    Content-Length: length

   <?xml version="1.0" encoding="utf-8"?>
    <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"                
      xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
        xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
       <TreeDataSubFolderResponse xmlns="http://tempuri.org/">
          <TreeDataSubFolderResult>
               <FileFolderDetails>
       <ID>int</ID>
       <Name>string</Name>
       <SubjectType>string</SubjectType>
     </FileFolderDetails>
     <FileFolderDetails>
      <ID>int</ID>
      <Name>string</Name>
      <SubjectType>string</SubjectType>
    </FileFolderDetails>
  </TreeDataSubFolderResult>
  </TreeDataSubFolderResponse>
 </soap:Body>
 </soap:Envelope> 
```

我只是想确认如何同时发送 FOLDERID 和 USERID 以获取子文件夹并从 listitem 检索数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:09:21.020

```
Heres answer:

    public class TreeDataActivity extends Activity implements OnItemClickListener {

 private ListView datalist;

 private static final String NAMESPACE = "http://tempuri.org/";
 private static final String URL = "http://192.168.1.5/InterLogicsMobile/InterLogics.asmx";
 private static final String SOAP_ACTION = "http://tempuri.org/TreeData";
 private static final String TreeDataMethod = "TreeData";

 private String[] firstlist;
 String FolderID = null;
 String ID;
 String FolderName;
 String ParentID;
 String CreatedBy;
// List<IconSetter> rowItems;

// public static final Integer[] images = { R.drawable.folder_icon,};
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);
        setContentView(R.layout.treedata);
        TreeData();
    }
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {

        ID = (String) datalist.getItemAtPosition(arg2);
        //FolderName = (String) datalist.getItemAtPosition(arg2);

        Intent intent = new Intent(TreeDataActivity.this,TreeDataSubFolderActivity.class);
        intent.putExtra("ID",ID );
        //intent.putExtra("FolderName",FolderName );
        startActivity(intent);
    }

 private void TreeData() throws NullPointerException{

     try {
        SoapObject request = new SoapObject(NAMESPACE, TreeDataMethod);
        request.addProperty("UserID", 1);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;  

        envelope.setOutputSoapObject(request);

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.debug = true;

        androidHttpTransport.call(SOAP_ACTION, envelope);

        SoapObject list = (SoapObject)envelope.getResponse();

        System.out.print(list);

        firstlist = new String[list.getPropertyCount()];

        for(int i=0;i< list.getPropertyCount();i++){
             /*rowItems = new ArrayList<IconSetter>();
             IconSetter item = new IconSetter(images[0],FolderName[1],ID[2]); 

             rowItems.add(item);*/
             SoapObject result = (SoapObject)list.getProperty(i);

             ID = result.getProperty(0).toString();
             FolderName = result.getProperty(1).toString();
             ParentID = result.getProperty(2).toString();
             CreatedBy = result.getProperty(3).toString();

             System.out.println(ID);
             System.out.println(FolderName);
             System.out.println(ParentID);
             System.out.println(CreatedBy);

             SoapPrimitive Record =(SoapPrimitive) result.getProperty(1);

             Log.i("Record", Record.toString());

           firstlist[i] = result.getPropertyAsString(0).toString();
          // firstlist[i] = result.getPropertyAsString(1).toString();

           datalist = (ListView) findViewById(R.id.first_list);

           ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, firstlist);

           datalist.setAdapter(adapter);

           datalist.setOnItemClickListener(this);
      }      
} 
        catch (Exception e) {           
            e.printStackTrace();
            Toast.makeText(getApplicationContext(), " NullPointerException " + e
                    + "Do Something", Toast.LENGTH_LONG).show();

        }finally{

        }
    }

} 
```

# c++ - 在 2 个线程中提升套接字

> ID：14849523
> 
> 赞同：0
> 
> 时间：2013-02-13T08:43:22.343
> 
> 标签：c++, multithreading, sockets, boost, boost-asio

我正在使用 boost 套接字和 boost 线程。（同步套接字）。如果我理解正确，这个方案是行不通的。

```
using boost::asio::ip::tcp;
boost::asio::ip::tcp::socket *MySocket;
bool Key = true;

void Function1()
{
    try
    {
        boost::asio::io_service io_service;
        tcp::resolver resolver(io_service);
        boost::system::error_code error;
        boost::asio::ip::address address = boost::asio::ip::address::from_string(IP, error);
        tcp::endpoint ep(address, 1235);
        MySocket = new tcp::socket(io_service);
        MySocket->connect(ep);
        Key = false;
    }
    catch(std::exception e)
    {
        std::cout<<e.what;
    }
}

void Function2()
{
    boost::array <char, 8> buf;
    size_t len = MySocket->read_some(boost::asio::buffer(buf), error);
    //Always len == 0 and buf.data() is MMMMMMM
}

void main()
{
    boost::thread Thread(&Function1);
    while(Key);
    Function2();
    MySocket->close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:57:42.583

*你用local* 创建你的套接字，它在返回`io_service`后被销毁。`function1`使其全球化。（当然，不要以这种方式设计真正的应用程序！坚持使用 Asio 文档中描述的方法。）

# c# - 如何在 SQL 查询中包含数组的所有元素？

> ID：14849524
> 
> 赞同：3
> 
> 时间：2013-02-13T08:43:27.723
> 
> 标签：c#, sql, arrays, linq

基本上，这个想法是将来自一个 DataTable 的数据与另一个匹配。在第一个 DT 中，一行中有 20 个不同的列，我从中创建了一个数组，还有另一个 DT 有数千行，每行两列。我需要选择在数组中所有 20 个不同变量中找到的第二个 DT 中的所有行（因此，我在第一个表中逐行查找）。

我可以在一个查询中执行此操作吗？

```
for (int x = 0; x < 20; x++) //this fills up the array from the 20 columns of dt1
{
   numbers[x] = Convert.ToInt16(dt1.Rows[i]["n" + (x+1)]);
}
var filtered = dt2.Select("Col1 = " + (any of the numbers[]) + " AND Col2 = " + (any of the numbers[])); 
```

很明显，有问题的行是最后一行。我不确定是否可以这样做。

我是新来的，我也是 C# 的新手。感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:49:53.860

您可以将数据表转换为可枚举并使用 LINQ 过滤数据。

像这样的东西：

`var filtered = dt2.AsEnumerable().Where(m => numbers.Contains(m.Col1) && numbers.Contains(m.Col2))`;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:51:29.253

您可以在以下位置使用此 SQL `DataTable`：

```
var numbersAsString = numbers.Select(x => x.ToString()).Aggregate((x,y) => x + "," + y);
var filtered = dt2.Select("Col1 in (" + numbersAsString  + ") AND Col2 in (" + numbersAsString  + ")"); 
```

首先，您从您的字符串创建`Array`如下所示的字符串：'1,3,4,5'，然后在 SQL 中检查 Col1 或 Col2 值是否在数组中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T09:05:11.150

上述两种方法都运作良好。但是，在不知道您的 DataSet 是否为强类型的情况下（并且使用单个查询而不是要求将 dt1 投影到数组中）：

```
var filtered = dt2.AsEnumerable().Where(row => dt1.Rows[0].ItemArray.Contains(row[0]) ||
                                               dt1.Rows[0].ItemArray.Contains(row[1])); 
```

# ruby-on-rails - 不同 Devise+Cancan 角色之间的关系

> ID：14849527
> 
> 赞同：0
> 
> 时间：2013-02-13T08:43:41.180
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, cancan

我正在我的 Rails 3 应用程序中实现身份验证+授权系统。我与用户和角色之间存在 HABTM 关系。

我将拥有的角色是：经理、经销商、操作员、管理员

现在一个经理可以有很多经销商在他手下。我如何模拟这种关系？

这是一个简单的问题，但我找不到答案。这里还有一个类似的问题：[角色相关的关联](https://stackoverflow.com/questions/13521031/role-dependent-associations)，但它并没有正确地清除事物。

## **编辑**：

我认为我的要求更简单。对我来说，用户只能是管理员、操作员、经销商或经理。

为此，我可以简单地将角色列添加到用户表。现在将如何执行经理和经销商之间的关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:01:10.163

我想你正在寻找更像

```
class Organization < ActiveRecord::Base
  has_many :users
  has_many :managers
  has_many :dealer
  has_many :admins
  has_many :operators
  has_many :dealer_users, :through => :managers, :class_name=>"User"
end

class Admin < ActiveRecord::Base
  has_many :organizations
  belongs_to :user
end

class Dealer
  has_many :organizations
  belongs_to :user
end

class Operator < ActiveRecord::Base
  has_many :organizations
  belongs_to :user
end

class Manager < ActiveRecord::Base
  has_many :dealers
  belongs_to :organization
end

class User < ActiveRecord::Base
  has_many :organizations
  has_many :admins
  has_many :operators
  has_many :managers
  has_many :dealers
end 
```

# android - 如何优化此布局 XML 文件以符合我的想法？

> ID：14849531
> 
> 赞同：1
> 
> 时间：2013-02-13T08:43:51.560
> 
> 标签：android, xml, layout

我创建了这个名为 searchfragment 的片段。下面是 searchfragment 的布局 XML 文件。不幸的是，设计并没有我想要的那么流畅。

这是我希望它看起来的样子： 第一行：欢迎文本（有效） 第二行：搜索输入字段（也有效） 第三行（这里变得复杂）：应该有一个名为“搜索”的文本然后是带有您可以搜索的项目的 Spinner（例如名称、年份、价格）。然后是搜索按钮。接下来是您可以对输出进行排序。因此，有一个带有“排序”的文本、一个带有标准的 Spinner 和一个排序按钮。最好的情况是搜索部分应该左对齐，排序右，但仍然居中。第四行：输出字段。现在，由于这些元素都存在于我的设备上，它们不在 Eclipse 的图形布局中。我已经尝试了几个小时来让它工作，但如果你不检查你的对象，这有点困难。

长文本 - 短任务：请帮我优化我的设计。

搜索片段.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center"
    android:orientation="vertical" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:layout_gravity="center"
        android:text="@string/welcome" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <EditText
            android:id="@+id/edit_message"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dp"
            android:layout_marginRight="20dp"
            android:hint="@string/edit_message" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center|center_horizontal"
        android:layout_marginTop="8dp" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/search_for" />

        <Spinner
            android:id="@+id/criterion"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:entries="@array/searcharray"
            android:prompt="@string/prompt" />

        <Button
            android:id="@+id/btnSubmit"
            android:layout_width="136dp"
            android:layout_height="match_parent"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:background="@drawable/android"
            android:onClick="sendMessage"
            android:text="@string/button_send" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/sort_for"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:orientation="vertical" >

            <Spinner
                android:id="@+id/sort"
                android:layout_width="wrap_content"
                android:layout_height="0dip"
                android:layout_weight="1"
                android:entries="@array/sortarray"
                android:prompt="@string/prompt" />

        </LinearLayout>

        <Button
            android:id="@+id/sort_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:background="@drawable/android"
            android:onClick="sortAgain"
            android:text="@string/button_send" />

    </LinearLayout>

<ScrollView
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">
     <TextView
        android:id="@+id/showResults"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textAppearance="?android:attr/textAppearanceMedium" />
</ScrollView>

</LinearLayout> 
```

我添加了当前设计的照片。周围有红框的空间是第三“行”，应该改变。第二个微调器（我不知道为什么）太宽了。它应该和第一个一样宽。然后所有元素的高度应该大致相同，并且元素应该居中。

![当前状态](../Images/103eaacf8ddb71bdd9b1bf0253ccbb00.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:56:21.753

您的布局走在了正确的轨道上，但是您的第二个`Spinner`占用了这么多空间的原因是您已将其设置`layout_weight`为 1，并且由于它是唯一一个带有 的`layout_weight`，它占用了其余的空间自由。

如果您希望这些项目在屏幕上占据相对数量的空间，那么您可以坚持使用`layout_weight`并赋予所有项目该属性。

例如，仅对于您的第三行，您将摆脱`LinearLayout`您周围的`Spinner`，更改一些`layout_width`属性并为您的所有项目提供`layout_weight`.

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center|center_horizontal"
    android:layout_marginTop="8dp" >

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/search_for" />

    <Spinner
        android:id="@+id/criterion"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:entries="@array/searcharray"
        android:prompt="@string/prompt" />

    <Button
        android:id="@+id/btnSubmit"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:background="@drawable/android"
        android:onClick="sendMessage"
        android:text="@string/button_send" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/sort_for"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <Spinner
        android:id="@+id/sort"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:entries="@array/sortarray"
        android:prompt="@string/prompt" />

    <Button
        android:id="@+id/sort_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:background="@drawable/android"
        android:onClick="sortAgain"
        android:text="@string/button_send" />

</LinearLayout> 
```

这将使您的所有物品具有相同的权重，因此 的`TextViews`尺寸与 的尺寸相同，`Spinners`其尺寸与 的尺寸相同`Buttons`。使用`layout_weight`属性使它们更具相关性，例如，如果您希望 的`Buttons`大小是 的两倍`Spinners`，请将它们设置`layout_weight`为 2。

# javascript - 动态应用 CSS 过滤器

> ID：14849539
> 
> 赞同：6
> 
> 时间：2013-02-13T08:44:42.343
> 
> 标签：javascript, html, css, google-chrome, filter

如何动态应用 CSS 过滤器？我已经为 Chrome 尝试了以下操作。

```
image.style = "-webkit-filter: brightness(50%);"; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T09:04:00.170

您应该为`webkitFilter`属性设置值，而不是`style`对象。此语法[将起作用](http://jsfiddle.net/Q2H3d/)：

```
image.style.webkitFilter = "brightness(50%)"; 
```

如果您不知道 JavaScript 属性名称，可以通过 CSS 属性引用它（如 karaxuna 建议的那样，[也可以](http://jsfiddle.net/Q2H3d/1/)）：

```
image.style["-webkit-filter"] = "brightness(50%)"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T08:48:21.847

```
image.style["-webkit-filter"] = "brightness(50%)"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T08:47:01.693

将该过滤器添加到类中：

```
.bright {
    -webkit-filter: brightness(50%);
} 
```

并切换该类：

```
image.classList.toggle('bright'); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-05-19T07:15:15.477

1) 检查浏览器是否支持 css-filters (如果需要)
2) 检测当前浏览器中的“过滤器”属性是否需要供应商并保存
3) 设置过滤器值的格式：

```
el.style["-vendor-filter"] = value; 
```

或者

```
el.style.vendorFilter = value; 
```

检查小型演示：[http](http://codepen.io/malyw/pen/EDnmt)
://codepen.io/malyw/pen/EDnmt 您还可以找到显示 css 过滤器的大型演示：http: [//malyw.github.io/css-filters/](http://malyw.github.io/css-filters/)

# javascript - 如何将html中组件的高度设置为父组件的百分比？

> ID：14849540
> 
> 赞同：0
> 
> 时间：2013-02-13T08:44:44.067
> 
> 标签：javascript, css, jsf, styles, height

我正在开发一个 Web 应用程序，我们正在用 Java 和 jsf 开发它。我制作了一个用于选择数据的组件，该组件在其他组件（如向导、模式面板等）中使用。问题是，我需要将组件的高度设置为其内部向导高度的百分比。我尝试使用 javascript，但我遇到的问题是当我将它放在我的组件中时 window.onload 命令不起作用。现在我只是想 alert() 父组件的高度，但它不起作用。这是我的代码：

```
<script type="text/javascript">

    <![CDATA[

    window.onload = setHeight;

    function setHeight()
    {
        var element = document.getElementById("#{rich:clientId('mainWizardDiv')}");
        var h = window.getComputedStyle(element, null).getPropertyValue("height");
        alert(h);
    }
    ]]>
</script> 
```

您是否有任何其他建议如何做到这一点，我可以使用 onload 或任何其他想法来解决问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:23:41.767

不可能得到百分比高度（谷歌搜索高度百分比的原因）。获取以像素为单位的绝对高度，在 Javascript 中对其进行计数（不要忘记将其四舍五入）并将结果加载到您想要的元素（添加 'px' 字符串以确保）。这一直对我有用。

**编辑：（**发表评论后）

**也许，我能看出错误。您正在分配未定义的功能。首先，您必须定义功能，然后使用它**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:11:52.247

CDATA的错误使用：应该注释CDATA以避免js语法错误：

```
<html>
    <head>
        <script type="text/javascript">

            //<![CDATA[

            window.addEventListener('load', setHeight);

            function setHeight()
            {
                var element = document.getElementById("div1");
                var h = window.getComputedStyle(element, null).getPropertyValue("height");
                alert(h);
            }
            //]]>
        </script>
    </head>
    <body>
        <div style='height:200px; width:200px;' id='div1'>

        </div>
    </body>

</html> 
```

# c# - Windows 服务的线程

> ID：14849542
> 
> 赞同：-2
> 
> 时间：2013-02-13T08:44:50.313
> 
> 标签：c#, multithreading, windows-services

我做了一个读取 xml 的服务。在 xml 我有输入目录和输出目录。该服务选择输入目录中的文件并重命名它们并将它们移动到输出目录。我想在服务中实现线程。我希望它在一个线程中选择一个 xml 节点，在另一个线程中选择另一个节点。或者，如果不考虑节点，一个线程选择要执行的前 10 个操作，然后选择下一个要执行的 10 个操作，等等，这甚至会很好。这样所有节点都以并行方式处理。谁可以帮我这个事？我尝试阅读一些线程教程，但无法通过它们获得太多。服务代码如下：

```
XmlDocument doc = new XmlDocument();
            doc.Load("Data.xml");
            int count = doc.SelectNodes("Data/DataClass").Count;
            for (int i = 1; i < count; i++)
            {
                string xpath = "/Data/DataClass[" + i + "]";
                XmlNode node = doc.SelectSingleNode(xpath);
                XmlNodeList subnode = node.ChildNodes;
                string pathO = "";
                string pathI = subnode[0].InnerText;
                string prefix = subnode[2].InnerText;
                string freq = subnode[3].InnerText;
                string[] filenames = Directory.GetFiles(pathI);
                node.ParentNode.RemoveChild(doc.SelectSingleNode(xpath));
                doc.Save("Data.xml");

                foreach (string filename in filenames)
                {
                    pathO = subnode[1].InnerText;
                    pathO = pathO + "\\" + prefix;
                    string fname = Path.GetFileName(filename);
                    pathO = pathO + fname;
                    System.IO.File.Move(filename, pathO);

                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:58:59.857

使用 Parallel.For 或 Parallel.ForEach，检查下面的代码，它很简单，我在这里只修改了你的代码，所以用 VS 检查它（根据你的要求可能会有小的变化）。

```
XmlDocument doc = new XmlDocument();
doc.Load("Data.xml");
int count = doc.SelectNodes("Data/DataClass").Count;
Parallel.For(0,doc.SelectNodes("Data/DataClass").Count-1,i =>
{
    XmlNode node = doc.SelectNodes("Data/DataClass")[i];
    XmlNodeList subnode = node.ChildNodes;
    string pathO = "";
    string pathI = subnode[0].InnerText;
    string prefix = subnode[2].InnerText;
    string freq = subnode[3].InnerText;
    string[] filenames = Directory.GetFiles(pathI);
    doc.Save("Data.xml");
    foreach (var filename in filenames)
    {
        pathO = subnode[1].InnerText;
        pathO = pathO + "\\" + prefix;
        string fname = Path.GetFileName(filename);
        pathO = pathO + fname;
        System.IO.File.Move(filename, pathO);
    }
}
); 
```

不要删除并行循环内的子节点，所以我删除了以下行 node.ParentNode.RemoveChild(node);

了解更多关于 Task Parallel Liberary ( [http://msdn.microsoft.com/en-us/library/dd537608.aspx](http://msdn.microsoft.com/en-us/library/dd537608.aspx) ) 的并行处理功能。

# java - 在这种情况下，getRemoteHost 方法返回 IP 地址而不是主机名？

> ID：14849543
> 
> 赞同：6
> 
> 时间：2013-02-13T08:44:54.510
> 
> 标签：java, networking

在我们专用网络的服务器上，我们有一个 HttpServlet，它由同一网络的 PC 联系。

我们需要知道与服务器联系的客户端的主机名。为此，我们调用 HttpServletRequest 的 getRemoteHost 方法。

有时此方法返回客户端的 PC 名称（想要的行为），有时此方法返回 IP 地址。（相同的客户端，相同的服务器，相同的专用网络）

[API](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getRemoteHost%28%29)说：

> java.lang.String **getRemoteHost** ()
> 
> 返回客户端的完全限定名称或发送请求的最后一个代理。如果引擎不能或选择不解析主机名（以提高性能），则此方法返回 IP 地址的点分字符串形式。对于 HTTP servlet，与 CGI 变量REMOTE_HOST*的值相同*
> 
> **返回**：一个包含客户端完全限定名称的字符串

我看到对于 HTTP servlet，该值与 CGI 变量 REMOTE_HOST 相同。这是什么意思？是否由服务器决定解析地址？有没有办法强制这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:35:03.183

例如，在 Tomcat 中，连接器有一个设置“enableLookups”，出于性能原因默认禁用该设置。见[http://tomcat.apache.org/tomcat-7.0-doc/config/http.html](http://tomcat.apache.org/tomcat-7.0-doc/config/http.html)

其他容器可能有不同的方法来做同样的事情。

# javascript - 暂时禁用所有当前活动的 jQuery 事件处理程序

> ID：14849544
> 
> 赞同：7
> 
> 时间：2013-02-13T08:44:55.940
> 
> 标签：javascript, jquery, javascript-events

我正在`TD`双击可编辑表格元素：

```
$(document).on("dblclick", "#table>tbody>tr>td.cell", function(e) {
    if (e.which != 1 || e.shiftKey || e.altKey || e.ctrlKey)
        // need left button without keyboard modifiers
        return;
    reset_selection();
    var editor = document.createElement("div");
    editor.setAttribute("contenteditable", "true");
    editor.innerHTML = this.innerHTML;
    this.innerHTML = '';
    // this.style.padding = 0;
    this.appendChild(editor);
    $(document).on("*", stub);
    editor.onblur = function() {
        // this.parentNode.setAttribute("style", "");
        this.parentNode.innerHTML = this.innerHTML;
        sys.editor = null;
        $(document).off("*", stub);;
    };
    editor.focus();
});

function stub(e) {
    e.stopImmediatePropagation();
    return false;
} 
```

但是，当我双击可编辑 div 内的文本时，双击事件会传播到父 td，从而导致不良后果。我还想阻止其他事件（`select`,`mousedown`等），因此为每个事件编写一个存根对我来说并不好看。

![在此处输入图像描述](../Images/72064a5711054c6cc69a9afa132b8435.png)

有没有办法禁用所有当前活动的 jQuery 事件处理程序并在之后启用它们？或者以某种方式停止将所有事件从可编辑 div 传播到其父母？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T08:53:48.977

> 或者以某种方式停止将所有事件从可编辑 div 传播到其父母？

它可能不是很可口，但专门禁用事件*也不错：*

```
$(this).on("select mousedown mouseup dblclick etc", false); 
```

*（假设`this`是指您正在编辑的单元格。）*

毕竟，事件的数量是有限的，并且[`on`](http://api.jquery.com/on)允许您在以空格分隔的字符串中列出它们并通过传递来禁用它们`false`。

然后，您可以通过将相同的列表`false`再次传递到[`off`](http://api.jquery.com/off).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T08:49:50.303

使用开/关 JQuery 方法：

```
var myFunction = function(e) {
        if (e.which != 1 || e.shiftKey || e.altKey || e.ctrlKey)
            // need left button without keyboard modifiers
            return;
        reset_selection();
        var editor = document.createElement("div");
        editor.setAttribute("contenteditable", "true");
        editor.innerHTML = this.innerHTML;
        this.innerHTML = '';
        // this.style.padding = 0;
        this.appendChild(editor);
        $(document).on("*", stub);
        editor.onblur = function() {
            // this.parentNode.setAttribute("style", "");
            this.parentNode.innerHTML = this.innerHTML;
            sys.editor = null;
            $(document).off("*", stub);;
        };
        editor.focus();
};

function stub(e) {
    e.stopImmediatePropagation();
    return false;
}

//Active the events
$(document).on("dblclick", "#table>tbody>tr>td.cell", myFunction);

//Disable the events
$(document).off("dblclick", "#table>tbody>tr>td.cell",myFunction);

//Reactive the events
$(document).on("dblclick", "#table>tbody>tr>td.cell", myFunction); 
```

**更新**

`true`如果事件必须不考虑，您还可以管理设置为的变量：

```
var skipEvent = true;

$(document).on("dblclick", "#table>tbody>tr>td.cell", function (e) {
    //Check variable and skip if true
    if (skipEvent) 
        return false;

    if (e.which != 1 || e.shiftKey || e.altKey || e.ctrlKey)
    // need left button without keyboard modifiers
    return;
    reset_selection();
    var editor = document.createElement("div");
    editor.setAttribute("contenteditable", "true");
    editor.innerHTML = this.innerHTML;
    this.innerHTML = '';
    // this.style.padding = 0;
    this.appendChild(editor);
    $(document).on("*", stub);
    editor.onblur = function () {
        // this.parentNode.setAttribute("style", "");
        this.parentNode.innerHTML = this.innerHTML;
        sys.editor = null;
        $(document).off("*", stub);;
    };
    editor.focus();
}); 
```

# maven - 无法使用与测试用例类位于同一包中的 package-info.java 文件通过 maven 运行测试

> ID：14849545
> 
> 赞同：4
> 
> 时间：2013-02-13T08:45:01.460
> 
> 标签：maven

当我通过 Maven 运行一个简单的测试类时，今天发生了最奇怪的事情。在 Eclipse IDE 中，没有任何问题。

我的包有一个 JUnit 测试用例类和一个`package-info.java`文档类。

我发现它以`package-info.java`某种方式干扰了 Maven 编译器插件。删除后，测试运行良好。

当`package-info.java`包中存在 Maven 时，它会在日志中写入：

```
[ERROR] Failure executing javac, but could not parse the error:
javac: invalid source release: **/*.java
Usage: javac <options> <source files>
use -help for a list of possible options 
```

我怎样才能让 Maven 跳过，`package-info.java`以便我可以将它保存在包文件夹中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T08:48:26.153

几天前我遇到了完全相同的问题，并通过在我的 pom.xml 文件中输入它来解决它：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.3.2</version>
    <configuration>
        <source>1.6</source>
        <target>1.6</target>
    </configuration>
    <executions>
        <execution>
            <phase>test-compile</phase>
            <goals>
                <goal>testCompile</goal>
            </goals>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <testSource> **/*.java</testSource>
                <testExcludes>
                    <exclude>**/package-info.java</exclude>
                </testExcludes>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

*It is the testExcludes element that makes Maven forget the package-info.java class.*

# sql - 从 SQL Server 获取准确的编辑数据

> ID：14849546
> 
> 赞同：1
> 
> 时间：2013-02-13T08:45:04.430
> 
> 标签：sql, sql-server, database, sql-server-2008

我有两个表：

1.  `Articles(artID, artContents, artPublishDate, artCategoryID, publisherID)`.

2.  `ArticleUpdated(upArtID, upArtContents, upArtEditedData, upArtPublishDate, upArtCategory, upArtOriginalArticleID, upPublisherID)`

    **用户登录应用程序并在 (artContents) 列更新文章的内容。我想知道：**

    1.  用户对文章内容进行了哪些更改？

    2.  我想存储文章的两个版本，原始版本和编辑版本！

**我应该怎么做以上两个任务：**

*   对表格进行任何必要的更改吗？

*   获取精确编辑数据的查询`(artContents)`。

    *   （确切的编辑数据意味着，coloumns 中可能有 5000 个字符，用户可以在中间或列字符中的其他位置编辑 200 个字符，我想要精确的那些编辑的字符，在编辑之前和之后）

*注意：我使用 ASP.NET 和 C# 进行开发*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:18:01.790

您将无法使用 SQL 进行精确的编辑。您需要一种算法，例如`diff`文件上的 Unix（在行级别上工作）。在字符级别，算法将是[Levenshtein distance](http://en.wikipedia.org/wiki/Levenshtein_distance)的一些变化。如果`diff`满足您的需求，您可以下载它，编写一个存储过程来调用它，然后在数据库中使用它。这将是相当昂贵的。

您维护不同版本的问题要容易得多。我会在每条记录上添加两个 colmnns`EffDate`​​ 和。您可以通过查找并找到在任何给定时间处于活动状态的 `EndDate`版本来获取最新版本。通常对于维护这样的表很有用。`EndDate is NULL``Merge`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:10:04.037

基本上这种类型的需求需要自定义日志记录。

您提供的示例，即“确切的编辑数据意味着，coloumns 中可能有 5000 个字符，用户可以在中间或列字符中的其他位置编辑 200 个字符，我想要在编辑和编辑后"

可能会有用户从文本的不同位置更新特定单词的情况。

您可以使用[http://nlog-project.org/](http://nlog-project.org/)进行日志记录，它是我们通常用于进行 .net 日志记录的快速而强大的工具。

你也可以看看 [http://www.codeproject.com/Articles/38756/Two-Simple-Approaches-to-WinForms-Dirty-Tracking](http://www.codeproject.com/Articles/38756/Two-Simple-Approaches-to-WinForms-Dirty-Tracking) [Asp.net Event for change tracking of entity](https://stackoverflow.com/questions/1915574/asp-net-event-for-change-tracking-of-entities) [什么是最好的实现方式对象上的更改跟踪](https://stackoverflow.com/questions/2363801/what-would-be-the-best-way-to-implement-change-tracking-on-an-object)

以上网址将清除一些空气，如何做到这一点。

您显然需要追踪并存储每个更改。

# jsp - 如何将参数从正文页传递到图块中的标题页？

> ID：14849547
> 
> 赞同：2
> 
> 时间：2013-02-13T08:45:16.013
> 
> 标签：jsp, tiles

我的瓷砖布局页面有三个部分，即页眉、正文和页脚。

布局是这样的，页面的标题必须在标题中定义。有什么办法可以从正文页标题到标题页？

瓷砖.xml

```
<definition name="mobile.base.definition" template="/WEB-INF/jsp/mobile/layout/baseLayout.jsp">
   <put-attribute name="header" value="/WEB-INF/jsp/mobile/common/header.jsp" />
   <put-attribute name="menu" value="/WEB-INF/jsp/mobile/common/menu.jsp" />
   <put-attribute name="footer" value="/WEB-INF/jsp/mobile/common/footer.jsp" />
</definition> 
```

布局.jsp

```
 <%@ page contentType="text/html; charset=utf-8" language="java" %>

<%@ taglib uri="http://tiles.apache.org/tags-tiles" prefix="tiles" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://www.springframework.org/tags" prefix="spring"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    </head>

    <body>
        <div id="wrap">
            <header id="header">
                <tiles:insertAttribute name="header"  />
            </header>

            <div id="mainPage">
                <div class="container">
                    <div class="row-fluid">
                        <div class="span12">
                            <tiles:insertAttribute name="body" />
                        </div>      
                    </div>
                </div>
            </div>
        </div>
        <footer id="footer">
            <tiles:insertAttribute name="footer"  />
        </footer>

    </body>
</html> 
```

头文件.jsp

```
 <header id="header">
<div class="container-fluid">
 <div class="row-fluid">
    <aside class="span1">
        <div class="btn-group menu-highlight">
            <button class="btn btn-link dropdown-toggle" data-toggle="dropdown">
                <span>+</span>
            </button> 
           <div class="dropdown-menu">
            <h1><img src="img/logo-text.jpg" width="106" height="23" alt=" " /> <i class="icon-remove icon-white"></i></h1>
            <ul class="">
            <li><a href="#" class="active"><span>Home</span> <b><img src="img/icon-home.png" width="19" height="17" alt=" " /></b></a></li>
                <li><a href="#"><span>Account</span> <b><i class="icon-star"></i></b></a></li>
                <li><a href="#"><span>Contact</span> <b><i class="icon-comment"></i></b></a></li>                                
                <li><a href="#"><span>Calender</span> <b><i class="icon-calendar"></i></b></a></li>                                                
            </ul>
           </div>

        </div>
    </aside>
    <section class="span11 head-right-panel">
        <header>
         <hgroup class="span8"><h1 class="ellipsis"> Page Title</h1></hgroup>
        <span class="logo">
            <img src="img/logo.jpg" width="118" height="41" alt=" " />  
        </span>    
        </header>
    </section>
  </div>  
</div>
</header> 
```

如果您看到 header.jsp 有页面标题。理想情况下，我们需要一个占位符，它应该被每个 body.jsp 中定义的页面标题替换

# asp.net-mvc-3 - 验证属性被缓存

> ID：14849550
> 
> 赞同：3
> 
> 时间：2013-02-13T08:45:36.560
> 
> 标签：asp.net-mvc-3, validation, custom-attributes

我在名为 DateRange 的自定义验证属性中有以下代码：

```
 private DateTime _minDate = DateTime.Today.AddYears(-100);
    private DateTime _maxDate = DateTime.MaxValue;

    // String representation of the Min Date (yyyy/MM/dd)
    public string Min
    {
        get { return FormatDate(_minDate, DateTime.Today.AddYears(-100)); }
        set { _minDate = value == "Today" ? DateTime.Today : ParseDate(value, DateTime.Today.AddYears(-100)); }
    }
    // String representation of the Max Date (yyyy/MM/dd)
    public string Max
    {
        get { return FormatDate(_maxDate, DateTime.MaxValue); }
        set { _maxDate = value == "Today" ? DateTime.Today : ParseDate(value, DateTime.MaxValue); }
    } 
```

然后我在实体模型的某些属性的元数据中写入这个属性，如下所示：

```
[DateRange(Max = "Today")]
public string SomeDateProperty { get; set; }; 
```

我在 Max 属性的 getter 上设置了断点。我第一次打开视图时，断点被激活并且 DateTime.Today 得到了。随后的视图刷新不会激活断点并获得旧值。我认为它是缓存验证属性。我的问题是：这是因为缓存吗？如果是，那么如何禁用它？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-08T13:37:06.223

自定义属性的构造函数只被命中一次，不知道如何关闭任何类型的缓存。我解决这个问题的方法是只处理“IsValid”方法中的日期计算。

我在过去属性中创建了一个日期，该日期需要过去的日期，但您可以设置过去多长时间有效。

```
public class DateInPastAttribute : ValidationAttribute
{
    private const string DefaultErrorMessage = "'{0}' must be in the past.";

    public int DaysInPastAllowed { get; set; }

    public DateInPastAttribute(int daysInPastAllowed)
        : base(DefaultErrorMessage)
    {
        this.DaysInPastAllowed = daysInPastAllowed;
    }

    public override bool IsValid(object value)
    {
        if (!(value is DateTime))
        {
            return true;
        }

        DateTime maxDate = DateTime.Now;
        DateTime minDate = maxDate.AddDays(this.DaysInPastAllowed * -1);

        DateTime dateValue = (DateTime)value;
        return
            minDate <= dateValue &&
            dateValue <= maxDate;
    }

    public override string FormatErrorMessage(string name)
    {
        return string.Format(CultureInfo.CurrentCulture, this.ErrorMessageString, name);
    }
} 
```

然后，您可以像这样在视图模型中使用它：

```
[DateInPast(365)]
public DateTime DateReceived { get; set; } 
```

这将允许在去年输入日期。您可以根据您需要的场景修改它。

# jsf - glassfish 更改默认 jsf impl

> ID：14849553
> 
> 赞同：0
> 
> 时间：2013-02-13T08:45:55.597
> 
> 标签：jsf, glassfish, liferay

我需要更改 glassfish 3.0.1 提供的默认 jsf impl 提供的版本是 2.0.2 版，但我需要更高版本的东西，例如 2.1.x，因为我使用 liferay 门户 6.0.6，它在尝试将 ResourceResponseImpl 转换为 HttpServletResponse 时抛出异常. 我得到一个提示，如果我将 jsf impl 更改为 2.1.x，它应该可以工作。无论如何，我只是想确保我做对了。我应该只更改 jsf-impl 和 jsf-api jar 还是做其他事情。有两个罐子我不确定是否应该更改，即 jsftemplating 和 jsf-connector..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:21:05.857

您可以将所需的 jsf 实现打包到您的应用程序中。您需要将以下内容添加到 glassfish-web.xml 的行中：

```
<class-loader delegate="false" />
<property name="useBundledJsf" value="true" /> 
```

您可以交替更新 glassfish 附带的 jsf 实现。您需要从中删除（或备份）文件 jsf-api.jar 和 jsf-impl.jar`glassfish3\glassfish\modules\`并放置新的 jsf 实现，例如来自[javaserverfaces.java.net](http://javaserverfaces.java.net/download.html)的最新二进制版本。

# android - 从 android 在 facebook 墙上发布消息。

> ID：14849565
> 
> 赞同：0
> 
> 时间：2013-02-13T08:46:41.753
> 
> 标签：android, facebook

我已经从 myapp 成功登录到 facebook 并获得了 accesstoken，但是当我在墙上发布消息时，我得到了以下异常。

```
{"error":{"message":"(#10) Application does not have permission for this action","type":"OAuthException","code":10}} 
```

代码是：

```
Bundle parameters = new Bundle();
parameters.putString("message", "hello ...");
parameters.putString(Facebook.TOKEN, mFacebook.getAccessToken());  
try {
    String response = mFacebook.request("me/feed", parameters,"POST");
    } catch (IOException e) 
{} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:49:43.193

请从您自己的应用程序中授予 publish_stream 权限。

```
private static final String[] PERMISSIONS =
            new String[] {"publish_stream", "read_stream",}; 
```

当您初始化登录按钮时，您需要通过权限。

```
 mLoginButton.init(this, mFacebook,PERMISSIONS); 
```

# objective-c - [NSArray arrayWithArray:] 和 [NSArray copy] 的区别

> ID：14849570
> 
> 赞同：20
> 
> 时间：2013-02-13T08:46:59.077
> 
> 标签：objective-c, cocoa-touch, cocoa, nsmutablearray, nsarray

最近我经常使用数组，我想知道..这两行之间有什么区别。

```
NSArray *array = [NSArray arrayWithArray:someArray]; 
```

和

```
NSArray *array = [someArray copy]; 
```

哪个更快？如果我们有`NSMutableArray`and`mutableCopy`怎么办？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-13T08:52:18.710

> 哪个更快？

别担心。过早的优化。

主要区别：第一种方法会产生一个自动释放的“副本”，您不拥有也不必释放，而您确实拥有在第二行创建的对象。顺便说一句，这两个数组都是不可变的。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-13T09:35:17.317

除了其他答案，还请注意，当`someArray`为 nil 时，第一行将`array`指向一个空数组，第二行将使其指向 nil。这可能是一个重要的区别，尤其是在可变数组中。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-13T08:56:33.753

两者的区别在于后者会被保留。前者将自动发布。

两个版本都制作了数组的浅拷贝。

```
NSMutableArray *notMutableReally = [NSArray arrayWithArray:aMutableArray]; 
```

应该给您一个编译器警告，因为您将尝试将 a 分配`NSArray`给 a `NSMutableArray`。

采用。

```
NSMutableArray *mutableArrayCopy = [NSMutableArray arrayWithArray:aMutableArray]; 
```

哪个更快？别担心，它们都比您将要做的其他事情快得多。如果您真的在乎，请与 Instruments 联系。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-13T09:00:45.630

主要区别在于它`-copy`知道如何复制自己（可以更有效地完成它，并且可能使用更适应的 NSArray 子类），同时`+arrayWithArray:`将创建一个新实例`NSArray`（嗯，实际上是 Foundation 用于数组的具体类）并提供它与初始对象中的对象列表相同。它还将添加一个额外的自动释放。

（非常`-copy`非常）可能更有效。

事实上，对于 immutable `NSArrays`，`-copy`它只是在做`-retain`，所以它甚至不需要创建一个新实例。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-01-15T08:43:05.140

```
NSMutableArray *arr = [NSMutableArray array];
for ( int i = 0; i < 10000; i ++)
{
    [arr addObject:@(i*1000000ULL)];
}
// MARK
// arr = (id)[NSArray arrayWithArray:arr];

NSTimeInterval t = [NSDate timeIntervalSinceReferenceDate];
NSArray *res = nil;
for ( int i = 0; i < 10000; i ++)
{
    res = [arr copy];
}
NSLog(@"time A: %f", [NSDate timeIntervalSinceReferenceDate] - t);
t = [NSDate timeIntervalSinceReferenceDate];
for ( int i = 0; i < 10000; i ++)
{
    res = [NSArray arrayWithArray:arr];
}
NSLog(@"time B: %f", [NSDate timeIntervalSinceReferenceDate] - t); 
```

时间 A：1.572795，时间 B：1.539150，B [NSArray arrayWithArray:] 总是更快，但时间差非常小。**但是，如果我们取消注释“MARK”并从 NSArray 而不是 NSMutableArray 获取副本，我们将有其他运行时 A：0.000473 时间 B：1.548400 结果：约快 3200 倍**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-13T08:52:00.600

其中之一可能更快。运行它们一百万次，看看是否有人获胜。

在`NSArray`vs的情况下`NSMutableArray`，被复制的不可变数组不必实际返回副本，因为它无法更改。但是，如果您有一个可变数组，则需要复制它，因为您可以更改原始数组。当然，做一个可变副本总是需要返回一个新对象。

在您的整个应用程序中，与正在发生的其他事情相比，速度和内存差异可能并不重要。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-25T23:47:42.893

在 Swift 中，情况非常不同。感谢 Swift 的新开源 Foundation，我们知道虽然`init(array:)`使用给定的项目（如果有）创建一个新数组，但`copy()`只需返回`self`.

```
 public override func copy() -> AnyObject {
        return copyWithZone(nil)
    }

    public func copyWithZone(zone: NSZone) -> AnyObject {
        return self
    } 
```

^([https://github.com/apple/swift-corelibs-foundation/blob/master/Foundation/NSArray.swift#L82](https://github.com/apple/swift-corelibs-foundation/blob/master/Foundation/NSArray.swift#L82))

```
 public convenience init(array: [AnyObject]) {
        self.init(array: array, copyItems: false)
    }

    public convenience init(array: [AnyObject], copyItems: Bool) {
        let optionalArray : [AnyObject?] =
            copyItems ?
                array.map { return Optional<AnyObject>(($0 as! NSObject).copy()) } :
                array.map { return Optional<AnyObject>($0) }

        // This would have been nice, but "initializer delegation cannot be nested in another expression"
//        optionalArray.withUnsafeBufferPointer { ptr in
//            self.init(objects: ptr.baseAddress, count: array.count)
//        }
        let cnt = array.count
        let buffer = UnsafeMutablePointer<AnyObject?>.alloc(cnt)
        buffer.initializeFrom(optionalArray)
        self.init(objects: buffer, count: cnt)
        buffer.destroy(cnt)
        buffer.dealloc(cnt)
    } 
```

^([https://github.com/apple/swift-corelibs-foundation/blob/master/Foundation/NSArray.swift#L116](https://github.com/apple/swift-corelibs-foundation/blob/master/Foundation/NSArray.swift#L116))

所以，显然，`copy()`速度更快，现在你知道它们是如何工作的了！[（仅在 Swift 中）]

# javascript - Tizen 平台的 Facebook 访问（使用 JS）

> ID：14849576
> 
> 赞同：3
> 
> 时间：2013-02-13T08:47:28.740
> 
> 标签：javascript, facebook, facebook-javascript-sdk, tizen, tizen-web-app

对于我在 Tizen 上的应用程序，我需要进行 Facebook 集成（能够登录并将一些状态发布到墙上）。

但我无法使用 FacebookJS SDK，因为我需要设置域 URL。不幸的是，对于 Tizen，我没有任何 URL，因为它不是经典的 Web 应用程序。我不能`http://localhost`用作域名，因为 Tizen 应用程序的 URL 类似于`file://some/location/app`.

有人尝试将 Facebook 集成到 Tizen 应用程序吗？

PS。这里的链接与解决方法[https://developer.tizen.org/documentation/social-network-services-tizen](https://developer.tizen.org/documentation/social-network-services-tizen)但示例不起作用，因为不推荐使用的 facebook API 返回一些错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-18T15:07:41.620

作为重定向 url，您可以在这种情况下使用标准 facebook webpade [https://www.facebook.com/connect/login_success.html](https://www.facebook.com/connect/login_success.html)，登录成功后，您必须从重定向 url 读取参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:39:14.840

您也可以使用`http`资源，但您需要`access`在清单文件中定义元素`config.xml`才能访问所需的资源。

请参阅我在此处给出的答案以了解原因和详细信息： [使用 Facebook API for Tizen 上传视频？](https://stackoverflow.com/questions/14751734/upload-a-video-using-facebook-api-for-tizen/14829203#14829203)

# android - 安卓设备注册ID的服务器端应用

> ID：14849581
> 
> 赞同：0
> 
> 时间：2013-02-13T08:47:45.313
> 
> 标签：android

我正在为 android 开发一个应用程序，以从客户端的相应设备获取设备 ID。

我正在关注[本教程](http://developer.android.com/google/gcm/gs.html)。

在这里，我需要制作服务器端应用程序以从 GCM 获取设备 ID，这让我感到震惊。

实际上，我不是 Android 程序员，我对这个平台一无所知，我只想生成推送通知中进一步需要的设备 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:58:36.627

根据[http://www.google.com/events/io/2011/sessions/android-protips-advanced-topics-for-expert-android-app-developers.html](http://www.google.com/events/io/2011/sessions/android-protips-advanced-topics-for-expert-android-app-developers.html)您应该生成一个唯一的安装 ID，可以是通过 UUID 完成：

```
String installationID = UUID.randomUUID().toString(); 
```

生成安装ID 后，您可以将ID 保存在SharedPreferences 中。

# c# - MDI Parent 的 OnFormClosing 方法

> ID：14849583
> 
> 赞同：0
> 
> 时间：2013-02-13T08:47:50.410
> 
> 标签：c#, .net, winforms

每当我单击红色 X 按钮关闭 MDI 父窗体时，它首先调用 MDI 子窗体的所有 OnFormClosing 方法，然后调用 MDI 父窗体的 OnFormClosing 方法。但是，在我的 MDI Parent 的 OnFormClosing 方法中，我可以`e.Cancel = true;`在代码中的某处编写。在这种情况下，它不应该调用 MDI 子窗体的 OnFormClosing 方法。

1-) 有没有办法确保关闭 MDI Parent 不会触发 MDI 子窗体的 OnFormClosing 方法？

2-) 是否有针对 MDI 子窗体的方法，以便在我关闭该子窗体时调用此方法，而在关闭其父窗体时不会调用此方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:09:59.740

您可以使用较低级别的方法，[`WndProc`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.wndproc.aspx)并处理表单的[`WM_CLOSE`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632617.aspx)事件：

```
protected override void WndProc(ref Message m)
{
    if (m.Msg == 0x10) // WM_CLOSE
    {
        // Process the form closing. Call the base method if required,
        // and return from the function if not.
        // For example:
        var ret = MessageBox.Show("Do you really want to exit?", "Exit", MessageBoxButtons.YesNo, MessageBoxIcon.Question);
        if (ret == System.Windows.Forms.DialogResult.No)
            return;
    }
    base.WndProc(ref m);
} 
```

将此代码放入 MDI 父窗体。它会`FormClosing`在子表单上的事件之前发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:03:37.330

我猜你无法控制它，如此处所述

[表单关闭事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formclosing.aspx)

> 如果窗体是多文档界面 (MDI) 父窗体，则在引发 MDI 父窗体的 FormClosing 事件之前引发所有 MDI 子窗体的 FormClosing 事件。同样，在引发 MDI 父表单的 FormClosed 事件之前引发所有 MDI 子表单的 FormClosed 事件。取消 MDI 子窗体的 FormClosing 事件不会阻止引发 MDI 父窗体的 FormClosing 事件。但是，取消事件会将作为参数传递给父窗体的 FormClosingEventArgs 类的 Cancel 属性设置为 true。若要强制关闭所有 MDI 父窗体和子窗体，请将 MDI 父窗体中的 Cancel 属性设置为 false。

# python - VRML 到 X3D 的转换

> ID：14849593
> 
> 赞同：10
> 
> 时间：2013-02-13T08:48:37.697
> 
> 标签：python, django, vrml, x3d, x3dom

我正在开发一个管理 VRML 文件的 Web 应用程序。我还想让用户看到上传的文件，而不需要特定的插件或播放器。X3DOM 允许在大多数浏览器上查看没有插件的 X3D 文件，所以我想使用它。

唉，它适用于 X3D 文件，而不是 VRML 文件。我需要将 VRML 文件转换为 X3D 格式。

X3DOM 背后的同一个人发布了一个名为 InstantReality 的包，该包具有将 VRML 转换为 X3D 的实用程序。但是，我宁愿不使用外部实用程序（我什至不确定是否可以在商业环境中使用它，我找不到它的使用条款），而是从我的应用程序代码中调用转换例程.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T14:30:43.900

[网格实验室](http://meshlab.sourceforge.net/)！[有一个名为MeshLab](http://meshlab.sourceforge.net/)的开源项目，它对3D 网格进行各种处理。它还有一个名为[MeshlabServer](https://github.com/cnr-isti-vclab/meshlab/blob/master/docs/meshlabserver.1.txt)的命令行工具。

运行`meshlabserver.exe -i <wrl file> -o <x3d file>`执行转换（非常快）。由于它是开源的，因此我没有任何许可问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-13T20:05:57.977

你说的是这个在线转换器吗？ [http://doc.instantreality.org/tools/x3d_encoding_converter/](http://doc.instantreality.org/tools/x3d_encoding_converter/) 您可能会构建一些脚本来将 vrml 转换为 x3d/x3dom，然后存储和/或显示

以及搅拌机 aopt 和其他人应该能够在命令行上将 vrml 转换为 x3d。根据您的服务器操作系统，这也可以是批处理/脚本化的

我急于完成一些其他工作，但希望这会有所帮助。

如果您需要更多信息或示例，请告诉我，看看我能做什么

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-16T18:57:29.407

好的，所以我认为这是您的完整解决方案

1）用户上传一个vrml文件

2）该文件被保存到（文件或数据库）

3) 在确认 vrml 文件已被保存（并可能验证为正确的 vrml 语法）后，它被转换并保存到 x3d（再次作为文件或 db），使用 aopt 这将通过 aopt -i input.wrl -o 完成输出.x3d

仅供参考：aopt 适用于 linux windows 和 mac

因为你使用 python 这也许是一种你可以用搅拌机做的方式虽然没有 vrml 到 x3d 的完整示例，这个链接应该让你开始 [http://wiki.blender.org/index.php/Extensions:2.6/ Py/脚本/导入导出/Wavefront_OBJ#Command_Line_Converting](http://wiki.blender.org/index.php/Extensions:2.6/Py/Scripts/Import-Export/Wavefront_OBJ#Command_Line_Converting)

4) 通过 x3dom 显示 x3d

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-11T15:02:08.030

我还需要将 VRML .wrl 转换为 .x3d；我试过`meshlab`（`meshlabserver`），但不幸的是，我拥有的版本（`.deb` `2016.12~trusty2`在 Ubuntu 14.04 上）将所有内容压缩到一个网格中，并在此过程中失去颜色。

我发现[view3dscene](https://castle-engine.sourceforge.io/view3dscene.php)可以从命令行进行转换，其中材料/颜色保存在 中`.x3d`，因为它们在`.wrl`：

```
view3dscene mymodel.wrl --write --write-encoding xml > mymodel.x3d 
```

由于`view3dscene`既可以作为文件的查看器`.wrl`，`.x3d`也可以立即使用它来检查转换后的（或原始）文件是否有颜色。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-11T16:47:39.557

如果您只是想将 X3D XML 编码文件转换为 VRML Classic 编码文件，您可以使用 Titania，[http](http://titania.create3000.de/) ://titania.create3000.de/ 。打开您的 .x3d 文件并将其另存为 .x3dv 或 .wrl。

Titania 还带有一个命令行实用程序 »x3dtidy«，它也可以进行转换。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-28T20:08:23.487

您可以使用此工具（可以从命令行运行的 java jar）将 VRML 转换为 X3D：

[http://www.deem7.com/vrmlmerge/howto.php](http://www.deem7.com/vrmlmerge/howto.php)

```
java -jar VrmlMerge-[version].jar -convert inputfile.wrl [outputfile.x3d] 
```

[执照](http://www.deem7.com/vrmlmerge/license.php)：_

> VrmlMerge 可免费用于非商业用途。如果您以某种方式从 VrmlMerge 中赚钱，那么我希望您与我联系以就某些使用条款达成一致。VrmlMerge 是“按原样”提供的，对于它可能对您、您的计算机、文件、数据、妻子、大脑等造成的任何损害，我不承担任何责任。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-01-21T01:40:51.457

由于 ClassicVRML X3D 编码是 VRML97 标准的直接继承者，因此在大多数情况下，您可以复制文件，将**.wrl**文件扩展名重命名为**.x3dv**文件扩展名，并将场景标题从

```
#VRML V2.0 utf8 
```

到

```
#VRML V3.3 utf8
PROFILE Immersive 
```

存在许多转换器，包括商业和开源的。完整列表保存在

*   X3D 资源：转换和翻译工具
*   [http://www.web3d.org/x3d/content/examples/X3dResources.html#Conversions](http://www.web3d.org/x3d/content/examples/X3dResources.html#Conversions)

# mediawiki - 启用 mediawiki 功能以呈现 wikitext

> ID：14849594
> 
> 赞同：0
> 
> 时间：2013-02-13T08:48:43.330
> 
> 标签：mediawiki

我的 mediawiki 版本是 1.16.5。我有一个从数据库中选择随机引用并将其显示在 wiki 页面上的函数。当我使用 html 时会呈现斜体和粗体，但是，我希望能够使用 wikitext，特别是外部链接格式，即

```
[http://mediawiki.org MediaWiki] 
```

目前，如果使用类似上面的内容，它不会被渲染并按字面显示。这里有一些关于这里需要什么的参考：[http](http://www.mediawiki.org/wiki/Manual:Tag_extensions#How_do_I_render_wikitext_in_my_extension.3F) ://www.mediawiki.org/wiki/Manual:Tag_extensions#How_do_I_render_wikitext_in_my_extension.3F但我不知道如何实现这一点。

这是代码：

```
function wfGetQuote() {
    $randstr = wfRandom();
    $row = selectRandomQuoteFromDB( $randstr );

    if( !$row )
        $row = selectRandomQuoteFromDB( "0" );

    if( $row ) {
        list( $quote, $attribution ) = explode( "\n", $row->quote_text );
        return '<div id="trrandomquote"><div id="trquote">'. $quote .'</div> <span>'. $attribution .'</span></div>';
    }
    else
        return 'Error: No quote found';
}

function selectRandomQuoteFromDB( $randstr ) {
    global $wgUser, $site;

    $lang = $wgUser->getOption( 'language' );
    if( $site == 'wiki' )
        $lang = 'en';

    $dbr = wfGetDB( DB_SLAVE );
    $use_index = $dbr->useIndexClause( 'quote_random' );
    $quote = $dbr->tableName( 'quote' );

    $sql = "SELECT quote_text
        FROM $quote $use_index
        WHERE quote_random >= $randstr
        AND quote_lang = '$lang'";

    $sql = $dbr->limitResult( $sql, 1, 0 );
    $fname = 'RandomQuote::selectRandomQuoteFromDB';
    $res = $dbr->query( $sql, $fname );
    return $dbr->fetchObject( $res );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:00:36.403

通常我使用[$wgOut->addWikiText( $msg );](http://www.mediawiki.org/wiki/Manual%3a%24wgOut) 功能。

我会将您的代码修改为：

```
function wfGetQuote() {
  global $wgOut; // Added line

  $randstr = wfRandom();
  $row = selectRandomQuoteFromDB( $randstr );

  if( !$row )
      $row = selectRandomQuoteFromDB( "0" );

  if( $row ) {
      list( $quote, $attribution ) = explode( "\n", $row->quote_text );
      $wgOut->addWikiText( '<div id="trrandomquote"><div id="trquote">'. $quote .'</div> <span>'. $attribution .'</span></div>' );
  }
  else
      return 'Error: No quote found';
} 
```

我尚未对其进行测试，但它可能会完成您正在寻找的工作。

# android - Android中的图像转换？

> ID：14849595
> 
> 赞同：0
> 
> 时间：2013-02-13T08:48:49.840
> 
> 标签：android, image, bitmap, jpeg

> 我想构建一个转换图像格式的应用程序。我正在尝试将 JPG 图像转换为 BMP，但这样做会导致 OOM，因为应用程序内存有限，无法使用数组来存储图像以进行转换。如果是这种情况，怎么有应用程序做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:57:05.727

Android 应用程序的内存是有限的。可用内存量因设备而异。因此，在旧设备上编辑大图像可能真的是个问题。

解决这个问题的方法是使用 NDK。在 NDK 中，您可以分配比 Java 应用程序更多的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:55:23.413

我不知道实际转换的样子，但在每种情况下，您都需要一个缓冲区或类似的东西来消耗 jpg。由于 Android 内存堆在 24-48mb（一个内存块）之间，因此您在尝试转换时会耗尽内存。

# variables - jenkins - 变量不可见

> ID：14849598
> 
> 赞同：0
> 
> 时间：2013-02-13T08:48:55.780
> 
> 标签：variables, jenkins

我正在尝试在构建作业后发送的电子邮件中显示自定义消息。我想包含*svn url*和另一个变量*BranchId*，代码从中签出到电子邮件正文中。

我`SVN_URL_1`按照 jenkins 作业配置页面中字段的快速帮助中给出的尝试进行了尝试，但它在电子邮件中显示为原样，即我得到了实际的字符串`$SVN_URL_1`而不是值。

我尝试添加一个环境变量，如下所示

![设置环境变量](../Images/75f3d17703a2ea7cd1a77d4d96933919.png)

输出相同，我按原样得到字符串`$BranchId`。

任何想法如何定义这些变量并稍后在电子邮件中使用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:36:24.137

我试图将变量显示为`$name`，但显示传递给上述作业/环境变量集的任何环境变量/参数的正确语法是

```
${ENV,var="name"} 
```

例如

```
${ENV,var="PATH"}
${ENV,var="BranchId"} 
```

# javascript - 加载外部 html 文件到 div 并使用它的 js 函数

> ID：14849606
> 
> 赞同：0
> 
> 时间：2013-02-13T08:49:31.253
> 
> 标签：javascript, jquery, html

我有一些 div：

```
<div id='dialog'></div> 
```

现在我想在这个 div 中加载一个外部 html 文件并使用它的 js 函数。

我知道我可以使用 jQuery.Load() 加载它并且工作正常，问题是我想使用 html js 函数。

主要问题是我有几个 div，我将这个 html 文件加载到其中，我希望当我激活 js 函数时它只能在特定的 div 上工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:54:38.660

将参数传递给您正在加载的视图，该参数将指示已加载视图的容器：

```
jQuery.Load(url, { containerId: 'dialog' }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:30:28.973

我记得当 jQuery1.4 发布时我遇到了问题。在那个版本中，`.load()`当指定目标容器时，突然开始剥离 js。

我当时做了什么：

1.  在不同的文件（比如*myhtml.html*和*myjs.js*）或视图中分离 html 和 js
2.  让我的 js 文件充当 js 模块，具有公共入口点函数（例如`initContent`），将 jQuery 元素作为参数
3.  *在myhtml.html*中有一个不可见的链接，即`<a href="myjs.js#initContent" class="dynamicJs" style="display:none;"></a>`
4.  *将myhtml.html*加载到我的目标 div 后，`$('a.dynamicJs')`在我的目标 div 中搜索以提取 js url，并从`href`
5.  如果之前没有加载 js，则通过 ajax 调用将 js 动态加载到页面中
6.  以目标div为参数动态调用入口函数

这也适用于 css。它需要一些时间在所有导航器上进行调整（IE 上的 css 部分数量有限，动态调用函数的方式不同），最后我得到了更多我期望的代码。它还需要对我的 html/js 模块进行大量重构（但我必须承认我最终拥有了一个非常干净的代码）

我确信现在有框架可以更好地处理这种情况。但这是我当时想出来的。

希望这会有所帮助

# c++ - Qt - 访问表格中的复选框

> ID：14849611
> 
> 赞同：0
> 
> 时间：2013-02-13T08:49:42.547
> 
> 标签：c++, qt, qwidget, qtablewidget, qcheckbox

我有一个表格，表格中的每一行的第一列都有一个复选框。我需要这样做，这样我才能检测到哪些复选框被选中，并在按下按钮时删除这些行。

```
QWidget * chkWidget = new QWidget();
QHBoxLayout *center = new QHBoxLayout();
center->setAlignment( Qt::AlignCenter );
center->addWidget( new QCheckBox );
chkWidget->setLayout( center );
ui->data_table->setCellWidget(rowCount,0, chkWidget); 
```

这做对了吗？如果是这样，我如何访问每行的复选框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:55:55.273

我谈论一个QTableWidget。您可以使用 QList。您将 QCheckBox 保存到此 QList 中并在有一些更改时使用它

也许您应该查看文档

*   QTableWidget：[链接](http://doc.qt.digia.com/stable/qtablewidget.html)
*   QList：[链接](http://qt-project.org/doc/qt-4.8/qlist.html)

这是一个解决方案。我目前无法运行它，所以请告诉我它是否有效。请验证行值。我不确定是否有可能，当您删除最后一行时，该行的值可以是 -1 ;)

```
#include "TestTableWidget.h"
#include "ui_TestTableWidget.h"

TestTableWidget::TestTableWidget(QWidget *parent) : QMainWindow(parent), ui(new Ui::TestTableWidget)
{
    ui->setupUi(this);

    tableWidget = new QTableWidget(this);
    tableWidget->setColumnCount(1); // Just an example

    ui->gridLayout->addWidget(tableWidget);

    connect(tableWidget, SIGNAL(itemSelectionChanged()), this, SLOT(slotChange()));

    for(int i = 1; i < 10; i++)
    {
        addRow("Row " + QString::number(i));
    }
}

TestTableWidget::~TestTableWidget()
{
    delete ui;
}

void TestTableWidget::addRow(QString text)
{
    int row = tableWidget->rowCount();
    qDebug() << "Current row count is " + QString::number(row);

    // Add new one
    QTableWidgetItem *item = new QTableWidgetItem(text);
    tableWidget->insertRow(row);
    tableWidget->setItem(row, 0, item);

    // Add item to our list
}

void TestTableWidget::slotChange()
{
    int row = tableWidget->currentRow();
    qDebug() << "Change in table. Current row-index: " + QString::number(row);
    // This value is zero-based, so you can use it in our list
} 
```

# sql - 如何创建不会导致 DB2 挂起的查询？

> ID：14849622
> 
> 赞同：4
> 
> 时间：2013-02-13T08:50:13.717
> 
> 标签：sql, db2

我有一个包含三个表 A、B 和 C 的 DB2 数据库。

数据库是这样创建的：

> 创建数据库 DB 别名 DB AUTOMATIC STORAGE YES ON /home/db2inst1 使用 codedeset UTF-8 区域 en PAGESIZE 32768

*   表 A 为 28 列宽，1.8 米。行和 PID 是主键。这些列大多具有 int 类型，但有些是 varchar(200-400)。索引：PID
*   表 B 为 7 列宽，具有 14 个磨机。行和主键 PID_L。它还有 C_SOURCE 和 ROW_COUNT 列。索引：PID,C_SOURCE
*   表 C 为 20 列宽，带有 14 个磨机。行和主键 PID_S。它还有一个列 ROLE。索引：PID,PID_S

所有表都有列 PID

我需要一个汇总表 B 和 C 中的一些信息的表。选择适当项目的查询是：

```
SELECT
    T.*,
    (
        SELECT 
            COALESCE(SUM(ROW_COUNT),0)
        FROM 
            C as ITS,
            B as ITL
        WHERE 
            ITS.ROLE = 1
            AND ITS.PID = ITL.PID
            AND ITS.PID_S = ITL.C_SOURCE
            AND ITS.PID = T.PID
    ) AS RR
FROM 
    A as T; 
```

运行此查询时，DB2 服务器快速使用大约 3Gb 内存。但是，使用 top 时，CPU 使用率很少超过 5%，有的会跃升至 13% 左右。DB2 服务器是一个 RedHat6.2 VM，有 4 个内核，每个内核 2Ghz。

我让这个查询运行了 24 小时，似乎没有发生任何事情。其他查询，例如简单的选择等等，运行顺畅。

问题：

1.  对于可能完成相同任务的不同的、更有效的查询，您有什么建议吗？
2.  这个性能问题是否可能与数据库的配置有关？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T11:32:00.540

我会尝试“解释”功能，看看 db2 从你的查询中得到了什么

db2exfmt -d 数据库 -e 模式 -t -v % -w -1 -s % -# 0 -n % -g OTIC

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-28T13:37:29.340

您使用嵌套选择，我建议在第二个查询中调用您的表 A，并将连接条件保留在表 A 和表 C 上。

我认为它可以优化查询的响应时间，但这完全取决于表的创建（例如索引声明）。

最好的祝福，

# iphone - 通过实例方法获取图片

> ID：14849625
> 
> 赞同：0
> 
> 时间：2013-02-13T08:50:25.653
> 
> 标签：iphone, sdk

我试图从实例方法中获取图像作为回报，我正在以下列方式声明该方法，但给出错误。我正在使用 NSObject 类。

```
-(UIImage *)getAdImg; 
```

这给出了“预期类型”的错误。这是什么意思。我普通的视图控制器工作正常，但在 NSObject 类中它给出了这个错误。请指导以上。提前致谢。

这是我的 .h 文件

```
#import <Foundation/Foundation.h>
#import "JSON.h"

@interface adClass : NSObject
{
NSString *mStrPid;
NSString *mStrAppUrl;
}
@property (nonatomic, strong) NSString *mStrPid;
@property (nonatomic, strong) NSString *mStrAppUrl;
@property (nonatomic, strong) NSMutableArray *mArrAdsDesc;
@property (nonatomic, strong) NSMutableArray *mArrDeviceType;
@property (nonatomic, strong) NSString *mDevice;
@property (nonatomic, strong) NSString *mImgStr;

-(void)iphoneDevice;

-(UIImage *)getAdImg;   //(error line)

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:56:13.093

使用此代码

```
-(UIImage *)getAdImg
{
  UIImage *image=[[UIImage alloc]init];
  image.images=/**An Array of images**/
   return ima;
 } 
```

希望能帮助到你！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:15:42.560

你必须`#import <UIKit/UIKit.h>`（在哪里`UIImage`声明）

# javascript - 绘图应用程序 - 曲线拟合

> ID：14849630
> 
> 赞同：0
> 
> 时间：2013-02-13T08:50:34.360
> 
> 标签：javascript, canvas, drawing, curve-fitting

我目前正在开发一个基于网络的绘图应用程序，我使用指针的位置来生成一条线。速度决定了线条的宽度。

我的问题是浏览器事件在获取位置时不会产生干净的数据，因此宽度变得非常“抖动”，而不是柔软和平滑。

我想知道在制作绘图时平滑此类数据的最佳方法是什么？我正在考虑曲线拟合，但我不确定哪种算法在我的情况下可以更好地工作。

PS我不是每次都在画布上从头开始重画线，我只是添加“最后一部分”。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:01:12.343

您可以尝试从 paper.js 中提取“平滑”和“简化”功能（他们的 MIT 许可证允许这样做）。它在边缘检测项目中对我很有效。在这里查看：http: [//paperjs.org/tutorials/paths/smoothing-simplifying-flattening](http://paperjs.org/tutorials/paths/smoothing-simplifying-flattening)。

# c# - 带有图像蓝色背景的按钮

> ID：14849635
> 
> 赞同：1
> 
> 时间：2013-02-13T08:50:46.947
> 
> 标签：c#, silverlight, windows-phone-7

我在我的应用程序中创建了一个带有图像的按钮：

```
 <Button x:Name="favoriteButton" HorizontalAlignment="Left" VerticalAlignment="Top" Height="72" Width="99" Click="DidPressAddToFavorites" BorderBrush="{x:Null}" Foreground="{x:Null}">
                    <Button.Background>
                        <ImageBrush ImageSource="/Images/favouritesBWIcon@2x.png" Stretch="Uniform"/>
                    </Button.Background>
                </Button> 
```

我注意到，当用户按下按钮时，所有按钮都变成蓝色，当我释放按钮时，我又看到了它。知道如何解决吗？

编辑：

这是处理程序方法：

```
private void DidPressAddToFavorites(object sender, RoutedEventArgs e)
    {
        if (favoriteRep.ExistInFavorites(currentItem) == true)
        {
            this.SetButtonWithImage(favoriteButton, "/Images/favouritesBWIcon@2x.png");
            favoriteRep.RemoveFromFavorites(currentItem);
        }
        else
        {
            this.SetButtonWithImage(favoriteButton, "/Images/favouritesIcon@2x.png");
            favoriteRep.AddToFavorites(currentItem);
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T06:47:36.433

因为您没有添加状态，所以有三种状态 Normal、MouseOver、Pressed... 您必须为所有三种状态设置图像，以使其按您的意愿工作。这里是这样做的替代方法，不知道 c# 有什么更好的方法，你所要做的就是再添加两个 eventHndlers 鼠标悬停事件和按下事件，然后在它们中设置图像......好吧这样做的另一种好方法是尝试使用 blend Software 进行模板编辑

# sql - SQL Server 使用 CASE WHEN THEN 语句

> ID：14849636
> 
> 赞同：4
> 
> 时间：2013-02-13T08:50:48.693
> 
> 标签：sql, sql-server, case-when

我有一个这样的示例查询：

```
select t1.name,t1.bday,t2.address,t2.contactnum
from table1 as t1
left join table2 as t2 on t1.p_id = t2.p_id
where (case when @qualified = '2' then t2.role is null
        case when @qualified = '3' then t2.role is not null` end) 
```

当我执行查询时，会弹出一个错误指示：

> *关键字“is”附近的语法不正确。*

有什么想法可以解决这个问题吗？

谢谢！

此查询的目的是根据参数@qualified 上传递的值获取表中的空行和非空行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T08:53:48.417

试试这个：

```
select t1.name,t1.bday,t2.address,t2.contactnum
from table1 as t1
left join table2 as t2 on t1.p_id = t2.p_id
where (@qualified = '2' AND t2.role is null) OR (@qualified = '3' AND t2.role is not null) 
```

我相信这个语法代表了你试图实现的条件表达式。但是，这样`WHERE`的子句可能会导致性能问题。如果发生这种情况，您应该使用：

```
IF @qualified = '2' THEN
BEGIN
    select t1.name,t1.bday,t2.address,t2.contactnum
    from table1 as t1
    left join table2 as t2 on t1.p_id = t2.p_id
    where t2.role is null
END

IF @qualified = '3' THEN
BEGIN
    select t1.name,t1.bday,t2.address,t2.contactnum
    from table1 as t1
    left join table2 as t2 on t1.p_id = t2.p_id
    where t2.role is not null
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:57:37.770

试试这个（未经测试）

```
SELECT t1.name,t1.bday,t2.address,t2.contactnum
FROM table1 as t1
LEFT JOIN table2 AS t2 ON t1.p_id = t2.p_id
WHERE 
    CASE @qualified
        WHEN '2' THEN t2.role is null
        WHEN '3' THEN t2.role is not null 
    END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T09:02:26.483

语法不正确：请查看[http://msdn.microsoft.com/en-IN/library/ms181765.aspx](http://msdn.microsoft.com/en-IN/library/ms181765.aspx)

还要发布您的确切要求，以便轻松建议您如何使用 CASE。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T09:11:30.823

请试试：

```
select t1.name,t1.bday,t2.address,t2.contactnum
from table1 as t1
left join table2 as t2 on t1.p_id = t2.p_id
where (case when t2.role is null then '2' else '3' end)=@qualified 
```

# java - 在常规 java 项目中使用 android 地理编码

> ID：14849637
> 
> 赞同：0
> 
> 时间：2013-02-13T08:50:49.680
> 
> 标签：java, android, geocoding

我在这个主题上断断续续地做了一些谷歌研究，一周左右，我还没有找到任何结论性的东西。我只是想知道是否可以在常规 java 项目中使用 android 中的地理编码？

我一直在寻找，我看到的所有常规 java 的地理编码似乎对其使用有一些限制，而且我不记得使用 android 地理编码器读过任何类似的东西，所以我试图使用它而不是其他的。但是，如果有人对 java 程序的地理编码器有一些好的建议，请告诉我。

谢谢，鲍勃

PS我宁愿不使用google api，因为它只希望它显示在我没有做的地图上。我正在尝试将它们存储在数据库中。而另一个谷歌选项对调用 API 的数量有每日限制，所以再次提到这是一个限制。

如 google api 页面所述，它声明“注意：Geocoding API 只能与 Google 地图一起使用；禁止在不显示在地图上的情况下对结果进行地理编码。有关允许使用的完整详细信息，请参阅 Maps API 条款服务许可证限制。”

所以这对我来说不是一个选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:53:11.560

您应该能够使用 Google Geocoding API。[https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

如果您需要使用 Google 地图绘制课程，请查看此处[http://datamoil.blogspot.co.nz/2011/04/android-universal-intent-to-start.html](http://datamoil.blogspot.co.nz/2011/04/android-universal-intent-to-start.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:53:26.430

您始终可以使用基于 HTTP 请求的 Google 地理编码 API。

[https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

# wpf - WPF 控件作为资源字典中的静态资源，用于多个 WPF 窗口？

> ID：14849639
> 
> 赞同：7
> 
> 时间：2013-02-13T08:50:54.543
> 
> 标签：wpf, xaml, .net-4.0, resourcedictionary, staticresource

我在资源字典中有一个 Button 控件作为资源，如下所示：

```
<!--ButtonResources.xaml file-->
<ResourceDictionary 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Button x:Key="buttonResource" Content={Binding BoundText}/>
</ResourceDictionary>
<!--ButtonResources.xaml file--> 
```

我现在使用上面的按钮控件绑定到**2 个不同的 Windows** .xaml 文件中的 ContentControl 控件的**Content 属性**，每个文件都有自己的，因此每个窗口都应该根据每个窗口的属性值显示上面的按钮控件，如下所示。**`Window``DataContext``Content``ViewModel's` `BoundText`**

 **```
<Window x:Class="TestClass1" 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="ButtonResources.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
    <Grid>
        <ContentControl Content={StaticResource buttonResource}/>
    </Grid>
</Window> 
```

但是，问题在于两个窗口的 BoundText 属性显示相同的值，这意味着两个 WPF 窗口都具有来自资源的***相同***按钮控件实例，在两个窗口中都使用。

如何解决此问题，以便每个 Window 从资源中获取*单独*的按钮控件，并且仍然从它们**自己的 ViewModel中显示*****不同***的属性值？`BoundText`

 ****编辑：** 由于下面提到的原因`MSDN`，我不能使用 x:Shared="False" 属性来解决这个问题：

> • 包含项目的ResourceDictionary 不得嵌套在另一个ResourceDictionary 中。例如，对于已经是 ResourceDictionary 项的 Style 中的 ResourceDictionary 中的项，您不能使用 x:Shared。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T09:12:08.803

您是否尝试使用该`x:Shared`属性？

```
<ResourceDictionary 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Button x:Shared="False" x:Key="buttonResource" Content={Binding BoundText}/>
</ResourceDictionary> 
```

欲了解更多信息，请阅读[此处](http://msdn.microsoft.com/en-us/library/aa970778.aspx)。

如果这不起作用，您可以在资源中存储一个模板，而不是按钮，并在窗口中使用 ContentControl 来显示它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T09:11:07.173

尝试：

```
<Style TargetType="Button" x:Key="buttonResource">
    <Setter Property="Content" Value="{Binding BoundText}" />
</Style>
```

```
 <Button Style="{StaticResource buttonResource}" /> 
```****

# linux - SVN authz 使用 linux 组

> ID：14849654
> 
> 赞同：2
> 
> 时间：2013-02-13T08:52:13.903
> 
> 标签：linux, svn, authorization, authz, svn-administraton

是否可以设置 SVN authz 文件以使用 linux 服务器组？

为了尝试提供更多详细信息/示例，假设我有和 SVN authz 文件，如下所示：

```
[groups]
developers = linuxUserA, linuxUserB
reviewers = linuxUserC
endUsers = linuxGroupA  <- can I insert a Linux group here

[/project]
@developers = rw
@reviewers = r

[/project/downloads/]
@endUsers = r 
```

userA、userB 和 userC 都作为 Linux 用户存在，并按预期被授予访问权限。但是，linuxGroupA 的成员似乎没有被授予访问权限（在此示例中为下载文件夹）。

那么，svn authz 是否可以配置为引用一个 linux 组，其成员将获得访问权限（比如上面的下载文件夹）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:30:37.370

**不**

[groups] 部分的右侧**始终是 authz 文件的对象列表**（其他组、别名、用户）

`endUsers = ...`您可以通过处理 /etc/group 并将 linuxGroupA 的最终用户输出到 authz 文件来构建字符串

# asp.net-mvc-3 - 如何在 ASP.NET MVC 中使用下拉列表设置 Kendo UI 网格

> ID：14849659
> 
> 赞同：2
> 
> 时间：2013-02-13T08:52:24.183
> 
> 标签：asp.net-mvc-3, grid, kendo-ui

在进入这个社区提出我的问题之前，我已经彻底搜索了 google、bing 以及 Kendo UI 文档以获取信息，但似乎没有得到我想要的任何东西。

我想设置一个网格（强类型），其中一个列绑定到模型上的**List**类型的属性。此列应在下拉列表中显示此属性。这就是问题所在。

我看到的所有示例都使用 viewdata 类型来保存 IEnumerable 类型的数据。有人可以告诉我如何设置它，而且我发现 ClientTemplate 方法在这方面非常令人困惑。

顺便说一句，我是 Kendo UI 的新手。

谢谢。

# javascript - 如何使用 javascript 生成“pin 码”

> ID：14849664
> 
> 赞同：0
> 
> 时间：2013-02-13T08:52:47.433
> 
> 标签：javascript

所以基本上有一个游戏，你必须弄清楚“密码”才能继续，它是 6 位数字，我有脚本源，但我无法真正理解它是如何生成的，谁能解释它是如何完成的？

我在这里粘贴了完整的 javascript 代码：http: [//pastebin.com/nn9R7Nrw](http://pastebin.com/nn9R7Nrw)

我了解此引脚已通过以下方式验证：

```
 $('.pin').find('p').each(function(){

        pin = $(this);
        pinNumber = pin.html();

        if (pinNumber == '' && !valSet && val != ''){
            pin.html(val);
            pinVal += val;
            valSet = true;
        } else if (val == ''){
            pin.html('');
        }

        pinVal += pinNumber;

    }); 
```

如果我认为用户输入的值正在使用 pin.html 文档中的某些内容进行检查，我是否走在正确的道路上？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:55:33.227

此代码使用 jQuery 库，因此请查看.html() 函数以及该代码块中的其他函数的[JQuery API 文档和说明。](http://api.jquery.com)

# email - 表单提交上的 Drupal 电子邮件文件附件

> ID：14849665
> 
> 赞同：0
> 
> 时间：2013-02-13T08:52:58.353
> 
> 标签：email, drupal, mime-mail

我在我的一种内容类型的块中内置了一个表单，该内容类型有一个连接到节点的文件。

我目前有一个表格，它将向您输入的地址发送一封电子邮件，其中包含默认消息（即，如果您输入表格，me@myemail.com，此电子邮件将收到一条消息，内容为“感谢您的关注.. ..please find your document attach" etc) 但是，我在将该节点的文件附件附加到表单时遇到了困难，我已经下载了 mimemail 模块，但是没有很多关于如何做的文档.

（我很抱歉从 Drupal 特定的 SO 中重复这个问题，但这个区域似乎获得了更多的流量）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:02:44.933

首先，我会建议您过渡到网络表单，而不是您自己的定制解决方案——尽管这样很棒且令人钦佩。

在四处寻找用于测试和推荐的网络表单策略时，我发现了一些可以为您完成工作的东西。

看看[这个](http://justinphelan.com/post/add-attachment-drupal-webform-confirmation-email)教程。

# file - 为什么一个空文件有 3 个字节

> ID：14849672
> 
> 赞同：1
> 
> 时间：2013-02-13T08:53:26.200
> 
> 标签：file

我使用 Animex 生成了一个 dae 文件，但是在 chrome 中打开时，它没有被格式化。所以我用记事本删除了dae文件中的所有内容，它显示文件的大小是3字节而不是0，我尝试了很多方法但找不到原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:55:32.917

这是一个[UTF8 BOM](http://en.wikipedia.org/wiki/Byte_order_mark#UTF-8)。不要使用文本编辑器来修改非文本文件。

# android - Android 构建无法获取所有可用的“VERSION_CODES”

> ID：14849675
> 
> 赞同：5
> 
> 时间：2013-02-13T08:53:37.087
> 
> 标签：android, eclipse, android-manifest

目前我正在开发一个 android，我正在使用 eclipse 工具。因为我想获取项目可用的所有 android version_Codes 的列表。但目前我的工具/eclipse 只显示 version_codes 直到 Froyo。我已将最小 android sdk 值添加到 8，目标 sdk 值为 17 我有下面是我的 Androidmanifest.xml 和项目代码，我正在尝试实现代码

```
 Java file
int FROYO = android.os.Build.VERSION_CODES.FROYO;
int JELLYBEAN = android.os.Build.VERSION_CODES.JELLY_BEAN;

 Part of Androidmanifest.xml
<?xml version="1.0" encoding="utf-8"?>
<manifest package="com.Android.Afaria" android:versionCode="50" android:sharedUserId="com.afaria.client" 
xmlns:android="http://schemas.android.com/apk/res/android" android:versionName="6.60.6172">
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17" /> 
```

在 java 文件中，eclipse autosuggest 不建议任何高于 FROYO 的版本代码。![在此处输入图像描述](../Images/661e0c81b65a09d5a7c5c66a477803c3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-18T13:28:32.623

如果您不想更改项目构建目标并将最小 SDK 作为目标，您可以在类中将构建版本设置为常量并对其进行测试。从这里获取您想要测试的 SDK 的“恒定值”：http: [//developer.android.com/reference/android/os/Build.VERSION_CODES.html#GINGERBREAD_MR1](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html#GINGERBREAD_MR1)

然后在你的类中声明一个常量：

```
public static final int HONEYCOMB = 11; 
```

然后你可以在你的代码中检查这个常量，如下所示：

```
 if (Build.VERSION.SDK_INT < HONEYCOMB) {
             ...your code
         } 
```

注意：我已经在设备模拟器中对此进行了测试，并且似乎工作正常，如果实际设备上出现任何问题，我会更新我的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-13T01:49:47.977

右键单击您的项目。转到 Properties > android > 并选择 Jelly bean 作为您的目标构建。

等待几秒钟或执行 Project> clean ，它应该被修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T09:06:30.617

可能是一个错误，可能是一些限制。如果您想查看完整列表，可以[在此处查看](https://developer.android.com/reference/android/os/Build.VERSION_CODES.html)。

# android - 将 onBackkeyPressed() 覆盖为可见或不可见的布局

> ID：14849678
> 
> 赞同：0
> 
> 时间：2013-02-13T08:53:37.830
> 
> 标签：android

我正在尝试控制手机的后退按钮，并在按下后退键时设置一个可见的布局，但没有出现任何内容。我想知道是否可以这样做。

```
public boolean onKeyDown(int keyCode, KeyEvent ev) {

    switch(keyCode) {

    case KeyEvent.KEYCODE_BACK:

        if (main_layout.getVisibility() == View.VISIBLE) {

           finish();

        } else if (sub_layout.getVisibility() == View.VISIBLE){

            boutton_radio.setVisibility(View.VISIBLE);

            boutton_radio.setEnabled(true);

            sub_layout.setEnabled(false);

            sub_layout.setVisibility(View.GONE);

            main_layout.setVisibility(View.VISIBLE);

            main_layout.setEnabled(true);
        }

    return true;

    }
    return false;

    } 
```

在 backey 上使用也可以得到相同的结果

@覆盖

```
public void onBackPressed() {

    // TODO Auto-generated method stub

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:59:54.943

是的，我应该工作。我用它来做另一个功能，它也对你有用。这就是我在按下后退键时调用警报框的方式。

```
@Override
    public void onBackPressed() {
        final MediaPlayer areusure = MediaPlayer.create(TalkingWebBrowserActivity.this, R.raw.areusure);
        areusure.start();
        AlertDialog alertbox = new AlertDialog.Builder(this)
        .setMessage("Do you want to exit the Browser?")
        .setPositiveButton("Yes", new DialogInterface.OnClickListener() {

            // do something when the button is clicked
            public void onClick(DialogInterface arg0, int arg1) {

                finish();

            }
        })
        .setNegativeButton("No", new DialogInterface.OnClickListener() {

            // do something when the button is clicked
            public void onClick(DialogInterface arg0, int arg1) {
                           }
        })
          .show();

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:01:45.957

你在正确的道路上。:)

```
public void onBackPressed() {

if (main_layout.getVisibility() == View.VISIBLE) {

       finish();

    } else if (sub_layout.getVisibility() == View.VISIBLE){

        boutton_radio.setVisibility(View.VISIBLE);

        boutton_radio.setEnabled(true);

        sub_layout.setEnabled(false);

        sub_layout.setVisibility(View.GONE);

        main_layout.setVisibility(View.VISIBLE);

        main_layout.setEnabled(true);
    } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T09:02:06.890

为什么你要检查你的两个不同的东西。如果你输入你的 else if(main_layout.getVisability 而不是 sub main。试试看并告诉我是否解决了

# php - ReflectionClass::newInstance/newInstanceArgs 生成未定义的属性

> ID：14849681
> 
> 赞同：0
> 
> 时间：2013-02-13T08:53:48.347
> 
> 标签：php

当我尝试通过对象创建带有构造函数参数的新实例时，`ReflectionClass`我收到以下通知：

> 注意：未定义的属性：第 93 行 XXX 中的 ReflectionClass::$newInstanceArgs

在第 93 行，我只是尝试通过以下方式实例化反射：

```
$obj = new $reflection->newInstanceArgs([$arg1]); 
```

该通知也是由 newInstance 生成的：

```
$obj = new $reflection->newInstance([$arg1]); 
```

> 注意：未定义的属性：第 93 行 XXX 中的 ReflectionClass::$newInstance

我试图实例化的类如下所示：

```
class ObjectName
{
      public function __construct ($str = "")
      {}
} 
```

我似乎找不到问题所在。我在这里做错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T08:57:28.580

你有多余的`new`。`newInstance{,Args}` [reflectionclass.newinstance](http://php.net/manual/en/reflectionclass.newinstance.php)函数已经为您实例化并返回一个实例。尝试：`$obj = $reflection->newInstance([..]);`

# android - 无权写入 /mnt/extsd

> ID：14849689
> 
> 赞同：3
> 
> 时间：2013-02-13T08:54:24.283
> 
> 标签：android, file-io, android-sdcard, permission-denied

我无法在 mini x plus h24 中写入外部 sd ( /mnt/extsd )

我已经在清单中插入

系统有两个 sd 卡，第一个可以通过 Environment.getExternalStorageDirectory() 访问，但第二个只能通过绝对路径访问

```
try{
        File file3 = new File("/mnt/extsd/", "file.txt");
        BufferedWriter writer = new BufferedWriter(new FileWriter(file3));
        writer.write("hello");
        writer.flush();
        writer.close();

    } catch (IOException e) {
        e.printStackTrace();
    } 
```

异常向我返回此消息 /mnt/extsd/file.txt: open failed: EACCES (Permissio denied)

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:55:44.007

您需要添加权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

在您的**AndroidManifest.xml**文件中。

编辑

如果您已经添加了该权限并且仍然收到权限被拒绝错误，则您可能正在写入只读目录，或者您不允许在该目录的根目录上写入。

您可能需要检查目录是否可写。像：

```
file3.canWrite() 
```

或者您可以在编写之前尝试添加子目录

```
File newDir = new File("/mnt/extsd/myFiles");
newDir.mkdirs();
File file3 = new File(newDir.getAbsolutePath(), "file.txt"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T08:55:35.523

在 android 清单文件中添加以下权限。

**写权限**

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

**读取权限**

```
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T08:57:15.897

很简单，只需在 android manifest 文件中添加权限即可。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T09:22:16.063

如果您已经在清单文件中添加了权限，请尝试以下操作：

```
1) File file1 = new File(Environment.getExternalStorageDirectory() + "file.txt");

2) File file2 = new File("file:///mnt/extsd/", "file.txt");

3) File file3 = new File("file:///mnt/sdcard/", "file.txt"); 
```

然后使用

```
String filepath = "file:///" + file1.getAbsolutePath(); 
```

# c# - ZXing 验证文本形式的条码阅读器

> ID：14849690
> 
> 赞同：0
> 
> 时间：2013-02-13T08:54:24.823
> 
> 标签：c#, zxing

问题很简单。是否可以使用 ZXing C# 库来验证用户手动输入的条形码？我们需要这个，因为有时会发生条形码损坏并且操作员必须手动插入底层数字的情况。条码格式未知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:21:43.363

是的。

在我的代码中，我使用以下代码从用户输入的代码生成图像：

```
 var writer = new BarcodeWriter();
        writer.Format = BarcodeFormat.CODE_128;
        var options = new EncodingOptions();
        options.Height = 140;
        options.Width = 300;
        writer.Options = options;

        try
        {
            Bitmap image = writer.Write(textBoxCodigoDeBarras.Text);
            BitmapImage bi = ImageManager.BitmapToImagesource(image);
            ImageCodigoDeBarras.Source = bi;
        }
        catch
        {
            //Could not generate image.
            //Therefone Barcode is invalid.
        } 
```

# iphone - 在 iOS6、iPhone 中处理方向？

> ID：14849693
> 
> 赞同：2
> 
> 时间：2013-02-13T08:54:42.233
> 
> 标签：iphone, ios, ios6

iOS 6 中需要哪些方法来处理方向？我用的是下面给出的，够了吗？

```
- (BOOL)shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations

    if (UIInterfaceOrientationLandscapeLeft == interfaceOrientation || UIInterfaceOrientationLandscapeRight == interfaceOrientation) {
    return YES;
    } else {
        return NO;
    }
} 
```

我想让应用程序同时在 iOS5 和 iOS6 中工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:13:39.357

**对于 iOS6**

```
//Support all orientation
- (NSUInteger)application:(UIApplication*)application
    supportedInterfaceOrientationsForWindow:(UIWindow*)window
{
    return UIInterfaceOrientationMaskAll;
} 
```

**现在您需要更改根视图控制器**

```
// iOS6 support
// ---
- (BOOL)shouldAutorotate
{
    return NO;
}

- (NSUInteger)supportedInterfaceOrientations
{
return UIInterfaceOrientationMaskLandscape;
} 
```

**在 iOS6 中已弃用，仍然需要 iOS5 支持。**

```
// ---
- (BOOL)shouldAutorotateToInterfaceOrientation:
    (UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft ||
            interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:00:49.283

在所有步骤之前，在`Targets->Summary`...中设置支持的方向

![在此处输入图像描述](../Images/7f72c23c6a531c6ee46ed6250dc2b7de.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T09:01:57.170

我只知道iOS5...一个小修改

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{

   return (UIInterfaceOrientationIsLandscape(interfaceOrientation));

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T09:04:00.307

是的，这三个就够了。也为 ios6 添加`preferredInterfaceOrientationForPresentation`with return as

> `return (UIInterfaceOrientationLandscapeLeft | UIInterfaceOrientationLandscapeRight)`

以您喜欢的方向启动应用程序的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T10:10:47.330

您只需在`.m`文件中添加以下行

```
#define IOS_OLDER_THAN_6 ( [ [ [ UIDevice currentDevice ] systemVersion ] floatValue ] < 6.0 )
#define IOS_NEWER_OR_EQUAL_TO_6 ( [ [ [ UIDevice currentDevice ] systemVersion ] floatValue ] >= 6.0 ) 
```

然后你必须在`.m`文件中添加以下方法

```
#ifdef IOS_OLDER_THAN_6

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
   return (UIInterfaceOrientationIsLandscape(toInterfaceOrientation));
}
#endif

#ifdef IOS_NEWER_OR_EQUAL_TO_6

- (NSUInteger)supportedInterfaceOrientations
{
   return UIInterfaceOrientationMaskLandscape;
}
#endif 
```

# pydot - 忽略 #pycparser 包含并在 #pydot 中定义多个子图

> ID：14849694
> 
> 赞同：1
> 
> 时间：2013-02-13T08:54:45.600
> 
> 标签：pydot, pycparser

我是 stackoverflow 的新手，但到现在为止我得到了很多帮助，这要感谢社区。

我正在尝试创建一个软件，向我展示遗留代码的调用者依赖关系。

我用 pycparcer 用 c 代码解析一个目录，并且对于每个文件我想用 pydot 创建一个子图。

两个问题：

1.  解析 ac 文件时，解析器会从包含的文件中引用 #includes，这是我的 AST 中的一个函数。我怎么知道该函数是否包含在内，或者来自这个实际文件/或忽略#includes？

2.  对于我要创建一个子图的每个文件，然后将此文件中的所有函数添加到此子图中。我不知道我必须创建多少个子图......

我有一组文件，其中每个文件都是一个具有该文件功能的冻结集，像这样可能吗？

```
 for files in SetOfFiles:
        #how to create subgraph with name of files?

        for function in files:
            self.graph.add_node(pydot.Node(funktion))  #--> add node to subgraph "files" 
```

我希望你能接受我的挑战……有什么想法吗？

谢谢！

**编辑：**

我解决了关于 pydot 的问题，这很容易......所以我坚持我的 pycparser 问题:(

```
 for files in ListOfFuncs:
        cluster_x = pydot.Cluster(files, label=files)

        for functions in files:
            cluster_x.add_node(pydot.Node(functions))

        graph.add_subgraph(cluster_x) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-16T23:06:22.633

我可以解决 pycparser 部分。预处理器留下`#line`指定文件和行代码的指令，pycparser 使用这些指令。您可以从它创建的 AST 中获取该信息（参见测试示例）。

# apache-flex - Flex 自定义 RSL 库缓存问题

> ID：14849696
> 
> 赞同：4
> 
> 时间：2013-02-13T08:54:52.643
> 
> 标签：apache-flex, caching, versioning, rsl

我对如何避免客户端机器上的**RSL 缓存**有点困惑。我有许多模块和一个加载它们的主要应用程序。几乎每个模块和应用程序本身都在使用**RSL**库（这是我的公共库项目）。

### 这是它的样子：

*   MyLib.swf *( **RSL** )*
*   MainApp.swf *（使用 MyLib.swf 作为**RSL**）*
*   modules/Module1.swf *（使用 MyLib.swf 作为**RSL**）*
*   modules/Module2.swf *（使用 MyLib.swf 作为**RSL**）*
*   模块/Module3.swf

### 问题本身：

现在我正在更改 MyLib 中的代码并编译新版本的 MyLib.swf。我如何确定已经加载旧版本 MyLib.swf 的用户将获得新的**RSL**而不是旧的缓存？

是否可以使用**RSL**进行类似的操作：

```
 var loader: Loader = new Loader();
    loader.load(new URLRequest("MyLib.swf?v1.2.3"); 
```

**PS** - 每次将 MyLib.swf 的名称更改为 MyLib-v1.2.3.swf 之类的名称都不是解决方案，因为我有 20 个模块，并且每次更改 MyLib 中的一些小东西时都会编译所有模块不是一个好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T06:46:02.333

您可能根本不需要 RSL。你的[`ApplicationDomain`](http://help.adobe.com/en_US/as3/dev/WSd75bf4610ec9e22f43855da312214da1d8f-8000.html)层次结构是什么？如果您在加载模块时没有明确指定加载上下文，那么您最终[会在新子模块中使用每个模块`ApplicationDomain`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/LoaderContext.html#applicationDomain)

如果这是真的，并且您不打算将旧模块与新应用程序和类似的东西一起使用，您可以通过执行以下操作从根本上优化整个事情：

1.  在加载第一个模块之前编译所有用于将其`MyLib.swf`放入`MainApp.swf`（快速且简单）**或**加载`MyLib.swf`的类`ApplicationDomain.currentDomain`

2.  排除所有 lib 类`moduleX.swf`（您可能已经这样做了）

PS：[关于 Flex RSL。](http://livedocs.adobe.com/flex/3/html/help.html?content=rsl_02.html)

# javascript - 切换循环通过 3 个状态

> ID：14849701
> 
> 赞同：2
> 
> 时间：2013-02-13T08:55:03.403
> 
> 标签：javascript

我需要创建一个`button`循环通过**3 个状态**。出于某种原因，很难找到。每个状态下的功能都是简单的样式变化，例如：

```
click 1: hide div
click 2: show hidden div, change bg-color
click 3: reset bg-color, change font
click 1: reset font, hide div 
```

有任何想法吗？我不能使用`jquery`（课堂作业，不允许）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T09:25:22.987

Cou 可以使用一个数组，每个状态变化都有一个函数，以及一个循环遍历可能状态的计数器变量。

然后只需通过按钮的单击处理程序调用当前状态函数。

像这样的东西可以做到

```
var toggle = (function (el) {
    var div = document.getElementById(el); //Get the div you want to change
    var states = []; //The Array to hold the functions
    var style = {} //Will be used to save the current style
    for (var att in div.style) //Saves the style of the div *I was just lazy and did a for loop*
    style[att] = div.style[att]

    var current = 0; //The Counter

    states[0] = function () { //The first state function
        div.style["font-family"] = style["font-family"]
        div.style.display = "none";
    };
    states[1] = function () {
        div.style.display = "block";
        div.style["background-color"] = "rgb(" + [rand(), rand(), rand()] + ")"; // [1,2,3] toString is "1,2,3"
    };
    states[2] = function () {
        div.style["background-color"] = style["background-color"];
        div.style["font-family"] = "Courier New";
    }

    function rand() { //ONly to return a random number for a random bgcolor
        return ~~(Math.random() * 255)
    }
    return function () {  //The function which cycles through the states
        states[current]() //Invokes the current statechange function
        current = (current + 1) % (states.length); //Increments the counter and uses modulo to cycle
    }
})("div");

document.getElementById("click")
    .addEventListener("click", toggle); 
```

这是一个关于[JSFiddle的例子](http://jsfiddle.net/PND6m/1/)

## 更新：

我对其进行了一些修改并注释了更改的代码，这应该能够更改页面上多个元素的状态

```
 function rand() {
        return~~ (Math.random() * 255);
    }

    var makeToggle = function (states, elements) { // I Changed it to makeToggle, The first argument accepts an array of states to cycle through, the second either an array of elements, or an array of objects with the element property (and an optional state function)
        var current = 0; //Sets the counter to zero

        for (var i = 0, ilen = elements.length; i < ilen; i++) {
            if (!elements[i].element) { //check if you passed an Object with the `element` Property
                elements[i] = {
                    element: elements[i] //If it was an array, the arrays element will be set to an object
                }; //to support arrays only
            }
            elements[i].style = {}; //to save the original style in the object
            for (var att in elements[i].element.style) {
                elements[i].style[att] = div.style[att]; // saves it
            }
        }

        function doForElements() { //Invokes either the state function passed with an element, or the general statefunction
            for (var i = 0, ilen = elements.length; i < ilen; i++) {
                var state = elements[i].states;
                if (state && typeof state[current] === "function") state = state[current];
                else state = states[current];
                state(elements[i].element, elements[i].style); //Invokes the function with the element as first parameter and the original style as second
            }

        }
        return function () { //Returns the function for the click handler
            doForElements();
            current = (current + 1) % (states.length); //cycles the current state counter
        };
    };

    var states = []; //Here the General State change functions get defined
    states[0] = function (div, style) {
        div.style["font-family"] = style["font-family"];
        div.style.display = "none";
    };
    states[1] = function (div, style) {
        div.style.display = "block";
        div.style["background-color"] = "rgb(" + [rand(), rand(), rand()] + ")";
    };
    states[2] = function (div, style) {
        div.style["background-color"] = style["background-color"];
        div.style["font-family"] = "Courier New";
    };

    var elements = [].slice.call(document.getElementsByTagName("div")); //To actually get an Array of the NodeList (all divs on the page)

    elements[4] = { //changes the 5th element (which should receive a special statechange function)
        element: elements[4],
        states: {
            1: function (div, style) { //Use an Objects property to pass an single state change instead of an array with functions
                div.style.display = "block";
                div.style["background-color"] = "yellow";
            }
        }
    };

    var toggle = makeToggle(states, elements); //sets the function for the click handler to toggle
    //Pass an Object with the Elements and an optional st

    document.getElementById("click")
        .addEventListener("click", toggle); //binds the function 
```

这是一个[JSBin](http://jsbin.com/asugax/2/)来尝试一下

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T09:06:11.323

```
<div id="mydiv" data-state="0"></div>
<input type="button" id="mybutton" value="Change State" />

var states = {
    1: [{ name: 'display', value: 'none'}],
    2: [{ name: 'display', value: 'block'}],
    3: [{ name: 'background-color', value: 'white'}, { name: 'prop', value: 'val' }]
}

window.onload = function(){
     var mydiv = document.getElementById('mydiv');
     var mybutton = document.getElementById('mybutton');
     mybutton.onclick = function (){
         var num = parseInt(mydiv.getAttribute('data-state'));
         num = num < 3 ? ++num : 1;
         var nameValues = states[num];
         for(var i = 0; i < nameValues.length; i++)
              mydiv.style[nameValues[i].name] = nameValues[i].value;
     }
} 
```

# c# - 在Repeater内的JQuery中获取HiddenField

> ID：14849704
> 
> 赞同：0
> 
> 时间：2013-02-13T08:55:15.777
> 
> 标签：c#, jquery, asp.net

我有一个Repeater 控件，我需要访问其中的一个HiddenField。我不能使用：

```
<%= Control.ID.ClientID %> 
```

而且我也不能使用 class 或 cssclass 属性？

所以我的问题很简单，如何访问中继器中的 HiddenField 控件？

我的场景是我填充了一个多选下拉列表，并且我需要在更新函数中知道我选择了哪些元素，为此我使用 HiddenField 来存储 Id。然后在后面的代码中，我可以访问 HiddenField 值并进行适当的数据绑定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:59:07.883

`HiddenField`控制元素被呈现为`input`s 类型`hidden`，因此，尽管没有彻底理解您对有限应用程序的模糊场景，您可以使用 jQuery 中的选择器访问它们，如下所示：

```
$("input[type=hidden]") 
```

根据您的情况，您可能希望进一步限制该选择器。

但是，这重点是包含[jquery](/questions/tagged/jquery "显示标记为“jquery”的问题")标记，尽管您的示例似乎想要使用内联 ASP.NET 脚本来使用托管代码。请阐明您的意图和最终目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:07:50.427

我找到了一个实际上很简单的解决方案:)

我在中继器内的 HiddenField 上使用了 ClientIDMode 属性：

```
<asp:HiddenField ID="HiddenField_Pladser" runat="server" Value="Selected" ClientIDMode="Static" /> 
```

ClientID 值设置为 ID 属性的值。然后很容易在 JQuery 脚本中访问该值：

```
$("#HiddenField_Pladser").val(); 
```

从后面的代码中，我知道来自转发器的 ItemIndex，这使得使用以下代码创建数据集合变得容易：

```
var data = from RepeaterItem item in rpPladser.Items
                   let hidden = ((HiddenField)item.FindControl("HiddenField_Pladser"))
                   select new
                              {
                                  selected = hidden.Value
                              }; 
```

如果此实现有缺陷或以某种方式不好，请发表评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T09:02:28.643

~~您可以使用类选择器
将类放在隐藏字段上。
并找到适当的隐藏字段并设置它的值的`on change`事件。`multiselectable`~~

## 编辑-1

我会建议你`ddl`在`multiselectable dropdown`.
在此多选的更改方法上绑定 jquery。
使用 jquery`parent`和`prev`选择器，您可以设置隐藏字段中的值。

示例

```
 $(".ddl").change( function(){
        $(this).parent().next().find("input:hidden").val($(".ddl").val());
    }); 
```

这只是我的方法的想法。

## 编辑 2

这是一个很好的例子，说明如何`css-class`在隐藏字段上使用。
[jQuery隐藏字段](https://stackoverflow.com/questions/2027062/jquery-hidden-field)

# css - 真的有聪明的 CSS 压缩器吗？

> ID：14849715
> 
> 赞同：8
> 
> 时间：2013-02-13T08:55:43.017
> 
> 标签：css, minify

我测试了一些 CSS 压缩器，老实说，我很失望。也许我只是尝试了错误的？

起点是以下故意错误的 css 代码：

```
.a{
   font-size: 10px;
   padding: 0 6px;
   text-align: center;
}
.b{
   font-size: 11px;
   padding: 0 6px;
   text-align: center;
} 
```

很明显，在两个类中声明 3 个属性中的 2 个是无稽之谈，并导致 185 个字节的代码。如果你手动写得更好，它看起来像

```
.a, .b{
   padding: 0 6px;
   text-align: center;
}
.a{
   font-size: 10px;
}
.b{
   font-size: 11px;
} 
```

这有点小（149字节）甚至

```
.a, .b{
   padding: 0 6px;
   text-align: center;
   font-size: 10px;
}
.b{
   font-size: 11px;
} 
```

这是 133 字节之前和

```
.a,.b{padding:0 6px;text-align:center;font-size:10px}.b{font-size:11px} 
```

压缩后只有 71 个字节。这将是原始大小的 100/185*71 = 38.3%。

**然而，所有压缩所做的是**：

```
.a{font-size:10px;padding:0 6px;text-align:center}.b{font-size:11px;padding:0 6px;text-align:center} 
```

这是 100 个字节。

当然，在理想情况下，您只需编写更好的 CSS 代码，但如果您编写较大的文件，这并不容易，如果您使用任何框架，这几乎是不可能的。

那么，是否有任何更好的工具可以为上述示例代码生成 71 个字节？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:05:19.527

[压缩](http://www.gzip.org/)文件

通过在 Bargaineering 上对 .css 文件进行 gzip 压缩，其大小从 28.2K 降至 7.3K，节省了 74.1%。该文件的响应时间从 53 毫秒变为 39 毫秒，节省了 26.4%。

[如何 GZip CSS 文件](http://www.wangarific.com/how-to-gzip-css-files/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T09:03:04.943

压缩可能看起来微不足道，但您还期望它做什么？你可以想象的任何类型的 CSS 压缩器在修改代码之前只会带你走这么远。

毕竟 CSS*不是*一种编程语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T09:12:53.443

当您在 CSS 压缩后使用 gzip（如大多数性能指南所建议的那样）时，您会得到不同的结果，因为 CSS 压缩器的输出更好地可压缩。

CSS 压缩版在 gzip 之后是 85 字节，而你的在 gzip 之后是 89 字节。

因此，在 CSS 压缩后使用 gzip 时，工具中的代码会获胜。此外，结果更像是原始代码，由于过度优化破坏了您的 CSS，因此为错误留下的空间更少。

但是，您的 CSS 代码在 71 字节的解压缩版本中获胜。

* * *

您所做的优化有一个非常本地化的用例，其中选择器在 CSS 文件中彼此相邻。

一些显示问题的示例小提琴：

```
.a {
    height:50px;
    width:50px;
    background-color: yellow;
}

.b {
    background-color: red;
}

.c {
    background-color: yellow;
} 
```

*   [原来的](http://jsfiddle.net/qDp2H/9/)
*   [组合选择器 #1](http://jsfiddle.net/qDp2H/1/)
*   [组合选择器#2](http://jsfiddle.net/qDp2H/2/)

# c# - 将用户定义保存到字节数组时，图片框返回错误

> ID：14849717
> 
> 赞同：0
> 
> 时间：2013-02-13T08:55:43.310
> 
> 标签：c#

我真的需要帮助，因为我根本无法弄清楚这一点。当它使用资源图像保存到字节arrat时它工作正常但是当有用户定义的图像时它应该使用那个并将它保存到数组并且程序崩溃并且我找不到问题。

编码：

```
 //Check for image and if true save it to byte array
        if (pictureBox1.Image != null)
        {               
            using (MemoryStream ms = new MemoryStream())
            {
                pictureBox1.Image.Save(ms, System.Drawing.Imaging.ImageFormat.Bmp);
                arr = ms.ToArray();
            }
        }
        else
        {
            using (MemoryStream ms = new MemoryStream())
            {
                AnimalMotel.Properties.Resources.nophotos.Save(ms, System.Drawing.Imaging.ImageFormat.Bmp);
                arr = ms.ToArray();
            }
        } 
```

此处的 ELSE 部分完美运行，当有用户定义的图像时出现问题，然后它崩溃并给出：

```
 An unhandled exception of type 
  'System.Runtime.InteropServices.ExternalException' 
  occurred in System.Drawing.dll

  Additional information: A generic error occurred in GDI+. 
```

上一个代码：

```
 OpenFileDialog openFileDialog1 = new OpenFileDialog();

        openFileDialog1.InitialDirectory = "c:\\";
        openFileDialog1.Filter = "(*.Bmp)|*.Bmp|All files (*.*)|*.*";
        openFileDialog1.FilterIndex = 2;
        openFileDialog1.RestoreDirectory = true;

        if (openFileDialog1.ShowDialog() == DialogResult.OK)
        {
            try
            {
                if ((myStream = openFileDialog1.OpenFile()) != null)
                {
                    using (myStream)
                    {
                        pictureBox1.Image = new Bitmap(myStream);
                    }
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show("Error: Could not read file from disk. Original error: " + ex.Message);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:52:53.660

位图类对流有点挑剔。五年前，我经常使用位图，我认为错误可能是您已经处理了从 OpenFileDialog 打开的原始流。在某些图像格式中，我认为流需要打开才能执行保存等操作。

试着让它保持打开状态（注释掉`using(myStream)`声明），看看它是否有帮助。

# xslt - 通过检查记录中的 2 个以上的值来汇总金额

> ID：14849724
> 
> 赞同：0
> 
> 时间：2013-02-13T08:56:07.367
> 
> 标签：xslt, xslt-1.0

源代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<Emp>
    <EmpDetail>
        <ProjectDetails>
            <Code>Project</Code>
            <ProjectReference>
                <Reference>
                    <RefCode>PROJ1</RefCode>
                </Reference>
            </ProjectReference>
        </ProjectDetails>
        <ProjectDetails>
            <Code>Element</Code>
            <ProjectReference>
                <Reference>
                    <RefCode>ELEM1</RefCode>
                </Reference>
            </ProjectReference>
        </ProjectDetails>
        <Period>
            <PeriodNo>1</PeriodNo>
        </Period>
        <AmountDetails>
            <Currency>EUR</Currency>
            <Amount>
                <Value>100.00</Value>
            </Amount>
        </AmountDetails>
    </EmpDetail>
    <EmpDetail>
        <ProjectDetails>
            <Code>Project</Code>
            <ProjectReference>
                <Reference>
                    <RefCode>PROJ1</RefCode>
                </Reference>
            </ProjectReference>
        </ProjectDetails>
        <ProjectDetails>
            <Code>Element</Code>
            <ProjectReference>
                <Reference>
                    <RefCode>ELEM1</RefCode>
                </Reference>
            </ProjectReference>
        </ProjectDetails>
        <Period>
            <PeriodNo>1</PeriodNo>
        </Period>
        <AmountDetails>
            <Currency>EUR</Currency>
            <Amount>
                <Value>5000</Value>
            </Amount>
        </AmountDetails>
    </EmpDetail>
    <EmpDetail>
        <ProjectDetails>
            <Code>Project</Code>
            <ProjectReference>
                <Reference>
                    <RefCode>PROJ2</RefCode>
                </Reference>
            </ProjectReference>
        </ProjectDetails>
        <ProjectDetails>
            <Code>Element</Code>
            <ProjectReference>
                <Reference>
                    <RefCode>ELEM2</RefCode>
                </Reference>
            </ProjectReference>
        </ProjectDetails>
        <Period>
            <PeriodNo>2</PeriodNo>
        </Period>
        <AmountDetails>
            <Currency>EUR</Currency>
            <Amount>
                <Value>200.00</Value>
            </Amount>
        </AmountDetails>
    </EmpDetail>
    <EmpDetail>
        <ProjectDetails>
            <Code>Project</Code>
            <ProjectReference>
                <Reference>
                    <RefCode>PROJ2</RefCode>
                </Reference>
            </ProjectReference>
        </ProjectDetails>
        <ProjectDetails>
            <Code>Element</Code>
            <ProjectReference>
                <Reference>
                    <RefCode>ELEM2</RefCode>
                </Reference>
            </ProjectReference>
        </ProjectDetails>
        <Period>
            <PeriodNo>3</PeriodNo>
        </Period>
        <AmountDetails>
            <Currency>EUR</Currency>
            <Amount>
                <Value>500</Value>
            </Amount>
        </AmountDetails>
    </EmpDetail>
</Emp> 
```

目标xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<Emp>
    <EmpDetail>
        <ProjectDetails>
            <Code>Project</Code>
            <ProjectReference>
                <Reference>
                    <RefCode>PROJ1</RefCode>
                </Reference>
            </ProjectReference>
        </ProjectDetails>
        <ProjectDetails>
            <Code>Element</Code>
            <ProjectReference>
                <Reference>
                    <RefCode>ELEM1</RefCode>
                </Reference>
            </ProjectReference>
        </ProjectDetails>
        <Period>
            <PeriodNo>1</PeriodNo>
        </Period>
        <AmountDetails>
            <Currency>EUR</Currency>
            <Amount>
                <Value>5100.00</Value>
            </Amount>
        </AmountDetails>
    </EmpDetail>
    <EmpDetail>
        <ProjectDetails>
            <Code>Project</Code>
            <ProjectReference>
                <Reference>
                    <RefCode>PROJ2</RefCode>
                </Reference>
            </ProjectReference>
        </ProjectDetails>
        <ProjectDetails>
            <Code>Element</Code>
            <ProjectReference>
                <Reference>
                    <RefCode>ELEM2</RefCode>
                </Reference>
            </ProjectReference>
        </ProjectDetails>
        <Period>
            <PeriodNo>2</PeriodNo>
        </Period>
        <AmountDetails>
            <Currency>EUR</Currency>
            <Amount>
                <Value>200.00</Value>
            </Amount>
        </AmountDetails>
    </EmpDetail>
    <EmpDetail>
        <ProjectDetails>
            <Code>Project</Code>
            <ProjectReference>
                <Reference>
                    <RefCode>PROJ2</RefCode>
                </Reference>
            </ProjectReference>
        </ProjectDetails>
        <ProjectDetails>
            <Code>Element</Code>
            <ProjectReference>
                <Reference>
                    <RefCode>ELEM2</RefCode>
                </Reference>
            </ProjectReference>
        </ProjectDetails>
        <Period>
            <PeriodNo>3</PeriodNo>
        </Period>
        <AmountDetails>
            <Currency>EUR</Currency>
            <Amount>
                <Value>500</Value>
            </Amount>
        </AmountDetails>
    </EmpDetail>
</Emp> 
```

查询：如果 PeriodNo、Project 的 RefCode 和 Element 的 RefCode 相同，那么我必须对金额值求和，并且应该只生成一条记录。在我的源文件中，前两个 line item 的 periodno、project 的 refcode 和 element 的 refcode 是相同的，所以想在输出中只获取一条记录，并且金额值应该是 (100+5000) = 5100。

我知道我是否必须检查一个值并计算 lineitem 的总和，但在这种情况下，我必须检查每条记录中的 3 个值并且我已经对其求和。您能否告诉我，如何使用 xslt 进行操作。我有 XSLT 1.0 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:58:42.937

我不知道你是否已经找到了解决方案，但由于这里没有发布解决方案，所以我发布了我的解决方案，该解决方案位于 Muenchian Grouping。

我尝试使用注释来解释代码，希望对您有所帮助。

```
<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="xml" indent="yes"/>

    <!-- Copy by default attributes, elements and text -->    
    <xsl:template match="*|@*">
        <xsl:copy><xsl:apply-templates select="node()|@*" /></xsl:copy>
    </xsl:template>

    <!-- Key which is going to allow us to identify each EmpDetail by the
         following id (which is a string): ProjectRefCode-ElementRefCode-PeriodNo

         Using the key function we are going to be able to select the set of
         EmpDetail nodes which have the described structure. So elements with
         the same id (i.e. same ProjectRefCode, ElementRefCode and PeriodNo)
         are going to be matched using: key('detail-key', $id), where $id holds
         the id to be matched. -->
    <xsl:key name="detail-key"
             match="Emp/EmpDetail"
             use="concat(ProjectDetails[Code = 'Project']/ProjectReference/Reference/RefCode, '-',
                         ProjectDetails[Code = 'Element']/ProjectReference/Reference/RefCode, '-',
                         Period/PeriodNo)" />

    <xsl:template match="Emp">

        <!-- Copy the current node and process its children EmpDetail elements -->
        <xsl:copy>
            <!-- We use key('detail-key', $id)[1] where the $id is the concat
                 expression to select one element per group, i.e. we iterate
                 over a set of unique EmpDetail elements -->
            <xsl:apply-templates select="EmpDetail[generate-id(.) = generate-id(key('detail-key',
                                               concat(ProjectDetails[Code = 'Project']/ProjectReference/Reference/RefCode, '-',
                                               ProjectDetails[Code = 'Element']/ProjectReference/Reference/RefCode, '-',
                                               Period/PeriodNo))[1])]" />
        </xsl:copy>
    </xsl:template>

    <!-- When the Value element is found, we perform the sum of all the Value elements
         which are contained in the group matched by the id described above-->
    <xsl:template match="Value">

        <!-- Cache parent node to avoid repeated operations -->
        <xsl:variable name="current-detail"
                      select="../../.." />

        <!-- Generate the id for the current EmpDetail element as described
             above -->
        <xsl:variable name="detail-id"
                      select="concat($current-detail/ProjectDetails[Code = 'Project']/ProjectReference/Reference/RefCode, '-',
                                     $current-detail/ProjectDetails[Code = 'Element']/ProjectReference/Reference/RefCode, '-',
                                     $current-detail/Period/PeriodNo)" />

        <!-- Wrap the sum with the Value element -->
        <xsl:copy>
            <!-- We use the key function to fetch all the EmpDetail elements with the
             same id as the current one and sum them -->
            <xsl:value-of select="sum(key('detail-key', $detail-id)/AmountDetails/Amount/Value)" />
        </xsl:copy>

    </xsl:template>    
</xsl:stylesheet> 
```

# ssrs-2008 - 计算 SSRS 2012 中的加班百分比

> ID：14849726
> 
> 赞同：0
> 
> 时间：2013-02-13T08:56:12.517
> 
> 标签：ssrs-2008, reporting-services

我正在尝试创建一份报告来计算某人在一周内工作的加班时间，我对计算的理解是。

我的专栏是：

每周额外工作时间

每周工作总小时数

计算

每周额外工作时数 /（每周额外工作时数 + 每周总工作时数）* 100

如果我将所有列表示为分钟总结并进行计算，我会得到一个数字，但如果我将所有分钟总结为小时和分钟并进行相同的计算，我会得到一个不同的数字。我想知道的是，计算是否正确，如果是，我应该只使用分钟还是使用小时和分钟进行计算。

希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:12:40.077

假设您要计算额外小时数的百分比，您的计算应该是：

`((TotalHours * 100)/(TotalHours - ExtraHours))-100`

我对你的建议是以分钟为单位进行计算，最后将其转换为小时（和分钟）。

# jms - 使用非 openwire 协议时的 Camel ActiveMQComponent

> ID：14849731
> 
> 赞同：0
> 
> 时间：2013-02-13T08:56:44.573
> 
> 标签：jms, activemq, apache-camel, stomp

遵循 activemq.apache.org 上的指南，使用 openwire 作为传输协议很容易启动和运行。

让 URI 有`trace`选项，让你看到握手和所有：`@testing.activeMqInstance=failover:tcp://localhost:61616?trace=true`

```
09:36:06.764 [ActiveMQ Task-1] DEBUG o.a.a.t.failover.FailoverTransport - Attempting  0th  connect to: tcp://localhost:61616?trace=true
09:36:06.780 [ActiveMQ Task-1] DEBUG o.a.a.transport.WireFormatNegotiator - Sending: WireFormatInfo { version=9, properties={MaxFrameSize=9223372036854775807, CacheSize=1024, CacheEnabled=true, SizePrefixDisabled=false, MaxInactivityDurationInitalDelay=10000, TcpNoDelayEnabled=true, MaxInactivityDuration=30000, TightEncodingEnabled=true, StackTraceEnabled=true}, magic=[A,c,t,i,v,e,M,Q]}
09:36:06.780 [ActiveMQ Task-1] DEBUG o.a.a.t.TransportLogger.Connection:2 - SENDING: WireFormatInfo { version=9, properties={MaxFrameSize=9223372036854775807, CacheSize=1024, CacheEnabled=true, SizePrefixDisabled=false, MaxInactivityDurationInitalDelay=10000, TcpNoDelayEnabled=true, MaxInactivityDuration=30000, TightEncodingEnabled=true, StackTraceEnabled=true}, magic=[A,c,t,i,v,e,M,Q]}
09:36:06.780 [ActiveMQ Task-1] DEBUG o.a.a.t.failover.FailoverTransport - Connection established
09:36:06.780 [ActiveMQ Task-1] INFO  o.a.a.t.failover.FailoverTransport - Successfully connected to tcp://localhost:61616?trace=true
09:36:06.780 [ActiveMQ Transport: tcp://localhost/127.0.0.1:61616@4060] DEBUG o.a.a.t.TransportLogger.Connection:2 - RECEIVED: WireFormatInfo { version=9, properties={CacheSize=1024, MaxFrameSize=9223372036854775807, CacheEnabled=true, SizePrefixDisabled=false, TcpNoDelayEnabled=true, MaxInactivityDurationInitalDelay=10000, MaxInactivityDuration=30000, TightEncodingEnabled=true, StackTraceEnabled=true}, magic=[A,c,t,i,v,e,M,Q]} 
```

但是，在进行 stomp （或任何 amqp ）时。

将 URI 更改为`@testing.activeMqInstance=failover:stomp://localhost:61612?trace=true`似乎只是建立连接（套接字），而不是启动协议：

```
09:37:07.444 [ActiveMQ Task-1] DEBUG o.a.a.t.failover.FailoverTransport - urlList connectionList:[stomp://localhost:61612?trace=true], from: [stomp://localhost:61612?trace=true]
09:37:07.444 [ActiveMQ Task-1] DEBUG o.a.a.t.failover.FailoverTransport - Attempting  0th  connect to: stomp://localhost:61612?trace=true
09:37:07.444 [ActiveMQ Task-1] DEBUG o.a.a.t.failover.FailoverTransport - Connection established
09:37:07.444 [ActiveMQ Task-1] INFO  o.a.a.t.failover.FailoverTransport - Successfully connected to stomp://localhost:61612?trace=true
[silence] 
```

有人知道为什么运输上没有活动吗？`trace`在代理中获得了相同的选项，但没有`TRACE`发生日志记录告诉我客户端（ActiveMQComponent）没有事件发送第一`CONNECT`帧。

作为参考，该组件是使用 Spring xml 配置的：

```
<bean id="jmsActiveMqConnectionFactory" 
    class="org.apache.activemq.ActiveMQConnectionFactory">
    <property name="brokerURL" value="${activeMqInstance}" />
    <property name="userName" value="${activeMqUsername}"/>
    <property name="password" value="${activeMqPassword}"/>
</bean> 
<bean id="pooledActiveMqConnectionFactory" 
    class="org.apache.activemq.pool.PooledConnectionFactory" init-method="start" destroy-method="stop">
    property name="maxConnections" value="8" />
    <property name="connectionFactory" ref="jmsActiveMqConnectionFactory" />
</bean>
<bean id="jmsActiveMqConfig" 
    class="org.apache.camel.component.jms.JmsConfiguration">
    <property name="connectionFactory" ref="pooledActiveMqConnectionFactory"/>
    <property name="concurrentConsumers" value="1"/>
</bean>
<bean id="activemq" 
    class="org.apache.activemq.camel.component.ActiveMQComponent">
    <property name="configuration" ref="jmsActiveMqConfig"/> 
```

任何输入表示赞赏！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:20:49.067

ActiveMQ JMS 客户端仅支持 Openwire 协议。

如果你想使用 STOMP，我推荐来自 [https://github.com/fusesource/stompjms的 stompjms 客户端](https://github.com/fusesource/stompjms)

如果要使用 AMQP，请使用[Apache Qpid 项目中的 AMQP 1.0 JMS 客户端](http://qpid.apache.org/)

# c - make 运行时出错。冲突的类型和先前的声明

> ID：14849734
> 
> 赞同：0
> 
> 时间：2013-02-13T08:56:49.270
> 
> 标签：c, embedded

我为我正在做的一个项目找到了 AES 的实现。

但是，当我集成它时，我在构建过程中遇到以下错误。

```
In file included from ff.h:26:0,
             from disp.h:4,
             from main.c:14:
aes.h:14:3: error: conflicting types for 'AesCtx'
aes.h:14:3: note: previous declaration of 'AesCtx' was here
aes.h:28:5: error: conflicting types for 'AesCtxIni'
aes.h:28:5: note: previous declaration of 'AesCtxIni' was here
aes.h:29:5: error: conflicting types for 'AesEncrypt'
aes.h:29:5: note: previous declaration of 'AesEncrypt' was here
aes.h:30:5: error: conflicting types for 'AesDecrypt'
aes.h:30:5: note: previous declaration of 'AesDecrypt' was here 
```

头文件本身是：

```
// AES context structure
typedef struct {
 unsigned int Ek[60];
 unsigned int Dk[60];
 unsigned int Iv[4];
 unsigned char Nr;
 unsigned char Mode;
} AesCtx;

// key length in bytes
#define KEY128 16
#define KEY192 24
#define KEY256 32
// block size in bytes
#define BLOCKSZ 16
// mode
#define EBC 0
#define CBC 1

// AES API function prototype

int AesCtxIni(AesCtx *pCtx, unsigned char *pIV, unsigned char *pKey, unsigned int KeyLen, unsigned char Mode);
int AesEncrypt(AesCtx *pCtx, unsigned char *pData, unsigned char *pCipher, unsigned int DataLen);
int AesDecrypt(AesCtx *pCtx, unsigned char *pCipher, unsigned char *pData, unsigned int CipherLen); 
```

然后使用相应的 C 文件。

```
int AesCtxIni(AesCtx *pCtx, unsigned char *pIV, unsigned char *pKey, unsigned int KeyLen, unsigned char Mode)
{
    // Cut out code for brevity
}

int AesEncrypt(AesCtx *pCtx, unsigned char *pData, unsigned char *pCipher, unsigned int DataLen)
{
    // Cut out code for brevity
}

int AesDecrypt(AesCtx *pCtx, unsigned char *pCipher, unsigned char *pData, unsigned int CipherLen)
{
    // Cut out code for brevity
} 
```

我知道这些错误的发生通常是因为该函数尚未预先声明，或者因为它与它的声明略有不同，但我看不出有什么区别。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T09:01:59.067

你用的是什么编译器？我最好的猜测是它试图说`aes.h`的是`#include`d 两次。尝试在开头和结尾添加标题保护`aes.h`：

```
#ifndef AES_H_
#define AES_H_

typedef struct {
...
int AesDecrypt(AesCtx *pCtx, unsigned char *pCipher, unsigned char *pData, unsigned int CipherLen);

#endif /* !AES_H_ */ 
```

# django - 模板包含和 jquery.load 之间的区别？

> ID：14849738
> 
> 赞同：0
> 
> 时间：2013-02-13T08:57:11.530
> 
> 标签：django, django-templates, jquery-load

如果我使用 django-template 特定的包含标签或 jQuerys 加载功能，django 如何处理“加载”页面/模板有区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:25:20.533

如果使用 Django 的[`{% include %}`](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#include)标签，模板由服务器构建，构建完成*后*显示在浏览器中。另一方面，如果您使用[`jQuery.load()`](http://api.jquery.com/load/)，则在基本模板完成加载后，使用 AJAX 请求将请求的模板包含在客户端。

在这两种情况下，浏览器中显示的结果应该是相同的。jQuery 方法的优点是您可以稍后加载模板，例如当您单击页面上的按钮时，无需在浏览器中重新加载整个页面。因此，您可以以更具交互性的方式处理用户交互。服务器端方法的一个优点是整个 DOM 和内容都驻留在 HTML 文件中，因此如果这对您来说很重要，则可以被搜索引擎索引。客户端 JavaScript 包含的 HTML 对搜索引擎不可见。

一般来说，如果您只想在请求的网页加载后包含 HTML，请使用使用`include`标签的服务器端方法。让服务器进行模板处理更加用户友好和高效，尤其是在模板非常大的情况下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:22:23.977

`ssi`or`include`标签包含在服务器端（在本例中由 django 提供）。jQuery 包括基于客户端的。

# database-design - RavenDB 数据模型高效可扩展性设计选择

> ID：14849749
> 
> 赞同：1
> 
> 时间：2013-02-13T08:58:15.467
> 
> 标签：database-design, mapreduce, scalability, ravendb

我在一个目前正在开发中的项目上使用 RavenDB，所以还没有用户。在这个项目之前，我的背景一直是关系数据库，但总的来说我更喜欢 NoSQL 方法。但是，我还没有任何工作或管理构建在 NoSQL 数据库之上的网站的经验，该数据库的流量很大。我开始了解 Map/Reduce 索引，并在我的解决方案中包含了一些索引，但我想知道：

**关于何时创建 Map/Reduce 索引以及何时不创建索引，我应该遵循任何设计规则吗？**

我知道这非常依赖于我系统中的业务对象以及它们之间的交互方式。我想我只是在努力了解我可能进行的哪些查询应该使用索引，以及我可以简单地直接查询对象。

以下是我的部分业务领域以及我已经创建索引的位置的快速概览：

我的系统主要由品牌和消费者组成。每个人都有许多社交媒体帐户。当用户通过他们的社交媒体帐户登录时，我有索引`BrandsBySocialAccount`和`ConsumersBySocialAccount`，它们将这些集合展平并将它们与`UserId`品牌或消费者相关联。一旦我有了，`UserId`我就可以检索相关的品牌或消费者记录，然后我就走了。

一个品牌可以创建许多活动。我这里有另一个索引，`CampaignsByBrand`. 还需要跟踪消费者与活动的交互方式，因此活动可以有许多跟踪条目，用于他们可以与活动执行的不同交互。例如，他们可以从外部跟踪到活动页面的链接，也可以从网站本身中发现一个。正如我解释的那样，我在这里需要索引似乎很清楚。每次交互都有一个索引 ( `ClickLinkTrackingEntriesByCampaign`and `ViewDetailsTrackingEntriesByCampaign`) 或一个索引 (`TrackingEntriesByCampaign`) 包含交互。多个索引在这里过分吗？可能是。目前有 4 种交互类型，以后可能还会介绍其他类型。当我有几条记录时，这些查询非常快。但是当有数十万甚至数百万条记录时，它们仍然会尽可能快吗？

从整体设计来看，似乎对于每个具有可能需要由该集合上的属性查询的集合属性的对象，我应该创建 Map/Reduce 索引。这是一个很好的经验法则吗？还有其他人 - “如果你有这些类型的对象交互，你应该考虑创建这些类型的索引”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:44:39.347

首先，如果您还没有查看有关[静态索引](http://ravendb.net/docs/2.0/client-api/querying/static-indexes/defining-static-index)的文档，请务必查看。

您需要清楚的要点是：

1.  直接从文档存储中检索文档*不需要*索引，应尽可能使用。这是使用以下任何方法完成的：
    *   `session.Load()`
    *   `session.Advanced.LoadStartingWith()`
    *   `documentStore.DatabaseCommands.Get()`

2.  任何时候使用`session.Query()`or查询时`session.Advanced.LuceneQuery()`，您*总是在*使用索引。如果您不指定静态索引索引，则会为您创建一个[动态索引。](http://ravendb.net/docs/http-api/indexes/dynamic-indexes)在许多情况下，创建动态索引所涉及的延迟并不理想——因此用静态索引替换动态索引通常是个好主意。

3.  您拥有的索引越多，服务器必须完成的工作就越多，您将消耗的存储空间也就越多。因此，您将希望尽可能合并索引。很多时候，同一个索引可以用于多种用途。你应该仔细地设计你的索引——不要把它们弄得太窄而无用，也不要把它们弄得太宽和昂贵。

    假设我有一个对象，有时需要按字段查询，`A`有时也需要按字段查询`B`。当然，我可以创建两个不同的索引，但这会很浪费。`A`拥有一个同时映射和`B`字段的索引会更有效率。现在两个不同的查询可以由同一个索引提供服务。我敦促您尽可能合并索引。

    一个典型的*坏*例子是映射文档中的每个字段并为所有字段打开字段存储，只是因为您认为您可能希望在某个时候从索引中投影它们。在大多数情况下，您不需要走这么远。有几个地方适合这样做，但您会非常谨慎地这样做。

4.  所有索引都有一个*Map*，但我们不称它们为“map/reduce”索引，直到它们也有一个*Reduce*部分。您将创建的大多数索引*都不*是 map/reduce 索引。

    Map/Reduce 索引几乎总是保留用于某种类型的聚合计算。例如，您的域中可能有 am/r 索引`SocialAccountsCountByBrand`，或者在销售域中，您可能有更复杂的东西，例如`TopCustomersByTotalSalesPerMonth`.

5.  我不同意您的评估，即如果一个对象具有集合属性，则它需要对该集合的索引。在许多情况下，您的域中的其他地方会有类似的数据可以用于相同的目的。当然，具体情况会因您想做什么而有所不同。但总的来说，如果您发现您正在创建大量这些索引 - 将这些数据重构到自己的文档中可能会更好。

    例如，如果我有一个像下面这样的类：

    *（故意的坏例子——不要真的这样做）*

    ```
    public class Customer
    {
        public string Id { get; set; }
        public string Name { get; set; }
        public List<Order> Orders { get; set; }
    } 
    ```

    显然，如果每个订单都嵌入到`Customer`对象中，我会非常频繁地查询该集合。将每一个都放入自己的文档中，通过引用回馈给客户，我会得到*更好*的服务。`Order``CustomerId`

6.  最后，尽量避免根据您希望结果的形状来考虑索引。相反，请根据您要查询的内容来考虑它们。换句话说，您希望在查询的 、 或 子句中指定`Where`哪些`OrderBy`字段`Search`？

    当然，有[实时投影](http://ravendb.net/docs/client-api/querying/static-indexes/live-projections)和[TransformResults](http://ravendb.net/docs/client-api/querying/results-transformation/transform-results)等技术——但同样，这些应该谨慎使用。人们可以反对几乎所有的转换需求，因为我们有更强大的功能，比如[索引相关文档](http://ravendb.net/docs/client-api/querying/static-indexes/indexing-related-documents)。一些次要的索引预测可能很有用，但通常您可以在自己的代码中操纵结果并让乌鸦远离它。仅当您实际需要结果中的索引数据时才使用预测。如果您需要的所有数据都在文档中，则无需投影。

    我之所以提出这一点，是因为我见过很多人根据 UI 中的 ViewModel 设计索引的案例。这很糟糕，因为它要求为 UI 问题制作索引。相反，应该考虑结果本身的形状。如果它具有回答查询的所有信息，那么它可以以多种方式使用 - 包括但不限于 UI。

我希望这回答了你的问题。如果您还有其他人，请在评论中回复。谢谢。

# php - new Imagick() 不接受某些数组

> ID：14849761
> 
> 赞同：1
> 
> 时间：2013-02-13T08:59:03.960
> 
> 标签：php, arrays, imagick

我正在尝试创建一个新的 Imagick 实例：

```
 $original = new Imagick($array); 
```

我在两种不同的情况下这样做。一种方法总是有效，另一种方法总是失败，但它们使用相同的确切数组（数组并不总是相同，但为了便于解释，我展示了一个恰好使用相同数组的示例）。这是`var_dump`每个数组的一个：

工作数组：

```
 array(3) { [0]=> string(20) "image_files/bbb0.jpg" [1]=> string(20) "image_files/bbb1.jpg" [2]=> string(20) "image_files/bbb2.jpg" } 
```

失败的数组：

```
 array(3) { [0]=> string(20) "image_files/bbb0.jpg" [1]=> string(20) "image_files/bbb1.jpg" [2]=> string(20) "image_files/bbb2.jpg" } 
```

如您所见，它们是相同的，那么为什么我的 PHP 会死在

```
$new = new Imagick($array); 
```

我没有看到的第二个数组有什么不同吗？

编辑：这是构造失败的数组的代码：

```
$n = $_GET["n"];
$city = preg_replace("/[0-9]/", "", $n);
$num = preg_replace("/".$city."/","",$n);

// create an array to hold directory list
$results = array();
// create a handler for the directory
$directory = '../image_files';
$handler = opendir($directory);

while ($file = readdir($handler)) {
// if file isn't this directory or its parent, add it to the results
if ($file != "." && $file != "..") {
    // check with regex that the file format is what we're expecting and not something else
    if (preg_match("/^".$city."[1-9][0-9]\.jpg$/i",$file)) {
    if (preg_match("/^".$city.$num."\.jpg$/i",$file)) { 
        unlink("../image_files/".$file);
    } else {
        $results[] = "../image_files/" . $file;
    }
    } else if (preg_match("/^".$city."[0-9]\.jpg$/i",$file)) {
    if (preg_match("/^".$city.$num."\.jpg$/i",$file)) { 
        unlink("../image_files/".$file);
    } else {
        $results[] = "../image_files/" . $file;
    }
    } 
    }
}

sort($results);

$i = 0;
$newResults = array();
foreach( $results as $key => $value ) {
$old = $value;
//echo "old: " . $old . " ";
if (preg_match("/[1-9][0-9]/",$value)) {
    $newstr = preg_replace("/[1-9][0-9]/", $i."temp", $value);
} else if (preg_match("/[0-9]/",$value)) {
    $newstr = preg_replace("/[0-9]/", $i."temp", $value);
}

$newResults[] = $newstr;
//echo "new: " . $newstr . "<br>";
rename($old,$newstr);
    $i++;
}

// create an array to hold directory list
$results = array();
// create a handler for the directory
$directory = '../image_files';
$handler = opendir($directory);

while ($file = readdir($handler)) {
// if file isn't this directory or its parent, add it to the results
if ($file != "." && $file != "..") {
    $old = $file;
    $new = preg_replace("/temp/", "", $file);
        rename("../image_files/".$old,"../image_files/".$new);
    }
}

$finalResults = array();

foreach( $newResults as $key => $value ) {
    $newstr = str_replace("../", "", $value);
    $newstr = str_replace("temp","",$newstr);
    $finalResults[] = $newstr; 
}

sort($finalResults);

createMontage($finalResults,"-a",$city); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:05:11.223

问题出在 PHP 文件的目录结构中。

正在从基本目录创建“工作数组”。“失败数组”是从名为`actions`.

您正在运行的脚本存在于何处并不重要，重要的是加载该脚本的内容（即，它是通过`include`还是从根目录加载的`require`？或者是直接调用的`www.example.com/scripts/script.php`）。这将决定如何构建其他文件的路径。

# android - 如何优化这个布局？

> ID：14849774
> 
> 赞同：1
> 
> 时间：2013-02-13T08:59:30.387
> 
> 标签：android, xml, listview, layout

我有这个 xml 布局代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center_horizontal" 
    android:background="#FFFFFF">
    <ScrollView 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        >

        <TableLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <TextView
            android:id="@+id/nektaText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:textSize="10pt"
            android:textAlignment="center"
            android:text="example text will not be used" />

            <ImageView
            android:id="@+id/horilinee"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingTop="5dp"
            android:paddingBottom="5dp"
            android:src="@drawable/horiline" />

            <TableRow
                android:id="@+id/table"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_weight="1"
                android:gravity="bottom" >

                <Button
                android:id="@+id/send"
                android:text="أرسل"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1" />

                <EditText
                android:id="@+id/commenttext"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:hint="اكتب التعليق هنا"
                android:minLines="1"
                android:paddingRight="5dp"
                android:paddingLeft="5dp"
                android:scrollHorizontally="true"
                android:scrollbars="vertical"
                android:layout_weight="1"
                android:singleLine="false" />

            </TableRow>

            <ImageView
            android:id="@+id/horilineee"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingTop="5dp"
            android:paddingBottom="5dp"
            android:src="@drawable/horiline" />

            <ListView
                android:id="@id/android:list"
                android:layout_width="match_parent"
                android:layout_height="fill_parent"
                android:drawSelectorOnTop="false"
                android:paddingLeft="5dp"
                android:paddingRight="5dp" />

        </TableLayout>
    </ScrollView>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"

        android:gravity="center_horizontal" >

        <TableLayout
            android:id="@+id/tableLayout1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >

            <TableRow
                android:id="@+id/tableRow0"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_weight="1"
                android:gravity="bottom"
                android:paddingBottom="10dp"
                android:paddingTop="10dp" >

                <ImageView
                    android:id="@+id/horiline"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:src="@drawable/horiline" />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_weight="1"
                android:gravity="bottom" >

                <ImageView
                    android:id="@+id/share"
                    android:layout_width="0dp"
                    android:layout_height="match_parent"
                    android:layout_weight="1"
                    android:src="@drawable/share" />

                <ImageView
                    android:id="@+id/block"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:src="@drawable/block" />

                <ImageView
                    android:id="@+id/thumbdown"
                    android:layout_width="0dp"
                    android:layout_height="match_parent"
                    android:layout_weight="1"
                    android:src="@drawable/thumbdown" />

                <ImageView
                    android:id="@+id/thumbup"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:src="@drawable/thumbup" />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_weight="1"
                android:gravity="bottom" >

                <TextView
                    android:id="@+id/sharetext"
                    android:layout_width="0dp"
                    android:layout_height="match_parent"
                    android:layout_weight="1"
                    android:gravity="center_horizontal"
                    android:text="شارك"
                    android:textSize="12dp" />

                <TextView
                    android:id="@+id/blocktext"
                    android:layout_width="0dp"
                    android:layout_height="match_parent"
                    android:layout_weight="1"
                    android:gravity="center_horizontal"
                    android:text="إبلاغ إساءة"
                    android:textSize="12dp" />

                <TextView
                    android:id="@+id/dislikenumber"
                    android:layout_width="0dp"
                    android:layout_height="match_parent"
                    android:layout_weight="1"
                    android:gravity="center_horizontal"
                    android:textColor="#FF0000"
                    android:textSize="12dp" />

                <TextView
                    android:id="@+id/likenumber"
                    android:layout_width="0dp"
                    android:layout_height="match_parent"
                    android:layout_weight="1"
                    android:gravity="center_horizontal"
                    android:textColor="#00FF00"
                    android:textSize="12dp" />
            </TableRow>
        </TableLayout>
    </LinearLayout>

</RelativeLayout> 
```

但它似乎并没有像我想要的那样工作。我需要它，如下图：

![数字](../Images/4b56ba085df84c4c4c583701b61e7cb3.png)

我的代码的问题是列表视图我无法在表格布局之前将其拉伸到底部。如果顶部的文本视图太长，则会出现另一个问题，它出现在表格布局下方并且可见。

当键盘可见时，底部的表格布局也向上移动，我不希望这种情况发生。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:23:09.307

在您的布局中有一个[ListView 。](http://developer.android.com/reference/android/widget/ListView.html)[您可以使用addHeaderView()](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View%29)方法将其他视图（如图所示）作为标题添加到列表视图。这样，您将获得所需的滚动效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T04:37:11.737

谢谢大家的支持。我想出了一个更好的解决方案：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FFFFFF"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:orientation="vertical" >

        <ScrollView
            android:layout_width="fill_parent"
            android:layout_height="70dp"
            android:layout_weight="1" >

            <TextView
                android:id="@+id/nektaText"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:gravity="center"
                android:text="example text will not be used"
                android:textAlignment="center"
                android:textSize="10pt" />
        </ScrollView>

        <ImageView
            android:id="@+id/horilinee"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingBottom="5dp"
            android:paddingTop="5dp"
            android:src="@drawable/horiline" />

        <TableRow
            android:id="@+id/table"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="0.5"
            android:gravity="bottom" >

            <Button
                android:id="@+id/send"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="4"
                android:text="أرسل" />

            <EditText
                android:id="@+id/commenttext"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:hint="اكتب التعليق هنا"
                android:minLines="1"
                android:paddingLeft="5dp"
                android:paddingRight="5dp"
                android:scrollHorizontally="true"
                android:scrollbars="vertical"
                android:singleLine="false" />
        </TableRow>

        <ImageView
            android:id="@+id/horilineee"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingBottom="5dp"
            android:paddingTop="5dp"
            android:src="@drawable/horiline" />

        <ListView
            android:id="@id/android:list"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="50"
            android:drawSelectorOnTop="false"
            android:paddingLeft="5dp"
            android:paddingRight="5dp" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/layout0"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="end" >

        <TableLayout
            android:id="@+id/tableLayout1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >

            <TableRow
                android:id="@+id/tableRow0"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_weight="1"
                android:gravity="bottom"
                android:paddingBottom="10dp"
                android:paddingTop="10dp" >

                <ImageView
                    android:id="@+id/horiline"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:src="@drawable/horiline" />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_weight="1"
                android:gravity="bottom" >

                <ImageView
                    android:id="@+id/share"
                    android:layout_width="0dp"
                    android:layout_height="match_parent"
                    android:layout_weight="1"
                    android:src="@drawable/share" />

                <ImageView
                    android:id="@+id/block"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:src="@drawable/block" />

                <ImageView
                    android:id="@+id/thumbdown"
                    android:layout_width="0dp"
                    android:layout_height="match_parent"
                    android:layout_weight="1"
                    android:src="@drawable/thumbdown" />

                <ImageView
                    android:id="@+id/thumbup"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:src="@drawable/thumbup" />
            </TableRow>

            <TableRow
                android:id="@+id/tableRow2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_weight="1"
                android:gravity="bottom" >

                <TextView
                    android:id="@+id/sharetext"
                    android:layout_width="0dp"
                    android:layout_height="match_parent"
                    android:layout_weight="1"
                    android:gravity="center_horizontal"
                    android:text="شارك"
                    android:textSize="12dp" />

                <TextView
                    android:id="@+id/blocktext"
                    android:layout_width="0dp"
                    android:layout_height="match_parent"
                    android:layout_weight="1"
                    android:gravity="center_horizontal"
                    android:text="إبلاغ إساءة"
                    android:textSize="12dp" />

                <TextView
                    android:id="@+id/dislikenumber"
                    android:layout_width="0dp"
                    android:layout_height="match_parent"
                    android:layout_weight="1"
                    android:gravity="center_horizontal"
                    android:textColor="#FF0000"
                    android:textSize="12dp" />

                <TextView
                    android:id="@+id/likenumber"
                    android:layout_width="0dp"
                    android:layout_height="match_parent"
                    android:layout_weight="1"
                    android:gravity="center_horizontal"
                    android:textColor="#00FF00"
                    android:textSize="12dp" />
            </TableRow>
        </TableLayout>
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T09:21:26.580

由于您的 Layout 只有两个，请`RelativeLayout`使用`LinearLayout`. 这将解决重叠问题。设置权重`ScrollView`以保持`TableLayout`底部。

键盘移动底部表格布局，因为它的模式设置为`Resize`. 您通常会通过`android:windowSoftInputMode`AndroidManifest.xml 中每个定义的属性来控制此行为。将此值设置为`adjustPan`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-13T09:09:07.853

ScrollView 需要声明：

```
android:layout_above="@+id/Layout1" 
```

Layout1 是承载 tableLayout1 的布局

但是你会遇到一些 ListView 到 scrollView 的问题

# c# - .NET 上同一函数的多个事件处理

> ID：14849775
> 
> 赞同：-1
> 
> 时间：2013-02-13T08:59:48.480
> 
> 标签：c#, .net, vb.net, events

我最近在用一些`FileSystemWatcher`s 进行测试，想知道事件处理在 .NET 中是如何工作的。例如，在 VB.NET 中使用此代码：

```
Dim fsw1, fsw2, fsw3 As New FileSystemWatcher()

Private Sub fsw_Error(sender As Object, e As ErrorEventArgs) _
                                 Handles fsw1.Error, fsw2.Error, fsw3.Error
    Dim iCont As Integer = 1
    Dim fsw As FileSystemWatcher = CType(sender, FileSystemWatcher)

    While Not fsw.EnableRaisingEvents AndAlso iCont < 120
        iCont += 1

        Try
            fsw.EnableRaisingEvents = True
            txtResultado.Clear()
        Catch
            fsw.EnableRaisingEvents = False
            Threading.Thread.Sleep(30000)
        End Try
    End While
End Sub 
```

每次在任何`FileSystemWatcher`s 上发生错误时，都会执行该函数。为每个函数生成一个不同的线程`FileSystemWatcher`？它们可以在同时执行多个操作时相互干扰吗？

在这方面 C# 和 VB.NET 之间可能存在差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:14:02.107

哪个线程调用事件没有限制；如果您想在另一个线程中调用事件，您可以在 .NET 中自由地这样做。老实说，我无法想象不使用单独的线程或异步 IO 来实现 FileSystemWatcher （如果发现更改，则会调用事件），因为您不希望事件中断应用程序的正常流程。

.NET 中的事件使用一个调用列表，在引发事件时调用该列表。调用事件时，会遍历调用列表并在单个线程中调用每个方法。就那么简单。

该功能是 .NET 功能，因此 C# 和 VB.Net 相同

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T09:17:45.087

您对事件处理有一个基本的误解。似乎您假设所有触发的事件都将发送到同一个函数 - 或者可以说是函数的同一个*实例*。

不是这种情况。每次引发事件时，都会调用函数 fsw_error。该函数是否已经执行了 10 次并不重要。因此，在该函数内部*等待*直到引发另一个事件（看起来您正在尝试这样做）是行不通的。

但是，您可以将事件处理程序封装在（实例化的）类中，并确保所有引发的事件执行都使用相同的变量范围。我不确定，如果事件是在不同的线程上触发的（不这么认为），但如果是这种情况，你当然需要注意同步访问。

```
Private Class MyEventHandlerHolder
   private iCont as Integer = 0;    

   Private Sub fsw_Error(sender As Object, e As ErrorEventArgs) _
                             Handles fsw1.Error, fsw2.Error, fsw3.Error

       iCont += 1

End Sub 
```

每次文件系统观察程序触发错误事件时，iCont 都会增加。

```
fsw = new FileSystemWatcher()
fsw2 = new FileSystemWatcher()
fsw.EnableRaisingEvents = true;
fsw2.EnableRaisingEvents = true;
myHandler  = new MyEventHandlerHolder();
AddHandler fsw.Onerror, AdressOf myHandler.fsw_error //not sure about the right Event Name in vb
AddHandler fsw2.Onerror, AdressOf myHandler.fsw_error 
```

我的vb很久了。也许您不能将实例的方法定位为处理程序。但需要一个静态（或单例）处理程序类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T09:24:05.060

当 FileSystemWatchers 引发事件时，应在线程池线程上调用处理程序。这些事件可能会相互干扰，因为对一个 FileSystemWatcher 引发的事件的长时间处理可能会延迟对其中一个 FileSystemWatcher 引发的另一个事件的处理。在这种情况下，您可以在事件处理程序中使用专用线程来执行冗长的阻塞工作。

VB.NET 和 C# 之间应该没有区别。

# mysql - sql - 从每种类型中选择数量

> ID：14849777
> 
> 赞同：0
> 
> 时间：2013-02-13T08:59:58.063
> 
> 标签：mysql, sql, resources

我想为每种游戏类型从我的表“游戏”中选择 10 个名称。

例如：10款rpg游戏、10款动作游戏、10款MMO游戏……

问题是我的查询占用了大量资源，我想知道是否有人有想法以更好的方式编写此查询：

```
SELECT name
FROM games AS thisgame
WHERE (SELECT COUNT(1)
       FROM games
       WHERE games.game_id = thisgame.game_id 
             AND games.type > thisgame.type) <= 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:07:55.640

快速做到这一点的一种方法是可变技巧。它依赖于 MySQL 特定的语法来模仿窗口函数。例如，要检索每种类型最多两个游戏：

```
select  s.name
,       s.type
from    (
        select  *
        ,       (@rn := if(@cur=type, @rn+1, 1)) as rn
        ,       @cur := type
        from    Games
        join    (select @cur := '') i
        order by
                type
        ) s
where   rn <= 2 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!2/964ce/8/0)

# c# - 索引数组超出范围异常

> ID：14849780
> 
> 赞同：1
> 
> 时间：2013-02-13T09:00:20.887
> 
> 标签：c#, arrays, visual-studio-2008

我尝试将 SQL 结果保存在一个数组中并将其返回。但我遇到了一个例外：数组超出范围错误。

这是我的代码：

```
 public BookingUpdate[] getBookingUpdates(string token)
{
    String command = "SELECT b.ID,b.VERANSTALTER, rr.VON ,rr.BIS, b.THEMA, b.STORNO, ra.BEZEICHNUNG from BUCHUNG b JOIN RESERVIERUNGRAUM rr on rr.BUCHUNG_ID = b.ID JOIN RAUM ra on ra.ID = rr.RAUM_ID WHERE b.UPDATE_DATE BETWEEN DATEADD (DAY , -20 , getdate()) AND getdate() AND b.BOOKVERNR = 0";
    SqlConnection connection = new SqlConnection(GetConnectionString());
    BookingUpdate[] bookingupdate = new BookingUpdate[1];
    connection.Open();
    try
    {
        SqlCommand cmd = new SqlCommand(command, connection);
        SqlDataReader rdr = null;
        int count = 0;
        rdr = cmd.ExecuteReader();

            while (rdr.Read())
            {
                DataTable dt = new DataTable();
                dt.Load(rdr);
                count = dt.Rows.Count;
                for (int c = 0; c < count; c++)
                {
                    bookingupdate = new BookingUpdate[c];
                    bookingupdate[c].bookingID = (long)rdr["ID"]; // <---- Error is here
                    bookingupdate[c].fullUserName = rdr["VERANSTALTER"].ToString();
                    bookingupdate[c].newStart = (DateTime)rdr["VON"];
                    bookingupdate[c].newStart = (DateTime)rdr["BIS"];
                    bookingupdate[c].newSubject = rdr["THEMA"].ToString();
                    bookingupdate[c].newlocation = rdr["BEZEICHNUNG"].ToString();
                    if (rdr["STORNO"].ToString() != null)
                    {
                        bookingupdate[c].deleted = true;
                    }
                    else
                    {
                        bookingupdate[c].deleted = false;
                    }

                }

            }

    }

    catch (Exception ex)
    {
        log.Error(ex.Message + "\n\rStackTrace:\n\r" + ex.StackTrace);
    }
    finally
    {
        connection.Close();
    }
    return bookingupdate;
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:02:42.310

```
bookingupdate = new BookingUpdate[c];
bookingupdate[c].bookingID = (long)rdr["ID"]; 
```

您正在创建一个长度数组`c`，这意味着它具有索引`0 to (c-1)`- 然后您在尝试存储在 Position 时超出范围`c`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T09:07:07.423

恕我直言，我会简化您使用 Linq 构造该数组的方法：

```
BookingUpdate[] bookingupdate = dt.AsEnumerable()
    .Select(r => new BookingUpdate{
        bookingID = r.Field<long>("ID"),
        fullUserName = r.Field<string>("VERANSTALTER"),
        newStart = r.Field<DateTime>("Von"),
        newEnd = r.Field<DateTime>("Bis"), // here was another bug in your originalcode
        newSubject = r.Field<string>("THEMA"),
        newlocation = r.Field<string>("BEZEICHNUNG"),
        deleted = r.Field<string>("STORNO") != null
    })
    .ToArray(); 
```

这样，您将不会遇到超出范围的数组问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T09:14:29.260

您似乎正在为一个数组创建和分配内存

```
bookingupdate = new BookingUpdate[c]; 
```

但实际上并未创建 BookingUpdate 的实例。当您尝试在数组元素上设置属性时，没有要更新的实际 BookingUpdate - 只有一个持有者。

我建议将您的代码更改为以下内容：

```
...
bookingupdate = new BookingUpdate[count];  // allocates space for the number of BookingUpdates to be created
for (int c = 0; c < count; c++)
{
    bookingupdate[c] = new BookingUpdate(); // create a new instance of BookingUpdate and assign it the array     
    bookingupdate[c].bookingID = (long)rdr["ID"];
    ... 
```

我希望这个对你有用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T09:03:21.030

您访问超出范围的 n-Elements 数组的第 n 个元素，您需要访问 n - 1 个元素。

```
bookingupdate = new BookingUpdate[c];   // You create an array of 5 elements for example 
bookingupdate[c].bookingID = (long)rdr["ID"]; // Here you access the 5th elements but there are only 4 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T09:04:33.253

数组具有*从零开始的索引*。

当您创建`bookingupdate = new BookingUpdate[c];`最后一个索引时将`c-1`.

您无法访问`BookingUpdate[c]`，因为它不**存在**。

比方说`c = 4`，这意味着我们定义了一个包含 4 个元素的数组；

```
BookingUpdate[0]
BookingUpdate[1]
BookingUpdate[2]
BookingUpdate[3] 
```

`BookingUpdate[c]`将等于`BookingUpdate[4]`没有这样的索引。

从[*`MSDN`*](http://msdn.microsoft.com/en-us/library/9b9dty7d.aspx)页面；

> 数组索引为零：具有**n 个**元素的数组索引从**0**到 **n-1**。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-13T09:05:43.947

问题与数组的大小有关；

```
 for (int c = 0; c < count; c++)
 {
    bookingupdate = new BookingUpdate[c];
    bookingupdate[c].bookingID = (long)rdr["ID"]; 
```

在前面的代码中，您首先创建了一个`bookingupdate`大小为 0 的数组 ( )；那么您正在尝试插入一个项目。即使您以某种方式设法跳过第一个，它也会再次失败。只需将这些行更新为以下内容；

```
bookingupdate = new BookingUpdate[count];
for (int c = 0; c < count; c++)
     {        
        bookingupdate[c].bookingID = (long)rdr["ID"]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-13T09:06:10.410

```
 for (int c = 0; c < count; c++)
            {
                bookingupdate = new BookingUpdate[c]; 
```

错误是这个 for 循环的第一次迭代，其中 c 为零。即，您正在尝试创建一个长度为零的数组。**bookingupdate = 新的 BookingUpdate[0];**

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-13T09:07:07.790

在调用它之前，您已经初始化了一个数组而不是类本身。你的初始化也是错误的

```
count = dt.Rows.Count;
bookingupdate = new BookingUpdate[count];
for (int c = 0; c < count; c++)
{
    bu = new BookingUpdate();
    bu.bookingID = (long)rdr["ID"]; // <---- Error is here
    bu.fullUserName = rdr["VERANSTALTER"].ToString();
    bu.newStart = (DateTime)rdr["VON"];
    bu.newStart = (DateTime)rdr["BIS"];
    bu.newSubject = rdr["THEMA"].ToString();
    bu.newlocation = rdr["BEZEICHNUNG"].ToString();
    if (rdr["STORNO"].ToString() != null)
    {
        bu.deleted = true;
    }
    else
    {
        bu.deleted = false;
    }
    bookingupdate[c] = bu;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-13T09:10:34.400

使用此代码

```
public BookingUpdate[] getBookingUpdates(string token)
{
String command = "SELECT b.ID,b.VERANSTALTER, rr.VON ,rr.BIS, b.THEMA, b.STORNO, ra.BEZEICHNUNG from BUCHUNG b JOIN RESERVIERUNGRAUM rr on rr.BUCHUNG_ID = b.ID JOIN RAUM ra on ra.ID = rr.RAUM_ID WHERE b.UPDATE_DATE BETWEEN DATEADD (DAY , -20 , getdate()) AND getdate() AND b.BOOKVERNR = 0";
BookingUpdate[] bookingupdate;
SqlConnection connection = new SqlConnection(GetConnectionString());

connection.Open();
try
{
    SqlCommand cmd = new SqlCommand(command, connection);
    SqlDataReader rdr = null;
    int count = 0;
    rdr = cmd.ExecuteReader();

        while (rdr.Read())
        {
            DataTable dt = new DataTable();
            dt.Load(rdr);
            count = dt.Rows.Count;
            bookingupdate = new BookingUpdate[count];
            for (int c = 0; c < count; c++)
            {
                bookingupdate[c].bookingID = (long)rdr["ID"]; // <---- Error is here
                bookingupdate[c].fullUserName = rdr["VERANSTALTER"].ToString();
                bookingupdate[c].newStart = (DateTime)rdr["VON"];
                bookingupdate[c].newStart = (DateTime)rdr["BIS"];
                bookingupdate[c].newSubject = rdr["THEMA"].ToString();
                bookingupdate[c].newlocation = rdr["BEZEICHNUNG"].ToString();
                if (rdr["STORNO"].ToString() != null)
                {
                    bookingupdate[c].deleted = true;
                }
                else
                {
                    bookingupdate[c].deleted = false;
                }

            }

        }

}

catch (Exception ex)
{
    log.Error(ex.Message + "\n\rStackTrace:\n\r" + ex.StackTrace);
}
finally
{
    connection.Close();
}
return bookingupdate; 
```

}

# maven-3 - Maven Jboss 存储库问题

> ID：14849781
> 
> 赞同：0
> 
> 时间：2013-02-13T09:00:27.123
> 
> 标签：maven-3

我在我的项目中使用 Maven3 我遇到了一个奇怪的问题，我不知道，但它正在搜索**CGLIB**并给出这个异常......

> 原因：org.sonatype.aether.resolution.ArtifactResolutionException：无法将工件 cglib-nodep:cglib-nodep:pom:2.1_3 从/到 jboss ( [http://repository.jboss.com/maven2](http://repository.jboss.com/maven2) ) 传输：拒绝访问： [http ://repository.jboss.com/maven2/cglib-nodep/cglib-nodep/2.1_3/cglib-nodep-2.1_3.pom](http://repository.jboss.com/maven2/cglib-nodep/cglib-nodep/2.1_3/cglib-nodep-2.1_3.pom), 原因短语：禁止。在 org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:538) 在 org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArtifacts(DefaultArtifactResolver.java:216) 在 org.sonatype.aether.impl .internal.DefaultArtifactResolver.resolveArtifact(DefaultArtifactResolver.java:193) 在 org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.loadPom(DefaultArtifactDescriptorReader.java:281) ... 37 更多

我不知道为什么它在 Jboss 存储库中搜索**cglib**，而我没有在我的 pom.xml filr 中定义任何这样的存储库。当它进入 Jboss 存储库时，任何人都可以有想法吗？

**mvn -X 编译命令的输出**

> > Apache Maven 3.0.4 (r1232337; 2012-01-17 14:14:56+0530) Maven 主页：C:\Java\apache-maven-3.0.4\bin.. Java 版本：1.6.0_37，供应商：Sun Microsystems Inc. Java 主页：C:\Program Files\Java\jdk1.6.0_37\jre 默认语言环境：en_IN，平台编码：Cp1252 操作系统名称：“windows 7”，
> 
> -------------------------------------------------- ---------------------- [INFO] Reactor Build Order: [INFO] [INFO] AMANDA Platform [INFO] AMANDA Core API [INFO] AMANDA Shared API [ INFO] AMANDA Web 应用程序 [INFO] AMANDA WebServices [INFO] AMANDA WebServices Client [INFO] Pdf 标记工具 [INFO] AMANDA Tomcat 安装程序 [DEBUG] === REACTOR BUILD PLAN ============= ====================================[调试]项目：com.csdcsystems:amanda:pom:7.0。 0.0 [DEBUG] 任务：[compile] [DEBUG] Style：Regular [DEBUG] -------------------------------- --------------------------------------- [DEBUG] 项目：com.csdcsystems:amanda- core:jar:7.0.0.0 [DEBUG] 任务：[compile] [DEBUG] 风格：Regular [DEBUG] -------------------------- --------------------------------------------- [DEBUG] 项目： com.csdcsystems:amanda-shared:jar:7.0.0。0 [DEBUG] 任务：[compile] [DEBUG] 样式：Regular [DEBUG]
> 
> ================================================== [DEBUG ] 项目：com.csdcsystems:amanda-core:7.0.0.0 [DEBUG] 依赖项（收集）：[] [DEBUG] 依赖项（解决）：[编译] [DEBUG] 存储库（依赖项）：[中央（[https:// amandai.csdcsystems.com/artifactory/libs-release，releases](https://amandai.csdcsystems.com/artifactory/libs-release)），[快照](https://repository.jboss.org/nexus/content/groups/public-jboss/)（[https://amandai.csdcsystems.com/artifactory/libs-snapshot，releases+snapshots），JBoss（https://repository.jboss.org/](https://amandai.csdcsystems.com/artifactory/libs-snapshot) [nexus/content/groups/public-jboss/](https://repository.jboss.org/nexus/content/groups/public-jboss/)，releases+snapshots)] [DEBUG] Repositories (plugins) : [central ( [https://amandai.csdcsystems.com/artifactory/plugins-release，releases](https://amandai.csdcsystems.com/artifactory/plugins-release) )，快照( [https: //amandai.csdcsystems.com/artifactory/plugins-snapshot](https://amandai.csdcsystems.com/artifactory/plugins-snapshot), 发布+快照)] [DEBUG] ----------------------------------------- ------------------------------ [DEBUG] 目标：
> org.apache.maven.plugins:maven-resources-plugin:2.5 :resources (default-resources) [DEBUG] 样式：常规 [DEBUG] 配置：${encoding} ${maven.resources.escapeString}
> ${maven.resources.escapeWindowsPaths} ${maven.resources.includeEmptyDirs}
> ${maven. resources.overwrite}
> ${maven.resources.supportMultiLineFiltering} [DEBUG] ------------------------------------ ------------------------------------ [DEBUG] 目标：
> org.apache.maven.plugins:maven -compiler-plugin:3.0:compile (default-compile) [DEBUG] Style: Regular [DEBUG] Configuration:
> 
> ${maven.compiler.compilerId}
> ${maven.compiler.compilerReuseStrategy} ${maven.compiler.compilerVersion}
> ${maven.compiler.debug}
> ${maven.compiler.debuglevel} ${encoding} ${maven.compiler.executable} ${maven.compiler. failOnError}
> ${maven.compiler.forceJavacCompilerUse} ${maven.compiler.fork}
> ${maven.compiler.maxmem}
> ${maven.compiler.meminitial}
> ${mojoExecution} ${maven.compiler.optimize}
> 
> ${maven. compiler.showDeprecation} ${maven.compiler.showWarnings}
> ${maven.compiler.skipMultiThreadWarning} 1.6 ${lastModGranularityMs} 1.6 ${maven.compiler.verbose}
> [DEBUG] ============= ==================================================== ======== [DEBUG] 使用优先级为 0 的连接器 WagonRepositoryConnector [http://repository.jboss.com/maven2](http://repository.jboss.com/maven2)下载： [http ://repository.jboss.com/maven2/cglib-nodep/cglib-nodep/2.1_3/cglib-nodep-2.1_3.pom](http://repository.jboss.com/maven2/cglib-nodep/cglib-nodep/2.1_3/cglib-nodep-2.1_3.pom)
> 
> [调试] 写入分辨率跟踪文件 C:\Users\sjoshi.m2\repository\cglib-nodep\cglib-nodep\2.1_3\cglib-nodep-2.1_3.pom.lastUpdated [调试] 使用优先级为 0 的连接器 WagonRepositoryConnector 用于 [http ://repository.jboss.com/maven2](http://repository.jboss.com/maven2)下载： [http ://repository.jboss.com/maven2/jboss/jboss-jee/4.2.0.GA/jboss-jee-4.2.0.GA.pom](http://repository.jboss.com/maven2/jboss/jboss-jee/4.2.0.GA/jboss-jee-4.2.0.GA.pom)
> 
> [DEBUG] 写入分辨率跟踪文件 C:\Users\sjoshi.m2\repository\jboss\jboss-jee\4.2.0.GA\jboss-jee-4.2.0.GA.pom.lastUpdated [INFO] ---- -------------------------------------------------- ------------------ [INFO] 反应堆摘要：[INFO] [INFO] AMANDA 平台 .................... ................. 成功 [0.000s] [INFO] AMANDA 核心 API ...................... ...... 失败 [3.521s] [INFO] AMANDA 共享 API ...................... ....... 跳过 [信息] AMANDA Web 应用程序 ...................... 跳过 [信息] AMANDA WebServices .. ............... 跳过 [信息] AMANDA WebServices 客户端 ...... ...... 跳过 [信息] Pdf 标记工具 ...................... .... 跳过 [信息] AMANDA Tomcat 安装程序 ...................跳过 [信息] ---------------------------------------------------------- -------------------------- [信息] 构建失败 [信息] ---------------- -------------------------------------------------- ------ [INFO] 总时间：3.826s [INFO] 完成时间：Thu Feb 14 11:11:29 IST 2013 [INFO] Final Memory: 5M/73M [INFO] -------- -------------------------------------------------- -------------- [错误] 无法在项目 amanda-core 上执行目标：无法解析项目 com.csdcsystems:amanda-core:jar:7.0.0.0 的依赖项：无法收集[javax.activation:activation:jar:1.1.1（编译）、commons-beanutils:commons-beanutils:jar:1.8.3（编译）、commons-codec:commons-codec:jar:1.7（编译）的依赖项， commons-collections:commons-collections:jar:3.2.1（编译），
> 
> com.moneris:payment-moneris:jar:1.0（编译）、com.cybersource:payment-cybsclients:jar:1.0（编译）、com.cybersource:payment-cybssecurity:jar:1.0（编译）、javax.servlet:servlet -api:jar:2.5 (提供), javax.servlet:jsp-api:jar:2.1 (提供), junit:junit:jar:3.8.1 (test)] at org.apache.maven.lifecycle.internal.LifecycleDependencyResolver .getDependencies(LifecycleDependencyResolver.java:210) 在 org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.resolveProjectDependencies(LifecycleDependencyResolver.java:117) 在 org.apache.maven.lifecycle.internal.MojoExecutor.ensureDependenciesAreResolved(MojoExecutor.java:258) ) 在 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153) 在 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153) 在 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:201)。maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145) 在 org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84) 在 org.apache.maven.lifecycle.internal.LifecycleModuleBuilder。 buildProject(LifecycleModuleBuilder.java:59) at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183) at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)在 org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320) 在 org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156) 在 org.apache.maven.cli.MavenCli.execute(MavenCli.java :537) 在 org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196) 在 org.apache.maven.cli.MavenCli.main(MavenCli.java:141) 在 sun.reflect。NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method. java:597) 在 org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290) 在 org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230) 在 org.codehaus .plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409) at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352) 引起：org.apache.maven.project.DependencyResolutionException : 无法解析项目 com.csdcsystems:amanda-core:jar:7.0.0.0 的依赖项：无法收集 [javax.activation: 的依赖项：激活:jar:1.1.1 (编译), commons-beanutils:commons-beanutils:jar:1.8.3 (编译), commons-codec:commons-codec:jar:1.7 (编译), commons-collections:commons-collections :jar:3.2.1 (编译), commons-configuration:commons-configuration:jar:1.9 (编译), commons-discovery:commons-discovery:jar:0.5 (编译), commons-fileupload:commons-fileupload:jar: 1.2.2（编译）、commons-io:commons-io:jar:2.4（编译）、commons-jexl:commons-jexl:jar:1.1（编译）、commons-lang:commons-lang:jar:2.6（编译), commons-logging:commons-logging:jar:1.1.1 (编译), commons-net:commons-net:jar:3.1 (编译), org.apache.httpcomponents:httpclient:jar:4.2.1 (编译) , org.apache.httpcomponents:httpcore:jar:4.2.2 (编译), oro:oro:jar:2.0.8 (编译), xalan:serializer:jar:2.7.1 (编译), xerces:xercesImpl:jar: 2.10.0（编译），xml-apis:xml-apis:jar:2.0.2（编译）、org.apache.axis:axis:jar:1.4（编译）、log4j:log4j:jar:1.2.17（编译）、org.apache.ws .security:wss4j:jar:1.6.7 (编译), org.apache.poi:poi:jar:3.8 (编译), org.apache.poi:poi-ooxml:jar:3.8 (编译), com.aspose: aspose-words:jar:10.4.0.0 (编译), com.aspose:aspose-pdf-kit:jar:3.8.0 (编译), bouncycastle:bcprov-jdk16:jar:140 (编译), bouncycastle:bcmail-jdk15 :jar:140 (编译), org.xhtmlrenderer:core-renderer:jar:R8 (编译), net.sf.ezmorph:ezmorph:jar:1.0.6 (编译), com.lowagie:itext:jar:1.4。 8 (编译), javax.mail:mail:jar:1.4.5 (编译), jcifs:jcifs:jar:1.3.17 (编译), com.oracle:ojdbc6:jar:11.2.0.3.0 (编译), com.microsoft.jdbc:sqljdbc4:jar:4.0（编译），net.sf.json-lib:json-lib:jar:jdk15:2.4（编译），com.mockrunner:mockrunner-jdk1.5-j2ee1.3：罐子：0。4 (编译), org.opensaml:opensaml1:jar:1.1 (编译), javax.xml.soap:saaj-api:jar:1.3.4 (编译), wsdl4j:wsdl4j:jar:1.6.2 (编译), xpp3:xpp3:jar:1.1.4c (编译), org.apache.santuario:xmlsec:jar:1.5.2 (编译), taglibs:standard:jar:1.1.2 (编译), gudusoft.gsqlparser:gsp:jar :1.4.3.9 (编译), jgroups:jgroups-all:jar:2.4.1 (编译), com.sun.xml.stream:sjsxp:jar:1.0.2 (编译), javax.xml:jaxrpc-api: jar:1.1 (编译), javax.media:jai_core:jar:1.1.3 (编译), com.sun.media:jai_imageio:jar:1.1 (编译), javax.media:jai_codec:jar:1.1.3 (编译), com.businessobjects.sdks:CrystalCommon2:jar:12.2.213 (编译), com.businessobjects.sdks:QueryBuilder:jar:12.2.213 (编译), com.businessobjects.sdks:XMLConnector:jar:12.2.213 (编译), com.businessobjects.sdks:com.azalea.ufl.barcode:jar:12.2.213 (编译), com.businessobjects.sdks:crystal-merged:jar:12.2.213 (编译), com.businessobjects.sdks:cvom:jar:12.2.213 (编译), com.businessobjects.sdks:icu4j:jar:12.2.213 (编译) , com.businessobjects.sdks:jrcerom:jar:12.2.213 (编译), com.businessobjects.sdks:keycodeDecoder:jar:12.2.213 (编译), com.businessobjects.sdks:logging:jar:12.2.213 (编译), com.businessobjects.sdks:pfjgraphics:jar:12.2.213 (编译), com.businessobjects.sdks:webreporting:jar:12.2.213 (编译), com.gnostice:pdfone:jar:5.0.0.79 (编译) , com.independentsoft:exchange-server:jar:1.0 (编译), org.alfresco:alfresco-web-service-client:jar:1.0 (编译), com.oracle.xmlns:oracle-bi-ws:jar:1.0 (编译), oracle.charts:oracle-chartbuilder:jar:1.0 (编译), com.rsa:rsa-authapi:jar:1.0 (编译), com.keyoti:RapidSpellWeb:jar:3.0.2 (编译), com .keyoti：RapidSpellMDict:jar:1.0 (编译), javax.ejb:ejb-api:jar:3.0 (编译), com.cognos:cognos-axis:jar:8.0 (编译), com.cognos:cognos-client:jar:8.0 （编译）、com.cognos:cognos_cam_aaa_custom:jar:8.0（编译）、com.businessobjects.cms:cecore:jar:2011（编译）、com.businessobjects.cms:celib:jar:2011（编译）、com.businessobjects .cms:cesession:jar:2011（编译）、com.businessobjects.cms:cmslogon:jar:2011（编译）、com.businessobjects.cms:corbaidl:jar:2011（编译）、com.businessobjects.cms:ebus405： jar:2011 (编译), paypal.payflow:payment_paypal:jar:1.0 (编译), com.verisign:payment_verisign:jar:1.0 (编译), usbankclient:payment-usbankclient:jar:1.0 (编译), com.exact: payment-exact:jar:1.0 (编译), com.okgov:payment-okgov:jar:1.0 (编译), com.moneris:payment-moneris:jar:1.0 (编译), com.cybersource:payment-cybsclients:jar:1.0 (compile), com.cybersource:payment-cybssecurity:jar:1.0 (compile), javax.servlet:servlet-api:jar:2.5 (provided), javax.servlet:jsp-api:jar :2.1 (提供), junit:junit:jar:3.8.1 (test)] at org.apache.maven.project.DefaultProjectDependenciesResolver.resolve(DefaultProjectDependenciesResolver.java:158) at org.apache.maven.lifecycle.internal.LifecycleDependencyResolver .getDependencies(LifecycleDependencyResolver.java:185) ... 22 更多原因：org.sonatype.aether.collection.DependencyCollectionException：失败resolve(DefaultProjectDependenciesResolver.java:158) at org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.getDependencies(LifecycleDependencyResolver.java:185) ... 22 更多原因：org.sonatype.aether.collection.DependencyCollectionException：失败resolve(DefaultProjectDependenciesResolver.java:158) at org.apache.maven.lifecycle.internal.LifecycleDependencyResolver.getDependencies(LifecycleDependencyResolver.java:185) ... 22 更多原因：org.sonatype.aether.collection.DependencyCollectionException：失败
> 
> （编译）、com.businessobjects.sdks:cvom:jar:12.2.213（编译）、com.businessobjects.sdks:icu4j:jar:12.2.213（编译）、com.businessobjects.sdks:jrcerom:jar:12.2。 213 (编译), com.businessobjects.sdks:keycodeDecoder:jar:12.2.213 (编译), com.businessobjects.sdks:logging:jar:12.2.213 (编译), com.businessobjects.sdks:pfjgraphics:jar:12.2 .213 (编译), com.businessobjects.sdks:webreporting:jar:12.2.213 (编译), com.gnostice:pdfone:jar:5.0.0.79 (编译), com.independentsoft:exchange-server:jar:1.0 ( compile), org.alfresco:alfresco-web-service-client:jar:1.0 (compile), com.oracle.xmlns:oracle-bi-ws:jar:1.0 (compile), oracle.charts:oracle-chartbuilder:jar :1.0 (编译), com.rsa:rsa-authapi:jar:1.0 (编译), com.keyoti:RapidSpellWeb:jar:3.0.2 (编译), com.keyoti:RapidSpellMDict:jar:1.0 (编译), javax .ejb：ejb-api:jar:3.0 (编译), com.cognos:cognos-axis:jar:8.0 (编译), com.cognos:cognos-client:jar:8.0 (编译), com.cognos:cognos_cam_aaa_custom:jar:8.0 (编译), com.businessobjects.cms:cecore:jar:2011 (编译), com.businessobjects.cms:celib:jar:2011 (编译), com.businessobjects.cms:cesession:jar:2011 (编译), com .businessobjects.cms:cmslogon:jar:2011 (编译), com.businessobjects.cms:corbaidl:jar:2011 (编译), com.businessobjects.cms:ebus405:jar:2011 (编译), paypal.payflow:payment_paypal: jar:1.0 (编译), com.verisign:payment_verisign:jar:1.0 (编译), usbankclient:payment-usbankclient:jar:1.0 (编译), com.exact:payment-exact:jar:1.0 (编译), com. okgov:payment-okgov:jar:1.0 (编译), com.moneris:payment-moneris:jar:1.0 (编译), com.cybersource:payment-cybsclients:jar:1.0 (编译), com.cybersource:payment-cybssecurity:jar:1.0（编译）、javax.servlet:servlet-api:jar:2.5（提供）、javax.servlet:jsp-api:jar:2.1（提供）、junit:junit:jar:3.8 .1 (test)] 在 org.sonatype.aether.impl.internal.DefaultDependencyCollector.collectDependencies(DefaultDependencyCollector.java:258) 在 org.sonatype.aether.impl.internal.DefaultRepositorySystem.collectDependencies(DefaultRepositorySystem.java:308) 在 org .apache.maven.project.DefaultProjectDependenciesResolver.resolve(DefaultProjectDependenciesResolver.java:150) ... 23 更多原因：org.sonatype.aether.resolution.ArtifactDescriptorException: 无法读取 cglib-nodep:cglib-nodep:jar 的工件描述符:2.1_3 at org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.loadPom(DefaultArtifactDescriptorReader.java:296) 在 org.apache。maven.repository.internal.DefaultArtifactDescriptorReader.readArtifactDescriptor(DefaultArtifactDescriptorReader.java:186) 在 org.sonatype.aether.impl.internal.DefaultDependencyCollector.process(DefaultDependencyCollector.java:412) 在 org.sonatype.aether.impl.internal.DefaultDependencyCollector。 org.sonatype.aether.impl.internal.DefaultDependencyCollector.collectDependencies(DefaultDependencyCollector.java:240) 处的进程（DefaultDependencyCollector.java:544）... 25 更多原因：org.sonatype.aether.resolution.ArtifactResolutionException：无法传输来自/到 jboss 的工件 cglib-nodep:cglib-nodep:pom:2.1_3 (org.sonatype.aether.impl.internal.DefaultDependencyCollector.process(DefaultDependencyCollector.java:544) 处的进程(DefaultDependencyCollector.java:412) org.sonatype.aether.impl.internal.DefaultDependencyCollector.collectDependencies(DefaultDependencyCollector.java:240) ... 25 更多原因：org.sonatype.aether.resolution.ArtifactResolutionException：无法将工件 cglib-nodep:cglib-nodep:pom:2.1_3 从/到 jboss 传输（org.sonatype.aether.impl.internal.DefaultDependencyCollector.process(DefaultDependencyCollector.java:544) 处的进程(DefaultDependencyCollector.java:412) org.sonatype.aether.impl.internal.DefaultDependencyCollector.collectDependencies(DefaultDependencyCollector.java:240) ... 25 更多原因：org.sonatype.aether.resolution.ArtifactResolutionException：无法将工件 cglib-nodep:cglib-nodep:pom:2.1_3 从/到 jboss 传输（cglib-nodep:pom:2.1_3 从/到 jboss (cglib-nodep:pom:2.1_3 从/到 jboss ([http://repository.jboss.com/maven2](http://repository.jboss.com/maven2)）：拒绝访问： [http:](http://repository.jboss.com/maven2/cglib-nodep/cglib-nodep/2.1_3/cglib-nodep-2.1_3.pom) //repository.jboss.com/maven2/cglib-nodep/cglib-nodep/2.1_3/cglib-nodep-2.1_3.pom，ReasonPhrase : 禁止。在 org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolve(DefaultArtifactResolver.java:538) 在 org.sonatype.aether.impl.internal.DefaultArtifactResolver.resolveArtifacts(DefaultArtifactResolver.java:216) 在 org.sonatype.aether.impl .internal.DefaultArtifactResolver.resolveArtifact(DefaultArtifactResolver.java:193) at org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.loadPom(DefaultArtifactDescriptorReader.java:281) ... 29 更多原因：org.sonatype.aether.transfer。 ArtifactTransferException：无法将工件 cglib-nodep:cglib-nodep:pom:2.1_3 从/到 jboss 传输（[http://repository.jboss.com/maven2](http://repository.jboss.com/maven2)）：拒绝访问： [http ://repository.jboss.com/maven2/cglib-nodep/cglib-nodep/2.1_3/cglib-nodep-2.1_3.pom](http://repository.jboss.com/maven2/cglib-nodep/cglib-nodep/2.1_3/cglib-nodep-2.1_3.pom), 原因短语：禁止。在 org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap(WagonRepositoryConnector.java:951) 在 org.sonatype.aether.connector.wagon.WagonRepositoryConnector$4.wrap(WagonRepositoryConnector.java:941) 在 org.sonatype.aether .connector.wagon.WagonRepositoryConnector$GetTask.run(WagonRepositoryConnector.java:669) 在 org.sonatype.aether.util.concurrency.RunnableErrorForwarder$1.run(RunnableErrorForwarder.java:60) 在 java.util.concurrent.ThreadPoolExecutor$Worker。 runTask(ThreadPoolExecutor.java:886) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) at java.lang.Thread.run(Thread.java:662) 引起：org.apache.maven .wagon.authorization.AuthorizationException：拒绝访问： [http://repository.jboss.com/maven2/cglib-nodep/cglib-nodep/2.1_3/cglib-nodep-2.1_3.pom](http://repository.jboss.com/maven2/cglib-nodep/cglib-nodep/2.1_3/cglib-nodep-2.1_3.pom)，原因短语：禁止。在 org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon.fillInputData(AbstractHttpClientWagon.java:835) 在 org.apache.maven.wagon.StreamWagon.getInputStream(StreamWagon.java:116) 在 org.apache.maven.wagon .StreamWagon.getIfNewer(StreamWagon.java:88) at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTask.run(WagonRepositoryConnector.java) at org.apache.maven.wagon.StreamWagon.get(StreamWagon.java:61) :601) ... 4 更多 [ERROR] [ERROR] [ERROR] 有关错误和可能解决方案的更多信息，请阅读以下文章： [ERROR] [Help 1] [http://cwiki.apache.org/汇合/显示/MAVEN/DependencyResolutionException](http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException) [ERROR] [ERROR] 纠正问题后，您可以使用命令 [ERROR] mvn -rf :amanda-core 恢复构建

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T11:38:30.420

谢谢@ANdyB，我找到了解决方案，我刚刚从系统中删除了 .m2 目录，然后再次运行

> mvn 日食：日食

命令它运行所以问题

> .m2

在某个地方 Maven 存储存储库位置的目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-23T17:11:05.147

模拟运行器 pom.xml 引用 JBoss 存储库，因此您会收到错误消息。

[在这里](http://repo1.maven.org/maven2/com/mockrunner/mockrunner-jdk1.6-j2ee1.3/0.4/mockrunner-jdk1.6-j2ee1.3-0.4.pom)您可以查看模拟运行器 pom.xml。最好的解决方案是不使用模拟跑步者。

# sql - 如何防止汇合从宏产生的自动链接方括号？

> ID：14849782
> 
> 赞同：5
> 
> 时间：2013-02-13T09:00:28.770
> 
> 标签：sql, macros, escaping, sanitization, confluence

我正在使用[Atlassian Confluence](http://confluence.atlassian.com/)（不幸的是我）。

我在 wiki 标记块的宏中有一个`{sql}`宏。`groovy`现在，SQL 选择了一些看起来像`Foo[Bar]`. 结果wiki页面自动链接栏，即你得到

富[吧](http://some.where.com/bar)

这不是我想要的。我尝试了类似的东西

```
SELECT REPLACE(REPLACE(name, '[', '\['), ']', '\]') FROM mytable; 
```

但这触发了一个错误，而

```
SELECT REPLACE(REPLACE(name, '[', '\\['), ']', '\\]') FROM mytable; 
```

没有触发错误，但也没有帮助。我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T00:35:13.833

您的宏正在输出 wiki 标记中的字符串。一个简单的解决方案是通过将结果包含在标签中来确保您防止输出被解释为 wiki`{html}`标记。

# asp.net-mvc-4 - 使用 KNOCKOUT.JS 和 ASP.NET MVC 4 进行级联下拉

> ID：14849787
> 
> 赞同：6
> 
> 时间：2013-02-13T09:00:54.930
> 
> 标签：asp.net-mvc-4, knockout.js, cascadingdropdown

我正在关注本教程：

[http://www.dotnetexpertguide.com/2012/06/cascading-dropdown-knockoutjs-aspnet.html](http://www.dotnetexpertguide.com/2012/06/cascading-dropdown-knockoutjs-aspnet.html)

该项目提供的作品就像一个魅力。可以从这里下载：http: [//files.dotnetexpertguide.com/download.aspx?key=cascadingddlknockoutjs](http://files.dotnetexpertguide.com/download.aspx?key=cascadingddlknockoutjs)

问题是 - 我不知道如何更改视图，以便再出现一个城市选择框，其内容会根据所选的州而变化？

为城市再写一个模型并在控制器中按状态 ID 获取城市的操作非常简单，但我不明白如何更改 View 和 JS 代码以使其正常工作。

所以视图的代码：

```
<p>
<b>Select Country :</b> @Html.DropDownList("ddlCountry", ViewBag.Country as SelectList,"Select...", new { onchange = "FetchStates();" })
</p>

<p data-bind="visible: states().length > 0">
<b>Select State :</b> <select data-bind="options: states, optionsText: 'StateName', optionsValue: 'StateId', optionsCaption: 'Choose...'"></select>
</p>

<script type='text/javascript'>

function CascadingDDLViewModel() {
  this.states = ko.observableArray([]);
}

var objVM = new CascadingDDLViewModel();
ko.applyBindings(objVM);

function FetchStates() {
  var countryCode = $("#ddlCountry").val();
  $.getJSON("/Home/GetStates/" + countryCode, null, function (data) {
    objVM.states(data);
  });
}

</script> 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T09:15:28.047

```
<p>
<b>Select Country :</b> @Html.DropDownList("ddlCountry", ViewBag.Country as SelectList,"Select...", new { onchange = "FetchStates();" })
</p>

<p data-bind="visible: states().length > 0">
<b>Select State :</b> <select id="ddlStates" data-bind="options: states, optionsText: 'StateName', optionsValue: 'StateId', optionsCaption: 'Choose...'"></select>
</p>

<p data-bind="visible: cities().length > 0">
<b>Select City :</b> <select data-bind="options: cities, optionsText: 'CityName', optionsValue: 'CityId', optionsCaption: 'Choose...'"></select>
</p>

<script type='text/javascript'>

function CascadingDDLViewModel() {
  this.states = ko.observableArray([]);
  this.cities = ko.observableArray([]);
}

var objVM = new CascadingDDLViewModel();
ko.applyBindings(objVM);

function FetchStates() {
  var countryCode = $("#ddlCountry").val();
  $.getJSON("/Home/GetStates/" + countryCode, null, function (data) {
    objVM.states(data);
  });

function FetchCities() {
  var stateId = $("#ddlStates").val();
  $.getJSON("/Home/GetCities/" + stateId, null, function (data) {
    objVM.cities(data);
  });
}

</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-02T21:07:19.933

```
<p>
<b>Select Country :</b> @Html.DropDownList("ddlCountry", ViewBag.Country as SelectList,"Select...", new { onchange = "FetchStates();" })
</p>

<p data-bind="visible: states().length > 0">
<b>Select State :</b> <select id="ddlStates" data-bind="value: selectedState,options: states, optionsText: 'StateName', optionsValue: 'StateId', optionsCaption: 'Choose...'"></select>
</p>

<p data-bind="visible: cities().length > 0">
<b>Select City :</b> <select data-bind="options: cities, optionsText: 'CityName', optionsValue: 'CityId', optionsCaption: 'Choose...'"></select>
</p>

<script type='text/javascript'>

function CascadingDDLViewModel() {
    this.states = ko.observableArray([]);
    this.cities = ko.observableArray([]);
    this.selectedState = ko.observable();
}

var objVM = new CascadingDDLViewModel();
objVM.selectedResource.subscribe(function (stateId) {
    $.getJSON("/Home/GetCities/" + stateId, null, function (data) {
    objVM.cities(data);
    });
});

ko.applyBindings(objVM);

function FetchStates() {
    var countryCode = $("#ddlCountry").val();
    $.getJSON("/Home/GetStates/" + countryCode, null, function (data) {
    objVM.states(data);
    objVM.cities.removeAll();
});

</script> 
```

# sitefinity - Sitefinity 4.x 及更高版本中的无扩展 URL 设置

> ID：14849789
> 
> 赞同：1
> 
> 时间：2013-02-13T09:00:57.673
> 
> 标签：sitefinity, sitefinity-4, sitefinity-5

有谁知道在 Sitefinity 4.x 及更高版本中可以找到与无扩展 URL 相关的设置吗？我正在查看后端的“高级设置”，但找不到它们。

我最近从 Sitefinity 4.4 升级到 5.3 的网站突然显示某些页面的 .aspx 扩展名和其他页面的 404 错误。我无法将内容添加到新创建的页面，因为当我尝试将一些内容添加到页面草稿时它显示 404。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:53:33.913

Sitefinity 默认情况下是无扩展的，并且鉴于某些页面有 .aspx 而有些没有，您是否检查过它不是因为可能已添加到 web.config 中的一些错误的 url-rewrite 规则？

为了安全起见，您可以检查您的 PagesConfig.config 文件（位于 /App_Data/Sitefinity/Configuration 中）是否如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<pagesConfig 
 xmlns:config="urn:telerik:sitefinity:configuration"
 xmlns:type="urn:telerik:sitefinity:configuration:type"
 config:version="5.3.3900.0"
 defaultFrontendTemplateId="00000000-0000-0000-0000-000000000000"
 defaultBackendTemplateId="0000000-0000-0000-0000-000000000000"
 enableBrowseAndEdit="False"
/> 
```

（当然， 0000000-0000-0000-0000-000000000000 将是您的实际有效指南）

此外，您可以将 web.config 换成开箱[即](https://dl.dropbox.com/u/19007909/web533900.config)用的配置以进行验证。

如果某些由于错误而导致的页面被赋予了扩展名，您可以使用来自@selaromdotnet的类似[这样的片段来简单地删除它们。](http://www.sitefinityguru.com/blog/2012/04/17/removing-or-changing-sitefinity-page-extensions)

约赫姆

# asp.net-mvc-3 - 博客存档 ASP.NET MVC3

> ID：14849790
> 
> 赞同：1
> 
> 时间：2013-02-13T09:00:57.240
> 
> 标签：asp.net-mvc-3, razor

我正在使用 ASP.NET MVC3。目前我有一个博客。它运作良好，但条目现在越来越多，所以我需要一个档案来每月对它们进行分组。问题是我不知道该怎么做..

我正在考虑日期时间，但我不知道它背后的逻辑..我想实现这样的目标

```
September 2012 (1)
October 2012 (3)
December 2012 (0) 
```

我会感谢任何能帮助我的人。谢谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T05:52:51.887

你可以这样做。我以前也有同样的问题。

**档案库**

```
 public IQueryable<ArchiveListModel> AchiveList()
        {

            var ac = from Post in db.Posts
                     group Post by new { Post.DateTime.Year
, Post.DateTime.Month }
                     into dategroup
                     select new ArchiveListModel()
                      {

                         AchiveYear = dategroup.Key.Year,
                         AchiveMonth = dategroup.Key.Month,
                         PostCount = dategroup.Count()

                       };

            return ac;
        } 
```

**控制器**

```
public ActionResult ArchiveBrowse(int AchiveYear, int AchiveMonth, int PostCount)
        {
            var archivemodel = (from a in db.Posts
                                where a.DateTime.Year == AchiveYear &&
                                      a.DateTime.Month == AchiveMonth
                                select a).ToList();

            return View(archivemodel);
        } 
```

**看法**

```
@foreach (var item in Model)
{
@Html.ActionLink(System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(item.AchiveMonth) + "" + item.AchiveYear + " (" + item.PostCount + ")",
  "ArchiveBrowse", "Post", new
  {
      AchiveYear = item.AchiveYear,
      AchiveMonth = item.AchiveMonth,
      PostCount = item.PostCount
  }, null) 

} 
```

# c++ - 展望未来不在 QRegExp 中工作？

> ID：14849791
> 
> 赞同：1
> 
> 时间：2013-02-13T09:01:02.137
> 
> 标签：c++, regex, qt, lookahead, lookaround

我是 regexp 的新手，我正在尝试使用 QRegExp 中的前瞻断言功能来检查字符串的长度。这是一个非常简单的例子：

```
int main(int argc, char* argv[])
{
  QRegExp regexp("(?=^.{0,5}$)[0-9]*");
  qDebug() << "result:" << regexp.exactMatch("12345");
  return 1;
} 
```

打印：“结果：假”。

我测试了这个正则表达式和这个网页上的字符串：[http](http://regexpal.com/) ://regexpal.com/ ，它显示匹配。

任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-08T16:31:26.303

对我来说，使用 QT 4.8.6，它会正确地产生“结果：真”。没关系，如果你像 FrankieTheKneeMan 建议的那样，把 `^`里面放在前面或前面。

# c - 获取存储文件的文件系统类型

> ID：14849796
> 
> 赞同：3
> 
> 时间：2013-02-13T09:01:18.107
> 
> 标签：c, bash, unix

如何确定存储文件的文件系统类型？我可能有文件名，或者以后只有一个描述符。

一开始我很乐意使用脚本，但也想*知道*如何使用来自 C 的系统调用来完成它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-13T09:08:23.610

在命令行/脚本上，您可以使用`stat`：

```
$ stat -f -c "%T" someFileOnExt2Ext3
ext2/ext3

$ stat -f -c "%T" someFileOnNFS
nfs 
```

这最终会导致[statfs(2)](http://linux.die.net/man/2/statfs)系统调用：

```
int statfs(const char *path, struct statfs *buf); 
```

> 函数 statfs() 返回有关已安装文件系统的信息。path 是挂载文件系统中任何文件的路径名，buf 是指向 statfs 结构的指针。

# android - android:nextFocusForward 在布局中被忽略

> ID：14849798
> 
> 赞同：5
> 
> 时间：2013-02-13T09:01:23.763
> 
> 标签：android, android-layout

我有一个 android xml 布局，当用户按下键盘上的下一步时，我想指定字段的焦点顺序。

文档说，**android:nextFocusForward=TARGET_ID**应该做到这一点。但它在我们所有的测试设备上都被忽略了。一些运行 2.3 的旧设备和运行 4.1 的新 Nexus 设备。

```
<LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <EditText
            android:textCursorDrawable="@null"
            android:id="@+id/firstname"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="6dp"
            android:layout_marginTop="6dp"
            android:layout_weight="1"
            android:singleLine="true"
            android:background="#00000000"
            android:textColor="#000"
            android:nextFocusForward="@+id/lastname"
            android:padding="2dp"/>

        <EditText
            android:textCursorDrawable="@null"
            android:id="@+id/lastname"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="6dp"
            android:layout_marginTop="6dp"
            android:layout_weight="1"
            android:background="#00000000"
            android:singleLine="true"
            android:textColor="#000"
            android:padding="2dp"/>
    </LinearLayout> 
```

我在这里做错了什么？？？就是想不通。非常感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-21T22:01:46.123

也试试 nextFocusDown。我不完全理解规则，但似乎行为取决于 EditTexts 的布局，以及光标位置相对于下一个字段的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-05T15:53:18.603

我尝试设置 nextFocusDown、nextFocusForward、nextFocusRight，但它们都不起作用。我通过侦听编辑器操作并以编程方式将焦点设置到下一个 EditText 来使其工作。

```
 mFirstName.setOnEditorActionListener(new TextView.OnEditorActionListener() {
        @Override
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
            mLastName.requestFocus();
            return true;
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-01T04:03:14.297

我在 JetPack 的工具栏/操作栏中遇到了类似的问题。我似乎工具栏小部件完全忽略了 nextFocus 属性。我通过不使用那些遗留小部件并使用基于标准小部件的自定义工具栏来解决它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-21T15:55:49.120

已经很久了，但我刚刚遇到问题并找到了解决方案。当 AutoCompleteTextView 被 imeOptions 覆盖时，nextFocusForward 起作用。我的 EditText 字段中有这段代码，它可以工作：

```
android:imeOptions="actionNext"
android:nextFocusForward="@+id/et_xyz" 
```

# java - 查询中的 JPQL 语句无效的未绑定变量“serial_number”

> ID：14849799
> 
> 赞同：0
> 
> 时间：2013-02-13T09:01:26.483
> 
> 标签：java, jpql, openjpa

我怎样才能使这项工作？我想计算值为 1 的序列号？谢谢大家，我是初学者。

```
serial_Number = 1;

Query query = (Query) es.em.createQuery("SELECT COUNT(p.serial_Number) FROM Product p where p.product_Id = serials_Number"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:03:49.617

以下应该工作

```
 Query query = (Query) es.em.createQuery("SELECT COUNT(p.serial_Number) FROM Product p where p.product_Id =:serial_Number").setParameter("serial_Number", serial_Number); 
```

然后用..

```
query.getSingleResult(); 
```

得到奇异的实体。

# c# - 行之间带有分隔符的 LongListSelector

> ID：14849801
> 
> 赞同：3
> 
> 时间：2013-02-13T09:01:31.750
> 
> 标签：c#, silverlight, windows-phone-7

我有这个 LongListSelector：

```
<Controls:LongListSelector x:Name="searchList" Margin="0,0,0,0"  Background="White" SelectionChanged="DidPressSelectSearchList" HorizontalContentAlignment="Stretch" Grid.Row="1" KeyDown="UserPressEnterKeyBoard">
                <Controls:LongListSelector.ItemTemplate>
                    <DataTemplate>
                        <local:SearchTemplateSelector Content="{Binding}" HorizontalContentAlignment="Stretch">
                            <local:SearchTemplateSelector.GoogleSuggestTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*" />
                                            <RowDefinition Height="Auto" />
                                        </Grid.RowDefinitions>
                                        <Rectangle Height="1" HorizontalAlignment="Stretch" VerticalAlignment="Top" Fill="Black" Opacity="0.3"/>
                                        <TextBlock Text="{Binding}" FontSize="25" Foreground="Black" TextWrapping="Wrap" Grid.Row="1" Margin="0,10"/>
                                    </Grid>
                                </DataTemplate>
                            </local:SearchTemplateSelector.GoogleSuggestTemplate>

                            <local:SearchTemplateSelector.VideoTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*" />
                                            <RowDefinition Height="Auto" />
                                        </Grid.RowDefinitions>
                                        <Rectangle Height="1" HorizontalAlignment="Stretch" VerticalAlignment="Top" Fill="Black" Opacity="0.3"/>
                                        <TextBlock Text="{Binding}" FontSize="25" Foreground="Black" TextWrapping="Wrap" Grid.Row="1" Margin="0,10"/>
                                    </Grid>
                                </DataTemplate>
                                </local:SearchTemplateSelector.VideoTemplate>
                    </local:SearchTemplateSelector>
                    </DataTemplate>
</Controls:LongListSelector.ItemTemplate> 
```

因此，当我选择 GoogleSuggestTemplate 时，我得到了这个（如您所见，分隔符一直到行尾）：![在此处输入图像描述](../Images/50717904b1e46ec91cf45382a0c0e2ea.png)

当我使用 VideoTemplate 时（如您所见，分隔符在结束前被剪切）： ![在此处输入图像描述](../Images/d327dd3b071e707adc745d41086b546d.png)

知道为什么会这样吗？

# jquery - 使用 Cordova + Jquery Mobile 在 WP 7 上进行页面转换

> ID：14849802
> 
> 赞同：1
> 
> 时间：2013-02-13T09:01:33.510
> 
> 标签：jquery, windows-phone-7, cordova, jquery-mobile, cordova-2.0.0

我们开发了一个小应用程序 fpr Windows Phone 7.5。该应用程序有两个不同的屏幕。（页面 A 和页面 B）

在第一个屏幕（页面 A）上是一个按钮。如果用户点击按钮，屏幕应该从页面 A 变为页面 B。

问题是，有时“页面转换”会立即生效，有时不会生效，有时会在 4 或 5 秒后生效。

我们使用这个代码： http: [//paste.ubuntu.com/1642653/](http://paste.ubuntu.com/1642653/)

我们使用：

*   科尔多瓦 2.3.0
*   jQuery 1.8
*   jQuery 移动 1.2.0

我们如何解决这个问题？

最好的问候，萨米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:14:20.110

一些平台目前存在过渡问题。我们正在努力为每个人解决问题的解决方案。如果您在过渡期间或过渡结束时遇到闪烁和闪烁，我们建议您采用以下解决方法。请注意，此解决方法应在部署前在目标平台上进行全面测试。已知此解决方法会导致性能问题，并且浏览器在某些平台（尤其是 Android）上崩溃。

将以下代码添加到您的自定义 css。

```
.ui-page { -webkit-backface-visibility: hidden; } 
```

来源：[JQuery 页面转换](http://jquerymobile.com/test/docs/pages/page-transitions.html)

**更新：**您错过了关闭两个`</div>`. 我已经在 Chrome (PC) 上测试了你的代码，它运行良好。可能是浏览器问题。

# asp.net - 如何将模块添加到 dnn 发布的解决方案？

> ID：14849803
> 
> 赞同：0
> 
> 时间：2013-02-13T09:01:34.393
> 
> 标签：asp.net, dotnetnuke, dotnetnuke-module

我有一个已发布的 dnn 解决方案。我需要向该解决方案添加一个模块。这怎么可能？

我只是在一个新的解决方案中制作了一个模块，并在没有发布的情况下将其打包并将其安装在已发布的解决方案中。但是问题是已发布的解决方案没有 app_code 目录。所以删除 app_code 目录时显示错误。因为它不能找到控制器目录。如果我们不需要控制器，这个概念可以正常工作。但在我的场景中，我需要数据库连接。所以我需要控制器。所以是否有任何快捷方式可以将特定模块的 app_code 实现到已发布的网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:07:17.717

你是如何开发这个模块的？如果您使用我在[http://christoctemplate.codeplex.com](http://christoctemplate.codeplex.com)上的模块开发模板，您会发现跨网站打包和部署模块非常容易。如果您尝试部署模块，则使用“APP_Code”方法可能会更加困难。

# c# - 下个月显示的日历控件

> ID：14849804
> 
> 赞同：0
> 
> 时间：2013-02-13T09:01:39.267
> 
> 标签：c#, asp.net

添加了一个标准`Calendar`控件，现在我需要单击箭头以显示下个月。

我该如何实现呢？

现在，当我单击箭头显示下个月时，它不会改变。我该如何实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:21:41.280

尝试这个...

```
<asp:Calendar  
        ID="Calendar1"   
        runat="server"  
        NextPrevFormat="FullMonth"  
        SelectionMode="DayWeekMonth"  
        SelectMonthText="Month"  
        SelectWeekText="Week"  
        ForeColor="WhiteSmoke"  
        DayNameFormat="Full"  
        Font-Names="Book Antiqua"  
        Font-Size="Medium"  
        OnSelectionChanged="Calendar1_SelectionChanged"  
        > 
```

# java - Android 同步 - 数据已存在于表中

> ID：14849814
> 
> 赞同：2
> 
> 时间：2013-02-13T09:02:01.623
> 
> 标签：java, android, synchronization, webserver, sync

我需要一些建议。在我的应用程序中有登录表，我需要将登录数据（来自网络服务器）同步到我的应用程序。每天都有一个新人添加一个帐户。

所以现在表格看起来像这样：

登录表

```
 id    name      age
 1     David     23
 2     John      24
 3     Mathew    23
 4     James     25 
```

假设明天添加了一个名为 Paul 的新人；应用程序连接到网络服务器以检索数据并将数据存储在应用程序登录表中。

如果我有一个新人，我怎样才能将那个人单独存储在表中而不破坏旧记录？

**如果网络服务器只显示新添加的帐户，那么这对我来说完全没有问题，我可以轻松存储新帐户。相反，网络服务器也显示所有旧记录。**

我是否需要每天删除登录表并将所有数据存储为新数据？还是有其他方法可以仅将新添加的数据同步到表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:12:36.533

好吧，您总是可以编写自己的方法，以确定用户是否已经在您的本地数据库中。

您需要做的就是将网络服务器的结果存储在某种数组中（即：ArrayList），从另一个数组中的本地数据库中读取现有用户，并检查差异。如果有区别，您可以简单地将新用户插入到您的数据库中。

或者，如果您不想处理此问题，则只需清空表格并将整个结果插入其中。

# python - Matplotlib：在网格上显示圆圈时如何去除垂直空间？

> ID：14849815
> 
> 赞同：5
> 
> 时间：2013-02-13T09:02:03.167
> 
> 标签：python, matplotlib

我需要用 matplotlib 画一张穿孔卡片，它似乎没有这样的功能。所以我编写了以下代码：

```
import matplotlib.pyplot as plt
import numpy as np

def draw_punchcard(infos,
                ax1=range(7),
                ax2=range(24),
                ax1_ticks=['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'],
                ax2_ticks=range(24),
                ax1_label='Day',
                ax2_label='Hour'):
    """Construct a punchcard.
    Quick'n dirty way.

    Parameters
    ==========
    - infos: Dictionary of quantities to display.
            They are indexed by key of type (val1,val2) with
            val1 included in ax1 and val2 included in ax2.
    - ax1: list
            Possible values for first axe (if different than days)
    - ax2: list
            Possible values for second axe (if different than hours)
    - ax1_ticks: list
            Value to display in ticks of first axe (if different than days)
    - ax2_ticks: list
            Value to display in ticks of second axe (if different than days)
    - ax1_label: String
            Value to give to first axis (if different than day)
    - ax2_label: String
            Value to give to second axis (if different than day)

    """

    # build the array which contains the values
    data = np.zeros((len(ax1),len(ax2)))
    for key in infos:
        data[key[0],key[1]] = infos[key]
    data = data/float(np.max(data))

    # Draw the punchcard (create one circle per element)
    # Ugly normalisation allows to obtain perfect circles instead of ovals....
    for y in range(data.shape[0]):
        for x in range(data.shape[1]):
            circle = plt.Circle((x/float(data.shape[1])*data.shape[0],y),
                                data[y][x]/float(data.shape[1])*data.shape[0]/2)
            plt.gca().add_artist(circle)

    plt.ylim(0-0.5, data.shape[0]-0.5)
    plt.xlim(0, data.shape[0])
    plt.yticks(np.arange(len(ax1)), ax1_ticks)
    plt.xticks(np.linspace(0,len(ax1),len(ax2))+0.5/float(data.shape[1]), ax2_ticks)
    plt.xlabel(ax1_label)
    plt.ylabel(ax2_label)
    plt.gca().invert_yaxis() 
```

但是，它并不完全按预期工作。如果根据以下示例对其进行评估：

```
infos = {(6, 9): 12196, (0, 20): 22490, (1, 17): 59636, (0, 7): 14915, (2, 22): 7193, (1, 6): 11694, (0, 10): 85793, (3, 7): 17507, (2, 5): 4078, (1, 11): 83424, (5, 8): 33625, (4, 0): 1915, (6, 7): 10528, (5, 5): 3525, (4, 19): 33253, (6, 10): 12186, (5, 18): 20856, (0, 17): 61370, (0, 4): 551, (1, 1): 389, (4, 10): 94684, (3, 2): 286, (2, 6): 11845, (5, 11): 46822, (4, 5): 5215, (3, 23): 1841, (6, 0): 3441, (4, 16): 94545, (6, 23): 1285, (5, 21): 11096, (2, 17): 59928, (0, 1): 279, (3, 12): 56193, (1, 12): 59846, (4, 15): 102986, (3, 1): 371, (2, 11): 78007, (5, 14): 27711, (3, 18): 41365, (6, 13): 11994, (4, 21): 14477, (6, 16): 11669, (1, 21): 13629, (2, 18): 42399, (0, 14): 66284, (3, 11): 76402, (2, 1): 358, (1, 15): 93381, (4, 12): 67279, (2, 12): 57427, (5, 1): 509, (3, 17): 58974, (6, 14): 11383, (0, 21): 12604, (1, 16): 86199, (2, 23): 1914, (1, 5): 4002, (0, 11): 79164, (3, 6): 11434, (2, 2): 304, (1, 10): 88874, (4, 1): 420, (6, 4): 750, (5, 4): 783, (6, 11): 12886, (5, 17): 21573, (0, 18): 41842, (1, 19): 33073, (0, 5): 2777, (1, 0): 1189, (0, 8): 46486, (4, 11): 89246, (3, 5): 4105, (2, 7): 18534, (5, 10): 54826, (4, 6): 14638, (3, 22): 5043, (6, 1): 894, (5, 7): 16052, (4, 17): 66899, (6, 20): 16085, (5, 20): 18041, (0, 2): 219, (3, 15): 81526, (1, 3): 251, (4, 8): 58008, (3, 0): 1581, (2, 8): 47233, (5, 13): 23896, (3, 21): 13998, (6, 2): 540, (4, 22): 5920, (6, 17): 13856, (5, 23): 2155, (1, 20): 24386, (2, 19): 33216, (0, 15): 86664, (3, 10): 81444, (1, 14): 74440, (4, 13): 62307, (2, 13): 51784, (5, 0): 1959, (3, 16): 76742, (6, 15): 11438, (0, 22): 4055, (6, 18): 17554, (1, 23): 1681, (2, 20): 26427, (1, 4): 710, (0, 12): 59008, (3, 9): 72555, (2, 3): 372, (1, 9): 79140, (4, 2): 322, (2, 14): 68869, (6, 5): 3091, (5, 3): 392, (6, 8): 11720, (5, 16): 28663, (0, 19): 30223, (1, 18): 41624, (0, 6): 8791, (1, 7): 18280, (0, 9): 75860, (3, 4): 765, (2, 4): 834, (5, 9): 52874, (4, 7): 21830, (6, 6): 7618, (5, 6): 9935, (4, 18): 43274, (6, 21): 9836, (5, 19): 20758, (0, 16): 81458, (0, 3): 245, (3, 14): 66845, (1, 2): 291, (4, 9): 86355, (3, 3): 346, (2, 9): 71401, (5, 12): 27939, (4, 4): 987, (3, 20): 24478, (6, 3): 450, (4, 23): 2236, (6, 22): 3779, (5, 22): 4950, (2, 16): 79009, (0, 0): 1655, (3, 13): 53589, (1, 13): 55308, (4, 14): 81394, (2, 10): 80932, (5, 15): 32751, (3, 19): 32193, (6, 12): 12770, (4, 20): 24379, (0, 23): 1240, (6, 19): 18908, (1, 22): 4887, (2, 21): 16508, (0, 13): 54858, (3, 8): 47367, (2, 0): 1778, (1, 8): 50393, (4, 3): 387, (2, 15): 86256, (5, 2): 385}
draw_punchcard(infos)
plt.show() 
```

我们得到以下结果：![生成的拳头](../Images/0800b6068b1bb61d33b0525c49f31d66.png)

您会注意到圆圈之间有很多空白的垂直空间，而我希望两个最大尺寸的圆圈接触在一起（水平方向是这种情况，但不是垂直方向）。

那么，如何去除这个空间，同时保持圆比呢？

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T10:08:51.027

我根据数据的形状比（`r = float(data.shape[1])/data.shape[0]`）更改了圆圈的垂直间距。此外，画布大小会更改以适应结果，这样您就不会在默认画布大小中留下大的白色区域。

结果：

[![具有适当圆形比例的圆形图](../Images/12b34fe6f801b3b1f3665a03328fef5a.png)](https://i.stack.imgur.com/EcpQk.gif)

```
def draw_punchcard(infos,
                ax1=range(7),
                ax2=range(24),
                ax1_ticks=['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'],
                ax2_ticks=range(24),
                ax1_label='Day',
                ax2_label='Hour'):

    # build the array which contains the values
    data = np.zeros((len(ax1),len(ax2)))
    for key in infos:
        data[key[0],key[1]] = infos[key]
    data = data/float(np.max(data))

    # shape ratio
    r = float(data.shape[1])/data.shape[0]

    # Draw the punchcard (create one circle per element)
    # Ugly normalisation allows to obtain perfect circles instead of ovals....
    for y in range(data.shape[0]):
        for x in range(data.shape[1]):
            circle = plt.Circle((x/float(data.shape[1]-1)*(data.shape[0]-1),y/r),
                                data[y][x]/float(data.shape[1])*data.shape[0]/2)
            plt.gca().add_artist(circle)

    plt.ylim(0-0.5,  data.shape[0]-0.5)
    plt.xlim(0, data.shape[0])
    plt.yticks(np.arange(0,len(ax1)/r-.1,1/r), ax1_ticks)
    xt = np.linspace(0, len(ax1)-1, len(ax2))
    plt.xticks(xt, ax2_ticks)
    plt.xlabel(ax1_label)
    plt.ylabel(ax2_label)
    plt.gca().invert_yaxis()

    # make sure the axes are equal, and resize the canvas to fit the plot
    plt.axis('equal')
    plt.axis([0, 7, 6/r, -.5])
    scale = 0.5
    plt.gcf().set_size_inches(data.shape[1]*scale,data.shape[0]*scale, forward=True) 
```

# java - Maven 阴影插件

> ID：14849819
> 
> 赞同：1
> 
> 时间：2013-02-13T09:02:18.730
> 
> 标签：java, maven, maven-shade-plugin

我正在尝试使用 maven shade 插件和 maven 程序集插件从我的 maven 多模块构建中构建程序集。我需要的是这样的结构：

***assembly.zip***
------------- **dllDir**
-----*一些 dll 位于子模块*
--------- ---- **.netDir**
-----------------*完整的 jar（由所有模块 jar 组成）作为 .net lib (va ikvm)*
--------- ---- **fulljarDir**
----------------- *java full jar（由所有模块jar组成）*
----------------- *java api jar（仅某些类）*
----------------- *full-jar 源*
----------------- *api-jar来源*
-------------**库**
-----*所有子模块库（“正常”-jar、sources-jar、jar-有依赖）*
-------------**extlibDir**
-----------------*位于某些子模块目录中的其他一些 jars/dll*
------------- **docDir**
---- -------------*一些文档（从组装项目本身复制）*

目前，我正在使用程序集项目中的 shade 插件来创建*完整的 jar*和*api-jar*（所有模块都被描述为程序集项目的依赖项）及其源代码。

我使用程序集插件（带有程序集描述符）从模块中收集 jar 和 dll：

```
<moduleSets>
    <moduleSet>
        <includeSubModules>false</includeSubModules>
        <sources>
            <outputDirectoryMapping>libs/${module.basedir.name}
            </outputDirectoryMapping>
            <excludeSubModuleDirectories>
                true
            </excludeSubModuleDirectories>
            <fileSets>
                <fileSet>
                    <directory>/target/</directory>
                    <includes>
                        <include>*dependencies.jar</include>
                        <include>*javadoc.jar</include>
                        <include>*sources.jar</include>
                    </includes>
                    <outputDirectory>/</outputDirectory>
                </fileSet>
                <fileSet>
                    <directory>/native/usblibs.Linux/Release/</directory>
                    <includes>
                        <include>*.so</include>
                    </includes>
                    <outputDirectory>../../dllDir</outputDirectory>
                </fileSet>
                <fileSet>
                    <directory>/native/usb.Linux/lib/libusb-1.0/</directory>
                    <includes>
                        <include>*.so</include>
                    </includes>
                    <outputDirectory>../../usb</outputDirectory>
                </fileSet>
                <fileSet>
                    <directory>/native/usb.Linux/lib/usblib/i386/
                    </directory>
                    <includes>
                        <include>*.so</include>
                    </includes>
                    <outputDirectory>../../usb</outputDirectory>
                </fileSet>
            </fileSets>
        </sources>
    </moduleSet>
</moduleSets> 
```

现在的问题是我正在使用 shade 插件来编译 fat jar（所有模块的）。但我也在使用模块，所以需要打包`pom`，这会导致这种情况，即阴影插件创建 pom（其中包含源代码）而不是 jar。如果我`<finalName>`在阴影中使用标签，我可以将完整的工件重命名为 jar，但不会重命名生成的源。

有什么提示或技巧吗？也许有更好的方法来生产这样的组件？

最好的，一月

# sql - SQL Server 错误处理，判断记录是否存在，然后执行过程

> ID：14849826
> 
> 赞同：1
> 
> 时间：2013-02-13T09:02:33.323
> 
> 标签：sql, sql-server, error-handling, try-catch

我有一个脚本，我想每晚执行多次，基于表中不确定的项目数量（随机，每晚）。我计划让它每 5/10 分钟执行一次。

该过程在“主表”中查找项目并将其克隆到其他必要的表中。

基本上我可以让脚本运行，它每次都会失败，但我想比这更聪明一点，并保存所有错误消息。

如何首先确定是否要克隆某个项目...然后根据结果执行或中止脚本？

我试过了;

```
BEGIN TRY

--Procedure

END TRY

BEGIN CATCH

--Procedure

END CATCH 
```

但这似乎只是执行，有错误......

或者也许一个 IF 语句会是一个更好的方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:09:36.993

`IF`将是要走的路：

```
IF EXISTS (/*Statement to check if rows exist*/)
BEGIN

  --Procedure

END 
```

如果`IF`条件不满足，程序将不会运行。你只需要找出一个合适的检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T09:11:38.030

```
IF EXISTS (SELECT * FROM MyTable WHERE myConditions)
BEGIN
INSERT INTO OtherTable SELECT * FROM MyTable WHERE myConditions
END 
```

# asp.net - 在 Visual Studio 中创建 Web 部件

> ID：14849828
> 
> 赞同：0
> 
> 时间：2013-02-13T09:02:41.397
> 
> 标签：asp.net, vb.net, visual-studio-2010, visual-studio, sharepoint

我有 Visual Studio 2008 标准。我有 MS Sharepoint desighner 2007。我需要任何其他软件来创建 webparts。我不知道如何继续。请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:35:26.947

您将需要

1.  在您的开发机器上安装 Sharepoint。WSS3.0 或 MOSS2007 应该没问题，但你应该比较两者之间的功能差异来决定是否需要为 MOSS2007 付费：http: [//www.microsoft.com/en-us/download/details.aspx ?id=14117#overview](http://www.microsoft.com/en-us/download/details.aspx?id=14117#overview)

2.  为 Sharepoint 安装 VS2008 扩展，它将为您提供在 Visual Studio 中入门的项目模板：http: [//www.microsoft.com/en-sg/download/details.aspx?id=841](http://www.microsoft.com/en-sg/download/details.aspx?id=841)

3.  用于部署和测试 Web 部件的 Sharepoint 环境。

这是一个很好的入门教程链接：http: [//visualstudiomagazine.com/articles/2009/04/01/build-and-debug-web-parts-with-sharepoint-extensions.aspx](http://visualstudiomagazine.com/articles/2009/04/01/build-and-debug-web-parts-with-sharepoint-extensions.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:03:48.440

我会推荐[WSPBuilder](http://wspbuilder.codeplex.com/)

[在这里](https://stackoverflow.com/a/1260347/1206300)您可以找到有关如何`web part`通过 WSPBuilder 创建的说明。

# asp.net-mvc - 无法从 JSON 响应中获取数据

> ID：14849833
> 
> 赞同：0
> 
> 时间：2013-02-13T09:03:04.413
> 
> 标签：asp.net-mvc, json, jquery

我承认，这是一个非常基本的问题。但我实际上厌倦了它。我只是想将我的当前时间以 JSON 格式从我的操作方法发送到视图。在视图代码中，我尝试使用 jQuery ajax() 方法获取结果。但是在成功属性中，我无法从响应中获取结果。尝试了多种方法，例如 response.d 等，但几乎一无所获。

下面是相关的代码片段：

**动作方法：**

```
 public JsonResult GetDateTest()
        {
            return Json(DateTime.Now.ToString(), JsonRequestBehavior.AllowGet);
        } 
```

**视图中的脚本：**

```
<script type="text/javascript">

    $(document).ready(function () {

        $("#Button1").click(function (e) {

            $.ajax({

                type: 'POST',

                url: '@Url.Action("GetDateTest","GetDate")',

                data: '{}',

                contentType: 'application/json; charset=utf-8',

                dataType: 'json',

                success: function (response) {

                    //how can I read the date here and display it on the standard //controls like a label?

                },

                error: function (e) {
                    alert("error");
                }

            });

        });

    });
</script> 
```

用正确的解释帮助我弄清楚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:08:13.377

如果您想获取数据`json`，请修改您的控制器操作：

```
public JsonResult GetDateTest()
{
    return Json(new { date = DateTime.Now.ToString() }, JsonRequestBehavior.AllowGet);
} 
```

添加成功函数：

```
success: function (response) {
    $("#someLabel").html(response.date);
}, 
```

html

```
<div id="someLabel"></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T09:10:54.990

来自[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)

> **dataType**（默认值：Intelligent Guess（xml、json、script 或 html））
> 类型：String
> 您期望从服务器返回的数据类型。
> ...
> “json”：将响应评估为 JSON 并返回一个 JavaScript 对象。

因此，在您的情况下，响应应该已经被解析为 JSON 并作为 javascript 字符串返回。

由于您不传递任何数据，因此您可以使用 GET 的默认方法并将示例简化为

```
$.ajax({
    url: '@Url.Action("GetDateTest","GetDate")',
    dataType: 'json',
    success: function (response) {
        console.log(response);
    },
    error: function (e) {
        alert("error");
    }
}); 
```

如果您不需要错误回调，则可以[`jQuery.getJSON()`](http://api.jquery.com/jQuery.getJSON/)改用并进一步简化

```
$.getJSON('@Url.Action("GetDateTest","GetDate")',
          function (response) {
              console.log(response);
          }); 
```

**更新**评论：

要访问对象的属性，您必须将其编码为 JSON 对象

```
{
    "id": 423,
    "name": "john doe",
    "salary": 50000
} 
```

在 ajax 成功函数中，您可以将其作为响应的属性进行访问

```
success: function(data) {
    var id = data.id;
    var name = data.name;
    var salary = data.salary;
    // do something with data properties
} 
```

# r - 如何计算R中的邻接矩阵

> ID：14849835
> 
> 赞同：7
> 
> 时间：2013-02-13T09:03:12.883
> 
> 标签：r, matrix

我有这个数据。我想计算 R 中的邻接矩阵。

我怎样才能做到这一点？V1,V2,V3 是列。V1 和 V2 是节点，W3 是从 V1 到 V2 的权重。该数据的方向很重要。在计算了邻接矩阵之后，我想用 R 语言计算这些顶点之间的最短路径。

我怎样才能做到这一点？

```
 V1      V2     V3
[1] 164885   431072   3
[2] 164885   164885   24
[3] 431072   431072   5 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T21:03:50.000

这是一个更简单的解决方案，不需要`reshape()`. 我们只是直接从您拥有的数据框中创建一个 igraph 图。如果您真的需要邻接矩阵，您仍然可以通过以下方式获得它`get.adjacency()`：

```
library(igraph)

## load data
df <- read.table(header=T, stringsAsFactors=F, text=
                 "     V1      V2    V3
                   164885   431072    3
                   164885   164885   24
                   431072   431072    5")

## create graph
colnames(df) <- c("from", "to", "weight")
g <- graph.data.frame(df)
g
# IGRAPH DNW- 2 3 -- 
# + attr: name (v/c), weight (e/n)

## get shortest path lengths
shortest.paths(g, mode="out")
#        164885 431072
# 164885      0      3
# 431072    Inf      0

## get the actual shortest path
get.shortest.paths(g, from="164885", to="431072")
# [[1]]
# [1] 1 2 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-13T10:08:29.110

这至少应该让你开始。我能想到的最简单的方法`adjacency matrix`是这样做，然后使用如下方式`reshape`构建图表：`igraph`

```
# load data
df <- read.table(header=T, stringsAsFactors=F, text="     V1      V2     V3
 164885   431072   3
 164885   164885   24
 431072   431072   5")
> df
#       V1     V2 V3
# 1 164885 431072  3
# 2 164885 164885 24
# 3 431072 431072  5

# using reshape2's dcast to reshape the matrix and set row.names accordingly
require(reshape2)
m <- as.matrix(dcast(df, V1 ~ V2, value.var = "V3", fill=0))[,2:3]
row.names(m) <- colnames(m)

> m
#        164885 431072
# 164885     24      3
# 431072      0      5

# load igraph and construct graph
require(igraph)
g <- graph.adjacency(m, mode="directed", weighted=TRUE, diag=TRUE)
> E(g)$weight # simple check
# [1] 24  3  5

# get adjacency
get.adjacency(g)

# 2 x 2 sparse Matrix of class "dgCMatrix"
#        164885 431072
# 164885      1      1
# 431072      .      1

# get shortest paths from a vertex to all other vertices
shortest.paths(g, mode="out") # check out mode = "all" and "in"
#        164885 431072
# 164885      0      3
# 431072    Inf      0 
```

# azure - 在 Windows Azure 上部署 Web Socket 服务器

> ID：14849854
> 
> 赞同：0
> 
> 时间：2013-02-13T09:04:50.273
> 
> 标签：azure, asp.net-mvc-4, websocket

我创建了一个简单的 Web 应用程序，该应用程序在本地运行，并使用了我使用[Alchemy Web Sockets](http://alchemywebsockets.net/)实现的简单 Web 套接字服务器。现在我需要将此应用程序部署到 Windows Azure。

目前，该解决方案由一个 MVC4 网站和一个用于 Web 套接字服务器的控制台应用程序组成。我的问题是如何将我当前的解决方案部署到 Windows Azure？甚至可以将 Azure 用于控制台应用程序吗？

根据我在 Azure 网站上看到的内容，我可以将 MVC4 网站部署为 Azure 网站，并将控制台应用程序（服务器）部署在虚拟机或云服务上。在我看来，云服务更有意义（因为基础设施由微软管理，我对此不感兴趣），但我对这些技术完全陌生，所以我不确定哪种方法是最好的/如果是甚至可能。

**编辑：**

我已经按照 Sandrino 的建议将 Web 套接字服务器控制台应用程序作为 Web 角色的一部分来实现。但是，在加载连接到服务器的页面时，我在 chrome 调试器中收到以下错误`Unexpected response code: 200`。

除了我`@HttpContext.Current.Request.ServerVariables["HTTP_HOST"]`用来连接到客户端的服务器之外，我将所有内容都保持不变，因为 Azure 中将使用不同的服务器，我已经在本地应用程序中尝试过它并且它有效。我还没有部署到 Azure 但正在本地测试，可能服务器实际上并没有运行，我该如何检查？使用断点似乎正在输入启动服务器的必要方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:37:53.463

我建议您从控制台应用程序中获取代码并将其移动到云服务的 WebRole.cs。此文件是您的实例的入口点，这意味着您的代码将在实例启动时运行。这将允许您以相同的角色与您的 ASP.NET MVC 应用程序一起运行 WebSocket 服务器。

因此，在 Visual Studio 中，您需要创建一个新的云服务并选择一个 MVC4 Web 角色。

```
public class WebRole : RoleEntryPoint
{
    public override bool OnStart()
    {
        Task.Factory.StartNew(OnStartWebSocketServer, TaskCreationOptions.LongRunning);
        return base.OnStart();
    }

    private void OnStartWebSocketServer()
    {
        var aServer = new WebSocketServer(81, IPAddress.Any)
        {
            OnReceive = OnReceive,
            OnSend = OnSend,
            OnConnect = OnConnect,
            OnConnected = OnConnected,
            OnDisconnect = OnDisconnect,
            TimeOut = new TimeSpan(0, 5, 0)
        };
        aServer.Start();
    }
} 
```

# python - 使用带有数量的 Pandas Multiindex 失败并显示“分类级别必须是唯一的”

> ID：14849855
> 
> 赞同：2
> 
> 时间：2013-02-13T09:04:54.940
> 
> 标签：python, pandas

在某些情况下，使用带有数量索引的 pandas MultiIndex 会失败。让我给你看一个例子：

```
import quantities as pq
import pandas as pd

i = np.arange(10) * pq.J
j = np.array([1 for _ in xrange(10)]) * pq.K

pd.MultiIndex.from_tuples(zip(i, j), names=['Energy', 'Temperature']) 
```

这失败了以下回溯

```
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-86-c2d09517b80e> in <module>()
      5 j = np.array([1 for _ in xrange(10)]) * pq.K
      6 
----> 7 pd.MultiIndex.from_tuples(zip(i, j), names=['Energy', 'Temperature'])

C:\Python27\lib\site-packages\pandas\core\index.pyc in from_tuples(cls, tuples, sortorder, names)
   1685 
   1686         return MultiIndex.from_arrays(arrays, sortorder=sortorder,
-> 1687                                       names=names)
   1688 
   1689     @property

C:\Python27\lib\site-packages\pandas\core\index.pyc in from_arrays(cls, arrays, sortorder, names)
   1646             return Index(arrays[0], name=name)
   1647 
-> 1648         cats = [Categorical.from_array(arr) for arr in arrays]
   1649         levels = [c.levels for c in cats]
   1650         labels = [c.labels for c in cats]

C:\Python27\lib\site-packages\pandas\core\categorical.pyc in from_array(cls, data)
     59 
     60         return Categorical(labels, levels,
---> 61                            name=getattr(data, 'name', None))
     62 
     63     _levels = None

C:\Python27\lib\site-packages\pandas\core\categorical.pyc in __init__(self, labels, levels, name)
     45     def __init__(self, labels, levels, name=None):
     46         self.labels = labels
---> 47         self.levels = levels
     48         self.name = name
     49 

C:\Python27\lib\site-packages\pandas\core\categorical.pyc in _set_levels(self, levels)
     68         levels = _ensure_index(levels)
     69         if not levels.is_unique:
---> 70             raise ValueError('Categorical levels must be unique')
     71         self._levels = levels
     72 

ValueError: Categorical levels must be unique 
```

如果我删除单位，它工作得很好。

```
i = np.arange(10)
j = np.array([1 for _ in xrange(10)])

pd.MultiIndex.from_tuples(zip(i, j), names=['Energy', 'Temperature']) 
```

如果我保留单位，但对 j 使用独特的项目，它也可以。

```
i = np.arange(10) * pq.J
j = np.arange(10) * pq.K

pd.MultiIndex.from_tuples(zip(i, j), names=['Energy', 'Temperature']) 
```

这当然不是选择，因为指数来自测量。我真的很想保留这些单位，但由于我不熟悉熊猫内部，我不知道如何解决这个问题。

## 版本

我在 python 2.7 中使用熊猫版本 0.10.1 和数量 0.10.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T08:29:35.477

我能够重现此错误，但它在 Linux 上是断断续续的，每隔几次调用 `pd.MultiIndex.from_tuples(...)`.

我相信这个错误是由于`quantity`对象违反了 Python 相等哈希不变量的`a==b`暗示`hash(a)==hash(b)` （来源：[http](http://bugs.python.org/issue13707#msg150596) : [//bugs.python.org/issue13707#msg150596，https ://groups.google.com/forum/#!msg/同情/pJ2jg2csKgU/0nn21xqZEmwJ](https://groups.google.com/forum/#!msg/sympy/pJ2jg2csKgU/0nn21xqZEmwJ)）。

不良哈希行为的示例。

```
In [5]: (1 * pq.K) == (1 * pq.K)
Out[5]: True

In [6]: hash(1 * pq.K) == hash(1 * pq.K)
Out[6]: False 
```

基于这种行为，我认为这是一个数量问题，这导致了 pandas 的非法内部状态。

IMO，最干净的解决方案是让数量对象根据当前值返回一致的哈希，就像这个（被拒绝的）拉取请求`__hash__()`在数量对象上添加一个函数： [https ://github.com/python-quantities/python -数量/拉/ 29](https://github.com/python-quantities/python-quantities/pull/29)。
如果它想要表现得像一个可变对象，要么就是这样，要么在尝试散列时抛出错误。

# mysql - com.mysql.jdbc.exceptions.jdbc4.CommunicationsException：通信链路故障 6

> ID：14849856
> 
> 赞同：0
> 
> 时间：2013-02-13T09:04:58.763
> 
> 标签：mysql, spring, hibernate

在 log 中，我收到以下异常。可能的原因是什么？应用程序有 Spring 3.1、hibernate 3.6.9 和最新的 mysql。

```
 11:54:25,158 ERROR LoginController:152 - org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is javax.persistence.PersistenceException: org.hibernate.TransactionException: JDBC begin failed: 
            at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:427)
            at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:371)
            at org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:335)
            at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:105)
            at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
            at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)
            .....
            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
            at java.lang.Thread.run(Thread.java:722)
        Caused by: javax.persistence.PersistenceException: org.hibernate.TransactionException: JDBC begin failed: 
            at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1215)
            at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1148)
            at org.hibernate.ejb.AbstractEntityManagerImpl.throwPersistenceException(AbstractEntityManagerImpl.java:1225)
            at org.hibernate.ejb.TransactionImpl.begin(TransactionImpl.java:63)
            at org.springframework.orm.jpa.DefaultJpaDialect.beginTransaction(DefaultJpaDialect.java:70)
            at org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:377)
            ... 50 more
        Caused by: org.hibernate.TransactionException: JDBC begin failed: 
            at org.hibernate.transaction.JDBCTransaction.begin(JDBCTransaction.java:92)
            at org.hibernate.impl.SessionImpl.beginTransaction(SessionImpl.java:1473)
            at org.hibernate.ejb.TransactionImpl.begin(TransactionImpl.java:60)
            ... 52 more
        Caused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:07:11.247

看起来您丢失了 MySQL 连接。这可能是网络问题或 MySQL 端的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T08:00:18.323

在persistance.xml中实现连接池（C3PO）后解决

# javascript - 使用 angularjs 检测未保存的数据

> ID：14849857
> 
> 赞同：45
> 
> 时间：2013-02-13T09:05:06.953
> 
> 标签：javascript, angularjs, angularjs-directive

我是 AngularJs 的新手，所以这可能是微不足道的。是否有任何内置的 AngularJs`directive`来检测表单中未保存的数据。如果没有，那么如何去写一个。任何指针将不胜感激。

html代码是

```
<input type="text" runat="server" /> 
```

我的角度js控制器代码是

```
 function MyCtrl1($scope) {
      // code to do stuff
}MyCtrl1.$inject = ['$scope']; 
```

我正在尝试编写一个指令来检测未保存的数据，我猜它应该写在上面的控制器中。如果有错误，请纠正我。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-02-13T09:33:20.590

AngularJS 设置 CSS 类`ng-pristine`和`ng-dirty`您使用过 ng-model 的任何输入字段，并且您的 FormController 具有属性`$pristine`，`$dirty`您可以检查这些属性以查看表单是否脏。所以是的，这是可能的。

您能否提供一些代码来显示您正在尝试做什么？这样会更容易帮助你。

**编辑**

这是一个如何检测原始/脏状态以及如何恢复到原始状态的简单示例：

```
<!doctype html>
<html ng-app>
<head>
    <script src="http://code.angularjs.org/1.1.2/angular.min.js"></script>
    <script type="text/javascript">
    function Ctrl($scope) {
        var initial = {text: 'initial value'};
        $scope.myModel = angular.copy(initial);
        $scope.revert = function() {
            $scope.myModel = angular.copy(initial);
            $scope.myForm.$setPristine();
        }
    }
    </script>
</head>
<body>
    <form name="myForm" ng-controller="Ctrl">
        myModel.text: <input name="input" ng-model="myModel.text">
        <p>myModel.text = {{myModel.text}}</p>
        <p>$pristine = {{myForm.$pristine}}</p>
        <p>$dirty = {{myForm.$dirty}}</p>
        <button ng-click="revert()">Set pristine</button>
    </form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2014-10-13T11:15:39.090

监控`pristine/dirty`状态是一个很好的起点，但如果你想为用户提供尽可能好的可用性，你必须将当前表单数据与初始表单数据进行比较以检测任何变化。**如果表单是脏的，它仍然不意味着它已经改变了数据。**

我创建了一个非常小且有用的模块来解决这个确切的问题。有了它，您可以使控制器代码尽可能简单。它会`modified`自动为每个模型甚至表单控制器添加属性，您只需调用提供的`reset()`方法即可重置整个表单，因此您可以专注于应用程序的业务逻辑，而不是手动检测更改。

请看[演示](http://plnkr.co/edit/g2MDXv81OOBuGo6ORvdt?p=preview)。

您可以在此处找到分发包和源代码： [https](https://github.com/betsol/angular-input-modified) ://github.com/betsol/angular-input-modified （也可以通过*Bower*获得）

如果您在使用此库时需要任何帮助 - 您可以亲自与我联系。我很乐意提供帮助。干杯!

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-04-20T16:58:50.030

这就是我在控制器中所做的。

当我获取要修改的表单数据时，首先我将其字符串表示形式保存到一个范围变量中，如下所示：

```
$scope.originalData = JSON.stringify($scope.data); 
```

然后我创建一个状态变化监听器：

```
 var $locationChangeStartUnbind = $scope.$on('$stateChangeStart', function (event, toState, toParams, fromState, fromParams) {
    if ($scope.originalData !== JSON.stringify($scope.data)) {
        //Show alert and prevent state change
    } else {
        //DO NOTHING THERE IS NO CHANGES IN THE FORM
    }
}); 
```

然后我清除范围销毁的侦听器：

```
$scope.$on('$destroy', function () {
    window.onbeforeunload = null;
    $locationChangeStartUnbind();
}); 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-15T19:03:58.233

试试这个适用于 ui-router 的指令

[https://github.com/facultymatt/angular-unsavedChanges](https://github.com/facultymatt/angular-unsavedChanges)

# javascript - 使用文本字段的焦点

> ID：14849859
> 
> 赞同：0
> 
> 时间：2013-02-13T09:05:13.483
> 
> 标签：javascript, focus

我有两个要素：

1.  一个 texfield 元素，首先隐藏。
2.  和一个覆盖文本字段的按钮元素。

另一方面，我有一个名为 onDoubleClick 的事件，当在按钮中双击时调用一个函数。此功能隐藏按钮并显示文本字段，**但我需要此时文本字段可编辑**（如第三次单击）

我读到了 focus() 但它对我没有帮助...... [http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_html_blur](http://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_html_blur)

我怎样才能获得它？

**编辑**：

我很好地获得了输入元素：

```
var htmlElement = document.getElementById(this._tabsTitle[pos]._hPath);
var input = htmlElement[0];
input.focus(); 
```

htmlElement var 是一个表单，**input var 是****输入**字段，我得到它很好，我正在使用 chrome 检查器，使用调试器，但是 focus() 不起作用...

**解决方案**

**这是我的错误......这段代码是一个大项目的一部分，并且焦点工作正常，但由于线程问题没有做任何事情**......我检查并解决了它，现在它就像一个魅力：-） 谢谢大家

问候，丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:10:12.320

这可能是时间问题吗？

请试试这个：

```
 onDoubleClick(function(){
       setTimeout(function(){
         button.focus();
       },50);
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T09:50:07.753

检查[这个小提琴](http://jsfiddle.net/mZGJN/9/)。我相信它会做你想要的。

html

```
<input type="text" style="display:none" id="txtField1" />
<input type="button" id="btn1" value="Double Click Here" /> 
```

js

```
function modify() {
   //lets hide the button
   document.getElementById("btn1").style.display= "none";
   // show the text field
   document.getElementById("txtField1").style.display = "block"; 
   // now focus on the field
   document.getElementById("txtField1").focus();  
}

var el = document.getElementById("btn1");
// attaches event to the button
el.addEventListener("dblclick", modify, false); 
```

**根据顶部的评论更新（下面的问题）。**

如果您不想隐藏按钮并使其值为空。

换行

```
document.getElementById("btn1").style.display= "none"; 
```

经过

```
document.getElementById("btn1").value= ""; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-21T18:32:36.870

我和你有类似的问题，最后通过使用回调函数找到了出路。我的代码是：

```
 <s:textfield 
                                                id="clientUnitNoId" 
                                                name="clientUnitNumber" 
                                                value="%{clientUnitNumber}"
                                                size="20" maxlength="8" 
                                                onchange="validateClientUnit(this.value)" cssClass="inputTextField"/>

...
    if ( !isValid){
        Ext.MessageBox.alert('ERROR', 
        'The Client Unit# only allows Alphanumeric data ',
        function(){
            document.getElementById('clientUnitNoId').focus();
            document.getElementById('clientUnitNoId').select();} );
            return false;
        } 
```

# c# - 我将调试器放在附加到进程的现有 Windows 应用程序中，我对输出感到困惑

> ID：14849863
> 
> 赞同：0
> 
> 时间：2013-02-13T09:05:31.800
> 
> 标签：c#, sql-server-2008

> System.Windows.Data 错误：4：找不到与引用“RelativeSource FindAncestor，AncestorType='Microsoft.VisualStudio.PlatformUI.VsToolBar'，AncestorLevel='1''的绑定源。绑定表达式：路径=方向；数据项=空；目标元素是'VsMenuItem'（名称=''）；目标属性是“NoTarget”（类型“对象”） System.Windows.Data 错误：4：找不到与引用“RelativeSource FindAncestor，AncestorType='Microsoft.VisualStudio.PlatformUI.VsToolBar'，AncestorLevel='1''的绑定源. BindingExpression:Path=DataContext.DockLocation; 数据项=空；目标元素是'VsMenuItem'（名称=''）；目标属性是“NoTarget”（类型“对象”） System.Windows.Data 错误：4：无法通过引用“RelativeSource FindAncestor，AncestorType='Microsoft.VisualStudio.PlatformUI.VsToolBar'，AncestorLevel='1'”找到绑定源。BindingExpression:Path=DataContext.DockLocation; 数据项=空；目标元素是'VsMenuItem'（名称=''）；目标属性是“NoTarget”（类型“对象”）

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:24:49.010

我设法找到了答案，因为我必须将 app.config 文件字符串连接设置到正确的数据库，但它总是找不到路径，所以我得到了 app.config 的目录路径并将其硬编码在我的代码。

# c++ - C rand() 并不是真正随机的

> ID：14849866
> 
> 赞同：1
> 
> 时间：2013-02-13T09:05:43.130
> 
> 标签：c++, c, random

我正在开发一个应用程序。我正在使用：

```
int rand_num = rand() % 100; 
```

得到一个 0 到 99 之间的随机整数。现在，假设我得到了 41，然后重新启动我的应用程序，它总是 41。相同的序列一遍又一遍，意味着它不是真正随机的。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T09:06:47.433

每次启动应用程序时，您都必须通过调用[`srand(...)`](http://en.cppreference.com/w/cpp/numeric/random/srand)（通常使用）来随机化种子。`time(0)`请注意，它是一个伪随机数生成器，即函数生成的值`rand()`不是均匀分布的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T09:07:16.220

`rand`生成一个伪随机数，是的。但是你可以设置种子。

```
srand(time(NULL));
int rand_num = rand() % 100; 
```

只设置一次种子。

或者您可以使用其中一种方法[`<random>`](http://www.cplusplus.com/reference/random/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-13T09:07:06.327

使用以下内容：

```
#include<time.h>

srand(time(NULL)); 
```

它将改变伪随机生成器的种子。

有关更多信息，请参阅[此](http://www.codingunit.com/c-reference-stdlib-h-function-srand-initialize-random-number-generator)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-13T09:07:07.103

正确的。rand() 返回一个伪随机数。从给定开始的顺序是确定性的。您可以使用 srand() 更改起点。

# forms - Visual basic 6：检查日期是否在未来

> ID：14849868
> 
> 赞同：0
> 
> 时间：2013-02-13T09:05:45.717
> 
> 标签：forms, validation, date, vb6, future

我有一个用 VB6 制作的表格，我需要检查日期字段以了解未来的日期。

如果输入的日期是将来的日期，则应显示错误消息，如果不是，则应完成验证。

我弄完了：

```
Private Sub txtDate_Validate(Index As Integer, Cancel As Boolean)
If Not IsDate(txtDate(9).Text) Then 'first I check if the data entered is a date
'error message saying the field needs a valid date
  Cancel = True
        Else
      If (txtDate(9).Text > Date) Then 'now I check if the date entered is bigger than today’s date 
                'error message saying the date is in the future 
                Cancel = True
            Else
               Exit Sub
            End If
       End If 
End If
End Sub 
```

此代码不起作用，因为

```
txtDate(9).Text > Date 
```

永远是真的

即使我这样做：

```
Format(txtDate(9).Text, "dd/mm/yyyy") > Date 
```

也总是如此

我能做些什么来解决这个问题？我如何知道输入的日期是否在将来？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:38:57.010

使用 CDate 将文本框的内容转换为日期。

如果它有引号，就不能强调这一点，它是一个字符串。

# ruby - Ruby：用 '.' 转换字符串 到符号

> ID：14849872
> 
> 赞同：-2
> 
> 时间：2013-02-13T09:05:50.490
> 
> 标签：ruby, mongoid

我有这个字符串：`'industry.in'`我想将它转换为`:industry.in`. 当我这样做`'industry.in'.to_sym`时，结果是：`:"industry.in"`。

任何人都知道如何使它成为：`:industry.in`而不是？

我这样做是为了在 Mongoid 中对数组字段进行条件查询：

```
criteria = 'industry.in'.to_sym    
Company.where(criteria => ['Information Technology']) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T09:10:34.167

`:"industry.in"`实际上是以`industry.in`可复制/可粘贴的方式表示的符号。

如果您`:industry.in`直接输入，您将收到“无方法”错误，因为 Ruby 会将其解析为：

```
call #in method on :industry symbol 
```

所以，`'industry.in'.to_sym`实际上是在做你需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T14:28:54.550

其实很简单。但首先你必须明白你想要做什么。

```
:industry.in 
```

这`:industry`是一个符号，`in`是对该符号的**方法调用。**因此，将字符串分成两部分，将第一部分转换为符号并使用第二部分动态调用方法。

```
require 'mongoid'

s = 'industry.in'
parts = s.split('.') # => ["industry", "in"]
parts[0].to_sym.send(parts[1]) # => #<Origin::Key:0x007fa872ec0550 @name=:industry, @strategy=:__intersect__, @operator="$in", @expanded=nil, @block=nil>

# just the same as literal
:industry.in # => #<Origin::Key:0x007fa872ebf970 @name=:industry, @strategy=:__intersect__, @operator="$in", @expanded=nil, @block=nil> 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-02-13T09:27:02.467

**Rails 方法 - to_sym**

这些都是一样的。

`'industry.in'.to_sym`变成`:industry.in`

此外，有关 to_sym 的更多信息，请参阅[此内容。](https://stackoverflow.com/questions/4062929/rails-method-to-sym)

# jquery - 生成类别树结构json数据？

> ID：14849876
> 
> 赞同：0
> 
> 时间：2013-02-13T09:06:07.893
> 
> 标签：jquery, json, asp.net-mvc-3, entity-framework

**类别表：**

ID => int，主键

类别名称 => varchar

ParentCategoryID => int ，可为空

**生成以下json数据格式：**

```
[{
    "id":1,
    "name":"Root",
    "Edit":"<a href='Edit/id'>edit.png</a>",
    "Delete":"<a href='Delete/id'>delete.png</a>",
    "children":[{
        "id":2,
        "name":"Horoscope",
        "Edit":"<a href='Edit/id'>edit.png</a>",
        "Delete":"<a href='Delete/id'>delete.png</a>",
        "children":[{
            "id":21,
            "name":"Daily",
            "Edit":"<a href='Edit/id'>edit.png</a>",
            "Delete":"<a href='Delete/id'>delete.png</a>",
            "children":[{
                "id":211,
                "name":"Aries",             
                "Edit":"<a href='Edit/id'>edit.png</a>",
                "Delete":"<a href='Delete/id'>delete.png</a>"
            },{
                "id":212,
                "name":"Taurus",                
                "Edit":"<a href='Edit/id'>edit.png</a>",
                "Delete":"<a href='Delete/id'>delete.png</a>"
            }]
        },{
            "id":22,
            "name":"Weekly",            
            "Edit":"<a href='Edit/id'>edit.png</a>",
            "Delete":"<a href='Delete/id'>delete.png</a>",
            "children":[{
                "id":221,
                "name":"Gemini",                
                "Edit":"<a href='Edit/id'>edit.png</a>",
                "Delete":"<a href='Delete/id'>delete.png</a>"
            },{
                "id":222,
                "name":"Aries",             
                "Edit":"<a href='Edit/id'>edit.png</a>",
                "Delete":"<a href='Delete/id'>delete.png</a>"
            },{
                "id":223,
                "name":"Taurus",            
                "Edit":"<a href='Edit/id'>edit.png</a>",
                "Delete":"<a href='Delete/id'>delete.png</a>"
            }]
        }]
    },{
        "id":3,
        "name":"News",      
        "Edit":"<a href='Edit/id'>edit.png</a>",
        "Delete":"<a href='Delete/id'>delete.png</a>",
        "children":[{
            "id":31,
            "name":"Sports",            
            "Edit":"<a href='Edit/id'>edit.png</a>",
            "Delete":"<a href='Delete/id'>delete.png</a>"
        },{
            "id":32,
            "name":"Interantional",         
            "Edit":"<a href='Edit/id'>edit.png</a>",
            "Delete":"<a href='Delete/id'>delete.png</a>"
        },{
            "id":33,
            "name":"Entertaintment",            
            "Edit":"<a href='Edit/id'>edit.png</a>",
            "Delete":"<a href='Delete/id'>delete.png</a>"
        }]
    }]
}] 
```

我有需要以上 json 格式的 Jquery TreeGrid 插件。如何从数据库的类别表中生成上述 json 数据并在控制器操作中返回 json 数据。我已经为模型使用实体框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:56:34.983

我不会从混合数据和 UI 指令开始！它用多余的重复数据使 JSON 消息变得混乱。我认为由客户决定将数据放在哪里以及如何显示它们，否则您应该单独发送这些说明（例如，作为消息的第一部分）。

也就是说，完成这项工作的最简单方法是让你的类定义如下：

```
class Category
{
    public int Id { get; set; }
    public string CategoryName { get; set; }
    public int? ParentCategoryID { get; set; }
    [ForeignKey("ParentCategoryID")]
    public virtual ICollection<Category> SubCategories { get; set; }
} 
```

当您使用 查询`Categories`、`ParentCategoryID == null`启用延迟加载并序列化为 JSON 时，您会看到所有级别都包含在内，因为每个级别都会`Category`发出一个查询以获取其子级。

请注意，`Category`它没有`ParentCategory`属性，因为这可能会导致 JSON 序列化由于循环引用而失败。

[`JavaScriptSerializer`](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)如果您不在 MVC API 控制器中，则可以使用序列化。

顺便提一句。做到这一点的*最好*方法是让你的域模型传输无知并使用`CategoryDto`对象结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:34:26.260

我认为您需要在您的域类中有一个名为“Children”的属性，如下所示，

```
Category {

public int Id{get;set;}
public string CategoryName{get;set;}
public int ParentCategoryID {get;set;}
public Category ParentCategory {get;set;}

public virtual IList<Category > Children{get;set;}
} 
```

然后您可以使用[AutoMapper](http://automapper.codeplex.com/)之类的映射器将这些模型映射到您的视图模型（其属性与您对 json 对象所需的属性相同）

# uiviewcontroller - 用于在 UITabBarController 之前登录的 UIViewController

> ID：14849881
> 
> 赞同：2
> 
> 时间：2013-02-13T09:06:30.937
> 
> 标签：uiviewcontroller, uitabbarcontroller

我想用登录请求可视化一个 UIViewController。登录后（如果可以），我想展示我的应用程序，它由带有各种选项卡的 UITabBarController 组成。现在我通常在 AppDelegate 中使用这段代码来管理 UITabBarController：

```
UIViewController *viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
UIViewController *viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];

self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = @[viewController1, viewController2];
self.window.rootViewController = self.tabBarController;
[self.window makeKeyAndVisible]; 
```

这将显示我的应用程序。在此之前，我如何显示一个用于登录请求的 UIViewController？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:46:07.537

**1.**一种方法是让您的登录控制器成为根视图控制器，然后从那里推送标签栏控制器及其视图控制器。您可以在应用程序启动期间检查登录并直接跳到标签栏控制器而没有动画。

**2.**或者，您可以用覆盖物覆盖标签栏控制器（向窗口添加子视图）。然后根据需要在其上显示您的登录控制器的视图，或者使覆盖立即消失。

# javascript - JavaScript 将 HTML 表格导出到 Excel 复选框问题

> ID：14849882
> 
> 赞同：0
> 
> 时间：2013-02-13T09:06:35.077
> 
> 标签：javascript, export-to-excel

我想将 html 表导出到 excel。我可以导出的所有数据。但我对复选框有疑问。我无法在 Excel 中显示我的复选框。也有一些选中的复选框。可以在excel中显示复选框吗？

我的代码；

```
 function CreateExcelSheet(div,table){
  if (is_gecko) {
       var div =document.getElementById(div).innerHTML;
       windowUrl = "data:application/vnd.ms-excel,";
       var printWindow = window.open(windowUrl + encodeURIComponent(div), table);
  } 
  else if (is_ie5up){
        var x = document.getElementById(table).rows;
        var xls = new ActiveXObject("Excel.Application");
        xls.visible = true
        xls.Workbooks.Add
        for (i = 0; i < x.length; i++) {
        var y = x[i].cells;
        for (j = 0; j < y.length; j++) {
            xls.cells(i + 1, j + 1).value = y[j].innerText;
        }
        }
  }
  else{
   alert("No support Excel please open whit Firefox!");
  } 
} 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:14:57.247

have you tried this? It converts data to base64 that can be processed by Excel.

[https://github.com/stephen-hardy/xlsx.js](https://github.com/stephen-hardy/xlsx.js)

# c# - COM - 访问被拒绝

> ID：14849884
> 
> 赞同：1
> 
> 时间：2013-02-13T09:06:45.957
> 
> 标签：c#, com, dcom, opc

我现在已经被这个问题困住了大约 5 天。

基本上我正在尝试从远程 PC 连接到 OPC 服务器（Kepware）。如果我在安装了 Kepware 的服务器（在本例中为 192.168.102.104）上运行我编写的代码，则它可以工作。

但是，如果我从远程 PC 运行它，我会收到以下错误。

```
System.UnauthorizedAccesException: Access is denied 
(Error from HRESULT: 0x080070005 E_ACCESSIFDENIED)) 
```

我已按照以下说明设置服务器： [http ://www.kepware.com/Support_Center/SupportDocuments/Remote%20OPC%20DA%20-%20Quick%20Start%20Guide%20(DCOM).pdf](http://www.kepware.com/Support_Center/SupportDocuments/Remote%20OPC%20DA%20-%20Quick%20Start%20Guide%20(DCOM).pdf)

PC 不在域中，并且两台 PC 都包含具有相同密码的用户 Administrator。

谁能告诉我问题可能出在 PC 设置或我的代码上

代码：：

```
class Program
{
    static void Main(string[] args)
    {
        try
        {
            Unmanaged.CoInitializeSecurity(IntPtr.Zero, -1, IntPtr.Zero, IntPtr.Zero,
                                           Unmanaged.RpcAuthnLevel.Connect,
                                           Unmanaged.RpcImpLevel.Anonymous, IntPtr.Zero,
                                           Unmanaged.EoAuthnCap.None, IntPtr.Zero);

            using (new Impersonation("Administrator", "TEST", "Password"))
            {
                OPCServer opcServer = new OPCServer();
                opcServer.Connect("Kepware.KEPServerEx.V5", "192.168.102.104");
                Console.WriteLine(opcServer.ServerName);
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine("Connection error:::\n\n{0}\n\n",ex);
            Console.ReadLine();
        }
        Console.ReadLine();
    }
} 
```

非托管类::

```
partial class Unmanaged
{
    [DllImport("ole32.dll")]
    public static extern int CoInitializeSecurity(IntPtr pVoid, int
        cAuthSvc, IntPtr asAuthSvc, IntPtr pReserved1, RpcAuthnLevel level,
        RpcImpLevel impers, IntPtr pAuthList, EoAuthnCap dwCapabilities, IntPtr
        pReserved3);

    public enum RpcAuthnLevel
    {
        Default = 0,
        None = 1,
        Connect = 2,
        Call = 3,
        Pkt = 4,
        PktIntegrity = 5,
        PktPrivacy = 6
    }

    public enum RpcImpLevel
    {
        Default = 0,
        Anonymous = 1,
        Identify = 2,
        Impersonate = 3,
        Delegate = 4
    }

    public enum EoAuthnCap
    {
        None = 0x00,
        MutualAuth = 0x01,
        StaticCloaking = 0x20,
        DynamicCloaking = 0x40,
        AnyAuthority = 0x80,
        MakeFullSIC = 0x100,
        Default = 0x800,
        SecureRefs = 0x02,
        AccessControl = 0x04,
        AppID = 0x08,
        Dynamic = 0x10,
        RequireFullSIC = 0x200,
        AutoImpersonate = 0x400,
        NoCustomMarshal = 0x2000,
        DisableAAA = 0x1000
    }
} 
```

模拟类只是模拟本地用户管理员。

当我使用 Kepware 在服务器上运行它时，我得到了输出 - Kepware.KepServerEx.V5 当我在客户端 PC 上运行它时，我得到了上述错误

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T09:44:19.597

找到了问题的根源。

为什么总是这样，我一发帖就想通了？

问题在于服务器的设置方式。我不会在这里对所有细节感到厌烦，但这与将 DCOM 设置（在 DCONcnfg 中）中的身份设置为错误的用户有关。

显然我忽略了服务器设置说明的那一点。

很抱歉浪费了任何人的时间。

# windows - 在 Windows 上将用户模拟为 LocalSystem

> ID：14849897
> 
> 赞同：2
> 
> 时间：2013-02-13T09:07:18.797
> 
> 标签：windows, winapi, impersonation, privileges

我有一个在 Windows XP 及以下以 LocalSystem 运行的进程。我试图找到一种方法让它启动另一个进程来模拟另一个用户**，而**无需提供用户密码。

原则上这应该是可能的，因为 LocalSystem 具有“作为操作系统的一部分”的特权。但我找不到正确的 API。

有人可以告诉我如何做到这一点：

*   使用 API，或
*   从批处理文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:50:19.377

您可以先通过 获取用户的令牌[`WTSQueryUserToken`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383840%28v=vs.85%29.aspx)，然后调用[`CreateProcessAsUser`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682429%28v=vs.85%29.aspx)以启动该过程。请注意，您只能对当前登录系统的用户执行此操作。

# jquery - jQuery | 数据属性更新问题

> ID：14849898
> 
> 赞同：0
> 
> 时间：2013-02-13T09:07:23.287
> 
> 标签：jquery, html5-data

我有以下 jQuery 代码：

这是 HTML：

```
<div 
    class="continueReading" 
    data-skip="0" 
    data-categories="22,243" 
    data-is="single" 
    data-s="cd1f2f7a7d" 
    data-list="latestNews-sidebar-1"
>
    <a href="javascript:void();" class="latestNewsWidgetMoreLink">get more</a>
    <a href="javascript:void();" class="latestNewsWidgetMoreButton">»</a>
</div> 
```

和 jQuery 是这样的：

```
$('.latestNewsWidgetMoreLink, .latestNewsWidgetMoreButton').click(
    function()
    {    
        total_items = 10;
        $(this).parent('div').attr('data-skip', total_items);
    }
); 
```

但似乎不起作用。有人可以帮助我吗？这段代码有错误吗？

**注意**：我也尝试了以下代码，但没有成功：

```
total_items = 10;
$(this).parent('div').data('skip', total_items); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:19:08.013

从两个链接中删除`javascript:void();`，然后使用 firebug 检查 HTML DIV 并单击链接，它将设置`data-skip="10"`；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T09:25:18.260

该代码在[此示例 jsFiddle](http://jsfiddle.net/MfYLk/)中适用于我。我怀疑代码执行得太早了，因此`click`事件处理程序没有绑定到元素（因为它们还不存在）。尝试将其包装在一个`$(document).ready()`电话中：

```
$(document).ready(function () {
    $('.latestNewsWidgetMoreLink, .latestNewsWidgetMoreButton').click(function () {
        total_items = 10;
        $(this).parent('div').data('skip', total_items);
    });
}); 
```

这将确保代码在 DOM 准备好之前不会执行，因此元素将存在并且可以绑定事件处理程序。

请注意，我做了一些调整：

1.  `href`从元素的属性中删除了分号`<a>`- 导致 JavaScript 语法错误
2.  使用`.data()`jQuery 函数而不是`.attr()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T09:29:30.360

代码工作正常。看到[这个](http://jsfiddle.net/PBt7f/1/)。第二个链接不起作用，因为您忘记了 jQuery 选择器中的点。所以你必须改变

```
$('.latestNewsWidgetMoreLink, latestNewsWidgetMoreButton') 
```

在

```
$('.latestNewsWidgetMoreLink, .latestNewsWidgetMoreButton') 
```

# java - 使用 telnet 测试服务器时的问题

> ID：14849899
> 
> 赞同：0
> 
> 时间：2013-02-13T09:07:29.700
> 
> 标签：java, telnet

我正在命令提示符下测试服务器是否正常工作，所以我使用了

远程登录主机端口

我将收到消息

```
220 Unauthorized use is prohibited 
```

光标只是空白

4-5分钟后

```
471 7.7.0 Timeout waiting for client input
connection to the host lost 
```

这是否意味着我没有访问权限或我有访问权限。基本上我正在尝试通过java程序从微软交换服务器读取电子邮件。如果我从 java 程序调试，我会收到下面的错误

```
Connection refused 
```

虽然我可以使用这两个语句发送邮件

```
props.put("mail.smtp.host", "host");
props.put("mail.from", "username@domain.co.uk"); 
```

它不要求端口或密码。

如果我这样做

```
props.setProperty("mail.imap.auth.disable","true");
Store store = session.getStore("imap");
store.connect(host,25,username, password);//password=windows password to login in 
```

调试后

```
EBUG: setDebug: JavaMail version 1.4.3
DEBUG: getProvider() returning  
javax.mail.Provider[STORE,imap,com.sun.mail.imap.IMAPStore,Sun Microsystems, Inc]
DEBUG: mail.imap.fetchsize: 16384
DEBUG: mail.imap.statuscachetimeout: 1000
DEBUG: mail.imap.appendbuffersize: -1
DEBUG: mail.imap.minidletime: 10
DEBUG: disable AUTH=PLAIN
DEBUG: trying to connect to host "host", port 25, isSSL false
220 Unauthorized use prohibited
javax.mail.MessagingException: 220 Unauthorized use prohibited;
nested exception is:

com.sun.mail.iap.ConnectionException: 220 Unauthorized use prohibited
at com.sun.mail.imap.IMAPStore.protocolConnect(IMAPStore.java:616)
at javax.mail.Service.connect(Service.java:291)
at TestMail.InboxReader.main(InboxReader.java:52)

Caused by: com.sun.mail.iap.ConnectionException: 220 Unauthorized use prohibited
at com.sun.mail.imap.protocol.IMAPProtocol.processGreeting(IMAPProtocol.java:230)
at com.sun.mail.iap.Protocol.<init>(Protocol.java:116)
at com.sun.mail.imap.protocol.IMAPProtocol.<init>(IMAPProtocol.java:104)
at com.sun.mail.imap.IMAPStore.protocolConnect(IMAPStore.java:585)
... 2 more
Java Result: 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:29:40.780

您从 telnet 收到的消息意味着您已成功连接到服务器，因此您的 IP 和端口是正确的，并且服务器已启动并正在运行。字符串`220 Unauthorized use is prohibited`并`471 7.7.0 Timeout waiting for client input`包含服务器发送给您的文本。字符串`connection to the host lost`是`telnet`关于服务器从其一侧关闭连接的事实的通知。

消息`Connection refused`表示主机已启动并正在运行，但主机上没有进程监听您指定的端口。这可能意味着您的主机名未指向运行服务器的主机，或者您的端口不正确。

# java - 如何进行简单的 log4j 配置？

> ID：14849904
> 
> 赞同：2
> 
> 时间：2013-02-13T09:07:39.523
> 
> 标签：java, tomcat, log4j

我想将文件记录到我的应用程序中。
我为此尝试了 Appach log4j。在 Java 代码中，我说：

```
 Logger log = Logger.getLogger(uploadfile.class);
        log.debug("Start"); 
```

我创建文件`src\log4j.properties`：

```
# ***** Set root logger level to DEBUG and its only appender to A.
log4j.rootLogger=DEBUG, R, A
log4j.rootLogger=INFO, A

log4j.appender.R=org.apache.log4j.RollingFileAppender
log4j.appender.R.MaxFileSize=100mb
log4j.appender.R.MaxBackupIndex=1000
log4j.appender.R.File=c:/uploaded_files/server.log
log4j.appender.R.layout=org.apache.log4j.PatternLayout
log4j.appender.R.layout.ConversionPattern=%d [%t] %-5p %c - %m%n

# ***** A is set to be a ConsoleAppender.
log4j.appender.A=org.apache.log4j.ConsoleAppender
# ***** A uses PatternLayout.
log4j.appender.A.Threshold=INFO
log4j.appender.A.layout=org.apache.log4j.PatternLayout
log4j.appender.A.layout.ConversionPattern=%d [%t] %-5p %c - %m%n

log4j.logger.org.hibernate.type.BasicTypeRegistry=INFO
log4j.logger.com.opensymphony.xwork2.config.providers.XmlConfigurationProvider=INFO 
```

[我在那里](https://stackoverflow.com/questions/7890983/simple-log4j-configuration-issue)复制这个。我得到错误：

```
 13.02.2013 9:03:34 org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [uploadfile] in context with path [/gis-mrsk-portlet] threw exception [Servlet execution threw an exception] with root cause
java.lang.NoClassDefFoundError: Could not initialize class org.apache.log4j.LogManager
at org.apache.log4j.Logger.getLogger(Logger.java:117)
at test.uploadfile.doPost(uploadfile.java:35) 
```

我做错了什么？以及如何简单地配置 log4j？

**更新**

如果我使用这个配置，我会得到日志文件，但它是空的：

```
Set root category priority to INFO and its only appender to CONSOLE.
log4j.rootCategory=INFO, CONSOLE, LOGFILE

Set the enterprise logger priority to FATAL
log4j.logger.org.apache.axis2.enterprise=FATAL
log4j.logger.de.hunsicker.jalopy.io=FATAL
log4j.logger.httpclient.wire.header=FATAL
log4j.logger.org.apache.commons.httpclient=FATAL

 CONSOLE is set to be a ConsoleAppender using a PatternLayout.
log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender
log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout
log4j.appender.CONSOLE.layout.ConversionPattern=[%p] %m%n

 LOGFILE is set to be a File appender using a PatternLayout.
log4j.appender.LOGFILE=org.apache.log4j.FileAppender
log4j.appender.LOGFILE.File=C:/uploaded_files/LogFile.log
log4j.appender.LOGFILE.Append=true
log4j.appender.LOGFILE.layout=org.apache.log4j.PatternLayout
log4j.appender.LOGFILE.layout.ConversionPattern=%d [%t] %-5p %c %x - %m%n 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:14:47.207

似乎正确..您是否正确设置了路径中的 log4j Lib？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T09:19:49.320

问题不在于您的配置，问题在于**不存在 log4j 对 catalina**的支持，让它协同工作并不容易。要使 log4j 与 catalina 一起工作，请遵循[http://tomcat.apache.org/tomcat-6.0-doc/logging.html#Using_Log4j](http://tomcat.apache.org/tomcat-6.0-doc/logging.html#Using_Log4j)上的文档。

*编辑*

总结我给出的链接：

1.  [...] 将 log4j.jar 和 log4j.properties 放入 Web 应用程序的 WEB-INF/lib 和 WEB-INF/classes 中。

2.  下载或构建可用作 Tomcat 的“附加”组件的 tomcat-juli.jar 和 tomcat-juli-adapters.jar。有关详细信息，请参阅附加组件文档。[http://tomcat.apache.org/tomcat-6.0-doc/extras.html](http://tomcat.apache.org/tomcat-6.0-doc/extras.html)

遵循这些步骤后，您的示例应该已经可以工作了。

*/编辑*

如果您想要简单的日志记录部分，我建议您使用 logback，它带有对基于 tomcat 的应用程序的本机 servlet 支持。如果您想在日志记录方面更进一步：clusterlog.net（完全披露我拥有该公司的一部分）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T09:11:49.293

`java.lang.NoClassDefFoundError`

看起来您的 Apache 不知道`org.apache.log4j.LogManager`. 你把所需的 jar 放在 Apache 中了`classpath`吗？

# jquery - jQuery：宽度和高度属性值 加载标签

> ID：14849905
> 
> 赞同：1
> 
> 时间：2013-02-13T09:07:39.770
> 
> 标签：jquery, html

我有一个嵌入标签。

```
<embed id="embed1" src="test.mp4" width="320" height="260" ></embed> 
```

如何`<embed>`使用 JavaScript / jQuery 在加载时更改标签的宽度和高度属性？我知道如何通过以下脚本设置属性值：

```
$(document).ready(function() {
  $('#embed1').attr('width', '320');
}); 
```

我可以将宽度设置为 100%，但高度属性的值是多少？

```
<embed id="embed1" src="test.mp4" width="100%" height="?" ></embed> 
```

我希望我可以省略 height 属性，或者将其设置为 auto 。

**注意**：鉴于我不能使用 HTML5`<video>`标签，因为我必须向后支持旧版浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:08:55.107

使用[width()](http://api.jquery.com/width/)和[height()](http://api.jquery.com/height/)函数而不是使用[attr()](http://api.jquery.com/attr/)来设置宽度和高度。

```
$(document).ready(function() {
  embed1 = $('#embed1');
  embed1.width(320);
  embed1.height(embed1.width(320));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:19:16.587

鉴于您想保持纵横比，不是这样：

```
var embed = $('#embed1');
var ar = embed.width()/embed.height(); 
embed.attr('width', '100%'); 
embed.attr('height', embed.width()/ar); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T09:25:09.787

应该是这样的：

```
$("#embed1").css({ 'width' : '320' }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T09:10:06.553

你*可以*省略高度属性，像这样......

```
$(document).ready(function() {
    $('#embed1').attr('width', '320').removeAttr("height");
}); 
```

我不知道那会是什么结果，但至少你现在知道你可以做到:)

# html - 如何将 div 内的文本居中，左右两边的空间相同？

> ID：14849906
> 
> 赞同：0
> 
> 时间：2013-02-13T09:07:43.757
> 
> 标签：html, css

我在标题内的 DIV 中有一个 H1 元素：

```
<header class="container_12">
   <div class="grid_3">
       <h1><b>xx</b></h1>
   </div>
</header> 
```

和以下CSS：

```
.container_12 .grid_3 {
    width: 23%;
}
.grid_1, .grid_2, .grid_3, .grid_4, .grid_5, .grid_6, .grid_7, .grid_8, .grid_9, .grid_10, .grid_11, .grid_12 {
    display: inline;
    float: left;
    margin-left: 0.99%;
    margin-right: 0.99%;
}
header h1 {
    margin:0 auto; 
text-align:center;
    display: inline;
    line-height: 77px;
    color: #ddd;
    font-size: 4em;
    font-family: "Segoe UI Web Light", "Segoe UI Light", "Segoe UI Web Regular", "Segoe UI", "Segoe UI Symbol", "Helvetica Neue", Arial;
} 
```

我正在寻找一些建议。我想将“xx”文本放置在 grid_3 的中间，与“xx”的左右两侧有相同的空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:08:57.790

你需要：

```
text-align:center; 
```

应该做的伎俩，应用于h1。

这是一个小提琴：

[http://jsfiddle.net/qGaCY/1/](http://jsfiddle.net/qGaCY/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T09:16:56.017

你可以这样做：

1.  `text-align: center;`

[https://developer.mozilla.org/en-US/docs/CSS/text-align](https://developer.mozilla.org/en-US/docs/CSS/text-align)

1.  `margin: 0 auto;`

[https://developer.mozilla.org/en-US/docs/CSS/margin](https://developer.mozilla.org/en-US/docs/CSS/margin)

```
 .container_12 .grid_3 {
    width: 23%;
 }

 .container_12 > .grid_3 > h1 {
    text-align: center
 } 
```

您当前示例的 jsfiddle：http: [//jsfiddle.net/bxG27/](http://jsfiddle.net/bxG27/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T09:12:00.597

```
.grid_3 {
    text-align: center;
} 
```

**注意**：`<b>..</b>`在 HTML5 中已弃用。改为使用`<strong>..</strong>`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T09:16:39.887

```
h1 {
    text-align:center;
    line-height: 77px;
    color: #ddd;
    font-size: 4em;
    font-family: "Segoe UI Web Light", "Segoe UI Light", "Segoe UI Web Regular", "Segoe UI", "Segoe UI Symbol", "Helvetica Neue", Arial;
} 
```

[JSFiddle](http://jsfiddle.net/cKMzj/). I've given the heading a dark background so you can easily see that the text is centrally aligned. As I mentioned in my comment on your post, `display:inline;` on your h1 is what's causing it to fail for you, as widths are not applied to inline elements.

# php - 跨域 Ajax，相同的服务器但不同的端口？

> ID：14849910
> 
> 赞同：0
> 
> 时间：2013-02-13T09:07:58.780
> 
> 标签：php, javascript, ajax, solr, cross-domain

我是 AJAX 新手，正在努力学习。我已经设置了一个在端口 8983 上运行的 Java servlet，它在查询时从数据库返回 XML 搜索结果。我还在端口 80 上运行 wamp 服务器，并试图让这些搜索结果显示在页面上。我假设我遇到了这个跨域 ajax 调用问题，即使它是同一个主机，因为我在 2 个单独的端口上运行这些服务？

我听说解决方案是使用 jsonp 将 servlet 的响应包装在一个函数中。问题是，我不认为我能做到这一点，因为这个 servlet 是 Apache Solr，我刚刚对其进行了配置，并且正在开箱即用地运行它。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:22:51.327

您可以根据[http://xplus3.net/2010/09/21/solr-and-jsonp/让 SOLR 接受 JSONP 请求](http://xplus3.net/2010/09/21/solr-and-jsonp/)

# mysql - MySQL 中 UNIX_TIMESTAMP 和 NOW() 的区别

> ID：14849911
> 
> 赞同：9
> 
> 时间：2013-02-13T09:08:07.133
> 
> 标签：mysql, date, unix-timestamp

我有一个用户可以发表评论的博客。我插入他们发表评论的时间`NOW()`，然后使用`date('j M Y', stored timestamp)`来显示他们发表评论的时间。

我想知道 NOW() 是否返回`locatime of the end user or the localtime at my server`. `UNIX_TIMESTAMP`它是否比`NOW()`计算用户发表评论的本地时间更适合使用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T09:12:41.330

该函数`NOW()`生成一个格式化的日期时间字符串，由 MySQL 服务器的时区决定。

但是，最好使用`UNIX_TIMESTAMP()`GMT 来存储时间。这样做可以更轻松地根据访问者所在的国家/地区对其进行格式化（例如，使用 JavaScript）。

如果您仍想使用`DATETIME`列，则可以使用存储时间`UTC_TIMESTAMP()`（它格式化日期，`NOW()`但以 UTC 表示）；它应该在所有其他方面或多或少地工作相同。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-13T10:31:29.807

`UNIX_TIMESTAMP()`如果没有传递参数，MySQL会返回自 '1970-01-01 00:00:00' UTC 以来的 Unix 时间戳（以秒为单位）作为无符号整数`UNIT_TIMESTAMP().`

当此函数与日期参数一起使用时，它将参数的值作为自 '1970-01-01 00:00:00' UTC 以来的秒数返回为无符号整数。

参数可以是 DATE、DATETIME、TIMESTAMP 或 YYYYMMDD 或 YYMMDD 中的数字。

注意：由于`UNIX_TIMESTAMP()`适用于当前日期时间，因此您的输出可能与显示的输出不同。

`NOW()`返回当前日期和时间。

```
SELECT NOW(), UNIX_TIMESTAMP(NOW());
+---------------------+-----------------------+
| NOW()               | UNIX_TIMESTAMP(NOW()) |
+---------------------+-----------------------+
| 2011-10-03 10:22:37 |            1317666157 |
+---------------------+-----------------------+ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-13T09:36:29.343

让我们看看手册对[NOW()](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_now)有什么看法：

> 返回当前**日期和时间**作为 'YYYY-MM-DD HH:MM:SS' 或 YYYYMMDDHHMMSS.uuuuuu 格式的值，具体取决于函数是在字符串还是数字上下文中使用。**该值以当前时区表示**。

...和[​​UNIX_TIMESTAMP()](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)：

> 如果不带参数调用，则**返回 Unix 时间戳**（自 '1970-01-01 00:00:00' UTC 以来的秒数）作为无符号整数。如果使用日期参数调用 UNIX_TIMESTAMP()，它会返回参数的值作为自 '1970-01-01 00:00:00' UTC 以来的秒数。date 可以是 DATE 字符串、DATETIME 字符串、TIMESTAMP 或格式为 YYMMDD 或 YYYYMMDD 的数字。**服务器将日期解释为当前时区的值，并将其转换为 UTC 的内部值。**

因此，首先，它们返回不同的东西：正确的日期与整数。

您实际上需要获得三个功能：

1.  以相同的格式存储所有日期（UTC 或服务器的时区）
2.  获取用户的时区
3.  在用户的时区显示存储的日期

[日期和时间函数](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)一章提供了可用函数的摘要。如果你想以 UTC 存储日期，你会去[UTC_TIMESTAMP()](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_utc-timestamp)。如果你想使用服务器的时区，你可以使用[NOW()](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_now)。并且有[CONVERT_TZ()](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_convert-tz)进行转换。

然而，MySQL 不会帮助您解决第 2 点。您需要询问用户或使用 JavaScript 读取用户的时钟并将其发送到服务器以便您猜测（如果您不询问，您将始终需要猜测，因为通常有几个时区共享相同给定瞬间的时间）。

# java - Android 正则表达式从站点中获取图像 url

> ID：14849912
> 
> 赞同：1
> 
> 时间：2013-02-13T09:08:08.130
> 
> 标签：java, android, regex, pattern-matching, expression

我正在制作一个应用程序，但我遇到了这个问题，我使用模式识别代码在网站上查找文章的图像 url。

问题是它以我的方式抓取了第一张超小的照片。

模式 p = Pattern.compile(" [http://planetaris.gr/media/k2/items/cache](http://planetaris.gr/media/k2/items/cache) .*\.jpg"); 有一张 XL 图像，我想抓取它的目的地。

我想使用一个在链接末尾的模式是这样的

模式 p = Pattern.compile("( [http://planetaris.gr/media/k2/items/cache.)+](http://planetaris.gr/media/k2/items/cache.)+) (.*\[_XL]+(.jpg))");

或 Pattern p = Pattern.compile(" [http://planetaris.gr/media/k2/items/cache](http://planetaris.gr/media/k2/items/cache) .*\_XL.jpg");

这是我需要你帮助的地方 这是代码

公共无效运行（）{

```
 //Pattern p = Pattern.compile("http://planetaris.gr/media/k2/items/cache.*\\.jpg");
        //Pattern p = Pattern.compile("http://planetaris.gr/media/k2/items/cache.*\\._XL.jpg");
        Pattern p = Pattern.compile("(http://planetaris.gr/media/k2/items/cache.)+(.*\\[_XL]+(.jpg))");

        try {
                    URL url = new URL(selectedRssItem.getLink());

                    URLConnection urlc = url.openConnection();
                    Log.d("MIMIS_LINK", url.toString());
                    BufferedInputStream buffer = new BufferedInputStream(urlc.getInputStream());

                    builder = new StringBuilder();
                    int byteRead;
                    while ((byteRead = buffer.read()) != -1)
                        builder.append((char) byteRead);

                    buffer.close();

                } catch (MalformedURLException ex) {
                    ex.printStackTrace();
                } catch (IOException ex) {
                    ex.printStackTrace();
                }

                Matcher m = p.matcher(builder.toString());

                if (m.find()) {

                try {
                    bitmap = BitmapFactory.decodeStream((InputStream)new URL(m.group(0)).getContent());
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                    Log.d("MIMIS_MATCHER", selectedRssItem.getDescription().toString());
                 };

        handler.sendEmptyMessage(0);

    }
    }.start();
    }

private Handler handler = new Handler() {

    //@SuppressWarnings("null")
    @Override
    public void handleMessage(Message msg) {

        mSpinner.clearAnimation();
        mSpinner.setVisibility(View.GONE);
            //progressDialog.dismiss();
        myimageview.setImageBitmap(bitmap);

        if (bitmap==null){

            myimageview.setImageResource(R.drawable.aris_no_image);

        };
        }       
        }; 
```

因为在网站上还有一个 jpg 有这个 XL

这些都是给定页面的 .jpg 文件。

href="/media/k2/items/cache/df95c3d9029788dcdb6f520e9151056c_XL.jpg"

/media/k2/items/cache/df95c3d9029788dcdb6f520e9151056c_L.jpg"

“/图像/故事/atnea2.jpg”

/图像/故事/diarkeias-bc.jpg"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:35:27.850

```
String url = "http://planetaris.gr/media/k2/items/cache.sample_XL.jpg";
String regex = "[0-9a-zA-Z\\-\\._/:]*[XL]\\.jpg$";
System.out.println(url.matches(regex)); //this will be print true if case matches files ends with *XL.jpg and *X.jpg and *L.jpg. 
```

您只想检查以 '.jpg' 结尾的字符串，使用正则表达式

**字符串正则表达式 = "[\\x20-\\x7E]*\\.jpg$";**

如果你想找到以 *XL.jpg 结尾的文件的完全匹配

字符串 url = " [http://planetaris.gr/media/k2/items/cache.sample_XL.jpg](http://planetaris.gr/media/k2/items/cache.sample_XL.jpg) ";
**字符串正则表达式 = "[0-9a-zA-Z\\-\\._/:]*XL\\.jpg$";**
System.out.println(url.matches(regex)); //如果大小写匹配，这将打印为true

**如果您的 URL 字符串中有任何空格或特殊字符以及 0-9a-zA-Z 字符，请使用正则表达式。（这将返回 true 任何以 *XL.jpg 结尾的字符串）**
String url = " [http://planetaris .gr/media/k2/items](http://planetaris.gr/media/k2/items) %!@#$%/cache.sample_ssXL.jpg";
**字符串正则表达式 = "[\\x20-\\x7E]*XL\\.jpg$";**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:39:08.453

这个正则表达式：`/(media|images)/[^\.]*\.jpg`

匹配您的所有样本：

href="/media/k2/items/cache/df95c3d9029788dcdb6f520e9151056c_XL.jpg" /media/k2/items/cache/df95c3d9029788dcdb6f520e9151056c_L.jpg" "/images/stories/atnea2.jpg" /images/stories/diarkeias-bc.jpg"

# java - java tcp 服务器到许多连接

> ID：14849913
> 
> 赞同：0
> 
> 时间：2013-02-13T09:08:09.103
> 
> 标签：java, multithreading, tcp, handler

我编写了一个简单的 TCP 服务器来将一些用户数据传输给它，并将其保存在一个简单的 MySQL 表中。如果我现在一个接一个地运行超过 2000 个客户端，它就会停止工作。在跑步时我会得到一些`IO error java.io.EOFException`你可能还会看到我为此犯的错误。但最重要的是我明白了

```
 IO error java.net.SocketException: Connection reset
    Exception in thread "main" java.lang.OutOfMemoryError: unable to create new native thread
    at java.lang.Thread.start0(Native Method)
    at java.lang.Thread.start(Unknown Source)
    at Server.main(Server.java:49) 
```

应该有足够的内存，但线程仍在运行，我看不出我在哪里犯了错误，他们没有被终止。所以我运行了多达 3900 个线程。所以这里是服务器的一部分：

```
try {
    // create new socket
    ServerSocket sock = new ServerSocket(port);
    textArea.setText(textArea.getText() + "Server started\n");
    while (true) {
        // accept the connection
            Socket newsock = sock.accept();
        // handle the action
        Thread t = new ThreadHandler(newsock);
            newsock.setSoTimeout(2000); // adding client timeout
        t.start();
        }
    } catch (Exception e) { 
```

猜的真简单。这是我处理套接字的方式：

```
class ThreadHandler extends Thread {
    private Socket socket;
    private MySQLConnection sqlConnection;

    ThreadHandler(Socket s) {
        socket = s;
        sqlConnection = new MySQLConnection();
    }

    public void run() {
        try {
            DataOutputStream out = new DataOutputStream(
                    socket.getOutputStream());
            DataInputStream in = new DataInputStream(new BufferedInputStream(
                    socket.getInputStream()));
            Server.textArea.append((new Date()) + "\nClient connected IP: " + socket.getInetAddress().toString()+"\n");

            int firstLine = in.readInt(); // get first line for switch

            switch (firstLine) {
            case 0:
                // getting the whole objekt for the database in own lines!
                String name2 = in.readUTF();
                int level2 = in.readInt();
                int kp2 = in.readInt();
                String skill = in.readUTF();

                LeadboardElement element2 = new LeadboardElement();
                element2.setName(name2);
                element2.setLevel(level2);
                element2.setKillPoints(kp2);
                element2.setSkill(skill);
                sqlConnection.saveChaToLeadboard(element2);
                break;
                //case 1 return the top10
###.... shorten here the rest of the cases
                out.close();
            in.close();
            //close this socket
            socket.close();
                    Server.textArea.append("Client disconnected IP: " + socket.getInetAddress().toString()+ "\n" + (new Date())
                            + "\n----------------------------------------------------\n");
            // autoscrolldown
            Server.textArea.setCaretPosition(Server.textArea.getDocument()
                    .getLength());
         } catch (Exception e) {
            System.out.println("IO error " + e);
            try {
                socket.close();
            } catch (IOException e1) {
                e1.printStackTrace();
            }
        }finally{
        try {
            socket.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

`saveChaToLeadboard`只需获取名称级别 kp 和技能并使用 a将其`preparedStatement`保存到我的 MySQL 表中。我希望你能帮助我，我只是没有看到它的错误。我想我需要在某个地方加入它，但如果我在它的末尾加入一个连接（在 socket.close() 之后），它仍然会做同样的事情。

这里保存到数据库方法：

```
public void saveChaToLeadboard(LeadboardElement element) {
        try {
            // load driver
            Class.forName("com.mysql.jdbc.Driver");
            connection = DriverManager.getConnection(this.databaseURL
                    + DATABASE_NAME, this.user, this.password);
            // insert values into the prep statement
            preparedStatement = connection
                    .prepareStatement(PREP_INSERT_STATEMENT);
            preparedStatement.setString(1, element.getName());
            preparedStatement.setInt(2, element.getLevel());
            preparedStatement.setInt(3, element.getKillPoints());
            if(!element.getSkill().equalsIgnoreCase("")){
                preparedStatement.setString(4, element.getSkill());
            }else{
                preparedStatement.setString(4, null);
            }
            // execute
            preparedStatement.executeUpdate();
            connection.close();

        } catch (Exception e) {
            Server.textArea.append(e.getMessage() + "\n");
            Server.textArea.setCaretPosition(Server.textArea.getDocument()
                    .getLength());
            try {
                connection.close();
            } catch (SQLException e1) {
                e1.printStackTrace();
            }
        } 
```

非常感谢！问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T09:49:15.533

你的`run()`方法被破坏了，但我怀疑部分问题是你并不总是关闭网络套接字和流。特别是，如果在读取或处理您读取的数据时出现异常，我怀疑您没有关闭它们。`finally`您应该始终在一个块（或 Java 7 等效项）中关闭套接字和流。

另一个潜在的问题是，由于另一端没有发送数据，一些连接可能会停止。为了解决这个问题，您需要在套接字上设置读取超时......以便可以关闭与慢速/卡住客户端的连接。

最后，甚至尝试使用每个连接的线程并行处理 2000 多个连接可能是不现实的。这是很多资源¹。我建议你使用一个固定上限在几百以下的线程池，如果所有线程都在使用中，则停止接受新连接。

* * *

^(1 - 每个线程堆栈在 HotSpot JVM 上占用至少 64K 的内存，并且可能多达 1Mb。然后是线程直接或间接引用的堆资源，以及维护线程和套接字状态所需的操作系统资源。对于 2000 个线程，这可能是多个 Gb 的内存。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:31:25.713

恕我直言，2000 个线程对于单个进程来说偏高，而 2000 个数据库连接肯定是。

无论您是否达到 2000 个传入连接的限制，您的方法都无法扩展。

为了实现可扩展性，您需要考虑使用资源池 - 这意味着：

*   从套接字中读取数据的读取器线程池，将数据排队等待处理。
*   一个工作线程池，处理由读取器线程排队的数据。
*   工作线程使用的数据库连接池 - 可以调整此连接池，以便每个工作线程都有自己的连接，但重要的是您不要不断打开和关闭数据库连接。

查看线程池的[并发 API和 IO 的](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html)[NIO API](http://docs.oracle.com/javase/6/docs/api/java/nio/package-summary.html)。

这种安排将允许您调整服务器以实现所需的吞吐量。

# php - 正则表达式将字符串用引号括起来

> ID：14849918
> 
> 赞同：0
> 
> 时间：2013-02-13T09:08:24.470
> 
> 标签：php, regex, preg-replace

我有一个类似于下面示例的数组，但要大得多（4000 行长）：

```
array(
   "id" => array(
        "a" => "", 
        "b" => "", 
        "c" => Needs Quotes Around Me
), "id" => array(
        "a" => "", 
        "b" => "", 
        "c" => Needs Quotes Around Me
        "d" => Needs Quotes Around Me
)
); 
```

出于某种原因，字符串值没有引号 ("") 和冒号分隔符。有些字符串是数字，但可以被视为字符串，有些有空格和@符号，因为有些是电子邮件地址，但我需要将它们全部包装起来`"STRING HERE",`

我试图将 reg_replace 与这样的东西一起使用，`=>\s([a-zA-Z0-9\@\s])+$`但它不会用它找到的字符串替换匹配的字符串？我已经做了很多谷歌搜索，但似乎无法正确，请告诉我我哪里出错了。

我最终得到的是：

```
array(
       "id" => array(
            "a" => "", 
            "b" => "", 
            "c" => "[a-zA-Z0-9\@\s]",
    ), "id" => array(
            "a" => "", 
            "b" => "", 
            "c" => "[a-zA-Z0-9\@\s]",
            "d" => "[a-zA-Z0-9\@\s]",
    )
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:03:26.167

此 perl 脚本适用于给出的示例

```
perl -pe 's/(?<==> )(?!"|array\()(.*)/"$1",/' EXAMPLEFILE.txt 
```

产生以下输出：

```
array(
   "id" => array(
        "a" => "", 
        "b" => "", 
        "c" => "Needs Quotes Around Me",
), "id" => array(
        "a" => "", 
        "b" => "", 
        "c" => "Needs Quotes Around Me",
        "d" => "Needs Quotes Around Me",
)
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:50:44.583

它需要在正则表达式周围放置圆括号。听起来很简单，只有当您知道如何操作时才容易。

# php - 动态创建 div 时如何显示/隐藏 div

> ID：14849921
> 
> 赞同：1
> 
> 时间：2013-02-13T09:08:37.147
> 
> 标签：php, javascript, jquery, joomla

我正在开发对评论进行两级重播的评论系统，我对如何显示和隐藏 div 有疑问..，因为它的 id 不同..，我尝试了以下方法：

```
<button>replayl</button>

<span style="display:none;">
   <form action='' method='post' name="addcmt" onsubmit="return validate()">
        <textarea rows="1" cols="60" name='textarea1' id='textarea1' onKeyDown="limitText(this.form.textarea1,this.form.countdown,300);" 
                                  onKeyUp="limitText(this.form.textarea1,this.form.countdown,300);">
       </textarea>
       <br>
       <br>
       <input type="hidden" name="level1" id="level1" value="commtlevel1" />
       <input id='addcmt' type='submit' value='Add reply' name='submit'/> 
   </form>
</span> 
```

和jQuery：

```
 <script>
     $("button").click(function () {
        $("span").show();                 
     });
</script> 
```

但是这样，当我单击回复按钮时，它会显示所有跨度标签内容..，我想知道如何仅显示一个标签或完成工作的一种方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:10:53.043

由于您的 HTML 中没有按钮，因此部分原因是猜测。但是以下代码将在您的按钮之后立即切换跨度的可见性：

```
 $(document.body).on("click", "button", function () {
      $(this).next("span").toggle();
 }); 
```

请注意，您最好定义一些类以使选择器更具选择性：

```
 $(document.body).on("click", "button.toggler", function () {
      $(this).next("span").toggle();
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T09:29:52.793

编辑问题后，我建议您使用 `div`而不是`span`（因为显示内联与块）。

```
$("button").click(function () {
    $(".myform").toggle('slow');
}); 
```

会做你想做的工作。这是[结果](http://jsfiddle.net/ptDVD/)。

# android - 谷歌地图 v2 获取片段实例

> ID：14849922
> 
> 赞同：0
> 
> 时间：2013-02-13T09:08:37.970
> 
> 标签：android, google-maps, android-fragments, android-nested-fragment

我正在尝试制作标签中的地图。我添加了支持库，以便从 2.2 android 版本开始支持 Google 地图。主要问题是我的选项卡是片段并且不支持嵌套片段我创建了两个 xml 文件：
1）具有相对布局，并且在选项卡中调用 onCreateView() 方法时膨胀
2）第二个 xml 文件保存片段，它是支持MapFragment

第二个 xml 文件被膨胀并添加到第一个 xml 文件相对布局。显示了地图，但我无法获取片段的实例。有没有办法在视图中从片段中获取实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:39:30.023

[自 API 级别 4.2 和支持库 11 起支持](http://developer.android.com/about/versions/android-4.2.html#NestedFragments)嵌套片段。它们应该是动态添加的，并且可以通过 getChildFragmentManager() 访问。

# http - 代理授权失败的 HTTP 响应码

> ID：14849923
> 
> 赞同：4
> 
> 时间：2013-02-13T09:08:42.607
> 
> 标签：http, http-status-codes, http-status-code-401, http-status-code-407

代理授权失败的 HTTP 响应代码应该是什么？我知道 407 是请求代理授权的响应代码。但是，一旦客户端将身份验证信息发送给代理，如果不正确，代理应该返回什么？如果它返回 401 响应代码，那么客户端如何识别它是代理上的身份验证失败而不是最终资源上的身份验证失败？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T11:45:10.040

好吧，如果 401 保护资源的授权失败，服务器会简单地响应另一个 401：

```
Request URL:https://mysite.com/myresource/
Request Method:GET
Status Code:401 Authorization Required

Request Headers

Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Authorization:Digest username="gjggj", realm="apps", nonce="75602afa895d26f9796f3c9174cf83f3", uri="/misc/apps/", algorithm=MD5, response="9e113b10d3e95b590bdef0fc7c7c617b", qop=auth, nc=00000001, cnonce="61f73b73f6b33ea2"
Cache-Control:max-age=0
Connection:keep-alive
Host:game-point.net
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17

Response Headers

Cache-Control:no-cache
Connection:close
Content-Length:534
Content-Type:text/html
Date:Wed, 13 Feb 2013 11:07:26 GMT
Pragma:no-cache
Server:Cherokee/1.0.8 (Debian GNU/Linux)
WWW-Authenticate:Digest realm="apps", nonce="75602afa895d26f9796f3c9174cf83f3", qop="auth", algorithm="MD5" 
```

所以我想说处理 407 授权失败的方法是让服务器响应 407 状态码，尽管浏览器已经发送了授权信息；这表明代理仍然需要授权，并暗示授权失败仅仅是因为您仍然获得 407 状态代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-29T09:41:53.807

来自官方机构：

[http://www.ietf.org/rfc/rfc2617.txt](http://www.ietf.org/rfc/rfc2617.txt)

```
If the origin server does not wish to accept the credentials sent
with a request, it SHOULD return a 401 (Unauthorized) response. The
response MUST include a WWW-Authenticate header field containing at
least one (possibly new) challenge applicable to the requested
resource. If a proxy does not accept the credentials sent with a
request, it SHOULD return a 407 (Proxy Authentication Required). The
response MUST include a Proxy-Authenticate header field containing a
(possibly new) challenge applicable to the proxy for the requested
resource. 
```

# java - Java 应用程序中的 SOAPUI 测试中的挂起线程

> ID：14849929
> 
> 赞同：2
> 
> 时间：2013-02-13T09:08:58.253
> 
> 标签：java, soapui

我正在尝试通过 Java 应用程序而不是在 UI 上执行我的 SOAPUI 测试套件。但是，当创建一个 WSDLProject 时，一个线程正在启​​动并且永远不会被杀死，所以当我的代码被执行并且所有的测试都运行时，应用程序并没有结束，因为这个线程仍然在那里。

它看起来像一个 AWT 守护线程

在 Eclipse 调试器中：

```
Daemon Thread [AWT-Windows] (Running) 
```

这是我的代码：

```
WsdlProject projectName = String.format(
    "src/main/resources/%s-soapui-project.xml", projectName);
WsdlProject project = new WsdlProject(projectName); //This line starts the thread

List<TestSuite> testSuites = project.getTestSuiteList();

//Loop over each testsuite
    //Loop over each test case 
```

有谁知道如何杀死这个线程？

我搜索并搜索了 SOAPUI API，但文档很糟糕，我找不到任何体面的例子来说明如何解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-06T14:01:14.767

For the past two days I have been struggling with the same problem. I have a solution which may help. The reason your does not end is not the AWT-Windows thread. The culprit is the thread labeled "Thread-2" which is of type **SoapUIMultiThreadedHttpConnectionManager.IdleConnectionMonitorThread**

Unfortunately this thread which is created when you instantiate **WsdlProject**, has no directly accessible shutdown method. This is what I had to do in-order to shut it down and have the JVM exit when my main routine exits:

Have your main method or some other method execute the following at the end:

```
// Need to shutdown all the threads invoked by each SoapUI TestSuite
SoapUI.getThreadPool().shutdown();
try {
        SoapUI.getThreadPool().awaitTermination(1, TimeUnit.SECONDS);
} catch (InterruptedException e) {
        e.printStackTrace();
}

// Now to shutdown the monitor thread setup by SoapUI
Thread[] tarray = new Thread[Thread.activeCount()];
Thread.enumerate(tarray);
for (Thread t : tarray) {
        if (t instanceof SoapUIMultiThreadedHttpConnectionManager.IdleConnectionMonitorThread) {
                ((SoapUIMultiThreadedHttpConnectionManager.IdleConnectionMonitorThread) t)
                .shutdown();
        }
}

// Finally Shutdown SoapUI itself.
SoapUI.shutdown(); 
```

Although ugly, I hope this solution helps you.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:30:48.300

我已经用以下解决方案解决了这个问题。这并不理想，但我找不到解决方法，而且 SOAP UI 文档非常痛苦。

首先，我将每个测试步骤的结果保存到一个 xml 文件中。

接下来，一旦测试运行我退出：

```
System.exit(runner.getOverallResult() ? 0 : 1); 
```

最后，另一个应用程序通过命令行 .sh 脚本执行此操作。执行后，其他应用程序读取 XML 文件以确定结果。

# javascript - 在highcharts中以百分比设置列宽

> ID：14849930
> 
> 赞同：2
> 
> 时间：2013-02-13T09:09:01.167
> 
> 标签：javascript, highcharts

如何在highcharts中以百分比设置列宽

```
options = {
        chart: {
            renderTo: 'container',
            type: 'column'
        },
        title: {
            text: 'Data extracted from a HTML table in the page'
        },
        xAxis: {
        },
        yAxis: {
            title: {
                text: 'Units'
            }
        },
        tooltip: {
            formatter: function() {
                return '<b>'+ this.series.name +'</b><br/>'+
                    this.y +' '+ this.x.toLowerCase()+''+this.percentage;
            }
        },
         plotOptions: {
            column: {
                pointWidth: 50
            }

        }
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:16:06.527

不幸的是，不支持百分比点宽度。

# php - 为什么变量检查似乎可以纠正我的排序？

> ID：14849934
> 
> 赞同：0
> 
> 时间：2013-02-13T09:09:23.080
> 
> 标签：php, sorting

## 简而言之

为什么返回错误数组排序的函数会在我调用`print_r()`或`var_dump()`排序之前的数组时返回预期的排序？

## 细节

我正在尝试打印从几个谷歌日历收集的接下来几个事件的基本信息，这些信息`uasort()`根据事件开始日期/时间按自定义排序。

```
function getUpcomingEvents() 
{
    $calUrls = array( /* Four Google calendar URLs */);

    foreach ($calUrls as $url)
    {
        $calEvents = json_decode(file_get_contents($url), true);

        for($i=0; $i<count($calEvents['items']); $i++)
        {
            $item = $calEvents['items'][$i];

            $events[] = array(
                'title' => $item['summary'],
                'description' => $item['description'],
                'start' => date_create($item['start']['dateTime']),
                'end' =>  date_create($item['end']['dateTime']),
                'htmlLink' => $item['htmlLink']
            );
        }
    }   

    //print_r($events);  // <-- **LOOK AT ME**

    uasort($events, function($a, $b) {
        return strtotime($a['start']->date) - strtotime($b['start']->date);
    });

    return $events;
} 

...*snip*...

<?php foreach(getUpcomingEvents() as $event) : ?>
    <li><h3><?php echo date_format($event['start'], 'M j'); ?></li>
<?php endforeach; ?> 
```

当我加载以这种方式注释掉 print_r() 的页面时，我的列表项按以下顺序打印：

`Feb 19, Feb 21, Feb 23, Feb 26, Mar 5, Feb 19, Feb 16,...`
（注意：这些分别代表日历 1、2、1、1、1、2、2、...中的事件，因此它并不能简单地反映日历请求的顺序。）

取消注释后`print_r()`（没有其他更改），列表项按时间顺序打印：

`Feb 10, Feb 14, Feb 16, Feb 16, Feb 16, Feb 19, Feb 19,...`
（注意：这些是打印出来`<li>'s`的，而不是本身的输出，`print_r()`没有排序）。

**我已经尝试过：**
* 在`global $events;`上面声明`getUpcomingEvents()`，以防它是一个变量范围问题
* 使用`usort`而不是`uasort`，以及单独的比较函数声明而不是匿名的
* 构建`$events`为显式索引数组 ( `$events[$i] = ...`) 而不是使用`[]`运算符，以防万一有助于保持更稳定的数组顺序
* 在将`getUpcomingEvents()`新变量传递给`foreach`

变量检查真的会影响我的排序还是我在其他地方出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:14:17.173

No, print_r does not affect your array. It just shows you the information of the variable.

From [PHP page](http://php.net/print_r)

```
print_r — Prints human-readable information about a variable 
```

# php - 在 Javascript 代码中使用 PHP 代码

> ID：14849935
> 
> 赞同：2
> 
> 时间：2013-02-13T09:09:27.863
> 
> 标签：php, javascript

由于我知道很多人认为在 Javascript 代码中使用 PHP 代码是不好的做法，我想知道如果某个 PHP 变量具有某个值，如何执行 javascript 函数。

这是我目前编写代码的方式：

```
<script type="text/javascript">
function execute_this() {
some code;
}
<?php
if(!empty($_SESSION['authorized'])) :
?>
execute_this();
<?php
endif;
?>
</script> 
```

在这个特定示例中如何避免在 Javascript 中使用 PHP 的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:14:25.893

If you don't want to include any PHP code inside the javascript code but want to know the value of a php variable, you have to integrate a communication between the server side (PHP) and the client (JS)

For example you could use a ajax request to call a small php snippet that provides the value in its reply. With that value you can go on in you java script code.

In my opinion you should decide if its worth the effort.

Edit:

In regard to the edited question: If it is important that the JS function is never ever called if the PHP session value isn't present I would stay with the PHP code but would do it that way:

```
<?php
if(!empty($_SESSION['authorized'])) :
?>
<script type="text/javascript">
function execute_this() {
some code;
}

execute_this();
</script>
<?php
endif;
?> 
```

If you evaluate the value of the session variable in javascript, you have to make sure that nothing bad happens to your code if the provided value was manipulated.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T09:15:28.443

You have to store the php variables somewhere in the html code and then access it. For example:

```
<input type="hidden" id="hidval" value=<?php echo $_SESSION['authorized'] ?>/> 
```

then in your js:

```
var somevar=document.getElementById(hidval).value;
if(somevar==what you want){
  execute_this();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T09:21:50.373

这是代码风格的问题。随着项目的发展，您会发现维护它或扩展其功能变得越来越困难。更好的解决方案是在文件开头初始化所有需要的变量，并外部化主要的 JavaScript 功能。

示例 PHP：

```
<script type="text/javascript">
    MYCONFIG = {
        authorized: '<?php echo $_SESSION['authorized']; ?>',
        foo: 'something else'
    }
    $(document).trigger('init'); // fire init event, you can call it as you like
</script> 
```

带有 jQ​​uery 的示例 JS（请注意，我使用自定义触发器“init”，您可以随意调用它）：

```
$(document).on('init', function() {

    function execute_this() {
        document.write(MYCONFIG.foo);
    }

    if(MYCONFIG.authorized) {
        execute_this();
    }

}) 
```

这应该在外部 JS 文件中，不需要任何 PHP 标记。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T09:30:55.183

我认为你有一些基本的设计问题，我们只是看到了冰山一角，不能完全帮助你。

以这种方式调用 php 函数本身并没有错，但是您有几个问题：

1）你不能分离你的js文件并允许缓存或cdn

2）虽然 MVC 肯定不是“强制性的”，但尝试将这种类型的逻辑与您的“视图”分开绝对是一个好主意 - 您的渲染输出

**3）我怀疑在其他地方你有一个巨大的安全漏洞**——如果你根据他们在他们的会话中是否被“授权”来设置某些参数，这意味着你很可能会发回信息来作为你的权限决定的基础php代码某处。永远不要在页面上这样做——所有数据在页面本身上都应该是“中立的”，因为你无法控制它。

如果您不清楚我为什么这么说，请阅读此内容：http: [//www.codebyjeff.com/blog/2012/12/web-form-security-avoiding-common-mistakes](http://www.codebyjeff.com/blog/2012/12/web-form-security-avoiding-common-mistakes)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T09:21:11.023

有三种可能的方法来做到这一点。

1.  使用隐藏字段并在每个字段中添加必要的变量值并使用 jQuery 获取那些。
2.  用户 jQuery Session 插件和访问 php session 变量。
3.  对 php 进行 ajax 调用并以 json 格式获取响应并访问响应。

# paypal - 使用paypal付款成功后是否可以将自定义送货地址保存到数据库中？

> ID：14849938
> 
> 赞同：0
> 
> 时间：2013-02-13T09:09:46.943
> 
> 标签：paypal

使用paypal付款成功后是否可以将自定义送货地址保存到数据库中？

付款成功后我想保存客户在表格中输入的收货地址，我使用的是paypal方式付款。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:31:33.800

是的。为此，您需要使用[Instant Payment Notification (IPN)](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNIntro)。

IPN 会将交易数据发布到您服务器上的侦听器脚本。这个脚本可以接收数据（包括所有交易细节，包括送货地址）并做任何你需要/想做的事情，无论是保存到数据库、发送通知电子邮件、连接到第 3 方网络服务等。

它是实时发生的（在大多数情况下），因此您可以用它做一些非常酷的事情并自动执行许多任务。

# ios - iOS：sqlite3 运行时函数始终返回 0（预期为 double）

> ID：14849946
> 
> 赞同：1
> 
> 时间：2013-02-13T09:10:30.003
> 
> 标签：ios, sql, sqlite, fmdb

我已经实现了出色的 Dave Addey 提供的算法，以使用“余弦球面定律”公式计算两个坐标之间的距离（这是[原始链接](http://daveaddey.com/?p=71)）。这就是我打算在查询中使用函数调用的方式：

```
NSString *SQLQuery= [NSString stringWithFormat: @"SELECT distance(lat, lon, '%f', '%f') as distance, * FROM table WHERE distance < %f", coord.latitude, coord.longitude, distance/1000.0]; 
```

问题是我可以正确过滤半径为 1 公里的结果，但是当我尝试访问“距离”列时，它总是返回 0。我使用的是 FMDatabase，但直接调用 sqlite3 ( `[resultset doubleForColumnIndex: 0]`) 并不能修复问题。

这是用于声明函数的代码（我也尝试直接调用 sqlite3）：

```
 [database makeFunctionNamed:@"distance"
               maximumArguments:4
                      withBlock: ^( sqlite3_context *context, int argc, sqlite3_value **argv ) {
                          // check that we have four arguments (lat1, lon1, lat2, lon2)
                          assert(argc == 4);
                          // check that all four arguments are non-null
                          if (sqlite3_value_type(argv[0]) == SQLITE_NULL || sqlite3_value_type(argv[1]) == SQLITE_NULL || sqlite3_value_type(argv[2]) == SQLITE_NULL || sqlite3_value_type(argv[3]) == SQLITE_NULL) {
                              sqlite3_result_null(context);
                              return;
                          }
                          // get the four argument values
                          double lat1 = sqlite3_value_double(argv[0]);
                          double lon1 = sqlite3_value_double(argv[1]);
                          double lat2 = sqlite3_value_double(argv[2]);
                          double lon2 = sqlite3_value_double(argv[3]);
                          // convert lat1 and lat2 into radians now, to avoid doing it twice below
                          double lat1rad = DEG2RAD(lat1);
                          double lat2rad = DEG2RAD(lat2);
                          // apply the spherical law of cosines to our latitudes and longitudes, and set the result appropriately
                          // 6378.1 is the approximate radius of the earth in kilometres
                          double distance = acos(sin(lat1rad) * sin(lat2rad) + cos(lat1rad) * cos(lat2rad) * cos(DEG2RAD(lon2) - DEG2RAD(lon1))) * 6378.1;
                          sqlite3_result_double(context, distance);
                      }]; 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-05T12:59:27.353

SQL Query 的构建方式有错误，应该是：

`@"SELECT * FROM (SELECT distance(lat, lon, %f, %f) as distance, * FROM table) WHERE distance < %f ORDER BY distance DESC"`

（有关详细信息，请参阅问题的评论）

# java - 以下两种方法之间哪种方法更好且优化？

> ID：14849952
> 
> 赞同：1
> 
> 时间：2013-02-13T09:10:40.870
> 
> 标签：java

以下是通过调用 API 方法来反转字符串的两种方法。请在有正当理由的情况下说明哪种方法更好

```
public String functionOne(String str){
    char arr[] = str.toCharArray();
    int limit = arr.length/2;
    for (int i = arr.length-1, j = 0; j < limit; i--, j++) {
        char c = arr[i];
        arr[i] = arr[j];
        arr[j] = c;
    }
    return new String(arr);
}

public String functionTwo(String str) {
    StringBuilder strBuilder = new StringBuilder();
    char[] strChars = str.toCharArray();

    for (int i = strChars.length - 1; i >= 0; i--) {
        strBuilder.append(strChars[i]);
    }

    return strBuilder.toString();
} 
```

实际上，当我在长度为 100000 的字符串上运行我的代码时，第二种方法花费的时间是第一种方法的两倍。通过使用 System.currentTimeMillis() 我发现第一种方法中的执行差异为 1，第二种方法中的执行差异为 2。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T09:12:20.827

这个怎么样：

```
new StringBuilder("some string").reverse().toString(); 
```

已经为此准备的 API 可能会使用最有效的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T09:18:08.420

两者都一样。第一个是使用`n/2`操作，`O(n)`第二个是在操作中进行`n`操作，这也是 O(n) 时间复杂度。

在实践中，两者的运行几乎一样好，因为`n`或`n/2`操作不会有太大的不同。

编辑：如果您不了解时间复杂度的含义，请尝试生成一个大长度的随机字符串，例如 100 万，并计算两种方法的时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T09:40:41.387

第二个更具可读性：我可以浏览它而不必考虑它在做什么。我每次都会这样做（除非有充分的理由需要它快几毫秒？）

第一个让我的大脑停了几秒钟。这意味着它很危险，很容易被未来的变化破坏。它要么需要评论，要么需要替换（用第二个）。

# asp.net-mvc - 处理视图和模型之间多个请求的最佳 MVC 方式

> ID：14849953
> 
> 赞同：2
> 
> 时间：2013-02-13T09:10:42.030
> 
> 标签：asp.net-mvc, vb.net, model-view-controller, design-patterns

我有一个 .net 应用程序，其中有一个*Form 层*、一个*DB 模型层*（实体框架）和一个位于这两层之间的*Controller 层*。

我需要处理这种情况：

1.  用户按下一个按钮来编辑一些参数

2.  表单需要请求一些代表这些参数当前状态的数据库数据

    *   可能，用户请求可能被拒绝，因为当前情况不适用，在这种情况下，应显示错误消息框
3.  显示一个模态表单，用户更改参数并确认

4.  在 DB 模型中进行了更改

这很简单。

事实是，在第 4 点，我们需要在第 2 点*已经处理*过的一些数据。

尤其是：

*   在第 2 点，我们向 DB 模型请求一些数据，该数据可能*不在*缓存中，因此执行 SQL 查询
*   该数据由本地 LINQ 处理
*   返回以模态形式显示的几个复选框的状态

*   在第 4 点，我们再次需要 LINQ 处理的数据

*   由于我们来自表单层，我们不再拥有该数据
*   因此再次向数据库模型请求数据，但这次它在缓存中
*   该数据由本地 LINQ 再次处理

是否值得重新加载和重新处理数据以维护 MVC 模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T15:49:23.797

我不知道它在 VB.NET 中究竟是如何工作的，但是如果我们以纯粹的“MVC”方式（至少，我是如何理解的）来看待这个问题，那么有些事情是不对的。

1.  在这一步中，当点击完成时，表单调用控制器（所有动作都由控制器传递）
2.  然后控制器需要进行验证。如果它需要数据库来做到这一点，那就这样吧。然后，它将用户重定向到视图。（应该是消息框还是其他表单来输入数据）
3.  在这里，用户在表单中进行更改，然后单击按钮提交。在此按钮中，您再次调用控制器（另一个功能/操作）。
4.  在控制器中，您可以进行所需的验证并通过 LINQ 插入/更新数据库中的数据。然后，您可以重定向到视图。

由于第 2 步和第 4 步之间可能已经过去了很多时间，并且两次调用之间的数据可能已经改变，所以我认为执行 2 次请求是可以的。此外，由于它们是控制器中的 2 个不同功能，我认为您别无选择。

这就是我的看法，但我可能是错的:)

***编辑***

我不知道对数据库的查询很耗时而且这是一个问题。如果绝对目标是不让用户等待两次，因为时间在这个应用程序中很重要，我想你可以存储你的对象进入内存中的第 2 步，并使用控制器（使用某种辅助类）检索它。这就像在数据库中进行查询，但在内存中。如果您使用[存储库模式](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)，那么在控制器中编写逻辑代码的程序员甚至不会知道他正在查询数据库以外的其他内容，因为它是另一个抽象级别。您可以在第 4 步之后立即释放内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:25:23.677

哦，我不是 100% 确定，但您问题中的流动模式看起来不正确？

通常的程序是显示数据并在数据视图中有一个编辑按钮

所以你可能有类似的东西

```
Function ShowAddressDetails(OwnerId as long) as ActionResult 
```

而且您的 ActionResult 通常是一个模型，它可能会被传递给 VIEW（与地址记录示例保持一致）类似于...

```
Return View(AddressRecordModel) 
```

使用 OwnerId 参数从 SQL DB 中提取地址记录

在您的 VIEW 中，您的 EDIT 按钮所在的位置，您至少有两个选择，即

```
1\. Reload data from SQL (used where data may have changed since last action)
2\. Pass the already loaded Model (Used where the data hasnt changed) 
```

这意味着您拥有以下任一（或两者）

```
Function EditAddressDetails(OwnerId as long) as ActionResult 
```

或者

```
Function EditAddressDetails(Model as AddressRecordModel) as ActionResult 
```

或者，您可能有“CHILDACTION”而不是“ACTION”

也不要忘记以下... ?

最后，如果该序列仅由一个用户使用，则数据不应在请求之间更改，除非和 EDIT/AMEND/UPDATE 请求已成功完成。

# vba - 如何选择一些选定的数据透视表区域？

> ID：14849954
> 
> 赞同：0
> 
> 时间：2013-02-13T09:10:48.767
> 
> 标签：vba, excel

我正在尝试选择和复制数据透视表的某些选定区域。我能够确定我想要的区域数量，并且能够在消息框中显示范围，这不是我的目标。我想复制该选定范围。我的代码看起来像这样。我想复制范围内的值（toprow1，leftcoloumn：lastrow，rightcoloumn）。仅供参考，消息框代码是我不需要的，只是他们告诉您范围编号。

```
 Sub PivotTableRangeAreas()

    With ActiveSheet.PivotTables(1)

  Dim TopRow1 As Long, TopRow2 As Long, LastRow As Long
  Dim LeftColumn As Long, RightColumn As Long

  TopRow2 = .TableRange2.Row
  With .TableRange1
  TopRow1 = .Row
  LastRow = .Rows.Count + .Row - 1
  LeftColumn = .Column
  RightColumn = .Columns.Count + .Column - 1
  End With

  MsgBox "The pivot table named " & .Name & vbCrLf & _
  "occupies these range elements:" & vbCrLf & vbCrLf & _
  "With the Report (Page) field: " & vbCrLf & _
  .TableRange2.Address(0, 0) & vbCrLf & _
  "Without the Report (Page) field: " & vbCrLf & _
  .TableRange1.Address(0, 0) & vbCrLf & vbCrLf & _
  "First row, with the Report (Page) field: " & TopRow2 & vbCrLf & _
  "First row, without the Report (Page) field: " & TopRow1 & vbCrLf & _
  "Last row: " & LastRow & vbCrLf & _
  "Left column: " & LeftColumn & vbCrLf & _
  "Right column: " & RightColumn, , "Pivot table location."

  End With

  End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:54:43.753

我猜这只是您要复制的值？如果是这样，请尝试从这样的内容开始 - 它会将值从 A1 范围开始放入 Sheet2。我不确定您要从数据透视表复制到哪个范围 - 您必须更改其中的一些以适应：

```
Sub CopyRange()

Dim vArray() As Variant

'Copies the values between (Toprow1, LeftColumn) and (LastRow, RightColumn) into an array
vArray = ActiveSheet.Range(Cells(TopRow1, LeftColumn), Cells(LastRow, RightColumn)).Value
'Pastes the values from the array into Sheet2, starting at A1
Sheet2.Range("A1").Resize(UBound(vArray, 1), UBound(vArray, 2)).Value = vArray

End Sub 
```

# magento - 如何使模块可安装在 Magento 中？

> ID：14849957
> 
> 赞同：0
> 
> 时间：2013-02-13T09:10:53.133
> 
> 标签：magento, installation, magento-1.7, magento-1.6

我已经在 Magento 中成功创建了一个自定义支付网关模块。一切都按预期正常工作。

我想要做的是使模块可安装，以便拥有该`.zip`文件的任何人都可以安装它，而不是手动处理文件。我知道magento可以做到这一点，并且我已经看到了这样的模块。

如何使模块可以安装在已经开发的 Magento 中？如果可能，请说明步骤。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T09:14:04.523

Here is the step-by-step instruction on how to Package an Extension.

[http://www.magentocommerce.com/wiki/7_-_magento_connect/packaging_a_magento_extension](http://www.magentocommerce.com/wiki/7_-_magento_connect/packaging_a_magento_extension)

Let me know if you run in any trouble.

Firstly, go to your `Admin > System > Magento Connect > Package Extensions` There you will be greeted with `New Extension` where you can fill all the details of your module. If you don't understand any field there, just check it in the above article which gives explanation of all the fields required while packaging an extension.

# c# - 如何将具有多个“from”的 LINQ 表达式从查询语法转换为方法语法？

> ID：14849965
> 
> 赞同：0
> 
> 时间：2013-02-13T09:11:25.230
> 
> 标签：c#, lambda

我正在使用实体框架。我将如何在 Lambda C# 中编写以下 Linq 代码？

```
var users = (from u in context.Users.ToList()
                         from e in u.Events
                         where e.EventName == eventName //Name of the Event, the user is related to
                         select u.FirstName + u.LastName).ToList(); 
```

在这种情况下无法通过 Lambda。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T09:22:37.287

```
context.Users.SelectMany(u => u.Events.Where(e => e.EventName == eventName).
                                       Select(e => u.FirstName + u.LastName)).
              ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T09:14:13.743

“方法链”中的等价物（这就是它的名称）如下所示：

```
context.Users.SelectMany(u => u.Events
                               .Where(e => e.EventName == eventName)
                               .Select(e => u.FirstName + u.LastName))
             .ToList(); 
```

请注意，我省略了对`ToList()`on的调用，`context.Users`因为它似乎没有必要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T09:15:18.467

```
var users = context.Users
            .Where(u => u.Events.Any(q => q.EventName == eventName))
            .Select(m => m.FirstName + m.LastName).ToList(); 
```

更新，添加测试相关类；

```
public class User
{
    public List<Event> Events { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
}

public class Event
{
    public string EventName { get; set; }
} 
```

和代码；

```
string eventName = "a";

List<User> t = new List<User>();

Event event1 = new Event() { EventName = "a" };
Event event2 = new Event() { EventName = "b" };
Event event3 = new Event() { EventName = "c" };

User user1 = new User() { FirstName = "x", LastName = "y" };
User user2 = new User() { FirstName = "x1", LastName = "y1" };
User user3 = new User() { FirstName = "x2", LastName = "y2" };

user1.Events = new List<Event>();
user2.Events = new List<Event>();
user3.Events = new List<Event>();

user1.Events.Add(event1);
user1.Events.Add(event2);

user2.Events.Add(event2);
user2.Events.Add(event3);

user3.Events.Add(event1);
user3.Events.Add(event3);

t.Add(user1);
t.Add(user2);
t.Add(user3);

var bb = t.Where(u => u.Events.Any(q => q.EventName == eventName)).Select(m => m.FirstName + m.LastName).ToList(); 
```

# java - SQLCipher 安全性

> ID：14849969
> 
> 赞同：1
> 
> 时间：2013-02-13T09:11:32.693
> 
> 标签：java, android, sqlcipher

Android 应用程序的 SQLCipher 究竟是如何工作的？ [http://sqlcipher.net/design/](http://sqlcipher.net/design/)

据我了解，这一切都取决于 PRAGMA 密钥，并且该密钥应保存在应用程序中，可能以二进制形式保存。

然而，这是不安全的，因为几乎每个人都可以在 root 手机上反编译 .apk 文件。也许我错过了什么？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T12:49:00.660

> 据我了解，这一切都取决于 PRAGMA 密钥，并且该密钥应保存在应用程序中，可能以二进制形式保存。

不。

> 也许我错过了什么？

`getReadableDatabase()`密钥来自用户，以用户输入的密码短语的形式。在 Android的SQLCipher 中，此密码短语被传递给`SQLiteOpenHelper`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:29:55.210

SQLCipher 团队普遍建议不要在应用程序二进制文件中嵌入固定密钥。无论应用程序在隐藏嵌入式密钥方面多么有创意，一个足够坚定的攻击者都能够从应用程序包中提取它并打开数据库。

不幸的是，一些应用程序仍然选择使用带有嵌入式密钥的 SQLCipher 作为 DRM 的基本形式，即使临时用户难以查看数据。然而，这并没有提供任何实质性的安全性。

如果您需要保护敏感数据，最好的方法是使用源自用户输入的强密码的密钥。SQLCipher 自动提供强密钥派生，因此您需要做的就是通过 PRAGMA 密钥或 SQLCipher 包装器库中提供的等效密钥机制之一提供用户密码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T13:44:27.490

Yes, securing the key is the tricky part. Ideally it's (partly) supplied by a password the user enters when signing on to the app, but that isn't always ideal, so sometimes you have to resort to the much-maligned "security by obscurity" approach and assemble the key from bits and pieces stashed here and there.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-25T20:07:31.603

I generate key form secureRandom and then save key on KeyStore (BKS). For KeyStore i generate password using: random, user info, device info and password.

# c# - 尝试从代码隐藏中按名称访问 xaml“本地：”控件时出错

> ID：14849972
> 
> 赞同：0
> 
> 时间：2013-02-13T09:11:43.180
> 
> 标签：c#, wpf, class, xaml, visual-studio-2012

这一切都始于尝试拥有一个数字文本框。那部分无关紧要，但这就是我创建以下课程的原因。（顺便说一句，使用 VS 2012 Express、WPF、C# 代码隐藏）。

```
using System;
using System.Windows.Controls;

    namespace Herculese
    {
        public class IntBox : TextBox
        {
            <!-- irrelevant code here-->
        }
    } 
```

到目前为止，一切都很好。我构建，这成为我继续在 xaml 中使用的控件：

```
<local:IntBox Name="txtBox_heightft" Width="60" TextChanged="txtBox_Numeric_Changed" /> 
```

然后在我试图使用“txtBox_heightft.Text”引用文本框中的文本的代码后面，我被告知“当前上下文中不存在名称'txtBox_heightft'”。这让我很困惑，因为如果我在 xaml 中将“local:IntBox”更改为“TextBox”，它可以正常工作，但当然它是一个常规文本框，而不是我的修改版本。我是否需要以某种方式在代码隐藏中添加对类的引用？这是我第一次尝试以这种方式使用类，因为我从来不需要默认未提供的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:25:28.913

问题是您使用 Name 作为依赖属性，您需要使用 x:Name="txtBox_heightft" 作为扩展属性:)

# jquery - 需要刷新页面才能使用jquery mobile显示highchart

> ID：14849973
> 
> 赞同：1
> 
> 时间：2013-02-13T09:11:43.680
> 
> 标签：jquery, highcharts

我正在使用一个简单的网站来使用 Highcharts 和 jQuery Mobile 显示我的统计数据。问题是，第一次加载页面时，没有显示图表。我需要手动重新加载页面以显示图表。

我已经检查了所有建议的解决方案（主要基于更改脚本加载的顺序、在每个页面创建时委托功能、将脚本放在 data-role="page" 上）但对我没有任何作用。

我正在使用 django 模板，这就是我的页面现在的样子（经过一千次不成功的更改）：

```
{% extends "web/dashboard_base.html" %}
{% load i18n %}

{% block content %}
<script src="{{ STATIC_URL }}js/highcharts/highcharts.js"></script>
<script src="{{ STATIC_URL }}js/highcharts/highcharts-more.js"></script>
<script src="{{ STATIC_URL }}js/highcharts/modules/exporting.js"></script>
<script src="{{ STATIC_URL }}js/ipki_charts.js"></script>
<script>
$(function () {
  {% for indicator in indicators %}
  values_per_indicator_manager({{ indicator.id }}, '{{ indicator.id }}_container');
  {% endfor %}
});
</script>

<ul data-role="listview">
  {% for indicator in indicators %}
  <li><h2 style="width: 100%; text-align: center">
      {{ indicator }} 
      ({{ indicator.unit }})</h2>
  <div id="{{ indicator.id }}_container"
       style="width: 80%; margin: 0 auto">
  </div>
  </li>
  {% endfor %}
</ul>
... 
```

函数 'values_per_indicator_manager' 使用 ajax 加载数据并创建图表。您可以在这里查看 ipki_charts.js：http: [//pastebin.com/MMQ3V1hD](http://pastebin.com/MMQ3V1hD)

# visual-studio-2010 - SSRS 无法识别自定义 DLL

> ID：14849977
> 
> 赞同：4
> 
> 时间：2013-02-13T09:12:01.447
> 
> 标签：visual-studio-2010, reporting-services

我正在本地机器上通过 VS2010 开发 SSRS 报告。我需要从某个报告中引用我编写的 DLL，该 DLL 是在 .net 框架 3.5 中构建的，我已将 dll 放在以下库中：1.C:\Program Files\Microsoft Visual Studio 10.0\Common7\ IDE\PrivateAssemblies。2.C:\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportServer\bin 在我的本地机器和 SSRS 所在的服务器上。我还添加了 rssrvpolicy.config 文件，如下所示：

```
<CodeGroup
           class="UnionCodeGroup"
           version="1"
           PermissionSetName="FullTrust"
           Name="Test"
           Description="">
         <IMembershipCondition
               class="UrlMembershipCondition"
               version="1"
               Url="C:\Program Files\Microsoft SQL Server\MSRS10_50.MSSQLSERVER\Reporting Services\ReportServer\bin\Test.dll"
                   /> 
```

完成所有操作'我通过报表属性引用了 DLL，但在预览报表时收到以下错误消息：“本地报表处理期间发生错误，报表 X 的定义无效。加载代码模块时出错”测试...”无法加载文件或程序集“测试...”或其依赖项之一。该系统找不到指定的文件”

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T11:47:58.593

OK 发现问题！

在win7 64位上安装VS2010创建两个Microsoft Visual Studio 10.0文件夹，一个在我找到我的DLL的程序文件中，一个在我应该找到它的程序文件（x86）中。将 DLL 放入正确的文件夹后，报告就会识别它。

感谢您的回复

# browser - browser.version 为 IE10 返回 8.0

> ID：14849982
> 
> 赞同：0
> 
> 时间：2013-02-13T09:12:11.260
> 
> 标签：browser, internet-explorer-10

我使用 $.browser.version 来使用 JQuery 验证我的 IE 版本。

当代码在 IE10 上执行时它返回 8.0？

有什么建议么...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T00:22:09.517

Try checking if IE is in compatibility mode, by opening the developer tools (F12) and looking at the drop downs at the top of the tool. It is probably in IE8 compatibility mode. Make sure you use a valid doctype, and if all else fails, add the following to the head of your page:

```
 <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

# c++ - 内存使用估计

> ID：14849983
> 
> 赞同：2
> 
> 时间：2013-02-13T09:12:14.607
> 
> 标签：c++

我想知道变量的内存使用情况，我尝试了这个：

```
#include <iostream>

int main()
{
    char* testChar1 = "Hi";
    char* testChar2 = "This is a test variable";
    char* testChar3 = "";

    std::cout <<sizeof(testChar1)<<std::endl; 
    std::cout <<sizeof (testChar2) <<std::endl; 
    std::cout <<sizeof(testChar3)<<std::endl;
} 
```

输出是：

```
4
4
4 
```

我认为我没有做正确的事。我想知道每个变量在 stack 中使用了多少内存。

**编辑 1**

同时，如果我这样做`char* testChar3 = NULL`；程序崩溃。那么这是否意味着没有相同的内存使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:14:59.123

In addition to using `strlen`, you could also use `sizeof` on a

```
char testChar1[] = "Hi"; 
```

EDIT: yes, this includes the null terminator, which IMO is an advantage over `strlen`. The actual size does include the null terminator.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T09:14:00.153

您只需打印指针的大小，它们总是相同的。您需要将`strlen`字符串乘以单个字符的大小。

编辑：根据我的评论和@Suma 的更正：

```
cout << (strlen(testChar) + 1) * sizeof(char) + sizeof(testChar); 
```

终止零字符需要 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T09:14:17.333

`sizeof(testChar1)` return size of pointer, if you want to test string length try replace `sizeof` with `strlen`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T09:15:00.430

In this instance you're only printing the size of the pointers and not the chars. So really, you would want to print the pointer, then dereference it and print the size of the memory it points to as well.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T09:44:31.053

```
I want to know how much memory every variable uses in stack . 
```

您的程序打印的正是您想要的。

如果您真正想要知道有多少内存（在哪里？？！！）占用您的变量指向的字符字符串 - 指针，请阅读另一个答案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-13T09:20:20.967

您实际上是在打印指针在您的系统上占用的字节数。我认为您需要做的是使用 strlen 函数。在这里查看。[斯特伦](http://www.gnu.org/software/libc/manual/html_node/String-Length.html)

```
std::cout<<strlen(testChar1)<<std::endl;
std::cout <<strlen(testChar2) <<std::endl; 
std::cout <<strlen(testChar3)<<std::endl; 
```

# php - 在mysql中选择多列的DISTINCT行

> ID：14849984
> 
> 赞同：3
> 
> 时间：2013-02-13T09:12:17.843
> 
> 标签：php, mysql, sql, distinct

我有一个名为`sk_messages`.It 的表，其结构如下：

```
msg_id     msg_from_user_id  msg_to_user_id  msg_text   msg_date     msg_status  

 1              12                14          hai...   23-12-2013      unread

 2              12                14         ....     ...             unread

 3              13                 14        ...      ..               unread 
```

我的要求是我想显示当前用户的所有消息，条件是即使他发送多条状态为未读的消息，也应该显示来自发件人的单条消息。也就是说，从上面的上下文中，单条消息应该显示 ID 为 12 的用户。我尝试了以下查询，但它不起作用。

```
SELECT DISTINCT (msg_from_user_id), msg_text, msg_date
 FROM sk_messages
 WHERE msg_to_user_id =  '$user_id'
 AND msg_status =  'unread'
 ORDER BY msg_date

$user_id is the id of the login user 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T09:16:29.810

尝试`group`通过 id 访问用户。

```
SELECT msg_text, msg_date
 FROM sk_messages
 WHERE msg_to_user_id =  '$user_id'
 AND msg_status =  'unread'
GROUP BY msg_from_user_id
 ORDER BY msg_date
```

**测试代码以获取最新消息**

```
'SELECT * FROM ( SELECT * FROM message WHERE user_id = 1 ORDER BY created DESC LIMIT 1) as msg  GROUP BY user_id '
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T09:16:30.070

试试这个：

```
SELECT 
  m1.msg_from_user_id, 
  m1.msg_text, 
  m1.msg_date
FROM sk_messages AS m1
INNER JOIN
(
   SELECT msg_from_user_id, MAX(msg_date) AS LatestDate
   FROM sk_messages
   WHERE msg_to_user_id =  '$user_id' 
     AND msg_status =  'unread'
   GROUP BY msg_from_user_id
) AS m2  ON m1.msg_from_user_id = m2.msg_from_user_id
        AND m1.msg_date         = m2.LatestDate
ORDER BY m1.msg_date; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/290d9/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T09:18:10.787

用这个

```
SELECT msg_from_user_id,
       msg_text, msg_date
       FROM sk_messages
 WHERE msg_to_user_id =  '$user_id'
 AND msg_status =  'unread'
 ORDER BY msg_date  GROUP BY msg_from_user_id
```

# jquery - 检测mousebutton是否在mousemove firefox上按下

> ID：14849987
> 
> 赞同：1
> 
> 时间：2013-02-13T09:12:22.060
> 
> 标签：jquery, firefox, drag-and-drop, mouseevent, mousemove

我正在尝试拖动 div 而不必添加 mouseup 功能，因为如果用户将鼠标放在窗口外，它可能会出错。

我尝试将“e.which”与 chrome、IE 和 firefox 一起使用，它在 IE 和 chrome 上运行良好，但 firefox 保留了最后一次单击的按钮，所以我将 e.buttons 用于 firefox。

e.buttons 适用于最新版本，但我尝试在 Firefox 14 上使用它，但不支持。

您知道其他解决方案吗？

代码：

> if(!drag_enabled || drag_enabled && !e.which || e.buttons != undefined && drag_enabled && !e.buttons )
> 
> 返回drag_enabled = false；

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-13T09:36:56.893

我在使用 e.which 时遇到了与 Firefox 类似的问题。所以我改变了我的代码，如下所示，它在所有浏览器中都可以正常工作。我希望它会帮助你。

```
function submitOnEnter(e){ 
    if (!e) var evt = window.event;
    var charCode = e.keyCode? e.keyCode : e.charCode;
    if(charCode == "13"){ 
        alert("Enter pressed");
    } 
} 
```

和使用

```
<li onKeyDown="submitOnEnter(event)" /> 
```

# java - Java，如何通过接口设置变量？

> ID：14849988
> 
> 赞同：0
> 
> 时间：2013-02-13T09:12:24.613
> 
> 标签：java, android, interface

在我的项目中，我定义了一个这样的接口：

```
public interface SearchResultProgressListener {
    public void OnSearchCompleted(boolean value);
} 
```

我在 A 类（称为 SearchResultsActivity）中实现了这个：

```
public class SearchResultsActivity extends BaseActivity implements
         SearchResultProgressListener {

    private ProgressBar mProgressBar;
    private boolean timerStatus = false;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_searchresults);

        // Linking progressbar
        mProgressBar = (ProgressBar) findViewById(R.id.progressBar_fake);
        new CountDownTimer(10000, 1000) {

             public void onTick(long millisUntilFinished) {
                 int temp = (int) millisUntilFinished / 1000;
                 switch(temp) {
                     case 9: temp = 1;   break;
                     case 8: temp = 2;   break;
                     case 7: temp = 3;   break;
                     case 6: temp = 4;   break;
                     case 5: temp = 5;   break;
                     case 4: temp = 6;   break;
                     case 3: temp = 7;   break;
                     case 2: temp = 8;   break;
                     case 1: temp = 9;   break;
                     case 0: temp = 10;  break;
                 }
                 Log.e("Hesam", "Status1: " + timerStatus);
                 if(!timerStatus)
                     mProgressBar.setProgress(temp);
                 else
                     mProgressBar.setProgress(10);
             }

             public void onFinish() {
                 mProgressBar.setVisibility(View.GONE);
             }
          }.start();
    }

    @Override
    public void OnSearchCompleted(boolean status) {
        this.timerStatus = status;
        Log.e("Hesam", "Status0: " + timerStatus);
    }
} 
```

我有 B 类（称为 HotelsAsyncTaskFragment），我想通过这个类将布尔值发送到 A 类。

```
public class HotelsAsyncTaskFragment extends SherlockFragment {
    private SearchResultProgressListener srpListener;

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        srpListener = (SearchResultProgressListener) new SearchResultsActivity();
    }

    class HotelsSearchTask extends AsyncTask<Void, Void, Void> {

        @Override
        protected void onPreExecute() {...}

        @Override
        protected Void doInBackground(Void... params) {...}

        @Override
        protected void onPostExecute(Void result) {
            if(!isComplete()) {
                HotelsAsyncTaskFragment.this.srpListener.OnSearchCompleted(false);
                } else { 
            HotelsAsyncTaskFragment.this.srpListener.OnSearchCompleted(true);
                }
    }
    }
} 
```

现在，我希望当我将 A 类中的“timerStatus”设置为“True”时，它的内容会发生变化，但不会。这是我的日志：

```
02-13 16:41:58.716: E/Hesam(469): Status1: false
02-13 16:42:13.566: E/Hesam(469): Status1: false
02-13 16:42:14.566: E/Hesam(469): Status1: false
02-13 16:42:14.611: E/Hesam(469): Status0: true
02-13 16:42:15.571: E/Hesam(469): Status1: false
02-13 16:42:16.601: E/Hesam(469): Status1: false
02-13 16:42:17.616: E/Hesam(469): Status1: false
02-13 16:42:18.616: E/Hesam(469): Status1: false
02-13 16:42:19.621: E/Hesam(469): Status1: false
02-13 16:42:20.626: E/Hesam(469): Status1: false
02-13 16:42:21.621: E/Hesam(469): Status1: false 
```

如您所见，“timerStatus”在第四行设置为“true”，但之后我不知道为什么它设置为 false！

任何建议将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:24:47.307

您尚未显示 SearchResultsActivity() 的代码，但它显然与 MainActivity() 不同。您看到的日志条目来自具有两个单独变量的两个不同活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:34:01.617

现在您已经更改了代码，现在看起来更清楚了......

您是否尝试调试 onPostExecute()？

如果你看到日志，它清楚地表明它被设置为 false 多次，但只有一次设置为 true。所以，调试你的 onPostExecute() 方法，主要是 isComplete() 函数......

我希望问题出在那儿。

希望这能帮助您解决问题。

谢谢...

777先生

# lotus-notes - 当用户点击回车时执行动作/按钮

> ID：14849996
> 
> 赞同：0
> 
> 时间：2013-02-13T09:13:01.493
> 
> 标签：lotus-notes, lotus

应用程序使用框架集，其中顶部框架包含带有搜索框（呈现 OS 样式的文本字段）的横幅（表单）和执行搜索的按钮。

用户希望在该字段中按 Enter 时执行搜索。

我已经实现了 javascript（在表单级别的 Notes 客户端中）来捕获 13 个键并发出 button.click()。这很麻烦（如果用户长时间保持应用程序打开，Notes 客户端通常会挂起）。

我正在寻找解决方案/想法来完成这项工作 - 如果用户在文本字段中点击输入，将调用一些操作（@Formula、LotusScript、JavaScript）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T19:32:22.703

使用 Notes 客户端中的 Javascript，您可以设置一个计时器以每隔半秒轮询一次搜索字段，并在您在搜索字段中看到换行符/CR 字符时触发您的搜索功能。有关更多详细信息和实际代码示例，请参阅此帖子： [http ://www-10.lotus.com/ldd/nd6forum.nsf/55c38d716d632d9b8525689b005ba1c0/c7ce0bad6b6ec83385257180007d6761?OpenDocument](http://www-10.lotus.com/ldd/nd6forum.nsf/55c38d716d632d9b8525689b005ba1c0/c7ce0bad6b6ec83385257180007d6761?OpenDocument)