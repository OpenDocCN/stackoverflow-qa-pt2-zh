# StackOverflow 问答 15083000-15083999

# struts2 - 如何为struts 2动作类编写junit测试？

> ID：15083000
> 
> 赞同：4
> 
> 时间：2013-02-26T06:45:29.203
> 
> 标签：struts2, junit4

我想为struts 2动作类方法编写junit测试。如何为addUser函数编写测试用例？我的动作课看起来像这样

```
puble class UserAction{

public String addUser(){
User user = new User();
user.setUserName("user");
user.setPassword("password");
UserDAO userDAO = new UserDAO()
userDAO.addUser(user)
return SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:32:48.310

Struts 2 提供了一个 JUnit 插件库，可以更轻松地开发用于测试 Struts 2 动作类的单元测试。要测试您的操作，您需要知道运行所需的方面操作类。你可以检查这个例子

[http://struts.apache.org/release/2.2.x/docs/struts-2-junit-plugin-tutorial.html](http://struts.apache.org/release/2.2.x/docs/struts-2-junit-plugin-tutorial.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:34:17.457

在这里，您不得不编写集成测试，因为您已经硬编码了 DAO 实现。（有一些方法可以解决这个问题，但编写更好的操作是更好的方法。）

与其使用显式的 DAO 实现，不如注入一个。要对该操作进行单元测试，您需要模拟添加用户的成功和失败。

然后检查动作的返回值。

# objective-c - 调试“发送到已释放实例的消息”

> ID：15083001
> 
> 赞同：0
> 
> 时间：2013-02-26T06:45:29.360
> 
> 标签：objective-c, cocoa, memory-management, automatic-ref-counting

好的，所以我再次面对可怕的`message sent to deallocated instance`......

*   我正在使用[DMTabBar](https://github.com/malcommac/DMTabBar)（基本上是一个类似 Xcode 的 TabBar 控件）
*   启用 ARC

**现在，这是交易：**

*   控件随附的示例工作正常
*   我已经启用了 Zombies（甚至尝试使用 Instruments 进行调试——老实说——我不知道要寻找什么）
*   该`deallocated`实例是`tabBarItems`TabBar 的数组（承载不同按钮的那个）。

**这就是我添加项目的方式：**

```
NSMutableArray* sidebarItems = [@[
        [DMTabBarItem tabBarItemWithIcon:[NSImage templateImageNamed:@"One" withSize:iconSize] tag:0 tooltip:@"Files"],
        [DMTabBarItem tabBarItemWithIcon:[NSImage templateImageNamed:@"Two" withSize:iconSize] tag:1 tooltip:@"Explorer"],
        [DMTabBarItem tabBarItemWithIcon:[NSImage templateImageNamed:@"Three" withSize:iconSize] tag:2 tooltip:@"Bookmarks"],
        [DMTabBarItem tabBarItemWithIcon:[NSImage templateImageNamed:@"Four" withSize:iconSize] tag:3 tooltip:@"Search"]
    ] mutableCopy];

[sidebarTabs setTabBarItems:items];

// Handle selection events
[sidebarTabs handleTabBarItemSelection:^(DMTabBarItemSelectionType selectionType, DMTabBarItem *targetTabBarItem, NSUInteger targetTabBarItemIndex) {
        if (selectionType == DMTabBarItemSelectionType_WillSelect) {
            [sidebarTabView selectTabViewItem:[sidebarTabView.tabViewItems objectAtIndex:targetTabBarItemIndex]];
        } else if (selectionType == DMTabBarItemSelectionType_DidSelect) {
        }
    }]; 
```

**这是声明不同元素的方式：**

```
@interface myAppl : NSWindowController
{
    IBOutlet DMTabBar* sidebarTabs;
    IBOutlet NSTabView* sidebarTabView;
} 
```

**这是`DMTabBar`的界面（最“重要”的部分）：**

```
@interface DMTabBar : NSView {

}

// set an NSArray of DMTabBarItem elements to populate the DMTabBar
@property (nonatomic,strong) NSArray*           tabBarItems;

// change selected item by passing a DMTabBarItem object (ignored if selectedTabBarItem is not contained inside tabBarItems)
@property (nonatomic,assign) DMTabBarItem*      selectedTabBarItem; 
```

* * *

你能解释一下我做错了什么吗？我绝对*不是*内存管理方面的大师（是的，我承认我还有一些学习要做）但我肯定会因为这个而自杀......

我正在设置`tabBarItems`它们，它们似乎在那里（至少一开始是这样）。为什么他们会被释放？*（记住控件和项目代码都使用 ARC）。*

有任何想法吗？（如果您需要了解其他信息，请告诉我...）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T06:57:11.697

您是否尝试使用通常的内存调试技术运行，即

*   **带有僵尸的**乐器，以及****
***   在 Xcode 的**Edit Scheme > Diagnostics > Memory Management**选项卡中设置各种标志？**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-10T04:23:37.517

仅当它不是对象、委托和 IBoutlet 时才使用 assign。

改变这个：

```
@property (nonatomic,assign) DMTabBarItem*      selectedTabBarItem; 
```

对此：

```
@property (nonatomic,strong) DMTabBarItem*      selectedTabBarItem; 
```**

# php - 模块之间共享的 ZF2 模型

> ID：15083002
> 
> 赞同：5
> 
> 时间：2013-02-26T06:45:31.623
> 
> 标签：php, zend-framework2, zend-framework-mvc

我刚刚开始为一个新项目设置一个新的 ZF2 应用程序，基于 ZF2 骨架，并且正在查看他们关于[Models](http://framework.zend.com/manual/2.1/en/user-guide/database-and-models.html)的教程。

tl;dr：我应该如何在多个不同的模块之间共享一个模型，把它放在更高级别的某个地方（/模块之外）？

我们有几个模块设置如下：

```
/
/module/ModuleName
/module/ModuleName/config
/module/ModuleName/src
/module/ModuleName/src/ModuleName 
```

我正要设置一个文件夹`/module/ModuleName/src/ModuleName/Model/TableName.php`，但后来我意识到：该表也需要在其他模块中访问。所以我该怎么做？

我应该将 Models 文件夹放入`/module/Model`还是会导致它被视为模块，即 site.com/model （基于我们当前的配置，它会）。

我应该在地方之间复制和粘贴模型吗？我应该把模型放回`/vendor/library/Company/Model`某个地方吗？不太确定是否有最佳实践！

问题2：教程还建议使用ServiceManager来实例化数据库模型以使用相同的实例。如果我有一个带有 5 个控制器的模块，每个控制器访问完全独立的表（例如每个 4 个表）怎么办？在我看来，它会在每个页面加载时冗余地初始化 16 个表（对于该模块中的其他控制器）。单个表初始化为页面加载增加了 55 毫秒。有没有解决的办法？？我不确定如何根据教程初始化 tablegateway 的操作将配置移动到控制器的操作中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T08:48:32.357

1)

您可以在应用程序的任何模块中使用任何模型，因此它们可以“共享”。例如，您使用 ServiceManager 来帮助您在项目中获取模型（和其他类）的实例。

服务管理器配置：

```
'factories' => array(
    'AuthService' => function($sm) {
        $auth = new \Zend\Authentication\AuthenticationService();

        return $auth;
    },
    'RoleMapper' => function($sm) {
        $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
        $mapper = new \Application\Mapper\RoleMapper;
        $mapper->setDbAdapter($dbAdapter);
        $mapper->setEntityPrototype(new \Application\Model\Role);
        $mapper->setHydrator(new \Application\Model\RoleHydrator);

        return $mapper;
    },
    'UserMapper' => function($sm) {
        $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
        $mapper = new \MyModule\Mapper\UserMapper;
        $mapper->setDbAdapter($dbAdapter);
        $mapper->setEntityPrototype(new \MyModule\Model\User);
        $mapper->setHydrator($sm->get('UserHydrator'));

        return $mapper;
    },
    .... 
```

如您所见，您可以在其中定义来自多个模块的类。通常，您只需为每个模块定义一个单独的 ServiceManager 配置。

没有什么可以阻止您在应用程序模块中创建“UserMapper”实例，如下所示：

一些控制器：

```
$this->getServiceLocator()->get('UserMapper');
// Or even grab Zend libraries like this
$this->getServiceLocator()->get('AuthService'); 
```

ServiceManager 将允许您从有问题的任何其他模块中的任何模块中获取类的实例。

2)

在您请求之前，服务管理器实际上不会创建任何实例，因此没有您建议的开销。

从上面的示例中，在您第一次请求之前，实际上没有创建任何实例：

```
$this->getServiceLocator()->get('UserMapper'); // instance now created. 
```

例如，如果您从不向服务管理器询问“RoleMapper”，则不会创建任何实例。

# unix - minicom 中的书签

> ID：15083004
> 
> 赞同：2
> 
> 时间：2013-02-26T06:45:40.670
> 
> 标签：unix, logging, terminal

我想在 minicom 日志中添加书签。我正在记录 minicom 的输出，所以如果我可以添加某种书签，在分析日志时它对我非常有用。

# html - 怎么用？

> ID：15083008
> 
> 赞同：1
> 
> 时间：2013-02-26T06:46:06.147
> 
> 标签：html, image, alt

有没有办法在`<sub>`标签的`alt`属性中使用`<img>`标签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T06:48:14.390

No.`alt`是纯文本，但你可以用[Unicode](http://en.wikipedia.org/wiki/Unicode_subscripts_and_superscripts#Superscripts_and_subscripts_block)伪造它，例如

```
<img alt="X₃">
```

[在Sitepoint 论坛上](http://www.sitepoint.com/forums/showthread.php?818182-subscript-in-alt-attribute)查看更多信息。

# android - 使用lazyAdapter令人困惑

> ID：15083010
> 
> 赞同：1
> 
> 时间：2013-02-26T06:46:11.107
> 
> 标签：android, listview, adapter, lazy-evaluation

我想在本教程中使用lazyAdapter： [http ://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

但它在本教程中使用 xmlParser，我想使用 JSON，所以我很困惑，特别是我是初学者

你能帮我用JSON替换xml吗？

```
package com.fedorvlasov.lazylist;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class LazyAdapter extends BaseAdapter {

    private Activity activity;
    private String[] data;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

    public LazyAdapter(Activity a, String[] d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.length;
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.item, null);

        TextView text=(TextView)vi.findViewById(R.id.text);;
        ImageView image=(ImageView)vi.findViewById(R.id.image);
        text.setText("item "+position);
        imageLoader.DisplayImage(data[position], image);
        return vi;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T06:56:14.370

[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)参考这个 url 进行 json 解析。

您只需将 url [http://api.androidhive.info/music/music.xml](http://api.androidhive.info/music/music.xml)替换为提供 json 的 yr url

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:01:56.670

首先，您应该解析 JSON 数据并用它们替换 XML。你可以先看这个教程：[Android JSON Parsing Tutorial](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)。我建议使用[gson](https://sites.google.com/site/gson/Home)，用户指南在这里：[Gson User Guide](https://sites.google.com/site/gson/gson-user-guide)

# java - 为什么我的 html 文件不适合不同的 android 屏幕尺寸？

> ID：15083011
> 
> 赞同：0
> 
> 时间：2013-02-26T06:46:15.990
> 
> 标签：java, android, html, android-webview

我有以下代码，

```
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    WebView mWebView = null;
    mWebView = (WebView) findViewById(R.id.webview);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.loadUrl("file:///android_asset/FE/index.html");
} 
```

但是，html 页面不会根据屏幕大小自行缩放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:09:06.277

**XML 代码...**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <WebView
        android:id="@+id/webView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</LinearLayout> 
```

**Java代码...**

```
WebView mWebView = null;

mWebView = (WebView) findViewById(R.id.webView1);

mWebView.getSettings().setJavaScriptEnabled(true);

mWebView.loadUrl("file:///android_asset/index.html"); 
```

**Html 代码 ....** (index.html) 把它放在 assets 文件夹中

```
<HEAD>
    <TITLE> HTML PAGE </TITLE>
</HEAD>

<BODY>
    <b> Hello World ...! </b>
</BODY> 
```

它对我来说**非常**有效......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T06:52:16.577

为您添加这些行`webview`：

```
 mWebView.setInitialScale(1);
     mWebView.getSettings().setLoadWithOverviewMode(true);
     mWebView.getSettings().setUseWideViewPort(true);
     mWebView.getSettings().setSupportMultipleWindows(true); 
```

并且不要在文件中硬编码`WebView`布局参数。`layout.xml`用于`fill_parent`和`layout_width`代替`layout_height`。

# html - 使用 CSS 创建三角形 div

> ID：15083019
> 
> 赞同：4
> 
> 时间：2013-02-26T06:46:28.183
> 
> 标签：html, css, geometry, border

我最近学习了如何使用 CSS 和 HTML 创建三角形 div 的外观。现在，我想知道是否可以在三角形 div 的任何边周围添加边框，这样如果我给 div 一个白色背景和黑色边框，你仍然可以看到它吗？有没有办法我可以做到这一点？

JSFIDDLE：http: [//jsfiddle.net/c75KM/1/](http://jsfiddle.net/c75KM/1/)

HTML：

```
<div class="arrow-up"></div> 
```

CSS：

```
.arrow-up {
width: 0; 
height: 0; 
border-left: 10px solid transparent;
border-right: 10px solid transparent;
border-bottom: 10px solid black;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T06:51:14.933

这是执行此操作的典型方法：

[JSFiddle](http://jsfiddle.net/c75KM/3/)

```
.arrow-up:after {
    position:absolute;
    content:"";
    width: 0;
    height: 0;
    margin-top:1px;
    margin-left:2px;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-bottom: 10px solid white;
}

.arrow-up:before {
    position:absolute;
    content:"";
    width: 0;
    height: 0;
    border-left: 12px solid transparent;
    border-right: 12px solid transparent;
    border-bottom: 12px solid black;
} 
```

# http - Heroku 子域，一个应用程序，不同的 url 路径

> ID：15083020
> 
> 赞同：0
> 
> 时间：2013-02-26T06:46:42.577
> 
> 标签：http, heroku, dns

我有 heroku 应用程序，即 my-app.herokuapp.com。这是部署在码头上的 Java 应用程序

我想要的是透明的 http 流量调度 - 没有重定向（没有 3xx 状态）。

我有域 xyz.com，想要配置这样的东西：

*   xyz.com/* -> my-app.herokuapp.com/*
*   **api** .xyz.com/* -> my-app.herokuapp.com/ **api** /*

是否可以以这种方式配置heroku？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T06:52:18.460

您需要使用一些重写规则来映射该域的请求。您可以使用 DNS 将两个域指向同一个 heroku 域。我不建议使用裸根域，但您可以使用 www.xyz.com。

```
$ heroku domains:add www.xyz.com
$ heroku domains:add api.xyz.com 
```

在 .htaccess 中

```
RewriteEngine on
RewriteBase /
RewriteCond %{HTTP_HOST} ^api.xyz.com
RewriteRule ^(.*)$ api/$1 [L,QSA] 
```

注意：我假设您正在使用 Apache，因为没有注意到堆栈。但同样的原则适用

# javascript - Highcharts 在图表创建/向下钻取后删除标签

> ID：15083022
> 
> 赞同：0
> 
> 时间：2013-02-26T06:46:57.103
> 
> 标签：javascript, jquery, highcharts, drilldown

我在 highcharts 中有一个图表，其中包含 2 组向下钻取数据和顶层数据。当我到达最后一个图表时，有多达 100 个 xAxis 类别。因此，标签变得不可读。我正在运行这段代码以尝试在最后一次深入分析时禁用标签。

```
chart.options.xAxis[0].labels.enabled = false; 
```

这是之前运行的`chart.redraw();`

出于某种原因，它仍然显示标签，即使在使用 console.log 时，我也可以看到它被设置为禁用。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:44:22.803

您可以为向下钻取对象添加额外参数，

示例：http: [//jsfiddle.net/BujyF/](http://jsfiddle.net/BujyF/)

```
drilldown: {
                    name: 'Firefox versions',
                    categories: ['Firefox 2.0', 'Firefox 3.0', 'Firefox 3.5', 'Firefox 3.6', 'Firefox 4.0'],
                    enabledLabels:false,
                    data: [0.20, 0.83, 1.58, 13.12, 5.43],
                    color: colors[1]
                } 
```

修改 setChart() 函数以将此参数添加到系列中。

```
function setChart(name, categories, data, color,labels) {
        chart.xAxis[0].setCategories(categories, false);
        chart.series[0].remove(false);
        chart.addSeries({
            name: name,
            data: data,
            enabledLabels:labels,
            color: color || 'white'
        }, false);
        chart.redraw();
    } 
```

然后使用格式化程序（用于标签）[http://api.highcharts.com/highcharts#xAxis.labels.formatter](http://api.highcharts.com/highcharts#xAxis.labels.formatter)检查是否应显示标签。

```
xAxis: {
            categories: categories,
            labels:{
                formatter:function(){
                    if(!this.axis.series[0].options.enabledLabels && this.axis.series[0].options.enabledLabels!=undefined)
                    {
                       return null;
                    }
                    else
                    {
                        return this.value;
                    }

                }
            }
        }, 
```

# multithreading - 是否有自动并行序言实现？

> ID：15083028
> 
> 赞同：6
> 
> 时间：2013-02-26T06:47:12.953
> 
> 标签：multithreading, concurrency, parallel-processing, prolog, logic

我目前正在做一些理论计算机科学的研究，我使用的主要工具之一是 prolog。我发现它对于编写非常快速的测试来反驳猜想特别方便。

但是，我已经到了蛮力搜索变得太慢的地步。虽然我可以使用不同的语言，但我使用 prolog 的全部意义在于编写代码来测试假设非常快速/简单。

我想知道，是否有允许自动并行化的 Prolog 实现？它不必非常快，但理想情况下，我正在寻找可以将代码放入其中并至少获得小幅加速的东西。

我不知道这是否可能。谷歌搜索显示了很多关于 Prolog 中自动并行性的学术文章，但我没有遇到任何实现。但是，我真的只熟悉 SWI-prolog，所以我绝对可以使用熟悉许多实现的人的建议。

我的代码使用了削减，但我相当确定我可以消除它们。至于 IO，唯一的 IO 是打印到控制台，这可能会移到任何并行代码之外。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T21:19:53.820

你确定你需要并行性来“至少获得一点加速”吗？

你说你只熟悉SWI-Prolog，所以试试其他Prolog系统。根据[http://www.probp.com/performance.htm](http://www.probp.com/performance.htm)上的基准测试结果（可能与您的特定问题相关，也可能不相关），您应该尝试 B-Prolog、YAP 和 SICStus-Prolog（这个是不是免费的）。如果你幸运的话，你可以通过切换你的 Prolog 系统来获得几倍的加速。

另一种可能的低成本加速方法 - 使用具有表格支持的系统（B-Prolog、XSB 或 YAP），只需`:- auto_table.`在程序的第一行添加类似的内容。根据您的问题和现有程序，您可以获得显着的加速（或根本没有加速）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T09:10:32.613

使用 Prolog 并不难找到并行性，很难选择使用哪一个 ;) 。

也许[Parlog - 为并行执行而设计的基于逻辑的编程语言](http://en.wikipedia.org/wiki/Parlog)会对您有所帮助。Windows有[实现，](http://www.parlog.com/en/parlog.html)但我不确定它是否使用多个内核。但是，您可以尝试联系那里的作者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-15T17:03:42.433

在 Jekejeke Prolog 中，我试图让程序员尽可能简单，并且确实提供了一个名为 balance/1 的简单构造。使用 balance/1 生成和测试问题：

```
 /* sequential */
 ?- Generate, Test. 
```

将分布在多个线程上。调用就像将连词包装到谓词 balance/1 中一样简单。结果可能会进行一些重新排序：

```
 ?- use_module(library(runtime/distributed)).

 /* parallel */
 ?- balance((Generate, Test)). 
```

这是一个并行生成素数的示例。顺序代码如下：

```
:- use_module(library(advanced/arith)).

prime(N) :-
    M is floor(sqrt(N)),
    between(2,M,K),
    N mod K =:= 0, !, fail.
prime(_).

?- time(aggregate_all(count, 
                     (between(1,1000000,X), prime(X)), N)).
% Up 6,737 ms, GC 33 ms, Thread Cpu 6,656 ms (Current 07/16/19 01:49:02)
N = 78499 
```

并行执行相同的操作会给出：

```
?- time(aggregate_all(count, 
                      balance((between(1,1000000,X), prime(X))), N)).
% Up 4,167 ms, GC 39 ms, Thread Cpu 219 ms (Current 07/16/19 01:49:50) 
N = 78499 
```

所以有一个加速，因为问题可以在多个线程上运行。

# ruby-on-rails - 在 tinyMce 中填写

> ID：15083031
> 
> 赞同：2
> 
> 时间：2013-02-26T06:47:22.603
> 
> 标签：ruby-on-rails, selenium, tinymce, cucumber

我想在具有 Tinymce 编辑器的页面中填写文本，以便使用 Cucumber 和 selenium 驱动程序进行功能自动化测试。我能够打开图像对话框，但无法填写其中的文本字段。我知道 TinyMce 有一个嵌入的 Iframe 标签持有其他html。我使用了以下步骤，但不起作用。

```
When /^I fill in the xpath "([^"]*)" with "([^"]*)"$/ do |xpath, value|
  find(:xpath, xpath).set 'value'
end 
```

和

```
When /^I fill in "([^"]*)" with "([^"]*)"$/ do |field, value|
  fill_in(field, :with => value)
end 
```

我得到一个错误作为`Unable to find xpath`图像的 PFA 以供参考。![在此处输入图像描述](../Images/84177f6f591020840ffe99c8a2d9ef38.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:35:34.817

我认为你应该切换到 chrome 并使用这里的方法：[如何用 capybara 和 selenium 填充 tinymce-rails 编辑器？](https://stackoverflow.com/questions/11581474/how-to-fill-tinymce-rails-editor-with-capybara-and-selenium)

看起来firefox对此有一个已知的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:50:00.923

这对我有用....

```
When ^I enter (.+) in textbox of tinymce iframe having id as (.+)$ do |any_details,tiny_id|
  within_frame("#{tiny_id}") do
    fill_in("image_name", :with =>any_details)
  end  
end 
```

此外，要在编辑器中选择**整个文本**进行自动化，请使用：c

```
When ^I select the entire textarea content in the editor$ do
  evaluate_script("tinyMCE.activeEditor.selection.select(tinyMCE.activeEditor.getBody(), true);")
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-24T19:58:05.330

这对我有用：

```
page.execute_script('tinymce.get("my_element").setContent("updated content");') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-02T16:42:01.910

尝试这个：

```
When /^I fill in "([^"]*)" with "([^"]*)"$/ do |field, value|
  sleep 0.5 until page.evaluate_script("tinyMCE.get('#{field}') !== null")
  js = "tinyMCE.get('#{field}').setContent('#{val}')"
  page.execute_script(js)
end 
```

作为参考，请查看此[要点](https://gist.github.com/eoinkelly/69be6c27beb0106aa555)

# sql-server - 在批处理文件中使用 sqlcmd 将时间戳放在输出文件上

> ID：15083032
> 
> 赞同：0
> 
> 时间：2013-02-26T06:47:26.910
> 
> 标签：sql-server, batch-file, timestamp, sqlcmd

我已经在批处理文件中编写了 foll sql 查询以从远程服务器获取结果。

```
SQLCMD -S "ServerName -U "uer" -P "Pass" -W -d"Interface" -Q"select LEFT(Zone_Prefix,5)+case when RIGHT(Zone_prefix,1)='N' then '_NORTH_WING' ELSE '_SOUTH_WING' END AS [Zone Name],cnt as [Zone Count] from ( SELECT  LEFT([Zone Name], 6) AS Zone_Prefix,SUM([Zone Count]) cnt FROM [Interface].[dbo].[VwZoneCount] WHERE [Zone Name] IN ('EB2GFNMZ','EB2GFSMZ','EB2GFNZ1','EB2GFSZ1','EB21FNZ1','EB21FSMZ','EB21FSZ1','EB22FNZ1','EB22FSZ1','EB22FSMZ','EB23FNMZ','EB23FNZ1','EB23FNZ2','EB23FNZ3','EB23FSMZ','EB23FSZ1','EB23FSZ2','EB24FNMZ','EB24FNZ1','EB24FSMZ','EB24FSZ1','EB25FNMZ','EB25FNZ1','EB25FSMZ','EB25FSZ1','EB26FNMZ','EB26FNZ1','EB26FSMZ','EB26FSZ1','EB27FNZ1','EB27FSMZ') GROUP BY LEFT([Zone Name], 6))tbl" -s"    " -o"Output_hvac.xls" 
```

我使用 task scheduler 每 4 小时执行一次此查询。目前，每次执行的结果都会被覆盖。每次执行后，我都需要将新结果附加或存储在带有**Time Stamp**的不同文件中。我主要关心的是放置一个时间戳并保留所有以前执行的数据。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:00:22.967

为文件名添加时间戳当然是可能的，但批量操作很麻烦。

您的第一个附加选项要简单得多。消除您的`-o`选择，并改用附加重定向。添加时间戳只需要重定向的 ECHO 语句。

```
>>"Output_hvac.xls" echo %date% %time%
>>"Output_hvac.xls" SQLCMD ...your_options_minus_the_-o_option... 
```

或者

```
>>"Output_hvac.xls" (
  echo %date% %time%
  SQLCMD ...your_options_minus_the_-o_option...
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-16T08:31:22.423

尝试：

-o "Output_hvac_%date:~6,4%%date:~3,2%%date:~0,2%_%time:~0,2%%time:~3,2%.xls"

输出应如下所示：

**输出_hvac_20181016_919.xls**

# asp.net - 如何样式化动态添加的控件？

> ID：15083037
> 
> 赞同：0
> 
> 时间：2013-02-26T06:48:01.853
> 
> 标签：asp.net, .net, vb.net

在 PreInit 事件（也尝试过 Load 事件）中，我在运行时根据后端的条件动态添加自定义用户控件。我的问题是添加到页面的用户控件不采用站点当前设置的主题，并且对其中的所有控件使用默认样式。

我该如何解决这个问题？我很难用谷歌找到任何特别相关的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:01:45.897

一堆方法来做到这一点。

```
MyControl.Attributes.Add("class", "myclass")
MyControl.Style.Add("background-color", "red")
MyControl.Attributes("bgcolor") = "lightblue" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:10:47.030

弄清楚了。我的网站在初始加载时将当前主题保存到会话变量中。在我将控件动态添加到页面后，我使用会话变量重新应用我的主题。我动态添加的控件然后采用适当的主题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:13:41.003

尽量将 ASP.NET 控件与其样式分离。使用 CSS 类可以让您轻松地做到这一点。您没有发布代码示例，所以我只能猜测您的自定义控件是什么样的。他们可能有某种形式的容器，比如 div。确定哪个层将处理您的 CSS 类结构，将 asp:Literal 添加到标记的该层，然后将 Literal 的 Text 属性公开为控件的公共属性。在运行时，当您创建控件并将其添加到 Controls 集合时，您可以为场景分配正确的类名称。

它看起来像这样：

```
<div class="<asp:Literal ID="uxCssClassLiteral" runat="server" />">
    <p>My content goes here</p>
</div> 
```

从后面的代码

```
public class MyControlType
{
    public string CssClass 
    {
        get { return this.uxCssClassLiteral.Text; }
        set { this.uxCssClassLiteral.Text = value; }
    }
} 
```

该页面将像这样处理控件：

```
public class MyPage 
{
    protected void Page_Load(Object sender, EventArgs e)
    {
        MyControlType controlA = new MyControlType();
        if (condition1 == true)
        {
            controlA.CssClass = "class-name-for-condition-1";
        }
        else 
        {
            controlA.CssClass = "class-name-for-other-condition";
        }
        this.Controls.Add(controlA);
    }
} 
```

# ruby-on-rails - 如何为 PDF 报告 Rails 指定字体大小

> ID：15083043
> 
> 赞同：0
> 
> 时间：2013-02-26T06:48:23.910
> 
> 标签：ruby-on-rails, pdf-generation, config, font-size

在我的 Rails 应用程序中，我使用 wkhtmltopdf 生成 PDF，配置设置在“ `config/initializers/pdfkit_config.rb`”中定义。你可以看到下面的代码。

```
PDFKit.configure do |config|
  config.wkhtmltopdf = '/home/user/wkhtmltopdf/wkhtmltopdf-amd64'
  config.default_options = {
    :encoding=>"UTF-8",
    :page_size=>"A4",
    :margin_top=>"0.25in",
    :margin_right=>"1in",
    :margin_bottom=>"0.25in",
    :margin_left=>"1in",
    :disable_smart_shrinking=>false
    }

end 
```

我们可以在这里定义报告的字体大小吗？谢谢 ：）-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:04:46.283

gem 使用工具[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)，并且仅传递该工具将接受的选项。由于它是一种将 HTML 转为 PDF 的工具，因此您应该使用 CSS 指定字体大小。

# php - 为 android inapp 计费设置服务器身份验证

> ID：15083045
> 
> 赞同：1
> 
> 时间：2013-02-26T06:48:35.060
> 
> 标签：php, android, mysql, in-app-purchase

是否有任何用于 php 服务器和 Android 客户端 setup.like 的示例代码在 [谷歌最佳实践](http://developer.android.com/google/play/billing/billing_best_practices.html)中提到？服务器客户端握手也应该存在。

有任何想法吗？我对设置 Php 和 android 都感兴趣。

# html - 简单的 CSS 对齐：在 Firefox 中有效，但在 Safari 或 Chrome 中无效？

> ID：15083048
> 
> 赞同：1
> 
> 时间：2013-02-26T06:48:38.967
> 
> 标签：html, css, frontend

[http://test.heyscout.com/video.html](http://test.heyscout.com/video.html)

我认为 CSS 代码看起来不错。当我在 Firefox 中打开它时，它可以正常打开并且视频排列整齐。但如果我在 Chrome 或 Safari 中打开它，它就会完全错位。任何想法为什么？

我觉得这可能与正确设置 display: inline-block 有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T06:53:16.253

这是因为`inline-block`元素是依赖于空白的..

如果您将`#space2`div 宽度减小到`49%`它们在 safari 和 chrome 上对齐

标记中的空白导致两个 div 之间存在一点差距，即使宽度加起来都是 100%。如果您摆脱空白并压缩 HTML 的那部分，使两个宽度都为 50% 工作正常.. 我刚刚在 chrome 版本 25.0.1364.97 中对其进行了测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:02:22.520

```
#space1 {
width: 50%;
height: 350px;
margin: 0;
display: inline-block;
float: left;
}

#space2 {
width: 50%;
height: 350px;
/* float: right; */
display: inline-block;
vertical-align: middle;
} 
```

# javascript - HTML5 的 javascript 使用大量 CPU，但不使用 putImageData

> ID：15083054
> 
> 赞同：0
> 
> 时间：2013-02-26T06:49:02.547
> 
> 标签：javascript, html, html5-canvas, pixel

`putImageData`我在实际放置图像数据时遇到了一些麻烦。

我检查`thegame.pbuf`了有效数据，它似乎是有效的。在 Opera 和 Firefox 中测试。

有人知道为什么它不显示颜色吗？

* * *

```
<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <style type="text/css">
            #drawingSurface {
                width:500px;
                height:500px;
                border: 5px solid black;
            }
        </style>
    </head>
    <body>
        <canvas id="drawingSurface">2000 and late</canvas>
        <script type="text/javascript">

            var thegame = {
                init: function (width, height) {
                    var canvas = document.getElementById("drawingSurface");
                    thegame.ctx = canvas.getContext("2d");
                    thegame.width = width;
                    thegame.height = height;
                    thegame.pbuf = thegame.ctx.createImageData(width, height);
                },
                drawBanner: function (text) {
                    thegame.ctx.font = "bold 64px Verdana";
                    thegame.ctx.fillStyle = "#302226";
                    thegame.ctx.textAlign = "center";
                    thegame.ctx.fillText(
                        text, 
                        thegame.width / 2, thegame.height * (1 / 4)
                    );
                },
                update: function () {
                    for (var j = 0; j < thegame.height; j++) {
                        for (var i = 0; i < thegame.width; i++) {
                            var loc = 4 * (j * thegame.width + i);
                            thegame.pbuf[loc + 0] = Math.random() * 256 | 0;
                            thegame.pbuf[loc + 1] = Math.random() * 256 | 0;
                            thegame.pbuf[loc + 2] = Math.random() * 256 | 0;
                            thegame.pbuf[loc + 3] = Math.random() * 256 | 0;
                            thegame.pbuf[loc + 0] = 255;
                        }
                    }
                },
                draw: function () {
                    thegame.ctx.putImageData(thegame.pbuf, 0, 0);
                    this.drawBanner("Random Colors");
                }
            };

            thegame.init(500, 500);

            //Rendering 
            var interval = 1000 / 60;
            (function () {
                var lastTime = 0;
                var vendors = ['ms', 'moz', 'webkit', 'o'];
                for (
                    var x = 0; 
                    x < vendors.length && !window.requestAnimationFrame;
                    ++x
                ) {
                    window.requestAnimationFrame = window[vendors[x] 
                        + 'RequestAnimationFrame'];
                    window.cancelAnimationFrame = window[vendors[x] 
                        + 'CancelAnimationFrame'] || window[vendors[x] 
                        + 'CancelRequestAnimationFrame'];
                }

                if (!window.requestAnimationFrame) { 
                    window.requestAnimationFrame = function (
                        callback, 
                        element
                    ) {
                        var currTime = new Date().getTime();
                        var timeToCall = Math.max(
                            0, 
                            16 - (currTime - lastTime)
                        );
                        var id = window.setTimeout(function () {
                            callback(currTime + timeToCall);
                        }, timeToCall);
                        lastTime = currTime + timeToCall;
                        return id;
                    };
                }
                if (!window.cancelAnimationFrame) { 
                    window.cancelAnimationFrame = function (id) {
                        clearTimeout(id);
                    };
                }
            }());

            (function gameloop() {
                setTimeout(function () {
                    window.requestAnimationFrame(gameloop);
                    thegame.draw();
                    thegame.update();
                }, interval);
            })();

        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:43:16.050

看起来像这些行：

```
 thegame.pbuf[loc + 0] = Math.random() * 256 | 0;
          thegame.pbuf[loc + 1] = Math.random() * 256 | 0;
          thegame.pbuf[loc + 2] = Math.random() * 256 | 0;
          thegame.pbuf[loc + 3] = Math.random() * 256 | 0;
          thegame.pbuf[loc + 0] = 255; 
```

应该是这样的：

```
 thegame.pbuf.data[loc + 0] = Math.random() * 256 | 0;
          thegame.pbuf.data[loc + 1] = Math.random() * 256 | 0;
          thegame.pbuf.data[loc + 2] = Math.random() * 256 | 0;
          thegame.pbuf.data[loc + 3] = Math.random() * 256 | 0;
          thegame.pbuf.data[loc + 0] = 255; 
```

# linux - 将一个变量一个一个地剪切到它的字段中

> ID：15083064
> 
> 赞同：1
> 
> 时间：2013-02-26T06:49:58.840
> 
> 标签：linux, bash

我有一个像这样的变量（制表符分隔）：

“A B C D”

我想逐个读取字段，但问题是字段数不固定，我的意思是变量可能不包含字段或 3 个字段或 100 个或更多字段。

我不知道我能处理它的最好方法。任何人都可以告诉我一个好方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T07:03:49.463

这是我到目前为止发现的：

```
$ x=$'a a\t*\t c\td\te' 
```

`$x`是我的包含制表符分隔字段的测试变量。

```
$ IFS=$'\t' 
```

单词仅由制表符分隔，而不是空格或换行符。

```
$ set -f 
```

禁用通配符。

```
$ for i in $x; do echo "$i"; done
a a
*
 c
d
e 
```

`$x`用 in 中的每个元素循环遍历单词in `$i`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T13:16:50.277

使用`read`命令。

```
IFS=$'\t' read -a fields <<< $'a b\tc d\te f'
for f in "${fields[@]}"; do
    echo "$f"
done 
```

输出是

```
a b
c d
e f 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T06:54:40.927

`cut -f#`像这样使用：

```
$ cat string
a       b       c       d
$ cut -f1 string
a
$ cut -f2 string
b
$ cut -f3 string
c
$ cut -f4 string
d 
```

...或在shell脚本中...

```
$ cat test.sh
#!/bin/sh

var="a  b       c       d"
echo $var | cut -d' ' -f1
echo $var | cut -d' ' -f2
echo $var | cut -d' ' -f3
echo $var | cut -d' ' -f4
$ ./test.sh
a
b
c
d 
```

... 或者可能 ...

```
$ cat test2.sh
#!/bin/sh

var="a  b       c       d"
SAVEIFS=$IFS
IFS=$(echo -en "\t")
for v in $var
do
    echo $v
done
IFS=$SAVEIFS
$ ./test2.sh
a
b
c
d 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T07:16:30.007

假设您有包含“abc d”的变量 Z。您可以创建一个从 Z 拆分的数组变量，如下所示：

```
ZA=( $Z ) 
```

然后各个元素可以通过`${ZA[0]}`等方式访问`${ZA[1]}`。

然后您可以对变量的每个部分执行一些操作：

```
for part in ${ZB[@]}; do
    echo $part  # or whatever you want to do with it
done 
```

这是一种稍微结构化的方法，因为您实际上可以在`for`语句中更直接地使用分词：

```
for part in $Z; do
    echo $part  # or whatever you want to do with it
done 
```

只要遇到 shell 变量 IFS 中的字符，就会进行分词。您可以根据需要更改字符。

`awk`请注意，这种拆分方法是在 shell 内部完成的，因此它比生成或外部程序要快得多`cut`，但它在 shell 之间的可移植性也较差。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T06:52:44.097

```
echo $variable|awk '{print $1}' #will print the first field
echo $variable|awk '{print $2}' #will print the second field
echo $variable|awk '{print $NF}' #will print the last field
echo $variable|awk '{print NF}' #will print the number of fields 
```

测试如下：

```
> setenv var "a b c d"
> echo $var|awk '{print $1}'
a
> echo $var | awk '{print $2}'
b
> echo $var | awk '{print $NF}'
d
> echo $var | awk '{print NF}'
4
> 
```

# wordpress - Wordpress 3.5.1 无法将媒体添加到页面。媒体库为空白

> ID：15083066
> 
> 赞同：1
> 
> 时间：2013-02-26T06:50:16.263
> 
> 标签：wordpress, wordpress-theming

请参考下图：

![空媒体库](../Images/6f8b14c54d5a2922e6bd8f9918577e25.png)

这是我所做的：

1.  从头开始卸载/重新安装 WordPress 3.5.1
2.  停用所有插件
3.  一次激活一个默认的 20 个 11/12 主题
4.  清除浏览器缓存
5.  尝试使用 Chrome 或 Safari

一切都无济于事。不幸的是，我似乎所做的一切都将我带到了一个空白的媒体库。请注意，我有几张图片已导入我的媒体库。我已经检查并仔细检查了这一点。

努力克服这一点。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T16:36:58.940

尽管我认为我已经搜索了我的每个插件，但我发现这确实不是 Ajax 或浏览器或操作系统的问题。这只是一个非常特定主题所需的插件问题。

我是怎么发现的：

```
1) Uninstalled my current wordpress installation
2) Re-installed wordpress 3.5.1
3) Checked whether or not i could add media to a page before changing the theme 
   (using the twenty-tweleve default theme. 
```

有效！！安装了我的特定主题所需的插件，但失败了。我选择了一个不同的主题，一切看起来都很好。

多谢你们！

# css-selectors - 如何在选择器中使用变量？

> ID：15083071
> 
> 赞同：2
> 
> 时间：2013-02-26T06:50:20.253
> 
> 标签：css-selectors, less

在某些情况下，我遇到了一个问题，即变量设置不正确。

```
@index: 10;
[data-grid*='cols-@{index}'] > * {
    background: red;
} 
```

我使用了一个`index`值为 10 的变量。我希望`@{index}`用 10 替换它，但事实并非如此。结果是`[data-grid*='cols-@{index}']`，我没有得到任何错误。

也许我需要以某种方式逃避它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T06:59:33.090

您有点回答了自己的问题：您应该将整个选择器视为一个字符串。这似乎有效：

```
@index: 10;
(~"[data-grid*='cols-@{index}'] > *")
{
    background: green;
} 
```

# java - SAX 解析器 - OutOfMemoryError：Java 堆空间

> ID：15083073
> 
> 赞同：1
> 
> 时间：2013-02-26T06:50:27.950
> 
> 标签：java, sax, out-of-memory, saxparser

我需要 SAX 解析，因为我想检查恶意格式错误的 XML。这是我第一次使用这个库。

我创建了一个 XML 文件 (18MB)，其中包含一个名称非常非常长的属性。

```
 <?xml version="1.0"?>
    <company>
        <staff>
            <firstname VERYLONGATTRIBUTENAME...VERYLONGATTRIBUTENAME="some value"> 
yong</firstname>
        <lastname>mook kim</lastname>
        <nickname>mkyong</nickname>
        <salary>100000</salary>
    </staff>
    <staff>
        <firstname>low</firstname>
        <lastname>yin fong</lastname>
        <nickname>fong fong</nickname>
        <salary>200000</salary>
    </staff>
</company> 
```

我只是这样调用 SAXParser

```
saxParser.parse("test.xml", handler); 
```

所有的事件处理程序都是空的。但是出现*OutOfMemoryError: Java heap space*。为什么会这样？我选择 SAX 是因为它是基于流/事件的，并且在处理此类问题时不会遇到问题（与 DOM 相比）。

编辑：我通过每次加倍来增加属性名称的长度。它一直有效，直到我达到这个 18MB 的文件。

编辑 2：堆栈跟踪

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOf(Arrays.java:2882)
    at java.lang.StringValue.from(StringValue.java:24)
    at java.lang.String.<init>(String.java:178)
    at com.sun.org.apache.xerces.internal.util.SymbolTable$Entry.<init>(SymbolTable.java:338)
    at com.sun.org.apache.xerces.internal.util.SymbolTable.addSymbol(SymbolTable.java:178)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityScanner.scanName(XMLEntityScanner.java:726)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanAttribute(XMLDocumentFragmentScannerImpl.java:1523)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanStartElement(XMLDocumentFragmentScannerImpl.java:1320)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2756)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:647)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
    at javax.xml.parsers.SAXParser.parse(SAXParser.java:395)
    at javax.xml.parsers.SAXParser.parse(SAXParser.java:277)
    at com.thundercloud.httpfilter.XMLParser.test(XMLParser.java:150)
    at com.thundercloud.httpfilter.HTTPInterceptor.main(HTTPInterceptor.java:34) 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:50:39.950

您可以在 Eclipse Run->Run Configuration 中找到您的内存设置。查找 Java 应用程序并找到您尝试运行的类的名称，选择它，单击“参数”选项卡。VM Arguments 部分的设置是什么？如果为空，请将以下值添加到 VM 参数部分。

```
-Xms512M -Xmx1024M 
```

此外，还有一个与 JDK6 有关的关于[SAX 解析器抛出 OutOfMemoryError](http://bugs.sun.com/view_bug.do?bug_id=6536111)的错误。受影响的版本是更新 14 之前的 JDK6。请检查您的 Java 版本以确保它不适用于您。

**编辑：**根据评论，我修改了我的答案并建议在 VM 参数部分添加以下 VM 设置

`-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath="c:\temp\oomdump.hprof"`.

然后您可以使用 Eclipse MAT [http://www.eclipse.org/mat/](http://www.eclipse.org/mat/)之类的工具来分析转储文件以查看真正的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T14:22:16.957

You may want to check out ScaleDOM, which allows to parse very large XML files: [https://github.com/whummer/scaleDOM](https://github.com/whummer/scaleDOM)

ScaleDOM has a small memory footprint due to lazy loading of XML nodes. It only keeps a portion of the XML document in memory and re-loads nodes from the source file when necessary.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:39:38.820

首先，我认为任何属性名称都不会那么长。尝试增加堆大小，然后检查。

```
java -jar -Xms<min_size> -Xmx<max_size> <ur_jar> 
```

# gdb - 如何像 windbg 一样制作 gdb 日志记录命令？

> ID：15083075
> 
> 赞同：3
> 
> 时间：2013-02-26T06:50:30.180
> 
> 标签：gdb, windbg

当您在 windbg ( ) 中打开日志记录时`.logopen`，日志记录输出将包括您在提示符中键入的内容`kd>`。但是当您在 gdb ( ) 中打开日志记录时`set logging on`，只会记录命令的输出，如何使 gdb 也在日志文件中回显/记录命令？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-07-22T06:41:41.143

如果您想在日志文件中记录命令详细信息，可以在 gdb 中设置命令跟踪以及日志记录：

```
 set trace-commands on
    set logging on 
```

这将产生所需的日志！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T06:52:10.290

这只是对结果的总结，功劳应该归于 dbrank0。

根据这个[线程](http://sourceware.org/ml/gdb-patches/2011-09/msg00210.html)，实现类似功能的补丁被拒绝。替代选项是记录终端会话，请参阅[脚本](https://unix.stackexchange.com/questions/15306/putty-like-session-log-for-gnome-terminal)和[其他选项](https://answers.launchpad.net/ubuntu/+source/gnome-terminal/+question/7131)。

# ipad - popoverviewController 中的 UITableView

> ID：15083079
> 
> 赞同：0
> 
> 时间：2013-02-26T06:50:49.993
> 
> 标签：ipad, xcode4.5, uipopovercontroller

我正在开发一个 ipad 应用程序，我需要一个在 popoverviewController 中的 UItableView。两天以来我为此付出了很多努力。我得到了 popoverviewController 但无法在其中获取 UItableView。而且我可以在 popover 周围看到很多阴影，并且我可以通过单击屏幕上的任何位置来关闭弹出框。

```
-(IBAction)btnClick
{
if([array count]!=0)
{
  UIViewController* popoverviewContent = [[UIViewController alloc] init]; //ViewController
            if(autocompleteTableView)
                [autocompleteTableView removeFromSuperview];

            autocompleteTableView = [[UITableView alloc] initWithFrame:CGRectMake(0,0,270,250) style:UITableViewStyleGrouped];
            autocompleteTableView.delegate = self;
            autocompleteTableView.dataSource = self;
            autocompleteTableView.scrollEnabled = YES;
            autocompleteTableView.backgroundColor = [UIColor lightTextColor];

            autocompleteTableView.backgroundView = nil;
            autocompleteTableView.backgroundColor = [UIColor whiteColor];

            autocompleteTableView.separatorStyle = UITableViewCellSeparatorStyleNone;
            [autocompleteTableView setSeparatorColor:[UIColor orangeColor]];

          popoverviewContent.view = autocompleteTableView;
                    UIPopoverController    *popoverController = [[UIPopoverController alloc] initWithContentViewController:popoverviewContent];
            popoverController.delegate=self;
            [popoverviewContent release];

            [popoverController setPopoverContentSize:CGSizeMake(320, 264) animated:NO];

            [popoverController presentPopoverFromRect:CGRectMake(410, 120,270, 250)inView:testscroll permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];

            [autocompleteUrls removeAllObjects];
            for(int i=0;i<[array count];i++)
            {
                NSString *curString = [[array objectAtIndex:i] valueForKey:@"FName"];
                [autocompleteUrls addObject:curString];

            }

        }
        [autocompleteTableView reloadData];
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T11:36:47.257

UITableViewController *tableViewController = [[UITableViewController alloc]init];

```
 UIPopoverController *popover = [[UIPopoverController alloc]initWithContentViewController: tableViewController];
    [popover setDelegate:self];

    self.popoverViewController = popover;

    CGRect buttonFrame = [someButton frame];
    [popover setPopoverContentSize:CGSizeMake(300, 260)];

    [popover presentPopoverFromRect: buttonFrame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

检查此实现以在弹出窗口中显示表格视图。

PS：提及所需的实施以更好地检查您的问题。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:55:29.523

我认为您的实现没有那么优化。所以让我优化它。它会解决你的问题。

```
if(!popoverviewController)
    {
        //Always best is to implement TableviewController than creating tableview and adding it to UIViewController
        tableViewController = [[UITableViewController alloc]init];

        //Should set contentsize of the presenting viewcontroller before adding to popovercontroller
        [tableViewController setPopoverContentSize:CGSizeMake(320, 264) animated:NO];

        Assign yout Tableview propertis here
        //Set the TableViewCOntroller object and PopOvercontroller object globally.
        popoverviewController = [[UIPopoverController alloc]initWithContentViewController: tableViewController];

        //Assign some properties of popover Controller here

    }
//This will always execute so you should dat actions and present the viewController
for(int i=0;i<[array count];i++)
    {
        NSString *curString = [[array objectAtIndex:i] valueForKey:@"FName"];
        [autocompleteUrls addObject:curString];

    }
[autocompleteTableView reloadData];
[popoverviewController presentPopoverFromRect: buttonFrame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

笔记：

不要删除您的视图并添加

始终重用 PopoverController 的视图

如果您不使用 ARC，则在必要时释放对象，否则不要

# magento - Magento直接通过菜单点击调用产品页面并默认显示该类别的第一个产品

> ID：15083081
> 
> 赞同：1
> 
> 时间：2013-02-26T06:51:08.143
> 
> 标签：magento, drop-down-menu

单击顶部标题菜单时，我需要直接显示产品视图页面而没有类别页面。详情如下：

1.  当用户单击菜单时，它会重定向到产品视图页面。

2.  它首先显示类别中产品的默认第一项。

在此先感谢，我需要它非常快请帮助！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:15:31.233

拥有一个类别的第一个产品：

```
$_product = Mage::getModel('catalog/product')->getCollection()->addCategoryFilter($category)->getFirstItem(); 
```

然后你有两种方法可以继续：

1°) 重写导航块以替换 getCategoryUrl() 函数来处理这个

```
public function getCategoryUrl($category)
{
    if ($category instanceof Mage_Catalog_Model_Category) {
        $cat = $category;
    } else {
        $cat  = $this->_getCategoryInstance()
            ->setData($category->getData());
    }

    $_product = Mage::getModel('catalog/product')->getCollection()->addCategoryFilter($cat)->getFirstItem();
    return $_product->getProductUrl();
} 
```

2°）不太干净，重写控制器（目录/类别/视图）以捕获第一个产品并重定向到目录/产品/视图或调整行为以适应产品视图控制器。这不干净，但允许在目录 url 上查看产品页面：

使用第一种方法，您将直接进入 www.yoursite.com/product.html 使用第二种方法，您可以在 www.yoursite.com/category.html 上看到产品（因为它不是真正的产品页面，您可以添加一些静态块等以允许更改产品。）

# ruby-on-rails - 设计多种用户类型的多态关联，形成部分麻烦

> ID：15083087
> 
> 赞同：3
> 
> 时间：2013-02-26T06:51:43.467
> 
> 标签：ruby-on-rails, devise

我一直在与部分表单字段的问题作斗争；错误是：

未定义的方法“输入”#

背景：

我已经从这个伟大的堆栈溢出帖子中建立了一个多态关联：

[使用 Ruby On Rails 的多个用户模型，并设计有单独的注册路线，但只有一个共同的登录路线](https://stackoverflow.com/questions/7299618/multiple-user-models-with-ruby-on-rails-and-devise-to-have-seperate-registration)

在这方面向 Vapire 和朋友 +1，干得好。

有几个错误与注册控制器中的覆盖创建方法有关。

为了清楚起见，我将包括拼图的各个部分：

移民：

```
def change
    add_column :users, :rolable_id, :integer 
    add_column :users, :user_type, :string 
end 
```

应用程序/模型/user.rb

```
class User < ActiveRecord::Base
  # the usual devise stuff....

  belongs_to :rolable, :polymorphic => true

  def coach?
    if user_type == 'Coach'
      true
    end
  end

  def player?
    if user_type == 'Player'
      true
    end
  end

end 
```

应用程序/模型/coach.rb

```
class Coach < ActiveRecord::Base
  attr_accessible :url
  has_one :user, :as => :rolable
end 
```

app/controllers/registrations_controller.rb （从 gi​​thub 设计源更新）

```
class RegistrationsController < Devise::RegistrationsController
  def create
    build_resource

    # customized code begin

    # crate a new child instance depending on the given user type
    child_class = params[:user][:user_type].camelize.constantize
    resource.rolable = child_class.new(params[child_class.to_s.underscore.to_sym])

    # first check if child instance is valid
    # cause if so and the parent instance is valid as well
    # it's all being saved at once
    valid = resource.valid?
    valid = resource.rolable.valid? && valid

    # customized code end

    if valid && resource.save    # customized code
      if resource.active_for_authentication?
        set_flash_message :notice, :signed_up if is_navigational_format?
        sign_up(resource_name, resource)
        respond_with resource, :location => after_sign_up_path_for(resource)
      else
        set_flash_message :notice, :"signed_up_but_#{resource.inactive_message}" if is_navigational_format?
        expire_session_data_after_sign_in!
        respond_with resource, :location => after_inactive_sign_up_path_for(resource)
      end
    else
      clean_up_passwords resource
      respond_with resource
    end
  end
end 
```

应用程序/配置/路由.rb

```
devise_for :users, :path_names => {
    :sign_in => 'login', 
    :sign_out => 'logout'
  }, :controllers => {
      :registrations => "registrations"
  }

  resources :users

  devise_scope :user do
    match 'player/sign_up' => 'registrations#new', :user => { :user_type => 'player' }
    match 'coach/sign_up' => 'registrations#new', :user => { :user_type => 'coach' }
  end 
```

共享注册表单，app/views/devise/registrations/new.html.erb

```
<h3>Sign up: 
<% if params[:user][:user_type].downcase.eql? 'coach' %>
  Coach account
<% else %>
  Player account
<% end %>
</h3>

<%
  params[:user][:user_type] ||= 'player'

  if ["player", "coach"].include? params[:user][:user_type].downcase
    child_class_name = params[:user][:user_type].downcase.camelize
    user_type = params[:user][:user_type].downcase
  else
    child_class_name = "Player"
    user_type = "player"
  end

  resource.rolable = child_class_name.constantize.new if resource.rolable.nil?
%>

<div class="row">
  <div class="span6">

    <%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => {:class => 'form-horizontal' } ) do |f| %>
      <%= my_devise_error_messages! %>

      <div class="form-inputs">

        <%= f.input :name, :wrapper => :prepend do %>
          <span class="add-on"><i class="icon-user"></i></span><%= f.input_field :name, :autofocus => true, :required => true, :size => '' %>
        <% end %>

        <%= f.input :nickname, :wrapper => :prepend do %>
          <span class="add-on"><i class="icon-tag"></i></span><%= f.input_field :nickname, :required => false, :size => '' %>
        <% end %>

        <%= f.input :email, :wrapper => :prepend do %>
          <span class="add-on"><i class="icon-envelope"></i></span><%= f.input_field :email, :required => true, :size => '' %>
        <% end %>

        <%= f.input :password, :wrapper => :prepend do %>
          <span class="add-on"><i class="icon-eye-close"></i></span><%= f.input_field :password, :required => true, :size => '' %>
        <% end %>

        <%= f.input :password_confirmation, :wrapper => :prepend do %>
          <span class="add-on"><i class="icon-eye-close"></i></span><%= f.input_field :password_confirmation, :required => true, :size => '' %>
        <% end %>

        <% # customized code begin %>
        <%= fields_for resource.rolable do |rf| %>
          <% render :partial => "#{child_class_name.underscore}_fields", :locals => { :f => rf } %>
        <% end %>

        <%= hidden_field :user, :user_type, :value => user_type %>
        <% # customized code end %>
      </div>

      <div class="form-actions">
        <%= f.button :submit, "Sign up", :class => 'btn-primary' %>
      </div>
    <% end %>
    <%= render "devise/shared/links" %>
  </div> 
```

现在，_coach 部分的工作版本：

```
<%= f.label :url %>
<%= f.text_field :url %> 
```

但我的问题是表单标签的 twitter 引导样式，正如您在上面的主表单中看到的那样。

当我在部分中尝试相同类型的标签时：

```
<%= f.input :url, :wrapper => :prepend do %>
  <span class="add-on"><i class="icon-globe"></i></span><%= f.input_field :url, :required => false %>
<% end %> 
```

错误是：# 的未定义方法“输入”

在我看来，我需要的部分对象超出了范围。如果是这样，为什么 f.text_field 可以在工作示例中看到。

困惑的是我。

任何帮助，阅读建议都会很棒

# jquery - jquery live 条件不工作

> ID：15083094
> 
> 赞同：0
> 
> 时间：2013-02-26T06:52:12.213
> 
> 标签：jquery, ajax, live

我正在使用 jquery，在正常情况下`$(document).ready`，表中的行和列被突出显示。但是当我用表调用数据时`$.ajax({})`，行和列没有突出显示。

我的代码就是这样

```
$('table td').hover( function() {
     $(this).css('background-color','white'); 
     $(this).siblings().css('background','#F0F8FF'); 
     var ind = $(this).index(); 
     $('table td:nth-child('+(ind+1)+')').css('background','#F0F8FF');
}, function() { 
     $('table td').css('background','white');
}).click( function() { 
     $(this).css("background","#9DFF9D");
}); 
```

有没有人知道解决方案..？

**在实时代码中**

```
$('table td').live("hover",function() {
        $(this).css('background-color','white');
        $(this).siblings().css('background','#F0F8FF');
        var ind = $(this).index();
        $('table td:nth-child('+(ind+1)+')').css('background','#F0F8FF');
    }); 
```

**我找到了解决方案**

我创建这样的功能

```
function HighlightTable(){
    //table hover column & row highlight    
    $('table td').hover(function() {
        $(this).css('background-color','white');
        $(this).siblings().css('background','#F0F8FF');
        var ind = $(this).index();
        $('table td:nth-child('+(ind+1)+')').css('background','#F0F8FF');
    },function(){
        $('table td').css('background','white');
    }).click(function(){$(this).css("background","#9DFF9D");});
} 
```

`$.ajax`调用时使用`HighlightTable()` `onsuccess`条件

```
$.ajax({
   url:'something.php'
   success: function(data){
      $('div').html(data); HighlightTable();
   }
}) 
```

就是这样，谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:19:57.090

`.on()`使用and `event delegation`to `closest existing parent`or`document`本身会更好。

```
$(document).on('hover', 'table td', function() {
     $(this).css('background-color','white'); 
     $(this).siblings().css('background','#F0F8FF'); 
     var ind = $(this).index(); 
     $('table td:nth-child('+Math.floor(ind+1)+')').css('background','#F0F8FF');
 }, function() { 
     $('table td').css('background','white');
 }).click( function() { 
     $(this).css("background","#9DFF9D");
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T06:58:15.193

我看不出来`.live()`，而且你首先使用`background-color`，剩下的你只使用`background`..这可能是问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:42:03.593

`.hover()`有它自己的处理程序： http: [//api.jquery.com/hover/](http://api.jquery.com/hover/)

如果您想做多件事，请将它们链接到`.on()`处理程序中，如下所示：

```
$(document).on(
{
    mouseenter: function() 
    {
        //stuff to do on mouseover
    },
    mouseleave: function()
    {
        //stuff to do on mouseleave
    }
}
, '.selector'); //pass the element as an argument to .on 
```

jQuery 支持`live()`事件的“悬停”，但只有一个事件处理函数：

```
$("document").live("hover",
     function()
     {

     }
); 
```

因此，或者，您可以提供两个函数，一个用于 mouseenter，另一个用于 mouseleave，正如我在上面写的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T07:45:12.367

尝试这个：

```
$(document).on({ 
    mouseenter: 
       function() 
       { 
       $(this).css('background-color', 'white');
       $(this).siblings().css('background-color', '#F0F8FF');
       var ind = $(this).index();
       $('table td:nth-child(' + (ind + 1) + ')').css('background-color', '#F0F8FF');
       }, 
    mouseleave: 
       function() 
       { 
       $('table td').css('background-color', 'white');
       } ,
    click:
       function() 
       { 
        $(this).css("background-color", "#9DFF9D");
       } ,
   }, "table td"
); 
```

请参阅示例[http://jsfiddle.net/7pvpJ/](http://jsfiddle.net/7pvpJ/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T06:59:22.820

```
$('table td').on("hover",function() {
    $(this).css('background-color','white');
    $(this).siblings().css('background','#F0F8FF');
    var ind = $(this).index();
    $('table td:nth-child('+(ind+1)+')').css('background','#F0F8FF');
}); 
```

检查此代码。

# android - 单独程序集中的活动和资源，引用应用程序找不到资源

> ID：15083099
> 
> 赞同：0
> 
> 时间：2013-02-26T06:52:19.907
> 
> 标签：android, xamarin.android

我创建了一个小应用程序，它有一个返回结果的 Activity。
该活动依赖于自定义适配器和一些 .axml 资源。

应用程序启动并运行后，
我尝试将该活动（包括所有资源）移至单独的 Android 库项目。

我现在可以编译单独的项目，但是一旦我
从主应用程序中引用它，主应用程序就不再编译
，因为它找不到单独项目的资源，
即使主应用程序不使用那些资源。

> “Example.App.Resource.Drawable”不包含 Magnify 的定义，
> “Example.App.Resource.Drawable”不包含 DeviceListItem 的定义
> 等...

这些错误发生在 Resource.Designer.cs

我的想法是将活动（及其所需的资源）
放在一个单独的项目/程序集中，以便我可以在其他项目中再次使用它。

即使我创建一个空白的 android 应用程序并引用程序集，也会发生错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:28:33.273

将资源移动到子项目中的支持​​时间并不长。（Java Android 项目传统上也不支持它）

目前支持还处于早期阶段。

如果您想尝试一下，那么[http://forums.xamarin.com/discussion/1435/troubles-using-resources-from-library-project中有一些很好的知识](http://forums.xamarin.com/discussion/1435/troubles-using-resources-from-library-project)

但总的来说，我建议你等待——我认为它今天还没有达到稳定的发布质量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T07:06:52.710

我目前正在做一个项目，我需要将所有`drawables`,`layouts`等放在一个单独的 DLL 中，以匹配我在 iOS 和 Windows 上的解决方案架构。我很难让它在 Android 上运行，但我终于让它运行起来了。需要注意的事情。

1.  您`Drawables`的 ,`Layouts`等都需要`lower-case`。
2.  确保您的类库 (dll) 以`Android 4.0`.
3.  确保没有同名的多个资源（ 、 等）`images`。`layouts`即使在不同的图书馆。
4.  确保您的 Main App 项目正在引用具有这些资源的外部项目。

如果您执行上述所有操作，它应该可以正常工作。希望它可以帮助别人。并感谢斯图尔特的链接，从中学到了很多:)

# php - 如何获取一个数字数组并获得这样的字符串：“1-3、5、6”？

> ID：15083100
> 
> 赞同：0
> 
> 时间：2013-02-26T06:52:24.617
> 
> 标签：php, arrays, string, format

我有一个相当奇怪的问题。我有一个应用程序，它需要一组介于 1 和 6 之间的数字。它们可以是任意数量的模式。从那里，我希望它们以特定的方式格式化。这有点难以解释，所以我只给你一些例子：

```
[1] -> "1" (duh!)
[1, 3] -> "1,3" (any two values will be separated by commas)
[1, 2, 3] -> "1-3" (consecutive series: lowest and highest values separated by a dash)
[1, 3, 4] -> "1, 3, 4" (non-consecutive series: separated by commas)
[1, 2, 3, 5, 6] -> 1-3, 5, 6" (mixed: consecutive series and non-consecutive series as you see) 
```

其他几个参数：

*   数组中的每一项都是唯一的
*   该列表将被预先排序

该应用程序是用 PHP 编写的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:29:14.407

这是一个功能，可以满足您的需求，并使用您的示例对其进行了测试。

PS：这是带有测试的键盘： http: [//codepad.org/hz9cHOvr#output](http://codepad.org/hz9cHOvr#output)

```
function getString($arr, $range = 1)
{
    if (!is_array($arr)) {
        return '';
    }

    // reset array keys
    $arr = array_values($arr);

    // simple cases
    if (count($arr) <= 2) {
        return implode(',', $arr);
    }

    $len = count($arr);
    $rez = '';

    for ($i = 0; $i < $len; $i ++) {
        $rangeLength = 1;
        $nextI = $i;
        $stop = 0;
        while (!$stop) { // loop to see if we find a range
            if ($arr[$nextI + 1] - $arr[$nextI] == $range) {
                $nextI ++;
                $rangeLength ++;
                $stop = 0;
            } else {
                $stop = 1;
            }
        }
        if ($rangeLength >= 3) { // either add the range
            $rez .= $arr[$i] . '-' . $arr[$nextI] . ', ';
            $i = $nextI;
        } else { // or the number
            $rez .= $arr[$i] . ', ';
        }
    }
    return substr($rez, 0, strlen($rez) - 2); // strip last 2 chars (the comma and space)
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:54:29.443

由于突然的 Internet 错误而延迟...

```
function compound(array $arr)
{
    $cache=array();
    $rst="";
    foreach($arr as $v)
    {
        if(empty($cache) || $v==end($cache)+1)
        {
            $cache[]=$v;
        }
        else
        {
            if(!empty($rst)) $rst.=",";
            if(count($cache)>2) $rst.=reset($cache)."-".end($cache);
            else $rst.=implode(",",$cache);
            $cache=array($v);
        }
    }
    if(!empty($rst)) $rst.=",";
    if(count($cache)>2) $rst.=reset($cache)."-".end($cache);
    else $rst.=implode(",",$cache);
    return $rst;
}
echo compound(array(1,2,3,5,6))."\n"; // gets "1-3,5,6"
echo compound(array(1,3,4,5,6)); // gets "1,3-6" 
```

[现场演示](http://3v4l.org/HdM0G)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T07:36:11.753

试试这个解决方案：

```
$array    = array(1,3,5,6);

function checkConsec($d) {
    for($i=0;$i<count($d);$i++) {
        if(isset($d[$i+1]) && $d[$i]+1 != $d[$i+1]) {
            return false;
        }
    }
    return true;
}

$temp     = array();
$res      = array();
for($i=0;$i<count($array);$i++){
    $temp[]  = $array[$i];
    if(checkConsec($temp) && count($temp) > 1){
       $res[$temp[0]] = $temp[0]."-".$temp[count($temp)-1];
    }else{
       $res[$array[$i]] = $array[$i];
       $temp     = array();
       $temp[]  = $array[$i];
    }
}

echo implode(",",$res); 
```

对于给定的输入 ( `array(1,3,5,6)`) 输出将是`1,3,5-6`

# ios - 我怎样才能使指南针的针头朝南？

> ID：15083101
> 
> 赞同：1
> 
> 时间：2013-02-26T06:52:25.643
> 
> 标签：ios, objective-c, xcode, core-location, cllocationmanager

我刚刚使用以下代码创建了一个指南针应用程序来获取航向，它运行良好，请注意指针随着用户航向旋转：

```
-(void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading{
    UIDevice *device = [UIDevice currentDevice];
    if (newHeading.headingAccuracy >0) {
        float magnaticHead = [self magneticHeading:newHeading.magneticHeading fromOrientation:device.orientation];
        float trueHead = [self trueHeading:newHeading.trueHeading fromOrientation:device.orientation];
         my= trueHead;

        magneticHeadingLabel.text = [NSString stringWithFormat:@"%f", magnaticHead];
        trueHeadingLabel.text = [NSString stringWithFormat:@"%f",trueHead];
        heading = -1.0f * M_PI * newHeading.magneticHeading / 180.0f;
      arrowImage.transform = CGAffineTransformMakeRotation(heading);

    } 
```

所以我想让针指向一个具有已知经度和纬度的特定位置，形成我当前的位置。因此，我使用以下代码计算我与已知位置之间的方位：

```
-(CGFloat)bearing:(double)latitude1:(double)longitude1:(double)latitude2:(double)longitude2{

    CLLocation *location = [locationManager location];
    CLLocationCoordinate2D user = [location coordinate];

    float dx = 21.422495 - user.latitude;
    float dy = 39.826201 - user.longitude;
     angle = RADIANS_TO_DEGREES(atan2(dy, dx));

    // Set Latitude and Longitude

    latitude1 = DEGREES_TO_RADIANS(latitude1);
    latitude2 = DEGREES_TO_RADIANS(latitude2);
    // Calculate Difference

    double longitudeDifference = DEGREES_TO_RADIANS(longitude2 - longitude1);
    // Returns the Sine and the Cosine of the specified angle

    double y = sin(longitudeDifference) * cos(latitude2);
    double x = cos(latitude1) * sin(latitude2) - sin(latitude1)* cos(latitude2) * cos(longitudeDifference);
    // Return Bearing
    double rTD =(RADIANS_TO_DEGREES(atan2(y, x))+360) ;
     CGFloat bearingValue = (float)((int)rTD % (int)360);

     return  bearingValue;

} 
```

但是当我使用返回的值来旋转针头时，针头不会动态旋转。

任何人都可以帮助我使针旋转并指向特定位置？？？请帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-18T10:17:28.943

存储返回的值

```
-(CGFloat)bearing:(double)latitude1:(double)longitude1:(double)latitude2:(double)longitude2; 
```

在如下变量中：

```
degrees = [ self bearing:here.latitude :here.longitude :21.422495 :39.826201 ]; 
```

之后在方法中：

```
-(void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading; 
```

获取头部并使针旋转：

```
needle.transform = CGAffineTransformMakeRotation((degrees-newHeading.trueHeading) * M_PI / 180); 
```

现在你的指针指向一个特定的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:27:53.323

您何时调用该方法：

```
`bearingValue = [self bearing:locationManager.location.coordinate.latitude :locationManager.location.coordinate.longitude :21.422495 :39.826201];` 
```

您需要在末尾添加它

```
-(void)locationManager:(CLLocationManager *)manager didUpdateHeading:(CLHeading *)newHeading 
```

经常更新针。

# javascript - 二维数组之和

> ID：15083103
> 
> 赞同：5
> 
> 时间：2013-02-26T06:52:31.557
> 
> 标签：javascript

`array[time, value];`我需要从这个二维数组中求和/求和？

```
var array =[ 
    [1361824790262, 90.48603343963623],
    [1361828390262, 500.18687307834625],
    [1361831990262, 296.05108177661896], 
    [1361835590262, 423.1198309659958], 
    [1361839190262, 11.86623752117157], 
    [1361842790262, 296.38282561302185], 
    [1361846390262, 424.31847417354584], 
    [1361849990262, 100.07041704654694], 
    [1361853590262, 434.8605388402939],
    [1361857190262, 434.8220944404602],
    [1361860790262, 183.61854946613312]
];
var sum = 0;
//console.log(array.length);
for (var i = 0; i < array.length; i++) {
    //console.log(array[i]);
    for (var j = 0; j < array[i].length; j++) {
        console.log(array[j][i]);
        sum += array[j][i];
    }
}
console.log(sum); 
```

[JsFiddle 的链接](http://jsfiddle.net/La2ER/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-26T07:13:09.413

您的问题标题暗示您想要对二维数组求和 - 这是您将如何做到的：

```
array.reduce(function(a,b) { return a.concat(b) }) // flatten array
     .reduce(function(a,b) { return a + b });      // sum 
```

仅对您在编辑中明确说明的值部分求和更容易：

```
array.map(function(v) { return v[1] })         // second value of each
     .reduce(function(a,b) { return a + b });  // sum 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T06:59:09.870

不需要两个循环。这将遍历数组并为您提供每个时间/值对。如果每个时间值对，只需对第一个索引（第二项）求和。

```
var sum = 0;
for(var i=0;i<array.length;i++){
    console.log(array[i]);
    sum += array[i][1];
}
console.log(sum); 
```

输出：

```
[1361824790262, 90.48603343963623] 
[1361828390262, 500.18687307834625]
[1361831990262, 296.05108177661896]
[1361835590262, 423.1198309659958] 
[1361839190262, 11.86623752117157] 
[1361842790262, 296.38282561302185]
[1361846390262, 424.31847417354584]
[1361849990262, 100.07041704654694]
[1361853590262, 434.8605388402939] 
[1361857190262, 434.8220944404602] 
[1361860790262, 183.61854946613312]
3195.7829563617706 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:06:56.860

```
 Sum_of_2d_array(arr)
    {
        int sum_time =0;
        int sum_value=0;

        for(i=0;i<arr.length;i++)
        {
            sum_time = sum_time + arr[i,0];
        }
        print(sum_time);

        for(i=0;i<arr.length;i++)
        {
            sum_value = sum_value + arr[i,1];
        }
        print(sum_value);
    }

    If I understood your question correctly. I think this is what you want. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T07:08:46.023

```
var arr = [[1361824790262, 90.48603343963623],
[1361828390262, 500.18687307834625],
[1361831990262, 296.05108177661896], 
[1361835590262, 423.1198309659958], 
[1361839190262, 11.86623752117157], 
[1361842790262, 296.38282561302185], 
[1361846390262, 424.31847417354584], 
[1361849990262, 100.07041704654694], 
[1361853590262, 434.8605388402939],
[1361857190262, 434.8220944404602],
[1361860790262, 183.61854946613312]];

var sum = 0;
 for(var i=0;i<arr.length;i++){
    for(var j=0;j<arr[i].length;j++){
        sum += arr[i][j];
    }
}
console.log(sum); 
```

这是获取总数的解决方案。我已经测试过了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-18T11:35:40.377

1.  循环遍历主数组。
2.  循环这些嵌套数组以访问数字。
3.  将这些数字添加到变量中。（和）

```
function sum(array) {
  let sum = 0

  for (let i = 0; i < array.length; i++) {
    for (let j = 0; j < array[i].length; j++) {
      sum = sum + array[i][j]
    }
  }
  return sum
}

console.log(
  sum([
    [1, 1],
    [2, 2],
    [5, 5],
  ])
) //22 
```

就是这样:) 祝你有美好的一天！

# android - 服务完成后执行语句

> ID：15083105
> 
> 赞同：0
> 
> 时间：2013-02-26T06:52:34.870
> 
> 标签：android

我有一项服务 VCardparsing 。我想在完成后执行一个方法。由于我的方法包含数据库查询，因此我无法将其直接包含在服务中。

我发现我可以检查服务是否从[这里](https://stackoverflow.com/questions/600207/android-check-if-a-service-is-running)运行。但这不符合我的目的。我该如何进行。

**编辑**

```
private void createFavorites() {

        DBAdapter db = new DBAdapter(this);
        db.open();
        Cursor favoriteCursor = db.getAllNumbers();

        Uri contactUri = ContactsContract.Data.CONTENT_URI;
        String[] contactProjection = new String[] {
                ContactsContract.Data._ID,
                ContactsContract.Data.DATA1,// gets number
                ContactsContract.Data.DATA2,// gets type
        };

        Cursor contactCursor = managedQuery(contactUri, contactProjection,
                null, null, null);

        CursorJoiner joiner = new CursorJoiner(favoriteCursor,
                new String[] { DBAdapter.KEY_NUMBER }, contactCursor,
                new String[] { ContactsContract.Data.DATA1 });

        MatrixCursor cursor = new MatrixCursor(new String[] { "number"}, 10);
        for (CursorJoiner.Result joinerResult : joiner) {
            switch (joinerResult) {
            case BOTH: // handle case where a row with the same key is in
                String id = contactCursor.getString(0);
                // String secret_identity = sipCursor.getString(1);
                cursor.addRow(new String[] { id });
                break;
            }
        }
        db.close();
        Log.d(LOG_TAG, "final favorite contact " + cursor.getCount() + favoriteCursor.getCount() + contactCursor.getCount());

    } 
```

我在这里要做的是，我已经有一个包含我最喜欢的数字的数据库。当我解析一个 vcf 时，如果其中一个 vcf 中存在该数字，我想将它们标记为收藏夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T06:55:51.887

您需要使用 a`IntentService`并在完成服务中的所有操作后将 a 发送`Message`到您的相关活动，然后执行该方法，顺便说一句，“由于我的方法包含数据库查询，我无法将其直接包含在服务中”是什么意思，您可以访问服务中的数据库也

# javascript - 无法设置第二个及其后克隆元素的 ID 和名称

> ID：15083106
> 
> 赞同：0
> 
> 时间：2013-02-26T06:52:38.090
> 
> 标签：javascript, jquery, asp.net-mvc

我在设置克隆元素的 id 时遇到问题。

首先我有一个局部视图 [mypartialview.cshtml] 有一个元素

```
@model mydata

@{
Layout = null;
}
 @Html.EditorFor(model => model.Details,"","supp_int_mat_det") 
```

现在在我的页面中我有一个原型

```
<div id="simtemplate" style="display: none">

    @Html.Partial("mypartialview", new mydata())

</div> 
```

我正在用javascript点击代码编写这段代码

```
 function addsupp() {
    var component = "simtemplate";
    var idiv = $("#simtemplate").clone(); //.html();
    idiv.removeAttr("style");

    var newid = "CompetencyParts[" + counter + "]";
    counter = counter + 1;

    if (previd == "") {
        previd = newid;
    }
    var fdiv = idiv.find("#supp_int_mat_det");
    fdiv.addClass("ckeditor");
    fdiv.attr("name", newid);
    fdiv.attr("id", newid);

    $("#panel").append(idiv);

    var html = '';
    var config = { width: 400, height: 200 };
   // CKEDITOR.replace(newid);

} 
```

我成功地设置了第一个克隆元素的 id 第二个或之后的克隆元素的 id 相同是第一个元素 ![在此处输入图像描述](../Images/50a2c537f4a401a3b5805c52d0ea509e.png) 谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:25:32.107

我知道了。实际上我忘记更改 div 的 id。在附加它时，它变成了“simtemplate”的副本，后来的克隆尝试克隆了这个重复的 div。因为重复的 div 不包含任何原始元素[在 simtemplate 中找到的那个]，所以 id 是没有改变。添加这行代码解决了我的问题。

```
var idiv = $("#lessonplan").clone(); //.html();
    idiv.removeAttr("style");

    var divid = "lessonplan" + getdivcount();

    idiv.attr("name", divid);
    idiv.attr("id", divid); 
```

# ios - UITextView 中的自动换行检测

> ID：15083109
> 
> 赞同：2
> 
> 时间：2013-02-26T06:52:51.250
> 
> 标签：ios, objective-c, uitextview, core-text, typesetting

我正在通过扩展 UITextView 来实现自定义富文本编辑器。当用户选择文本范围并打开“突出显示”菜单时，编辑器将为所选文本绘制蓝色背景：

```
- (CGRect)getRectAtRangePos:(NSInteger)pos {
    UITextPosition *beginning = self.beginningOfDocument;
    UITextPosition *start = [self positionFromPosition:beginning offset:pos];
    CGRect rect = [self caretRectForPosition:start];
    return [self convertRect:rect fromView:self.textInputView];
}

- (void)drawRange:(NSRange)range {
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetRGBFillColor(context, 0x16/255.f, 0x38/255.f, 0xfc/255.f, 0.5);
    CGRect startRect = [self getRectAtRangePos:range.location];
    CGRect endRect = [self getRectAtRangePos:range.location + range.length];

    CGFloat padding = 1;
    CGFloat margin = 1;

    if (ABS(endRect.origin.y - startRect.origin.y) < 5) {//They are in the same line
        CGRect wholeRect = CGRectMake(startRect.origin.x, startRect.origin.y + padding, endRect.origin.x - startRect.origin.x, startRect.size.height - 2 * padding);
        CGContextFillRect(context, wholeRect);
    }
    else {//The range occupies at least two lines
        CGRect firstRect = CGRectMake(startRect.origin.x, startRect.origin.y + padding, self.bounds.size.width - startRect.origin.x - margin, startRect.size.height - 2 * padding);
        CGContextFillRect(context, firstRect);
        CGFloat heightDiff = endRect.origin.y - (startRect.origin.y + startRect.size.height);
        if (heightDiff > 5) {//The range occupies more than two lines
            CGRect secondRect = CGRectMake(margin, startRect.origin.y + startRect.size.height + padding, self.bounds.size.width - 2*margin, heightDiff - 2* padding);
            CGContextFillRect(context, secondRect);
        }
        CGRect thirdRect = CGRectMake(margin, endRect.origin.y + padding, endRect.origin.x, endRect.size.height - 2* padding);
        CGContextFillRect(context, thirdRect);
    }
} 
```

当所选文本包含导致自动换行的长词时，蓝色背景看起来很难看。

![在此处输入图像描述](../Images/048bf34df0f3185fc9d8748f93e0587d.png)

有没有办法检测自动换行的位置？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T09:18:24.053

好的，最后我解决了这个问题。要检测自动换行或换行符，使用以下代码很简单：

```
#pragma UITextViewDelegate
- (void)textViewDidChange:(UITextView *)textView {
    if ( ABS(lastContentSize_.height - textView.contentSize.height) > 1) {
        NSLog(@"word wrap or line break!");
    }

} 
```

就这样：）

# hadoop - hadoop如何从地图作业生成输入

> ID：15083113
> 
> 赞同：2
> 
> 时间：2013-02-26T06:53:05.627
> 
> 标签：hadoop

我需要 Map 作业生成一组输入记录，这些记录应该提供给 Map 作业（通过 JobTracker？）。

我想不出解决方案，需要您的帮助。

更多细节：我打算写网络爬虫。初始根级网页将输入到 mapreduce 作业。Mapper/reducer 将获取网页并从页面收集链接。这些链接应被视为 mapreduce 作业的输入。所以我想将这些链接推送到jobtracker，以便可以像对第一个根节点所做的那样处理它们。我们可以添加一些终端条件（例如链接正则表达式匹配）。如果正则表达式匹配，则它不会被 map（或 reduce）任务放回 jobtracker。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:30:50.187

构建您的作业，以便映射器获取 URL 列表并为每个 URL 运行一堆爬虫。因此，您的第一次提交将是一个只有一个 URL 的文件。映射器的输出将是在页面上找到的链接列表。reducer 只会将映射器的输出合并到一个文件中。

实现此功能后，您可以使用上一个作业的输出开始下一个作业。在第一阶段，您将只运行映射器，因为您的 URL 列表将非常短，但最终您将能够利用整个集群。您可以尝试更改 HDFS 块大小以获得最佳利用率。或者，您可以简单地将最初的未充分利用视为启动成本，随着您的工作进展而消失。此外，如果您在 AWS 上运行，这对您来说可能是一件好事，因为您可以从非常小的集群开始，然后购买更多机器来加入您的集群。

此设置有一个陷阱，您需要注意不要访问您已经访问过的链接。如果 URL 列表很小，这可能很容易，但如果您尝试爬取整个互联网，则需要一些巧妙的解决方案。

# asp.net - 在更新时在 ASP.Net GridView 中格式化 DateTime，而不使用 c#

> ID：15083114
> 
> 赞同：1
> 
> 时间：2013-02-26T06:53:11.387
> 
> 标签：asp.net, datetime, gridview

参考下面的代码：

```
 <asp:TemplateField HeaderText="DOB" SortExpression="dob" >
                    <EditItemTemplate >
                        <asp:TextBox ID="TextBox3" Width="60px" runat="server" Text='<%# Bind("dob", "{0:d-M-yyyy}") %>'></asp:TextBox>

                        <asp:CalendarExtender ID="TextBox3_CalendarExtender"  runat="server" Enabled="True" Format="d-M-yyyy" TargetControlID="TextBox3">
                        </asp:CalendarExtender>

                    </EditItemTemplate>
                    <ItemTemplate>
                        <asp:Label ID="Label3" runat="server" Text='<%# Bind("dob", "{0:d-M-yyyy}") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField> 
```

我在 db 中有一个名为“dob”的 DateTime 列。我在绑定时将其格式化为“dM-yyy”。除非用户直接从 GridView 更新他的 DOB，否则一切正常。

因为，我在文本框中以“dM-yyyy”格式显示日期，而数据库服务器将其视为“mm-dd-yyyy”格式，那么当用户想要更新数据时就会出现问题。

顺便说一句，服务器提出了这个：

```
System.FormatException: String was not recognized as a valid DateTime. 
```

更新代码：

```
 UpdateCommand="update family_members_info set dob=@dob  where memberID=@memberID">              
            <UpdateParameters>                                
                <asp:Parameter Name="memberID" />                   
                <asp:Parameter Name="dob" Type="DateTime" />                    
            </UpdateParameters> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-06T09:59:07.997

在我的情况下，帮助添加

```
<globalization culture="cs-CZ" uiCulture="cs-CZ" /> 
```

web.config 文件中的标记。

资料来源：http: [//msdn.microsoft.com/en-us/library/system.globalization.cultureinfo (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:36:20.200

嗨使用日期格式作为

```
 <asp:TextBox ID="TextBox3" Width="60px" runat="server" Text='<%# Bind("dob", "{0:dd-MMM-yyyy}") %>'></asp:TextBox> 
```

谢谢

# architecture - 审查任务队列系统

> ID：15083118
> 
> 赞同：0
> 
> 时间：2013-02-26T06:53:21.500
> 
> 标签：architecture

我正在实施一个审查系统，用户上传需要审查的数据项，审查人员对其进行审查并提供意见。每个数据项需要由 3 名评审员评审。

项目应该或多或少地按顺序处理 - 理想情况下，项目 A 将被添加到系统中，审阅者 1,2 和 3 对其进行审阅并将其返回给用户。然后项目 B 被添加到系统中，审阅者 2、5、1 对其进行审阅，依此类推。当然，由于审稿人可以同时工作，而且审稿人超过3人，系统应该支持多个项目同时审稿（当然是由不同的审稿人）。

我不确定如何实现数据项存储库。要求是：

*   项目由多个作者添加。
*   每个项目由 3 个不同的读者阅读。
*   当读者拿一个项目时，它应该先拿读者没有看到的第一个项目。

我可以使用 SQL 数据库来实现所有这些，但它不会很好地扩展。

是否有现成的排队系统支持这样的事情（基本上，弹出第一个不符合条件的项目）？或者以某种方式将其添加到现有的排队系统中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:54:26.490

鉴于 SQL 数据库是许多企业级系统的基础，我认为“它不会很好地扩展”的说法是没有根据的。大型企业系统确实受益于专用排队系统，但这些系统正在处理例如零售银行一天内要处理的所有交易。我怀疑你可以有这么多要审查的项目和这么多的并发审阅者，以至于这个要求会给标准 SQL 数据库带来压力——6,000 名审阅者每小时处理 60 个项目只会提供几百个 tps。当然，我猜测您的需求规模，所以听到它们是什么可能会很有趣。

但是，我可以看到将其实现为一组队列的概念优点，然后是一个原则要求，即能够“给我这个队列中的下一个我尚未审查的项目”。

JMS 选择器允许您根据标题字段内容选择记录，因此将 Reviewer1 和 Reviewer2 标题字段添加到您的消息应该允许有效选择下一个可用项目。因此，我猜想任何兼容 JMS 的排队系统就足够了。

# python - python - 在文件中查找单词的出现

> ID：15083119
> 
> 赞同：12
> 
> 时间：2013-02-26T06:53:25.760
> 
> 标签：python, file, count, word

我正在尝试查找文件中出现的单词数。我有一个文本文件（`TEST.txt`），文件内容如下：

```
ashwin programmer india
amith programmer india 
```

我期望的结果是：

```
{ 'ashwin':1, 'programmer ':2,'india':2, 'amith ':1} 
```

我正在使用的代码是：

```
for line in open(TEST.txt,'r'):
    word = Counter(line.split())
    print word 
```

我得到的结果是：

```
Counter({'ashwin': 1, 'programmer': 1,'india':1})
Counter({'amith': 1, 'programmer': 1,'india':1}) 
```

谁能帮帮我吗？提前致谢 。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-26T06:59:37.173

使用`update`计数器的方法。例子：

```
from collections import Counter

data = '''\
ashwin programmer india
amith programmer india'''

c = Counter()
for line in data.splitlines():
    c.update(line.split())
print(c) 
```

输出：

```
Counter({'india': 2, 'programmer': 2, 'amith': 1, 'ashwin': 1}) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-26T06:57:13.693

```
from collections import Counter;
cnt = Counter ();

for line in open ('TEST.txt', 'r'):
  for word in line.split ():
    cnt [word] += 1

print cnt 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-26T06:55:45.200

您正在遍历每一行并每次调用 Counter 。您希望 Counter 运行整个文件。尝试：

```
from collections import Counter

with open("TEST.txt", "r") as f:
    # Used file context read and save into contents
    contents = f.read().split()
print Counter(contents) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-19T02:02:08.713

使用默认字典：

```
from collections import defaultdict 

def read_file(fname):

    words_dict = defaultdict(int)
    fp = open(fname, 'r')
    lines = fp.readlines()
    words = []

    for line in lines:
        words += line.split(' ')

    for word in words:
        words_dict[word] += 1

    return words_dict 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-20T15:42:06.453

```
FILE_NAME = 'file.txt'

wordCounter = {}

with open(FILE_NAME,'r') as fh:
  for line in fh:
    # Replacing punctuation characters. Making the string to lower.
    # The split will spit the line into a list.
    word_list = line.replace(',','').replace('\'','').replace('.','').lower().split()
    for word in word_list:
      # Adding  the word into the wordCounter dictionary.
      if word not in wordCounter:
        wordCounter[word] = 1
      else:
        # if the word is already in the dictionary update its count.
        wordCounter[word] = wordCounter[word] + 1

print('{:15}{:3}'.format('Word','Count'))
print('-' * 18)

# printing the words and its occurrence.
for  (word,occurance)  in wordCounter.items(): 
  print('{:15}{:3}'.format(word,occurance)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-21T14:52:41.070

```
f = open('input.txt', 'r')
data=f.read().lower()
list1=data.split()

d={}
for i in set(list1):
    d[i]=0

for i in list1:
    for j in d.keys():
       if i==j:
          d[i]=d[i]+1
print(d) 
```

# c++ - 除了 boost::pool 之外的 C++ 中的自定义池分配器

> ID：15083121
> 
> 赞同：3
> 
> 时间：2013-02-26T06:53:34.483
> 
> 标签：c++, boost, stl, malloc, allocator

我在 C++ 中有一个使用场景，我多次调用的函数会创建一些本地的、小但动态大小的向量。在分析我的程序后，我注意到在 std::vector::free() 中花费了过多的时间。这种问题的自然（C++ 式）解决方案似乎是将默认分配器切换到更适合我的使用场景的东西。特别是，在这里使用内存池策略似乎很有意义。然而，到目前为止， boost::pool_alloc 一直是个麻烦。我已经让它工作了，但是虽然在我的小但经常调用的函数（我们将调用该函数 f()）中分配更快，但它会导致调用 f() 的函数在返回之前挂起*非常很久了*。

然而更多的分析表明，所有的时间（在我厌倦等待之前的几十分钟）都花在了 pool_allocator::ordered_free() 上。我在一个简单的测试程序中重现了同样的行为（虽然不是那么极端），而且看起来，事实上，当大量构造的向量将它们的内存返回到单例池时，函数在返回之前会挂起很长时间.

如果有人知道避免这种行为的方法，或者知道另一个不会遇到这种问题的 C++ 池分配器，我将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:53:20.210

根据您的问题，我认为

*   这只是一个功能
*   向量的大小是有限的（你说它很小）
*   该函数不会被递归调用太频繁

如果是这种情况，请考虑使用堆栈分配的内存而不是动态分配的内存。您可以通过不使用向量而是使用`std::array<>`和一些大小指示符（如果存储的类型是可构造的）或一些固定大小和放置新的原始内存缓冲区来做到这一点，或者将后者包装到分配器类中以使用带有该分配器类的向量.

如果您的性能问题仅限于这么小的代码区域，我不会使用诸如 boost::pool 之类的通用内存管理工具，而是针对当前情况推出一些非常专业的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:25:36.733

我自己写过几次，一旦一切顺利，分配和释放都非常快。1\. 按大小创建池映射。2\. 每个池都有一个块的双向链表。3.每个块的前后都有额外的空间用于列表节点和所有者池引用、大小检查等 4.分配速度很快，因为您只需要查找大小>=您的块大小的第一个池并取消列出第一个条目。5\. 重新分配很快，因为你在内存块中有一个指向池的指针，所以你所要做的就是重新列出它。6.你可以在启动时创建一堆空池。然后，在每个分配上，首先尝试从池中取消列表。如果失败，那么 malloc() 代替。当块被释放时，将其添加回池中而不是释放它。7.一旦您的应用程序稳定运行，所有分配都将直接来自池链接列表，而释放将直接回到那里......超级快。8\. 当你的程序退出时，Free() 池中的所有内存。

# jquery - 根据更新的 ajax 内容扩展和缩小 div

> ID：15083122
> 
> 赞同：0
> 
> 时间：2013-02-26T06:53:40.980
> 
> 标签：jquery

我想创建一个 div 元素，该元素根据用户搜索查询返回的内容增长和缩小（上下滑动）。

我正在使用 JQuery 的 animate 属性，并且在大多数情况下，它是功能性的。当用户执行第一个查询时，我真的希望动画在淡入内容的同时执行 slideDown 效果。如果执行额外的搜索查询，则 div 将根据从服务器返回的内容增长（或缩小）。

现在，第一次搜索会产生不想要的从左到右的幻灯片效果。后续查询正确展开 div。

为了说明这个问题，请参阅 JSFiddle：http: [//jsfiddle.net/krpXk/](http://jsfiddle.net/krpXk/)

HTML：

```
<input type="text" id="search-term" />
<input type="button" id="submit-button" value="submit" />

<div id="limit">
    <div id="results"></div>
</div> 
```

Javascript：

```
$('#submit-button').click(function(e) {

     // ajax request
    $.ajax({
        async: true,
        cache: false,
        type: 'post',
        url: '/echo/html/',
        data: {
            html: '<p class="p-content">Search term: ' + $('#search-term').val() + '</p>'
        },
        dataType: 'html',
        success: function(data) {
            $('#results').append(data).show(function(){
                $('#limit').animate({
                    height:$("#results").height()
                },500);
            });  
        }
    });
}); 
```

CSS：

```
#results {
    background:#dfdfdf;
    display:none;
    width:300px;
}

#limit { 
    position: relative; 
    overflow: hidden;
    width:100%;
}

.p-content {
    margin:0 auto;
    width:100px;
} 
```

**更新：**

我发现答案很简单。只需将 #limit 高度设置为 0 即可强制向下滑动动画。

来自答案：“请注意，我在 CSS 中为 #limit 容器指定了 0px 的显式高度，以强制执行初始动画。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:39:33.150

如果希望内容在容器向下滑动的同时淡入，可以放一些选择性逻辑来处理处理内容不透明度的初始情况。

请注意，我在 CSS 中为`#limit`容器指定了明确的高度，`0px`以强制执行初始动画。

```
var wasOriginallyEmpty = $('#results').is(':empty');

$('#results').append(data);

if (wasOriginallyEmpty) {
    $('#results').contents().css('opacity', 0);
}

$('#limit').animate({
    height: $('#results').height()
}, 500);

if (wasOriginallyEmpty) {
    $('#results').contents().animate({
        'opacity': 1
    }, 1000);
} 
```

[jsfiddle](http://jsfiddle.net/5Vht6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:12:07.537

`**[DEMO](http://jsfiddle.net/krpXk/2/)**`

你可以`animate`上`height`到`scrollHeight`.

`JS:`

```
$('#submit-button').click(function(e) {

     // ajax request
    $.ajax({
        async: true,
        cache: false,
        type: 'post',
        url: '/echo/html/',
        data: {
            html: '<p class="p-content">Search term: ' + $('#search-term').val() + '</p>'
        },
        dataType: 'html',
        success: function(data) {
            var $limit = $('#limit').append(data);
            $limit.animate({'height': $limit[0].scrollHeight},500);
        }
    });
}); 
```

`CSS:`

```
#limit { 
    position: relative;  
    width:100%; 
    background:#dfdfdf;    
    overflow: hidden;
    height: 0;
}

.p-content {
    margin:0 auto;
    width:100px; 
} 
```

`HTML:`

```
<input type="text" id="search-term" />
<input type="button" id="submit-button" value="submit" />

<div id="limit"> 
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:23:58.210

使用`slideDown(function()`代替`show(function()`

# r - 数据帧的滚动拖欠计算

> ID：15083124
> 
> 赞同：0
> 
> 时间：2013-02-26T06:53:45.437
> 
> 标签：r, rolling-computation

我是 R 新手，并试图通过滚动方式计算 3 个月的拖欠。

我的数据框由（CID、acquistion_date 和 delinquient）组成

我正在尝试创建一个新的数据帧，其中附加了第 4 列（Roll_deliquency），即过去 3 个月的拖欠计数）。一旦我们有了新的客户 ID，我们就会重新开始该客户的第一笔交易。Roll_Deliquiency 是**过去 3 个月** **的**拖欠总数。

预期结果如下

```
CID AQ_DATE   Delinquient Roll_Deliquiency
103   2007/03/18    1       0
103   2007/04/03    0       1
103   2007/04/17    0       1
103   2007/05/03    0       1
103   2007/05/17    1       1
103   2007/06/02    1       2
103   2007/06/16    1       3
103   2007/07/02    1       3
103   2008/01/03    1       0
103   2008/01/17    1       1
103   2008/02/02    0       2
103   2008/02/16    1       2
105   2007/01/01    1       0
105   2007/01/11    1       1 
105   2007/02/10    1       2
105   2007/02/14    0       3
105   2007/02/17    1       3    
105   2007/02/17    1       4
105   2007/02/17    1       5
105   2007/04/02    0       5  
105   2007/04/10    1       5 
```

有人可以帮我写R代码吗？我尝试使用滚动应用，但无法根据需要进行自定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:06:49.063

这可能不是您想要的，但这是我目前对问题的理解所能做的最好的事情。对于数据文件中的每个人和每个日期，我都及时回溯了 90 天，并总结了拖欠的数量。我的结果存储在 vector 中`my.count`。我的结果不匹配`Roll_Deliquiency`。但是，也许这会让你开始。如果您提供有关如何`Roll_Deliquiency`计算的其他信息，我也许可以修改下面的代码。我也可能很快清理一下代码。它目前包括一些我最终没有用来获得答案的变量。

```
df.1 <- read.table(text='
CID AQ_DATE   Delinquient Roll_Deliquiency
103   2007/03/18    1       0
103   2007/04/03    0       1
103   2007/04/17    0       1
103   2007/05/03    0       1
103   2007/05/17    1       1
103   2007/06/02    1       2
103   2007/06/16    1       3
103   2007/07/02    1       3
103   2008/01/03    1       0
103   2008/01/17    1       1
103   2008/02/02    0       2
103   2008/02/16    1       2
105   2007/01/01    1       0
105   2007/01/11    1       1
105   2007/02/10    1       2
105   2007/02/14    0       3
105   2007/02/17    1       3
105   2007/02/17    1       4
105   2007/02/17    1       5
105   2007/04/02    0       5
105   2007/04/10    1       5', header=T, colClasses=c('character', 'character', 'integer', 'integer'))

df.1$AQ_DATE2 <- as.Date(df.1$AQ_DATE, "%Y/%m/%d")

df.1$running.count = sequence(rle(df.1$CID)$lengths)
df.1

max.value <- data.frame(id.max = with(df.1, tapply(running.count, CID, function(x) x[length(x)])))
max.value

max.value$CID <- row.names(max.value)
max.value

all.data  <- merge(max.value, df.1, by=c('CID'), all = TRUE)
all.data

my.count <- rep(0, nrow(all.data))

m <- 1

for(i in length(unique(all.data$CID)):1) {

  all.data.i <- subset(all.data, all.data$CID == max.value$CID[i])

    print(all.data.i)

     for(j in nrow(all.data.i):1) {

        for(k in j:1) {

           if(((j-k) >  1) &
             (as.numeric(all.data.i$AQ_DATE2[j] - all.data.i$AQ_DATE2[k+1]) <= 90)  &    
             (as.numeric(all.data.i$AQ_DATE2[j] - all.data.i$AQ_DATE2[k  ]) >  90)) my.count[m] = sum(all.data.i$Delinquient[(k+1):j]) 

           if(((j-k) == 1) &
              as.numeric(all.data.i$AQ_DATE2[j] - all.data.i$AQ_DATE2[k])   >  90)  my.count[m] = all.data.i$Delinquient[j]

           if((k == 1) &
              as.numeric(all.data.i$AQ_DATE2[j] - all.data.i$AQ_DATE2[1])   <= 90)  my.count[m] = sum(all.data.i$Delinquient[1:j])

         } 

     m = m + 1

     }     

}

my.count

 [1] 6 5 6 5 4 3 3 2 1 3 2 2 1 4 4 3 2 1 1 1 1 
```

# django - 为外键设置 default=1 应该如何工作？

> ID：15083125
> 
> 赞同：-1
> 
> 时间：2013-02-26T06:53:51.330
> 
> 标签：django

我有一个模型`Order`，

```
class Order(SmartModel):
    #each individual status
    SUBMITTED = 1 # the credit card was valid or mobilemoney was recieved.It is ready for us to process the order
    PROCESSED = 2 # After submitted orders are reviewed, we can mark them as processed, letting deliverers know order is ready to be shipped
    DELIVERED = 3 # the order has been processed and approved by the adminstrator(in this case us), it is delivered.
    PICKED_UP =4 # the order has been processed and is picked up by customer
    CANCELLED = 5 # Customer called the company and decided they didnt want to go through with the order either by phone or email.

    # SET OF POSSIBLE STATUSES
    ORDER_STATUSES = ((SUBMITTED,'Submitted'),(PROCESSED,'Processed'),(DELIVERED,'Delivered'),(PICKED_UP,'picked_up'),(CANCELLED,'Cancelled'),)
    #Order info
    date = models.DateTimeField(auto_now_add=True)
    status = models.IntegerField(choices=ORDER_STATUSES, default=SUBMITTED)
    customer = models.ForeignKey(Customer,help_text="The customer who made this order",default=1)
    restaurant = models.ForeignKey(Restaurant,default = '1',help_text="The restaurant the customer order from") 
```

如您所见，我已将`customer a foreignkey`默认设置为`1`. 这是`Customer`模型

```
 class Customer(SmartModel):
        #contact info
        email = models.EmailField(max_length=50,help_text="Needed as alternative")
        mobile = PhoneNumberField(max_length=20,default='+25078######',help_text="Needed to communicate and confirm payment from mobile money")

        #billing information
        billing_name= models.CharField(max_length=50,help_text="Needed so we can deliver to the right individual")
        billing_address= models.CharField(max_length=50,help_text="Needed for delivery purposes, should be office address.")    
        billing_city = models.CharField(ma

x_length=50,help_text="F4L services are only in selected cities.")

    def __unicode__(self):
        return "%s %s %s %s %s" % (self.email,self.mobile,self.billing_name,self.billing_address,self.billing_city) 
```

这是我验证表格的方式。

```
def show_checkout(request):
    if order.is_empty(request):
        cart_url = urlresolvers.reverse('order_index')
        return HttpResponseRedirect(cart_url)
    if request.method == 'POST':
        postdata = request.POST.copy()
        form = forms.CheckoutForm(request.POST,postdata)
        if form.is_valid():
            anon_user = User.objects.get(id=settings.ANONYMOUS_USER_ID)
            obj = form.save(commit=False)
            obj.created_by = anon_user
            obj.modified_by = anon_user
            obj.save()
            if postdata['submit'] == 'place order':
                reciept_url = urlresolvers.reverse('checkout_reciept')
                return HttpResponseRedirect(reciept_url)
    else:
        form = forms.CheckoutForm
    context = {
        'form':form,
    }
    return render_to_response('checkout/checkout.html',context,context_instance=RequestContext(request)) 
```

在此功能中，我继续创建客户并将其添加到客户，

```
def add_to_order(request,obj):  
    postdata = request.POST.copy()
    #get quantity added, return 0 if empty
    quantity = postdata.get('quantity',0)
    # fetch the item or return  missing page error_message
    i = get_object_or_404(Item,pk=obj.id)
#   order = get_object_or_404(Order,pk=obj.id)
    # get items in order
    order_items = get_order_items(request)
    item_in_orders = False
    # check to see if item is already in order
    for order_item in order_items:
        if order_item.item.id == i.id:
            #update the quantity if found
            order_item.augment_quantity(quantity)
            item_in_orders = True
    if not item_in_orders:
        # creat and save a new order item
        anon_user = User.objects.get(id=settings.ANONYMOUS_USER_ID)
        try:
#           customer = Customer.objects.get(pk=customer_id)
            order= Order.objects.get(pk=order_id)
#           restaurant = Restaurant.objects.get(pk=restaurant_id)
        except:
            customer = Customer.objects.create(created_by=anon_user,modified_by=anon_user)
#           customer.save()
#           import pdb;pdb.set_trace()
#           restaurant = Restaurant(created_by=anon_user,modified_by=anon_user)
#           restaurant.save()
            order = Order.objects.create(customer=customer,created_by=anon_user,modified_by=anon_user)
#           order.save()
#       import pdb;pdb.set_trace()  
        oi=OrderItem.objects.create(order=order,shopping_id=_shopping_id(request),
                                          quantity=quantity,
                                          item=i,
                                          created_by=anon_user,
                                          modified_by=anon_user)
        oi.save() 
```

创建新订单项时调用此函数

```
def show_item(request,id):
    # need to evaluate the HTTP method
    if request.method == 'POST':
#       import pdb;pdb.set_trace()
        a = Item.objects.get(pk=id)
        form = PartialOrderItemForm(request.POST,instance=a)
        # check validation of posted data
        if form.is_valid():
            order.add_to_order(request,a)
            # if test cookie worked, get rid of it
            if request.session.test_cookie_worked():
                request.session.delete_test_cookie()
            url =urlresolvers.reverse('order_index')
            # redirect to order page
            return HttpResponseRedirect(url)
    else:
        form = PartialOrderItemForm()
    request.session.set_test_cookie()
    context={
#       'categories':categories,
        'form':form,
#       'menu':menu,

    }
    return render_to_response('item.html',context,context_instance=RequestContext(request)) 
```

问题是当我在浏览器中提交客户表单时，在我的管理员中`customer`，每次不同的提交总是返回相同的数据。

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T06:58:15.607

`default`只是意味着“嘿，如果我没有明确设置值，请使用它”。

因此，在您的示例中，`default=1`是告诉 Django（或更具体地说，是数据库），除非您专门传递或设置 Order.customer 的值，否则它应该将其设置为具有主键的客户记录`1`。

我在您的视图中没有看到您正在创建客户对象并将其设置到`Order`.

# javascript - 使用第三方功能评估 javascript

> ID：15083126
> 
> 赞同：0
> 
> 时间：2013-02-26T06:53:59.970
> 
> 标签：javascript

我正在使用来自第 3 方库的 dateFormat() 函数。

这个想法是在 javascript 表达式中使用该函数并调用 eval(javascript)

javascript是

```
var createDate = "11/20/2013 12:30";
dateFormat(createDate, "MM dd at hh:mm a"); 
```

这说明 dateFormat 不是一个函数。我如何让 eval 知道 dateFormat()？

第三个库包含在发生此逻辑的 html 页面中（使用 GWT）。

请不要提供不使用 eval() 的建议。我在这里别无选择。

# iphone - 使用 Restkit for IOS 进行对象映射期间应用程序意外崩溃

> ID：15083133
> 
> 赞同：4
> 
> 时间：2013-02-26T06:54:34.807
> 
> 标签：iphone, objective-c, ios5, core-data, restkit

我正在为我的应用程序使用 restkit 0.10.2。我有不同的表，其中数据从服务器获取并存储到数据库中。

我有三张表，一张主表和两张子表。两个子表都与主表具有一对一的关系。

![在此处输入图像描述](../Images/5c8d85463e48299f0d182c82ff7a8a99.png)

我有两个不同的视图控制器 V1 和 V2，我在其中调用 web 服务并将数据映射到表 Child1 和 Child2 中。Child1、Child2 和 Master 表将 userID 作为主键。

当我单击 ViewController V1/V2 时，正在执行以下过程。

```
1) Getting Data from Server.
2) Delete UserID from Child1/Child2 table(if any), not deleting details in Master Table. Delete Rule is nullify.
3) Map userID to Child1/Child2 Table and Other Details(name, age, userId etc) with Master Table. 
```

映射代码：

```
RKManagedObjectMapping *userDetailMapping = [RKManagedObjectMapping mappingForClass:[Master class] inManagedObjectStore:manager.objectStore];
        [userDetailMapping mapKeyPath:@"uid" toAttribute:@"userID"];
        [userDetailMapping mapKeyPath:@"ne" toAttribute:@"name"];
        [userDetailMapping mapKeyPath:@"email" toAttribute:@"email"];
[manager.mappingProvider setMapping:userDetailMapping forKeyPath:@"users"];

        userDetailMapping.primaryKeyAttribute = @"userID";

RKManagedObjectMapping *userkeyMapping1 = [RKManagedObjectMapping mappingForClass:[Child1 class] inManagedObjectStore:manager.objectStore];
        [userkeyMapping1 mapKeyPath:@"uk" toAttribute:@"userID"];
        userkeyMapping1.primaryKeyAttribute = @"userID";
        [manager.mappingProvider setMapping:userkeyMapping1 forKeyPath:@"usk1"];

 RKManagedObjectMapping *userkeyMapping2 = [RKManagedObjectMapping mappingForClass:[Child2 class] inManagedObjectStore:manager.objectStore];
        [userkeyMapping2 mapKeyPath:@"uk" toAttribute:@"userID"];
        userkeyMapping2.primaryKeyAttribute = @"userID";
        [manager.mappingProvider setMapping:userkeyMapping2 forKeyPath:@"usk2"]; 
```

连接关系

```
[userkeyMapping1 hasOne:@"userDetail" withMapping:userDetailMapping];
        [userkeyMapping1 connectRelationship:@"userDetail" withObjectForPrimaryKeyAttribute:@"userID"];
        [userDetailMapping hasOne:@"userDetail1" withMapping:userkeyMapping1];
        [userDetailMapping connectRelationship:@"userDetail1" withObjectForPrimaryKeyAttribute:@"userID"];

[userkeyMapping2 hasOne:@"userDetail" withMapping:userDetailMapping];
        [userkeyMapping2 connectRelationship:@"userDetail" withObjectForPrimaryKeyAttribute:@"userID"];
        [userDetailMapping hasOne:@"userDetail2" withMapping:userkeyMapping2];
        [userDetailMapping connectRelationship:@"userDetail2" withObjectForPrimaryKeyAttribute:@"userID"]; 
```

从 DB 中删除 Child1 和 Child2 的对象

```
- (void)clearUserKeyTable {
    RKObjectManager *manager = [[RestKit sharedDataManager] objectManager];

    NSManagedObjectContext *context = [Child1 currentContext];

        NSArray *objects = [Child1 findAll];
        for (Child1 *object in objects) {
            [context deleteObject:object];
        }

        NSError *saveError = nil;
        [context save:&saveError];
        NIDPRINT(@"All records are deleted - %@", saveError);
        for (Child1 *object in objects) {
            [context refreshObject:object mergeChanges:NO];
        }
        [context save:&saveError];
        NIDPRINT(@"All records are deleted in Nearby- %@", saveError);
} 
```

注意：两个视图 1 将在 3 分钟后自动刷新。因此，无论屏幕如何，获取和映射操作都将执行。

问题：有时我在 VC1 中手动刷新页面时，它会崩溃。我不知道确切的原因。在我的模拟器中，它显示为

```
'NSObjectInaccessibleException', reason: 'CoreData could not fulfill a fault for '0x8a5b410 <x-coredata:/XXXX-XXXX-XXXX/Child1/p128>. 
```

当我使用我的设备进行调试时，它会引发异常，这是一个崩溃日志

```
Path:            /var/mobile/Applications/25FD9991-8134-476D-AADE-66D95BFC3C5B/MyApp.app/MyApp
Identifier:      MyApp
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2013-02-25 23:17:27.645 -0600
OS Version:      iOS 6.0.1 (10A523)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Crashed Thread:  10

Last Exception Backtrace:
0   CoreFoundation                  0x3147329e __exceptionPreprocess + 158
1   libobjc.A.dylib                 0x3233197a objc_exception_throw + 26
2   CoreData                        0x32741b38 _PFFaultHandlerLookupRow + 1472
3   CoreData                        0x327430fa _PF_FulfillDeferredFault + 198
4   CoreData                        0x3274ac0c _PF_ManagedObject_WillChangeValueForKeyIndex + 64
5   CoreData                        0x3275532e _sharedIMPL_setvfk_core + 106
6   CoreData                        0x327497c2 _PF_Handler_Public_SetProperty + 54
7   CoreData                        0x32750a4c -[NSManagedObject(_NSInternalMethods) _maintainInverseRelationship:forProperty:oldDestination:newDestination:] + 328
8   CoreData                        0x32751216 -[NSManagedObject(_NSInternalMethods) _didChangeValue:forRelationship:named:withInverse:] + 1286
9   CoreData                        0x3275a82e -[NSManagedObjectContext observeValueForKeyPath:ofObject:change:context:] + 318
10  Foundation                      0x32fd4eac NSKeyValueNotifyObserver + 268
11  Foundation                      0x32fd4b06 NSKeyValueDidChange + 330
12  Foundation                      0x32faeec6 -[NSObject(NSKeyValueObserverNotification) didChangeValueForKey:] + 90
13  CoreData                        0x3274ae26 _PF_ManagedObject_DidChangeValueForKeyIndex + 98
14  CoreData                        0x327553a2 _sharedIMPL_setvfk_core + 222
15  CoreData                        0x327497c2 _PF_Handler_Public_SetProperty + 54
16  CoreData                        0x32750ad6 -[NSManagedObject(_NSInternalMethods) _maintainInverseRelationship:forProperty:oldDestination:newDestination:] + 466
17  CoreData                        0x32751216 -[NSManagedObject(_NSInternalMethods) _didChangeValue:forRelationship:named:withInverse:] + 1286
18  CoreData                        0x3275a82e -[NSManagedObjectContext observeValueForKeyPath:ofObject:change:context:] + 318
19  Foundation                      0x32fd4eac NSKeyValueNotifyObserver + 268
20  Foundation                      0x32fd4b06 NSKeyValueDidChange + 330
21  Foundation                      0x32faeec6 -[NSObject(NSKeyValueObserverNotification) didChangeValueForKey:] + 90
22  CoreData                        0x3274ae26 _PF_ManagedObject_DidChangeValueForKeyIndex + 98
23  CoreData                        0x327553a2 _sharedIMPL_setvfk_core + 222
24  CoreData                        0x327497c2 _PF_Handler_Public_SetProperty + 54
25  CoreData                        0x3274bd1e -[NSManagedObject setValue:forKey:] + 86
26  Foundation                      0x32faf71e -[NSObject(NSKeyValueCoding) setValue:forKeyPath:] + 294
27  MyApp                       0x0019aa5c -[RKManagedObjectMappingOperation connectRelationship:] (RKManagedObjectMappingOperation.m:100)
28  MyApp                       0x0019af16 __55-[RKManagedObjectMappingOperation connectRelationships]_block_invoke_0 (RKManagedObjectMappingOperation.m:115)
29  Foundation                      0x32fdc534 -[NSBlockOperation main] + 196
30  Foundation                      0x32fd3db4 -[__NSOperationInternal start] + 836
31  MyApp                       0x001b063c -[RKMappingOperationQueue waitUntilAllOperationsAreFinished] (RKMappingOperationQueue.m:53)
32  MyApp                       0x001b6496 -[RKObjectMapper performMapping] (RKObjectMapper.m:368)
33  MyApp                       0x001b14f0 -[RKObjectLoader mapResponseWithMappingProvider:toObject:inContext:error:] (RKObjectLoader.m:227)
34  MyApp                       0x001b18c2 -[RKObjectLoader performMapping:] (RKObjectLoader.m:271)
35  MyApp                       0x001b1a9e __47-[RKObjectLoader performMappingInDispatchQueue]_block_invoke_0 (RKObjectLoader.m:282)
36  libdispatch.dylib               0x33a6311a _dispatch_call_block_and_release + 6
37  libdispatch.dylib               0x33a62996 _dispatch_queue_drain$VARIANT$up + 142
38  libdispatch.dylib               0x33a62890 _dispatch_queue_invoke$VARIANT$up + 32
39  libdispatch.dylib               0x33a71210 _dispatch_root_queue_drain + 188
40  libdispatch.dylib               0x33a713b4 _dispatch_worker_thread2 + 80
41  libsystem_c.dylib               0x33aa1a0c _pthread_wqthread + 356
42  libsystem_c.dylib               0x33aa18a0 start_wqthread + 4 
```

线程 10 崩溃

```
Thread 10 name:  Dispatch queue: org.restkit.ObjectMapping
Thread 10 Crashed:
0   libsystem_kernel.dylib          0x30661350 __pthread_kill + 8
1   libsystem_c.dylib               0x33aca11e pthread_kill + 54
2   libsystem_c.dylib               0x33b0696e abort + 90
3   libc++abi.dylib                 0x314e7d4a abort_message + 70
4   libc++abi.dylib                 0x314e4ff4 _ZL17default_terminatev + 20
5   libobjc.A.dylib                 0x32331a74 _ZL15_objc_terminatev + 144
6   libc++abi.dylib                 0x314e5078 _ZL19safe_handler_callerPFvvE + 76
7   libc++abi.dylib                 0x314e5110 std::terminate() + 16
8   libc++abi.dylib                 0x314e6594 __cxa_rethrow + 84
9   libobjc.A.dylib                 0x323319cc objc_exception_rethrow + 8
10  CoreData                        0x32741f60 _PFFaultHandlerLookupRow + 2536
11  CoreData                        0x327430fa _PF_FulfillDeferredFault + 198
12  CoreData                        0x3274ac0c _PF_ManagedObject_WillChangeValueForKeyIndex + 64
13  CoreData                        0x3275532e _sharedIMPL_setvfk_core + 106
14  CoreData                        0x327497c2 _PF_Handler_Public_SetProperty + 54
15  CoreData                        0x32750a4c -[NSManagedObject(_NSInternalMethods) _maintainInverseRelationship:forProperty:oldDestination:newDestination:] + 328
16  CoreData                        0x32751216 -[NSManagedObject(_NSInternalMethods) _didChangeValue:forRelationship:named:withInverse:] + 1286
17  CoreData                        0x3275a82e -[NSManagedObjectContext observeValueForKeyPath:ofObject:change:context:] + 318
18  Foundation                      0x32fd4eac NSKeyValueNotifyObserver + 268
19  Foundation                      0x32fd4b06 NSKeyValueDidChange + 330
20  Foundation                      0x32faeec6 -[NSObject(NSKeyValueObserverNotification) didChangeValueForKey:] + 90
21  CoreData                        0x3274ae28 _PF_ManagedObject_DidChangeValueForKeyIndex + 100
22  CoreData                        0x327553a2 _sharedIMPL_setvfk_core + 222
23  CoreData                        0x327497c2 _PF_Handler_Public_SetProperty + 54
24  CoreData                        0x32750ad6 -[NSManagedObject(_NSInternalMethods) _maintainInverseRelationship:forProperty:oldDestination:newDestination:] + 466
25  CoreData                        0x32751216 -[NSManagedObject(_NSInternalMethods) _didChangeValue:forRelationship:named:withInverse:] + 1286
26  CoreData                        0x3275a82e -[NSManagedObjectContext observeValueForKeyPath:ofObject:change:context:] + 318
27  Foundation                      0x32fd4eac NSKeyValueNotifyObserver + 268
28  Foundation                      0x32fd4b06 NSKeyValueDidChange + 330
29  Foundation                      0x32faeec6 -[NSObject(NSKeyValueObserverNotification) didChangeValueForKey:] + 90
30  CoreData                        0x3274ae28 _PF_ManagedObject_DidChangeValueForKeyIndex + 100
31  CoreData                        0x327553a2 _sharedIMPL_setvfk_core + 222
32  CoreData                        0x327497c2 _PF_Handler_Public_SetProperty + 54
33  CoreData                        0x3274bd1e -[NSManagedObject setValue:forKey:] + 86
34  Foundation                      0x32faf71e -[NSObject(NSKeyValueCoding) setValue:forKeyPath:] + 294
35  MyApp                       0x0019aa5c -[RKManagedObjectMappingOperation connectRelationship:] (RKManagedObjectMappingOperation.m:100)
36  MyApp                       0x0019af16 __55-[RKManagedObjectMappingOperation connectRelationships]_block_invoke_0 (RKManagedObjectMappingOperation.m:115)
37  Foundation                      0x32fdc536 -[NSBlockOperation main] + 198
38  Foundation                      0x32fd3db4 -[__NSOperationInternal start] + 836
39  MyApp                       0x001b063c -[RKMappingOperationQueue waitUntilAllOperationsAreFinished] (RKMappingOperationQueue.m:53)
40  MyApp                       0x001b6496 -[RKObjectMapper performMapping] (RKObjectMapper.m:368)
41  MyApp                       0x001b14f0 -[RKObjectLoader mapResponseWithMappingProvider:toObject:inContext:error:] (RKObjectLoader.m:227)
42  MyApp                       0x001b18c2 -[RKObjectLoader performMapping:] (RKObjectLoader.m:271)
43  MyApp                       0x001b1a9e __47-[RKObjectLoader performMappingInDispatchQueue]_block_invoke_0 (RKObjectLoader.m:282)
44  libdispatch.dylib               0x33a6311c _dispatch_call_block_and_release + 8
45  libdispatch.dylib               0x33a62996 _dispatch_queue_drain$VARIANT$up + 142
46  libdispatch.dylib               0x33a62890 _dispatch_queue_invoke$VARIANT$up + 32
47  libdispatch.dylib               0x33a71212 _dispatch_root_queue_drain + 190
48  libdispatch.dylib               0x33a713b4 _dispatch_worker_thread2 + 80
49  libsystem_c.dylib               0x33aa1a0e _pthread_wqthread + 358
50  libsystem_c.dylib               0x33aa18a0 start_wqthread + 4 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-25T09:03:03.640

似乎问题在于您正在尝试刷新已删除的对象。问题导致这段代码：

```
for (Child1 *object in objects) {
        [context refreshObject:object mergeChanges:NO];
    }
[context save:&saveError];
NIDPRINT(@"All records are deleted in Nearby- %@", saveError); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T09:35:27.290

我认为问题是你删除对象并在同一个线程上刷新它。该对象在尝试刷新此对象时已被删除。在尝试刷新之前确保删除对象已完成。

# button - 如何制作一个重置按钮

> ID：15083139
> 
> 赞同：0
> 
> 时间：2013-02-26T06:54:52.840
> 
> 标签：button

我有一个带有一个按钮的表单来提交值输入的文本框：

```
<form id="form1" name="form1" method="post" action="gallery.php">
............

.....

...   

<input type="submit" name="button" id="button" value="Filter" />
<a href="gallery.php">Reset</a> 
```

我的问题是重置。我怎样才能使它也成为一个按钮？

约瑟夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T06:58:10.600

您可以使用 ：

```
<input type="button" name="button" id="button" value="Reset" />

$('#button').click(function(){
window.location.href = "gallery.php";
}); 
```

如果您不想使用 jquery，那么：

```
<input type="button" name="button" id="button" onclick="window.location.href = 'gallery.php';" value="Reset" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T06:58:58.720

你的意思是：

```
<input type="button" name="Reset" id="Reset" value="Reset" onclick="window.location.href='gallery.php'"/> 
```

# javascript - javascript获取时区

> ID：15083142
> 
> 赞同：1
> 
> 时间：2013-02-26T06:54:58.243
> 
> 标签：javascript, timezone, clock

您好，我在 Javascript 中有此代码，但我想更改时区 GMT1 GMT2 并且我不知道必须在哪里进行更改也许可以帮助我某人？

```
<script type="text/javascript">

$(document).ready(function() {

    setInterval( function() {
        var seconds = new Date().getSeconds();
        var sdegree = seconds * 6;
        var srotate = "rotate(" + sdegree + "deg)";

        $("#sec_rus").css({"-moz-transform" : srotate, "-webkit-transform" : srotate});

    }, 1000 );

    setInterval( function() {
        var hours = new Date().getHours();
        var mins = new Date().getMinutes();
        var hdegree = hours * 30 + (mins / 2);
        var hrotate = "rotate(" + hdegree + "deg)";

        $("#hour_rus").css({"-moz-transform" : hrotate, "-webkit-transform" : hrotate});

    }, 1000 );

    setInterval( function() {
        var mins = new Date().getMinutes();
        var mdegree = mins * 6;
        var mrotate = "rotate(" + mdegree + "deg)";

        $("#min_rus").css({"-moz-transform" : mrotate, "-webkit-transform" : mrotate});

    }, 1000 );

}); 

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:23:20.817

你可以试试`var hours = new Date.getUTCHours() + 2;`

# c++ - pthread_create 错误：

> ID：15083143
> 
> 赞同：0
> 
> 时间：2013-02-26T06:55:04.157
> 
> 标签：c++, linux, qt, qtembedded

我为自己的目的编写了这段代码。它将创建一个线程来运行名为 event_handler() 的例程。例程 event_handler 将类对象 QApplication 的实例作为参数并调用其 exec() 方法。

```
#include <pthread.h>

void event_handler(void * &obj)
{
    QApplication* app = reinterpret_cast<QApplication*>(&obj);
    app.exec();
}

int main(int argc, char **argv)
{
    pthread_t p1;

    QApplication a(argc, argv);

    pthread_create(&p1, NULL, &event_handler,(void *) &a);

    //do some computation which will be performed by main thread

    pthread_join(*p1,NULL);

} 
```

但是每当我尝试构建这段代码时，我都会收到此错误

```
main.cpp:10: error: request for member ‘exec’ in ‘app’, which is of non-class type ‘QApplication*’
main.cpp:34: error: invalid conversion from ‘void (*)(void*&)’ to ‘void* (*)(void*)’
main.cpp:34: error: initializing argument 3 of ‘int pthread_create(pthread_t*, const pthread_attr_t*, void* (*)(void*), void*)’ 
```

我的代码有什么问题。（请记住，我是该领域的新手，这可能是一个非常愚蠢的错误:-)）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T06:58:27.623

线程函数必须将`void` *指针*作为其参数，而不是对对象的引用。您可以稍后将其类型转换为正确的指针类型：

```
void event_handler(void* pointer)
{
    QApplication* app = reinterpret_cast<QApplication*>(pointer);

    app->exec();
} 
```

您还将线程标识符错误地传递给`pthread_join`. 您不应该在那里使用取消引用运算符。

* * *

我还建议您研究新的 C++11[线程功能](http://en.cppreference.com/w/cpp/thread)。你[`std::thread`](http://en.cppreference.com/w/cpp/thread/thread)可以简单地做：

```
int main()
{
    QApplication app;
    std::thread app_thread([&app]() { app.exec(); });

    // Other code

    app_thread.join();
} 
```

# mysql - mysql中的数据库架构

> ID：15083145
> 
> 赞同：0
> 
> 时间：2013-02-26T06:55:12.787
> 
> 标签：mysql, database, db-schema

是否可以在mysql中创建这样的表？如果是，请用表格中的示例数据向我解释（当我们第一次插入时表格中的值是什么）。

```
Subscriber
------------
SubscriberId: guid() <<pk>>
privateUserIDs string <<fk>>
value1 string
...

User
----
privateUserIDs string <<pk>>
SubscriberId: guid() <<fk>>
value2 string
... 
```

我从谷歌文档中得到了这个数据库模式。

注意：关系是 1..n

![在此处输入图像描述](../Images/1f14f1fa775e420dfe55a6784adae4b6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T14:48:54.830

通过关闭外键检查，您可以在模式中以任何顺序创建表。

例如，下面我在 Users 表上创建了一个带有外键的 BannedUsers 表，但尚未创建 Users 表。

之后，请务必再次启用外键检查。

下面的示例已经使用 InnoDB 引擎在 MySQL 5.5.31 数据库上进行了测试。

```
SET FOREIGN_KEY_CHECKS=0;

CREATE TABLE IF NOT EXISTS `BannedUsers` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` bigint(10) unsigned NOT NULL,
  `created` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `user_id` (`user_id`),
  KEY `FK_BannedUsers_Users` (`user_id`),
  CONSTRAINT `FK_BannedUsers_Users` FOREIGN KEY (`user_id`) REFERENCES `Users` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

CREATE TABLE IF NOT EXISTS `Users` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `email` varchar(254) COLLATE utf8_unicode_ci NOT NULL,
  `username` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  `firstname` varchar(128) COLLATE utf8_unicode_ci DEFAULT NULL,
  `lastname` varchar(128) COLLATE utf8_unicode_ci DEFAULT NULL,
  `created` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

SET FOREIGN_KEY_CHECKS=1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:04:00.533

这不可能。原因很简单

如果您首先创建用户表，那么在描述它的模式表时订阅者必须存在，因为您需要在用户表中引用订阅者表的 PK 来创建 FK。

同样，如果您首先创建订阅者表，您将需要用户表模式，由于上述原因，这又是不可能的。

此外，如果您以某种方式定义了两个表，那么您将来可能会得到高度不一致的 db，因为从 1 个表中删除行会由于 FK 约束而导致其他表中的数据不一致。

# c# - 在 IntelliSense 中隐藏某些泛型类型的扩展方法

> ID：15083155
> 
> 赞同：4
> 
> 时间：2013-02-26T06:55:50.813
> 
> 标签：c#, extension-methods, intellisense

我有一个扩展方法：

```
public static void Foo<T>(this MyClass<T> target)
    where T : IEnumerable
{
    // Code goes here
} 
```

如果 T 是字符串而不是其他类型，我想从 InteliSense 中隐藏此扩展方法，就像在使用字符串时隐藏 Linq 中 IEnumerable 的扩展方法一样。我看过`EditorBrowsableAttribute`但它似乎不允许隐藏基于泛型类型的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:20:05.763

尝试将 放置`EditorBrowsableAttribute`到此方法（也可能放置到包含此方法的类）并将方法重新定位到另一个程序集（另一个项目）。之后，编译程序集并卸载项目，因此您将只有 DLL 引用。这是使用 的力量的唯一方法`EditorBrowsableAttribute`。

# java - 为什么类型推断算法试图找到最具体的类型？

> ID：15083158
> 
> 赞同：6
> 
> 时间：2013-02-26T06:56:08.210
> 
> 标签：java, generics

来自[Oracle 的**类型推断文档**](http://docs.oracle.com/javase/tutorial/java/generics/genTypeInference.html)

> 类型推断是 Java 编译器查看每个方法调用和相应声明以确定使调用适用的类型参数（或参数）的能力。推理算法确定参数的类型，以及分配或返回结果的类型（如果可用）。最后，推理算法试图找到适用于所有参数的最具体的类型。
> 
> 为了说明最后一点，在以下示例中，推理确定传递给 pick 方法的第二个参数是 Serializable 类型：

```
static <T> T pick(T a1, T a2) { return a2; }
Serializable s = pick("d", new ArrayList<String>()); 
```

为什么算法试图找到最具体的类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T07:13:37.717

因为如果不强制执行此规则，分配兼容性会使调用变得模糊。

例如，[PrintStream](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/PrintStream.html)定义`print(Object)`并且`print(String)`如果没有强制执行最具体类型的规则，则`print("bar")`可以调用`print(Object)`而不是 print( `String`)，这将是违反直觉的。

请注意，类型选择基于编译时类型，因此在以下示例`print(Object)`中被调用：

```
PrintStream out = ...;
Object bar = "bar";
out.print(bar);
out.print((Object)"foo"); 
```

# javascript - 正则表达式：从管道分离的文件中提取字符串

> ID：15083163
> 
> 赞同：0
> 
> 时间：2013-02-26T06:56:25.543
> 
> 标签：javascript, regex, jmeter

我有一个原始的 http 响应如下：

```
1
1|CI17438666|IB136180000001|55544001|10.106.1.XXX|
|first 
```

我需要从中提取 44001 部分。

我可以使用 Start : |555 End : | 来唯一标识这个字符串。

我试过了

```
(.*)(|555)(.*)(|) 
```

返回 1。

在旁注中，我在 Jmeter 中使用这个正则表达式，它遵循 java 脚本样式的正则表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T06:59:31.453

如果这是模式，这将起作用：

```
\|555(\d+)\| 
```

它匹配`555`两个管道之后和之间的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T07:00:57.680

试试这个 ：

```
$str  = '11|CI17438666|IB136180000001|55544001|10.106.1.XXX||first ';
preg_match('/\|555(?P<digits>\d+)\|/',$str,$match);

echo $match['digits']; 
```

或者

```
$str  = '11|CI17438666|IB136180000001|55544001|10.106.1.XXX||first ';
preg_match('/\|555(\d+)+\|/',$str,$match);

echo "<pre>";
print_r($match); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T07:22:56.587

乍一看，您的正则表达式存在两个问题：

首先是管道字符在正则表达式中具有特殊含义，它表示或。因此，例如这个正则表达式：

```
[abc|def] 
```

将匹配“abc”或“def”。

这意味着您的正则表达式部分 '(|555)' 和 '(|)' 对于第一种情况表示 'nothing OR 555'，对于第二种情况表示 'nothing OR nothing'。

如果要匹配管道字符，则需要对其进行转义，因此 '|' 变成'\|'。

第二个问题是 .* 是一个贪婪的匹配器，它会尽可能多地匹配，并且由于您的点代表任何字符，因此您将一直匹配到下一个匹配组。

因此，如果我们解决管道问题并获得这个新的正则表达式：

```
.*\|555(.*)\| 
```

使用您的示例字符串， .* 匹配：

```
1|CI17438666|IB136180000001|55544001|10.106.1.XXX|
                               ^^^^^^^^^^^^^^^^^^ 
```

换句话说，它会尽可能多地匹配，直到下一组匹配。

您可以通过添加额外的 ? 最后，所以 '.*' 变成 '.*?' 一旦进行匹配，这将停止匹配，您的正则表达式现在是：

```
.*\|555(.*?)\| 
```

您的匹配组现在变为：

```
1|CI17438666|IB136180000001|55544001|10.106.1.XXX|
                               ^^^^^ 
```

如果您知道 555 后面的字符将始终是数字，那么您可以将匹配组限制为仅数字，而不必担心贪婪和懒惰：

```
.*\|555([0-9]*)\| 
```

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T07:02:14.260

使用`explode()`它会更快

参考： http: [//php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T08:05:13.407

```
var str = "11|CI17438666|IB136180000001|55544001|10.106.1.XXX||first";
var pattern = "(.*)(/|555)([0-9]*)(/|)";
var result = str.match(pattern);
// The matches are in elements 0 through n.
for (var index = 0; index < result.length; index++)
{
    document.write ("submatch " + index + ": " +  result[index]);
    document.write("<br />");
} 
```

第三个子字符串将返回所需的结果。

# python - 如何在客户端使用验证器？

> ID：15083165
> 
> 赞同：0
> 
> 时间：2013-02-26T06:56:32.977
> 
> 标签：python, web2py

我想用 jquery 在客户端使用 web2py 验证器和我的自定义验证器！如何使用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:55:28.600

web2py 验证器仅在服务器上工作。提交表单时，web2py 在服务器上进行验证，如果有任何错误，它会返回表单以及要显示的任何错误消息。您也可以单独进行客户端验证，但这将独立于 web2py 的服务器端验证。

更新：如果你想通过 Ajax 向服务器发送一个值并使用验证器来检查它，你可以直接调用验证器。例如：

```
value, error = IS_EMAIL()('someone@example.com') 
```

所有验证器在调用时都接受一个值并返回一个元组，第一个元素是提交的值（或它的转换，取决于验证器），第二个元素是`None`验证是否通过或验证时的错误消息失败的。

通过 Ajax 接受值并返回错误消息或“OK”的服务器端验证操作可能如下所示：

```
def validate():
    value, error = globals()[request.vars.validator]()(request.vars.value)
    return error if error else 'OK' 
```

然后，您可以使用以下 URL 进行 Ajax 调用：

```
/myapp/mycontroller/validate?validator=IS_EMAIL&value=someone@example.com. 
```

但是，发送 Ajax 请求来分别验证每个字段并不是很有效，尤其是对于不需要任何服务器端处理的验证器。如果您不希望表单提交重新加载页面，另一种选择是将表单放入 web2py[组件](http://web2py.com/books/default/chapter/29/12#Components)中，在这种情况下，整个表单提交和验证将通过 Ajax 自动处理（在单个 Ajax 请求中）。

如果你真的想做客户端验证，那么更好的选择是使用[客户端验证库](https://stackoverflow.com/q/4751780/440323)。

# blackberry - 在黑莓中下载网站证书

> ID：15083168
> 
> 赞同：0
> 
> 时间：2013-02-26T06:56:45.340
> 
> 标签：blackberry

我正在开发一个应用程序，当我们访问一个安全的网站时，我需要下载证书并访问该证书如何可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:11:52.567

尝试使用“net.rim.device.api.crypto.certificate”来获取证书的属性。

[http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/crypto/certificate/package-summary.html](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/crypto/certificate/package-summary.html)

[https://stackoverflow.com/a/11933690/773263](https://stackoverflow.com/a/11933690/773263)

# android - 如何查询日历事件的提醒？未来的事件出现，但他们的提醒没有

> ID：15083180
> 
> 赞同：1
> 
> 时间：2013-02-26T06:57:31.600
> 
> 标签：android, android-contentprovider, android-contentresolver, android-calendar

当我查询 Events.CONTENT_URI 的内容解析器时，它正确地向我显示了未来的事件并且它们有警报。但是当我查询 Reminders.CONTENT_URI 时，它只显示已经发生的提醒。我想查找未来的事件是否有提醒，并允许用户在需要时将其删除。我该怎么做呢？我在哪里可以找到这些信息？

**此处仅显示已经发生的提醒**

```
//Get all reminders
Cursor cursor = getContentResolver().query(
    Reminders.CONTENT_URI, null, null, null, null 
);

//None of my future events show here even though they have reminders
while (cursor.moveToNext())
{           
        Log.d(TAG,
                "Id: " + cursor.getInt(cursor.getColumnIndex(Reminders._ID)) +
                ", Minutes: " + cursor.getInt(cursor.getColumnIndex(Reminders.MINUTES)) +
                ", Method: " + cursor.getInt(cursor.getColumnIndex(Reminders.METHOD))
        );
} 
```

**这显示了所有未来的事件（所有这些都有提醒，但它们不显示在提醒中**

```
//Get all events
Cursor cursor = getContentResolver().query(
    Events.CONTENT_URI, null, null, null, null
);

while (cursor.moveToNext())
{           
     //This correctly shows the future events each have an alarm (hasAlarm = 1)
     Log.d(TAG, 
          cursor.getString(cursor.getColumnIndex(Events.TITLE)) + ","
          cursor.getInt(cursor.getColumnIndex(Events.HAS_ALARM))
     );
} 
```

我如何找到（并更改）未来事件的提醒？

**编辑：CalendarAlerts 也不显示未来事件的警报！未来的事件未显示在 CalendarAlerts.CONTENT_URI 中**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:17:11.957

您需要将 eventid 作为参数传递给您想要提醒的未来事件的查询， `args = new String[] { Long.toString(mEventId) };`并且还需要使用 where 子句`private static final String REMINDERS_WHERE = Reminders.EVENT_ID + "=?";`

# bouncycastle - OCSP 响应未提供证书状态

> ID：15083181
> 
> 赞同：11
> 
> 时间：2013-02-26T06:57:31.737
> 
> 标签：bouncycastle, ocsp

我使用 Bouncy castle API 创建了一个 OCSP 客户端。我无法从收到的 OCSP 响应中找到证书状态（说明其是否已撤销）。从 resp.getCertStatus() 返回的值始终为空。这就是我创建 OCSP 请求的方式。

```
 private OCSPReq generateOCSPRequest(X509Certificate issuerCert, BigInteger serialNumber)
        throws CertificateVerificationException {

    //Add provider BC
    Security.addProvider(new org.bouncycastle.jce.provider.BouncyCastleProvider());
    try {
        //  CertID structure is used to uniquely identify certificates that are the subject of
        // an OCSP request or response and has an ASN.1 definition. CertID structure is defined in RFC 2560
        CertificateID id = new CertificateID(CertificateID.HASH_SHA1, issuerCert, serialNumber);

        // basic request generation with nonce
        OCSPReqGenerator generator = new OCSPReqGenerator();
        generator.addRequest(id);

        // create details for nonce extension. The nonce extension is used to bind
        // a request to a response to prevent replay attacks. As the name implies,
        // the nonce value is something that the client should only use once within a reasonably small period.
        BigInteger nonce = BigInteger.valueOf(System.currentTimeMillis());
        Vector objectIdentifiers = new Vector();
        Vector values = new Vector();

        //to create the request Extension
        objectIdentifiers.add(OCSPObjectIdentifiers.id_pkix_ocsp_nonce);
        values.add(new X509Extension(false, new DEROctetString(nonce.toByteArray())));
        generator.setRequestExtensions(new X509Extensions(objectIdentifiers, values));

        return generator.generate();
    }
    catch (OCSPException e) {
        e.printStackTrace();
        throw new CertificateVerificationException("Cannot generate OSCP Request with the given certificate",e);
    }
} 
```

我从服务 URL 获得 OCSP 响应，如下所示。

```
 private OCSPResp getOCSPResponce(String serviceUrl, OCSPReq request) throws CertificateVerificationException {

    try {
        byte[] array = request.getEncoded();
        if (serviceUrl.startsWith("http")) {
            HttpURLConnection con;
            URL url = new URL(serviceUrl);
            con = (HttpURLConnection) url.openConnection();
            con.setRequestProperty("Content-Type", "application/ocsp-request");
            con.setRequestProperty("Accept", "application/ocsp-response");
            con.setDoOutput(true);
            OutputStream out = con.getOutputStream();
            DataOutputStream dataOut = new DataOutputStream(new BufferedOutputStream(out));
            dataOut.write(array);

            dataOut.flush();
            dataOut.close();

            //Get Response
            InputStream in = (InputStream) con.getContent();
            OCSPResp ocspResponse = new OCSPResp(in);
            return ocspResponse;
        }
        else {
            throw new CertificateVerificationException("Only http is supported for ocsp calls");
        }
    } catch (IOException e) {
        e.printStackTrace();
        throw new CertificateVerificationException("Cannot get ocspResponse from url: "+ serviceUrl, e);
    }
} 
```

撤销状态检查如下。这里从 BasicOCSPResp 对象 (basicResponse) 获取的 SingleResp 对象 (resp) 应该具有证书的状态（良好、已撤销或未知）。但是这里的状态总是空的。

```
public void checkRevocationStatus(X509Certificate peerCert, X509Certificate issuerCert) 
throws CertificateVerificationException {

    try {

        OCSPReq request = generateOCSPRequest(issuerCert, peerCert.getSerialNumber());
        List<String> locations = getAIALocations(peerCert);
        Iterator it = locations.iterator();

        if (it.hasNext()) {

            String serviceUrl = (String) it.next();   
            OCSPResp ocspResponse = getOCSPResponce(serviceUrl, request);
            if(OCSPRespStatus.SUCCESSFUL==ocspResponse.getStatus())
                System.out.println("server gave response fine");

            BasicOCSPResp basicResponse = (BasicOCSPResp) ocspResponse.getResponseObject();
            SingleResp[] responses = (basicResponse==null) ? null : basicResponse.getResponses();

            if (responses!=null && responses.length == 1) {
                SingleResp resp = responses[0];
                Object status = resp.getCertStatus();
                if(status!=null) {
                    if (status == CertificateStatus.GOOD) {
                        System.out.println("OCSP Status is good!");
                    } else if (status instanceof org.bouncycastle.ocsp.RevokedStatus) {
                        System.out.println("OCSP Status is revoked!");
                    }  else if (status instanceof org.bouncycastle.ocsp.UnknownStatus) {
                        System.out.println("OCSP Status is unknown!");
                    }
                }
            }
        }
    }
    catch (Exception e) {
        System.out.println(e);
    }
} 
```

我真的很感谢你的帮助。非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T07:12:57.227

实际上，如果您查看 CertificateStatus.GOOD 的实际值，您会发现它实际上是 null。换句话说，resp.getCertStatus() 返回 null，意思是 GOOD。

所以你可能只需要拿出那个 (status != null) 检查。

# javafx - TableView Live Javafx

> ID：15083182
> 
> 赞同：3
> 
> 时间：2013-02-26T06:57:34.767
> 
> 标签：javafx, live

我有一个带有 JafavaFx 的表格视图，用于每秒显示给用户货币。一切正常，但是当 tableView 尝试重新加载数据时，它会在几毫秒内停止，我的意思是冷冻机，看起来不太漂亮。我无法删除此行为，此时我使用的代码是：

```
setCache(true);

        setItems(getObservableList());
        Timeline animation = new Timeline();
        animation.getKeyFrames().add(new KeyFrame(Duration.seconds(1), new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent actionEvent) {
                setItems(getObservableList());                  
            }
        }));
        animation.setCycleCount(Animation.INDEFINITE);
        animation.play(); 
```

我的表列

```
getColumns().addAll(
            getStringField("id","Tikect"), 
            getStringField("currency","Symbol"), 
            getStringField("type","S/B"), 
            getDoubleField("amount","Amt (k)"), 
            getDoubleField("open","Open"), 
            getDoubleField("close","Close"),
            getDoubleField("stop","Stop"), 
            getDoubleField("limit","Limit"), 
            getDoubleField("pl","P/L"), 
            getDoubleField("gpl","Gross P/L")
            ); 
```

在添加列的其他类中，我有一个这样的功能：

```
 public static TableColumn<BaseModel, String> getStringField(String idColumn,String nameColumn) {
    TableColumn<BaseModel, String> column = new TableColumn<BaseModel, String>(idColumn);
    column.setCellValueFactory(new PropertyValueFactory<BaseModel, String>(idColumn));
    column.setMinWidth(100);
    column.setText(nameColumn);

    return column;
} 
```

我的 ObservableList 是：

```
public ObservableList<BaseModel> getObservableList() throws IOException {
    ObservableList<BaseModel> oTransacctions = FXCollections.observableArrayList();

    JsonFactory factory = new JsonFactory();
    JsonParser jp = factory.createJsonParser(new URL(getURL()));

    JsonToken token = jp.nextToken();

    while (token != JsonToken.START_ARRAY) {
        token = jp.nextToken();
    }

    while (token != JsonToken.END_ARRAY) {
        token = jp.nextToken();

        if (token == JsonToken.START_OBJECT) {
            Transaction transaction = parseTransacction(jp);
            oTransacctions.add(transaction);
        }
    }

    return oTransacctions;
}

private Transaction parseTransacction(JsonParser jp) throws IOException {
    Transaction transaction = new Transaction();
    JsonToken token = jp.nextToken();

    while (token != JsonToken.END_OBJECT) {
        if (token == JsonToken.START_OBJECT) {
            while (token != JsonToken.END_OBJECT) {
                token = jp.nextToken();
            }
        }

        if (token == JsonToken.FIELD_NAME) {
            String fieldname = jp.getCurrentName();

            if ("id".equals(fieldname)) {
                jp.nextToken();
                transaction.setId(jp.getText());
            }
            if ("currency".equals(fieldname)) {
                jp.nextToken();
                transaction.setCurrency(jp.getText());
            }
            if ("type".equals(fieldname)) {
                jp.nextToken();
                transaction.setType(jp.getText());
            }
            if ("amount".equals(fieldname)) {
                jp.nextToken();
                transaction.setAmount(jp.getValueAsDouble());
            }
            if ("open".equals(fieldname)) {
                jp.nextToken();
                transaction.setOpen(jp.getValueAsDouble());
            }
            if ("stop".equals(fieldname)) {
                jp.nextToken();
                transaction.setStop(jp.getValueAsDouble());
            }
            if ("limit".equals(fieldname)) {
                jp.nextToken();
                transaction.setLimit(jp.getValueAsDouble());
            }
            if ("created_at".equals(fieldname)) {
                jp.nextToken();
                // transaction.setCreated_at(new Date(jp.getText()));
            }
            if ("pl".equals(fieldname)) {
                jp.nextToken();
                transaction.setPl(jp.getValueAsDouble());
            }
            if ("gpl".equals(fieldname)) {
                jp.nextToken();
                transaction.setGpl(jp.getValueAsDouble());
            }
            if ("close".equals(fieldname)) {
                jp.nextToken();
                transaction.setClose(jp.getDoubleValue());
            }
        }
        token = jp.nextToken();
    }

    return transaction;
} 
```

这是结果：

![在此处输入图像描述](../Images/29b4fb8d12227eafe5993c66f5a217ac.png)

我的问题是：

*   我应该使用网格等其他组件，...来做这种类型的动作吗？
*   如果可能的话我应该怎么做？

非常感谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T10:14:01.100

看起来您正在某些方法中执行 I/O（至少`throws IOException`在其签名中有一个）。

您不应在 JavaFX 应用程序线程上执行任何 I/O，因为该线程处理用户界面。如果您确实在 JavaFX 应用程序线程上执行 I/O，那么您最终将阻塞线程并且程序将显示为对用户没有响应。

您要做的是将数据从服务器异步获取到客户端。为此，您应该使用 JavaFX 并发实用程序，例如[Task](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html)和[Service](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Service.html)。要注意的另一件事是，您的 I/O 获取线程不应直接更新您的 UI（甚至间接地`ObservableList`支持您的表）。

在你的情况下，我会做类似下面的代码：

```
final ForexService forex = new ForexService();
forex.setUrl(getUrl()); // getUrl() is some method your application provides 
forex.setOnSucceeded(new EventHandler<WorkerStateEvent>() {
  @Override public void handle(WorkerStateEvent event) {
    setItems(forex.getValue());     
    forex.reset();             
  }
}           
forex.setOnFailed(new EventHandler<WorkerStateEvent>() {
  @Override public void handle(WorkerStateEvent event) {
    // exception handling with forex.getException()   
    forex.reset();             
  }
}           
...
Timeline animation = new Timeline();
animation.getKeyFrames().add(new KeyFrame(Duration.seconds(1), new EventHandler<ActionEvent>() {
  @Override public void handle(WorkerStateEvent event) {
    if (Worker.State.READY == forex.getState()) {
      forex.start();
    }
  } 
}));
animation.setCycleCount(Animation.INDEFINITE);
animation.play();
...
public static class ForexService extends Service<ObservableList<BaseModel>> {
  private StringProperty url = new SimpleStringProperty(this, "url");
  public final void setUrl(String value) { url.set(value); }
  public final String getUrl() { return url.get(); }
  public final StringProperty urlProperty() { return url; }

  protected Task createTask() {
    final String _url = getUrl();
    return new Task<ObservableList<BaseModel>>() {
      protected String call() throws Exception {
        // getObservableList is the function which actually fetches the
        // data from the server and processes it into an ObservableList
        // which can later be fed to a TableView.
        // This function is essentially the same as the function
        // supplied in your question.
        return getObservableList(new URL(_url));
      }
    };
  }
} 
```

上面的代码只是在没有编译或测试的情况下输入 StackOverflow，所以你可能会在这里或那里有一些小错误，但我认为它为你提供了这个想法的要点。

您可能会注意到，所有关于将 url 传递给服务以使其无法在不同线程上修改的技巧都是直接从`Service`javadoc 示例中复制的。此外，如果您的 url 只是一些永远不会改变的静态事物，那么您可以将其编码为`static final`常量，而不必费心将其设为可变参数。

请注意，使用 TableView 不是问题（您可以使用 Grid 或任何其他控件，如果您阻止 Java 应用程序线程，您仍然会遇到问题）。

如果以上看起来只是为了进行服务器调用和获取一些数据需要做很多工作，那么应该注意的是，JavaFX（目前）只是为这些类型的事物提供服务的低级供应商。有 3rd 方库，例如[DataFX](http://www.javafxdata.org)，它们提供高级服务，用于执行诸如从各种来源异步获取数据、从各种格式（如 xml 和 json）解析数据以及填充各种 JavaFX 控件（如 TableViews 和 ListViews）之类的事情。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T07:04:03.550

您可能对使用 Highcharts 感兴趣，尤其是这个例子：[http ://www.highcharts.com/stock/demo/dynamic-update](http://www.highcharts.com/stock/demo/dynamic-update)

# ios - 两点坐标之间的角度以相应地旋转图像

> ID：15083185
> 
> 赞同：2
> 
> 时间：2013-02-26T06:57:55.500
> 
> 标签：ios, mkmapview, cllocationmanager, cgaffinetransform

我有两点`CLLocationCoordinate2D`，比如说我的 A 和`mapView`B。我想要一个箭头图像从一个点指向另一个点（A-> B）。我无法找到`transform`箭头图像的正确角度。

请参阅此图片以供参考![示例屏幕截图](../Images/2fd41fd12fdef4549ae82fe2f88ef439.png)

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T04:10:13.213

这是一个老问题，但也许它仍然可以帮助到这里的人：

```
CGFloat angle = atan2f(point2.y - point1.y, point2.x - point1.x);
CGAffineTransform rotationTransform = CGAffineTransformIdentity;
rotationTransform = CGAffineTransformMakeRotation(angle);
arrow.transform = rotationTransform; 
```

如果您想`UIImageView`在点 1 放置一个“箭头”，并让它指向点 2，您只需使用增量来获得反正切，然后基于该角度创建一个变换，并将该变换分配给`UIImageView`箭头。

# android - 安卓实时摄像头

> ID：15083186
> 
> 赞同：1
> 
> 时间：2013-02-26T06:58:02.593
> 
> 标签：android, android-layout, android-camera

嗨，我能够捕获单个图像并将其显示在实时摄像头的图像视图中，但是如何从实时摄像头捕获多个图像并在图像视图上显示它们，应该动态生成图像视图。相机预览和 Imageview 应该在同一个布局中。

# ios - 不使用 UIWebView 的 iOS 富文本编辑器

> ID：15083189
> 
> 赞同：1
> 
> 时间：2013-02-26T06:58:07.333
> 
> 标签：ios, cocoa-touch, rich-text-editor

我现在正在用 iOS 的富文本编辑器做一些事情。首先我使用 html5 和 webView 来达到目标​​。但最后我发现它似乎不太好用。有什么方法可以使用 UIKit 或 Apple 的一些 API，而不是 html5 和 javascript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:11:33.193

您要么必须：

A) 放弃对低于 iOS 6 的支持，并使用 UITextView 中提供的新属性字符串支持。

或 B) 使用 CoreText、UITextInput 等制作您自己的自定义视图

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-16T10:38:22.037

看看[https://github.com/gfthr/FastTextView](https://github.com/gfthr/FastTextView)这是比 Omni 编辑器更好的开源编辑器

# javascript - javascript中递归语法的正则表达式

> ID：15083193
> 
> 赞同：1
> 
> 时间：2013-02-26T06:58:18.337
> 
> 标签：javascript, regex, grammar, xregexp

假设我有以下虚构的语法，并带有一个递归定义的子句。

```
sentence := clause +
subject := (qualifier *) subjectiveNoun
objects := object +
object := nothing | (qualifier *) objectiveNoun
clause := subject objects verb
qualifier := adjective | clause 
```

假设其他所有内容都具有非递归定义，那么应该如何为“子句”编写 JavaScript 语法？如果有人熟悉 XRegExp 库来执行此操作，那将是一个加分项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:09:17.740

XRegExp 库*确实*支持递归匹配¹，但您的目标是什么？如果您能够将其与正则表达式匹配，那又如何呢？如果您打算处理解析树，那么正则表达式几乎没有用，它只会告诉您源匹配与否。在这种情况下，请查看[PEG.js](http://pegjs.majda.cz/)或[Jison](http://zaach.github.com/jison/)。

¹ [http://xregexp.com/plugins/#matchRecursive](http://xregexp.com/plugins/#matchRecursive)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:57:49.113

[Ometa](http://tinlizzie.org/ometa/)使得在 JS 中为分析语法编写解析器变得很容易，并做了一些技巧来处理 LR，这意味着它应该能够处理你的语法，但是 PEG 语法很少用于自然语言解析。

# android - 如何更改进度对话框的颜色和背景

> ID：15083199
> 
> 赞同：2
> 
> 时间：2013-02-26T06:59:03.243
> 
> 标签：android, android-progressbar

我试图显示进度对话框并得到它，但现在想知道如何为进度对话框设置背景颜色，并且必须为进度条设置颜色。任何帮助赞赏我的代码

```
public class MainActivity extends Activity {

ProgressDialog progress;
Button b;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    b=(Button)findViewById(R.id.button1);

    b.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            progress= new ProgressDialog(MainActivity.this);
            progress.setMessage("Loading...!");
            progress.show();

        }
    });

}} 
```

XML 代码

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="164dp"
    android:text="Start"/> 
```

# python - 如何检查站点地图是否包含一些网址

> ID：15083200
> 
> 赞同：0
> 
> 时间：2013-02-26T06:59:03.327
> 
> 标签：python, django, sitemap

我是 python 和 django 的新手，我正在尝试修复站点地图创建者以及它会创建空站点地图的错误之一。这意味着站点地图中实际上没有任何网址。

例子：

```
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
</urlset> 
```

我想知道检查站点地图是否有空 urlset 标签的最佳方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:03:15.187

你可以[`ElementTree`](http://docs.python.org/2/library/xml.etree.elementtree.html)用来解析xml：

```
from xml.etree import ElementTree as etree

urlset = etree.fromstring(xml)
if urlset.find('url') is None:
   print("sitemap has no urls") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:52:07.297

当然，您的错误是一个更重要的错误的直接后果 - 您的 django 应用程序中没有网址！

修复此问题，您的站点地图错误就会消失。没有站点的站点地图有什么意义？

更新

我不完全理解它将如何提供帮助，但如果你想解析 xml，那么 Python 内置的[ElementTree](http://docs.python.org/2/library/xml.etree.elementtree.html)库可能就是你要找的。还有更多来自 python 站点的[内容。](http://wiki.python.org/moin/PythonXml?highlight=%28%28Tutorials%20on%20XML%20processing%20with%20Python%29%29)

# windows-phone-7 - Windows Phone 中的 Twitter 帖子

> ID：15083213
> 
> 赞同：0
> 
> 时间：2013-02-26T07:00:04.240
> 
> 标签：windows-phone-7, twitter

我正在开发一个应用程序，用户可以登录到他们的 Twitter 帐户并发布他们的状态。一切都很顺利，但是当我点击推文按钮发布时，状态没有更新。

我的代码有什么问题？

```
private void btnPostTweet_Click(object sender, RoutedEventArgs e)
{
    if (txtBoxNewTweet.Text.Trim().Length == 0) { return; }

    var credentials = new OAuthCredentials
    {
        Type = OAuthType.ProtectedResource,
        SignatureMethod = OAuthSignatureMethod.HmacSha1,
        ParameterHandling = OAuthParameterHandling.HttpAuthorizationHeader,
        ConsumerKey = TwitterSettings.consumerKey,
        ConsumerSecret = TwitterSettings.consumerKeySecret,
        Token = this.accessToken,
        TokenSecret = this.accessTokenSecret,
        Version = "1.0"
    };

    var restClient = new RestClient
    {
        Authority = TwitterSettings.StatusUpdateUrl,
        HasElevatedPermissions = true,
        Credentials = credentials,
        Method = WebMethod.Post
    };

    restClient.AddHeader("Content-Type", "application/x-www-form-urlencoded");

    // Create a Rest Request and fire it
    var restRequest = new RestRequest
    {
        Path = "1/statuses/update.xml?status=" + txtBoxNewTweet.Text 
    };

    var ByteData = Encoding.UTF8.GetBytes(txtBoxNewTweet.Text);
    restRequest.AddPostContent(ByteData);
    restClient.BeginRequest(restRequest, new RestCallback(PostTweetRequestCallback));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:58:59.523

试试这段代码，而不是代码的最后几行

```
 restRequest = new RestRequest
    {
        Path = "1/statuses/update.xml"
    };
    restRequest.AddParameter("status", tbxNewTweet.Text);

    //var ByteData = Encoding.UTF8.GetBytes(txtBoxNewTweet.Text);
    //restRequest.AddPostContent(ByteData);
    restClient.BeginRequest(restRequest, new RestCallback(PostTweetRequestCallback)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:37:59.957

我无法回答您的问题，但如果您使用 API twitter api 1.0，请立即移至 api 1.1。他们将在下个月淘汰 api 1.0：[https](https://dev.twitter.com/blog/planning-for-api-v1-retirement) ://dev.twitter.com/blog/planning-for-api-v1-retirement 。请注意，他们正在关闭除 JSON 之外的所有内容，因此您的代码可能随时停止工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-20T10:27:11.567

嗨，你找到答案了吗？如果没有，请尝试以下操作：

```
var credentials = new OAuthCredentials
    {
        Type = OAuthType.ProtectedResource,
        SignatureMethod = OAuthSignatureMethod.HmacSha1,
        ParameterHandling = OAuthParameterHandling.HttpAuthorizationHeader,
        ConsumerKey = TwitterSettings.consumerKey,
        ConsumerSecret = TwitterSettings.consumerKeySecret,
        Token = this.accessToken,
        TokenSecret = this.accessTokenSecret,
        Version = "1.0"
    }; 
```

这里删除 `Version = "1.0"`

所以它看起来像这样：

```
var credentials = new OAuthCredentials
        {
            Type = OAuthType.ProtectedResource,
            SignatureMethod = OAuthSignatureMethod.HmacSha1,
            ParameterHandling = OAuthParameterHandling.HttpAuthorizationHeader,
            ConsumerKey = TwitterSettings.consumerKey,
            ConsumerSecret = TwitterSettings.consumerKeySecret,
            Token = this.accessToken,
            TokenSecret = this.accessTokenSecret,            
        }; 
```

然后改变路径：

```
var restRequest = new RestRequest
    {
        Path = "1.1/statuses/update.xml?status=" + txtBoxNewTweet.Text 
    }; 
```

最后你必须检查一件事。[您在https://apps.twitter.com/](https://apps.twitter.com/)中的应用程序设置

将访问级别更改为`Read, write, and direct messages (modify app permissions)`

如果您无法更改权限，请从您的手机尝试。从您的手机转到此网址并使用您的用户名和密码登录。现在您可以从移动设备更改设置。现在你可以发布你的推特了..!!

# c# - 如何在 UserControl 内引发事件以在另一个项目中处理它？

> ID：15083214
> 
> 赞同：1
> 
> 时间：2013-02-26T07:00:04.883
> 
> 标签：c#, vb.net, winforms, user-controls, controls

我来问这个[问题](https://stackoverflow.com/questions/15076902/how-can-i-make-the-inner-controls-dont-cover-the-main-controls-events)。例如，`CustomControl`我想处理所有内部控件的`MouseClick`事件，然后为 customControl 引发一个事件，这样我就可以在使用该控件的每个项目中处理它。

```
private void UserControl1_Load(object sender, EventArgs e)
{
    foreach (var control in Controls)
    {
        ((Control)control).MouseClick += UserControl1_Click;

    }
}

private void UserControl1_Click(object sender, MouseEventArgs e)
{
    // here I want to raise a MouseClick event for UserControl1?
} 
```

我怎么解决这个问题？（我认为这可能就像我们捕获异常然后再次将其抛出到其他地方捕获它？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:17:56.603

简单地：

```
Public Event MouseClick(ByVal sender As Object, ByVal e As MouseEventArgs)

Private Sub UserControl1_Click (object sender, MouseEventArgs e)
    RaiseEvent MouseClick(sender, e)
End Sub 
```

然后在外面处理`MouseClick`事件。（我将代码放在 Vb.Net 中，因为您在问题中标记了它，但很容易转换它）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:11:52.247

试试这个：

```
private void UserControl1_Click(object sender, MouseEventArgs e)
{
    // Raise MouseClick event for this control
    base.OnMouseClick(e);
} 
```

# android - 等待android中的进度条

> ID：15083226
> 
> 赞同：1
> 
> 时间：2013-02-26T07:01:15.213
> 
> 标签：android, progress-bar, progressdialog, android-progressbar

在我的 android 应用程序中，我将一些数据从服务器数据库复制到本地数据库。代码贴在下面。可能需要 15 分钟以上。对于较慢的连接，它可能会被超过。所以我想显示一个等待进度条，应该显示“请稍候”，直到任务完成。我参考了很多东西，但我不明白如何在下面的代码中使用等待进度条。

```
refresh.setOnClickListener(new OnClickListener(){

public void onClick(View v) {
    mySQLiteAdapter.openToWrite();
    mySQLiteAdapter.deleteAll();
    radapter.openToWrite();
    radapter.deleteAll();
    uadapter.openToWrite();
    uadapter.deleteAll();
            try
                {
                     HttpClient httpclient = new DefaultHttpClient();
                     HttpPost httppost = new HttpPost("http://xxxxxxxxxxxxxxxxxxxxx");
                     HttpResponse response = httpclient.execute(httppost);
                     HttpEntity entity = response.getEntity();
                      is = entity.getContent();
                } catch (UnsupportedEncodingException e) {
                    e.printStackTrace();
                } catch (ClientProtocolException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
                try {
                    BufferedReader reader = new BufferedReader(new InputStreamReader(
                            is, "iso-8859-1"), 8);
                    StringBuilder sb = new StringBuilder();
                    String line = null;
                    while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                    }
                    is.close();
                    json = sb.toString();
                } catch (Exception e) {
                Toast.makeText(getBaseContext(), e.toString(), Toast.LENGTH_LONG).show();
                }

                try {
                    jObj = new JSONObject(json);
                    contacts = jObj.getJSONArray("get");
                    for(int i = 0; i < contacts.length(); i++){
                    JSONObject c = contacts.getJSONObject(i);
                        if(!c.isNull("rname"))// || c.getString("rcode").equals(null))
                        {
                            rname = c.getString("rname");
                            rcode = c.getString("rcode");
                            radapter.insert(rcode, rname);
                        }
                        else
                        {
                            rname = "";
                            rcode = c.getString("rcode");
                            radapter.insert(rcode, rname);
                        }
                    }
                    Toast.makeText(getBaseContext(), " Ryot BackUp completed", Toast.LENGTH_SHORT).show();

                } catch (JSONException e) {
                    Toast.makeText(getBaseContext(), "Error"+e.toString(), Toast.LENGTH_LONG).show();
                }
                adapter.deleteAll();
                oadapter.deleteAll();
                e2.setText("Back Up completed");
            }

       }); 
```

请有人帮助我。提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T07:04:58.957

用于`Progress Dialog`显示文本“**请稍候...** ”并按如下方式实现您的代码`thread`：

```
 final ProgressDialog progressDialog = ProgressDialog.show(this, "", "Please wait...");
      new Thread() {
          public void run() {
                try{
                      //your code here.....
                   } 
                catch (Exception e) {
                    Log.e("tag", e.getMessage());
                   }
                // dismiss the progress dialog
                       progressDialog.dismiss();
                   }
                }.start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T07:07:47.517

尝试使用 AsyncTask 并使用 onProgressUpdate 方法进行更新

# google-chrome - Chrome v 25.0.1364.97 m 上的无窗口渲染问题

> ID：15083228
> 
> 赞同：1
> 
> 时间：2013-02-26T07:01:19.573
> 
> 标签：google-chrome, firebreath

Chrome 的最新更新 (25.0.1364.97 m) 似乎搞砸了我的 FireBreath 插件 (FireBreath v1.7) 中对无窗口渲染的支持。为了检查我的代码是否有问题，我尝试使用以下 HTML 代码进行 FBTestPlugin：

```
<object id="plugin0" type="application/x-fbtestplugin" width="300" height="300">
    <param name="windowless" value="true" />
</object><br />
<object id="plugin1" type="application/x-fbtestplugin" width="300" height="300">
</object><br />" 
```

无窗口插件 ( `id="plugin0"`) 不会在 Chrome 中呈现；窗口化的 ( `id="plugin1"`) 可以。在 Firefox 和 IE 中都很好。问题出现在winXP和win7 x86上，其他平台不确定。

这是 Chrome 中的错误吗？还是在 FireBreath 中？真的希望比我更了解浏览器插件的人可以提供一些建议。

**更新：在**[https://code.google.com/p/chromium/issues/detail?id=178598](https://code.google.com/p/chromium/issues/detail?id=178598) 报告了我的 FireBreath 插件遇到的相同问题（在屏幕上显示颜色混乱）。该帖子中建议了一种解决方法，即将插件`<object>`或父容器的背景颜色设置为黑色。令人高兴的是，我试过了，现在它正在工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:22:54.557

如我原来问题的更新所示，我在 [https://code.google.com/p/chromium/issues/detail?id=178598](https://code.google.com/p/chromium/issues/detail?id=178598)找到了合适的解决方法。Chrome 似乎将一些 RGB 像素数据误解为 Alpha 通道（透明度），因此在我的 FireBreath 插件中渲染到屏幕的颜色会混淆。解决方法是将插件对象的背景颜色设置为黑色 ( `background-color: #000000;`)（在 css 文件或`object`标签本身中）。

另一种解决方法是切换到窗口插件（该问题仅出现在无窗口插件中），但这会引入其他问题（例如需要从单独的线程进行渲染等）。

顺便说一句，用于将像素数据渲染到屏幕的代码源自[https://gist.github.com/taxilian/1099740](https://gist.github.com/taxilian/1099740)中的示例。

# c - 有人可以解释一下这里发生了什么使用 malloc 作为指针吗

> ID：15083231
> 
> 赞同：0
> 
> 时间：2013-02-26T07:01:26.997
> 
> 标签：c, pointers, malloc

```
#include<stdio.h>
int main(){
    int * ptr=(int *)malloc(40);
    printf("%d",sizeof(ptr));
} 
```

当我运行它时，输出为 8...这里发生了什么...为什么输出为 8？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:03:34.337

该`sizeof`运算符是一个编译时运算符，任何指针的大小在您的机器上都是 8 个字节。

无法检索`malloc`-ed 内存区域的动态大小。您必须以其他方式知道它，或者将其保存在某个地方。

您可能会考虑使用[Boehm 的保守垃圾收集器](http://www.hpl.hp.com/personal/Hans_Boehm/gc/)，然后您将调用`GC_malloc`而不是`malloc`，您不需要调用`free`(or `GC_free`)，并且您可以使用`GC_size(p)`从(但我不t 建议使用)。`GC_malloc``p``GC_size`

如果`malloc`在 Linux 上使用，学习如何使用[valgrind](http://valgrind.org/)寻找内存泄漏错误，并使用`gcc -Wall -g`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T07:04:48.297

`malloc()`返回一个指向 40 字节内存（可能是 10 个整数）的指针并将其分配给`ptr`. 原因`sizeof(ptr)`是 8 是因为您使用的是 64 位机器，并且指针大小为 8 个字节。

您应该`sizeof()`在内部使用，`malloc()`因为它是一种很好的形式，并且在类型改变大小（跨平台或其他）时避免出现问题。如果您真的想要 10 个整数的空间，请使用：

```
int *ptr = malloc(10 * sizeof *ptr); 
```

这分配了 10 个类型`ptr`指向的大小，在本例中为`int`. 这样做的好处是您可以更改类型而不更改`malloc()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:03:56.357

该变量`ptr`是一个指向 int 的指针，您的系统恰好有 8 个字节的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T07:04:30.117

ptr 是一个指针。它打印系统上指针的大小。因为 ptr 保存一个地址，所以 8 个字节是在 64 位机器上保存一个地址所需的大小。这是特定于编译器的。您无法检索分配给指针的大小。

如果你有这个疑问，那么你也应该怀疑 free() 如何在不知道分配给指针的大小的情况下释放内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T07:46:26.203

我已经在我的 Windows 32 位机器上试过这个，我得到了 4 个字节，我认为 ptr 是一个指向 int 的指针，它显示了正确的

# windows - 如何在cmd中执行if语句和循环？

> ID：15083232
> 
> 赞同：0
> 
> 时间：2013-02-26T07:01:37.440
> 
> 标签：windows, batch-file, dos, cmd

我想检查路径中是否存在文件，然后如果存在则执行循环。例如

```
IF EXIST "C:\FILE" THEN
LOOP CONDITION
END IF 
```

但在 .cmd 编程中。它会是什么样子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:04:40.620

语法是这样的：

```
IF EXIST filename. (
FOR %%A IN (1 2 3) DO GOTO=%%A
    :1
    ECHO 1
    GOTO End
    :2
    ECHO 2
    GOTO End
    :3
    ECHO 3
    :End
) ELSE (
echo filename. missing.
) 
```

看看[这个](http://www.robvanderwoude.com/for.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:05:33.640

我假设您使用的是 Visual Basic（至少 IF 语句的语法显示了它），如果是，则使用 FileInfo 对象，例如 Dim fi As New FileInfo("C:\File.txt") IF fi.Exists() THEN ' 在这里循环 END IF

# c# - 找不到类型或命名空间 XmlDictionaryReader

> ID：15083236
> 
> 赞同：3
> 
> 时间：2013-02-26T07:01:58.690
> 
> 标签：c#

我是.net 世界的新手。所以我真的很高兴能得到一些帮助。我尝试使用`xmlDictionaryReader`. 我收到错误“`XmlDictionaryReader`找不到类型或命名空间。我在我的程序中添加：

```
using System.Xml;
using System.Runtime.Serialization; 
```

它仍然无法正常工作。你有什么主意吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T07:04:51.637

添加引用`System.Runtime.Serialization.dll`：在解决方案资源管理器中右键单击项目 -> 添加引用。

并且可以肯定 - C# 是区分大小写的，所以它必须是`XmlDictionaryReader`并且看起来你从小写字母开始类名：`xmlDictionaryReader`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T07:10:00.680

您需要`Sytem.Runtime.Serialization.dll`在您的参考资料中添加参考资料和

```
using System.Xml; 
```

你应该能够做到

```
var temp = XmlDictionaryReader.Create(yourstream); 
```

# python - 限制列表python的长度

> ID：15083239
> 
> 赞同：0
> 
> 时间：2013-02-26T07:02:19.237
> 
> 标签：python

我不知道这个问题是否在某个地方被问到，但我没有找到它。

我将元素附加到列表中。

```
thr_core0 +=[fpid[thread]] 
```

这会定期发生。在时间 0：

thr_core0 [9886, 9890]

在时间 1：

thr_core0 [9886, 9890, 9886, 9890]

是否可以将列表的长度限制为 2。

我知道可以使用`deque`. 但是否也可以使用`lists`.

使用`deque`，我们这样做：

```
thr_core0 += [deque([0]*2,maxlen=2)] 
```

这些是我在google上搜索的关键字：`limit` `list` `length` `python`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:04:49.080

它不漂亮，但你可以切片它：

```
thr_core0 = (thr_core0 + [fpid[thread]])[:2] 
```

这将始终确保`the_core0`最多有两个元素。

# php - 正则表达式过滤表

> ID：15083241
> 
> 赞同：7
> 
> 时间：2013-02-26T07:02:23.327
> 
> 标签：php, ruby, regex, ruby-on-rails-3, codeigniter

好的，我有一个由一些开源软件输出的表，但它没有以实际的表格式输出，例如

```
<table> 
  <thead>
     <td>Heading</td>
  <thead>
  <tbody>
    <tr>
       <td>Content</td>
    </tr>
  <tbody>
</table 
```

相反，开发该软件的人认为像这样输出表格是个好主意

```
+------------+-------------+-------+-------------+------------+---------------+----------+
| HEADING 1  | HEADING 2   | ETC   | ANOTHER     | HEADING3   | HEADING4     | SML |
+------------+-------------+-------+-------------+------------+---------------+----------+
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
+------------+-------------+-------+-------------+------------+--------------+----------+
| TOTALS        AGENTS:21  |  total|        total|       total|         total| total|
+------------+-------------+-------+-------------+------------+--------------+----------+ 
```

所以我不能建立一个网络刮板来获取数据，或者我不知道我是否可以建立一个刮板来刮掉它，因为它全部包裹在一个`<pre> </pre>`标签内。因此，相反，我一直在尝试使用 ruby​​ 和 Regex 来尝试完成工作，到目前为止，我已经设法获得了所有领先`|`的信息，而且我也设法获得了标题，`+-------+-----`但到目前为止，我似乎已经一直重复该模式，它不想重复自己，好吧但是现在说够了这是我到目前为止使用的代码

```
text.lines.to_a.each do |line|
   line.sub(/^\| |^\+*-*\+*\-*/) do |match|
    puts "Regexp Match: " << match
end
STDIN.getc
puts "New Line "<< line
end 
```

例如，第一行的输出只能是`+-----------------+----------` CSV 格式，因此可以用 's`Gsub`替换剩余`|`的`,`'s

我可以使用 PHP 或 Ruby，所以任何答案都非常受欢迎

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T10:04:49.383

这可能不像现在那样干净，但它适用于这个例子:) Ruby：

```
@text = <<END
+------------+-------------+-------+-------------+------------+---------------+----------+
| HEADING 1  | HEADING 2   | ETC   | ANOTHER     | HEADING3   | HEADING4     | SML |
+------------+-------------+-------+-------------+------------+---------------+----------+
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
+------------+-------------+-------+-------------+------------+--------------+----------+
| TOTALS        AGENTS:21  |  total|        total|       total|         total| total|
+------------+-------------+-------+-------------+------------+--------------+----------+
END
s = @text.scan(/^[|]\W(.*)[|]$/)
puts s
arr = []
arr2 = []
s.each do |o|
  a = o.to_s.split('|')
    a.each do |oo|
      arr2 << oo.to_s.gsub('["','').gsub('"]','').gsub(/\s+/, "")
    end
    arr << arr2
  arr2 = []
end
arr.each do |i|
  puts i
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T08:38:03.133

查看：

```
$table = '+------------+-------------+-------+-------------+------------+---------------+----------+
| HEADING 1  | HEADING 2   | ETC   | ANOTHER     | HEADING3   | HEADING4     | SML |
+------------+-------------+-------+-------------+------------+---------------+----------+
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
+------------+-------------+-------+-------------+------------+--------------+----------+
| TOTALS        AGENTS:21  |  total|        total|       total|         total| total|
+------------+-------------+-------+-------------+------------+--------------+----------+';

$lines = preg_split('/\r\n|\r|\n/', $table);
$array = array();
foreach($lines as $line){
  if(!preg_match('/\+-+\+/', $line)){
    $array[] = preg_split('/\s*\|\s*/', trim($line, '| '));
  }
}

print_r($array); 
```

输出：

```
Array
(
    [0] => Array
        (
            [0] => HEADING 1
            [1] => HEADING 2
            [2] => ETC
            [3] => ANOTHER
            [4] => HEADING3
            [5] => HEADING4
            [6] => SML
        )

    [1] => Array
        (
            [0] => content
            [1] => more content
            [2] => cont
            [3] => More more
            [4] => content
            [5] => content 2.0
            [6] => litl
        )

    [2] => Array
        (
            [0] => content
            [1] => more content
            [2] => cont
            [3] => More more
            [4] => content
            [5] => content 2.0
            [6] => litl
        )

    [3] => Array
        (
            [0] => content
            [1] => more content
            [2] => cont
            [3] => More more
            [4] => content
            [5] => content 2.0
            [6] => litl
        )

    [4] => Array
        (
            [0] => content
            [1] => more content
            [2] => cont
            [3] => More more
            [4] => content
            [5] => content 2.0
            [6] => litl
        )

    [5] => Array
        (
            [0] => content
            [1] => more content
            [2] => cont
            [3] => More more
            [4] => content
            [5] => content 2.0
            [6] => litl
        )

    [6] => Array
        (
            [0] => content
            [1] => more content
            [2] => cont
            [3] => More more
            [4] => content
            [5] => content 2.0
            [6] => litl
        )

    [7] => Array
        (
            [0] => content
            [1] => more content
            [2] => cont
            [3] => More more
            [4] => content
            [5] => content 2.0
            [6] => litl
        )

    [8] => Array
        (
            [0] => content
            [1] => more content
            [2] => cont
            [3] => More more
            [4] => content
            [5] => content 2.0
            [6] => litl
        )

    [9] => Array
        (
            [0] => TOTALS        AGENTS:21
            [1] => total
            [2] => total
            [3] => total
            [4] => total
            [5] => total
        )

) 
```

希望这有帮助:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T09:41:31.400

这是一个完整的红宝石解决方案。不过，您需要手动将 a 添加`|`到最后一行。

```
require 'builder'

table = '+------------+-------------+-------+-------------+------------+---------------+----------+
| HEADING 1  | HEADING 2   | ETC   | ANOTHER     | HEADING3   | HEADING4     | SML |
+------------+-------------+-------+-------------+------------+---------------+----------+
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
| content   | more content | cont  | More more   | content    | content 2.0  | litl |
+------------+-------------+-------+-------------+------------+--------------+----------+
| TOTALS        AGENTS:21  |  total|        total|       total|         total| total|
+------------+-------------+-------+-------------+------------+--------------+----------+';

def parse_table(table)
  rows = []
  table.each_line do |line|
    next if line.match /^\+/
    rows << line.split(/\s*\|\s*/).reject(&:empty?) 
  end
  rows
end

def html_row(xml, columns)
  xml.tr do
    columns.each do |column|
      xml.td column
    end
  end
end

def html_table(rows)
  head_row = rows.first
  body_rows = rows[1..-1]

  xml = Builder::XmlMarkup.new :indent => 2
  xml.table do
    xml.thead do
      html_row xml, head_row
    end
    xml.tbody do
      body_rows.each do |body_row|
        html_row xml, body_row
      end
    end
  end.to_s
end

rows = parse_table(table)
html = html_table(rows)
puts html 
```

输出：

```
<table>
  <thead>
    <tr>
      <td>HEADING 1</td>
      <td>HEADING 2</td>
      <td>ETC</td>
      <td>ANOTHER</td>
      <td>HEADING3</td>
      <td>HEADING4</td>
      <td>SML</td>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>content</td>
      <td>more content</td>
      <td>cont</td>
      <td>More more</td>
      <td>content</td>
      <td>content 2.0</td>
      <td>litl</td>
    </tr>
    <tr>
      <td>content</td>
      <td>more content</td>
      <td>cont</td>
      <td>More more</td>
      <td>content</td>
      <td>content 2.0</td>
      <td>litl</td>
    </tr>
    <tr>
      <td>content</td>
      <td>more content</td>
      <td>cont</td>
      <td>More more</td>
      <td>content</td>
      <td>content 2.0</td>
      <td>litl</td>
    </tr>
    <tr>
      <td>content</td>
      <td>more content</td>
      <td>cont</td>
      <td>More more</td>
      <td>content</td>
      <td>content 2.0</td>
      <td>litl</td>
    </tr>
    <tr>
      <td>content</td>
      <td>more content</td>
      <td>cont</td>
      <td>More more</td>
      <td>content</td>
      <td>content 2.0</td>
      <td>litl</td>
    </tr>
    <tr>
      <td>content</td>
      <td>more content</td>
      <td>cont</td>
      <td>More more</td>
      <td>content</td>
      <td>content 2.0</td>
      <td>litl</td>
    </tr>
    <tr>
      <td>content</td>
      <td>more content</td>
      <td>cont</td>
      <td>More more</td>
      <td>content</td>
      <td>content 2.0</td>
      <td>litl</td>
    </tr>
    <tr>
      <td>content</td>
      <td>more content</td>
      <td>cont</td>
      <td>More more</td>
      <td>content</td>
      <td>content 2.0</td>
      <td>litl</td>
    </tr>
    <tr>
      <td>TOTALS        AGENTS:21</td>
      <td>total</td>
      <td>total</td>
      <td>total</td>
      <td>total</td>
      <td>total</td>
    </tr>
  </tbody>
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T08:29:45.440

对于将字段从表中取出的主要工作，使用`split`模式来获取每一行：

```
line.split(/\s*\|\s*/) 
```

`|`这将根据每个和任何周围的空白将该行拆分为一个数组。丢弃数组的第一个和最后一个元素，因为该模式也匹配开始和结束`|`。

# python - 如何在python中从csv文件中提取特定列并为其编写新的csv

> ID：15083242
> 
> 赞同：-2
> 
> 时间：2013-02-26T07:02:32.270
> 
> 标签：python, list, memory, csv, dictionary

我有一个 csv 文件，我想从中提取一些特定的列。我怎样才能做到这一点？
我有一个标题字典和单元格位置，例如：

```
dict = {'Col1' : [(4,5)], 'Col2' : [(4,7)], 'Col3' : [(4,9)]} 
```

我想从dict的值开始提取数据，直到csv文件的结尾！

例如：

```
,,,,,,,,,,
,,,,,,,,,,
,,,,,,,,,,
,,,Col0,Col1,,Col2,,Col3,Col4,
,,,bgr,abc,,efg,,hij,123,
,,,cde,klm,,nop,,qrs,123,
,,,asd,tuv,,wxy,,zzz,456,
,,,,,,,,,,
,,,,,,,,,, 
```

我要提取

```
Col1,Col2,Col3
abc,efg,hij
klm,nop,qrs
tuv,wxy,zzz 
```

并将其写入一个新的 csv 文件！请帮我这样做！
我想有效地处理这种情况！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:59:00.737

[Pandas](http://pandas.pydata.org/)是一个具有强大[方法](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.io.parsers.read_csv.html#pandas.io.parsers.read_csv)来读取 csv 文件的库。

如果您想从同一行读取每一列，以下脚本将完成工作（请注意，只有 2 行 python 行是有用的）：

```
import pandas as pd

# Give the name of the columns
colnames = ('skip1', 'skip2', 'skip3', 'Col0','Col1','skip4','Col2','skip5','Col3','Col4','skip6')
# Give the number of lines to skip
nbskip=4
# Give the number of rows to read (you can also filter rows after reading and remove the empty ones)
nrows=3
#List of columns to keep
keep_only = ('Col1','Col2','Col3')

#Read the csv
df =  pd.io.parsers.read_csv('test.csv', 
                 header=None,
                 skiprows=nbskip,
                 names=colnames,
                 nrows=nrows, # Remove if you prefer filter rows
                 usecols=keep_only)

# If the number of lines to keep is unknow,
# you can remove empty lines here

#Save the csv
df.to_csv('result.csv', index=False) 
```

# javascript - 从下拉列表中获取值并在 Java 脚本的同一页面中显示结果

> ID：15083244
> 
> 赞同：0
> 
> 时间：2013-02-26T07:02:36.800
> 
> 标签：javascript, drop-down-menu, calculator

这是标题。它在新页面中给出结果，而我想在代码运行的同一页面中显示结果。请帮忙。

```
function calculate() {
    var width = document.getElementById("width");
    width1 =  width.options[width.selectedIndex].text;  
    var height = document.getElementById("height");
    var height1 =  height.options[height.selectedIndex].text;    
    var calculate = width1 * height1 * 3;
    result.innerHTML = "<div>" + calculate + "</div>";
} 
```

身体

```
Choose Width
<select id="width" name="height" onchange="calculate()">
    <option>1</option>
    <option>1</option>
</select>
<br/>
Choose Heiht
<select id="height" name="height" onchange="calculate()">
    <option>1</option>
    <option>2</option>      
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:07:57.010

你可以使用：

```
Choose Width:

<select id="width" name="height" onchange="calculate()">
    <option>1</option>
    <option>2</option>
</select>

    <br/>

   Choose Height

<select id="height" name="height" onchange="calculate()">
    <option>1</option>
    <option>2</option>      
</select>
<div id="result"></div> 
```

和 javascript 应该是：

```
function calculate()
{
    var width = document.getElementById("width");
    width1 =  width.options[width.selectedIndex].text;  
    var height = document.getElementById("height");
    var height1 =  height.options[height.selectedIndex].text;    
    var calculate = width1*height1*3;
    var result = document.getElementById("result");
    result.innerHTML = calculate;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:10:54.173

你应该`result`在你的 HTML 代码中有一个 div，然后你需要做 innerHTML 或 innerText 来放置你的结果
添加新标签（在你的 HTML 代码中）

```
<div id="result"></div> 
```

现在在 JS 中更新这个 div 元素

```
var result = document.getElementById("result");
result.innerText = calculate; 
```

# ant - 将 Ant Web 应用程序项目转换为 Maven 项目

> ID：15083245
> 
> 赞同：0
> 
> 时间：2013-02-26T07:02:45.347
> 
> 标签：ant, maven-2

嗨，我有一个使用 Ant 构建的正在运行的代码项目，现在我需要将其转换为 maven，我浏览解决方案，我所做的只是创建一个新的 maven Web 项目并将我所有的 src 文件添加到 src/main/java以及所有 xml 文件（例如 security.xml、tiles-config.xml、web.xml、properties 文件、jsp 文件夹等）到 webapp/web-inf/ 文件夹。到目前为止是正确的吗？

主要问题是如何创建一个 pom 文件，我的意思是因为我使用了很多 jar 来支持代码，如何在我的 pom 文件中提及它..我是否必须为它们中的每一个提及？请给个主意..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:45:47.663

我开发了一个脚本来将遗留的 ANT 项目转换为 Maven 基础设施：

*   [ant2ivy](https://github.com/myspotontheweb/ant2ivy)

它专注于生成依赖项列表，[Apache ivy](http://ant.apache.org/ivy/)插件从 Maven 存储库下载。它还能够为那些永远无法识别的 5-10% 的 jar 文件创建一个本地 repo（没有人记得是谁将它们添加到项目中......）

这段代码可以用来生成一个 Maven POM，这是我一直在考虑的一项工作。问题在于以无缝方式将 ANT 项目切换到 Maven 真的很困难……Maven 有一套标准化的生命周期操作，而 ANT 构建脚本是自由格式的。这解释了为什么我专注于依赖管理。

# javascript - 通知 Javascript 变量

> ID：15083248
> 
> 赞同：0
> 
> 时间：2013-02-26T07:03:05.437
> 
> 标签：javascript, jquery, notifications, event-handling, dom-events

我有一个通用事件处理程序，用于更改动态创建的属性浏览器的值（属性名称和属性值的键值对）。根据属性的类型，我在哪里创建 KVP 的控件。

```
//Property Object
function PropertyValue(
    PropertyName, 
    PropertyValue, 
    PropertyType, 
    PropertyValueList
) {
    this.PropertyName = PropertyName;
    this.PropertyValue = PropertyValue;
    this.PropertyType = PropertyType;
    this.PropertyValueList = PropertyValueList;
}

//List of Objects for the Property Browser.
var propertyList = []; 
```

现在我正在根据**PropertyType**值创建控件类型，如 (ComboBox,ColorPicker,CheckBox,TextBox)。我有一个常见的事件来获取通知。

```
function OnUpdate(event) {
    var element = event.target;
    UpdateProperty(element.id);
    alert(element.id  + ":" +element.value);
} 
```

此属性值适用于在画布上绘制并每 250 毫秒重绘一次的图表控件（在 中调用自定义重绘函数`SetInter`）。我希望在属性浏览器中更改任何属性值后立即更新值更改。我不想更新数组中的值，然后遍历循环以获取更新后的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:48:54.243

```
 window.PropertyType.addEventListener('stateChange', function() {
            if (PropertyType= //value or range or values) {
                   //execute change
            }
            else (PropertyType= //value or range or values) {  
                   //execute change
            } 
```

我不认为我完全理解这个问题，但是如果只有这么多的状态改变选项，一个通过 ifelse 循环迭代的监听器可以解决问题吗？

# c# - 如何编写用于显示日期范围的 sql 查询？

> ID：15083250
> 
> 赞同：-2
> 
> 时间：2013-02-26T07:03:19.930
> 
> 标签：c#, winforms

我是 SQL Server 2008 的新手。我有一个如下所示的表：

`student`桌子 ：

```
create student
(
     id int, 
     score varchar(10), 
     marks varchar(10),
     date datetime 
)     

id   score marke date ... so on
--------------------------------
1     34    13   3-6-2012
2     50    14   3-7-2012
3     25    9    3-2-2012
1     20    5    2-2-2013
1     10    4    2-7-2013...so on 
```

我只想为特定的 id 显示这样的表格

```
 6-june  2012-2013    34     13
 2-feb   2013-2014    20      5
 7 -july 2014-2013    10      4 
```

注：从 2012 年 6 月到 2013 年 7 月。

注意：每当将任何日期插入应更新的表格并按升序显示在表格中时

注意：我们需要向该表添加任何列，并且我们需要添加任何表。

从我们一直使用的那个日期列中的那个表学生

请帮助我提前谢谢。至少为 daterange 编写查询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:19:36.027

你的意思是：

```
SELECT date, score, marks WHERE id = 1 ORDER BY DATE 
```

而不是 1 使用您想要的任何 ID...

# c# - 日期时间不显示周数

> ID：15083252
> 
> 赞同：-2
> 
> 时间：2013-02-26T07:03:30.127
> 
> 标签：c#, datetime

我有一个提取日期信息的网络应用程序。我想要的是提取全年的周数。

```
DateTime nicole = new DateTime();

for (int i = 1; i <= 366; i++)
 {
System.Globalization.CultureInfo ci =     System.Threading.Thread.CurrentThread.CurrentCulture;

  Int32 weekNo = ci.Calendar.GetWeekOfYear(
                    new DateTime(nicole.Year,nicole.Month,nicole.Day),
                    ci.DateTimeFormat.CalendarWeekRule,
                    ci.DateTimeFormat.FirstDayOfWeek
                );
  response.write(ci);

 } 
```

结果是

```
 en-USen-USen-USen-USen-USen-USen-USen-USen-USen-USen-USen-USen-USen-USen-USen-USen- 
```

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:07:04.763

你在写`ci`- CultureInfo。试着改写`weekNo`。那将是代表一周的int。虽然它会在一行上写 367 个数字。您可能希望您的输出行读取

```
response.write(ci.ToString()) + Environment.NewLine; 
```

编辑 - 您可能想使用您的 for 循环，可能如下所示？

 ~~~~```
Int32 weekNo = ci.Calendar.GetWeekOfYear(
                new DateTime(nicole.Year,nicole.Month,i),
                ci.DateTimeFormat.CalendarWeekRule,
                ci.DateTimeFormat.FirstDayOfWeek
            );
response.write(ci); 
```~~ 

~~进一步编辑。正如评论所说，在`i`这里前进无济于事，因为它处于当月的位置。相反，代码应为：~~

 ~~```
Int32 weekNo = ci.Calendar.GetWeekOfYear(
                new DateTime(nicole.Year,1,1).AddDays(i),
                ci.DateTimeFormat.CalendarWeekRule,
                ci.DateTimeFormat.FirstDayOfWeek
            );
response.write(ci); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:20:27.513

我知道这并不是您问题的真正答案，但也许这就是您想要做的：

```
var year = DateTime.Now.Year;
var ci = System.Threading.Thread.CurrentThread.CurrentCulture;
var nicole = new DateTime(year, 1, 1);
while (nicole.Year == year)
{
    response.write(ci.Calendar.GetWeekOfYear(nicole, ci.DateTimeFormat.CalendarWeekRule, ci.DateTimeFormat.FirstDayOfWeek));
    nicole = nicole.AddDays(1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:06:58.407

尝试写作

response.write(weekNo);

作为代码的最后一条语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T07:09:14.910

我想你想要

```
response.write(weekNo); // not write(ci) 
```

不要忘记添加某种分隔符。

旁注：根据您使用的框架（MVC？普通的 ASP.Net，其他），可能有更好的方法来返回结构化数据。即MVC 中的[JsonResult](http://msdn.microsoft.com/en-us/library/system.web.mvc.jsonresult%28v=vs.108%29.aspx)可能比不带分隔符的数字字符串更适合值列表。

旁注2：要获得正确的“一年中的一天”，请使用不同的构造函数和[AddDays](http://msdn.microsoft.com/en-us/library/system.datetime.adddays.aspx)：

```
 new DateTime(nicole.Year,1,1).AddDays(i-1); 
```~~~~

# struts2 - 在 displaytag 中调用 javascript 函数

> ID：15083254
> 
> 赞同：0
> 
> 时间：2013-02-26T07:03:49.573
> 
> 标签：struts2, struts, displaytag

如何在struts displaytag中调用javascript函数，我想将id传递给那个javascript函数。我不知道任何人帮助我..

```
<display:column style="text-align: center;" title="Booth No"
        property="partNo" /> 
```

在这里我怎么能调用javascript函数..

这是我的代码..

```
<div >
            <display:table id="boothResultsTableId"
                 name="${boothResult.perWiseboothResults}"
                defaultorder="ascending" defaultsort="4"
                style="width:auto;margin-left:1px;border:1px solid #C4DEFF;">

            <display:column style="text-align:center;" title="Polling % Range"
                    property="location" />
            <display:column style="text-align:center;" title="Total No of Booths"
                    property="votesEarned">
                    <div class="coverAll" 
                        onclick="alert('hi');">
                    </div>
            </display:column>
            <display:column style="text-align:center;" title="Party Votes %"
                    property="percentage" />
            </display:table>
            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:40:02.930

`<display:column style="text-align: center;" title="Booth No" property="partNo" />`
`<a onclick="fn(${row.id})">link</a>`
`</display:column>`

从哪里来... `row`_`<display:table id="row"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:11:45.843

何时调用 javascript 函数？什么时候点击？

JSP

```
<display:column style="text-align: center;" title="Booth No" property="partNo" />
   <div class="coverAll" 
       onclick="alert('hi ! ID is ' + <s:property value="#attr.myTab.myId" />);">
      stuff inside the div
   </div>
</display:column> 
```

CSS

```
.coverAll{
   width: 100%;
   height: 100%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:59:18.503

虽然我是 STRUTS 新手，但我阅读了 Andrea 的帖子并使用了`#attr.`价值理念。这可能是黑客的做法，但它奏效了。

这是我的`<display.column`代码：

```
<display:column class="textBold8" property="supplierCd" style="color:black"
    paramId="supplierCd" paramProperty="supplierCd" titleKey="supplier.supplierCd"
    sortable="true" href="javascript:openSmallWin(\'#attr.supplier.supplierId\');//">
</display:column> 
```

这是我的 JavaScript 代码：

```
function openSmallWin(s) {
    // The value of 's' is selected using a .substring method in order to isolate the    actual
    // value of the supplier code. What comes into the javascript function is 
    // '?supplierCd=xxxxxxxxx#attr.supplier.suplierId'.
    // Where xxxxxxxxx is the actual value of the Supplier Code. Sorry.     
    var theUrl = "<%=request.getContextPath()%>/supplier.do? method=view&supplierCd="+s.substring(12,21);
    window.open(theUrl,"purchaseOrderWnd", 'resizable=1,scrollbars=1,width=800,height=675')
} 
```

# android - 打开自定义 BaseAdapter 的问题

> ID：15083256
> 
> 赞同：0
> 
> 时间：2013-02-26T07:03:52.963
> 
> 标签：android, listview, switch-statement, baseadapter

我有一个片段，其中包含我的应用程序的所有配置文件的列表。此列表使用自定义 BaseAdapter。这是此适配器的规格：

*   用户一次只能启用一个配置文件。
*   如果用户尝试禁用所有配置文件，则会警告用户并且最后启用的配置文件将设置回启用。
*   如果用户尝试启用未配置的配置文件，用户将收到警告，最后启用的配置文件将设置回启用。
*   用户可以配置每个配置文件。

一切正常，除了第一次创建列表时我当前的实现存在一个问题：

*   如果用户在第一次创建列表时启用（用户选中 Switch）列表中的第一个配置文件，然后尝试启用另一个配置文件，则第一个配置文件仍会被选中（仍选中 Switch）。另请注意，即使检查了第一个配置文件，实际启用的配置文件也将是稍后检查的配置文件。
*   如果选择了其他配置文件，则不会发生这种情况。每当启用其他配置文件时，所有其他配置文件都会被禁用。
*   但是，在活动暂停并恢复后，一切都按预期进行。这意味着仍然检查第一个开关的问题将消失。

这是此问题的图形表示： ![在此处输入图像描述](../Images/b8cf7d460961eac45c93bc387caae27a.png)

这是承载 BaseAdapter (AdapterProfiles) 的该片段的代码。PreferenceData 是一个处理与共享首选项相关的所有内容的类。：

```
public class Profiles extends Fragment implements OnCustomClickListener {

private View view_profiles;
private ListView lv_profiles;

private PreferenceData dataPreferenceObj;

private AdapterProfiles adapter;
private ArrayList<String> profileList = new ArrayList<String>();
private final ArrayList<HashMap<String, String>> profilesList = new ArrayList<HashMap<String, String>>();

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // ...
    lv_profiles = (ListView) view_profiles.findViewById(R.id.lv_profiles);
    // ...
}

@Override
public void onResume() {
    createProfileList();
    // Registers broadcast receiver

    super.onResume();
}

private void createProfileList() {
    if (profilesList.isEmpty() == true) {
        profileList = new ProfileList().getProfileList();

        for (int i = 0; i < profileList.size(); i++) {
            HashMap<String, String> map = new HashMap<String, String>();
            map.put(Keys.KEY_PROFILE.toString(), profileList.get(i));
            profilesList.add(map);
        }
    }

    adapter = new AdapterProfiles(getActivity(), profilesList, this);
    lv_profiles.setAdapter(adapter);
}

/*
 * This is a custom onclick listener that gets handle from of list from
 * LazyAdapterProfiles
 */
@Override
public void OnCustomClick(View view, int position) {
    switch (view.getId()) {
    case R.id.iv_profiles_settings:
        // Opens setting for settings of profile clicked on
        break;
    case R.id.sw_profiles:
        Switch sw_profiles = (Switch) view.findViewById(R.id.sw_profiles);

        // Stops user from enabling profile that is not configured.
        if (dataPreferenceObj.getTemporaryRingtoneUri().equals("") == true
                || dataPreferenceObj.getTemporaryLocation().equals("") == true) {
            sw_profiles.setChecked(false);

            showWarningDialog(
                    "Profile Disabled",
                    "Profile location and ringtone must be selected in order to enable this profile.");
        } else if (dataPreferenceObj.getTemporaryRingtoneUri().equals("") != true
                && dataPreferenceObj.getTemporaryLocation().equals("") != true) {
            if (sw_profiles.isChecked() == true) {
                unselectProfileState(position);
            } else if (sw_profiles.isChecked() == false) {
                // Stops user from disabling profile as atleast one profile
                // must be enabled
                showWarningDialog("Profile Cannot Disable",
                        "Atleast one profile must be enabled");

                sw_profiles.setChecked(true);
            }

            // Rest of the code that writes the preference and broadcast it
        }
        break;
    }
}

// Gets switch map of all profiles and uncheck profile other than one that
// is selected.
private void unselectProfileState(int position) {
    for (int i = 0; i < profileList.size(); i++) {
        if (position != i) {
            AdapterProfiles.getMapHolder().get(i).sw_profiles
                    .setChecked(false);
        }
    }
} 
```

}

我有一个自定义 BaseAdapter，它的每一行都包含 TextView、ImageView 和 Switch，如下所示： ![在此处输入图像描述](../Images/3e4c36ceb8b171c44587abed6a812e37.png)

这是我在列表中创建行的 BaseAdapter 的实现：

```
public class AdapterProfiles extends BaseAdapter {

private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater = null;

private String profile_name;
private String retrived_profile_name;

private ViewHolder holder;
private Activity activity;

private OnCustomClickListener callback;
private static SparseArray<ViewHolder> mapHolder = new SparseArray<ViewHolder>();

public AdapterProfiles(Activity activity,
        ArrayList<HashMap<String, String>> data,
        OnCustomClickListener callback) {

    this.activity = activity;
    this.data = data;
    this.callback = callback;

    inflater = (LayoutInflater) activity
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

public AdapterProfiles(Activity activity,
        ArrayList<HashMap<String, String>> data) {
    this.data = data;

    inflater = (LayoutInflater) activity
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

public View getView(int position, View convertView, ViewGroup parent) {

    if (convertView == null) {
        convertView = inflater.inflate(R.layout.ui_profiles_row, null);

        holder = new ViewHolder();

        holder.tv_profiles_name = (TextView) convertView
                .findViewById(R.id.tv_profiles_name);
        holder.tv_profiles_location_name = (TextView) convertView
                .findViewById(R.id.tv_profiles_location_name);
        holder.iv_profiles_settings = (ImageView) convertView
                .findViewById(R.id.iv_profiles_settings);
        holder.sw_profiles = (Switch) convertView
                .findViewById(R.id.sw_profiles);

        holder.iv_profiles_settings
                .setOnClickListener(new CustomOnClickListener(callback,
                        position));
        holder.sw_profiles.setOnClickListener(new CustomOnClickListener(
                callback, position));

        convertView.setTag(holder);

        mapHolder.put(position, holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    getPrefs(position);
    setUIData();

    return convertView;
}

private void getPrefs(int position) {
    HashMap<String, String> word = new HashMap<String, String>();
    word = data.get(position);

    profile_name = word.get(Keys.KEY_PROFILE.toString());

    SharedPreferences settings = activity.getSharedPreferences(
            Keys.PREFS_APP.toString(), 0);
    // This allows us to retrive unique data based on the profile names
    String PROFILE_LOCATION = Keys.KEY_LOCATION.toString() + "_"
            + profile_name;
    retrived_profile_name = settings.getString(Keys.KEY_PROFILE.toString(),
            "");
}

// Sets UI data of item in the list
private void setUIData() {
    if (profile_name.equals(retrived_profile_name) == true) {
        holder.sw_profiles.setChecked(true);
    } else if (profile_name.equals(retrived_profile_name) == false) {
        holder.sw_profiles.setChecked(false);
    }
}

public static class ViewHolder {
    public ImageView iv_profiles_settings;
    public TextView tv_profiles_location_name;
    public TextView tv_profiles_name;
    public Switch sw_profiles;
}

public static SparseArray<ViewHolder> getMapHolder() {
    return mapHolder;
} 
```

}

最后是 CustomOnClickListener 类，如果有人想知道它是什么。该类的实现是将回调映射到列表中的特定组件。这个类最初是由某人创建的（我没有在我的书签中找到它来感谢作者），我使用他/她的示例来适应我自己的实现。这是代码：

```
public class CustomOnClickListener implements OnClickListener {
private int position;
private OnCustomClickListener callback;

public CustomOnClickListener(OnCustomClickListener callback, int position) {
    this.position = position;
    this.callback = callback;
}

@Override
public void onClick(View v) {
    callback.OnCustomClick(v, position);
}

}

public interface OnCustomClickListener {
    public void OnCustomClick(View view, int position);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:13:18.670

现在，当我知道 notifyDataSetChanged() 方法会刷新视图上的更改时，在这里实现我自己的方法来取消选择适配器中的所有其他 Switch 似乎很愚蠢。现在我似乎通过删除这些代码解决了这个问题：

```
if (sw_profiles.isChecked() == true) {
                unselectProfileState(position);
            } 

private void unselectProfileState(int position) {
for (int i = 0; i < profileList.size(); i++) {
    if (position != i) {
        AdapterProfiles.getMapHolder().get(i).sw_profiles
                .setChecked(false);
    }
} 
```

}

并在 OnCustomClick 案例 R.id.sw_profiles 的末尾添加以下内容。如前所述，这里是 Android 文档中对此方法的快速描述*“通知附加的观察者基础数据已更改，任何反映数据集的视图都应自行刷新。”* ：

```
adapter.notifyDataSetChanged(); 
```

# sql - 前触发器的语法错误

> ID：15083266
> 
> 赞同：0
> 
> 时间：2013-02-26T07:04:32.167
> 
> 标签：sql, oracle, syntax, triggers

我有一个表`BOOKING(hotelID, roomNo, guestID, startDate, endDate)` ，我想创建一个触发器来通过比较`startDate`和`endDate`查看时间段是否已被其他客人占用来进行验证（插入之前）。

```
CREATE OR REPLACE TRIGGER MYTRIGGER 
BEFORE insert ON BOOKING 

referencing new as newTuple
for each row

declare
  t boolean;
  cursor c is 
    select startDate,endDate from ROOM where hotelID = newTuple.hotelID and ROOMNO = newTuple.roomNo;
BEGIN
  t := true;
  open c;
  loop
    fetch c into mStartDate, mEndDate;
    exit when c%NOTFOUND;

    if (NOT((newTuple.startDate >= mEndDate and newTuple.endDate >= mEndDate)
        or(newTuple.startDate <= mStartDate and newTuple.endDate <= mStartDate))) then
      t := false;
    end if;

  end loop;
  close c;

  WHEN (t=true) then
  INSERT INTO BOOKING(hotelID,roomNo,guestID,startDate,endDate) 
  values(newTuple.hotelID, newTuple.roomNo, newTuple.guestID, newTuple.startDate,
         newTyple.endDate);
END; 
```

但它给了我不知道如何解决的语法错误消息（我是 Oracle 新手）：

```
Error(26,3): PLS-00103: Encountered the symbol "WHEN" when expecting one of the following:
( begin case declare end exception exit for goto if loop mod
null pragma raise return select update while with
<an identifier> <a double-quoted delimited-identifier>
<a bind variable> << continue close current delete fetch lock
insert open rollback savepoint set sql execute commit forall
merge pipe purge
The symbol "case" was substituted for "WHEN" to continue. 
Error(30,4): PLS-00103: Encountered the symbol ";" when expecting one of the following:
case 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:57:43.000

您错误地使用了`CASE..WHEN`PL/SQL 上的结构。查看 Oracle 文档站点上的[PL/SQL 控制结构](http://docs.oracle.com/cd/B10500_01/appdev.920/a96624/04_struc.htm)手册页。这是 CASE..WHEN 的另一个示例，用于[SO 问题](https://stackoverflow.com/questions/5559987/plsql-case-when-condition)及其答案。

基本上你需要改变这个

```
WHEN (t=true) then
INSERT INTO BOOKING(hotelID,roomNo,guestID,startDate,endDate) 
VALUES (newTuple.hotelID, newTuple.roomNo, newTuple.guestID, newTuple.startDate,
        newTyple.endDate); 
```

这样：

```
CASE
  WHEN (t=true) THEN INSERT INTO BOOKING(hotelID,roomNo,guestID,startDate,endDate) 
                     VALUES (newTuple.hotelID, newTuple.roomNo, newTuple.guestID, 
                             newTuple.startDate, newTyple.endDate);
END CASE; 
```

或者正如对您的问题的评论所建议的那样，如果您只检查一个条件，为什么不使用和`IF`结构？它将更干净，更容易理解/维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:19:14.443

直接的问题是您正在使用`WHEN`，它是`CASE`构造的一部分。您需要在`IF`这里使用：

```
IF t then
    INSERT INTO BOOKING(hotelID,roomNo,guestID,startDate,endDate) ...
END IF; 
```

但这不是触发器的工作方式 - 您不会从其中再次插入，您将尝试插入与您正在插入的行完全相同的副本，这将导致您的触发器再次触发。可能只会再一次 - 希望第二个插入会在光标中看到第一个并停止。但是两者实际上都会插入 - 当日期发生冲突时，您实际上并没有阻止插入，您只是没有尝试重复；第二个仍然会插入，所以你会得到两个相同的行。防止插入发生的正常方法是让触发器引发异常；从概念上讲：

```
IF NOT t THEN
    RAISE_APPLICATION_ERROR(-20001, 'Overlapping dates');
END IF; 
```

但这仍然行不通-您至少还有其他三个问题。首先，您不能（轻松）查询要插入的表；你会得到一个 ORA-04091 'table is mutating' 错误。其次，当您引用新值时，您需要在它们前面加上冒号，等等`:newTuple.hotelID`。第三，您遇到了并发问题；同时插入具有重叠日期的两行不会互相看到，两者都会成功。（严格来说不是错误，但循环遍历所有记录以查找匹配项将是低效的 - 为什么不只查找与插入日期冲突的现有行？）

触发器似乎不是强制执行此约束的适当方式。

* * *

好的，这实际上并没有得到一个变异表错误：

```
create table booking(hotelid number, roomno number, guestid number,
    startdate date, enddate date);

create or replace trigger mytrigger
before insert on booking 
referencing new as new
for each row
declare
    cnt number;
begin
    select count(*) into cnt from booking
    where hotelid = :new.hotelid
    and roomno = :new.roomno
    and not (enddate < :new.startdate or startdate > :new.enddate);

    if cnt > 0 then
        raise_application_error(-20001, 'Overlapping dates');
    end if;
end;
/
TRIGGER MYTRIGGER compiled 
```

插入一些数据：

```
insert into booking values (1, 1, 1, date '2013-02-28', date '2013-03-05');

1 rows inserted.

insert into booking values (1, 1, 2, date '2013-02-27', date '2013-03-01');

Error starting at line 24 in command:
insert into booking values (1, 1, 2, date '2013-02-27', date '2013-03-01')
Error report:
SQL Error: ORA-20001: Overlapping dates
ORA-06512: at "STACKOVERFLOW.MYTRIGGER", line 10
ORA-04088: error during execution of trigger 'STACKOVERFLOW.MYTRIGGER'

insert into booking values (1, 1, 3, date '2013-03-05', date '2013-03-06');

Error starting at line 25 in command:
insert into booking values (1, 1, 3, date '2013-03-05', date '2013-03-06')
Error report:
SQL Error: ORA-20001: Overlapping dates
ORA-06512: at "STACKOVERFLOW.MYTRIGGER", line 10
ORA-04088: error during execution of trigger 'STACKOVERFLOW.MYTRIGGER'

insert into booking values (1, 1, 4, date '2013-03-06', date '2013-03-07');

1 rows inserted. 
```

输入重叠日期的两次尝试得到了我们的 -20001 异常，并且只插入了两个不重叠的行：

```
select * from booking;

   HOTELID     ROOMNO    GUESTID STARTDATE  ENDDATE  
---------- ---------- ---------- ---------- ----------
         1          1          1 28/02/2013 05/03/2013 
         1          1          4 06/03/2013 07/03/2013 
```

但是你仍然有一个并发问题，因为两个会话可以同时插入重叠的数据。由于它们都未提交，因此`select count(*)`每个触发器实例中的 都不会看到另一个，因此它们都将报告零，都不会引发异常，并且都将被插入。

# ios - Apple LLVM 编译器错误 4.1 [-stdlib=libc++ 的部署目标无效]

> ID：15083268
> 
> 赞同：0
> 
> 时间：2013-02-26T07:04:42.703
> 
> 标签：ios, objective-c, compiler-errors, llvm-clang, llvm-c++-api

谁能告诉我如何解决这个错误...我的 X-Code 是 4.5 版。我的 IOS 模拟器是 4.3 版

```
clang: error: invalid deployment target for -stdlib=libc++ (requires iOS 5.0 or later) 
```

命令 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang 失败，退出代码为 1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T07:15:50.073

在您的情况下，您的项目不支持您的默认设置`deployment target`，因此您需要更改它（*如果`5.0`部署目标不可用，则更新您的系统*）

**此屏幕截图描述了如何更改部署目标：**

![在此处输入图像描述](../Images/258eaa347552071d258108bc846e761c.png)

我将所有步骤（*对于更改`deployment target`*）添加到此屏幕截图中。

1) 从项目导航栏中
选择项目 2) 选择项目目标
3) 选择**摘要**选项卡
4) 选择并更改部署目标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T10:08:33.333

使用 Xcode 4.5 创建的项目使用标准 C++ 库的 libc++ 实现。但 libc++ 库仅适用于 iOS 5.0 及更高版本，因此，如果您想在项目中启用早期版本的 iOS 部署，请将 C++ 标准库构建设置设置为 libstdc++（Gnu C++ 标准库）。

# vim - cscope 在使用 vim 键盘映射后显示错误

> ID：15083272
> 
> 赞同：3
> 
> 时间：2013-02-26T07:04:50.800
> 
> 标签：vim, cscope

[我使用来自http://cscope.sourceforge.net/cscope_maps.vim](http://cscope.sourceforge.net/cscope_maps.vim)的键盘映射在 cscope 中设置键盘快捷键。我的地图是

```
 nmap <C-s> :cs find s <C-R>=expand("<cword>")<CR><CR>    
 nmap <C-g> :cs find g <C-R>=expand("<cword>")<CR><CR>
 nmap <C-c> :cs find c <C-R>=expand("<cword>")<CR><CR>
 nmap <C-x> :cs find t <C-R>=expand("<cword>")<CR><CR>
 nmap <C-e> :cs find e <C-R>=expand("<cword>")<CR><CR>
 nmap <C-f> :cs find f <C-R>=expand("<cfile>")<CR><CR>
 nmap <C-i> :cs find i ^<C-R>=expand("<cfile>")<CR>$<CR>
 nmap <C-d> :cs find d <C-R>=expand("<cword>")<CR><CR> 
```

当我将光标放在符号上按 Ctrl-g 时，它会转到正确的定义，但会显示此错误。E259 : 没有为 cscope 查询找到匹配项

我已经想出了答案，只是将其发布，以免其他人像我一样浪费时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T04:47:41.723

您需要检查 nmap 后是否有任何额外的选项卡。删除任何额外的标签解决了我的问题。sourceforge 站点上的 cscope_maps.vim 文件有它们。还要确保“=”符号的两侧没有空格，这也可能导致这种类型的错误。

# amazon-web-services - 如何防止其他服务器访问亚马逊的mongodb？

> ID：15083279
> 
> 赞同：0
> 
> 时间：2013-02-26T07:05:16.500
> 
> 标签：amazon-web-services

我认为这样做的方法是

```
delete rules for port 27017

I did that

ICMP
Port (Service)  Source  Action
ALL sg-665f6e34 (default)   Delete
TCP
Port (Service)  Source  Action
0 - 65535   sg-665f6e34 (default)   Delete
22 (SSH)    0.0.0.0/0   Delete
80 (HTTP)   0.0.0.0/0   Delete
3306 (MYSQL)    0.0.0.0/0   Delete
5900 - 5910 0.0.0.0/0   Delete
UDP
Port (Service)  Source  Action 
```

然而，我仍然可以通过 mongovue 访问我的数据库而无需密码。

这是因为这个规则：

```
0 - 65535   sg-665f6e34 (default)   Delete 
```

但那是什么？什么是 sg-665f6e34？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T10:42:53.143

1）如果您在 VPC 中，则需要从安全组中删除所需的端口和来源，外部连接的权限和您的 MongoDB 服务器只能从您的 VPC 中使用本地地址的机器访问

2) 如果您不使用 VPC，则需要从外部连接的安全组权限中删除所需的端口和源，并明确添加您需要的端口和 IP 的权限。

注意：向源 0.0.0.0/0 打开一个端口会向任何人打开它。因此，在第二种情况下，您需要将 0.0.0.0/0 更改为您要授予对 mongo db 实例访问权限的机器的静态 IP 地址。

高温高压

# mysql - 在 MySQL 远程数据库中插入的最佳实践

> ID：15083290
> 
> 赞同：1
> 
> 时间：2013-02-26T07:05:56.417
> 
> 标签：mysql, database, vb.net, query-optimization

我试图找到最好的方法，或者“实践”来做一些 INSERT 查询。我的软件是在 Visual Basic .NET 上开发的，可以访问 MySQL Remote 数据库。我需要每天循环，并插入至少 50.000 条记录。对此进行编码的最优化方式是什么？

现在，我在每条记录上打开一个连接，然后发送 INSERT 查询。我知道这是最糟糕的方法，这就是我正在努力改进的方法。

我考虑将整个循环分成小组，每组查询 1000 条记录。他们不是太大，但他们很多。

我已经阅读了一些关于 mysql_ping 的内容，以保持连接处于活动状态并避免连接、关闭、连接等。所以这样我就可以在开始时只建立一个连接来完成循环。

我有点迷茫，你的建议是什么？

感谢你们。

编辑：这是我用来进行查询的代码：

```
 Public Function MYSQL_QUERY(ByVal QUERY As String) As Long
    Dim connStr As String = "Database=" & DB_NAME & ";" & _
                            "Data Source=" & DB_HOST & ";" & _
                            "User Id=" & DB_USER & ";Password=" & DB_PASSWORD

    Try
        Dim rowsEffected As Integer = 0
        Dim connection As New MySqlConnection(connStr)
        Dim cmd As New MySqlCommand(QUERY, connection)

        connection.Open()

        rowsEffected = cmd.ExecuteNonQuery()

        connection.Close()

        Return cmd.LastInsertedId
        Exit Function
    Catch ex As Exception
        MsgBox(ex.Message)
        Return -1
    End Try
End Function 
```

我在 LOOP 的每个 INSERT 上调用这个函数。

# php - 将日期作为文本存储在数据库中，但需要查找两个日期之间的记录？

> ID：15083294
> 
> 赞同：0
> 
> 时间：2013-02-26T07:06:05.020
> 
> 标签：php, codeigniter, date

我将日期作为 VARCHAR 存储在 mysql 表中。我实际上有一个发票表，其中存储发票详细信息及其日期。我用 php 的这个函数将这些日期存储在 VARCHAR 列中。

```
date("d/m/y") 
```

现在我需要生成从 2012 年 4 月 5 日到 2013 年 4 月 5 日的销售报告。我对如何找到日期范围感到困惑。请指导。

我正在使用代码点火器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:09:33.123

如果是日期，为什么不存储为日期？您现在可以添加另一列，然后使用脚本或程序用解析和重组的日期填充这个新列。因此，您未来的查询可以使用日期数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:54:04.583

我在这里提供一个建议，而不是一个明确的答案。

您是否有任何特定原因将日期存储为 varchar。存储为整数至少比 varchar 更有意义。你能重新设计你的数据库吗？将日期存储为日期 yyyy-mm-dd。还是在这个时候完全不可能？

如果您想要上述格式作为显示，您可以

```
<?php list($year, $month, $day) = explode("-", $date) ?> 
```

并重新排序以显示为

```
<?php echo $day."/".$month."/".$year ?> 
```

如果完全不可能返工db，那么使用MYSQL STR_TO_DATE

请查看此链接是否有帮助：[http ://www.w3resource.com/mysql/date-and-time-functions/mysql-str_to_date-function.php](http://www.w3resource.com/mysql/date-and-time-functions/mysql-str_to_date-function.php)

[编辑]

```
<?php
$date_from = '26/02/13';
$date_to = '26/02/13';

//Because STR_TO_DATE would create a valid date from what you have in varchar.
list($day, $month, $year) = explode("/", $date_from);
$date_from = $year . "-" . $month . "-" . $day;
list($day, $month, $year) = explode("/", $date_to);
$date_to = $year . "-" . $month . "-" . $day;

$this->db->where('STR_TO_DATE(`date`,"%d/%m/%y") >=', $date_from);
$this->db->where('STR_TO_DATE(`date`,"%d/%m/%y") <=', $date_to);
$query = $this->db->get('TABLENAME');

//use your result here
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:11:26.627

我认为您可以将日期从 char 获取到 timestamp ，当然，您需要为您的日期做一些格式...

这是一些示例...

```
$senttime = strtotime($date . ' ' . $hour . ':' . $min . ':00');
$exdate   = strtotime($exdate . ' 00:00:00');
$now      = strtotime("now");

if ($now < $senttime && $senttime < $exdate) {... 
```

比你能得到的范围...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T07:16:59.820

使用 MySQL 的内置字符串进行日期解析

```
SELECT * FROM your_table WHERE STR_TO_DATE(`date_column`,'%d/%m/%Y') BETWEEN '2012-04-05' to '2013-04-05' 
```

或在 CI ActiveRecord 中

```
$this->db->select('*')
$this->db->from('your_table');
$this->db->where('STR_TO_DATE(`date_column`,"%d/%m/%Y") >=', '2012-04-05');
$this->db->where('STR_TO_DATE(`date_column`,"%d/%m/%Y") <=', '2013-04-05');
$query = $this->db->get();
$results = $query->result(); 
```

# php - MYSQL SELECT 用户等级（大于 x 小于 y）

> ID：15083296
> 
> 赞同：1
> 
> 时间：2013-02-26T07:06:11.363
> 
> 标签：php, mysql, sql, select

我有点坚持使用 php/Mysql 查询。我有 2 张桌子：

```
 table_users              table_ranks
----------------    ------------------------
| id  | points |    | name | points_needed |
----------------    ------------------------
| 1   |   2    |    | lvl0 |      0        |
| 2   |   10   |    | lvl1 |      10       |
| 3   |   21   |    | lvl2 |      20       |
| 4   |   29   |    | lvl3 |      30       |
----------------    ------------------------ 
```

我需要这样的输出：

*   User_1 = lvl0（因为用户有2分）
*   User_2 = lvl1（因为用户刚刚达到10分）
*   ...
*   User_4 = lvl2（因为用户还没有达到30点）

想你:)

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:30:08.690

你可以这样做

```
SELECT
  tu.id,
  tr.name,
  tu.points
FROM table_ranks as tr
  LEFT JOIN (SELECT * FROM table_ranks LIMIT 1,69596585953484) as l
    ON l.points_needed = (SELECT MIN(points_needed) FROM table_ranks WHERE points_needed > tr.points_needed limit 1)
  LEFT OUTER JOIN table_users AS tu ON tu.points >= tr.points_needed AND tu.points < l.points_needed
WHERE tu.id IS NOT NULL
group by tu.id 
```

[小提琴](http://sqlfiddle.com/#!2/832ccb/2)

输出

```
-------------------------
| id  | points   | name |
-------------------------
| 1   |   lvl0   | 2    |
| 2   |   lvl1   | 10   |
| 3   |   lvl2   | 21   |
| 4   |   lvl2   | 29   |
------------------------- 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:20:01.733

试一试，由于桌子设计有点乱，

```
SELECT  u.*, r.name
FROM    table_users u
        INNER JOIN
        (
            SELECT x.name, 
                   x.points_needed start_point, 
                   COALESCE(y.points_needed - 1, 2000000) end_point
            FROM
            (
              SELECT name, points_needed, @rank:=@rank+1 ranks
              FROM table_ranks a, (SELECT @rank:=0) b
              ORDER BY points_needed
            ) x
            LEFT JOIN 
            (
              SELECT name, points_needed, @rank1:=@rank1+1 ranks
              FROM table_ranks a, (SELECT @rank1:=0) b
              ORDER BY points_needed
            ) y ON x.ranks+1 = y.ranks
        ) r ON u.points BETWEEN r.start_point AND r.end_point 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/b9263/13)

# php - 如果 FromId 是 Gmailid，则邮件不会发送

> ID：15083297
> 
> 赞同：1
> 
> 时间：2013-02-26T07:06:12.853
> 
> 标签：php, email, gmail

我正在使用 php mail() 发送“联系我们”邮件。代码如下

```
$mailTo='test@example.com';
$mailfrom='test@gmail.com';
$mailSubject=$subject;
$mailBody="testing";
$headers  = "MIME-Version: 1.0\n";
$headers .= "Content-type: text/html; charset=iso-8859-1\n";
$headers .= "From: ".$mailfrom."\n";
mail($mailTo,$mailSubject,$mailBody,$headers); 
```

如果 From Id 是 Gmail id 邮件未发送。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:30:12.667

使用 gmail SSL 进行身份验证：

```
$from = "from.gmail.com";
$to = "to.yahoo.com";
$subject = "Test";
$body = "Test";

$host = "ssl://smtp.gmail.com";
$port = "465";
$username = "asitha.gmail.com";
$password = "password"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T07:10:20.010

它是否与 Yahoo 或其他电子邮件 ID 一起使用，您可以尝试通过启用 SSL 属性设置为 true set **smtpClientObj.EnableSsl = true**；在您的代码中并尝试希望它对您有所帮助我在*PHP 的 C# 代码中遇到了同样的问题您可以搜索如何将此 EnableSSL 属性设置为 True*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:11:36.967

你不是 Gmail。不要冒充他们发送电子邮件。

（它可能被垃圾邮件过滤器阻止了。）

# javascript - NodeJS，分配名称/获取翡翠复选框的值

> ID：15083309
> 
> 赞同：2
> 
> 时间：2013-02-26T07:07:10.130
> 
> 标签：javascript, node.js, mobile-website, pug, express

我在 Mongo 数据库的表单中填充了一个表。我希望用户能够选择一个或多个复选框，然后确定从表中选择了哪些项目。问题的一部分是我不确定如何命名复选框，因为它们是动态创建的。我也不知道如何阅读复选框属性。

我正在使用 ExpressJS 和 Jade。我可以毫无问题地填充表格，但不知道如何传达选择了哪些项目。

这是我的玉

```
 h1 index view

    form  (method='post', action='/customers/check')
      fieldset
        legend Add a Customer
    div.clearfix
      -if(docs.length)
      table(style="border-left:1px solid black")
        tr
          th First Name
          th Last Name
          th "Hidden" 
            each first in docs
              tr
               td #{first.first} 
               td #{first.surname}
               td #{first.group}
               td
                 div.input
                    input(type="checkbox", name=(#{first.box}), unchecked=     (true===true ? "checked" : "")).checkbox
        div.actions
          input(type='submit', value='Save', class='btn primary')
          button(type='reset', class='btn') Cancel 
```

我的 Mongo 数据库有四个属性（首先，姓氏，组，我添加了框以试图解决这个问题在大图中我正在做的是接受一个字符串输入，然后用这个表渲染一个视图，我想存储字符串输入和从表中选择到另一个具有两个属性（字符串和复杂对象）的任何元素（字符串和复杂对象）请保存！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T17:19:57.823

啊，明白了，一直在围绕解决方案跳舞

```
 h1 index view

 form(method='post', action='/customers/check')
fieldset
    legend Add a Customer
    div.clearfix
        -if(docs.length)
            table(style="border-left:1px solid black")
                tr
                    th First Name
                    th Last Name
                    th "Hidden" 
                        each first in docs
                            tr
                                td #{first.first} 
                                td #{first.surname}
                                td #{first.group}
                                td
                                    div(data-role='fieldcontain')   
                                        fieldset(data-type='vertical', data-role='controlgroup')                                           
                                            label(for='showpass') show password
                                            input(id='showpass',type='checkbox', name='#{first.id}')
    div.actions
        input(type='submit', value='Save', class='btn primary')
        button(type='reset', class='btn') Cancel 
```

我的服务器端我将检查的值放入一个名为“arr”的数组中，这里是

```
 app.post('/customers/check', function(req, res) {
        console.log(req.body);
        var locks = req.body;
        var arr = Object.keys(locks);
        console.log(arr);   
        res.redirect('/customers')
}); 
```

# android - 我在 BOOT_COMPLETED 中有问题

> ID：15083312
> 
> 赞同：3
> 
> 时间：2013-02-26T07:07:16.703
> 
> 标签：android, broadcastreceiver, boot

***注意：在问这个之前我已经浏览了stackoverflow的答案，所以不要让它重复***

我正在尝试创建在后台模式下运行的应用程序，我的应用程序中没有任何活动，我的应用程序应该像 10 分钟后一样工作，它将检查通话记录，如果它从上次更改，那么它应该将通话记录发送到服务器. 我已经尝试过 boot_completed 意图

```
 public class BootUpReceiver extends BroadcastReceiver{
    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d("schedulereceiver", "starting schedule");
    }
} 
```

我已经宣布接收者喜欢

```
 <receiver
            android:name="com.ixo.BootUpReceiver"
            android:enabled="true" android:exported="false"
            android:permission="android.permission.RECEIVE_BOOT_COMPLETED" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
  </receiver> 
```

我已添加权限

```
 <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

我想澄清一下，我正在测试 4.2 版本，以及它的 nexus 平板电脑，希望它不会造成问题

如果我正在检查日志

```
> 02-26 12:31:10.809: W/ActivityManager(478): No content provider found
> for permission revoke: file:///data/local/tmp/Tracker.apk 

02-26 12:31:10.809: I/PackageManager(478): Copying native libraries to
> /data/app-lib/vmdl1018712645 

02-26 12:31:10.889: D/dalvikvm(478): GC_CONCURRENT freed 1347K, 13% free 13294K/15184K, paused 3ms+7ms, total 62ms 02-26 12:31:10.889: I/PackageManager(478): Removing non-system package:com.ixo.tracker 

02-26 12:31:10.899: I/ActivityManager(478): Force stopping package com.ixo.tracker appid=10100 user=-1 

02-26 12:31:10.989: I/PackageManager(478): Running dexopt on: com.ixo.tracker 

02-26 12:31:10.989: I/PackageManager(478): Package com.ixo.tracker codePath changed from
/data/app/com.ixo.tracker-2.apk to /data/app/com.ixo.tracker-1.apk; Retaining data and using new 

02-26 12:31:11.049: D/dalvikvm(2434): DexOpt: 'Landroid/annotation/SuppressLint;' has an earlier definition; blocking out 
```

***更新***

有时我会收到类似的日志

```
02-26 13:42:22.139: E/InstalledAppDetails(6171): Exception when retrieving package:com.ixo.tracker
02-26 13:42:22.139: E/InstalledAppDetails(6171): android.content.pm.PackageManager$NameNotFoundException: com.ixo.tracker
02-26 13:42:22.139: E/InstalledAppDetails(6171):    at android.app.ApplicationPackageManager.getPackageInfo(ApplicationPackageManager.java:80)
02-26 13:42:22.139: E/InstalledAppDetails(6171):    at com.android.settings.applications.InstalledAppDetails.retrieveAppEntry(InstalledAppDetails.java:621)
02-26 13:42:22.139: E/InstalledAppDetails(6171):    at com.android.settings.applications.InstalledAppDetails.refreshUi(InstalledAppDetails.java:640)
02-26 13:42:22.139: E/InstalledAppDetails(6171):    at com.android.settings.applications.InstalledAppDetails.onActivityResult(InstalledAppDetails.java:534)
02-26 13:42:22.139: E/InstalledAppDetails(6171):    at android.app.Activity.dispatchActivityResult(Activity.java:5297)
02-26 13:42:22.139: E/InstalledAppDetails(6171):    at android.app.ActivityThread.deliverResults(ActivityThread.java:3315)
02-26 13:42:22.139: E/InstalledAppDetails(6171):    at android.app.ActivityThread.handleSendResult(ActivityThread.java:3362)
02-26 13:42:22.139: E/InstalledAppDetails(6171):    at android.app.ActivityThread.access$1100(ActivityThread.java:141)
02-26 13:42:22.139: E/InstalledAppDetails(6171):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1282)
02-26 13:42:22.139: E/InstalledAppDetails(6171):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-26 13:42:22.139: E/InstalledAppDetails(6171):    at android.os.Looper.loop(Looper.java:137)
02-26 13:42:22.139: E/InstalledAppDetails(6171):    at android.app.ActivityThread.main(ActivityThread.java:5041)
02-26 13:42:22.139: E/InstalledAppDetails(6171):    at java.lang.reflect.Method.invokeNative(Native Method)
02-26 13:42:22.139: E/InstalledAppDetails(6171):    at java.lang.reflect.Method.invoke(Method.java:511)
02-26 13:42:22.139: E/InstalledAppDetails(6171):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-26 13:42:22.139: E/InstalledAppDetails(6171):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-26 13:42:22.139: E/InstalledAppDetails(6171):    at dalvik.system.NativeStart.main(Native Method)
02-26 13:42:22.169: W/AppSecurityPermissions(6171): Couldn't retrieve permissions for package:com.ixo.tracker 
```

**更新**

如果它在 3.1 及更高版本中不起作用，是否有任何替代方法可以在上面开发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:10:32.780

作为安全修复，新版本的 Android 将不允许 BroadcastReceiver 在用户启动之前接收 BOOT_COMPLETE - 这需要他们启动的活动。这很烦人，但您必须添加某种活动。

# mysql - 选择中的 SQL 循环

> ID：15083313
> 
> 赞同：0
> 
> 时间：2013-02-26T07:07:26.057
> 
> 标签：mysql, sql, teradata

需要更新我们数据库中的列。一列最多可以有 7 组数字，它们之间用空格分隔。喜欢

```
3548 132 760 2348
123 346
37 982 439 
```

我需要更新这些列，如下所示。

```
3548 132 760 2348 0 0 0 
123 346 0 0 0 0 0
37 982 439 0 0 0 
```

即喜欢填满7组数字的东西。将4套改为7套。

我可以通过以下方式计算列中的集合数

```
SELECT LENGTH('3548 132 760 2348')-LENGTH(REPLACE('3548 132 760 2348', ' ', '')) + 1 
```

它返回列中的集合数。什么 SQL 查询将有助于更新或返回上面给出的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:22:48.853

您可以使用此查询 -

```
SET @str = '548 132 760 2348';
SELECT RPAD(@str, LENGTH(@str) + (6 - (LENGTH(@str) - LENGTH(REPLACE(@str, ' ', '')))) * 2,' 0');

>548 132 760 2348 0 0 0 
```

但如果这些是 ID 值，那么我建议您对数据进行规范化。

# c++ - 使用 SURF 描述符的 miniflann.cpp 中的错误

> ID：15083314
> 
> 赞同：0
> 
> 时间：2013-02-26T07:07:34.637
> 
> 标签：c++, opencv, surf, object-recognition

这段时间我一直在使用 Opencv。这一次，我遇到了一个让我非常恼火的问题。事实上，我有一个模板图像，我想在我的相机流中使用匹配来识别它，但我遇到了这样的控制台错误：

```
 OpenCV Error: Unsupported format or combination of formats (type=0
) in unknown function, file ..\..\..\opencv\modules\flann\src\miniflann.cpp, lin
e 299 
```

事实上，这是代码，它编译得很好，但错误出现在执行中。

```
#include "stdafx.h"
#include <stdio.h>
#include <iostream>
#include <fstream>
#include <string>
#include "opencv2/core/core.hpp"
#include "opencv2/nonfree/features2d.hpp"
#include "opencv2/features2d/features2d.hpp"
//#include "opencv2/legacy/legacy.hpp"
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/calib3d/calib3d.hpp"

  using namespace cv;
    using namespace std;

int main()
{             
                //reference image
    Mat object = imread( "tel_tmpl.jpg", CV_LOAD_IMAGE_GRAYSCALE );

    if( !object.data )
    {
        std::cout<< "Error reading object " << std::endl;
        return -1;
    }

    char key = 'a';
int framecount = 0;

SurfFeatureDetector detector( 500 );
SurfDescriptorExtractor extractor;
FlannBasedMatcher matcher;

Mat frame, des_object, image;
Mat des_image, img_matches, H;

std::vector<KeyPoint> kp_object;
std::vector<Point2f> obj_corners(4);
std::vector<KeyPoint> kp_image;
std::vector<vector<DMatch > > matches;
std::vector<DMatch > good_matches;
std::vector<Point2f> obj;
std::vector<Point2f> scene;
std::vector<Point2f> scene_corners(4);

                //compute detectors and descriptors of reference image
    detector.detect( object, kp_object );
    extractor.compute( object, kp_object, des_object );     

                //create video capture object
    VideoCapture cap(0);

    //Get the corners from the object
    obj_corners[0] = cvPoint(0,0);
    obj_corners[1] = cvPoint( object.cols, 0 );
    obj_corners[2] = cvPoint( object.cols, object.rows );
    obj_corners[3] = cvPoint( 0, object.rows );

                //wile loop for real time detection
    while (key != 27)
    {
                                //capture one frame from video and store it into image object name 'frame'
        cap >> frame;

        if (framecount < 5)
        {
            framecount++;
            continue;
        }      

                                //converting captured frame into gray scale
        cvtColor(frame, image, CV_RGB2GRAY);

                                //extract detectors and descriptors of captured frame
                                detector.detect( image, kp_image );
                                extractor.compute( image, kp_image, des_image );

                                //find matching descriptors of reference and captured image
                                matcher.knnMatch(des_object, des_image, matches, 2);

                                //finding matching keypoints with Euclidean distance 0.6 times the distance of next keypoint
                                //used to find right matches
                                for(int i = 0; i < min(des_image.rows-1,(int) matches.size()); i++)
                                {
                                                if((matches[i][0].distance < 0.6*(matches[i][1].distance)) && ((int) matches[i].size()<=2 && (int) matches[i].size()>0))
                                                {
                                                                good_matches.push_back(matches[i][0]);
                                                }
                                }                             

                                //Draw only "good" matches
                                drawMatches( object, kp_object, frame, kp_image, good_matches, img_matches,
                                                Scalar::all(-1), Scalar::all(-1), vector<char>(), DrawMatchesFlags::NOT_DRAW_SINGLE_POINTS );

                                //3 good matches are enough to describe an object as a right match.
                                if (good_matches.size() >= 3)
        {                                     

            for( int i = 0; i < good_matches.size(); i++ )
            {
                //Get the keypoints from the good matches
                obj.push_back( kp_object[ good_matches[i].queryIdx ].pt );
                scene.push_back( kp_image[ good_matches[i].trainIdx ].pt );
            }
                                                try
                                                {
                                                                H = findHomography( obj, scene, CV_RANSAC );
                                                }
                                                catch(Exception e){}

            perspectiveTransform( obj_corners, scene_corners, H);

            //Draw lines between the corners (the mapped object in the scene image )
            line( img_matches, scene_corners[0] + Point2f( object.cols, 0), scene_corners[1] + Point2f( object.cols, 0), Scalar(0, 255, 0), 4 );
            line( img_matches, scene_corners[1] + Point2f( object.cols, 0), scene_corners[2] + Point2f( object.cols, 0), Scalar( 0, 255, 0), 4 );
            line( img_matches, scene_corners[2] + Point2f( object.cols, 0), scene_corners[3] + Point2f( object.cols, 0), Scalar( 0, 255, 0), 4 );
            line( img_matches, scene_corners[3] + Point2f( object.cols, 0), scene_corners[0] + Point2f( object.cols, 0), Scalar( 0, 255, 0), 4 );
        }

        //Show detected matches
        imshow( "Good Matches", img_matches );

                                //clear array
                                good_matches.clear();

        key = waitKey(1);
    }
    return 0;
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:30:50.397

换了相机，效果很好，不知道为什么要换相机？！

# android - 如何将img标签转换为evernote en-media

> ID：15083316
> 
> 赞同：0
> 
> 时间：2013-02-26T07:07:46.090
> 
> 标签：android, evernote

我正在使用 android 上的 evernote api，并希望将 html 转换为 enml。如何将 img 翻译成 en-media？例如：img：

```
<img src="imagePath"/> 
```

对于en-media，我是否需要自己下载图像并将图像标签替换为en-media？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:57:45.907

是的，您必须下载图像并将图像标签替换为具有哈希和类型属性的 en-media。

[您可以在此处](http://dev.evernote.com/start/core/enml.php)查看规范。

# java - 了解 Java 堆栈

> ID：15083318
> 
> 赞同：27
> 
> 时间：2013-02-26T07:07:53.967
> 
> 标签：java, exception-handling, stack-overflow, buffered

有这个代码：

```
public class Main {
    public static void main(final String[] args) throws Exception {
        System.out.print("1");
        doAnything();
        System.out.println("2");
    }

    private static void doAnything() {
        try {
            doAnything();
        } catch (final Error e) {
            System.out.print("y");
        }
    }
} 
```

还有输出：

```
1yyyyyyyy2 
```

为什么它打印“y”八次而不再打印。`println()`遇到Java怎么调用`StackOverflowError`？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-26T07:23:42.910

在这里你正在捕捉`Error`，而不是`Exception`在这种情况下你的程序会崩溃。

如果您尝试此代码（修改为添加静态计数器）

```
public class StackError {

static int i = 1;

public static void main(final String[] args) throws Exception {
    System.out.print("1");
    doAnything();
    System.out.println("2");
}

private static void doAnything() {
    try {
        i++;
//          System.out.println(i);
        doAnything();
    } catch (Error e) {
        System.out.print("y"+i+"-");

    }
}
} 
```

### 输出

```
 1y6869-2 
```

因此，它有`stackerror`6869 次（不同运行的变化）并打印了最后一个值。如果您只是`y`像之前那样打印，那么输出可能会被缓冲而不被刷新，因为它不是`println`.

* * *

### 更新

内部`System.out.println`调用`PrintStream`缓冲的。您不会从缓冲区中丢失任何数据，它会在它填满后全部写入输出（在您的情况下为终端），或者当您明确调用它时刷新。

回到这个场景，这取决于堆栈被填满多少的内部动态，以及能够从 catch in 执行多少打印语句`doAnything()`以及将这些字符数写入缓冲区。在主背面，它最终印有数字`2`。

[javadoc 对缓冲流的引用](http://docs.oracle.com/javase/tutorial/essential/io/buffers.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T07:32:25.940

我敢打赌，通过调用`print`catch 块，您可以强制*另一个* `StackOverflowError`被外部块捕获的块。其中一些调用没有足够的堆栈来实际写入输出流。

[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-11.html)说：

> 请注意，StackOverflowError 可能由方法调用同步抛出，也可能由于本机方法执行或 Java 虚拟机资源限制而异步抛出。
> 
> Java SE 平台允许在抛出异步异常之前发生少量但有限的执行。
> 
> 允许上面提到的延迟允许优化的代码在遵守 Java 编程语言语义的同时在实际处理它们的地方检测和抛出这些异常。一个简单的实现可能会在每个控制传输指令的点轮询异步异常。由于程序的大小是有限的，这为检测异步异常的总延迟提供了一个界限。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T08:33:27.997

第一次`StackOverFlowError`发生时，对 last 的调用`doAnything()`被取消，控制从 last 返回到 catch 块`doAnything()`。

然而，由于堆栈实际上仍然是满的，调用的简单事实`System.out.print("y")`将导致另一个`StackOverflowError`原因，因为需要将一些值压入堆栈然后调用函数`print()`。

因此，另一个`StackOverflowError`再次发生，并且返回现在在前一个的 catch{} 块上返回`doAnything()`；另一个`StackOverflowError`会发生，因为执行单个调用所需的堆栈空间需要`System.out.println("y")`大于从返回调用释放的空间量`doAnything()`。

只有当堆栈上有足够的空间来执行调用时`System.out.print("y")`，该进程才会停止并且catch 块将成功完成。我们可以通过运行以下代码看到这一点：

```
public class Principal3b {

    static int a = 0;
    static int i = 0;
    static int j = 0;

    public static void main(String[] args) {
      System.out.println("X");
        doAnything();
      System.out.println("Y");
        System.out.println(i);        
        System.out.println(j);
    }

    private static void doAnything() {

        a++;
        int b = a;

        try {
            doAnything();
        } catch (final Error e) {
            i++;
            System.out.println(a);
            System.out.println(b);
            j++;
        }
    }
} 
```

请注意，`println(a)`使用 a 而不是 a `print(a)`; `a`因此，如果一切正常，则应在每个值之后打印一个新行。

但是，当我运行它时，我得到以下结果：

```
X
62066206620662066206620662066206
6190
Y
17
1 
```

这意味着已经有 17 次尝试运行 catch 块。在这些 catch 块执行中，有 9 个在自己生成 StackOverflowError 之前无法打印任何内容；7 能够打印 6190 的值，但在再次出现错误之前无法在其后打印换行符，最后，有一个能够同时打印 6190 的值和其后的换行符；因此最终允许它的 catch 块在没有任何新的 StackOverflowError 的情况下完成并优雅地返回调用堆栈。

当我们处理 StackOverflowError 时，这些数字只是一个示例，不仅在机器之间而且在执行之间会有很大差异，添加或删除任何类型的指令的简单事实也应该改变这些值。但是，这里看到的模式应该保持不变。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T07:47:30.993

有一点很清楚 System.out.print("y"); 在 catch 中创建了这个谜题。如果我们将代码更改为

```
static int n;

public static void main(final String[] args) throws Exception {
    System.out.println("1");
    doAnything();
    System.out.println(n);
}

private static void doAnything() {
    try {
        doAnything();
    } catch (Error e) {
        n++;
    }
} 
```

它打印

```
1
1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T07:40:34.520

好吧，没有。命中堆栈溢出错误的次数是未定义的。但是，JVM 允许您从`StackOverflowError`错误中恢复并继续正常执行系统。

由以下代码证明：

```
public class Really {
   public static void main(final String[] args) throws Exception {
     System.out.print("1");
     doAnything();
     System.out.println("2");
   }
   private static void doAnything() {
    try {
           throw new StackOverflowError();
       //doAnything();
    }
    catch(final Error e){
        System.out.print("y");
    }
   }
} 
```

但是请注意，正如@Javier 所说，`StackOverflowError`JVM 同步或异步抛出 （这意味着它可以由另一个线程，可能是本机线程）抛出，这就是为什么无法获取错误的堆栈跟踪的原因。没有。线程命中`catch()`块的次数是未定义的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T07:33:50.070

此外，类型`Error`的对象不是`Exceptions`它们代表异常情况的对象。 `Errors`表示非程序错误引起的异常情况，通常在程序执行过程中不会发生，例如JVM内存不足。尽管它们共享一个共同的超类`Throwable`，这意味着两者都可以被抛出，但它可以被放置在 a`catch`但通常不应该被捕获，因为它们代表了罕见的、难以处理的异常情况。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-02-26T07:11:32.123

堆栈溢出。

您只打印异常，同时程序递归到溢出。

在什么时候发生这种情况取决于各个系统、内存等。

该计划的目的是什么？

# ruby-on-rails - Rails 指定验证的顺序

> ID：15083319
> 
> 赞同：6
> 
> 时间：2013-02-26T07:07:55.517
> 
> 标签：ruby-on-rails, validation

我有一个正在编写的验证器类，它具有三个验证，在调用时运行`MyVariableName.valid?`

```
validates_length_of :id_number, :is => 13, :message => "A SA ID has to be 13 digits long"
validates_format_of :id_number, :with => /^[0-9]+$/, :message => "A SA ID cannot have any symbols or letters"
validate :sa_id_validator 
```

第三个是自定义验证器。问题是我的验证器`sa_id_validator`要求传入的数据是 13 位数字，否则我会出错。如何确保`validate :sa_id_validator`仅在前两个运行后才考虑？

抱歉，如果这是一个非常简单的问题，我昨天下午一直在尝试解决这个问题。

注意：这个验证器必须运行超过几千个条目，并且还要在电子表格上传时运行，所以我需要它快速..

我看到了一种这样做的方法，但它可能会运行两次验证，在我的情况下这会很糟糕。

编辑：

我的自定义验证器看起来像这样

```
def sa_id_validator
  #note this is specific to South African id's
  id_makeup = /(\d{6})(\d{4})(\d{1})(\d{1})(\d{1})/.match(@id_number)
  birthdate = /(\d{2})(\d{2})(\d{2})/.match(id_makeup[1])
  citizenship = id_makeup[3]
  variable = id_makeup[4]
  validator_key = id_makeup[5]

  birthdate_validator(birthdate) && citizenship_validator(citizenship) && variable_validator(variable) && id_algorithm(id_makeup[0], validator_key)
end

private

def birthdate_validator(birthdate)
  Date.valid_date?(birthdate[1].to_i,birthdate[2].to_i,birthdate[3].to_i)
end

def citizenship_validator(citizenship)
  /[0]|[1]/.match(citizenship)
end

def variable_validator(variable)
  /[8]|[9]/.match(variable)
end

def id_algorithm(id_num, validator_key)
  odd_numbers = digits_at_odd_positions
  even_numbers = digits_at_even_positions
  # step1: the sum off all the digits in odd positions excluding the last digit.
  odd_numbers.pop
  a = odd_numbers.inject {|sum, x| sum + x}
  # step2: concate all the digits in the even positions.
  b = even_numbers.join.to_i
  # step3: multiply step2 by 2 then add all the numbers in the result together
  b_multiplied = (b*2)
  b_multiplied_array = b_multiplied.to_s.split('')
  int_array = b_multiplied_array.collect{|i| i.to_i}
  c = int_array.inject {|sum, x| sum + x}
  # step4: add the result from step 1 and 3 together 
  d = a + c
  # step5: the last digit of the id must equal the result of step 4 mod 10, subtracted from 10
  return false unless 
    validator_key == 10 - (d % 10)
  end

  def digits_at_odd_positions
    id_num_as_array.values_at(*id_num_as_array.each_index.select(&:even?))
  end

  def digits_at_even_positions
    id_num_as_array.values_at(*id_num_as_array.each_index.select(&:odd?))
  end

  def id_num_as_array
    id_number.split('').map(&:to_i)
  end
end 
```

如果我将`:calculations_ok => true`属性添加到我的验证中，然后传入一个 12 位数字，我会收到此错误：

```
i.valid?
NoMethodError: undefined method `[]' for nil:NilClass
from /home/ruberto/work/toolkit_3/toolkit/lib/id_validator.rb:17:in `sa_id_validator' 
```

所以你可以看到它进入自定义验证，即使它应该失败了`validates_length_of :id_number`？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:19:59.167

我不太确定，但我在一些博客上读到 Rails 总是运行所有验证，即使第一个验证无效。

您可以做的是使您的自定义方法变得灵活或有弹性，以便我可以处理所有情况。

这个[答案](https://stackoverflow.com/questions/5966055/controlling-the-order-of-rails-validations)肯定会对你有所帮助。

希望它能回答你的问题

# linux - “Thread.sleep(30000)”在 Windows 和 Linux 上的工作是否相同？

> ID：15083322
> 
> 赞同：2
> 
> 时间：2013-02-26T07:08:02.563
> 
> 标签：linux, windows, multithreading, jakarta-ee, spring-mvc

我怀疑“Thread.sleep()”在 Windows 和 Linux 上的工作是否相同？

现在我正在开发一个企业应用程序，我正在使用 spring mvc 框架。现在的问题是，我的一个函数中有这一行“Thread.sleep(30000)”。这里的值“30000”表示睡眠“30 秒”，它在我的本地系统（Windows 操作系统）上运行良好。当我在 Linux 服务器上部署我的应用程序时，我怀疑“Thread.sleep(30000)”没有按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:14:43.980

如果您的服务器在 Linux 下运行，您可能会遇到 Leap Second 错误

看到这里[闰秒错误](https://stackoverflow.com/questions/11294573/thread-sleep-never-returns)

# windows-phone-7 - 向循环图块添加文本 (Windows Phone 8)

> ID：15083325
> 
> 赞同：3
> 
> 时间：2013-02-26T07:08:18.950
> 
> 标签：windows-phone-7, image-processing, windows-phone-8, windows-phone, live-tile

我正在编写一个应用程序，其唯一目的是定期下载一些图像并将它们显示在动态磁贴中。我希望能够每三十分钟左右用 4-8 张图像更新磁贴，所以我需要使用 CycleTile。下载图像并将它们放入实时磁贴非常简单。真正的踢球者是在每个图像上添加文本。

如果只是两张图片，我会使用翻转瓷砖，一张在正面，一张在背面。然后我会通过为正面和背面分配不同的磁贴标题来添加文本。但是，由于我需要显示 2 张以上的图像，因此我需要使用 CycleTile。这种方法不适用于 CycleTile。（但如果我错了，请纠正我！）

所以我的下一个想法是在 WriteableBitmap 上覆盖一个 TextBlock。这可以工作，但我认为考虑到以下因素，它会很快变得复杂：不同的图像分辨率、中/大瓷砖布局和不同的屏幕 PPI。我敢肯定我能弄明白，但它似乎……很乱。

有一个更好的方法吗？我忽略了一些 Tile 功能吗？

总结一下我的要求是：

1.  使用动态磁贴显示 4-8 张图像。
2.  每个图像都需要有一些与之关联的文本。
3.  每三十分钟左右更新一次图像。
4.  需要扩展到宽瓷砖。
5.  需要扩展到具有更高 PPI 屏幕的手机。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-15T05:48:32.327

对于第一项，您应该能够使用[WriteableBitmapEx](http://writeablebitmapex.codeplex.com/)项目中的 Blit 方法将尽可能多的图像合并在一起。由于您可以以任何您想要的方式将图像合并在一起，因此您可以确保它们覆盖宽平铺宽度和您需要的任何 ppi。

为了覆盖第二项，以下内容将覆盖图像上的文本：

```
private static ImageSource createBitmapImageWithImage(string text, int x, int y, Color textColor, BitmapSource bitmapSource)
{
    using(var mem = new MemoryStream())
    {
        //Create Formatted Text
        var textBlock = new TextBlock
            {
                Text = text,
                Foreground = new SolidColorBrush(textColor),
                FontFamily = new FontFamily("Courier New"),
                FontSize = 40
            };

        //Moves an object two dimensionally
        var tf = new TranslateTransform
            {
                X = x,
                Y = y
            };

        //Overlay text on existing image
        var bmpImage = new WriteableBitmap(bitmapSource);
        bmpImage.Render(textBlock, tf);
        bmpImage.Invalidate();

        //Convert back into bitmap
        bmpImage.SaveJpeg(mem, bmpImage.PixelWidth, bmpImage.PixelHeight, 0, 100);
        mem.Seek(0, SeekOrigin.Begin);
        var image = new BitmapImage();
        image.SetSource(mem);

        return image;
    }
} 
```

当然你也可以传入文本块，或者配置文本块的选项。但我想展示如何根据需要设置文本格式。

您的第三个请求包含在[后台任务](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202942%28v=vs.105%29.aspx)中。在您的手机解决方案中，添加一个新项目，您可以选择后台任务。让这个调用你的代码来更新图像是相当简单的。诺基亚甚至创建了一个关于如何添加代码示例的演练[。](http://www.developer.nokia.com/Community/Wiki/How_to_create_simple_Background_Agent_in_Windows_Phone)

# iphone - 如何从 NSArray 访问索引值

> ID：15083328
> 
> 赞同：-3
> 
> 时间：2013-02-26T07:08:22.767
> 
> 标签：iphone, object, nsarray

我需要通过索引访问 NSArray 的值。以下代码在第 3 行崩溃：

```
livevalues=[responseString JSONValue];
NSLog(@"%d",[livevalues count]);

NSString *objectvalue = [livevalues objectAtIndex:1];
NSLog(@"redyyyyyyyyyyy%@",objectvalue); 
```

1.  `livevalues`计数为 4
2.  `livevalues`数组字符串是`{"to": "INR", "rate": 53.801043700000001, "from": "USD", "v": 53.801043700000001}`

我只需要该数组中的值`53.801043700000001 only`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:21:10.447

使用以下表达式

```
livevalues[1][@"rate"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:40:43.350

这是一本字典，所以尝试如下

```
NSString *objectvalue = [livevalues objectForKey:@"rate"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:53:24.277

你必须使用：

```
 NSString *objectvalue = [[livevalues objectAtIndex:1] objectForKey:@"yourKey"]; 
```

获取所需字符串`NSLog`的密钥数组的描述并从那里获取您的密钥

```
 NSLog(@"%@",[livevalues description]); 
```

# ada - GPS IDE 中的调试

> ID：15083335
> 
> 赞同：5
> 
> 时间：2013-02-26T07:09:00.417
> 
> 标签：ada, gnat-gps

我正在使用 GPS IDE 进行 Ada 95 编码。当我尝试在 .adb 文件中放置断点时，我收到一条消息“没有名为 filename.adb 的源文件”。我构建了项目并初始化了调试器。可能出了什么问题？

奇怪的是，我能够执行该程序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T12:54:35.563

您是否为您的项目启用了调试选项？使用 Project/“Edit Project Properties”打开项目属性对话框，单击“Switches”选项卡。然后在每个 Gnatmake、Ada 和 Ada Linker 选项卡上检查“调试信息”。关闭对话框，然后执行 Build/Clean 并重建您的项目。（不要忘记保存任何更改，执行 Project/Save All。）

# php - 在php中转换时间

> ID：15083339
> 
> 赞同：0
> 
> 时间：2013-02-26T07:09:10.760
> 
> 标签：php, date, time

我有数据`2013-02-04 03:20:00`

我如何`07:20`使用 php。

同样是通过这个`2013-02-04 08:00:00`到这个`12:00`

我有这个标记为 timestamp_diff 的数据，它是`14400`

任何的想法？谢谢你

我认为答案是基于 timestamp_diff 而不仅仅是添加 4 或任何值。

是否有任何`datetime()`功能可以获得相当于`14400``4`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:24:02.393

```
 <?php

     $add4hour = time() + (4*60*60);

     $newTime = date("d m Y H:i:s",$add4hour);

     echo $newTime;

   ?> 
```

根据您的要求进行编辑

```
 <?php
   $add4hour = time() + (4*60*60); // 4 hour adding
   $d1 = date("d-m-Y H:i:s"); // date 1 assume that hour 03:20:00
   $d2 = date("d-m-Y H:i:s",$add4hour); // date 2, Assume that hour 07:20:00 by adding 4hour
   $d1_timestamp = strtotime($d1); // first date's timestamp
   $d2_timestamp = strtotime($d2); // second date's timestamp
   $time_diff = $d2_timestamp - $d1_timestamp; //difference
   echo $time_diff; // this will give you 14400
  ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:22:15.577

```
$date = date("Y-m-d H:i:s");
$addhr= 4;//Replace you value to be added here
$format="H:i";
echo $date."<br>";
echo date($format, strtotime("$date + $addhr hours")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:38:10.563

您可以使用[\DateTime 类并使用](http://www.php.net/manual/en/class.datetime.php)[DateTime::add](http://www.php.net/manual/en/datetime.add.php)添加任何间隔。您也可以使用程序样式。

# pdf - 文本对象在 Adob e Reader 11 中被删除

> ID：15083341
> 
> 赞同：0
> 
> 时间：2013-02-26T07:09:19.230
> 
> 标签：pdf, pdf-generation, adobe-reader

在 adobe acrobat xi 中插入文本对象，当它在 adobe reader 10 中打开时，它可以正常打开。但是在 adobe reader 11 中，当我单击该 pdf 文件时，文本对象被删除。为什么会发生这种情况？如何解决？源pdf文件[点击这里](http://incometaxsoft.com/pdf/Src.pdf)

在adobe reader 11中双击pdf文件时出现问题。 [点击这里](http://incometaxsoft.com/pdf/result.pdf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:19:51.307

*简而言之：*

您尝试通过更改其**正常外观流来更改自由文本注释的内容。**

这还不够：兼容的 PDF 查看器**可能会忽略此条目并提供自己的外观。**因此，较旧的 Adob​​e Reader 版本选择*不忽略*您的更改只是*运气。*

 *因此，您还需要更改 PDF 查看器应该创建自己的外观的信息，即最重要的**RC**的富文本值（在自由文本注释字典中）**将用于生成注释的外观，**以及还有**Contents**值，它是**应为注释显示的文本。**

此外，您的 PDF 中存在缺陷：

*   您第一次尝试 result.pdf 中的交叉引用表已损坏；
*   源文件中自由文本注释的意图（**IT**值）拼写错误。

*详细地：*

你的[result.pdf](http://incometaxsoft.com/pdf/result.pdf)坏了。不同的 PDF 查看器可能会以不同的方式显示损坏的 PDF。

一些细节：

它是基于您的[Src.pdf](http://incometaxsoft.com/pdf/Src.pdf)在附加模式下创建的，但在原始修订中对其 /Pages 对象进行了以下更改：

在源代码中：

```
6 0 obj
<</Count 6
/Type /Pages
/Kids [ 7 0 R 8 0 R 9 0 R 10 0 R 11 0 R 12 0 R ]
>>
endobj 
```

结果：

```
6 0 obj
<</Count 3
/Type /Pages
/Kids [ 7 0 R 8 0 R 9 0 R 12 0 R 11 0 R 10 0 R ]
>>
endobj 
```

所以最后三页的顺序发生了变化（没关系），*/ **Count**从 6 减少到 3。*这是不一致的，因为仍然有 6 个子对象，但根据[PDF 规范 ISO 32000-1](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)，**Count**是

> 作为页面树中此节点后代的叶节点（页面对象）的数量。

此外，附加修订的交叉引用流被破坏。

```
xref
0 1
0000000000 65535 f
24 1
0001465240 00000 n
57 1
0001466075 00000 n
66 1
0001466909 00000 n
73 1
0001467744 00000 n
93 1
0001473484 00000 n
131 1
0001478703 00000 n 
```

这些条目有 19 个字节长，包括它们各自结束的单字节换行符，但是根据[规范](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)，

> 每个条目的长度应为 20 个字节，包括行尾标记。
> 
> 使用中条目的格式应为：nnnnnnnnnn ggggg n eol
> 
> 其中 [...] eol 应为 2 个字符的行尾序列

PDF 中可能存在更多错误，但您可能希望开始修复这些错误。

**编辑**

现在有了新的 PDF [Pay-in.pdf](http://incometaxsoft.com/pdf/Pay-in.pdf) ，手头有适当的交叉引用，让我们更深入地看看它。

Adobe Preflight 抱怨出现以下情况：

```
[...]
An unexpected value is associated with the key
    Key: IT
    Value: /FreeTextTypewriter
    Type: CosName
    Formal Representation: Annot.AnnotFreeText
    Cos ID: 86
    Traversal Path: ->Pages->Kids->[0]->Annots->[13]
[...] 
```

好的，让我们看看那个对象 86：

```
86 0 obj
<<  /P 8 0 R
    /Type /Annot
    /CreationDate (D:20130219194939+05'30')
    /T (winman)
    /NM (0f202782-2274-44b8-9081-af4010be86d4)
    /Subj (Typewritten Text)
    /M (D:20130219195100+05'30')
    /F 4
    /Rect [ 53.2308 33.488 552.088 826.019 ]
    /DS (font: Helv 12.0pt;font-stretch:Normal; text-align:left; color:#000000 )
    /AP <</N 107 0 R >>
    /Contents (wwww)
    /IT /FreeTextTypewriter
    /BS 108 0 R
    /Subtype /FreeText
    /Rotate 90
    /DA (16.25 TL /Cour 12 Tf)
    /RC (<?xml version="1.0"?>
         <body xmlns="http://www.w3.org/1999/xhtml"
               xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0/"
               xfa:APIVersion="Acrobat:10.0.0"
               xfa:spec="2.0.2"
               style="font-size:12.0pt;text-align:left;color:#000000;font-weight:normal;
                      font-style:normal;font-family:Helv;font-stretch:normal">
           <p dir="ltr">
             <span style="line-height:16.3pt;font-family:Helvetica">wwww</span>
           </p>
         </body>)
>>
endobj 
```

Preflight 表示对这条线路不满意`/IT /FreeTextTypewriter`。再次查看 PDF 规范会发现带有 的注释，[即](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)`/Subtype /FreeText`第 12.5.6.6 节中指定的自由文本注释：

> **IT** *名称* （可选；PDF 1.6）描述自由文本注释意图的名称（另请参见表 170 中的 IT 条目）。以下值应有效：
> 
> **FreeText**注释旨在用作纯自由文本注释。纯自由文本注释也称为文本框注释。
> 
> **FreeTextCallout**该注释旨在用作标注。标注通过 CL 中指定的标注线与页面上的区域相关联。
> 
> **FreeTextTypeWriter**该注释旨在用作单击输入或打字机对象，并且不绘制标注线。
> 
> 默认值：**自由文本**

因此，您的值**FreeTextTypewriter**无效（请记住，PDF 名称区分大小写！）。因此，注释（轻微）损坏，可能已经导致各种问题。

但是这里还有其他重要条目，以了解您的问题：您在附加更改中所做的只是`/AP <</N 107 0 R >>`用不同的注释替换此注释的对象 107（根据 ）中的外观流。但是这个注解也包含一个**RC**值，根据[规范](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)是

> 用于生成注释外观的富文本字符串（参见 12.7.3.4，“富文本字符串”）。

因此，任何 PDF 查看器都可以从该富文本描述中重新生成外观，特别是如第 12.5.2 节中关于**AP**字典内容的规范所述

> 单个注释处理程序可能会忽略此条目并提供自己的外观。

因此，简单地替换正常外观流并不足以永久更改该注释的外观，您必须更改外观字典并至少删除外观的任何替代来源。

此外，该条目`/Contents (wwww)`也不会被您附加的更改所取代。因此，试图决定是否使用外观流的 PDF 查看器会很想以某种方式创建新外观，因为您的外观流绝不代表该值。

尤其是在开始操作自由文本时（例如，在您的情况下单击 PDF 时），PDF 查看器知道它最终将不得不创建一个新外观，除非当前外观与它本来会创建它一样，否则观众可能更喜欢从富文本甚至内容值派生的外观开始重新开始。*

# php - PHP 中的 SQL 语句与 MVC 数据访问层

> ID：15083342
> 
> 赞同：0
> 
> 时间：2013-02-26T07:09:20.213
> 
> 标签：php, domain-driven-design, data-access-layer, laravel

现代 MVC 框架有自己的数据访问层实现，不需要编写 SQL 语句。在性能和可扩展性方面，是否有任何缺点，例如，在使用时

```
$user = User::where('email', '=', $email)->first(); 
```

而不是在原始 SQL 中使用准备好的语句

```
$user = DB::connection()->pdo->prepare("SELECT * from users where `email` = ? "  ) ; 
```

由于 Laravel 和 Cakephp 等 MVC 框架也允许使用后一种方法，因此我不确定这两种方法中的哪一种在性能和可扩展性方面更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T11:28:13.423

> [**Rant：**
> 你所谓的*“现代 MVC 框架”*（除了少数例外）与实现 MVC 相去甚远。而那些*“不需要 SQL 语句的层”*实际上在大型项目（应该实际使用 MVC）中是极其有害的。]

我的建议是避免使用任何内置的 ORM 或查询构建器。与所谓的“mvc 框架”捆绑在一起的 ORM 通常是[活动记录](http://martinfowler.com/eaaCatalog/activeRecord.html)的实现，其用例**极为有限**。**基本上，仅**当您仅使用基本的 CRUD 操作*（没有`JOIN`s 或其他高于初学者级别的 sql 查询）*并且仅使用简单的属性验证*（没有交叉检查的字段或与其他实体的交互）时*，基于 AR 的域实体实现才是实用的。从技术上讲，您*可以*在更复杂的情况下使用活动记录实例，但随后您将开始产生[技术债务](http://martinfowler.com/bliki/TechnicalDebt.html)。

最好的选择是将域逻辑与存储逻辑分开，并分别为模型层的每个方面实现[域对象](http://c2.com/cgi/wiki?DomainObject)和[数据映射器。](http://martinfowler.com/eaaCatalog/dataMapper.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T12:25:24.840

是的，在性能和可扩展性方面都存在缺陷。

所有这些 ORM 和 AR 仅在使用基本查询时都非常好。
但是当涉及到一些复杂的问题时，他们要么变得难以忍受的复杂，要么变得束手无策。
没有办法在这些时髦的运算符中注入“USE INDEX”、“DELAYED”或类似的性能提升命令。

可扩展性也是如此。
每次你要使用任何非标准的运算符时，你都会摸不着头脑。

还有一个便携性问题。
SQL 是网络开发者的*通用语言*，每个人都可以阅读和编写它。而专有的 ORM 可以修复它们。

然而，您的第二个代码同样丑陋且无法使用。

```
$user = DB::connection()->pdo->prepare("SELECT * from users where email=?"); 
```

`DB::connection()->pdo->prepare()`不返回任何用户。它返回一个语句句柄，必须在以下几行中使用该句柄来获取实际的用户信息。
在脚本中添加大量无用的代码。
这是从标量中选择的序数情况。尝试使用`INSERT`或仅使用`IN()`语句，您的代码将被炸到几个屏幕高。

为什么不让它**真正**获取用户信息呢？

```
$user = DB::conn()->getRow("SELECT * from users where email=?s",$email); 
```

看——你保留了你的 SQL 却让它可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:13:14.507

当然，您将始终有运行类和组装查询的开销。

然而，它可以帮助您防止错误。像“were `id`=”这样的错字不会发生（或不应该）。除了那些层已经为你做了很多事情。

像转义、解析、验证等......所以要承担开销，但要确保不会发生很多故障或安全问题

# android - 如何从我的 android 应用程序启动 droid vnc 服务器（启动 apk，然后单击启动按钮）

> ID：15083345
> 
> 赞同：1
> 
> 时间：2013-02-26T07:09:34.957
> 
> 标签：android, autostart, vnc-server

当用户在 Android 上启动我的应用程序时，我希望自动启动 Droid VNC 服务器。我知道使用意图我们可以启动其他 APK。在这里，当我运行 Droid 应用程序时，它会显示带有“开始”按钮的屏幕。如果不单击“开始”按钮，Droid VNC 服务器不会启动。

可以有以下三种可能。

1.  从我的应用程序中，我可以以某种方式触发 VNC 服务器上的启动按钮吗？或者
2.  Droid VNC服务器能否在启动模式下自动打开（无需点击启动按钮）；或者
3.  假设我的应用程序启动 VNC apk 并且用户获得 VNC 屏幕并且用户单击它的开始按钮。单击开始按钮（vnc 启动）后可以控制自动回到我的应用程序（我的应用程序进入前台）。

问候， 巴夫迪普

# objective-c - Objective c UIPageViewController在翻转时去除阴影

> ID：15083346
> 
> 赞同：5
> 
> 时间：2013-02-26T07:09:36.297
> 
> 标签：objective-c, shadow, uipageviewcontroller, page-flipping

只是一个简单的问题，是否可以在翻转时移除 UIPageviewcontroller 的阴影？例如：[影子的例子](http://www.techotopia.com/index.php/Image%3aIphone_ios_5_uipageviewcontroller_app.jpg)

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T19:35:32.040

99% 的人肯定你无法用单线完成此任务。最好的办法是找到某人自己重新实现翻页动画的代码，然后删除从中绘制阴影的代码。

# c++ - 如何打印一个小于另一个双精度值的双精度值？

> ID：15083347
> 
> 赞同：11
> 
> 时间：2013-02-26T07:09:46.227
> 
> 标签：c++, number-formatting

实际上，我正在研究 C++ 中的范围表达式。所以我想要的是如果我有任何表达

```
x<1 
```

然后我的

```
double getMax(...); 
```

应该在数轴上返回一个刚好在 1.000（双精度）之前的双精度值。

我试着这样做

```
double getMax(double& a)
{
    return (a-numeric_limits<double>::min());
} 
```

但我仍然得到与返回语句相同的值。

我认为 C++ 正在将其转换为 cout 语句中最接近的双精度。

```
int main()
{
    double a = 32;
    cout<<scientific<<getMax(a)<<endl;
    return 0;
} 
```

输出：

```
3.200000e+001 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T07:28:31.843

首先，您需要确保实际打印足够多的数字以确保`double`显示所有可表示的值。您可以按以下方式执行此操作（确保您`#include <iomanip>`这样做）：

```
 std::cout << std::scientific << std::setprecision(std::numeric_limits<double>::max_digits10) << getMax(a) << std::endl; 
```

其次，`numeric_limits<>::min`不适合这个。如果您的起始值为`1.0`，则可以使用`numeric_limits<double>::epsilon`，这是可表示的最小差异`1.0`。

但是，在您的代码示例中，起始值为`32`. Epsilon 不一定适用于此。在这种情况下计算正确的 epsilon 是很困难的。

但是，如果您可以使用 C++11 ^((*))，则标头中有一个函数`cmath`可以满足您的需要`std::nextafter`：

```
#include <iostream>
#include <limits>
#include <iomanip>
#include <cmath>

double getMax(double a)
{
  return std::nextafter(a,std::numeric_limits<double>::lowest());
}

int main()
{
    double a = 32;
    std::cout << std::scientific
              << std::setprecision(std::numeric_limits<double>::max_digits10)
              << getMax(a)
              << std::endl;
    return 0;
} 
```

我也把它放在[liveworkspace](http://liveworkspace.org/code/3ZnWkI%2424)上。

解释：

```
double nextafter(double from, double to); 
```

在 to 的方向上返回 from 的下一个可表示值。因此，我`std::numeric_limits<double>::lowest()`在调用中指定以确保您获得的下一个可表示值*小于*参数。

^((*))请参阅下面的 Tony D 评论。您可以在`nextafter()`没有 C++11 的情况下访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:28:27.537

我认为你的想法是正确的。查看在[不使用流 (ios_base::precision) 的情况下设置双精度](https://stackoverflow.com/questions/12349323/setting-the-precision-of-a-double-without-using-stream-ios-baseprecision/12350132#12350132)不是这个问题，而是他们给出的使用示例`precision`。您可能想尝试以 53 的精度打印。

我通常看到“接近但不完全”的方式涉及设置差异阈值（通常称为 epsilon）。在这种情况下，您不会使用`getMax`函数，而是使用小于的 epsilon。（你可以用 epsilon 值和运算符重载来做一个类。我倾向于避免像瘟疫一样的运算符重载。）

基本上，你需要：

```
bool lessThanEpsilon(double number, double lessThan, double epsilon)
{
    return (lessThan - number >= epsilon);
} 
```

当然，还有其他品种。等于会检查`if Math.abs(number - equals) < epsilon`

# c - 处理 awk 命令时如何将“system()”调用转换为“fork() + execl()”？

> ID：15083358
> 
> 赞同：0
> 
> 时间：2013-02-26T07:10:26.223
> 
> 标签：c, awk

1）以下系统调用工作正常：

```
#define LOG_FILE_PATH "/tmp/logfile"
system("awk -v PRI=\"$PRI\" '/^<'$PRI'>/' "LOG_FILE_PATH); 
```

2）但是如果我用fork+execl来替换上面的系统：

```
pid = fork();
if (pid == 0) {
    execl("/usr/bin/awk", "awk", "-v", "PRI=\"$PRI\"", "'/^<'$PRI'>/'", LOG_FILE_PATH, (char *)0);
} else {
    /* parent */
} 
```

我收到错误消息：

```
awk: cmd. line:1: Unexpected token 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:19:35.673

那应该是这样的：

```
execl("/usr/bin/awk", "awk", "-v", "PRI=???", "/^<???>/", LOG_FILE_PATH, (char *)0); 
```

命令中的引号`system()`由 shell 处理；它们没有传递给 awk。当您在这里直接调用 awk 时，您需要省略引号。

这导致了第二个问题：shell 负责扩展环境变量，例如`$PRI`. 您需要手动执行此操作，可能像这样：

```
char tmp1[123], tmp2[123];
snprintf(tmp1, sizeof tmp1, "PRI=%s", getenv("PRI"));
snprintf(tmp2, sizeof tmp2, "/^<%s>/", getenv("PRI"));
execl("/usr/bin/awk", "awk", "-v", tmp1, tmp2, LOG_FILE_PATH, (char *)0); 
```

# django - 仅在禁用 javascript 时执行 Django 函数

> ID：15083360
> 
> 赞同：0
> 
> 时间：2013-02-26T07:10:34.957
> 
> 标签：django, jquery, django-forms

我有一个 Html 模板，里面有一个表单。

```
<form id="my_form" method="post" action="/register/">
<input id="cemail" name="email" size="25" class="textbox required email" style="width: 250px"> <br><br>
<input id="csubmit" type="submit" onclick="Clicked();" value="Send" /> 
```

我还有一个 Jquery 代码用于测试介绍的电子邮件是否正确：

```
<script type="text/javascript" src="/js/jquery.validate.js"></script>
<script>
    function Clicked() {
        $("#my_form").validate().form();
        value = $("#cemail").val();
        alert("ufffff");
        $.get("/exists/", {email: value}, function(data) {
            $('#text')[0].innerHTML=data;   
        });
    }
</script> 
```

直到这里一切都好。执行程序时出现我的问题。总是启动 action="/register" ，我不希望它发生。我想要这样：

如果在客户端浏览器上停用 jquery，则执行表单具有的操作。如果在客户端浏览器上激活了 jquery，只需执行“Clicked()”函数而不是表单的操作（“/register/”-> 调用 django 函数）

有人帮我这样做吗？是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:18:42.993

`Clicked`您需要从您的函数中返回 false 。

从 JavaScript 中的事件处理程序返回`false`告诉浏览器不要执行与该元素（链接或按钮）关联的默认操作。

如果您想超级正确，您实际上应该将自己附加到表单的`submit`操作并在那里返回 false 。这将允许用户点击返回键来提交您的表单，但阻止浏览器执行 POST：

```
$('#my_form').submit(function(){
    $("#my_form").validate().form();
    value = $("#cemail").val();
    alert("ufffff");
    $.get("/exists/", {email: value}, function(data) {
        $('#text')[0].innerHTML=data;   
    });
    return false;
}); 
```

如果 JavaScript 被禁用，浏览器将正常执行表单的默认操作。

# jquery - jQuery 中是否存在涉及 DELETE 类型的 ajax 调用的奇怪错误？

> ID：15083368
> 
> 赞同：0
> 
> 时间：2013-02-26T07:11:00.853
> 
> 标签：jquery, ajax, google-chrome

这让我发疯了。

所以，

```
$.ajax({
 type: "POST",
 url: "resource",
 data: "param1=val1&param2=val2"
}); 
```

将向包含数据的资源发送 HTTP POST 请求，但是

```
$.ajax({
 type: "DELETE",
 url: "resource",
 data: "param1=val1&param2=val2"
}); 
```

**向没有**数据的资源发送 HTTP DELETE 请求。

是什么赋予了？我只有要在（Chrome/Safari）上测试的 WebKit 浏览器，但这是我无法追踪的某种 jQuery 错误/已知问题吗？还是我使用`$.ajax()`不当？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:36:41.740

我正式将此称为 Tomcat 问题。

[HTTP DELETE 请求是否允许实体主体？](https://stackoverflow.com/questions/299628/is-an-entity-body-allowed-for-an-http-delete-request)

感谢@DominicBarnes 和@dakait 为我指明了正确的方向。

FFS 为什么没有明确说明 HTTP 规范？令人抓狂。

# greendao - 从相对表中检索数据，同时按日期字段对其进行排序

> ID：15083370
> 
> 赞同：1
> 
> 时间：2013-02-26T07:11:13.417
> 
> 标签：greendao

我有一个`schedule`与实体 1:n 关系的`broadcast`实体。

当我有点喜欢`mBroadcasts = schedules.get(0).getBroadcastList();`它时，它会按 id 对数据进行排序。我需要按`broadcast`实体的日期字段对数据进行排序。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:46:53.103

您可以使用 QueryBulder 创建选择。例如，如果您想按属性日期订购：

```
daoSession.getBroadcastDao().queryBuilder().orderAsc(Properties.Date); 
```

如果您需要创建一个复杂的条件 WHERE...

```
QueryBuilder<Broadcast> qb = daoSession.getBroadcastDao().queryBuilder(); 
```

然后，添加*and* , *or* , *equal* , *lt* , *gt* , ... 或任何你需要的。

# javascript - JavaScript - 单例类是什么样的？

> ID：15083378
> 
> 赞同：0
> 
> 时间：2013-02-26T07:11:41.077
> 
> 标签：javascript, singleton

我有 2 个 Obj：我想知道他们是否是单身人士？

一个。

```
var OBJ = function () {
}

OBJ.prototype = {
    setName : function (name) {
        this.name = name;
    },
    getName : function () {
        return this.name;
    }
} 
```

湾。

```
var OBJ = {
     setName : function (name) {
         this.name = name;
     },
     getName : function () {
        return this.name;
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:28:22.687

您可以通过创建两个类实例并比较它们来检查它：

```
 Print( a === b ); // prints: true 
```

如果打印`true`类是`singleton`

或者你可以试试这个 SingletonPattern 的代码：

```
function MyClass() {

  if ( arguments.callee._singletonInstance )
    return arguments.callee._singletonInstance;
  arguments.callee._singletonInstance = this;

  this.Foo = function() {
    // ...
  }
}

var a = new MyClass()
var b = MyClass()
Print( a === b ); // prints: true 
```

[单例模式的最佳解决方案](http://code.google.com/p/jslibs/wiki/JavascriptTips#Singleton_pattern)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:49:02.293

这将帮助你`How to write a singleton class in javascript`

```
 function Cats() {
    var names = [];

    // Get the instance of the Cats class
    // If there's none, instanciate one
    var getInstance = function() {
        if (!Cats.singletonInstance) {
            Cats.singletonInstance = createInstance();
        }
        return Cats.singletonInstance;
    }
    // Create an instance of the Cats class
    var createInstance = function() {
        // Here, you return all public methods and variables
        return {
            add : function(name) {
                names.push(name);
                return this.names();
            },
            names : function() {
                return names;
            }
        }
    }
    return getInstance();
} 
```

更多关于[http://www.javascriptkata.com/2009/09/30/how-to-write-a-singleton-class-in-javascript/](http://www.javascriptkata.com/2009/09/30/how-to-write-a-singleton-class-in-javascript/)

也可以复制[Javascript：最好的单例模式](https://stackoverflow.com/questions/1635800/javascript-best-singleton-pattern)和[在 JavaScript 中实现单例的最简单/最干净的方式？](https://stackoverflow.com/questions/1479319/simplest-cleanest-way-to-implement-singleton-in-javascript)

# c# - 在没有 HTTPS 的情况下获取和使用 Facebook 访问令牌

> ID：15083382
> 
> 赞同：0
> 
> 时间：2013-02-26T07:11:56.583
> 
> 标签：c#, facebook, facebook-graph-api, https, server-side

我有第一阶段的以下网址。得到`code` `http://www.facebook.com/dialog/oauth?client_id=myappid&redirect_uri=myurl;state=e879888c-7090-4c09-98a5-ff361b30d55;scope=email`

和

```
url = String.Format(@"http://graph.facebook.com/oauth/access_token?client_id={0}&redirect_uri={1}&client_secret={2}&code={3}",FacebookAppId, redirectUrl, FacebookSecret, code);
WebClient webClient = new WebClient();
var tokenVars = webClient.DownloadString(url);
var responseVars = HttpUtility.ParseQueryString(tokenVars);
string access_token = responseVars["access_token"];
string data = webClient.DownloadString(String.Format("http://graph.facebook.com/me?access_token={0}", access_token));
var jobject = JObject.Parse(data); 
```

**返回400 BAD REQUEST**。

**问题：是否可以在不通过 h​​ttp 连接的**情况下获取 facebook 访问令牌？

**问题：是否可以在没有HTTPS** 的情况下使用 access_token ？**不是 HTTP**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:21:33.613

为了安全起见，您必须使用 https，也许如果您不是，则会显示一些不好的东西，@long 过程.. 我只是浏览您的问题，同样的事情

# php - 如何根据其值删除特定的 XML 子节点

> ID：15083384
> 
> 赞同：3
> 
> 时间：2013-02-26T07:11:58.633
> 
> 标签：php, javascript, xml

我有一个这样的 XML 结构：

```
<document>
    <sliderimage>
        <images>click.bmp</images>
        <images>error_inotherpluginupload.JPG</images>
        <images>dddd.jpg</images>
        <images>Sunset123.jpg</images>
        <images>Water lilies.jpg</images>     
    </sliderimage>
</document> 
```

我正在展示这些图像：

![这就是我显示图像的方式](../Images/8ae6dcc6597107a182bd618899601acf.png)

您可以在此处查看获取图像的代码：

```
<?php
    $usernmeforxml = $_SESSION['username'];
    $xmlpath = SITE_URL . "xml/" . $usernmeforxml . "/test.xml";
    $xml = simplexml_load_string(file_get_contents($xmlpath));
    $sliderimagesinner = $xml->sliderimage->images;
    $imagenum = count($sliderimagesinner);
?>
</br>
<?php
    for ($i = 0; $i < $imagenum; $i++)
    {
?>
    <a class="thumbnail" href="#thumb">
        <img src="../slider_images/<?php 
            echo $sliderimagesinner[$i]; 
        ?>" width="120" height="70" />
        <span>
            <img src="../slider_images/<?php 
                echo $sliderimagesinner[$i]; 
            ?>" width="500" height="350" />
        </span>
    </a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<?php
    }   
?> 
```

现在我想通过在我的图像上添加一个“删除”按钮来删除图像。单击时，应从上述 XML 文件中删除该图像节点。

一切都是动态的，所以如果有人能在这方面帮助我，那将非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T07:32:56.467

```
$usernmeforxml=$_SESSION['username'];
$xmlpath=SITE_URL."xml/".$usernmeforxml."/test.xml";
$xml = simplexml_load_file($xmlpath);   
if($_GET['remove'] == 'true') {
    $myValue = $_GET['file'];
    $xel_array = $xml->xpath("//images[text()='" . $myValue . "']");
    //edited - forgot to double [0]
    unset($xel_array[0][0]);
    file_put_contents($xmlpath, $xml->asXML());
} 
```

和一个像

```
<a href="_your_page.php?remove=true&file=your_file_name">remove</a> 
```

应该做的伎俩。

# jsp - 无法在 JSP 中将字符串强制转换为整数

> ID：15083385
> 
> 赞同：0
> 
> 时间：2013-02-26T07:12:09.597
> 
> 标签：jsp, nullpointerexception, numberformatexception

我得到的价值是：

```
String responseTime = request.getParameter("rt"); 
```

`rt`文本框的名称在哪里。

我想要整数/浮点值`responseTime`。但是当我编写以下代码时：

```
int rTime = Integer.parseInt(responseTime); 
```

或者

```
int rTime = Integer.parseInt(responseTime.toString()); 
```

我得到这些错误中的任何一个

```
java.lang.NumberFormatException;
java.lang.NullPointerException; 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:20:46.990

`responseTime`您的变量似乎为空。所以在第一种情况下

```
int rTime = Integer.parseInt(responseTime); 
```

你得到`NumberFormatException`了，因为 null 不能被解析为整数。

对于第二种情况

```
int rTime = Integer.parseInt(responseTime.toString()); 
```

你得到NPE是因为你调用`toString`null。

因此，请确保正确传递变量并仔细检查请求中变量的名称。

# vba - SHIFT+F9 在宏和宏刷新速度

> ID：15083389
> 
> 赞同：1
> 
> 时间：2013-02-26T07:12:27.453
> 
> 标签：vba, excel

我做了两个链接的宏。

其中一个在工作簿中生成某个工作表的副本。这里的问题是我需要在所有复制的工作表中按 shift+f9 来更新我的值。我已经用过calculate和application.calculate = xl......

第二个宏调用第一个宏的值并对其执行操作。这里的问题是，在运行第一个宏并使用 shift+f9 后，更新所有工作表..如果我使用分配的按钮运行第二个宏，它不会运行，但如果我进入宏并逐步运行它运行正常。

我认为这是因为第一个宏的值需要时间来刷新，因此会出现这个问题..

宏1：

```
Sub macro1()
Worksheets("Excel Inputs").Activate
If Sheets("Excel Inputs").Cells(11, "P") = 3 Then
    Sheets("Valuation 02").Delete
    Sheets("Valuation 03").Delete
ElseIf Sheets("Excel Inputs").Cells(11, "P") = 2 Then
    Sheets("Valuation 02").Delete
End If
Length = WorksheetFunction.CountA(Range("B13:B15"))
For i = 1 To Length - 1
    Sheets("Valuation 01").Copy After:=Sheets(4 + i)
    Sheets(4 + i + 1).Name = "Valuation 0" & (i + 1)
    Application.Calculation = xlCalculationAutomatic
Next i
    Sheets("Excel Inputs").Cells(11, "P") = Length
End Sub 
```

谁可以帮我这个事 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:39:32.177

通常我会用它`Application.onTime Now + TimeValue("hh:mm:ss"),"macro2"`
来解决这类问题。您可以将宏 2 设置为对宏 1 有一些延迟运行。

并确保在您的宏1结束时， `Application.calculation = xlCalculationAutomatic` 或 `Application.CalculateFullRebuild`

如果这个方法不够好，就得用一个单元格或者一个全局变量作为守望者来判断是否所有的计算都完成了。
例如，在 marco1 结束时，继续使用`Application.onTime`event 来检查某些单元格值 <> ""，如果尚未完成，则递归调用自身。

参考：[Application.OnTime](http://msdn.microsoft.com/en-us/library/office/ff196165.aspx) [Application.CalculateFullRebuild](http://msdn.microsoft.com/en-us/library/office/bb223213%28v=office.12%29.aspx)

# actionscript-3 - AS3 NetStream 似乎没有关闭

> ID：15083390
> 
> 赞同：0
> 
> 时间：2013-02-26T07:12:29.567
> 
> 标签：actionscript-3, flash, flv, netstream

我正在使用以下代码重用单个 FLVPlayback 组件变量。有谁知道为什么 NetStream 不会停止？

```
public function clearVideoPlayer(newSource:String):void {

    if (_videoFLV) {
        removeChild(_videoFLV);
        _videoFLV.getVideoPlayer(0).close(); 
        _videoFLV = null;
    }

    _videoFLV = new FLVPlayback();
    _videoFLV.autoPlay = false;
    _videoFLV.autoRewind = false;
    _videoFLV.width = 320;
    _videoFLV.height = 240;

    _videoFLV.source =  newSource;
    addChild(_videoFLV);
} 
```

但是在多次运行该功能后，根据 Scout`NetStream`并没有关闭。

在 UI 的网络事件行中，我得到例如 4 x 接收 NetStream 音频/视频，5 x 接收 NetStream 音频/视频，2 x 接收 NetStream 音频/视频

这种情况会无限期地持续下去，在任何视频的长度之后很久。

谢谢，

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:16:10.507

您是否尝试过更换

```
_videoFLV.getVideoPlayer(0).close(); 
```

经过

```
_videoFLV.closeVideoPlayer(0); 
```

此外，设置`_videoFLV`为`null`没有用，因为您在之后为其分配了一个新值。

# node.js - 节点 js 导出变量维护引用 - 引用传递？

> ID：15083391
> 
> 赞同：1
> 
> 时间：2013-02-26T07:12:37.503
> 
> 标签：node.js, reference, pass-by-reference, sequelize.js

嘿，我只是想确保我没有犯这个大错误。我将 Sequelize.js 用于 node.js 项目。我想确保我是通过引用传递的，有人请解释这个概念，以及是否有更好的方法来做到这一点。

```
var sequelize = new Sequelize(database, user, password);
exports.User = User = sequelize.import(__dirname + '/models/user');
exports.Comment = Comment = sequelize.import(__dirname + '/models/comment');

User.hasMany(Comment);
Comment.belongsTo(User);

// I dont want my code to look like this

exports.User.hasMany(exports.Comment); 
```

我认为我正在做的是引用相同的内存。因此，如果以某种方式更改了用户，它也会更改 export.User。是对的吗？

我这样做的原因是我想在我的 models.js 文件中使用变量 User 以便更容易地执行 User.hasMany(Comments) 等......并且还能够将相同的变量导出到其余的我的应用程序。有什么建议、警告、见解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T23:00:04.777

你是对的，它们是同一个变量。但是，这很糟糕，因为您没有“var”语句。

```
exports.User = User = sequelize.import(__dirname + '/models/user'); 
```

改为这样做。

```
var User = exports.User = sequelize.import(__dirname + '/models/user'); 
```

另外，您不小心`User`在注释行上设置了。

# android - setOnKeyListner 不适用于 EditText

> ID：15083392
> 
> 赞同：1
> 
> 时间：2013-02-26T07:12:38.843
> 
> 标签：android, keyboard, android-edittext, keylistener

这里我有一个片段，它包含一个编辑文本，我想在 Enter Key Press 上隐藏软键盘。

我试过这个。但似乎我的 onKey 方法没有被调用。我已经检查过了`Log`

```
edTxtUserText.setInputType(InputType.TYPE_TEXT_VARIATION_URI);

    edTxtUserText.setOnKeyListener(new OnKeyListener() {

        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {

            if ((event.getAction() == KeyEvent.ACTION_DOWN)
                    && (keyCode == KeyEvent.KEYCODE_ENTER)) {
                InputMethodManager imm = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(edTxtUserText.getWindowToken(),
                        0);
                return true;
            }
            return false;
        }
    }); 
```

*   我的代码有什么问题。

这也是我的editText XML

```
 <EditText
                android:id="@+id/edTxtPreview"
                android:layout_width="125dp"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_alignTop="@+id/txtText"
                android:layout_marginRight="24dp"
                android:background="@drawable/edit_text_style"
                android:ems="10"
                android:imeOptions="flagNoExtractUi"
                android:inputType="textCapWords|text"
                android:lines="1"
                android:selectAllOnFocus="true"
                android:text="Your Text Here"
                android:textColor="@android:color/white"
                android:textSize="18sp" >
            </EditText> 
```

我也在这个editText上设置了OnClickListner。作为

```
edTxtUserText.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            edTxtUserText.requestFocus();
            edTxtUserText.selectAll();
            ((InputMethodManager) getActivity().getSystemService(
                    Context.INPUT_METHOD_SERVICE)).toggleSoftInput(
                    InputMethodManager.SHOW_FORCED,
                    InputMethodManager.HIDE_IMPLICIT_ONLY);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:19:51.880

您可以尝试使用以下代码

```
mEditText.setOnEditorActionListener(new OnEditorActionListener() {

        @Override
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
            if(event.getAction() == KeyEvent.KEYCODE_ENTER){
                //Do Operations here
            }
            return false;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:39:59.093

我只是使用代码并在按键时成功地关闭了键盘，`done`但我只是替换了下面的代码行：

尝试：

```
InputMethodManager inputManager = (InputMethodManager)
                        getActivity().getSystemService(Context.INPUT_METHOD_SERVICE); 

            inputManager.hideSoftInputFromWindow(getActivity().getCurrentFocus().getWindowToken(),
                           InputMethodManager.HIDE_IMPLICIT_ONLY); 
```

反而：

```
 InputMethodManager imm = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(edTxtUserText.getWindowToken(),
                        0); 
```

注意：在模拟器中测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T08:09:27.753

我让它按照你的方式工作，即使用 onKeyListener。使用 keycode 而不是 getAction() 只需使用

```
if (keyCode == KeyEvent.ACTION_DOWN) {
                    Log.d("Neha", "in if condition ");
                    InputMethodManager imm = (InputMethodManager) getActivity()
                            .getSystemService(Context.INPUT_METHOD_SERVICE);
                    imm.hideSoftInputFromWindow(edTxtUserText.getWindowToken(),
                            0);
                    return true;
                } 
```

# android - Android：来自列表视图项目的下一个/上一个数据详细信息

> ID：15083396
> 
> 赞同：0
> 
> 时间：2013-02-26T07:13:00.967
> 
> 标签：android, listview, button

我想显示来自listviews android的详细信息数据，我做到了......但问题是，我不知道如何通过单击基于listview数据的下一个/上一个按钮来**创建一个函数来显示下一个/上一个详细**数据.

这是[我的列表视图数据布局](http://dl.dropbox.com/u/57465028/Listview.png)

这是我的下一个/上一个详细数据[布局](http://dl.dropbox.com/u/57465028/next-previous.png)

请有人告诉我如何做到这一点（示例代码，教程，链接）

预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:24:32.613

1.  通过使用 get 和 set 方法，我在存储活动名称的不同类中创建了一个函数。您可以设置每个 prev 或 next 活动并通过 get 方法调用它。

2.  通过调用意图。

例如：

```
 `    public void onClick(View arg0) {
                // TODO Auto-generated method stub
                Intent_start1();
                finish();
            }

            private void Intent_start1() {
                // TODO Auto-generated method stub
                Intent i2 = new Intent();
                i2.setClass([Your Current Class].this,[Class where you wish to move].class);
                startActivity(i2);
            }
        }); ` 
```

不要调用finish()方法

我喜欢使用意图:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:23:37.390

该死的！使用列表视图的数组列表数据，将适当的传递`position`给下一个活动，然后按下一个`call next data from array-list`，同时按`call previous data`数组列表中的上一个，这样你就可以实现你的目标！

我回答了一个类似的问题，希望对您有所帮助。

[stackverflow 问题：如何进行下一步按钮操作？](https://stackoverflow.com/a/14641493/646806)

# jquery - jquery before()，递归函数问题

> ID：15083398
> 
> 赞同：0
> 
> 时间：2013-02-26T07:13:07.507
> 
> 标签：jquery, recurrence

我想通过单击使用 before() 函数来复制具有类“test2”的 div。单击也会删除原始 div 上的“test2”类，如果用户再次单击原始 div，则会出现警报（'ok'）。它运行良好，但如果我复制 div 的 n 次，并且如果我在 originel div 上单击一次，则 alert('ok'); 将全部 n 次。

我的代码是：

```
<div class="test1 test2">message</div>

<script src="jquery.js"></script>
<script>
$(function () {

function test() {
    $('.test1').click(function(){
            if($(this).hasClass('test2')){
                $(this).before('<div class="test1 test2">message</div>');
                $(this).removeClass('test2');
            }
            else{
                alert('ok');
            }
    test(); 
    });

}

test();

});
</script> 
```

[http://jsfiddle.net/manguo_manguo/TNeYk/](http://jsfiddle.net/manguo_manguo/TNeYk/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:31:06.550

试试这个：[**here at fiddle**](http://jsfiddle.net/TNeYk/2/)

```
 function test() {
   var i=1;
   $(document).on('click', '.test1', function () {
       if ($(this).hasClass('test2')) {
          $(this).before('<div class="test1 test2">message'+ i++ +'</div>');
          $(this).removeClass('test2')
       } else {
          alert('ok');
       }
   });
}
$(function () {
   test();
}); 
```

# android - Java 文件未找到异常 - /proc/mtprof/status：打开失败：

> ID：15083400
> 
> 赞同：3
> 
> 时间：2013-02-26T07:13:11.363
> 
> 标签：android

谁能解释为什么会发生此错误？

我使用媒体播放器从资产文件夹播放一个音频文件，并在可绘制文件夹的 imageview 中显示一些图像。项目是在 android 4.0.3 api 中构建的。

在将 admobsdk 添加到 project 之前，这非常有效。现在我无法在 imageview 中看到图像。谁能给我解决方案？

```
java.io.FileNotFoundException: /proc/mtprof/status: open failed: ENOENT (No such file or directory)
E/ActivityManager(  231):       at libcore.io.IoBridge.open(IoBridge.java:448)
E/ActivityManager(  231):       at java.io.FileInputStream.<init>(FileInputStream.java:78)
E/ActivityManager(  231):       at java.io.FileInputStream.<init>(FileInputStream.java:105)
E/ActivityManager(  231):       at com.android.server.am.ActivityRecord.mtProf(ActivityRecord.java:852)
E/ActivityManager(  231):       at com.android.server.am.ActivityRecord.windowsDrawn(ActivityRecord.java:653)
E/ActivityManager(  231):       at com.android.server.am.ActivityRecord$Token.windowsDrawn(ActivityRecord.java:225)
E/ActivityManager(  231):       at com.android.server.wm.WindowManagerService$H.handleMessage(WindowManagerService.java:6994)
E/ActivityManager(  231):       at android.os.Handler.dispatchMessage(Handler.java:99)
E/ActivityManager(  231):       at android.os.Looper.loop(Looper.java:154)
E/ActivityManager(  231):       at com.android.server.wm.WindowManagerService$WMThread.run(WindowManagerService.java:754)
E/ActivityManager(  231): Caused by: libcore.io.ErrnoException: open failed: ENOENT (No such file or directory)
E/ActivityManager(  231):       at libcore.io.Posix.open(Native Method)
E/ActivityManager(  231):       at libcore.io.BlockGuardOs.open(BlockGuardOs.java:110)
E/ActivityManager(  231):       at libcore.io.IoBridge.open(IoBridge.java:432) 
```

**代码**

```
AssetFileDescriptor descriptor;
mediaPlayer = new MediaPlayer();
mediaPlayer.setOnCompletionListener(this);
descriptor = getAssets().openFd("test.mp3" );
mediaPlayer.setDataSource(descriptor.getFileDescriptor(), descriptor.getStartOffset(), descriptor.getLength() );
descriptor.close();
mediaPlayer.prepare();
mediaPlayer.start();
buttonPlay.setBackgroundDrawable(getResources().getDrawable(R.drawable.pause_button));
buttonPlay.setTag(getResources().getString(R.string.pause)); 
```

# jquery - Slimbox2 覆盖整个站点的位置。没有上一个或下一个按钮似乎没有悬停效果

> ID：15083403
> 
> 赞同：0
> 
> 时间：2013-02-26T07:13:15.013
> 
> 标签：jquery, plugins, lightbox

我正在使用 Slimbox2，并且我得到了一个覆盖大/暴露的灯箱图像的叠加层。覆盖就在它上面！这似乎是开箱即用的功能......还有其他人遇到过这种情况吗？有解决办法吗？！我错过了什么？！大声笑*疯了*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T11:58:36.403

这是与最新 jquery 1.9 的兼容性问题......请看这里：[https ://code.google.com/p/slimbox/issues/detail?id=36](https://code.google.com/p/slimbox/issues/detail?id=36)

# asp.net - 在 Repeater 中使用 FormView 的 FindControl 方法

> ID：15083410
> 
> 赞同：0
> 
> 时间：2013-02-26T07:13:41.877
> 
> 标签：asp.net, sql-server, vb.net, findcontrol

我需要一个建议如何更正我的代码。我正在使用 FindControl 方法在 Repeater 中查找 TextBox。这是我的标记：

```
<asp:Repeater ID="Repeater1">
    HERE ARE SOME OTHER DATA
    <ItemTemplate>
         <asp:FormView ID="FormViewAddComment" runat="server"
             DataSourceID="SqlDataSourceInsertComments" DefaultMode="Insert"
             OnItemInserted="FormViewAddComment_ItemInserted" 
             OnItemInserting="FormViewAddComment_ItemInserting">
             <InsertItemTemplate>
                 <asp:TextBox ID="txtAddComment" runat="server" CssClass="textbox"
                     Text='<%# Bind("CommentText") %>' Width="200px" />
                 <asp:Button ID="btnAddComment" runat="server" CssClass="button"
                      Text="Comment" CommandName="Insert" CausesValidation="false"/>
             </InsertItemTemplate>
         </asp:FormView>  
    </ItemTemplate>
</asp:Repeater> 
```

这是我背后的代码：

```
Protected Sub FormViewAddComment_ItemInserting(sender As Object, e As FormViewInsertEventArgs)
    Dim FormView As FormView = DirectCast(Repeater1.FindControl("FormViewAddComment"), FormView)
    Dim Comment As TextBox = DirectCast(FormView.FindControl("txtAddComment"), TextBox)
    If Comment.Text = "" Then
        Exit Sub
    End If
End Sub 
```

未找到 Comment TextBox，并且代码在尝试访问 Text 属性时引发对象引用错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:32:42.803

您可以使用 ItemDataBound 事件在其中找到文本框。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:34:23.097

您正在访问`"txtAddComment`FormView中的“，那么为什么要在Repeater中找到FormView，然后再在其中的文本框中找到...您可以直接找到它...

```
Protected Sub FormViewAddComment_ItemInserting(sender As Object, e As FormViewInsertEventArgs)
        If (FormView1.CurrentMode == FormViewMode.Insert)      
            Dim Comment As TextBox = DirectCast(FormViewAddComment.FindControl("txtAddComment"), TextBox)
        If Comment.Text = "" Then
            Exit Sub
        End If
    End Sub 
```

编辑：-

我的观点是你在`ItemInserting`Event of中写代码`FormView`，所以你可以直接找到FormView。我建议使用`NamingContainer`oredr中的属性来找到触发事件的FormView，这样你就可以找到FormView然后你可以很容易地在其中找到TextBox。[这里](http://forums.asp.net/t/1638799.aspx/1)有 Gridview 的 NamingContainer 示例

# html - 影响子锚链接的手风琴链接

> ID：15083411
> 
> 赞同：0
> 
> 时间：2013-02-26T07:13:43.580
> 
> 标签：html, css, hyperlink, accordion

下面是代码演示的链接

**[在这里提琴](http://jsfiddle.net/zkZN6/)**

有2个问题

1.  点击第一个手风琴I的链接（Link1 | Link 2 | Link 3），为什么会表现得很奇怪
2.  并且第一个手风琴内容中的子子 div 在输出中不可见。( `<div>This div is not visible in the output</div>`)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:28:13.933

像这样写：

```
$('.accordion > li > a').click(function(){
        $(this).next().slideToggle("fast");
        $(this).closest('li').toggleClass('active');
    }); 
```

**将类名**定义为 DIV 而不是`.accordion div{display:none}`. 像这样写：

```
.accordion .extended{display:none;} 
```

检查这个[http://jsfiddle.net/zkZN6/2/](http://jsfiddle.net/zkZN6/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:19:09.907

原因是您`$('.accordion a').click(function(){`在 javascript 中定义了影响名为“accordion”的类名下的所有标签。您需要为“accr1,accr2,accr3...etc”定义另一个类名，并为它们定义另一个 javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:28:41.530

好吧，正如 Tugkan 所说，所有链接都受到影响，`$('.accordion a').click(function(){`这就是为什么它表现得很奇怪，就部门而言，属性显示没有应用于它，在检查元素中看到。

做这样的事情来使分裂出现：

[演示](http://jsfiddle.net/zkZN6/3/)

```
style="display:block;" 
```

# c# - 检索登录用户的 IP 地址

> ID：15083413
> 
> 赞同：0
> 
> 时间：2013-02-26T07:14:13.087
> 
> 标签：c#, asp.net-mvc

[如何从 ASP.NET 中的请求中获取 IP 地址？](https://stackoverflow.com/questions/866980/how-do-you-get-the-ip-address-from-a-request-in-asp-net?rq=1)

```
private string GetUserIP()
{
    string ipList = Request.ServerVariables["HTTP_X_FORWARDED_FOR"];

    if (!string.IsNullOrEmpty(ipList))
    {
        return ipList.Split(',')[0];
    }

    return Request.ServerVariables["REMOTE_ADDR"];
} 
```

我总是收到`null`上述功能的回报。我期待价值，即`192.168.1.100`

我将上面的内部代码替换为`return Request.UserHostAddress;`并收到`::1`

# android - 如何在 Android 中的 Clicking 事件中将 ListView 选择模式从单个切换为多个？

> ID：15083422
> 
> 赞同：3
> 
> 时间：2013-02-26T07:15:28.697
> 
> 标签：android, android-layout, listview, android-listview

我想知道如何在单击按钮时将列表视图选择模式从单个切换到多个。这样我就可以选择多个列表项并将其删除，删除后我应该回到单选模式。如果您有任何想法如何实施此帮助我。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:20:13.503

调用`setChoiceMode`不足以显示`checkboxes`在列表行旁边。如果您对行使用基本布局，请尝试`android.R.layout.simple_list_item_multiple_choice`. 否则，您必须在行布局中添加一个复选框并在适配器的`getView`方法中自己管理其开/关状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T07:18:04.767

实现`OnClick`功能`button`并检查`ListView`状态模式并根据您的偏好进行更改，如下所示....

```
 public void onClick(View v) {

   switch(v.getId()){
      case (R.id.mybutton):       
         ListView listView = getListView();
           if (listView.getChoiceMode() == ListView.CHOICE_MODE_MULTIPLE)
            {
               listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
            }
            else if (listView.getChoiceMode() == ListView.CHOICE_MODE_SINGLE)
             {
              listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
             }
            break;
         }
       } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T07:18:18.343

您可以为此使用以下代码：

```
<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:choiceMode="multipleChoice"
     >
</ListView> 
```

# java - Java 泛型类测试

> ID：15083424
> 
> 赞同：1
> 
> 时间：2013-02-26T07:15:34.073
> 
> 标签：java, generics, binary-search-tree

我正在尝试测试我编写的 java 泛型类，这是我的测试

```
public class BSTTest
{
    public void testInsert()
    {
        int height;
        BST<int> myTree = new BST<int>();
        myTree.insert(1);
    }

} 
```

但是当我编译时，我得到了意外类型的错误，它说如果找到一个 int 但需要在 BST myTree = new BST(); 行上引用 这意味着什么？

下面是我的二叉搜索树和节点类供参考

```
public class BST<E extends Comparable<E>>
{
    public Node<E> root;

    public BST()
    {
        root = null;
    }
    //insert delete find height
    public void find(E s, Node<E> n)
    {
        //empty tree, root is null
        if(n == null)
        {
            System.out.println("Item not present.");
        }
        //n is the node where s is, return n
        else if(n.getData().equals(s))
        {
            System.out.println("Item present");
        }
        //s is greater than n, look for s on the right subtree
        else if(s.compareTo(n.getData()) > 0)
        {
            find(s, n.getRight());
        }
        //s is less than n, look for s on the left subtree
        else
        {
            find(s, n.getLeft());
        }
    }

    public int height() 
    {
        int count;
        return count = height(root); 
    }

    private int height(Node<E> n)
    {
        int ct = 0;
        if(n == null)
        {

        }

        else
        {

            int left = height(n.getLeft());

            int right = height(n.getRight());

            ct = Math.max(left, right) + 1;
        }
        return ct;
    } 

    public void insert(E s) 
    {
        root = insert(s, root);
    } 

    private Node<E> insert(E s, Node<E> T)
    {
        //easiest case, empty tree, create new tree
        if(T == null)
        {
            T = new Node<E>(s,null,null);
        }
        //easiest case, found s
        else if(s.compareTo(T.getData()) == 0)
        {
            System.out.println("Item already present.");
        }
        //s is greater than T, insert on right subtree
        else if(s.compareTo(T.getData()) > 0)
        {
            T.setRight(insert(s, T.getRight()));
        }
        //s is less than T, insert on left subtree
        else
        {
            T.setLeft(insert(s,T.getLeft()));
        }
        return T;
    }

    public void delete(E d)
    {
    }

} 
```

和我的节点类

```
public class Node<E> 
    {
       private E data;
    private Node<E> left;
    private Node<E> right;
    private Node<E> parent;

       public  Node(E d, Node<E> r, Node<E> l) 
    {
      data = d;

        left = l;
        right = r; 
       }
       public void setData(E d) 
    {
      data = d;
       }
    public E getData()
    {
        return data;
    }
       public Node<E> getRight() 
    {
      return right;
       }
    public void  setRight(Node<E> nd)
    {
        right = nd;
    }
       public Node<E> getLeft()
    {
        return left;
    }
    public void  setLeft(Node<E> nd)
    {
        left = nd;
    }
    public Node<E> getParent()
    {
        return parent;
    }
    public void  setParent(Node<E> nd)
    {
        parent = nd;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T07:17:39.403

您可以尝试`Integer`代替`int`吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T07:18:47.600

泛型类型只需要类（对象类型）而不是基本数据类型
它应该是

```
BST<Integer> myTree = new BST<Integer>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:19:02.233

Java 泛型仅适用于 Object 类型。因为，`int`是一个原始类型，所以你不能使用它。而是使用`BST<Integer>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T07:19:47.313

您不能将原始类型`int`用作 Java 中泛型类的参数。它必须是类类型，例如`Integer`.

# asp.net - 将 Silverlight 5 Web 应用程序连接到 Windows Azure 数据库的最佳/最简单方法是什么？

> ID：15083428
> 
> 赞同：0
> 
> 时间：2013-02-26T07:15:49.943
> 
> 标签：asp.net, wcf, silverlight, azure-storage, ria

我有一个相当简单的项目正在进行中，我创建了一个非常基本的上传/下载功能 Silverlight 5 应用程序，以将用户选择的文件从他们的本地计算机上传到 Azure 数据库。在阅读了执行此操作的各种方法（WCF RIA 服务和其他）之后，我无法清楚地了解如何最好地实现这一点。

关于我的应用程序的更多信息是，我设想它非常简单，上传包括文件选择以及随后的标记和上传到 Azure 数据库，下载部分包括用户在数据透视表中搜索文件 -查看器喜欢环境，然后选择并下载他们想要的文件。如果相关：该应用程序将在 IE、Chrome 和 Firefox 中运行。

如何最好地将我的 Silverlight 应用程序连接到在 Windows Azure 中设置的数据库？教程或解释的链接将不胜感激！我正在寻找可能的示例，其中包含如何编写 Silverlight 应用程序以连接和上传/下载文件的示例代码，以及我需要在 Azure 端设置以使应用程序正常运行的示例/示例.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T13:12:10.717

我认为您需要使用任何工具来迁移您的架构并使用 SQL Server 2012 以正确的服务器名称连接到 SQL azure 数据库。

# c# - 将服务引用添加到 WinForm 项目时出错

> ID：15083434
> 
> 赞同：3
> 
> 时间：2013-02-26T07:16:06.453
> 
> 标签：c#, winforms, visual-studio-2010, web-services

我想在我的项目中使用实时服务，但是当我尝试添加它的引用时，出现以下错误：

```
网址为 https://exdev.www.property24.com/Services/P24ListingService19.asmx 的文档未被识别为已知文档类型。
来自每种已知类型的错误消息可能会帮助您解决问题：
- 来自“XML Schema”的报告是“W3C XML Schema 的根元素应该是，它的命名空间应该是 'http://www.w3.org/2001/XMLSchema'。”。
- 来自“DISCO 文档”的报告是“找不到 URL https://exdev.www.property24.com/Services/P24ListingService19.asmx 上的发现文档。”。
  - 无法识别文档格式（内容类型为 'application/xhtml+xml; charset=utf-8'）。
- 来自“WSDL 文档”的报告是“XML 文档 (3, 2) 中存在错误。”。
  - 没想到。
元数据包含无法解析的引用：“https://exdev.www.property24.com/Services/P24ListingService19.asmx”。
元数据包含无法解析的引用：“https://exdev.www.property24.com/Services/P24ListingService19.asmx”。
如果在当前解决方案中定义了服务，请尝试构建解决方案并再次添加服务引用。

```

可以浏览服务 URL 即：[https ://exdev.www.property24.com/Services/P24ListingService19.asmx](https://exdev.www.property24.com/Services/P24ListingService19.asmx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:10:52.653

我试图在“服务引用”下添加该 Web 服务引用，但这给出了上述错误![](../Images/9922f59cb975ad151d3f724c17706daa.png)。

问题是 Web 服务很旧，所以我设法通过转到服务参考的“高级”并将其添加为“Web 参考”来获得它的工作参考。由于 Web Reference 可以应付旧的服务。它对我有用，希望它也对你有用！

# sed - SED：在同一行中的两个模式之间组合文本

> ID：15083436
> 
> 赞同：1
> 
> 时间：2013-02-26T07:16:08.400
> 
> 标签：sed, awk

我正在尝试使用 sed /awk 命令来解析我的文本文件。我想在同一行的两个模式之间打印文本，并在其中添加一些字符。例如：如果我的线路是

`uint8_t aucRepresentationName[NR_UNIT_REPRESENTATIONS][CHARS_P_REPRESENTATION];`

或者

```
uint8_t aucRepresentationName [NR_UNIT_REPRESENTATIONS] [CHARS_P_REPRESENTATION]; 
```

我要打印`NR_UNIT_REPRESENTATIONS*CHARS_P_REPRESENTATION`

所以，我盯着 sed 命令在`\n`之后插入行分隔符`'['`，在合适的物种中划分行，然后尝试再次解析它。

```
echo "bla bla bla [AK] bla bla bla bla [A_K] bla bla bla" | sed 's/\[/\n&/g;' | awk '{sub(/.*\[ /,"");sub(/\].*/,"");print;}'

echo "bla bla bla [AK] bla bla bla bla [A_K] bla bla bla" | sed 's/\[/\n&/g;' | sed -e 's/^.*\[ //g;s/ \].*$//g' 
```

而且它并不总是二维数组，它可以是无或单/双维数组，我需要首先有多少[]实例，如果它的0然后写1，如果它的单维数组然后ex A [SIZE]然后写入 SIZE 其两个维度数组 ex:A[RAW][COL] 写入 RAW*COL..

我想知道我的命令有什么问题？或任何其他选择，因为它将帮助我进一步学习 sed。

阿姆鲁塔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:23:19.240

用这个：

```
perl -lne 'push @a,/\[([^\]]*)\]/g;END{print join "*",@a}' 
```

从[这里](http://theunixshell.blogspot.com/2013/01/capturing-all-regex-matches-into-array.html)修改 如下测试：

```
> echo "bla [AK] bla [A_K] 10" | perl -lne 'push @a,/\[([^\]]*)\]/g;END{print join "*",@a}'
AK*A_K 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T07:24:08.637

尝试：

```
awk -F '[][]' '{print $2,$4}' OFS=\* file 
```

* * *

好的，如果在一页中出现 0,1 或二维的单次出现，您可以尝试：

```
awk -F '[][]' '{if(NF==3)print $2; else if(NF>4)print $2,$4; else print 1}' OFS=\* file 
```

或更难理解；）：

```
awk -F '[][]' '{$0=NF==3?$2:NF>4?$2 OFS $4:1}1' OFS=\* file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T07:28:07.703

您可以尝试以下方法：

```
echo "bla bla bla [AK] bla bla bla bla [A_K] bla bla bla" | sed 's/.*\[\(.*\)\].*\[\(.*\)\].*/\1*\2/g' 
```

> AK*A_K

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T07:26:55.417

使用 sed：

```
sed -n 's/[^]]*\[\([^]]*\)\]\s*\[\([^]]*\)\].*$/\1*\2/p' input 
```

# javascript - kinetic.js stage.getDragLayer 方法

> ID：15083446
> 
> 赞同：1
> 
> 时间：2013-02-26T07:17:02.297
> 
> 标签：javascript, html, canvas, kineticjs

我正在尝试学习一些 kinetic.js。我对以下示例有一些问题：

[http://www.html5canvastutorials.com/labs/html5-canvas-modify-curves-with-anchor-points-using-kineticjs/](http://www.html5canvastutorials.com/labs/html5-canvas-modify-curves-with-anchor-points-using-kineticjs/)

这部分实际上做了什么：

```
stage.getDragLayer().beforeDraw(function() {
      drawCurves(curveLayer.getCanvas(), layer.quad, layer.bezier);
      updateDottedLines(layer);
    }); 
```

我的意思是 getDragLayer() 方法和 beforeDraw() 方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T08:17:02.063

KineticJS 构建了一个专门的层来处理拖放。

**getDragLayer()**获取对该层的引用。

**beforeDraw()**允许在任何与拖放相关的绘图开始之前执行一个函数。在这种情况下，drawCurves() 和 updateDottedLines() 被调用——这两个函数在您正在学习的演示中定义。

# cocoa - removeDeliveredNotification：没有

> ID：15083452
> 
> 赞同：3
> 
> 时间：2013-02-26T07:17:12.853
> 
> 标签：cocoa, osx-mountain-lion, nsusernotification, nsusernotificationcenter

我的 Mac 应用程序中有一些代码执行长时间运行的导出操作。在导出结束时，它会创建一个用户通知，让用户知道它已完成：

```
- (NSUserNotification*)deliverNotificationWithSound:(NSString*)sound title:(NSString*)title messageFormat:(NSString*)message {
    NSUserNotification * note = [NSUserNotification new];

    note.soundName = sound;
    note.title = title;
    note.informativeText = [NSString stringWithFormat:message, NSRunningApplication.currentApplication.localizedName, self.document.displayName];
    note.userInfo = @{ @"documentFileURL": self.document.fileURL.absoluteString };

    [NSUserNotificationCenter.defaultUserNotificationCenter deliverNotification:note];
    return note;
} 
```

然后它会放置一张包含导出详细信息的表格（遇到的警告，方便的“显示”按钮等）。当他们关闭工作表时，我想删除通知，如下所示：

```
[NSUserNotificationCenter.defaultUserNotificationCenter removeDeliveredNotification:note]; 
```

但是，这实际上并没有从通知中心删除通知。我设置了一个断点；该`-removeDeliveredNotification:`行已运行，并且`note`不为零。是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T22:18:52.813

您尝试删除的通知必须在`deliveredNotifications`数组中。引用文档`-removeDeliveredNotification:`

> 如果用户通知不在 DeliverNotifications 中，则不会发生任何事情。

当您调用时，您的通知可能会被复制`-deliverNotification:`，因此保留对该实例的引用并稍后尝试删除它可能会失败。相反，在通知的`userInfo`属性中存储一些东西以便您可以识别它，并扫描`deliveredNotifications`数组以找到您要删除的通知。

* * *

**布伦特添加**

这是我的问题中该方法的更正版本。我正在使用转换为整数的原始通知的指针值来识别副本；这不是万无一失的，但它可能已经足够好了。

```
- (NSUserNotification*)deliverNotificationWithSound:(NSString*)sound title:(NSString*)title messageFormat:(NSString*)message {
    NSUserNotification * note = [NSUserNotification new];

    note.soundName = sound;
    note.title = title;
    note.informativeText = [NSString stringWithFormat:message, NSRunningApplication.currentApplication.localizedName, self.document.displayName];
    note.userInfo = @{ @"documentFileURL": self.document.fileURL.absoluteString, @"originalPointer": @((NSUInteger)note) };

    [NSUserNotificationCenter.defaultUserNotificationCenter deliverNotification:note];

    // NSUserNotificationCenter actually delivers a copy of the notification, not the original.
    // If we want to remove the notification later, we'll need that copy.
    for(NSUserNotification * deliveredNote in NSUserNotificationCenter.defaultUserNotificationCenter.deliveredNotifications) {
        if([deliveredNote.userInfo[@"originalPointer"] isEqualToNumber:note.userInfo[@"originalPointer"]]) {
            return deliveredNote;
        }
    }

    return nil;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-26T11:47:48.403

谢谢你的好问题。

似乎 Apple 已解决问题，因为它可以通过使用单行代码为我工作。

```
UNUserNotificationCenter.current().removeDeliveredNotifications(withIdentifiers: aryIdentifier) 
```

我在模拟器中尝试了 5-6 个小时来清除本地通知，但没有运气。当我在实际设备中运行代码时，它会喜欢这种魅力。

快乐编码。

# java - 无需访问客户端私钥的双向 SSL（但能够签名）

> ID：15083458
> 
> 赞同：1
> 
> 时间：2013-02-26T07:17:58.383
> 
> 标签：java, android, ssl, apache-httpclient-4.x, two-way

**总结**
我需要在 Android 中建立双向 SSL 连接（带有客户端证书），最好使用 Apache HttpClient。我可以访问客户的证书，但不能直接访问客户的私钥。但是，我可以使用客户的私钥对数据进行签名。

由于我无法在没有私钥的情况下创建普通密钥库，是否有某种方法可以覆盖 SSL 握手并手动签署服务器发送的质询？

**什么？你没有钥匙，但你仍然可以用它来签名？**
用户的私钥存储在专用硬件设备上。它将显示用户的公共证书，它允许我传递数据，然后它将使用私钥签名/加密。但它不会给我钥匙本身。

# android - 流式传输音频文件并缓存它

> ID：15083463
> 
> 赞同：15
> 
> 时间：2013-02-26T07:18:07.620
> 
> 标签：android, caching, audio-streaming, android-mediaplayer

我想**流式传输音频 mp3 文件，然后通过 android 媒体播放器播放它，**另外我**还想缓存这个文件**，这样媒体播放器就不必流式传输最近播放的曲目。

我尝试过使用`prepareAsync`方法，但它不能让我访问缓冲区内容，所以我决定自己流式传输音频文件，然后将其传递给媒体播放器进行播放。**[我通过在此处](http://blog.infidian.com/2008/04/04/tutorial-custom-media-streaming-for-androids-mediaplayer/)**遵循本文实现了这一点，但是这种方法存在问题，即在将文件传输到媒体播放器时，它进入错误模式，导致我的播放器行为不一致。

当媒体播放器进入其错误模式时，它不会自动退出，因此我被迫创建一个新的媒体播放器，然后重新为其提供下载的文件，这种解决方法会导致用户在播放歌曲时遇到不希望的暂停.

那么，是否有人改进了上面[链接](http://blog.infidian.com/2008/04/04/tutorial-custom-media-streaming-for-androids-mediaplayer/)中给出的代码版本？**还是**他们知道这个问题的更好解决方案，**或者**实际上是否有一个用于在 android 中流式传输音频文件的库？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-07T04:25:49.153

您提供的链接看起来不太理想（更不用说过时了）。您可能想要的是一个本地代理服务器，它可以让您在获取字节数据之前访问`MediaPlayer`它。[在这里](https://stackoverflow.com/questions/12701249/getting-access-to-media-player-cache/18627606#18627606)查看我的答案以获得更多解释。

# php - 按下更新按钮时，一些数据被删除

> ID：15083468
> 
> 赞同：0
> 
> 时间：2013-02-26T07:18:29.107
> 
> 标签：php, sql-update

拜托，我在通过表单更新数据库中的数据时遇到问题。当我按下更新按钮提交对记录所做的任何更改时，与下拉列表控件对应的 mysql 字段中的所有数据都将被删除。我不知道是什么导致了这个问题。这是代码：

```
<?php

    //include database connection
    include 'db_connect.php';

    // get value of object id that was sent from address bar
    $c_id = $_GET['c_id'];

    //check any user action
    $action = isset( $_POST['action'] ) ? $_POST['action'] : "";

    if($action == "update"){ //if the user hit the submit button

    //write our update query
    //$mysqli->real_escape_string() function helps us prevent attacks such as SQL injection

    $query = "UPDATE collections
    SET
    ctitle = '".$mysqli->real_escape_string($_POST['ctitle'])."',
    csubject = '".$mysqli->real_escape_string($_POST['csubject'])."',
    creference = '".$mysqli->real_escape_string($_POST['creference'])."',
    cyear  = '".$mysqli->real_escape_string($_POST['cyear'])."',
    cobjecttype = '".$mysqli->real_escape_string($_POST['cobjecttype'])."',
    cmaterial = '".$mysqli->real_escape_string($_POST['cmaterial'])."',
    ctechnic = '".$mysqli->real_escape_string($_POST['ctechnic'])."',
    cwidth = '".$mysqli->real_escape_string($_POST['cwidth'])."',
    cheight = '".$mysqli->real_escape_string($_POST['cheight'])."',
    cperiod = '".$mysqli->real_escape_string($_POST['cperiod'])."',
    cmarkings = '".$mysqli->real_escape_string($_POST['cmarkings'])."',
    cdescription = '".$mysqli->real_escape_string($_POST['cdescription'])."',
    csource = '".$mysqli->real_escape_string($_POST['csource'])."',
    cartist = '".$mysqli->real_escape_string($_POST['cartist'])."'
    where c_id='".$mysqli->real_escape_string($_REQUEST['c_id'])."'";

    //execute the query
    if( $mysqli->query($query) ) {

    //if updating the record was successful
    echo "The record was updated.";

    }else{

    //if unable to update new record
    echo "Database Error: Unable to update record.";

    }

    }

    //select the specific database record to update
    $query = "SELECT c_id, ctitle, csubject, creference, cyear, cobjecttype, cmaterial, ctechnic, cwidth, cheight, cperiod, cmarkings, cdescription, csource, cartist, cfilename
    FROM collections
    WHERE c_id='".$mysqli->real_escape_string($_REQUEST['c_id'])."'

    limit 0,1";

    //execute the query
    $result = $mysqli->query( $query );

    //get the result
    $row = $result->fetch_assoc();

    //assign the result to certain variable so our html form will be filled up with values
    $c_id = $row['c_id'];
    $ctitle = $row['ctitle'];
    $csubject = $row['csubject'];
    $creference = $row['creference'];
    $cyear = $row['cyear'];
    $cobjecttype = $row['cobjecttype'];
    $cmaterial = $row['cmaterial'];
    $ctechnic = $row['ctechnic'];
    $cwidth = $row['cwidth'];
    $cheight = $row['cheight'];
    $cperiod = $row['cperiod'];
    $cmarkings = $row['cmarkings'];
    $cdescription = $row['cdescription'];
    $csource = $row['csource'];
    $cartist = $row['cartist'];
    $cfilename = $row['cfilename'];

    ?>

    <!--we have our html form here where new object information will be entered-->
    <table align=left>
        <tr>
    <td> <?php echo '<img src="./images/'.$cfilename.'" width="300" height="400" />';  ?> </td>
        </tr>
    <table>

    <form action='#' method='post' border='0'> 
    <table>
    <tr>
    <td>TITLE</td>
    <td><input type='text' name='ctitle' value='<?php echo $ctitle;  ?>' /></td>
    </tr>
    <tr>
    <td>SUBJECT</td>
    <td><input type='text' name='csubject' value='<?php echo $csubject;  ?>' /></td>
    </tr>
    <tr>
    <td>REFERENCE No.</td>
    <td><input type='text' name='creference'  value='<?php echo $creference;  ?>' /></td>
    </tr>
    <tr>
    <td>YEAR</td>
    <td><input type='text' name='cyear'  value='<?php echo $cyear;  ?>' /></td>
    <tr><td>OBJECT TYPE</td>
    <td>
        <select name="cobjecttype" id="cobjecttype" tabindex="">
            <option value="">---Select object type---</option>
            <option value="ceramic">Ceramic</option>
            <option value="clock">Clock</option>
            <option value="gold">Gold and silverware</option>
            <option value="mask">Mask</option>
            <option value="painting">Painting</option>
            <option value="sculpture">Sculpture</option>
            <option value="tapestry">Tapestry</option>
        </select>
        </td></tr>
        <tr><td>MATERIAL USED</td>
    <td>
        <select name="cmaterial" id="cmaterial" tabindex="" >
            <option value="">---Select Material---</option>
            <option value="brass">Brass</option>
            <option value="oil">Oil</option>
            <option value="wood">Wood</option>
            <option value="carved">Canvas/Cotton/Fabric/Linen/Wool</option>
      </select>
        </td></tr>
    <tr><td>TECHNIC</td>
    <td>
        <select name="ctechnic" id="ctechnic" tabindex="7" >
            <option value="">---Select Technic---</option>
            <option value="cast">Cast</option>
            <option value="carved">Carved</option>
            <option value="etched">Etched</option>                      
      </select>  
        </td></tr>
    <tr>
    <td>WIDTH</td>
    <td width="100"><input name="cwidth" type="text" id="cwidth" value="<?php echo $cwidth; ?>" size="10"></td>
    </tr>
    <tr>
    <td>HEIGHT</td>
    <td width="100"><input name="cheight" type="text" id="cheight" value="<?php echo $cheight; ?>" size="10"></td>
    </tr>
    <tr>
    <td>PERIOD</td>
    <td width="100"><input name="cperiod" type="text" id="cperiod" value="<?php echo $cperiod; ?>" size="30"></td>
    </tr>
    <tr>
    <td>MARKINGS</td>
    <td width="100"><input name="cmarkings" type="text" id="cmarkings" value="<?php echo $cmarkings; ?>" size="30"></td>
    </tr>
    <tr>
    <td>DESCRIPTION</td>
    <td width="400"><textarea name="cdescription" rows="2" cols="50" id="cdescription" value="<?php echo $cdescription; ?>"></textarea></td></tr>
    <tr>
    <td>SOURCE</td>
    <td width="100"><input name="csource" type="text" id="csource" value="<?php echo $csource; ?>" size="30"></td>
    </tr>
    <tr>
    <td>ARTIST</td>
    <td width="100"><input name="cartist" type="text" id="cartist" value="<?php echo $cartist; ?>" size="30"></td>
    </tr>
    <td></td>
    <td>

    <!-- so that we could identify what record is to be updated -->
    <input type='hidden' name='c_id' value='<?php echo $c_id ?>' />

    <!-- we will set the action to update -->
    <input type='hidden' name='action' value='update' />
    <input type='submit' value='Save' />
    <a href='gallery.php'>Back to display page</a>
    </td>
    </tr>
    </table>
    </form> 
```

有人可以帮助确定问题所在吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:22:10.407

当您没有正确验证您的 POST 数据时，就会出现此类问题。在您的代码中，您使用 . 直接更新您的记录`mysql_real_escape_string($variable)`。但是，尽管这可能会解决一些安全问题，但不会验证每个数据是否**存在。**

在更新到查询之前验证您的变量是否存在并保存数据。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T10:20:55.943

您使用该方法发布表单`POST`，但使用该方法获取 c_id`$_GET`

将其更改为`$_POST['c_id']`或`$_REQUEST['c_id']`...

# symfony - symfony2 multidelte 记录删除

> ID：15083472
> 
> 赞同：0
> 
> 时间：2013-02-26T07:18:39.897
> 
> 标签：symfony

我有一个名为 index 的文件，其中显示了客户查询列表。我想在其中放置多个删除。

我的索引文件列表的代码如下。

```
 {% block body -%}
<h1>Enquiry list</h1>

<table class="records_list" id="rounded-corner">
    <thead>
        <tr>
    <th>Option</th>
    <th>Id</th>
            <th>Name</th>
            <th>Email</th>
            <th>Subject</th>
            <th>Body</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
    {% for entity in entities %}
        <tr>
    <td><input type="checkbox" name="multiSelect" id="multiSelect[]" value="{{ entity.id }}"></td>
            <td><a href="{{ path('enquiry_show', { 'id': entity.id }) }}">{{ entity.id }}</a></td>
            <td>{{ entity.name }}</td>
            <td>{{ entity.email }}</td>
            <td>{{ entity.subject }}</td>
            <td>{{ entity.body }}</td>
            <td>

                    <a href="{{ path('enquiry_show', { 'id': entity.id }) }}" title="View"><img src="http://test//bundles/blogger/image/view.png" style="width:30px; height:30px"></a>

                    <a href="{{ path('enquiry_edit', { 'id': entity.id }) }}" title="Edit"> <img src="http://test//bundles/blogger/image/edit.png" style="width:30px; height:30px" > </a>

            </td>
        </tr>
    {% endfor %}
    </tbody>
    <tfooter>

    </tfooter>
</table>

    <ul>
    <li>
        <a href="{{ path('enquiry_new') }}">
            Create a new entry
        </a>
    </li>
</ul>
{% endblock %} 
```

我已经把复选框放在里面了。我想要的是存储所有id的“multiSelect []”的数组值。我正在将它传递给我的控制器。我不知道如何将此数组值作为我的控制器参数传递。所以请帮助我，我想在这里传递它。

```
<tfooter>

      <a href="{{ path('enquiry_edit', " ")  }}">MultiDelete</a>

</tfooter> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:24:21.177

您需要为此使用[表格](http://symfony.com/doc/current/book/forms.html)。使用没有表单的输入字段总是一种草率的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:52:35.963

我得到了答案。我已经创建了表单并将请求传递给控制器​​ deleteAction 。

在 deleteAction 方法中

我使用 $request->get('multiSelect'); 获取请求参数 “multiSelect”输入框的名称。

并使用 repositoryclass 对象我已经完成了任务。

感谢您的答复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T15:09:20.820

我认为最安全的方法是使用 onclick 生成表单并通过邮寄方式发送的链接。例如：

```
<a href="{{ path('your_delete_action', { 'id': object.id }) }}" 
   token="{{ token }}"
   data-method="POST"
   object-id ="{{ object.id }}">
   <span class="red"><i class="icon-remove"></i></span>
</a> 
```

然后 onClick 这个链接你生成一个表单并将它发送到你的 deleteAction

```
// Every link with an attribute data-method
$("#container").on("click", "a[data-method]", function(event){
    event.preventDefault();

    var target = $(event.currentTarget);
    var method = target.attr('data-method');
    var action = target.attr('href');
    var token = target.attr('token');
    var objectId = target.attr('object-id');

    // Create a form on click
    var formulario = $('<form/>', {
        style:  'display:none;',
        method: method,
        action: action
    });

    formulario.appendTo(target);

    formulario.append("<input name='token' value='" + token + "' type='hidden'/>");
    formulario.append("<input name='id' value='" + objectId + "' type='hidden'/>");

    // Do submit
    formulario.submit();

}); 
```

# android - 如何跳过拨号器应用程序并直接从使用android cordova（phonegap）的应用程序拨打电话

> ID：15083475
> 
> 赞同：0
> 
> 时间：2013-02-26T07:18:52.923
> 
> 标签：android, cordova, phonegap-plugins

我可以在不打开拨号器应用程序的情况下直接从我的应用程序拨打电话吗？

我需要从应用程序中拨打某些号码，但它不应该打开拨号器应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:22:44.467

```
Intent out = new Intent();
    out.setAction(Intent.ACTION_CALL);
    out.setData(Uri.parse("tel:" + Uri.encode("+456")));
    startActivity(out);

<uses-permission android:name="android.permission.CALL_PHONE"/> 
```

# php - 查询员工空闲时间

> ID：15083480
> 
> 赞同：-2
> 
> 时间：2013-02-26T07:19:14.837
> 
> 标签：php, mysql, group-by, aggregate-functions

我是PhP的初学者请帮助我完成以下要求。

我有一个数据库表

```
EMPLOYEECODE JOBCODE STARTTIME(in float)  ENDTIME(in float)
1001          01       09.5101                12.1545
1001          01       13.255                 14.525
1001          02       15.000                 16.525
1002          01       09.000                 12.1058
1002          02       13.00                  17.1254 
```

我想获得每个员工在每个工作上的空闲时间和员工的总空闲时间，这将显示如下表

```
EMPLOYEECODE  JOBCODE   IdleTime(HH:MM)   TotalIdleTime(HH:MM)
1001           01           ?                     ?
1001           01           ?                     ?
1001           02           ?                     ?
1002           01           ?                     ?
1002           02           ?                     ? 
```

在上表数据中将显示类似

```
EMPLOYEECODE  JOBCODE                  IdleTime(HH:MM)           TotalIdleTime(HH:MM)
1001           (last worked)02         idle time on last job     total idle time of 1001 
```

在所有工作上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:52:47.127

下面的查询`MySQL`只是因为它滥用了总是选择非**聚合列**`MySQL`的第一个（而不是任意定位的）值（因此是 inner ）的事实，更不用说甚至后者的可能性了。**`ORDER BY``SELECT`**

 **请[参阅此 SQL 小提琴](http://sqlfiddle.com/#!2/91f0a/5)：

```
 SELECT x.EMPLOYEECODE
       , MAX(x.JOBCODE) AS JOBCODE
       , x.IdleTime
       , SUM(x.IdleTime) AS TotalIdleTime
    FROM ( SELECT EMPLOYEECODE
                , JOBCODE
                , SUM(ENDTIME - STARTTIME) AS IdleTime
             FROM employee
         GROUP BY EMPLOYEECODE, JOBCODE
         ORDER BY EMPLOYEECODE ASC, JOBCODE DESC ) AS x
GROUP BY x.EMPLOYEECODE
ORDER BY x.EMPLOYEECODE ASC 
```

这就是文档要说的：

> MySQL 扩展了 GROUP BY 的使用，以便选择列表可以引用未在 GROUP BY 子句中命名的非聚合列。这意味着前面的查询在 MySQL 中是合法的。您可以使用此功能通过避免不必要的列排序和分组来获得更好的性能。但是，这主要在每个未在 GROUP BY 中命名的非聚合列中的所有值对于每个组都相同时很有用。
> 
> **服务器可以从每个组中自由选择任何值，因此除非它们相同，否则选择的值是不确定的。此外，从每个组中选择值不会受到添加 ORDER BY 子句的影响。在选择了值之后对结果集进行排序，并且 ORDER BY 不会影响服务器选择的值。**

第二段（由我强调）似乎与我的陈述相矛盾，但我从未遇到不符合上述规则的结果（即选择第一个可用值）。此外，内部`ORDER BY`确实发生在外部选择发生之前，因此允许查询返回正确的值。**

# apache - 如何将 Apache HTTP 代码 404 替换为 200

> ID：15083481
> 
> 赞同：4
> 
> 时间：2013-02-26T07:19:15.540
> 
> 标签：apache, http, httpresponse

我不希望网站的apache返回任何HTTP代码404，
原因是认证委员会会扫描所有网站，
许多javascript链接和一些事件会导致404代码，
实际上这些链接是有效的但是检查器会误判错误。
所以，我想阻止 apache 返回 HTTP 代码 404，
如何配置 apache 返回 HTTP 代码 200 而不是 404 并显示我的定义错误页面？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T12:11:26.450

来自：[http ://www.askapache.com/htaccess/apache-status-code-headers-errordocument.html](http://www.askapache.com/htaccess/apache-status-code-headers-errordocument.html)

1.  在您的主 Web 目录中创建一个名为 404.. 的空白文件。可以为空白。
2.  将此添加到您的 .htaccess 文件中：

    ```
    Redirect 200 /404
    ErrorDocument 404 /404 
    ```

这会将 Apache ErrorDocument 更改为 /404 文件。但是 Redirect 行会导致对 /404 的请求发出 200 OK 响应而不是 404。

如果这不起作用，那无疑是由于重写。因此，如果是这种情况，请在 .htaccess 文件中的前 2 行下方但在任何其他重写行上方添加：

```
Options FollowSymLinks ExecCGI

RewriteEngine On
RewriteBase /

# If the requested file doesnt exist
# and if the requested file is not an existing directory
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^[^4]* /404 [L,S=4000] 
```

在以下位置进行了更详细的解释：[http ://www.askapache.com/htaccess/apache-status-code-headers-errordocument.html#Automate_ErrorDocument_Triggering](http://www.askapache.com/htaccess/apache-status-code-headers-errordocument.html#Automate_ErrorDocument_Triggering)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T07:27:03.753

我想你可以在下面使用这个简单的代码到 PHP 中：

`header("HTTP/1.1 200 OK");`

你可以测试一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-24T04:36:26.583

我用这个：

```
<?php header("Status: 200 OK"); ?> 
```

这段代码必须放在 .php 文件顶部的第一行代码中。搜索引擎、爬虫、浏览器和任何访问该站点的人都会将错误文档 404 页面视为标题 200。

Header 200 表示页面存在。Google 将抓取标题状态为 200 的网站并将其编入索引。

# android - 图片未在 android 中发布到 Twitter

> ID：15083482
> 
> 赞同：0
> 
> 时间：2013-02-26T07:19:17.187
> 
> 标签：android

我使用下面的代码将图像发布到 Twitter，

我在我的应用程序中使用 twitter4j-core-2.2.5 jar 文件，我真的不明白为什么它没有将图像发布到 twitter。

推特可以发图片吗？

```
File f = new File("/mnt/sdcard/13615320329.jpg");

 mTwitter.uploadPic(f, String.valueOf(Html
                 .fromHtml(TwitterApp.MESSAGE)));

public void uploadPic(File file, String message)
            throws Exception {
        try {
            StatusUpdate status = new StatusUpdate(message);
            status.setMedia(file);
            mTwitter.updateStatus(status);
        } catch (TwitterException e) {
            Log.d("TAG", "Pic Upload error" + e.getExceptionCode());
            throw e;
        }
    } 
```

但它只发布消息，Twitter api有什么问题还是我需要改变什么

请回答 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:46:55.843

试试这个：[Android 演示](https://github.com/itog/Twitter4j-android-Sample)。愿它有帮助。

```
if(isConnected()){
    OAuthService authService = new ServiceBuilder()
                                .provider(TwitterApi.class)
                                .apiKey(Constants.CONSUMER_KEY)
                                .apiSecret(Constants.CONSUMER_SECRET)
                                .callback(Constants.OAUTH_CALLBACK_URL)
                                .build();
    final OAuthRequest request = new OAuthRequest(Verb.POST, "https://upload.twitter.com/1/statuses/update_with_media.json");
                verifier = uri.getQueryParameter(Constants.IEXTRA_OAUTH_VERIFIER);
                try {   
                    Token token = getToken();
                    if(token!=null){
                        authService.signRequest(token, request); 
                        MultipartEntity entity = new MultipartEntity();

                        entity.addPart("status", new StringBody("Your Status!"));       // THIS IS THE TWITTER MESSAGE
                        entity.addPart("media", new FileBody(new File(uriString)));  // THIS IS THE PHOTO TO UPLOAD

                        ByteArrayOutputStream out = new ByteArrayOutputStream();
                        entity.writeTo(out);

                        request.addPayload(out.toByteArray());
                        request.addHeader(entity.getContentType().getName(), entity.getContentType().getValue());
                    }
                } catch (UnsupportedEncodingException e) {
                    e.printStackTrace();
                } catch(IOException e){
                    e.printStackTrace();
                }
                progressDialog = ProgressDialog.show(this,Constants.LABEL_BLANK, "Uploading Image",true);
                Thread requestThread = new Thread() {
                    public void run() {
                        try {
                            response = new JSONObject (request.send().getBody());
                            uiHandler.sendEmptyMessage(0);
                        }catch (JSONException e) {
                            Log.e("TOUR_APP_TAG", "JSONException Thrown: " + e.getMessage());
                            errorHandler.sendEmptyMessage(0);
                        }
                    }
                };
                requestThread.start();
}
...
...
final Handler uiHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        if(progressDialog != null)progressDialog.dismiss();
        if(response.has("id"))
            //your code
    }
};

final Handler errorHandler = new Handler() {
    @Override
    public void handleMessage(Message msg) {
        if(progressDialog != null)progressDialog.dismiss();
            //your code
    }
}; 
```

# iphone - iOS 中的 NSCachesDirectory 和 NSDownloadsDirectory 有什么区别？

> ID：15083484
> 
> 赞同：5
> 
> 时间：2013-02-26T07:19:29.553
> 
> 标签：iphone, ios, ipad

我想将下载的杂志保存到我的 iOS 应用程序的一个目录中。它似乎 `NSCachesDirectory`并且`NSDownloadsDirectory`是合适的。不知道它们有什么区别，哪一种适合下载杂志。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T07:23:36.293

NSCachesDirectory 可以在内存不足的情况下删除

如果您不希望您的文件被删除，您必须将它们存储在 Documents 目录中，但如果您不希望您的文件被 iTunes、iCloud 等支持，请添加“不备份”。

请看苹果的[File System Programming Guide](http://developer.apple.com/library/ios/#Documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html#//apple_ref/doc/uid/TP40010672-CH2-SW2)或[File System Basics](https://developer.apple.com/library/ios/documentation/FileManagement/Conceptual/FileSystemProgrammingGuide/FileSystemOverview/FileSystemOverview.html#//apple_ref/doc/uid/TP40010672-CH2-SW1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T07:28:25.647

我更喜欢 NSCachesDirectory 或 temp 目录来保存文件，因为对于 NSDownloadsDirectory 或文档目录，您必须使用不备份或 iCloud 大于 iOS 5。因为 iOS 5.0 不允许在文档目录中保存任何数据，它是拒绝应用商店的一大原因。

# java - 从 HttpServlet 中的请求参数解析 JSON

> ID：15083488
> 
> 赞同：0
> 
> 时间：2013-02-26T07:19:36.157
> 
> 标签：java, json, parsing

我需要实现一个解析器来解析“JSON 字符串”中的一些值。可以从请求参数访问数据，如下所示：

> String[] 标准 = request.getParameterValues("标准");

该条件包含以下字符串（每行代表一个字符串）：

```
{"fieldName":"name","operator":"iContains","value":"a string"}
{"fieldName":"date","operator":"equals","value":"2013-02-26"}
{"fieldName":"amount","operator":"equals","value":2600} 
```

我需要能够通过 fieldName 从标准中获取值。API 可能是这样的：

```
String name = CoolParserUtil.parseParam(criterion, "name", String.class);
// "a string"
Date date = CoolParserUtil.parseParam(criterion, "date", Date.class);
// date representing 2013-02-26
// etc. etc. 
```

你将如何实现解析器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:24:50.073

你应该看看[`JSON in Java`](https://github.com/douglascrockford/JSON-java)。

还有一个名为[`google-gson`](https://sites.google.com/site/gson/gson-user-guide)，它提供了诸如为自定义类型定义序列化和反序列化的类型适配器等功能。您可以[在此处](https://stackoverflow.com/questions/1688099/converting-json-to-java/1688182#1688182)找到一个用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T07:52:26.873

好吧，您可以使用任何可用的无数 Json 库轻松地将字符串解析为 Java 中的对象。我最喜欢的是[google-gson](https://sites.google.com/site/gson/gson-user-guide)

下面是你如何使用 google json

```
import com.google.gson.Gson;
public class GsonTutorial {

    public static void main(String[] args) {

String jsonMsg ="{\"fieldName\":\"name\",\"operator\":\"iContains\",\"value\":\"a string\"}";

        Gson gson = new Gson();
        Data data = (Data) gson.fromJson(jsonMsg, Data.class);

        System.out.println(data);
    }

    class Data{
        private String fieldName;
        private String operator;
        private String value;
        public String getFieldName() {
            return fieldName;
        }
        public void setFieldName(String fieldName) {
            this.fieldName = fieldName;
        }
        public String getOperator() {
            return operator;
        }
        public void setOperator(String operator) {
            this.operator = operator;
        }
        public String getValue() {
            return value;
        }
        public void setValue(String value) {
            this.value = value;
        }
        public String toString() {
            return "Data [fieldName=" + fieldName + ", operator=" + operator
                    + ", value=" + value + "]";
        }

    }

} 
```

# algorithm - 寻找有关快速排序算法复杂性的说明

> ID：15083490
> 
> 赞同：0
> 
> 时间：2013-02-26T07:19:41.570
> 
> 标签：algorithm, sorting, quicksort

有人可以解释为什么快速排序的最佳运行时间不是线性的吗？有没有办法使快速排序的最佳运行时间成为线性的？如果是这样，为什么它们通常不在实践中使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:23:28.293

您至少应该浏览过 wiki 链接......他们用图表和动画进行了解释，这很容易理解。

[http://en.wikipedia.org/wiki/Quicksort](http://en.wikipedia.org/wiki/Quicksort)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:02:11.760

快速排序是一种直接比较排序方法。每个这样的方法在每个步骤上都使用二元决策（即直接比较）以在排序的两个可能结果之间进行分支。N 个元素的数组所有可能的排序都是 N! 因此，能够输出这些结果中的每一个的二叉决策树的最低高度是 log(N!)，它可以被证明，尽管不是很容易证明 O(log(N!)) = O(N*日志（N））。因此，没有任何直接比较排序算法的复杂度可能比这更好。

因此，由于快速排序是此类算法的一个示例，它的复杂度永远不会低于 O(N*log(N))，因此它不能是线性的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:30:32.823

快速排序在 O(n ² ) 时间最坏情况下运行，但最佳/平均 O(n log n)。尽管它的最坏情况更高，但在实践中它通常优于堆排序和归并排序（最坏情况 O(n log n) 排序）。

除非它们已经排序，否则排序只能在线性时间内运行，这仅适用于具有最佳情况 O(n) 的排序，例如[插入排序](http://en.wikipedia.org/wiki/Insertion_sort)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T07:32:43.533

当然你可以先检查输入是否已经排序，如果是则立即返回。这产生了具有线性最佳情况复杂度的算法。但是你最终会得到一个“修改过的快速排序”而不是“快速排序”。

# iphone - 带有对象 ios 的 Nsarray

> ID：15083500
> 
> 赞同：-4
> 
> 时间：2013-02-26T07:20:15.413
> 
> 标签：iphone, ios, ios5, nsarray

我必须创建像这样的数组：

```
photos:[
      {
         "name":"20130201064350_01.jpg",
         "quantity":"2"
      },
      {
         "name":"20130201064350_02.jpg",
         "quantity":"1"
      }
   ] 
```

在这里，我有`name`数组和`Quantity`数组。

如何创建这种类型的数组或字典？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:29:47.640

使用新语法，这很简单：

```
NSArray *photos = @[
      @{
         @"name":@"20130201064350_01.jpg",
         @"quantity":@"2"
      },
      @{
         @"name":@"20130201064350_02.jpg",
         @"quantity":@"1"
      }
   ]; 
```

（即几乎只是`@`在您的问题中放在结构前面）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:32:14.203

```
NSArray *array = @[ @{ "name":"20130201064350_01.jpg", "quantity":"2" }, @{"name":"20130201064350_02.jpg", "quantity":"1"} ];
//These are new literals 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:33:15.643

它是一个数组`NSMutableDictionary`

```
NSMutableDictionary *dic1 = [[NSMutableDictionary alloc] init];
[dic1 setValue:@"20130201064350_01.jpg" forKey:@"name"];
[dic1 setValue:@"2" forKey:@"quantity"];

NSMutableDictionary *dicn = [[NSMutableDictionary alloc] init];
[dicn setValue:@"n.jpg" forKey:@"name"];
[dicn setValue:@"n" forKey:@"quantity"]; 
```

// 和 NSArray

```
NSArray *myArray = [NSArray arrayWithObject:dic1, dic2, ........dicn, nil]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T07:39:19.400

如果`Quantity`和`name`数组的计数相等。使用一个数组中的任何一个运行 for 循环并将其`NSDictionary`添加并将该字典添加到`NSMutableArray`.

前任：

```
 quantityArray = [NSArray arrayWithObjects:quantity1, quantity2, quantity3, ..., nil];

 namesArray = [NSArray arrayWithObjects:name1, name2, name3, ..., nil];

 NSMutableArray *mainArray = [[NSMUtableArray alloc] init];

 for (int i = 0; i < [namesArray count]; i++) {

 NSDictionary* dicitonary = [NSDictionary dictionaryWithObjectAndKeys:[namesArray objectAtIndex:i], [quantityArray objectAtIndex:i], nil];
   [mainArray addObject:dicitonary];
 }

 NSLog(@"mainArray = %@", mainArray); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-26T07:22:51.067

查看 ：

[NSArray](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html) ,

[NS词典](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html)

例如 ：

```
NSDictionary * d1 = [NSDictionary dictionaryWithObjectAndKeys:@"20130201064350_01.jpg", @"name", [NSNumber numberWithInt:2], @"quantity", nil];

NSArray * a = [NSArray arrayWithObjects:d1, d2, d3, ..., nil]; 
```

# javascript - Javascript 可排序架构设计方法

> ID：15083503
> 
> 赞同：2
> 
> 时间：2013-02-26T07:20:31.913
> 
> 标签：javascript, jquery, jquery-ui-sortable

我正在使用 jquery 可排序连接列表，并且我计划尝试构建一个具有 3 列的小型基本敏捷工具：积压、工作、完成。在互联网上（特别感谢 stackoverflow），我可以找到足够的信息来设计基本的东西，比如可排序的列、位置，或者通过 ajax 调用或使用本地存储将元素状态保存到后端，这样下次用户可以从他离开的地方继续。

我现在的主要问题是如何处理每个可排序/li 的内容。如何构建和设计基本信息，例如 lis 中包含的照片、文本或图标。我对stackoverflow的问题是关于架构方法的。我应该如何构建内容以便我可以将其保存到后端，我可以编辑它等等。真正的网络应用程序的方法是怎样的。

我正在弄清楚这样的事情（为了简化目的，我发布了一个非常基本的结构），但我不知道我是否做得正确。

```
<div id="sortable-1">

    <ul class="sortable-list" id="list-1"></ul>

        <li class="sortable-item' id="1">
           <h2 class="title">Event</h2>
           <p class="date">Friday, August 18, 2009</p>
           <p><img src="img/sample.jpg" width="240" height="80" alt=""/></p>
           <p class="content">Aliquam augue neque, rhoncus et dictum in,mauris.</p>
        </li>

        <li></li>
            ........
</div> 
```

非常感谢你和问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:14:22.577

我做这些事情的次数越多，我倾向于从一个 JS 对象开始，然后从那里构建文档。这允许您将每个项目与其 DOM 位置相关联，从而简化就地编辑。我不介意知道这种方法有什么问题。

您可以在（重新）写入文档之前对关联的 objs 数组进行排序。

使用 jquery：

```
<div id="sortable-1">
    <ul class="sortable-list" id="list-1"></ul>
</div>
<script>
$(function() {
    var objs = [
        {
            id:1,
            title:'Event1',
            date:'Friday, August 18, 2009',
            imgSrc:'img/sample.jpg', 
            content:'Aliquam augue'
        },{
            id:2,
            title:'Event2',
            date:'Friday, August 28, 2009',
            imgSrc:'img/sample.jpg', 
            content:'Aliquam augue 2'
        }
    ];

    var l1$ = $('#list-1');

    // loop objs data, create elements/append to dom
    $.each(objs, function(i, obj) {
        if (!obj) return true;

        var li$ = $('<li class="sortable-item"/>').attr('id', obj.id).appendTo(l1$);

        // place element in objs to keep track of its place in dom
        obj.li$ = li$;

        $('<h2 class="title"></h2>').text(obj.title).appendTo(li$);
        $('<p class="date"/>').text(obj.title).appendTo(li$);
        $('<img width="240" height="80"/>').attr('src', obj.imgSrc).appendTo($('<p/>').appendTo(li$));
        $('<p class="content"/>').text(obj.content).appendTo(li$);
    });
});
</script> 
```

# c# - C#类型转换？

> ID：15083509
> 
> 赞同：2
> 
> 时间：2013-02-26T07:20:53.430
> 
> 标签：c#

```
public static Series MeterReadingsToPieChart(IEnumerable<Dictionary<string, double>> readings)
{
    object[] points = ? // I dont know how can I create this array from readings.

    Series series = new Series
    {
        Type = ChartTypes.Pie,
        Name = "",
        Data = new Data(points)
    };

    return series;
} 
```

我想从上面的代码动态创建以下

```
Series series = new Series
{
    Type = ChartTypes.Pie,
    Name = "",
    Data = new Data(new object[]
           {
               new object[] { "Gaziemir", 45.0 },
               new object[] { "Bornova", 26.8 },
               new object[] { "Forum Bornova", 8.5 }
           })
}; 
```

你能给出一个起点吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T07:25:05.213

为了匹配底部的代码，那就是：

```
object[][] points = readings.Select(
      pair => new object[] { pair.Key, pair.Value }).ToArray();

Series series = new Series
{
    Type = ChartTypes.Pie,
    Name = "",
    Data = new Data(points))
}; 
```

但是，就我个人而言，我会说这`object[][]`不是最好的选择......

# jquery - 如何在模态窗口中执行 jquery？

> ID：15083511
> 
> 赞同：1
> 
> 时间：2013-02-26T07:21:06.780
> 
> 标签：jquery, modal-dialog

**当文本字段**的状态集中时，我需要触发一些操作。

如果文本字段是标准内联元素，则此代码可以正常工作（经过测试）。**但如果文本字段位于模态窗口**内，则它不起作用。我猜想在加载 jquery 库时模态窗口是隐藏的，然后是问题。

我怎样才能得到这个工作？

```
 $('#name').focus(function() {
console.log('do something');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:23:18.580

> 我猜想在加载 jQuery 库时模态窗口是隐藏的，然后是问题。

你猜对了，可能你在某个事件之后加载了模态对话框的内容。

现在代码：

```
$('#name').focus(function() {
console.log('do something');
}); 
```

可能附加到 $(document).ready() 事件，该事件在每次加载新文档时触发，但在 ajax 调用完成时不会触发

为了克服这个问题，您需要为将运行所需功能的对话框的加载事件附加一个委托。根据您的 jQuery 版本查看 API 或 LIVE [http://api.jquery.com/on/](http://api.jquery.com/on/)

如果你愿意，你可以为每个点击事件使用一个通用委托，并尝试在每次点击后附加你的焦点事件，如下所示：

```
$(document).on("click", "#name", function() {
    $(this).focus(function() {
        console.log('do something');
    });
}); 
```

这将尝试在每次单击后将焦点功能附加到#name 元素，即如果#name 元素存在。

# android - 在画布android上剪裁自定义形状

> ID：15083512
> 
> 赞同：1
> 
> 时间：2013-02-26T07:21:07.000
> 
> 标签：android, bitmap, android-canvas

我正在尝试在我的 android 应用程序中提供填充颜色功能。我想允许以自定义形状填充颜色，如下图所示：

![在此处输入图像描述](../Images/20d5b856d761d6824c7f0ed505d7a909.png)

在这里，应该在字母A覆盖的区域进行绘画，并且不允许在图像边界之外绘画。这里我正在使用 Canvas 来实现此功能。如果我使用`clipPath()`画布的方法，那么我可以有效地做到这一点，但我想提供所有字母的此功能，然后如何实现此功能。

请解决我的问题以实现此功能。

# android - 具有相同 ID/标签的多个 TextView

> ID：15083513
> 
> 赞同：2
> 
> 时间：2013-02-26T07:21:07.967
> 
> 标签：android, android-layout, textview, android-viewpager, findviewbyid

我有一个`ViewPager`幻灯片可以通过多张全屏照片。每张照片都有一个标题，该标题`ImageView`与`TextView`. 我正在尝试`TextView`根据点击操作隐藏/显示照片上的标题。

*问题*：目前我正在使用在每个页面中`findViewById()`查找，因为有多个共享相同布局的照片/标题，它只返回第一个ID，因此隐藏/显示功能仅适用于第一张照片标题但不适用于其余的部分。`TextView``ViewPager``TextView`

*问题*：如何使它适用于所有人`TextView`？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T11:25:58.833

如果您将 a 添加`PageListener`到您的`ViewPager`中，您可以获得当前视图被选中。这将使您能够`TextView`在当前页面中获取。

检查[这个](https://stackoverflow.com/questions/8117523/how-can-i-get-page-number-in-view-pager-for-android)问题和接受的答案，看看如何实现`PageListener`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T04:46:47.017

我做到了！就是这样：

1.  每个`ViewPager`片段中都有一个片段，通常包含一个 ImageView，它是它的主要视图组件。
2.  由于我已经`ImageView OnClickListener`在每个片段中跟踪并传递回 Activity，因此我在 Activity 中有一个`OnClick(View v)`方法。
3.  在 中`OnClick(View v)`，我获取了当前 ImageView 的父视图，`(View) getParent()`用于获取 ViewPager 父容器（当前页面的）。
4.  获得父视图后，您可以使用找到它的子 TextView id`(TextView) parent.findViewById()`

奖金：代码：

```
 public void onClick(View v) {
            // since each pager includes an ImageView and a TextView
            // get the current pager which is the parent of the current ImageView
            View currentPage = (View) v.getParent();
            // find the TextView within the current page
            mCaption = (TextView) currentPage.findViewById(R.id.caption);
    ... 
```

完毕！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-22T14:31:54.267

您可以通过这种方式为您的视图设置标签：

```
textView.setContentDescription("MyTag"); 
```

然后为了找到所有带有该标签的视图，您需要调用：

```
ArrayList<View> outputViews = new ArrayList<>();
mViewPager.findViewsWithText(outputViews, "MyTag", FIND_VIEWS_WITH_CONTENT_DESCRIPTION); 
```

# knockout.js - 如何在 Durandal 中使用 observables？

> ID：15083516
> 
> 赞同：5
> 
> 时间：2013-02-26T07:21:28.043
> 
> 标签：knockout.js, durandal

我对杜兰达尔还很陌生。我对 KnockoutJS 有一点经验。我正在尝试从从 php 文件中检索到的 json 填充 observableArray。然后我试图将数组加载到表中。首次加载页面时将数据加载到表中时似乎存在问题。我执行 system.log(customers) 只是为了确保数据在 observableArray 中，它就是。当我刷新页面时，数据会按照我想要的方式加载到表中。看起来好像 observableArray 正在填充，但视图没有更新。

我想知道我做错了什么，因为它没有在页面的第一次加载时加载。这是我一直在玩 durandal 的测试站点：http: [//dev.codeplanetapps.com/spa/](http://dev.codeplanetapps.com/spa/)。加载后，单击“客户”。有问题的页面是[http://dev.codeplanetapps.com/spa/#/customers](http://dev.codeplanetapps.com/spa/#/customers)。直接加载该页面时，它可以正常工作，但是当我从主页加载应用程序然后切换到客户时，它无法正确加载表格。提前感谢您的帮助。

这是视图：

```
<div>
<!-- Form to add new customer -->
<form class="form-inline customerForm">
    <span>Add New Customer</span>
    <input type="text" data-bind="value: inputName" placeholder="Name" />
    <input type="text" class="date input-small" data-bind="value: inputDOB" placeholder="Date of Birth" />
    <input type="text" class="input-small" data-bind="value: inputPhone" placeholder="Phone" />
    <input type="text" data-bind="value: inputEmail" placeholder="Email" />
    <button type="submit" class="btn btn-primary" data-bind="click: submitCustomer">Add</button>
</form>

<table class="table table-hover table-bordered customerTable">
    <thead>
        <tr>
            <th>Name</th>
            <th>DOB</th>
            <th>Phone Number</th>
            <th>Email</th>
            <th></th>
        </tr>
    </thead>
    <tbody data-bind="foreach: customers">
        <tr>
            <td data-bind="text: name"></td>
            <td data-bind="text: dob"></td>
            <td data-bind="text: phone"></td>
            <td data-bind="text: email"></td>
            <td><button class="btn btn-danger btn-mini" data-bind="click: $root.removeCustomer">Delete</button></td>
        </tr>
    </tbody>
</table> 
```

这是视图模型：

```
define(function(require){ 
    // Load System for debugging
    var system = require('durandal/system');

    // Customer Structure
    function Customer(data) {
        this.name  = ko.observable(data.name);
        this.dob   = ko.observable(data.dob.substring(5,7) + '/' 
            + data.dob.substring(8,10) + '/' + data.dob.substring(0,4));
        this.phone = ko.observable(data.phone);
        this.email = ko.observable(data.email);
    };

    // Form observables
    var inputName  = ko.observable('');
    var inputDOB   = ko.observable('');
    var inputPhone = ko.observable('');
    var inputEmail = ko.observable('');
    // Customers array
    var customers = ko.observableArray([]);

    return {
        inputName: inputName,
        inputDOB: inputDOB,
        inputPhone: inputPhone,
        inputEmail: inputEmail,
        customers: customers,
        // This performs any needed functionality after the page loads
        activate: function(data) {
            // Change the selected nav item 
            $('.customerNav').addClass('active');
            $('.firstNav').removeClass('active');
            $('.secondNav').removeClass('active');

            // Get current customers from database and add to customers observableArray
            $.getJSON(
                // Backend script
                'php/query.php', 
                // Variables sent to query.php
                {
                    mode: 'select', 
                    table: 'customers', 
                    'fields[]': '*', 
                    'values[]': '*'
                }, 
                // Callback function
                function(data) {
                    var customer = $.map(data, function(item) {return new Customer(item) });
                    customers(customer);
                }
            );

            // For some reason I couldn't get the datepicker to work without make the page 
            // wait 50 milliseconds.
            setTimeout(function() {
            $('.date').datepicker();
            },500);
        }
    };
}); 
```

另外，作为旁注，激活函数顶部和底部的 jQuery 仅在我将它们包围在 setTimeout() 函数中时才起作用。我以日期选择器为例。它不是那么重要，但如果有人也知道如何解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T16:13:05.750

谢谢，保罗。我昨晚很晚才起床。我忘了回复以添加答案。我从 Durandal 的创造者 Rob Eisenberg 那里得到了答案。我的错误是我需要从 .getJSON() 调用中返回承诺。我还需要将另一个函数 viewAttached() 添加到模块中，用于引用 DOM 中元素的所有 jQuery 调用。

这是 Rob 对[ObservableArray not updates in view 的 Help](https://groups.google.com/forum/#!topic/durandaljs/_x78N1KGlpc)的回复。他们在这个小组中真的很有帮助。Rob 可以很快回答大多数问题。

以下是视图模型的更正代码：

```
define(function(require){ 
// Load System for debugging
var system = require('durandal/system');

// Customer Structure
function Customer(data) {
    this.name  = ko.observable(data.name);
    this.dob   = ko.observable(data.dob.substring(5,7) + '/' 
        + data.dob.substring(8,10) + '/' + data.dob.substring(0,4));
    this.phone = ko.observable(data.phone);
    this.email = ko.observable(data.email);
};

// Form observables
var inputName  = ko.observable('');
var inputDOB   = ko.observable('');
var inputPhone = ko.observable('');
var inputEmail = ko.observable('');
// Customers array
var customers = ko.observableArray([]);

return {
    inputName: inputName,
    inputDOB: inputDOB,
    inputPhone: inputPhone,
    inputEmail: inputEmail,
    customers: customers,
    // This allows us to add jQuery as usual
    viewAttached: function() {
        // Change the selected nav item 
        $('.customerNav').addClass('active');
        $('.firstNav').removeClass('active');
        $('.secondNav').removeClass('active');

        $('.date').datepicker();
    },
    // This performs any needed functionality after the page loads
    activate: function(data) {
        // Capture the module instance
        var self = this;

        // Get current customers from database and add to customers observableArray
        var promise = $.getJSON(
            // Backend script
            'php/query.php', 
            // Variables sent to query.php
            {
                mode: 'select', 
                table: 'customers', 
                'fields[]': '*', 
                'values[]': '*'
            }, 
            // Callback function
            function(data) {
                var customer = $.map(data, function(item) {return new Customer(item) });
                system.log(customers);
                self.customers(customer);
            }
        );

        return promise;
    }
};
}); // define 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:17:07.127

我不知道自发布问题以来您是否更改了任何内容，但它适用于 IE 9、Opera 12 和 Chrome。IE 9 中抛出一个错误，of`lines 45 and 46`有时为 null，因此您应该检查一下，但是如果我转到您的应用并单击客户，则表中有数据。`shell.js``event.currentTarget.classList`

# c# - 显式实现接口的抽象类方式

> ID：15083518
> 
> 赞同：1
> 
> 时间：2013-02-26T07:21:28.773
> 
> 标签：c#, interface, abstract-class

今天我正在阅读显式实现接口。我开始知道它的用途之一是限制客户端通过类的对象访问接口方法。

有什么方法可以使用抽象类创建相同的功能？比如，通过派生类的对象限制对方法的访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:32:50.063

您可以将方法声明为`protected`- 然后它仅适用于该类和子类（它不在`public`API 上）。但是，如果你愿意，你不能`override`让它`public`在派生类中 - 你需要`new`它：

```
abstract class Foo {
    protected void Bar() {...}
}
class SuperFoo : Foo {
    new public void Bar() { base.Bar(); } // <==== ugly
} 
```

# java - java-变量声明序列中的枚举导致编译时错误

> ID：15083519
> 
> 赞同：1
> 
> 时间：2013-02-26T07:21:28.977
> 
> 标签：java, enums

我创建了这样的枚举：

```
public enum Planet {
    MERCURY(3.303e+23, 2.4397e6), VENUS(4.869e+24, 6.0518e6), EARTH(5.976e+24,
            6.37814e6), MARS(6.421e+23, 3.3972e6), JUPITER(1.9e+27, 7.1492e7), SATURN(
            5.688e+26, 6.0268e7), URANUS(8.686e+25, 2.5559e7), NEPTUNE(
            1.024e+26, 2.4746e7);

    private final double mass; // in kilograms
    private final double radius; // in meters

    Planet(double mass, double radius) {
        this.mass = mass;
        this.radius = radius;
    } 
```

但是如果我将变量声明作为枚举中的第一条语句，编译器不会像这样接受它

```
public enum Planet {

  private final double mass; // in kilograms
    private final double radius; // in meters
    MERCURY(3.303e+23, 2.4397e6), VENUS(4.869e+24, 6.0518e6), EARTH(5.976e+24,
            6.37814e6), MARS(6.421e+23, 3.3972e6), JUPITER(1.9e+27, 7.1492e7), SATURN(
            5.688e+26, 6.0268e7), URANUS(8.686e+25, 2.5559e7), NEPTUNE(
            1.024e+26, 2.4746e7);

    Planet(double mass, double radius) {
        this.mass = mass;
        this.radius = radius;
    } 
```

知道为什么吗？理解这可能是枚举规范所说的，但我试图从编译器的角度理解变量声明的顺序如何影响编译器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:23:13.643

这就是枚举的java语法是如何定义的——枚举值是你应该写下的第一件事，然后才是实例字段方法等。

[从JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9)的相关部分看：

```
EnumDeclaration:
    ClassModifiersopt enum Identifier Interfacesopt EnumBody

EnumBody:
    { EnumConstantsopt ,opt EnumBodyDeclarationsopt }

EnumConstants:
    EnumConstant
    EnumConstants , EnumConstant 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T07:23:06.583

创建 Enum 时，枚举值应始终是第一个被声明的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:36:36.507

> 理解这可能是枚举规范所说的，但我试图从编译器的角度理解变量声明的顺序如何干扰编译器？

没有答案可以完全忽略规范。基本上，该规范没有提供编译器应将哪些语句解释为枚举值的标志。语言规范只允许使用第一条语句作为指示符。

# spring-mvc - Spring MVC 和 JSF MVC

> ID：15083523
> 
> 赞同：-2
> 
> 时间：2013-02-26T07:21:47.220
> 
> 标签：spring-mvc, jsf-2

在我的 Web 应用程序中，我在所有屏幕上都使用 JSF，但现在由于某些原因，我需要在某些屏幕上使用 Spring MVC，而在其他屏幕上使用 JSF。我不确定，如何将 2 MVC 集成到单个 Web 应用程序中。我用谷歌搜索但没有得到任何好的发现。你能对此发表评论吗？或者你能给我发一些很好的教程吗？

谢谢 TM

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:25:13.457

> **出于某种原因，它非常危险**，为什么要将这两个框架混合在一个 Web 应用程序中？

JSF 和 Spring MVC 有专门的 servlet（前端控制器）来完成繁重的工作。您必须为 Spring MVC 注册它，它应该可以工作。

希望在计划时您不会尝试在两者之间混合页面流，例如在 Spring MVC 中显示数据并提交给 JSF，反之亦然。如果页面流是独立的，则必须遵循注册 spring servlet 的简单步骤。

但这听起来肯定不好，您能否详细说明“出于某种原因”。

您也可以看到这个链接，[在 JSF 旁边运行 spring MVC](https://stackoverflow.com/questions/4441756/running-spring-mvc-along-side-of-jsf?rq=1)

# java - 更新后两个线程看到相同的值

> ID：15083524
> 
> 赞同：0
> 
> 时间：2013-02-26T07:21:48.150
> 
> 标签：java, multithreading, synchronization

我有以下代码，两个线程检查堆栈中是否有元素，如果有，则将其弹出。由于某种原因，两个线程之一总是得到一个 java.util.EmptyStackException ，这意味着它弹出一个空堆栈。我的问题是不应该让这种方法同步来防止这种情况发生吗？是否可以仅使用同步方法来防止我的错误，或者我必须实现某种连接/倒计时/循环障碍/等？我问的原因是因为理想情况下我希望只有一个线程能够在任何给定时间访问堆栈板。

```
public synchronized void checkPlate(){
        //System.out.println(this.name + " checks the plate for pancake");
        Boolean isEmpty = Producer.plate.isEmpty();
        if ( isEmpty == false){
            System.out.println(this.name + " grabs a pancake");
            Producer.plate.pop();
            eat();
            this.eatenPancakes +=1;
        }else{

            try {
                Thread.sleep(200);// waits one minute seconds instead of minutes
                checkPlate();
            } catch(InterruptedException ex) {
                Thread.currentThread().interrupt();
            }
        }
    } 
```

**更新**
建议后，我决定尝试使用此代码在生产者板上实现同步块。这样做后，看起来我所有的线程都冻结了。这个同步块是否也需要添加到我的生产者对象/线程中？

```
 public void checkPlate(){
        //System.out.println(this.name + " checks the plate for pancake");
        synchronized (Producer.plate){
            Boolean isEmpty = Producer.plate.isEmpty();
            if ( isEmpty == false){
                System.out.println(this.name + " grabs a pancake");
                Producer.plate.pop();
                eat();
                this.eatenPancakes +=1;
            }else{

                try {
                    Thread.sleep(200);// waits since theres no pancake
                    checkPlate();
                } catch(InterruptedException ex) {
                    Thread.currentThread().interrupt();
                }
            }
        }
    } 
```

**更新 2**
目标以提供更多信息。在每个线程抓取一个煎饼后，它会使用以下方法随机吃/睡一段时间。理想情况下，整个程序的目标是模拟生产者不断烹饪煎饼的位置，并将其添加到堆栈中。两个线程之一检查堆栈并在堆栈中有元素时抓取煎饼。这将一直发生，直到生产者线程完成煎饼。

```
public void eat(){
        Random ran = new Random();
        double eatingTime;
        if (this.name == "Piggy"){
            eatingTime = ran.nextDouble() * (4 - 2) + 2; //generates a value between 2 and 4
        }else{
            eatingTime = ran.nextDouble() * (5 - 3) + 3; //generates a
        }
        try {
            System.out.println(this.name + " starts eating a pancake...");
            Thread.sleep((long)eatingTime *100);//mili seconds instead of minutes
            Boolean isEmpty = Producer.plate.isEmpty();
            if (Producer.finished == false && isEmpty == false){
                checkPlate();
            }
        } catch(InterruptedException ex) {
            Thread.currentThread().interrupt();
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T07:26:12.297

> 我的问题是不应该让这种方法同步来防止这种情况发生吗？

基本上，你没有给我们足够的信息。但是如果有两个包含这个方法的类的*实例*，那么绝对不会。它们将有不同的监视器，因此可以同时在同步方法中。

*看起来*您正在使用静态变量 ( `Producer.plate`) 作为共享队列 - 在这种情况下，实例级同步基本上不会对您有所帮助，因为*可能*有多个实例`checkPlate`被调用。

无论如何，同步可能是不必要的。从根本上说，您应该使用其中的一个集合[`java.util.concurrent`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)——这些集合是为并发访问而*设计*的，非常适合生产者/消费者队列。

此外，当盘子是空的时，您当前的代码当前会越来越深地递归 - 这不是一个好主意。如果您希望它继续执行直到它消耗了一个项目，您应该使用`while`循环而不是递归。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T07:27:01.150

不幸的是，您没有显示调用部分。最重要的是，我们必须看看这个方法是在同一个对象上调用还是在不同对象上调用。

如果它从共享同一资源（生产者）的 2 个不同对象调用该方法，那么您就有问题了。

看起来这就是正在发生的事情。

我也认为你还有另一个问题。如果你的栈足够大，你的递归会导致栈溢出异常。

* * *

澄清后更新

从本质上讲，同步方法与将监视器作为对象本身的同步块相同：

```
synchronized(this) {
    // code
} 
```

由于您有 2 个单独的对象，因此它们的“this”不是同一个对象，它们实际上并没有锁定您的资源。

锁定资源的简单经典准则是访问必须由共享资源同步。由于您共享 Producer.plate，您可以执行以下操作：

```
synchronized(Producer.plate) {
    // code
} 
```

其他对象也可以用作监视器，但开发人员有责任确保它们得到适当的管理，以确保对 Product.plate 的同步访问。

* * *

更新以提供重做方法，该方法检查生产者是否完成烹饪而没有递归。

```
public void checkPlate(){
    while(!Producer.finished)
    //System.out.println(this.name + " checks the plate for pancake");
    synchronized (Producer.plate){
        Boolean isEmpty = Producer.plate.isEmpty();
        if ( isEmpty == false){
        System.out.println(this.name + " grabs a pancake");
        Producer.plate.pop();
        eat();
        this.eatenPancakes +=1;
        }
    }
    try {
        Thread.sleep(200);// waits since theres no pancake
    } catch(InterruptedException ex) {
        Thread.currentThread().interrupt();
    }
}
} 
```

# extjs - 在 extjs 中如何将存储数据绑定到网格

> ID：15083526
> 
> 赞同：5
> 
> 时间：2013-02-26T07:21:50.820
> 
> 标签：extjs, grid, store

我在 extjs 工作。我正在创建显示网格的视图。我已将视图创建为-

```
Ext.define('Balaee.view.qb.qbqns.allQuestionPapers' ,
        {
    extend: 'Ext.grid.Panel',
    alias: 'widget.paperlist',
    id:'paperId',
    store:'QbqnsStore',
    border:false,
    height:300,
    width:450,
    columns: [
              {
                  text: 'date',
                  width: 150,
                  dataIndex: 'creationTime'
              },
              {
                  text: 'QuestionpaperNo',
                  width: 150,
                  dataIndex: 'questionPaperNo',
              },
              {
                  text: 'Marks',
                  width:150,
                  dataIndex: 'obtainMarks'
              }
              ]
        }); 
```

我在 getAllPapers 按钮单击时调用此视图。所以我把代码写成了——

```
getAllPapers:function()
    {   
        var getPaperStore=Ext.create('Balaee.store.qb.QbqnsStore');
        proxy=reviewQuestionStore.getProxy();
        Ext.apply(proxy.api,{
            read:'index.php/QuestionBank/qbpaper/getUserAllQuestionPaper',
        });

        var temp2=Ext.getCmp('QbqnsResultmainId');
        temp2.removeAll();
        var papers=Ext.create('Balaee.view.qb.qbqns.allQuestionPapers');
        temp2.add(papers);

    } 
```

在上面的函数中，我调用所需的 URl 来获取 json as-

```
{" Papers ":[{"questionPaperId":"29","questionPaperNo":"11","userId":"106","allocatedTime":null,"completedTime":"0000-00-00 00:00:00","createDate":"0000-00-00 00:00:00","obtainMarks":null},{"questionPaperId":"30","questionPaperNo":"11","userId":"106","allocatedTime":null,"completedTime":"0000-00-00 00:00:00","createDate":"0000-00-00 00:00:00","obtainMarks":null},{"questionPaperId":"31","questionPaperNo":"11","userId":"106","allocatedTime":null,"completedTime":"0000-00-00 00:00:00","createDate":"0000-00-00 00:00:00","obtainMarks":null}] } 
```

所以现在商店有这个上面的 json 数据，我想在网格中提供它。但网格不显示任何数据。那么如何将存储数据绑定到网格？我需要做哪些改变？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T07:24:48.563

我们需要在初始化时将商店绑定到网格。我的情况如下：

```
Ext.define('App.view.activity.ListPanel', {

    extend: 'Ext.panel.Panel',
    alias: 'widget.listPanel',

    requires: [
        'Ext.data.ArrayStore'
    ],

    initComponent: function(){

        var activityStore = Ext.create('App.store.Activity');
        activityStore.load(); // this line to load is used when we use proxy in store, if we go with out proxy it is not necessary

        Ext.apply(this, {            
                items: [{
                    xtype: 'grid',                  
                    hideHeaders: true,
                    scroll: false,
                    width: 200,
                    height: 700,
                    store: activityStore,
                    stripeRows:true,
                    columnLines:true,
                    columns:[
                        {text:"Activity Name",flex:1,dataIndex:"activityName"}
                        ]                   
                }]    
        }); 

        this.callParent(arguments);
    }
}); 
```

其中**App.store.Activity**定义为（**无代理**）：

```
Ext.define('App.store.Activity', {
    extend: 'Ext.data.Store',
    id: 'activityStore',
    model: 'App.model.Activity',
    autoLoad: true,
    data : [
            {activityName: 'Bath',    createdBy: 'Spencer', scheduleTime: '7.00'},
            {activityName: 'Breakfast', createdBy: 'Maintz', scheduleTime: '8.00'},
            {activityName: 'Wakeup', createdBy: 'Conran', scheduleTime: '5.00'}
        ]
});` 
```

**使用代理：**

```
Ext.define('App.store.Activity', {
    extend: 'Ext.data.Store',
    id: 'transactionSummaryStore',
    model: 'App.model.Activity',
    proxy: {
        type: 'ajax',
        url: 'getActivities.htm',
        reader: {
            type: 'json',
            root: 'results'
        } 
    } 
}); 
```

其中模型定义为：

```
Ext.define('App.model.Activity', {
    extend: 'Ext.data.Model',
    fields : [ {
        name : 'activityName'
    }, {
        name : 'createdBy'
    }, {
        name : 'scheduleTime'
    } ]
}); 
```

# android - 存储在 sqlite 表中的日期为 date('15:20:16',strftime('%H:%M:%S'))。是否正确？

> ID：15083528
> 
> 赞同：0
> 
> 时间：2013-02-26T07:22:10.350
> 
> 标签：android, sqlite, android-sqlite

```
receivedDate="25022013";
receivedTime="150526";

receivedTime=receivedTime.trim();
String HH = receivedTime.substring(0, 2);
String MM = receivedTime.substring(2, 4);
String SS = receivedTime.substring(4, 6);

receivedTime="date('"+HH+":"+MM+":"+SS+"',strftime('%H:%M:%S'))";

receivedDate=receivedDate.trim();
String dd = receivedDate.substring(0, 2);
String mm = receivedDate.substring(2, 4);
String yyyy = "20"+receivedDate.substring(4,6);

receivedDate="date('"+yyyy+"-"+mm+"-"+dd+"',strftime('%Y-%m-%d'))";

ContentValues values=new ContentValues();
values.put(DBConstants.TIME,receivedTime);
values.put(DBConstants.DATE, receivedDate);

masterDataDB.insert(DBConstants.MASTER_DATA_TABLE, null, values); 
```

此日期和时间插入到 TEXT 类型字段中。当我在 Sqlite 浏览器上看到存储数据时，它存储如下，

在时间字段-> **date('15:20:16',strftime('%H:%M:%S'))**

在日期字段-> **date('2013-02-14',strftime('%Y-%m-%d'))**

是否正确存储？如果我使用日期函数选择日期和时间，它会正确返回日期吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:32:56.457

您正在构建的 SQL 函数不会执行，而是存储为字符串。您可以将日期存储为格式化字符串或 long（自 unix 纪元以来的时间）。

换句话说，不要存储字符串`date('15:20:16',strftime('%H:%M:%S'))`，而只是存储`15:20:16`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:27:00.823

您应该将其作为长值存储在数据库中，然后使用适当的类在代码中对其进行操作（日历、日期、日期格式）

# wpf - 绑定到文本框中的文本 调整列的大小

> ID：15083529
> 
> 赞同：0
> 
> 时间：2013-02-26T07:22:10.620
> 
> 标签：wpf, mvvm, textbox, bind

我将 绑定`text box`到包含位于 中的数字（正数和负数）的变量`ViewModel`。

当变量更改时， 中的列的大小`text box`也会更改（未定义列的大小）

我怎么知道该列在文本框中的文本**之后没有改变**（完全不清楚为什么会发生这种情况，如果有人知道我很想得到答案）

一些代码：

xml:

```
 <Grid Grid.Row="3" Grid.RowSpan="1" Margin="0" >
        <Grid.RowDefinitions>
            <RowDefinition Height="25" />
            <RowDefinition Height="25" />
            <RowDefinition Height="25" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="25" />
            <ColumnDefinition />
            <ColumnDefinition Width="50" />
        </Grid.ColumnDefinitions>
         SOME ELEMENT
        <TextBox IsReadOnly="True" Margin="3,2,0,2" Name="xName" Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" HorizontalContentAlignment="Right" Text="{Binding VM.SomeProp}"/>//THE PROPBLEM TEXTBOX
        <TextBlock Grid.Row="2" Grid.Column="2" Margin="3,2" Name="txtblockname" Text="txt" />
    </Grid> 
```

这是我的道具

```
 private float _someProp;
    public float SomeProp
    {
        get { return _someProp; }
        set
        {
            if (_someProp!= value)
            {
                _someProp= value;
                NotifyPropertyChanged("SomeProp");
            }
        }
    } 
```

**所以，问题是当数字为负数时，它才会改变大小，为什么会发生这种情况？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:02:25.567

您已经为 Grid 列设置了宽度。这个大小将被尊重，但它的内容仍然可以改变大小。

如果你不希望你的文本框改变大小，你应该设置它的`Width`属性。

如果您确实希望它改变大小但它必须保持在一定范围内，您可以使用该 `Min- and MaxWidth`属性。

您还可以选择拉伸文本框：`HorizontalAlignment="Stretch"`这将强制它占用列中的所有空间。

# jquery - jquery 选择从 curosr 位置到第一个父 div 或 p 的所有文本数据

> ID：15083537
> 
> 赞同：0
> 
> 时间：2013-02-26T07:22:46.607
> 
> 标签：jquery, html

```
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<script>
    $(this).select(function(){
        var a = $(this).prevUntil('p').html;
        console.log(a);
    });
</script>

<html>
    <p>dfdsf
        dsfdsf
        <span>sdfdsfds</span><a >sdfdsfdsfdsf</a>sdfsdfdsfdsfds
fsd
f
ds
f
ds
fd</p>
</html> 
```

我需要从光标选择位置到第一个父级`div`或`p`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T00:18:54.020

尝试这样的事情：

```
$('p').mouseup(function(){
    if(window.getSelection().toString()!='')
        console.log(window.getSelection().toString());
}); 
```

演示：http: [//jsfiddle.net/7Xbam/](http://jsfiddle.net/7Xbam/)

# file - .empty 文件有什么用？

> ID：15083542
> 
> 赞同：4
> 
> 时间：2013-02-26T07:22:58.977
> 
> 标签：file, directory

我最近遇到了一种情况，应用程序使用的“空”文件夹包含一个`.empty`文件。例如，一个应用程序有一个日志文件夹，当还没有日志时，这个文件夹包含一个`.empty`文件。即使已经存在日志文件，也不会删除此文件。

我打开了文件，它是空的，所以我假设它不包含任何有用的信息，除了文件本身存在。

这个空文件的目的是什么？

PS我唯一的猜测是这个文件是应用程序第一次运行时创建的，用来检查它是否有足够的权限。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-16T09:37:07.593

当文件夹最初为空时，开发人员会将“.empty”文件添加到文件夹中。这样可以保证该文件夹包含在 git / svn 等中。通常它们会排除空文件夹。

# c - 基于基本数组，无法访问数组元素？

> ID：15083544
> 
> 赞同：0
> 
> 时间：2013-02-26T07:23:03.623
> 
> 标签：c, pointers

嗨朋友们，我是 C 的新手。我正在努力学习它，但我被困在数组的某个位置。请检查以下程序

```
#include <stdio.h>
#include <stdlib.h>

int arr1[] = {10,20,30,40,50};
int arr2[] = {5,15,25,35,45};

int *main_arr[] = {arr1,arr2};

int main()
{
 printf("in first array 0th locatin value is: %d\n",*main_arr[0]);
 system("PAUSE");   
 return 0;
} 
```

通过使用 printf 我可以在第 0 个位置打印值，但不知道如何访问元素的其余部分......请帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:24:53.347

你要

```
...: %d\n",(main_arr[0])[0]);
           -------------      ->arr1
                        ---   ->arr1[0] 
```

`main_arr`指向两个数组`arr1`, `arr2`。所以`main_arr[0]`指向第一个数组的第一个元素。要访问其他元素，请修改 2nd `[0]`。

[一探究竟](http://liveworkspace.org/code/c4pXv%241)

另一种更丑但更接近您当前代码的替代方法是使用指针算法。

```
...s: %d\n",*(main_arr[0]+1)); 
```

请记住，`arr[1]`与 相同`*(arr+1)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:00:26.103

```
#include <stdio.h>
#include <stdlib.h>

int arr1[] = {10,20,30,40,50};
int arr2[] = {5,15,25,35,45};

int *main_arr[] = {arr1,arr2};

int main()
{
 int iter1, iter2;
 for(iter1 = 0; iter1 < 2; iter1++){
    for(iter2 = 0; iter2 < 5; iter2++){
        printf("in first array nth locatin value is: %d\n",(main_arr[iter1][iter2]));
    }
 }
 system("PAUSE");   
 return 0;
} 
```

我想代码很简单，可以理解吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:43:10.310

main_arr中只有两个指针，分别指向arr1和arr2的地址。

```
main_arr| ptr to an array | -> arr1
        | ptr to an array | -> arr2 
```

所以你可以`main_arr[0][1]`用来访问 的第二个元素`arr1`，因为`main_arr[0]`指向 arr1 的第一个元素的地址。

你应该知道，在 C 中，如果 p 是一个指针，那么`p[3]`和`3[p]`都将计算为`*(p + 3 * sizeof(type))`，所以我们假设`p = main_arr[0]`， 那么`p[1]`，也就是`main_arr[0][1]`，将计算为`*(main_arr[0] + 1 * sizeof(int))`，与 相同的值`arr1[1]`。

# javascript - 将 12 小时 hh:mm AM/PM 转换为 24 小时 hh:mm

> ID：15083548
> 
> 赞同：69
> 
> 时间：2013-02-26T07:23:12.973
> 
> 标签：javascript, jquery

有没有简单的方法可以使用 jquery 将 12 小时 hh:mm AM/PM 转换为 24 小时 hh:mm？

注意：不使用任何其他库。

我有一个`var time = $("#starttime").val()`返回 hh:mm AM/PM 的。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-02-26T07:43:40.350

试试这个

```
var time = $("#starttime").val();
var hours = Number(time.match(/^(\d+)/)[1]);
var minutes = Number(time.match(/:(\d+)/)[1]);
var AMPM = time.match(/\s(.*)$/)[1];
if(AMPM == "PM" && hours<12) hours = hours+12;
if(AMPM == "AM" && hours==12) hours = hours-12;
var sHours = hours.toString();
var sMinutes = minutes.toString();
if(hours<10) sHours = "0" + sHours;
if(minutes<10) sMinutes = "0" + sMinutes;
alert(sHours + ":" + sMinutes); 
```

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2016-10-22T22:38:55.430

这个问题需要一个更新的答案:)

```
const convertTime12to24 = (time12h) => {
  const [time, modifier] = time12h.split(' ');

  let [hours, minutes] = time.split(':');

  if (hours === '12') {
    hours = '00';
  }

  if (modifier === 'PM') {
    hours = parseInt(hours, 10) + 12;
  }

  return `${hours}:${minutes}`;
}

console.log(convertTime12to24('01:02 PM'));
console.log(convertTime12to24('05:06 PM'));
console.log(convertTime12to24('12:00 PM'));
console.log(convertTime12to24('12:00 AM'));
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-07-09T18:47:30.833

我不得不做类似的事情，但我正在生成一个`Date`对象，所以我最终制作了一个这样的函数：

```
function convertTo24Hour(time) {
    var hours = parseInt(time.substr(0, 2));
    if(time.indexOf('am') != -1 && hours == 12) {
        time = time.replace('12', '0');
    }
    if(time.indexOf('pm')  != -1 && hours < 12) {
        time = time.replace(hours, (hours + 12));
    }
    return time.replace(/(am|pm)/, '');
} 
```

我认为这读起来容易一些。您输入格式为 h:mm am/pm 的字符串。

```
 var time = convertTo24Hour($("#starttime").val().toLowerCase());
    var date = new Date($("#startday").val() + ' ' + time); 
```

例子：

```
 $("#startday").val('7/10/2013');

        $("#starttime").val('12:00am');
        new Date($("#startday").val() + ' ' + convertTo24Hour($("#starttime").val().toLowerCase()));
        Wed Jul 10 2013 00:00:00 GMT-0700 (PDT)

        $("#starttime").val('12:00pm');
        new Date($("#startday").val() + ' ' + convertTo24Hour($("#starttime").val().toLowerCase()));
        Wed Jul 10 2013 12:00:00 GMT-0700 (PDT)

        $("#starttime").val('1:00am');
        new Date($("#startday").val() + ' ' + convertTo24Hour($("#starttime").val().toLowerCase()));
        Wed Jul 10 2013 01:00:00 GMT-0700 (PDT)

        $("#starttime").val('12:12am');
        new Date($("#startday").val() + ' ' + convertTo24Hour($("#starttime").val().toLowerCase()));
        Wed Jul 10 2013 00:12:00 GMT-0700 (PDT)

        $("#starttime").val('3:12am');
        new Date($("#startday").val() + ' ' + convertTo24Hour($("#starttime").val().toLowerCase()));
        Wed Jul 10 2013 03:12:00 GMT-0700 (PDT)

        $("#starttime").val('9:12pm');
        new Date($("#startday").val() + ' ' + convertTo24Hour($("#starttime").val().toLowerCase()));
        Wed Jul 10 2013 21:12:00 GMT-0700 (PDT) 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2016-05-10T04:27:58.570

这将有助于：

```
 function getTwentyFourHourTime(amPmString) { 
        var d = new Date("1/1/2013 " + amPmString); 
        return d.getHours() + ':' + d.getMinutes(); 
    } 
```

**例子 ：**

```
getTwentyFourHourTime("8:45 PM"); // "20:45"
getTwentyFourHourTime("8:45 AM"); // "8:45" 
```

**更新：** 注意：“时间”和“上午/下午”之间应该有时间字符串的空格。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-03-19T05:57:06.207

这是我的解决方案，包括秒：

```
function convert_to_24h(time_str) {
    // Convert a string like 10:05:23 PM to 24h format, returns like [22,5,23]
    var time = time_str.match(/(\d+):(\d+):(\d+) (\w)/);
    var hours = Number(time[1]);
    var minutes = Number(time[2]);
    var seconds = Number(time[3]);
    var meridian = time[4].toLowerCase();

    if (meridian == 'p' && hours < 12) {
      hours += 12;
    }
    else if (meridian == 'a' && hours == 12) {
      hours -= 12;
    }
    return [hours, minutes, seconds];
  }; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-12-09T02:17:30.523

我必须推荐一个图书馆：[时刻](http://momentjs.com/docs/#/displaying/format/)

代码：

```
var target12 = '2016-12-08 9:32:45 PM';
console.log(moment(target12, 'YYYY-MM-DD h:m:s A').format('YYYY-MM-DD HH:mm:ss')); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-02-04T17:11:04.557

我需要这个功能来做一个项目。我尝试了 devnull69，但遇到了一些麻烦，主要是因为字符串输入对于 am/pm 部分非常具体，我需要更改我的验证。我弄乱了 Adrian P. 的 jsfiddle，最终得到了一个似乎更适合各种日期格式的版本。这是小提琴：http: [//jsfiddle.net/u91q8kmt/2/](http://jsfiddle.net/u91q8kmt/2/)。

这是功能：

```
function ConvertTimeformat(format, str) {
    var hours = Number(str.match(/^(\d+)/)[1]);
    var minutes = Number(str.match(/:(\d+)/)[1]);
    var AMPM = str.match(/\s?([AaPp][Mm]?)$/)[1];
    var pm = ['P', 'p', 'PM', 'pM', 'pm', 'Pm'];
    var am = ['A', 'a', 'AM', 'aM', 'am', 'Am'];
    if (pm.indexOf(AMPM) >= 0 && hours < 12) hours = hours + 12;
    if (am.indexOf(AMPM) >= 0 && hours == 12) hours = hours - 12;
    var sHours = hours.toString();
    var sMinutes = minutes.toString();
    if (hours < 10) sHours = "0" + sHours;
    if (minutes < 10) sMinutes = "0" + sMinutes;
    if (format == '0000') {
        return (sHours + sMinutes);
    } else if (format == '00:00') {
        return (sHours + ":" + sMinutes);
    } else {
        return false;
    }
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-07-07T22:21:27.780

```
function timeConversion(s) {
  var time = s.toLowerCase().split(':');
  var hours = parseInt(time[0]);
  var _ampm = time[2];
  if (_ampm.indexOf('am') != -1 && hours == 12) {
    time[0] = '00';
  }
  if (_ampm.indexOf('pm')  != -1 && hours < 12) {
    time[0] = hours + 12;
  }
  return time.join(':').replace(/(am|pm)/, '');
} 
```

使用字符串参数调用函数：

```
timeConversion('17:05:45AM') 
```

或者

```
timeConversion('07:05:45PM') 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-11-03T10:07:09.007

如果您正在寻找将 ANY FORMAT 正确转换为 24 小时 HH:MM 的解决方案。

```
function get24hTime(str){
    str = String(str).toLowerCase().replace(/\s/g, '');
    var has_am = str.indexOf('am') >= 0;
    var has_pm = str.indexOf('pm') >= 0;
    // first strip off the am/pm, leave it either hour or hour:minute
    str = str.replace('am', '').replace('pm', '');
    // if hour, convert to hour:00
    if (str.indexOf(':') < 0) str = str + ':00';
    // now it's hour:minute
    // we add am/pm back if striped out before 
    if (has_am) str += ' am';
    if (has_pm) str += ' pm';
    // now its either hour:minute, or hour:minute am/pm
    // put it in a date object, it will convert to 24 hours format for us 
    var d = new Date("1/1/2011 " + str);
    // make hours and minutes double digits
    var doubleDigits = function(n){
        return (parseInt(n) < 10) ? "0" + n : String(n);
    };
    return doubleDigits(d.getHours()) + ':' + doubleDigits(d.getMinutes());
}

console.log(get24hTime('6')); // 06:00
console.log(get24hTime('6am')); // 06:00
console.log(get24hTime('6pm')); // 18:00
console.log(get24hTime('6:11pm')); // 18:11
console.log(get24hTime('6:11')); // 06:11
console.log(get24hTime('18')); // 18:00
console.log(get24hTime('18:11')); // 18:11 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-08-18T16:54:54.083

有了这个，您可以拥有以下内容： 样本输入：07:05: **45PM** 样本输出： 19:05: **45**

```
function timeConversion(s) {
    let output = '';
    const timeSeparator = ':'
    const timeTokenType = s.substr(s.length - 2 , 2).toLowerCase();
    const timeArr = s.split(timeSeparator).map((timeToken) => {
    const isTimeTokenType = 
          timeToken.toLowerCase().indexOf('am') > 0 ||                                                                                               
           timeToken.toLowerCase().indexOf('pm');
        if(isTimeTokenType){
            return timeToken.substr(0, 2);
        } else {
            return timeToken;
        }
    });
    const hour = timeArr[0];
    const minutes = timeArr[1];
    const seconds = timeArr[2];
    const hourIn24 = (timeTokenType === 'am') ? parseInt(hour) - 12 : 
    parseInt(hour) + 12;
    return hourIn24.toString()+ timeSeparator + minutes + timeSeparator + seconds;
} 
```

希望你喜欢 ！

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-10-26T21:23:54.850

对于将来阅读本文的任何人，这是一个更简单的答案：

```
var s = "11:41:02PM";
var time = s.match(/\d{2}/g);
if (time[0] === "12") time[0] = "00";
if (s.indexOf("PM") > -1) time[0] = parseInt(time[0])+12;
return time.join(":"); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-10-28T13:52:39.810

基于满足[CodeSkill #1](http://www.codeskill.org/)

格式验证应该是另一个功能:)

```
 function convertTimeFrom12To24(timeStr) {
  var colon = timeStr.indexOf(':');
  var hours = timeStr.substr(0, colon),
      minutes = timeStr.substr(colon+1, 2),
      meridian = timeStr.substr(colon+4, 2).toUpperCase();

  var hoursInt = parseInt(hours, 10),
      offset = meridian == 'PM' ? 12 : 0;

  if (hoursInt === 12) {
    hoursInt = offset;
  } else {
    hoursInt += offset;
  }
  return hoursInt + ":" + minutes;
}
console.log(convertTimeFrom12To24("12:00 AM"));
console.log(convertTimeFrom12To24("12:00 PM"));
console.log(convertTimeFrom12To24("11:00 AM"));
console.log(convertTimeFrom12To24("01:00 AM"));
console.log(convertTimeFrom12To24("01:00 PM"));
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-02-25T13:08:59.477

@krzysztof 答案的扩展版本，能够在时间和修饰符之间有或没有空间的时间工作。

```
const convertTime12to24 = (time12h) => {
      const [fullMatch, time, modifier] = time12h.match(/(\d?\d:\d\d)\s*(\w{2})/i);

      let [hours, minutes] = time.split(':');

      if (hours === '12') {
        hours = '00';
      }

      if (modifier === 'PM') {
        hours = parseInt(hours, 10) + 12;
      }

      return `${hours}:${minutes}`;
    }

    console.log(convertTime12to24('01:02 PM'));
    console.log(convertTime12to24('05:06 PM'));
    console.log(convertTime12to24('12:00 PM'));
    console.log(convertTime12to24('12:00 AM')); 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-12-02T09:07:52.540

**将 AM/PM 时间字符串转换为 24 小时格式。** 示例 9:30 PM 到 21:30

```
function get24HrsFrmAMPM(timeStr) {
    if (timeStr && timeStr.indexOf(' ') !== -1 && timeStr.indexOf(':') !== -1) {
        var hrs = 0;
        var tempAry = timeStr.split(' ');
        var hrsMinAry = tempAry[0].split(':');
        hrs = parseInt(hrsMinAry[0], 10);
        if ((tempAry[1] == 'AM' || tempAry[1] == 'am') && hrs == 12) {
            hrs = 0;
        } else if ((tempAry[1] == 'PM' || tempAry[1] == 'pm') && hrs != 12) {
            hrs += 12;
        }
        return ('0' + hrs).slice(-2) + ':' + ('0' + parseInt(hrsMinAry[1], 10)).slice(-2);
    } else {
        return null;
    }
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-01-29T03:21:05.293

我已经对提交的@devnull69 脚本进行了一些改编。我觉得对于我的应用程序来说，它作为一个函数会更有用，它可以返回我可以返回的值，然后用作变量。

**HTML**

```
<input type="text" id="time_field" />
<button>Submit</submit> 
```

**jQuery**

```
$(document).ready(function() {

    function convertTime(time) {

        var hours = Number(time.match(/^(\d\d?)/)[1]);
        var minutes = Number(time.match(/:(\d\d?)/)[1]);
        var AMPM = time.match(/\s(AM|PM)$/i)[1];

        if((AMPM == 'PM' || AMPM == 'pm') && hours < 12) {
            hours = hours + 12;
        }
        else if((AMPM == 'AM' || AMPM == "am") && hours == 12) {
            hours = hours - 12;
        }

        var sHours = hours.toString();
        var sMinutes = minutes.toString();

        if(hours < 10) {
            sHours = "0" + sHours;
        }
        else if(minutes < 10) {
             sMinutes = "0" + sMinutes;
        }

        return sHours + ":" + sMinutes;

    }

    $('button').click(function() {
        alert(convertTime($('#time_field').val()));
    });

}); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-06-05T07:51:12.923

```
 function getDisplayDatetime() {
    var d = new Date("February 04, 2011 19:00"),
     hh = d.getHours(),  mm = d.getMinutes(),  dd = "AM", h = hh;
    mm=(mm.toString().length == 1)? mm = "0" + mm:mm;
    h=(h>=12)?hh-12:h;
     dd=(hh>=12)?"PM":"AM";
    h=(h == 0)?12:h;
    var textvalue=document.getElementById("txt");
    textvalue.value=h + ":" + mm + " " + dd;
}

</script>
</head>
<body>
<input type="button" value="click" onclick="getDisplayDatetime()">
<input type="text" id="txt"/> 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-07-21T20:18:14.240

```
dateFormat.masks.armyTime= 'HH:MM';

now.format("armyTime"); 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-07-30T03:08:07.747

```
function convertTo24Hour(time) {
    time = time.toUpperCase();
    var hours = parseInt(time.substr(0, 2));
    if(time.indexOf('AM') != -1 && hours == 12) {
        time = time.replace('12', '0');
    }
    if(time.indexOf('PM')  != -1 && hours < 12) {
        time = time.replace(hours, (hours + 12));
    }
    return time.replace(/(AM|PM)/, '');
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-10-09T19:02:06.257

```
date --date="2:00:01 PM" +%T
14:00:01

date --date="2:00 PM" +%T | cut -d':' -f1-2
14:00

var="2:00:02 PM"
date --date="$var" +%T
14:00:02 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-12-09T02:13:09.773

你可以试试这个更通用的功能：

```
function from12to24(hours, minutes, meridian) {
  let h = parseInt(hours, 10);
  const m = parseInt(minutes, 10);
  if (meridian.toUpperCase() === 'PM') {
    h = (h !== 12) ? h + 12 : h;
  } else {
    h = (h === 12) ? 0 : h;
  }
  return new Date((new Date()).setHours(h,m,0,0));
} 
```

请注意，它使用了一些 ES6 功能。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-05-19T04:50:10.687

```
 var time = "9:09:59AM"
    var pmCheck =time.includes("PM");
    var hrs=parseInt(time.split(":")[0]);
    var newtime='';
    // this is for between  12 AM to 12:59:59AM  = 00:00:00
    if( hrs == 12  && pmCheck == false){
        newtime= "00" +':'+ time.split(":")[1] +':'+ time.split(":")[2].replace("AM",'');
        }
    //this is for between  12 PM to 12:59:59 =12:00:00
    else if (hrs == 12  && pmCheck == true){
             newtime= "12" +':'+ time.split(":")[1] +':'+ time.split(":")[2].replace("PM",'');
    }
    //this is for between 1 AM and 11:59:59 AM
    else if (!pmCheck){
        newtime= hrs +':'+ time.split(":")[1] +':'+ time.split(":")[2].replace("AM",'');
    }
    //this is for between 1 PM and 11:59:59 PM
    else if(pmCheck){
        newtime= (hrs +12)+':'+ time.split(":")[1] +':'+ time.split(":")[2].replace("PM",'');
    }
    console.log(newtime); 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-11-20T05:55:19.240

实时计算时间经络的单一和简单的js函数

JS

```
 function convertTime24to12(time24h) {
                var timex = time24h.split(':');

                if(timex[0] !== undefined && timex [1] !== undefined)
                 {
                     var hor = parseInt(timex[0]) > 12 ? (parseInt(timex[0])-12) : timex[0] ;
                     var minu = timex[1];
                     var merid = parseInt(timex[0]) < 12 ? 'AM' : 'PM';

                     var res = hor+':'+minu+' '+merid;

                     document.getElementById('timeMeridian').innerHTML=res.toString();
                 }
            } 
```

html

```
 <label for="end-time">Hour <i id="timeMeridian"></i> </label>
            <input type="time" name="hora" placeholder="Hora" id="end-time" class="form-control" onkeyup="convertTime24to12(this.value)"> 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-02-01T17:37:26.333

基于@krzysztof-dąbrowski 的[回答的打字稿解决方案](https://stackoverflow.com/a/40197728/563420)

```
export interface HoursMinutes {
  hours: number;
  minutes: number;
}
export function convert12to24(time12h: string): HoursMinutes {
  const [time, modifier] = time12h.split(' ');
  let [hours, minutes] = time.split(':');

  if (hours === '12') {
    hours = '00';
  }

  if (minutes.length === 1) {
    minutes = `0${minutes}`;
  }

  if (modifier.toUpperCase() === 'PM') {
    hours = parseInt(hours, 10) + 12 + '';
  }

  return {
    hours: parseInt(hours, 10),
    minutes: parseInt(minutes, 10)
  };
} 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2019-03-05T12:49:05.163

针对所有用例进行了测试

```
function timeConversion(s) {
let h24;
let m24;
let sec24;

const splittedDate = s.split(":");
const h = parseInt(splittedDate[0], 10);
const m = parseInt(splittedDate[1], 10);
const sec = parseInt(splittedDate[2][0] + splittedDate[2][1], 10); 
const meridiem = splittedDate[2][2] + splittedDate[2][3];

if (meridiem === "AM") {
    if (h === 12) {
        h24 = '00';
    } else {
        h24 = h;
        if (h24 < 10) {
            h24 = '0' + h24;
        }
    }
    m24 = m;
    sec24 = sec;
} else if (meridiem === "PM") {
    if (h === 12) {
        h24 = h
    } else {
        h24 = h + 12;
        if (h24 < 10) {
            h24 = '0' + h24;
        }
    }
    m24 = m;
    sec24 = sec;
}

if (m24 < 10) {
    m24 = '0' + m24; 
} 

if (sec24 < 10) {
    sec24 = '0' + sec24;
}

  return h24 + ":" + m24 + ":" + sec24; 
} 
```

[这是 jsfiddle 工作示例](https://jsfiddle.net/Muneebkhan/v25oebjn/1/)

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2019-08-19T10:32:35.040

**计算时间 12 小时到 24 小时的单行代码**

**任何格式的输入都可以正常工作**

```
const convertTime12to24 = (time12h) => moment(time12h, 'hh:mm A').format('HH:mm');

console.log(convertTime12to24('06:30 pm'));

console.log(convertTime12to24('06:00 am'));

console.log(convertTime12to24('9:00 am'));

console.log(convertTime12to24('9pm')); 
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2019-11-15T13:46:14.263

短 ES6 代码

```
const convertFrom12To24Format = (time12) => {
  const [sHours, minutes, period] = time12.match(/([0-9]{1,2}):([0-9]{2}) (AM|PM)/).slice(1);
  const PM = period === 'PM';
  const hours = (+sHours % 12) + (PM ? 12 : 0);

  return `${('0' + hours).slice(-2)}:${minutes}`;
} 
```

```
const convertFrom24To12Format = (time24) => {
  const [sHours, minutes] = time24.match(/([0-9]{1,2}):([0-9]{2})/).slice(1);
  const period = +sHours < 12 ? 'AM' : 'PM';
  const hours = +sHours % 12 || 12;

  return `${hours}:${minutes} ${period}`;
} 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2020-01-07T17:30:49.837

我刚刚在 HackerRank 上解决了这个问题，所以我在这里分享我的结果

```
function timeConversion(s) {
    const isPM = s.indexOf('PM') !== -1;
    let [hours, minutes, seconds] = s.replace(isPM ? 'PM':'AM', '').split(':');

    if (isPM) {
        hours = parseInt(hours, 10) + 12;
        hours = hours === 24 ? 12 : hours;
    } else {
        hours = parseInt(hours, 10);
        hours = hours === 12 ? 0 : hours;
        if (String(hours).length === 1) hours = '0' + hours;
    }

    const time = [hours, minutes, seconds].join(':');

    return time;
} 
```

这适用于像`06:40:03AM`.

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2020-02-21T11:38:01.700

```
function formatto24(date) {
  let ampm = date.split(" ")[1];
  let time = date.split(" ")[0];
  if (ampm == "PM") {
    let hours = time.split(":")[0];
    let minutes = time.split(":")[1];
    let seconds = time.split(":")[2];
    let hours24 = JSON.parse(hours) + 12;
    return hours24 + ":" + minutes + ":" + seconds;
  } else {
    return time;
  }
}
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2021-08-26T14:47:48.047

这就是我实现这个的方式：

```
function timeConversion(s) {
    // Write your code here
   const arr =s.split(":")
   const isAM = arr[2].includes("AM")
   if(isAM) {
      arr[0]=arr[0].padStart(2, '0');
      arr[2]=arr[2].replace("AM","");  
        if(arr[0]==="12")  arr[0] ="00"

    }else{
        arr[0]=(+arr[0]+12).toString();
        arr[2]=arr[2].replace("PM","");  
        if(arr[0]==="24")  arr[0] ="12"
    }
   return(arr.join(":"))
} 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2021-10-03T14:00:35.480

我发现这是最简单的方法。以下是正在发生的事情的分步说明：

1.  你得到 12 小时格式的时间

2.  按时间戳和子午线分割时间

3.  如果是午夜，则在前面添加，`00`否则仅打印时间戳

4.  如果是中午，只需打印时间戳，否则添加小时`12`

```
function timeConversion(s) {
    // 07:05:45PM
    const timeInAmPmArray = s.split(/(AM|PM)/) // ['07:05:45', 'PM', '']
    const hour = Number(timeInAmPmArray[0].split(':')[0]) // 7
    const amOrPm = timeInAmPmArray[1] // PM
    let timeIn24Hour = ''
    if(amOrPm === 'AM') {
      timeIn24Hour = hour === 12 ? `00:${timeInAmPmArray[0].split(':').slice(1).join(':')}` : timeInAmPmArray[0]
    } else {
      timeIn24Hour = hour === 12 ? timeInAmPmArray[0] : `${hour + 12}:${timeInAmPmArray[0].split(':').slice(1).join(':')}`
      // timeIn24Hour = 19:05:45
    }
    return timeIn24Hour
}

timeConversion('07:05:45PM') 
```

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2021-11-14T16:41:27.583

这是对我有用的蛮力解决方案

```
const time = '11:8AM';

function convertTo24HrsFormat(time) {
    // write your solution here
    let timeWithPM = time.endsWith("PM");

    if (time.includes('P')) {
        let minuteVal = time.slice(time.indexOf(':')+1, time.indexOf('P'));

      if(minuteVal.length === 1) {
        minuteVal = `0${minuteVal}`;
        let result = time.slice(0, time.indexOf(':'));
        time = `${result}:${minuteVal}PM`;
        console.log("CHECKING123====>>>>", time);
      }
    } 

    if (time.includes('A')) {
        let minuteVal = time.slice(time.indexOf(':')+1, time.indexOf('A'));
      if(minuteVal.length === 1) {
        minuteVal = `0${minuteVal}`;
        let result = time.slice(0, time.indexOf(':'));
        time = `${result}:${minuteVal}AM`;
      }
    } 

    if(timeWithPM) {
        let result = findHour(time);
        return result;
    }

    if(!timeWithPM) {
        let result = withAM(time);
        return result;
    }

    return;
}

function findHour(time) {
    let hour = time.slice(0, time.indexOf(':'));
    if(parseInt(hour) < 12)
        hour = parseInt(hour)+12;
    if (hour.toString().length === 1)
        hour = `0${hour}`;
    let removeHourWithPM = time.split(":").pop();
    removeHourWithPM = `${hour}:${removeHourWithPM}`;
    // console.log("CHECKING-----",hour);
    return removeHourWithPM.slice(0, -2);
}

function withAM(time) {

        let isTwelve = time.slice(0, time.indexOf(':'));
    if(isTwelve == '12') {
        let get12 = time.split(':').pop();
        let result = get12.slice(0, -2);
        return `00:${result}`
    }

        let hour = time.slice(0, time.indexOf(':'));
    if(hour.length === 1) {
        hour = `0${hour}`;
      let removeHourWithSingledigit = time.split(":").pop();
      removeHourWithSingledigit = `${hour}:${removeHourWithSingledigit}`;
      return removeHourWithSingledigit.slice(0, -2);
    }

    return time.slice(0, -2);
}

console.log(`Converted time: ${convertTo24HrsFormat(time)}`) 
```

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2022-01-01T12:27:10.240

```
function timeConversion(amPmStr = '') {
    const time = amPmStr.replace(/(AM|PM|am|pm)/, (match) => ' ' + match);
    const randomDate = "September 25, 2018 ";
    const date = new Date(randomDate + time);
    const hours = date.getHours().toString().padStart(2, '0');
    const mins = date.getMinutes().toString().padStart(2, '0');
    const secs = date.getSeconds().toString().padStart(2, '0');
    return hours + ":" + mins + ":" + secs;
} 
```

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2022-01-02T17:36:09.280

我正在添加一个简单的代码 -

```
 const time = '12:10AM';

    function convertTo24HrsFormat(time) {
    let [hour, modifier] = time.split(":");
    let min = parseInt(modifier).toString().padStart(2, '0');
    let index = modifier.toLowerCase().indexOf('m');
    let meridian = modifier.slice(index - 1);
    hour = parseInt(hour);

    if(hour === 12){
        hour =  00;
    }

    if(meridian == 'PM'){
        hour = hour + 12;
    }

    hour = hour.toString().padStart(2, '0');

    let time24hr = `${hour}:${min}`;

    return time24hr;
}

console.log(`Converted time: ${convertTo24HrsFormat(time)}`); 
```

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2022-02-15T20:53:39.567

一个经过良好测试的方法：

```
// example, s = 12:34:56PM
function timeConversion(s) {
    let designator, clock, hhmmss, hh, mm, ss, mil; // declare variables
    designator = s.slice(-2); // returns AM or PM
    hhmmss = s.substring(0, s.length-2) // returns hh:mm:ss
    clock = hhmmss.split(':'); // returns array of [hh,mm,ss]
    hh = designator === 'AM' 
       ? (parseInt(clock[0]) === 12 ? '00' : clock[0]) 
       : (parseInt(clock[0]) === 12 ? '12' : parseInt(clock[0]) + 12);
    mm = clock[1];
    ss = clock[2];
    mil = [hh,mm,ss].join(':').toString();
    return mil 
```

}

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2022-02-23T09:07:02.097

```
//here is my solution.
function timeConversion(s) {
        // Write your code here
        let amPM = s.indexOf('AM') !== -1 ? 'AM' : 'PM';
        let tString = s.toString().replace(/AM|PM/gi,'');
        let splitTime = tString.split(':');
        let h = splitTime[0];
        let m = splitTime[1];
        let sec = splitTime[2];
        let twntyfr = amPM === 'PM' && parseInt(h) !== 12 ? parseInt(h)+12 : h;
        if(parseInt(twntyfr) === 12 && amPM === 'AM') twntyfr = '00';
        return twntyfr+':'+m+':'+sec;
    } 
```

# git - git 可以可靠地用作程序安装的更新/补丁系统吗？

> ID：15083551
> 
> 赞同：1
> 
> 时间：2013-02-26T07:23:17.807
> 
> 标签：git, deployment, installation, windows-installer

如果是这样 - 它是否在文件级别的基础上工作 - 或者它是否工作得更低 - 并且只打包已更改的内容。

我想这个工作 - 工作站必须安装 git。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:27:14.917

Git 不是为管理工作站中安装的软件而设计的！当然，它可以用于维护工作站之间的配置同步，但是您需要开发用于处理更改、安装东西、报告等的软件。这是很多工作，而且很难做到正确。

您需要像 Puppet、Chef 或 CfEngine 这样的配置管理软件。

# php - mysql中的列值不超过255

> ID：15083555
> 
> 赞同：0
> 
> 时间：2013-02-26T07:23:20.830
> 
> 标签：php, mysql, increment, auto-increment

我面临一个小问题。我在自动增量上设置的表中有一个主键 ID，它不允许设置任何超过 255 的值。我应该如何解决这个问题？可以设置的值越高，对我来说就越好:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:31:13.723

看起来您使用`TINYINT(4) UNSIGNED`，在这种情况下最大值为 255。尝试更改 ID 列的类型，例如 -

```
ALTER TABLE table
  CHANGE COLUMN id id INT(11) UNSIGNED NOT NULL; 
```

# javascript - 用于调整图像大小的 javascript 在 IE 中不起作用？

> ID：15083560
> 
> 赞同：1
> 
> 时间：2013-02-26T07:23:28.670
> 
> 标签：javascript, jquery

下面给出的代码将图像大小调整为 160x160，适用于 Firefox 和 Chrome，但不适用于 Internet Explorer。为什么？

```
$(document).ready(function() {
    $('#imagePreview img').each(function() {
        $('#imagePreview img').each(function() {
            var maxWidth = 160;             // Max width for the image
            var maxHeight = 160;            // Max height for the image
            var ratio = 0;                  // Used for aspect ratio
            var width = $(this).width();    // Current image width
            var height = $(this).height();  // Current image height

            // Check if the current width is larger than the max
            if(width > maxWidth){
                ratio = maxWidth / width;   
                $(this).css("width", maxWidth);         // Set new width
                $(this).css("height", height * ratio);  // Scale height based on ratio
                height = height * ratio;                // Reset height to match scaled image
                width = width * ratio;                  // Reset width to match scaled image
            }

            // Check if current height is larger than max
            if(height > maxHeight){
                ratio = maxHeight / height; 
                $(this).css("height", maxHeight);   // Set new height
                $(this).css("width", width * ratio);    // Scale width based on ratio
                width = width * ratio;    // Reset width to match scaled image
            }
        }); 
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T07:27:46.990

您无需等待加载图像，因此不能保证它们具有大小（取决于它们是否被缓存）。

你应该更换

```
$(document).ready(function() { 
```

和

```
$(document).load(function() { 
```

话虽这么说，看起来你可以用这种风格替换整个：

```
#imagePreview img {
   max-width: 160px;
   max-height: 160px;
} 
```

（见[示范](http://jsbin.com/uyetav/2/edit)）

# excel - 粘贴单元格时如何防止excel 2010自动将时间转换为小数

> ID：15083585
> 
> 赞同：3
> 
> 时间：2013-02-26T07:24:59.370
> 
> 标签：excel, excel-2010

正如您可能遇到的那样，MS Excel 倾向于将时间转换为十进制值。我确实希望它自动转换值，因为我需要时间值。假设我有以下数据：

出发 | 时间

伊斯坦布尔 06:45 安卡拉 01:30

我正在使用**Concatenate**函数创建所需的字符串，如**Istanbul: 08:00**和**Ankara: 18:30**。但是，当我使用公式时，Excel 将小时数转换为小数，我得到了**Istanbul: 0.28125**和**Ankara: 0.0625**。我不希望它转换。我怎样才能做到这一点？

ps：当我将时间值从 Excel 复制到 Notepad++ 时，也会发生这种情况。此外，当我通过插件将时间值导入 PostgreSQL 时，我仍然在列中得到十进制值

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T08:49:58.840

您想使用 TEXT 函数将时间转换为您需要的文本格式。像这样的东西：

```
=CONCATENATE("Istanbul: ", TEXT(A1,"hh:mm"), " and Ankara: "18:30, TEXT(A2,"hh:mm")) 
```

# regression - 解释 libsvm epsilon-SVR 结果

> ID：15083588
> 
> 赞同：1
> 
> 时间：2013-02-26T07:25:08.510
> 
> 标签：regression, svm, libsvm

我尝试使用 epsilon SVR 训练和交叉验证一组包含 8616 个样本的数据。在这些数据集中，我拿 4368 做测试，4248 做 CV。内核类型 = RBF 内核。Libsvm 提供如下所示的结果。

```
optimization finished, #iter = 502363
nu = 0.689607
obj = -6383530527604706.000000, rho = 2884789.960212
nSV = 3023, nBSV = 3004 
```

这是通过设置得到的结果

```
-s 3 -t 2 -c 2^28 -g 2^-13 -p 2^12 
```

(a) “nu”是什么意思？有时我得到 nu = 0.99xx 的不同参数。

(b) 似乎“obj”大得惊人。听起来正确吗？Libsvm FAQ 说这是“对偶 SVM 问题的最优目标值”。这是否意味着这是 f(alpha) 的最小值？

(c) “rho”也很大。这是偏差项，b。数据集标签 (y) 包含 82672 到 286026 之间的值。所以我想这是合理的，对吗？

对于训练集，

```
Mean squared error = 1.26991e+008 (regression)
Squared correlation coefficient = 0.881112 (regression) 
```

对于交叉验证集，

```
Mean squared error = 1.38909e+008 (regression)
Squared correlation coefficient = 0.883144 (regression) 
```

* * *

使用选定的参数，我产生了以下结果

```
kernel_type=2 (best c:2^28=2.68435e+008, g:2^-13=0.00012207, e:2^12=4096)
NRMS: 0.345139, best_gap:0.00199433
Mean Absolute Percent Error (MAPE): 5.39% 
Mean Absolute Error (MAE): 8956.12 MWh
Daily Peak MAPE: 5.30% 
```

CV 集 MAPE 较低 (5.39%)。使用 Bias-Variance 测试，训练集 MAPE 和 CV 集 MAPE 之间的差异仅为 0.00199433，这意味着参数似乎设置正确。但我想知道极大的“obj”、“rho”值是否正确....

我对 SVR 很陌生，如果我的解释或验证方法不正确/不足，请纠正我。

* * *

MAPE的计算方法

```
train_model = svmtrain(train_label, train_data, cmd); 
[result_label, train_accuracy, train_dec_values] = svmpredict(train_label, train_data, train_model); 
train_err = train_label-result_label; 
train_errpct = abs(train_err)./train_label*100; 
train_MAPE = mean(train_errpct(~isinf(train_errpct))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-12T11:15:25.473

目标值和 rho 值很高，因为（很可能）数据没有缩放。强烈建议缩放以避免溢出；溢出风险还取决于内核的类型。顺便说一句，在缩放训练数据时，不要忘记同时缩放测试数据，这最容易通过首先缩放所有数据，然后将它们分成训练和测试集来完成。

# extjs - 导航到图像点击的下一个视图？

> ID：15083589
> 
> 赞同：0
> 
> 时间：2013-02-26T07:25:15.313
> 
> 标签：extjs, sencha-architect, sencha-touch-2.1, sencha-touch-theming

我正在使用 dataview itemTpl 来显示我的图像（缩略图视图）。

我能够正确显示图像。如何在这些图像上添加 itemtap？这样当我点击特定图像时，会显示带有点击图像的新视图？

我用控制器试过这个，但没有运气。你能帮我解决这个问题吗？

我以 Sencha Architect 2 为例。

我正在尝试此代码。请纠正我

**第一个视图**

```
Ext.define('MyApp.view.MyPanel', {
    extend: 'Ext.Panel',
    alias: 'widget.galleryview',

    config: {
        layout: {
            type: 'fit'
        },
        items: [
            {
                xtype: 'dataview',
                id: 'gallerythumbnail',
                layout: {
                    type: 'fit'
                },
                itemTpl: [
                    '<div class="lb-album">',
                    '    <ul>',
                    '        <li>',
                    '    <img src="{filename}" width="120px" heigth="120px"/>',
                    '        </li>',
                    '    </ul>   ',
                    '</div>'
                ],
                store: 'ImageStore'
            }
        ]
    }

}); 
```

**第二视图 - 点击 img 时必须显示此视图**

```
Ext.define('MyApp.view.FullViewPanel', {
    extend: 'Ext.Panel',

    config: {
        layout: {
            type: 'fit'
        },
        items: [
            {
                xtype: 'carousel',
                id: 'mycarousel'
            }
        ]
    }

}); 
```

**控制器**

```
Ext.define('MyApp.controller.GalleryController', {
    extend: 'Ext.app.Controller',

    config: {
        refs: {
            nav: 'galleryview'
        },

        control: {
            "dataview": {
                itemtap: 'viewFullScreen'
            }
        }
    },

    viewFullScreen: function(dataview, index, target, record, e, options) {
        Ext.ComponentQuery.query('galleryview').push('MyApp.view.FullView');
        console.log(record);

    }

}); 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T05:46:16.523

如果您只想在图像点击上执行此操作，则可以检查该侦听器中的事件。

**方法一**

```
listeners : {
    itemtap: function (list, index, item, record, senchaEvent) {
        if (senchaEvent.event.target.nodeName == 'IMG') {
            // Show next view
        }
    }
} 
```

**我是这样用的**

```
Ext.create('Ext.List', {
                itemCls : 'my-dataview-item',
                id : 'myList',
                itemTpl : '<div><img src="' + localStorage.httpServerPrefix + '{imageURI}"/><span id="name">{fullname}</span></div>',
                store : aroundStore,
                listeners : {
                    itemtap: function (list, index, item, record, senchaEvent) {
                        if(senchaEvent.event.target.nodeName =='IMG') {
                            me.othersProfileImageClicked(record.data);
                        }
                        else
                            me.onMessageClickedInAround(list, record);                  
                    }
                }
            }); 
```

**更新**

```
listeners : {
    itemtap: function (dataview,index,target,record,e,option) {
        if (e.event.target.nodeName == 'IMG') {
            // Show next view
        }
    }
} 
```

**方法二**

您可以使用事件委托，像这样

```
Ext.create('Ext.List', {
      itemCls : 'my-dataview-item',
      id : 'myList',
      itemTpl : '<div><img src="' + localStorage.httpServerPrefix + '{imageURI}"/><span id="name">{fullname}</span>',
      store : aroundStore,,
      listeners: [{
            element: 'element',
            delegate: 'img',
            event: 'tap',
            fn: function() {
                alert('One!');
            }
        }
     ]
 }); 
```

# asp.net - 无法加载文件或程序集“xxxxxx”或其依赖项之一。试图加载格式不正确的程序。

> ID：15083592
> 
> 赞同：2
> 
> 时间：2013-02-26T07:25:23.240
> 
> 标签：asp.net, visual-studio

我使用 asp.net (visual studio 2008) 开发了一个 32 位 Web 应用程序。目标 CPU 是“x86”。现在我将其转换为 64 位。我将目标 CPU 设为“x64”。我已将所有必需的 DLL 转换为 64 位。但现在它给出了 64 位 DLL 的错误，因为“无法加载文件或程序集 'xxxxxx, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' 或其依赖项之一。尝试加载程序格式不正确。” 如果我删除了导致此错误的 64 位 DLL 的引用，那么它会为另一个 64 位 DLL 提供错误。我还尝试将平台属性值设置为“x64”、“任何 CPU”、“所有平台”。但没有奏效。请帮我。

# database - Heroku Django 设置后 postgres 数据库/syncdb 的问题

> ID：15083593
> 
> 赞同：1
> 
> 时间：2013-02-26T07:25:26.137
> 
> 标签：database, django, postgresql, heroku

我是 Heroku / Django / Postgres 游戏的新手，在按照他们[教程](https://devcenter.heroku.com/articles/django)中的说明操作后遇到了麻烦。这是我的设置：

已安装：Django 1.4.5 dj_database_url Postgress.app 9.2.2.0

```
DATABASES = {
'default': {
    'ENGINE': 'django.db.backends.postgresql_psycopg2', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
    'NAME': 'db_name',                      # Or path to database file if using sqlite3.
    'USER': '',                      # Not used with sqlite3.
    'PASSWORD': '',
    'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
    'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
 }
} 
```

稍后在 settings.py 中：

```
import dj_database_url
    DATABASES['default'] = dj_database_url.config() 
```

当我运行 python manage.py syncdb 时：

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
   execute_from_command_line(sys.argv)
  File "/Users/joerobinson/.virtualenvs/dg/lib/python2.7/site-         packages/django/core/management/__init__.py", line 443, in execute_from_command_line
utility.execute()
  File "/Users/joerobinson/.virtualenvs/dg/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Users/joerobinson/.virtualenvs/dg/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
self.execute(*args, **options.__dict__)
  File "/Users/joerobinson/.virtualenvs/dg/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
output = self.handle(*args, **options)
  File "/Users/joerobinson/.virtualenvs/dg/lib/python2.7/site-packages/django/core/management/base.py", line 371, in handle
return self.handle_noargs(**options)
  File "/Users/joerobinson/.virtualenvs/dg/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 57, in handle_noargs
cursor = connection.cursor()
  File "/Users/joerobinson/.virtualenvs/dg/lib/python2.7/site-packages/django/db/backends/dummy/base.py", line 15, in complain
raise ImproperlyConfigured("settings.DATABASES is improperly configured. "
django.core.exceptions.ImproperlyConfigured: settings.DATABASES is improperly configured. Please supply the ENGINE value. Check settings documentation for more details. 
```

当我运行 python manage.py shell、导入设置并查看 DATABASES 时，我得到：

```
{'default': {'ENGINE': 'django.db.backends.dummy', 'TEST_MIRROR': None, 'NAME': '', 'TEST_CHARSET': None, 'TIME_ZONE': 'UTC', 'TEST_COLLATION': None, 'PORT': '', 'HOST': '', 'USER': '', 'TEST_NAME': None, 'PASSWORD': 
```

所以我知道我一定是配置不正确，但是经过一夜的搜索，我还没有找到正确的设置。有人见过这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:40:04.820

您可能想要一个真正的 Django 数据库后端，而不是`django.db.backends.dummy`. 例如：

```
{'ENGINE': 'django.db.backends.postgresql_psycopg2', ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T02:41:16.297

我不得不点配置数据库 URL，如下所示：

```
DATABASES['default'] = dj_database_url.config(default='postgres://localhost/db_name') 
```

我遇到了与 psycopg2 包和 gcc-4.2 相关的其他问题，但我的原始帖子并未涵盖这些问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-28T08:19:24.253

我通过删除 dummy/base.py 并为其创建符号链接解决了同样的问题：

```
ln -s /usr/lib/python2.6/site-packages/django/db/backends/sqlite3/base.py /usr/lib/python2.6/site-packages/django/db/backends/dummy/base.py 
```

# payment-gateway - Authorize.Net 通过银行账户付款？

> ID：15083596
> 
> 赞同：0
> 
> 时间：2013-02-26T07:25:37.570
> 
> 标签：payment-gateway, payment, authorize.net, payment-processing

我是支付网关的新手，我没有得到以下相关信息，

我的网站用户还没有准备好通过信用卡付款。我想使用Authroize.Net 进行付款处理。

1.  那么，Authorize.Net 将支持通过银行账户付款吗？

2.  如果是这样，我在哪里可以找到 Authorize.Net 支持的银行列表？

3.  如果不是这样，请推荐一些支持银行账户支付的在线支付网关？

我找到了这个“ [http://www.ccavenue.com/indianrupees.jsp](http://www.ccavenue.com/indianrupees.jsp) ”，它通过银行账户处理在线支付。但它只提供印度银行。请向美国银行推荐。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T14:16:45.450

您的困惑是在线支付领域的常见问题。该行业在明确这一过程方面做得并不好。以下是在线支付的工作原理：

为了在线接受信用卡，您将需要三个要素，具体取决于您将如何进行这些付款。我假设您的网站上列出了待售的产品。如果您将接受需要您输入信息的电话订单或互联网订单，则只会略有不同。

1）您将需要某种购物车。购物车会汇总您网站上的所有购买，将总数相加，并添加任何适当的税费和运费。它提供总购买价格并将该价格呈现给您的客户。

2）您将需要一个互联网网关。正如您所提到的，Authorize.net 是市场上的大狗。它使用简单，在安全性方面享有盛誉。将互联网网关视为网络空间中的信用卡终端。它所做的只是收集您的客户信用卡信息并将其安全保存，就像零售店中的信用卡终端一样。

3) 您将需要一个商家帐户。商家帐户获取您的网关持有的信息，并将其发送到所有为您的客户发行信用卡的适当银行，收取款项，然后转身将这笔钱存入您的银行账户以完成销售。

这里的问题是，每个元素——购物车、网关和商家帐户，都需要集成，以便它们可以相互“对话”。许多商家面临的问题是他们从一个地方获取他们的购物车，从另一个地方获取网关，从第三方获取他们的商家帐户。然后，没有人知道如何将三者融为一体，相互交谈。在这种情况下，最大的罪魁祸首是商家账户提供商；许多银行提供商户处理，但他们不知道如何与 Authorize.net 集成，但在您注册之前他们不会告诉您。我的建议是绝对确定您的商家帐户提供商从一开始就知道如何与网关集成。

在建议商家帐户提供商方面，有数百种可用，有些比其他更好。我的建议是找到提供“预集成”商家帐户和网关的商家处理器。这将有助于消除设置在线支付最令人不安的方面之一，即整合这两个元素的过程。

我希望这可以帮助你。

真诚的，迈克

Yadheendran - 我忘了添加另一个细节。如果您打算通过邮件或电话接受订单，您可能不会使用我上面提到的经典“购物车”解决方案，但可能需要某种订购软件。然而，这里的底线是该过程的工作方式与购物车相同。大多数购物车和订购软件都非常非常容易地与 Authorize.net 集成，因为大多数软件都专门设计为接受 Authorize.net 作为网关，因为它非常受欢迎。很抱歉之前忘记提及这一点。

# gps - SUPL MS 辅助 - 发送什么测量值

> ID：15083602
> 
> 赞同：0
> 
> 时间：2013-02-26T07:26:03.133
> 
> 标签：gps, geolocation, location, supl-2.0

在这种`MS-assisted`情况下，是`GPS`接收方发送`measurements`计算`SLP`和还原。我了解发送的`measurements`包括`Ephemeris`, `Iono`, `DGPS`etc + `Doppler shift`。请让我知道我的理解是否正确。

`SET`是按原样发送代码（卫星传输的全部数据）`receives`还是将其拆分为上述组件并发送？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:01:56.353

SUPL 中的所有辅助信息都使用 RRLP 协议（​​用于 GSM 的无线电资源定位服务 (LCS) 协议）、RRC（用于 UMTS 的无线电资源控制）或 TIA 801（用于 CDMA 2000）或 LPP（用于 LTE 的 LTE 定位协议）进行封装。我只是在看 RRLP 标准[ETSI TS 101 527](http://www.etsi.org/deliver/etsi_ts/101500_101599/101527/07.02.00_60/ts_101527v070200p.pdf)。以下部分听起来很有趣：

> A.3.2.5 GPS 测量信息元素
> 
> GPS 测量信息元素的目的是提供从 MS 到 SMLC 的 GPS 测量信息。此信息包括码相位和多普勒测量，这使得基于网络的 GPS 方法能够在 SMLC 中计算位置。建议的内容如下表 A.5 所示，随后对各个字段进行说明。

在随后的部分中，它被定义为：

*   参考帧 - 可选，16 位 -*来自参考 BTS 模 42432 的最后测量突发的帧号*
*   GPS TOW（一周中的时间） - 强制，24 位，单位为 1 毫秒
*   卫星数量 - 强制，4 位

然后为每颗卫星传输以下数据集：

*   卫星 ID - 6 位
*   C/否 - 6 位
*   多普勒频移 - 16 位，0.2Hz 单位
*   整个芯片 - 10 位
*   小数筹码 - 10 位
*   多路径指示符 - 2 位
*   伪距多路径错误 - 3+3 位（尾数/指数）

我对GPS操作不太熟悉以了解所有参数，但据我了解：

*   C/No 只是一个信号（载波）噪声比
*   多普勒频移 - 显然给出了给定卫星的频移
*   整体/分数芯片一起给出相位（以及卫星距离）

我的理解是，像almanac、ephemeris、Iono、DGPS这样的东西在网络侧都是已知的。据我所知，这些东西是以基于 MS 的模式从网络传输到 MS 的。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T18:50:44.950

从 MS 辅助定位请求中收集的测量值包括：

*   卫星编号
*   代码阶段 - 整个芯片
*   代码阶段 - 分数芯片
*   多普勒
*   信号强度
*   多径指示器
*   伪距 RMS 指示器

此外，GPS 测量时间也以一个值（以毫秒为单位）提供，用于所有测量有效的时间。

在实践中，需要准确无误的必填字段是：

*   卫星编号
*   代码阶段 - 整个芯片
*   代码阶段 - 分数芯片
*   多普勒

每颗卫星的码相位值几乎总是用于最准确的位置计算。多普勒值可用于估计粗略位置，但通常不够准确，无法真正有助于最终解决方案。

信号强度、多径指示和 RMS 指示的其他值通常在供应商之间的意义差异很大，以至于它们并没有真正为位置计算提供太多好处。它们通常用于诸如加权其他值之类的事情，以便好的卫星在最终位置中计数更多。

网络已经知道（或应该知道）星历和电离层模型。它们不是手机收集的测量值。

# android - GridAdapter 在屏幕方向更改时显示 view0 而不是 view4

> ID：15083603
> 
> 赞同：0
> 
> 时间：2013-02-26T07:26:11.517
> 
> 标签：android, orientation, android-gridview, baseadapter, onconfigurationchanged

我有一个显示 6 个按钮的 a ，如下所示`GridView`：`BaseAdapter`

*   肖像：

`B11` `B12`

`B21` `B22`

`B31` `B32`

*   景观：

`B11` `B12` `B21`

`B22` `B31` `B32`

一切都很好，直到我从横向切换回纵向。然后显示：

*   肖像：

`B11` `B12`

`B21` `B22`

`B11` `B32`

所以它显示了`B11`两次。当我单击它时，它仍然获得正确的位置 (4) 并崩溃，因为它找不到正确的按钮 ID。

这是适配器的代码：

```
public class RightSlideMenuGridAdapter extends BaseAdapter {
private Context mContext;
private String TAG = "RightSlideMenuGridAdapter";

public RightSlideMenuGridAdapter(Context c) {
    mContext = c;
}

public int getCount() {
    return 6;
}

public Object getItem(int position) {
    Log.i(TAG, "getItem" + Integer.toString(position));
    return null;
}

public long getItemId(int position) {
    Log.i(TAG, "getItemId" + Integer.toString(position));
    long retId = 0;
    // Nothing worked here. Maybe I should return something?
    return retId;
}

// create a new ImageView for each item referenced by the Adapter
public View getView(int position, View convertView, ViewGroup parent) {
    View child = convertView;
    if (child == null) {
        Context c = CobraApplication.getAppContext();
        Log.i(TAG, "getView" + Integer.toString(position));
        switch (position) {
        case 0:
            child = (View) ((LayoutInflater) CobraApplication
                    .getAppContext().getSystemService(
                            Context.LAYOUT_INFLATER_SERVICE)).inflate(
                    R.layout.toolscity, null);
            Button btnToolscityhwy = (Button) child
                    .findViewById(R.id.toolscityhwy);
            if (PersistentStoreHelper
                    .getDetectorSetting(DetectorSettings.DIR_MOB_IRAD_CITY_MODE
                            .name()) == CommunicationProtocol.DIR_MOB_IRAD_SETTING_HIGHWAY) { // VK:
                                                                                              // The
                                                                                              // setting
                                                                                              // is
                                                                                              // highway
                // VK: Show the highway icon
                btnToolscityhwy.setBackgroundDrawable(CobraApplication
                        .getAppContext().getResources()
                        .getDrawable(R.drawable.toolshwy));
                btnToolscityhwy.setText(c.getResources().getString(
                        R.string.city));
            } else {
                btnToolscityhwy.setBackgroundDrawable(CobraApplication
                        .getAppContext().getResources()
                        .getDrawable(R.drawable.toolscity));
                btnToolscityhwy.setText(c.getResources().getString(
                        R.string.highway));
            }
            break;

        case 1:
            child = (View) ((LayoutInflater) CobraApplication
                    .getAppContext().getSystemService(
                            Context.LAYOUT_INFLATER_SERVICE)).inflate(
                    R.layout.toolscarfinderbutton, null);
            ToggleButton btnToolsCarFinder = (ToggleButton) child
                    .findViewById(R.id.myToggleButtoncarfinder);
            // VK: Here we need to check the current setting of car finder
            // and set button state appropriately
            if (PersistentStoreHelper
                    .getNonDetectorSetting(NonDetectorSettings.CAR_FINDER_SETTING
                            .name()) == CommunicationProtocol.DIR_MOB_IRAD_SETTING_ON) {
                btnToolsCarFinder.setChecked(true);
            } else {
                btnToolsCarFinder.setChecked(false);
            }
            break;

        case 2:
            child = (View) ((LayoutInflater) CobraApplication
                    .getAppContext().getSystemService(
                            Context.LAYOUT_INFLATER_SERVICE)).inflate(
                    R.layout.toolstrafficbutton, null);
            ToggleButton btnToolsTraffic = (ToggleButton) child
                    .findViewById(R.id.myToggleButtonTraffic);
            btnToolsTraffic.setChecked(PersistentStoreHelper
                    .getTrafficDisplayState());
            break;

        case 3:
            child = (View) ((LayoutInflater) CobraApplication
                    .getAppContext().getSystemService(
                            Context.LAYOUT_INFLATER_SERVICE)).inflate(
                    R.layout.toolsmenulegend, null);
            break;

        case 4:
            child = (View) ((LayoutInflater) CobraApplication
                    .getAppContext().getSystemService(
                            Context.LAYOUT_INFLATER_SERVICE)).inflate(
                    R.layout.toolsmusic, null);
            ToggleButton btnToolsMusic = (ToggleButton) child
                    .findViewById(R.id.myToggleButtonMusicControl);
            btnToolsMusic.setChecked(PersistentStoreHelper
                    .getMusicControlDisplayState());
            break;

        case 5:
            child = (View) ((LayoutInflater) CobraApplication
                    .getAppContext().getSystemService(
                            Context.LAYOUT_INFLATER_SERVICE)).inflate(
                    R.layout.toolsdirectionsmenu, null);

            break;
        }
    }
    child.setPadding(0, 0, 0, 0);
    child.setFocusable(false);
    child.setClickable(false);

    return child;
} 
```

这里有以下痕迹：`GridInit`肖像 - 好的。然后将方向更改为横向 - 仍然可以。然后回到肖像。它获得两次 View 。

```
02-26 09:17:14.960: I/RightSlideMenuGridAdapter(12207): getView0
02-26 09:17:14.970: I/RightSlideMenuGridAdapter(12207): getView1
02-26 09:17:14.985: I/RightSlideMenuGridAdapter(12207): getView2
02-26 09:17:15.005: I/RightSlideMenuGridAdapter(12207): getView3
02-26 09:17:15.015: I/RightSlideMenuGridAdapter(12207): getView4
02-26 09:17:15.030: I/RightSlideMenuGridAdapter(12207): getView5
02-26 09:17:20.660: I/RightSlideMenuGridView(12207): MenuSize:600
02-26 09:17:20.665: I/RightSlideMenuGridView(12207): MenuSize:600
02-26 09:17:20.680: I/RightSlideMenuGridAdapter(12207): getView0
02-26 09:17:20.685: I/RightSlideMenuGridAdapter(12207): getView1
02-26 09:17:20.690: I/RightSlideMenuGridAdapter(12207): getView2
02-26 09:17:20.695: I/RightSlideMenuGridAdapter(12207): getView3
02-26 09:17:20.700: I/RightSlideMenuGridAdapter(12207): getView4
02-26 09:17:20.705: I/RightSlideMenuGridAdapter(12207): getView5
02-26 09:17:20.825: I/RightSlideMenuGridAdapter(12207): getView0
02-26 09:17:20.835: I/RightSlideMenuGridAdapter(12207): getItemId0
02-26 09:17:28.680: I/RightSlideMenuGridView(12207): MenuSize:375
02-26 09:17:28.680: I/RightSlideMenuGridView(12207): MenuSize:375
02-26 09:17:28.700: I/RightSlideMenuGridAdapter(12207): getView0
02-26 09:17:28.705: I/RightSlideMenuGridAdapter(12207): getView1
02-26 09:17:28.710: I/RightSlideMenuGridAdapter(12207): getView2
02-26 09:17:28.715: I/RightSlideMenuGridAdapter(12207): getView3
02-26 09:17:28.905: I/RightSlideMenuGridAdapter(12207): getView0
02-26 09:17:28.935: I/RightSlideMenuGridAdapter(12207): getItemId0
02-26 09:17:28.940: I/RightSlideMenuGridAdapter(12207): getView5 
```

# javascript - IE 兼容性问题 动态加载 Jquery Ajax

> ID：15083605
> 
> 赞同：0
> 
> 时间：2013-02-26T07:26:16.447
> 
> 标签：javascript, jquery, internet-explorer, browser, compatibility

我正在使用 Jquery Ajax 生成动态垂直菜单。

该代码在 Chrome、Firefox 上运行良好，但无法使用 IE 加载。我是 IE 的 Web 开发和浏览器兼容性问题的新手。

演示链接位于 pumpit.in 查看左侧菜单中的加载程序。它没有出现在 IE 中。如果您重新加载链接，它可能会来。

使用的js代码是：

```
$.ajax({

    type: "POST",
    url: "Index.aspx/wmCommSubComm",
    data: jsonData,
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    async: false,
    cache: false,
    beforeSend: function () {
        // this is where we append a loading image
        $('#container_leftns').html('<img src="/images/loading123.gif" alt="Loading..." />');
        //return false;
    },
    success: function (msg) {
        //retData = msg.d;
        $('#container_leftns').html(msg.d);
        return false;
    },
    error: function () {
        // failed request; give feedback to user
        //$('#Attri_left-div').html('<p><strong>Oops!</strong> Try that again in a few moments.</p>');
    }
}); 
```

如果有人可以指导我，那将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:03:11.143

从您的 ajax 调用读取结果后，您将返回一些 HTML5 元素，例如“section”。它在 Firefox/Chrome 和 IE9 中运行良好。但是，低于 IE9 的版本不支持 HTML5 标签。他们无法识别 HTML5 标签。请注意，IE9 并不支持所有 HTML5。参考：[IE9 中的 HTML5 标签](http://www.impressivewebs.com/html5-support-ie9/ "IE9 中的 HTML5 标签")

对于低于 IE9 的版本，您可以通过包含 javascript fix [html5shim](https://code.google.com/p/html5shim/ "html5shim") / from github [html5shiv](https://github.com/aFarkas/html5shiv "github")来帮助他们识别 HTML5 标签。
-或-
改为将 HTML5 标记更改为 div。

关于修复加载图像，我认为我们会解决这个问题。

HTML - 将加载图像预加载到容器并显示它

```
<div id="container_leftns_loading" class="container_leftns">
    <img src="http://pumpit.in/images/loading123.gif" alt="Loading..." />
</div>
<div id="container_leftns"></div> 
```

JavaScript

```
$.ajax({
    type: "POST",
    url: "Index.aspx/wmCommSubComm",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    async: false,
    cache: false,
    beforeSend: function () {
        // use show instead and clear the leftns container
        $('#container_leftns_loading').show();
        $('#container_leftns').html('');
        //return false;
    },
    success: function (msg) {
        // hide the loading image when success
        $('#container_leftns_loading').hide();
        $('#container_leftns').html(msg.d);
        return false;
    },
    error: function () {
        // failed request; give feedback to user
        //$('#Attri_left-div').html('<p><strong>Oops!</strong> Try that again in a few moments.</p>');
    }
}); 
```

# javascript - 带有 View Finder d3.js 的条形图

> ID：15083607
> 
> 赞同：3
> 
> 时间：2013-02-26T07:26:26.987
> 
> 标签：javascript, d3.js, bar-chart, nvd3.js, brush

如何在 d3.js 中为条形图提供取景器功能。带有取景器的图表是这样 的[http://nvd3.org/ghpages/lineWithFocus.html](http://nvd3.org/ghpages/lineWithFocus.html) 我想要集成取景器功能的条形图是这样的 [http://nvd3.org/ghpages/multiBar.html](http://nvd3.org/ghpages/multiBar.html)。谁能帮我这个。我正在寻找整整一周，但什么也找不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-27T07:03:59.263

其实你可以，但你必须做到。它非常简单！

从 nvd3.org 下载文件 获取文件**“linePlusBarWithFocusChart.html”。** 我们必须对其进行编辑。

我提出的是删除线部分的数据，以便**只存在条形数据**。

**通过示例输入数据：**

```
var testdata = [{
        "key": "Quantity",
        "bar": true,
        "values": [
            [1136005200000, 1271000.0],
            [1138683600000, 1271000.0],
            [1141102800000, 1271000.0],
             etc. .]     
    }, {
        "key": "Price",        //Line chart data values are to be deleted.
        "values": [

        ]
    }] 
```

**最后要删除折线图的轴数据：**

```
chart.y2Axis
.tickFormat(function(d) {
   // return '$' + d3.format(',.2f')(d) //what was present in the example
  return '';
 });

chart.y4Axis
 .tickFormat(function(d) {
// return '$' + d3.format(',.2f')(d) //what was present in the example
 return '';
 }); 
```

您可以从文件 nvd3.js - Line num: 6871 中关闭**图例，**其中定义了 model:linePlusBarWithFocusChart。

> 把 showLegend=false;

**同型号下nvd3.js中的showTooltip函数下。**

```
 var showTooltip = function(e, offsetElement) {
    if (extent) {
        e.pointIndex += Math.ceil(extent[0]);
    }
    var left = e.pos[0] + ( offsetElement.offsetLeft || 0 ),
        top = e.pos[1] + ( offsetElement.offsetTop || 0),
        x = xAxis.tickFormat()(lines.x()(e.point, e.pointIndex)),
        y = (e.series.bar ? y1Axis : y1Axis).tickFormat()(lines.y()(e.point, e.pointIndex)),
        content = tooltip(e.series.key, x, y, e, chart);

    nv.tooltip.show([left, top], content, e.value < 0 ? 'n' : 's', null, offsetElement);
  }; 
```

现在，运行文件，你会发现只有条形图存在。这可能不是正确的方法，但它在可怕的情况下有所帮助。您可能还需要编辑掉一些不需要的元素。

随时提出任何疑问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T20:59:27.763

您要查找的内容尚未内置到库中。你最好的选择是看看：[https ://github.com/novus/nvd3/blob/master/src/models/lineWithFocusChart.js](https://github.com/novus/nvd3/blob/master/src/models/lineWithFocusChart.js)

克隆 repo 并构建您自己的模型 barWithFocusChart.js（我相信他们会喜欢拉取请求：]）

您可以找到有关如何在 d3.js 中构建条形字符的教程：http: [//mbostock.github.io/d3/tutorial/bar-2.html](http://mbostock.github.io/d3/tutorial/bar-2.html)

您可以阅读协调视图： [http ://square.github.io/crossfilter/](http://square.github.io/crossfilter/)

# xaml - 布局自动缩放 Windows 8

> ID：15083609
> 
> 赞同：0
> 
> 时间：2013-02-26T07:26:34.060
> 
> 标签：xaml, windows-8

我想做一个简单的布局：这是我的代码：

```
<ScrollViewer Grid.Column="1" Grid.Row="1" HorizontalScrollBarVisibility="Visible" VerticalScrollBarVisibility="Disabled" VerticalContentAlignment="Stretch">
    <StackPanel  Name="MainStack" Orientation="Horizontal">     
        <StackPanel Width="800" Height="800" Margin="140,0,10,0" Background="#FFAC3737"/>
            <StackPanel Width="400" Height="800" Margin="0,0,10,0">
                <StackPanel Width="400" Height="395" Background="Black" HorizontalAlignment="Left" Margin="0,0,0,10" />
                <StackPanel Width="400" Height="395" Background="Black" HorizontalAlignment="Left" />              
            </StackPanel>

            <StackPanel Width="400" Height="800" Margin="0,0,10,0">
                <StackPanel Width="400" Height="395" Background="Black" HorizontalAlignment="Left" Margin="0,0,0,10" />
                <StackPanel Width="400" Height="395" Background="Black" HorizontalAlignment="Left" />              
            </StackPanel>

            <StackPanel  Width="400" Height="800" Margin="0,0,10,0">
                <StackPanel Width="400" Height="395" Background="#FF5686AE" HorizontalAlignment="Left" Margin="0,0,0,10" />
                <StackPanel Width="400" Height="395" Background="#FF5583AA" HorizontalAlignment="Left" />              
            </StackPanel>

            <StackPanel Width="400" Height="800" Margin="0,0,10,0">
                <StackPanel Width="400" Height="395" Background="#FF5180A8" HorizontalAlignment="Left" Margin="0,0,0,10" />
                <StackPanel Width="400" Height="395" Background="#FF426E93" HorizontalAlignment="Left" />              
            </StackPanel>    
        </StackPanel>
    </StackPanel>
</ScrollViewer> 
```

现在它看起来像这样：

![布局](../Images/52c364d7e48a68039439f29cbf7ce817.png)

**将此布局扩展到所有分辨率的最佳方法是什么？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T20:10:11.973

**Grid**是一个很好的控件，用于指定如何使用可用空间。我喜欢使用 *（星号）大小并将每个 * 视为百分比。所以，如果我想让两列各占屏幕的 50%，它们的宽度将是 50* 和 50*（尽管从技术上讲，只要它们是相等的数字，它们就会占用相等的空间，所以 1* 和 1*会做同样的事情）。

**Grid**的问题在于它试图使用你给它的所有空间。因此，如果您在方形显示器（4:3 纵横比）上设计布局，然后将其显示在宽屏显示器（16:9 纵横比）上，您的所有方形都会变成矩形！

您*可以*通过监视大小何时更改并确保宽度始终是高度的某个百分比来在代码中处理此问题。但这是一个丑陋的解决方案，并留下了另一个挑战：字体大小。

很多时候，当您创建一个非常具体的布局时，您希望它能够完美地缩放到所有屏幕尺寸，包括文本。但仅仅因为**Grid**适应可用的空间并不意味着字体大小也会自动放大。也就是说，除非您使用**ViewBox**。

**ViewBox**是一个很棒的控件。您可以在其中放置任何具有特定宽度和高度的东西，并且随着**ViewBox**可用空间的增加或减少，它会自动缩放其中的所有内容。**ViewBox**为您保持正确的纵横比，并自动进行字体缩放！

所以，从一个**Grid**开始，给它一个指定的宽度和高度，然后划分行和列，使它看起来像你上面的图像。从您想要的任何宽度和高度开始，但我建议 1366 x 768，因为这是Windows 8*推荐的最低分辨率。最后，将***Grid**包装在**ViewBox**中，您就完成了！

```
<ViewBox>   
   <Grid Width="1366" Height="768">
   ...
   </Grid>
</ViewBox> 
```

开发支持、设计支持和更多的好处：http: [//bit.ly/winappsupport](http://bit.ly/winappsupport)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:42:06.110

我认为 StackPanels 不是复杂布局的最佳选择。我会在需要时为不同的列/行使用具有不同宽度/高度比的网格，并在需要时使用跨度列/行。然后，您将拥有每个分辨率的弹性布局。

# c# - 如何获取与时区无关的时间

> ID：15083611
> 
> 赞同：1
> 
> 时间：2013-02-26T07:26:50.743
> 
> 标签：c#, .net

我正在创建一个应用程序，我在其中发出部分基于时间戳的哈希值。但是我怎样才能在客户端获得与用户时区无关的时间，因为客户端和服务器很可能不在同一个时区？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T07:27:51.623

这听起来像你想要[`DateTime.UtcNow`](http://msdn.microsoft.com/en-us/library/system.datetime.utcnow.aspx)的。不过，这仍将基于本地系统时钟 - 如果您在任何类型的安全上下文中需要它，您很可能不想信任用户的时钟，而应该只信任服务器上的时间戳。这取决于你的要求，真的。

请注意，如果您正在*格式化*（例如用于通信）的结果`DateTime.UtcNow`，那么您应该在不变的文化中对其进行格式化。即使您指定了自定义格式，如果用户的文化是使用不同日历（例如伊斯兰日历）的文化，您最终会得到不同的结果。

或者，由于您*只*需要时间戳，请使用[`DateTime.Ticks`](http://msdn.microsoft.com/en-gb/library/system.datetime.ticks.aspx)（当然，在调用的结果上`DateTime.UtcNow`）。听起来你并不真正关心任何关于月、年、一天中的时间等的人类概念——你只想要一个任意的值来衡量时间，这就是你想要的`Ticks`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T07:28:16.430

将[DateTime.UtcNow](http://msdn.microsoft.com/en-us/library/system.datetime.utcnow.aspx)用于您的目的。

> 获取一个 DateTime 对象，该对象设置为此计算机上的当前日期和时间，表示为协调世界时 (UTC)。

# android - Java（Android）中的静态类 - 使用或不使用

> ID：15083618
> 
> 赞同：10
> 
> 时间：2013-02-26T07:27:07.240
> 
> 标签：android, class, static, android-activity

最近我开始用Java for Android 进行开发。

我的想法是创建一个静态类，它将在开始时加载大量内容并在应用程序的整个生命周期中存储结果。

我一直在阅读很多如何在活动之间共享对象的内容，我认为最好的方法是创建一个静态类。你怎么看？我应该使用另一种方法吗？我问是因为我在互联网上阅读了很多反对意见。

谢谢你。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-26T07:34:47.860

我假设您指的是一个类的*静态字段*，而不是*静态类*，正如 Wyzard 指出的那样，它是完全不同的东西。作为一般经验法则，在 Java 中将信息保存在静态字段中并不是一个好主意。这样做的原因是它阻止了实例化您存储在类中的任何内容的多个实例的能力。

在 Android 应用程序的特定情况下，处理与应用程序本身关联的数据存储问题的最佳方法是子类化`android.app.Application`该类并使用它来处理应用程序全局数据：

```
class FooApplication extends Application
{
    private String privData;

    public String getPrivData() {
        return privData;
    }
} 
```

然后你需要声明这个类是你的主应用程序类（而不是默认的`Application`）。在`application`条目中`AndroidManifest.xml`添加以下内容：

```
<application android:name="com.example.application.FooApplication"
             ...>
    ...
</application> 
```

`Context.getApplicationContext()`然后，您可以使用将成为子类实例的方法从应用程序内部的任何位置查找应用程序实例`Application`：

```
FooApplication app = (FooApplication)Context.getApplicationContext();
String privData = app.getPrivData(); 
```

根据您尝试查找“Application”子类的位置，您可能必须在没有“Context”的情况下调用“getApplicationContext()”：

```
FooApplication app = (FooApplication)getApplicationContext();
String privData = app.getPrivData(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T07:33:19.480

您的解决方案的问题在于，您基本上是在创建大量全局变量。有时这是不可避免的，但它具有全局变量总是存在的相同类型的问题——你很快就会得到难以阅读的代码，而这些代码实际上并没有很好的 OO 分解。您可以使用它，但要谨慎使用它——仅用于真正将在许多活动之间共享的重要数据结构。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T07:31:11.503

Android 提供了一个名为 的类`Application`，只要您的应用程序没有被杀死，它就不会被 gc'ed。使用这个类进行初始化，静态类作为容器有点难看，但我无法确定为什么会这样。

我只将它们用作常量的容器，例如不能表示为 EnumSets 的位掩码。

正如其他帖子提到的那样`SharedPreferences`：我认为存在偏好是为了存储值，而不是为了加载应用程序所需的结构。这些结构应该从表示或构成数据语义模型的构造中加载。

# java - 使用正则表达式从字符串中删除方括号？

> ID：15083621
> 
> 赞同：2
> 
> 时间：2013-02-26T07:27:15.040
> 
> 标签：java, regex

如何从 Java 中的给定字符串中删除所有方括号（“[]”）？

```
String s = "[abcdefg]";
s = s.replaceAll(regex, ""); 
```

在这种情况下将使用什么正则表达式？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T07:30:25.813

使用这个：

```
 String s = "[abcdefg]";
 String regex = "\\[|\\]";
 s = s.replaceAll(regex, "");
 System.out.println(s); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T07:29:17.350

你可以使用类似的东西来匹配它`"\\[([^\\]])\\]"`（打开小括号，一系列不是右括号的东西（封装在里面`()`供以后参考），然后是一个右括号），然后用匹配的内容替换整个匹配项（组 0）`()`块（第 1 组）

# opengl-es - 如何在opengl es2.0中直接渲染帧缓冲区？

> ID：15083623
> 
> 赞同：1
> 
> 时间：2013-02-26T07:27:45.830
> 
> 标签：opengl-es, render, framebuffer

我想创建一个程序，使用自己制作的所有 fbo 进行渲染。我知道这样渲染的常见程序： 1\. egl init。2.程序使用。3.输入纹理数据 4.swapbuffer。，但是当我把它改成fbo渲染时，发生了一些我不知道原因的事情。这是我添加的代码：

```
glGenFramebuffers(1,frame_buf);
    glBindFramebuffer(GL_FRAMEBUFFER, frame_buf);
    glGenRenderbuffers(1, &color_buf);
    glBindRenderbuffer(GL_RENDERBUFFER, s->color_buf);
    glRenderbufferStorage(GL_RENDERBUFFER, GL_RGBA, screen_width, screen_height);
    glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, s->color_buf); 
```

我想当我添加这个时，gl 将在我制作的绑定 fbo 中运行。但窗口中没有图像显示..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:22:54.303

如果您想直接呈现到 On-Screen ，请使用此代码而不是您使用的代码

```
glRenderbufferStorage(GL_RENDERBUFFER, GL_RGBA, screen_width, screen_height); 
```

改变

```
[eaglContext renderbufferStorage:GL_RENDERBUFFER fromDrawable:(id<EAGLDrawable>)eaglLayer]; 
```

glRenderbufferStorage() 绘制到屏幕外

如果您在 Android 中工作，请遵循此规则

```
#ifdef IOS 
```

glBindFramebuffer(GL_FRAMEBUFFER, s_FrameBuffer);

```
#elif ANDROID 
```

glBindFramebuffer(GL_FRAMEBUFFER, 0);

```
#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:42:12.897

当然没有图像出现。一般来说，您必须渲染到默认帧缓冲区才能使其可见。这就是可见图像所在的位置：默认帧缓冲区。

您可以对 FBO 进行中间渲染。但是您必须先将其 blit 或渲染到默认帧缓冲区，然后才能使用交换缓冲区调用。

# mysql - LINQ MySQL Group by Year, Month, Day select Year, Month, Day, Count

> ID：15083627
> 
> 赞同：5
> 
> 时间：2013-02-26T07:27:55.570
> 
> 标签：mysql, linq, date, count, group-by

```
 var res = from r in db.myTable
                  group r by new
                  {
                      Year = r.DateVal.Year,
                      Month = r.DateVal.Month,
                      Day = r.DateVal.Day
                  } into g
                  let Count = g.Count()
                  select new
                  {
                      Year = g.Key.Year,
                      Month = g.Key.Month,
                      Day = g.Key.Day,
                      Count = Count
                  }; 
```

不工作。

内部异常的摘录：

```
 InnerException: MySql.Data.MySqlClient.MySqlException
    HResult=-2147467259
    Message=Unknown column 'GroupBy1.K1' in 'field list' 
```

该查询生成以下 SQL：

```
SELECT
    1 AS `C1`, 
    `GroupBy1`.`K1` AS `C2`, 
    `GroupBy1`.`K2` AS `C3`, 
    `GroupBy1`.`K3` AS `C4`, 
    `GroupBy1`.`A1` AS `C5`
    FROM (SELECT
        COUNT(1) AS `A1`
        FROM `myTable` AS `Extent1`
        GROUP BY 
        YEAR(`Extent1`.`DateVal`), 
        MONTH(`Extent1`.`DateVal`), 
        DAY(`Extent1`.`DateVal`)) AS `GroupBy1` 
```

* * *

**

## Zach 建议的 Linq 查询：

**

```
 var test = from r in db.myTable
                   group r by new
                   {
                       Year = r.DateCol.Year,
                       Month = r.DateCol.Month,
                       Day = r.DateCol.Day
                   } into grp
                   select new
                   {
                       Year = grp.Key.Year,
                       Month = grp.Key.Month,
                       Day = grp.Key.Day,
                       Count = grp.Count()
                   };
        try
        {
            var test2 = test.ToList();
        }
        catch (Exception err)
        {

        } 
```

生成的 SQL：

```
 SELECT
    1 AS `C1`, 
    `GroupBy1`.`K1` AS `C2`, 
    `GroupBy1`.`K2` AS `C3`, 
    `GroupBy1`.`K3` AS `C4`, 
    `GroupBy1`.`A1` AS `C5`
    FROM (SELECT
    COUNT(1) AS `A1`
    FROM `myTable` AS `Extent1`
     GROUP BY 
    YEAR(`Extent1`.`DateCol`), 
    MONTH(`Extent1`.`DateCol`), 
    DAY(`Extent1`.`DateCol`)) AS `GroupBy1` 
```

捕获的异常：

```
System.Data.EntityCommandExecutionException was caught
  HResult=-2146232004
  Message=An error occurred while executing the command definition. See the inner exception for details.
  Source=System.Data.Entity
  StackTrace:
       at System.Data.EntityClient.EntityCommandDefinition.ExecuteStoreCommands(EntityCommand entityCommand, CommandBehavior behavior)
       at System.Data.Objects.Internal.ObjectQueryExecutionPlan.Execute[TResultType](ObjectContext context, ObjectParameterCollection parameterValues)
       at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
       at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator()
       at System.Data.Entity.Internal.Linq.InternalQuery`1.GetEnumerator()
       at System.Data.Entity.Infrastructure.DbQuery`1.System.Collections.Generic.IEnumerable<TResult>.GetEnumerator()
       at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
       at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
       at myNamespace._Default.fillChart(String username, Int32 tzClient) in e:\...[Path on my harddrive]..\Default.aspx.cs:line 102
  InnerException: MySql.Data.MySqlClient.MySqlException
       HResult=-2147467259
       Message=Unknown column 'GroupBy1.K1' in 'field list'
       Source=MySql.Data
       ErrorCode=-2147467259
       Number=1054
       StackTrace:
            at MySql.Data.MySqlClient.MySqlStream.ReadPacket()
            at MySql.Data.MySqlClient.NativeDriver.GetResult(Int32& affectedRow, Int64& insertedId)
            at MySql.Data.MySqlClient.Driver.GetResult(Int32 statementId, Int32& affectedRows, Int64& insertedId)
            at MySql.Data.MySqlClient.Driver.NextResult(Int32 statementId, Boolean force)
            at MySql.Data.MySqlClient.MySqlDataReader.NextResult()
            at MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior)
            at MySql.Data.Entity.EFMySqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
            at System.Data.Common.DbCommand.ExecuteReader(CommandBehavior behavior)
            at System.Data.EntityClient.EntityCommandDefinition.ExecuteStoreCommands(EntityCommand entityCommand, CommandBehavior behavior)
       InnerException: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-03T15:53:21.657

在 Count() 中添加条件：

```
g.Count(_ => true) 
```

最终解决方案将是：

```
var test = from r in db.myTable
               group r by new
               {
                   Year = r.DateCol.Year,
                   Month = r.DateCol.Month,
                   Day = r.DateCol.Day
               } into grp
               select new
               {
                   Year = grp.Key.Year,
                   Month = grp.Key.Month,
                   Day = grp.Key.Day,
                   Count = grp.Count(_ => true)
               };
    try
    {
        var test2 = test.ToList();
    }
    catch (Exception err)
    {

    } 
```

不知道如何，但这为我解决了问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T20:11:17.120

嗯，我可能会在您的其他代码的上下文之外考虑这个问题，但我认为不需要“let Count = g.Count()”语句。我认为这可能是 SQL 翻译搞砸的地方。将 g.Count() 函数向下移动到您在 select 子句中将其分配给 Count var 的分配。此外，您在 linq 中分配两个计数变量的事实看起来很麻烦......也许您尝试过这个，但我希望它有所帮助。

像这样...

```
var res = from r in db.myTable
              group r by new
              {
                  y = r.DateVal.Year,
                  m = r.DateVal.Month,
                  d = r.DateVal.Day
              } into g
              select new
              {
                  Year = g.Key.y,
                  Month = g.Key.m,
                  Day = g.Key.d,
                  Count = g.Count()
              }; 
```

# javascript - jqueryui 工具提示全局绑定

> ID：15083629
> 
> 赞同：0
> 
> 时间：2013-02-26T07:28:04.660
> 
> 标签：javascript, jquery, jquery-ui, tooltip, jquery-ui-tooltip

我在页面上有来来去去、隐藏和显示等动态元素。每次将元素附加到 dom 时，我不想绑定 tooltip()，而是设置一个全局处理程序（通过文档）。它可以工作，除了我想要一个用于多个“项目”的全局处理程序，这不起作用，我找不到一个很好的例子。这是我尝试过的：

```
$( document ).tooltip({ // works good if its the only one
    items: ":not(.btn-box-share)",
    ... // close, content, etc (methods)
});

$( document ).tooltip({ //! replaces the previous bind to document..
  items: '.btn-box-share',
  ... // different close, content, etc
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:44:56.063

我注意到项目选择器有一些奇怪的行为。我能够通过构建一个选择器对象然后将该对象传递给 items 属性来解决它。在这里可能值得一试。

您还可以使用 hasClass 或类似方法绕过项目并将逻辑构建到您的工具提示函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:13:03.847

```
 $( document ).tooltip({ //
            items: "://
            extraClass:"t3"
        }); 
```

使用额外的类选项并使用不同的样式定义来区分它们，无论样式是否不同。实例应该继承它自己的属性并为你工作。我没有尝试过你的特殊情况，但它应该工作。

# oracle - 将 SQL 文件保存到 Oracle 中的特定文件夹中

> ID：15083643
> 
> 赞同：1
> 
> 时间：2013-02-26T07:28:30.220
> 
> 标签：oracle, oracle11g, sqlplus

我正在使用`Oracle 11g`. 当我打开一个写命令的新 SQL 文件时

```
ed filename.sql 
```

在我的文件夹中创建了一个新文件`bin`，名称为`filename`但是，为了方便起见，我希望它们位于单独的文件夹中。我正在开发 3 个应用程序（仅适用于我的练习）。我希望它们为每个项目存储在不同的文件夹中。我尝试了以下所有方法，但都没有奏效，请告诉我如何将文件保存到特定文件夹中。

```
ed erp/logindetails.sql
ed 'erp/logindetails.sql'
ed "erp/logindetails.sql"
ed 'erp\logindetails.sql'
ed erp\logindetails.sql 
```

除了我使用的命令之外，这些命令工作并使用我输入时得到`""`的名称打开默认文本编辑器。使用上述任何命令都不会创建任何文件。`afiedt.buf``edit`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:45:12.437

您正在提供[`EDIT`](http://docs.oracle.com/cd/E11882_01/server.112/e16604/ch_twelve021.htm)文件的相对路径；因为您当前的工作目录似乎是`bin`SQL*Plus 目录所在的目录（这是 Windows，您是否正在运行设置工作目录的快捷方式，也许？）它会尝试创建一个类似的文件`%ORACLE_HOME%\bin\erp\logindetails.sql`，并且您不太可能在那里创建`erp`目录。提供目录的完整路径将起作用：

```
edit c:\users\dibya\projects\erp\logindetails.sql 
```

例如。

如文档中所述，`EDIT`将搜索现有文件，但这涉及设置环境变量 - 您必须在项目之间移动时对其进行更改。您可能会发现在操作系统中编辑文件并从 SQL*Plus 运行它们更容易。

您可能还可以使用单独的快捷方式为每个项目启动 SQL*Plus，每个快捷方式都将“开始”目录设置为项目特定的位置 - 然后`edit logindetails.sql`默认情况下会在正确的位置查找。或者，从命令提示符`cd`进入相关的项目特定目录并从那里启动 SQL*Plus，这实际上是快捷方式的作用。

# java - 我应该采取什么类型的列表来加入（内部）另一个表中的 2 个表

> ID：15083648
> 
> 赞同：2
> 
> 时间：2013-02-26T07:28:53.307
> 
> 标签：java, sql, hibernate, jakarta-ee

我有 3 张表**User, Product 和 Orders**。

```
USER:
-----+-----------+------------+---------+----------+-----------+
 u_id | username  | password   | contact | email   | city      |
------+-----------+------------+---------+---------+-----------+

PRODUCT:
+------+----------+--------------+------+--------------+
| p_id | category | listed_price | qty  | description  |
+------+----------+--------------+------+--------------+

ORDERS:
+------+--------+------+------+-----------+
| o_id | date   | u_id | p_Id | order_qty |
+------+--------+------+------+-----------+ 
```

我想按以下顺序将 User 表与 Product 以及 o_id（来自 ORDER）一起内联：

```
+-----------+-------+------+------+--------------+
| username  | email | p_id | o_id | listed_price |
+-----------+-------+------+------+--------------+ 
```

我的 SQL 查询如下：

```
productList = (List<Object[]>) session.createSQLQuery(
    "SELECT User.username, User.email, Orders.p_id, Orders.o_id, Product.listed_price " +
    "FROM Orders " +
    "INNER JOIN User " +
    "ON User.u_id = Orders.u_id" +
    "INNER JOIN Product " +
    "ON Product.p_id = Orders.p_id " +
    "WHERE Product.p_id = '"+p_id +"' " +
    "ORDER BY User.username").list(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:30:43.327

它会返回`List<Object[]>`。（对象数组列表），其中每个数组代表结果中的一行。值索引基于您的 select 语句。

在这里，您正在选择以下内容：

```
User.username, User.email, Orders.p_id, Orders.o_id, Product.listed_price 
```

因此，您将在每个对象数组中获得 5 个元素。其中第一个元素是用户名，第二个元素是电子邮件，依此类推......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:38:10.333

根据您的查询`"SELECT User.username, User.email, Orders.p_id, Orders.o_id, Product.listed_price"`，它将返回 `List<Object[]>`.

# java - 对并行线程组执行顺序操作

> ID：15083651
> 
> 赞同：0
> 
> 时间：2013-02-26T07:28:56.873
> 
> 标签：java, multithreading, ipc

我有以下场景需要尽快更改：
1\. 一组顺序线程执行（包含 3 个线程）
2\. 一组另一个顺序线程执行（包含 2 个线程）
3\. 一组并行线程执行（包含 9 个线程，以便正确应用线程的生产者-消费者方法）

**为什么我创建了这个场景？**

要首先执行特定线程（点 1：包含 3 个线程），在它们的处理完成后，我需要执行另外 2 个线程（点 2：包含 2 个线程）。当且仅当第 1 点和第 2 点被涵盖时，我才需要处理第 3 点。

最初，我需要执行所有线程来处理并行操作，但我放弃了这个想法，因为并行线程将同时执行。

对于上述情况，一切正常，直到出现问题。

**为什么我需要改变上述情况？**

有时，我得到一个异常，在并行线程的情况下可以很好地处理。如果我进入无法处理的顺序线程，则会出现相同的异常。因为，顺序线程的所有其他处理都处于等待状态，直到第一个完成。

所以，我需要利用并行线程的好处，但我选择这种方式很容易，这已经成为应用程序难以处理的情况。
所以，我需要创建这样一个场景，在这个场景中我应该以固定的顺序执行不同的并行线程。例如：

> Order-1st = 处理前 3 个并行线程
> Order-2nd = 处理接下来的 2 个并行线程
> Order-3rd = 处理接下来的 9 个并行线程

此外，上述情况有些限制，尽管我需要一个通用的解决方案。就像将来我想从 Order-1 中再添加 2 个线程，或者，如果我什至为任何顺序删除了一些线程，则组的序列应该按照需要执行。
java中是否有任何方法可以让我们创建一组并行线程，以便它们可以按照我们指定的任何顺序执行？

**编辑**
如果您可以帮助我修改，我有以下代码片段：

**// 1级**

```
Thread[] threads = new Thread[list1.size()];
int j=0;
for(list1.size()){
    Object delegator1 = new Object("Level-1");
    Thread th = new Thread(delegator1);
    threads[j]=th;
    th.start();

    j++;
}
for(Thread thread: threads){
    thread.join();
} 
```

**// 2级**

```
threads = new Thread[list2.size()];
j=0;
for(list2.size()){
    Object delegator2 = new Object("Level-2");
    Thread th = new Thread(delegator2);
    threads[j]=th;
    th.start();

    j++;
}
for(Thread thread: threads){
    thread.join();
} 
```

**// Level-3 & 4 --> Applied Producer-Consumer 使用等待通知工作正常。**

```
for(list3.size()){
    Object delegator3 = new Object("Level-3 & 4")
    Thread th = new Thread(delegator3);
    th.start();
} 
```

我希望这些不同的级别并行执行，但如果第一级完成，第二级应该随后执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:56:15.137

所以看起来你的订单实例有一些状态。状态为*Order-1*、 *Order-2*、*Order-3*和*Failed*。

您可以使用 Producer-Consumer-Queues 来实现这些状态（甚至是所有状态的单个队列）。根据您的操作结果，实例将移动到“下一个”队列，该队列由您需要的线程数量处理。

当使用单个队列时，一种可能的处理方式可能是包含计算的 Envelope-Object，例如

```
class Order1Processor implements Runnable {
     Object delegate;
     Order1Processor(Object delegate) { this.delegate = delegate; }
     public void run() { 
       try {
          // do the Order-1st processing
          doSomethingWith(delegate);
          // submit to next free Thread for Order-2nd processing
          submitToQueue(new Order2Processor(delegate));
       } catch (Throwable t) {
          // signal/handle failure
          submitToQueue(new FailedProcessor(delegate, t))
       }
 }

}  
class Order2Processor .. 
```

您现在可以使用任意数量的线程来处理您的订单。单个队列允许您根据需要自动分配尽可能多的资源，具体取决于当前要做的工作。如果您有一些必须更早或按特定顺序处理的订单或操作，您甚至可以使用 PriorityQueue。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T07:36:38.590

如果您只想等待一组线程完成，您可以在主线程中使用例如 CountDownLatch，初始化为线程数。然后主线程等待每个线程完成并通知闩锁。

重复下一组。

这最终解决了我的问题。

# c# - 修复小数点后的数字计数

> ID：15083658
> 
> 赞同：1
> 
> 时间：2013-02-26T07:29:31.150
> 
> 标签：c#, .net

在 C# 中，如何在**没有舍**入的情况下修复小数类型的点后位数。

例如：十进制坐标 = 47.483749999999816；（地理坐标的一部分）

我只需要在点后保留 6 位数：47.483749

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T07:34:24.507

你可能会使用

```
decimal truncated = Math.Truncate(coords * 1000000m) / 1000000m; 
```

或许

```
decimal truncated = Math.Truncate(coords / 0.000001m) * 0.000001m; 
```

在这两个中，我开始更喜欢后者。该数字`0.000001m`在内部表示为尾数`1`和 scale `6`，因此除以它实际上只是将小数点移动了六位。

最后乘以的方法`0.000001m`往往会给出小数点后正好六位数的结果，即使必要时尾随零也是如此。例如`coords = 1.23m`会导致`truncated`被`1.230000m`。

如评论中所述，上述技术都会导致**`OverflowException`**if`coords`太大（超过 百万分之一`decimal.MaxValue`）。

为了完整起见，这里有几个其他的解决方案：

```
decimal truncated = coords - coords % 0.000001m; 
```

这似乎工作正常。虽然尾随零的数量并不总是正确的，但我相信它会给出相同的结果。运算符`==`（或`decimal.Equals`）。

最后，您可以使用：

```
decimal truncated = Math.Round(coords - 0.0000005m, 6, MidpointRounding.AwayFromZero); 
```

但这仅适用于非负数`coords`。

如果您真正需要的是格式化`string`，请调用`ToString`重载 on `truncated`。但请注意，正如我所指出的，尾随零。如果你使用`.ToString("F6")`，应该总是有六位小数。

当然，您也可以使用字符串操作进行截断。它会是这样的：

```
string coordsString = coords.ToString(CultureInfo.InvariantCulture);
int idxOfPoint = coordsString.IndexOf(CultureInfo.InvariantCulture.NumberFormat.NumberDecimalSeparator);
if (idxOfPoint != -1 && coordsString.Length > 6 + 1 + idxOfPoint)
    coordsString = coordsString.Remove(6 + 1 + idxOfPoint);

// coordsString is now truncated correctly.
// If you need a decimal, use decimal.Parse(coordsString) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:36:08.400

非常棘手，不建议，但我真的不知道你在寻找什么解决方案（因为你正在避免`rounding`）：

```
double k = 47.483749999999816;
k = double.Parse(Regex.Replace(k.ToString(), @"(\d+\.\d{6})(.\d+)", x => x.Groups[1].Value));
Console.WriteLine(k); 
```

打印

```
47.483749 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:39:51.390

您可以使用

```
 decimal.Round( 47.483749999999816, 6) 
```

# c++ - c中的非阻塞输入

> ID：15083659
> 
> 赞同：2
> 
> 时间：2013-02-26T07:29:32.763
> 
> 标签：c++, c, fork

我想实现一个功能，使循环不断迭代并同时从用户那里获取输入（如果可用）。我已经实现了以下代码，但扫描变量“a”的值在打印时没有得到反映。

```
pid_t pid;
pid=fork();
if(pid == 0 )
{
    while(1)
    {
        printf("%d\n",a);
        sleep(1);
    }
}
else
{
    while(1)
    {
        scanf("%d",&a);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T07:32:55.487

那是因为你有两个使用 fork() 的独立进程。如果您想遵循这种方法，您将需要使用线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T08:42:46.397

当你创建 fork() 时，子进程将使用程序的共享文本区域创建，但创建的子进程的数据和堆栈部分与父进程不同，因此子进程将始终打印 a=1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:46:15.370

在这种情况下，您将获得两个不同的进程，每个进程都有自己的`a`.

您应该使用 Linux[管道](http://www.kernel.org/doc/man-pages/online/pages/man7/pipe.7.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T07:50:20.130

如果您使用 fcntl() 将您的标准输入标记为非阻塞，然后在循环中执行您需要的操作并尝试读取，它会更快，如果没有可用的数据，它将失败，如果是，它将数据存储在缓冲区中可用的。这将使用 100% 的 CPU。要检查数据是否可用，您应该使用 select()。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T07:58:26.880

您也可以使用共享内存，但您必须使用信号量来同步对共享内存段的访问。

# facebook - Facebook 提要对话框：允许用户选择目标页面或组

> ID：15083668
> 
> 赞同：3
> 
> 时间：2013-02-26T07:30:17.443
> 
> 标签：facebook, facebook-javascript-sdk

我正在通过 JavaScript 使用 Facebook 提要对话框：

```
var p = {
method: 'feed',
    name: 'Title',
    caption: 'Subtitle - 26/02/2013',
    description: 'My text',
    link: window.location.href
};
FB.ui(p) 
```

有没有办法让用户选择供稿的目标页面？通常，生成的对话框允许用户在自己的墙上发布消息。我想启用目的地选择，例如：

> 在我的墙上或在我的页面上或进入一个组

与随后的页面或组选择，就像在 Facebook 网站上发生的那样。有没有办法显示这种选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:34:18.370

在提要对话框中有一个选项用于选择目的地。请检查 [http://developers.facebook.com/docs/reference/dialogs/feed/](http://developers.facebook.com/docs/reference/dialogs/feed/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T10:53:59.420

JavaScript SDK 中包含的内置共享对话框不包含此功能。相反，您需要使用所需的选项创建自己的下拉列表，然后在下方有共享按钮。然后，您需要找到此下拉列表的值并将其添加到函数的`to`参数中`FB.ui`：

```
<select id="to_user">
 <option value="{user_id}">My wall</option>
 <option value="{page_id}">My page</option>
 <option value="{group_id}">My group</option>
</select>

<script>
var p = {
    method: 'feed',
    to: $('#to_user').val(),
    name: 'Title',
    caption: 'Subtitle - 26/02/2013',
    description: 'My text',
    link: window.location.href
};
FB.ui(p);
</script> 
```

# php - 为返回数组的函数编写 PHPUnit 测试

> ID：15083672
> 
> 赞同：4
> 
> 时间：2013-02-26T07:30:28.403
> 
> 标签：php, unit-testing, phpunit

现在有一天我在玩[PHPUnit](http://www.phpunit.de/manual/current/en/)。我已经阅读了它的文档，但我无法很好地理解它。让我解释一下我的情况。

我在一个类中有一个函数，它需要三个参数`1 array, 2 some string, 3 a class object`。此函数通过将第二个参数作为数组的索引并将结果作为该索引的对象来返回数组。我的功能如下

```
 public function construct($testArray, $test,$analysisResult) {
    $postedTest = explode('_', $test);
    $testName = end($postedTest);
    $postedTest = implode("_", array_slice($postedTest, 0, -1));
    if (in_array($postedTest, array_keys($testArray))) {
        $testArray[$postedTest][$testName] = $analysisResult;
    } else {
        $testArray[$postedTest] = array($testName => $analysisResult);
    }
    return $testArray;
} 
```

如果我调用这个函数

```
 $constructObj = new Application_Model_ConstructTree();
    $test=$this->getMockForAbstractClass('Abstract_Result');
    $test->level = "Error";
    $test->infoText = "Not Immplemented";
    $testArray = Array('databaseschema' => Array('Database' => $test));

    $result = $constructObj->construct($testArray,"Database",$test); 
```

该函数返回数组，如

```
Array
(
 [databaseschema] => Array
    (
        [Database] => AnalysisResult Object
            (
                [isRepairable] => 1
                [level] => Error
                [infoText] => Not Implemented
            )

    )
) 
```

现在我想编写一个 PHPUnit 测试来检查对象的属性是否`isRepairable, level and infoText`存在并且不为空。我有一个想法，`assertNotEmpty`可以`assertAttributeEmpty`做一些事情，但我无法理解如何去做。

我的测试看起来像

```
public function testcontruct() {
    $constructObj = new Application_Model_ConstructTree();
    $test=$this->getMockForAbstractClass('Abstract_Result');
    $test->level = "Error";
    $test->infoText = "Not Immplemented";
    $testArray = Array('databaseschema' => Array('Database' => $test));

    $result = $constructObj->construct($testArray,"Database",$test);

    $this->assertNotCount(0, $result);
    $this->assertNotContains('databaseschema', $result);
} 
```

任何人都可以请指导:-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T08:05:33.753

`assertContains`最后一行应该是`assertNotContains`. 测试的下一步是：

```
$this->assertContains('Database', $result['databaseschema']);
$this->assertAttributeNotEmpty('isRepairable', $result['databaseschema']['Database']);
$this->assertAttributeNotEmpty('level', $result['databaseschema']['Database']);
$this->assertAttributeNotEmpty('infoText', $result['databaseschema']['Database']); 
```

`assertAttributeNotEmpty`将属性名称和对象作为参数，就像`assertContains`数组键和数组一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-01T14:39:59.660

我会使用 assertArrayHasKey 即：

```
$this->assertArrayHasKey($key, $array); 
```

因为你需要测试一个复杂的结构，我要做的是去每个预期的元素并断言它们在那里，并且它们不是空的 assertNotEmpty()

我发现这是一个很好的例子，类似于你的问题：

[http://opensourceame.com/asserting-that-an-array-contains-another-array-in-phpunit/](http://opensourceame.com/asserting-that-an-array-contains-another-array-in-phpunit/)

# android - 每次我进行一些更改时，都会出现 android lint 错误......为什么会这样？

> ID：15083673
> 
> 赞同：2
> 
> 时间：2013-02-26T07:30:28.773
> 
> 标签：android, robotium, android-lint

我在eclipse中使用robotium工具来创建测试用例。我的疑问是每次我对任何文件进行任何更改时都会出现错误，例如

```
Call requires API level 3 (current min is 1)... Android Lint Problem 
```

当我右键单击项目然后android工具->清除lint标记时，所有这些错误都会消失。但我不明白为什么在文件中进行任何更改时会出现这样的lint错误？这些lint错误的原因是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T07:34:31.353

您使用的功能仅在较新的 API 级别中可用，而不是您在 android 清单文件中设置的最小值。

如果设置`<uses-sdk android:minSdkVersion="1" />`，则不应使用 API 级别 3 中引入的任何类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T18:20:07.937

我在使用 Robotium 和棉绒标记时遇到了同样的问题。我建议不要修改任何清单文件，而是为使用 Robotium 的项目禁用 minSDK lint 检查。

“Clear Lint Markers”暂时消除了错误，但每次我在受影响的项目中保存文件时，它都会再次出现。

这对我有用：

> 右键单击项目 -> 属性 -> Android Lint 首选项
> 
> 在搜索框中搜索“minSdk”
> 
> 点击“UsesMinSdkAttributes”
> 
> 单击底部的“全部忽略”按钮。清理并重建项目，Eclipse/ADT 将不再对您的项目运行 minSdk 的 lint 检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:34:24.303

请参考此[链接](http://tools.android.com/tips/lint)。正如它所说，

Android Lint 是 ADT 16（和 Tools 16）中引入的一个新工具，它可以扫描 Android 项目源中的潜在错误。它既可以作为命令行工具使用，也可以与 Eclipse（如下所述）和 IntelliJ（详细信息）集成。该架构有意独立于 IDE，因此有望与其他 IDE、其他构建工具以及持续集成系统集成。

# javascript - 本地人可以注入到带有 ng-controller 的控制器集中吗？

> ID：15083675
> 
> 赞同：5
> 
> 时间：2013-02-26T07:30:38.527
> 
> 标签：javascript, angularjs

参考下面的示例，有没有办法使用 myCtrl 代替 myCtrl2，将参数作为本地而不是附加到 $scope 传递？

[$controller](http://docs.angularjs.org/api/ng.%24controller)服务完全执行包装现有控制器所需的操作，但无法从模板访问它。

```
<div ng-app>

  <script type="text/ng-template" id="/tpl.html">
    value of y: {{y}}
  </script>

  <div 
    ng-repeat='x in [1,2,3]' 
    ng-controller='myCtrl2'
    ng-include="'/tpl.html'">
  </div>

</div> 
```

```
function myCtrl($scope, x){
  $scope.y = x * 20;
}

function myCtrl2($scope){
  $scope.y = $scope.x * 20;
} 
```

[http://jsfiddle.net/4Zmym/16/](http://jsfiddle.net/4Zmym/16/)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-26T08:45:15.010

我无法从您的问题中*完全*看出您正在寻找什么，但您可以尝试创建自己的指令（指令的修改版本[）`ngController`可以](https://github.com/angular/angular.js/blob/master/src/ng/directive/ngController.js)指定控制器注入：

```
app.directive('myController', function($controller) {
  return {
    scope: true,
    link: function(scope, elem, attrs) {
      var locals = scope.$eval(attrs.locals);
      angular.extend(locals, {$scope: scope});
      $controller(attrs.myController, locals);
    }
  };
}); 
```

你会像这样使用它：

```
<div my-controller='MainController' locals='{x: "test", y: 42}'></div> 
```

这是一个演示该技术的 JsFiddle：http: [//jsfiddle.net/BinaryMuse/qBZZk/](http://jsfiddle.net/BinaryMuse/qBZZk/)

# sql - 可以使用例如 Jailer 提取完整的数据依赖树吗？

> ID：15083680
> 
> 赞同：0
> 
> 时间：2013-02-26T07:31:02.357
> 
> 标签：sql, db2, data-extraction

我需要填充我们的 IBM DB2 性能测试数据库。我想从我们的一个测试关系数据库中获取一行及其所有依赖项，然后将行复制/粘贴到脚本中。

是否可以使用例如 Jailer 从数据库及其所有依赖项中提取一行？即，它将提取该行的 FK 中的所有行，以及该行的 PK 是其他行中的 FK 的那些行。我一直在看 Jailer，但我只能提取一个表的行，而不是它的所有依赖项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:50:26.510

显然这是可能的，通过删除默认检查的相关依赖项“禁用”选项。

# vb.net - VB.Net同时播放mp3

> ID：15083686
> 
> 赞同：0
> 
> 时间：2013-02-26T07:31:13.987
> 
> 标签：vb.net, audio, mp3, audio-player

我一直想知道这一点，我尝试了从不同站点获得的多个建议。我在这里有我的代码，但它不起作用。

```
Private Declare Function mciSendString Lib "winmm.dll" Alias "mciSendStringA" _
(ByVal lpstrCommand As String, ByVal lpstrReturnString As String, ByVal _
uReturnLength As Integer, ByVal hwndCallback As Integer) As Integer

Private Sub Button3_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button3.Click
Dim fileName As String

    FileName = Chr(34) & (Button1.Text) & Chr(34)
    mciSendString("open " & FileName & " alias myDevice", Nothing, 0, 0)
    mciSendString("play myDevice", Nothing, 0, 0)

    FileName = Chr(34) & (Button2.Text) & Chr(34)
    mciSendString("open " & FileName & " alias myDevice", Nothing, 0, 0)
    mciSendString("play myDevice", Nothing, 0, 0) 
```

此代码仅播放第一首歌曲，不会播放第二首歌曲...

我正在考虑创建另一个类似于上面的函数但名称不同但仍然没有运气的函数。

```
Private Declare Function mciSendString2 Lib "winmm.dll" Alias "mciSendStringA" _
(ByVal lpstrCommand As String, ByVal lpstrReturnString As String, ByVal _
uReturnLength As Integer, ByVal hwndCallback As Integer) As Integer 
```

任何想法？或者是否可以同时播放多个 mp3？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:10:32.660

虽然我自己正在处理一个不同的问题，但我在搜索中遇到了这个问题，并且可以告诉你它无法同时播放 2 个文件的原因是因为你的别名对两者都是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T13:16:00.040

这种方法只在开发过程中对我很有效，但是当我通过 mcisendstring 发出打开命令时，我安装的大多数计算机都会崩溃。我还没弄清楚为什么。这是我的代码。也许它会帮助某人，也许有人可以弄清楚我做错了什么。我在从 64 位开发机器上运行 32 位应用程序时遇到问题。

```
Imports System.Runtime.InteropServices
Imports System.Text

Public Class MediaPlayerClass
    <DllImport("winmm.dll")> _
    Private Shared Function mciSendString(ByVal command As String, ByVal buffer As StringBuilder, ByVal bufferSize As Integer, ByVal hwndCallback As IntPtr) As Integer
    End Function
<DllImport("winmm.dll")> _
Private Shared Function mciGetErrorString(errCode As Integer, ByVal errMsg As StringBuilder, bufferSize As Integer) As Integer
End Function

<DllImport("kernel32.dll", SetLastError:=True, CharSet:=CharSet.Auto)> _
Public Shared Function GetShortPathName(ByVal longPath As String, _
      <MarshalAs(UnmanagedType.LPTStr)> ByVal ShortPath As System.Text.StringBuilder, _
      <MarshalAs(Runtime.InteropServices.UnmanagedType.U4)> ByVal bufferSize As Integer) As Integer
End Function

Private _filename As String
Private _MediaAlias As String
Private _Length As TimeSpan
Private _err As Integer
Public Property PlaylistId As Integer = 0
Private _OriginalVolume As Integer = 1000

Function ShortPathName(ByVal Path As String) As String
    Dim sb As New System.Text.StringBuilder(1024)

    Dim tempVal As Integer = GetShortPathName(Path, sb, 1024)
    If tempVal <> 0 Then
        Dim Result As String = sb.ToString()
        Return Result
    Else
        Throw New Exception("Failed to return a short path")
    End If
End Function

Public Sub New(Filename As String, MediaAlias As String)
    _filename = ShortPathName(Filename)
    _MediaAlias = MediaAlias.Replace(" ", "_")
    '_Length = GetLength()

    Try
        My.Application.Log.WriteEntry("MediaPlayerClass.New - calling MCI OPEN")
       ' here is where it crashes
        _err = mciSendString("open """ & _filename & """ alias " & MediaAlias, Nothing, 0, 0)
    Catch ex As Exception
        MsgBox(ex.ToString & vbCrLf & GetLastErrorMessage())
    End Try

End Sub

Public Sub NewMP3(Filename As String)
    Me.StopIt()
    Me.CloseIt()
    _filename = Filename

    Try
        My.Application.Log.WriteEntry("MediaPlayerClass.NewMP3 - calling MCI OPEN ")
        _err = mciSendString("open """ & Filename & """ alias " & _MediaAlias, Nothing, 0, 0)
    Catch ex As Exception
        MsgBox(ex.ToString & vbCrLf & GetLastErrorMessage())
    End Try

End Sub

Public ReadOnly Property Length As TimeSpan
    Get
        Return _length
    End Get
End Property

Private Function GetLength() As TimeSpan
    Dim lengthBuf As New StringBuilder(32)

    Try
        My.Application.Log.WriteEntry("MediaPlayerClass.GetLength - calling MCI OPEN")
        _err = mciSendString("open """ & _filename & """ type waveaudio alias " & _MediaAlias, Nothing, 0, 0)
    Catch ex As Exception
        MsgBox(ex.ToString & vbCrLf & GetLastErrorMessage())
    End Try

    ' Get the duration of the music
    Try
        _err = mciSendString("status wave length", lengthBuf, lengthBuf.Capacity, 0)
    Catch ex As Exception
        MsgBox(ex.ToString & vbCrLf & GetLastErrorMessage())
    End Try

    'mciSendString("close wave", Nothing, 0, 0)
    Dim len As Integer = Integer.TryParse(lengthBuf.ToString, len)
    Dim ts As TimeSpan = TimeSpan.FromMilliseconds(len)

    Return ts
End Function

Public Function PlayIt(Optional WaitUntilFinishedPlaying As Boolean = False) As Integer
    Try
        My.Application.Log.WriteEntry("MediaPlayerClass.PlayIt - calling MCI PLAY")
        _err = mciSendString("play " & _MediaAlias, Nothing, 0, IntPtr.Zero)
    Catch ex As Exception
        MsgBox(ex.ToString)
    End Try

    While WaitUntilFinishedPlaying
        If IsPlaying() Then
            Threading.Thread.Sleep(250)
        Else
            Exit While
        End If
    End While

    Return _err
End Function

Public Function PauseIt() As Integer
    _err = mciSendString("pause " & _MediaAlias, Nothing, 0, IntPtr.Zero)
    Return _err
End Function

Public Function ResumeIt() As Integer
    _err = mciSendString("resume " & _MediaAlias, Nothing, 0, IntPtr.Zero)
    Return _err
End Function

Public Function StopIt() As Boolean
    _err = mciSendString("stop " & _MediaAlias, Nothing, 0, IntPtr.Zero)
    Return _err
End Function

Public Function CloseIt() As Boolean
    _err = mciSendString("close " & _MediaAlias, Nothing, 0, IntPtr.Zero)
    Return _err
End Function

Public Function IsPlaying() As Boolean
    Dim returnData As New StringBuilder(128)
    _err = mciSendString("status " & _MediaAlias & " mode", returnData, 128, IntPtr.Zero)
    Return (returnData.Length = 7 AndAlso returnData.ToString.Substring(0, 7) = "playing")
End Function

Public Function SetVolume(vol As Integer) As Integer
    _err = -1
    If vol >= 0 And vol <= 1000 Then
        _err = mciSendString("setaudio " & _MediaAlias & " volume to " & vol.ToString, Nothing, 0, IntPtr.Zero)
    End If
    Return _err
End Function

Public Sub FadeOutAndPause()
    _OriginalVolume = GetVolume()
    For x As Integer = 30 To 1 Step -1
        Me.SetVolume(Int(x / 30 * _OriginalVolume))
        Threading.Thread.Sleep(100)
    Next
    Me.PauseIt()
End Sub

Public Sub PlayAndFadeIn()
    Me.PlayIt()
    For x As Integer = 1 To 30 Step 1
        Me.SetVolume(Int(x / 30 * _OriginalVolume))
        Threading.Thread.Sleep(100)
    Next
End Sub

Public Function GetVolume() As Integer
    Dim returnData As New StringBuilder(128)
    _err = mciSendString("status " & _MediaAlias & " volume", returnData, 128, IntPtr.Zero)
    'MsgBox(returnData.ToString)
    If _err = 0 Then
        Return CInt(returnData.ToString)
    Else
        Return 1000
    End If

End Function

Public Function SetBalance(bal As Integer) As Integer
    If bal >= 0 AndAlso bal <= 1000 Then
        _err = mciSendString("setaudio " & _MediaAlias & " left volume to " + (1000 - bal).ToString, Nothing, 0, IntPtr.Zero)
        _err = mciSendString("setaudio " & _MediaAlias & " right volume to " + bal.ToString, Nothing, 0, IntPtr.Zero)
    End If
    Return _err
End Function

Public Function GetLastErrorMessage() As String
    Dim returnData As New StringBuilder(128)
    _err = mciGetErrorString(_err, returnData, 128)
    Return returnData.ToString.Trim

    End Function

    Protected Overrides Sub Finalize()
        MyBase.Finalize()
        CloseIt()
    End Sub
End Class 
```

# extjs - 如何更改 sencha touch 2 应用程序的所有面板和容器的背景颜色

> ID：15083690
> 
> 赞同：0
> 
> 时间：2013-02-26T07:31:41.787
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我正在尝试更改 sencha 应用程序的主题，我想知道如何更改 sencha 触摸应用程序的所有面板和容器的背景颜色，例如[touchstyle 应用程序](http://dev.sencha.com/deploy/touch/examples/production/touchstyle/)

我更改了标题栏、选项卡面板颜色，但我不知道如何更改面板和容器的颜色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T07:42:06.730

设置样式配置。

```
style: {
    background: 'red'
} 
```

编辑：您可以`cls`为您的面板设置配置。例如：`cls: red-bg`在你的样式表中：

```
.red-bg .x-panel-body{
    background-color : red !important;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-15T06:52:42.227

两种方式：

首先（直接在面板中更改）：

```
new Ext.Panel({
    width:200,
    height:200,
    bodyStyle:{"background-color":"red"}, 
    renderTo: document.body
}); 
```

第二（添加 CSS 类并在 Panel 的 'bodyCssClass' 属性中使用它）：

```
.x-panel-body{
background-color: blue} 
```

# android-mediaplayer - 单击按钮时，我的 android 应用程序无法再次播放

> ID：15083692
> 
> 赞同：0
> 
> 时间：2013-02-26T07:31:50.493
> 
> 标签：android-mediaplayer

我是android编程的新手。我的第一个应用程序是一个 android 媒体播放器。

我建立了两个按钮：一个用于播放歌曲，另一个用于停止它。

我的应用程序运行正常；问题是我可以播放和停止它，**但我不能再次播放这首歌。**

我尝试使用`setDataSource()`，但它触发了错误。

这是代码；文件在`raw/song.mp3`

```
 package com.example.test6;

    import android.media.MediaPlayer;
    import android.os.Bundle;
    import android.app.Activity;
    import android.view.View;
    import android.widget.Button;

    public class MainActivity extends Activity {

    MediaPlayer mp; 

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

     mp = MediaPlayer.create(this,R.raw.song);

    setContentView(R.layout.activity_main);
     final Button btnPlay = (Button)this.findViewById(R.id.button1);
    final Button btnStop = (Button)this.findViewById(R.id.button2);

    btnPlay.setOnClickListener(new View.OnClickListener() 
    {

        @Override
        public void onClick(View v) 
        {
                mp.start();

        }
    });

    btnStop.setOnClickListener(new View.OnClickListener() 
    {

        @Override
        public void onClick(View v) 
        {       
                mp.stop();
                mp.reset();
        if(mp.isPlaying()){
                mp.stop();
                }else{

        mp.setDataSource("res/raw/song.mp3");
            mp.prepare();
            mp.start();                    
        }               
    }); 
   }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:08:58.767

首先，如果您像这样进行创建，则不需要手动设置数据源：`MediaPlayer.create(this, R.raw.song);`此外，在这种情况下，您不需要调用`prepare()`，因为`MediaPlayer.create()`这样做会为您服务。

我会建议这种方法（假设你不希望开始按钮在它已经播放的情况下做任何事情）：

开始按钮监听器：

```
if (mp==null) {
     mp = MediaPlayer.create(this, R.raw.song);
}
if (!mp.isPlaying()) {
     mp.start();
} 
```

停止按钮监听器：

```
if (mp!=null) {
     if (mp.isPlaying()) {
          mp.stop();
     }
     mp.release();
     mp = null;
} 
```

我没有测试这个，所以我期待你的回应

# django - 如何开始使用 Python 和 xlrd/django 脚本创建 Web 应用程序？

> ID：15083695
> 
> 赞同：0
> 
> 时间：2013-02-26T07:32:01.150
> 
> 标签：django, python-2.7, xlrd

我不知道从哪里开始，就像我开始研究 PHP、Ruby 或其他什么一样，但这是我想做的事情：

我有一个 Python 脚本，它采用预先格式化的 Excel 文档并使用 xlrd 和 Django，我输出了一个基于模板 HTML 页面的格式良好的 HTML 页面。

但目前在我的团队中，我是唯一可以使用这个 Python 脚本的人，因为我们的设置，我想通过创建一个 Web 应用程序来简化这个过程，该应用程序有几个下拉菜单来指定要运行的脚本，然后让我上传 .xls 文件，此时会自动生成 HTML 文件并创建下载链接或以某种方式吐出 HTML 文件。

有人对我应该如何开始这个项目有任何指导吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:33:41.943

我建议好好阅读 django[文档](https://docs.djangoproject.com/en/1.4/)，并可能通读[教程](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)。

Django 的文档非常好。

如果您只是想破解您拥有的代码，那么可能阅读以下内容以获得一些核心 django 功能的非常基本的概述 -

*   [网址调度程序](https://docs.djangoproject.com/en/1.4/topics/http/urls/)
*   [意见](https://docs.djangoproject.com/en/1.4/topics/http/views/)
*   [楷模](https://docs.djangoproject.com/en/1.4/topics/db/models/)
*   [形式](https://docs.djangoproject.com/en/1.4/topics/forms/)
*   [模板](https://docs.djangoproject.com/en/1.4/topics/templates/)

使用您的应用程序，url 调度程序会将请求传递给视图，该视图将使用模板呈现您的 excel 文档。

您需要一个表单来处理您的用户参数和一个视图来呈现和处理表单并呈现 excel 模板。

# android - 如何在android中按字母顺序对arrayList进行排序，最后是数字？

> ID：15083699
> 
> 赞同：0
> 
> 时间：2013-02-26T07:32:17.823
> 
> 标签：android, sorting

我有一个 ArrayList，我想对内容进行排序，以便首先对任何带有英文字母的内容进行排序，然后对任何带有数字和非英文字符的内容进行排序。

例如： A, B , C ... Z, 1 , 2, 3 ... 9, _test1,_2, ...

目前我只知道如何按字母顺序对项目进行排序。建议？

```
class Comparator implements Comparator<Name> {
    @Override
    public int compare(Name name1, Name name2) {            
        return name1.getName().toLowerCase().compareTo(name2.getName().toLowerCase());
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T08:19:02.007

您可以使用 Comparator 的以下实现：

```
 Comparator<String> comparator = new Comparator<String>() {

        @Override
        public int compare(String lhs, String rhs) {
            boolean lhsStartsWithLetter = Character.isLetter(lhs.charAt(0));
            boolean rhsStartsWithLetter = Character.isLetter(rhs.charAt(0));

            if ((lhsStartsWithLetter && rhsStartsWithLetter) || (!lhsStartsWithLetter && !rhsStartsWithLetter)) {
                // they both start with letters or not-a-letters
                return lhs.compareTo(lhs);
            } else if (lhsStartsWithLetter) {
                // the first string starts with letter and the second one is not
                return -1;
            } else {
                // the second string starts with letter and the first one is not
                return 1;
            }
        }
    }; 
```

# javascript - 当两个对象相互依赖时？如何解耦它们？

> ID：15083702
> 
> 赞同：0
> 
> 时间：2013-02-26T07:32:34.797
> 
> 标签：javascript, object, decoupling

有点笼统的问题，但我不知道该怎么做，谷歌让我失望了！

我正在尝试用我构建的画布重写网格数组冲突。

现在有一个网格对象和一个块对象。网格`cellSize`取决于块的大小，`size`反之亦然。原因是要计算出将块存储到其中的网格数组，我必须首先弄清楚如何构建它，这取决于块的大小。例子，

```
var grid = new grid();

function grid() {
    this.cellSize = 50;
    this.cellsX = canvas.width / this.cellSize;
    this.cellsY = canvas.height / this.cellSize;
    this.buildGrid = function() {
        var arr = new Array(this.cellsX);
        for(var i = 0; i < arr.length; ++i) {
            arr[i] = new Array(this.cellsY);
        }
        return arr;
    };
    this.arr = this.buildGrid();
    this.getGridCoords = function(i) {
        return Math.floor(i / this.cellSize);
    };
}

function block() {
    this.size = grid.cellSize; // size of the block is same as cellSize
    this.x = 0;
    this.y = 0 - (this.size * 1.5);
    this.baseVelocity = 1;
    this.velocity = this.baseVelocity;
    this.update = function() {
        this.y += this.velocity;
    };
} 
```

以我的方式进行操作将两个对象耦合在一起，据我所知，这是一件坏事。如果有意义，我如何确保两个变量的大小相同而不耦合对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:48:08.853

真正的问题是您的 block() 函数直接从 grid() 的实例中获取值。

如果您希望您的 block() 函数可重用和解耦，它就像在构造期间更改 block() 以获取大小一样简单。

```
arr[i] = new block({size: this.cellSize}); 
```

# javascript - 获取当前网址

> ID：15083706
> 
> 赞同：1
> 
> 时间：2013-02-26T07:32:45.907
> 
> 标签：javascript, browser-addons

我试图制作一个附加组件来发送我打开的网站的 URL，

```
function xxxx() 
{
a = "mailto:xxx@xxxx.com?subject= xxxxxxxxxxxxxxxxxx" + document.title;
a += "&body=" + escape("url" + window.location.href);
window.location.href = a;
} 
```

但这似乎是

"chrome://browser/content/browser.xul" << 覆盖在 chrome.manifest

是否有任何解决方案或任何其他方式来解决该问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:36:11.330

```
document.URL 
```

或者

```
location.href 
```

以获得更多浏览器支持。

[MDN 上的 window.location 对象](https://developer.mozilla.org/en-US/docs/DOM/window.location)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T07:38:20.580

在 jquery 中使用它

```
$(location).attr('href'); 
```

或在 Javascript 中

```
alert(window.location); 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-26T07:34:42.690

对于大多数浏览器：

```
document.URL 
```

对于某些版本，如果 FF：

```
window.location.href 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-26T07:43:50.983

以下是一些使用 Javascript 和 JQuery 检索 URL 路径的方法

```
//jquery
$(location).attr('href');

//pure javascript
var pathname = window.location.pathname; 
```

有关更多信息，请参阅此博客文章：[http ://www.jquery4u.com/snippets/jquery-current-page-url/](http://www.jquery4u.com/snippets/jquery-current-page-url/)

谢谢，

拉胡尔·帕蒂尔

# shell - 将批处理文件转换为 shell 脚本文件

> ID：15083717
> 
> 赞同：0
> 
> 时间：2013-02-26T07:33:20.327
> 
> 标签：shell

我有批处理文件，但我不知道 shell 脚本。有人可以在这里帮忙吗。

```
      @echo 关闭
      回显“程序名称：”%0
      rem echo "下一个参数：" %1
      echo "下一个参数：" "用户名/密码"
      回显“用户 ID：”%2
      回显“用户名：”%3
      echo "请求 ID：" %4
      echo "文件名:" %5
      回显“实体名称：”%6
      echo "电子邮件地址：" %7
      echo "提取 ID：" %8
      echo "路径名:" %9

 `cd %9

 echo "Process Output files"
 IF NOT EXIST C:\OraOutput GOTO MAPERROR
 IF EXIST o%8.out (COPY o%8.out %5.csv) ELSE echo "Output file does not exists"
 IF EXIST %5.csv (MOVE %5.csv C:\OraOutput\%5.cvs) ELSE echo "Could not move file to   Share Drive"
 GOTO ENDPROCESS
 :MAPERROR
 echo "The Share Directory has not been mapped Contact your System Administrator"
 EXIT -1
 :ENDPROCESS
 echo "Process finished goodbye"` 

谢谢。

            回答 #1

赞同：0

时间：2013-02-26T07:51:35.300

我假设或多或少兼容 Bourne 的 shell，`bash`因为这是最常见的。首先，您需要了解以下一些差异，以便将批处理脚本转换为 Bourne 样式的 shell 脚本：

1.  第一个区别是默认情况下不回显执行的命令（尽管您可以更改它）。
2.  注释以散列字符开头`#`。
3.  `cd`并且`echo`也`exit`存在于 Bourne 兼容的 shell 中。
4.  要测试文件是否存在，您可以使用`[ -e` *file-name* `]`。
5.  `IF`statement 成为`if` *条件* `; then` *true-statement * `; else` *false-statement* `; fi` 
    ，您可以使用分号分隔的多个命令/语句代替*true-statement*和*false-statement*。
6.  `IF EXIST o%8.out (COPY o%8.out %5.csv) ELSE echo "Output file does not exists"`在 Bourne 兼容的外壳中看起来像

    ```
    # I am assuming %8 means parameter 8 for the script
    if [ -e o$8.out ]; then cp o$8.out $5.csv; else echo "Output file does not exist"; fi 
    ```

    或使用替代缩进（分号可以用新行替换）：

    ```
    if [ -e o$8.out ]; then
        cp "o$8.out" "$5.csv"
    else
        echo "Output file does not exist"
    fi 
    ```

    请注意，我们还引用了参数，`cp`以便我们可以在参数中使用空格。

7.  你可以摆脱`goto`一点一点的重组。您可以参考这个 Stack Overflow 问题（假设`bash`或其他 Bourne shell 风格的脚本方言）：[Is there a "goto" statement in bash?](https://stackoverflow.com/questions/9639103/is-there-a-goto-statement-in-bash)

```

# iphone - 仅从 iOS 中的 URL 获取一些行

> ID：15083718
> 
> 赞同：0
> 
> 时间：2013-02-26T07:33:22.943
> 
> 标签：iphone, ios, ipad, uitableview, url

我开发了iOS应用程序，

它从中获取数据`url`并显示在其中`tableview`，我`url`包含大约 2000 行 tableview 的大量数据..这需要很长时间才能显示..

但是我想实现类似的东西，应用程序应该只从中获取前 25 行`url`，显示它，然后再次从 url 获取接下来的 25 行并显示它等等..

是否可以在 iOS 中实现这一点？如果是，那么您能分享一些想法吗？

**任何帮助都会得到帮助。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:41:14.360

是的，这在 iOS 中是绝对可行的。有两种方法可以做到这一点。

1.  改变你的`URL`回答：在这里你可以做的是。确保您的 URL 一次只返回 25 个数据。并且，将此数据附加到您的数组并显示它。
2.  你能做的是。从 URL 中获取所有行。并改变：`- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section`

这个委托方法。每次要显示接下来的 25 行。

这就是你可以做到的。第一次调用您的委托方法时：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return rowCount;
} 
```

下次 UITableView 重新加载时。你可以做的是发送 25 + 25 行。等等。可能你可以有一个变量。在您的 viewWillAppear 中将其设置为 25，例如 rowCount = 25。然后在每次调用 URL 时将该变量更改为

> `rowCount = rowCount + 25;`

这就是你可以实现它的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:46:57.777

是的，我建议使用分页功能更改您的 Web 服务逻辑...您的第一次点击返回 25 条记录，第二次点击返回 26 到 50 条记录的记录......在 iPhone 应用程序中，您将点击您的网络服务最后一个单元格第 24 个单元格（例如加载更多功能）您可以在 Web 服务响应中的数组中添加记录...... :)

干杯..快乐编码..

# c++ - C++ 和 Python- 检查 PyObject 的类型失败

> ID：15083720
> 
> 赞同：2
> 
> 时间：2013-02-26T07:33:31.213
> 
> 标签：c++, python, pyobject

我有点困惑。我正在尝试进行一些 C++ 和 Python 集成，但这并不简单。我没有使用 Boost，因为我无法让 Boost::Python 正确编译。但那是另一回事了。

目前，这是我在 C++ 中所做的：

```
//set everything up
PyObject* py_main_module = PyImport_AddModule("__main__");
PyObject* py_global_dict = PyModule_GetDict(py_main_module);
PyObject* py_local_dict = PyDict_New();
PyObject* py_return_value;

PyRun_SimpleString(data.c_str()); //runs Python code, which defines functions

//call a function defined by the python code
py_return_value = PyRun_String("test()", Py_single_input, py_global_dict, py_local_dict);

//attempt to check the type of the returned value
if(py_return_value != NULL) {
    //this is the problem: all of these print 0
    cout << PyList_Check(py_return_value) << endl;
    cout << PySet_Check(py_return_value) << endl;
    cout << PyFloat_Check(py_return_value) << endl;
} else {
    cout << "IT WAS NULL?!" << endl;
} 
```

Python 程序（作为名为“data”的字符串输入到 C++ 程序）：

```
def test():
    derp = 1.234
    #derp = [1, 2, 3, 4]
    #derp = set([1, 2, 3, 4])
    return derp 
```

现在，问题是类型检查不起作用。无论 Python 函数返回的是浮点数、列表还是集合，它们都返回 0。我究竟做错了什么？

如果有人能告诉我为什么对 PyRun_String 的调用会在控制台中打印返回值，则可以加分。这真的很烦人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T07:58:08.113

从[文档](http://docs.python.org/2/c-api/veryhigh.html#Py_eval_input)：

> `int Py_eval_input`
> 
> 孤立表达式的 Python 语法中的开始符号；与`Py_CompileString()`.
> 
> `int Py_file_input`
> 
> 从文件或其他源读取的语句序列的 Python 语法的开始符号；与 `Py_CompileString()`. 这是编译任意长的 Python 源代码时使用的符号。
> 
> `int Py_single_input`
> 
> 单个语句的 Python 语法的开始符号；与`Py_CompileString()`. 这是用于交互式解释器循环的符号。

`Py_single_input`将字符串评估为*语句*。语句本身不会返回任何内容，因此您`None`将从`PyRun_String`. 而是使用`Py_eval_input`将字符串作为*表达式*求值并获得结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T07:51:21.487

更改`Py_single_input`为`Py_eval_input`似乎可以解决这两个问题。

前者将字符串视为解释器循环的一部分，而后者评估单个表达式并返回一个对象。（我不确定前一种情况下的返回值是什么意思，但这不是表达式的值。）

编辑：刚刚对其进行了测试，根据下面**nneonneo**的回答，结果`Py_single_input`确实是`Py_None`.

# image - 开源资产管理或文件服务器

> ID：15083721
> 
> 赞同：0
> 
> 时间：2013-02-26T07:33:32.820
> 
> 标签：image, repository, alassetslibrary, assets

我正在寻找一个允许用户更新和标记资产的简单工具。然后搜索/浏览资产并在搜索结果中查看资产。

我有很多文件，例如徽标、按钮、信息图表、图标。我希望能够与同事分享，让他们能够轻松找到它们，而不必根据文件名进行猜测。

现在我正在使用带有目录列表和 htaccess 的 apache。但这并不理想。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:36:49.397

你在谈论版本控制吗？如果是这样，[Git](http://git-scm.com/)可以提供帮助。

# c# - 如何将枚举转换为列表并将“_”替换为“”（空格）

> ID：15083722
> 
> 赞同：0
> 
> 时间：2013-02-26T07:33:36.860
> 
> 标签：c#, enums

我有一个枚举：-

```
 public enum EnumType
    {
        Type1_Template,
        Type2_Folders,
        Type3_Template,
        Type1_Folders,
    } 
```

现在，在我想要的控制器中

1.  枚举列表和
2.  将 _ 下划线替换为空格。

所以为此：-获取我拥有的枚举列表

```
return new Models.DTOObject()
            {
                ID = model.id,
                Name = model.Name,
                Description = model.Description,
                //Type is the property where i want the List<Enum> and replace the underscore with space
                Type = Enum.GetValues(typeof(EnumType)).Cast<EnumType>().ToList()
            }; 
```

但是现在，我正在尝试这样的事情（虽然听起来可能很奇怪）：-

```
return new Models.Customers()
            {
                ID = model.id,
                Name = model.Name,
                Description = model.Description,
                //Type is the property where i want the List<Enum> and replace the underscore with space
                Type = Enum.GetValues(typeof(EnumType)).Cast<EnumType>().ToList().Select(e => new
                {
                    Value = e,
                    Text = e.ToString().Replace("_", " ")
                })
            }; 
```

但会引发语法错误（';' missing ）。虽然它只是被试了一下。请让我知道我该如何实现它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T07:37:58.453

你应该能够做到

```
Enum.GetNames(typeof(EnumType)).Select(item => item.Replace('_',' ')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:38:32.337

你应该使用

```
string[] names = Enum.GetNames(typeof(EnumType)); 
```

之后，您可以使用 for 循环（或类似的东西）并将“_”替换为“”。

```
for(int i = 0; i < names.Length; i++){
   names[i].Replace('_',' ');
} 
```

见[MSDN](http://msdn.microsoft.com/de-de/library/system.enum.getnames.aspx)；

# javascript - 得到一个 NaN 错误，不知道为什么

> ID：15083724
> 
> 赞同：2
> 
> 时间：2013-02-26T07:33:41.930
> 
> 标签：javascript, math

我在 JavaScript 中有这段代码：

```
SolarPanels = parseInt(lRemainingWidth / (panel_width + ( 2 * lPanelInterSpace))); 
```

然后我提醒作为输出`SolarPanels`给出的值，`NaN`

```
alert("SolarPanels "+SolarPanels); 
```

这 1 行是一个巨大计算的一小部分，但我的代码似乎在这里失败了，使用警报我已经读出了 , 的值，它们`SolarPanels`如下 ：`lRemainingWidth``panel_width``lPanelInterSpace`

```
lRemainingwidth = 17.4.320227272727276
SolarPanels = 0
panel_width = 1.65
lPanelInterSpace = 0.02 
```

我认为它与 2 点有关`lRemainingWidth`，无论哪种方式，我都不知道如何解决它。为什么`lRemainingWidth`有2个点？

* * *

更新 ：

这是计算 lRemainingWidth 的部分：

```
 if(HalforDouble === "Yes")
    {
        lRemainingWidth = (roof_ridge /2) + ((lRemainingHeight / Math.tan((lRoofEdgeDegrees * Math.PI) / 180)) - lRoofEdge);            
    }

    else
    {
        lRemainingWidth = roof_ridge + (2 * ((lRemainingHeight / Math.tan((lRoofEdgeDegrees * Math.PI) / 180)) - lRoofEdge));
    } 
```

这里的值是：

```
lRemainingWidth = 0
roof_ridge = 17
lRemainingHeight = 20.769000000000002
lRoofEdgeDegrees = 83.5169263071276
lRoofEdge = 0.2 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T07:37:05.843

你的问题是你混合字符串和数字

在任何计算之前从这段代码开始：

```
var roof_ridge = parseFloat(roof_ridge); 
```

您的代码中可能隐藏了其他字符串，但我们看不到它们。对它们应用相同的转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T07:39:04.960

> ```
> lRemainingWidth = roof_ridge + (2 * ((lRemainingHeight / Math.tan((lRoofEdgeDegrees * Math.PI) / 180)) - lRoofEdge)); 
> ```

如果`roof_ridge`是字符串，则`+`执行字符串连接而不是加法。

将此更改为

```
lRemainingWidth = +roof_ridge + (2 * ((lRemainingHeight / Math.tan((lRoofEdgeDegrees * Math.PI) / 180)) - lRoofEdge)); 
```

前缀`+`运算符`+roof_ridge`将其参数强制转换为数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T07:39:30.520

这似乎是`roof_ridge`变量问题的基石。此变量是 String 类的实例，而不是数字。因此，当您编写代码时，请转到此行：

```
lRemainingWidth = roof_ridge + (2 * ((lRemainingHeight / Math.tan((lRoofEdgeDegrees * Math.PI) / 180)) - lRoofEdge)); 
```

下一个计算完成：

```
'17' + whatever_float_value = got string concatenation instead of number's sum. 
```

要解决此问题，只需添加：

```
lRemainingWidth = parseFloat(roof_ridge) + (2 * ((lRemainingHeight / Math.tan((lRoofEdgeDegrees * Math.PI) / 180)) - lRoofEdge)); 
```

# php - 在 PHP 变量中组合变量和 html

> ID：15083726
> 
> 赞同：0
> 
> 时间：2013-02-26T07:33:55.903
> 
> 标签：php

下面的代码正在生成这样的结果：`http://localhost/my_website/ contact-us`

```
$base_url="http://localhost/my_website/";
echo $link= "$base_url contact-us "; 
```

但我试图得到这样的结果：`http://localhost/my_website/contact-us`

我也尝试过以下代码

```
$base_url="http://localhost/my_website/";
echo $link= "$base_url.contact-us "; 
```

但结果是这样的`http://localhost/my_website/.contact-us`

你能告诉我如何解决这个问题吗？

# 编辑

很抱歉，我没有明确提到我在这里面临的确切问题。我认为上面的例子会对我的情况有所帮助。实际上，我正在尝试创建一个链接，该链接将发送到用户的电子邮件地址。

我的代码

```
$base_url="http://localhost/my_website/";
$random_hash="1";
echo $link="
<a href='$base_url account/confirm_registration/$random_hash' target='_blank'>$base_url   account/confirm_registration/$random_hash</a>"; 
```

但它是这样生成的

```
http://localhost/my_website/ account/confirm_registration/1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:36:08.417

```
$base_url="http://localhost/my_website/";
echo $link= $base_url."contact-us"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:42:53.053

你只需要拆分它

测试和工作：

```
$base_url="http://localhost/my_website/"; 

echo $link=$base_url."contact-us"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:35:47.200

```
echo $link = $base_url."contact-us"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T07:43:38.137

```
$base_url="http://localhost/my_website/";
$link=$base_url."contact-us";
echo $link; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T08:01:54.193

您需要了解基本的字符串连接： http: [//php.net/manual/en/language.operators.string.php](http://php.net/manual/en/language.operators.string.php)

尝试这个：

```
$base_url = "http://localhost/my_website/";
$random_hash = "1";
$url_page = "account/confirm_registration/$random_hash";
$url = $base_url . $url_page;
$link = "<a href='$url'>$url</a>";

echo $link; 
```

# c# - 如何在 C# 中创建 XML

> ID：15083727
> 
> 赞同：3
> 
> 时间：2013-02-26T07:33:56.297
> 
> 标签：c#, xml

我需要创建一个 XML 并将其作为字符串返回。谁能告诉我如何使用创建以下 XML `XmlDocument`？

```
<outputs>
  <output name="" value="" type=""></output>
  <output name="" value="" type=""></output>
  <output name="" value="" type=""></output>
</outputs> 
```

**更新**

```
var xmlDocument = new XmlDocument();

            var xmlNode=xmlDocument.CreateNode(XmlNodeType.XmlDeclaration,"outputs","namespace");
            xmlDocument.AppendChild(xmlNode);

            var xmlElement = xmlDocument.CreateElement("", "output", "");
            xmlDocument.AppendChild(xmlElement); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-26T07:40:13.883

我认为您应该考虑使用`XDocument`而不是`XmlDocument`：

```
var doc = new XDocument(new XElement("outputs",
                            new XElement("output",
                                new XAttribute("name", ""),
                                new XAttribute("value", ""),
                                new XAttribute("type", "")),
                            new XElement("output",
                                new XAttribute("name", ""),
                                new XAttribute("value", ""),
                                new XAttribute("type", "")),         
                            new XElement("output",
                                new XAttribute("name", ""),
                                new XAttribute("value", ""),
                                new XAttribute("type", "")))); 
```

您可以轻松地将 xml 写入字符串：

```
var myXmlString = doc.ToString(); 
```

您也可以使用`XDocument.Parse()`静态方法实现相同的目标：

```
var doc = XDocument.Parse("<outputs><output></output> (...) </outputs>"); 
```

您也可以使用循环添加内容：

```
var doc = new XDocument(new XElement("outputs"));
var root = doc.Root;
foreach(var o in outputs)
{
    root.Add(new XElement("output",
                 new XAttribute("name", o.Name),
                 new XAttribute("value", o.Value),
                 new XAttribute("type", o.Type)));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T07:49:29.417

```
//Create XmlDocument
XmlDocument xmlDoc = new XmlDocument();

//Create the root element
XmlNode outputsElement = xmlDoc.CreateElement("outputs");

//Create the child element
XmlElement Element = xmlDoc.CreateElement("output");

//Create "name" Attribute
XmlAttribute nameAtt = xmlDoc.CreateAttribute("name");
Element.Attributes.Append(nameAtt);

//Create "value" Attribute
XmlAttribute valueAtt = xmlDoc.CreateAttribute("value");
Element.Attributes.Append(valueAtt);

//Create "type" Attribute
XmlAttribute typeAtt = xmlDoc.CreateAttribute("type");
Element.Attributes.Append(typeAtt);

//Append child element into root element
outputsElement.AppendChild(Element); 
```

并将其作为字符串返回：xmlDoc.OuterXml;

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T07:40:33.913

```
 string str = "<outputs><output name=\"\" value=\"\" type=\"\"></output><output name=\"\" value=\"\" type=\"\"></output><output name=\"\" value=\"\" type=\"\"></output></outputs>";

        XmlDocument doc = new XmlDocument();
        doc.LoadXml(str); 
```

并再次创建一个字符串。

```
 string toString = string.Empty;
        using (StringWriter stringWriter = new StringWriter())
        {
            XmlTextWriter xmlTextWriter = new XmlTextWriter(stringWriter);

            doc.WriteTo(xmlTextWriter);

            toString = stringWriter.ToString();
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T07:39:30.703

这将对您有很大帮助，这是一个关于如何读取和写入 xml 文件的好例子：

[http://www.c-sharpcorner.com/UploadFile/mahesh/ReadWriteXMLTutMellli2111282005041517AM/ReadWriteXMLTutMellli21.aspx](http://www.c-sharpcorner.com/UploadFile/mahesh/ReadWriteXMLTutMellli2111282005041517AM/ReadWriteXMLTutMellli21.aspx)

关于如何使用 c# 代码创建元素和整个 XML 文件的示例代码：

```
 static void Main(string[] args)
    {
        // Create a new file in C:\\ dir
        XmlTextWriter textWriter = new XmlTextWriter("C:\\myXmFile.xml", null);
        // Opens the document
        textWriter.WriteStartDocument();
        // Write comments
        textWriter.WriteComment("First Comment XmlTextWriter Sample Example");
        textWriter.WriteComment("myXmlFile.xml in root dir");
        // Write first element
        textWriter.WriteStartElement("Student");
        textWriter.WriteStartElement("r", "RECORD", "urn:record");
        // Write next element
        textWriter.WriteStartElement("Name", "");
        textWriter.WriteString("Student");
        textWriter.WriteEndElement();
        // Write one more element
        textWriter.WriteStartElement("Address", ""); textWriter.WriteString("Colony");
        textWriter.WriteEndElement();
        // WriteChars
        char[] ch = new char[3];
        ch[0] = 'a';
        ch[1] = 'r';
        ch[2] = 'c';
        textWriter.WriteStartElement("Char");
        textWriter.WriteChars(ch, 0, ch.Length);
        textWriter.WriteEndElement();
        // Ends the document.
        textWriter.WriteEndDocument();
        // close writer
        textWriter.Close();
    } 
```

# mysql - 使用 SAN 的具有相同 mysql datadir 的多个服务器？

> ID：15083729
> 
> 赞同：0
> 
> 时间：2013-02-26T07:34:01.710
> 
> 标签：mysql, linux, san

让我们假设在 SAN 中为 MySQL 数据目录创建 Lun。我们可以将 LUN 呈现到 3 台主机服务器中（在 3 台主机服务器中使用相同的 mysql 数据目录）。假设 host1 将用于写入，其他主机用于读取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:01:42.040

在同一个数据目录上运行多个服务器即使不是不可能也是危险的。横向扩展的通常解决方案是设置主从复制。

[http://top-performance.blogspot.de/2012/03/how-to-setup-mysql-replication-in-11.html](http://top-performance.blogspot.de/2012/03/how-to-setup-mysql-replication-in-11.html)

# android - android中的许多意图跳过

> ID：15083731
> 
> 赞同：0
> 
> 时间：2013-02-26T07:34:08.060
> 
> 标签：android, android-intent

我有三个活动。跳过顺序是A->B->C。

当 A 跳到 B 时，A 不能完成。B跳到C的时候，怎么完成A和B的两个Activity呢？

如果 B 没有跳到 C，它可以按回 A。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:34:56.870

当您启动 C 活动时，要从活动 A 和 B 中清除 backStack，请使用 FLAG_ACTIVITY_CLEAR_TOP，**例如**：

```
intent = new Intent(context,C.class);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

您可以了解更多信息：[Task 和 BackStack](http://developer.android.com/guide/components/tasks-and-back-stack.html)

# node.js - 使模块全局化以在 node.js 中的其他文件中使用

> ID：15083738
> 
> 赞同：0
> 
> 时间：2013-02-26T07:34:24.953
> 
> 标签：node.js

我读到了另一个我现在找不到的问题，将 node.js 中的模块设为全局是一个坏主意，然后他因为 node.js 的变化而改变了答案

github 上 express.js 的示例现在确实显示了一个示例。 [https://github.com/visionmedia/express/tree/master/examples](https://github.com/visionmedia/express/tree/master/examples)

那么如果我在多个文件中需要相同的模块，比如 sequelize 或 async 怎么办？

应用程序.js：

```
var document = require('./routes/document')
async = require('async'); 
```

/routes/document.js：

```
async.series([...]); 
```

**或者**

应用程序.js：

```
var document = require('./routes/document')
var async = require('async'); 
```

/routes/document.js：

```
var async = require('async');
async.series([...]); 
```

我应该在 document.js 中再次需要 async 模块，还是只是将 async 设为全局以便我可以在新文件中使用它而不需要它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:34:52.853

不要使用全局变量来访问模块。始终使用 require 并且只 require() 该 .js 文件中需要的模块。Require 只会加载你的模块一次并持有对它的引用。

只需要你需要的东西，即使它是几个模块，也是好的，因为它清楚地说明了你的代码的依赖关系是什么，并且可能有助于你以后重组你的代码。

在需要用另一个模块替换一个模块时，仅 requires() 也可以提供帮助。例如，您可能希望将 knox(S3) 替换为新的 aws-sdk 模块。当您删除 knox npm 模块时，require 将立即在使用/require knox 的文件中爆炸。如果它是一个全局变量，您将需要找到对该全局引用的所有引用，并依靠您的 IDE 或文本编辑器来找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T07:50:37.593

简而言之，将其包含在每个文件中。该文件在第一次 require 之后被缓存，因此内容实际上只运行一次（您可以通过在 require 中放置一个 log 语句来测试它；它只会显示一次）。

我所做的是制作一个需要我需要的所有其他文件的文件，然后将它们全部导出。然后你只需要一个文件。当您包含许多模块时，这会非常方便。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:54:44.230

多次要求一个模块并没有错。内部`require`只执行一次所需的文件，然后缓存结果。有关更多信息，请参阅[Node.js 模块文档](http://nodejs.org/docs/latest/api/modules.html#modules_caching)。

# linux - 如何查找 ELF 的程序头数

> ID：15083739
> 
> 赞同：-4
> 
> 时间：2013-02-26T07:34:26.173
> 
> 标签：linux, elf

我需要在不使用 objdump 或 readelf 的情况下查找 ELF 可执行文件（a.out）的程序头数。我认为可以通过 hexdump 来完成。但我对此一无所知。请告诉我如何计算它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T16:37:59.850

> 我需要在不使用 objdump 或 readelf 的情况下查找 ELF 可执行文件（a.out）的程序头数。

这是一件*微不足道*的事情。

查找`/usr/include/elf.h`（`Elf32_Ehdr`或 Elf64_Ehdr，如果在 64 位机器上）定义。将您在此处看到的内容与`readelf -h a.out`. 那，每个`ELF`二进制文件开头的事实`Elf{32,64}_Ehdr`就是*你*所需要的。

你的程序将是：

*   打开`a.out`文件
*   从头开始读`Elf32_Ehdr`（或）`Elf64_Ehdr`
*   打印`.e_phnum`
*   出口

# c# - 超时已过。获得连接前的超时时间 第一个连接

> ID：15083740
> 
> 赞同：2
> 
> 时间：2013-02-26T07:34:28.603
> 
> 标签：c#, sql-server, design-patterns, connection-pooling

我有这个问题。我用谷歌搜索了很多关于这个问题的网站，但他们都建议关闭所有连接，或者只是使用连接和 dataReader 的“使用”。但！我的问题在于我无法打开第一个连接！我在连接附近设置了一个断点，并看到没有其他连接，所以，有第一个。当我重新制作从静态到单例的打开连接的类时，这个问题就出现了，这里是代码：

```
public class Storage
{
private static Storage instance;

public static Storage Instance
{
    get
    {
        if (instance == null)
        {
            instance = new Storage();
        }
        return instance;
    }
}

private Storage()
{
    Manager man = new Manager();
    products = man.LoadProducts();
    components = man.LoadComponents();
    man.LoadProductComponents();
}

public Dictionary<int, Product> Products
    {
        get { return products; }
        set { products = value; }
    }

public Dictionary<int, Component> Components
    {
        get { return components; }
        set { components = value; }
    }

private Dictionary<int, Product> products;
private Dictionary<int, Component> components;

} 
```

这是一个 Manager 构造函数

```
 public Manager()
    {
        connection = new SqlConnection(@"Persist Security Info=False;User ID=user;Password=pass;Initial Catalog=Products;Server=(local)");
        if (connection.State != ConnectionState.Open) connection.Open();
    } 
```

当出现异常时，连接为`Closed`. 有人有想法吗？

**更新：**

如果我关闭池 - 我`"System.StackOverflowException" in System.Data.dll`在同一条线上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:21:20.617

您的`Manager`班级创建并打开一个连接：

```
public Manager()
{
    connection = new SqlConnection(@"Persist Security Info=False;User ID=user;Password=pass;Initial Catalog=Products;Server=(local)");
    if (connection.State != ConnectionState.Open) connection.Open();
} 
```

但是，如果我们看看你是如何使用它的，很明显没有任何东西会*关闭*这个连接：

```
private Storage()
{
    Manager man = new Manager();
    products = man.LoadProducts();
    components = man.LoadComponents();
    man.LoadProductComponents();
} 
```

我希望`Manager`实现`IDisposable`，并让`Dispose()`方法关闭并释放连接：

```
class Manager : IDisposable
{
    ...
    public void Dispose()
    {
        if(connection != null) connection.Dispose();
        connection = null;
    }
} 
```

然后将通过以下方式使用`using`：

```
private Storage()
{
    using(Manager man = new Manager())
    {
        products = man.LoadProducts();
        components = man.LoadComponents();
        man.LoadProductComponents();
    }
} 
```

我担心的是你的经理只是一个更广泛问题的一个例子：你自己没有清理连接。当它`Manager`是静态的时，这可能是不可见的，但是当切换到`Manager`实例时，很容易旋转多个`Manager`对象。这些中的每一个都会在 GC 之前建立一个连接。

# java - 在 Eclipse 中打包小程序与应用程序（用于部署）的主要区别是什么？

> ID：15083747
> 
> 赞同：0
> 
> 时间：2013-02-26T07:34:42.353
> 
> 标签：java

找不到解释两者之间差异的线程。

有什么区别？

感谢所有有帮助的人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:43:35.807

[Applet](http://en.wikipedia.org/wiki/Java_applet)通常用于从浏览器中启动，这意味着它嵌入在网站中，例如 Flash 插件或视频。

应用程序（我认为你的意思）通常是一个独立的软件，可以单独启动和执行，除了 JVM 之外没有任何额外的软件。

另一个典型的区别是，应用程序主要存储在您的本地计算机上，而小程序在启动时从远程主机加载。

因此，Eclipse 需要以不同的方式打包（并启动）它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:54:41.790

当你在eclipse中运行java时，更像是eclipse把你的代码编译成java原生类，然后用下面的命令运行：java -options yourcode.class你可以在windows任务管理器中发现有另一个java进程，你可以查看Eclipse 首选项中的 java 启动选项。在applet中运行代码，windows会知道它需要用java打开，比如运行命令行命令：java yourcode.class没有任何选项。

# java - 无法使用 selenium webdriver 运行测试用例

> ID：15083758
> 
> 赞同：-1
> 
> 时间：2013-02-26T07:35:28.487
> 
> 标签：java, selenium

我能够使用 Junit4 使用 Selenium Rc 运行测试用例。但是当我尝试使用 Selenium Webdriver 做同样的事情时，它只会打开一个空白浏览器。帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:50:32.557

selenium 将基于浏览器 API 启动一个本地 Web 服务器，然后您的测试用例将发送 URL 到浏览器，selenium 本地服务器将充当本地服务器的 URL 请求。在您的场景中，我猜当您直接运行 selenium 时会出现一些配置错误，您可以在 Eclipse 控制台中获取一些控制台日志：Window -> Show view -> Console

# java - 如何从 DeliverSM (logica smpp) 和 java 中检索 UDH

> ID：15083771
> 
> 赞同：0
> 
> 时间：2013-02-26T07:36:15.813
> 
> 标签：java, smpp

我们使用 Java 1.6 和 logica_smpp.1.3.7.jar

我的问题是连接消息。我们一直使用 DeliverSM 类中的 hasSarMsgRefNum 方法来表明这是一个多消息部分。

然而，这种情况发生了变化，我们现在接收作为 DeliverSM 一部分的 GSM 短消息服务用户数据。

我可以得到 DeliverSM 的 esm_class，它向我表明这是一个串联的消息部分。我在检索短消息字段开头的实际用户数据标题信息时遇到了困难。

这就是我获得UDHI的方式：

```
 byte udhi = (byte)Data.SM_UDH_GSM;

  if (del.getEsmClass() == udhi) {
      log.debug("This is a concatenated message part!");
  } 
```

这就是我获得短消息的方式：

```
 byte[] bytes = del.getShortMessage().getBytes(); 
```

但是，当我将其转换为字符串时，它看起来像这样：

```
 ^E^@^Cï¿½^B^This is part one of a test message... 
```

我需要知道如何转换第一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:27:12.507

我解决了这个问题。

我得到前 5 个字符（标题信息）。

```
 int char1 = del.getShortMessage().charAt(1);
  int char2 = del.getShortMessage().charAt(2); 
```

ETC..

第三个字符是消息参考号。第 4 个字符是总部分。第 5 个字符是当前部分。

我希望这对将来的人有所帮助:)

# android - 如何从事件中删除提醒，以便它更新提供程序中的事件而不仅仅是 sqlite db？

> ID：15083775
> 
> 赞同：0
> 
> 时间：2013-02-26T07:36:28.900
> 
> 标签：android, android-contentprovider, android-contentresolver, android-calendar

我尝试使用以下代码删除事件提醒：

```
int result = getContentResolver().delete(
Reminders.CONTENT_URI, 
Reminders.EVENT_ID + " = ?",
new String[] { "44" }
); 
```

这表明它删除了 1 行。但是，当我在日历应用程序中查看事件时，提醒仍然存在。即使我更新了“hasAlarm”字段，我认为它也不会更新 Exchange 中的事件。如何正确（使用 Ice Cream Sandwich - API 14 - 或更高版本）从日历事件中删除提醒？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:19:20.790

而不是删除，尝试使用更新查询，它可以工作。如果它不起作用，请让我知道我会尝试帮助处理代码片段。

# alfresco - 如何在 Alfresco 中为用户添加其他属性，如护照号、证书、血型等，并需要执行 CRUD 操作？

> ID：15083778
> 
> 赞同：0
> 
> 时间：2013-02-26T07:36:37.960
> 
> 标签：alfresco

如何在 Alfresco 中为用户添加其他属性，如护照号、证书、血型等，并且还需要执行 CRUD 操作？我是露天的新手，请尽可能详细地提供信息。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T01:46:33.187

[这篇博](http://ecmarchitect.com/archives/2012/02/27/1555)文解释了如何在 Alfresco 3.4d 中做到这一点。该示例不适用于除此之外的版本，但您应该能够遵循相同的一般过程。

# xcode - UIImageView 在 UIScrollView 中显示时不更新图像

> ID：15083784
> 
> 赞同：0
> 
> 时间：2013-02-26T07:37:17.277
> 
> 标签：xcode, uiscrollview, uiimageview

我是 Xcode 和 Objective C 的新手，所以我遇到的问题可能很简单，但我还没有找到答案，所以感谢您提供的任何帮助。

我正在尝试编写一个简单的应用程序，该应用程序从相机拍摄照片并将其显示在`UIImageView`. 如果`UIImageView`控件只是放置在`UIView`控件中（使用界面生成器），这一切都可以正常工作。我用来将图像设置为控件的代码是

```
[self.imageViewOSFCorner setImage:image]; 
```

但是，我需要显示几张图像，希望用户能够上下滚动页面。所以我`UIScrollView`在界面构建器中创建了一个我需要的大小并将所有控件放在其中。然后在`viewDidLoad`我放置以下代码的方法中显示`UIScrollView`

```
self.scrollView.contentSize = self.scrollView.frame.size;
self.scrollView.frame = self.view.frame;
[self.view addSubview:self.scrollView]; 
```

这样做的原因是您现在可以滚动页面并查看所有`UIImageView`控件，当我按下按钮时它会启动相机，但现在拍照后它不会将图像显示到`UIImageView`. 如果我把`UIScrollView`它拿走，它会再次工作（但显然不会滚动） - 我猜我在做一些愚蠢的事情，是否需要调用一个函数来更新`UIScrollView`？

顺便说一句，我最初尝试使用代码

```
self.imageViewOSFCorner.image = image; 
```

显示图像，但这不会显示图像并且必须使用

```
[self.imageViewOSFCorner setImage:image]; 
```

有人能告诉我为什么第一种方法不起作用吗？

谢谢

将要

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:46:18.573

可能有用：<br> self.scrollView.frame = CGRectMake(0, 0, self.view.frame.size.width*num,view.frame.size.hight ); num 是您的所有图像的编号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:47:53.123

好的，它现在正在工作，我在创建控件时一定做了一些愚蠢的事情，`UIScrollView`因为我在界面构建器中再次从头开始，现在一切正常。

# android - 从服务器下载图像并保存在 sd 卡中

> ID：15083785
> 
> 赞同：0
> 
> 时间：2013-02-26T07:37:26.793
> 
> 标签：android

嗨，在我的应用程序中，我必须从服务器下载图像并保存到 SD 卡中。请告诉如何做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T08:41:39.567

我解决了这个问题

```
private void downloadImagesToSdCard(String downloadUrl,String imageName)
{
    try{
        URL url = new URL(downloadUrl); //you can write here any link

        File myDir =  new File("/sdcard"+"/"+Constants.imageFolder);
        //Something like ("/sdcard/file.mp3")

        if(!myDir.exists()){
            myDir.mkdir();
            Log.v("", "inside mkdir");

        }

        Random generator = new Random();
        int n = 10000;
        n = generator.nextInt(n);
        String fname = imageName;
        File file = new File (myDir, fname);
        if (file.exists ()) file.delete (); 

             /* Open a connection to that URL. */
            URLConnection ucon = url.openConnection();
            InputStream inputStream = null;
           HttpURLConnection httpConn = (HttpURLConnection)ucon;
          httpConn.setRequestMethod("GET");
          httpConn.connect();

          if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) {
           inputStream = httpConn.getInputStream();
          }

            /*
             * Define InputStreams to read from the URLConnection.
             */
           // InputStream is = ucon.getInputStream();
            /*
             * Read bytes to the Buffer until there is nothing more to read(-1).
             */

            FileOutputStream fos = new FileOutputStream(file);
            int size = 1024*1024;
            byte[] buf = new byte[size];
            int byteRead;
            while (((byteRead = inputStream.read(buf)) != -1)) {
                fos.write(buf, 0, byteRead);
                bytesDownloaded += byteRead;
            }
            /* Convert the Bytes read to a String. */

            fos.close();

    }catch(IOException io)
    {
        networkException = true;
        continueRestore = false;
    }
    catch(Exception e)
    {   
        continueRestore = false;
        e.printStackTrace();
    }
} 
```

谢谢您的回复......

# android - Android 上的“apple-mobile-web-app-title”

> ID：15083788
> 
> 赞同：15
> 
> 时间：2013-02-26T07:37:40.110
> 
> 标签：android, web-applications, title, meta-tags

`apple-mobile-web-app-title`android web 应用程序是否有相当于 iOS 6 元标记？可以让您定义长标题和短标题的东西。

```
<title>Long name</title>
<meta name="apple-mobile-web-app-title" content="Short name"> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-03-05T12:21:54.367

这可以使用“应用程序名称”元标记来实现。然而，它似乎只适用于 chrome。Firefox 和 android 浏览器不使用标题标签

```
<head> ...  <meta name="application-name" content="Awesome App!"> ...  </head> 
```

来自，Web 应用程序中的用法部分
[http://w3c-webmob.github.io/installable-webapps/](http://w3c-webmob.github.io/installable-webapps/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-10-21T06:09:13.950

创建一个名为 的 JSON 文件`site.webmanifest`，如下所示：

```
{
  "name": "Long name",
  "short_name": "Short name",
  "icons": [
    {
      "src": "/android-chrome-192x192.png",
      "sizes": "192x192",
      "type": "image/png"
    },
    {
      "src": "/android-chrome-512x512.png",
      "sizes": "512x512",
      "type": "image/png"
    }
  ],
  "theme_color": "#ffffff",
  "background_color": "#ffffff",
  "display": "standalone"
} 
```

然后将其添加到您的 HTML 中，如下所示：

```
 <link rel="manifest" href="/site.webmanifest"> 
```

该`"icons"`部分与您的问题无关，但您可能也应该包括它们（并实际制作这些图标文件）。我从这篇文章中得到了这个：[https ://dev.to/masakudamatsu/favicon-nightmare-how-to-maintain-sanity-3al7](https://dev.to/masakudamatsu/favicon-nightmare-how-to-maintain-sanity-3al7)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-14T21:54:26.790

一种方法是使用 javascript 检测移动浏览器，然后将**document.title**更改为更短的标题：

```
if (navigator.userAgent.match(/(iPad|iPhone|iPod|Android|Silk)/gi))
   document.title = "Short Title"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-03T05:07:46.257

[自 M39 以来](https://developer.chrome.com/multidevice/android/installtohomescreen)，Chrome 已为您的 Web 应用程序添加了对基于 JSON 的清单文件的支持。该字段`short_name`等同于 Safari 的字段`apple-mobile-web-app-title`，因为它在空间有限的情况下更适合显示全名，例如应用程序启动器。

`short_name`Web 应用清单文件中字段的[W3C 规范：](http://www.w3.org/TR/appmanifest/#short_name-member)

> short_name 成员是一个字符串，表示 Web 应用程序名称的简短版本。它旨在用于没有足够空间显示 Web 应用程序的全名的情况。

# html - 使用 CSS 调整和裁剪图像

> ID：15083789
> 
> 赞同：7
> 
> 时间：2013-02-26T07:37:43.310
> 
> 标签：html, css, image-processing, crop

我有一个网站要显示一堆不同的图像，所有不同的分辨率和纵横比。CSS中是否有一种简单的方法可以将图像调整大小和裁剪到特定分辨率？出于我的目的，我希望调整后的图像为 280x280。

当然我可以设置`<img height = '280' width = '280' />`，但这会拉伸它。我想要两个分辨率中较小的一个，做一个正方形，然后取中心像素。例如，如果分辨率是 480x200，我希望它从图像中心取出一个 200x200 的部分。

我试过谷歌搜索，但无济于事。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T07:41:45.990

不可能使用 css 对图像进行“真正的裁剪”。真正的裁剪意味着图像被缩小到新的值，并且它的大小比以前更小。

但是有一个负边距或绝对定位的解决方案，对您有很大帮助。我已经多次使用过这种技术。

请看： [使用 CSS 裁剪图像](http://cssglobe.com/3-easy-and-fast-css-techniques-for-faux-image/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T07:57:58.823

您可以使用 clip 属性，用于裁剪元素。

几周前，我在 Codrops 上写了一篇关于它的教程：http: [//tympanus.net/codrops/2013/01/16/understanding-the-css-clip-property/](http://tympanus.net/codrops/2013/01/16/understanding-the-css-clip-property/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:43:35.663

如果将图像设置为 CSS 背景，则可以使用[background-size: cover|contain](https://developer.mozilla.org/en-US/docs/CSS/background-size)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-25T20:28:13.863

实际上，我最近遇到了同样的问题，最终对背景图像的方式略有不同。另一个主要区别是我的方式不假设知道图像的宽度和高度 - 所以它可以动态地处理任何图像。虽然它确实需要一点点 jQuery 来确定图像的方向（我相信你可以使用纯 JS 代替）。

如果您对更多解释感兴趣，我写了[一篇关于它的博客文章，](http://fredparke.com/blog/cropping-images-using-simple-css-and-js)但代码非常简单：

HTML：

```
<ul class="cropped-images">
  <li><img src="http://fredparke.com/sites/default/files/cat-portrait.jpg" /></li>
  <li><img src="http://fredparke.com/sites/default/files/cat-landscape.jpg" /></li>
</ul> 
```

CSS：

```
li {
  width: 150px; // Or whatever you want.
  height: 150px; // Or whatever you want.
  overflow: hidden;
  margin: 10px;
  display: inline-block;
  vertical-align: top;
}
li img {
  max-width: 100%;
  height: auto;
  width: auto;
}
li img.landscape {
  max-width: none;
  max-height: 100%;
} 
```

jQuery：

```
$( document ).ready(function() {

    $('.cropped-images img').each(function() {
      if ($(this).width() > $(this).height()) {
        $(this).addClass('landscape');        
      }
    });

}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-26T07:41:55.480

您可以使用 CSS 设置网站上所有图像的大小：

```
img {
    width: 280px;
    height: 280px;
} 
```

问题是，一些图像会因为它们的纵横比而看起来很奇怪。最好的办法是**在上传时为每张图片创建不同大小的（更广为人知的称为缩略图）**。不是在运行时，那将需要很长时间。

# c# - WPF 中禁用的菜单元素看起来已启用

> ID：15083795
> 
> 赞同：0
> 
> 时间：2013-02-26T07:38:15.083
> 
> 标签：c#, .net, wpf, menuitem

我的问题是双重的，但我想它们是相关的，如果我设法解决其中一个问题，我会同时解决这两个问题。

首先，让我们看看链接到 Caliburn.Micro 视图模型的 ContextMenu 的 xaml 代码：

```
 <ContextMenu>
    <MenuItem Header="Configure modem" ItemsSource="{Binding Modems}">
      <MenuItem.ItemTemplate>
        <DataTemplate>
          <MenuItem>
            <i:Interaction.Triggers>
              <i:EventTrigger EventName="Click">
                <ca:ActionMessage MethodName="SelectModem">
                  <ca:Parameter Value="{Binding Path=DataContext, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=UserControl}}" />
                </ca:ActionMessage>
              </i:EventTrigger>
            </i:Interaction.Triggers>
            <MenuItem.Header>
              <DockPanel>
                <Image DockPanel.Dock="Left" Source="{Binding CarrierProfile.CarrierProfileIcon}" Width="40" Height="40"/>
                <TextBlock Text="{Binding MenuText}" VerticalAlignment="Center" Margin="10 0"/>
              </DockPanel>
            </MenuItem.Header>
          </MenuItem>
        </DataTemplate>
      </MenuItem.ItemTemplate>
    </MenuItem>
  </ContextMenu> 
```

所以基本上这只是`DataTemplate`我将 设置`Header`为`DockPanel`包含图像和`TextBlock`.

一个`MenuItem`看起来像这样：

![在此处输入图像描述](../Images/940156535232fafe7a57c41593e62b5e.png)

在这里您可以看到主要问题。可以看到有“二选一”。一种外部选择，一种内部选择。如果我单击内部选择，一切都很好，并且从我的视图模型中调用了我的 SelectModem 方法。但是，如果您单击外部选择，上下文菜单就会消失，因此用户认为他已经做出了选择，但实际上视图模型上没有调用任何方法。

我的第二个问题是，如果我`MenuItem`通过添加`IsEnabled="False"`上面的代码来禁用，菜单项看起来被禁用（文本变灰），我无法进行内部选择，但在悬停时仍然显示外部选择，当单击菜单时消失（但我的视图模型中没有触发任何内容）

所以问题是：我怎样才能摆脱外部选择？

# mysql - Mysql查询以根据条件更新状态

> ID：15083799
> 
> 赞同：3
> 
> 时间：2013-02-26T07:38:37.487
> 
> 标签：mysql, sql-update

**数据库表**-

```
 id        created_date             timer     status 
      1    2013-02-25 16:40:45           1        Y  
      2    2013-02-25 16:40:45           2        Y  
      3    2013-02-25 16:40:45           0        Y 
```

这是我的数据库表。

`created_date`字段是`datetime`和`timer`是`varchar`值 ( `integer value`)

**我想要的是`set status N`每天在没有通过添加设置`12:00 AM` 计时器值时，所有状态都更改为天气计时器设置与否`0``status=N``timer+created_date``N``12:00 AM`**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:45:00.340

试试这个：

```
Update tableName
set status = 'N'
where time <> 0 and time(created_date) = '12:00:00' 
```

然后用时间值更新日期，假设它以秒为单位，你这样做

```
Update tableName
set created_date= AddTime(created_date, timer)
where status = 'N' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:49:38.033

你必须利用`cronjob`.

一些有用的链接是：

[http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/](http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/)

[https://my.bluehost.com/cgi/help/168](https://my.bluehost.com/cgi/help/168)

# ruby-on-rails - Rails 数据库和收入和费用模型

> ID：15083802
> 
> 赞同：1
> 
> 时间：2013-02-26T07:38:57.790
> 
> 标签：ruby-on-rails, models

我是 Rails 的新手，正在尝试弄清楚如何创建模型来跟踪我的应用程序中的收入和支出。我是不是该：

1）创建一个名为Finance的模型和数据库表，然后将一个名为“type”的字段设置为收入或费用，然后继续描述，金额，日期？

2) 或者我应该创建两个模型和两个名为收入和费用的表，每个表都有描述、金额和日期？

我打算使用这些数据让摄影师跟踪与他们的业务相关的收入和支出。因此，例如，当摄影师预订约会时，他们可以将收入和支出与该约会相关联。他们还可以查看显示每月收入、支出和利润的报告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:19:36.943

我会说一张桌子并使用STI（即使用类型字段）。收入和支出本质上是一回事，只是操作的“方向”不同。所以对我来说，使用相同的数据模型是有意义的，例外隐藏在特定的子类型中。

现在至于另一个答案中提到的问题：

*   一张桌子同时订购这两种物品变得很容易。两个人会很痛苦。
*   正确索引表时，一张或两张表都没有关系。在 type 列上创建索引时，记录的基数与在两个表中的基数相同，因此在性能方面并没有太大差异。使用一张表进行聚合也将更加轻松快捷。
*   表锁定不是问题，除非您使用某种您不应该使用的数据库（如 MyISAM）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:02:36.013

这基本上只是一个偏好问题。您可以使用一个或两个表执行所有数据库查询（使用 UNION）。所以我更喜欢两张表有一个更清晰的模型结构。您想要的图像，因此保存收入条目：

*   一张表：您始终必须设置类型
*   两张桌子：您只需要选择正确的型号

但是我可以想象一个数据库查询，它可以（！）只使用一个表来更快：

*   如果你想要`ORDER`两种类型，让我们按日期说。

还有一点是一张桌子更好，但这**不适用于您的模型**：

*   如果有无数种类型。或者：如果类型的数量可以改变。

对于其他一切，两个单独的表更好。关于查询性能：

*   如果表变得非常大，并且您例如想要检索所有收入条目，那么在具有 300000 个条目的表中查找这些条目当然比在具有 600000 个条目的表中查找这些条目要快。

深入了解 DBMS，还有另一个使用两个表的原因：

*   表锁定。一些数据库引擎为写操作锁定整个表。因此，只有一半的数据会被锁定，而另一半仍然可以同时访问。

* * *

`ORDER`我会用两张桌子来看看这个东西。也许我错了，性能影响甚至不存在。

## 结果：

我创建了三个简单的表（使用 MySQL）：

*   `inc`: `id`(int, PK), `money`(int, not null)
*   `exp`: `id`(int, PK), `money`(int, not null)
*   `combi`: `id`(int, PK), `type`(tinyint, index, not null), `money`(not null)

然后用随机数据填充表格：

*   `money`: 从 1 到 10000
*   `type`: 从 1 到 2
*   `inc`: 100000 个条目
*   `exp`: 100000 个条目
*   `combi`: 200000 个条目

运行这些查询：

```
SELECT id, money
FROM combi
WHERE money > 5000
ORDER BY money
LIMIT 200000; 
```

0,1 sec ... 无索引：0,1 sec

```
SELECT * FROM (
    SELECT id, money FROM inc WHERE money > 5000
    UNION
    SELECT id, money FROM exp WHERE money > 5000
) a
ORDER BY money LIMIT 200000; 
```

0.16 秒

```
SELECT id, money
FROM combi
WHERE money > 5000 && type = 1
ORDER BY money
LIMIT 200000; 
```

0,14 秒 ... 无索引：0,085 秒

```
SELECT id, money
FROM inc
WHERE money > 5000
ORDER BY money
LIMIT 200000; 
```

0.04 秒

你可以看到预期的结果：

*   当你在一个查询中需要收入和支出时，一张表更快
*   当您只需要收入或支出时，两张表会更快

但我不明白：为什么查询`type = 1`速度这么慢？我认为使用索引会使它几乎等于快？

# javascript - 修改此函数以显示所有选中复选框的值（而不是最后选择）

> ID：15083803
> 
> 赞同：1
> 
> 时间：2013-02-26T07:38:57.840
> 
> 标签：javascript, checkbox, return-value, selected

我正在复制选择/多选元素的功能，并尝试使用此功能来显示已在相关容器中选择的项目。我需要显示在逗号分隔列表中选择的所有值，但它目前只显示一个选择（最后一个选择）。它还显示所选列表项的复选框、背景颜色等，而不是复选框值（即`value="Black"`）。

我将它用于一些无法使用 jQuery UI MultiSelect 小部件的多选表单元素，因为它们需要以非常特定的方式设置样式（使用背景颜色或图像显示的选项并分布在多个列中，等等。 ）。

我在下面包含了相关代码，并在此处发布了样式为*“faux”* -multiselect 元素的工作示例：http: [//jsfiddle.net/chayacooper/GS8dM/2/](http://jsfiddle.net/chayacooper/GS8dM/2/)

JS 片段

```
$(document).ready(function () {
    $(".dropdown_container ul li a").click(function () {
        var text = $(this).html();
        $(".dropdown_box span").html(text);
    });
    function getSelectedValue(id) {
        return $("#" + id).find("dropdown_box span.value").html();
    }
}); 
```

HTML 片段

```
<div class="dropdown_box"><span>Colors</span></div>

<div class="dropdown_container">
<ul>
<li><a href="#"><div style="background-color: #000000" class="color" onclick="toggle_colorbox_alt(this);" title="Black"><div class=CheckMark>&#10003;</div>
<input type="checkbox" name="color[]" value="Black" class="cbx"/></div>Black</a>
</li>
<!-- More list items with checkboxes -->
</ul>
</div> 
```

我尝试了其他几种方法（包括此处列出的许多方法： [如何在 jQuery 中检索复选框值](https://stackoverflow.com/questions/786142/how-to-retrieve-checkboxes-values-in-jquery)），但没有一种方法适用于隐藏复选框和/或我需要合并到这些特定表单元素中的其他功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:52:42.050

好吧，首先将 document.ready 中的 click(..){..} 更改为

```
$(".dropdown_container ul li a").click(function () {
    var text = $(this).html();
    var currentHtml = $(".dropdown_box span").html(); 
    var numberChecked = $('input[name="color[]"]:checked').length;
    $(".dropdown_box span").html(currentHtml.replace('Colors','')); 
    if (numberChecked > 1) { 
        $(".dropdown_box span").append(', ' + text); 
        } else { 
        $(".dropdown_box span").append(text); 
    }
}); 
```

这将正确附加文本。但是我无法理解代码中图像的处理。

更新，仅处理值：替换`var text = $(this).html();`为

```
var text = $(this).find("input").val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:53:52.387

每当触发单击事件时，仅获取复选框的所有值然后将这些值附加到您的跨度可能会更容易。喜欢[http://jsfiddle.net/9w95b/](http://jsfiddle.net/9w95b/)

我还建议不要将`<input>`标签放在标签内`<a>`。

# javafx-2 - 在虚拟机上运行 JavaFx 本机捆绑可执行文件时发生致命错误

> ID：15083804
> 
> 赞同：2
> 
> 时间：2013-02-26T07:38:59.140
> 
> 标签：javafx-2, virtual-machine, fatal-error, coredump

我已经使用x64上的 build.xml构建`JavaFx`代码、部署并包装到自包含`JavaFX`应用程序中。请参阅下面的更多系统信息 -`Ant``Windows 7``Desktop Machine`

```
 Operating System: Windows 7 Professional 64-bit (6.1, Build 7600) (7600.win7_gdr.110622-1503)
           Language: English (Regional Setting: English)
System Manufacturer: INTEL_
       System Model: DH61WW__
               BIOS: BIOS Date: 02/18/11 15:38:44 Ver: 04.06.04
          Processor: Intel(R) Core(TM) i3-2100 CPU @ 3.10GHz (4 CPUs), ~3.1GHz
             Memory: 4096MB RAM
Available OS Memory: 4074MB RAM 
```

当我`JavaFX`在任何 Desktop x64 机器上运行我的本机捆绑应用程序时，它工作得非常好。但是，当我在 上运行相同的本机捆绑`JavaFX`应用程序时`Virtual Machine`，它会成功启动/启动。但是在单击任何按钮或关闭舞台时，它会显示 (Not Responding) 并引发致命错误。最后应用程序崩溃了。

虚拟机的系统信息 -

```
Operating System: Windows Web Server 2008 R2 64-bit (6.1, Build 7601) Service Pack 1 (7601.win7sp1_gdr.110622-1506)
           Language: English (Regional Setting: English)
System Manufacturer: Microsoft Corporation
       System Model: Virtual Machine
               BIOS: BIOS Date: 05/05/08 20:35:56  Ver: 08.00.02
          Processor: Intel(R) Core(TM)2 Quad CPU    Q9400  @ 2.66GHz, ~2.7GHz
             Memory: 3072MB RAM
Available OS Memory: 3072MB RAM
          Page File: 2457MB used, 3683MB available 
```

您可以下载随附的[错误](http://mytestexamplebucket.s3.amazonaws.com/hs_err_pid4016.log?AWSAccessKeyId=AKIAINHDRCMKC5GUSNFA&Expires=1519756149&Signature=hYJ9xFRU2Ce2lLfC757/U5XBXvc=)文件。为了快速浏览 -

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x6dd5fe2d, pid=4016, tid=4292
#
# JRE version: 7.0_10-b18
# Java VM: Java HotSpot(TM) Client VM (23.6-b04 mixed mode windows-x86 )
# Problematic frame:
# C  [glass.dll+0xfe2d]  Java_com_sun_glass_events_KeyEvent__1getKeyCodeForChar+0x134d
#
# Core dump written. Default location: C:\Users\apancholi\Desktop\JavaFXJavaHeapMemoryFixes\JavaHeapSample-201302250\app\hs_err_pid4016.mdmp
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
# 
```

请建议这里发生了什么？

仅供参考：我正在传递这些 VM 参数：-Xms500m -Xmx1g -XX:NewRatio=2 -XX:MaxPermSize=250m

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T08:52:02.960

还有下一个可能性：

*   虚拟环境有问题
*   `Windows Web Server 2008 R2 64-bit`可能不受支持，请参阅此处支持的平台列表：[http ://www.oracle.com/technetwork/java/javafx/downloads/supportedconfigurations-1506746.html](http://www.oracle.com/technetwork/java/javafx/downloads/supportedconfigurations-1506746.html)

无论如何，几乎不可能找出产品的非开发人员的崩溃原因。请在[http://javafx-jira.kenai.com提出问题](http://javafx-jira.kenai.com)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-28T14:15:38.993

我在我的应用程序中也遇到了这个问题，然后我在 Windows 2008 R2 的服务器管理器下安装了“桌面体验”。那么我可以解决我的问题以下是执行此操作的步骤：转到服务器管理器展开功能并单击添加功能选择桌面体验并安装它

它会解决你的问题

# javascript - 使用 Chrome 在画布上绘制图像

> ID：15083805
> 
> 赞同：3
> 
> 时间：2013-02-26T07:39:03.463
> 
> 标签：javascript, html, google-chrome, canvas

我有一个必须在本地运行的 HTML5 应用程序。当我运行应用程序并尝试在画布上加载图像时，在 Chrome 上我收到错误消息：

> 无法从画布获取图像数据，因为画布已被跨域数据污染

HTML 文档和本地文件夹中的图像。这是一个将分发给用户的应用程序，因此我无法运行本地服务器。它必须在 Chrome 上按原样运行...我已阅读有关此问题的答案，但它们都与与本地文件无关的 CORS 和跨组织策略有关...

这种情况的解决方案是什么？如何在 Chrome 本地加载画布上的图像？

编辑：这是引发错误的代码：

```
var canvas = Matach.createElement(false, "canvas", false, false);           
var context = canvas.getContext("2d");
context.clearRect(0, 0, canvas.width, canvas.height);
context.globalCompositeOperation = 'source-over';

context.save();
context.drawImage(
    item.img.img, 
    -item.img.width / 2, 
    -item.img.height / 2, 
    item.img.width, 
    item.img.height
);

context.restore();

res = context.getImageData(0, 0, canvas.width, canvas.height); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-26T11:51:26.333

在 chrome 中 getimagedata 有一些安全问题，所以使用它你必须做一些周转，检查这些帖子以供参考，你会得到解决方案，

[在 Windows 上本地运行时 canvas getImageData 不起作用？（安全例外）](https://stackoverflow.com/questions/4069400/canvas-getimagedata-doesnt-work-when-running-locally-on-windows-security-exce)

[为什么 HTML Canvas getImageData() 不返回刚刚设置的完全相同的值？](https://stackoverflow.com/questions/4309364/why-does-html-canvas-getimagedata-not-return-the-exact-same-values-that-were-j)

# c# - C# - 从组合框中检索选定的值

> ID：15083806
> 
> 赞同：2
> 
> 时间：2013-02-26T07:39:03.577
> 
> 标签：c#, .net, winforms, visual-studio-2010

我有一个带有`ValueMember = ID`and的组合框`DisplayMember = Name`。我需要与该名称关联的值，因此我执行以下操作：

```
if (cboTypeOfMaterial.SelectedIndex != -1)
            {
                string temp = cboTypeOfMaterial.SelectedValue.ToString();
                //More code here...
            } 
```

它将`ID`值作为字符串返回。例如 - “7”。

如果我尝试：

```
if (cboTypeOfMaterial.SelectedIndex != -1)
                {
                    string temp = cboTypeOfMaterial.DisplayMember.ToString();
                    //More code here...
                } 
```

我得到了关键的字符串`Name`。

我需要的是获取所选元素的值`Name`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T07:41:40.310

尝试访问元素，通过`SelectedItem`该元素将为您提供与该条目关联的整个对象，然后您可以访问所需的属性，在您的情况下`ID`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T07:43:41.127

`SelectedValue`将返回中定义的属性的值`ValueMember`，`SelectedItem`将返回被选中的整个对象，如果您想获得除您之外的另一个值，`SelectedValue`则必须将其转换为您的对象，`ComboBox`然后您可以访问您的`Name`属性。

```
string temp = (cboTypeOfMaterial.SelectedItem as YourObjectType).Name; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T07:46:42.233

您可以做的是为组合框中的条目创建一个自定义类。这看起来像：

```
public class ComboBoxItem
{
    public string Display { get; set; }
    public int Id { get; set; }
    public override string ToString()
    {
        return this.Display;
    }
} 
```

然后就可以通过如下代码获取选中的ComboBoxItem：

```
ComboBoxItem cbi = (ComboBoxItem)cboTypeOfMaterial.SelectedValue;
if(cbi != null)
   // Access the Property you need 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-18T13:12:05.773

我知道这是一个老问题，但我很惊讶没有人提到：

```
ComboBox1.GetItemText(ComboBox1.SelectedItem) 
```

它返回所选项目（即`DisplayMember`）的文本表示形式，并且在涉及数据绑定的情况下很有帮助`ComboBox`，或任何`ListControl`与此相关的情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T07:46:09.027

```
string temp = cboTypeOfMaterial.ValueMember.ToString(); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-02-26T07:49:33.963

我认为您也可以使用 Text 属性，但这不是一个好的解决方案。更好的解决方案是建议@dutzu。

```
string temp = cboTypeOfMaterial.Text; 
```

# java - 以编程方式旋转可绘制对象或视图

> ID：15083811
> 
> 赞同：16
> 
> 时间：2013-02-26T07:39:23.750
> 
> 标签：java, android, rotation

```
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
android:drawable="@drawable/your_drawable"
android:fromDegrees="0"
android:pivotX="50%"
android:pivotY="50%"
android:toDegrees="360" /> 
```

我想以编程方式旋转可绘制对象。

我该怎么做？

这是我的回调

```
private class RotateListener implements RotateGestureDetector.OnRotateGestureListener{
    @Override
    public boolean onRotate(MotionEvent event1, MotionEvent event2,
            double deltaAngle) {

        return true;
    }
} 
```

不超过0.1 ，`deltaangle`我不确定提取值是多少。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-27T08:24:28.103

以下代码围绕其中心旋转 ImageView：

```
ImageView myImageView = (ImageView)findViewById(R.id.my_imageview);

AnimationSet animSet = new AnimationSet(true);
animSet.setInterpolator(new DecelerateInterpolator());
animSet.setFillAfter(true);
animSet.setFillEnabled(true);

final RotateAnimation animRotate = new RotateAnimation(0.0f, -90.0f,
    RotateAnimation.RELATIVE_TO_SELF, 0.5f, 
    RotateAnimation.RELATIVE_TO_SELF, 0.5f);

animRotate.setDuration(1500);
animRotate.setFillAfter(true);
animSet.addAnimation(animRotate);

myImageView.startAnimation(animSet); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-01-27T08:27:20.307

这是为 imageView 放置旋转可绘制对象的一个​​很好的解决方案：

```
Drawable getRotateDrawable(final Bitmap b, final float angle) {
    final BitmapDrawable drawable = new BitmapDrawable(getResources(), b) {
        @Override
        public void draw(final Canvas canvas) {
            canvas.save();
            canvas.rotate(angle, b.getWidth() / 2, b.getHeight() / 2);
            super.draw(canvas);
            canvas.restore();
        }
    };
    return drawable;
} 
```

用法：

```
Bitmap b=...
float angle=...
final Drawable rotatedDrawable = getRotateDrawable(b,angle);
root.setImageDrawable(rotatedDrawable); 
```

另一种选择：

```
private Drawable getRotateDrawable(final Drawable d, final float angle) {
    final Drawable[] arD = { d };
    return new LayerDrawable(arD) {
        @Override
        public void draw(final Canvas canvas) {
            canvas.save();
            canvas.rotate(angle, d.getBounds().width() / 2, d.getBounds().height() / 2);
            super.draw(canvas);
            canvas.restore();
        }
    };
} 
```

另外，如果您想旋转位图，但又怕 OOM，您可以使用我在[**此处制作的 NDK 解决方案**](https://stackoverflow.com/questions/18250951/jni-bitmap-operations-for-helping-to-avoid-oom-when-using-large-images)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T08:19:16.940

由于您正在尝试使用 Almero 的 Android 手势检测器，因此我决定这样做以找到合适的解决方案：

```
public class MainActivity extends Activity {

    private RotateGestureDetector mRotateDetector;
    private float mRotationDegrees = 0.f;
    private static final float ROTATION_RATIO = 2;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mRotateDetector = new RotateGestureDetector(getApplicationContext(), new RotateListener());
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        mRotateDetector.onTouchEvent(event);
        return super.onTouchEvent(event);
    }

    private class RotateListener extends RotateGestureDetector.SimpleOnRotateGestureListener {
        @Override
        public boolean onRotate(RotateGestureDetector detector) {
            mRotationDegrees -= detector.getRotationDegreesDelta();
            ImageView v = (ImageView) findViewById(R.id.imageView);
            // For NineOldAndroids library only!
            ViewHelper.setRotation(v, mRotationDegrees * ROTATION_RATIO);
            // For HONEYCOMB and later only!
            v.setRotation(mRotationDegrees * ROTATION_RATIO);
            return true;
        }
    }
} 
```

它对我来说很好用（我可以用双指旋转手势旋转 ImageView。注意：不要忘记选择适当的旋转方法调用。我评论了它们以引起您的注意。

ROTATION_RATIO 只是一个乘数，可以加快我手指运动的旋转响应。您可以对视图使用任何旋转轴（setRotation()、setRotationX() 和 setRotationY()）方法。

要在 API 级别低于 11 的 Android 设备（Honeycomb 之前的设备）上启用此代码的支持，您可能需要使用 NineOldAndroid 库。

# xml - 从浮点计算人类可读的时间戳（EasyIP）？

> ID：15083812
> 
> 赞同：1
> 
> 时间：2013-02-26T07:39:23.740
> 
> 标签：xml, firebird

我需要在从 Easy-IP 提取的 XML 数据中转换一些日期+时间戳。我不认识原始值，它们似乎是一个浮点值，但整数部分对于 UNIX 风格来说太小了。

我可能会再次遇到从这种类型的系统中提取的数据，所以我想要一种标准的转换方法，它不依赖于直接访问数据库（可能不同或无法访问）

我相信后端数据库是 Firebird，但根据他们的文档，他们从 1753 年 1 月 1 日开始计数。

一些样本值（每行是一个不同的实体），它们都应该指过去 15 年发生的活动，而且可能更近：

```
CREATED="39660.2632087847" UPDATED="39660.2632160185"
CREATED="39660.2631284838" UPDATED="39750.4032429514"
FIRST_SUCCESSFUL_CONTACT="39668.128960544"  LAST_SUCCESSFUL_CONTACT="41301.0505147685"
FIRST_SUCCESSFUL_CONTACT="39668.1289603588" LAST_SUCCESSFUL_CONTACT="41301.0505142245" 
```

我希望其他人以前已经看过这个，而不是提出一个难题。如果您有可靠的方法使用 XSL、Java 或（不太受欢迎的）PERL 转换为日期+时间戳，则可以加分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:03:48.673

我的猜测是这些值来自内部 Delphi [TDateTime](http://docwiki.embarcadero.com/Libraries/XE3/en/System.TDateTime)表示：

Delphi 程序在内部将 TDateTime 值表示为浮点值，整数部分表示自 1899 年 12 月 30 日以来的天数，小数部分表示自午夜以来的天数。

所以，例如，

*   `39660`是`Jul-31-2008`
*   `0.2632087847`是`6:19:01.239 AM`

因此，您的第一个示例是`2008-07-31 06:19:01`

我不认为数据是日期的内部火鸟表示，所以我的猜测也是原始系统不使用`TimeStamp`数据类型，而是使用双精度或其他数字类型来存储日期。

综上所述，转换日期的最简单方法似乎是在 Delphi 中编写一个程序来更改日期表示。例如，为了计算显示的日期，我写道：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  Dt: TDateTime;
begin
  Dt := 39660.2632087847;
  ShowMessage(FormatDateTime('dd/mm/yyyy hh:nn:ss.zzz', Dt));
end; 
```

如果您手头没有 Delphi，还有[其他](http://www.joelonsoftware.com/items/2006/06/16.html)使用类似表示的工具，如果您运气不好，您现在拥有所有信息来自己做数学。转换为 UnixTime 并不是特别困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T21:13:04.493

我找不到这种 Java 转换的准确示例。这是我将使用的简化版本：

```
public static String convertEasyIPTime (double dateTimeDouble, String timeZoneCode) {

  TimeZone tz = TimeZone.getTimeZone(timeZoneCode);

  long days = (long) dateTimeDouble;
  long adjustedDays = days - 25569; // Days between Jan 1st 1753 (Delphi) and Dec 31st 1970 (Java)

  long datePortion = adjustedDays * 24 * 60 * 60 * 1000;
  long timePortion =  (long) ((dateTimeDouble - days) * 60 * 60 * 24 * 1000);

  int zoneAndDSTOffset = tz.getOffset(datePortion);

  Date output = new Date (datePortion + timePortion - zoneAndDSTOffset);
  DateFormat formatter = new SimpleDateFormat("dd MMM yyyy HH:mm:ss z");  
  formatter.setTimeZone(TimeZone.getTimeZone(timeZoneCode)); 
  return formatter.format(output);
} 
```

调用它的示例：

```
System.out.println(convertEasyIPTime (39940.1295844213d, "CST")); 
```

# shell - Ubuntu：- 将删除关键字附加到文件

> ID：15083819
> 
> 赞同：2
> 
> 时间：2013-02-26T07:39:35.943
> 
> 标签：shell, ubuntu

我有一个包含文件名的文件。

```
file1
file2
file3
file4 
```

我想创建一个在前面添加'rm'的shell脚本

```
rm file1
rm file2
rm file3
rm file4 
```

如何在文件名前面附加 rm？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T07:42:02.720

您可以通过多种方式做到这一点 - `sed`, `vim`, `perl`, `awk`.

或者您可以`xargs`像这样简单地使用：

```
xargs rm < filelist 
```

如果您真的坚持要编辑`filelist`，请使用`sed`：

```
sed 's/^/rm /g' filelist > newscript 
```

（这意味着找到行`^`首并将其替换`rm`为每一行`/g`）。

您甚至可以`filelist`使用以下命令就地编辑`sed -i`：

```
sed -i 's/^/rm /g' filelist 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T09:45:42.687

我认为 mvp 的答案是最好的，但是如果您正在谈论*将*当前文件列表更改为`rm`在每个文件名之前插入的 shell 脚本，您可以使用任何支持查找和替换正则表达式的良好文本编辑器来简单地执行此操作。

搜索词 ：`^(.)`

替换 ：`rm \1`

Vi 单线：

```
:%s/^/rm / 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:57:03.367

另一种方法是使用简单的 shell 脚本。

```
#!/bin/sh

FILE=$1

while read line
do
  echo "Removing $line"
  rm $line
done < $FILE 
```

然后你可以运行它`sh multirm.sh filelist`

如果你想简单地添加`rm`到文件中，你可以使用 awk 。

`awk '{ print "rm", $1" }' filelist`

# php - 查询在 mysqlyog 查询窗口中有效，但在 php 脚本中无效？

> ID：15083820
> 
> 赞同：1
> 
> 时间：2013-02-26T07:39:38.153
> 
> 标签：php, mysql

我有两个要从中选择的表 1 我想获取用户信息 2 我想获取属于该用户的所有图像。但查询不检索图像，但在查询窗口中我得到它们。如果我决定从图像表中选择图像，也会在脚本中显示图像，但是当我执行连接时它不起作用。我知道有些事情做得不好。请任何帮助将不胜感激波纹管是代码

```
$query='SELECT 
tish_clientinfo.lastname, tish_clientinfo.address,
tish_clientinfo.firstname,
tish_images.image_name
  FROM  tish_clientinfo 
  INNER JOIN tish_images 
ON tish_clientinfo.user_id = tish_images.user_id
 WHERE user_id= '. intval($_GET['user_id']);
$result = $con->prepare($query);
$result->execute(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:51:45.667

可能是服务器弄糊涂了`user_id`。试试这个

```
$query='SELECT 
tish_clientinfo.lastname, tish_clientinfo.address,
tish_clientinfo.firstname,
tish_images.image_name
  FROM  tish_clientinfo 
  INNER JOIN tish_images 
ON tish_clientinfo.user_id = tish_images.user_id
 WHERE tish_clientinfo.user_id= '. intval($_GET['user_id']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T07:53:13.490

在 user_id 上的 where 子句指定表之后，您只是遇到了一个小问题，就像我在下面的答案中所做的那样

```
$query='SELECT 
tish_clientinfo.lastname, tish_clientinfo.address,
tish_clientinfo.firstname,
tish_images.image_name
  FROM  tish_clientinfo 
  INNER JOIN tish_images 
ON tish_clientinfo.user_id = tish_images.user_id
 WHERE tish_clientinfo.user_id= '. intval($_GET['user_id']);
$result = $con->prepare($query);
$result->execute(); 
```

# perl - 如何从 perlcc -B 反编译 perl 字节码？

> ID：15083825
> 
> 赞同：5
> 
> 时间：2013-02-26T07:39:50.830
> 
> 标签：perl

我想用 deparse 反编译字节码，然后我失败了。我做了以下测试：（perl 5.8.9）

1) 用单行创建一个名为 t.pl 的文件

```
 print 1; 
```

2）编译得到plc文件

```
 $ perl -MO=Bytecode,-H,-ot.plc t.pl 
```

3）尝试反编译

```
 $ perl -MO=Deparse t.plc
    use ByteLoader 0.06;
    t.plc syntax OK 
```

4) 使用简洁模块 $ perl -MO=Concise,-exec t.plc

```
1  <0> enter 
2  <;> nextstate(main 174 y.pl:1) v
3  <0> pushmark s
4  <$> const(IV 1) s
5  <@> print vK
6  <@> leave[1 ref] vKP/REFC
y.plc syntax OK

with this method, we can got some valuable info, but it is hard to read. 
```

我无法获取源代码。我在网上搜索过，[似乎](https://stackoverflow.com/questions/4048614/how-can-i-reverse-engineer-a-perl-program-that-has-been-compiled-with-perlcc)Deparse 模块可以对`perlcc -B`生成的文件进行解析。

任何的想法？谢谢

指：

[http://ask.slashdot.org/story/05/11/11/0129250/protecting-perl-code](http://ask.slashdot.org/story/05/11/11/0129250/protecting-perl-code)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:46:39.643

这不明显的原因是字节码的存储方式。Deparse 需要有一棵 OP 树，但`B::Bytecode`只是按 exec 顺序存储操作而不构建树。在 Bytecode.pm 构造它之后，可以通过弄乱`PL_main_root`and`PL_main_start`指针然后调用`newPROG`它们来对操作树进行线程化。

简而言之，它*可以*完成，但不能使用标准工具。你必须写一个东西来做，这需要一点 Perl 的知识。

# github - Github 远程提交更改

> ID：15083827
> 
> 赞同：2
> 
> 时间：2013-02-26T07:39:53.730
> 
> 标签：github

我克隆了我的存储库并进行了一些更改。我尝试将其推送到 github：

```
git add *
git commit -m "changes"
git push origin master 
```

但它没有找到我的更改。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:06:46.453

Note that:

*   `git add .` is the usual form to add everything in the current directory and subdirectories.
    (depending on your shell, '`*`' might not work as expected. A dot '`.`' will)
*   `git add -u .` would allow you to record the *deletion* of files.
*   `git add -A .` is a [shortcut to do both](https://stackoverflow.com/questions/572549/difference-of-git-add-a-and-git-add).

# bash - 基于mime类型递归搜索目录中文件的脚本

> ID：15083829
> 
> 赞同：1
> 
> 时间：2013-02-26T07:40:06.170
> 
> 标签：bash

我在centos 6盒子上有samba共享目录，我只想确保共享目录中的所有文件都必须是windows可执行文件（.exe），有没有办法根据他们的mimetype搜索samba共享上的所有目录保留“application/x-dosexec”mime 类型文件并删除其余文件。

我试过了

```
for i in /mnt/storage/SAMBA/*
do
    [ x"$(file --mime -b "$i")" != application/x-dosexec ] && echo rm "$i"
done 
```

但他们不会递归搜索

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:54:06.493

使用`find`，该选项`-type f`会将搜索限制为仅文件：

```
find /mnt/storage/SAMBA/ -type f | while read i ; do ... ; done 
```

请注意，您`x`在比较中忘记了 。必须是`xapplication/x-dosexec`，否则您将删除所有文件。

# mysql - MYSQL 从随机数开始选择行

> ID：15083830
> 
> 赞同：2
> 
> 时间：2013-02-26T07:40:06.940
> 
> 标签：mysql

我想从表格中间的任何地方选择 30 行（按顺序排列）。我正在尝试通过添加`serial`具有唯一`auto_increment`序列号的列“”来做到这一点。我的代码是：

```
SELECT * FROM A2 
     WHERE serial>(
         SELECT ROUND(RAND()*(
              SELECT COUNT(*) FROM A2))
) LIMIT 30 
```

该部分`(SELECT ROUND(RAND()*(SELECT COUNT(*) FROM A2)))`工作正常，即从 1 到表中的行数生成一个随机数，但完整的查询不起作用。它会抛出不连续的行，并且几乎总是抛出序列低于 30 的第一行。

有人可以帮我写这个查询。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:16:27.873

假设您的序列号从 0 开始，这应该可以工作；如果它从 1 开始，只需替换`>=`为`>`.

```
SELECT A2.*
FROM A2 
JOIN (SELECT FLOOR(RAND() * (SELECT COUNT(*)-29 FROM A2)) serial) b
WHERE a2.serial >= b.serial
ORDER BY a2.serial
LIMIT 30; 
```

[一个用于测试的 SQLfiddle](http://sqlfiddle.com/#!2/7d2cc/1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T07:41:14.163

尝试这个

```
SELECT * FROM A2 ORDER BY RAND() LIMIT 30 
```

这将选择 30 个随机行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T07:41:44.737

像这样附加`ORDER BY serial`：

```
SELECT * 
FROM A2 
WHERE serial > (
    SELECT ROUND(RAND() * (
        SELECT COUNT(*) FROM A2))) 
ORDER BY serial
LIMIT 30; 
```

此外，您可能需要使用`FLOOR`而不是`ROUND`从上限中减去 30，如下所示：

```
WHERE serial > (
    SELECT FLOOR(RAND() * ((SELECT COUNT(*) FROM A2) - 30))) 
```

否则，当 random 接近表格末尾时，您可能会得到少于 30 行。

对不起。那个答案是错误的。这对我有用：

```
SELECT a2.*
FROM a2, 
    (SELECT FLOOR(RAND() * ((SELECT COUNT(*) FROM a2) - 30)) AS r) AS r 
WHERE a2.serial BETWEEN r.r AND r.r + 29; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T08:17:15.083

我会这样做

```
SELECT * FROM A2 
WHERE serial > (
    SELECT ROUND(RAND()*(SELECT COUNT(*) FROM A2))
) 
ORDER BY serial
LIMIT 30 
```

# fluent-nhibernate - 如何在流畅的 nhibernate 中的一对多映射中使用复合 ID？

> ID：15083840
> 
> 赞同：3
> 
> 时间：2013-02-26T07:40:46.403
> 
> 标签：fluent-nhibernate, one-to-many, composite-id

我遇到了一个复合 ID 唯一标识实体的场景。我将 MSSQL 定义为在这些字段上有多个主键。此外，我希望使用自动递增的 id 来引用一对多关系。这是架构：

```
public class Character
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual Region Region { get; set; }
    public virtual string Realm { get; set; }
    public virtual IList<CharProgression> Progression { get; set; }
}

public class CharProgression
{
    public virtual int Id { get; set; }
    public virtual Character Character { get; set; }
    public virtual Stage Stage { get; set; }
    public virtual int ProgressionPoints { get; set; }
    public virtual int NumOfSaves { get; set; }
}

public class Stage
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual string Description { get; set; }
} 
```

映射如下所示：

```
class CharacterMap : ClassMap<Character>
{
    public CharacterMap()
    {
        Table("characters");
        Id(ch => ch.Id, "id").GeneratedBy.Identity().Not.Nullable();
        CompositeId().KeyProperty(ch => ch.Region, "region")
            .KeyProperty(ch => ch.Realm, "realm")
            .KeyProperty(ch => ch.Name, "name");
        HasMany<CharProgression>(ch => ch.Progression).Inverse().Cascade.All();
    }
}

class CharProgressionMap : ClassMap<CharProgression>
{
    public CharProgressionMap()
    {
        Table("char_progression");
        CompositeId().KeyReference(cprog => cprog.Character, "char_id",
                     .KeyReference(cprog => cprog.Stage, "stage_id");
        Id(cprog => cprog.Id, "id").GeneratedBy.Identity().Not.Nullable();
        Map(cprog => cprog.ProgressionPoints, "progression_points");
        Map(cprog => cprog.NumOfSaves, "num_of_saves");
    }
}

public class StageMap : ClassMap<Stage>
{
    public StageMap()
    {
        Table("stages");
        Id(st => st.Id, "id").GeneratedBy.Identity().Not.Nullable();
        Map(st => st.Name, "name");
        Map(st => st.Description, "description");
    }
} 
```

现在，问题是我想在字符上使用 SaveOrUpdate() 并使用复合 id 进行更新，因为字符唯一性由这 3 个字段定义 - 区域、领域、名称。但是，当我从 CharProgression 引用字符时，我不想使用复合 Id，因为我不希望 char_progression 表包含 3 个字段来识别字符，一个简单的 Id 就足够了......这就是为什么我还在 Character 实体上定义了一个 IDENTITY id。

我正在尝试的可能吗？还是有其他方法可以实现这一目标？

谢谢 ：）

# algorithm - 聚类算法 - 应用于一组地震数据

> ID：15083842
> 
> 赞同：0
> 
> 时间：2013-02-26T07:40:54.520
> 
> 标签：algorithm, cluster-analysis

因此，我希望将聚类算法应用于美国地质调查局提供的地球数据。

[http://earthquake.usgs.gov/earthquakes/feed/](http://earthquake.usgs.gov/earthquakes/feed/)

我的主要目标是根据地震信息确定前 10 个最危险的地方（根据地震数量或一个地方经历的地震强度）。

有什么建议吗？我正在查看 k-means，然后只取 k-means 的总和（每个地震震级在每个集群中加权）来查看最危险的集群。

我也在用 ruby​​ 写这个作为代码参考。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:44:37.710

K-means 不能很好地处理数据集中的异常值。

此外，它是围绕*方差*设计的，但经纬度的方差并没有真正的意义。事实上，k-means 无法处理纬度 +-180° 环绕。相反，您将需要使用**大圆距离**。

因此，请尝试使用基于*密度*的聚类算法，该算法允许您使用诸如大圆距离之类的距离！

阅读 Wikipedia 和一本关于聚类分析的好书。

# binary-search-tree - 获取表达式不匹配错误

> ID：15083855
> 
> 赞同：0
> 
> 时间：2013-02-26T07:41:29.600
> 
> 标签：binary-search-tree, smlnj, ml

我正在尝试为 SML/nj 中的二叉搜索树实现节点删除功能。但是我收到一个约束错误，我不明白为什么......

```
datatype 'a tree = Empty | Node of 'a * 'a tree * 'a tree;
datatype 'a stree = STree of ('a * 'a -> bool) * ('a * 'a -> bool) * 'a tree;

fun removeMin Empty = Empty
  | removeMin (Node(_,Empty,r)) = r
  | removeMin (Node(k,l,r)) = Node(k, removeMin l, r);
removeMin: 'a tree -> 'a tree;

fun get_left_most Empty = Empty
  | get_left_most (Node(k,Empty,r)) = Node(k,Empty,r)
  | get_left_most (Node(_,l,_)) = get_left_most l;
get_left_most: 'a tree -> 'a tree;

fun get_key (Node(k, l, r)) = k;
get_key: 'a tree -> 'a;

fun tree_empty Empty = true
  | tree_empty (Node(_,_,_)) = false;
tree_empty: 'a tree -> bool;

fun remove v (STree(f, g, stree2)) =     
    let
        fun remove2 v Empty = Empty
          | remove2 v (Node(k,l,r)) =
            if f(v, k) then 
                if (tree_empty l) then r
                else if (tree_empty r) then l
                else Node(get_key (get_left_most r), l, removeMin r)
            else if g(v, k) then Node(k, (remove2 v l), r)
            else Node(k, l, remove2 v r);
    in
        STree(f, g, (remove2 v stree2))
    end;
remove: 'a -> 'a stree -> 'a stree; 
```

这是我得到的错误：（对于`get_key`）

```
Warning: match nonexhaustive
          Node (k,l,r) => ... 
```

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:50:22.893

您使用`=`in进行比较`remove`意味着树必须包含*相等类型*（因此 SML 推断的类型变量中的两个`'`字符`''Z`）但您声称它更通用：`remove: 'a -> 'a stree -> 'a stree;`.

您需要仅使用相等类型（即 declare `remove: ''a -> ''a stree -> ''a stree;`）
*或*重新定义`remove2`以使用案例分析而不是比较。

例如，

```
| remove2 v (node as Node(k, Empty, Empty)) = if f(v, k) then Empty else node 
```

# java - Hashmap 键不起作用

> ID：15083860
> 
> 赞同：0
> 
> 时间：2013-02-26T07:41:49.667
> 
> 标签：java, hashmap

我有一个 HashMap，其中某些键（例如“崩溃”和“崩溃”）返回相同的响应。我想创建一个新的 HashMap，将同义词映射到 responseMap 中的唯一键（例如，将 synonymMap 中的“crash”、“crashes”和“crashed”映射到“crash”）。

```
 private void fillSynonymMap()
  {
    synonymMap.put("crash", "crash");
    synonymMap.put("crashes", "crash");
    synonymMap.put("crashed", "crash");
  } 
```

我坚持的是如何输入这些键，以便我可以简化下面的代码。

```
 private void fillResponseMap()
{
    responseMap.put("crash", 
                    "Well, it never crashes on our system. It must have something\n" +
                    "to do with your system. Tell me more about your configuration.");
    responseMap.put("crashes", 
                    "Well, it never crashes on our system. It must have something\n" +
                    "to do with your system. Tell me more about your configuration.");\
   responseMap.put("crashed", 
                    "Well, it never crashes on our system. It must have something\n" +
                    "to do with your system. Tell me more about your configuration.");
}

public String generateResponse(HashSet<String> words)
{
    for (String word : words) {
        String response = responseMap.get(word);
        if(response != null) {
            return response;
        }
    }

    // If we get here, none of the words from the input line was recognized.
    // In this case we pick one of our default responses (what we say when
    // we cannot think of anything else to say...)
    return pickDefaultResponse();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:05:29.180

在有点混乱之后，我写了一个函数来查找同义词，然后返回默认消息。

```
public String getResponse()
{
    HashMap<String, String> responseMap = new HashMap<String, String>();
    HashMap<String, String> synonymMap = new HashMap<String, String>();

    responseMap.put("crash", "Hello there");
    // Load the response value.
    synonymMap.put("crash", "crash");
    synonymMap.put("crashed", "crash");
    synonymMap.put("crashes", "crash");
    // Load the synonyms.

    String input = "crashed";
    // Select input value.

        if(responseMap.containsKey(input))
        {
            // Response is already mapped to the word.
            return responseMap.get(input);
        }
        else
        {
            // Look for a synonym of the word. 
            String synonym = synonymMap.get(input);
            if(!synonym.equals(input) && responseMap.containsKey(synonym))
            {
                // If a new value has been found that is a key..
                return responseMap.get(synonym);
            }
        }
        // If no response, set default response.
    input = "This is a default response";
    return input;
} 
```

如您所见，该函数首先检查密钥是否存在。如果没有，它会尝试使用同义词。如果该同义词未通过测试，它将移至底部的默认代码，这会将输入设置为某个默认值并返回：)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:50:53.530

您可以使用第二张地图。

第一个映射将同义词翻译成基本键，然后可以将其用于带有答案的第二个映射。

这也允许在不扩大实际响应图的情况下灵活扩展同义词。

此外，在这种情况下，您实际上可以使用另一种类型作为答案映射的键。它只需要与同义词映射的值类型相同。

这样，你也可以使用

```
Map<String, YourEnum> and Map<YourEnum, String> 
```

使用 EnumMap 作为 Map 接口的实现。

# android - 使用 Sqlite 从 Android 中的另一个数据库复制一个数据库

> ID：15083861
> 
> 赞同：0
> 
> 时间：2013-02-26T07:41:51.747
> 
> 标签：android, android-sqlite

我想将数据库 A 中的表中的一些列复制到数据库 B 中的表中。我使用以下代码，但它会打印错误消息“OldDB.ACC 表不存在”。我应该如何纠正它？谢谢！

顺便说一下，我把数据库 B (OldDB) 放到 DDMS/data/data/project name/databases

谢谢！！

```
public class DB {

private static final String TAG = "NotesDbAdapter";
private DatabaseHelper mDbHelper;
private SQLiteDatabase mDb;

private static final String DATABASE_CREATE_ACC = "create table ACC "
        + "(_id integer primary key autoincrement, "
        + "Phone text, Name text, " + "MemID text, Smscode text, "
        + "RegDate text, Device text);";

private static final String DATABASE_NAME = "Db";

private static final String DATABASE_TABLE_ACC = "ACC";

private static final int DATABASE_VERSION = 1;

private final Context mCtx;

private static class DatabaseHelper extends SQLiteOpenHelper {

    DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    // create the database if there is no database
    // database stored inside the application
    @Override
    public void onCreate(SQLiteDatabase db) {

        db.execSQL(DATABASE_CREATE_ACC);

        String str = "INSERT INTO " + DATABASE_TABLE_ACC + " (Phone) SELECT Phone FROM OldDB.ACC";
        db.execSQL(str);

    } 
```

# tomcat - 热部署不起作用

> ID：15083868
> 
> 赞同：2
> 
> 时间：2013-02-26T07:42:16.113
> 
> 标签：tomcat, liferay, liferay-6

我正在使用 Liferay Portal 6.1 CE。

我已经在 eclipse indigo 中设置了开发环境。

当我部署一个 portlet 时，它会移动到 Portal Bundle 内的部署文件夹。但没有被部署。我已经测试过另一个战争，放置在部署文件夹中。但同样发生

热部署不起作用。我能做什么？帮帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T08:39:23.407

可能是您移动了一个安装，并且您当前的设置包括与您期望的不同的 liferay.home。

在 Liferay 启动时，日志会说明 Liferay 监控的自动部署目录。在 tomcat/logs/catalina.out 中查找如下所示的一行：

```
08:34:58,902 INFO  [pool-2-thread-1][ServerDetector:154] Server supports hot deploy
08:34:58,910 INFO  [pool-2-thread-1][PluginPackageUtil:1030] Reading plugin package for the root context
08:35:01,137 INFO  [pool-2-thread-1][AutoDeployDir:106] Auto deploy scanner started for /opt/lds/lds161/liferay-portal-6.1.20-ee-ga2/deploy 
```

此外，无论 Tomcat/Liferay 以何种用户身份运行，都需要对该目录以及 tomcat 的 webapps 目录具有读/写权限，以便热部署工作。如果无法从自动部署文件夹中删除插件，则不会部署它们。

通常，您会在 portal-setup-wizard.properties 中找到 liferay.home 设置（这是部署目录的默认父目录），但此设置也可能已转换到您的数据库中（以防您想知道为什么不会拾取对此值的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:36:13.050

我可以在您的帖子中看到 2 个问题。

`1.` *热部署不起作用*

确保您已在文件中指定热部署文件夹`portal-ext.properties`。

`auto.deploy.deploy.dir=/app/portal/liferay-portal-6/deploy`

然后，您可以在 /app/portal/liferay-portal-6/deploy 文件夹中部署您的战争文件。

Liferay 将其拾取并将其放入 /app/portal/liferay-portal-6/../server/default/deploy 文件夹中。

更多细节可以在[这里](http://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/auto-deploy)找到。

`2.` *它移动到 Portal Bundle 中的 deploy 文件夹。但没有被部署*

您在日志中看到任何异常吗？不是说有 1 个 Portlet 可供使用吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T09:10:32.217

检查服务器配置中的自动部署路径。![在此处输入图像描述](../Images/c46472a3f68cf8bb718947492f4fdc9c.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-21T13:54:32.193

您需要在插件 sdk 中的 build.(user_name).properties 中添加以下条目。如果您没有找到此文件，则需要创建它。设置你的目录

> app.server.parent.dir=D:\Projects\Site\liferay-portal-6.2.0-ce-ga1
> 
> app.server.portal.dir = D:\Projects\Site\liferay-portal-6.2.0-ce-ga1\tomcat-7.0.42\webapps\ROOT
> 
> app.server.lib.global.dir = D:\Projects\Site\liferay-portal-6.2.0-ce-ga1\tomcat-7.0.42\lib\ext
> 
> app.server.deploy.dir = D:\Projects\Site\liferay-portal-6.2.0-ce-ga1\tomcat-7.0.42\webapps
> 
> app.server.type = tomcat
> 
> app.server.dir = D:\Projects\Site\liferay-portal-6.2.0-ce-ga1\tomcat-7.0.42

希望这会帮助你。

# asp.net - 如何将身份验证从 ADFS 回退到基于表单

> ID：15083871
> 
> 赞同：0
> 
> 时间：2013-02-26T07:42:31.537
> 
> 标签：asp.net, forms-authentication, adfs

我们有一个使用表单身份验证（ASP.NET 成员资格）的 ASP.NET 应用程序。现在我们希望在以下场景中使其成为可感知声明的 ASP.NET 应用程序：

1.  ADFS 充当 Intranet (AD) 用户的 IP-STS
2.  如果 AD 用户未映射到 ASP.NET Membership User 或映射的 ASP.NET Membership User 没有权限访问应用程序 --> 回退到表单身份验证（外部 IP-STS）
3.  如果最终用户从域外访问应用程序，我们不希望 ADFS 提示输入 Windows 凭据。我们希望使用表单身份验证将最终用户重定向到外部 IP-STS。

这个场景可以实现吗？或者还有其他可能的解决方案吗？我应该如何设置/配置我的应用程序？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:49:49.853

此问题的经典解决方案是拥有两个带有拆分 DNS 的 ADFS。

内部用户重定向到为 WIA 配置的 Intranet 中的 ADFS。

外部用户重定向到为 FBA 配置的 DMZ 中的 ADFS。

对于您的第二点，不清楚是内部用户还是外部用户。

如果是外部的（即 FBA），那么您可以修改表单登录页面，自己访问 AD 并适当地重定向。

# android - 创建 HTML 按钮，例如 xperia x8 主屏幕

> ID：15083876
> 
> 赞同：-1
> 
> 时间：2013-02-26T07:42:50.873
> 
> 标签：android, html, css

因此，大多数电话公司在为他们的手机授权时对 Android UI 都有自己的改动。我喜欢索尼爱立信为他们的手机创建的 UI 设计，他们的主屏幕角落有四分之一圈。

我正在寻找为我的 HTML 页面创建类似外观的按钮。这样我的页面就会在屏幕的 4 个角落有 4 个四分之一圆。

![来源：pianetacellulare.it](../Images/f32eda96c28325ee80e72d45a0a550ed.png)

如果问题被理解，我相信这可以很容易地解决，我只是找不到合适的词来搜索它。本质上，我需要这样的东西，只使用 HTML、CSS 和 JQuery（下面是在 Word 中创建的图像，4 个椭圆是带有下拉选项的按钮）：

![在此处输入图像描述](../Images/a63b994d726d07765bc29f2991c81915.png)

此外，在我们讨论的同时，索尼是否为其定制的 UI 使用了任何术语（例如，Xperia X8 使用 Android 2.1，但其主屏幕与 HTC 手机使用的不同）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T08:03:18.863

有很多方法可以解决这个问题。

如果是我，我只会制作四个位置固定并绕角的 div，如下所示：

[http://jsfiddle.net/KDgLU/2/](http://jsfiddle.net/KDgLU/2/)

```
div.button {
    display:block;
    position:fixed;
    background-color:blue;
    height:50px; width:50px;
}
#topLeft {
    left:0;
    top:0;
    border-bottom-right-radius:100%;
}
#topRight {
    right:0; top:0;
    border-bottom-left-radius:100%;
}
#botLeft {
    bottom:0;
    left:0;
    border-top-right-radius:100%;
}
#botRight {
    bottom:0;
    right:0;
    border-top-left-radius:100%;
} 
```

请注意，您应该使边界半径更加跨浏览器友好。您可以使用这个小工具轻松做到这一点：http: [//border-radius.com/](http://border-radius.com/)

这是你要问的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:12:31.383

您可以使用 CSS 设置它们的样式。这是您的 HTML 的假设：

```
<html>
   <body>
     <button id='upper-left-corner'>Messages</button> 
```

现在添加 CSS：

```
<style>
#upper-left-corner {
position:absolute;
text-align:left;
left:0;
top:0;
</style> 
```

它非常接近。

# java - 如何在jsp中的日期之间进行迭代？

> ID：15083878
> 
> 赞同：0
> 
> 时间：2013-02-26T07:42:58.053
> 
> 标签：java, jsp, date

我有两个日期，fromDate 和 toDate。比如说，txtEffectiveDate 是 26/02/2013 而 txtInactiveDate 是 28/02/2013，我需要在 jsp 中将我的标题设置为`26/02 27/02 and 28/02`. 我写了一个 util 函数，它返回天数的差异。这是我到目前为止所取得的成就。

```
<table border="0" cellpadding="4" cellspacing="1">
            <tr>    
                <td width="100" class="boxBorderHeader141">Service NO.</td> 
                <% long diff= 0 ;
                    diff = DateUtil.getDifference(DateUtil.toUtilDate(request.getAttribute("txtEffectiveDate").toString()), DateUtil.toUtilDate(request.getAttribute("txtInactiveDate").toString()));
                %>  
                <td width="100" class="boxBorderHeader141"><bean:write name="servicesForm" property="txtEffectiveDate" /></td>                              
                <td width="100" class="boxBorderHeader141">Departure Time</td>
                <td width="100" class="boxBorderHeader141">Depot Code</td>
                <td width="100" class="boxBorderHeader141">Service Category</td>
                <td width="100" class="boxBorderHeader141">Service Name</td>  
                <td>&nbsp;</td> 
            </tr>
            </table> 
```

日期应该在服务编号和出发时间之间迭代？

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:39:41.903

在您的脚本中，计算更多日期

**你的代码**

```
long diff= 0 ;
diff = DateUtil.getDifference(DateUtil.toUtilDate(request.getAttribute("txtEffectiveDate").toString()), DateUtil.toUtilDate(request.getAttribute("txtInactiveDate").toString())); 
```

**扩大**

```
Calendar cal = Calendar.getInstance();
for(int i=0; i < diff; i ++){
     cal.setTime(DateUtil.toUtilDate(request.getAttribute("txtEffectiveDate").toString()));
     cal.add(Calendar.DATE, i + 1);
     java.util.Date newDate = cal.getDate();
     //     Display that new date as column
} 
```

# c++ - 为什么 QFileInfo::isExecutable() 对“.msi”文件返回 false？

> ID：15083884
> 
> 赞同：3
> 
> 时间：2013-02-26T07:43:19.747
> 
> 标签：c++, qt

我目前正在使用 C++ 和 Qt 开发应用程序，我需要知道输入文件是否可执行。

我正在使用`QFileInfo::isExecutable()`which 对于大多数文件来说都是正确的，除了那些带有`.msi`扩展名的文件，它返回 false。

如何确定文件是否可执行？出于交叉兼容性的原因，我需要在 Qt 中执行此操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T07:49:31.630

嗯，MSI 文件实际上是不可执行的。它是 Windows Installer 可执行文件使用的一种文档格式。所以`QFileInfo`是正确的。

您需要解决的具体问题是什么？为什么您认为知道文件是否可执行会对您有所帮助？你心中的目标是什么？如果您向我们提供更多信息，我们或许可以提出更好的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T07:49:24.860

您应该知道如何`QFileInfo::isExecutable()`将文件确定为可执行文件：

*   在 Windows Qt 中，仅检查文件的扩展名是否为`.exe`，`.com`而不`.bat`检查其内容。

*   在类 Unix 系统中，它检查文件的属性并为具有执行权限的文件返回 true。

因此`.msi`，在 Windows 下，从 Qt 的角度来看，文件不是可执行文件。

# c# - C# 表单 - 复选框

> ID：15083893
> 
> 赞同：1
> 
> 时间：2013-02-26T07:43:43.680
> 
> 标签：c#, forms, checkbox

我想知道如何限制我的复选框添加到我的列表框中。当用户选中复选框时，它会将“Anchovies”添加到列表框中。我不希望发生的是当用户取消选择复选框并再次重新选择它时，“Anchovies”再次添加到列表框中（显示两批“Anchovies”）。

```
private void checkBox1_CheckedChanged(object sender, EventArgs e)
        {           
                if (checkBox1.Checked)
                 {
                     listBox1.Items.Add("Anchovies");
                     double total = Convert.ToDouble(textBox2.Text);
                     total = total + .5;
                     textBox2.Text = Convert.ToString(total);
                }            
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T07:46:23.673

关键是检查项目`Anchovies`上是否已经存在`listBox1`。

```
private void checkBox1_CheckedChanged(object sender, EventArgs e)
{           
        if (checkBox1.Checked)
         {
             //If the item is already there, we don't do anything.
             if (!listBox1.Items.Contains("Anchovies")) {
                 listBox1.Items.Add("Anchovies");
                 double total = Convert.ToDouble(textBox2.Text);
                 total = total + .5;
                 textBox2.Text = Convert.ToString(total);
             }
        }            
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T07:46:44.893

这样做

```
if (checkBox1.Checked)
             {
                 if(!listBox1.Items.Contains("Anchovies"))
                     listBox1.Items.Add("Anchovies");
                 double total = Convert.ToDouble(textBox2.Text);
                 total = total + .5;
                 textBox2.Text = Convert.ToString(total);
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:50:21.327

要解决此问题，您需要在插入任何值之前检查您的列表框（对于此值，它是否已经存在或不存在）。

例如

```
foreach (var item in listBox1.Items )
{
  if(item.ToString() != "Anchovies")
  {
    listBox1.Items.Add("Anchovies");
  }
  // other code here.
} 
```

# linux - 当 schedule() 返回？

> ID：15083898
> 
> 赞同：2
> 
> 时间：2013-02-26T07:44:24.753
> 
> 标签：linux, linux-kernel, kernel, scheduling, interrupt-handling

在阻塞 IO 的情况下，例如驱动程序读取，我们在某些条件下调用 wait_event_interruptible()。当条件满足时，将完成读取。我查看了 wait_event_interruptible() 函数，它检查条件并调用 schedule()。schedule() 将寻找下一个可运行的进程并进行上下文切换，其他进程将运行。这是否意味着当该进程再次被唤醒时，当前进程要执行的下一条指令将在 schedule() 函数中？

1.  如果是，如果多个进程自愿调用schedule，那么所有进程在唤醒后都会有下一条指令执行一次，会在schedule()中吗？

2.  在 ret_from_interrupt 的情况下，调用 schedule()。什么时候回来？因为 iret 在那之后被执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:58:40.157

我认为第一个问题的答案是`yes`因为这是实现上下文切换的一种相当典型的方式。[例如，这就是 OS161 的工作原理](https://stackoverflow.com/questions/15046278/how-does-threads-sleep-with-interrupt-disabled)。

如果调度程序是从 ISR 调用的，那么一切都应该相同。调度程序应更改上下文并返回到 ISR，然后 ISR 应使用`IRET`. 如果调度程序选择切换到不同的进程/线程并因此加载其上下文并保存旧的，它将返回到不同的进程/线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:14:59.823

关于第 2 点：执行`iret`指令（从中断处理程序返回）并让您进入`ret_from_interrupt`. 然后 Linux 将控制权交给下一个要运行的任务 ( `schedule()`)。编写中断处理程序时最重要的考虑因素之一是，当它们执行时，许多其他活动被禁止（其他较低优先级的中断是主要示例），因此您希望尽快离开那里。这就是为什么大多数中断处理程序只是在返回之前隐藏要完成的工作，然后说工作在其他地方处理（今天在一些特殊的内核线程中）。

# python - Python 中的控制台菜单生成器

> ID：15083900
> 
> 赞同：3
> 
> 时间：2013-02-26T07:44:46.220
> 
> 标签：python, menu, console, eval, generator

正如标题所说，我正在用 Python 编写控制台菜单生成器。我有 2 个课程，菜单和项目。但是我遇到了麻烦。这是代码：

```
class Menu:
    def AddItem(self,item):
        class Item:
            def __init__(self,text,ToDoNext):
                self.text=text
                ??????????????
        self.item.append(Item())
    def Show():
        for i in range(len(self.item)):
            print(str(i+1)+") "+str(self.item[i])+"\n")
        print("0) Back\n")
        option=int(input())
        self.item[option].???????????? 
```

这段代码基本上做了下一个：

```
Main=Menu()
Menu.AddItem("Open file",ToDo1)
Menu.AddItem("Save file",ToDo2)
Menu.Show()

'''1) Open file
   2) Save file
   0) Back
   _
''' 
```

例如，如果我写 1 并按 enter 应该执行代码部分`ToDo1`。我认为的解决方案是下一个：

```
def ToDo1():
    print("Hello, world!")
Menu.AddItem("Say Hello","ToDo1()") 
```

并`eval()`在`Show()`.

但我不太确定这不是正确的方法。

我希望您向我展示一种更好的方法，如果您曾经做过类似的事情（控制台菜单生成器）来共享代码并查看另一种方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T09:39:31.573

我绝对推荐创建一个类`Item`，即使你只有`text`和`function`属性！谁知道你以后需要什么样的复杂逻辑。考虑到这一点，创建菜单可能看起来像这样：

```
main = Menu()
main.AddItem(Item("Open", openFile))
main.AddItem(Item("Close", closeFile)) 
```

`text`此外，在您的和属性之上`function`，您应该向类添加`parent`属性`Item`。`parent`只需指向我们项目的父菜单：

```
main = Menu()

# automatically calls main.AddItem(item1)
open = Item("Open", openFile, main)

# automatically sets parent to main
main.Add(Item("Close", closeFile)) 
```

现在我们知道了正确的`Menu`和`Item`应该如何工作，我们可以开始编写类。

* * *

**菜单**

这应该不会太难，我们只需要`add_item()`,方法`remove_item()`和. 绘制我们的菜单名称也很好，所以让我们添加属性。`draw()``items``name`

```
class Menu:
    def __init__(self, name, items=None):
        self.name = name
        self.items = items or []

    def add_item(self, item):
        self.items.append(item)
        if item.parent != self:
            item.parent = self

    def remove_item(self, item):
        self.items.remove(item)
        if item.parent == self:
            item.parent = None

    def draw(self):
        print(self.label)
        for item in self.items:
            item.draw() 
```

显然，我们可以为菜单编写更多方法和属性，但这包括所有基本方法。

* * *

**物品**

项目类应该更容易，它几乎不需要任何方法。Item 显然需要 a`name`和 a `function`（当 item 被激活时将运行函数），除此之外它还具有前面提到的`parent`属性。我们可能应该创建一个 setter `parent`，它会自动将项目移动到另一个菜单下，但如果你想这样做，我会留给你。也不要忘记`draw()`item 的 - 方法，我们必须能够以他们想要的方式绘制我们的项目，而不是我们`Menu`想要绘制它们的方式。

```
class Item:
    def __init__(self, name, function, parent=None):
        self.name = name
        self.function = function
        self.parent = parent
        if parent:
            parent.add_item(self) # use add_item instead of append, since who
                                  # knows what kind of complex code you'll have
                                  # in add_item() later on.

    def draw(self):
        # might be more complex later, better use a method.
        print("    " + self.name) 
```

* * *

**最后的想法**

我们现在已经完成了我们的菜单，它可以工作，您应该可以将它用作基本菜单。但是，高级控制台菜单只有一个类，称为`MenuItem`. 每个项目的父项将是另一个`MenuItem`（每个，但当然是 root`MenuItem`的），并且菜单在绘制时看起来像这样：

```
[-] Root
    [+] Submenu of Root
    [-] An other submenu of Root
          This menu runs functions, others open/close
         <This menu has focus on it>
          Select this menu by pressing mousedown
    [+] A third submenu of Root 
```

如果不提供`function`参数将创建`items`列表并允许用户关闭/打开菜单项。如果`function`给出，它将正常工作，只有在选择时才执行该功能。更进一步，我们将分离`MenuItem`和 两个子类：`ActionMenu`和`ContainerMenu`。但请记住，这有点难以编码，不适合初学者。你可能想坚持我经历的第一个版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:08:24.527

函数可以在 Python 中自由传递。如果您说`AddItem("Say Hello", ToDo1)`，则传递 value `ToDo1`，它是一个函数对象。然后您可以将其存储在 中`self.function`，稍后使用 钓鱼`fn = self.item[option].function`，然后使用 调用它`fn()`。当您意识到像这样的常规函数​​调用`do_stuff()`实际上是两件事时，一切就更清楚了：首先从变量中获取函数对象`do_stuff`（通常是一个从未修改过的全局变量），然后调用这个函数对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:10:33.410

这是一个工作示例

通常类菜单部分会在另一个名为“myMenu”的文件中，并使用命令导入`from myMenu import myMenu`

items 是一个字典数组。每个列表项都有一个包含两个条目的字典，“text”和“func”

输入称为 n-1，因为数组从零开始

```
import sys
class myMenu:
    items=[]

    def AddItem(self,text,function):
        self.items.append({'text': text, 'func':function})

    def Show(self):
        c=1
        for l in self.items:
            print c, l['text'],"\n"
            c = c +1

    def Do(self,n):
        self.items[n]['func']()

def clist():
    print "cheeses are wensleydale and cheddar\n"

def bye():
    print "bye"
    sys.exit(0)

if __name__ == "__main__":
    m=myMenu()
    m.AddItem("cheese",clist)
    m.AddItem("quit",bye)

while(True):
    m.Show()
    n=input("choice>")
    m.Do(n-1) 
```

如果您想将菜单项作为类而不是字典，则在 MyMenu 类之后立即声明该类，因此类似这样（未测试）

```
class myMenu:
    items=[]
    class Item:
        func=None
        text="default"

        def __init__(self,t,f):
            self.text=t
            self.func=f

    def AddItem(self,text,function):
        self.items.append(Item(text,function)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-04T05:12:23.893

给未来的读者！使用 .python 控制台菜单很容易`console-menu`。

```
pip install console-menu 
```

现在，让我们实现我们的菜单

```
from consolemenu import *
from consolemenu.items import *

# Create the menu
menu = ConsoleMenu("Title", "Subtitle")

# Create some items

# MenuItem is the base class for all items, it doesn't do anything when selected
menu_item = MenuItem("Menu Item")

# A FunctionItem runs a Python function when selected
function_item = FunctionItem(
    "Call a Python function", input, ["Enter an input"]
)

# A CommandItem runs a console command
command_item = CommandItem("Run a console command", "touch hello.txt")

# A SelectionMenu constructs a menu from a list of strings
selection_menu = SelectionMenu(["item1", "item2", "item3"])

# A SubmenuItem lets you add a menu (the selection_menu above, for example)
# as a submenu of another menu
submenu_item = SubmenuItem("Submenu item", selection_menu, menu)

# Once we're done creating them, we just add the items to the menu
menu.append_item(menu_item)
menu.append_item(function_item)
menu.append_item(command_item)
menu.append_item(submenu_item)
menu.show() 
```

你会得到这样的菜单 [![在此处输入图像描述](../Images/9bb73bf0709ebef1d13f96811a492007.png)](https://i.stack.imgur.com/5GWhN.png)

# collada - 将 COLLADA 转换为 POD

> ID：15083901
> 
> 赞同：1
> 
> 时间：2013-02-26T07:44:48.740
> 
> 标签：collada

有谁知道这个错误是什么意思以及如何解决它？“没有找到网格“SketchUp”支持的几何数据我在使用 Collada2POD 工具时遇到了这个问题。

我读了那篇文章。谁能告诉我下面句子中的“线条”指的是什么。

```
 "I ran into that problem, turns out the collada2Pod converter only supports meshes, but sketchUp can generate lines as well as meshes. I had to write my own converter using the OSS Assimp lib."

    "i solved this problem btw, i had a single line which wasn't connected to anything inside my model. Just remove lonely lines and then you should be good to go." 
```

# cocos2d-iphone - 运行 build_native.sh 时出现 Cygwin 错误

> ID：15083909
> 
> 赞同：0
> 
> 时间：2013-02-26T07:45:34.570
> 
> 标签：cocos2d-iphone, cygwin

我得到错误

$ ./build_native.sh NDK_ROOT = D:\android-ndk-r8d COCOS2DX_ROOT = /cygdrive/d/Cocos2D/cocos2d-2.1beta3-x-2.1.0/two_alian/proj.android/../.. APP_ROOT = / cygdrive/d/Cocos2D/cocos2d-2.1beta3-x-2.1.0/two_alian/proj.android/.. APP_ANDROID_ROOT = /cygdrive/d/Cocos2D/cocos2d-2.1beta3-x-2.1.0/two_alian/proj.android使用预构建的外部 make: Entering directory `/cygdrive/d/Cocos2D/cocos2d-2.1beta3-x-2.1.0/two_alian/proj.android' Compile++ thumb : game_shared <= HelloWorldScene.cpp jni/../../Classes/HelloWorldScene.cpp: In member function 'void HelloWorld::spriteMoveFinished(cocos2d::CCNode*)': jni/../../Classes/HelloWorldScene.cpp:130:2: error: 'CCsprite' was not declared in this scope jni/../../Classes/HelloWorldScene.cpp:130:12: error: 'sprite' was not declared in this scope /cygdrive/d/android-ndk-r8d/build/core/build-binary.mk:269: recipe for target`obj/local/armeabi/objs/game_shared/ **/** /Classes/HelloWorldScene.o' failed make: *** [obj/local/armeabi/objs/game_shared/ **/** /Classes/HelloWorldScene.o] 错误 1 make: 离开目录`/cygdrive/d/Cocos2D/cocos2d-2.1beta3-x-2.1.0/two_alian/proj.android'

但都在范围内

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:58:57.963

从阅读本文看来，您的内部`HelloWorldScene.cpp`有错字。

`CCsprite`应该是`CCSprite`。

这只是一个错误，可能还有更多，无法从您发布的内容中分辨出来。

# c# - 增强mysql大表更新

> ID：15083912
> 
> 赞同：0
> 
> 时间：2013-02-26T07:45:39.167
> 
> 标签：c#, mysql, sql-update

我有以下两个mysql（X和mode）表，结构如下

```
 table X
  `time` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `op_mode` varchar(200) NOT NULL,
  `value` double NOT NULL,
  `processed` int(11) NOT NULL DEFAULT '0',
  KEY `time` (`time`),
  KEY `processed` (`processed`) 
```

* * *

```
table mode 
`time_from` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `time_to` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `op_mode` varchar(500) CHARACTER SET utf16 COLLATE utf16_bin NOT NULL 
```

表`X`包含大约 1M 行。我创建了一个 C# 桌面应用程序来使用以下查询更新表的`op_mode`列：`X`

```
UPDATE X, mode
SET X.op_mode = mode.op_mode,
    processed = 1
WHERE (X.TIME BETWEEN mode.time_from
                  AND mode.time_to
) AND processed = 0 
```

但是更新过程需要很长时间。

有什么建议可以加强更新过程吗？

`processed`表中的列`X`用作标志（最初设置为`0`，并`1`在更新行时设置为）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:10:24.613

这取决于“模式”有多少行。如果它相对较少（少于 100 个），您可能最好遍历代码中的每一行并直接更新 X

```
UPDATE X
SET X.op_mode = ?
    processed = 1
WHERE (X.TIME BETWEEN ? AND ?) 
AND processed = 0 
```

此查询将按时使用索引并且速度更快。

对于新数据，最好通过 X 上的插入触发器设置 op_mode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T08:11:27.030

我假设该表`mode`相对较大，并且该表中`time_from`的`time_to`范围永远不会重叠（否则您的架构将没有多大意义）。

在这种情况下，您应该使用 non-standard或使用`mode`在这些字段的表中添加索引`KEY`

```
CREATE INDEX mode_time_from ON mode (time_from);
CREATE INDEX mode_time_to   ON mode (time_to); 
```

除此之外，具有以下复合索引应该会进一步提高速度：

```
CREATE INDEX x_processed_time ON X (processed, time); 
```

# ios - iOS：跳转到 ppt 中的特定幻灯片

> ID：15083914
> 
> 赞同：-1
> 
> 时间：2013-02-26T07:45:52.457
> 
> 标签：ios, uiwebview, powerpoint

我在本地有一个 ppt 文件，我`UIWebView`用下面的代码打开，文件有 10 张幻灯片，现在有要求，我想跳到特定的幻灯片，比如如果我想直接跳到幻灯片#3 那么如何用这段代码来做吗？

```
-(void)loadDocument:(NSString*)documentName inView:(UIWebView*)webView
{
    NSString *path = [[NSBundle mainBundle] pathForResource:documentName ofType:@"ppt"];
    NSURL *url = [NSURL fileURLWithPath:path];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [webView loadRequest:request];
}

//open ppt into UIWebView like,
[self loadDocument:@"newone" inView:self.myWebview]; 
```

我在这里搜索，发现[了这个](https://stackoverflow.com/questions/1229/how-do-i-hyperlink-to-a-specific-slide-of-a-ppt-file)，他们正在做

> 链接到[http://www.whatever.com/hello.ppt#4](http://www.whatever.com/hello.ppt#4)以便最初打开幻灯片 4。

但我的 ppt 文件保存在我的应用程序中的文档目录（本地）中。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:53:26.747

可以设置`UIWebview`ScrollView 的偏移量。

```
[[webView scrollView] setContentOffset:CGPointMake(widht, height) animated:YES]; 
```

在当前缩放比例中查找一张幻灯片的高度。将其乘以第四页以最初打开。并在上面的代码中加入点 CGPointMake(0, heightYouCalculated)

# c# - 在 Outlook 中添加可折叠面板

> ID：15083916
> 
> 赞同：2
> 
> 时间：2013-02-26T07:46:00.190
> 
> 标签：c#, winforms, panel, outlook-addin, customtaskpane

我正在编写一个 Outlook 加载项，并且正在寻找一种方法来使停靠在我的屏幕右侧的面板可折叠。目前面板显示或移除。你也可以缩放它，但这不是我想要的。我已经尝试添加 2 个按钮来更改我的面板 onclick 的宽度，但结果是我的面板的宽度不能小于大约 60px，并且标题仍然存在。这是我用来添加窗格的代码：

```
 Microsoft.Office.Tools.CustomTaskPane ctp;
 private HistoryPane ctrl;
 string title = "Task History";
 ctrl = new HistoryPane(mailItem);
 ctp = Globals.ThisAddIn.CustomTaskPanes.Add(ctrl, title);
 ctp.Visible = true;
 ctp.Width = 460;
 ctp.DockPosition = Microsoft.Office.Core.MsoCTPDockPosition.msoCTPDockPositionRight; 
```

任何帮助删除标题，使面板更薄（约 25 像素），使其可折叠或所有这些都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:13:27.900

这是下面的解决方案：

1 - 在您的用户控件中创建一个公共方法，如下所示：

```
    私有 Microsoft.Office.Tools.CustomTaskPane _ctp；
    公共无效 SetControl（参考 Microsoft.Office.Tools.CustomTaskPane ctp）
    {
        _ctp = ctp;
    }

```

2 - 在您的用户控件中添加任何按钮以展开和最小化，并在点击事件的最小化按钮上放置以下代码：

```
    私人无效btnMinimize_Click（对象发送者，EventArgs e）
    {
        _ctp.DockPosition = Microsoft.Office.Core.MsoCTPDockPosition.msoCTPDockPositionTop；
        _ctp.Height = 50;
    }

```

3 - 在上面的代码之后使用下面的粗体代码：

```
Microsoft.Office.Tools.CustomTaskPane ctp;
private HistoryPane ctrl;
string title = "Task History";
ctrl = new HistoryPane(mailItem);
ctp = Globals.ThisAddIn.CustomTaskPanes.Add(ctrl, title);
ctp.Visible = true;
ctp.Width = 460;
ctp.DockPosition = Microsoft.Office.Core.MsoCTPDockPosition.msoCTPDockPositionRight;

ctrl.SetControl(ref ctp); 
```

希望这会奏效。

# python - 搜索字典以获取每个键的完整路径

> ID：15083918
> 
> 赞同：1
> 
> 时间：2013-02-26T07:46:07.290
> 
> 标签：python, loops, dictionary, key, key-value

我正在尝试为字典中的键构建完整路径。

字典是在键都是唯一的但值不是唯一的地方构建的。

`mydict = {'12345': '11', '45678': '11', '11': '2', '2': '6', '6': '6', '789': '2'}`

我想要做的是获取每个键的完整路径，直到键 == 值，其中输出将是一个如下所示的文件：

```
12345, 11, 2, 6

45678, 11, 2, 6

11, 2, 6

2, 6

6

789, 2, 6 
```

我可以搜索字典一次以获得第一个值，但我不知道如何使用该值作为下一个键搜索并保持所有关联正确。字典只有整数，键是按数字顺序排列的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:51:42.697

这应该这样做：

```
In [53]: mydict = {'12345': '11', '45678': '11', '11': '2', '2': '6', '6': '6', '789': '2'}

In [54]: answer = []

In [55]: for key in mydict:
   ....:     path = [key]
   ....:     while mydict[key] != key:
   ....:         key = mydict[key]
   ....:         path.append(key)
   ....:     answer.append(path)
   ....:     

In [56]: answer
Out[56]: 
[['11', '2', '6'],
 ['789', '2', '6'],
 ['45678', '11', '2', '6'],
 ['2', '6'],
 ['6'],
 ['12345', '11', '2', '6']] 
```

# ssl - 如何配置 Yii 框架以使用 HTTPS？

> ID：15083925
> 
> 赞同：8
> 
> 时间：2013-02-26T07:46:37.850
> 
> 标签：ssl, yii, ssl-certificate

我刚`SSL certificate`为我的网站[linkbook.co](http://www.linkbook.co/)买了一个；

我的网站是使用`Yii Framework`;

我是否必须配置应用程序才能使用`HTTPS`或服务器会为我执行此操作？

如果我必须配置应用程序，我如何告诉`widgets, clistviews, portlets`等，使用 HTTPS 协议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T08:38:55.900

您不需要配置 yii 应用程序，只需在 .htaccess 中使用

```
RewriteCond %{SERVER_PORT} 80
RewriteRule (.*) https://%{SERVER_NAME}/$1 [R,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:33:54.150

Yii 网站上也有一篇很好的 wiki 文章，解释[了具有安全和非安全页面的网站的 URL 管理](http://www.yiiframework.com/wiki/407/url-management-for-websites-with-secure-and-nonsecure-pages)

这篇文章仅在您有一些必须使用 HTTPS 和其他一些 HTTP 的内容时才有用。如果您希望一切都通过 HTTPS 进行，那么它对您没有用处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-10T10:26:26.217

在您的 .htaccess 中添加这些说明，该文件必须位于 index.php 所在的 public_html 文件夹中：

```
RewriteEngine On
RewriteCond %{HTTPS} off 
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

# python - PyML：绘制决策面

> ID：15083931
> 
> 赞同：2
> 
> 时间：2013-02-26T07:47:01.330
> 
> 标签：python, data-visualization, svm, pyml

PyML 具有绘制决策面的功能。

首先，您需要告诉 PyML 使用哪些数据。在这里，我将 sparsevectordata 与我的特征向量一起使用。这是我用来训练我的 SVM 的那个。

```
demo2d.setData(training_vector) 
```

然后你需要告诉它你想使用哪个分类器。我给它一个训练有素的 SVM。

```
demo2d.decisionSurface(best_svm, fileName = "dec.pdf") 
```

但是，我收到此错误消息：

```
Traceback (most recent call last):
**deleted by The Unfun Cat**
    demo2d.decisionSurface(best_svm, fileName = "dec.pdf")
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PyML/demo/demo2d.py", line 140, in decisionSurface
    results = classifier.test(gridData)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PyML/evaluators/assess.py", line 45, in test
    classifier.verifyData(data)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/PyML/classifiers/baseClassifiers.py", line 55, in verifyData
    if len(misc.intersect(self.featureID, data.featureID)) != len(self.featureID) :
AttributeError: 'SVM' object has no attribute 'featureID' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T20:20:43.290

我将直接深入研究源代码，因为我从未使用过 PyML。试图在网上找到它，但我无法在网上找到[PyML 0.7.2](https://bitbucket.org/rryan/pyml/src/6bc8ff53031c/PyML?at=default)`verifyData`中的方法，所以我不得不搜索下载的源代码。

分类`featureID`器仅在`baseClassifier`类的`train`方法中设置（第 77-78 行）：

```
if data.__class__.__name__ == 'VectorDataSet' :
        self.featureID = data.featureID[:] 
```

在您的代码中，`data.__class__.__name__`正在评估`"SparseDataSet"`（或您正在使用的任何其他类）并且表达式评估为`False`（从不设置 featureID）。

然后在`demo2d.decisionSurface`：

```
gridData = VectorDataSet(gridX)
gridData.attachKernel(data.kernel)
results = classifier.test(gridData) 
```

它尝试使用`VectorDataSet`. 在这种情况下`classifier.test`，等效于调用方法，该`assess.test`方法尝试使用以下方法验证数据是否具有与训练数据相同的特征`baseClassifier.verifyData`：

```
def verifyData(self, data) :
  if data.__class__.__name__ != 'VectorDataSet' :
      return
  if len(misc.intersect(self.featureID, data.featureID)) != len(self.featureID) :
       raise ValueError, 'missing features in test data' 
```

然后测试传递的数据的类，即 now `"VectorDataSet"`，并继续尝试访问`featureID`从未创建的属性。

基本上，它要么是一个**错误**，要么是一个隐藏的功能。

长话短说，您必须将数据转换为 a`VectorDataSet`因为`SVM.featureID`未设置其他方式。

此外，您不需要向它传递经过训练的数据集，该函数会为您训练分类器。

**编辑：**

我还想提请注意该`setData`方法：

```
def setData(data_) :
    global data
    data = data_ 
```

*根本*没有类型检查。所以有人可能会设置`data`为*任何东西*，例如整数、字符串等，这将导致`decisionSurface`.

如果您要使用`setData`，则必须小心使用它（仅使用 a `VectorDataSet`），因为代码不像您希望的那样灵活。

# jquery - 如何将 PrimeFaces 中心布局折叠为东部布局

> ID：15083939
> 
> 赞同：1
> 
> 时间：2013-02-26T07:47:32.567
> 
> 标签：jquery, ajax, jsf, jsf-2, primefaces

我有一个 PrimeFaces 布局，它由北、东、中、西 4 个单元组成。我有一个要求，我需要像东边那样折叠中心单元，我的意思是它必须折叠到右侧。在这里我不再需要中心单元，但中心单元是强制性的。我正在做的是我已经移除了东部单元并使用中心单元，但根据我的要求，我必须像东部单元一样折叠我的中心单元。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:55:33.527

这可能会给你一些想法

```
 <p:layout id="L1" widgetVar="L1" >
        <p:layoutUnit position="north">
        </p:layoutUnit>

        <p:layoutUnit id="center" position="center">
        </p:layoutUnit>

        <p:layoutUnit position="east" id="east">
        </p:layoutUnit>

  </p:layout> 
```

你可以这样做来隐藏`L1.layout.hide('east');`和显示`L1.layout.open('east');`

# linux - 如何使用 iwlist 扫描隐藏的 ssid？

> ID：15083940
> 
> 赞同：1
> 
> 时间：2013-02-26T07:47:39.617
> 
> 标签：linux, wifi

我是否应该配置一些无线设置（在 linux 上使用命令）以便“iwlist wlan0 scan”可以列出隐藏的 AP（如果存在）？还是 iwlist 总是报告隐藏的 AP？

（我不想使用 wpa_supplicant 进行 AP 扫描。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-05-13T20:22:50.543

评论一个很老的帖子，但刚刚遇到这个问题，我不相信`iwlist`扫描隐藏的 AP。请记住，AP 名称根本不会广播，因此无法`iwlist`神奇地找到该名称。

相反，您必须在扫描期间传递 AP 的名称。即你必须积极探索那个隐藏的网络。

所以你的命令应该是这样的： `iwlist <my_wireless_interface> scan essid <my_fancy_essid>`

虽然我不知道如何`essid`在一次扫描中扫描多个 hidden ，但这应该会检测到一个隐藏的 ssid。

> 我必须提到这一点——隐藏的 SSID 根本不会增加安全性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:04:09.750

我认为 iwlist 也会显示隐藏的非广播 SSID。但是为了确保您可以通过隐藏您的 AP 的 SSID 并对其进行测试（最好的方法来确保）来测试它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-20T06:59:48.513

```
iwlist <you_interface_name> scanning essid <your_hiddden_ssid> 
```

会成功的

否则，iwlist 会显示 ESSID 为空的隐藏 ssid，例如：`ESSID:""` 您必须通过地址字段匹配，该地址字段包含站/路由器的 MAC。

# sql - 将 OPENQUERY 与动态创建的表一起使用

> ID：15083941
> 
> 赞同：2
> 
> 时间：2013-02-26T07:47:49.940
> 
> 标签：sql, sql-server, union-all, openquery

我有一个由四部分组成的链接服务器查询，该查询 LEFT OUTER JOINs 使用 UNION ALL 动态创建的表，类似于以下内容：

```
SELECT t.column1, rlt.s6, SUM(t.column3) column3
FROM Linked_server.database.schema.table t
    LEFT OUTER JOIN (
        SELECT 1 AS s7, 15 AS s6
        UNION ALL SELECT 3, 1
        UNION ALL SELECT 20, 16
    ) rlt ON (rlt.s7 = t.column2) 
```

这很好用。但是，当我使用 OPENQUERY 函数运行相同的查询时，如下所示：

```
SELECT * FROM OPENQUERY(Linked_server, '
    SELECT t.column1, rlt.s6, SUM(t.column3) column3
    FROM database.schema.table t
        LEFT OUTER JOIN (
            SELECT 1 AS s7, 15 AS s6
            UNION ALL SELECT 3, 1
            UNION ALL SELECT 20, 16
        ) rlt ON (rlt.s7 = t.column2)
') 
```

, LEFT OUTER JOIN 失败并且 s6 列仅包含 NULL。我知道我可以重写查询 #2 以使其工作，但我很好奇为什么它不能按照它的编写方式工作？是因为我不知道对 OPENQUERY 有一些限制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:15:00.600

无法在我的机器上重现它......唯一的区别在于两个查询的排序顺序。也许只是在视觉上看起来结果集因排序顺序不同而有所不同。尝试添加`ORDER BY rlt.s6 DESC`两个查询然后运行它们，这应该会为您提供以相同顺序排列的相同记录的结果集。

# c - 我的反向功能有什么问题

> ID：15083942
> 
> 赞同：0
> 
> 时间：2013-02-26T07:47:57.403
> 
> 标签：c

我正在尝试编写一个函数来反转字符串：如果字符串输入是`"Hello World"`，则函数应该返回`"dlroW olleH"`。但是，当我运行我的函数时，字符串保持不变：

```
void reversestring(char* s) {
    char tmp;   //tmp storing the character for swaping
    int length; //the length of the given string
    int i;      //loop counter

    //reverse the string of even length
    length = strlen(s);
    if (length % 2 == 0) { //if the length of the string is even
        for(i = 0; i < (int) (length / 2);i++) {
            tmp = s[length - i];
            s[length - i] = s[i];
            s[i] = tmp;
        }
    }

    //reverse the string of odd length
    if (length % 2 == 1) { //if the length of the string is odd
        for(i = 0; i < (int) ((length + 1) / 2);i++) {
            tmp = s[length + 1];
            s[length + 1] = s[i];
            s[i] = tmp;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:58:30.417

你只需要一个循环来处理字符串。的对称特征`s[i]`是`s[length-i-1]`,

```
void reverse(char* s) {
  char tmp; //tmp storing the character for swaping
  int length; //the length of the given string
  int i; //loop counter

  //reverse the string of even length
  length = strlen(s);

  if (length < 2) return;

      for(i = 0; i < (int) (length / 2);i++){
          tmp = s[length - i - 1];
          s[length - i - 1] = s[i];
          s[i] = tmp;
      }
} 
```

示例：

```
abcde
01234 
```

*长度*为 5，`length / 2`是`2`（整数除法）。*长度*是奇数，但您不必移动中心字符。需要交换的字符

```
(0,4), (1,3) 
```

测试：

```
int main () {
    char x[] = "Hello World";
    reverse(x);
    printf("%s \n",x );
    return 0;
} 
```

印刷

```
 dlroW olleH 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:50:09.713

您在索引方面落后一分。的对称`s[0]`不是`s[length- 0]`，而是`s[length-0-1]`。

至于奇怪的情况，我不明白你到底想做什么，但似乎你很容易在每次迭代中越界。

# ruby-on-rails - 从标签渲染 Rails

> ID：15083945
> 
> 赞同：0
> 
> 时间：2013-02-26T07:48:10.337
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我的 form_tag 设置如下：

```
<% Rating.find(:all, :conditions => ["recommendation_id = ? and rating_set = ? and product_id = ?", rec.id, params[:rating_set_id], params[:product_id]]).each do |rate| %>
            <%= text_field_tag "recommendation_ratings[#{rec.id}][notes]", "#{rate.notes}", :id => "rec_note_text", :placeholder => 'Enter Notes..'%>
                <% end %> 
```

这在满足查找条件时有效，但是在提交表单之前，recommension_id 不会持久化到数据库中，因此此查找方法不会返回任何内容，这会导致我的表单标签不呈现。它仅在满足查找的所有条件时才呈现。无论是否满足查找条件，如何呈现我的表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:58:32.127

您以错误的方式使用视图/控制器。

您应该定义名为**_rating.html.erb的新部分**

在那里你的form_tag（请用有效值替换，我只是举个例子）

```
<%= text_field_tag "recommendation_ratings[#{id}][notes]", "#{notes}", :id => "rec_note_text", :placeholder => 'Enter Notes..'%> 
```

然后，无论您在何处呈现该评级列表，例如在**评级/show.html.erb 中**

```
<%= render @ratings%> 
```

在 Ratings_controller 中，您应该输入：

```
define show
  @ratings = Ratings.find_all_with_conditions
end 
```

在模型 Rating.rb 中，您应该输入：

```
define self.find_all_with_conditions
  Rating..find(:all, :conditions => []) #put your logics here for finding all
end 
```

我只是写了一个例子，你应该如何组织它，我并没有把所有有效的参数都放在里面，我只是为了让你看看如何组织你的视图。

我希望它会有所帮助。

# android - Jquery mobile的滑动覆盖面板不起作用

> ID：15083949
> 
> 赞同：0
> 
> 时间：2013-02-26T07:48:34.563
> 
> 标签：android, jquery, cordova, jquery-mobile, mobile

我正在使用 phonegap for android 开发一个 android 应用程序。由于 jQuery mobile 为我们提供了丰富的 ui 组件。所以我选择使用jQuery mobile。

现在我已经阅读了幻灯片覆盖面板的教程

[http://jquerymobile.com/demos/1.3.0-beta.1/docs/panels/index.html](http://jquerymobile.com/demos/1.3.0-beta.1/docs/panels/index.html)

当我尝试使用它时它不起作用。请帮忙

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet"
    href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script
    src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<title>Insert title here</title>
</head>
<body>
    <div data-role="page">

        <div data-role="panel" id="mypanel" data-position="right"
            data-position-fixed="true" data-display="overlay">
            <p>Testing Slide panel</p>
        </div>
        <!-- /panel -->

        <div data-role="header">
            <h1>Testing</h1>
        </div>
        <!-- /header -->

        <div data-role="content">
            <p><a href="#mypanel">open slide overlay panel</a></p>
        </div>
        <!-- /content -->

        <div data-role="footer">
            <h4>@Copyrights reserved.</h4>
        </div>
        <!-- /footer -->
    </div>
    <!-- /page -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:54:59.567

您使用的是旧版本的 jQuery Mobile。

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
```

使用 1.3 而不是 1.2

```
<link rel="stylesheet" href="http://jquerymobile.com/demos/1.3.0-beta.1/css/themes/default/jquery.mobile-1.3.0-beta.1.css" />
<script src="http://jquerymobile.com/demos/1.3.0-beta.1/js/jquery.mobile-1.3.0-beta.1.js"></script> 
```

# php - htaccess 将 php 重写为 html，没有 post 方法？

> ID：15083950
> 
> 赞同：1
> 
> 时间：2013-02-26T07:48:35.553
> 
> 标签：php, html, forms, .htaccess, http-post

我使用这个 htaccess 将 php 扩展重写为 .html。我有一个应该发布到 url 的有效表单，但我无法获取发布数据，我认为这与 htaccess 有关。

```
Options +FollowSymlinks
Options -Indexes
RewriteEngine On

RewriteBase /mypath/

# Rewrite to SEF URL's
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/(.*)/(.*)/(.*)\.html index.php?a=$1&b=$2&c=$3&d=$4 [QSA,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/(.*)/(.*)\.html index.php?a=$1&b=$2&c=$3 [QSA,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/(.*)\.html index.php?a=$1&b=$2 [QSA,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)\.html index.php?a=$1 [QSA,L] 
```

有人有办法解决我的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:55:17.130

我想，您必须使用非贪婪的正则表达式。替换`.*`为`.*?`

```
RewriteRule ^(.*?)/(.*?)/(.*?)/(.*?)\.html index.php?a=$1&b=$2&c=$3&d=$4 [QSA,L] 
```

和其他适当的。

# assembly - x86 寻址模式

> ID：15083951
> 
> 赞同：1
> 
> 时间：2013-02-26T07:48:35.687
> 
> 标签：assembly, x86, addressing-mode

我对此指令的间接寻址模式感到非常困惑：

```
and $0x0000FF00, 4(%esp) 
```

如果这是当前栈顶：

```
0xBF8DB0B8: 0xDEADBEEF <--- ESP + 4
0xBF8DB0B4: 0xDEADBEEF <--- ESP 
```

这是内存的内容`0xDEADBEEF`：

```
0xDEADBEEF: 0x1234ABCD 
```

将执行以下哪项？

1.  `AND 0x0000FF00, 0xDEADBEEF`结果：`0x0000BE00`存储在`0xBF8DB0B8`.

2.  `AND 0x0000FF00, 0x1234ABCD`，结果：`0x0000AB00`存储在`0x0000AB00`.

3.  `AND 0x0000FF00, 0xDEADBEF3`. 结果：`0x0000BE00`存储在`0xDEADBEF3`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:51:36.853

`AND 0x0000FF00, 0xDEADBEEF`结果：`0x0000BE00`存储在`0xBF8DB0B8`：

由于`%esp`包含地址`0xBF8DB0B4`，`4(%esp)`是地址`0xBF8DB0B8`，并且`0xDEADBEEF`是该地址中的内容。

# ruby-on-rails - rails: 需要一些关于collection_select的解释

> ID：15083958
> 
> 赞同：1
> 
> 时间：2013-02-26T07:49:23.813
> 
> 标签：ruby-on-rails, collections, selection

我尝试使用 collection_select 显示下拉列表。但是，在搜索了一段时间后，我仍然无法理解如何设置此方法的参数。

```
class Entry < ActiveRecord::Base
    has_many :addresses
    attr_accessible :email, :first_name, :last_name
end
class Address < ActiveRecord::Base
    belongs_to :entry
    has_one :address_type
    attr_accessible :type, :city, :state, :street, :zip
end

class AddressType < ActiveRecord::Base
    belongs_to :address
    attr_accessible :name
end 
```

我想为每个地址显示一个从模型“AddressType”中选择的名为“AddressType”的下拉列表。“AddressType”的唯一值是在seeds.rb 中创建的“Home”、“Work”和“Other”。这是 _form 代码：

```
.form-inputs
  5     = f.collection_select (:AddressType, :name, AddressType.all, :id, :AddressType)           
  6     = f.input :street
  7     = f.input :city
  8     = f.input :state
  9     = f.input :zip 
```

我不知道如何设置collection_select的参数，所以我的'5'行肯定是错误的。其他文档和示例是如此令人困惑，所以任何人都可以解释我如何使用 collection_select 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:10:29.797

[集合选择（对象，方法，集合，值方法，文本方法，选项 = {}，html_options = {}）](http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/collection_select)

```
= f.collection_select (:type, AddressType.all, :id, :name) 
```

当你使用时*`form.collection_select`*，你应该省略*对象*，例如

```
form.collection_select(method, collection, value_method, text_method, options = {}, html_options = {}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T08:22:28.757

确保您获得的地址类型没问题。

使用以下内容：

```
@addresses = AddressType.all

f.collection_select ("address_type", "name", @addresses, "id", "name") 
```

在哪里，

**AddressType** = 您的型号，

**name** = 模型字段名称，

**@addresses** = 地址类型表中包含“家庭”、“工作”和“其他”的集合，

**id** = 您选项的值属性

**名称**= 显示您的选项的属性

# java - Java webservice从dom中删除cdata

> ID：15083964
> 
> 赞同：0
> 
> 时间：2013-02-26T07:49:37.653
> 
> 标签：java, xml, dom

我的 Web 服务返回一个 String(xml) 正在使用 DOM 构建这个字符串，现在问题是当我想将此 xml 转换为 String 时。最初添加了一个额外的 CDATA，但我似乎无法删除它。我从 stackoverflow 得到了这个漂亮的函数，但如上所述的问题是它添加了我不需要的 CDATA，因为我想返回一个 Xml 字符串。请不要使用 Soap Web 服务。

```
 public static String doctoString(Document doc) {
    try {
        StringWriter sw = new StringWriter();
        TransformerFactory tf = TransformerFactory.newInstance();
        Transformer transformer = tf.newTransformer();
        transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
        transformer.setOutputProperty(OutputKeys.METHOD, "xml");
        transformer.setOutputProperty(OutputKeys.INDENT, "yes");
        transformer.setOutputProperty(OutputKeys.ENCODING, "UTF-8");
        transformer.transform(new DOMSource(doc), new StreamResult(sw));
        return sw.toString();
    } catch (Exception ex) {
        throw new RuntimeException("Error converting to String", ex);
    }
} 
```

完整输出：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns2:getInvoppResponse xmlns:ns2="http://services.com/">
         <return>
           <![CDATA[
              <users>
                 <user>
                    <id>1</id>
                    <name>sert</name>
                 </user>
              </users>
            ]]>
          </return>
      </ns2:getInvoppResponse>
   </soap:Body>
</soap:Envelope> 
```

需要的身体输出：

```
 <return>           
             <users>
               <user>
                  <id>1</id>
                  <name>sert</name>
               </user>
             </users>             
           </return> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:41:59.333

对于一个不太优雅但功能强大的 Java 解决方案（针对有问题的新 XML 进行了更新）：

```
p = Pattern.compile("\\A.*?(\\<users\\>.*\\<\\/users\\>).*?\\z", Pattern.DOTALL );
s = "<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">\n" +
"   <soap:Body>\n" +
"     <ns2:getInvoppResponse xmlns:ns2=\"http://services.com/\">\n" +
"      <return>\n" +
"        <![CDATA[\n" +
"           <users>\n" +
"              <user>\n" +
"                 <id>1</id>\n" +
"                 <name>sert</name>\n" +
"              </user>\n" +
"           </users>\n" +
"         ]]>\n" +
"       </return>\n" +
"    </ns2:getInvoppResponse>\n" +
"    </soap:Body>\n" +
"</soap:Envelope>\n";

Matcher m = p.matcher(s);
if (m.matches())
{
    s =m.group(1);
} 
```

# python - 什么时候应该使用 Flask.g？

> ID：15083967
> 
> 赞同：203
> 
> 时间：2013-02-26T07:49:46.390
> 
> 标签：python, flask

在 Flask 0.10 中，我[看到](https://github.com/mitsuhiko/flask/blob/master/CHANGES)它将从请求上下文转移到应用程序上下文，这让我对.`g``g`

我的理解（对于 Flask 0.9）是：

*   `g`存在于请求上下文中，即在请求开始时重新创建，并且在请求结束之前可用
*   `g`旨在用作“请求黑板”，我可以在其中放置与请求持续时间相关的内容（即，在请求的开头设置一个标志并在最后处理它，可能来自`before_request`/`after_request`对）
*   除了保持请求级状态之外，`g`还可以而且应该用于资源管理，即保持数据库连接等。

这些句子中的哪一个在 Flask 0.10 中不再正确？有人可以指出我讨论更改*原因的资源吗？*我应该在 Flask 0.10 中使用什么作为“请求黑板” - 我应该创建自己的应用程序/扩展特定线程本地代理并将其推送到上下文堆栈`before_request`吗？如果我的应用程序存在很长时间（不像请求）并且因此资源永远不会被释放，那么应用程序上下文中的资源管理有什么意义？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2013-02-26T23:06:46.323

[由 Markus 链接的](https://stackoverflow.com/questions/15083967/when-should-flask-g-be-used/15101229#comment21244306_15083967)[Advanced Flask Patterns](https://speakerdeck.com/mitsuhiko/advanced-flask-patterns-1)解释了`g`0.10中的一些更改：

*   `g`现在生活在应用程序上下文中。
*   [每个请求都会推送一个新的应用程序上下文](https://github.com/mitsuhiko/flask/blob/1949c4a9abc174bf29620f6dd8ceab9ed3ace2eb/flask/ctx.py#L230)，擦除旧的应用程序上下文，因此`g`仍可用于为每个请求设置标志，而无需更改代码。
*   *调用后* 会弹出应用程序上下文`teardown_request`。（Armin 的演示文稿解释说这是因为创建数据库连接之类的任务是为请求*设置*环境的任务，不应在内部处理`before_request`and `after_request`）

* * *

## 回答 #2

> 赞同：113
> 
> 时间：2015-10-28T04:17:24.827

作为此线程中信息的附录：我也对它的行为感到有些困惑`flask.g`，但一些快速测试帮助我澄清了这一点。这是我尝试过的：

```
from flask import Flask, g
app = Flask(__name__)

with app.app_context():
    print('in app context, before first request context')
    print('setting g.foo to abc')
    g.foo = 'abc'
    print('g.foo should be abc, is: {0}'.format(g.foo))

    with app.test_request_context():
        print('in first request context')
        print('g.foo should be abc, is: {0}'.format(g.foo))
        print('setting g.foo to xyz')
        g.foo = 'xyz'
        print('g.foo should be xyz, is: {0}'.format(g.foo))

    print('in app context, after first request context')
    print('g.foo should be abc, is: {0}'.format(g.foo))

    with app.test_request_context():
        print('in second request context')
        print('g.foo should be abc, is: {0}'.format(g.foo))
        print('setting g.foo to pqr')
        g.foo = 'pqr'
        print('g.foo should be pqr, is: {0}'.format(g.foo))

    print('in app context, after second request context')
    print('g.foo should be abc, is: {0}'.format(g.foo)) 
```

这是它给出的输出：

```
in app context, before first request context
setting g.foo to abc
g.foo should be abc, is: abc  

in first request context
g.foo should be abc, is: abc
setting g.foo to xyz
g.foo should be xyz, is: xyz  

in app context, after first request context
g.foo should be abc, is: xyz  

in second request context
g.foo should be abc, is: xyz
setting g.foo to pqr
g.foo should be pqr, is: pqr  

in app context, after second request context
g.foo should be abc, is: pqr 
```

As theY4Kman said above, "Every request pushes a new application context". And [as the Flask docs say](https://flask.palletsprojects.com/en/1.1.x/appcontext/), the application context "will not be shared between requests". Now, what hasn't been explicitly stated (although I guess it's implied from these statements), and what my testing clearly shows, is that you should **never** explicitly create multiple request contexts nested inside one application context, because `flask.g` (and co) doesn't have any magic whereby it functions in the two different "levels" of context, with different states existing independently at the application and request levels.

The reality is that "application context" is potentially quite a misleading name, because `app.app_context()` **is** a [per-request context](http://flask.pocoo.org/docs/1.0/appcontext/#lifetime-of-the-context), exactly the same as the ["request context"](http://flask.pocoo.org/docs/1.0/reqcontext/#lifetime-of-the-context). Think of it as a "request context lite", only required in the case where you need some of the variables that normally require a request context, but you don't need access to any request object (e.g. when running batch DB operations in a shell script). If you try and extend the application context to encompass more than one request context, you're asking for trouble. So, rather than my test above, you should instead write code like this with Flask's contexts:

```
from flask import Flask, g
app = Flask(__name__)

with app.app_context():
    print('in app context, before first request context')
    print('setting g.foo to abc')
    g.foo = 'abc'
    print('g.foo should be abc, is: {0}'.format(g.foo))

with app.test_request_context():
    print('in first request context')
    print('g.foo should be None, is: {0}'.format(g.get('foo')))
    print('setting g.foo to xyz')
    g.foo = 'xyz'
    print('g.foo should be xyz, is: {0}'.format(g.foo))

with app.test_request_context():
    print('in second request context')
    print('g.foo should be None, is: {0}'.format(g.get('foo')))
    print('setting g.foo to pqr')
    g.foo = 'pqr'
    print('g.foo should be pqr, is: {0}'.format(g.foo)) 
```

Which will give the expected results:

```
in app context, before first request context
setting g.foo to abc
g.foo should be abc, is: abc  

in first request context
g.foo should be None, is: None
setting g.foo to xyz
g.foo should be xyz, is: xyz  

in second request context
g.foo should be None, is: None
setting g.foo to pqr
g.foo should be pqr, is: pqr 
```

# c# - 更新内部的 UpdatePanel 时，ModalPopupExtender 关闭

> ID：15083969
> 
> 赞同：1
> 
> 时间：2013-02-26T07:49:47.277
> 
> 标签：c#, updatepanel, modalpopupextender

我有一个 ModalPopupExtender，里面有一个 UpdatePanel。UpdatePanel 有一个带有链接按钮列表的中继器。

```
<asp:Button ID="btnShow" runat="server" />
<ajaxToolkit:ModalPopupExtender ID="mpe" runat="server" TargetControlID="btnShow" PopupControlID="pnl" CancelControlID="btnCancel" />
<asp:Panel ID="pnl" runat="server">
    <asp:UpdatePanel ID="up" runat="server" UpdateMode="Conditional">
        <ContentTemplate>
            <asp:Repeater ID="rep" runat="server" onitemcommand="rep_ItemCommand">
                <HeaderTemplate>
                    <ul>
                </HeaderTemplate>
                <ItemTemplate>
                    <li>
                        <asp:Label ID="lblAssignedTo" runat="server" Text='<%# Eval("AssignedTo") %>' />
                        <asp:LinkButton ID="lnkUnassign" runat="server" CommandName="Unassign" CommandArgument='<%# Eval("Id") %>' />
                        <ajaxToolkit:ConfirmButtonExtender ID="cbeUnassign" runat="server" TargetControlID="lnkUnassign" ConfirmText="Are you sure you want to unassign this item?" />
                    </li>
                </ItemTemplate>
                <FooterTemplate>
                    </ul>
                </FooterTemplate>
            </asp:Repeater>
        </ContentTemplate>
    </asp:UpdatePanel>
</asp:Panel>

protected void rep_ItemCommand(object source, RepeaterCommandEventArgs e)
{
    if (e.CommandName == "Unassign")
    {
        //do something
        up.Update();
    }
} 
```

当我单击 LinkBut​​ton 时，UpdatePanel 应该会更新。它会这样做，但也会关闭 ModalPopupExtender。

有没有办法在不隐藏 ModalPopupExtender 的情况下更新 UpdatePanel？我可以调用 ModalPopupExtender.Show()，但页面会闪烁。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:03:38.367

好的，刚刚发现Repeaters 中的LinkBut​​tons 有问题。改为使用 Button 控件。

# c# - 连接字符串错误

> ID：15083970
> 
> 赞同：0
> 
> 时间：2013-02-26T07:49:48.627
> 
> 标签：c#, sql, ms-access

我有一个这样的连接字符串

```
 <add name="rackleyConnectionString1" connectionString="Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\rackley.mdb;Persist Security Info=True;Jet OLEDB:Database Password=Password"
      providerName="System.Data.OleDb" /> 
```

现在我将该 mdb 文件复制到我的 sql 服务器中。现在我将连接字符串更改为此

```
<add name="rackleyConnectionString" connectionString="Data Source=ODO-SRV004;Initial Catalog=rackley;Integrated Security=True"
      providerName="System.Data.SqlClient" /> 
```

当我运行程序时，它显示错误：“连接字符串中未指定 OLE DB 提供程序。例如 Provider=SQLOLEDB”

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:30:26.017

我希望你打开sql连接如下

```
Dim cn As SqlConnection= New SqlConnection(sConn) 
```

并不是

```
Dim cn As OleDbConnection = New OleDbConnection(sConn) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:10:17.427

我认为你放错了 \ 而不是 /

```
<add name="rackleyConnectionString1" connectionString="Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:/rackley.mdb;Persist Security Info=True;Jet OLEDB:Database Password=Password"
  providerName="System.Data.OleDb" /> 
```

我一直用/。请试试这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T09:21:53.343

```
<add name="rackleyConnectionString" connectionString="Provider=SQLOLED;Data Source=ODO-SRV004;Initial Catalog=rackley;Integrated Security=SSPI" /> 
```

试试这个连接字符串希望这会有所帮助。

# forms - 避免 Ext.form 验证滚动到顶部

> ID：15083971
> 
> 赞同：8
> 
> 时间：2013-02-26T07:49:50.180
> 
> 标签：forms, extjs, window

我有一个`Ext.form.Panel`内幕`Ext.window`。表单高度大于窗口高度，所以我在窗口上有垂直滚动。

在表单字段验证（`validitychange`事件）上滚动跳转到顶部。

如何避免这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-03T19:20:53.227

我试图弄清楚，为什么我的一个表格确实向上滚动而另一个没有。原来，我忘了明确指定布局管理器，并且默认布局管理器（锚）在有效性更改时滚动到顶部，而`vbox`布局没有。虽然一切看起来完全一样（带有 的 vbox `align: 'stretch'`），但在显示或隐藏错误时表现不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T14:23:41.207

我也有同样的问题 ：（

我做了一个令人毛骨悚然的解决方法（它可以工作到 80%） 有时它仍然会跳到顶部。你应该知道，我有一个布局为“表单”的窗口。如果您有一个（例如）布局为“fit”且 xtype 为“form”的窗口 - 您可能需要稍微更改代码。例如*el.child(".x-window-body", fasle) 行*不起作用。

```
init: function() {              
    this.control({

           ...

        /** My Ext.window.Window is called reservationwindow **/
        'reservationwindow': {
            afterrender: function(comp) {
                // comp is this Ext.Component == wrapper
                var el = comp.getEl();
                //extjs adds the scrollbar to the body element...
                var elForm = el.child(".x-window-body", false);
                // or el.child(".x-panel-body", false);

                //we are listinig to the scroll-event now
                this.myFormEl = elForm;
                    this.safeScroll = {top:0, left:0};
                elForm.on('scroll', function() {
                    console.log("save");

                    this.safeScroll = this.myFormEl.getScroll();
                }, this);
                elForm.on('click', function() {
                    var resWin = this.getResWin();
                    resWin.scrollBy(0,this.safeScroll.top,false);
                    console.log("reset");
                }, this);
                elForm.on('keyup', function() {
                    var resWin = this.getResWin();
                    resWin.scrollBy(0, this.safeScroll.top, false);
                    console.log("reset");
                }, this);
            } 
```

如您所见，我正在收听滚动事件并安全并重置滚动条。有时（尤其是当您在文本框中快速书写时）事件以不同的顺序出现，页面仍会跳到顶部。有时您还会看到它闪烁（如果需要太长时间才能将其设置回原始位置）。

所以....正如我所说，这是一个令人毛骨悚然的解决方法。如果您找到更好的解决方案，请告诉我。

**编辑**

我还发现，textareafield 上的*增长*选项是麻烦制造者之一。

```
{
    id: this.id + '-details',
    xtype: 'textareafield',
//  grow: true,     now it isn't jumping
    name: 'message',
    fieldLabel: 'Zusätzliche Informationen',
    labelAlign: 'top',
    renderder: 'htmlEncode',
    disabled: isDisabled,
    anchor: '100%'
} 
```

# javascript - javascript - window.location 或 document.location

> ID：15083972
> 
> 赞同：0
> 
> 时间：2013-02-26T07:49:53.337
> 
> 标签：javascript, object, browser

window 对象的 location 属性与 document 对象的 location 属性之间有什么区别吗？

```
window.location || document.location  // That is the question. 
```

*   它们的属性是否相同？
*   他们有不同的浏览器支持吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:51:17.557

这两个对象是相同的：

```
console.log(window.location === document.location) // true 
```

它们都引用 Location 对象。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T07:56:09.303

```
window.location represent position in current view of page in browser window 
```

并`document.location`表示当前显示完整文档/页面中的位置

例如在[http://www.nationalgeographic.com/](http://www.nationalgeographic.com/) upto Daily NEWS 部分是`window`，整页向下滚动到最后是`document`

# mysql - 从两个表中获取数据

> ID：15083973
> 
> 赞同：0
> 
> 时间：2013-02-26T07:50:02.947
> 
> 标签：mysql, ruby-on-rails-3

我正在使用rails3。我有两张桌子`user_shift`，另一张是`shift`桌子。我想要特定用户的当前班次。`user_shift`表字段是

```
`id`, 
`from`, 
`to`, 
`shift_id`, 
`user_id`, 
`created_at`, 
`updated_at` 
```

并且在`shift`表字段中是

```
`id`, 
`start_time`, 
`end_time`, 
description`, 
`created_at`, 
`updated_at` . 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T07:53:08.873

MySQL 连接是最好的解决方案。

**例子**

```
SELECT * FROM shift LEFT JOIN user_shift ON shift.id = user_shift.shift_id 
```

**随用户移动**

```
SELECT * FROM shift LEFT JOIN user_shift ON shift.id = user_shift.shift_id WHERE user_shift.user_id = LOGGEDINUSERID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:53:17.267

试试这个查询

```
SELECT us.id, s.start_time, s.end_time 
FROM user_shift us, shift s
WHERE us.shift_id = s.id AND us.id=?; 
```

# groovy - 如何将变量从xml传递到mule中的java类？

> ID：15083985
> 
> 赞同：0
> 
> 时间：2013-02-26T07:50:49.630
> 
> 标签：groovy, transform, mule

我在 mule config xml 中有一个变量，我想在 Java 文件中访问它。我怎么做？我找到以下方法：

*   使用组件
*   使用变压器
*   使用脚本，例如 groovy

我想将该变量发送到 java 文件，并将其导入到 java 文件中的数据库。我的配置是：

```
<mule xmlns:http="http://www.mulesoft.org/schema/mule/http"
xmlns:cxf="http://www.mulesoft.org/schema/mule/cxf" xmlns:scripting="http://www.mulesoft.org/schema/mule/scripting"
xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
xmlns:spring="http://www.springframework.org/schema/beans" version="CE-3.3.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="
    http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
    http://www.mulesoft.org/schema/mule/cxf http://www.mulesoft.org/schema/mule/cxf/current/mule-cxf.xsd 
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
    http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd 
    http://www.mulesoft.org/schema/mule/scripting http://www.mulesoft.org/schema/mule/scripting/current/mule-scripting.xsd ">

<set-variable variableName="remoteClientAddress"
    value="#[message.inboundProperties['MULE_REMOTE_CLIENT_ADDRESS']]" />
<message-properties-transformer name="setProperty"
    scope="session" doc:name="Message Properties">
    <add-message-property key="remoteClientAddress"
        value="#[message.inboundProperties['MULE_REMOTE_CLIENT_ADDRESS']]" />
</message-properties-transformer>

<flow name="service-cxf-wsdlfirstFlow1" doc:name="service-cxf-wsdlfirstFlow1">
    <http:inbound-endpoint host="localhost" port="8085"
        path="Weather/Service" exchange-pattern="request-response" doc:name="HTTP">
    </http:inbound-endpoint>
    <set-variable variableName="remoteClientAddress"
        value="#[message.inboundProperties['MULE_REMOTE_CLIENT_ADDRESS']]" />
    <message-properties-transformer doc:name="myproperty"
        scope="session">
        <add-message-property key="remoteClientAddress"
            value="#[message.inboundProperties['MULE_REMOTE_CLIENT_ADDRESS']]" />
    </message-properties-transformer>

    <component doc:name="classTest" class="org.mule.example.scripting.IpClient" />

    <logger
        message="#[groovy:message.getInboundProperty('MULE_REMOTE_CLIENT_ADDRESS')]"
        level="INFO" doc:name="Logger" />
    <cxf:proxy-service payload="envelope" service="Weather"
        wsdlLocation="http://wsf.cdyne.com/WeatherWS/Weather.asmx?wsdl"
        namespace="http://ws.cdyne.com/WeatherWS/" validationEnabled="true"
        doc:name="SOAP">
    </cxf:proxy-service>

    <copy-properties propertyName="SOAPAction" doc:name="Property" />

    <cxf:proxy-client payload="body"
        enableMuleSoapHeaders="true" doc:name="SOAP" />

    <outbound-endpoint address="http://wsf.cdyne.com/WeatherWS/Weather.asmx"
        exchange-pattern="request-response" doc:name="Generic">
    </outbound-endpoint>

</flow> 
```

我的骡子版本是 CE 3.3.0。我使用组件来定义 java 类的位置，但是在运行我的项目后我有一些错误：

```
ERROR 2013-02-27 11:15:20,129 [[mule-sample_].connector.http.mule.default.receiver.02] org.mule.exception.DefaultMessagingExceptionStrategy: 

Message               : Failed to find entry point for component, the following resolvers tried but failed: [
CallableEntryPointResolver: Object "IpClient{this=1e68a2b, name='null', ignoreBadInput=false, returnClass=SimpleDataType{type=java.lang.Object, mimeType='*/*'}, sourceTypes=[]}" does not implement required interface "interface org.mule.api.lifecycle.Callable"
ReflectionEntryPointResolver: Found too many possible methods on object "org.mule.example.scripting.IpClient" that accept parameters "{class java.lang.String}", Methods matched are "[public void org.mule.transformer.AbstractTransformer.setMimeType(java.lang.String) throws javax.activation.MimeTypeParseException, public final java.lang.Object org.mule.transformer.AbstractTransformer.transform(java.lang.Object) throws org.mule.api.transformer.TransformerException, public void org.mule.transformer.AbstractTransformer.setName(java.lang.String), public void org.mule.transformer.AbstractTransformer.setEncoding(java.lang.String)]"
AnnotatedEntryPointResolver: Component: IpClient{this=1e68a2b, name='null', ignoreBadInput=false, returnClass=SimpleDataType{type=java.lang.Object, mimeType='*/*'}, sourceTypes=[]} doesn't have any annotated methods, skipping.
MethodHeaderPropertyEntryPointResolver: The required property "method" is not set on the event
]
Code                  : MULE_ERROR-321
--------------------------------------------------------------------------------
Exception stack is:
1\. Failed to find entry point for component, the following resolvers tried but failed: [
CallableEntryPointResolver: Object "IpClient{this=1e68a2b, name='null', ignoreBadInput=false, returnClass=SimpleDataType{type=java.lang.Object, mimeType='*/*'}, sourceTypes=[]}" does not implement required interface "interface org.mule.api.lifecycle.Callable"
ReflectionEntryPointResolver: Found too many possible methods on object "org.mule.example.scripting.IpClient" that accept parameters "{class java.lang.String}", Methods matched are "[public void org.mule.transformer.AbstractTransformer.setMimeType(java.lang.String) throws javax.activation.MimeTypeParseException, public final java.lang.Object org.mule.transformer.AbstractTransformer.transform(java.lang.Object) throws org.mule.api.transformer.TransformerException, public void org.mule.transformer.AbstractTransformer.setName(java.lang.String), public void org.mule.transformer.AbstractTransformer.setEncoding(java.lang.String)]"
AnnotatedEntryPointResolver: Component: IpClient{this=1e68a2b, name='null', ignoreBadInput=false, returnClass=SimpleDataType{type=java.lang.Object, mimeType='*/*'}, sourceTypes=[]} doesn't have any annotated methods, skipping.
MethodHeaderPropertyEntryPointResolver: The required property "method" is not set on the event
] (org.mule.model.resolvers.EntryPointNotFoundException)
org.mule.model.resolvers.DefaultEntryPointResolverSet:52 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/model/resolvers/EntryPointNotFoundException.html)
--------------------------------------------------------------------------------
Root Exception stack trace:
org.mule.model.resolvers.EntryPointNotFoundException: Failed to find entry point for component, the following resolvers tried but failed: [
CallableEntryPointResolver: Object "IpClient{this=1e68a2b, name='null', ignoreBadInput=false, returnClass=SimpleDataType{type=java.lang.Object, mimeType='*/*'}, sourceTypes=[]}" does not implement required interface "interface org.mule.api.lifecycle.Callable"
ReflectionEntryPointResolver: Found too many possible methods on object "org.mule.example.scripting.IpClient" that accept parameters "{class java.lang.String}", Methods matched are "[public void org.mule.transformer.AbstractTransformer.setMimeType(java.lang.String) throws javax.activation.MimeTypeParseException, public final java.lang.Object org.mule.transformer.AbstractTransformer.transform(java.lang.Object) throws org.mule.api.transformer.TransformerException, public void org.mule.transformer.AbstractTransformer.setName(java.lang.String), public void org.mule.transformer.AbstractTransformer.setEncoding(java.lang.String)]"
AnnotatedEntryPointResolver: Component: IpClient{this=1e68a2b, name='null', ignoreBadInput=false, returnClass=SimpleDataType{type=java.lang.Object, mimeType='*/*'}, sourceTypes=[]} doesn't have any annotated methods, skipping.
MethodHeaderPropertyEntryPointResolver: The required property "method" is not set on the event
]
at org.mule.model.resolvers.DefaultEntryPointResolverSet.invoke(DefaultEntryPointResolverSet.java:52)
at org.mule.component.DefaultComponentLifecycleAdapter.invoke(DefaultComponentLifecycleAdapter.java:343)
at org.mule.component.AbstractJavaComponent.invokeComponentInstance(AbstractJavaComponent.java:86)
+ 3 more (set debug level logging or '-Dmule.verbose.exceptions=true' for everything) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:41:36.897

根据 eoyu 给出的添加属性

```
<set-variable variableName="remoteClientAddress" value ="#[message.inboundProperties    ['MULE_REMOTE_CLIENT_ADDRESS']]"/> 
```

这会将属性设置为 INVOCATION 范围内的 mulemessage。

您可以使用以下代码行访问 IpClient 组件中的属性

```
 msg.getProperty("remoteClientAddress", PropertyScope.INVOCATION); 
```

前任：

```
@Override
public Object onCall(MuleEventContext eventContext) throws Exception {
    MuleMessage msg = eventContext.getMessage();

    String remClient = msg.getProperty("remoteClientAddress", PropertyScope.INVOCATION); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T06:21:56.400

```
<message-properties-transformer name="myScope"  scope="session">
    <add-message-property key="remoteClientAddress"
        value ="#[message.inboundProperties['MULE_REMOTE_CLIENT_ADDRESS']]" />
</message-properties-transformer> 
```

# highcharts - 对 highcharts 的普遍好奇：

> ID：15083988
> 
> 赞同：1
> 
> 时间：2013-02-26T07:51:02.637
> 
> 标签：highcharts

如果我们必须创建一个包含大量数据的图表，例如“过去 5 年的股票表现”，我们是否必须将所有数据传输到客户端以供 highcharts 处理？不会涉及太多数据开销？

问候乌萨夫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T07:57:59.987

您可以“延迟加载”图表数据，请参阅[文档中的示例](http://www.highcharts.com/stock/demo/lazy-loading)。

# iphone - 使用 iPhone 的触摸屏捕捉游戏的动作或击键，例如（愤怒的小鸟）

> ID：15083990
> 
> 赞同：2
> 
> 时间：2013-02-26T07:51:12.313
> 
> 标签：iphone, ios, objective-c, touchscreen, keystroke

我基本上需要找出是否有一种方法可以使用 iPhone 的触摸屏捕捉游戏的动作或击键，例如“愤怒的小鸟”等，并将它们保存到设备上的文件中。

我确定这些手机存在安全问题并且不希望原生“击键记录”，但如果它是位于其他游戏之上的一层，应该没问题

请让我有什么办法可以达到同样的效果。您的帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-28T01:31:13.583

What you are trying to do can be very easily accomplished by using MobileSubstrate, a very powerful framework created by Jay Freeman that allows you to modify virtually any function of any process at runtime. The build environment *theos*, by Dustin Howett, can be used in place of Xcode, with its Logos preprocessor making all this seemingly complicated mischief a very, *very* simple task.

Something like this could be accomplished with a very small amount of code.

Example:

```
%hook UIApplication //Hooks into the UIApplication class.

- (void)sendEvent:(id)arg1{//Hook the sendEvent function, the function which handles all events passed to a UIApplication.

  if([arg1 isKindOfClass:%c(UITouchesEvent)]){//Make sure we're not processing other events, such as device rotation.

    for(UITouch *touch in [arg1 allTouches])
      NSLog(@"Touch recorded: %@", NSStringFromCGPoint([touch locationInView: [[UIApplication sharedApplication] keyWindow]]));

  }

  %orig;//Call the original function, so the app can still process the events, and we don't eat them all.

} 
```

As you can see, it is actually quite simple.

Unfortunately, jailbroken devices are your only option. Obviously, you won't be able to put anything like this in the App Store. However, Cydia has become a very prominent part of iOS, and success through it can be reached just as easily, if not more easily, than something on the App Store could.

# zend-framework2 - Zend Framework 2：使用适配器执行 SQL 查询

> ID：15083992
> 
> 赞同：0
> 
> 时间：2013-02-26T07:51:20.157
> 
> 标签：zend-framework2, firebird

我刚刚开始使用 Zend Framework 并开始了解它是如何工作的。我检查了官方文档a并遵循了几个教程，我发现的大多数示例都非常基础：应用程序中使用了一个或两个表（最多），并且为每个表创建了一个模型。那里没问题，但是现在我在一个真实的应用程序中工作，我从一个复杂的 sql 查询中获取我的数据，该查询包括几个表（准确地说是 5 个）和一个存储过程。老实说，我不知道如何进行此操作，甚至不知道从哪里开始尝试。

我是否应该为查询中涉及的每个表（其中 5 个）创建一个模型，即使我只需要其中一些字段中的 1 个或 2 个字段，然后尝试做出一个有效的选择？还是我应该在数据库上创建一个视图（存储过程听起来不太好），然后将模型基于该视图？还是我应该使用 ORM 让我的生活更轻松？如果是这样，你知道有什么可以与 Firebird 一起正常工作的吗？还是我不知道我应该做一些与我提到的完全不同的事情？

**更新**

根据 Will 的建议并查看 Zend 的文档，我决定使用 Adapter 直接以 SQL 格式进行查询，但它还不能正常工作。到目前为止，我的控制器中的内容是：

```
use Zend\Db\Adapter\Adapter as DbAdapter;
use Zend\Db\ResultSet\ResultSet; 
```

...

```
 public function indexAction() {
    $db = new DbAdapter(array(
    'driver'         => 'Pdo',
    'dsn'            => 'firebird:host=127.0.0.1;port=3050;dbname=C:\\wamp\\www\\Reports\\data\\THdata.GDB',
    'username' => 'SYSDBA',
    'password' => 'masterkey' ));    

    $sql = 'SELECT SELITE FROM TILIKAUSI WHERE COMPANYID = 1'; //I am starting with a simple query first.      
    $sql_result = $db->createStatement($sql, array(125000, 125200))->execute();
    if($sql_result->count() > 0){
    $results = new ResultSet();
    $this->view->data = $results->initialize($sql_result)->toArray();
    }
    return $this->view;
    } 
```

结果是一个错误，如`Creating default object from empty value in (Controller path, line: $this->view->data = $results;)`

似乎没有返回任何值。这是进行此查询的适当方式还是我遗漏了什么？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:50:27.270

使用基于 DoctrineORM 的模块可以帮助解决这样的问题，但有时我更愿意远离它们，以更明智地简化我的应用程序。对于您列出的复杂 sql 查询，我通常只使用 zf2 附带的 SQL 适配器。

将以下 use 子句添加到您的类中：

```
use Zend\Db\Adapter\Adapter; 
```

一个例子是这样的：

```
$adapter = new Adapter(array('driver' => 'mysqli',
 'host' => 'localhost',
 'port' => '3306',
 'dbname' => 'test',
 'username' => 'test',
 'password' => 'test'));
 $list = $adapter->getDriver()->getConnection()->execute('Add your complex query as you currently have it'); 
```

返回数据后，您将能够在 $items 数组上执行标准的 foreach 循环。

# c# - 创建接受参数“今天”的日期范围验证器

> ID：15083994
> 
> 赞同：0
> 
> 时间：2013-02-26T07:51:27.183
> 
> 标签：c#, asp.net-mvc, validation, attributes

我创建了如下所示的日期范围属性：

```
[DateRange(Min = "Today")] 
```

在这个属性中，我得到这样的最小日期：

```
...
var minDate = DateTime.Now;
... 
```

**编辑：**这里有更多代码：

```
private DateTime _minDate = DateTime.Today.AddYears(-100);
private DateTime _maxDate = DateTime.MaxValue;

// String representation of the Min Date (yyyy/MM/dd)
public string Min
{
    get { return FormatDate(_minDate, DateTime.Today.AddYears(-100)); }
    set { _minDate = value == "Today" ? DateTime.Today : ParseDate(value, DateTime.Today.AddYears(-100)); }
}
// String representation of the Max Date (yyyy/MM/dd)
public string Max
{
    get { return FormatDate(_maxDate, DateTime.MaxValue); }
    set { _maxDate = value == "Today" ? DateTime.Today : ParseDate(value, DateTime.MaxValue); }
} 
```

由于属性的性质，minDate 在编译时只设置一次。你能告诉我实现这个功能的替代方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T08:59:40.597

使用[CustomValidator](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.aspx)。

想一想，如果将内容 (minDate) 标记为[volatile](http://msdn.microsoft.com/en-us/library/x13ttww7.aspx)怎么办？请执行并报告它是否有效。如果它有效，我有一些更新要自己做。