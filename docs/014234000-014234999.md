# StackOverflow 问答 14234000-14234999

# boolean-expression - 布尔定理：具体案例和逆变器放置问题（三）

> ID：14234000
> 
> 赞同：1
> 
> 时间：2013-01-09T11:14:58.023
> 
> 标签：boolean-expression, circuit

1.  如果'D'=Z'，那么D=Z吗？
2.  (A+B)' = A' + B 吗？
3.  如果在 AND/OR 之前放置一个反相器，那么它是否仍然充当 NOT/NAND？

# java - 尝试上传图像，但它们没有出现在目标文件夹中

> ID：14234002
> 
> 赞同：0
> 
> 时间：2013-01-09T11:15:00.807
> 
> 标签：java, eclipse

我上传的图片保存到`webapp/projectName/uploadedImage.folder`. 但是，它们没有显示在我的 Eclipse 导航器项目`uploadedImage.folder`中。

如何从那里获取数据到我的项目中？

另外，将所有上传的数据保存到 webapp 是否安全？

我是 Java 新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:20:19.037

选择文件夹并按 F5 在 Eclipse 中刷新。

# code-generation - 如何为 Pharo 或 Squeak 中的类自动生成 getter/setter 代码？

> ID：14234003
> 
> 赞同：5
> 
> 时间：2013-01-09T11:15:07.433
> 
> 标签：code-generation, smalltalk, getter-setter, pharo

我有一长串实例变量要为要为其生成代码的类创建，而不是手动执行。该列表来自现有的 SQL 数据库。我的目的是首先使用 Smalltalk 以纯面向对象的方式完成这一切，当我了解更多时，将数据保存回数据库并直接使用它。

有没有办法将名称列表传递给将生成它们并将它们添加到类定义的方法？

事实上，有没有办法在 Smalltalk 中动态添加或修改类定义？我怀疑必须并且我想知道最佳实践方法。

更新：我的想法更像是将实例变量列表传递给将自动创建它们的方法。

它更像是：

`addVariablesAndAccessors className: MyClass variablesList: ('aaaa', 'bbbb', 'cccc')`

这将导致调用

`AddVariables className: MyClass variableList: ('aaaa' 'bbbb' cccc')`

和

`generateAccessors className: MyClass variableList: ('aaaa' 'bbbb' cccc')`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T12:15:40.590

在加载了重构工具的 OmniBrowser 中，您选择类并在上下文菜单*Refactor class > Accessors*中。

或者，如果您只想为单个变量创建访问器，请选择*Refactor instance/class variable > Accessor*，然后选择要访问的变量。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T11:24:45.177

在 Squeak 中，您有`Behavior>>addInstVarName: aString`，例如，您可以执行以下操作：

```
String addInstVarName: 'foo' 
```

Squeak 还具有重构支持以自动生成访问器。您可以直接使用它，也可以查看一下`AbstractInstanceVariableRefactoring>>createAccessors`以获取有关如何实现自己的灵感;-)

另一个相当 hacky 但并不常见的解决方案是只生成实例变量，而不是添加访问器，而是覆盖`doesNotUnderstand:`，当未定义的选择器被发送到您的对象时，它会被调用。在那里，您可以检查是否有根据消息命名的实例变量，如果是，则返回/更改它。否则你就这样做`super doesNotUnderstand: aMessage`。

* * *

关于您的评论：类也是对象，因此您无需执行任何特殊操作即可将它们用作参数。在哪个课程上添加它完全取决于您，并不重要。因此，添加实例变量的方法可能如下所示：

```
addVariablesNamed: aCollection on: aClass

    aCollection do: [:each | aClass addInstVarName: each] 
```

你可以这样称呼它：

```
yourObject addVariablesNamed: #('foo' 'bar' 'baz') on: ClassX 
```

您可以在类中找到有关如何生成访问器方法的示例`CreateAccessorsForVariableRefactoring`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-09T12:28:09.330

在 Squeak 中，`Browser`在类上打开一个。如果您“右键单击”（我永远记不起按钮颜色）类列表中的类名，您将获得标准的上下文菜单 - “浏览完整 (b)”，等等。选择“更多...”，您将看到“创建 inst var 访问器”。选择它，您将获得实例变量的基本 getter 和 setter。

# git - git中的非快进错误

> ID：14234005
> 
> 赞同：0
> 
> 时间：2013-01-09T11:15:12.673
> 
> 标签：git, version-control, github, git-pull

我想在我现有的项目中使用**git ，所以我在****github 上**为它创建了一个空间，并在我的主机上的项目文件夹中我做了通常的操作：

```
$ git config --global user.name myname
$ git config --global user.email "myemail@email.com"
$ cd myProjectFolder/
$ git init
$ git add .
$ git commit -m "first commit"
$ git remote add origin https://github.com/myusername/myprojectname.git 
```

然后我希望我的项目的所有文件也在在线存储库中：

```
$ git push origin master 
```

但我得到了以下可怕的错误：

```
To https://github.com/myusername/myprojectname.git
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'https://github.com/myusername/myprojectname.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details. 
```

现在，我不需要`pull`从在线存储库中获取任何信息，因为那里仍然没有任何内容。我为什么要拉？

无论如何，我应该在这里做什么才能让我的所有文件在线并开始使用 git？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:45:28.517

之后`git remote add`，远程 repo 的 URL 在你的中是已知的，但还不是它的内容。

在`git fetch origin`（或）之后`git pull`，您**就**可以知道远程仓库的内容。`git push`

# java - MySQL 第一个值解释为列名

> ID：14234006
> 
> 赞同：-1
> 
> 时间：2013-01-09T11:15:18.507
> 
> 标签：java, sql, jdbc

使用 JDBC，我正在尝试执行以下 SQL 语句：

```
INSERT INTO meta (title, hlcount, textcount, imgcount, linkcount) VALUES (SomeString,6,4794,1,76) 
```

但这会返回错误消息

> “字段列表”中的未知列“SomeString”

所以似乎第一个值被解释为一列，那是怎么回事？

已经检查过表结构，也许我只是在这个上挖了隧道，但我似乎找不到这个问题的原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T11:16:43.160

> 所以似乎第一个值被解释为一列，那是怎么回事？

因为您将其作为`SomeString`，而不是文本*值*，例如`'SomeString'`. 这就是 SQL 的工作方式——这也是普通代码的工作方式，真的。如果你有：

```
String foo = bar; 
```

你会期望它试图复制一个名为 的变量的值`bar`，不是吗？如果你的意思是三个字符的字符串，b、a、r，你会使用：

```
String foo = "bar"; 
```

在 SQL 中也是如此。

`PreparedStatement`但是，假设此 SQL 是根据实际值构建的，则无论如何您都应该使用with 参数：

```
String sql = "INSERT INTO meta (title, hlcount, textcount, imgcount, linkcount)"
             + " VALUES (?, ?, ?, ?, ?)";
PreparedStatement pst = conn.prepareStatement(sql);
pst.setString(1, "SomeString");
pst.setInt(2, 6);
// etc 
```

这样您就可以避免 SQL 注入攻击和字符串转换问题（例如日期）。它还使您的 SQL 更清晰，将代码与数据分开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T11:16:18.943

字符串应该在单引号（''）内。

```
INSERT INTO meta (title, hlcount, textcount, imgcount, linkcount) VALUES ('SomeString',6,4794,1,76) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T11:17:12.817

在 SomeString 周围加上引号。

```
INSERT INTO meta 
  (title, hlcount, textcount, imgcount, linkcount) 
VALUES ('SomeString',6,4794,1,76) 
```

这将强制引擎将其视为字符串文字。否则，它将假定它是可以通过列名解决的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T11:26:04.623

当您插入日期或字符串值时，您必须将其括起来

要么''（单引号）[总是使用这个]

或“”（反引号字符）[并非总是]

插入元数据（标题、hlcount、textcount、imgcount、linkcount）值（'SomeString',6,4794,1,76）

或者

插入元（标题，hlcount，textcount，imgcount，linkcount）值（“SomeString”，6,4794,1,76）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-09T12:15:21.210

你应该使用单引号'Somestring'。

```
 INSERT INTO meta (title, hlcount, textcount, imgcount, linkcount) VALUES  ('SomeString',6,4794,1,76) 
```

因为 SomeString 表示要插入到标题列中的文本值，并且文本应始终用单引号引起来。

# c - SQLite WAL 模式在多个线程中具有多个事务

> ID：14234007
> 
> 赞同：4
> 
> 时间：2013-01-09T11:15:28.480
> 
> 标签：c, sqlite

sqlite 可以在 WAL 模式下同时在同一个数据库上有多个事务吗？

这是一个示例应用程序，它产生 500 个线程，每个线程创建一个新的 sqlite 连接。插入数据发生在事务中。

在此示例应用程序中：

* * *

```
#include "sqlite3.h"
#include "nspr\prthread.h"

void CreateThreads();
static void StartThread(void *Arg);

int main()
{
    CreateThreads();
}

void CreateThreads()
{
    for(int i = 0; i<500;i++)
    {
        PR_CreateThread(PR_USER_THREAD, StartThread, NULL, PR_PRIORITY_NORMAL, PR_GLOBAL_THREAD, PR_UNJOINABLE_THREAD, 0);
    }
    Sleep(10000);
}

void StartThread(void *Arg)
{
    sqlite3 *sqlite;
    char *errmsg;
    const char *err;
    const char *unused;
    int ret;
    const unsigned char * journal;
    const char *dir = "D:\\Samples\\test.sqlite";
    ret = sqlite3_open(dir, &sqlite);
    if(ret != SQLITE_OK)
    {
       err = sqlite3_errmsg(sqlite);
         return;
    }

    char query[100];
    strcpy(query, "Begin transaction");
    if(sqlite3_exec(sqlite, query, NULL,0, &errmsg) != SQLITE_OK )
    {
        printf("%s", errmsg);
        return;
    }

    strcpy(query, "insert into test values(1,2,3,4,5,6)");
    for(int i = 0; i<10;i++)
    {
        if(sqlite3_exec(sqlite, query, NULL,0, &errmsg) != SQLITE_OK )
        {
         printf("%s", errmsg);
            return;
        }
    }

    strcpy(query, "End Transaction");
    if(sqlite3_exec(sqlite, query, NULL,0, &errmsg) != SQLITE_OK )
    {
        printf("%s", errmsg);
        return;
    }
    return;
} 
```

我得到***'数据库被锁定'***运行这个。

我的问题是使用 WAL 模式我们可以同时进行多个事务吗？如果是这样，我在示例应用程序中缺少什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T12:00:31.480

无论如何，SQLite 在其当前版本中不支持并发写入。可以同时有多个读取器进程，但最多只有一个写入器。（见[常见问题条目#5](http://www.sqlite.org/faq.html#q5)

启用预写日志记录后，这一事实不会改变。WAL 支持更多并发：

> WAL 提供了更多的并发性，因为读取器不会阻塞写入器，写入器不会阻塞读取器。读和写可以同时进行。

但不写并发：

> 编写器只是将新内容附加到 WAL 文件的末尾。因为 writer 不会做任何会干扰 reader 动作的事情，所以 writer 和 reader 可以同时运行。但是，由于只有一个 WAL 文件，**因此一次只能有一个 writer**。

（以上摘自[WAL 上的文档](http://www.sqlite.org/draft/wal.html)。）

# android - Android 原生应用程序设计框架

> ID：14234010
> 
> 赞同：1
> 
> 时间：2013-01-09T11:15:41.743
> 
> 标签：android, web-applications

我想做的事情可能不是很困难，但我很困惑。我正在尝试构建一个仅适用于 Android 的应用程序，它将为我的公司播放视频。

由于我不是原生 Android 开发人员，我所做的是使用 html、jquery 和 phonegap 来创建我的应用程序并将其捆绑为 Web 视图，这将帮助最终用户安装应用程序，而不是访问 URL 然后打开它。

现在挑战对我来说开始了，我正在寻找应该看起来像原生应用程序的触摸优化设计。我可以使用 twitter bootstrap、foundation 或任何其他 CSS 框架来使我的设计具有响应性。我也知道如何制作基于 ajax 的动画页面加载，这将帮助我防止完整的页面加载。

真正的问题：CSS 是设计移动应用程序的唯一且正确的方法吗？Facebook、Youtube 等应用程序是否也使用 Css 来设计其原生应用程序？

我不想使用 jquery mobile，因为我根本不喜欢他们的设计模式。

同样，我的问题似乎很愚蠢。我想使用的是行业标准工具来构建我的应用程序，即使我必须深入研究 Android 教程并从头开始学习它。

任何帮助、链接或指导都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:19:32.500

原生应用程序通常不使用 HTML/CSS，而是使用平台提供的小部件等。这就是原生的意思。Facebook 最近从 web 视图/HTML5 实现切换到原生（至少在 Android 上）。

# css - 标题中有多个CSS文件？

> ID：14234011
> 
> 赞同：1
> 
> 时间：2013-01-09T11:15:42.913
> 
> 标签：css

我有一个 PHP 脚本，它的标题中有两个 CSS 文件。其中一个 CSS 文件中只有大约 5 个短行。

将那个移到更大的 CSS 文件中是否安全？当一个只有几行时，拥有两个单独的 CSS 文件有什么意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:20:49.393

是的，他们是其中的一个重点。例如，我有一个处理所有颜色的 design.css，一个用于定位和大小的 layout.css，我有一个处理动画等的 interaction.css。

1.  只要不影响可读性，合并 CSS 文件是没有问题的。只要记住结构必须保持：

文件 1.css 文件 2.css

以相同的顺序生成包含以下代码的文件：

```
/* content of file1.css */
/* content of file2.css */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:17:38.993

根本没有意义（在这种情况下）。您应该将几行移到另一行。如果您有 2 个单独的文件 - 将有 2 个对服务器的请求。您可能看不到差异，因为这些是毫秒，但在这种情况下，这将是“最佳实践”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T11:17:59.450

从本质上讲，它可以帮助浏览器仅加载与页面相关的内容，从而加快页面加载时间。

有些服务可以显示您下载的 CSS 有多少应用到给定页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T11:19:01.150

没有理由不将其移动到同一个文件中。

您可以根据需要拥有尽可能少或尽可能多的 CSS 文件。

只有当您拥有大量样式并且 CSS 文件变得很大且不可读时，优势才是真正的。然后将它们分解是有意义的。或者当您想将它们拆分为不同的页面等时。

它只是对服务器的一个额外请求，这对于仅 5 行似乎毫无意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T11:20:20.803

检查以确保您的 PHP 脚本没有引用其中只有几行的 CSS 文件。如果没有，那么您可以将两者合并。如果它确实引用了它，那么考虑在较大的 CSS 文件中调用较短的 CSS 文件，如下所示：

```
@import url('/css/smaller-file.css'); 
```

如果将其添加到较大的 CSS 文件中，那么您应该能够在 PHP 标头中只包含较大的 CSS 文件。

希望这可以帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T17:18:32.250

当然有一点，就像有许多任何语言的文件来组织内容一样。

由于有很多请求对性能造成很大负担，通常的解决方案（和我的）是使用构建脚本通过将目录的所有 CSS 文件连接到一个来构建生产中的版本。执行此操作的确切方法取决于您的建筑

请注意，这与对连接和缩小的 JS 文件所做的操作类似。

# ajax - 我应该向 googlebot 显示我的页面的任何 AJAX 版本吗？

> ID：14234023
> 
> 赞同：0
> 
> 时间：2013-01-09T11:16:28.043
> 
> 标签：ajax, seo, search-engine, googlebot

我有一个网站，可以说有一个产品的分页列表。

分页是基于 AJAX 的，它在没有 JavaScript 的情况下 100% 降级。

开启或关闭 JavaScript 后，此 Url 将显示相同的内容。（我的产品列表的第 4 页）这同样适用于任何过滤器和订购过滤器。

```
~/products/list/4  { 4 = page number } 
```

当 googlebot 登陆我的产品的第 1 页时，它将无法对产品进行分页，因为它是基于 AJAX 的分页。因此，如果我关闭 AJAX 分页并在 useragent == googlebot 的情况下退回到“服务器端”分页，那么它可以索引我所有的 Url，这些 Url 将与 AJAX 启用页面具有相同的内容。

我已经阅读了有关使用的信息`#!`，但我的网站确实具有相同的功能，我的网址在启用或启用 JS 的情况下都相同。

希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T04:44:55.410

如果是 Googlebot，请不要显示不同的内容，因为它可能被视为黑帽 SEO。定义您喜欢的女巫版本的最佳方法是使用**[canonical metatag](http://en.wikipedia.org/wiki/Canonical_link_element)**。

如果您不知道，请阅读以下内容：**[使 AJAX 应用程序可抓取](https://developers.google.com/webmasters/ajax-crawling/)**

# css - 是否可以将网页设置为视口的最小高度？

> ID：14234027
> 
> 赞同：0
> 
> 时间：2013-01-09T11:16:32.673
> 
> 标签：css

我有一些网页没有到达浏览器视口的底部。这特别烦人，因为页脚是全宽的，所以它会悬停。

我想要做的是将页脚至少放在视口的底部。我不想按照粘性页脚解决方案来修复它。

为了使它更难，页脚是可变高度的。

是否可以通过 css/javascript 实现固定高度/可变高度场景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:50:55.980

试试这个：

```
x=$(window).height(); 
$('.content').css('min-height',x+'px'); 
```

帮助它工作

# iphone - iPhone 中联系人的周年纪念日

> ID：14234029
> 
> 赞同：-1
> 
> 时间：2013-01-09T11:16:36.227
> 
> 标签：iphone

我可以从联系人获取出生日期，但不能从 iPhone 上获取周年日期。我使用了 KABPersonAnniversaryLabel，但它给出了一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:29:31.403

此代码将为所有联系人获取周年纪念日，

```
 ABAddressBookRef addressBook = ABAddressBookCreate();
    CFArrayRef people = ABAddressBookCopyArrayOfAllPeople(addressBook);
    for (CFIndex i = 0; i < CFArrayGetCount(people); i++) {
        ABRecordRef person = CFArrayGetValueAtIndex(people, i);
        ABMultiValueRef anniversaries = ABRecordCopyValue(person, kABPersonDateProperty);
        NSString *anniversaryLabel;
        for (CFIndex j=0; j < ABMultiValueGetCount(anniversaries); j++) {
            anniversaryLabel = (NSString*)ABMultiValueCopyLabelAtIndex(anniversaries, j);
            if([anniversaryLabel isEqualToString:(NSString *)kABPersonAnniversaryLabel])
            {
                NSDate *anniversaryDate=(NSDate *)ABMultiValueCopyValueAtIndex(anniversaries, j);
                NSLog(@"%@",anniversaryDate);
            }
        }
        CFRelease(anniversaries);
    }
    CFRelease(addressBook);
    CFRelease(people); 
```

# javascript - 什么是支持 iOS、Android、WP8 和下拉刷新功能的好的 iScroll 替代品？

> ID：14234037
> 
> 赞同：7
> 
> 时间：2013-01-09T11:17:03.347
> 
> 标签：javascript, android, iphone, html, iscroll

我正在寻找 iScroll 的替代方法，用于在 div 中滚动。

它需要支持这些操作系统：

*   iOS
*   安卓
*   WP8

而且我还需要下拉刷新功能。

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T09:20:50.167

经过几天的评估，我得出的结论是，没有适合我所有需求的框架或库。因此，剩下的唯一选择就是为每个操作系统创建自定义解决方案。这就是我想出的：

*   **iOS** < 5：iScroll
*   **iOS** >= 5：通过 CSS 属性`overflow-y:auto`和`-webkit-overflow-scrolling:touch`. [通过https://github.com/dantipa/pull-to-refresh-js](https://github.com/dantipa/pull-to-refresh-js)拉取刷新
*   **安卓**：iScroll
*   **WP8**：通过原生滚动`overflow-y:auto`。自己的pull-to-refresh实现（非常棘手）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T12:17:02.833

我不完全确定是否支持所有操作系统，但试一试（它也有 pull-to-refresh）：http: [//zynga.github.com/scroller/](http://zynga.github.com/scroller/)

[http://labs.ft.com/articles/ft-scroller/](http://labs.ft.com/articles/ft-scroller/)也值得一试（支持您的操作系统要求），尽管我不知道是否有办法轻松实现下拉刷新。

# php - 选择一组选项取决于您之前选择的选项

> ID：14234038
> 
> 赞同：2
> 
> 时间：2013-01-09T11:17:05.010
> 
> 标签：php, javascript, jquery, html

我正在使用两个选择，一个作为类别，第二个作为子类别。我希望使第二个选择菜单由在第二个选择菜单中选择的选项来确定。

这是 html/php 代码。

```
<select name="category" id="category">
  <?php 
$options = array("Stationary", "Bag", "Paper");
      foreach ($options as $option) {
    echo '<option value"' . $option . '"';
     if(in_array($option, $category)){
       echo " Selected";
     }
       echo ">" . ucfirst($option) . "</option>";
  }
  ?>
</select>

<select name="subcategory" id="subcategory">
    <?php
    $options = array("Pencils", "Ruler", "Pens");
      foreach ($options as $option) {
        echo '<option value"' . $option . '"';
          if(in_array($option, $category)){
            echo " selected";
          }
        echo ">" . ucfirst($option) . "</option>";
      }     
    ?>
     <?php
    $options = array("Small", "Large", "Paper");
      foreach ($options as $option) {
        echo '<option value"' . $option . '"';
      if(in_array($option, $category)){
        echo " selected";
      }
    echo ">" . ucfirst($option) . "</option>";
     }
    ?>
  <?php
    $options = array("Notepad", "Plain ", "Colour");
      foreach ($options as $option) {
        echo '<option value"' . $option . '"';
      if(in_array($option, $category)){
        echo " selected";
      }
    echo ">" . ucfirst($option) . "</option>";
     }
     ?>           
</select> 
```

我想要它，所以当您从类别中选择一个选项时，它将显示正确的选项以显示在`<select>`.

我不确定您是否可以做到这一点，但如果有人有想法或知道如何做到这一点，您的帮助将会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:24:32.153

如果我正确理解您的问题，您想要做的是根据类别选择子类别。

第一次将所有类别加载到类别选择框中。

2nd when the category option is selected retrive the value from select box(category_id) and make an [AJAX](http://api.jquery.com/jQuery.ajax/) call to get the sub categories for the selected category.

第三将它们填充到子类别选择框。

***根据要求更新答案***

[使用 PHP 的 jQuery Ajax POST 示例](https://stackoverflow.com/questions/5004233/jquery-ajax-post-example)

如果您有任何问题，请告诉我

# sql - 超过 6 个月的 SQL Server DETACH 数据库

> ID：14234039
> 
> 赞同：2
> 
> 时间：2013-01-09T11:17:07.153
> 
> 标签：sql, sql-server, detach

我可以像这样检索 6 个多月前创建的数据库列表：-

```
-- all databases over 6 months old
select name, crdate
from sys.sysdatabases
where crdate <= DATEADD(month, -6, GETDATE())
      AND name not in ('master','model','msdb','tempdb','distribution') 
```

给出这样的结果： -

```
name        crdate
db1         2008-06-25 09:01:11.747
db2         2008-06-25 09:01:50.967 
```

我可以像这样分离数据库：-

```
-- detach database
EXEC master.dbo.sp_detach_db @dbname = N'db1',
@keepfulltextindexfile = N'true' 
```

我需要为`sp_detach_db`第一个查询返回的每个数据库运行。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T11:23:18.363

您可以对任务使用光标：

```
declare cur cursor for
select name
from sys.sysdatabases
where crdate <= DATEADD(month, -6, GETDATE())
and name not in ('master','model','msdb','tempdb','distribution')

declare @name nvarchar(200)

open cur

fetch next from cur into @name

while @@FETCH_STATUS = 0
begin
    EXEC master.dbo.sp_detach_db @dbname = @name, @keepfulltextindexfile = N'true'
    fetch next from cur into @name
end

close cur
deallocate cur 
```

# jquery - 在 jquery 中处理元素

> ID：14234047
> 
> 赞同：0
> 
> 时间：2013-01-09T11:17:27.043
> 
> 标签：jquery, events, jquery-selectors

我有当前的代码：

```
<div class="submenu" id="submenu0">
    <ul class="root" id="root0">
        <li class="line_element line0"><a><img src="images/lifevl13.jpg" style="padding-left: 5px; width:20px; height:20px;" />Video</a></li>
        <li class="line_element line0" id="line_element0"><a><img src="images/lifevl12.jpg" style="padding-left: 5px; width:20px; height:20px;" />Ebook</a></li>
        <li class="line_element line0" id="line_element0"><a><img src="images/lifevl3.jpg" style="padding-left: 5px; width:20px; height:20px;" />Music/Audio</a></li>
        <li class="line_element line0" id="line_element0"><a><img src="images/lifevl2.jpg" style="padding-left: 5px; width:20px; height:20px;" />Email</a></li>
        <li class="line_element line0" id="line_element0"><a><img src="images/lifevl4.jpg" style="padding-left: 5px; width:20px; height:20px;" />Mail</a></li>
    </ul>
</div> 
```

我动态地克隆上面的内容并将其放置在页面的另一部分，该部分也是动态创建的。我想要的是 line0 部分在添加新元素时更改为 line1、line2 等，这样我就可以跟踪它们。

我的添加按钮事件处理程序通常执行此操作，但由于某种原因，我似乎无法让它在每个单独的“li”元素上工作。我会发布我的 jquery，但这是一大堆代码，所以除非你要求，否则我不会在这里提供。

编辑：（好的，这里是 jquery 的一部分）

```
 var numOfParts = ($('.gig_parts').length);
    $('.root.line_element:last').attr('id', 'line_element'+numOfParts); 
```

“numOfParts”变量跟踪动态创建的“字段集”并将其附加到我的 id 的末尾，我知道这不是这样做的好方法，但相信我，我改变得太远了现在，也许在以后的重新设计中。我对这一切还是很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:28:21.240

我处理类似情况的方法历来是避免`clone`每次都从头开始创建元素，要么（1）使用 jQuery，要么（2）使用文档片段。这样，您可以轻松控制`id`and `class`。

正如它在[jQuery 文档](http://api.jquery.com/clone/)中所说：

> 注意：使用 .clone() 具有产生具有重复 id 属性的元素的副作用，这些属性应该是唯一的。在可能的情况下，建议避免使用此属性克隆元素或使用类属性作为标识符。

也就是说，您可能想查看[这篇文章](https://stackoverflow.com/questions/14048432/create-reusable-document-fragment-from-the-dom)以获取更多评论。[这](https://stackoverflow.com/questions/9652420/inserting-a-nested-div-structure-with-createdocumentfragment)和[这](https://stackoverflow.com/questions/9598916/speed-efficiency-of-multiple-dom-appendchild)也可能是有趣的。

**进一步的想法：**

关于增量`class`和`id`数字，关键问题是它们服务的目的。如果您可以避免为每个元素赋予唯一性`id`并以另一种方式有效地处理它，那么这是可取的。每个人都可以这么说`class`。Javascript 和 jQuery 允许您处理`this`元素，因此您可能根本不需要唯一标识符。

在我的例子中，我通过 AJAX 从数据库中构建了数千个元素，每个元素都有一个`id`对应于其数据库索引的唯一元素。这对于维护 HTML 元素和 MySQL 记录之间的链接是必要的，但在您的情况下可能并非如此。这肯定与每次都从 1 构建索引不同。

总之，您需要确定唯一性`class`和`id`标识符为您实现的目标:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:18:16.103

我知道你有你的答案，但我提供了这个替代方案，以防有人不想使用重复/插入的 id 等，只想克隆他们拥有的东西，使用你的例子。我使用`.data()`来存储当前行的 id/索引号 - 不是特别需要，因为您也可以找到它的当前索引 - 只是为了显示真实性。

为了演示，我稍微修改了您的标记，如下所示：

```
<div class="submenu" id="submenu0">
  <ul class="root" id="root0">
    <li class="line_element"><a><img src="images/lifevl13.jpg" />Video</a></li>
    <li class="line_element"><a><img src="images/lifevl12.jpg" />Ebook</a></li>
    <li class="line_element"><a><img src="images/lifevl3.jpg" />Music/Audio</a></li>
    <li class="line_element"><a><img src="images/lifevl2.jpg" />Email</a></li>
    <li class="line_element"><a><img src="images/lifevl4.jpg" />Mail</a></li>
  </ul>
</div>
<div id="rowCount"></div>
<button id="rowAdd">Add New Row</button> 
```

然后使用这个非常冗长的代码，我展示了如何克隆最后一行并更新它。您可以重构此代码以使其更密集/更少冗长，但我将其保留为专门用于演示每个步骤。

```
//just show current row count
var numOfParts = $('#root0>.line_element').length + " rows";
$('#rowCount').text(numOfParts);
// show current rows numbers in a span and give
// them a "myid" data value with that value
//this is very verbose to show detail
$('#root0>.line_element').each(function () {
  var row = $(this);
  row.data('myid', row.index());
  row.append('<span class="rownumber">' + row.data("myid") + '</span>');
});

// add a new row
$('#rowAdd').click(function () {
  // add a row
  $('#root0>.line_element:last').clone().appendTo('#root0');

  // update the row count display
  var numOfParts = $('#root0>.line_element').length;
  $('#rowCount').text(numOfParts + " rows");

  // update the added row myid
  var rowAdded = $('#root0>.line_element:last');
  rowAdded.data('myid', rowAdded.index());

  // show what we are doing
  // then update the current added row displayed number using its data myid
  alert('updating: ' + $('#root0>.line_element:last>.rownumber').text() + " to " + rowAdded.data("myid"));
  $('#root0>.line_element:last>.rownumber').text(rowAdded.data("myid"));
}); 
```

这是一个工作示例：http: [//jsfiddle.net/RCTYZ/](http://jsfiddle.net/RCTYZ/)

# python - 如何检查烧瓶中是否存在get参数

> ID：14234063
> 
> 赞同：34
> 
> 时间：2013-01-09T11:18:52.563
> 
> 标签：python, flask

我是 python 和烧瓶的新手。

我知道我可以使用 request.args.get(varname); 获取 GET 参数。我想检查对我的服务器的 GET 请求是否指定和可选参数。

Flask 文档并没有太大帮助。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-09T11:21:13.600

您实际上可以使用默认值，

```
opt_param = request.args.get("something")
if opt_param is None:
    print "Argument not provided" 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2018-02-16T11:20:52.113

一种更 Pythonic 的方法是使用`in`运算符：

```
if 'varname' in request.args:
    # parameter 'varname' is specified
    varname = request.args.get('varname')
else:
    # parameter 'varname' is NOT specified 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-08-18T16:50:25.830

```
page = request.args.get("page", 0, type=int) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-07T19:38:55.053

您可以使用以下代码检查它：

```
name = request.args.get("name", default=None, type=str) 
```

# jquery - 消息：'jQuery' 为空或不是对象

> ID：14234065
> 
> 赞同：0
> 
> 时间：2013-01-09T11:18:56.433
> 
> 标签：jquery

我在网站[http://www.cateringhygiene.co.uk/shop/](http://www.cateringhygiene.co.uk/shop/)左侧有一个侧边栏菜单，其中包含商店内的所有类别供用户浏览。这适用于除 Internet Explorer 8 之外的所有浏览器（并且仅适用于版本 8）。

我收到的错误是“消息：'jQuery' 为空或不是对象”。我已经在下面粘贴了我的代码，希望您能够对我为什么会发生这种情况有所了解，并希望它也能让其他人受益！

```
 <script type="text/javascript">
        var jQuery = jQuery.noConflict(); 
        jQuery(document).ready(function () {
          jQuery('#sidenav > li > a.show-cat').click(function(){
            jQuery('#sidenav li ul').slideUp();
            if (!jQuery(this).hasClass('active')){                
              jQuery(this).next().slideToggle();
              jQuery('#sidenav li a.show-cat').removeClass('active');
              jQuery(this).addClass('active');
            }
            else if (jQuery(this).hasClass('active')) {
                jQuery(this).removeClass('active');
            }
          });
          jQuery('#sidenav > li > ul > li > a.show-cat').click(function(){
            jQuery('#sidenav li ul li ul').slideUp();
            if (!jQuery(this).hasClass('active')){
              jQuery(this).next().slideToggle();
              jQuery('#sidenav li ul li a.show-cat').removeClass('active');
              jQuery(this).addClass('active');
            }
            else if (jQuery(this).hasClass('active')) {
                jQuery(this).removeClass('active');
            }
          });
        });
    </script> 
```

任何帮助将不胜感激。

非常感谢！汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:05:04.580

我在 Chrome 中收到以下错误 - 即使它不是 IE8，但它是巨大的：

```
GET http://www.cateringhygiene.co.uk/shop/js/jquery/jquery-1.7.js 404 (Not Found) 
```

所以首先尝试将 jQuery`<head>`作为第一个 JS-File 加载。可能这就是您解决几个问题所需要做的一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:37:25.937

找不到文件

```
<script src=http://www.cateringhygiene.co.uk/shop/js/jquery/jquery-1.7.js"></script> 
```

你可以用这个...

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

问候。

# database - 使用 Symfony2 和 Doctrine 更新数据库中的索引

> ID：14234066
> 
> 赞同：1
> 
> 时间：2013-01-09T11:19:00.047
> 
> 标签：database, symfony, orm, indexing, doctrine

我正在尝试使用我的用户实体类中的注释方法向我的数据库添加索引，但是当我更新元数据并从命令行运行更新然后转到 phpMyAdmin 时，相关表没有索引。我有一个带有 role_id 外键的用户表，并希望使用下面的元数据将其添加为索引：

```
namespace XXX\XXXBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
* User
*
* @Table(name="user",indexes={@index(name="role_id", columns={"role_id"})})
* @ORM\Entity
* @ORM\HasLifecycleCallbacks()
*/

class User {

} 
```

另外，有人可以解释一下索引名称指的是什么吗？这可以设置为任何东西吗？我假设 columns= 是我要索引的字段名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:22:06.870

您的索引注释只是在错误的地方。它必须是类的注解，而不是属性的注解。

参见[教义 2 文档](http://docs.doctrine-project.org/en/2.0.x/reference/annotations-reference.html#annref-index)

# jquery - 如何避免使用 jquery 多次向 div 添加相同的图像？

> ID：14234079
> 
> 赞同：0
> 
> 时间：2013-01-09T11:20:06.297
> 
> 标签：jquery, image

我在 jquery 工作。我编写了一个脚本，将图像从第一个 div 添加到第二个 div。但是，我不希望两次添加相同的图像。

这是第一个 div 的代码

```
<div><span class="span1">
<img width="30" hieght="30" name="productimage" src="http://panther:805/Computers.jpg"></span>
<span class="span1">Black_xxl_Slim</span>
<span class="span1">1</span>
<a class="pull-right" href="#"><i onclick="Add(this)" class="icon-plus"></i></a>
</div> 
```

这是第二个 div 的代码：

```
<div class="span6" id="separat">
            <ul class="thumbnails pre-scrollable" id="productbundles">
            </ul>
        </div> 
```

这是我的jQuery

```
function Add(obj) {
    var img = $(obj).closest('div').find('img').first();

    var image_src = $(img).attr('src');
    var newobj = $('<li class="span2" id="bunle' + id++ + '"><a href="javascript: void(0)"><img hieght=30  width=30 src="' + image_src + '" /></a><h5>'+"Name:" + name + '</h5><span id="pric' + id + '"><b>'+ "Price:"+ price + '</b></span>');
    $('#productbundles').append(newobj);
} 
```

添加 div 效果很好，但它允许将相同的项目添加两次。我怎样才能阻止这种情况发生？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:25:47.817

您必须有一个已经存在或已添加的图像列表，以避免再次添加它们。只需建立一个列表，如：

```
var added_images = []; 
```

并使用简单的方法检查列表中的图像存在：

```
 if (added_images.indexOf(src)) {
    // image already exists
    } else {
       // add the image to the list
       added_images.push(src);
       // and DOM...
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:29:04.803

```
if(!$("#productbundles img[src$='" + image_src + "'").length)
{
var newobj = $('<li class="span2" id="bunle' + id++ + '"><a href="javascript: void(0)"><img hieght=30  width=30 src="' + image_src + '" /></a><h5>'+"Name:" + name + '</h5><span id="pric' + id + '"><b>'+ "Price:"+ price + '</b></span>');
$('#productbundles').append(newobj);
} 
```

如果您有 src 的完整路径，请尝试删除 $.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T11:30:05.990

有很多方法可以做到这一点......您可以向`<img>`已附加的类添加一个类并检查该类..使用`hasClass`。

我这样做的方式是..创建一个数组..并将其推`src`入数组并检查数组中`src`是否存在

```
function Add(obj) {
  var addedImagesArray=[];
  var img = $(obj).closest('div').find('img').first();

   var image_src = $(img).attr('src');
   var newobj = $('<li class="span2" id="bunle' + id++ + '"><a href="javascript: void(0)"><img hieght=30  width=30 src="' + image_src + '" /></a><h5>'+"Name:" + name + '</h5><span id="pric' + id + '"><b>'+ "Price:"+ price + '</b></span>');
   if (addedImagesArray.indexOf(image_src)) {
       alert("Image Already Added");//src present in the array so do nothing or show an alert..
   } else{
       $('#productbundles').append(newobj); //append the image
       addedImagesArray.push(image_src); ///add src to array
   }
} 
```

# sql - 有加入计数

> ID：14234081
> 
> 赞同：3
> 
> 时间：2013-01-09T11:20:10.763
> 
> 标签：sql, oracle

我想知道哪个播放列表有超过 2 首歌曲。该语句有效，但我想要播放列表的名称和显示歌曲的 count() 。我想我必须使用连接，但我不明白这应该如何工作。有人可以帮忙吗？

```
playlist table
++++++++++++++
id
name

playlist_songs table
++++++++++++++++++++
song_id
playlist_id

SELECT p.name FROM playlist p 
WHERE p.id in (SELECT s.playlist_id counter FROM playlist_songs s
group by playlist_id
having count(song_id)>2); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T11:22:59.287

> 我想要播放列表的名称和所显示歌曲的 count()。

这是使用谓词`JOIN`的优点之一：`IN`

```
SELECT 
  p.name, 
  COUNT(song_id) counter
FROM playlist p 
INNER JOIN playlist_songs s ON  p.id = s.playlist_id 
GROUP BY playlist_id
HAVING COUNT(song_id) > 2; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T11:24:12.950

尝试：-

```
SELECT
  p.name,
  count(s.song_id)
FROM
  playlist p
INNER JOIN
  playlist_songs s
ON
  p.id = s.playlist_id
GROUP BY
  p.name
HAVING
  COUNT(s.song_id) >= 2 
```

这是 SQL 服务器语法，但应该适用于 Oracle。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T11:24:43.823

这就是你需要的：

```
SELECT p.name as name, count(*) as counter
FROM playlist p left outer join playlist_songs s on (p.id = s.playlist_id)
GROUP BY p.name
HAVING count(*) > 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T11:28:36.983

请试试：

```
SELECT a.name
FROM
  playlist a INNER JOIN  playlist_songs b 
  ON a.id = b.playlist_id
GROUP BY a.name
HAVING COUNT(*) >1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T11:36:18.060

如果可能，请始终使用 join

```
SELECT p.name play_list,count(s.song_id) total_songs 
FROM playlist p 
INNER JOIN playlist_songs s 
ON p.id = s.playlist_id 
GROUP BY p.name 
HAVING COUNT(s.song_id) >= 2; 
```

# ios - NSRegularExpression 帮助 + iOS

> ID：14234089
> 
> 赞同：1
> 
> 时间：2013-01-09T11:20:41.333
> 
> 标签：ios, regex

我正在寻找一些有关在 iPhone 应用程序中使用的正则表达式的帮助。

我正在使用 NSRegularExpression。

```
NSString *string = @"[quote author=iffets12345 link=topic=36426.msg388088#msg388088 date=1294820175][quote author=fuzzylogic link=topic=36426.msg387976#msg387976 date=1294802623]Although it wouldn't come up too often in an English essay: MUM not mom!!!![/quote]Haha, EXACTLY![/quote]"; 
```

我有这个字符串，它只是论坛帖子的 BBCode。在这种情况下，报价中的报价。

```
NSRegularExpression *quoteRegex = [NSRegularExpression regularExpressionWithPattern:@"\\[quote author=(.*?) .*?\\](.*?)\\[\\/quote\\]"
                                                                            options:NSRegularExpressionCaseInsensitive
                                                                              error:&error]; 
```

这就是我用来解析它的正则表达式。

它在没有嵌套引号的普通 BBCode 上运行良好。但是当引号被嵌套时，这个正则表达式不能像我希望的那样工作。

在此特定字符串上运行正则表达式时，它将返回如下内容：

```
"[quote author=iffets12345 link=topic=36426.msg388088#msg388088 date=1294820175][quote author=fuzzylogic link=topic=36426.msg387976#msg387976 date=1294802623]Although it wouldn't come up too often in an English essay: MUM not mom!!!![/quote] 
```

它不正确地匹配开始和结束引号标签。

谁能看到我错过了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:27:33.653

我已经为你做了这个正则表达式：[DEMO](http://regex101.com/r/tM8kE3)

```
(
   \[quote\s+author=([^\[\]]*)
          \s+link  =([^\[\]]*)
          \s+date  =([^\[\]]*)\]  #The [quote author=4543] part
   (?>
       (?<text>[^\[\]]+)          #Here is where I ask for text or another quote inside it
       |
       (?<quote>(?1))             #I say that there can be another quote 
                                  #inside a quote (you just will be able 
                                  #to backreference the author of the first one
   )*
   \[\/quote\]                    #End of the quote text
) 
```

我不确定这是否是您需要的，但我希望它是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:52:13.540

您需要在开头和结尾都锚定正则表达式。尝试：

```
@"^\\[quote author=(.*?) .*?\\](.*?)\\[\\/quote\\]$" 
```

# java - How to unmarshall XML code containing DIFFGR

> ID：14234091
> 
> 赞同：7
> 
> 时间：2013-01-09T11:20:43.893
> 
> 标签：java, xml, jaxb, unmarshalling

New to JAXB, I am trying to **unmarshall** XML document. I used the `xjc` command to build the DataSet and ObjectFactory from the XSD file:

```
<xs:schema xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" id="NewDataSet">
    <xs:element name="NewDataSet" msdata:IsDataSet="true" msdata:UseCurrentLocale="true">
        <xs:complexType>
            <xs:choice minOccurs="0" maxOccurs="unbounded">
                <xs:element name="Table">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="AUTHOR" type="xs:string" minOccurs="0"/>
                            <xs:element name="TITLE" type="xs:string" minOccurs="0"/>
                            <xs:element name="ISBN" type="xs:string" minOccurs="0"/>
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
            </xs:choice>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

The `NewDataSet` class generated is as follows:

```
package generated;

import java.util.ArrayList;
import java.util.List;
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "table"
})
@XmlRootElement(name = "NewDataSet")
public class NewDataSet {

    @XmlElement(name = "Table")
    protected List<NewDataSet.Table> table;

    public List<NewDataSet.Table> getTable() {
        if (table == null) {
            table = new ArrayList<NewDataSet.Table>();
        }
        return this.table;
    }

    @XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = "", propOrder = {
        "author",
        "title",
        "isbn"
    })
    public static class Table {

        @XmlElement(name = "AUTHOR")
        protected String author;
        @XmlElement(name = "TITLE")
        protected String title;
        @XmlElement(name = "ISBN")
        protected String isbn;

        public String getAUTHOR() {
            return author;
        }

        public void setAUTHOR(String value) {
            this.author = value;
        }

        public String getTITLE() {
            return title;
        }
        public void setTITLE(String value) {
            this.title = value;
        }

        public String getISBN() {
            return isbn;
        }

        public void setISBN(String value) {
            this.isbn = value;
        }

    }

} 
```

The `ObjectFactory` is:

```
package generated;

import javax.xml.bind.annotation.XmlRegistry;

@XmlRegistry
public class ObjectFactory {

    public ObjectFactory() {
    }

    public NewDataSet createNewDataSet() {
        return new NewDataSet();
    }

    public NewDataSet.Table createNewDataSetTable() {
        return new NewDataSet.Table();
    }

} 
```

The XML file that I am trying to unmarshall is as follows:

```
<NewDataSet xmlns="">
    <diffgr:diffgram xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1">
        <Table diffgr:id="Table1" msdata:rowOrder="0">
            <AUTHOR>Kubo Tite</AUTHOR>
            <TITLE>Bleach</TITLE>
            <ISBN>1234456</ISBN>
        </Table>
        <Table diffgr:id="Table2" msdata:rowOrder="2">
            <AUTHOR>Masashi Kishimoto</AUTHOR>
            <TITLE>Naruto</TITLE>
            <ISBN>435345</ISBN>
        </Table>
        <Table diffgr:id="Table3" msdata:rowOrder="3">
            <AUTHOR>Eiichiro Oda</AUTHOR>
            <TITLE>One Piece</TITLE>
            <ISBN>56767</ISBN>
        </Table>
    </diffgr:diffgram>
</NewDataSet> 
```

The code that does the unmarshalling is as follows:

```
package consume;

import generated.NewDataSet;
import generated.NewDataSet.Table;

import java.io.File;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Unmarshaller;

public class UnmarshallingCode {
    public static void main(String[] args) {
        try{
            File file=new File("data.xml");
            JAXBContext jb=JAXBContext.newInstance(NewDataSet.class);

            Unmarshaller unmarshaller=jb.createUnmarshaller();
            NewDataSet newDataSet=(NewDataSet)unmarshaller.unmarshal(file);
            for(Table t: newDataSet.getTable()){
                System.out.println(t.getTITLE());
            }
        }catch(JAXBException e){
            e.printStackTrace();
        }
    }
} 
```

The above code doesn't generate any errors but isn't producing any result. The call `newDataSet.getTable()` returns an empty list.

However if I remove the `<diffgr:diffgram xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1">` and its related attributes from the XML file, the above code runs fine and produces all the titles in the XML document. But that is not a permissible solution as the XML document is very large and most probably I am not allowed to make huge changes to the structure. How can I unmarshall the above mentioned XML file? Please advice.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T11:40:01.127

The XML document you are trying to unmarshal does not conform to your XML schema. This is why your [**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222) implementation is not bringing in the data as your expect, and why it does when you remove the `diffgr` element.

**Removing the Extra Element**

You could create a filtered `XMLStreamReader` that removes the extra elements and then unmarshal from that.

```
XMLInputFactory xif = XMLInputFactory.newFactory();
StreamSource xml = new StreamSource("src/forum14234091/input.xml");
XMLStreamReader xsr = xif.createXMLStreamReader(xml);

xsr = xif.createFilteredReader(xsr, new StreamFilter() {
    @Override
    public boolean accept(XMLStreamReader xsr) {
        if(xsr.isStartElement() || xsr.isEndElement()) {
            return !"urn:schemas-microsoft-com:xml-diffgram-v1".equals(xsr.getNamespaceURI());
        }
        return true;
    }
}); 
```

**Creating the `JAXBContext`**

When you generate a JAXB model from an XML schema you should create the `JAXBContext` on the package name of the generated classes and not the root class. This will ensure that all the generated artifacts get processed.

```
JAXBContext jb=JAXBContext.newInstance("generated");

Unmarshaller unmarshaller=jb.createUnmarshaller();
NewDataSet newDataSet=(NewDataSet)unmarshaller.unmarshal(xsr);
for(Table t: newDataSet.getTable()){
    System.out.println(t.getTITLE());
} 
```

**Changing the Package Name**

By default the package name of generated classes is based on the `targetNamespace` and is `generated` if there isn't one. You can also specify the package name during the XJC call.

```
xjc -p com.example.foo schema.xsd 
```

# qt - Qt::createQmlObject (string qml, object parent, string filepath) 在 BB10 Cascades 中工作吗？

> ID：14234094
> 
> 赞同：2
> 
> 时间：2013-01-09T11:20:50.457
> 
> 标签：qt, qml, blackberry-10, blackberry-cascades

```
var newObject = Qt.createQmlObject('import bb.cascades 1.0; Label {text: "Hold on cowboy!" }', parentContainer, "dynamicSnippet1"); 
```

它运行，并返回一个对象，但它从不显示在屏幕上。我已经将它作为我页面 QML 中的一个容器的父级。没有错误被抛出。我想知道这在 Cascades 中是否不起作用。

它记录在 BB10 Cascades 文档中：[https ://developer.blackberry.com/cascades/reference/qml-qt.html#createQmlObject-method](https://developer.blackberry.com/cascades/reference/qml-qt.html#createQmlObject-method)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-22T08:38:07.763

好的，我发现我的情况有问题。
我使用`Qt.createQmlObject()`如下：

```
import QtQuick 2.2;

Rectangle {
    id: root
    width: 300; height: 300

    Row {
        id: itemContainer
        Component.onCompleted: {
            var newObject = Qt.createQmlObject('import QtQuick 2.2; Rectangle {color: "red"; width: 200; height: 200}', itemContainer, "");
        }

        Rectangle {
            width: 100; height: 50
            color: "Yellow"
        }
    }
} 
```

这不起作用，我将其更改如下：

```
import QtQuick 2.2;

Rectangle {
    id: root
    width: 300; height: 300

    Row {
        id: itemContainer

        Rectangle {
            width: 100; height: 50
            color: "Yellow"
        }

        Component.onCompleted: {
            var newObject = Qt.createQmlObject('import QtQuick 2.2; Rectangle {color: "red"; width: 200; height: 200}', itemContainer, "");
        }
    }
} 
```

它可以工作，但不如预期！如您所见，在元素`Qt.createQmlObject()`内部执行`Row`不会导致重新计算元素的一些基本估计`Row`。
我将此报告为[https://bugreports.qt-project.org/browse/QTBUG-40356中的错误](https://bugreports.qt-project.org/browse/QTBUG-40356)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T18:47:31.110

1）请检查newObject是否被创建。

这是示例代码：

```
var newObject = Qt.createQmlObject('import bb.cascades 1.0; 
    Label {text: "Hold on cowboy!" }', parentContainer, "dynamicSnippet1");

if(newObject == null) {
   console.log("error creating object" +  newObject.errorString());
} 
```

2) 请确保 parentContainer 可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T23:52:56.890

在我看来，问题在于没有给出大小和/或位置。尝试这个：

```
var newObject = Qt.createQmlObject('import bb.cascades 1.0; Label {text: "Hold on cowboy!"; anchors.fill: parent }', parentContainer, "dynamicSnippet1"); 
```

还尝试将父级锚定到窗口大小（根元素 - 如果还没有）。

另一个可能出现的问题是字体颜色与背景匹配，所以也要检查一下。

# javascript - Video.js - 使用 Flash 的单个页面上的多个 mp4 视频

> ID：14234103
> 
> 赞同：3
> 
> 时间：2013-01-09T11:21:15.080
> 
> 标签：javascript, html5-video, video-processing, video.js

我在一个页面上有两个 MP4 视频，但加载不正确。第一个视频可以播放，但第二个视频只会显示黑屏。我已经尝试了[Multiple video.js player failed on flash fallback](https://stackoverflow.com/questions/14171563/multiple-video-js-players-fail-on-flash-fallback)中详述的修复，但它们没有奏效。

我已将后备顺序更改为先使用 flash，然后再使用 html5，因为 firefox 不会尝试退回到 flash。我知道这是导致问题的 Flash 播放器，就好像我保留了 html5 的默认顺序，然后是 flash，播放器将在 chrome 上运行。

这是我正在经历的一个小提琴：http: [//jsfiddle.net/jSp8Z/](http://jsfiddle.net/jSp8Z/)

```
<script src="//vjs.zencdn.net/c/video.js"></script>
<link rel="stylesheet" href="//vjs.zencdn.net/c/video-js.css">

<video class="video-js vjs-default-skin" controls width="320" height="459" poster="" data-setup='{"techOrder":["flash","html5","links"]}'>
<source src="http://images.pitchero.com/up/2013-01-08-iphone-af.mp4" type="video/mp4">
</video>
<video class="video-js vjs-default-skin" controls width="320" height="459" poster="" data-setup='{"techOrder":["flash","html5","links"]}'>
<source src="http://images.pitchero.com/up/2013-01-08-iphone-matchday.mp4" type="video/mp4">
</video> 
```

提前致谢

[编辑] 我找到了一个解决方案，将视频重新编码为 OGG for firefox，但我不会接受这个作为我自己的答案，除非没有办法通过 flash 后备解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-01T06:02:18.577

我找到了这个。它对我来说工作正常。将以下这些行添加到您的页面

```
<script>
var myVideo = _V_("example_video_1"); // get my videojs.  
function onComplete(){  
    var myVideo1 = document.getElementsByTagName('video')[0]; // get my <video> tag.  
    var videoPlaying = myVideo1.currentSrc; // get the file being played  
    var ext = videoPlaying.substr(videoPlaying.lastIndexOf(".")); // figure the correct extension  
    myVideo1.src = 'video/eu'+ext; // set up the new src  
    myVideo.load(); // load the new video  
    myVideo.play(); // play the new video  
    myVideo.removeEvent("ended", onComplete); // remove the listener  
};  
myVideo.addEvent("ended", onComplete); // listener handler  
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:50:55.680

您正在尝试使用 HTML5 播放 .mp4 视频，这在 firefox 中至少本机不支持。

看看[这里的兼容性图表](https://developer.mozilla.org/en-US/docs/HTML/Supported_media_formats?redirectlocale=en-US&redirectslug=Media_formats_supported_by_the_audio_and_video_elements)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T13:23:19.243

尝试为每个视频标签添加唯一的“id”属性。文档说这是必需的，这是有道理的，因为 Flash 和 JS 组件可能需要在相互交谈时区分视频元素

# javascript - 带有 extbase 的流体模板中的 Json 到 javascript

> ID：14234104
> 
> 赞同：3
> 
> 时间：2013-01-09T11:21:16.207
> 
> 标签：javascript, json, typo3, fluid, extbase

我试图在 javascript 变量中获取 json。我在我的 extbasetypo3-extension 中使用了流体模板。在我的操作中，我用 curl 加载了一些 json。我分配给模板的这个 json。在我的模板中，它看起来像：

```
<script type="text/javascript">
var json = {jsonVarFromControllerAction};
</script> 
```

在这种情况下，json 被解释为 html 代码。看起来像：

```
{&quot;content&quot;:&quot;testcontent&quot;} 
```

在控制器动作中，它是一个正确的 json！

```
{"content": "testcontent"} 
```

解决方案是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T11:31:25.447

使用`<f:format.htmlentitiesDecode>`ViewHelper 对其进行解码，例如：

```
<script type="text/javascript">
    var json = <f:format.htmlentitiesDecode>{jsonVarFromControllerAction}</f:format.htmlentitiesDecode>;
</script> 
```

您可以浏览所有可用的 ViewHelper 在`typo3/sysext/fluid/Classes/ViewHelpers`

其他选项是直接从使用 AJAX 的操作中获取使用 PHP 格式化的 JSON（不将其传递给视图），如果您想在不刷新整个页面的情况下获取新数据，这将非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:54:13.523

我写了自己的viewhelper。这个 viewhelper 只获取 json-content 和 html_entity_decode 它。

```
public function render($json)
{
    return html_entity_decode($json);
} 
```

它工作得很好，但我问自己，为什么我应该写一个助手来获取我自己变量的纯内容？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-21T10:34:29.820

*vhs*有[`format.json.encode`](https://fluidtypo3.org/viewhelpers/vhs/master/Format/Json/EncodeViewHelper.html)：

```
<script type="text/javascript"> 
    var title = {v:format.json.encode(value: branch.name)};
    //.. do something
</script> 
```

# objective-c - 标签上带有点的字符串

> ID：14234107
> 
> 赞同：1
> 
> 时间：2013-01-09T11:21:19.947
> 
> 标签：objective-c, ios6, odata

我使用生成的代理从 odata 通道捕获一些数据
（生成器来自[http://www.odata.org/](http://www.odata.org/)）

服务：

> ```
> ...
>            <d:prop1>test1</d:prop1>
>            <d:prop2>test2</d:prop2>
>        </m:properties>
>    </content> 
> ```
> 
> 所有带有 EDM.string 且可为空的属性

生成的对象是这样的（所有 NSString）：

> 我的数据.prop1 我的数据.prop2

我有一个带有静态单元格的表格视图，“左侧细节”样式和细节标签的 IBoutlet。

> @property (weak, nonatomic) IBOutlet UILabel detailLabel;

NSLog 打印所有属性值正确。但是如果我想将它们添加到 detailLabel 中，一些值总是显示为第一个字符和三个点（v...）。该行为取决于属性，而不是字符串长度或 detailLabel。

> self.detailLabel.text = myData.prop1;

如果我将一个字符串附加到具有 3 个字符的属性字符串，则它会像 vvvv ... 那样锁定，但点永远不会消失

字符串格式化程序和 [self.detailLabel setNeedsLayout] 不能解决这个问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:24:34.120

编辑：

那是**省略号**。

每当您的文本比 UITextFiled 长时，它就会以这种方式显示。像 ：

`Hi AnoopVa...`代替`Hi AnoopVaidya`.

上一个答案：

您必须附加包含...的字符串

或者，您可以截断字符串中的最后三个字符，如果它真的不想要并且让您烦恼的话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:43:07.693

您看到的是**自动字符串截断**，您的文本字符串中实际上没有 3 个点。该字符串比您的标签在可用空间上所能容纳的长度稍长。

如果您不想查看/显示它们，请调整您的 UILabel 宽度、字体大小和 lineBreakModel。选择是：

```
enum {
NSLineBreakByWordWrapping = 0,
NSLineBreakByCharWrapping,
NSLineBreakByClipping,
NSLineBreakByTruncatingHead,
NSLineBreakByTruncatingTail,
NSLineBreakByTruncatingMiddle
};
typedef NSUInteger NSLineBreakMode 
```

For iOS5 and older check [UILineBreakMode documentation](http://developer.apple.com/library/ios/#documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html), for iOS6 and newer check [NSLineBreakMode documentation](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSParagraphStyle_Class/Reference/Reference.html#//apple_ref/c/tdef/NSLineBreakMode).

# windows - 尝试自动化一系列步骤，包括连接到服务器和登录

> ID：14234111
> 
> 赞同：1
> 
> 时间：2013-01-09T11:21:39.263
> 
> 标签：windows, perl, networking

我正在尝试使用 Perl 脚本自动执行一系列步骤。在这我需要连接到服务器（我通过打开手动完成`putty.exe`），登录到它然后执行一些命令。

我尝试使用`NET::SSH::Perl`但命令没有被执行（我在这里没有收到任何错误消息）。有没有其他方法可以修复它并继续进行，还是使用 Perl 无法做到这一点？

```
$host= "mhadli";
$user= "rshukla";
$pass= "******";
$cmd = "ll";
use Net::SSH::Perl;
my $ssh = Net::SSH::Perl->new($host);
$ssh->login($user, $pass);
my($stdout, $stderr, $exit) = $ssh->cmd($cmd); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:13:01.487

值得注意的是，如果您在可以访问 shell 的机器上工作……您可以使用非常简单的 `` 运算符在 perl 中运行 shell 命令：

```
`ssh 08.736.fak.eip -l mylogin/pwd` 
```

这可能足以登录到机器 - 然后您可以继续在脚本的其余部分执行您需要执行的任何 perl。

我也建议添加

```
use strict;
use warnings; 
```

在脚本之上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:28:40.830

这听起来像是`expect`（为/由伟大的语言创建`tcl`）的工作。它的创建正是考虑到了这种用法。您可以从 perl 调用期望脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:32:25.983

[使用Net::SSH2](https://metacpan.org/module/Net%3a%3aSSH2)或尚未成熟但更易于使用的[Net::SSH::Any](https://metacpan.org/module/Net%3a%3aSSH%3a%3aAny)代替旧的、无人维护且非常难以安装的 Net::SSH::Perl ！

# sqlite - WP7 上的 CsharpSqlite

> ID：14234112
> 
> 赞同：0
> 
> 时间：2013-01-09T11:21:41.520
> 
> 标签：sqlite, windows-phone-7, wp7test

我正在尝试在使用 SQLite 数据库的 WP7 上创建一个愚蠢的应用程序。为此，我使用了一个众所周知的开源库，称为 CsharpSqlite（[CsharpSqlite 的站点](http://code.google.com/p/csharp-sqlite/)）。我午餐 Community.CsharpSqlite.SQLiteClient.WP 项目我修复了一些构建错误，然后，使用作为启动项目 SQLiteClientTests.WinPhone，我在调试模式下运行它，如果一些测试失败，它也可以工作。

我的问题是当我尝试在发布模式下运行它时。在 Bild 期间，我有 747 错误。我不知道如何修复它以及为什么在调试模式下它可以工作而在发布模式下它不起作用。

我还阅读了[编译器选项](http://code.google.com/p/csharp-sqlite/wiki/CompilerOptions)，但它们没问题。

现在，要开始工作，我正在使用该库的旧版本（您可以在[此处](http://wp7sqlite.codeplex.com/)找到它）但它已经过时并且可能存在一些错误。

有什么建议吗？

# mysql - 尝试删除用户时出现 IntegrityError

> ID：14234114
> 
> 赞同：2
> 
> 时间：2013-01-09T11:21:48.370
> 
> 标签：mysql, django, innodb

我`IntegrityError`在尝试删除 a 时得到一个`User`：

```
IntegrityError: (1451, 'Cannot delete or update a parent row: 
  a foreign key constraint fails (`mydb`.`app_object`, 
  CONSTRAINT `user_id_refs_id_2656bb273656cb16` FOREIGN KEY (`user_id`) 
  REFERENCES `auth_user` (`id`))') 
```

使用 shell，我可以`app_object`使用 django 方法删除该用户的所有条目，但是当我尝试从管理站点删除时，它仍然抛出这个错误。这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:03:12.670

首先，删除模型中所有引用用户模型的条目。然后删除用户条目。

# android - 两个播放器 android 教程（蓝牙/互联网）

> ID：14234115
> 
> 赞同：1
> 
> 时间：2013-01-09T11:21:49.417
> 
> 标签：android

我正在寻找使用 android 的两人游戏教程。我真的不知道从哪里开始。我读过这个[论坛](https://stackoverflow.com/questions/6263991/android-two-player-game-to-be-played-in-internet)，但我需要的是一个示例代码，因为我什么都不懂。有什么建议可以让我找到示例代码（真的很简单）吗？

谢谢你。

# java - Google Maps Android API v2 Moon and Mars

> ID：14234120
> 
> 赞同：0
> 
> 时间：2013-01-09T11:22:06.487
> 
> 标签：java, javascript, android, html, google-maps

我一直在使用 Javascript Google Maps API，并且能够让它显示 Google 拥有的月球和火星地图。

我想知道我是否可以在原生 Android 上做同样的事情。查看适用于 Android API V2 的 Google Maps，我没有看到任何提及此功能。在搜索网络时，我也没有。

所以我的问题。我可以在 Android 中本地拥有 Google Mars 和 Moon 地图吗？还是我必须将 HTML5/Javascript 包装到 Web 视图中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:33:40.047

我不确定这是否是您要查找的内容，但在使用 Google Play 服务库下载的示例中，您将获得地图演示应用程序并检查 Tile Overlays Activity，它显示了如何添加月球图块。

这是在哪里可以找到示例代码的链接：[示例代码](https://developers.google.com/maps/documentation/android/intro)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-21T22:20:27.827

我使用了@Moh 提供的建议，它工作正常。谢谢你。

还为android编写了火星地图的代码。使用此示例 [https://github.com/googlemaps/android-samples/blob/master/ApiDemos/java/app/src/main/java/com/example/mapdemo/TileOverlayDemoActivity.java](https://github.com/googlemaps/android-samples/blob/master/ApiDemos/java/app/src/main/java/com/example/mapdemo/TileOverlayDemoActivity.java)

这里是火星的方法

```
@Override
public void onMapReady(GoogleMap map) {
    map.setMapType(GoogleMap.MAP_TYPE_NONE);

    TileProvider tileProvider = new UrlTileProvider(256, 256) {

        @Override
        public synchronized URL getTileUrl(int x, int y, int zoom) {
            // The mars tile coordinate system .
            System.out.println(" marte 101");
            double bound = Math.pow(2, zoom);

            String quads = "t";
            System.out.println(" marte 102");
            for (int z = 0; z < zoom; z++) {
                bound = bound / 2;
                if (y < bound) {
                    if (x < bound) {
                        quads=quads+"q";
                    } else {
                        quads=quads+"r";
                        x -= bound;
                    }
                } else {
                    if (x < bound) {
                        quads=quads+"t";

                        y -= bound;
                    } else {
                        quads=quads+"s";

                        x -= bound;
                        y -= bound;
                    }
                }
            }

            System.out.println(" marte 103");

            String s = "http://mw1.google.com/mw-planetary/mars/elevation/"+quads+".jpg";
            System.out.println(" marte 104:"+s);
            URL url = null;
            try {
                url = new URL(s);
            } catch (MalformedURLException e) {
                throw new AssertionError(e);
            }
            return url;
        }
    };
    System.out.println(" marte 2");
    mMoonTiles = map.addTileOverlay(new TileOverlayOptions().tileProvider(tileProvider));
    System.out.println(" marte 3");
    mTransparencyBar.setOnSeekBarChangeListener(this);
    System.out.println(" marte 4.1");
} 
```

[我从这个https://github.com/beekay-/gmaps-samples-v3/blob/master/planetary-maptypes/planetary-maptypes.html](https://github.com/beekay-/gmaps-samples-v3/blob/master/planetary-maptypes/planetary-maptypes.html)获得了原始方法（在 javascript 中）

我用了海拔。但也有带有可见光或红外线选项的火星地图。

希望它对在 Java Android 中寻找火星地图的人有所帮助。

# asp.net-mvc-4 - AppHarbor 负载平衡云部署上的访问和身份 WIF“密钥无效”

> ID：14234121
> 
> 赞同：0
> 
> 时间：2013-01-09T11:22:07.367
> 
> 标签：asp.net-mvc-4, cloud, wif, appharbor, system.security

现在所有。

在 AppHarbor 上使用 Identity and Access 和 Azure STS 的 MVC 应用程序遇到一些问题，给出“密钥在指定状态下无效”错误。

据我所知，这是由于使用机器密钥的默认加密，这显然不适用于负载平衡的 scnario。

我尝试用 RSA 类 RsaEncryptedSessionSecurityTokenHandler 替换： SessionSecurityTokenHandler

这会选择一个要使用的 pfx 文件密钥（使用 SelfCert 创建），但是虽然这在本地工作，但它在 appharbor 站点上不起作用： System.Security.Cryptography.CryptographicException: Keyset does not exist 我猜这是因为密钥不仅仅与文件相关联。

那么如何解决原来的问题呢？一直在寻找解决方案的一天，但似乎没有任何东西适用于这种情况。

TIA

编辑：我尝试过修改此代码：[SessionSecurityTokenHandler 尝试使用 DPAPI 解密 RSA 加密 cookie 中的 SessionSecurityToken；为什么？](https://stackoverflow.com/questions/12904109/sessionsecuritytokenhandler-trying-to-decrypt-sessionsecuritytoken-in-rsa-encryp)

用于新的 WIF 4.5 内容，如下所示：

```
List<CookieTransform> sessionTransforms = new List<CookieTransform>(new CookieTransform[]
{
    new DeflateCookieTransform()
    ,
    new RsaEncryptionCookieTransform
        (e
             .FederationConfiguration
             .IdentityConfiguration
             .ServiceCertificate)
    ,
    new RsaSignatureCookieTransform
        (e
             .FederationConfiguration
             .IdentityConfiguration
             .ServiceCertificate)
});

SessionSecurityTokenHandler sessionHandler =
    new SessionSecurityTokenHandler(sessionTransforms.AsReadOnly());

e.FederationConfiguration.IdentityConfiguration.SecurityTokenHandlers.AddOrReplace(sessionHandler); 
```

但 e.ServiceCertificate 始终为空。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:11:55.180

MachineKey 确实有效 - 但您需要在 config.xml 中明确设置密钥。为此使用 machineKey 元素。

# jquery - 如何将具有不同高度的div彼此对齐？

> ID：14234122
> 
> 赞同：0
> 
> 时间：2013-01-09T11:22:06.707
> 
> 标签：jquery, html, css

你可以看看我的小提琴[here](http://jsfiddle.net/SHZ2G/)。它们之间有空间，但我希望它们彼此重叠。我怎样才能用 jQuery 做到这一点？我尝试使用 Masonry，但这段代码没有帮助：

```
(function(){
var $container = $('.rss');
$container.imagesLoaded(function(){
  $container.masonry({
    itemSelector : '.item',
    columnWidth : 210
  });
});
})(); 
```

编辑：任何人都可以让小提琴工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:26:48.280

尝试这个

```
 $(function(){

$('#container').masonry({
  itemSelector: '.box',
   isAnimated: true
}); 
```

});

**[演示](http://jsfiddle.net/aSQAu/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:34:08.760

听起来你想要 CSS 替代砖石：

[http://sickdesigner.com/masonry-css-getting-awesome-with-css3/](http://sickdesigner.com/masonry-css-getting-awesome-with-css3/)

它使用CSS3 **column-count**属性来分割父容器，即设置width:100%；到子容器的宽度是父容器的三分之一，而不是全宽。

示例 CSS：

```
.container {
    -moz-column-count: 3;
    -moz-column-gap: 10px;
    -webkit-column-count: 3;
    -webkit-column-gap: 10px;
    column-count: 3;
    column-gap: 10px;
    width: 900px
}
.container div {
    display: inline-block; /* Display inline-block, and absolutely NO FLOATS! */
    margin-bottom: 20px;
    width: 100%;
} 
```

此演示已将其设置为列表：

[http://sickdesigner.com/demo/css-masonry/css-masonry.html](http://sickdesigner.com/demo/css-masonry/css-masonry.html)

这是基于您的示例的小提琴：http: [//jsfiddle.net/SHZ2G/2/](http://jsfiddle.net/SHZ2G/2/)

仅供参考，您仍然可以使用 masonry 来实现 IE 兼容性，如上述文章中所述

# mesh - 如何获得给定网格的主曲率？

> ID：14234127
> 
> 赞同：2
> 
> 时间：2013-01-09T11:22:15.063
> 
> 标签：mesh, surface

我有一个从给定网格（形状）获取主曲率的问题。

1.  我正在尝试使用 Matlab 文件交换中的“patchcurvature”方法。然而，该方法总是给出正曲率。我认为可能是该方法将网格视为单独的补丁，并计算每个补丁的主曲率。[~,~,Dir1,Dir2,PrincipalCurvature1,PrincipalCurvature1]=patchcurvature(meshFaceVertices);

2.  我还尝试使用 Matlab 文件交换中的另一种方法，称为“surfature”；但是，它计算由表面上的三个二维点阵列定义的“表面”的主曲率。我不知道如何从由顶点和面定义的现有网格创建带有二维点数组的“表面”。有一些方法将表面转换为网格，但不是相反...

任何想法，将不胜感激。非常感谢，新年快乐！！！

最好的，A.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T11:47:58.163

如果我没有错过不同的定义，[主曲率是在可微分表面上定义的，但网格（通常是三角形的集合）是不可微分的。](http://en.wikipedia.org/wiki/Principal_curvature)我可以想象一些可能的方法来近似主曲率。

假设您的网格是通过从可微分表面采样获得的，您需要做的是[多项式回归](http://en.wikipedia.org/wiki/Polynomial_regression)，更具体地说，在您尝试计算曲率的点附近的顶点上进行[二次插值。](https://ccrma.stanford.edu/~jos/sasp/Quadratic_Interpolation_Spectral_Peaks.html)

首先，您需要确定感兴趣点的法线向量。法向量可以通过网格三角形的法线方向（ AB × AC ，三角形的两条边的叉积），并与其他一些法向量进行插值得到。

找到法线向量后，您可以变换网格的坐标，使该点位于原点，法线向量指向 z 轴。（具有沿 z 轴旋转角度 theta 的参数）

然后你的下一个目标是找到一个表面

```
     1 1
z = --- 阿尔法 * x^2 + --- 贝塔 * y^2
     2 2

```

最接近您的一组点，具有三个参数 alpha、beta 和 theta。

那么 alpha 和 beta 是主成分。

我不确定，但已经有一个 matlab 函数可以为你做这个回归。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T18:46:16.440

作为 Iyomis 答案的替代方案，它可能对您的问题不太具体，但在一般情况下可能很有用：您可以计算一个切平面，给定具有法线的网格，在给定点投影相邻顶点的法线（或者更好平面法线和相邻法线之间的插值）到该平面上，然后只对结果点使用主成分分析。

好吧，它不完全是主曲率，但它是一个不错的近似值。我相信 pcl ( [http://pointclouds.org](http://pointclouds.org) ) 库使用类似的东西来实现它们的主曲率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-15T14:16:17.367

为什么不按照定义来做，而是去定义。Z 的含义，其中 z 是 XY 的网格网格，用于描述表面高度。

```
[Fx,Fy] = gradient(Z);

[Fxx,~] = gradient(Fx);

[~,Fyy] = gradient(Fy);

curv_norm=abs(Fxx.*Fyy-Fxy.^2);

normeliztion_size_mat = (1+Fx.^2+Fy.^2).^2;

normelized_size_mat=curv_norm/normelization_size_mat; 
```

# installshield - 在 Installshield 的合并模块中添加自定义操作

> ID：14234129
> 
> 赞同：1
> 
> 时间：2013-01-09T11:22:25.647
> 
> 标签：installshield, installscript

我有一个想要转换为合并模块的 MSI 项目。文件的写入很简单，可以复制。但是，我正在努力复制自定义操作。我需要从合并模块执行自定义操作。

这是我在 MSI 项目中的自定义操作的样子：

![在此处输入图像描述](../Images/87d9be6519508a3471ea0fea2974f019.png)

更新：

我发现了问题。在 MSI 项目中，您创建的目录的名称；如果我创建一个文件夹 FBB Installer Files，则保持不变；在目录下的直接编辑器中，键名将是 FBB_INSTALLER_FILES；但是，如果您在合并模块中执行相同的操作，则密钥将设置为 FBB_INSTALLER_.984DBBFF_9C1E_46C0_9E76_BF6D4CE53321。基本上，合并模块将 GUID 附加到键的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T00:49:44.543

合并模块不会被执行，因为它们没有随安装程序一起提供。它们在构建过程中被消耗并合并到一个 MSI 中。CustomActions 列在 Module*Sequence 表中，其中包含在标准操作之前或之后合并的说明。

否则，您必须考虑更抽象和防弹，因为该模块必须在不止一个产品 MSI 的上下文中工作，实际上并没有什么不同。

# android - 如何创建仅在一个或多个类中运行指定测试的 Android 测试套件？

> ID：14234131
> 
> 赞同：10
> 
> 时间：2013-01-09T11:22:26.237
> 
> 标签：android, eclipse, junit, testcase, test-suite

有人可以阐明如何在 Android 中使用 JUnit 在测试套件中组织测试吗？我发现几乎所有示例都不起作用，我想知道我没有得到什么。

我用一个包含几个测试的 AndroidTestCase 类和一个包含包中所有测试的测试套件做了一个小例子。这有效（显然）：

包含测试的测试用例类：

```
public class ArithmeticsTest extends AndroidTestCase {
    SomeClass sctest;

    protected void setUp () throws Exception {
        sctest = new SomeClass();       
        super.setUp();
    }

    /* Test the SomeClass.addNumbers (int, int) method: */
    public void testAddNumbers () {
        assertEquals(9, sctest.addNumbers(3, 6));
    }

    /* Test the SomeClass.addNumbers (int, int) method: */
    public void testSubtractNumbers () {
        assertEquals(2, sctest.subtractNumbers(6, 4));
    }

    protected void tearDown () throws Exception {
        super.tearDown();
    }
} 
```

测试套件类，包括包中的所有测试：

```
import junit.framework.Test;
import android.test.suitebuilder.TestSuiteBuilder;

public class ProjectTestSuite_AllTests {
    public static Test suite () {
        return new TestSuiteBuilder(ProjectTestSuite_AllTests.class)
            .includeAllPackagesUnderHere()
            .build();
    }
} 
```

如前所述，这有效。但是，如果我有很多测试用例，两个类都有几个测试，而其他类有其他测试（组织不同类型的测试很有意义，imo），那么我想创建包含特定测试的测试套件类等，因此它们可以独占运行。

我见过这方面的例子，但我没有让任何人工作。有没有人有一个很好的例子？也就是说，一个新的测试套件，其中包括来自一个或多个测试用例类的特定测试用例。

更新：

以下两个示例有效：

运行包中的所有测试：

```
public static Test suite () {
    return new TestSuiteBuilder(ProjectTestSuite_AllTests.class)
    .includeAllPackagesUnderHere()
    .build();
} 
```

在特定的测试类（AndroidTestCase 类）中运行所有测试：

```
public static Test suite () {
    Class testClass = ArithmeticsTests.class;
    TestSuite suite = new TestSuite(testClass);

    return suite;
} 
```

但是，这不起作用：

```
public static Test suite () {
    TestSuite suite= new TestSuite();
    suite.addTest(new ArithmeticsTest("testAddNumbers"));
    suite.addTest(new ArithmeticsTest("testSubtractNumbers"));

    return suite;
} 
```

最后一个（非工作）示例来自 developer.android.com。我在尝试这个时得到的错误是：

> 构造函数 ArithmeticsTests(String) 未定义

这很奇怪，因为我不是试图访问构造函数，而是在测试用例类（testAddNumbers）中命名一个特定的测试方法。

## 更新 1 月 11 日：

这是包含几个测试的测试用例类：

```
public class ArithmeticsTests extends AndroidTestCase {
    SomeClass sctest;

    protected void setUp () throws Exception {
        sctest = new SomeClass();
        super.setUp();
    }

    public void testAddNumbers () {
        assertEquals(9, sctest.addNumbers(3, 6));
    }

    public void testSubtractNumbers () {
        assertEquals(2, sctest.subtractNumbers(6, 4));
    }

    protected void tearDown () throws Exception {
        super.tearDown();
    }
} 
```

这是我尝试在其中包含（f.ex.）上述类中的一个测试的测试套件类：

```
public class ProjectTestSuite_SomeTests {

    public static Test suite () {
        // This does not work:
        TestSuite suite= new TestSuite();
        suite.addTest(new ArithmeticsTests("testAddNumbers"));
        return suite;
    }
} 
```

上面的 addTest 行导致此错误：

> 构造函数 ArithmeticsTests(String) 未定义

这是我在此示例中尝试测试的 SomeClass 文件：

```
public class SomeClass {

    int     classInt;
    String  classString;
    Item    item;

    public SomeClass () {}

    public SomeClass (int ci, String cs) {
        this.classInt    = ci;
        this.classString = cs;
    }

    public int addNumbers (int num1, int num2) {
        return num1+num2;
    }

    public int subtractNumbers (int num1, int num2) {
        return num1-num2;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T10:03:45.163

要仅运行测试函数的子集，请使您的*套件*方法如下所示：

```
public static Test suite () {
    final TestSuite suite = new TestSuite();
    suite.addTest(TestSuite.createTest(ArithmeticsTests.class, "testAddNumbers"));
    suite.addTest(TestSuite.createTest(ArithmeticsTests.class, "testSubtractNumbers"));
    // add some more tests here or comment out one of the lines above
    // if you want to skip a particular test
    return suite;
} 
```

*createTest*方法似乎没有很好的文档记录，但它对我 有用：http: [//developer.android.com/reference/junit/framework/TestSuite.html#createTest(java.lang.Class, java.lang。细绳）](http://developer.android.com/reference/junit/framework/TestSuite.html#createTest%28java.lang.Class%3C?%3E,%20java.lang.String%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T11:03:31.733

AFAIK 的问题是 AndroidTestCase 类只有一个构造函数 - AndroidTestCase()

只有 JUnit 的 TestCase 类支持使用字符串指定测试用例，AndroidTestCase() 不支持。这就是你面临这个问题的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-25T12:30:50.583

我找到了一种解决方法来实现你想要的。

看看这个：[Android TestSuite：包括所有的测试用例，除了一些明确定义的](https://stackoverflow.com/questions/6041173/android-testsuite-include-all-testcases-except-some-explicitly-defined/24955657#24955657)

# ruby-on-rails - 通过 ActiveRecord 调用 Postgre SQL 转储

> ID：14234133
> 
> 赞同：1
> 
> 时间：2013-01-09T11:22:35.507
> 
> 标签：ruby-on-rails, ruby, postgresql, rails-activerecord

我有一个想要通过 ActiveRecord 执行的 SQL 转储。我正在尝试这个：

```
ActiveRecord::Base.connection.execute(File.read(sql_seeds)) 
```

但我得到这个错误：

```
rake aborted!
PG::Error: ERROR:  syntax error at or near "1"
LINE 18: 1 Shanghai 2012-12-20 10:31:31.350111 2012-12-20 10:31:31.35... 
```

在 SQL 脚本的这一行：

```
COPY locations (id, description, created_at, updated_at) FROM stdin;
1       Shanghai        2012-12-20 10:31:31.350111      2012-12-20 10:31:31.350111 
```

一些迹象：

*   `ActiveRecord::Base.connection.execute("\\i #{sql_seeds}")`不起作用，因为`\i`是`psql`命令（谢谢@JiříPospíšil 和@RichardHuxton）

*   我不想这样做`%X( psql -U #{user} -H #{host} -P #{pass} ... )`，因为我会使用已经存在的 ActiveRecord 数据库连接。

*   我正在使用 PostgreSQL 9.2 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T12:11:34.587

问题是这`\i`是一个`psql`' 命令，而不是`postgresql`'。您不能直接在查询中使用它。此外，我看不出`execute`在导入有效时该方法会失败的原因。

我认为您将不得不掏空，即使这意味着创建另一个数据库连接。注意不需要`psql`直接组装命令，可以使用`db`命令：

```
rails db < seeds.sql 
```

这样您就可以`config/database.yml`在当前环境中重用连接信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:31:39.787

问题是`COPY FROM stdin`；减少与`pg_dump --inserts`解决问题。

# parsing - sed - 如何从某个字符解析文本并发送到用逗号分隔的输出

> ID：14234136
> 
> 赞同：1
> 
> 时间：2013-01-09T11:22:41.117
> 
> 标签：parsing, text, sed

我有一个文件`test.txt`，内容如下：

```
$ cat test.txt 
IA/N1143 1
IA/N1144 1
IA/N1147 1
IA/N1850 0
IA/N2004 0
IA/M2850 0
IA/M2004 0
IA/NTST 0
$ 
```

我想解析该文件，如下所示`sed`：

```
N1143;1
N1144;1
N1147;1
N1850;0
N2004;0
M2850;0
M2004;0 
```

因此，只有 N* 和 M* 加上状态 0 和 1 的字符将被发送到输出，用分号分隔。

您能否通过演示如何使用或解析该文件`sed`来帮助我？`grep``awk`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:33:35.153

从表面上看，您似乎需要：

```
sed -n '/^IA\/\([NM][0-9][0-9]*\) \([01]\)$/ s//\1;\2/p' test.txt 
```

默认情况下，该`-n`方法不打印行。搜索模式查找匹配（非常精确）`IA/`后跟 N 或 M 和一个或多个数字、一个空格、一个数字 0 或 1 和行尾的行。用 捕获字母和数字字符串`\(...\)`，最后一个数字也是如此；替换遵循用分号而不是逗号分隔字段的示例，如问题中所述；显然，按规定输出逗号但未显示是微不足道的。`p`仅当匹配时才打印该行（尾随）。

除了逗号与分号的问题外，此答案还假定所需的输出是准确的，并且不应出现 NTST 行。但是，问题中的措辞暗示也许 NTST 行也应该出现。如果是这样，您可以通过在 N 或 M 之后允许任意数量的非空白字符来简化正则表达式：

```
sed -n '/^IA\/\([NM][^]*\) \([01]\)$/ s//\1;\2/p' test.txt 
```

从那个问题中不清楚应该发生什么，例如：

```
IA/N 0
IA/N Z 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:33:07.863

```
% sed s/^IA.// < test.txt | sed "s/ /;/"

N1143;1
N1144;1
N1147;1
N1850;0
N2004;0
M2850;0
M2004;0
NTST;0 
```

首先删除出现在开头的 IA。然后用分号替换空格

**请注意**，这也会输出 NTST 行。如果不能打印，请使用 Jonathan 的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T11:46:04.193

如果您愿意，可能可以使用 perl：

```
perl -F -lane 'if(/\/N[\d]+/||/\/M[\d]+/){$F[0]=~s/.*\///g;print join ";",@F}' your_file 
```

测试如下：

```
> cat temp
IA/N1143 1
IA/N1144 1
IA/N1147 1
IA/N1850 0
IA/N2004 0
IA/M2850 0
IA/M2004 0
IA/NTST 0

> perl -F -lane 'if(/\/N[\d]+/||/\/M[\d]+/){$F[0]=~s/.*\///g;print join ";",@F}' temp
N1143;1
N1144;1
N1147;1
N1850;0
N2004;0
M2850;0
M2004;0
> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T12:39:23.643

这会做你说你想要的（“只有 N* 和 M* 加上状态 0 和 1 的字符将被发送到输出，用分号分隔”）：

```
awk -F'[/ ]' -v OFS=';' '$2~/^[MN]/ && $3~/^[01]$/{print $2,$3}' file 
```

这将通过假设以 M 或 N 开头的文本必须后跟一个数字来产生您发布的预期输出：

```
awk -F'[/ ]' -v OFS=';' '$2~/^[MN][[:digit:]]/ && $3~/^[01]$/{print $2,$3}' file 
```

# asp.net - 在第一个 Regex.match 上退出循环并执行其他操作

> ID：14234137
> 
> 赞同：-1
> 
> 时间：2013-01-09T11:22:44.170
> 
> 标签：asp.net, vb.net, vb.net-2010

我正在构建一个包含文本集的 Web 应用程序。

例如。

**玛雅文明 - TextSet1**

由于该地区的高度互动和文化传播，玛雅文明与其他中美洲文明有许多共同特征。文字、碑文和历法等进步并非起源于玛雅人。

**玛雅影响 - TextSet2**

然而，他们的文明充分发展了他们。从洪都拉斯、伯利兹、危地马拉和萨尔瓦多西部到远至墨西哥中部，距玛雅地区 1,000 多公里（620 英里），都可以检测到玛雅人的影响。在玛雅艺术和建筑中发现了许多外部影响，这些影响被认为是贸易和文化交流的结果，而不是直接的外部征服。

**问题**

每个**TextSet**都有一个唯一的索引，因为它们存储在`Gridview`. `GridView`我的代码通过首先存储`TextSet1`字符串中的第一个项目来遍历每个项目或索引。

然后，另一个`For loop`循环遍历该字符串，以`count`确定 word 有多少匹配项`Maya`。

```
For Each item As GridViewRow In Me.GridViewSearchResult.Rows
        Dim txtStr as Label = DirectCast(item.FindControl("TextSet1"), Label) 
        Dim Str = txtStr.Text.toString 

    For i as Integer = 0 to Str.Length - 1

    Dim count As new Integer 
    count = Regex.Matches (Str, "Maya", RegexOptions.IgnoreCase).Count

    Next
 Next 
```

我想要实现的是，在开始时，程序首先处理or `TextSet1`，然后`Str`使用. 在第一次出现in 时，将整个集合存储在数据库中，然后退出或停止循环。这意味着程序不会移动到. 我想在循环外执行检查，然后调用这些值，但是在. 还尝试在循环外进行，但我需要的是在当前循环中第一次出现单词时停止循环。关于如何实现这一目标的任何建议或想法？`count``Maya``Str``Maya``Str``TextSet2``Str``For loop``Regex.match``maya``Str`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:45:31.590

实现了一个`For`类似于第一个循环的新循环，并有一个`while`循环检查 if `count`is not `nothing`，然后 if `true` `Insert to database`，然后退出`For loop`using `Exit For`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-09T12:08:15.457

从你给出的例子和你对问题的描述来看，我建议你的问题很多。我建议您最好的选择是找到一个可以坐在您旁边并与您交谈而不是在这里提问的优秀软件开发人员。

然而，在 Visual Basic 中退出 for 循环的关键字是“Exit For”，但这只会跳出最内层的循环。打破所有嵌套循环需要一些更复杂的东西。

这个问题应该给你一些指示：[Breaking/exit nested for in vb.net](https://stackoverflow.com/questions/5312291/breaking-exit-nested-for-in-vb-net)

对代码示例的一些评论：

```
For Each item As GridViewRow In Me.GridViewSearchResult.Rows ' Ok
    Dim txtStr as Label = DirectCast(item.FindControl("TextSet1"), Label) ' Ok

    Dim Str = txtStr.Text.toString ' it would be better to declare the type of Str and leave out the .toString. Dim Str as String = txtStr.Text    

    For i as Integer = 0 to Str.Length - 1 ' For every character in the string, why?   
                                           ' Note where is i used within the loop?

    Dim count As new Integer ' Declared afresh for every itteration of the 
                             ' loop and then not used. Probably not what is wanted.

    count = Regex.Matches (Str, "Maya", RegexOptions.IgnoreCase).Count ' Seems ok, but why repeat multiple times?

    ' Neither count nor i have been used.
    Next
 Next 
```

建议的解决方案：

```
For Each item As GridViewRow In Me.GridViewSearchResult.Rows
    Dim txtStr as Label = DirectCast(item.FindControl("TextSet1"), Label)
    Dim Str as String = txtStr.Text    
    Dim count As new Integer = Regex.Matches(Str, "Maya", RegexOptions.IgnoreCase).Count
    If count > 0 then 
       Call StoreInDb(count, str)
       Exit For
    End If
 Next 
```

# jquery - 带有 on() 方法的两个选择器的 jQuery 绑定事件

> ID：14234144
> 
> 赞同：3
> 
> 时间：2013-01-09T11:23:04.643
> 
> 标签：jquery

我使用以下方法绑定`click`事件`on()`：

```
$('#container').on('click', '.selectorA', function(e){
  e.preventDefault();
  return false;
}); 
```

它运行良好，但是我想将此单击事件绑定到两个选择器：

```
$('#container').on('click', ['.selectorA', '.selectorB'], function(e){
  e.preventDefault();
  return false;
}); 
```

什么不起作用。没有第二次电话我怎么能做到这一点`on()`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T11:23:47.553

使用逗号分隔符

```
$('#container').on('click', '.selectorA, .selectorB', function(e){ 
```

有趣的是，对于不需要逗号的*事件：*

```
$('#container').on('click mouseenter mouseleave', '.a, .b, .c', function(e){ 
```

# blackberry - 我需要通过阅读 BlackBerry Server Logs 找到设备 CLI

> ID：14234154
> 
> 赞同：0
> 
> 时间：2013-01-09T11:23:37.693
> 
> 标签：blackberry

我正在开发一个基于网络的移动数据管理系统。我需要存储在 BES（BlackBerry Enterprise 服务器）中注册的所有设备的 CLI。我必须使用的唯一方法是阅读 BES 日志。有没有办法让设备的 CLI 读取 BES 日志？

# java - Runtime.totalMemory() 从 64 位 jvm 中配置的 -Xmx 值给我一个错误的值

> ID：14234158
> 
> 赞同：1
> 
> 时间：2013-01-09T11:23:48.840
> 
> 标签：java, jakarta-ee

配置的 -Xmx 为 2037m (-Xmx2037)，当从
Runtime.totalMemory() 获取总内存时，它给出了 136mb，我怎样才能获得精确配置的 xml 值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:25:24.650

使用`Runtime.maxMemory`，`Runtime.totalMemory`返回当前堆大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T11:26:57.617

`totalMemory`报告当前堆大小，该大小仅根据需要向`Xmx`限制增长。`maxMemory`报告最大堆大小。

# mysql - 选择一列作为另一表上的多列

> ID：14234161
> 
> 赞同：2
> 
> 时间：2013-01-09T11:23:51.077
> 
> 标签：mysql, sql, select, join

我要开始使用mysql 5.1 社区版了。

首先我有...

## master_product_table

```
ID 产品_代码 产品_名称 产品_详情
==================================================== ====================
1 000001 原材料 1 000001- 原材料 1
2 000002 原材料 2 000002- 原材料 2
3 000003 原材料 3 000003- 原材料 3
4 000004 原材料 4 000004- 原材料 4

```

`ID`字段在哪里`PK`

## 和 master_document

```
Doc_no Doc_date Doc_type Item_code1 Item_qty1 Item_price1 Item_code2 Item_qty2 Item_price2
==================================================== ==================================================== ======================
000001 01-01-2013 公元前。2.3 1 200 美元 150 3 500 美元 800 美元
000002 02-01-2013 公元前。2.7 2 1500 $ 800 4 6000 $2500
000003 03-01-2013 BC。3.0 3 5000 $1500 1 12000 $8500
000004 04-01-2013 公元前。4.0 4 12000 $5000 2 750 $3000

```

`Doc_no`字段在哪里`PK`

我想得到的是这样的......

```
Doc_no Doc_date Doc_type Item_details1 Item_qty1 Item_price1 Item_details2 Item_qty2 Item_price2
==================================================== ==================================================== ==================================================== ==
000001 01-01-2013 公元前。2.3 000001- 原材料 1 200 $ 150 000003- 原材料 3 500 $800
000002 02-01-2013 公元前。2.7 000002- 原材料 2 1500 $ 800 000004- 原材料 4 6000 $2500
000003 03-01-2013 BC。3.0 000003- 原材料 3 5000 $1500 000001- 原材料 1 12000 $8500
000004 04-01-2013 公元前。4.0 000004- 原材料 4 12000 $5000 000002- 原材料 2 750 $3000

```

任何有关如何执行此操作的帮助都会有所帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:34:56.027

第一次尝试**SQL FIDDLE**

花了大约**30分钟**

试试下面的[SQL Fiddle](http://sqlfiddle.com/#!2/dbeef/6)

```
SELECT md.Doc_no, md.Doc_date, md.Doc_type, 
       pd1.Product_Details Item_details1, md.Item_qty1, md.Item_price1, 
       pd2.Product_Details Item_details2, md.Item_qty2, md.Item_price2 
FROM master_document md 
INNER JOIN master_product_table pd1 ON md.Item_code1 = pd1.ID 
INNER JOIN master_product_table pd2 ON md.Item_code2 = pd2.ID
order by md.Doc_no 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:58:17.340

尝试这个：

```
SELECT md.Doc_no, md.Doc_date, md.Doc_type, 
       mp1.Product_Details Item_details1, md.Item_qty1, md.Item_price1, 
       mp2.Product_Details Item_details2, md.Item_qty2, md.Item_price2 
FROM master_document md 
INNER JOIN master_product_table mp1 ON md.Item_code1 = mp1.ID 
INNER JOIN master_product_table mp2 ON md.Item_code2 = mp2.ID ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T11:39:57.290

这是关于 SQL 的一个非常基本的问题。现在给你一个直接的解决方案，将来肯定对你没有帮助。

尝试获取一个较小的示例并开始学习如何使用“SELECT x FROM y WHERE x = w”以及“SELECT x as z FROM y”（这会将列 x 重命名为 z）

然后，如果您还有其他问题，请在此处添加。

玩得开心 ;）

# templates - 变量 = erb 中的 a 或 b

> ID：14234162
> 
> 赞同：0
> 
> 时间：2013-01-09T11:23:52.483
> 
> 标签：templates, erb, puppet

我想执行这个简单的测试：

如果变量包含字符串“abc”或“cba”执行task1，否则执行任务b 这是我尝试过的，但不起作用：

```
<% if animal == "Meuh" || "Moooo" %>
This is a cow !
<% else %>
This is not a cow !
<% end %> 
```

但这不起作用。

请问有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:26:16.057

ERB 使用与 Ruby（和大多数语言）相同的语法：

```
<% if animal == "Meuh" || animal == "Moooo" %> 
```

或者（特别是有很多替代品）您可以使用[`Array#include?`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-include-3F)：

```
<% if ['Meuh', 'Moooo'].include?(animal) %> 
```

# junit - 如何表明我不希望 JUnit 中出现异常？

> ID：14234167
> 
> 赞同：0
> 
> 时间：2013-01-09T11:24:19.800
> 
> 标签：junit, expected-exception

在谷歌测试中，我们有一个

```
EXPECT_NO_THROW(x.foo()); 
```

我怎样才能在 JUnit 中做到这一点？我要避免的事情是必须编写一个`try/catch`块，并指定我的测试函数可以做`throw`任何事情。Java强迫我`throws`用测试函数声明一个子句......

是否可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T11:29:06.793

你不需要。如果您的方法抛出异常，则测试将失败，这正是您想要的。

在这种情况下，让您的测试声明抛出异常是可以接受的：

```
@Test public void testMe() throws Exception {
  x.foo();
} 
```

这意味着（对我而言）您不会期待任何例外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:34:59.440

在 Junit 4 中，我们可以使用如下语法来避免 try catch 块。

```
@Test (expected=ExceptionClassName.class)
public void yourTestCase(){
      //testing codes
} 
```

在这里你期待 ExceptionClassName 异常或

如果您总是期待异常，任何类型的都可以将其用作

```
@Test (expected=Exception.class)
public void yourTestCase(){
      //testing codes
} 
```

# mysql - MySQL - 插入数据并从表中选择

> ID：14234174
> 
> 赞同：1
> 
> 时间：2013-01-09T11:24:57.710
> 
> 标签：mysql

我目前正在使用 MySQL 手动将数据插入到我的数据库中以用于学习目的，并且我偶然发现了其中一部分的轻微混淆，我认为我在阅读此处的主题后破解了它，但是它没有插入任何内容，但没有也不要报错。

这是我输入的代码，它不返回错误但也不执行任何操作：

```
INSERT INTO Deliveries (O_ID,ShipDate,ArrDate,Del_Comp)
SELECT O_ID,'2012-10-21','2012-11-02','City Link'
FROM Orders
WHERE O_ID=1; 
```

我基本上想要做的是从`Orders`表中选择一个 ID（如果可能，最好是通配符），然后在将其添加到`Deliveries`表之前在同一行中添加自定义信息。所以很明显，我的第一行是 SELECT 行上的所有信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:35:43.840

错误的部分是`SELECT O_ID,'2012-10-21','2012-11-02','City Link'`使用值的 INSERT 和使用 SELECT 子查询的 INSERT 的组合。

您想为 SELECT 指定列名，而不是实际值。

# python - 运行 dpkg 安装程序在 wxpython 中安装 deb

> ID：14234180
> 
> 赞同：1
> 
> 时间：2013-01-09T11:25:13.953
> 
> 标签：python, wxpython, wxwidgets

我想为 deb 安装做一个自动安装程序。我们手动使用：

```
dpkg -i --force-overwrite xxx.tar . 
```

但是如何在 wxpython 中做到这一点？我已经准备好 GUI，只需单击一下按钮，它就必须运行
该命令。有什么建议么？除此之外，我不知道如何将依赖文件保存在其他目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:59:04.463

您可以从 python 中脱壳来执行任意 shell 命令。请参阅[子流程](http://docs.python.org/2/library/subprocess.html)。但是你需要运行你的程序的用户有足够的 sudo 权限来安装这个包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T08:50:01.633

我使用了 Subprocess.call().. 它对我来说效果很好。

# c++ - MFC ComboBox DrawItem 问题

> ID：14234188
> 
> 赞同：0
> 
> 时间：2013-01-09T11:25:48.067
> 
> 标签：c++, mfc, ondrawitem

我正在编写一个 DrawItem 覆盖方法来修改应用程序，因此 ComboBox DropDowns 中的文本都使用 pDC->DrawText 函数将 DT_SINGLELINE|DT_VCENTER 解析为最终参数居中。我目前遇到的问题是我可以在 DropDown 中重复第一个值，但我想要在 DropDown 中显示的所有值的列表。

我不确定这里是否存在与应用程序中的其他控件一样的基本缺陷，例如在调用 DrawItem 覆盖时似乎填充了 ListCtr lpDrawItemStruct->itemData。但是对于 ComboBox lpDrawItemStruct->itemData 的情况，它显示为空。

请问有人可以帮忙吗？以下是到目前为止的代码。

```
void CFCDropDown::DrawItem(LPDRAWITEMSTRUCT lpDrawItemStruct)
{
CDC* pDC = CDC::FromHandle(lpDrawItemStruct->hDC) ;
int nSavedDC = pDC->SaveDC();

//I can't use the following because at this stage lpDrawItemStruct->itemData doesn't contain anything   
//LPCTSTR lpszText = (LPCTSTR)lpDrawItemStruct->itemData ;

//I do however have access to a member variable that contains the list of items I want in the drop down
//m_strListEntry contains a CString of format "ONE;TWO;THREE;FOUR;FIVE;SIX"
CString strFieldValue = m_strListEntry ;

int noOfItems  = GetCount();
CString item;

int iStartPos = 0;
int iFirstDelimiter = 0;
iFirstDelimiter = m_strListEntry.Find(LISTDELIMITER,iStartPos);

int i = iFirstDelimiter + 1;

int iStrLen = strFieldValue.GetLength();
int iNewLen = iStrLen - ++iFirstDelimiter;

item = strFieldValue.Left(i -1) ;

LPCTSTR lpszText = (LPCTSTR)item ;

//At the moment I'm getting "ONE" repeated 6 times. I want a list of all the values displayed in the DropDown. 
pDC->DrawText(lpszText, strlen(lpszText), &lpDrawItemStruct->rcItem, DT_SINGLELINE|DT_VCENTER) ;

pDC->RestoreDC( nSavedDC ); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T03:38:05.767

看起来您不使用`lpDrawItemStruct->itemID`但总是从`m_strListEntry`. `lpDrawItemStruct->itemID`包含当前正在绘制的项目。

附带说明一下，我建议`CString m_strListEntry`用`CStringArray m_arrListEntry`. 在这种情况下，提取项目将只是一行代码：

```
CString item = m_arrListEntry[lpDrawItemStruct->itemID]; 
```

# .net - EF5 实体 Sql 数据库集

> ID：14234189
> 
> 赞同：0
> 
> 时间：2013-01-09T11:25:52.323
> 
> 标签：.net, entity-framework, visual-studio-2012

我正在使用以下方法

```
public static ObjectQuery<T> ObjectQueryListQuery<T>(ObjectContext context, string sql)
    {
        var context1 = new NorthwindEntities1();
       // sql =;
        var x = (IObjectContextAdapter) context1;
       // x.ObjectContext.CreateQuery<>()
        ObjectQuery<T> t1;
        t1 = new ObjectQuery<T>(sql, x.ObjectContext);
     //   var customersQuery = t1.ToList();
        var vvv = t1.ToList();
         string[] columns = new string[2];
         columns[0] = "ProductName";
         columns[1] = "ProductID";

         foreach (var t1itm in t1)
        {

            foreach (var column in columns)
            {
                var tp = t1itm.GetType();

                var px = tp.GetProperty(column);
                  var val =  px.GetValue(t1itm, null);
                Console.WriteLine(val);
                Console.ReadKey();
            }

        }

        return t1; 
```

我正在调用这个函数

```
var tq=   ObjectQueryListQuery<Product>(p.ObjectContext,  "SELECT VALUE p FROM NorthwindEntities1.Products AS p "); 
```

有没有办法删除一些通用的东西，比如`<Dbset>`. 我们曾经在 EF5 中执行此 EF4，但我无法做到这一点

# domain-driven-design - 在 DDD 中放置实体类和实用程序类的位置

> ID：14234193
> 
> 赞同：3
> 
> 时间：2013-01-09T11:26:08.427
> 
> 标签：domain-driven-design

我是 DDD 的新手，想澄清一些疑问。任何帮助表示赞赏。

1.  在 DDD 模型中，程序集引用层次结构自上而下，这意味着模型可以引用基础设施，而不应该反过来。现在，如果我们在模型组件中声明所有类，那么在这种情况下，基础设施类将不得不引用模型组件来获取数据访问层 (DAL) 中具体存储库实现的类信息。此外，模型组件必须引用基础设施组件才能访问 DAL 层。我对此感到困惑！正确的方法应该是什么？

2.  我们是否应该在模型层或基础设施 DAL 层中拥有 Repository 和 UnitOfWork 接口，就像在模型层中拥有接口但在基础设施层中拥有实际的 DAL 实现一样？

3.  如果我们需要其他包含一些通用实用程序函数或类的程序集（如自定义 CommandMessage 类等在企业服务总线架构中进行通信），我们将所有这些东西放在哪里，应该是什么首选命名空间（例如`CompanyName.Model.Common`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:36:27.987

1.  模型组装不应指基础设施组装。反之亦然。模型组件只是声明了所需的接口。您应该从 Infrastructure Assembly 引用您的模型程序集。并实现这些接口。模型需要的接口实现可能有许多不同的程序集。稍后您通过依赖注入提供接口实现。
2.  如上所述，存储库和工作单元应在模型组件中声明。
3.  在企业服务总线架构中进行通信在我看来就像基础设施任务。我认为这不是模型的一部分。

# r - X 比例值在 R 图上非常紧凑，带有格子

> ID：14234197
> 
> 赞同：-1
> 
> 时间：2013-01-09T11:26:19.347
> 
> 标签：r, lattice

我正在使用此代码生成绘图：

```
require(lattice)

allcol <- c("blue","chocolate4","cornflowerblue","chartreuse4","brown3","darkorange3","darkorchid3","red","deeppink4","lightsalmon3","yellow","mistyrose4","seagreen3","green","violet","palegreen4","grey","slateblue3","tomato2","darkgoldenrod2","chartreuse","orange","black","yellowgreen","slategray3","navy","firebrick1","darkslategray3","bisque3","goldenrod4","antiquewhite2","coral","blue4","cyan4","darkred","orangered","purple4","royalblue4","salmon")
names(logfile2d) <- c("Date","Client","Operations")
logfile2d <- read.table(file="/var/lib/nfs-estadoclientes/nfsclients-2d.log")
logfile=logfile2d
col=allcol[0:length(levels(logfile$Client))]

svg(filename="/var/lib/nfs-estadoclientes/nfsclients-2d.svg",width=14,height=7)

xyplot(Operations~Date,group=Client,data=logfile,jitter.x=T,jitter.y=T,
 aspect = 0.5, type = "l",
 par.settings=list(superpose.line=list(col=col,lwd=3)),
 xlab="Time", ylab="Operations", main="NFS Operations (last 2 days, only clients with >40 operations/sec)",
 key=list( text=list(levels(logfile$Client)), space='right',
           lines=list(col=col),columns=1,lwd=3,cex=0.75))

dev.off() 
```

但是生成的绘图会打印很多 X 比例值，并且无法读取。X 刻度值是日期和小时，格式为：“mounth/day hour:minute”。似乎 R 没有将这些值作为数字来获取，而是尝试将它们全部写下来。

```
> dput(head(logfile$Date))
structure(c(1L, 1L, 1L, 1L, 1L, 1L), .Label = c("01/09-06:43", 
"01/09-06:53", "01/09-07:03", "01/09-07:13", "01/09-07:23", "01/09-07:33", 
"01/09-07:43", "01/09-07:53", "01/09-08:03", "01/09-08:13", "01/09-08:23", 
"01/09-08:33", "01/09-08:43", "01/09-08:53", "01/09-09:03", "01/09-09:13", 
"01/09-09:23", "01/09-09:33", "01/09-09:43", "01/09-09:53", "01/09-10:03", 
"01/09-10:13", "01/09-10:23", "01/09-10:33", "01/09-10:43", "01/09-10:53", 
"01/09-11:03", "01/09-11:13", "01/09-11:23", "01/09-11:33", "01/09-11:43", 
"01/09-11:53", "01/09-12:03", "01/09-12:13", "01/09-12:23", "01/09-12:33", 
"01/09-12:43", "01/09-12:53", "01/09-13:03", "01/09-13:13", "01/09-13:23", 
"01/09-13:33", "01/09-13:43", "01/09-13:53", "01/09-14:03", "01/09-14:13", 
"01/09-14:24", "01/09-14:33", "01/09-14:43"), class = "factor") 
```

也许最好的策略是省略中间值，但我不知道如何。我不知道如何让 R 意识到这些也不是数值。

![生成图的屏幕截图](../Images/a5fc4331bd1b46938b2542ef3b64fb0e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:54:03.243

您实际上需要`strptime`并且`as.POSIXct`因为您拥有日期和时间信息。这应该将您的`Date`列转换为 R 将正确绘制的实际日期/时间变量。运行这些后再次尝试您的绘图命令。

```
times <- as.POSIXct(strptime(levels(logfile$Date), format="%m/%d-%H:%M"))
logfile$Date <- times[logfile$Date] 
```

# mysql - MYSQL - 分组

> ID：14234199
> 
> 赞同：1
> 
> 时间：2013-01-09T11:26:29.530
> 
> 标签：mysql

给定以下 mysql 结果集：

```
 id      code       name               importance
'1234', 'ID-CS-B', 'Chocolate Sauce', '1',
'1122', 'ID-MC-A', 'Mint Choc Chip',  '5',
'5621', 'ID-MC-B', 'Mint Choc Chip',  '4',
'1221', 'ID-CS-A', 'Chocolate Sauce', '2',
'1212', 'ID-CS-C', 'Chocolate Sauce', '3', 
```

这里有两种产品：巧克力酱和薄荷巧克力片。我想根据重要性从每个产品中提取一个实例。

我想要最重要的 Mint Choc Chip 产品和最重要的巧克力酱产品，使用“重要性”列：值越高越重要

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T11:30:10.353

```
 SELECT x.*
      FROM my_table x
      JOIN 
         ( SELECT name, MAX(importance) max_importance FROM my_table GROUP BY name ) y
        ON y.name = x.name
       AND y.max_importance = x.importance; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:46:08.220

也试试这个，

```
select b.name, max(a.importance)
from t b
left join t a
on b.id = a.id
group by b.name
; 
```

结果：

```
NAME                MAX(A.IMPORTANCE)
Chocolate Sauce     3
Mint Choc Chip      5 
```

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/1644d/1)

# mysql - 创建mysql数据库。无法登录

> ID：14234201
> 
> 赞同：-1
> 
> 时间：2013-01-09T11:26:33.233
> 
> 标签：mysql, database-create

好吧，我觉得很荒谬，因为我以前做过，但现在我不记得怎么做了。

我需要创建一个新的 mysql 数据库。但是我如何登录才能做到这一点？我很确定我有一个 root 用户，或者没有密码，或者我可能记得的密码。

我尝试：

```
>mysql -u root -p 
```

然后我输入我的密码。我也试过没有密码（不确定我是否设置过密码）。我得到的信息是：

```
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES) 
```

也许我只需要重置我的密码，但这会带回一些模糊的记忆，关于我需要做一些其他的小技巧。那问题不在于密码错误。有任何想法吗？

编辑：mysql 服务器正在运行。我能够对预先存在的数据库执行查询。（我更改了错误消息以反映现在发生的情况）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:32:56.277

如果您提供的密码错误，您会看到类似以下内容的内容

`ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES)`

您看到的错误表明 MySQL 服务器实际上并未运行。如果您在 OSX 上，并且您已经安装了 PrefPane，请在系统偏好设置中检查 MySQL 是否已启动。如果您像 tsabz 建议的那样使用 Unix 风格，请检查 mysql 守护程序是否正在运行。如果没有，类似的东西`sudo /etc/init.d/mysql start`应该解决你。

编辑：您的编辑表明您肯定使用了错误的密码。如果您没有设置 root 密码，只需使用`mysql -u root`这意味着您没有提供密码。如果您不记得您的 root 密码并需要重置它，请查看此链接，第 C.5.4.1.1 部分。[http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html](http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:37:44.660

我认为你有一些安装问题或者你没有安装服务器：

如果您使用的是 debian，请尝试使用以下命令重新安装：

```
 sudo apt-get install mysql-server mysql-client 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T11:40:13.060

您可能正在 Windows 系统上运行 MySQL 服务器。根据 MSDN (http://msdn.microsoft.com/en-us/library/windows/desktop/ms740668%28v=vs.85%29.aspx) 系统错误 10061 它是一个 TCP 错误 (WSAECONNREFUSED)含义：“无法建立连接，因为目标机器主动拒绝了它”。

这意味着您的 MySQL 服务器没有运行。尝试从 Windows 系统控制面板启动名为“MySQL Server”的系统进程。

# c - 从文件中获取特定客户下的最新订单

> ID：14234202
> 
> 赞同：0
> 
> 时间：2013-01-09T11:26:32.123
> 
> 标签：c

基本上，我正在尝试开发一个客户订单系统。我编写了一个方法，系统可以获取特定客户的最新订单。要求用户输入客户ID号以获得相应的订单。此功能无法正常工作，因为它收到的是第一个订单，而不是最后一个订单。我在我的方法中使用了 fseek，但它仍然无法正常工作。

```
void ViewLatestOrder()
{
    order o;
    char Customerid[10];

    ofp=fopen("orders.dat","rb");

    printf("\nEnter the Customer ID: \n");
    scanf("%s",&Customerid);

    rewind(ofp);
    fseek(ofp, -sizeof(order), SEEK_END);

    while(fread(&o,sizeof(o),1,ofp)==1 && !feof(ofp))
    {
        if(strcmp(Customerid,o.CustomerID)== 0)
        {

            printf("\n========================================================\n\n");
            printf("\t\t Order Details of %s\n\n",o.CustomerID);
            printf("========================================================\n\n");

            printf("Product Name: %s\n",o.ProductName);
            printf("Product Quantities: %d\n",o.ProductQuantities);
            printf("Total Order Price: %.2f\n",o.TotalOrderPrice);

            printf("========================================================\n\n");
        }
        else
        {
            fseek(ofp, -2*sizeof(order), SEEK_CUR);
        }
    }

    OrdersSubMenu();
    fclose(ofp);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:51:31.993

首先，如文档所述，在同一个**FILE*上使用****feof()**和**fseek()**似乎不正确：

 **> [...] 成功调用 fseek() 函数会清除流的文件结束指示符，并撤消 ungetc(3) 函数对同一流的任何影响。[...]

其次，您应该检查您是否只是通过以下方式使用了文件中的第一个条目：

```
[...]
else
        {
            if(fseek(ofp, -2*sizeof(order), SEEK_CUR) == sizeof(order))
                break; // End the while if we rode ALL the records
        }
[...] 
```

无论如何，我真的无法发现为什么在世界上，正如你所说的那样，打印第一个而不是最后一个条目......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:55:06.793

您的代码是正确的，您只是未能在第一次成功找到时跳出 while 循环。然后它还会继续查找并打印所有以前的订单。

```
if(strcmp(Customerid,o.CustomerID)== 0)
{
  ... // printing
  break; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T12:22:32.107

**第 1 点：**

```
scanf("%s",&Customerid); 
```

在上面的声明中，`%s`is expecting`char *`但是你传递了`char *`手段的地址`char **`，所以你的声明应该是..

```
scanf("%s", Customerid); 
```

**第 2 点：**

使用`feof`before `fread`， after `fread`，`feof`将返回`1`你的情况，所以声明应该是..

```
while(!feof(ofp) && fread(&o,sizeof(o),1,ofp)==1) 
```

**第 3 点：**

正如@acraig5075 提到的那样使用`Break;`内部块..`if`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T11:31:41.380

```
scanf("%s",&Customerid); 
```

如果`CustomerId`是`int` `%s`期望`char *`**

# opengl - 在 Codeblocks (Ubuntu 12.04) 中设置 GLUT 项目

> ID：14234205
> 
> 赞同：5
> 
> 时间：2013-01-09T11:26:49.593
> 
> 标签：opengl, ubuntu, glut, codeblocks

我通过 apt-get 安装了 freeglut3 和 freeglut3-dev。我想在 Codeblocks 中创建一个 OPENGL GLUT 项目。我被问到 GLUT 的位置，我输入了“/usr”，正如我在教程中找到的那样。但我收到错误消息：

“您输入的路径似乎有效，但此向导无法找到以下 GLUT 的库文件：其中 glut。”

我是否设置了正确的位置？建立这样一个过剩项目的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:46:04.997

我也面临同样的问题。但是我解决了这个问题而没有创建项目并运行 GLUT 程序。为此，请转到编译器和调试器设置，并在链接器选项卡和链接库 libGL.so、libGLU.so、libglut.so 中按添加按钮形成目录 usr/lib。现在您可以包含 glut.h 标头并运行该项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-06T05:28:30.450

我假设您已经安装了 glut。

打开代码块并选择 Opengl 项目。在里面去设置->编译器->链接器设置->链接库分别添加glut GL和GLU。

您的代码应该运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-03T20:57:54.847

GLEW，GL，GLU，过剩

安装后将它们一一添加到项目的链接库中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-03T07:51:16.617

`/usr/local`如果您使用默认参数执行`./configure` 和安装，您应该尝试定位

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-05T09:18:39.633

我面临着同样的问题。做两件事解决了我的问题。

1.  我将`GL`, `GLU`,`glut`一一添加到我的项目的链接库中。（当我尝试添加`GLEW`时，它显示错误。我没有添加`GLEW`，它没有引起任何问题。）

2.  我使用该行`#include <GL/glut.h>`来包含头文件`glut.h`。`#include <GLUT/glut.h>`或者`#include <glut.h>`向我显示找不到头文件的致命错误。

# twitter - Twitter 提要图标颜色更改

> ID：14234207
> 
> 赞同：1
> 
> 时间：2013-01-09T11:27:03.873
> 
> 标签：twitter, twitter-bootstrap, widget, feed

嗨，我在使用白色背景的地方使用此提要代码。我想将 twitter 小鸟图标更改为蓝色。有人有什么建议吗？

```
<script src="http://widgets.twimg.com/j/2/widget.js"></script>

<script>

new TWTR.Widget({
  version: 2,
  type: 'profile',
  rpp: 4,
  interval: 3000,
  width: 'auto',
  height: 150,
  theme: {
    shell: {
      background: '#FFFFFF',
      color: '#979797'
    },
    tweets: {
      background: '#ffffff',
      color: '#626262',
      links: '#00B79F'
    }
  },
  features: {
    scrollbar: false,
    loop: true,
    live: true,
    hashtags: true,
    timestamp: true,
    avatars: true,
    behavior: 'default'
  }
}).render().setUser('Soumya123').start();
</script> 
```

这是显示图标需要更改的图像 ![在此处输入图像描述](../Images/e116e235a31a15982a9e62f58a53b17b.png)

# python - 为 raven-python（哨兵客户端）添加一个钩子到 Gunicorn

> ID：14234208
> 
> 赞同：4
> 
> 时间：2013-01-09T11:27:08.517
> 
> 标签：python, gunicorn, sentry, raven

我想知道我会把它放在我的代码或 gunicorn 的哪里，以便让乌鸦运行。[http://raven.readthedocs.org/en/latest/config/django.html#gunicorn](http://raven.readthedocs.org/en/latest/config/django.html#gunicorn)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T14:12:06.503

有点晚了，但无论如何:)

您需要将其添加到您的 Gunicorn 配置文件中。例如，当您启动时，`gunicorn_django`您可以向它传递一个`-c`( `--config`) 参数，该参数采用 python 文件的路径。

Gunicorn 将使用此文件加载未作为参数传递的配置设置，如工作人员和日志路径等。但您也可以包含 gunicorn 将在进程生命周期的某些点调用的函数。根据 Raven 文档，这是放置 raven 设置的地方。

例如：

```
$ gunicorn_django -c /path/to/gunicorn_settings.py 
```

该文件可能包含以下内容：

```
workers = 2
bind = 'unix:/tmp/my_project_name.sock'  # Binds to a unix socket rather than ip/port
errorlog = '/path/to/logs/gunicorn.error.log'

def when_ready(server):
    from django.core.management import call_command
    call_command('validate') 
```

小心确保您`DJANGO_SETTINGS_MODULE`的导出正确，否则`call_command('validate')`会抛出 a`SystemExit`并且您的进程将无法启动。

您可以在以下位置阅读更多关于 Gunicorn 配置文件的信息：[http ://docs.gunicorn.org/en/latest/configure.html](http://docs.gunicorn.org/en/latest/configure.html)

# php - PHP crypt函数和算法

> ID：14234211
> 
> 赞同：0
> 
> 时间：2013-01-09T11:27:14.590
> 
> 标签：php, algorithm, encryption, crypt

我正在使用`crypt()`函数，但我不知道我的实现是否正确。如果我写这样的东西，我正在使用什么样的算法：

```
crypt('PE','12345') 
```

我阅读了文档，但我不知道选择了哪种算法与`12345`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:32:02.920

这取决于底层系统。我建议你改用**[hash()](http://php.net/manual/en/function.hash.php)**。例如。

```
$algos = hash_algos();
if (in_array("sha256", $algos)) {
    $str = hash ("sha256", "something" . "salt");
} 
```

这样，您可以始终使用一种散列算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:35:05.877

如文档所述，取决于系统。

要确定您的系统支持什么，您可以检查 PHP 定义的常量的值。常量 CRYPT_SALT_LENGTH 将显示盐字符串的预期长度。DES 接受两个字符的盐。MD5 接受 12 个字符。您还可以检查是否设置了以下任何标志：CRYPT_STD_DES、CRYPT_EXT_DES、CRYPT_MD5、CRYPT_BLOWFISH。为此，请发出如下命令：echo CRYPT_MD5

数字 1 表示支持；0 表示不是。

考虑在此处阅读详细信息[http://www.techrepublic.com/article/the-perils-of-using-php-crypt/1058691](http://www.techrepublic.com/article/the-perils-of-using-php-crypt/1058691)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T11:11:44.940

`crypt()`**如果系统上可用，将使用基于标准Unix DES 的算法**返回散列字符串，如果不可用，则返回**基于 MD5 的算法**。您可以从以下列表中设置要使用的算法类型：

1.  CRYPT_STD_DES 。
2.  CRYPT_EXT_DES 。
3.  CRYPT_MD5。
4.  CRYPT_BLOWFISH。
5.  CRYPT_SHA256。
6.  CRYPT_SHA512。

这个列表可以这样使用：

```
//setting the value to 1 means enable this algorithm 
//which will return true or false.
if (CRYPT_STD_DES == 1) {
    echo 'Standard DES: ' . crypt('rasmuslerdorf', 'rl') . "\n";
}

if (CRYPT_EXT_DES == 1) {
    echo 'Extended DES: ' . crypt('rasmuslerdorf', '_J9..rasm') . "\n";
}

if (CRYPT_MD5 == 1) {
    echo 'MD5:          ' . crypt('rasmuslerdorf', '$1$rasmusle$') . "\n";
}

if (CRYPT_BLOWFISH == 1) {
    echo 'Blowfish:     ' . crypt('rasmuslerdorf', '$2a$07$usesomesillystringforsalt$') . "\n";
}

if (CRYPT_SHA256 == 1) { 
    echo 'SHA-256:      ' . crypt('rasmuslerdorf', '$5$rounds=5000$usesomesillystringforsalt$') . "\n";
}

if (CRYPT_SHA512 == 1) {
    echo 'SHA-512:      ' . crypt('rasmuslerdorf', '$6$rounds=5000$usesomesillystringforsalt$') . "\n";
} 
```

这意味着如果您不想使用系统默认值，则必须在使用之前选择要使用的算法类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T11:29:38.790

> crypt() 将使用基于标准 Unix DES 的算法或系统上可能可用的替代算法返回一个散列字符串。

来自 PHP 文档

# node.js - 在 fetch() 调用后通过 req.body 访问模型数据

> ID：14234213
> 
> 赞同：0
> 
> 时间：2013-01-09T11:27:22.467
> 
> 标签：node.js, backbone.js, express

我想知道我是否做错了什么，或者我无法通过`req.body.username`在 fetch() 调用之后调用（例如）访问服务器端的模型属性（使用 express）是正常的：

```
app.get("/test", function(req, res){
  console.log(req.body.username); //Undefined
}); 
```

但是我可以通过 PUT 请求以相同的方式访问它。

实际上，我使用 url 发送用户名，但我想清理我的路由并`req.body`改为访问属性，（当然是在客户端的模型中设置它之后）。

感谢您的解释 ！

更新：

以防万一，这是我的应用程序配置：

```
app.configure(function(){
  app.use(express.bodyParser());
  app.use(express.cookieParser());
  app.use(express.session({secret: 'test', store: express.session.MemoryStore({
    reapInterval: 60000 * 10
 })}));
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:36:15.520

我猜你在客户端上使用了backbone.js，因为你已经用它标记了你的问题。默认情况下， Backbone 的[同步方法](http://backbonejs.org/docs/backbone.html#section-179)似乎不会将模型数据附加到请求中。您可以将它作为获取/同步的选项传递，但似乎[JQuery](http://api.jquery.com/jQuery.ajax/)无论如何都会将数据附加到 url。您可能必须覆盖主干的同步和/或 ajax 方法。我认为在 GET 请求中包含一个主体是违反 REST 原则的，正如[另一个答案](https://stackoverflow.com/a/983458/178419)中所指出的（资源必须完全由 URI 标识）。

# xml - XML 转换递归和属性作为节点名称

> ID：14234214
> 
> 赞同：0
> 
> 时间：2013-01-09T11:27:28.423
> 
> 标签：xml, xslt

我有以下格式的 XML 文件。

```
<Main>
    <root>
        <group firstname="daniel" secondname="creig">
            <a firstname="tin" secondname="tao"/>
                <b firstname="bella" secondname="james">
                    <c firstname="khadhar" secondname="abdul">
                        <d firstname="xiang" secondname="tin"/>
                    </c>
                </b>
        </group>
    </root>
</Main> 
```

我正在尝试获得如下所示的输出。

```
<members>
    <member><id>group</id><firstname>daniel</firstname><secondname>creig</secondname></member>
    <member><id>a</id><firstname>tin</firstname><secondname>tao</secondname></member>
    <member><id>b</id><firstname>bella</firstname><secondname>james</secondname></member>
    <member><id>c</id><firstname>khadhar</firstname><secondname>abdul</secondname></member>
    <member><id>d</id><firstname>xiang</firstname><secondname>tin</secondname></member>
</members> 
```

到目前为止，我的 XSL 将看起来像这样。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*"/>

<!-- Elements Section -->
<xsl:template match="/*/root/*">
<member>
    <id>
        <xsl:value-of select="local-name()" />  
    </id>
    <attr>
        <xsl:apply-templates select="@*" /> 
    </attr>
</member>
</xsl:template>

<xsl:template match="@*">
    <xsl:element name="{local-name()}">
        <xsl:value-of select="(.)" />
    </xsl:element>
</xsl:template>

</xsl:stylesheet> 
```

我需要的只是将任何深度的 XML 树中的节点转换为数组。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:38:38.267

这个怎么样：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:template match="/">
   <members>
     <xsl:apply-templates select="@* | node()" />
   </members>
</xsl:template>

<xsl:template match="root//*">
    <member>
       <id><xsl:value-of select="local-name(.)" /></id>
       <xsl:apply-templates select="@*" />
    </member>
    <xsl:apply-templates select="*" />
</xsl:template>

<xsl:template match="root//@*">
    <xsl:element name="{local-name(.)}">
       <xsl:value-of select="." />
    </xsl:element>
</xsl:template>

</xsl:stylesheet> 
```

# go - 如何构建 thrift4go？

> ID：14234224
> 
> 赞同：2
> 
> 时间：2013-01-09T11:28:24.780
> 
> 标签：go, thrift

我是 GO 的新手。我决定使用 Thrift for Go 的实现。在阅读了手动安装说明步骤后，我从 git 下载了最后一个 Thrift 0.9.0 并开始构建过程：

我的构建脚本如下：

```
#!/bin/bash
export THRIFT=$(pwd)/thrift
export THRIFT4GO=$(pwd)/thrift4go
export GOROOT=/usr

bash $THRIFT4GO/scripts/merge_and_build.sh -b

cd $THRIFT
#./cleanup.sh
./bootstrap.sh
./configure --with-go --without-python --without-csharp

make
if "$?" == "1"; then
    ln -s $THRIFT/lib/go/src/thrift $GOPATH/src/thrift
    go install thrift
fi 
```

但是 make 对 GO 不起作用，问题出在哪里？我在 bash 中使用导出的 GOPATH 变量正确安装了 GO，“go install”适用于其他项目。我不明白为什么 GO 找不到包。

```
Making all in go
make[3]: Entering directory `/home/user/projects/delkon/thrift/lib/go'
make  check-local
make[4]: Entering directory `/home/user/projects/delkon/thrift/lib/go'
go build -v -x thrift
WORK=/tmp/go-build548238117
src/thrift/tiostream_transport.go:23:2: import "bufio": cannot find package
src/thrift/tframed_transport.go:23:2: import "bytes": cannot find package
src/thrift/tmap.go:24:2: import "container/list": cannot find package
src/thrift/tjson_protocol.go:23:2: import "encoding/base64": cannot find package
src/thrift/tbinary_protocol.go:23:2: import "encoding/binary": cannot find package
src/thrift/tsimple_json_protocol.go:26:2: import "encoding/json": cannot find package
src/thrift/tapplication_exception.go:23:2: import "errors": cannot find package
src/thrift/tcompact_protocol.go:24:2: import "fmt": cannot find package
src/thrift/tbinary_protocol.go:24:2: import "io": cannot find package
src/thrift/ttransport.go:23:2: import "log": cannot find package
src/thrift/tbinary_protocol.go:25:2: import "math": cannot find package
src/thrift/tnonblocking_server_socket.go:23:2: import "net": cannot find package
src/thrift/thttp_client.go:24:2: import "net/http": cannot find package
src/thrift/thttp_client.go:25:2: import "net/url": cannot find package
src/thrift/ttransport.go:24:2: import "os": cannot find package
src/thrift/tmap.go:25:2: import "reflect": cannot find package
package thrift
imports runtime: import "runtime": cannot find package
src/thrift/tfield.go:23:2: import "sort": cannot find package
src/thrift/thttp_client.go:26:2: import "strconv": cannot find package
src/thrift/tbinary_protocol.go:26:2: import "strings": cannot find package
src/thrift/tnonblocking_socket.go:24:2: import "time": cannot find package
make[4]: *** [check-local] Error 1
make[4]: Leaving directory `/home/user/projects/delkon/thrift/lib/go'
make[3]: *** [check-am] Error 2
make[3]: Leaving directory `/home/user/projects/delkon/thrift/lib/go'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/home/user/projects/delkon/thrift/lib'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/home/user/projects/delkon/thrift'
make: *** [all] Error 2 
```

感谢您的任何输入 ps Arch linux (X86, 64)

**upd** 问题是从 GIT 克隆 thrift 时，请改用[https://dist.apache.org/repos/dist/release/thrift/0.9.0/thrift-0.9.0.tar.gz](https://dist.apache.org/repos/dist/release/thrift/0.9.0/thrift-0.9.0.tar.gz)版本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:58:04.827

我尝试*完全*遵循所有[手动安装](https://github.com/pomack/thrift4go/blob/master/README.md#manual-installation)步骤，没有任何问题。

```
(12:49) jnml@fsc-r550:~$ go version
go version go1.0.3
(12:49) jnml@fsc-r550:~$ go env
GOARCH="amd64"
GOBIN="/home/jnml/bin"
GOCHAR="6"
GOEXE=""
GOGCCFLAGS="-g -O2 -fPIC -m64 -pthread"
GOHOSTARCH="amd64"
GOHOSTOS="linux"
GOOS="linux"
GOPATH="/home/jnml"
GOROOT="/home/jnml/go"
GOTOOLDIR="/home/jnml/go/pkg/tool/linux_amd64"
CGO_ENABLED="1"
(12:49) jnml@fsc-r550:~$ 
```

注意：我已将 thrift4go 存储库克隆到`$GOPATH/src/github.com/pomack/thrift4go`. 这在 README.md 中没有提到。

# java - 关于java中的包命名

> ID：14234225
> 
> 赞同：-4
> 
> 时间：2013-01-09T11:28:25.660
> 
> 标签：java, package

例如，我在以下位置有一个 .java 文件：

/home/me/sandbox/A/B/C.java

在这个文件的第一行，我应该在后面写以下哪一项`package`？为什么？

`sandbox.A.B`或`A.B`或`B`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T11:30:52.693

你的源文件夹是什么，你的程序还有什么？我猜你必须写`A.B`（如果沙箱是根源文件夹而不是命名空间的一部分）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:43:46.127

这取决于您将存储 java 文件的当前工作目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T11:35:55.160

您应该提及相对命名空间必须从其开始的源文件夹。在您的情况下，如果您将 A 作为源文件夹，则可以编写包 AB。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T11:42:52.310

如果您正在使用`IDE`like `Eclipse`，您可以执行以下操作：

1）创建一个新的Java项目。

2）将您的“我”文件夹复制到项目中。

3）右键单击“我”文件夹->构建路径->添加为源文件夹。

4) 现在您将观察到 sandbox.AB 将显示为一个包含 C.java 类的包（前提是您`package sandbox.A.B`在 C.java 文件的顶部编写）。

# python - Django ReStructuredText 中的数学指令

> ID：14234227
> 
> 赞同：2
> 
> 时间：2013-01-09T11:28:35.040
> 
> 标签：python, django, django-templates, restructuredtext, docutils

我正在使用 Django 模板重组文本过滤器在我的模板中显示一个 rst 文件。我已经`docutils`安装并添加`django.contrib.markup`到`settings.py`. 显示第一个文本工作正常。

现在，我想在第一个文件中添加一些数学：

测试.rst：

```
.. math::
    16 \div 2

The equation is :math:`16 \div 2`. 
```

更新:: 我部分解决了这个问题。最初，错误是`Unknown directive`. 我试图将数学指令添加到模板中，但后来意识到 docutils 0.10 默认支持数学指令。因此刚刚升级到 docutils-0.10。

但是，现在我看到的是：

```
\begin{equation*} 16 \div 2 \end{equation*}
The equation is \(16 \div 2\) 
```

如果我这样做`rst2html`并在浏览器中检查它，则第一个文件可以正常工作。不同之处在于 html 文件加载 MathJax javascript，而 Django 模板不添加 js 文件。

所以我猜测缺少某些设置或配置...

真的很感激这里的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:38:23.140

用两件事解决了这个问题：

1.  最初的错误是`Unknown directive`. 我试图在模板中添加数学指令以加载乳胶，但后来意识到 docutils 0.10 默认支持数学指令。因此刚刚升级到 docutils-0.10。

2.  之后的错误是我看到了包含在`\begin{equation*}`和`\end{equation*}`标签中的乳胶数学代码。比较 rst2html 和 django 模板过滤器的输出，我意识到 django restructuredtext 过滤器没有添加做 Latex 所需的 MathJax javascript。所以，在我的模板文件部分，我手动添加了：

    `<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>`

现在，它起作用了！

# doctrine-orm - 教义 2 限制 IN 子查询

> ID：14234233
> 
> 赞同：15
> 
> 时间：2013-01-09T11:28:58.807
> 
> 标签：doctrine-orm, subquery, limit, dql

我正在尝试在 Doctrine2 的 IN 语句中使用子查询。

下面是原始 SQL 查询的样子：

```
SELECT * FROM license 
WHERE id 
IN (SELECT id 
    FROM license 
    WHERE subscription = x 
    ORDER BY date DESC
    LIMIT 5)
ORDER BY name ASC; 
```

我要做的是显示按名称排序的最后 5 个结果，所以我必须先查询最后 5 个结果，然后在主查询中按名称排序。

问题是我似乎无法限制内部查询。

这是我当前的代码：

```
$qb = $this->createQueryBuilder('l');
$qb->select('l.id');
$qb = $this->whereSubscriptionId($qb, $subscription_id);
$qb = $this->offsetLimitOrder($qb, 0, 5, 'deliveryDatetime desc');

//Second Query, adds the "order by X"
$qb2 = $this->createQueryBuilder('l2');
$qb2->add('where', $qb2->expr()->in('l2.id', $qb->getQuery()->getDQL()));
if(isset($order)){
    $order = explode(' ', $order);
    $qb2->addOrderBy('l2.'.$order[0], $order[1]);
 }

 return $qb2->getQuery()
            ->getResult(); 
```

如您所见，我创建了第一个查询，对它进行排序和限制（通过自定义方法），然后尝试在第二个查询中使用它。

但是，似乎 LIMIT 不是 DQL 语句的一部分，因为当我 var_dump 第一个查询的 DQL 时，LIMIT 不存在，这意味着当我运行 $qb2->getQuery()->getResult(); 时它被完全忽略；

我通过启动第一个查询并在第二个查询中手动输入结果来使其工作，但这很难看。

任何想法如何正确地做到这一点？

谢谢 ！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-07-27T04:27:37.293

不幸的是，Doctrine 不支持对嵌套查询的限制。即使您在内部 QueryBuilder 上使用 2 QueryBuilders 和 setMaxResults()，它也会被忽略。

此时唯一的方法是运行 2 个单独的查询。

# javascript - 修改 javascript 让显示往年

> ID：14234252
> 
> 赞同：-2
> 
> 时间：2013-01-09T11:29:49.797
> 
> 标签：javascript

我有这个 javascript 代码，我想这应该是必须更改代码的地方。

```
 if (this.options.showYear) {
            str += '<select tabindex="'+this.tabIndex+'" class="' + this.options.yearClass + '">';
            if (this.options.yearOrder == 'desc'){
                for (var y = this.options.yearStart; y > (this.options.yearStart - this.options.yearRange - 1); y--){
                    str += this.addOption(y,y,parseInt(this.calendarYear));
                }
            } else {
                for (var y = this.options.yearStart; y < (this.options.yearStart + this.options.yearRange + 1); y++){
                    str += this.addOption(y,y,parseInt(this.calendarYear));
                }
            } 
```

日历目前只显示 2013 年及以上，我至少需要 2012 年。请帮帮我！谢谢

```
 dayChars: 1,
        monthNames: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
        dayNames: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
        daysInMonth: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31], // Leap year is added later
        format: 'yyyy/mm/dd',                                          // How the output looks after selection
        yearStart: (new Date().getFullYear()),                     // Default starting year for dropdown options is 5 years ago
        yearRange: 10,                                                 // Show a 10 year span
        yearOrder: 'asc',                                              // Counting up in years
        startDay: 7 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:33:10.477

```
if (this.options.showYear) {
    str += '<select tabindex="'+this.tabIndex+'" class="' + this.options.yearClass + '">';

    this.options.yearStart -= 1; 
```

或将 options.yearStart 更改为 2012 而不是 2013（当年）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:33:46.660

尝试类似：

```
if(this.options.yearStart >= 2013) {
    this.options.yearStart = 2012;
} 
```

或者

```
dayChars: 1,
monthNames: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
dayNames: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
daysInMonth: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31], // Leap year is added later
format: 'yyyy/mm/dd',                                          // How the output looks after selection
yearStart: ((new Date().getFullYear()) < 2013 ? (new Date().getFullYear()) : 2012),  // Default starting year for dropdown options is 5 years ago
yearRange: 10,                                                 // Show a 10 year span
yearOrder: 'asc',                                              // Counting up in years
startDay: 7 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T11:35:42.023

改变你的选择

```
yearStart: (new Date().getFullYear()), 
```

到

```
yearStart: (new Date().getFullYear() - 1), // or any number of years you want to go back 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T11:37:39.840

```
yearStart: ((new Date().getFullYear()) - 1), 
```

# c# - gl.Color 影响已经在 SharpGL 中的 gl.Begin() 和 gl.End() 之间绘制的对象？

> ID：14234256
> 
> 赞同：0
> 
> 时间：2013-01-09T11:30:01.877
> 
> 标签：c#, opengl

我正在学习 SharpGL 并且有一个我无法理解的奇怪问题，据我所知，当某些对象（例如立方体）被某些对象绘制`gl.Color`并`gl.Vertex`放置在这对方法之外的所有其他命令之间时`gl.Begin()`，我`gl.End()`无法更改立方体，但在我的情况下，它做了一些改变，更具体地说，在（结束立方体的绘制）之后调用的 gl.Color( `gl.End()`) 仍然能够影响那个立方体，立方体是用一些纹理绑定绘制的。

这是我的代码，我想说，这段代码是根据 CodeProject 中的一篇文章修改的，我不是原作者，但我修​​改它不是简单地画一个旋转的立方体（就像代码作者所做的那样）而是一个立方体可以控制嘴唇（使用一些键打开和关闭），我还想在立方体内画一个金字塔，当关闭立方体时你看不到金字塔，当按下一个键打开立方体的嘴唇时，它向您展示了里面的金字塔。这对我来说很可爱，这是我在深入使用所谓的 OpenGL for C# (SharpGL) 之前所做的一个好的开始：

```
private void openGLControl1_OpenGLDraw(object sender, PaintEventArgs e) {
    // This is for pausing the scene
    if (pause) return;
    // Get the OpenGL object, for quick access.
    SharpGL.OpenGL gl = this.openGLControl1.OpenGL;

    // --------------------
    gl.Clear(OpenGL.COLOR_BUFFER_BIT | OpenGL.DEPTH_BUFFER_BIT);
    gl.Enable(OpenGL.TEXTURE_2D);
    gl.LoadIdentity();
    gl.Translate(x, y, z);

    gl.Rotate(rtri, 0.0f, 1.0f, 1.0f);

    gl.BindTexture(OpenGL.TEXTURE_2D, textures[0]);

    // Start drawing the cube (or box)
    gl.Begin(OpenGL.QUADS);

    // Front Face
    gl.TexCoord(0.0f, 0.0f); gl.Vertex(-1.0f, -1.0f, 1f);    // Bottom Left Of The Texture and Quad
    gl.TexCoord(1.0f, 0.0f); gl.Vertex(1.0f, -1.0f, 1.0f);    // Bottom Right Of The Texture and Quad
    gl.TexCoord(1.0f, 1.0f); gl.Vertex(1,(float)2*Math.Cos(alpha)- 1, 1+(float)2*Math.Sin(alpha));    // Top Right Of The Texture and Quad
    gl.TexCoord(0.0f, 1.0f); gl.Vertex(-1,(float)2*Math.Cos(alpha) - 1, 1+(float)2*Math.Sin(alpha));    // Top Left Of The Texture and Quad

    // Back Face
    gl.TexCoord(1.0f, 0.0f); gl.Vertex(-1.0f, -1.0f, -1.0f);    // Bottom Right Of The Texture and Quad
    gl.TexCoord(1.0f, 1.0f); gl.Vertex(-1.0f, 1.0f, -1.0f);    // Top Right Of The Texture and Quad
    gl.TexCoord(0.0f, 1.0f); gl.Vertex(1.0f, 1.0f, -1.0f);    // Top Left Of The Texture and Quad
    gl.TexCoord(0.0f, 0.0f); gl.Vertex(1.0f, -1.0f, -1.0f);    // Bottom Left Of The Texture

    // Top Face
    gl.TexCoord(0.0f, 1.0f); gl.Vertex(-1.0f, 1.0f, -1.0f);    // Top Left Of The Texture and Quad
    gl.TexCoord(0.0f, 0.0f); gl.Vertex(-1.0f, 1.0f, 1.0f);    // Bottom Left Of The Texture and Quad
    gl.TexCoord(1.0f, 0.0f); gl.Vertex(1.0f, 1.0f, 1.0f);    // Bottom Right Of The Texture and Quad
    gl.TexCoord(1.0f, 1.0f); gl.Vertex(1.0f, 1.0f, -1.0f);    // Top Right Of The Texture and Quad

    // Bottom Face
    gl.TexCoord(1.0f, 1.0f); gl.Vertex(-1.0f, -1.0f, -1.0f);    // Top Right Of The Texture and Quad
    gl.TexCoord(0.0f, 1.0f); gl.Vertex(1.0f, -1.0f, -1.0f);    // Top Left Of The Texture and Quad
    gl.TexCoord(0.0f, 0.0f); gl.Vertex(1.0f, -1.0f, 1.0f);    // Bottom Left Of The Texture and Quad
    gl.TexCoord(1.0f, 0.0f); gl.Vertex(-1.0f, -1.0f, 1.0f);    // Bottom Right Of The Texture and Quad

    // Right face
    gl.TexCoord(1.0f, 0.0f); gl.Vertex(1.0f, -1.0f, -1.0f);    // Bottom Right Of The Texture and Quad
    gl.TexCoord(1.0f, 1.0f); gl.Vertex(1.0f, 1.0f, -1.0f);    // Top Right Of The Texture and Quad
    gl.TexCoord(0.0f, 1.0f); gl.Vertex(1.0f, 1.0f, 1.0f);    // Top Left Of The Texture and Quad
    gl.TexCoord(0.0f, 0.0f); gl.Vertex(1.0f, -1.0f, 1.0f);    // Bottom Left Of The Texture and Quad

    // Left Face
    gl.TexCoord(0.0f, 0.0f); gl.Vertex(-1.0f, -1.0f, -1.0f);    // Bottom Left Of The Texture and Quad
    gl.TexCoord(1.0f, 0.0f); gl.Vertex(-1.0f, -1.0f, 1.0f);    // Bottom Right Of The Texture and Quad
    gl.TexCoord(1.0f, 1.0f); gl.Vertex(-1.0f, 1.0f, 1.0f);    // Top Right Of The Texture and Quad
    gl.TexCoord(0.0f, 1.0f); gl.Vertex(-1.0f, 1.0f, -1.0f);    // Top Left Of The Texture and Quad

    // End drawing the box, but the code below still affect the cube? 
    // Why??? How to prevent this unexpected behavior?
    gl.End();

    // Increase The Rotation Variable For The Triangle
    rtri += 1.0f;// 0.2f;

    // This is my method to add controlling features to the box such as
    // moving up, down, left, right, near, far and opening, closing the
    // lip of the box, this is very simple and I think you don't need to care.
    ChangeCoord(null, EventArgs.Empty);

    // Try drawing a triangle in the box
    // Here is the starting point the strange thing comes, if I end this
    // method here, all will go well but if so I won't be able to create
    // a triangle inside the box.
    gl.Disable(OpenGL.TEXTURE_2D);
    gl.LoadIdentity();
    gl.Translate(x, y, z - 0.5);
    gl.Scale(0.3f, 0.3f, 0.3f);
    gl.Rotate(r, 0.0f, 1.0f, 0.0f);

    gl.Begin(OpenGL.TRIANGLES);
    gl.Color(1.0f, 0.0f, 0.0f); gl.Vertex(0f, 1f, 0f);
    gl.Color(0.0f, 1.0f, 0.0f); gl.Vertex(-1f, -1f, 1f);
    gl.Color(0.0f, 0.0f, 1.0f); gl.Vertex(1f, -1f, 1f);

    gl.Color(1.0f, 0.0f, 0.0f); gl.Vertex(0f, 1f, 0f);
    gl.Color(0.0f, 1.0f, 0.0f); gl.Vertex(1f, -1f, 1f);
    gl.Color(0.0f, 0.0f, 1.0f); gl.Vertex(1f, -1f, -1f);

    gl.Color(1.0f, 0.0f, 0.0f); gl.Vertex(0f, 1f, 0f);
    gl.Color(0.0f, 1.0f, 0.0f); gl.Vertex(1f, -1f, -1f);
    gl.Color(0.0f, 0.0f, 1.0f); gl.Vertex(-1f, -1f, -1f);

    gl.Color(1.0f, 0.0f, 0.0f); gl.Vertex(0f, 1f, 0f);
    gl.Color(0.0f, 1.0f, 0.0f); gl.Vertex(-1f, -1f, -1f);
    gl.Color(0.0f, 0.0f, 1.0f); gl.Vertex(-1f, -1f, 1f);
    gl.End();

    r += 1.0f; //Just changing the rotating angle of the triangle.
} 
```

`gl.Color()`我认为用于绘制三角形的s 仍然会影响盒子吗？

我还下载了另一篇文章，其中作者以相同的逻辑绘制了一个三角形和一个立方体，一切顺利，但该代码中的立方体是使用`gl.Color()`没有纹理绑定来绘制的，在此代码中，立方体是使用来自位图的一些纹理绘制的图片。

请帮帮我，立方体和三角形已绘制，我可以随意控制立方体（向左、向右、向上、向下移动、打开和关闭嘴唇并暂停场景）但**整个立方体变成蓝色并与纹理重叠图像，这不是我想要的**，因为它看起来不真实，纹理图像就足够了。正如我在开头提到的，**如果我不使用绘制附加三角形的代码，它会像我预期的那样渲染得很好。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:15:48.723

如果您提交需要颜色的要绘制的东西，但您没有指定颜色，GL 只会使用您提供的最后一种颜色。

如果您甚至不指定颜色，则默认为白色。

最好只给它你想要的颜色，而不是依靠正确的颜色在你需要的时候神奇地出现。

放在`gl.Color(1.0f, 1.0f, 1.0f);`你的第一个之后`gl.Begin()`。

（正如其他人在您的评论中指出的那样，不再推荐使用固定功能管道。考虑迁移到新的可编程管道。）

# java - JAVA with SQL：插入命令的返回值？

> ID：14234257
> 
> 赞同：4
> 
> 时间：2013-01-09T11:30:02.103
> 
> 标签：java, sql, jdbc

我有一个作者表：authorID、authorName。authorID 是一个自动递增的 pk。

我想在 java 中编写一个从用户获取名称并将其添加到表中的方法。但是我需要返回作者的 ID。有没有办法用 1 条 sql 语句来做到这一点？

例如，如果我的代码有命令：

```
stmt.executeUpdate("INSERT INTO authors " + "VALUES (, '"+ string.get(1) +"')"); 
```

其中 string.get(1) 是作者姓名。

现在如果我写：

```
ResultSet rs =stmt.executeUpdate("INSERT INTO authors " + "VALUES (, '"+ string.get(1) +"')"); 
```

它说错误，因为 rs 是结果集，但返回的值是 int。这是我插入的行的 pk 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T11:37:07.547

尝试

```
stmt.executeUpdate("INSERT INTO authors VALUES (, '"+ string.get(1) +"')", Statement.RETURN_GENERATED_KEYS);
ResultSet rs = stmt.getGeneratedKeys();
rs.next();
long pk = rs.getLong(1); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T11:36:25.973

在创建时传递 Statement.RETURN_GENERATED_KEYS`PreparedStatement` `conn.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);`

并 `PreparedStatement#getGeneratedKeys()`在惰性后返回自动生成的密钥。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-09T11:37:24.193

为了获得最后插入的 id，请查看以下代码：

```
PreparedStatement stmnt = Conn.preparedStatement("INSERT INTO authors(col1) VALUES (?)", Statement. RETURN_GENERATED_KEYS );
stmnt.setString(col1val);
stmnt.executeUpdate();
ResultSet rs=stmnt.getGeneratedKeys();
if(rs.next()){
   System.out.println(rs.getInt(1));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T11:32:51.940

尝试：

```
INSERT INTO authors VALUES (...) returning authorID 
```

当您执行它时，请使用`executeQuery`. 你应该得到`ResultSet`一行一列的 a - 这将是 ID。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T11:35:15.033

我不知道 JDBC 是否支持此功能（有一段时间没用过），但我想您可以尝试：

```
INSERT INTO TABLE_NAME (FIELD1, FIELD2) VALUES ('foo', 'bar') RETURNING FIELD3 
```

通过 executeQuery() 或者，如果您的 jdbc 驱动程序不支持 `RETURNING`编写简单的存储函数。

您使用的是哪个 RDMBS？

# rtc - 限制开发人员根据团队交付流 - 好的做法？

> ID：14234267
> 
> 赞同：1
> 
> 时间：2013-01-09T11:30:46.280
> 
> 标签：rtc

阅读我之前询问的关于限制开发人员交付到流的问题：

[停止将更改传递到流 - RTC 源代码控制](https://stackoverflow.com/questions/13345286/stop-changes-being-delivered-to-a-stream-rtc-source-control)

我认为解决这个问题的方法是创建一个新的团队区域，其中只包含需要对流拥有所有权的开发人员。将流的所有权更改为这个新创建的团队区域。新创建的团队区域的开发人员将是唯一可以交付到此流的开发人员。不再是 stream 拥有的团队成员的开发人员是否仍然能够查看流及其更改集？

这是好习惯吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:43:35.943

不再是 stream 拥有的团队成员的开发人员是否仍然能够查看流及其更改集？

是的。（除非使用 RTC4，您设置了读取访问权限以防止其他人读取您的流的内容）。

这是好习惯吗？

是的，尽管我在“集成”流上使用它是为了让“集成”团队*接受*来自其他流的更改。
例如，请参阅“[**在流内的组件级别限制用户访问**](https://stackoverflow.com/questions/10518954/restrict-user-access-at-component-level-within-a-stream/10519357#10519357)”。

换句话说，我不限制每个团队的交付团队，对于每个流。
我只限制某些关键流的交付，并确保只有负责该流的团队才能*接受*来自任何其他流的更改，从而允许所述团队准确控制他们的流中登陆的内容。

# android - 如何在不使用位图的情况下在 Android 中旋转图像？

> ID：14234269
> 
> 赞同：2
> 
> 时间：2013-01-09T11:30:58.023
> 
> 标签：android, image, rotation, landscape

捕获的图像存储在横向位置，因此我想将其更改为肖像。

如何在不使用位图的情况下做到这一点？如果我使用下面的代码图像会损坏。所以只有我不想使用位图。

我的代码是：

```
Bitmap Out = null;
Bitmap Output = null;

Out = BitmapFactory.decodeByteArray(data, 0, data.length);
int w = Out.getWidth();
int h = Out.getHeight();
 Matrix mtx = new Matrix();
mtx.postRotate(90);

             Output = Bitmap.createBitmap(Out, 0, 0, w, h, mtx, true);
               image = bitmaptoByte(Output); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:15:14.643

以[RotateAnimation](http://developer.android.com/reference/android/view/animation/RotateAnimation.html) 为例，我旋转秒针：

```
public RotateAnimation createAnimation(float time) {
      RotateAnimation rotateAnimation = new RotateAnimation(time, time,  Animation.RELATIVE_TO_SELF, 0.5f,Animation.RELATIVE_TO_SELF, 0.5f);
      rotateAnimation.setFillAfter(true);
      return rotateAnimation;

  public void runSec(float shour) {
      csecond.startAnimation(createAnimation(shour*6));
    } 
```

# ios - MKMapView Routeline 不在路上

> ID：14234270
> 
> 赞同：1
> 
> 时间：2013-01-09T11:31:02.610
> 
> 标签：ios, objective-c, ios4

我已经实现了一种在 2 点之间绘制路线的方法，但是路线偏离了道路。如何仅在道路上绘制路线？

```
coordinateArray[0] = CLLocationCoordinate2DMake(appDelegate.latitude, appDelegate.longitude);
coordinateArray[1] = CLLocationCoordinate2DMake(appDelegate.latitude2, appDelegate.longitude2); 

self.routeLine = [MKPolyline polylineWithCoordinates:coordinateArray count:2];
[self.myMapView setVisibleMapRect:[self.routeLine boundingMapRect]]; 
[self.myMapView addOverlay:self.routeLine]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:07:00.307

这非常有帮助（（：MKPolyline with Google Maps API [https://github.com/Surya121/SBMapWithRoute](https://github.com/Surya121/SBMapWithRoute)

# php - 将 hotmail 返回的 email_hashes 与我数据库中的电子邮件匹配

> ID：14234274
> 
> 赞同：1
> 
> 时间：2013-01-09T11:31:28.193
> 
> 标签：php, email, encryption, hotmail

我能够导入用户的联系人：

```
 $url = 'https://apis.live.net/v5.0/me/contacts?access_token='.$accesstoken.'';
        $xmlresponse =  curl_file_get_contents($url);
        $xml = json_decode($xmlresponse, true);
        foreach($xml['data'] as $emails)
        {
                echo '<br><br>';
                echo $emails['name'].' '.$emails['email_hashes'][0];

        } 
```

问题是我想找到用户在我的网络中可能拥有的连接。hotmail 不提供纯文本电子邮件（而且它看起来是一种加密方式）..

如何以相同的方式加密我的电子邮件以进行比较？还有其他解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T18:01:29.700

我的解决方案是扩大范围：然后在结果中接收更多字段

```
https://login.live.com/oauth20_authorize.srf?client_id={APPID}&`scope=wl.signin%20wl.basic%20wl.emails%20wl.contacts_emails&response_type=code&redirect_uri=http://{REDIRECT_URI}` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:11:10.943

根据生成散列[的文档](http://msdn.microsoft.com/en-us/library/live/hh826530.aspx#generating)，您可以通过首先生成散列，将`trim()`您的 appid 和电子邮件 - 将它们连接在一起作为 UTF-8 并生成连接字符串的 sha256 散列。

类似（伪代码），假设 appid 和 email 都是有效的 utf-8：

```
function get_hotmail_hash($email, $appId)
{
    $content = mb_strtolower(trim($email) . trim($appId), "utf-8");
    return hash("sha256", $content);
} 
```

# maven - 使用 TestNG、JSFUnit 2 和 Arquillian 进行自动化测试的 Maven

> ID：14234277
> 
> 赞同：6
> 
> 时间：2013-01-09T11:31:39.667
> 
> 标签：maven, testng, jboss-arquillian, apache-tomee, jsfunit

我目前正在尝试使用 Arquillian 和 TestNG 进行 JSFUnit-Test，但 JSFServerSession 和 JSFClientSession-object 为 NULL。有 JSFUnit 和 TestNG 的工作示例吗？还是这里有其他问题？

我的测试班：

```
package my.beautiful.tests;

import java.io.File;
import java.io.IOException;
import java.net.URL;

import javax.faces.component.UIComponent;

import org.jboss.arquillian.container.test.api.Deployment;
import org.jboss.arquillian.test.api.ArquillianResource;
import org.jboss.arquillian.testng.Arquillian;
import org.jboss.jsfunit.api.InitialPage;
import org.jboss.jsfunit.jsfsession.JSFClientSession;
import org.jboss.jsfunit.jsfsession.JSFServerSession;
import org.jboss.shrinkwrap.api.ShrinkWrap;
import org.jboss.shrinkwrap.api.spec.WebArchive;
import org.testng.AssertJUnit;
import org.testng.annotations.Test;

public class JSFUnitTestExample /* Arquillian needs this, not TestNG */extends Arquillian {

    @ArquillianResource URL context;

    @Deployment
    public static WebArchive createDeployment() {
        return ShrinkWrap.create( WebArchive.class, "jsfunit_test.war" ).addClass( JSFUnitBean.class )
                .addAsWebInfResource( new File( "src/main/webapp/WEB-INF", "faces-config.xml" ), "faces-config.xml" )
                .addAsWebInfResource( new File( "src/main/webapp/WEB-INF", "beans.xml" ), "beans.xml" )
                .setWebXML( new File( "src/main/webapp/WEB-INF", "web.xml" ) )
                .addAsWebResource( new File( "src/main/webapp", "index.xhtml" ) );
    }

    @Test(dataProvider = Arquillian.ARQUILLIAN_DATA_PROVIDER, description = "Testet, ob bei dem Klick auf den Button der Text 'Hello World' erscheint und das Bean somit richtig angesprochen wird.")
    @InitialPage("/index.xhtml")
    public void testInitialPage( JSFServerSession server, JSFClientSession client ) throws IOException {
        AssertJUnit.assertNotNull( server );
        AssertJUnit.assertNotNull( client );

        AssertJUnit.assertEquals( "/index.xhtml", server.getCurrentViewID() );
        client.click( "submitButton" );

        UIComponent result = server.findComponent( "result" );
        AssertJUnit.assertTrue( result.isRendered() );

        AssertJUnit.assertEquals( "Hello World", server.getManagedBeanValue( "#{jSFUnitBean.message}" ) );
        AssertJUnit.assertEquals( "/index.xhtml", server.getCurrentViewID() );
    }
} 
```

我的 pom.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>my.beautiful.tests</groupId>
    <artifactId>jsfunit-example</artifactId>
    <version>1.0</version>

    <packaging>war</packaging>

    <name>Tests :: JSFUnit-Tests with Arquillian</name>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>      
        <arquillian.debug>true</arquillian.debug> <!-- tells arquillian to be verbose -->
        <openejb.arquillian.debug>true</openejb.arquillian.debug> <!-- tells arquillian to be verbose -->

        <!-- versions -->
        <tomee.version>1.5.1</tomee.version>
        <arquillian.version>1.0.2.Final</arquillian.version>
        <myfaced.version>2.1.8</myfaced.version>
        <jsfunit.version>2.0.0.Beta2</jsfunit.version>
    </properties>

    <build>
        <finalName>jsfunit_test</finalName>
        <plugins>
            <!-- its Java 7 (1.7) -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                </configuration>
            </plugin>
            <!-- /its Java 7 (1.7) -->
            <!-- <special options for TESTING> -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.12.4</version>
                <configuration>
                    <includes>
                        <include>**/*.java</include><!-- dont just run *Test.java-files, which is default for surefire -->
                    </includes>
                    <!-- for Arquillian -->
                    <parallel>none</parallel> <!-- for NOT spawning servers with the same port/port-colision -->
                    <threadCount>1</threadCount> <!-- for NOT spawning servers with the same port/port-colision -->
                    <systemPropertyVariables>
                        <arquillian.launch>tomee-embedded</arquillian.launch>
                    </systemPropertyVariables>
                    <!-- /for Arquillian -->
                </configuration>
            </plugin>
            <!-- </special options for TESTING> -->
            <!-- <for having better IDE-Support> -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.9</version>
                <configuration>
                    <downloadSources>true</downloadSources>
                    <downloadJavadocs>true</downloadJavadocs>
                </configuration>
            </plugin>
            <!-- </for having better IDE-Support> -->
        </plugins>
    </build>
    <dependencies>
        <!-- javaEE (tomEE) -->
        <dependency>
            <groupId>org.apache.openejb</groupId>
            <artifactId>javaee-api</artifactId>
            <version>6.0-4</version>
            <scope>provided</scope>
        </dependency>
        <!-- /javaEE (tomEE) -->

        <!-- javax.faces -->
        <dependency>
            <groupId>org.apache.myfaces.core</groupId>
            <artifactId>myfaces-api</artifactId>
            <version>2.1.8</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.myfaces.core</groupId>
            <artifactId>myfaces-impl</artifactId>
            <version>2.1.8</version>
            <scope>provided</scope>
        </dependency>
        <!-- /javax.faces -->

        <!-- jsfunit -->
        <dependency>
            <groupId>org.jboss.jsfunit</groupId>
            <artifactId>jboss-jsfunit-core</artifactId>
            <version>2.0.0.Beta2</version>
            <scope>compile</scope>
        </dependency>
         <dependency>
             <groupId>org.jboss.jsfunit</groupId>
             <artifactId>jsfunit-arquillian</artifactId>
            <version>2.0.0.Beta2</version>
             <scope>test</scope>
         </dependency>
        <!-- /jsfunit -->

        <!-- Arquilian -->
        <dependency>
            <groupId>org.jboss.arquillian.testng</groupId>
            <artifactId>arquillian-testng-container</artifactId><!-- if JUnit is used, change this container to corresponding one -->
            <version>1.0.2.Final</version>
            <scope>test</scope>
        </dependency>
        <!-- Arquilian Adapter -->
        <dependency>
            <groupId>org.apache.openejb</groupId>
            <artifactId>arquillian-tomee-embedded</artifactId>
            <version>1.5.1</version>
            <scope>test</scope>
        </dependency>
        <!-- /Arquilian Adapter -->
        <!-- ShrinkWrap - Dependency for Arquillian -->
         <dependency>
             <groupId>org.jboss.shrinkwrap</groupId>
             <artifactId>shrinkwrap-api</artifactId>
             <version>1.1.1-alpha-2</version>
             <scope>test</scope>
         </dependency>
         <dependency>
             <groupId>org.jboss.shrinkwrap.resolver</groupId>
             <artifactId>shrinkwrap-resolver-api-maven</artifactId>
             <version>2.0.0-alpha-6</version>
             <scope>test</scope>
         </dependency>
         <dependency>
             <groupId>org.jboss.shrinkwrap.resolver</groupId>
             <artifactId>shrinkwrap-resolver-impl-maven</artifactId>
             <version>2.0.0-alpha-6</version>
             <scope>test</scope>
         </dependency>
         <dependency>
             <groupId>org.jboss.shrinkwrap.descriptors</groupId>
             <artifactId>shrinkwrap-descriptors-impl</artifactId>
             <version>1.1.0-beta-1</version>
             <scope>test</scope>
         </dependency>
         <!-- /ShrinkWrap - Dependency for Arquillian -->
        <!-- /Arquilian -->

        <!-- TestNG -->
        <dependency>
            <groupId>org.testng</groupId>
            <artifactId>testng</artifactId>
            <version>6.8</version>
            <scope>test</scope>
        </dependency>
        <!-- /TestNG -->
    </dependencies>

    <repositories>
        <!-- jsfunit -->
        <repository>
            <id>JBoss Dev</id>
            <url>http://repository.jboss.org/nexus/content/groups/public/</url>
             <releases>
                 <enabled>true</enabled>
                 <updatePolicy>never</updatePolicy>
             </releases>
             <snapshots>
                 <enabled>true</enabled>
                 <updatePolicy>never</updatePolicy>
             </snapshots>
        </repository>
        <!-- /jsfunit -->

        <repository>
            <id>apache-m2-snapshot</id>
            <name>Apache Snapshot Repository</name>
            <url>http://repository.apache.org/snapshots</url>
        </repository>
    </repositories>
</project> 
```

编辑：这里是我的TestNG-结果：测试

```
InitialPage (null, null)
"java.lang.AssertionError: at my.beatiful.tests.JSFUnitTestExample.testInitialPage(JSFUnitTestExample.java:35) at org.jboss.arquillian.testng.Arquillian$2.invoke(Arquillian.java:167) at org.jboss.arquillian.container.test.impl.execution.LocalTestExecuter.execute(LocalTestExecuter.java:60) at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94) at org.jboss.arquillian.core.impl.EventContextImpl.invokeObservers(EventContextImpl.java:99) at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:81) at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:135) at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:115) at org.jboss.arquillian.core.impl.EventImpl.fire(EventImpl.java:67) at org.jboss.arquillian.container.test.impl.client.protocol.local.LocalContainerMethodExecutor.invoke(LocalContainerMethodExecutor.java:50) at org.jboss.arquillian.container.test.impl.execution.RemoteTestExecuter.execute(RemoteTestExecuter.java:120) at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94) at org.jboss.arquillian.core.impl.EventContextImpl.invokeObservers(EventContextImpl.java:99) at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:81) at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:135) at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:115) at org.jboss.arquillian.core.impl.EventImpl.fire(EventImpl.java:67) at org.jboss.arquillian.container.test.impl.execution.ClientTestExecuter.execute(ClientTestExecuter.java:57) at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94) at org.jboss.arquillian.core.impl.EventContextImpl.invokeObservers(EventContextImpl.java:99) at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:81) at org.jboss.arquillian.container.test.impl.client.ContainerEventController.createContext(ContainerEventController.java:142) at org.jboss.arquillian.container.test.impl.client.ContainerEventController.createTestContext(ContainerEventController.java:129) at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94) at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88) at org.jboss.arquillian.test.impl.TestContextHandler.createTestContext(TestContextHandler.java:89) at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94) at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88) at org.jboss.arquillian.test.impl.TestContextHandler.createClassContext(TestContextHandler.java:75) at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94) at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88) at org.jboss.arquillian.test.impl.TestContextHandler.createSuiteContext(TestContextHandler.java:60) at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94) at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88) at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:135) at org.jboss.arquillian.test.impl.EventTestRunnerAdaptor.test(EventTestRunnerAdaptor.java:111) at org.jboss.arquillian.testng.Arquillian.run(Arquillian.java:158) at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:77) at org.apache.maven.surefire.testng.TestNGDirectoryTestSuite.execute(TestNGDirectoryTestSuite.java:110) at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:106) at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189) at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165) at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85) at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115) at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75) ... Removed 63 stack frames

java.lang.AssertionError: at org.testng.AssertJUnit.fail(AssertJUnit.java:59) at org.testng.AssertJUnit.assertTrue(AssertJUnit.java:24) at org.testng.AssertJUnit.assertNotNull(AssertJUnit.java:267) at org.testng.AssertJUnit.assertNotNull(AssertJUnit.java:259) at my.beatiful.tests.JSFUnitTestExample.testInitialPage(JSFUnitTestExample.java:35) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:601) at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80) at org.testng.internal.MethodInvocationHelper$1.runTestMethod(MethodInvocationHelper.java:182) at org.jboss.arquillian.testng.Arquillian$2.invoke(Arquillian.java:167) at org.jboss.arquillian.container.test.impl.execution.LocalTestExecuter.execute(LocalTestExecuter.java:60) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:601) at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94) at org.jboss.arquillian.core.impl.EventContextImpl.invokeObservers(EventContextImpl.java:99) at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:81) at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:135) at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:115) at org.jboss.arquillian.core.impl.EventImpl.fire(EventImpl.java:67) at org.jboss.arquillian.container.test.impl.client.protocol.local.LocalContainerMethodExecutor.invoke(LocalContainerMethodExecutor.java:50) at org.jboss.arquillian.container.test.impl.execution.RemoteTestExecuter.execute(RemoteTestExecuter.java:120) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:601) at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94) at org.jboss.arquillian.core.impl.EventContextImpl.invokeObservers(EventContextImpl.java:99) at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:81) at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:135) at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:115) at org.jboss.arquillian.core.impl.EventImpl.fire(EventImpl.java:67) at org.jboss.arquillian.container.test.impl.execution.ClientTestExecuter.execute(ClientTestExecuter.java:57) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:601) at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94) at org.jboss.arquillian.core.impl.EventContextImpl.invokeObservers(EventContextImpl.java:99) at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:81) at org.jboss.arquillian.container.test.impl.client.ContainerEventController.createContext(ContainerEventController.java:142) at org.jboss.arquillian.container.test.impl.client.ContainerEventController.createTestContext(ContainerEventController.java:129) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:601) at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94) at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88) at org.jboss.arquillian.test.impl.TestContextHandler.createTestContext(TestContextHandler.java:89) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:601) at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94) at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88) at org.jboss.arquillian.test.impl.TestContextHandler.createClassContext(TestContextHandler.java:75) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:601) at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94) at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88) at org.jboss.arquillian.test.impl.TestContextHandler.createSuiteContext(TestContextHandler.java:60) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:601) at org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94) at org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88) at org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:135) at org.jboss.arquillian.test.impl.EventTestRunnerAdaptor.test(EventTestRunnerAdaptor.java:111) at org.jboss.arquillian.testng.Arquillian.run(Arquillian.java:158) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:601) at org.testng.internal.MethodInvocationHelper.invokeHookable(MethodInvocationHelper.java:194) at org.testng.internal.Invoker.invokeMethod(Invoker.java:707) at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:901) at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1231) at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:127) at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111) at org.testng.TestRunner.privateRun(TestRunner.java:767) at org.testng.TestRunner.run(TestRunner.java:617) at org.testng.SuiteRunner.runTest(SuiteRunner.java:334) at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329) at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291) at org.testng.SuiteRunner.run(SuiteRunner.java:240) at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52) at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86) at org.testng.TestNG.runSuitesSequentially(TestNG.java:1198) at org.testng.TestNG.runSuitesLocally(TestNG.java:1123) at org.testng.TestNG.run(TestNG.java:1031) at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:77) at org.apache.maven.surefire.testng.TestNGDirectoryTestSuite.execute(TestNGDirectoryTestSuite.java:110) at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:106) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:601) at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189) at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165) at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85) at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115) at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75) "

org.testng.AssertJUnit.fail(AssertJUnit.java:59)
org.testng.AssertJUnit.assertTrue(AssertJUnit.java:24)
org.testng.AssertJUnit.assertNotNull(AssertJUnit.java:267)
org.testng.AssertJUnit.assertNotNull(AssertJUnit.java:259)
my.beatiful.tests.JSFUnitTestExample.testInitialPage(JSFUnitTestExample.java:35)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:601)
org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
org.testng.internal.MethodInvocationHelper$1.runTestMethod(MethodInvocationHelper.java:182)
org.jboss.arquillian.testng.Arquillian$2.invoke(Arquillian.java:167)
org.jboss.arquillian.container.test.impl.execution.LocalTestExecuter.execute(LocalTestExecuter.java:60)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:601)
org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
org.jboss.arquillian.core.impl.EventContextImpl.invokeObservers(EventContextImpl.java:99)
org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:81)
org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:135)
org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:115)
org.jboss.arquillian.core.impl.EventImpl.fire(EventImpl.java:67)
org.jboss.arquillian.container.test.impl.client.protocol.local.LocalContainerMethodExecutor.invoke(LocalContainerMethodExecutor.java:50)
org.jboss.arquillian.container.test.impl.execution.RemoteTestExecuter.execute(RemoteTestExecuter.java:120)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:601)
org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
org.jboss.arquillian.core.impl.EventContextImpl.invokeObservers(EventContextImpl.java:99)
org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:81)
org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:135)
org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:115)
org.jboss.arquillian.core.impl.EventImpl.fire(EventImpl.java:67)
org.jboss.arquillian.container.test.impl.execution.ClientTestExecuter.execute(ClientTestExecuter.java:57)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:601)
org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
org.jboss.arquillian.core.impl.EventContextImpl.invokeObservers(EventContextImpl.java:99)
org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:81)
org.jboss.arquillian.container.test.impl.client.ContainerEventController.createContext(ContainerEventController.java:142)
org.jboss.arquillian.container.test.impl.client.ContainerEventController.createTestContext(ContainerEventController.java:129)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:601)
org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
org.jboss.arquillian.test.impl.TestContextHandler.createTestContext(TestContextHandler.java:89)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:601)
org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
org.jboss.arquillian.test.impl.TestContextHandler.createClassContext(TestContextHandler.java:75)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:601)
org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
org.jboss.arquillian.test.impl.TestContextHandler.createSuiteContext(TestContextHandler.java:60)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:601)
org.jboss.arquillian.core.impl.ObserverImpl.invoke(ObserverImpl.java:94)
org.jboss.arquillian.core.impl.EventContextImpl.proceed(EventContextImpl.java:88)
org.jboss.arquillian.core.impl.ManagerImpl.fire(ManagerImpl.java:135)
org.jboss.arquillian.test.impl.EventTestRunnerAdaptor.test(EventTestRunnerAdaptor.java:111)
org.jboss.arquillian.testng.Arquillian.run(Arquillian.java:158)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
java.lang.reflect.Method.invoke(Method.java:601)
org.testng.internal.MethodInvocationHelper.invokeHookable(MethodInvocationHelper.java:194)
org.testng.internal.Invoker.invokeMethod(Invoker.java:707)
org.testng.internal.Invoker.invokeTestMethod(Invoker.java:901)
org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1231)
org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:127)
org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
org.testng.TestRunner.privateRun(TestRunner.java:767)
org.testng.TestRunner.run(TestRunner.java:617)
org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
org.testng.SuiteRunner.run(SuiteRunner.java:240)
org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
org.testng.TestNG.runSuitesSequentially(TestNG.java:1198)
org.testng.TestNG.runSuitesLocally(TestNG.java:1123)
org.testng.TestNG.run(TestNG.java:1031)
org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:77)
org.apache.maven.surefire.testng.TestNGDirectoryTestSuite.execute(TestNGDirectoryTestSuite.java:110)(... cut ... ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T03:18:49.893

我终于找到了解决这个问题的方法。JSFUnit 期望某些过滤器正在运行。使用`Servet 3.0`协议，这些应该自动添加。但他们不是。这就是为什么我们没有被注射任何东西。

我已经下载了 JSFUnit Arquillian 集成源并找到了需要添加的内容：

`jsfunit-arquillian-2.0.0.Beta2-sources.jar/org/jboss/arquillian/jsfunit/internals/web-fragment.xml`

只需手动将其添加到您的`web.xml`，一切都应该按预期工作。以下是相关部分：

```
<filter>
  <filter-name>JSFUnitCleanupTestTreadFilter</filter-name>
  <filter-class>org.jboss.jsfunit.arquillian.container.JSFUnitCleanupTestTreadFilter</filter-class>
</filter>

<filter>
  <filter-name>JSFUnitFilter</filter-name>
  <filter-class>org.jboss.jsfunit.framework.JSFUnitFilter</filter-class>
</filter>

<filter-mapping>
  <filter-name>JSFUnitCleanupTestTreadFilter</filter-name>
  <url-pattern>/ArquillianServletRunner</url-pattern>
</filter-mapping>    

<filter-mapping>
  <filter-name>JSFUnitFilter</filter-name>
  <url-pattern>/ArquillianServletRunner</url-pattern>
</filter-mapping> 
```

就我而言，一切正常，会话被注入。

# django - Django：授予身份验证用户的权限但视图/模板中没有？

> ID：14234279
> 
> 赞同：0
> 
> 时间：2013-01-09T11:31:41.833
> 
> 标签：django, authorization

在我的 Django 项目中并使用 django.contrib.auth，我已将我的新应用程序的一系列权限授予特定用户：

![用户权限](../Images/d30d6699feef26ca10af45b5ae43fcda.png)

但是，在我看来，`request.user.has_perm('whwn.can_change_situation')`是`False`并且在我的模板中，`{% if perms.whwn.can_change_situation %}`也不起作用。我也尝试过创建一个具有这些权限的组并将用户放入组中，但这不起作用。

对于超级用户，权限确实可以正常工作。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:48:18.307

[按照文档中的](https://docs.djangoproject.com/en/dev/topics/auth/default/#default-permissions)`request.user.has_perm('whwn.change_situation')`说明使用。

# clojure - 我如何访问原子地图内的地图？

> ID：14234282
> 
> 赞同：2
> 
> 时间：2013-01-09T11:31:52.043
> 
> 标签：clojure

我正在尝试访问原子地图中的地图。我有这个：

```
(def database (atom {:henk {:username "henk" :password "johnson" :session "test"}
:steve {:username "steve" :password "boldwin" :session "test2"}
:cane {:username "cane" :password "john" :session "test3"}})) 
```

我试过使用交换！在 dosync 内部，但我似乎无法访问所需的值。你能帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T11:45:40.307

```
 user=> (def database (atom {:henk {:username "henk" :password "johnson" :session "test"}
                             :steve {:username "steve" :password "boldwin" :session "test2"}
                             :cane {:username "cane" :password "john" :session "test3"}}))
 #'user/database
 user=> (:henk @database)
 {:session "test", :username "henk", :password "johnson"} 
```

修改：

```
user=> (swap! database assoc-in [:henk :session] "test + swap")
{:cane {:session "test3", :username "cane", :password "john"}, 
 :henk {:session "test + swap", :username "henk", :password "johnson"}, 
 :steve {:session "test2", :username "steve", :password "boldwin"}} 
```

检查值是否已更新：

```
user=> @database
{:cane {:session "test3", :username "cane", :password "john"}, 
 :henk {:session "test + swap", :username "henk", :password "johnson"}, 
 :steve {:session "test2", :username "steve", :password "boldwin"}} 
```

# android - 如何在 Android 中获取电子邮件发送或接收事件？

> ID：14234283
> 
> 赞同：1
> 
> 时间：2013-01-09T11:31:53.843
> 
> 标签：android, email

如何让用户在特定时间在他们的 android 设备中发送或接收电子邮件

我想让用户收到或将任何邮件从他们的设备发送到任何其他邮件

有没有可能。可能的意思是请任何人给我一些关于如何做到这一点的建议

# vb6 - VBSQL.OCX 未注册 -ERROR

> ID：14234288
> 
> 赞同：1
> 
> 时间：2013-01-09T11:32:05.193
> 
> 标签：vb6, activex, regsvr32

我有两台测试机器，机器 A 和 B（均为 64 位）。有一个使用 Vbsql OLE 自定义控制模块 (Vbsql.ocx) 的 VB6 应用程序。

该 VB 应用程序在机器 A 中运行良好，没有任何错误，但在机器 B 中执行时失败并显示以下错误消息。

![在此处输入图像描述](../Images/39ec647001d6f5b261ad03769fa5f00d.png)

注意：我从机器 A 复制了 ocx 文件以在机器 B 上注册它，但它无法注册，错误截图如下所示。

![在此处输入图像描述](../Images/5e1db8f1858cb4d5f73fcc886f09d2b9.png)

两台机器都没有VB6 IDE，所以我可以调试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:08:57.620

您是否尝试过运行 32 位版本的`regsvr32`?

```
%WINDIR%\...\SysWOW64\regsvr32 vbsql.ocx 
```

64 位版本不会加载这个（大概）32 位 DLL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T11:04:19.020

我找到了一种注册 VBSQL.OCX 文件的方法。

使用依赖walker，我发现机器B中缺少NTWDBLIB.dll文件，因此将其复制到SYSWOW64文件夹中并使用提升的命令提示符进行注册。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:14:54.510

您可以将 ocx 文件与可执行文件放在同一目录中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-12T15:54:14.007

[![使用以下运行命令来注册 OCX](../Images/52df2ca87e8d6e77006e2e614c906ab7.png)](https://i.stack.imgur.com/s5CGS.jpg)

使用以下运行命令来注册 OCX

# html - Century Gothic 字体未显示在网页上

> ID：14234291
> 
> 赞同：0
> 
> 时间：2013-01-09T11:32:23.387
> 
> 标签：html, css

在此网页上[http://nkarch.lifeintheuktest.co/the-work.aspx](http://nkarch.lifeintheuktest.co/the-work.aspx) 世纪哥特式字体未显示在顶部导航中（例如 THE WORK、NK、THE PRACTICE）。有任何想法吗？它应该出现在[http://www.identifont.com/show?1N2](http://www.identifont.com/show?1N2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:41:12.503

您在 CSS 中声明一个`a`元素应该是 Open Sans。由于这比您的`li`字体规范更具体，因此优先。

要修复它，请指定字体`li a`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:39:42.927

你用`Open sans`. 您的`a`样式继承自父`.TopNavigation li {`样式。
所以将`Century Gothic`font-family 直接设置为您的`li > a`元素。如果需要，添加`!important`.

# php - 它没有正确提交页面以显示下一次评估的详细信息

> ID：14234294
> 
> 赞同：0
> 
> 时间：2013-01-09T11:32:52.277
> 
> 标签：php, jquery, html, ajax

我的提交有问题。假设我有两个评估：

*   FGTRE1
*   FGTRE2

假设发生的是用户将首先完成评估 1，提交评估 1，然后他们将被导航到同一页面，但这次它显示评估 2 的详细信息。要知道评估是如何更改的，我有这行代码显示页面的标题：

```
<h1>ASSESSMENT (<?php echo $assessment ?>) <?php echo $sessionMinus ?> OF <?php echo $_SESSION['initial_session'] ?></h1> 
```

因此，它显示的第一个评估是：

**评估 (FGTRE1) 1 / 2**

第二次评估应显示：

**评估 (FGTRE2) 2 的 2**

我遇到的问题是当用户成功提交第一个评估时，它不会继续显示第二个评估，它仍然显示第一个评估的详细信息。

看了下面的代码，我的疑问是，为什么第一次测评提交成功后，页面没有加载第二次测评内容，而是仍然显示了第一次测评内容？

我确实包含了 php 错误报告，并且没有 php 错误，并且错误控制台中也没有 javascript 错误：

**PHP：**

```
<?php

session_start();

if (isset($_POST['id'])) {
    $_SESSION['id'] = $_POST['id'];
}

if(isset($_SESSION['sessionNum'])){
    //Declare my counter for the first time

    $_SESSION['initial_session'] = $_SESSION['sessionNum'];
    $_SESSION['sessionNumber'] = intval($_SESSION['sessionNum']);
    $_SESSION['sessionCounting'] = 1;
} elseif (isset($_POST['submitMarks']) && $_SESSION['sessionCounting'] < $_SESSION['sessionNumber']) {
    $_SESSION['sessionCounting']++;
}

$sessionMinus =  $_SESSION['sessionCounting'];
$sessionConcat =  $_SESSION['sessionCounting'];

if ($sessionMinus == $_SESSION['initial_session']){ 
    $action = 'penalty.php'; 
} elseif($sessionMinus != $_SESSION['initial_session']){ 
    $action = $_SERVER['PHP_SELF']; 
}

$assessment = $_SESSION['id'];

if ($_SESSION['initial_session'] > 1) {
    $assessment .= $sessionConcat;
}

?> 
```

**HTML：**

```
<body>

<form id="Marks" action="<?php echo htmlentities($action); ?>" method="post">

<h1>ASSESSMENT (<?php echo $assessment ?>) <?php echo $sessionMinus ?> OF <?php echo $_SESSION['initial_session'] ?></h1>   

<input id="submitBtn" name="submitMarks" type="submit" value="Submit Marks" />

</form>

</body> 
```

**查询：**

```
$(function() {  

...

myClickHandler = function(e) {
       var ng = $('#num_groups').val();
       for (var group = 1; group <= ng; group++) {
         if (!validation(group)) return false;
       }
       if (confirm("Are you sure you want to Proceed?" + "\n")) {
         $.ajax({
           url: "insertmarks.php",
           data: $("#Marks").serialize(),
           async: false,
           type: "POST"
         });
         return true;
      } else {
        return false;
      }
    };

    $('#Marks').submit(myClickHandler);

});

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:42:04.943

好的，我想我有问题。您似乎正在定义`$_SESSION['sessionNum']`并且`session_start`只检查下一个会话`else`，`$_SESSION['sessionNum']`将始终处于活动状态。

试试这个代码：

```
if(isset($_SESSION['sessionNum'])){
    //Declare my counter for the first time

    $_SESSION['initial_session'] = $_SESSION['sessionNum'];
    $_SESSION['sessionNumber'] = intval($_SESSION['sessionNum']);
    $_SESSION['sessionCounting'] = 1;
} 

if (isset($_POST['submitMarks']) && $_SESSION['sessionCounting'] < $_SESSION['sessionNumber']) {
    $_SESSION['sessionCounting']++;
} 
```

# ios - 在 iOS5 上可见的日志在 iOS 6 上不可见（仅在设备上）

> ID：14234300
> 
> 赞同：4
> 
> 时间：2013-01-09T11:33:16.013
> 
> 标签：ios, logging, ios6

我正在使用 asl 日志框架来记录各种错误级别，然后使用一种方法显示它们。我遇到的错误很奇怪，我用来显示所有级别日志的方法适用于 iOS 5，但在 iOS 6 中它只给我返回警告级别的日志。

```
-(NSArray*) retrieveLogsWithLevel:(LoggingLevels)level_in forQueryOperation:(QueryOperations)queryOperation
{
[self.accessLock lock];

// subscribe for low memory notifications
[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(lowMemoryNotificationReceived:) 
                                             name:UIApplicationDidReceiveMemoryWarningNotification 
                                           object:nil];

// build the query
aslmsg aslQuery = asl_new(ASL_TYPE_QUERY);

const int setQueryStatus1 = asl_set_query(aslQuery, ASL_KEY_SENDER, [self usedByAppName], ASL_QUERY_OP_EQUAL);

if( (setQueryStatus1 != 0) /*|| (setQueryStatus2 != 0)*/ )
{
    return [NSArray array];
}

// convert enum to string representation
char buff[2];   
sprintf(buff, "%d", level_in);

asl_set_query(aslQuery, ASL_KEY_LEVEL, buff/*"4"*/,
              queryOperation | ASL_QUERY_OP_NUMERIC);

// execute query
aslresponse response = asl_search(NULL, aslQuery);

asl_free( aslQuery );

NSArray* results = [self extractResults:response];

// free the response
aslresponse_free(response); 

// unsubscribe from low memory notifications
[[NSNotificationCenter defaultCenter] removeObserver:self];

[self.accessLock unlock];

return results;
} 
```

我已经在模拟器上尝试了相同的代码，它会返回所有条目。只有在运行 iOS6 的设备上才会失败。

# objective-c - CPTPlotSpaceAnnotation 未添加到精确的绘图坐标

> ID：14234301
> 
> 赞同：1
> 
> 时间：2013-01-09T11:33:16.537
> 
> 标签：objective-c, annotations, core-plot

我正在使用 Core Plot 绘制条形图并尝试通过指定 anchorPlotPoint 将注释图像添加到 plotSpace。图像注释必须准确地放置在 x 轴上的精确坐标处，但是注释会偏离指定坐标。偏移量随着 x 坐标的增加而变大。

```
CPTPlotSpaceAnnotation *imageAnnotation;
CPTImage *image = [CPTImage imageWithCGImage:[UIImage imageNamed:@"dot.png"].CGImage scale:2.0f];
CPTBorderedLayer *imageLayer = [[CPTBorderedLayer alloc] initWithFrame:CGRectMake(0, 0, 1, 1)];
imageLayer.fill = [CPTFill fillWithImage:image];
imageAnnotation = [[CPTPlotSpaceAnnotation alloc] initWithPlotSpace:plotSpace anchorPlotPoint:anchorPoint];
imageAnnotation.contentLayer = imageLayer;
[_graph addAnnotation:imageAnnotation]; 
```

此示例中使用的图像是一个 1 x 1 像素，填充了一种颜色，以查看它被绘制的确切位置。我可以使用与正确绘制的注释相同的锚点坐标将散点图绘制到相同的 plotSpace 上。对此的任何帮助将不胜感激，因为这在过去 2 天里让我感到难过！

# asp.net - 无法通过 jquery ajax 发送具有抽象列表属性的模型

> ID：14234304
> 
> 赞同：0
> 
> 时间：2013-01-09T11:33:24.840
> 
> 标签：asp.net, asp.net-mvc

我正在使用 MVC asp.net 4 和 jquery。这是我的问题：我有以下模型：

```
public class PledgeModel
{
    public string name { get; set; }
    public IList<AbstractAsset> Assets { get; set; }
} 
```

一个如果它的属性是对象列表，每个对象都继承抽象类：

```
public abstract  class AbstractAsset
{
    public string commetns { get; set; }
}

public class RealEstateAsset:AbstractAsset
{
    public int CityId { get; set; }
}
public class TransportationAsset : AbstractAsset
{
    public string LicenseNumber { get; set; }
} 
```

}

这是我的“获取”操作代码：

```
 //init new Pledge  
        PledgeModel pledge=new PledgeModel();
        pledge.name = "Moses";
        pledge.Assets=new List<AbstractAsset>();

        RealEstateAsset realEstateAsset = new RealEstateAsset();
        TransportationAsset transportationAsset=new TransportationAsset();

        realEstateAsset.CityId = 1;
        transportationAsset.LicenseNumber = "7654321";

        pledge.Assets.Add(realEstateAsset);
        pledge.Assets.Add(transportationAsset);

        ViewBag.Pledge = pledge; 
```

当我在 View 上的 Json 中获得质押模型时，我得到以下 json：

{"name":"Moses","Assets":[{"CityId":1,"commetns":null}, {"LicenseNumber":"7654321","commetns":null}]};

如果我试图在 ajax 回调中发送整个模型及其资产列表：

```
 var ajaxOptions = {
                                type: 'post',
                                url: 'Home/TryInsertPledge',
                                contentType: "application/json, charset=utf-8;",
                                dataType:'json',
                                data:JSON.stringify({pledge:pledge}),
                                success: function(data) {
                                    alert('success');
                                },
                                error: function() {
                                    alert('error');
                                }
                              };
                              $.ajax(ajaxOptions); 
```

“发布”动作：

```
 [HttpPost]
   public JsonResult TryInsertPledge(PledgeModel pledge)
   {

       return Json(new {sucess = "success"});
   } 
```

出于某种原因，我收到错误（如果您在 chrome 开发人员工具中单击请求的红色错误）“无法创建抽象类”

但是如果资产清单是空的——我的承诺是正确的

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T16:46:26.750

感谢[http://maciejlis.com/asp-mvc-3-model-binder-with-abstract-class-support/](http://maciejlis.com/asp-mvc-3-model-binder-with-abstract-class-support/) 我得到了解决问题的方法：

我添加了 customBinder（完全从 maciejlis 博客复制）这个自定义绑定器根据类型属性映射资产对象（必须与资产类名称完全相同）

```
 public class EnhancedDefaultModelBinder : DefaultModelBinder
    {
        protected override object CreateModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Type modelType)
        {
            Type type = modelType;
            if (modelType.IsGenericType)
            {
                Type genericTypeDefinition = modelType.GetGenericTypeDefinition();
                if (genericTypeDefinition == typeof(IDictionary<,>))
                {
                    type = typeof(Dictionary<,>).MakeGenericType(modelType.GetGenericArguments());
                }
                else if (((genericTypeDefinition == typeof(IEnumerable<>)) || (genericTypeDefinition == typeof(ICollection<>))) || (genericTypeDefinition == typeof(IList<>)))
                {
                    type = typeof(List<>).MakeGenericType(modelType.GetGenericArguments());
                }
                return Activator.CreateInstance(type);
            }
            else if (modelType.IsAbstract)
            {
                string concreteTypeName = bindingContext.ModelName + ".Type";
                var concreteTypeResult = bindingContext.ValueProvider.GetValue(concreteTypeName);

                if (concreteTypeResult == null)
                    throw new Exception("Concrete type for abstract class not specified");

                type = Assembly.GetExecutingAssembly().GetTypes().SingleOrDefault(t => t.IsSubclassOf(modelType) && t.Name == concreteTypeResult.AttemptedValue);

                if (type == null)
                    throw new Exception(String.Format("Concrete model type {0} not found", concreteTypeResult.AttemptedValue));

                var instance = Activator.CreateInstance(type);
                bindingContext.ModelMetadata = ModelMetadataProviders.Current.GetMetadataForType(() => instance, type);
                return instance;
            }
            else
            {
                return Activator.CreateInstance(modelType);
            }
        }
    } 
```

现在剩下的就是为每个资产对象添加“类型”属性：

```
 $(pledge.Assets).each(function () {

                this.Type = (typeof this.CityId !== 'undefined') ? 'RealEstateAsset' : 'TransportationAsset';

            });

            var ajaxOptions = {
                type: 'post',
                url: 'Home/TryInsertPledge',
                dataType: 'json',
                contentType: "application/json, charset=utf-8;",
                data: JSON.stringify({ pledge: pledge }),
                success: function (data) {

                       alert('success');
                },
                error: function (xhr) {
                    alert(xhr.respnseText);
                }
            };
            $.ajax(ajaxOptions); 
```

并且资产正确地到达服务器......再次感谢你 maciejlis

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:58:13.143

在您的 Ajax 调用中，质押是从什么生成的？如果它是一个表单，您需要确保每个抽象资产的所有属性都以某种方式包含在表单中。如果您不希望这些成为用户可以编辑的输入字段，请将输入字段上的类型设置为隐藏。

希望有帮助！

# android - 将透明片段放在android中的布局上

> ID：14234308
> 
> 赞同：0
> 
> 时间：2013-01-09T11:33:37.883
> 
> 标签：android, layout

我有一个 main.xml 布局，如下所示：

```
<RelativeLayout
  android:layout_width="match_parent"
  android:layout_height="match_parent" >

   <FrameLayout>/FrameLayout>

   <RelativeLayout></RelativeLayout>

   <fragment></fragment>

</RelativeLayout> 
```

现在，我必须将透明片段/布局放在主布局上，这样我就可以在这里放置一些控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:54:11.573

```
<FrameLayout
 android:layout_width="match_parent"
 android:layout_height="match_parent" >

   <fragment></fragment>
   <RelativeLayout>
      <!-- Your controllers go here -->
   </RelativeLayout>
 </FrameLayout> 
```

框架 laoyut 将允许相对布局和片段彼此重叠。在片段授予控件可见后添加相对布局。

# c# - Castle Windsor WCF 设施未设置用户名凭据

> ID：14234312
> 
> 赞同：2
> 
> 时间：2013-01-09T11:33:49.787
> 
> 标签：c#, wcf, castle-windsor

我不明白为什么 WCF 工具无法在我的客户端配置上设置用户名凭据。谁能看到我哪里出错了？

从容器中解析 IService 时，ClientCredentials.UserName.UserName 和 Password 为空。端点等价物也是如此。根本没有设置任何凭据引用，并且都保持为空值。

```
container
   .Register(
        Component
            .For<IService>()
            .ImplementedBy<ServiceClient>()
                .AsWcfClient(
                     new DefaultClientModel
                          {
                              Endpoint = WcfEndpoint
                                  .FromConfiguration("binding"),
                          }
                 .Credentials(
                        new UserNameCredentials(
                            "username", 
                            "password")))); 
```

绑定和端点配置是从 app.config 文件中正确获取的——这纯粹是我需要解决的身份验证。

为了完整性：

```
 <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="binding" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="TransportWithMessageCredential">
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://___________________" binding="basicHttpBinding" bindingConfiguration="binding" contract="Namespace.Class" name="binding" />
    </client>
  </system.serviceModel> 
```

# wpf - DateTime WPF 的奇怪行为 - 跨时区的 WCF

> ID：14234315
> 
> 赞同：2
> 
> 时间：2013-01-09T11:34:07.223
> 
> 标签：wpf, wcf, datetime, datetimepicker

我有一个 WPF 客户端，它使用来自 WCF 服务的 DateTime 检索数据。

当我将计算机置于罗马时间 (+1) 时，我的结果出现了一些奇怪的行为。

**我的 WCF 方法**

```
 public IEnumerable<BookingType> BookingsForFollowingDayReport(DateTime date) {

        el = new ErrorLogging();
        el.CreateLog(db, new Entities.ErrorType() { DateLogged = DateTime.Now, Type = "DTE", Message = "Report Date: " + date.ToString() });

        var a = (from b in db.GetTable<BookingType>()
                 where b.TourStartDateTime >= date.Date && b.TourStartDateTime <= date.AddDays(1).Date
                 orderby b.TourStartDateTime
                 select b);

        if (a.Count() > 0) {
            el.CreateLog(db, new Entities.ErrorType() { DateLogged = DateTime.Now, Type = "DTE", Message = "Report Date: " + a.FirstOrDefault().TourStartDateTime });
        }

        return a;
    } 
```

该服务在某处的某个 Web 服务器上在线，现在我从我的 WPF 客户端调用它。请注意我的方法中的日志记录。

**我的呼叫代码**

```
 public static async Task<Bookings> GetBookingsReport(DateTime forWhen) {
        Bookings bookings = new Bookings();
        if (MyNetwork.IsOnline) {
            var bookingTypes = new ReportsServiceClient.BookingType[0];

                //forWhen = new DateTime(2013, 01, 10);
                bookingTypes = await ReportsServiceClient.BookingsForFollowingDayReportAsync(forWhen);

            bookings.TourBookings = (from b in bookingTypes
                                     where b.RecordType == "H"
                                     select new Booking(b)).ToList();

        }
        return bookings;
    } 
```

**现在对于奇怪...**

我使用 ' 值从后面的 XAML 代码中调用'调用代码'，`DatePicker`如下所示：`await DataManager.GetBookingsReport(datePicked.SelectedDate.Value);`我将通过代码调试到`BookingsForFollowingDayReportAsync`被调用的位置。

变量`forWhen`实际上是 10/01/2013，太棒了！..accept 我在 WCF 服务中的日志记录代码说 09/01/2013 已发送通过。所以然后我取消注释我`forWhen`手动设置的行 - 只是为了测试 - 它有效，记录器说 10/01/2013。

我已经测试了几天，明天的日期总是有问题，如果我在我的 DatePicker 中选择三天（过去或未来），例如记录正确的日期。

如果我将时区设置回英国格林威治标准时间，这个错误也根本不会发生。

我有一个想法，它可能与日期选择器有关，因为`forWhen`手动设置可以解决问题，但这是怎么发生的呢？

**编辑 1** 我现在已经设法解决了这个问题，通过`forWhen`手动设置，使用`forWhen`s Values 像这样（看起来很荒谬）：

```
forWhen = new DateTime(forWhen.Year, forWhen.Month, forWhen.Day); 
```

我对这个问题和我找到的解决方案感到困惑......有什么解释吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T12:22:01.280

默认情况下，WCF`DateTime`根据本地时区对对象进行序列化和反序列化。这意味着`DateTime`在您的情况下反序列化时，来自客户端的客户端会在服务器上减少一小时。显然您的时间部分是 0（午夜），这样就可以解释昨天的日期。

一种解决方案是在将 DateTime 变量传递给服务之前显式设置`DateTime.Kind`为，如下所示：`DateTimeKind.Unspecified`

```
DateTime forWhenSvcArg = DateTime.SpecifyKind(forWhen, DateTimeKind.Unspecified); 
```

这就是你通过调用构造函数设置 forWhen 时得到的结果。

# windows-phone-7 - wp7中控制后退按钮和开始按钮

> ID：14234321
> 
> 赞同：0
> 
> 时间：2013-01-09T11:34:30.507
> 
> 标签：windows-phone-7, location, back-button-control

按下后退按钮或按下开始按钮后，进程能否继续。我正在使用 GeoCoordinateWatcher 的位置更改事件。在按下返回或开始按钮后，我仍想处理此事件。我能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:30:44.717

点击开始按钮后，进程将暂停，您可以在下一次启动时开始。意思是您可以覆盖后键过程。

```
 protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
 {
   //cancels the navigation.
   e.Cancel = true;
 } 
```

# php - htaccess 文件与重写工作在任何域

> ID：14234322
> 
> 赞同：1
> 
> 时间：2013-01-09T11:34:31.200
> 
> 标签：php, .htaccess

我试图阻止对特定文件和特定目录中的文件的访问，并且仅在服务器本身包含或调用它们时才允许访问它们。

目前我在“http://www.thedomain.com/.htaccess”中有一个如下所示的 htaccess 文件，以阻止对“http://www.thedomain.com/specific_file.php”的访问

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_REFERER} !^http://(www.)?thedomain.com/.*$ [NC]
RewriteRule specific_file.php$ / [R=302,L] 
```

以及下面显示的“http://www.thedomain.com/thedir/.htaccess”中的 htaccess 文件，以阻止访问“http://www.thedomain.com/thedir/”中的所有文件

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_REFERER} !^http://(www.)?thedomain.com/.*$ [NC]
RewriteRule .(gif|jpg|png|css|js|php|inc)$ / [R=302,L] 
```

我希望能够在多个域上使用这些 htaccess 文件，而无需更改列出的域名。那可能吗？

顺便说一句，这段代码是拼凑在一起的，所以任何关于改进它的建议都将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:40:58.120

尝试使 RewriteCond 的最后一部分使用相对 URL 而不是绝对 URL，那么它应该可以跨任何域工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:47:34.553

检查引用者是不安全的方式我建议您在这种情况下将您的特定文件上传到根路径上方的一层，只有您有权访问上传的文件（直接寻址）并且攻击者无权访问它

# ruby-on-rails - 如何升级到 Rails 3.2.11

> ID：14234324
> 
> 赞同：1
> 
> 时间：2013-01-09T11:34:39.270
> 
> 标签：ruby-on-rails

我通过命令升级

```
gem install rails 
```

它显示 1 个 gem **rails 3.2.11 安装成功**。但是当我输入时`rails -v`，版本仍然是 3.2.9。

谁能告诉我如何升级rails？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T11:40:05.927

除了将 gem 安装到您的系统之外，您还必须通过以下方式将其包含在您的 Gemfile 中：

```
gem 'rails', '3.2.11' 
```

然后运行命令

```
bundle update rails 
```

从终端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:39:49.697

我猜你正在使用捆绑器。如果你这样做，你可以做一个`bundle update rails`然后再试一次。

# sql-server - 在sql中重新排列逗号分隔的值

> ID：14234326
> 
> 赞同：1
> 
> 时间：2013-01-09T11:34:49.233
> 
> 标签：sql-server, sql-server-2008

嗨，我有两张表，一张有县信息，另一张有 RowData

Country 表看起来像

```
Country_ID  Region_ID   Country_Name              Abbreviation Priority
----------- ----------- ------------------------- ------------ -----------
1           1           United States             USA          1
2           1           US                        USA          1
3           1           Canada                    CA           2
4           2           United Kingdom            UK           1
5           2           Germany                   DE           1
6           2           France                    FR           1
7           2           Italy                     IT           1
8           2           Spain                     ES           1
9           2           The Netherlands           NL           1
10          2           Poland                    PL           2
11          2           Russia                    RU           2 
```

和 RowData 就像

```
Tr_ID       Countrys
----------- --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
729541      Germany,United Kingdom
729553      Italy,Poland,Russia,Spain
729580      Austria,Finland,France,Germany,Ireland,Italy,Poland,Portugal,Romania,Russia,Slovakia,Spain,Sweden,Switzerland,The Netherlands,United Kingdom
729726      Italy,Spain,United Kingdom
729737      Austria,United Kingdom 
```

我想根据县表中给出的优先级重新排列县

优先级 1 县应该出现在第一个铰接国家下一个用逗号重复 请帮我解决这个问题

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:51:06.827

[SQL小提琴](http://sqlfiddle.com/#!3/e099b/3)

**MS SQL Server 2008 架构设置**：

```
create table Country
(
  Country_ID int,
  Region_ID int,
  Country_Name varchar(25),
  Abbreviation varchar(5),
  Priority int 
);

insert into Country values
(1 ,  1,   'United States',   'USA', 1),
(2 ,  1,   'US',              'USA', 1),
(3 ,  1,   'Canada',          'CA ', 2),
(4 ,  2,   'United Kingdom',  'UK ', 1),
(5 ,  2,   'Germany',         'DE ', 1),
(6 ,  2,   'France',          'FR ', 1),
(7 ,  2,   'Italy',           'IT ', 1),
(8 ,  2,   'Spain',           'ES ', 1),
(9 ,  2,   'The Netherlands', 'NL ', 1),
(10,  2,   'Poland',          'PL ', 2),
(11,  2,   'Russia',          'RU ', 2)

create table RowData
(
  Tr_ID int,
  Countrys varchar(200)
)

insert into RowData values
(729541,  'Germany,United Kingdom'),
(729553,  'Italy,Poland,Russia,Spain'),
(729580,  'Austria,Finland,France,Germany,Ireland,Italy,Poland,Portugal,Romania,Russia,Slovakia,Spain,Sweden,Switzerland,The Netherlands,United Kingdom'),
(729726,  'Italy,Spain,United Kingdom'),
(729737,  'Austria,United Kingdom') 
```

**查询 1**：

```
select R.Tr_ID,
       (
       select ','+C.Country_Name
       from Country as C
       where ','+R.Countrys+',' like '%,'+C.Country_Name+',%'
       order by C.Priority
       for xml path(''), type
       ).value('substring(text()[1], 2)', 'varchar(200)') as Countrys
from RowData as R 
```

**[结果](http://sqlfiddle.com/#!3/e099b/3/0)**：

```
|  TR_ID |                                                                COUNTRYS |
------------------------------------------------------------------------------------
| 729541 |                                                  United Kingdom,Germany |
| 729553 |                                               Italy,Spain,Poland,Russia |
| 729580 | United Kingdom,Germany,France,Italy,Spain,The Netherlands,Poland,Russia |
| 729726 |                                              United Kingdom,Italy,Spain |
| 729737 |                                                          United Kingdom | 
```

# windows-phone - 如何解析 Json 链接 Windows Phone 8

> ID：14234330
> 
> 赞同：0
> 
> 时间：2013-01-09T11:35:03.337
> 
> 标签：windows-phone, windows-phone-8

我尝试了所有 Json 解析示例，但它们不起作用。

有没有人有从 Windows Phone 8 的网络链接解析的正确示例 Json ？

请帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:57:02.240

1）为json对象生成类（[在线JSON类生成器](http://jsonpack.com/)）

2）调用链接和下载数据。

3）使用 JsonConvert 或其他类解析数据。（[示例](https://stackoverflow.com/questions/2246694/how-to-convert-json-object-to-custom-c-sharp-object)）

这是一个示例：

[http://smallandmighty.net/blog/using-json-with-windows-phone](http://smallandmighty.net/blog/using-json-with-windows-phone)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T22:01:49.730

我个人更喜欢[Json.NET](http://james.newtonking.com/projects/json-net.aspx)。它重量轻且相对容易，尤其是在您通读文档时。考虑到需要考虑不同的场景，很难回答“如何解析”。我认为 Norbert 发布的资源 #1 很有帮助，我现在将要使用的东西，考虑到创建类，我知道它通常是最长和最单调的部分。

# magento - Magento 如何在鼠标悬停在我的购物车链接上显示购物车信息

> ID：14234337
> 
> 赞同：1
> 
> 时间：2013-01-09T11:35:21.937
> 
> 标签：magento, magento-1.7

当用户将鼠标悬停在标题上的“我的购物车”链接上时，我想显示购物车信息。有什么办法可以显示这些东西。

因此，用户可以轻松检查他们的购物车详细信息。如果是，那怎么可能！

等待您的善意回应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:23:04.990

一种方法是`checkout/cart_sidebar`在布局 xml 中向标题添加一个块。您可能还想为此块创建一个单独的模板，基于`checkout/cart/sidebar.phtml`.

然后，当用户将鼠标悬停在“我的购物车”链接上时，您可以使用 jQuery 显示/隐藏购物车的内容。

# sql - 集合类型作为游标参数

> ID：14234338
> 
> 赞同：1
> 
> 时间：2013-01-09T11:35:29.727
> 
> 标签：sql, oracle, plsql, cursor

我需要做一个接收列表作为参数的游标。我试过这个：

```
declare

type array_t is table of varchar(50); -- //also tried varray(10) instead of table

cursor c_cursor (p_list array_t) is
select 
    field_1
from 
    table_1
where 
    field_2 in p_list;

a_list array_t;

begin
    a_list := array_t('aaa',
        'bbb',
        'cccc',
        'ddd');

    for v_cursor in c_cursor(a_list) loop
        dbms_output.put_line(v_cursor.field_1);
    end loop;
end; 
```

我收到以下错误

```
ORA-06550: line 11, column 21:
PLS-00642: local collection types not allowed in SQL statements 
```

我已经阅读了有关使用该`CREATE OR REPLACE`方法的信息，但在这种情况下我不能使用`CREATE OR REPLACE`（实际上数据库是只读的）。

有没有可能的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:53:21.697

您需要一种 SQL 类型而不是 pl/sql 类型，然后使用`table`语法来使用它。

正如您所说，您无法创建一个，请尝试在 DBMS_OUTPUT 上内置一个。

```
SQL> create table table_1(field_1 varchar2(20), field_2 varchar2(20));

Table created.

SQL> insert into table_1 values ('test', 'aaa');

1 row created.

SQL> insert into table_1 values ('test2', 'cccc');

1 row created.

SQL> insert into table_1 values ('test3', 'x');

1 row created.

SQL> commit;

Commit complete.

SQL> set serverout on
SQL> declare
  2  cursor c_cursor (p_list sys.DBMSOUTPUT_LINESARRAY) is
  3  select /*+ cardinality(p, 10) */
  4      field_1
  5  from
  6      table_1 t
  7      inner join table(p_list) p
  8              on t.field_2 = p.column_value;
  9
 10  a_list sys.DBMSOUTPUT_LINESARRAY;
 11
 12  begin
 13      a_list := sys.DBMSOUTPUT_LINESARRAY('aaa',
 14          'bbb',
 15          'cccc',
 16          'ddd');
 17
 18      for v_cursor in c_cursor(a_list) loop
 19          dbms_output.put_line(v_cursor.field_1);
 20      end loop;
 21  end;
 22  /
test
test2 
```

提示是`/*+ cardinality(p, 10) */`大致告诉 Oracle 数组中有多少行。输入一个代表数字，否则 oracle 将假定数组包含@ 8k 行，这可能会导致计划不佳。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:40:57.130

您需要`type`使用查询单独创建

```
CREATE OR REPLACE type array_t as table of varchar2(50); 
```

请在那之后尝试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:10:40.220

这可能会有所帮助 - Oracle PL/SQL：

```
DECLARE
  Type t_EmpNoArr IS VARRAY(20000) OF NUMBER(10) ;
  v_RetVal  t_EmpNoArr:= t_EmpNoArr();
  --
  FUNCTION retArray return t_EmpNoArr
  IS
    v_empnoArr t_EmpNoArr:= t_EmpNoArr();
  BEGIN
    FOR i IN ( SELECT empno FROM scott.emp )
    LOOP
      v_empnoArr.extend() ;
      v_empnoArr(v_empnoArr.count):= i.empno ;
    END LOOP;
  --
    FOR j IN 1..v_empnoArr.COUNT() LOOP
       DBMS_OUTPUT.PUT_LINE(v_empnoArr(j));
    END LOOP;
  --
  RETURN v_empnoArr;
 END retArray;
 --
 BEGIN
   v_RetVal:= retArray();
 END;
 / 
```

# android - 无法解决错误

> ID：14234339
> 
> 赞同：1
> 
> 时间：2013-01-09T11:35:31.387
> 
> 标签：android, bluetooth

R.java 生成但 JAVA 文件中的布局和字符串仍然显示以下问题

安慰....

```
button_scan cannot be resolved or is not a field    DeviceListScan.java 

device_list cannot be resolved or is not a field    DeviceListScan.java 
etc.... 
```

下面是 R.java 文件，所有内容都在其中生成，但仍有问题，即对于所有布局和字符串，我正在访问它说无法解析或不是 feild....

r.java 文件

```
 package com.android.settings.bluetooth;

public final class R {
   public static final class attr {
}
public static final class drawable {
    public static final int ic_launcher=0x7f020000;
}
public static final class id {
    public static final int button_scan=0x7f060006;
    public static final int new_devices=0x7f060005;
    public static final int paired_devices=0x7f060003;
    public static final int title_left_text=0x7f060000;
    public static final int title_new_devices=0x7f060004;
    public static final int title_paired_devices=0x7f060002;
    public static final int title_right_text=0x7f060001;
}
public static final class layout {
    public static final int custom_title=0x7f030000;
    public static final int device_list=0x7f030001;
    public static final int device_name=0x7f030002;
}
public static final class string {
    public static final int app_name=0x7f040000;
    public static final int bt_not_enabled_leaving=0x7f040003;
    public static final int button_scan=0x7f04000d;
    public static final int discoverable=0x7f040010;
    public static final int insecure_connect=0x7f04000f;
    public static final int none_found=0x7f04000a;
    public static final int none_paired=0x7f040009;
    public static final int not_connected=0x7f040002;
    /**   DeviceListActivity 
     */
    public static final int scanning=0x7f040007;
    /**  Options Menu 
     */
    public static final int secure_connect=0x7f04000e;
    public static final int select_device=0x7f040008;
    /**   BluetoothChat 
     */
    public static final int send=0x7f040001;
    public static final int title_connected_to=0x7f040005;
    public static final int title_connecting=0x7f040004;
    public static final int title_not_connected=0x7f040006;
    public static final int title_other_devices=0x7f04000c;
    public static final int title_paired_devices=0x7f04000b;
}
public static final class style {
    /** 
    Base application theme, dependent on API level. This theme is replaced
    by AppBaseTheme from res/values-vXX/styles.xml on newer devices.

        Theme customizations available in newer API levels can go in
        res/values-vXX/styles.xml, while customizations related to
        backward-compatibility can go here.

     */
    public static final int AppBaseTheme=0x7f050000;
    /**  Application theme. 
  All customizations that are NOT specific to a particular API-level can go here. 
         */
        public static final int AppTheme=0x7f050001;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:39:18.723

尝试项目-> 清理...

如果它不起作用，您的 XML 中可能有一个未显示的错误。Eclipse 有时很奇怪。

另请参阅您尚未导入 android.R。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:40:41.543

只需尝试`Project>Clean`您的项目并`Project>Build`再次尝试。

并且还要确保你没有`import android.R;`在你的活动中导入。

# python - 使用 python 使用 gtk 3 构建 gtkbuilder 文件

> ID：14234340
> 
> 赞同：1
> 
> 时间：2013-01-09T11:35:34.057
> 
> 标签：python, gtk

我目前正在关注[本](http://www.micahcarrick.com/gtk-glade-tutorial-part-3.html)教程。[当我运行相应的 python 文件时，我遇到了与此处](https://mail.gnome.org/archives/vala-list/2012-June/msg00012.html)相同的问题（尽管我使用的是 python，而不是 Vala）。

所以显然我必须告诉 python 使用 gtk3，但我该怎么做呢？

我正在使用 Ubuntu 12.04、python2.7、glade3.14。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:58:09.787

那很奇怪。您可以使用 GtkHBox 或 GtkVBox 作为解决方法。然而，这两个最近已被弃用（在 GTK 3.2 中），转而支持[GtkGrid](http://developer.gnome.org/gtk3/stable/GtkGrid.html)。此外，您可能想看看官方的[Python GTK 3 教程](http://python-gtk-3-tutorial.readthedocs.org/en/latest/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T00:44:31.230

虽然我没有找到问题的原因，但我通过简单地将 my.glade 的内容复制到 another.glade 中，在 glade 中打开，保存并在其上运行脚本来让它工作。我可能犯了一些我无法再重现的错误，哦，好吧。

感谢 liberforce，因为发布的教程可以更好地理解问题的“gtk+ 方面”，而到目前为止我只专注于 glade。

# ember.js - 如何在 EmberJS 中为少数情况设置可观察但不运行可观察函数的属性

> ID：14234341
> 
> 赞同：11
> 
> 时间：2013-01-09T11:35:34.907
> 
> 标签：ember.js

无论如何，我们可以避免在少数情况下运行可观察的代码吗？

**我怎么试过？** 我发现避免的唯一方法是将新属性作为标志添加到视图中，如果在运行可观察方法代码之前检查这些属性。

这是提供基本观察者功能 **HTML的基本**[jsfiddle链接](http://jsfiddle.net/codejack/7TueU/3/)

 **```
<script type="text/x-handlebars" data-template-name="application">
  {{view MyApp.MyContainerView name="Santa Claus"}}
</script>
<script type="text/x-handlebars" data-template-name="foo">
  {{view.testProp}}
</script> 
```

**JS**

```
MyApp = Ember.Application.create({
    autoinit: false
});

MyApp.router = Ember.Router.create({
    root: Ember.Route.extend({
        index: Ember.Route.extend({
            route: '/'
        })
    })
});

MyApp.ApplicationController = Ember.Controller.extend({});

MyApp.MyContainerView = Em.ContainerView.extend({
    childViews: ['foo'],

    foo: Em.View.extend({
       testProp: 100,
  testPropObservable: function(){
    console.log("Prop Observed");
  }.observes('testProp'),
        init: function() {
            this._super();
            this.set('testProp', 200);//i want to avoid obeserver here
        },
        templateName: 'foo'
    })
});

MyApp.initialize(MyApp.router); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T13:26:02.050

一种替代方法是在运行时添加/删除观察者。`this.addObserver`鉴于上面的示例，您可以通过在初始化值后调用来防止观察者在 init() 期间被触发

```
 foo: Em.View.extend({
       testProp: 100,
       testPropDidChange: function(){
         console.log("Value changed to: ", this.get('testProp'));
       },
       init: function() {
         this._super();
         this.set('testProp', 200);//i want to avoid obeserver here
         this.addObserver('testProp', this.testPropDidChange)
        },
        templateName: 'foo'
    }) 
```

有关工作示例，请参见此 jsfiddle：http: [//jsfiddle.net/NSMj8/1/](http://jsfiddle.net/NSMj8/1/)

ember 指南中有一个很好的观察者概述：http: [//emberjs.com/guides/object-model/observers/](http://emberjs.com/guides/object-model/observers/)

有关如何添加/删除观察者的更多信息，请参阅 Ember.Observable 的 API 文档：http: [//emberjs.com/api/classes/Ember.Observable.html](http://emberjs.com/api/classes/Ember.Observable.html)**

# c++ - 等待多个线程（Posix 线程，c++）

> ID：14234344
> 
> 赞同：6
> 
> 时间：2013-01-09T11:35:51.420
> 
> 标签：c++, synchronization, pthreads

考虑以下情况：

我有一个由多个线程使用的对象 foo，它可能会或可能不会重复调用 foo 上的方法 bar()。

并行执行多次 bar() 是非常好的（并且是期望的），因为它永远不会改变 foo 的状态。

当我需要从外部（从另一个线程，而不是从“工作”线程之一）更改 foo 的状态时，就会出现问题 - 我如何以某种方式锁定 foo，以便调用线程阻塞直到最后一个工作线程用 bar() 完成，所有工作线程都会在 bar() 处阻塞，直到我再次释放 foo？

显然，我不能只使用在 bar() 执行期间保持锁定的互斥锁，因为那样我就不会有并发性。

有任何想法吗？或者对于这些类型的问题有更好的设计吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T11:44:23.260

我不确定你将如何实现，没有*工作人员*使用 foo 让*writer*更新它，但如果不担心，那么只需使用[读/写互斥锁](http://linux.die.net/man/3/pthread_rwlock_wrlock)（*工作人员*获取读锁，*编写者*获取写锁）。

值得一提的是，您可能需要考虑制作 foo Copy-on-Write。这样，您将使同步开销接近于零。您可以[原子地使用 shared_ptr](http://en.cppreference.com/w/cpp/memory/shared_ptr/atomic)来实现这一点。

# c++ - OpenGL：将 VBO 与 std::vector 一起使用

> ID：14234361
> 
> 赞同：2
> 
> 时间：2013-01-09T11:36:58.097
> 
> 标签：c++, opengl, pointers, stdvector, vbo

我正在尝试加载一个对象并使用 VBO 和 glDrawArrays() 来渲染它。问题是一个简单的浮点指针`float f[]={...}`在我的情况下不起作用，因为我通过了这个指针可以存储的值的限制。所以我的解决方案是使用向量。而且它不起作用...

这是我的代码：

```
unsigned int vbo;
vector<float*> vert;

...
vert.push_back(new float(i*size));
vert.push_back(new float(height*h));
vert.push_back(new float(j*size));
...

glGenBuffers(1, &vbo);
glBindBuffer(GL_ARRAY_BUFFER, vbo);
glBufferData(GL_ARRAY_BUFFER, sizeof(vert), &vert, GL_STATIC_DRAW);
glBindBuffer(GL_ARRAY_BUFFER, 0); 
```

并渲染：

```
glBindBuffer(GL_ARRAY_BUFFER, vbo);
glEnableClientState(GL_VERTEX_ARRAY);
glVertexPointer(3, GL_FLOAT, 0, 0);
glDrawArrays(GL_TRIANGLE_STRIP, 0, 3);
glDisableClientState(GL_VERTEX_ARRAY);
glBindBuffer(GL_ARRAY_BUFFER, 0); 
```

我在`glBufferData()`第三个参数的位置有问题`const GLvoid *data`。我正在通过，`&vert`但它不起作用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-09T11:39:14.857

你想做：

```
unsigned int vbo;
vector<float> vert;

...
vert.push_back(i*size);
vert.push_back(height*h);
vert.push_back(j*size);
...

glGenBuffers(1, &vbo);
glBindBuffer(GL_ARRAY_BUFFER, vbo);
glBufferData(GL_ARRAY_BUFFER, vert.size() * sizeof(float), vert.data(), GL_STATIC_DRAW);
glBindBuffer(GL_ARRAY_BUFFER, 0); 
```

[阅读文档](http://en.cppreference.com/w/cpp/container/vector)总是好的。另外，我建议您选择一本好的 C++ 书籍，这可能是您避免犯此类错误的好方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T12:02:17.687

记得检查你是否有 C++11 或`vert.data`不会编译。

如果您查看`std::vector`文档，您会发现`std::vector::data()`它带有 C++11 标记。

[http://www.cplusplus.com/reference/vector/vector/data/](http://www.cplusplus.com/reference/vector/vector/data/)

如果您没有 C++11，您可以执行以下操作：

```
unsigned int vbo;
vector<float> vert;

...
vert.push_back(i*size);
vert.push_back(height*h);
vert.push_back(j*size);
...

glGenBuffers(1, &vbo);
glBindBuffer(GL_ARRAY_BUFFER, vbo);
glBufferData(GL_ARRAY_BUFFER, vert.size(), &vert[0], GL_STATIC_DRAW);
glBindBuffer(GL_ARRAY_BUFFER, 0); 
```

引用向量的第一个元素会为您提供指向数据本身的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-31T12:04:18.967

我可能有点晚了，但是对于其他需要帮助的人，您必须从数据的开头获取一个指针，可以使用`&vert.front()`或`&vert[0]`

所以它应该看起来像这样：

```
glBufferData(GL_ARRAY_BUFFER, vert.size() * sizeof(float), &vert.front(), GL_STATIC_DRAW); 
```

# sql - 从表中评估 XQuery/XPath 表达式

> ID：14234363
> 
> 赞同：1
> 
> 时间：2013-01-09T11:37:18.530
> 
> 标签：sql, sql-server, xml, xpath, xquery

我有一个包含 XQuery 表达式的表。我想为给定的 XML 数据结构评估每一行的表达式。我正在尝试这个。

```
DECLARE @somexml xml
SET @somexml = '<root><nodeA>true</nodeA><nodeB>false</nodeB></root>'

SELECT
    @somexml.query('sql:column("af.Expression")' ) AS Fee,
    [af].Expression 
FROM 
    [AerialFees] af 
```

该`Expression`列包含以下类型的值`NVARCHAR(MAX)`：-`xs:boolean(/root[1]/nodeA[1])`

执行此操作时`SELECT`，不会对表达式进行评估，而是返回表达式本身（顺便说一句，XML 类型）

```
Fee                        Expression
==================================================
xs:boolean(/root[1]/nodeA[1])    xs:boolean(/root[1]/nodeA[1]) 
```

如果替换`@somexml.query('sql:column("af.Expression")' )`为实际表达式`@somexml.query('xs:boolean(/root[1]/nodeA[1])' )`，则表达式得到正确评估。

但我怎样才能让上述工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:33:05.203

您需要动态构建查询，如下所示：

```
DECLARE @somexml XML
SET @somexml = '<root><nodeA>true</nodeA><nodeB>false</nodeB></root>'

DECLARE @Fees Table
(
    RowNum int,
    Expression nvarchar(max)
)   

INSERT INTO @Fees
SELECT 
    RowNum = ROW_NUMBER() OVER(ORDER BY af.idAerialFee),
    [af].Expression 
FROM 
    [AerialFee] af 

DECLARE @MaxRownum INT
SET @MaxRownum = (SELECT MAX(RowNum) FROM @Fees)

DECLARE @Iter INT
SET @Iter = (SELECT MIN(RowNum) FROM @Fees)

DECLARE @SQL NVARCHAR(MAX)

WHILE @Iter <= @MaxRownum
BEGIN
    -- Get XQuery
    SELECT @SQL = 'SELECT @somexml.query(''' + af.Expression + ''') AS Fee'
    FROM @Fees af
    WHERE RowNum = @Iter

    -- Evaluate XQuery
    EXEC sp_executesql @SQL, N'@somexml xml', @somexml

    -- Get next rows number
    SET @Iter = @Iter + 1
END 
```

我知道没有其他方法可以将 XPath 表达式提供给 SQL Server 中的查询。

您可以尝试直接添加表达式：

```
select @somexml.query(af.Expression)
from AerialFees as af 
```

但这会给你错误信息

```
Msg 8172, Level 16, State 1, Line 27
The argument 1 of the XML data type method "query" must be a string literal. 
```

或者您可以尝试使用`sql:column`（如您所做的那样），但这只是返回列中的值。它不会尝试评估表达式。

`xsl:evaluate`正如[Dimitre Novatchev所建议的，](https://stackoverflow.com/questions/14234363/evaluating-xquery-xpath-expressions-from-table/14236391#comment19751672_14234363) [SQL Server](http://msdn.microsoft.com/en-us/library/ms189075.aspx)不支持。

# android - 捕获包含屏幕外元素的 Horizo ntalScrollView 的屏幕截图

> ID：14234371
> 
> 赞同：1
> 
> 时间：2013-01-09T11:37:50.527
> 
> 标签：android, screen-capture, horizontalscrollview

我尝试了很多方法。我能够截取整个屏幕的截图，但我的要求是截取整个 Horizo​​ntalScrollView 并将其保存为图像文件。这是我正在使用的示例 XML 布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <HorizontalScrollView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/hsv" >

        <LinearLayout 
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:orientation="horizontal"
            android:id="@+id/ll">

             <Button 
                android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:onClick="click"
            android:id="@+id/b"
            android:text="capture"
            android:layout_margin="20dp"/> 

            <ImageView 
                android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:id="@+id/img1"
            android:src="@drawable/plug1"
            android:layout_margin="20dp"/>

            <ImageView 
                android:layout_height="wrap_content"
            android:layout_width="200dp"
            android:id="@+id/img2"
            android:src="@drawable/plug3"
            android:layout_margin="20dp"/>

        </LinearLayout>

    </HorizontalScrollView>

</RelativeLayout> 
```

活动代码：

```
Button b; 
    ImageView img1, img2; 
    LinearLayout ll; View v; 
    HorizontalScrollView s; 
    int h,w;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        b = (Button)findViewById(R.id.b);
        img1 = (ImageView)findViewById(R.id.img1);
        img2 = (ImageView)findViewById(R.id.img2);

        ll = (LinearLayout)findViewById(R.id.ll);

        s = (HorizontalScrollView) findViewById(R.id.hsv);
        s.setDrawingCacheEnabled(true);

    }

     //Fired onClick of the button
       public void click(View v) {
           shoot();
       }

    // To capture layout, create a bitmap and replace an image with the resulting bitmap.
    public void shoot() {

        s.measure(MeasureSpec.UNSPECIFIED, MeasureSpec.UNSPECIFIED);

        int totalHeight = s.getMeasuredHeight();
        int totalWidth = s.getMeasuredWidth();

        s.layout(0, 0, totalHeight, totalWidth);    
        s.buildDrawingCache(true);

        Bitmap b = Bitmap.createBitmap(s.getDrawingCache());             
        s.setDrawingCacheEnabled(false);

        img1.setImageBitmap(b);     
    } 
```

如果我不使用 MeasureSpec，我不会得到正确的布局高度和宽度。

OnClick of the button 我只得到半个按钮的图像。我认为这正在发生，因为我没有使用 ViewTreeObserver。但是当我使用 ViewTreeObserver 时，我没有得到结果。此外，当我单击按钮两次时应用程序崩溃 - 位图中的 NullPointerException。

我已经尝试了 StackOverFlow 上几乎所有可用的东西。请帮助我找到一种方法来做到这一点。甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T05:30:29.870

Found a SIMPLE way to do it.

XML

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:layout_gravity="center_vertical">

     <HorizontalScrollView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            >

         <LinearLayout 
                  android:layout_width="wrap_content"
                  android:layout_height="fill_parent"
                  android:orientation="horizontal"
                  android:id="@+id/def"
                  >

    <Button 
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:text="capture"
        android:onClick="click"/>

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <ImageView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/black"
        android:id="@+id/img"/>

    <ImageView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/a"/>

    </LinearLayout>

    </HorizontalScrollView>

</LinearLayout> 
```

Acivity Code:

```
public class CaptureBeyondActivity extends Activity {
/** Called when the activity is first created. */

LinearLayout def;
ImageView img;
HorizontalScrollView hsv;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

def = (LinearLayout)findViewById(R.id.def);
img = (ImageView)findViewById(R.id.img);

}

public void click(View v) {
Bitmap bitmap;
def.setDrawingCacheEnabled(true);
def.buildDrawingCache(true);

        bitmap = Bitmap.createBitmap(def.getWidth(), def.getHeight(),
                Config.ARGB_8888);
        def.layout(0, 0, def.getLayoutParams().width,
                def.getLayoutParams().height);
        Canvas c = new Canvas(bitmap);
        def.draw(c);

def.setDrawingCacheEnabled(false);

if(bitmap!=null){
    img.setImageBitmap(bitmap);
    img.invalidate();
}
}} 
```

Here I have placed some elements in a HorizontalScrollView. OnClick of the button a screenshot is taken and the second image is replaced by the screenshot taken. It takes screenshots of the offscreen elements also. You can further enhance the code and save the final bitmap image on SD card.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:44:54.407

这是我第二次看到同样的问题（是的，这里是堆栈溢出），简单的答案是：没有简单的方法可以做到！

所有保存屏幕截图的方法都使用相同的原理，即启用对位图缓存的绘制并获取此位图。但如果视图不在屏幕上，它们将不会被绘制。

您可以创建一个非常复杂的系统来自动滚动水平屏幕视图，拍摄多个屏幕截图并将不同的位图拼接在一起。或者可能是一个非常复杂的系统，它会创建一个无限宽度的画布并要求布局在其上进行绘制，但在这种情况下您可能会耗尽内存。但正如我所说，这些都不是一项简单的任务。

# android - 无法使用 Maven-Android-Plugin 构建 android 项目

> ID：14234378
> 
> 赞同：3
> 
> 时间：2013-01-09T11:37:57.517
> 
> 标签：android, maven, maven-plugin

我只是想使用 Maven-Android-Plugin 构建我的 android 项目。但它给出了以下错误：

```
F:\Android\AsyncTaskSample>mvn clean install
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building AsyncTaskSample 1.0
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ asynctasksample ---
[INFO] Deleting F:\Android\AsyncTaskSample\target
[INFO]
[INFO] --- android-maven-plugin:3.5.0:generate-sources (default-generate-sources) @ asynctasksample ---
[INFO] ANDROID-904-002: Found aidl files: Count = 0
[INFO] ANDROID-904-002: Found aidl files: Count = 0
[INFO] Manifest merging disabled. Using project manifest only
[INFO] E:\Nitin\Android-SDK\Android\android-sdk\platform-tools\aapt.exe [package, -m, -J, F:\Android\AsyncTaskSample\target\generated-sources\r, -M, F:\Android\AsyncTaskSample\AndroidManifest.xml, -S, F:\Android\AsyncTaskSample\res, --auto-add-overlay, -A, F:\Android\AsyncTaskSample\assets, -I, E:\Nitin\Android-SDK\Android\android-sdk\platforms\android-4\android.jar]
[INFO] F:\Android\AsyncTaskSample\res\values-v11\styles.xml:3: error: Error retrieving parent for item: No resource found that matches the given name 'android:Theme.Holo.Light'.
[ERROR] Error when generating sources.
org.apache.maven.plugin.MojoExecutionException:
        at com.jayway.maven.plugins.android.phase01generatesources.GenerateSourcesMojo.generateR(GenerateSourcesMojo.java:468)
        at com.jayway.maven.plugins.android.phase01generatesources.GenerateSourcesMojo.execute(GenerateSourcesMojo.java:193)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: com.jayway.maven.plugins.android.ExecutionException: ANDROID-040-001: Could not execute: Command = cmd.exe /X /C "E:\Nitin\Android-SDK\Android\android-sdk\platform-tools\aapt.exe package -m -J F:\Android\AsyncTaskSample\target\generated-sources\r -M F:\Android\AsyncTaskSample\AndroidManifest.xml -S F:\Android\AsyncTaskSample\res --auto-add-overlay -A F:\Android\AsyncTaskSample\assets -I E:\Nitin\Android-SDK\Android\android-sdk\platforms\android-4\android.jar", Result = 1
        at com.jayway.maven.plugins.android.CommandExecutor$Factory$1.executeCommand(CommandExecutor.java:339)
        at com.jayway.maven.plugins.android.phase01generatesources.GenerateSourcesMojo.generateR(GenerateSourcesMojo.java:464)
        ... 22 more
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 4.427s
[INFO] Finished at: Wed Jan 09 16:58:50 IST 2013
[INFO] Final Memory: 6M/15M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.5.0:generate-sources (default-generate-sources) on project asynctasksample: MojoExecutionException: ANDROID-040-001: Could not execute: Command = cmd.exe /X /C "E:\Nitin\Android-SDK\Android\android-sdk\platform-tools\aapt.exe package -m -J F:\Android\AsyncTaskSample\target\generated-sources\r -M F:\Android\AsyncTaskSample\AndroidManifest.xml -S F:\Android\AsyncTaskSample\res --auto-add-overlay -A F:\Android\AsyncTaskSample\assets -I E:\Nitin\Android-SDK\Android\android-sdk\platforms\android-4\and
roid.jar", Result = 1 -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException
F:\Android\AsyncTaskSample> 
```

pom.xml 内容如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.example</groupId>
    <artifactId>asynctasksample</artifactId>
    <version>1.0</version>
    <packaging>apk</packaging>
    <name>AsyncTaskSample</name>

    <dependencies>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>1.6_r2</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>
    <build>
        <finalName>${project.artifactId}</finalName>
        <sourceDirectory>src</sourceDirectory>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                    <artifactId>android-maven-plugin</artifactId>
                    <version>3.5.0</version>

                    <extensions>true</extensions>
                </plugin>
            </plugins>
        </pluginManagement>
        <plugins>
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <configuration>
                    <sdk>
                        <!-- platform or api level (api level 4 = platform 1.6)-->
                        <platform>4</platform>
                    </sdk>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

settings.xml文件内容@“C:\Users\rsahu.m2”如下：

```
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
            http://maven.apache.org/xsd/settings-1.0.0.xsd">
        <pluginGroups>
            <pluginGroup>com.jayway.maven.plugins.android.generation2</pluginGroup>
        </pluginGroups>
        <profiles>
            <profile>
                <id>android</id>
                <properties>
                    <android.sdk.path>
                        E:\Nitin\Android-SDK\Android\android-sdk
                    </android.sdk.path>
                </properties>
            </profile>
        </profiles>
        <activeProfiles>
            <!--make the profile active all the time -->
            <activeProfile>android</activeProfile>
        </activeProfiles>
    </settings> 
```

通过查看以上文件内容，是否可以解决问题！请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T11:44:29.703

我在 Maven 输出中注意到了这个错误

```
No resource found that matches the given name 'android:Theme.Holo.Light' 
```

而且您在您的`pom.xml`

```
<dependency>
    <groupId>com.google.android</groupId>
    <artifactId>android</artifactId>
    <version>1.6_r2</version>
    <scope>provided</scope>
</dependency> 
```

您需要将主题更改为类似`android:Theme.Light`

或将依赖项中的目标 Android 版本更改为更高版本。Holo 仅在 Android 4.0（16 级）中可用

# python - Pymongo & Django 查询无效的 JSON

> ID：14234380
> 
> 赞同：1
> 
> 时间：2013-01-09T11:38:23.340
> 
> 标签：python, django, mongodb, pymongo

我试图用 Pymongo 、 Mongodb 和 Django 创建一个 JSON 结果。我创建了一个包含 pymongo 查询并希望以 json 格式返回结果的 Django 视图。但是，产生的结果不是有效的 json（根据 jsonlint）

这是我的 Django 视图。

```
from django.http import HttpResponse
import pymongo
from datetime import datetime, timedelta
import json
from bson import json_util

#setup database connection
try:
    conn = pymongo.Connection()
    db = conn.mydatabase
except:
    print('Error: Unable to connect to database.')
    conn = None

def querypeople(request):
    result = db.people.find({}).sort('name')
    json_docs = []
    for doc in result:
        json_doc = json.dumps(doc, default=json_util.default, sort_keys=True, indent=4)
        json_docs.append(json_doc)
    return HttpResponse(json_docs, content_type='application/json') 
```

产生这个输出。（注意每个文档和 [ ] 之间缺少逗号应该包含整个结果。这使得 JSON 无效。）我做错了什么？

> "_id": { "$oid": "50c596ab2b9afbbc85ed202a" }, "date_added": { "$date": 1355126443473 }, "name": "Al Landon" }{ "_id": { "$oid": "50c5b9d92b9afbc3f1e7c90c " }, "company": "Corrs", "date_added": { "$date": 1355135449179 }, "name": "Andrew Lumsden", "title": "A Partner"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:26:06.497

据我了解，您返回的是响应列表，而不是 json 字符串。尝试：

```
json_docs = json.dumps(list(result), default=json_util.default, sort_keys=True, indent=4) 
```

# c++ - 将 numpy 的数组重塑转换为等效的 OpenCV

> ID：14234384
> 
> 赞同：5
> 
> 时间：2013-01-09T11:38:30.917
> 
> 标签：c++, python, arrays, opencv, numpy

我在将 numpy 的 ndarray 函数转换为等效的 OpenCV C++ 调用以将 n 维 cv::Mat 整形/拆分为适当的切片时遇到问题。特别是我正在尝试将 OpenCV python2 示例“texture_flow.py”（> = OpenCV 2.4.3）转换为 C++。我在下面的片段中标记了有问题的行。

```
# [......]
img = cv2.imread(fn)
gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)
# simple width and height tuple
h, w = img.shape[:2]

eigen = cv2.cornerEigenValsAndVecs(gray, 15, 3)
print eigen.shape # prints: (height, widht, 6), i.e. 6 channels

# Problem 1:
# OpenCV's reshape function is not sufficient to do this.
# probably must be split into several steps...
eigen = eigen.reshape(h, w, 3, 2)  # [[e1, e2], v1, v2]
print eigen.shape # prints: (height, width, 3, 2)

# Problem 2:
# I assume this is meant to get the the v1 and v2 matrices 
# from the previous reshape
flow = eigen[:,:,2]
print flow.shape # prints: (height, width, 2), i.e. 2 channels

vis = img.copy()
# C++: vis.data[i] = (uchar)((192 + (int)vis.data[i]) / 2);
vis[:] = (192 + np.uint32(vis)) / 2

d = 12

# Problem 3:
# Can probably be split into 2 nested for-loops 
points =  np.dstack( np.mgrid[d/2:w:d, d/2:h:d] ).reshape(-1, 2)

# [......] 
```

有人可以帮我将有问题的行翻译成 C++ 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:28:07.673

仔细考虑之后，一切都比想象的要容易。只有有趣的 numpy 数组语法让我感到困惑。重塑 numpy 的数组只是 python 访问生成的 cv::Mat "eigen" 的单个通道的方法。以下代码是 OpenCV 的“texture_flow.py”的 C++ 版本（取自 OpenCV 2.4.3）。生成的流图与 python 版本不是 100% 相同，但足够接近。

```
#include <opencv2/opencv.hpp>
#include <iostream>

int main (int argc, char** argv)
{
    cv::TickMeter tm;
    tm.start();
    cv::Mat img = cv::imread(argv[1]);
    cv::Mat gray = cv::Mat();
    cv::cvtColor(img, gray, CV_BGR2GRAY);
    // to preserve the original image
    cv::Mat flow = gray.clone();
    int width = img.cols;
    int height = img.rows;
    int graySize = width * height;
    // "brighten" the flow image 
    // C++ version of:
    // vis[:] = (192 + np.uint32(vis)) / 2
    for (unsigned int i=0; i<graySize; ++i)
    {
         flow.data[i] = (uchar)((192 + (int)flow.data[i]) / 2);
    }
    cv::Mat eigen = cv::Mat(height, width, CV_32FC(6));
    cv::cornerEigenValsAndVecs(gray, eigen, 15, 3);
    // this is the equivalent to all the numpy's reshaping etc. to 
    // generate the flow arrays
    // simply use channel 4 and 5 as the actual flow array in C++
    std::vector<cv::Mat> channels;
    cv::split(eigen, channels);

    int d = 12;
    cv::Scalar col(0, 0, 0);
    // C++ version of:
    // points =  np.dstack( np.mgrid[d/2:w:d, d/2:h:d] ).reshape(-1, 2)
    // including the actual line drawing part
    for (unsigned int y=(d/2); y<flow.rows; y+=d)
    {
         for (unsigned int x=(d/2); x<flow.cols; x+=d)
         {
             if (x < flow.cols && y < flow.rows)
             {
                 cv::Point p(x, y);
                 float dx = channels[4].at<float>(p) * (d/2);
                 float dy = channels[5].at<float>(p) * (d/2);
                 cv::Point p0(p.x - dx, p.y - dy);
                 cv::Point p1(p.x + dx, p.y + dy);
                 cv::line(flow, p0, p1, col, 1);
              }
         }
    }
    tm.stop();
    std::cout<<"Flow image generated in "<<tm.getTimeMilli()<<" ms."<<std::endl;
    cv::imshow("FLOW", flow);
    cv::waitKey();
    return 0;
} 
```

# javascript - Javascript onclick 与 onmouseover 和 onmouseout

> ID：14234390
> 
> 赞同：0
> 
> 时间：2013-01-09T11:38:52.477
> 
> 标签：javascript, html, onclick, onmouseover, onmouseout

我有一张图片，上面有几个 javascript 调用，其中大部分都可以正常工作。

基本上，我想要它做的是，当单击交换图像时，然后根据它当前所在的图像，也可以在鼠标悬停时交换。

这是我的 HTML：

```
<a href="#show" class="show_hide">
<img src="<?php echo WEB_URL; ?>/images/show-more-arrow.jpg" width="61" height="45" id="clicktoggleimage" onclick="changeImage()" onMouseOver="checkMouseOver()" onMouseOut="checkMouseOut()" /></a> 
```

还有我的 Javascript：

```
function changeImage() {
    if (document.getElementById("clicktoggleimage").src == "http://www.pete.com/images/show-less-arrow.jpg") {
        document.getElementById("clicktoggleimage").src = "http://www.pete.com/images/show-more-arrow.jpg";
    } else {
        document.getElementById("clicktoggleimage").src = "http://www.pete.com/images/show-less-arrow.jpg";
    }
}

function checkMouseOver() {
    if (document.getElementById("clicktoggleimage").src == "http://www.pete.com/images/show-less-arrow.jpg") {
        document.getElementById("clicktoggleimage").src = "http://www.pete.com/images/show-less-arrow-over.jpg";
    } else if (document.getElementById("clicktoggleimage").src == "http://www.pete.com/images/show-more-arrow.jpg") {
        document.getElementById("clicktoggleimage").src = "http://www.pete.com/images/show-more-arrow-over.jpg";    
    }
}

function checkMouseOut() {
    if (document.getElementById("clicktoggleimage").src == "http://www.pete.com/images/show-less-arrow-over.jpg") {
        document.getElementById("clicktoggleimage").src = "http://www.pete.com/images/show-less-arrow.jpg";
    } else if (document.getElementById("clicktoggleimage").src == "http://www.pete.com/images/show-more-arrow-over.jpg") {
        document.getElementById("clicktoggleimage").src = "http://www.pete.com/images/show-more-arrow.jpg"; 
    }
} 
```

这工作正常，除非第二次单击按钮时，图像不会恢复为 show-less-arrow.jpg

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:47:48.913

You can make this JS a lot more efficient.

Since it appears you're only replacing `'more'` with `'less'` and vice versa, in your `changeImage` function, that is exactly what your function should do. The mouse over/off is only toggling the `'-over'` section of your string.

So, remove the event listeners from your HTML:

```
<a href="#show" class="show_hide">
    <img src="<?php echo WEB_URL; ?>/images/show-more-arrow.jpg" width="61" height="45" id="clicktoggleimage" />
</a> 
```

And use this Javascript:

```
var img = document.getElementById("clicktoggleimage");

function changeImage() {
    if (img.src.indexOf('less') == -1) {
        img.src = img.src.replace('more', 'less');
    } else {
        img.src = img.src.replace('less', 'more');
    }
}

function hoverImage() {
    if (img.src.indexOf('arrow-over') == -1) {
        img.src = img.src.replace('arrow', 'arrow-over');
    } else {
        img.src = img.src.replace('arrow-over', 'arrow');
    }
}

img.onclick = cangeImage;
img.onmouseover = img.onmouseout = hoverImage; 
```

# jsonp - 使用 AFNetworking 和 AFJSONRequestOperation 进行用户登录

> ID：14234391
> 
> 赞同：1
> 
> 时间：2013-01-09T11:39:01.370
> 
> 标签：jsonp, afnetworking

我是 objC 的新手，我需要实现一个简单的功能，比如验证用户。我读了很多教程，但它太复杂了，没有专注于在发布值后从服务器获取响应。你能告诉我我该怎么做吗？

像这样的服务器 URL：[http](http://server.com/demo/index.php/api/user/login/format/json) ://server.com/demo/index.php/api/user/login/format/json 我必须发布参数值：

```
array(
"email" => "admin@server.com",
"password" =>"123456"
); 
```

我将得到的结果是 json 响应的真假。我怎样才能做到？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:57:02.883

我[在这里的回答](https://stackoverflow.com/a/13353718/902968)准确地解释了你需要如何使用`AFNetworking`来做到这一点。

# android - Android ant：使用 Debug 选项构建版本

> ID：14234398
> 
> 赞同：1
> 
> 时间：2013-01-09T11:39:29.547
> 
> 标签：android, eclipse, debugging, in-app-purchase, code-signing

我需要用我的版本构建我的 android 应用程序`keystore`，因为我需要测试一些应用内购买的东西。但是，用 eclipse (juno) 调试它会非常好。

那么有没有一种简单的方法可以做到这一点，或者有人创建了一个 ant 脚本来做到这一点？

我想我必须`android:debuggable="true"`在 android 清单文件中设置并使用发布密钥构建/签署我的应用程序。如何将 eclipse 调试器与我的应用程序的这个构建版本连接起来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:57:46.353

我直接在 Eclipse 中找到了解决方案，没有 ant：

要对您的构建启用调试，请执行以下操作：

1.  在您的 Android 清单文件中添加 android:debuggable="true"：
2.  通过删除 proguard 配置的路径来禁用 project.properties 文件中的 propguard：proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt
3.  现在，通过右键单击您的项目 -> 导出 -> Android -> 导出 Android 应用程序并按照导出向导（设置发布密钥库、密钥别名、密码等），像使用 Eclipse 一样构建您的项目
4.  将您创建的 APK 上传到您的设备并安装它（如果之前的版本未使用相同的发布密钥签名，您可能需要卸载之前的应用版本）
5.  启动您的应用程序
6.  在 Eclipse 中打开 DDMS 透视图（Window -> Open Perspective）
7.  在 DDMS 透视图中，您将看到一个列表，其中包含在您的设备上运行并且也可调试的所有应用程序。通过单击选择您的应用程序（名称是包名称）。
8.  单击绿色错误图标（在所有正在运行的可调试应用程序列表的顶部）以将 eclipse 调试器连接到您的应用程序

现在，当您到达断点时，您的应用程序将停止并打开调试器透视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:44:21.187

您好如果您需要调试应用内购买，请使用为开发人员制作的测试帐户...

因为我们必须为购买付费版本提供项目 ID，所以将项目 ID 设置为 `BillingController.requestPurchase(PurchaseApp.this,"android.test.purchased");`

# tcl - 是否可以在带有 Tk/Tcl 的标签内放置模式？

> ID：14234399
> 
> 赞同：1
> 
> 时间：2013-01-09T11:39:33.073
> 
> 标签：tcl, tk

我想要一个包含颜色模板的标签，而不仅仅是纯色。

我的意思是标签将有一个颜色模板作为其背景，而不仅仅是纯色，例如，交替颜色的对角线图案，就像 MS Office 中的图案填充选项：

![在此处输入图像描述](../Images/0d29abbe9a7c05b5779b2403424516f6.png)

我不希望它成为我想要的图案的图片，因为我希望它在小部件重新调整大小时重新调整大小并使用不同长度和大小的标签。

有没有办法对 tk/tcl 做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:16:51.857

标签可以有图像或文本字符串。这就对了。但是，您可以根据需要控制图像以响应 Map 或 Unmap（显示或隐藏）等 UI 事件或调整大小。所以我建议您根据需要生成图像并在调整大小时重新生成它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T03:03:48.040

图案需要图像，但标签只能有图像或文本，不能两者兼有。

如果你只是想要一个图案，那么你可以通过复制这样的平铺图像来为它创建一个图像：

```
# Set foreground and background colours for your tile
set fg "#9999ff"
set bg "#ffffff"

# create tile data (this will give vertical stripes every 4 pixels)
set data "$fg $bg $bg $bg"

# Create the tile image
image create photo tile
tile put [list $data]

# Create the actual image (tile set)
image create photo tileset

# Fill the image with the tile to the desired size
tileset copy tile -to 0 0 200 300

# Display the tiled image in a label
label .l -image tileset
pack .l 
```

如果您想在图案上放置文本，您可以使用画布。[您可以在 Tclers Wiki](http://wiki.tcl.tk/4389)上查看如何在画布中平铺图像（考虑调整画布大小）。

# c# - 从 C# 执行 SQL 脚本并记录错误

> ID：14234402
> 
> 赞同：5
> 
> 时间：2013-01-09T11:39:45.083
> 
> 标签：c#, sql, sql-server, smo

我正在尝试从 C# Windows 应用程序对数据库执行脚本（.sql 文件）。SQL 文件包含“GO”语句；这意味着我正在使用对象 SMO。

我正在尝试**继续出错**，并记录在数据库上执行脚本期间可能发生的**任何错误。**有没有办法做到这一点？

这是我正在使用的代码：

```
using (SqlConnection sqlConnection = new SqlConnection(connectionString))
{
    ServerConnection svrConnection = new ServerConnection(sqlConnection);
    Server server = new Server(svrConnection);

    string script = File.ReadAllText("upgradeDatabase.sql");

    try
    {
        server.ConnectionContext.ExecuteNonQuery(script, ExecutionTypes.ContinueOnError);
     }
     catch (Exception ex)
     {
         //handling and logging for the errors are done here
     }
} 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T11:56:12.190

我认为你在这里有两个问题：

首先，调用接受字符串而不是 StringCollection 的 ExecuteNonQuery 方法。我想这个方法不能识别用于分隔批处理语句的 GO。相反，接受 StringCollection 的[ExecuteNonQuery](http://msdn.microsoft.com/en-us/library/ms199433.aspx)方法的文档指出 GO 已被识别

第二个问题是`ExecutionTypes.ContinueOnError`通过。在这种情况下，相同的文档指出，如果出现故障，您将无法收到异常。

我认为最好的方法应该是在 GO 处拆分您的输入文本，然后构建一个[StringCollection](http://msdn.microsoft.com/en-us/library/system.collections.specialized.stringcollection%28v=vs.100%29.aspx)以传递给 ExecuteNonQuery 方法并检查返回的受影响行的数组。像这样的东西（应该测试）

```
using (SqlConnection sqlConnection = new SqlConnection(connectionString))
{
    ServerConnection svrConnection = new ServerConnection(sqlConnection);
    Server server = new Server(svrConnection);

    string script = File.ReadAllText("upgradeDatabase.sql");
    string[] singleCommand = Regex.Split(script, "^GO", RegexOptions.Multiline);
    StringCollection scl = new StringCollection();
    foreach(string t in singleCommand)
    {
        if(t.Trim().Length > 0) scl.Add(t.Trim());
    }
    try
    {
        int[] result = server.ConnectionContext.ExecuteNonQuery(scl, ExecutionTypes.ContinueOnError);
        // Now check the result array to find any possible errors??
     }
     catch (Exception ex)
     {
         //handling and logging for the errors are done here
     }
} 
```

当然，另一种选择是执行每条语句并删除`ContinueOnError`标志。然后捕获并记录可能的异常。但这肯定会慢一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-08T05:24:49.617

我真的很喜欢这个变体，它使用 InfoMessage 事件和处理程序：

```
 using(SqlConnection sc = new SqlConnection(connStr))
        {
            sc.InfoMessage += new SqlInfoMessageEventHandler(sc_InfoMessage);
            sc.FireInfoMessageEventOnUserErrors = true;
            Server db = new Server(new ServerConnection(sc));
            db.ConnectionContext.ExecuteNonQuery(commandFileText, ExecutionTypes.ContinueOnError); 
        } 
```

您需要添加对以下内容的引用：

*   Microsoft.SqlServer.ConnectionInfo.dll
*   Microsoft.SqlServer.Management.Sdk.Sfc.dll
*   Microsoft.SqlServer.Smo.dll
*   Microsoft.SqlServer.SqlEnum.dll

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-03T09:54:12.087

我不是程序员（DBA），因此我不确定。我认为以下可能会有所帮助

svrConnection.FireInfoMessageEventOnUserErrors = true;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T11:43:12.117

您可以使用[smo](http://msdn.microsoft.com/en-us//library/ms162169.aspx)库，[如何](http://msdn.microsoft.com/en-us/library/ms162129.aspx)添加到项目中

```
FileInfo file = new FileInfo("upgradeDatabase.sql");
string script = file.OpenText().ReadToEnd();
SqlConnection conn = new SqlConnection(sqlConnectionString);
Server server = new Server(new ServerConnection(conn));
server.ConnectionContext.ExecuteNonQuery(script); 
```

# google-app-engine - 在装饰事务的函数中，如果调用其他函数来对数据库实体进行处理，那么整个操作是事务性的吗？

> ID：14234410
> 
> 赞同：1
> 
> 时间：2013-01-09T11:40:11.387
> 
> 标签：google-app-engine

例如：

```
 def baz(self, id):
        return SomeModel.get_by_id(id)

    def boo(self, bar):
        # Do something to bar
        bar.put()

    @ndb.transactional()
    def foo(self, id):
        bar = self.baz(id)
        self.boo(bar) 
```

`foo`安全事务的调用吗？如果不是，为什么不呢？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-09T13:19:25.933

我不知道为什么你会认为调用另一个函数不会是事务性的。当然，它会是：API 不知道也不关心你的调用来自哪里，它只知道你何时进入事务锁以及何时离开它。

# sql - 尽管阻塞会话为 0，但 SQL 查询正在阻塞另一个

> ID：14234414
> 
> 赞同：1
> 
> 时间：2013-01-09T11:40:21.840
> 
> 标签：sql, oracle, concurrency, oracle10g, locks

我从在同一个表上运行的两个应用程序登录并从两个程序执行两个操作，导致后台 SQL 查询运行。一项操作导致另一项操作卡住或运行非常缓慢。我发现这两个查询在一起很长时间了。

1.  从表中选择 count(*) ....
2.  插入表格......

另外，您能否告诉我如何在运行时显示查询获取的锁或查看哪些查询可能存在冲突？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T13:24:10.427

我认为您没有任何锁定问题，因为 select 不需要任何锁定。

您可能遇到的是，选择必须求助于前图像，即插入之前的值（假设插入和选择使用同一个表）。之前的图像存储在回滚段中，访问它们的成本有些高。

查询正在填充的表的行数仍然没有什么意义。结果会告诉你什么？一微秒后就会出错。这表明，你应该重新考虑这一切背后的逻辑。

# c# - 从android获取.net中的httpResponse

> ID：14234415
> 
> 赞同：1
> 
> 时间：2013-01-09T11:40:21.857
> 
> 标签：c#, android, web-services, post, http-post

我正在使用 .net webservice 来捕获我从 Android 应用程序获得的响应。我从 android 应用程序返回以下行

```
HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(
                "http://10.0.2.2:51889/OMS/WebServices/Service.asmx/Test");

    List<NameValuePair> nameValuePair = new ArrayList<NameValuePair>(2);
    nameValuePair.add(new BasicNameValuePair("email", "abc"));
    nameValuePair.add(new BasicNameValuePair("pwd", "123"));

    // Url Encoding the POST parameters
    try {
        httpPost.setEntity(new UrlEncodedFormEntity(nameValuePair));
    } catch (UnsupportedEncodingException e) {
        // writing error to Log
        e.printStackTrace();
    }

    // Making HTTP Request
    try {
        HttpResponse response = httpClient.execute(httpPost);

    } catch (ClientProtocolException e) {
        // writing exception to log
        e.printStackTrace();

    } catch (IOException e) {
        // writing exception to log
        e.printStackTrace();
    } 
```

我怎样才能在.net web 服务中得到这个响应？

我从android得到这样的数据![在此处输入图像描述](../Images/7369aafa7ec314b260317c0585ea846a.png)

那么我怎样才能在 C#.net 中获取这些数据？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:53:08.610

看看这里是[.net-Android Connection](http://www.codeproject.com/Articles/340714/Android-How-to-communicate-with-NET-application-vi)的完整教程。

并从 android 应用程序获取响应到您的 web 服务 Ksoap 将对您有用。这是[完整的 Ksoap 教程](http://seesharpgears.blogspot.in/2010/10/ksoap-android-web-service-tutorial-with.html)。请仔细阅读。希望它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:08:10.907

由于 ASMX，您的 Web 服务似乎是一个 Soap WS。SOAP 是 Microsoft 专有协议，您不能将其用作 HttpRequest。

您需要使用外部库来使用 .Net SOAP WebServices，如 KSOAP。

否则，您可以创建一个 Net Rest Service，然后您可以将其作为 HTTP 请求直接调用，使用 POST、PUT、DELETE、GET 方法

# actionscript-3 - AS3 - 当它形成一个闭环时自动填充 lineTo

> ID：14234416
> 
> 赞同：4
> 
> 时间：2013-01-09T11:40:22.573
> 
> 标签：actionscript-3, flash, actionscript

我一直在查看 Emanuele Feronato 的字符串避免器代码（下面的代码和链接）并尝试对其进行调整，以便当字符串自身相交时 - 形成一个闭环 - 它只会填充该区域（[参见图像](http://samtripp.com/eg.png)）。我的数学很糟糕，我正在努力理解三角函数。有什么建议么？谢谢。

这是一个有助于澄清的图表 - [http://samtripp.com/eg.png](http://samtripp.com/eg.png)

链接：[http ://www.emanueleferonato.com/2011/10/13/develop-a-flash-game-like-string-avoider-as3-version-and-more/](http://www.emanueleferonato.com/2011/10/13/develop-a-flash-game-like-string-avoider-as3-version-and-more/)

```
package {
import flash.display.Sprite;
import flash.events.Event;
import flash.geom.Point;
public class Main extends Sprite {
    private var tailLenght:Number=50;
    private var tailNodes:Number=10;
    private var head:headMc=new headMc();
    private var tailCanvas:Sprite=new Sprite();
    private var nodes:Vector.<Point>=new Vector.<Point>();
    public function Main() {
        addChild(head);
        head.x=320;
        head.y=240;
        addChild(tailCanvas);
        for (var i:int=0; i<tailNodes; i++) {
            nodes[i]=new Point(head.x,head.y);
        }
        addEventListener(Event.ENTER_FRAME,update);
    }
    private function update(e:Event):void {
        head.x=mouseX;
        head.y=mouseY;
        tailCanvas.graphics.clear();
        tailCanvas.graphics.lineStyle(2,0x00ff00);
        tailCanvas.graphics.moveTo(head.x,head.y);
        nodes[0]=new Point(head.x,head.y);
        for (var i:int=1; i<tailNodes-1; i++) {
            var nodeAngle:Number=Math.atan2(nodes[i].y-nodes[i-1].y,nodes[i].x-nodes[i-1].x);
            nodes[i]=new Point(nodes[i-1].x+tailLenght*Math.cos(nodeAngle),nodes[i-1].y+tailLenght*Math.sin(nodeAngle));
            if (i<tailNodes-2) {
                for (var j:int=i-1; j>=1; j--) {
                    var p:Point=lineIntersection(nodes[j],nodes[j-1],nodes[i],nodes[i+1]);
                    if (p!=null) {
                        tailCanvas.graphics.beginFill(0x000000);
                        tailCanvas.graphics.drawCircle(p.x,p.y,4);
                        tailCanvas.graphics.endFill();
                        tailCanvas.graphics.moveTo(nodes[i-1].x,nodes[i-1].y);
                    }
                }
            }
            tailCanvas.graphics.lineTo(nodes[i].x,nodes[i].y);
        }
    }
    private function lineIntersection(p1:Point,p2:Point,p3:Point,p4:Point):Point {
        var x1:Number=p1.x;
        var x2:Number=p2.x;
        var x3:Number=p3.x;
        var x4:Number=p4.x;
        var y1:Number=p1.y;
        var y2:Number=p2.y;
        var y3:Number=p3.y;
        var y4:Number=p4.y;
        var px:Number=((x1*y2-y1*x2)*(x3-x4)-(x1-x2)*(x3*y4-y3*x4))/((x1-x2)*(y3-y4)-(y1-y2)*(x3-x4));
        var py:Number=((x1*y2-y1*x2)*(y3-y4)-(y1-y2)*(x3*y4-y3*x4))/((x1-x2)*(y3-y4)-(y1-y2)*(x3-x4));
        var segment1Len:Number=Math.pow(p1.x-p2.x,2)+Math.pow(p1.y-p2.y,2);
        var segment2Len:Number=Math.pow(p3.x-p4.x,2)+Math.pow(p3.y-p4.y,2);
        if (Math.pow(p1.x-px,2)+Math.pow(p1.y-py,2)>segment1Len) {
            return null;
        }
        if (Math.pow(p2.x-px,2)+Math.pow(p2.y-py,2)>segment1Len) {
            return null;
        }
        if (Math.pow(p3.x-px,2)+Math.pow(p3.y-py,2)>segment2Len) {
            return null;
        }
        if (Math.pow(p4.x-px,2)+Math.pow(p4.y-py,2)>segment2Len) {
            return null;
        }
        return new Point(px,py);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T17:44:35.207

在那个网站上可以找到很多好的教程，我推荐它。

刚刚写了一个快速函数，它可以满足您的需求：

```
private function fillIntersection(p,startN,endN):void{
    tailCanvas.graphics.beginFill(0x0000FF,0.5);
    tailCanvas.graphics.moveTo(p.x,p.y);

    for (var i:int=endN; i<startN; i++) {
        tailCanvas.graphics.lineTo(nodes[i].x,nodes[i].y);
    }

    tailCanvas.graphics.lineTo(nodes[startN].x,nodes[startN].y);
    tailCanvas.graphics.endFill();
} 
```

你应该在之后运行这个：（`if (p!=null) {`第 34 行）

像这样：

```
if (p!=null) {
        fillIntersection(p,i,j);
        tailCanvas.graphics.beginFill(0x000000); 
```

为了解释它是如何工作的，函数给出了要填充的线的点，以及碰撞的确切点，然后循环遍历它们并绘制一个填充的多边形。

（我确信有更好的方法，但它有效且易于理解）

# javascript - if 语句中表达式的顺序

> ID：14234417
> 
> 赞同：7
> 
> 时间：2013-01-09T11:40:35.780
> 
> 标签：javascript, if-statement, operators

> **可能重复：**
> [这些（bCondition == NULL）和（NULL==bCondition）有什么区别？](https://stackoverflow.com/questions/5854317/what-is-the-difference-between-these-bcondition-null-and-null-bcondition)
> [比较语句的 Javascript 缩小](https://stackoverflow.com/questions/9256579/javascript-minification-of-comparison-statements)

我一直在写我的`if`陈述是这样的：

```
if(variable1 === 1){}
if(variable2 > 10){}
if(variable3 == "a"){} 
```

但我记得在某处读过（不幸的是，我再也找不到那个页面了），这些`if`陈述最好这样写：

```
if(1 === variable1){}
if(10 < variable2){}
if("a" == variable3){} 
```

您将变量放在表达式右侧的位置。

这个对吗？如果是这样，任何人都可以解释为什么这是正确的吗？此外，这适用于所有编程语言，还是仅适用于 javascript？

TIA

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T11:47:02.743

`1 === variable1`与用尤达记法**写的表达式相同`variable1 === 1`：左侧列出常量，右侧列出变量。

一些程序员选择使用它的主要原因是为了避免在`if (a = 1)`程序员的实际意思`if (a == 1)`或`if (a === 1)`. 以下代码行将起作用，但不会按预期工作（`a`分配了一个值并且`if`块将始终被执行）：

```
if (a = 1) {} 
```

以相反方式编写的相同表达式将生成语法（或编译）错误：

```
if (1 = a) {} 
```

程序员可以立即发现错误并修复它。

我不喜欢也不使用尤达符号。我在编码时尽量睁大眼睛。

** 我无法找出这个词的来源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T11:44:03.230

有些人可能更喜欢颠倒值的顺序，`if`因为第二种形式更具保护性。事实上，如果你错过了输入等号：

```
if (42 = myVar) { } 
```

在编译时抛出语法错误，而

```
if (myVar = 42) { } 
```

评估赋值表达式的完成值，`42`在这种情况下，它是 JavaScript 中的*真值*。

无论如何，今天可以使用[eslint](https://eslint.org/)等工具轻松发现类似的错误......所以使用第一种形式没有真正意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T11:42:58.387

两者都是正确的，但第二个是丑陋的，我还没有真正看到它。和说的一样

> “如果蓝色是天空”

代替

> “如果天空是蓝色的”

. 无法回忆我在哪里读过它:)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T11:44:54.117

**=== :**

根据定义，它是可交换的，因为它检查两个对象是否相同（相同类型，相同值）。

**== ：**

== 更复杂，因为涉及转换，但[规范明确](http://ecma262-5.com/ELS5_HTML.htm#Section_11.9.3)：

> A == B 等价于 B == A，除了 A 和 B 的求值顺序

换句话说，`==`是可交换的。

这意味着您应该简单地使用不那么丑陋和读者最熟悉的。那是第一个。

# design-patterns - DDD 和实体框架中的聚合

> ID：14234418
> 
> 赞同：3
> 
> 时间：2013-01-09T11:40:37.107
> 
> 标签：design-patterns, domain-driven-design, repository-pattern

我有一个关于如何处理不是数据库中数据表示的实体的问题，而是我需要用于业务目的的定制实体。

我的解决方案结构如下：

*   实体组装（POCO 对象）
*   存储库程序集（EF 代码优先）
*   业务层组装
*   UI 组装 (MVC)

在我的实体程序集中，我有两个实体`A`和`B`，并且出于我的业务逻辑的特定目的，我需要返回一个包含两者（以及其他属性）的对象：

```
class X
{
   public A[];
   public B[];
} 
```

我应该直接从存储库返回这个对象吗？或者业务层应该调用`repo.GetA`然后`repo.GetB`创建`X`并返回它？

在这种情况下，也许在业务层创建对象是有意义的。但是，如果班级是and`X`的“分组依据”呢？然后从存储库中返回它更有意义。`A``B`

我想没有灵丹妙药，但有什么指导方针吗？

干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T14:11:46.793

我认为您需要弄清楚`X`属于哪一层以及它到底是什么：

*   一个领域实体，即它从无处不在的语言中传达了一个领域概念。在这种情况下，`X`可能是包含子实体列表`A`的聚合根。`B`除了数据之外，它还可能有方法。`X`的存储库将保存 A 和 B 集合以及`X`对象，并且不会有`A`or的存储库`B`。

*   特定于 UI 或特定于用例的数据结构。在这种情况下，领域层与`X`. 应用程序或 UI 层将负责在实例和`A`对象之间进行映射。`B``X`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T12:26:01.340

我的理解是存储库应该始终处理业务类型的对象。对您来说，这相当于一个返回 X 类型对象的存储库。如何创建 X 是存储库的业务。这可以通过 2 个数据映射器获取 A 和 B 并合并结果或其他一些适当的过程。

# android - 矢量图像对 Android 有用吗？

> ID：14234421
> 
> 赞同：12
> 
> 时间：2013-01-09T11:40:49.970
> 
> 标签：android, android-layout, vector, svg, android-imageview

我正在开发 Android 应用程序。我想使用矢量图像。`(.svg file)`但我不确定最好的方法是使用矢量图像。

`Svg-android.jar`没用。不支持所有 .svg 文件类型。以后可能就麻烦了。另一方面，如果我使用矢量，这对我来说很容易。特别是我不会处理决议。

我需要帮助。我必须尽快做出决定。

有什么建议么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-09T11:54:12.667

矢量图形是个坏主意。

Android 不是为使用它们而设计的。所以如果你走那条路，你将不得不在每一步都与绿色机器人战斗。让我告诉你，那个小机器人恶魔有很多耐力！！

当你开始学习一门新语言时，不要试图超越它。你将永远失去时间、头发和理智。

Android 使用“相当复杂的掌握”概念，混合分辨率和屏幕尺寸以及九个补丁。但是一旦掌握了它并没有那么牵强，你会意识到他们选择这种模式的原因很简单：当处理这样的屏幕碎片时，真的没有其他选择。

请阅读：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

Android 中最接近矢量图形的东西：http: [//developer.android.com/tools/help/draw9patch.html](http://developer.android.com/tools/help/draw9patch.html)（由 Dmitry Zaitsev 建议）

# sql-server - 如何获取超过 100 000 笔交易和多笔交易的 Originator_Account_Id。不使用have子句？

> ID：14234425
> 
> 赞同：0
> 
> 时间：2013-01-09T11:41:01.973
> 
> 标签：sql-server

```
Originator_Acc_ID     |      Transaction_Amount  
-----------------------------------------------
001                   |           10000000 
001                   |           20000000
003                   |               1000 
002                   |           60000000 
```

我想要 Originator_ID 仅用于 100 000 以上的交易和超过 1 个交易，而不使用 have 子句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:00:19.153

如果您只想知道`Originator_Acc_ID`多笔交易，那么您可以使用 row_number：

```
select Originator_Acc_ID, Transaction_Amount
from
(
  select Originator_Acc_ID, Transaction_Amount,
    row_number() over(partition by Originator_Acc_ID order by Originator_Acc_ID) rn
  from yourtable
  --where Transaction_Amount > 100000
) src
where rn > 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/10504/3)

如果他们有一个`row_number()`大于一个，则意味着他们有多个事务。以上将返回所有超过一个的人。如果您只想要一个包含多个交易的帐户列表，那么您可以使用：

```
select distinct Originator_Acc_ID
from
(
  select Originator_Acc_ID, Transaction_Amount,
    row_number() over(partition by Originator_Acc_ID order by Originator_Acc_ID) rn
  from yourtable
  --where Transaction_Amount > 100000
) src
where rn > 1 
```

甚至：

```
select Originator_Acc_ID
from
(
  select Originator_Acc_ID, Transaction_Amount,
    row_number() over(partition by Originator_Acc_ID order by Originator_Acc_ID) rn
  from yourtable
  --where Transaction_Amount > 100000
) src
where rn = 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:04:38.923

可能有更好的方法，但这似乎有效；

```
;WITH MyTable AS
(
    SELECT   Originator_Acc_ID  = '001'
            ,Transaction_Amount =  10000000
    UNION ALL
    SELECT '001', 20000000
    UNION ALL
    SELECT '003', 1000
    UNION ALL
    SELECT '002', 60000000
)
,CTE AS
(
    SELECT   Originator_Acc_ID
            ,Transaction_Amount
            ,TxnPerOrig = COUNT(*) OVER (PARTITION BY Originator_Acc_ID)

    FROM MyTable
)
SELECT DISTINCT Originator_Acc_ID
FROM CTE
WHERE Transaction_Amount > 100000
AND TxnPerOrig > 1 
```

# javascript - HTML5 pushState 跨浏览器支持

> ID：14234426
> 
> 赞同：1
> 
> 时间：2013-01-09T11:41:08.130
> 
> 标签：javascript, jquery, html, internet-explorer, pushstate

我需要在跨浏览器更新 URL（而不是使用 # 技术）时做一些花哨的事情。根据我的阅读，我无法使用 < IE10 来做到这一点。我真的可以提供支持，并且想知道是否有人知道为 HTML5 pushState IE8+（如果可能的话也最好是 IE7）提供“hacksih”支持的方法。

通过 js/hackish 等有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:34:34.057

[IE8](http://caniuse.com/#feat=hashchange)支持该[`hashchange`事件](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)。不过，您必须自己管理状态。

正如 epascarello 评论的那样，[history.js](https://github.com/balupton/history.js)库已经为您完成了这项工作。

# ios - 从 NSUserDefaults 检索 NSInteger 时出现问题

> ID：14234427
> 
> 赞同：-2
> 
> 时间：2013-01-09T11:41:08.867
> 
> 标签：ios, cocoa, nsuserdefaults, nsinteger

从 NSUserDefaults 保存和检索 int 时遇到问题。我使用以下代码保存到 NSUserDefaults：

```
int globalRank = 1;
NSUserDefaults *submissionDefaults = [NSUserDefaults standardUserDefaults];
[submissionDefaults setInteger: globalRank forKey:@"globalRankIntForLT"];
NSLog(@"updating %@ as the globalRank in NSUserDefaults",globalRank);
[submissionDefaults synchronize]; 
```

这似乎工作正常。在我的输出中，我可以看到：

```
"updating 1 as the globalRank in NSUserDefaults" 
```

当我使用以下代码检索号码时：

```
NSUserDefaults *submissionDefaults = [NSUserDefaults standardUserDefaults];
NSInteger *currentGlobalRank = [submissionDefaults integerForKey:@"globalRankIntForLT"];
int currentGlobalRankInt = currentGlobalRank;
NSLog(@"Retrieved skip int is: %d as nsinteger is: %d",currentGlobalRankInt, currentGlobalRank);

I get output:
"Retrieved skip int is: 4978484032 as nsinteger is: 4978484032" 
```

后来我将此 int 传递给另一个返回错误的方法，因为 4978484032 比预期的要大。

NSUserDefaults 包含一个 NSInteger 但即使在那个时候它也会不正确。我究竟做错了什么？谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:43:51.310

`NSInteger`是原始类型，而不是对象。它应该`NSInteger currentGlobalRank`代替`NSInteger *currentGlobalRank`. 您可以在代码中使用`NSInteger`而不是。`int`无需将 a 转换`NSInteger`为`int`.

在 iOS 上，`NSInteger`定义为`int`，在 OS X 上定义为`long`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:45:49.823

您正在设置一个整数并尝试将指针检索为整数。改变：

```
NSInteger *currentGlobalRank = [submissionDefaults integerForKey:@"globalRankIntForLT"]; 
```

至：

```
NSInteger currentGlobalRank = [submissionDefaults integerForKey:@"globalRankIntForLT"]; 
```

尽管`NSInteger`从 NS 开始，它不是 的子类`NSObject`，但它只是原始的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T11:44:08.153

使用`NSInteger`或类似的包装类 `NSNumber`代替`int`.

而且您错误地将***放在了****NSInteger *currentGlobalRank中**

```
NSInteger globalRank = 1;
NSUserDefaults *submissionDefaults = [NSUserDefaults standardUserDefaults];
[submissionDefaults setInteger: globalRank forKey:@"globalRankIntForLT"];
NSLog(@"updating %@ as the globalRank in NSUserDefaults",globalRank);
[submissionDefaults synchronize];

NSUserDefaults *submissionDefaults = [NSUserDefaults standardUserDefaults];
NSInteger currentGlobalRank = [submissionDefaults integerForKey:@"globalRankIntForLT"];
NSLog(@"Retrieved skip int is: %d as nsinteger is: %d",currentGlobalRank, currentGlobalRank); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T11:43:33.463

更改此代码...

```
NSInteger *currentGlobalRank = [submissionDefaults integerForKey:@"globalRankIntForLT"];
int currentGlobalRankInt = currentGlobalRank;
NSLog(@"Retrieved skip int is: %d as nsinteger is: %d",currentGlobalRankInt, currentGlobalRank); 
```

至...

```
NSInteger *currentGlobalRank = [submissionDefaults integerForKey:@"globalRankIntForLT"];
int currentGlobalRankInt = [currentGlobalRank intValue];
NSLog(@"Retrieved skip int is: %d as nsinteger is: %@",currentGlobalRankInt, currentGlobalRank); 
```

# c# - 按外部排序顺序对通用列表进行排序

> ID：14234431
> 
> 赞同：6
> 
> 时间：2013-01-09T11:41:31.347
> 
> 标签：c#, linq

我有一个通用列表

简化示例

```
var list = new List<string>()
  {
    "lorem1.doc",
    "lorem2.docx",
    "lorem3.ppt",
    "lorem4.pptx",
    "lorem5.doc",
    "lorem6.doc",
  }; 
```

我想做的是根据外部列表排序对这些项目进行排序

在示例中

```
var sortList = new[] { "pptx", "ppt", "docx", "doc" };

// Or
var sortList = new List<string>() { "pptx", "ppt", "docx", "doc" }; 
```

linq 有什么内置的东西可以帮助我实现这一目标，还是我必须采用 foreach 方式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T11:45:01.823

使用列表，您可以`IndexOf`使用`Enumerable.OrderBy`：

```
var sorted = list.OrderBy(s => sortList.IndexOf(Path.GetExtension(s))); 
```

所以扩展名中的索引`sortList` 决定了其他列表中的优先级。未知扩展具有最高优先级，因为它们的索引为 -1。

但是您需要在扩展中添加一个点才能使其正常工作：

```
var sortList = new List<string>() { ".pptx", ".ppt", ".docx", ".doc" }; 
```

如果这不是一个选项，您必须摆弄`Substring`or `Remove`，例如：

```
var sorted = list.OrderBy(s => sortList.IndexOf(Path.GetExtension(s).Remove(0,1))); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-09T11:45:05.647

即使某些文件名没有扩展名，此解决方案也可以工作：

```
var sortList = new List<string>() { "pptx", "ppt", "docx", "doc" };
var list = new List<string>()
  {
    "lorem1.doc",
    "lorem2.docx",
    "lorem3.ppt",
    "lorem4.pptx",
    "lorem5.doc",
    "lorem6.doc",
  };

var result = 
       list.OrderBy(f => sortList.IndexOf(Path.GetExtension(f).Replace(".",""))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T11:45:22.400

您可以尝试使用 Array.IndexOf() 方法：

```
var sortedList = list.OrderBy(i => sortList.IndexOf(System.IO.Path.GetExtension(i))).ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T11:56:09.930

A`sortDicionary`会更有效：

```
var sortDictionary = new Dictionary<string, int> {
    { ".pptx", 0 },
    { ".ppt" , 1 },
    { ".docx", 2 },
    { ".doc" , 3 } };

var sortedList = list.OrderBy(i => {
    var s = Path.GetExtension(i);
    int rank;
    if (sortDictionary.TryGetValue(s, out rank))
        return rank;
    return int.MaxValue; // for unknown at end, or -1 for at start
}); 
```

这样查找`O(1)`而不是`O(# of extensions)`.

此外，如果您有大量文件名和少量扩展名，实际上可能会更快

```
var sortedList = list
    .GroupBy(p => Path.GetExtension(p))
    .OrderBy(g => {
        int rank;
        if (sortDictionary.TryGetValue(g.Key, out rank))
            return rank;
        return int.MaxValue; // for unknown at end, or -1 for at start
    })
    .SelectMany(g => g); 
```

这意味着排序按输入中不同扩展名的数量而不是输入中的项目数进行缩放。

这也允许您为两个扩展赋予相同的优先级。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T11:57:03.113

这是另一种不使用的方式`OrderBy`：

```
var res = 
sortList.SelectMany(x => list.Where(f => Path.GetExtension(f).EndsWith(x))); 
```

请注意，这种方法的复杂性`O(n * m)`在于`n = sortList.Count`和`m list.Count`。

`OrderBy`相反，最坏情况复杂性的方法是，`O(n * m * log m)`但通常它可能会更快（因为`IndexOf`并不总是导致`O(n)`）。然而，小`n`，`m`你不会注意到任何区别。

对于大列表，最快的方法（复杂性`O(n+m)`）可能是构建临时查找，即：

```
var lookup = list.ToLookup(x => Path.GetExtension(x).Remove(0,1));
var res = sortList.Where(x => lookup.Contains(x)).SelectMany(x => lookup[x]); 
```

# scripting - VBS 脚本混乱：结束部分先开始？

> ID：14234436
> 
> 赞同：1
> 
> 时间：2013-01-09T11:41:51.590
> 
> 标签：scripting, vbscript

该脚本的目标是：

1.  输入计算机名称并重新启动它
2.  等它出现
3.  发送新命令

如果没有第 2 步，这一切都很好。发生的情况是，第 2 步首先出现，然后机器重新启动（第 1 步）。我很困惑，这是代码：

```
nomePosto = InputBox("Nome do posto:", _
    "Correção Cert DSM")
intAnswer = _
MsgBox("Ao continuar o posto " & nomePosto & " vai reiniciar!",_ 
vbOkCancel, "ATENÇÃO")
if intAnswer = vbOk Then
CONST comm1 = " shutdown -r -f -t 1"
CONST comm2 = " md c:\teste"
set wshShell = WScript.CreateObject ("Wscript.Shell")
wshShell.run "psexec \\" & nomePosto & comm1
Set oIE = CreateObject("InternetExplorer.Application")
With oIE
    .navigate("about:blank")
    .Document.Title = "Aguarde ..." & string(100, chrb(160))
    .resizable=0
    .height=100
    .width=100
    .menubar=0
    .toolbar=0
    .statusBar=0
    .visible=1
End With
Do while oIE.Busy
wscript.sleep 500
Loop
oIE.document.body.innerHTML = "<div id=""countdown"" style=""font: 12pt sans-serif;text-align:center;""></div>"
for i=56 to 0 step -1
oIE.document.all.countdown.innerText= i
wscript.sleep 1000
next
wshShell.run "psexec \\" & nomePosto & comm2
oIE.quit
else
end if
Wscript.Quit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:51:07.313

Wscript.sleep 500 在第一个命令之后。

我已经尝试过了，但完全忽略了计算机启动需要更长的时间，这意味着一切都在相应地工作 duh

# itunes - ipa 无法在 iTunes 11 中安装

> ID：14234437
> 
> 赞同：3
> 
> 时间：2013-01-09T11:42:00.460
> 
> 标签：itunes, xcode4.5, iphone-5, xcode3.2

到目前为止我已经尝试过了，但仍然没有运气我的应用程序没有安装到某些设备上。

以下是步骤。

1.  添加了 3 台设备的 UDID（2 X iPhone 5、iPad 4）。
2.  修改了开发配置文件（使用 * APP ID）。
3.  从 Xcode 中删除旧的配置文件并单击刷新 xcode 下载的配置文件。
4.  签署应用程序并创建 .ipa 并发送给拥有 iphone 5 的客户。
5.  应用安装失败。

甚至尝试手动下载配置文件但没有运气。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:23:52.157

我今天遇到了同样的问题。我已经能够很好地安装在连接到我的计算机的设备上，但是当我尝试将 .ipa 文件和 Ad Hoc 分发配置文件发送给测试人员时，他无法通过 iTunes 安装它。他刚刚收到一条错误消息，说“iTunes Sync：'appName' 安装失败。”

事实证明，我使用与我发送给测试人员的 Ad Hoc 不同的配置文件签署了分发包 .ipa 文件。发生这种情况是因为我刚刚制作了 Ad Hoc 并且它还没有在 XCode 中。

以下是我需要修复它的步骤：

1）在构建应用程序之前，我去了管理器中的设备

2）单击左侧的Provisioning Profiles，就在Library下方

3）单击右下角的刷新，以便它将所有配置文件从您的 Apple Developer 帐户复制到 XCode

4）关闭管理器并转到产品/存档以将应用程序构建为存档

5) 返回管理器并单击存档。新档案应该在列表中

6) 突出显示新存档并单击分发

7）选择“为企业或临时部署保存

8) 在下一步中，请务必选择您的 Ad Hoc 个人资料

9) 保存 .iap 存档文件

10) 下载您的 Apple Developer 帐户的 Ad Hoc 配置文件 Provisioning Profiles 部分，并将该文件和 .ipa 文件发送给您的测试人员

这也假设您已将测试人员的设备添加到您的 Ad Hoc 配置文件中

# orchardcms - 调试时重置果园设置

> ID：14234441
> 
> 赞同：2
> 
> 时间：2013-01-09T11:42:05.543
> 
> 标签：orchardcms

在codeplex上发布了这个，但我想我也会在这里尝试。

我创建了一个部署到 Azure 的 Orchard 应用程序，但是在调试它时，它偶尔会重置所有内容，因此我必须再次输入站点详细信息（即站点名称、管理员用户、数据库等）。因为我使用的是现有数据库，它最终会复制各种东西，所以我最终会得到多个管理员用户、多个导航菜单等。为什么会发生这种情况，有什么办法可以防止它发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:20:55.790

我想我已经找到了原因，详情如下：

[http://orchard.codeplex.com/discussions/428980](http://orchard.codeplex.com/discussions/428980)

这与在 ClickToBuildAzurePackage 中运行的单元测试有关。如果我从 AzurePackage.proj 中将它们注释掉，它就可以工作。

# android - 为 ICS 和 JellyBean 设置 Android WebView 代理

> ID：14234444
> 
> 赞同：1
> 
> 时间：2013-01-09T11:42:29.687
> 
> 标签：android, android-webview

如何以编程方式为 API 4.1 和 4.2 中的 Android WebView 设置代理？对于较低版本，以下链接有帮助 -

[WebView 安卓代理](https://stackoverflow.com/questions/4488338/webview-android-proxy)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:42:29.687

此代码有效 -

```
/**
 * Set Proxy for Android 4.1 and above.
 */
public static boolean setProxyICSPlus(WebView webview, String host, int port, String exclusionList) {

    Log.d("", "Setting proxy with >= 4.1 API.");

    try {

    Class wvcClass = Class.forName("android.webkit.WebViewClassic");
    Class wvParams[] = new Class[1];
    wvParams[0] = Class.forName("android.webkit.WebView");
    Method fromWebView = wvcClass.getDeclaredMethod("fromWebView", wvParams);           
    Object webViewClassic = fromWebView.invoke(null, webview);      

    Class wv = Class.forName("android.webkit.WebViewClassic");
    Field mWebViewCoreField = wv.getDeclaredField("mWebViewCore");
    Object mWebViewCoreFieldIntance = getFieldValueSafely(mWebViewCoreField, webViewClassic);

    Class wvc = Class.forName("android.webkit.WebViewCore");
    Field mBrowserFrameField = wvc.getDeclaredField("mBrowserFrame");
    Object mBrowserFrame = getFieldValueSafely(mBrowserFrameField, mWebViewCoreFieldIntance);

    Class bf = Class.forName("android.webkit.BrowserFrame");
    Field sJavaBridgeField = bf.getDeclaredField("sJavaBridge");
    Object sJavaBridge = getFieldValueSafely(sJavaBridgeField, mBrowserFrame);

    Class ppclass = Class.forName("android.net.ProxyProperties");
    Class pparams[] = new Class[3];
    pparams[0] = String.class;
    pparams[1] = int.class;
    pparams[2] = String.class;
    Constructor ppcont = ppclass.getConstructor(pparams);

    Class jwcjb = Class.forName("android.webkit.JWebCoreJavaBridge");
    Class params[] = new Class[1];
    params[0] = Class.forName("android.net.ProxyProperties");
    Method updateProxyInstance = jwcjb.getDeclaredMethod("updateProxy", params);

    updateProxyInstance.invoke(sJavaBridge, ppcont.newInstance(host, port, exclusionList));

    } catch (Exception ex) {
    Log.e("","Setting proxy with >= 4.1 API failed with error: " + ex.getMessage());
    return false;
    }

    Log.d("", "Setting proxy with >= 4.1 API successful!");
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-05T14:26:27.823

这是为 WebView 设置代理的完整方法。您应该为每个 SDK 版本相应地设置代理。避免不发布太多代码，请查看此 github 页面

[https://github.com/androidyue/DroidWebViewProxyDemo/blob/master/app/src/main/java/com/droidyue/proxydemo/ProxyUtils.java](https://github.com/androidyue/DroidWebViewProxyDemo/blob/master/app/src/main/java/com/droidyue/proxydemo/ProxyUtils.java)

希望这可以帮助你。

# linux - 如何将elf中的地址转换为物理地址

> ID：14234448
> 
> 赞同：4
> 
> 时间：2013-01-09T11:42:56.557
> 
> 标签：linux, linux-kernel, operating-system, elf

我知道操作系统会将精灵加载到物理内存中。执行时`jmp elf-address`，系统会检查 tlb 并将 elf-address 转换为物理地址。我很困惑 elf-address 没有段号和页号？os 如何将 elf-address 转换为 MMU 需要的。

我真的很困惑。我知道linux会读取精灵的标题和地图精灵。当页面错误发生时，内核会在内存中加载精灵并刷新页表。但是你知道 elf 地址就像 0x0804900。如果我们想执行 exe `jmp elf-address`，内核如何将 elf-address 映射到 MMU 可以使用的地址。你知道 MMU 地址是基于段数和页数的。

是否有操作系统会查找的地图表？当 exec 时`jmp elf-address`，操作系统会先将 elf-address 映射到 MMU 地址吗？例如： `elf-address <==> MMU-address`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:59:35.280

我真的不认为 Linux 内核在[execve(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/execve.2.html)一些二进制 ELF 可执行文件时将该文件加载到物理 RAM 中。

它只是将文件的一些 ELF 段映射到进程的[地址空间](http://en.wikipedia.org/wiki/Address_space)。您可以通过读取（例如使用`cat`命令）伪文件来了解进程 1234 的地址空间`/proc/1234/maps`；尝试`cat /proc/self/maps`显示运行该进程的内存映射的命令`cat`。

所以基本上什么`execve(2)`是某种内存映射，就像[mmap(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html)一样。它设置[MMU](http://en.wikipedia.org/wiki/Memory_management_unit)，因此任何对某些内容的初始访问都会导致[内存地址出错](http://en.wikipedia.org/wiki/Memory_address)，然后内核将从文件中加载（[按需分页](http://en.wikipedia.org/wiki/Demand_paging)）一些页面。阅读有关[虚拟内存](http://en.wikipedia.org/wiki/Virtual_memory)和[内存管理](http://en.wikipedia.org/wiki/Memory_management)的信息。

你真的应该读像[Advanced Linux Programming这样的书](http://advancedlinuxprogramming.com/)

正如 FGE 评论的那样，存在[ASLR](http://en.wikipedia.org/wiki/ASLR)的问题。

# php - 禁用特定模板的 Twig 编译缓存

> ID：14234464
> 
> 赞同：8
> 
> 时间：2013-01-09T11:43:48.450
> 
> 标签：php, symfony, twig

有没有办法禁用特定模板的 Twig 编译缓存？

我正在使用 Twig 作为我的电子邮件模板。当有人更新这些模板时，它们会被写入磁盘。尽管在生产中，我应该清除整个缓存，否则不会注意到更新。

这就是为什么我要为这些特定模板禁用 Twig 缓存的原因。我不介意额外的处理能力，因为清除我的整个缓存对性能的影响更大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:47:40.167

我认为您的答案可能不是禁用特定模板的缓存，而是在更新模板后清除模板的缓存。我没有测试过下面的代码，但它似乎是合理的。玩一下

在保存模板的操作/服务中（保存模板后）：

```
$fileCache = $this->container->get('twig')->getCacheFilename('AcmeDemoBundle:Default:index.html.twig');

if (is_file($fileCache)) {
    @unlink($fileCache);
} 
```

有关更多信息，请查看 /vendor/twig/twig/lib/Twig/Environment.php (\Twig_Environment) 中的 twig 缓存文件是如何提交的——方法 loadTemplate()。

# javascript - 试图显示和隐藏部分 html 文档

> ID：14234467
> 
> 赞同：0
> 
> 时间：2013-01-09T11:43:56.547
> 
> 标签：javascript, html, dom

这是我的页面的 HTML：

```
 <!DOCTYPE html>

        <html>

    <body>

    <link href = "sites.css" type = "text/css" rel = "stylesheet"/>

    <image src = "beach_houses.jpg" id = "sites">

    <form id = "details">
     Please enter your name: <input type = "text" id = "name"><br/><br/>
     Please provide a valid e-mail: <input type = "text" id = "e-mail"><br/><br/>
     I am on a tour<input type = "checkbox" id = "status">

    <div id = "further"><br/>
     Indicate your gender 
     M<input type = "radio" name = "gender"value = "male" id = "M"> 
     F<input type = "radio" name = "gender" value = "female" id = "F">
  </div><br/></br>
    <input type = "submit" value = "submit!">
</form>

    <br/><br/><div id = "error" ></div>

    </body>

    <script src = "function.js" type = "text/javascript"></script>

    </html> 
```

这是javascript：

```
Images.onclick = function() {

clearInterval(iHandle);
}

function prepare() {

document.getElementById("status").onclick = function() {

    if (document.getElementById("status").checked) 

        document.getElementById("further").style.display = "block";
    else 

        document.getElementById("further").style.display = "none";

    document.getElementById("further").style.display = "none";

};

document.getElementById("details").onsubmit = function() {

    if(document.getElementById("name").value == "") {

        document.getElementById("error").innerHTML = "Please provide a name!";

        document.getElementById("error").style.color = "red";

        return false;

    }

    else if (document.getElementById("e-mail").value == "") {

        document.getElementById("error").innerHTML = "Please provide a valid e-mail address!";

        document.getElementById("error").style.color = "red";

        return false;

    }
};

}

window.onload = function() {

    prepare();
}; 
```

这个想法是，当我在旅行复选框被选中时，指示您的性别问题会弹出。然而，情况恰恰相反；默认情况下，该问题似乎是可见的，当我单击复选框时它变得不可见。为什么是这样？

提前谢谢你saad

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:51:58.553

`<div id = "further"`将 >更改为`<div id = "further" style="display:none">`

和

```
document.getElementById("status").onclick = function() {

    if (document.getElementById("status").checked) {

        document.getElementById("further").style.display = "block";
    }
    else {
        document.getElementById("further").style.display = "none";
    }
}; 
```

# c# - 如何将向量和四元数映射到特定的游戏对象？

> ID：14234474
> 
> 赞同：-3
> 
> 时间：2013-01-09T11:44:14.833
> 
> 标签：c#, vector, unity3d, quaternions

目标是从 XML 文件中获取游戏对象名称和向量、四元数轴以及将轴映射到游戏对象名称。

确切的问题是：将 GameObjects 映射到其轴，并为该轴分配一个值以根据其轴移动映射的 GameObjects。XML 方面：我可以读取每个 Name 和 MapTo 属性，但我不知道如何将 Name 和 MapTo 属性相互映射，以便将值分配给映射的 GameObjects 的轴。

```
<GameObject Name="Cube" MapTo="x"></GameObject>//x-y are vector axis
<GameObject Name="Cube" MapTo="y"></GameObject>
<GameObject Name="Cube" MapTo="z"></GameObject>
<GameObject Name="Cube" MapTo="a"></GameObject>//a-z are quaternion's axis 
<GameObject Name="Cube" MapTo="b"></GameObject>
<GameObject Name="Cube" MapTo="c"></GameObject>
<GameObject Name="Capsule" MapTo="a"></GameObject>
<GameObject Name="Capsule" MapTo="c"></GameObject>
<GameObject Name="Cylinder" MapTo="x"></GameObject> 
```

我不知道该尝试什么，但我想有一些东西可以使用。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:10:26.563

我不确定我是否完全理解这个问题，但如果您的目标是移动/旋转您根据 XML 映射的一组游戏对象，我建议创建一个脚本来处理要重新分配的“MapTo”参数轴的变量，例如：

```
Vector3 objRotation;
Vector3 objMovement;

switch(MaptTo){
   case "x":
       objMovement.x = MaptTo
   break;
} 
```

希望它可以帮助您解决您的问题。

# mysql - 在表中区分和计数

> ID：14234475
> 
> 赞同：0
> 
> 时间：2013-01-09T11:44:19.857
> 
> 标签：mysql, select, count, distinct

需要编写一个 MySQL 查询来检查数据库表并获取不同的值及其计数。

![在此处输入图像描述](../Images/fdc0bb48120229ea3b03e8ed2c316c1d.png)

```
select distinct(fruits), count(distinct(fruits)) from table; 
```

这足够了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T11:51:53.087

为什么不使用`group by`

```
select fruits, count(fruits) as fc
from table
group by fruits
order by fc desc; 
```

# erlang - 在erlang中转换日期

> ID：14234482
> 
> 赞同：-1
> 
> 时间：2013-01-09T11:44:40.590
> 
> 标签：erlang

我在 erlang 中开发了一个函数，它以这种形式返回日期，例如：`15-Dec-2011`

我想转换这个日期以便在这种情况下成为`15-12-2011`（所以`DEC`成为`12`）

这是应转换的日期示例

```
15-Dec-2011
19-Jan-2012
16-Feb-2012
15-Mar-2012
19-Apr-2012
17-May-2012 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:10:35.290

我将在这篇文章中给出与上一篇关于如何在 erlang 中转换日期的文章基本相同的答案。

简单的解决方案是使用 ec_date 或 dh_date。

[在erlang中转换日期](https://stackoverflow.com/questions/14177580/convert-date-in-erlang)

ec_date:format 采用类似于 php`date`函数的方式获取格式参数。

# php - 对使用 SSL 感到困惑

> ID：14234484
> 
> 赞同：0
> 
> 时间：2013-01-09T11:44:42.353
> 
> 标签：php, javascript, security, ssl, shared

我有一个来自我的网络主机的共享 SSL 证书（为了这篇文章）看起来像这样：

```
https://some-ssl-cert/mysite 
```

转到该链接将转到我的网站，并`https://`用绿色挂锁显示它。

正常网站是`http://`

如何将网站的主登录名显示为`https://`？

显然我无法告诉或重定向我的用户，`https://some-ssl-cert/mysite`所以我对如何实现这一点感到非常困惑。

最后，当我需要在其他页面上发送敏感信息时，`https://`我会简单地将这些信息发送到`https://some-ssl-cert/mysite?`

因此，例如，如果我需要发出一个安全的 ajax 请求或其他东西，我会通过 .php 文件`https://some-ssl-cert/mysite`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:51:37.127

> 如何将网站的主登录名显示为 https://？

您需要为您的站点使用的主机名提供 SSL 证书。您还需要您的主机来支持它。

> 最后，当我需要在不是 https:// 的其他页面上发送敏感信息时，我会简单地将这些信息发送到`https://some-ssl-cert/mysite`吗？

如果您需要发送敏感信息，则需要通过 HTTPS 进行。如果您使用的是纯 HTTP，则需要重定向到 HTTPS 站点。

> 因此，例如，如果我需要发出一个安全的 ajax 请求或其他东西，我会通过 .php 文件`https://some-ssl-cert/mysite`吗？

整个*网页*需要通过 HTTPS 提供服务。除此以外：

*   这将是一个跨域请求，并且 ajax 将失败（CORS/JSONP/et al 除外）
*   非安全页面可能会受到干扰（例如，添加的 JS 会窃取安全获取的数据）。

# asp.net-mvc - 推荐人空帮助我

> ID：14234486
> 
> 赞同：2
> 
> 时间：2013-01-09T11:44:47.410
> 
> 标签：asp.net-mvc, validation, referer

早上好家伙。我有以下问题。我创建了一个覆盖方法来验证引用者：

```
public class VerifyOutUrlReferer : AuthorizeAttribute
{
    public override void OnAuthorization(AuthorizationContext filterContext)
    {
        if (filterContext.HttpContext != null)
        {
            if (filterContext.HttpContext.Request.UrlReferrer == null)
                filterContext.Result = new RedirectToRouteResult(
                    new RouteValueDictionary
                        {
                            {"controller", "Validate"},
                            {"action", "Referer"},
                            {"code", 123ER}
                        });
        }
    }
}

[VerifyOutUrlReferer]
public ActionResult GeneralError(string errorCode)
{
    return View();
} 
```

并将其添加到方法之上...

我尝试通过验证 404 错误的屏幕控制器调用此方法，因此由于引用者为空，因此并不总是重定向到她。有人可以帮助我如何通过控制器调用此屏幕。

# html - 使用 R 中的 xml 包提取特定的 HTML 元素

> ID：14234498
> 
> 赞同：1
> 
> 时间：2013-01-09T11:45:22.633
> 
> 标签：html, r, parsing

我正在使用带有 xml 包的 R 来解析存储在 html 文件中的数据。使用来自另一个问题（[https://stackoverflow.com/a/1849388/1409652](https://stackoverflow.com/a/1849388/1409652)）的建议，我正在使用 readHTMLTable 函数在这个问题上做饭。

我有一个问题，即感兴趣的 html 表有两个标题。其中一个没有被 readHTMLTable 拾取，并提供了一些与数据相关的单元的识别信息（这些信息因所有不同的 html 文件而异，所以我需要阅读它们，而不仅仅是放入默认值）。

我认为我需要将 xml 包中的一个函数指向 html 文件并定位我想要的特定行。不幸的是，我不知道哪个功能以及我对这方面的术语的了解不是很好。我在下面放了一个 HTML 代码示例，但没有包含值，因为它们很敏感，如果有帮助，我可以交换一些虚拟数据并发布它。因此，包含“Period”、“Volume”、“Tariff”的标题以及表体中的所有数据都很好。包含“Unit1”、“Unit2 等”的标题未通过。

```
<thead> 
<tr> 
<th class="center" colspan="1" rowspan="1"></th><th class="center" onmouseover="javascript:Tip('Unit1');" onmouseout="javascript:UnTip('');" colspan="4" rowspan="1">Unit1</th><th class="center" onmouseover="javascript:Tip('Unit2');" onmouseout="javascript:UnTip('');" colspan="4" rowspan="1">Unit2</th><th class="center" onmouseover="javascript:Tip('Unit3');" onmouseout="javascript:UnTip('');" colspan="4" rowspan="1">Unit3</th><th class="center" onmouseover="javascript:Tip('Others');" onmouseout="javascript:UnTip('');" colspan="4" rowspan="1">Others</th> 
</tr><tr> 
<th class="left" colspan="1" rowspan="1">Period</th><th class="left" colspan="1" rowspan="1">Volume</th><th class="left" colspan="1" rowspan="1">%</th><th class="left" colspan="1" rowspan="1">Tariff</th><th class="left" colspan="1" rowspan="1">%</th><th class="left" colspan="1" rowspan="1">Volume</th><th class="left" colspan="1" rowspan="1">%</th><th class="left" colspan="1" rowspan="1">Tariff</th><th class="left" colspan="1" rowspan="1">%</th><th class="left" colspan="1" rowspan="1">Volume</th><th class="left" colspan="1" rowspan="1">%</th><th class="left" colspan="1" rowspan="1">Tariff</th><th class="left" colspan="1" rowspan="1">%</th><th class="left" colspan="1" rowspan="1">Volume</th><th class="left" colspan="1" rowspan="1">%</th><th class="left" colspan="1" rowspan="1">Tariff</th><th class="left" colspan="1" rowspan="1">%</th> 
</tr> 
</thead>
<tbody>…all the data…&lt;/tbody> 
```

总而言之，是否有人对如何使用 R 中的 xml 包提取上述 html 中的单元信息有任何指示（尽管如果这是最好的方法，也很乐意使用其他包）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:40:00.277

我所需要的只是一些学科知识;-)

使用 xpath 语法，我设法使用以下内容获取单位名称列表：

```
xpathSApply(doc, "//th[@class='center']/text()") 
```

相信我也可以通过解决这些 // 来提高效率。

# java - 从 MySQL 下载 Android App 中数据的有效方法

> ID：14234502
> 
> 赞同：1
> 
> 时间：2013-01-09T11:45:37.767
> 
> 标签：java, android, mysql, json, download

我只是想知道我的代码在下载方面是否可以。我的应用程序需要来自数据库的大量数据，因此快速下载时间至关重要。下载时间还可以，但我认为它可以更有效地编程。你能看看这个吗？此类下载许多不同的公司，下载时将它们放入与其类别相对应的 HashMap 中。完成下载此类后，返回一个包含多个 Hashmap（类别）的 HashMap，并在这些 Hashmap 中下载下载的数据。不要介意实际的工作流程，但请专注于此类下载数据的方式。有没有办法更快地做到这一点？

```
public class CompanyDAO {

    private static Controller delegate;
    private static String companyUrl = "http:// URL HERE";

    private Map<Object, Object> companyMap = new HashMap<Object, Object>();
    private Map<String, Integer> pinMap = new HashMap<String, Integer>();

    public CompanyDAO (Controller _delegate, Map<String, Integer> map) {
        delegate = _delegate; //reference to controller
        pinMap = map;

    }

    public void getCompanyData(ArrayList<Object> categoriesArray) {
        for (int i = 0; i < categoriesArray.size(); i++) {
            Map<String, Object> categoriesInMap = new HashMap<String, Object>();
            //ArrayList<Object> categoriesInMapArray = new ArrayList<Object>();
            companyMap.put(categoriesArray.get(i), categoriesInMap);
        }
        this.downloadCompanyData();
    }

    private void downloadCompanyData() {

        companyUrl = companyUrl + delegate.ID;
       try {
           new DownloadCompanyData().execute(companyUrl).get(10000, TimeUnit.MILLISECONDS);
       } catch (InterruptedException e) {
           // TODO Auto-generated catch block
           e.printStackTrace();
       } catch (ExecutionException e) {
           // TODO Auto-generated catch block
           e.printStackTrace();
       } catch (TimeoutException e) {
           // TODO Auto-generated catch block
           e.printStackTrace();
       }
    }

   private class DownloadCompanyData extends AsyncTask<String, Void, String> {
       @Override
       protected String doInBackground(String... urls) {
           String response = "";
           for (String url : urls) {
               DefaultHttpClient client = new DefaultHttpClient();
               HttpGet httpGet = new HttpGet(url);
               try {
                   HttpResponse execute = client.execute(httpGet);
                   InputStream content = execute.getEntity().getContent();

                   BufferedReader buffer = new BufferedReader(new InputStreamReader(content));
                   String s = "";
                   while ((s = buffer.readLine()) != null) {
                       response += s;
                   }

               } catch (Exception e) {
                   e.printStackTrace();
               }
           }
           return response;
       }

       @SuppressWarnings("unchecked")
       @Override
       protected void onPostExecute(String result) {

           JSONArray companyDataArray;

           try {
               companyDataArray = new JSONArray(result);

               for(int i=0;i<companyDataArray.length();i++){
                   JSONObject id = companyDataArray.getJSONObject(i);
                   String catName = id.getString(Controller.CAT_NAME);

                   if (companyMap.get(catName) != null) {
                       Markers marker = new Markers(new LatLng(id.getDouble("latitude"), id.getDouble("longitude")), id.getString(Controller.CAT_NAME), id.getString(Controller.ID), id.getString(Controller.SUBSCRIPTION), pinMap.get(catName), id.getString(Controller.TITLE), id.getString(Controller.COMPANY_NAME), id.getString(Controller.WWW), id.getString(Controller.STREET), id.getString(Controller.HOUSE_NUMBER), id.getString(Controller.HOUSE_ADD));

                       ((Map<String,Object>) companyMap.get(catName)).put(id.getString(Controller.TITLE), marker.markerInformationMap);

                   }

               }
               delegate.setCompanyHashMap(companyMap);

           } catch (JSONException e) {
               // TODO Auto-generated catch block
               e.printStackTrace();
           }

       }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:05:35.457

我猜你错过了重点`AsyncTask`

它应该完成所有工作`doInBackground()`，然后使用 将`onPostExecute`其传递到 UI。

但是你正在做的是在 . 上进行网络操作`doInBackground`和数据解析`onPostExecute`。

此外，JSON 对象是需要进一步解析的原始数据。您应该在后台进行所有解析。例如，假设您的 companyData 是地址、电话号码、大小和名称。你可以有一个这样的课程（ps我在没有测试的情况下写了所有这些，这里会有一个小错误，但你会明白的）：

```
 public class CompanyData{
     private String name, address, phone;
     private int size;
     public CompanyData(JsonObject jo){
         name = jo.getString("name");
         address = jo.getString("address");
         phone = jo.getString("phone");
         size = jo.getInt("size");
     }
     // put a bunch of get methods here...
     // getName(), getAddress(), etc.
 } 
```

然后在您的“受保护地图 doInBackground(String... urls)”上完成网络操作，创建 JsonArray，创建一个`Map<String,CompanyData>`，循环遍历数组，创建 CompanyData 对象并将它们放入 Map 并将地图返回到您的`protected void onPostExecute(Map<String,CompanyData> result)`内部和内部执行后它只是将此结果传递给 UI。

快乐编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T01:39:08.123

我总是在做这样的事情。。

```
...
private ProgressDialog pDialog; 
ArrayList<HashMap<String, String>> CompanyList;
JSONParser jParser = new JSONParser();
JSONArray Company = null;
static String url_all_company = "http://your_site/files.php";
....

private class CompanyData extends AsyncTask<Void, Void, Void> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(MainActivity.this);
        pDialog.setMessage("Load data..");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
    }

    @Override
    protected Void doInBackground(Void... params) {
        CompanyList = new ArrayList<HashMap<String, String>>();

        // Building Parameters if any.. to fetching all data, don't declare any param
        List<NameValuePair> param = new ArrayList<NameValuePair>();
        param.add(new BasicNameValuePair("uid", uid));

        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(url_all_company, "POST", param);

        // Check your log cat for JSON reponse
        Log.d("All Company: ", json.toString());

        try {
            // Checking for SUCCESS TAG
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // Company found
                // Getting Array of Company
                Company = json.getJSONArray(TAG_COMPANIES);

                // looping through All Company
                for (int i = 0; i < Company.length(); i++) {
                    JSONObject json = Company.getJSONObject(i);

                    // Storing each json item in variable
                    String id = json.getString(TAG_GID);
                    String name = json.getString(TAG_NAME);
                    String jml = json.getString(TAG_EMPLOYEE);
                    String deskripsi = json.getString(TAG_DESKRIPSI);
                    String logo = json.getString(TAG_LOGO);

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_GID, id);
                    map.put(TAG_NAME, name);
                    map.put(TAG_EMPLOYEE, jml);
                    map.put(TAG_DESKRIPSI, deskripsi);
                    map.put(TAG_LOGO, logo);

                    // adding HashList to ArrayList
                    CompanyList.add(map);

                }
            } else {
                // no CompanyList found

            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;    

    }   

    @Override
    protected void onPostExecute(Void args) {
         list=(ListView)findViewById(R.id.list);

         // Getting adapter by passing data ArrayList
         adapter=new LazyAdapter(MainActivity.this, CompanyList);        
         list.setAdapter(adapter);

         pDialog.dismiss();

    }

} 
```

# c# - 从不同网站呼叫时保持会话

> ID：14234505
> 
> 赞同：4
> 
> 时间：2013-01-09T11:45:43.867
> 
> 标签：c#, asp.net

我有两个网站将其视为**website1**和**website2**。

在 website2 中有一个登录页面。当用户单击登录按钮时，它将调用 website1 中的 HTTPhandler 来验证用户。成功验证后，用户信息将存储在来自处理程序的 Session 变量中。

然后它会重定向到website1中的页面page1.aspx。但是之前设置的会话在page1.aspx中不可用。会出现什么问题？

我在第一个请求（从 webiste 2 调用网站 1 中的处理程序时）和第二个请求（从处理程序重定向到 page1.aspx）中检查了会话 ID，会话 ID 不同。

如何保留会话数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:47:18.967

您需要将会话数据存储在与两个网站共享的另一个进程中。您可以通过两种不同的方式进行操作：

1.  配置 SQL 服务器
2.  配置 SessionState 服务，一个用于共享信息的 Windows 服务。

在这两种情况下，您都必须更改两个 web.config 文件以支持新的会话模式。即使用 SQL：

准备一个数据库（从命令提示符）：

```
cd \Windows\Microsoft.NET\Framework\v4.0.30319
aspnet_regsql.exe  -ssadd -E -S localhost\sqlexpress 
```

修改网页配置如下：

```
<sessionState mode="SQLServer"
        sqlConnectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;Initial Catalog=Test" allowCustomSqlDatabase="true"/> 
```

您无需更改代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T12:45:52.893

如果我错了，请纠正我，AFAIK 不同的域不能共享一个会话。处理此问题的一种方法是通过 cookie [加密值以确保安全] 将数据传送到另一个站点，然后将此 cookie 值复制到接收它的另一个站点的会话中并销毁 cookie。

如果站点位于不同的服务器中，您需要处理“粘性会话”，以便服务器共享会话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T12:43:07.243

这种情况听起来有点类似于我之前经历和工作过的情况，其中一个 Web 应用程序充当登录页面，而另一个是完成所有工作的实际应用程序。我可以描述我所做的，希望你觉得它有用。

像您一样，我有一个具有登录页面的网络应用程序（因此在您的示例中，这将是**website2**）。当登录表单提交后，我会重定向到**website1**`Login.aspx`中的一个假页面- 我认为这是我们不同的地方，因为我不确定您使用.**`HttpHandler`**

 **在我的例子中，**website2** `Login.aspx`页面实际上只是进入 Web 应用程序的途径；它没有标记，只有代码隐藏，它将验证用户，执行设置（例如设置会话变量），然后重定向到另一个页面，例如`Homepage.aspx`. 这个特殊的场景对我有用，所以也许你的问题围绕着使用 a`HttpHandler`虽然我无法告诉你为什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T06:58:30.703

我认为 IRequiresSessionState 无济于事，因为上下文不同。一旦我们遇到同样的问题，但就是将 asp 会话变量传递给 .net。你怎么也可以在这里做到。现在在这两个网站上创建一个页面 setsession.aspx 如果你在页面上说 web1/page5.aspx 并想去 web2/page3.aspx 你重定向到 web1/setsession.aspx？**togo1** =web2/page3.aspx 在 setsession.aspx 逻辑中提取会话数据并将它们放在查询字符串中

所以 web1/setsession 将重定向到 web2/setsession.aspx?sess1=value1&sess2=value2& **togo=page3.aspx**

web2/setsession.aspx 将检查 togo 查询字符串，如果找到，将提取所有查询字符串名称和值，并将它们设置在会话中，然后重定向到 togo 值。

你需要仔细区分togo1和togo。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-19T13:21:49.877

网站之间的会话共享将需要手动编码。您可以破解 asp.net 框架来使其正常工作，但我觉得这不是实现您所设定的目标的干净方式。

如果用户身份验证是您从网站上做的所有事情，是否可以使用替代方法？单点登录机制将在这里为您提供帮助。

在这种情况下，像[SAMLSSO](http://samlsso.codeplex.com/)这样的东西可以帮助你。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-22T04:07:06.567

您有两个托管在不同服务器上的网站，这意味着您有两个不同的进程在不同的机器上运行，因此会话肯定会有所不同。同一会话不能跨进程共享，因为默认情况下 asp.net 支持内存中会话。

在这里，您需要考虑存储可以在两个进程之间共享的会话信息（即进程外）。在数据库中存储会话信息的理想方式。为此，您可以考虑上面的 Stefano Altieri 代码示例。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-16T10:16:56.357

为了在运行 ASP.NET Web 应用程序的两个不同服务器上保持相同的会话日期，您必须将会话状态配置为在进程外进行管理。这意味着实际的会话状态数据变量将存储在工作进程之外以及能够使会话数据对其他机器可用的另一个进程中。

为此，您可以将应用程序配置为使用 SQL Server 存储会话状态并使其可用于场中的多个服务器。TechNet 文章[配置 SQL Server 以维护会话状态 (IIS 7)](http://technet.microsoft.com/en-us/library/cc753897%28v=ws.10%29.aspx)提供了有关在 IIS 7 中完成此操作的详细信息。

如果您使用的是 IIS 6，那么配置步骤会有所不同，如果需要，我可以提供更多详细信息。

为了使这个工作，您需要确保两台服务器都在同一个域中运行应用程序，例如 myapp.com，否则 ASP.Net 会话 cookie 将不会在两台服务器之间传递。ASP.Net 使用 cookie 来查找存储在 SQL Server 中的会话状态，因此如果 cookie 未在两个服务器之间的请求上传递，则不会找到任何匹配的会话。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-22T11:52:42.067

我认为您根本不想在两个网站之间共享会话信息。根据我从评论中收集到的信息，您真正想做的是让用户在一个网站上进行身份验证（给您一个经过验证的用户名和密码），然后将该“登录”状态转移到另一个网站'不为自己处理身份验证。

**您所描述的是*委托身份验证*模型。**

在此模型中，您的应用程序将身份验证移交给它信任的其他系统，以提供有关用户的信息。

有两个众所周知的协议可以提供这种机制：

[**OpenID**](http://openid.net/)
这旨在方便用户使用自己的身份提供者（Google、Facebook、Microsoft 帐户）登录。如果您正在运行面向公众的网站，这是一个非常好的选择，因为大多数用户已经拥有可以登录的帐户。

[**WS-Federation**](http://en.wikipedia.org/wiki/WS-Federation)
这旨在帮助用户使用由已知可信方（例如合作伙伴组织）管理的身份提供者登录。

[从版本 4.5 开始，.NET Framework 通过Windows Identity Foundation](http://msdn.microsoft.com/en-us/library/hh377151.aspx)组件内置了对 WS-Federation 的支持（并且还可以单独下载早期版本）。这会自动将您的身份验证委托给身份提供者的任务。

如果您想创建自己的身份提供程序，它还提供组件供您编写自己的身份提供程序，但您不必这样做；您可以找到各种现有的实现来为您执行这项工作。

* * *

您尝试解决的问题是一个非常困难的问题，尤其是尝试使其足够安全以使其可靠。好消息是，比你或我更聪明的人已经花了数年时间研究出非常聪明的方法来做到这一点。您应该使用他们所做的事情，而不是试图拼凑一些超出 Session 状态的东西。

从长远来看，最好让更聪明的人为你做艰苦的工作。**

# ios - 无法使用 iTunes 在某些具有开发人员证书的 iOS 设备中安装 .ipa 版本

> ID：14234511
> 
> 赞同：0
> 
> 时间：2013-01-09T11:46:01.213
> 
> 标签：ios

高级感谢大家...

实际上，我正在使用开发人员证书为 iOS 设备创建构建。我们已经添加了近 28 台设备，之后我又添加了 3 台设备并修改了开发者帐户中的证书，还从我的 Xcode 管理器中删除了旧配置文件，并使用刷新按钮添加了配置文件。但是那个版本没有安装到我新添加的 3 台设备上。但除了新添加的 3 台设备外，所有其他 28 台设备都安装了相同的版本。

xcode版本：4.5.2新增设备有：iPhone 4s(iOS 5.1.1)、5(iOS 6.0.2)、5(iOS 6.0.2)。iTunes 版本：11.0.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:04:59.050

您显然没有在开发者帐户的 Ad-Hoc 证书中添加其他设备。

添加设备后，您需要将它们添加到证书中，重新创建（更新）证书，然后将其下载到您的 Mac 并导入。

确保删除旧证书，以免混淆。此外，您肯定需要使用新证书文件重新构建您的 ipa 文件（尽管可以使用新证书重新签署 Ipa 文件，但重建它更容易）。

TestFlightApp（如果您正在使用它）允许使用新证书对现有构建进行重新签名。

# javascript - Javascript调用并应用于构造函数

> ID：14234517
> 
> 赞同：2
> 
> 时间：2013-01-09T11:46:23.010
> 
> 标签：javascript, inheritance, constructor, call, apply

我了解调用（和应用）方法在以下示例中的工作原理。

```
var Bob = {
  name: "Bob",
  greet: function() {
   alert("Hi, I'm " + this.name);
  }
}

var Alice = {
 name: "Alice",
};

Bob.greet.call(Alice);   // Hi, I'm Alice 
```

据我了解，上面发生的事情是他在 Alice 的范围内调用了 Bob 对象的 greet 方法。

有人可以在下面的示例中解释幕后发生的事情，其中​​调用方法用于允许继承的构造函数吗？

```
function Product(name, price) {
  this.name = name;
  this.price = price;

}

function Food(name, price) {
  Product.call(this, name, price);
  this.category = 'food';
}

var chicken = new Food('chicken','40');
console.log(chicken);  //{ name= "chicken", price="40", category="food"} 
```

我无法在第一个示例和第二个示例之间建立联系，其中第一个示例调用方法是在一个正在执行某些操作（警报）的函数上调用的，而在第二个示例中，调用方法用于构造函数正在初始化一些属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:49:24.907

这是一种“借用”构造函数的方式`Product`来初始化你的 new `Food`。

当您使用 调用函数时`new`，您将设置`this`为新实例。然后你正在做`Product.call`（即调用`Product`函数并将函数`this`内部设置`Product`为你的新`Food`实例（在`this`内部`Food`）），并传递你的`name`and `price`。

之后`Product.call(this, name, price);`你应该找到那个`this.name`并且`this.price`已经设置好了。

这不允许继承，也不会*获得*继承；`Product`它只是在你的新`Food`实例上执行构造函数。

要获得继承，您还必须将`prototype`of设置`Food`为新`Product`实例；

```
function Product(name, price) {
  this.name = name;
  this.price = price;
}

Product.prototype.showPriceIn = function (currency) {
    alert(this.price + currency);
} 

function Food(name, price) {
  Product.call(this, name, price);
  this.category = 'food';
}

Food.prototype = new Product;

var chicken = new Food('chicken','40');
chicken.showPriceIn("$"); 
```

[http://jsfiddle.net/hPWMN/](http://jsfiddle.net/hPWMN/)

* * *

**注意：**小心说“Bob 是在 Alice的***范围内调用的”；***这不是真的。Bob 没有继承 Alice 的作用域，函数`this`内部的值`greet`只是被改变为`Alice`。继承范围意味着 Bob 可以访问私有变量等，而他没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T11:52:59.990

我会尝试用简单的例子来解释，这里是

```
function Human(name,surname){
    this.name = name;
    this.surname = surname;
}

Human.prototype.method = function(){
    alert("Hi " + this.name + " " + this.surname);
};

var obj = new Human("Name","Surname");
obj.method(); 
```

在这种情况下`Human`是构造函数，您在其中定义属性名称和姓氏。 函数在我使用键的地方使用`prototype`函数进行扩展。它指的是从外部定义的指定对象。`method``this`

与`var obj = new Human("Name","Surname");`您一起初始化`Human`类并在那里传递值（姓名，姓氏）。在这种情况下，您有一个名为 的对象`obj`，但您可以定义任意数量的对象

# c# - 在 MS Word 中书签的行尾输入的数据不是它应该在的位置

> ID：14234518
> 
> 赞同：0
> 
> 时间：2013-01-09T11:46:30.887
> 
> 标签：c#, visual-studio-2010, ms-word, openxml, bookmarks

我正在将数据库中的数据输入到 MS Word 中的书签中，每个数据都输入正确，但问题是数据的位置是输入的 - 对于每个相关的书签 - 在行尾而不是我添加书签的位置，并且我不知道为什么会这样！我在 C# 上使用 opemXml

## **更新**

```
 //  Get the main document part (document.xml).
    foreach (System.IO.Packaging.PackageRelationship documentRelationship in package.GetRelationshipsByType(documentRelationshipType))
    {
        NameTable nt = new NameTable();
        nsManager = new XmlNamespaceManager(nt);
        nsManager.AddNamespace("w", "http://schemas.openxmlformats.org/wordprocessingml/2006/main");

    Uri documentUri = PackUriHelper.ResolvePartUri(new Uri("/", UriKind.Relative), documentRelationship.TargetUri);
    documentPart = package.GetPart(documentUri);

    #region Update Document Bookmarks
    //Get document xml
    XmlDocument xdoc = new XmlDocument();
    //xdoc.Load(documentPart.GetStream());
    xdoc.Load(documentPart.GetStream(FileMode.Open, FileAccess.Read));

    //Select all bookmark nodes
    XmlNodeList nodeList = xdoc.SelectNodes("//w:bookmarkStart", nsManager);
    foreach (XmlNode node in nodeList)
    {
        if (this.SetBookmarkText(xdoc, node, "DepositNO", GetDepositNO(DepositNo))) continue;
        if (this.SetBookmarkText(xdoc, node, "AppDate", FormFunctions.Get_Application_Date(DepositNo).ToShortDateString())) continue;
        if (this.SetBookmarkText(xdoc, node, "Title", FormFunctions.Get_Application_Title(DepositNo, 0))) continue;
        if (this.SetBookmarkText(xdoc, node, "ApplicantName", Get_Application_CV_Name(AppID, 6))) continue;
        if (this.SetBookmarkText(xdoc, node, "AgentName", Get_Application_CV_Name(AppID, 7))) continue;
        if (this.SetBookmarkText(xdoc, node, "Address", Address)) continue;
        if (this.SetBookmarkText(xdoc, node, "AgentName01", Get_Application_CV_Name(AppID, 7))) continue;
        if (this.SetBookmarkText(xdoc, node, "Times", Times)) continue;
        if (this.SetBookmarkText(xdoc, node, "A", A)) continue;
        if (this.SetBookmarkText(xdoc, node, "B", B)) continue;
        if (this.SetBookmarkText(xdoc, node, "Approve", Approve)) continue;
        if (this.SetBookmarkText(xdoc, node, "RequestArabic", RequestArabic)) continue;
        if (this.SetBookmarkText(xdoc, node, "ExamTime", ExamTime)) continue;
        if (this.SetBookmarkText(xdoc, node, "Mark", Mark)) continue;
        if (this.SetBookmarkText(xdoc, node, "Fees", Fees)) continue;
        if (this.SetBookmarkText(xdoc, node, "Objection", Objection)) continue;
        if (this.SetBookmarkText(xdoc, node, "Rejection", Rejection)) continue;
        if (this.SetBookmarkText(xdoc, node, "ExamTime01", ExamTime)) continue;
        if (this.SetBookmarkText(xdoc, node, "DepositNO01", GetDepositNO(DepositNo))) continue;
    }
    #endregion

    StreamWriter streamPart = new StreamWriter(documentPart.GetStream(FileMode.Open, FileAccess.Write));
    xdoc.Save(streamPart);
    streamPart.Close();
}

package.Flush();
package.Close();

//send response to browser
string File_Name = destenation + docFileName;

//string popupScript = "<script language='javascript'>" + "window.open('" + File_Name + "', 'Document', " + "'width=700, height=600, menubar=yes, resizable=yes')" + "</script>";
//ClientScript.RegisterClientScriptBlock(this.GetType(), "PopupScriptOffer", popupScript);

Response.AddHeader("Content-Disposition", "attachment; filename=" + docFileName);
Response.WriteFile(File_Name);
Response.End(); 
```

## SetBookmarkText 函数

```
private bool SetBookmarkText(XmlDocument xdoc, XmlNode node, string bookmarkName, string bookmarkValue)
    {
        if (node.NextSibling.Name.ToString() == "w:bookmarkEnd")
        {
            if (node.Attributes["w:name"].Value == bookmarkName)
            {
                //get the node previous sibling style ("w:rPr") to apply to the bookmark text
                XmlNode nodeStyle = node.PreviousSibling.CloneNode(true);

            //parent node "w:p"
            XmlNode bookmrkParent = node.ParentNode;

            XmlElement tagRun;
            tagRun = xdoc.CreateElement("w:r", nsManager.LookupNamespace("w"));
            bookmrkParent.AppendChild(tagRun);

            if (nodeStyle.SelectSingleNode("//w:rPr", nsManager) != null)
                tagRun.AppendChild(nodeStyle.SelectSingleNode("//w:rPr", nsManager));

            XmlElement tagText;
            tagText = xdoc.CreateElement("w:t", nsManager.LookupNamespace("w"));
            tagRun.AppendChild(tagText);

            //*** insert text into part as a Text node 
            XmlNode nodeText;
            nodeText = xdoc.CreateNode(XmlNodeType.Text, "w:t", nsManager.LookupNamespace("w"));
            nodeText.Value = bookmarkValue;
            tagText.AppendChild(nodeText);

            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:05:33.483

书签的替换节点已添加到父节点的末尾。

换行

```
bookmrkParent.AppendChild(tagRun); 
```

和

```
bookmrkParent.InsertAfter(tagRun, node); 
```

此代码还需要您的书签带有空文本。即，书签标签之后的下一个节点始终应该是bookmarkEnd。如果您有一些示例文本作为书签内容，它将不起作用。

请像这样替换顶部的几行

```
// if (node.NextSibling.Name.ToString() == "w:bookmarkEnd")
        {
            if (node.Attributes["w:name"].Value == bookmarkName)
            {
                    while (!node.NextSibling.Name.ToString().Equals("w:bookmarkEnd"))
                    {
                        node.ParentNode.RemoveChild(node.NextSibling);
                    }
...... 
```

如果我遇到更多问题，将更新。

当书签遍历单个父节点时，您的逻辑会出现问题。我还在解决它。

# xna - 如何检查 XNA 4.0 中的边界框？

> ID：14234519
> 
> 赞同：3
> 
> 时间：2013-01-09T11:46:33.017
> 
> 标签：xna, xna-4.0, collision, bounding-box

我想在 XNA 4.0 中使用类 BoundingBox 来检查立方体与立方体或立方体与球体之间的碰撞？我知道 BoundingSphere，但我不知道使用 BoundingBox。有任何关于这个的好样本！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T13:20:19.593

你制作这样的边界框：

```
Vector3 CenterOfBox = new Vector3(10,10,10);
int Width = 10;
int Height = 10;
BoundingBox BoundingBox1 = new BoundingBox(CenterOfBox - new Vector(Width/2,Height/2,Width/2),CenterOfBox + new Vector(Width/2,Height/2,Width/2)); 
```

更多信息：http: [//msdn.microsoft.com/en-us/library/microsoft.xna.framework.boundingbox.boundingbox.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.boundingbox.boundingbox.aspx)

假设您有 BoundingBox1 和 BoundingBox2

然后你可以检查它们是否与：

```
if(BoundingBox1.Intersect(BoundingBox2))
{
    //They hit
}
else
{
    //They don't hit
} 
```

您还可以在 Intersect 函数中传递一个 BoundingSphere

更多信息：http: [//msdn.microsoft.com/en-us/library/microsoft.xna.framework.boundingbox.intersects.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.boundingbox.intersects.aspx)

# php - 自定义客户文件属性

> ID：14234520
> 
> 赞同：0
> 
> 时间：2013-01-09T11:46:40.113
> 
> 标签：php, magento, magento-1.7

我在magento管理面板的客户部分有一个自定义属性，管理员可以在其中上传每个客户唯一的文件。

我需要一种在前端显示此文件的方法，从而允许他们下载它。启用文件上传的模块是我的同事使用模块创建器创建的。链接：[http ://www.silksoftware.com/magento-module-creator/](http://www.silksoftware.com/magento-module-creator/)

如果有人有任何关于此事的信息，并且可以对此有所了解。我会很感激。

**Magento 版本**：1.7

问候，

朱利安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:05:30.363

您可以加载客户集合，告诉它选择所有属性（或者如果您知道属性代码，请使用它），然后按客户 ID 过滤...

```
 $customerId = 1;

    $customer = Mage::getModel('customer/customer')
    ->getCollection()
    ->addAttributeToSelect('*')
    ->addAttributeToFilter('entity_id', array('eq' => $customerId))
    ->getFirstItem();

    // There may be a better way, but i've found that using the collection method returns all attributes easily.

    var_dump($customer);
    die(); 
```

从 var_dump 中，您应该能够看到您想要查看的属性，然后它只是调用...

```
 $myAttributeName = Mage::getModel('customer/customer')->load(185)->getMyAttributeCode()->getName(); 
```

# javascript - 如何在javascript变量中使用括号？

> ID：14234526
> 
> 赞同：0
> 
> 时间：2013-01-09T11:47:11.553
> 
> 标签：javascript, html, forms, variables, input

> **可能重复：**
> [使用 php 和 javascript 时在复选框名称中使用括号？](https://stackoverflow.com/questions/3207469/use-brackets-in-checkbox-name-when-using-php-and-javascript)

我在 html 代码中用作输入字段的名称：

```
<input size="15" name="user[135][name]" value="" disabled=disabled> 
```

然后我想像这样在javascript中使用它：

```
if(some_condition)  { document.myform.user[135][name].disabled=false; } 
```

但这不起作用，因为字段名称中有括号。有什么方法可以在不更改html代码的情况下解决它？

经验：如果我使用名称作为 user_135_name 一切正常。

谢谢你的帮助。

马罗斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:49:11.450

我会建议添加`id`到您的输入标签如下

```
<input size="15" id="user_name_135" name="user[135][name]" value="" disabled=disabled> 
```

使用简单的 Javascript

```
if(some_condition) { document.getElementById("user_name_135").disabled=false; } 
```

使用 jQuery

```
if(some_condition){ $("#user_name_135").prop('disabled', false);} 
```

此外，如果后面只有一个语句，`if`您可以省略`{}`

```
if(some_condition) 
  document.getElementById("user_name_135").disabled=false; 
```

已编辑请将以下代码另存为 html 文件，看看它应该适合你

```
<!doctype html>
<html>
<head>
<script>
function some(){
  document.getElementById("user_name_135").disabled=false;
}
</script>
</head>
<body>
<input size="15" id="user_name_135" name="user[135][name]" value="" disabled=disabled>
<a href ="javascript:void(0)" onclick="some()">disbale input</a>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:49:40.940

我唯一的建议是不要尝试。不要在标识符中使用“特殊”字符。如果出于其他原因需要标识符采用严格的数据格式，则将其应用于专用属性（例如`data-xxx`，或类似的东西）。

解决方案是使用不同的格式，一种只包含字母数字和“基本”字符（例如下划线而不是空格等）的格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T11:49:57.103

`document.myform['user[135][name]']`应该可以，但是为什么你有这么奇怪的名字？？？

您在代码中要访问的是访问 name 属性（如果有`['name']`）数组“user”中的第 135 个字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T11:57:20.327

不要在名称中使用特殊字符，您可以这样做：

```
if(some_condition)  { 
    document.getElementsByName('user[135][name]')[0].disabled=false; 
} 
```

查看现场演示：http: [//jsfiddle.net/Lw9ns/9/](http://jsfiddle.net/Lw9ns/9/)

# spring - 提交表单时的Spring绑定异常

> ID：14234527
> 
> 赞同：8
> 
> 时间：2013-01-09T11:47:17.270
> 
> 标签：spring, spring-mvc

`Request`卡住并且不知道为什么 Spring Form 在 get call中预填充时无法成功提交[给出绑定问题] ，但在使用注释标记`loadForm`填充方法时工作正常。我可以在 github 中提供一个简单的示例来测试是否需要:)`setupFormObject``@ModelAttribute`

下面的例子

```
@ModelAttribute("showForm")
public ShowForm setupFormObject() {
    //Instantiate showForm with data
    return showForm;
}

@RequestMapping(method = RequestMethod.GET)
public ModelAndView loadForm(@RequestParam("id") String id, HttpSession session) {    
    ModelAndView modelAndView = new ModelAndView(nextPage);
    //Instantiate showForm with data
    //modelAndView.addObject("showForm", showForm);
    return modelAndView;
}

@RequestMapping(method = RequestMethod.POST)
public String post(@ModelAttribute("showForm") ShowForm showForm, BindingResult result, final RedirectAttributes redirectAttrs) {
     //I see changed data here in showForm when populated using @setupFormObject
     //See an exception in JSP with binding error if populated in loadForm
     return "";
 } 
```

按要求进行堆栈跟踪。此异常来自[github](https://github.com/hth/StatusInvoke)示例。

```
`HTTP Status 500 - Request processing failed; nested exception is org.springframework.beans.InvalidPropertyException: Invalid property 'users[0]' of bean class [com.example.UserForm]: Illegal attempt to get property 'users' threw exception; nested exception is org.springframework.beans.NullValueInNestedPathException: Invalid property 'users' of bean class [com.example.UserForm]: Could not instantiate property type [com.example.UserEntity] to auto-grow nested property path: java.lang.InstantiationException: com.example.UserEntity`

`type Exception report`

`message Request processing failed; nested exception is org.springframework.beans.InvalidPropertyException: Invalid property 'users[0]' of bean class [com.example.UserForm]: Illegal attempt to get property 'users' threw exception; nested exception is org.springframework.beans.NullValueInNestedPathException: Invalid property 'users' of bean class [com.example.UserForm]: Could not instantiate property type [com.example.UserEntity] to auto-grow nested property path: java.lang.InstantiationException: com.example.UserEntity`

`description The server encountered an internal error that prevented it from fulfilling this request.`

`exception`

`org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.beans.InvalidPropertyException: Invalid property 'users[0]' of bean class [com.example.UserForm]: Illegal attempt to get property 'users' threw exception; nested exception is org.springframework.beans.NullValueInNestedPathException: Invalid property 'users' of bean class [com.example.UserForm]: Could not instantiate property type [com.example.UserEntity] to auto-grow nested property path: java.lang.InstantiationException: com.example.UserEntity`
    `org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:927)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:822)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:796)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)`

`root cause`

`org.springframework.beans.InvalidPropertyException: Invalid property 'users[0]' of bean class [com.example.UserForm]: Illegal attempt to get property 'users' threw exception; nested exception is org.springframework.beans.NullValueInNestedPathException: Invalid property 'users' of bean class [com.example.UserForm]: Could not instantiate property type [com.example.UserEntity] to auto-grow nested property path: java.lang.InstantiationException: com.example.UserEntity
    org.springframework.beans.BeanWrapperImpl.getPropertyValue(BeanWrapperImpl.java:829)
    org.springframework.beans.BeanWrapperImpl.getNestedBeanWrapper(BeanWrapperImpl.java:556)
    org.springframework.beans.BeanWrapperImpl.getBeanWrapperForPropertyPath(BeanWrapperImpl.java:533)
    org.springframework.beans.BeanWrapperImpl.setPropertyValue(BeanWrapperImpl.java:894)
    org.springframework.beans.AbstractPropertyAccessor.setPropertyValues(AbstractPropertyAccessor.java:75)
    org.springframework.validation.DataBinder.applyPropertyValues(DataBinder.java:699)
    org.springframework.validation.DataBinder.doBind(DataBinder.java:595)
    org.springframework.web.bind.WebDataBinder.doBind(WebDataBinder.java:191)
    org.springframework.web.bind.ServletRequestDataBinder.bind(ServletRequestDataBinder.java:112)
    org.springframework.web.servlet.mvc.method.annotation.ServletModelAttributeMethodProcessor.bindRequestParameters(ServletModelAttributeMethodProcessor.java:153)
    org.springframework.web.method.annotation.ModelAttributeMethodProcessor.resolveArgument(ModelAttributeMethodProcessor.java:106)
    org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:77)
    org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:162)
    org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:123)
    org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:104)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandleMethod(RequestMappingHandlerAdapter.java:746)
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:687)
    org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:925)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:915)
    org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:822)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:796)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
` 
```

非常感谢您的帮助

谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-10T09:48:44.937

问题实际上是 UserEntity 没有默认构造函数，如果您添加构造函数，它将干净地工作：

```
public UserEntity(){
    //
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:55:29.117

我认为发生的事情是您的表单在 JSP 中声明的方式，当提交它时，它会假定在实例列表中的`UserEntity`位置 0 处有一个实例，但它实际上偶然发现了一个空引用。`users``UserForm`

是的，您确实在显示表单时向模型添加了一些 UserEntity 实例（使用映射到 HTTP Get 的 loadForm 方法），但是当您提交表单时，会创建一个新的模型对象，并且这个对象只有空值在用户列表中。

尝试将模型会话设置为范围，这样您在显示表单时创建的模型实例将在提交表单时被重用。或者创建您自己的 List 实现，当执行 get(int position) 并且那里没有任何内容时，它将返回 UserEntity 的新实例。

# c++ - 用于 c++ 的 ODBC 驱动程序

> ID：14234530
> 
> 赞同：-2
> 
> 时间：2013-01-09T11:47:25.990
> 
> 标签：c++, csv, odbc

如果有人使用 c++ 编写了 ODBC 驱动程序，并且需要操作 csv 文件（意味着使用 csv 文件作为数据库）。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:51:17.327

我的简短想法是将[MySQL ODBC 驱动程序](http://dev.mysql.com/downloads/connector/odbc/)与[CSV 存储引擎一起使用](http://dev.mysql.com/doc/refman/5.0/en/csv-storage-engine.html)

# html - IE 中的边界半径和 RTL 问题

> ID：14234531
> 
> 赞同：1
> 
> 时间：2013-01-09T11:47:26.883
> 
> 标签：html, internet-explorer, css, right-to-left

我注意到当我使用带有填充的边界半径并且 HTML 的方向是 RTL 时，它没有按预期工作。如果去掉方向部分就可以了`dir="rtl"`。下面的代码将展示它在没有和有的情况下是如何工作的`dir="rtl"`

没有`dir="rtl"`：

```
<!DOCTYPE html>
<html >
  <head>
    <title>test</title>
    </head>
    <body>
        <style type="text/css">
        .main {
            padding:5px;
        }
        .tag{
                  background-color: #0473c0;
                  border-radius: 3px 3px 3px 3px; 
                  padding:5px;
            }
        </style>
        <div class="main">
            <span class="tag">test</span>
        </div>

</body>
</html> 
```

结果： ![这里没问题](../Images/c1ec3cd4e58a874dc77a3166464a45b5.png)

与 `dir="rtl"`：

```
<!DOCTYPE html>
<html dir="rtl">
  <head>
    <title>test</title>
    </head>
    <body>
        <style type="text/css">
        .main {
            padding:5px;
        }
        .tag{
                  background-color: #0473c0;
                  border-radius: 3px 3px 3px 3px; 
                  padding:5px;
            }
        </style>
        <div class="main">
            <span class="tag">test</span>
        </div>

</body>
</html> 
```

结果：![在此处输入图像描述](../Images/23ee704ebc96294233078841ab256201.png)

如您所见，文本向左移动，背景向右移动。我在IE10和IE9上测试过。是否有任何解决此问题的方法或任何解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:01:36.237

将`.tag`显示设置为`inline-block`似乎可以解决此问题：

```
 .tag {
    background-color: #0473c0;
    border-radius: 3px 3px 3px 3px;
    padding:5px;
    display: inline-block;
  } 
```

另请参阅[此 jsfiddle](http://jsfiddle.net/2PHVp/)以获取工作演示。（在 IE10、Win8 中测试）。

但是，我不确定这是否会以任何方式与 RTL 文档中的文本流混淆。

# php - 如何在php中打印受保护的对象

> ID：14234535
> 
> 赞同：0
> 
> 时间：2013-01-09T11:47:37.833
> 
> 标签：php, zend-framework, object, protected

我正在使用 twitter oauth 功能进行登录。我从`$client = $token->getHttpClient($config)`方法中得到以下对象：

```
Zend_Oauth_Client Object
(
    [_config:protected] => Zend_Oauth_Config Object
        (
            [_signatureMethod:protected] => HMAC-SHA1
            [_requestScheme:protected] => header
            [_requestMethod:protected] => POST
            [_version:protected] => 1.0
            [_callbackUrl:protected] => http://roomstayssvn.com/register/twittercallback
            [_siteUrl:protected] => http://twitter.com/oauth
            [_requestTokenUrl:protected] => 
            [_accessTokenUrl:protected] => 
            [_authorizeUrl:protected] => 
            [_consumerKey:protected] => b04fuaxLR2d035FN8tTkQ
            [_consumerSecret:protected] => NGPPovdXDnSpivNoMNIgA609ZJIB8GVKGgs6yEF8A
            [_rsaPrivateKey:protected] => 
            [_rsaPublicKey:protected] => 
            [_token:protected] => Zend_Oauth_Token_Access Object
                (
                    [_params:protected] => Array
                        (
                            [oauth_token] => 299516752-tksjJZUR7Q2gwrDRDpLOLCrYhySTGWz1SBwTKcRU
                            [oauth_token_secret] => 7S9R2FLuB0GT4vvy0GerThUnpkbSTeSalURib48Sx20
                            [user_id] => 299516752
                            [screen_name] => jogkunal5
                        )
                 )
             .....
             ..... and so on 
```

我想打印`user_id`和`screen_name`。我怎样才能打印它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T11:54:44.400

以下应该工作

```
$user_id = $client->getToken()->getParam('user_id');
$screen_name = $client->getToken()->getParam('screen_name'); 
```

`Zend_Oauth_Client::__call()`代理`Zend_Oauth_Config`. `Zend_Oauth_Config::getToken()`返回`Zend_Oauth_Token` `Zend_Oauth_Token::getParam()`获取参数的值

[从这里](http://framework.zend.com/apidoc/1.10/_Oauth_Client.html#Zend_Oauth_Client%3a%3a__call%28%29)阅读文档。

最好使用支持 Zend 框架的好 IDE。

# ms-access-97 - Convert MS Access 97 TO MySQL 5.5 (Is there any Tools ?)

> ID：14234541
> 
> 赞同：1
> 
> 时间：2013-01-09T11:47:55.413
> 
> 标签：ms-access-97

I have huge industry level database in MS Access 97, I am redesigning the application and want to migrate all my existing data to MySQL 5.5. Is there any tool available so that I can migrate all my existing data (MS Access 97) along-with schema to MySQL 5.5 without loosing any previous data.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T21:54:10.500

我发现了一个我已经使用了大约一年的免费软件产品，它非常适合将 msaccess 97 数据库转换为 MySQL

它被称为 - Bullzip MS Access to MySQL

# python - How can I add transparent watermark to PDF printout using reportlab python library

> ID：14234544
> 
> 赞同：2
> 
> 时间：2013-01-09T11:48:02.597
> 
> 标签：python, reportlab, pypdf

I have to draw a watermark in my dynamically generated PDF Print.

I did it using the pyPdf library(By merging the Original PDF and the PDF with watermark). [http://wa5pb.freeshell.org/motd/?p=769](http://wa5pb.freeshell.org/motd/?p=769)

My problem is, I have to make the watermark image transparent, without using the mask parameter of drawImage feature in reportlab library, Since it is manual. Any suggestions?

Thanks!.

# java - 将在集合中的元素上运行方法的所有结果添加到另一个集合

> ID：14234546
> 
> 赞同：0
> 
> 时间：2013-01-09T11:48:04.283
> 
> 标签：java, collections, closures, guava, lambdaj

有没有一种 lambdaj 方法可以巧妙地做到这一点？我知道标题听起来很复杂，但下面的代码片段应该清楚：

```
private List<String[]> getContractLineItemsForDatatables(List<ContractLineItem> contractLineItems) {

    List<String[]> contractLineItemsForDatatables = Lists.newArrayList();

    for (ContractLineItem contractLineItem : contractLineItems) {

        contractLineItemsForDatatables.add( contractLineItem.getDataTablesRow());
    }

    return contractLineItemsForDatatables;
} 
```

必须有一种巧妙的方法来使用 Lambdaj 来避免上面的 for 循环，但我无法理解它。顺便说一句，contractLineItem.getDatatablesRow() 返回一个字符串 []。

所以我想做的是：

对contractLineItems 列表中的所有元素运行getDataTablesRow()，并将它们添加到contactLineItemsForDatatables 列表中。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T11:58:03.490

大部分冗长的内容来自变量名的选择，而不是 Java 代码。

```
private static List<String[]> extractDataTableRows(List<ContractLineItem> items) {
    List<String[]> ret = new ArrayList<>();
    for (ContractLineItem item : items) ret.add(item.getDataTablesRow());
    return ret;
} 
```

如果抛出异常，它看起来像

```
Exception in thread "main" java.lang.RuntimeException
at Main$ContractLineItem.getDataTablesRow(Main.java:87)
at Main.extractDataTableRows(Main.java:50)
at Main.main(Main.java:27) 
```

使用 Guava 的 lambda

```
private static List<String[]> extractDataTableRows(List<ContractLineItem> items) {
    return Lists.transform(items, new Function<ContractLineItem, String[]>() {
        @Override
        public String[] apply(ContractLineItem item) {
            return item.getDataTablesRow();
        }
    });
} 
```

如果抛出异常，它看起来像

```
Exception in thread "main" java.lang.RuntimeException
at Main$ContractLineItem.getDataTablesRow(Main.java:76)
at Main$1.apply(Main.java:38)
at Main$1.apply(Main.java:35)
at com.google.common.collect.Lists$TransformingRandomAccessList.get(Lists.java:495)
at java.util.AbstractList$Itr.next(AbstractList.java:358)
at java.util.AbstractCollection.toString(AbstractCollection.java:459)
at java.lang.String.valueOf(String.java:2957)
at java.io.PrintStream.println(PrintStream.java:821)
at Main.main(Main.java:31) 
```

注意：在使用 List 之前不会触发异常。

这个[番石榴警告](http://code.google.com/p/guava-libraries/wiki/FunctionalExplained)对我来说很清楚。

> 从 Java 7 开始，Java 中的函数式编程只能通过笨拙和冗长的匿名类使用来近似。这在 Java 8 中预计会有所改变，但 Guava 目前针对的是 Java 5 及更高版本的用户。
> 
> 过度使用 Guava 的函数式编程习惯会导致冗长、混乱、不可读和低效的代码。到目前为止，这些是 Guava 中最容易（也是最常见）被滥用的部分，当你不遗余力地让你的代码“单行”时，Guava 团队会哭泣。

使用 Java 8。

```
private static List<String[]> extractDataTableRows(List<ContractLineItem> items) {
    return items.stream()
            .<String[]>map(ContractLineItem::getDataTablesRow)
            .into(new ArrayList<>());
} 
```

添加一个你可以编写的实用方法

```
public static <E, R> List<R> map(Collection<E> elements, Function<? super E, ? extends R> function) {
    return elements.stream().<R>map(function).into(new ArrayList<R>());
}

// hiding the guff, this is more readable IMHO.
private static List<String[]> extractDataTableRows(List<ContractLineItem> items) {
    return map(items, ContractLineItem::getDataTablesRow);
} 
```

如果抛出异常，它可能看起来像这样

```
 Exception in thread "main" java.lang.RuntimeException
at Main$ContractLineItem.getDataTablesRow(Main.java:77)
at Main$$Lambda$1.apply(Unknown Source)
at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:87)
at java.util.Arrays$ArraySpliterator.forEach(Arrays.java:4551)
at java.util.stream.AbstractPipeline$PipelineHelperImpl.into(AbstractPipeline.java:197)
at java.util.stream.op.ForEachOp.evaluateSequential(ForEachOp.java:86)
at java.util.stream.op.ForEachOp.evaluateSequential(ForEachOp.java:37)
at java.util.stream.AbstractPipeline.pipeline(AbstractPipeline.java:336)
at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:142)
at java.util.Collection.addAll(Collection.java:505)
at java.util.ArrayList.addAll(ArrayList.java)
at java.util.stream.ReferencePipeline.into(ReferencePipeline.java:189)
at Main.map(Main.java:34)
at Main.extractDataTableRows(Main.java:39)
at Main.main(Main.java:29) 
```

* * *

虽然@Edwin 的答案是最短的，但它是最难调试和维护的，因为有很多“魔法”来实现这一点。这对于单元测试很好，但是恕我直言，您不希望在生产代码中使用它。

```
 Exception in thread "main" ch.lambdaj.function.argument.InvocationException: Failed invocation of public java.lang.String[] Main$ContractLineItem.getDataTablesRow() on object Main$ContractLineItem@1d724f31 caused by: null
at ch.lambdaj.function.argument.Invocation.invokeOn(Invocation.java:70)
at ch.lambdaj.function.argument.InvocationSequence.invokeOn(InvocationSequence.java:91)
at ch.lambdaj.function.argument.InvocationSequence.invokeOn(InvocationSequence.java:85)
at ch.lambdaj.function.argument.Argument.evaluate(Argument.java:35)
at ch.lambdaj.function.convert.ArgumentConverter.convert(ArgumentConverter.java:36)
at ch.lambdaj.function.convert.ConverterIterator.next(ConverterIterator.java:37)
at ch.lambdaj.Lambda.convert(Lambda.java:986)
at ch.lambdaj.Lambda.extract(Lambda.java:1035)
at Main.extractDataTableRows(Main.java:49)
at Main.main(Main.java:27)
 Caused by: java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:474)
at ch.lambdaj.function.argument.Invocation.invokeOn(Invocation.java:68)
... 14 more
 Caused by: java.lang.RuntimeException
at Main$ContractLineItem.getDataTablesRow(Main.java:85)
... 19 more 
```

这种语法需要一些时间才能使用，但我想当他们收紧语法并删除一些样板代码时，它可能更具可读性。

这是一个很好的比较[Java 8 Lambda vs LambdaJ vs Guava vs Iterative approach](http://translate.google.co.uk/translate?hl=en&sl=ru&u=http://habrahabr.ru/post/146718/&prev=/search?q=guava%2blambda&hl=en&safe=off&tbo=d&rls=com.microsoft:en-US&sa=X&ei=mFvtUMaSK8-5hAeI9YCQAQ&ved=0CEsQ7gEwAg)原文是俄语所以请原谅谷歌翻译；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T11:59:18.890

怎么样

```
List<String[]> items = extract(contractLineItems, on(ContractLineItem.class).getDataTablesRow()); 
```

LambaJ 带有一个名为 extract 的方法，它是一个映射器。您还可以阅读有关[使用 lambdaj 转换对象](http://code.google.com/p/lambdaj/wiki/LambdajExtensibility)的参考。

# python - 带有装饰器的线程

> ID：14234547
> 
> 赞同：9
> 
> 时间：2013-01-09T11:48:06.350
> 
> 标签：python, multithreading, decorator

我正在尝试为我的应用程序实现线程（使用装饰器），但无法理解关于锁和管理线程的一些事情。

```
import threading

def run_in_thread(fn):
    def run(*k, **kw):
        t = threading.Thread(target=fn, args=k, kwargs=kw)
        t.start()
    return run

class A:
    @run_in_thread
    def method1(self):
        for x in range(10000):
            print x

    @run_in_thread
    def method2(self):
        for y in list('wlkefjwfejwiefwhfwfkjshkjadgfjhkewgfjwjefjwe'):
            print y

    def stop_thread(self):
        pass

c = A()
c.method1()
c.method2() 
```

1.  据我了解，method1 和 method2 不是同步的，而是在锁的帮助下同步实现的那些东西。如何为我的装饰器功能添加锁？

2.  如何实现使用装饰器停止长线程的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-21T13:20:42.313

如果您将功能扩展到

```
def run_in_thread(fn):
    def run(*k, **kw):
        t = threading.Thread(target=fn, args=k, kwargs=kw)
        t.start()
        return t # <-- this is new!
    return run 
```

即，让包装函数返回创建的线程，你可以这样做

```
c = A()
t1 = c.method1()
t1.join() # wait for it to finish
t2 = c.method2()
# ... 
```

一世。e，获取运行原始方法的线程，对它做任何你想做的事情（例如加入它），然后才调用下一个方法。

如果您在给定情况下不需要它，您可以随意省略它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-21T13:16:42.133

1.  如果你想同步两个线程，你只需要在装饰函数中添加锁，而不是装饰器本身。

2.  没有直接停止线程的简单方法，唯一的方法是使用事件来通知它必须退出的线程。

对于线程装饰器，您可以查看[pebble](https://pypi.python.org/pypi/Pebble/1.1.0)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-06T01:27:27.783

也许信号量可以帮助装饰器，像这样 - 计算从 1 到 1000 的阶乘数：

```
import threading

from functools import wraps
from math import factorial

DIC = {}

def limit(number):
    ''' This decorator limits the number of simultaneous Threads
    '''
    sem = threading.Semaphore(number)
    def wrapper(func):
        @wraps(func)
        def wrapped(*args):
            with sem:
                return func(*args)
        return wrapped
    return wrapper

def async(f):
    ''' This decorator executes a function in a Thread'''
    @wraps(f)
    def wrapper(*args, **kwargs):
        thr = threading.Thread(target=f, args=args, kwargs=kwargs)
        thr.start()
    return wrapper

@limit(10)     # Always use @limit as the outter decorator
@async
def calcula_fatorial(number):
    DIC.update({number: factorial(number)})

@limit(10)
def main(lista):
    for elem in lista:
        calcula_fatorial(elem)

if __name__ == '__main__':
    from pprint import pprint
    main(range(1000))
    pprint(DIC) 
```

# macos - How to build (OpenGL Engine Ogre) SDK on Mac ?

> ID：14234549
> 
> 赞同：7
> 
> 时间：2013-01-09T11:48:13.510
> 
> 标签：macos, opengl, ogre

I'm getting familiar with Ogre openGL engine on mac. I followed this steps to setup the SDK version 1.8.0 on mac

1.  Go to [http://www.ogre3d.org](http://www.ogre3d.org) and click on Download.
2.  Next click on Download a Prebuilt SDK.
3.  Download the latest OSX SDK.
4.  Double-click the .dmg to mount it
5.  Drag & drop the OgreSDK folder wherever you like to install the SDK
6.  Start up Xcode and load the `OgreSDK/Samples/Samples.xcodeproj` to build the samples

I have a problem in last step, when I opened the .xcodeproj file and tried to build the All_Build target, it gives this error:

```
make -f /Applications/OgreSDK/CMakeScripts/ReRunCMake.make
make[1]: *** No rule to make target `/Applications/CMake 2.8-8.app/Contents/share/cmake-2.8/Modules/CMakeCCompiler.cmake.in', needed by `CMakeFiles/cmake.check_cache'.  Stop.
make: *** [/Applications/OgreSDK/CMakeFiles/ZERO_CHECK] Error 2
Command /bin/sh failed with exit code 2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T11:57:09.717

[这是一个](http://www.ogre3d.org/tikiwiki/CMake+Quick+Start+Guide?tikiversion=Mac%20OS%20X)可以帮助你的指南。

简而言之，您的问题是您尚未配置构建，您可以生成`makefile`并配置您的构建`cmake`，链接指南中描述了所有内容。

# javascript - 我可以使用 jQuery 将表添加到另一个表吗？

> ID：14234550
> 
> 赞同：2
> 
> 时间：2013-01-09T11:48:16.320
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 将表“new”添加到表“lasttable”，但我无法得到结果。我是在做正确的事情还是我误解了 prepend 的含义？

```
<table id ="lasttable" class="add" border="1px" width="100%">
<tr class="header"><td class="location" colspan="7">New Item</td></tr>
</table> 
```

我的 jQuery：

```
$("#lasttable").prepend("<table id=\"new\" class=\"add\" border=\"1px\" width=\"100%\">"
+"<tr class=\"header\"><td class=\"stretch\"><a class=\"eloc\" rel=\"leanModal\" href=\"#modal_location\"><img src=\"images/edit-icon.png\" alt=\"Location\"></a></td><td class=\"location\" colspan=\"6\"></td></tr>
+"</tbody></table>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:51:47.657

假设您损坏的选择器是一个错字，我认为您想将新表[`.before()`](http://api.jquery.com/before/)放在现有表中。

```
$("#lasttable").before("new content here"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:51:27.813

这里

```
$("#lasttablet") //this is wrong selector since your id is lasttable 
```

改成

```
$("#lasttable") 
```

**更新**

替换这个

```
$("#lasttable").prepend("<table id=\"new\" class=\"add\" border=\"1px\" width=\"100%\">"
+"<tr class=\"header\"><td class=\"stretch\"><a class=\"eloc\" rel=\"leanModal\" href=\"#modal_location\"><img src=\"images/edit-icon.png\" alt=\"Location\"></a></td><td class=\"location\" colspan=\"6\"></td></tr>
+"</tbody></table>"); 
```

和

```
$("#lasttable").prepend("<table id=\"new\" class=\"add\" border=\"1px\" width=\"100%\"><tr class=\"header\"><td class=\"stretch\"><a class=\"eloc\" rel=\"leanModal\" href=\"#modal_location\"><img src=\"images/edit-icon.png\" alt=\"Location\"></a></td><td class=\"location\" colspan=\"6\"></td></tr></tbody></table>"); 
```

在这里[摆弄](http://jsfiddle.net/Dhqqv/)

问题在于转义`"`，删除`+`符号并将其用作单个字符串..应该可以工作..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T11:52:20.030

您的代码中有拼写错误，**第二行**缺少右引号。

```
+"<tr class=\"header\"><td class=\"stretch\"><a class=\"eloc\" rel=\"leanModal\" href=\"#modal_location\"><img src=\"images/edit-icon.png\" alt=\"Location\"></a></td><td class=\"location\" colspan=\"6\"></td></tr>" 
```

**[现场演示](http://jsfiddle.net/rajaadil/uWRAG/)**

```
$("#lasttable").prepend("<table id=\"new\" class=\"add\" border=\"1px\" width=\"100%\">"+"<tr class=\"header\"><td class=\"stretch\">123<a class=\"eloc\" rel=\"leanModal\" href=\"#modal_location\"><img src=\"images/edit-icon.png\" alt=\"Location\"></a></td><td class=\"location\" colspan=\"6\"></td></tr></tbody></table>"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T11:54:15.917

前置的逻辑在这里是错误的

```
The .prepend() method inserts the specified content as the first child of each element in the jQuery collection (To insert it as the last child, use .append()). 
```

来自[Jquery Prepend()](http://api.jquery.com/prepend/)

理想情况下，您应该做类似的事情

```
$("#lasttable").prepend("<tr><td><table id=\"new\" class=\"add\" border=\"1px\" width=\"100%\">"
+"<tr class=\"header\"><td class=\"stretch\"><a class=\"eloc\" rel=\"leanModal\" href=\"#modal_location\"><img src=\"images/edit-icon.png\" alt=\"Location\"></a></td><td class=\"location\" colspan=\"6\"></td></tr>
+"</tbody></table></td></tr>"); 
```

Prepend() will add tr element inside your table:lasttable at the starting position OR If you want to add a table before your existing table then you can use before() instead of prepend() Something like:

```
$("#lasttable").before("<tr><td><table id=\"new\" class=\"add\" border=\"1px\" width=\"100%\">"
+"<tr class=\"header\"><td class=\"stretch\"><a class=\"eloc\" rel=\"leanModal\" href=\"#modal_location\"><img src=\"images/edit-icon.png\" alt=\"Location\"></a></td><td class=\"location\" colspan=\"6\"></td></tr>
+"</tbody></table></td></tr>"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T11:55:32.800

You got one typo indeed, but either use `.before()` as karim79 suggested, *or prepend only the `<tr>`s to `#lasttable`.* I think `.before()` is easier to implement, but depending on what you're working on it might be better to prepend the TRs. Something like this:

```
var trs = $("#new").html();
$("#lasttable").prepend(tds); 
```

should work.

If you do what you're doing now it will prepend the entire table to #new, and I doubt if a table inside another table is valid markup.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T11:55:39.610

try with this one: just removed the `+` and make a full string

```
 $("<table id=\"new\" class=\"add\" border=\"1px\" width=\"100%\"><tr class=\"header\"><td class=\"stretch\"><a class=\"eloc\" rel=\"leanModal\" href=\"#modal_location\">asdfasdfa<img src=\"images/edit-icon.png\" alt=\"Location\"></a></td><td class=\"location\" colspan=\"6\"></td></tr></tbody></table>").prependTo('#lasttable'); 
```

and with `.prepend()`

```
 $('#lasttable').prepend("<table id=\"new\" class=\"add\" border=\"1px\" width=\"100%\"><tr class=\"header\"><td class=\"stretch\"><a class=\"eloc\" rel=\"leanModal\" href=\"#modal_location\">asdfasdfa<img src=\"images/edit-icon.png\" alt=\"Location\"></a></td><td class=\"location\" colspan=\"6\"></td></tr></tbody></table>"); 
```

you can checkout here: [http://jsfiddle.net/Q2tQd/](http://jsfiddle.net/Q2tQd/)

# c# - XML program not writing XML C#

> ID：14234552
> 
> 赞同：0
> 
> 时间：2013-01-09T11:48:19.393
> 
> 标签：c#, xml, unity3d

I've made a simple tool for generating an XML file. I have been using this tool over the last couple of days and no issues have arisen from it. Then yesterday I went to use it, and I'm getting the following error:

> XmlException: Document element did not appear. file:///C:/DarkRideSettings/DarkrideSettings.xml Line 1, position 1.

From my understanding, this error is saying that the computer cannot find the XML file in the stated location within the code. The thing is, I literally used this code the day before and the XML file is where it should be.

My code for writing my XML is as follows:

```
 public void WriteXMLFile()
{
    // location of the file
    string _filePath = "C:\\DarkRideSettings\\DarkrideSettings.xml";
    XmlDocument _xmlDoc = new XmlDocument();

    // if the file exists
    if (File.Exists(_filePath))
    {
        // load it in
        _xmlDoc.Load(_filePath);
        // clear out the previous data
        _xmlDoc.RemoveAll();

        // create the main root node
        XmlNode rootNode = _xmlDoc.CreateElement("Settings");
        _xmlDoc.AppendChild(rootNode);

        // corners node (next layer down)
        XmlElement _cornerNode = _xmlDoc.CreateElement("Screen_Corners");
        _xmlDoc.DocumentElement.PrependChild(_cornerNode);

        #region Top Left Corners XYZ Values

        // indent top left corner value to screen corners
        XmlElement _topLeftNode = _xmlDoc.CreateElement("Top_Left");
        _cornerNode.AppendChild(_topLeftNode);

        // set the XYZ of the top left values
        XmlElement _topLeftXNode = _xmlDoc.CreateElement("TopLeftX");

        // take string value and convert to float for use in final calculation
        float _topLeftXFloat = Convert.ToSingle(_screenWidthString);
        float _topLeftX = -_topLeftXFloat / 2.0f;
        _topLeftXNode.InnerText = Convert.ToString(_topLeftX);

        XmlElement _topLeftYNode = _xmlDoc.CreateElement("TopLeftY");
        _topLeftYNode.InnerText = _screenHeightString;

        XmlElement _topLeftZNode = _xmlDoc.CreateElement("TopLeftZ");
        float _topLeftZFloat = Convert.ToSingle(_distanceFromScreenString);
        float _topLeftZ = _topLeftZFloat / 2.0f;
        _topLeftZNode.InnerText = Convert.ToString(_topLeftZ);

        // indent these values to the top_left value in XML
        _topLeftNode.AppendChild(_topLeftXNode);
        _topLeftNode.AppendChild(_topLeftYNode);
        _topLeftNode.AppendChild(_topLeftZNode);

        #endregion

        _xmlDoc.Save(_filePath);

    }
} 
```

This code would happily generate my XML file (please note, I've omitted some bits of code from this method to save on space, nothing of any major importance).

Can anyone see if I'm missing something from my code that I should have (I honestly have no idea, as I said, it worked fine yesterday!) or how I can defeat this error. My XML file is to be found at its required location and, even if it wasn't, my code should still write a new one!

Please help me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:56:06.850

你不使用你首先创建的根元素，在你创建它之后，你正在使用`_xmlDoc`，替换你`_xmlDoc`的`rootNode`，我假设一切都会工作。

```
 XmlNode rootNode = _xmlDoc.CreateElement("Settings"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:53:22.400

文件的内容似乎是问题所在。

检查`xml root element`文件顶部是否有 。它应该看起来像

`<?xml version="1.0"?>`

# javascript - JavaScript：如何通过选择器获取父元素？

> ID：14234560
> 
> 赞同：97
> 
> 时间：2013-01-09T11:48:59.917
> 
> 标签：javascript, dom

例子：

```
<div someAttr="parentDiv. We need to get it from child.">
    <table>
        ...
        <td> <div id="myDiv"></div> </td>
        ...
    </table>
</div> 
```

我想通过内部 div 元素（有`myDiv`类的那个）的一些选择器来获取父级。

如何在**没有 jQuery**的情况下使用纯 JavaScript 实现这一点？

就像是：

```
var div = document.getElementById('myDiv');
div.someParentFindMethod('some selector'); 
```

* * *

## 回答 #1

> 赞同：272
> 
> 时间：2016-02-17T09:29:00.457

您可以[`closest()`](https://developer.mozilla.org/en-US/docs/Web/API/Element/closest)在现代浏览器中使用：

```
var div = document.querySelector('div#myDiv');
div.closest('div[someAtrr]'); 
```

使用对象检测来提供一种[polyfill](https://en.wikipedia.org/wiki/Polyfill_(programming))或替代方法，以实现与 IE 的向后兼容性。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-01-09T11:52:24.107

这是最基本的版本：

```
function collectionHas(a, b) { //helper function (see below)
    for(var i = 0, len = a.length; i < len; i ++) {
        if(a[i] == b) return true;
    }
    return false;
}
function findParentBySelector(elm, selector) {
    var all = document.querySelectorAll(selector);
    var cur = elm.parentNode;
    while(cur && !collectionHas(all, cur)) { //keep going up until you find a match
        cur = cur.parentNode; //go up
    }
    return cur; //will return null if not found
}

var yourElm = document.getElementById("yourElm"); //div in your original code
var selector = ".yes";
var parent = findParentBySelector(yourElm, selector); 
```

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2016-07-01T16:06:52.057

查找与给定选择器匹配的最近的父元素（或元素本身）。还包括一个停止搜索的选择器，以防您知道应该停止搜索的共同祖先。

```
function closest(el, selector, stopSelector) {
  var retval = null;
  while (el) {
    if (el.matches(selector)) {
      retval = el;
      break
    } else if (stopSelector && el.matches(stopSelector)) {
      break
    }
    el = el.parentElement;
  }
  return retval;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-24T21:27:18.713

## 将 leech 的答案与 indexOf 一起使用（以支持 IE）

这是使用水蛭所说的，但使其适用于 IE（IE 不支持匹配）：

```
function closest(el, selector, stopSelector) {
  var retval = null;
  while (el) {
    if (el.className.indexOf(selector) > -1) {
      retval = el;
      break
    } else if (stopSelector && el.className.indexOf(stopSelector) > -1) {
      break
    }
    el = el.parentElement;
  }
  return retval;
} 
```

它并不完美，但如果选择器足够独特，它就可以工作，这样它就不会意外匹配不正确的元素。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-08-01T21:30:15.350

这是一个递归解决方案：

```
function closest(el, selector, stopSelector) {
  if(!el || !el.parentElement) return null
  else if(stopSelector && el.parentElement.matches(stopSelector)) return null
  else if(el.parentElement.matches(selector)) return el.parentElement
  else return closest(el.parentElement, selector, stopSelector)
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-09-02T19:02:07.973

我想我会提供一个更健壮的例子，也在打字稿中，但它很容易转换为纯 javascript。此函数将使用诸如“#my-element”之类的 ID 或类“.my-class”查询父母，并且与其中一些答案不同，它将处理多个类。我发现我命名了一些类似的东西，所以上面的例子找到了错误的东西。

```
function queryParentElement(el:HTMLElement | null, selector:string) {
    let isIDSelector = selector.indexOf("#") === 0
    if (selector.indexOf('.') === 0 || selector.indexOf('#') === 0) {
        selector = selector.slice(1)
    }
    while (el) {
        if (isIDSelector) {
            if (el.id === selector) {
                return el
            }
        }
        else if (el.classList.contains(selector)) {
            return el;
        }
        el = el.parentElement;
    }
    return null;
} 
```

### 按类名选择：

`let elementByClassName = queryParentElement(someElement,".my-class")`

### 按 ID 选择：

`let elementByID = queryParentElement(someElement,"#my-element")`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-10-23T08:52:38.027

通过使用**querySelector()**和**最接近的()**方法可以获得父元素。

*   `querySelector()`返回与文档中指定的 CSS 选择器匹配的第一个元素。

*   `closest()`在 DOM 树中搜索与指定 CSS 选择器匹配的最接近的元素。

## 使用示例

```
var element = document.querySelector('td');
console.log(element.closest('div'));
```

```
<div>
  <table>
    <tr>
      <td></td>
    </tr>
  </table>
</div>
```

如果需要选择多个元素，**querySelectorAll()**非常适合。

*   `querySelectorAll()`返回文档中与指定 CSS 选择器匹配的所有元素，作为静态 NodeList 对象。

要选择所需的元素，必须在内部指定它`[]`，例如第二个元素是：`element[1]`

在以下示例`closest()`中，方法用于获取`<tr>`特定选定元素的父元素。

```
var element = document.querySelectorAll('td');
console.log(element[1].closest('tr'));
```

```
<div>
  <table>
    <tr id="1">
      <td> First text </td>
    </tr>
    <tr id="2">
      <td> Second text </td>
    </tr>
  </table>
</div>
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-18T06:34:44.067

返回 parent 或 null 的函数 parent_by_selector 的简单示例（没有选择器匹配）：

```
function parent_by_selector(node, selector, stop_selector = 'body') {
  var parent = node.parentNode;
  while (true) {
    if (parent.matches(stop_selector)) break;
    if (parent.matches(selector)) break;
    parent = parent.parentNode; // get upper parent and check again
  }
  if (parent.matches(stop_selector)) parent = null; // when parent is a tag 'body' -> parent not found
  return parent;
}; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-27T02:51:49.673

这是使用递归获取具有特定类的父级的简单方法。可以修改为根据选择器切换，但原理是一样的：

```
function findParentByClass(child, parentClass) {
    let parent = child.parentElement;

    while(!(parent.className === parentClass)){
        parent = findParentByClass(child.parentElement, parentClass)
    }

    return parent;
} 
```

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2013-01-09T11:57:02.183

这是访问父ID的简单方法

```
document.getElementById("child1").parentNode; 
```

将为您访问父 div 施展魔法。

```
<html>
<head>
</head>
<body id="body">
<script>
function alertAncestorsUntilID() {
var a = document.getElementById("child").parentNode;
alert(a.id);
}
</script>
<div id="master">
Master
<div id="child">Child</div>
</div>
<script>
alertAncestorsUntilID();
</script>
</body>
</html> 
```

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2020-07-08T09:57:40.240

```
var base_element = document.getElementById('__EXAMPLE_ELEMENT__');
for( var found_parent=base_element, i=100; found_parent.parentNode && !(found_parent=found_parent.parentNode).classList.contains('__CLASS_NAME__') && i>0; i-- );
console.log( found_parent ); 
```

# php - 将带有属性的 XML 导入 mysql

> ID：14234563
> 
> 赞同：2
> 
> 时间：2013-01-09T11:49:07.940
> 
> 标签：php, mysql, xml

我有一个像这样的大 (~30Mb) XML 文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<LIC Version="2.0" Title="Products">
    <Item>
        <Field Name="Filename">/root/_DOWNLOAD/Bird.txt</Field>
        <Field Name="Read_By">Lisa Hannigan</Field>
        <Field Name="Posit">Passenger</Field>
    </Item>
    <Item>
        <Field Name="Filename">D:\03\Strypers.pdf</Field>
        <Field Name="Read_By">Stryper</Field>
        <Field Name="Intensity">2</Field>
        <Field Name="IMG">78</Field>
        <Field Name="Rotate">0</Field>
    </Item>
    <Item>
        <Field Name="Filename">D:\Afriu.txt</Field>
        <Field Name="Read_By">Africano</Field>
        <Field Name="Posit">Canto Africano vol.1</Field>
        <Field Name="File_Resource">mp3</Field>
    </Item>
    <Item>
        <Field Name="Filename">D:\_VARIOUS\Knots.pdf</Field>
        <Field Name="Date">40624</Field>
    </Item>
    ...
</LIC> 
```

我想用 php 脚本将此 xml 导入 mysql 数据库。我使用过 SIMPLEXML 和 xpath：

```
 $url = 'FILE.xml';
    $xml = simplexml_load_file($url);
    $result = $xml->xpath("//Field[@Name]");
foreach { ... } 
```

我需要什么？创建用于mysql sql的数组的正确“foreach”是什么？请注意，每一行（由“项目”标识）都不相同（不具有相同的“字段名称”）。对较大的文件使用 simplexml 是否正确？谢谢你的帮助！

*更新*

这是一个使用“foreach”的例子，我试过：

```
$result = $xml->xpath("//Field[@Name]");    
foreach($result as $key => $value)  {
    echo $value['Name']."=".$value.",";
 } 
```

现在我想了解如何创建要插入 mysql 的字符串

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T12:14:10.423

首先创建一个将所有可能的字段作为列匹配的表。然后您可以通过 [`LOAD XML LOCAL INFILE`查询](http://dev.mysql.com/doc/refman/5.5/en/load-xml.html)加载它。

```
LOAD XML LOCAL INFILE 'file.xml'
  INTO TABLE person
  ROWS IDENTIFIED BY '<Item>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T17:23:29.433

我试着回答我的问题。

```
<?php
    $url = 'FILEXML';
    $xml = simplexml_load_file($url);    
$i = 1;
  foreach($xml->xpath("/LIC/Item") as $docs)
  {
        foreach($docs->Field as $field) 
        {
            $resultstr[] = $field["Name"];
        }
    $sql_head = headquote($resultstr);
    $sql_ins = "INSERT INTO table_name (";
    $sql_dec = ") VALUE (";
    unset($resultstr);
    $fresult = (array)$docs;
    $fvalue = array_pop($fresult);
    $sql_val = numking($fvalue);
    $sql_end = ");";
    $query_to_use_for_mysql = ($sql_ins.$sql_head.$sql_dec.$sql_val.$sql_end);

    unset($fresult);
    unset($fvalue);
 }
 ?> 
```

并添加这两个功能：

```
<?php
    function headquote($hdarray) {
            $hdata   = array();
            foreach ( $hdarray as $hdval ) {
                #       Use backticks instead quotes!
            $hdata[] = "`$hdval`";
              }
        $hdarray = implode($hdata, ',');
        return $hdarray;
     }
    function numking($input) {
            $data   = array();
            foreach ( $input as $value ) {
            $data[] = is_numeric($value) ? $value : "'".mysql_escape_string($value)."'";
             }
            $input = implode($data, ',');
            return $input;
      }
?> 
```

感谢大家的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:06:19.870

```
$url = 'FILE.xml';
$xml = simplexml_load_file($url);
for($i=0;$i<count($xml->Item);$i++)
{
   print_r($xml->Item[$i]);
 } 
```

# iphone - capture screen as it looks like

> ID：14234568
> 
> 赞同：0
> 
> 时间：2013-01-09T11:49:27.263
> 
> 标签：iphone

iam doing one application.In that Im using one imageview with image and add one view with sone clear holes.Means through that holes we can see the background image.So my problem is i want to capture that total screen (imageview with this holes view).Iam using below code but it's not working.

```
- (UIImage*)captureView:(UIView *)yourView {
CGRect rect = [[UIScreen mainScreen] bounds];
UIGraphicsBeginImageContext(rect.size);
CGContextRef context = UIGraphicsGetCurrentContext();
[yourView.layer renderInContext:context];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
return image;
 } 
```

but it's not working.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:58:43.977

试试这个来拍摄你的 screeShoT

```
-(UIImage*)getScreenShot
{
    CGSize screenSize = [[UIScreen mainScreen] applicationFrame].size;

    //CGSize screenSize = CGSizeMake(1024, 768);
    CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();

    CGContextRef ctx = CGBitmapContextCreate(nil, screenSize.width, 416, 8, 4*(int)screenSize.width, colorSpaceRef, kCGImageAlphaPremultipliedLast);
    CGContextTranslateCTM(ctx, 0.0, screenSize.height);
    CGContextScaleCTM(ctx, 1.0, -1.0);

    [(CALayer*)self.yourView.layer renderInContext:ctx];

    CGImageRef cgImage = CGBitmapContextCreateImage(ctx);
    UIImage *image = [UIImage imageWithCGImage:cgImage];
    CGImageRelease(cgImage);
    CGContextRelease(ctx);

    return image;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:00:31.690

这是我们如何做到：

```
UIGraphicsBeginImageContextWithOptions(yourView.bounds.size, yourView.opaque, 0.0);
[yourView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *LastImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

# c# - WebSockets in firefox

> ID：14234573
> 
> 赞同：2
> 
> 时间：2013-01-09T11:49:45.680
> 
> 标签：c#, javascript, firefox, websocket

For implementing my websocket server in C# I'm using Alchemy framework. I'm stuck with this issue. In the method OnReceive when I try to deserialize json object, I get a FormatException: "Incorrect format of the input string." (maybe it's different in english, but I'm getting a localized exception message and that's my translation :P). What is odd about this is that when I print out the `context.DataFrame` I get: `111872281.1341000479.1335108793.1335108793.1335108793.1; __ad` which is a substring of the cookies sent by the browser: `__gutp=entrystamp%3D1288455757%7Csid%3D65a51a83cbf86945d0fd994e15eb94f9%7Cstamp%3D1288456520%7Contime%3D155; __utma=111872281.1341000479.1335108793.1335108793.1335108793.1; __adtaily_ui=cupIiq90q9`.

JS code:

```
// I'm really not doing anything more than this
var ws = new WebSocket("ws://localhost:8080"); 
```

C# code:

```
static void Main(string[] args) {
    int port = 8080;

    WebSocketServer wsServer = new WebSocketServer(port, IPAddress.Any) {
        OnReceive = OnReceive,
        OnSend = OnSend,
        OnConnect = OnConnect,
        OnConnected = OnConnected,
        OnDisconnect = OnDisconnect,
        TimeOut = new TimeSpan(0, 5, 0)
    };

    wsServer.Start();

    Console.WriteLine("Server started listening on port: " + port + "...");

    string command = string.Empty;

    while (command != "exit") {
        command = Console.ReadLine();
    }

    Console.WriteLine("Server stopped listening on port: " + port + "...");

    wsServer.Stop();

    Console.WriteLine("Server exits...");
}

public static void OnReceive(UserContext context) {
    string json = "";
    dynamic obj;

    try {
        json = context.DataFrame.ToString();
        Console.WriteLine(json);
        obj = JsonConvert.DeserializeObject(json);
    } catch (Exception e) {
        Console.WriteLine(e.Message);
        Console.WriteLine(e.StackTrace);

        return;
    }
} 
```

On the C# side I'm using Newtonsoft.Json, though it's not a problem with this library...

EDIT: One more thing - I browsed through the code in here: [https://github.com/Olivine-Labs/Alchemy-Websockets-Example](https://github.com/Olivine-Labs/Alchemy-Websockets-Example) and found nothing - I mean, I'm doing everything the same way authors did in this tutorial...

EDIT: I was testing the above code in Firefox v 17.0.1, and it didn't work, so I tested it under google chrome, and it works. So let me rephrase the question - what changes can be made in js, so that firefox would not send aforementioned string?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-19T18:11:15.417

我遇到了同样的问题 - 只需更换

```
var ws = new WebSocket("ws://localhost:8080"); 
```

和

```
var ws = new WebSocket("ws://127.0.0.1:8080"); 
```

为我解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T05:52:24.413

在 C# 控制台应用程序中，我使用以下命令将客户端连接到服务器：

```
var aClient = new WebSocketClient(@"ws://127.0.0.1:81/beef"); 
```

您上面的代码正在使用连接

```
var ws = new WebSocket("ws://localhost:8080"); 
```

可能有两个问题之一 -

1.  首先是查看 WebSocketClient 是否可以代替。
2.  确保您的 url 格式为 ws://ur:port/context。这让我有一段时间不高兴。

# asp.net - WebApi 和控制器身份验证

> ID：14234574
> 
> 赞同：1
> 
> 时间：2013-01-09T11:49:47.560
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api

我目前有一个使用自定义用户身份验证运行的 MVC4 站点（我们最终设置了 FormsAuthentication.SetAuthCookie）并且一切正常。

我想脱离当前设置并使用新的 Web API 以 REST 格式提供数据

我的问题是 - 使用 Web API 检查用户是否登录的最佳方法是什么？假设我们只想将 Web API 公开给另一台设备，我如何控制授权用户使用 API？

任何帮助都会很棒！

干杯圣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T15:14:02.743

看看这个样本，应该正是你所需要的：

[http://leastprivilege.com/2012/10/23/mixing-mvc-forms-authentication-and-web-api-basic-authentication/](http://leastprivilege.com/2012/10/23/mixing-mvc-forms-authentication-and-web-api-basic-authentication/)

# c# - HttpWebRequest not passing Credentials simple form authentication

> ID：14234580
> 
> 赞同：0
> 
> 时间：2013-01-09T11:50:13.383
> 
> 标签：c#, asp.net, form-authentication

My code is like this

```
Doc doc = new Doc();
string url =  HttpContext.Current.Request.Url.AbsoluteUri;
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
// required for HttpWebResponse.Cookies
request.CookieContainer = new CookieContainer(); 

request.Credentials = new NetworkCredential("username", "password");
HttpWebResponse response = (HttpWebResponse)request.GetResponse();

if (response.Cookies.Count>0) { // includes ASP.NET_SessionId
    bool needsCookie2 = false;
    StringBuilder builder = new StringBuilder("Cookie: ");
    for(int i = 0; i<response.Cookies.Count; ++i) {
        Cookie cookie = response.Cookies[i];
        if(!needsCookie2 && cookie.Version!=1)
             needsCookie2 = true;
        if(i>0)
             builder.Append("; ");
        builder.Append(cookie.ToString());
    }
    builder.Append(!needsCookie2? "\r\n": "\r\nCookie2: $Version=1\r\n");
    doc.HtmlOptions.HttpAdditionalHeaders = builder.ToString();
}

doc.HtmlOptions.NoCookie = true;
doc.HtmlOptions.HostWebBrowser = false;

// cookieless Forms Authentication adds authentication ticket to the URL
int id = doc.AddImageUrl(response.ResponseUri.AbsoluteUri);
doc.Save(HttpContext.Current.Server.MapPath("~/media/pdf/1212.pdf"));
doc.Clear(); 
```

I am using **simple form authentication** in my website and I need to authenticate this webRequest in order to print a pdf through abcPDF, as my login details are stored in cookie i am trying to get it from there and add to my request. I assume the error is in line `request.Credentials = new NetworkCredential("username", "password");`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:13:53.813

您说该网站正在使用*表单身份验证*，但您的请求使用的是*基本身份验证*凭据：

```
request.Credentials = new NetworkCredential("username", "password"); 
```

您需要将网站切换到基本身份验证，或者对您的登录页面执行 POST 请求以获取会话 cookie/令牌以在后续请求中使用。

# logging - 如何通过 web.config 文件注入 LogFactory？

> ID：14234582
> 
> 赞同：2
> 
> 时间：2013-01-09T11:50:24.960
> 
> 标签：logging, servicestack

我能够使用内置的 ServiceStack 日志记录 API。我所做的只是实例化一个具体的 LogFactory 并将其分配给 Configure 方法中的 LogManager.LogFactory 属性。

但是，我想知道是否可以通过配置（web.config）注入 LogFactory，以便可以修改日志目标。这将有助于轻松诊断生产环境中的问题。

是否可以通过配置文件注入 LogFactory？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:51:34.277

设置 LogFactory 的最安全方法是在初始化 AppHost 之前，以便`LogManager`在任何静态类初始化程序运行（并分配 LogFactory）之前对其进行初始化。也没有具体的支持，`Web.config`但在代码中执行此操作很简单，例如：

```
if (ConfigUtils.GetAppSetting("EnableLogging", false))
{
    LogManager.LogFactory = new ConsoleLogFactory();
}
new AppHost().Init(); 
```

# html - IE=edge 和 IE=EmulateIE8

> ID：14234586
> 
> 赞同：0
> 
> 时间：2013-01-09T11:50:42.587
> 
> 标签：html, internet-explorer, http-headers, xhtml

[在这里](https://stackoverflow.com/questions/14230970/meta-http-equiv-x-ua-compatible)看我的帖子

在这种情况下

value="IE=edge" 是什么意思？

value="IE=EmulateIE8" 是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:54:29.297

`IE=edge`只是告诉 IE 使用渲染引擎的最新版本。

它[记录在这里](http://blogs.msdn.com/b/askie/archive/2009/03/23/understanding-compatibility-modes-in-internet-explorer-8.aspx)，就像不太有用（在我看来）一样`IE=EmulateIE8`。

`IE=edge`帮助您避免一些“兼容性”行为。它使 IE9 与其他现代引擎更兼容。

例如，请参阅[此相关问题](https://stackoverflow.com/questions/10305631/ie9-float-with-overflowhidden-and-table-width-100-not-displaying-properly)。我总是从我的 HTML 文件开始

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

# mysql - 如何获得同一列中两行的差异

> ID：14234589
> 
> 赞同：2
> 
> 时间：2013-01-09T11:51:04.433
> 
> 标签：mysql, sql, select, row

我必须找到表的单个列的值的差异作为当前行值 - 一列中某些“n”行的前一行值，而且我没有 ID 用作增量的参考

日期：box_count：total_no_of_boxes_used

```
1/12/12 2   2
2/12/12 8   6
3/12/12 14  6 
```

我有 box_count 列，我正在尝试获取 total_no_of_boxes_used 列。请帮我。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:05:23.990

鉴于您的记录按日期顺序排列......

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/a3a4e/1)

询问：

```
select a.date, a.bc, case when (a.bc-b.bc) is null then a.bc else a.bc-b.bc end tot
from tt a
left join 
tt b
on a.date > b.date
group by b.date
; 
```

结果：

```
DATE                            BC      TOT
December, 01 2012 00:00:00+0000     2   2
December, 02 2012 00:00:00+0000     8   6
December, 03 2012 00:00:00+0000     14  6
December, 04 2012 00:00:00+0000     23  9 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:04:21.170

一种方法是使用相关子查询，如下所示：

```
SELECT
  t1.`date`,
  t1.box_count,
  t1.box_count -
  IFNULL((SELECT t2.box_count
          FROM table1 t2
          WHERE t2.`date` < t1.`date`
          ORDER BY t2.`date` DESC
          LIMIT 1), 
        0 ) AS total_no_of_boxes_used
FROM table1 t1; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/6b118/4)

这会给你：

```
|                            DATE | BOX_COUNT | TOTAL_NO_OF_BOXES_USED |
------------------------------------------------------------------------
|  January, 12 2012 00:00:00+0000 |         2 |                      2 |
| February, 12 2012 00:00:00+0000 |         8 |                      6 |
|    March, 12 2012 00:00:00+0000 |        14 |                      6 | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:03:46.830

试试这个：

```
SELECT date, 
       (box_count - @diff) total_no_of_boxes_used, 
       (@diff:=box_count) box_count
FROM table1, (SELECT @diff:=0) A; 
```

检查这个[**SQL FIDDLE 演示**](http://sqlfiddle.com/#!2/cbe3f/1)

**输出**

```
|                            DATE | TOTAL_NO_OF_BOXES_USED | BOX_COUNT |
------------------------------------------------------------------------
|  January, 12 2012 00:00:00+0000 |                      2 |         2 |
| February, 12 2012 00:00:00+0000 |                      6 |         8 |
|    March, 12 2012 00:00:00+0000 |                      6 |        14 | 
```

# javascript - Drupal 7 全局 javascript 变量

> ID：14234598
> 
> 赞同：2
> 
> 时间：2013-01-09T11:51:24.177
> 
> 标签：javascript, jquery, drupal-7

在我的 Drupal 7 安装中，我的子主题（基本和管理子主题）加载了 2 个单独的 JavaScript 文件——我不知道这是否是有用的信息，但是：

如果我想在加载的第一个 js 文件中定义一个 JavaScript 变量并在第二个文件中使用它怎么办？我应该如何定义它？

基本上，问题可能是：如何在 Drupal 环境中定义全局 JavaScript 变量？

我正在使用 jQuery。

提前致谢！

**编辑：**

第一个js文件：

```
var myOwnVar;

(function ($) {
    $(document).ready(function() {
        myOwnVar = 1;
    });
}(jQuery)); 
```

第二个js文件：

```
(function ($) {
    $(document).ready(function() {
        console.log(myOwnVar);
    });
}(jQuery)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T12:09:27.167

你想使用 Drupal.settings。

可以跨 JavaScript 函数全局访问这些值。

您可以将变量从 PHP 传递给 JS...

```
drupal_add_js(array('YOURMODULE' => array('SOMEVARIABLE' => 'woohoo')), 'setting'); 
```

然后访问你的JS函数中的变量......

```
(function ($) {
  Drupal.behaviors.YOURMODULE = {
    attach: function (context, settings) {

      // You can access the variable by using Drupal.settings.SOMEVARIABLE
      alert(Drupal.settings.YOURMODULE.SOMEVARIABLE);

    }
  };
})(jQuery); 
```

请参考[http://drupal.org/node/172169#variablesandarrays](http://drupal.org/node/172169#variablesandarrays)

*“变量不应该在全局范围内定义；尽量在局部函数范围内定义它们。所有变量都应该在函数的开头声明。”*

或者，任何闭包之外的以下内容都可以使用，但应该避免。

```
var SOMEVARIABLE = SOMEVALUE;

(function ($) {
  Drupal.behaviors.YOURMODULE = { 
```

# ios - 与 Xcode 一起使用 GPS、加速度计和指南针？

> ID：14234603
> 
> 赞同：1
> 
> 时间：2013-01-09T11:51:29.263
> 
> 标签：ios, xcode, cordova

如何在与 Xcode 相同的程序中使用 Phonegap 才能同时使用 GPS、加速度计和指南针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:19:23.793

我确实从网上的一本电子书中找到了一个很好的例子。谷歌它你可以找到它。

本书名为：Pro iOS 5 增强现实 [ressource électronique]
Roche, Kyle。[纽约] : Apress ; 纽约：由 Springer 分发给图书贸易，c2011。

该示例涵盖 GPS、加速度计和 Compas。他使用的让用户可以看到数据的技巧是通过选项卡式界面。第 4 章介绍传感器。来源在这里：github.com/kyleroche/Professional_iOS_AugmentedReality。

我的问题是，如何同时使用在其单独接口中定义的所有传感器？

我的目标是在特定时间流逝或按一下按钮将数据记录到 mySQL 数据库中。

谢谢

里吉斯

# c# - 删除 Datagridview 中的链接文本

> ID：14234609
> 
> 赞同：0
> 
> 时间：2013-01-09T11:51:48.330
> 
> 标签：c#, datagridview

我有一个`DataGridView`从列表中填充的。然后我`column`在最后定义了一个链接，`column`没有`DataBound`说`View`，如果满足条件，如何删除此链接文本。我有以下内容：

```
 dgvReport.AutoGenerateColumns = false;
        dgvReport.DataSource = queries;

        //locals 
        Int32 lastColumnIndex = this.dgvReport.Columns.Count - 1;

        //hide reads links for the null queries
        for (int i=0; i < queries.Count; i++) {
            if (queries[i].SomeID == null || queries[i].AnotherID == null) {
                this.dgvReport.Rows[i].Cells[lastColumnIndex].Value = "";
            }
        } 
```

这不起作用，我的列文本仍然显示`View`。有任何想法吗？

**编辑**：lastColumnIndex 是 24，这确实是最后一列索引

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-07-11T10:51:35.227

你可以试试

```
View.PlainTextBehaviour = true; 
```

它将删除链接并将其显示为纯文本

# callback - 将 VTK 回调与 Qt 插槽连接

> ID：14234615
> 
> 赞同：2
> 
> 时间：2013-01-09T11:52:09.833
> 
> 标签：callback, qt4, signals-slots, vtk, point-cloud-library

我正在尝试将`VTK`回调连接到`Qt`插槽，因此当回调发生时将触发该插槽。

我正在使用 a`QVTKWidget`来渲染已添加到 a`PCLVisualizer`中的点云（来自点云库，PCL）。

让我们展示一些代码：

**点云.h**

```
class PointCloud: public QObject {
Q_OBJECT
  private:
    static void loadStartCallback(
      vtkObject *caller,
      unsigned long eventId,
      void *clientData,
      void *callData
    );

    static void loadEndCallback(
      vtkObject *caller,
      unsigned long eventId,
      void *clientData,
      void *callData
    );
    void load(void);
    // more funcs and methods

  private:
   QVTKWidget* widget;
   pcl::visualization::PCLVisualizer* visualizer;
   unsinged long observerStartTag;
   unsinged long observerEndTag;
   // more attributes
} 
```

**点云.cpp**

```
 void PointCloud::loadStartCallback(
    vtkObject* caller,
    unsigned long eventId,
    void* clientData,
    void* callData
  ) {
    qDebug() << "\t\tPointCloud - loadCallback started\n";
    if(clientData) {
      PointCloud* self = reinterpret_cast<PointCloud*>( clientData );
      self->widget->GetRenderWindow()->RemoveObserver(self->observerStartTag);
  }

  void PointCloud::loadEndCallback(
    vtkObject* caller,
    unsigned long eventId,
    void* clientData,
    void* callData
  ) {
    qDebug() << "\t\tPointCloud - loadCallback ended\n";
    if(clientData) {
      PointCloud* self = reinterpret_cast<PointCloud*>( clientData );
      self->widget->GetRenderWindow()->RemoveObserver(self->observerEndTag);
    }
  }

 void load(void) {
   vtkSmartPointer<vtkRenderWindow> renderWindow = visualizer->getRenderWindow();

   vtkSmartPointer<vtkCallbackCommand> startCallback = vtkSmartPointer<vtkCallbackCommand>::New();
    startCallback->SetCallback( loadStartCallback );
    startCallback->SetClientData(this);
    observerStartTag = renderWindow->AddObserver(vtkCommand::StartEvent, startCallback );

    vtkSmartPointer<vtkCallbackCommand> endCallback = vtkSmartPointer<vtkCallbackCommand>::New();
    endCallback->SetCallback( loadEndCallback );
    endCallback->SetClientData(this);
    observerEndTag = renderWindow->AddObserver(vtkCommand::EndEvent, endCallback );

    // more processing. local_cloud is already populated 
    // and functional at this point
    widget->SetRenderWindow( renderWindow );
    visualizer->addPointCloud<pcl::PointXYZ>(local_cloud, "local_cloud");
    widget->Show();
    widget->Update();
 } 
```

这很好用，一旦云渲染开始，将打印*PointCloud - loadCallback started*，当渲染结束并显示云时，将打印消息*PointCloud - loadCallback end*。

现在，除了打印结束消息之外，我还想触发一个`Qt`插槽。我正在尝试为此使用`vtkEventQtSlotConnect`该类，因为这似乎是将回调连接到插槽的正确选择：

**PointCloud.h 中的新功能**

```
private slots:
  void test(void); 
```

**PointCloud.cpp 中的新功能**

```
void PointCloud::test(void) { qDebug() << "\t\tThis is a test\n; } 
```

**在调用 Visualizer->addPointCloud 之前添加到 PointCloud::load()**

```
 vtkEventQtSlotConnect* vtk_qt_connector = vtkEventQtSlotConnect::New();
    vtk_qt_connector->Connect(
        renderWindow,
        vtkCommand::EndEvent,
        this,
        SLOT(test(void)),
        0,
        1.0
    );

    // AFTER widget->Update()
    vtk_qt_connector->Disconnect(); // NO PARAM: disconnects ALL slots
    vtk_qt_connector->Delete();
  } // End of PointCloud::load() 
```

通过这些添加，回调中的消息被打印，但`test()`插槽内的消息永远不会显示。

知道我做错了什么吗？

**编辑**

在`VTK`我见过的回调示例中，a`vtkRendeWindowInteractor`用于管理回调。但是，如果我向其中添加回调观察者，则不如直接将它们添加到渲染窗口准确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:25:21.017

Ok, I have checked again the code and found something new. Some co-worker has added a `QThread` in the `load()` method to smooth things, but forgot to document/tell that there was a `QThread`there.

**In PointCloud::load()**

```
 QThread* thread = new QThread;
 ThreadedCloud* tcloud = new ThreadedCloud; // computes internal vars and more
 tcloud->moveToThread(thread);

 connect(thread, SIGNAL(started()), tcloud, SLOT(read()), Qt::QueuedConnection );
 connect(thread, SIGNAL(finished()), thread, SLOT(deleteLater()), Qt::QueuedConnection );
 connect(tcloud, SIGNAL(cloudIsLoaded()), this, SLOT(addCloudToViewer()), Qt::QueuedConnection );
 connect(tcloud, SIGNAL(cloudIsLoaded()), thread, SLOT(quit()), Qt::QueuedConnection );
 connect(tcloud, SIGNAL(cloudIsLoaded()), tcloud, SLOT(deleteLater()), Qt::QueuedConnection );
 connect(tcloud, SIGNAL(cloudIsNotLoaded(std::string)), this, SLOT(errorLoadingCloud(std::string)), Qt::QueuedConnection );
 thread->start(); 
```

The `cloudIsLoaded()` is a signal that is emitted when the thread has finished whatever it has to do and we're ready to add the cloud to the `PCLVisualizer` and render it. That is done in `addCloudToViewer`.

The key factor here is that once the thread is started, the control flow exits the `load()`method and because I'm disconnecting the callback/slot before the end of the method, once the cloud is being rendererd that connection isn't there anymore!

So the solution was to move the `vtk_qt_connector` inside the `addCloudToViewer` method and do there the callback/slot connection.

# java - IllegalMonitorStateException notify() 和 wait()

> ID：14234619
> 
> 赞同：9
> 
> 时间：2013-01-09T11:52:24.793
> 
> 标签：java, wait, notify, illegalmonitorstateexcep

我有个问题。当我`notify()`在同步块中使用时，我得到 IllegalMonitorStateException。谁能帮我解决这个问题？

我需要一个线程将一个字符发送到第二个线程，然后这个线程必须等待，第二个线程打印这个字符。在第二个线程等待之后，第一个线程再次发送下一个字符

主.java：

```
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFrame;
import javax.swing.JOptionPane;

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
public class Main extends JFrame {

    Thread t1, t2;
    Consumer con;

    public Main() {
        con = new Consumer();
        startThreads();
    }

    private synchronized void startThreads() {
        t1 = new Thread(new Producent("grudzien", con));
        t1.start();
        t2 = new Thread(con);
        t2.start();
    }

    public class Producent implements Runnable {

        String m_atom;
        char[] atoms;
        Consumer m_c;

        public Producent(String atom, Consumer c) {
            m_atom = atom;
            m_c = c;
        }

        @Override
        public void run() {
            synchronized (this) {
                atoms = m_atom.toCharArray();
                System.out.print("Tablica znaków: ");
                for (int i = 0; i < atoms.length; i++) {
                    System.out.print(atoms[i] + ", ");
                }
            }
            for (int i = 0; i < atoms.length; i++) {
                synchronized (this) {
                    con.setChar(atoms[i]);
                    t2.notify();
                    try {
                        wait();
                    } catch (InterruptedException ex) {
                        JOptionPane.showMessageDialog(null, "Blad w wait()", "Blad!", JOptionPane.ERROR_MESSAGE);
                    }
                }
            }

        }
    }

    public class Consumer implements Runnable {

        char atom;

        public void setChar(char c) {
            atom = c;
        }

        @Override
        public void run() {
            while (true) {
                synchronized (this) {
                    try {
                        wait();
                    } catch (InterruptedException ex) {
                        JOptionPane.showMessageDialog(null, "Blad w wait()", "Blad!", JOptionPane.ERROR_MESSAGE);
                    }
                    System.out.println(atom);
                    t1.notify();
                }
            }
        }
    }

    public static void main(String[] args) {
        new Main();
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-09T11:58:55.220

您需要成为“对象监视器的所有者”才能对其调用 notify。到目前为止，您的方法都是 all `synchronized(this)`，但它们在其他对象上调用 notify() （它们未同步）。换句话说：

```
synchronized(t2) {
   t2.notify();
} 
```

和

```
synchronized(t1) {
   t1.notify();
} 
```

有关 Java 中监视器和同步的完整说明，请参见[此处](http://www.artima.com/insidejvm/ed2/threadsynch.html)，或在此处查找类似问题，例如 - [Java Wait and Notify: IllegalMonitorStateException](https://stackoverflow.com/questions/7126550/java-wait-and-notify-illegalmonitorstateexception)

# jquery - jqplot：显示小数位

> ID：14234622
> 
> 赞同：8
> 
> 时间：2013-01-09T11:52:39.717
> 
> 标签：jquery, jqplot

我正在使用 jqplot 显示条形图：

```
$.jqplot.config.enablePlugins = true;
      var s1 = [8916.55, 1860.45, 60.33];
      var ticks = ['Total Cost', 'Total Chargeable', 'Total Invoiced'];

      plot1 = $.jqplot('chart_div', [s1], {
          // Only animate if we're not using excanvas (not in IE 7 or IE 8)..
          seriesColors: ["#009DDE", "lightgreen", "green"],
          animate: !$.jqplot.use_excanvas,
          seriesDefaults:{
            renderer:$.jqplot.BarRenderer,
            pointLabels: { show: true },
            rendererOptions:{ 
              varyBarColor : true,
              animation: {
                speed: 1000
              }
            }
          },
          axes: {
              xaxis: {
                renderer: $.jqplot.CategoryAxisRenderer,
                ticks: ticks
              },
              yaxis: {
                tickOptions:{
                  formatString: "\u00A3\%'d"
                }
              }
          },
          highlighter: { 
            show: false 
          },

      });

      $('#chart1').bind('jqplotDataClick', 
          function (ev, seriesIndex, pointIndex, data) {
              $('#info1').html('series: '+seriesIndex+', point: '+pointIndex+', data: '+data);
          }
      ); 
```

它工作正常，但是，它去除了条形标签上的小数位并将值四舍五入到最接近的 int。我怎样才能停止这种情况并将结果显示到正确的小数点后 2 位？我试过`formatString: "\u00A3\%'d%.2f"`了，但它似乎在字符串到达​​这里之前对其进行了格式化

我正在使用 jqplot.barRenderer.min.js、jqplot.categoryAxisRenderer.min.js、jqplot.pointLabels.min.js

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-09T13:40:16.557

尝试使用`formatString: "%#.2f"`

# android - ACTION_GET_CONTENT 到 Google 图片

> ID：14234632
> 
> 赞同：3
> 
> 时间：2013-01-09T11:53:32.140
> 
> 标签：android, android-intent

正如[文档](http://developer.android.com/reference/android/content/Intent.html#ACTION_GET_CONTENT)所说：“ACTION_GET_CONTENT 可以允许用户浏览网络并下载所需的数据”。这就是我需要的，来自 Google 图片。虽然，如果我使用这个意图的类型应用程序崩溃（我想它只希望 ACTION_VIEW 打开浏览器）：

```
Intent intent = new Intent();
intent.setData(Uri.parse(url));
intent.putExtra("return-data", true);
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(intent, PICK_IMAGE); 
```

它需要（编辑以澄清我需要什么）：

*   建立与 Web 浏览器的连接
*   Google 图片的 URL
*   在用户选择一个图像后检索图像的 URL（它需要关闭浏览器，ACTION_VIEW 只会继续运行，直到用户决定关闭它并且不检索任何信息）。

就我所拥有的 URL 而言，这是一个，但它需要别的东西，因为它会进行默认搜索，而不是图像：

```
String url = "http://images.google.com/search?q=" + imagename; 
```

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:59:37.777

尝试使用以下网址。它在我的应用程序中对我来说很好：

```
"http://images.google.com/search?num=10&hl=en&site=&tbm=isch&source=hp&biw=980&bih=710&q=" + YourQueryString 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:20:20.220

您需要将`tbm`查询参数设置`isch`为图像搜索的值。所以最小的 URL 看起来像：

> " [http://google.com/search?tbm=isch&q=](http://google.com/search?tbm=isch&q=imageSearch) " + queryString

# c# - 无限滚动 - Windows Phone 7/8

> ID：14234633
> 
> 赞同：1
> 
> 时间：2013-01-09T11:53:36.647
> 
> 标签：c#, .net, windows-phone-7.1, scrollviewer

我正在尝试在 Windows Phone 7.1 项目中实现“无限滚动”。

大多数其他帖子都指向此[MSDN 博客链接](http://blogs.msdn.com/b/slmperf/archive/2011/06/30/windows-phone-mango-change-listbox-how-to-detect-compression-end-of-scroll-states.aspx)。

不过，我正在努力实现这一点，因为它并没有真正说明它是如何工作的或将代码放在哪里。另外，当我粘贴代码时，它似乎缺少空格，所以我浏览了代码并添加了缺少的空格并尽我所知对其进行了编辑。

我已经将 XAML 代码添加到了`<Application.Resources>`这`App.xaml`是正确的，这是我的`App.xaml`文件的内容：

```
<Application 
    x:Class="ScrollWindowBottom.App"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"       
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone">

    <!--Application Resources-->
    <Application.Resources>

        <Style TargetType="ScrollViewer">
            <Setter Property="VerticalScrollBarVisibility" Value="Auto"/>
            <Setter Property="HorizontalScrollBarVisibility" Value="Auto"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ScrollViewer">
                        <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" 
Background="{TemplateBinding Background}">
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="ScrollStates">
                                    <VisualStateGroup.Transitions>
                                        <VisualTransition GeneratedDuration="00:00:00.5"/>
                                    </VisualStateGroup.Transitions>
                                    <VisualState x:Name="Scrolling">
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="VerticalScrollBar" 
Storyboard.TargetProperty="Opacity" To="1" Duration="0"/>
                                            <DoubleAnimation Storyboard.TargetName="HorizontalScrollBar" 
Storyboard.TargetProperty="Opacity" To="1" Duration="0"/>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="NotScrolling">
                                    </VisualState>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="VerticalCompression">
                                    <VisualState x:Name="NoVerticalCompression"/>
                                    <VisualState x:Name="CompressionTop"/>
                                    <VisualState x:Name="CompressionBottom"/>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="HorizontalCompression">
                                    <VisualState x:Name="NoHorizontalCompression"/>
                                    <VisualState x:Name="CompressionLeft"/>
                                    <VisualState x:Name="CompressionRight"/>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Grid Margin="{TemplateBinding Padding}">
                                <ScrollContentPresenter x:Name="ScrollContentPresenter" Content="{TemplateBinding Content}" 
ContentTemplate="{TemplateBinding ContentTemplate}"/>
                                <ScrollBar x:Name="VerticalScrollBar" IsHitTestVisible="False" Height="Auto" Width="5" 
HorizontalAlignment="Right" VerticalAlignment="Stretch" Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}" 
IsTabStop="False" Maximum="{TemplateBinding ScrollableHeight}" Minimum="0" Value="{TemplateBinding VerticalOffset}" 
Orientation="Vertical" ViewportSize="{TemplateBinding ViewportHeight}" />
                                <ScrollBar x:Name="HorizontalScrollBar" IsHitTestVisible="False" Width="Auto" Height="5" 
HorizontalAlignment="Stretch" VerticalAlignment="Bottom" Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}" 
IsTabStop="False" Maximum="{TemplateBinding ScrollableWidth}" Minimum="0" Value="{TemplateBinding HorizontalOffset}" 
Orientation="Horizontal" ViewportSize="{TemplateBinding ViewportWidth}" />
                            </Grid>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Application.Resources>

    <Application.ApplicationLifetimeObjects>
        <!--Required object that handles lifetime events for the application-->
        <shell:PhoneApplicationService 
            Launching="Application_Launching" Closing="Application_Closing" 
            Activated="Application_Activated" Deactivated="Application_Deactivated"/>
    </Application.ApplicationLifetimeObjects>

</Application> 
```

这是我的`MainPage.xaml.cs`文件：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;

namespace ScrollWindowBottom
{
    public partial class MainPage : PhoneApplicationPage
    {
        // Constructor
        public MainPage()
        {
            InitializeComponent();
        }

        private void MainPage_Loaded(object sender, RoutedEventArgs e) 
     { 
         if(!App.ViewModel.IsDataLoaded) 
         { 
             App.ViewModel.LoadData(); 
         } 

         if(alreadyHookedScrollEvents) 
             return; 

         alreadyHookedScrollEvents = true; 
         MainListBox.AddHandler(ListBox.ManipulationCompletedEvent, (EventHandler<ManipulationCompletedEventArgs>)LB_ManipulationCompleted, true); 
         sb = (ScrollBar)FindElementRecursive(MainListBox, typeof(ScrollBar)); 
         sv = (ScrollViewer)FindElementRecursive(MainListBox, typeof(ScrollViewer)); 

         if(sv != null) 
         { 
             // Visual States are always on the first child of the control template 
            FrameworkElement element = VisualTreeHelper.GetChild(sv, 0) as FrameworkElement; 
             if(element != null) 
             { 
                 VisualStateGroup group = FindVisualState(element, "ScrollStates"); 
                 if(group != null) 
                 { 
                     group.CurrentStateChanging += newEventHandler<VisualStateChangedEventArgs>(group_CurrentStateChanging); 
                 } 
                 VisualStateGroup vgroup = FindVisualState(element, "VerticalCompression"); 
                 VisualStateGroup hgroup = FindVisualState(element, "HorizontalCompression"); 
                 if(vgroup != null) 
                 { 
                     vgroup.CurrentStateChanging += newEventHandler<VisualStateChangedEventArgs>(vgroup_CurrentStateChanging); 
                 } 
                 if(hgroup != null) 
                 { 
                     hgroup.CurrentStateChanging += newEventHandler<VisualStateChangedEventArgs>(hgroup_CurrentStateChanging); 
                 } 
             } 
         }           

     }

  private UIElement FindElementRecursive(FrameworkElement parent, Type targetType) 
       { 
           int childCount = VisualTreeHelper.GetChildrenCount(parent); 
           UIElement returnElement = null; 
           if (childCount > 0) 
           { 
               for (int i = 0; i < childCount; i++) 
               { 
                   Object element = VisualTreeHelper.GetChild(parent, i); 
                   if (element.GetType() == targetType) 
                   { 
                       return element as UIElement; 
                   } 
                   else 
                   { 
                       returnElement = FindElementRecursive(VisualTreeHelper.GetChild(parent, i) as FrameworkElement, targetType); 
                   } 
               } 
           } 
           return returnElement; 
       }

       private VisualStateGroup FindVisualState(FrameworkElement element, string name) 
       { 
           if (element == null) 
               return null; 

           IList groups = VisualStateManager.GetVisualStateGroups(element); 
           foreach (VisualStateGroup group in groups) 
               if (group.Name == name) 
                   return group; 

           return null; 
       }
    }
} 
```

有了这两段代码，当我尝试将我的应用程序运行到模拟器时，我只会收到很多错误：

![在此处输入图像描述](../Images/d99933da100b9dfa48bc7c64035632ef.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:15:20.540

您似乎缺少所需的主要 XAML，即。上的`MainListBox`元素`MainPage.xaml`。您添加了从文章中引用它的代码，但实际上并没有`ListBox`在您尝试使用它的页面上获得。

我建议您从链接的 MSDN 博客文章中下载 ZIP 文件并查看完整示例以了解您需要从那里获得哪些代码。

另请注意，此解决方案是较旧的方法，`LongListSelector`现在建议使用新方法。如需更多参考，请参阅[Microsoft 在 LongListSelector 上的这篇博文](http://blogs.windows.com/windows_phone/b/wpdev/archive/2012/10/01/how-to-create-an-infinite-scrollable-list-with-longlistselector.aspx)，以及[Windows Phone Toolkit](http://phone.codeplex.com/)以获取`LongListSelector`您自己的项目（请注意，它本机包含在 Windows Phone 8 中）。

# jquery - 如何使 FullCalendar 仅显示选择月份和日期

> ID：14234634
> 
> 赞同：0
> 
> 时间：2013-01-09T11:53:36.680
> 
> 标签：jquery, fullcalendar

在 FullCalendar 中默认显示当前月份、日期和年份，但我想要自定义 5 jun 2013 。

这个怎么做

```
$(document).ready(function() {

    var date = new Date();
    var d = date.getDate();
    var m = date.getMonth();
    var y = date.getFullYear();

    $('#calendar').fullCalendar({
        theme: true,
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek,agendaDay'
        },
        editable: false,
        events: [
            {
                title: 'Movie In',
                start: new Date(y, m, d),
                end: new Date(y, m,d),
                allDay: true,
            },

            ],
        eventColor: '#E42217'
    });

}); 
```

在

> var d = '5'; 变种 m = '7'; 变量 y = '2013';

我也通过了自定义日期月份但不工作

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:51:51.177

我认为这就是你想要的：[gotoDate](http://arshaw.com/fullcalendar/docs/current_date/gotoDate/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:18:56.123

如果您的意思是列标题，请像这样使用 columnFormat：

```
$('#calendar').fullCalendar({
    theme: true,
    header: {
        left: 'prev,next today',
        center: 'title',
        right: 'month,agendaWeek,agendaDay'
    },
    editable: false,
    events: [
        {
            title: 'Movie In',
            start: new Date(y, m, d),
            end: new Date(y, m,d),
            allDay: true,
        },

        ],
    eventColor: '#E42217',
    columnFormat: {
                  month: 'ddd',    // Mon
                  week: 'ddd M/d', // Mon 9/7
                  day: 'dd MMM yyyy' 
                  }
}); 
```

如果您想去特定日期，请使用此方法。

```
$('#calendar').fullCalendar( 'gotoDate', year [, month, [ date ]] ) 
```

初始化日历后，调用此方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-26T07:01:55.897

```
$(document).ready(function() {
    $('#calendar').fullCalendar({
        defaultDate:$.now(),
            // lang: 'ja',
            editable: true,
            eventLimit: true,
            customButtons: {
                btnJan: {
                    text: 'January',
                    click: function() {
                        var moment = $('#calendar').fullCalendar('getDate');
                        var currentMonth =  moment.format('YYYY')+'-'+01+'-'+01;
                        $('#calendar').fullCalendar('gotoDate', currentMonth);
                    }
                },
                btnFeb: {
                    text: 'February',
                    click: function() {
                        var moment = $('#calendar').fullCalendar('getDate');
                        var currentMonth =  moment.format('YYYY')+'-'+02+'-'+01;
                        $('#calendar').fullCalendar('gotoDate', currentMonth);
                    }
                }
            },
            header: {
                left: 'prev,next today btnJan btnFeb',
                center: 'title',
                right: 'month,agendaWeek,agendaDay'
            },
            dayNamesShort: ['Sunday', 'Monday', 'Tuesday', 'Wednesday','Thursday', 'Friday', 'Saturday'],
            monthNames:['January', 'February', 'March', 'April', 'May', 'June', 'July','August', 'September', 'October', 'November', 'December'],
            titleFormat:'MMMM D YYYY',
            events: [
                {
                    title: 'All Day Event',
                    start: '2016-06-01'
                }
            ]
        });
}); 
```

**参考：** [https ://fullcalendar.io/docs/current_date/getDate/](https://fullcalendar.io/docs/current_date/getDate/)
**演示** [http://www.somelesson.blogspot.com/2016/11/fullcalendar-javascript-event-calendar.html](http://www.somelesson.blogspot.com/2016/11/fullcalendar-javascript-event-calendar.html)
**输出：** [![在此处输入图像描述](../Images/983d74b5b9ead04a5d9be82f0e8a3b0f.png)](https://i.stack.imgur.com/gIwrX.png)

# drupal-7 - 使用 Drupal 7 为每个文件创建一个节点

> ID：14234635
> 
> 赞同：1
> 
> 时间：2013-01-09T11:53:49.097
> 
> 标签：drupal-7, nodes

我正在尝试使用 Drupal 7 为特定文件夹中的每个文件创建一个新节点。

我正在尝试创建的一个很好的例子是**Youtube**。

当我将带有 .mp4 扩展名的视频粘贴到特定文件夹中时，我希望 Drupal 扫描该文件夹（我会告诉 Drupal 何时扫描，所以这不必自动发生），并使用该视频创建一个节点它。我将使用管理界面自己手动设置标题、描述等，然后发布。

我知道我在 Drupal 及其模块中的方式，但我不是专家。我已经在谷歌上搜索了一段时间，我唯一能找到的是：

```
 file_scan_directory($dir, $mask, $options = array(), $depth = 0) 
```

我不是要一个完整的复制/粘贴解决方案，我只是希望有人能给我一些提示、有用的链接或教程来说明如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:51:46.590

要为您在目录中找到的每个视频文件创建一个节点，您可以使用类似于以下的代码。

```
 foreach (file_scan_directory($dir, '*.mp4', array('recurse' => FALSE) as $uri => $info) {
    $body_text = 'Build the body text.';

    $node = new stdClass();
    $node->type = $node_type;
    node_object_prepare($node);

    $node->title = 'Node Created Programmatically on ' . date('c');
    $node->language = LANGUAGE_NONE;

    $node->body[$node->language][0]['value'] = $body_text;
    $node->body[$node->language][0]['summary'] = text_summary($body_text);
    $node->body[$node->language][0]['format'] = 'full_html';

    node_save($node);
  } 
```

# r - 如何使用 xts 包计算日内数据的每日平均相关性？

> ID：14234636
> 
> 赞同：3
> 
> 时间：2013-01-09T11:53:56.370
> 
> 标签：r, xts

我有一堆股票的日内历史记录。我正在尝试每天计算股票之间的 1 分钟相关性。我的目标是使用一段时间内每对的每日平均值来确定特定交易策略的最佳货币对。

我的想法是遍历交易日，计算日内 1 分钟相关性，计算所有交易日的平均值，下一个交易对。

但是，我被困在交易日的循环中。

```
my.xts.A <- xts(A_Frame[,-1], order.by=A_Frame[,1])
my.xts.B <- xts(B_Frame[,-1], order.by=B_Frame[,1])

my.min.A <- to.minutes(my.xts.A[,1],1,'minutes')
my.min.B <- to.minutes(my.xts.B[,1],1,'minutes')

my.day <- to.daily(my.xts.A[,1],1)

my.index <- index(my.day) 
```

我得到了交易日`my.index`，有人可以给我一些关于如何选择`my.min.A`where子集的指导`my.index[i] == day(my.min.A)`吗？

谢谢

编辑：

```
dput(head(my.min.A, 20))
structure(c(3575, 3630, 3649, 3630, 3614, 3612, 3612, 3616, 3615, 
3602, 3602, 3602, 3605, 3605, 3605, 3605, 3605, 3604, 3604, 3605, 
3682, 3630, 3649, 3630, 3614, 3612, 3612, 3616, 3615, 3602, 3602, 
3606, 3605, 3605, 3605, 3605, 3605, 3605, 3604, 3608, 3575, 3630, 
3649, 3630, 3612, 3612, 3610, 3616, 3615, 3602, 3602, 3601, 3604, 
3603, 3604, 3604, 3604, 3604, 3604, 3604, 3682, 3630, 3649, 3630, 
3612, 3612, 3610, 3616, 3615, 3602, 3602, 3604, 3604, 3604, 3604, 
3604, 3605, 3604, 3604, 3605), tclass = c("POSIXct", "POSIXt"
), tzone = "", class = c("xts", "zoo"), .indexCLASS = c("POSIXct", 
"POSIXt"), .indexTZ = "", index = structure(c(1352790059, 1352790290, 
1352790306, 1352790467, 1352790521, 1352790547, 1352790757, 1352791124, 
1352791222, 1352791466, 1352791576, 1352791750, 1352791859, 1352791891, 
1352791970, 1352792006, 1352792041, 1352792149, 1352792181, 1352792227
), tzone = "", tclass = c("POSIXct", "POSIXt")), .Dim = c(20L, 
4L), .Dimnames = list(NULL, c("minutes.Open", "minutes.High", 
"minutes.Low", "minutes.Close"))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T13:01:08.310

这是一个可重复的示例，使用每日数据并计算价格之间的每月相关性。

```
library(quantmod)
getSymbols("KO;PEP")
apply.monthly(merge(Cl(KO),Cl(PEP)), function(x) cor(x[,1],x[,2])) 
```

在你的情况下，你会想要这样的东西：

```
apply.daily(merge(Cl(my.min.A), Cl(my.min.B)), function(x) cor(x[,1],x[,2])) 
```

# ruby - 如何在正则表达式扫描中转义换行符

> ID：14234639
> 
> 赞同：1
> 
> 时间：2013-01-09T11:54:03.230
> 
> 标签：ruby, regex

```
str = "This\n is a sample text for test"
str.scan(/\S.{0,15}\S(?=\s|$)|\S+/)
# => ["This", "is a sample text", "for test"] 
```

在这里，当出现换行符 ( `\n`) 时它会拆分。我实际上希望输出为，

```
 ["This\n is a", "sample text for", "test"] 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T11:58:43.087

使用`/m`允许点匹配换行符的修饰符：

```
str.scan(/\S.{0,15}\S(?=\s|\z)|\S+/m) 
```

另外，我建议您使用`\z`而不是`$`因为`$`匹配行尾；`\z`是强制 Ruby 匹配字符串结尾的唯一方法。在这个例子中没关系，但这是一个养成的好习惯。Ruby 在这两点上与所有其他正则表达式风格不同。

# php - 如何测试php的可扩展性

> ID：14234643
> 
> 赞同：5
> 
> 时间：2013-01-09T11:54:11.533
> 
> 标签：php, performance, scalability

我在性能良好的 VPS 上运行 centOS。我有一个 PHP 文件，它为每个玩这个游戏的用户计算游戏的一些组合。它计算使用 FLASH 构建的游戏的逻辑。

我想测试这个文件以查看响应时间如何同时处理 1000 个用户我不知道从哪里开始或寻找什么。

如果有人可以给我一些提示，请告诉我。

我还有一个问题。我如何知道我的应用程序是否可扩展？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T12:10:07.243

您可以使用的工具很少。

[ApacheBench](http://en.wikipedia.org/wiki/ApacheBench)

[Httperf](http://code.google.com/p/httperf/)

[HP LoadRunner](http://www8.hp.com/us/en/software-solutions/software.html?compURI=1175451#.UO1d8IlevDM)

[http://www.opensourcetesting.org/performance.php](http://www.opensourcetesting.org/performance.php)

[xDebug](http://xdebug.org/)内置了一个分析器。将允许您查看所有函数调用、平均和累积调用时间以及总脚本执行时间

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T17:05:24.623

> 我想测试这个文件以查看响应时间如何同时处理 1000 个用户我不知道从哪里开始或寻找什么。

雇用一个去过那里并做过的人。我知道，从表面上看，这似乎很昂贵，但与试图攀登流程、工具、需求、报告、分析的垂直壁相比，雇用某人会更便宜。

同样说明的是您对同时使用术语的使用。人类不是这样运作的。同时行为由时钟滴答和自动化过程控制。自然种群是混乱的，但可能会在一个较短的窗口内到达，每个种群彼此独立运行，但在系统上产生不同的请求负载。

我审核了很多开发人员生成的性能测试。在负载模型设计、实施、起搏、数据等方面的审计从来都不是很顺利……

尤其是如果要为 1000 个并发用户提供资金，那么在进行测试所需的短时间内聘请专家或服务是值得的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T12:21:45.953

您可以为此使用[ab 。](http://httpd.apache.org/docs/2.4/programs/ab.html "抗体")

要测试最终用户的性能，请不要在服务器上运行它。测试工具将使用与脚本相同的资源，并且 localhost 网络通信不是真实场景。还有一些基于云的压力测试服务（如[http://loadimpact.com](http://loadimpact.com)或[http://www.neustar.biz/enterprise/web-performance/load-testing-packages](http://www.neustar.biz/enterprise/web-performance/load-testing-packages)，但它们不是免费的）

此外，请查看整个系统的内存/CPU 消耗，而不仅仅是脚本本身。通常，您应该使用 Nginx 和 FastCGI 在资源使用方面获得相当多的改进。

可扩展性很大程度上取决于您的脚本在做什么、它消耗什么资源以及如何使用。最后，它可能就像添加另一台服务器和一个负载均衡器一样简单。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-16T23:56:31.710

你也可以试试[https://loadimpact.com/](https://loadimpact.com/)，它也提供了很好的监控工具和使用 Lua 脚本语言的可定制的用户测试场景，我们最近使用这个站点来测试我们的直播应用程序的可扩展性，获得 1 相当便宜月会员资格允许对 3000 名并发用户进行无限制测试，我们调整了网站，可以在最近的一个节目中在一小时内扣留 12000 多名并发用户，现在对它非常有信心。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T12:13:35.893

您可以在 xDebug 中启用跟踪，这将为您提供内存使用跟踪。您可以免费使用诸如 loadimpact 之类的服务在您的服务器上进行负载测试（或使用像 ab 这样的内部测试器，但在现实世界中不太可靠）。以下是启用跟踪的方法：xdebug.auto_trace=1

# javascript - 向对象添加元素

> ID：14234646
> 
> 赞同：281
> 
> 时间：2013-01-09T11:54:25.460
> 
> 标签：javascript, json, object

我需要填充一个 json 文件，现在我有这样的东西：

```
{"element":{"id":10,"quantity":1}} 
```

我需要添加另一个“元素”。我的第一步是使用 将该 json 放入 Object 类型`cart = JSON.parse`，现在我需要添加新元素。我想我必须使用`cart.push`添加另一个元素，我试过这个：

```
var element = {};
element.push({ id: id, quantity: quantity });
cart.push(element); 
```

但是当我尝试做时出现错误“对象没有方法推送” `element.push`，我认为我做错了什么，因为我没有在任何地方告诉“元素”。

我怎样才能做到这一点？

**编辑：**对不起，我脑子里有很多困惑。

我以为从 获取数据时只能获取对象类型`JSON.parse`，但我首先得到了放入 JSON 中的内容。

用数组代替对象解决了我的问题，我在这里也使用了很多建议，谢谢大家！

* * *

## 回答 #1

> 赞同：359
> 
> 时间：2013-01-09T11:56:50.793

您的元素不是数组，但是您的购物车需要是数组才能支持许多元素对象。代码示例：

```
var element = {}, cart = [];
element.id = id;
element.quantity = quantity;
cart.push(element); 
```

如果您希望购物车成为表单中的对象数组，请`{ element: { id: 10, quantity: 1} }`执行：

```
var element = {}, cart = [];
element.id = id;
element.quantity = quantity;
cart.push({element: element}); 
```

`JSON.stringify()`在评论中提到了一个问题：

```
>> JSON.stringify([{a: 1}, {a: 2}]) 
      "[{"a":1},{"a":2}]" 
```

* * *

## 回答 #2

> 赞同：201
> 
> 时间：2013-01-09T11:57:45.520

与那一排

```
var element = {}; 
```

你定义`element`为一个普通的对象。本机 JavaScript 对象没有`push()`方法。要将新项目添加到普通对象，请使用以下语法：

```
element[ yourKey ] = yourValue; 
```

另一方面，您可以`element`使用

```
var element = []; 
```

然后你可以使用添加元素`push()`。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2019-04-25T13:26:09.780

要附加到对象使用`Object.assign`

```
var ElementList ={}

function addElement (ElementList, element) {
    let newList = Object.assign(ElementList, element)
    return newList
}
console.log(ElementList) 
```

输出：

> {"element":{"id":10,"quantity":1},"element":{"id":11,"quantity":2}}

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2013-01-09T12:21:06.933

如果购物车必须存储为对象而不是数组（尽管我建议存储为 []），您始终可以更改结构以使用 ID 作为键：

```
var element = { quantity: quantity };
cart[id] = element; 
```

这允许您将多个项目添加到购物车，如下所示：

```
cart["1"] = { quantity: 5};
cart["2"] = { quantity: 10};

// Cart is now:
// { "1": { quantity: 5 }, "2": { quantity: 10 } } 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2020-06-11T17:13:18.383

将新的键/对元素添加到原始元素中`object`：

```
const obj = { a:1, b:2 }
const add = { c:3, d:4, e: ['x','y','z'] }

Object.entries(add).forEach(([key,value]) => { obj[key] = value }) 
```

**obj**新值：

```
{a: 1, b: 2, c: 3, d: 4, e: ['x', 'y', 'z'] } 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2019-08-08T13:04:23.207

如果有用，我正在阅读与此尝试相关的内容。

1.在对象内部定义一个推送函数。

```
let obj={push:function push(element){ [].push.call(this,element)}}; 
```

现在您可以像数组一样推送元素

```
obj.push(1)
obj.push({a:1})
obj.push([1,2,3]) 
```

这将产生这个对象

```
obj={
 0: 1
 1: {a: 1}
 2: (3) [1, 2, 3]
 length: 3
} 
```

注意元素添加了索引，并且还看到对象添加了一个新的长度属性。这对于查找对象的长度也很有用。这是因为`push()`函数的通用性质

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-01-09T11:55:27.333

你应该用`var element = [];`
javascript写的`{}`是一个空对象并且`[]`是一个空数组。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2013-01-09T11:58:04.643

```
cart.push({"element":{ id: id, quantity: quantity }}); 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2017-07-20T13:57:08.867

```
function addValueInObject(object, key, value) {
    var res = {};
    var textObject = JSON.stringify(object);
    if (textObject === '{}') {
        res = JSON.parse('{"' + key + '":"' + value + '"}');
    } else {
        res = JSON.parse('{' + textObject.substring(1, textObject.length - 1) + ',"' + key + '":"' + value + '"}');
    }
    return res;
} 
```

此代码有效。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-06-03T18:03:52.203

试试这个：

```
var data = [{field:"Data",type:"date"},  {field:"Numero",type:"number"}];

var columns = {};

var index = 0;

$.each(data, function() {

    columns[index] = {
        field : this.field,
        type : this.type
    };

    index++;
});

console.log(columns); 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-06-19T10:06:54.573

如果有人想创建一个类似的 JSON，只是不使用`cart`数组，这里是：

我有一个对象数组`myArr`：

```
var myArr = [{resourceType:"myRT",
            id: 1,
            value:"ha"},
            {resourceType:"myRT",
            id: 2,
            value:"he"},
            {resourceType:"myRT",
            id: 3,
            value:"Li"}]; 
```

我将尝试创建具有以下结构的 JSON：

```
{
 "1":{"resourceType":"myRT","id":"1","value":"ha"},
 "2":{"resourceType":"myRT","id":"2","value":"he"},
 "3":{"resourceType":"myRT","id":"3","value":"Li"}
} 
```

你可以简单地做-

```
var cart = {};
myArr.map(function(myObj){
                    cart[myObj.id]= myObj;
                    }); 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-05-07T21:32:36.993

```
 function addValueInObject(value, object, key) {

        var addMoreOptions = eval('{"'  + key + '":' +  value + '}');

        if(addMoreOptions != null) {
            var textObject = JSON.stringify(object);
            textObject = textObject.substring(1,textObject.length-1);
            var AddElement = JSON.stringify(addMoreOptions);
            object = eval('{' + textObject +','+  AddElement.substring(1,AddElement.length-1) + '}');
        }
        return object;
    }

addValueInObject('sdfasfas', yourObject, 'keyname'); 
```

或者：

```
var obj = {'key':'value'};

obj.key2 = 'value2'; 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-08-06T07:51:45.123

对于仍在寻找解决方案的任何人，我认为这些对象应该存储在一个数组中，例如......

```
var element = {}, cart = [];
element.id = id;
element.quantity = quantity;
cart.push(element); 
```

然后，当您想将元素用作对象时，您可以这样做...

```
var element = cart.find(function (el) { return el.id === "id_that_we_want";}); 
```

在“id_that_we_want”处放置一个变量，并为其提供我们想要从数组中获取的元素的 id。返回一个“元素”对象。当然，我们不必通过 id 来查找对象。我们可以使用任何其他属性来进行查找。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2020-08-24T20:54:09.887

我的建议是使用其他答案中已经提出的不同数据结构 - 它允许您推送 card.elements 并允许扩展卡属性：

```
let card = {
  elements: [
    {"id":10,"quantity":1}
  ],

  //other card fields like 'owner' or something...
}

card.elements.push({"id":22,"quantity":3})

console.log(card);
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-08-11T11:16:50.653

push 是数组的一种方法，因此对于对象，您可以获得最后一个元素的索引，并且您可能可以与 push for object 执行相同的工作，如下所示

```
var lastIndex = Object.keys(element)[Object.keys(element).length-1]; 
```

然后将对象添加到元素的新索引

```
element[parseInt(lastIndex) +1] = { id: id, quantity: quantity }; 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2017-09-19T11:43:45.297

如果您不设计在 JS 中执行循环，例如传递给 PHP 为您执行循环

```
let decision = {}
decision[code+'#'+row] = event.target.value 
```

这个概念可能会有所帮助

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-10-28T22:12:26.387

这是一个老问题，无论如何今天最好的做法是使用**Object.defineProperty**

```
const object1 = {};

Object.defineProperty(object1, 'property1', {
  value: 42,
  writable: false
});

object1.property1 = 77;
// throws an error in strict mode

console.log(object1.property1);
// expected output: 42 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-05-13T14:01:16.423

万一其他人需要这个，我终于找到了一个添加对象或对象数组的好方法：

```
var myobj = {}

// These two options only work for single-valued keys, not arrays or objects
myobj["a"] = 1
myobj.b = 2

// This one works for everyting:
Object.assign(myobj, {"key": "value"});  // single-value

// Add object
Object.assign(myobj, {"subobj": 
  {
    "c": 3
  }
});

// Add array of objects
Object.assign(myobj, {"subarr": 
  [
    {
      "d": 4,
    },
    {
      "e": 5
    }
  ]
}); 
```

# html - 如果没有足够的空间显示整个关键字，如何使关键字从下一行开始？

> ID：14234653
> 
> 赞同：1
> 
> 时间：2013-01-09T11:54:50.473
> 
> 标签：html, css

如果没有足够的空间显示整个关键字，如何使关键字从下一行开始？
请检查我的代码。

**如果没有足够的空间来显示整个内容，**我想要这个 Output : 关键字应该从下一行开始。****

 **```
Tags: Apple Banana Melon 
      Strawberry Kiwi Orange 
      Pineapple Carrot Onion 
      Tomato Bacon Sandwitch
      SoyBeans Pork Beef Chicken 
```

**当前输出**：关键字分为当前行和下一行的开头。

```
Tags: Apple Banana Melon Strawbe
      rry Kiwi Orange Pineapple 
      Carrot Onion Tomato Bacon 
      Sandwitch SoyBeans Pork Be
      ef Chicken 
```

**当前的 HTML**

```
<div class="shop_tag ">
    <table>
        <tr>
         <th class="tag_title">tags:</th>
         <th class="tag_tags">
          <ul>
                    <li>Apple</li>
                    <li>Banana</li>
                    <li>Melon</li>
                    <li>Strawberry</li>
                    <li>Kiwi</li>
                      ....
          </ul>
         </th>
        </tr>
    </table>
</div> 
```

**当前的 CSS**

```
div.shop_tag .table{
    display:table-row;
    display:inline;
}
div.shop_tag th.tag_title{
    width:100px;
    vertical-align: top;
}
div.shop_tag th.tag_tags{
    display:table-cell;
    vertical-align: top;
    text-align:left;
}  
div.shop_tag li{
display:inline;
} 
```

**更新：**在 Firefox 的检查器中，这些类是继承的。

```
a:focus {
    outline: thin dotted rgb(51, 51, 51);
    outline-offset: -2px;
}

.css3 {
    font-size: 1.5em;
    color: rgb(112, 165, 255);
}

a {
    color: rgb(0, 136, 204);
}

li {
    line-height: 20px;
}

div.shop_tag th.tag_tags {
    text-align: left;
}

table {
    border-collapse: collapse;
    border-spacing: 0px;
} 
```**

# java - 无法从谷歌应用引擎发送电子邮件

> ID：14234656
> 
> 赞同：0
> 
> 时间：2013-01-09T11:55:03.070
> 
> 标签：java, security, google-app-engine, email, jakarta-mail

我在 GAE 版本 1.7.3 上并使用 java mail api 发送电子邮件。在本地开发服务器上，邮件发送正常。但是在部署到应用引擎后，我得到了以下异常

```
com.google.apphosting.api.ApiProxy$CallNotFoundException: The API package 'remote_socket' or call 'Resolve()' was not found.
    at java.lang.Thread.getStackTrace(Thread.java:1495)
    at com.google.apphosting.runtime.ApiProxyImpl.doSyncCall(ApiProxyImpl.java:240)
    at com.google.apphosting.runtime.ApiProxyImpl.access$000(ApiProxyImpl.java:66)
    at com.google.apphosting.runtime.ApiProxyImpl$1.run(ApiProxyImpl.java:183)
    at com.google.apphosting.runtime.ApiProxyImpl$1.run(ApiProxyImpl.java:180)

    at java.security.AccessController.doPrivileged(Native Method)

    at com.google.apphosting.runtime.ApiProxyImpl.makeSyncCall(ApiProxyImpl.java:180)

    at com.google.apphosting.runtime.ApiProxyImpl.makeSyncCall(ApiProxyImpl.java:66)

    at com.google.apphosting.api.ApiProxy.makeSyncCall(ApiProxy.java:107)
    at com.google.apphosting.api.ApiProxy.makeSyncCall(ApiProxy.java:56)

    at com.google.appengine.api.socket.SocketApiHelper.apiProxyMakeSyncCall(SocketApiHelper.java:90)

    at com.google.appengine.api.socket.SocketApiHelper.makeSyncCall(SocketApiHelper.java:58)

    at com.google.appengine.api.socket.NameServiceImpl.lookupAllHostAddr(NameServiceImpl.java:61)

    at com.google.apphosting.util.ResolverManager$AppEngineNameservice.lookupAllHostAddr(ResolverManager.java:42)

    at java.net.InetAddress.getAddressFromNameService(InetAddress.java:1353)
    at java.net.InetAddress.getAllByName0(InetAddress.java:1303)

    at java.net.InetAddress.getAllByName(InetAddress.java:1232)

    at java.net.InetAddress.getAllByName(InetAddress.java:1163)

    at java.net.InetAddress.getByName(InetAddress.java:1113)

    at javax.mail.Service.connect(Service.java:257)

    at javax.mail.Service.connect(Service.java:91)

    at javax.mail.Service.connect(Service.java:76)

    at javax.mail.Transport.send(Transport.java:94)
    at javax.mail.Transport.send(Transport.java:48)
    at com.test.igreetings.service.impl.EmailImpl.sendEmail(EmailImpl.java:61) 
```

这是我发送电子邮件的代码：

```
try {
            // Email is my custom pojo class
            Email email = new Email();
            email.setMailHost("smtp.gmail.com");
            email.setAuth("true");
            email.setFrom("username@gmail.com");
            email.setTo("targetemail@example.com");
            email.setSubject("test);
            email.setMessage("test body");
            email.setPort("25");
            email.setStarttls("true");
            email.setLogin("username@gmail.com");
            email.setPassword("pwd");

            Properties props = new Properties();
            props.setProperty("mail.host", email.getMailHost());
            props.setProperty("mail.smtp.port", email.getPort());
            props.setProperty("mail.smtp.auth", email.getAuth());
            props.setProperty("mail.smtp.starttls.enable", email.getStarttls());

            Authenticator auth = new SMTPAuthenticator(email.getLogin(), email.getPassword());

            Session session = Session.getInstance(props, auth);

            MimeMessage msg = new MimeMessage(session);
            msg.setText(email.getMessage());
            msg.setSubject(email.getSubject());
            msg.setFrom(new InternetAddress(email.getFrom()));
            msg.addRecipient(Message.RecipientType.TO, new InternetAddress(email.getTo()));
            Transport transport = session.getTransport("smtp");
            transport.connect(email.getMailHost(), 25, "username@gmail.com", "pwd");

            transport.sendMessage(msg, msg.getAllRecipients());

            transport.close();
        } catch (AuthenticationFailedException ex) {
            Logging.log("AuthenticationFailedException in sendEmail: " + ex.toString());
            ex.printStackTrace();

        } catch (AddressException ex) {

            Logging.log("AddressException in sendEmail: " + ex.toString());
            ex.printStackTrace();
        } catch (MessagingException ex) {
            Logging.log("MessagingException in sendEmail: " + ex.toString());
            ex.printStackTrace();
        } 
```

## 编辑：

我已根据您的建议更改了代码，这是我的更新代码：

```
Properties props = new Properties();
                        Session session = Session.getDefaultInstance(props, null);
                        Message msg = new MimeMessage(session);
                        msg.setFrom(new InternetAddress("username@gmail.com"));
                        msg.addRecipient(Message.RecipientType.TO,
                        new InternetAddress("targetemail@example.com"));
                        msg.setSubject("test");
                        msg.setText("test");
                        Transport.send(msg); 
```

我也遇到了类似的异常 找不到 API 包“remote_socket”或调用“CreateSocket()”。上述发件人也注册为该应用程序的开发者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:39:34.543

正如@Shay 所指出的，您不能将外部 SMTP 提供程序与 GAE 一起使用。GAE 使用它自己的 SMTP 网关。

**相关问题：**在 GAE 上，您只能发送来自应用程序管理员（GAE 管理员 -> 权限）或当前通过 Google 帐户登录的用户之一的电子邮件（即来自字段）。注意：这仅适用于通过 Google 帐户登录的用户，不适用于通过联合登录（例如 OpenID）登录的用户：[代表 Google Apps 用户发送电子邮件](https://stackoverflow.com/questions/10182854/sending-email-on-behalf-of-google-apps-user)（答案来自 Google 工程师）

**更新：**如前所述，`username@gmail.com`必须是[通过 Google Apps 登录登录到您的 GAE 应用程序](https://developers.google.com/appengine/docs/java/users/overview)的用户的电子邮件，或者该用户必须是您的 GAE 应用程序的管理员。

**Update2：**这对我有用：

```
Properties props = new Properties();
Session session = Session.getDefaultInstance(props, null);
try {
    Message msg = new MimeMessage(session);
    msg.setFrom(new InternetAddress("admin@domain.com", "Admin", "UTF-8"));
    msg.addRecipient(Message.RecipientType.TO, new InternetAddress(recipientAddress));
    msg.setSubject(emailSubject);
    msg.setText(emailText);
    Transport.send(msg);

} catch (AddressException e) {
// TO address not valid
} catch (MessagingException e) {
    // other email error
} catch (UnsupportedEncodingException e) {
    // should not happen UTF-8 is always available
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:00:24.470

> 应用程序不能使用 JavaMail 接口连接到其他邮件服务以发送或接收电子邮件。添加到传输或会话的 SMTP 配置被忽略。

删除端口、用户、密码和邮件主机设置，它应该可以工作。

# javascript - @HTML.CheckBoxFor() 未发回未选中框的值

> ID：14234658
> 
> 赞同：0
> 
> 时间：2013-01-09T11:55:07.123
> 
> 标签：javascript, asp.net-mvc

我的代码如下所示：

```
<div>
 <label>
      @Html.CheckBoxFor(x=>x.IsEnabled)
      IsEnabled</label>     
</div> 
```

问题是CheckBoxFor正在为该字段创建一个隐藏的，但是当检查框时，它仍未将更改的值发送到服务器。即使我取消选中它，我仍然将值设为 true。该字段出现在表单中，我没有使用提交提交，而是序列化（使用 jquery 序列化程序）然后提交。

问题是序列化程序获取了每个元素的 value 属性，并且复选框 value 属性在切换时没有改变。检查的属性是正在更改的属性。

有什么办法可以解决吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:47:31.547

你可以这样使用

```
@Html.CheckBoxFor(model => model.Active.Value) 
```

我想这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T11:58:13.603

不幸的是，在某些情况下，无法使用 CheckBoxFor 破解此问题，但您可以这样做：

`@Html.CheckBox("IsEnabled", Model.IsEnabled)`

相反，它应该工作得更好。Checkboxfor 创建一些隐藏变量，在提交表单时使用这些变量进行操作：

```
<input name="IsEnabled" type="checkbox" value="true">
<input name="IsEnabled" type="hidden" value="false"> 
```

这可能是 jquerish 插件的问题。尤其是那些序列化的东西，因为他们可能只是做简单的属性映射。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T09:17:14.237

当我使用按名称绑定模型的普通 Html 输入类型时。它完美地工作：

```
<label>
   <input id="IsEnabled" name="ISEnabled" type="checkbox" value="true" />
       IsEnabled
 </label> 
```

# ruby-on-rails - Rails：解析文本字符串并在提交时加载子表

> ID：14234660
> 
> 赞同：0
> 
> 时间：2013-01-09T11:55:10.630
> 
> 标签：ruby-on-rails

在我的 Rails 应用程序中，我有三个模型：**文章**、**句子**和连接模型**article_sentences**。

**@article.article**字段包含几段文本。句子由句号分隔，也有空行。

当用户创建或编辑一篇文章时，我想在后台代码解析**@article.article中文本的值，并为****句子**表中的每个句号分隔句子创建一个条目。

这种类型的“保存后”代码会出现在文章控制器的**创建方法中吗？**关于如何进行解析的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:06:10.433

您存储（修改的）文章的任何地方都是解析（更新的）内容的好地方。

所以在正常情况下

*   `create`方法，因为它存储了一篇新文章
*   `update`方法，因为它存储文章的更新版本（根据您的要求，您可以在存储更新版本*之前删除句子并在之后**解析*文章

如果您不使用默认的 REST 实现，您需要找到您存储/更新文章的自定义位置。

# ios - 应用程序错误：无法对对象进行正则表达式匹配

> ID：14234670
> 
> 赞同：1
> 
> 时间：2013-01-09T11:55:41.683
> 
> 标签：ios, xml, xcode, search, nspredicate

我解析 XML，我有搜索栏。当我尝试搜索时，我收到此错误：

> 无法对 object 进行正则表达式匹配`<List: 0x888de20>`。

我认为问题在这里：

```
- (void) searchTableView 
{
    [filteredList superclass];
    filteredList = nil;

    filteredList = [[NSMutableArray alloc] initWithArray:app.listArray];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF like[c] %@",[NSString  stringWithFormat:@"%@*",search.text]];
    [filteredList filterUsingPredicate:predicate]; 
} 
```

我是 Xcode 的初学者。

这是我所有的 MasterViewController 类：

```
@implementation MasterViewController
@synthesize app;
@synthesize detailViewController = _detailViewController;
@synthesize theList;
@synthesize filteredList;
@synthesize search;

- (void)viewDidLoad
{
    [super viewDidLoad];
    app = [[UIApplication sharedApplication] delegate];
    filteredList = [[NSMutableArray alloc] initWithArray:app.listArray];
    [self.tableView reloadData];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    //return [app.listArray count];
    return [filteredList count];
}
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }
    theList = [app.listArray objectAtIndex:indexPath.row];
    cell.textLabel.text = theList.znacka;
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    return cell;
}
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{

    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (void) searchTableView
{
    [filteredList superclass];
    filteredList = nil;

    filteredList = [[NSMutableArray alloc] initWithArray:app.listArray];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"count=%d",[NSString stringWithFormat:@"%@*",search.text]];
    [filteredList filterUsingPredicate:predicate];

}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    DetailViewController *detailView = [[DetailViewController alloc] init];

    theList = [app.listArray objectAtIndex:indexPath.row];

    detailView.theList = theList;

    [self.navigationController pushViewController:detailView animated:YES];
}
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{
    [self searchTableView];
    [self.tableView reloadData];
}
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar
{
    [self searchTableView];
    [search resignFirstResponder];
}
@end 
```

我在 MasterViewController.xib 中有搜索栏。在那里，我有来自 XML 的五个项目 (theList.znacka)，现在我需要搜索这些项目。

# c# - 使用 CSS 样式时，Datagrid 标题全部出现在一列中

> ID：14234672
> 
> 赞同：0
> 
> 时间：2013-01-09T11:55:57.090
> 
> 标签：c#, asp.net, css

我的屏幕显示中有一个数据网格，定义如下：-

```
<div style="overflow: auto; width: 380px; height: 300px">
    <asp:DataGrid id="ItemsGrid"
                  BorderWidth="1"
                  CellPadding="3"
                  AutoGenerateColumns="true"
                  runat="server">
        <HeaderStyle CssClass="subHeader"></HeaderStyle>
        <ItemStyle CssClass="normalText"></ItemStyle >
    </asp:DataGrid>
</div> 
```

显示如下：-

![使用 HeaderStyle 显示](../Images/f6351af6732711aa3045c924d6c17eca.png)

如果没有 HeaderStyle 项目，网格将按我的预期显示：-

![不带 HeaderStyle 的显示](../Images/8a0bc0c0892100cb668e199c3da938c7.png)

（尽管标题样式错误）。因此，CSS是：-

```
.subHeader
{
    clear:both;
    float: left;
    display: block;
    overflow: hidden;
    margin: 0;
    border: 0;
    border-width: 0px;
    border-right-style: solid;
    font-size: small;
    font-family: Verdana;
} 
```

有谁知道我在这里做错了什么？我在[这里](https://stackoverflow.com/questions/179860/problem-with-width-of-auto-generated-columns-in-datagrid/179881#179881)尝试过这个建议，但没有任何区别。

**编辑**

这里要求的是 HTML 输出，首先是带有 HeaderStyle 条目的版本：-

```
<div style="overflow: auto; width: 380px; height: 300px">
    <table cellspacing="0" cellpadding="3" rules="all" border="1" id="ItemsGrid style="border-width:1px;border-style:solid;border-collapse:collapse;">
    <tr class="subHeader">
        <td>Grade</td><td>Kurznamen</td><td>Discard&nbsp;Length</td>
    </tr><tr class="normalText">
        <td>13004</td><td>21CRNIMO2-2-2</td><td>23.17</td> 
```

并且没有：-

```
 <div style="overflow: auto; width: 380px; height: 300px">
                            <table cellspacing="0" cellpadding="3" rules="all" border="1" id="ItemsGrid" style="border-width:1px;border-style:solid;border-collapse:collapse;">
<tr>
    <td>Grade</td><td>Kurznamen</td><td>Discard&nbsp;Length</td>
</tr><tr class="normalText">
    <td>13004</td><td>21CRNIMO2-2-2</td><td>23.17</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:59:23.427

删除`clear`and`float`规则，你应该很高兴。

另外，如果你对 CSS 不熟悉，我建议你看看这样的网站：[http ://www.csstutorial.net/](http://www.csstutorial.net/)

# java - 如何使用构造函数 @Autowire bean

> ID：14234676
> 
> 赞同：1
> 
> 时间：2013-01-09T11:56:19.467
> 
> 标签：java, spring

我正在尝试定义一个需要 2 个构造函数的 bean 和 @Autowire org.springframework.jdbc.object.StoredProcedure。有没有办法在连接这些 bean 时传递构造函数参数？下面是我的代码：

```
@Component("procedure")
public class ExecuteStoreProcedure extends AbstractImutableDAO{

    @Autowired
    private StoredProcedure procedure;

......
} 
```

这里 StoredProcedure 有一个构造函数来传递 jdbctemplate 和过程名称，这是动态的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T12:19:57.097

也许我不明白这个问题，但你在接线时不需要构造函数参数，你在 context.xml 中配置你的 bean (StoredProcedure)

```
<bean id="proc1" class="org.springframework.jdbc.object.StoredProcedure">
    <constructor-arg name="ds" ref="ds" />
    <constructor-arg name="name" value="proc1" />
</bean> 
```

Spring 使用给定的构造函数 args 创建它并将 bean 注入到您的字段中

```
@Autowired
private StoredProcedure procedure; 
```

如果不想使用 xml 它不会改变想法

```
@Configuration
@PropertySource("spring.properties")
@EnableTransactionManagement
public class Test3 {
    @Autowired 
    Environment env;  

    @Bean 
    public ExecuteStoreProcedure getExecuteStoreProcedure() {
        ...
    }

    @Bean 
    public DataSource getDataSource() {
       ...
    }

    @Bean 
    public StoredProcedure getStoredProcedure() {
        return new MyStoredProcedure(getDataSource(), "proc1");
    }
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:43:22.513

当您 @Autowire 一个字段时，您假设 ApplicationContext 中已经存在所需类型的 bean。因此，为了让这段代码工作，您需要做的是声明一个这样的 bean（在 XML 中，或者，如果您想以编程方式配置它，请使用 @Bean - 请参阅[此处的 Spring 文档](http://static.springsource.org/spring-javaconfig/docs/1.0.0.M4/reference/html/ch02s02.html)）。

# macos - Mac OS X 上的 JavaFX DirectoryChooser 可能存在的错误

> ID：14234678
> 
> 赞同：1
> 
> 时间：2013-01-09T11:56:24.213
> 
> 标签：macos, javafx

我正在使用 JavaFX 开发应用程序，并且必须使用 DirectoryChooser。我通过以下代码调用它：

```
 DirectoryChooser chooser = new DirectoryChooser();
 chooser.setInitialDirectory(new File("~/Downloads/"));
 chooser.initialDirectoryProperty();
 chooser.setTitle("JavaFX Projects");

 Button browse = new Button("Browse");
 browse.addEventHandler(MouseEvent.MOUSE_CLICKED,
            new EventHandler<MouseEvent>() {
                @Override
                public void handle(MouseEvent e) {
                     File  file=chooser.showDialog(MyStage);

                    if (file != null) {

                     downloadPath.setText(file.getPath());

                    }

                }
            }); 
```

在 Mac OS X DirectoryChooser 上打开，但它没有设置自定义标题并且应用程序没有被它阻止，我仍然可以使用它并打开其他 DirectoryChooser 对话框。

在 Windows 系统上，相同的代码可以完美运行，无论是标题设置还是应用程序阻止。

谢谢你的帮助 ：-）

# apache - Apache Rewrite Rule 使用代理反向删除参数

> ID：14234681
> 
> 赞同：1
> 
> 时间：2013-01-09T11:56:36.953
> 
> 标签：apache, rewrite

在重写规则并寻求帮助时，我有点绿色。我有做事情的要求：

1.  使用apache做反向代理
2.  在参数黑客攻击的情况下，从 url 中删除一些参数。

我有一个网址，例如：

`http://server.com/search?param1=xxxx&param2=yyyy&param3===zzzz`

或者

`http://server.com/search?param2=xxxx&param1=yyyy&param3===zzzz`

你明白了，参数可以按任何顺序排列。

我希望我的端点服务器只获得 param2=CONST。所以我剥离了 param2 并添加了我自己的。

为了使事情进一步复杂化，这不能是`.htaccess`但是`httpd.conf`（重写规则的细微差别）。

这是我目前拥有的（不正确匹配）。

```
Options +FollowSymLinks
ProxyPreserveHost On
RewriteEngine On
RewriteCond %{QUERY_STRING} ^(.+&)?param2=(.*)&(.*)?$ [NC]
RewriteRule ^/search$ http://%{HTTP_HOST}/search?%1%2&%3&param2=XXXXXX [R=301,L]

ProxyPass /search http://localhost:8080/search
ProxyPassReverse /search http://localhost:8080/search 
```

* * *

更新

* * *

我得到它与以下工作：

```
RewriteCond %{QUERY_STRING} !site=MY_CONST
RewriteCond %{QUERY_STRING} (.*)(^site=[a-zA-Z0-9]+&?|^&site=[a-zA-Z0-9]+&|&site=[a-zA-Z0-9]+)(&?.*) [NC]
RewriteRule ^/search$ http://%{HTTP_HOST}/search?%1%3&site=MY_CONST [L,R=301,NS] 
```

第一个条件使您摆脱了将规则重写到同一资源的无限递归（因此可以代理它）。

希望能帮助到你。

# xslt - XSLT-XPath：用于重新分组元素的每个路径规范

> ID：14234682
> 
> 赞同：1
> 
> 时间：2013-01-09T11:56:41.100
> 
> 标签：xslt, xpath, foreach

我有想要转移到另一个结构中的 XML 文档。文档示例如下所示：

```
<application>
    <contactPerson>
        <name>Dominik</name>
        <countryCode>DE</countryCode>
    </contactPerson>
    <contactPerson>
        <name>Dorothea</name>
        <countryCode>DE</countryCode>
    </contactPerson>
    <contactPerson>
        <name>Fiona</name>
        <countryCode>FR</countryCode>
    </contactPerson>
    <contactPerson>
        <name>Fabian</name>
        <countryCode>FR</countryCode>
    </contactPerson>
    <contactPerson>
        <name>Florian</name>
        <countryCode>FR</countryCode>
    </contactPerson>
    <contactPerson>
        <name>Gabi</name>
        <countryCode>GB</countryCode>
    </contactPerson>
    <contactPerson>
        <name>Gert</name>
        <countryCode>GB</countryCode>
    </contactPerson>
</application> 
```

现在我要做的是按国家/地区对元素进行分组，这意味着结果应该如下所示：

```
<application>
    <memberState>
        <countryCode>De</countryCode>
        <contactPerson>
            <name>Dominik</name>
        </contactPerson>
        <contactPerson>
            <name>Dorothea</name>
        </contactPerson>
    </memberState>
    <memberState>
        <countryCode>FR</countryCode>
        <contactPerson>
            <name>Fiona</name>
        </contactPerson>
        <contactPerson>
            <name>Fabian</name>
        </contactPerson>
        <contactPerson>
            <name>Florian<name>
        </contactPerson>
    </memberState>
    <memberState>
        <countryCode>GB</countryCode>
        <contactPerson>
            <name>Gabi</name>
        </contactPerson>
        <contactPerson>
            <name>Gert</name>
        </contactPerson>
    </memberState>
</application> 
```

我正在使用 XPath for-each 模式来选择所有国家，但它并没有做它应该做的事情。我的模式如下所示：

```
 <xsl:template match="/">
    <application>
      <xsl:for-each select="/application/contactPerson/countryCode[not(.=preceding-sibling::*/application/contactPerson/countryCode)]">
        <memberState>
          <countryCode>
            <xsl:value-of select="."/>
          </countryCode>
          <contactPerson>
            <name>
              <xsl:value-of select="../name"/>
            </name>
          </contactPerson>
        </memberState>
      </xsl:for-each>
    </application>
  </xsl:template> 
```

错误可能出现在无法编译的 XPath 表达式中。我将其更改为以下

```
<xsl:for-each select="/application/contactPerson/countryCode[not(.=preceding-sibling::*)]"> 
```

因为我认为我已经在我的树的正确位置。该解决方案可以编译，但它并没有按照我的意图通过使用“preceding-sibling”给我一个唯一的国家列表，而是完整的列表。

除了我需要解决我的问题之外，我会特别感谢一些帮助以了解这里实际发生的事情。

1.  是否可以像我的第二个解决方案一样提供相对路径，还是每次都必须提供完整路径？
2.  我是否在制作唯一的国家代码列表的正确轨道上，或者通常会以不同的方式实施？
3.  我正在寻找的解决方案是否可以通过 XSLT 实现？

我非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:15:05.643

您可以使用`key`标签通过 countryCode 访问每个元素，如下所示：

```
<xsl:key name="groups" match="/application/contactPerson" use="countryCode" /> 
```

然后您可以迭代该键的内容。请参阅[遍历/循环通过 XSL 键：如何？](https://stackoverflow.com/questions/2757871/walk-loop-through-an-xsl-key-how)

因此，如果您坚持使用 XSLT 1.0，那将是一个很好的起点。如果您可以使用 XSLT 2.0，您应该看看`group-by`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T12:37:59.167

这是使用[Muenchian 分组](http://www.jenitennison.com/xslt/grouping/muenchian.xml)的 XSLT 1.0 解决方案：

```
<xsl:stylesheet version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output indent="yes"/>

<xsl:key name="country" match="contactPerson" use="countryCode"/>

<xsl:template match="application">
  <xsl:copy>
    <xsl:apply-templates select="contactPerson[generate-id() = generate-id(key('country', countryCode)[1])]" mode="group"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="contactPerson" mode="group">
  <memberState>
    <xsl:copy-of select="countryCode"/>
    <xsl:apply-templates select="key('country', countryCode)"/>
  </memberState>
</xsl:template>

<xsl:template match="contactPerson">
  <xsl:copy>
    <xsl:copy-of select="*[not(self::countryCode)]"/>
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T12:50:24.963

您的 XPath 表达式几乎是正确的：

```
<xsl:for-each 
    select="/application/contactPerson/countryCode[not(.=preceding-sibling::*)]"> 
```

它不起作用的原因是 countryCode 没有任何兄弟姐妹。要查找以前的国家代码，您需要上移一级然后再下移：

```
<xsl:for-each 
    select="/application/contactPerson/countryCode[not(. = ../preceding-sibling::*/countryCode)]"> 
```

我相信应该成功地遍历不同的国家代码。

对模板的这种修改应该可以工作。您需要另一个循环来遍历每个国家/地区的所有人：

```
<xsl:template match="/">
    <application>
      <xsl:for-each select="/application/contactPerson/countryCode[not(.=../preceding-sibling::*/countryCode)]">
        <memberState>
          <countryCode>
            <xsl:value-of select="."/>
          </countryCode>
          <xsl:for-each select="/application/contactPerson[countryCode = current()]">
          <contactPerson>
            <name>
              <xsl:value-of select="name"/>
            </name>
          </contactPerson>
          </xsl:for-each>
        </memberState>
      </xsl:for-each>
    </application>
  </xsl:template> 
```

# python - 从 bash 脚本中加载 python 模块

> ID：14234683
> 
> 赞同：0
> 
> 时间：2013-01-09T11:56:40.280
> 
> 标签：python, linux, bash

我目前正在尝试从 bash 脚本中加载“加密”。

我将在下面提到的片段是安装一些数据包和初始化一些东西的背后。

```
su user1 -c 'python -c "import Crypto"' 
```

我已经尝试了一些不同的组合与 " 和 ' + 转义，但它不会工作。如果我将确切的行放入 bash 控制台，它可以完美地工作。

我必须自动执行此操作，因为它将在自动安装脚本中使用。

# linux - 如何使用 Node.js 完全重定向标准输入和标准输出？

> ID：14234688
> 
> 赞同：0
> 
> 时间：2013-01-09T11:56:58.373
> 
> 标签：linux, node.js, stdout, stdin

一个糟糕的标题...我在创建命令行界面时遇到了问题。
起初我尝试了一段针对初学者的 Haskell 代码：

```
main = do
  c <- getLine
  print c
  main 
```

我试图通过查看`h.hs`文件来重新加载它，并在`runhaskell h.hs`每次保存代码时运行。我们可以忽略如何在这里重新加载它，因为这不是那么麻烦。

这是我在 CoffeeScript 中的代码来尝试：

```
runner = spwan 'runhaskell', ['h.hs']
process.stdin.pipe runner.stdin
runner.stdout.pipe process.stdout
runner.stderr.pipe process.stderr 
```

但它不像表达的那样工作，每次我按回车时都不会出现输出，而是在`runner`被杀死后打印出来。代码中有什么问题？

我的环境是 Archlinux。

# ruby-on-rails-3 - Rails 获取 curl (JSON) 请求的响应时间

> ID：14234690
> 
> 赞同：1
> 
> 时间：2013-01-09T11:57:01.943
> 
> 标签：ruby-on-rails-3, curl, response-time

在我的应用程序中，我是否像这样向外部服务器发出多个请求：

```
 req = Curl::Easy.new do |curl| 
        curl.url = "https://www.mysite.com"
        curl.headers['Content-type'] = 'application/json'
    end
    req.perform 
```

是否可以检索响应时间（请求需要多长时间）？

我认为有效的解决方案如下（伪代码），但有更优雅的东西吗？

```
 req = Curl::Easy.new do |curl| 
        curl.url = "https://www.mysite.com"
        curl.headers['Content-type'] = 'application/json'
    end

    timeBefore = Time.now
    req.perform
    timeAfter = Time.now
    responseTime = timeAfter - timeBefore 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T13:00:44.057

您可以按如下方式使用 Ruby 的 Benchmark 模块：

```
time = Benchmark.realtime do
      req.perform
end
puts "Time elapsed #{time*1000} milliseconds" 
```

# c# - 无法在后台任务中捕获异常

> ID：14234692
> 
> 赞同：1
> 
> 时间：2013-01-09T11:57:03.210
> 
> 标签：c#, exception, windows-8, background, task

我的问题是，如果我调试我的后台任务`Windows 8 Store App`并获得一个`Error`（同时异步方法调用）。***它不会跳到我的 catch 语句***中。调试器跳转到`deferral.Complete()`后台任务代码末尾的方法（`Run`方法中`IBackgroundTask`）。

这是我的代码：

```
public sealed class TileUpdater: IBackgroundTask {
    public void Run(IBackgroundTaskInstance taskInstance) {
        var defferal=taskInstance.GetDeferral();
        InstantSchedule();
        defferal.Complete(); // <- Debugger jumps over here after error
    }

    public static async void InstantSchedule() {
        try {
            [...]

            // Error occurs here
            IEnumerable<LogsEntity> logentities=
                account.IsAvailable
                    ?await TableStorage.FetchLogsAsync(account.Accountname, account.AccountKey, TileUpdater.RetrieveFilter())
                    :null;

            [...]
        }
        catch(Exception) {
            // Debugger doesn't break here 
        }
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-21T09:37:09.737

您的`InstantSchedule`方法是`async void`并且将控制权返回给`Run`刚刚调用`FetchLogsAsync`. 结果，它跳转到 catch 语句，但在`Run`方法完成之后。

您应该在其上制作`InstantSchedule`方法：`Task``await`

```
public async void Run(IBackgroundTaskInstance taskInstance) {
    var defferal=taskInstance.GetDeferral();
    await InstantSchedule();
    defferal.Complete();
}

public static async Task InstantSchedule() {
        [...]
} 
```

请注意，该`Run`方法也应该是`async`.

# javascript - 附加的 html 在 Javascript 中不能全局选择？

> ID：14234694
> 
> 赞同：0
> 
> 时间：2013-01-09T11:57:10.293
> 
> 标签：javascript, jquery, append, global

我正在努力思考什么时候应该使用什么技术。我猜他们只是称之为“学习曲线”。

为什么 click 函数在这样写时起作用：

```
$(document).ready(function () {

    var Item = {
        list: function() {
            $.getJSON("output.php", function(data) {
                $.each(data, function(key, val) {

                    $("ul#list").append(
                        '<li id="id' + val.id + '" class="itemContainer item' + val.category + '">' +
                        '<div class="item">' +
                            '<button name="plus" type="button" value="0" class="itemPlus">+</button>' +
                            '<button name="minus" type="button" value="0" class="itemMinus">-</button>' +
                        '</div>' +
                        '</li>'
                    );
                });

                $("button").on("click", function() {
                    alert($(this).attr("name"));
                });
            });

        }
    }

    Item.list();

}); 
```

并且不能以这种方式工作：（注意我将 $("button").on... 移到了对象之外）

```
$(document).ready(function () {

    var Item = {
        list: function() {
            $.getJSON("output.php", function(data) {
                $.each(data, function(key, val) {

                    // HTML for Items. jQuery UI Templates?
                    // Select where list starts
                    $("ul#list").append(
                        '<li id="id' + val.id + '" class="itemContainer item' + val.category + '">' +
                        '<div class="item">' +
                            '<div class="catLabel"><div class="catColor catColor' + val.category + '"></div></div>' +
                            '<h2 class="itemTitle">' + val.title + '</h2>' +
                            '<img class="itemPic" src="img/noPic.gif" alt="No Picture Yet">' +
                            '<p class="itemDesc">' + val.desc + '</p>' +
                            '<hr/>' +
                            '<p class="itemDayPrice"><span class="itemDays">1</span> <a href="#">Day</a> Rental <sup>$</sup><span class="itemPrice">' + val.price + '</span></p>' +
                            '<button name="plus" type="button" value="0" class="itemPlus">+</button>' +
                            '<button name="minus" type="button" value="0" class="itemMinus">-</button>' +
                        '</div>' +
                        '</li>'
                    );
                });

            });

        }
    }

    Item.list();

    $("button").on("click", function() {
        alert($(this).attr("name"));
    });

}); 
```

我不知道它是需要在里面的 jQuery 选择器，还是 click 函数本身。任何帮助理解这一点将不胜感激。有没有更好的方法我应该编写这样的代码？

任何关于 js 代码编写风格的建议也将不胜感激，因为我觉得我的感觉很糟糕。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T11:59:21.093

```
$(document).on("click", "button", function() {
    alert($(this).attr("name"));
}); 
```

您已动态添加元素。他们应该被委派。所以，使用上面的东西来使它工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:03:28.177

像这样试试。这是一个需要委托的注入内容。

```
$("ul#list").on("click", "button", function() {
     alert($(this).attr("name"));
}); 
```

# django - Django-countries：如何翻译？

> ID：14234704
> 
> 赞同：2
> 
> 时间：2013-01-09T11:57:53.940
> 
> 标签：django, django-countries

我今天安装了[django 国家](http://pypi.python.org/pypi/django-countries)。它工作得非常整洁。

不幸的是，文档有点薄，它说：

> COUNTRIES 由两部分元组组成的元组，每个元组都包含一个国家代码和相应的标题良好（且可翻译）的国家名称。

我是否只是沿着 django 国际化的通常路径走下去，它会自动选择它并允许我在我的 PO 文件中定义国家/地区？还是需要额外的魔法？

我实现它的方式是这样的：

```
from django_countries.countries import COUNTRIES
from django_countries.fields import CountryField

country             = CountryField(_(u'Country'), choices=COUNTRIES,  blank=True) 
```

`COUNTRIES`直接来自扩展名，因此我无权放置`_(u)`每个国家/地区名称。( `from django.utils.translation import ugettext_lazy as _`)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-08-03T13:40:20.117

对于像我这样的 django 新手：在您网站的 settings.py 中将 'django_countries' 添加到 INSTALLED_APPS 就可以了。[所以 Aamir 的回答是正确的 - 只需查看文档](https://docs.djangoproject.com/en/dev/topics/i18n/translation/)中的“Django 如何发现翻译”部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:37:02.050

只需按照 django 翻译[文档](https://docs.djangoproject.com/en/dev/topics/i18n/translation/)进行操作，它就会自动将`ugettext_lazy`标记的字符串添加到您的`.po`文件中。然后根据您选择的语言提供消息字符串。

# ruby-on-rails - Rails 3.2 和设计：自定义身份验证用户！对用户和管理员进行身份验证

> ID：14234706
> 
> 赞同：2
> 
> 时间：2013-01-09T11:57:56.890
> 
> 标签：ruby-on-rails, devise, ruby-on-rails-3.2, rails-admin

我正在为用户和管理员使用具有两个独立模型的设计。我想替换authenticate_user！用我自己的功能，auth_user！这样管理员的权限是用户权限的超集。我还写了一个函数，actions_permitted，它可以更容易地调用skip_before_filter。我在 ApplicationController.rb 中添加的代码如下。例如，我在控制器中使用它：actions_permitted :public => [:show], user: [:new, :create]。

但是，代码未按预期运行：某些操作未正确验证，而其他操作则需要管理员也以用户身份登录，而管理员应始终具有用户权限。经过一番谷歌搜索，我怀疑问题可能是当继承模型调用 actions_permitted 时，它发生在 ApplicationController 级别而不是特定模型中。我还发现 Stackoverflow 上的许多人都推荐 CanCan，尽管如果你能帮助我让它工作，我更愿意坚持使用 actions_permitted 的简单语法！

```
# app/controllers/application_controller.rb
#
# call with :user and :public defined as either :all or an array
# of symbols that represent methods. Admins can do everything that users
# can (by definition of auth_user!).
def self.actions_permitted(hash)
  # first process exceptions to user authentication
  if hash[:public] == :all
    # skip all filters and return
    skip_before_filter :auth_user!
    skip_before_filter :authenticate_admin!
    return
  elsif hash[:public].kind_of?(Array)
    # skip user authentication for methods in :public array
    skip_before_filter :auth_user!, only: hash[:public]
  end

  # then process exceptions to admin authentication
  if hash[:user] == :all
    # users can do everything, so skip all admin authenticatoin
    skip_before_filter :authenticate_admin!

  elsif hash[:user].kind_of?(Array)
    if hash[:public].kind_of?(Array)
      # Join the two arrays and skip admin authentication as not to filter
      # actions allowed by the public or by users
      skip_before_filter :authenticate_admin!, only: (hash[:user] | hash[:public])
    else
      # otherwise, simply skip admin authentication for actions allowed by users
      skip_before_filter :authenticate_admin!, only: hash[:user]
    end

  elsif hash[:public].kind_of?(Array)
    # skip admin authentication for actions allowed by the public
    skip_before_filter :authenticate_admin!, only: hash[:public]
  end

end

# checks if user OR admin is authenticated.
def auth_user!(opts = {})
  # return (authenticate_user! || authenticate_admin!)
  return (env['warden'].authenticated?(:user) ||
          env['warden'].authenticated?(:admin))
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T22:22:58.947

原来问题出在 auth_user! 中。对于将来想要使用此代码的任何人，以下是更正：

```
def auth_user!(opts = {})
  if admin_signed_in?
    authenticate_admin!
  else
    authenticate_user!
  end
end 
```

# javascript - __dopostback 在 ie 中很慢，在 ff 或 chrome 中没有问题

> ID：14234714
> 
> 赞同：1
> 
> 时间：2013-01-09T11:58:13.973
> 
> 标签：javascript, asp.net, internet-explorer

我正在使用 html 4 的 asp.net 应用程序中工作。我们有一个带有 __dopostback 的链接按钮，它应该在后端输出 button_click 事件。

在 Firefox 或 Chrome 中，这可以正常工作。它会立即进入事件，并且不会减慢我们的应用程序。

另一方面，IE 使用起来很痛苦。我们的应用程序变得非常缓慢。阅读此内容，因为页面需要 20 分钟才能加载，而不是即时加载。这将继续，直到我们完全关闭 IE 或设法重新加载我们单击带有 __dopostback 的链接的页面。

我想知道以前是否有人发生过这种情况，或者是否有解决方法。

我们在页面中有以下 javascript 代码：

```
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    } 
```

我调用这个函数的方式：

```
<a onclick="onclick stuff happens here" href="javascript:__doPostBack(&#39;jobhistory$DelegateCancelLinkButton&#39;,&#39;&#39;)">Annuleren</a> 
```

# c++ - 如何删除C++中new运算符占用的内存

> ID：14234718
> 
> 赞同：-2
> 
> 时间：2013-01-09T11:58:22.833
> 
> 标签：c++

> **可能重复：**
> [为什么使用“新”会导致内存泄漏？](https://stackoverflow.com/questions/8839943/why-does-the-use-of-new-cause-memory-leaks)

我是 C++ 内存分析的新手。Valgrind 报告了这一行的泄漏

```
m_propertyManager(new coral::PropertyManager); 
```

所以我把它修改为

```
coral::PropertyManager Mgr;
m_propertyManager(&Mgr); 
```

我猜`&Mgr`它会自动删除，但 valgrind 再次报告泄漏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:09:54.907

`new coral::PropertyManager`在堆上分配一个新的 PropertyManager，但因为它是一个临时变量，您永远不会释放它。这是标准的 Java 习惯用法，因为 Java 是一种垃圾收集语言，GC 将负责为您释放这个悬空引用。

如果您出于某种原因想在`new`此处使用，正确的方法如下：

```
auto *pm = new coral::PropertyManager; // auto is C++11 syntax
m_propertyManager(pm);
delete pm; // when you're done using it 
```

您的第二个选项是正确的，因为它`Mgr`在堆栈上分配为自动变量，该变量将在函数退出时释放。`m_propertyManager(&Mgr);`将 Mgr 的*地址*传递给函数，这将允许它修改 Mgr 对象（尽管通过将 Mgr 作为引用传递可能会更好）。

请注意，如果 m_propertyManager 是一个在当前范围退出后仍然存在的对象，并且如果它在某处存储对 Mgr 的引用，那么当您退出当前范围并且 Mgr 对象被销毁时，您会发现 m_propertyManager 持有对无效内存的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:10:47.963

如果您使用 分配内存`new`，则必须使用`delete`. 如果`m_propertyManager`不应该管理 的生命周期`PropertyManager`，它只会丢弃指针，留下分配的内存并且无法访问。

另一方面，您的第二个解决方案将崩溃​​。看：

```
{
    coral::PropertyManager Mgr;
    m_propertyManager->SetManager(&Mgr); // You pass pointer to Mgr here
}
// Here Mgr no longer exists, so m_propertyManager
// now contains the pointer to non-existing object 
```

您应该：

*   动态创建`PropertyManager`（使用`new`），在某处持有指向它的指针，并在某个时候使用显式释放它`delete`；
*   实现 move ctor in`PropertyManager`并按值传递（这样`m_propertyManager`将隐式自动分配自己的实例`PropertyManager`）
*   使用静态分配（如您的第二个示例中所示），但将实例保留在该位置，它将*至少*与`m_propertyManager`.
*   在 m_propertyManager 中使用某种自动指针（如 std::shared_ptr 或 std::unique_ptr）

# greendao - 为什么道大师没有非抽象的 OpenHelper 类？

> ID：14234723
> 
> 赞同：0
> 
> 时间：2013-01-09T11:58:43.337
> 
> 标签：greendao

为什么greendao的生成代码没有提供来自DaoMaster的非抽象OpenHelper类？它只提供 DevOpenHelper，我假设它仅用于开发模式。

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:40:17.223

因为 greenDAO 还没有处理模式迁移。DevOpenHelper 只是删除所有表并在模式版本增加时重新创建它们。对于非关键数据，这可能没问题。

# c# - 从不显示垂直滚动条

> ID：14234725
> 
> 赞同：0
> 
> 时间：2013-01-09T11:58:44.930
> 
> 标签：c#, wpf, xaml

我对从不显示的垂直滚动条有问题。这是我的代码：

```
<ScrollViewer 
        BorderThickness="1" HorizontalScrollBarVisibility="Disabled"
        VerticalScrollBarVisibility="Visible" Padding="20">
        <Grid>

            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" MinHeight="100" />
            </Grid.RowDefinitions>

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" MinWidth="360" />
            </Grid.ColumnDefinitions>

            <!-- Search View -->
            <ContentControl x:Name="SearchPane" Grid.Row="0" Margin="0,0,0,20" />

            <!-- Detail View -->
            <ContentControl x:Name="ActiveItem" Grid.Row="1" Margin="0" />

        </Grid>
    </ScrollViewer> 
```

有什么想法吗？

# perl - 在需要其他脚本时将标准输出重定向到变量

> ID：14234733
> 
> 赞同：0
> 
> 时间：2013-01-09T11:59:05.690
> 
> 标签：perl, stdout

我正在尝试将 STDOUT 重定向到一个变量，这似乎工作正常。但是，当我需要其他脚本时，它的预期输出不会存储在该变量中。

```
my $var;

#save STDOUT for future redirect
open OLDOUT, '>&STDOUT';
close STDOUT;

# redirect STDOUT to $var 
open STDOUT, '>', \$var or die "Can't open STDOUT: $!";

# run the script that I'm supposed to catch its output
do("macro.pl");
close STDOUT;

# redirect STDOUT to its original FH
open STDOUT, '>&OLDOUT' or die "Can't restore stdout: $!";
close OLDOUT or die "Can't close OLDOUT: $!";

# print the expected result from macro.pl
print "$var"; 
```

最后一行不打印任何内容，这不是预期的结果（单独运行 macro.pl 会产生非空输出）。

也用 require 尝试过 - 结果相同。值得一提的是，macro.pl 不会以任何方式更改标准文件描述符。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T12:03:58.703

您需要[`select`](http://perldoc.perl.org/functions/select.html)文件句柄才能使其成为默认文件句柄（又名`STDOUT`）。像这样试试。

```
my $printBuffer; # Your output will go in here
open(my $buffer, '>', \$printBuffer);
my $stdout = select($buffer); # $stdout is the original STDOUT

do 'macro.pl';

select($stdout); # go back to the original
close($buffer);

print $printBuffer; 
```

# asp.net-mvc - 在 ASP.NET MVC 中将实体映射到模型并执行业务逻辑

> ID：14234734
> 
> 赞同：11
> 
> 时间：2013-01-09T11:59:08.980
> 
> 标签：asp.net-mvc, architecture, n-tier-architecture

将数据库实体映射到模型和执行业务逻辑的最佳实践是什么？我已经看到了两者的相当不同的实现。我注意到许多实现，其中存储库（在数据层中）本身负责将数据库实体映射到域模型。例如，可以执行此操作的存储库：

```
public IQueryable<Person> GetPersons()
{
      return DbSet.Select(s => new Person
                    {
                        Id = s.Id,
                        FirstName= s.FirstName,
                        Surname= s.Surname,
                        Location = s.Location,
                    });
} 
```

但是在对 SO on N Tier 设计进行全面搜索后，我注意到虽然没有灵丹妙药，但在大多数情况下，建议手动或使用 Mapper 在 MVC 项目中的控制器内部执行映射。还重申了服务层永远不应该执行映射，它的职责应该是执行业务逻辑。这里有几个问题：

1.  关于将实体映射到模型的位置以及反之亦然，哪种方法是可取的？存储库应该这样做还是应该在控制器中完成映射？
2.  假设我想对我从数据库中检索到的实体执行一些业务逻辑，例如返回实体的全名`Person`，或者将所有s的年龄增加`Person`10年，这个操作应该在哪里执行。在模型本身？例如，我会`FullName`在模型上有一个属性来计算全名和年龄吗？或者我是否在我的服务层中定义了一些服务来执行业务逻辑？

**编辑**

哇这么多接近的票。抱歉，我搜索的不够全面。我在这里提出的“在哪里执行业务逻辑”问题已经可以在 SO 和其他地方找到（尽管有时传达得有些神秘）：

[Stephen Walther 使用服务层进行验证](http://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/validating-with-a-service-layer-cs)

[瘦控制器](http://www.arrangeactassert.com/asp-net-mvc-controller-best-practices-%E2%80%93-skinny-controllers/)

[SO上的另一个很棒但更通用的答案](https://stackoverflow.com/a/3720255/189756)

[我应该在哪里把我的控制器业务逻辑放在 MVC 中](https://stackoverflow.com/questions/6341724/where-should-i-put-my-controller-business-logic-in-mvc3)

[服务是否将实体映射到视图模型](https://stackoverflow.com/questions/11538592/controller-service-repository-does-service-map-entity-to-viewmodel)

但是，我还没有找到解决映射问题的标准解决方案，我想我或许可以更雄辩地表达我的问题。所以普遍的共识似乎是业务逻辑进入服务层，将领域模型映射到视图模型应该发生在控制器/表示层。并且由于建议不要将您的数据库实体显示到数据层以外的任何层，因此建议您手动或通过诸如 Auto Mapper 之类的映射器将您的实体映射到数据层的域模型（这是我从阅读许多文章）。我的困惑源于应该将实体映射到域模型以及将域模型映射到视图模型的问题。然而，正如我之前提到的那样，我本可以更清楚地表达我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T15:40:50.387

> 1.  关于将实体映射到模型的位置以及反之亦然，哪种方法是可取的？存储库应该这样做还是应该在控制器中完成映射？

我强烈希望看到映射发生在存储库而不是控制器中。正如 Suhas 在他的回答中提到的那样，控制器需要纯粹充当协调员。作为替代方案，也许您可​​以利用存储库中的映射类来传递实体并返回映射模型 - 有点像[Auto Mapper](https://github.com/AutoMapper/AutoMapper)

> 2.  假设我想对从数据库中检索到的实体执行一些业务逻辑，例如，返回 Person 实体的全名，或者将所有 Person 的年龄增加 10 年，应该在哪里执行此操作。在模型本身？例如，我会在模型上有一个 FullName 属性来计算全名和年龄吗？或者我是否在我的服务层中定义了一些服务来执行业务逻辑？

如果可能，请在服务上执行业务逻辑。为什么要让应用程序承担服务层应该做的事情？我相信这是服务的域，而不是应用程序的域。另外，我也不认为从模型返回连接或派生的属性是一件坏事。

概括：

*   控制器处理来自视图的请求并将它们转发到存储库
*   存储库是您的数据存储的管道
*   服务处理来自存储库的请求，处理业务逻辑，并返回映射模型

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T13:12:52.573

我通常在 MVC 项目中创建一个小型服务层来处理 MVC 层需要完成的额外工作。因此，在您的示例中，您可以使用 a`PersonService`或 a`PersonHandler`调用业务层以获取所有人员实体，然后将所有人的年龄增加 10 年（假设这不是您的业务逻辑，而只是 UI 需要的东西），连接名字和姓氏以构建全名等。控制器然后只是调用此服务并且永远不知道幕后发生了什么。这样你的控制器就在做它应该做的事情——在视图和模型之间进行协调。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T16:03:49.750

这取决于...就像你说的没有灵丹妙药。只能列出每种方法的优缺点，但仍然是您比这里的任何人都更了解您的需求。如果你有时间，我建议阅读这本书[企业应用架构模式](https://rads.stackoverflow.com/amzn/click/com/0321127420)。这将使您对不同的业务逻辑和数据源架构模式、何时以及如何使用它们有一个很好的理解。什么应该去业务层，什么应该去 DAL。本书还解决了如何从 DAL 映射到域实体的问题。从长远来看，您甚至可能改变主意并选择完全不同的方法。

还可以考虑使用一些 ORM，它为您提供代码优先机制，如 EF Code First 或 NHibernate。在这种情况下，所有映射逻辑对您来说都是透明的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T22:11:42.733

数据访问层（存储库）应该只处理插入/更新/检索您的数据实体。您的服务层处理业务逻辑并负责表示层（控制器、视图模型）和数据层之间的通信。这意味着您从数据实体到域的转换应该发生在这一层。您的表示层（控制器）应该处理您的视图模型和域模型之间的转换。-如果你想有更好的理解，你应该接受 Maksym 的建议和拾取企业应用程序架构模式，因为我认为（和许多其他人）认为 Fowler 是 Web 应用程序开发的权威。另一本好书是 ASP.NET Design Patterns，它基于 Fowler 的书，但只关注 ASP.NET 框架。

# c# - c#中的“using”关键字，在java中如何使用？

> ID：14234739
> 
> 赞同：0
> 
> 时间：2013-01-09T11:59:27.643
> 
> 标签：c#, java, android, package

> **可能重复：**
> [java中的“using”关键字](https://stackoverflow.com/questions/2943542/using-keyword-in-java)

我有一个问题，在`c#`“使用”是关键字，但如何使用`java`

```
using (layout xmds = new layout()){
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:02:03.337

在 Java 7 中，所有实现[AutoCloseable](http://docs.oracle.com/javase/7/docs/api/java/lang/AutoCloseable.html)的类都可以与“ [try-with-resources](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html) ”结构一起使用：

```
class Layout implements AutoCloseable { ... }

// Usage
try (Layout layout = new Layout()) {
    // do stuff here
} 
```

**编辑：**注意到你用“android”标记了这个问题。Android 不支持 Java 7，因此您将无法在那里使用 try-with-resources。

# c++ - 将行添加到数组

> ID：14234741
> 
> 赞同：0
> 
> 时间：2013-01-09T11:59:33.527
> 
> 标签：c++

我需要向数组添加值，例如：

```
int anArray[4][5]
     ={{ 1, 2, 3, 4, 5, }, // row 0
     { 6, 7, 8, 9, 10, }, // row 1
     { 11, 12, 13, 14, 150 } // row 2
     };

anArray+= (15,17,71,93,18);//mistake 
```

如何解决它并且可以使用像 c# 这样的 ++ 运算符：

```
++anArray[15,17,71,93,18]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:20:13.257

您的数组不是对象，而是内存中包含`int`. 您不能像[std::vector](http://www.cplusplus.com/reference/vector/vector/)那样动态地增长它。考虑使用 std::vector，预先分配足够的内存，然后使用[memcopy](http://www.cplusplus.com/reference/cstring/memcpy/)复制新值，或者在已知新大小时动态分配和释放（使用`new`and ）新缓冲区。`delete`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:06:57.287

C++ 不支持将行添加到静态数组中。如果您需要动态增长的数组，vector 是您的工作人员。如果您不想使用向量，请使用所需的行数初始化数组并重新编译您的程序。

# ios - 删除行时 UITableView 没有可见的@interface

> ID：14234742
> 
> 赞同：-1
> 
> 时间：2013-01-09T11:59:36.000
> 
> 标签：ios, uitableview, ios5, delete-row

我知道以前在 SO 上已经问过这类问题，我几乎尝试了所有这些问题，但无济于事。我正在尝试从 UITableView 中删除一行。这是我的代码。

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        //calls to a method that deletes the row from the backend SQLite database
        [self deleteCompany:indexPath.row];

        //theCompanies is a NSMutableArray. When the app starts, it retrieves the data and display it in the UITableView
        [theCompanies removeObjectAtIndex:indexPath.row];

        //Below line is where the error occurs. 
        [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                         withRowAnimation:YES
              UITableViewRowAnimationFade:UITableViewRowAnimationFade];
    }   
    else if (editingStyle == UITableViewCellEditingStyleInsert) {

    }   
} 
```

构建应用程序时出现以下编译器错误。

*'UITableView' 没有可见的@interface 声明选择器...*

我不知道接下来我应该做什么。任何帮助，将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:08:44.193

更改此行：

```
[self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                         withRowAnimation:YES
              UITableViewRowAnimationFade:UITableViewRowAnimationFade]; 
```

至

```
[self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                         withRowAnimation:UITableViewRowAnimationFade]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T12:06:42.367

方法是这样的

```
- (void)deleteRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation 
```

有两个参数，请参见此处[Apple UITableView 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/deleteRowsAtIndexPaths%3awithRowAnimation%3a)

但是您使用 like is is is 和 withRowAnimation 作为 BOOL 但它不是 BOOL。

尝试这样的事情：

```
[tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade]; 
```

# c - ISAPI 扩展 dll 依赖路径

> ID：14234749
> 
> 赞同：0
> 
> 时间：2013-01-09T12:00:04.593
> 
> 标签：c, windows, iis, isapi

我正在编写一个 ISAPI 扩展。主 DLL 依赖于其他几个 DLL。我把它们都放在同一个路径上，它可以工作。问题是：为什么？

AFAIK Windows 应该在 .exe 文件夹（对于 w3wp.exe 类似于 C:\Windows\SysWOW64\inetsrv）和当前路径（相同）中查找库，但绝对不在 ISAPI 扩展的目录中DLL 本身放置。所以让我感到困扰的是，我不明白为什么某些东西几乎可以工作，就好像它不起作用:) IIS 是做什么的？修改 PATH，调用 SetDllDirectory() 还是其他？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:32:25.437

这可能取决于 IIS 如何调用 LoadLibrary(Ex) 来加载您的 ISAPI DLL。

他们很可能正在使用 LOAD_LIBRARY_SEARCH_DLL_LOAD_DIR 标志或类似标志调用[LoadLibraryEx 。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684179%28v=vs.85%29.aspx)

# security - 我应该加密非身份验证 cookie（即那些仅增强用户体验的 cookie）吗？

> ID：14234751
> 
> 赞同：1
> 
> 时间：2013-01-09T12:00:12.527
> 
> 标签：security, cookies, encryption

我正在我的网站上使用 cookie。有些是用户身份验证 cookie（我知道加密很重要），而另一些只是存储用户特定的数据，例如他们的显示首选项。我的问题是：这些 cookie 的存在是为了增强用户体验，而重复访问服务器来解密这些 cookie 显然会使用户体验变慢。我有什么理由要加密这些 cookie 吗？如果我忽略了这样做，用户在读取仅发生在客户端的 cookie 时会有更流畅的体验。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:12:32.310

你用不好的例子提出了一个有效的问题。非关键 cookie 不需要加密。

**但是** 对于非关键 cookie，我会考虑语言选择、​​页面主题、最喜欢的搜索等。它们不需要加密，因为它们传输的信息不是机密的。但它仍然意味着应该检查这些值，即。不直接包含在页面内容中，不被隐式信任，因为用户可以更改其值。

至于用户篮子（我认为这很关键）......您应该将数据保存在会话中并向用户发出会话cookie......就是这样。或者，如果您使用 cookie，对其进行加密并检查其内容，然后再对从该 cookie 或任何 cookie 接收的数据做出任何决定或操作。

您必须记住，加密 cookie 并不一定意味着无法更改值，而是意味着无法读取它，因此您应该始终加密一些上下文信息，即。用户名、时间、ID 等，并在解密后验证它们。

# ant - 如何限制在现有数据库上调用 flyway init

> ID：14234757
> 
> 赞同：0
> 
> 时间：2013-01-09T12:00:24.317
> 
> 标签：ant, flyway

我正在使用一个 ant 脚本，它将在一个空的和现有的数据库上使用。我的 Ant 在空模式上执行得非常好。但是当我再次执行它时，它会抛出“架构已初始化”异常。

请让我知道如何在 ant 脚本中控制模式初始化。任何示例都会有所帮助

问候， 卡维莎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:45:27.273

无需初始化空模式。

Init 用于将您无法删除的现有数据库（例如：生产）标记为具有特定版本。然后，Flyway 只会从那里向前迁移。

# javascript - 使用浮点饼图时出错

> ID：14234759
> 
> 赞同：0
> 
> 时间：2013-01-09T12:00:28.220
> 
> 标签：javascript, jquery, flot, pie-chart

我正在尝试使用 flot 饼图 API 在从服务器接收到的数据上生成饼图。我已经查看了[此处](http://people.iola.dk/olau/flot/examples/pie.html)和其他地方给出的示例。我尝试使用相同的代码，但由于某种原因它没有正确显示。这是当前输出 ![在此处输入图像描述](../Images/e3883060c50a10cbe5c4e000502d2296.png)

以及用于生成图表的代码：

```
$.plot($("#placeholder"), poll_data, {
series: {
    pie: {
    show: true
    }
},
legend: {
    show: false
}
});
<div id="placeholder" style="width: 250px; height: 250px;"></div> 
```

知道为什么这不起作用吗？令人惊讶的是，当我将传奇节目更改为真时，它会起作用；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:29:13.753

我相信这已在[master 分支](https://github.com/flot/flot)( [zip](https://github.com/flot/flot/zipball/master) ) 中得到修复，该分支目前的版本为 0.8-alpha；尝试使用它。

# java - 在哪里使用同步块捕获 Object.wait() 的 InterruptedException？

> ID：14234764
> 
> 赞同：6
> 
> 时间：2013-01-09T12:00:37.247
> 
> 标签：java, multithreading, notify, interrupted-exception

据我了解，这是 Java 中多线程的非常常见的片段。

```
boolean loaded = false;
Object lock = new Object();

public void block() {
    synchronized (lock) {
        while(!loaded)
            lock.wait(); // Unhandled exception type InterruptedException
    }
} 
```

在另一个线程中

```
public void done () {
    synchronized (lock) {
        loaded = true;
        lock.notify();
    }
} 
```

**但我不确定我应该把 try and catch 放在哪里，我可以围绕整个同步块还是只`lock.wait()`？什么是经验法则，它真的很重要吗？**

`Thread.currentThread().interrupt()`在这种情况下可以打电话来处理吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T12:09:27.977

您可能需要考虑 Brian Goetz 的文章：[Java 理论与实践：处理 InterruptedException](https://titanwolf.org/Network/Articles/Article?AID=91d6db40-84a7-4872-9098-1a70662eb6af)

一般来说，如果你不知道该做什么，那么什么都不做，只让调用者代码知道这个方法可以在等待锁时被中断。您可以通过将**throws InterruptedException**添加到方法签名来做到这一点。

如果由于某种原因你被迫添加一个 try/catch 块并处理异常，那么**Thread.currentThread().interrupt()**会做，但**重新抛出它**可能是合适的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T12:54:05.220

> **但我不确定我应该把 try and catch 放在哪里，我可以包围整个同步块还是只包围 lock.wait()？什么是经验法则，它真的很重要吗？**

`lock.wait()``block`是唯一可以在您的方法中引发异常的行。因此，无论您是在等待中放置 try/catch 还是包含整个方法主体，从执行的角度来看都不会产生影响（当然，假设您在两种情况下都退出循环 - 如果您想继续循环，那么 try/catch 块显然应该在循环内）。

换句话说，这只是一个风格问题 - 请参阅[其他讨论](https://stackoverflow.com/questions/141560/should-try-catch-go-inside-or-outside-a-loop)。我个人认为这更具可读性：

```
try {
    synchronized (lock) {
        while (!loaded) {
            lock.wait(); // Unhandled exception type InterruptedException
        }
    }
} catch (InterruptedException e) {
    //to ignore me or not to ignore me, that is the question
    Thread.currentThread().interrupt();
} 
```

> **在这种情况下可以调用 Thread.currentThread().interrupt() 来处理吗？**

在下面的第一个示例中，捕获 InterruptedException 并退出循环而不重新中断线程是可以的，因为在任何情况下 run 方法都会退出并且线程会死掉：

```
new Thread(new Runnable() {

    @Override
    public void run() {
        block();
    }
}).start(); 
```

在下面的第二个示例中，您当然应该重新中断线程以让 run 方法知道`block()`退出的原因是加载变为真还是被中断：

```
public void run() {
    while(!Thread.currentThread().isInterrupted()) {
        loaded = false;
        System.out.println("Launching data load");
        block(); //if false has become true, loop, if interrupted, exit
    }
} 
```

如果您不知道该方法将如何使用，礼貌建议您应该重新中断线程。

# html - iPhone 网络应用程序 apple-touch-startup-image

> ID：14234769
> 
> 赞同：0
> 
> 时间：2013-01-09T12:00:59.577
> 
> 标签：html, iphone, iphone-web-app

如何在 iphone Web 应用程序显示初始屏幕时停止设备方向。

# c# - 如何在带有子组的 Active Directory 组中找到用户？

> ID：14234774
> 
> 赞同：0
> 
> 时间：2013-01-09T12:01:29.630
> 
> 标签：c#, asp.net, filter, active-directory, directoryentry

我对 ASP.NET 和 Active Directory 有疑问。

我想知道用户是否在 Active Directory 的 Groupe 中，如果他在这个 Group 中，他可以看到更多。为此，我编写了一个带有过滤字符串的函数。问题是在我们公司，我们切换了组并且结构不是静态的。为此，我首先搜索组，然后使用参数 member-of 搜索组中的用户...

这是我们AD的结构：

![在此处输入图像描述](../Images/96233a91ab5633fdb19cc3fcc5f6a129.png)

这是我的 saerch 组代码：

```
public string GetGroup(string groupname)
        {
            string path = "<OurDomain>";

            DirectoryEntry rootEntry = new DirectoryEntry(path);

            DirectorySearcher srch = new DirectorySearcher(rootEntry);
            srch.SearchScope = SearchScope.Subtree;

            srch.Filter = "(&(objectCategory=Group)(name=" + groupname + "))";

            SearchResult resFilter = srch.FindOne();

            string filterpath = resFilter.Path;

            return filterpath; 
        } 
```

我查找用户的方法：

```
public bool IsUserInGroup(string username,string groupepath) 
        {
            string path = "<OurDomain>"; 

            DirectoryEntry rootEntry = new DirectoryEntry(path);

            DirectorySearcher srch = new DirectorySearcher(rootEntry);
            srch.SearchScope = SearchScope.Subtree;

            srch.Filter = "(&(objectClass=user)(sAMAccountName=*" + username + "*)(memberof=CN=GastzugangUser,OU=SubFolderB,OU=FolderB,DC=company,DC=com))";

            SearchResultCollection res = srch.FindAll();

            if (res == null || res.Count <= 0)
            {
                return false;
            }
            else
            {
                return true; 
            }
        } 
```

如何在组的子组和动态中搜索用户？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:12:59.697

没有尝试过，但将其添加到过滤器有帮助吗？ [http://ldapwiki.willeke.com/wiki/1.2.840.113556.1.4.1941](http://ldapwiki.willeke.com/wiki/1.2.840.113556.1.4.1941)

例如

```
(&(objectClass=user)(sAMAccountName=*" + username + "*)(memberof:1.2.840.113556.1.4.1941:=CN=GastzugangUser,OU=SubFolderB,OU=FolderB,DC=company,DC=com))"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:18:45.720

如果您使用的是 .NET 3.5 及更高版本，则应查看`System.DirectoryServices.AccountManagement`(S.DS.AM) 命名空间。在这里阅读所有相关信息：

*   [在 .NET Framework 3.5 中管理目录安全主体](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)
*   [System.DirectoryServices.AccountManagement 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

基本上，您可以定义域上下文并在 AD 中轻松找到用户和/或组：

```
// set up domain context
using (PrincipalContext ctx = new PrincipalContext(ContextType.Domain))
{
  // find a user
  UserPrincipal user = UserPrincipal.FindByIdentity(ctx, "SomeUserName");

  if(user != null)
  {
      // GetAuthorizationGroups returns a list of GroupPrincipals and work recursively
      var groupsForUser = user.GetAuthorizationGroups();

      // then check to see if that group you want it part of this list
  }
} 
```

新的 S.DS.AM 使得在 AD 中与用户和组一起玩变得非常容易！

# javascript - 删除带有空 src 的图像标签

> ID：14234776
> 
> 赞同：1
> 
> 时间：2013-01-09T12:01:37.127
> 
> 标签：javascript, jquery, image

我的 html 中有包含空 src 属性的图像标签。这会导致不同浏览器中的错误。我想动态删除所有具有空 src 的图像标签

html:

```
<div class="newsroom-item"> 
  <article> 
    <figure> 
      <a href="/content/NewsRoom/648408.html"> 
        <img src="" alt="" data-blog="" data-list=""> 
      </a> 
    </figure> 
  </article> 
</div> 
```

我需要有关 Javascript 的帮助：

```
var figure = $('.newsarticle-list #newsarticlelist .newsroom-item figure a img');

$("figure[src='']").each(function () {

}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T12:03:22.233

只需使用 jQuery `remove()`：

```
$("img[src='']").remove(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T12:02:52.927

你可以这样做

```
$('.newsarticle-list #newsarticlelist .newsroom-item figure a img[src='']').remove(); 
```

或者如果你想使用对象数组。

```
figure.filter(function(){
    if(this.src == '')
       return $(this);
}).remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:04:43.087

我猜你的意思是：

```
var figure = $('.newsarticle-list #newsarticlelist .newsroom-item figure a img');

$("img[src='']",figure).remopve(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T12:06:04.090

您需要在图标签内使用 src='' 在 img 上使用 remove()

代码可能如下所示：

```
$("figure img[src='']").remove(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T12:08:34.100

```
$(document).ready(function(){
    $(".newsroom-item figure a img[src='']").remove()
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T12:21:20.160

如果要删除所有 src 属性为空的图像标签，可以使用

```
$('img').each(function(index,element){
     var $el = $(this)
     if($el.attr('src') == '')
          $el.remove()
}) 
```

# google-maps-api-3 - Google Map 图标颜色按 Fusion Table 中的值更改

> ID：14234784
> 
> 赞同：3
> 
> 时间：2013-01-09T12:02:19.090
> 
> 标签：google-maps-api-3, google-fusion-tables

我在[http://www.gfmap.com](http://www.gfmap.com)有一个网站，它显示了无麸质餐厅、商店、面包店等。它在 Fusion Table 上运行，有 20,000 多件商品。

我想知道是否可以根据类别（餐厅等）更改 Google 地图图标颜色

这是代码...

```
<script type="text/javascript">     
 var initialLocation; 
 var companyLocale = new google.maps.LatLng(-33.869629, 151.206955); 
 var localArray = [companyLocale]; 
 var noGeo = new google.maps.LatLng(51.506325, -0.127144);        
 var map;    
 var layerl0;    
 function initialize() {
    map = new google.maps.Map(document.getElementById('themap'),
     {
        zoom: 12 
     });
    if(navigator.geolocation) {
        browserSupportFlag = true;
        navigator.geolocation.getCurrentPosition(function(position) {
        initialLocation = new     google.maps.LatLng(position.coords.latitude,position.coords.longitude);
        map.setCenter(initialLocation);
    }, function() {
        handleNoGeolocation(browserSupportFlag);
       });
    }else {
       handleNoGeolocation();
    }
function handleNoGeolocation() {
  initialLocation = noGeo;
  localArray.unshift(initialLocation);
  map.setCenter(initialLocation);
}
    var style = [
    {
      featureType: 'administrative.land_parcel',
      elementType: 'all',
      stylers: [
        { visibility: 'off' }
      ]
    }
  ];

    var styledMapType = new google.maps.StyledMapType(style, {
      map: map,
      name: 'Styled Map'
    });
  map.mapTypes.set('map-style', styledMapType);
  map.setMapTypeId('map-style');
  layerl0 = new google.maps.FusionTablesLayer({
    query: {
      select: "'location'",
      from: 4015038
    },
    map: map
  });
}
function changeMapl0() {
  var searchString = document.getElementById('search-string-l0').value.replace(/'/g, "\\'");
  layerl0.setOptions({
    query: {
      select: "'location'",
      from: 4015038,
      where: "'Type' = '" + searchString + "'"
    }
  });
}
google.maps.event.addDomListener(window, 'load', initialize);
function ga() {
  var address = document.getElementById('q').value;
  if (address != ''){
    var geocoder = new google.maps.Geocoder();
        geocoder.geocode( { 'address': address + ' AU'}, function(results, status) {
          if (status == google.maps.GeocoderStatus.OK) {
            map.setCenter(results[0].geometry.location);
            if (results[0].geometry.location_type == google.maps.GeocoderLocationType.APPROXIMATE){
              map.setZoom(12);
            } else {map.setZoom(12);}
          }
          else {alert("Sorry, we can't find that place using Google.");}
        });

  }
}
</script>
<script type="text/javascript">

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-31494612-1']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

</script> 
```

我认为答案与这篇文章有关[Custom Google Map Icon If Value >=1](https://stackoverflow.com/questions/7065604/custom-google-map-icon-if-value-1)但我不能让它工作。我不知道 JavaScript 并且真的只是尽我所能一起破解了这个网站。

任何帮助表示赞赏。

谢谢

马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:24:03.600

您可以使用以下网址从[Google 图表 api](http://code.google.com/apis/chart/infographics/docs/dynamic_icons.html#pins)动态请求图标图像：

```
http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|FE7569 
```

如下所示：![](../Images/a14931092a3fdff759e36140ebf41e9a.png)图像为**21x43**像素，针尖位于**(10, 34)位置**

而且您还需要一个单独的阴影图像（这样它就不会与附近的图标重叠）：

```
http://chart.apis.google.com/chart?chst=d_map_pin_shadow 
```

如下所示：![](../Images/80cde82dd18050e2d9727205f1fafc11.png)图像为**40x37**像素，针尖位于**(12, 35)位置**

当您构建[MarkerImage](http://code.google.com/apis/maps/documentation/javascript/reference.html#MarkerImage)时，您需要相应地设置大小和锚点：

```
 var pinColor = "FE7569";
    var pinImage = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|" + pinColor,
        new google.maps.Size(21, 34),
        new google.maps.Point(0,0),
        new google.maps.Point(10, 34));
    var pinShadow = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_shadow",
        new google.maps.Size(40, 37),
        new google.maps.Point(0, 0),
        new google.maps.Point(12, 35)); 
```

然后，您可以使用以下命令将标记添加到地图中：

```
 var marker = new google.maps.Marker({
                position: new google.maps.LatLng(0,0), 
                map: map,
                icon: pinImage,
                shadow: pinShadow
            }); 
```

只需将“FE7569”替换为您需要的颜色代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T14:08:27.647

有很多预定义的标记可以用于 fusionTables（除了它们之外，没有其他方法可以应用）。

你可以在这里找到它们：[**https**](https://www.google.com/fusiontables/DataSource?docid=1BDnT5U1Spyaes0Nj3DXciJKa_tuu7CzNRXWdVA) ://www.google.com/fusiontables/DataSource?docid=1BDnT5U1Spyaes0Nj3DXciJKa_tuu7CzNRXWdVA （点击可视化->地图查看它们）

您可以将它们用于图层的样式，例如：

```
styles:[{
            where: "Type='Restaurant'",
            markerOptions: {iconName: "rec_dining"}
          }] 
```

演示：http: [**//jsfiddle.net/doktormolle/5MuL4/**](http://jsfiddle.net/doktormolle/5MuL4/)

# c# - 构造函数内部和外部调用方法的区别

> ID：14234790
> 
> 赞同：0
> 
> 时间：2013-01-09T12:02:39.903
> 
> 标签：c#, oop, compiler-construction, constructor, instantiation

> **可能重复：**
> [最佳实践：在构造函数或声明中初始化类字段？](https://stackoverflow.com/questions/24551/best-practice-initialize-class-fields-in-constructor-or-at-declaration)

这只是我和我的朋友在谈论我们当前的项目时提出的一个简单甚至有点愚蠢的疑问。

我想知道的是调用方法在使用 C# 的类的构造函数内部和外部设置变量之间的区别，如下例所示：

情况1：

```
public class Test
{
    string myVar = GetValue();

    public Test()
    {
    }
} 
```

案例二：

```
public class Test
{
    string myVar;

    public Test()
    {
        myVar = GetValue(); 
    }
} 
```

使用这些方法时是否存在性能差异或任何“模式违规”？如果有人能告诉我这些方法中哪一种更好，以及当我在编译器级别使用它们时会发生什么，我将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:07:37.640

AFAIK 唯一的区别是首先触发字段初始化（您的第一个示例） - 它本质上仍被视为构造函数代码。通过选择一个而不是另一个没有性能提升，这实际上是一个偏好问题。

要注意的一件事是[执行顺序](http://blogs.msdn.com/b/marcod/archive/2007/03/11/inlineinitializers.aspx)，因为它可以根据您的类层次结构进行更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:11:37.743

如果您的方法`GetValue`是类中的静态方法，那么您可以在字段初始化中使用它。如果它是一个实例方法，你会得到一个错误。

您的第一个代码使用字段初始化，而在您的第二个代码中，您正在初始化构造函数中的字段。

[字段 C#](http://msdn.microsoft.com/en-us/library/ms173118%28v=vs.80%29.aspx)

> 在调用对象实例的构造函数之前立即初始化字段，因此如果构造函数分配字段的值，它将覆盖在字段声明期间给出的任何值。

至于哪个更好，**我会说这取决于您的要求**。通常，如果您将某些参数传递给要分配给某个字段的构造函数，那么您只能在构造函数中执行此操作。但是，如果您想为字段设置一些默认值，那么在执行构造函数之前，最好有字段初始化器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:18:34.620

下一种情况是字段初始化可能可行并获得可读性的情况

```
class Test
{
    string myVar;
    string anotherVar;

    public Test()
    {
        myVar = "one default";
        anotherVar = "another default";
    }
    public Test(string s) //: this()
    {
        myVar = s;
        anotherVar = "another default";
    }
} 
```

您可能不想默认调用构造函数，因为在某些情况下两次初始化某个变量**可能是错误的（在我的情况下，它绝对可以）；**因此，在上面的示例中，我将`anotherVar`转到字段初始化。

**注意：**谈到性能，我不在这样的纳米优化级别上 - 当您使用字段初始化时，您的字段会根据需要接收第一个值。当你从构造函数初始化它时，它已经有了它的默认值，所以从技术上讲，你分配了一个字段两次。但是这个惩罚是如此之小，以至于我无法想象它是合理的场景。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T12:26:18.333

你发布的代码没有编译，所以我继续做了几个可能的变化。

### 1.静态字段和静态方法

```
public class Test
{
    static string myVar = GetValue();

    public Test()
    {
    }

    static string GetValue()
    {
        return String.Empty;
    }
} 
```

在这种情况下，在哪里设置静态字段并不重要：在*静态*构造函数中（代码中未显示）或作为静态字段初始化。当一个类型被加载到 AppDomain 中时，CLR 将初始化两者。（有一个序列，例如 CLR 首先调用静态构造函数，然后设置所有静态字段*，*反之亦然 - 虽然这个序列不在您的控制范围内）。

### 2\. 在构造函数中设置属性

```
public class Test1
{
    string MyVar{get;set;}

    public Test1()
    {
        MyVar = GetValue();
    }

    string GetValue()
    {
        return String.Empty;
    }
} 
```

这取决于类型和用途。在这种特殊情况下，我可能会避免这样做，因为构造函数意味着轻量级。如果您进行任何繁重的处理，最好将其移至`Initialize`具有适当错误处理和`try-catch`块的方法。如果您不做任何繁重的工作来设置属性 - 只需在构造函数中放置一个默认值，例如`MyVar = "EMPTY"`.

### 3.在另一个类中设置属性

```
public class Test
{
    public string MyVar{get;set;}

    public Test(){ }

    public string GetValue()
    {
        return String.Empty;
    }
}

//somewere else 
Test t = new Test();
t.MyVar = t.GetValue(); 
```

这看起来有点奇怪，因为类提供了一个状态（属性）和获取当前状态的方法（GetValue 方法）。在这种情况下，两个成员（属性和方法）可能应该合并为一个*getter*。

# c++ - C++ 强制特定的重载决议

> ID：14234792
> 
> 赞同：3
> 
> 时间：2013-01-09T12:02:44.397
> 
> 标签：c++, overloading

我正在尝试追踪内存泄漏，并认为为此创建一个简单的设备会很好，所以我做了这个。

```
struct alloc_t
{ 
};
extern alloc_t g_Alloc;

inline 
void* operator new (size_t size, alloc_t, const char* file, int line)
{
    return _malloc_dbg(size, _NORMAL_BLOCK, file, line);
} 
```

然后我使用一个宏来扩展这个特定的重载，如下所示：

```
#define DEBUG_NEW new (g_Alloc, __FILE__, __LINE__) 
```

虽然，我必须在`g_Alloc`某个地方定义，但我认为有更好的方法来确保重载解决方案是可悲的，但不使用`struct`. 但是，我注意到在不与or混淆的情况下，`enum`或将在多大程度上就足够了？`typedef``void*``int`

此外，任何人都可以从经验中说出这种`g_Alloc`情况是否会影响如此严重的问题，或者编译器是否只是在完成重载决议后将其删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:24:08.020

With the help of @ipc's comment I made this adjustment, it's fundamentally the same but with a const qualifier and pass-by-reference. This is also identical to the trick used by the *new overload by nothrow* that allow you to not get exceptions when allocations fail in C++ (this I did not know about).

```
struct alloc_t
{ 
};
extern const alloc_t g_Alloc;

inline 
void* operator new (size_t size, const alloc_t&, const char* file, int line)
{
    return _malloc_dbg(size, _NORMAL_BLOCK, file, line);
} 
```

# php - Yii 检查是否在每个页面都登录了 Facebook

> ID：14234793
> 
> 赞同：0
> 
> 时间：2013-01-09T12:02:46.063
> 
> 标签：php, facebook, yii

**已解决 在底部发布代码**

我终于得到了这个工作，但老实说我想我做这完全错了。

**我想要的是：**

如果用户通过 Facebook 登录网站，我想检查我的网站。这必须在每一页都完成，因为只有在您登录后才能访问网站的某些部分。此外，我想将 Facebook 的数据放入我的数据库中。

**我得到了什么：**

目前，如果用户通过 Facebook 登录到我的网站，我可以检查每个页面。我确实通过更改`init()`.`SiteController.php`

这个函数现在看起来像这样：

```
public function init() {
    global $facebookID; // Create global Facebook ID
    global $loginURL;   // Create global URL for login

    $currentURL =  'http://dev03.***.nl/app/facebook-popup.php'; // facebook popup url

    //Get Facebook ID if FacebookID isn't there the result is 0
    $facebookID = Yii::app()->facebook->getUser();

    if(!$facebookID){
        //If there isn't an Facebook ID
        $loginURL = Yii::app()->facebook->getLoginUrl(array(
            'scope' => 'read_insights, publish_actions, manage_pages',
            'display' => 'popup',
            'next' => $currentURL . '?loginsucc=1',
            'cancel_url' => $currentURL . '?cancel=1'
        ));
    }
} 
```

**问题：**

最大的问题是我的网站加载时间延长了，但我不知道如何以其他方式使其工作。我猜我可以把这个测试变成对加载时间更友好的方式。

**我的问题：**

我如何能够减少加载时间，并以正确的方式进行编程。我是否能够将其作为一项功能，以便如果我切换到某些页面，将检查用户是否通过 Facebook 登录并在结果中显示某些页面。

**我的第二个问题：**

目前，如果全局 facebookID 为空或不显示 Facebook 个人资料图片或登录按钮，我将通过以下方式检查我的 views/layouts/main.php：

```
<?php if ($GLOBALS['facebookID']) { ?>                      
    <img src="https://graph.facebook.com/<?php echo $GLOBALS['facebookID'] ?>/picture"/> 
<?php } else{ ?>
    <a href="#" onclick="login();return false;">
        <div id="login_facebook">
        <img src="<?php echo Yii::app()->theme->baseUrl?>/images/buttons/facebook.png" alt="Facebook logo">
        <p>login met Facebook</p>
    </div><!-- #login_facebook -->
    </a>
<?php } ?> 
```

如果我有一个为我检查这个的函数，我猜加载时间也会减少，或者这是在布局中放置 if 语句的唯一方法？

我知道这是一个大问题，但我对 Yii 有点陌生，我希望你们中的一些人能花时间帮助我解决这个问题。

**解决方案**

非常感谢@DarkMukke，我能够解决这个问题。我改变了一些事情，也许做了一些不是完美的事情。但它现在对我来说很好。

首先，我改变了对用户身份验证的整体想法，并删除了全局变量。目前，webapp 唯一的第一个检查是我们是否有一个 facebookID 和一个用户。这是为了防止当用户删除 Facebook 中的权限但仍然登录到应用程序并获得用户状态时访问。这是通过以下代码完成的：

受保护/组件/Controller.php

```
public function init() {
    $facebookID = Yii::app()->facebook->getUser();

    if(!$facebookID && Yii::app()->user->getState('role') == 'user'){
        Yii::app()->user->setState('role', 'guest');
    }
} 
```

因此，`$facebookID`我们存储用户的 facebookID，如果用户已撤销访问权限，`$facebookID`则为空。因此，我们检查用户是否获得了角色`'user'`以及 Facebook id 是否为空。如果是这样，用户需要获取角色`'guest'`。

然后是登录问题，我决定制作一个新控制器，而不是使用主控制器。我把它放在 protected/controllers/FacebookController.php 中，它看起来像这样：

```
class FacebookController extends Controller {

    public function actionLogin() {
        $facebookID = Yii::app()->facebook->getUser();
        $accessToken = Yii::app()->facebook->getAccessToken();
        $loginUrl = Yii::app()->facebook->getLoginUrl(array('scope' => 'read_insights, publish_actions, manage_pages, email', 'display' => 'popup', 'redirect_uri' => 'http://dev03.****.nl/app/facebook-popup.php'));

        if($facebookID == 0) {
            echo '<script>
                    window.location="'.$loginUrl.'"
                  </script>';

        } else {
            $record = Users::model()->findByAttributes(array('FB_id'=>$facebookID));
            if($record===null) {                
                $userInfo = Yii::app()->facebook->api('/me');

                $user = new Users;
                $user->firstname = $userInfo['first_name'];
                $user->surname = $userInfo['last_name'];
                $user->city = $userInfo['location']['name'];
                $user->email = $userInfo['email'];
                $user->FB_id = $userInfo['id'];
                $user->save();
            }

            Yii::app()->user->setState('role', 'user');
            Yii::app()->user->setState('FBid', $facebookID);

            echo "<script>
                    window.close(); 
                    window.opener.location.reload();
                   </script>";
        }
    }       
} 
```

**请注意，我通过 Javascript 在弹出窗口中调用此函数**

所以它的作用是：

首先，获取 Facebook id，获取访问令牌和登录 url。

然后我们检查我们是否获得了 Facebook id，如果没有，则将弹出窗口的位置更改为 Facebook 的登录 url。这将打开对话框以获取访问权限和函数中描述`'scope'`的权限。`getLoginUrl()`

如果我们有权限，它会检查我们是否在数据库中获得了用户。如果`$record`不是`null`。然后我们获取用户的信息`api('/me')`并将其发布到数据库中。如果这样做了，我们继续。

然后我们将用户的角色设置为 user 并添加一个名为 FBid 和 Facebook id 的状态，以便稍后在应用程序中使用它。

当这一切都完成后，我们关闭窗口。并且用户已登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:30:11.607

显然，你对你在做什么有一些想法。所以让我指出一些提示。

首先，如果您要覆盖 SiteController 中的 init，则必须在每个新控制器中都这样做，因此您最好覆盖 Controller 中的 init()，即 /protected/components 中的类，每个控制器都从默认，这样它真的会出现在每一页上。

第二点，全局变量是个坏主意。它们可能看起来很有用，但调试起来很痛苦。在我看来，应该从下一个 PHP 版本中删除全局变量。所以这里正确的方法是使用[CWebuser->setState()](http://www.yiiframework.com/doc/api/1.1/CWebUser#setState-detail)，这样你就可以检查用户是否登录。这为您提供了另一个有用的优势。在第一次 FB 登录时，您在自己的 users 表中创建了一个用户，并使用他的数据创建了一个用户，对于 UserIdentity，您只需使用 FB 检查，并使用该 FBid 集加载 FBid == 您的记录的记录。

所以简而言之，

*   当人们授权时，在您的用户表中为他们创建一条记录
*   使用本机用户检查，检查是否使用本机 cookie 登录
*   如果未登录，将 FacebookId 与您自己的记录进行比较
*   如果没有记录，请尝试使用 Facebook 弹出窗口对其进行授权
*   要让 Facebook 数据无处不在，请在您的 UserIdentity 中使用[CWebuser->setState()](http://www.yiiframework.com/doc/api/1.1/CWebUser#setState-detail)，不要使用全局变量

# jquery - Jquery菜单a：单击时链接更改颜色

> ID：14234797
> 
> 赞同：0
> 
> 时间：2013-01-09T12:03:02.280
> 
> 标签：jquery

我正在尝试编写一些代码，使我能够单击导航线上的链接，然后它会改变颜色，当我单击另一个链接时，颜色会变回来，而新链接将获得颜色！但是我的代码似乎有问题；（有人可以帮助我吗？:)

这是在我的 try_1.php 文件中：

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />

        <link rel="stylesheet" href="try_1.css">
        <script type="text/javascript" src="js/jquery.js"></script>
            <script type="text/javascript" src="js/click.js"></script>
</head>
    <body>
        <div id="header">
        <div id="mainNavMenu">
            <ul>
                <li><a href="#">Hjem</a></li>
                <li><a href="#">CV</a></li>
                <li><a href="#">Foto album</a></li>
                <li><a href="#">Pr&aelig;diker</a></li>
                <li><a href="#">Artikler</a></li>
                <li><a href="#">Foredrag</a></li>
                <li><a href="#">Kalender</a></li>
                <li><a href="#">Kontakt</a></li>
            </ul>
        </div>
        </div>
    </body>
</html> 
```

这是在我的 try_1.css 文件中：

```
a:link,a:visited{
    color:green;
    font-family:calibri;
    text-decoration:none;
}
#mainNavMenu ul li {
    float:left;
    list-style-type:none;
}
#mainNavMenu ul li a:link{
    color:blue;
    font-size:18px;
    padding-right:20px;
    padding-left:20px;
    line-height:60px;'
    text-decoration:none;
    display:block;
    background:gray;
}
#mainNavMenu ul li a:hover{
    color:yellow;
}

#mainNavMenu .changeColor{
    background-color:white;
} 
```

这是在我的 click.js 文件中：

```
$(document).ready(function(){

                var targetElement = $("#mainNavMenu li");

                targetElement.click(function() {
                    $(this).addClass("changeColor");
                });

            }); 
```

当然，我也有一个 jquery.js 文件，但不会复制/粘贴该代码:)

希望你们能帮忙:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:09:44.747

试试这个：`.siblings()`在你的情况下会有用。

```
$(document).ready(function(){
    var targetElement = $("#mainNavMenu li");           
    targetElement.click(function() {
       $(this).siblings().removeClass("changeColor");
       $(this).addClass("changeColor");
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:22:38.813

您正在将`background: gray`样式应用于规则中的`<a/>`超链接。`#mainNavMenu ul li a:link`但是，您正在将`changeColor`类名应用于父`<li/>`元素。

`background`应用于的样式`<li/>`将被子样式中的样式覆盖，该`background`样式`<a/>`始终以`gray`.

您需要将规则应用于超链接。下面的规则有点太罗嗦了，但我认为它可以通过这个想法。

利用

```
#mainNavMenu ul li a:link.changeColor {
  background-color:white;
} 
```

代替

```
#mainNavMenu .changeColor{
    background-color:white;
} 
```

并在您的代码中更新您当前的选择器。

```
$(function(){
    var $targetElement = $("#mainNavMenu li a");           
    $targetElement.click(function() {
       $targetElement.removeClass("changeColor");
       $(this).addClass("changeColor");
    });
}); 
```

[**看一个活生生的例子。**](http://jsfiddle.net/TRGCK/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:09:56.487

这应该这样做..

```
#mainNavMenu ul li.changeColor{
background-color:white; 
```

}

因为您正在将类添加到`<li>`此处...`$(this)`在您的 jquery 中指的是`<li>`..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T12:11:10.163

像这样试试。

```
$(document).ready(function(){
    var targetElement = $("#mainNavMenu li");
    targetElement.click(function() {
        targetElement.removeClass('changeColor');
        $(this).addClass("changeColor");
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-08T04:43:23.547

```
<script  type="text/javascript">
    $(document).ready(function () {
        jQuery('.menu a').click(function () {.  
            jQuery('.menu a').removeClass('select');
            jQuery(this).addClass('select');

        });
    });

</script>
<nav class="menu">
    <a href="#" class="select">all</a>
    <a href="#" ">shoes</a>
    <a href="#" ">dress</a>
    <a href="#" ">hat</a>
    <a href="#" ">trousers</a>
    <a href="#" ">shirt</a>

</nav> 
```

记住：在 CSS 中设置属性包括：::
selection
{
color:#fff;
背景：#ed1e79;
文字阴影：无；
}
::-moz-selection //MOZILA FIREFOX需要这个属性
{
color:#fff;
背景：#ed1e79;
文字阴影：无；
}

我认为这种方法很容易工作，你可以很容易理解

注意事项：当你指示某人时，让指导很容易，最简洁

# java - JPanel 内的 JPanel 不听 KeyListener

> ID：14234803
> 
> 赞同：1
> 
> 时间：2013-01-09T12:03:22.730
> 
> 标签：java, swing, jpanel, keylistener, key-bindings

目前我正在用 Java 制作关卡编辑器。该级别位于 JPanel 中。在这个 JPanel 中，我放置了游戏元素（英雄、敌人、树、墙……）对于每个元素，我使用 class.GameElement。

```
public class GameElement extends JPanel
 {
protected int posX, posY;
private Color color;

public GameElement(int x, int y, Color color)
{
    this.posX = x;
    this.posY = y;
    this.color = color;

}

public void paintComponent(Graphics g)
{
    super.paintComponent(g);
    g.setColor(color);
    g.fillRect(0, 0, 50, 50);
}

} 
```

GameElement 类也是一个 JPanel。我希望通过使用 KeyListener 来移动游戏元素英雄。

```
import java.awt.Color;
import java.awt.event.*;

public class Hero extends Entity implements KeyListener
{
public Hero(int x, int y, Color color)
{
    super(x, y, color);

    this.setFocusable(true);
    this.addKeyListener(this);
}

public void keyPressed(KeyEvent k)
{
    if(k.getKeyCode() == KeyEvent.VK_UP)
    {
        this.move(0, -1);
    }
    else if(k.getKeyCode() == KeyEvent.VK_DOWN)
    {
        this.move(0, 1);
    }
    else if(k.getKeyCode() == KeyEvent.VK_LEFT)
    {
        this.move(-1, 0);
    }
    else if(k.getKeyCode() == KeyEvent.VK_RIGHT)
    {
        this.move(1, 0);
        System.out.println("test");
    }
}

public void keyTyped(KeyEvent k)
{

}

public void keyReleased(KeyEvent k)
{

}
} 
```

当我启动关卡编辑器时。英雄在我的屏幕上显示成功，但是当我按下按键时它没有移动。是因为我没有专注于正确的 JPanel 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T12:15:23.727

不是您专注于错误`JPanel`，而是`JPanel`无法聚焦，因此无法与`KeyEvents`. 这就是为什么在 Swing 中最好使用[键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)，即使组件没有焦点，也可以将动作映射到 KeyStroke。

[例子](http://tips4java.wordpress.com/2008/10/10/key-bindings/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:27:07.950

您可以将[AWTEventListener](http://docs.oracle.com/javase/7/docs/api/java/awt/event/AWTEventListener.html)添加到默认[Toolkit](http://docs.oracle.com/javase/7/docs/api/java/awt/Toolkit.html "java.awt 中的类")以侦听所有关键事件，而不取决于哪个元素具有焦点（只是应用程序必须具有焦点）：

```
 AWTEventListener theListener = new AWTEventListener() {
        @Override
        public void eventDispatched(AWTEvent event) {
            System.out.println(event);
        }
    };
    Toolkit toolkit = Toolkit.getDefaultToolkit();
    toolkit.addAWTEventListener(theListener, AWTEvent.KEY_EVENT_MASK); 
```

**编辑**
`AWTEvents`是一种低级事件，更喜欢使用[ActionMap](http://docs.oracle.com/javase/7/docs/api/javax/swing/ActionMap.html "javax.swing 中的类") / [InputMap](http://docs.oracle.com/javase/7/docs/api/javax/swing/InputMap.html "javax.swing 中的类")（或只是[registerKeyboardAction](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#registerKeyboardAction%28java.awt.event.ActionListener,%20java.lang.String,%20javax.swing.KeyStroke,%20int%29 "JComponent.registerKeyboardAction")）

# html - 将图像附加到标题标签的外部

> ID：14234804
> 
> 赞同：1
> 
> 时间：2013-01-09T12:03:25.973
> 
> 标签：html, css

我正在尝试为我的标题实现以下效果：http: [//imgur.com/ozgAU](http://imgur.com/ozgAU)

使背景为红色，然后将右侧图像附加圆形边缘和透明背景。

目前，红色背景填充了整个区域，因此右边的圆形图像没有透明背景，角落是红色的。

这是我目前拥有的 CSS：

```
.tabbed-heading{
    background-color: #ef4857;
    padding: 8px 0px 8px 10px;
    background-image: url('images/headertabright.png');
    background-position: right;
    background-repeat: no-repeat;
    color: #fff;
    max-width: 60%;
} 
```

-

```
<h4 class="tabbed-heading">Lineup</h4> 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:24:59.963

不确定这是否适合您，因为您的标题看起来居中，但这是使用透明 png 的解决方法

**HTML**

```
<h4 class="tabbed-heading"><span>Lineup</span></h4> 
```

**CSS**

```
h4 {padding:0 0 0 15px; margin-right:15px; background-color:#ef4857}
h4 span {display:block; margin-right:-15px; background:url(http://i.imgur.com/ozgAU.png) right center no-repeat; padding:7px 0;} 
```

如果你想隐藏你的文字，只使用图像作为标题添加 text-indent:-9999px

工作示例：

[http://jsfiddle.net/YKrf4/1/](http://jsfiddle.net/YKrf4/1/)

# javascript - 在 div jquery 的内容中查找一些文本

> ID：14234811
> 
> 赞同：1
> 
> 时间：2013-01-09T12:03:40.233
> 
> 标签：javascript, jquery

> **可能重复：**
> [jQuery 查找和替换字符串](https://stackoverflow.com/questions/5115152/jquery-find-and-replace-string)

这是我的html：

```
<div class="dt_lft">There is an error</div> 
```

我需要查找 div 是否有文本`error`并`success`使用类名替换该文本。这该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T12:06:13.313

您可以使用[`:contains()`](http://api.jquery.com/contains-selector/)选择器：

```
$("div.dt_lft:contains('error')").text(function(i, text) {
    return text.replace('error', 'success');
}); 
```

如果字符串`error`可能在文本中出现多次，则需要使用 RegEx 来处理：

```
$("div.dt_lft:contains('error')").text(function(i, text) {
    return text.replace(new RegExp('error', 'g'), 'success');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T12:19:03.060

```
$("div.dt_lft:contains('error')").text(function(i,text){
   return text.replace('error', 'success');
}); 
```

[http://jsfiddle.net/ztCcB/1/](http://jsfiddle.net/ztCcB/1/)

* * *

`$("div.dt_lft:contains('error')")`返回类`dt_lft`包含 word 的所有 div `error`，您可以阅读有关 jQuery[包含选择器](http://api.jquery.com/contains-selector/)的更多信息。使用 jQuery [`.text()`](http://api.jquery.com/text/)，您可以编写如下函数：

```
$(object).text(function(index,CurrentContent){
   //somecode here
} 
```

* * *

`error`在其他地方，如果您的对象多次包含单词，您可以执行以下操作：

```
text.split('error').join('success'); 
```

如果您不想使用 RegEx。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:06:09.077

试试这个

```
var m=$(".dt_lft").html();
m=m.replace("error","success");
$(".dt_lft").html(m); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T12:08:19.257

试试这个，

```
if($("div.dt_lft:contains('error')")){
  $('.dt_lft').replace('error','success');
} 
```

# android - 如何从谷歌地图警报对话框开始活动

> ID：14234814
> 
> 赞同：0
> 
> 时间：2013-01-09T12:03:48.487
> 
> 标签：android, google-maps, android-activity, android-alertdialog

我创建了一个带有叠加层的地图，当我按下其中一个向我显示一个带有按钮的对话框以及当我按下按钮开始另一个活动时，我需要。我该怎么做，因为我尝试使用 startActivity(intent) 但给我错误。

公共类 MiItemizedOverlay 扩展 ItemizedOverlay {

```
public MiItemizedOverlay(Context context, Drawable defaultMarker) {
    super(boundCenterBottom(defaultMarker));
    this.context = context;
}

public void addLocalizacion(double lat, double lon, String etiqueta) {
    int lt = (int) (lat * 1E6);
    int ln = (int) (lon * 1E6);
    punto = new GeoPoint(lt, ln);
    OverlayItem item = new OverlayItem(punto, etiqueta, null);
    mOverlays.add(item);
    populate();
}

public void clear() {
    mOverlays.clear();
    populate();
}

@Override
protected OverlayItem createItem(int i) {
    return mOverlays.get(i);
}

@Override
public int size() {
    return mOverlays.size();
}

@Override
protected boolean onTap(int index) {
    OverlayItem item = mOverlays.get(index);
    AlertDialog.Builder dialog = new AlertDialog.Builder(context);
    dialog.setTitle(item.getTitle());
    dialog.setMessage(item.getSnippet());
    dialog.setPositiveButton("Go", new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int id) {
            Intent intent = new Intent(context, OtraActivity.class);
            startActivity(intent);

        }
    }).create().show();
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:07:28.427

使用`Context`字段`MiItemizedOverlay class`

```
@Override
protected boolean onTap(int index) {
    OverlayItem item = mOverlays.get(index);
    AlertDialog.Builder dialog = new AlertDialog.Builder(context);
    dialog.setTitle(item.getTitle());
    dialog.setMessage(item.getSnippet());
    dialog.setPositiveButton("Go", new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int id) {
            Intent intent = new Intent(context, OtraActivity.class);
            //here
            context.startActivity(intent);
        }
    }).create().show();
    return true;
} 
```

也不要忘记在调用其他活动之前关闭对话框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:49:09.367

```
protected boolean onTap(int index) {
    OverlayItem item = mOverlays.get(index);
    AlertDialog.Builder dialog = new AlertDialog.Builder(context);
    dialog.setTitle(item.getTitle());
    dialog.setMessage(item.getSnippet());
    dialog.setPositiveButton("Go", new DialogInterface.OnClickListener() {  
        public void onClick(DialogInterface dialog, int id) {
             Intent intent = new Intent(context, OtraActivity.class);
             dialog.cancel();
             context.startActivity(intent); 
        }});
    dialog.show();
    return true;
} 
```

# wso2 - 在 WSO2 BPS 中从 Saxon HE 切换到 Saxon PE

> ID：14234820
> 
> 赞同：0
> 
> 时间：2013-01-09T12:04:23.743
> 
> 标签：wso2, wso2esb, saxon

我需要切换 WSO2 业务流程服务器以使用 Saxon PE，而不是嵌入 Saxon HE，因为我正在为 XSLT 使用 Saxon 扩展。

我试图从 /repository/components/plugins/saxon.he_9.4.0.wso2v1.jar 中删除初始插件，并将 Saxon PE jar 和许可证文件放入 /lib 和 /lib/endrosed 中，如建议的[那样](http://heshans.blogspot.com/2011/07/changing-underlying-xslt-processor-of.html)

这并没有多大帮助，因为我仍然得到：

```
TID: [0] [BPS] [2013-01-09 11:08:08,551]  INFO {org.apache.ode.bpel.runtime.ASSIGN} -  Assignment Fault: {http://docs.oasis-open.org/wsbpel/2.0/process/executable}subLanguageExecutionFault,lineNo=96,faultExplanation={http://docs.oasis-open.org/wsbpel/2.0/process/executable}subLanguageExecutionFault: org.apache.ode.utils.xsl.XslTransformException: XSL Transformation failed! {org.apache.ode.bpel.runtime.ASSIGN}
TID: [0] [BPS] [2013-01-09 11:08:08,551]  INFO {org.apache.ode.bpel.runtime.ASSIGN} -  Assignment Fault: {http://docs.oasis-open.org/wsbpel/2.0/process/executable}subLanguageExecutionFault,lineNo=96,faultExplanation={http://docs.oasis-open.org/wsbpel/2.0/process/executable}subLanguageExecutionFault: org.apache.ode.utils.xsl.XslTransformException: XSL Transformation failed! {org.apache.ode.bpel.runtime.ASSIGN} 
```

转换失败，但是相同的请求按预期转换，并且在单元测试中没有任何错误，所以我认为 BPS 不知道它应该使用 PE。

此外，如果需要使用扩展进行转换的元素没有到达请求中 - 转换效果很好。

有人可以就此提出建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:08:44.097

[该解决方案](http://nandikajayawardana.blogspot.com/2012/12/how-to-replace-saxonhe940wso2v1jar-in.html)对我来说非常有效（只需几个简单的步骤即可）。

# c# - WP7 从图像中裁剪文本区域

> ID：14234821
> 
> 赞同：1
> 
> 时间：2013-01-09T12:04:24.843
> 
> 标签：c#, image, windows-phone-7

我需要裁剪图像，使其仅包含文本，没有空白区域。例如。以下..

> 像这张图片在所有四个方面都包含很多空间

![有空间](../Images/c429a9a92dec929ff8c5c053483b14d0.png)

> 这是图像的裁剪版本。

![没有空间](../Images/82418438b3eccf9c330889d20f49f3e1.png)

有什么东西（库）可以使这个过程自动化。

# iphone - 播放保存在应用程序文档目录中的视频文件

> ID：14234822
> 
> 赞同：4
> 
> 时间：2013-01-09T12:04:30.473
> 
> 标签：iphone, ios, objective-c, ios4, mpmovieplayercontroller

我在文档文件夹的应用程序本地目录中保存了一个视频文件。我想在用户单击我创建的嵌入式表格视图中的项目时播放文件。我播放视频的代码如下：

```
NSString* documentPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString* path = [documentPath stringByAppendingPathComponent:@"DemoRecording.mp4"];
NSURL* movieURL = [NSURL fileURLWithPath: path];
[player.view setFrame: self.view.bounds];
[self.view addSubView: player.view];
[player play];
MPMoviePlayerViewController* moviePlayer = [[MPMoviePlayerViewController alloc] initWithContentURL: movieURL];
[self presentMoviePlayerViewControllerAnimated: moviePlayer]; 
```

视频不播放。路径正确，文件存在那里。
我知道这是一个重复的问题。我参考了这些链接：
[Playing a Downloaded Video from the Documents Directory with Cocoa-Touch](https://stackoverflow.com/questions/11549143/playing-a-downloaded-video-from-the-documents-directory-with-cocoa-touch)
[MPMoviePlayer 加载和播放保存在应用文档中的电影](https://stackoverflow.com/questions/3945121/mpmovieplayer-load-and-play-movie-saved-in-app-documents)
但找不到明确的答案。
请帮我解决这个问题。我正在使用 iOS 5.1.1，如果这有什么改变的话。

编辑：

它确实有效。我忘记将 URL 传递给电影播放器​​。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-09T12:16:19.047

您可以像这样播放文档目录中的视频：-

```
-(IBAction)playVideo
{
    NSURL *vedioURL;
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSArray *filePathsArray = [[NSFileManager defaultManager] subpathsOfDirectoryAtPath:documentsDirectory  error:nil];
    NSLog(@"files array %@", filePathsArray);        

    NSString *fullpath;

    for ( NSString *apath in filePathsArray )
    {
        fullpath = [documentsDirectory stringByAppendingPathComponent:apath];       
        vedioURL =[NSURL fileURLWithPath:fullpath];
    }
    NSLog(@"vurl %@",vedioURL);
    MPMoviePlayerViewController *videoPlayerView = [[MPMoviePlayerViewController alloc] initWithContentURL:vedioURL];
    [self presentMoviePlayerViewControllerAnimated:videoPlayerView];
    [videoPlayerView.moviePlayer play];     
} 
```

**笔记**

> 请注意不要忘记包含请求的框架或连接代表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-26T12:54:52.707

你的错误是你`/`在DemoRecording.mp4之前错过了

它应该是

```
NSString* path = [documentPath stringByAppendingPathComponent:@"/DemoRecording.mp4"]; 
```

`player`此外，您在声明之前正在编写语句。

# c# - 在 ObservableCollection 中添加 ObservableCollection

> ID：14234823
> 
> 赞同：1
> 
> 时间：2013-01-09T12:04:34.883
> 
> 标签：c#, observablecollection, windows-phone-8

我需要在另一个中添加一个 ObservableCollection ObservableCollection，这可能吗？

```
Items = new ObservableCollection<WidgetCollectionItem>();

            foreach (XElement wid in document.Root.Elements("widget"))
            {
                WidgetCollectionItem item = new WidgetCollectionItem();

                item.nombreWidget = wid.Attribute("caption").Value;

                foreach (XElement service in wid.Elements("service"))
                {
                    item.nombreServicio = service.Attribute("caption").Value;
                    item.valor = service.Element("xvalue").Value;
                    item.color = service.Element("xcolor").Value;
                    item.alerta = service.Element("xalert") != null ? service.Element("xalert").Value : null;
                    Items.Add(item);
                }
            } 
```

问题是每个 (item.nombreWidget) 包含多个 (item.nombreServicio)。我需要一个 ObservableCollection 内的 ObservableCollection 的 observableCollection 的 nombreWidget

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:10:23.397

是的你可以。

```
new ObservableCollection<ObservableCollection<WidgetCollectionItem>>() 
```

所以你可以做这样的事情：

```
Items = new ObservableCollection<ObservableCollection<WidgetCollectionItem>>();

foreach (XElement wid in document.Root.Elements("widget"))
{
    ObservableCollection<WidgetCollectionItem> services = new ObservableCollection<WidgetCollectionItem>();

    foreach (XElement service in wid.Elements("service"))
    {
        WidgetCollectionItem widget = new WidgetCollectionItem();
        widget.nombreWidget = wid.Attribute("caption").Value;
        widget.nombreServicio = service.Attribute("caption").Value;
        widget.valor = service.Element("xvalue").Value;
        widget.color = service.Element("xcolor").Value;
        widget.alerta = service.Element("xalert") != null ? service.Element("xalert").Value : null;
        services.Add(widget);
    }
    Items.Add(services)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T12:07:44.933

看起来我得到了我想要实现的目标，但仍然没有显示网格中的所有数据：

之前的解决方法：

```
Items = new ObservableCollection<WidgetCollectionItem>();

            foreach (XElement wid in document.Root.Elements("widget"))
            {
                WidgetCollectionItem widget = new WidgetCollectionItem();
                widget.nombreWidget = wid.Attribute("caption").Value;

                foreach (XElement service in wid.Elements("service"))
                {
                    ServiciosWidgetCollectionItem ser = new ServiciosWidgetCollectionItem();
                    widget.ItemsSer = new ObservableCollection<ServiciosWidgetCollectionItem>();

                    ser.nombreServicio = service.Attribute("caption").Value;
                    ser.valor = service.Element("xvalue").Value;
                    ser.color = service.Element("xcolor").Value;
                    ser.alerta = service.Element("xalert") != null ? service.Element("xalert").Value : null;

                    widget.ItemsSer.Add(ser);
                }
                Items.Add(widget);
            }

public class WidgetCollectionItem
{
    public string nombreWidget { get; set; }
    public ObservableCollection<ServiciosWidgetCollectionItem> ItemsSer { get; set; }
}

public class ServiciosWidgetCollectionItem
{
    public string nombreServicio { get; set; }
    public string valor { get; set; }
    public string color { get; set; }
    public string alerta { get; set; }
} 
```

我如何也进入数据网格 ObservableCollection？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T09:33:14.767

好主意有点简单，但仍然无法显示我想要的。我抓取了一个 xml 数据，这些数据希望它们显示在网格中

最终结果将是这样的：

名称小部件 1 名称服务 1

nombreWidget2 nombreServicio2 nombreServicio2 nombreServicio2

如果 nombreWidget 只有一项服务很好，但如果您有多个 nombreWidget nombreServicio，我无法在屏幕上很好地显示

我需要 ObservableCollection

```
public class WidgetCollectionItem
{
    public string nombreWidget { get; set; }
} 
```

包含一个 ObservableCollection

```
public class WidgetServiciosCollectionItem 
{
        public string nombreServicio { get; set; }
        public string valor { get; set; }
        public string color { get; set; }
        public string alerta { get; set; }
} 
```

# z3 - 我可以在 z3 中设置布尔变量的优先级吗？

> ID：14234826
> 
> 赞同：5
> 
> 时间：2013-01-09T12:04:49.640
> 
> 标签：z3

由于这个问题有点难以描述，我将用一个小例子来描述我的问题。假设有一个命题公式集，其元素是布尔变量 a、b 和 c。当使用 z3 得到这个公式集的真值赋值时，是否存在一些方法来设置变量的优先级？我的意思是如果优先级是a>b>c，那么在搜索过程中z3首先假设a为真，如果a不可能为真，则假设b为真，依此类推。换句话说，如果 z3 给出了一个真值赋值：not a,b,c 在上述优先级下，这意味着 a 不可能为真，因为 a 与 b 相比具有高优先级。希望我清楚地描述这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T16:03:55.663

在当前版本（v4.3.1）中没有简单的方法来做到这一点。我能看到的唯一方法是破解/修改 Z3 源代码 ( [http://z3.codeplex.com](http://z3.codeplex.com) )。我们同意设置优先级对于某些应用程序是一个有用的功能，但是也存在一些问题。

首先，Z3 在解决问题之前应用了几个转换（也称为预处理步骤）。创建和消除变量。因此，对于由 Z3 解决的实际问题（应用所有变换后生成的问题），原始问题的案例分割优先级可能没有意义。

一个戏剧性的例子是一个只包含位向量的公式。默认情况下，Z3 会将此公式简化为命题逻辑并调用命题 SAT 求解器。在这种减少中，*所有*的位向量变量都被消除了。

Z3 是求解器和预处理器的集合。默认情况下，Z3 会自动为用户选择求解器。其中一些求解器使用完全不同的算法。因此，提供的优先级可能对正在使用的求解器无用。

正如[GManNickG 所](https://stackoverflow.com/users/87234/gmannickg)指出的，可以为特定求解器设置相位选择策略。有关更多详细信息，请参阅他评论中提供的帖子。

# actionscript-3 - As3 - SWF 和 AIR 桌面应用程序之间的 LocalConnection

> ID：14234833
> 
> 赞同：2
> 
> 时间：2013-01-09T12:05:29.973
> 
> 标签：actionscript-3, air, localconnection

我需要将文本从嵌入式 SWF（Web 浏览器）发送到基于 AIR 的桌面应用程序。我做了[文档](http://help.adobe.com/de_DE/FlashPlatform/reference/actionscript/3/flash/net/LocalConnection.html)中解释的所有事情，但我无法建立连接。

有没有人看到我做错了什么或者可以指出一个可行的例子？

来自主权财富基金：

```
function startConnection(e:Event=null):void
{
var localConnection:LocalConnection 
localConnection = new LocalConnection(); 

localConnection.client = this; 
localConnection.allowDomain("app#com.example.desktop"); 

var textToSend = "Hello world! Source: http://www.foobar.com";
localConnection.send("app#com.example.desktop:connectionName", "methodName",textToSend); 
} 
```

从 AIR 桌面应用程序：

```
 function onBrowserInvoke (event:BrowserInvokeEvent):void{
    var localConnection:LocalConnection 
    localConnection = new LocalConnection(); 
    localConnection.client = this

    localConnection.allowDomain("example.com");
    localConnection.connect("connectionName");
    } 
```

谢谢你。乌里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T11:24:48.807

工作代码是：

```
AIR:
    var localConnection:LocalConnection = new LocalConnection();
    localConnection.send("_myConnection", "methodName", "Hello world! Source: http://www.foobar.com"); 
SWF:
    var localConnection:LocalConnection = new LocalConnection();
    localConnection.allowDomain("app#airtest"); //or use "*" wildcard to allow any domains and AIR applications
    localConnection.client = this;
    localConnection.connect("_myConne‌​ction"); 
```

`airtest`AIR 应用程序的应用程序 ID在哪里。使用`_`本地连接名称前的符号来支持不可预知的域名（它将在调试模式下和通过 http 工作）。

# symfony - 如何显示服务配置？

> ID：14234837
> 
> 赞同：1
> 
> 时间：2013-01-09T12:05:51.687
> 
> 标签：symfony, configuration, twig

Symfony2 中是否有显示所有服务（或选择的服务）配置的内置功能？例如，我想知道 Twig 是否打开了自动转义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:21:34.957

恕我直言，您只能使用

```
php app/console container:debug 
```

接下来，您需要检查构造函数和 yaml 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T13:23:39.827

不确定默认情况下是否存在此类命令，但您始终可以查看生成的已编译 XML 文件。它可能位于类似`app/cache/dev/appDevDebugProjectContainer.xml`.

如果你想让它方便，你可以编写一个命令来为你转储它。您可以使用[Symfony\Component\DependencyInjection\Container::getParameterBag()](http://api.symfony.com/2.1/Symfony/Component/DependencyInjection/Container.html)访问参数。

例如

```
$parameters = $this->getContainer()->getParameterBag()->all(); 
```

不要忘记让它扩展`ContainerAwareCommand`：

```
class MyCommand extends ContainerAwareCommand 
```

请注意，您要查找的参数可能不会出现在输出中，因为它可以使用**隐式**默认值。

最后，您还可以使用`config:dump-reference`以获取公开[语义配置的服务的默认配置](http://symfony.com/doc/current/cookbook/bundles/extension.html)。

例如

```
php app/console config:dump-reference twig 
```

# apache - .htaccess 重写规则更改动态 url

> ID：14234838
> 
> 赞同：0
> 
> 时间：2013-01-09T12:05:57.193
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我正在尝试使 URL 更适合我的网站以用于 SEO 目的。

当前页面显示如下：

```
SITE/[number]-[page name].html 
```

我想让页面以如下格式显示。

```
example 1.
SITE/[page name].html 
```

或者

```
example 2.
SITE/[page name]-[number].html 
```

（如果可能的话，我宁愿留下页码，如示例 1，但如果必须包含它，我希望它位于 url 的末尾，如上面的第二个示例。）

我在 .htaccess 文件中有以下规则。

```
RewriteRule ^([0-9]+)-(.*)$ site_page.php?page=$1 
```

我最大的问题是我尝试了很多方法来让重写来做我需要的事情。在重写方面，我是一个完全的新手。

我没有高兴地将重写更改为以下内容。

```
RewriteRule ^(.*)-([0-9]+)$ site_page.php?page=$1
RewriteRule ^(.*)-([0-9])$ site_page.php?page=$1
RewriteRule ^(.*+)-([0-9]+)$ site_page.php?page=$1
RewriteRule ^([.*]+)-([0-9]+)$ site_page.php?page=$1 
```

我尝试过的上述方法是保留页面ID号，我希望完全摆脱这些数字。

我在 setting.php 文件中有以下几行，用于控制网站如何创建相关链接。它会按照我的意愿显示它们。但是我收到 404 错误，因为我认为重写规则没有显示我期望它显示的内容。

```
// non seo url
$setup_url['normal']['resource']     = "$url_base/site_page.php?page=[number]"; 

// seo url
$setup_url['seo']['resource']    = "$url_base/[number]-[name].html"; 
```

我看过很多关于 mod 重写规则的文章，但似乎无处可去。任何帮助将不胜感激。

非常感谢。标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:33:10.447

似乎您忘记了`.html`规则中的扩展名。

```
RewriteRule ^(.+)-(\d+)\.html$ site_page.php?$1=$2 [L] 
```

# qt - Qt - 插槽完成后不要销毁线程

> ID：14234849
> 
> 赞同：1
> 
> 时间：2013-01-09T12:06:23.590
> 
> 标签：qt, qt4, qthread

有没有办法防止在插槽内创建的线程在插槽完成后被销毁？

```
 <widget.cpp>

    ...
    void Widget::<slot_name>()
    {
        ...
        ThreadTask Watcher; //ThreadTask is defined in header file
        QThread WatcherThread;
        Watcher.moveToThread(&WatcherThread);
        QObject::connect ...
        WatcherThread.start();
        ...
    } 
```

我知道我可以在插槽之外声明线程并仅从它开始，但问题是，如果再次触发相同的插槽，我想创建另一个线程。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T12:15:02.540

使用[动态分配](http://en.wikipedia.org/wiki/C_dynamic_memory_allocation)：

```
QThread* WatcherThread = new Qthread(); 
```

请注意，您**必须**在线程执行完成后将其删除，以避免内存泄漏。

如果您使用以下代码，Qt 可以在线程完成时自动删除线程：

```
connect(WatcherThread , SIGNAL(finished()),
    WatcherThread , SLOT(deleteLater())); 
```

# db2 - 如何在 DB2 中获取整数值的子字符串？如何在查询中使用

> ID：14234854
> 
> 赞同：1
> 
> 时间：2013-01-09T12:06:37.627
> 
> 标签：db2, mainframe

如何在 DB2 中获取整数的子字符串？

示例：1023123 必须作为 1023 给出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T14:16:50.557

看看[VARCHAR](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0000869.html)和[SUBSTR](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0000854.html)函数。你将使用这样的东西：

```
SUBSTR(VARCHAR(1023123), 1, 4) 
```

编辑：根据您的评论，您还需要使用这些： [CASE](http://publib.boulder.ibm.com/infocenter/db2luw/v8/topic/com.ibm.db2.udb.doc/admin/r0005646.htm)和[LENGTH](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/topic/com.ibm.db2.doc.sqlref/flen.htm#flen)。

# ios - 如何将uiimage保存在给定nsurl的目录中？

> ID：14234862
> 
> 赞同：0
> 
> 时间：2013-01-09T12:06:58.833
> 
> 标签：ios, uiimage, uiimagepickercontroller, nsdata, nsfilemanager

我已经使用 UIImagePickerController 从 ipad 中的照片库中获取 UIImage。现在我想将该图像保存在与我的应用程序关联并包含已添加图像的目录中。我也得到了目录的url。

例如：file://localhost/Users/administrator/Library/Application%20Support/iPhone%20Simulator/5.0/Applications/31816EF9-AE1E-40DF-93C4-C67A82E4B85B/Documents/7884/Images/

如何将uiimage保存在指定目录中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:19:40.440

使用此代码将其保存到您的文档目录中。

```
NSData *pngData = UIImagePNGRepresentation(image);
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);  
NSString *documentsPath = [paths objectAtIndex:0]; 
NSString *filePath = [documentsPath stringByAppendingPathComponent:@"image.png"]; 
[pngData writeToFile:filePath atomically:YES]; 
```

# functional-programming - “接口定义”中的“抽象”是什么意思？

> ID：14234868
> 
> 赞同：4
> 
> 时间：2013-01-09T12:07:35.423
> 
> 标签：functional-programming, ocaml

我完全不明白这`interface`东西在 OCaml 中是如何工作的。

让我们看一个例子：

![在此处输入图像描述](../Images/9fecc0cf7f5aed8f966111f5a5f595a4.png)

* * *

## 关于'a

那么**'a here是什么意思？**我的意思是我理解在描述功能时，`'a`意味着`arbitrary type`. 那么这里的意义是什么呢？这是什么意思`arbitrary set`？

另外，**为什么要在前面加上'a `set`？**

* * *

## 抽象的

在解释这个例子时，[Jason Hickey 的 Objective Caml 简介](http://www.cs.caltech.edu/courses/cs134/cs134b/book.pdf)说：

> 我们需要定义一个多态类型的集合'a set **abstractly**。也就是说，在接口中，我们将在不给出定义的情况下声明一个集合类型，防止程序的其他部分知道或依赖于我们选择的集合的特定表示。

从上面的陈述，我猜它的意思是`in interface definition, we should hide the implementation details`。但**隐藏了哪些细节？**

* * *

## 输入'一个集合='一个列表

在实现文件中，它说`type 'a set = 'a list`.

**这有什么作用呢？**

这是什么意思`this set only takes a list`？如果确实是这个意思，**是否有必要在接口文件中告诉这个**，因为这个用户`set`应该知道它只需要列表，对吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T12:34:52.680

> 那么'a here是什么意思？

这就像函数的参数多态性（在 Java 中称为泛型），但对于类型。在此代码集中，哪些存储 int 将具有 type `int set`、 strings ---`string set`等。 'a 位于前面，因为它是常见的 OCaml 语法。在修改后的语法中，类型变量写在类型名之后：like`list int`或`set list int`. 有关不同类型多态性的更多信息，我可以向您推荐一本书`Types at programming languages`，第五部分：多态性。如果您了解函数的参数多态性，我认为增强您对类型的了解并不难。

> 隐藏了哪些细节？

在您的 ML 文件中，类型`'a set`定义为元素列表。要搜索列表中的某个元素，必须遍历列表并调用`(=)`每个元素（这是函数的`List.mem`工作方式）。AFAIR 在 OCaml 中，stdlib 集合被实现为平衡树，并且存储在集合中的值应该具有函数`compare: t -> t -> int`，其中存储在集合`t`中的元素的类型。但是集合可以有不同的定义，如果你只看 .mli 中的抽象类型，那么你只能猜测它是如何在 .ml 文件中实现的。

确实，在这个定义中，类型`'a list`已经被用来实现 type ，但是从接口文件中，这个信息是不可见的——隐藏的部分是type 真的是 a`'a set`的事实。模块的实现方式，以及对外部世界可用的信息的选择，使得程序可以在不知道它是如何制作的情况下使用该类型。`set``list``set`

这是软件设计的一个重要特征，因为它让开发人员无需更改使用它的代码即可更改该模块的实现。使类型抽象强制分离：如果您尝试在模块外部使用 a`list`作为 a ，您将收到类型错误。`set`

> 输入'一个集合='一个列表

AFAIR，这一行引入了一个“类型同义词”（或别名）说：这里和下面的类型`set`是相同的`list`，你可以使用`set`期望的函数，`list`反之亦然。

当你看到`'a set`你应该明白它只是一组东西，当你把 a`string`放到 set 时，它就会是 a `string set`。如果你看到`'a set`你不能说存储或将存储在这个集合中，但如果你看到`string set`，你可以。上面的书中也提到了类型同义词。

附言

> 所以你的意思是 type 'a set = 'a list 表示该集合期望列表作为参数？

不，它没有。您只需在此行中添加新的类型别名。它不会缩小可以替换为 'a 类型变量的类型的数量。如果你写

```
# type 'a set = 'a list;;
type 'a set = 'a list
# let create x : _ set = [x];;
val create : 'a -> 'a set = <fun> 
```

进而

```
List.map ((+)1) (create 2);; 
```

编译器会将 of 的类型推断`create 2`为 an `int set`（因为类型的参数使用了一个值`int`，并且该函数的返回类型是），然后它会查看其类型别名（同义词）表以及何时理解该类型与类型相同，它将继续类型推断的过程。`'a``create``'a set``set``list`

您应该明白，在创建新同义词时您应该编写正确数量的类型变量，即`type 'a new_t = ('a*'b) list`对我和编译器都没有任何意义。左边应该有至少和右边一样多的类型变量： `type ('a, 'b) new_t = ('a * 'b) list`例如，有效。

# backbone.js - 试驾 Backbone 视图事件

> ID：14234870
> 
> 赞同：0
> 
> 时间：2013-01-09T12:07:39.640
> 
> 标签：backbone.js, jasmine

我正在尝试使用 Jasmine 测试驱动视图事件，问题可能最好通过代码来解释。

视图如下所示：

```
App.testView = Backbone.View.extend({
  events: { 'click .overlay': 'myEvent' },
  myEvent: function(e) {
    console.log('hello world')
  } 
```

测试看起来像：

```
describe('myEvent', function() {
  it('should do something', function() {
    var view = new App.testView();
    view.myEvent();
    // assertion will follow
  });
}); 
```

问题是 view.myEvent 方法从未被调用（没有任何日志记录到控制台）。我试图避免从 DOM 触发。有没有人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T13:06:23.080

*（就像我在问题中评论的那样，您的代码看起来不错并且应该可以工作。您的问题不在您发布的代码中。如果您可以扩展您的代码示例并提供更多信息，我们可以再看看它。下面是更多关于测试 Backbone 视图的一般建议。）*

像你一样调用事件处理函数是一种合法的测试策略，但它有几个缺点。

1.  它不会测试事件是否正确连接。您正在测试的是回调执行了它应该做的事情，但它没有测试当您的用户与页面交互时该操作是否被实际触发。
2.  如果您的事件处理程序需要引用`event`参数或测试将不起作用。

我更喜欢从事件开始测试我的观点：

```
var view = new View().render();
view.$('.overlay').click();

expect(...).toEqual(...); 
```

就像您说的那样，通常不建议在测试中操作 DOM，因此这种测试视图的方式要求`view.render`不将任何内容附加到 DOM。

实现这一点的最佳方法是将 DOM 操作留给负责初始化视图的代码。如果您没有`el`为视图设置属性（无论是在`View.extend`定义中还是在视图构造函数中），Backbone 将创建一个新的、分离的 DOM 节点作为`view.el`. 这个元素就像一个附加的节点一样工作——你可以操纵它的内容并在它上面触发事件。

所以，而不是...

```
View.extend({el: '#container'}); 
```

...或者...

```
new View({el:'#container'}); 
```

...您应该按如下方式初始化您的视图：

```
var view = new View();
$("#container").html(view.render().el); 
```

像这样定义视图有很多好处：

1.  完全启用测试视图而不将它们附加到 DOM。
2.  视图变得可重用，您可以创建多个实例并将它们呈现给不同的元素。
3.  如果您的`render`方法执行一些复杂的 DOM 操作，那么在分离节点上执行它会更快。
4.  从责任的角度来看，您可以争辩说视图不应该知道它的放置位置，就像模型不应该知道它应该添加到哪个集合一样。这加强了视图组合的更好设计。

恕我直言，这种视图渲染模式是一种通用的最佳实践，而不仅仅是与测试相关的特殊情况。

# android - 我可以在android模拟器中使用ping命令吗

> ID：14234873
> 
> 赞同：5
> 
> 时间：2013-01-09T12:07:55.530
> 
> 标签：android, android-emulator, emulation

我遇到了一个非常奇怪的问题：在我的主机上，我使用 dhcp。而我的模拟器4.0.3可以通过browswer.like登录网络：

![在此处输入图像描述](../Images/a9202e881de4835e687c335ef4ea65c9.png)

但是，当我使用 adb shell 连接到这个模拟器并尝试 ping www.baidu.com 时，它会在那里循环，例如：

![在此处输入图像描述](../Images/3232e2f6b087731cad6d3861616d6c3b.png)

有什么想法吗？thx

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-01T05:35:01.847

似乎 Qemu 用户网络模式（android 模拟器的默认设置）不支持 ICMP 协议（​​ping）。因此，您无法在不更改网络设置的情况下在 android 模拟器中 ping 主机。

[http://wiki.qemu.org/Documentation/Networking#User_Networking_.28SLIRP.29](http://wiki.qemu.org/Documentation/Networking#User_Networking_.28SLIRP.29)

如果您只想查看是否可以访问某个主机，您可以尝试使用 netcat (nc) 连接到您知道它已打开的端口。例如检查是否可以访问www.baidu.com，可以尝试连接80端口（HTTP）

`nc -v www.baidu.com 80`

如果连接成功，您将看到这样的消息

`Connection to www.baidu.com 80 port [tcp/www] succeeded!`

如果您真的希望能够使用 ping，可以按照此博客文章中的步骤进行操作。抱歉，说明仅适用于 linux。但它可能会让您了解如何在 Windows 中执行此操作。

[http://emulatorforandroid.blogspot.jp/2013/04/enabling-ping-and-icmp-on-android.html](http://emulatorforandroid.blogspot.jp/2013/04/enabling-ping-and-icmp-on-android.html)

# jquery - slickgrid onAddNewRow

> ID：14234874
> 
> 赞同：1
> 
> 时间：2013-01-09T12:07:58.837
> 
> 标签：jquery, slickgrid

我可以使用 slickgrid 将数据插入数据库，但只能在最后一行完成。

是否可以在任何行添加行？

例如：我想通过使用将空行放在第 3 行

```
grid.getData().splice(varCurrentRowNumber - 1, 0, {}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-24T01:25:34.823

你走在正确的轨道上，但你应该使用[dataView](https://github.com/mleibman/SlickGrid/wiki/DataView#updating-data)它让这些事情变得更容易。

```
dataView.insertItem(varCurrentRowNumber - 1, {'id': 'gotta put something here'}); 
```

# javascript - 以http格式放置诺基亚地图的搜索api？

> ID：14234881
> 
> 赞同：1
> 
> 时间：2013-01-09T12:08:19.897
> 
> 标签：javascript, here-api

我需要一个用于 nokia maps 地点搜索的 api，其中包含查询和地点词。

API 应为 http(url) 格式。

像这样：

[http://api.nokia.com/query=hotels/location=lat,long](http://api.nokia.com/query=hotels/location=lat,long)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T13:57:33.083

看起来您可能正在使用 RESTful Places API。最新的文档可以在这里找到：http: [//developer.here.net/places](http://developer.here.net/places)

如果您在寻找酒店，您可以根据此处的示例进行查询：

[http://developer.here.net/apiexplorer/examples/api-for-rest/places-search/places-search-by-category.html](http://developer.here.net/apiexplorer/examples/api-for-rest/places-search/places-search-by-category.html)

以下 URL 将返回柏林市中心的一组酒店（大约 52.51N，13.4E）

[http://demo.places.nlp.nokia.com/places/v1/discover/explore?cat=hotel&at=52.51,13.4&app_id=_peU-uCkp-j8ovkzFGNU&app_code=gBoUkAMoxoqIWfxWA5DuMQ&accept=application/json](http://demo.places.nlp.nokia.com/places/v1/discover/explore?cat=hotel&at=52.51,13.4&app_id=_peU-uCkp-j8ovkzFGNU&app_code=gBoUkAMoxoqIWfxWA5DuMQ&accept=application/json)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T08:57:31.857

请参阅此链接[http://demo.places.nlp.nokia.com/places/v1/discover/explore?at=19.1273%2C72.8515&tf=plain&size=10&app_id=7vivA7jIFlZh9WX_B0cd&app_code=6ptUAobtF0RFJ9CkfX7geg&Geolocation=geo%3A19.0254%27C %3Bcgen%3Dmap](http://demo.places.nlp.nokia.com/places/v1/discover/explore?at=19.1273%2C72.8515&tf=plain&size=10&app_id=7vivA7jIFlZh9WX_B0cd&app_code=6ptUAobtF0RFJ9CkfX7geg&Geolocation=geo%3A19.0254%2C72.8401%3Bcgen%3Dmap)。您可以在左侧面板上自定义搜索

# ruby-on-rails - Rails 验证中的属性作为局部变量与实例变量

> ID：14234883
> 
> 赞同：3
> 
> 时间：2013-01-09T12:08:23.783
> 
> 标签：ruby-on-rails, validation, attributes, instance-variables, local-variables

在自定义验证方法中，为什么属性作为局部变量传递，而不是作为实例变量可访问？

我期望使用`@title`而不是`title`在下面的自定义验证中，但`@title`在`nil`下面的代码中。`title`包含实际数据。

```
 attr_accessible :title
    validate :do_check_title

    def do_check_title
      title =~ /^Alice in/ || errors.add(:title, "Not Alice in Wonderland")
    end 
```

查看 active_record/core.rb

```
 def initialize(attributes = nil)
     ...
     assign_attributes(attributes) if attributes
     ...
   end 
```

然后在 active_record/attribute_assignment.rb

```
 def _assign_attribute(k, v)
     public_send("#{k}=", v) 
```

所以我想，这些属性应该可以作为验证函数中的实例变量使用。

他们为什么`nil`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T12:53:10.480

如果您从验证或其他实例方法访问这些并不重要。你可以从控制台看到发生了什么（撬）：

```
u = User.first
show-method u.first_name= 
```

这给了你这样的东西：

```
generated_attribute_methods.module_eval("def #{attr_name}=(new_value); write_attribute('#{attr_name}', new_value); end", __FILE__, __LINE__) 
```

现在，如果您查看该`write_attribute`方法，您会发现它删除了属性缓存等，然后分配给`attributes`它，它只是一个哈希。

```
u.attributes 
```

所以从现在开始，你可以使用这个来代替无聊`u.first_name = "foo"`：

```
u.send :write_attribute, "first_name", "foo" 
```

它会做同样的事情（3.2.10）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:49:00.183

ActiveRecord 将值存储在`attributes`散列中而不是实例变量中。当您访问它们时，我会即时生成访问器（getter/setter）方法。

Rails 需要支持实体的生命周期，并将此代码包装在生成的方法中。这是必需的，以便它可以支持即。`dirty?`和`changed?`方法。

接下来是关联，它们是通过代理处理的，因此您也需要使用方法调用它们。

实例变量可以被视为易失性数据。它们对持久层是透明的。

# android - android中的getContent（）将输出作为MimeMultiPart，但我实际上想要电子邮件正文内容

> ID：14234887
> 
> 赞同：1
> 
> 时间：2013-01-09T12:08:40.153
> 
> 标签：android, imap, jakarta-mail, mime-types

我正在开发一个 android 应用程序，我必须在其中获取电子邮件。为此，我在 java 中使用了 IMAP 服务，我正在获取文件夹、电子邮件 ID 等，但不是在 EditText 小部件中的电子邮件正文部分，我得到这样的一行 -`javax.mail.internet.MimeMultiPart@45eb3663`

那么我们如何解决这个问题，并且可以按原样获取电子邮件正文部分（它是如何发送的）我使用的代码如下，

```
bodyPart=message[arg2].getContent().toString(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:27:22.140

邮件可以是纯文本、html 或多部分（文本 + 附件）、多部分替代（文本 + html）等。您必须遍历每个 BodyPart 以了解它的类型，然后相应地获取内容。这个 javamail FAQ[条目](http://www.oracle.com/technetwork/java/javamail/faq/index.html#mainbody)可以帮助你。[也可以在这里](https://stackoverflow.com/questions/12955010/reading-mails-sent-from-gmail)
看到我的一个类似问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:17:24.030

如果电子邮件有多个部分（例如 HTML 和纯文本部分或附件），您将获得[javax.mail.internet.MimeMultiPart](http://docs.oracle.com/javaee/6/api/javax/mail/internet/MimeMultipart.html)。

当您查看 API 文档时，您会发现您可以使用它`getCount()`来获取部件数量并`getBodyPart(int index)`获取特定部件。

您必须找出您感兴趣的部分。以下代码示例获取所有部分并打印内容：

```
MimeMultiPart multiPart = message[arg2].getContent();
for(int i = 0; i < multiPart.getCount(); i++) {
    Object content = multiPart.getBodyPart(i).getContent();
    System.out.println(content);
} 
```

希望这可以帮助您了解如何接收电子邮件以及如何在 Java 中使用它。确切的用途取决于您的应用程序，您需要自己弄清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T15:32:06.160

如果您使用 JavaMail，则代码段可能会更改为：

```
String contentType = message.getContentType().toLowerCase(Locale.Canada);
if (contentType.startsWith("multipart/alternative")) {

    // here is data handler part
    DataHandler dataHandler = message.getDataHandler();
    DataSource dataSource = dataHandler.getDataSource();
    if (dataSource instanceof IMAPMultipartDataSource) {
        IMAPMultipartDataSource imapDataSource = (IMAPMultipartDataSource) dataSource;

        int count = imapDataSource.getCount();
                ...
        }
} 
```

这个想法是使用DataHandler，因为消息是IMAPMessage的类型，而不是MultiPart的类型。

# progress-4gl - FOR LAST - 查询，给出错误的结果

> ID：14234893
> 
> 赞同：3
> 
> 时间：2013-01-09T12:08:57.417
> 
> 标签：progress-4gl, openedge

我正在寻找使用以下查询来查找最后一个投标 ID。

```
FOR EACH tender-table NO-LOCK WHERE tender-table.kco = 1 BY tender-table.id:
DISPLAY  tender-table.id.
END. 
```

此查询查看所有投标 id 并按升序返回所有 id 的所有结果。我得到的结果是

1,035 1.036 ...... 1,060 1,061 1,062 1,063 1,064 1,065 1,066

```
FOR LAST tender-table NO-LOCK WHERE tender-table.kco = 1 BY tender-table.id:
DISPLAY  tender-table.id.
END. 
```

但是，当我使用此查询查找最后一个 id 时，我得到了结果，

1,061

当我应该看到结果 1,066 时。谁能建议为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T12:56:24.603

FOR LAST 是一个非常具有欺骗性的陈述。（FOR FIRST 也是如此。）它的行为并不直观。BY 语句未指定排序顺序。您将根据使用的索引获得最后一条记录，并且不会进行排序。当 BY 引用未索引的字段（或未按实际使用的索引顺序排序的字段）或 WHERE 子句明显未按照您希望的顺序映射到索引时，您将选择神秘记录.

就个人而言，我强烈建议您忘记使用 FOR FIRST & FOR LAST。一个更好的选择，它总是按预期排序，将是：

```
FOR EACH tableName WHERE someCriteria BREAK BY sortOrder:
  LEAVE.
END.
DISPLAY whatEver. 
```

（添加“DESCENDING”以从 FIRST 翻转到 LAST...）

以防万一有人需要说服——用“体育”数据库试试这个：

```
for first customer no-lock by discount:
  display name discount.
end. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:13:59.123

抱歉，我已经设法弄清楚 1,066 个值没有招标表.kco = 1。这解决了问题。谢谢你的时间。

# c# - 服务器端的对话框参数

> ID：14234894
> 
> 赞同：0
> 
> 时间：2013-01-09T12:08:59.833
> 
> 标签：c#, asp.net

我在`showmodaldailoge()`函数中发送父窗口的引用

```
window.showmodaldialog("mypage.aspx", window, winsizeattributes) 
```

因为我不想使用查询字符串或会话变量。现在我可以在客户端访问父窗口的变量了`mypage.aspx`。如何在`mypage.aspx`ie in的服务器端访问父窗口变量`Page_Load()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:24:05.283

*   create a client side html text box as hidden with a runat="server" and an id attribute,

*   insert a value into the hidden box from a client side jquery function.

*   read the value server side on postback with the .FindControl("yourId") method.

    Note: Use a new hidden field for each variable you wish to recall.

as long as your modal container exists on the same page as your hidden fields, you can read the values from within the modal dialog context.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:47:06.230

> 因为我不想使用查询字符串或会话变量。.如何访问 mypage.aspx 服务器端的父窗口变量，即在 Page_Load() 中？

如果不使用查询字符串或会话变量，您将无法做到这一点。可能的选择是在第二个参数中将所需的变量传递给您的模态窗口（`window`据我所知，您已经传递到那里，以便访问父窗口，但您可以避免这种情况 - 有一种方法`window.opener`应该指向父窗口客户端），获取这些值并使用 JS 以表单形式提交它们。完成后，您将能够`Request.Form["some_key"]`在 mypage.aspx 后面的代码中执行类似操作。但这实际上与查询参数相同，但更复杂。

这里的问题是模式窗口将产生另一个对 asp.net 的请求，由于 web 的无状态性质，它对父窗口一无所知。基本上，父窗口的变量会从服务器上的内存中删除，只是父窗口请求完成。看一下 asp.net 页面生命周期（例如[Here](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)）。在不同请求之间共享数据的常用方法是表单、查询参数、会话和 cookie。

# jquery - 当我使用 jQuery 加载时，只有表被加载，而不是它的内容

> ID：14234897
> 
> 赞同：0
> 
> 时间：2013-01-09T12:09:17.993
> 
> 标签：jquery, jsp, jquery-load

LandingPage.jsp 有一个表，其中有一张地图。是中的`content`div `id`。`home.jsp`

当我说时，`$("#content").load("LandingPage.jsp");`只有表格边框被加载，而不是地图或其内容。有没有人经历过这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T06:14:34.700

我通过包含地图在浏览器上呈现所需的“脚本”来解决它。

```
<script type="text/javascript" src="https://serverapi.arcgisonline.com/jsapi/arcgis/?v=3.2"></script> 
```

# ant - Sonar 中的 JaCoCo 不包含所有源文件

> ID：14234902
> 
> 赞同：1
> 
> 时间：2013-01-09T12:09:27.037
> 
> 标签：ant, sonarqube, jacoco

我使用 JaCoCo 在 Java 语言的 Sonar 中进行 IT 覆盖。报告了一些 IT 代码覆盖率，并且报告的结果似乎是合理的。但是，我注意到并非所有源代码都包含在 IT 覆盖率分析中。查看“组件”视图，许多 Java 包显示规则 %、cobertura 单元测试覆盖率 %，但没有显示 IT 覆盖率。我没有包含或排除任何文件，因此如果没有涵盖此包中的代码，我希望 IT 覆盖率显示 0%？我知道在一组文件上应该有一些 %，但 Sonar 没有显示任何内容（再次显示，规则 % 和 cobertura % ）。

我将尝试显式包含一些类文件，但我仍然对为什么 JaCoCo 分析不包含所有源感到困惑。这些文件被导入到 Sonar 中，因为违反规则的行为可以很好地处理它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:26:07.087

我猜如果您在某些特定文件/包上没有看到任何结果，这可能意味着没有 IT 涵盖您源代码的这些部分。

# asp.net - 如何正确更改页面的母版页？

> ID：14234905
> 
> 赞同：0
> 
> 时间：2013-01-09T12:09:37.587
> 
> 标签：asp.net, delphi-prism, oxygene

我的 ASP.NET 应用程序中有两个母版页。一个用于常规使用，另一个用于打印。我使用会话参数来查看应用程序当前是否处于打印模式：

```
method Global.Application_PreRequestHandlerExecute(src: System.Object; e: EventArgs);
begin
  var p: System.Web.UI.Page := System.Web.UI.Page(self.Context.Handler);
  if p <> nil then begin
    p.PreInit += new EventHandler(page_PreInit)
  end
end;

method Global.page_PreInit(sender: System.Object; e: EventArgs);
begin
  var p: System.Web.UI.Page := System.Web.UI.Page(self.Context.Handler);
  if p <> nil then
    if p.Master <> nil then
    begin
      if Session['P'].ToString = '1' then
        p.MasterPageFile := '~/Print.Master'
      else
        p.MasterPageFile := '~/Site.Master'; 
    end;
end; 
```

我的*普通*页面上有一个按钮设置`Session['P']`为`'1'`，而我的*打印*母版页上有另一个按钮设置`Session['P']`为`'0'`。现在，我的问题是，在我更改了代码中的会话参数后，页面是使用过时的母版页呈现的，而不是当前的。用户必须按 F5 才能看到正确的页面。似乎我的`page_PreInit()`事件之前被触发了`buttonClick()`。那么，我能做些什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:14:46.370

Page_PreInit 确实在任何单击事件处理程序之前运行。

您是否考虑过使用面板或样式表在打印模式下呈现您的页面？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T11:52:16.513

我最终`Request.Params['__EVENTTARGET']`在我的`Page_PreInit`事件中使用来确定单击的控件是否是负责在*正常*模式和*打印*模式之间切换的按钮。我的代码如下所示：

```
S := Request.Params['__EVENTTARGET'];
if S.Length > 0 then
  S := S.Substring(S.IndexOf('$') + 1);
if S = 'lbPrint' then
  Session['P'] := '1'
else if S = 'lbNormal' then
  Session['P'] := '0'; 
```

# bash - 使用转换表替换大表中的值

> ID：14234907
> 
> 赞同：8
> 
> 时间：2013-01-09T12:09:46.950
> 
> 标签：bash, unix, awk, sed, large-data

我正在尝试替换以空格分隔的大型文本文件中的值，但找不到针对此特定问题的合适答案：

假设我有一个文件“OLD_FILE”，其中包含一个标题和大约 200 万行：

```
COL1 COL2 COL3 COL4 COL5
rs10 7 92221824 C A 
rs1000000 12 125456933 G A 
rs10000010 4 21227772 T C 
rs10000012 4 1347325 G C 
rs10000013 4 36901464 C A 
rs10000017 4 84997149 T C 
rs1000002 3 185118462 T C 
rs10000023 4 95952929 T G 
... 
```

我想使用一个大的（280 万行）转换表将每一行的第一个值替换为相应的值。在这个转换表中，第一列列出了我想要替换的值，第二列列出了相应的新值：

```
COL1_b36       COL2_b37
rs10    7_92383888
rs1000000       12_126890980
rs10000010      4_21618674
rs10000012      4_1357325
rs10000013      4_37225069
rs10000017      4_84778125
rs1000002       3_183635768
rs10000023      4_95733906
... 
```

所需的输出将是一个文件，其中第一列中的所有值都已根据转换表进行了更改：

```
COL1 COL2 COL3 COL4 COL5
7_92383888 7 92221824 C A 
12_126890980 12 125456933 G A 
4_21618674 4 21227772 T C 
4_1357325 4 1347325 G C 
4_37225069 4 36901464 C A 
4_84778125 4 84997149 T C 
3_183635768 3 185118462 T C 
4_95733906 4 95952929 T G 
... 
```

附加信息：

*   性能是一个问题（以下命令大约需要一年时间：

    一边读ab；做 sed -i "s/\b$a\b/$b/g" OLD_FILE ; 完成 < CONVERSION_TABLE

*   替换前需要完全匹配
*   并非 OLD_FILE 中的每个值都可以在转换表中找到...
*   ...但是每个可以替换的值都可以在转换表中找到。

很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-09T12:20:59.063

这是一种使用方法`awk`：

```
awk 'NR==1 { next } FNR==NR { a[$1]=$2; next } $1 in a { $1=a[$1] }1' TABLE OLD_FILE 
```

结果：

```
COL1 COL2 COL3 COL4 COL5
7_92383888 7 92221824 C A
12_126890980 12 125456933 G A
4_21618674 4 21227772 T C
4_1357325 4 1347325 G C
4_37225069 4 36901464 C A
4_84778125 4 84997149 T C
3_183635768 3 185118462 T C
4_95733906 4 95952929 T G 
```

解释，按出现顺序：

```
NR==1 { next }            # simply skip processing the first line (header) of
                          # the first file in the arguments list (TABLE)

FNR==NR { ... }           # This is a construct that only returns true for the
                          # first file in the arguments list (TABLE)

a[$1]=$2                  # So when we loop through the TABLE file, we add the
                          # column one to an associative array, and we assign
                          # this key the value of column two

next                      # This simply skips processing the remainder of the
                          # code by forcing awk to read the next line of input

$1 in a { ... }           # Now when awk has finished processing the TABLE file,
                          # it will begin reading the second file in the
                          # arguments list which is OLD_FILE. So this construct
                          # is a condition that returns true literally if column
                          # one exists in the array

$1=a[$1]                  # re-assign column one's value to be the value held
                          # in the array

1                         # The 1 on the end simply enables default printing. It
                          # would be like saying: $1 in a { $1=a[$1]; print $0 }' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T12:33:56.260

这可能对您有用（GNU sed）：

```
sed -r '1d;s|(\S+)\s*(\S+).*|/^\1\\>/s//\2/;t|' table | sed -f - file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T12:28:10.487

您可以使用加入：

```
join -o '2.2 1.2 1.3 1.4 1.5' <(tail -n+2 file1 | sort) <(tail -n+2 file2 | sort) 
```

这会删除两个文件的标题，您可以使用`head -n1 file1`.

输出：

```
12_126890980 12 125456933 G A
4_21618674 4 21227772 T C
4_1357325 4 1347325 G C
4_37225069 4 36901464 C A
4_84778125 4 84997149 T C
3_183635768 3 185118462 T C
4_95733906 4 95952929 T G
7_92383888 7 92221824 C A 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T12:30:02.793

另一种方式`join`。假设文件在第一列排序：

```
head -1 OLD_FILE
join <(tail -n+2 CONVERSION_TABLE) <(tail -n+2 OLD_FILE) | cut -f 2-6 -d' ' 
```

但是对于这种大小的数据，您应该考虑使用数据库引擎。

# php - 在 CodeIgniter 中设置一个完整的站点页面

> ID：14234914
> 
> 赞同：-1
> 
> 时间：2013-01-09T12:10:07.370
> 
> 标签：php, codeigniter, templates, page-layout

我刚开始使用 CodeIgniter，但我不太清楚如何整理我的观点。

我制作了一个示例布局来解释我的问题，并附在这篇文章中。

我有一个**菜单框**、一个**用户系统**框和一个**内容**框。

在程序 PHP 中，我将有一个名为*index.php*的页面，其中包含来自*GET*的参数，包括**内容**。**用户系统**将只包含在框内的*index.php*文件中，**菜单**也是如此。

如何使用 MVC 和 CodeIgniter 以正确的方式做到这一点？

![在此处输入图像描述](../Images/b728055c32219589ef6cdcdd3312543e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:18:50.547

尝试[CodeIgniter 的最简单模板库](http://maestric.com/doc/php/codeigniter_template)。它允许您执行您在 php 示例中执行的操作。创建一个“主”视图并使用您的控制器将您的内容引导到它。您可以为正文、内容、侧边栏等创建“子主题”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:29:39.530

希望你已经在你的机器上配置了 codeigniter。

现在在控制器文件夹中创建一个文件，例如：D:\wamp\www\demoProject\application\controllers\homePage.php

在主页控制器中添加以下代码

```
 <?php

    class HomePage extends CI_Controller {

        var $controller = "homePage";        
        var $viewContent = array();              

        function list_homePage() { 
```

// 加载视图页面 // 加载标题视图页面

```
 $this->load->view('xome/header'); 
```

// 加载主视图页面

```
 $this->load->view('xome/list_' . $this->controller, 
            $this->viewContent); 
```

// 加载页脚视图页面

```
 $this->load->view('xome/footer');
        }
}
?> 
```

之后在视图文件夹中创建一个文件，例如：D:\wamp\www\demoProject\application\views\list_homePage.php

将您的 html 代码放入视图文件中。

希望对你有帮助... ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:30:02.720

对于菜单，我会创建一个这样的模型：

```
class mMenu extends CI_Model{

 function mMenu(){
  parent::__construct();
 }

 function home(){
  $menu = array(
    'main_menu' => '<ul>
                      <li>Menu Link 1</li>
                      <li>Menu Link 2</li>
                      <li>Menu Link 3</li>
                    </ul>'
  );
  return $menu;
 }
} 
```

在控制器中，说家：

```
function home(){
 $this->load->model('mMenu');
 $options['menu'] = $this->mMenu->home();

 $this->load->view('home_view', $options);
} 
```

在视图文件中，我需要加载菜单的任何地方：

```
echo $menu['main_menu']; 
```

您应该执行类似的操作来控制用户的状态并在用户未登录时返回表单，如果用户已登录则返回其他任何内容。

# django - Django - 保存新对象时如何获取 self.id？

> ID：14234917
> 
> 赞同：42
> 
> 时间：2013-01-09T12:10:13.170
> 
> 标签：django, django-models, django-mptt

我的一个模型有问题。我正在上传一张图片，我想存储 id（数据库表中的 pk），但我需要知道 Django 何时可以访问 `self.id`.

**模型.py**

```
class BicycleAdItemKind(MPTTModel):
    def url(self, filename):
        pdb.set_trace()

        url = "MultimediaData/HelpAdImages/ItemKind/%s/%s" % (self.id, filename)
        return url

    def item_kind_image(self):
        return '<img align="middle" src="/media/%s" height="60px" />' % self.image
    item_kind_image.allow_tags = True     

    # Bicicleta completa, Componentes para bicicleta, Acessorios para ciclista
    n_item_kind      = models.CharField(max_length=50) 
    parent           = TreeForeignKey('self', null=True,
                                      blank=True, related_name='children')
    description      = models.TextField(null=True, blank=True)
    image            = models.ImageField(upload_to=url, null=True, blank=True)
    date_inserted    = models.DateTimeField(auto_now_add=True)
    date_last_update = models.DateTimeField(auto_now=True)

    def __unicode__(self):
        return self.n_item_kind

    class MPTTMeta:
        order_insertion_by = ['n_item_kind'] 
```

问题出在`url()`方法上；我只能在更新对象时得到，在创建新对象时`self.id`我没有得到。`self.id`如何修改此模型以便`self.id`在创建新对象时获得？

使用当前代码，当我创建一个新对象时，我最终会得到一个 url，如：

```
MultimediaData/HelpAdImages/ItemKind/None/somefile.jpg 
```

我需要有类似的东西：

```
MultimediaData/HelpAdImages/ItemKind/35/somefile.jpg 
```

有什么线索吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-09T13:36:58.313

如果是新对象，需要先保存，再访问self.id，因为

```
"There's no way to tell what the value of an ID will be before you call save(), 
 because that value is calculated by your database, not by Django." 
```

查看 django 的文档[https://docs.djangoproject.com/en/dev/ref/models/instances/](https://docs.djangoproject.com/en/dev/ref/models/instances/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T14:01:46.517

您可能需要将此文件/实例保存两次：

您可以在模型上使用 post_save 信号来查找 created 标志，并重新保存更新 url 的实例（并根据需要移动/重命名文件），因为实例现在将具有一个 ID。但是，请确保您仅以创建为条件执行此操作，否则您将不断循环保存：保存会启动一个保存后信号，它会执行保存，它会启动一个保存后信号......

见[https://docs.djangoproject.com/en/dev/ref/signals/#post-save](https://docs.djangoproject.com/en/dev/ref/signals/#post-save)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-02-19T03:38:09.910

实际上有一种方法可以解决这个问题。

```
class Test(models.Model):
    id = models.AutoField(primary_key=True)
    name = models.CharField(max_length=150)

    def __str__(self):
        return self.name

    def update_model(self):
        # You now have both access to self.id and self.name

        test_id = Test.objects.get(name=self.name).id
        print(test_id)

        # Do some stuff, update your model...
        Test.objects.filter(id=test_id).update(name='New Name')

    def save(self, *args, **kwargs):
        super(Test, self).save(*args, **kwargs)
        self.update_model() # Call the function 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-27T18:26:19.713

注意：您需要`models.AutoField(primary_key=True)`设置属性，否则数据库将使用新的 id 更新，但 Django 将无法识别它。

```
models.AutoField(primary_key=True) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-25T18:34:43.347

我知道这已经过时了，但是对于将来偶然发现此问题的任何人，这实际上是您现在在 Django 中的操作方式。

```
def url(instance, filename):
        pdb.set_trace()

        url = "MultimediaData/HelpAdImages/ItemKind/%s/%s" % (instance.id, filename)
        return url 
```

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2015-05-08T09:53:39.027

```
 q = Order.objects.values_list('id', flat=True).order_by('-id')[:1]
            if len(q):
                self.number = str(self.id) if self.id else str(int(q.get()) + 1)
            else:
                self.number = 1 
```

# ios - 我如何禁用本机相机按钮？

> ID：14234920
> 
> 赞同：0
> 
> 时间：2013-01-09T12:10:24.313
> 
> 标签：ios, objective-c, ios5, ios6, camera

我需要禁用按钮，当我进入本机相机时，如肖像，当我像风景一样转动时，我需要再次启用按钮。我该怎么办？在IOS中。

非常感谢。

亲切的问候。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-09T13:25:16.253

它可能比禁用按钮更容易（这可能会让用户感到困惑），只是在打开相机视图时将其旋转为横向，并防止任何旋转到纵向。你也有几个选择，这可能会使开发更容易。

# telerik - 动态获取所有 radcombobox 客户端 ID

> ID：14234929
> 
> 赞同：0
> 
> 时间：2013-01-09T12:11:11.853
> 
> 标签：telerik, radcombobox

在 Telerik Control 中，如何获取 radcombobox id？

例如，下面的代码获取 RadCombox1 Client ID 的值。**如果我的页面（sample.aspx）中有5个radcomboboxes**，如何动态获取对应的id ............

```
 {
    var combo = $find("<%= RadComboBox1.ClientID %>");
    } 
```

提前致谢，
Ganesan A

## 添加更多：

感谢您的快速回复。**我在c#**中使用 Telerik Control 。

a) 我在一个页面中没有使用 radcombobox、raddatepicker、radtimepicker 和 raddatetimpicker，如下所示

```
 <telerik:RadSplitter ID="RadSplitter1" runat="server" OnClientLoaded="OnClientLoaded">
            <telerik:RadPane ID="RadPane1" runat="server">
                <telerik:RadComboBox ID="RadComboBox1" CssClass="cmb_bx" runat="server">
                    <Items>
                        <telerik:RadComboBoxItem runat="server" Text="RadComboBoxItem1" />
                        <telerik:RadComboBoxItem runat="server" Text="RadComboBoxItem2" />
                        <telerik:RadComboBoxItem runat="server" Text="RadComboBoxItem3" />
                        <telerik:RadComboBoxItem runat="server" Text="RadComboBoxItem4" />
                        <telerik:RadComboBoxItem runat="server" Text="RadComboBoxItem5" />
                    </Items>
                    <CollapseAnimation Duration="200" Type="OutQuint" />
                </telerik:RadComboBox>
                <telerik:RadComboBox ID="ComboBox" CssClass="cmb_bx" runat="server">
                    <Items>
                        <telerik:RadComboBoxItem runat="server" Text="RadComboBoxItem1" />
                        <telerik:RadComboBoxItem runat="server" Text="RadComboBoxItem2" />
                        <telerik:RadComboBoxItem runat="server" Text="RadComboBoxItem3" />
                        <telerik:RadComboBoxItem runat="server" Text="RadComboBoxItem4" />
                        <telerik:RadComboBoxItem runat="server" Text="RadComboBoxItem5" />
                    </Items>
                    <CollapseAnimation Duration="200" Type="OutQuint" />
                </telerik:RadComboBox>
                <telerik:RadDatePicker ID="RadDatePicker1" runat="server">
                </telerik:RadDatePicker>
                <telerik:RadDatePicker ID="SupplierName" runat="server">
                </telerik:RadDatePicker>
                <telerik:RadDatePicker ID="CorporateCode" runat="server">
                </telerik:RadDatePicker>
                <telerik:RadDatePicker ID="PartNo" runat="server">
                </telerik:RadDatePicker>
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />
              <br />    
            </telerik:RadPane>
            <telerik:RadPane ID="RadPane2" runat="server">
            </telerik:RadPane>
        </telerik:RadSplitter> 
```

b) 当我滚动页面时，radcombobox 或我上面提到的任何其他控件也会随着页面滚动。它没有隐藏。所以我使用下面的javascript编码

```
 <telerik:RadCodeBlock ID="RadCodeBlock1" runat="server">
        <script type="text/javascript">
        function OnClientLoaded(sender, eventArgs)
        {
          var pane = sender.getPaneById("<%= RadPane1.ClientID %>");
          var contentElement = pane.getContentElement();
          contentElement.onscroll = function () {
               var combo = $find("<%= RadComboBox1.ClientID %>");
             alert(combo.get_id());
              var dtpkr = $find("<%= RadDatePicker1.ClientID %>");
              var dropDown = combo.get_dropDownVisible();
              var dropDown1 = dtpkr.isPopupVisible();
              if (dropDown) {
                  combo.hideDropDown();
              }
              else if (dropDown1) {
                  dtpkr.togglePopup();
              }
          };
  }
        </script>
    </telerik:RadCodeBlock> 
```

c) 这将仅隐藏 RadcomboBox1 和 RadDatePicker1。如何在一页中为多个 Radcombobox 和 Raddatepicker 编写代码。

谢谢Ganesan A

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:38:26.503

您应该指定什么语言，但这可能会有所帮助。这是针对 C# 的。

```
for (int i = 1; i < 6; i++)
{
    string comboBoxName = "RadComboBox" + i.ToString();
    var comboObject = (this.FindName(comboBoxName) as RadComboBox); //this returns the object if the name is found
    //access the clientID
    if( comboObject != null)
       var clientid = comboObject.ClientID;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T16:38:11.177

既然您已经知道一旦拥有了 RadComboBoxes 和 RadDatePickers 将如何处理它们，我将简单地指出[如何获取特定类型的所有 RadControls](http://www.telerik.com/support/kb/aspnet-ajax/general/how-to-create-a-javascript-array-of-all-particular-radcontrols-on-the-page.aspx)并让您扩充您的代码。

# regex - Perl 正则表达式匹配字符串不以某事结尾

> ID：14234932
> 
> 赞同：2
> 
> 时间：2013-01-09T12:11:23.737
> 
> 标签：regex, perl, regex-lookarounds

请问什么正则表达式可以正确匹配？

我想识别不以特定文本（_array）结尾的字符串。我试图使用负前瞻，但我无法让它工作。（注意，显而易见的答案是逆向 (m{_array$})，但我不想这样做是有原因的）。

```
 use strict;
 use warnings;
 while(<DATA>) {
    #
    ## If the string does not end with '_array' print No, otherwise print Yes
    m{(?!_array)$} ? print "No  = " : print "Yes = ";
    print;
 }
 __DATA__
 chris
 hello_world_array
 another_example_array
 not_this_one
 hello_world 
```

我想要的输出应该是：

```
 No  = chris
 Yes = hello_world_array
 Yes = another_example_array
 No  = not_this_one
 No  = hello_world 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T12:21:38.227

你需要消极的看待*背后*。即，您要搜索字符串的结尾没有放在前面`_array`。

请注意，您需要`chomp`先行，因为`$`将在尾随换行符之前和之后匹配。

条件运算符旨在返回一个*值*- 它不是`if`语句的简写。

```
use strict;
use warnings;

while (<DATA>) {
  chomp;
  # If the string does not end with '_array' print No, otherwise print Yes
  print /(?<!_array)$/ ? "No  = $_\n" : "Yes = $_\n";
}

__DATA__
chris
hello_world_array
another_example_array
not_this_one
hello_world 
```

**输出**

```
No  = chris
Yes = hello_world_array
Yes = another_example_array
No  = not_this_one
No  = hello_world 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T12:21:27.787

试试这个：

```
while(<DATA>) {
    chomp;   # Remove linefeed
    #
    ## If the string does not end with '_array' print No, otherwise print Yes
    m{(?<!_array)$} ? print "No  = " : print "Yes = ";
    say;
} 
```

**输出：**

```
No  =  chris
Yes =  hello_world_array
Yes =  another_example_array
No  =  not_this_one
No  =  hello_world 
```

# windows-7 - 在 Windows 8 App 中使用现有的 Win7 代码库

> ID：14234933
> 
> 赞同：0
> 
> 时间：2013-01-09T12:11:27.967
> 
> 标签：windows-7, windows-8, windows-applications

在我的公司，我们有一个在 Windows 7 上运行并与我们的 Web 服务通信的现有产品。

我们想做一个 Windows 8 平板版本的产品，我的第一个想法是：“嘿，它只是一个新的 Windows 版本，所以我们可能可以使用我们现有的模型、数据访问和业务层逻辑项目，只专注于制作一个新的 UI 层”

但我担心情况并非如此，还是我错了？我尝试在 VS2012 Express 中打开我们的 VS2010 解决方案文件，但收到错误“此版本的 Visual Studio 仅支持 Windows Store 应用程序”。

所以，我现在天真的希望是：谁能告诉我让我们现有代码在 Windows 8 应用程序中工作的最简单方法？

编辑：代码是 .NET C#，我的想法是我只想制作一个 Windows 8 应用程序，以便该产品具有平板电脑/触摸友好的界面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:48:47.387

通常，您将使用 XAML 创建一个新 UI，重用大量现有代码，并更改数据访问以使用 SQLite。

[VS2012 Express Edition](http://aka.ms/downloadvs2012)用于制作 Windows Store 应用。“Windows Store”应用程序是指使用 WinRT API 的应用程序。根据您的代码，制作应用程序的 Windows 应用商店版本可能很简单。

如果您需要其他功能，您可能需要[不同版本的 Visual Studio 2012](http://www.microsoft.com/visualstudio/eng/products/compare)。不过，你肯定需要在 2012 年。您无法使用 Visual Studio 2010 构建 Windows 应用商店应用程序。不过我想您已经知道这一点。

如果您现有的 .NET 应用程序将 WPF 用于 UI，您可以将大量 XAML 知识重用于 Windows 8 端口。它不像重新编译那么简单，但它应该是直截了当的。

SQL CE 目前不是 Windows 应用商店应用程序的选项。相反，请考虑使用[SQLite](http://sqlite.org/)。

查看 MSDN 上的一篇名为[.NET for Windows Store apps-supported APIs](http://msdn.microsoft.com/en-us/library/windows/apps/br230232.aspx)的帖子。您可能熟悉的一些 API 已移至 WinRT。有时移植就像更改命名空间一样简单。

您提到您还写入 C: 驱动器。MSDN 上有一个[关于如何读取和写入文件的示例](http://code.msdn.microsoft.com/windowsapps/File-access-sample-d723e597)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:56:23.423

所以你需要建立一个新的 Metro Style 界面。

文友构建的界面只是复制了旧应用程序的逻辑。

您可以在旧 VS 2010 中打开旧应用程序并**逐行复制代码**。

您不能将旧的 Windows 应用程序转换为 Metro Style 应用程序。

# java - 如何修复 maven exec:java 正在修改 jar 文件名？

> ID：14234936
> 
> 赞同：0
> 
> 时间：2013-01-09T12:11:41.623
> 
> 标签：java, maven, jogl

我正在 Windows 上使用 JOGL 开发应用程序。到目前为止，我一直在使用 Eclipse，但我已经开始编写相应的 Maven POM 文件，这样我就可以自动执行构建和打包步骤。

JOGL 在 Maven 中没有得到积极维护，所以我编写了一个小脚本，通过 install:install-file 将 jar 导入我的本地存储库：

```
set JOGL_VER=2.0
set JOGL_HOME=./jogl
set JOGL_LIB=%JOGL_HOME%/jar
set MVN_INSTALL=call mvn install:install-file

%MVN_INSTALL% -DgroupId=org.jogamp.gluegen -Dfile=%JOGL_LIB%/gluegen-rt-natives-windows-i586.jar \
   -DartifactId=gluegen-rt-natives-windows-i586 -Dversion=%JOGL_VER% -Dpackaging=jar
%MVN_INSTALL% -DgroupId=org.jogamp.gluegen -Dfile=%JOGL_LIB%/gluegen.jar \
   -DartifactId=gluegen -Dversion=%JOGL_VER% -Dpackaging=jar

%MVN_INSTALL% -DgroupId=org.jogamp.jogl -Dfile=%JOGL_LIB%/jogl-all-natives-windows-i586.jar \
   -DartifactId=jogl-all-natives-windows-i586 -Dversion=%JOGL_VER% -Dpackaging=jar
%MVN_INSTALL% -DgroupId=org.jogamp.jogl -Dfile=%JOGL_LIB%/jogl-all.jar 
   -DartifactId=jogl-all -Dversion=%JOGL_VER% -Dpackaging=jar 
```

这会在我的仓库中生成以下文件

```
.m2\repository\org\jogamp\gluegen\gluegen\2.0\gluegen-2.0.jar
.m2\repository\org\jogamp\gluegen\gluegen\2.0\gluegen-2.0.pom
.m2\repository\org\jogamp\gluegen\gluegen-rt-natives-windows-i586\2.0\gluegen-rt-natives-windows-i586-2.0.jar
.m2\repository\org\jogamp\gluegen\gluegen-rt-natives-windows-i586\2.0\gluegen-rt-natives-windows-i586-2.0.pom
.m2\repository\org\jogamp\jogl\jogl-all\2.0\jogl-all-2.0.jar
.m2\repository\org\jogamp\jogl\jogl-all\2.0\jogl-all-2.0.pom
.m2\repository\org\jogamp\jogl\jogl-all-natives-windows-i586\2.0\jogl-all-natives-windows-i586-2.0.jar
.m2\repository\org\jogamp\jogl\jogl-all-natives-windows-i586\2.0\jogl-all-natives-windows-i586-2.0.pom 
```

请注意，由于我指定了 2.0，因此文件以 2.0 为后缀，例如，gluegen-rt-natives-windows-i586-2.0.jar。

但现在我想在构建后使用 exec:java 命令运行应用程序，以确保它正常运行，即

```
mvn exec:java 
```

所以我将 exec-maven-plugin 添加到我的 pom.xml

```
 <build>
    <plugins>
    <plugin>
      <groupId>org.codehaus.mojo</groupId>
      <artifactId>exec-maven-plugin</artifactId>
      <version>1.2.1</version>
      <configuration>
        <mainClass>com.testapp.App</mainClass>
      </configuration>
    </plugin>
    </plugins>
   </build> 
```

我还将依赖项添加到 JOGL。并不是说本机二进制文件是作用域运行时，因为我在编译时不需要它们：

```
<dependency>
       <groupId>org.jogamp.gluegen</groupId>
       <artifactId>gluegen</artifactId>
       <version>2.0</version>
</dependency>
<dependency>
       <groupId>org.jogamp.jogl</groupId>
       <artifactId>jogl-all</artifactId>
       <version>2.0</version>
</dependency>
<dependency>
        <groupId>org.jogamp.gluegen</groupId>
        <artifactId>gluegen-rt-natives-windows-i586</artifactId>
        <version>2.0</version>
        <scope>runtime</scope>
</dependency>
<dependency>
        <groupId>org.jogamp.jogl</groupId>
        <artifactId>jogl-all-natives-windows-i586</artifactId>
        <version>2.0</version>
        <scope>runtime</scope>
</dependency> 
```

但是当我运行它时，我收到以下错误

```
Catched FileNotFoundException: C:\Users\xxx\.m2\repository\org\jogamp\gluegen\gluegen\2.0\gluegen-2.0-natives-windows-i586.jar (
The system cannot find the file specified), while TempJarCache.bootstrapNativeLib() of jar:file:/C:/Users/xxx/.m2/repository/org
/jogamp/gluegen/gluegen/2.0/gluegen-2.0-natives-windows-i586.jar!/ (file:/C:/Users/xxx/.m2/repository/org/jogamp/gluegen/gluegen
/2.0/ + gluegen-2.0-natives-windows-i586.jar)
[WARNING] 
```

因此，这个问题很简单。我通过 install:install-file 安装了 jars，并且版本 2.0 被附加在工件 id 之后，例如gluegen-rt-natives-windows-i586- **2.0** .jar，但是 exec:java 期望 jar 被称为gluegen- **2.0** - natives-windows-i586.jar。

由于项目构建，我必须假设编译阶段使用预期的文件名正确查找 jar 文件，但 exec 不是。

为什么它会在工件 id 中间转储版本号，如何使其正常工作？工件 id 是根据约定命名的，所以我不明白为什么会这样拆分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T12:23:42.683

Exec:java 与您的问题无关。

JOGL 本身具有某种复杂的内部机制，用于通过 JNI 管理本机代码，并且该机制对文件名做出假设，这些假设与 Maven 存储库中的文件命名规则不兼容。

您将不得不使用 maven-assembly-plugin 将依赖项复制到具有 JOGL 所需的名称和形状的树并从那里执行，或者找到一种重新配置 JOGL 以容忍 Maven 命名约定的方法。

# html - 列表项 li 悬停样式在页面上不起作用

> ID：14234937
> 
> 赞同：0
> 
> 时间：2013-01-09T12:11:43.553
> 
> 标签：html, css

在这个网页[http://nkarch.lifeintheuktest.co/the-work.aspx](http://nkarch.lifeintheuktest.co/the-work.aspx)我有`<li>`里面的元素`div`with `id=ProjectsGrid`。

css 规则`#ProjectsGrid ul li a:hover h4`在 chrome 和 IE 中运行良好，但不适用于 Firefox。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:18:19.830

问题出在`font-weight`. 不悬停时你没有它。放：

```
.TopNavigation a:link {
    color: white;
    line-height: 200%;
    text-decoration: none;

    font-weight: 800;
} 
```

会好的。

编辑：添加`font-weight`所有`<div>`你没有的，因为我认为这不仅仅是导航问题。

# ios6 - 在 didSelectRow 转到另一个视图后，弹出框没有关闭

> ID：14234941
> 
> 赞同：1
> 
> 时间：2013-01-09T12:11:49.633
> 
> 标签：ios6, notifications, popover, uistoryboardsegue, dismiss

我在 Xcode 4.5 中，目标是 iOS6。序言：我有一个 libraryView（呈现视图控制器），带有一个包含搜索的弹出框。在显示搜索结果后，点击一行会关闭库并转到 entryView。这一切都很好。我的问题：关闭 entryView 并返回 libraryView 后，搜索弹出框仍然可见。我尝试了许多不同的方法来解决这个问题：我在搜索弹出框的 segue 中添加了一个通知观察者，从搜索控制器发布了一个通知，从 entryView 发布到位于 libraryView 中的以下方法。而且，是的，libraryView 确实有 addObserver 用于此方法：

```
- (void)searchComplete:(NSNotification *)notification
{
   NSLog(@"SearchPopover dismiss notification?");
   [_searchPopover dismissPopoverAnimated:YES];
} 
```

我在测试中添加了...

```
if (_searchPopover.popoverVisible)
{
   [_searchPopover dismissPopoverAnimated:YES];
} 
```

以viewDidLoad、viewWillAppear、viewWillDisappear、awakeFromNib...都在库中。我将 searchPopover 作为属性并尝试将其作为 ivar。我没有尝试过在 segue 之前或返回之后消除弹出窗口。

有人有想法么？帮助将不胜感激！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:07:57.477

我找到了解决这个问题的方法......在这个答案中找到了它： [iOS Dismissing a popover that is in a UINavigationController](https://stackoverflow.com/questions/14531099/ios-dismissing-a-popover-that-is-in-a-uinavigationcontroller)

但是，还有一个额外的小步骤......更正答案中的错字并将“dismissPopover”方法更改为 NSNotification 方法。我为弹出框添加了一个 segue，这通常是没有必要的。不过，关键是将父级的弹出框定义设置为 UIStoryboardPopoverSegue。

然后，使用通知让父母知道它应该解雇。

从父视图：

```
- (void)viewDidLoad
{
    ... other loading code...

    [NSNotificationCenter.defaultCenter addObserver:self selector:@selector(dismissSearch:) name:@"dismissSearch" object:nil];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"SearchSegue"])
    {
        [segue.destinationViewController setDelegate:self];
        _searchPopover = [(UIStoryboardPopoverSegue *)segue popoverController];
    }
}

- (void)dismissSearch:(NSNotification *)notification
{
    NSLog(@"SearchPopover dismiss notification?");
    [_searchPopover dismissPopoverAnimated:YES];
} 
```

在我的子视图（SearchView）中。理想情况下，它将位于 didSelectRowAtIndexPath 中。我发现它也可以在显示搜索项目的视图中工作，这是我通常放置 addObserver 的地方。在这种情况下，它是一个 postNotification ...

```
 [NSNotificationCenter.defaultCenter postNotificationName:@"dismissSearch" object:nil]; 
```

最后一点：我使用的是 IBAction，它在点击按钮时检查弹出框的可见性......显示或关闭。发现拥有这个以及其他方法会导致弹出框在点击按钮后立即关闭！注释掉 if/else 检查可见性解决了这个问题！

感谢 rdelmar 带领我走上这条道路！

# php - 带有条件的MongoDB请求不显示

> ID：14234943
> 
> 赞同：0
> 
> 时间：2013-01-09T12:11:52.533
> 
> 标签：php, mongodb

```
"bookName": "I've been discovered",
    "bookGenre": {
         "0": "Classics",
         "1": "Fantasy",
         "2": "Romance"
    }

"bookName": "Doctor Who",
"bookGenre": {
     "0": "Classics",
     "1": "Biography"
}

"bookName": "I don't want to tread carefully",
"bookGenre": {
     "0": "Classics",
     "1": "Fantasy",
     "2": "History"
} 
```

我想获得所有经典类型的书籍，但不包括幻想和历史类型。

```
$genre = array("Classics");
$genreNot = array("Fantasy", "History");

$q = find(array("bookGenre" => array('$in' => $genre), "bookGenre" => array('$nin' => $genreNot))); 
```

在这个查询中，我得到了我所有的书，但没有带来类型幻想和历史不起作用的例外。如何向排除的类型作品提出请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:07:19.903

嗯，你的数组有一个基本问题：

```
$q = find(array("bookGenre" => array('$in' => $genre), 
"bookGenre" => array('$nin' => $genreNot))); 
```

您对同一个对象有重复的键，所以实际上这个查询中唯一通过的子句是`"bookGenre" => array('$nin' => $genreNot)`. 我相信您可以将 and 结合`$in`起来`$nin`：

```
$q = find(array(
             "bookGenre" => array('$in' => $genre, '$nin' => $genreNot)
)); 
```

像这样。

# php - 获取最高编号的文件并创建下一个

> ID：14234944
> 
> 赞同：1
> 
> 时间：2013-01-09T12:11:59.617
> 
> 标签：php

我有一个文件夹，其中包含名为 standard_xx.jpg 的文件（xx 是一个数字）

我想找到最大的数字，以便我可以准备好文件名以重命名下一个正在上传的文件。

例如。如果最高数字是standard_12.jpg $newfilename = standard_13.jpg

我已经创建了一个方法来通过只是爆炸文件名来做到这一点，但它不是很优雅

```
$files = glob($uploaddir.'test-xrays-del/standard_*.JPG');
$maxfile = $files[count($files)-1];
$explode = explode('_',$maxfile);
$filename = $explode[1];
$explode2 = explode('.',$filename);
$number = $explode2[0];
$newnumber = $number + 1;
$standard = 'test-xrays-del/standard_'.$newnumber.'.JPG';
echo $newfile; 
```

有没有更有效或更优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:15:45.250

您可以使用[`sscanf`^(*Docs*)](http://php.net/sscanf)：

```
$success = sscanf($maxfile, 'standard_%d.JPG', $number); 
```

它不仅可以让您选择数字（并且只有数字），还可以选择这是否有效（`$success`）。

此外，您还可以查看[`natsort`^(*Docs*)](http://php.net/natsort)以实际对您返回的数组进行排序以获得最高*自然*数。

使用这些的完整代码示例：

```
$mask   = 'standard_%s.JPG';
$prefix = 'test-xrays-del';    
$glob   = sprintf("%s%s/%s", $uploaddir, $prefix, sprintf($mask, '*'));
$files  = glob($glob);
if (!$files) {
    throw new RuntimeException('No files found or error with ' . $glob);
}

natsort($files);

$maxfile = end($files);
$success = sscanf($maxfile, sprintf($mask, '%d'), $number);
if (!$success) {
    throw new RuntimeException('Unable to obtain number from: ', $maxfile);
}

$newnumber = $number + 1;
$newfile   = sprintf("%s/%s", $prefix, sprintf($mask, $newnumber)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T12:19:09.347

我自己会这样做：

```
<?php

    $files = glob($uploaddir.'test-xrays-del/standard_*.JPG');
    natsort($files);
    preg_match('!standard_(\d+)!', end($files), $matches);
    $newfile = 'standard_' . ($matches[1] + 1) . '.JPG';
    echo $newfile; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T12:15:25.460

尝试：

```
$files   = glob($uploaddir.'test-xrays-del/standard_*.JPG');
natsort($files);
$highest = array_pop($files); 
```

然后用正则表达式获取它的数字并增加值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T12:26:22.170

像这样的东西：

```
function getMaxFileID($path) {
    $files = new DirectoryIterator($path);
    $filtered = new RegexIterator($files, '/^.+\.jpg$/i');
    $maxFileID = 0;

    foreach ($filtered as $fileInfo) {
        $thisFileID = (int)preg_replace('/.*?_/',$fileInfo->getFilename());
        if($thisFileID > $maxFileID) { $maxFileID = $thisFileID;}
    }
    return $maxFileID;
} 
```

# javascript - Tablesorter 不排序（Jquery 1.8）

> ID：14234949
> 
> 赞同：2
> 
> 时间：2013-01-09T12:12:26.630
> 
> 标签：javascript, jquery, html, html-table, tablesorter

我对我的问题进行了大量研究，但没有找到答案。

`tablesorter`不排序，我不知道为什么？

这是我的测试文件。你能告诉我，我做错了什么吗？

```
<html>
<head>
    <script type="text/javascript" src="jquery-1.8.0.min.js"></script>
    <script type="text/javascript" src="jquery.tablesorter.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $("#sortable").tablesorter();
        });
    </script>
</head>
<body>
    <table id="sortable">
        <thead>
            <tr>
                <td>Username</td>
                <td>Role</td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>SuperAdmin</td>
                <td>SuperAdministrator</td>
            </tr>
            <tr>
                <td>Simon</td>
                <td>SuperAdministrator</td>
            </tr>
            <tr>
                <td>Manfred</td>
                <td>Administrator</td>
            </tr>
            <tr>
                <td>test</td>
                <td>test</td>
            </tr>
        </tbody>
    </table>
</body>
</html> 
```

我有 jQuery 文件，tablesorter.js ......

文件已正确加载，因为我可以读取它们（使用萤火虫）...

请帮助我，因为我不想自己写`tablesorter`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T12:21:14.313

对于标题（用户名和角色），使用`<th>`代替`<td>`

[看到这个 JSFiddle](http://jsfiddle.net/Hz3r6/)

用这个：

```
 <thead>
        <tr>
            <th>Username</th>
            <th>Role</th>
        </tr>
    </thead> 
```

代替：

```
<thead>
        <tr>
            <td>Username</td>
            <td>Role</td>
        </tr>
    </thead> 
```

# c# - 在光标位置将 FlowDocument 插入另一个 FlowDocument

> ID：14234951
> 
> 赞同：1
> 
> 时间：2013-01-09T12:12:43.817
> 
> 标签：c#, wpf, richtextbox, flowdocument

我想在 doc2 的当前光标位置将 FlowDocument (doc1) 插入到另一个 FlowDocument (doc2) 中。

我知道我可以通过文档所在的 RichTextBox 的 CaretPosition 获得光标位置，并且我可以在技术上在另一个块之后或之前添加一个块，但我不能单独使用 Blocks 属性将它添加到指定的光标位置（和它是添加方法）。

我可以在指定的 TextPointers 处添加内联元素，至少它的大部分子类，这将是我想要的，但我不能将块添加到另一个块的内联。不可能对块进行迭代，并且基类“块”不包含任何内联存储属性。尝试将 Block 转换为每个可能的特定 Block Type 似乎根本不是一个好主意。

那么，有没有简单干净的方法将 doc1 的整个内容插入到 doc2 的光标位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:41:25.847

好的，我显然找到了解决方案。也适用于 FlowDocuments，但我需要 RTF。

```
byte[] byteArray = Encoding.Default.GetBytes(rtfString);
MemoryStream stream = new MemoryStream(byteArray);
this.selectedRichTextBox.Selection.Load(stream, DataFormats.Rtf);
stream.Close(); 
```

# actionscript-3 - 如何从参考影片剪辑中移动影片剪辑

> ID：14234952
> 
> 赞同：0
> 
> 时间：2013-01-09T12:12:48.200
> 
> 标签：actionscript-3

我想做一个movieClip，它引用了另一个电影剪辑的移动。但是当我这样做时，它保持不动。这是我正在尝试做的示例代码

```
 var movieClip1 = new movieClip();
 var movieClip2 = new movieClip();

movieClip1.ref = movieClip2;
movieClip1.x = 0;
movieClip2.x = 0;
addChild(movieClip1);
addChild(movieClip2);

while(movieClip1.x !=300){
movieClip1.x +=1;
// i want to make the reference of the clip move as well
movieClip1.ref.x = movieClip1.x;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:22:44.793

你希望它如何移动？逐渐地，一次 1 个单位？如果是这样，请不要使用 while 循环，否则它会直接跳转到 300（x 位置）。

而是使用某种更新循环，例如输入帧侦听器：

```
addEventListener(Event.ENTER_FRAME, Update);
function Update(e:Event):void
{
    mc1.x++;
    mc1.ref.x = mc1.x;
} 
```

# android - 实现 onClickListener 时应用程序崩溃

> ID：14234953
> 
> 赞同：0
> 
> 时间：2013-01-09T12:12:49.837
> 
> 标签：android, android-fragments, onclicklistener

我正在开发一个应用程序，它有 3 个选项卡和每个选项卡的片段。从选项卡中选择列表项时，新片段将替换同一选项卡中的当前片段。我`onclicklistener`在这个新片段中使用了一个按钮。但是，当实现 onClickMethod 时，即使在加载选项卡之前，应用程序也会崩溃。

```
 public class ChatWindow extends Fragment {

ArrayList<String> listItems=new ArrayList<String>();

//DEFINING STRING ADAPTER WHICH WILL HANDLE DATA OF LISTVIEW
ArrayAdapter<String> adapter;
View view; 

  @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, 
        Bundle savedInstanceState) {
        // Inflate the layout for this fragment
        return inflater.inflate(R.layout.chat_window, container, false);
    }

public void onStart()
{
     Button btn=(Button)getActivity().findViewById(R.id.btnSend);
       Log.v("HI","Button Created !!");
       OnClickListener listener = new OnClickListener() {                       
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                //adapter=new ArrayAdapter<String>    (getActivity(),android.R.layout.simple_list_item_1,listItems);
                //setListAdapter(adapter);
                Log.v("HI","Button  !!");
               Toast toast = Toast.makeText(getActivity().getBaseContext(), "Hello",10000);
              toast.show();
            }
        };

        btn.setOnClickListener(listener);
}
} 
```

这是logcat ::

```
 01-09 18:02:22.126: D/gralloc_goldfish(623): Emulator without GPU emulation  detected.
    01-09 18:02:22.156: W/TextLayoutCache(623): computeValuesWithHarfbuzz -- need to force to single run
    01-09 18:02:36.805: V/AB(623): Main Tab Activity
    01-09 18:02:36.855: V/HI(623): Button Created !!
    01-09 18:02:36.855: D/AndroidRuntime(623): Shutting down VM
    01-09 18:02:36.865: W/dalvikvm(623): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
    01-09 18:02:36.885: E/AndroidRuntime(623): FATAL EXCEPTION: main
    01-09 18:02:36.885: E/AndroidRuntime(623): android.app.SuperNotCalledException: Fragment ChatWindow{41099e70 #1 id=0x7f040011} did not call through to super.onStart()
    01-09 18:02:36.885: E/AndroidRuntime(623):  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:831)
    01-09 18:02:36.885: E/AndroidRuntime(623):  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:998)
    01-09 18:02:36.885: E/AndroidRuntime(623):  at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:981)
    01-09 18:02:36.885: E/AndroidRuntime(623):  at android.app.FragmentManagerImpl.dispatchStart(FragmentManager.java:1700)
    01-09 18:02:36.885: E/AndroidRuntime(623):  at android.app.Activity.performStart(Activity.java:4481)
    01-09 18:02:36.885: E/AndroidRuntime(623):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1928)
    01-09 18:02:36.885: E/AndroidRuntime(623):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
    01-09 18:02:36.885: E/AndroidRuntime(623):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
    01-09 18:02:36.885: E/AndroidRuntime(623):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
    01-09 18:02:36.885: E/AndroidRuntime(623):  at android.os.Handler.dispatchMessage(Handler.java:99)
    01-09 18:02:36.885: E/AndroidRuntime(623):  at android.os.Looper.loop(Looper.java:137)
    01-09 18:02:36.885: E/AndroidRuntime(623):  at android.app.ActivityThread.main(ActivityThread.java:4340)
    01-09 18:02:36.885: E/AndroidRuntime(623):  at java.lang.reflect.Method.invokeNative(Native Method)
    01-09 18:02:36.885: E/AndroidRuntime(623):  at java.lang.reflect.Method.invoke(Method.java:511)
    01-09 18:02:36.885: E/AndroidRuntime(623):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    01-09 18:02:36.885: E/AndroidRuntime(623):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    01-09 18:02:36.885: E/AndroidRuntime(623):  at dalvik.system.NativeStart.main(Native Method) 
```

在评论 onclicklistener 代码时，该应用程序可以完美运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T12:16:27.217

代替

```
Button btn=(Button)getActivity().findViewById(R.id.btnSend); 
```

和

```
Button btn=(Button)getView().findViewById(R.id.btnSend); 
```

甚至在您的内部`onClick()`也不需要`getBaseContext()`。简单`getActivity()`就足够了。

```
 Toast toast = Toast.makeText(getActivity(), "Hello",10000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:27:13.157

更改按钮的代码，如下所示..

```
Button btn=(Button)findViewById(R.id.btnSend);           
           Log.v("HI","Button Created !!");
           btn.setOnClickListener(new OnClickListener() {                       
                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    //adapter=new ArrayAdapter<String>    (getActivity(),android.R.layout.simple_list_item_1,listItems);
                    //setListAdapter(adapter);
                    Log.v("HI","Button  !!");
                    Toast.makeText(getApplicationContext(), "Hello",10000).show(); 
                }
            }; 
```

**用上面的代码替换它**

```
 Button btn=(Button)getActivity().findViewById(R.id.btnSend);
   Log.v("HI","Button Created !!");
   OnClickListener listener = new OnClickListener() {                       
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            //adapter=new ArrayAdapter<String>    (getActivity(),android.R.layout.simple_list_item_1,listItems);
            //setListAdapter(adapter);
            Log.v("HI","Button  !!");
           Toast toast = Toast.makeText(getActivity().getBaseContext(), "Hello",10000);
          toast.show();
        }
    };

    btn.setOnClickListener(listener); 
```

# c# - 如何访问剪贴板图像并将其保存在 asp.net Web 应用程序的服务器位置？

> ID：14234954
> 
> 赞同：1
> 
> 时间：2013-01-09T12:12:49.537
> 
> 标签：c#, javascript, asp.net, web-applications, clipboard

我希望在我的 Web 应用程序中具有以下功能：在客户端当我从任何地方复制图像（它被加载到剪贴板）时，现在我希望有一个按钮，当我单击它时应该将图像保存在服务器位置在某个路径。我可以在服务器端代码中使用任何 javascript、jquery、c# 代码，只需要实现上述功能。

请帮忙。提前非常感谢。

瓦布哈夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:38:18.547

查看此问题及其答案：[剪贴板中的粘贴图像功能如何在 Gmail 和 Google Chrome 12+ 中工作？](https://stackoverflow.com/questions/6333814/how-does-the-paste-image-from-clipboard-functionality-work-in-gmail-and-google-c).

我认为最困难的部分是让它在所有浏览器中工作。因此，如果您需要旧版浏览器支持，您可能应该使用一些 Flash 解决方案，例如[http://code.google.com/p/zeroclipboard/](http://code.google.com/p/zeroclipboard/)。

要将其保存到服务器，您需要一些控制器的 POST 操作（如果使用 MVC）或 webservice 或 aspx 页面，如果使用 webforms。使用 javascript 获取剪贴板图像后，例如使用 AJAX 将其发送到服务器。

# jquery - jQuery $.myPlugin() 样式插件

> ID：14234958
> 
> 赞同：0
> 
> 时间：2013-01-09T12:13:13.023
> 
> 标签：jquery, design-patterns, plugins

我正在使用以下模式编写一个 jquery 插件（因为我不想做 $("#element").myPlugin()，我没有对特定元素做任何事情......无论如何......

```
$.extend({
    myPlugin: function(){
        //some cool stuff
    }
}); 
```

但我还需要一种方法让其他插件改变我的插件行为，我尝试执行以下操作，但遇到了一个奇怪的错误......

```
$.extend({
    myPluginStyles: {
        someStuff: {},
        moreStuff: {},
    }
});

$.extend({
    myPlugin: function(options) {
        this.style = $.myPluginStyles[options.style]; //options.style will contain either "someStuff" or "moreStuf"
    }
}) 
```

现在，其他插件可以在 myPluginStyles 对象中添加新的“样式”..至少是这样的想法：

```
$.myPluginStyles.newStyle = {}; 
```

现在你可以做 $.myPlugin({style: 'newStyle'});

但我收到以下错误：

```
Uncaught TypeError: Property 'style' of object function (e,t){return new v.fn.init(e,t,n)} is not a function 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:27:44.743

$.extend 的样式适用于使用此模式 $(element).yourFunction 的新插件。

所以，你不想创建插件，你只想给 jQuery 添加函数。所以你需要做的：

```
$.myPlugin=function () {alert('yourfunction') };
$.myPluginSeries={someStuff:'', someStuff2: ''}; 
```

我希望我很清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T12:43:58.480

也许这就是你要找的？这样，插件就有一个对象'styles'，可以注册（使用registerStyles）和使用（使用this.styles[name]）的东西。

```
$.fn.extend({
    myPlugin: {
        styles : {}, //define the style object
        registerStyles : function(name, style) {
            //register name and style in the plugin's styles object
            this.styles[name] = style;
        },
        doStuff: function(name){
            //test by alerting the first value in the styles object
            alert(this.styles[name])
        }
    }
}); 
```

用法：

```
$.fn.myPlugin.registerStyles('myStyle', 'test'); //set style

$('#my_element').myPlugin.doStuff('myStyle'); //do stuff (in this case echo-ing the style)

// or $.fn.myPlugin.doStuff('myStyle'); if you your function is not designed to use an element 
```

我不知道这是否是最佳做法，但我会这样做。

[看到这个小提琴](http://jsfiddle.net/c_kick/5CMDS/)的演示

# iphone - 连接两个整数

> ID：14234959
> 
> 赞同：-4
> 
> 时间：2013-01-09T12:13:13.583
> 
> 标签：iphone, ios, objective-c, integer, concatenation

这可能是最简单的问题，但目前，我对如何实现这一点没有任何想法。

好的，问题是如何连接两个整数。

**例如：**我想使用两个不同的整数**00**和**00创建一个整数****0000**。我尝试使用**NSString**，但失败了。

 ********我的代码是：**

```
 int num1 = 00;
                int num2 = 00;
                NSString *str = [NSString stringWithFormat:@"%d%d",num1,num2];
                int num = [str intValue];
                NSLog(@"num = %d",num); // It Logs 0 but I want 0000. 
```

有没有人有更好的想法？

**编辑 ：**

请注意，我想用那个**num**来设置**textfield**的**标签**。这就是为什么所有的**零**都是必不可少的。所以我的主要问题从这里开始。

 ****我有一个包含自定义单元格的**表格视图。**此**自定义单元格**有**10 多个**文本字段。现在我想唯一标识所有要编辑的**文本字段。**这就是为什么该文本字段的**标记**必须是由名为**rowNumber**和**textFieldNumber**的两个值连接的整数（表示 10 个中的哪个文本字段。）。

所以我的问题是我想做的是对还是错？如果没有，那么给我一些有用的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T12:28:07.617

整数数据类型（例如`int`）仅存储整数值，不存储格式信息。因此，您丢失了前导零的数量（不影响整数值，即 0、00 和 0000 是相同的整数：零）。

如果您希望保留格式信息，则必须单独存储。一种简单的方法是只存储字符串本身。或者，如果您总是希望具有相同的位数，请更改格式字符串：

```
int num1 = 0;
int num2 = 0;
NSString *str = [NSString stringWithFormat:@"%02d%02d",num1,num2]; 
```

在上面的代码之后，`str`将`"0000"`. 但是，将其转换为`int`然后使用`%d`格式记录会`0`再次生成（因为 0000 和 0 是相同的整数）。

**编辑**：为了生成用于标记的唯一整数，给定行号 ( `rowNumber`) 和文本字段号 ( `textFieldNumber`)，使用如下公式：

```
tagNumber = rowNumber * 100 + textFieldNumber; 
```

这样，第 0 行的文本字段将有数字 0..99，第 1 行的文本字段将有 100..199，依此类推。如果每行需要超过 100 个文本字段，只需乘以更大的数字，例如 1000。

在整数算术中，这些值可以通过以下方式转换回行号和字段号：

```
 rowNumber = tagNumber / 100;
 textFieldNumber = tagNumber % 100; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T12:25:30.700

Try to use this:

```
int num1 = 0;
int num2 = 0;
int num3=0;
int num4=0;
NSString *str = [NSString stringWithFormat:@"%d%d%d%d",num1,num2,num2,num3];
int num = [str intValue];
NSLog(@"num = %0*d",str.length,num); 
```

Hope this helps you.

but dont init as like this "int num1=00" because it init "0" only in num1.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T12:24:50.433

Multiply the first integer with 100 and add the second integer to it. You should be able to print it using:

```
NSLog([NSString stringWithFormat:@"%04d", sum]); 
```

which will put leading zeros.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T12:25:17.987

You can pad it as :

NOTE: both the num1 and num2 must be of 2 digits. If its size increases then it wont work.

```
int num1 = 00;
int num2 = 00;
NSString *str = [NSString stringWithFormat:@"%d%d",num1,num2];
int num = [str intValue];
NSLog(@"num = %04d",num); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T12:32:46.030

如果打印不是真正的问题，那么我想您需要一个乘法因子来设置标签，让它为 10000 并将其添加到某个序列号中以获得唯一的标签值。

或者您可以使用 num 作为字符串并在 for 循环中乘以 10 num.length 次

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T12:14:25.930

为什么把它变回int？您应该打印刚刚格式化的字符串：

```
NSLog(@"num = %@",str); 
```

作为数字，0 和 0000 之间没有区别。整数只保留值，而不是格式（这就是字符串的用途）。**********

# objective-c - 使用物理、CGPoint、向量的随机运动，在物理/数学方面有点困惑

> ID：14234963
> 
> 赞同：0
> 
> 时间：2013-01-09T12:13:35.590
> 
> 标签：objective-c, xcode, physics, vector-graphics, chipmunk

我已经设法让花栗鼠物理学和其他一些东西在我的屏幕上放下一个球，我可以用一些按钮/加速度计影响重力。耶我！

接下来，我想关闭重力，并模拟一个自上而下的视图，球会根据自己的意愿在屏幕上移动。我可以使用 对球施加力`body -> f = cpv(dx, dy)`，但我对物理和数学的了解并不多，所以我试图了解我输入的两个值是如何导致运动的。

我知道正值会将其向右或向下移动，而负值会将其向左或向上移动，但这就是我目前所理解的全部。

例如，如果我想选择一个随机的罗盘方位（0 - 359 度）并将其移动到该方位上，那么这样的值如何转换为矢量？

我创建了这个方法，但它没有按预期工作，我不确定我做错了什么：

```
- (CGPoint) getVectorFromAngle: (float) angle AndMagnitude: (float) magnitude
{
    float x = magnitude * cos(angle);
    float y = magnitude * sin(angle);
    CGPoint point = CGPointMake(x, y);
    NSLog(@"Made a CGPoint of X: %f and Y: %f.", point.x, point.y);
    return point;
} 
```

如果我给它一个角度`45`和一个大小`10`，它会创建 X 为 5.253220 和 8.509035。但是，[此处](http://www.mathsisfun.com/algebra/vector-calculator.html)找到的计算器显示它应该将 X 和 Y 创建为 7.0711。

我在这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:40:46.197

sin 和 cos 以弧度表示角度，将角度乘以 π/180。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T04:09:09.267

值得指出的是，Chipmunk 已经包含了一个功能，可以完全满足您的需求。

```
cpvmult(cpvforangle(radians), magnitude) 
```

# mysql - MYSQL 将大型数据库恢复到远程服务器

> ID：14234969
> 
> 赞同：5
> 
> 时间：2013-01-09T12:14:05.517
> 
> 标签：mysql

大家好，

我正在尝试在命令提示符下使用 mysql 命令将近 8GB 的​​数据库恢复到远程服务器中。我开始这个过程已经 8 个小时了。但它仍然可以恢复数据库。我尝试使用命令

```
> mysql -h hostname -u username -p dbname < location of the dump file 
```

我的问题是，

1.  恢复这么多数据库需要这么多小时吗？

2.  是否可以恢复 8GB 数据库？

3.  我是否以正确的方式做事？

4.  有没有其他更好的方法来恢复数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-28T18:41:08.153

命令

```
mysql -h IP -u Username -p schema < file 
```

例子

```
mysql -h 192.168.10.122 -u root -p mydatabase < /tmp/20160628_test_minificated.sql 
```

**恢复这么多数据库需要这么多小时吗？**

取决于转储文件的大小和连接速度。

**是否可以恢复 8GB 数据库？**

是的，通过这种方式，您可以恢复大型数据库。

**我是否以正确的方式做事？**

对我来说，这是从命令行界面工作的最佳方式，而目标也是命令行界面。

**有没有其他更好的方法来恢复数据库？**

是的，您有多个选项，例如 phpmyadmin、workbrench、heidisql 和许多其他选项，但每个选项都有其自身的局限性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-12-09T14:59:40.730

我认为@Ferri 的答案很好，在这种情况下，CLI 始终是最佳选择。

我建议的唯一改进是使用 gzip 来减轻脚本的重量。

像这样转储数据库：

```
mysqldump --host yourhost -u root --port 3306 -p yourdb | gzip -9 > yourdb.sql.gz 
```

像这样恢复数据库：

```
gzip -cd yourdb.sql.gz | mysql -h yourhost -u root -p yourdb 
```

# django - Django查询集根据日期返回外键中每个项目的第一个

> ID：14234971
> 
> 赞同：6
> 
> 时间：2013-01-09T12:14:12.397
> 
> 标签：django, django-orm

需要为每个作者（与外键相关）获取带有第一本书的查询集（按日期字段）...是否有 Django ORM 方法来执行此操作（没有自定义 SQL 首选但可以接受）

*编辑：请注意，仅使用像 Postgresql 这样的现代开源后端的答案是可以接受的..仍然是基于 ORM 的解决方案，而不是纯自定义 sql 查询）

```
Models
class Book(Model):
  date = Datefield()
  author = ForeignKey(Author)

class Author(Model):
  name = CharField()

Book.objects.filter(??) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T12:55:57.887

如果您使用 PostgreSQL 或其他支持的数据库后端，`DISTINCT ON`则有一个不错的解决方案：

```
Books.objects.order_by('author', '-date').distinct('author') 
```

否则我不知道只有一个查询的解决方案。但是你可以试试这个：

```
from django.db.models import Q, Max
import operator

books = Book.objects.values('author_id').annotate(max_date=Max('date'))
filters = reduce(operator.or_, [(Q(author_id=b['author_id']) &
    Q(date=b['max_date'])) for b in books])
queryset = Books.objects.filter(filters) 
```

通过 .values() 和 .annotate() 的组合，我们按作者分组并注释该作者所有书籍的最新日期。但结果是字典而不是查询集。然后我们构建一个 SQL 语句，如`WHERE author_id=X1 AND date=Y1 OR author_id=X2 AND date=Y2...`. 现在第二个查询很容易。

# jquery - 如何在下拉选择框的更改事件中使用 Ajax 和 jQuery 调用 servlet？

> ID：14234972
> 
> 赞同：1
> 
> 时间：2013-01-09T12:14:19.480
> 
> 标签：jquery, ajax, jsp, servlets

我正在研究 JSP 和 Servlet 中的分页代码。在此我想显示员工列表。我尝试使用 MVC 模式来设计它。

调用以下代码的步骤：

1.  在浏览器中调用 dispEmployee.jsp 页面。
2.  单击其中的列出超链接。其中调用 EmpServlet.java servlet。
3.  从选择框中选择页码以在页面之间导航。

问题：

在这里，当我们按照上述步骤进行时。直到第 2 步，一切都运行良好。当我们尝试调用 step3 时，即当我们从选择框中选择另一个页码时，它会提供该选定页面的信息，但之后每当我们从选择框中选择另一个页面时，都不会调用更改事件

请告诉我朋友我的 ajax 和 jQuery 代码有什么问题。

请参考以下代码。这里没有给出DAO和Bean的代码。

**dispEmployee.jsp**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Employees</title>
<script type="text/javascript" src="js/stdlib/jquery-1-4-2.js"></script>
<script type="text/javascript">
 $(document).ready(function(){
alert("this is test");
// var link= $('#id_pageselect');
var selpage=$('#id_pageselect').val();
$("#id_pageselect").change(function(){
    alert("this is test1"); 
/*  $.ajax({
     type:"Post",
     url:"/EmpServletSnipet",
     data:"page=" + selpage,
     success:function(content){
                alert("test2"); 
                $('#display').empty();
                $('#display').append(content);
            }
     });*/
     //I have updated code by commenting the $.ajax method.and by writing following lines. 

   //I have also removed the '/' forward slash before EmpServletSnipet in following lines of code. 

    //Its working for fine but only for first chage event of select box after that when

    //I try to change the page from newly rendered select box Its not even invoke change event.

      $('#display').empty;
      $('#display').load('EmpServletSnipet',{page:$("#id_pageselect").val()});       
});
});
</script>

</head>
<body>
<div id="display" style="position:static; left:1003px; top:602px; width:500px; height:600px; z-index:10; overflow: scroll;">
<a href="http://localhost:8080/webdynamic/EmpServlet?page=1">List</a>
<select name="pageselect" id="id_pageselect">
<c:forEach begin="1" end="${noOfPages}" var="i">
            <c:choose>
                <c:when test="${currentPage eq i}">
                    <option value="${i}" selected>${i}</option>
                </c:when>
                <c:otherwise>
                    <option value="${i}">${i}</option>
                </c:otherwise>
            </c:choose>
        </c:forEach>
</select>
    <table border="1" cellpadding="5" cellspacing="5">
<tr>
        <th>Emp ID</th>
        <th>Emp Name</th>
        <th>Salary</th>
        <th>Dept Name</th>
    </tr>
    <c:forEach var="employee" items="${employeeList}">
        <tr>
            <td>${employee.employeeId}</td>
            <td>${employee.employeeName}</td>
            <td>${employee.salary}</td>
            <td>${employee.deptName}</td>
        </tr>
    </c:forEach>
</table>
</div> 
```

EmpServlet.java servlet 充当控制器。此 servlet 从 jsp 文件获取页面请求并从 DAO 检索员工记录。只给出了 doGet 和 doPost 方法。

**EmpServlet.java**

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
// TODO Auto-generated method stub
int page = 1;
    int recordsPerPage = 5;
    if(request.getParameter("page") != null)
        page = Integer.parseInt(request.getParameter("page"));
    EmployeeDAO dao = new EmployeeDAO();
    List<Employee> list = dao.viewAllEmployees((page-1)*recordsPerPage,
                             recordsPerPage);
    System.out.println("Employee list : "+list.size());
    int noOfRecords = dao.getNoOfRecords();
    int noOfPages = (int) Math.ceil(noOfRecords * 1.0 / recordsPerPage);
    request.setAttribute("employeeList", list);
    request.setAttribute("noOfPages", noOfPages);
    request.setAttribute("currentPage", page);
    RequestDispatcher view = request.getRequestDispatcher("displayEmp.jsp");
    view.forward(request, response);
}

protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // TODO Auto-generated method stub
    doGet(request,response);
} 
```

EmpServletSnipet.java servlet 用于在 ajax 请求中获取选定页面的记录，并将一些代码片段作为 ajax 响应发送

将在具有 id 的显示中呈现。只给出了 doGet 和 doPost 方法。

**EmpServletSnipet.java**

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
// TODO Auto-generated method stub
System.out.println("This is EmpServletSnipet");
int page = 1;
    int recordsPerPage = 5;
    if(request.getParameter("page") != null)
    page = Integer.parseInt(request.getParameter("page"));
    EmployeeDAO dao = new EmployeeDAO();
    List<Employee> list = dao.viewAllEmployees((page-1)*recordsPerPage,recordsPerPage);
    System.out.println("Employee list : "+list.size());
    int noOfRecords = dao.getNoOfRecords();
    int noOfPages = (int) Math.ceil(noOfRecords * 1.0 / recordsPerPage);
    PrintWriter pw=response.getWriter();

    response.setContentType("text/html");
    response.setHeader("Cache-control", "no-cache, no-store");
    response.setHeader("Pragma", "no-cache");
    response.setHeader("Expires", "-1");

    response.setHeader("Access-Control-Allow-Origin", "*");
    response.setHeader("Access-Control-Allow-Methods", "POST");
    response.setHeader("Access-Control-Allow-Headers", "Content-Type");
    response.setHeader("Access-Control-Max-Age", "86400");

    pw.println("<a href=\"http://localhost:8080/webdynamic/EmpServlet?page=1\">List</a>");
    pw.println("<select name=\"pageselect\" id=\"id_pageselect\">");
        for(int i=1;i<=noOfPages;i++){
            if(i==page){
                pw.println("<option value="+ i +" selected>"+ i +"</option>");
            }else{
                pw.println("<option value="+ i +">"+ i +"</option>");
            }
        }

    pw.println("</select>");

    pw.println("<table border=\"1\" cellpadding=\"5\" cellspacing=\"5\">" +
            "<tr>" +
            "<th>Emp ID</th>" +
            "<th>Emp Name</th>" +
            "<th>Salary</th>" +
            "<th>Dept Name</th>" +
            "</tr>");
    Employee emp=null;
    for(int j=0;j<list.size();j++){
        emp=list.get(j);
        pw.println("<tr>" +
                "<td>"+emp.getEmployeeId()+"</td>" +
                "<td>"+emp.getEmployeeName()+"</td>" +
                "<td>"+emp.getSalary()+"</td>" +
                "<td>"+emp.getDeptName()+"</td>" +
                "</tr>");
    }

    pw.println("</table>");
    pw.println("<td><a href=\"EmpServlet?page="+(page-1)+"\" id=\"prevpg\">Previous</a></td>");
    pw.println("<td><a href=\"EmpServlet?page="+(page+1)+"\" id=\"nextpg\">Next</a></td>");
}
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // TODO Auto-generated method stub
    doGet(request,response);
} 
```

请指导我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:18:51.370

尝试

```
<script type="text/javascript">
function attach(){
    $('#id_pageselect').on('change',function(){
       $('#display').load('/EmpServletSnipet',{page:$(this).val()});
       // attach again, because the old #id_pageselect is lost!
       attach();
    });
}
$(function(){
    attach();
})
</script> 
```

# c - 覆盖 gcov 函数以获取执行的代码行

> ID：14234975
> 
> 赞同：1
> 
> 时间：2013-01-09T12:14:27.157
> 
> 标签：c, linux, gcc, gcov

我想使用 gcov 获取项目的所有执行代码行。例如像这样的代码：

```
int main()
{
   int i=0;
   for(i=0;i<3;i++)printf("Hello");
   return 0;
} 
```

结果将是：

```
1)int i=0;
2)for(i=0;i<3;i++)
3)printf("Hello");
4)for(i=0;i<3;i++)
5)printf("Hello");
6)for(i=0;i<3;i++)
7)printf("Hello");
8)for(i=0;i<3;i++)
9)return 0; 
```

主要思想是通过重写 libgcov 来实现自己的 gcov 函数。之后结合使用它**gcc -fprofile-arcs -ftest-coverage *test.c -o test* -lanothergcov**。

那么，做这样的事情是否正确，否则它不会起作用，还有任何人有使用 gcov 的源代码从它获取所需信息的经验，它没有提供？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:02:40.057

简单地重写 libgcov 是不可能的。您必须重写相应的 gcc 代码，在每行之间注入计数器递增指令。

检测后，您的代码将基本上执行为：

```
 crt0: 
     __gcov_init(main_locals);
     main();
     __gcov_exit(); // dump the counters to files

 int main() {
     static GcovStruct_t local;
     local.Counter[0]++;
     for (i=0;i<3;i++) {
     local.Counter[1]++;
     printf("Hello");
     local.Counter[2]++;
     }
     local.Counter[3]++;
 } 
```

不过可能有一些事情要做，因为您可以使用它
`<prompt> gcc -S -fprofile-arcs -ftest-coverage`来获取中间 .s 文件：

```
 movq    .LPBX1(%rip), %rax
    addq    $1, %rax
    movq    %rax, .LPBX1(%rip) 
```

通过搜索和替换来修改这几乎是微不足道的：

```
 movq    .LPBX1(%rip), %rax   -> leaq    .LPBX1(%rip), %rax
    addq     $1, %rax            -> pushq %rax
                                    call     __init_add_line_number_to_list
    movq    %rax, .LPBX1(%rip)   -> -- remove this -- 
```

然后，您需要新引入的例程来增加 qword 指针并将该地址插入到一些额外的结构中，这些结构将由您接下来要修改的 gcov 工具处理。

# sql - 从 sql 中检索逗号分隔的记录

> ID：14234976
> 
> 赞同：0
> 
> 时间：2013-01-09T12:14:26.193
> 
> 标签：sql, mysqli

我在数据库中有树表

1.  学生 (student_id,first_name,last_name)
2.  员工（employee_id、full_name、last_name）
3.  消息（message_id、sender_id、reciever_ids、msg）

当学生/员工向学生或员工的 reciever_id 发送消息时，包含逗号分隔值，例如`1-1,2-45,1-25`)。

`2-45`显示它是雇员，45 是他的 id，在“1-25”中，1 显示它是学生，25 显示它是他的 id。

现在我怎样才能通过 reciever_ids 来获取相关记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:18:33.183

如果这只是一个分隔符问题，您可以将整个值括在引号中：

```
`receiver_ids`='1-1,2-45,1-25', 
```

# extjs - 如何在函数中设置 extjs 列？

> ID：14234986
> 
> 赞同：0
> 
> 时间：2013-01-09T12:14:54.820
> 
> 标签：extjs, extjs4

我有一个 EditorGridPanel，其中包含一些列，但我想根据某些值将其中一个类型更改为编辑器。

我的专栏如下：

```
header: dil('Fiyat'),
width: 30,
sortable: true,
renderer: Ext.util.Format.numberRenderer('$0.000,00/i'),
dataIndex: 'fiyat' 
```

但更改后，我想像这样工作：

```
header: dil('Fiyat'),
width: 30,
sortable: true,
renderer: Ext.util.Format.numberRenderer('$0.000,00/i'),
dataIndex: 'fiyat'
editor: new Ext.form.NumberField({
    enableKeyEvents : true,
    allowBlank: false,
    allowNegative: false,
    style: 'text-align:left'
}) 
```

我的整个代码：

```
var po_combolu_toolbar2 = new Ext.Toolbar({
    items: [
    new Ext.form.ComboBox({
        id: 'po_combo_id',
        hiddenName: 'po_combo_hid',
        name: 'po_combo_name',
        store: PoTipStore,
        valueField: 'id',
        displayField: 'isim',
        typeAhead: true,
        triggerAction: 'all',
        emptyText: dil('Tip Seçiniz'),
        selectOnFocus: true,
        anchor: '100%',
        listeners: {
            select: {
                fn: function (combo, value) {
                    var modelCmp = Ext.getCmp('po_combo_id').getValue();
                    po_siparis_grid.store.setBaseParam("secim", modelCmp);

                    if (Ext.getCmp('po_combo_id').getValue() == 5) {

                    } else {

                    }
                    po_siparis_grid.store.load(); 
                }
            }
        },
        allowBlank: true
    })]
});

var po_siparis_grid = new xg.EditorGridPanel({
    sm: new Ext.grid.RowSelectionModel({
        singleSelect: true
    }),
    ds: new Ext.data.GroupingStore({
        reader: po_siparis_reader,
        writer: po_siparis_writer,
        autoSave: false,
        baseParams: {
            type: 'POSiparis'
        },
        proxy: new Ext.data.HttpProxy({
            api: {
                read: {
                    url: 'phps/POSiparisGetir.php?lang=dil(lang)',
                    method: 'POST'
                },
                create: 'app.php/users/create',
                update: 'phps/POKayit.php?lang=dil(lang)',
                destroy: {
                    url: 'app.php/users/destroy',
                    method: "DELETE"
                }
            }    
        }),

        sortInfo: {
            field: 'id',
            direction: 'ASC'
        },
        listeners: {
            save: function (store, batch, data) {
                Ext.Msg.alert(dil('Mesaj'), dil('Kayıt Yapıldı.Teşekkürler.'));

                window.bolgesel.siparisler.genel.mnt.dataStoreUpdate = 0;
            },
            update: function () {
                window.bolgesel.siparisler.genel.mnt.dataStoreUpdate = 1;
            }
        },
        groupField: 'grup'
    }),
    columns: [{
        header: dil('Grup '),
        width: 20,
        sortable: true,
        dataIndex: 'grup'
    }, {
        header: dil('Item No'),
        width: 20,
        sortable: true,
        dataIndex: 'item_no'
    }, {
        header: dil('Kod'),
        width: 40,
        sortable: true,
        dataIndex: 'code'
    }, {
        header: dil('Açıklama'),
        sortable: true,
        dataIndex: 'aciklama'
    }, {
        header: dil('Fiyat'),
        id: "fiyat_column",
        width: 30,
        sortable: true,
        renderer: Ext.util.Format.numberRenderer('$0.000,00/i'),
        dataIndex: 'fiyat'    
    }, {
        id: "tipikeadet",
        header: dil('Adet'),
        width: 30,
        sortable: true,
        dataIndex: 'adet',
        editor: new Ext.form.NumberField({
            enableKeyEvents: true,
            allowBlank: false,
            allowNegative: false,
            style: 'text-align:left'
        })
    }, {
        header: dil('Toplam'),
        width: 30,
        sortable: true,
        renderer: function (v, params, record) {

            return Ext.util.Format.number(record.data.fiyat * record.data.adet, '$0.000,00/i');
        },

        dataIndex: 'toplam',
        summaryType: 'totalCost',
        summaryRenderer: Ext.util.Format.numberRenderer('$0.000,00/i')

    }],

    view: new Ext.grid.GroupingView({
        forceFit: true,
        showGroupName: false,
        enableNoGroups: false,
        enableGroupingMenu: false,
        hideGroupedColumn: true,
        startCollapsed: true
    }),

    plugins: summary,
    frame: true,
    width: 800,
    height: 250,
    clicksToEdit: 1,
    collapsible: false,
    animCollapse: false,
    trackMouseOver: false,
    enableColumnMove: false,
    iconCls: 'siparis'
}); 
```

我想更改 po_combolu_toolbar2 选择函数中的 fiyat 列指定。

# eclipse-plugin - eclipse插件源码

> ID：14234988
> 
> 赞同：1
> 
> 时间：2013-01-09T12:15:04.317
> 
> 标签：eclipse-plugin, xtext

我正在使用 eclipse 应用程序来运行我的 dsl。我想添加一个从正在运行的 ui 中获取文件并做某事的功能。

如何在运行时获取插件的文件目录？

谢谢，丹娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:42:32.823

```
myPlugin.getBundle().getLocation() 
```

或者

```
URL pluginUrl = myPlugin.getBundle().getEntry("/");
pluginUrl = FileLocator.resolve(pluginUrl);
File pluginLocation = new File(pluginUrl.getFile); 
```

# ios - 改变 UIBarButtonItem 的外观也会改变导航栏和工具栏的位置？

> ID：14234992
> 
> 赞同：0
> 
> 时间：2013-01-09T12:15:16.690
> 
> 标签：ios, ios5, uinavigationcontroller, uibarbuttonitem, uiappearance

再一次，我的自定义导航和工具栏有问题：我已经通过使用外观代理自定义了他们的 tintColor 和字体`didFinishLaunchingWithOptions`。最初应该通过将它们的中心设置在可见区域之外来隐藏条形图`viewDidLoad`。通过单击，我使用自己的动画将条滑入/滑出。
一切正常，直到下一步：
我希望 UIBarButtonItems 具有与我在栏中使用的相同的字体，所以我返回`didFinishLaunchingWithOptions`并添加了以下代码：

```
[[UIBarButtonItem appearance] setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
[UIFont fontWithName:FONT_HEADER size:0.0],UITextAttributeFont,nil] forState:UIControlStateNormal]; 
```

它对字体部分工作得很好，但不知何故，它也将条设置回之前的可见位置，`viewWillAppear`因此这些条最初不再隐藏。我试图找出导致这种无意义的重新定位的原因，但找不到任何联系。我还尝试在稍后的某个时间重新设置位置，`viewWillAppear`但这在某种程度上不适用于工具栏。

编辑：所描述的行为只发生在 iOS 5 的设备上。在 iOS6 模拟器上，一切似乎都还不错。

有没有人暗示我这里出了什么问题或者我如何顺利解决这个问题？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T16:17:44.983

```
 [[UIBarButtonItem appearance] setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
[UIFont fontWithName:FONT_HEADER size:0.0],UITextAttributeFont,nil] forState:UIControlStateNormal]; 
```

这里的 FONT_HEADER 是什么？您是否检查过 ios 5 是否支持此字体？

# android - Layout 的 weight_sum 归档 90% 的视图

> ID：14234993
> 
> 赞同：0
> 
> 时间：2013-01-09T12:15:17.907
> 
> 标签：android, android-layout

我确实有一个视图，看起来像这样的atm：

![在此处输入图像描述](../Images/6006afdab25d91730f126bd3cd9bd9b9.png)

我希望前 3 个黑色行填充约 70% 的屏幕。不管屏幕尺寸是多少。我以为我可以通过为布局分配权重来实现它，似乎并不那么容易。正如你所看到的，我用按钮实现了它，它们总是拉伸到宽度。

所以，这是我的 xml 代码：

```
 <LinearLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"        
    android:orientation="vertical" 
    android:id="@+id/main"
    android:weightSum="10" //mean summary 100%

    > 
<LinearLayout
    android:id="@+id/lin1"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:orientation="horizontal"
    android:weightSum="3"    
    android:layout_weight="2.3"   //23% for each row 
     >
    <Button
        android:id="@+id/button1"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_marginRight="2dp"
        android:layout_weight="1" 
        android:background="@drawable/greenbtn"
        android:onClick="onClick"
        android:text="Layout Normal" />

    <Button
        android:id="@+id/button2"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_marginRight="2dp"
       android:layout_weight="1" 
        android:background="@drawable/greenbtn"
        android:onClick="onClick"
        android:text="Pad2" />

    <Button
        android:id="@+id/button3"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_weight="1" 
        android:background="@drawable/greenbtn"
        android:onClick="onClick"
        android:text="Pad3" />
</LinearLayout>

<LinearLayout
    android:id="@+id/lin2"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_marginTop="2dp"
    android:orientation="horizontal"
    android:weightSum="3" 
    android:layout_weight="2.3" >

    <Button
        android:id="@+id/button4"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_marginRight="2dp"
        android:layout_weight="1"
        android:background="@drawable/greenbtn"
        android:onClick="onClick"
        android:text="Pad4" />

    <Button
        android:id="@+id/button5"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_marginRight="2dp"
        android:layout_weight="1"
        android:background="@drawable/greenbtn"
        android:onClick="onClick"
        android:text="Pad5" />

    <Button
        android:id="@+id/button6"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="@drawable/greenbtn"
        android:onClick="onClick"
        android:text="Pad6" />
</LinearLayout>

<LinearLayout
    android:id="@+id/lin3"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_below="@id/lin2"
    android:orientation="horizontal"
    android:weightSum="3"
    android:layout_weight="2.3"  >

    <Button
        android:id="@+id/button7"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_marginRight="2dp"
        android:layout_weight="1"
        android:background="@drawable/greenbtn"
        android:onClick="onClick"
        android:text="Pad7" />

    <Button
        android:id="@+id/button8"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_marginRight="2dp"
        android:layout_weight="1"
        android:background="@drawable/greenbtn"
        android:onClick="onClick"
        android:text="Pad8" />

    <Button
        android:id="@+id/button9"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="@drawable/greenbtn"
        android:onClick="onClick"
        android:text="Pad9" />
</LinearLayout>

    <LinearLayout
    android:id="@+id/lin5"
    android:layout_width="fill_parent"
    android:layout_below="@id/lin3"
    android:layout_height="60dp"
    android:layout_marginBottom="5dp"
    android:layout_marginTop="10dp"
    android:orientation="horizontal"
    android:layout_weight="2.1"  > //21% for toggles

    <ToggleButton
        android:id="@+id/toggleButton1"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:onClick="onClick"
        android:textOff="Loop1 Off"
        android:textOn="Loop1 ON" />

    <ToggleButton
        android:id="@+id/toggleButton2"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:onClick="onClick"
        android:textOff="Loop2 Off"
        android:textOn="Loop2 ON" />

    <ToggleButton
        android:id="@+id/toggleButton3"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:onClick="onClick"
        android:textOff="Loop3 Off"
        android:textOn="Loop3 ON" />

    <ToggleButton
        android:id="@+id/toggleButton4"
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:onClick="onClick"
        android:textOff="Loop4 Off"
        android:textOn="Loop4 ON" />
</LinearLayout>

<LinearLayout
    android:id="@+id/lin6"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
     android:layout_weight="1"       //10% for webview
     >

    <WebView
        android:id="@+id/webView"
        android:layout_width="match_parent"
        android:layout_height="50dp"

    />
</LinearLayout>
</LinearLayout> 
```

如您所见，在我的想法中，我为每个黑色行分配了 23% 的屏幕（23x3=69%），用于切换 21%，用于 webview 10%。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:27:07.380

@Daler 您正在尝试使用重量来平衡高度，因此您必须将 layout_height 设置为 0dp

另外，在我看来，您使用的 LinearLayout 太多了，也许您可​​以消除一些以节省内存、处理时间和响应能力。我猜是这样的：

```
<Linear Layout - vertical - match_parent >

   // 0.269 * 3 = 0.7
   <linear layout 1 - horizontal weight = 0.269 layout_height=0dp> the three views </>
   <linear layout 2 - horizontal weight = 0.269 layout_height=0dp> the three views </>
   <linear layout 3 - horizontal weight = 0.269 layout_height=0dp> the three views </>
    // the other 30%
   <linear layout 4 - horizontal weight = 0.15 layout_height=0dp> the three views </>
   <linear layout 5 - horizontal weight = 0.15 layout_height=0dp> the three views </>

</end the top linear layout> 
```

假设黑色区域的 3 行应该是 70%。这就是我从你的形象中理解的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T12:24:09.093

如果你把

```
 android:layout_weight="1" 
```

并且您的 weightSum 为 10，那么默认情况下将占用 90%。如果您想在任何布局上仅以 10% 显示您的按钮，则必须将 weight 属性设置为 9（如果 weightsum 为 10）。

有关 WeightSum 和 Weight Attributes 的更多说明，请参阅[此处](http://developer.android.com/reference/android/widget/LinearLayout.html#attr_android%3aweightSum) 。希望它会有所帮助。

# mysql - 如何避免“用于此报告的数据处理扩展不可用。它要么已被卸载，要么配置不正确”

> ID：14234996
> 
> 赞同：0
> 
> 时间：2013-01-09T12:15:21.357
> 
> 标签：mysql, reporting-services, odbc

我在我的项目中使用 ODBC 中的“MYSQL”数据源。

我的部署失败并出现错误“错误 1 ​​已尝试使用未为此报表服务器注册或在此版本的 Reporting Services 中不受支持的数据扩展 'ODBC'。0 0”

当我转到我的经理网址“http://localhost/Demo_Reports/Pages/DataSource.aspx”时，我在“数据源类型”下的“属性”中找到了以下内容

“用于此报告的数据处理扩展程序不可用。它要么已被卸载，要么配置不正确”

要避免此错误，应采取哪些步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T20:17:44.813

按照此处的说明进行操作： [http ://technet.microsoft.com/en-us/library/ms155086.aspx](http://technet.microsoft.com/en-us/library/ms155086.aspx)

基本上，您需要确保 DataExtension 已安装并在 ReportServer.config 文件中进行配置