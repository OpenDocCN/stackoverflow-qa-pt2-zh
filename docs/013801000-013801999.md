# StackOverflow 问答 13801000-13801999

# java - Android 代码生成（Java 和 XML）

> ID：13801008
> 
> 赞同：0
> 
> 时间：2012-12-10T12:31:05.727
> 
> 标签：java, php, android, xml, code-generation

我需要使用 Java 源代码和 XML 布局（建模）生成一个 Android 应用程序项目 - 所以实际上我正在生成稍微修改的默认 Android 项目（所以没有编辑/转换等，只是从头开始建模）。它必须在服务器端生成，因此我对基于 Eclipse 的插件或类似的东西不感兴趣。

是否有基于 PHP 的工具？

如果不是，我想我应该使用 FreeMarker 或 CodeModel（基于 Java）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:49:50.310

Android 项目实际上是使用一些特殊库和不同编译器的常规 Java 项目（Android 的 Java 虚拟机 Dalvik 不执行普通的 Java 字节码。它执行特定于它的字节码）。因此，最有可能的是，您可以使用任何能够处理 Java 代码（并且也许能够运行 Ant 和 GIT 命令...）的代码生成工具来完成此任务。

对于代码生成，一般来说，几乎所有文本处理工具或语言都可以使用。有一些用 Python、Ruby 和 Perl 编写的代码生成工具。很可能会有一个或多个用 PHP 编写。在某些情况下，甚至可以使用在 web-dev 世界中用于从 HTML 模板和 PHP 脚本生成 HTML 页面的模板引擎之一进行代码生成。

XML 也是（几乎）如此。您可以使用普通的“模板引擎”从模板生成 XML。Web 开发中使用的许多模板引擎都明确支持 XML。尽管如此，还有其他（也许更好，在任何情况下更具体）工具来生成 XML。只是谷歌周围的“XML 转换工具”。

# php - 重构简单函数

> ID：13801015
> 
> 赞同：0
> 
> 时间：2012-12-10T12:31:45.940
> 
> 标签：php, refactoring

我需要以人类可读的格式显示当前记录状态。在我的数据库中，我有一个 int 字段，所以记录可能有状态 1、2、3、4 等

我写了一些代码来向用户显示当前状态：

```
<?php 
// code to retrieve current status from DB
// ...

if ($status == '1') {
    echo "Current status: Active";
}
if ($status == '2') {
    echo "Current status: Pending";
}
    if ($status == '3') {
    echo "Current status: Inactive";
}

// etc..

?> 
```

这段代码看起来很丑陋，但我不知道如何重构它以使其更有效并且没有无限系列的条件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T12:33:53.857

做一个数组：

```
$statvalue=array(1=>'Active',2=>'Pending',3=>'Inactive');
echo("Current status: {$statvalue[$status]}"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T12:34:34.207

最好用数组解决这个问题：

```
function foo($status) {
    $strings = array(
        '1' => "Current status: Active",
        '2' => "Current status: Pending";
        '3' => "Current status: Inactive";
    );

    return $strings[$status];
} 
```

语法要短得多，您可以在以后通过向数组添加键来扩展它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T12:32:26.963

试试[Switch](http://php.net/manual/en/control-structures.switch.php)语句

```
switch($status){
  case '1':
   echo "Current status: Active";
   break;

  case '2':
    echo "Current status: Pending";
    break;

 case '3':
    echo "Current status: Inactive";
   break;
 default:
   echo "i is not equal to  1,2 or 3";
} 
```

删除，因为。更好的方法是[JamWaffles 的回答](https://stackoverflow.com/a/13801050/1723893)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-10T12:34:46.393

您可以创建一个引用状态的数组：

```
<?php
$status_cases = ['active', 'pending', 'inactive'];

echo "Current status: ". $status_cases[$status - 1]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-10T12:42:28.547

你可以做很多事情来改善这一点。

首先，许多开发人员更喜欢使用常量值进行比较，如下所示：

```
if ('1' == $status) { 
```

这使得意外使用赋值运算符（“=”）而不是相等运算符（“==”）更难，这往往会产生有趣的错误。

其次，正如 MortenSickel 和 Thomas Ruiz 所写，用查找替换这种语句是个好主意。MortenSickel 的答案更好，因为这意味着您可以在数组中有间隙，并且不必用任意整数位置来协调您的数组总体 - 明确总是更好。

然而，我的建议是将状态描述放入数据库中 - 可能在多个位置（填充数据库的代码、读取它的代码、报告等）需要此信息，并在整个数据库中进行协调多个代码位置听起来是个坏主意。

# linux - libglib 中的 Java 分段错误（Red Hat Enterprise Linux Server 版本 5.5）

> ID：13801017
> 
> 赞同：1
> 
> 时间：2012-12-10T12:31:52.387
> 
> 标签：linux, jboss, segmentation-fault, java

有没有人在 libglib g_list_last 中看到过以下 Java 分段错误？堆栈只显示 g_list_last ，它说“当前线程是本机线程”。Java 6 VM 正在运行 JBOSS 6，并且没有自定义本机代码。
服务器正常运行几个小时然后中断......总是出现完全相同的错误。我正在发布 hs_err 文件中最有趣的摘录。

提前感谢您提供任何线索！

问候，
道格

* * *

```
    #
    # Java 运行时环境检测到一个致命错误：
    #
    # SIGSEGV (0xb) at pc=0x0000003e5022a5e3, pid=14845, tid=1196464448
    #
    # JRE 版本：6.0_23-b05
    # Java VM：Java HotSpot(TM) 64 位服务器 VM（19.0-b09 混合模式 linux-amd64 压缩 oops）
    # 有问题的框架：
    # C [libglib-2.0.so.0+0x2a5e3] g_list_last+0x13
    #
    # 如果您想提交错误报告，请访问：
    # http://java.sun.com/webapps/bugreport/crash.jsp
    #

    -  -  -  -  -  -  - - 线  -  -  -  -  -  -  - -

    当前线程是本机线程

    siginfo:si_signo=SIGSEGV: si_errno=0, si_code=1 (SEGV_MAPERR), si_addr=0x0000010068f06abb

    寄存器：
    RAX=0x0000010068f06ab3，RBX=0x000000004d59ee10，RCX=0x000000004e60aeb0，RDX=0x0000000000000000
    RSP=0x0000000047508e18，RBP=0x00002aaab9afcca0，RSI=0x00002aaab9afcca0，RDI=0x0000010068f06ab3
    R8=0x0000000000000001，R9=0x0000000000003a93，R10=0x0000000000000000，R11=0x0000003e5022abb0
    R12=0x000000047c6556b8，R13=0x00002aaab8c7a3f0，R14=0x000000004d698e40，R15=0x000000004da3c4b0
    RIP=0x0000003e5022a5e3，EFL=0x0000000000010202，CSGSFS=0x0000000000000033，ERR=0x0000000000000004
      TRAPNO=0x000000000000000e

```

...

```
    R11=0x0000003e5022abb0
    0x0000003e5022abb0：g_list_append+0 在 /lib64/libglib-2.0.so.0 在 0x0000003e50200000

    R12=0x000000047c6556b8

    [报错时发生错误（打印寄存器、栈顶、pc附近的指令），id 0xb]

    堆栈：[0x00000000474c9000,0x000000004750a000]，sp=0x0000000047508e18，可用空间=255k
    本机帧：（J=编译的 Java 代码，j=解释的，Vv=VM 代码，C=本机代码）
    C [libglib-2.0.so.0+0x2a5e3] g_list_last+0x13

    -  -  -  -  -  -  - - 过程  -  -  -  -  -  -  - -

    VM 状态：不在安全点（正常执行）

    VM Mutex/Monitor 当前由一个线程拥有：无

    堆
     PSYoungGen 总计 4767296K，已使用 4345622K [0x00000006c2800000, 0x0000000800000000, 0x0000000800000000)
      伊甸园空间 4368704K, 99% 已使用 [0x00000006c2800000,0x00000007caaac208,0x00000007cd250000)
      从空间 398592K，使用 4% [0x00000007cd250000,0x00000007ce369990,0x00000007e5790000)
      到空间 373184K，使用 0% [0x00000007e9390000,0x00000007e9390000,0x0000000800000000)
     PSOldGen 总计 10403840K，已使用 1828930K [0x0000000447800000, 0x00000006c2800000, 0x00000006c2800000)
      对象空间 10403840K，已使用 17% [0x0000000447800000,0x00000004b7210910,0x00000006c2800000)
     PSPermGen 总计 288448K，已使用 288427K [0x0000000347800000, 0x00000003591b0000, 0x0000000447800000)
      对象空间 288448K，已使用 99% [0x0000000347800000,0x00000003591aaf10,0x00000003591b0000)

```

...

```
    -  -  -  -  -  -  - - 系统  -  -  -  -  -  -  - -

    操作系统：Red Hat Enterprise Linux Server 5.5 (Tikanga)

    uname:Linux 2.6.18-194.el5 #1 SMP Tue Mar 16 21:52:39 EDT 2010 x86_64
    libc:glibc 2.5 NPTL 2.5
    rlimit：堆栈 10240k，核心 0k，NPROC 1056767，NOFILE 16384，AS 无穷大
    平均负载：1.01 0.58 0.40

    /proc/meminfo：
    内存总量：132086452 kB
    内存免费：12656648 kB
    缓冲区：1441372 kB
    缓存：107627992 kB
    交换缓存：0 kB
    活跃：77778444 kB
    非活动：39851400 kB
    总高：0 kB
    高免费：0 kB
    低总计：132086452 kB
    低免费：12656648 kB
    交换总数：61440552 kB
    无交换：61440552 kB
    脏：864 kB
    写回：0 kB
    AnonPages：8560164 kB
    映射：84312 kB
    平板：1645472 kB
    页表：31956 kB
    NFS_Unstable：0 kB
    反弹：0 kB
    提交限制：127483776 kB
    已提交_AS：20373196 kB
    Vmalloc总计：34359738367 kB
    Vmalloc已使用：297932 kB
    VmallocChunk：34359436991 kB
    HugePages_Total: 0
    HugePages_Free: 0
    HugePages_Rsvd：0
    巨页大小：2048 kB

    CPU：共 32 个（每个 cpu 8 个内核，每个内核 2 个线程）系列 6 型号 47 步进 2、cmov、cx8、fxsr、mmx、sse、sse2、sse3、ssse3、sse4.1、sse4.2、popcnt、ht

    内存：4k页，物理132086452k（12656648k免费），交换61440552k（61440552k免费）

    vm_info：用于 linux-amd64 JRE (1.6.0_23-b05) 的 Java HotSpot(TM) 64 位服务器 VM (19.0-b09)，由“java_re”和 gcc 3.2.2 于 2010 年 11 月 12 日 14:12:21 构建（ SuSE Linux)

```

# c# - 在 PDF 中创建不同大小和列的表格

> ID：13801021
> 
> 赞同：-2
> 
> 时间：2012-12-10T12:32:16.790
> 
> 标签：c#, itextsharp

如何在 C# 中使用 itextSharp 在 PDF 中创建具有不同列数、大小的表格。

表格1）

```
Column1     Column2     Column3     Column4     Column5     Column6 
```

表 2)

```
Col1        Col2        Col3 
```

它必须看起来像

```
Column1     Column2     Column3     Column4     Column5     Column6
Col1        Col2        Col3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T12:40:28.143

像这样的东西？

```
 Document doc        = new Document(PageSize.A4);

    PdfPTable aTable                = new PdfPTable(6);
    aTable.HorizontalAlignment      = Element.ALIGN_LEFT;
    aTable.WidthPercentage          = 100;
    aTable.AddCell("Column 1");
    aTable.AddCell("Column 2");
    aTable.AddCell("Column 3");
    aTable.AddCell("Column 4");
    aTable.AddCell("Column 5");
    aTable.AddCell("Column 6");

    doc.Add(aTable);

    PdfPTable tp                    = new PdfPTable(3);
    tp.HorizontalAlignment          = Element.ALIGN_LEFT;
    tp.WidthPercentage              = 50;
    //tp.SetWidths(new []{60f, 20f, 20f});
    tp.AddCell("Col 1");
    tp.AddCell("Col 2");
    tp.AddCell("Col 3");

    doc.Add(tp); 
```

# c++ - C++：垃圾收集

> ID：13801025
> 
> 赞同：0
> 
> 时间：2012-12-10T12:32:30.550
> 
> 标签：c++

我有一个像这样的代码：

```
class A{
public:
void method1 (){
// do something
}
};

class B{
public:
void method2 (){
// do something
}
};

main(int argc, char* argv[])
{
A a ;
a.method1();
// free object a
B b ;
b.method2();
} 
```

现在，在创建 b 对象之前，我想释放 a 分配的内存。有人可以帮我怎么做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T12:34:11.893

您只需要添加额外的范围`{`，，`}`因为`a`是一个自动/本地对象，一旦声明它的范围结束，它将自动销毁。

```
main(int argc, char* argv[])
{
    {                    //<--------------
        A a ;
        a.method1();
    }                    //<-------------
    B b ;
   b.method2();
} 
```

这在 C++中也通常称为**[RAII 。](https://stackoverflow.com/questions/2321511/what-is-meant-by-resource-acquisition-is-initialization-raii)**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T12:33:56.017

如果你需要这样做，我想我应该首先指出这是一种代码味道。销毁对象不应该是创建新对象的先决条件。如果是的话，你最好把它抽象出来。

不过，这里是：

```
main(int argc, char* argv[])
{
   {
      A a ;
      a.method1();
   }// free object a
   B b ;
   b.method2();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T12:34:17.340

您应该使用新的范围和自动对象，但这里也是如何使用动态分配的示例。

```
main(int argc, char* argv[]) {
    A* a = new A();
    a.method1();
    delete a;

    B* b = new B();
    b.method2();
    delete b;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T13:23:55.003

这取决于你的内存是如何分配的。

**对于您粘贴的代码：**

```
g++ -gstabs -o a cpptest.cpp 
objdump -d ./a

0000000000400554 <main>:
  400554:   55                      push   %rbp
  400555:   48 89 e5                mov    %rsp,%rbp
  400558:   48 83 ec 20             sub    $0x20,%rsp
  40055c:   89 7d ec                mov    %edi,-0x14(%rbp)
  40055f:   48 89 75 e0             mov    %rsi,-0x20(%rbp)
  400563:   48 8d 45 ff             lea    -0x1(%rbp),%rax
  400567:   48 89 c7                mov    %rax,%rdi
  40056a:   e8 13 00 00 00          callq  400582 <_ZN1A7method1Ev>
  40056f:   48 8d 45 fe             lea    -0x2(%rbp),%rax
  400573:   48 89 c7                mov    %rax,%rdi
  400576:   e8 11 00 00 00          callq  40058c <_ZN1B7method2Ev>
  40057b:   b8 00 00 00 00          mov    $0x0,%eax
  400580:   c9                      leaveq 
  400581:   c3                      retq 
```

在这种确切的情况下，您的对象 a/b 的内存在堆栈中。分配者

```
400558:   48 83 ec 20             sub    $0x20,%rsp 
```

由于你的类中没有成员变量，你的类的实例将消耗 1 个字节（由 c++ 编译器完成，用于区分类的实例）

你会看到 a 的“this”指针被转移到 _ZN1A7method1Ev (method1)

```
 400563:   48 8d 45 ff             lea    -0x1(%rbp),%rax
  400567:   48 89 c7                mov    %rax,%rdi 
```

在这个确切的代码案例中，您不需要也不能在 b 之前释放 a 的内存（在堆栈上）。

*   如果您的意思是 A. 通过 malloc/new 分配的内存。那么你应该在 A 的析构函数中编写自由/删除代码。并将 a 放入由 {} 包装的范围内，当 a 超出范围时将调用析构函数（由 c++ 编译器自动完成）。就像提到的@Alok 和@Luchian 一样。

*   如果您的内存以成员变量的形式分配，如下所示：

    A类{ char foo[16]; };

    当代码为`A a;` “foo”时，作为 A 实例的一部分在堆栈上分配。你不能做任何事情。

    当代码是`A *pa = new A();` 然后在 A 上分配对象时，请随意删除它。 `delete pa;`

# iphone - xcode中的UIActivityIndi cator？

> ID：13801026
> 
> 赞同：-1
> 
> 时间：2012-12-10T12:32:32.110
> 
> 标签：iphone, xcode, uiactivityindicatorview

我正在尝试 UIActivityIndi​​cator 的概念。在第一个视图中，我有一个 tableView 加载了数据和相应的附件按钮。因此，当点击 tableViewCell 的附件按钮时，将加载 DetailsView。同时，我在点击附件按钮时添加了一个 activityIndi​​cator。

```
- (void) tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath
{
    activityIndicator = [[UIActivityIndicatorView alloc]initWithFrame:CGRectMake(143, 220, 37, 37)];
    activityIndicator.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhiteLarge;
    activityIndicator.color = [UIColor blackColor];
    [self.view addSubview:activityIndicator];
   [activityIndicator startAnimating];
    activityIndicator.frame=CGRectMake(140, 195, 37, 37);

DetailsView *detailView= [[DetailsView alloc] initWithNibName:@"DetailsView" bundle:nil];
        detailView.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
  UILabel *empid=(UILabel*)[cell viewWithTag:117];
        detailView.Id=[empid text];
        [self presentModalViewController: detailView animated:NO];
        [detailView release];
} 
```

然后在 DetailsView 基于它从 firstView 收到的 empid 它加载一些数据

```
- (void)viewDidLoad
{
  activityIndicator = [[UIActivityIndicatorView alloc]initWithFrame:CGRectMake(143, 220, 37, 37)];
    activityIndicator.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhiteLarge;
    activityIndicator.color = [UIColor blackColor];
    [self.view addSubview:activityIndicator];
     activityIndicator.frame=CGRectMake(140, 195, 37, 37);
////loads data from service url and parsing is done

 [activityIndicator stopAnimating];
} 
```

直到这里它工作得很好。我在 DetailsView 中有一个后退按钮，每当按下它时，presentmodalViewController 就会被解除。

```
-(IBAction)btnBack
{

  [self dismissModalViewControllerAnimated:NO];
} 
```

但现在的问题是我可以看到presentmodalViewController 被解除，但是当点击附件按钮时开始动画的activityindicator 仍然在动画。那么当presentView 被解除时，我如何停止动画activityIndi​​cator 并只显示prevoius 视图的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:41:29.900

在第一个视图的 ViewWillAppear 方法中写下面的代码

```
[activityIndicator hidesWhenStopped]; 
```

告诉我它是否有效！

编码快乐！！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:48:13.310

使用以下代码

```
-   (void) tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath

  {

      detailView.Id=[empid text];

     [activityIndicator stopAnimating];

     [self presentModalViewController: detailView animated:NO];

       } 
```

或在您`viewWillDisappear`的 FirstView 中

```
 {

 [activityIndicator stopAnimating];

 [activityIndicator removeFromSuperView]; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T12:35:14.443

在方法中的`DetailsView`类中，`viewDidLoad`只需将 activityIndi​​cator 添加为子视图并开始像下面这样设置动画..

```
- (void)viewDidLoad
{
  activityIndicator = [[UIActivityIndicatorView alloc]initWithFrame:CGRectMake(143, 220, 37, 37)];
    activityIndicator.activityIndicatorViewStyle = UIActivityIndicatorViewStyleWhiteLarge;
    activityIndicator.color = [UIColor blackColor];
    [self.view addSubview:activityIndicator];
     activityIndicator.frame=CGRectMake(140, 195, 37, 37);

    [activityIndicator startAnimating];
} 
```

而且`stopAnimating`当您的数据下载完成或失败时，也可以在下面的方法中添加`btnBack`方法或`viewWillDisappear`只添加下面的代码

```
[activityIndicator stopAnimating];
[activityIndicator removeFromSuperview];///Add this line if you want to remove from superview 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-10T12:37:58.983

在第`viewWillAppear`一个**视图**中添加`[activityIndicator stopAnimating];`

```
 -(void)viewWillAppear:(BOOL)animated
{
  if (activityIndicator)
  {
     [activityIndicator stopAnimating];
  }
} 
```

# java - 为了保留引用而声明嵌套类非静态？

> ID：13801027
> 
> 赞同：1
> 
> 时间：2012-12-10T12:32:33.520
> 
> 标签：java, swing, static, inner-classes

假设我有一个`JDialog`（称为`BrushListDialog`）的专门子类，其中我有一个`JList`. 该列表使用自定义列表模型（扩展`DefaultListModel<String>`）和自定义单元格渲染器（扩展`DefaultListCellRenderer`）。为了便于阅读，我将这些类嵌套在主类中。

通常，我会将这些类设为静态（我为单元格渲染器*所做*的），但列表模型类具有以下方法：

```
private boolean showRemoveConfirmDialog(Object elem) {
    int option = JOptionPane.showConfirmDialog(BrushListDialog.this,
            elem + " is a default brush type.\nDo you want to allow the removal of such entries?",
            "Remove", JOptionPane.YES_NO_OPTION, JOptionPane.WARNING_MESSAGE);
    if (option == JOptionPane.YES_OPTION) {
        TYPES.clear();
        return true;
    }
    return false;
} 
```

如您所见，它依赖于顶级类的实例来确定`JOptionPane`的显示位置。`BrushListDialog.this`，当然，不能在静态上下文中调用，因此嵌套类不能是静态的。

我看到了三种处理方法（使用`null`第一个参数 in`showConfirmDialog`不是一个选项）：

1.  保持单元格渲染器静态，但将列表模型设为内部类以便能够调用`BrushListDialog.this`.
2.  将两个嵌套类设为静态，并通过列表模型的构造函数传递当前`BrushListDialog`实例。
3.  使用 Swing 实用程序方法来遍历组件并找到一个实例`BrushListDialog`（在我看来这很 hacky）。

所以我问你：为了能够访问父对话框的实例而保持列表模型非静态值得吗？

[两个嵌套类的源代码](https://gist.github.com/4250287)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:39:37.060

我个人不会认为需要将类重构为非静态的——我们不是在谈论巨大的开销，只是在实践中的一个引用。鉴于此，它归结为更具可读性和可维护性的选项；我认为将代码保持原样最好属于该类别。

也就是说，如果你真的想让它成为静态的，我会选择你在第一个那里呈现的第二个选项。

您添加的第三个听起来很糟糕 - 绝对远离那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:44:15.027

就 JVM 而言，选项 (1) 和 (2) 通常是相同的 - Java 编译器隐式创建对父类的引用和适当的构造函数。

我会根据您是否需要在父类之外使用该类来决定静态与嵌套。如果不是，则使用嵌套类来避免必须显式编写父参考代码 - 但要注意由不正确的访问说明符创建的隐式访问委托方法。

选项（3）听起来像一个非常脆弱的黑客，我会不惜一切代价避免......

# continuous-integration - CCNet - 没有办法在逻辑上反转触发器？

> ID：13801032
> 
> 赞同：0
> 
> 时间：2012-12-10T12:33:14.543
> 
> 标签：continuous-integration, cruisecontrol.net

我配置了以下触发器，以便成功构建项目 A 或项目 B 将触发该项目 (C)：

```
<triggers>
  <multiTrigger operator="And">
    <triggers>
      <multiTrigger operator="Or">
        <triggers>
          <projectTrigger serverUri="tcp://localhost:21235/CruiseManager.rem" project="A" >
            <triggerFirstTime>False</triggerFirstTime>
            <triggerStatus>Success</triggerStatus>
            <innerTrigger type="intervalTrigger" seconds="60" buildCondition="ForceBuild" />
          </projectTrigger>
          <projectTrigger serverUri="tcp://localhost:21235/CruiseManager.rem" project="B">
            <triggerFirstTime>False</triggerFirstTime>
            <triggerStatus>Success</triggerStatus>
            <innerTrigger type="intervalTrigger" seconds="60" buildCondition="ForceBuild" />
          </projectTrigger>
        </triggers>
      </multiTrigger>
      <scheduleTrigger time="20:30" buildCondition="ForceBuild">
        <weekDays>
          <weekDay>Monday</weekDay>
          <weekDay>Tuesday</weekDay>
          <weekDay>Wednesday</weekDay>
          <weekDay>Thursday</weekDay>
          <weekDay>Friday</weekDay>
        </weekDays>
      </scheduleTrigger>
    </triggers>
  </multiTrigger>
</triggers> 
```

但是，我真正想要的是只有在项目 A 和 B 的最后一次构建都成功的情况下才能构建项目 C。我认为像下面这样的东西会起作用，但似乎没有任何方法可以在逻辑上反转 projectTrigger。

```
<triggers>
  <multiTrigger operator="And">
    <triggers>
      <multiTrigger operator="Or">
        <triggers>
          <projectTrigger serverUri="tcp://localhost:21235/CruiseManager.rem" project="A" >
            <triggerFirstTime>False</triggerFirstTime>
            <triggerStatus>Success</triggerStatus>
            <innerTrigger type="intervalTrigger" seconds="60" buildCondition="ForceBuild" />
          </projectTrigger>
          <projectTrigger serverUri="tcp://localhost:21235/CruiseManager.rem" project="B">
            <triggerFirstTime>False</triggerFirstTime>
            <triggerStatus>Success</triggerStatus>
            <innerTrigger type="intervalTrigger" seconds="60" buildCondition="ForceBuild" />
          </projectTrigger>
        </triggers>
      </multiTrigger>
      <projectTrigger serverUri="tcp://localhost:21235/CruiseManager.rem" project="A" >
        <triggerFirstTime>False</triggerFirstTime>
        <triggerStatus>NotFailure</triggerStatus>
        <innerTrigger type="intervalTrigger" seconds="60" buildCondition="ForceBuild" />
      </projectTrigger>
      <projectTrigger serverUri="tcp://localhost:21235/CruiseManager.rem" project="B">
        <triggerFirstTime>False</triggerFirstTime>
        <triggerStatus>NotFailure</triggerStatus>
        <innerTrigger type="intervalTrigger" seconds="60" buildCondition="ForceBuild" />
      </projectTrigger>
      <scheduleTrigger time="20:30" buildCondition="ForceBuild">
        <weekDays>
          <weekDay>Monday</weekDay>
          <weekDay>Tuesday</weekDay>
          <weekDay>Wednesday</weekDay>
          <weekDay>Thursday</weekDay>
          <weekDay>Friday</weekDay>
        </weekDays>
      </scheduleTrigger>
    </triggers>
  </multiTrigger>
</triggers> 
```

还有另一种方法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:31:50.930

CC.net 似乎没有提供否定触发逻辑的方法。可以理解，考虑到触发器告诉 CC.net 何时执行源代码控制块（检查修改）并开始集成。但是，您可以使用带有 的**`sourcecontrol`**块**`type="external"`**，它允许您使用自己的可执行文件来决定是否开始集成。

有时我还使用文件系统源代码控制块在某个文件更改时开始集成。例如当`c:\onsuccess\success.txt`用于表示成功时，已更新。

```
<sourcecontrol type="filesystem">
   <repositoryRoot>c:\onsuccess</repositoryRoot>
   <ignoreMissingRoot>true</ignoreMissingRoot>
 </sourcecontrol> 
```

**附录**：[相关文档的链接](http://www.cruisecontrolnet.org/projects/ccnet/wiki/External)

# ruby-on-rails - Rails 从一种形式创建两个对象

> ID：13801034
> 
> 赞同：0
> 
> 时间：2012-12-10T12:33:20.973
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有两个模型，它们之间具有 has_one 关系。`Event`"has_one"的类`Location`。我想要实现的是我创建一个事件的形式，我有一个“在哪里？” 通过 Foursquare API 异步填充的字段。

因为我不可能将整个 Foursquare API 迁移到我自己的数据库中，所以我想在事件中第一次提到位置时在我的数据库中生成一个 Location 条目。

目前我正在寻找的结果已经完成，但我认为我正在使用许多隐藏字段和许多 javascript 分配。有没有比我用来达到相同结果的更好的做法？

**新的.html.erb**

```
<%= form_for :event, :url=> new_event_path, :method => :get, :remote => :true, :html => {:class => 'form-horizontal'} do |f| %>

   <%= fields_for :location do |f1|%>
   <%= f1.hidden_field :lat, :id=> 'foursquare-latitude' %>
   <%= f1.hidden_field :lng, :id => 'foursquare-longitude' %>
   <%= f1.hidden_field :foursquare_id, :id =>'foursquare-id' %>
   <%= f1.hidden_field :name, :id =>'location-name-field' %>

    <% end %>

    <!-- TODO Encapsulate in location model -->
    <%= f.hidden_field :latitude, :id=>'latitude-field' %>
    <%= f.hidden_field :longitude, :id=>'longitude-field' %>

<div class="control-group">
  <%= f.label :title , :class => "control-label" %>
  <div class="controls">
    <%= f.text_field :title %>
  </div>
</div>
<div class="control-group">
  <label class="control-label" for="location">Where?</label>
  <div class="controls">
    <input type="text" id="location" data-provide="typeahead">
    <br/>
    <img src="../img/fsq.png" alt="Powered By Foursquare" width="240px" />
  </div>
</div>
<div class="control-group">
  <%= f.label :body, :class => "control-label" %>
  <div class="controls">
    <%= f.text_area :body, :rows => 6 %>
  </div>
</div>
<div class="control-group">
  <div class="controls">
    <%= f.submit %>
  </div>
</div>

<% end %> 
```

**事件控制器**

```
 def new
    @location = Location.new(params[:location])
    if @location.save
      @event = Event.new(params[:event])
      @event.author = current_user
      @event.location_id = @location.id
      respond_to do |format|
        if @event.save
          format.js  {render :action => "new"}
        else
          format.js  {render :action => "new"}
        end
      end
    end
  end 
```

# youtube-api - Youtube PlayVideoAt() 总是播放第一个视频

> ID：13801036
> 
> 赞同：2
> 
> 时间：2012-12-10T12:33:30.250
> 
> 标签：youtube-api, youtube-javascript-api

我正在尝试在 Youtube 播放列表中随机播放视频。我知道 setShuffle 函数中有一个错误，所以我将随机生成一个随机数，然后使用 .playVideoAt 函数播放该视频。

问题是当我执行 .playVideoAt 函数时，它会忽略它并只播放第一个视频。这是我启动播放器的代码（标准的东西）：

```
var player;
    function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
            height: '390',
            width: '640',
            playerVars: 
      {
        listType:'playlist',
        list: 'PLmHQS8zAl1Bd5elzBYWqucXDK-wv1Xfha'
      },
            events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
            }
        });

    } 
```

还有我启动播放器的代码。为了测试，我只是将它设置为视频 2（共有 4 个）。

```
 function onPlayerReady(event) {

        player.setLoop(true);
        event.target.playVideoAt(2);

    } 
```

我缺少 playVideoAt 函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-10T04:50:30.273

您直接受到错误的影响 - playVideoAt() 会清除播放列表。

重现问题的步骤：

1.  转到：[https ://developers.google.com/youtube/youtube_player_demo](https://developers.google.com/youtube/youtube_player_demo)

2.  content: '加载一个播放列表' 并添加一个播放列表 ID

3.  单击“下一步” - 请注意 nextVideo(); 在应该为下一个视频显示价值的地方没有价值。

谷歌论坛主题：[https ://productforums.google.com/forum/#!msg/youtube/buTk8H36mEs/ridlaT-c_YIJ](https://productforums.google.com/forum/#!msg/youtube/buTk8H36mEs/ridlaT-c_YIJ)

# matlab - matlab可以读取和显示多大的图像？

> ID：13801038
> 
> 赞同：1
> 
> 时间：2012-12-10T12:33:40.563
> 
> 标签：matlab

我在读取图像时遇到问题。我想确定在 matlab 中可以读取和显示多大的图像？可以显示像 (12689,4562,7) 这样的大图像。如果没有，如何检查此图像是否在 matlab 中正确加载？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:41:33.553

这里有两个问题：

1.  是否可以将大图像从磁盘加载到 RAM？
2.  可以显示大图吗？

第一个问题的答案是，它取决于您的 RAM 数量和操作系统。第二个问题的答案是 Matlab（或任何程序）在显示之前缩小图像，因为图像上没有那么多像素。因此，这取决于内部算法，同样取决于您的 RAM 量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:33:26.067

此类图像所需的 RAM 数为（假设 8 位/像素 ( `uint8`)）：

```
12689*4562*7 / 1e6 = 405.2 MB 
```

您的 Matlab 版本中单个矩阵可以包含的元素数量：

```
[~, numEls] = computer; 
```

这是`2.147483647e+09`在我的 32 位 R2010b 上。这远远超过`12689*4562*7`，所以原则上，如果您有 406GB 的未使用 RAM，您应该能够将整个图像加载到 RAM 中。原则上，*显示*所述图像将涉及一些额外的 RAM（并且可能需要很**长时间**），但仍然应该是可能的（除了显示具有 7 个颜色层的图像不是非常标准的 AFAIK 的事实之外）。

# r - R：geom_text 的视觉错误和具有多个因素的图例

> ID：13801039
> 
> 赞同：1
> 
> 时间：2012-12-10T12:33:43.843
> 
> 标签：r, ggplot2

我遇到了麻烦`geom_text`，我有两组点，它们的颜色不同，并使用线性模型为两组点拟合了一条线。

当我尝试添加直线方程、皮尔逊相关性和斯皮尔曼相关性时，图例中会出现一个字母，并且文本会变得像素化。我该如何纠正？

当我单独绘制它们时，我没有遇到这个问题，但我将它们集中在一起。

```
library(ggplot2)
library(reshape2)

lm_eqn = function(df){
    m = lm(area ~ Mass, df);
    eq <- substitute(italic(y) == a + b %.% italic(x)*","~~italic(r)^2~"="~r2, 
         list(a = format(coef(m)[1], digits = 2), 
              b = format(coef(m)[2], digits = 2), 
             r2 = format(summary(m)$r.squared, digits = 3)))
    as.character(as.expression(eq));                 
}

lm_eqn_PA = function(df){
    m = lm(area ~ Mass, df);
    eq <- substitute(italic(y) == a + b %.% italic(x)*","~~italic(r)^2~"="~r2, 
         list(a = format(coef(m)[1], digits = 2), 
              b = format(coef(m)[2], digits = 2), 
             r2 = format(summary(m)$r.squared, digits = 3)))
    as.character(as.expression(eq));                 
}

dat <- read.table("../../mass_vs_area/mass_vs_area.txt",header=TRUE)
area <- read.table("../results/all_values.txt", header=TRUE)

all_dat <- merge(area,dat,by="file")

all_dat1 <- data.frame(file=all_dat$file,Mass=all_dat$Mass,area=all_dat$area,Cluster=c("Experimental"))
all_dat2 <- data.frame(file=all_dat$file,Mass=all_dat$Mass,area=all_dat$PA,Cluster=c("PA"))

plot_dat = rbind(all_dat1,all_dat2)

data.label.equation1 <- data.frame(x = 250,y = 20000,label = paste("Exp_eq.: ",lm_eqn(all_dat1)))
data.label.pearson1 <- data.frame(x = 250, y = 21000,label = paste("Exp_Peasron: ",format(cor(all_dat1$Mass,all_dat1$area),digits=3)))
data.label.spearman1 <- data.frame(x = 250, y = 22000, label = paste("Exp_Spearman: ",format(cor(all_dat1$Mass,all_dat1$area,method="spearman"),digits=3)))

data.label.equation2 <- data.frame(x = 250,y = 19000,label = paste("PA_eq.: ",lm_eqn_PA(all_dat2)))
data.label.pearson2 <- data.frame(x = 250, y = 18000,label = paste("PA_Peasron: ",format(cor(all_dat2$Mass,all_dat2$area),digits=3)))
data.label.spearman2 <- data.frame(x = 250, y = 17000, label = paste("PA_Spearman: ",format(cor(all_dat2$Mass,all_dat2$area,method="spearman"),digits=3)))

plotter <- (qplot(data=plot_dat, x=Mass, y=area, colour=factor(plot_dat$Cluster)) + geom_point(shape=1) + geom_smooth(method="lm") + scale_colour_discrete(name="Cross-Section Type"))

plotter <-  plotter + labs(x = "Mass kDa" ,y = expression(paste('CCS (',Å^2,')')))
plotter <- plotter + geom_text(data = data.label.equation1, aes(x = x , y = y, label = label) ,parse=TRUE)
plotter <- plotter + geom_text(data = data.label.pearson1, aes(x = x , y = y , label = label ),parse=TRUE)
plotter <- plotter + geom_text(data = data.label.spearman1, aes(x = x , y = y , label = label ),parse=TRUE)

plotter <- plotter + geom_text(data = data.label.equation2, aes(x = x , y = y , label = label ),parse=TRUE)
plotter <- plotter + geom_text(data = data.label.pearson2, aes(x = x , y = y , label = label ),parse=TRUE)
plotter <- plotter + geom_text(data = data.label.spearman2, aes(x = x , y = y , label = label ),parse=TRUE)

print(plotter) 
```

![在此处输入图像描述](../Images/1e28db48fa46693b008304383cc15dd3.png)

编辑数据框如下：

```
all_dat1 table:
          file Mass  area      Cluster
1         1bsy   18  1660 Experimental
2         1fi9   12  1240 Experimental
3  1gr5_edited  801 20900 Experimental
4    1gyk_edit  125  7030 Experimental
5         1hwz  336 12800 Experimental
6  1jyc_edited  103  5550 Experimental
7   1pkn_model  237 10300 Experimental
8   1ttr_model   56  3410 Experimental
9   2a3y_model  250 10400 Experimental
10        2hcy  143  6940 Experimental
11  3blg_model   37  2850 Experimental
12  3fdc_model   64  3640 Experimental
13       4f5sA   69  4090 Experimental

all_dat2 table:

        file Mass  area Cluster
        1bsy   18  1428      PA
        1fi9   12  1119      PA
 1gr5_edited  801 21518      PA
   1gyk_edit  125  5592      PA
        1hwz  336 10759      PA
 1jyc_edited  103  4649      PA
  1pkn_model  237  8689      PA
  1ttr_model   56  2793      PA
  2a3y_model  250  8514      PA
        2hcy  143  7255      PA
  3blg_model   37  2399      PA
  3fdc_model   64  2833      PA
       4f5sA   69  3871      PA 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:43:43.703

要从图例中删除符号，请在所有`geom_text`添加选项

```
 show_guide =FALSE 
```

# c# - 生成有效的 ETAG 文件流并与标头进行比较

> ID：13801049
> 
> 赞同：0
> 
> 时间：2012-12-10T12:34:24.123
> 
> 标签：c#, http, http-headers, windows-phone-8, etag

我有来自网络服务器的这个 etag 标头，

电子标签 | 1347613725000

这是一个 png 图像，但我不知道如何检查文件是否过期。

现在我正在用这段代码对流进行哈希处理：

```
MD5CryptoServiceProvider md5 = new MD5CryptoServiceProvider();
byte[] hash = md5.ComputeHash(value);
result = BitConverter.ToString(hash).Replace("-", string.Empty).ToLower(); 
```

但是这段代码的结果是：e0d9ddc1c72ade0a1924dddf68c8c12e

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:11:58.227

如果您向服务器发送 HTTP 请求，并且在 If-Match 标头中带有 etag 的图像，如果 png 尚未更新，您应该得到 304 Not Modified 返回。如果它已更新，您应该得到 200 OK。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:01:23.833

You can't check that; only the server can (the Etag is simply an opaque string).

# android - 使用 NDK C++ 代码处理语法解析器错误

> ID：13801053
> 
> 赞同：0
> 
> 时间：2012-12-10T12:34:44.597
> 
> 标签：android, eclipse, c++11, android-ndk, adt

*当我在Eclipse*中通过“Native Build support”扩展一个 Android 项目（不知道它到底叫什么）**并**添加 C++11 代码时，索引器出现了很多错误。

在使用纯 C++ 项目（GCC、LLVM 支持）时，我可以修复它 - 但编译器详细信息不适用于 Android 本机支持。

摆脱这个问题（并且能够再次编译）的一种方法是禁用索引器，但随后 Eclipse 失去了它的价值。

有没有更好的方法来解决这个问题，因为 CDT 似乎至少需要一年才能充分支持 C++11。

# css - 填充禁用提交按钮

> ID：13801055
> 
> 赞同：0
> 
> 时间：2012-12-10T12:34:50.610
> 
> 标签：css, html-table

以下是我提交按钮的 HTML：

```
<div id="header">
     <table>
        <tr>
            <td><h1></h1></td>
            <td><input type="text" name="search" class="search"/>
             <input type="submit" class="search-btn" name="submit" value="Search"/></td>                        
        </tr>
      </table>
</div> 
```

以下是我的 CSS ：

```
#header table td .search-btn{width: 60px; margin-left: 5px;                                                          
                             border: 1px solid #D5EA3B;
                             padding: 9px;
                             display: inline-block;
} 
```

问题是当我尝试添加填充时，它会禁用提交按钮（不可点击），如果我要删除填充然后启用它（可点击）。这真是个奇怪的问题。我不明白这到底是什么。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:42:30.940

好的。

因此，首先您粘贴的 CSS 不太正确，请删除 #header 表等。

```
.search-btn{width: 60px; margin-left: 5px;                                                          
                             border: 1px solid #D5EA3B;
                             padding: 9px;
                             display: inline-block;
} 
```

所以填充不是问题，边框是问题，使它看起来没有点击。如果您访问：http: [//jsfiddle.net/3w4e5/2/](http://jsfiddle.net/3w4e5/2/)，您会看到该按钮按预期工作，但是当您重新添加边框时似乎已损坏。

您还需要创建按钮的悬停和活动版本：

见：http: [//jsfiddle.net/3w4e5/3/](http://jsfiddle.net/3w4e5/3/)

**更新：**

请参阅此小提琴以了解添加的活动和悬停 CSS 版本，因此它显示按钮已悬停并单击，您的初始 CSS 使其成为按钮，因此按钮看起来不像被单击，但确实如此。

[http://jsfiddle.net/3w4e5/4/](http://jsfiddle.net/3w4e5/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:42:19.770

问题是因为，您添加了一个 `border: 1px solid #D5EA3B;`

**更新**：

问题是您包含输入 type="text" 和提交按钮的 td 重叠或位于提交的顶部。您应该将第二个 td 分成两个 td，并在一个 td 中输入类型文本，在另一个 td 中输入按钮。

# java - Java 6 中的椭圆曲线密码学

> ID：13801059
> 
> 赞同：3
> 
> 时间：2012-12-10T12:35:12.993
> 
> 标签：java, cryptography, elliptic-curve

默认情况下是否可以在 Java 6 中使用椭圆曲线密码术？我不想使用像 Bouncy castle 这样的第三方提供商。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T00:20:25.623

答案很简单，不，ECC 功能直到 Java 7 才添加。Java 6 只是提供了 API 接口——一个定义得很好的接口——但不是一个实际的实现。也就是说，它可以通过 PKCS#11 模块（使用 Sun PKCS#11 提供程序）来使用。但在这种情况下，您需要兼容 PKCS#11 `.dll`，除非您能够安装第三方本机库，否则这可能是不可接受的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T03:06:09.267

在 OpenJDK7 和 Java 7 SE 中，根据[此页面](http://openjdk.java.net/projects/jdk7/features/#f73)，完全支持基本 ECC 。您可能仍然需要从外部 .jar 添加 JCA 和导出策略，但由于美国加密导出法律，它不能在 Java 的标准版本中，但它在技术上不是第 3 方提供商，因为它是由 Oracle 制造的。另请注意，如果您不使用 NIST 命名曲线，则很可能必须使用单独的库。

# c# - 选择的组合框项目待修复

> ID：13801063
> 
> 赞同：1
> 
> 时间：2012-12-10T12:35:18.360
> 
> 标签：c#, .net, winforms

我的 Windows 表单中有一个数据绑定组合框，我通过函数 deptload() IN FORM LOAD 填充它

```
public void DeptcomboLoad()
        {
            DataTable dt = depttrans.getDeptName();
            Cmb_Department.DataSource = dt;
            Cmb_Department.DisplayMember = "DepartmentName"; //CHAR
            Cmb_Department.ValueMember = "DepartmentPK"; //INT 
        } 
```

现在，当一个部门的员工（比如 accounts DepartmentName="Accounts" ， DepartmentPK=23 ）登录时，我希望将 ComboBox 文本选择为“acounts”，当我去获取 ComboBox 的选定值时，我应该得到 23

我试过

```
Cmb_Department.selectedtext="Accounts"
Cmb_Department.Text="Accounts" 
```

但它没有给出选定的值

谁能给个建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:39:38.590

与其尝试将值放入组合框中，不如尝试 GET`SelectedItem`如下：

```
string txt= Cmb_Department.SelectedItem.Text 
```

要不就：

```
string txt= Cmb_Department.SelectedText 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:42:36.980

您可以通过发出以下内容来让它选择正确的项目：

```
Cmb_Department.SelectedValue = 23; 
```

**其中 23 来自其他变量，可能在另一个对象上，可能来自局部变量，无论您的情况如何。**

现在，要获取选定的值，您可以使用以下语句：

```
var val = Cmb_Department.SelectedValue; 
```

要获取选定的文本（这将是与值关联的文本）：

```
var text = ((DataRow)Cmb_Department.SelectedItem)["DepartmentName"]; 
```

我开上述处方的原因是因为该`SelectedText`属性是易变的，并且该`Text`属性并不总是根据`DropDownStyle`设置的方式工作。

但是，有些人可能会争辩说要获得与上述相同的内容，您可以发布以下声明：

```
var text = Cmb_Department.Text; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T12:43:38.980

要更改组合框的选定值，您可以使用 `SelectedItem`属性或`SelectedIndex`. 索引必须是数据源中的确切数字，并且项目必须是数据源中的确切对象

# javascript - 在 Internet Explorer 中访问本地文件系统

> ID：13801064
> 
> 赞同：1
> 
> 时间：2012-12-10T12:35:18.493
> 
> 标签：javascript, jquery, internet-explorer, browser

我已经尝试了很多来访问 Internet Explorer 上的本地文件系统。谷歌搜索后我得到了一些脚本。这可以通过`ActiveXObject`在 Internet Explorer 上创建一个来实现。但出于安全原因，Internet Explorer 默认禁用此选项。如果有人改变它是可能的。我的问题是有没有其他方法可以在不手动更改浏览器设置的情况下访问 Internet Explorer 中的 locla 文件系统？

我想将其用于预上传文件大小检查程序。我不能在这个页面上使用 FLASH 来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:45:24.397

如果您进入一个网站并从您的文件系统中窃取您的东西，那将不会很有趣。这是一个高安全性问题，这就是它被阻止并且无法自动解除阻止的原因。

但是，如果您只需要限制文件大小限制，您可以`MAX_FILE_SIZE`在表单中隐藏输入来限制最大文件大小。

```
 <input type="hidden" name="MAX_FILE_SIZE" value="10000" /> 
```

请注意，它可以与[此处所述](http://www.hunlock.com/blogs/HTML_File_Uploads)的 PHP一起使用，如果您使用的是其他服务器端语言，则需要检查如何限制您使用的语言中的文件大小。

如果您确实需要访问文件系统并且您在公司环境中，您可以使用组策略更改该设置（您需要与网络管理员交谈）以更改该设置并使您的所有站点都容易受到 Internet 中的不良内容的影响或创建一个扩展程序来执行您只需要在您的页面上执行的危险操作。

# ldap - 通过 ldif 导出/导入八位字节字符串

> ID：13801069
> 
> 赞同：0
> 
> 时间：2012-12-10T12:35:36.810
> 
> 标签：ldap, ldif, identity-management, edirectory

我需要将属性从一个 LDAP 目录 (Novell eDirectory) 传输到另一个。我使用 LDIF 来做到这一点。

但直到现在，我还没有找到以这种方式导入八位字节字符串的方法。导出到 ldif 似乎有效。

我需要传输的八位字节字符串属性是： sASLoginConfigurationKey sASLoginConfiguration sASLoginSecretKey sASLoginSecret

有人可以给我一个提示来解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:08:54.017

这行不通。您使用的属性具有加密值，只能从您要从中导出的电子目录树中解码。（即您将这些放入的树，必须具有您从中获取它们的相同 NICI 密钥）

-吉姆

# android - 如何在 Android 的 uiautomator 中使用 UiObject#setText 设置非拉丁字母（例如变音符号）

> ID：13801071
> 
> 赞同：2
> 
> 时间：2012-12-10T12:35:37.413
> 
> 标签：android

根据Android 4.1.1_r1的源码：

**com.android.uiautomator.core.UiObject**的`setText(String text)`方法将首先`clearTextField()`然后`return getInteractionController().sendText(text);`

而在**com.android.uiautomator.core.InteractionController**中，`sendText`方法实际上是转换`text.toCharArray()`，然后`KeyEvent[]`调用返回`nativeGetEvents()`。

当然**android.view.KeyEvent**只包含电话键，没有 umlaut(ä,ö,ü,ß) 或其他字符集。但是确实有一个名为 KeyEvent`public static final int KEYCODE_LANGUAGE_SWITCH = 204;`

虽然问题是**InteractionController**类似乎在 Android 4.2 之后被删除，因此我无法通过直接发送任何 KeyEvent 来破解它。

谁能告诉我是否有任何解决方案或解决方法可以将非拉丁字母发送到模拟器？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T13:50:06.737

我编写[了一个 IME](https://github.com/sumio/uiautomator-unicode-input-helper)，将仅使用 ASCII 字符的编码文本转换为 Unicode 文本。安装 IME 后，您可以在可编辑字段中设置非拉丁字母。

请参阅[我的另一个答案](https://stackoverflow.com/a/19618355/2925059)以获取更多详细信息。

# ruby - 使用 ruby -vips 的第一步

> ID：13801073
> 
> 赞同：6
> 
> 时间：2012-12-10T12:35:45.870
> 
> 标签：ruby, image-processing

我正在尝试实现/转换用于将色盲人的图像校正为红宝石的[daltonize算法。](http://www.daltonize.org/)

在我不熟悉的语言/环境中，有两个用[javascript](http://www.daltonize.org/search/label/Javascript)和[python + 其他实现编写的主要参考实现。](http://moinmo.in/AccessibleMoin?action=AttachFile&do=view&target=daltonize.py)

我几乎没有图像处理经验，更不用说 VIPS / ruby​​-vips。我想知道如何迈出第一步。该文档似乎主要是 C/C++ 和很少在 ruby​​ 方面。它也非常详细。我什至不确定要使用哪些基本*操作*。看起来该`lin`功能是一个很好的起点，但我不确定如何应用它。

任何有 VIPS 经验的人都可能在几分钟内完成整个算法。我想知道是否有人可以给我一些关于从哪里开始的指示。具体来说：

*   如何访问单个（R/G/B）元素？
*   是否有基于 daltonize 实现的更好方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T11:13:15.747

（**注意**这是一个非常古老的答案，并在两个主要版本之前描述了 ruby​​-vips。我已将其更新为 2.0.16 gem，即 2019 年 11 月的当前版本）

这里有完整的文档：

[https://rubydoc.info/gems/ruby-vips](https://rubydoc.info/gems/ruby-vips)

该`Vips`部分有一个教程式的介绍：

[https://rubydoc.info/gems/ruby-vips/Vips](https://rubydoc.info/gems/ruby-vips/Vips)

例如：

```
require 'vips'

if ARGV.length < 2
    raise "usage: #{$PROGRAM_NAME}: input-file output-file"
end

im = Vips::Image.new_from_file ARGV[0], access: :sequential

im *= [1, 2, 1]

mask = Vips::Image.new_from_array [
        [-1, -1, -1],
        [-1, 16, -1],
        [-1, -1, -1]
       ], 8
im = im.conv mask, precision: :integer

im.write_to_file ARGV[1] 
```

这将以流模式打开图像，将中间波段（绿色）乘以 2，使用整数卷积锐化图像，并将结果写回。你可以像这样运行它：

```
./example.rb x.jpg y.ppm 
```

ruby-vips repo 中有一个完整的“daltonize”示例：

[https://github.com/libvips/ruby-vips/blob/master/example/daltonize8.rb](https://github.com/libvips/ruby-vips/blob/master/example/daltonize8.rb)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T21:13:20.753

对于新手：ruby-vips 有 wiki：[https](https://github.com/jcupitt/ruby-vips/wiki) ://github.com/jcupitt/ruby-vips/wiki ，其中包含“示例”和“基本概念”页面。它们展示了 ruby​​-vips 使用的基础知识。

此外，您可以随意添加您自己的用例，就像 @YoavAner 所做的那样（Daltonize 示例）。

# mysql - Mysql查询返回重复条目

> ID：13801077
> 
> 赞同：1
> 
> 时间：2012-12-10T12:36:06.003
> 
> 标签：mysql

```
 SELECT *
 FROM ( SELECT a.*, a.id AS id_player, 
        (SELECT COUNT(id)
         FROM `vd7qw_footsal_goals`
         WHERE a.id = id_player
         AND id_group IN (SELECT id_group
                          from `vd7qw_footsal_groupofleague`
                          WHERE id_league = 2)
         ) AS goals, 
         team.team_name
         FROM `vd7qw_footsal_players` AS a
         LEFT JOIN vd7qw_footsal_teams AS team
              ON team.id = a.id_team
         LEFT JOIN vd7qw_footsal_teamofgroup AS tog
              ON tog.id_team = team.id
         LEFT JOIN vd7qw_footsal_groups AS g
              ON g.id = tog.id_group
         WHERE (a.state IN (1))
        ) AS h
 WHERE goals > 0
 ORDER BY goals DESC 
```

这是我的查询，当我在 1 个联赛中有 2 个或更多组并且球员在每个组中进球时，查询返回正确的进球数但重复球员，例如：

```
John Doe got 3 goals in group 1 
```

和

```
John Doe got 4 goals in group 2 
```

查询返回：

```
John Doe got 7 goals 
```

我的错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:41:57.310

尝试`GROUP BY`

```
SELECT *
 FROM ( SELECT a.*, a.id AS id_player, (SELECT COUNT(id)
 FROM `vd7qw_footsal_goals`
 WHERE a.id = id_player
 AND id_group IN (SELECT id_group
 from `vd7qw_footsal_groupofleague`
 WHERE id_league = 2)) AS goals, team.team_name
 FROM `vd7qw_footsal_players` AS a
 LEFT JOIN vd7qw_footsal_teams AS team
 ON team.id = a.id_team
 LEFT JOIN vd7qw_footsal_teamofgroup AS tog
 ON tog.id_team = team.id
 LEFT JOIN vd7qw_footsal_groups AS g
 ON g.id = tog.id_group
 WHERE (a.state IN (1))) AS h
 WHERE goals > 0
GROUP BY id_group
 ORDER BY goals DESC 
```

# java - 在 Spring MVC 中将 JSON 对象绑定到 JavaBean 类，我有些不清楚

> ID：13801081
> 
> 赞同：0
> 
> 时间：2012-12-10T12:36:13.563
> 
> 标签：java, json, spring, spring-mvc, jaxb

在此期间，我正在研究 Spring MVC 展示示例。

关于请求映射我有点怀疑，我有以下情况：

在我提交表单的视图中，提交此表单启动以下 Jquery 函数：

```
$("form.readJsonForm").submit(function() {          

    var form = $(this);                 // Variabile che si riferisce all'elemento nel DOM che ha scatenato l'evento submit (il form) 
    var button = form.children(":first");       // Seleziona il bottone submit 

    var data = form.hasClass("invalid") ?       // OPERATORE CONDIZIONALE: il form ha classe "invalid" ? 
            "{ \"foo\": \"bar\" }" :            // SI: foo = bar 
            "{ \"foo\": \"bar\", \"fruit\": \"apple\" }";   // NO: foo= bar ; fruit = apple 

    /* AJAX CALL PARAMETER:
       type: Say to the servlet tath the request is a POST HTTP Request
       url: The address to which to send the call   
       data: the content of my data variable
       contentType: an object having JSON format
       dataType: the type of content returned by the server
    */
    $.ajax({ type: "POST", url: form.attr("action"), data: data, contentType: "application/json", dataType: "text", 
        success: function(text) { MvcUtil.showSuccessResponse(text, button); }, 
        error: function(xhr) { MvcUtil.showErrorResponse(xhr.responseText, button); }});

    return false;
}); 
```

所以在我的例子中，生成了以下具有 JSON 格式的 JavaScript 对象：

**{ \"foo\": \"bar\", \"fruit\": \"apple\" }**

好的，然后我的 Jquery 函数执行 AJAX 调用并将我的 JSON 对象发送到 Spring 控制器类。

这是处理这个 HTTP 请求的方法：

```
@RequestMapping(value="/mapping/consumes", method=RequestMethod.POST, consumes=MediaType.APPLICATION_JSON_VALUE)
public @ResponseBody String byConsumes(@RequestBody JavaBean javaBean) {
    System.out.println("foo: " + javaBean.getFoo() + " fruit: " + javaBean.getFruit());
    return "Mapped by path + method + consumable media type (javaBean '" + javaBean + "')";
} 
```

此方法处理对 URL 的 HTTP POST 请求：“/mapping/consumes”并使用 JSON 对象（这由**consumes=MediaType.APPLICATION_JSON_VALUE**指定）

好的，此方法采用使用 @RequestBody 注释进行注释的输入参数，该注释指示我的方法参数应绑定到 HTTP 请求正文中的值（我的 JSON 对象）

JavaBean 类仅包含 2 个属性：

```
private String foo;
    private String fruit; 
```

（作为 JSON 对象属性）

为了将 JSON 对象属性与 JavaBean 属性绑定，JavaBean 类由**@XmlRootElement**注释进行注释：

包 org.springframework.samples.mvc.mapping；

导入 javax.xml.bind.annotation.XmlRootElement；

```
@XmlRootElement
public class JavaBean {

private String foo = "bar";
    private String fruit = "apple";

    // Setter and Getter method for properties 
```

现在我知道，当您在 Spring 控制器中的对象上看到 @RequestBody 注释时，@RequestMapping 注释的消耗属性是“application/xml”（或 pre spring 3.1，Content-Type 标头设置为“application/ xml") 这将告诉 Spring 请求消息的有效负载是 XML 并且需要解组到使用 @RequestBody 注释的对象。在这种情况下，使用 @RequestBody 注释的对象通常会使用 JAXb 注释对其自身进行注释，以提供将该对象编组到 XML 或从 XML 解组所需的元数据，而 @XmlRootElement 是提供该元数据的那些注释之一。

**好的，这对我来说**很清楚**......**我唯一的疑问与以下**事实****有关**

 ****所以我有以下问题要问你：

**1） Content-Type header**和**consumes=MediaType.APPLICATION_JSON_VALUE**有什么区别

 **2）据我了解阅读** @XmlRootElement** 文档：[http ://docs.oracle.com/javase/6/docs/api/javax/xml/bind/annotation/XmlRootElement.html](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/annotation/XmlRootElement.html)

此注释提供 XML 内容和内容 JAVA 之间的双向关联。所以我可以在 Java 类属性中映射 XML 字段的内容，反之亦然

问题是在这种情况下我没有 XML“对象”，但我使用的是 JSON 对象，它是 XML 的替代品！！！我错过了什么？

非常感谢你

安德烈亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:25:25.463

首先回答你的问题：

> Content-Type 标头和 consumes=MediaType.APPLICATION_JSON_VALUE 有什么区别？

它们都定义了内容类型，但它们用于不同的目的。

*   Content-Type 标头是 HTML 规范的一部分；它是作为 HTML 消息头的一部分传输的属性，它告诉接收者正在传输的数据有效负载的格式。
*   Spring 控制器上使用的“consumes”注释提供了一种机制来限制控制器接受的内容类型。通过将你的控制器设置为`consumes=MediaType.APPLICATION_JSON_VALUE`你告诉你的控制器只接受来自调用者的消息，这些消息指定他们正在向它发送 JSON 格式的有效负载。这意味着您需要确保您的客户端代码指定了“应用程序/json”的内容类型，但根据您的示例代码，它似乎已正确设置。（*请注意，使用注释匹配方法的内容类型而不是“限制”它们，但出于您的问题的目的，我正在简化事情。有关更多信息，请参阅[此](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-requestmapping-consumes)链接。*）

关于第二个问题/问题：

您的代码表明您使用 Spring 3.0+ 将您的 JSON 消息编组到关联的 Java 对象中是正确的，但您可能需要确保您的 Spring 配置设置正确。确保你`<mvc:annotation-driven/>`的 spring 配置中有这个集合，它将包括 Spring MVC 中 JSON 和/或 XML 编组/解组所需的 Jackson 支持（即它确保 Jackson 在你的类路径上）。有关详细信息，请参阅[此](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-annotation-driven)。

此外，我会删除`@XmlRootElement`标签，因为它用于 XML 编组/解组，并且在使用 JSON 进行通信时不需要。（它应该被忽略，但如果真的不需要它，我会放弃它）。

最后，我不确定您是否在问题或实际代码中使用类名“JavaBean”来进行说明，但如果您在代码中使用它，我建议您更改名称。术语“JavaBean”已在 Java 中的多个地方使用，并且具有相同名称的类可能会令人困惑。******

# python - column.copy() 上的 SqlAlchemy-migrate 中出现奇怪错误，列类型为 BigInteger。

> ID：13801085
> 
> 赞同：0
> 
> 时间：2012-12-10T12:36:30.427
> 
> 标签：python, sqlite, migration, sqlalchemy, sqlalchemy-migrate

情况稍微简化了一点。我有两个用于 sqlalchemy-migrate 的迁移文件：

在`First`I create table 中`volume_usage_cache`，然后自动加载它，创建其列的副本并打印它：

```
from sqlalchemy import Column, DateTime
from sqlalchemy import Boolean, BigInteger, MetaData, Integer, String, Table

def upgrade(migrate_engine):

    meta = MetaData()
    meta.bind = migrate_engine

    # Create new table
    volume_usage_cache = Table('volume_usage_cache', meta,
        Column('deleted', Boolean(create_constraint=True, name=None)),
        Column('id', Integer(), primary_key=True, nullable=False),
        Column('curr_write_bytes', BigInteger(), default=0),
        mysql_engine='InnoDB',
        mysql_charset='utf8'
    )

    volume_usage_cache.create()
    volume_usage_cache = Table('volume_usage_cache', meta, autoload=True)
    columns = []
    [columns.append(column.copy()) for column in volume_usage_cache.columns]
    print columns 
```

我得到了我所期望的日志：

```
[Column('deleted', Boolean(), table=None), Column('id', Integer(), table=None,
primary_key=True, nullable=False), Column('curr_write_bytes', BigInteger(), 
table=None, default=ColumnDefault(0))] 
```

但是，如果我在`Second`迁移文件中复制列（在 之后运行`First`）：

```
from sqlalchemy import MetaData, String, Integer, Boolean, Table, Column, Index
def upgrade(migrate_engine):
    meta = MetaData()
    meta.bind = migrate_engine

    table = Table("volume_usage_cache", meta, autoload=True) 
    columns = []
    for column in table.columns:
        columns.append(column.copy())
    print columns 
```

我得到不同的结果：

```
[Column('deleted', INTEGER(), table=None, default=ColumnDefault(0)), 
Column(u'id', INTEGER(), table=None, primary_key=True, nullable=False), 
Column(u'curr_write_bytes', NullType(), table=None)] 
```

为什么`curr_write_bytes`列有 NullType？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T14:47:41.667

有两个问题：

首先：在`First`文件中，我们使用的旧元数据已经包含所有需要类型的列所以如果我们创建新的 MetaData 实例，SqlAlchemy 将从数据库中加载有关表的信息，并将获得与`Second`文件中​​相同的结果。

* * *

第二：sqlAlchemy 中不支持 BigInteger 列类型（在 sqlite 中）。而且 Sqlite 根本不支持列类型。所以我们可以用 BigInteger 列创建表（它会工作），但是在自动加载后，此类列的类型将自动转换为 NullType。

# emacs - 在 emacs 中使用没有 js2-mode 的 swank-js 作为主要模式

> ID：13801091
> 
> 赞同：1
> 
> 时间：2012-12-10T12:36:51.423
> 
> 标签：emacs, elisp, slime, swank, js2-mode

我不想`js2-mode`在编辑 js 文件时使用作为主要模式。但我发现我`swank-js`经常使用（使用[**magnar 的 slime-js 设置**](https://github.com/magnars/.emacs.d/blob/master/setup-slime-js.el)）。

当然我知道 swank-js 取决于`js2-mode`Can I just `(require 'js2-mode)`(意味着不是主要模式) 并添加一些额外的设置来启用`swank-js`？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:10:34.490

当然，您可以不使用需要`js2-mode`对语句和函数定义进行智能评估的功能。我必须编写一个函数来评估线和区域。

# javascript - 浏览器兼容性窗口和文档

> ID：13801092
> 
> 赞同：0
> 
> 时间：2012-12-10T12:36:51.583
> 
> 标签：javascript

我有这个功能

```
function getSwf(appName) {
    if (navigator.appName.indexOf("Microsoft") != -1)
        return window[appName];
    return document[appName];
} 
```

但不确定最后两行是否正确。我是说，

```
 return window[appName];
    return document[appName]; 
```

或者

```
 return document[appName];
    return window[appName]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:38:59.133

如果你试图找到一个全局变量，它总是 on `window`。

如果你试图找到一个带有 , 的 HTML 元素`id`，在*大多数*浏览器上，它总是 on `window`，但这种行为（还）不是活动规范的主题；可以肯定的是，请`document.getElementById(appName)`改用它，这将适用于所有浏览器。（例如，Firefox 不会将带有`id`s 的元素放在 上`window`。）

IE 也倾向于使用`name`s on抛出元素`window`，即使`name`值不需要是唯一的。***叹息***其他浏览器，谢天谢地，不要。

# spring - 将字符串传递给jsp，有什么问题？

> ID：13801093
> 
> 赞同：0
> 
> 时间：2012-12-10T12:36:57.280
> 
> 标签：spring, jsp, jstl, cytoscape-web

在控制器中，我有一个处理程序方法，它应该将一个字符串传递给一个名为 searchResultGraph.jsp 的 jsp

```
@RequestMapping(value = PATHELEM + "/searchGraph")
    public String handleGraph(Model model) {
        String write = writer.getWriteString();
        model.addAttribute("write", write);
        System.out.println(write);
        return PATHELEM + "/searchResultGraph";
    } 
```

jsp 看起来像这样：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="core"%>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
        <title>Graph View</title>
        <script type="text/javascript" src="<c:url value="/resources/js/json2.min.js" />"></script> <!-- ${pageContext.request.contextPath}/WebContent/WEB-INF/views/ -->
        <script type="text/javascript" src="<c:url value="/resources/js/cytoscapeweb.min.js" />"></script>
        <script type="text/javascript" src="<c:url value="/resources/js/AC_OETags.min.js" />"></script>

        <script language="JavaScript">
            window.onload=function() {
                        // network data could alternatively be grabbed via ajax
                 var xml = '${write}';

                        // init and draw
                        // initialization options
                            var options = {
                                swfPath: "CytoscapeWeb",
                                flashInstallerPath: "playerProductInstall"
                            };

                            var vis = new org.cytoscapeweb.Visualization("cytoscapeweb", options);

                            var draw_options = {
                                // your data goes here
                                network: xml,

                                // show edge labels too
                                edgeLabelsVisible: false,

                                edgeTooltipsEnabled:true,

                                // let's try another layout
                                layout: "circle",

                                // hide pan zoom
                                panZoomControlVisible: true
                            };

                            vis.draw(draw_options);

                        };
        </script>

        <style>
            /* The Cytoscape Web container must have its dimensions set. */
            html, body { height: 100%; width: 100%; padding: 0; margin: 0; }
            #cytoscapeweb { width: 100%; height: 100%; }
        </style>
    </head>
    <body>
        <h1>The Graph</h1>
        <h1>${write}</h1>
        <div id="cytoscapeweb">
             Cytoscape Web will replace the contents of this div with your graph.
             ${write}
        </div>
    </body>
</html> 
```

但是当我尝试调用时没有显示任何内容`${write}`。我的方法中是否缺少某些内容？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:56:59.453

好的，我找到了解决方案：

options-tag 中的链接也必须是相对链接！

所以代替这个

```
var options = {
                swfPath: "CytoscapeWeb",
                flashInstallerPath: "playerProductInstall"
              }; 
```

我不得不写这个：

```
var options = {
                 swfPath: "<c:url value="/resources/js/CytoscapeWeb" />",
                 flashInstallerPath: "<c:url value="resources/js/playerProductInstall" />"
              }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:49:45.877

检查您是否有一个名为 getWriteString(); 的方法 在你的bean类中，如果没有创建一个类名，在你的控制器中写入并实例化一个名为write的对象，然后将一些字符串传递给该对象并将其添加到模型中以由你的控制器返回，

```
Write write = new Write();
write.getWriteString(); 
```

# javascript - 从 wordpress 表单创建自定义 XML 文件

> ID：13801094
> 
> 赞同：2
> 
> 时间：2012-12-10T12:37:12.207
> 
> 标签：javascript, xml, wordpress

我正在构建一个 WordPress 网站，该网站需要通过一个简单的自定义 XML 文件与内部 CMS 系统集成。

客户端希望用户在 WP 网站上提交一个表单，该表单将发送一封电子邮件，并将在服务器上保存一个具有特定结构的 XML 文件。

是否有任何用于 WP 的表单插件可以在服务器上保存带有表单详细信息的 XML 文件？如果没有 - 是否有任何带有自定义 JS 的表单插件（自己编写代码）？

感谢所有的答案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:55:43.243

为什么你需要一个插件呢？你会使你自己的逻辑复杂化。你有一个表格。它的数据被发送到页面（在标签的`action`属性中指定）。`form`在这个相应的页面中，只需插入您自己的小 PHP 逻辑来处理从表单发送的数据，为每个数据输出 XML 标记（这应该很容易，与您的想法相反）。如果您知道什么值对应于什么标签（即使使用插件，您也需要知道这一点！）那么只需在此处和那里添加`<`和`>`签名 + XML 标签名称即可...完成，只需用于`wp_mail()`发送您的数据到您需要发送到的任何电子邮件地址 + 使用`saveXML`or生成您的 XML 文件`asXML`（参见此处的示例：[如何使用 PHP 动态生成 XML 文件？](https://stackoverflow.com/questions/486757/how-to-generate-xml-file-dynamically-using-php)）。

# c# - jQuery 验证不适用于 jQuery 多选

> ID：13801096
> 
> 赞同：0
> 
> 时间：2012-12-10T12:37:23.097
> 
> 标签：c#, jquery-validate

我正在使用 jQuery 验证器来验证 jQuery 多选下拉列表，但它没有验证，我的功能如下：

这些函数是从我后面的代码中创建的，并使用 ScriptManager.RegisterClientScriptBlock 在页面上注册。

我将以下内容直接放在 aspx 页面上，然后它验证多选，但是一旦我从后面的代码中完成并注册脚本，除了多选之外的所有验证器都可以工作。

```
$.validator.addMethod('notNone', function(value, element) {  
            return (value != '-1');
        }, 'Please select an option.');

var $callback = $("#callback");
        $(document).ready(function () {
            $("#<%=example.ClientID%>").multiselect(
            {
                show: "fade",
                hide: "fade",
                click: function (event, ui) {
                    $callback.text(ui.text + ' ' + (ui.checked ? 'checked' : 'unchecked'));
                },
            });
        });

 $("#form1").validate({
                rules: {
                    <%=example.UniqueID %>: {
                    notNone: true,
                    },
                    <%=txtPassword.UniqueID %>: {
                        //minlength: 5,
                        //required: true
                    },

                   <%=TextIdea.UniqueID %>: {
                        //minlength: 5,
                        //required: true
                 },

                 <%=ddlTest.UniqueID %>: {
                        //notNone: true
                 },

                 redemption : {
                        redemption : false
                 },

                 redemption: {
                        redemptionEnd : false
                        },
                 },
ignore: ':hidden:not("#<%=example.ClientID %>")',

                 messages: {
                    <%=example.UniqueID %>:{
                        notNone: "Plaese select something",                            
                        },
                    <%=txtPassword.UniqueID %>:{
                        required: "Plaese enter your password",
                        minlength: "Password must be atleaet of 5 characters"
                         },    
                     <%=TextIdea.UniqueID %>:{
                      required: "Plaese enter your Ideas",
                      minlength: "Password must be atleaet of 5 characters"
                },
              }
            }); 
```

我的标记：

```
<select id="example" name="example" runat="server">
    </select> 
```

难道我做错了什么？请帮助各位。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:59:39.033

好的，2 天后我终于弄清楚发生了什么，结果是使用 jQuery multiSelect 的控件，它们的 UniqueID 附加了 _multiSelect 并且 ClientID 附加了 $multiSelect。

在获取 Client/UniqueID 时添加了这些字符串并且它可以工作。

# java - 正确的布局以将 JFrame 和 JInternalFrame 设置为灵活地适应每个屏幕尺寸

> ID：13801097
> 
> 赞同：2
> 
> 时间：2012-12-10T12:37:35.453
> 
> 标签：java, swing, layout, jframe, jinternalframe

> **可能重复：**
> [当我最大化 JInternalFrame 时 JInternalFrame 上的示例程序 JMenubar](https://stackoverflow.com/questions/13651991/example-program-jmenubar-on-jinternalframe-when-i-maximize-the-jinternalframe)

我正在开发一个 Swing 应用程序，并且我是布局的新手，我希望我`JFrame`的和包含`JInternalFrame`的 s 在可最大化或可调整大小时采用屏幕的`JFrame`大小，我添加了一个网格布局，但它没有工作. 所以我问如何添加适当的布局以及如何实现它：D。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T17:32:08.797

作为@Catalina 想法的一个示例，您可以使用`setFullScreenWindow()`，如此处所示[，](https://stackoverflow.com/a/7457102/230513)并将 添加`JDesktopPane`到框架的中心。不要忘记`pack()`您的内部框架。

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import javax.swing.JDesktopPane;
import javax.swing.JFrame;
import javax.swing.JInternalFrame;
import javax.swing.JLabel;

/**
 * @see https://stackoverflow.com/a/13806057/230513
 * @see https://stackoverflow.com/questions/7456227
 */
public class FullScreenTest {

    public static final String TITLE = "Full Screen Test";
    private final JFrame f = new JFrame(TITLE);
    private final JDesktopPane jdp = new JDesktopPane();

    public FullScreenTest() {
    }

    private void display() {
        GraphicsEnvironment env =
            GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice dev = env.getDefaultScreenDevice();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JInternalFrame jif = new JInternalFrame(TITLE, true, true, true);
        jif.add(new JLabel(TITLE + " " + TITLE), BorderLayout.NORTH);
        jif.add(new JLabel(TITLE + " " + TITLE), BorderLayout.CENTER);
        jif.add(new JLabel(TITLE + " " + TITLE), BorderLayout.SOUTH);
        jif.pack();
        jif.setLocation(100, 100);
        jif.setVisible(true);
        jdp.add(jif);
        f.add(jdp, BorderLayout.CENTER);
        dev.setFullScreenWindow(f);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new FullScreenTest().display();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T13:46:05.550

你真的需要把你的`JInternalFrame`放在一个`JDesktopPane`，就像他们在[如何使用内部框架](http://docs.oracle.com/javase/tutorial/uiswing/components/internalframe.html)中展示的那样。如果你`GridLayout`在你的 上使用 a `JFrame`，你`JDesktopPane`会随着框架一起成长。您已经知道如何使框架适合屏幕，就像[这里](https://stackoverflow.com/a/13629329/261156)一样。

# html - 使用 wmode="direct" 在 SWF 对象上分层 HTML 元素

> ID：13801098
> 
> 赞同：3
> 
> 时间：2012-12-10T12:37:36.827
> 
> 标签：html, flash, overlay, wmode

我一直在寻找关于如何在 SWF 对象上分层 html 元素的问题，最后我想到的是（根据[Abode](http://helpx.adobe.com/flash/kb/flash-object-embed-tag-attributes.html#main_Browser_support_for_Window_Mode__wmode__values)）：-

**Internet Explorer**：根本不支持分层。

**Firefox**：不支持分层（但它有效但没有透明度）。

**Chrome**：[Adobe](http://helpx.adobe.com/flash/kb/flash-object-embed-tag-attributes.html#main_Browser_support_for_Window_Mode__wmode__values)声称它不受支持，但令人惊讶的是它运行良好且具有透明度。

**Safari(Windows)**：根本不支持分层。

**野生动物园（Mac OS）**：支持。

我知道我可以轻松设置 wmode="transparent" 或 wmode="opaque" 分层就可以了。但我发现对于包含 3D 内容的 SWF 对象，它的 wmode 必须设置为“direct”或“gpu”。

如果有人知道此问题的任何解决方案，我将不胜感激，因为我正在 Flash 上开发游戏，我想用 html 元素覆盖它，但无论是否可能，我都没有找到任何明确的答案

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T13:33:42.743

经过几次尝试，我得到了一个适用于 Firefox 和 IE 的解决方案。这有点脏，但在某些情况下有效。

iFrame 显示在 swf 的顶部，因此您可以在 iframe 中添加分层的 html。

您可以更进一步并将 iframe 设置为背景，只需要为即将到来的 html 保持位置清晰。HTML：

```
<div class="box">
<iframe src="emptyframe.html" frameborder="0" class="emptyiframe"></iframe>
<div class="content">
Shown on top
</div>
</div> 
```

CSS：

```
.box { position: absolute; z-index: 100; background: #fff;}
.emptyiframe { position: absolute; width: 100%; height: 100%; border: none; z-index: -1;     } 
```

使用此解决方案，即使使用 wmode="direct"，也可以在 flash 上添加元素。但是你需要记住，iframe是在flash之上的html的背景中，所以你不能做任何透明。

# c# - ASP.NET 向其他类公开控件

> ID：13801106
> 
> 赞同：2
> 
> 时间：2012-12-10T12:38:02.427
> 
> 标签：c#, asp.net

我已经为此奋斗了一段时间，我需要一些指导。

我在 ASP.NET 4.0 WEBFORMS 中编码。

**问题是：如何将文本框、标签或任何其他控件公开给另一个类。**

我有一个网络表单（见下文）。

```
public partial class WebForm1 : System.Web.UI.Page
{

} 
```

**然后将其引用并发送到另一个类。**

```
public class SearchInitializer
{
    private WebForm1 _webform1;

    public SearchInitializer(WebForm1 Webform1)
    {
        _webform1 = Webform1;
    }

    public void ChewSettings()
    {

        _webform1 //can't find any control in here?!
    }

} 
```

首先，我想**创建一个公共属性**，我认为我可以从我发送给新类的引用中访问它。但是不！

```
public partial class WebForm1 : System.Web.UI.Page
{
   public string KeywordBox1 
    {
        get {return txt_keyword.Text;}
        set {txt_keyword.Text = value;}
    }

} 
```

我试图**将 Webform 继承到另一个类**中。使该物业可用，但那里没有运气。

```
public class SearchInitializer : Webform1
{
    private WebForm1 _webform1;

    public SearchInitializer(WebForm1 Webform1)
    {
        _webform1 = Webform1;
    }

    public void ChewSettings()
    {

        _webform1 //can't find any control in here?!
    }

} 
```

好的，抽象类可能在这里有用，继承一切。但我想我错了。我有事件和静态类，所以它们可以与页面对话。但我真的不想使用静态类作为容器来保存我的控件中的所有信息。所以这些是我尝试过的例子，但都失败了。所以这基本上是我试图扩展我所知道的;）感谢阅读！为什么他们失败了，我应该怎么做？

按要求编辑！

```
public partial class WebForm1 : System.Web.UI.Page
{

     protected void btn_click(object sender, EventArgs e)
     {
         SearchInitializer searchIni = new SearchInitializer(this);
     }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T13:14:55.433

要公开控件，我可以想到两种可以使用的方法。

您可以从文件中删除以下语句`myPage.designer.cs`并将其作为公共声明放在您的代码中：

```
protected global::System.Web.UI.WebControls.TextBox myTextBox; 
```

变成

```
public System.Web.UI.WebControls.TextBox myTextBox; 
```

这应该可以立即访问。我的首选方法是为您要提供访问权限的每个特定控件添加一个属性。

```
public System.Web.UI.WebControls.TextBox MyTextBoxElement
{
    get
    {
        return myTextBox;
    }
} 
```

如果您需要它们或其他条件，这允许提供补充访问控制。在任何情况下，要访问字段或属性，消费对象必须通过您的特定页面类型引用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T12:51:19.953

不确定您要做什么，但是要访问`base`继承的类中的类，您需要使用`base`关键字，而不是在那里声明一个实例。

```
public partial class WebForm1 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    public string KeywordBox1
    {
        get { return txt_keyword.Text; }
        set { txt_keyword.Text = value; }
    }
}

public class SearchInitializer : WebForm1
{
    public SearchInitializer()
    {
    }

    public void ChewSettings()
    {
        // Works
        base.KeywordBox1 = "Red";
    }
} 
```

如果智能感知未显示该属性，请尝试重建解决方案。然后它将刷新可用属性列表并显示。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T13:35:42.417

您的原始方法必须有效。我建议您创建一个带有文本框和`SearchInitializer`类的表单的小型测试项目，并查看它是否有效，然后找出您当前项目中的不同之处。

# c++ - 错误 valgrind 和 opencv

> ID：13801108
> 
> 赞同：1
> 
> 时间：2012-12-10T12:38:32.473
> 
> 标签：c++, opencv, valgrind

我写了一个程序，允许你应用一个简单的指数滤波器。我使用 Valgrind 来跟踪程序中的错误。这向我显示了一条我无法理解的错误消息。

这是 valgrind 错误消息：

```
=5842== Conditional jump or move depends on uninitialised value(s)
==5842==    at 0x51B1A7A: ??? (in /usr/lib/libopencv_core.so.2.3.1)
==5842==    by 0x51B983C: cv::Mat::convertTo(cv::_OutputArray const&, int, double, double) const (in /usr/lib/libopencv_core.so.2.3.1)
==5842==    by 0x401997: filtrage(cv::Mat&, cv::Mat const&, long, long, double) (in /home/toto/Documents/vision_taff/openCv/rehaussemen_de_contraste/main)
==5842==    by 0x402487: main (in /home/toto/Documents/vision_taff/openCv/rehaussemen_de_contraste/main)
==5842==  Uninitialised value was created by a heap allocation
==5842==    at 0x4C2AC27: operator new[](unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==5842==    by 0x40129B: application_filtre(double*, cv::Mat const&, long, long, double) (in /home/toto/Documents/vision_taff/openCv/rehaussemen_de_contraste/main)
==5842==    by 0x401899: filtrage(cv::Mat&, cv::Mat const&, long, long, double) (in /home/toto/Documents/vision_taff/openCv/rehaussemen_de_contraste/main)
==5842==    by 0x402487: main (in /home/toto/Documents/vision_taff/openCv/rehaussemen_de_contraste/main)
==5842== 
```

这是我的主要程序：

```
#include"filtre.h"

using namespace std;
using namespace cv;

int main(int argc, char* argv[]) 
{
    Mat image;
    Mat imageFiltree;

    // Load the image                       
    image = imread(argv[1], CV_LOAD_IMAGE_GRAYSCALE);

    if(argc != 2 || !image.data)
    {
        printf( "No image data \n" );
        return -1;
    }                  
    // apply the filter                                                                                                                     
    filtrage(imageFiltree, image, 15, 15, 1.);       
    // Display the result                                                                                                                
    namedWindow("image d'origine", CV_WINDOW_AUTOSIZE);
    namedWindow("image filtree", CV_WINDOW_AUTOSIZE);

    imshow("image d'origine", image);
    imshow("image filtree", imageFiltree);

    waitKey(0);

    return 0;        
} 
```

我的过滤功能：

```
#include "filtre.h"

using namespace std;
using namespace cv;

//exponential kernel
void noyau_exponentiel(long size, double *h, double beta)
{
    double constante = beta / 2.;
    for(int i = 0, x = -size/2; i < size, x <= size/2; ++i, ++x)
        h[i] = constante * exp(-beta * abs(x));
    return ;
}

//which applies the filter function
void application_filtre(double *imageFiltree, Mat const& image, long sizeH1, long sizeH2, double beta)
{
    double *h1 = new double[sizeH1], *h2 = new double[sizeH2];
    long  width = image.cols, height = image.rows;
    double *dataImage = (double*)image.data;
    double *imageTemp = new double[width*height];

    assert(h1 && h2 && imageTemp);

    noyau_exponentiel(sizeH1, h1, beta);
    noyau_exponentiel(sizeH2, h2, beta);

    // Horizontal filtering                                                                                                                     
    for(long y = sizeH2/2; y < height - sizeH2/2; ++y)
        for(long x = sizeH1/2; x < width - sizeH1/2; ++x)
        {
            imageTemp[y*width + x] = 0.;
            for(long i = -sizeH1/2; i <= sizeH1/2; ++i)
                imageTemp[y*width + x] += dataImage[y*width + x+i] * h1[sizeH1/2 + i];
        }
    // Vertical filtering                          
    for(long y = sizeH2/2; y < height - sizeH2/2; ++y)
        for(long x = sizeH1/2; x < width - sizeH1/2; ++x)
        {
            imageFiltree[y*width + x] = 0.;
            for(long i = -sizeH2/2; i <= sizeH2/2; ++i)
                imageFiltree[y*width + x] += imageTemp[(y+i)*width +x] * h2[sizeH2/2 + i];
        }
    // Release the memory                                                                                                                
    delete[] imageTemp;
    delete[] h1;
    delete[] h2;

    return;
}

void filtrage(Mat &imageFiltree, Mat const &image, long sizeH1, long sizeH2, double beta)
{
    Mat imageCopie;
    Mat imagePadding;
    Mat imagePaddingFiltree;
    double *dataPaddingFiltree = new double[(image.cols + sizeH1 - 1) * (image.rows + sizeH2 -1)];

    // copy of the original image and conversion to a depth of 64 bits                                                                   
    image.convertTo(imageCopie, CV_64F, 1./255.);

    // Create the image padding                                                                                                             
    imagePadding = Mat(image.cols + sizeH1 - 1, image.rows + sizeH2 -1, CV_64FC1);
    copyMakeBorder(imageCopie, imagePadding, sizeH2 / 2, sizeH2 /2, sizeH1 /2, sizeH1/2, BORDER_CONSTANT, cvScalar(0,0,0));

    // apply the filter                                                                                               
    application_filtre(dataPaddingFiltree, imagePadding, sizeH1, sizeH2, beta);
    imagePaddingFiltree = Mat(imagePadding.cols, imagePadding.rows, CV_64FC1, dataPaddingFiltree);

    // Extract the image without padding + image conversion (depth 8 bits)                                                                
    Rect roi(sizeH1/2, sizeH2/2, image.cols, image.rows);
    Mat temp = imagePaddingFiltree(roi);
    temp.convertTo(imageFiltree, CV_8U, 255);

    // Release the memory                                                                                                                 
    delete[] dataPaddingFiltree;
} 
```

消息是什么意思？

# hadoop - Hadoop -copyFromLocal 找不到输入文件

> ID：13801109
> 
> 赞同：3
> 
> 时间：2012-12-10T12:38:50.803
> 
> 标签：hadoop, hdfs

```
sudo -u hdfs hadoop fs -copyFromLocal input.csv input.csv
copyFromLocal: `input.csv': No such file or directory 
```

谁能告诉我出现这种错误的确切原因？我授予了该`input.csv`文件的所有权限，甚至将所有者更改为 hdfs。我是 Hadoop 和 Hbase 的新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-16T18:27:22.527

在这种情况下，您尝试以 hdfs 用户身份读取文件，该用户可能没有查看该文件的权限。要进行测试，请执行以下操作：

```
sudo -u hdfs cat input.csv 
```

如果您获得权限被拒绝，您需要更改此文件的权限以便 hdfs 用户可以读取它（或者如果它已经具有读取权限，请将文件移动到 hdfs 用户可以读取的目录），或者使用不同的有权访问本地和远程目录/文件的用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-10T05:08:04.037

您需要确保用户对该路径`hdfs`的所有父目录具有读取权限。`input.csv`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T12:44:05.537

**语法：hadoop dfs -copyFromLocal completelocalfilesystempath hdfspath**

**示例：**让 input.csv 在 localpath /usr/examples 中，我需要复制它的 hdfs 路径是 /usr/input 所以命令将是

**hadoop dfs -copyFromLocal /usr/examples/input.csv /usr/input/**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-15T08:36:51.277

要复制文件，您可以像这样运行它：

```
cat input.csv | sudo -u hdfs hadoop fs -put - input.csv 
```

# vbscript - 适用于 Windows 64 位的打开/保存文件对话框

> ID：13801113
> 
> 赞同：0
> 
> 时间：2012-12-10T12:39:01.410
> 
> 标签：vbscript, openfiledialog

我以前在 Windows XP 上工作的打开/保存对话框不再在我的 Windows 7 64 位上工作。我听说“MSComDlg.CommonDialog”与 64 位不兼容。这是我的旧代码：

```
' Sub to show open/save dialog
SUB OpenSave (varOpenSaveInputBox, varOpenSaveType, varOpenSaveFilter)   
   ' Create object
   SET objComDlg32 = CreateObject("MSComDlg.CommonDialog")
   ' Set memory buffer
   objComDlg32.MaxFileSize = 260
   ' Set filter
   objComDlg32.Filter = varOpenSaveFilter
   ' Show dialog 
   IF varOpenSaveType = 0 Then
      objComDlg32.ShowOpen
   ELSE
      objComDlg32.ShowSave
   End IF    
   ' Get filename from dialog
   strOpenSave = objComDlg32.FileName
   ' Check IF dialog is cancelled
   IF strOpenSave <> vbNullString Then
      ' Set to variable
      objOpenSave.SetContent strOpenSave, TRUE
   End If
END SUB 
```

如果您的回答更具体，而不是“使用这个！”，我将不胜感激。DLL 和 OCX 并不是我真正的强项。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T20:45:35.287

这是 VBA，但它可能足以为您指明正确的方向。3 声明您希望打开的对话框类型。您可以在此处找到更多信息：http: [//msdn.microsoft.com/en-us/library/office/ff865284.aspx](http://msdn.microsoft.com/en-us/library/office/ff865284.aspx)。

```
Sub FileSelect (Multi as Boolean)
' Set Dlg = Application.FileDialog(msoFileDialogFilePicker)
Set Dlg = Access.Application.FileDialog(3)
With Dlg
    .Title = "Select the file you want to open"
    .AllowMultiSelect = Multi
    If .Show = -1 Then
        txtFilePath = .InitialFileName
    Else
        Exit Function
    End If
End With

FileSelect = Dlg.SelectedItems(1)
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-24T16:53:51.780

我正在使用这段代码，我在互联网上的某个地方找到了它（甚至可能在 StackOverflow 上。我不记得了）

```
Function ChooseFile (ByVal initialDir, filter)

    dim shel, fso, tempdir, tempfile, powershellfile, powershellOutputFile,psScript, textFile
    Set shell = CreateObject("WScript.Shell")

    Set fso = CreateObject("Scripting.FileSystemObject")

    tempDir = shell.ExpandEnvironmentStrings("%TEMP%")

    tempFile = tempDir & "\" & fso.GetTempName

    ' temporary powershell script file to be invoked
    powershellFile = tempFile & ".ps1"

    ' temporary file to store standard output from command
    powershellOutputFile = tempFile & ".txt"

    'if the filter is empty we use all files
    if len(filter) = 0 then
    filter = "All Files (*.*)|*.*"
    end if

    'input script
    psScript = psScript & "[System.Reflection.Assembly]::LoadWithPartialName(""System.windows.forms"") | Out-Null" & vbCRLF
    psScript = psScript & "$dlg = New-Object System.Windows.Forms.OpenFileDialog" & vbCRLF
    psScript = psScript & "$dlg.initialDirectory = """ &initialDir & """" & vbCRLF
    'psScript = psScript & "$dlg.filter = ""ZIP files|*.zip|Text Documents|*.txt|Shell Scripts|*.*sh|All Files|*.*""" & vbCRLF
    psScript = psScript & "$dlg.filter = """ & filter & """" & vbCRLF
    ' filter index 4 would show all files by default
    ' filter index 1 would should zip files by default
    psScript = psScript & "$dlg.FilterIndex = 1" & vbCRLF
    psScript = psScript & "$dlg.Title = ""Select a file""" & vbCRLF
    psScript = psScript & "$dlg.ShowHelp = $True" & vbCRLF
    psScript = psScript & "$dlg.ShowDialog() | Out-Null" & vbCRLF
    psScript = psScript & "Set-Content """ &powershellOutputFile & """ $dlg.FileName" & vbCRLF
    'MsgBox psScript

    Set textFile = fso.CreateTextFile(powershellFile, True)
    textFile.WriteLine(psScript)
    textFile.Close
    Set textFile = Nothing

    ' objShell.Run (strCommand, [intWindowStyle], [bWaitOnReturn]) 
    ' 0 Hide the window and activate another window.
    ' bWaitOnReturn set to TRUE - indicating script should wait for the program 
    ' to finish executing before continuing to the next statement

    Dim appCmd
    appCmd = "powershell -ExecutionPolicy unrestricted &'" & powershellFile & "'"
    'MsgBox appCmd
    shell.Run appCmd, 0, TRUE

    ' open file for reading, do not create if missing, using system default format
    Set textFile = fso.OpenTextFile(powershellOutputFile, 1, 0, -2)
    ChooseFile = textFile.ReadLine
    textFile.Close
    Set textFile = Nothing
    fso.DeleteFile(powershellFile)
    fso.DeleteFile(powershellOutputFile)

End Function 
```

# qt - Qt QGraphicsScene 和 QAbstractItemModel

> ID：13801114
> 
> 赞同：4
> 
> 时间：2012-12-10T12:39:03.110
> 
> 标签：qt, qt4

一起使用 Qt 的图形视图和模型视图框架的最佳方法/模式是什么？

似乎 Qt 应该以某种方式将这两件事联系在一起，但没有。QGraphicsItem 可以只保留一个 QModelIndex 就足够了吗？这听起来像是糟糕的解决方案。

以前我认为最好有一些 std::vector 的数据，将其包含在场景中并在 QTreeView 中显示其中的一些。这使得撤消/重做和同步数据变得非常困难，所以这次我试图从我的错误中吸取教训！

我似乎找不到任何明确的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-28T13:56:37.947

我不确定这是否仍然相关，但由于我目前正在调查同一个问题，我想我会就迄今为止发现的内容发表简短评论：

ModelView 框架并不适用于`QGraphicsView`and`QGraphicsScene`框架。如果你想在 MV 意义上拥有你的`QGraphicsview`和`QGraphicsScene`行为，你必须子类化`QAbstractItem`并将它包裹在 a`QGraphicsscene`这是`QGraphicsView`模型的周围。如果您不需要在不同的视图中可视化您的模型，我不建议您强制使用 MV 结构。这是关于这个主题的讨论： [https ://www.qtcentre.org/threads/11763-GraphicsView-ModelView-Integration](https://www.qtcentre.org/threads/11763-GraphicsView-ModelView-Integration)

# authentication - CakePhP 将 Auth 登录/注销写入调试日志

> ID：13801115
> 
> 赞同：1
> 
> 时间：2012-12-10T12:39:10.710
> 
> 标签：authentication, logging, cakephp-1.3

我正在尝试记录用户尝试登录和注销，但我走到了死胡同。我在 AppController 中使用 Auth 组件，它设置所有 $this->Auth->user 数据。如果我在这里记录它，它会两次写入日志，我不知道登录是否成功。如果我记录 $this->log($this->Session->read('Auth'), 'debug'); 在UsersController的登录方法中，它还没有设置，所以我没有得到数据。

如何在设置或删除会话数据后获取会话数据？除了扩展 Auth 组件还有其他方法吗？

谢谢

# java - 小程序标签与对象标签

> ID：13801116
> 
> 赞同：2
> 
> 时间：2012-12-10T12:39:15.920
> 
> 标签：java

根据 W3Schools，HTML5 不支持 HTML 小程序标签。需要使用`<Object>`标签而不是`<applet>`标签。有关更多详细信息，请点击此链接：[http://www.w3schools.com/tags/tag_applet.asp](http://www.w3schools.com/tags/tag_applet.asp) [http://dev.w3.org/html5/spec/obsolete.html#the-applet-element](http://dev.w3.org/html5/spec/obsolete.html#the-applet-element)
第 11.2 点不合格功能所以，我继续更改代码。下面是使用`<APPLET>`标签的代码：

```
<Applet 
      style    = "position:absolute;border:0px;left:184;top:95;height:180;width:364;"
      code     = "jtreeviewapplet.JTreeViewAppletMain.class"
      name     = "TreeView"
      id       = "TreeView"
      hspace   = "0"
      vspace   = "0"
      align    = "top"
      archive  = "/Project/HTML/ABC/XYZ.jar,/Project/HTML/ABC/ABC.jar"
      MAYSCRIPT>

<PARAM NAME="onSelected" VALUE="onSelect_Handler">
      <PARAM NAME="onFinishNormalize" VALUE="onFinishNormalize_Handler">
 </Applet> 
    Here is the snippet; I changed <APPLET> tag to <OBJECT> tag so as to support HTML5 in future:
<OBJECT type=" application/x-java-applet"
      style    = "position:absolute;border:0px;left:184;top:95;height:180;width:364;"     
      name     = "TreeView"
      id       = "TreeView"
      hspace   = "0"
      vspace   = "0"
      align    = "top"    
     >    
  <PARAM name="code" value=”jtreeviewapplet.JTreeViewAppletMain.class”&gt;
  <PARAM name="codebase" value="/Project/HTML/ABC/">
      <PARAM name="archive" value=" XYZ.jar">
      <PARAM name="archive" value=" ABC.jar">     
      <PARAM name="scriptable" value="true">
      <PARAM NAME="onSelected" VALUE="onSelect_Handler">
      <PARAM NAME="onFinishNormalize" VALUE="onFinishNormalize_Handler">
  </OBJECT> 
```

将标签更改为`<applet>`tag后`<object>`，我的小程序本身没有加载，并且它为 jtreeviewapplet.JTreeViewAppletMain.class 提供类未找到异常。（注意：对于工作和非工作状态，我使用最新的 JDK 1.7 update 9 来编译代码，在我的系统中我有最新的 JRE1.7 update 9 来运行小程序代码。我正在使用 InternetExplorer 8 和 InternetExplorer 9浏览器）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:49:56.290

仅仅替换`applet`是`object`不够的。阅读[http://www.ailis.de/~k/archives/63-How-to-use-Java-applets-in-modern-browsers.html](http://www.ailis.de/~k/archives/63-How-to-use-Java-applets-in-modern-browsers.html)以获取示例。

# c# - C#中的静态变量与静态方法

> ID：13801125
> 
> 赞同：0
> 
> 时间：2012-12-10T12:40:17.610
> 
> 标签：c#, asp.net

据我所知，不建议在 Web 应用程序中使用静态变量。现在我的问题是，在 Web 应用程序中使用静态方法是否可取？静态方法是否使用系统内存作为静态变量使用？请澄清我的疑问。提前谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T12:44:32.583

是的，建议在 Web 应用程序中使用静态方法。

静态变量在 Web 应用程序中的用途非常有限，因为所有线程都将共享同一个变量。

说到方法，所有线程都访问同一个方法不是问题，因为方法本身不会改变。方法中的本地数据对于每次调用该方法仍然是分开的，因此多个线程同时调用同一个方法不是问题。

一般来说，如果一个方法不依赖任何实例数据，它应该是静态的。即，如果一个方法可以是静态的（该方法没有任何其他机会），它应该是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:49:32.550

您应该避免使用静态变量的原因是它们通常用于提供[全局状态](http://en.wikipedia.org/wiki/Global_variable)。这会破坏封装并使程序的维护和调试变得更加困难，因为任何一段代码都可能改变您的变量。

在像 ASP.NET 这样的线程环境中，由于多个线程可能会编辑相同的静态变量的内容并产生不确定的结果，这使情况变得更糟。

另一方面，静态方法可能是一件非常好的事情。它们提供了[引用透明性](http://en.wikipedia.org/wiki/Referential_transparency_%28computer_science%29)，这意味着相同的输入将始终产生相同的输出，并且不会产生改变状态的副作用。这使得多线程访问更容易推理，因为线程不能通过更改共享变量来影响其他线程的处理（当然假设您没有使用静态变量）。

它还可以使单元测试更容易和更健壮，因为您不需要在输入和预期输出旁边测试世界的底层状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T12:43:05.797

建议避免使用静态数据，因为如果数据是可变的，它会引入并发问题。

不需要避免不使用可变静态数据的静态方法；有时它们对不需要特定于任何特定实例的功能有意义。

# objective-c - NSDecimalNumber 乘法怪异

> ID：13801126
> 
> 赞同：0
> 
> 时间：2012-12-10T12:40:19.227
> 
> 标签：objective-c, xcode, ios6, multiplication, nsdecimalnumber

不久前我看到过一个[类似的话题](https://stackoverflow.com/questions/2576109/nsdecimalnumber-multiplication-strangeness)，但这似乎是因为方程在某处使用了 NSNumber。我检查了我所有的代码，我只能看到我正在为我的方程式使用 NSDecimalNumbers。

我有一个返回一些定价数字的 JSON 网络服务。

在对象属性中解析它们之后，我想用它们运行以下等式：

> NetPrice * ( 1 + (RawPercentage / 100)) + FixedPrice = processesNetPrice

**更新：我将代码更改为：**

```
 NSDecimalNumber *one = [NSDecimalNumber one];

    if (!self.netPrice || [self.netPrice isKindOfClass:[NSNull class]]) 
    { self.netPrice = [NSDecimalNumber zero]; }

    NSDecimalNumber *nettoPrijs = self.netPrice;
    NSLog(@"self.netPrice = %@",self.netPrice);
    //Returns: self.netPrice = 89.25

    NSLog(@"nettoPrijs = %@",nettoPrijs);
    //Returns: nettoPrijs = 89.25

    if (!self.userData.BandFixed || [self.userData.BandFixed isKindOfClass:[NSNull class]]) 
    { self.userData.BandFixed = [NSDecimalNumber zero]; }

    NSDecimalNumber *fixedPrice = self.userData.BandFixed;

    NSLog(@"self.userData.BandFixed = %@",self.userData.BandFixed);
    //Returns: self.userData.BandFixed = 0

    NSLog(@"fixedPrice = %@",fixedPrice);
    //Returns: fixedPrice = 0

    if (!self.userData.BandPercentage || [self.userData.BandPercentage isKindOfClass:[NSNull class]]) 
    { self.userData.BandPercentage = [NSDecimalNumber zero]; }

    NSDecimalNumber *rawPercentage = self.userData.BandPercentage;

    NSLog(@"self.userData.BandPercentage = %@",self.userData.BandPercentage);
    //Returns: self.userData.BandPercentage = 0

    NSLog(@"rawPercentage = %@",rawPercentage);
    //Returns: rawPercentage = 0

    NSDecimalNumber *percentage = [rawPercentage decimalNumberByMultiplyingByPowerOf10:-2];
    NSLog(@"percentage = %@",percentage);
    //Returns: percentage = 0

    NSDecimalNumber *onePercent = [one decimalNumberByAdding:percentage];
    NSLog(@"onePercent = %@",onePercent);
    //Returns: onePercent = 1

    NSDecimalNumber *onePercentTimesNetPrice = [onePercent decimalNumberByMultiplyingBy:nettoPrijs];
    NSLog(@"onePercentTimesNetPrice = %@",onePercentTimesNetPrice);
    //Returns: onePercentTimesNetPrice =        
    -0.000000000000000000000000000000000000000000000000000000000000000000000
    00000000000000000000000000359498933794611654993903616

    NSDecimalNumber *addingFixed = [onePercentTimesNetPrice decimalNumberByAdding:fixedPrice];
    NSLog(@"addingFixed = %@",addingFixed);
    //Returns: addingFixed =  
    -0.000000000000000000000000000000000000000000000000000000000000000000000
    00000000000000000000000000359498933794611654993903616 
```

如果我改变：

```
NSDecimalNumber *onePercentTimesNetPrice = [onePercent decimalNumberByMultiplyingBy:nettoPrijs]; 
```

到：

```
NSDecimalNumber *onePercentTimesNetPrice = [nettoPrijs decimalNumberByMultiplyingBy:onePercent]; 
```

它崩溃了：

```
-[__NSCFNumber decimalNumberByMultiplyingBy:]: unrecognized selector sent to instance 0x84ad160 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:19:46.670

正如您的 NSLog() 输出所示，`self.userData.RawPercentage`并且`self.userData.FixedPrice`是`nil`，即未分配 + 初始化为`NSDecimalNumber`对象。

`nil`不能用来表示十进制数零！

事实上，当我尝试你的代码时，

```
NSDecimalNumber *custPrice1 = [oneWithNet decimalNumberByAdding:priceFixed]; 
```

崩溃是因为`priceFixed`它是 nil。

因此，您应该检查初始化这些变量的代码，并确保它们指向有效`NSDecimalNumber`对象。

* * *

**更新：**错误消息

```
-[__NSCFNumber decimalNumberByMultiplyingBy:]: unrecognized selector sent to instance 0x84ad160 
```

表明这`nettoPrijs`是一个`NSNumber`对象而不是一个`NSDecimalNumber`。以下简化代码显示了如果您尝试将 a`NSDecimalNumber`与 a相乘会发生什么`NSNumber`：

```
NSDecimalNumber *one = [NSDecimalNumber one];
id price = [NSNumber numberWithFloat:89.25];
NSDecimalNumber *product = [one decimalNumberByMultiplyingBy:price];
NSLog(@"product = %@", product);
// Output:
// product = -0.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000221166721562906606351581184 
```

（我不知道为什么这不会崩溃或产生一些错误消息。）如果你乘以 a ，它可以正常工作`NSDecimalNumber`：

```
price = [NSDecimalNumber decimalNumberWithString:@"89.25"];
product = [one decimalNumberByMultiplyingBy:price];
NSLog(@"product = %@", product);
// Output:
// product = 89.25 
```

所以我假设这`self.netPrice`是一个`NSNumber`必须转换为`NSDecimalNumber`. 这同样适用于其他数字对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:55:39.683

我使用以下方法修复了它：

```
- (void) doMath
{
    NSDecimalNumber *one = [NSDecimalNumber one];
    NSLog(@"Band: %@ one = %@",self,one);
    if (!self.netPrice || [self.netPrice isKindOfClass:[NSNull class]]) { self.netPrice = [NSDecimalNumber zero]; }
    NSDecimalNumber *nettoPrijs = self.netPrice;
    NSLog(@"self.netPrice = %@",self.netPrice);
    NSLog(@"nettoPrijs = %@",nettoPrijs);
    if (!self.userData.BandFixed || [self.userData.BandFixed isKindOfClass:[NSNull class]]) { self.userData.BandFixed = [NSDecimalNumber zero]; }
    NSDecimalNumber *fixedPrice = self.userData.BandFixed;
    NSLog(@"self.userData.BandFixed = %@",self.userData.BandFixed);
    NSLog(@"fixedPrice = %@",fixedPrice);
    if (!self.userData.BandPercentage || [self.userData.BandPercentage isKindOfClass:[NSNull class]]) { self.userData.BandPercentage = [NSDecimalNumber zero]; }
    NSDecimalNumber *rawPercentage = self.userData.BandPercentage;
    NSLog(@"self.userData.BandPercentage = %@",self.userData.BandPercentage);
    NSLog(@"RawPercentage = %@",rawPercentage);
    NSDecimalNumber *percentage = [rawPercentage decimalNumberByMultiplyingByPowerOf10:-2];
    NSLog(@"percentage = %@",percentage);
    NSDecimalNumber *onePercent = [one decimalNumberByAdding:percentage];
    NSLog(@"onePercent = %@",onePercent); 
```

**NSDecimalNumber *gertje = [NSDecimalNumber decimalNumberWithDecimal:nettoPrijs.decimalValue]; ** NSDecimalNumber *onePercentTimesNetPrice = [gertje decimalNumberByMultiplyingBy:onePercent];**

```
 NSLog(@"onePercentTimesNetPrice = %@",onePercentTimesNetPrice);
    NSDecimalNumber *addingFixed = [onePercentTimesNetPrice decimalNumberByAdding:fixedPrice];
    NSLog(@"addingFixed = %@",addingFixed);
} 
```

感谢你的帮助！

# groovy - 詹金斯上的 Groovy 代码抛出错误

> ID：13801127
> 
> 赞同：2
> 
> 时间：2012-12-10T12:40:18.530
> 
> 标签：groovy, jenkins

嗨，我在 jenkins 的 Post-build Actions 中添加了以下 groovy 代码。

```
import java.util.*
import hudson.model.*

upstreamBuilds = manager.build.getUpstreamBuilds();
upstreamJob = upstreamBuilds.keySet().iterator().next();
lastUpstreamBuild = upstreamJob.getLastBuild();
if(lastUpstreamBuild.getResult().isBetterThan(manager.build.result)) {
lastUpstreamBuild.setResult(manager.build.result);
} 
```

但是当我执行上述代码时出现以下错误：

```
ERROR: Failed to evaluate groovy script.
java.util.NoSuchElementException
at java.util.HashMap$HashIterator.nextEntry(HashMap.java:897)
at java.util.HashMap$KeyIterator.next(HashMap.java:928)
at java_util_Iterator$next.call(Unknown Source)
at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)
at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:112)
at Script1.run(Script1.groovy:5)
at groovy.lang.GroovyShell.evaluate(GroovyShell.java:580)
at groovy.lang.GroovyShell.evaluate(GroovyShell.java:618)
at groovy.lang.GroovyShell.evaluate(GroovyShell.java:589)
at org.jvnet.hudson.plugins.groovypostbuild.GroovyPostbuildRecorder.perform(GroovyPostbuildRecorder.java:276)
at hudson.tasks.BuildStepMonitor$1.perform(BuildStepMonitor.java:19)
at hudson.model.AbstractBuild$AbstractRunner.perform(AbstractBuild.java:710)
at hudson.model.AbstractBuild$AbstractRunner.performAllBuildSteps(AbstractBuild.java:685)
at hudson.model.Build$RunnerImpl.post2(Build.java:162)
at hudson.model.AbstractBuild$AbstractRunner.post(AbstractBuild.java:632)
at hudson.model.Run.run(Run.java:1463)
at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
at hudson.model.ResourceController.execute(ResourceController.java:88)
at hudson.model.Executor.run(Executor.java:239)
Recording fingerprints 
```

由于我是 groovy 的新手，我不知道如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:13:37.240

我相信这是因为您正在调用`next()`一个没有元素的迭代器。

我相信这做同样的事情，但处理`upStreamBuilds`地图为空：

```
upstreamJob = manager.build.upstreamBuilds.find()
if( upstreamJob != null ) {
  lastUpstreamBuild = upstreamJob.key.lastBuild
  if( lastUpstreamBuild.result.isBetterThan( manager.build.result ) ) {
    lastUpstreamBuild.result = manager.build.result
  }
} 
```

PS：你不需要`java.util.*`用groovy导入

# selenium - 如何将此xpath转换为css？

> ID：13801130
> 
> 赞同：3
> 
> 时间：2012-12-10T12:40:28.697
> 
> 标签：selenium, css-selectors, selenium-rc, selenium-webdriver

如何将Xpath下面的这个更改为css？请帮忙。

```
//button[text()='Continue' and @class='buttonLargeAlt' and @type='submit'] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T17:03:09.870

不幸的是，你不能。

问题是 CSS 选择器无法通过文本找到。因此，您不能将`text()='Continue'`XPath 转换为有效的 CSS 选择器。这是直到今天实际使用 XPath 来选择 HTML 元素的两个主要原因之一。

CSS3 中有一个[`:contains()`](https://www.google.com/search?q=css%20contains)用于此的伪类，但它早已不复存在。不过，Selenium 中用于 CSS 选择的 JS 引擎 Sizzle 保留了它。所以如果你的浏览器不支持原生 CSS 选择（或者你禁用它），你可以像这样使用它：

```
button.buttonLargeAlt:contains('Continue')[type='submit'] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-18T12:41:21.807

我通常使用这个[cssify](http://cssify.appspot.com/)，这很酷

# vb.net - 转换后错误“根级别的数据无效”，同时执行 LoadXML

> ID：13801131
> 
> 赞同：1
> 
> 时间：2012-12-10T12:40:32.560
> 
> 标签：vb.net, xslt, xmldocument

我正在尝试使用以下代码行进行一些 XSLT 转换，将 XML 转换为 XML。当我尝试从转换后的 XML 创建 XMLDocument 对象时，出现错误

根级别的数据无效。第 1 行，位置 1。

```
 Dim outputXML As New XmlDocument

        Dim stream As New MemoryStream
        Dim writer As XmlTextWriter = New XmlTextWriter(stream, System.Text.UnicodeEncoding.UTF8)

        Dim navigator As XPathNavigator = illustratePlusXML.CreateNavigator()
        Dim transormer As XslCompiledTransform = New XslCompiledTransform()
        transormer.Load(ConfigurationManager.AppSettings("XSLT_File_Path"))
        transormer.Transform(navigator, Nothing, writer)

        Dim output As String = System.Text.UnicodeEncoding.UTF8.GetString(stream.ToArray())
        outputXML.LoadXml(output)

        Return outputXML 
```

我可以找到一个特殊字符（方形框），我认为这是导致错误的原因。附加的输出 xml 的快照。有人可以建议吗？

![输出带有特殊字符的xml](../Images/e961ab299515211963bcb8bc9034d44a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:08:39.087

如果您想填充`XmlDocument`XSLT 转换的结果，那么只需执行

```
Dim resultDoc As New XmlDocument()
Using xw As XmlWriter = resultDoc.CreateNavigator().AppendChild()
        Dim navigator As XPathNavigator = illustratePlusXML.CreateNavigator()
        Dim transormer As XslCompiledTransform = New XslCompiledTransform()
        transormer.Load(ConfigurationManager.AppSettings("XSLT_File_Path"))
        transormer.Transform(navigator, Nothing, xw)  
        xw.Close()
End Using 
```

无需使用 MemoryStream。如果您真的认为您需要使用 MemoryStream，请确保在调用该方法之前将其重置`Position`为。`0``Load`

# php - 奇怪的 XML 负载

> ID：13801134
> 
> 赞同：1
> 
> 时间：2012-12-10T12:40:38.133
> 
> 标签：php, xml, dom, base64, serialization

我不知道为什么会生成 xml：[这里](http://bvsreal.cz/foto.xml)从第一次加载（仅几秒钟）开始显示为文本，之后显示为 xml。问题是我想通过 cURL 发送它。我认为问题在于使用 DOM 生成 XML，所以我尝试了 PEAR 中的 XML_Serializer，但结果是一样的。

另一个原因是我认为它可能正在生成 Base64_encode(image) 但如果我从浏览器保存此文件并尝试在测试模式下仅推送此文件，它说没关系。如果我尝试将此文件（与浏览器一起存储）放入网络文件夹（通过 FTP 上传）并在浏览器中显示，它会正常显示。（从一开始就没有 1-2 秒作为代码）。

我真的为此头疼。所以我会为我需要做的任何事情感到高兴。谢谢你的回复。

```
<?php
session_start();
ob_start();

$property_id = $_GET['u'];

function resizeImage($image,$width,$height,$scale) {
    list($imagewidth, $imageheight, $imageType) = getimagesize($image);
    $imageType = image_type_to_mime_type($imageType);
    $newImageWidth = ceil($width * $scale);
    $newImageHeight = ceil($height * $scale);
    $newImage = imagecreatetruecolor($newImageWidth,$newImageHeight);
    switch($imageType) {
        case "image/gif":
            $source=imagecreatefromgif($image); 
            break;
        case "image/pjpeg":
        case "image/jpeg":
        case "image/jpg":
            $source=imagecreatefromjpeg($image); 
            break;
        case "image/png":
        case "image/x-png":
            $source=imagecreatefrompng($image); 
            break;
    }
    imagecopyresampled($newImage,$source,0,0,0,0,$newImageWidth,$newImageHeight,$width,$height);

    switch($imageType) {
        case "image/gif":
            imagegif($newImage,$image); 
            break;
        case "image/pjpeg":
        case "image/jpeg":
        case "image/jpg":
            imagejpeg($newImage,$image,90); 
            break;
        case "image/png":
        case "image/x-png":
            imagepng($newImage,$image);  
            break;
    }

    chmod($image, 0777);
    return $image;
}

//xml reader
function xml2assoc($xml) {
    $arr = array();
    if (!preg_match_all('|\<\s*?(\w+).*?\>(.*)\<\/\s*\\1.*?\>|s', $xml, $m)) return $xml;
    if (is_array($m[1]))
        for ($i = 0;$i < sizeof($m[1]); $i++) $arr[$m[1][$i]] = xml2assoc($m[2][$i]);
    else $arr[$m[1]] = xml2assoc($m[2]);

    return $arr;
}

//na obrazky
function encodeme($encodeMe) { 
    $data = base64_encode($encodeMe); 
    $datalb = ""; 
    while (strlen($data) > 64) { 
        $datalb .= substr($data, 0, 64) . "\n"; 
        $data = substr($data,64); 
    } 
    $datalb .= $data; 
    return $datalb; 
} 

// cURL
function get_web_page( $url,$curl_data ) 
{ 
    $options = array( 
        CURLOPT_BUFFERSIZE => 25000,
        CURLOPT_RETURNTRANSFER => true,         // return web page 
        CURLOPT_BINARYTRANSFER => true,
        CURLOPT_HEADER         => false,        // don't return headers 
        CURLOPT_FOLLOWLOCATION => false,         // follow redirects 
        CURLOPT_ENCODING       => "",           // handle all encodings 
        CURLOPT_USERAGENT      => "bvsreal",     // who am i 
        CURLOPT_AUTOREFERER    => true,         // set referer on redirect 
        CURLOPT_CONNECTTIMEOUT => 12000,          // timeout on connect 
        CURLOPT_TIMEOUT        => 12000,          // timeout on response 
        CURLOPT_MAXREDIRS      => 10,           // stop after 10 redirects 
        CURLOPT_POST            => true,            // i am sending post data 
        CURLOPT_POSTFIELDS     => $curl_data,    // this are my post vars 
        CURLOPT_SSL_VERIFYHOST => 0,            // don't verify ssl 
        CURLOPT_SSL_VERIFYPEER => false,        // 
        CURLOPT_VERBOSE        => 1                // 
    ); 

    $ch      = curl_init($url); 
    curl_setopt_array($ch,$options); 
    $content = curl_exec($ch); 
    $err     = curl_errno($ch); 
    $errmsg  = curl_error($ch) ; 
    $header  = curl_getinfo($ch); 
    curl_close($ch); 

  //  $header['errno']   = $err; 
  //  $header['errmsg']  = $errmsg; 
    $header['content'] = xml2assoc($content); 
    return $header; 
} 

//co bude inzerat zac (I - insert, U - update, D - delete)
$typ_operace = $_GET['typ_operace'];
if(!$typ_operace) $typ_operace = 'I'; // defaultně vkládání

//vytvoření nemovitost.xml dokumentu
$dom = new DOMDocument("1.0", "utf-8");
$dom->formatOutput = true;
$dom->preserveWhiteSpace = false; 
$dom->formatOutput = true; 
$autorizace = $dom->createElement('autorizace');

$username = $dom->createElement('username', 'xxx');
$autorizace-> appendChild($username);

$password = $dom->createElement('password', 'xxx');
$autorizace-> appendChild($password);

$software = $dom->createElement('software', 'xxx');
$autorizace-> appendChild($software);

$unikatni_id_rk = $dom->createElement('unikatni_id_rk', $property_id);
$autorizace-> appendChild($unikatni_id_rk);

$data = $dom->createElement("rows");

    $sql_foto = "SELECT * FROM rl_images WHERE property_id = '$property_id' ORDER BY ord LIMIT 25";
    $query_foto = mysql_query($sql_foto);
    while($foto = mysql_fetch_array($query_foto)){
        $row = $dom->createElement('row');
        $data-> appendChild($row);

        $typ_operace =  $dom->createElement("typ_operace", 'I');
        $row->  appendChild($typ_operace);

        $foto_unikatni_id_rk = $dom->createElement('foto_unikatni_id_rk', $foto['image_id']);
        $row-> appendChild($foto_unikatni_id_rk);
        //zde bude foto_data v base643

        $imgfile = '../rl_images/'.$foto['src'];

    $img = file_get_contents($imgfile);
    //$encoded = strtr(base64_encode(addslashes(gzcompress(serialize($img),9))), '+/=', '-_,');
    if($img)$encoded = base64_encode($img);
    $foto_data = $dom->createElement('foto_data', $encoded);
    $row-> appendChild($foto_data);

        // pokud je vyplněn popis, dám ho tam, pokud ne dam tam poradi
        if($foto['description'])$popis = $foto['description'];
        else $popis = $foto['ord'];

        $foto_popis = $dom->createElement('foto_popis', $popis);
        $row-> appendChild($foto_popis);

        if($foto['ord']=='1')$hlavni = 1;
        else $hlavni = 0;
        $foto_hlavni = $dom->createElement('foto_hlavni', $hlavni);
        $row-> appendChild($foto_hlavni);

        $foto_poradi = $dom->createElement('foto_poradi', $foto['ord']);
        $row-> appendChild($foto_poradi);

    }

    //$rk_id = $dom->createElement('unikatni_id_rk', $property_id);
    //$data-> appendChild($rk_id);
    //$clanek->setAttribute("autor", false);

    //$stat = $dom->createElement('stat', '263');
    //$data-> appendChild($stat);

$autorizace-> appendChild($data);

$dom->      appendChild($autorizace);

$dom->      save("foto.xml");

//vložení nemovitosti
$curl_data = array(
                    'data'=>'@foto.xml',
                    'software'=>'software'
                    );

$url = 'http://www.urbium.cz/import/foto.php';
//$cwd = getcwd();
$response = get_web_page($url,$curl_data); 
  //chdir($cwd);
print '<pre>'; 
print_r($response);
print '</pre>';

ob_end_flush();
?> 
```

回应是：

```
Array
(
    [url] => http://www.urbium.cz/import/foto.php
    [content_type] => text/xml; charset=ISO-8859-2
    [http_code] => 200
    [header_size] => 420
    [request_size] => 253
    [filetime] => -1
    [ssl_verify_result] => 0
    [redirect_count] => 0
    [total_time] => 0.082448
    [namelookup_time] => 0.001688
    [connect_time] => 0.005283
    [pretransfer_time] => 0.005408
    [size_upload] => 428104
    [size_download] => 134
    [speed_download] => 1625
    [speed_upload] => 5192412
    [download_content_length] => 134
    [upload_content_length] => 428104
    [starttransfer_time] => 0.009477
    [redirect_time] => 0
    [content] => Array
        (
            [data] => Array
                (
                    [status] => OK
                    [cesta] => 
                    [file_out_velka] => 
                    [sql_hf] => 
                )

        )

) 
```

cesta 意味着源 velka 意味着大

# wcf - WCF REST 服务 - 如何使用 gzip 解压缩表单数据？

> ID：13801135
> 
> 赞同：1
> 
> 时间：2012-12-10T12:40:41.907
> 
> 标签：wcf, rest, gzip, compression

我们有一个 WCF-REST 服务，客户端使用 Content Encoding = gzip 发送数据并以 gzip 格式压缩数据。但是，我们无法从 WCF 服务中收到的请求中解压缩表单数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T07:45:11.580

最后，我的一幅拼贴画找到了答案，感谢 Sandesh 和团队！！！

您需要添加拦截每个HTTP请求并解压缩数据的IHttpModule

```
/// <summary>
    /// This class Handles various pre-conditions which has to performed before processing the HTTP request.
    /// @author XXXXX
    /// </summary>
    public class PreRequestHandler : IHttpModule
    {
        public void Dispose()
        {
            throw new NotImplementedException();
        }

        public void Init(HttpApplication httpContext)
        {
            httpContext.BeginRequest += DecompressReceivedRequest;
        }

        /// <summary>
        /// Decompresses the HTTP request before processing it.
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        void DecompressReceivedRequest(object sender, EventArgs e)
        {
            HttpApplication httpApp = (HttpApplication)sender;

            if ("gzip" == httpApp.Request.Headers["Content-Encoding"])
            {
                httpApp.Request.Filter = new GZipStream(httpApp.Request.Filter, CompressionMode.Decompress);
            }

        }
    } 
```

另外，需要在 web.config 文件中添加以下条目

```
 <!-- Configuration setting to add Custom Http Module to handle various pre-conditions which has to performed before processing the HTTP request.-->
  <system.webServer>
    <modules>
      <add name="PreRequestHandler" type="Your service class.PreRequestHandler"/>
    </modules>
  </system.webServer> 
```

# php - PHPUnit 使用数据集测试方法中的选择

> ID：13801141
> 
> 赞同：3
> 
> 时间：2012-12-10T12:41:12.353
> 
> 标签：php, mysql, database, unit-testing, phpunit

我尝试测试一种进行 SELECT 查询并返回找到的行的方法。在给定数据集的情况下，我想检查此方法是否不会返回其他内容。我发现了很多关于创建数据集的文档，但没有关于在我的案例中使用它...感谢您的帮助。

测试的方法是：

```
class A
{
  public static function myMethod()
  {
    $result = mysql_query("SELECT * FROM user");
    [...]
    return $rows;
  }
} 
```

测试类是：

```
class ATest extends PHPUnit_Extensions_Database_TestCase
{
  protected $pdo;

  public function __construct()
  {
    $this->pdo = new PDO('mysql:host=localhost;dbname=db_name',
                         'login', 'password');
  }

  public function getConnection()
  {
    return $this->createDefaultDBConnection($this->pdo, 'db_name');
  }

  public function getDataSet()
  {
    return $this->createFlatXMLDataSet('mydataset.xml');
  }

  public function testMyMethod()
  {
    $actual = A::myMethod();
    $this->assertEquals(array([...]), $actual);
    // For this test, I get a mySQL error "No database selected"
    // in A::myMethod()!
  }
} 
```

这是 mydataset.xml 的内容：

```
<?xml version="1.0" ?>
<dataset>
  <user iduser="1" name="John" />
  <user iduser="2" name="James" />
</dataset> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T03:27:32.937

在我的情况下，我所做的是使用 pdo 连接到数据库，如下所示：

```
static private $pdo=null;
private $conn=null;
    public function getConnection()
        {
            if($this->conn===null)
            {
                if(self::$pdo===null)
                {
                    self::$pdo = new PDO("mysql:host=yourhost;dbname=yourdbname_",
                "yourusername", "yourpassword");
                }
                $this->conn= $this->createDefaultDBConnection(self::$pdo, 'yourdbname_');
                return $this->conn;
            }
        }, 
```

然后对于测试，下面的这个块获取 testdb 中的所有值并将其与 xml 文件进行比较。

```
 public function testGetAll()
            {
                $resultingTable = $this->db
                ->createQueryTable("yourtable",
                "SELECT * FROM yourtable");
                 $expectedTable = $this->getDataSet()
                ->getTable("yourtable");
            $this->assertTablesEqual($expectedTable,
                $resultingTable);   
            } 
```

这对我来说很好，应该允许您从 testdb 中获取所有值并断言它们与 xml 值相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:01:12.977

Just like in your real application, you need to connect to the database before you can call it. The `mysql_query()` function relies on a previous call having been made to `mysql_connect()`. If you're only calling the one class method in isolation, then you won't have called the connect function, so you won't have a connection, and so your query command won't know what database it needs to query.

The PDO connection being used in the test class is explicitly separate from and not used by the methods being tested (this applies even if those methods also use PDO); you need to create a connection for the query.

The solution here is to include a call to your DB connection method at the start of the test. This could be in the unit test method, or in the `setUp()` method of the test class, or in a bootstrap file that PHPUnit calls before running any of the tests. Which of these you use will depend on how many DB tests you need to run and across how many test classes.

Straying slightly off topic, but still relevant: I note that your code is using the old `mysql_xxx()` functions (ie `mysql_query()`). It would be advisable to avoid using these functions, as they are obsolete and insecure, and in the process of being deprecated by the PHP dev team. You will therefore find yourself unable to upgrade your PHP version in the future if you keep using them.

Use `mysqli_xxx()` instead (or PDO, as per your test class).

Back on topic, and in fact doing this will also lead you toward fixing the problem you're having anyway, since both `mysqli` and PDO require the connection object to be available when calling their functions/methods, so you'll have to have a valid connection object in order to even have valid syntax to call the query. Switching to mysqli or PDO will therefore force you to write your code in a way that solves the problem in the question.

# performance - 网站加载速度慢

> ID：13801149
> 
> 赞同：0
> 
> 时间：2012-12-10T12:41:34.467
> 
> 标签：performance, web, pagespeed

我的网站[http://theminimall.com](http://theminimall.com) 比以前花费了更多的加载时间

最初我在美国有一台服务器，当时我的网站速度约为 5 秒。但现在我已经将我的服务器转移到新加坡，加载速度提高了大约 10 秒。

从存储过程（sql server 数据库）获取结果的等待时间越长，但是当我在 Sql Server 中执行存储过程时，它返回的结果非常快

所以我假设所花费的时间不是由于查询执行延迟，而是从 sql 服务器到 Web 服务器的数据传输时间我怎样才能消除或减少所花费的时间任何帮助或建议将不胜感激

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:53:52.920

我在 websitetest.com 上查看了您的网站。您可以在此处查看测试：[http](http://www.websitetest.com/ui/tests/50c62366bdf73026db00029e) ://www.websitetest.com/ui/tests/50c62366bdf73026db00029e 。

我明白你对表演的意思。在新加坡，它绝对是最快的，但即使在那里也很慢。世界其他地方的情况更糟。有几件事我会看。

首先选择任何样本，例如[http://www.websitetest.com/ui/tests/50c62366bdf73026db00029e/samples/50c6253a0fdd7f07060012b6](http://www.websitetest.com/ui/tests/50c62366bdf73026db00029e/samples/50c6253a0fdd7f07060012b6)。现在您可以在 Chrome DevTools 或 FireBug 中获得其中的一些信息，但这里的优势是可以查看来自世界各地不同位置的测量结果。

向下滚动到瀑布。时间轴列标题右侧一直是一个下拉菜单。选择降序排列。在这里我们可以看到真正的瓶颈。视图中的第一件事是 GetSellerRoller.json。看起来几乎没有时间花在下载文件上。几乎所有的时间都花在等待服务器生成文件上。我看到该站点正在使用 IIS 和 ASP.net。我肯定会考虑利用一些服务器端缓存来加快速度。

主 html 也是如此，尽管下载该文件会花费更多时间。看起来它需要很长时间才能下载，因为它是一个巨大的文件（对于 html）。我会把内联 CSS 和 JS 去掉。

回到时间线的自然顺序，然后您可以尝试更改要显示的文件类型。看起来您正在加载 10 个 CSS 文件，因此请查看连接这些 CSS 文件并压缩它们。

我看到您的网站必须建立 220 多个连接才能下载所有内容。这是一个巨大的数字。尝试消除其中的一些。

接下来的列表中，我看到了一些大的 jpg 文件。其中大部分再次在服务器上等待，但有些需要一段时间才能下载。我查看了一台笔记本电脑，能够将其转换为高度压缩的 png 并节省 30% 的大小并获得一个看起来相同的文件。然后我注意到有超过 100 张图片，其中很多都很小。您网站上的一大障碍是浏览器需要管理的连接太多。看看为那些小图像实现 CSS Sprites。您可能可以将其中的 30-50 个缩减为单个图像下载。

我注意到的最后一件事是，您在页面顶部附近加载了很多 JavaScript。尝试将其中的一些内容（如果可能）移到页面的后面，并尽可能地考虑异步加载 js。

我认为你有很多建议可以尝试。解决这些问题后，看看利用 CDN 和其他缓存服务来帮助大多数访问者加快处理速度。

您可以在 Steve Souder 的书：High Performance Web Sites 中更详细地找到这些建议。这本书已有 5 年历史，今天仍然像以往一样具有相关性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:37:53.647

我刚刚查看了 websitetest.com，该网站完全不正确，我的网站是最快的 97%，使用该网站说它的 26% 来自测试 13 个位置。他们的服务器必须超载，我建议您使用信誉更好的测试站点，例如[http://www.webpagetest.org](http://www.webpagetest.org)，它得到了许多大公司的支持。

查看您的联系方式，您的主要受众似乎是印度？如果这是正确的，您应该在您的主要受众所在或最近的邻居所在的任何地方使用托管。

# c++ - 使用 QSystemStorageInfo 无法在 QtreeView 中显示驱动器

> ID：13801153
> 
> 赞同：1
> 
> 时间：2012-12-10T12:41:40.113
> 
> 标签：c++, qt, qt4, filesystems, qtreeview

我正在使用`QSystemStorageInfo`QTreeView 显示我系统的所有本地和可移动驱动器。我编写了一个代码，其中所有驱动器（如 C:、D: 等）都在本地驱动器部分下，而 SD_Card 出现在可移动驱动器部分下。这是代码：

```
#include <QtSystemInfo/QSystemStorageInfo>

m_model = new QStandardItemModel(0,0);

QList<QStandardItem *> LocalItem;
LocalItem.insert(0,new QStandardItem("Local Drives"));
LocalItem.at(0)->setEditable(false);
m_model->insertRow(0,LocalItem);

QList<QStandardItem *> RemovableItem;
RemovableItem.insert(0,new QStandardItem("Removable Drives"));
RemovableItem.at(0)->setEditable(false);
m_model->insertRow(1,RemovableItem);

QStringList list = m_sysStorageInfo->logicalDrives(),listremovable,listlocal;
for(int i=0; i<list.count(); i++)
{
    m_dtype = m_sysStorageInfo->typeForDrive(list[i]);
    if ( m_dtype == QSystemStorageInfo::RemovableDrive)
    {
        listremovable<<list[i];
        qDebug()<<listremovable;
    }
    else
    {
        listlocal<<list[i];
        qDebug()<<listlocal;
    }
}

for (int i = 0; i < listlocal.count(); i++)
{
    QString myString = listlocal.at(i);

    QStandardItem* Localchild = new QStandardItem(myString);
    QStandardItem* LocalparentItem = m_model->item(0,0);
    Localchild->setEditable(false);
    LocalparentItem->appendRow(Localchild);
}

for (int i = 0; i < listremovable.count(); i++)
{
    QString myString = listremovable.at(i);

    QStandardItem* Removablechild = new QStandardItem(myString);
    Removablechild->setEditable(false);
    QStandardItem* RemovableparentItem = m_model->item(0,0);
    RemovableparentItem->appendRow(Removablechild);
}

ui->PrimTreeView->setModel(m_model); 
```

头文件：

```
QSystemStorageInfo *m_sysStorageInfo;
QSystemStorageInfo::DriveType m_dtype; 
```

当我运行该应用程序时，它会在我的本地部分和可移动部分下的 SD_Card 中给出 C:、D:。但是当我单击 C: 驱动器或 D: 驱动器时，它不会显示其中存在的文件夹。我哪里错了？？？

# visual-studio-2010 - 将企业库与 Visual Studio 2010 集成

> ID：13801154
> 
> 赞同：0
> 
> 时间：2012-12-10T12:41:45.730
> 
> 标签：visual-studio-2010, enterprise-library

我已经安装了 Microsoft Enterprise Library 4.1。现在，我想通过右键单击并选择“编辑企业库配置”来编辑 app.config 文件。但是，我看不到这个选项。我认为，企业库没有与我的 Visual Studio 2010 集成。

我该如何解决？有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:06:34.787

根据[Enterprise Library 4.1 下载页面](http://www.microsoft.com/en-us/download/details.aspx?id=6228)的概述，仅支持 Visual Studio 2008 和 2008 SP1。您仍然可以从开始菜单启动配置编辑器并手动打开文件，或者您可以升级到支持 Visual Studio 2010 的 Enterprise Library 5.0。

# javascript - 如何在javascript中没有查询字符串的情况下将字符串或数组传递到另一个页面？

> ID：13801155
> 
> 赞同：1
> 
> 时间：2012-12-10T12:41:46.167
> 
> 标签：javascript

我的页面中有字符串变量和数组。我想将这些变量传递给其他页面。对于字符串变量，是的，我可以使用查询字符串，但对于数组，我能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:42:39.677

您可以将其存储在`localStorage`假设用户拥有现代浏览器的情况下。否则，您可以将其序列化，例如转换为 JSON，并将其存储在 cookie 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T12:51:47.537

localStorage 只能处理字符串，这就是为什么在存储之前必须先将数组转换为字符串的原因。

```
var yourArray = [ 1, 2, 3 ];

// Store it
localStorage['foo'] = JSON.stringify( yourArray );

// And retrieve it
var storedArray = JSON.parse( localStorage['foo'] ); 
```

就像其他人所说的那样，上述内容仅适用于现代浏览器，因此如果您担心浏览器兼容性，您可以将数组存储在 cookie 中。

如果您对 cookie 的大小限制和数组的大小有疑虑，请查看此[**问题**](https://stackoverflow.com/questions/5381526/what-are-the-current-cookie-limits-in-modern-browsers)

# javascript - Javascript 库：仅加载您需要的那些文件

> ID：13801160
> 
> 赞同：0
> 
> 时间：2012-12-10T12:42:09.933
> 
> 标签：javascript, web-applications, dojo

我们正在开发一个用于 JSF 应用程序的 javascript 组件，并且我们正在使用 Dojo。问题是我们只需要库的特定部分，并且我们只想将用于实现目标的文件/文件夹插入到我们的 web 应用程序中。

我们可以“手动”执行此操作，但将来我们可能需要从 Dojo 添加其他功能，然后我们将不知道我们需要哪些资源 -> 我想此时您意识到我们不是 Dojo/js 专家。

基本上我们正在寻找一种方法来自动化这个过程。我们正在考虑获取依赖项列表，然后创建一个小脚本来“过滤”文件。

这可能吗 ？有没有人试过这个？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:47:12.087

好的，我们通过执行以下操作来做到这一点（以防万一有人需要）：

```
    * 声明一个 JSF 过滤器并将其映射到 /js/*（所有 dojo 资源都在 /js 文件夹下，这可能需要修改以适合您的文件夹结构）；这样，所有对 dojo 资源的请求都将被过滤。
    * 在过滤器类中，获取所有请求的文件：(HttpServletRequest) request).getRequestURI() 并将其逐行写入文件中：现在您拥有所有需要的资源。
    * 使用脚本逐行解析该文件，然后将文件复制到另一个位置 -> 构建文件夹结构。
    * 使用 WebContent 文件夹中创建的文件（或任何你需要的地方），你有一个干净的库 -> 你只部署你使用的东西。

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:43:33.177

我可能误解了您的要求，但我认为 dojo 可以满足您的要求。由于最新版本的 dojo 遵循异步模块定义 (AMD) 格式，因此您使用全局`require`函数来描述特定代码块具有哪些依赖项，并且仅加载这些模块。[来自sitepen dojo 介绍](http://dojotoolkit.org/documentation/tutorials/1.8/hello_dojo/)的示例：

```
require(["dojo/dom", "dojo/domReady!"], function(dom){
    var greeting = dom.byId("greeting");
    greeting.innerHTML += " from Dojo!";
}); 
```

如果您只想加载单个`<script/>`标签，则需要查看 dojo 构建器。使用[在线构建工具](http://build.dojotoolkit.org/)您可以选择要包含在 dojo.js 层中的包，它会将所有内容捆绑到一个 zip 文件中，该文件包括 dojo.js/dojo.js.uncompressed.js，其中包含 dojo 核心以及您选择的模块。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-10T12:46:40.330

网络上充斥着成熟的 JavaScript 库，他们说它们会拯救你的一天，让你的网络开发生活更轻松。我们鼓励您包含这些“仅 80 kb”的库，这些库应该是满足您所有需求的解决方案，并且实际上使网站能够自行运行。不用说，我不是 JavaScript 库的忠实追随者，尤其是因为它们几乎总是包含大量多余的代码，所以我想我应该将一个只有基本 JavaScript 函数的小型库放在一起。

其结果是 EJ - Essential JavaScript。

EJ 由我一直使用的函数组成，它们使编写 JavaScript 变得更快，结果是能够更有效地完成工作。这也是关于将您为每个网站一次又一次编写的内容放在一个整洁而小巧的文件中，以便能够专注于您需要解决的新问题

# java - 尝试 ping 时，抛出 java.net.UnknownHostException。我不明白原因

> ID：13801162
> 
> 赞同：1
> 
> 时间：2012-12-10T12:42:15.507
> 
> 标签：java, networking, ping, unknown-host

我编写了以下代码来尝试`ping`. 但是当我运行它时，会抛出以下异常：

```
java.net.UnknownHostException: http://localhost:8084/server/index.jsp
    at java.net.Inet6AddressImpl.lookupAllHostAddr(Native Method)
    at java.net.InetAddress$1.lookupAllHostAddr(Unknown Source)
    at java.net.InetAddress.getAddressFromNameService(Unknown Source)
    at java.net.InetAddress.getAllByName0(Unknown Source)
    at java.net.InetAddress.getAllByName0(Unknown Source)
    at java.net.InetAddress.getAllByName(Unknown Source)
    at java.net.InetAddress.getByName(Unknown Source)
    at Tester.main(Tester.java:10) 
```

* * *

```
import java.net.InetAddress;

class Tester {
public static void main(String args[]) {
    try {
      InetAddress address = InetAddress.getByName("http://localhost:8084/server/index.jsp");
      boolean isReachable = address.isReachable(2000);
      if(isReachable)
        System.out.println("The address is reachable");
      else
        System.out.println("The address is not reachable");

    } catch(Exception exc) {
       exc.printStackTrace();
      }
}
} 
```

为什么会这样？服务器正在运行，页面在网络浏览器中打开正常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T12:49:53.523

问题出在这一行：

```
InetAddress address = InetAddress.getByName(
        "http://localhost:8084/server/index.jsp"); 
```

该`InetAddress.getByName(String)`方法需要一个主机名。你给了它一个 URL 字符串。该地址的主机名部分是`"localhost"`.

如果要“ping”与 URL 关联的主机，则需要解析 URL 并提取主机名组件，如下所示：

```
String hostname = new URL(str).getHost(); 
```

但是您需要处理 URL 格式错误或没有主机名组件的情况。

* * *

我想您*实际上是*在尝试测试其他一些主机名，因为向`"localhost"`（通常`127.0.0.1`）发送 ICMP_PING 请求是毫无意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:48:10.247

因为 a 后面的域`firewall`阻止了`ping`请求

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T12:50:42.267

getByName 将主机名或 IP 地址作为参数，而不是 URL。

# .net - 如何正确关闭 HttpRequest/Response 以避免第三次连接尝试超时

> ID：13801167
> 
> 赞同：0
> 
> 时间：2012-12-10T12:42:23.750
> 
> 标签：.net, httpwebrequest, httpwebresponse

我在第三次尝试调用 HttpWebRequest.GetRequestStream 时遇到超时问题。这是用于调试代码以测试第三方资源的间歇性问题，因此它只是一遍又一遍地发出相同的请求。

当使用 Fidder 作为代理时，这个问题并没有表现出来，所以这让我相信它与连接池中的打开连接有关（我记得在某处读过两次尝试与 Http 1.1 规范有关）。

许多问题都谈到了关闭请求和[关闭响应](https://stackoverflow.com/a/5508926/198048)，但我对两者都有一个 using 语句，所以认为这会在超出范围时自动发生。但是，我也尝试在请求和响应流上调用 close 和 flush 。

还有一些问题提到[将 ConnectionLeaseTimeout 设置](https://stackoverflow.com/q/5827030/198048)为 0。但这也不起作用。

我不确定还有什么可以尝试的，有人有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:22:45.807

每个请求之间有多少差距？您是否有可能遇到某种旨在阻止 DoS 攻击的防火墙规则？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:50:27.753

您是否尝试在建立连接之前将[HttpWebRequest.HttpKeepAlive](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.keepalive%28v=vs.85%29.aspx)属性设置为 false？

# android - Jython 中 ViewClient 对象的实例创建失败

> ID：13801172
> 
> 赞同：0
> 
> 时间：2012-12-10T12:42:40.560
> 
> 标签：android, jython

我正在通过 Jython 程序使用 monkeyrunner 进行 android 设备测试。但是在创建 ViewClient 对象时出现错误。错误详细信息如下所示：

例外：无法启动 View 服务器。这仅适用于模拟器和运行开发者版本的设备。hierarchyviewer 可以在您的设备上使用吗？

当我从命令行输入 hierarchyviewer 命令时，我得到以下信息：

```
D:\Telus\Pyton Programs>hierarchyviewer
The standalone version of hieararchyviewer is deprecated.
Please use Android Device Monitor (tools/monitor.bat) instead.
04:57:24 E/hierarchyviewer: Unable to get view server version from device 644276034934
04:57:24 E/hierarchyviewer: Unable to get view server protocol version from device 644276034934
04:57:27 E/hierarchyviewer: Unable to debug device 644276034934 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:21:37.900

这是 AVC 的局限性。AndroidViewClient 仅适用于模拟器和运行开发者版本，您无法使用 AVC 在真实设备上测试您的应用程序。[您可以在此http://developer.android.com/tools/debugging/debugging-ui.html](http://developer.android.com/tools/debugging/debugging-ui.html)上找到有关 hiearachyviewer 的更多信息

# perl - 在反引号命令中使用管道

> ID：13801173
> 
> 赞同：2
> 
> 时间：2012-12-10T12:42:42.497
> 
> 标签：perl

我遇到了一些代码问题，我想知道是否有人可以提供帮助。

基本上我正在尝试对数据库执行 isql 查询并将其分配给标量变量。isql 命令使用定义为管道符号的列分隔符。

所以我把它设置成这样：

```
my $command = "isql -S -U -s| -i";
my $isql_output = `$command`; 
```

isql 命令单独工作，但当作为反引号发出时，它会在管道处停止。我尝试`$command`使用子字符串连接字符串，使用单引号和反斜杠转义项等`-s\"\|\"`无济于事。我也尝试过使用`qx`而不是反引号。

不幸的是，我目前使用的是旧版本的 perl (v5.6.1)，升级范围有限，所以我不确定我是否能解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T12:49:51.427

`|`您必须以shell 无法将其识别为特殊字符的方式引用。两种方式：

1.  将`-s|`放入单引号中：`'-s|'`. Perl 将在双引号字符串中单独留下单引号，并将它们不加修改地传递给 shell。
2.  `|`用两个反斜杠转义：`-s\\|`. 为什么是两个？Perl 看到第一个字符，告诉它不加修改地传递下一个字符。因此，shell 看到`-s\|`并做了一些非常相似的事情：它看到单个`\`并且知道不处理下一个字符`|`，，特殊。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:05:43.477

问题是该命令是通过外壳执行的。您可以通过在列表而不是单个字符串中传递命令和参数来避免这种情况。反引号结构不支持这一点，因此您需要改用该`open()`函数。我没有测试以下代码，但它给出了这个想法：

```
my @command = (qw(isql -Sserver -Uuser -Ppassword -s| -w4096), '–i' . $file);
print join(' ', @command), "\n";
open(my $fh, '-|', @command)
  or die "failed to run isql command: $@\n";
my @isql_output = <$fh>;
close($fh);
my $isql_output = $isql_output[0]; chomp($isql_output); 
```

如果您正在使用 15 年前的 Perl 版本（Oracle 用户倾向于这样做），我不确定这是否会得到支持。例如，您可能需要编写`chop`而不是`chomp`.

[更新：根据文档](http://perldoc.perl.org/perlopentut.html#Pipe-Opens)，问题不在于 Perl 版本，而是 Windows 不支持此构造。这必须是合格的：我在 Cygwin 上使用 Perl，它在那里工作得很好，但我不知道你是否可以使用 Cygwin。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T12:56:50.213

单引号应该可以工作。尝试运行测试 perl 脚本：

```
my $cmd = "./test.sh -S -U -s '|' -i";
print `$cmd`; 
```

使用 test.sh：

```
#!/bin/sh

echo $@ 
```

输出应该是`-S -U -s | -i`

# c - 经典 C. 在 execvp 函数、标准输入和标准输出重定向中使用管道

> ID：13801175
> 
> 赞同：15
> 
> 时间：2012-12-10T12:42:50.020
> 
> 标签：c, redirect, fork, execvp

我想使用管道和 execvp 函数在我的 Linux C 程序中模拟 bash。例如

```
ls -l | wc -l 
```

有我的程序：

```
if(pipe(des_p) == -1) {perror("Failed to create pipe");}

if(fork() == 0) {    //first fork
  close(1);          //closing stdout
  dup(des_p[1]);     //replacing stdout with pipe write 
  close(des_p[0]);   //closing pipe read
  close(des_p[1]);   //closing pipe write

  if(execvp(bash_args[0], bash_args)) // contains ls -l
    /* error checking */
}
else {
  if(fork() == 0) {  //creating 2nd child
    close(0);        //closing stdin
    dup(des_p[0]);   //replacing stdin with pipe read
    close(des_p[1]); //closing pipe write
    close(des_p[0]); //closing pipe read

    if(execvp(bash_args[another_place], bash_args)) //contains wc -l
      /* error checking */
  }

  close(des_p[0]);
  close(des_p[1]);
  wait(0);
  wait(0);
} 
```

此代码实际上运行，但没有做正确的事情。这段代码有什么问题？这不起作用，我不知道为什么。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-10T15:30:41.997

您需要关闭父级中的管道 fds，否则子级将不会收到 EOF，因为管道仍然打开以在父级中写入。这将导致第二个`wait()`挂起。为我工作：

```
#include <unistd.h>
#include <stdlib.h>

int main(int argc, char** argv)
{
        int des_p[2];
        if(pipe(des_p) == -1) {
          perror("Pipe failed");
          exit(1);
        }

        if(fork() == 0)            //first fork
        {
            close(STDOUT_FILENO);  //closing stdout
            dup(des_p[1]);         //replacing stdout with pipe write 
            close(des_p[0]);       //closing pipe read
            close(des_p[1]);

            const char* prog1[] = { "ls", "-l", 0};
            execvp(prog1[0], prog1);
            perror("execvp of ls failed");
            exit(1);
        }

        if(fork() == 0)            //creating 2nd child
        {
            close(STDIN_FILENO);   //closing stdin
            dup(des_p[0]);         //replacing stdin with pipe read
            close(des_p[1]);       //closing pipe write
            close(des_p[0]);

            const char* prog2[] = { "wc", "-l", 0};
            execvp(prog2[0], prog2);
            perror("execvp of wc failed");
            exit(1);
        }

        close(des_p[0]);
        close(des_p[1]);
        wait(0);
        wait(0);
        return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:02:46.090

阅读该`wait`功能的作用。它将等到一个子进程存在。在开始第二个孩子之前，您正在等待第一个孩子退出。第一个孩子可能不会退出，直到有一些从管道另一端读取的进程。

# iphone - 使用 FBConnect 在 Facebook 上发布图片

> ID：13801180
> 
> 赞同：0
> 
> 时间：2012-12-10T12:42:56.823
> 
> 标签：iphone, facebook, ios5

我想使用 fbconnect 在 facebook 上发布图片。

我已经编写了以下代码行，但我应该更改我的代码以在 Facebook 上发布图像。

```
- (void) postOnPage
{
    [self saveAccessTokenKeyInfo];

    NSString *imgStr=@"hello";

    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"Hat Application", @"name",
                                   @"http://www.idhats.com/", @"link",
                                   @"HatApp", @"caption",
                                   imgStr, @"picture",
                                   nil];

    [facebook dialog:@"feed" andParams:params andDelegate:self];

} 
```

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:47:10.690

```
- (void)uploadPhoto{
NSMutableDictionary *args = [[NSMutableDictionary alloc] init];
UIImage *img = [UIImage imageNamed:@"picture1.jpg"];
NSData *data = UIImageJPEGRepresentation(img, 10);
//NSData *data = UIImagePNGRepresentation(img);
NSString *imgstr = [data base64Encoding];
//NSString *imgstr = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
//[args setObject:[UIImage imageNamed:@"antartica1.png"] forKey:@"image"];   
[args setObject:imgstr forKey:@"image"];    // 'images' is an array of 'UIImage' objects
uploadimgrequest = [FBRequest requestWithDelegate:self];
[uploadimgrequest call:@"photos.upload" params:args dataParam:data];
//[uploadimgrequest call:@"photos.upload" params:args];
}

-(NSString *)Base64Encode:(NSData *)data{
//Point to start of the data and set buffer sizes
int inLength = [data length];
int outLength = ((((inLength * 4)/3)/4)*4) + (((inLength * 4)/3)%4 ? 4 : 0);
const char *inputBuffer = [data bytes];
char *outputBuffer = malloc(outLength);
outputBuffer[outLength] = 0;

//64 digit code
static char Encode[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";

//start the count
int cycle = 0;
int inpos = 0;
int outpos = 0;
char temp;

//Pad the last to bytes, the outbuffer must always be a multiple of 4
outputBuffer[outLength-1] = '=';
outputBuffer[outLength-2] = '=';

/* http://en.wikipedia.org/wiki/Base64
 Text content   M           a           n
 ASCII          77          97          110
 8 Bit pattern  01001101    01100001    01101110

 6 Bit pattern  010011  010110  000101  101110
 Index          19      22      5       46
 Base64-encoded T       W       F       u
 */

while (inpos < inLength){
    switch (cycle) {
        case 0:
            outputBuffer[outpos++] = Encode[(inputBuffer[inpos]&0xFC)>>2];
            cycle = 1;
            break;
        case 1:
            temp = (inputBuffer[inpos++]&0x03)<<4;
            outputBuffer[outpos] = Encode[temp];
            cycle = 2;
            break;
        case 2:
            outputBuffer[outpos++] = Encode[temp|(inputBuffer[inpos]&0xF0)>> 4];
            temp = (inputBuffer[inpos++]&0x0F)<<2;
            outputBuffer[outpos] = Encode[temp];
            cycle = 3;                  
            break;
        case 3:
            outputBuffer[outpos++] = Encode[temp|(inputBuffer[inpos]&0xC0)>>6];
            cycle = 4;
            break;
        case 4:
            outputBuffer[outpos++] = Encode[inputBuffer[inpos++]&0x3f];
            cycle = 0;
            break;                          
        default:
            cycle = 0;
            break;
    }
}
NSString *pictemp = [NSString stringWithUTF8String:outputBuffer];
free(outputBuffer); 
return pictemp;
} 
```

# javascript - Chrome 无法在没有服务器的情况下设置 Cookie

> ID：13801181
> 
> 赞同：2
> 
> 时间：2012-12-10T12:42:57.533
> 
> 标签：javascript, html, google-chrome

我在不使用服务器的情况下创建了一个小项目。在那里我设置了 cookie 来检索值。如果我在 FF、Safari、IE 9 中运行这个项目，它可以正常工作，它会设置 cookie 并检索 cookie，但在 chrome 23.0 中它不会设置 cookie。

```
 <script>
       window.onbeforeunload=function(){
            document.cookie = "sample" + '=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
        }
        function setCookie(c_name,value,exdays)
        {
            var exdate=new Date();
            exdate.setDate(exdate.getDate() + exdays);
            var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
            document.cookie=c_name + "=" + c_value;
        }
        function getCookie(c_name)
        {
            var i,x,y,ARRcookies=document.cookie.split(";");
            for (i=0;i<ARRcookies.length;i++)
            {
                x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
                y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
                x=x.replace(/^\s+|\s+$/g,"");
                if (x==c_name)
                {
                    return unescape(y);
                }
            }
        }
        setCookie("sample","samplename",365);
        alert(getCookie("sample"));
    </script> 
```

在 FF、Safari、IE 9 中显示 cookie 值“samplename”但在 chrome 23.0 中显示“未定义”。如果我为此使用服务器，那么 chrome 会设置 cookie。如何在不使用服务器的情况下在 chrome 中设置 cookie。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T12:48:04.933

似乎 Chrome 故意忽略本地文件的 cookie，如果您使用 xammp 之类的本地服务器使用 127.0.0.1 浏览它，它会起作用

`--enable-file-cookies`或者使用命令行中的标志启动 chrome

您可以获得有关此[SO 问题的更多信息](https://stackoverflow.com/questions/335244/why-does-chrome-ignore-local-jquery-cookies)

或者这个[讨论](http://code.google.com/p/chromium/issues/detail?id=535)

# multithreading - “我有多少个链接？”，Erlang 进程问道

> ID：13801182
> 
> 赞同：3
> 
> 时间：2012-12-10T12:42:59.367
> 
> 标签：multithreading, process, erlang

Erlang 中的进程将调用`link/1`或`spawn_link`创建与另一个进程的链接。在我正在研究的最近的一个应用程序中，我很好奇一个进程是否有可能在给定的实例中知道它所链接的其他进程的数量。这可能吗 ？他们是 BIF 吗？

然后，当一个链接进程死亡时，我猜如果有可能知道链接进程的数量，这个数字将由运行时系统自动递减。这种机制在处理`Parent-Child`Erlang 并发程序中的关系时是理想的，即使是在不涉及`supervisors`.

那么，Erlang 进程是否有`out-of-the-box`可能通过 BIF 知道链接到它的进程的数量，这样每当一个链接的进程死亡时，这个值就会自动递减`under-the-hood`:)？

* * *

为了稍微扩展这个问题，考虑一个 gen_server，它将通过`handle_info`. 在这部分，它的工作是让`dispatch`子进程在任务进入时立即处理。这样做的目的是确保`server loop`立即返回以处理下一个请求。现在，子进程异步处理任务，并在请求者死亡之前将回复发送回请求者。在继续之前，请参阅此[问题](https://stackoverflow.com/q/13376213/431620)及其答案。

现在，如果为每个由 gen_server 生成的子进程创建一个链接，我想使用这个链接作为计数器。我知道，我知道，每个人都会像“为什么不使用 gen_server`State`，携带一个计数器，然后相应地增加或减少它？" :) 在 gen_server 的某个地方，我有：

```
handle_info({Sender,Task},State)-&gt;
    spawn_link(?MODULE,child,[Sender,Task]),
    %%  At this point, the number of links to the gen_server is incremented
    %%  by the run-time system
    {noreply,State};
handle_info( _ ,State) -&gt; {noreply,State}. 
```

孩子继续这样做：

```
child(Sender,Task)-&gt;
    Result = (catch execute_task(Task)),
    Sender ! Result,
    ok. %% At this point the child process exits, 
        %% and i expect the link value to be decremented 
```

最后， gen_server 有一个公开的调用，如下所示：

```
get_no_of_links()-&gt; gen_server:call(?MODULE,links).
handle_call(links, _ ,State)-&gt;
    %% BIF to get number of instantaneous links expected here
    Links = erlang:get_links(), %% This is fake, do not do it at home :)
    {reply,Links,State};
handle_call(_ , _ ,State)-&gt; {reply,ok,State}. 
```

现在，有人可能会问自己，真的，为什么有人要这样做？

通常，可以在 gen_server 状态中创建一个整数，然后我们自己来做，或者至少使 gen_server 为 handle_info 类型`{'EXIT',ChildPid,_Reason}`，然后服务器会相应地采取行动。我的想法是，如果可以知道链接的数量，我会用它来知道（在给定的时间），有多少子进程仍在忙于工作，这反过来实际上可能有助于预测服务器负载。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T12:56:58.033

来自 process_info 的手册：

> {links, Pids}：Pids 是一个 pid 列表，其中包含该进程有链接的进程

```
3> process_info(self(), links).
{links,[<0.26.0>]}
4> spawn_link(fun() -> timer:sleep(100000) end).
<0.38.0>
5> process_info(self(), links).                 
{links,[<0.26.0>,<0.38.0>]} 
```

我想它可以用来计算链接进程的数量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:13:59.597

您的进程应该运行`process_flag(trap_exit, true)`并侦听表单的消息，这些消息`{'EXIT', Pid, Reason}`将在链接的进程退出时到达。如果您不捕获退出，则默认行为将是您的链接进程在链接的另一端退出时退出。

至于监听进程何时添加链接，您可以使用`case process_info(self(), links) of {links, L} -> length(L) end`or `length(element(2, process_info(self(), links))`，但您必须定期重新运行它，因为无论何时添加链接都无法通知您的进程。

遵循 OTP 指南的流程永远不需要知道有多少流程与其相关联。

# java - 如何在oracle中获取表作为输出参数

> ID：13801183
> 
> 赞同：4
> 
> 时间：2012-12-10T12:42:58.877
> 
> 标签：java, sql, oracle

我正在尝试将 oracle 过程调用的 out 参数转换为对象。它不起作用，因为 - 据我了解 - 我需要定义一个映射，它告诉方法如何投射它。如果地图是空的或未正确填充，则默认为 STRUCT 类型的 Objekt - 这在我的情况下是错误的。

我已经建立了一个示例，应该可以说明问题：

```
-- Procedure in database
PROCEDURE myprocedure (
inputParam                IN       VARCHAR2 (4),
outputOne                 OUT outputOneSQLType
outputTwo                 OUT outputTwoSQLType);

-- inside of a package
inside a package mypackage

-- first type
create or replace
TYPE outputOneSQLType IS TABLE OF tableOneExample

-- table of type
create or replace
TYPE tableOneExample AS OBJECT (
      somethingOne                 VARCHAR2 (4)
     ,somethingTwo        NUMBER (12)
)

//java from here

import oracle.jdbc.OracleCallableStatement;
import oracle.jdbc.OracleTypes;
import oracle.jdbc.oracore.OracleTypeADT;
import oracle.sql.STRUCT;
...
oracle.jdbc.driver.OracleConnection oracleConn = (oracle.jdbc.driver.OracleConnection) con.getMetaData().getConnection();
final OracleCallableStatement storedProc = (OracleCallableStatement)oracleConn.prepareCall("{call mypackage.myprocedure("+
                ":inputParam, :outputOne, :outputTwo)}");

storedProc.setString("inputParam", "SomeValue");

storedProc.registerOutParameter("outputOne",  OracleTypes.STRUCT, "OUTPUTONESQLTYPE");
storedProc.registerOutParameter("outputTwo",  OracleTypes.STRUCT, "OUTPUTTWOSQLTYPE");

storedProc.execute();

//So far so good

//now I am lost - I need to define the map to get the object? 
//What should be inside the map?
Hashtable newMap = new Hashtable();

newMap.put("outputOneSQLType", ?????.class);

//If the map is empty, it defaults to STRUCT...
final STRUCT myObject =  (STRUCT)storedProc.getObject("somethingOne",newMap);
// myObject.getBytes() gives me an object... but I cannot cast it to anything 
```

由于地图错误，我不能使用类似的东西：

```
final MyClass myObject =  (MyClass)storedProc.getObject("somethingOne",newMap); 
```

我应该如何填写地图？

**编辑 1**

oracle 数据库中的条目不能更改。我只是被允许使用它们。为此

```
stmt.registerOutParameter(2, java.sql.Types.ARRAY, "OUTPUTONESQLTYPE"); 
```

不起作用。因为只要我不使用“OracleTypes.STRUCT”就会引发异常。似乎在 outputOneSQLType 内部有一个“OracleTypeCOLLECTION”类型的对象

当我尝试

```
 Hashtable newMap = new Hashtable();
newMap.put("outputOneSQLType",OracleTypeCOLLECTION.class);
final OracleTypeCOLLECTION myObject =  (OracleTypeCOLLECTION)storedProc.getObject("somethingOne",newMap); 
```

我得到一个例外：`InstantiationException: oracle.jdbc.oracore.OracleTypeCOLLECTION`

@DazzaL：我将尝试定义一个 SQLDATA 接口。也许这将是解决方案

**解决方案**

1.  准备好的语句应该类似于“begin package.procedure(...); end;” 而**不是**“{call package.procedure(...)})
2.  需要一个 SQLData 接口。

@DazzaL：你统治！谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T14:10:33.417

您必须定义一个 sqldata 对象来映射它。

文档：[http ://docs.oracle.com/cd/E11882_01/java.112/e16548/oraarr.htm#JJDBC28574](http://docs.oracle.com/cd/E11882_01/java.112/e16548/oraarr.htm#JJDBC28574)

例如：

```
SQL> create or replace TYPE tableOneExample AS OBJECT (
  2        somethingOne                 VARCHAR2 (4)
  3       ,somethingTwo        NUMBER (12)
  4  );
  5  /

Type created.

SQL> create or replace TYPE outputOneSQLType IS TABLE OF tableOneExample;
  2  /

Type created.

SQL>
SQL> create or replace PROCEDURE myprocedure (
  2  inputParam                IN       VARCHAR2,
  3  outputOne                 OUT outputOneSQLType)
  4  as
  5  begin
  6  outputOne  := outputOneSQLType(tableOneExample('a', 1), tableOneExample('b', 2));
  7  end;
  8  /

Procedure created. 
```

现在我们定义 SQLDATA 接口：

```
import java.sql.*;

public class TestArr implements SQLData
 {
  private String sql_type;

  public String attrOne;
  public int    attrTwo;

  public TestArr() 
  { 
  }
  public TestArr (String sql_type, String attrOne, int attrTwo)
  {
    this.sql_type = sql_type;
    this.attrOne = attrOne;
    this.attrTwo = attrTwo;
   }

  // define a get method to return the SQL type of the object
  public String getSQLTypeName() throws SQLException
  { 
    return sql_type; 
  } 

  // define the required readSQL() method 
  public void readSQL(SQLInput stream, String typeName)
    throws SQLException
  {
    sql_type = typeName;

    attrOne = stream.readString();
    attrTwo = stream.readInt();
  }  
  // define the required writeSQL() method 
  public void writeSQL(SQLOutput stream)
    throws SQLException
  { 
    stream.writeString(attrOne);
    stream.writeInt(attrTwo);
  }
} 
```

确保流写入/读取的输入和顺序与您的 oracle 类型相同，因为任何不一致都会导致内部表示错误。

然后在主类中，您将其映射如下：

```
CallableStatement stmt = conn.prepareCall("begin myprocedure(?,?); end;");
stmt.setString(1, "foo");
stmt.registerOutParameter(2, java.sql.Types.ARRAY, "OUTPUTONESQLTYPE"); // YOUR ARRAY TYPE (TO MATCH THE API OUTPUT), NOT OBJECT
stmt.execute();
Array arr = stmt.getArray (2);
Map map = conn.getTypeMap();
map.put("TABLEONEEXAMPLE", Class.forName("TestArr")); // YOUR OBJECT TYPE, NOT ARRAY.
Object[] values = (Object[]) arr.getArray();
for (int i=0; i < values.length; i++)
{
  TestArr a = (TestArr)values[i];
  System.out.println("somethingOne: " + a.attrOne);
  System.out.println("somethingTwo: " + a.attrTwo);
} 
```

结果比昂：

```
M:\Documents\Sample Code\1>javac TestArr.java

M:\Documents\Sample Code\1>javac ArrayTest.java
Note: ArrayTest.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.

M:\Documents\Sample Code\SQLComplexArray>java ArrayTest
Opening Oracle connection...done.
somethingOne: a
somethingTwo: 1
somethingOne: b
somethingTwo: 2 
```

# neo4j - spring data neo4j 使用现有数据库

> ID：13801189
> 
> 赞同：0
> 
> 时间：2012-12-10T12:43:20.780
> 
> 标签：neo4j, spring-data, spring-data-neo4j

我正在使用 Spring Data Neo4j，在 Spring 中创建了一个应用程序。我可以在 JUnit 测试用例的帮助下运行我的应用程序。但是每次我运行我的测试用例时，它都会在使用`<neo4j:config storeDirectory="target/neo4j-db"/>`. 这会在 Eclipse 中我的工作区所在的同一位置创建 db。

我已经在我的 ubuntu 中安装了 Neo4j debian 包，默认情况下数据库位于`/var/lib/neo4j/data/graph.db`. 我希望我的应用程序使用这个数据库，而不是在`target/neo4j-db`. 我尝试替换`target/neo4j-db`为`/var/lib/neo4j/data/graph.db`并已授予对数据库的读写权限。但它不起作用。

这个配置有什么问题？我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T15:49:39.437

要针对 Neo4j DB 运行 JUnit 测试，您有 3 个选择

*   使用Neo4j使用的**本地文件夹。**为此，您必须在运行测试之前停止 Neo4j 服务器。如果您正在使用 SpringJUnit4ClassRunner.class 运行测试，并希望确保您的更改在更改后不会恢复，则必须`@Rollback(false)`在所需的方法上添加 a。必须这样做，因为 SpringJUnit4ClassRunner.class 将回滚测试期间对数据库所做的所有更改。
*   使用**REST**方法（并再次`@Rollback(false)`对 SpringJUnit4ClassRunner.class 使用技巧）。要使这与本地方法相反，您必须在运行测试之前启动 Neo4j 服务器。您还必须像这样配置您的 xml 文件：

    `<neo4j:config graphDatabaseService="graphDatabaseService"/> <bean id="graphDatabaseService" class="org.springframework.data.neo4j.rest.SpringRestGraphDatabase"> <constructor-arg value="http://localhost:7474/db/data/" index="0" /> </bean>`

    *   您可以使用的最后一个选项是**无常图形数据库**（这仅供参考，因为我怀疑这是否涵盖了您的情况）。此方法将创建一个临时数据库，仅用于运行测试。测试完成后的所有内容都将被删除。Neo4j 服务器是否正在运行并不重要。您只需在 xml 文件中添加这两行：

    `<neo4j:config graphDatabaseService="graphDatabaseService"/> <bean id="graphDatabaseService" class="org.neo4j.test.ImpermanentGraphDatabase" destroy-method="shutdown"/>`

# database - codeigniter 通过选中的复选框插入多行

> ID：13801191
> 
> 赞同：1
> 
> 时间：2012-12-10T12:43:31.030
> 
> 标签：database, codeigniter, checkbox

如果有人可以提供帮助，我将不胜感激。

```
<input type="checkbox" name="symbols[]" value="1" />
.... and this line repeats 10-15 times with a different value 
```

模型

```
$data = array(
array('symbol_id' => $this->input->post('symbols'))
);
return $this->db->insert_batch('symbols', $data); 
```

现在我的问题是只插入所选复选框的第一个值（在本例中为 1）并忽略其他所有内容而不插入新的其他复选框行（如值 3、5 和 9）。你能给我一些选择吗？

注意：我想要实现的是为每个复选框插入一个新行，这样我就可以加入另一个包含符号图像的表（表示图像 ID 的复选框的值）。如果您有任何其他方法可以解决我的问题，我们非常欢迎。谢谢

编辑：这是 var_dump：

```
array(7)

{

[0] => string(1) "8"

[1] => string(1) "9"

[2] => string(2) "10"

[3] => string(2) "11"

[4] => string(2) "12"

[5] => string(2) "13"

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:26:32.273

数据作为活动值数组发送，因此如果您检查 1、3、5、10、20，在您的`$this->input->post('symbols');`数组中，您将拥有`array(1, 3, 5, 10, 20)`：

```
function InsertSymbols() {
    $data = array();
    foreach($this->input->post('symbols') as $symb) {
        $data[] = array('symbol_id' => $symb);
    }
    return $this->db->insert_batch('symbols', $data);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-04T07:20:21.533

此代码适用于 CI，但您可以在核心中使用它，也可以在 foreach 中使用插入查询。

```
$symbol_arr = $this->db->escape_str($this->input->post('symbols'));
foreach ($symbol_arr as $k=> $val) {
        $DataARR = array( 
               "symbol" => $val,
                "created" => date('Y-m-d h:i:s A'),
        );
    $this->common_model->insert_batch($DataARR);
} 
```

# ruby-on-rails - 如何获取 actionview 表单助手“number_field”输入的自动生成 ID？

> ID：13801192
> 
> 赞同：1
> 
> 时间：2012-12-10T12:43:35.573
> 
> 标签：ruby-on-rails, actionview, actionviewhelper

我正在尝试通过 number_field actionview 表单助手检索为输入生成的 ID。

我正在更新一些现有代码，这些代码具有以下不带标签的输入：

```
<%= item_form.number_field :quantity, :min => 0 %> 
```

当我尝试添加这样的标签时：

`<%= label_tag :quantity, "Foo" %>`

标签标签的“for”属性显示为“数量”，而数字字段的 ID 显示为“order_line_items_attributes_0_quantity”

由于页面上可能有几个这样的字段，我不能有静态 ID。

TIA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:20:41.590

`<%= item_form.label :quantity, "Foo" %>`应该生成具有正确 ID 的“for”属性。

# c - sscanf 是否支持布尔类型？

> ID：13801196
> 
> 赞同：2
> 
> 时间：2012-12-10T12:43:39.283
> 
> 标签：c, scanf

我想从字符串中获取一个布尔值。字符串看起来像这样：

```
char *s = "value=TRUE"; 
```

该值可以是`TRUE`, `FALSE`,`true`或`false`

我想知道是否有格式说明符可以直接从字符串中获取布尔值？我不需要传递一个字符串然后推断出布尔值。

我正在寻找类似的东西

```
bool x;
sscanf(s,"value=%b",&x); 
```

问题是。是否可以使用 sscanf 和格式说明符直接获取布尔值？

如果没有，是否有快速的方法？

**编辑：**

根据响应，没有直接的格式说明符。

这是一种直接获取布尔值的快速方法

```
char b[8];
if ( sscanf(s,"value=%[TtRrUuEe]",b))
   return TRUE;
else
   return FALSE; 
```

我知道上述方法是有限的。怎么改善？

注意：如果值字符串包含垃圾，则默认值为 False

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:46:49.310

最简洁的答案是不”。

您可以获取 GNU C 库的源代码并自己更改它。

铁

```
mysscanf(char *buf, char *format, ...)
{
  // scan the format for %b and change it to %s and 
  // redirect the equivalent paramter-variable
  // to a char * buffer
  // then analyse the buffer and write the boolean value into the original parameter
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:08:13.410

```
char b[8];
if ( sscanf(s,"value=%[TtRrUuEe]",b))
   return TRUE;
else
   return FALSE; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T15:06:20.320

不，您必须将值读取为 **char，然后将您读取的值小写，使用 strcmp() 将其与“true”进行比较。如果匹配，则对您的 bool 变量产生影响。

# php - 使用 codeigniter 从数组中加载更多内容

> ID：13801197
> 
> 赞同：2
> 
> 时间：2012-12-10T12:43:43.143
> 
> 标签：php, javascript, codeigniter, jquery-plugins

我正在使用 CodeIgniter。在我的控制器中，我正在解码 JSON 响应并在加载视图时简单地显示值。我只是从 JSON 数组中显示我的所有内容（**不使用数据库**）。它完全是一个数组，我从中渲染数据。我想在滚动时自动加载内容。

**例子：**

```
 $resultjson = $this->curl->simple_get("http://www.test.com/api/records.php?ak=XXXXXXXX&ts=XXXXXXXX&sig=XXXXXXXX&postano=XXXXXX&count=100"); 
```

自动加载时如何获取 10 条记录？就像[http://pinterest.com/](http://pinterest.com/)机制一样。我怎样才能做到这一点？

有插件吗？CodeIgniter 是否已经有解决方案，以便我可以使用类或库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:07:37.433

您可以使用[jQuery 滚动事件](http://api.jquery.com/scroll/)、[scrollTop()](https://stackoverflow.com/questions/303767/how-do-i-determine-height-and-scrolling-position-of-window-in-jquery)和 $.ajax();

基本上捕捉滚动事件，看看是否`$(window).scrollTop()`高于`<div id="auto_load"></div>`（通过[.offset()](http://api.jquery.com/offset/)），如果是这样的话，运行一次ajax。

`div#auto_load`将放置在加载内容的下方，一旦添加内容就会“跳”下来。

例子：

```
var ajax_once = false;
$(window).bind('scroll', function() {
    if (ajax_once)
        return;

    if ($(this).scrollTop() >= $('div#auto_load').offset().top) {
        ajax_once = true;
        $.ajax({
            /* Url, dataType json etc. */
        }).done(function(data) {
            /* use the data */
            ajax_once = false;
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T13:03:52.467

Codeigniter 是一个 php 框架，这意味着服务器端因此没有内置客户端逻辑。

您可以使用 jQuery 插件来实现无限滚动。这是它的链接：http: [//www.infinite-scroll.com/](http://www.infinite-scroll.com/)

# jquery - 如何选择一个子“a，span”但限制使用 JQuery 的跨度？

> ID：13801198
> 
> 赞同：0
> 
> 时间：2012-12-10T12:43:42.997
> 
> 标签：jquery, jquery-selectors

我有以下内容：

```
a = li.parent().parent().children('a, span'); 
```

我有一个循环设置，它从一个链接开始并沿着链条上升。如果我理解正确，那么上面的代码会选择一个链接（如果它后面有一个跨度）。因此它正确选择：

```
 <a ..>..<span>History</span> .. </a> and
   <a ..>..<span>Overview</span> .. </a> 
```

但是我不希望它选择：

```
 <a ..> ..<span class="toggle"></span> 
```

来自以下 HTML：

```
<ul id="menu" class="arbo with-title">
   <li>
      <a class="title-a">
         <span>Overview</span></a>
      <ul>
         <li>
            <span class="toggle"></span>
            <a class="folder"><span>Background</span></a>
            <ul>
               <li><a data-href="/History" class="document-web"><span>History</span></a></li>
               <li><a data-href="/eatures" class="document-web"><span>Features</span></a></li>
               <li><a data-href="/Design-Goals" class="document-web"><span>Design Goals</span></a></li>
            </ul>
         </li>
         <li> 
```

有没有一种方法可以让这个问题顶部的选择不会注意到切换类的跨度？就像是：

```
a = li.parent().parent().children('a, span(only if the element does not have a class of togggle)'); 
```

仅供参考，这是循环代码：

```
function populateBreadcrumb(a: JQuery, $breadcrumb: JQuery) {
  while (a.length > 0) {
     $breadcrumb.prepend('<li><a >'+a.html()+'</a></li>');
     var li = a.parent();
     a = li.parent().parent().children('a, span');
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:48:07.777

```
a = li.parent().parent().children('a, span:not('.toggle')")); 
```

使用`not`指定类的选择器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:46:41.180

您可以使用`:not`选择器执行此操作：

```
a = li.parent().parent().children("a, span:not(.toggle)"); 
```

这应该可以解决问题。

尽管您可能想要使用`find`而不是`children`获取所有跨度：

```
$("#menu").find("a, span:not(.toggle)"); 
```

jsfiddle：http: [//jsfiddle.net/mGv6N/](http://jsfiddle.net/mGv6N/)

# security - 如何保护 Java EE 6 中的混合内容资源？

> ID：13801204
> 
> 赞同：1
> 
> 时间：2012-12-10T12:44:14.197
> 
> 标签：security, java-ee-6

我正在尝试决定如何保护现代 Web 应用程序。我对 Java EE 6 技术堆栈相对较新，但我做过一些没有利用安全性的宠物项目，所以我正在寻找一些关于使用开箱即用的 Java EE 6 安全性的一般指导。

我了解声明式安全允许您根据分配给尝试访问该资源的用户的角色来保护资源。因此，例如，用户请求特定 URL 的页面，Java EE 服务器会检查用户的凭据以查看他们是否有权访问该页面。这对于只有经过身份验证的用户才能访问的资源非常有意义。很好的例子包括管理页面、用户帐户设置页面、受限内容区域。

因此，只要我将网站划分为安全和不安全区域，就可以正常工作，我没有任何问题。但是，我如何处理我想要根据用户的身份验证级别以不同方式表现的资源以实现声明性安全的情况。

例如，如果用户是未经身份验证的用户，我可能在网站上有一个主页显示一个带有登录提示的视图，但是如果经过身份验证的用户访问同一资源，则应该显示某种带有帐户管理链接的控制面板等而不是登录提示。

这在现代 Java EE 6 应用程序中是如何实现的？声明式安全似乎没有足够的表现力来允许这种情况发生，因为它非常“全有或全无”。我读过一些关于编程安全的文章，但所有指南都在谈论 servlet，在现代 Web 应用程序中，我认为 JSF 将是要走的路，而不是原始 servlet。我想确保当我使用这种取决于用户身份验证状态的混合内容保护 Web 应用程序时，我最终不会在整个 Web 应用程序中发送垃圾邮件安全代码，因为这非常容易出错，而且非常混乱。

鉴于上述要求，您会推荐什么解决方案？我不是在寻找一步一步的，只是一些有用的指示让我朝着正确的方向开始。“这就是你可以使用的东西”和“这就是它如何实现你的目标”都会有所帮助！

最后一件事，我想避免将 Spring 套件加载到这个 web 应用程序上。我喜欢尽可能多地使用 Java EE 6 容器技术，而且我听说在使 Spring 托管 bean 和 Java EE 容器托管 bean 对彼此的上下文可用时存在问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:19:33.080

那么，您应该阅读：Java ee 教程的[安全](http://docs.oracle.com/javaee/6/tutorial/doc/gijrp.html)章节。

简而言之，无论是在 servlet 还是 EJB 中，您都应该：

*   声明涉及的安全角色：`@DeclareRoles("javaee6user")`
*   在您的 servlet 中
    *   对整个 servlet 使用 @ServletSecurity(@HttpConstraint(rolesAllowed = {"javaee6user"})) *（声明式安全）*
    *   在 servlet 的方法中检查`request.isUserInRole("javaee6user")`就像在“旧”servlet 中所做的一样*（程序安全）*
*   在您的 EJB 中
    *   声明整个方法允许的角色（`@RolesAllowed("javaee6user")` *声明性安全）*
    *   注入`@Resource SessionContext ctx;`bean 上下文，并`ctx.isCallerInRole("javaee6user")`在您的方法中调用，就像您在“旧”EJB *（编程安全）中所做的那样*

# c++ - 在 OpencCV 中绘制图形

> ID：13801207
> 
> 赞同：-2
> 
> 时间：2012-12-10T12:44:43.043
> 
> 标签：c++, opencv, graph, plot

> **可能重复：**
> [在 OpenCV 中绘制和绘制图形](https://stackoverflow.com/questions/9250079/drawing-and-plotting-graph-in-opencv)

如何使用 OpenCV 绘制单行图像？我发现了一些像[http://www.shervinemami.info/graphs.html](http://www.shervinemami.info/graphs.html)这样的库，但是有没有使用 opencv2 库的库（cv:: 函数、核心模块等等......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:41:05.697

不。

OpenCV 用于读取和解释图像。

使用绘图库 - 或者更好的是图形绘图库。

你在哪个平台？一些跨平台的在这里：

*   [http://www.gnu.org/software/libxmi/libxmi.html](http://www.gnu.org/software/libxmi/libxmi.html)
*   [http://www.botell.com/gd/](http://www.boutell.com/gd/)
*   [http://www.levien.com/libart/](http://www.levien.com/libart/)

具体对于图表和图形，请参阅此问题：

*   [C++：绘制图形和图表的免费简单方法？](https://stackoverflow.com/questions/765408/c-free-easy-way-to-draw-graphs-and-charts)

# javascript - Three.js : 从同一角度看的几何形状

> ID：13801211
> 
> 赞同：-2
> 
> 时间：2012-12-10T12:45:04.533
> 
> 标签：javascript, geometry, three.js

我想创建许多几何形状的图片。我的问题是我需要所有这些都可以从相同的角度看到 - 即我不需要真正的 3d 场景，而是需要一些彼此靠近的小形状图片。

我怎么能用 Three.js 做到这一点？

我知道如何在屏幕中间的所需视图中绘制每个形状，但我不知道如何在特定 div 内一个接一个地创建多个形状 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:50:14.883

一种方法是使用`renderer.setViewport()`多个相机。这是模式：

```
renderer.setViewport( 0, 0, SCREEN_WIDTH/2, SCREEN_HEIGHT );
renderer.render( scene, camera1 );

renderer.setViewport( SCREEN_WIDTH/2, 0, SCREEN_WIDTH/2, SCREEN_HEIGHT );
renderer.render( scene, camera2 ); 
```

这种方法不需要单独的 div。

[http://mrdoob.github.com/three.js/examples/webgl_camera.html](http://mrdoob.github.com/three.js/examples/webgl_camera.html)

另一种方法是在这个小提琴中使用多个 div：http: [//jsfiddle.net/CLEYk/](http://jsfiddle.net/CLEYk/)。

三.js r.53

# c++ - 无法创建具有指定大小的向量

> ID：13801214
> 
> 赞同：0
> 
> 时间：2012-12-10T12:45:14.397
> 
> 标签：c++

我正在尝试创建一个特定大小的矢量，为 255（最大）。它对我不起作用，就像我在互联网上的示例中看到的那样......

我正在使用 Microsoft Visual C++ 2012 ...

我有当前的代码：

```
#include <iostream>
#include <string>
#include <vector>
#include <stdlib.h>

using namespace std;

const int MAX = 255;

class test
{
vector <string> Name(MAX);
};

int main()
{
system("PAUSE");
} 
```

它给了我2个错误：

`Error 1 error C2061: syntax error : identifier 'MAX'`

`2 IntelliSense: variable "MAX" is not a type name`

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T12:47:50.003

这不是类声明的有效语法。尝试：

```
class test
{
   vector <string> Name;
   test() : Name(MAX) {}
}; 
```

您可以在创建变量时编写`vector <string> Name(MAX);`（在您的情况下，您正在声明一个成员）。例如：

```
int main()
{
   vector <string> Name(MAX);
} 
```

将是完全有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:48:33.287

您不能像这样在类声明中初始化数据成员。使用类的构造函数中的成员初始化列表来初始化`vector<string> Name`.

```
test::test
:Name(MAX)
{
  //
} 
```

你的主要是这样的。

```
test t1 ; 
```

它将自动调用构造函数并`t1`创建所有字段，包括`vector<string> Name`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T12:48:49.747

您不能将参数传递给`std::vector`类声明中的构造函数。你应该把它放在你的类的构造函数中，就像这样，它通过一个初始化列表来利用它：

```
class test
{
    std::vector<std::string> Name;

    public:

    test():
        Name(MAX)
    {
    }
}; 
```

# php - 在 Sphinx 0.9.9 中搜索多个 < 或 > 失败

> ID：13801220
> 
> 赞同：0
> 
> 时间：2012-12-10T12:45:40.540
> 
> 标签：php, mysql, search-engine, sphinx

**Sphinx 0.9.9**已配置为与**MySql**一起使用。
我最近注意到 Sphinx 不适用于包含任何多次出现**<**或**>**字符的搜索词。

工作 PHP 代码：

```
// Initialize SphinxClient class object
$cl = new SphinxClient ();
// Set the server and port
$cl->SetServer ( "127.0.0.1", 9313 );

// Initialize prefixed query
$query_prefix = '';
// Set the limit
$cl->SetLimits((int)$offset, (int)$count);
// Set the match mode
$cl->setMatchMode(SPH_MATCH_EXTENDED);
// Set the ranking mode
$cl->setRankingMode(SPH_RANK_WORDCOUNT);
// Set sorting
$cl->SetSortMode(SPH_SORT_EXTENDED,'@relevance DESC, updated_date DESC' );

$query_main = '@(name,description)';

// Initialize the search index
$search_index = 'index_common';

$search_text = $cl->EscapeString($search_text);

// Run the search query
$resp = $cl->Query($query_prefix . '('. $query_main . '"^' . $search_text . '$" | "' . 
    $search_text . '" | (' . $search_text . ') | "' 
    . $search_text . '"/1 | (' . $search_text_wild . ')) ' ,$search_index); 
```

**如果我输入一个不带引号的“ >>** ”这样的搜索词，它会生成以下查询：

```
(@(name,description)"^>>$" | ">>" | (>>) | ">>"/1 | (*>>*)) 
```

并且不会给出任何响应，例如在系统中找不到搜索词时。这发生在**<**和**>**的多次出现而不是单次出现。

这是**Sphinx**中的一个已知问题还是有办法克服（使 Sphinx 在这些特殊情况下正常工作）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:48:25.383

<< 用作严格的顺序运算符 - 我认为还有非官方的 >> 语法。

所以这可能会导致问题。您可以尝试转义它们，我猜 EscapeString 不会这样做。

但请记住，除非 < 和 > 在您的字符集表中，否则它们将永远无法匹配。

（另外，当你说你没有得到回应时，一定要检查`$cl->getLastError()`！

# javascript - Javascript重置数组

> ID：13801221
> 
> 赞同：1
> 
> 时间：2012-12-10T12:45:44.163
> 
> 标签：javascript, jquery, arrays

当我尝试重置数组时，我遇到了一些非常奇怪的行为；例如：

```
data.length=0; 
```

其中数据是一个数组。我将尝试仅在此处包含相关代码，但基本上我正在做的是在我的程序的每次迭代中，我用更新的值填充数组，然后在另一个函数中使用该数组。但是当我重置数组时，该函数似乎在第一次迭代时获得了值，但之后没有。

但是，当我不重置数组时，函数会获取值，但也会获取旧值。我不想要这个，因为我只想要新的更新值。这是一个代码片段：

```
 var buffer = [['1',[0]],['2',[0]],['3',[0]],['4',[0]]];
      var dataset = [];

         ws.onmessage = function(evt){ 
         dataset.length=0;
         var distances = JSON.parse(evt.data);

         console.log(distances);

            for(var i=0; i<buffer.length; i++) {
                if(buffer[i][0] == distances.miles) {
                    buffer[i][1][0]++;
                    }
                //console.log(buffer);

                dataset.push(buffer[i][1][0]);
                draw();
                //console.log(dataset); 

            }

    } 
```

该函数使用数据集数组重绘图表。

我试图在这里保持简单，但完整的功能在[这里](http://jsfiddle.net/2NXF2/58/)。

我真的不知道是什么导致了这种意外行为。

编辑：

console.log(dataset) 显示新的更新值，但不知何故 dataset.length=0; 正在阻止 draw() 函数使用更新的数组。由于无需重置数组，draw() 函数就可以使用数组。

编辑：

我试图不重置数组，而是获取最后 4 个元素并将它们放入一个新数组中，然后将它们发送到 draw()，但仍然是相同的奇怪行为：

```
 x = dataset.slice(-4);
            console.log(x);
            draw(); 
```

但是，如果我不这样做或不清除数组，那么 draw() 会呈现一个“错误”的图表。我看不出有什么问题。

不知何故，问题似乎在于数组的重置，因此这意味着 draw() 函数似乎在第一次迭代时只被调用一次。

请，请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:50:44.730

你根本不需要设置`length`。要清除所有值的列表，只需将其设置为空列表：

```
dataset = []; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:46:56.610

看看你的代码，我不确定，但你为什么有`dataset`？您永远不会从中读取任何内容，并且您说每次都想通过数组清除它。

你的意思是做类似的事情：

```
for(var i=0; i<buffer.length; i++) {
    if(buffer[i][0] == distances.miles) {
        buffer[i][1][0]++;
    }
    dataset.push(buffer[i][1][0]);
}
draw(dataset); // draw outside the loop, using dataset. 
```

# objective-c - 将具有属性的对象数组保存到 plist

> ID：13801222
> 
> 赞同：6
> 
> 时间：2012-12-10T12:45:44.463
> 
> 标签：objective-c, arrays, plist

我有一个可变数组，其中包含不同的对象，例如字符串、 UIImage 等。它们的排序如下：

例子：

```
BugData *bug1 = [[BugData alloc]initWithTitle:@"Spider" rank:@"123" thumbImage:[UIImage imageNamed:@"1.jpeg"]];
...
...
NSMutableArray *bugs = [NSMutableArray arrayWithObjects:bug1,bug2,bug3,bug4, nil]; 
```

所以基本上它是一个包含具有不同属性的对象的数组。

我尝试使用下一个代码将单个字符串保存到文件中，并且工作正常，但是当我尝试使用对象保存数组时，我得到一个空的 plist 文件。

```
NSString *docsDir = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
NSString * path = [docsDir stringByAppendingPathComponent:@"data.plist"];
NSLog(@"%@",bugs); //Making sure the array is full
[bugs writeToFile:path atomically:YES]; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:57:03.213

当您将字符串或任何原始数据写入 plist 时，可以直接保存。但是当你试图保存一个对象时，你需要使用 NSCoding。

您必须在您的 BugData 类中实现两种方法`encodeWithCoder:`来写入和读取它。`initWithCoder:`

编辑：

像这样：根据您的要求将 Float 更改为 Integer 或 String 或 Array 并为它们提供合适的密钥。

```
- (void)encodeWithCoder:(NSCoder *)coder {
    [coder encodeObject:_title forKey:@"title"];
    [coder encodeFloat:_rating forKey:@"rating"];
    NSData *image = UIImagePNGRepresentation(_thumbImage);
    [coder encodeObject:(image) forKey:@"thumbImage"];
}

- (id)initWithCoder:(NSCoder *)coder {
    _title = [coder decodeObjectForKey:@"title"];
    _rating = [coder decodeFloatForKey:@"rating"];
    NSData *image = [coder decodeObjectForKey:@"thumbImage"];
    _thumbImage = [UIImage imageWithData:image];
    return self;
} 
```

即使[这](https://stackoverflow.com/questions/6569207/write-custom-object-to-plist-in-cocoa)会对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:06:00.903

`NSCoding`在您的班级中实施`BugData`如下

```
- (void)encodeWithCoder:(NSCoder *)coder {
    [coder encodeFloat:title forKey:@"title"];
    [coder encodeFloat:rank forKey:@"rank"];
    [coder encodeObject:UIImagePNGRepresentation(thumbImage) forKey:@"thumbImageData"];
}

- (id)initWithCoder:(NSCoder *)coder {
    title = [coder decodeFloatForKey:@"title"];
    rank = [coder decodeFloatForKey:@"rank"];
    NSData *imgData = [coder decodeObjectForKey:@"thumbImageData"];
    thumbImage = [UIImage imageWithData:imgData ];
    return self;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T12:51:47.923

BugData 必须实现 NSCoding 协议。你需要这个方法来编码数据：

```
- (void) encodeWithCoder: (NSCoder*) encoder; 
```

您应该在哪里提供代表类的 NSData 对象（使用解码器对其进行解码）。
要阅读 plist，您需要实现此方法：

```
-(id) initWithCoder: (NSCoder*) decoder; 
```

从解码器读取数据并返回 BugData 对象的位置。

# html - 垂直居中后滚动不正确

> ID：13801224
> 
> 赞同：0
> 
> 时间：2012-12-10T12:45:48.770
> 
> 标签：html, css

所以我有一个问题，在设置位置后：`absolute; top: 50%; margin-top: -310px`我的主要内容。问题是当我最小化浏览器窗口并出现垂直滚动时，布局的顶部被隐藏了。

这就是我的意思：http: [//jsfiddle.net/95Uzt/15/](http://jsfiddle.net/95Uzt/15/)。您可以看到菜单和联系表格，但表格上方的标题不被浏览器可见/覆盖。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:26:29.643

我认为您正在尝试用一段代码处理两种情况，但这不起作用。您将需要使用某种条件代码来处理这两种情况。

你的两种情况是：

*   对于超过 620 像素的视口，您需要将内容居中
*   对于小于 620 像素的视口，您需要内容顶部对齐。

对于支持它的更现代的浏览器，您可以考虑使用 CSS：

```
@media screen and (max-height: 620px) {  
  .content
  {
    top: 0px;
    margin-top: 0px;
  }
} 
```

如果您需要更广泛的浏览器支持，我认为您需要使用 javascript。

# javascript - 来自其他输入的 Javascript 调用值

> ID：13801225
> 
> 赞同：0
> 
> 时间：2012-12-10T12:45:48.310
> 
> 标签：javascript, html

我有以下代码：

```
<form>
    <input type="text" id="field1" name="field1" value="first value" />
    <input type="text" id="field2" onkeyup="showRSS(this.value, this.alt)" value="" alt="test">
</form> 
```

在`showRSS()`onkeyup 函数中，我需要调用第一个输入字段 ( `id="field1"`) 中的值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:51:15.740

将其 ID 用于`document.getElementById()`：

因此，如果您想将其作为第三个参数传递给`showRSS()`：

```
 <input type="text" id="field2" onkeyup="showRSS(this.value, this.alt, document.getElementById('field1').value)" value="" alt="test"> 
```

或者，如果您想从内部获取它`showRss()`：

```
function showRSS( ... )
{
    var field1 = document.getElementById('field1').value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:12:39.210

使用下面的代码来做到这一点......

```
<form>
    <input type="text" id="field1" name="field1" value="first value" />
    <input type="text" id="field2" onkeyup="showRSS(this.value, this.alt, this.parentNode.getElementsByName('field1')[0].value)" value="" alt="test">
</form> 
```

如果你在标签外使用`field1`as ，它不会产生任何问题......`name``form`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T14:00:53.453

如果你想获取特定文本框的值，你可以在函数中迭代它们并根据它们的名称获取你想要的值。首先，在第二个文本框中添加一个名称，然后有这样的代码：

```
function showRSS() {
    var oForm = document.forms[0]; //assuming only one form
    var desiredInputNames = { "field1": "", "field2": "" }; //names of elements to read
    for (var i = 0; i < oForm.elements.length; i++) {
        var element = oForm.elements[i];
        if (desiredInputNames[element.name]) {
            var value = element.value;
            //handle the current value
        }
    }
} 
```

（使用关联数组而不是普通数组进行更好的搜索）

# php - php如何升级你的上传大小

> ID：13801229
> 
> 赞同：-3
> 
> 时间：2012-12-10T12:45:55.003
> 
> 标签：php, mysql, upload, size

我已经构建了 CMS，但是当我上传大于 1.000kB 的文件时，我收到此错误：

> 警告：mysql_query() [function.mysql-query]: MySQL server has gone away in C:\Users\Stefan\Desktop\UsbWebserver\root\Windvogel\bestand_toevoegen.php on line 40 警告：mysql_query() [function.mysql-查询]：在第 40 行读取 C:\Users\Stefan\Desktop\UsbWebserver\root\Windvogel\bestand_toevoegen.php 中的结果集标题时出错 错误！Niet gelukt het bestand te uploaden

有人知道我如何上传更大的文件吗？诸如升级我的上传大小之类的东西。我想将更大的文件上传到我的数据库的 blob（mediumblob）文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:50:05.643

在您的 php.ini 中更改以下内容

```
 upload_max_filesize = 10M;
  post_max_size = 20M;
  memory_limit = 20M; 
```

如果问题出在 php.ini，这就是它的处理方式。但是，我认为您需要更改问题的标题，问题似乎是关于 mysql 问题，而不是 php 问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:50:17.850

你混淆了两个可能的问题。第一个是您可以在 php.ini 或 apache conf 中更改站点的帖子或上传大小，下一个是 mysql 中的包大小（结果大小）。此设置可在 my.cnf 中更改

一切顺利。

ps：也找出真正的问题是什么，我们应该知道您对上传的数据或发布的数据做了什么。

# c - 寻求可以在Delphi和C中处理整个文件加密/解密的单个文件加密实现

> ID：13801231
> 
> 赞同：11
> 
> 时间：2012-12-10T01:17:59.657
> 
> 标签：c, delphi, encryption, aes, microcontroller

[更新] 我为此提供奖金。坦率地说，我不在乎使用哪种加密方法。最好是一些简单的东西，比如 XTEA、RC4、BlowFish ......但你选择了。

我希望尽我所能，最好只是将文件放入我的项目并构建。

理想情况下，您应该已经使用该代码在 Delphi 和 C 中加密/解密文件（我想在 Atmel UC3 微处理器（用 C 编码）和 Windows PC（用 Delphi 编码）之间交换文件 en-and -de-crypt 双向）。

我**非常**喜欢单个 .PAS 单元和单个 .C/.H 文件。我不想使用支持数十种加密算法的 DLL 或库，只有一种（我当然不想要任何带有安装程序的东西）。

我希望我在这里听起来不要太挑剔，但是我已经在谷歌上搜索并尝试了一个多星期的代码，但仍然找不到两个匹配的实现。我怀疑只有已经这样做的人才能帮助我......

提前致谢。

* * *

[作为我上](https://security.stackexchange.com/questions/23716/seeking-lightweight-encryption-shareable-between-delphi-c)一篇文章的后续，我仍在寻找一些非常简单的代码，说明为什么我可以 - 以最小的努力 - 对文件进行加密并在 PC 上的 Delphi 和 Atmel UC3 u 处理器上的 C 之间交换它.

这在理论上听起来很简单，但在实践中却是一场噩梦。有*很多*可能的候选人，我花了几天时间谷歌搜索并尝试他们 - 无济于事。

有些是很有趣的库，支持许多加密算法，我想要一些轻量级的东西（尤其是在 C/u 处理器端）。

有些看起来不错，但一组源只提供块操作，其他字符串（我更喜欢整个文件加密/解密）。

大多数似乎都记录得很差，参数名称毫无意义，也没有调用函数的示例代码。

在过去的周末（再加上几天），我已经完成了大量的 XTEA、XXTEA 和 BlowFish 实现，但是虽然我可以加密，但我无法逆转这个过程。

现在我正在研究 AES-256。有谁知道 C 中的实现是单个 AES.C 文件吗？（当然还有 AES.H）

坦率地说，我会采取任何可以在 Delphi 和 C 之间进行整个文件加密/解密的事情，但是除非有人自己真正做到了这一点，否则我希望只听到“任何符合标准的实现都应该这样做”——这很好理论，但只是不适合我:-(

那里有任何简单的 C AES-256 吗？我有一些看起来很合理的 Delphi 代码，但直到我一起尝试后才能确定。

提前致谢 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:43:31.683

我建议在辅助微控制器（例如 Atmel SAM7X）上使用[.NET Micro Framework](http://en.wikipedia.org/wiki/.NET_Micro_Framework)作为加密协处理器。您可以在[Netduino](http://netduino.com/netduino/)上进行测试，价格约为 35 美元/30 英镑。该框架在其命名空间下包含一个 AES 实现`System.Security.Cryptography`，以及可能对您有用的各种其他加密函数。这样做的好处是您获得了经过全面测试和工作的实现，并通过类型安全代码提高了安全性。

如果需要更高的吞吐量，您可以使用 SPI 或 I2C 在两个微控制器之间进行通信，或者通过多条 I/O 线并行地对您自己的数据传输协议进行位转换。

我使用 Arduino 和 Netduino（使用 Netduino 对硬件 BitTorrent 设备的数据块进行哈希处理）完全做到了这一点，并使用通过 SPI 和中断机制在设备之间发送的各种命令实现了一个基本的异步系统。

*   Arduino 是 SPI 主机，Netduino 是 SPI 从机。
*   Netduino 上的一个 GPIO 引脚设置为输出，并连接到[Arduino 上另一个启用中断的 GPIO 引脚，该引脚](http://playground.arduino.cc/Code/Interrupts)设置为输入。这是中断引脚。
*   Arduino`0xF1`作为“hello”初始化消息发送。
*   Netduino`0xF2`作为确认发回。
*   当 Arduino 想要散列一个块时，它会发送`0x48`(ASCII 'H') 后跟数据。当它完成发送数据时，它设置为`CS`低。它必须发送整个字节；`CS`当接收到的位数不能被 8 整除时设置为低会导致错误。
*   Netduino 接收数据，然后将`0x68`接收到的字节数作为 2 字节无符号整数发回（ASCII 'h'）。如果发生错误，它会发回`0x21`(ASCII '!')。
*   如果成功，Netduino 会计算哈希值，然后将中断引脚设置为高电平。在计算期间，Arduino 可以在等待期间自由地继续其工作。
*   Arduino 发送`0x52`（ASCII 'R'）来请求结果。
*   Netduino 将中断引脚设置为低电平，然后发`0x72`回（ASCII 'r'）和原始哈希数据。

由于 Arduino 可以通过 GPIO 引脚处理中断，因此我可以使处理完全异步。Arduino 端的一个变量跟踪我们当前是否正在等待协处理器完成其任务，因此我们不会尝试在它仍在处理旧块时向它发送新块。

您可以轻松地调整此方案来计算 AES 块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T03:28:05.450

Ilya Levin[的 AES-256 小型 C 库。](http://www.literatecode.com/aes256)实现简短，无汇编，使用简单。不过，不确定它如何在您当前的微型 CPU 上工作。

[编辑]
你提到有一些 delphi 实现，但如果某些东西不能一起工作，试试[this](http://www.codeforge.com/article/162622)或[this](http://www.codeforge.com/article/206588)。
我还发现了使用 Ilya 库的 arduino（基于 avr）模块 - 所以它也应该在你的微型 CPU 上工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T04:51:07.383

你能从Delphi编译C代码吗（你可以从C++ Builder编译Delphi代码，不确定VV）。或者也许使用[免费的 Borland 命令行 C++ 编译器](http://edn.embarcadero.com/article/20633)，甚至是另一个 C 编译器。

这个想法是在您的 Windows 应用程序中使用与在微处理器上使用相同的 C 代码。这样您可以合理地确定代码将在两个方向上工作。

* * *

[更新] 见

[http://www.drbob42.com/examines/examin92.htm](http://www.drbob42.com/examines/examin92.htm)
[http://www.hflib.gov.cn/e_book/e_book_file/bcb/ch06.htm](http://www.hflib.gov.cn/e_book/e_book_file/bcb/ch06.htm) （在Delphi中使用C++代码）
[http://edn.embarcadero .com/article/10156#H11](http://edn.embarcadero.com/article/10156#H11)

看起来你需要使用一个 DLL，但如果你不想分发它，你可以静态链接它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T14:09:25.077

看起来更容易获得参考 AES 实现（与块一起使用），并添加一些代码来处理 CBC（或 CTR 加密）。您只需添加约 30-50 行代码，如下所示（对于 CBC）：

```
aes_expand_key();

first_block = iv;

for (i = 0; i < filesize / 16; i++)
{
  data_block = read(file, 16);
  data_block = (data_block ^ iv);
  iv = encrypt_block(data_block);
  write(outputfile, iv);  
}

// if filesize % 16 != 0, then you also need to add some padding and encrypt the last block 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-19T04:59:35.990

这是RC4代码。它非常轻巧。

C 已经在生产系统中使用了五年。

我添加了经过轻微测试的 Delphi 代码。`unsigned char`Pascal 是一个带有go to的逐行端口`Byte`。我只在打开了 Delphi 选项的 Free Pascal 中运行 Pascal，而不是 Delphi 本身。C 和 Pascal 都有简单的文件处理器。

对密文进行加扰会返回原始的明文。

迄今为止没有报告任何错误。希望这能解决您的问题。

rc4.h

```
#ifndef RC4_H
#define RC4_H

/*
 * rc4.h -- Declarations for a simple rc4 encryption/decryption implementation.
 * The code was inspired by libtomcrypt.  See www.libtomcrypt.org.
 */
typedef struct TRC4State_s {
  int x, y;
  unsigned char buf[256];
} TRC4State;

/* rc4.c */
void init_rc4(TRC4State *state);
void setup_rc4(TRC4State *state, char *key, int keylen);
unsigned endecrypt_rc4(unsigned char *buf, unsigned len, TRC4State *state);

#endif 
```

rc4.c

```
void init_rc4(TRC4State *state)
{
  int x;
  state->x = state->y = 0;
  for (x = 0; x < 256; x++)
    state->buf[x] = x;
}

void setup_rc4(TRC4State *state, char *key, int keylen)
{
  unsigned tmp;
  int x, y;

  // use only first 256 characters of key 
  if (keylen > 256) 
    keylen = 256;

  for (x = y = 0; x < 256; x++) {
    y = (y + state->buf[x] + key[x % keylen]) & 255;
    tmp = state->buf[x]; 
    state->buf[x] = state->buf[y]; 
    state->buf[y] = tmp;
  }
  state->x = 255;
  state->y = y;
}

unsigned endecrypt_rc4(unsigned char *buf, unsigned len, TRC4State *state)
{
  int x, y; 
  unsigned char *s, tmp;
  unsigned n;

  x = state->x;
  y = state->y;
  s = state->buf;
  n = len;
  while (n--) {
    x = (x + 1) & 255;
    y = (y + s[x]) & 255;
    tmp = s[x]; s[x] = s[y]; s[y] = tmp;
    tmp = (s[x] + s[y]) & 255;
    *buf++ ^= s[tmp];
  }
  state->x = x;
  state->y = y;
  return len;
}

int endecrypt_file(FILE *f_in, FILE *f_out, char *key)
{
  TRC4State state[1];
  unsigned char buf[4096];
  size_t n_read, n_written;

  init_rc4(state);
  setup_rc4(state, key, strlen(key));
  do {
    n_read = fread(buf, 1, sizeof buf, f_in);
    endecrypt_rc4(buf, n_read, state);
    n_written = fwrite(buf, 1, n_read, f_out);
  } while (n_read == sizeof buf && n_written == n_read);
  return (n_written == n_read) ? 0 : 1;
}

int endecrypt_file_at(char *f_in_name, char *f_out_name, char *key)
{
  int rtn;

  FILE *f_in = fopen(f_in_name, "rb");
  if (!f_in) {
    return 1;
  }
  FILE *f_out = fopen(f_out_name, "wb");
  if (!f_out) {
    close(f_in);
    return 2;
  }
  rtn = endecrypt_file(f_in, f_out, key);
  fclose(f_in);
  fclose(f_out);
  return rtn;
}

#ifdef TEST

// Simple test.
int main(void)
{
  char *key = "This is the key!";

  endecrypt_file_at("rc4.pas", "rc4-scrambled.c", key);
  endecrypt_file_at("rc4-scrambled.c", "rc4-unscrambled.c", key);
  return 0;
}
#endif 
```

这是经过轻微测试的帕斯卡。我可以对 C 中的源代码进行加扰，并使用 Pascal 实现对其进行解扰。

```
type
  RC4State = record
    x, y : Integer;
    buf : array[0..255] of Byte;
  end;

  KeyString = String[255];

procedure initRC4(var state : RC4State);
var
  x : Integer;
begin
  state.x := 0;
  state.y := 0;
  for x := 0 to 255 do
    state.buf[x] := Byte(x);
end;

procedure setupRC4(var state : RC4State; var key : KeyString);
var
  tmp : Byte;
  x, y : Integer;
begin
  y := 0;
  for x := 0 to 255 do begin
    y := (y + state.buf[x] + Integer(key[1 + x mod Length(key)])) and 255;
    tmp := state.buf[x];
    state.buf[x] := state.buf[y];
    state.buf[y] := tmp;
  end;
  state.x := 255;
  state.y := y;
end;

procedure endecryptRC4(var buf : array of Byte; len : Integer; var state : RC4State);
var
  x, y, i : Integer;
  tmp : Byte;
begin
  x := state.x;
  y := state.y;
  for i := 0 to len - 1 do begin
    x := (x + 1) and 255;
    y := (y + state.buf[x]) and 255;
    tmp := state.buf[x];
    state.buf[x] := state.buf[y];
    state.buf[y] := tmp;
    tmp := (state.buf[x] + state.buf[y]) and 255;
    buf[i] := buf[i] xor state.buf[tmp]
  end;
  state.x := x;
  state.y := y;
end;

procedure endecryptFile(var fIn, fOut : File; key : KeyString);
var
  nRead, nWritten : Longword;
  buf : array[0..4095] of Byte;
  state : RC4State;
begin
  initRC4(state);
  setupRC4(state, key);
  repeat
    BlockRead(fIN, buf, sizeof(buf), nRead);
    endecryptRC4(buf, nRead, state);
    BlockWrite(fOut, buf, nRead, nWritten);
  until (nRead <> sizeof(buf)) or (nRead <> nWritten);
end;

procedure endecryptFileAt(fInName, fOutName, key : String);
var
  fIn, fOut : File;
begin
  Assign(fIn, fInName);
  Assign(fOut, fOutName);
  Reset(fIn, 1);
  Rewrite(fOut, 1);
  endecryptFile(fIn, fOut, key);
  Close(fIn);
  Close(fOut);
end;

{$IFDEF TEST}
// Very small test.
const
  key = 'This is the key!';
begin
  endecryptFileAt('rc4.pas', 'rc4-scrambled.pas', key);
  endecryptFileAt('rc4-scrambled.pas', 'rc4-unscrambled.pas', key);
end.
{$ENDIF} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-21T01:26:55.530

假设加密强度不是问题，如满足组织的中国墙要求，非常简单的“锯齿”加密方案将 (i++ % modulo 256) 添加到 fgetc()，对于每个字节，从开头开始文件，可能工作得很好。

将 i 声明为 UCHAR 将消除模数要求，因为单字节整数只能在 0-255 范围内循环。

代码太简单了，不值得发。一点点想象力，你就会有一些装饰，可以大大增加这个密码的强度。这种密码的主要漏洞是大块相同的字符。纠正这一点是开始提高其实力的好地方。

此密码适用于所有可能的文件类型，如果您已经对文件进行了 7Zip 压缩，则特别有效。

性能是惊人的。你甚至不知道代码在那里。完全 I/O 绑定。

# twitter-bootstrap - Bootstrap中表格行的下拉菜单

> ID：13801233
> 
> 赞同：3
> 
> 时间：2012-12-10T12:46:04.027
> 
> 标签：twitter-bootstrap, drop-down-menu, html-table, row, jasny-bootstrap

[我正在尝试使用http://www.jasny.net/bootstrap/components/#rowlink](http://www.jasny.net/bootstrap/components/#rowlink)找到的 Jasny 扩展从表格行中获取下拉菜单。不幸的是，我似乎无法让它显示下拉菜单。我有一个到目前为止我所做的例子：

```
<table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered">
<thead>
    <tr>
        <th>
            Heading
        </th>
        <th>
            Heading
        </th>
    </tr>
</thead>
<tbody data-provides="rowlink">
    <tr class="rowlink">
        <td>
            <div class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                    Click For Dropdown Menu
                </a>
                <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    <li>
                        <a tabindex="-1" href="#">
                            Action
                        </a>
                    </li>
                    <li>
                        <a tabindex="-1" href="#">
                            Another action
                        </a>
                    </li>
                </ul>
            </div>
        </td>
        <td>
            Click For Dropdown Menu
        </td>    
    </tr>
    <tr>
        <td>
            Cell
        </td>
        <td>
            Cell
        </td>    
    </tr>         
</tbody>
</table>​ 
```

单击行将跟随 href 链接，而不是显示下拉菜单。我可以让 rowlink 扩展作为链接工作或调用模式窗口。我也可以从单个单元格（没有 jasny 扩展名）获得下拉列表，但希望它可以在整行中工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-02T07:16:36.440

**引导程序 3.x**

默认情况下，表格单元格内的 Bootstrap 下拉菜单不会正确显示（它们会显示在页面底部）。要解决此问题，您需要将容器的类设置为下拉菜单。对于表格单元格，这看起来像这样：

```
<td class="dropdown"> 
```

演示：http: [//jsfiddle.net/sytelus/kzxes29r/](http://jsfiddle.net/sytelus/kzxes29r/)

PS：如果您不想更改表格单元格的样式，您也可以在单元格内创建一个 div 并将其类设置为“下拉”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-09T11:21:13.080

放

```
<td style="overflow:visible"> 
```

有用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-10T23:11:13.880

不幸的是，rowlink 仅适用于 href 并且不传播 js 事件。所以它不能用于下拉菜单。

仔细查看下拉代码，表明在初始化下拉菜单后，单击下拉切换并没有比切换“打开”类更多。我们可以很容易地模仿它。现在我们只需要确保下拉菜单是在加载时初始化的，而不是在点击和 presto 时:)

请注意，我只使用 rowlink css（不是 js）作为指针和链接样式。

```
<html>
<head>
    <link href="css/bootstrap.css" rel="stylesheet">
</head>
<body>
<table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered">
<tbody>
    <tr class="rowlink">
        <td>
            <div class="dropdown">
                <a class="dropdown-toggle rowlink" data-toggle="dropdown" href="#">
                    Click For Dropdown Menu
                </a>
                <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    <li>
                        <a tabindex="-1" href="#">
                            Action
                        </a>
                    </li>
                    <li>
                        <a tabindex="-1" href="#">
                            Another action
                        </a>
                    </li>
                </ul>
            </div>
        </td>
        <td>
            Click For Dropdown Menu
        </td>    
    </tr>
    <tr><td>Cell</td><td>Cell</td></tr>         
</tbody>
</table>​

<script src="js/jquery.js"></script>
<script src="js/bootstrap-dropdown.js"></script>

<script>
    $(function() {
        $(this).find('.dropdown-toggle').dropdown();

        $('.rowlink').on('click', function(e) {
            $(this).find('.dropdown').toggleClass('open');
            e.stopPropagation();
        });
    });
</script>

</body>
</html> 
```

*PS这个jsfiddle不断让我的浏览器崩溃：s*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-31T16:19:27.707

你可以试试这个::

```
 <!DOCTYPE html>
<html>
<head>
<style>
body{font-family:arial;}
table{font-size:80%;background:black}
a{color:black;text-decoration:none;font:bold}
a:hover{color:#606060}
td.menu{background:lightblue}
table.menu
{
font-size:100%;
position:absolute;
visibility:hidden;
}
</style>
<script>
function showmenu(elmnt)
{
document.getElementById(elmnt).style.visibility="visible";
}
function hidemenu(elmnt)
{
document.getElementById(elmnt).style.visibility="hidden";
}
</script>
</head>

<body>
<h3>Drop down menu</h3>
<table width="100%">
 <tr bgcolor="#FF8080">
  <td onmouseover="showmenu('tutorials')" onmouseout="hidemenu('tutorials')">
   <a href="/default.asp">Tutorials</a><br>
   <table class="menu" id="tutorials" width="120">
   <tr><td class="menu"><a href="/html/default.asp">HTML</a></td></tr>
   <tr><td class="menu"><a href="/css/default.asp">CSS</a></td></tr>
   <tr><td class="menu"><a href="/xml/default.asp">XML</a></td></tr>
   <tr><td class="menu"><a href="/xsl/default.asp">XSL</a></td></tr>
   </table>
  </td>
  <td onmouseover="showmenu('scripting')" onmouseout="hidemenu('scripting')">
   <a href="/default.asp">Scripting</a><br>
   <table class="menu" id="scripting" width="120">
   <tr><td class="menu"><a href="/js/default.asp">JavaScript</a></td></tr>
   <tr><td class="menu"><a href="/vbscript/default.asp">VBScript</a></td></tr>
   <tr><td class="menu"><a href="default.asp">DHTML</a></td></tr>
   <tr><td class="menu"><a href="/asp/default.asp">ASP</a></td></tr>
   <tr><td class="menu"><a href="/ado/default.asp">ADO</a></td></tr>
   </table>
  </td>
  <td onmouseover="showmenu('validation')" onmouseout="hidemenu('validation')">
   <a href="/site/site_validate.asp">Validation</a><br>
   <table class="menu" id="validation" width="120">
   <tr><td class="menu"><a href="/web/web_validate.asp">Validate HTML</a></td></tr>
   <tr><td class="menu"><a href="/web/web_validate.asp">Validate XHTML</a></td></tr>
   <tr><td class="menu"><a href="/web/web_validate.asp">Validate CSS</a></td></tr>
   <tr><td class="menu"><a href="/web/web_validate.asp">Validate XML</a></td></tr>
   <tr><td class="menu"><a href="/web/web_validate.asp">Validate WML</a></td></tr>
   </table>
  </td>
 </tr>
</table>
<p>Mouse over these options to see the drop down menus</p>
</body>

</html> 
```

# javascript - if 语句在图片旋转中不起作用

> ID：13801234
> 
> 赞同：0
> 
> 时间：2012-12-10T12:46:14.043
> 
> 标签：javascript

10 张图片后，计数器不会重置为 1。为什么？它计数到无穷无尽。我不明白为什么它不起作用。计数器达到 11 后，他必须设置为 1。请帮助我。我找不到解决方案。

```
 <head>

            <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>

            <script>

            $(document).ready(function(){

                    var timer,

                            counter = 1,

                            changepic = function(pic){

                                    var src = pic.attr("src");

                                    counter = counter+1;

                                    if (counter == 11){ ## here is the prblem
                                    counter = 1;
                                    }

                                    pic.attr("src", src.substring(0,src.lastIndexOf('.')-1)+counter+".jpg")

                            };

                    $('img').hover(function(){

                            var $this = $(this);

                            timer = setInterval(function(){changepic($this);}, 1000);

                    }, function(){clearInterval(timer);});

            });

            </script>

    </head>

    <body>

            <table style="float&#58;left;">

            <tr><tr><td><img src="testbilder/test.1.jpg"><br>Text</td></tr> </tr>

            </table>

    </body> 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:10:55.603

首先，您需要确认问题出在计数器上。添加日志语句，在谷歌浏览器的开发者工具中查看日志。

```
if (counter == 11){ ## here is the prblem
    counter = 1;
}
console.log('counter : '+counter); 
```

查看您的代码后...我认为问题出在此声明中..

```
pic.attr("src", src.substring(0,src.lastIndexOf('.')-1)+counter+".jpg") 
```

因为对于 counter=10... src 的值是，

src = 'testbilder/test.10.jpg'

现在通过 src.substring(0,src.lastIndexOf('.')-1)+counter+".jpg") 将适用于高达 9 的计数器，但对于计数器 = 10 ......这将是

```
changepic = function(pic){
    var src = pic.attr("src");  // here src = 'testbinder/test.10.jpg'
    counter = counter+1;  // here counter = 11
    if (counter == 11){ 
        counter = 1; // here counter = 1
    }
        // now src.substring(0,src.lastIndexOf('.')-1) = 'testbinder/test.1'
        // src.substring(0,src.lastIndexOf('.')-1)+counter+".jpg"='testbinder/test.11.jpg'
        pic.attr("src", src.substring(0,src.lastIndexOf('.')-1)+counter+".jpg");

    };
} 
```

要解决此问题，请将其更改为..

```
pic.attr("src", src.substring(0,src.indexOf('.')+1)+counter+".jpg"); 
```

# java - 检查一个周期内的情况或超时终止

> ID：13801236
> 
> 赞同：0
> 
> 时间：2012-12-10T12:46:22.227
> 
> 标签：java, concurrency

我想实现一个功能，它应该如下所示：

```
WaitingUtility.repeatASupplier(getTheNeededSupplier()).every(100).for(10).now(); 
```

供应商应该/可以看起来像番石榴中的供应商：[http](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Suppliers.html) ://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Suppliers.html 如果供应商说假，那么实用程序继续询问和等待，如果“真”实用程序停止等待。

使用 every(100) 我的意思是每 100 毫秒，要求供应商提供结果。使用 for(10)：如果 10 秒结束，实用程序级停止。

我可以想到几种实现和解决方案：Timer、ExecutorService、“自己的”线程处理......

有现成的解决方案吗？什么是最好的解决方案？

谢谢

# openlayers - Openlayers 的提名

> ID：13801245
> 
> 赞同：2
> 
> 时间：2012-12-10T12:47:03.553
> 
> 标签：openlayers, openstreetmap, street-address, nominatim

我有一个简单的代码来通过基于纬度/经度的 Openlayers 显示 Openstreetmaps 的地图：

```
map = new OpenLayers.Map('#map');
var mapnik         = new OpenLayers.Layer.OSM();
var fromProjection = new OpenLayers.Projection("EPSG:4326");   // Transform from WGS 1984
var toProjection   = new OpenLayers.Projection("EPSG:900913"); // to Spherical Mercator Projection
var position = new OpenLayers.LonLat(geo.lng,geo.lat).transform( fromProjection, toProjection);
var zoom = 14; 

map.addLayer(mapnik);
map.setCenter(position, zoom);

var markers = new OpenLayers.Layer.Markers( "Markers" );        
markers.addMarker(new OpenLayers.Marker(position));
map.addLayer(markers); 
```

我现在想做的是显示一张不基于纬度/经度的地图，而只是显示一个地址，也许是通过 OpenStreetMap nominatim。所以我有上面的代码和一个地址字符串，例如“国家、州、城市”，没有街道/-nr。我如何将地图指向那个城市？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:48:12.960

你快到了，看看国家、城市和格式参数：

[http://nominatim.openstreetmap.org/search.php?country=England&city=London&format=json](http://nominatim.openstreetmap.org/search.php?country=England&city=London&format=json)

[http://wiki.openstreetmap.org/wiki/Nominatim](http://wiki.openstreetmap.org/wiki/Nominatim)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:21:42.773

为此，您需要一个[地名词典](http://en.wikipedia.org/wiki/Gazetteer)，它基本上是一个充满地名和位置标识符的字典。有几种方法可以为此目的使用[GeoNames或其他 GeoCoders。](http://www.geonames.org/)这是使用[OpenRouteService的 Openlayers 和 OSM 示例：](http://www.openrouteservice.org/) [http](http://openlayers.org/dev/examples/openls.html) : //openlayers.org/dev/examples/openls.html

# asp.net - 获取复选框服务器端的值

> ID：13801246
> 
> 赞同：0
> 
> 时间：2012-12-10T12:47:04.617
> 
> 标签：asp.net, asp.net-mvc

我想获取复选框的值...我的复选框显示数据库的值“true”或“false”，用​​户可以更改值（如果他不喜欢它）我每次得到值 false

看法：

```
 <%if ((Boolean)ViewData["Statistik3"])
   {%>                            
        <input type="checkbox" name="Statistik3" value="true" checked= "checked"/>
   <%}
    else
   { %>
       <input type="checkbox" name="Statistik3" value="false"/>  <%--</input>--%>
   <%} %> 
```

控制器 C#

```
[AcceptVerbs(HttpVerbs.Get | HttpVerbs.Post)]
public ActionResult Formular(string button, string decision1, FormEntries entries )
{
    entries.Statistik3 ? "Yes" : "No"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:04:01.053

尝试使用服务器端 Html 帮助器呈现复选框。不要像在视图中那样对输入元素进行硬编码，因为这会导致可怕的意大利面条代码。因此，将您显示的整个代码替换为对帮助程序的简单调用，该`Html.CheckBox`帮助程序将负责呈现正确的输入元素：

```
@Html.CheckBox("Statistik3") 
```

现在您发布到的控制器操作可以采用同名的布尔参数：

```
[AcceptVerbs(HttpVerbs.Get | HttpVerbs.Post)]
public ActionResult Formular(bool statistik3, string button, string decision1, FormEntries entries)
{
    // you could use the statistik3 boolean argument to determine
    // whether the user checked or not the checkbox
} 
```

我要做的下一个改进是完全摆脱`ViewData`并定义一个视图模型，该模型将包含该视图所需的所有信息，然后使用强类型版本的 helper: `Html.CheckBoxFox`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:11:32.680

您需要确保 Checkbox 包含在表单元素中。像这样的东西

```
<% using(Html.BeginForm("Formular")){
  <%if ((Boolean)ViewData["Statistik3"])
   {%>                            
        <input type="checkbox" name="Statistik3" value="true" checked= "checked"/>
   <%}
    else
   { %>
       <input type="checkbox" name="Statistik3" value="false"/>  <%--</input>--%>
   <%} %>
<%} %> 
```

如上所述，您应该使用 @Html.CheckBox("Statistik3")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T13:07:04.503

复选框是纯布尔类型；value 属性将被忽略，并且仅在存在未选中属性的情况下。您是否完全绑定到数据模型？尝试以下操作：

```
<%if ((Boolean)ViewData["Statistik3"])
{%>                            
    <input type="checkbox" name="Statistik3"  id="Statistik3" checked="checked"/>
<%}
else
{ %>
   <input type="checkbox" name="Statistik3" id="Statistik3"/>  <%--</input>--%>
<%} %> 
```

然后在返回时测试布尔值。

希望有帮助。

# python - python中的文本处理

> ID：13801250
> 
> 赞同：-3
> 
> 时间：2012-12-10T12:47:17.210
> 
> 标签：python

我有这样的数据：

```
value1
something text
something text 
```

我想用值改变一些文本。例子：

```
value1
value1
value1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:02:04.710

单程：

```
import sys

file = open('file','r')

for line in file:
    if line.startswith('value'):
        pattern=line
    sys.stdout.write(pattern) 
```

将脚本保存到`script.py`并使用`python script.py` *(where `script`is something descriptive)*运行它。

```
value1
value1
value1
value2
value2
value3
value3
value3
value3
value3 
```

并重定向输出`python script.py > new_file`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:03:48.373

```
with open('input.txt', 'r') as f:
    lines = f.readlines()

value = ''
with open('output.txt', 'w') as f:
    for line in lines:
        if line.startswith('value'):
            value = line
        f.write(value) 
```

# tsql - 在日期之间问题

> ID：13801251
> 
> 赞同：-1
> 
> 时间：2012-12-10T12:47:28.053
> 
> 标签：tsql

我有以下查询：

```
SELECT QuoteReference, CreatedDate, StartDate, EndDate, Operation, OccurredAt, PerformedBy, FieldName, OldValue, NewValue
FROM Quotes, Audit  
WHERE Quotes.ID = Audit.RowId
AND PaymentReference is not null 

AND Audit.OccurredAt > Quotes.CompletedDate 
AND Quotes.CreatedDate between '2010-04-01 11:00:00.027' AND '2010-07-30 11:39:22.027'
and TableName = 'QUOTE' OR TableName = 'Quotes'
ORDER BY  Audit.OccurredAt desc 
```

尽管尝试了很多事情，但在“quotes.createddate between ...”行上，我无法过滤结果集以包含创建日期介于这些时间（2010 年 4 月 1 日至 2012 年 7 月 30 日）之间的记录。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:52:57.390

用于`ISO DATETIME FORMAT (yyyymmdd or yyyy-mm-ddThh:mi:ss.mmm)`对`date formatting issue` **if**进行排序。也尝试使用`USE JOIN`表而不是 WHERE table1、table2、..

如果其他条件都可以，下面的查询应该带上记录。

```
SELECT QuoteReference, CreatedDate, StartDate, EndDate, Operation, 
       OccurredAt, PerformedBy, FieldName, OldValue, NewValue

FROM Quotes JOIN Audit ON Quotes.ID = Audit.RowId --JOIN TABLES
WHERE PaymentReference is not null 
      AND Audit.OccurredAt > Quotes.CompletedDate 
      AND Quotes.CreatedDate 
            BETWEEN '20100401' AND '20100730' --Time ignored purposely for checking
      AND TableName IN  ('Quote','Quotes')
ORDER BY  Audit.OccurredAt desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:54:49.033

您的日期范围不正确，请使用：

```
between '2010-04-01 00:00:00:000' AND '2012-07-30 23:59:59:999' 
```

# visual-studio-lightswitch - 具有自定义摘要属性的 Lightswitch 中的自动完成组合框

> ID：13801253
> 
> 赞同：0
> 
> 时间：2012-12-10T12:47:45.183
> 
> 标签：visual-studio-lightswitch, autocompletebox

我在 SQL 中有三个表：

1.  “tb产品”

    ```
    ProductID | ProductName | ProductNumber 
    ```

2.  “trProductGroup”

    ```
    ProductGroupID | ProductID | ProductGroupID 
    ```

3.  “tb组”

    ```
    GroupID | GroupName 
    ```

在 Lightswitch 中，我希望能够将产品分配给产品组。这很容易通过为 tbGroup 创建一个网格并为 trProductGroup 创建一个网格，我可以在其中选择来自 tbProduct 的产品。现在我可以在表示 trProductGroup 的网格中输入产品编号（汇总属性）。我还可以在下拉菜单和网格中**显示产品名称...**

但我希望能够通过名称**和**编号**选择**产品。所以我想要一个带有显示产品名称的组合框的列，我可以在其中搜索产品名称，现在可以搜索产品编号。我认为这可以通过仅更改此特定列的汇总属性来实现。当我更改对象定义中的汇总属性时，输入产品编号将不再起作用。

 **谢谢阅读！

编辑：我创建了一个小视频来显示我的问题。你可以在这里看到它（Flash）：[https ://dl.dropbox.com/u/161205/LightswitchTest/Lightswitch.AutocompleteComboBox.html](https://dl.dropbox.com/u/161205/LightswitchTest/Lightswitch.AutocompleteComboBox.html)

您也可以下载项目查看： [https ://dl.dropbox.com/u/161205/LightswitchTest/LightswitchTest.zip](https://dl.dropbox.com/u/161205/LightswitchTest/LightswitchTest.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:25:27.170

您可以将*ACB*中的控件类型从*Summary*控件更改为*ColumnsLayout*控件。然后你可以添加任何你想显示的属性（一个，或者多个，如果你想的话）。**

# java - 没有应用程序可见的对话框。在 alt 选项卡上

> ID：13801258
> 
> 赞同：1
> 
> 时间：2012-12-10T12:47:51.423
> 
> 标签：java, swing, jdialog

我开发了用于`JDialog`显示弹出窗口的 Swing 应用程序。

但问题是当我按下`alt`+时`tab`，它只显示对话框而不显示应用程序。我还尝试了对话框模式。

我的要求是当在应用程序上打开对话框并按下`alt`+`tab`键时，它会切换到另一个 X 应用程序，当我再次按下`alt`+`tab`键时，它会显示在我的应用程序上打开的对话框。目前它显示打开的对话框，但*不单独显示应用程序。*

我怎样才能满足这个要求`JDialog`呢？

这是示例代码

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

/**
*$Id$
*/
public class Main
{
    public static void main(final String[] args)
    {
        final JFrame jFrame = new JFrame();
        jFrame.setSize(300, 200);
        final JPanel panel = new JPanel();
        final JButton button = new JButton("click here to open dialog");
        final ProductDialog dialog = new ProductDialog();
        button.addActionListener(new ActionListener()
        {

            @Override
            public void actionPerformed(final ActionEvent e)
            {
                dialog.setVisible(true);
            }
        });
        panel.add(button);
        jFrame.add(panel);
        jFrame.setVisible(true);
    }
} 
```

## 对话框如下

```
import javax.swing.JDialog;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class ProductDialog extends JDialog
{
    private static final long serialVersionUID = 1L;

    public ProductDialog()
    {
        this.add(new JPanel().add(new JLabel("Test")));
        this.setSize(150, 100);
        this.setModal(true);
        this.setLocationRelativeTo(null);
    }
} 
```

这是一个小应用程序的视觉效果图。当前在 Windows 7上的`alt`+中显示安全对话框。该应用程序。`tab`其本身已经在屏幕上可见，尽管安全对话框（左上角）仅显示在较小的图标中。

![在此处输入图像描述](../Images/3bff92ab3a273350ccc06cccf3c7dd36.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:09:11.057

您需要将对话框的父窗口设置为`Frame`应用程序的父窗口。

小例子：

```
import java.awt.Window;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;

public class TestDialog {

    protected void initUI() {
        JFrame frame = new JFrame(TestDialog.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JButton button = new JButton("Click me to open dialog");
        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                Window parentWindow = SwingUtilities.windowForComponent(button);
                JDialog dialog = new JDialog(parentWindow);
                dialog.setLocationRelativeTo(button);
                dialog.setModal(true);
                dialog.add(new JLabel("A dialog"));
                dialog.pack();
                dialog.setVisible(true);
            }
        });
        frame.add(button);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestDialog().initUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T07:30:12.930

**我已将父框架传递给对话框，如下所示。**

```
final ProductDialog dialog = new ProductDialog(jFrame); 
```

**并将其设置为
以父窗口为参数调用超类的构造函数并设置对话框的模态类型，它对我有用。**

```
import java.awt.Dialog;

import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class ProductDialog extends JDialog
{
    private static final long serialVersionUID = 1L;

    public ProductDialog(final JFrame jFrame)
    {
        super(jFrame);
        this.add(new JPanel().add(new JLabel("Test")));
        this.setSize(150, 100);
        this.setModal(true);
        this.setModalityType(Dialog.ModalityType.DOCUMENT_MODAL);
    }
} 
```

**这只是我为测试而创建的示例。**

# mysql - mysql AUTO_INCREMENT 是如何工作的？

> ID：13801261
> 
> 赞同：1
> 
> 时间：2012-12-10T12:48:01.143
> 
> 标签：mysql

在[mysql AUTO_INCREMENT doc](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)中，我没有找到关于它如何在插入时选择新 id 的详细说明，

它是缓存“最大数量”键，还是找到未使用的最小 ID？任何参考源代码？

编辑：

我已经测试过了，看起来它不会重复使用已删除项目的 ID，但我不确定。我想使用 id 作为排序的时间戳，所以我必须 100% 确定它是这样的，这意味着这个逻辑解释应该有一个可信的参考，无论是在源代码还是在 mysql 文档中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:50:22.070

它不会选择未使用的最小数字。它总是将其分配的最后一个 ID 加一。这将是一个恒定时间操作。（与选择未使用的最小数字相反，这将是线性时间*）。

例如，如果您插入 10 行，则删除第 5 行。下一个插入的行将获得 ID 11，而不是 5。

*通过在删除时接受惩罚，可以很容易地将该操作优化为恒定时间（在插入时）。然而，这不是 MySQL 所做的。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:04:51.330

是的，这就是工作方式`auto_increment`。

*   每个新行的值都会增加

*   该值是唯一的，不能重复

*   如果删除了一行，`auto_increment`则不会重新分配该行的列。

*   `auto_increment`可以使用 mySQL 函数访问最后插入的行的值，`LAST_INSERT_ID()`但必须在插入查询之后立即在同一数据库连接中调用它。

[http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)

# c# - 运行 startDate 到 endDate 并将每条记录添加到数据库

> ID：13801266
> 
> 赞同：3
> 
> 时间：2012-12-10T12:48:16.317
> 
> 标签：c#, asp.net-mvc-3, datetime, datepicker

所以我正在使用 JQuery.datePicker 示例... [http://www.kelvinluck.com/assets/jquery/datePicker/v2/demo/datePickerStartEnd.html](http://www.kelvinluck.com/assets/jquery/datePicker/v2/demo/datePickerStartEnd.html)

我的 Jquery 日历工作正常，但它只允许我一次输入 1 个日期并将其保存到数据库中。

我希望用户选择一个开始日期和多个日期，在日期和每一天循环到数据库。

一分钟有点迷失，任何帮助将不胜感激....

这是我的 ActionResult create()// 视图的一部分，它允许用户添加新的一天...

```
<form action ="ListHolidays" id="listHolidays" method="post">
@using (Html.BeginForm()) {
      @Html.ValidationSummary(true)
<fieldset>
    <legend>Holiday</legend>

    <div>
        @Html.LabelFor(model => model.PersonId, "Person")
    </div>

    <div>     
        @Html.DropDownListFor(model => model.PersonId,
                            new SelectList(ViewBag.Id, "Value", "Text"),
                            "---Select---"
                            )   
     @Html.ValidationMessageFor(model => model.PersonId)            
    </div>

    <div>
        @Html.LabelFor(model => model.HolidayDate)
    </div>

    <div>

        @Html.TextBoxFor(model => model.HolidayDate)

        @Html.TextBoxFor(model => model.endDate)
<script>

    $("#HolidayDate").addClass('date-pick');
    $("#endDate").addClass('date-pick');
        //$('.date-pick').datePicker//({dateFormat: 'dd-mm-yy'}).val();

        $(function () 
        {
            $('.date-pick').datePicker()
            $('#HolidayDate').bind('dpClosed',
                function (e, selectedDates) 
                {
                    var d = selectedDates[0];
                    if (d) 
                    {
                        d = new Date(d);
                        $('#endDate').dpSetStartDate(d.addDays(1).asString());
                    }
                }
        );
            $('#endDate').bind('dpClosed',
                function (e, selectedDates) 
                {
                    var d = selectedDates[0];
                    if (d) 
                    {
                        d = new Date(d);
                        $('#HolidayDate').dpSetEndDate(d.addDays(-1).asString());
                    }
                }
            );
        });

</script>

 @Html.ValidationMessageFor(model => model.HolidayDate)
    </div>

    <p>
        <input type="submit" value="Create"/>
    </p> 
```

* * *

和我的 listHolidays 帖子：

```
[HttpPost]
public ActionResult listHolidays(Holiday holiday, int? PersonId, string HolidayDate, string endDate)
    {
        IList<DateTime> dates = new List<DateTime>();
        dates.Add(DateTime.Parse(HolidayDate));
        dates.Add(DateTime.Parse(endDate));
        List<DateTime> orderedDates = dates.OrderBy(d => d).ToList();

            for (int i = 0; i < orderedDates.Count; i++ )
            //if (ModelState.IsValid)
            {
                db.Holidays.AddObject(holiday);
                db.SaveChanges();
                return View();
            }

            return RedirectToAction("Index");
           // return View();
        } 
```

* * *

问题在我的假期列表中，我不确定如何从开始到结束日期运行循环，并为每个记录添加一条新记录到数据库中。

请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:02:32.073

我将为您提供一个从开始日期迭代到结束日期的示例，然后您可以将其插入您的解决方案：

```
DateTime startDate = Convert.ToDateTime("1/1/2012"),
    endDate = Convert.ToDateTime("1/30/2012");

while (startDate < endDate)
{
    // do something here with the date

    startDate = startDate.AddDays(1);
} 
```

现在，要注意的另一件事是，您实际上可以收到`startDate`and `endDate`，`DateTime`因为 ASP.NET 将为您进行转换。如果其中一个可以为空，则只需将其类型设置为`DateTime?`.

# asp.net - ASP.NET 中的 Web.Config 中使用的多个 SMTP 详细信息

> ID：13801267
> 
> 赞同：0
> 
> 时间：2012-12-10T12:48:24.137
> 
> 标签：asp.net, smtp

我必须在 web.config 文件中使用多个 smtp 详细信息，我可以这样使用，以及如何为不同目的访问不同的 smtp。我想使用第一个 smtp 记录错误。第二是成功向用户发送邮件。

例子

```
<system.net>
<mailSettings>
   <smtp deliveryMethod="Network" from="test@gmail.com">
    <network defaultCredentials="false" host="smtp.gmail.com" port="587" userName="test@gmail.com" password="test"/>
  </smtp>

 <smtp deliveryMethod="Network" from="tes2t@gmail.com">
    <network defaultCredentials="false" host="smtp.gmail.com" port="587" userName="tes2t@gmail.com" password="test2"/>
  </smtp>
</mailSettings> 
```

我如何使用第一个 smtp 记录和第二个 smtp 成功消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-20T08:21:53.527

You must define multiple section based on `System.Net.Configuration.SmtpSection` type.
Your answer is [here](https://stackoverflow.com/questions/4363038/setting-multiple-smtp-settings-in-web-config?answertab=votes#tab-top)

# filter - 过滤脑电信号中的噪声

> ID：13801270
> 
> 赞同：2
> 
> 时间：2012-12-10T12:48:30.820
> 
> 标签：filter, matlab

我最近记录了采样率为 256Hz 的脑电信号。信号将以 4-64Hz 的频率通过。我需要一个代码来过滤脑电数据。matlab 中是否有任何类型的滤波器最适合过滤伪影或噪声信号？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-12T05:09:34.137

您可以在 50 或 60 Hz 处应用陷波滤波器

来自眼球运动的伪影通常具有 2-5 Hz 的频率范围，因此您可以在那里应用高通滤波器。

小波具有阈值机制，可以使用小波包分解过滤掉噪声（硬阈值和软阈值）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-01T12:47:08.797

如果您的 Fs =1000 Hz，请使用此代码过滤信号并提取特征波段（alpha、beta、...）

```
S = "your EEG-Data-Row";
waveletFunction = 'db8' OR 'sym8' ;
[C,L] = wavedec(S,8,waveletFunction);
%% Calculation The Coificients Vectors
cD1 = detcoef(C,L,1);                   %NOISY
cD2 = detcoef(C,L,2);                   %NOISY
cD3 = detcoef(C,L,3);                   %NOISY
cD4 = detcoef(C,L,4);                   %NOISY
cD5 = detcoef(C,L,5);                   %GAMA
cD6 = detcoef(C,L,6);                   %BETA
cD7 = detcoef(C,L,7);                   %ALPHA
cD8 = detcoef(C,L,8);                   %THETA
cA8 = appcoef(C,L,waveletFunction,8);   %DELTA
%%%% Calculation the Details Vectors
D1 = wrcoef('d',C,L,waveletFunction,1); %NOISY
D2 = wrcoef('d',C,L,waveletFunction,2); %NOISY
D3 = wrcoef('d',C,L,waveletFunction,3); %NOISY
D4 = wrcoef('d',C,L,waveletFunction,4); %NOISY
D5 = wrcoef('d',C,L,waveletFunction,5); %GAMMA
D6 = wrcoef('d',C,L,waveletFunction,6); %BETA
D7 = wrcoef('d',C,L,waveletFunction,7); %ALPHA
D8 = wrcoef('d',C,L,waveletFunction,8); %THETA
A8 = wrcoef('a',C,L,waveletFunction,8); %DELTA 
```

希望这会有所帮助。

# javascript - Imacros：随机等待时间？

> ID：13801272
> 
> 赞同：1
> 
> 时间：2012-12-10T12:48:35.013
> 
> 标签：javascript, random, imacros, time-wait

我试图在 30 分钟到 1 小时之间随机等待。

我正在使用的代码应该执行此操作，但是在最后一行代码之后，脚本就会停止。

这是脚本

```
TAG POS=1 TYPE=INPUT:TEXT ATTR=ID:true-random-integer-generator-min CONTENT=900
TAG POS=1 TYPE=INPUT:TEXT ATTR=ID:true-random-integer-generator-max CONTENT=3600
WAIT SECONDS=1
TAG POS=1 TYPE=SPAN ATTR=ID:true-random-integer-generator-result&&TXT:* EXTRACT=TXT
SET !VAR1 {{!EXTRACT}}
WAIT SECONDS={{!VAR1}}
SET !EXTRACT NULL 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T03:59:50.050

```
'set the delay lower limit, this can be changed
SET !VAR1 1800
'set the remaining time interval that need randomized
SET !VAR2 1800
'calculate the random number
SET !VAR3 EVAL("var randomNumber=Math.floor(Math.random()*\"{{!VAR2}}\" +\"{{!VAR1}}\"); randomNumber;") 
WAIT SECONDS={{!VAR3}} 
```

# java - “\u001B[J”代表什么？

> ID：13801273
> 
> 赞同：18
> 
> 时间：2012-12-10T12:48:37.267
> 
> 标签：java

谁能向我解释一个字符串中的 \u001B[J 可能代表什么？我正在将输入字节流转换为 ascii 字符串。也许流采用其他编码。

**更新：**

这就是我阅读流的方式

```
inputStreamReader = new InputStreamReader(session.getStdout(), "ASCII");

int length = inputStreamReader.read(buffer);
stringBuilder.append(buffer, 0, length);

// LOG the result
StringEscapeUtils.escapeJava(stringBuilder.toString()); 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-10T12:51:32.543

即 Unicode `1B`（`ESC`字符），后跟两个字符`[`和`J`，这是许多终端上常见的 ANSI 转义序列。

那个特定的清除屏幕。其他可以在[这里](http://en.wikipedia.org/wiki/ANSI_escape_code)找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:51:16.523

```
\u001B[J 
```

表示 unicode

Unicode 存储在 2 个字节中，所以在 \u 之后有 4x 个十六进制字节，在这种情况下是`\u001B`The `[J`is from other

# java - 在opengl 2中渲染10000多个动态立方体

> ID：13801274
> 
> 赞同：1
> 
> 时间：2012-12-10T12:48:45.570
> 
> 标签：java, opengl, opengl-es-2.0, lwjgl, jogl

如何在 opengl 2 (JOGL) 中有效地绘制大量可移动的立方体？我是否必须构建一个包含所有立方体副本并在单个调用中绘制的巨大 VBO/VAO？或者为传递 MVP 矩阵的每个立方体实例调用 glDraw 以便能够移动特定立方体？当然立方体共享相同的纹理、顶点、normak 等。我需要在绘制 10000+ 时达到最佳性能，但有可能改变特定立方体的位置

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T13:41:58.327

对所有立方体几何体、法线等使用单个 vbo。

使用 glsl 着色器，该着色器使用来自属性 VBO 的数据转换立方体。（glVertexAttribPointer 等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:01:51.200

如果您单独绘制每个立方体，您会看到非常高的批次计数，这将非常糟糕。

使用一个大的 VBO 将是最快的，但如果您需要大量更改几何形状，那就不好了。您可以将几何图形分成几批（例如，每批 1000 个）。

也许将实例化或伪实例化作为另一种选择。 [http://www.gamerendering.com/2008/10/21/instance/](http://www.gamerendering.com/2008/10/21/instancing/)

# javascript - JS函数返回函数，共享应该是私有的数据

> ID：13801278
> 
> 赞同：2
> 
> 时间：2012-12-10T12:48:59.830
> 
> 标签：javascript, function

我正在尝试创建一个返回另一个函数的函数。当每个内部函数运行时，我想要单独的信息，但这没有发生。我知道解释不是很好，所以我整理了一个小例子。

```
 var testFn = function(testVal) {
                return (function(testVal) {
                    var test = testVal;

                    this.getVal = function() {
                        return test;
                    }

                    return that;

                })(testVal);
            }
            var a = testFn(4);
            var b = testFn(2);
            console.log(b.getVal(), a.getVal()); 
```

这输出 2、2。我想要输出 2、4。我知道这没有得到完美的解释，所以如果不清楚我想要实现什么，有人可以解释为什么这个变量似乎在两个函数之间共享吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T13:02:15.460

像这样 ？

```
var testFn = function(testVal) {
  var test = testVal
  return {
    getVal: function() {
      return  test
    }
  }   
};

var ab = testFn (4)
var ac = testFn (2)

console.log(ab.getVal(),ac.getVal()) //4 //2 
```

您的代码中的问题是`this.getVal()`/返回`this`

因为'this'指的是全局范围/`Window`

您正在使用全局命名空间并覆盖`Window.getVal()`，您设置的那一刻`b = testFn (2)` 这也会导致覆盖`a`s 方法`getVal`，因为它们都引用全局 Object 并且总是共享相同的方法`getVal`

因此它们共享相同的闭包并输出 2

`console.log("The same: " + (Window.a === Window.b)) // true`
`console.log("The same: " + (a === b)) // true`

你可以看到，如果你稍微改变一下：

```
 var testFn = function(testVal) {
          var x = {}
            return (function(testVal) {
                var test = testVal;
                x.getVal = function () {
                  return test;
                }
                 return x

            })(testVal);
        }
        var a = testFn(4);
        var b = testFn(2);
        console.log(b.getVal(), a.getVal());//4 2 
```

它突然起作用了，因为它导致返回 2 个不同的对象（顺便说一句，您甚至不需要外部封闭） `console.log("The same: " + (a === b)) // false`

这是JSbins [First](http://jsbin.com/eyaqak/1/edit) / [Second](http://jsbin.com/ekutaj/1/edit)

我希望您理解这一点，我不擅长解释事情如果有任何不清楚的地方，发表评论，我会尝试更新答案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T13:44:47.227

这个问题归结为在 JavaScript 中调用函数的上下文。

在另一个函数中调用的函数在全局范围的上下文中执行。

在您的示例中，您有以下代码：

```
var testFn = function(testVal) {
  return (function(testVal) {
    var test = testVal;
    this.getVal = function() {
      return test;
    }
    return this;
  })(testVal);
} 
```

*内部函数在全局*范围内被调用，因此`this`引用全局对象。在 JavaScript 中，在另一个函数中执行的函数是在其范围设置为全局范围的情况下完成的，*而不是*它所在函数的范围。这往往会使开发人员误会一点（或者至少，它对我有影响！）。

为了论证的缘故，假设 this 在浏览器中，因此`this`指的是`window`对象。这就是您被`2`记录两次的原因，因为第二次运行时，会`this.getVal`覆盖`getVal`您运行时定义的方法`var a = testFn(4);`。

JavaScript 范围在函数级别，因此每个函数都有自己的范围：

```
var x = 3;
function foo() {
  var x = 2;
  console.log(x);
};
console.log(x); //gives us 3
foo(); // logs 2 
```

因此，您要做的是在 function*的上下文中运行该内部`testFn`函数*，而不是在全局范围内。[`call`您可以使用方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)运行具有特定上下文的函数。我还录制了一个[截屏视频`call`，`apply`](http://javascriptplayground.com/blog/2012/11/screencast-call-and-apply)其中更详细地讨论了这一点。的基本用法`call`是：

```
function foo() {...}.call(this); 
```

这`foo`在`this`. 因此，第一步是确保在正确的上下文（`testFn`方法的上下文）中调用您的内部函数。

```
var testFn = function(testVal) {
  return (function(testVal) {
    var test = testVal;
    this.getVal = function() {
      return test;
    }
    return this;
  }.call(this, testVal);
} 
```

第一个参数`call`是上下文，后面的任何参数都作为参数传递给函数。所以现在内部函数在正确的范围内被调用，它不会添加`getVal`到全局范围内，这是朝着正确方向迈出的一步:)

接下来，尽管您还需要确保每次调用时都是在新范围内进行的，因此第二次调用时`testFn`不会覆盖。您可以使用关键字来执行此操作。[这篇关于关键字的 SO 帖子](https://stackoverflow.com/questions/1646698/what-is-the-new-keyword-in-javascript)[非常值得一读](https://stackoverflow.com/questions/1646698/what-is-the-new-keyword-in-javascript)。当您创建并执行 的新实例时，从而创建一个新范围。[这个 SO question 也是相关](https://stackoverflow.com/questions/3408960/javascript-new-keyword-and-objects-scopes)的。`this.getVal``testFn``new`[`new`](https://stackoverflow.com/questions/1646698/what-is-the-new-keyword-in-javascript)`var foo = new testFn()``testFN`

您现在需要做的就是将您的声明更改`a`为`b`：

```
var a = new testFn(4);
var b = new testFn(2); 
```

现在`console.log(b.getVal(), a.getVal());`将根据需要给予`2`。`4`

我[在 JSBin 上放了一个工作示例，](http://jsbin.com/alehun/1/)它应该有助于解决问题。请注意此示例如何`this.x`在全局和函数内定义，并查看哪些被记录。玩这个，希望它可能有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T13:38:22.373

你得到的输出是 (2,2) 因为当你这样做时

```
var that = this; 
```

您实际得到的是全局对象（窗口），
该对象包含 javascript 代码中的所有全局方法和变量。
（请注意，未嵌套在对象或函数下的每个变量都是全局的，而未嵌套在**对象**
下的每个函数都是全局的，这意味着嵌套在函数下的函数**仍然是全局**的）

 ****所以，当你设置：

```
var test = testVal;

this.getVal = function() {
    return test;
} 
```

您实际上在**全局**对象中设置了函数“getVal”，并且在下一次运行中，您将再次设置相同的函数 - 覆盖第一个函数。
为了达到您想要的效果，我建议在内部函数中创建和对象并返回它（正如@Glutamat 在我之前建议的那样）：

```
var testFn = function(testVal) {
        return new Object({
            getVal: function() {
                return testVal;
            }
        });
}
var a = testFn(4);
var b = testFn(2);
console.log(b.getVal(), a.getVal()); 
```

这样，在外部函数中，我们创建了一个带有名为“getVal”的内部函数的对象，该函数返回传递给外部函数（testVal）的变量。这是一个[JSBin](http://jsbin.com/utoviz/1/edit)，如果你想玩的话
（感谢 @Glutamat 介绍这个网站，我从来没有听说过它，它真的很酷 :D）****

# javascript - Dojo Chart中各个条的填充颜色？

> ID：13801279
> 
> 赞同：3
> 
> 时间：2012-12-10T12:49:02.383
> 
> 标签：javascript, dojo, dojox.charting

这可能是相当简单的 Q（使用 Dojo 学习技巧）。

我已经在我的网络应用程序中成功创建了一个条形图。

```
// Create Chart
var chartDiv = dojo.create("div");
dijit.byId("someDiv").setContent(chartDiv);
var chart1 = dojox.charting.Chart2D(chartDiv);

chart1.addPlot("default", {
    type: "Bars",
    gap: 3
});
chart1.addAxis("x");
chart1.addAxis("y", {
    vertical: true,
    labels: [{
        value: 1,
        text: "Field1"
    }, {
        value: 2,
        text: "Field2"
    }]
});
chart1.addSeries("MyData", [var1, var2]);
chart1.render(); 
```

我看到您可以为图表创建[自定义主题。](http://www.sitepen.com/blog/2010/07/26/dojo-chart-theming/)但是，我认为必须有一种更简单的方法来为我的每个条形定义颜色（最好是微妙的渐变）。我也仅限于使用 Esri 提供的 dojo 版本，并且不确定这是否允许我创建自定义主题。

只会有 5 个条形图（在上面的代码段中为 2 个）。

**即我想为每个条定义不同的颜色。**

有人可以让我摆脱痛苦并就如何实现这一目标提供一些指导吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T12:30:29.370

事后看来，我有点懒惰。这对我有用：

```
chart1.addSeries("Languages", [
    { y: var1, fill: "#BD48E9" },
    { y: var2, fill: "#FA4848" },
]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T12:54:37.550

`render`在调用方法之前添加以下代码

```
chart1.addSeries("MyData", [var1, var2],
        {plot: "other", stroke: {color:"red"}, fill: "lightgreen"}
);
chart1.render(); 
```

# java - 将android连接到openLDAP服务器

> ID：13801282
> 
> 赞同：1
> 
> 时间：2012-12-10T12:49:08.083
> 
> 标签：java, android, httpclient, openldap, unboundid-ldap-sdk

我被分配了一个任务，从 android 连接到 LDAP 服务器。从 android 执行身份验证过程。我正在使用 openLDAP。我对此完全陌生。任何人都可以帮助我使用一些代码或演示代码来显示 android 与 LDAP 服务器连接并进行身份验证。这

```
 Port no-389
  SSL Port-636
  IP Address-LGSPC3
  username-->cn=name,cn=users,dc=mydeomain,dc=com

  serverlist-ldap://server1 
```

先感谢您

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-26T15:27:53.910

我用来成功连接LDAP服务器的代码如下：

```
import java.sql.Date;
import java.text.SimpleDateFormat;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

import com.unboundid.ldap.sdk.AddRequest;
import com.unboundid.ldap.sdk.LDAPConnection;
import com.unboundid.ldap.sdk.LDAPException;

public class MainActivity extends Activity implements OnClickListener {

//String address="ldap://server1.mydomain.com" ;
String address="xxx.xxx.xxx.xxx";
int port=389;
//String bindDN="CN=name,CN=users,DC=mydomain,DC=com";
String bindDN="cn=Manager,dc=maxcrc,dc=com";
String password="secret";
boolean login_flag=true;

LDAPConnection c ;
AddRequest addRequest;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button bt_login=(Button)findViewById(R.id.bt_login);
    bt_login.setOnClickListener(this);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@SuppressLint("SimpleDateFormat") @Override
public void onClick(View arg0) {

       try {
           c= new LDAPConnection(address,port,bindDN,password);
           c.setConnectionName("Demo Connection");
           String con_name=c.getConnectionName();
           long time=c.getConnectTime();
           SimpleDateFormat formatter = new SimpleDateFormat("dd-MM-yy HH:mm:ss");
           String dateString = formatter.format(new Date(time));
           Toast.makeText(getBaseContext(),"Connected to LDAP server....connection_name="+con_name+" at time"+dateString, Toast.LENGTH_LONG).show();

      } catch (LDAPException e) {
          login_flag=false;
          e.printStackTrace();
          Toast.makeText(getBaseContext(),"No connection was established" , Toast.LENGTH_LONG).show();
    } catch(Exception e) {
           e.printStackTrace();
    } finally{
           if(login_flag){
                 c.close();
                 Toast.makeText(getBaseContext(), "Connection Closed successfully", Toast.LENGTH_LONG).show();
           }
   }

}

} 
```

**希望它可以帮助你。**

# python - 使用 cx_python 将列表插入 oracle db 返回非法变量名称/编号

> ID：13801287
> 
> 赞同：0
> 
> 时间：2012-12-10T12:49:24.030
> 
> 标签：python, cx-oracle

使用[保存在名为 test.xml 的本地文件中的此 xml 示例](http://msdn.microsoft.com/en-us/library/windows/desktop/ms762271%28v=vs.85%29.aspx)的内容，我尝试使用以下代码解析内容并插入到我的数据库中：

```
import cx_Oracle
import re
import os
import xml.etree.ElementTree as ET
from ConfigParser import SafeConfigParser

def db_callmany(cfgFile, sql,params):

    parser = SafeConfigParser()
    parser.read(cfgFile)
    dsn = parser.get('odbc', 'dsn')
    uid = parser.get('odbc', 'user')
    pwd = parser.get('odbc', 'pass')
    try:
        con = None
        con = cx_Oracle.connect(uid , pwd, dsn)
        cur = con.cursor()
        cur.executemany(sql,params)
        con.commit()
    except cx_Oracle.DatabaseError, e:
            print 'Error %s' % e
            sys.exit(1)
    finally:
        if con:
            con.close()

if __name__ == '__main__':
    try:
        cfgFile='c:\\tests\\dbInfo.cfg'
        tree = ET.parse('test.xml')
        root = tree.getroot()
        mdfList = []
        for book in root.findall('book'):
            author = book.find('genre').text
            title = book.find('price').text
            the  = str((author,title))
            mdfList.append(the)

        sql = "INSERT INTO book_table ( GENRE, PRICE )"
        db_callmany(cfgFile,sql,mdfList)

    except KeyboardInterrupt:
        sys.stdout('\nInterrupted.\n') 
```

但执行此代码我收到以下错误：

```
Error ORA-01036: illegal variable name/number

Exit code:  1 
```

不知道我在这里可以缺少什么以使此代码正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:31:15.513

CX_Oracle 需要占位符，然后是一系列用于执行的字典，而不是一系列序列 - 所以类似于：

```
mdfList = list()

for book in root.findall('book'):
    Values = dict()
    Values['GENRE'] = book.find('genre').text
    Values['PRICE'] = book.find('price').text
    mdfList.append(Values)

sql = "INSERT INTO book_table (GENRE, PRICE) VALUES (:GENRE, :PRICE)"
db_callmany(cfgFile, sql, mdfList) 
```

# windows-store-apps - 为 Windows Store DirectX App 实现着色器动画

> ID：13801288
> 
> 赞同：1
> 
> 时间：2012-12-10T12:49:24.787
> 
> 标签：windows-store-apps, hlsl, directx-11

我正在尝试在 Windows Store DirectX App 中实现着色器动画。实际上，我只是想实现在下面的链接中看到的相同动画（针对 DirectX 9 和 C# 实现）。

[http://www.rastertek.com/dx10tut33.html](http://www.rastertek.com/dx10tut33.html)

我有点能够找到使用 DirectX 11.1（与 Windows Store App 兼容的 DirectX 着色器）的方法，但我看不到如何将时间参数从 C++ 程序逻辑传递给着色器代码，以便我可以影响着色器状态和根据时间有不同的效果。

如果你有一些意见，请分享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:40:33.703

要将参数传递给着色器，您可以使用常量缓冲区 ( [msdn](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476898%28v=vs.85%29.aspx#Shader_Constant_Buffer) )。您创建一个常量缓冲区，用您的数据填充它，例如实际时间，然后将其设置在所需的着色器中

```
 ID3D11DeviceContext::GSSetConstantBuffers
   ID3D11DeviceContext::PSSetConstantBuffers
or ID3D11DeviceContext::VSSetConstantBuffers. 
```

# java - 如何在我的 for 循环中为每一行添加按钮

> ID：13801295
> 
> 赞同：0
> 
> 时间：2012-12-10T12:49:46.970
> 
> 标签：java, for-loop, resultset, stringbuilder

我希望为我的 for 循环中的每一行实现一个按钮。但我不知道该怎么做。

我希望能够通过按一个按钮来编辑每一行中的数据。

```
for(HentbestillingsordreRegistrer hentboregistrer: hbor){
        if(status.equals("Leveret")){

        temp.append("<html>");
        temp.append("BestillingsID: ");   
        temp.append(hentboregistrer.BestillingsID);   
        temp.append("<br />");
        temp.append("Ordre Status:");
        temp.append(hentboregistrer.BestillingsStatus);
        temp.append("<br />");
        temp.append("LeverandoerID: ");
        temp.append(hentboregistrer.Leverandoernavn);
        temp.append("<br />");
        temp.append("Modtaget af: ");
        temp.append(hentboregistrer.ModtagetAf);
        temp.append("<br />");
        temp.append("<br />");

        }else{
            temp.append("<html>");
            temp.append("BestillingsID: ");
            temp.append(hentboregistrer.BestillingsID);   
            temp.append("<br />");   
            temp.append(hentboregistrer.BestillingsStatus);   
            temp.append("<br />");
            temp.append("LeverandoerID: ");
            temp.append(hentboregistrer.Leverandoernavn);
            temp.append("<br />");
            temp.append("Modtaget af: ");
            temp.append(hentboregistrer.ModtagetAf);
            temp.append("<br />");
            temp.append("<br />");

        }

    }
        return temp.toString();
}

public JPanel HentOrdreGUI(){

    JPanel info = new JPanel();
    info.setLayout(new BorderLayout());
    JLabel labelprintdata = new JLabel(temp.toString());
    JScrollPane scroll = new JScrollPane(labelprintdata);
    info.add(scroll, BorderLayout.CENTER);
    return info;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:59:31.633

I would change the `JLabel` into a `JTable`, and add a `JButton` as the 3rd column of the table. Something like this...

```
// Create a container for all your table data.
// There are 3 columns (type, value, button) in the table.
// And each order has 4 items in it (BestillingsId, Status, LeverandoerID, Modtaget)
Object[][] tableData = new Object[numOrders*4][3];

for(int i=0;i<numOrders;i++){
    HentbestillingsordreRegistrer hentboregistrer = hbor[i];

    // For each order, we need to add 4 rows, each with 3 cells in it (to hold the type, value, and the button)
    if(status.equals("Leveret")){
        tableData[(i*4)+0] = new Object[]{"BestillingsID",hentboregistrer.BestillingsID,new JButton("Edit")};
        tableData[(i*4)+1] = new Object[]{"Ordre Status",hentboregistrer.BestillingsStatus,new JButton("Edit")};
        tableData[(i*4)+2] = new Object[]{"LeverandoerID",hentboregistrer.Leverandoernavn,new JButton("Edit")};
        tableData[(i*4)+3] = new Object[]{"Modtaget af:",hentboregistrer.ModtagetAf,new JButton("Edit")};
    }
    else{
        tableData[(i*4)+0] = new Object[]{"BestillingsID",hentboregistrer.BestillingsID,new JButton("Edit")};
        tableData[(i*4)+1] = new Object[]{"Ordre Status",hentboregistrer.BestillingsStatus,new JButton("Edit")};
        tableData[(i*4)+2] = new Object[]{"LeverandoerID",hentboregistrer.Leverandoernavn,new JButton("Edit")};
        tableData[(i*4)+3] = new Object[]{"Modtaget af:",hentboregistrer.ModtagetAf,new JButton("Edit")};
    }
}

// Headings for the table columns
String[] tableHeadings = new String[]{"Type","Value","Button"};

JPanel info = new JPanel();
info.setLayout(new BorderLayout());

// Create the table from the data above
JTable table = new JTable(tableData,tableHeadings);
JScrollPane scroll = new JScrollPane(table);

info.add(scroll, BorderLayout.CENTER); 
```

# ios - RemoteIO 和 VPIO 之间的录音音量下降切换

> ID：13801297
> 
> 赞同：10
> 
> 时间：2012-12-10T12:49:49.987
> 
> 标签：ios, core-audio, remoteio

在我的应用程序中，我需要在这两个不同的 AudioUnit 之间切换。每当我从 VPIO 切换到 RemoteIO 时，我的录音音量都会下降。相当明显的下降。但是播放音量没有变化。有人经历过吗？

这是我进行切换的代码，它是由路由更改触发的。（我不太确定我是否正确地进行了更改，所以我也在这里问。）

如何解决录音音量下降的问题？

谢谢，感谢我能得到的任何帮助。

码头。

```
- (void)switchInputBoxTo : (OSType) inputBoxSubType
{
OSStatus result;

if (!remoteIONode) return; // NULL check

// Get info about current output node
AudioComponentDescription outputACD;
AudioUnit currentOutputUnit;

AUGraphNodeInfo(theGraph, remoteIONode, &outputACD, &currentOutputUnit);

if (outputACD.componentSubType != inputBoxSubType)
{
    AUGraphStop(theGraph);
    AUGraphUninitialize(theGraph); 
    result = AUGraphDisconnectNodeInput(theGraph, remoteIONode, 0);
    NSCAssert (result == noErr, @"Unable to disconnect the nodes in the audio processing graph. Error code: %d '%.4s'", (int) result, (const char *)&result);
    AUGraphRemoveNode(theGraph, remoteIONode);
    // Re-init as other type

    outputACD.componentSubType = inputBoxSubType;
    // Add the RemoteIO unit node to the graph
    result = AUGraphAddNode (theGraph, &outputACD, &remoteIONode);
    NSCAssert (result == noErr, @"Unable to add the replacement IO unit to the audio processing graph. Error code: %d '%.4s'", (int) result, (const char *)&result);

    result = AUGraphConnectNodeInput(theGraph, mixerNode, 0, remoteIONode, 0);
    // Obtain a reference to the I/O unit from its node
    result = AUGraphNodeInfo (theGraph, remoteIONode, 0, &_remoteIOUnit);
    NSCAssert (result == noErr, @"Unable to obtain a reference to the I/O unit. Error code: %d '%.4s'", (int) result, (const char *)&result);

    //result = AudioUnitUninitialize(_remoteIOUnit);

    [self setupRemoteIOTest]; // reinit all that remoteIO/voiceProcessing stuff
    [self configureAndStartAudioProcessingGraph:theGraph];
}  
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T10:43:08.333

我为此使用了我的苹果开发人员支持。这是支持人员所说的：

> Voice I/O 的存在将导致输入/输出的处理方式非常不同。我们不希望这些单位有相同的增益水平，但水平不应该像你所说的那样大幅下降。
> 
> 也就是说，Core Audio 工程表明您的结果可能与创建语音块的时间有关，它也会影响 RIO 实例。经过进一步讨论，Core Audio 工程师认为，由于您说电平差异非常大，因此如果您可以通过一些录音提交错误以突出您在语音 I/O 和远程 I/O 以及您的测试代码，这样我们就可以尝试在内部重现，看看这是否确实是一个错误。将上面概述的单个 IO 单元测试的结果以及进一步的比较结果包括在内是一个好主意。
> 
> 没有 API 可以控制这个增益级别，一切都由操作系统内部设置，具体取决于音频会话类别（例如，VPIO 预计将始终与 PlayAndRecord 一起使用）以及已设置的 IO 单元。通常不期望两者同时实例化。

结论？我认为这是一个错误。：/

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T19:04:57.143

如果您没有正确处理您的音频单元，就会有一些关于低音量问题的讨论。基本上，第一个音频组件保留在内存中，任何后续播放都将在您或其他应用程序下进行，从而导致音量下降。

**解决方案：** 音频单元是 AudioComponentInstance 的，必须使用 AudioComponentInstanceDispose() 释放。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-06T14:43:52.700

当我从语音处理 io (PlayAndRecord) 更改为 Remote IO (SoloAmbient) 时更改音频会话类别时，我取得了成功。确保在更改此设置之前暂停音频会话。您还必须取消初始化您的音频图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-07T08:24:22.257

来自我与 Apple AVAudioSession 工程师的一次谈话。

VPIO - 在音频样本上添加音频处理，这也会创建回声消除，这会导致音频电平下降

RemoteIO - 不会进行任何音频处理，因此音量将保持较高。

如果您在使用 RemoteIO 选项时正在寻找回声消除，您应该在渲染回调中创建自己的音频处理

# java - 如何使用 JDT/AST 向方法主体添加代码片段

> ID：13801305
> 
> 赞同：17
> 
> 时间：2012-12-10T12:50:09.097
> 
> 标签：java, code-generation, abstract-syntax-tree, eclipse-jdt

我正在尝试使用 JDT/AST 生成 Java 源代码。我现在有[MethodDeclaration](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/dom/MethodDeclaration.html)并想将代码片段（来自另一个来源）添加到方法主体。代码片段可以包含任何 Java 代码，**甚至是语法无效的代码**。我只是找不到这样做的方法。

使用 JCodeModel 您将使用[JBlock#directStatement(String s) 方法](http://codemodel.java.net/nonav/apidocs/com/sun/codemodel/JBlock.html#directStatement%28java.lang.String%29)。

有没有办法用 JDT/AST 做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-16T06:46:33.730

由于您为应用程序的其余部分提供了格式良好的树，并且您想在特定位置插入格式不正确的文本，因此使用标准的树节点插入机制几乎无法做到这一点。

重要的是您为有效的程序文本生成文本，并在正确的位置插入片段。在某处必须有一段逻辑将 AST 打印为文本。您需要做的是要求将 AST 打印为文本，并在该过程的中间捕获它，在必要的精确点插入您的任意文本。

我们的 DMS Software Reengineering Toolkit 在其漂亮的打印机中具有进入/退出打印节点挂钩，以允许这种事情发生。

如果 JDT/AST 中不存在这样的东西，你可以尝试修改它的 prettyprinter 来给你那个钩子。或者，您可以考虑通过添加不属于标准集的另一种树节点类型来修改 JDT/AST，它只包含任意文本但行为类似于方法节点。大概每个节点都控制打印的内容；然后您可以为该树节点定义漂亮打印，以使其输出其文本。

最后一个非常老套的解决方案：在任意文本所在的位置插入一个完全有效的 AST，其中包含一个具有唯一名称的虚假标识符，例如 ZZZ。然后，将 AST 打印为字符串，并对字符串进行后处理，以将包含唯一名称的虚假树替换为实际的用户文本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T19:19:10.983

您首先需要将代码片段解析为 AST。您可以[`ASTParser`](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/dom/ASTParser.html)为此目的使用 API。

可能会遇到编译单元的编译问题（请参阅 参考资料[`CompilationUnit.getProblems()`](http://help.eclipse.org/juno/topic/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/dom/CompilationUnit.html#getProblems%28%29)）。

有几种方法可以[使用 JDT 修改 Java 代码](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.isv/guide/jdt_api_manip.htm)。我建议您考虑使用[`ASTRewrite`](http://help.eclipse.org/juno/topic/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/dom/rewrite/ASTRewrite.html)API 来修改方法的主体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-11T13:04:06.220

您可以使用 ASTParser API 操作 AST - 甚至不必编译输出。

这是您的案例的示例：

```
String textToInsert = "Some text";
StringLiteral stringLiteral = methodDeclaration.getAST().newStringLiteral();
rewriter.set(stringLiteral, StringLiteral.ESCAPED_VALUE_PROPERTY, textToInsert, null);
ListRewrite methodStatements = rewriter.getListRewrite(methodDeclaration.getBody(), Block.STATEMENTS_PROPERTY);
methodStatements.insertFirst(stringLiteral, null); 
```

结果：

```
public void myMethod() {
  Some text
} 
```

# algorithm - 跨分布式机器的字符串和值的映射，最有价值的字符串是什么？

> ID：13801309
> 
> 赞同：0
> 
> 时间：2012-12-10T12:50:16.557
> 
> 标签：algorithm, hash, distributed-computing

我们在不同的分布式机器中使用字符串和正整数作为键/值对进行映射。我们需要在所有服务器中找出具有最高值的字符串。

我们应该避免从所有位置转移整个地图，因为它成本高昂并且与分布式性质相矛盾。

有没有办法以最佳方式解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:54:12.503

听起来像教科书[MapReduce](http://en.wikipedia.org/wiki/MapReduce)问题。您需要有一个从所有节点收集信息的主节点。每个节点必须向主节点报告其最大的字符串/值项。主人可以简单地决定谁拥有具有最大值的字符串。

# c++ - std::sort 类中的比较函数无法编译

> ID：13801311
> 
> 赞同：5
> 
> 时间：2012-12-10T12:50:18.843
> 
> 标签：c++, sorting, stl

我正在编写一个程序来获得一个凸包。我需要按极角对点进行排序，并且我`base`之前选择了一个点，所以我编写了一个成员比较函数（注意，对于每个对象，`base`点是不同的）。但是当我将它应用于 时`std::sort`，程序无法编译。

这是我的程序：

```
class ConvexHull
{
  Point p[MAXN], base;
public:
  int size;
  void Create(Point (&)[MAXN], const int);
  bool cmp(const Point& a, const Point& b) const
  {
    static int tmp;
    return (tmp = CrossProduct(base, a, base, b)) < 0 || (tmp == 0 && Dist(base, a) < Dist(base, b));
  }
};
void ConvexHull::Create(Point (&a)[MAXN], const int n)
{
  base = a[0];
  for (int i = 1; i < n; ++i)
    if (a[i].x < base.x || (a[i].x == base.x && a[i].y < base.y))
      base = a[i];
  std::sort(a, a+n, cmp);
  p[0] = a[0], p[1] = a[1];
  size = 2;
  for (int i = 2; i < n; ++i)
  {
    while (size >= 2 && CrossProduct(a[i], p[size-1], a[i], p[size-2]) <= 0) --size;
    p[size++] = a[i];
  }
  p[size++] = p[0];
} 
```

这是错误：

```
poj1113.cc: In member function 'void ConvexHull::Create(Point (&)[1000], int)':
poj1113.cc:41:24: error: no matching function for call to 'sort(Point [1000], Point*, <unresolved overloaded function type>)'
poj1113.cc:41:24: note: candidates are:
In file included from /usr/include/c++/4.7/algorithm:63:0,
                 from poj1113.cc:3:
/usr/include/c++/4.7/bits/stl_algo.h:5463:5: note: template<class _RAIter> void std::sort(_RAIter, _RAIter)
/usr/include/c++/4.7/bits/stl_algo.h:5463:5: note:   template argument deduction/substitution failed:
poj1113.cc:41:24: note:   candidate expects 2 arguments, 3 provided
In file included from /usr/include/c++/4.7/algorithm:63:0,
                 from poj1113.cc:3:
/usr/include/c++/4.7/bits/stl_algo.h:5499:5: note: void std::sort(_RAIter, _RAIter, _Compare) [with _RAIter = Point*; _Compare = bool (ConvexHull::*)(const Point&, const Point&)const]
/usr/include/c++/4.7/bits/stl_algo.h:5499:5: note:   no known conversion for argument 3 from '<unresolved overloaded function type>' to 'bool (ConvexHull::*)(const Point&, const Point&)const' 
```

如何解决？这（我的意思是让`base`会员）是一个糟糕的设计吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T12:55:24.570

问题是您的`cmp`方法必须是`static`. 原因是非静态方法需要一个不可见的第一个参数，即`this`指针。该`std::sort`函数*不*传递这个额外的参数。

由于您引用了成员变量，因此您无法创建函数`static`，但还有其他方法可以解决此问题。我建议使用新的 C++11 标准功能[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)：

```
std::sort(a, a+n, std::bind(&ConvexHull::cmp, this)); 
```

该`std::bind`调用创建一个可调用对象，将第一个参数设置为，`this`以便在调用时正确。

# excel - Excel VBA循环抛出最后一个循环答案作为每个循环的答案

> ID：13801312
> 
> 赞同：1
> 
> 时间：2012-12-10T12:50:18.213
> 
> 标签：excel, for-loop, vba

我只是不能给我正确的答案！我正在尝试将温度值从 1 个 excel 表 - “Design” - 导入到另一个 excel 表 - “Design2”。如果组合框的文本是“C” - 温度值应该是一样的。如果组合框位于“K”上，则应将 273.15 添加到温度值以将其转换为开尔文。

这部分工作正常。

然而，程序为“Design2”表上的每个温度给出相同的值——即使“设计”表上的温度不同。

有人可以帮忙吗？？？

这是我的代码：

```
 Private Sub OK_Click()
    'Temperature
    Dim Temperaturei As Double
    Dim j As Integer
    Dim k As Integer

    For i = 201 To 218
        For j = 4 To 36 Step 2
            For k = 2 To 19
                Temperaturei = Sheets("Design").Cells(36, j).Value
                        Sheets("Design2").Cells(k, 2).Value = Temperaturei
                    Select Case Sheets("Diagram").TemperatureUnit.Text
                        Case "°C"
                            Temperaturei = Temperaturei
                        Case "K"
                            Temperaturei = Temperaturei + 273.15
                    End Select
            Next k
        Next j
    Next i

    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:32:10.213

您是要分别遍历 Design 和 Design2 吗？因为现在设置循环的方式，您将在 Design2 中迭代，同时仅使用 Design 中的一个值。K 将从 2 变为 19，而 J 保持在 4。然后当 J 移动到 5 时，K 将再次从 2 移动到 19。我不确定你的程序的设计，但那是你想要做的吗？

如果没有，您应该考虑将第二个和第三个循环组合成一个循环，以便两个工作表同时迭代。我可以看到您需要在“设计”上逐步执行 2，但是您可以通过简单地说 ((k*2) + 2) 之类的内容来获得相同的效果。

例子：

```
Dim j as Integer
For k = 2 to 19
    j = (k*2) 'If k = 2, j = 4, if k = 3, j = 6, etc, etc.
    [Do stuff]

End For 
```

我有点在黑暗中拍摄，但我认为这可能是你的问题。事实上，在再次阅读你的问题之后，我很确定这是问题所在......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:06:36.820

如果你移动这条线怎么办：

`Sheets("Design2").Cells(k, 2).Value = Temperaturei`

就在之前

`Next k`

这样，您将`Temperaturei`在代码更改后将结果写入 Design2 工作表。它现在的写入方式，在从工作表中取出更改后的值后，它不会在任何地方写入更改的值`Design`。

因此，您的代码将如下所示：

```
Private Sub OK_Click()
'Temperature
Dim Temperaturei As Double
Dim j As Integer
Dim k As Integer

For i = 201 To 218
    For j = 4 To 36 Step 2
        For k = 2 To 19

            'pick up value
            Temperaturei = Sheets("Design").Cells(36, j).Value

                'alter it
                Select Case Sheets("Diagram").TemperatureUnit.Text
                    Case "°C"
                        Temperaturei = Temperaturei
                    Case "K"
                        Temperaturei = Temperaturei + 273.15
                End Select

             'write back to sheet
             Sheets("Design2").Cells(k, 2).Value = Temperaturei

        Next k
    Next j
Next i

End Sub 
```

# matrix - Fortran 中的堆叠 MPI 派生数据类型

> ID：13801314
> 
> 赞同：0
> 
> 时间：2012-12-10T12:50:21.623
> 
> 标签：matrix, fortran, mpi, derived-types

MPI2 允许我们创建派生数据类型并通过编写发送它们

```
call mpi_type_create_indexed_block(size,1,dspl_send,rtype,DerType,ierr)
call mpi_send(data,1,DerType,jRank,20,comm,ierr) 
```

通过这样做，数据（N）的位置dspl_send**由****MPI**库发送。

 **现在，对于矩阵**data(M,N)，**我们可以通过以下代码发送它的位置：

```
call mpi_type_create_indexed_block(size,M,dspl_send,rtype,DerTypeM,ierr)
call mpi_send(data,1,DerTypeM,jRank,20,comm,ierr) 
```

即发送条目**data(i, dspl_send(j))**。

我的问题是关于 1 在随后的 mpi_send 中的作用。它必须始终为 1 吗？其他尺寸可能吗？MPI 派生的数据类型在 Internet 上的许多文档中都有很好的解释，但是 send/recv 中的大小始终为**1**，而没有提及是否允许其他大小以及如何使用它。

如果我们想使用大小 M 在调用之间变化的矩阵**data(M,N)**，我们是否需要在调用时始终创建派生数据类型？是否无法使用**DerType**发送矩阵**data(M,N)**或**data(N,M)**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T13:47:53.680

每个 MPI 数据类型都有两个属性：大小和范围。大小是数据类型表示的实际字节数，而范围是数据类型在内存中覆盖的字节数。某些数据类型不是连续的，这意味着它们的大小可能小于它们的范围，例如（此处以伪代码显示）

```
MPI_TYPE_VECTOR(count = 1,
                blocklength = 10,
                stride = 20,
                oldtype = MPI_INTEGER,
                newtype = newtype) 
```

创建一个数据类型，该数据类型`blocklength`从总共 20 个 ( ) 中获取前 10 个 ( ) 元素`stride`。此数据类型的大小是大多数系统上以字节计的大小的`10`倍数。在大多数系统上，它的范围是两倍或字节。如果是 2，那么它将采用 10 个元素，然后跳过接下来的 10 个，然后再采用另外 10 个元素并再次跳过接下来的 10 个。因此它的大小和它的扩展将是两倍大。`MPI_INTEGER``40``80``count`

当您在任何 MPI 例程中指定某个元素计数时，例如`MPI_SEND`，MPI 会执行以下操作：

1.  它使用源缓冲区参数的地址初始化内部数据缓冲区。
2.  它咨询数据类型类型映射以确定多少字节以及从何处获取并将它们附加到正在构造的消息中。添加的字节数等于数据类型的*大小*。
3.  *它按数据类型的范围*递增内部数据指针。
4.  它减少内部计数，如果它仍然非零，则重复前两个步骤。

MPI 的一个很好的特性是数据类型的范围不需要匹配其大小（如矢量示例中所示），甚至可以使用`MPI_TYPE_CREATE_RESIZED`. 这允许创建非常复杂的数据访问模式。例如，使用`MPI_SCATTERV`不跨越整行 (C) 或整列 (Fortran) 的块来分散矩阵需要使用这种调整大小的类型。

回到向量示例。无论是使用创建向量类型`count = 1`然后调用`MPI_SEND`使用，`count = 2`还是使用创建向量类型`count = 2`然后调用`MPI_SEND`使用`count = 1`，最终结果都是相同的。通常人们会构造一种数据类型来完全描述想要发送的对象。在这种情况下，人们会`count = 1`调用`MPI_SEND`. 但是在某些情况下，创建只描述对象的一部分（例如单个部分）的数据类型可能更有益，然后`MPI_SEND`使用`count`set 调用要发送的部分数量。有时是个人喜好问题，有时是算法要求问题。

至于你的最后一个问题，Fortran 以列优先顺序存储矩阵，这意味着它`data(i,j)`在`data(i±1,j)`内存中，而不是在`data(i,j±1)`. 因此，`data(M,N)`由每个元素的`N`连续列向量`M`组成。`data(1,1)`例如，两个元素之间的距离`data(1,2)`取决于`M`。这就是您`M`在类型构造函数中提供的原因。具有不同行数（例如不同`M`）的矩阵不会“适合”所创建类型的类型映射，并且会使用错误的元素来构造消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-29T09:46:36.897

[https://stackoverflow.com/a/13802243/7784768](https://stackoverflow.com/a/13802243/7784768)中关于范围的描述并不完全正确，因为范围没有考虑数据类型末尾的填充。MPI 数据类型由 typemap 定义：

```
typemap = ((type_0, disp_0 ), ..., (type_n−1, disp_n−1 )) 
```

然后根据以下定义范围

```
lb = min(disp_j)
ub = max(disp_j + sizeof(type_j)) + e)
extent = ub - lb, 
```

其中，由于对齐要求，e 可以是非零值。

这意味着在示例中

```
MPI_TYPE_VECTOR(count = 1,
                blocklength = 10,
                stride = 20,
                oldtype = MPI_INTEGER,
                newtype = newtype) 
```

当 count=1 时，typemap 是

```
((int, 0), (int, 4), ... (int, 36)) 
```

在大多数系统中，范围是 40 而不是 80（即在这种情况下，步幅对类型映射没有影响）。对于 count=2，typemap 将是

```
((int, 0), (int, 4), ... (int, 36), (int, 80), (int, 84), ... (int, 116)) 
```

和范围 120（第一个 10 个整数块为 40 个字节，步幅为 40 个字节，第二个 10 个整数块为 40 个字节，但剩余步幅在范围中被忽略）。使用 MPI_Type_get_extent 函数可以轻松找出范围。

范围是一个非常棘手的概念，在尝试传达派生数据类型的多个元素时很容易出错。**

# cakephp - CakePHP：模型和控制器之间的连接失败

> ID：13801315
> 
> 赞同：1
> 
> 时间：2012-12-10T12:50:22.553
> 
> 标签：cakephp, model, controller, connection

我最新的 CakePHP 应用程序有问题。

我已经为类别制作了模型和控制器。

型号：Categorie.php

```
class Categorie extends AppModel{
    public $name = 'Categorie';
} 
```

控制器：CategoriesController.php

```
class CategoriesController extends AppController {
    public function index(){
        $this->set('list', $this->Categorie->find('all'));
    }
} 
```

但是当我访问该页面时，我得到了错误：

```
Fatal error: Call to a member function find() on a non-object 
```

当我添加

```
$this->loadModel('Categorie'); 
```

到我的控制器中的索引功能它将起作用。

所以我猜模型和控制器之间的连接不起作用，但我不确定，也不知道如何解决这个问题。

请帮帮我。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T13:33:29.010

CakePHP 使用控制器名称单数变体来匹配模型，类别的单数**是**category **，**而不是**categorie**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T13:52:51.843

正如@ndm 所说，您应该使用 CakePHP 约定。你的表应该被称为`categories`，那么你的模型应该是这样的：

```
class Category extends AppModel{

} 
```

然后你可以将它包含在：

```
$this->loadModel('Category'); 
```

在 CategoriesController 上，您可以像这样使用它：

```
class CategoriesController extends AppController {
    public function index(){
        $this->set('list', $this->Category->find('all'));
    }
} 
```

如果您想以其他方式命名您的表，您可以使用`$useTable`控制器中的变量来指定模型将使用的表的名称。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T15:13:58.393

您还可以使用控制器的[$uses](http://book.cakephp.org/2.0/en/controllers.html#Controller%3a%3a%24uses)属性：

```
public $uses = array('Categorie'); 
```

# sql-server-2008 - 使用存储过程的 SQL 中的逗号分隔值

> ID：13801319
> 
> 赞同：0
> 
> 时间：2012-12-10T12:50:30.540
> 
> 标签：sql-server-2008, stored-procedures

我目前拥有的是：

```
COUNT DETAILS:
CNT DTLID      COUNT           TOTAL QTY        UNITPRICE            AMOUNT
1              234                 2222           1.20                 32
1              12                   123           2                     21

What i want it to be like
CNT DTLID      COUNT           TOTAL QTY         UNITPRICE            AMOUNT
1              234,12          2222 , 123        1.20,2               32 + 21 = 53 
```

我想有逗号分隔的值，也想对金额列使用分组子句。

目前我要做的是：

```
 ALTER PROCEDURE [dbo].[sp_Tbl_CountDetail_SelectAll]
    -- Add the parameters for the stored procedure here

AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.

    select * from Tbl_CountDetail 
    inner join tbl_Contract
    on
    tbl_CountDetail.ContractID = tbl_Contract.ContractID
    inner join tbl_Count
    on
    tbl_CountDetail.CountID = tbl_Count.CountID
    where tbl_CountDetail.isDeleted = 0
    and tbl_Contract.isdeleted = 0
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:09:46.450

可以做这样的事情......

```
DECLARE @VALUES NVARCHAR(1000),@UnitPrice nvarchar(100)
SELECT @VALUES = COALESCE(@VALUES + ',','') + CAST(COUNTQty AS NVARCHAR(50)),
@UnitPrice = COALESCE(@UnitPrice + ',','') + CAST(UnitPrice AS NVARCHAR(50)) FROM tableName
SELECT @VALUES as [CountQty],@Ids as [UnitPrice] 
```

没有按价格问题检查组..!!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:06:00.263

一些友好的示例数据

```
create table #CountDetails
(
DTLID int,
CNT int,
Qty int,
UnitPrice money,
Amount int
)

insert into #CountDetails
SELECT
1, 234, 2222, 1.20, 32
UNION ALL SELECT
1, 12, 123, 2, 21 
```

这是一些代码

```
SELECT 
    DTLIDs.DTLID,

    CNTs =
        ISNULL(
            STUFF(
                (
                    select ',' + 
                        cast(CD.cnt as varchar(50))
                    from #CountDetails CD
                    where CD.DTLID = DTLIDs.DTLID
                    order by CD.CNT
                    FOR XML PATH('')
                ),
                1, 1, ''  --removes the leading ','
            ),
            ''
        ),

    QTYs =
        ISNULL(
            STUFF(
                (
                    select ',' + 
                        cast(CD.qty as varchar(50))
                    from #CountDetails CD
                    where CD.DTLID = DTLIDs.DTLID
                    order by CD.Qty
                    FOR XML PATH('')
                ),
                1, 1, ''  --removes the leading ','
            ),
            ''
        ),

    UnitPrices =
        ISNULL(
            STUFF(
                (
                    select ',' + 
                        cast(CD.UnitPrice as varchar(50))
                    from #CountDetails CD
                    where CD.DTLID = DTLIDs.DTLID
                    order by CD.UnitPrice
                    FOR XML PATH('')
                ),
                1, 1, ''  --removes the leading ','
            ),
            ''
        ),

    AmountSum =
    (
        select SUM(Amount) from #CountDetails CD
        where CD.DTLID = DTLIDs.DTLID
    )

from (
    select distinct DTLID from #CountDetails
    ) DTLIDs 
```

有多种方法可以对此进行调整。例如，“AmountSum =”嵌套查询代码是在一个组上完成的——我只是喜欢考虑到查询其余部分的结构方式更一致的外观。

对于 CSV 列表，您没有指定要如何排序。我已按值排序（例如 ORDER BY CD.CNT），但您可以将其更改为按您想要的任何顺序。同样，CSV 值之间也没有空格。您可以通过更改 select ',' 来调整它，以便在其中有一个空格和 STUFF 命令的参数（将第二个 1 更改为 2）。

基本上 FOR XML PATH('') 位采用其给定的迷你结果集并返回一些没有 XML 文字的文本（由于 ''）。这是使用 STUFF 整理的，以删除 XML PATH 结果开头的前导 , 。

希望这可以帮助！:)

# ms-access - 查询或表刷新

> ID：13801328
> 
> 赞同：0
> 
> 时间：2012-12-10T12:50:49.533
> 
> 标签：ms-access

我已经通过选择我要刷新的表或查询然后记录>刷新来帮助访问刷新表或查询的功能。没有什么是令人耳目一新的我必须关闭表或查询然后重新查看更新。我确定这是一个简单的解决方案，但我还看不到它。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:59:49.563

刷新仅刷新当前数据集中显示的记录，即对您已经查询的基础记录的任何更改。它不会显示新记录或已删除记录。这无论如何都会自动发生（在工具/选项的高级选项卡中刷新间隔）。

您将 Refresh 与 Re-Query 混淆了

# javascript - 如何在提交表单之前检查所有单选按钮/复选框

> ID：13801329
> 
> 赞同：1
> 
> 时间：2012-12-10T12:50:50.147
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3

我曾经`form_tag`构建一个表单，显示问题和答案供用户检查。这是我的表格：

```
<%= form_tag({ controller: 'exams', action: 'check_results' }, authenticity_token: true) do %>
  <ol class="questions">
    <% @questions.each do |question| %>
  <li class="content_question"><%= kramdown question.content %></li>

  <ol class="answers">
    <% question.answers.shuffle.each do |answer| %>
      <table class="answer_contents">
        <tbody>
      <tr>
        <% if question.question_type.shorcut == 'MC' %>
          <td><%= check_box_tag "user_answer_ids[#{question.id}][]", answer.id, false, id: "user_answer_ids_#{answer.id}" %></td>
          <td><li></li></td>
          <td><%= label_tag "user_answer_ids_#{answer.id}", kramdown(answer.content) %></td>
        <% else %>
          <td><%= radio_button_tag "user_answer_ids[#{question.id}][]", answer.id, false, id: "user_answer_ids_#{answer.id}" %></td>
          <td><li></li></td>
          <td><%= label_tag "user_answer_ids_#{answer.id}", kramdown(answer.content) %></td>
        <% end %>
      </tr>
       </tbody>
      </table>
    <% end %> <%# question.answers %>
  </ol> <%# ol.answers %>
  <br>
   <% end %> <%# @questions %>
   </ol> <%# ol.questions %>
  <%= submit_tag "Finish Exam", disable_with: "Checking results...", confirm: "Are you sure?", class: "btn btn-primary" %>
<% end %> <%# form_tag %> 
```

我想检查用户是否忘记检查某些问题，当他们按下提交时，它会提醒用户检查错过的问题。任何人都可以帮助/指导我如何使用 javascript 或 jquery 做到这一点？谢谢。

**生成的 HTML 代码**

这是一个问题及其答案的 html，带有单选。使用复选框，它具有不同的 is，具有更多`table`元素，并且`type`in `input`is **checkbox**而不是**radio**。

```
<li class="content_question"><p>What is the term used to describe a framework of the phase involved in developing information systems?</p>
</li>
<ol class="answers">
  <table class="answer_contents">
    <tbody>
      <tr>
        <td><input id="user_answer_ids_663" name="user_answer_ids[186][]" type="radio" value="663"></td>
        <td><li></li></td>
        <td><label for="user_answer_ids_663"><p>systems development life cycle (t)</p></label></td>
      </tr>
    </tbody>
  </table>
  <table class="answer_contents">
    <tbody>
      <tr>
        <td><input id="user_answer_ids_664" name="user_answer_ids[186][]" type="radio" value="664"></td>
        <td><li></li></td>
        <td><label for="user_answer_ids_664"><p>extreme programing</p></label></td>
      </tr>
    </tbody>
  </table>
  <table class="answer_contents">
    <tbody>
      <tr>
        <td><input id="user_answer_ids_665" name="user_answer_ids[186][]" type="radio" value="665"></td>
        <td><li></li></td>
        <td><label for="user_answer_ids_665"><p>rapid application development</p></label></td>
      </tr>
    </tbody>
  </table>
  <table class="answer_contents">
    <tbody>
      <tr>
        <td><input id="user_answer_ids_666" name="user_answer_ids[186][]" type="radio" value="666"></td>
        <td><li></li></td>
        <td><label for="user_answer_ids_666"><p>predictive life cycle</p></label></td>
      </tr>
    </tbody>
  </table>
</ol> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:11:52.733

下面的示例为表单`myForm`的提交事件添加了一个处理程序，因此您需要为表单提供 ID `myForm`。这将检查每个问题是否已检查其中一个可能的答案。它适用于收音机和复选框答案。如果验证失败，它会提醒缺少答案的问题列表，然后阻止表单提交。

```
$(document).ready(function(){
    $('#myForm').submit(function(){

        var errors = [];

        $('.content_question').each(function(){

            var answerCont = $(this).next();
            var inputs = $(answerCont).find('input[type=radio], input[type=checkbox]');

            if(inputs.length > 0)
            {
                var groupChecked = false;

                $(inputs).each(function(){
                    if($(this).is(':checked'))
                    {
                        groupChecked = true;
                    }
                });

                if(!groupChecked)
                {
                    errors.push($(this).text().trim());
                }
            }
        });

        if(errors.length > 0)
        {
            var errorMessage = "You missed " + errors.length + " questions: \n\n";

            for(var i=0; i<errors.length; i++)
            {
                errorMessage += errors[i] + "\n";
            }
            alert(errorMessage);
            return false;
        }
    });
}); 
```

# c++ - 在 Photon Cloud 上使用 Hashtable 发送数据

> ID：13801332
> 
> 赞同：1
> 
> 时间：2012-12-10T12:50:59.840
> 
> 标签：c++, cloud, marmalade, photon

我正在尝试在光子云上使用 Hashtable 发送数据，我确实收到了带有正确 eventCode 的数据，但是键值对返回了一些随机数。我的代码在发送数据时是这样的：-

```
void NetworkLogic::sendEvent(void)
{
    ExitGames::Common::Hashtable* table =new ExitGames::Common::Hashtable;
        table->put<int,int>(4,21);
        const ExitGames::Common::Hashtable temp = (const ExitGames::Common::Hashtable)*table;//= new ExitGames::Common::Hashtable;
        mLoadBalancingClient.opRaiseEvent(false, temp, 100);
} 
```

在接收数据时，代码是这样的：-

```
void NetworkLogic::customEventAction(int playerNr, nByte eventCode, const ExitGames::Common::Hashtable& eventContent)
{
    // you do not receive your own events, unless you specify yourself as one of the receivers explicitly, so you must start 2 clients, to receive the events, which you have sent, as sendEvent() uses the default receivers of opRaiseEvent() (all players in same room like the sender, except the sender itself)
    PhotonPeer_sendDebugOutput(&mLoadBalancingClient, DEBUG_LEVEL_ALL, L"");
    cout<<((int)(eventContent.getValue(4)));
} 
```

我在控制台上打印的是一些随机值或 int，而它应该是 21。我在这里做错了什么？

**编辑：**
当`customEventAction()`我使用以下语句时：

```
cout<<eventContent.getValue(4)->getType()<<endl;
cout<<"Event code = "<<eventCode<<endl; 
```

我得到以下输出：

```
i
Event code = d 
```

我搜索并发现它`'i'`的值`EG_INTEGER`意味着我发送的值被正确接收。我只是无法将其转换回`int`. 为什么事件代码是这样的`'d'`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:25:06.723

```
eventContent.getValue(4) 
```

返回一个对象。您不能简单地将 Object 转换为 int，而必须访问其中的 int 值：

```
if(eventContent.getValue(4))
            myInt = ExitGames::Common::ValueObject<int>(eventContent.getValue(4)).getDataCopy();
cout << myInt; 
```

# xml - Window phone 如何将我的应用程序中的 xml 数据保存到服务器上的数据库中？

> ID：13801344
> 
> 赞同：0
> 
> 时间：2012-12-10T12:51:27.470
> 
> 标签：xml, json, sqlite, windows-phone-7, windows-mobile

Window phone 如何将可能应用程序中的 xml 数据保存到服务器上的数据库中？

我将手机上的数据保存在 xml 中，当有网络时，我需要将数据发送到服务器并保存到数据库中。

如何将xml中的数据传输到服务器？如何添加到数据库？

Windows phone 7.1 芒果操作系统

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:32:56.577

如果您想直接从您的移动设备写入数据库，Windows phone 无法建立这样的网络连接。您应该使用 Web 服务（如 WCF）将您的 XML 传输到服务器，然后将其保存到数据库中。

# java - 我已经实现了选择排序作为选项 1，但我还想实现冒泡排序作为对 txt 文件进行排序的第二个选项

> ID：13801353
> 
> 赞同：0
> 
> 时间：2012-12-10T12:51:58.847
> 
> 标签：java, sorting

我想实现冒泡排序作为对 TXT 文件进行排序的第二个选项。任何解决方案将不胜感激。这是我到目前为止所做的。我已经能够正确正确地初始化选择排序，但无法初始化冒泡排序以使其工作。

```
import java.util.Scanner;
  import java.io.*;

 public class ArraySort1 {

 public static void main(String[] args) throws IOException {
  Scanner inputFile; 
  inputFile = new Scanner(new File("arrayex1.txt"));
  PrintWriter outputFile;
outputFile = new PrintWriter(new FileWriter("sorted.txt"));

      /* Declare the array */

int[] numbers = new int[50];
int index = 0;

      int temp, smallest, smallest_index;

      /* Read the first number */
      numbers[index] = inputFile.nextInt();

      while(inputFile.hasNextInt()) {
        numbers[index] = inputFile.nextInt();
        index++;
        }
// Local variable
int swValue;

// Display menu graphics
System.out.println("============================");
System.out.println("|   MENU SELECTION DEMO    |");
System.out.println("============================");
System.out.println("| Options:                 |");
System.out.println("|        1\. Selection Sort |");
System.out.println("|        2\.  Bubble Sort   |");
System.out.println("|        3\. Exit           |");
System.out.println("============================");
swValue = Keyin.inInt(" Select option: ");

// Switch construct
switch (swValue) {
case 1:
  System.out.println(" Selection Sort Starting....");
  for (int i = 0; i < index - 1; i++) {

      smallest = numbers[i];
      smallest_index = i;

      for (int j = i + 1; j < index; j++) {

        if (numbers[j] < smallest) { 
              smallest = numbers[j];
              smallest_index = j;
          }
      }

      /* If needed switch numbers[i] and numbers[smallest_index] */

      if (numbers[i] != numbers[smallest_index]) {

          temp = numbers[i];
          numbers[i] = numbers[smallest_index];
          numbers[smallest_index] = temp;
      }
  }
  for (int i = 0; i < index; i++) {          
    System.out.print (numbers[i] + " ");
          outputFile.print (numbers[i] + " ");
      }

      inputFile.close();
      outputFile.close();

  break;
case 2:
int i = 0, t=0;
    boolean swapped = true;

    while(swapped){

    swapped = false;

    for(int i1 = 0; i1 < index  - 1; i1++){
        smallest = numbers[i1];
        smallest_index = i1;

    if(numbers[i1] > numbers[i1 + 1]){
    swapped = true;
    int tmp = numbers[i1];
    numbers[i1] = numbers[i1 + 1];
    numbers[i1 + 1] = tmp;
    } 
    } 

    for(int i1 = 0; i < numbers.length; i++){
    System.out.print(numbers[i] + "\t");
    } 
    System.out.println();

    }

 //2 System.out.println("Bubble Sort Sorting 2 selected");

  break;
case 3:
  System.out.println("Exit selected");
  break;
default:
  System.out.println("Invalid selection");
  break; // This break is not really necessary
}
}

} 
```

# java - 错误 - android.inputmethodservice.KeyboardView 无法实例化

> ID：13801354
> 
> 赞同：2
> 
> 时间：2012-12-10T12:52:01.133
> 
> 标签：java, android, xml

这是我的软键盘 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<android.inputmethodservice.KeyboardView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/keyboard"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >       
</android.inputmethodservice.KeyboardView> 
```

这是应用程序运行良好。当我尝试将其他资源添加到 xml 文件（我想添加到键盘资源），如 LinearLayout、FrameView、VideoView（任何资源）时，我会遇到下一个错误：

```
android.inputmethodservice.KeyboardView failed to instantiate.

android.content.res.Resources$NotFoundException: Resource ID #0x10d000e type #0x3 is not valid
    at android.content.res.Resources.getBoolean(Resources.java:679)
    at android.inputmethodservice.KeyboardView.<init>(KeyboardView.java:363)
    at android.inputmethodservice.KeyboardView.<init>(KeyboardView.java:270)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.instantiateClass(ProjectCallback.java:402)
    at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.loadView(ProjectCallback.java:166)
    at com.android.layoutlib.bridge.android.BridgeInflater.loadCustomView(BridgeInflater.java:205)
    at com.android.layoutlib.bridge.android.BridgeInflater.createViewFromTag(BridgeInflater.java:133)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:386)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:296)
    at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:279)
    at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:318)
    at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1638)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1389)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:1163)
    at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.delegatePageChange(LayoutEditorDelegate.java:674)
    at com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor.pageChange(CommonXmlEditor.java:360)
    at org.eclipse.ui.part.MultiPageEditorPart$2.widgetSelected(MultiPageEditorPart.java:292)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1077)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1062)
    at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:774)
    at org.eclipse.swt.custom.CTabFolder.setSelection(CTabFolder.java:3023)
    at org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1730)
    at org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:270)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1022)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:916)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:585)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:540)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414) 
```

问题是什么？

# spring - 注解指定的 bean 名称与现有的、不兼容的 bean def 冲突

> ID：13801359
> 
> 赞同：76
> 
> 时间：2012-12-10T12:52:17.843
> 
> 标签：spring, repository

我遇到了一些 Spring bean 定义的问题。我的 main() 方法正在加载几个上下文 xml 文件，它们几乎都包含一个标签。当我的 main 方法启动时，我从 Spring 收到此错误：

```
Caused by: org.springframework.context.annotation.ConflictingBeanDefinitionException: Annotation-specified bean name 'converterDAO' for bean class [my.package.InMemoryConverterDaoImpl] conflicts with existing, non-compatible bean definition of same name and class [my.other.package.StaticConverterDAOImpl] 
```

两个 DAO 类都以这种方式注释：

```
@Repository("converterDAO")
public class StaticConverterDAOImpl implements ConverterDAO {
...
} 
```

内存中的 dao 也有 @Repository("converterDAO") 注解。dao 在其他类中被引用，如下所示：

```
...
private @Autowired @Qualifier("converterDAO") ConverterDAO converterDAO;
... 
```

我希望一个 DAO 覆盖另一个 DAO 的定义，正如我一直理解的那样，这是首先使用 DI 框架的主要原因之一。多年来，我一直在使用 xml 定义来执行此操作，并且从未遇到任何问题。但组件扫描和带注释的 bean 定义不是这样吗？Spring 说它们不“兼容”是什么意思？它们实现了相同的接口，并且它们被自动装配到该接口类型的字段中。为什么他们不兼容？

有人可以为我提供一种方法，让一个带注释的组件扫描 bean 覆盖另一个吗？

-麦克风

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2016-04-24T03:11:12.233

我在使用 @RestController 的 Spring 4.x 中遇到了类似的问题。两个不同的包有一个同名的类......

```
package com.x.catalog

@RestController
public class TextureController {
...

package com.x.cms
@RestController
public class TextureController {
... 
```

修复很简单...

```
package com.x.catalog

@RestController("CatalogTextureController")
public class TextureController {
...

package com.x.cms
@RestController("CMSTextureController")
public class TextureController {
... 
```

问题似乎是注释被自动装配并默认采用类名。在 @RestController 注释中给它一个显式名称允许您保留类名。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-12-10T20:59:40.640

在 XML 文件中，有一系列声明，您可以用新的定义覆盖以前的定义。使用注释时，没有*before*或*after*的概念。所有的豆子都处于同一水平。您定义了两个具有相同名称的 bean，而 Spring 不知道应该选择哪一个。

给它们一个不同的名称（*staticConverterDAO*，例如*inMemoryConverterDAO*），在 Spring XML 文件中创建一个别名（例如*theConverterDAO*），并在注入转换器时使用这个别名：

```
@Autowired @Qualifier("theConverterDAO") 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2014-01-30T08:46:30.947

我有一个类似的问题，在一个项目中有两个 jar 库（app1 和 app2）。bean "BeanName" 在 app1 中定义并在 app2 中扩展，并且重新定义了同名的 bean。

在 app1 中：

```
package com.foo.app1.pkg1;

@Component("BeanName")
public class Class1 { ... } 
```

在 app2 中：

```
package com.foo.app2.pkg2;

@Component("BeanName")
public class Class2 extends Class1 { ... } 
```

`ConflictingBeanDefinitionException`由于相同的组件 bean 名称，这会导致applicationContext 的加载异常。

为了解决这个问题，在 Spring 配置文件中`applicationContext.xml`：

```
 <context:component-scan base-package="com.foo.app2.pkg2"/>
    <context:component-scan base-package="com.foo.app1.pkg1">
        <context:exclude-filter type="assignable" expression="com.foo.app1.pkg1.Class1"/>
    </context:component-scan> 
```

因此 Class1 被排除在自动组件扫描并分配给 bean 的情况下，避免了名称冲突。

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2018-06-12T19:32:00.127

我遇到了类似的问题，这是因为我的一个 bean 最近被移到了另一个目录。我需要通过删除目录来进行“构建清理”，`build/classes/java`问题就消失了。（错误消息中有两个不同的文件路径相互冲突，尽管我知道一个实际上不应该存在了。）

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2019-05-03T11:27:57.040

有时，如果您移动了类并且它指的是旧类，即使它们不存在，有时也会出现问题。

在这种情况下，只需这样做：

```
mvn eclipse:clean

mvn eclipse:eclipse 
```

这对我来说效果很好。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2020-11-26T13:20:06.233

我遇到过同样的问题。我通过使用以下步骤解决了它（编辑：***IntelliJ***）：

1.  查看 -> 工具窗口 -> Maven 项目。在子窗口中打开您的项目。
2.  单击项目旁边的箭头。
3.  单击生命周期。
4.  点击清洁。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-07-12T06:08:35.987

我也有类似的问题。我再次构建了项目，问题得到了解决。

原因是，在一个文件中已经为 Annotation-specified bean 名称定义了序列。当我们对该 bean 名称进行更改并尝试运行应用程序时，Spring 无法确定选择哪一个。这就是它显示此错误的原因。

在我的例子中，我从项目中删除了以前的 bean 类，并将相同的 bean 名称添加到一个新的 bean 类中。因此 Spring 在文件中具有先前对已删除 bean 类的定义，并且在编译时与新添加的类冲突。所以如果你做一个'build clean'，之前对bean类的定义将被删除并且编译会成功。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-04-02T13:25:35.650

如果其他答案都没有解决您的问题，并且在直接或间接更改任何配置（通过 git pull/merge/rebase）后开始发生，并且您的项目是 Maven 项目：

```
mvn clean 
```

希望这可以解决您的问题。或某人

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-05-10T04:36:21.080

**解释内部处理此错误**

您收到此错误是因为在实例化后容器试图将相同的对象分配给两个类，因为无论不同的包如何，类名都是相同的......这就是为什么错误说同名的不兼容 bean 定义..

实际上它内部的工作方式是--->>>>。

包测试1；…… @RestController 类测试{}

包测试2；…… @RestController 类测试{}

第一个容器将获得类 Test 并且 @RestController 指示它实例化为…test = new Test(); 并且它不会实例化两次在实例化容器后，将为两个类提供一个引用变量 test（与类名相同），同时它为第二个类提供测试引用，它得到不兼容的同名 bean 定义......</p>

解决办法——>>>>

为两个休息控制器分配一个参考名称，以便容器不会使用默认名称实例化并为两个类单独实例化，而不管同名

例如——>>>

包测试1；…… **@RestController(“test1”)** 类测试{}

包测试2；…… **@RestController(“test2”)** 类测试{}

**注意**：同样适用于@Controller、@Service、@Repository 等。

**注意**：如果您在类级别创建引用变量，那么您还可以使用 @Qualifier("specific refrence name") 对其进行注释，例如 @Autowired @Qualifier("test1") Test test;

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2022-01-15T13:40:59.077

在将现有文件移动到新包后，我在**IntelliJ**上遇到了同样的问题，解决了清理缓存，当尝试使用 maven 运行时遇到了该错误。我设法解决了它：

`cache:clean`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-05-18T08:22:33.173

# 设想：

我正在开发一个多模块 Gradle 项目。

**模块是：**

```
- core, 
- service,
- geo,
- report,
- util and
- some other modules. 
```

所以主要我们在**geo**模块中准备了一个 Component[ **locationRecommendHttpClientBuilder** ] 。

 **# Java 代码：

```
import org.springframework.stereotype.Component

@Component("locationRecommendHttpClientBuilder")
class LocationRecommendHttpClientBuilder extends PanaromaHttpClientBuilder {
    @Override
    PanaromaHttpClient buildFromConfiguration() {
        this.setURL(PanaromaConf.getInstance().getString("locationrecommend.url"))
        this.setMethod(PanaromaConf.getInstance().getString("locationrecommend.method"))
        this.setProxyHost(PanaromaConf.getInstance().getString("locationrecommend.proxy.host"))
        this.setProxyPort(PanaromaConf.getInstance().getInt("locationrecommend.proxy.port", 0))
        return super.build()
    }
} 
```

# 应用程序上下文.xml

```
<bean id="locationRecommendHttpClient"
      class="au.co.google.panaroma.platform.logic.impl.PanaromaHttpClient"
      scope="singleton" factory-bean="locationRecommendHttpClientBuilder"
      factory-method="buildFromConfiguration" /> 
```

然后决定将该组件添加到**核心**模块中。

一位工程师以前有**地理**模块的代码，然后他采用了最新的**核心**模块，但他忘记了采用最新的**地理**模块。

所以组件[ **locationRecommendHttpClientBuilder** ] 在他的项目中是双倍的，他得到了以下错误。

> `Caused by: org.springframework.context.annotation.ConflictingBeanDefinitionException: Annotation-specified bean name 'LocationRecommendHttpClientBuilder' for bean class [au.co.google.app.locationrecommendation.builder.LocationRecommendHttpClientBuilder] conflicts with existing, non-compatible bean definition of same name and class [au.co.google.panaroma.platform.logic.impl.locationRecommendHttpClientBuilder]`

# 解决程序：

从**geo**模块中移除组件后，component[ **locationRecommendHttpClientBuilder** ] 仅在**核心**模块中可用。所以不存在冲突的情况。问题通过这种方式解决。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-08-31T20:16:41.953

当我在工作区中导入两个项目时，我遇到了这个问题。它以某种方式创建了一个不同的 jar，因此我们可以删除 jar 和类文件并再次构建项目以获取正确的依赖关系。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-05-05T13:29:49.410

使用 Eclipse，我已将类移动到新包中，并收到此错误。对我有用的是： *项目>清洁*

并通过右键单击它并选择*清理来清理我的 TomCat 服务器*

感谢 Rock Lee 的回答帮助我解决了这个问题 :)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-02-10T06:22:31.297

就我而言，问题出在 pom.xml 中，我在我的应用程序 pom.xml 中为两个不同的包添加了依赖项，这些包反映了相同的类名。

检查您的 pom.xml 或注释，它们可能是同一类的可能注入点。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2020-11-16T13:33:46.623

在 Eclipse 上刷新 gradle 项目为我解决了这个问题**

# jvm - JDK原生代码实现

> ID：13801364
> 
> 赞同：2
> 
> 时间：2012-12-10T12:53:02.883
> 
> 标签：jvm, java-native-interface, native, java

我想知道是否可以获得JDK方法的Native Code实现，例如：

```
public final class System {

/* First thing---register the natives */
private static native void registerNatives();
...
....} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:01:38.297

搜索 OpenJDK 源代码（它是开源的）或任何其他开源 Java 实现，您可以找到这些实现。

例如[System 类源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/lang/System.java?av=f)（获取[完整的 OpenJDK 源代码](http://download.java.net/openjdk/jdk7/)可能比这个“网络视图”更方便）。

注意：`registerNatives()`正在使用本机（C/C++？）代码，因此您需要跟踪它（例如从完整的源代码）。或您感兴趣的任何其他实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:04:25.750

以上部分代码不足以实现native方法，详细资料可以参考 [http://www.javaworld.com/javatips/jw-javatip23.html](http://www.javaworld.com/javatips/jw-javatip23.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T13:16:02.333

所有这些都可以从 OpenJDK Mercurial 存储库 Web 视图中获得，但要追踪它绝非易事。

[这是`java.lang.System`](http://hg.openjdk.java.net/jdk7u/jdk7u/jdk/file/fdd0d43ba0f9/src/share/native/java/lang/System.c)JDK 7 更新流的最新开发版本中的本地代码的链接。希望你能从那里找到自己的路。

# java - 在java webmethods中关闭下载窗口后无法重定向

> ID：13801365
> 
> 赞同：1
> 
> 时间：2012-12-10T12:53:04.657
> 
> 标签：java, redirect, webmethods

在我的 Java Web 方法应用程序中，我正在选择一个文件并下载它。当下载窗口关闭时，我将控件定向回父页面。我通过创建一个`IPortletURL`调用来实现它，将`BasePortletPageBean.createRenderURL()`它的基本 URL 设置为我想要重定向的 portlet 的别名。然后调用`FacesContext`重定向方法。它在 Web 方法 8.0 中运行良好，我在 Windows XP 机器上开发了它。现在我将相同的项目导入到安装了 Windows 7 的 web 方法 8.2 机器，但现在它不工作了。请帮助我。

```
 public String downloadMaster() {

    List<Object> selectedRows = getFnamesProvider2().getSelectedRows();

    if (getFnamesProvider2().getSelectedRows() != null
            && getFnamesProvider2().getSelectedRows().size() != 0) {

        for (Iterator iterator = selectedRows.iterator(); iterator
                .hasNext();) {

            com.webmethods.caf.FileNames details = (com.webmethods.caf.FileNames) iterator
                    .next();

            System.out.println("Iterator Output!!!!!!!!!!!!!!!!!!!!!!!"
                    + details.toString());
            FileInputStream fileInputStream = null;
            OutputStream out = null;
            try {

                String filename = "C:/SoftwareAG/MWS/Projects/"
                        + getProjName() + "/"
                        + session.getAttribute("folder").toString()
                        + "/search/" + details.getFileName();

                if (response == null) {
                    response = PortalServlet.getCurrentResponse();
                    setResponse(response);
                }
                if (response.getContentType() == null
                        || (!(response.getContentType()
                                .equalsIgnoreCase("APPLICATION/DOWNLOAD")))) {
                    if (response == null) {
                        response = PortalServlet.getCurrentResponse();
                    }
                    getResponse().setContentType("APPLICATION/DOWNLOAD");
                }
                response.setHeader("Content-Disposition", "attachment"
                        + "filename=" + details.getFileName());

                File fileToDownload = new File(filename);

                fileInputStream = new FileInputStream(fileToDownload);
                response.setContentLength(fileInputStream.available());
                out = response.getOutputStream();
                response.setHeader("Content-Disposition",
                        "attachment;filename=" + details.getFileName());

                int i;
                while ((i = fileInputStream.read()) != -1) {
                    out.write(i);
                }
                fileInputStream.close();
                out.close();

                List<Object> selRows = getFnamesProvider2()
                        .getSelectedRows();

            } catch (Exception e) // file IO errors
            {
                e.printStackTrace();
            } finally {

                try {

                    IPortletURL renderURL = createRenderUrl();

                    renderURL.setBaseURL("/kneipp.NewProject");
                    System.out.println("::::::renderURL::::::" + renderURL);

                    getFacesContext().getExternalContext().redirect(
                            renderURL.toString());

                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }

        }
    }

    return OUTCOME_OK;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:38:38.320

确保您始终使用完整路径，Webmethods 8.2 也需要 url 或任何资源（如图像）的完整路径。这可能是您的问题的原因。

# android - 将 webview 的当前显示捕获到位图

> ID：13801367
> 
> 赞同：1
> 
> 时间：2012-12-10T12:53:13.600
> 
> 标签：android

我有一个 webview ，它会加载一个大的 html 文件。webview 是可滚动的，用户可以通过滚动查看其余页面。当用户向下滚动页面时，有时我想获取 webview 的位图图像（当前用户正在查看），而不是整个页面的图像。我知道 webView.capturePicture() 可以创建图片，但它提供了整个网页的图像。我尝试了下面的代码片段，但它给了我 html 文件的起始页的图像，即使用户已经向下滚动页面很多次。

```
 WebView webView = new WebView(getApplicationContext());

    webView.setVerticalScrollBarEnabled(true);
    webView.setHorizontalScrollBarEnabled(false);
    webView.getSettings().setBuiltInZoomControls(false);
    webView.getSettings().setUseWideViewPort(false);
    webView.getSettings().setLayoutAlgorithm(LayoutAlgorithm.NARROW_COLUMNS);
    webView.getSettings().setDefaultZoom(ZoomDensity.MEDIUM);
    webView.setWebViewClient(new WebViewClient(){
        @Override
        public void onPageFinished(WebView view, String url) {
            // TODO Auto-generated method stub
            super.onPageFinished(view, url);
            //pageFinished = true;
        }
    });
    webView.getSettings().setJavaScriptEnabled(true);
    webView.setWebChromeClient(new WebChromeClient());
    webView.loadUrl("file://"+Environment.getExternalStorageDirectory() + "/main.html"); 
```

在按钮的 onClick() 中，我使用以下代码获取 webview 的快照：

```
 try {
        Bitmap bitmap = Bitmap.createBitmap(webView.getWidth(), webView.getHeight(),
                Config.ARGB_8888);
            Canvas canvas = new Canvas(bitmap);

            webView.draw(canvas);
            FileOutputStream out = new FileOutputStream(
                            Environment.getExternalStorageDirectory()
                                    + "/out.png");
            bitmap.compress(Bitmap.CompressFormat.PNG, 100, out); // saving bitmap
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

任何帮助表示赞赏。

在此先感谢， 苏吉

# android - Android webview 固定背景

> ID：13801368
> 
> 赞同：1
> 
> 时间：2012-12-10T12:53:16.980
> 
> 标签：android, css, webview

我非常努力地在 webview 中有一个固定的背景。

首先我尝试使用 CSS，但我发现 background-attachment:fixed 在 android 中不起作用，至少到 4 （不知道新版本）。

另一种选择是拥有一个android也不支持的可滚动DIV。

我没有尝试 iscroll 来解决这个问题，但之前在其他地方使用过，并不满意。我不知道是否可以使用 iframe。

另一个选项是使用 android 设置背景。我对此进行了很多阅读并尝试了很多事情，例如使用带有背景的容器布局并将 webview 背景设置为透明。

它在 2.2 中工作有延迟，在 4 中它根本没有工作。

我厌倦了浪费很多时间来完成这件小事。

你有其他想法来实现这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:23:03.517

我终于找到了解决方案：

这就是你的做法：

首先使您的项目基于 11，但在 AndroidManifest 中将 minSdkVersion 设置为 8

```
wv.setBackgroundColor(0x00000000);
if (Build.VERSION.SDK_INT >= 11) wv.setLayerType(WebView.LAYER_TYPE_SOFTWARE, null);

this.wv.setWebViewClient(new WebViewClient()
{
    @Override
    public void onPageFinished(WebView view, String url)
    {
        wv.setBackgroundColor(0x00000000);
        if (Build.VERSION.SDK_INT >= 11) wv.setLayerType(WebView.LAYER_TYPE_SOFTWARE, null);
    }
}); 
```

为了安全起见，请按照您的风格：

```
BODY, HTML {background: transparent} 
```

在 2.2 和 4 上为我工作

# elasticsearch - ElasticSearch：基于数组值的查询

> ID：13801376
> 
> 赞同：0
> 
> 时间：2012-12-10T12:54:01.957
> 
> 标签：elasticsearch

需要一些帮助。我需要根据数组的内部值查询文档。

```
{id:1 , version:[1],…} 
{id:1 , version:[2],….} 
{id:2 , version:[1,2],…} 
```

我需要进行分面搜索并根据版本值进行查询。例如，如果我查询版本 1，我应该得到：

```
{id:1 , version:[1],…} 
{id:2 , version:[1,2],…} 
```

例如，如果我查询版本 2，我应该得到：

```
{id:1 , version:[2],….} 
{id:2 , version:[1,2],…} 
```

请帮忙，卡兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:31:44.863

如果版本的数据类型映射为字符串，这将很有帮助

```
curl -XGET 'localhost:9200/<index_name>/<type_name>/_search?pretty=1' -d '
{
  "query":
  {
     "query_string":{"query":"1*","fields":["version"]}
  },
  "facets":{"version_facet":{"terms":{"field":"version"}}}
}' 
```

# xml - 带有 XML 参数的 NHibernate 存储过程

> ID：13801377
> 
> 赞同：2
> 
> 时间：2012-12-10T12:54:09.430
> 
> 标签：xml, nhibernate

我想我要疯了：这是一个相当简单的场景，应该记录在案，但是......不！

这是我的存储过程声明：

```
CREATE PROCEDURE [dbo].[spImport]
(
    @xmlDocument AS XML
)
AS
---
GO 
```

这是我的映射：

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="XXX"
                   namespace="XXX.Entities">
    <sql-query name="spImport">
        <![CDATA[EXEC [dbo].[spImport] @xmlDocument = :xmlDocument]]>
    </sql-query>
</hibernate-mapping> 
```

这是调用方法：

```
session.GetNamedQuery("spImport").SetParameter("xmlDocument", document, NHibernateUtil.XmlDoc).ExecuteUpdate(); 
```

现在，我收到以下错误：

> 在准备 EXEC [dbo].[spImport] @xmlDocument = @p0 时发生错误 InnerException：SqlCommand.Prepare 方法要求所有可变长度参数具有显式设置的非零大小。

谢谢你的帮助，斯特凡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:02:25.993

从来没有花时间真正解决 XmlType 长度问题。会对“干净”的答案感兴趣。无论如何，这是我的解决方法：

我假设您使用的是 NHibernateUtil.XmlDoc: IUserType。

作为 SqlTypes 实现，我有：

```
 public SqlType[] SqlTypes
    {
        get 
        {
            return new SqlType[] { new SqlXmlType() };
        }
    } 
```

其中 SqlXmlType 是：

```
 public class SqlXmlType : SqlType
    {
        public SqlXmlType() : base(System.Data.DbType.Xml,5000000)
        {
        }

    } 
```

允许我处理多达 5 个 Mo XmlDocs

希望这会有所帮助

# mysql - 我的 SQL 查询有什么问题？（没有得到想要的o / p）

> ID：13801384
> 
> 赞同：0
> 
> 时间：2012-12-10T12:54:43.673
> 
> 标签：mysql, sql

我希望我的查询返回当前日期和前 7 天之间特定日期注册的用户数。不是天，而是日期时间格式，它以整数格式显示。例如，对于日期 20/12/2012，其显示为 0，21/12/2012 显示为 1，依此类推

我的查询：

```
select date(update_timestamp) between date_sub(sysdate(), interval 7 day) and sysdate()  as date, count(*) users 
from registered 
group by date(update_timestamp) 
```

期望的输出

```
DATE       | USERS
20/12/2012 | 5
21/12/2012 | 6 
```

我得到的输出

```
DATE  | USERS
    0 | 5
    1 | 6 
```

我的 sql 查询有什么问题？另外，我需要知道获取最近 7 天数据的替代方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:57:41.550

我想你想要一个`WHERE`子句：

```
select date(update_timestamp) Date, count(*) users 
from registered 
where date(update_timestamp) between date_sub(sysdate(), interval 7 day) and sysdate()
group by date(update_timestamp) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T12:58:17.010

您已将条件放入`select`语句中，因此它将被评估并返回，而不是限制结果。将条件放入`where`语句中：

```
select date(update_timestamp) as date, count(*) users
from registered
where date(update_timestamp) between date_sub(sysdate(), interval 7 day) and sysdate()
group by date(update_timestamp) 
```

* * *

即使没有用户，要获取区间内的所有日期，您需要加入另一个数据源：

```
select date_sub(sysdate(), interval d.offset day) date, count(r.update_timestamp) users
from registered r
inner join (
  select 0 as offset union all
  select 1 union all
  select 2 union all
  select 3 union all
  select 4 union all
  select 5 union all
  select 6 union all
  select 7
) d on date(r.update_timestamp) = date_sub(sysdate(), interval d.offset day)
group by date_sub(sysdate(), interval d.offset day) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T12:59:34.253

试试这个查询::

where 子句是过滤部分，对于日期类型逻辑，您应该在查询的该部分使用当前日期 - 7 天逻辑。

```
select date(update_timestamp) ,count(*) users 
from registered 
where date(update_timestamp) 
between 
date_sub(sysdate(), interval 7 day) and sysdate()  
group by date(update_timestamp) 
```

# android - ListView 和消失推送效果

> ID：13801386
> 
> 赞同：0
> 
> 时间：2012-12-10T12:54:55.053
> 
> 标签：android, listview

我有一个 listView 和适配器：

```
resultAdapter = new SimpleCursorAdapter(getActivity(),
                R.layout.custom_products_list, null, new String[] {

                StoreData.Product.NAME,
                        StoreData.Product.PRICE,
                        StoreData.BrandRecord.NAME3 }, new int[] {
                        R.id.productItem, R.id.productPItem,
                        R.id.productBItem }, 0){

                            @Override
                            public View getView(int position, View convertView,
                                    ViewGroup parent) {
                                View viewGroup=super.getView(position, convertView, parent);
                                  if (position % 2 == 0)
                                        viewGroup.setBackgroundResource(color.even_row_color);
                                    else
                                        viewGroup.setBackgroundResource(android.R.color.background_light);
                                //viewGroup.setClickable(true);
                                  return viewGroup;
                            }

        }; 
```

这是制作两种颜色列表。一切正常，我有两个颜色项目的列表。但是当我点击列表中的任何项目时，推送效果就会消失。当我单击要更改其颜色的项目时，我希望看到基本列表视图中的效果。我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:15:31.210

尝试进行更改`convertView`并将其返回：

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if (convertView == null) { 
             LayoutInflater li = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView=li.inflate(R.layout.custom_products_list, null);
           }
                  if (position % 2 == 0)
                                    convertView.setBackgroundResource(color.even_row_color);
                                else
                                    convertView.setBackgroundResource(android.R.color.background_light);
        return convertView;
    } 
```

# matlab - 用于目标检测的实时高斯混合模型实现

> ID：13801394
> 
> 赞同：1
> 
> 时间：2012-12-10T12:55:31.403
> 
> 标签：matlab, real-time, signal-processing, mixture-model

我正在研究实时视频压缩。我正在用 MATLAB 对其进行建模。我需要稍后在 5832MIPS、729MHz 的 DSP 处理器上实现它。

在 DSP 处理器上实现高斯混合模型是否可行，或者是否有更好的目标检测算法？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:03:27.957

任何类型的迭代过程，特别是混合模型拟合，都非常耗时，因此不太可能足够快以进行实时处理，除非您只有少数几个内核可以拟合（我们可以拟合数百到数千个点，尽管我们实现了快速混合模型，但每帧需要几秒钟）。

为什么不使用非迭代点检测器，例如 H-Dome？还是您需要特征的亚像素位置？

# android - 包含简单视图的片段内的 Android Tab

> ID：13801395
> 
> 赞同：0
> 
> 时间：2012-12-10T12:55:36.333
> 
> 标签：android, user-interface, tabs, android-fragments

我已经阅读了一些关于 stackoverflow 的示例、教程和问题，但到目前为止，我认为我想要做的事情是否应该更简单还是应该完成还不是很清楚！

我将发布一个设计草案以便更好地理解。

![在此处输入图像描述](../Images/d8d891566f08ee0f3d29acf18d65078f.png)

正如你所看到的，我只需要一个像上面这样的片段，它会被一个 Activity 膨胀，这个片段应该包含一些自定义的复合控件和其他简单的视图。

现在我需要在草稿的左侧看到一个选项卡（控件），它将简单地包含每个选项卡区域的视图并通过片段与它们交互。我认为为每个选项卡甚至不同的片段使用不同的活动是多余的。

我想到了一个带有按钮和可见/隐藏视图的解决方案。

欢迎任何解决此类问题的示例，教程。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:30:50.317

有几种方法可以实现这一点。您可以使用[ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html) + [ViewPagerIndicator](http://viewpagerindicator.com/)。或者将内容显示为 FrameLayout 中的单独片段，并在用户选择不同选项卡时将其替换为[FragmentTransaction 。](http://developer.android.com/training/basics/fragments/fragment-ui.html#Replace)ViewPager 实现的一个好处是用户可以在不同的选项卡之间滑动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:08:37.033

您可以创建按钮代替选项卡，您可以更改

```
 setContentView(yourlayout) 
```

相应的例子

```
 public void onClick(View v) {
    switch (v.getId()) {
    case R.id.tab1:

        setContentView(R.layout.tab1); 
                                              // perform other changes if needed
        break;

    case R.id.tab2:
        setContentView(R.layout.tab2);
        break;

    case R.id.tab3:

        setContentView(R.layout.tab3);
        break;
   } 
```

如果您有最低级别的功能要执行，这将很有用

# html - html div定位

> ID：13801396
> 
> 赞同：0
> 
> 时间：2012-12-10T12:55:42.073
> 
> 标签：html, positioning

我在一个 php 页面中有多个 DIV：

```
<?php 
if ($row['a']!="") { echo "<div id=a></div>";} 
if ($row['b']!="") { echo "<div id=b></div>";}
if ($row['c']!="") { echo "<div id=c></div>";}
if ($row['d']!="") { echo "<div id=d></div>";}
if ($row['e']!="") { echo "<div id=e></div>";}
?> 
```

我应该如何设置它们的位置，以便如果不显示 div id=2 则 div id=3 将替换它的位置，这样 div 1 和 3 之间就不会有空格。与其他 DIV 相同的情况. 我应该使用哪种定位类型：相对？绝对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:09:44.120

您可以使用相对定位。一个简单的例子如下所示。如果您可以更喜欢 class 属性来设置样式，那会很好，否则您可以为每个带有 ID 的 div 提供单独的样式。浏览下面的代码。现在尝试删除中间的一个或任何一两个回显语句，您会发现不可用的 div 的空间被替换。还有很多其他的方法。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style>
    .adiv {
        position:relative;
        width:100px;
        height:100px;
        background:#ff0000;
        float:left;
        margin:10px;
    }
</style>
</head>

<body>
<?php
    echo "<div id=\"one\" class=\"adiv\"> </div>";
    echo "<div id=\"two\" class=\"adiv\"> </div>";
    echo "<div id=\"three\" class=\"adiv\"> </div>";
    echo "<div id=\"four\" class=\"adiv\"> </div>";
    echo "<div id=\"five\" class=\"adiv\"> </div>";
?>
</body>
</html> 
```

# c - 将特定的 sighandler 分配给信号

> ID：13801400
> 
> 赞同：0
> 
> 时间：2012-12-10T12:55:48.560
> 
> 标签：c

我有一个关于 C 中信号的问题。我想为信号分配一些特定的 sighandler。

我的功能是：

```
void searchOccurences(char **myString, char chr, int *occurences) {
   /* I perform some search actions here 
    * at the end of this function *occurrence will contain the 
    * the number occurrences of chr in myString*/
} 
```

我想将此函数分配给 SIGILL 信号（即非法指令信号），但我不能，因为 __sighandler_t 处理程序具有这种定义：

```
typedef void (*__sighandler_t) (int); 
```

那么如何将我的功能分配给这个信号呢？我想做的替代解决方案是什么？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:19:51.967

不要使用 SIGILL，这可能会掩盖真正的错误。SIGUSR1 和 SIGUSR2 专门用于用户定义的信号。

抱歉，您无法传递其他信息，但它确实存在。您可以做的最好的事情是在发出信号之前将信息存储在全局中，但您必须确定事件的顺序，或者使用某种同步，如互斥锁。

顺便说一句，您是否知道许多 C 运行时库函数不是信号安全的？

# java - 使用 JAXB 生成 Java 原始类型的 XML Schema 类型不需要添加到它

> ID：13801401
> 
> 赞同：7
> 
> 时间：2012-12-10T12:55:50.110
> 
> 标签：java, jaxb, xsd

我正在使用 JAXB（xjc 版本 2.2.4-2）从 XML 模式生成 Java 类。映射到 Java 原始数据类型的 XML 类型不添加：

```
@XmlElement(required = true) 
```

例如使用时：

```
<element name="userId" type="long"/>
<element name="userName" type="string"/> 
```

将导致：

```
//no annotation added here
protected long userId;
@XmlElement(required = true)
protected String userName; 
```

有没有人解释为什么会发生这种情况？

这是否与您可以使用 xjc 设置的选项有关？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T12:59:28.093

您不需要注释来显示需要 Java 类型的属性，`long`因为原始值不能为空这一事实是隐含的。一个不可空的必需元素`xs:long`映射到 Java `long`，一个可选的或可空的元素映射到`java.lang.Long`（它允许`null`，表示不存在或`xsi:nil`适当）。

一个*既*可选又可空*的*元素（奇数，但 XML Schema 允许）将映射到 a`JAXBElement<Long>`以区分缺席 (a ) 和 nil（返回 true的`null` `JAXBElement`非空）。`JAXBElement``isNil()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T08:47:48.597

如果您不介意 Java 类中的 BigInteger，您可以使用 type="integer" 或 type="positiveInteger"（负 userId？）。您的验证将以一定的成本进行。

另一种选择是使用 jaxb 自定义绑定。您的元素可能是：

```
<element name="userId" type="long"/> 
```

并且您必须创建一个额外的绑定文件，例如

```
<jxb:bindings version="1.0" 
  xmlns:jxb="http://java.sun.com/xml/ns/jaxb" 
  xmlns:xs="http://www.w3.org/2001/XMLSchema" 
  xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc" 
  jxb:extensionBindingPrefixes="xjc">
<jxb:bindings schemaLocation="my.xsd" node="//xs:element[@name='UserType']//xs:element[@name='userId']">
 <jxb:property>
  <jxb:baseType name="java.lang.Long" />
 </jxb:property>
</jxb:bindings>
</jxb:bindings> 
```

现在您可以像这样调用 xjc： xjc my.xsd -b my.xjb

这导致：

`@XmlElement(required = true, type = Long.class) protected Integer userId;`

# java - GWT ui binder：嵌套自定义小部件

> ID：13801402
> 
> 赞同：2
> 
> 时间：2012-12-10T12:56:00.450
> 
> 标签：java, gwt, uibinder

我有两个自定义小部件`Foo extends Composite`和`Bar`. 我想将它们嵌套在我的 ui.xml 中，如下所示：

```
<my:Foo width="100%" ui:field="myFoo">
  <my:Bar label="someLabel"/>
</my:Foo> 
```

我希望某些方法会被调用`Foo`，`addWidget`或者类似的。但是我收到以下错误：

```
Found unexpected child element Element <my:Bar label='someLabel'> 
```

我怎么能解决这个问题？是否可以将我的自定义小部件嵌套在 ui.xml 中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T13:05:57.400

好的，我明白了：`Foo`也必须实施`HasWidgets`！

# jquery - 更改 td 内的纯文本的一部分

> ID：13801403
> 
> 赞同：2
> 
> 时间：2012-12-10T12:56:02.777
> 
> 标签：jquery, text, replace, html-table

我没有找到这个特定问题的答案。

我有一个动态生成的表。它是一个包含名称、国家、排名和分数的分数表。我想用图像替换纯文本。

```
<table>
  <tr>
    <td>1.</td>
    <td>Lindsey Vonn (usa)</td>
    <td>440</td>
  </tr>
  <tr>
    <td>2.</td>
    <td>Lara Gut (sui)</td>
    <td>400</td>
  </tr>
  <tr>
    <td>3.</td>
    <td>Nicole Hosp (at)</td>
    <td>380</td>
  </tr>
</table> 
```

目标是用美国国旗（图片）替换（美国）。(sui) 等也是如此...我没有表、td 或 tr 的 ID 或类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:07:50.110

使用`regex`诸如`\(([a-z]*)\)`并使用返回的值来显示具有该名称的文件`img src`：

```
$("table tr td:nth-child(2)").each(function(index, item) {
    $(item).html(function(index, text) {
        return text.replace(/\(([a-z]*)\)/, "<img src=\"$1.jpg\" />");
    });
}); 
```

[小提琴在这里](http://jsfiddle.net/macropus/EyEna/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:14:25.983

在 JavaScript 中

```
var xx=document.getElementsByTagName('table')[0];
for (var i=0;i<xx.getElementsByTagName('tr').length;i++)
document.write(xx.getElementsByTagName('tr')[i].getElementsByTagName('td')[0].innerHTML="<img src='anything.jpg' />"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T13:05:00.367

```
(function($) {
  var icons = {
    usa: '/path/to/usa.png',
    sui: '/path/to/sui.png',
    at:  '/path/to/at.png'    
  };

  // on DOM ready
  $(function() {
    // you need a way of selecting
    // that table and this selector
    // is dangerously generic
    var table = $('table'),
        markup = table.html(),
        image;

    $.each(icons, function(icon, path) {
      image = '<img src="' + path + '" alt="' + icon + '">';
      markup = markup.replace('(' + icon + ')', image); 
    });

    table.html(markup);
  });
}(jQuery)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T13:05:28.927

```
$.each($("table tr td:first"),function(){
if($(this).html().indexOf("usa"))
{
$(this).html($(this).html().replace("<img src=''></img>)
}
...

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T13:49:38.240

**嘿，伙计，这是一个简单的解决方案，也是有史以来最好的解决方案，但是您必须像使用人名一样更改标志图像名称，例如（美国）您将需要使用 usa.jpg 更改标志图像名称，同样，对于（sui ) 您需要使用 sui.jpg 更改标志图像名称：**

[链接到 JSFIDDLE](http://jsfiddle.net/LBCVT/)

```
$("table tr td:nth-child(2)").each( function() { // this line is edited!
    var g = $(this).text();
    if(g!="") {
    var n = g.split("(");
        var t= n[0];
        var m = n[1];
        var s = m.replace(")", "");
        var img_code = "<img src='.html/"+s+".jpg'>"; // here you can change path. I have edited it for .html directory!
        $(this).html(t+img_code);
    }
}); 
```

注意：**这些图像不会在 jsfiddle 中显示，因为它们没有 usa.jpg 或 sui.jpg 的图像！**

# symfony - 教义2 - 如何使用 DATE_ADD 函数

> ID：13801405
> 
> 赞同：16
> 
> 时间：2012-12-10T12:56:04.423
> 
> 标签：symfony, doctrine-orm, dql

我正在尝试使用`DATE_ADD`教义 2 中的功能，但我无法正确使用它。

我在 DQL 中这样使用：

```
->andWhere('p.created_at <= DATE_ADD(CURRENT_DATE(),4, day)') 
```

但我收到语法错误：

> [语法错误] 第 0 行，第 215 列：错误：应为“。” 或'（'，得到'天'

我尝试了不同的实现，但我总是遇到某种语法错误。

我已经检查了包含此功能的 DoctrineExtensions，但我不应该需要它，因为该功能已包含在教义中。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-10T13:52:13.703

你有一个错字，你必须引用'day'

```
->andWhere("p.created_at <= DATE_ADD(CURRENT_DATE(),4, 'day')") 
```

[这里](http://www.doctrine-project.org/jira/browse/DDC-1293?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel)有一个例子。

# ruby - Cucumber with Ruby：可以从宝石中使用吗？

> ID：13801406
> 
> 赞同：0
> 
> 时间：2012-12-10T12:56:13.887
> 
> 标签：ruby, gem, cucumber

我想为 Ruby 中的 Cucumber 开发一些可重用的步骤定义和场景大纲。

我已经搜索了[Cucumber wiki](https://github.com/cucumber/cucumber/wiki/_pages)，但似乎没有关于使用 Cucumber 和 Ruby gems 的信息。

是否支持从已安装的 Gem 执行功能？

或者用户是否必须手动更改到 gem 安装目录并明确引用要从那里运行的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T14:12:07.180

如果我正确理解了您的问题，您只需为可重用的定义和步骤创建一些库，然后在`features/support/env.rb`

这是一个与您需要完全相同的 gem，您可以将其用作参考：[https ://github.com/jayzes/cucumber-api-steps](https://github.com/jayzes/cucumber-api-steps)

查看此 gem 提供的功能：[https](https://github.com/jayzes/cucumber-api-steps/blob/master/features/request.feature) ://github.com/jayzes/cucumber-api-steps/blob/master/features/request.feature该 gem 创建了一些可重用的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:59:53.723

Turns out `cucumber --help` shows the way:

```
cucumber -r gem-name feature-name.feature 
```

UPDATE: This doesn't work. Any other suggestions?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T13:00:09.780

There is a [cucumber gem](https://rubygems.org/gems/cucumber) which installs the binary `cucumber`.

Running this command, will assume default settings. This means it will look under `./features` relative to the current path for files with the `.feature` extension. It will expect `./features/step_definitions` to hold files with `*_step.rb`, where it will search for steps.

Edit: never mind, I misread your question and thought you wanted to know about the cucumber gem and its default paths.

# jquery - Jquery：检查 div 是否包含，然后将样式添加到 div

> ID：13801409
> 
> 赞同：0
> 
> 时间：2012-12-10T12:56:29.067
> 
> 标签：jquery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:11:32.047

尝试这个：

```
 $('div.dtNode:has(a.nodeSel)').addClass("newClass");​ 
```

这会将名为“newClass”的类添加到具有类“dtNode”的 div 中，并包含具有类“nodeSel”的“a”标签

div 的最终 html 将是：......

这是你想要的 ？

# ios - 该应用程序必须在安装时请求基本读取权限。只在原生？

> ID：13801414
> 
> 赞同：3
> 
> 时间：2012-12-10T12:56:42.297
> 
> 标签：ios, facebook-ios-sdk

我一直在为我一直在开发的一些应用程序使用 Facebook iOS SDK - 我的应用程序只需要发布照片，并且我没有使用任何读取权限或基本信息。

使用浏览器（模拟器）或快速应用程序切换（设备）登录时，只需`openActiveSessionWithPublishPermissions:@[@"publish_stream"]...`

但是，如果我尝试使用具有本机登录的 iOS6 设备进行相同操作，则会显示标题中描述的错误。即使我不需要任何读取权限。此问题仅发生在本机登录中，并且由于某种原因不会出现在基于浏览器或基于快速应用切换的登录中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T08:56:21.323

我认为这与[此](https://developers.facebook.com/docs/tutorial/iossdk/upgrading-from-3.0-to-3.1/)有关：

## 分别请求读写权限

*您现在需要单独（并按此顺序）请求阅读和发布权限。最有可能的是，当应用程序启动并且用户首次登录时，您将请求读取权限以进行个性化。稍后，如果合适，您的应用程序可以在打算将数据发布到 Facebook 时请求发布权限。*

*您不能使用 iOS6 的 Facebook 支持同时请求读取和发布权限，如果您尝试这样做，SDK 将引导用户通过不太理想的应用程序切换或基于 Web 的身份验证流程。*

似乎他们在 SDK 3.1 中添加了这个。

# iphone - 如何将 TimeInterval 设置为每秒 512？

> ID：13801418
> 
> 赞同：0
> 
> 时间：2012-12-10T12:56:48.973
> 
> 标签：iphone, objective-c, nstimer

我正在使用 opengl 处理图形，我想为每秒 512 个值设置计时器，我这样做了：

```
self.animationTimer = [NSTimer scheduledTimerWithTimeInterval:1.0/512.0 
                               target:self
                               selector:@selector(drawView) 
                               userInfo:nil 
                               repeats:YES]; 
```

在绘图方法中，我绘制了图形，但它不是每秒打印 512 个值。

任何人都可以帮助我，无论是对还是错？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T13:27:46.797

一个 NSTimer 可能无法快速触发。

> 定时器不是实时机制；它仅在已添加计时器的运行循环模式之一正在运行并且能够检查计时器的触发时间是否已过时触发。由于典型的运行循环管理的各种输入源，计时器的时间间隔的有效分辨率被限制在 50-100 毫秒的数量级。

[http://developer.apple.com/library/ios/#documentation/cocoa/reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html](http://developer.apple.com/library/ios/#documentation/cocoa/reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)

除非您正在做一些非常特别的事情，否则每秒可以给您 10-20 个滴答声。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:25:45.633

那是行不通的。

有（至少）两个原因。

1.  "[由于典型的运行循环管理的各种输入源，计时器的时间间隔的有效分辨率被限制在 50-100 毫秒的数量级](http://developer.apple.com/library/ios/#documentation/cocoa/reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)。” 所以你不能期望每秒触发超过十个定时器。
2.  不确定 iOS 上的最大帧速率是多少，但超过 60 可能没有多大意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T13:00:06.923

```
[NSTimer scheduledTimerWithTimeInterval:1.0f/512.0f target:self selector:@selector(drawView) userInfo:nil repeats:YES]; 
```

try to use this one

let me know whether it is working or not!!!

Happy Coding!!!!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T12:45:58.980

我能够每秒绘制 512 个值。我使用的时间间隔相同，但我参考加速度计图：http: [//developer.apple.com/library/ios/#samplecode/AccelerometerGraph/Listings/MainViewController_m.html#//apple_ref/ doc/uid/DTS40007410-MainViewController_m-DontLinkElementID_10](http://developer.apple.com/library/ios/#samplecode/AccelerometerGraph/Listings/MainViewController_m.html#//apple_ref/doc/uid/DTS40007410-MainViewController_m-DontLinkElementID_10) 我根据我的要求定制了它，它工作得很好。谢谢！！！

# java - HDFS 是否在请求的路径上创建所有目录？

> ID：13801419
> 
> 赞同：0
> 
> 时间：2012-12-10T12:56:50.340
> 
> 标签：java, hadoop, hdfs

似乎如果路径包含嵌套目录，例如`a/b/c/`然后调用`create`在路径上创建所有这些目录......

```
fileSystem.create(new Path(path), true); 
```

..类似于调用`File.mkdirs`

这是 HDFS 的记录功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T23:49:14.847

`FileSystem`API`create(…)`方法的默认行为（`HDFS`特别是在实现上使用时）将向服务器发送一个`create-parent`标志，如果父级不存在，则要求自动创建它们。

由于每个平台的 FileSystem 实现在行为上是不同的，因此对于本地文件系统（`file://`路径）创建调用来说，这是预期的。

切换功能在 FileContext 的[create](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/fs/FileContext.html#create%28org.apache.hadoop.fs.Path,%20java.util.EnumSet,%20org.apache.hadoop.fs.Options.CreateOpts...%29) API 中可用，在 Hadoop 2.x 及更高版本中可用，它允许提供一个`Options.CreateOptions.donotCreateParent()`选项以禁止或控制此行为。

# jquery - jQuery UI 嵌套连接的可排序对象

> ID：13801420
> 
> 赞同：0
> 
> 时间：2012-12-10T12:56:53.357
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我必须使用带有 jQ​​uery UI 的嵌套连接排序。这意味着任何可排序的对象都可以丢弃在任何其他可排序对象中。但是，我受到 jQuery UI 中的这个错误的影响：http: [//bugs.jqueryui.com/ticket/8180](http://bugs.jqueryui.com/ticket/8180)。简而言之，将可排序对象放在可排序对象之外会引发异常：“未捕获的错误：HIERARCHY_REQUEST_ERR：DOM 异常 3”。

我有哪些选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T13:08:56.420

虽然尚未解决此问题，但您可以尝试在分配最内层容器的值之前在可排序小部件的 _contactContainers() 中添加验证。

```
 for (var i = this.containers.length - 1; i >= 0; i--){

        // never consider a container that's located within the item itself
        if($.contains(this.currentItem[0], this.containers[i].element[0]))
            continue;

        if(this._intersectsWith(this.containers[i].containerCache)) {

            // if we've already found a container and it's more "inner" than this, then continue
            if(innermostContainer && $.contains(this.containers[i].element[0], innermostContainer.element[0]))
                continue;

            if (this.currentItem[0] == this.containers[i].element[0]) {
                continue;
            }

            innermostContainer = this.containers[i];
            innermostIndex = i;

        } else {
            // container doesn't intersect. trigger "out" event if necessary
            if(this.containers[i].containerCache.over) {
                this.containers[i]._trigger("out", event, this._uiHash(this));
                this.containers[i].containerCache.over = 0;
            }
        }

    } 
```

在可以连接并放置在其他可排序对象中的可排序对象的情况下，最内层的容器被确定为当前选定的可排序对象。然后将占位符附加在其中。当在 mouseStop 上调用 _clear() 并调用“this.placeholder.before(this.currentItem)”时，currentItem 被插入到它自己之前。这会导致 HIERARCHY_REQUEST_ERR: DOM Exception 3。

简单检查，如果 currentItem 是容器，则不允许将占位符附加到 currentItem。

# javascript - 使用 JS 检测文本框何时有值且单选按钮列表有选定索引

> ID：13801427
> 
> 赞同：1
> 
> 时间：2012-12-10T12:57:22.183
> 
> 标签：javascript, asp.net, gridview, textbox, radiobuttonlist

我有一个 GridView，其倒数第二列包含一个文本框（由 jQueryUI DatePicker 小部件填充）和一个 RadioButtonList。此外，最后一列有一张支票的图片（类似于 stackoverflow 的“已回答”和“未回答”支票。）

我需要的是能够检测到，最好使用 Javascript，当用户将文本框的值更改为某个值（在我的情况下为日期）并选择了一个单选按钮，然后将图像源从空复选标记更改为一个彩色复选标记（再次，类似于 stackoverflow 中的答案检查。）另外，如果用户从文本框中删除所有文本，我需要将图像源更改回空复选标记。哦，我还需要更改图像的替代文本。

**我的网格视图**

```
<asp:GridView ID="gvBlah" runat="server" AutoGenerateColumns="false">
            <Columns>
                ...       
                <asp:TemplateField>
                    <HeaderTemplate> 
                        <asp:Label ID="warrantyDateHeader" Text="Warranty Date" ToolTip="Choose a date..." runat="server" />
                    </HeaderTemplate>
                    <ItemTemplate>
                        <asp:TextBox ID="txtWarrantyDate" runat="server" CssClass="datepicker" />
                        <asp:RadioButtonList ID="rblWarrantyDate" runat="server" RepeatDirection="Horizontal">
                            <asp:ListItem Value="0" Text="Start" />
                            <asp:ListItem Value="1" Text="End" />
                        </asp:RadioButtonList>
                    </ItemTemplate>
                    <ItemStyle VerticalAlign="Top" HorizontalAlign="Center" />
                </asp:TemplateField>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:Image ID="imgRowChecked" ImageUrl="~/images/check-empty.png" AlternateText="Not Selected"  runat="server" />
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView> 
```

**更新**

使用给出的答案，这最终成为最佳解决方案。

```
var dateStatus = 0 // global variable
var WarrantyStatus = 0 // global variable
$(".datepicker").change(function () {
    if ($(this).val().length == 0) {
        dateStatus = 0;
        $(".chkSerialNumber").removeClass("check-filled").addClass("check-empty");
    }
    else {
        dateStatus = 1;
        if (WarrantyStatus > 0) {
            $(".chkSerialNumber").addClass("check-filled").removeClass("check-empty");
        }
    }
});
$(".rbl").change(function () {
    WarrantyStatus = 1;
    if (dateStatus = 1) {
        $(".chkSerialNumber").addClass("check-filled").removeClass("check-empty");
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:22:33.147

我假设您没有在 gridview 中实现多个编辑。所以这里是测试日期文本框中长度的 jQuery 代码。

我建议您将图像制作为 CSS 类，如下所示：

```
div.check-empty {
    background: url("/images/check-empty.png") repeat scroll 0 0 transparent;
    height: 11px;
    width: 55px;
}

div.checked-green {
    background: url("/images/check-green.png") repeat scroll 0 0 transparent;
    height: 11px;
    width: 55px;
} 
```

并在gridview中提供它作为默认值，如下所示：

```
<div class="check-empty"></div> 
```

上述原因是您可以使用 jQuery 动态操作图像。

所以剩下的代码是这样的：

1.  检查日期文本框是否包含一些值：

    ```
    var dateStatus = 0 // global variable
    var WarrantyStatus = 0 // global variable

    $('.datepicker').blur(function() 
    {       
       if($(this).val().length == 0)
         dateStatus = 0;
       else
        {
         dateStatus = 1;
         if(WarrantyStatus != 0)
          $(".check-empty").addClass("checked-green");
        }

     } 
    ```

2.  检查用户是否更改了单选按钮：

    ```
    $("rblWarrantyDate").change(function()
    {
       if ($(this).val() == '1') 
       {
          WarrantyStatus = 1;
          if(dateStatus != 0)
          $(".check-empty").addClass("checked-green");
       }
       else
           WarrantyStatus = 0;
    }); 
    ```

# msbuild - 在 MSBuild exec 任务中使用路径系统环境变量

> ID：13801428
> 
> 赞同：0
> 
> 时间：2012-12-10T12:57:23.793
> 
> 标签：msbuild

我正在调用一个外部工具来使用`Exec`MSBuild 中的任务在我的构建序列中进行一些后期处理。当我将工具更新到新版本时，可执行文件的目录名称会发生​​变化，但该目录会添加到系统`PATH`变量中。是否可以在 MSBuild 中使用系统`PATH`变量？我尝试了以下代码，但它不起作用：

```
<Exec Command="&quot;$(PATH)\mytool.exe&quot;  /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:05:26.477

如果目录已添加到`PATH`变量中，我希望文件路径会自动解析。即你应该能够使用：

```
<Exec Command="mytool.exe"/> 
```

也许首先通过打开命令提示符检查分辨率是否正常，cd'ing 到与“mytool.exe”所在位置不同的某个根目录，然后查看是否在您简单地输入“mytool.exe”时解决“在提示下。

# javascript - 选择控件和 DOM

> ID：13801429
> 
> 赞同：0
> 
> 时间：2012-12-10T12:57:26.047
> 
> 标签：javascript, asp.net, html, dom

我正在尝试创建一个 JS 函数，该函数将从下拉列表中获取一个值，将其作为查询字符串添加到 http 链接，然后打开该链接。该怎么做？

假设这是`<select>`

```
<select>
   <option value="volvo">Volvo</option>
   <option value="saab">Saab</option>
   <option value="mercedes">Mercedes</option>
   <option value="audi">Audi</option>
 </select> 
```

我将如何在 DOM 中使用它来访问 DDL 上所选项目的值？

```
function openlink(link) {
            window.open(link + "SELECTED_ITEM_GOES_HERE");
        } 
```

SELECTED_ITEM_GOES_HERE 的语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:12:34.467

你需要这个： [Get selected value in dropdown list using JavaScript?](https://stackoverflow.com/questions/1085801/how-to-get-the-selected-value-of-dropdownlist-using-javascript)

还有这个： [如何使用 Javascript 设置查询字符串](https://stackoverflow.com/questions/5546207/how-to-set-querystring-with-javascript)

要产生这个：

```
<select id="test">
   <option>Volvo</option>
   <option>Saab</option>
   <option>Mercedes</option>
   <option>Audi</option>
</select>

<script>
var ddl = document.getElementById('test');
ddl.onchange = function(){
    window.location = 'https://www.google.com.au/search?hl=en&q=' + ddl.options[ddl.selectedIndex].text;
};
</script> 
```

# uml - 支持 SVG 的基于浏览器的 UML 工具

> ID：13801430
> 
> 赞同：1
> 
> 时间：2012-12-10T12:57:32.773
> 
> 标签：uml

我正在寻找一种用于创建和托管 UML 图的工具，具有以下要求（按优先级排序）：

1.  它必须支持独立的本地安装。由于公司政策，我将无法使用外部托管工具。
2.  它必须得到积极维护和正式发布（没有测试版）。
3.  它必须有一个基于浏览器的图形编辑器（不是基于文本的，如[http://yuml.me](http://yuml.me)）。我希望它尽可能容易访问。
4.  它必须支持嵌入图
    1.  SVG 格式
    2.  或像PNG这样的无损格式，
    3.  但没有JPEG或类似的。
5.  它应该提供编辑历史记录，并支持回滚。
    *   如果它提供某种*分叉*功能会很好，这样我就可以轻松开发同一图表的替代版本。

[Gliffy](http://www.gliffy.com/)听起来像是一个不错的候选者，但它不满足第一个标准。

我不一定要寻找单一产品的解决方案。如果有人使用不同的工具拼凑了一个可行的解决方案，我想听听。它不一定是免费的。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-06T18:31:57.427

试试[magicdraw ，一个来自](http://www.nomagic.com)*nomagic*的商业工具。使用它，您可以生成模型的基于 html 的演示文稿并托管它。

# macos - 我怎样才能让这个 ApplesScript 立即执行而没有 13 秒的延迟？

> ID：13801433
> 
> 赞同：2
> 
> 时间：2012-12-10T12:57:40.490
> 
> 标签：macos, applescript, shortcut, automator, logmein

我试图在 OSX Mountain Lion 上创建一个快捷方式，以便与 LogMeIn 应用程序“共享文件”，因为该应用程序不存在。我打开 Automator 并在“看我做”下创建了一个应用程序。我单击记录并导航到菜单栏，然后​​单击“LogMeIn”>“共享文件...”，然后单击该对话框中的“共享文件”并停止记录。然后，我将 Automator 中的命令复制并粘贴到 AppleScript 编辑器中，希望能够更改一些内容以使其执行得更快。我在 Automator 中选择了 10 倍的速度，但从我执行快捷方式开始仍然需要大约 13 秒。如果有人知道如何更改此 AppleScript 以使其即时生效，请随时更改。

任何帮助，将不胜感激。

谢谢

```
-- Click the “&lt;fill in title>” menu.
set timeoutSeconds to 2.0
set uiScript to "click menu bar item 1 of menu bar 1 of application process \"LogMeIn Menubar\""
my doWithTimeout(uiScript, timeoutSeconds)

-- Share a file...
set timeoutSeconds to 2.0
set uiScript to "click menu item \"Share a file...\" of menu 1 of menu bar item 1 of menu bar 1 of application process \"LogMeIn Menubar\""
my doWithTimeout(uiScript, timeoutSeconds)

-- Click the “Share a file...” button.
set timeoutSeconds to 2.0
set uiScript to "click UI Element \"Share a file...\" of group 1 of window \"LogMeIn\" of application process \"LogMeIn\""
my doWithTimeout(uiScript, timeoutSeconds)

on doWithTimeout(uiScript, timeoutSeconds)
    set endDate to (current date) + timeoutSeconds
    repeat
        try
            run script "tell application \"System Events\"
" & uiScript & "
end tell"
            exit repeat
        on error errorMessage
            if ((current date) > endDate) then
                error "Can not " & uiScript
            end if
        end try
    end repeat
end doWithTimeout 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:50:58.023

这太酷了。我不知道您可以在 AppleScript 编辑器中复制/粘贴那些“看我做”命令。我想我会找到一个用处。

无论如何，您可能无法使您的代码“即时”，因为 ui 脚本就是这样做的。但是，如果我将您的代码编写为常规的 applescript，它会是这样的。试试看，也许它会有所帮助。我无法测试它，因为我没有那个应用程序。祝你好运。

**注意**：我将“共享文件...”设置为“共享文件”和省略号字符（选项分号）。如果您遇到问题，请尝试将省略号更改为 3 个句点。

```
set timeoutSeconds to 2.0

tell application "LogMeIn Menubar" to activate
tell application "System Events"
    tell process "LogMeIn Menubar"
        click menu bar item 1 of menu bar 1

        -- delay until it opens
        set startTime to current date
        repeat until exists menu 1 of menu bar item 1 of menu bar 1
            delay 0.2
            if (current date) - startTime is greater than timeoutSeconds then
                error "Waited too long for menu 1 of menu bar item 1 of menu bar 1"
            end if
        end repeat

        click menu item "Share a file…" of menu 1 of menu bar item 1 of menu bar 1

        -- delay until it opens
        set startTime to current date
        repeat until exists group 1 of window "LogMeIn"
            delay 0.2
            if (current date) - startTime is greater than timeoutSeconds then
                error "Waited too long for group 1 of window \"LogMeIn\""
            end if
        end repeat

        click UI element "Share a file…" of group 1 of window "LogMeIn"
    end tell
end tell 
```

# antlr - ANTLR 规则不匹配

> ID：13801435
> 
> 赞同：2
> 
> 时间：2012-12-10T12:57:54.983
> 
> 标签：antlr

这应该是一个简单的问题。鉴于此解析器规则：

```
ifStatement
 : expr3b=IF logical (~(THEN)) expression* (ELSE expression *)? ENDIF // missing THEN
 ; 
```

为什么这与这个字符串不匹配？

```
"IF CODE=\"10\" DUE_DATE < YESTERDAY ENDIF" 
```

（`IF`, `THEN`, `ELSE`, 和`ENDIF`是完全按照您所假设的那样定义的标记。`logical`并且`expression`是其他规则）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:44:01.123

我假设以下行是您语法中的逐字记录。

```
ifStatement : expr3b=IF logical (~(THEN)) expression* (ELSE expression *)? ENDIF; 
```

如果是这种情况，那么您需要将其更改为：

```
ifStatement : expr3b=IF logical expression* (ELSE expression *)? ENDIF; 
```

事实上，`(~(THEN))`说“匹配任何一个令牌，只要它不是`THEN`。” 完成后的第一个标记`logical`是`ID`（或类似的） for `DUE_DATE`。`ifStatement`消耗它来完成`(~(THEN))`。这离开`< YESTERDAY`了`expression`，但失败了。

您的问题中将接受以下输入，`ifStatement`因为`ENDIF`满足`(~(THEN))`：

```
IF CODE=\"10\" ENDIF DUE_DATE < YESTERDAY ENDIF 
```

这将按预期工作，因为第一个*仅*用于`ENDIF`match 。*`(~(THEN))`*

# android - glext.h 函数未解析

> ID：13801436
> 
> 赞同：4
> 
> 时间：2012-12-10T12:57:57.480
> 
> 标签：android, eclipse, opengl-es, android-ndk

我正在使用 eclipse 创建一个本机 android 项目。它使用opengl es 1.1。

我在使用“gext.h”中定义的函数时遇到问题。我可以使用“gext.h”中定义的宏，但是当我尝试使用“gext.h”中定义的任何函数时，它说它无法解析该函数​​。

我知道 glext.h 已被弃用，但我正在跟随一本书，我想让它工作。我使用了书籍源代码，并且遇到了同样的问题。

如何使用 glext.h 中定义的函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:59:16.503

当您包含头文件时，您只能获得该头文件中的内容。在您的情况下，您将获得完全包含在头文件中的宏和函数声明。那些只是声明函数存在，它不是实际的代码，而是函数定义。

要访问实际函数（定义），您需要链接到库。unresolved functions 错误意味着编译器知道该函数存在，但链接器不知道在哪里找到它。

我认为您的解决方案可能只是链接 OpenGL ES 1.x 库。为此，请检查您的`Android.mk`文件，并确保设置的行`LOCAL_LDLIBS`包括`-lGLESv1_CM`. 像这样：

```
LOCAL_LDLIBS := -llog -ldl -lGLESv1_CM 
```

它链接了记录器、动态链接器和 OpenGL ES 1.x 库。

我正在从[这里](http://mobilepearls.com/labs/native-android-api/)获取我的信息。我在 Google 的网站上找不到规范的来源。

# c++ - Error calculating TCP Header Checksum

> ID：13801441
> 
> 赞同：4
> 
> 时间：2012-12-10T12:58:13.887
> 
> 标签：c++, tcp, checksum, packet, packets

I am writing code to calculate the checksum of IP and TCP Headers to see if the packet is malformed. I have coded the IP checksum successfully but when I used the code for the TCP checksum it doesn't give the correct checksums. Where is my error?

```
void cPacket::CheckIfMalformed()
{
    if (Packet->isIPPacket)
    {
        IP_HEADER ipheader;
        memcpy(&ipheader,(void*)&Packet->IPHeader,sizeof(IP_HEADER));
        ipheader.ip_checksum =0;
        cout << (DWORD*)Checksum((USHORT*)&ipheader,sizeof(IP_HEADER)) << endl;
        if(Checksum((USHORT*)&ipheader,sizeof(IP_HEADER)) != Packet->IPHeader.Checksum)
        {
            Packet->isMalformed = true;
            Packet->PacketError = PACKET_IP_CHECKSUM;
        }   
        else if (Packet->isTCPPacket)
        {
            TCP_HEADER tcpheader;
            memcpy(&tcpheader,(void*)&Packet->TCPHeader,sizeof(TCP_HEADER));
            tcpheader.checksum = 0;

            PSEUDO_HEADER psheader;
            psheader.daddr = Packet->IPHeader.DestinationAddress;
            psheader.saddr = Packet->IPHeader.SourceAddress;
            psheader.protocol = Packet->IPHeader.Protocol;
            psheader.length = ntohs(Packet->IPHeader.TotalLength) - Packet->IPHeader.HeaderLength*4;
            psheader.zero = 0;

            unsigned char *tcppacket;
            tcppacket = (unsigned char*)malloc(Packet->Size + sizeof(PSEUDO_HEADER));
            memset(tcppacket,0, Packet->Size + sizeof(PSEUDO_HEADER));
            memcpy(&tcppacket[0], &psheader, sizeof(PSEUDO_HEADER));
            memcpy(&tcppacket[12], &tcpheader, ntohs(Packet->IPHeader.TotalLength) - Packet->IPHeader.HeaderLength*4 );

            cout << (DWORD*)ntohs(Checksum((USHORT*)tcppacket,Packet->Size + sizeof(PSEUDO_HEADER))) << endl;
        }
    }
};

USHORT cPacket::Checksum(USHORT *buffer, unsigned int length)
{
    register int sum = 0;
    USHORT answer = 0;
    register USHORT *w = buffer;
    register int nleft = length;

    while(nleft > 1){
    sum += *w++;
    nleft -= 2;
    }

    sum = (sum >> 16) + (sum & 0xFFFF);
    sum += (sum >> 16);
    answer = ~sum;
    return(answer);
} 
```

# bash - PostgreSQL 的 Bash 部署 - 安装问题

> ID：13801445
> 
> 赞同：0
> 
> 时间：2012-12-10T12:58:29.673
> 
> 标签：bash, postgresql, shell, linode

我正在尝试使用 bash shell 脚本从我的 Debian 6.0 服务器上的源代码构建 postgreSQL，但我遇到了问题。这是我到目前为止所做的代码：

```
# Initial
    apt-get update
    apt-get -y install aptitude bzip2 libbz2-dev git-core
    aptitude -y install sudo python-all-dev python-setuptools libxml2-dev libgeoip-dev libxslt1-dev uuid-dev gcc automake autoconf libpcre3-dev libssl-dev unzip zip python-psycopg2 libpq-dev wget make libreadline-dev
    aptitude -y full-upgrade 

# POSTGRESQL
###############################

# Postgresql Download & Install
    wget http://ftp.postgresql.org/pub/source/v8.4.6/postgresql-8.4.6.tar.gz -P /tmp
    mkdir /tmp/postgresql
    tar xzf /tmp/postgresql-8.4.6.tar.gz -C "/tmp/postgresql"
    cd /tmp/postgresql/
    mkdir /usr/local/pgsql
    ./configure --prefix=/usr/local/pgsql
    cd /usr/local/pgsql
    make
    make install

# Add User
    useradd -s /bin/false "postgresql_user"
    chown "postgresql_user" usr/local/pgsql

# Clean Up
    rm  /tmp/postgresql-8.4.6.tar.gz
    rm  /tmp/postgresql

# Create Database
    echo "CREATE ROLE PSQL LOGIN ENCRYPTED PASSWORD 'PASS';" | sudo -u postgresql_user usr/local/pgsql
    sudo -u postgresql_user /opt/bin/createdb --owner PSQL DATADB 
```

我得到的错误如下：

```
/root/StackScript: line 22: ./configure: No such file or directory                                    
make: *** No targets specified and no makefile found.  Stop.                                          
make: *** No rule to make target `install'.  Stop.                                                    
chown: cannot access `usr/local/pgsql': No such file or directory                                                                                  
sudo: usr/local/pgsql: command not found                                                              
sudo: /opt/bin/createdb: command not found 
```

谁能告诉我哪里出错了？如果还有什么明显的我做错了，我总是乐于听到它！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T13:52:49.550

您做错的第一件事是编译旧主要版本的旧点版本。当有 8.4.15 时，你到底为什么要使用 8.4.6，并修复了很多重要的错误？请参阅[版本控制政策](http://www.postgresql.org/support/versioning/)。无论如何，您都不应该将 8.4 用于新部署，请使用最新版本进行新部署。

更好的是，使用[pgapt.debian.org](http://pgapt.debian.net/)上的 debian 软件包而不是自己编译。

错误的直接原因是解压缩源 tarball 会产生一个目录，就像`postgresql-8.4.6`你拥有的`/tmp/postgresql/postgresql-8.4.6`. 您正在尝试在not中执行`configure`脚本。在运行之前进入创建的目录。`/tmp/postgresql``/tmp/postgresql/postgresql-8.4.6``cd``configure`

# javascript - jquery: .filter().css("visibility", "collapse") 在 IE 中不工作，在 FF 中工作正常

> ID：13801446
> 
> 赞同：2
> 
> 时间：2012-12-10T12:58:33.990
> 
> 标签：javascript, jquery, html, internet-explorer, css

我有一张桌子，里面有两个下拉菜单。从第一个下拉列表中选择一个值时，将显示第二个下拉列表的值。

为此，我编写了以下函数，该函数在`onchange`第一个下拉列表的事件中被调用：

```
function dataTypeChanged(selectedValue){

document.getElementById("nodeInputValidation").innerHTML = "";
var rows = $('table.intValidationTable tr');
rows.filter('.rangeTR').css("visibility", "collapse");
rows.filter('.listTR').css("visibility", "collapse");
rows.filter('.textListTR').css("visibility", "collapse");
rows.filter('.dateRangeTR').css("visibility", "collapse");
rows.filter('.dateListTR').css("visibility", "collapse");

var validationTypes = document.getElementById("validationType").options;
document.getElementById("validationType").value = "";
var datatype;
for(var i=0;i<validationTypes.length;i++)
{
    datatype = validationTypes[i].value.substring(0,validationTypes[i].value.indexOf("_"));

    if(datatype != selectedValue){
        $("#validationType option[value=" + validationTypes[i].value + "]").hide();
    }else{
        $("#validationType option[value=" + validationTypes[i].value + "]").show();
    }
}
} 
```

此功能在 Firefox 中运行良好。但不知何故，它在 IE 8.0 中不起作用。

**编辑：** 早些时候我认为这可能是它的原因。但它不是。

```
var rows = $('table.intValidationTable tr');
rows.filter('.rangeTR').css("visibility", "collapse");
rows.filter('.listTR').css("visibility", "collapse");
rows.filter('.textListTR').css("visibility", "collapse");
rows.filter('.dateRangeTR').css("visibility", "collapse");
rows.filter('.dateListTR').css("visibility", "collapse"); 
```

**似乎是功能的另一部分。显示/隐藏第二个下拉选项的代码不起作用。当前正在显示所有选项。**

你们能帮我解决这个问题吗？

如果需要更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T13:03:43.490

`visibility: collapse`在 IE<8 中没有实现

用于`display: none`隐藏表格元素。

请参见此处：[可见性的替代方法：折叠不适用于 IE 和 Chrome](https://stackoverflow.com/questions/2487187/alternative-to-visibilitycollapse-not-working-on-ie-and-chrome)

在这里：[http ://reference.sitepoint.com/css/visibility](http://reference.sitepoint.com/css/visibility)

还要检查下面的代码：

```
if(datatype != selectedValue){
    $("#validationType option[value=" + validationTypes[i].value + "]").hide();
}else{
    $("#validationType option[value=" + validationTypes[i].value + "]").show();
} 
```

也许尝试添加引号（疯狂猜测，没有真正的希望）：

```
$("#validationType option[value='" + validationTypes[i].value + "']") 
```

您使用的是什么版本的 jQuery？

为我们组装一个 jsFiddle 会很酷。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T13:05:41.190

> 没有任何版本的 Internet Explorer（包括 IE8）支持属性值“继承”或“折叠”。

改为使用`display:none;`。

**例如：**

```
rows.filter('.rangeTR').css("display", "none"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T13:29:58.243

好吧，它似乎`visibility: collapse`也可以在 IE 中使用。我正在使用它，它可以在 IE 和 Firefox 中运行。不知道除了这两个之外的其他浏览器。

我做了以下事情：

HTML：

`<table class="intValidationTable">`

```
`<tr class="rangeTR" style="visibility: collapse;">`

`<tr class="listTR" style="visibility: collapse;">` 
```

Javascript + Jquery：

`var rows = $('table.intValidationTable tr');`

`var rangeTR = rows.filter('.rangeTR');`

`var listTR = rows.filter('.listTR');`

`rangeTR.css("visibility", "visible");`

`listTR.css("visibility", "collapse");`

这应该工作！

关于我的问题，我猜代码的第二部分是错误的。需要检查一下。

# sql - Update all subsequent rows on deleting a row in SQL

> ID：13801448
> 
> 赞同：1
> 
> 时间：2012-12-10T12:58:50.873
> 
> 标签：sql, sql-server, sql-server-2008, accounting

I have built an accounting system, where in a SQL Table, two of the columns are : Amount and Balance Left in the following manner :

```
ID    Amount    Balance Left  
101    20        100  
102    20         80  
103    10         70  
104    30         40  
105    25         15  
106     5         10

```

Such that: `Balance Left = previous Balance Left - Amount`.

Now if I delete a row with Id say 103, I would want amount 10 added to all the subsequent rows. What is the best possible way to do that (in SQL Server 2008 or otherwise)?

P.S. :

1.  I'm aware that I can add a trigger to update each row, but looking for a better alternative, **if any**.

2.  Code in C#.

In reply to some of the questions and common answers : 1\. Considering there are a million rows below my deleted row - Would it be better to do it in C# via LINQ? or would a SQL trigger work faster? 2\. I know its preposterous to save the balance left with each entry, but thats how the user of the DB/software demands it.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T13:15:46.733

最好的方法是不存储剩余余额，而是在需要时在视图中计算。

但是，如果这不是可取的或不可能的，那么触发器是您最好的选择，因为您可以确保您的数据保持一致。实际上，删除对表的所有写访问权并通过存储过程强制更改也很有效，尽管您仅限于一次一行的更新和删除。

伪代码格式的查询将是 update MyTable set BalanceLeft = BalanceLeft + RemovedAmount where ID > RemovedID

如果您希望此表上有多个读取器/写入器，那么您还需要考虑锁定并确保删除和后续更新在同一个事务中。如果您让视图计算剩余余额，大多数这些问题都会消失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T13:17:08.243

我不知道“最好的”，但这里是如何在 linq to sql 中做到这一点。

```
using (CustomDataContext dc = new CustomDataContext())
{
  List<Row> rows = dc.Rows
    .Where(row => startingID <= row.ID)
    .OrderBy(row => row.ID)
    .ToList();

  Row firstRow = rows.First();
  int firstRowAmount = firstRow.Amount;
  dc.Rows.DeleteOnSubmit(firstRow);

  foreach(Row row in rows.Skip(1))
  {
    row.Amount -= firstRowAmount;
  }
  dc.SubmitChanges();
} 
```

这里的优点是：

*   单笔交易 - 整个更新完成或没有。
*   乐观并发 - 如果有人在我们的读取和写入之间删除或更新我们的行之一，我们的更改将被拒绝。
*   清除可维护的 C# 代码。

缺点是：

*   记录必须先读入内存，然后才能更新。
*   每行生成一个更新语句。

* * *

由于您有一百万行要更新，因此上述内容有点慢且浪费……您将不得不在更少的 sql 命令中更新这些行，而无需将这些行读入内存。

```
using(TransactionScope ts = new TransactionScope())
{
  using (CustomDataContext dc = new CustomDataContext())
  {
    Row theRow = dc.Rows.Single(row => startingID == row.ID)

    int firstRowAmount = theRow.Amount;
    dc.Rows.DeleteOnSubmit(theRow);
    dc.SubmitChanges();
    dc.ExecuteCommand(@"Update Row SET Amount = Amount - {0} WHERE {1} < ID", firstRowAmount, startingID);
    ts.Complete();
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T13:13:13.530

```
DECLARE @T TABLE
(
    ID INT,
    Amount INT,
    [Balance Left] INT

)

INSERT INTO @T VALUES
(101,20,100),
(102,20,80),
(103,10,70),
(104,30,40),
(105,25,15),
(106,5,10)

DECLARE @ID_DELETE INT = 103
DECLARE @AMOUNT_DELETED INT = 0

SELECT @AMOUNT_DELETED = Amount
FROM @T WHERE ID = @ID_DELETE

DELETE FROM @T WHERE ID = @ID_DELETE

UPDATE @T SET [Balance Left] = [Balance Left] + @AMOUNT_DELETED WHERE ID > @ID_DELETE

SELECT * FROM @T 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T13:25:23.387

好吧，首先您不需要单独更新每一行，而是可以有一个删除触发器，将所有基础行一起更新：

```
CREATE TRIGGER sampleTrigger
        ON database1.dbo.balanceTable
        FOR DELETE
    AS
      UPDATE balanceTable t
      SET t.BalanceLeft = t.BalanceLeft + deleted.Amount
      Where t.ID > deleted.ID
    GO 
```

或者如果您根本不想使用触发器，您可以**创建一个包含更新的存储过程，然后在您的应用程序中在删除之前调用它。但是在后者中，您应该在单个事务中执行它们以确保保持数据完整性。**

# sql - SQL中的垂直联合列

> ID：13801450
> 
> 赞同：1
> 
> 时间：2012-12-10T12:59:02.870
> 
> 标签：sql, sql-server, sql-server-2008, tsql

假设这些表：

**组**：（ID，标题）： `{1,G1}, {2,G2}, {3,G3}, {4, G4}`

**类别**：（ID，标题）：`{1, Cat1}, {2, Cat2}, {3, Cat3}, {4, Cat4}`

**产品**：（Id、GroupId、CategoryId、名称）：

```
{1, 1, 1, G1C1P1},
{2, 1, 2, G1C2P2},
{3, 1, 2, G1C2P3},
{4, 2, 2, G2C2P4},
{5, 2, 2, G2C2P5},
{6, 3, 1, G3C1P6},
{7, 3, 3, G3C3P7} 
```

**经销商**：（ID，名称）： `{1, 'Dealer1'}, {2, 'Dealer2'}, {3, 'Dealer3'}`

**ProductDealer**（Id、ProductId（英国）、DealerId、LastSale、编号）：

```
{1, 1, 1, 5, '2012-12-10 12:34:31'}, 
{2, 2, 2, 120, '2012-11-10 12:34:31'}, 
{3, 5, 1, 75, '2012-12-02 12:34:31'} 
```

所以我要创建一个完整的产品视图，这是我的第一次尝试：

```
SELECT 
    [PR].[Id],
    [PR].[Name],
    [PR].[GroupId],
    [GR].[Title] AS [Group],
    [PR].[CategoryId],
    [CA].[Title] AS [Category]

FROM [dbo].[Product] AS [PR]
INNER JOIN [dbo].[Group] AS [GR] ON [PR].[GroupId] = [GR].[Id]
INNER JOIN [dbo].[Category] AS [CA] ON [PR].[CategoryId] = [CA].[Id] 
```

然后我想添加`ProductDealer`列来查看，所以我试试这个：

```
SELECT 
    [PR].[Id],
    [PR].[Name],
    [PR].[GroupId],
    [GR].[Title] AS [Group],
    [PR].[CategoryId],
    [CA].[Title] AS [Category],
    ISNULL(
    (SELECT [PD].[Id] FROM [dbo].[ProductDealer] AS [PD] 
     WHERE [PD].[ProductId] = [PR].[Id]),
     CAST(-1 AS BIGINT)
    ) AS [ProductDealerId],
    ISNULL(
    (SELECT [DE].[Id] FROM [dbo].[Dealer] AS [DE]
    INNER JOIN [dbo].[ProductDealer] AS [PD] ON [DE].[Id] = [PD].[DealerId]
     WHERE [PD].[ProductId] = [PR].[Id]),
     CAST(-1 AS BIGINT)
    ) AS [DealerId],
     ISNULL(
    (SELECT [DE].[Name] FROM [dbo].[Dealer] AS [DE]
    INNER JOIN [dbo].[ProductDealer] AS [PD] ON [DE].[Id] = [PD].[DealerId]
     WHERE [PD].[ProductId] = [PR].[Id]),
     CAST('HaveNotDealer' AS NVARCHAR)
    ) AS [Dealer],
    ISNULL(
    (SELECT [PD].[LastSale] FROM [dbo].[ProductDealer] AS [PD] 
     WHERE [PD].[ProductId] = [PR].[Id]),
    CAST('0001-01-01 00:00:01' AS DATETIME2)
    ) AS [LastSale],
    ISNULL(
    (SELECT [PD].[Number] FROM [dbo].[ProductDealer] AS [PD] 
     WHERE [PD].[ProductId] = [PR].[Id]),
    CAST(0 AS BIGINT)
    ) AS [SaleNumber]

FROM [dbo].[Product] AS [PR]
INNER JOIN [dbo].[Group] AS [GR] ON [PR].[GroupId] = [GR].[Id]
INNER JOIN [dbo].[Category] AS [CA] ON [PR].[CategoryId] = [CA].[Id] 
```

正如您在我写了一个完整的选择查询中的每一列看到的那样，`ProductDealer`我不知道有没有更好的方法来做到这一点？类似于将此列合并到第一个视图，您对最好实施它的建议是什么？

**更新**

在`ProductDealer`表中，`ProductId`是英国，所以每个产品可能有一个经销商或没有经销商，如果产品有经销商，我想要`ProductDealer`查看列，如果没有，则获取我的默认值，例如：（-1，'HaveNotDealer'）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T14:21:52.350

```
SELECT 
    [PR].[Id],
    [PR].[Name],
    [PR].[GroupId],
    [GR].[Title] AS [Group],
    [PR].[CategoryId],
    [CA].[Title] AS [Category],
    ISNULL([PD].[Id],
    CAST(-1 AS BIGINT)) AS [ProductDealerId],
    ISNULL([D].Id,
    CAST(-1 AS BIGINT)) as DealerId,
    ISNULL([D].Name,
    CAST('HaveNotDealer' AS NVARCHAR)) as DealerName,
    ISNULL(PD.LastSale,
    CAST('0001-01-01 00:00:01' AS DATETIME2)) as LastSale,
    ISNULL([PD].Number,
    CAST(0 AS BIGINT)) as SaleNumber

FROM [dbo].[Product] AS [PR]
INNER JOIN [dbo].[Group] AS [GR] ON [PR].[GroupId] = [GR].[Id]
INNER JOIN [dbo].[Category] AS [CA] ON [PR].[CategoryId] = [CA].[Id]
LEFT OUTER JOIN [dbo].[ProductDealer] AS [PD] ON [PR].[Id] = [PD].[ProductId]
LEFT OUTER JOIN [dbo].[Dealer] AS [D] ON [PD].DealerId = [D].Id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T10:36:38.430

这是“垂直联合”版本：

```
WITH "Group"
     AS
     (
      SELECT * 
        FROM (
              VALUES (1,'G1'), (2,'G2'), (3,'G3'), (4, 'G4')
             ) AS T (Id, Title)
     ),
     Category
     AS
     (
      SELECT * 
        FROM (
              VALUES (1, 'Cat1'), (2, 'Cat2'), (3, 'Cat3'), (4, 'Cat4')
             ) AS T (Id, Title)
     ),
     Product
     AS
     (
      SELECT * 
        FROM (
              VALUES (1, 1, 1, 'G1C1P1'),
                     (2, 1, 2, 'G1C2P2'),
                     (3, 1, 2, 'G1C2P3'),
                     (4, 2, 2, 'G2C2P4'),
                     (5, 2, 2, 'G2C2P5'),
                     (6, 3, 1, 'G3C1P6'),
                     (7, 3, 3, 'G3C3P7')
             ) AS T (Id, GroupId, CategoryId, Name)
     ),
     Dealer
     AS
     (
      SELECT * 
        FROM (
              VALUES (1, 'Dealer1'), (2, 'Dealer2'), (3, 'Dealer3')
             ) AS T (Id, Name)
     ),
     ProductDealer 
     AS
     (
      SELECT *
        FROM (
              VALUES (1, 1, 1, 5, '2012-12-10 12:34:31'), 
                     (2, 2, 2, 120, '2012-11-10 12:34:31'), 
                     (3, 5, 1, 75, '2012-12-02 12:34:31')
             ) AS T (Id, ProductId, DealerId, Number, LastSale)
     )     
SELECT PR.Id, PR.Name, PR.GroupId, GR.Title AS "Group",
       PR.CategoryId, CA.Title AS Category, 
       PD.Id AS ProductDealerId,
       D.Id DealerId,
       D.Name AS DealerName,
       PD.LastSale AS LastSale,
       PD.Number AS SaleNumber
  FROM Product AS PR
       JOIN "Group" AS GR ON PR.GroupId = GR.Id
       JOIN Category AS CA ON PR.CategoryId = CA.Id
       JOIN ProductDealer AS PD ON PR.Id = PD.ProductId
       JOIN Dealer AS D ON PD.DealerId = D.Id

UNION

SELECT PR.Id, PR.Name, PR.GroupId, GR.Title AS "Group",
       PR.CategoryId, CA.Title AS Category, 
       PD.Id AS ProductDealerId,
       CAST(-1 AS BIGINT) DealerId,
       CAST('HaveNotDealer' AS NVARCHAR) AS DealerName,
       PD.LastSale AS LastSale,
       PD.Number AS SaleNumber
  FROM Product AS PR
       JOIN "Group" AS GR ON PR.GroupId = GR.Id
       JOIN Category AS CA ON PR.CategoryId = CA.Id
       JOIN ProductDealer AS PD ON PR.Id = PD.ProductId
 WHERE PD.DealerId NOT IN ( SELECT Id FROM Dealer )

UNION

SELECT PR.Id, PR.Name, PR.GroupId, GR.Title AS "Group",
       PR.CategoryId, CA.Title AS Category, 
       CAST(-1 AS BIGINT) AS ProductDealerId,
       CAST(-1 AS BIGINT) DealerId,
       CAST('HaveNotDealer' AS NVARCHAR) AS DealerName,
       CAST('0001-01-01 00:00:01' AS DATETIME2) AS LastSale,
       CAST(0 AS BIGINT) AS SaleNumber
  FROM Product AS PR
       JOIN "Group" AS GR ON PR.GroupId = GR.Id
       JOIN Category AS CA ON PR.CategoryId = CA.Id
 WHERE PR.Id NOT IN ( SELECT ProductId FROM ProductDealer ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-05T18:56:20.193

也许只是在“精神”中回答这个问题，但这是我偶然发现这个问题时正在寻找的“垂直联合列”答案=）

```
with aa(col1, col2) as (
    select * from (values (1,2) ) blah
),
 bb(col3, col4) as (
    select * from (values (5,6) ) blah
)

select select aa.col1, aa.col2, bb.col3, bb.col4
from aa , bb 
```

给

```
col1|col2|col3|col4
1   |2   |5   |6 
```

**免责声明**以上仅适用于单行`aa`，`bb`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T14:26:39.040

像这样：

```
SELECT 
    [PR].[Id],
    [PR].[Name],
    [PR].[GroupId],
    [GR].[Title] AS [Group],
    [PR].[CategoryId],
    [CA].[Title] AS [Category],
    PD.ID AS ProductDealerID,
    PD.DealerId,
    DE.Name AS Dealer,
    PD.LastSale,
    PD.Number AS SaleNumber

FROM [dbo].[Product] AS [PR]
INNER JOIN [dbo].[Group] AS [GR] ON [PR].[GroupId] = [GR].[Id]
INNER JOIN [dbo].[Category] AS [CA] ON [PR].[CategoryId] = [CA].[Id]
LEFT JOIN  ProductDealer AS [PD] ON PD.ProductId = PR.ID
LEFT JOIN  Dealer AS DE ON DE.ID = PD.DealerId 
```

# java - 创建“类”类型的参数化类型

> ID：13801451
> 
> 赞同：1
> 
> 时间：2012-12-10T12:59:05.850
> 
> 标签：java, generics, gson

我发现我的 GSON 问题都与这样一个事实有关，虽然我的返回类型不是参数化对象，但它应该是。现在我需要使用带有参数类型的 Gson.fromJson 方法来指定返回类型，以便 GSON 为我处理它。

我创建了一个名为 RestResponse 的通用类，例如：

```
public class RestResponse<T> {
  private   String      errorMessage;
  private   int         errorReason;
  private   T           result;

  /* (non-Javadoc)
   * @see java.lang.Object#toString()
   */
  @Override
  public String toString() {
    return "RestResponse [errorMessage=" + errorMessage + ", result=" + result + "]";
  }

  /**
   * Does this response contain an error?
   * @return true if in error
   */
  public boolean isInError(){
    return getErrorMessage()!=null;
  }

  /**
   * @return the errorMessage
   */
  public String getErrorMessage() {
    return errorMessage;
  }

  /**
   * @param errorMessage the errorMessage to set
   */
  public void setErrorMessage(String errorMessage) {
    this.errorMessage = errorMessage;
  }

  /**
   * The error reason code
   * @return the errorReason
   */
  public int getErrorReason() {
    return errorReason;
  }

  /**
   * The error reason code
   * @param errorReason the errorReason to set
   */
  public void setErrorReason(int errorReason) {
    this.errorReason = errorReason;
  }

  /**
   * The result of the method call
   * @return the result or null if nothing was returned
   */
  public final T getResult() {
    return result;
  }

  /**
   * The result of the method call
   * @param result the result to set or null if nothing was returned
   */
  public final void setResult(T result) {
    this.result = result;
  }
} 
```

现在我想在另一边创建结果类型。我有一个通用方法，用于解码这些东西并抛出异常或返回结果。

所以我的方法是这样的：

```
public Object submitUrl(String url, Class<?> clazz) throws AjApiException { 
```

其中 clazz 是将在 RestResponse 上指定的类型。

然后我在传递给 GSON 之前创建 RestResponse：

```
Type typeOfT = new TypeToken<RestResponse<clazz>>(){}.getType(); //1-->What goes here?
RestResponse<clazz> restResponse; //2-->and here? 
```

它会出错。有人能告诉我这些地方用什么代替了 clazz 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:03:43.133

不要传入要包装在响应中的类，而是将其指定为方法级别的泛型参数。

```
public <T> T submitUrl(String url) throws AjApiException {
    Type typeOfT = new TypeToken<RestResponse<T>>(){}.getType();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T10:42:19.070

我最终传递了类型而不是类。这解决了问题。

我相信您可以通过执行以下操作来创建类型：

```
Type typeOfT = new TypeToken<RestResponse<T>>(){}.getType(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T20:14:34.197

最简单的方法是方法的调用者，而不是传入一个`Class`对象，而是传入一个`Type`对应于`RestResponse<Whatever>`; 他们可能会使用这个`TypeToken`东西来做到这一点。

否则，您可以自己构建`Type`（特别是 a `ParameterizedType`）。您要么需要创建自己的实现类`ParameterizedType`，要么复制`ParameterizedTypeImpl`某些项目中使用的私有类。

# android - Send and Receive Binary SMS in Android?

> ID：13801452
> 
> 赞同：0
> 
> 时间：2012-12-10T12:59:10.793
> 
> 标签：android, binary-data

I am working on an POC in which my task is to send the DATA SMS or Binary SMS. and Receive the Binary SMS. I am working with the below code but Its failed to send SMS

```
sms.sendDataMessage(dest, src, port, message.getBytes(), sentPI, deliveredPI); 
```

Please let me know the mistake in my code. And Suggest me in this task.

# c# - SQL 语法错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在附近使用的正确语法

> ID：13801453
> 
> 赞同：0
> 
> 时间：2012-12-10T12:59:12.073
> 
> 标签：c#, asp.net, entity-framework

我编写了一个示例代码，使用存储过程和实体框架将数据插入 MySQL 数据库，如下所示：

```
MySqlParameter userName = new MySqlParameter("_UserName", MySqlDbType.VarChar);
userName.Value = txtUserName.Text;
MySqlParameter password = new MySqlParameter("_Password", MySqlDbType.VarChar);
password.Value = txtPassword.Text;
MySqlParameter FirstName = new MySqlParameter("_FirstName", MySqlDbType.VarChar);
FirstName.Value = txtFirstName.Text;
MySqlParameter LastName = new MySqlParameter("_LastName", MySqlDbType.VarChar);
LastName.Value = txtLastName.Text;

entities.ExecuteStoreCommand(
    "uspInsertUsers _UserName,_Password,_FirstName,_LastName",
    userName, password, FirstName, LastName); 
```

我得到一个例外：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'uspInsertUsers 'Dorababu','sae','Dorababu','M'' 附近使用正确的语法

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T17:24:12.317

你有没有尝试过：

```
entities.ExecuteStoreCommand("CALL uspInsertUsers _UserName,_Password,_FirstName,_LastName", userName,password,FirstName,LastName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:31:17.960

最后这对我有用

```
MySqlParameter userName = new MySqlParameter("?UserName", MySqlDbType.VarChar);
userName.Value = txtUserName.Text;
MySqlParameter password = new MySqlParameter("?Password", MySqlDbType.VarChar);
password.Value = txtPassword.Text;
MySqlParameter FirstName = new MySqlParameter("?FirstName", MySqlDbType.VarChar);
FirstName.Value = txtFirstName.Text;
MySqlParameter LastName = new MySqlParameter("?LastName", MySqlDbType.VarChar);
LastName.Value = txtLastName.Text;

entities.ExecuteStoreCommand("CALL uspInsertUsers(?UserName,?Password,?FirstName,?LastName)", userName,password,FirstName,LastName); 
```

# actionscript-3 - Chess Engine - Confusion in engine types - Flash as3

> ID：13801454
> 
> 赞同：0
> 
> 时间：2012-12-10T12:59:15.613
> 
> 标签：actionscript-3, flash, artificial-intelligence, chess

I am not sure this kind of question has been asked before, and been answered, by as far as my search is concerned, I haven't got any answer yet.

First let me tell you my scenario.

I want to develop a chess game in Flash AS3\. I have developed the interface. I have coded the movement of the pieces and movement rules of the pieces. (Please note: Only movement rules yet, not capture rules.)

Now the problem is, I need to implement the AI in chess for one player game. I am feeling helpless, because though I know each and every rules of the chess, but applying AI is not simple at all.

And my biggest confusion is: I have been searching, and all of my searches tell me about the chess engines. But I always got confused in two types of engines. One is for front end, and second is real engines. But none specifies (or I might not get it) which one is for which.

I need a API type of some thing, where when I can get searching of right pieces, and move according to the difficulty. Is there anything like that?

Please note: I want an open source and something to be used in Flash.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:06:27.780

首先[http://nanochess.110mb.com/archive/toledo_javascript_chess_3.html](http://nanochess.110mb.com/archive/toledo_javascript_chess_3.html)这里是原始项目，它在 JavaScript 中实现了一个相对简单的 AI（我认为它只有 2 个步骤）。由于这是一个最小代码的竞赛项目，它通过手工减少源代码而被“混淆”了。这是有人试图将相同的代码恢复到或多或少可读的源：[https](https://github.com/bormand/nanochess) ://github.com/bormand/nanochess 。

我认为写它可能有点太难了，因为你没有人工智能背景......我的意思是，一个好的引擎需要提前两步计算，但只是给你一些数字：数字每一步可能的移动，假设所有棋子都在棋盘上，最大约为 140，因此第二步将是这些移动与对手所有可能移动的所有组合，同样如此多的组合，即 140 * 140 * 140 . 这意味着你需要一种非常好的技术来区分坏的动作并且只尝试预测好的动作。

直到今天，国际象棋还没有确定性的获胜策略（换句话说，它不像其他桌面游戏那样由计算机解决），这意味着它是一个相当复杂的游戏，但是一个可以下棋的人工智能在业余爱好者的水平上并不难想出。

推荐的进一步阅读：[http ://aima.cs.berkeley.edu/](http://aima.cs.berkeley.edu/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:24:21.800

如今的*国际象棋程序*分为两部分：

*   用户界面，提供棋盘、移动视图、时钟等。
*   国际象棋引擎，提供下棋的能力。

这两个程序使用简单的文本协议（[UCI](http://en.wikipedia.org/wiki/Universal_Chess_Interface)或[XBoard](http://en.wikipedia.org/wiki/XBoard)）与作为子进程运行国际象棋引擎并通过管道进行通信的 UI 程序进行通信。

这有几个显着的优点：

*   您只需要一个可以使用任何兼容国际象棋引擎的 UI 程序。
*   由于只需要提供一个简单的界面，因此减少了开发国际象棋引擎的时间。

这也意味着开发人员可以做他们擅长的事情，而不必为了完成*另一*部分工作而成为团队的一员。请注意，国际象棋引擎比当今可用的国际象棋 UI 多得多。

您遇到的问题有几个缺点：

1.  当您使用 Flash 时，您不能使用这两种程序方法（AFAIK Flash 不能使用`fork()`. `exec()`, `posix_spawn()`）。因此，您需要提供所有解决方案，您至少应该尝试使其成为多线程的，以便引擎可以在用户与 UI 交互时工作。
2.  与 C++ 相比，您正在使用一种非常慢的语言，而 C++ 是通常开发引擎的语言。
3.  您可以访问有限的系统资源，尤其是内存。您可以使用 Flash 运行时的某些设置来覆盖它。

如果你想让你的程序真正下棋，那么你需要解决以下问题：

*   移动生成器：生成一个位置的所有合法移动。一些引擎实现不担心“合法”部分并在一段时间后修剪非法移动。但是，您仍然需要在某些时候检测检查、配对、相持情况。
*   职位评估：为给定职位提供分数。如果您无法确定一个位置是否比另一侧更好，那么您就无法找到获胜的动作*。*
*   移动树和修剪：您需要存储正在评估的移动序列以及修剪（忽略）您不感兴趣的分支的方法（通常是因为您已确定它们很弱）。考虑到对每一个可能的移动的每一个可能的回复，一个国际象棋移动树是巨大的，修剪树是管理这个的方法。
*   换位表：国际象棋中有许多换位（通过以不同顺序移动棋子到达的位置）。避免重新评估您已经评估过的位置的一种方法是将位置分数存储在换位表中。为此，您需要为该位置提供一个哈希键，这通常使用[Zobrist hash](http://en.wikipedia.org/wiki/Zobrist_hashing)实现。

获得更多详细信息的最佳网站（我不是国际象棋引擎作者）将是：

*   [国际象棋论坛](http://www.talkchess.com/forum/index.php)
*   [国际象棋编程维基](http://chessprogramming.wikispaces.com/)

祝你好运，请随时向我们发布您的进展！

# jquery - 如何将模型数组发送到主干中的 Post API 方法？

> ID：13801461
> 
> 赞同：1
> 
> 时间：2012-12-10T12:59:44.073
> 
> 标签：jquery, asp.net-mvc, backbone.js

我在我的 mvc 应用程序中使用了主干.js，我有一个场景，我必须将一个数组传递给我在 Rest API 中的 Post 方法。我正在尝试发送一系列模型，然后调用`this.collection.create(model)`. 我试图将 Post 方法称为

```
var myArrayofModels = JSON.stringify(e.models);
this.collection.create(myArrayofModels ); 
```

这`e.models`是一个模型数组，我将其转换为 json 并调用 Post 方法，我想像这样在 Post 方法上接收模型数组

```
public HttpResponseMessage Post(InsuranceAddressViewModel[] model)
{
    return null;
} 
```

但是我在 Post 方法中得到了空数组。我将模型数组转换为 json 的方法是好的还是必须做其他事情。我已经尝试了几个解决方案，但无法理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:45:55.330

答案可以在[Stack Overflow](https://stackoverflow.com/questions/6879138/how-to-save-an-entire-collection-in-backbone-js-backbone-sync-or-jquery-ajax)上找到。基本上，您将集合存储在模型中，然后覆盖模型中的 toJSON 方法。一个简单的例子可以在下面看到。

```
var ModelArray = Backbone.Model.extend({
  toJSON: function() {
     return this.collection.toJSON();
  }
});

var modelCollection = new ModelArray({ collection: collectionOfModels })

modelCollection.save(); 
```

然后，您的控制器应获取您尝试保存的正确格式化的模型数组。

# xml - 使用 MSTest 的 VS2010 中的数据驱动测试错误

> ID：13801464
> 
> 赞同：0
> 
> 时间：2012-12-10T12:59:51.323
> 
> 标签：xml, visual-studio-2010, unit-testing, mstest

我使用测试驱动开发为我的雇主构建了一堆测试。我现在正在尝试将数据驱动开发用于这些测试。不幸的是，每当我尝试使用 XML 文件设置数据连接字符串时，Visual Studio 2010 总是给我同样的错误。

我在网站上没有足够高的声誉来发布图片。错误提示：“尝试从中采样数据时出错，请确保文件有效。

我尝试了一个简单的 XML 文件，而不是更复杂的文件。我已将文件的“复制到输出目录”属性设置为“始终复制”。我试图手动填写数据源属性而不是使用向导。我已经去测试-> 编辑本地测试设置并启用部署。我没有想法，任何人都可以帮忙。也许这是我制作 xml 文件的方式？我一直在记事本+中构建它们并使用.xml保存。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:13:58.957

这听起来像您的测试无法找到 XML 文件的物理位置。

查看 MSDN 文章[How to: Create a Data-Driven Unit Test](http://msdn.microsoft.com/en-us/library/ms182527%28v=vs.100%29.aspx)以了解如何实现数据驱动测试，包括示例 ConnectionString。

还要确保在对话框`Test -> Edit test settings -> Local (local.testsettings)`下 CheckBox`Deployment -> Enable deployment`已激活。这会强制部署您的文件，而不仅仅是依赖于属性。有关更多说明，请参阅这篇文章[MSTest Aggravation and a Solution (For Me Anyway)](http://marknic.net/tag/data-driven-testing/)。

# regex - sed 脚本中的正则表达式问题

> ID：13801466
> 
> 赞同：0
> 
> 时间：2012-12-10T13:00:03.900
> 
> 标签：regex, bash, sed

我遇到了一个有趣的正则表达式问题，我在一个小的 sed 脚本（bash）中使用它，这里是：

```
cities="new york;milan;rome;paris;london"
 echo ${cities} | sed 's/new.*;//' 
```

这将打印： London
基本上脚本会替换所有内容，直到最后一个分号出现，而我想要的是简单地删除匹配的内容（新。*）直到第一次出现分号 有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:03:58.720

你需要做一个非贪婪的替换：

```
sed 's/new[^;]*;//' 
```

如果您的数据字符串不以分号结尾，这将不起作用。在这种情况下，您可以执行以下操作：

```
sed 's/new[^;]*//g; s/;;/;/g; s/^;|;$//g' 
```

### 编辑

正如 Ed 在评论中所指出的，第二种解决方案不保留空字段。如果需要这样做（据我测试过）：

```
sed 's/;?new[^;]*$|new[^;]*;//g' 
```

# php - HTML form generator

> ID：13801469
> 
> 赞同：1
> 
> 时间：2012-12-10T13:00:08.030
> 
> 标签：php, forms, html-generation

I want a library to generate standards compliant HTML form.

Some expected features:

*   Efficiency with large form fields
*   Validation (client side /server side)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:09:02.457

Zend 框架具有相当先进的表单支持，可以独立使用（即无需 Zend MVC 框架）。

Jonahlyn Gilstrap 写了一篇关于如何做到这一点的精彩文章：http: [//jonahlyn.heroku.com/blog/2011/04/06/using-zend-form-without-the-framework](http://jonahlyn.heroku.com/blog/2011/04/06/using-zend-form-without-the-framework)

如果您打算制作多个表单，这当然是一个好主意，但是如果您只需要一个或两个表单（如果只是因为它在实践中可能会限制您如何布局和设置它们的样式），则为它们使用框架可能会过大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:09:31.897

如果表单是您的应用程序的重复元素，您应该选择一种库以确保它们保持一致，无论是您的还是第三方的，而不是普通的 HTML 代码[当然，您也将生成它作为输出]。

您可以使用Symfony[中的表单组件[](https://github.com/symfony/Form) [guide here](http://symfony.com/doc/current/book/forms.html) ]，这也意味着使用 Request 组件，因为您需要将请求本身绑定到表单，验证输入等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T13:04:30.727

在框架中，您通常有一个引擎可以为您执行此操作。例如在[cakephp](http://cakephp.org/)中，您可以使用[FormHelper 类](http://api.cakephp.org/class/form-helper)中的函数，如下所示：

```
echo $this->Form->create();
echo $this->Form->input('User.name');
echo $this->Form->end(); 
```

没有“表单库”之类的东西，但您可以想象为自己创建一个可以处理大量 html 生成的好类并不难。

# java - 如何在 Crystal Reports java 上设置记录选择公式

> ID：13801472
> 
> 赞同：1
> 
> 时间：2012-12-10T13:00:20.967
> 
> 标签：java, swing, crystal-reports, crystal-reports-xi

您如何使用 java 在水晶报表上以编程方式创建/设置记录选择公式？我尝试在 Internet 上搜索，但唯一的选择是通过需要 Crystal Report Server 的 IFilter。我的程序只使用 JRC 库。这也是一个使用 swing 的 java 桌面应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-23T11:40:46.743

可能有点晚了，但也许这对某人有用：

```
reportClientDoc.getDataDefController().getRecordFilterController().setFormulaText("your record selection formula here"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-09T09:21:50.303

我正在对此进行一些研究，并注意到有 3 种方法可以做到这一点：

1.  使用SAP提供的本[例](http://scn.sap.com/docs/DOC-6304)所示[`IFilter`界面](https://help.sap.com/javadocs/bip/40/ras/en/com/crystaldecisions/sdk/occa/report/data/IFilter.html)

    ```
    // Set the filter string to be used as the Record Filter
    String freeEditingFilter = "{Customer.Country} = 'Canada'";
    // Retrieve the record filter for the Data Definition Controller
    IFilter iFilter = clientDoc.getDataDefController().getDataDefinition().getRecordFilter();
    // Set the filter to free editing text filter string
    iFilter.setFreeEditingText(freeEditingFilter);
    // Modify the filter through the Record Filter Controller to the report
    clientDoc.getDataDefController().getRecordFilterController().modify(iFilter); 
    ```

    我只在没有 Crystal Report Server 的情况下使用 JRC，上面的示例对我有用。

2.  正如弗朗西斯科在他的回答中所说，使用该[`setFormulaText`](https://help.sap.com/javadocs/bip/40/ras/en/com/crystaldecisions/sdk/occa/report/application/FilterController.html#setFormulaText(java.lang.String))方法：

    ```
    clientDoc.getDataDefController().getRecordFilterController().setFormulaText("{Customer.Country} = 'Canada'"); 
    ```

3.  使用参数。可以使用代码将参数传递给报告（您可以使用`addDiscreteParameterValue`帮助程序类中的函数），也可以在运行时由用户填写。我选择不选择此选项，因为它们不能设置为可选

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-11T12:42:39.067

如果要创建程序的水晶报告，则需要另一个软件的 jar 文件。您可以在 NetBeans IDE 中创建程序，并将您的 IDE 与 NetBeans 中用于在 java 中创建报告的 IReport 软件链接。你从互联网上得到了很多关于这个的例子。

# java - How do I implement lazy initialization for a member arraylist variable in Java?

> ID：13801476
> 
> 赞同：2
> 
> 时间：2012-12-10T13:00:43.943
> 
> 标签：java, lazy-loading, lazy-initialization

I have a class with as `private List<String> children;` which is currently initialized in the constructor but this is not always needed and I want to initialize it only when some other function need it.

The whole point is to rework current implementation without changing to much code.

I know how to do it in other languages, but Java knowledge is quite limited, so far.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T13:08:21.313

说清楚，这是实现它的一种方法：

```
public class Whatever 
{
    private List<String> children;

    public List<String> getChildren
    {
        if ( children == null ) { children = new ArrayList<String>(); }
        return children;
    }
    ...
} 
```

另外，记得写例如。`addChild( String child )`就`get`'er而言，而不是直接访问该字段。如果你真的很偏执和/或在线程环境中并且创建需要很长时间，你可能想要制作 block `synchronized`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T13:03:38.503

如果`children`为空，您可以在 getter 中创建它。注意正确的同步。如果`children`创建成本不高，并且您不会创建大量实例，那就急于求成。为您省去麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T13:04:34.583

在 java 中，将数据传输对象的成员变量隐藏在访问器方法（臭名昭著的 java bean 的 getter 和 setter）后面是一种常见的做法。如果你这样做，你可以在你的`List getChildren() 方法中添加任何你想要的逻辑（在第一次调用时创建列表，将不可变列表返回给外部客户端等）

# java - NoTypeConversionAvailableException : When using interface as Apache Camel Proxy

> ID：13801483
> 
> 赞同：1
> 
> 时间：2012-12-10T13:01:06.877
> 
> 标签：java, apache-camel

I have an interface which I am using as camel proxy [Using Camel Proxy](http://camel.apache.org/using-camelproxy.html). My route is as below:

```
from("direct:services")
        .onException(Exception.class)
        .process(new Processor() {
            @Override
            public void process(Exchange arg0) throws Exception {
                Exception e = arg0.getProperty(Exchange.EXCEPTION_CAUGHT, Exception.class);
                    LOGGER.error(e, e.getMessage());
            }
        }).handled(true).end()
        .setHeader(Exchange.HTTP_URI, simple("${body.url}"))
        .setHeader(Exchange.HTTP_METHOD,simple("${body.httpMethod}"))
        .setHeader(Exchange.CONTENT_TYPE, simple("${body.contentType}"))
        .setBody(simple("${body.requestBody}"))
        .choice()
        .when(simple("${body.proxyRequired} == 'true'"))
        .inOut("{{http.urlProxy}}")
        .otherwise()
        .inOut("{{http.url}}")
        .end()
        .setBody(bean(appUtil, "extractResponse")); 
```

The interface is :

```
public interface ApiServices {

    ServiceProviderResponse performOperation(ServiceProviderRequest request);

} 
```

And the ServiceProviderResponse and ServiceProviderRequest classes :

```
public class ServiceProviderRequest {

    private String url;
    private String requestBody;
    private String httpMethod;
    private String contentType;
    private boolean proxyRequired;
    private Map<String, String> headers;

//getters and setters

}

public class ServiceProviderResponse {

    private int statusCode;
    private String body;
    private String errorMessage;
    private String contentType;
    private String url;

//getters and setters
} 
```

This is how this whole thing is working :

```
@Produce(uri = "direct:services")
ApiServices appServices;

ServiceProviderResponse response =  appServices.performOperation(request); 
```

Earlier my interface's method was : `ServiceProviderResponse performOperation(String url);` and it worked fine(ofcourse my route was different earlier). So is it something that we cannot use custom object types like this? The exception that I get :

```
Caused by: org.apache.camel.InvalidPayloadException: No body available of type: com.common.util.ServiceProviderResponse but has value: BeanInvocation public abstract com.common.util.ServiceProviderResponse com.common.util.ApiServices.performOperation(com.common.util.ServiceProviderRequest) with [com.common.util.ServiceProviderRequest@4ce55b]] of type: org.apache.camel.component.bean.BeanInvocation on: Message: BeanInvocation public abstract com.common.util.ServiceProviderResponse com.common.util.ApiServices.performOperation(com.common.util.ServiceProviderRequest) with [com.common.util.ServiceProviderRequest@4ce55b]]. Caused by: No type converter available to convert from type: org.apache.camel.component.bean.BeanInvocation to the required type: com.common.util.ServiceProviderResponse with value BeanInvocation public abstract com.common.util.ServiceProviderResponse com.common.util.ApiServices.performOperation(com.common.util.ServiceProviderRequest) with [com.common.util.ServiceProviderRequest@4ce55b]]. Exchange[Message: BeanInvocation public abstract com.common.util.ServiceProviderResponse com.common.util.ApiServices.performOperation(com.common.util.ServiceProviderRequest) with [com.common.util.ServiceProviderRequest@4ce55b]]]. Caused by: [org.apache.camel.NoTypeConversionAvailableException - No type converter available to convert from type: org.apache.camel.component.bean.BeanInvocation to the required type: com.common.util.ServiceProviderResponse with value BeanInvocation public abstract com.common.util.ServiceProviderResponse com.common.util.ApiServices.performOperation(com.common.util.ServiceProviderRequest) with [com.common.util.ServiceProviderRequest@4ce55b]]]
    at org.apache.camel.impl.MessageSupport.getMandatoryBody(MessageSupport.java:102)
    at org.apache.camel.component.bean.AbstractCamelInvocationHandler.getBody(AbstractCamelInvocationHandler.java:58)
    at org.apache.camel.component.bean.AbstractCamelInvocationHandler.afterInvoke(AbstractCamelInvocationHandler.java:148)
    at org.apache.camel.component.bean.AbstractCamelInvocationHandler$1.call(AbstractCamelInvocationHandler.java:85)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at org.apache.camel.component.bean.AbstractCamelInvocationHandler.invokeWithbody(AbstractCamelInvocationHandler.java:101)
    at org.apache.camel.component.bean.CamelInvocationHandler.invoke(CamelInvocationHandler.java:44)
    ... 43 more
Caused by: org.apache.camel.NoTypeConversionAvailableException: No type converter available to convert from type: org.apache.camel.component.bean.BeanInvocation to the required type: com.common.util.ServiceProviderResponse with value BeanInvocation public abstract com.common.util.ServiceProviderResponse com.common.util.ApiServices.performOperation(com.common.util.ServiceProviderRequest) with [com.common.util.ServiceProviderRequest@4ce55b]]
    at org.apache.camel.impl.converter.BaseTypeConverterRegistry.mandatoryConvertTo(BaseTypeConverterRegistry.java:147)
    at org.apache.camel.impl.MessageSupport.getMandatoryBody(MessageSupport.java:100)
    ... 50 more 
```

Exception says something about TypeConverters, do I need to implement a type converter also now ? If yes how to do it? I have already gone through Camel docs for type converter but I dont understand from it much. Also I guess most of you have understood what I want to achieve, so if you guys have any different methods to accomplish this or some suggestions, please post it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T15:32:58.560

您将消息正文设置为 bean(appUtil, "extractResponse") 这基本上意味着：

'将消息体设置为 bean(args) 方法返回的对象"

如果 appUtil 是一个 bean，extractResponse 是一个返回 ServiceProviderResponse 实例的方法，那么而不是：

```
 .setBody(bean(appUtil, "extractResponse")); 
```

尝试：

```
//call to bean() as a last thing in your route def
//...
.bean(appUtil, "extractResponse"); // without the wrapping setBody call. 
```

extractResponse 应声明为：

```
ServiceProviderResponse extractResponse(WhateverBodyTypeYouHadOnRoute body) {
    //return ...
} 
```

# c# - 将 DropDownList 与客户端 JS PageMethods 绑定

> ID：13801485
> 
> 赞同：0
> 
> 时间：2012-12-10T13:01:14.990
> 
> 标签：c#, javascript, asp.net, drop-down-menu, pagemethods

我正在尝试`bind a state ddl by onChange of country ddl`使用`PageMethods`

**aspx 中的 JS 代码**

```
function GetStates() {
 var e = document.getElementById("<%=ddlCountry.ClientID %>");
 var Countryid = e.options[e.selectedIndex].value;
 PageMethods.GetStates(Countryid,ShowStates);
}

function ShowStates(results)
{
  document.getElementById("li2").innerHTML=results;
} 
```

**.CS 代码**

```
[System.Web.Services.WebMethod]
public static string GetStates(int Cid)
{
    DataSet dstFillState = Tbl_State.FillDDLState(Cid);
    string strHTML = "<select id='ddlState' name='ddlState'>";
    foreach (DataRow row in dstFillState.Tables[0].Rows) // Loop over the rows.
    {
     strHTML = strHTML + "<option value=" + (string)row["Id"] +">" + (string)row["State"] +"</option>";
    }
    strHTML = strHTML + "</select>";
    return strHTML;
} 
```

**错误信息**

```
The server method 'GetStates' failed with the following error: System.InvalidCastException-- Unable to cast object of type 'System.Int32' to type 'System.String'. 
```

我作为浏览器弹出窗口收到此错误。我在这里缺少什么？

**解决方案**

我认为这里的问题是 CS 和 JS 函数的同名 GetStates，我进行了更改并且它起作用了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:06:36.187

我认为问题出在一线

```
foreach (DataRow row in dstFillState.Tables[0].Rows) // Loop over the rows.
{
 strHTML = strHTML + "<option value=" + (string)row["Id"] +">" + (string)row["State"] +"</option>";
} 
```

你应该这样使用

```
foreach (DataRow row in dstFillState.Tables[0].Rows) // Loop over the rows.
{
 strHTML = strHTML + "<option value='" +row["Id"].ToString() +"'>" + row["State"].ToString() +"</option>";
} 
```

甚至

```
foreach (DataRow row in dstFillState.Tables[0].Rows) // Loop over the rows.
{
 strHTML = strHTML + "<option value='" + row["Id"] +"'>" + row["State"] +"</option>";
} 
```

这是一个很好的例子
[Invalid postback or callback argument。当使用 jquery 填充下拉列表并且有回发时](https://stackoverflow.com/questions/12490236/invalid-postback-or-callback-argument-when-dropdown-list-populated-with-jquery)

# java - Proguard剩菜剩饭

> ID：13801494
> 
> 赞同：0
> 
> 时间：2012-12-10T13:01:47.263
> 
> 标签：java, android, proguard

当我们在以下代码上运行 proguard 时，它应该删除 Logging 语句：

```
Log.d(TAG, "field= "+field+“ : enhancedfield=”+enhancedfield); 
```

但是...编译后你会看到：

```
Log.d(TAG, new StringBuilder().append("Field= ").append(field)
     .append(“ : enhancedfield=”).append(enhancedfield).toString()); 
```

现在，当我们对此运行 proguard 时，你会得到一些剩菜：

```
new StringBuilder().append("Field= ").append(field)
    .append(“ : enhancedfield=”).append(enhancedfield).toString(); 
```

这会将信息泄露给潜在的黑客......

我能做什么：声明一个`final static boolean`并且仅在值为`true`. 因为该值可以在编译时确定，所以当该值为 false 时将不包含日志记录代码。但这污染了我的代码，所以我对此并不满意。

现在我的问题：我怎样才能改善这种行为？留下更少的剩菜并泄露更少的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:44:44.213

您可以通过强制将语句分开来阻止编译器使用 Stringbuilder：

```
Log.d(TAG, "field:");
Log.d(TAG, field);
Log.d(TAG, "enhancedfield:");
Log.d(TAG, enhancedfield); 
```

这当然会影响日志的结果（4 行而不是 1 行），并且代码不是很容易维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:33:12.090

这是问题[在 ProGuard 优化期间删除未使用的字符串](https://stackoverflow.com/questions/6009078/removing-unused-strings-during-proguard-optimisation)的副本。您可以定义自己的日志记录方法以避免 StringBuilder 调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T13:28:25.123

日志字符串在混淆中总是一个问题，它们不能被混淆掉，你只能将它们移动到一个单独的类中，这没有多大帮助。

该字符串的加密会更安全。在我们的实践中，我们不太关心，在非常特殊的算法中，这是技术的核心，一旦您知道这些方法可以正常工作，您就可以完全删除日志记录。

使用静态最终布尔值 isDebug 的缺点是您无法再启用日志记录，您必须重新构建并安装调试版本。

解决方案是否带有 statcic final dbg = false
：

```
if (dbg) Log.d("unwanted debug log"); 
```

真的污染你的代码？

# php - Joomla 模块和 Jquery

> ID：13801495
> 
> 赞同：0
> 
> 时间：2012-12-10T13:01:49.310
> 
> 标签：php, jquery, ajax, joomla, joomla2.5

我有一个包含三个下拉菜单的模块，在一个类中，相互依赖。我有第一个从 MySQL 加载数据的下拉菜单。我希望第二个根据第一个选择的值加载数据。目前我有这个代码：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">
function curPageURL() {
    var pathname = window.location.pathname;
    return pathname;
}

$(document).ready(function(){
    $('#art1').change(function(){
       var $height = $('#art2') ;
       $height.find('option:not([value=default])').remove();
       $.getJSON(curPageURL(), {height:$(this).val()}, function(heights){
          $.each(heights, function(index, height){
              $height.append('<option value="'+height[0]+'">'+height[1]+'</option>');
          });
       });
    });
});
</script> 
```

这进入了`default.php`，如果设置了高度，它将执行另一个类的 MySQL 语句，它工作正常，然后将其编码为`json`. 但是萤火虫给了我这个错误

> 错误：JSON.parse：意外字符

当我查看数据时，它返回了一个完整的 html 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:29:06.033

我通过将我的模块与本教程 [http://forum.joomla.org/viewtopic.php?p=2424982之后的组件连接来解决了这个问题](http://forum.joomla.org/viewtopic.php?p=2424982)

# ruby-on-rails - 具有多个 Rails 应用程序的单个 Heroku URL，使用来自亚马逊云的相同模型/授权

> ID：13801501
> 
> 赞同：0
> 
> 时间：2012-12-10T13:02:01.793
> 
> 标签：ruby-on-rails, database, heroku, amazon, dynamic-pages

我正在使用在 Heroku 上运行的 Rails。我在亚马逊 S3 上提供资产。主 URL 主要是静态页面。是时候添加一些动态页面（我想我会使用 amazon 作为数据库？）、论坛、文件管理（上传/下载、标记）、交互式培训等等。

我的想法是为 URL 的每个动态部分创建新的应用程序。这将减小 slug 的大小，并且不允许静态页面上的人使用其他“部分”（或应用程序）的资源，反之亦然。所以我会有一个用户应用程序、论坛应用程序、培训应用程序等。

这些单独的应用程序中的每一个都需要针对用户帐户进行身份验证。没有理由每个应用程序都应该有单独的重复用户数据库......所以我有点不清楚不同的应用程序如何针对同一个数据库授权帐户并将“会话”从一个应用程序传递到下一个应用程序。是否像确保每个应用程序具有相同的 database.yml 和相同的模型一样简单？将我的会话存储到数据库中？使用 AJAX 调用 USER 应用程序？

我不喜欢这样，我将维护几个包含相同布局（为了一致性）的存储库，并且我认为相同的模型和 database.yml。但是为了最大化 heroku slug 和“重构”应用程序，这似乎是值得的？

此外，如果这些应用程序中的每一个都是新域：app1.mysite.com、app2.mysite.com 或只是 mysite.com/app1 mysite.com/app2

在启动我的第一个动态站点时，我已经做了很多学习，并且正在寻找方向和资源来解决多个应用程序共享数据库的问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:07:19.243

在我看来，您应该只创建一个应用程序并将您的控制器、模型和视图存储在不同的目录中。您将能够在整个站点中使用相同的模型，并且维护起来会容易得多。

此外，您的会话问题将不再是问题，您可以按照自己的方式组织路线。

# c# - AJAX 工具包和列表视图

> ID：13801503
> 
> 赞同：0
> 
> 时间：2012-12-10T13:02:05.303
> 
> 标签：c#, asp.net, visual-studio-2010, entity-framework, ajaxcontroltoolkit

![在此处输入图像描述](../Images/2b760b247799266198fb71d6ca16d908.png)我正在开发一个 Web 应用程序。关于这个问题的过程是我正在使用实体框架模型从数据库中获取用户评论。我正在使用列表视图来显示客户姓名、评级和评论。问题是我正在使用一个名为 HTMLEditor 的 Ajax 工具包控件来在 DB 中存储评论，所以当我必须显示评论时，我需要相同的控件，即 HTML 编辑器。现在，当我使用以下代码为列表视图创建 ITEMTEMPLATE 时，

```
 <ItemTemplate>
<tr style="background-color:#EDECB3;color: #000000;"> 
<td><%# Eval("CustomerName")%></td>
    <td> <img src='Styles/Images/ReviewRating<%# Eval("Rating") %>.png' alt="">
    <br />
    </td>
    <td> <cc1:Editor ID="Comments" runat="server" Text="<%#Eval("Comments") %>"/>
    </td>
    </tr>
    </ItemTemplate> 
```

一切正常，除了线路

```
 <td> <cc1:Editor ID="Comments" runat="server" Text="<%#Eval("Comments") %>"/>
        </td> 
```

它说服务器标签格式不正确。请帮忙。

更新错误：我添加了 nounicode="true"。我遇到的错误是

> 找不到适合指定区域性或中性区域性的任何资源。确保“AjaxControlToolkit.Properties.Resources.NET4.resources”在编译时正确嵌入或链接到程序集“AjaxControlToolkit”中，或者所有所需的附属程序集都是可加载的并且完全签名。

![显示列表视图中的编辑器的屏幕截图](../Images/ba4076323bbec2605973dd6c2ae4fc4c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:15:26.453

试试下面的代码：

文本='<%#Eval("评论") %>'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:53:46.070

使用页面上的 ScriptManager 可以解决问题。至于在 HTML Editor 中显示 HTML 文本的问题，我决定不使用 Ajax Control Toolkit 中的 HTML Editor。相反，我使用像这样的 html 解码实用程序在页面上显示了 html 文本，

```
<%#Server.HtmlDecode(Eval("Comments").ToString()) %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T13:04:29.020

你应该试试

```
<cc1:Editor ID="Comments" runat="server" Text="<%#Eval('Comments') %>"/> 
```

文本属性不一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T11:14:38.333

“rr_only4you”告诉答案是正确的，我得到了像使用一击一样的错误

文本="<%#Eval("评论") %>"

之后我将其更改为

Text='<%# Eval("评论") %>'

这种格式会更正，

你用这个

<cc1:Editor ID="Comments" runat="server"><%# Eval("Comments") %></cc1>

# linux - MinGW 上的 libbfd 缺少哪些库

> ID：13801506
> 
> 赞同：0
> 
> 时间：2012-12-10T13:02:31.263
> 
> 标签：linux, hyperlink, g++, mingw

我尝试编译这段代码：[http](http://www.mr-edd.co.uk/code/stack_trace) ://www.mr-edd.co.uk/code/stack_trace ，在这个建议中给出：[Win32 API stack walk with MinGW/MSYS?](https://stackoverflow.com/questions/3318564/win32-api-stack-walk-with-mingw-msys)

我的命令行是：

```
i586-mingw32msvc-g++ src/stack.cpp -L. -lbfd -lintl -liconv -ldbghelp -limagehlp -limagehlp -liberty  -I./include/   -D__MINGW32__ 
```

这是我得到的：

```
./libbfd.a(opncls.o):(.text+0x5ee): undefined reference to `_fcntl'
./libbfd.a(bfdio.o):(.text+0x16b): undefined reference to `___errno'
./libbfd.a(bfdio.o):(.text+0x199): undefined reference to `___errno'
./libbfd.a(bfdio.o):(.text+0x1b0): undefined reference to `___errno'
./libbfd.a(bfdio.o):(.text+0x3de): undefined reference to `_fcntl'
./libbfd.a(bfdio.o):(.text+0x3f9): undefined reference to `_fcntl'
./libbfd.a(bfdio.o):(.text+0x509): undefined reference to `___errno'
./libbfd.a(bfdio.o):(.text+0x6e6): undefined reference to `___errno'
./libbfd.a(bfdio.o):(.text+0x706): undefined reference to `___errno'
./libbfd.a(bfdio.o):(.text+0x388): undefined reference to `_ftello'
./libbfd.a(bfdio.o):(.text+0x398): undefined reference to `_fseeko'
./libbfd.a(bfd.o):(.text+0xb6): undefined reference to `___errno'
./libbfd.a(bfd.o):(.text+0xdc): undefined reference to `___getreent'
./libbfd.a(bfd.o):(.text+0x104): undefined reference to `___getreent'
./libbfd.a(bfd.o):(.text+0x120): undefined reference to `___getreent'
./libbfd.a(bfd.o):(.text+0x145): undefined reference to `___getreent'
./libbfd.a(bfd.o):(.text+0x2f0): undefined reference to `___getreent'
./libbfd.a(bfd.o):(.text+0x30e): more undefined references to `___getreent' follow
./libbfd.a(compress.o):(.text+0x19): undefined reference to `_compressBound'
./libbfd.a(compress.o):(.text+0x53): undefined reference to `_compress'
./libbfd.a(compress.o):(.text+0x1df): undefined reference to `_inflateEnd'
./libbfd.a(compress.o):(.text+0x33f): undefined reference to `_inflateInit_'
./libbfd.a(compress.o):(.text+0x364): undefined reference to `_inflateReset'
./libbfd.a(compress.o):(.text+0x38e): undefined reference to `_inflate'
./libbfd.a(syms.o):(.text+0x78a): undefined reference to `_filename_ncmp'
./libbfd.a(archive.o):(.text+0x108): undefined reference to `_filename_ncmp'
./libbfd.a(archive.o):(.text+0x88d): undefined reference to `___errno'
./libbfd.a(archive.o):(.text+0xa05): undefined reference to `___errno'
./libbfd.a(archive.o):(.text+0xa2c): undefined reference to `___errno'
./libbfd.a(archive.o):(.text+0xc16): undefined reference to `___errno'
./libbfd.a(archive.o):(.text+0x1e8a): undefined reference to `_filename_ncmp'
./libbfd.a(archive.o):(.text+0x2f6f): undefined reference to `_getuid'
./libbfd.a(archive.o):(.text+0x2f7a): undefined reference to `_getgid'
./libbfd.a(archive.o):(.text+0x3014): undefined reference to `___errno'
./libbfd.a(archive.o):(.text+0x3570): undefined reference to `_getuid'
./libbfd.a(archive.o):(.text+0x3577): undefined reference to `_getgid'
./libbfd.a(elf32.o):(.text+0x25e3): undefined reference to `___errno'
./libbfd.a(elf32.o):(.text+0x2767): undefined reference to `___errno'
./libbfd.a(elf32.o):(.text+0x278d): undefined reference to `___errno'
./libbfd.a(elf.o):(.text+0x4c6c): undefined reference to `___getreent'
./libbfd.a(elf.o):(.text+0x4c7c): undefined reference to `___getreent'
./libbfd.a(elf.o):(.text+0x4cad): undefined reference to `___getreent'
./libbfd.a(elf.o):(.text+0x4cd1): undefined reference to `___getreent'
./libbfd.a(elf.o):(.text+0x4ce9): undefined reference to `___getreent'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: Offset (8688) greater than or equal to .debug_abbrev size (760).
./libintl.a(dcigettext.o):dcigettext.c:(.text+0x4a5): undefined reference to `_pthread_rwlock_rdlock'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '0', this reader only handles version 2 and 3 information.
./libintl.a(dcigettext.o):dcigettext.c:(.text+0x500): undefined reference to `_pthread_rwlock_unlock'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '20039', this reader only handles version 2 and 3 information.
./libintl.a(dcigettext.o):dcigettext.c:(.text+0x605): undefined reference to `_pthread_rwlock_wrlock'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '8259', this reader only handles version 2 and 3 information.
./libintl.a(dcigettext.o):dcigettext.c:(.text+0x65c): undefined reference to `_pthread_rwlock_unlock'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '11829', this reader only handles version 2 and 3 information.
./libintl.a(dcigettext.o):dcigettext.c:(.text+0x678): undefined reference to `_pthread_mutex_lock'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '12033', this reader only handles version 2 and 3 information.
./libintl.a(dcigettext.o):dcigettext.c:(.text+0x712): undefined reference to `___errno'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '12146', this reader only handles version 2 and 3 information.
./libintl.a(dcigettext.o):dcigettext.c:(.text+0x727): undefined reference to `_pthread_mutex_unlock'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '12131', this reader only handles version 2 and 3 information.
./libintl.a(dcigettext.o):dcigettext.c:(.text+0x7a2): undefined reference to `_pthread_mutex_unlock'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '27491', this reader only handles version 2 and 3 information.
./libintl.a(dcigettext.o):dcigettext.c:(.text+0x995): undefined reference to `_pthread_rwlock_unlock'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '29541', this reader only handles version 2 and 3 information.
./libintl.a(dcigettext.o):dcigettext.c:(.text+0x9c9): undefined reference to `_pthread_mutex_unlock'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '29797', this reader only handles version 2 and 3 information.
./libintl.a(dcigettext.o):dcigettext.c:(.text+0x9f5): undefined reference to `_pthread_mutex_lock'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '29816', this reader only handles version 2 and 3 information.
./libintl.a(dcigettext.o):dcigettext.c:(.text+0xa12): undefined reference to `_pthread_mutex_unlock'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '29797', this reader only handles version 2 and 3 information.
./libintl.a(dcigettext.o):dcigettext.c:(.text+0xa75): undefined reference to `___errno'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '29816', this reader only handles version 2 and 3 information.
./libintl.a(dcigettext.o):dcigettext.c:(.text+0xa86): undefined reference to `_pthread_rwlock_rdlock'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '12590', this reader only handles version 2 and 3 information.
./libintl.a(dcigettext.o):dcigettext.c:(.text+0xd20): undefined reference to `_pthread_rwlock_wrlock'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '11825', this reader only handles version 2 and 3 information.
./libintl.a(dcigettext.o):dcigettext.c:(.text+0xd4b): undefined reference to `_pthread_rwlock_unlock'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '12082', this reader only handles version 2 and 3 information.
./libintl.a(dcigettext.o):dcigettext.c:(.text+0xd67): undefined reference to `___errno'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '12131', this reader only handles version 2 and 3 information.
./libintl.a(dcigettext.o):dcigettext.c:(.text+0xd83): undefined reference to `_pthread_rwlock_unlock'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '29812', this reader only handles version 2 and 3 information.
./libintl.a(dcigettext.o):dcigettext.c:(.text+0xe51): undefined reference to `___errno'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '11636', this reader only handles version 2 and 3 information.
./libintl.a(dcigettext.o):dcigettext.c:(.text+0xe73): undefined reference to `___errno'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '14385', this reader only handles version 2 and 3 information.
./libintl.a(dcigettext.o):dcigettext.c:(.text+0xf3c): undefined reference to `_pthread_rwlock_unlock'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '12590', this reader only handles version 2 and 3 information.
./libintl.a(dcigettext.o):dcigettext.c:(.text+0xf71): undefined reference to `___errno'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '29797', this reader only handles version 2 and 3 information.
./libintl.a(dcigettext.o):dcigettext.c:(.text+0xfc1): undefined reference to `_getuid'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '29816', this reader only handles version 2 and 3 information.
./libintl.a(dcigettext.o):dcigettext.c:(.text+0xfc8): undefined reference to `_geteuid'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '28527', this reader only handles version 2 and 3 information.
./libintl.a(dcigettext.o):dcigettext.c:(.text+0x10b4): undefined reference to `_getgid'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '11823', this reader only handles version 2 and 3 information.
./libintl.a(dcigettext.o):dcigettext.c:(.text+0x10bb): undefined reference to `_getegid'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: Offset (11108) greater than or equal to .debug_abbrev size (433).
./libintl.a(loadmsgcat.o):loadmsgcat.c:(.text+0x17): undefined reference to `_pthread_mutex_lock'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '0', this reader only handles version 2 and 3 information.
./libintl.a(loadmsgcat.o):loadmsgcat.c:(.text+0xc8): undefined reference to `_mmap'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '20039', this reader only handles version 2 and 3 information.
./libintl.a(loadmsgcat.o):loadmsgcat.c:(.text+0x18e): undefined reference to `_munmap'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '8259', this reader only handles version 2 and 3 information.
./libintl.a(loadmsgcat.o):loadmsgcat.c:(.text+0x1b0): undefined reference to `_pthread_mutex_unlock'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '11829', this reader only handles version 2 and 3 information.
./libintl.a(loadmsgcat.o):loadmsgcat.c:(.text+0x1ca): undefined reference to `___errno'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '12033', this reader only handles version 2 and 3 information.
./libintl.a(loadmsgcat.o):loadmsgcat.c:(.text+0x383): undefined reference to `_pthread_rwlock_init'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '12146', this reader only handles version 2 and 3 information.
./libintl.a(loadmsgcat.o):loadmsgcat.c:(.text+0xfbd): undefined reference to `_munmap'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: Offset (400) greater than or equal to .debug_abbrev size (238).
./libintl.a(localcharset.o):localcharset.c:(.text+0x11): undefined reference to `_nl_langinfo'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: Offset (1252) greater than or equal to .debug_abbrev size (264).
./libintl.a(finddomain.o):finddomain.c:(.text+0x17): undefined reference to `_pthread_rwlock_rdlock'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '0', this reader only handles version 2 and 3 information.
./libintl.a(finddomain.o):finddomain.c:(.text+0x87): undefined reference to `_pthread_rwlock_unlock'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '20039', this reader only handles version 2 and 3 information.
./libintl.a(finddomain.o):finddomain.c:(.text+0x15d): undefined reference to `_pthread_rwlock_wrlock'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '8259', this reader only handles version 2 and 3 information.
./libintl.a(finddomain.o):finddomain.c:(.text+0x1cb): undefined reference to `_pthread_rwlock_unlock'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: Offset (1604) greater than or equal to .debug_abbrev size (528).
./libintl.a(log.o):log.c:(.text+0xe7): undefined reference to `_pthread_mutex_lock'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '0', this reader only handles version 2 and 3 information.
./libintl.a(log.o):log.c:(.text+0x247): undefined reference to `_pthread_mutex_unlock'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: Offset (436) greater than or equal to .debug_abbrev size (265).
./libintl.a(plural-exp.o):plural-exp.c:(.text+0x4e): undefined reference to `__imp____ctype_ptr__'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: Offset (1504) greater than or equal to .debug_abbrev size (357).
./libintl.a(l10nflist.o):l10nflist.c:(.text+0x2e0): undefined reference to `_argz_next'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '0', this reader only handles version 2 and 3 information.
./libintl.a(l10nflist.o):l10nflist.c:(.text+0x469): undefined reference to `_argz_stringify'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '20039', this reader only handles version 2 and 3 information.
./libintl.a(l10nflist.o):l10nflist.c:(.text+0x48a): undefined reference to `_argz_count'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '8259', this reader only handles version 2 and 3 information.
./libintl.a(l10nflist.o):l10nflist.c:(.text+0x4f9): undefined reference to `__imp____ctype_ptr__'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '11829', this reader only handles version 2 and 3 information.
./libintl.a(l10nflist.o):l10nflist.c:(.text+0x558): undefined reference to `__imp____ctype_ptr__'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: Offset (2788) greater than or equal to .debug_abbrev size (665).
./libintl.a(localealias.o):localealias.c:(.text+0xd6): undefined reference to `__imp____ctype_ptr__'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '0', this reader only handles version 2 and 3 information.
./libintl.a(localealias.o):localealias.c:(.text+0x464): undefined reference to `_pthread_mutex_lock'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '20039', this reader only handles version 2 and 3 information.
./libintl.a(localealias.o):localealias.c:(.text+0x4f1): undefined reference to `_pthread_mutex_unlock'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: Offset (178020) greater than or equal to .debug_abbrev size (1313).
./libiconv.a(iconv.o):iconv.c:(.text+0x11177): undefined reference to `___errno'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found address size '85', this reader can not handle sizes greater than '8'.
./libiconv.a(iconv.o):iconv.c:(.text+0x1122f): undefined reference to `___errno'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '20039', this reader only handles version 2 and 3 information.
./libiconv.a(iconv.o):iconv.c:(.text+0x11246): undefined reference to `___errno'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '8259', this reader only handles version 2 and 3 information.
./libiconv.a(iconv.o):iconv.c:(.text+0x11262): undefined reference to `___errno'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '11829', this reader only handles version 2 and 3 information.
./libiconv.a(iconv.o):iconv.c:(.text+0x1127d): undefined reference to `___errno'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '12033', this reader only handles version 2 and 3 information.
./libiconv.a(iconv.o):iconv.c:(.text+0x112a6): more undefined references to `___errno' follow
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '12146', this reader only handles version 2 and 3 information.
./libiconv.a(iconv.o):iconv.c:(.text+0x113fb): undefined reference to `___locale_mb_cur_max'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '12131', this reader only handles version 2 and 3 information.
./libiconv.a(iconv.o):iconv.c:(.text+0x114d4): undefined reference to `___errno'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '27491', this reader only handles version 2 and 3 information.
./libiconv.a(iconv.o):iconv.c:(.text+0x1153f): undefined reference to `___errno'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '29541', this reader only handles version 2 and 3 information.
./libiconv.a(iconv.o):iconv.c:(.text+0x1160d): undefined reference to `___errno'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '25193', this reader only handles version 2 and 3 information.
./libiconv.a(iconv.o):iconv.c:(.text+0x1161e): undefined reference to `___errno'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '28271', this reader only handles version 2 and 3 information.
./libiconv.a(iconv.o):iconv.c:(.text+0x11631): undefined reference to `___errno'
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/bin/ld: Dwarf Error: found dwarf version '26988', this reader only handles version 2 and 3 information.
./libiconv.a(iconv.o):iconv.c:(.text+0x11732): more undefined references to `___errno' follow
/usr/lib/gcc/i586-mingw32msvc/4.2.1-sjlj/../../../../i586-mingw32msvc/lib/libmingw32.a(main.o):(.text+0x85): undefined reference to `_WinMain@16'
collect2: ld returned 1 exit status 
```

试图搜索其中一些符号，但没有运气。谁能帮我？PS：为什么没有索引库的服务？提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:07:34.667

您的库似乎来自不同的编译器或编译器版本。重新安装/重建一切应该会有所帮助。

但是，最好的方法是切换到`dbg`. 它就像`stack_trace`，但完全重写并在更自由的许可下。它不依赖于`libfd`.

# sql-server-2008 - sql server express 2008 r2 和 VS2012，不受信任的域

> ID：13801510
> 
> 赞同：0
> 
> 时间：2012-12-10T13:02:40.047
> 
> 标签：sql-server-2008, visual-studio-2012

我在一台带有 SQL Server 2008 R2 的虚拟机中安装了 Windows XP Pro，而在同一 LAN 和与 VS2012 相同的工作组中的其他计算机。

当我尝试在 VS2012 中创建新连接时，我可以看到服务器名称，但是当我试图查看数据库时，我收到一个错误，我正在尝试从不受信任的域进行连接。

我想知道是否可以在 windows XP Pro 中创建一个域并将我的两台计算机添加到同一个域中。

目前，SQL Server 仅使用 Windows 身份验证，但没有 SQL Server 身份验证，因为我想避免将用户名和密码放在我的应用程序配置文件的连接字符串中。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:20:45.927

你需要一个域控制器来创建一个域，所以恐怕只有 XP Pro 不会这样做。

但是，如果您在两台机器上都有一个具有相同用户名和密码的 Windows 帐户，那么它应该仍然“正常工作”。您不能将 Windows 用户名/密码放在 SQL 连接字符串中 - 您需要以该用户身份运行您的代码。这可以通过使用 RunAs 启动应用程序来完成（shift+右键单击快捷方式并选择“Run as...”，或在命令提示符下使用 RunAs）。

这很脆弱，但只要您确保密码保持同步，那么您应该没问题。

# sql - SQL - 围绕 AND 的 IF 语句

> ID：13801511
> 
> 赞同：4
> 
> 时间：2012-12-10T13:02:44.803
> 
> 标签：sql, sql-server-2008, if-statement

我正在尝试创建一个仅在满足某些条件时添加 AND 子句的查询。

这就是我所追求的：

```
SELECT DISTINCT
  id
  name
  active
FROM team
WHERE id = 1234
IF team.active = 'y'
  AND team.id IN
    {
       query
    }
ELSEIF team.active = 'n'
  AND team.id IN
    {
      query
    } 
```

但我不确定如何在 SQL 中执行此操作。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T13:06:24.793

```
 SELECT DISTINCT
    id
    name
    active
    FROM team
 WHERE id = 1234
   AND (team.active = 'y'
     AND team.id IN
        {
          query
        }) 
   OR
    (team.active = 'n'
     AND team.id IN
      {
        query
      }) 
```

您使用 AND 和 OR 连接词来创建逻辑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T13:07:17.147

您可以像这样使用布尔逻辑

```
SELECT ...
FROM team
WHERE id = 1234
    AND (
        (team.active = 'y' AND team.id IN query)
        OR
        (team.active = 'n' AND team.id IN query)
    ) 
```

我错过了两个分支的区别吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T13:13:41.680

您可以使用 decode 语句来实现结果

```
SELECT DISTINCT
  id
  name
  active
FROM team
WHERE id = 1234 and
team.id in (
decode (team.active,'y',(query),'n',(query)) 
```

你也可以使用 case 语句

# linux - 如何编写在第一个命令后输入密码的bash脚本？

> ID：13801513
> 
> 赞同：2
> 
> 时间：2012-12-10T13:02:48.157
> 
> 标签：linux, bash

> **可能重复：**
> [使用期望将密码传递给 ssh](https://stackoverflow.com/questions/459182/using-expect-to-pass-a-password-to-ssh)

我想与远程机器建立 ssh 连接，而不是使用 ssh 命令以及机器地址和密码，我只想编写一个小函数，对机器执行 ssh 命令并在服务器询问后输入密码。我可以编写 ssh 部分，但是当主机要求它时，我怎样才能制作进入通行证的脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T13:09:01.120

您可以使用`expect`脚本。您可以从 cmd 行传递参数。我写的示例代码：

```
#!/usr/bin/expect

set timeout 100
set host [lindex $argv 0]
set username [lindex $argv 1]
set password [lindex $argv 2]
set command [lindex $argv 3]

spawn ssh $username@$host $command
#puts $command
expect {
    "(yes/no)?"
        {
            send "yes\n"
            expect "*assword:" { send "$password\n"}
        }
    "*assword:"
        {
            send "$password\n"
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:06:34.587

您可以使用 它正是您需要的：[`Expect tool`](http://en.wikipedia.org/wiki/Expect)

**编辑**

```
#!/usr/bin/expect
set timeout 60
set user "yourName"
set machine "nameOfYourMachine"
set password "yourPassword"
set command "command that you want execute via ssh"
spawn ssh $user@$machine 
while {1} {
expect {
      eof                          {break}
      "The authenticity of host"   {send "yes\r"}
      "password:"                  {send "$password\r"}
      "*\]"                        {send "exit\r"}
      "bash"                        {send "$command"}
}
}
wait
close $spawn_id 
```

只需根据需要解决它

# c# - 设置文件所有者抛出 InvalidOperation 异常

> ID：13801514
> 
> 赞同：1
> 
> 时间：2012-12-10T13:02:49.397
> 
> 标签：c#, security

我正在使用下面的代码来更改文件的所有者。此代码在用 C# 4.0 版编写的 Windows 服务中运行。它在本地服务器上运行，运行 Windows Server 2008 R2 Standard，Service Pack 1。

我需要将通过 FTP 接收的文件的所有者更改为域帐户。我可以登录到该框并使用资源管理器手动执行此操作，但是当我尝试通过代码运行此操作时，我得到一个 InvalidOperation 异常。我可以将所有者更改为本地系统帐户，但不能更改为网络帐户。对此的任何帮助将不胜感激。

我正在使用一些奇怪的 Microsoft Dynamics AX 代码来处理 EDI 文件。该过程要求文件的所有者是有效的 DAX 用户，在本例中为域用户。我们有供应商通过 FTP 向我们发送 EDI 数据。我们的 DAX 应用程序每 10 分钟检查一次 FTP 目录并处理文件。该过程当前失败，因为所有者无效。因此，我编写了一个服务来在文件到达时更改文件的所有者。但是，下面的代码失败，代码示例下方显示异常。

```
var ediFileOwner = new NTAccount("MyDomain", _ediEndpointUserAccount);

var fileSecurity = File.GetAccessControl(fileName);

var everyone = new SecurityIdentifier(WellKnownSidType.WorldSid, null);

fileSecurity.AddAccessRule(new FileSystemAccessRule(everyone, FileSystemRights.FullControl, AccessControlType.Allow));
fileSecurity.AddAccessRule(new FileSystemAccessRule(ediFileOwner, FileSystemRights.TakeOwnership, AccessControlType.Allow));

fileSecurity.SetOwner(ediFileOwner); //Change our owner from to our desired User

File.SetAccessControl(fileName, fileSecurity); 
```

这是完整的例外：

```
System.InvalidOperationException: The security identifier is not allowed to be the owner of this object.
at System.Security.AccessControl.NativeObjectSecurity.Persist(String name, SafeHandle handle, AccessControlSections includeSections, Object exceptionContext)
at System.Security.AccessControl.NativeObjectSecurity.Persist(String name, AccessControlSections includeSections, Object exceptionContext)
at System.Security.AccessControl.NativeObjectSecurity.Persist(String name, AccessControlSections includeSections)
at System.Security.AccessControl.FileSystemSecurity.Persist(String fullPath)
at System.IO.File.SetAccessControl(String path, FileSecurity fileSecurity) 
```

**更新**

如果我将运行服务的帐户更改为我试图更改为所有者的帐户，我会得到一个不同的异常。

> 意外异常：System.UnauthorizedAccessException：试图执行未经授权的操作。在 System.Security.AccessControl.Win32.SetSecurityInfo（ResourceType 类型、字符串名称、SafeHandle 句柄、SecurityInfos 安全信息、SecurityIdentifier 所有者、SecurityIdentifier 组、GenericAcl sacl、GenericAcl dacl）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:55:44.480

我最终使用了我在这里找到的一些代码，[http://www.codeproject.com/Articles/10090/A-small-C-Class-for-impersonating-a-User](http://www.codeproject.com/Articles/10090/A-small-C-Class-for-impersonating-a-User)

为了完成所有事情，我不得不跳过几圈，但它奏效了。为了避免我遇到的错误，除了在整个用户之间切换之外，我还必须使用我发现的 Impersonate 东西。

```
using System.IO;
using System.Security.AccessControl;
using System.Security.Principal;

// ...        

//Copy the file. This allows our service account to take ownership of the copied file
var tempFileName = Path.Combine(Path.GetDirectoryName(file.FileName), "TEMP_" + file.FileNameOnly);
File.Copy(file.FileName, tempFileName);

var windowID = WindowsIdentity.GetCurrent();

var currUserName = windowID.User.Translate(typeof(NTAccount)).Value;
var splitChar = new[] { '\\' };

//var name = currUserName.Split(splitChar)[1];
//var domain = currUserName.Split(splitChar)[0];

var ediFileOwner = new NTAccount("TricorBraun", _radleyEDIEndpointUserAccount);

//We have to give Access to the service account to delete the original file
var fileSecurity = File.GetAccessControl(file.FileName);
var everyone = new SecurityIdentifier(WellKnownSidType.WorldSid, null);
fileSecurity.AddAccessRule(new FileSystemAccessRule(everyone, FileSystemRights.FullControl, AccessControlType.Allow));
File.SetAccessControl(file.FileName, fileSecurity);
File.Delete(file.FileName);

//We rename our file to get our original file name back
File.Move(tempFileName, file.FileName);

//The following give our desired user permissions to take Ownership of the file.
//We have to do this while running under the service account.
fileSecurity = File.GetAccessControl(file.FileName);
var aosSID =  (SecurityIdentifier) ediFileOwner.Translate(typeof(SecurityIdentifier));
fileSecurity.AddAccessRule(new FileSystemAccessRule(aosSID, FileSystemRights.FullControl, AccessControlType.Allow));
File.SetAccessControl(file.FileName, fileSecurity);

//Now we user the Impersonator (http://www.codeproject.com/Articles/10090/A-small-C-Class-for-impersonating-a-User)
//This allows us to manage the file as the Account we wish to change ownership to.
//It makes itself the owner.
using (new Impersonator(_radleyEDIEndpointUserAccount, "MyDomain", "password")) {
    _logger.Debug(string.Format("Attempting changing owner to Tricorbraun\\{0}", _radleyEDIEndpointUserAccount));
    fileSecurity = File.GetAccessControl(file.FileName);
    fileSecurity.SetOwner(ediFileOwner); //Change our owner from LocalAdmin to our chosen DAX User
    _logger.Debug(string.Format("Setting owner to Tricorbraun - {0}", _radleyEDIEndpointUserAccount));
    File.SetAccessControl(file.FileName, fileSecurity);
} 
```

# python - 如何在 django 中修改管理模板

> ID：13801515
> 
> 赞同：3
> 
> 时间：2012-12-10T13:02:50.733
> 
> 标签：python, django

我为管理站点使用 django 的默认管理员，并创建了一个名为“项目”的应用程序 ![在此处输入图像描述](../Images/1ac52a2f709ad7c0e57a4ac67072918d.png)

然后在项目更改表单中，我想显示动态图像，我打算使用 google API 绘制一些图表，所以我必须将更改 html 表单添加到 html 文件中，如下所示：

![在此处输入图像描述](../Images/82b22d658af67aed86145f5c7c0138fa.png)

所以我的问题是我如何修改这个页面的django默认模板，我在模板/文件夹中找不到表单，这个页面是否名为“change_form”？“更改列表”？或其他一些名称。如果是这样，我如何只更改应用程序“项目”的表单，因为也许我会创建一些与“项目”处于同一级别的其他应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:12:44.280

您需要一个有效的静态文件的位置。

然后在该静态文件目录中放置一个管理目录。

然后将您的 addname 添加为如下目录：

```
Root
  yourapp
     static
        admin
           yourapp
               file_to_overwrite 
```

找到你的 Django 文件。然后转到： **contrib/admin/templates/admin**

在 OSX 上，这将是：

**/Library/Python/2.7/site-packages/django/contrib/admin/templates/admin**

将您要覆盖的文件复制到您的应用程序目录，如上。

**编辑：**

如果您想为单个应用更改单个表单：

例如：

```
Root
  yourapp
     static
        admin
           yourapp
               modelname
                   change_form.html 
```

只有模型“modelname”会受到这个 html 文件的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-12T17:17:40.587

正如文档所建议的那样，执行此操作的一个好方法是使用@Rickard Zachrisson 答案，但不要复制它，而是使用“扩展”块并导入超级。

这应该是一种更好的方法，因为您不是直接覆盖管理模板而是继承它们。

这就是[文档](https://docs.djangoproject.com/en/1.11/ref/contrib/admin/javascript/)在插入 JS 时建议的方式，例如：

```
{% extends 'admin/change_form.html' %}
{% load static %}

{% block admin_change_form_document_ready %}
{{ block.super }}
<script type="text/javascript" src="{% static 'app/formset_handlers.js' %}"></script>
{% endblock %} 
```

# windows - CreateProcess 执行 Windows 命令

> ID：13801517
> 
> 赞同：3
> 
> 时间：2012-12-10T13:03:02.680
> 
> 标签：windows, winapi, cmd, createprocess

我正在尝试使用 CreateProcess 函数执行 dos 命令：

```
 LPWSTR cmd=(LPWSTR)QString("C:\\windows\\system32\\cmd.exe  subst " + DLetter+"  \""+mountPath+"\"").utf16();

        STARTUPINFO si;
        PROCESS_INFORMATION pi;
        ZeroMemory( &si, sizeof(si) );
        si.cb = sizeof(si);
        ZeroMemory( &pi, sizeof(pi) );

        if ( CreateProcessW(0,     // Application name
                           cmd,                 // Application arguments
                           NULL,
                           NULL,
                           TRUE,
                           0,
                           NULL,
                           L"C:\\windows\\system32",          // Working directory
                           &si,
                           &pi) == TRUE)
        { ... 
```

它给出了最后一个错误 3 = ERROR_PATH_NOT_FOUND，当我将应用程序路径`"C:\\windows\\system32\\cmd.exe"`与命令分开时，它显示控制台而不执行我的 subst 命令。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T13:06:59.540

您需要在`cmd.exe`.

```
/C 执行字符串指定的命令，然后终止
/K 执行字符串指定的命令，但保持不变

```

如果没有这些选项，`subst`您传递的命令将被忽略。

话虽如此，`subst`至少在我的 Windows 7 机器上，并没有在`cmd.exe`. 它是一个单独的可执行文件。所以你可以直接调用它并`cmd.exe`完全绕过它。

关于您的来电，`CreateProcess`我有以下意见：

1.  不要包括路径`C:\\windows\\system32`。只需调用`subst.exe`并让系统使用标准搜索路径定位可执行文件。
2.  传`FALSE`为`bInheritHandles`. 您没有将任何句柄传递给新进程，因此您不需要新进程来继承您的句柄。
3.  `NULL`作为工作目录传递。只是没有必要在这里指定它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:08:53.757

尝试使用

```
"C:\\windows\\system32\\cmd.exe /c subst " + DLetter+"  \""+mountPath+"\"" 
```

反而。CMD 不会接受没有`/c`or的参数`/k`，除非您想在控制台窗口中查看输出，否则只需使用`/c`.

# batch-file - 使用批处理脚本删除子文件夹中的 .txt 文件

> ID：13801520
> 
> 赞同：3
> 
> 时间：2012-12-10T13:03:11.197
> 
> 标签：batch-file

> **可能重复：**
> [使用批处理脚本删除子文件夹中的文件](https://stackoverflow.com/questions/13800575/delete-files-in-subfolder-using-batch-script)

我必须从子文件夹（同名）中删除 .txt 文件。我的文件路径如下。

d:\test\test1\archive*.txt d:\test\try\archive*.txt d:\test\model\archive*.txt

我尝试使用“del”命令删除上述路径中的“.txt”文件。但是“test”文件夹中有100多个文件夹。所以很难对每条路径都使用“del”。

除了“存档”文件夹的父文件夹名称外，所有路径的所有内容都保持不变。所以我想可能有一些简单的方法可以使用批处理脚本删除文件。

谁能指导我是否有任何简单的方法可以使用批处理脚本删除 .txt 文件或者我必须为所有 100 个文件夹重复“del”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T13:14:14.620

```
del /s *.txt 
```

希望它有帮助。所有最好的伙伴

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T13:08:51.573

`del /s *.txt`将删除当前工作目录的所有子文件夹中的所有 TXT 文件。

（但请小心使用该命令 - 错误的父目录，您将丢弃计算机上的所有文本文件 :)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T13:33:10.730

*已编辑*

```
del /s d:\test\archive\*.txt 
```

这应该让你所有的文本文件

或者，

我修改了一个我已经写过的脚本来寻找某些文件来移动它们，这个应该去查找文件并删除它们。它允许您通过选择屏幕选择到哪个文件夹。

不过，请在使用之前在您的系统上进行测试。

```
@echo off
Title DeleteFilesInSubfolderList
color 0A
SETLOCAL ENABLEDELAYEDEXPANSION

REM ---------------------------
REM   *** EDIT VARIABLES BELOW ***
REM ---------------------------

set targetFolder=
REM targetFolder is the location you want to delete from    
REM ---------------------------
REM  *** DO NOT EDIT BELOW ***
REM ---------------------------

IF NOT DEFINED targetFolder echo.Please type in the full BASE Symform Offline Folder (I.E. U:\targetFolder)
IF NOT DEFINED targetFolder set /p targetFolder=:
cls
echo.Listing folders for: %targetFolder%\^*
echo.-------------------------------
set Index=1
for /d %%D in (%targetFolder%\*) do (
  set "Subfolders[!Index!]=%%D"
  set /a Index+=1
)
set /a UBound=Index-1
for /l %%i in (1,1,%UBound%) do echo. %%i. !Subfolders[%%i]!

:choiceloop
echo.-------------------------------
set /p Choice=Search for ERRORS in: 
if "%Choice%"=="" goto chioceloop
if %Choice% LSS 1 goto choiceloop
if %Choice% GTR %UBound% goto choiceloop
set Subfolder=!Subfolders[%Choice%]!
goto start

:start
TITLE Delete Text Files - %Subfolder%
IF NOT EXIST %ERRPATH% goto notExist
IF EXIST %ERRPATH% echo.%ERRPATH% Exists - Beginning to test-delete files...
echo.Searching for .txt files...
pushd %ERRPATH%
for /r %%a in (*.txt) do (
echo "%%a" "%Subfolder%\%%~nxa"
)
popd
echo.
echo.
verIFy >nul
echo.Execute^?
choice /C:YNX /N /M "(Y)Yes or (N)No:"
IF '%ERRORLEVEL%'=='1' set question1=Y
IF '%ERRORLEVEL%'=='2' set question1=N
IF /I '%question1%'=='Y' goto execute
IF /I '%question1%'=='N' goto end

:execute
echo.%ERRPATH% Exists - Beginning to delete files...
echo.Searching for .txt files...
pushd %ERRPATH%
for /r %%a in (*.txt) do (
del "%%a" "%Subfolder%\%%~nxa"
)
popd
goto end

:end
echo.
echo.
echo.Finished deleting files from %subfolder%
pause
goto choiceloop
ENDLOCAL
exit

REM Created by Trevor Giannetti
REM An unpublished work
REM (October 2012) 
```

如果你改变

```
set targetFolder= 
```

到您想要的文件夹，不会提示您输入该文件夹。*请记住，在放入基本路径时，格式末尾不包含“\”。例如 d:\test c:\temp

希望这可以帮助

# sql - 如何将透视列转换为行？

> ID：13801522
> 
> 赞同：0
> 
> 时间：2012-12-10T13:03:22.960
> 
> 标签：sql, sql-server-2008, tsql, unpivot

我有一个包含结果的表

```
Donna F. Carreras|Alexander J. Deborde|John  Ford|Marjorie M. Lee| Crystal C Zhu
176          |    246         |     312  |           502 |    19969 
```

我希望它显示为：

```
176     Donna F. Carreras
246     Alexander J. Deborde
312     John Ford
502     Marjorie M. Lee
19969   Crystal C Zhu 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:06:35.310

在 SQL Server 中，您可以应用以下[`UNPIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)功能：

```
select value, col
from yourtable
unpivot
(
  value
  for col in ([Donna F. Carreras], [Alexander J. Deborde], 
              [John Ford], [Marjorie M. Lee], [Crystal C Zhu])
) un 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/41ed5/1)

或者您可以使用`UNION ALL`查询：

```
select [Donna F. Carreras] value, 'Donna F. Carreras' col
from yourtable
union all
select [Alexander J. Deborde] value, 'Alexander J. Deborde' col
from yourtable
union all
select [John Ford] value, 'John Ford' col
from yourtable
union all
select [Marjorie M. Lee] value, 'Marjorie M. Lee' col
from yourtable
union all
select [Crystal C Zhu] value, 'Crystal C Zhu' col
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/41ed5/2)

两者都产生相同的结果：

```
| VALUE |                  COL |
--------------------------------
|   176 |    Donna F. Carreras |
|   246 | Alexander J. Deborde |
|   312 |            John Ford |
|   502 |      Marjorie M. Lee |
| 19969 |        Crystal C Zhu | 
```

# python - python 如何循环一个函数

> ID：13801524
> 
> 赞同：1
> 
> 时间：2012-12-10T13:03:33.043
> 
> 标签：python, time

> **可能重复：**
> [在 Python 中每 x 秒重复执行一个函数的最佳方法是什么？](https://stackoverflow.com/questions/474528/what-is-the-best-way-to-repeatedly-execute-a-function-every-x-seconds-in-python)

嗨，这是我的代码：

```
client = myclient(info1,info2)
                sellor()
                Contractor() 
```

它工作得很好，但我想做的是让python无限期地每60秒启动一次该代码......我实际上不明白我如何将代码与时间循环放在一起感谢任何帮助谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T13:08:13.513

如果 60 秒忽略了执行代码所需的时间）：

```
from time import sleep

while True:
    sleep(60)
    # your code here 
```

但如果 60 秒考虑到执行代码所需的时间：

```
from time import sleep
from os import fork       
while True:
    sleep(60)
    fork() # create child process
    # your code here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T13:07:36.567

使用[睡眠](http://docs.python.org/2/library/time.html#time.sleep)方法。只需创建一个循环（while、for、whatever）并在每次迭代时休眠 60 秒。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T13:10:32.807

```
import time

while True:

  client = myclient(info1,info2)
            sellor()
            Contractor()
            time.sleep(10) 
```

希望它有效，所有最好的伙伴

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T13:28:59.950

```
import time

repeat_time = 3.0

while True:
    start_time = time.time()

    # Your code goes here

    time.sleep(max(repeat_time - (time.time() - start_time), 0.0)) 
```

并且您的代码将在每个“repeat_time”执行一次

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T13:31:44.720

您可以使用已经提到的睡眠。但是因为您自己的函数运行所需的时间可能是可变的，这并不一定意味着您的函数每 60 秒运行一次。

如果每次启动函数之间的时间间隔接近 60 秒很重要，则可以使用时间。我还没有尝试过，但是类似

```
import time

while True:
    # Get the current time 
    startTime = time.time()

    # Your functions
    client = myclient(info1,info2)
    sellor()
    Contractor()

    delay = True
    while delay:
        if time.time() - startTime > 60:
            delay = False # Break the delay 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T13:46:41.937

您可能还会想到只通过 Windows 调度程序来调度任务。这样做的好处是脚本一旦运行就结束，然后在预定的时间间隔后再次执行脚本。在第二种方法中，脚本实例进程似乎会持续运行，并且只使用 sleep 函数在指定时间内什么都不做。如果脚本在任何情况下都失败，我会采用这种方式，您可能必须检查以重新启动脚本。作为计划的活动，脚本将在任何情况下以指定的时间间隔执行。

您可能也不希望进程线程继续运行以执行 python 脚本。我将对此进行研究，与此同时，您可能会听到我们其他人的意见。

问候， 哈沙尔

# jquery - 更改链接方法以使用 jquery 删除，但仍会收到发布请求

> ID：13801526
> 
> 赞同：1
> 
> 时间：2012-12-10T13:03:37.533
> 
> 标签：jquery, ruby-on-rails

我有非常简单的 ajax 投票计数器，带有 +/- 来添加/删除投票。

```
<div class="points pull-left">
  <a rel="nofollow" data-remote="true" data-method="post" href="/entry_votes?id=135">+</a>
  <span id="entry135">2</span>
</div> 
```

当我单击`+`它为 entry_votes 视图运行 js 时，更改 span 值（在本例中为 3），更改`+`为`-`，`data-method`to`delete`并添加`class="unvote"`

它适用于以下代码：

创建.js

```
$("#entry<%=@entry.id%>").html("<%=@entry.points_count%>")
$("#entry<%=@entry.id%>").siblings().replaceWith('<%= link_to "-",entry_vote_path(id: @entry.id),method: :delete, remote: true, class: "unvote"%>') 
```

销毁.js

```
$("#entry<%=@entry.id%>").html("<%=@entry.points_count%>");
$("#entry<%=@entry.id%>").siblings().replaceWith('<%=link_to "+",entry_votes_path(id: @entry.id),method: :post,remote: true %>'); 
```

我不想replaceWith，但只是toggle `data-method`，+/-和class =“”/“unvoted”，所以我写了这样的东西：

创建.js

```
$("#entry<%=@entry.id%>").html("<%=@entry.points_count%>")
$("#entry<%=@entry.id%>").siblings().attr("data-method","delete").addClass("unvote").html("-") 
```

当我第一次单击它时它可以正常工作，一切都像我想要的那样改变。例如`+2`更改为`-3`，现在当我单击它时，即使更改为删除，`-`它仍会运行操作。知道为什么吗？`create``data-method`

# php - 禁用基于登录用户凭据的按钮。

> ID：13801534
> 
> 赞同：-2
> 
> 时间：2012-12-10T13:04:15.720
> 
> 标签：php

我有一个可供多个用户访问的页面。每个人登录，一个 PHP 页面查找用户并验证该人。这也可以提取有关用户等级的信息。如果等级等于 1a 或 1b，我想禁用附加的搜索按钮，其他人都可以。我有其他 javascript 禁用了 DIV，但我无法让它在这里工作。

```
 <div id="footer" style="background-color:#3399cc;clear:both;text-align:center;"><font  color="#000099">DJR</font>
    <a href="change.php"class="buttons">Change password</a>
    <a href="out.php" class="buttons">Logout</a>
    <a href="search.php" class="buttons">Search</a>
    <a href="Calendar.php" class="buttons">Calendar</a>
    <a href="AL.php" class="buttons">Leave</a>
    </div> 
```

这就是我获取有关当前用户的信息的方式！

```
 $fgmembersite->userID(); 
```

如果这等于除 1a 和 1b 之外的任何值，则启用它。再次提前感谢，在这个网站上总是有很大的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:31:09.310

为什么要向用户显示禁用的按钮？只需回应他们可以使用的那些。

```
<?php 
  if(($fgmembersite->userID() == '1a') || ($fgmembersite->userID() == '1b')){
    echo '
      //echo buttons allowed to 1a and 1b users (or nothing at all)
    ';
  }
    else{
      echo '
        //echo buttons not allowed to 1a and 1b users (or nothing at all)
      ';
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:14:16.573

下面的伪代码可以帮助你

```
<a href="search.php" class="buttons" <?php if(//users grade is 1a or 1b) { ?> onClick="return false;" <?php } ?> >Search</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T13:07:15.203

用这个

```
<?php
    <a href="search.php" class="buttons"<?php if( $fgmembersite->userID()<>'1a' or  $fgmembersite->userID()<>'1b'  ){
echo " disabled='disabled' ";
}?>>Search</a>
?> 
```

# file - 在 Magento 中将产品添加到购物车时如何设置“文件”类型的自定义选项？

> ID：13801535
> 
> 赞同：5
> 
> 时间：2012-12-10T13:04:17.173
> 
> 标签：file, magento, option, cart

使用我自己的控制器，我将产品添加到 Magento 购物车。它有 3 个自定义选项：2 个下拉选项（颜色和大小）和一个文件选项（设计）。将产品添加到购物车的代码是

```
// obtain the shopping cart
$cart = Mage::getSingleton('checkout/cart');

// load the product
$product = Mage::getModel('catalog/product')
    ->load($productId);

// do some magic to obtain the select ids for color and size ($selectedSize and $selectedColor)
// ...

// define the buy request params
$params = array(
    'product'       => $productId,
    'qty'           => $quantity,
    'options'       => array(
        $customOptionSize->getId()  => $selectedSize,
        $customOptionColor->getId() => $selectedColor,

        // set the file option, but how? 
    ),
);

// add this configuration to cart
$cart->addProduct($product, $paramObject);
$cart->save();

// set the cart as updated
Mage::getSingleton('checkout/session')->setCartWasUpdated(true); 
```

我的问题是：如何将某个文件附加到设计选项中？

该文件已经传输到服务器端（实际上是通过请求）。但是，如果需要，我可以伪造上传。但直到现在我还没有找到关于设置文件自定义选项的单一信息来源......

My best guess from a tour through the Magento sources, is that the buy request needs some additional data (not in the options, but in the params object), like: option_123_file => something, but what exactly is needed I did not figure out yet. This part of the Magento sources is rather, uhh, not so straight forward. Thanks for any help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T19:05:24.313

Ok finally figured this out. The params array needs special entry to tell the custom option with the key "options_xx_file_action" what to do with a file ('save_new' or 'save_old'). This would look like:

```
$params = array(
    'product'       => $productId,
    'qty'           => $quantity,
    'options'       => array(
        $customOptionSize->getId()  => $selectedSize,
        $customOptionColor->getId() => $selectedColor,
    ),
    'options_'.$customOptionDesign->getId().'_file_action'=>'save_new',
); 
```

Obviously, you will need to add the file to the post request (via form or therelike). The name of the file should be "options_xx_file". For example, in my case my $_FILES looked like:

```
Array (
[options_108_file] => Array
    (
        [name] => i-like.png
        [type] => application/octet-stream
        [tmp_name] => C:\xampp\tmp\phpAAB8.tmp
        [error] => 0
        [size] => 6369
    )

) 
```

# android - 按项目/主屏幕滚动

> ID：13801536
> 
> 赞同：0
> 
> 时间：2012-12-10T13:04:19.043
> 
> 标签：android, android-layout

我需要为一堆元素实现垂直滚动，以便每个元素占据大部分屏幕。我猜它的模拟是在大多数主屏幕上的水平滚动，您在这些屏幕之间定位时会使用它。

到目前为止，我刚刚制作了一个列表视图，但我需要以某种方式修复每个屏幕的行数（1）。有任何想法吗 ？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:12:10.127

也许你可以试试[这个](https://github.com/grantland/android-verticalpager)？它是一个 VerticalPager（我认为这个名字很自我描述）。

# svg - 使用 Raphael 设置指针事件：无

> ID：13801551
> 
> 赞同：3
> 
> 时间：2012-12-10T13:05:08.810
> 
> 标签：svg, raphael

我正在使用这个：

```
circle.attr({
    fill:'#FFFFFF',
    'stroke-width':0,
    opacity:0,
    'pointer-events':'none'
}); 
```

问题是鼠标事件仍然被捕获，并且在 DOM 检查器中该属性没有显示。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T15:25:35.833

Raphael 有一个可以分配给元素的属性白名单。由于`pointer-events: none`VML 不支持此属性，因此该属性不在白名单中。要解决此问题，您可以执行...

```
circle.node.setAttribute("pointer-events", "none"); 
```

或者，如果所有圆圈都是不可点击的，您可以在 CSS 样式表中包含：

```
circle {
   pointer-events: none;
} 
```

但是，这些都不适用于任何 IE8 或更低版本的浏览器。如果您需要旧的 IE 支持，请查看此答案：[pointer-events: none VML raphael solution](https://stackoverflow.com/questions/10951868/pointer-events-none-vml-raphael-solution)

# python - 使用带有 tkinter 的 Python 3 选择 Text 小部件中的所有文本

> ID：13801557
> 
> 赞同：15
> 
> 时间：2012-12-10T13:05:32.593
> 
> 标签：python, python-3.x, tkinter

我正在编写我的第一个 Python 程序，但对我在做什么一无所知。我想重新绑定 ctrl-a (control a) 以选择 Text 小部件中的所有文本。当前绑定是 ctrl-/（控制 /）。绑定部分直接跳转到函数，但实际的文本选择不起作用。相反，光标跳到第一行的第一个字符（就像它应该的那样），没有其他任何事情发生。我敢肯定这很容易解决，但是在花了一个小时一个小时之后，我不知道出了什么问题。

Python 3，Windows：

```
from tkinter import *

# Select all the text in textbox (not working)
def select_all(event):
    textbox.tag_add(SEL, "1.0", END)
    textbox.mark_set(INSERT, "1.0")
    textbox.see(INSERT)

# Open a window
mainwin = Tk()

# Create a text widget
textbox = Text(mainwin, width=40, height=10)
textbox.pack()

# Add some text
textbox.insert(INSERT, "Select some text then right click in this window")

# Add the binding
textbox.bind("<Control-Key-a>", select_all)

# Start the program
mainwin.mainloop() 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-10T20:11:18.337

所以新代码是...

```
from tkinter import *

# Select all the text in textbox
def select_all(event):
    textbox.tag_add(SEL, "1.0", END)
    textbox.mark_set(INSERT, "1.0")
    textbox.see(INSERT)
    return 'break'

# Open a window
mainwin = Tk()

# Create a text widget
textbox = Text(mainwin, width=40, height=10)
textbox.pack()

# Add some text
textbox.insert(INSERT, "Select some text then right click in this window")

# Add the binding
textbox.bind("<Control-Key-a>", select_all)
textbox.bind("<Control-Key-A>", select_all) # just in case caps lock is on

# Start the program
mainwin.mainloop() 
```

是的，它完美无缺。非常感谢布莱恩·奥克利。Steven Rumbalski：这是一个非常好的观点，我也听从了你的建议。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-10T15:20:32.917

您需要进行选择，然后通过让函数返回字符串“break”来禁止默认操作。

这是由于 Tkinter 如何处理事件。它使用所谓的“绑定标签”。尽管看起来您正在绑定到一个小部件，但实际上您正在绑定到一个作为小部件名称的标签。还可以绑定到小部件类、小部件所在的顶层窗口和标签“all”（另外，如果您愿意，您可以发明自己的标签）。

这些标签的默认顺序是从最具体到最不具体，并且按该顺序处理事件。意思是，如果您在小部件（最具体）和类（不太具体）上都有绑定，则绑定将首先为小部件触发，然后是类绑定（然后是顶层，然后是“所有”）。

这意味着默认情况下，小部件上的绑定会*增加*而不是*替换*默认绑定。好消息是，您可以通过简单地返回字符串“break”来阻止任何进一步的绑定触发，这会阻止绑定链做更多的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-15T15:03:38.290

您可以使用名为的模块执行此操作，`pyautogui` 只需运行要添加事件的命令，

```
import pyautogui
..., command=lambda *awargs:pyautogui.hotkey("ctrl","a") 
```

**确保安装模块。如果您在 Windows 上，请通过以下方式安装它**

```
pip install pyautogui 
```

# c++ - dos.h 是什么类型的库（静态或动态）？

> ID：13801558
> 
> 赞同：1
> 
> 时间：2012-12-10T13:05:35.807
> 
> 标签：c++, c, dynamic, static, libraries

我正在为我的大学做一个项目。其中一点是我们不允许使用非静态库。当我处理中断时，我想使用 dos.h 来避免使用汇编（setvect() 而不是一堆流水线代码）使事情复杂化。

考虑使用库的部分的粗略翻译是：“......它只允许使用独立于平台（硬件和操作系统）的标准（静态）C/C++库。不允许使用特定库系统主机或动态库 (DLL)"

有人可以告诉我 dos.h 是什么类型的库吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T13:13:07.803

头文件`*.h`不是库，它只是一组定义和声明。

如果任务确实要求您**既**使用硬件中断**又**独立于操作系统，那么它是不一致的，因为不同的操作系统定义了不同的硬件中断处理方式。

我怀疑你误解了作业，应该问你的老师澄清。

**添加以回应评论**

是的，编写一个微型操作系统确实主要解释了这种不一致。如上所述，kernel32.dll 可能提供了一些`setvect()`您想要使用的服务（例如 ）。如果没有操作系统，那么就没有可依赖的操作系统服务，您将不得不自己编写（我想这是作业目的的一部分）。

# windows - LogonUser 可能太慢 - 寻找一种仅在本地对用户进行身份验证的方法，或者减少中央验证超时

> ID：13801560
> 
> 赞同：5
> 
> 时间：2012-12-10T13:05:40.020
> 
> 标签：windows, winapi, authentication, winlogon

我很难找到一种快速验证用户的方法。当与域控制器的连接缓慢或不可用时，[LogonUser需要几秒钟才能返回。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378184%28v=vs.85%29.aspx)

我使用 LOGON32_LOGON_NETWORK 作为登录类型，我读过[它的速度更快](http://aspalliance.com/39)，但在这些情况下该函数仍需要几秒钟才能返回。我假设在使用缓存的凭据之前是服务器超时。

由于我不想/不需要域验证：

1.  在使用缓存的凭据之前有什么方法可以减少超时？
2.  有没有办法只在本地进行身份验证（根本不检查域控制器）？
3.  还有其他更快的方法来验证登录用户吗？

# c++ - 获取公共 IP 地址而不是 localhost (Boost Asio)

> ID：13801569
> 
> 赞同：3
> 
> 时间：2012-12-10T13:06:20.920
> 
> 标签：c++, sockets, networking, boost

我设置了以下连接，这可以正常工作。这是一段较大的代码的一部分，它（在空闲端口）侦听传入消息。我想要做的是发布 uri，以便其他客户端可以连接到它。但是，我无法想出一种方法让 endpoint.address() 显示为正在使用的接口上的实际 IP 地址，而不是“localhost”。有任何想法吗？

```
 tcp::resolver::query query(address, "");
 tcp:: endpoint endpoint = *resolver.resolve(query);
 acc.open(endp.protocol());
 acc.set_option(reuse_address(true));
 acc.bind(endp);
 acc.listen();

 tcp::endpoint endpoint =  acc.local_endpoint() ; 
 string uri = "tcp://" + endpoint.address().to_string() + ":" + lexical_cast<string>(endpoint.port()) ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:27:06.157

Boost ASIO 无法枚举您计算机的所有接口。解析器查询您的 DNS 以获得您的 IP，这与它可以返回您在其中配置的任何内容不同（甚至可以检索不准确的信息）。

如果要绑定到默认界面。你不需要下定决心。只需使用以下端点创建套接字：

```
 boost::asio::ip::tcp::endpoint endpoint = 
      boost::asio::ip::tcp::endpoint(boost::asio::ip::tcp::v4(),port); 
```

# matlab - 如何用 % 符号继续一行

> ID：13801578
> 
> 赞同：1
> 
> 时间：2012-12-10T13:06:43.863
> 
> 标签：matlab, coding-style

考虑以下代码：

```
data = textscan(fid,'%s%d%d%d%d%f%d%f%f%f%d','Delimiter',',','HeaderLines',28) 
```

我想按如下方式换行：

```
data = textscan(fid,'%s%d%d%d%d%f%d...
%f%f%f%d','Delimiter',',','HeaderLines',28) 
```

Matlab 不允许这样做，并因为`%`符号而使第二行成为注释。

我尝试了以下方法：

```
data = textscan(fid,'%s%d%d%d%d%f%d%...
f%f%f%d','Delimiter',',','HeaderLines',28) 
```

但是现在第二行仍然在第一行之后被注释掉`f`。

如何在`%`涉及符号的情况下进行续行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T13:08:30.637

您应该使用方括号 ( `[]`) 来分解字符串，如下所示：

```
data = textscan(fid,['%s%d%d%d%d%f%d%f' ...
'%f%f%d'], 'Delimiter',',','HeaderLines',28) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:39:57.833

顺便说一句，一个经常被忽视的 MATLAB 语法是`...`行继续标记还打开了行尾的注释，即

```
x = [ 1, 2, 3, ... This is a comment
      4, 5, 6 ]; %
assert(isequal(x, 1:6)) 
```

# ruby - 如何找到 ruby 对象使用的内存？

> ID：13801579
> 
> 赞同：9
> 
> 时间：2012-12-10T13:06:53.017
> 
> 标签：ruby, memory-management

ruby 中是否有任何函数来查找 ruby​​ 对象使用的内存。
类似于 C 有`sizeof()`函数，PHP 有`memory_get_usage()`函数。ruby 有等效的功能/方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2020-11-24T01:35:42.100

`ObjetSpace#memsize_of` [来自 Ruby 文档：](https://ruby-doc.org/stdlib-2.6.3/libdoc/objspace/rdoc/ObjectSpace.html#method-c-memsize_of)

> 返回 obj 的消耗内存大小。

```
[1] pry(main)> require 'objspace'
=> true
[2] pry(main)> ObjectSpace.memsize_of('')
=> 40
[3] pry(main)> ObjectSpace.memsize_of([])
=> 40
[4] pry(main)> ObjectSpace.memsize_of(1..100)
=> 40
[5] pry(main)> ObjectSpace.memsize_of('X' * 100)
=> 141
[6] pry(main)> ObjectSpace.memsize_of(('X' * 100).chars)
=> 840 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-14T20:29:16.763

这是一个延伸，但如果您的目标是查找内存泄漏，而不是查看单个对象的大小，您可以查看`object_count(cls)`，如下所示：

```
>> ObjectSpace.each_object(Object).count
=> 114629
>> ObjectSpace.each_object(Array).count
=> 10209 
```

等等 FWIW，符号有点不同：您可以通过以下方式获取符号数：

```
>> Symbol.all_symbols.count
=> 17878 
```

要确定是否存在 not 泄漏，可以手动调用 GC，计数对象，运行代码一段时间，再次调用 GC，然后查看对象计数是否显着增加。

当然，这并不能告诉你每个对象的大小，只是每个类分配了多少。

还有[memprof](https://github.com/ice799/memprof)，但我承认我还没有使用过。

# c++ - 在 OpenGL 中在视口外绘制时拉伸纹理

> ID：13801589
> 
> 赞同：1
> 
> 时间：2012-12-10T13:07:18.760
> 
> 标签：c++, user-interface, opengl, textures

我遇到了以下问题 - 我正在 OpenGL 中创建一个 GUI，我有一个可以在屏幕上拖动的 Window 组件。通常它看起来像这样：

![](../Images/bb983a561401ae23296ea219c78b16e5.png)

一切都很好，除非您尝试将其向左移动以使其部分消失在视口之外 - 例如，水平滚动中的左按钮是一个单独的纹理，当我们将 Window 向左移动时，整个按钮消失，然后是第一个像素它的纹理在整个屏幕上被拉伸，像这样：

![](../Images/6171996b89aaa57144dd9ea55af2a414.png)

我的`CBackground::draw()`方法如下所示：

```
bool CBackground::draw(const CPoint &pos, unsigned int width, unsigned int height)
{
    if(width <= 0 || height <= 0)
        return false;

    GLfloat maxTexCoordWidth = (float)width/m_width;
    GLfloat maxTexCoordHeight = (float)height/m_height;

    glPushMatrix();
        glBindTexture(GL_TEXTURE_2D, m_texture);               // Select Our Texture

        switch(m_rotation)
        {
        case BACKGROUND_ROTATION_0_DG:
            glBegin(GL_QUADS);
                glTexCoord2f(0.0f, maxTexCoordHeight);              glVertex2d(pos.x, pos.y + height);
                glTexCoord2f(0.0f, 0.0f);                           glVertex2d(pos.x, pos.y);
                glTexCoord2f(maxTexCoordWidth, 0.0f);               glVertex2d(pos.x + width, pos.y);
                glTexCoord2f(maxTexCoordWidth, maxTexCoordHeight);  glVertex2d(pos.x + width, pos.y + height);
            glEnd();
        break;
                }
    glPopMatrix();

    return true;
} 
```

我之前尝试添加这样的代码`glPushMatrix()`：

```
if((pos.x <= 0 && pos.x + width <= 0)
     return false; 
```

所以它甚至不应该绘制这个像素（我要留下一个方法`return`），但它仍然会绘制这个拉伸的纹理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T13:26:05.120

你的`width`和`height`都是无符号的，这意味着这个检查对除零以外的值没有影响：

```
if(width <= 0 || height <= 0)
    return false; 
```

最有可能的是，你有一些宽度，否则它会是负数，但由于你的变量的无符号性质，它会环绕并变得非常大。这可以解释为什么您似乎有一个向右延伸很远的条（水平维度中的大正值）。

一个好的解决方案是对宽度和高度进行签名，这样可以防止此类问题。否则，您必须将此类检查移动到计算宽度和高度的（所有位置）。毕竟，您不可能有一个宽度和高度超出有符号`int`.

# eclipse - 在eclipse中部署一个使用ant构建文件运行的selenium测试项目

> ID：13801591
> 
> 赞同：0
> 
> 时间：2012-12-10T13:07:30.980
> 
> 标签：eclipse, ant, selenium-rc

我有一个使用 selenium RC 的测试项目，目前正在 eclipse 上。我只在 Eclipse 中运行 selenium 测试脚本并使用 ant 构建文件生成报告。

我想将我的项目部署在可执行文件中，这样我就不需要 eclipse 来运行我的项目。它可以是 .jar 文件或 .bat 文件。最好是 .bat 文件；这样我就可以从命令行运行它。

此外，如果是 bat 文件，执行可执行文件的另一台 PC 是否需要任何额外的设置？

eclipse有没有可以实现的插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:15:12.817

好吧，我正在做这样的事情。

你应该：

*   在你的路径中有 Mozilla 可执行文件
*   以这种方式从 .bat 文件启动 java.exe：

    java.exe -cp ./production/;./lib/* package.MainClass

./production 应该包含你编译的类，并且 libs 应该包含所有的 jars。您也可以将您的应用程序打包到一个 jar 文件中，如下所述：http: [//docs.oracle.com/javase/tutorial/deployment/jar/build.html](http://docs.oracle.com/javase/tutorial/deployment/jar/build.html)

# java - Vert.x 中使用 Pump 类 (JAVA) 的简单 TCP 代理

> ID：13801598
> 
> 赞同：3
> 
> 时间：2012-12-10T13:07:49.777
> 
> 标签：java, asynchronous, tcp, proxy, vert.x

我想在 Vert.x 中实现概念证明 TCP 透明代理。

## 要求

一个在端口 X 上侦听的 Verticle，当有人连接并发送数据时，它会打开一个指向预先配置的 TCP 服务器的客户端连接。从这一刻起，直到任何对等方关闭连接，双向通道都被保留，数据在通道上上下流动，从客户端到服务器，反之亦然。

这是我的尝试，但不起作用。

```
 vertx.createNetServer().connectHandler(new Handler<NetSocket>() {
        public void handle(final NetSocket socket) {
            vertx.createNetClient().connect(6367, "localhost", new Handler<NetSocket>() {

                @Override
                public void handle(NetSocket cliSocket) {
                    Pump.createPump(socket, cliSocket);
                    Pump.createPump(cliSocket, socket);

                }
            });     
    }
    }).listen(3000);
} 
```

至少我是这样理解 Pump 类的含义的：

[http://vertx.io/core_manual_java.html#pump](http://vertx.io/core_manual_java.html#pump)

我的错误在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T12:10:45.373

我只是想启动泵。然后它起作用了。

```
Pump.createPump(socket, cliSocket).start();
Pump.createPump(cliSocket, socket).start(); 
```

# c# - 在数据库连接字符串中使用符号 (") 和符号 (')

> ID：13801600
> 
> 赞同：0
> 
> 时间：2012-12-10T13:07:59.290
> 
> 标签：c#, connection-string, double-quotes, quote

我的数据库（Sql 精简版）密码是`Y6K<dkq2J)[hf/',@K"!IiQA`. 当我在我的 App 配置中创建它的实体数据模型连接字符串时，它将是：

**已编辑**

```
<add name="OtherEntities" ... Password=&quot;&quot;Y6K&lt;dkq2J)[hf/',@K&quot;&quot;&quot;&quot;!IiQA&quot;&quot;  ... /> 
```

有引号`"`和`'`密码，一切正常。所以我想使用Ado.Net `SqCelconnection`。

```
 string pass = "???";
            string conString =
                "Data Source=path\Other.sdf;password='" + pass + "';";
            using (SqlCeConnection connection = new SqlCeConnection(conString))
            {
. 
```

如何替换`"`登录和`'`登录密码？

我已经尝试过 `\"`, `\"\"`,`&quot;`符号`"`。

和符号。`''`但不起作用。`&apos;``'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:36:43.123

由于字符串中的转义和引号字符，您可能必须自己制作字符串。

这似乎有效：

```
StringBuilder sb = new StringBuilder();
sb.Append(@"Y6K<dkq2J)[hf/',@K");
sb.Append((char)34);
sb.Append("!IiQA");

string conString = @"Data Source=path\Other.sdf;password=" + sb.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:20:13.933

似乎您[可能无法在同一连接字符串中使用单引号和双引号](http://www.connectionstrings.com/Articles/Show/important-rules-for-connection-strings)。

# java - jax-rs map 查询参数对象

> ID：13801604
> 
> 赞同：0
> 
> 时间：2012-12-10T13:08:13.483
> 
> 标签：java, rest, jersey, jackson, jax-rs

我将 jersey 1.2 与 jersey-server、jersey-json 和 jersey-spring 一起使用来创建 REST 服务。

我的服务之一

```
@Path("test")
public class TestViewRestController {

@GET
@Path("t1")
@Produces(MediaType.APPLICATION_JSON)
public RetPojo getPojo(
        @QueryParam("token") @DefaultValue("null") String token, 
        @QueryParam("pojo") ParamPojo pojo, 
        @QueryParam("param2") @DefaultValue("null") String param2
        ) {
       //do some stuff
}

} 
```

我创建了一个 Provider ：

```
@Provider
@Consumes(MediaType.APPLICATION_JSON)
public class MessageBodyReaderJSON implements MessageBodyReader<APojo> {

/**
 * {@inheritDoc}
 */
public boolean isReadable(Class<?> type, Type genericType,
        Annotation[] annotations, MediaType mediaType) {
    return true;
}

/**
 * {@inheritDoc}
 */
public APojo readFrom(Class<APojo> type, Type genericType,
        Annotation[] annotations, MediaType mediaType,
        MultivaluedMap<String, String> httpHeaders, InputStream entityStream)
        throws IOException {

    APojo p = new ObjectMapper().readValue(entityStream, APojo.class);

    return p;
    }
} 
```

但是当我启动我的网络服务器时，会抛出以下异常：

```
com.sun.jersey.api.container.ContainerException: 
Method, public my.package.TestViewRestController.getPojo( java.lang.String, my.package.APojo, java.lang.String), 
annotated with GET of resource, class my.package.TestViewRestController, 
is not recognized as valid Java method annotated with @HttpMethod. 
```

当我用字符串替换 APojo 参数时，它可以工作。似乎提供商被忽略了。

对于 Jersey 的最新版本，我没有遇到问题（我也不必声明提供程序），但我无法升级，因为该应用程序需要在 Java 5 上运行（并且最后一个球衣仅从 Java 6 运行）。

任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:53:11.140

我认为您不能将结构化 POJO 与查询参数一起使用，而只是简单的标量值？结构化值通常作为 PUT/POST 有效负载（以 JSON 或 XML 格式）发送。

# highcharts - Highchart 滚动条位置

> ID：13801608
> 
> 赞同：3
> 
> 时间：2012-12-10T13:08:21.163
> 
> 标签：highcharts, highstock

如何在 highcharts/highstock 中将 滚动条位置设置为**Left ？**![在此处输入图像描述](../Images/05eca76a3130dc6f497b5e66939cafee.png)

如图所示，当图表加载时，
滚动条会**自动向右对齐**。
**有没有办法将它定位到 Left**？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T08:34:29.803

我们可以通过将 min 设置为 0 来做这件事

```
 xAxis: {
    min: 0, //setting min to 0
    max: 5
}, 
```

[这](http://jsfiddle.net/fj6d2/2279/)是 Jsfiddle 链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-27T14:07:57.327

您可以使用 setExtremes [http://api.highcharts.com/highstock#Axis.setExtremes()](http://api.highcharts.com/highstock#Axis.setExtremes())并定义滚动条的范围。

# asp.net - SQL中的嵌套触发器

> ID：13801611
> 
> 赞同：0
> 
> 时间：2012-12-10T13:08:30.380
> 
> 标签：asp.net, sql, sql-server, triggers

我有以下表格：回复和消息。我想模仿 Facebook 的行为：当一条消息被删除时，所有相关的回复也会被删除。我的表如下所示：

```
REPLIES
messageId                               replyId
6b61d107-dff3-4374-a3a2-75ac7478a2f2    865c873d-0210-482a-b8bd-371c4f07f0cf

MESSAGES
id                                      body
865c873d-0210-482a-b8bd-371c4f07f0cf    this is the reply
6b61d107-dff3-4374-a3a2-75ac7478a2f2    this is the message 
```

我创建了一个第一个触发器，它可以在删除消息时删除回复中的相关行。我现在想创建另一个触发器，它会在每次删除回复中的一行时删除相关消息。现在回复变成了他们自己的消息，这是没有意义的。这是第二个触发器：

```
CREATE TRIGGER TRG_DEL_MESSAGES
ON Replies
FOR DELETE
AS
DELETE FROM Messages WHERE id = (SELECT replyId FROM DELETED) 
```

当我尝试删除某些内容时会带来以下错误：

```
Maximum stored procedure, function, trigger, or view nesting level exceeded (limit 32). 
```

显然有一个无限循环，我认为这是因为 DELETED 表被第一个触发器的数据填充（这引发了第二个）。但我真的不确定，我会很感激一些帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:59:53.643

像这样的东西对你有用吗？只需在消息上使用单个触发器即可删除递归，该触发器会预先计算所有相关消息，因此您应该最多获得一个嵌套调用？它从消息和回复中删除所有相关消息

```
CREATE TRIGGER TRG_DEL_REPLIES
ON [Messages]
FOR DELETE
AS
BEGIN
    DECLARE @Related TABLE (MessageId uniqueidentifier)

    --get all related messages so that we don't recurse
    BEGIN
        WITH AllReplies (MessageId)
        AS
        (
            --Anchor
            SELECT  D.MessageId
            FROM    Deleted D
            UNION ALL
            --Recurse
            SELECT  R.ReplyId
            FROM    AllReplies AR
            JOIN    Replies R
                    ON AR.MessageId = R.MessageId
        )
        INSERT  INTO @Related
        SELECT  * 
        FROM    AllReplies
    END

    --delete the replies

    DELETE  R
    FROM    Replies R
    JOIN    @Related REL
            ON R.MessageId = REL.MessageId

    --delete the messages

    DELETE  M
    FROM    [Messages] M
    JOIN    @Related REL
            ON  REL.MessageId = M.MessageId 
    LEFT
    JOIN    DELETED D
            ON REL.MessageId = D.MessageId
    WHERE   D.MessageId IS NULL
END 
```

要将其转换为您想要的存储过程，我会这样做，而不是执行多个单独删除的循环：

```
CREATE PROCEDURE DeleteMessageWithReplies(@messageId uniqueidentifier)
AS
BEGIN
    DECLARE @Related TABLE (MessageId uniqueidentifier)

    --get all related messages
    BEGIN
        WITH AllReplies (MessageId)
        AS
        (
            --Anchor
            SELECT  @messageId
            UNION ALL
            --Recurse
            SELECT  R.ReplyId
            FROM    AllReplies AR
            JOIN    Replies R
                    ON AR.MessageId = R.MessageId
        )
        INSERT  INTO @Related
        SELECT  * 
        FROM    AllReplies
    END

    --delete the replies

    DELETE  R
    FROM    Replies R
    JOIN    @Related REL
            ON R.MessageId = REL.MessageId

    --delete the messages that haven't already been deleted

    DELETE  M
    FROM    [Messages] M
    JOIN    @Related REL
            ON  REL.MessageId = M.MessageId 
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:12:22.170

感谢您的帮助弗格斯，我很感激。但是，正如@Ben 指出的那样，存储过程更容易编码。这是我刚刚写的，它可能会有所改进，但至少它有效。

```
EXEC('CREATE PROCEDURE deleteMessageWithReplies(@messageId uniqueidentifier)
AS
BEGIN
    DECLARE @repliesCount int
    SELECT @repliesCount = (SELECT COUNT(*) FROM Replies WHERE messageId=@messageId)
    DECLARE @cpt int
SET @cpt = 0
DELETE FROM Messages WHERE id = @messageId
WHILE @cpt < @repliesCount
BEGIN
    DECLARE @replyId uniqueidentifier
    SELECT @replyId = (SELECT TOP 1 replyId FROM Replies WHERE messageId=@messageId)
    DELETE FROM Replies WHERE replyId = @replyId
    DELETE FROM Messages WHERE id=@replyId
    SET @cpt = @cpt+1
END
END') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T14:16:43.583

我建议要么按照 Fergus Bown 的建议在触发器中一次生成所有删除，要么将删除逻辑移动到存储过程调用。在我们的应用程序中，我们对所有 CRUD 操作（创建、读取、更新、删除）使用存储过程方法。

缺点是新手支持 DBA 如果他们使用 SQL 删除单个回复而不删除与之关联的所有其他消息，他们可能会犯错。但是这样的 DBA 应该知道改用存储过程（或者首先获得正确的 SQL）。

# java - 如何保护 MySQL 数据库免受未经授权的访问并从 Java 应用程序安全地连接到它

> ID：13801617
> 
> 赞同：3
> 
> 时间：2012-12-10T13:08:41.400
> 
> 标签：java, mysql, security

好的，我提前为这个问题道歉，因为它非常广泛。

基本上，我正在开发一个系统，涉及：

1.  用户可以注册帐户的网站。此过程将在服务器上为该帐户创建一个新数据库。
2.  用 Java 编写的客户端外部应用程序。这将访问数据库中的数据，以便为用户执行有用的操作。
3.  在第一点创建的数据库本身。

我的问题是关于应该实施哪些安全措施以保证数据库的安全以及如何安全地传输数据。

我的担忧是：

1.  MySQL 数据库实际上是如何保护的？在注册帐户时创建数据库时，是否需要为该数据库设置密码？这会加密数据库吗？这足以阻止某人访问数据吗？
2.  Java 很容易反编译。假设我要将帐户数据库的登录数据存储在主数据库中，我如何保护该数据库并以一种不需要我硬编码连接到该数据库的详细信息的方式从我的应用程序连接到它在应用程序中。我相信这在编译为本机代码的语言中也一定是一个问题，因为有人可以在应用程序运行时执行内存转储来获取这些变量（我认为）。
3.  从服务器向客户端发送和接收数据时，反之亦然，如何防止有人通过网络窃听并获取数据（无论是登录凭据还是数据库中的其他数据）。我认为这就是 SSL 的用途，但这就是我需要使用的全部内容吗？

这些问题的一个可能答案是在 Java 客户端应用程序和数据库之间使用中间人服务，这与在 Javascript 和 MySQL 数据库之间使用 PHP 的方式非常相似（尽管在这种情况下 PHP 是必需的） . 我假设这个中间人服务将包含主数据库等的登录凭据，并将包含它自己的方法来防止未经授权的访问。如果这是正确的，我将如何设置这样的服务？是否可以利用 Java 应用程序中的 PHP 脚本来传输数据？

我希望我的问题是有道理的，不是太模棱两可。在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T13:16:21.980

> MySQL 数据库实际上是如何保护的？在注册帐户时创建数据库时，是否需要为该数据库设置密码？这会加密数据库吗？这足以阻止某人访问数据吗？

1.  使用帐户名和密码，以及“授予”不同用户的特定数据库的不同访问权限。

2.  密码与用户帐户相关联，而不是与数据库相关联。

3.  MySQL 数据库未加密。

4.  是的......虽然如果不受信任的人可以获得对数据库本身或托管数据库的系统的管理员控制权，那么所有的赌注都没有了。

> Java 很容易反编译。假设我要将帐户数据库的登录数据存储在主数据库中，我如何保护该数据库并以一种不需要我硬编码连接到该数据库的详细信息的方式从我的应用程序连接到它在应用程序中。

一种常见的方法是将连接详细信息和/或帐户凭据放入应用程序在启动时加载的属性文件中。但是，我认为您真正的问题是您希望允许在不受信任的机器上运行的应用程序更新数据库。一个更明智的解决方案是在适当安全的机器上运行受信任的服务，让不受信任的机器与受信任的服务而不是直接与数据库对话。

> 我相信这在编译为本机代码的语言中也一定是一个问题，因为有人可以在应用程序运行时执行内存转储来获取这些变量（我认为）。

那是对的。

> 从服务器向客户端发送和接收数据时，反之亦然，如何防止有人通过网络窃听并获取数据（无论是登录凭据还是数据库中的其他数据）。我认为这就是 SSL 的用途，但这就是我需要使用的全部内容吗？

SSL 足以保护通过网络发送的数据（或凭据）。

中间人攻击的情况很模糊，尤其是在涉及 Web 浏览器以及是否应该真正信任受信任的根时。但是，如果我理解正确阅读的内容，那么有一种使用 SSL 的方法应该不受 MITM 的影响。基本上，您需要为所有参与者（客户端、服务器）生成单独的 SSL 证书，并使用带外分发机制将它们分发给所有人；即不是通过互联网。然后，您只接受来自具有已知证书的各方的 SSL 连接。并确保您使用 TLS 1.1 或 1.2。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T13:29:32.887

我看到了一些可能性——

1.  使用 jBoss SX 框架
2.  使用 EJB 是另一回事，它提供了所需的抽象层。
3.  JCA 组件可以用在中间人组件上

最后，还可以通过一些可用的工具（如 sqlMAP）访问 SQL 注入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T13:13:45.217

您假设您的客户端应用程序永远不应该存储数据库身份验证信息是正确的。反编译 Java 应用程序来检索这些连接字符串太容易了。

相反，正如我认为您理解的那样，您应该公开一个 Web 服务来提供您的应用程序所需的信息。有几种方法可以解决这个问题。例如，您可以编写一个 REST 接口，以便您的客户端对您的服务器进行 HTTP 调用并接收返回的 JSON 或 XML 响应。您还可以编写一个 Java RMI 服务器，允许您的客户端在服务器上进行远程方法调用以查找他们需要的信息。如果没有更具体的问题或限制，我真的无法建议哪个更合适。

# c++ - /O 的 Visual Studio 编译器默认值

> ID：13801627
> 
> 赞同：2
> 
> 时间：2012-12-10T13:09:19.133
> 
> 标签：c++, visual-c++, optimization

当 C++ 编译命令行中没有提供 /Od,/O1,/O2,/Ox 时，VS2010/12 的编译器是否使用默认优化级别？

我目前正在使用 /Od，因为我在使用其他级别时目睹了一些与优化相关的错误。但是，这会导致 /GS 被禁用 - 这是不需要的。

当我清除“项目属性->C/C++->优化->优化”选项的框时，我看到命令行确实不包含任何选项。但我不知道这是否只是意味着编译器使用了一些默认的优化级别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T13:54:49.043

默认情况下似乎没有优化 - 请参阅“cl /？”的输出 以下：

```
 -OPTIMIZATION-

  /O1 minimize space                      /O2 maximize speed
  /Ob<n> inline expansion (default n=0)   /Od disable optimizations (default)
  /Og enable global optimization          /Oi[-] enable intrinsic functions
  /Os favor code space                    /Ot favor code speed
  /Ox maximum optimizations               /Oy[-] enable frame pointer omission 
```

# java - GPE/GWT 插件不起作用

> ID：13801631
> 
> 赞同：0
> 
> 时间：2012-12-10T13:09:28.377
> 
> 标签：java, eclipse, google-app-engine, gwt, google-plugin-eclipse

我的 eclipse 4.2 Juno 无法安装与 Google App Engine Java SDK 和 Google Web Toolkit 相关的任何内容。我见过类似的问题和答案。他们建议使用 --clean 参数打开 Eclipse，使用管理权限运行，安装具有管理权限的插件等。我尝试了所有这些，不用说它们都不起作用。每当我检查“<strong>what is already installed”时，我可以看到它们已安装，但它们不会出现在任何地方。 ![插件是灰色的](../Images/81ff9e443518ed58f83a47d40410795c.png)

我正在使用 Android SDK 捆绑包，它是用 android 工具包装的 Eclipse Juno。只要这些插件/SDK 与 android 插件有兼容性问题，就没有关系。

已安装的插件/SDK 看起来像![这个](../Images/5189f8221340137f4a53586166fb56b5.png)

或者![这个](../Images/1fffd9ac1254fe4f7718ba1fc53b9745.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T12:18:20.080

我已经尝试使用 JUNO 安装上述所有插件。有用。我的安装顺序是 -

朱诺 Java EE -

```
http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/junosr1 
```

GPE - GWT 和 GAE

```
Online - http://dl.google.com/eclipse/plugin/4.2
Offline - https://developers.google.com/eclipse/docs/install-from-zip 
```

安卓 -

```
https://dl-ssl.google.com/android/eclipse/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:53:54.280

我不知道谷歌工程师和我谁更愚蠢。但关键是他们没有提到一件简单的事情，Eclipse EE 是必须的，Eclipse Classic 是行不通的。最后我的问题解决了，我现在很高兴：D。

但还有一个奇怪的问题。灰色图标指的是什么？如果他们指的是好的东西，比如事情正在运行或类似的东西，我敦促开发人员选择不同的颜色。事情现在的样子简直太奇怪了

# objective-c - self 如何传递给方法（或如何防止强引用循环）

> ID：13801632
> 
> 赞同：1
> 
> 时间：2012-12-10T13:09:28.133
> 
> 标签：objective-c, objective-c-blocks, cycle, self, strong-references

我目前正在考虑在使用保留自身的块时如何防止强引用循环。通常的方法似乎是只使用对 self 的弱引用：

```
@property (strong, nonatomic) NSOperationQueue *queue;

- (void)methodA {
    __weak id *weakSelf = self;
    NSBlockOperation *operation = [NSBlockOperation blockOperationWithBlock:^{
        [weakSelf methodB];
    }];
    [self.queue addOperation:operation];
} 
```

但是如果 methodB 看起来像这样：

```
- (void)methodB {
    [self someOtherMethod];
} 
```

这仍然会导致强大的参考周期吗？或者methodB会从methodA接收到对self的弱引用作为对self的引用？（也就是说，methodB 对 self 的引用只是对 methodA 的弱引用的强引用吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:59:21.453

> 或者methodB会从methodA接收到对self的弱引用作为对self的引用？（也就是说，methodB 对 self 的引用只是对 methodA 的弱引用的强引用吗？）

方法不会“接收”强引用或弱引用。它接收一个引用。“强”或“弱”仅适用于变量（通常是实例变量或块捕获的变量）。

`weakSelf`是块中的弱引用。因为`weakSelf`是一个归零弱引用 ( `__weak`)，它要么指向一个有效对象，要么它的值为`nil`。如果是前者，它指向一个有效的对象，并`methodB`在它上面被调用。如果是后者，发送消息到`nil`什么都不做，所以什么也不会发生。

你问`self`in`methodB`是否是一个强有力的参考。强引用意味着它被保留，所以如果`self`是强引用 in `methodB`，这意味着它`self`在方法的开头保留并在结束时释放它。但是，为什么该方法是否保留这样的参数很重要`self`？保持循环指的是*对象*之间的强引用。一个函数或方法将运行然后停止；根据内存管理规则，它们对局部变量所做的任何保留都必须是临时的，并且对保留周期没有影响。（技术答案是否定的，`self`ARC 中没有保留，包括在内`self`的论点通常不会保留在 MRC 中。但正如我所说，这真的不相关。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T15:33:52.927

我终于[在文档中找到了可以回答这个问题的部分](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtHowMessagingWorks.html#//apple_ref/doc/uid/TP40008048-CH104-SW1)。所以看起来methodB确实接收了块对self的弱引用。

# php - 我可以在 Symfony 中导入参数定义文件吗？

> ID：13801635
> 
> 赞同：0
> 
> 时间：2012-12-10T13:09:36.863
> 
> 标签：php, symfony

针对特定情况，我的 Symfony2 项目有不同版本的配置文件。一个具体的简单示例是安全文件：

```
security_db.yml
security_ldap.yml 
```

我希望在文件中定义使用的`parameters.ini`文件。这是我尝试添加的内容`config.yml`：

```
imports:
- { resource: "security_%authentification%.yml" } 
```

虽然`authentification`在我的文件中定义了参数，`parameters.ini`但我总是遇到同样的错误：

```
The file "security_%authentification%.yml" does not exist 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:10:13.077

我相信这样做的一种方法是使用您的 Extension 类根据您的 parameters.ini 中定义的内容加载正确的配置......这是未经测试的......

**src/MyAwesomeBundle/DependencyInjection/MyAwesomeExtension.php**

```
class MyAwesomeExtension extends Extension 
{

    public function load(array $configs, ContainerBuilder $container)
    {
       // boiler plate code here ... this probably already exists in your class.
        $configuration = new Configuration();
        $config = $this->processConfiguration($configuration, $configs);

        $loader = new Loader\XmlFileLoader($container, new FileLocator(__DIR__.'/../Resources/config'));
        $loader->load('services.xml');

        // your personalized loader goes here ...
        $myloader = new Loader\YamlFileLoader($container, new FileLocator(__DIR__.'/../Resources/config'));

        $auth = $container->getParameter('authentication');
        if (isset($auth)) {
            $myloader->load('security_' . $auth . '.yml');
        }
    }

} 
```

# gwt - 处理 GWT ListBox 中的大量数据

> ID：13801640
> 
> 赞同：2
> 
> 时间：2012-12-10T13:09:47.970
> 
> 标签：gwt, listbox, gwt-platform

当我的 Presenter 被发现时，我必须进行 RPC 调用。该调用导致 String[] 包含大量数据。但是这个调用非常非常慢。大约需要 1 分钟才能完成。

经过一些测试，我发现 ListBox.addItem() 占据了这个调用的 30% 以上。在那个 Widget 上添加 String 是一个巨大的时间。

我能做些什么来减少这段时间？

假设我的演示者显示时我需要加载所有内容。

我已经做过的事情：

*   将我的查询放在视图中（影响不大）
*   服务器读取一个 Txt 文件而不是调用 DB（最差然后是 View）。
*   使用 Collections 类 ArrayList,Vector...(Vector 减少时间 5%)

我注意到 GWT 设计了一个[LightweightCollections](http://code.google.com/p/google-web-toolkit/wiki/LightweightCollections)来改进客户端对集合的使用（这是我的下一步）。

但是我能对 ListBox 做些什么呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-10T14:27:09.190

**选择太多是没有选择的。**

您将无法调整 GWT Listbox/ValueListBox 以显示如此大量的数据（我猜测 1000 中的条目考虑 20 秒，即 1 分钟的 30%）。GWT Listbox 用于选择。您不能期望用户看到 1000 的值，滚动然后选择。它是**用户交互的噩梦**。

1.  对于如此庞大的数据，正确的方法是使用异步加载的**SuggestBox 。**使用 SuggestBox，您可以根据用户输入键过滤和显示较少的数据作为选择。

2.  如果使用 SuggestBox 不可行，您必须尝试**CellList**中的 Cell 小部件（它们可能会显示更好的性能） - [https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCellWidgets](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCellWidgets)

3.  我不确定，但试试 GWTchosen - [http://jdramaix.github.com/gwtchosen/](http://jdramaix.github.com/gwtchosen/)

# c# - 使用 radMonthYearPicker(telerik) 计算月份不同

> ID：13801642
> 
> 赞同：1
> 
> 时间：2012-12-10T13:10:03.153
> 
> 标签：c#, asp.net, telerik, asp.net-ajax, 3-tier

> [使用 radMonthYearPicker 计算不同月份](https://stackoverflow.com/questions/13767864/calculate-month-different-using-radmonthyearpicker)的精确重复

我有 2 radMonthYearPicker（1 用于开始日期，另外 1 用于结束日期）我想计算这 2 个日期之间的月份不同。

对于我的开始日期，我将我的月份设置为 12 月和 2012 年。对于我的结束日期，我将我的月份设置为 12 月和 2013 年

基于这 2 RadMonthYearPicker，相隔的月份应该是 12 个月

我能找到的唯一代码是 RadMonthYearPicker.selectedDate

PS 由于缺少重复点，我不允许上传图像文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:22:34.503

```
 int monthApart = 12 * (RMYP_startDate.SelectedDate.Value.Year - RMYP_endDate.SelectedDate.Value.Year) +
        RMYP_startDate.SelectedDate.Value.Month - RMYP_endDate.SelectedDate.Value.Month; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T16:02:36.800

我相信这对你有用

```
var monthDifference = ((startDate.selectedDate.Year - endDate.selectedDate.Year) * 12) + startDate.selectedDate.Month - endDate.selectedDate.Month 
```

[两个日期之间的月差](https://stackoverflow.com/questions/4638993/difference-in-months-between-two-dates)

# java - 使用多个数据库的 JSF2 登录身份验证

> ID：13801645
> 
> 赞同：0
> 
> 时间：2012-12-10T13:10:15.197
> 
> 标签：java, jakarta-ee, authentication, jsf-2, glassfish

我正在使用 JSF2 和带有 Glassfish 3.1.2 的 primefaces 编写网络应用程序。我想从登录/注销机制开始，但我不确定解决方案。

我想要实现的目标：三个主要目标：

*   JSF 2.1 中的 Web 应用程序

*   此应用程序将使用许多数据库（但每个数据库都将具有相同的用户、密码和“安全表”以及应用程序登录名和密码）。所以用户在认证过程中必须给出数据库名称、用户和密码。

*   我希望能够在不关闭浏览器的情况下注销并登录不同的用户。

在这种情况下，哪种身份验证方法最好？我不能只用数据库名称创建一个新领域，因为在我的情况下它不是 const 。

我想到了 web-services，它将 db_name、app_login 和 app_password 作为参数并返回是否可以。然后创建一个简单的托管 bean，它会告诉我用户是否已登录。但是我想将登录逻辑与其他东西完全分开......并且我想在查看应用程序中的每个页面之前检查用户是否已登录。

感谢您的提示，问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:41:31.083

我不知道您是否已经看过 Seam Security 功能，但考虑到 Identity Manager，我认为它可能符合您的需求：

[http://docs.jboss.com/seam/2.1.1.GA/reference/en-US/html/security.html#d0e8804](http://docs.jboss.com/seam/2.1.1.GA/reference/en-US/html/security.html#d0e8804)

# jquery - jQuery从选择选项中取类

> ID：13801646
> 
> 赞同：0
> 
> 时间：2012-12-10T13:10:15.473
> 
> 标签：jquery, forms, class, select

是否可以从 html 选择中的选定选项中获取类的名称？这是代码：

```
<select id="typ" name="typ">
    <option value="not">--- Zvoľte prosím typ zmluvy ---</option>
    <option value="12" class="DSL" >DSL</option>
    <option value="13" class="H" >H (Hlasové služby)</option>
</select> 
```

如果用户选择 H (Hlasové služby) 我想在这个选项的 span class typ class 中写，在这种情况下它是 H 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T13:13:22.703

使用 jquery 的解决方案非常简单：

```
var SelectedOptionClass = $("#typ option:selected").attr("class"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:17:32.587

核实

```
$("#typ").bind("change",function()
                   {
                       alert($(this).find("option:selected").attr("class"));
                   }); 
```

[http://jsfiddle.net/MzcjB/11/](http://jsfiddle.net/MzcjB/11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T13:18:30.650

如果我说得对，您想将该课程添加到`<span>`已经拥有该课程的课程`typ`中。

```
$('#typ').change( function() {
    $('span.typ').attr('class', 'tip').addClass('typ').addClass( $(this).find('option:selected').attr('class') );
});​ 
```

演示：http: [//jsfiddle.net/ELgSj/](http://jsfiddle.net/ELgSj/)

**更新：**

我已经添加了`attr('class', 'typ')`. 因此，当您重新更改`select`-tag 时，除该类之外的所有类都`typ`将从中删除，`<span>`并且仅添加选定的类。

# objective-c - 如何检测 UIViewController 是否有后退按钮

> ID：13801647
> 
> 赞同：5
> 
> 时间：2012-12-10T13:10:19.950
> 
> 标签：objective-c, ios

我有一个扩展 UIViewController 功能的类别，它将自己的字幕添加到标题栏。它需要知道标题栏中存在哪些按钮，以便可以调整其中的标签大小。我可以检测是否有 leftBarButtonItem 和 rightBarButtonItem，但是当涉及到 backBarButtonItem 时，我尝试过的所有内容都告诉我没有后退按钮，而实际上在加载视图时有一个后退按钮。这是我用来测试的：

```
if(self.parentViewController.navigationItem.backBarButtonItem == nil){
    NSLog(@"no back button");
}
else {
    NSLog(@"has back button");
}

if(self.parentViewController.navigationController.navigationItem.backBarButtonItem == nil){
    NSLog(@"1no back button");
}
else {
    NSLog(@"1has back button");
}

if(self.navigationItem.backBarButtonItem == nil){
    NSLog(@"2no back button");
}
else {
    NSLog(@"2has back button");
}

if(self.navigationController.navigationItem.backBarButtonItem == nil){
    NSLog(@"3no back button");
}
else {
    NSLog(@"3has back button");
}

if(self.presentingViewController.navigationItem.backBarButtonItem == nil){
    NSLog(@"4no back button");
}
else {
    NSLog(@"4has back button");
}

if(self.presentingViewController.navigationController.navigationItem.backBarButtonItem == nil){
    NSLog(@"5no back button");
}
else {
    NSLog(@"5has back button");
}

if(self.presentedViewController.navigationItem.backBarButtonItem == nil){
    NSLog(@"6no back button");
}
else {
    NSLog(@"6has back button");
}

if(self.presentedViewController.navigationController.navigationItem.backBarButtonItem == nil){
    NSLog(@"7no back button");
}
else {
    NSLog(@"7has back button");
} 
```

我试过把它放在 viewDidLoad、viewWillAppear 和 viewDidAppear 中，它们都返回没有返回按钮。在前一个视图中，我确实使用手动设置了后退按钮`self.navigationItem.backBarButtonItem = [[UIBarButtonItem alloc]initWithTitle:@"Back" style:UIBarButtonItemStyleBordered target:nil action:nil];`（后退按钮必须说后退而不是前一个视图的标题）。从逻辑上对我来说，这意味着 self.parentViewController 应该告诉我这个视图上是否有后退按钮，但显然没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:26:11.423

如果当前情况属实，并且您希望后退按钮说“后退”，您可以遍历子视图以查找该按钮。

```
BOOL exists = NO;
for (UIView *view in [self.view subviews]) {
    if ([view isMemberOfClass [UIButton class]]) {
        if([view.title isEqualToString: @"Back"]){
                exists = YES;
        }
    }
}
if(!exists){
     //Add back button
} 
```

![在此处输入图像描述](../Images/cb756acd6f7b51e08d494af66e55af05.png)

# java - 删除应用程序不同会话之间的插件首选项

> ID：13801649
> 
> 赞同：0
> 
> 时间：2012-12-10T13:10:35.963
> 
> 标签：java, eclipse, eclipse-plugin, preferences

我有自己的自定义插件，它扩展了 org.eclipse.ui.plugin.AbstractUIPlugin 类。此插件的某些首选项在应用程序工作时发生了更改。

但是当我关闭工作台后，它们立即被冲入硬盘。对于我的情况，这并不完全正确：我需要存储一些首选项，而另一些则不需要。

我的问题是：如何从 PreferenceStore 中删除一些插件首选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:50:18.660

我认为您要删除的首选项并不是真正的首选项（由 Eclipse 定义和支持）。我会修改你的 Activator 类来保存这些值。它已经是一个可以在插件中随处访问的单例，并且其生命周期与应用程序的生命周期完全相同。

# html - Flash 项目不会显示在 Ipad 上

> ID：13801654
> 
> 赞同：0
> 
> 时间：2012-12-10T13:10:56.630
> 
> 标签：html, css, flash

我有一个关于 ipad 的问题。这是我正在处理的网站[http://www.gmbelt.com/index.html](http://www.gmbelt.com/index.html)，问题是导航栏在侧面，导航按钮（在顶部）和中间的横幅是制作的在闪存中，ipad 不支持闪存。

无论如何，我可以在 html 或 css 中重新创建这些项目吗？

任何帮助将不胜感激，谢谢。

这是我正在使用的代码。

PS 我知道使用表格创建网站不是一个好主意，但它已经完成了，我没有更改布局，因为有很多页面并且需要很长时间。

```
<html>

<head>
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>Home</title>
<link rel="stylesheet" type="text/css" href="CSS/stylesheet.css" />
<link rel="stylesheet" type="text/css" href="CSS/stylesheet_css_buttons.css" />
<link rel="stylesheet" type="text/css" href="CSS/stylesheet_zen_lightbox.css" />
</head>

<body bgcolor="#1B3917">

<table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" height="100%">
<tr>
<td width="100%">
<table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" bordercolor="#111111" width="100%" height="507">
<tr>
<td rowspan="2" height="175">&nbsp;</td>
<td width="1027" colspan="2" height="136">
<p align="center">
<img border="0" src="images/header.jpg" width="989" height="140"></td>
<td rowspan="2" height="175">&nbsp;</td>
</tr>
<tr>
<td width="1027" colspan="2" height="39">
<table border="0" cellpadding="0" cellspacing="0" style="border-collapse: collapse" width="100%">
<tr>
<td width="75"><SCRIPT src="displayFlashbutton_home.js"></SCRIPT></td>
<td width="75"><SCRIPT src="displayFlashbutton_contact.js"></SCRIPT></td>
<td width="75"><SCRIPT src="displayFlashbutton_about.js"></SCRIPT></td>
<td width="75%"><SCRIPT src="displayFlashbutton_downloads.js"></SCRIPT></td>
</tr>
</table>
</td>
</tr>
<tr>
<td height="166" rowspan="2">&nbsp;</td>
<td width="150" height="166" rowspan="2">&nbsp;<SCRIPT src="displayFlashmenu.js"> </SCRIPT></td>
<td width="877" height="90" valign="top">
<p align="center">&nbsp;<SCRIPT src="displayFlashbanner.js"></SCRIPT></td>
<td height="166" rowspan="2">&nbsp;</td>
</tr>
<tr>
<td>
<table border="1" bordercolor="#FFFFFF" height="100%" width="100%">
<tr>
<td align="center" width="100%" height="83" style="border:0">Please note, the home page is undergoing maintenance.<br><strong>However the menu and product items are fully working.</strong><br />We apologise for any inconvienice.<br />If you have any inquiries please contact Graham on 01455 271171 or <a href="mailto:graham@gmbelt.com">graham@gmbelt.com</a></td>
</tr>
<tr>
<td height="150px" width="100%" style="border:0">&nbsp;</td>
</tr>
<tr>
<td height="150px" width="100%" style="border:0">&nbsp;</td>
</tr>
<tr>
<td height="150px" width="100%" style="border:0">&nbsp;</td>
</tr>
</table>
</td>
</tr>
<tr>
<td height="166">&nbsp;</td>
<td width="150" height="166">&nbsp;</td>
<td width="877" height="166">
<p align="center">
<span style="color: rgb(170, 170, 170); font-family: arial, helvetica, sans-serif; font-size: 11px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: center; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: rgb(27, 57, 22); display: inline !important; float: none; ">Copyright © 2012<span class="Apple-converted-space">&nbsp;</span></span><a href="http://www.gmbelt.com/index.html" target="_blank" style="color: rgb(153, 153, 153); text-decoration: none; font-family: arial, helvetica, sans-serif; font-size: 11px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: center; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; background-color: rgb(27, 57, 22); ">Glen Esk Celtic and Highland Supplies<br></a>
<a class="mrk" href="http://www.thepcclinicuk.com/" target="_blank" style="color: rgb(153, 153, 153); text-decoration: none; background-color: rgb(27, 57, 22); font-family: arial, helvetica, sans-serif; font-size: 11px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-align: center; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-size-adjust: auto; -webkit-text-stroke-width: 0px; ">Layout Design by The PC Clinic UK Ltd</a></td>
<td height="166">&nbsp;</td>
</tr>
</table>
</td>
</tr>
</table>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:14:26.143

iOS 不支持 Flash。对于顶部菜单，像这样的简单 css 命令就足够了

```
.a{background-image:url('bg.gif');}
.a:hover{background-image:url('bg_hover.gif');} 
```

对于左侧菜单，您可以在这里查看：http: [//www.htmldrive.net/items/show/1074/Vertical-Accordion-effect-with-jQuery-](http://www.htmldrive.net/items/show/1074/Vertical-Accordion-effect-with-jQuery-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:18:52.620

Ipad 不支持闪存。但是，您可以使用 HTML 和 Css 重新创建它们...

用它们制作图片并使用 css 制作菜单：

**CSS**

```
.ul li.menu1 a { 
  display:block;
  width:20px; 
  height:20px; 
  background-image:url('image.png');
}
.ul li.menu1 a:hover { 
  background-image:url('imagehover.png'); 
}

.ul li.menu2 a { 
   display:block;
   width:20px; 
   height:20px; 
   background-image:url('image2.png');
}
.ul li.menu2 a:hover { 
   background-image:url('image2hover.png'); 
} 
```

**HTML**

```
<ul>
  <li class="menu1"><a href="#"></a></li>
  <li class="menu2"><a href="#"></a></li>
</ul> 
```

# mysql - mysql get or create object id函数，需要双选，为什么？

> ID：13801655
> 
> 赞同：0
> 
> 时间：2012-12-10T13:10:57.237
> 
> 标签：mysql, function, select

我想编写一个函数来检查数据库中是否存在对象 - 返回它的 id 或者如果不存在 - 创建对象并返回它的 id。

所以我创建了这个代码：

```
drop function if exists getAuthorId;

DELIMITER  //

CREATE FUNCTION getAuthorId(anonym varchar(255) CHARACTER SET utf8, ispublic tinyint(1))     RETURNS INT
   BEGIN
   DECLARE y INT;
   IF (SELECT id INTO y FROM library_author where library_author.slug = getSlug(anonym) limit 1) THEN

    **# Here is need to make second select, cause if I just return y - it will be empty 
    Why ??**

       SELECT id INTO y FROM library_author where library_author.slug = getSlug(anonym) limit 1;
   RETURN y;
ELSE
    INSERT INTO author set author.anonym = anonym, author.slug = getSlug(anonym), author.is_public = ispublic, author.date_created = CURDATE();
    RETURN last_insert_id();
END IF;
END // 

DELIMITER ; 
```

有什么方法只使用一个选择请求吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:35:23.133

尝试这个：

```
DECLARE y INT;  
SELECT id INTO y FROM library_author where library_author.slug = getSlug(anonym) limit 1;  
IF( !ISNULL( Y )) then return Y;
   else return 0;  
end if; 
```

# php - PHP单行语句中的Netbeans代码格式大括号

> ID：13801657
> 
> 赞同：4
> 
> 时间：2012-12-10T13:11:05.167
> 
> 标签：php, netbeans, formatting, braces

## 介绍

我正在开发 PHP，`NetBeans IDE 7.2 (Build 201207171143)`我喜欢`formatting`以我的自定义格式清理我的代码。

目前，我与同事在一个小组中工作。我的一些同事习惯于编写不带大括号的单行语句（我认为这是不好的做法）。

## 例子

我的同事做什么：

```
<?php

     if($stackoverflow == 'Cool')
           echo 'Stack Overflow is Cool!';

?> 
```

当我格式化代码时我想要什么。

```
<?php

     if($stackoverflow == 'Cool') {
           echo 'Stack Overflow is Cool!';
     }

?> 
```

## 问题

所以我正在寻找的是实现这一目标的设置。我可以找到所有其他设置都有漂亮的牙套。

`Tools -> Options -> Editor -> Formatting -> PHP`

## 尝试了什么

我发现[了这一点](https://stackoverflow.com/questions/3718670/netbeans-php-add-remove-curly-braces-plugin-shortcut)，但我认为这不是我想要实现的目标，因为他谈到了宏。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T03:34:38.013

I am not sure if u have find the solution or not

Tools -> Options -> Editor -> Formatting
Language: PHP
Category: Braces

Select "same line" for all

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:16:43.027

同意共享的编码风格！不要依赖您的编辑器为您格式化和取消格式化代码。

As for this example, I would argue that using brackets is better since it's less error prone - but this is something you have to agree upon with your collegues!

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-14T09:35:40.287

Ok so it isn't possible I guess.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-14T19:29:11.720

It is possible to format braces in PHP.
This is an example:

![enter image description here](../Images/2d4f6e501b3ae5d4ded1c33d95025d21.png)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-10-27T03:58:38.760

I finally found the answer to this. It is found under Options -> Editor -> Formatting -> select PHP under the language drop down -> select "Wrapping" category -> scroll down to see "If Statement" and select "Never".

![Netbeans screenshot](../Images/84893aceda992e68df4f31b0e248dc10.png)

# python - Linux中的自定义键盘功能键

> ID：13801658
> 
> 赞同：1
> 
> 时间：2012-12-10T13:11:11.203
> 
> 标签：python, c, linux, kernel, interrupt

我已经构建了一个小型 COM 端口设备，每次按键都会在端口中生成一个键输出。

```
key-1 = 0x31
key-2 = 0x31
FunctionKey1 = 0x90
FunctionKey2 = 0x91 
```

所以我正在尝试将从 com 端口接收到的数据更新到文本框字段。

为了实现这一点，我正在尝试使用（libsuinput）生成键盘中断。

哇，它有效。

问题：

现在我需要在设备中从 Function-Key-1 到 4 有四个特殊键，当按键被按下时我需要执行一些特殊功能处理。我不想打扰任何现有的功能键。

那么如何启用一个新的功能键，比如 Fx 来执行操作。

需要一些指导

# php - 如何访问类中可用的类变量（嵌套类）

> ID：13801659
> 
> 赞同：1
> 
> 时间：2012-12-10T13:11:15.133
> 
> 标签：php

嗨，朋友们，我已经分享了我的代码。我在这个程序中使用了嵌套类。当我运行此代码时，它会显示这样的错误。“**语法错误，意外的 T_CLASS，期待 T_FUNCTION** ”

```
 class Nest
   {
  class Display
  { 
   private $s;
   public sum($a, $b)
 { 
   $s =$a+$b; 
 }
 function show()
 {
 echo "Sum of a and b is:: ". $s;
 }
 }
 }

 new $x = Nest::Display;
 $x->sum(12, 10);
 $x->show(); 
```

我不知道我犯了什么错误。任何人都可以帮助解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T13:13:44.817

PHP 中不能有嵌套类。

不过，您可能想了解[命名空间](http://php.net/manual/en/language.namespaces.php)。

# ajax - 带有 AJAX 博客的 Wordpress 单页主题

> ID：13801663
> 
> 赞同：0
> 
> 时间：2012-12-10T13:11:22.110
> 
> 标签：ajax, wordpress, jquery

我已经为所有 wordpress 页面实现了一个单页主题，这是无缝的。我唯一挣扎的是我如何将博客融入这个主题。将类别和帖子变成一页 ajax 博客会很棒。

因此我的问题是：

实现这一点的最佳方法是什么，是否有人有任何意见/建议，优点/缺点。

这会对 SEO 产生什么影响，如何抓取每个帖子？我需要使用 mod_rewrite/ 哈希标签吗？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:13:27.967

博客完全可以与一页网站共存。

除了并非所有内容都在一页上之外，这真的没有任何缺点！但是博客在增长，它们并不适合单页网站。

您可以使用 AJAX 来获取 ISOTOPE 中的页面，查找 Jquery Isotope，您会看到很多漂亮的 Gizmo。我个人喜欢这种风格，但喜欢页面去某个地方，Ajax 很好，但不要过度！或者如果您确实确保这些页面是可索引的。

至于mod-rewrite，只需从Wordpress Plugin thingie安装Yoast SEO，你不应该需要任何核心，因为你的菜单上只要它有它应该返回到第一页然后向下滚动的哈希标签，或者直接走到那个位置。

遗憾的是，一页网站很难在谷歌上得到认真的排名，除非你有无数的链接或一些极高质量的链接！我建议使用一页 + 多页博客。如果你想让事情变得更简单，你总是可以将博客安装在 /blog/ 内的另一个 wordpress 安装中，使两个系统分开。就我个人而言，我会选择使用它，因为这样您就只能在第一页上使用您需要的插件，而不必担心将它们出列以获得额外的速度。

事实上，没有真正正确的方法可以做到这一点，只要是最适合你的方法。

根据模板的制作方式，您可能需要在其中安装[Wordpress Loop](http://codex.wordpress.org/The_Loop)。

祝你好运 ;）

# android - android通话记录器应用程序如何工作？

> ID：13801666
> 
> 赞同：1
> 
> 时间：2012-12-10T13:11:30.410
> 
> 标签：android

google play 里面有很多可以录音的应用。他们中的一些人只是打开扬声器并通过麦克风录制声音，其他人应该能够直接录制音频流。我知道android提供了录制类。（可能由于某些软件限制，这在许多设备上不起作用）。所以这是我的问题：是否有可能找到一些设备，可以通过 MediaRecorder(VOICE_CALL) 进行通话录音？我发现 Galaxy SII 和 SIII 可以使用通话录音应用程序，这是否意味着 MediaRecorder(VOICE_CALL) 可以在这些设备上运行？EDIT------------ 一般来说，如果我想使用 MediaRecorder 来记录通话，我需要支持它的内核（例如 som 自定义内核）？

# android - Linkify textView 并使文本可选

> ID：13801668
> 
> 赞同：2
> 
> 时间：2012-12-10T13:11:31.000
> 
> 标签：android, textview, linkify

我有一个 textView，我想让文本可点击（网址和电话号码）

我已经成功使用 Linkify ex

```
Linkify.addLinks(tvDescription, Linkify.ALL); 
```

现在我想使文本可选择使用

```
tvDescription.setTextIsSelectable(true); 
```

只要我不链接我的 textView，它也可以工作。

如果我使用两行代码

```
tvDescription.setTextIsSelectable(true);
Linkify.addLinks(tvDescription, Linkify.ALL); 
```

文本将被链接，但文本将不可选择。

我已经试了

```
tvDescription.setAutoLinkMask(Linkify.ALL); 
```

但这似乎根本不起作用。

如何链接我的 textView 并使我的文本可选择？

感谢您的任何回复

# .net - XPath 转换为小写不工作

> ID：13801669
> 
> 赞同：1
> 
> 时间：2012-12-10T13:11:32.810
> 
> 标签：.net, xml, xpath

xml文件看起来像

```
<employees>    
 <employee id='1'>
  <Profile_Name>admin</Profile_Name>
  <UserName>user</UserName>
 </employee>

 <employee id='2'>
  <Profile_Name>Admin</Profile_Name>
  <UserName>USER</UserName>
 </employee>

 <employee id='3'>
  <Profile_Name>Adminnn</Profile_Name>
  <UserName>userrrr</UserName>
 </employee> 
```

这是我的 xpath

```
 employees/employee
                     [not(Deleted)]
                       [Profile_Name[last()]
                          [translate(., 
                                     'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 
                                     'abcdefghijklmnopqrstuvwxyz'
                                     )
                          ]
                          =
                           'admin'or 
                           UserName[last()]
                                    [translate(.,
                                               'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 
                                                'abcdefghijklmnopqrstuvwxyz'
                                              )
                                    ]
                               =
                                'user'
                         ] 
```

它应该选择`employee`没有`Deleted`子元素和`Profile_Name`= admin 或`UserName` = user 的元素，无论 profileName 和 UserName 的情况如何

它工作正常，但不考虑字符大小写。

它应该返回`employee`= `id`1 和 2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:22:41.687

你把翻译放错地方了。您的代码生成的 XPath 表达式将测试类似

```
Profile_Name[last()][translate(.,'ABCDE...', 'abcde...')] = 'foo' 
```

即它将找到最后一个`Profile_Name`元素，检查该元素是否具有非空值，然后将该值（例如`Foo`）与字符串进行比较`foo`。相反，您需要

```
translate(Profile_Name[last()],'ABCDE...', 'abcde...') = 'foo' 
```

对翻译值而不是原始值进行比较。完整的表达式应该类似于

```
 var xpath = "/employees/employee[not(Deleted)][translate(Profile_Name[last()],'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz')='" + ProfileName.ToLower() + "' or translate(UserName[last()],'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz')='" + UserName.ToLower() + "']"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:25:52.417

**现在你有这个**（正确格式化以使其可读）：

```
 /employees/employee
                     [not(Deleted)]
                       [Profile_Name[last()]
                          [translate(Profile_Name[last()], 
                                     'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 
                                     'abcdefghijklmnopqrstuvwxyz'
                                     )
                          ]
                          =
                           'admin'or 
                           UserName[last()]
                                    [translate(.,
                                               'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 
                                                'abcdefghijklmnopqrstuvwxyz'
                                              )
                                    ]
                               =
                                'user'
                         ]"; 
```

**这显然是错误**的——包含`translate()`close 的谓词太早了。

**可能你想要这个**：

```
 /employees/employee
                     [not(Deleted)]
                           [translate(Profile_Name[last()], 
                                     'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 
                                     'abcdefghijklmnopqrstuvwxyz'
                                     )
                          =
                           'admin'
                         or 
                           translate(UserName[last()],
                                      'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 
                                      'abcdefghijklmnopqrstuvwxyz'
                                      )
                           =
                            'user'
                            ] 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select=
     "/employees/employee
                     [not(Deleted)]
                           [translate(Profile_Name[last()],
                                     'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
                                     'abcdefghijklmnopqrstuvwxyz'
                                     )
                          =
                           'admin'
                         or
                           translate(UserName[last()],
                                      'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
                                      'abcdefghijklmnopqrstuvwxyz'
                                      )
                           =
                            'user'
                      ]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**（基于提供的文档，但添加了更多`employee`元素以提供更多必要的测试案例）：

```
<employees>
    <employee id='1'>
        <Profile_Name>admin</Profile_Name>
        <UserName>user</UserName>
    </employee>
    <employee id='2'>
        <Profile_Name>Admin</Profile_Name>
        <UserName>USER</UserName>
    </employee>
    <employee id='3'>
      <Deleted/>
        <Profile_Name>Admin</Profile_Name>
        <UserName>user</UserName>
    </employee>
    <employee id='4'>
        <Profile_Name>Adminnn</Profile_Name>
        <UserName>userrrr</UserName>
    </employee>
</employees> 
```

**计算 Xpath 表达式，并将计算结果复制到输出：**

```
<employee id="1">
   <Profile_Name>admin</Profile_Name>
   <UserName>user</UserName>
</employee>
<employee id="2">
   <Profile_Name>Admin</Profile_Name>
   <UserName>USER</UserName>
</employee> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-30T11:38:23.103

.NET XSLT 实现允许在样式表中编写自定义托管函数。对于小写（），它可以是：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:utils="urn:myExtension" exclude-result-prefixes="msxsl">

  <xsl:output method="xml" indent="yes"/>

  <msxsl:script implements-prefix="utils" language="C#">
    <![CDATA[
      public string ToLower(string stringValue)
      {
        string result = String.Empty;

        if(!String.IsNullOrEmpty(stringValue))
        {
          result = stringValue.ToLower(); 
        }

        return result;
      }
    ]]>
  </msxsl:script>

  <!-- using of our custom function -->
  <lowercaseValue>
    <xsl:value-of select="utils:ToLower($myParam)"/>
  </lowercaseValue> 
```

假设这可能很慢，但仍然可以接受。

不要忘记为转换启用嵌入式脚本支持：

```
// Create the XsltSettings object with script enabled.
XsltSettings xsltSettings = new XsltSettings(false, true);

XslCompiledTransform xslt = new XslCompiledTransform();

// Load stylesheet
xslt.Load(xsltPath, xsltSettings, new XmlUrlResolver()); 
```

# wordpress - 如何从投资组合中的所有类别中检索所有自定义帖子

> ID：13801670
> 
> 赞同：0
> 
> 时间：2012-12-10T13:11:49.443
> 
> 标签：wordpress, wordpress-theming

我在 wordpress 中创建了自定义帖子类型组合。我已经创建了网页设计、标志设计、电子商务、摄影等类别。我已经检索了所有这些类别作为投资组合模板文件中的导航菜单（分配给投资组合页面）。现在我希望导航菜单中应该有一个链接（查看全部），它将检索投资组合中所有类别的所有帖子。基本上我想要一种制作默认类别的方法，它将检索所有帖子。谁能帮帮我！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:27:33.833

因此，基本上，您想创建一个自定义帖子类型存档页面。

[如WPBeginner.com 所述](http://www.wpbeginner.com/wp-tutorials/how-to-create-a-custom-post-types-archive-page-in-wordpress/)，实现此目的的方法如下：

1.  **创建一个自定义页面模板**（PHP 文件可以具有您想要的任何名称）并在文件开头**添加模板名称注释：**

    `<?php /* Template Name: Custom Post Type Archive */ ?>`

2.  创建一个自定义循环：

    ```
    <?php 
        /* Template Name: Custom Post Type Archive */ 
        get_header(); 
    ?>

    <?php
        global $query_string;
        query_posts($query_string . "post_type={YOUR-CUSTOM-POST-TYPE}&post_status=publish&posts_per_page=10");
        if ( have_posts() ) : 
            while ( have_posts() ) : 
                the_post(); 
    ?>

    <h2><a href="<?php the_permalink(); ?>" title="<?php the_title(); ?>"><?php the_title(); ?></a></h2>
    <?php the_excerpt(); ?>

    <?php 
            endwhile; 
        endif; 
    ?>
    <div class="navigation">
       <div class="alignleft"><?php next_posts_link('Previous entries') ?></div>
       <div class="alignright"><?php previous_posts_link('Next entries') ?></div>
    </div>
    <?php wp_reset_query(); ?>

    <?php get_sidebar(); ?>
    <?php get_footer();?> 
    ```

3.  创建一个新页面并在页面属性框中选择您刚刚创建的模板

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:49:16.007

然后，您应该能够使用存档页面模板将它们全部列出。尝试访问[http://yourdomain.com/portfolio](http://yourdomain.com/portfolio)看看是否会出现这种情况。但是，您需要在创建帖子类型时启用存档。查找您`'has_archive' => true,`是否通过将代码放入`functions.php`文件中手动创建了帖子类型。如果您看到它，但它设置为“false”，您需要将其更改为 true。

如果您愿意，您还可以为此帖子类型创建自定义存档模板。如果您在主题目录中创建一个名为的新文件，`archive-portfolio.php`然后在其中放置一个自定义循环，则帖子类型将在访问帖子类型存档时自动定位该模板文件。

然后从你的导航菜单链接到这个档案，只需在你的菜单编辑器中使用 URL [http://yourdomain.com/portfolio](http://yourdomain.com/portfolio)创建一个自定义菜单项。如果您利用帖子类型档案，则无需创建任何类型的“默认”类别。

如果您还有其他问题，请告诉我。

# asp.net - ASP.NET 应用程序对象超时问题

> ID：13801673
> 
> 赞同：0
> 
> 时间：2012-12-10T13:12:01.737
> 
> 标签：asp.net

在 1 分钟的统一间隔后，我从 Web 服务获取一些数据到我的通用处理程序。我有一个 List 类型的集合，其中包含处理程序中收到的每个数据。使用 context.Application["mykey"] （包含列表）。

在我的网站上，我很好地处理了这个应用程序对象中的所有数据。但是当天变化时，即上午 12 点之后，所有数据都会丢失。

有没有办法，我可以保留前一天添加到列表中的数据吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:20:03.190

IIS 可以在任何时候关闭你的应用程序域，如果它**默认 20 分钟**没有使用，它会以相同的请求重新启动。这个过程被称为“回收”。尽管您可以配置 IIS 必须等待的时间，但最好不要更改此行为。

您应该使用 XML 或 JSON 将该信息保存在 App_Data 文件夹中。在您的 Application_Start 全局事件中，查看该文件，如果存在，将其反序列化并放置到位。

如果您设置了[持久缓存提供程序](http://www.c-sharpcorner.com/UploadFile/amit12345/custom-caching-provider-in-Asp-Net-4-04-5/)，则可以为此使用缓存。

干杯。

# iphone - 'Build for Archiving' 选项对构建无效

> ID：13801675
> 
> 赞同：-2
> 
> 时间：2012-12-10T13:12:23.967
> 
> 标签：iphone, xcode, ios4

> **可能重复：**
> [XCode 'Build and Archive' 菜单项已禁用](https://stackoverflow.com/questions/3087089/xcode-build-and-archive-menu-item-disabled)

有人可以帮助我吗？我找不到`Build for Archiving`构建应用程序存档的选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:15:03.410

只需转到产品 -> 构建 -> 存档。

如果这不可用（如果文本为灰色），请确保您没有选择主窗口左上角的模拟器，而是选择“iOS 设备”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:14:07.413

选择“iOS 设备”而不是模拟器，它将激活。

# android - Android构建系统gradle

> ID：13801682
> 
> 赞同：5
> 
> 时间：2012-12-10T13:13:04.090
> 
> 标签：android, gradle, android-build

我正在测试仍处于测试阶段的 androids 新构建系统。我已经实现了一些产生以下错误的代码：

```
No such property: resolutionResult for class: org.gradle.api.internal.artifacts.ivyservice.ErrorHandlingArtifactDependencyResolver$ErrorHandlingResolvedConfiguration 
```

构建.gradle

```
buildscript {
  repositories {
      mavenCentral()
  }
  dependencies {
      classpath 'com.android.tools.build:gradle:0.2'
  }
}
apply plugin: 'android'

android {
  sourceSets {
      main {
          manifest {
              srcFile 'AndroidManifest.xml'
          }
          java {
              srcDir 'src'
          }
          res {
              srcDir 'res'
          }
          assets {
              srcDir 'assets'
          }
          resources {
              srcDir 'src'
          }
      }
  }
} 
```

我也尝试过样本，这会引发同样的错误。怎么了？

摇篮版本

```
------------------------------------------------------------
Gradle 1.3
------------------------------------------------------------

Gradle build time: Dienstag, 20\. November 2012 11:37 Uhr UTC
Groovy: 1.8.6
Ant: Apache Ant(TM) version 1.8.4 compiled on May 22 2012
Ivy: 2.2.0
JVM: 1.6.0_25 (Sun Microsystems Inc. 20.0-b11)
OS: Windows 7 6.1 amd64 
```

完整的 Gradle 堆栈跟踪

```
org.gradle.listener.ListenerNotificationException: Failed to notify project evaluation listener.
        at org.gradle.listener.BroadcastDispatch.dispatch(BroadcastDispatch.java:97)
        at org.gradle.listener.BroadcastDispatch.dispatch(BroadcastDispatch.java:32)
        at org.gradle.messaging.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
        at $Proxy9.afterEvaluate(Unknown Source)
        at org.gradle.configuration.LifecycleProjectEvaluator.evaluate(LifecycleProjectEvaluator.java:47)
        at org.gradle.api.internal.project.AbstractProject.evaluate(AbstractProject.java:463)
        at org.gradle.api.internal.project.AbstractProject.evaluate(AbstractProject.java:75)
        at org.gradle.configuration.ProjectEvaluationConfigurer.execute(ProjectEvaluationConfigurer.java:23)
        at org.gradle.configuration.ProjectEvaluationConfigurer.execute(ProjectEvaluationConfigurer.java:21)
        at org.gradle.api.internal.Actions$CompositeAction.execute(Actions.java:67)
        at org.gradle.api.internal.Actions$TransformingActionAdapter.execute(Actions.java:96)
        at org.gradle.api.internal.project.AbstractProject.configure(AbstractProject.java:439)
        at org.gradle.api.internal.project.AbstractProject.allprojects(AbstractProject.java:434)
        at org.gradle.configuration.DefaultBuildConfigurer.configure(DefaultBuildConfigurer.java:32)
        at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:142)
        at org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:113)
        at org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:81)
        at org.gradle.launcher.cli.ExecuteBuildAction.run(ExecuteBuildAction.java:38)
        at org.gradle.launcher.exec.InProcessGradleLauncherActionExecuter.execute(InProcessGradleLauncherActionExecuter.java:39)
        at org.gradle.launcher.exec.InProcessGradleLauncherActionExecuter.execute(InProcessGradleLauncherActionExecuter.java:25)
        at org.gradle.launcher.cli.RunBuildAction.run(RunBuildAction.java:50)
        at org.gradle.api.internal.Actions$RunnableActionAdapter.execute(Actions.java:137)
        at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:201)
        at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:174)
        at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:170)
        at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:139)
        at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:33)
        at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:22)
        at org.gradle.launcher.Main.doAction(Main.java:48)
        at org.gradle.launcher.bootstrap.EntryPoint.run(EntryPoint.java:45)
        at org.gradle.launcher.Main.main(Main.java:39)
        at org.gradle.launcher.bootstrap.ProcessBootstrap.runNoExit(ProcessBootstrap.java:50)
        at org.gradle.launcher.bootstrap.ProcessBootstrap.run(ProcessBootstrap.java:32)
        at org.gradle.launcher.GradleMain.main(GradleMain.java:26)
Caused by: groovy.lang.MissingPropertyException: No such property: resolutionResult for class: org.gradle.api.internal.artifacts.ivyservice.ErrorHandingArtifactDependencyResolver$ErrorHandlingResolvedConfiguration
        at com.android.build.gradle.BasePlugin.resolveDependencyForConfig(BasePlugin.groovy:641)
        at com.android.build.gradle.BasePlugin$resolveDependencyForConfig.callCurrent(Unknown Source)
        at com.android.build.gradle.BasePlugin.resolveDependencies(BasePlugin.groovy:584)
        at com.android.build.gradle.BasePlugin$resolveDependencies.callCurrent(Unknown Source)
        at com.android.build.gradle.AppPlugin.createAndroidTasks(AppPlugin.groovy:116)
        at com.android.build.gradle.AppPlugin.this$3$createAndroidTasks(AppPlugin.groovy)
        at com.android.build.gradle.AppPlugin$_apply_closure5.doCall(AppPlugin.groovy:73)
        at org.gradle.listener.BroadcastDispatch$ClosureInvocationHandler.dispatch(BroadcastDispatch.java:116)
        at org.gradle.listener.BroadcastDispatch$ClosureInvocationHandler.dispatch(BroadcastDispatch.java:101)
        at org.gradle.listener.BroadcastDispatch.dispatch(BroadcastDispatch.java:88)
        ... 33 more 
```

我试过降级到 Gradle 1.2。现在我得到另一个例外。

```
------------------------------------------------------------
Gradle 1.2
------------------------------------------------------------

Gradle build time: Mittwoch, 12\. September 2012 10:46 Uhr UTC
Groovy: 1.8.6
Ant: Apache Ant(TM) version 1.8.4 compiled on May 22 2012
Ivy: 2.2.0
JVM: 1.6.0_25 (Sun Microsystems Inc. 20.0-b11)
OS: Windows 7 6.1 amd64 
```

降级到 Gradle 1.2 后的 Stacktrace

```
:prepareReleaseDependencies
:compileReleaseAidl FAILED

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':compileReleaseAidl'.
> target cannot be null.

* Try:
Run with --info or --debug option to get more log output.

* Exception is:
org.gradle.api.tasks.TaskExecutionException: Execution failed for task ':compileReleaseAidl'.
        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:68)
        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:46)
        at org.gradle.api.internal.tasks.execution.PostExecutionAnalysisTaskExecuter.execute(PostExecutionAnalysisTaskExecuter.java:34)
        at org.gradle.api.internal.changedetection.CacheLockHandlingTaskExecuter$1.run(CacheLockHandlingTaskExecuter.java:34)
        at org.gradle.cache.internal.DefaultCacheAccess$3.create(DefaultCacheAccess.java:243)
        at org.gradle.cache.internal.DefaultCacheAccess.longRunningOperation(DefaultCacheAccess.java:188)
        at org.gradle.cache.internal.DefaultCacheAccess.longRunningOperation(DefaultCacheAccess.java:241)
        at org.gradle.cache.internal.DefaultPersistentDirectoryStore.longRunningOperation(DefaultPersistentDirectoryStore.java:137)
        at org.gradle.api.internal.changedetection.DefaultTaskArtifactStateCacheAccess.longRunningOperation(DefaultTaskArtifactStateCacheAccess.java:83)
        at org.gradle.api.internal.changedetection.CacheLockHandlingTaskExecuter.execute(CacheLockHandlingTaskExecuter.java:32)
        at org.gradle.api.internal.tasks.execution.SkipUpToDateTaskExecuter.execute(SkipUpToDateTaskExecuter.java:55)
        at org.gradle.api.internal.tasks.execution.ValidatingTaskExecuter.execute(ValidatingTaskExecuter.java:57)
        at org.gradle.api.internal.tasks.execution.SkipEmptySourceFilesTaskExecuter.execute(SkipEmptySourceFilesTaskExecuter.java:41)
        at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:51)
        at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:52)
        at org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter.execute(ExecuteAtMostOnceTaskExecuter.java:42)
        at org.gradle.api.internal.AbstractTask.executeWithoutThrowingTaskFailure(AbstractTask.java:247)
        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.executeTask(DefaultTaskPlanExecutor.java:52)
        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.processTask(DefaultTaskPlanExecutor.java:38)
        at org.gradle.execution.taskgraph.DefaultTaskPlanExecutor.process(DefaultTaskPlanExecutor.java:30)
        at org.gradle.execution.taskgraph.DefaultTaskGraphExecuter.execute(DefaultTaskGraphExecuter.java:83)
        at org.gradle.execution.SelectedTaskExecutionAction.execute(SelectedTaskExecutionAction.java:29)
        at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:61)
        at org.gradle.execution.DefaultBuildExecuter.access$200(DefaultBuildExecuter.java:23)
        at org.gradle.execution.DefaultBuildExecuter$2.proceed(DefaultBuildExecuter.java:67)
        at org.gradle.api.internal.changedetection.TaskCacheLockHandlingBuildExecuter$1.run(TaskCacheLockHandlingBuildExecuter.java:31)
        at org.gradle.cache.internal.DefaultCacheAccess$2.create(DefaultCacheAccess.java:118)
        at org.gradle.cache.internal.DefaultCacheAccess.useCache(DefaultCacheAccess.java:133)
        at org.gradle.cache.internal.DefaultCacheAccess.useCache(DefaultCacheAccess.java:116)
        at org.gradle.cache.internal.DefaultPersistentDirectoryStore.useCache(DefaultPersistentDirectoryStore.java:129)
        at org.gradle.api.internal.changedetection.DefaultTaskArtifactStateCacheAccess.useCache(DefaultTaskArtifactStateCacheAccess.java:79)
        at org.gradle.api.internal.changedetection.TaskCacheLockHandlingBuildExecuter.execute(TaskCacheLockHandlingBuildExecuter.java:29)
        at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:61)
        at org.gradle.execution.DefaultBuildExecuter.access$200(DefaultBuildExecuter.java:23)
        at org.gradle.execution.DefaultBuildExecuter$2.proceed(DefaultBuildExecuter.java:67)
        at org.gradle.execution.DryRunBuildExecutionAction.execute(DryRunBuildExecutionAction.java:32)
        at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:61)
        at org.gradle.execution.DefaultBuildExecuter.execute(DefaultBuildExecuter.java:54)
        at org.gradle.initialization.DefaultGradleLauncher.doBuildStages(DefaultGradleLauncher.java:158)
        at org.gradle.initialization.DefaultGradleLauncher.doBuild(DefaultGradleLauncher.java:113)
        at org.gradle.initialization.DefaultGradleLauncher.run(DefaultGradleLauncher.java:81)
        at org.gradle.launcher.cli.ExecuteBuildAction.run(ExecuteBuildAction.java:38)
        at org.gradle.launcher.exec.InProcessGradleLauncherActionExecuter.execute(InProcessGradleLauncherActionExecuter.java:39)
        at org.gradle.launcher.exec.InProcessGradleLauncherActionExecuter.execute(InProcessGradleLauncherActionExecuter.java:25)
        at org.gradle.launcher.cli.RunBuildAction.run(RunBuildAction.java:50)
        at org.gradle.launcher.cli.ActionAdapter.execute(ActionAdapter.java:30)
        at org.gradle.launcher.cli.ActionAdapter.execute(ActionAdapter.java:22)
        at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:200)
        at org.gradle.launcher.cli.CommandLineActionFactory$ParseAndBuildAction.execute(CommandLineActionFactory.java:173)
        at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:169)
        at org.gradle.launcher.cli.CommandLineActionFactory$WithLogging.execute(CommandLineActionFactory.java:138)
        at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:33)
        at org.gradle.launcher.cli.ExceptionReportingAction.execute(ExceptionReportingAction.java:22)
        at org.gradle.launcher.Main.doAction(Main.java:48)
        at org.gradle.launcher.bootstrap.EntryPoint.run(EntryPoint.java:45)
        at org.gradle.launcher.Main.main(Main.java:39)
        at org.gradle.launcher.bootstrap.ProcessBootstrap.runNoExit(ProcessBootstrap.java:50)
        at org.gradle.launcher.bootstrap.ProcessBootstrap.run(ProcessBootstrap.java:32)
        at org.gradle.launcher.GradleMain.main(GradleMain.java:26)
Caused by: java.lang.NullPointerException: target cannot be null.
        at com.google.common.base.Preconditions.checkNotNull(Preconditions.java:208)
        at com.android.builder.AndroidBuilder.setTarget(AndroidBuilder.java:131)
        at com.android.builder.AndroidBuilder$setTarget.call(Unknown Source)
        at com.android.build.gradle.internal.ProductionAppVariant.createBuilder(ProductionAppVariant.groovy:90)
        at com.android.build.gradle.internal.ProductionAppVariant$createBuilder.call(Unknown Source)
        at com.android.build.gradle.BasePlugin.getAndroidBuilder(BasePlugin.groovy:133)
        at com.android.build.gradle.BasePlugin$getAndroidBuilder.call(Unknown Source)
        at com.android.build.gradle.BaseTask.getBuilder(BaseTask.groovy:33)
        at com.android.build.gradle.CompileAidlTask_Decorated.getBuilder(Unknown Source)
        at com.android.build.gradle.CompileAidlTask_Decorated$getBuilder.callCurrent(Unknown Source)
        at com.android.build.gradle.CompileAidlTask.generate(CompileAidlTask.groovy:39)
        at org.gradle.api.internal.BeanDynamicObject$MetaClassAdapter.invokeMethod(BeanDynamicObject.java:216)
        at org.gradle.api.internal.BeanDynamicObject.invokeMethod(BeanDynamicObject.java:122)
        at org.gradle.api.internal.CompositeDynamicObject.invokeMethod(CompositeDynamicObject.java:147)
        at com.android.build.gradle.CompileAidlTask_Decorated.invokeMethod(Unknown Source)
        at org.gradle.util.ReflectionUtil.invoke(ReflectionUtil.groovy:23)
        at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$4.execute(AnnotationProcessingTaskFactory.java:161)
        at org.gradle.api.internal.project.taskfactory.AnnotationProcessingTaskFactory$4.execute(AnnotationProcessingTaskFactory.java:156)
        at org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:472)
        at org.gradle.api.internal.AbstractTask$TaskActionWrapper.execute(AbstractTask.java:461)
        at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:60)
        ... 58 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T17:26:40.280

0.2 版是使用 Gradle 1.2 开发的（1.3 尚未发布）。我们知道我们现在正在使用一些内部的东西，所以它可能在 1.3 上被破坏了（还没有测试，很快就会做）。

现在，请使用 Gradle 1.2

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-23T14:58:03.760

您需要添加`compliedSdkVersion 17`到您的 gradle.build 文件：

**编辑**：我刚刚创建的参考项目。构建、标志等[https://github.com/yegdroid/gradle_demo](https://github.com/yegdroid/gradle_demo)

```
//
// 一个遵循所有约定的基本 Android 应用程序
//
构建脚本 {
    存储库{
        mavenCentral()
    }
    依赖{
        类路径'com.android.tools.build:gradle:0.3'
    }
}
应用插件：'android'

安卓 {
    testBuildType = "调试"

    默认配置 {
        版本代码 = 1
        版本名称 = "0.1"
        minSdkVersion = 9
        targetSdkVersion = 17

        compileSdkVersion 17
        buildConfig "private final static boolean DEFAULT = true;", \
                    "私有最终静态字符串 FOO = \"foo\";"
    }

    构建类型 {
        调试{
            packageNameSuffix = ".debug"

            buildConfig "私有最终静态布尔 DEBUG2 = false;"
        }
    }

    aaptOptions {
        noCompress "txt"
    }
    源集{
          主要的 {
              显现 {
                  srcFile 'AndroidManifest.xml'
              }
              爪哇{
                  srcDir 'src'
              }
              资源{
                  srcDir 'res'
              }
              资产{
                  srcDir '资产'
              }
              资源 {
                  srcDir 'src'
              }
          }
      }
}

```

# c++ - 哪个更好，一个班级内的班级或完全独立的班级？

> ID：13801696
> 
> 赞同：1
> 
> 时间：2012-12-10T13:13:47.360
> 
> 标签：c++, class, subclass

这就是场景。我有一个`Layer`类，我想创建一个子类，我们称之为这个`ParentLayer`类。该类`ParentLayer`将有另一个`Layer`子类，称为`ChildLayer`类。最好的方法是什么？

**`ChildLayer`将内部声明`ParentLayer`为私有类。**

```
// LayerSubclass.h
#include "Layer.h"

class ParentLayer : public Layer {
private:
   class ChildLayer : public Layer {
   private:
       // ChildLayer members
   public:
       // Stuff...
   };

   ChildLayer _childLayer;

public:
   // Stuff...
}; 
```

**将 ChildLayer 声明为同一头文件中的单独类。**

```
// LayerSubclass.h
#include "Layer.h"

class ChildLayer : public Layer {
private:
    // ChildLayer members
public:
    // Stuff...
};

class ParentLayer : public Layer {
private:    
   ChildLayer _thisChild;

public:
   // Stuff...
}; 
```

我一直在使用第一种方法，但后来我想到了第二种方法（更简洁，更具可读性）。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:16:58.933

这不是“什么更好”的问题，而是什么设计适合您的要求的问题。如果没有描述您试图解决的问题，就无法给出合理的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:18:38.097

我可能更喜欢使用嵌套类：

*   如果嵌套类需要`friend`访问包含类的私有成员（例如可能是迭代器类，它访问相应容器类的成员）
*   或者如果嵌套类是包含类的私有实现细节，它不会通过包含类的公共 API 暴露给其他类

# vim - 防止 Command-T 更改目录

> ID：13801713
> 
> 赞同：3
> 
> 时间：2012-12-10T13:14:39.283
> 
> 标签：vim, macvim

我的问题是 Command-T 在打开文件时会更改当前目录。我该如何防止这种情况？

我已按照此处的说明进行操作：[防止 vim 在打开文件时更改目录，](https://stackoverflow.com/questions/3621401/prevent-vim-from-changing-directories-when-opening-files)但`setting noautochdir`似乎没有任何效果。

如果我只是打开这样的文件，`:e folder/folder/file.ext`vim 不会更改 pwd，但是当我使用 Command-T 打开文件时，它会更改当前目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:52:10.697

为了防止更改目录，我使用 vim-rooter 插件。[https://github.com/airblade/vim-rooter](https://github.com/airblade/vim-rooter)。它适用于 Command-T 和 Nerdtree。

# facebook-graph-api - 是否可以在没有“manage_pages”权限的情况下获得具有洞察访问权限的 facebook 页面列表？

> ID：13801720
> 
> 赞同：5
> 
> 时间：2012-12-10T13:15:03.260
> 
> 标签：facebook-graph-api

我试图找出 Facebook 用户是否能够查看某个 Facebook 页面的见解。我知道使用具有“manage_pages”权限的访问令牌的 Open Graph API 是可能的。这是唯一可能的解决方案吗？我不想请求“manage_pages”权限只是为了确定该特定用户是否可以查看见解。我的应用只请求“view_insights”权限，我想保持这种状态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T13:17:42.503

如果它是一个特定页面，那么您可以`<PAGE_ID>/insights`使用 Graph API 获得，它所需要的只是`read_insights`权限。

要获取用户使用 Graph API ( `<USER_ID>/accounts`) 或 FQL ( `SELECT page_id FROM page_admin WHERE uid=<USER_ID>`) 管理的页面列表，您必须请求`manage_pages`权限

# java - 通过 amazon ses 发送 HTML 电子邮件

> ID：13801730
> 
> 赞同：10
> 
> 时间：2012-12-10T13:15:52.260
> 
> 标签：java, amazon-web-services, amazon-ses

我正在使用亚马逊 ses 发送批量电子邮件。我的代码如下

```
public void sendMail(String sender, LinkedList<String> recipients, String subject, String body) {
    Destination destination = new Destination(recipients);
    try {
        ACCESS_KEY = EmailSender.prop.getProperty("accessKey");
        SECRET_KEY = EmailSender.prop.getProperty("secretKey");

        Content subjectContent = new Content(subject);
        Content bodyContent = new Content(body);
        Body msgBody = new Body(bodyContent);
        Message msg = new Message(subjectContent, msgBody);

        SendEmailRequest request = new SendEmailRequest(sender, destination, msg);

        AWSCredentials credentials = new BasicAWSCredentials(ACCESS_KEY, SECRET_KEY);
        AmazonSimpleEmailServiceClient sesClient = new AmazonSimpleEmailServiceClient(credentials);
        SendEmailResult result = sesClient.sendEmail(request);

        System.out.println(result + "Email sent");  
    }catch(Exception e) {
        System.out.println("Exception from EmailSender.java. Email not send");
    } 
```

在这里，我将我的 html 内容作为字符串提供给变量“ **body** ”。

邮件发送成功。但我将 html 内容作为电子邮件收到。如何在邮件中发送 html 内容。代码中的哪些更改将解决此问题？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-10T13:48:05.460

来自[Amazon SES 开发人员指南](http://docs.amazonwebservices.com/ses/latest/DeveloperGuide/SendingEmail.Formatted.html)：

您应该使用 WithHtml 方法：

```
Content subjContent = new Content().withData("Test of Amazon SES");
Message msg = new Message().withSubject(subjContent);

// Include a body in both text and HTML formats
Content textContent = new Content().withData("Hello - I hope you're having a good day.");
Content htmlContent = new Content().withData("<h1>Hello - I hope you're having a good day.</h1>");
Body body = new Body().withHtml(htmlContent).withText(textContent);
msg.setBody(body); 
```

# c++ - 在自己的线程中从 ttyUSB0 读取

> ID：13801734
> 
> 赞同：1
> 
> 时间：2012-12-10T13:16:19.223
> 
> 标签：c++, serial-port, posix, blocking, ftdi

我在使用 C++ 从 ttyUSB0 读取数据时遇到问题。我有一个自己的线程以阻塞模式从 ttyUSB0 读取数据。当我只读取单个字符时，数据以固定块的形式到达（不是很好的机器人）。那可能是我的 USB 到 UART 转换器上的 FTDI 芯片的一些内部缓冲区。但是，如果尝试读取多个字符，我只会收到零块。读取或初始化命令没有错误。有谁知道如何解决这个问题。

发送： dfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfsfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasdfasd

收到：

0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0

0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0

0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0

0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0

这是我的代码。

```
void BoardCommunicator::execute()
{
    connection.openCon();
    uint8_t buffer[16] = {0};
    while(true)
    {
    //  unsigned char b = connection.readByte();
        if(connection.readBlock(buffer,16) == 0)
            std::cout << "EOF" << std::endl;
        else
            for(uint32_t i = 0; i < 16; i++)
                std::cout << (int)buffer[i] << " ";
        std::cout << std::endl;
    }
}

void SerialConnection::openCon()  throw (SerialPortOpenException&)
{
    conHandler = open(udevFileName , O_RDWR | O_NOCTTY);// | O_NDELAY | O_NONBLOCK);
    if (conHandler < 0) 
        throw SerialPortOpenException("Can not open given comport");

    cfsetispeed(&port_settings, B2000000);    // set baud rates
    port_settings.c_cflag = B2000000 | CS8 | CREAD | CLOCAL;
    port_settings.c_iflag = IGNPAR;
    port_settings.c_oflag = 0;
    port_settings.c_lflag = 0;
    if(tcsetattr(conHandler, TCSANOW, &port_settings) < 0)
        throw SerialPortOpenException("Was not able to aply settings to serail link.");// apply the settings to the port
}
//Does not work at all. Receives only zeros! Why? 
int SerialConnection::readBlock(uint8_t* buffer, uint32_t size)
{
    if(buffer == NULL)
        throw IllegalArgumentException("Can not read a block to null buffer");

    for(uint32_t index = 0; index < size; index++)
        buffer[index] = 0;
    int result;
    do{
        result = read(conHandler, &buffer, size);
    } while (errno == EINTR );
    if(result < 0)
        throw ReadBlockException("Can not read from serial link.");
        return result;
}
//Works only in blocking mode and data arrives in fixed sized blocks
uint8_t SerialConnection::readByte() const throw (ReadByteException&)
{
    int result = 0;
    uint8_t data = 0;
    do //Check if read waked up by any signal
    {
        result = read(conHandler, &data, 1);
    } while (errno == EINTR || errno == 11);
    std::cout << errno <<std::endl;
    if(result < 0)
        throw ReadByteException("Can not read from serial link.");
    return data;
} 
```

如果有人已经对这些东西有一些经验，那就太好了。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:39:47.450

你有两个错误。

首先，这段代码：

```
 result = read(conHandler, &buffer, size); 
```

您读入了存储缓冲区*地址*的位置，而不是缓冲区本身。

其次，你把结果扔掉了`read`，所以你不知道你读了多少字节。如果代码旨在*准确* `size`读取字节，则需要执行以下操作：

```
 int total_read = 0;
    do
    {
        result = read(conHandle, buffer + total_read, size - total_read);
        if (result <= 0) return result;
        total_read += result;
    }
    while (total_read < result); 
```

# javascript - 选择：页面加载时的目标元素

> ID：13801737
> 
> 赞同：1
> 
> 时间：2012-12-10T13:16:35.470
> 
> 标签：javascript, jquery, dom

我正在尝试`:target`使用 jQuery 使用以下代码在页面加载时选择元素，但它没有找到任何内容并且正在返回`[]`. 为什么它不起作用？

```
$(function () {
    var $target = $(':target');
    console.log($target); // []

    if ($target.length) {
        $target.addClass('kbactive');
    }
}); 
```

`$(':target')`页面加载后手动运行正常；为什么它不立即工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T13:19:05.437

采用：

```
location.hash 
```

获取您的目标ID，因此要获取您可以简单地执行的元素

```
document.getElementById(location.hash); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T13:48:04.180

似乎 :target 直到文档完全加载后才被解析。如果您在加载时运行代码而不是在就绪时运行代码。也许您可以询问浏览器开发团队或查看源代码为什么会这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T13:23:31.890

如果`:target`你的意思是：

> :target 伪类表示唯一元素（如果有），其 id 与文档 URI 的片段标识符匹配。

你可以试试：

```
$(window.location.hash) 
```

可能无法正常工作的原因`$(':target')`是因为它没有记录在 jQuery API 中，并且不清楚选择器的引擎是否可以运行它。

无论如何，`window.location.hash`作为选择器访问和使用它是*完全*一样的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T13:51:42.573

**`:target`**jQuery 不正式支持伪选择器。虽然它可能在**同时支持[CSS3`:target`伪类](http://caniuse.com/#search=%3Atarget)和[`querySelectorAll()`](http://caniuse.com/#search=querySelectorAll)的浏览器中工作，但它在不支持的浏览器（IE8+）中不起作用。**

在 DOM Ready 上选择相同元素的干净、跨浏览器的方法是使用`location.hash`：

```
if(location.hash) {
    var target = $(location.hash); // location.hash already includes the #
} 
```

也就是说，如果你不喜欢这样，因为*“它很 hacky”*（绝对不是），你可以`:target`在 jQuery 中自己添加对选择器的支持：

```
$.expr[":"].target = $.expr.createPseudo(function(s)
{
    return function(el)
    {
        if(location.hash)
            return $(el).attr('id') == location.hash.substring(1);

        return false;
    };
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-10T13:24:56.180

我已更改您的代码以使用 LeviBotelho 的建议

```
$(function () {
    var targetID = window.location.hash;
    var $target = $( targetID );
    console.log($target);

    if ($target.length) {
        $target.addClass('kbactive');
    }
}); 
```

有关选择器和浏览器兼容性的更多信息，请查看[**此处**](https://developer.mozilla.org/en-US/docs/CSS/%3atarget)`:target`的 MDN 站点[](https://developer.mozilla.org/en-US/docs/CSS/%3atarget)

 **尽管上述方法可行，但我确实有一些警告。

正如 Callum Macrae 所提到的，上述内容有点骇人听闻。[HTML 4 规范](http://www.w3.org/TR/html4/types.html#type-id)声明

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

从技术上讲，您可以在 ID 中使用冒号，如果冒号在 location.hash 中转义，`%3A`则上述解决方案可能不起作用。

在 HTML 5 中，许多这些限制已被取消，而且这个问题更有可能发生。更多信息[**在这里**](http://mathiasbynens.be/notes/html5-id-class)**

# java - java中的URL编码问题

> ID：13801747
> 
> 赞同：0
> 
> 时间：2012-12-10T13:17:13.380
> 
> 标签：java, android, json, http-post

这是我的示例网址：

```
url.com/data?format=json&pro={%22merchanturl%22:%22http://url.com/logo.pn‌​g%22,%22price%22:599,%22productDesc%22:%22Apple%2032GBBlack%22,%22prodID%22:%2291‌​3393%22,%22merchant%22:%224536%22,%22prourl%22:%22http://url.com/data%22,%22name%‌​22:%22Apple%2032GB%20%2D%20Black%22,%22productUrl%22:%22http://www.url.com/image.‌​jpg%22,%22myprice%22:550,%22mercname%22:%22hello%22,%22mybool%22:false} 
```

我有一个安卓应用程序。我需要将此网址发布到服务器。因此，该服务器使用令牌进行响应。我正在通过应用程序进行 httppost。但我没有得到任何回应/异常。如果我复制相同的 url 并将其粘贴到浏览器中，那效果很好。我希望我在编码部分做错了。谁能指出我的问题？

这是我的编码方法：

```
private String encodeString(String input) {
    String output = new String(input.trim().replace(" ", "%20")
            .replace("&", "%26").replace(",", "%2c").replace("(", "%28")
            .replace(")", "%29").replace("!", "%21").replace("=", "%3D")
            .replace("<", "%3C").replace(">", "%3E").replace("#", "%23")
            .replace("$", "%24").replace("'", "%27").replace("*", "%2A")
            .replace("-", "%2D").replace(".", "%2E").replace("/", "%2F")
            .replace(":", "%3A").replace(";", "%3B").replace("?", "%3F")
            .replace("@", "%40").replace("[", "%5B").replace("\\", "%5C")
            .replace("]", "%5D").replace("_", "%5F").replace("`", "%60")
            .replace("{", "%7B").replace("|", "%7C").replace("}", "%7D")
            .replace("\"", "%22"));
    return output;
} 
```

更新：

我这样做的原因是，我需要以这种格式发送数据。url的参数部分是一个json数据。如果我对完整的 url 进行编码，那是行不通的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T13:20:26.763

尝试使用`URLEncoder`，仅编码之后的部分`?`

```
String query = URLEncoder.encode(queryPart, "utf-8");
String url = "http://server.com/search?q=" + query; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:20:18.853

虽然自写编码还不错，但我建议使用已被证明有效的内置 Java 方法。

TextUtils 包含一个方法 htmlEncode(String s) 就是为了这个。

[http://developer.android.com/reference/android/text/TextUtils.html#htmlEncode%28java.lang.String%29](http://developer.android.com/reference/android/text/TextUtils.html#htmlEncode%28java.lang.String%29)

# jquery - 未捕获的引用错误：未定义 Jquery

> ID：13801753
> 
> 赞同：1
> 
> 时间：2012-12-10T13:17:42.227
> 
> 标签：jquery, twitter

这是我的第一篇文章，我不是程序员，只是偶尔为我正在从事的项目拼凑来自整个网络的代码的人。

我正在尝试在我正在开发的网站上实现滚动 Twitter 字幕，但遇到了“未捕获的引用错误：未定义 Jquery”错误。

我认为这是因为 Jquery 没有被正确包含或包含失败。我尝试了以下方法：

1.  包括来自不同 URL 的 Jquery，以及在本地托管它
2.  更改 my 中包含语句的顺序，以便 Jquery 排在第一位

我在 SO 上发现了一些类似的线程，但没有一个有助于解决这个问题。

这是我的代码：

```
<head>
<meta charset="UTF-8" />
<title>UnBox 2013 : Venues</title>
<link rel="stylesheet" type="text/css" media="all" href="/Volumes/Boot/Users/siddharthnair/Dropbox/UnBox 2013 Build/resonate/style.css" />
<link href='http://fonts.googleapis.com/css?family=Lekton:400,400italic,700' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Titillium+Web:400,600,400italic,700' rel='stylesheet' type='text/css'>
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js'/> 
<script src='/Volumes/Boot/Users/siddharthnair/Dropbox/UnBox 2013 Build/resonate/jquery.marquee.js'/> 

<script type='text/javascript'>

var Tweetstream = {
init: function () {
this.insertLatestTweets('unboxfestival');
}, 
insertLatestTweets: function (username) {
 var limit = 5; // How many feeds do you want?
 var url = 'https://api.twitter.com/1/statuses/user_timeline.json?screen_name=' + username + '&count=' + limit + '&callback=?'; 

 $.getJSON(url, function (data) {
  var html = '<marquee behavior="scroll" scrollamount="1" direction="left">';

  for (var i in data) {
   html += '<a href="http://twitter.com/' + username + '#status_' + data[i].id_str + '">' + data[i].text + ' <i>' + Twitter.daysAgo(data[i].created_at) + '</i></a>';
  }

  html += '</marquee>';

  $('.tweetstream p').replaceWith(html);

  Twitter.fancyMarquee();
 });
}, 

fancyMarquee: function () {
 $('.tweetstream marquee').marquee('pointer')
  .mouseover(function () {
   $(this).trigger('stop');
  })
  .mouseout(function () {
   $(this).trigger('start');
  })
  .mousemove(function (event) {
   if ($(this).data('drag') == true) {
    this.scrollLeft = $(this).data('scrollX') + ($(this).data('x') - event.clientX);
   }
  })
  .mousedown(function (event) {
   $(this).data('drag', true).data('x', event.clientX).data('scrollX', this.scrollLeft);
  })
  .mouseup(function () {
   $(this).data('drag', false);
  });
}, 

daysAgo: function (date) {
 // TODO: Fix date for IE...
 if ($.browser.msie) {
  return '1 day ago';
 }

 var d = new Date(date).getTime();
 var n = new Date().getTime();

 var numDays = Math.round(Math.abs(n - d) / (1000 * 60 * 60 * 24));
 var daysAgo = numDays + ' days ago';

 if (numDays == 0) {
  daysAgo = 'today';
 }
 else if (numDays == 1) {
  daysAgo = numDays + ' day ago';
 }

 return daysAgo;
}
};

Tweetstream.init();
</script>
</head> 
```

我希望这不是垃圾邮件，如果这里有一个您认为可以回答问题的帖子，请随时为我指明正确的方向。

大部分代码来自这里：[http ://andreaslagerkvist.com/archives/2011/06/24/how-to-create-a-scrolling-twitter-feed-using-jquery/](http://andreaslagerkvist.com/archives/2011/06/24/how-to-create-a-scrolling-twitter-feed-using-jquery/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:20:39.157

首先添加jquery脚本标签，jquery代码应该是document.ready

```
<head>
<meta charset="UTF-8" />
<title>UnBox 2013 : Venues</title>
<link rel="stylesheet" type="text/css" media="all" href="/Volumes/Boot/Users/siddharthnair/Dropbox/UnBox 2013 Build/resonate/style.css" />
<link href='http://fonts.googleapis.com/css?family=Lekton:400,400italic,700' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Titillium+Web:400,600,400italic,700' rel='stylesheet' type='text/css'>
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js'/> 
<script src='/Volumes/Boot/Users/siddharthnair/Dropbox/UnBox 2013 Build/resonate/jquery.marquee.js'/> 

<script type='text/javascript'>
$(document).ready(function() {
var Tweetstream = {
init: function () {
this.insertLatestTweets('unboxfestival');
}, 
insertLatestTweets: function (username) {
 var limit = 5; // How many feeds do you want?
 var url = 'https://api.twitter.com/1/statuses/user_timeline.json?screen_name=' + username + '&count=' + limit + '&callback=?'; 

 $.getJSON(url, function (data) {
  var html = '<marquee behavior="scroll" scrollamount="1" direction="left">';

  for (var i in data) {
   html += '<a href="http://twitter.com/' + username + '#status_' + data[i].id_str + '">' + data[i].text + ' <i>' + Twitter.daysAgo(data[i].created_at) + '</i></a>';
  }

  html += '</marquee>';

  $('.tweetstream p').replaceWith(html);

  Twitter.fancyMarquee();
 });
}, 

fancyMarquee: function () {
 $('.tweetstream marquee').marquee('pointer')
  .mouseover(function () {
   $(this).trigger('stop');
  })
  .mouseout(function () {
   $(this).trigger('start');
  })
  .mousemove(function (event) {
   if ($(this).data('drag') == true) {
    this.scrollLeft = $(this).data('scrollX') + ($(this).data('x') - event.clientX);
   }
  })
  .mousedown(function (event) {
   $(this).data('drag', true).data('x', event.clientX).data('scrollX', this.scrollLeft);
  })
  .mouseup(function () {
   $(this).data('drag', false);
  });
}, 

daysAgo: function (date) {
 // TODO: Fix date for IE...
 if ($.browser.msie) {
  return '1 day ago';
 }

 var d = new Date(date).getTime();
 var n = new Date().getTime();

 var numDays = Math.round(Math.abs(n - d) / (1000 * 60 * 60 * 24));
 var daysAgo = numDays + ' days ago';

 if (numDays == 0) {
  daysAgo = 'today';
 }
 else if (numDays == 1) {
  daysAgo = numDays + ' day ago';
 }

 return daysAgo;
}
};
}
Tweetstream.init();
</script>
</head> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:35:14.843

将 type="text/javascript" 添加到您的 jQuery 引用标签 -

```
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js' type="text/javascript"> 
```

此外，您要么希望移动 URL 末尾的单引号，要么删除斜杠。

然后将您的代码包含在文档准备好的包装器中 -

```
$(document).ready(function() {
    // your code here
}); 
```

# iphone - 相机变焦效果

> ID：13801756
> 
> 赞同：1
> 
> 时间：2012-12-10T13:17:46.173
> 
> 标签：iphone, cocos2d-iphone, camera, scaling, zooming

我正在寻找一种类似于 Tiny Wings 中使用的相机缩放效果，其中相机根据角色高度缩小。

我希望角色在达到设定的高度后开始缩放，并且我希望缩放是非线性的，以便角色随着屏幕的上升而逐渐接近相机边界。

我目前正在使用以下代码进行线性缩放

```
 camera.scale = MIN(1, SCREEN_HEIGHT*0.7 / player_position_y); 
```

这导致播放器始终距离屏幕顶部 30%。我试图找到一个优雅的解决方案，这将导致玩家从屏幕边缘移动 30% 到距离屏幕边缘 10%，具体取决于角色在游戏世界中的高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:23:45.183

只是为了完成，我发布了我想出的解决方案。

```
 float scalar = 4; // Had to tweak this number to get the difference in scales to feel right
        float distance = player_position_y - SCREEN_HEIGHT*0.7;

        float percentage = distance/(SCREEN_HEIGHT*2 - SCREEN_HEIGHT*0.7)

        percentage = 1 - (percentage/scalar);

        self.scale = MIN(1, SCREEN_HEIGHT*0.70 / (player_position_y * percentage)); 
```

基本上，我得到了角色开始缩放的位置和角色可以达到的最大高度之间的距离，作为最大高度的百分比。

我反转该数字并将其乘以定标器。我将此百分比值乘以比例计算中使用的玩家身高。这导致使用随着角色身高增加而移动低于角色的角色位置来计算比例。

# perl - perl 嵌套哈希多重排序

> ID：13801758
> 
> 赞同：2
> 
> 时间：2012-12-10T13:17:53.583
> 
> 标签：perl, hashtable

我的结构看起来像这样（散列的散列）：

```
$VAR1 = {
          'Lee2000a' => {
                'abstract' => 'Abstract goes here',
                'author' => 'Lee, Wenke and Stolfo, Salvatore J'
                'title' => 'Data mining approaches for intrusion detection'
                'year' => '2000'
              },
          'Forrest1996' => {
                'abstract' => 'Abstract goes here',
                'author' => 'Forrest, Stephanie and Hofmeyr, Steven A. and Anil, Somayaji'
                'title' => 'Computer immunology'
                'year' => '1996'
                }
        }; 
```

我想根据三个条件（按此顺序）对该结构进行排序：

第 1 - 根据年份值（1996,2000） 第 2 - 根据“外部”（Lee2000a，Forrest1996）结构键 第 3 - 根据“内部”结构键（摘要、作者、标题、年份）按字母顺序排列。

到目前为止，我有两个代码需要以某种方式组合：

I. 代码符合第 2 条和第 3 条标准

```
for $i (sort keys(%bibliography)){
   print "$i => ", "\n";
   for $j (sort keys ($bibliography{"$i"})){
   print "\t $j -> ", $bibliography{"$i"}{"$j"},"\n";
   }
} 
```

二、代码满足第一个条件

```
for $i (sort { ($bibliography{$a}->{year} || 0) <=> ($bibliography{$b}->{year} || 0) } keys %bibliography){
  print "$i => ", "\n";
  for $j (sort keys ($bibliography{"$i"})){
    print "\t $j -> ", $bibliography{"$i"}{"$j"},"\n";
  }
} 
```

非常感谢你

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T13:26:39.677

要按某些次要条件排序，您可以使用逻辑 OR：

```
my @sorted = sort {
                 $a{c1} <=> $b{c1} || 
                 $a{c2} <=> $b{c2}
             } @unsorted 
```

此示例将按`@unsorted`key对哈希进行排序`c1`，然后，如果此比较相等，则按 key `c2`。

出于您的目的，您可以以这种方式组合外部循环的两个排序比较，以便您的排序块将读取：

```
(($bibliography{$a}->{year} || 0) <=> ($bibliography{$b}->{year} || 0)) ||
($a cmp $b) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T13:35:29.433

**[更新]**添加了一个更简单的版本，该版本仅根据排序条件返回输入哈希上的键。

## 第一种方法：返回排序列表

我们想要对哈希进行排序，排序条件包括键和嵌套在值中的东西。要进行 1 次排序，其中每个`$a`和`$b`可以进行比较，转换哈希 aa 列表可能会很方便，该列表使哈希中的每个键和值都可用。

有点浪费，但有效：

```
my @sorted = 
 sort {
    $a->{val}->{year} <=> $b->{val}->{year} ||             # 1st condition
    $a->{key} <=> $b->{key} ||                             # 2nd condition
    $a->{val}->{abstract} <=> $b->{val}->{abstract} ||     # 3rd condition
    $a->{val}->{author} <=> $b->{val}->{author} ||         # (not really sure
    $a->{val}->{title} <=> $b->{val}->{title} ||           # how you wanted this
    $a->{val}->{year} <=> $b->{val}->{year}
  } map { { val => $biblio{$_}, key => $_  }  } keys %biblio; 
```

我们正在对哈希进行排序；我们需要一个列表作为返回值。在这种情况下，哪里`Forrest1996`适合`Lee2000a`？*我认为将散列转换为散列列表*可能是有意义的，其中每个散列具有 2 个属性 - a`key`和 a `val`。

所以排序的返回值将是这样的哈希列表：

```
@sorted = (
      {
        'val' => {
                   'title' => 'Computer immunology',
                   'author' => 'Forrest, Stephanie and Hofmeyr, Steven A. and Anil, Somayaji',
                   'abstract' => 'Abstract goes here',
                   'year' => 1996
                 },
        'key' => 'Forrest1996'
      },
      {
        'val' => {
                   'title' => 'Data mining approaches for intrusion detection',
                   'author' => 'Lee, Wenke and Stolfo, Salvatore J',
                   'abstract' => 'Abstract goes here',
                   'year' => 2000
                 },
        'key' => 'Lee2000a'
      }
  ) 
```

## 第二种方法：仅返回基于排序条件的键列表

我想，在阅读了评论并重新考虑之后，只返回输入哈希的键就足够好和更轻了：

```
my @sorted = 
  sort {
    $biblio{$a}->{year} <=> $biblio{$b}->{year} ||         # 1st condition
    $a <=> $b ||                                           # 2nd condition
    $biblio{$a}->{abstract} <=> $biblio{$b}->{abstract} || # 3rd condition
    $biblio{$a}->{author} <=> $biblio{$b}->{author}        # ...and so on
   } keys %biblio; 
```

...刚刚返回

```
 @sorted = (
      'Forrest1996',
      'Lee2000a'
 ); 
```

# android - 在android应用程序中实现多线程的最佳/首选方法是什么

> ID：13801761
> 
> 赞同：1
> 
> 时间：2012-12-10T13:18:05.017
> 
> 标签：android, multithreading

我是android开发的初学者，我正在尝试实现一个android udp客户端，它连接到java服务器并从中发送/接收一些数据包。在这个过程中它收集一些数据（如往返延迟等） ，用于衡量特定网络的 QoS。我尝试使用 Java 线程实现连接和发送/接收数据，但是如果我尝试使用超过 2 个线程，应用程序会崩溃并挂起。所以我正在寻找替代品。在浏览此站点以及其他一些链接时，我发现在 android 中可以使用 AsyncTask、Handler 等实现多个线程。此外，我发现 Service 类还有助于在应用程序中运行后台服务。请建议其中哪种方法最能实现我的目的。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T04:25:45.527

There is not one right answer that can be applied as a broad stroke to how to do Android multi-threading. There are a few different ways to approach it based on what your specific needs are.

Any long running, blocking call, in Android will result in the application crashing.

The most common solution is to use an AsyncTask though. For example, when I want to make a call out to a web API endpoint for some XML data within an Activity I would in this case use an AsyncTask and kick off the calls from within doInBackground.

This is not an appropriate solution though if the wait time is longer, or possibly an unknown wait time. Or in a situation where there will always be waiting such as a message queuing service. In this type of situation it may be best to write a separate app based on extending the Service class. Then you can send/receive notifications to/from the service from your primary application in a similar manner to how you would communicate with a web service.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:29:06.463

您可以使用 AasyncTask 来执行此操作，并且正如您所提到的，服务也可能很有用，您可以让您的应用程序在后台执行任何操作，如果用户需要通过其界面使用应用程序，则必须使用 AsyncTask 以避免崩溃

# android - Android布局：imageview与edittext一起移动

> ID：13801764
> 
> 赞同：0
> 
> 时间：2012-12-10T13:18:09.963
> 
> 标签：android, android-layout

嗨，我有一个图像视图和编辑文本如下

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="400dp"
    android:background="#eeeff4" >

    <TextView
        android:id="@+id/btextview"
        android:layout_width="280px"
        android:layout_height="33dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:background="#3B5999"
        android:ellipsize="start"
        android:gravity="left|center_vertical"
        android:paddingLeft="40dp"
        android:text="post it"
        android:textSize="17sp" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/username"
        android:layout_alignParentLeft="true"
        android:background="#3B5999"
        android:paddingRight="5dp"
        android:src="@drawable/book" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/bedittext"
        android:layout_alignParentLeft="true"
        android:layout_alignRight="@+id/imageView2"
        android:layout_alignTop="@+id/bedittext"
        android:src="@drawable/myfb"
         android:layout_marginLeft="6dp" />

    <EditText
        android:id="@+id/bedittext"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/btextview"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="10dp"
        android:layout_toRightOf="@+id/imageView1"
        android:ems="10"
        android:hint="say something about this"
        android:inputType="textMultiLine"
        android:scrollHorizontally="true" >
    </EditText>

</RelativeLayout> 
```

当我在edittextview中输入多行时，imageveiw1也随着编辑文本移动，我希望图像固定在那个位置，只有编辑文本应该展开，我怎样才能让edittext在3行后滚动。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:11:09.657

1.  *我在edittextview中输入多行imageveiw1也与编辑文本一起移动*

因为您将 layout_width="wrap_content" 设置为该编辑文本，所以如果您键入一个字符，则图像会显示在该字符旁边，如果您键入第二个字符，那么它会移动.. 好吗？为避免您可以将 fixed with 或 match_parent 设置为该编辑文本。

2\. *如何使编辑文本在 3 行后滚动*

只需设置固定高度以仅显示三行并将该编辑文本移动到滚动视图中（此高度和宽度应为 wrap_content）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:13:49.020

您可以设置 EditText 的最大高度 (android:maxHeight)，并将 EditText 的 layout_height 设置为 wrap_content 使其展开直到最大高度

# powershell - powershell中的格式显示

> ID：13801769
> 
> 赞同：1
> 
> 时间：2012-12-10T13:18:36.487
> 
> 标签：powershell

我有一个包含以下信息的 csv 文件：

```
OS Name:                   Microsoft© Windows Server© 2008 Standard 
OS Version:                6.0.6002 Service Pack 2 Build 6002
System Manufacturer:       IBM
System Model:              IBM 3850 M2 / x3950 M2 -[7233Z1H]- 
```

我需要使用 powrshell 来读取和格式化显示。我现有的代码是这样的：

```
$Array = @()
Get-Content <txtfilename> | foreach {
$Test = $_
$Title = $Test.split(":")[0]
$Content = $Test.split(":")[1]
$Obj = New-Object System.Object
$Obj | Add-Member -MemberType NoteProperty -value $Title -Name Title
$Obj | Add-Member -MemberType NoteProperty -value $Content -Name Value
$Array += $Obj
}

$Array | Select Title,Value | Export-Csv <csvfilename> -NoTypeInformation 
```

它显示的信息如下所列：

```
Title      Content
OS Name                         Microsoft? Windows Server? 2008 Standard 
OS Version                      6.0.6002 Service Pack 2 Build 6002
System Manufacturer             IBM
System Model                    IBM 3850 M2 / x3950 M2 -[7233Z1H]- 
```

我需要像这样在一行中显示的信息：

```
ServerName, OS Name , OS Version,  System Manufacture, Sytem model,
TestServer1, Microsoft Windows, 6.0.6002 Service Pack 2, IBM, IBM 3850 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:14:37.053

首先，只是快速更正。你说你有一个CSV。看起来你有一个格式化的文本文件，你想用它制作一个 CSV。

按照这个假设，这样的事情应该让你开始。它假定文本文档中只有这 4 个项目，或者这 4 个项目重复多次 - 总是以相同的顺序，并且它们之间没有空格。如果没有一堆关于它们外观的示例，重新格式化文本文件永远不会有趣。

话虽如此，以下内容应该可以帮助您入门。

```
[int]$i = 1
$outString = ""
Get-Content C:\users\chris\desktop\info.txt | % {
    #Take the line, remove the title, remove whitespaces from inside of the line and trim whitespaces from the outside.
    $lineContent = ($_.split(':')[1] -replace '\s+', ' ').Trim()
    #Chunk them together...
    if ($i -lt 4){
        $outstring += $linecontent + ','
        $i += 1
    }
    #or insert a return, new line
    else{
        $outstring += $linecontent + "`r`n"
        $i = 1
    }
}
#Add a header row.  Now $outstring is your CSV formatted text.
$outstring = "OSName,OSVersion,SystemMfg,SystemModel`r`n"+$outstring 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:50:12.730

这是更高级情况的第二个答案，您不知道您有多少个唯一标题或它们被称为什么。只要它们始终相同且顺序相同，以下内容将起作用：

```
$filePath = "C:\users\chris\desktop\info.txt"
$headers = @()
[int]$headerCount = 0
$endUnique = $false
Get-Content $filePath | % {
    $header = ($_.split(':')[0] -replace '\s+', ' ').Trim()
    if (($headers -notcontains $header) -and (!$endUnique)){
        $headers += $header
        $headerCount += 1
    }
    else{
        $endUnique = $true
    }
}
$headerRow = ""
$headers | % {$headerRow += $_ + ","}
$headerRow = $headerRow.Substring(0,$headerRow.Length-1)

[int]$i = 1
$outString = ""
Get-Content $filePath | % {
    $lineContent = ($_.split(':')[1] -replace '\s+', ' ').Trim()
    if ($i -lt $headerCount){
        $outstring += $linecontent + ','
        $i += 1
    }
    else{
        $outstring += $linecontent + "`r`n"
        $i = 1
    }
}
$outstring = $headerRow+ "`r`n"+$outstring 
```

我想从更高级的 PowerShell 用户那里看到其他答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:10:46.317

```
$object = New-Object System.Object
Get-Content TestServer1-OSInfo.txt | % {
 If($_.Contains(":")){
    $Left = $_.split(":")[0].TrimStart().TrimEnd()
     $Right = $_.split(":")[1].TrimStart().TrimEnd()
      $object | Add-Member -type NoteProperty -name $Left -value $Right
    }
}
$object | Export-Csv TestServer1-OSInfo.csv -NoTypeInformation 
```

# java - 如何在没有插入方法的情况下将模拟对象插入到对象中？

> ID：13801771
> 
> 赞同：1
> 
> 时间：2012-12-10T13:18:53.350
> 
> 标签：java, powermock

我有这样的代码：

```
public class A {
    int n;
    public A() {
        n = 10;
    } 
    public int get() {
        B b = new B(...);
        return b.getValue() + n;
    }
} 
```

现在我想对get()进行单元测试，但是B的构造函数很复杂，所以我想mock B，那么这里有一个问题，我mock B之后，它没有将mock对象设置为A的方法，所以任何机构都有好主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T13:27:00.350

如果你这样设置类：

```
public class A {
 int n;
 public A() {
     n = 10;
 } 
 public int get() {
    return getValueFromB() + n;
 }
 protected int getValueFromB()
 {
    return new B().getValue();
 }
} 
```

你可以模拟 getValueFromB()。现在 get() 依赖于 getValueFromB()，它是模拟的，以后可以实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T13:27:35.783

在 Powermock 中，您可以模拟 B 实例的构造。

首先，您需要注释您的类：

`@PrepareForTest(A.class)`

然后创建模拟并记录行为：

```
B bMock = createMock(B.class);
expectNew(B.class, "someargument").andReturn(bMock);
expect(bMock.getValue()).andReturn(something);

replay(bMock, B.class);
verify(bMock, B.class); 
```

阅读[完整的文档](http://code.google.com/p/powermock/wiki/MockConstructor)。

# java - 将源文件链接到 Eclipse 中的编译文件

> ID：13801772
> 
> 赞同：0
> 
> 时间：2012-12-10T13:19:01.453
> 
> 标签：java, eclipse, jar, javac

我正在尝试从现有项目构建一个 jar。由于我希望能够在 Eclipse 中查找源代码（调试等），因此我需要链接源文件。我用这个表达式编译了源代码：

```
 javac -d classes/ -s src/ -verbose -g -sourcepath Framework/ src/DivaAPI.java src/DivaCallBase.java 
```

之后我运行这个命令：

```
 cd classes
    jar -cvmf manifest.txt Framework.jar package/name/*.class > nul 
```

我的目录如下所示：

*   根
    *   源代码
        *   *.java 文件*

    *   *班级*

        *   *包/名称/* .class 文件
        *   清单.txt

之后，生成的 jar 文件被复制到我项目中的 lib ordner 中，将其导入库选项卡（属性/Java Build Path/Library），几乎一切正常。导入库的源代码查看除外。我不知道如何在 Eclipse 中链接我现有的源代码。我知道“附加源”按钮。但是如果我单击它并选择正确的源文件夹，Eclipse 会告诉我该文件夹不包含任何源文件。

在我看来，我做错了什么，但我就是想不通，那会是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:47:12.170

好的，我需要再搜索一点。在这篇[文章](https://stackoverflow.com/questions/6687150/linking-source-to-jars-in-eclipse)的帮助下（该答案的第一个答案和第二个评论，全部由 @Ed Staub 提供），我想通了。

最简单的方法是生成一个新的 jar，但这次使用 java 文件。命名它并将其复制到 lib 文件夹。再次使用“附加源”按钮并导航到 lib 文件夹并选择 source.jar。

现在，一切都应该以正确的方式工作。

# sql - 尽快在 SQL Server 中搜索多个值

> ID：13801773
> 
> 赞同：0
> 
> 时间：2012-12-10T13:19:01.900
> 
> 标签：sql, sql-server, optimization

我有以下 sql 语句从存储的视图中提取数据：

```
foreach (var id in insert_idlist[0])
{
    mssql_con.Open();
    //top 1 for duplicate removal
    //slowdown?
    var mssql_select = "SELECT * FROM dbo.export_to_web WHERE SKU = '" + id + "'";
} 
```

我想重写 sql 语句以使用 IN 子句或类似的子句将所有 id 插入单个查询以加快执行速度。但是我知道 IN 是一个相对较慢的操作，所以我希望获得一些专家建议，以最快的方式检索我的数据。

速度是我在这个问题上唯一关心的问题。

请注意，安全性不是问题，因为此应用程序从内部数据库中提取所有变量，没有直接的 Web 访问权限。

更新代码：

```
 try
    {

        //foreach (var id in insert_idlist[0])
        //{
            mssql_con.Open();
            //top 1 for duplicate removal
            //slowdown?
            //var mssql_select = "SELECT * FROM dbo.export_to_web WHERE SKU = '" + id + "'";
            var mssql_select = "SELECT * FROM dbo.export_to_web WHERE SKU IN (" + insert_idlist .Select(x => "'" + x + "'") .Aggregate((x, y) => x + "," + y) + ")";
            //var mssql_select = "SELECT * FROM dbo.Book5 WHERE SKU = '"+id+"'";
            SqlCommand cmd = new SqlCommand(mssql_select, mssql_con);
            cmd.CommandTimeout = 0;
            lbl_dev.Text += "teest";

            //Create a data reader and Execute the command
            try
            {
                SqlDataReader dataReader = cmd.ExecuteReader();

                  //Read the data and store them in the list
                 while (dataReader.Read())
                {
                    insert_idlist[1].Add(dataReader["supplier name"] + " " + dataReader["range description"] + " " + dataReader["item description"]);
                    insert_idlist[3].Add(dataReader["Sale Price"] + "");
                    insert_idlist[2].Add(dataReader["WebDesc"] + "");
                    //insert_idlist[3].Add(dataReader["id"] + "");removed
                    insert_idlist[4].Add(dataReader["WebDimensions"] + "");
                    insert_idlist[5].Add(dataReader["RRP"] + "");
                    insert_idlist[6].Add(dataReader["Normal Price"] + "");
                    insert_idlist[7].Add("482"); //add me
                    insert_idlist[8].Add(dataReader["ID"] + "");

                    lbl_dev.Text += dataReader["supplier name"] + " " + dataReader["range description"] + " " + dataReader["item description"];
                    lbl_dev.Text += mssql_select;
                     about_to_insert = about_to_insert + 1;

                }
                lbl_dyn_status.Text = "Record 0 of " + about_to_insert + "updated.";

                dataReader.Close();
                mssql_con.Close();

            }

            catch (Exception e)
            {
                lbl_dev.Text = "" + e.Message;
            }

   // }

            }
            catch (Exception e)
            {
                lbl_dev.Text = "" + e.Message;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:21:05.497

> 我想重写 sql 语句以使用 IN 子句或类似的方法将所有 id 插入到单个查询中。

你可以`INSERT INTO ... SELECT ...`这样使用：

```
INSERT INTO ATable(...)
SELECT * FROM dbo.export_to_web WHERE SKU = someid; 
```

**请注意：**您必须在子句中列出列的名称`INSERT`以匹配`SELECT *`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:22:11.337

如果您使用的是 2008 或更高版本，最好的方法是将值传递到表值参数中。我总是将人们指向我为此写的博客[文章](http://www.atlantis-interactive.co.uk/blog/post/2011/05/21/A-generic-list-for-passing-table-valued-parameters-to-SQL-Server.aspx)。

但是，IN 不一定是一个缓慢的操作，只要您正在搜索的字段被适当地索引 - 它几乎肯定会比“每个项目的连接”方法更快。

然后 SQL 将类似于：

```
var mssql_select = "SELECT * FROM dbo.export_to_web WHERE SKU IN (" + insert_idlist
                   .Select(x => "'" + x + "'")
                   .Aggregate((x, y) => x + "," + y) + ")"; 
```

免责声明 - LINQ 可能不是 100% 的 :)

# facebook - Facebook - 我的应用程序权限未显示在登录中（php）

> ID：13801780
> 
> 赞同：2
> 
> 时间：2012-12-10T13:19:33.643
> 
> 标签：facebook, login, permissions

我正在使用来自 github 的 php SDK 示例： $user_id = $facebook->getUser();

据我了解，这应该使用我为应用程序定义的权限打开 facebook 登录对话框，但我只看到基本权限。

facebook 应用设置表单上不再提供检查已验证推荐的选项。

我是否必须以某种方式请求代码本身的权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:26:39.630

您需要代码才能弹出权限窗口。

像这样的东西会有所帮助：

```
Do you check on user?

    // Init the Facebook SDK
    $facebook = new Facebook(array(
           'appId'  => $app_id,
           'secret' => $app_secret,     
           'cookie' => true
    ));

    // Get the current user
    $user = $facebook->getUser();

if (!$user) {
        $loginUrl = $facebook->getLoginUrl(array(
            'scope' => $scope,
            'redirect_uri' => $app_url,
            ));

            echo "<script type='text/javascript'>top.location.href = '$loginUrl';</script>";
    }
    else{        

    $user_profile = $facebook->api('/me');

    // STUFF
    } 
```

# windows-phone-8 - 哪个 Windows 版本用作 Windows Phone 8 项目的构建服务器？

> ID：13801781
> 
> 赞同：3
> 
> 时间：2012-12-10T13:19:39.197
> 
> 标签：windows-phone-8, build-server, windows-server-2012

我们计划创建虚拟机作为 Windows Phone 8 项目的构建服务器。根据官方要求，WP8 SDK 只能在 Windows 8 上运行。问题是**是否可以在 Windows Server 2012 上也安装 VS2012 和 WP8 SDK**，还是应该只使用支持的 Windows 8？
请注意，我们使用 Hyper-V 来托管虚拟机，并且我们不需要该构建服务器上的 WP8 模拟器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:27:42.230

作为一种可能的替代方案（因为我没有测试您在 WS 2012 上构建的问题），您为什么不在线使用 TFS？它允许 5 个免费项目（私有托管在云中）。在此处查看更多信息：http: [//tfs.visualstudio.com/](http://tfs.visualstudio.com/)

有关您的问题的更多信息：我尝试在 Windows 7 上运行 WP8 SDK 没有任何运气（但它不受支持，所以我理解）。此外，我曾尝试从 Windows 8 虚拟机运行 WP8 SDK，但模拟器无法运行，因为 Hyper-V 无法在 Hyper-V 上运行而无需采用此选项： http: [//www.developer.nokia.com /Community/Wiki/Windows_Phone_8_SDK_on_a_Virtual_Machine_with_Working_Emulator](http://www.developer.nokia.com/Community/Wiki/Windows_Phone_8_SDK_on_a_Virtual_Machine_with_Working_Emulator)

希望这在某种程度上有所帮助，形状，或形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T17:48:44.393

在我的工作站上安装了 VS2012、WP8 SDK。一切正常。

# javascript - Java Script 中的 formAction() 方法是什么

> ID：13801783
> 
> 赞同：-3
> 
> 时间：2012-12-10T13:19:40.210
> 
> 标签：javascript

我对这些代码行感到困惑......

点击提交按钮后它去哪里了？？

```
<input type="button" value="submit" onClick="updateForm()"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T13:21:54.320

`onClick="updateForm()"`表示单击按钮时调用方法`updateForm()`。在源代码中查找该名称的方法。

~~如果 updateForm() 返回 a `false`，则按钮的默认行为被抑制。如果不是，则`updateForm()`调用 then ，然后按钮继续其默认行为。~~

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T13:22:16.723

事件处理函数（其主体由属性的值定义`onclick`）运行。该函数除了尝试调用另一个函数之外什么都不做`updateForm`。

接下来会发生什么取决于 的定义`updateForm`。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-10T13:35:34.020

形成方法？？

您还可以使用以下提到的行为之一：

```
<form id="myform" action="javascript:myfunction();">

<form onSubmit="return myfunction()">* 
```

现在您可以在 javscript 文件中描述您的函数：

```
myfunction=function (){ 
```

// 我的代码在这里

}

当您提交表单时，“myFunction”将首先被调用，然后您的后续表单行为将被看到，或者您可以通过在函数中返回 false 来阻止其行为。

# python - 从 python cgi 执行用户 shell 命令

> ID：13801788
> 
> 赞同：0
> 
> 时间：2012-12-10T13:20:09.400
> 
> 标签：python, linux, cgi

我有一个任务分配给我来创建一个 python 脚本，当它作为 cgi 调用时应该在用户机器上执行命令。

我是否可以执行从 html 表单传递给 python cgi 的 shell 命令？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>xyz</title>
</head>
<body>
<big><big>Login
Here<br>
<br>
</big></big>
<form action="/var/www/cgi-bin/xyz.py" name="xyzform"><big>xyz
<br>
 enter your value<br>
  <input name="text"><br>
  <br>
  <br>
<input type="submit">
  <br>
</form>
&nbsp;__&nbsp;<br>
</body>
</html> 
```

当用户提交此表单时，文本应在 python cgi 中匹配，然后执行命令以访问用户调用机器上 nfs 中的文件。

是否可以使用 cgi 或 cgitb 模块？如果没有，那么我该如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:52:34.433

**你可以在用户**机器上执行的最好的就是javascript

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T03:41:35.133

通常出于安全原因和设计，您不能使用典型的 Web 技术在用户机器上执行代码。但这样做是可能的，有时是必要的。一个示例是基于 Web 的应用程序，它具有需要与用户的硬件设备交互的某些屏幕。以下是一些潜在的解决方案，可让您在用户机器上执行代码：

1.  [ActiveX](http://en.wikipedia.org/wiki/ActiveX)仅适用于 IE 且仅适用于 Windows。但这会让你编写在用户机器上执行的代码。
2.  [使用 nsIProcess 的 Firefox 扩展](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIProcess#run%28%29)。这是我过去使用过的一种不错的跨操作系统方法。它将在 Linux、Win、Mac 上运行，让我们创建一个可以在机器上执行代码的扩展。然后您的网页可以与您的扩展程序通信以运行您需要的代码。
3.  [Window 的 RPC](http://en.wikipedia.org/wiki/Remote_procedure_call)是一种可以从服务器在用户机器上执行代码的方法。这只有在所有机器都是 windows 机器并且通常所有机器都在同一个 LAN 上并且属于同一个 windows 域的情况下才有效。您的服务器还应该在域上具有在用户桌面上执行代码的权限。这样做的真正好处是您不必在用户计算机上安装任何东西，而且它是跨浏览器兼容的。

我相信有很多方法可以做到这一点，上面的列表只是其中的一个示例。实现这一点时，牢记安全性非常重要。您必须在您的设计中非常确定，只有您的网站应该被授权这样做才能在用户计算机上执行命令。

# jquery - 媒体查询由灯箱触发

> ID：13801791
> 
> 赞同：0
> 
> 时间：2012-12-10T13:20:19.820
> 
> 标签：jquery, fancybox

我正在使用 Fancybox 2，并且有一个如下所示的媒体查询：

```
@media (max-width : 1200px) {

#columnset1_column1 {
    display: none;
}
#sitelayout6 {
    width: 980px !important;
}
#columnset3 {
    display: block;
}
#columnset2 {
    margin-top: 70px;
}
} 
```

但奇怪的是当显示 iframe 的灯箱时触发媒体查询。它显示的页面只有 700 像素宽。

这只是 Internet Explorer 中的问题，而不是 Chrome 中的问题。

窗口大小在任何时候都不会调整大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:56:51.190

我在这里找到了一个有帮助的答案： [Fancybox 2 Forcing Responsive Media Queries in IE](https://stackoverflow.com/questions/13938641/fancybox-2-forcing-responsive-media-queries-in-ie)

基本上，在 iframe 中，更新对 CSS 的引用以包含查询字符串...

因此，在您的父页面中，您有：

```
<link rel="stylesheet" href="screen.css" /> 
```

在你的 iframe 中，你有

```
<link rel="stylesheet" href="screen.css?iframe=true" /> 
```

这解决了 IE 中的一个错误，该错误导致 iframe 在您的 css 中触发父页面的媒体查询。

# c++ - 避免在向量迭代期间迭代器失效

> ID：13801792
> 
> 赞同：0
> 
> 时间：2012-12-10T13:20:19.887
> 
> 标签：c++

在遍历向量时，推荐的避免错误的方法是什么；向量中的任意数量的元素可能（直接或间接）导致元素的插入或删除 - 使迭代器无效？

具体来说，我问的是游戏编程，向量中的元素是游戏对象；其中一些可以生成其他对象，其中一些将在更新时被杀死并需要删除。正因为如此，在迭代之前保留大容量也是不可能的，因为完全不知道可以添加多少元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T13:30:43.277

一般不能说。*迭代器失效的部分*原因是没有办法读懂你的想法来知道你希望失效的迭代器引用什么元素。

例如，我有一个指向元素 3 of 5 的迭代器。我删除元素 2。迭代器应该指向新元素 2（因为它是“相同的值向下移动”），还是应该指向新元素 3（因为它是“向量的相同元素，具有不同的值向下移动”）？

实际上，您的选择是：

1.  不要在其他人有迭代器时插入/删除元素。这意味着更改您的代码以在其他时间进行更改。
2.  使用索引而不是迭代器。这导致上面的第二个选项（“索引引用具有新值的相同元素”）。请注意，如果您删除了足够多的元素以致索引结束，索引也可能变得无效。
3.  使用具有不同迭代器失效规则的不同数据结构。例如 a`std::list`会给你上面的第一个选项（“迭代器引用新位置的相同元素”）

您用于迭代的迭代器永远不会因在该位置插入/擦除单个元素而有害地无效。它已失效，但两个函数都返回一个新的迭代器，您可以使用该迭代器继续迭代。有关新迭代器引用的元素，请参阅他们的文档。这就是为什么只有在同一个容器上使用多个迭代器时才会出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:27:40.490

Vector 可能不是支持密集插入/删除的最佳容器（尤其是当大小很大时）。但是，如果您必须使用向量，恕我直言，最安全的方法不是使用迭代器，而是使用索引，并跟踪（并调整索引）在当前位置之前插入/删除的项目。这样，您至少可以避免重新分配的问题。

并在每次迭代后重新计算 v.size()/v.end()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T13:28:17.843

这里有一些想法：

1.  使用整数索引迭代向量。这不会失效，但您需要在插入/删除元素时注意调整当前索引。
2.  迭代向量的副本。
3.  不要在进行过程中对向量进行更改，而是跟踪需要插入/删除的内容，并在完成迭代后应用更改。
4.  使用不同的容器，例如链表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T13:34:21.240

使用单独的向量和`std::move`未删除的元素以及任何创建的新元素。然后删除旧向量。

这样，您不必从原始向量中删除/插入任何内容，并且迭代器不会失效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T13:51:36.150

当然，您可以通过使用不会在插入和删除时使迭代器无效的容器来解决此问题。

我想推荐一种不同的方法。本质上，您是在迭代向量以在游戏世界中创建一个新状态。不要在遍历向量时更改世界的状态，而是将需要更改的内容存储在新向量中。然后，在您完全检查了旧状态之后，应用您存储在新向量中的更改。

这种方法有一个概念优势：每个对象的新状态**仅**依赖于旧状态。如果您在遍历旧状态时应用更改，并且关于一个对象的决定可能取决于其他对象，则遍历顺序会影响结果，这可能会给“较早”或“较晚”的对象带来不公平的优势。

# bash - bash 函数调用到底有多贵？

> ID：13801795
> 
> 赞同：6
> 
> 时间：2012-12-10T13:20:26.253
> 
> 标签：bash

如果有兴趣，是否有任何资料表明 Bash 中的函数调用到底有多昂贵？我希望它们比直接在其中执行代码要慢几倍，但我似乎找不到任何相关信息。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T14:32:34.677

我真的不同意在 bash 中编程时不应该担心性能。这实际上是一个非常好的问题。

这是一个可能的基准，比较 builtin`true`和 command `true`，其完整路径`/bin/true`在我的机器上。

在我的机器上：

```
$ time for i in {0..1000}; do true; done

real    0m0.004s
user    0m0.004s
sys 0m0.000s
$ time for i in {0..1000}; do /bin/true; done

real    0m2.660s
user    0m2.880s
sys 0m2.344s 
```

惊人的！仅分叉一个进程（在我的机器上）就浪费了大约 2 到 3 毫秒！

因此，下次您要处理一些大型文本文件时，您将避免使用管道`cat`s、`grep`s、`awk`s、`cut`s、`tr`s、`sed`s、`head`s、`tail`s、 s 的（延迟）长链`you-name-it`。此外，unix 管道也非常慢（这将是您的下一个问题吗？）。

想象一下你有一个 1000 行的文件，如果在每一行中你放一个`cat`然后一个`grep`然后一个`sed`然后一个`awk`（不，别笑，你可以通过浏览这个网站上的帖子看到更糟糕的情况！），那么你'已经浪费了（在我的机器上）至少 2*4*1000=8000ms=8s 只是分叉愚蠢和无用的进程。

**更新。**要回答您对管道的评论...

### 子壳

子壳非常慢：

```
$ time for i in {1..1000}; do (true); done

real    0m2.465s
user    0m2.812s
sys 0m2.140s 
```

惊人的！每个子外壳超过 2 毫秒（在我的机器上）。

### 管道

管道也很慢（这应该很明显，因为它们涉及子shell）：

```
$ time for i in {1..1000}; do true | true; done

real    0m4.769s
user    0m5.652s
sys 0m4.240s 
```

惊人的！每个管道超过 4 毫秒（在我的机器上），因此仅管道 2 毫秒（减去子外壳的时间）。

### 重定向

```
$ time for i in {1..1000}; do true > file; done

real    0m0.014s
user    0m0.008s
sys 0m0.008s 
```

所以这相当快。

好的，您可能还希望通过创建文件来查看它：

```
$ rm file*; time for i in {1..1000}; do true > file$i; done

real    0m0.030s
user    0m0.008s
sys 0m0.016s 
```

仍然相当快。

### 管道与重定向：

在您的评论中，您提到：

```
sed '' filein > filetmp; sed '' filetmp > fileout 
```

对比

```
sed '' filein | sed '' > fileout 
```

（当然，最好的办法是使用`sed`（通常是可能的）的单个实例，但这并不能回答问题。）

让我们检查一下：

一个有趣的方法：

```
$ rm file*
$ > file
$ time for i in {1..1000}; do sed '' file | sed '' > file$i; done

real    0m5.842s
user    0m4.752s
sys 0m5.388s
$ rm file*
$ > file
$ time for i in {1..1000}; do sed '' file > filetmp$i; sed '' filetmp$i > file$i; done

real    0m6.723s
user    0m4.812s
sys 0m5.800s 
```

因此，使用管道而不是使用临时文件（对于 sed）似乎更快。事实上，这可以在不输入行的情况下理解：在管道中，一旦第一个`sed`吐出一些东西，第二个`sed`就开始处理数据。在第二种情况下，第一个`sed`做它的工作，然后第二个`sed`做它的工作。

所以我们的实验不是确定管道是否比重定向更好的好方法。

流程替换怎么样？

```
$ rm file*
$ > file
$ time for i in {1..1000}; do sed '' > file$i < <(sed '' file); done

real    0m7.899s
user    0m1.572s
sys 0m3.712s 
```

哇，好慢！嘿，但是观察用户和系统 cpu 的使用情况：比其他两种可能性要少得多（如果有人可以解释...）

# objective-c - 横向 xib 仅适用于 ipad 版本

> ID：13801798
> 
> 赞同：1
> 
> 时间：2012-12-10T13:20:40.813
> 
> 标签：objective-c, ios, xcode, xib, landscape

我有一个适用于 iPhone 和 iPad 的通用应用程序，带有单独的 xib

对于 iPad 版本，我希望我的 iPad xib 之一处于横向模式。我已在模拟指标中将其设置为横向（该应用程序在摘要屏幕中设置为纵向），并且横向视图在运行时仍以纵向显示。我确定我在这里阅读了一个命名约定，它告诉应用程序 xib 是横向的，即：`view1_one.xib~ipad-landscape`

我尝试过使用屏幕旋转方法，但 iOS 6 屏幕旋转只是证明如此令人沮丧，因为我尝试了很多解决方案，但都没有效果。我之前在 iOS 6 中完成过屏幕旋转，但我使用故事板并为我选择的视图子类化导航控制器，我不知道如何使用此代码执行此操作，因为我从其他人那里选择了 ip

总结一下：我怎样才能让我的屏幕尊重我在界面生成器中创建的横向 xib 而不是纵向显示它

我会指出我已经在这里搜索了一个解决方案，并在发布此之前花了很多时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T13:43:29.637

资源（包括 xib）有一些命名约定，用于指定加载它们的设备类型。然而，这些并不存在于特定的方向。`-landscape`不会做任何额外的事情（更具体地说，它可能也会在 iPhone 上加载资源，这不是您想要的）。

[http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/LoadingResources/Introduction/Introduction.html#//apple_ref/doc/uid/10000051i-CH1-SW2](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/LoadingResources/Introduction/Introduction.html#//apple_ref/doc/uid/10000051i-CH1-SW2)

至于处理方向变化，请确保您同时实现了 iOS 5 及以下的方法以及处理它们的 iOS 6 方法：

```
// Older versions of iOS (deprecated)
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
    return UIInterfaceOrientationIsLandscape(toInterfaceOrientation);
}

// iOS6
- (BOOL)shouldAutorotate {
    return YES;
}

// iOS6
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskLandscape;
}

// Added after comment
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return UIInterfaceOrientationLandscapeLeft;
} 
```

这是确保您的 viewController 仅在横向加载的官方方法。

**编辑：**

我也添加了`preferredInterfaceOrientationForPresentation`方法。虽然我个人不喜欢这种方法，但它会强制 viewController 以该方向呈现，直到下一次方向改变。不好，但它会帮助您查看您的定向方法是否被调用。

还要尝试在这些方法中的每一个中设置断点。如果他们根本没有被调用，您的问题可能与子类化有关。确保情节提要中的 viewController 设置为子类而不是超类。

**编辑2：**

在 Interface Builder 中检查：

![确保 Interface Builder 中的 ViewController 设置为适当的子类](../Images/704342f2dfc9f9fe64f96b15881410ab.png)

# ruby-on-rails - 部署后 Sass 文件系统缓存错误（`options=' for true:TrueClass）

> ID：13801799
> 
> 赞同：1
> 
> 时间：2012-12-10T13:20:42.753
> 
> 标签：ruby-on-rails, caching, sass

我有一个在多个实例（nginx + Thin）上运行的大型 Rails 项目。一段时间以来，我一直遇到一个错误：

```
NoMethodError: undefined method `options=' for true:TrueClass (in [...]/app/assets/stylesheets/stylesheet-3.css.scss.erb) 
```

每次重新部署后不久。经过一些研究（[https://github.com/rails/rails/issues/4648](https://github.com/rails/rails/issues/4648)），我确定问题根源于 Sass 缓存机制（我们使用 sass 3.2.1 和 sass-rails 3.2.5）。阅读相关的 Sass 代码，我将错误追溯到 EOFError、TypeError、ArgumentError 或 LoadError 异常，在`Sass::CacheStores::Filesystem::_retrieve`.

我的问题是，我无法在受控（本地）环境中复制此错误，也无法引入随机更改来查看会发生什么。

有谁知道这个问题的真正（根本）原因可能是什么？

# css - 按钮的 css 属性

> ID：13801805
> 
> 赞同：0
> 
> 时间：2012-12-10T13:21:09.040
> 
> 标签：css

我有这个 html 代码和这个按钮，现在我需要为这两个按钮提供不同的 css。

你能帮我解决这个问题吗？

```
<div class="modal" style="display: none;">
<button type="button" class="action confirm">Konfirmo</button>
<button type="button" class="action cancel">Anullo</button>
</div> 
```

它应该类似于 .modal .button .confirm 我正在尝试为这两个按钮提供不同的 CSS。那么，我该怎么做！谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:24:29.910

我不太清楚你在问什么，但你在寻找这样的东西吗？

```
.modal .confirm {
    color: green;
}

.modal .cancel {
    color: red;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:24:47.333

样式你的第一个按钮`.modal button.confirm { ... }`和第二个按钮`.modal button.cancel { ... }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T13:24:50.797

```
div.modal button.confirm{
    /* css for confirm buttom */
}

div.modal button.cancel{
    /* css for cancel buttom */
} 
```

# wordpress - 如何在 WordPress 中使用 ajax 发送大型 POST 数据？

> ID：13801806
> 
> 赞同：2
> 
> 时间：2012-12-10T13:21:07.167
> 
> 标签：wordpress, jquery, post, get

使用以下函数时出现以下错误：

加载资源失败：服务器响应状态为 414 (Request-URI Too Large)。

当数据不太长时，该函数工作正常，问题是，在某些情况下，rez 和 com 变得冗长，而 ajax 似乎使用的是 GET，而不是 POST。任何人都可以向我解释为什么在我声明 POST 时 ajax 使用 GET 吗？我该如何防止呢？谢谢你。

```
jQuery('#buton_submit').click(function() {
    var rez = {};
    var com = {};
    jQuery("input[name^='sb-rez']:checked").each(function() {
        rez[jQuery(this).attr('name').substr(7)] = jQuery(this).val();
    });
    jQuery("textarea[name^='sb-com']").each(function() {
        if (jQuery(this).val().length > 0) {
            com[jQuery(this).attr('name').substr(7)] = jQuery(this).val();
        }
    });
    jQuery.ajax({
        url: '/wp-admin/admin-ajax.php',
        data:{
            'action':'admin_event',
            'fn':'saveResultsEvent',
            'method': 'POST',
            'contentType': 'application/x-www-form-urlencoded;charset=UTF-8',
            'processData': false,
            'r': rez,
            'c': com,
            'pid': jQuery('div[id="content"] :first-child').attr('id').substr(5)
        },
    success: function(data){
        jQuery('#arata_mesaje').html(data);
        jQuery('#arata_mesaje').show('fast');
        jQuery('#arata_mesaje').delay(3000).hide(1000);
        },
    error: function(errorThrown){
        alert('Error printed in console.');
        console.log(errorThrown); 
        }
    });
}); 
```

正确的 .ajax 调用，以供将来参考（尝试将其发布为答案，但由于缺乏声誉，我无法再 8 小时回答我自己的问题）：

```
jQuery.ajax({
    url: '/wp-admin/admin-ajax.php',
    type: 'POST',
    contentType: 'application/x-www-form-urlencoded;charset=UTF-8',
    processData: false,
    data:{
        'action':'admin_event',
        'fn':'saveResultsEvent',
        'r': rez,
        'c': com,
        'pid': jQuery('div[id="content"] :first-child').attr('id').substr(5)
    },
    success: function(data){
        jQuery('#arata_mesaje').html(data);
        jQuery('#arata_mesaje').show('fast');
        jQuery('#arata_mesaje').delay(3000).hide(1000);
    },
    error: function(errorThrown){
        alert('Error printed in console.');
        console.log(errorThrown); 
    }
}); 
```

问题是我错误地在数据数组中声明了类型/方法和 contentType，而不是作为 ajax 调用的参数，默认情况下方法是 GET。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:26:27.633

您打错了-查看`jQuery.ajax()` [此处](http://api.jquery.com/jQuery.ajax/)的文档，您将看到您定义了与`type`键一起使用的方法，而不是`method`. 所以你的请求应该是这样的：

```
jQuery.ajax({
    url: '/wp-admin/admin-ajax.php',
    data:{
        'action':'admin_event',
        'fn':'saveResultsEvent',
        'type': 'POST',
        'contentType': 'application/x-www-form-urlencoded;charset=UTF-8',
        'processData': false,
        'r': rez,
        'c': com,
        'pid': jQuery('div[id="content"] :first-child').attr('id').substr(5)
    },
    success: function(data){
        jQuery('#arata_mesaje').html(data);
        jQuery('#arata_mesaje').show('fast');
        jQuery('#arata_mesaje').delay(3000).hide(1000);
    },
    error: function(errorThrown){
        alert('Error printed in console.');
        console.log(errorThrown); 
    }
}); 
```

# c - acosf 实现中的 CUDA __float_as_int

> ID：13801808
> 
> 赞同：1
> 
> 时间：2012-12-10T13:21:14.130
> 
> 标签：c, math, cuda, ptx

CUDA C 的数学函数实现 ( `cuda/math_function.h`)`acosf`包含以下段落：

```
if (__float_as_int(a) < 0) {
  t1 = CUDART_PI_F - t1;
} 
```

其中`a`和`t1`是`floats`和`CUDART_PI_F`是`float`先前设置为接近数学常数 Pi 的数值。我试图了解条件（if-clause）正在测试什么以及它的 C 等价物或 function/macro 是什么`__float_as_int(a)`。我搜索了`__float_as_int()`但没有成功的实现。这似乎`__float_as_int()`是 NVIDIA NVCC 的内置宏或函数。查看 NVCC 从上述段落中产生的 PTX：

```
 .reg .u32 %r<4>;
    .reg .f32 %f<46>;
    .reg .pred %p<4>;
    // ...
    mov.b32         %r1, %f1;
    mov.s32         %r2, 0;
    setp.lt.s32     %p2, %r1, %r2;
    selp.f32        %f44, %f43, %f41, %p2; 
```

很明显，这不是`__float_as_int()`四舍五入。（这将产生一个。）相反，它将作为位副本（）分配给（注意：是类型（无符号整数）！！），然后将其作为（有符号整数，混淆！！）与（谁的价值是）。`float``int``cvt.s32.f32``float %f1``b32``%r1``%r1``u32``%r1``s32``%r2``0`

对我来说，这看起来有点奇怪。但显然它是正确的。

有人可以解释发生了什么，特别是解释`__float_as_int()`在 if 子句测试是否定的（`<0`）的上下文中正在做的事情吗？.. 并提供与 if 子句和/或`__float_as_int()`marco 等效的 C 语言？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T13:48:34.167

`__float_as_int`重新解释`float`为`int`. `int`是`<0`它具有最高有效位的时候。因为`float`它也意味着符号位打开，但并不完全意味着数字是负数（例如，它可以是“负零”）。`float`检查然后检查 if is会更快`< 0.0`。

C 函数可能如下所示：

```
int __float_as_int(float in) {
     union fi { int i; float f; } conv;
     conv.f = in;
     return conv.i;
} 
```

在其他版本中`__cuda___signbitf`使用此标头。

# salesforce - 如何访问返回的 SOQL 关系查询的列？

> ID：13801810
> 
> 赞同：0
> 
> 时间：2012-12-10T13:21:18.737
> 
> 标签：salesforce, soql

以下代码不起作用。错误消息是“编译错误：字段表达式的初始项必须是具体的 SObject：第 8 行第 16 列的 LIST”（返回行是第 8 行）

```
public String getX(){

    List<Oppoinvoice__c> o = [SELECT  Opportunity__r.Account.Name  FROM Oppoinvoice__c];

    return o.Opportunity__r.Account.Name;    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:41:35.073

您必须指定必须显示的列表条目编号。通过您的查询，您将获得一个列表。而且您的方法必须返回一个字符串。

```
public String getX(){

    List<Oppoinvoice__c> o = [SELECT  Opportunity__r.Account.Name  FROM Oppoinvoice__c];

    return o[0].Opportunity__r.Account.Name;    
} 
```

或者像这样：

```
public String getX(){

    String o = [SELECT Opportunity__r.Account.Name FROM Oppoinvoice__c Where Id = 'XXXXXXX'].Opportunity__r.Account.Name;

    return o;    
} 
```

# python - 边框 wxpython 颜色

> ID：13801811
> 
> 赞同：0
> 
> 时间：2012-12-10T13:21:24.777
> 
> 标签：python, wxpython

我从 Python 编程开始，我需要一些帮助！

实际上，我正在使用 wxpython 开发图形应用程序，我希望能够动态更改任何小部件（如“TextCtrl”、“Panel”和“ListBox”）边框的大小和颜色。

你对此有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:39:16.107

您应该查看小部件检查工具 ( [http://wiki.wxpython.org/Widget%20Inspection%20Tool](http://wiki.wxpython.org/Widget%20Inspection%20Tool) )。它有一个高亮功能，基本上可以满足您的需求。wxPython 演示在帮助菜单中有它，但您可以将它添加到您自己的代码中。只需查看上面链接中的说明即可。

# vba - 运行时错误类型“13”不匹配

> ID：13801813
> 
> 赞同：1
> 
> 时间：2012-12-10T13:21:44.320
> 
> 标签：vba, excel

我在工作中继承了旧的 Excel-VBA 模型。我正在运行这个程序来计算贷款组合的损失。该程序适用于多达 500 个贷款项目的贷款组合，但当我加载包含 500 多个项目的更大组合时，开始抛出“运行时错误类型 '13' 不匹配”。

```
Public Sub generateLossDistribution()

....

    Dim i As Long, j As Long
    Dim p As portfolio
    ' Creates a new portfolio object and reads it
    **Set p = New portfolio** 
```

错误消息出现在“**”代码行中。仅供参考，“组合”是用户定义的对象/类模块。由于代码适用于较少的贷款项目，此错误是否可能是由于数组大小增加（当加载更大的投资组合时）？该投资组合为每个贷款项目提供大约 30 个字段。数组大小是否有限制，我可以扩展吗？

由于我只是一个初学者并且模型代码太大而无法上传，因此非常模糊抱歉。

谢谢

# sql - SQL递归查询

> ID：13801817
> 
> 赞同：0
> 
> 时间：2012-12-10T13:21:57.310
> 
> 标签：sql, ms-access, recursion

我在这里遇到了一个问题。我有下表

```
ID     TX_NAME     DT_DATE        ID_SUCCESSOR    
1      Task 1      Jan/01/2012    2
2      Task 2      Jan/02/2012    3
3      Task 3      Jan/01/2012 
```

我的目标是创建一个 SQL 语句，它给我带来 TX_NAME，它的 DT_DATE 和它的 ID_SUCCESSOR。

例如，ID = 2 是我正在寻找的那个，因为它发生在它的继任者 (ID = 3) 之后

是否可以在单个查询中进行？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:30:04.477

```
select t.* from 
TestTable t 
inner join TestTable t2 on t2.id = t.ID_SUCCESSOR
where t.DT_DATE > t2.DT_DATE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:26:13.623

未经测试，但应该没问题:)

```
SELECT TX_NAME
from MyTable T1
where DT_DATE > (
    SELECT DT_DATE
    from MyTable T2
    where T1.ID_SUCCESSOR = T2.ID
    ) 
```

# android - 如何使用 WebView 启用 WebKit 的 Android 应用程序的远程调试/检查器？

> ID：13801819
> 
> 赞同：15
> 
> 时间：2012-12-10T13:22:04.893
> 
> 标签：android, webview, webkit, remote-debugging, web-inspector

我需要在调试时检查 android 应用程序中的 javascript 执行（webview 小部件）；通过 SDK 和 USB 电缆和/或 http/websockets；从桌面计算机（例如在桌面上运行的 chrome）。

Webkit 的源代码包括可在 cpp 级别访问的 DebuggerServer 实现（ platform_external_webkit\Source\WebKit\android\wds\DebugServer.cpp ），并且在启用标志 WDS 时绑定（在构建时？）

Source\WebKit\android\jni\WebCoreFrameBridge.cpp:#if ENABLE(WDS) Source\WebKit\android\jni\WebCoreFrameBridge.cpp: WDS::server()->addFrame(frame);

服务器的默认端口是 9999

消息来源显示所有都已实现（在 Cpp 级别）以启用该功能，但我没有找到任何参考在网络上搜索使用 javascript 级别的实时调试在 android 设备中自动化 webkit 的检查器界面的经验。

1.- 该功能是否以二进制形式在实际的 android 设备中执行？（是否在未启用 WDS 标志的情况下构建了 adroid 的 webkit 分发？:-()

2.- 可以在应用程序启动时从 javascript 或应用程序（在 java 级别）启用/使用远程调试功能吗？

3.- 如果可以启用 webkit 检查器/调试器功能，如何实现与远程应用程序的交互？（例如，来自另一个使用 websockets 的 javascript 应用程序，或台式计算机上的 chrome）。

一些解释机制的段落，如 [https://developers.google.com/chrome-developer-tools/docs/remote-debugging#remote](https://developers.google.com/chrome-developer-tools/docs/remote-debugging#remote) 会很好！

提前感谢您提供有关此主题的任何信息或参考。我认为在 javascript 级别启用远程调试（在设备中）非常重要，以使 HTML5 应用程序的现代开发和愉快的调试体验成为可能。

干杯，艾尔。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-04-17T10:41:14.137

> **对于 android >= 4.4 (kitkat)**

请参阅[使用 Chrome 在 Android 上进行远程调试](https://developer.chrome.com/devtools/docs/remote-debugging)

> **对于 android < 4.4（较低版本）**

使用非常好的开源工具：[weinre](http://people.apache.org/~pmuellr/weinre/docs/latest/Installing.html)。有关使用它的帮助，请参阅[此视频。](https://www.youtube.com/watch?v=HEqwnpLYnI0&feature=youtu.be)如果你熟悉 grunt，那么你可以使用[grunt-weinre](https://www.npmjs.com/package/grunt-weinre)

快速查看：

1.  使用 npm 安装 weinre
2.  在你的 gruntfile 中进行[配置。](https://github.com/ChrisWren/grunt-weinre#recommended-usage)
3.  运行 weinre grunt 任务。
4.  使用此脚本将 weinre 目标代码注入您的网页。

5.  在浏览器中打开[http://localhost:8082](http://localhost:8082)，您会发现运行上述脚本的设备。您可以调试所有这些设备。

**注意：**如果您想在您的移动设备中调试 webview/浏览器，那么您需要将 localhost 替换为您的机器运行 weinre 的 IP。是的，所有设备都应该在同一个网络上。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-28T10:26:49.240

现在使用 Android 4.4 很容易。请参阅[https://developers.google.com/chrome-developer-tools/docs/remote-debugging#debugging-webviews](https://developers.google.com/chrome-developer-tools/docs/remote-debugging#debugging-webviews)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-27T23:13:37.543

您可以使用[weinre](http://people.apache.org/~pmuellr/weinre/docs/latest/)项目针对 Android 浏览器进行远程调试。或者通过Chrome for Android 浏览器使用[Chrome 远程调试。](https://developers.google.com/chrome-developer-tools/docs/remote-debugging)据我所知，您不能直接定位 WebView，但定位 Android 浏览器应该会让您接近。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T10:34:28.543

无法完成，因为调试器后端代码不存在。您引用的源代码是 android 中 webkit 源代码的副本，但它没有编译成 android 发布位。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-17T19:19:03.987

Pre KitKat [jsHyBugger](https://www.jshybugger.com/#!/)运行良好（试用版和年度单用户许可证 29 欧元）

（我与开发人员没有联系/已购买许可证）

# c# - 安装程序无法安装以下组件：Microsoft 应用程序错误报告

> ID：13801826
> 
> 赞同：1
> 
> 时间：2012-12-10T13:22:19.393
> 
> 标签：c#, visual-studio-2010, visual-studio, c#-4.0, visual-studio-express

我`Microsoft Visual C# 2010 Express Setup`在我的`Windows 7`. 但是由于以下错误，我无法完成设置

![在此处输入图像描述](../Images/93e3bcdabb63570f5859220384715252.png)

> 我没有任何时候取消安装。我是`administrator`这台机器的。我还通过引用以下网站尝试了一些事情 - [http://social.msdn.microsoft.com/Forums/en-US/Vsexpressinstall/thread/a8da8e97-e4e2-416a-97f1-636c2dc1d4c1/](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressinstall/thread/a8da8e97-e4e2-416a-97f1-636c2dc1d4c1/)

任何想法，可能是什么问题？

我的安装日志报告以下错误：

> [12/10/12,19:14:39] Microsoft 应用程序错误报告：[2] CMsiComponent::Install() 需要 Microsoft 应用程序错误报告的安装文件，但文件验证失败。[12/10/12,19:14:39] setup.exe: [2] ISetupComponent::Pre/Post/Install() 在 ISetupManager::InternalInstallManager() 中失败，HRESULT -2147467259。[12/10/12,19:14:40] ExpressUI：[2] DepCheck 指示未安装 Microsoft 应用程序错误报告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T05:07:35.893

我检查了你的安装日志，发现下面的错误信息：

[04/25/11,10:00:53] InstallReturnValue：GFN_MID Microsoft 应用程序错误报告，0x641 [04/25/11,10:00:53] Microsoft 应用程序错误报告：***ERRORLOG EVENT***：错误：Microsoft 组件安装失败应用程序错误报告。MSI 返回错误代码 1601

对于十六进制 0x641 / 十进制 1601 的错误代码，它表示 ERROR_INSTALL_SERVICE_FAILURE，翻译为“无法访问 Windows Installer 服务。如果您在安全模式下运行 Windows，或者未正确安装 Windows Installer，则可能会发生这种情况”。

根据错误信息，此问题应该与您的 Windows Installer 服务有关。

请您通过以下步骤帮助检查 Windows Installer 服务是否设置为手动但未禁用：

单击开始菜单，单击运行，在打开文本框中键入 services.msc，然后单击确定。在服务（本地）列表中，右键单击 Windows Installer，然后单击属性。如果启动类型下拉列表设置为禁用值，请从启动类型下拉列表中选择手动选项，然后单击确定。单击文件菜单，然后单击退出。您可以尝试下载并安装最新的 Windows Installer 4.5 Redistributable

此外，请参阅 Windows 安装程序问题部分中的以下链接，以了解有关修复与服务相关的一些问题的更多信息。

[http://support.microsoft.com/kb/2438651](http://support.microsoft.com/kb/2438651) [http://support.microsoft.com/kb/315346](http://support.microsoft.com/kb/315346) 另外，我注意到您在安装时有一些可移动设备连接到您的计算机，请在安装过程中将它们删除安装。

如果有任何更新，请随时让我知道。

# java - 更改 drawstring() 中文本的颜色

> ID：13801827
> 
> 赞同：10
> 
> 时间：2012-12-10T13:22:23.307
> 
> 标签：java, swing, awt, java-2d, styledtext

我正在尝试在使用 swing 绘制的字符串中强调一项工作。

有人建议我使用带有以下代码的 HTML：

```
Graphics2D g2 = (Graphics2D) g;
g.drawString("this is something I want people to <p color="#00FF00">NOTICE</p>", x, y); 
```

我试过这个但没有运气......它只是输出HTML

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-10T13:31:44.630

*   这是如何编译的：`g.drawString("this is something I want people to <p color="#00FF00">NOTICE</p>", x, y);`因为 '" ' 是一个特殊字符，我们必须用*\对其进行转义*

*   您投射到 Graphics2D 但不使用它（与问题无关，但可能导致异常）。

它应该是：

```
Graphics2D g2 = (Graphics2D) g;
g2.drawString("this is something I want people to <p color=\"#00FF00\">NOTICE</p>", x, y); 
```

添加颜色只需调用[`setColor(Color c)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#setColor%28java.awt.Color%29)s`Graphic`对象：

```
g2.setColor(Color.GREEN); 
```

但是，这会将整个字符串设置为绿色，如果您只想将部分绘制为绿色以[`JLabel`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JLabel.html)用于 HTML 支持（直到 HTML3.2）：

```
JLabel label = new JLabel("<html>this is something I want people to <p color=\"#00FF00\">NOTICE</p></html>"); 
```

完整示例：

![在此处输入图像描述](../Images/a61bbc15b3ebb80cb5ea9c9fc51e634d.png)

**注意**正如你所看到的，通知在它自己的行上，这是因为*段落*标签而不是使用*字体*标签将它放在一行上，如下所示：

![在此处输入图像描述](../Images/3c47124fce1f19dd4098d91ea4df0c39.png)

```
import java.awt.EventQueue;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class Test {

    public Test() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JLabel label = new JLabel("<html>this is something I want people to <p color=\"#00FF00\">NOTICE</p></html>");

        // JLabel label = new JLabel("<html>this is something I want people to <font color=\"#00FF00\">NOTICE</font></html>");//will be shown on single line

        frame.add(label);

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T13:26:09.020

使用[Graphics.setColor()](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics.html#setColor%28java.awt.Color%29)更改您所做的任何事情的颜色。或使用 a`JLabel`设置颜色。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-10T13:26:14.723

使用 a`JLabel`作为样式文本。请参阅[LabelRenderTest](https://stackoverflow.com/a/5853992/418556)以了解如何将其绘制到图像并用于绘画。

![](../Images/b7c0f850e0b42d0b8cc83f84d5598571.png)

## 使用`Graphics`/AWT 方法

字符串暗示`NOTICE`应该是绿色，但其余默认（黑色）。我们需要`drawString(String)`使用字符串两部分的颜色调用两次，将后一个字符串偏移第一个字符串的宽度。要获得宽度，请查看类似`FontMetrics`或 a 的内容`GlyphVector`。 [这个答案](https://stackoverflow.com/questions/6295084/cut-out-image-in-shape-of-text/6296381#6296381)使用 a`GlyphVector`来获得字母的轮廓。

![](../Images/ece95cff85ba4d2b70119d5522f685a6.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-10T13:24:09.697

如果您只是创建一个强调单词的简单标签，您可以直接将 HTML 分配到`JLabel`这样的...

```
JLabel label = new JLabel("<html>this is something I want people to <p color='#00FF00'>NOTICE</p>"); 
```

只要您`<html>`在 a 的 String 开头有一块`JLabel`，它就会使用 HTML 渲染器来绘制它。

然而，正如@AndrewThompson 所指出的那样，这`<p>`将迫使彩色文本换行，所以也许`<span>`更合适......

```
JLabel label = new JLabel("<html>this is something I want people to <span style='color:#00FF00;'>NOTICE</span>"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-10T13:32:34.723

你可以在 g.drawString() 之前使用 g.setColor(Color.BLUE)。（例如 Color.BLUE）

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-02-03T23:47:29.847

您可以添加 g.setColor(Color.Chosen Color); 然后用 g.drawString() 写出字符串

# python - 如何使用 Pygame 创建“再次播放”选项

> ID：13801828
> 
> 赞同：1
> 
> 时间：2012-12-10T13:22:32.533
> 
> 标签：python, pygame, restart

我是使用 Python 编程的新手。我一直在研究我找到的一本教程书，并让游戏启动并运行，但后来决定我想要一个“再玩一次？” 最后的选项。我可以通过按“n”键退出游戏，但不知道如何让游戏重新开始。

这是我认为给麻烦的代码：

```
#player reaches treasure
if player_rectangle.colliderect(treasure_rectangle):

#display text
    screen.blit(text,(screen_width/2-195,screen_height/2-25))
    if event.type==pygame.KEYDOWN:
        if event.key==pygame.K_n:
            exit()

    elif event.key==pygame.K_y:

pygame.display.update() 
```

我知道在 elif 事件之后需要做一些事情，并且我已经尝试了所有我能想到的。我试图定义整个程序，并调用它，但这阻止了整个程序的运行。我浏览了互联网站点，但似乎无法找到答案。

有人可以简单地帮助您在按下 y 键时如何让游戏重新开始到起始位置？我知道它与循环有关，我只是无法将手指放在什么上面。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:50:46.680

您的代码是如何组织的并不完全清楚，所以我会非常笼统。通常游戏是通过处理所有动作的“主循环”来实现的。在“伪”-python 中：

```
def main_loop():
    while True:
        handle_next_action()
        draw_screen()

        if game_is_over():
            break 
```

在你开始循环之前，你通常会做一些设置来获得你想要的游戏状态：

```
def main():
    setup()

    main_loop()

    shut_down() 
```

鉴于这些部分，您可以通过再次调用主循环代码来重置游戏`setup`（它可能需要专门设计为可多次运行）：

```
def main_loop():
    while True:
        handle_events()
        draw_screen()

        if game_is_over():
            if play_again():   # new code here!
                setup()
            else:
                break 
```

您可能希望将`setup`代码分成两部分，一个只需要在程序开始时运行（读取配置文件并设置诸如窗口系统之类的东西），第二个为每个新游戏重复（设置游戏状态）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:50:25.633

要重新开始游戏，您通常需要将所有变量重置为其初始值（例如生命数、得分、初始位置……）。

最好的方法是将所有初始化放在一个过程中：

```
def init():
    global score,lives     # use these global variables
    score=0
    lives=3

init()    # call init() to define and reset all values

while 1: # main loop
       ...
       elif event.key==pygame.K_y:
            init()            # restart the game 
```

# c++ - c ++用迭代器引用连续值

> ID：13801829
> 
> 赞同：2
> 
> 时间：2012-12-10T13:22:37.117
> 
> 标签：c++, loops, iterator

我想迭代地计算 w 的值，即两点之间的距离。在我的**Aclass 中**，我有像**x、y**和这个**w**这样的成员。所以我使用了 Pitagoras Theorem，但是如何使用迭代器顺利完成呢？这是我的尝试，但我不知道如何使用迭代器引用来引用*“previous than pointed”*值。请帮忙 ：）

```
Aclass temp;
for (ars::cClassC::iterator it = New_Diff.begin(); it != New_Diff.end(); it++)
            {
            temp.w = sqrt(((it->getX()-(it->getX()-1))^2+((it->getY()-(it->getY()-1)));
            New_Diff.push_back(temp);
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T13:25:58.287

只需保存前一个元素：

```
ars::cClassC::iterator it_prev = New_Diff.end();
for (ars::cClassC::iterator it = New_Diff.begin(); it != New_Diff.end(); it++) {
  if (it_prev != New_Diff.end()) {
     //do the stuff here, now you have the two elements
  }
  it_prev = it;
} 
```

# algorithm - 查找之前是否出现过随机数

> ID：13801834
> 
> 赞同：1
> 
> 时间：2012-12-10T13:22:48.037
> 
> 标签：algorithm, random-sample

首先让我明确一点，这是一个人为的例子，而不是现实世界的问题。

如果我在创建 0 到 10 之间的随机数时遇到问题。我这样做 11 次以确保不会再次绘制先前出现的数字，如果我得到一个重复的数字，我会再次创建另一个随机数以确保它有不早见。所以基本上我得到一个从 0 到 10 以随机顺序排列的唯一数字序列，例如 3 1 2 0 5 9 4 8 10 6 7 等等

现在想出逻辑来确保随机数是唯一的，而不是我们之前绘制的，我们可以使用多种方法

使用 C++`std::bitset`并将索引对应的位设置为每个随机数的值。下次抽到新的随机数时再检查。

或者

使用 a`std::map<int,int>`来计算次数，甚至是简单的 C 数组，其中一些标记值存储在该数组中，以指示该数字是否发生。

如果我必须避免上述这些方法并使用一些数学/逻辑/按位运算来查找之前是否已绘制随机数，有没有办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T13:59:44.477

你不想按照你建议的方式去做。考虑一下当您已经选择了 11 个项目中的 10 个时会发生什么；您的随机数生成器将循环直到找到丢失的数字，这可能永远不会，这取决于您的随机数生成器。

更好的解决方案是按顺序创建一个 0 到 10 的数字列表，然后将列表随机排列。执行此操作的常规算法归功于 Knuth、Fisher 和 Yates：从第一个元素开始，将每个元素与一个位置比数组中当前元素大的元素交换。

```
function shuffle(a, n)
    for i from n-1 to 1 step -1
        j = randint(i)
        swap(a[i], a[j]) 
```

我们假设一个索引为 0 到 n-1 的数组，以及一个将 j 设置为 0 <= j <= i 的范围的 randint 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:26:16.283

使用一个数组并向其中添加所有可能的值。然后从阵列中挑选一个并将其移除。下一次，再次选择，直到数组为空。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T13:37:26.713

是的，有一种**数学**方法可以做到这一点，但它有点宽泛。

有一个数组：`primes[]`where `primes[i] = the i'th prime number`. 所以它的开始将是`[2,3,5,7,11,...]`。

还存储一个数字`mult`现在，一旦您绘制了一个数字（让它成为`i`），您检查是否`mult % primes[i] == 0`，如果是 - 之前绘制的数字，如果不是 - 那么数字不是。选择它并做`mult = mult * primes[i]`。

然而，它是可扩展的，因为它可能需要大量空间用于大范围（可能的值`mult`呈指数增长

（这是一个很好的数学方法，因为我们实际上看的是一组素数`p_i`，素数数组只是抽象素数集的实现）。

* * *

小值的**位操作**替代方法是使用`int`or`long`作为位集。

使用这种方法，要检查候选人`i`不在，`set`您只需要检查：

```
if (pow(2,i) & set == 0) // not in the set
else //already in the set 
```

向集合中输入一个元素`i`：

```
set = set | pow(2,i) 
```

* * *

更好的方法是`list`用所有数字填充 a，用[**Fisher-yates shuffle**](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)对其进行洗牌，然后对其进行迭代以生成新的随机数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T14:11:43.393

> 如果我必须避免上述这些方法并使用一些数学/逻辑/按位运算来查找之前是否已绘制随机数，有没有办法？

受制于您人为的约束，是的，您可以使用按位运算来模仿一个小的位集：

您可以根据需要的大小在右侧选择不同的整数类型。

```
bitset code                    bitwise code

std::bitset<32> x;             unsigned long x = 0;
if (x[i]) { ... }              if (x & (1UL << i)) { ... }
// assuming v is 0 or 1
x[i] = v;                      x = (x & ~(1UL << i)) | ((unsigned long)v << i);
x[i] = true;                   x |= (1UL << i);
x[i] = false;                  x &= ~(1UL << i); 
```

对于更大的集合（超出 的位大小`unsigned long long`），您将需要一个您选择的整数类型的数组。将索引除以每个值的宽度以了解要在数组中查找的索引，并使用模数进行位移。这基本上就是`bitset`这样做的。

我假设告诉你如何最好地洗牌 10 个数字的各种答案完全没有抓住重点：你人为的约束在那里是因为你实际上不想或不需要知道如何最好地洗牌 10 个数字:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T14:18:25.127

保留一个变量来映射绘制的数字。如果之前绘制了该数字，则该变量的第 i 位将为 1：

```
int mapNumbers = 0;

int generateRand() {        
    if (mapNumbers & ((1 << 11) - 1) == ((1 << 11) - 1)) return; // return if all numbers have been generated
    int x;  
    do {
        x = newVal();
    } while (!x & mapNumbers);
    mapNumbers |= (1 << x);
    return x;
} 
```

# java - Heroku for Java Web 应用程序上的持续部署/集成

> ID：13801836
> 
> 赞同：2
> 
> 时间：2012-12-10T13:22:58.690
> 
> 标签：java, heroku, continuous-integration, continuous-deployment

我有一个 Java Web 应用程序，我已经成功地使用“git push heroku master”方法成功部署并在 Heroku 上运行，但我想自动化部署并拥有完整的 CI 设置。我尝试过将 Atlassian Bamboo 与 Heroku 插件一起使用，但它实际上只适用于独立的 .war 文件——我需要能够通过项目中的 Procfile 定义来指定其他配置。

其他人为 Heroku 的 Java Web 应用程序的 CI/CD 使用了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T20:25:34.230

Jenkins 有一个很好的 Heroku 插件，它允许您部署 WAR 并以多种方式与 Heroku 交互，包括设置变量、扩展您的测功机和运行一次性流程：

[https://github.com/heroku/heroku-jenkins-plugin/blob/master/README.md](https://github.com/heroku/heroku-jenkins-plugin/blob/master/README.md)

要更改 Heroku 上的 Procfile，您需要提交并推送新文件。您可以将其作为 CI 构建的一个步骤。Jenkins 可以将脚本作为构建的一部分运行，如果需要，您可以在其中轻松推送新的 Procfile。

# python-2.7 - Django 中的 UTF-8，Umlauts 不能处理来自 SQL Server 的数据

> ID：13801837
> 
> 赞同：1
> 
> 时间：2012-12-10T13:23:02.220
> 
> 标签：python-2.7, django-views

我的问题是这样的：我从 SQL Server 数据库中创建了一个包含客户数据的页面。我的网页是 utf-8 ......我可以看到：

编辑：如果我是新用户，则无法显示图像... ^^

在第一个“{{ rows_1 }}”中，您可以看到 W\xe4denswil，但在表格中它不显示。但为什么？此外，它必须是 Wädenswil（带有德语变音符号）。我尝试了很多东西来使用 utf-8 制作我的原始文件。我最后一次尝试是这样的：

rows_1 = unicode(cursor.fetchall(), 'utf-8')

但这意味着“强制转换为 Unicode：需要字符串或缓冲区，找到列表”

这是我使用的代码（来自 django 的视图）：

```
 conn = pyodbc.connect('DRIVER={SQL Server};CHARSET=UTF8;SERVER=MAURITIUS;DATABASE=baan5c;UID=portal;PWD=P0rtalReader')
    cursor = conn.cursor()
    cursor.execute("SELECT d.t_bpid, d.t_nama, a.t_namc, a.t_hono, a.t_pstc, a.t_name FROM ttccom100070 d, ttccom130070 a WHERE d.t_cadr = a.t_cadr AND (d.t_bpid = '%s')"%form)
    rows_1 = unicode(cursor.fetchall(), 'utf-8')

  return render_to_response('kundendaten.html', { 'rows_1': rows_1, 'rows_2': rows_2, 'rows_3': rows_3, 'current_date': now, 'form':form}, context_instance=RequestContext(request)) 
```

在这里我的html ...：

```
<h2>Customer Data</h2>

{{ rows_1 }}
</fieldset>

<fieldset class= "field1">
<table border="1" class="name">
    <tr>
        <th colspan="6">Customer Overview</th>
    </tr>
    <tr>
        <th class="CUSCos">Customer Number</th>
        <th class="CUSNam">Name</th>
        <th class="CUSStr">Street</th>
        <th class="CUSNr">Number</th>
        <th class="CUSZip">Zip Code</th>
        <th class="CUSCit">City</th>
    </tr>
    {% for row in rows_1 %}
    <tr>
        <td>{{ row.0 }}</td>
        <td>{{ row.1 }}</td>
        <td>{{ row.2 }}</td>
        <td>{{ row.3 }}</td>
        <td>{{ row.4 }}</td>
        <td>{{ row.5 }}</td>
    </tr>
    {% endfor %}
</table> 
```

我使用 win7 32bit、python 2.7.3、django 1.4.1、html5 和 css3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T08:34:33.897

我找到了解决方案。这很容易，因为 pyodbc 有一个功能。现在正确的行是：

conn = pyodbc.connect('DRIVER={SQL Server};CHARSET=UTF8;SERVER=%s;DATABASE=%s;UID=%s;PWD=%s' % (x, y, w, p), unicode_results =真）

它只有这个：

, unicode_results=真

你必须添加...

# opengl - Opengl opencl 互操作错误

> ID：13801840
> 
> 赞同：3
> 
> 时间：2012-12-10T13:23:11.827
> 
> 标签：opengl, opencl

编译后出现以下 4 个错误。

```
error C2065: 'CL_GL_CONTEXT_KHR' : undeclared identifier    
error C2065: 'CL_WGL_HDC_KHR' : undeclared identifier   
IntelliSense: identifier "CL_GL_CONTEXT_KHR" is undefined   
IntelliSense: identifier "CL_WGL_HDC_KHR" is undefined 
```

我使用以下标题：

```
#include <stdio.h> 
//#include <iostream> 
#include <Windows.h> 
#include <GL/glew.h> 
#ifdef MAC 
    #include <OpenCL/cl_gl.h> 
    #include <OpenGL/OpenGL.h> 
    #include <GLUT/freeglut.h> 
    #define GL_SHARING_EXTENSION "cl_APPLE_gl_sharing" 
#else 
    #include <CL/cl.h> 
    #include <CL/cl_gl.h> 
    #include <GL/glut.h> 
```

# c# - 列表包含在列表检查中

> ID：13801841
> 
> 赞同：4
> 
> 时间：2012-12-10T13:23:20.373
> 
> 标签：c#, .net, linq

我有一个`IEnumerable<Object> a`按时间顺序排列的 6 个项目。我想测试是否`IEnumerable<Object> b`按时间顺序列出了 3 个项目。

`IEnumerable<Object> a`项目值：a、b、c、d、f、g

`IEnumerable<Object> b`项目值：b,d,f

可以用 LINQ 完成吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T13:30:25.947

您可以使用以下内容：

```
bool AContainsEverythingInBInTheSameOrder =
    a.Intersect(b).SequenceEquals(b); 
```

`a.Intersect(b)`返回 和 中的所有内容，`a`并*按照它出现在 中的相同顺序*`b`返回。*`a`*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-10T13:27:25.800

Rawling 和 Tim 的单线方法非常好，但它有一个小问题：`b`迭代两次。
如果这对您来说是个问题，您可以使用基于迭代器的方法。这可以创建为扩展方法：

```
public static bool IsContainedWithinInOrder<T>(this IEnumerable<T> values,
                                               IEnumerable<T> reference)
{
    using(var iterator = reference.GetEnumerator())
    {
        foreach(var item in values)
        {
            do
            {
                if(!iterator.MoveNext())
                    return false;
            } while(!Equals(iterator.Current, item));
        }

        return true;
    }
} 
```

这将只迭代两个序列一次，并且总体上更轻量级。你可以这样称呼它：

```
b.IsContainedWithinInOrder(a); 
```

请原谅方法的名称...

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-10T13:31:46.497

我假设您有两个列表，并且您想检查第二个列表项是否与第一个列表中的相同项具有相同的顺序。

也许：

```
var allSameOrder = list1.Intersect(list2).SequenceEqual(list2); 
```

[**演示**](http://ideone.com/5HT6SS)

# css - 使用类而不是 ID 的多个锚样式

> ID：13801843
> 
> 赞同：0
> 
> 时间：2012-12-10T13:23:27.707
> 
> 标签：css

我有一个使用两层导航菜单的网站。顶部导航转到物理页面，而过滤器导航将内容重新加载到当前页面的 div (#main) 中。这是使用 jquery 完成的，即使在第一次访问时，也会设置每个链接的“当前”类样式*（因此调用相应的数据） 。*换句话说，加载什么以及“当前”类样式设置在哪里，每次都由 javascript 和 php 管理。

[这在这里](http://gulfinsight.obmon.com)工作得很好

我的问题是客户现在希望顶部导航具有不同的悬停背景颜色和每个链接的“当前”颜色。

我知道我可以用 ID 来做到这一点。但我宁愿使用类来做到这一点。这可能吗？

**供参考：** *顶部导航列表的CSS：*

```
#nav_container {
    position: relative;
    float: left;
    width: 100%;
}

#top_nav {
    display: table;
    table-layout: fixed;
    list-style: none;
    margin: 0px;
    padding: 0px;
    width: 100%;
    font-family: mbaskerville-semibold;
    overflow: hidden;
    -webkit-box-shadow: 0 8px 6px -7px #666;
    -moz-box-shadow: 0 8px 6px -7px #666;
    box-shadow: 0 8px 6px -7px #666;
    border-top: 2px solid #CCC;
    border-bottom: 0.5px solid #CCC;
}

#top_nav li {
    display: table-cell;
    *float: left; /* improve IE7 */
    height: 25px;
    text-align: center;
    line-height: 25px;
    font-weight: bold;  
    border-right: 0.5px solid #CCC;
}

#top_nav li a {
    display: block;
    text-decoration: none;
    color: #021020;
    background-color: #FFFFFF;
}       

#top_nav li a.current {
    color: #FFFFFF;
    background-color: #766A5A;
}           

#top_nav li a:hover {
    color: #FFFFFF;
    background-color: #766A5A;
}

#top_nav li:first-child {
    padding-left: 0;
    border-left: 0.5px solid #CCC;
} 
```

*的JavaScript：*

```
$(document).ready(function(){

// current page
var $current_page = window.location.pathname;

// top navigation
$(function() {
    // set link to current page
    if ( $current_page ) {
        $('#top_nav a[href$="' + $current_page + '"]').attr('class', 'current');
    }
    // if link is root, set first child (home)
    if ( $current_page.length <= 1) {
        $('#top_nav a:first').addClass('current');
    }
    // if no filter set, set all as filter
    if ($('#filter_nav a').hasClass('current')) {
        // do nothing
    }
    else {
        $('#filter_nav a:first').addClass('current');
        // load new data when filter is changed
        $filter = "all";
        $(".page_header").load("test.php?", {page: $current_page, filter: $filter}, function(response, status, xhr) {
            if(status == 'success') {
                $('.page_header').html(response);
            }
            else if(status == 'error') {
                var emsg = '<i>There was an error: ' + xhr.status + ' ' + xhr.statusText + '</i>';
                $('.page_header').html(emsg);
            }
            else { alert(status); }
        });
        return false
    }
});

// filter navigation
var $filter;
$('#filter_nav li a').click(
function(e) {       
    // prevent the default action & bubbling
    e.preventDefault(); 
    e.stopPropagation();
    // handle filter change styles
    $(this).closest('ul').find('.current').removeClass('current');
    $(this).addClass('current');
    // load new data when filter is changed
    $filter = $(this).attr('href');
    $(".page_header").load("test.php?", {page: $current_page, filter: $filter}, function(response, status, xhr) {
        if(status == 'success') {
            $('.page_header').html(response);
        }
        else if(status == 'error') {
            var emsg = '<i>There was an error: ' + xhr.status + ' ' + xhr.statusText + '</i>';
            $('.page_header').html(emsg);
        }
        else { alert(status); }
    });
    return false
});
}); 
```

php类：

```
<?php

/**
 * _document: /lib/omc_frmwrk/present/NavMan.php
 * 
 * = Navigation Management class
 *   Management of standard navigational elements

 *
 * ** TO DO: 
 *  
 *
 */

// class definition
class NavMan {

/*
 * class parameters
 *
 */

private static $links;
private static $nav_style;

/**
 * Getters
 *
 */

/**
 * Setters
 *
 */

public static function setLinks($x) { self::$links = $x; }
public static function setNavStyle($x) { self::$nav_style = $x; }

/*
 * __construct()
 * PUBLIC method
 * = empty
 *
 */ 

public function __construct() {}

/*
 * Navigation Menu:
 * PUBLIC method
 * = unordered list, css styled, dop-down capable
 *
 */ 

public function setNav() {

    // open unordered list
    echo '<ul id="' . self::$nav_style . '">';

    // set layer
    $layer = 0;

    // place array content into variables
    for ($i = 0; $i < count(self::$links); $i++) {
        $this_layer = self::$links[$i][0];
        $class = self::$links[$i][1];
        $link = self::$links[$i][2];
        $page = self::$links[$i][3];

        // check if layer is current
        if ($layer < $this_layer) {
            // open sub list
            echo '<ul><li>';
            // increase variable
            $layer++;
        }
        else if ($layer == $this_layer) {
            // open sub-layer
            echo '</li><li>';
        }
        else if ($layer > $this_layer) {
            // open sub-layer
            echo '</li></ul><div class="clear"></li><li>';
            // decrease variable
            $layer--;
        }

        // place link
        echo '<a class="' . $class . '" href="' . $page . '">' . $link . '</a>';
    }

    // close unordered list
    echo '</li></ul><div class="clear"></div>';
}
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:29:01.457

使用 jQuery，您可以使用以下功能：

*   `hasClass`要检查元素具有哪个类，请在此处使用它而不是

    ```
    $('#top_nav a[href$="' + $current_page + '"]').attr('class', 'current');` 
    ```

*   `addClass`将类添加到 dom 元素

*   `removeClass`从元素中删除一个类。在添加类之前，您必须首先始终删除前一个类，例如，在添加新类之前，您没有先删除不需要的类。

    ```
    if ( $current_page.length <= 1) {
        $('#top_nav a:first').addClass('current');
    } 
    ```

*   `toggleClass`在两个班级之间交替。

样式可能会有所不同，具体取决于哪个类处于活动状态。

进一步阅读：

*   [http://jquerybyexample.blogspot.com/2011/08/addclass-removeclass-hasclass-and.html](http://jquerybyexample.blogspot.com/2011/08/addclass-removeclass-hasclass-and.html)
*   [http://api.jquery.com/](http://api.jquery.com/)

要引用 a:hover 类：

[jQuery 以 CSS a:hover 类为目标](https://stackoverflow.com/questions/4601114/jquery-to-target-css-ahover-class)

[http://api.jquery.com/hover/](http://api.jquery.com/hover/)

# php - 分页，从多维 PHP 数组排序？

> ID：13801845
> 
> 赞同：1
> 
> 时间：2012-12-10T13:23:29.597
> 
> 标签：php, arrays, multidimensional-array

分页，从多维 PHP 数组排序？

```
Array
(
    [0] => Array
        (
            'name' => 'A'
            'Date' => 12-10-1990
            'Grade' => '20D'
            'Level' => 'A10'
        )

    [1] => Array
        (
            'name' => 'C'
            'Date' => 10-10-1990
            'Grade' => '10C'
            'Level' => 'C10'    
        )

    [2] => Array
        (
            'name' => 'B'
            'Date' => 12-11-1995
            'Grade' => '13E'
            'Level' => 'A8'
        )
) 
```

任何人都可以知道如何做到这一点（分页，排序）？html表格中的示例显示：

```
Name (asc/desc) | Date (asc/desc)| Grade (asc/desc)| Level(asc/desc) 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T13:33:16.347

来自[http://php.net/manual/en/function.array-multisort.php](http://php.net/manual/en/function.array-multisort.php)

```
<?php
$data[] = array('volume' => 67, 'edition' => 2);
$data[] = array('volume' => 86, 'edition' => 1);
$data[] = array('volume' => 85, 'edition' => 6);
$data[] = array('volume' => 98, 'edition' => 2);
$data[] = array('volume' => 86, 'edition' => 6);
$data[] = array('volume' => 67, 'edition' => 7);
?> 
```

在此示例中，我们将按数量降序排列，版本升序排列。我们有一个行数组，但是 array_multisort() 需要一个列数组，所以我们使用下面的代码来获取列，然后执行排序。

```
<?php
// Obtain a list of columns
foreach ($data as $key => $row) {
    $volume[$key]  = $row['volume'];
    $edition[$key] = $row['edition'];
}

// Sort the data with volume descending, edition ascending
// Add $data as the last parameter, to sort by the common key
array_multisort($volume, SORT_DESC, $edition, SORT_ASC, $data);
?>

The dataset is now sorted, and will look like this:
volume | edition
-------+--------
    98 |       2
    86 |       1
    86 |       6
    85 |       6
    67 |       2
    67 |       7 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T13:33:07.700

您可以使用 usort 函数对数组进行排序。

假设您想按“名称”订购：

```
$sortedArray=usort($array,'cmpname');

function cmpname($arr1,$arr2){
    $nameA=$arr1['name'];
    $nameB=$arr2['name'];
    if ($nameA == $nameB) {
        return 0;
    }
    return ($nameA > $nameB) ? +1 : -1;
} 
```

然后您可以使用函数 array_slice 进行分页返回所需数量的项目。

# sql - 来自两个不同表的 SQL SUM

> ID：13801848
> 
> 赞同：0
> 
> 时间：2012-12-10T13:23:42.833
> 
> 标签：sql, sql-server-2008

我正在尝试构建一个 SQL Sum 语句来汇总来自不同表的数据。每个表都有一个共同的 SalesRep 字段。我在弄清楚如何正确构建 SQL 时遇到了一些麻烦。

我知道下面的语法是错误的并且不起作用，但我不是 SQL 专家。我确定这很简单。有人能帮助我吗？

```
SELECT SalesRepID, SUM(SELECT SalesRepID, Sum(tblClientAdditions.Amount) AS Subtotal
FROM tblClientAdditions GROUP BY SalesRepID + SELECT SalesRepID, 
Sum(tblAccounts.ReceivedAmount) AS Subtotal1
FROM tblAccounts GROUP BY SalesRepID) FROM tblSalesReps; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:31:23.703

表之间没有关系，对吧？

比可能是这样的吗？

```
SELECT (SELECT SUM(value) FROM table1) + (SELECT SUM(value) FROM table2) as result 
```

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:36:56.337

```
SELECT SalesRepID, 

(SELECT Sum(tblClientAdditions.Amount) FROM tblClientAdditions 
where tblClientAdditions.SalesRepID =tblSalesReps.SalesRepID)
+
(SELECT Sum(tblAccounts.ReceivedAmount) FROM tblAccounts
where tblAccounts.SalesRepID =tblSalesReps.SalesRepID)

FROM tblSalesReps; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-17T11:22:35.660

我添加了 IsNull ，因为如果其中一列为空，您将在答案中得到空值，而您不希望这样。

```
SELECT ISNull(SUM(Table1.column1),0)+ (SELECT ISNull(SUM(Table2.column1),0) FROM Table2) FROM Table1 
```

这对我有用。

# javascript - /^([a-zA-Z0-9]{1,})$/ 在 JavaScript 中

> ID：13801850
> 
> 赞同：-4
> 
> 时间：2012-12-10T13:23:54.557
> 
> 标签：javascript, regex

当我将使用以下系列时，谁能告诉我用户可能的输入是什么

`var Str=/^([a-zA-Z0-9]{1,})$/`jquery中的系列..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T13:25:35.633

该正则表达式匹配包含字母（AZ 或 az）或数字（0-9）且不包含其他字符的字符串。字符串必须至少包含一个字符，但字符数没有上限。

匹配字符串示例：

*   `x`
*   `foo`
*   `123`
*   `ABC00`

不匹配的字符串示例：

*   *空字符串*（至少需要一个字符）
*   `foo_bar`（因为下划线）
*   `abc 123`（因为空间）

顺便说一句，而不是写`{1,}`您通常应该使用`+`.

您可以在[rubular在线使用正则表达式](http://rubular.com/r/kAGc7FGlCt)在线使用正则表达式。

**相关信息**

*   [字符类](http://www.regular-expressions.info/charclass.html)
*   [锚点](http://www.regular-expressions.info/anchors.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T13:27:53.703

正则表达式与 jquery 无关，并且：

```
^ - start of string
[a-zA-Z0-9] - lowercase letter, uppercase letter, or digit
{1,} - 1 or more of the previous character class (better written as `+`)
$ - end of the string 
```

[在regexr](http://regexr.com?333co)自己测试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T13:25:51.057

我会说从字符串的开头到字符串的结尾任何字母数字字符，其中至少有 1 个出现。

# php - 使用 MySQL 和 Sessions 登录

> ID：13801851
> 
> 赞同：1
> 
> 时间：2012-12-10T13:23:54.523
> 
> 标签：php, mysql, session, login, navigation

我正在学习如何构建登录系统。它并不是最安全的，但它应该可以正常工作，而不会通过使用会话太容易被黑客入侵。

成功登录后，您应该被重定向到索引页面，并且导航中的一些条目应该更改（例如，登录应该是注销）。

我的导航：

```
<nav>
    <?php 
      if(!isset($_SESSION["username"])) {echo "<a class='left"; if($section == "login") {echo " active";} echo"' href='index.php?p=login'>Login</a>";}  
        else {echo "<a class='left"; if($section == "logout") {echo " active";} echo"' href='index.php?p=logout'>Logout</a>";}
    ?>
</nav> 
```

我的登录表格：

```
<form action="index.php?p=login_check" method="post">
  Username: <input type="text" size="24" maxlength="50" name="username"><br />   
  Passwort: <input type="password" size="24" maxlength="50" name="password"><br />
  <input type="submit" value="Abschicken">
</form> 
```

我的登录验证：

```
<?php   
    $verbindung = mysql_connect("localhost", "root" , "")
    or die("Verbindung zur Datenbank konnte nicht hergestellt werden"); 
    mysql_select_db("website") or die ("Datenbank konnte nicht ausgewählt werden"); 

    $username = $_POST["username"]; 
    $password = $_POST["password"]; 

    $abfrage = "SELECT username, password FROM logins WHERE username LIKE '$username' LIMIT 1"; 
    $ergebnis = mysql_query($abfrage); 
    $row = mysql_fetch_object($ergebnis); 

    if(@$row->password == $password) 
        {
        session_start(); 
        $_SESSION["username"] = $username; 
        echo "<p>Login erfolgreich.</p>"; 
        } 
    else 
        { 
        echo "<p>Benutzername oder Passwort waren falsch. <a href=\"index.php?p=login\">Login</a></p>"; 
        } 
?> 
```

我的注销：

```
<?php
    session_destroy();

    $hostname = $_SERVER['HTTP_HOST'];
    $path = dirname($_SERVER['PHP_SELF']);
?> 
```

现在，当我回到起始页面时，我仍然看到“登录”而不是“注销”。我是否必须在我的索引页面上包含 session_start() 或者是否有其他方法可以检查我是否已登录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T13:32:28.437

如果你没有包括`session_start()`在开头那么，我的回答是肯定的。您应该`session_start()`在访问`$_SESSION`全局变量的每个页面的开头使用。

**更好的选择是，创建一个其他文件并放入`session_start`其中，并将此文件包含在您希望会话工作的任何位置。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:33:57.523

`session_start()`应该在`$_SESSION`使用变量的每一页的顶部。此外，`mysql`不建议使用扩展名。它很快就会被弃用。我会考虑使用[PDO](http://php.net/manual/en/ref.pdo-mysql.php)。

# joomla - 单击删除（垃圾）时的Joomla触发功能

> ID：13801853
> 
> 赞同：0
> 
> 时间：2012-12-10T13:24:01.013
> 
> 标签：joomla, joomla3.0

我正在为 Joomla 3.0 创建一个自定义组件，但需要知道当用户在管理员端单击“清空垃圾箱”时如何运行功能。

我尝试运行的功能会从文件系统中删除图像。JToolBarHelper::deleteList 似乎只需要一个javascript函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:51:43.323

是的，它带你到 JS 函数，比如

```
Joomla.submitbutton('banners.trash'); 
```

但是这种情况下它会调用 joomla 中的垃圾函数

```
libraries\joomla\application\component\controlleradmin.php 
```

在这里您可以注册新任务。如果您需要，但我不建议添加/编辑核心 joomla 文件。

您可以通过另一种方式实现这一目标。

喜欢

```
Joomla.submitbutton('banners.Custom_trash'); 
```

或任何其他名称或（相同）。在您的 components/controller.php （特定提交相关的控制器）中编写函数。然后您将在控制器内部获得控制权。通过这种方式，您可以覆盖组件中 joomla 的默认功能。

希望对你有帮助 ...

# javascript - 如何从网页打印而不显示打印对话框

> ID：13801855
> 
> 赞同：0
> 
> 时间：2012-12-10T13:24:04.480
> 
> 标签：javascript, html

我需要实施基于 Web 的销售点软件，在该软件中，收据打印会经常进行，并且每次都显示打印对话会很烦人。所以我想摆脱打印对话。如何使用 JavaScript 来实现？

我在互联网上搜索了很多，但找不到合适的解决方案。所有浏览器（IE、FireFox、Chrome）都必须支持它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:26:37.657

简短的回答......你不能......

稍长一点的答案......你不能而且可能永远也不能 - 只是为了限制*用户*使用特定设置打印到特定打印机

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-10T13:37:46.867

您可以使用一种解决方法 - 这不是很好。

如果你能控制端电脑，你可以在上面放一个简单的 AutoIt 或 Autohotkey 脚本。该脚本可以 1\. 检查您的页面是否正在运行 2\. 如果是，请始终应用标准打印机。

我们已经为不应包含我们的其他软件的终端执行此操作。这样的事情并不好，但是如果它是一台不受管理的电脑，迟早在这样的设备上你会遇到有人想在另一台打印机上打印东西的问题。

# php - Heroku - cURL 超时 (PHP)

> ID：13801856
> 
> 赞同：8
> 
> 时间：2012-12-10T13:24:07.880
> 
> 标签：php, curl, heroku, timeout

我正在尝试为我的应用程序创建一个 API 代理，但我在 Heroku 上遇到了一些奇怪的超时错误。

说如下：

```
2012-12-10T12:49:24+00:00 heroku[router]: at=error code=H12 desc="Request timeout" method=GET path=/api/v1/users/me host=host.herokuapp.com fwd=174.129.79.221 dyno=web.1 queue= wait= connect= service=30000ms status=503 bytes=0 
```

代码如下所示：

```
$request = curl_init();
curl_setopt($request, CURLOPT_URL, $url);
curl_setopt($request, CURLOPT_USERAGENT, 'AppProxy/1.0');
curl_setopt($request, CURLOPT_HTTPHEADER, array(
    'Accept: application/json',
    'Authorization: Basic ' . $authorization,
    'X-Requested-With: XMLHttpRequest'
));
curl_setopt($request, CURLOPT_VERBOSE, 1);
curl_setopt($request, CURLOPT_RETURNTRANSFER, true);
curl_setopt($request, CURLOPT_SSL_VERIFYPEER, 0);
$response = curl_exec($request);
echo curl_errno($request) . "<br />";
echo curl_error($request) . "<br />";
echo $httpStatus = curl_getinfo($request, CURLINFO_HTTP_CODE) . "<br />";
curl_close($request);
echo $response . "<br />"; 
```

有什么问题或者我在代码上遗漏了一些东西来让它工作？有人在 Heroku 上遇到过同样的问题吗？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:30:51.620

尝试像这样在您的 cUrl 请求上设置超时

```
curl_setopt($request, CURLOPT_CONNECTTIMEOUT, 15); 
```

从运行它的盒子中获取相同的资源需要多长时间？

代码 503 也是服务不可用错误。你能在浏览器中打开资源吗？

# c++ - 将派生类型传递给基本成员模板函数的优雅方法？

> ID：13801859
> 
> 赞同：0
> 
> 时间：2012-12-10T13:24:12.717
> 
> 标签：c++, templates, derived-class, base-class

我有一个名为“ValueChecker”的课程

它具有以下成员函数：

```
template<typename T>
bool ValueChecker::checkMe( std::ostringstream &oss, T &me) { 
   std::cout << "Default checkMe() for " << typeid(me).name() << std::endl; 
   return true;
} 
```

ValueChecker 类旨在对派生类的值进行一些简单的检查。checkMe() 最终将专门用于不同的派生类：

```
class Airplane : public ValueChecker {
   friend class ValueChecker;
   [...]
}

template<>
bool ValueChecker::checkMe<Airplane>( std::ostringstream &oss, Airplane &me) { 
   ...    
   /* Actually, this code is generated from a simple file which translates
    * a simple language into C++ code.  So that a non-developer can write
    * the simple checks.
    *
    * ValueChecker itself has utility functions that may be called in the
    * template specialization which are shared across all types.
    */

} 
```

这可行，但是当您查看调用时，checkMe 的声明存在一个小问题：

```
int main() {
  Airplane plane;
  std::ostringstream oss;

  if( plane.checkMe( oss, plane)) {
    cout << "Values are bogus!  " << oss.str() << endl;

  return 0;
} 
```

我打电话给 plane.checkMe(oss,plane)。但是，我也可以通过另一架飞机而不检查飞机。此外，调用是多余的？这意味着，理论上，编译器应该知道根据平面的类型调用哪个模板函数。也不需要将其作为参数传递吗？无论如何，最好不要消除最后一个论点。所以像这样的电话会很好：

```
if( plane.checkMe(oss)) { ... }  // Calls the right template specialization. 
```

我只是无法让它工作。C++ 大师能帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T13:41:46.160

对于您给定的代码，您实际上并不需要使用`template`or `friend`。而是使用继承，并将`checkMe()`方法作为`protected`和 `virtual`方法。然后重写`checkMe()`派生类中的方法。如果您不需要默认实现，也可以将其设为纯虚拟。这是基于您的示例的快速代码片段。（注意`this`指针的使用。）

```
class ValueChecker {
protected:
    virtual bool checkMe() { 
        std::cout << "Default checkMe() for " << typeid(this).name() << std::endl; 
        return true;
    }
};

class Airplane : public ValueChecker {
public:    
    virtual bool checkMe() {
        std::cout << "Airplane checkMe() for " << typeid(this).name() << std::endl;
        return true;
    }
};

int main() {
  Airplane plane;
  plane.checkMe();
} 
```

当您想要在一个或多个派生类中使用一些“通用”逻辑时，除了派生类本身特定的逻辑之外，您还需要一个默认实现。在这种情况下，使用范围解析运算符来访问基类的逻辑。

```
 bool Airplane::checkMe() {
        std::cout << "Airplane checkMe() for " << typeid(this).name() << std::endl;

        // use the "common" logic from the base class (if required)
        ValueChecker::checkMe();

        return true;
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T13:32:57.110

您可能希望将其实现为纯虚拟方法。

```
class ValueChecker
{
public:
    virtual bool checkMe(std::ostringstream& oss) = 0;
};

class Airplane : public ValueChecker
{
public:
    virtual bool checkMe(std::ostringstream& oss);
}; 
```

这样你就可以打电话`plane.checkMe(oss)`了，飞机的 checkMe-Method 就会被调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T13:48:14.910

有一个经常使用的常见技巧：[http](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern) ://en.wikipedia.org/wiki/Curiously_recurring_template_pattern 可以为您解决问题。

# c# - MonoMac - 链接器中断应用程序

> ID：13801861
> 
> 赞同：2
> 
> 时间：2012-12-10T13:24:32.390
> 
> 标签：c#, .net, macos, mono, monomac

如果我使用“仅链接 SDK”构建我的应用程序以进行发布构建（用于在没有 Mono 的机器上进行 beta 测试），它不再启动 - 它似乎立即崩溃。

如果我运行我的应用程序命令行，这是崩溃：

```
[ERROR] FATAL UNHANDLED EXCEPTION: System.TypeInitializationException: An exception was thrown by the type initializer for System.Xml.Serialization.XmlSerializer ---> System.Configuration.ConfigurationErrorsException: Error Initializing the configuration system. ---> System.MissingMethodException: Default constructor not found for type System.Configuration.ExeConfigurationHost.
  at System.Activator.CreateInstance (System.Type type, Boolean nonPublic) [0x00000] in <filename unknown>:0 
  at System.Activator.CreateInstance (System.Type type) [0x00000] in <filename unknown>:0 
  at System.Configuration.InternalConfigurationSystem.Init (System.Type typeConfigHost, System.Object[] hostInitParams) [0x00000] in <filename unknown>:0 
  at System.Configuration.InternalConfigurationFactory.Create (System.Type typeConfigHost, System.Object[] hostInitConfigurationParams) [0x00000] in <filename unknown>:0 
  at System.Configuration.ConfigurationManager.OpenExeConfigurationInternal (ConfigurationUserLevel userLevel, System.Reflection.Assembly calling_assembly, System.String exePath) [0x00000] in <filename unknown>:0 
  at System.Configuration.ClientConfigurationSystem.get_Configuration () [0x00000] in <filename unknown>:0 
  --- End of inner exception stack trace ---
  at System.Configuration.ClientConfigurationSystem.get_Configuration () [0x00000] in <filename unknown>:0 
  at System.Configuration.ClientConfigurationSystem.System.Configuration.Internal.IInternalConfigSystem.GetSection (System.String configKey) [0x00000] in <filename unknown>:0 
  at System.Configuration.ConfigurationManager.GetSection (System.String sectionName) [0x00000] in <filename unknown>:0 
  at System.Configuration.ConfigurationSettings.GetConfig (System.String sectionName) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializer..cctor () [0x00000] in <filename unknown>:0 
  --- End of inner exception stack trace --- 
```

有什么方法可以在这里添加适当的`[Preserve]`属性吗？或者也许强制链接器保留这个类？

更多信息：

*   我的应用是一个[MonoGame](http://monogame.net)游戏，名为[Draw a Stickman: EPIC](http://epic.drawastickman.com)
*   如果我不链接任何程序集，它运行得很好，但我的应用程序要大 10MB
*   最初我从带有 Tao.Sdl.dll 的链接器中得到了一些错误，但我在我的主项目中引用了它，并修复了它。
*   我的目标是 10.6 及更高版本

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T16:45:50.900

与 MonoTouch 相比，**MMP** (MonoMac Packer)的一个主要区别`mtouch`是 MonoMac 使用完整的 .NET 框架。这使得链接应用程序变得更加复杂。

为什么 ？主要是因为`System.Configuration`（它是一个程序集，但它也是其他几个程序集中的命名空间）。它使用反射和`.config`文件来设置自己 - 链接器无法确切知道（因为它可以在执行之间更改）您的应用程序需要什么。

MMP*试图*涵盖最常见的情况（例如 System.Net），但目前它不能处理在 BCL 中使用 System.Configuration 的所有情况。

现在要解决这个问题......**您**需要告诉链接器包含您的应用程序在运行时需要的所有内容。例如

```
[ERROR] FATAL UNHANDLED EXCEPTION: System.TypeInitializationException: 
An exception was thrown by the type initializer for System.Xml.Serialization.XmlSerializer 
---> System.Configuration.ConfigurationErrorsException: Error Initializing the configuration system. 
---> System.MissingMethodException: Default constructor not found for type System.Configuration.ExeConfigurationHost. 
```

这意味着您的应用程序正在使用（即使是间接使用）`System.Configuration.ExeConfigurationHost`并且链接器无法检测到它（它通过反射使用）。

从那里，您需要[构建一个 XML 文件](http://spouliot.wordpress.com/2012/04/27/linker-versus-customization/)来*向*链接器介绍这些所需的类型（可能会有其他类型，可能还有很多其他类型）。然后将该 XML 文件反馈给 MMP (--xml=FILE)，因此链接器不会尝试从链接的应用程序中删除这些类型/方法。

替代方案是**不链接**或不链接某些程序集（例如`--linkskip=System`）。YMMV。

**更新：**新的[Xamarin.Mac](http://xamarin.com/mac)是 MonoMac 的超集，包含将解决此异常的链接器的增强版本（但可能不是所有其他异常，请为它们填写错误报告）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:10:14.013

几个想法：

*   控制台应用程序中是否打印了任何内容？
*   尝试从终端执行 MyApp.app/Contents/MacOS/(binary) ，这至少应该在终端上打印一些东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T16:49:44.587

发生这种情况是因为 mmp（MonoDevelop 中内置的 MonoMac 打包程序）从框架中剥离了太多内容。尤其是在使用 XML 时。

我发现您必须将这些附加参数传递给 mmp 才能使 XML 工作：

```
--linkskip=System.Net --linkskip=System --linkskip=System.Configuration --linkskip=mscorlib 
```

不幸的是，monodevelop 项目配置中的 mmp 参数不起作用（不保存）。我已经报告了这些错误并已修复，但由于某种原因，它们似乎直到更高版本才可用。

现在，您可以从命令行运行 mmp。构建输出显示当前命令，因此您可以使用该命令，但添加上面的参数。

这样做仍然很值得，即使没有链接这些库，我的应用程序也从 20mb 降到了 10mb。

# awk - AWK - 如何改进这个例子

> ID：13801870
> 
> 赞同：1
> 
> 时间：2012-12-10T13:24:54.993
> 
> 标签：awk

目录内容：

```
$ ls | awk '1'
ala
cztery.AVI
dwa.AvI
Jeden.aVI
lupa.com
PIĘĆ.AVI
trzy.Avi
zero.avi 
```

此命令打印：

```
$ ls | awk '$0=tolower($0){a=substr($0,1,length($0)-4)}{if(/avi$/){system("echo "$0" "a"\".mpg\"")}}'
cztery.avi cztery.mpg
dwa.avi dwa.mpg
jeden.avi jeden.mpg
pięć.avi pięć.mpg
trzy.avi trzy.mpg
zero.avi zero.mpg 
```

如何改进上述命令？我想打印：

```
cztery.avi cztery.mpg
dwa.avi dwa.mpg
jeden.avi Jeden.mpg
pięć.avi PIĘĆ.mpg
trzy.avi trzy.mpg
zero.avi zero.mpg 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T13:40:43.567

如何使用 find first 来匹配所有`avi`文件：

```
$ find -iname "*.avi" -exec basename {} \; | awk -F. '{print tolower($1) ".avi", $1 ".mpg"}'
cztery.avi cztery.mpg
dwa.avi dwa.mpg
jeden.avi Jeden.mpg
pięć.avi PIĘĆ.mpg
trzy.avi trzy.mpg
zero.avi zero.mpg

$ ls -1 # Use the -1 option of ls instead of ls | awk '1'
ala
cztery.AVI
dwa.AvI
Jeden.aVI
lupa.com
PIĘĆ.AVI
trzy.Avi
zero.avi 
```

如果您正在寻找最短的解决方案，请使用[Guru](https://stackoverflow.com/questions/13801870/awk-how-to-improve-this-example/13802783#13802783)和`ls`my `awk`：

```
ls *.[aA][vV][iI] | awk -F. '{print tolower($1)".avi",$1".mpg"}'
cztery.avi cztery.mpg
dwa.avi dwa.mpg
jeden.avi Jeden.mpg
pięć.avi PIĘĆ.mpg
trzy.avi trzy.mpg
zero.avi zero.mpg 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T14:21:21.247

单程：

```
ls  *[aA][vV][iI] | awk '{print tolower($0) " " substr($0,0,length($0)-3)"mpg";}' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T14:43:12.740

这是我使用的方法`GNU awk`：

```
for i in *.[Aa][Vv][Ii]; do echo "$(echo $i | awk '{ print tolower($0), gensub(/...$/,"mpg","") }')"; done 
```

结果：

```
cztery.avi cztery.mpg
dwa.avi dwa.mpg
jeden.avi Jeden.mpg
pięć.avi PIĘĆ.mpg
trzy.avi trzy.mpg
zero.avi zero.mpg 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T15:13:02.813

```
ls | awk '{lc=tolower($0)} lc~/\.avi$/{sub(/...$/,"mpg"); print lc,$0}' 
```

请注意，这不适用于包含换行符的文件名。如果您有这种情况，请告诉我们。

你在下面的评论中说：

> 我希望系统运行这个命令 ->
> 
> ```
> ls | awk '{a=substr($0,1,length($0)-4)}/avi$|AVI$/{system("ffmpeg -i "$0" -f avi -vcodec libxvid "a"\".mpg\"")}' 
> ```

正如我所提到的，这只是没有以正确的方式思考它。为了明确起见，您正在这样做：

```
shell ( ls | awk ( system( shell ( ffmpeg ) ) ) ) 
```

这不是更有意义吗：

```
shell ( ls | awk; ffmpeg ) 
```

我实际上不明白你为什么要为此使用 awk ，因为它在 shell 中很容易完成，但假设你有你的理由，这里是实现你发布的内容的正确方法：

```
ls *.avi *.AVI |
awk '{print $0, substr($0,1,length($0)-3) "\"mpg\""}' |
while read -r orig mpeg
do
    ffmpeg -i "$orig" -f avi -vcodec libxvid "$mpeg"
done 
```

请注意，如果您的文件名中有空格，那将失败，但是当这是更好的解决方案时，修复它是没有意义的：

```
ls *.avi *.AVI |
while IFS= read -r orig
do
    ffmpeg -i "$orig" -f avi -vcodec libxvid "${orig%avi}mpeg"
done 
```

请注意，您最初将文件名转换为小写的要求在您说要实施的解决方案中消失了。

另外，请注意，此解决方案基于您所说的要实施的内容，因此不适用于您最初发布的文件列表，因为它仅适用于以 .avi 或 .AVI 结尾的文件，而不适用于 .Avi。`ls *.[Aa][Vv][Ii]`如有必要，将解决此问题。

# matlab - 获取绘图的只读属性名称列表

> ID：13801873
> 
> 赞同：6
> 
> 时间：2012-12-10T13:25:07.513
> 
> 标签：matlab

如果要通过属性结构复制绘图，则需要过滤掉只读属性（例如 Annotation、BeingDeleted、Parent、Type）。有没有办法获取对象的只读属性列表？

这个问题来自一个相关的问题

[如何从绘图处理程序中绘图？](https://stackoverflow.com/questions/13800043/how-can-i-plot-from-a-plot-handler/13801566)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T15:24:51.377

我开始琢磨上一个问题，试图动态找出哪些字段是可设置的。

我并没有完全让它工作，但我可以通过使用 和 的返回值之间的差异来掌握（大部分）只读`set(h)`属性`get(h)`。

唯一没有出现在这里的属性是`Parent`-property，它是可设置的，但不应该在上一个问题中更改。

这是我获得不可设置属性的方式：

```
h = plot(1:0.2:10);
xx=get(h)

close all
h2 = plot(0);
settableHandles = set(h2);
settableNames = fieldnames(settableHandles);
allHandles = get(h2);
allNames = fieldnames(allHandles);

nonSettableHandles = rmfield(allHandles,settableNames);
nonSettableNames = fieldnames(nonSettableHandles) 
```

这会产生一个单元格`nonSettableNames`：

```
nonSettableNames = 

    'Annotation'
    'BeingDeleted'
    'Type' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T13:37:48.677

为什么不使用类似的东西

```
try
    %// [set property]

catch ME
    if ~isempty( regexp(ME.error, 'read only') )
        continue;

    else
        %// [handle other error]

    end

end 
```

# css - 用于显示后代的 CSS 选择器无法正常工作

> ID：13801875
> 
> 赞同：2
> 
> 时间：2012-12-10T13:25:26.087
> 
> 标签：css, hover, css-selectors

我的 html 是（只有标题）

```
<div id="msg_wrapper">
    <div class="msg_header media unread>
      <a class="pull-left"></a>
      <div class="media-body">
        <h4 class="media-heading">
        </h4>
      </div>
    </div>
    <div id="side" class="pull-right">
      <div id="sent_at">
        <div class="timeago" >
        </div>
      </div>
      <div id="msg_header_side">
        <div id="msg_header_icons">
        </div>
          </div>
        </div>
      </div> 
```

CSS是

```
 .media.unread:hover + #side  #msg_header_side{
    visibility: visible;
    }

    #sent_at {
        float:right;
    }
    .msg_header{
        position: relative;
        margin-bottom: 10px;
    }

    #msg_header_side{
        visibility: hidden;
    }
    #msg_header_icons{

        background-color: transparent;
        float: right;
    }

    #side{
        position: absolute;
        top: 0;
        right: 0;
    }

    #msg_wrapper{
        position: relative;
    } 
```

我创建了一个带有类似标签的[jsfiddle](http://jsfiddle.net/wp93q/2/)，并添加了颜色来解释情况

蓝色 ( `#msg_header_side`) 是一个带有选项的部分，当鼠标悬停在黄色 ( ) 的任何部分时应该出现的选项`.msg_header`问题是当前选择器（我能做的最好的）只有当鼠标光标位于黄色时才会显示蓝色。

像这样（屏幕截图没有捕获鼠标光标 - 它是黄色的）：

![在此处输入图像描述](../Images/f848ff906c01e9ef4376383b8784158c.png)

当光标位于红色 ( `#side`) - 蓝色消失

像这样（屏幕截图没有捕获鼠标光标 - 它是红色的）： ![在此处输入图像描述](../Images/87ad8f21dfd6845cdba7f7f35ecd55d0.png)

我的选择器是 `.media.unread:hover + #side #msg_header_side` 我理解的“媒体类别，当悬停时未读并与 msg_header_side 作为孩子将具有可见性：可见性。效果不太好..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:53:01.047

我不确定“+”号，但这应该是一些问题：

```
.media.unread:hover,
#side  #msg_header_side{
visibility: visible;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:59:53.633

您需要添加一个额外的选择器来匹配`#msg_header_side`作为 descandant of`#side:hover`

```
.media.unread:hover + #side #msg_header_side, #side:hover #msg_header_side 
```

希望那是你想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T16:04:40.553

我不太确定你想要达到什么目的，但我认为你想要使用黄色背景的 element1 和红色背景的 element2，如果你将它们都悬停，那么应该出现蓝色的 element3。首先你应该意识到你的黄色元素没有包围红色元素，因为它们是兄弟元素，堆叠顺序告诉我们红色元素通常在它的前一个兄弟元素的顶部，这个兄弟元素必须是黄色的。通过输入红色元素，您将留下黄色元素和您的选择器：

***原来的：***

```
.media.unread:hover + #side  #msg_header_side {
    visibility: visible;
} 
```

告诉浏览器向我们显示带有#msg_header_side(blue) id 的元素，如果悬停带有类.media.unread(yellow) 的#side's(red) 同级元素，它必须是#side(red) 元素的子元素。

要告诉浏览器在红色元素也悬停时显示该元素，您必须将代码附加到第一行并按如下方式更改：

***改变：***

```
.media.unread:hover + #side  #msg_header_side, #side:hover  #msg_header_side {
    visibility: visible;
} 
```

如您所见，仅更改了第一行。

PS我很抱歉我写的一团糟:)你也可以重新考虑你的选择器命名有这么多的类和ID它肯定会更好。

# html - 在 Opera 浏览器中优化 Canvas 动画

> ID：13801887
> 
> 赞同：1
> 
> 时间：2012-12-10T13:26:01.453
> 
> 标签：html, canvas

我曾尝试使用： http: [//www.codediesel.com/javascript/drawing-trees-in-canvas/](http://www.codediesel.com/javascript/drawing-trees-in-canvas/)

进行了一些测试，发现在Opera12浏览器上，消耗了大量的CPU。请让我知道是否有任何方法可以降低和优化 CPU 利用率？

谢谢斯内哈
_

# java - Ireport 4.8.0 中的“Java 堆空间”错误

> ID：13801889
> 
> 赞同：1
> 
> 时间：2012-12-10T13:26:07.290
> 
> 标签：java, ireport

![在此处输入图像描述](../Images/979ba7b76d72b08b322d95bb314f09e8.png)在 iReport 4.8.0 上，

我创建了一个新数据集并为要包含的数据集选择 3 个表，

当我按下“下一步”时，我收到错误：“Java 堆空间”

搜索了这个论坛并尝试了建议的解决方案，但没有任何帮助。

我尝试将 ireport.conf 文件值从 -J-Xmx512m 更改为 -J-Xmx1024m 甚至 -J-Xmx2048m。它不会改变任何东西。

还检查了“使用可视化器”，但我不知道它是什么以及如何使用它。无论如何，检查“使用可视化器”并没有解决问题。

还有什么想法吗？

# php - 用于解析雅虎天气信息的 PHP 代码因负度数而失败

> ID：13801898
> 
> 赞同：4
> 
> 时间：2012-12-10T13:26:21.730
> 
> 标签：php, parsing, yahoo

我有以下代码来解析雅虎天气信息：

```
$xml = simplexml_load_file('http://weather.yahooapis.com/forecastrss?w=868274&u=c');
    $weatherInfo = $xml->channel->item->description;
    $imagePattern = '/src="(.*?)"/i';
    preg_match($imagePattern, $weatherInfo, $matches);
    $imageSrc = $matches[1];
    $degreesPattern = '/.*?, (\d+) C/i';
    preg_match($degreesPattern, $weatherInfo, $matches);
    $degrees = $matches[1];
echo $degrees; 
```

如何修改解析器以适用于负度数？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T13:28:14.543

使破折号可选：

```
$degreesPattern = '/.*?, (-?\d+) C/i';
                          ^^ 
```

您可以从[这个演示](http://viper-7.com/2E5IB4)中看到它打印：

```
-1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-26T11:42:09.710

这与将 codeigniter2.1.4 粘贴到视图文件 .direct 时效果很好

```
<?php
// weather City qalat-dizah
$xml = simplexml_load_file('http://weather.yahooapis.com/forecastrss?w=1977965&u=c');
    $weatherInfo = $xml->channel->item->description;
    $imagePattern = '/src="(.*?)"/i';
    preg_match($imagePattern, $weatherInfo, $matches);
    $imageSrc = $matches[1];
     echo img($imageSrc) .'<br/>';
    $degreesPattern = '/.*?, (-?\d+) C/i';
    preg_match($degreesPattern, $weatherInfo, $matches);
    $degrees = $matches[1];
  echo  $degrees .'<br/>';
// end
?> 
```

# dynamics-crm-2011 - 如何比较两种 CRM 解决方案并找出差异？

> ID：13801907
> 
> 赞同：2
> 
> 时间：2012-12-10T13:26:45.847
> 
> 标签：dynamics-crm-2011, crm

比较两个`CRM (2011)`解决方案并找出差异的最佳方法是什么？我们有两种解决方案，另一种`QA-Solution`是`Production-Solution`，我想找出它们之间的区别。实际上，我需要应用所有更改，然后我们将通过使用功能`Production-Solution`将该解决方案部署到其他地方。`CRM's Solution Import Export`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T14:08:56.950

解决方案文件包含 Web 资源和定义解决方案的 XML 文件。您应该能够解压缩这两个解决方案文件，并使用文件差异实用程序来比较两个文件夹结构。结果不会很漂亮，但至少确定哪些 Web 资源已更改以及哪些实体已更新应该不会太难。

## 编辑

请注意，您所做的任何数据更改（即创建新联系人）都不会在解决方案导出中找到。这还包括一些其他的东西，比如复制规则，如果你做了任何......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:50:22.107

[自定义](http://crmcustomcompare.codeplex.com/)比较器是一个 Code Plex 工具，用于比较您可能会发现有用的自定义 XML。对于其他文件，达里尔的回答是一个不错的选择。

# asp.net - 将图像添加到 GridView 的单元格

> ID：13801909
> 
> 赞同：1
> 
> 时间：2012-12-10T13:26:48.860
> 
> 标签：asp.net

我想使用以下代码将图像添加到 GridView 单元格但不显示图像

```
//aspx
 <asp:TemplateField HeaderText="image">
      <ItemTemplate>
          <asp:Image ID="img" runat="server" Width="100px" Height="100px" />
      </ItemTemplate> 
```

```
//.cs -> In page_Load

for (int i = 0; i < GridView1.Rows.Count; i++)
{
      Image img = (Image)GridView1.Rows[i].FindControl("img");
      img.ImageUrl = path of image;
 }//for 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:30:22.590

您可以使用`RowDataBound`事件来更改 GridView Row 中的某些内容。

```
protected void GridView1_RowDatabound(object sender, GridViewRowEventArgs e)
{
    // check if this row is a row with Data (not Header or Footer)
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        // find your Image control in the Row
        Image image = ((Image)e.Row.FindControl("img"));
        // set the path of image
        img.ImageUrl = "path of image";     
    }
} 
```

或者您可以使用`foreach`语句在 Rows 集合中循环并更改图像的路径。此代码可能在 Page_Load 事件上。

```
foreach(GridViewRow row in GridView1.Rows)
{ 
    // check if this row is a row with Data (not Header or Footer)
    if (row.RowType == DataControlRowType.DataRow)
    {
        // find your Image control in the Row
        Image image = ((Image)row.FindControl("img"));
        // set the path of image
        img.ImageUrl = "path of image";     
    }
} 
```

## 编辑

您不能将图像设置为解决方案。为此，您必须创建一个处理程序（.ashx 文件）并在 C: 上传递您的图像名称并返回一个字节 []，如下所示：

```
public void ProcessRequest(HttpContext context)
{
    byte[] imageBytes = File.ReadAllBytes(@"C:\" + context.Request["image"]);
    context.Response.ContentType = "image/png";
    context.Response.BinaryWrite(imageBytes);
} 
```

`image`在您的页面上，通过在 url 中传递参数的处理程序进行设置：

```
Image image = ((Image)row.FindControl("img"));
img.ImageUrl = "ImageHandler.ashx?image=1.png"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:33:32.230

该事件`Page_Load`在 GridView 数据绑定或创建自身之前触发。如果它们都将是相同的图像，为什么不在 ItemTemplate 中设置该路径？如果是因为在进入后面的代码之前不知道路径，则可以将模板中的 ImageUrl 绑定到自定义属性，然后在 Page_Load 中设置该属性，然后填充该属性。否则，您想要进行的任何更改都需要在 RowDataBound 事件中完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T13:50:36.700

您可以直接从数据库中提供图像的路径

```
<ItemTemplate>
      <asp:Image ID="img" runat="server" Width="100px" Height="100px" ImageUrl='<%# Eval("Imageurl") %>' />
  </ItemTemplate> 
```

或在 alt 标记中提供 url 并在 rowdatabound 中使用它。

```
if (e.Row.RowType == DataControlRowType.DataRow)
{
    Image image1 = ((Image)e.Row.FindControl("img"));
    img.ImageUrl = image1.Alt; // You can check for path here if no image found     
} 
```

通过gridview使用循环不是正确的方法，它会降低性能

# html - 从 W3C Validator 获取“Stray end tag html”

> ID：13801917
> 
> 赞同：6
> 
> 时间：2012-12-10T13:27:31.550
> 
> 标签：html

我正在使用 W3C 的[验证器](http://validator.w3.org/)检查我的 (HTML5) 网站 并收到以下错误：

```
Stray end tag html. 
<html lang="en-US"> 
```

错误标志在“>”的结尾处。那条线有什么问题？似乎完全正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:34:08.137

这是验证为 html5 的最小 html（除了`lang="en-US"`）

```
<!DOCTYPE html>
<html lang="en-US">
  <head>
    <title></title>
  </head>
  <body>
  </body>
</html> 
```

你至少应该有这个结构

# objective-c - UITextField 拒绝允许用户输入

> ID：13801919
> 
> 赞同：1
> 
> 时间：2012-12-10T13:27:38.687
> 
> 标签：objective-c, ios, uibutton, uitextfield

我已经在 Interface Builder 中设置了一个`UITextField`并将其与 property 连接起来`self.nameField`。我的问题是，点击它什么也没做——用户不能输入任何文本；甚至没有光标。如果我添加`becomeFirstResponder`，那么键盘会自动显示。我想要的是当且仅当用户点击该字段以输入文本时才显示键盘。

涉及的方法如下：

```
-(void)displayOptOutScreen
{
    if (!self.nameField)
    {
        self.nameField=[[UITextField alloc] init];
    }
    self.nameField.hidden=NO;
    self.nameField.delegate = self;
    self.nameField.returnKeyType = UIReturnKeyDone;
    [self textFieldShouldReturn:self.nameField];
    [self.textView resignFirstResponder]; //This is a UITextView, created programmatically
    //[self.nameField becomeFirstResponder];  //Keyboard automatically displays.
} 
```

对于它的价值，有一个`UIButton`也不接受触摸。`UITextView`接受文本没有问题。

这是一个选项卡式应用程序。在阅读了其他 Stack Overflow 问题后，我尝试将以下行的各种组合添加到应用程序委托中：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
self.viewController = [[GHHaikuViewController alloc] initWithNibName:@"GHHaikuViewController" bundle:nil];
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible]; 
```

但是根据我包含或不包含的行，我会遇到各种错误，并且最终没有任何效果。（打开的视图控制器`UITextField`不是`GHHaikuViewController`but `GHComposeViewController`，但是当我尝试使用它时出现错误。）

关于我做错了什么有什么想法吗？

**编辑：** 这是界面生成器设置的屏幕截图。抱歉，他们分手了——我正在开发 MacBook Air 11"。

![在此处输入图像描述](../Images/877c55888b05d41b950cc8b9851aadf3.png)

![在此处输入图像描述](../Images/93aa04497740de166c54b5e6e83026ab.png)

![在此处输入图像描述](../Images/e53cc6951dd5d9ed2834971bc846765c.png)

![在此处输入图像描述](../Images/89368a3782335d73ab760075cdb35748.png)

![在此处输入图像描述](../Images/32b9913e71c85e44343b3b3e254e2b7a.png)

**进一步编辑：**`po [[[[UIApplication sharedApplication] delegate] window] recursiveDescription]`这是我在调试提示符下 输入时的输出。

```
(id) $1 = 0x0ad4bb80 <UIWindow: 0xad48ac0; frame = (0 0; 320 480); autoresize = W+H; layer = <UIWindowLayer: 0xad44010>>
   | <UILayoutContainerView: 0x9e74450; frame = (0 0; 320 480); autoresize = W+H; layer = <CALayer: 0x9e74510>>
   |    | <UITransitionView: 0xaa46f80; frame = (0 0; 320 431); clipsToBounds = YES; autoresize = W+H; layer = <CALayer: 0xaa47050>>
   |    |    | <UIViewControllerWrapperView: 0x9e90760; frame = (0 20; 320 411); autoresize = W+H; layer = <CALayer: 0x9e907c0>>
   |    |    |    | <UIView: 0x9e8c870; frame = (0 0; 320 411); autoresize = W+H; gestureRecognizers = <NSArray: 0x9e8bbd0>; layer = <CALayer: 0x9e8c8d0>>
   |    |    |    |    | <UIImageView: 0x9e8c790; frame = (0 0; 320 411); clipsToBounds = YES; opaque = NO; autoresize = TM+BM; layer = <CALayer: 0x9e8c7f0>>
   |    |    |    |    | <UITextField: 0x9e82610; frame = (40 189; 240 30); text = ''; clipsToBounds = YES; opaque = NO; autoresize = TM+BM; gestureRecognizers = <NSArray: 0x9e6ea90>; layer = <CALayer: 0x9e83720>>
   |    |    |    |    |    | <UITextFieldRoundedRectBackgroundView: 0x9e73ac0; frame = (0 0; 240 30); userInteractionEnabled = NO; layer = <CALayer: 0x9e73b80>>
   |    |    |    |    |    |    | <UIImageView: 0x9e73cd0; frame = (0 0; 8 30); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x9e73d30>>
   |    |    |    |    |    |    | <UIImageView: 0x9e73d80; frame = (8 0; 224 30); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x9e73de0>>
   |    |    |    |    |    |    | <UIImageView: 0x9e73e10; frame = (232 0; 8 30); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x9e73e70>>
   |    |    |    |    |    | <UITextFieldLabel: 0x9e8afa0; frame = (7 7; 226 15); text = 'Name (optional)'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x9e8af20>>
   |    |    |    |    | <UIButton: 0xad6fb00; frame = (236 221; 44 44); clipsToBounds = YES; opaque = NO; autoresize = TM+BM; layer = <CALayer: 0xad6fbf0>>
   |    |    |    |    |    | <UIImageView: 0x9e921c0; frame = (14 14; 16 16); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x9e922d0>>
   |    |    |    |    |    | <UIButtonLabel: 0x9e8a6f0; frame = (0 0; 0 0); clipsToBounds = YES; hidden = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x9e8a790>>
   |    |    |    |    | <UITextView: 0xa3de800; frame = (20 90; 300 480); text = '
I hope to update the May...'; clipsToBounds = YES; gestureRecognizers = <NSArray: 0x9e72ef0>; animations = { transition=<CATransition: 0x9e8eea0>; }; layer = <CALayer: 0x9e5d770>; contentOffset: {0, 0}>
   |    |    |    |    |    | <UIWebDocumentView: 0xa3dec00; frame = (0 0; 300 188); text = '
I hope to update the May...'; opaque = NO; userInteractionEnabled = NO; gestureRecognizers = <NSArray: 0x9e8d5a0>; layer = <UIWebLayer: 0x9e8d220>>
   |    |    |    |    |    |    | <TileHostLayer: 0x9e8d2b0> (layer)
   |    |    |    |    |    |    |    | <TileLayer: 0x9e90fb0> (layer)
   |    | <UITabBar: 0xad41b80; frame = (0 431; 320 49); autoresize = W+TM; layer = <CALayer: 0xad41c70>>
   |    |    | <_UITabBarBackgroundView: 0xad47950; frame = (0 0; 320 49); opaque = NO; autoresize = W; userInteractionEnabled = NO; layer = <CALayer: 0xad47a00>>
   |    |    | <UITabBarButton: 0xad42ff0; frame = (2 1; 76 48); opaque = NO; layer = <CALayer: 0xad453e0>>
   |    |    |    | <UITabBarSwappableImageView: 0xad45670; frame = (14 2; 48 32); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0xad45740>>
   |    |    |    | <UITabBarButtonLabel: 0xad42410; frame = (24 34; 28 13); text = 'Home'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0xad42500>>
   |    |    | <UITabBarButton: 0xad46b10; frame = (82 1; 76 48); opaque = NO; layer = <CALayer: 0xad46460>>
   |    |    |    | <UITabBarSelectionIndicatorView: 0xad5cf90; frame = (0 2; 76 44); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0xad5d2f0>>
   |    |    |    | <UITabBarSwappableImageView: 0xad46490; frame = (14 2; 48 32); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0xad46510>>
   |    |    |    | <UITabBarButtonLabel: 0xad46790; frame = (15 34; 46 13); text = 'Compose'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0xad40650>>
   |    |    | <UITabBarButton: 0xad46630; frame = (162 1; 76 48); opaque = NO; layer = <CALayer: 0xad47080>>
   |    |    |    | <UITabBarButtonLabel: 0xad46df0; frame = (29 34; 19 13); text = 'Buy'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0xad466f0>>
   |    |    | <UITabBarButton: 0xad47270; frame = (242 1; 76 48); opaque = NO; layer = <CALayer: 0xad47770>>
   |    |    |    | <UITabBarButtonLabel: 0xad47330; frame = (15 34; 47 13); text = 'Feedback'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0xad473d0>>
   |    |    | <UIImageView: 0xad48130; frame = (0 -3; 320 3); opaque = NO; autoresize = W+BM; userInteractionEnabled = NO; layer = <CALayer: 0xad48190>>
(lldb) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:55:01.647

假设您正确处理了 UIControls（例如，将所有 userInteractionEnabled 属性设置为 YES），这听起来好像您在 UIControls 之上设置了一个不可见的 UIView。

一旦您的应用程序在模拟器中运行，您可以通过暂停应用程序（使用代码下的小暂停按钮）并在调试提示符中键入以下命令来手动检查：

```
po [[[[UIApplication sharedApplication] delegate] window] recursiveDescription] 
```

这将打印出 UIWindow 及其**所有**子视图的描述。您可以以某种方式检查您的 UIControls 顶部是否有 UIView。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:32:01.843

是否禁用了用户交互的视图的按钮和文本字段子视图？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T13:36:08.977

试试这个

```
for(UIView *view in [self view].subViews){
    [view setUserInteractionEnabled:YES];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T14:01:37.500

当您从代码创建文本字段时，您必须定义它的框架

```
UITextField *tf = [[UITextField alloc] initWithFrame:CGRectMake(0, 0, 200, 50)];
tf.backgroundColor = [UIColor greenColor]; 
```

此外，如果您从 xib 文件创建它，请确保选中**用户交互启用**检查或在视图委托中

```
-(void)viewDidLoad{

    [self.nameField setUserInteractionEnabled:YES];
} 
```

# android - NumberFormatException 与 IntEditTextPreference

> ID：13801922
> 
> 赞同：0
> 
> 时间：2012-12-10T13:27:51.383
> 
> 标签：android, preference

在我的 android 应用程序中，我使用了一个名为“IntEditTextPreference”的类。当我希望用户将首选项作为整数引入时使用此类。

但它有一个问题。当用户将该字段留空并按“确定”时，将引发 NumberFormatException。

当字段为空时，我该怎么做才能避免用户按“确定”？

谢谢！

```
public class IntEditTextPreference extends EditTextPreference
{

   public IntEditTextPreference(Context context)
   {
           super(context);
   }

   public IntEditTextPreference(Context context, AttributeSet attrs)
   {
       super(context, attrs);
   }

   public IntEditTextPreference(Context context, AttributeSet attrs, int defStyle)
   {
       super(context, attrs, defStyle);
   }

   @Override
   protected String getPersistedString(String defaultReturnValue)
   {
        return String.valueOf(getPersistedInt(-1));
   }

   @Override
   protected boolean persistString(String value)
   {
       return persistInt(Integer.valueOf(value));
   } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:37:30.830

通常，如果您使用的是基于浏览器的应用程序，您将使用*JavaScript/AJAX*在输入有效时显示按钮。这已经在客户端处理了。为避免在语句周围`NumberFormatException,`简单地添加一个`try`--块。`catch``Integer.valueOf(value)`

基本上它取决于您的客户端框架。可能有更好的特定于框架的解决方案。你用哪一个？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:11:32.297

您可能仍然应该在它周围有一个 try/catch 块来 catch `NumberFormatException`。但是有很多方法可以做到这一点。一种方法是，当文本不为空且为整数时，您可以使用按钮`setClickable`方法，然后使用. 或者您可以简单地让它可点击，但在单击按钮时检查空字符串或非整数，并使用警告消息 toast/alert/label 让用户知道他们有不正确的字段，然后才允许按钮执行任何其他操作。希望这可以帮助！`false``onTextChangedListener`

# android - Android MultipartEntity POST 接收除 FileBody 之外的所有内容

> ID：13801926
> 
> 赞同：4
> 
> 时间：2012-12-10T13:28:14.853
> 
> 标签：android, http-post, multipartentity

在阅读了很多问题和答案后，我决定使用 MultipartEntity。这个答案一定是最好的： [https ://stackoverflow.com/a/2937140/1388723](https://stackoverflow.com/a/2937140/1388723)

我已经实现了它：

```
private class SendImage extends AsyncTask<String, Void, Void> {
    String sresponse;

    @Override
    protected Void doInBackground(String... params) {
        HttpClient httpClient = new DefaultHttpClient();
        HttpContext localContext = new BasicHttpContext();
        HttpPost httpPost = new HttpPost(
                "http://taras.xin.com.pl/loadimage.php");
        InputStream in = null;
        try {
            MultipartEntity entity = new MultipartEntity(
                    HttpMultipartMode.BROWSER_COMPATIBLE);
            Log.i("MultyPart", params[0]);
            File file = new File(params[0]);
            Log.i("MultyPartFILE", file.toString());
            ContentBody fb = new FileBody(file, "image/jpeg");
            Log.i("MultyPartFB", fb.toString());
            entity.addPart("text", new StringBody(
                    "This text was added to posrt"));
            entity.addPart("word", new StringBody(
                    "This text was added to post"));
            entity.addPart("file", fb);
            httpPost.setEntity(entity);
            HttpResponse response = httpClient.execute(httpPost,
                    localContext);
            in = response.getEntity().getContent();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(
                    new InputStreamReader(in, "UTF-8"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            in.close();
            sresponse = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {

        runOnUiThread(new Runnable() {

            @Override
            public void run() {
                text.setText(sresponse);
            }
        });

        super.onPostExecute(result);
    }
} 
```

和我的 loadimage.php：

```
 <?php
     var_dump($_POST);
     var_dump($_FILE);
      ?> 
```

我收到两个 $_POST 字符串，但 FileBody(file) 甚至没有影子。$_FILE 给出空值。

确切地说，我已经下载了 httpcomponents-client-4.2.2-bin，提取了 httpmime-4.2.2.jar。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:08:40.510

尝试仅获取您发送的
文件 $file = $_FILES['file'];

# objective-c - Xcode 框架

> ID：13801931
> 
> 赞同：0
> 
> 时间：2012-12-10T13:28:31.443
> 
> 标签：objective-c, xcode, frameworks

我正在 xcode 中做一个项目，它是为 ios 创建国王饮酒游戏。我正在使用 uiimages 和 nsdictionary 创建游戏，游戏运行良好。但是我必须实现一个我以前没有使用过的框架。我想知道是否有人可以向我介绍我可以使用的可能框架。

我希望有一个框架可以帮助在翻牌时显示规则。

例如，规则将是一个字符串，根据绘制的卡片显示在屏幕上。我希望能够在不使用弹出框或文本字段的情况下将其显示到屏幕上。

如果有人可以让我知道是否有可能的框架可以做到这一点，或者有一个框架可以很好地与 ios 的纸牌游戏配合使用，我将不胜感激。

感谢您

# php - 了解 Wordpress 数据库中的选项记录

> ID：13801934
> 
> 赞同：1
> 
> 时间：2012-12-10T13:28:57.537
> 
> 标签：php, wordpress, serialization

我尝试从 Wordpress 数据库中了解一些选项记录。例如，以下记录属于名为的选项`c2c_configure_smtp`

```
a:12:{s:9:"use_gmail";s:0:"";s:4:"host";s:19:"smtp.webfaction.com";s:4:"port";s:3:"465";s:11:"smtp_secure";s:3:"ssl";s:9:"smtp_auth";s:1:"1";s:8:"wordwrap";s:0:"";s:5:"debug";s:0:"";s:10:"from_email";s:9:"from_name";s:6:"Destek";s:8:"_version";s:3:"3.1";} 
```

我猜这是一些 php 数组的序列化，对吧？人类有可能理解这种数据格式吗？是什么意思`a:12`？`s:0`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T11:39:40.673

使用php内置的serialize()和unserialize()函数。根据您提供的数据，您应该期望数组

# sql-server - SSIS 包格式 1 和 0

> ID：13801940
> 
> 赞同：3
> 
> 时间：2012-12-10T13:29:09.160
> 
> 标签：sql-server, sql-server-2008, ssis

SSIS packageformat 1 和 0 代表什么？根据[官方 MSDN 文档](http://msdn.microsoft.com/en-us/library/ms181582.aspx)，只有 2 和 3。

其中 *，值 2 表示包以 SQL Server 2005 Integration Services 格式保存。值 3 表示包以 SQL Server 2008 Integration Services 格式保存。*

我将它们存储在 SQL2008R2 服务器的 MSDB 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:55:46.357

网络上有很多查询（例如[这里](http://www.simple-talk.com/content/print.aspx?article=1446)），其中 0 表示“2005”，1 表示“2008”。我认为真正的“2008”不是“2005”。当然，如果您查看 2012 年的 MSDB，则有“1”的行，其中实际 XML 包含`PackageFormatVersion`6。

2/3/6 是进入`<DTS:Property DTS:Name="PackageFormatVersion">6</DTS:Property>`实际包的 XML 位的值。

我认为 MSDN 文档页面是错误的。

# math - 圆上的角

> ID：13801941
> 
> 赞同：0
> 
> 时间：2012-12-10T13:29:21.000
> 
> 标签：math, geometry, degrees, angle

我正在尝试进行一些圆形检测，但无法计算出一些角度，谁能告诉我如何获得这些蓝色角度的角度值。![在此处输入图像描述](../Images/9f1410f4107b3acd422c7c9689a22ebc.png)

我以前从未使用过角度，所以有人可以指出一些相关的功能、算法等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T13:41:48.183

多边形的外角总和为 360 度，所以如果你有一个有 N 个顶点的正多边形，那么每个外角都是`360 / N`.

在上面的示例`N = 8`中，假设这些点是等距的，则外角是每个`360 / 8 = 45`度数。

# oop - Matlab 是否有类似于 main 方法的东西？

> ID：13801944
> 
> 赞同：5
> 
> 时间：2012-12-10T13:29:41.577
> 
> 标签：oop, matlab, main

如果我有一个包含类定义`classdef`（我的意思是整个文件，例如通过`Run`IDE 中的按钮、shell 或 Matlab 命令行。我不是说手动选择要执行的代码。

类似的行为存在于 Java 中的静态`main`方法和 Python 中通过在类定义之外（可能在`if __name__==__main__`块内）的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T15:02:26.240

最简洁的答案是不”; MATLAB classdef M 文件仅用于定义对象，而不是形成完整的程序。

长答案是，您可能能够从您的 classdef 函数中获得特定行为，例如，如果您重载构造函数以获取一个标志，指定是否“像变量一样行动”或“像程序一样行动”。

例如

```
classdef myClass
...
methods  
    function self = myClass(varargin)
       if nargin == 1 && strcmpi(varargin{1},'run')
          ..... %run the program
       else
          ..... %make the variable 
```

或者您可以创建一个名为 main 的静态方法：

```
 methods (Static = true)
       function main()
          %enabes: myClass.main()
          ...
       end 
```

IDE 仍然不知道如何处理您的 M 文件以“运行它”，但您可以从命令行或其他 M 文件正确运行它。

最后一句话不是 100% 正确 - 正如 Egon 在下面指出的那样，您可以让 MATLAB 的 IDE 运行该代码 - 使用“运行配置”： http: [//www.mathworks.com/help/matlab/matlab_prog/run-functions -in-the-editor.html](http://www.mathworks.com/help/matlab/matlab_prog/run-functions-in-the-editor.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T18:47:37.040

有几种方法可以做到这一点：

*   您可以创建“[运行配置](http://www.mathworks.nl/help/matlab/matlab_prog/run-functions-in-the-editor.html)”（作为脚本或特定代码行）。每当您从`classdef`文件中单击运行按钮（或按运行快捷方式）时，这将运行。最大的缺点是这些运行配置存储在本地，所以当涉及到协作或在多个地方工作时，这是一场噩梦。所以就个人而言，如果您有复杂的运行配置，我建议您编写一个脚本。我的主要被称为`testMyClass`where`MyClass`当然是您要运行的课程。

*   如果您不需要复杂的代码，您也可以将所有内容放在对象的构造函数中。如果您检查是否没有通过 传递的参数`if nargin == 0 ... end`，则每当您“运行”类文件时都应调用该代码。但是，您可以做的事情有些有限，因为如果您不小心，您可能会创建无限循环或正在创建的这些对象的无限链。最后，您将在基础工作区中拥有该对象。

*   如果您确实需要更复杂的代码或一些在基本工作区中生成一些变量的代码，则可以完成，但成本很高。你的代码最终可能会一团糟，所以我建议不要使用它，除非你有非常好的理由。您可以使用前面的方法和 evil 函数`evalin`并`assignin`评估和分配基础工作区中的变量。

# jquery - css float：左侧碰撞/碰撞，如何避免？

> ID：13801949
> 
> 赞同：0
> 
> 时间：2012-12-10T13:30:06.647
> 
> 标签：jquery, css, jquery-mobile

我正在尝试将[Swipe JS 2](https://github.com/bradbirdsall/Swipe/tree/swipe2)与 jQuery Mobile 一起使用（仔细考虑[此处](https://github.com/bradbirdsall/Swipe/issues/16)的注释）。

但是，我发现尝试使用**float: left**的冲突存在问题。我不能干扰 Swipe JS 2 引用，因此触摸设备上的滑动动作将起作用。

这意味着应该在网格中显示的数据只显示在垂直列中。

在检查应该将显示设置为网格的 CSS 的检查器时，我看到以下内容： ![在此处输入图像描述](../Images/b6889f8c4d5efdb405f9fc4fcb257a7f.png)

**请注意，似乎只有在触摸设备（手机、平板电脑等）上才能看到滑动动作。**

当您运行以下命令时，滑动动作**有效**，但数据**未**显示在网格中（jsfiddle 上的代码：http: [//jsfiddle.net/u1sonderzug/YSGY3/，jsfiddle](http://jsfiddle.net/u1sonderzug/YSGY3/)上的预览：http: [//jsfiddle.net/ u1sonderzug/YSGY3/embedded/result/](http://jsfiddle.net/u1sonderzug/YSGY3/embedded/result/)）：

```
<html>
    <head>
        <title>Test Slide</title>
        <script type='text/javascript' src='http://code.jquery.com/jquery-1.7.1.js'></script>
        <link rel="stylesheet" type="text/css" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css">
        <script type='text/javascript' src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>
        <script type='text/javascript' src="https://raw.github.com/bradbirdsall/Swipe/swipe2/swipe.js"></script>
        <style type='text/css'>
        /* Product CSS */

            .product {
            padding-top:10px;
            padding-bottom:10px;
            padding-left:24px;
            padding-right:24px;
            float:left;
        }
        /* Swipe 2 required styles */

            .swipe {
            overflow: hidden;
            visibility: hidden;
        }
        .swipe-wrap {
            overflow: hidden;
            position: relative;
        }
        .swipe-wrap div {
            float:left;
            width:100%;
            position: relative;
        }
        </style>
        <script type='text/javascript'>
            $('#home').live('pageshow',function(){
                window.slider = new Swipe(document.getElementById('slider'));
            });
        </script>
    </head>
    <body>
        <div data-role="page" id="home">
          <div data-role="content">
            <!-- Take out the FOLLOWING two lines to display grid correctly -->
            <div id='slider' class='swipe'>
              <div class='swipe-wrap'>
                <!-- Take out the ABOVE two lines to display grid correctly -->
                <div>
                  <div class="product"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/62/NCI_Visuals_Food_Hamburger.jpg/220px-NCI_Visuals_Food_Hamburger.jpg" /></div>
                  <div class="product"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/62/NCI_Visuals_Food_Hamburger.jpg/220px-NCI_Visuals_Food_Hamburger.jpg" /></div>
                  <div class="product"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/62/NCI_Visuals_Food_Hamburger.jpg/220px-NCI_Visuals_Food_Hamburger.jpg" /></div>
                  <div class="product"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/62/NCI_Visuals_Food_Hamburger.jpg/220px-NCI_Visuals_Food_Hamburger.jpg" /></div>
                  <div class="product"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/62/NCI_Visuals_Food_Hamburger.jpg/220px-NCI_Visuals_Food_Hamburger.jpg" /></div>
                  <div class="product"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/62/NCI_Visuals_Food_Hamburger.jpg/220px-NCI_Visuals_Food_Hamburger.jpg" /></div>
                  <div class="product"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/62/NCI_Visuals_Food_Hamburger.jpg/220px-NCI_Visuals_Food_Hamburger.jpg" /></div>
                  <div class="product"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/62/NCI_Visuals_Food_Hamburger.jpg/220px-NCI_Visuals_Food_Hamburger.jpg" /></div>
                  <div class="product"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/62/NCI_Visuals_Food_Hamburger.jpg/220px-NCI_Visuals_Food_Hamburger.jpg" /></div>
                  <div class="product"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/62/NCI_Visuals_Food_Hamburger.jpg/220px-NCI_Visuals_Food_Hamburger.jpg" /></div>
                  <div class="product"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/62/NCI_Visuals_Food_Hamburger.jpg/220px-NCI_Visuals_Food_Hamburger.jpg" /></div>
                  <div class="product"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/62/NCI_Visuals_Food_Hamburger.jpg/220px-NCI_Visuals_Food_Hamburger.jpg" /></div>
                </div>
                <div><span><h1>This is the next page</h1></span></div>
                <!-- Take out the FOLLOWING two lines to display grid correctly -->
              </div>
            </div>
            <!-- Take out the ABOVE two lines to display grid correctly -->
          </div> 
        </div>
    </body>
</html> 
```

​</p>

当您运行以下命令时，滑动动作**不起作用**，但数据**确实**显示在网格中（jsfiddle 上的代码：http: [//jsfiddle.net/u1sonderzug/JZQQY/，jsfiddle](http://jsfiddle.net/u1sonderzug/JZQQY/)上的预览：http: [//jsfiddle.net /u1sonderzug/JZQQY/embedded/result/](http://jsfiddle.net/u1sonderzug/JZQQY/embedded/result/) ):

```
<html>
    <head>
        <title>Test Slide</title>
        <script type='text/javascript' src='http://code.jquery.com/jquery-1.7.1.js'></script>
        <link rel="stylesheet" type="text/css" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css">
        <script type='text/javascript' src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>
        <script type='text/javascript' src="https://raw.github.com/bradbirdsall/Swipe/swipe2/swipe.js"></script>
        <style type='text/css'>
        /* Product CSS */

            .product {
            padding-top:10px;
            padding-bottom:10px;
            padding-left:24px;
            padding-right:24px;
            float:left;
        }
        /* Swipe 2 required styles */

            .swipe {
            overflow: hidden;
            visibility: hidden;
        }
        .swipe-wrap {
            overflow: hidden;
            position: relative;
        }
        .swipe-wrap div {
            float:left;
            width:100%;
            position: relative;
        }
        </style>
        <script type='text/javascript'>
            $('#home').live('pageshow',function(){
                window.slider = new Swipe(document.getElementById('slider'));
            });
        </script>
    </head>
    <body>
        <div data-role="page" id="home">
          <div data-role="content">

                <div>
                  <div class="product"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/62/NCI_Visuals_Food_Hamburger.jpg/220px-NCI_Visuals_Food_Hamburger.jpg" /></div>
                  <div class="product"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/62/NCI_Visuals_Food_Hamburger.jpg/220px-NCI_Visuals_Food_Hamburger.jpg" /></div>
                  <div class="product"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/62/NCI_Visuals_Food_Hamburger.jpg/220px-NCI_Visuals_Food_Hamburger.jpg" /></div>
                  <div class="product"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/62/NCI_Visuals_Food_Hamburger.jpg/220px-NCI_Visuals_Food_Hamburger.jpg" /></div>
                  <div class="product"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/62/NCI_Visuals_Food_Hamburger.jpg/220px-NCI_Visuals_Food_Hamburger.jpg" /></div>
                  <div class="product"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/62/NCI_Visuals_Food_Hamburger.jpg/220px-NCI_Visuals_Food_Hamburger.jpg" /></div>
                  <div class="product"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/62/NCI_Visuals_Food_Hamburger.jpg/220px-NCI_Visuals_Food_Hamburger.jpg" /></div>
                  <div class="product"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/62/NCI_Visuals_Food_Hamburger.jpg/220px-NCI_Visuals_Food_Hamburger.jpg" /></div>
                  <div class="product"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/62/NCI_Visuals_Food_Hamburger.jpg/220px-NCI_Visuals_Food_Hamburger.jpg" /></div>
                  <div class="product"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/62/NCI_Visuals_Food_Hamburger.jpg/220px-NCI_Visuals_Food_Hamburger.jpg" /></div>
                  <div class="product"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/62/NCI_Visuals_Food_Hamburger.jpg/220px-NCI_Visuals_Food_Hamburger.jpg" /></div>
                  <div class="product"><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/6/62/NCI_Visuals_Food_Hamburger.jpg/220px-NCI_Visuals_Food_Hamburger.jpg" /></div>
                </div>
                <div><span><h1>This is the next page</h1></span></div>

          </div> 
        </div>
    </body>
</html> 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:18:52.583

更改您的 .product 样式以添加宽度： auto !important; 像这样的行：http: [//jsfiddle.net/b3Jyv/](http://jsfiddle.net/b3Jyv/)

```
 .product {
        padding-top:10px;
        padding-bottom:10px;
        padding-left:24px;
        padding-right:24px;
        float:left;
        width: auto !important;
    } 
```

包含每个图像的 div 通过 .swipe-wrap div 样式规则集将其宽度设置为 100%，因此在网格布局中没有两个产品相邻的空间。

我无法弄清楚如何在手机上更改 jsFiddle 上的窗口大小，所以我没有设法对其进行测试（当我查看它时，页面上没有足够的空间容纳两列），但上面是产品出现在列中的原因，因此如果该列不起作用，您应该能够从那里找到解决方案。

# c# - c#如何处理这个泛型约束？

> ID：13801957
> 
> 赞同：2
> 
> 时间：2012-12-10T13:30:38.957
> 
> 标签：c#, generics, casting

我有三个处理三个基类的通用存储库：

```
public class Entity
{
    public int Id { get; set; }
}

public class Repository
{
    public TEntity[] GetAll<TEntity>() where TEntity : Entity
    {
        return _context.Set<TEntity>.ToArray();
    }
}

public class ArchiveEntity : Entity
{
    public bool Deleted { get; set; }
}

public class ArchiveRepository
{
    public TEntity[] GetAll<TEntity>() where TEntity : ArchiveEntity
    {
        return _context.Set<TEntity>.Where(x => x.Deleted == false).ToArray();
    }
}

public class LogicalStorageEntity : ArchiveEntity
{
    public int StorageId { get; set; }
}

public class LogicalStorageRepository
{
    public int CurrentStorageId { get; set; }

    public TEntity[] GetAll<TEntity>() where TEntity : LogicalStorageEntity
    {
        return _context.Set<TEntity>
            .Where(x => x.Deleted == false)
            .Where(x => x.StorageId = CurrentStorageId)
            .ToArray();
    }
} 
```

有没有办法让一个存储库根据基类对实体进行不同的过滤？看起来像：

```
public class Entity
{
    public int Id { get; set; }
}

public class ArchiveEntity : Entity
{
    public bool Deleted { get; set; }
}

public class LogicalStorageEntity : ArchiveEntity
{
    public int StorageId { get; set; }
}

public class UniversalRepository
{
    public TEntity[] GetAll<TEntity>() where TEntity : Entity
    {
        if (typeof(TEntity) is LogicalStorageEntity)
        {
            return _context.Set<TEntity>
                .Where(x => /* how to filter by x.Deleted */)
                .Where(x => /* how to filter by x.StorageId */)
                .ToArray();
        }

        if (typeof(TEntity) is ArchiveEntity)
        {
            return _context.Set<TEntity>
                .Where(x => /* how to filter by x.Deleted */)
                .ToArray();
        }

        return _context.Set<TEntity>.ToArray();
    }
} 
```

**编辑。**问题不是关于如何检查实体是否属于特定类型。真正困难的部分是当您知道实体可以通过 Deleted 或其他属性过滤时应用过滤器。由于存在限制 TEntity : Entity ，因此您无法访问 Deleted 属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T13:36:29.930

你可以通过强制转换来做到这一点，但我会质疑只执行非泛型功能的泛型方法的有用性。

我的意思是，如果没有针对一种以上类型执行的通用代码，那么在我看来，您实际上也可以在特定于类的派生中实现它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T13:47:04.027

你可以，但你不应该。

每个实体类型的单独存储库是正确的方法，因为这样您将实体特定的逻辑封装在该实体的存储库中。如果您尝试创建一个通用存储库，您将不得不通过大量`if`检查不断添加/更改逻辑。

但是，如果您想尝试并促进某些代码重用，则可以从基本存储库提供功能并允许特定存储库指定行为：

```
public abstract class Repository<TEntity> where TEntity : Entity
{
    protected virtual Expression<Func<TEntity, bool>> Filter { get { return null; } }

    public TEntity[] GetAll()
    {
        if (this.Filter == null)
        {
            return _context.Set<TEntity>().ToArray();
        }
        else
        {
            return _context.Set<TEntity>().Where(this.Filter).ToArray();
        }
    }
}

public class ArchiveRepository : Repository<Archive>
{
    public ArchiveRepository()
    {
        this.Filter = archive => !archive.IsDeleted;
    }
} 
```

使用这种方法，您可以减少重复代码的数量，但增加代码库的可读性和可维护性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T13:36:21.500

使用“as”铸造。

```
LogicalStorageEntity lse = entity as LocalStorageEntity;
if (lse != null)
{
     // we know that the entity is a LogicalStorageEntity 
}

ArchiveEntity ae = entity as ArchiveEntity;
if (ae != null)
{
     // we know that the entity is an ArchiveEntity
}
// etc... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T13:38:52.487

您可以通过以下方式检查`is`：

```
if (TEntity is LogicalStorageEntity)
    ...
if (TEntity is ArchiveEntity)
    ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T13:39:13.000

我会使用`is`over `as`，但这并不重要。

```
 if (TEntity is LogicalStorageEntity)
        {
            return _context.Set<TEntity>
                .Where(x => /* filter by x.Deleted */)
                .Where(x => /* filter by x.StorageId */)
                .ToArray();
        }

        if (TEntity is ArchiveEntity)
        {
            return _context.Set<TEntity>
                .Where(x => /* filter by x.Deleted */)
                .ToArray();
        } 
```

# html - 标题 onHover 的 CSS 不起作用

> ID：13801959
> 
> 赞同：0
> 
> 时间：2012-12-10T13:30:41.680
> 
> 标签：html, css

我有一个页面，其中包含一些表格形式的数据

目前，对于其中一列（这是一个链接），我需要在悬停时显示一个文本，并且能够通过在标签中给出标题来成功地做到这一点。现在，我尝试将 css 应用于悬停时的文本，以下是代码段

CSS

```
a.changes:hover {text-decoration: none; }
a.changes p {position: absolute; left: -9999px;border-style:solid; border-color:black; border-width:1px;}
a.changes:hover p {left: 5%; background: #ffffff; size:1px;} 
```

在 html 中，我从 a 标签中删除了标题并将其放入

内部标签

```
<a href='#' class='changes' onclick='AAA'><font color=blue>XYZ</font><p style='width:100px;'>TextToBeDisplayedOnHover</p></a>"; 
```

上面的代码片段在当前显示器上运行良好。但是，当我向下滚动页面然后尝试通过选择最后一个元素在悬停时显示为文本时，标题无法很好地显示。我猜悬停上的文字垂直超出了显示页面。

有人请帮助我。我需要这个悬停来处理当前页面中表中的所有行以及下一页，而不仅仅是当前显示，就像我的情况一样

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:51:50.600

我不太明白你的问题，但你有 100 像素宽的容器，所以“TextToBeDisplayedOnHover”不适合容器。你可以试试这个（或扩大容器）：

```
a.changes:hover p {left: 5%; background: #ffffff; size:1px;width:100px;overflow:scroll;} 
```

在悬停的“p”中丢失内联样式。（您已经在使用 CSS。）

```
<a href='#' class='changes' onclick='AAA'>XYZ<p>TextToBeDisplayedOnHover</p></a> 
```

如果您在悬停文本中使用空格（“悬停时显示的文本”），您将不太可能用完空间。

如果蓝色不是默认字体颜色，请将其添加到您的样式中：

```
a {color:blue;} 
```

# java - t:jscookMenu 当前项目

> ID：13801961
> 
> 赞同：0
> 
> 时间：2012-12-10T13:30:43.833
> 
> 标签：java, jsf-2, java-ee-6

我`t:jscookMenu`在我的 JSF 2 应用程序中使用。到目前为止，我设法制作了一个功能菜单，但是如何突出显示每个页面当前选择的菜单项？

我不受战斧的约束，所以如果有人可以提出一个可行的替代解决方案，我也会很高兴。我对菜单的要求如下：侧菜单、某些菜单项的子项、悬停在项上时突出显示、突出显示当前选定的项、通过 Java 代码动态创建的项。

# angularjs - AngularJS 获取属性值

> ID：13801962
> 
> 赞同：0
> 
> 时间：2012-12-10T13:30:45.430
> 
> 标签：angularjs, javascript-framework

我的控制器中有以下角度对象

```
$scope.students = [{:id => 1, :state => 'active'}, {:id => 2, :state => 'suspended'}] 
```

我如何获得所有状态活跃的学生的 id？谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:40:50.503

有多种方法，但我能想到的最简单的方法是在您的范围内添加一个 activeStudent 函数，如下所示：

```
$scope.activeStudent = function(){
  return _.filter($scope.students, function(s){
    return s.state == "active";
  });
} 
```

并且在您的视图中，您将在绑定中使用 activeStudent() 。

# django - Django：在 debug=false 时提供静态文件

> ID：13801969
> 
> 赞同：9
> 
> 时间：2012-12-10T13:31:09.977
> 
> 标签：django, django-staticfiles, django-1.4

我知道这个问题被问了很多次，但我找到并尝试过的答案都没有帮助我。

这些是我的静态文件设置：

```
STATIC_ROOT = os.path.abspath(SETTINGS_PATH+'/staticfiles/')

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/staticfiles/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    os.path.join(os.path.dirname(__file__), 'static'),
    )

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
) 
```

在 myapp/urls.py 中：

```
from django.conf.urls import patterns, include, url
from django.conf import settings
from django.contrib import admin
from django.contrib.staticfiles.urls import staticfiles_urlpatterns

admin.autodiscover()

urlpatterns = patterns('',
    # urls
)

urlpatterns += staticfiles_urlpatterns() 
```

Collectstatic 按原样将所有文件复制到 staticfiles/ ，我在所有静态文件上都得到 404。

我也在 urls.py 中试过这个：

```
if not settings.DEBUG:
    urlpatterns += patterns('',
        url(r'^staticfiles/(?P<path>.*)$', 'django.views.static.serve',
            {'document_root': settings.STATIC_ROOT}),
    ) 
```

这给了我以下错误：

```
Resource interpreted as Stylesheet but transferred with MIME type text/html:  "http://localhost:8000/?next=/staticfiles/css/bootstrap.css". localhost:11
Resource interpreted as Stylesheet but transferred with MIME type text/html: "http://localhost:8000/?next=/staticfiles/css/style.css". localhost:12
Resource interpreted as Script but transferred with MIME type text/html: "http://localhost:8000/?next=/staticfiles/js/bootstrap.js". localhost:79
Resource interpreted as Script but transferred with MIME type text/html: "http://localhost:8000/?next=/staticfiles/js/login.js". 
```

我看不出我的设置有什么问题。任何想法都是最受欢迎的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-10T13:37:20.927

正如您在[文档](https://docs.djangoproject.com/en/dev/howto/static-files/#serving-static-files-in-development)中的警告框中看到的那样，在生产中（即使用`debug=False`），您应该使用 Web 服务器来提供静态文件，而不是 django。因此，`staticfiles`如果`debug=False`.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-05-07T16:53:40.900

# 在 settings.py::

```
if DEBUG: 
   STATIC_ROOT = os.path.join(BASE_DIR, '/static')
else:
   STATIC_ROOT = os.path.join(BASE_DIR, 'static') 
```

并在 urls.py 添加

```
import django.views.static
urlpatterns += [
   url(r'^static/(?P<path>.*)$', django.views.static.serve, {'document_root': settings.STATIC_ROOT, 'show_indexes': settings.DEBUG})
] 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-05-03T17:10:04.127

我在我的根 urls.py 中使用下面的代码。如果您希望 django 开发服务器提供静态和媒体服务，则需要在设置文件中将 FORCE_SERVE_STATIC 设置为 True。并且不要忘记运行 collectstatic 命令来更新您的静态文件。

```
from django.conf.urls.static import static
from django.conf import settings

<...>

if settings.DEBUG:
    urlpatterns += static(
        settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
elif getattr(settings, 'FORCE_SERVE_STATIC', False):
    settings.DEBUG = True
    urlpatterns += static(
        settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
    urlpatterns += static(
        settings.STATIC_URL, document_root=settings.STATIC_ROOT)
    settings.DEBUG = False 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-07-07T17:18:05.473

这是一个迟到的答案，但可能会对某人有所帮助。有一个额外的选项可以与`runserver`命令一起使用，它强制 Django 提供静态文件，即使在`DEBUG=False`

```
python manage.py runserver --insecure 
```

Django 文档参考：[https ://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#cmdoption-runserver-insecure](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/#cmdoption-runserver-insecure)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-10T09:59:38.057

在您的 urls.py 文件中：

添加这一行

```
from django.views.static import serve 
```

在 urlpatterns 中添加这两个 url：

```
url(r'^media/(?P<path>.*)$', serve,{'document_root': settings.MEDIA_ROOT}),
url(r'^static/(?P<path>.*)$', serve,{'document_root': settings.STATIC_ROOT}), 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-13T20:52:19.880

关闭调试后，Django 将不再为您提供静态文件。您的生产网络服务器（Apache 或 Heroku 或 Pythonanywhere 或类似的东西）应该负责这一点。

# php - PHP数组键存在

> ID：13801973
> 
> 赞同：1
> 
> 时间：2012-12-10T13:31:23.920
> 
> 标签：php, arrays, return

我有 2 个数组，当 2 个数组相互匹配时，我需要返回 TRUE 或 FALSE。如果结果匹配，无序数组也应返回 TRUE，但仅当两个数组具有相同值时才应返回 true。

```
//This should return TRUE
$array_One = array('test1', 'test2', 'test3');
$array_Two = array('test1', 'test2', 'test3'); 
```

* * *

```
//This should return TRUE
$array_One = array('test1', 'test2', 'test3');
$array_Two = array('test1', 'test3', 'test2'); 
```

* * *

```
//This should return TRUE
$array_One = array('test1', 'test2', 'test3');
$array_Two = array('test1', 'test3', 'test2'); 
```

* * *

```
//This should return FALSE
$array_One = array('test1', 'test2', 'test3');
$array_Two = array('test1', 'test2'); 
```

我尝试了几种方法，包括使用foreach的array_key_exists，但它没有返回预期的结果。当数组匹配时，这应该只返回一个 TRUE 或 FALSE。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T13:37:04.810

[http://php.net/manual/en/function.array-diff.php](http://php.net/manual/en/function.array-diff.php)

如果您只需要知道两个数组的值是否完全相同（无论键和顺序如何），那么不要使用 array_diff，这是一个简单的方法：

```
<?php

function identical_values( $arrayA , $arrayB ) {

    sort( $arrayA );
    sort( $arrayB );

    return $arrayA == $arrayB;
}

// Examples:

$array1 = array( "red" , "green" , "blue" );
$array2 = array( "green" , "red" , "blue" );
$array3 = array( "red" , "green" , "blue" , "yellow" );
$array4 = array( "red" , "yellow" , "blue" );
$array5 = array( "x" => "red" , "y" =>  "green" , "z" => "blue" );

identical_values( $array1 , $array2 );  // true
identical_values( $array1 , $array3 );  // false
identical_values( $array1 , $array4 );  // false
identical_values( $array1 , $array5 );  // true

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:40:28.747

如果要比较数组的大小，可以使用[`count`](http://php.net/manual/en/function.count.php)：

```
if ( count ( $array1 ) == count ( $array2 )) 
{ 
     MATCH! 
} 
else 
{ 
     NO MATCH! 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T13:42:13.030

```
$array_One = array('test1', 'test2', 'test3');
$array_Two = array('test1', 'test3', 'test2');

if (array_diff($array_One, $array_Two))
{
    // there is a difference
    echo 'FALSE';
}
else
{
    // the arrays match
    echo 'TRUE';
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T13:44:00.087

```
function arraycomp( $array1, $array2 ) {
   $diff1 = array_values( $array1 );
   $diff2 = array_values( $array2 );

   sort( $diff1 );
   sort( $diff2 );

   return ( $diff1 === $diff2 );

} 
```

只需将您的两个数组传递给该函数。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-10T13:38:07.863

这应该适合你：

```
sort($array1);
reset($array1);
sort($array2);
reset($array2);
$res = array_diff($array1, $array2);

if($res)
    echo "they match"; 
```

# mysql - MySQL（？）：什么转换器可能已将“ä”更改为“¨a”？

> ID：13801980
> 
> 赞同：2
> 
> 时间：2012-12-10T13:32:08.887
> 
> 标签：mysql, character-encoding

这更多是出于好奇而不是实际需要....

这只是在我们的一个较旧的数据库中发现的：在文本字段中，所有`ä`（[德语变音符号](https://en.wikipedia.org/wiki/Diaeresis_%28diacritic%29)）字符都显示为`¨a`（与其他变音符号类似）。

可能与必须处理文本的所有其他开发人员一样，由于 latin-1 / Unicode 恶作剧，我看到了相当多的乱码文本，但我从未遇到过这个奇怪的迹象......而且很难用谷歌搜索......

据我所知，该表以[ISO-8859-1](https://en.wikipedia.org/wiki/ISO/IEC_8859-1)开始，后来迁移到[UTF-8](http://en.wikipedia.org/wiki/UTF-8)。有问题的文本可能是从 Microsoft Office 文档中复制的。

从技术上讲，`ä`（未知字节码/编码）被转换为两个（！）UTF-8 字符，`¨a`（C2A8 61 / UTF-8 作为十六进制）。

# django - Django - 具有 Verbose_names 列表的 ChoiceField 的管理操作表单

> ID：13801981
> 
> 赞同：0
> 
> 时间：2012-12-10T13:32:14.070
> 
> 标签：django

我有一个模型：

```
class Inventory(models.Model):
    title = models.CharField(max_length=100, db_index=True)
    product_code = models.CharField(max_length=100, db_index=True)
    slug = models.SlugField(max_length=100, db_index=True)
    description = models.TextField()
    cost_ea = models.DecimalField(max_digits=6, decimal_places=2)
    cost_ws = models.DecimalField(max_digits=6, decimal_places=2)
    quantity = models.IntegerField()
    main_image = models.ImageField(upload_to = 'inventory/images/main/', null = True, blank = True)
    thumb_image = models.ImageField(upload_to = 'inventory/images/thumbs/', null = True, blank = True)
    product_category = models.ForeignKey('inventory.Product_Type')
    card_category = models.ForeignKey('inventory.Card_Type')
    last_modified = models.DateTimeField(auto_now = True, auto_now_add = True, null = True,  blank = True, editable = True)
    created = models.DateTimeField(auto_now_add = True, null = True, blank = True, editable = True, default = datetime.datetime.now())
    in_stock = models.BooleanField(default = False) 
```

我想创建一个类似这样的表单字段（它将位于管理操作的中间页面上）：

form.ChoiceField(choices=Inventory.get_all_verbose_names)

是否存在从模型中获取所有详细名称的函数？如果没有，我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:54:22.870

你可以尝试类似的东西

```
forms.ChoiceField(choices=((f.name, f.verbose_name) for f in Inventory._meta.fields)) 
```

# entity-framework - 如何在 EF Code First 迁移中使用 SQL Server 视图

> ID：13801982
> 
> 赞同：2
> 
> 时间：2012-12-10T13:32:16.640
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations

我首先将一个包含许多表和视图的小型数据库逆向工程到 EF 5 代码中。

当我这样做时，我会为我的每个表获得一组模型和映射类，当我尝试使用生成的`DbContext`.

它还为我的每个视图生成 POCO 类，但是当我运行`Enable-Migrations`和`Add-Migration`使用包管理器控制台时，迁移不会重新创建 SQL Server 视图。

我尝试手动更新迁移以使用自定义 SQL 创建视图，如下所示：

```
Sql("CREATE VIEW [dbo].[viewUsersDeactivated] "
          + "AS "
          + "SELECT ... "); 
```

这在我运行时工作正常`Update-Database`，但从`Update-Database -Script`命令输出的 SQL 脚本似乎无效，导致以下错误：

> 'CREATE VIEW' 必须是批处理中的唯一语句。

在每个自定义 SQL 语句之间插入`Sql("GO");`可用于脚本生成，但随后我无法再使用 更新`Update-Database`，并且我找不到适用于两者的方法。

所以我的问题归结为：**如何在代码优先迁移脚本中包含 SQL Server 视图，以便我可以使用`Update-Database`和通过使用生成的生产脚本创建数据库`Update-Database -Script`？**

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T13:39:59.603

不完全确定这是最佳实践，其他人可能有更好的解决方案，但我通过将整个视图创建脚本包装在 Execute 中解决了这个问题，因此：

```
var sql = "CREATE VIEW [dbo].[TheViewName] AS ......."
sql = sql.Replace("'", "''"); // sanitize the sql string
sql = string.Format("EXECUTE sp_executesql N'{0}'", sql);
Sql(sql); 
```

# c - Opencv 捕获导致内存分配错误

> ID：13801983
> 
> 赞同：2
> 
> 时间：2012-12-10T13:32:18.343
> 
> 标签：c, memory-management, opencv, capture

我已经实现了在 OpenCV 库上运行的捕获代码。按顺序从 2 个摄像头捕获代码。但是代码在一段时间后会导致内存分配错误。

我必须释放camera1的捕获流才能打开camera2的捕获流。我无法同时获得两个捕获，所以我必须按顺序捕获它。

为什么在这种情况下会导致内存分配错误？

我的代码位于下面：

```
#include <cv.h>
#include <highgui.h>
#include <cxcore.h>
#include <stdio.h>

  CvCapture* camera; // Use the default camera
  IplImage*     frame;

int main(int argc, char* argv[])
{    

     while(1)
     {
      camera = cvCreateCameraCapture(0); // Use the default camera
      //camera2 = cvCreateCameraCapture(1); // Use the default camera
      frame = 0;
      //frame2 = 0;

      cvSetCaptureProperty(camera,CV_CAP_PROP_FRAME_WIDTH,1024) ;
      cvSetCaptureProperty(camera,CV_CAP_PROP_FRAME_HEIGHT,768); 

      frame = cvQueryFrame(camera); //need to capture at least one extra frame

      if (frame != NULL) {
        printf("Frame extracted from CAM1\n\r");
            cvSaveImage("/dev/shm/webcam1.jpg", frame,0);
        printf("Frame from CAM1 saved\n\r");
      } else {
          printf("Null frame 1\n\r");
      }

      cvReleaseImage(&frame);
      cvReleaseCapture(&camera);

      camera = cvCreateCameraCapture(1); // Use the default camera

      cvSetCaptureProperty(camera,CV_CAP_PROP_FRAME_WIDTH,1024) ;
      cvSetCaptureProperty(camera,CV_CAP_PROP_FRAME_HEIGHT,768); 

      frame = cvQueryFrame(camera); //need to capture at least one extra frame

      if (frame != NULL) {
        printf("Frame extracted from CAM2\n\r");
            cvSaveImage("/dev/shm/webcam2.jpg", frame,0);
        printf("Frame from CAM2 saved\n\r");
      } else {
          printf("Null frame 2\n\r");
      }
      cvReleaseImage(&frame);
      cvReleaseCapture(&camera);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T16:31:25.880

首先，您可以从 while() 语句中开始声明 cameraCapture：

```
 camera0 = cvCreateCameraCapture(0);
 camera1 = cvCreateCameraCapture(1);
 frame0 = 0;
 frame1 = 0;
 cvSetCaptureProperty(camera0,CV_CAP_PROP_FRAME_WIDTH,1024) ;
 cvSetCaptureProperty(camera0,CV_CAP_PROP_FRAME_HEIGHT,768);
 cvSetCaptureProperty(camera1,CV_CAP_PROP_FRAME_WIDTH,1024) ;
 cvSetCaptureProperty(camera1,CV_CAP_PROP_FRAME_HEIGHT,768); 

 while(1) {
     /* your operation */
     frame0 = cvQueryFrame(camera0);
     frame1 = cvQueryFrame(camera1);
     /* your operation */
 }

 cvReleaseImage(&frame0);
 cvReleaseImage(&frame1);
 cvReleaseCapture(&camera0);
 cvReleaseCapture(&camera1); 
```

# 编辑

如果您想从 A-cam 获取第一个流，然后从 B-cam 获取，您将拥有这样的代码。我不明白你到底想做什么，所以这段代码只是在一个窗口上显示你的流。请记住使用**cvWaitKey(...)**以便让 highgui 有时间处理来自**cvShowImage()**的绘制请求。另外，看看**cvSetCaptureProperty**的[文档](http://opencv.willowgarage.com/documentation/c/highgui_reading_and_writing_images_and_video.html#cvSetCaptureProperty)：这里写的是目前该函数仅支持视频文件：

 ***   CV_CAP_PROP_POS_MSEC；
*   CV_CAP_PROP_POS_FRAMES；
*   CV_CAP_PROP_POS_AVI_RATIO。

顺便说一句，这是我的建议：

```
const char* wndName = "window";
cvNamedWindow(wndName, CV_WINDOW_NORMAL);

IplImage* frame;
CvCapture* capture;

while(true) {
  capture = cvCaptureFromCAM(0);

  /* Showing for a while capture in window */
  while(/* your condition */) {
    frame = cvQueryFrame(capture);
    /* operation with A cam */
    cvShowImage(wndName, frame);
    cvWaitKey(30);
  }

  cvReleaseCapture(&capture);
  cvWaitKey(100);
  /* switching source cam */
  capture = cvCaptureFromCAM(1);

  /* Showing for a while capture in the same window */
  while(/* your condition */) {
    frame = cvQueryFrame(capture);
    /* operation with B cam */
    cvShowImage(wndName, frame);
    cvWaitKey(30);
  }
} 
cvReleaseImage(&frame); 
cvReleaseCapture(&capture); 
```

这对我有用，给我任何反馈。**

# android - 权限仅授予系统应用程序

> ID：13801984
> 
> 赞同：107
> 
> 时间：2012-12-10T13:32:19.577
> 
> 标签：android, eclipse, lint

我有一个使用系统权限的**系统应用程序**，并且我在清单中列出了这些权限。当我尝试进行构建时，Eclipse 给出了以下**错误（命令行构建有效）：**

> 权限仅授予系统应用程序

我已经知道我的应用程序需要系统权限，这对我来说不是问题，因为我的应用程序将仅在有根手机上使用。所以我想抑制这个错误，有人知道怎么做吗？

**编辑**
我的项目已经在命令行上编译得很好，安装，运行等。我的问题是关于 eclipse 给出一个合法清单文件的错误。

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2012-12-10T13:44:27.210

**在 Eclipse 中：**

> 窗口 -> 首选项 -> Android -> Lint 错误检查。

在列表中找到带有 的条目`ID = ProtectedPermission`。将 Severity 设置为低于 Error 的值。这样您仍然可以使用 Eclipse 编译项目。

**在 Android Studio 中：**

> 文件 -> 设置 -> 编辑器 -> 检查

在 下`Android Lint`，找到`Using system app permission`。取消选中该复选框或选择低于错误的严重性。

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2015-12-16T04:08:53.537

要仅针对一个实例忽略此错误，请将该`tools:ignore="ProtectedPermissions"`属性添加到您的权限声明中。这是一个例子：

```
<uses-permission android:name="android.permission.READ_PRIVILEGED_PHONE_STATE"
    tools:ignore="ProtectedPermissions" /> 
```

您必须 `tools`在清单根元素中添加命名空间

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools" 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-04-09T07:32:13.747

不时出现相同的错误（当我在清单中将安装位置设置为“首选外部”时）。只需清理并重建项目。为我工作。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-08-10T06:36:56.037

```
tools:ignore="ProtectedPermissions" 
```

尝试将此属性添加到该权限。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-05-07T13:51:32.203

mac中Android Studio中的路径：

Android Studio -> 首选项 -> 编辑器 -> 检查

展开 Android -> 展开 Lint -> 展开正确性

*取消选中使用系统应用权限*复选框

 *点击“应用”->“确定”

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-01-05T16:21:21.897

当您在清单中添加权限时，然后在 Eclipse 中转到项目和 clic

1.  点击项目
2.  点击干净的项目就可以了

k 关于清洁项目

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-13T03:32:25.727

Preferences --> EditorEditor --> Inspections --> Android Lint --> 取消选中项目 Using System app permissio*

# visual-studio-2010 - iplImage 的 cvThreshold

> ID：13801991
> 
> 赞同：1
> 
> 时间：2012-12-10T13:32:51.280
> 
> 标签：visual-studio-2010, qt, opencv

我正在使用 opencv 和 qt 库使用 Visual C++ 编写代码。我正在尝试将阈值应用于 iplImage 并显示它，但我遇到了一些问题：当我将 iplImage 传递给 cvThreshold 函数时（假设阈值为 0）不返回白色图像并且我不知道为什么。要显示我正在使用的函数发出：

```
uchar *qimout=new uchar[sImg];
            IplImage *greyImage=cvCreateImage(cvSize(wImg,hImg),IPL_DEPTH_8U,1);
            cvThreshold(currentImage,greyImage,0,255,cv::THRESH_BINARY);
            greyImage->imageData = (char*)qimout;
            emit renderImage(QImage(qimout,wImg,hImg,QImage::Format_Indexed8)); 
```

有人能帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:38:18.557

我认为这与这篇文章 [在 OpenCV 中将 RGB 转换为黑白有关](https://stackoverflow.com/questions/1585535/convert-rgb-to-black-white-in-opencv)

```
 // C
        IplImage *im_rgb  = cvLoadImage("image.jpg");
        IplImage *im_gray = cvCreateImage(cvGetSize(im_rgb),IPL_DEPTH_8U,1);
        cvCvtColor(im_rgb,im_gray,CV_RGB2GRAY);

        // C++
        Mat im_rgb  = imread("image.jpg");
        Mat im_gray;
        cvtColor(im_rgb,im_gray,CV_RGB2GRAY);
        // C
IplImage* im_bw = cvCreateImage(cvGetSize(im_gray),IPL_DEPTH_8U,1);
cvThreshold(im_gray, im_bw, 128, 255, CV_THRESH_BINARY | CV_THRESH_OTSU);

// C++
Mat img_bw = im_gray > 128; 
```