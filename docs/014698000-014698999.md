# StackOverflow 问答 14698000-14698999

# python - 使用 simplejson 模块将用户名转储为数组

> ID：14698002
> 
> 赞同：1
> 
> 时间：2013-02-05T00:03:48.110
> 
> 标签：python, django, twitter-bootstrap, simplejson, bootstrap-typeahead

我正在尝试在 django 中实现 bootstrap typeahead。在我的模板文件中，我想要一个文本框供用户输入文本 [在我的情况下为用户名]。我正在拍摄的方法是让 django 提供一个数组`user_json`，`show.html`因此引导输入可以使用该数组。

在我的 views.py 文件中，我添加了以下函数：

```
def users_list_json(request):
    users = User.get_username()

    user_json = simplejson.dumps(users)
    render_to_response("show.html", {"user_json": user_json}) 
```

但是当我在 show.html 中运行 console.log(user_json) 时，它会引发错误（ReferenceError: user_json is not defined）。我应该如何实施呢？有没有更简单的方法？

我想要一个包含所有用户名的数组在 show.html 文件中可用，这样我就可以将它与 typeahead 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T00:50:55.750

我通过稍微改变功能解决了这个问题。

```
def users_list_json(request):
    user_list = [u.username for u in User.objects.exclude(username=username)]
    context.user_json_list = simplejson.dumps(user_list) 
```

而且，我通过添加以下内容调用了 show.html 中的数组：

`{{ user_json_list|safe }}`

# groovy - 在 GSP 中访问 Groovy 文件

> ID：14698003
> 
> 赞同：0
> 
> 时间：2013-02-05T00:04:01.713
> 
> 标签：groovy, import, gsp

所以我试图在我的 GSP 中访问一个 groovy 函数。我有

```
<%@ page import = company.ConstantsFile %> 
```

然后在gsp中我有

```
I have been in the heating and cooling business for <%daysBetween()%> 
```

还有我的 ConstantsFile.groovy

```
package company

import static java.util.Calendar.*

class ConstantsFile {

    def daysBetween() {
        def startDate = Calendar.instance
        def m = [:]
        m[YEAR] = 2004
        m[MONTH] = "JUNE"
        m[DATE] = 26
        startDate.set(m)
        def today = Calendar.instance

        return today - startDate
    }
} 
```

编辑：错误信息：

```
Class
groovy.lang.MissingMethodException
Message
No signature of method: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:53:36.180

导入很好，但 Groovy 是面向对象的语言。您需要（如在 JSP/JAVA 中）通过对象调用方法，因此首先创建一个 ConstantsFile 类实例或将方法 daysBetween 定义为静态，如下所示：

```
class ConstantsFile {
    static daysBetween() {
        // your code goes here
    }
} 
```

现在你可以在 GSP 文件中做

```
<%= ConstantsFile.daysBetween() %> 
```

注意等号。没有它，从方法返回的值不会被“打印”到生成的 html 中。

你在使用 Grails 吗？如果是，那么在控制器级别调用 daysBetween() 方法并将结果作为模型的一部分返回到视图中会更好。

提示：检查[Groovy TimeCategory](http://groovycookbook.org/basic_types/dates_times/)（滚动到“使用 Groovy 的时间类别”）

最后一件事。daysBetween() 方法的逻辑似乎不是恒定的。因此将其作为 ConstantFile 类的一部分嵌入违反了合同。事实上，在这个类中也没有太多关于“文件”的内容:)

# vim - 从 vim 命令行回显函数调用

> ID：14698009
> 
> 赞同：13
> 
> 时间：2013-02-05T00:05:05.073
> 
> 标签：vim

我该怎么做：

```
:echo call MyFunction() 
```

这样我就可以看到调用函数的结果？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-05T00:08:03.187

使用这样的东西：

`:echo Myfunction()`

# linux - 在静态 Git 构建中链接的未定义参考

> ID：14698013
> 
> 赞同：3
> 
> 时间：2013-02-05T00:05:50.690
> 
> 标签：linux, git, gcc, linker, makefile

我正在尝试在共享服务器上安装 git（没有 root 访问权限或编译器），方法是在我自己的机器（运行 Arch Linux）上静态构建它，并使用与服务器相同的处理器架构（x86_64），如[本指南](http://www.lyraphase.com/wp/projects/how-to-build-git-for-a-host-with-no-compiler/)中所述。

当我运行时`make`，我总是遇到这些错误和失败：

```
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../lib/libcrypto.a(dso_dlfcn.o): In function `dlfcn_globallookup':
(.text+0x19): undefined reference to `dlopen'
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../lib/libcrypto.a(dso_dlfcn.o): In function `dlfcn_globallookup':
(.text+0x2c): undefined reference to `dlsym'
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../lib/libcrypto.a(dso_dlfcn.o): In function `dlfcn_globallookup':
(.text+0x37): undefined reference to `dlclose'
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../lib/libcrypto.a(dso_dlfcn.o): In function `dlfcn_bind_func':
(.text+0x364): undefined reference to `dlsym'
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../lib/libcrypto.a(dso_dlfcn.o): In function `dlfcn_bind_func':
(.text+0x422): undefined reference to `dlerror'
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../lib/libcrypto.a(dso_dlfcn.o): In function `dlfcn_bind_var':
(.text+0x494): undefined reference to `dlsym'
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../lib/libcrypto.a(dso_dlfcn.o): In function `dlfcn_bind_var':
(.text+0x552): undefined reference to `dlerror'
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../lib/libcrypto.a(dso_dlfcn.o): In function `dlfcn_load':
(.text+0x5c2): undefined reference to `dlopen'
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../lib/libcrypto.a(dso_dlfcn.o): In function `dlfcn_load':
(.text+0x62d): undefined reference to `dlclose'
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../lib/libcrypto.a(dso_dlfcn.o): In function `dlfcn_load':
(.text+0x65a): undefined reference to `dlerror'
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../lib/libcrypto.a(dso_dlfcn.o): In function `dlfcn_pathbyaddr':
(.text+0x6ef): undefined reference to `dladdr'
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../lib/libcrypto.a(dso_dlfcn.o): In function `dlfcn_pathbyaddr':
(.text+0x749): undefined reference to `dlerror'
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../lib/libcrypto.a(dso_dlfcn.o): In function `dlfcn_unload':
(.text+0x7aa): undefined reference to `dlclose'
collect2: error: ld returned 1 exit status
make: *** [git-imap-send] Error 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T23:16:13.857

我终于发现[了一个不同的指南](http://en.newinstance.it/2011/02/27/how-to-create-a-statically-linked-version-of-git-binaries/)，它建议运行一个稍微不同的 .configure 命令。最终对我有用的是[这个指南](http://www.lyraphase.com/wp/projects/how-to-build-git-for-a-host-with-no-compiler/)，除了跑步

`$ ./configure --prefix=/home/myuser/git-static CFLAGS="${CFLAGS} -static" NO_OPENSSL=1 NO_CURL=1`

在第 2 步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T02:28:36.297

`LDFLAGS`用于链接器标志。`LIBS`用于链接库。混淆它们通常不是问题，但在静态库的情况下或当链接器`--as-needed`启用选项时，库的顺序很重要，并且`-l`在使用它的库之前传递的任何内容都将被忽略。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T00:12:50.130

错误消息表明它找不到的定义

```
dlclose
dlerror
dleopen 
```

您需要确保您的 makefile`-ldl`在链接应用程序时具有。

# jquery - jQuery 幻灯片在 Chrome 中不能正常工作，但在 Firefox 上很好

> ID：14698014
> 
> 赞同：0
> 
> 时间：2013-02-05T00:05:55.270
> 
> 标签：jquery, html, css

我使用 WOWSlider 在我的网页中添加了一个 jQuery 过渡幻灯片。它在 Firefox 上运行良好。但是在谷歌浏览器上，当图像更改为下一个时，它会闪烁并且运行不流畅。谁能帮我解释这是为什么？谢谢！非常感激！

[http://zeendesign.co.uk/smiledental.co.uk/SmileDental/SmileDental/](http://zeendesign.co.uk/smiledental.co.uk/SmileDental/SmileDental/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:14:19.247

它在我的 Chrome 上运行，最新版本：24.0.1312.57

# asp.net-mvc - 有没有人有一个很好的例子来说明具有多个不使用 EF 的存储库的工作单元？

> ID：14698018
> 
> 赞同：0
> 
> 时间：2013-02-05T00:06:18.743
> 
> 标签：asp.net-mvc, unit-of-work

我即将用 MVC3 实现工作单元模式。

我有：

**MVC 服务层 (BLL)**

**存储层**

**多种类型的数据库**

我希望我的服务层让 IUnitOfWork 由我的 IOC 容器传递给它。（这很容易，不是这个问题的一部分）。

所以我的服务层会这样做：（注意：这是伪代码）

```
(using unitOfWork)
{
   ProductSqlRepository.Update();
   PersonOracleRepository.Update();
   IUnitOfWork.Commit();
} 
```

我能找到的所有样本都使用 EF。虽然我的一个存储库可能使用 EF，但其他存储库可能不使用。

那么我的问题是，我是否可以在多个存储库中使用工作单元模式，这些存储库可能位于不同类型的数据库之上（即……EF、Oracle……其他）

因此，如果我想在一个工作单元调用中包装对 SQL 数据库和 Oracle 数据库的更新，那么工作单元就是这样做的方法。

正如我所提到的，我能找到的所有示例都是针对 100% EF 解决方案的，我需要混合搭配。

谢谢RuSs

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:00:52.667

UnitOfWork 范围本质上已经在 MVC 中定义，因为您的所有逻辑都在一个操作中完成。我见过的常见模式（以及我最终在我的应用程序中所做的）是通过您全局注册到应用程序的属性来处理您的工作单元，并处理设置您需要的任何工作单元逻辑（事务等）在该属性的`OnActionExecuting`and中。`OnActionExecuted`有一些注意事项，例如确保该操作不是子操作并检查 ModelState 错误，但在线上有这样的示例。另请注意，如果您没有在视图中专门使用视图模型，则在工作单元范围关闭后，您可能会遇到某些框架在视图中延迟加载数据的问题。

我的项目使用了 nHibernate，我将这两篇文章作为我实施的灵感。希望他们也能给你一些想法。

[http://ayende.com/blog/4809/refactoring-toward-frictionless-odorless-code-what-about-transactions](http://ayende.com/blog/4809/refactoring-toward-frictionless-odorless-code-what-about-transactions)

[http://slynetblog.blogspot.ca/2011/04/lightweight-nhibernate-and-aspnet-mvc.html](http://slynetblog.blogspot.ca/2011/04/lightweight-nhibernate-and-aspnet-mvc.html)

# java - Java NIO 服务器和 Python 异步客户端

> ID：14698020
> 
> 赞同：1
> 
> 时间：2013-02-05T00:06:34.520
> 
> 标签：java, python, sockets, nio, asyncore

我有以下 java NIO 服务器和一个 python asyncore 客户端。服务器打印“Accepted...\n”，但是，客户端的 handle_connect 永远不会被调用。有人可以帮我解决服务器出了什么问题并帮助我使用客户端连接到服务器吗？

Java NIO 服务器：

```
import java.net.InetAddress;
import java.net.InetSocketAddress;
import java.nio.channels.SelectionKey;
import java.nio.channels.ServerSocketChannel;
import java.nio.channels.SocketChannel;
import java.nio.channels.SelectableChannel;
import java.nio.channels.Selector;
import java.nio.ByteBuffer;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.Set;

class Server
{
    public Selector sel;
    public ServerSocketChannel ssc;
    public SocketChannel channel;
    public static void main(String[] args) throws Exception
    {
        Server s = new Server();
        s.openSocket(12000);
        s.run();
    }

    private void openSocket(int port) throws Exception
    {
        InetSocketAddress address = new InetSocketAddress("0.0.0.0", port);
        ssc = ServerSocketChannel.open();
        ssc.configureBlocking(false);
        ssc.socket().bind(address);
        sel = Selector.open();
        ssc.register(sel, SelectionKey.OP_ACCEPT);
    }

    public void run() throws Exception
    {
        while (true)
        {
            sel.select();
            Set<SelectionKey> keys = sel.selectedKeys();
            Iterator<SelectionKey> i = keys.iterator();
            while (i.hasNext())
            {
                SelectionKey key = (SelectionKey) i.next();
                i.remove();
                if (!key.isValid())
                {
                    continue;
                }
                if (key.isAcceptable())
                {
                    channel = ssc.accept();
                    channel.configureBlocking(false);
                    System.out.println("Accepted...\n");
                    channel.register(sel, SelectionKey.OP_READ);
                }
                if (key.isReadable())
                {
                    if (channel == key.channel())
                    {
                        System.out.println("Readable\n");
                        ByteBuffer buffer = ByteBuffer.wrap(new byte[1024]);
                        int pos = channel.read(buffer);
                        buffer.flip();
                        System.out.println(new String(buffer.array(), 0, pos));
                    }
                }
            }
        }
    }   
} 
```

Python异步客户端：

```
import socket
import select
import asyncore

class Connector(asyncore.dispatcher):
    def __init__(self, host, port):
        asyncore.dispatcher.__init__(self)
        self.buffer = "hi"
        self.create_socket()
        self.connect((host, port))

    def handle_connect(self):
        print("[]---><---[]") # not called <------------------

    def handle_read(self):
        pass

    def writable(self):
        len(self.buffer) > 0

    def handle_write(self):
        sent = self.send(self.buffer)
        print("[]--->" + self.buffer[0:sent])
        self.buffer = self.buffer[sent:]

    def handle_close(self):
        print("[]...x...[]")
        self.close()

connector = Connector("localhost", 12000, Handler())
asyncore.loop() 
```

Python正常工作客户端：

```
# Echo client program
import socket
import sys

HOST = 'localhost'    # The remote host
PORT = 12000              # The same port as used by the server
s = None
for res in socket.getaddrinfo(HOST, PORT, socket.AF_UNSPEC, socket.SOCK_STREAM):
    af, socktype, proto, canonname, sa = res
    try:
        s = socket.socket(af, socktype, proto)
        print("socket")
    except OSError as msg:
        s = None
        continue
    try:
        s.connect(sa)
        print("connected")
    except OSError as msg:
        s.close()
        s = None
        continue
    break
if s is None:
    print('could not open socket')
    sys.exit(1)
print("Sending")
s.sendall(bytes("Hey server", "UTF-8"))
data = s.recv(1024)
#    s.close()
print('Received', repr(data)) 
```

**编辑**向 Java 添加了 isReadable 并添加了正常工作的 python 客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:11:07.230

您在实现其中一种乏味的异步方法时犯了两个错误：

```
def writable(self):
    len(self.buffer) > 0 
```

此方法返回`None`（因为您忘记了`return`该语句的一部分）。第一个错误是`None`具有错误的布尔值，因此`Connector`永远不会被认为是可写的。第二个错误是您需要在尝试建立连接期间检查可写性。由于`writable`总是返回 false，包括在连接尝试期间，所以在建立连接方面没有取得任何进展。

我建议改为查看[Twisted 。](http://twistedmatrix.com/)它不会让您自己实现低级缓冲区管理和连接设置代码，因此实际上会产生更高效的代码，这些代码更短且更容易编写。

asyncore 应该真正被视为历史文物，从未实际使用过。

# .net - .NET、Silverlight Outlook COM。我有什么方法/属性？

> ID：14698022
> 
> 赞同：0
> 
> 时间：2013-02-05T00:07:05.520
> 
> 标签：.net, silverlight, com, outlook

如果我做类似 var v = AutomationFactory.CreateObject("Outlook.Application"); 在 .NET 中，它为我创建了一个可用的对象。

我的问题是我怎么知道我在这个对象上有什么属性和方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:12:07.527

你的意思是你需要动态发现方法和属性吗？
或者你只是想知道什么是可用的？在后一种情况下，请查看[Outlook 文档](http://msdn.microsoft.com/en-us/library/office/ff863377.aspx)或使用[OutlookSpy](http://www.dimastr.com/outspy)浏览实时 Outlook 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T00:12:13.013

您可以查看 MSDN 上的 Outlook 对象模型文档。

[http://msdn.microsoft.com/en-us/library/ff870599(v=office.14).aspx](http://msdn.microsoft.com/en-us/library/ff870599(v=office.14).aspx)

# python - QScrollWidget 中的 PyQt4 + matplotlib

> ID：14698027
> 
> 赞同：1
> 
> 时间：2013-02-05T00:07:25.330
> 
> 标签：python, matplotlib, pyqt4, pyside

我已经`matplotlib`嵌入`PyQt4`到我正在开发的应用程序中。问题是当我向图中动态添加子图时，每个添加的子图都会压缩数字。我想我可以通过将数字设置为 a 来解决这个问题，`QScrollArea`但这不起作用（据我所知）。这是我认为可行的示例

```
import os
os.environ['QT_API'] = 'pyside'

from PySide.QtGui   import *
from PySide.QtCore  import *

import matplotlib

from matplotlib.backends.backend_qt4agg import FigureCanvasQTAgg
from matplotlib.figure                  import Figure

class Canvas(FigureCanvasQTAgg):

    def __init__(self, parent=None):
        self.figure = Figure()
        super(Canvas, self).__init__(self.figure)

        ax = self.figure.add_subplot(1,1,1)
        ax.plot([1,2,3])
        self.draw()

    def add_subplot(self, data=[]):
        rows = len(self.figure.axes) + 1
        for index, axes in enumerate(self.figure.axes, start=1):
            axes.change_geometry(rows, 1, index)

        ax = self.figure.add_subplot(rows, 1, index+1)
        ax.plot(data)

        self.draw()

class Main(QWidget):

    def __init__(self, parent=None):
        super(Main, self).__init__(parent)

        self.canvas = QScrollArea(self)
        self.canvas.setWidget(Canvas(self))
        self.canvas.setWidgetResizable(True)

        for x in range(5):
            self.canvas.widget().add_subplot()

        layout = QVBoxLayout(self)
        layout.addWidget(self.canvas)

app = QApplication([])
main = Main()
main.show()
app.exec_() 
```

注意到所有的图表是如何被拼凑在一起以显示在同一个可见空间中的吗？我不必滚动查看其他图表。我不确定该怎么做。

任何人都知道如何做到这一点或这样做的另一种方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:24:12.007

两个步骤来勾勒解决这个问题的想法：

取消设置 ScollArea 的大小以显示滚动条。换行：

```
self.canvas.setWidgetResizable(True) 
```

至

```
self.canvas.setWidgetResizable(False) 
```

然后在添加子图时更改图形高度，因为画布将通过检查图形的大小来确定它的高度：

```
def add_subplot(self, data=[]):
    rows = len(self.figure.axes) + 1
    for index, axes in enumerate(self.figure.axes, start=1):
        axes.change_geometry(rows, 1, index)

    ax = self.figure.add_subplot(rows, 1, index+1)
    ax.plot(data)
    self.figure.set_figheight(self.figure.get_figheight()*1.25)
    self.draw() 
```

在 Main 你必须让 PySide 知道，它必须在滚动区域调整小部件的大小：

```
 for x in range(5):
        self.canvas.widget().add_subplot()
        self.canvas.widget().adjustSize() 
```

# java - 如何使 Spring SimpleFormController 与 HTTP Get 请求一起工作？

> ID：14698034
> 
> 赞同：0
> 
> 时间：2013-02-05T00:08:43.143
> 
> 标签：java, spring

我有 Spring SimpleFormController 目前适用于 POST 请求。我想将表单提交更改为 GET。所以我把html表单的method="post"改成了method="get"。

**更改后，我希望调用 processFormSubmission 方法。然而它不是。**

你能告诉我在这里做错了什么吗？

```
import org.springframework.web.servlet.mvc.SimpleFormController;

public class VehicleDescController extends SimpleFormController
{
    protected ModelAndView processFormSubmission(
        final HttpServletRequest request, final HttpServletResponse response,
        final Object command, final BindException errors) throws Exception
    {
        ....
    }
}

    <bean name="/vehicleDesc.html"
class="com.xxx.VehicleDescController">
    <property name="commandName" value="lotSeller"/>
    <property name="commandClass" value="com.xxx.LotSeller"/>
    <property name="formView" value="xxxTheBasics"/>
    <property name="viewName" value="xxxVehicleDesc"/>
    <property name="imageUploadViewName" value="imageUpload"/>
    <property name="vixErrorView" value="xxxVIXError"/>
    <property name="assignmentEntryService" ref="xxxService"/>
    <property name="referenceDataService" ref="referenceDataService"/>
    <property name="xxxReferenceDataService" ref="xxxReferenceDataService"/>
    <property name="messageSource" ref="messageSource"/>
    <property name="xxxService" ref="xxxService"/>
    <property name="validator" ref="xxxEntryValidator"/>
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:18:25.437

一个简单的：

```
@Override
protected boolean isFormSubmission(HttpServletRequest request) {
    return true;
} 
```

将告诉它始终遵循控制器的提交工作流程。显然，如果此 URL 中同时存在“提交”和“正常”GET，您将必须检查请求并找出差异！

# asp.net-mvc-4 - 带有约束的自定义路由 MVC4

> ID：14698035
> 
> 赞同：1
> 
> 时间：2013-02-05T00:08:44.350
> 
> 标签：asp.net-mvc-4, asp.net-routing

我有一个 MVC 4 应用程序，我想为各个控制器创建自定义路由。目标只是不在 url 中显示操作名称，而仅显示控制器名称和参数。

```
 routes.MapRoute(
               "Account", // Route name
               "Account/{param}", // URL with parameters
               new { controller = "Account", action = "Account", param = UrlParameter.Optional }, // Parameter defaults
               new { controller = @"^(Account)$" } //Parameter constraints

               );
 routes.MapRoute(
               "Login", // Route name
               "Login/{returnurl}", // URL with parameters
               new { controller = "Login", action = "Login", returnurl = UrlParameter.Optional }, // Parameter defaults
               new { controller = @"^(Login)$" }  //Parameter constraints
               );

routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            ); 
```

目前我正在使用上面的这条路线，它工作正常，直到我调用另一个未在每个根的默认参数/url中指定的操作。

例如，到 Login/Login 或 Login/Login?somevalue 的路由按预期工作，根本不显示 url Logn 或 Login/somevalue 中的操作。但是，一旦请求同一控制器中的另一个操作，该路由就会解析为例如登录/登录/注销。为什么当我设置路由以匹配登录控制器的所有请求时会发生这种情况？控制器中的所有动作都有 returnurl 参数

如果有人可以花时间查看我的路线，将不胜感激对此事的解释或澄清。

任何帮助或想法都会很好。提前致谢。

# c - 如何单独处理字符串中的每个字符？

> ID：14698036
> 
> 赞同：0
> 
> 时间：2013-02-05T00:08:51.663
> 
> 标签：c

我正在尝试运行一个单词比较程序，但我无法阻止 for 循环以某种方式添加到我要比较的字符中。

```
for(m = 0; m < wordSize; ++m)
{
    a = l + m + 1;
    if(word[m] != message[a])
    {
        printf("Falsified by not word match: message[%d] = '%s' and '%s'\n", a, (char *)&message[a], (char *)&word[m]);
        i = 0;
    }
} 
```

这给了我一些`Falsified by not word match: message[1] = ' a a a' and 'a'`信息，如果消息是`'a a a'`并且匹配的单词是`'a'`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:30:42.457

当您使用`print()`并传递一个字符串时`%s`，您将看到字符串中的所有内容，直到字符串结尾。字符串的结尾标有“NUL”字符，ASCII 0。在 C 中，这是`\0`.

您正在查看字符，但随后您的错误消息正在打印字符串，并且打印的内容超出了您的预期。

要使其仅打印不同的字符，请使用`%c`格式代码，如下所示：

```
printf("Falsified by not word match: message[%d] = '%c' and '%c'\n", a, message[a], word[m]); 
```

# mysql - MySQL 连接会完成这个吗

> ID：14698037
> 
> 赞同：1
> 
> 时间：2013-02-05T00:08:53.227
> 
> 标签：mysql, join

我有一个表格，其中包含正在审核的列表，另一个表格记录了已审核的列表以及审核日期

我试图弄清楚是否有可能形成一个 mysql 查询，它允许我只输出尚未审查的列表（即审查表中没有该列表的条目）。

所以在下面的例子中。我想查询列表以查找尚未审核的任何内容。在这种情况下，它只会返回第一个列表 (id#1)，因为其他两个列表已经过审核。这是否应该通过 MySQL 连接来完成？

```
Listings Table:

id|title
1|First Listing
2|Second Listing
3|Third Listing
etc.

Reviewed Table:

id|listing_id|review_date
1|2|2013_02_05
2|3|2013_02_05 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:11:12.690

你可以像这样使用`LEFT JOIN`和`NULL`：

```
SELECT L.*
FROM Listings L
  LEFT JOIN Reviewed R ON L.Id = R.Listing_Id
WHERE R.Id IS NULL 
```

或者您可以使用`NOT IN`：

```
SELECT L.*
FROM Listings L
WHERE ID NOT IN (SELECT Listing_ID FROM Reviewed) 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!2/4da7a/4)。

祝你好运。

# php - PHP OOP在同一类中构造类属性表单方法

> ID：14698038
> 
> 赞同：0
> 
> 时间：2013-02-05T00:08:54.913
> 
> 标签：php, class, methods, construct

由于某种原因，我无法让它工作：

```
<?php 
class Number{
    public $number;
    public $number_added;

    public function __construct(){
        $this->number_added = $this->add_two();
    }

    public function add_two(){
        return $this->number + 2;
    }
}   
?> 
```

`$this->number`从数据库设置，`$this->number_two`应该是 DB 值 + 2。但是，当我 echo 时`$this->number_added`，它返回两个。该`$number`值已正确初始化。这是我的问题的一个简化示例，只是为了看看我想要做的事情是否可行？PHP OOP 初学者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T00:12:34.577

在使用之前（通过构造函数），您没有在`$number`任何地方设置属性`add_two()`，因此 PHP`0`在添加期间对其进行评估。

例如，您应该在对象构造期间传入初始状态

```
public function __construct($number) {
    $this->number = $number;

    $this->number_added = $this->add_two();
} 
```

## 更新

请允许我说明问题。这是您当前的代码以及我想象您如何使用它

```
$number = 2;

$obj = new Number();
// right here, $obj->number is null (0 in a numeric sense)
// as your constructor calls add_two(), $obj->number_added is 2 (0 + 2)

$obj->number = $number;
// now $obj->number is 2 whilst $obj->number_added remains 2 
```

使用我更新的构造函数，这就是发生的事情

```
$number = 2;

$obj = new Number($number);
// $obj->number is set to $number (2) and a call to add_two() is made
// therefore $obj->number_added is 4 
```

# javascript - 如何在jQuery删除时保持奇数/偶数元素左或右？

> ID：14698041
> 
> 赞同：2
> 
> 时间：2013-02-05T00:09:23.940
> 
> 标签：javascript, jquery, html, css, css-selectors

我有这个代码：

**CSS：**

```
.wrapper{width:400px}
.wrapper div{width:200px}

.odd {float:left}
.even {float:right} 
```

**HTML：**

```
<div class="wrapper">
    <div>Odd</div>
    <div>Even</div>
    <div>Odd</div>
    <div>Even</div>
    <div>Odd</div>
    <div>Even</div>
</div> 
```

**jQuery：**

```
$('.wrapper').each(function() {
    var $children = $(this).children(),
    $item;
    $children.each(function(i) {
       $item = $(this).addClass(i % 2 === 0 ? 'odd' : 'even')
    });
}); 
```

正如您所期望的那样工作。

我的问题是，当一个元素被 jQuery 删除时，如何保留`.odd`元素`left`和`.even`元素？`right``.remove()`

我已经尝试过了，但它显然不起作用：

```
$('.wrapper div').click(function(){
  $(this).fadeOut(function(){
    $(this).siblings().removeClass('odd');
    $(this).siblings().removeClass('even');

        $('.wrapper').each(function() {
            var $children = $(this).children(),
            $item;
            $children.each(function(i) {
                $item = $(this)
                .addClass(i % 2 === 0 ? 'odd' : 'even')
            });
        });

    $(this).remove();
  });
}); 
```

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T00:15:45.250

尝试使用[偶数](http://api.jquery.com/even-selector/)和[奇数](http://api.jquery.com/odd-selector/)选择器。**更新：**如果你使用`position`属性，当其他元素被移除时元素不会漂浮。

[**这是工作的jsFiddle。**](http://jsfiddle.net/edVh6/9/)

**jQuery：**

```
var boxHeight = $(".wrapper div").height();
$(".wrapper div:even").addClass("even");
$(".wrapper div:odd").addClass("odd");
//this initualise once after page load, so values won't change/update on click

$(".wrapper div").each(function(i){
    if ( i === 2 || i === 3 ) { $(this).css('top', boxHeight +'px'); }
    if ( i === 4 || i === 5 ) { $(this).css('top', 2*boxHeight +'px'); }
});

$(".wrapper div").click(function(){ $(this).remove(); }); 
```

**CSS：**

```
.wrapper{position:relative;left:0;top:0;}
    .wrapper div{position:absolute;top:0;}
        .wrapper .even{ left:0; }
        .wrapper .odd{ right:0; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T00:19:55.690

您可以避免使用 javascript 并使用 CSS nth-child

```
div.wrapper:nth-child(odd) {
    color: red;
    float:right;
}
div.wrapper:nth-child(even) {
    color:blue;
    float:left;
} 
```

# javascript - 未选择中频电台

> ID：14698042
> 
> 赞同：0
> 
> 时间：2013-02-05T00:09:24.880
> 
> 标签：javascript, if-statement, error-handling

我在一个电子商务网站上工作，我遇到了麻烦。

我想检查用户是否选择了其中一种尺寸：

```
var radios = $('input[name=product1]:checked').val();

IF (radios !=='1' || radios !=='2' || radios !=='3' ){
  errorMsg += '- Please Choose a Size \n';
} 
```

它不起作用，我不知道为什么。我已经研究过了，并没有找到解决问题的好方法。

这是发生的事情：当我单击其中一个单选按钮时，它似乎没有抓住它。无论我做什么，if 语句都会返回 true。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T00:16:12.697

你不需要`&&`，`||`现在你的 if 语句总是错误的！

```
if (radios !=='1' && radios !=='2' && radios !=='3' ){
  errorMsg += '- Please Choose a Size \n';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T00:30:27.497

我认为这样做的更好方法..您可以将`length`and equal 属性选择器与`:checked`过滤器选择器一起使用，如下所示：

```
if ($("input[name='product1']:checked").length > 0){
  // one or more checkboxes are checked
}
else{
 // no checkboxes are checked
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T00:15:49.680

您可以通过以下方式获取值：

```
 $('input:radio[name=Product1]:checked').val(); 
```

并将您的 IF 条件更改为使用 AND( `&&`) 而不是 OR( `||`)。

# javascript - 修复表格单元格的高度

> ID：14698043
> 
> 赞同：0
> 
> 时间：2013-02-05T00:09:26.123
> 
> 标签：javascript, html, css

所以，我想做的是在一个单元格中有一个列表，其中添加了项目，在它达到一定高度后，停止它并出现一个滚动条。如何创建具有固定高度的 td？到目前为止，我有：

```
<tr>
  <td valign='top' height="200px" border="1">
    <ul id="travelList" align='left'></ul>
  </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T00:20:48.630

我会把你`<ul>`放在一个有溢出自动和最大高度的 div 里面。像这样：

```
<tr>
  <td valign="top" border="1">
    <div style="overflow:auto;max-height:200px">
      <ul id="travelList" align="left"></ul>
    </div>
  </td>
</tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T00:10:42.860

尝试添加：

```
style="max-height:200px" 
```

注意：未经测试，但这是你开始的地方，所以谷歌 CSS max-height 来获得关于高度如何工作的更多细节。

# actionscript-3 - 用于从模型生成表单的 AS3 API

> ID：14698051
> 
> 赞同：0
> 
> 时间：2013-02-05T00:10:26.127
> 
> 标签：actionscript-3, apache-flex

在开始自己制作之前，我在网上快速搜索了一下。我想编写一个模型类，为其添加一些注释并生成一个表单和/或将其设置为某个组件的属性，该组件将为 CRUD 操作构建一个表单。我发现既没有源代码也没有 .swc 可以使用和尝试。有谁知道我在哪里可以找到像这样的 AS3 API 以及其他可能对 Flex/AS3 制作的 Enterprise Software 有用的 API？谢谢。

# java - Genson 可以处理对象上的通用嵌套字段吗？

> ID：14698055
> 
> 赞同：0
> 
> 时间：2013-02-05T00:11:00.133
> 
> 标签：java, json, jersey, genson

基本上，我有一些 Java 对象，我希望尽可能少地把它们序列化为 JSON。现在我正在使用 Tomcat、Jersey 和 Genson。

我发现这样的事情对 Genson 不起作用（当然，这是一个玩具示例）：

```
public class Main {
    public static void main(String[] args) {
        MyClass mc = new MyClass();
        mc.mapOfSets = new HashMap<>();
        Set<String> set0 = new HashSet<>();
        set0.add("0");
        Set<String> set1 = new HashSet<>();
        set1.add("1");
        set1.add("11");
        Set<String> set2 = new HashSet<>();
        set2.add("2");
        set2.add("22");
        set2.add("222");
        mc.mapOfSets.put("set0", set0);
        mc.mapOfSets.put("set1", set1);
        mc.mapOfSets.put("set2", set2);
        try {
            String json1 = new Genson().serialize(mc.mapOfSets);
            System.out.println(json1);
            String json = new Genson().serialize(mc);
            System.out.println(json);
        } catch (TransformationException | IOException e) {
            e.printStackTrace();
        }
    }
}

class MyClass {
    public Map<String, Set<String>> mapOfSets;
} 
```

上面的输出是这样的：

```
{"set1":["1","11"],"set0":["0"],"set2":["2","222","22"]}
{"mapOfSets":{"empty":false}} 
```

Genson 的优点在于我只是将它放在了我的 WebContent 文件夹中，它被用来代替 Jersey 捆绑的任何东西——不需要额外的配置。如果有一种非常直接的方法可以让像上面这样的对象序列化为 JSON，而不必为每个模式编写某种转换器，我很乐意将它与 Jersey 而不是 Genson 一起使用，但 Genson 并没有因此让我失望远远不足。

那么 - 我如何按摩 Genson 以正确序列化 - 或者什么是无痛处理这类事情的库？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T08:53:35.910

我是 Gensons 的作者。我刚刚检查过，这是一个错误，除此特殊情况外，泛型在 Genson 中工作正常……如果你能等到明天，我将在今晚推出一个新版本，其中包含修复和一些小的新功能。完成后我会更新我的答案。

**编辑**错误更正并将发布 0.94 推送到公共 maven 存储库，它应该在最多几个小时内可用。以下是[此版本中的一些更改](http://code.google.com/p/genson/wiki/Changelog)。请尝试并确认它是否能解决您的问题。谢谢 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T01:41:31.480

我正在使用 Guice 来处理我的依赖注入需求，这就是为什么我很难让 Jackson 与我的 Jersey 项目集成。由于 Genson 没有做我想做的事，我决定再次尝试 Jackson。我尝试改变几件事，直到它起作用，在 SO 和 Google 上尝试不同的建议。

现在下面给出了我的沙盒项目中预期的输出：

```
ObjectMapper mapper = new ObjectMapper();
AnnotationIntrospector introspector = new JaxbAnnotationIntrospector();
mapper.getSerializationConfig().setAnnotationIntrospector(introspector);
String jsonData = mapper.writeValueAsString(mc);
System.out.println(jsonData); 
```

* * *

```
{"mapOfSets":{"set1":["1","11"],"set0":["0"],"set2":["2","222","22"]}} 
```

# php - 求和（属性“field1”+属性“field2”），然后求和所有结果的行

> ID：14698056
> 
> 赞同：2
> 
> 时间：2013-02-05T00:11:02.587
> 
> 标签：php, mysql

标题没有说太多，所以我在这里尝试解释一下。

我有一张桌子，

```
+------------+---------+------+-----+---------+----------------+
| Field      | Type    | Null | Key | Default | Extra          |
+------------+---------+------+-----+---------+----------------+
| id         | int(11) | NO   | PRI | NULL    | auto_increment |
| field1     | int(11) | NO   |     | NULL    |                |
| field2     | int(11) | YES  |     | NULL    |                |
+------------+---------+------+-----+---------+----------------+ 
```

并显示结果，

```
$sql = "SELECT field1, field2 FROM tbl WHERE field1 = '$id' OR field2 = '$id'"; 
```

它将结果列为 long field = id。

直到这一部分，一切正常。我需要对这些返回行的结果求和。$id 是从用户单击的预定义列表生成的动态值。

我想要的是对 field1+field2 求和，并在 id 更改时正确过滤它们。

我现在的结果看起来像这样，

```
id    |   sum( field1+field2)
----------------------------
1     |    10
50    |    22
13    |    80 
```

我想求和（10+22+80）。如前所述，显示的 id 或行数是动态的。根据用户选择进行更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T00:19:41.297

如果您想要多行，每行都有一个总数，请使用：

```
$sql = "SELECT (field1+field2) as the_row_total FROM tbl WHERE field1 = '$id' OR field2 = '$id'"; 
```

如果您想要总体总计，请使用：

```
$sql = "SELECT SUM(field1+field2) as the_grand_total FROM tbl WHERE field1 = '$id' OR field2 = '$id'"; 
```

注意：我假设您已经对`$id`. 如果没有，你就[站在了地雷上](http://en.wikipedia.org/wiki/SQL_injection)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T08:22:46.133

假设我们有一个名为**tbl**的表：

```
id    |    field1    |    field2
--------------------------------
1     |    6         |    4
50    |    10        |    12
13    |    41        |    39 
```

* * *

关于您的问题的 SQL 查询：

```
$sql = "SELECT field1, field2 FROM tbl WHERE field1 = '$id' OR field2 = '$id'"; 
```

当变量**$id**的值为*"1"*时`$id = 1;`，结果将是：

```
MySQL returned an empty result set (i.e. zero rows). 
```

* * *

现在，如果属性**field1**的值为*"6"*且属性**field2**的值为*"39"*，结果将是：

```
id    |    field1    |    field2
--------------------------------
1     |    6         |    4
13    |    41        |    39 
```

* * *

但是如果你的 SQL 查询是这样的：

```
$sql = "SELECT field1, field2 FROM tbl WHERE id = '$id'"; 
```

并且变量**$id**保存值*"0"*，那么结果将是：

```
id    |    field1    |    field2
--------------------------------
50    |    10        |    12 
```

因为在该行的属性**id**的值*“50”处有一个**“0”*零。

 **** * *

现在，您是否想对*(field1 + field2)*求和，如下表所示：

```
id    |    sum(field1+field2)
-----------------------------
1     |    10
50    |    22
13    |    80 
```

那么，您的意思是您的 SQL 查询有多个`OR`运算符，例如：

```
$sql = "SELECT field1, field2 FROM tbl WHERE field1 = '$field1' OR field2 = '$field2' OR field1 = '$field3'"; 
```

或这个：

```
$sql = "SELECT field1, field2 FROM tbl WHERE id = '$id1' OR id = '$id2' OR $id = '$id3'"; 
```

你的问题是什么意思？

* * *

我只是假设您想要对所有具有属性**field1**或属性**field2的行求和***（field1 + field2）* ，该属性的值与其数据匹配：

 ****```
$sql = "SELECT id , ( field1 + field2 ) AS `sum(field1+field2)` FROM tld WHERE field1 = '$field1' OR field2 = '$field2'"; 
```

**如果变量$field1**的值为*"6"*且变量**$field2**的值为*"39"*，则表格结果将如下所示：

```
id    |    sum(field1+field2)
-----------------------------
1     |    10
13    |    80 
```

考虑到我们假设的表格数据在最上面！因为值为“6”的*field1***与**field2**的**值为*“4”*有关系，因此*(6 + 4)*之和为10。而*(field1的值41 + field2的值39)之*和是 80。现在，您想对属性**sum(field1+field2)**的行中提到的*(10 + 80)*求和吗？我们可以使用 PHP 脚本来处理它，如果你使用的是 MySQL，就像这样：

 *******```
<?php
$connection = mysqli_connect($host, $user, $password, $database);

$sql = "SELECT id , ( field1 + field2 ) AS `sum(field1+field2)` FROM tld WHERE field1 = '$field1' OR field2 = '$field2'";

$result = mysqli_query($connection, $sql);

while($row = mysqli_fetch_array($result)) {
    $sum += $row['sum(field1+field2)'];
}

echo 'The sum is: ' . $sum;
?> 
```

你可以测试它是否可以工作..**************

# mediawiki - 通过 URL 参数持久化 Mediawiki 皮肤

> ID：14698059
> 
> 赞同：1
> 
> 时间：2013-02-05T00:11:14.620
> 
> 标签：mediawiki

我试图让我的 Mediawiki wiki 的用户根据偏好维护自己选择的皮肤，同时确保如果将`useskin`参数添加到 URL，则对该窗口中页面的后续请求将持续存在（即， page 还将包含`useskin`参数等）——但不会干扰未使用参数的页面的缓存（即，访问页面的用户`useskin`不会看到缓存的 URL，`useskin`反之亦然）。

有一个持久化`useskin`参数[PersistUseskin](http://www.mediawiki.org/wiki/Extension:PersistUseskin)的扩展，但它似乎没有创建单独的缓存。

（我的目的是允许我的网站的 iframe 导航使用裸露的皮肤（因此可以在小空间中看到更多页面），而不会在用户访问我的网站时干扰用户的皮肤偏好。）

请注意，我对特定于页面或特定于名称空间的皮肤不感兴趣（正如[在 MediaWiki 中讨论的那样，是否有一种方法可以强制一组页面具有特定的皮肤？](https://stackoverflow.com/questions/853749/in-mediawiki-is-there-a-way-to-force-a-group-of-pages-to-have-a-particular-skin)）。我只是想要一个 URL 参数来永久保存该窗口的皮肤信息（仅），而不管页面如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:08:02.303

我怀疑这里最简单的做法实际上是编写一些 Javascript 来检测 useskin 参数的存在，然后确保 UI 中显示的每个链接都有 ?useskin= 附加到 URL。这可能是确保 UI 中的所有链接都具有 useskin 参数的最轻量级/最简单的方法。这也应该有助于将此行为限制在 iframe 中。你可以创建一个[轻量级的扩展](http://www.mediawiki.org/wiki/Manual%3aDeveloping_extensions)来提供 JS，或者你甚至可以使用[Mediawiki:Common.js](http://www.mediawiki.org/wiki/Common.js)来保存 JS。

您提到您希望这样做“不干扰未使用参数的页面的缓存”。你在说什么样的缓存？如果您使用基本的反向代理缓存，如 squid 或 varnish，它们自然会独立缓存具有不同 URL 的页面。因此， http: [//foo.com/index.php](http://foo.com/index.php)和[http://foo.com/index.php?useskin=awesome](http://foo.com/index.php?useskin=awesome)将被不同地缓存。

# multithreading - 同步向量-java server

> ID：14698063
> 
> 赞同：0
> 
> 时间：2013-02-05T00:11:28.667
> 
> 标签：multithreading, jsp, vector, synchronization

所以我正在根据 MVC Pattern 建立一个网站。我使用 Eclipse/Tomcat。

我有一个 PostAccess 类，它从数据库中检索我的帖子，它创建一个包含 PostBean 项目的向量。servlet 将向量提供给 jsp 文件，而 jsp 文件创建 html 等。

我的问题是不止一个线程与向量交互，所以我在 eclipse 上得到了这个：

```
java.util.NoSuchElementException
at java.util.Vector$Itr.next(Unknown Source) 
```

正如我从谷歌搜索中了解到的，这个错误是因为没有同步编辑向量的线程。

但是我到底应该在哪里进行同步？

此代码在我的 PostAccess 类中：

```
public synchronized Vector<Post> RetrievePosts() throws SQLException
{ 
```

向量 c = (Vector)(new Vector());return c; }

这是在我的 Servlet 类中：

```
public synchronized  void process(ServletContext servletContext,HttpServletRequest request, HttpServletResponse response) 
{
    Vector<Post> c = (Vector<Post>)(new Vector<Post>());

    try {
        PostDAO pDAO=new PostDAO(servletContext);

        c=(Vector<Post>) pDAO.RetrievePosts();

    } catch (ClassNotFoundException | SQLException e) {

        e.printStackTrace();
    }
    request.setAttribute("posts", c);
} 
```

这是在我的jsp中：

```
<% Vector<Post> c =(Vector<Post>)request.getAttribute("posts");

Iterator<Post> i = c.iterator();  
herePost p=(Post)i.next();

                        while (!c.isEmpty()) { %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:27:05.160

我不认为两个线程在同一个 Vector 上工作，因为在您显示的代码中 Vector 是在 process 方法中声明的（我假设那是 doGet 调用的那个），因此它是线程私有的处理请求。因此，除非 PostAccess 中发生了一些非常时髦的事情，否则我认为您可以排除线程破坏 Vector 的可能性。

但是，这看起来可能是问题的原因：

```
Iterator<Post> i = c.iterator();  
herePost p=(Post)i.next(); 
```

如果向量一开始是空的，那将导致 java.util.NoSuchElementException 因为 isEmpty() 测试在之后完成。

# c - 这是正确的吗？（在 C 中读取文件）

> ID：14698070
> 
> 赞同：0
> 
> 时间：2013-02-05T00:12:21.357
> 
> 标签：c, file-io

对于我的任务，我必须创建一个类似于 -wc unix 命令的程序来计算单词、行等。

我必须读入标志并读入文本文件。

我已经设置了所有标志，现在我正在尝试读取文本文件。我不认为我这样做是正确的。

```
void readInFile(char** argv, int arg)
{
   FILE *myFile;
   char c;

   myFile = fopen(argv[arg], "r");
   if(!myfile)
   {
      printf("%s not found!", argv[arg]);
      exit(EXIT_FAILURE);
   }
} 
```

在我的 main 中，我调用函数 readInFile() 并传递 2 个参数。Argv 和文件所在的元素。所以假设这是正确的。

我需要帮助才能实际打开文件。我觉得我的 fopen() 是错误的。我是 C 中读/写文件的新手。非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T00:25:50.543

我将在这里给你一些一般性的建议。

通常函数应该做一项工作。在这种情况下，您正在编写一个读取单个文件的函数。因此，不要将指针传递给所有命令行参数；传入一个指向要打开的文件名的只读指针。然后`main()`选择正确的参数并将其作为参数传递。

```
void readInFile(char const *filename) 
```

现在，如果这个函数将读取文件并且什么都不做，它需要以某种方式返回数据。但是如果这个函数会做等价的，也许它会读取文件并打印东西，而不是向函数`wc`返回任何数据。`main()`那么也许名称应该改进：

```
void wordcount(char const *filename) 
```

对我来说，实际调用`fopen()`看起来不错。

您检查错误，然后`exit()`立即调用。这是一种方法。另一种方法是从你的函数返回一个错误代码，让调用者（`main()`函数）检查失败，并在那里处理错误。

```
int wordcount(char const *filename)
{
    // ... do stuff
    if (failed)
        return 1;  // return nonzero error code on failure
    // ... do more stuff
    return 0;  // success code
}

int main(int argc, char const **argv)
{
    char const *filename;
    int result;

    filename = argv[1];
    result = wordcount(filename);
    if (result)
    {
        fprintf(stderr, "unable to open file '%s'\n", filename, result);
        exit(result);
    }
    return 0;
 } 
```

对于这么简单的程序，这并不重要。但是一旦你开始在软件中构建更大的系统，如果你的函数能很好地协同工作，你会更开心，其中一部分是制作返回错误代码的函数，而不是在任何错误时终止整个程序。

为什么我使用`0`成功代码，而非零用于失败？这是一种常见的方法。测试非零很容易，比如`if (result)`有很多非零代码但只有一个零，所以你可以返回许多不同类型的错误，但“成功”只需要一个值。

请注意，您可以只使用语句而不是调用`exit()`from 。当您从 中返回时，表示成功，非零值表示错误。因此，如果您愿意，可以使用from 。`main()``return``0``main()``return result;``main()`

在我的虚拟代码中，我只是`1`作为错误代码返回。但实际上，当你调用`fopen()`它时，它会在一个名为的全局变量中向你返回一个错误代码`errno`。可能更好的选择是让您的函数返回实际的错误代码，如`errno`. 您甚至可以修改`main()`函数 print`errno`代码中的 print 语句，或者使用该`strerror()`函数将该错误代码转换为人类可读的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T00:18:20.847

您对 fopen 的调用是正确的，假设它`argv[arg]`是一个有效字符串，它引用文件系统上存在的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T00:25:39.393

程序片段中有一个小错字。if(!myfile) 应该是 if(!myFile)。通过此更改，我认为代码应该可以工作。您能否详细说明您面临的错误？

PS：我试过你的程序，它似乎工作！

# git - 其他用户以某种方式覆盖了我的最新提交，我在历史中找不到它？

> ID：14698071
> 
> 赞同：0
> 
> 时间：2013-02-05T00:12:22.560
> 
> 标签：git, history

两天前，我用几行新代码更新了一个文件，但是在我最近一次拉取之后，这些更改完全消失了，并且 git log -p 没有此类更改/还原的历史记录...

有没有办法看看这是怎么发生的？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T00:21:00.577

找出发生了什么取决于您使用的 git 托管。诸如 github 和 bitbucket 之类的服务将跟踪谁推送了什么，并以一种非常易读的方式显示这些信息（只是*它*的显示方式取决于您的托管服务提供商）。否则，您可以尝试使用[服务器上的 reflog](http://feeding.cloud.geek.nz/posts/keeping-log-of-branch-updates-on-git/)来了解发生了什么。（虽然需要一些配置，所以它可能只是在将来有用）。

不过，就恢复您的工作而言，[请检查您的本地 reflog](http://gitready.com/intermediate/2009/02/09/reflog-your-safety-net.html)以查找丢失的提交。

**编辑**我应该提到，你很难以这种方式失去提交。其他用户将不得不强制推送到远程存储库，因为 git 否则会警告他们并且无法推送。即使他们这样做了，如果您在发生这种情况后尝试从存储库中提取，也会收到警告。我提出了这一切，因为如果你没有得到警告，你可能从来没有那些你认为你首先在那个分支上的提交

# c# - 使用 IValueConverter 屏蔽文本框输入而不丢失数据

> ID：14698072
> 
> 赞同：0
> 
> 时间：2013-02-05T00:12:22.703
> 
> 标签：c#, wpf, mvvm

我正在尝试创建一个文本框/IValueConverter，如果用户点击 1234 然后退格 3 次，它将向用户显示以下行。

```
1
*2
**3
***4
***
**
* 
```

目前我最大的问题是我丢失了数据，因为 IValueConverter 在我的 ViewModel 中保存了“***4”。

是否有任何常用策略可以在不使用常规 PasswordBox 的情况下屏蔽这样的输入数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:41:32.867

您可以创建一个虚拟对象`TextBlock`或`Label`显示蒙版，并将`TextBox`文本 coloe 设置为透明。通过这种方式，实际数据被保存到模型中，并且`*`只显示在标签中。

类似的东西（非常粗略的例子）

```
<Window x:Class="WpfApplication13.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication13"
        Title="MainWindow" Height="350" Width="525" Name="UI">
    <Window.Resources>
        <local:TextToStarConverter x:Key="TextToStarConverter" />
    </Window.Resources>
    <StackPanel>
        <Grid>
            <TextBox x:Name="txtbox" Foreground="Transparent" Text="{Binding MyModelProperty}" />
            <Label Content="{Binding ElementName=txtbox, Path=Text, Converter={StaticResource TextToStarConverter}}"  IsHitTestVisible="False" />
        </Grid>
    </StackPanel>
</Window> 
```

转换器（请忽略可怕的代码，它只是一个演示 :)）

```
public class TextToStarConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value is string && !string.IsNullOrEmpty(value.ToString()))
        {
            return new string('*', value.ToString().Length -1) + value.ToString().Last().ToString();
        }
        return string.Empty;
    }

   public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return null;
    }
} 
```

结果：

![在此处输入图像描述](../Images/6f9c238215b7b786d5bbd75b329b117a.png)

# java - Android：ListView 告诉我它已填充但未显示项目

> ID：14698077
> 
> 赞同：5
> 
> 时间：2013-02-05T00:12:51.717
> 
> 标签：java, android, listview, visibility, android-arrayadapter

所以我用谷歌搜索，并搜索了一个我认为可能是荒谬疏忽的答案，但这里有。

我有一个`ListView`我正在填充的一个`ArrayAdapter`我正在构建的对象列表，我在我的应用程序的其他地方使用它。我已经通过`getCount`在我调用之前和之后检查适配器中有项目`.setAdapter()`。但是，我的应用程序中没有显示任何内容。

我的主要布局`res/layout/playlistview`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/playlist_screen"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_weight="1"
android:background="#80000000"
android:gravity="center"
android:orientation="horizontal" >

<ListView
    android:id="@+id/playlistview"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:divider="#206"
    android:background="#602" >

</ListView>

</LinearLayout> 
```

（我设置了颜色，所以我可以更容易地看到发生了什么）

对于`textview`每个项目`res/layout/singlelistitem`：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/single_item"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textSize="16sp"
    android:padding="5dp" 
    android:background="#206">
</TextView> 
```

以及我用来填充它的代码：

```
private ListView playlistView;

private void buildPlaylistView() {
playlistView = (ListView)findViewById(R.id.playlistview);

ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.singlelistitem, R.id.single_item, playlist.titlesAsArray());

playlistView.setAdapter(adapter);

playlistView.setVisibility(View.VISIBLE);

adapter.notifyDataSetChanged();
((ArrayAdapter<String>)playlistView.getAdapter()).notifyDataSetChanged();
} 
```

`playlist.titlesAsArray()`确实返回`String[]`并且有效。

我两个都`.notifyDataSetChanged()`在那里，因为我在 SO 上找到了它并试了一下。

当我将XML`android:layout_height`中的对象中的 更改为 时，我只看到包装它的不透明背景。当我将 设置为时，整个屏幕都是（magentish）。`ListView``wrap_content``LinearLayout``ListView` `android:layout_height``match_parent``#206`

当我`getCount()`在适配器`setAdapter()`说有物品之前检查它时。当我之后检查它时，从视图本身来看，它说有相同数量的项目。我完全迷失了这个，但没有显示任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T00:40:31.703

尝试从更改`android:orientation="horizontal"`为`android:orientation="vertical"`这可能会解决。

# emacs - Elisp：在 ert 中运行测试时，sleep-for 不会阻塞

> ID：14698081
> 
> 赞同：3
> 
> 时间：2013-02-05T00:13:03.480
> 
> 标签：emacs, elisp, ert

我正在尝试使用需要休眠以使后台进程继续进行的 ert 设置一些测试。我试过使用`sleep-for`and `accept-process-output`。两者都不可靠。这是一个小例子。

此测试仅休眠 5 秒，然后检查是否至少经过了 3 秒。使用`sleep-for`它立即完成并失败。如果`shell-command`未注释，则需要预期的 5 秒并成功！这里发生了什么？

```
(ert-deftest timetest ()
  (let ((now (cadr (current-time))))
    ;(shell-command "sleep 5")
    (sleep-for 5)
    (should (< now (- (cadr (current-time)) 3))))) 
```

编辑：

当我测试前面的示例时，我的环境中一定有一些奇怪的东西。这个稍作改动的示例包含一个后台进程，就像我需要测试的那样，但失败了。我以交互方式和使用命令对其进行了测试：

```
emacs --batch -l example.el -f ert-run-tests-batch-and-exit 
```

```
(ert-deftest timetest ()
  (let ((now (cadr (current-time))))
    (start-process "echo" "*echo*" "echo" "hello world")
    (sleep-for 5)
    (should (< now (- (cadr (current-time)) 3))))) 
```

输出是：

```
Test timetest condition:
    (ert-test-failed
     ((should
       (< now
          (- ... 3)))
      :form
      (< 55177 55174)
      :value nil))
   FAILED  1/1  timetest

Ran 1 tests, 0 results as expected, 1 unexpected (2013-02-05 09:57:29+0000)

1 unexpected results:
   FAILED  timetest 
```

编辑2：

似乎表明进程输出的新版本足以中断`sleep-for`：

```
(ert-deftest timetest ()
  (let ((now (cadr (current-time))))
    (start-process "yes" "*yes*" "yes")
    (sleep-for 1) ;; This sleep-for may be interrupted by process *output*
    (sleep-for 5) ;; This sleep-for is also interrupted
    (should (< now (- (cadr (current-time)) 3))))) 
```

编辑3：

怀着沉重的心情，我发布了另一个版本：

```
(ert-deftest timetest ()
  (let ((now (cadr (current-time)))
        (process-connection-type nil))
    (start-process "tmp" "*tmp*" "bash" "-c" "sleep 1; echo hi")
    (sleep-for 5)
    (should (< now (- (cadr (current-time)) 3))))) 
```

似乎很明显`sleep-for`不能依靠阻止。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T01:26:23.273

我认为`sleep-for`当进程退出时会中断。

以下测试失败，因为`sleep-for`2 秒后中断。

```
(ert-deftest timetest ()
  (let ((now (cadr (current-time))))
    (start-process "sleep" "*sleep*" "sleep" "2") ;; Fail
    (sleep-for 5)
    (should (< now (- (cadr (current-time)) 3))))) 
```

但随后的测试通过了，因为`sleep-for`4 秒后中断。

```
(ert-deftest timetest ()
  (let ((now (cadr (current-time))))
    (start-process "sleep" "*sleep*" "sleep" "4") ;; Success
    (sleep-for 5)
    (should (< now (- (cadr (current-time)) 3))))) 
```

所以我认为你可以编写如下测试

```
(ert-deftest timetest ()
  (let ((now (cadr (current-time))))
    (start-process "echo" "*echo*" "echo" "hello world")
    (sleep-for 1) ;; This sleep-for may be interrupted by process exited
    (sleep-for 5) ;; This sleep-for can sleep 5 seconds
    (should (< now (- (cadr (current-time)) 3))))) 
```

*编辑1*

通过设置`process-connection-type`为 来通过第二次测试`nil`。（但我无法理解这种行为）

```
(ert-deftest timetest ()
  (let ((now (cadr (current-time)))
        (process-connection-type nil))
    (start-process "yes" "*yes*" "yes")
    (sleep-for 5)
    (should (< now (- (cadr (current-time)) 3))))) 
```

请看[文档](http://www.gnu.org/software/emacs/manual/html_node/elisp/Asynchronous-Processes.html)

*编辑2*

在第 3 次测试中，我们需要 3次，`sleep-for`因为`sleep-for`被中断了 2 次，但这很脆弱。所以我写测试如下。`sleep-for`如果中断多次，则可以通过此测试。我使用`float-time`而不是`current-time` 因为第二个元素`current-time`可能会环绕。

```
(ert-deftest timetest ()
  (let ((now (float-time))
        (process-connection-type nil))
    (start-process "tmp" "*tmp*" "bash" "-c" "sleep 1; echo hi")
    (while (< (- (float-time) now) 5)
      (sleep-for 1))
    (should (< now (- (float-time) 3))))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-01T02:18:13.863

此错误将在下一个 Emacs（25.1？24.6？？）中修复。请参阅2015 年 6 月的[此提交](http://git.savannah.gnu.org/gitweb/?p=emacs.git;a=commitdiff;h=3bea77f65504ee7c4364c300fd1f7d699e2866ac)。（不过，我实际上还没有尝试过。）

直到它得到修复，使用

```
(call-process "/usr/bin/sleep" nil nil nil "<seconds>") 
```

而不是“睡觉”。这是可靠的。

错误报告在[原始](http://debbugs.gnu.org/cgi/bugreport.cgi?bug=15990)(#15990) 和[重复](http://debbugs.gnu.org/cgi/bugreport.cgi?bug=20935)(#20935) 中找到，其中报告了修复。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T05:33:10.620

我刚刚复制到 *scratch* 并使用`ert-run-tests-interactively`. 我无法重现您的问题。您是否有旧版本的测试在记忆中挥之不去？

*编辑*：我在 OS X 10.8 上使用 Emacs 24.2.1

*更新*：运行更新的代码。一些非常奇怪的事情正在发生。我大约有 1/4 的跑步成功了。

*更新*：我可以验证@syohex 的答案：添加第二个电话`sleep-for`对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-17T09:15:35.420

看看[https://github.com/rejeep/ert-async.el](https://github.com/rejeep/ert-async.el)

然后你可以做这样的事情：

```
(ert-deftest-async timetest (done)
  (call-async-command done)) 
```

# android - 谷歌地图数据的数据库设计

> ID：14698082
> 
> 赞同：-1
> 
> 时间：2013-02-05T00:13:10.843
> 
> 标签：android, database, google-maps-api-3

我正在使用 Google Maps 开发一个 Android 应用程序，用户可以在其中找到离他们最近的位置。我正处于设计阶段，我正试图弄清楚我的数据库需要什么来存储位置。我知道它使用经度和纬度作为两个字段，但是让应用程序正常工作还有什么必要条件？我曾尝试在 SO 和 Google 上搜索，但显然我的搜索技能较差。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:47:55.383

除了因不具建设性而被关闭外，此问题还可能违反 Google 的服务条款 [http://code.google.com/apis/maps/terms.html](http://code.google.com/apis/maps/terms.html)。特别是第 10.1.3 (a) 节：

“您不得复制、翻译、修改或创建衍生作品（包括创建或贡献于数据库）或公开展示任何内容或其任何部分......”

# c++ - GDB-Python 脚本：遍历 C/C++ 结构字段的任何示例

> ID：14698086
> 
> 赞同：13
> 
> 时间：2013-02-05T00:13:44.000
> 
> 标签：c++, python, c, scripting, gdb

新的[GDB-Python 脚本 API](http://www.sourceware.org/gdb/onlinedocs/gdb/Python.html)看起来非常强大，应该非常有用。然而，编写一个有用的脚本来遍历 C 或 C++ 结构中的字段并非易事。有谁知道一些确实可以做到这一点的固体样品？

提前致谢。

* * *

更新最终样本：替换`_print_fields()`早期样本。

```
 if l.type.code == gdb.TYPE_CODE_STRUCT:
        print "Found a struct  %s " % n
        #self._print_fields(n, t)
        self._print_deep_items(n, t, l)
    else:
        print "Found no struct"

def _print_deep_items (self, n_, type_, instance_):
    for fld in type_.fields():
        fn = fld.name
        ft = fld.type
        fv = instance_[fn]
        if fv.type.code == gdb.TYPE_CODE_STRUCT:
            print "  Found a sub struct  %s " % fn
            self._print_deep_items(fn, ft, fv)
        else:
            print "    Field %s " % fn, " type %s " % ft.tag, " value %s " % fv 
```

和输出：

```
 variable s1   type S1
Found a struct  s1
    Field v1   type None   value 0
    Field v2   type None   value 0
  Found a sub struct  v3
    Field w3   type None   value 0 
```

* * *

使用第一个示例更新：使以下示例代码正常工作。这不是最佳的，因为它在组成字符串字段名称后对每个字段进行查找。abarnert 展示了一种有前途且优雅的方法，工作代码在上述最终更新部分进行了更新。

```
import gdb
class PrintGList(gdb.Command):
    """print fields of a struct: wzd struct_object

Iterate through the fields of a struct, and display
a human-readable form of the objects."""
    def __init__(self):
        gdb.Command.__init__(self, "wzd", gdb.COMMAND_DATA, gdb.COMPLETE_SYMBOL, True)

    def invoke(self, arg, from_tty):

        arg_list = gdb.string_to_argv(arg)
        if len(arg_list) < 1:
            print "usage: wzd struct"
            return

        n = arg_list[0]
        l = gdb.parse_and_eval(arg_list[0])
        m = l.type.tag

        print "  variable %s " % n, " type %s " % m
        try:
            t = gdb.lookup_type(m)
        except RuntimeError, e:
            print "type %s not found" % t
            return

        if l.type.code == gdb.TYPE_CODE_STRUCT:
            print "Found a struct  %s " % n
            self._print_fields(n, t)
        else:
            print "Found no struct"

    def _print_fields(self, n, typeobject):
        print typeobject
        flds = typeobject.fields()
        for x in flds:
            sn = n + "." + x.name
            print "  field %s" % sn, " code %s " % x.type.code, " type %s " % x.type.tag
            if x.type.code == gdb.TYPE_CODE_STRUCT:
                print "Found sub level struct  %s " % sn
                sl = gdb.parse_and_eval(sn)
                sm = sl.type.tag
                st = gdb.lookup_type( sm )
                self._print_fields(sn, x.type)

    def _deep_items (self, type_):
        for k, v in type_.iteritems():
            if k:
                print " k v %s " % k , " %s " % v
            else:
                print "   v    ",      " %s " % v

PrintGList() 
```

用于测试的源文件：

```
struct S2 {        int w3;    };
struct S1 {        int v1, v2;      struct S2 v3; } s1;
int main(int argc, char *argv[]) {   return 0; } 
```

示例输出：

```
 variable s1   type S1
Found a struct  s1
S1
  field s1.v1  typecode 8   type None
  field s1.v2  typecode 8   type None
  field s1.v3  typecode 3   type S2
Found sub level struct  s1.v3
S2
  field s1.v3.w3  typecode 8   type None 
```

获取 GDB 会话： source /home/me/testpath/wzdfile.py 文件 a.out b main r wzd s1 quit

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T01:08:43.047

根据[文档](http://www.sourceware.org/gdb/onlinedocs/gdb/Types-In-Python.html#Types-In-Python)，遍历 C 结构的字段*应该*非常简单：

> 如果类型是结构或类类型，或者枚举类型，则可以使用 Python 字典语法访问该类型的字段。例如，如果`some_type`是一个`gdb.Type`拥有结构类型的实例，您可以通过以下方式访问其 foo 字段：
> 
> ```
> bar = some_type['foo'] 
> ```
> 
> `bar`将是一个`gdb.Field`对象；有关类的描述，请参见下面的`Type.fields`方法描述`gdb.Field`。

您还可以使用显式`Type.fields`获取 a 的字段`struct`，但是（从 7.4 开始）您也可以使用普通[`dict`](http://docs.python.org/2/tutorial/datastructures.html#dictionaries)方法，以便获取名称/`Field`对的列表：

```
for name, field in foo.type.iteritems(): 
```

或者，仅针对名称：

```
for name, field in foo.type.iterkeys(): 
```

等等。

这似乎没有直接记录在该页面上，但是[gdb.types](http://www.sourceware.org/gdb/onlinedocs/gdb/gdb_002etypes.html#gdb_002etypes)在它说的时候非常强烈地暗示它`deep_items`：

> 返回类似于标准 gdb.Type.iteritems 方法的 Python 迭代器。

例如，给定这个 C 类型：

```
struct S {
    int x;
    int y;
}; 
```

你可以这样做：

```
(gdb) python struct_S = my_s.type # or gdb.lookup_type("struct S"), etc.
(gdb) python print struct_S.keys()
{['a', 'b']}
(gdb) python print my_s['a']
0 
```

快速浏览一下[`types.py`源代码](http://sourceware.org/cgi-bin/cvsweb.cgi/src/gdb/python/lib/gdb/types.py?rev=1.8&content-type=text/x-cvsweb-markup&cvsroot=src)，看看它是如何`gdb.types.deep_item(type_)`实现的，这似乎就是它的全部。

* * *

在 gdb 7.4 之前，您不能将类型直接视为`dict`. 也就是说，no `for name in instance_.type:`or`instance_.type.iteritems()`等​​。您必须明确调用`fields`. 无论如何，把它们放在一起，这是一个使用 gdb 7.2 迭代结构的所有字段的简单示例：

```
for field in inst.fields:
    fname = field.name
    ftype = field.type
    fval = inst[fname] 
```

`struct`除非您的内部有匿名用户，否则这将不起作用`struct`。为此，您需要`deep_items`（并且，如果 7.2 中没有，您需要查看代码并弄清楚如何自己实现它）。

所以，在 7.2 中不是*很*简单，但很简单。而且，如果您想要简单，只需升级到 7.4。

# scala - 奇怪的案例类语法

> ID：14698087
> 
> 赞同：1
> 
> 时间：2013-02-05T00:13:47.447
> 
> 标签：scala, xpath

我一直在学习 Scala，并决定使用 json4s 进行 JSON 解析。我决定使用 XPath 语法进行反序列化，并遇到了我以前从未见过的这种奇怪的语法。

```
val json = JsonMethods.parse("""{"meaningOfLife": 42}""")
val JInt(x) = json\"meaningOfLife" 
```

让我困惑的部分就在这里

```
val JInt(x) = ... 
```

我无法想象那里发生了什么，我什至不知道如何搜索这种语法或它叫什么。谁能帮我吗？Scala 是一种了不起的语言，具有许多我在 C++ 和 Java 等其他语言中不习惯的简洁特性。

**编辑**

澄清一下，我很困惑，因为`x`没有定义，但它以某种方式被传递给函数或构造函数，然后被分配给`json\"meaningOfLife"`返回 a的结果`JValue`。

**编辑 2**

经过一些研究和玩耍，我发现这与案例类有关。我能够运行以下代码。

```
case class MyCaseClass (x: Int)
val MyCaseClass(x) = new MyCaseClass(5)
println(x, x.getClass) // prints (5,int) 
```

在查看了一些代码之后，这让我对正在发生的事情有了很好的理解。

```
val MyCaseClass(x) = MyCaseClass(5) 
```

正在从实例化的`Int`值中提取（因为没有更好的术语）并将其存储到中，意思是.`5``MyCaseClass``x``x``Int`

在 json4s 的代码中，a`JInt`是运算`JValue`符`\`返回的 a。因此，`JInt(x)`取出 a `BigInt`（存储在 class 中`JInt`）并将其放入`x`我收集的值中。

但我还有一个问题。这个过程叫什么？有没有关于它的文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T02:45:38.240

它被称为“无可辩驳的模式匹配”，它本质上等同于这段代码：

```
val json = JsonMethods.parse("""{"meaningOfLife": 42}""")

val x = json match {
  case JInt(xMatched) => xMatched
} 
```

换句话说，任何符合声明左侧模式的案例类或任何提取器都可以以这种方式使用。

附录：

“无可辩驳”意味着`MatchError`如果不能满足模式，将抛出 a。

# java - json请求枚举

> ID：14698088
> 
> 赞同：0
> 
> 时间：2013-02-05T00:13:50.687
> 
> 标签：java, json, web-services, rest, enums

我们有 RestWS 需要以 JSON 格式传递请求。此请求包含不同类型的值，例如`String`,`List`等`enum`。

我们弄清楚了如何传递`String`和`List`（见下文）但不确定如何传递`enum`JSON 请求对象。

`List`请求和请求中的示例 JSON`String`请求：

```
{"firstparam":["195","196"],"secondparam":"test"} 
```

第一个参数是`List`，第二个参数是`String`。同样，我们需要知道如何通过`enum`（也在上面的请求中）。

示例`enum`类：

```
@XmlType(name = "Type")
@XmlEnum
public enum Type {

@XmlEnumValue("New")
NEW("New"),
@XmlEnumValue("Delete")
DELETE("Delete"),
@XmlEnumValue("Process")
PROCESS("Process");
private final String value;

WorkingStatusType(String v) {
    value = v;
}

public String value() {
    return value;
}

public static WorkingStatusType fromValue(String v) {
    for (WorkingStatusType c: WorkingStatusType.values()) {
        if (c.value.equals(v)) {
            return c;
        }
    }
    throw new IllegalArgumentException(v);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:46:13.227

这个[Google JSON 风格指南](http://google-styleguide.googlecode.com/svn/trunk/jsoncstyleguide.xml#Enum_Values)可能会对您有所帮助。

# java - 使用 Java 在 Mac 上启动 Minecraft

> ID：14698089
> 
> 赞同：1
> 
> 时间：2013-02-05T00:14:04.797
> 
> 标签：java, macos, minecraft, offline-mode

我正在尝试制作一个java程序，它将使用我想要的任何用户名在离线模式下启动我的世界，这样我就可以拥有像Notch和deadmau5这样的用户名，我正在使用这个代码在mac和windows上启动它（目前在mac上测试）：

```
public void startMacMinecraft(String username) throws IOException,
        InterruptedException {
    System.out.println(defaultDirectory());

    String sysUser = System.getProperty("user.name");
    String commandString = "java -cp "
            + defaultDirectory()
            + "/minecraft/bin/minecraft.jar:"
            + defaultDirectory()
            + "/minecraft/bin/lwjgl.jar:"
            + defaultDirectory()
            + "/minecraft/bin/lwjgl_util.jar:"
            + defaultDirectory()
            + "/minecraft/bin/jinput.jar: -Djava.library.path="
            + defaultDirectory()
            + "/minecraft/bin/natives -Xmx1024M -Xms512M net.minecraft.client.Minecraft '"
            + username + "'";
    CommandLine command = CommandLine.parse(commandString);
    DefaultExecutor executor = new DefaultExecutor();
    int exitValue = executor.execute(command);
    System.out.println(exitValue);

    System.out.println("\nTry Two:\n");
    String javaExe = System.getProperty("java.home") + "/bin/java";

}

public void startWinMinecraft(String username) throws IOException,
        InterruptedException {
    String sysUser = System.getProperty("user.name");
    String commandString = "Java -Xms512m -Xmx1024m -cp \"%APPDATA%\\.minecraft\\bin\\*\" -Djava.library.path=\"%APPDATA%\\.minecraft\\bin\\natives net.minecraft.client.Minecraft \""
            + username + "\"";
    CommandLine command = CommandLine.parse(commandString);
    DefaultExecutor executor = new DefaultExecutor();
    int exitValue = executor.execute(command);
    System.out.println(exitValue);

}

private static String defaultDirectory() {
    String OS = System.getProperty("os.name").toUpperCase();
    if (OS.contains("WIN"))
        return System.getenv("APPDATA");
    else if (OS.contains("MAC"))
        return System.getProperty("user.home") + "/Library/Application "
                + "Support";
    else if (OS.contains("NUX"))
        return System.getProperty("user.home");
    return System.getProperty("user.dir");
} 
```

[我试图从我之前运行并从https://gaming.stackexchange.com/questions/46608/how-can-i-run-minecraft-in-offline-mode-on-os](https://gaming.stackexchange.com/questions/46608/how-can-i-run-minecraft-in-offline-mode-on-os-x-and-still-have-my-name)获得的这个 applescript 进行调整[-x-and-still-have-my-name](https://gaming.stackexchange.com/questions/46608/how-can-i-run-minecraft-in-offline-mode-on-os-x-and-still-have-my-name)我将在这里粘贴：

```
property user_name : "Player"

display dialog "Enter A User Name" default answer "" buttons {"Cancel", "Continue"} default button 2
set the user_name to text returned of the result

set UsrApp to (path to current user folder)
set UsrApp_unx to POSIX path of UsrApp

set MineScript to "java -cp " & UsrApp_unx & "Library/Application\\ Support/minecraft/bin/minecraft.jar:" & UsrApp_unx & "Library/Application\\ Support/minecraft/bin/lwjgl.jar:" & UsrApp_unx & "Library/Application\\ Support/minecraft/bin/lwjgl_util.jar:" & UsrApp_unx & "Library/Application\\ Support/minecraft/bin/jinput.jar: -Djava.library.path=" & UsrApp_unx & "Library/Application\\ Support/minecraft/bin/natives -Xmx1024M -Xms512M net.minecraft.client.Minecraft '" & user_name & "'"

do shell script MineScript 
```

当我运行applescript时，它工作得很好，但是当我运行我的改编版本时，它给了我一个找不到类的错误：

```
 Logging in as: Player
/Users/Connor/Library/Application Support
Exception in thread "main" java.lang.NoClassDefFoundError: Support/minecraft/bin/minecraft/jar:/Users/Connor/Library/Application
Caused by: java.lang.ClassNotFoundException: Support.minecraft.bin.minecraft.jar:.Users.Connor.Library.Application
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
org.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)
    at org.apache.commons.exec.DefaultExecutor.executeInternal(DefaultExecutor.java:377)
    at org.apache.commons.exec.DefaultExecutor.execute(DefaultExecutor.java:160)
    at org.apache.commons.exec.DefaultExecutor.execute(DefaultExecutor.java:147)
    at info.connorbp.GUIApp.LoginPanel.startMacMinecraft(LoginPanel.java:137)
    at info.connorbp.GUIApp.LoginPanel$1.actionPerformed(LoginPanel.java:82)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2028)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2351)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
    at java.awt.Component.processMouseEvent(Component.java:6375)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
    at java.awt.Component.processEvent(Component.java:6140)
    at java.awt.Container.processEvent(Container.java:2083)
    at java.awt.Component.dispatchEventImpl(Component.java:4737)
    at java.awt.Container.dispatchEventImpl(Container.java:2141)
    at java.awt.Component.dispatchEvent(Component.java:4565)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4619)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4280)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4210)
    at java.awt.Container.dispatchEventImpl(Container.java:2127)
    at java.awt.Window.dispatchEventImpl(Window.java:2482)
    at java.awt.Component.dispatchEvent(Component.java:4565)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:684)
    at java.awt.EventQueue.access$000(EventQueue.java:85)
    at java.awt.EventQueue$1.run(EventQueue.java:643)
    at java.awt.EventQueue$1.run(EventQueue.java:641)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
    at java.awt.EventQueue$2.run(EventQueue.java:657)
    at java.awt.EventQueue$2.run(EventQueue.java:655)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:654)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

有谁知道我做错了什么或如何解决？

编辑：

更奇怪的是，我进入了 applescript 区域的 events 区域，找到了 applescript 正在运行的确切命令：

```
java -cp /Users/Connor/Library/Application\\ Support/minecraft/bin/minecraft.jar:/Users/Connor/Library/Application\\ Support/minecraft/bin/lwjgl.jar:/Users/Connor/Library/Application\\ Support/minecraft/bin/lwjgl_util.jar:/Users/Connor/Library/Application\\ Support/minecraft/bin/jinput.jar: -Djava.library.path=/Users/Connor/Library/Application\\ Support/minecraft/bin/natives -Xmx1024M -Xms512M net.minecraft.client.Minecraft 'username' 
```

即使尝试运行直接来自applescript的脚本，我也遇到了另一个java.lang.NoClassDefFoundError错误，即使我直接从正在运行的applescript中获取了命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T05:07:23.980

在默认启动器中，您提供的任何用户名都将用于离线模式，因此编写单独的启动器毫无意义。

无论如何，反编译启动器应该能让我们很好地了解如何启动游戏。

代码很多，建议自己反编译。对于 mac，JD-GUI 做得很好。对于 Windows，我不推荐反编译器，但这就是 google 的用途:)

获得启动器源代码后，请查看`public void login(String userName, String password)`net.minecraft.LauncherFrame。同样相关的是 net.minecraft.Launcher。

通读一遍，你应该对如何启动我的世界有一个很好的了解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T00:09:38.593

哎呀，忘了这个问题了。实际上，我只是错过了启动 minecraft 所需的一些代码。

# html - 背景颜色不变

> ID：14698090
> 
> 赞同：-1
> 
> 时间：2013-02-05T00:14:11.073
> 
> 标签：html, css

我正在尝试更改图标按钮的背景颜色以防 iphone 屏幕....但是颜色没有改变您能告诉如何解决它...当您将浏览器窗口缩小到 iphone 屏幕时，您可以看到灰色菜单按钮....

当我给背景颜色时：红色只有边框显示红色如何以红色显示整个按钮

[http://jsfiddle.net/Zkdfq/](http://jsfiddle.net/Zkdfq/)

```
.navbar .btn-navbar {
            display: block;
            background-color: red;
          } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:19:12.243

原因是：

```
.btn {
    -moz-border-bottom-colors: none;
    -moz-border-left-colors: none;
    -moz-border-right-colors: none;
    -moz-border-top-colors: none;
    background-color: #F5F5F5;
    background-image: linear-gradient(to bottom, #FFFFFF, #E6E6E6);
    background-repeat: repeat-x;
    ...
} 
```

在 bootstrap.css 中，它为您的按钮声明了背景颜色。
为您的查询添加样式，如下所示：

```
.btn {
    background-color: red !important;
    background-image: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T00:21:32.163

```
.navbar .btn-navbar {
  background: red;
} 
```

灰色是 a `linear-gradient`，它就像 a `background-image`。使用速记覆盖它。

[演示](http://jsfiddle.net/Zkdfq/1/)

# python - 使用 Numpy 计算范围内的数字

> ID：14698093
> 
> 赞同：0
> 
> 时间：2013-02-05T00:14:31.270
> 
> 标签：python, random, numpy, cumsum

我一直在尝试编写一些代码来添加属于某个范围的数字并将相应的数字添加到列表中。我还需要从 cumsum 范围中提取范围。

```
numbers = []
i=0

z = np.random.rand(1000)
arraypmf = np.array(pmf)
summation = np.cumsum(z)

while i < 6:
   index = i-1

    a = np.extract[condition, z] # I can't figure out how to write the condition.
    length = len(a)
    length * numbers.append(i) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T00:39:08.693

我不完全确定你要做什么，但最简单的条件`numpy`是把它们应用到整个数组来得到一个掩码：

```
mask = (z >= 0.3) & (z < 0.6) 
```

然后你可以使用，例如，`extract`或者[`ma`](http://docs.scipy.org/doc/numpy/reference/routines.ma.html)如果有必要的话——但在这种情况下，我认为你可以只依靠这样一个事实，`True==1`并且`False==0`这样做：

```
zm = z * mask 
```

毕竟，如果您所做的只是总结事情，`0`则与不存在相同，您可以将其替换`len`为`count_nonzero`.

例如：

```
In [588]: z=np.random.rand(10)
In [589]: z
Out[589]: 
array([ 0.33335522,  0.66155206,  0.60602815,  0.05755882,  0.03596728,
        0.85610536,  0.06657973,  0.43287193,  0.22596789,  0.62220608])
In [590]: mask = (z >= 0.3) & (z < 0.6)
In [591]: mask
Out[591]: array([ True, False, False, False, False, False, False,  True, False, False], dtype=bool)
In [592]: z * mask
Out[592]: 
array([ 0.33335522,  0\.        ,  0\.        ,  0\.        ,  0\.        ,
        0\.        ,  0\.        ,  0.43287193,  0\.        ,  0\.        ])
In [593]: np.count_nonzero(z * mask)
Out[593]: 2
In [594]: np.extract(mask, z)
Out[594]: array([ 0.33335522,  0.43287193])
In [595]: len(np.extract(mask, z))
Out[595]: 2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T01:06:57.363

这是您尝试做的另一种方法（我认为）：

```
import numpy as np
z = np.random.rand(1000)
bins = np.asarray([0, .1, .15, 1.])

# This will give the number of values in each range
counts, _ = np.histogram(z, bins)

# This will give the sum of all values in each range
sums, _ = np.histogram(z, bins, weights=z) 
```

# haskell - f# 相当于 Haskell 的“交互”

> ID：14698094
> 
> 赞同：8
> 
> 时间：2013-02-05T00:14:41.730
> 
> 标签：haskell, f#

我刚刚阅读了一些有关 Haskell 的信息，并看到了它的方法，该方法`interact`实现了从标准输入读取输入、将函数应用于字符串并将结果写回标准输出的常见模式。因此，例如：

```
interact (map toUpper) 
```

将 stdin 上转换为大写的所有内容打印回来。

F#/.Net 中是否已经有类似的功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T00:31:35.890

此功能本身不存在，但实现起来很容易：

```
let inline interact f =
    printfn "%s" (f (System.Console.Readline())) 
```

# php - 来自 Ajax 的 Highcharts 饼图

> ID：14698095
> 
> 赞同：1
> 
> 时间：2013-02-05T00:14:50.710
> 
> 标签：php, ajax, highcharts

我有一个使用 highcharts 饼图的页面，我正在尝试使用日期选择器下拉更新图表。我对条形图有类似的实现，并且效果很好。请注意（这是来自 PHP 类，因此是连接和其他）。

```
<script type='text/javascript'>

                    function drawPie(data)
                    {
                        var chart;
                        alert('called');
                        var options = {
                            chart: {
                                renderTo: 'PieChart',
                                plotBackgroundColor: null,
                                plotBorderWidth: null,
                                plotShadow: false,
                                height: 350
                            },
                            title: {
                                text: 'Product Popularity'
                            },
                            tooltip: {
                                pointFormat: '{series.name}: <b>{point.percentage}%</b>',
                                percentageDecimals: 1
                            },
                            plotOptions: {
                                pie: {
                                    allowPointSelect: true,
                                    cursor: 'pointer',
                                    dataLabels: {enabled: false},
                                    showInLegend: true
                                }
                            },
                            series: [{
                                type: 'pie',
                                name: 'Product Popularity',
                                data: data

                            }]
                        }
                        chart = new Highcharts.Chart(options);
                        $('#ProductPieMod div.mod_content').css('height', $('#PieChart').css('height'));
                    }
                $(document).ready(function(){
                    drawPie(" . $this->get_data($this->date) . ");

                    $('#ProductPieMod_date').on('change', function(){
                        var val = parseInt($(this).val());
                        switch(val)
                        {
                            case 0:
                                var date = Date.today();
                                break;
                            case 1:
                                var date = Date.parse('last week');
                                break;
                            case 2:
                                var date = Date.today().moveToFirstDayOfMonth();
                                break;
                            case 3:
                                var date = Date.parse('January').moveToFirstDayOfMonth();
                                break;
                            default:
                                var date = Date.today();
                        }
                        var info;
                        $.ajax({
                            type: 'POST',
                            url: '". matry::base_to('utilities/dhs/manager_dash') . "',
                            async: false,
                            dataType: 'json',
                            data: {date: date.toString('M/dd/yyyy'), module: 'ProductPieMod'},
                            success: function(data)
                            {
                                drawPie(data);  
                            }
                        });

                    });
                });
                </script> 
```

我的 ajax 返回以下字符串：

`[['FASTCLIX LANCING DEVICE', 62.5],['FREESTYLE LANCING DEVICE', 25],['ONETOUCH DELICA LANCING DEVICE', 12.5]]`

另外，这个图表是最初构建的，使用完全相同的方法，就好了。就在我使用下拉菜单（运行 onChange 事件）时，它会中断。

**更新** 我也为此创建了一个小提琴：http: [//jsfiddle.net/SHReZ/1/](http://jsfiddle.net/SHReZ/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T00:56:22.517

首先，您需要将`chart`var 放置到`document.ready`处理程序范围，接下来，您需要在绘制之前销毁图表。

```
$(document).ready(function () {
    var chart;

    function drawPie(data) {
        console.log('called');
        var options = {
            chart: {
                renderTo: 'PieChart',
                plotBackgroundColor: null,
                plotBorderWidth: null,
                plotShadow: false,
                height: 350
            },
            title: {
                text: 'Product Popularity'
            },
            tooltip: {
                pointFormat: '{series.name}: <b>{point.percentage}%</b>',
                percentageDecimals: 1
            },
            plotOptions: {
                pie: {
                    allowPointSelect: true,
                    cursor: 'pointer',
                    dataLabels: {
                        enabled: false
                    },
                    showInLegend: true
                }
            },
            series: [{
                type: 'pie',
                name: 'Product Popularity',
                data: data
            }]
        };
        if (chart !== undefined) chart.destroy();
        chart = new Highcharts.Chart(options);
        $('#ProductPieMod div.mod_content').css('height', $('#PieChart').css('height'));
    }

    drawPie([
        ['ONETOUCH DELICA LANCING DEVICE', 27.78],
        ['FREESTYLE LANCING DEVICE', 20.83],
        ['Nova Max Ketone Test Strips Health and', 11.11],
        ['ONETOUCH ULTRASOFT LANCING DEVICE 2PK', 11.11]
    ]);
    //get data from https://gist.github.com/zba/4712055 , delay 4
    $.post('/gh/gist/response.html/4712055', {
        delay: 4
    }, function (data) {
        drawPie(data);
    }, 'json');

}); 
```

[小提琴](http://jsfiddle.net/oceog/SHReZ/9/)

[这里](http://jsfiddle.net/oceog/SHReZ/5/)也是演示，它不会破坏图表，但它会改变颜色

# design-patterns - 基于 Activity 的权限与 Backbone、API 设计理念？

> ID：14698096
> 
> 赞同：7
> 
> 时间：2013-02-05T00:15:07.220
> 
> 标签：design-patterns, backbone.js, permissions, knockout.js

我正在使用 Backbone 和 Knockout 和 Knockback（ko + bb 桥库）构建一个相当大的 cms 类型的应用程序，并且我正在尝试找出一种抽象权限的好方法。也提前为小说感到抱歉。

首先，这是一个非常非标准的架构，您可能会问第二个问题 - 为什么不使用更全面的东西，例如 Ember 或 Angular？取点。这就是目前的情况。:)

所以这是我的困惑。我想要一个优雅的 api 在控制器和视图模型级别获得权限。

我有一个可用的对象，如下所示：

```
{
   'api/pages': {
     create: true, read: true, update: true, destroy: true
   },
   'api/links': {
     create: false, read: true, update: false, destroy: false
   }
   ...
} 
```

所以在我的路由器/控制器中，我正在更新我的集合/模型/视图模型，然后在已经存在的视图上调用自定义的渲染方法。视图负责诸如释放视图模型之类的事情。

```
initialize: function() {
  this.pages = new PagesCollection();
  this.links = new LinksCollection();
},

list: function() {
  var vm = new PageListViewmodel(this.pages, this.links);
  // adminPage method is available through inheritance
  this.adminPage('path/to/template', vm); // delegates to kb.renderTemplate under the hood.
} 
```

所以问题在于，这些集合是完全非结构化的，即。路由器对它们一无所知。

但是，如果您不允许查看特定资源，我需要它重定向到未经授权的页面。

因此，对于上面的示例，我考虑过在过滤器之前/之后进行编码？但是你会在哪里指定每个路由器方法试图访问的内容？

```
list: function() {
  this.authorize([this.pages, this.links], ['read'], function(pages, links) {
    // return view.
  });
} 
```

前面的代码真的很笨拙..

对于更直接的视图模型，我有做这样的事情的想法 - ala Ruby 的 CanCan：

```
this.currentUser.can('read', collection) // true or false
// can() would just look at the endpoint and compare to my perms object. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T13:01:18.407

您可以扩展您的路由器以包装您的路由回调，以便在允许操作之前执行有效性检查。

```
var Router = Backbone.Router.extend({
    routes: {
        "app/*perm": "go"
    },

    route: function(route, name, callback) {
        if (!callback) callback = this[name];

        var f = function() {
            var perms = this.authorized(Backbone.history.getFragment());
            if (perms === true) {
                callback.apply(this, arguments);
            } else {
                this.trigger('denied', perms);
            }
        };
        return Backbone.Router.prototype.route.call(this, route, name, f);
    },

    authorized: function(path) {
        // check if the path is authorized
    },

    go: function(perm) {
       // perform action
    }
}); 
```

如果路径被授权，则路由照常执行，否则触发拒绝事件。

该`authorized`方法可以基于映射到您的权限对象的路径列表，如下所示

```
var permissions = {
   'api/pages': {
     create: true, read: true, update: true, destroy: true
   },
   'api/links': {
     create: false, read: true, update: false, destroy: false
   }
}
var Router = Backbone.Router.extend({
    routes: {
        "app/*perm": "go"
    },

    // protected paths, with the corresponding entry in the permissions object
    permissionsMap: {
        "app/pages": 'api/pages',
        "app/links": 'api/links',
    },

    route: function(route, name, callback) {
        // see above
    },

    // returns true if the path is allowed
    // returns an object with the path and the permission key used if not
    authorized: function(path) {
        var paths, match, permkey, perms;

        // find an entry for the current path
        paths = _.keys(this.permissionsMap);
        match = _.find(paths, function(p) {
            return path.indexOf(p)===0;            
        });
        if (!match) return true;

        //check if the read permission is allowed
        permkey = this.permissionsMap[match];
        if (!permissions[permkey]) return true;
        if (permissions[permkey].read) return true;

        return {
            path: path,
            permission: permkey
        };
    },

    go: function(perm) {}
}); 
```

还有一个演示[http://jsfiddle.net/t2vMA/1/](http://jsfiddle.net/t2vMA/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T16:42:37.073

Nikoshr 的回答给了我一些帮助。我没想到实际上会覆盖`route`自己。但这是我的解决方案。我应该在问题中提到它 - 但有时路由器操作需要多个集合。

上面的代码真的很粗糙，需要测试——但它可以工作！[在这里](http://jsfiddle.net/jaquers/NFJfQ/)拉小提琴。

以下是相关部分 - 这两种方法负责授权。

```
authorize: function(namedRoute) {
  if (this.permissions && this.collections) {
    var perms = this.permissions[namedRoute];
    if (!perms) {
      perms = {};
      // if nothing is specified for a particular  route, we
      // assume read access required for all registered controllers.
      _.each(_.keys(this.collections), function(key) {
        return perms[key] = [];
      });
    }

    var authorized = _.chain(perms)
      .map(function(reqPerms, collKey) {
        var collection = this.collections[collKey],
            permKey = _.result(collection, 'url');

        // We implicitly check for 'read'
        if (!_.contains('read')) {
          reqPerms.push('read');
        }

        return _.every(reqPerms, function(ability) {
          return userPermissions[permKey][ability];
        });
      }, this)
      .every(function(auth){ return auth; })
      .value();
    return authorized;
  }
  return true;
},
route: function(route, name, callback) {
  if (!callback) { callback = this[name]; }
  var action = function() {
    // allow anonymous routes through auth check.
    if (!name || this.authorize(name)) {
      callback.apply(this, arguments);
    } else {
      this.trigger('denied');
    }
  }
  Backbone.Router.prototype.route.call(this, route, name, action);
  return this;
} 
```

每个控制器/路由器都继承自 perm 路由器，其中每个操作的权限映射如下：

```
// Setup
routes: {
  'list'     : 'list',
  'list/:id' : 'detail',
  'create'   : 'create'
},

// Collection are registered so we can
// keep track of what actions use them
collections: {
  pages: new PagesCollection([{id:1, title: 'stuff'}]),
  links: new LinksCollection([{id:1, link: 'things'}])
},

// If a router method is not defined,
// 'read' access is assumed to be
// required for all registered collections.
permissions: {
  detail: {
    pages: ['update'],
    links: ['update']
  },
  create: {
    pages: ['create'],
    links: ['create', 'update']
  }
}, 
```

# css - 你如何使文本像新的我的空间文章页面一样流动？

> ID：14698098
> 
> 赞同：2
> 
> 时间：2013-02-05T00:15:09.107
> 
> 标签：css, overflow, multiple-columns, myspace

我正在尝试创建一个多列布局，垂直和水平环绕文本，如下所示：[https ://new.myspace.com/discover/trending/2013/01/23/jeremy-allen-white-cant -远离性](https://new.myspace.com/discover/trending/2013/01/23/jeremy-allen-white-cant-get-away-from-sex)

我似乎找不到任何可以帮助我的文章。

这是我的样式表中的内容，但每列中的文本在到达浏览器底部之前会环绕。

这是它目前的样子：http: [//jsfiddle.net/koryeast/ztfED/](http://jsfiddle.net/koryeast/ztfED/)

```
@media (min-width:800px)
{
    div
    {
        -webkit-column-fill: auto;
        -webkit-column-width: 300px;
        -webkit-column-gap: 40px;
    }
} 
```

但是正如您所看到的，每一列中的文本在到达浏览器底部之前都会环绕。

如何使文本仅在到达浏览器底部时才溢出到下一列？

任何帮助，将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T11:11:45.010

我找到了一个教程来做到这一点。转到[http://kmsm.ca/2010/an-almost-complete-guide-to-css3-multi-column-layouts/](http://kmsm.ca/2010/an-almost-complete-guide-to-css3-multi-column-layouts/)。这说明了一切。此外，可以在此处找到与工作版本类似的问题[re-arange default column (-webkit-column, -moz-column) order on a page?](https://stackoverflow.com/questions/15817427/re-arange-default-column-webkit-column-moz-column-order-on-a-page) . 希望这可以帮助。

# java - JAVA - 使用 httpclient 通过 http 代理 (squid) 将文件发布到谷歌应用程序在调用执行时卡住

> ID：14698103
> 
> 赞同：2
> 
> 时间：2013-02-05T00:15:43.023
> 
> 标签：java, google-app-engine, proxy, httpclient

# 语境

我有一个桌面 JAVA 应用程序，用于将文件（blob）上传到谷歌应用程序 blobstore。直接连接到 Internet 时一切正常，但通过 HTTP 代理 (Squid) 进行身份验证时就不行了。

我正在使用 httpClient 4.2.3，但没有收到任何错误或响应。它只是在调用时卡住了`httpClient.execute(post)`。

# 代码

我添加了这些行来处理代理身份验证，并且在使用 URL 获取页面时效果很好：

```
 System.setProperty("http.proxyUser", username);
    System.setProperty("http.proxyPassword", password); 
```

我也试过了：

```
 Authenticator.setDefault(
       new Authenticator() {
           @Override
          public PasswordAuthentication getPasswordAuthentication() {
             return new PasswordAuthentication(
                   username, password.toCharArray());
          }
       }
    ); 
```

从现在开始，这与不使用代理时工作的代码相同。

首先，我下载一个页面，在该页面中获取用于将文件发布到 blobstore 的 url：

```
 URL url = new URL("http://www.example.com/get-upload-url.jsp");        
    String urlWhereToPost=IOUtils.toString(url.openStream());  

    DefaultHttpClient  client = new DefaultHttpClient (); 
```

在这里，我们准备多部分帖子：

```
 HttpPost post
             = new HttpPost( urlWhereToPost.trim() );
    MultipartEntity entity 
             = new MultipartEntity( HttpMultipartMode.BROWSER_COMPATIBLE);

    entity.addPart( "key" 
                    , new FileBody(new File(jpgFilePath)
                    , "image/jpeg" )
                    );

    post.setEntity((HttpEntity)entity); 
```

正是在调用 execute 时，什么也没有发生（而且它永远不会进入下一条指令）：

```
 HttpResponse execute = client.execute( post ); 
```

# 测试

我一直在尝试几件事，但没有任何效果：

*   一开始我认为问题出在使用 POST 上，因为使用 GET 可以正常工作，`URL()` 但我尝试使用`HttpClient`GET 来执行 GET，但它也卡住了。
*   我使用 Wireshark 检查发送到代理的数据包，我看到当使用`URL()`Wireshark 时，将对代理的调用识别为从代理执行 GET 的请求。但是当使用 httpClient 时，看起来请求没有很好地构建，因为 Wireshark 显示了一个数据包但无法识别内部请求。
*   然后我尝试使用构建POST `HttpURLConnection`，它通过代理，我从服务器得到答案，但看起来我没有很好地构建它，因为appengine找不到我发送的文件（但这将是另一个问题.. .)。

# 结论

有同样问题的人吗？任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:49:10.850

您的代理设置适用于 Java 系统类。Apache HttpClient 应该以不同的方式配置。此链接可能会有所帮助：[代理身份验证](http://hc.apache.org/httpcomponents-client-ga/httpclient/examples/org/apache/http/examples/client/ClientProxyAuthentication.java)

# python - 如何使用谐波常数预测潮汐

> ID：14698104
> 
> 赞同：15
> 
> 时间：2013-02-05T00:15:44.317
> 
> 标签：python

我试图了解如何使用谐波常数创建潮汐预测表。

我使用了 Bridgeport 的谐波常数（[http://tidesandcurrents.noaa.gov/data_menu.shtml?stn=8467150%20Bridgeport,%20CT&type=Harmonic%20Constituents](http://tidesandcurrents.noaa.gov/data_menu.shtml?stn=8467150%20Bridgeport,%20CT&type=Harmonic%20Constituents)）

并使用此 python 脚本对潮汐分量求和 -

```
import math
import time

tidalepoch = 0
epoch = time.mktime(time.gmtime()) - tidalepoch
f = open('bridgeport.txt', 'r')
M_PI = 3.14159
lines = f.readlines()
t = epoch - 24 * 3600
i = -24
while t < epoch:
  height = 0
  for line in lines:
    x = line.split()
    A = float(x[2]) # amplitude
    B = float(x[3]) # phase
    B *=  M_PI / 180.0
    C = float(x[4]) # speed
    C *= M_PI / 648000

    # h = R cost (wt - phi)
    height += A * math.cos(C * t - B)

  print str(i) + " " + str(height + 3.61999)
  i += 1
  t += 3600 
```

对于“今天”，每小时打印一个高度。得到的高度大约在我预期的范围内，-0.5 到 7.5 英尺，但对于日期不正确。

我在正确的轨道上吗？我如何确定潮汐时代？在维基百科 ( [http://en.wikipedia.org/wiki/Arthur_Thomas_Doodson](http://en.wikipedia.org/wiki/Arthur_Thomas_Doodson) ) 上的 Doodsen 示例中，他们使用 0 来获得 1991 年 9 月 1 日的结果。但是它们的谐波值与当前发布的不同，而且那个日期确实似乎不适合我。

这是我的 bridgeport.txt 文件的内容 -

```
1 M2                       3.251 109.6  28.9841042 
2 S2                       0.515 135.9  30.0000000 
3 N2                       0.656  87.6  28.4397295 
4 K1                       0.318 191.6  15.0410686 
5 M4                       0.039 127.4  57.9682084 
6 O1                       0.210 219.5  13.9430356 
7 M6                       0.044 353.9  86.9523127 
8 MK3                      0.023 198.8  44.0251729 
9 S4                       0.000   0.0  60.0000000 
10 MN4                      0.024  97.2  57.4238337 
11 NU2                      0.148  89.8  28.5125831 
12 S6                       0.000   0.0  90.0000000 
13 MU2                      0.000   0.0  27.9682084 
14 2N2                      0.077  65.6  27.8953548 
15 OO1                      0.017 228.7  16.1391017 
16 LAM2                     0.068 131.1  29.4556253 
17 S1                       0.031 175.5  15.0000000 
18 M1                       0.024 264.4  14.4966939 
19 J1                       0.021 237.0  15.5854433 
20 MM                       0.000   0.0   0.5443747 
21 SSA                      0.072  61.2   0.0821373 
22 SA                       0.207 132.0   0.0410686 
23 MSF                      0.000   0.0   1.0158958 
24 MF                       0.000   0.0   1.0980331 
25 RHO                      0.015 258.1  13.4715145 
26 Q1                       0.059 205.7  13.3986609 
27 T2                       0.054 106.4  29.9589333 
28 R2                       0.004 136.9  30.0410667 
29 2Q1                      0.014 238.8  12.8542862 
30 P1                       0.098 204.1  14.9589314 
31 2SM2                     0.000   0.0  31.0158958 
32 M3                       0.012 200.1  43.4761563 
33 L2                       0.162 134.1  29.5284789 
34 2MK3                     0.015 203.7  42.9271398 
35 K2                       0.150 134.7  30.0821373 
36 M8                       0.000   0.0 115.9364166 
37 MS4                      0.000   0.0  58.9841042 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T19:46:34.777

[National Tidal Datum Epoch](http://data.labins.org/2003/SurveyData/WaterBoundary/EpochNotice/epoch.htm)与[Unix epoch](http://en.wikipedia.org/wiki/Unix_time)无关；它是该时期平均潮位的量级参考。Bridgeport 数据包含每个分量的幅度和相位，然后在最后一列中给出分量的频率。相位与 GMT 相关（GMT 为 0 度），因此以 GMT 为单位指定时间，或根据时区进行偏移。最后一列是组件的功能，而不是位置，因此该列对于任何位置都是相同的。所以问题是对不同频率的正弦曲线求和，比如傅里叶分析。生成的函数很可能*没有*24 小时周期，因为组件都有不同的（非 24 小时）周期。我用[这个](http://faculty.washington.edu/luanne/pages/ocean420/notes/TidesIntro.pdf)作为参考。

在下面的代码中，我包含了一些可选参数来添加一些偏移量修饰符（比如你的 3.16999，不确定它来自哪里）。我将读取和解析代码与计算代码分开。从返回的函数包含一个[闭包](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)`get_tides`中的测量数据。您不必这样做，而是可以使用类。

```
from __future__ import division
import math
import time

def get_tides(fn):
    """Read tide data from file, return a function that
    gives tide level for specified hour."""
    with open(fn,'r') as fh:
        lines = fh.readlines()

    measured = []
    for line in lines:
        index,cons,ampl,phase,speed = line.split()
        measured.append(tuple(float(x) for x in (ampl,phase,speed)))

    def find_level(hour,total_offset=0,time_offset=0):
        total = total_offset
        for ampl,phase,speed in measured:
            # you could break out the constituents here
            # to see the individual contributions
            cosarg = speed * (hour + time_offset) + phase
            total += ampl * math.cos(cosarg * math.pi/180) # do rad conversion here
        return total

    return find_level

bridgeport = get_tides('bridgeport.txt')

for hour in range(-24,25,1):
    print("%3sh %7.4f" % (hour,bridgeport(hour,total_offset=3.61999))) 
```

和输出：

```
-24h -0.5488
-23h -1.8043
-22h -1.7085
-21h -0.3378
-20h  1.8647
-19h  4.4101
-18h  6.8374
-17h  8.5997
-16h  9.1818
-15h  8.4168
-14h  6.5658
-13h  4.1003
-12h  1.5669
-11h -0.3936
-10h -1.2009
 -9h -0.6705
 -8h  0.9032
 -7h  3.0316
 -6h  5.2485
 -5h  7.0432
 -4h  7.8633
 -3h  7.4000
 -2h  5.8028
 -1h  3.5317
  0h  1.1223
  1h -0.8425
  2h -1.7748
  3h -1.3620
  4h  0.2196
  5h  2.4871
  6h  4.9635
  7h  7.2015
  8h  8.6781
  9h  8.9524
 10h  7.9593
 11h  6.0188
 12h  3.6032
 13h  1.2440
 14h -0.4444
 15h -0.9554
 16h -0.2106
 17h  1.4306
 18h  3.4834
 19h  5.5091
 20h  7.0246
 21h  7.5394
 22h  6.8482
 23h  5.1795
 24h  2.9995 
```

**编辑：** 对于特定日期或现在的时间：

```
import datetime

epoch = datetime.datetime(1991,9,1,0,0,0)
now = datetime.datetime.utcnow()
hourdiff = (now-epoch).days*24

for hour in range(0,25,1):
    print("%3sh %7.4f" % (hour,bridgeport(hour+hourdiff))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-22T16:46:39.427

如果您使用 C，一种方法是使用 libTCD [http://www.flaterco.com/xtide/libtcd.html](http://www.flaterco.com/xtide/libtcd.html)来存储组成数据，这为访问数据提供了一个很好的框架。

要进行计算，您需要将纪元调整为当年的开始。此代码使用来自 libTCD 的函数，并且基于 xTide 中使用的算法。

```
TIDE_RECORD record;
int readStatus = read_tide_record(self.stationID, &record);
int epochStartSeconds = staringSecondForYear(year);

for (unsigned constituentNumber=0; constituentNumber<constituentCount; constituentNumber++) {
    float constituentAmplitude = record.amplitude[constituentNumber];
    float nodeFactor = get_node_factor(constituentNumber, year);
    amplitudes[constituentNumber] =  constituentAmplitude * nodeFactor;

    float constituentEpoch =  deg2rad(-record.epoch[constituentNumber]);
    float equilibrium = deg2rad(get_equilibrium(constituentNumber, year));
    phases[constituentNumber] = constituentEpoch + equilibrium;
} 
```

然后计算自年初以来偏移的潮汐：

```
- (float)getHeightForTimeSince1970:(long)date {
  //calculate the time to use for this calculation
  int secondsSinceEpoch = date - epochStartSeconds;

  float height = 0;
  for(int i = 0; i < constituentCount; i++) {
    float degreesPerHour = get_speed(i);
    float radiansPerSecond = degreesPerHour * M_PI / 648000.0;
    height += amplitudes[i] * cos(radiansPerSecond * secondsSinceEpoch + phases[i]);
  }

  height += record.datum_offset;
  return height;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-15T19:31:08.293

我刚刚编写了一个名为[Pytides](https://github.com/sam-cox/pytides)的小型 Python 库，用于潮汐分析和预测。它仍处于早期阶段，但您可以使用它轻松实现您想要的。我已经写了[一个](https://github.com/sam-cox/pytides/wiki/How-to-use-the-NOAA%27s-published-Harmonic-Constituents-in-Python-with-Pytides)如何做到这一点的例子。

正如 Dave 所提到的，您的方法不起作用的原因是 NOAA 阶段是相对于成分的平衡参数发布的，因此您需要一些方法来计算这些平衡参数（我建议让 Pytides 为您做这件事！）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-22T04:55:25.663

您链接上的“相位以度为单位，参考格林威治标准时间”意味着布里奇波特潮汐与格林威治子午线的理论“平衡”潮汐的“相位”度数不同步。

您还需要将平衡潮汐作为时间的函数。一种方法是从[http://coastalengineeringmanual.tpub.com/Part-II-Chap5/Part-II-Chap50024.htm](http://coastalengineeringmanual.tpub.com/Part-II-Chap5/Part-II-Chap50024.htm)的 2010 列中复制常量并使用 2010-01-01T00:00:00 作为您的时间基准/纪元/零。

此外，还有一个节点因素会根据月球的节点进动来调节许多成分。

[您可以编辑并运行http://adcirc.org/home/related-software/adcirc-utility-programs/](http://adcirc.org/home/related-software/adcirc-utility-programs/)中的 titan_fac.f 程序，而不是从表中复制，以在以下位置生成一组节点因子和平衡潮汐成分您自己选择的时间基准/纪元/零。

以下是修改后的tide_fac.f 程序的输出，用于生成 2013-01-01T00:00:00 的节点和平衡潮汐相位参数：

```
TIDAL FACTORS STARTING:  HR- 0.00,  DAY-  1,  MONTH-  1  YEAR- 2013

FOR A RUN LASTING   365.00 DAYS

CONST   NODE     EQ ARG (ref GM)
NAME   FACTOR    (DEG) 

M2    1.02718     270.21
S2    1.00000       0.00
N2    1.02718      16.12
K1    0.92336      17.70
M4    1.05510     180.42
O1    0.87509     248.94
M6    1.08377      90.63
MK3   0.94846     287.91
S4    1.00000       0.00
MN4   1.05510     286.33
NU2   1.02718      73.02
S6    1.00000       0.00
MU2   1.02718     178.93
2N2   1.02718     122.03
OO1   0.63334     333.60
LAMB  1.02718     287.40
S1    1.00000     180.00
M1    0.00000     159.37
J1    0.89282     275.36
MM    1.09369     254.09
SSA   1.00000     201.62
SA    1.00000     280.81
MSF   1.02718      91.28   
MF    0.74476     312.33
RHO1  0.87509      51.75   
Q1    0.87509     354.85
T2    1.00000       2.35
R2    1.00000     177.65
2Q1   0.87509     100.76
P1    1.00000     349.19
2SM2  1.02718      89.79
M3    1.04114     225.31
L2    0.00000     348.15
2MK3  0.97424     162.72
K2    0.81662     214.58
M8    1.11323       0.84
MS4   1.02718     270.21 
```

# objective-c - 使用 UIAutomation 在应用程序中测试 Bool 属性

> ID：14698111
> 
> 赞同：0
> 
> 时间：2013-02-05T00:16:22.743
> 
> 标签：objective-c, ios5, ios-ui-automation

我在应用程序中有一个布尔类型的属性，如下所示：

```
@property (nonatomic, readwrite) BOOL isPresent; 
```

如果“isPresent”为真，那么我的应用程序会在屏幕顶部显示通知标签，如果为假，则标签设置为隐藏。我可以通过 UIAutomation 脚本端的可访问性标识符访问标签来测试标签，但是如何测试 isPresent 是真还是假。

Objective C 不允许我为定义的属性设置可访问性标识符。我什至需要检查这个属性来验证数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:50:40.057

无法通过 UI 自动化测试 Objective C 对象的任意属性。UI Automation 是一个用户界面级别的测试工具。您可以通过这些 UI 查看应用程序并与之交互，但如果您需要测试属性和较低级别的逻辑，您将需要使用内置 OCUnit 测试之类的东西。

有关 UI 自动化如何工作的更多信息，我会推荐一个我不久前写的[教程。](http://cocoamanifest.net/articles/2011/05/uiautomation-an-introduction.html)

# asp.net - IIS 是否重置清除本地数据缓存

> ID：14698113
> 
> 赞同：1
> 
> 时间：2013-02-05T00:16:26.517
> 
> 标签：asp.net, asp.net-mvc-3, caching, asp.net-mvc-4

我可以确定 IIS 重置或应用程序池回收将清除本地 asp.net 数据缓存吗？

本质上与此类似（即最终结果）：

```
public void ClearApplicationCache()
{
    List<string> keys = new List<string>();

    // retrieve application Cache enumerator
    IDictionaryEnumerator enumerator = Cache.GetEnumerator();

    // copy all keys that currently exist in Cache
    while (enumerator.MoveNext())
    {
        keys.Add(enumerator.Key.ToString());
    }

    // delete every key from cache
    for (int i = 0; i < keys.Count; i++)
    {
        Cache.Remove(keys[i]);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T01:44:44.940

Confirmed 根据 Imran 的响应清除所有缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:08:44.850

非静态字段、方法或属性“System.Web.Caching.Cache.GetEnumerator()”需要对象引用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-26T03:13:36.063

导航到 IIS 快递

> `cd "C:\Program Files (x86)\IIS Express\" run this appcmd.exe list site` `/xml | appcmd delete site /in`

这将删除所有网站，享受！

您可以从您的应用程序中将其作为任务生成..

# clojure - Clojure / Incanter 数据转换功能

> ID：14698114
> 
> 赞同：4
> 
> 时间：2013-02-05T00:16:32.680
> 
> 标签：clojure, incanter

我正在考虑将 Clojure / Incanter 作为 R 的替代品，只是想知道 clojure / incanter 是否有能力执行以下操作：

1.  将 SQL 语句的结果作为数据集导入（我在 R 中使用 dbGetQuery 执行此操作）。
2.  重塑数据集 - 将行转换为列，也称为“pivot”/“unpivot”——我在 R 中使用 reshape、reshape2 包（在 R 世界中称为熔化和铸造数据）来执行此操作。
3.  将重构的数据集保存到 SQL 表中（我在 R 中使用 RMySQL 中的 dbWriteTable 函数执行此操作）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:08:41.693

您可能对[core.matrix](https://github.com/mikera/matrix-api)感兴趣- 这是一个将多维数组和数值计算功能引入 Clojure 的项目。仍处于非常活跃的开发阶段，但已经可用。

特征：

*   一个干净、实用的 API
*   适当的多维数组
*   使用 Clojure 数据的惯用风格，例如嵌套向量`[[1 2] [3 4]]`可以自动用作 2x2 矩阵。
*   您可能期望的所有阵列重塑功能。
*   所有常见的矩阵运算（乘法、缩放、行列式等）
*   支持多种后端矩阵实现，例如 JBLAS 以实现高性能（使用本机代码）

在此处查看一些示例代码：

```
 ;; a matrix can be defined using a nested vector
  (def a (matrix [[2 0] [0 2]]))

  ;; core.matrix.operators overloads operators to work on matrices
  (* a a)

  ;; a wide range of mathematical functions are defined for matrices
  (sqrt a)  

  ;; you can get rows and columns of matrices individually
  (get-row a 0)

  ;; Java double arrays can be used as vectors
  (* a (double-array [1 2]))

  ;; you can modify double arrays in place - they are examples of mutable vectors
  (let [a (double-array [1 4 9])]
    (sqrt! a)   ;; "!" signifies an in-place operator
    (seq a))

  ;; you can coerce matrices between different formats
  (coerce [] (double-array [1 2 3]))

  ;; scalars can be used in many places that you can use a matrix
  (* [1 2 3] 2)

  ;; operations on scalars alone behave as you would expect
  (* 1 2 3 4 5)

  ;; you can do various functional programming tricks with matrices too
  (emap inc [[1 2] [3 4]]) 
```

core.matrix 已经被 Rich Hickey 批准为官方 Clojure 贡献库，Incanter 很可能在未来会转而使用 core.matrix。

SQL 表支持不直接包含在 core.matrix 中，但它只是将结果集从[clojure.java.jdbc](https://github.com/clojure/java.jdbc)转换为 core.matrix 数组的一种方式。像下面这样的东西应该可以解决问题：

```
(coerce [] (map vals resultset)) 
```

然后，您可以随意使用 core.matrix 对其进行转换和处理。

# java - 尝试通过 Java 运行 Pig 时出现错误 4010

> ID：14698116
> 
> 赞同：1
> 
> 时间：2013-02-05T00:16:57.573
> 
> 标签：java, apache-pig

我正在尝试通过 Java 运行 Pig 脚本。这是我的代码现在的样子：

```
public static void main(String[] args) throws JSONException, InterruptedException, IOException {    
    Properties props = new Properties();
    props.setProperty("fs.default.name", "hdfs://<some-value>:8020");
    props.setProperty("mapred.job.tracker", "<some-value>:54311");
    PigServer pigServer = new PigServer(ExecType.MAPREDUCE, props);

    Map<String, String> params = new LinkedHashMap<String, String>();
    params.put("INPUT_PATH", "hdfs://<some-input-value>");
    params.put("OUTPUT_FILE", "hdfs:///user/<some-username>/last-login-out");

    pigServer.registerScript("last-login-by-userid.pig", params);
} 
```

但是每当我运行程序时，我都会得到：

```
Exception in thread "main" org.apache.pig.backend.executionengine.ExecException: ERROR 4010: Cannot find hadoop configurations in classpath (neither hadoop-site.xml nor core-site.xml was found in the classpath). If you plan to use local mode, please put -x local option in command line. 
```

我已将`pig-0.10.1`我从 Apache 网站下载的文件夹移动到`Applications`并添加`export PIG_HOME=/Applications/pig-0.10.1`到我的`~/.bash_profile`.

当我登录`<some-value>:8020`服务器时，我可以很好地运行 Pig 脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:41:52.787

你的hadoop安装在哪里？在我的系统上，配置在`/etc/hadoop/conf`. 将此添加到 Java 程序的类路径中。

比如由于种种原因，我没有使用安装`pig`好的bash脚本；我只是这样称呼 Pig 的`Main`课：

```
java -cp /path/to/pig-0.10.0.jar:/etc/hadoop/conf org.apache.pig.Main` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T10:44:37.397

从 Java 运行 Pig 时，我遇到了同样的异常。将 hadoop conf 目录的路径添加到项目属性库添加 jar/文件夹后，此问题已解决

参考：[http ://helpmetocode.blogspot.in/2012/04/exception-in-thread-main.html](http://helpmetocode.blogspot.in/2012/04/exception-in-thread-main.html)

谢谢，

卡莱

# sharepoint-2007 - 无法从 @ Sharepoint Farm 的网络前端之一访问报告（我可以发送快照）

> ID：14698118
> 
> 赞同：1
> 
> 时间：2013-02-05T00:17:20.933
> 
> 标签：sharepoint-2007, reportserver, web-frontend

我们在 Sharepoint Farm 中有一个报表服务器，但是当用户尝试从其中一个 WFE 连接时，他们会收到 HTTP 401 错误，但它可以与其他 WFE 正常工作。我们在场中有 2 个 Web 前端 (WFE)，PROD_MOSS01 和 PROD_MOSS02。这 2 台服务器由我们的防火墙 (Forefront TMG)​​ 进行负载平衡。客户端连接到最前沿，然后将流量发送到其中一个 WFE，并使用外部主机名。现在将 2 个 WFE 配置为使用新的单个报表服务器 PROD_REPORT。报表服务已加入场，并设置为不显示 Web 内容。它是在 SP 集成模式下配置的，但它始终默认为纯模式。如果我删除报告数据库并重新附加，它显示数据库是 SP 集成模式。当它附加时，它会恢复为 Native。因此，使用此设置，只有 1 个 WFE 能够生成报告。最初是 PROD_MOSS01 工作，而 PROD_MOSS02 抛出 401 错误。现在它似乎已经切换了哪个有效，哪个抛出了错误。所以看起来只有 1 个 WFE 可以连接到报告服务器，另一个不能。我们将场/报告服务器设置为仅使用 NTLM，但如果这是 NTLM 身份验证的限制，我们可以尝试配置 Kerberos。我还没有为新报告服务器注册 SPN。此外，如果您使用 401 错误访问服务器，则无法配置 DM_MRCS 连接字符串。它给出了一个错误，指出报告服务器必须处于 SP 集成模式并连接到场。另一个不能。我们将场/报告服务器设置为仅使用 NTLM，但如果这是 NTLM 身份验证的限制，我们可以尝试配置 Kerberos。我还没有为新报告服务器注册 SPN。此外，如果您使用 401 错误访问服务器，则无法配置 DM_MRCS 连接字符串。它给出了一个错误，指出报告服务器必须处于 SP 集成模式并连接到场。另一个不能。我们将场/报告服务器设置为仅使用 NTLM，但如果这是 NTLM 身份验证的限制，我们可以尝试配置 Kerberos。我还没有为新报告服务器注册 SPN。此外，如果您使用 401 错误访问服务器，则无法配置 DM_MRCS 连接字符串。它给出了一个错误，指出报告服务器必须处于 SP 集成模式并连接到场。

# google-app-engine - HTTPException：等待来自 URL 的 HTTP 响应时超过了截止日期：#deadline

> ID：14698119
> 
> 赞同：14
> 
> 时间：2013-02-05T00:17:23.550
> 
> 标签：google-app-engine, google-api-python-client, deadlines

我们正在使用开发人员 Python 指南和 Python 数据 2.15 库，并按照应用引擎的示例说明。createSite("测试站点一", description="测试站点一", source_site =(" [https://sites.google.com/feeds/site/googleappsforus.com/google-site-template](https://sites.google.com/feeds/site/googleappsforus.com/google-site-template) " ))

每次使用时，我们都会得到不可预测的响应。

**异常：** HTTPException：等待来自 URL 的 HTTP 响应时超出了截止日期：[https ://sites.google.com/feeds/site/googleappsforyou.com](https://sites.google.com/feeds/site/googleappsforyou.com)

有人遇到过同样的问题吗？是 AppEngine 还是 Sites API 相关的？

问候，

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-05T01:25:26.493

*等待来自 URL 的 HTTP 响应时超出*的最后期限实际上是**DeadlineExceededError**。当您发出 HTTP 请求时，App Engine 会将此请求映射到 URLFetch。URLFetch 有自己的可配置的截止日期。请参阅[URLFetch 文档](https://developers.google.com/appengine/docs/python/urlfetch/overview)。

您的客户端库似乎捕获了 DeadlineExceededError 并抛出了 HTTPException。您的客户端库将截止日期传递给 URLFetch（您需要更改），或者默认截止日期不足以满足您的请求。

尝试像这样设置默认的 URLFetch 截止日期：

```
from google.appengine.api import urlfetch
urlfetch.set_default_fetch_deadline(45) 
```

还要确保在官方文档中查看[处理 DeadlineExceededErrors 。](https://developers.google.com/appengine/articles/deadlineexceedederrors)

请记住，任何最终用户发起的请求都必须在 60 秒内完成，否则会遇到 DeadlineExceededError。请参阅[App Engine Python 运行时请求计时器](https://developers.google.com/appengine/docs/python/runtime#The_Request_Timer)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-11-19T23:03:07.700

`httplib2`在使用 和 的最新版本时，接受的解决方案对我不起作用`googleapiclient`。问题似乎是`httplib2.Http`它的 timeout 参数一直传递到`urlfetch`. 由于它的默认值为`None`，`urlfetch`因此将该请求的限制设置为 5 秒，而与您设置的任何默认值无关`urlfetch.set_default_fetch_deadline`。看来您有几个选择。

第一个选项——你可以显式地传递一个 around 的实例`httplib2.Http`：

```
http = httplib2.Http(timeout=30)
...
client.method().execute(http=http) 
```

第二个选项，您可以使用套接字¹设置默认值：

```
import socket
socket.setdefaulttimeout(30) 
```

第三个选项，您可以告诉 appengine 为请求²使用套接字。为此，您[修改`app.yaml`](https://cloud.google.com/appengine/docs/python/sockets/#making_httplib_use_sockets)：

```
env_variables:
   GAE_USE_SOCKETS_HTTPLIB : 'anyvalue' 
```

^(¹这*可能*仅适用于付费应用程序，因为套接字 api 可能不存在于未付费应用程序中...)
^(²我几乎可以肯定这仅适用于付费应用程序，因为套接字 api 不适用于未付费应用程序...)

# java - 如何使用 JFrame 在 Java 中将十进制数转换为二进制数？

> ID：14698127
> 
> 赞同：-1
> 
> 时间：2013-02-05T00:18:30.800
> 
> 标签：java, binary, decimal, jcreator

我一直在互联网上搜索所有代码，但我看到的只是缓冲阅读器。是否可以将其设为 JFrame 格式？我是 Java 新手，我想创建这个程序，它将十进制数转换为二进制数，反之亦然。你能帮我怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T00:32:19.743

*转换*和*渲染*（显示）是完全不相关的问题。

要转换，使用[`Integer.parseInt()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)和[`Integer.toBinaryString()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#toBinaryString%28int%29)：

```
String input = "10"; // some number as your input
int i = Integer.parseInt(input);
String binary = Integer.toBinaryString(i); 
```

要显示，将该字符串放入显示区域（这里太琐碎了）

# c# - 使用 HttpServer 或 HttpSelfHostServer 对 Web API 进行单元测试

> ID：14698130
> 
> 赞同：11
> 
> 时间：2013-02-05T00:18:43.310
> 
> 标签：c#, unit-testing, asp.net-web-api, self-hosting

我正在尝试为 Web API 项目做一些单元测试。我将模拟 Web API 托管环境。看来我可以使用内存主机（HttpServer）或自主机（HttpSelfHostServer）。

只是想知道有什么区别，哪种技术适用于什么，这些选项是否有任何限制。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-05T00:45:15.973

您应该使用 in memory 主机进行端到端测试，然后单独测试您的环境的网络连接性。

出于多种原因：

*   内存主机，顾名思义，完全在内存中运行，所以会快得多

*   自托管需要以提升的权限运行，因此您的测试需要在“管理员”身份的上下文中执行。这远非理想。如果您想从 ie 构建脚本或从 PowerShell 执行测试，则尤其麻烦，因为结果，这些进程也必须以提升的权限启动。此外，这必须发生在您测试的任何服务器上。

*   在自托管中，您最终会测试给定操作系统的网络堆栈，这确实是不应该测试的——因为它可能在不同的环境（开发、登台、QA、生产等）中有所不同。例如 - 给定的端口可能不可用。结果，您可能会被拖入跨不同机器的不必要的调试工作中，甚至无法运行测试。

*   最后，使用自托管进行测试，仍然不能保证服务在 Web 托管时能够正确运行，反之亦然 - 所以您不妨只在内存中进行测试

# python - 从列表中的元组中删除重复项

> ID：14698132
> 
> 赞同：0
> 
> 时间：2013-02-05T00:18:57.637
> 
> 标签：python, list, duplicates, tuples

我有一个元组列表：

```
lst = [('a','b'), ('c', 'b'), ('a', 'd'), ('e','f'), ('a', 'b')] 
```

我想要以下输出列表：

```
output = [('a','b'), ('e','f')] 
```

即我想将第一个元组的元素与剩余的元组进行比较，并删除包含一个或多个重复元素的元组。

我的尝试：

我正在考虑使用 for 循环，但是一旦我有非常大的列表，这将是不可行的。我浏览了以下帖子，但找不到正确的解决方案：

[从元组列表中删除重复成员](https://stackoverflow.com/questions/4009304/removing-duplicates-members-from-a-list-of-tuples) [如何在保留顺序的同时从列表中删除重复成员？](https://stackoverflow.com/questions/480214/how-do-you-remove-duplicates-from-a-list-in-python-whilst-preserving-order)

如果有人可以指导我正确的方向，那将非常有帮助。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T00:26:13.240

假设您希望抑制所有元素的“重复”，而不仅仅是第一个，您可以使用：

```
lst = [('a','b'), ('c', 'b'), ('a', 'd'), ('e','f'), ('a', 'b')]

def merge(x):
    s = set()
    for i in x:
        if not s.intersection(i):
            yield i
            s.update(i) 
```

给

```
>>> list(merge(lst))
[('a', 'b'), ('e', 'f')]
>>> list(merge([('a', 'b'), ('c', 'd'), ('c', 'e')]))
[('a', 'b'), ('c', 'd')]
>>> list(merge([('a', 'b'), ('a', 'c'), ('c', 'd')]))
[('a', 'b'), ('c', 'd')] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T00:25:48.330

套装应该有助于：

```
>>> s = map(set, lst)
>>> first = s[0]
>>> [first] + [i for i in s if not i & first]
[set(['a', 'b']), set(['e', 'f'])] 
```

或与`ifilterfalse`：

```
>>> from itertools import ifilterfalse
>>> s = map(set, lst)
>>> [first] + list(ifilterfalse(first.intersection, s))
[set(['a', 'b']), set(['e', 'f'])] 
```

# php - 使用 ROUND 和数学从多个表中查询 MySQL_Query

> ID：14698137
> 
> 赞同：2
> 
> 时间：2013-02-05T00:19:30.823
> 
> 标签：php, sql, database, html-table

我正在尝试为游戏“EVE Online”创建一个项目数据库供我和我的朋友使用，我设置了一个 SQL 服务器并创建了表格等，等等，一切都运行良好。但是，当我尝试从两个不同的表中导入数据并在同一个 html 表元素中将它们相互比较时，我遇到了一个问题。如果我只是从一个包含多列的表中导入，它会完美运行，但是当我尝试选择多个来源时会遇到问题。

我要拉的桌子是......

*testmetrics.eve_inv_types* 和 *testmetrics.items_sales*

理想情况下，我想从表 #1 中导入“name”、“type_id”、“jita_price_sell”列，从表 #2 中导入“price”、“type_id”、“station_id”和“qty_avail”。

我还在 jita_price_sell 和 price 上使用 ROUND 运算符来获得各种商品价格点的 2 位小数近似值。我也有它，以便在表 #2 中仅显示具有正确 station_id 的结果。但是一直报错！

到目前为止，这是我的代码...

```
<?php
$con = mysql_connect("testmetrics.db.10198246.xxxx.com","xxxx","xxxx");
if (!$con) 
{
die('Could not connect: ' . mysql_error());
}
mysql_select_db("testmetrics", $con);
$result = mysql_query("
SELECT testmetrics.eve_inv_types.name, testmetrics.eve_inv_types.type_id, ROUND(testmetrics.eve_inv_types.jita_price_sell, 2) as jita_price_sell, ROUND(testmetrics.items_selling.price, 2) as price, testmetrics.items_selling.qty_avail, testmetrics.items_selling.sation_id, testmetrics.items_selling.type_id 
FROM testmetrics.eve_inv_types, testmetrics.items_selling
WHERE testmetrics.eve_inv_types.type_id = testmetrics.items_selling.type_id, testmetrics.items_selling.station_id = '61000746'");
echo "<table class='sortable'>
<tr>
<th>Item Name</th>
<th>Price (Jita)</th>
<th>Price (K-6K16)</th>
<th>Qty Avail (K-6K16)</th>
</tr>";
while($row = mysql_fetch_array($result))
{
echo "<tr>";
echo "<td>" . $row['testmetrics.eve_inv_types.name'] . "</td>";
echo "<td>" . $row['jita_price_sell'] . "</td>";
echo "<td>" . $row['price'] . "</td>";
echo "<td>" . $row['testmetrics.items_selling.qty_avail'] . "</td>";
echo "</tr>";
}
echo "</table>";
mysql_close($con);
?> 
```

您可以提供的任何帮助或见解将不胜感激。我还希望能够做一个数学函数，在那里我`testmetrics.eve_inv_types.jita_price_sell + (testmetrics.eve_inv_types.volume * 300)`可以得到运输成本，并将其导出到它自己的列中。

非常感谢您要说的任何内容！

编辑：我知道我已经在这里寻求很多帮助，但是，有谁知道如何根据排序的列将返回限制为“前 100 名”？我正在使用 Javascript 插件来轻松排序！

这是为我解决它的代码！

```
SELECT eve_inv_types.name, 
       eve_inv_types.type_id, 
       Round(eve_inv_types.jita_price_sell, 2) AS jita_price_sell, 
       Round(items_selling.price, 2)           AS price, 
       items_selling.qty_avail,  
       items_selling.type_id 
FROM   eve_inv_types 
       JOIN items_selling
         ON eve_inv_types.type_id = items_selling.type_id 
            AND items_selling.station_id = '61000746' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:43:07.507

```
SELECT eit.name, 
       eit.type_id, 
       Round(eit.jita_price_sell, 2) AS jita_price_sell, 
       Round(eis.price, 2)           AS price, 
       eis.qty_avail, 
       eis.sation_id, 
       eis.type_id 
FROM   eve_inv_types eit 
       JOIN `items_selling` eis 
         ON eit.type_id = eis.type_id 
            AND eis.station_id = '61000746' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T00:46:13.590

您可以连接表（假设您有一个连接它们的键），这是一个示例：

```
table A:
    personId
    firstName
    lastName
    numOfChildren

table B:
    personId
    streetName
    cityName
    countryName 
```

从两者中选择（使用 personID 作为连接键）：

```
SELECT firstName, lastName, numOfChildren, streetName, cityName, countryName
FROM tableA JOIN tableB USING (personId) 
```

如果要限制结果，可以添加：

```
LIMIT 100 
```

如果您想要前 100 名父母，您可以通过以下方式订购`numOfChildren`：

```
ORDER BY numOfChildren 
```

最终查询将如下所示：

```
SELECT firstName, lastName, numOfChildren, streetName, cityName, countryName
FROM tableA JOIN tableB USING (personId)
ORDER BY numOfChildren
LIMIT 100; 
```

- 或者 -

```
SELECT firstName, lastName, numOfChildren, streetName, cityName, countryName
FROM tableA JOIN tableB ON (tableA.personId=tableB.personId)
ORDER BY numOfChildren
LIMIT 100; 
```

在此处阅读有关加入的更多信息：http: [//dev.mysql.com/doc/refman/5.1/en/join.html](http://dev.mysql.com/doc/refman/5.1/en/join.html)

# playframework - PLAY_SESSION 到期时间不可更改

> ID：14698143
> 
> 赞同：-1
> 
> 时间：2013-02-05T00:20:30.793
> 
> 标签：playframework, session-cookies

文件 application.conf 包含以下几行

```
session.maxAge=7d
application.session.maxAge=7d 
```

但是 PLAY_SESSION cookie 在创建后的到期时间约为 16 分钟。

这怎么能改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:33:47.043

似乎有必要做

```
play clean compile 
```

为了改变这个时间。

然后它工作。

# image - 如何在 JavaCV 中将 2 个图像相乘

> ID：14698147
> 
> 赞同：1
> 
> 时间：2013-02-05T00:20:47.467
> 
> 标签：image, opencv, javacv, multiplication, iplimage

我目前有一张我用过的二进制黑白图像，`cvThreshold`我想在图像的白色部分恢复颜色。

据我了解，将原始图像与二进制图像相乘会产生这种效果。但是，我不确定如何做到这一点。我正在使用 JavaCV。我试图：

```
IplImage img.mul(im2); 
```

这并没有真正奏效。如何在`mul`JavaCV 中使用 openCV 函数？此外，如果有人有关于将 opencv 代码转换为 JavaCV 的提示，我将不胜感激，JavaCV 项目页面上的内容几乎不足以让我维持生计。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T08:51:20.103

我有我自己的（可能很奇怪:)..）方法来查找在 JavaCV 中工作的函数，但在许多情况下它是有效的。有一个名为 emguCV 的 C# 的 OpenCV 包装器，它在 JavaCV 中具有与此非常相似的功能。因此，如果我想找到乘法或加法函数，我在 google:`cvMul emgu`或类似的东西中编写，这是我搜索的结果：

[维基 emgu 链接 1](http://www.emgu.com/wiki/files/1.5.0.0/Help/html/e912149c-e4ca-5742-3a23-6e501ade666c.htm)

[维基 emgu 链接 2](http://www.emgu.com/wiki/files/1.5.0.0/Help/html/db6ff03d-0e6d-64dd-2c1e-6b7507c1a047.htm)

因此，如果您想将 2 IplImages 相乘，您可以执行以下操作：

```
 IplImage Red=IplImage.create(zdj1.cvSize(),8,1); 
 IplImage Green=IplImage.create(zdj1.cvSize(),8,1);
 IplImage Result=IplImage.create(zdj1.cvSize(),8,1);
          cvMul(Red,Green,Result,1); 
```

# sql - 如何通过互联网设置主从复制？

> ID：14698150
> 
> 赞同：0
> 
> 时间：2013-02-05T00:20:55.753
> 
> 标签：sql, replication

我在云服务器上几乎没有网站/数据库，我想将这些网站/数据库复制到我的本地服务器以在大多数时间拥有当前数据。通过互联网执行此操作的正确方法是什么？我应该在两者之间使用网络服务吗？本地 DB 是 SQL Server，远程是 MySql。谢谢

# java - 尝试在 Java 中对两个整数进行按位与运算，但编译器尝试将它们用作布尔值

> ID：14698153
> 
> 赞同：0
> 
> 时间：2013-02-05T00:21:17.780
> 
> 标签：java, bit-manipulation

这是我用 C++ 编写的一个函数（有效），现在正尝试转换为 Java：

```
static String parseAInstruction(String line) {
    int n = getValue(line);
    if (n>=0) {
        String inst = "0";
        for (int i=14; i>=0; --i) {
            if (Math.pow(2, i) & n)
                inst += "1";
            else
                inst += "0";
        }
        return inst;
    } else {
        return "error";
    }
} 
```

这在 C++ 中编译得很好，但是在尝试在 Java 中编译时，出现以下错误：

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
    Type mismatch: cannot convert from int to boolean

    at parser.Parser.parseAInstruction(Parser.java:38)
    at parser.Parser.main(Parser.java:50) 
```

在Java中按位AND查找，似乎应该是一样的。它根本不应该与布尔值有关。谁能告诉我这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T00:23:15.113

在 Java 中，您只能在`if`子句中使用布尔值。`if`因此，两个数字的按位与结果在语句中无效。

试试这个：`if ((Math.pow(2, i) & n) != 0) {`。

**[编辑]**但是，正如评论者@jlordo 指出的那样，接下来您必须解决在双精度和整数之间进行按位与的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T00:25:56.277

问题是您不能只在条件表达式中使用整数 for `if`。你需要类似的东西：

```
 if (((int)Math.pow(2, i) & n) != 0) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T00:24:01.820

你的问题在这里：

```
if (Math.pow(2, i) & n) 
```

在 Java 中，您需要有一个`boolean`值作为条件。你可能想要：

```
if (((int)(Math.pow(2, i)) & n) != 0) 
```

强制转换`int`是必要的，因为`Math.pow()`将返回 a`double`并且`&`运算符仅针对两个`int`操作数定义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T00:24:17.857

> 尝试在 Java 中对两个整数进行按位与运算，但编译器尝试将它们用作布尔值

不，它没有。按位与的结果是类型`int`。Java 要求`if`语句中的表达式为布尔类型，而您的不是。您需要将表达式转换为布尔值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-05T08:39:02.347

`Math.pow`在 Java 中是用对数和指数计算的（与 C++ 不同，编译器经常优化对 的调用`pow`），两者都是非常缓慢的近似浮点运算。

在这里使用甚至没有意义 - 你正在使用位，所以使用位：

`(n & (1 << i)) != 0`就是你要找的。

# javascript - 打开 iframe 并折叠整个页面

> ID：14698157
> 
> 赞同：1
> 
> 时间：2013-02-05T00:21:45.760
> 
> 标签：javascript, ajax, jquery, iframe

用户提交表单后，我希望 iframe 打开并覆盖全屏。正常内容会折叠，因此只能看到 iframed 内容。这是怎么做的。只需打开 iframe 就会将所有内容留在其上方和下方。

```
<div id="iWait" style="display:none;"><center><iframe src="http://website.com" width="100%" height="100%"></iframe></center></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:32:54.063

请注意，在代码中定义 iframe 会导致它在后台加载。如果稍后才需要加载页面，这可能会不必要地减慢页面速度。

从这样的 HTML 开始（注意`fixed`定位）：

```
<iframe id="preventBoredom" src="http://www.domain.com/" frameborder="0" style="position: fixed; left: 0; top: 0; right: 0; bottom: 0; z-index: 1000; display: none;"></iframe> 
```

然后，`.show()`像这样揭示它：

```
$('#preventBoredom').show(); 
```

如果您只想在 iframe 显示时加载它，请将初始 iframe 设置`src`为空白 HTML 页面，并改用此 jQuery：

```
$('#preventBoredom').src('http://www.domain.com/').show(); 
```

* * *

**在回复@ROY_Finley 和@Mort_Goldman 时请注意：**我无法想象使用它的好情况，除非您打算在某个时候再次隐藏 iframe。例如，您可能希望在加载航空公司搜索结果集时让用户保持忙碌（这些通常需要一段时间才能加载）。但是这种方法会让用户认为他们在另一个站点上——如果窗口突然被核爆，他们会很生气。

如果表单处理是一个缓慢的服务器任务，您应该在继续处理之前让处理脚本关闭输出。这将允许服务器在浏览器正常运行时在后台完成其工作。

# python - Django syncdb 引发 MySQL socket.error: [Errno 111] Connection denied

> ID：14698162
> 
> 赞同：0
> 
> 时间：2013-02-05T00:22:30.667
> 
> 标签：python, mysql, django, sockets, syncdb

我已经配置了很多服务器并多次部署了这个项目，但这是我第一次遇到这个问题。

我可以通过命令行和 Sequel Pro 连接到 MySQL，这只是产生此错误的 Django 特定命令。

```
(Staging)optimal@Simon:/var/virtualenvs/Staging/app$ python manage.py syncdb
Traceback (most recent call last):
  File "manage.py", line 11, in <module>
    execute_manager(settings)
  File "/var/virtualenvs/Staging/lib/python2.7/site-packages/django/core/management/__init__.py", line 438, in execute_manager
    utility.execute()
  File "/var/virtualenvs/Staging/lib/python2.7/site-packages/django/core/management/__init__.py", line 379, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/var/virtualenvs/Staging/lib/python2.7/site-packages/django/core/management/base.py", line 191, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/var/virtualenvs/Staging/lib/python2.7/site-packages/django/core/management/base.py", line 219, in execute
    self.validate()
  File "/var/virtualenvs/Staging/lib/python2.7/site-packages/django/core/management/base.py", line 249, in validate
    num_errors = get_validation_errors(s, app)
  File "/var/virtualenvs/Staging/lib/python2.7/site-packages/django/core/management/validation.py", line 36, in get_validation_errors
    for (app_name, error) in get_app_errors().items():
  File "/var/virtualenvs/Staging/lib/python2.7/site-packages/django/db/models/loading.py", line 146, in get_app_errors
    self._populate()
  File "/var/virtualenvs/Staging/lib/python2.7/site-packages/django/db/models/loading.py", line 61, in _populate
    self.load_app(app_name, True)
  File "/var/virtualenvs/Staging/lib/python2.7/site-packages/django/db/models/loading.py", line 78, in load_app
    models = import_module('.models', app_name)
  File "/var/virtualenvs/Staging/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/var/virtualenvs/Staging/releases/20130204145734/apps/orpheus/files/models.py", line 17, in <module>
    from orpheus.orders.models import Order
  File "/var/virtualenvs/Staging/releases/20130204145734/apps/orpheus/orders/models.py", line 29, in <module>
    from orpheus.variable_images.models import Newsletter
  File "/var/virtualenvs/Staging/releases/20130204145734/apps/orpheus/variable_images/models.py", line 144, in <module>
    class Topper(mixins.ModifiedDates):
  File "/var/virtualenvs/Staging/releases/20130204145734/apps/orpheus/variable_images/models.py", line 149, in Topper
    file = CouchDBFileField(storage=LongTermStorage(), blank=True)
  File "/var/virtualenvs/Staging/releases/20130204145734/apps/orpheus/files/storage.py", line 183, in __init__
    self.db = server[kwargs.get('database')]    
  File "/var/virtualenvs/Staging/lib/python2.7/site-packages/couchdb/client.py", line 137, in __getitem__
    db.resource.head() # actually make a request to the database
  File "/var/virtualenvs/Staging/lib/python2.7/site-packages/couchdb/http.py", line 377, in head
    return self._request('HEAD', path, headers=headers, **params)
  File "/var/virtualenvs/Staging/lib/python2.7/site-packages/couchdb/http.py", line 419, in _request
    credentials=self.credentials)
  File "/var/virtualenvs/Staging/lib/python2.7/site-packages/couchdb/http.py", line 239, in request
    resp = _try_request_with_retries(iter(self.retry_delays))
  File "/var/virtualenvs/Staging/lib/python2.7/site-packages/couchdb/http.py", line 205, in _try_request_with_retries
    raise e
socket.error: [Errno 111] Connection refused 
```

我只是希望有一个我忽略的明显解决方案。希望其他人遇到了这个问题，我没有使用谷歌找到任何东西。

# php - 对于不是“id”的主键，CakePHP 验证错误不显示

> ID：14698165
> 
> 赞同：0
> 
> 时间：2013-02-05T00:22:51.960
> 
> 标签：php, html, cakephp, cakephp-2.0

我有一个主键为“staff_code”的模型

我有如下客户验证规则：

```
public $validate = array(
        'staff_code' => array(
            'unique' => array(
                'rule' => 'isUnique',
                'message' => 'This Staff Code already exists',
                'last' => true
            ),
            'sc_required' => array(
                'rule' => 'notEmpty',
                'message' => 'The Staff Code must be specified',
        ))

    ); 
```

当字段不唯一时，不会显示验证错误

有没有人克服这个错误，我认为它与用户输入的主键有关。

我必须保持架构原样，因为它被另一个软件使用，并且改变它的工作方式将是一场真正的噩梦。

不确定是否需要，但我的观点是：

```
<?php

echo $this->Form->create('Staff');
echo $this->Form->inputs(array(
    'staff_code' => array('type' => 'text', 'autocomplete' => 'off'),
    'login_name' => array('type' => 'text', 'autocomplete' => 'off'),
    'person_name' => array('type' => 'text', 'autocomplete' => 'off'),
    'password',
    '_allowed_to_do_po',
    'is_active'
));
echo $this->Form->input('role', array('options' =>
    array('user' => 'user', 'admin' => 'admin'), 'empty' => false, 'default'=>'user'));
echo $this->Form->end(array(
    'label' => 'Save',
    'class' => 'btn'
));
?> 
```

...以及来自 Staff 控制器的自定义保存功能：

```
function emSave($data) {
    if (!$this->find('first', array('conditions' => array('staff_code' => $data['Staff']['staff_code'])))) {
        if ($this->save($data)) {
            return true;
        } else {
            return false;
        }
    } else {
        return false;
    }
} 
```

注意：错误消息适用于我的其他没有主键的字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:53:34.917

我认为，问题在于，在调用 save 之前，您正在控制器中进行验证查找。Save 会自动调用您的验证，因此您无需先查找它，这就是 Unique 规则的全部意义，它会为您完成。

`'required' => true`如果您希望该字段有效， 您可能还想添加到您的验证中。

但是，在我看来，让用户在数据库中输入主键字段是不好的做法。它应该是自动生成的并且对用户不可见。

# graph - Tinkerpop - 将 Redis 用于键值属性索引还是使用 KeyIndexableGraph 更好

> ID：14698166
> 
> 赞同：2
> 
> 时间：2013-02-05T00:22:53.667
> 
> 标签：graph, redis, key-value, gremlin

非常简单的问题，但我找不到我想要的信息 - 是否建议使用 tinkerpop 的 KeyIndexableGraph 或在 redis 等性能最高和专业的商店上推出自己的超高性能键/索引解决方案来获取节点/边缘您需要的位置？

在我看来，Redis 作为一种只关注键/值查找然后将地址传递到图表的技术在这里应该更好，但我想证明成本是合理的。

tinkerpop 的承诺是索引查找应该是 log(n) 对使用非常好的属性进行索引的文章。是否有可能在 redis 中做得更好，或者 n*constant 比在图形查找中要好得多？

编辑：我后来意识到这不是一个真正的智能问题——Redis 是一个内存存储，因此受内存的限制。查找图形节点位置仍然需要在图形中再次查找节点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T00:35:45.737

重要的是要记住，除了 TinkerGraph（内存中的图）之外，TinkerPop 本身并不是一个图数据库。KeyIndexableGraph 是一个由底层图数据库（Titan、Neo4j、OrientDB 等）利用该图的索引功能实现的接口。因此，您应该根据底层图形数据库本身的功能来选择索引。

一般来说，为实现 KeyIndexableGraph 的图的索引目的实现 Redis 似乎是一个不必要的层。我猜想它会使您的编程复杂化而没有太多好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:40:32.397

区别如下：像 OrientDb 这样的数据库在索引上有 apx O(log2n) 查找时间。Reddis 有 O(1) - 恒定时间查找。

# c# - 代表我的菜单的局部视图 - VS2012 C#.NET MVC 4.0

> ID：14698171
> 
> 赞同：0
> 
> 时间：2013-02-05T00:23:33.117
> 
> 标签：c#, .net, entity-framework, partial-views

我有一个带有 PagesContext 的 Page 模型。

我有一个 MenuController，我想将它作为部分视图包含到 _Layout 中。这个 _Menu 包括 Page 模型：

```
@model IEnumerable<************.Models.Page>

<ul id="menu">
    <li>@Html.ActionLink("Home", "Index", "Home")</li>
    <li>@Html.ActionLink("About", "About", "Home")</li>
    <li>@Html.ActionLink("Contact", "Contact", "Home")</li>
    @foreach( var item in Model )
    {
        <li>@Html.ActionLink( item.Title, "Index", new { controller = "Menu", id = item.Id } )</li>                                
    }
</ul> 
```

我的 MenuController 创建了 Page 模型的一个实例：

```
public class MenuController : Controller
{
    private PagesContext db = new PagesContext();

    //
    // GET: /Menu/

    public ActionResult Index()
    {
        return View("Shared/_Menu", db.pages.ToList());
    }
} 
```

并将 IEnumerable 返回到视图。

编译时出现此错误：***未将对象引用设置为对象的实例。***

这个错误指向我的 foreach 的开始？有任何想法吗？

# web-services - OAuth2 - 使用一个令牌保护多个 Web 服务的 API

> ID：14698172
> 
> 赞同：2
> 
> 时间：2013-02-05T00:23:45.407
> 
> 标签：web-services, security, oauth, oauth-2.0

我有三个 Web 服务公开它们的 API。

在内部，它们在不同的端口上运行，但在同一台服务器上。然后我有一个 nginx 实例将这些服务映射到“api.domain.com”，以便可以从 Web 访问它们。

现在我需要保护这些服务，我正在考虑 OAuth2。不幸的是，我没有使用 OAuth2 的经验，所以我想知道是否有一种方法可以为所有三个 Web 服务使用一个访问令牌，而无需为每个服务提供不同的身份验证。

我要做的是让消费者能够获得一次授权，然后访问 api.domain.com 下的所有服务（这只是对我们内部服务的反向代理转发请求）。

然后我需要创建一个简单的接口来对这些服务执行某些操作。它将允许我的用户使用他们的帐户信息登录，当然这个接口本身就是这些服务的消费者，我可以跳过授权部分并允许这个应用程序通过登录来代表用户工作吗？它将与服务在同一台服务器上运行。

我可以使用 OAuth2 做到这一点，还是我更好地寻找其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T06:47:15.803

是的，无论您是否使用 OAuth，您都可以这样做。

您可以拥有一个位于需要身份验证的服务/应用程序前面的反向代理。如果请求未经身份验证，它将重定向到正在使用的任何身份验证机制。一旦发生这种情况，它会设置一个经过身份验证的请求标头，其中包含用户名，并且请求将传递给配置的任何规则。

我不确定 nginx，但我使用了 mod_authnz_ldap、mod_auth_cas 等 apache 模块来确保通过它的请求经过身份验证。这是我的 apache 配置示例，它使用 CAS 进行身份验证并检查用户 LDAP 组的授权（用户应该属于开发人员组）

```
# a2enmod
#    proxy_http
#    auth_cas
#    authnz_ldap

<VirtualHost *:80>
    ServerName servername

    LogLevel debug

    CASVersion 2
    CASDebug On 
    CASValidateServer Off
    CASLoginURL cas <loginurl>
    CASValidateURL <casvalidateurl>

    <Location />
        AuthType CAS

        AuthLDAPUrl ldap
        AuthLDAPGroupAttribute memberUid
        AuthLDAPGroupAttributeIsDN off

        Require valid-user
        Require ldap-group cn=developers,ou=Groups,dc=company,dc=com
        Satisfy All
    </Location>  

    ProxyPreserveHost On
    ProxyRequests Off
    ProxyPass / http://localhost:8080/
    ProxyPassReverse / http://localhost:8080/
</VirtualHost> 
```

Oauth 是否适合您，实际上取决于您的用例。从我所见，您并不需要这样做，但我也没有足够的信息。

# xml - Bash 将 XML 解析为数组

> ID：14698173
> 
> 赞同：3
> 
> 时间：2013-02-05T00:23:53.793
> 
> 标签：xml, arrays, bash, parsing, xml-parsing

我正在做一个混合语言脚本，父脚本是 bash （不要问为什么，这是一个很长的故事）。我的脚本的一部分将 XML 页面的源提取到一个变量中。我想使用 bash 将变量中的 XML 处理成几个数组。XML 设置如下：

```
<event>
    <id>34287352</id>
    <what>New Post</what>
    <when>1 Minute Ago 03:50 PM</when>
    <title>This is a title</title>
    <preview>sdfasd</preview>
    <poster>
            <![CDATA[ USERNAME ]]>
    </poster>
    <threadid>2346566</threadid>
    <postid>34287352</postid>
    <lastpost>1360021837</lastpost>
    <userid>3291696</userid>
    <forumid>2</forumid>
    <forumname>General Discussion</forumname>
    <views>201,913</views>
    <replies>6,709</replies>
    <statusicon>images/statusicon/thread.gif</statusicon>
</event> 
```

XML 文件中有 20 个`<event>`。我想从 XML 中提取什么标题和预览，并将它们全部放入自己的数组中

我在 SOF 上遵循了一个示例

```
for tag in  what title preview 
do
OUT=`grep  $tag $source | tr -d '\t' | sed 's/^<.*>\([^<].*\)<.*>$/\1/' `

# This is what I call the eval_trick, difficult to explain in words.
eval ${tag}=`echo -ne \""${OUT}"\"`
done

W_ARRAY=( `echo ${what}` )
T_ARRAY=( `echo ${title}` )
P_ARRAY=( `echo ${preview}` )

echo ${W_ARRAY[0]}
echo ${T_ARRAY[0]}
echo ${P_ARRAY[0]} 
```

但是使用上面我的脚本总是会吓坏并重复`grep: <part of the xml>: No such file or directory`

想法？

编辑：

好吧，它很难看，但我设法将 sudoxml 放入一个数组

```
windex=0
tindex=0
pindex=0
while read -r line
do
WHAT=$(echo ${line} | awk -F "</?what>" '{ print $2 }')
if [ "$WHAT" != "" ]; then
    W_ARRAY[$windex]=$OUT
    let windex+=1
fi
TITLE=$(echo ${line} | awk -F "</?title>" '{ print $2 }')
if [ "$TITLE" != "" ]; then
    T_ARRAY[$tindex]=$OUT
    let tindex+=1
fi
PREVIEW=$(echo ${line} | awk -F "</?preview>" '{ print $2 }')
if [ "$PREVIEW" != "" ]; then
    P_ARRAY[$pindex]=$OUT
    let pindex+=1
fi
done <<< "$source" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:41:10.363

我有一些非常相似的东西，解析明智，这是一个被黑的版本

我使用 xsltproc（在 ubuntu 中，但不记得我是否专门安装了它）

命令行

```
xsltproc tfile.xslt tfile.xml 
```

tfile.xml （您的示例被复制了 3 次），包含在事件标签中，即。

```
<events>
     <event> ... </event>
     <event> ... </event>
     <event> ... </event>
</events> 
```

tfile.xsl：

```
<?xml version='1.0'?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

<xsl:output method='text'/>
<!-- ================================================================== -->
<xsl:template match="/">
    <xsl:apply-templates select="//event"/>
</xsl:template>

<xsl:template match="event">
 <xsl:text>event[</xsl:text><xsl:value-of select="position()"/><xsl:text>]['id']=</xsl:text>
 <xsl:value-of select="id"/> <xsl:text> </xsl:text>

 <xsl:text>event[</xsl:text><xsl:value-of select="position()"/><xsl:text>]['what']=</xsl:text>
 <xsl:value-of select="what"/><xsl:text> </xsl:text>

 <xsl:text>event[</xsl:text><xsl:value-of select="position()"/><xsl:text>]['preview']=</xsl:text>
 <xsl:value-of select="preview"/><xsl:text> </xsl:text>

 <xsl:text>
</xsl:text>
</xsl:template>

</xsl:stylesheet> 
```

输出

```
event[1]['id']=34287352 event[1]['what']=New Post event[1]['preview']=sdfasd 
event[2]['id']=34287353 event[2]['what']=New Post3 event[2]['preview']=sdfasd 
event[3]['id']=34287354 event[3]['what']=New Post4 event[3]['preview']=sdfasd 
```

希望您了解一点 xslt 处理，根据需要更改输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T00:38:54.643

好吧，现在这完全没有帮助，但我目前正在使用命令行 xml 解析器。如果它完成了（如果我没有被顶级编码器马拉松游行分散注意力的话，它已经完成了......），你可以简单地写成：

```
eval $(echo "$source" | xidel - -e '<event>
    <what>{$W_ARRAY}</what>
    <title>{$T_ARRAY}</title>
    <preview>{$P_ARRAY}</preview>
</event>*' --output-format bash) 
```

看起来很神奇，不是吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T01:28:32.510

回顾一下我的评论，您的代码有什么问题：

1-由于您的`$source`变量不是文件名，因此您应该在 grep 中使用：

```
OUT=`echo $source | grep  $tag | tr -d '\t' | sed 's/^<.*>\([^<].*\)<.*>$/\1/' ` 
```

2-您的`tr`命令替换了`tab`类 XML 变量中的所有 s。但是，rour 变量不包含`tab`s，而是包含 4 个空格。

因此，您需要拥有：

```
... | tr -d '    ' | ... 
```

3-另一种解决方案是：

```
OUT=`echo $source | grep  $tag | sed 's/<.*>\([^<].*\)<.*>$/\1/' ` 
```

（请注意，删除了`^`中的`sed`）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T19:23:25.453

一切正常。对于那些曾经计划在这里做类似事情的人来说，这是 haps：

```
on run argv
set region to item 1 of argv
set XML_URL to "http://" & region & ".<URL REMOVED>.com/board/vaispy-secret.php?do=xml"
try
    tell application "Safari"
        set URL of tab 1 of front window to XML_URL
        my waitforload()
        --delay 5
        -- Get page source
        set currentTab to current tab of front window
        set currentSource to currentTab's source
        return currentSource
    end tell
on error err
    log "Could not retrieve source."
    log err
    display dialog err
    --return "NULL"
end try

end run

on waitforload()
--check if page has loaded
local loadflag, zarg, test_html
set loadflag to 0
repeat until loadflag is 1
    delay 0.5
    tell application "Safari"
        set test_html to source of document 1
    end tell
    try
        set zarg to text ((count of characters in test_html) - 10) thru (count of characters in test_html) of test_html
        if "</events>" is in text ((count of characters in test_html) - 10) thru (count of characters in test_html) of test_html then
            set loadflag to 1
        end if
    end try
end repeat
end waitforload 
```

创建 bash 脚本：

```
#!/bin/bash
clear

if [ "$1" == "na" ]; then
region="na"
elif [ "$1" == "eu" ]; then
region="euw"
else
echo "FRcli requires an argument."
echo "usage: [eu|na]"
echo "[eu scans EUW & EUNE]"
echo "[na scans NA]"
exit $?
fi

while true; do
clear
echo "Region: $region"
echo "...Importing Naughty"

declare -a NAUGHTY=()
nindex=0
while read line
do
    NAUGHTY[$nindex]=$line
    let nindex+=1

done < $HOME/Desktop/naughty.txt
NC=${#NAUGHTY[@]}
let NC-=1
echo "...Pulling Source"

source=$(osascript FRcli.scpt $region)

echo "...Extracting Arrays"

windex=0
tindex=0
pindex=0
dindex=0
while read -r line
do
    #WHAT=$(echo ${line} | awk -F "</?what>" '{ print $2 }')
    WHAT=$(echo ${line} | sed -n 's/^.*<what>\([^<]*\).*/\1/p')
    if [ "$WHAT" != "" ]; then
        W_ARRAY[$windex]=$WHAT
        let windex+=1
    fi

    #TITLE=$(echo ${line} | awk -F "</?title>" '{ print $2 }')
    TITLE=$(echo ${line} | sed -n 's/^.*<title>\([^<]*\).*/\1/p')
    if [ "$TITLE" != "" ]; then
        T_ARRAY[$tindex]=$TITLE
        let tindex+=1
    fi

    #PREVIEW=$(echo ${line} | awk -F "</?preview>" '{ print $2 }')
    #PREVIEW=$(echo ${line} | sed -n '/<preview*/,/<\/preview>/p')
    PREVIEW=$(echo ${line} | sed -n 's/^.*<preview>\([^<]*\).*/\1/p')
    if [ "$PREVIEW" != "" ]; then
        P_ARRAY[$pindex]=$PREVIEW
        let pindex+=1
    fi

    POSTID=$(echo ${line} | sed -n 's/^.*<postid>\([^<]*\).*/\1/p')
    if [ "$POSTID" != "" ]; then
        D_ARRAY[$dindex]=$POSTID
        let dindex+=1
    fi

done <<< "$source"

echo "What: ${#W_ARRAY[@]}"
echo "Title: ${#T_ARRAY[@]}"
echo "Preview: ${#P_ARRAY[@]}"
echo "PostID: ${#D_ARRAY[@]}"

for ((i=0; i <= 19; i++))
do
    found=0
    fpid=""
    if [ "${W_ARRAY[$i]}" = "New Thread" ]; then
        echo "Scanning Thread"
        scan=$(echo ${T_ARRAY[$i]} ${P_ARRAY[$i]})
        echo "Title: ${T_ARRAY[$i]}"
        echo "Post: ${P_ARRAY[$i]}"
    else
        echo "Scanning Post"
        scan=$(echo ${P_ARRAY[$i]})
        echo "Post: ${scan}"        
    fi
    sleep .5
    for ((n=0; n<=$NC; n++))
    do
        nw=${NAUGHTY[$n]}
        a=$(echo ${scan} | tr [:lower:] [:upper:])
        b=$(echo ${nw} | tr [:lower:] [:upper:])
        echo "Checking: $b"
        #echo "$a"

        if [[ $a == *$b* ]]; then
        ## Change != to == in release
            echo "Found: $b"
            found=1
            echo "...Loading PID"
            declare -a PID=()
            pindex=0
            while read line
            do
                PID[$pindex]=$line
                let pindex+=1

            done < $HOME/Desktop/pid.txt
            PIDC=${#PID[@]}

            for (( p=0; p<=$PIDC ; p++))
            do
                lpid=${PID[$p]}
                if [ "$region ${D_ARRAY[$i]}" == "$lpid" ]; then
                    echo "Found: $lpid"
                    echo "Ignoring Flag"
                    fpid=1
                elif [ "$region ${D_ARRAY[$i]}" != "$lpid" ]; then
                    echo "$region ${D_ARRAY[$i]} $lpid"
                    echo "PID not found, opening URL."
                    fpid=0
                    break
                else
                    echo "Hi"
                    fpid=1
                fi

            done

            if [ "$found" == "1" -a "$fpid" == "0" ]; then
                FFURL="http://$region.<URL REMOVED>.com/board/showthread.php?p=${D_ARRAY[$i]}&highlight=$nw"
                open -a Firefox "$FFURL"
                echo $region ${D_ARRAY[$i]} >> $HOME/Desktop/pid.txt            
                found=0
                fipd=""
            fi
        fi
    done
    sleep .5
done

if [ "$1" == "eu" ]; then
    if [ "$region" == "euw" ]; then
        region="eune"
    else
        region="euw"
    fi
fi
clear 
```

完成我相信他们是更有效的方法。在 bash 脚本中使用 cURL 将使这成为一次脚本交易（由于此板 iSpy 的安全性，无法使用此脚本）。但这很有效，而且非常活泼。仅使用 AVG 32.7 Mem，据我所知没有任何内存泄漏（就像我的 100% applescript 版本一样）

# wpf - 尝试打开 WPF 项目时，Visual Studio 2012 崩溃

> ID：14698194
> 
> 赞同：0
> 
> 时间：2013-02-05T00:26:16.147
> 
> 标签：wpf, debugging, visual-studio-2012, crash, attach-to-process

每当我打开 WPF 项目时，Visual Studio 都会崩溃。我启动第二个实例并将进程附加到第一个实例，一旦项目“打开”，我会收到以下错误：

> > *Microsoft.VisualStudio.Progression.LanguageService.CSharp.dll 中出现“System.MissingFieldException”类型的未处理异常*
> > 
> > *附加信息：找不到字段：“Microsoft.VisualStudio.Progression.Actions.GetNodeAtSourcePosition”。*

我不完全确定该怎么做。我之前已经重新安装了一次 Visual Studio，但仍然出现错误。对这个问题的任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:38:33.837

使用 VS2012 创建新项目时遇到同样的问题。应用 VS2012 Update 1 对我有用。

[http://www.microsoft.com/en-us/download/details.aspx?id=35774](http://www.microsoft.com/en-us/download/details.aspx?id=35774)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:36:37.737

在此之前，您的系统中是否安装了 Beta 版的 Visual Studio？你现在的VS是什么版本？如果是，那么您需要手动删除 VS Beta 版本的所有组件。

# html - 我可以扩展\包含静态 html 页面吗？

> ID：14698196
> 
> 赞同：0
> 
> 时间：2013-02-05T00:26:53.253
> 
> 标签：html, templates, inheritance, include, extend

> **可能重复：**
> [避免重复的 HTML](https://stackoverflow.com/questions/7177995/avoid-repeated-html)

我有 2 个静态 html 页面：

*   **main.html**
    这包含我的 html、head 和 body 标签。在其中，我还添加了指向 css 样式表和 javascript 页面（如 jquery）的链接。

*   **home.html**
    我的主页，欢迎用户。

我不想复制所有的脚本引用，所以我希望我可以将 main.html 扩展到 home.html。我以前没有用纯 html 页面做过这个，所以不知道从哪里开始。
我还计划在 main.html 中加入页眉、页脚和导航栏，并希望我的所有其他页面都继承它。

谁能告诉我这是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:30:14.750

使用 PHP 并制作 header.php footer.php 等

**主页.html**

```
<?php include('file.php'); ?> 
```

html正常

# css - 单击选项卡时更改背景颜色

> ID：14698199
> 
> 赞同：0
> 
> 时间：2013-02-05T00:27:16.670
> 
> 标签：css

单击选项卡时如何将背景更改为完全相同的颜色？目前，它只是保持相同的颜色。当页面加载时，是否可以让第一个选项卡的颜色与内容区域的背景颜色相同？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>CSS-TABS | CSS-Only "DOM TABS"</title>

<style type="text/css">

    #pagewidth { width: 760px; margin: 0 auto 0 auto; }

    #navigation { margin: 0 10em 0 0; background: #000000; color: #FFFFFF; }
    #navigation li { display: inline; padding: 0 2em 0 2em; }

    .content { background: #CCCCCC; height: 20em; padding: 1em;}

    a { color: #0066FF; }
    a:hover { color: #00CCFF; }
    a:active { font-weight:bold; }

    #container { height: 20em; overflow: hidden; }

</style>

</head>

<body>

<div id="pagewidth">

    <ul id="navigation">
        <li><a href="#c1">Content Block 1</a></li>
        <li><a href="#c2">Content Block 2</a></li>
        <li><a href="#c3">Content Block 3</a></li>
    </ul>

    <div id="container">

        <div class="content">
            <a name="c1" id="c1"></a>
            <h1>Heading 1</h1>
            <p>Here is some content, I hope that you like it!</p>
        </div>

        <div class="content">
            <a name="c2" id="c2"></a>
            <h2>Heading 2</h2>
            <p>Now that you have read content block 1, you can learn more in this block</p>
        </div>

        <div class="content">
            <a name="c3" id="c3"></a>
            <h3>Heading 3</h3>
            <p>In conclusion, content blocks are fun</p>
        </div>

    </div> <!-- end container -->

</div> <!-- end pagewidth -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:43:59.050

你只需要多一点 HTML 和一点 CSS，就像这样：

CSS 添加：

```
.content .sub{ height: 20em; padding: 1em; }
...
#sub1{ background: blue; }
#sub2{ background: green; }
#sub3{ background: yellow; } 
```

和：

```
<div class="sub" id="sub1">...</div> 
```

...作为选项卡内容的包装器。

最终页面如下所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>CSS-TABS | CSS-Only "DOM TABS"</title>
<style>
    #pagewidth { width: 760px; margin: 0 auto 0 auto; }

    #navigation { margin: 0 10em 0 0; background: #000000; color: #FFFFFF; }
    #navigation li { display: inline; padding: 0 2em 0 2em; }

    .content { background: #CCCCCC; }
    .content .sub{ height: 20em; padding: 1em; }

    a { color: #0066FF; }
    a:hover { color: #00CCFF; }
    a:active { font-weight:bold; }

    #container { height: 20em; overflow: hidden; }

    #sub1{ background: blue; }
    #sub2{ background: green; }
    #sub3{ background: yellow; }
</style>
</head>
<body>
<div id="pagewidth">

<ul id="navigation">
    <li><a href="#c1">Content Block 1</a></li>
    <li><a href="#c2">Content Block 2</a></li>
    <li><a href="#c3">Content Block 3</a></li>
</ul>

<div id="container">

    <div class="content">
        <a name="c1" id="c1"></a>
        <div class="sub" id="sub1">
        <h1>Heading 1</h1>
        <p>Here is some content, I hope that you like it!</p>
        </div>
    </div>

    <div class="content">
        <a name="c2" id="c2"></a>
        <div class="sub" id="sub2">
        <h2>Heading 2</h2>
        <p>Now that you have read content block 1, you can learn more in this block</p>
        </div>
    </div>

    <div class="content">
        <a name="c3" id="c3"></a>
        <div class="sub" id="sub3">
        <h3>Heading 3</h3>
        <p>In conclusion, content blocks are fun</p>
        </div>
    </div>

</div> <!-- end container -->

</div> <!-- end pagewidth -->

</body>
</html> 
```

这是一个展示其工作原理的 JSFiddle：http: [//jsfiddle.net/fDk3z/](http://jsfiddle.net/fDk3z/)

# gwt - 带有水平 SimplePanel 的 GWT ScrollPanel

> ID：14698201
> 
> 赞同：0
> 
> 时间：2013-02-05T00:27:33.170
> 
> 标签：gwt

我正在尝试在水平面板中实现滚动面板。
我读了这篇文章 [GWT Horizo​​ntal panel with Horizo​​ntal scrolling](https://stackoverflow.com/questions/9537722/gwt-horizontal-panel-with-horizontal-scrolling)

答案似乎很好，但是我想知道 ravi 是否用滚动面板包裹了他的简单面板，反之亦然。

基本上我想知道面板是如何相互嵌套的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:06:37.863

滚动面板没什么特别的——它只是一个带有一些 CSS 设置的 DIV 元素。这就是另一个问题的答案的含义，因为 a`SimplePanel`只是一个显示为 DIV 的小部件。

所以另一个答案是通过以下方式创建一个滚动小部件：

*   创建一个`SimplePanel`作为内容容器
*   `overflow-x`设置一些带有属性的CSS `SimplePanel`
*   设置内容现在将有一个水平滚动条（由于 CSS 属性）。

如果您喜欢更直接的方式，请查看[UiBinder](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder)。使用它，您可以将小部件/CSS/HTML 元素组合成更接近浏览器呈现 UI 的形式。因此，例如，您可以使用所需的 CSS 创建一个 DIV 来实现滚动容器。

# android - 从 Activity 向 intentService 发送消息

> ID：14698204
> 
> 赞同：0
> 
> 时间：2013-02-05T00:28:18.127
> 
> 标签：android, intentservice

我的问题如下：

我从我的主要活动开始了我的意图服务。此 intentService 使用 audioRecord 进行一些音频处理。

但是，当我需要在我的应用程序中启动另一个活动（在这种情况下是录制视频）时，我需要在后台停止 intentService（因为它占用了音频资源）。

有没有办法从主要活动中停止 intentService？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:42:14.810

`intent`使用与启动 IntentService 并调用相同的预先声明

```
stopService(intent); 
```

如果您创建一个新的意图并使用它来停止服务，则服务将不会响应它，直到它完成对先前意图的处理。

但需要注意的是，这不会立即停止服务。所以解决这个问题的方法是有一个全局布尔变量。当它设置为 true 时，服务内的处理将执行，当您想要结束它时，将您的活动中的布尔变量设置为 false。然后你可以通过调用从自身内部停止服务

```
stopSelf(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T01:40:32.330

您可以像这样从主要活动中使用 stopService()：

```
stopService(new Intent(yourMainActivity.this,yourIntentService.class)); 
```

# c++ - C++ 头文件重新定义/声明混淆

> ID：14698205
> 
> 赞同：0
> 
> 时间：2013-02-05T00:28:28.847
> 
> 标签：c++, include, header-files

我试图从一个简单的程序中抽象出一个方法。此方法根据预先声明的 CAPACITY 常量测试数组的长度，如果不满足条件，则会发出错误消息。但是，我无法使用 .cpp 文件创建头文件来保存该方法。

头文件：

```
 //arrayHelper.h
    #ifndef ARRAYHELPER_H
    #define ARRAYHELPER_H

    void arrayLengthCheck(int & length, const int capacity, string prompt);

    #endif // ARRAYHELPER_H 
```

代码文件：

```
 //arrayHelper.cpp
    #include <iostream>
    #include <string>
    #include "arrayHelper.h"

    using namespace std;

    void arrayLengthCheck(int & length, const int capacity, string prompt)
    {
        // If given length for array is larger than specified capacity...
        while (length > capacity)
        {
            // ...clear the input buffer of errors...
            cin.clear();
            // ...ignore all inputs in the buffer up to the next newline char...
            cin.ignore(INT_MAX, '\n');
            // ...display helpful error message and accept a new set of inputs
            cout << "List length must be less than " << capacity << ".\n" << prompt;
            cin >> length;
        }
    } 
```

运行这个 main.cpp 文件，其中包含头文件中的`#include "arrayHelper.h"`错误。`string is not declared`在头文件中包含字符串无效，但`#include "arrayHelper.cpp"`会导致重新定义方法。我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T00:30:15.250

您应该`#include <string>`在标题中，并引用`string`as `std::string`，因为`using namespace std`在头文件中是一个坏主意。其实这也是个[坏`.cpp`主意](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)。

```
//arrayHelper.h
#ifndef ARRAYHELPER_H
#define ARRAYHELPER_H

#include <string>

void arrayLengthCheck(int & length, const int capacity, std::string prompt);

#endif // ARRAYHELPER_H 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T00:30:29.577

`string`在头文件中使用但找不到符号。

移至`#include <string>`并`arrayHelper.h`全部替换`string`为`std::string`

边注：

本地调用`using namespace std;`是惯用的方式，`prompt`通过引用传递可以省略一个副本。以下是对您的代码的略微增强：

数组助手.h

```
#ifndef ARRAYHELPER_H
#define ARRAYHELPER_H

#include <string>

void arrayLengthCheck(int & length, const int capacity, const std::string& prompt);

#endif // ARRAYHELPER_H 
```

数组助手.cpp

```
#include <iostream>
#include "arrayHelper.h"

void arrayLengthCheck(int & length, const int capacity, const std::string& prompt)
{
   using namespace std;    

    // If given length for array is larger than specified capacity...
    while (length > capacity)
    {
        // ...clear the input buffer of errors...
        cin.clear();
        // ...ignore all inputs in the buffer up to the next newline char...
        cin.ignore(INT_MAX, '\n');
        // ...display helpful error message and accept a new set of inputs
        cout << "List length must be less than " << capacity << ".\n" << prompt;
        cin >> length;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T00:36:30.770

你需要`std::string`在你的头文件中说...

# javascript - 引用函数中的数组项（作为字符串）javascript

> ID：14698207
> 
> 赞同：0
> 
> 时间：2013-02-05T00:28:40.127
> 
> 标签：javascript, arrays

我创建了一个字符串数组，格式为“monthX”，其中是一个在整个数组中增加的数字。

我有一个函数，我试图引用数组的特定项目，但它一直以未定义的形式出现。这是我的代码：

```
function listCategories() {
    categoryList.innerHTML = ""

    for (var propertyName in categoryObject) {
        var rowHTML = "<div>"
        rowHTML += "<span class = 'category'>" + categoryObject[propertyName].name + "</span>"
        rowHTML += "<span class = '" + monthList[3] + "'><input/></span>"
        rowHTML += "</div>"
        categoryList.innerHTML += rowHTML
    }
}

//Months to load in
for (var i=0; i<24; i++) {
    monthList[i] = "month" + (i + startingMonth)
} 
```

我感兴趣的区域是“monthList[3]”行。即使我 console.log(monthList[3]) 它正确地说“month6”，它仍然未定义。有任何想法吗？我的代码中有错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:35:19.277

好吧，两个问题：你什么时候叫“listCategories()”？在设置月份列表之前还是之后？

而且，你有没有先为monthList设置全局？

```
 //globalize monthList array to be usable in functions
var monthList;

function listCategories() {
    categoryList.innerHTML = ""

    for (var propertyName in categoryObject) {
        var rowHTML = "<div>"
        rowHTML += "<span class = 'category'>" + categoryObject[propertyName].name + "</span>"
        rowHTML += "<span class = '" + monthList[3] + "'><input/></span>"
        rowHTML += "</div>"
        categoryList.innerHTML += rowHTML
    }
}

//Months to load in
for (var i=0; i<24; i++) {
    monthList[i] = "month" + (i + startingMonth)
}

//do NOT CALL listCategories prior this line!! 
```

那应该做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T00:35:53.167

在您向我们展示的代码中，您从未将其声明`monthList`或定义为数组。

```
function listCategories() {
    categoryList.innerHTML = ""

    for (var propertyName in categoryObject) {
        var rowHTML = "<div>"
        rowHTML += "<span class = 'category'>" + categoryObject[propertyName].name + "</span>"
        rowHTML += "<span class = '" + monthList[3] + "'><input/></span>"
        rowHTML += "</div>"
        categoryList.innerHTML += rowHTML
    }
}

var monthList = [],
    startingMonth = 1;

//Months to load in
for (var i=0; i<24; i++) {
    monthList[i] = "month" + (i + startingMonth)
} 
```

请注意我在函数定义之后、循环之前添加的附加行。

# matlab - 如何在 matlab 中使用 isempty 函数或其他函数？

> ID：14698218
> 
> 赞同：0
> 
> 时间：2013-02-05T00:29:40.510
> 
> 标签：matlab, simulation

我不知道如何使用`isempty`函数，例如：

模拟的第一个矩阵是

```
[18 1 0 0 0;12 0 0 0 1;15 1 1 0 0] 
```

模拟的第二个矩阵是

```
[25 0 0 0 0;30 1 1 0 0;14 0 0 1 0] 
```

模拟的第三个矩阵是

```
[50 1 0 0 0;12 0 0 1 0;24 1 1 1 0] 
```

我使用了以下功能：

```
idxfun=@(x)find(ismember(x(:,2:end),[1 0 0 0],'rows'))

a=the first matrix(idxfun(the first matrix),:) 
```

答案如下：`18 1 0 0 0`第二个矩阵答案是： `empty matrix:0-by-5`那么模拟停止！我想要的是让模拟继续并转到下一个矩阵，在这个例子中答案将是`50 1 0 0 0`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:52:59.073

只需通过`isempty`函数发送结果：

```
temp = [25 0 0 0 0;30 1 1 0 0;14 0 0 1 0];
h = idxfun(temp);
if (isempty(h))
    disp('Pattern not found');
else
    disp('Pattern found');
end

temp = [12 0 0 1 0;50 1 0 0 0;24 1 1 1 0];
h = idxfun(temp);
if (isempty(h))
    disp('Pattern not found');
else
    disp('Pattern found');
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T07:30:55.497

您可以使用`try`和`catch`

```
 try
    a = result( idxfun( result ), : );
 catch em
    a = [];
    fprintf(1, 'no match found\n');
 end 
```

# windows-7 - 我可以插入一些字符来获得更长的 SAPI5 TTS 暂停吗？

> ID：14698227
> 
> 赞同：1
> 
> 时间：2013-02-05T00:30:31.073
> 
> 标签：windows-7, text-to-speech, sapi

我知道 TTS 系统会在句点 (.) 或逗号 (,) 处暂停。但是我怎样才能让它暂停更长的时间呢？例如，在问答场景中，我希望语音朗读问题并暂停片刻，以便听众可以在脑海中回答问题，然后语音朗读答案。

我尝试将一系列句点串在一起，但它们似乎在 TTS 中合并为一个，以便它们有效地暂停与单个句点相同的长度（Linux 上的节日没有这样做，但在 Windows SAPI 上似乎这样做）。

我可以使用某些字符或字符序列来获得更长的停顿吗？或者另一种实现这一目标的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T02:15:49.870

人物不行。使用[XML 标记](http://msdn.microsoft.com/en-us/library/ms717077%28v=vs.85%29.aspx)更好地控制这一点，传递 SPF_IS_XML 标志：

```
 HRESULT hr = pVoice->Speak(L"Hello <silence msec=\"1000\"/> world", 
                  SPF_IS_XML, NULL ); 
```

或者您可以使用带有 SPF_PARSE_SSML 标志的[SSML 文档](http://www.w3.org/TR/speech-synthesis/)`<break>`，使用以下元素：

```
<speak version="1.0" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US">
   Hello<break time="1000ms" />world
</speak> 
```

如果您可以使用 C#，那么 PromptBuilder 类对于构建 SSML 非常方便：

```
 private SpeechSynthesizer synth = new SpeechSynthesizer();

    private void sayHello() {
        var builder = new PromptBuilder();
        builder.AppendText("Hello");
        builder.AppendBreak(TimeSpan.FromMilliseconds(1000));
        builder.AppendText("world");
        synth.SpeakAsync(new Prompt(builder));
   } 
```

# c# - MemoryCache.AddOrGetExisting 有什么用？

> ID：14698228
> 
> 赞同：27
> 
> 时间：2013-02-05T00:30:38.033
> 
> 标签：c#, .net, memorycache

[MemoryCache.AddOrGetExisting](http://msdn.microsoft.com/en-us/library/dd988741.aspx)的行为描述为：

> 使用指定的键和值以及绝对过期值将缓存条目添加到缓存中。

它返回：

> 如果存在具有相同key的缓存条目，则现有缓存条目；否则为空。

具有这些语义的方法的目的是什么？这有什么例子？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-05T10:56:36.173

在某些情况下，您只想在不存在匹配条目的情况下创建缓存条目（即，您不想覆盖现有值）。

[`AddOrGetExisting`](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.addorgetexisting.aspx)允许您以原子方式执行此操作。没有[`AddOrGetExisting`](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.addorgetexisting.aspx)它就不可能以原子的、线程安全的方式执行 get-test-set。例如：

```
 Thread 1                         Thread 2
 --------                         --------

 // check whether there's an existing entry for "foo"
 // the call returns null because there's no match
 Get("foo")

                                  // check whether there's an existing entry for "foo"
                                  // the call returns null because there's no match
                                  Get("foo")

 // set value for key "foo"
 // assumes, rightly, that there's no existing entry
 Set("foo", "first thread rulez")

                                  // set value for key "foo"
                                  // assumes, wrongly, that there's no existing entry
                                  // overwrites the value just set by thread 1
                                  Set("foo", "second thread rulez") 
```

（另请参阅该[`Interlocked.CompareExchange`](http://msdn.microsoft.com/en-us/library/4wx2c0dx.aspx)方法，它可以在变量级别实现更复杂的等效项，以及有关[test-and-set](http://en.wikipedia.org/wiki/Test-and-set)和[compare-and-swap](http://en.wikipedia.org/wiki/Compare-and-swap)的维基百科条目。）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-04-14T17:23:11.220

LukeH的回答是正确的。因为其他答案表明该方法的语义可以有不同的解释，所以我认为值得指出的是`AddOrGetExisting`，实际上*不会*更新现有的缓存条目。

所以这段代码

```
Console.WriteLine(MemoryCache.Default.AddOrGetExisting("test", "one", new CacheItemPolicy()) ?? "(null)");
Console.WriteLine(MemoryCache.Default.AddOrGetExisting("test", "two", new CacheItemPolicy()));
Console.WriteLine(MemoryCache.Default.AddOrGetExisting("test", "three", new CacheItemPolicy()));

```

将打印

```
（空值）
一
一

```

另一件需要注意的事情：当`AddOrGetExisting`找到一个现有的缓存条目时，它*不会*处理传递给调用的 CachePolicy。如果您使用设置昂贵的资源跟踪机制的自定义更改监视器，这可能会出现问题。通常，当缓存条目被驱逐时，缓存系统会调用`Dipose()`您的 ChangeMonitors。这使您有机会取消注册事件等。但是，当`AddOrGetExisting`返回现有条目时，您必须自己处理。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-05T00:54:52.487

我实际上并没有使用过这个，但我想一个可能的用例是，如果您想用特定键的新条目无条件地更新缓存，并且您想显式处理返回的旧条目。

# c - 操作系统导致的 irq 延迟是多少？

> ID：14698229
> 
> 赞同：5
> 
> 时间：2013-02-05T00:30:58.763
> 
> 标签：c, linux, linux-kernel, arm, irq

*   如何估计 ARM 处理器上的 irq 延迟？
*   irq 延迟的定义是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T00:39:34.073

1.  中断请求 (irq) 延迟是中断请求从中断源传输到将被服务的点所需的时间。

2.  因为通过不同路径来自不同来源的不同中断，显然它们的延迟取决于中断的类型。[您可以在 ARM 站点上](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0164a/CIHDFIDE.html)找到有关特定中断的延迟（值和原因）的很好解释的表格

[您可以在ARM9E-S Core Technical Reference Manual](http://infocenter.arm.com/help/topic/com.arm.doc.ddi0240b/DDI0240A.pdf)中找到有关它的更多信息：

> **4.3 最大中断延迟**
> 
> ***如果在多周期指令开始其第二个或更晚的执行周期的同时断言采样信号，则在指令完成之前不会开始中断异常进入。***
> 
> 最长的 LDM 指令是加载所有寄存器的指令，包括 PC。
> 
> 将第一个 Execute 周期计为 1，LDM 需要 16 个周期。
> 
> • LDM 传输的最后一个字在周期 17 中传输，在该周期中返回传输的中止状态。
> 
> • 如果发生数据中止，处理器会在周期 18 中检测到这一点，并准备在周期 19 中进入数据中止异常。
> 
> • 周期20 和21 分别是Data Abort 入口的Fetch 和Decode 阶段。
> 
> • 在周期 22 期间，处理器准备 FIQ 进入，在周期 23 和 24 中发出 Fetch 和 Decode 周期。
> 
> • 因此，FIQ 例程中的第一条指令在阶段 25 进入流水线的执行阶段，**给出 24 个周期的最坏情况延迟**。

和

> **最小中断延迟**
> 
> FIQ 或 IRQ 的最小延迟是输入寄存器可以对请求进行采样的最短时间（一个周期）加上异常进入时间（三个周期）。第一条中断指令在中断被断言后四个周期进入执行流水线阶段

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T00:50:35.347

中断延迟分为三个部分：

1.  中断控制器自己接收中断。现代处理器倾向于很快地做到这一点，但是在设备发出它的引脚信号和中断控制器拾取它之间仍然有一段时间——即使它只有 1ns，也是时间[或任何发出中断信号的方法]。
2.  直到处理器开始执行中断代码本身的时间。
3.  应该处理中断的实际代码运行之前的时间 - 即在处理器确定哪个中断以及驱动程序代码或类似代码的哪一部分应该处理中断之后。

通常操作系统不会对1产生任何影响。操作系统肯定会影响2。例如，操作系统有时会禁用中断[以避免中断干扰某些关键操作，例如修改要执行的操作使用中断处理，或在调度新任务时，甚至在中断处理程序中执行时。一些操作系统可能会在几毫秒内禁用中断，而一个好的实时操作系统最多不会禁用超过微秒的中断。

当然，从中断处理程序中的第一条指令运行到实际驱动程序代码或类似代码运行所花费的时间可能是相当多的指令，并且操作系统负责所有这些指令。

对于实时行为，重要的是“最坏情况”，在非实时操作系统中，整体执行时间更为重要，因此如果不启用数百条指令的中断会更快，因为它可以节省几个“启用中断，然后禁用中断”的指令，Linux 或 Windows 类型的操作系统可能会选择这样做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T15:30:05.783

Mats 和 Nemanja 提供了一些关于[中断延迟](http://en.wikipedia.org/wiki/Interrupt_latency)的好信息。除了Mats 给出的三个问题之外，我还要补充~~两个问题。~~

1.  其他同时/接近同时的中断。
2.  由于屏蔽中断而增加了操作系统延迟。**编辑：**这是 Mats 的回答，只是没有解释太多。

如果单个内核正在处理中断，那么当多个中断同时发生时，通常会有一些解析优先级。但是，除非启用**优先级**中断处理，否则中断通常在中断处理程序中被禁用。例如，一个缓慢的 NAND 闪存 IRQ 发出信号并运行，然后发生以太网中断，它可能会延迟到 NAND 闪存 IRQ 完成。当然，如果您有**优先**中断并且您担心 NAND 闪存中断，那么如果以太网被优先考虑，情况实际上可能会更糟。

第二个问题是当主线代码**清除/设置**中断标志时。通常这是通过类似的方式完成的，

```
mrs   r9, cpsr
biceq r9, r9, #PSR_I_BIT 
```

检查Linux 源代码中的[*arch/arm/include/asm/irqflags.h*](https://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=arch/arm/include/asm/irqflags.h;hb=HEAD)以获取主行代码使用的许多宏。一个[典型的序列](https://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=arch/arm/include/asm/bitops.h;hb=HEAD)是这样的，

```
lock interrupts;
manipulate some flag in struct;
unlock interrupts; 
```

如果`struct`导致页面错误，则可能会引入非常大的中断延迟。中断将在页面错误处理程序的持续时间内被屏蔽。

Cortex-A9 有许多无[锁指令，可以通过](http://en.wikipedia.org/wiki/Non-blocking_algorithm)[从不屏蔽中断](https://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=arch/arm/include/asm/atomic.h;hb=HEAD)来防止这种情况；因为汇编指令比`swp/swpb`. 第二个问题很像**ldm/stm**类型指令导致的 IRQ 延迟（这些只是运行时间最长的指令）。

最后，很多技术讨论将假设RAM**处于零等待状态。**很可能需要填充缓存，如果您知道内存数据速率（可能是 2-4 个机器周期），那么最坏情况的代码路径将乘以这个。

是否有 SMP 中断处理、优先级中断和无锁主线取决于你的内核配置和版本；这些是**操作系统**的问题。其他问题是 CPU/SOC 中断控制器和[中断代码本身](https://stackoverflow.com/questions/14674392/how-many-instructions-does-linux-kernel-need-in-order-to-handle-an-interrupt-on)固有的。

# php - 对象上下文 - 在 PHP 5.3 与 PHP 5.4 中使用 $this

> ID：14698230
> 
> 赞同：1
> 
> 时间：2013-02-05T00:31:11.587
> 
> 标签：php, scope, fuelphp

我有一个在 FuelPHP 框架上构建的 Web 应用程序。我的本地开发环境正在运行 PHP 5.4，而我的服务器正在运行 PHP 5.3。在我的开发环境中，从我的主模板文件中，我能够

```
<?php var_dump($this->active_request); ?> 
```

这导致一堆关于请求的数据（一个 Fuel\Core\Request 对象）被转储到一个模式对话框中供我参考。但是，当我尝试在生产服务器（PHP 5.3）上运行完全相同的脚本时，它给了我旧的“ErrorException [错误]：不在对象上下文中使用 $this”

我知道使用实例化对象和静态访问方法之间的区别。我的问题是，为什么不同版本的 PHP 会将相同的模板文件视为具有不同的上下文？或者是否存在其他一些配置细微差别会导致两个环境的功能明显不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:16:14.113

我不知道 FuelPHP，但看起来模板包含在闭包中。从 PHP 5.4 开始，闭包可以绑定到一个对象并具有`$this`. 默认情况下，它是创建闭包的对象。另请参阅：[https ://stackoverflow.com/a/5734109/664108](https://stackoverflow.com/a/5734109/664108)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T09:46:16.287

正确的。视图呈现在一个闭包中，该闭包旨在充当沙箱。

视图中的 $this 应该不起作用，但看起来在 PHP 5.4 中它会在调用堆栈中拾取更高的对象，因为它给你请求，而不是视图或你的控制器。这已经表明它使用起来不可靠，因为 $this 所代表的将取决于调用堆栈。

即使您不使用模板引擎，在视图中使用“逻辑”也被认为是不好的做法，而不是生成 HTML 所需的逻辑。将所需的数据从控制器传递给视图，或者使用 Viewmodel 来准备数据。

# css - IE 在使用“font-family: monospace”时使用 Courier 字体

> ID：14698234
> 
> 赞同：1
> 
> 时间：2013-02-05T00:31:56.327
> 
> 标签：css, internet-explorer

我有一些（测试）HTML，如下所示：

```
<!DOCTYPE html>

<html lang="en">

<head>
  <title>Test Monospace</title>
  <style>
  tt { font-family: monospace; }
  </style>
</head>

<body>
  <h1>Test Monospace</h1>
  <p>This is normal text</p>
  <p><tt>This is monospaced text</tt></p>
</body>

</html> 
```

当我在 IE 中显示这个时，等宽文本使用 Courier New 而不是我在 IE 中配置的字体。如果我除了删除`<style>...</style>`块之外什么都不做，它会正确使用配置的字体。

它只对 IE 执行此操作，而不是 FF 或 GC。Windows 7 上的 IE 9。

无论样式在何处配置，包括单独的样式表或使用样式属性，它都会执行此操作。

真正的问题是指定 font-family 和 font-size 是解决浏览器使用以下样式处理等宽文本问题的关键：

```
/* monospaced sizes are horribly broken in browser default stylesheets */
code, kbd, pre, samp, tt {
    font-family     : monospace,monospace; /* Chrome   (but note that this makes IE use "Courier New" for some strange reason, as does plain monospace.) */
    font-size       : 1em;                 /* Firefox, IE,Opera */
    } 
```

有谁知道如何阻止 IE 这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T08:54:39.753

`monospace`不是特定的字体系列。完全像`serif`or `sans-serif`，它们是通用族定义。

`font-family: monospace;`只是告诉浏览器使用默认的“[等宽字体](http://en.wikipedia.org/wiki/Monospaced_font)”，在这种情况下是 Courier New。另请参阅[此资源](http://www.w3schools.com/cssref/pr_font_font-family.asp)。

**编辑：**

如果您在 CSS 中省略了`font-family`for 规则`tt`，IE9 似乎会显示自定义设置的纯文本字体。请看这个小提琴：http: [//jsfiddle.net/sVCwd/1/](http://jsfiddle.net/sVCwd/1/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T05:38:23.737

似乎在 IE 中，`monospace`意味着 Courier New。更改“纯文本字体”的 IE 设置会影响某些元素的默认字体，例如`tt`，但不会更改`monospace`. 在一个[旧的讨论](http://www.itlisting.org/2-internet-explorer/0e22ad2e8649d45c.aspx)中，一个似乎知道他在说什么的人写道：“（请不要对可以使用工具、Internet 选项选择的衬线字体和等宽字体发表评论。它们与默认的 CSS 通用字体无关。）” </p>

作为 IE 用户，如果您想更改 的含义，我想您需要在 Windows 注册表中为其找到一个条目（我无法在 Windows 7 中找到它——例如`monospace`找不到）。`IEFixedFontName`

但是，如果您只是希望某些元素以您喜欢的等宽字体呈现（就实际效果而言，这几乎是相同的），您可以设置一个用户样式表，其内容如下

```
code, kbd, pre, samp, tt, xmp, listing, plaintext {
    font-family: Consolas !important;
} 
```

# .net - 如何使用 EnterpriseLibrary 和模拟登录到数据库？

> ID：14698235
> 
> 赞同：1
> 
> 时间：2013-02-05T00:32:01.660
> 
> 标签：.net, database, logging, enterprise-library, impersonation

我正在尝试使用企业库将异常记录到数据库中。我有应用程序设置以在连接到数据库时使用模拟，但是当它尝试记录任何内容时它似乎不起作用（其余时间工作正常）。

日志记录块是否忽略模拟或我错过了什么？跟踪数据库时，它显示机器名称正在尝试连接到数据库的错误，而不是我用来模拟的服务帐户。

以下是一些配置：

```
<configSections>
<section name="loggingConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.LoggingSettings, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="true" />
<section name="exceptionHandling" type="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Configuration.ExceptionHandlingSettings, Microsoft.Practices.EnterpriseLibrary.ExceptionHandling, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="true" />
<section name="dataConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Data.Configuration.DatabaseSettings, Microsoft.Practices.EnterpriseLibrary.Data, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="true" />
<section name="cachingConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Caching.Configuration.CacheManagerSettings, Microsoft.Practices.EnterpriseLibrary.Caching, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="true" />
<section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" /> 
```

```
<loggingConfiguration name="" tracingEnabled="true" defaultCategory="General" revertImpersonation="false">
<listeners>
  <add name="Event Log Listener" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.FormattedEventLogTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.FormattedEventLogTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" source="Enterprise Library Logging" formatter="Text Formatter" log="" machineName="." traceOutputOptions="None" />
  <add name="Database Trace Listener" type="Microsoft.Practices.EnterpriseLibrary.Logging.Database.FormattedDatabaseTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging.Database, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Database.Configuration.FormattedDatabaseTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging.Database, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" databaseInstanceName="Reporting" writeLogStoredProcName="WriteLog" addCategoryStoredProcName="AddCategory" formatter="Text Formatter" traceOutputOptions="LogicalOperationStack, DateTime, Timestamp, ProcessId, ThreadId, Callstack" />
</listeners>
<formatters>
  <add type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" template="Timestamp: {timestamp}{newline}&#xA;Message: {message}{newline}&#xA;Category: {category}{newline}&#xA;Priority: {priority}{newline}&#xA;EventId: {eventid}{newline}&#xA;Severity: {severity}{newline}&#xA;Title:{title}{newline}&#xA;Machine: {localMachine}{newline}&#xA;App Domain: {localAppDomain}{newline}&#xA;ProcessId: {localProcessId}{newline}&#xA;Process Name: {localProcessName}{newline}&#xA;Thread Name: {threadName}{newline}&#xA;Win32 ThreadId:{win32ThreadId}{newline}&#xA;Extended Properties: {dictionary({key} - {value}{newline})}" name="Text Formatter" />
</formatters>
<categorySources>
  <add switchValue="All" name="General">
    <listeners>
      <add name="Database Trace Listener" />
      <add name="Event Log Listener" />
    </listeners>
  </add>
</categorySources>
<specialSources>
  <allEvents switchValue="All" name="All Events" />
  <notProcessed switchValue="All" name="Unprocessed Category" />
  <errors switchValue="All" name="Logging Errors &amp; Warnings">
    <listeners>
      <add name="Database Trace Listener" />
    </listeners>
  </errors>
</specialSources> 
```

```
<add name="Reporting" connectionString="Data Source=reports\reportsdev;Initial Catalog=ReportsD;Integrated Security=True" providerName="System.Data.SqlClient" />

<identity impersonate="true" userName="name" password="pwd"/> 
```

**更新：** 我在 loggingConfiguration 部分添加了 revertImpersonation="false" 属性，但它似乎没有任何效果。

**更新 2：** 如果其他人遇到同样的问题，这不是 EnterpriseLibrary 问题。它与页面生命周期和模拟有关。在生命周期的这一点（应用程序错误块）中，尚未发生模拟，因此无法连接到数据库进行日志记录。对于这一部分，我改为在代码中手动启动模拟来解决这个问题。

# ruby-on-rails - 使用会话变量设置数据库连接

> ID：14698236
> 
> 赞同：4
> 
> 时间：2013-02-05T00:32:12.223
> 
> 标签：ruby-on-rails, ruby, rails-activerecord

我知道我不应该这样做，但我不知道我该怎么做。我想根据登录的用户使用不同的数据库。所以我认为最好的方法是在第一次用户登录时设置会话变量......

这是它的样子：

```
class Stuff < ActiveRecord::Base
    establish_connection(
        :adapter  => "mysql2",
        :host     => "127.0.0.1",
        :username => session["dbuser"],
        :password => session["dbuserpass"],
        :database => session["dbname"]) 
```

这当然行不通。有谁知道如何做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:22:34.750

您可以将方法重写为：

```
class Stuff < ActiveRecord::Base
 def establish_connection_user(user, pass, database)
   establish_connection(
    :adapter  => "mysql2",
    :host     => "127.0.0.1",
    :username => user,
    :password => pass,
    :database => database)
  end
end 
```

在你的控制器中：

```
 class StuffController < ApplicationController
    def login #example 
      stuff = Stuff.new
      stuff.establish_connection_user(
        session[:dbuser], 
        session[:dbuserpass],
        session[:dbname]) 
    end 
```

这样，您还可以封装它并使细节不那么明显。我建议你也加密你的 cookie，这样你就不会暴露凭据。你可以从这个答案中得到一个想法：

[使用 Rails 存储加密的 cookie](https://stackoverflow.com/questions/9364962/storing-an-encrypted-cookie-with-rails)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T00:42:42.253

您可以像这样在模型中选择数据库：

```
establish_connection "db_name_#{session[:something]}" 
```

这样，您的模型就知道要拉/推数据的数据库。

看看这个： http: [//m.onkey.org/how-to-access-session-cookies-params-request-in-model](http://m.onkey.org/how-to-access-session-cookies-params-request-in-model)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T20:11:55.420

如果您可以选择使用 PostgreSQL，则可以使用 PostgreSQL 的模式特性为每个用户有效地拥有单独的表命名空间（模式）。这样做的好处是您仍然连接到同一个数据库（从而避免破坏 Rails API），但在数据库分离方面您可以获得多个 DB 的相同好处。

如果您订阅了 RailsCasts Pro（9 美元/月），Ryan Bates 有一个关于这个主题的精彩视频：[http ://railscasts.com/episodes/389-multitenancy-with-postgresql](http://railscasts.com/episodes/389-multitenancy-with-postgresql)

Jerod Santo 在他的博客上也写了一篇很棒的文章：http: [//blog.jerodsanto.net/2011/07/building-multi-tenant-rails-apps-with-postgresql-schemas/](http://blog.jerodsanto.net/2011/07/building-multi-tenant-rails-apps-with-postgresql-schemas/)

在这两个示例中，他们都使用子域在租户/模式之间切换，但您可以轻松地将其链接到用户记录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T19:30:00.010

正如 kwon 在对原始问题的评论中所暗示的那样，我将通过使用会话来处理它，仅保留用户的身份。然后，我将从模型中的逻辑和一个中央数据库（默认的 rails DB）中提取所需的数据库连接，以保存用户详细信息和用户连接信息。

从修改您的用户模型开始（假设您的用户有一个保存在中央数据库中的模型）

*   向用户添加一个属性，表示要使用的数据
*   在您的应用程序控制器中，根据会话密钥在 before_filter 中设置用户
*   使用用户参数初始化您的 Stuff 模型

然后，您可以根据 database.yml 查找您的数据库连接。或者，如果每个用户有一个数据库，并且您需要它是动态的，则创建第二个模型（在中央数据库中）表示与用户模型上的外键的数据库连接。

以下是一堆在现实中可能有效也可能无效的代码，但希望能为您提供一个入门模板。

```
class ApplicationController < ActionController::Base
  before_filter :set_user

  def set_user
    begin
      @user = UserProfile.find(session[:usernumber]) if session[:usernumber]        
    rescue
      logger.warn "Possible error in set_user. Resetting session: #{$!}"
      @user=nil
      session[:usernumber]=nil
      reset_session
    end
  end

end

class StuffController < ApplicationController
  def show
    @stuff = Stuff.user_get(@user, params[:id])
  end
end

class Stuff < ActiveRecord::Base
  # This would be better moved to a module to reuse across models
  def self.establish_connection_user(user)
    establish_connection(user.connection_hash)
  end
  def establish_connection_user(user)
    establish_connection(user.connection_hash)
  end

  def self.user_get user, item_id        
    establish_connection_user(user)
    find(id)
  end

  def self.user_where user, *query_args        
    establish_connection_user(user)
    where(query_args)
  end
  # Even better than replicating 'where', create model methods 
  # that are more representative of your desired functionality
end

class User  < ActiveRecord::Base
  has_one :user_connection
  def connection_hash
    uc = self.user_connection
    {:database=>uc.db, :password=>uc.pass, :user=>uc.username, :host=>uc.dbhost, :adapter=>uc.adapter}
  end
  # User probably contains other user-facing details
end 
```

# ios - 以编程方式编辑 UITableView 在所有行上显示删除按钮

> ID：14698242
> 
> 赞同：5
> 
> 时间：2013-02-05T00:33:10.503
> 
> 标签：ios, uitableview

我知道我可以滑动以在一行上显示红色的减号按钮，然后让我点击它以显示右侧的删除按钮。我也知道我可以将其设置`UITableView`为编辑模式，该模式将在左侧显示红色减号按钮，然后我可以点击以显示删除按钮。

`UITableView`但是，当我进入编辑模式时，我想在每一行上显示删除按钮。我找不到这样做的方法，并且网络搜索充满了有关删除一行的常见主题的结果，而不是在所有行上显示删除按钮。

如何以编程方式在 a 中的每一行上显示右侧的 Delete 按钮`UITableView`？不是左侧的红色减号按钮。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-12-06T15:13:59.323

[tableView setEditing:YES 动画:YES];

# html - 虽然不是 EOF 在另一个而不是 EOF 在 ASP CLASSIC 中不起作用

> ID：14698243
> 
> 赞同：1
> 
> 时间：2013-02-05T00:33:20.750
> 
> 标签：html, asp-classic

当我在另一个而不是 EOF 中放置一段时间而不是 EOF 时，下面的代码会中断。这在 ASP Classic 代码中是非法的吗？我如何解决它？

```
<table cellspacing = "0" cellpadding = "3" class = "horiz ">
    <tr>
        <th width = "20%">Acronym</th>
        <th width = "50%">Meaning</th>
        <th width = "30%">Source</th>
    </tr>
    <%
    count = 0
    pletter = "z"
    fletter = left(con("acronym"),1)
    %>
     <% while (NOT con.EOF) %>
    <tr>
        <td colspan = "3" ><h2><a name="A">A</a></h2></td>
    </tr>
     <% while (NOT con.EOF) %>
    <tr>
        <td><%=con("acronym")%></td>
        <td><%=con("meaning")%></td>
        <td><%=con("source")%></td>
    </tr>
     <%
    con.MoveNext()
    Wend
    %>
    <%
    con.MoveNext()
    Wend
    %>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T00:41:27.180

为什么没有一个 while 循环。添加 if 语句以确定第一个字符是否已更改（例如，从 A 到 B）。如果字符发生变化，则添加一个 TR 以显示该字符。

```
dim lastCharacter = ""
while (not con.EOF)
    dim firstLetterOfAcronym  = left(con("acronym"),1)
    if lastCharacter <> firstLetterOfAcronym then
       rem show TR of firstLetterOfAcronym
       lastCharacter = firstLetterOfAcronym 
    end if

    <tr>..... show row as usual </tr>
    con.MoveNext()
wend 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:54:29.720

假设您的记录集按 Acronym 排序。

这就像@Valamas 他的解决方案一样，意味着一个循环，但更完整的例子。

```
<table cellspacing = "0" cellpadding = "3" class = "horiz">
    <tr>
        <th width = "20%">Acronym</th>
        <th width = "50%">Meaning</th>
        <th width = "30%">Source</th>
    </tr>
    <%
    mainletter = ""

    While (NOT con.EOF)
        letter = Left(con("acronym")
        If mainletter <> letter Then
            %>
            <tr>
                <td colspan = "3" ><h2><a name="<%=letter%>"><%=letter%></a></h2></td>
            </tr>   
            <%
            mainletter = Left(con("acronym"),1)
        End If
        <tr>
            <td><%=con("acronym")%></td>
            <td><%=con("meaning")%></td>
            <td><%=con("source")%></td>
        </tr>
        <%
        con.MoveNext()
    Wend
    %>
</table> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-05T03:58:50.300

一旦到达记录集的末尾（通过循环），它就不会重置回起点（除非您也告诉它），所以一旦在第二个循环开始时到达第一个循环中的记录集的末尾，它就是已经在最后了。

我会重写您的代码，因为它不是很合乎逻辑，但是如果您希望代码按原样工作，请在循环结束后添加 movefirst 以返回记录集的开头。

```
...
</tr>
 <%
con.MoveNext()
Wend
con.movefirst
con.MoveNext()
Wend
%>
</table> 
```

编辑：实际上，如果你这样做，你最终会进入一个循环，在第一个循环之前克隆记录集并循环两个具有相同数据的不同记录集。否则重写以更清洁一点。

# mysql - 从 unix 时间戳中选择最近的每月周年纪念日

> ID：14698244
> 
> 赞同：1
> 
> 时间：2013-02-05T00:33:21.743
> 
> 标签：mysql, unix-timestamp

我有一个在注册时插入 Unix 时间戳的应用程序。我想做的是计算自上一个每月周年纪念日以来的月份的使用详细信息。所以我需要一个最近周年纪念日的unix时间戳。

例如，如果在 1 月 5 日提交注册，则客户的周年纪念日为 5 日。因此，要检查 2 月 15 日的使用情况，我需要从 2 月 5 日以来的日志中检索所有条目。

获得注册日期很容易：

```
SELECT DATE_FORMAT(FROM_UNIXTIME(created), '%d') FROM  accounts 
```

但是，我找不到基于注册日的最后一个周年日期的 unix 时间戳。我该怎么做？澄清一下，我希望返回在最近的周年日期或之后创建的所有 action_id。

表：

```
accounts
+------------+------------+
| account_id | created    |
+------------+------------+
| 1          | 1321838910 |
+------------+------------+
....

logs
+------------+------------+------------+
| account_id | action_id  | created    |
+------------+------------+------------+
| 1          | 233        | 1348249244 |
+------------+------------+------------+
| 1          | 263        | 1348257653 |
+------------+------------+------------+
.... 
```

注意：为了简单起见，例如，如果周年纪念日是 31 日，我将放弃弄清楚会发生什么——也就是说，除非有人有一个超级忍者声明将这些事件考虑在内。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:49:31.687

未测试。看你怎么想。逻辑是：

1.  获取当月的最后一天。
2.  将帐户创建天数添加到 #1 结果。
3.  如果当前日期大于创建日期，则从 #2 结果中减去 1 个月。否则减去 2 个月。

* * *

```
SELECT l.*
FROM accounts a
LEFT JOIN logs l
ON a.account_id = l.account_id 
 AND l.created >= UNIX_TIMESTAMP(
  DATE_SUB(DATE_ADD(LAST_DAY(NOW()), INTERVAL DAY(FROM_UNIXTIME(a.created)) DAY),  
    INTERVAL IF(DAY(NOW()) > DAY(FROM_UNIXTIME(a.created)), 1, 2) MONTH)); 
```

* * *

**编辑**

我对此进行了更多思考，也许无论周年纪念日是什么时候，下面的查询都会起作用。我假设如果周年纪念日不在特定月份，则应采用该月的最后一天。这很难看，但我添加了一些变量以使其更简洁，必须有更好的方法。无论如何，我没有测试，但逻辑如下。

1.  如果当天 > 周年纪念日，则只需减去天数差即可获得日期。
2.  否则，如果上个月的最后一天小于周年纪念日，则使用上个月的最后一天。
3.  否则从上个月的最后一天减去周年纪念日和上个月最后一天之间的天差。

* * *

```
SELECT l.*
FROM accounts a
JOIN logs l
ON a.account_id = l.account_id 
 AND l.created >= UNIX_TIMESTAMP(
   IF(@dNow := DAY(NOW()) >= @dCreated := DAY(FROM_UNIXTIME(a.created)),
     DATE_SUB(NOW(), INTERVAL @dNow - @dCreated DAY),
      IF(DAY(@endLastMonth := LAST_DAY(DATE_SUB(NOW(), INTERVAL 1 MONTH))) <= @dCreated, 
        @endLastMonth,
        DATE_SUB(@endLastMonth, INTERVAL DAY(@endLastMonth) - @dCreated DAY)))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T00:49:42.907

也许这使用 desc 的顺序来获取最近的创建日期？

```
SELECT DATE_FORMAT(FROM_UNIXTIME(X.created), '%d') 
FROM  (
SELECT CREATED
FROM mytable
WHERE ACCOUNT_ID = ? -- customer id
AND DATE_DIFF(DATE_FORMAT(FROM_UNIXTIME(CREATED),'%Y-%m-%d'), NOW()) MOD 30 = 0 
AND DATE_DIFF(DATE_FORMAT(FROM_UNIXTIME(CREATED),'%Y-%m-%d'), NOW()) / 30 = 1
ORDER BY CREATED DESC LIMIT 1)X; 
```

# java - 访问者模式中的泛型过度杀伤

> ID：14698253
> 
> 赞同：3
> 
> 时间：2013-02-05T00:34:28.530
> 
> 标签：java, generics, visitor-pattern

我正在从事一个项目，我正在将十年前编写的旧 java 1.2 代码转换为 java 7。该项目大量（过度）使用特定的访问者。为了在概念上保持简单，假设访问者是这样的：

```
public interface RobotVisitor {
    public Object visitHead(Head p, Object arg);
    public Object visitNeck(Neck p, Object arg);
    public Object visitShoulder(Shoulder p, Object arg);
    public Object visitArm(Arm p, Object arg);
    public Object visitHand(Hand p, Object arg);
    public Object visitFinger(Finger p, Object arg);
    public Object visitChest(Chest p, Object arg);
    public Object visitLeg(Leg p, Object arg);
    public Object visitFoot(Foot p, Object arg);
    public Object visitToe(Toe p, Object arg);
    // A lot of methods.
} 
```

类`Head`, `Neck`, `Shoulder`,`Arm`等都是`BodyPart`抽象类的子类，如下所示：

```
public abstract class BodyPart {
    // A lot of fields, so it is not simple to convert this to an interface.

    public abstract Object accept(RobotVisitor visitor, Object arg);
} 
```

```
// All the subclasses of BodyPart are implemented like this:
public class Arm extends BodyPart {
    // Some fields, getters and setters...

    public Object accept(RobotVisitor visitor, Object arg) {
        return visitor.visitArm(this, arg);
    }
} 
```

这些`BodyPart`s 是分层的。一些`BodyPart`s 可能包含其他一些`BodyPart`s。但它们有时可能包含其他内容。

该访问者有几个非常不同的实现，并且正如预期的那样，代码因强制转换而瘫痪。我尝试使用泛型：

```
public interface RobotVisitor<R, E> {
    public R visitHead(Head p, E arg);
    public R visitNeck(Neck p, E arg);
    public R visitShoulder(Shoulder p, E arg);
    public R visitArm(Arm p, E arg);
    public R visitHand(Hand p, E arg);
    public R visitFinger(Finger p, E arg);
    public R visitChest(Chest p, E arg);
    public R visitLeg(Leg p, E arg);
    public R visitFoot(Foot p, E arg);
    public R visitToe(Toe p, E arg);
    // A lot of methods.
} 
```

但这不起作用。应用程序传递来自不同类型的参数，并期望同一访问者中的每组方法有不同的返回。所以，我以这样的方式结束：

```
public interface RobotVisitor<A, B, C, D, E, F, G, H, I> {
    public A visitHead(Head p, B arg);
    public A visitNeck(Neck p, B arg);
    public A visitShoulder(Shoulder p, C arg);
    public A visitArm(Arm p, C arg);
    public A visitHand(Hand p, C arg);
    public D visitFinger(Finger p, E arg);
    public F visitChest(Chest p, B arg);
    public A visitLeg(Leg p, G arg);
    public A visitFoot(Foot p, G arg);
    public H visitToe(Toe p, I arg);
    // A lot of methods.
} 
```

这只会使泛型成为一种荒谬的矫枉过正，使接口非常难以使用。

我试图将接口划分为子接口，对期望相同参数和相同返回类型并且在某些地方有效的方法进行分组，但缺点是将`accept`方法从`BodyPart`类中删除到对类似`BodyPart`s 进行分组的子类。

然后，我遇到了一个很大的失败，有一个特定的访问者实现有一个带有`BodyPart`-typed 参数的方法调用其中的`accept`方法。由于我不再拥有`accept`超类中的 ，这显然是一种糟糕的方式。

访问者的不同实现差异很大，访问者中的参数和返回类型也是如此。有时参数和返回类型是`BodyPart`s，有时是`Void`，有时是`String`和`Integer`，有时是摆动组件，有时是其他不相关的对象。然而在每个访问者中，访问相似`BodyPart`s 的方法往往会获得相似的参数和返回类型。

客户端代码总是只调用`accept`in ，仅此`Head`而已。所有其他`accept`方法都是从访问者调用到它自己的。

我应该怎么做才能尝试使该接口通用而不将其转换为泛型过度杀伤？`instanceof`现在，我只是在寻找普通 ' 的方法中添加了很多' `BodyPart`，这完全违背了使用访问者模式的全部意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:42:31.603

如果你*真的*想重构，我的建议是这样的：

使用**数据容器类型**来传递参数和返回值。在我的评论中，我建议使用 a`VisitorParameterType`和 a `VisitorReturnType`，但由于有很多重叠，您可以使用一种常见的数据类型。

```
public class VisitorData {
    private A a;
    private B b;
    private C c;
    private D d;
    // one constructor for each type
    private VisitorData(A a) {
        this.a = a;
    }
    // getters, setters
} 
```

`Visitor`: _

```
public interface RobotVisitor {
public VisitorData visitHead(Head p, VisitorData arg);
public VisitorData visitNeck(Neck p, VisitorData arg);
public VisitorData visitShoulder(Shoulder p, VisitorData arg);
public VisitorData visitArm(Arm p, VisitorData arg);
....
// A lot of methods.
} 
```

基类：

```
public abstract class BodyPart {
// A lot of fields, so it is not simple to convert this to an interface.

public abstract VisitorData accept(RobotVisitor visitor, VisitorData arg);
} 
```

一个子类：

```
public class Arm extends BodyPart {
    // Some fields, getters and setters...

    public VisitorData accept(RobotVisitor visitor, VisitorData arg) {
        return visitor.visitArm(this, arg);
    }
} 
```

这样做的主要成就不是引入泛型，而是**重构**代码以实现**统一的访问者模式**，这更容易遵循。此外，您摆脱了令人讨厌的未经检查的铸件。

# php - 从他们的 FB ID 获取 Facebook 用户电子邮件

> ID：14698254
> 
> 赞同：1
> 
> 时间：2013-02-05T00:34:31.803
> 
> 标签：php, facebook, email

我花了几个小时寻找解决方案，最终放弃了。我希望有人能帮助我。

基本上，我有一个 iPhone 应用程序，用户可以在其中使用 Facebook 登录。当他们这样做时，他们的 Facebook ID 被发送到服务器并用作他们的用户 ID（而不是他们的电子邮件，如果他们使用电子邮件登录）。现在，如果我想在新用户第一次注册/登录时向他们发送电子邮件，我怎样才能从发送到服务器的 ID 中获取 facebook 用户的电子邮件。我确实有来自 Facebook 的电子邮件权限，但我不知道如何仅从他们的 ID 获取用户的电子邮件。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T02:31:21.310

当他们在您的应用程序上进行身份验证时，不要将 发送`user_id`到您的服务器，而是发送`access_token`. 然后，您可以使用该令牌查询 API 并获取他们授权您拥有的所有数据。

奖励：几乎不可能有人欺骗颁发给您的应用的有效访问令牌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T00:39:36.840

你需要给它变量：facebook->api('/me/email')

编辑：这里的帖子：[Facebook Graph API，如何获取用户电子邮件？](https://stackoverflow.com/questions/3611682/facebook-graph-api-how-to-get-users-email)阅读第二个答案

# mysql - 如何修复此错误：[1045] SQLSTATE[28000] [1045]

> ID：14698256
> 
> 赞同：0
> 
> 时间：2013-02-05T00:34:52.220
> 
> 标签：mysql, database, localhost

我第一次在不是我的本地主机的服务器上工作。我正在从 hostgator 租用托管空间。我创建了一个应该获取用户信息并将其放入数据库的表单。当我尝试提交表单时，我不断收到以下错误消息：

> 无法打开数据库 [1045] SQLSTATE [28000] [1045] 用户'username@localhost'@'gator7899.hostgator.com'的访问被拒绝（使用密码：是）

我看过其他帖子，人们问同样的问题，但给出的答案都不适合我。此外，用户名不是我的实际用户名，gator7899 不是实际服务器。出于安全考虑，我没有在这里发布它们。

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:39:27.897

确保在您的 CPanel -> mysql admin -> 将用户添加到数据库中分配了权限

您需要将配置更改为

```
localhost
username = username of CPanel
password = password of Cpanel 
```

# wcf - 如何将基本类库变成 WCF 服务库

> ID：14698258
> 
> 赞同：1
> 
> 时间：2013-02-05T00:35:12.873
> 
> 标签：wcf, visual-studio

我试图复制现有 WCF 服务库的功能以将其用作新 WCF 服务库的模板。因为我要剪切和粘贴我需要的所有代码，并且我不希望它创建默认的服务存根，所以我没有使用内置的“WCF 服务库”项目模板来启动它。我刚刚使用“空项目”模板在我的解决方案中添加了一个新的空白项目。

然后，我在我的项目中创建了两个新的空白 .cs 代码文件来保存我的服务的接口和类，并从我的原始 WCF 服务库项目中复制/粘贴了接口和类代码，并进行了我需要进行的更改。

新项目编译得很好，但是......

1) 如果我进入项目属性，“WCF 选项”部分不会出现，就像在我原来的 WCF 服务库中那样。

2) 对于原来的 WCF 服务库项目，我可以右键单击它并选择 Debug->Start New Instance，它会自动使用 WCF 服务主机启动它。对于新项目，如果我尝试这样做，它会显示“无法直接启动具有类库输出类型的项目”。

如何让 Visual Studio（我使用的是 2012 Professional）将此项目视为真正的 WCF 类库，而无需重新开始并使用“WCF 服务库”项目模板？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T00:54:14.903

您缺少`project`文件中的 ProjectExtensions 部分

这是来自我的一个 VS2010 项目。

```
 <ProjectExtensions>
      <VisualStudio>
      <FlavorProperties GUID="{3D9AD99F-2412-4246-B90B-4EAA41C64699}">
        <WcfProjectProperties>
          <AutoStart>True</AutoStart>
        </WcfProjectProperties>
      </FlavorProperties>
    </VisualStudio>
  </ProjectExtensions> 
```

如果我删除它，`WCF Options`属性部分就会消失。

编辑：

我将 Empty 项目与 WCF 服务库进行了比较，发现您还需要将其添加到项目中以使 WCF 选项出现在项目属性中

```
<ProjectTypeGuids>{3D9AD99F-2412-4246-B90B-4EAA41C64699};{F184B08F-C81C-45F6-A57F-5ABD9991F28F}</ProjectTypeGuids> 
```

WCF 中有另一个条目（而不是在 Empty 项目中）

```
<StartArguments>/client:"WcfTestClient.exe"</StartArguments> 
```

我假设你做的时候需要

> 调试->启动新实例

但是，您还需要其他一些东西，例如对`System.ServiceModel`.

老实说，我认为你最好使用正确的`WCF Service Library`模板并删除你不想要的东西，而不是试图弄清楚你需要什么。

# node.js - node-postgres 返回多个 array_length() 列？

> ID：14698262
> 
> 赞同：0
> 
> 时间：2013-02-05T00:35:40.760
> 
> 标签：node.js, postgresql

我有 3 个数组列，我试图获取每个数组的计数，但 node-postgres 只返回其中一个，即 SQL 语句中传递的最后一个 array_length()。我使用 postgres 控制台传递了相同的 sql 查询，它返回了所有结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:19:46.810

好的，想通了，数组查询需要用括号括起来

```
(array_length(friends,1),array_length(clients, 1),array_length(venues, 1)) 
```

这将返回例如`(3,3,7)`，否则只有最后一个查询将返回`(7)`。

# java - 每当 editText 变空时，SPAN_EXCLUSIVE_EXCLUSIVE 跨度不能有零长度错误

> ID：14698264
> 
> 赞同：1
> 
> 时间：2013-02-05T00:35:46.947
> 
> 标签：java, android

测试设备：GSM Galaxy nexus 4.2（使用内置键盘和 swiftkey 3 测试）

在我的应用程序中，我创建了一个对话框来提示用户输入。该对话框显示一个用户应该填写一个单词的 EditText。创建时，以及每当用户从 EditText 中删除所有内容时，我都会在 logcat 中收到以下错误消息：

```
SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length 
```

谷歌搜索以及在stackOverflow上搜索告诉我可以通过使用类似的东西来避免错误

```
inputBox.setInputType(InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS); 
```

其中 inputBox 是有问题的 EditText。但是，我希望保留自动完成功能，因为用户应该填写最有可能自动完成的单词。以下是用于创建对话框的代码：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
final EditText inputBox = new EditText(this);
inputBox.setHint("New keyword");
builder.setTitle(R.string.add_keyword_dialogue_header)
        .setView(inputBox)
        .setPositiveButton("Add",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id {
                            mListAdapter.addItem(inputBox.getText()
                                    .toString());
                        }
                    })
            .setNegativeButton("Cancel",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,
                                int which) {
                        }
                    });
    final AlertDialog dialog = builder.create();
    dialog.getWindow().setSoftInputMode(
            WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE);
    dialog.show();
    inputBox.requestFocus(); 
```

我的问题是，如何在保留自动完成功能的同时防止错误发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:06:15.983

只需将此属性添加到您的编辑文本中，您的问题肯定会得到解决

```
android:inputType="textNoSuggestions" 
```

将上述属性添加到应用程序中使用的每个编辑文本中，或者仅添加到该编辑文本中出现错误的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T00:56:54.383

我以前从未见过那个特定的错误，但我的猜测是它导致它的这条线：

```
dialog.getWindow().setSoftInputMode(
        WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE); 
```

即使编辑框没有聚焦，也应该打开软键盘。因此输入连接设置不正确，导致键盘功能受限。首先设置焦点可能会有所帮助。所以可能在没有总是使用 LayoutParams.SOFT_INPUT_STATE_VISIBLE 的情况下 - 它可以防止键盘由于没有绑定到编辑器而出现错误的输入连接。

# sql - SQL 多个 if 语句，相同的结果集，不同的参数

> ID：14698265
> 
> 赞同：0
> 
> 时间：2013-02-05T00:35:51.207
> 
> 标签：sql, function, dry

我正在编写一个存储过程来计算一大堆不同的东西，但我有一点，重复了大约 9 次。

例如：

```
if @argA = 1 (true)
select Count(samples) from dbo.X where type = @argAType

if @argB = 1 (true)
select Count(samples) from dbo.X where type = @argBType

if @argC = 1
select Count(samples) from dbo.X where type = @argCType 
```

等等...

我如何编写一个函数（或类似的东西），我可以传入一点（真或假）和其他参数，如果为真则只返回结果集？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:43:38.877

这是你要找的吗？这是我可以根据当前发布的问题推断出的最好的。

```
SELECT COUNT(samples)
FROM dbo.X
WHERE
    (type=@argAType AND @argA=1)
    OR
    (type=@argBType AND @argB=1)
    OR
    (type=@argCType AND @argC=1) 
```

* * *

在函数形式上，我认为这是对的：

```
CREATE FUNCTION GetCount(@n AS BIGINT) RETURNS BIGINT
AS
BEGIN
  DECLARE @count BIGINT

  SELECT @count = COUNT(samples)
    FROM dbo.X
    WHERE
        (type=@argAType AND @argA=1)
        OR
        (type=@argBType AND @argB=1)
        OR
        (type=@argCType AND @argC=1)

  RETURN @count
END 
```

# macos - 在自定义目录中安装 Emacs（在 OS X 上）

> ID：14698267
> 
> 赞同：0
> 
> 时间：2013-02-05T00:36:02.617
> 
> 标签：macos, emacs, installation, search-path

受够了 Xcode 附带的 emacs22，我开始升级到 emacs24。我不想覆盖系统默认值，也不想弄乱它，所以我尝试将 emacs 安装在`/usr/local/`.

假设我将前缀设置为`CUSTOM_DIR/emacs-24.2`. 我在目录中构建并安装了 emacs 24.2 `CUSTOM_DIR/emacs-24.2`，所以`bin/`, `libexec/`, `share/`,`var/`都在那里。（是的，我已经手动检查了所有需要的文件；在自定义目录中安装完全完成。）但是当我尝试运行新版本的 emacs 时，我收到以下错误消息：

```
Warning: arch-dependent data dir (/usr/local/libexec/emacs/24.2/x86_64-apple-darwin12.2.1/) does not exist.
Warning: arch-independent data dir (/usr/local/share/emacs/24.2/etc/) does not exist.
Warning: Lisp directory `/usr/local/share/emacs/24.2/site-lisp' does not exist.
Warning: Lisp directory `/usr/local/share/emacs/site-lisp' does not exist.
Warning: Lisp directory `/usr/local/share/emacs/24.2/lisp' does not exist.
Warning: Lisp directory `/usr/local/share/emacs/24.2/leim' does not exist.
Error: charsets directory not found:
/usr/local/share/emacs/24.2/etc/charsets
Emacs will not function correctly without the character map files.
Please check your installation! 
```

`--prefix=CUSTOM_DIR/emacs-24.2`因此，尽管我在运行时指定了选项，但显然 emacs 的搜索路径并未受到影响`configure`。我该如何解决？有没有我需要更改的配置文件，或者我在配置和构建 emacs 时需要添加一些配置选项？（我从 tarball 构建了 emacs 24.2。）

PS请不要建议其他安装方式。我*确实*知道如何安装 emacs 24，或者通过安装 to `/usr/local/`，这似乎完全没有问题；或使用 MacPorts 或类似项目；或者直接从 Emacs.app 二进制发行版中的命令行组件运行。我只是想解决这个问题。谢谢。

# c# - 使用 SelectSingleNode() 方法需要哪个命名空间（使用默认命名空间，不能使用该方法）

> ID：14698271
> 
> 赞同：1
> 
> 时间：2013-02-05T00:36:32.200
> 
> 标签：c#, xml, xmldocument, msxml, selectsinglenode

您好我有使用不同命名空间的 xml 文件（实际上是 msbuild 文件）

```
<?xml version="1.0" ?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup Condition="'$(key)'=='1111'">
          <Key>Value</Key>
    </PropertyGroup>
</Project> 
```

但问题是我不能将 SelectSingleNode 与该文件一起使用，因为

```
xmlns="http://schemas.microsoft.com/developer/msbuild/2003" 
```

我相信这是因为上面的 xmlns 导致默认命名空间（该方法所必需的）消失了。然后我想我只需要为此添加必要的一个。但我的尝试根本没有成功。你能给我一个简单的例子吗？

这就是我的做法。（我也尝试添加多个命名空间但没有成功..）

```
XmlDocument xml = new XmlDocument();
xml.Load("ref.props");        
XmlNamespaceManager nsmgr = new XmlNamespaceManager(xml.NameTable);
nsmgr.AddNamespace("msbld", "http://schemas.microsoft.com/developer/msbuild/2003");

XmlNode platform_node
  = xml.SelectSingleNode("//msbld:PropertyGroup[contains(@Condition, '1111')]", nsmgr); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:09:45.233

您需要使用*正确*的命名空间，即*“* ” `http://schemas.microsoft.com/developer/msbuild/2003`。

尝试

```
XmlDocument xml = new XmlDocument();
xml.Load("ref.props");        
XmlNamespaceManager nsmgr = new XmlNamespaceManager(xml.NameTable);
nsmgr.AddNamespace("ms", "http://schemas.microsoft.com/developer/msbuild/2003");

XmlNode platform_node
  = xml.SelectSingleNode("/ms:Project/ms:PropertyGroup[contains(@Condition, '1111')]",
                         nsmgr); 
```

不要将命名空间前缀（在 XML 中为空）与命名空间（即“ `http://schemas.microsoft.com/developer/msbuild/2003`”）混淆。

# c++ - 带有 UTF-16 的 char * 函数的 Windows 使用

> ID：14698275
> 
> 赞同：1
> 
> 时间：2013-02-05T00:37:08.600
> 
> 标签：c++, windows, encoding

我将一个应用程序从 Linux 移植到 Windows。在 Linux 上，我使用[libmagic](http://linux.die.net/man/3/libmagic)库，我不想在 Windows 上摆脱它。
问题是我需要以 UTF-16 编码保存的文件名传递给这样的函数：

`int magic_load(magic_t cookie, const char *filename);`

不幸的是，它只接受 const char *filename。我的第一个想法是将 UTF-16 字符串转换为本地编码，但存在一些问题——比如字符串可以包含例如中文符号，而本地编码可能是俄语。
结果，我们将在输出中得到垃圾，程序将无法达到其目标。
转换为 UTF-8 也无济于事，因为这是 Windows，而 Windows 以 UTF-16 保存文件名。

但我不知何故需要使该函数能够打开具有 Unicode 名称的文件。

我只找到了一个非常非常糟糕的解决方案：

```
 1\. I have a filename
 2\. I can copy file with unicode name to file with ASCII name like "1.mp3"
 3\. open it with libmagic functions and get what I want
 4\. remove temporarily file 
```

但我了解这个解决方案有多糟糕以及它如何使我的应用程序变慢，所以我想知道，也许有一些更好的方法可以做到这一点？

提前感谢任何提示，因为我真的很困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T00:40:28.273

使用 8.3 文件名访问文件。

除了长达 255 个字符的长文件名外，Windows 还生成一个 8.3 格式的 MS-DOS 兼容（短）文件名。

[http://support.microsoft.com/kb/142982](http://support.microsoft.com/kb/142982)

# php - 在 codeigniter 中删除 index.php

> ID：14698282
> 
> 赞同：0
> 
> 时间：2013-02-05T00:38:31.563
> 
> 标签：php, .htaccess, codeigniter

我使用下面的代码在我的 .htaccess 文件中删除了 codeigniter 中的 index.php。但我感到困惑的是我应该在哪里使用该文件。我应该在应用程序外部或应用程序内部的 www 文件夹中使用它吗？

我在所有地方都使用了它，它有效，但它弄乱了我的 css 或者说基本文件夹。我该如何克服这个问题。我应该使用 html 基本标签吗？

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

**编辑**

我的文件夹结构是

```
basefolder
  -application
  -css
  -js
  -images   
  -system
.htaccess
index.php 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T00:42:55.993

您可以添加一个 RewriteCondition 排除所有现有文件：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:45:16.517

用这个

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

如果不起作用检查你是否`enabled mod_rewirte`在`phpinfo();`

如果它还不起作用，请尝试将其更改为第 40/54 行`$config['uri_protocol']='AUTO'`列出的内部文件之一：`application/config/config.php`

```
|
| 'AUTO'            Default - auto detects
| 'PATH_INFO'       Uses the PATH_INFO
| 'QUERY_STRING'    Uses the QUERY_STRING
| 'REQUEST_URI'     Uses the REQUEST_URI
| 'ORIG_PATH_INFO'  Uses the ORIG_PATH_INFO
|
*/
$config['uri_protocol'] = 'AUTO'; 
```

有时我用 :`REQUEST_URI`而不是`AUTO`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T00:42:39.783

```
RewriteEngine on
RewriteCond $1 !^(index\.php|css|js|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

这假设 css 与 index.php 等在同一目录中。此规则取决于您的文件结构。如果您使用目录树示例更新您的问题，我可以修改规则。

应该不需要其他配置，因为您提到它可以工作，但只是把事情搞砸了。

应该注意的是，粘贴的这个是我的 CI htaccess 文件中唯一的东西，我的工作正常。

另外，请参阅 Will 的评论。我的配置 url 后缀总是“”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T09:28:30.593

我的解决方案，CI 系统向上移动（不从网络公开），应用程序是公开的，`.htaccess`对于每个子域（在根目录中），但它取决于您的结构（存在许多解决方案）

```
RewriteBase /
RewriteEngine on
RewriteCond $1 !^(index\.php|images|css|js|robots\.txt|favicon\.ico)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?$1 [L] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T11:15:22.780

将以下代码复制并粘贴到 .htaccess 文件中

选项 +FollowSymLinks

重写引擎开启

选项 - 索引

RewriteCond %{THE_REQUEST} ^[AZ]{3,9}\ /index.php\ HTTP/ RewriteRule ^index.php$ [http://www.yoursite.com/](http://www.yoursite.com/) [R=301,L]

# javascript - 我需要找到下一个不是兄弟的元素

> ID：14698285
> 
> 赞同：0
> 
> 时间：2013-02-05T00:39:08.587
> 
> 标签：javascript, jquery

假设我有以下 HTML：

```
<span>
    <span id="x1" class="x">X1</span>
</span>
<span>
    <span>
        <span id="x2" class="x">X2</span>
    </span>
</span> 
```

并且`$(this)`是`<span id="x1" ...>`.

`.x`查找与 jQuery匹配的下一个元素的最佳方法是什么？实际文档的结构是不可预测的，因此提供的 HTML 只是一个示例。

我不能使用`nextAll`，因为它只能找到兄弟姐妹。如果我这样做`$('.x')`，它会找到所有，但我将不得不迭代/比较。有更好的解决方案吗？

另见：http: [//jsfiddle.net/JZ9VW/1/](http://jsfiddle.net/JZ9VW/1/)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T00:43:03.760

鉴于您似乎不愿意对标记的结构做出假设，基于类的选择器是最好的。如果没有添加/删除元素，那么您可以选择它们一次并保留它们作为优化。

```
var exes = $('.x');
var x1 = $('#x1');
var nextEx = exes.eq(exes.index(x1) + 1); 
```

[http://jsfiddle.net/mattball/QKawu](http://jsfiddle.net/mattball/QKawu)

对于一个*真正*不可预测的 HTML 结构，请求“下一个元素”只有在“具有指定类名的元素集合”的上下文中才有意义，这正是上面的代码所反映的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T00:40:43.590

找到父母，然后得到父母的下一个兄弟姐妹，然后找到班级。

`.parent().next().find('.x')`

# svn - 合并后svn恢复

> ID：14698292
> 
> 赞同：0
> 
> 时间：2013-02-05T00:39:51.850
> 
> 标签：svn, svn-merge

我已经在两个分支之间进行了 svn 合并——没有签入——现在我想“取消合并”我工作副本中的一些文件。类似于以下内容：

```
svn co svn://myserver/repo/branches/foo@1000 foo
cd foo
svn merge svn://myserver/repo/branches/foo@1000 \
          svn://myserver/repo/branches/bar@1000 
```

（注意：我想使用`svn merge`，而不仅仅是从 的工作副本中复制文件`bar`，因为（1）有一些合法的合并，即对相同文件进行了不相关的更改，`foo`以及`bar`（2）一些文件已被删除在`bar`我登记入住时，我也想从中删除它们`foo`。）

我想签入大多数合并的文件，但其中一些，我想从`bar`分支中删除更改并保留分支中的现有文件`foo`。所以我尝试：

```
svn revert baz/qux.quux 
```

这无济于事。`qux.quux`仍然有`bar`分支的变化。我试试`svn status`；它是空白的。`foo`我尝试从分支的原始副本复制：该文件现在具有正确的内容，但`svn diff`现在显示了`bar < foo`差异。`svn revert`再次：现在我们已经`bar`恢复了更改。让我们试试`svn info`：

```
Path: baz/qux.quux
Name: qux.quux
Working copy root path: /home/mydir/foo
URL: svn://myserver/repo/branches/foo/baz/qux.quux
Repository root: svn://myserver/repo
Repository UUID: [whatever]
Revision: 1000
Node Kind: file
Schedule: normal
Last Changed Author: [author of last change on bar, not foo]
Last Changed Rev: [rev of last change on bar, not foo]
Last Changed Date: [date of last change on bar, not foo] 
```

那么我如何回到`foo`'s 的版本`qux.quux`？以及如何清除工作副本中的“坏”状态信息？

我有一种感觉，我从根本上`svn merge`以某种方式误解了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:53:23.303

看来您想通过[SVN 中的樱桃采摘进行合并，这充其量是一种黑客攻击](http://lookfirst.com/2011/04/subversion-mistake.html)。您需要成为[svn 合并](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.merge.htm)专家才能完成此任务。其他版本控制系统（hg、darcs、bzr）支持这种开发方法`better`，但也有自己的缺陷。所以，选择你的毒药并习惯它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T01:23:51.640

大卫，使用 PEG 修订是明智且必要的决定吗？我只是尝试使合并尽可能简单，并要求您使用新的干净工作副本从头开始重新完成合并，并在此处显示**全部、完整的真实命令和输出**（UUID 不是私有数据，用于测试的 repo 的 URL 可以是文件：///）。

我的测试结果（合并头和恢复单个文件）显示预期结果（您可以在我的测试用例上重新检查它 - 存储库已打开）

*   存储库你好，有一些历史：[http ://mayorat.ursinecorner.ru:8088/svn/Hello/](http://mayorat.ursinecorner.ru:8088/svn/Hello/)
*   目标分支 Leichtbau-Deutsch：[http ://mayorat.ursinecorner.ru:8088/svn/Hello/branches/Leichtbau-Deutsch/](http://mayorat.ursinecorner.ru:8088/svn/Hello/branches/Leichtbau-Deutsch/)
*   源分支 branche-francaise：[http ://mayorat.ursinecorner.ru:8088/svn/Hello/branches/branche-francaise/](http://mayorat.ursinecorner.ru:8088/svn/Hello/branches/branche-francaise/)

**步骤和操作**

```
>svn co http://mayorat.ursinecorner.ru:8088/svn/Hello/branches/Leichtbau-Deutsch/
A    Leichtbau-Deutsch\Hello.en.txt
A    Leichtbau-Deutsch\Hello.fr.txt
A    Leichtbau-Deutsch\Hello.de.txt
 U   Leichtbau-Deutsch
Checked out revision 37.

>cd Leichtbau-Deutsch

>svn merge http://mayorat.ursinecorner.ru:8088/svn/Hello/branches/branche-francaise/
--- Merging r26 through r37 into '.':
U    Hello.fr.txt
Conflict discovered in 'Z:/Leichtbau-Deutsch/Hello.de.txt'.
Select: (p) postpone, (df) diff-full, (e) edit,
        (mc) mine-conflict, (tc) theirs-conflict,
        (s) show all options: tc
U    Hello.de.txt
--- Recording mergeinfo for merge of r26 through r37 into '.':
 U   .

>svn status
 M      .
M       Hello.de.txt
M       Hello.fr.txt

>svn revert Hello.fr.txt
Reverted 'Hello.fr.txt'

>svn st
 M      .
M       Hello.de.txt 
```

最后的**预期**结果

PS：如果你愿意，我可以用 PEG 修订版重复这个测试。但是 - 我更喜欢使用来自相应分支的真实修订并且（与合并恢复无关）我必须执行（如果记忆对我有用）`svn up`（并且盲目合并）分支 HEAD 才能提交合并集，因为您`svn co svn://myserver/repo/branches/foo@1000`在 SVN 中的 checkout not-HEAD 修订和修订历史**必须是线性的**

# sql-server-2008 - Sql Server 2008 r2 sp2 内存不足错误

> ID：14698295
> 
> 赞同：0
> 
> 时间：2013-02-05T00:40:30.050
> 
> 标签：sql-server-2008

我在 SSMS 中有一个包含 21072 个单独更新语句的查询。我正在使用 sql express r2 sp2。我只更新一个短字符串 < 100 个字符的 varchar(255) 文本字段。在我得到错误之前，我只通过语句获得了中途（3344 次执行）。

“资源池‘内部’中的系统内存不足，无法运行此查询”

我在 Win7-64 Ultimate 上有 16GB 的物理内存。这应该是一个没有错误的简单操作。

这似乎是软件中的一个错误，或者我在 Sql express 中有一个必须更改的默认内存设置。

我提前为错误道歉，并感谢您的回答。

产品详情：

Microsoft SQL Server 2008 R2 (SP2) - 10.50.4000.0 (X64) 2012 年 6 月 28 日 08:36:30 版权所有 (c) Microsoft Corporation Express Edition with Advanced Services (64-bit) o​​n Windows NT 6.1 (Build 7601: Service Pack 1 )

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T00:42:48.790

SQL Server 2008 R2 Express 仅限于 1 个 CPU 和**1GB 的 RAM**。

如果没有更具体的细节，很难进一步帮助您。建议您发布您的实际 TSQL。

**更新**：你说你有 21072 个单独的更新语句，作为一个批次运行。尝试在其中放一些`GO`'... 例如

```
UPDATE Item SET ItemName = 'Abalone' WHERE ItemID = 3; 
GO
UPDATE Item SET ItemName = 'Absidia capillata' WHERE ItemID = 4; 
GO
UPDATE Item SET ItemName = 'Acacia' WHERE ItemID = 5; 
GO
etc.. 
```

当然，这假设您没有尝试作为单个事务运行。（你似乎不是）

# jquery - Internet Explorer 10 和 popstate 未绑定

> ID：14698299
> 
> 赞同：5
> 
> 时间：2013-02-05T00:40:48.010
> 
> 标签：jquery, internet-explorer-10

我想知道什么会导致`window.addEventListner('popstate', foo, false) window.attachEvent('onpopstate', foo)`并且`window.onpopstate=foo`不会触发函数 foo. 我们有与此类似的代码，在生产中它不会触发，但在开发中它会触发。是否可以通过 JS 禁用 popstate 事件或导致某种冲突或竞争条件发生？

### 编辑（[古斯汀](https://stackoverflow.com/users/504920/gustin)）：+示例代码

**PopStateEvent.js（完整清单，使用 jQuery 1.9.1）：**

```
$(window).bind('popstate', function () { alert("Pop state event received!"); }); 
```

如果我使用**IE 10** (10.0.9200.16484) 测试这个非常简单的示例，我永远不会收到弹出状态事件（即警告框永远不会出现）。即使我离开并通过 IE 的后退按钮返回也不行。即[这个 Q/A](https://stackoverflow.com/questions/14112341/popstate-event-handler-seems-not-to-work)不能解决我的问题。

使用**Chrome 24**，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T15:43:45.767

您确定您没有使用 history.pushState() 或 history.replaceState() 调用它吗？

popstate 仅在您使用浏览器执行某些操作时触发，例如后退按钮，或使用 history.back() 调用。

除此之外，它可以与 chrome 一起使用，因为它会在页面加载时发出 popstate，因此请检查以确保事件实际上正在加载。检查这一点应包括在：

```
if (document.readyState == "complete") {
    initApplication();
} 
```

我相信 popstate 包含在 document.readyState 中，所以试一试。

# c# - 使用 C# 应用程序阅读最新的 Gmail 邮件

> ID：14698302
> 
> 赞同：0
> 
> 时间：2013-02-05T00:41:24.863
> 
> 标签：c#, email, gmail

> **可能重复：**
> [阅读 Gmail 收件箱](https://stackoverflow.com/questions/4461946/read-gmail-inbox)

我需要在 C# Visual Studio 中创建一个可以阅读 Gmail 帐户的最新电子邮件的应用程序。我只需要输入 3 个文本框：From、Subject 和 bodymessage。

但我只需要获取最新收到的电子邮件的信息。拜托各位，我真的需要你们的帮助。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T00:46:27.050

尝试阅读有关 POP3、IMAP 协议的信息 这是 Visual Studio 示例，一旦您可以阅读电子邮件，您就可以根据邮件日期检查服务器并选择最新的

```
http://archive.msdn.microsoft.com/CSharpGmail 
```

这是代码：

```
 // Create the object and get the feed 
   RC.Gmail.GmailAtomFeed gmailFeed = new RC.Gmail.GmailAtomFeed("username", "password"); 
   gmailFeed.GetFeed(); 

   // Access the feeds XmlDocument 
   XmlDocument myXml = gmailFeed.FeedXml 

   // Access the raw feed as a string 
   string feedString = gmailFeed.RawFeed 

   // Access the feed through the object 
   string feedTitle = gmailFeed.Title; 
   string feedTagline = gmailFeed.Message; 
   DateTime feedModified = gmailFeed.Modified; 

   //Get the entries 
   for(int i = 0; i &lt; gmailFeed.FeedEntries.Count; i++) { 
      entryAuthorName = gmailFeed.FeedEntries[i].FromName; 
      entryAuthorEmail = gmailFeed.FeedEntries[i].FromEmail; 
      entryTitle = gmailFeed.FeedEntries[i].Subject; 
      entrySummary = gmailFeed.FeedEntries[i].Summary; 
      entryIssuedDate = gmailFeed.FeedEntries[i].Received; 
      entryId = gmailFeed.FeedEntries[i].Id; 
   } 
```

# sql - 从数据中提取超集，同时保留父子关系

> ID：14698304
> 
> 赞同：0
> 
> 时间：2013-02-05T00:41:27.597
> 
> 标签：sql, sql-server, tsql, database-design

我在 SQL 中有数据，其粒度与以下类似。

```
Person ID    Dish        Restaurant              Cost 
1            Pasta       The Spaghetti House     5
2            Burgers     Burger Factory          7
3            Pasta       The Spaghetti House     5
4            Pizza       The Cheesy Slice        4 
```

这只是一个例子，但它抓住了我的数据的本质，并提供了一个很好的例子。我需要从这些数据中抽象出一个“膳食”（一个超集），其中一顿饭由一道菜、餐厅和成本组成。我需要生成一个唯一的“膳食”ID。需要注意的是，我需要将一个人与一顿饭联系起来。

```
PersonID    MealID        
1            1
2            2
3            1
4            3 
```

到目前为止，我想出的最佳解决方案是从菜、餐厅和成本列中生成校验和。这让我可以唯一地识别每顿“餐”，还可以通过计算每个人的行的校验和来将每个人与每餐联系起来。

我什至不知道这个提取超级数据集的过程叫什么，更不用说如何正确地完成了。（我为这个问题的标题而苦苦挣扎）。我不确定使用校验和是最优雅的选择，尽管它似乎确实有效。

是否有提取超数据集的过程，同时仍保留 SQL 中的孩子（人）与其父母（一顿饭）之间的关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:25:38.650

如果您只想为每道独特的菜肴创建一个独特的编号，您可以将 Row_Number 与`(select distinct dish)`. 然后，您只需使用 CTE 重新加入这道菜。

这保证了个人 ID 2 和 4 将共享相同的 MealID，但不保证订单。

```
;with d as (select row_number() over (order by dish) MealID,
        Dish 
        from
        (select distinct dish
        From Data) as t)
Select [person Id],
       MealID
from data
      inner join d
      on data.dish = d.dish
Order by [person id] 
```

[演示](http://sqlfiddle.com/#!6/f16e7/9)

如果您想同时对餐厅执行此操作，您只需添加另一个 cte。

```
;with d as (select row_number() over (order by dish) MealID,
        Dish 
        from
        (select distinct dish
        From Data) as t)
, r as (select row_number() over (order by Restaurant) RestaurantID,
        Restaurant 
        from
        (select distinct Restaurant
        From Data) as t)

Select [person Id],
       MealID,
       RestaurantID
from data
      inner join d
      on data.dish = d.dish
      inner join r
      on data.restaurant = r.Restaurant
Order by [person id] 
```

[演示](http://sqlfiddle.com/#!6/f16e7/10)

顺便说一句，如果您将这些 ctes 放在表中，则 INSERT 中的 Output 子句是您的朋友。这个过程称为标准化

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T01:53:40.350

我认为以下是这样做的：

```
with mealids as (
    select t.*, row_number() over (order by (select NULL)) as mealid
    from (select distinct dish, restaurant, cost
          from t
         ) t
)
select t.personid, mealids.mealid 
from t join
     mealids
     on t.dish = mealids.dish and
        t.restaurant = mealids.restaurant and
        t.cost = mealids.cost 
```

也就是说，为数据中的组合生成 id。然后将它们加入到原始数据中。

# ruby-on-rails - rails控制器降序获取第一个元素

> ID：14698306
> 
> 赞同：0
> 
> 时间：2013-02-05T00:41:48.607
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

这个说法有什么问题

```
@lastloc = Location.all(:customer_id == resource.id , :order => 'created_at DESC').first
if (@lastloc.longitude != params[:customer][:longitude] && @lastloc.latitude != params[:customer][:latitude])
  ...
end 
```

我想要做的是获取具有某个 id 的所有位置，然后订购最新的位置，然后验证是否有不同的值，然后我继续，否则什么也不做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:50:06.523

你可以这样做：

```
Location.where("customer_id = ?", resource.id).order('created_at DESC') 
```

IF 条件看起来不错，您可以将“&&”修改为“and”，但这只是样式问题。

如果您不确定从数据库中检索到的记录，您可以启动 rails 控制台并检查记录，命令是：

导轨 c -s

这将以沙盒模式启动 Rails 控制台（退出控制台后所有修改都将回滚）。

# c++ - 包括 boost function.hpp，不使用它，我的二进制文件的大小增加了 200k。为什么？

> ID：14698309
> 
> 赞同：8
> 
> 时间：2013-02-05T00:42:27.203
> 
> 标签：c++, gcc, boost, embedded, std

我正在研究嵌入式处理器，所以二进制大小很重要。我试图避免使用标准库。但是，我想使用 std::function。我从 boost 中提取了“function.hpp”，我正在尝试使用它，但简单地包含 function.hpp 会增加我的二进制 200k 的大小，这使得它比我的处理器可以接受的更大。如果我包含标准库，它只会增加我的二进制文件 60k。我想不通，如果我还没有使用任何模板，不应该有任何开销。即使我这样做了，我也无法想象它价值 200k 的代码。我正在使用 gcc 4.7，并且我已经禁用了我可以告诉“-g0”的调试信息并打开了优化“-O2”。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:25:03.103

GCC 在编译后的二进制文件中包含一些符号信息，即使您使用`-g0`. 为了真正摆脱所有符号，应该使用`--strip-all`链接器的命令行选项。

此外，由于可执行文件的大小对您很重要，因此请考虑编译器和`-fdata-sections`链接器。`-ffunction-sections``--gc-sections`

# css - Google Chrome Css 问题和 WordPress 子主题

> ID：14698313
> 
> 赞同：0
> 
> 时间：2013-02-05T00:42:48.630
> 
> 标签：css, wordpress, google-chrome

几天来，我一直在研究我的第一个 WordPress 子主题，它在 Firefox 中看起来还不错，但是当我检查 chrome 时，会出现奇怪的问题，无论我多么努力，似乎都无法解决它们。

你可以在这里查看网站...

```
http://stevefleming.co.uk 
```

我发现的问题清单是......

```
Front page: Main text to right of lemon is screwed up.
Widgets: All the headings have disappeared
Navigation: Gone!
Blog Title (and the rest): lemon has gone and top margin/padding has changed.
Blog: List of articles is missing thumbnails 
```

我希望比我更有经验的人能很容易地发现错误，因为我已经转了几个小时了。

提前致谢

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:11:49.347

以防万一有人遇到类似问题，我所有问题的答案都与主题列出的字体列表有关。列表中的第一个不在我的机器上，Firefox 正确遍历列表并选择了一个，但 Chrome 没有

而不是优雅地失败并给出某种依赖于这些字体的消息位只是没有显示。

我每天都在学习越来越讨厌 Chrome。

史蒂夫

# php - 我正在尝试使用 preg_replace 来检测和更改 URL，但由于语法错误而无法正常工作，这是怎么回事？

> ID：14698322
> 
> 赞同：0
> 
> 时间：2013-02-05T00:43:33.793
> 
> 标签：php, regex

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:51:38.033

PHP需要一个周围的字符来分隔正则表达式修饰符和正则表达式，即`preg_replace("~yourregex~",...)`

但是您的表达式中有更多错误，也应该修复。你用[]和()错了。一个简单的 ulr 匹配器的更好的表达式可能是 - 对于您的特殊情况，这必须根据您的需要进行更改：

```
"~(?:http://|https://)(?:[a-z0-9_-]+\.)+(?:[a-z0-9_-]+)~" 
```

# qt - QPlainTextEdit 和行号

> ID：14698324
> 
> 赞同：0
> 
> 时间：2013-02-05T00:43:38.777
> 
> 标签：qt

需要说明这是如何工作的。我阅读了 QPlainTextEdit 和 google 的文档，但是 google 上的示例很旧，并且在当前版本中不起作用......我正在制作代码编辑器，我在 QT 中有经验，但不是很好。

我正在寻找谁能解释我如何做到这一点。

QPlainTextEdit 和行（行号）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:04:54.663

[这](http://qt-project.org/doc/qt-4.8/widgets-codeeditor.html)是一个带有行号的简单编辑器。

# javascript - 在悬停时切换 div 中的 span 元素

> ID：14698327
> 
> 赞同：-2
> 
> 时间：2013-02-05T00:43:58.153
> 
> 标签：javascript, jquery

我对 jQuery 还比较陌生，我试图在悬停时隐藏我在 div 内的几个跨度中包含的文本，然后在悬停时再次显示它们。我觉得这是一件相对容易做的事情，我只是没有取得太大的成功。谢谢！

```
$(".resultBox").hover(function() {

    // Perform actions only if targeted result box it is not enlarged
    if($(this).height() === RESULTBOX_DEF_HEIGHT && $(this).width() === RESULTBOX_DEF_WIDTH)
    {
        // Toggle the highlight class matching the target box
        var targetBoxId = $(this)[0].id;
        $(this).toggleClass(targetBoxId + "BoxHighlight");

        // Hide all text in the spans within this box
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T01:09:57.737

弄清楚了：`$(this).children().toggle();`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T00:55:23.033

您也许可以修改以下内容以对您有利..

```
$("resultBox").hover(function(){
    $('.target').show();
},function(){
    $('.target').hide();
}); 
```

# c# - 无法从 C# 中的方法中检索信息？

> ID：14698331
> 
> 赞同：-3
> 
> 时间：2013-02-05T00:44:09.860
> 
> 标签：c#

```
class Program
{
    public static void GetSchoolInfo()
    {
        string SchoolName,
               EnrollmentStatus,
               ColorOne,
               ColorTwo;

        Console.WriteLine("Please enter your school name: ");
        SchoolName = Console.ReadLine();
        Console.WriteLine("Please enter your Enrollment Status: ");
        EnrollmentStatus = Console.ReadLine();
        Console.WriteLine("Pleas enter one of your school's colors: ");
        ColorOne = Console.ReadLine();
        Console.WriteLine("Please enter the other school color: ");
        ColorTwo = Console.ReadLine();
    }
    static void Main(string[] args)
    {
        GetSchoolInfo();

        Console.ReadLine();

    } 
```

ETC

我的目的是创建一个方法来获取这些字符串，然后很好地输出它们。在方法之外，我似乎无法调用 SchoolName 字符串或任何其他字符串。我目前正在为我的 CS 巴赫上学，所以请原谅我，因为这是一个新手问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T00:51:41.113

不是返回 void，而是返回一个可以在 main 中使用的类的新实例：

```
 public class SchoolInfo
        {
            public string SchoolName { get; set; }
            public string EnrollmentStatus { get; set; }
            public string ColorOne { get; set; }
            public string ColorTwo { get; set; }
        }

        public static SchoolInfo GetSchoolInfo()
        {
            string SchoolName,
                   EnrollmentStatus,
                   ColorOne,
                   ColorTwo;

            Console.WriteLine("Please enter your school name: ");
            SchoolName = Console.ReadLine();
            Console.WriteLine("Please enter your Enrollment Status: ");
            EnrollmentStatus = Console.ReadLine();
            Console.WriteLine("Pleas enter one of your school's colors: ");
            ColorOne = Console.ReadLine();
            Console.WriteLine("Please enter the other school color: ");
            ColorTwo = Console.ReadLine();

            return new SchoolInfo()
                {
                    SchoolName = SchoolName,
                    EnrollmentStatus = EnrollmentStatus,
                    ColorOne = ColorOne,
                    ColorTwo = ColorTwo
                };
        }

        private static void Main(string[] args)
        {
            SchoolInfo info = GetSchoolInfo();
            Console.WriteLine("You Entered School Name: "+info.SchoolName);
            Console.ReadLine();

        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T00:47:52.667

这是因为它们的范围。范围由定义变量的位置确定，它们是在方法内部的示例中定义的。这就是他们的范围所在。方法很快就会超出范围，因此，它们的局部变量也是如此。如果你想在类之外访问这些变量，你应该将它们定义为类变量，如下所示：

```
class Program
{
    string SchoolName,
           EnrollmentStatus,
           ColorOne,
           ColorTwo;
public static void GetSchoolInfo()
{

    Console.WriteLine("Please enter your school name: ");
    SchoolName = Console.ReadLine();
    Console.WriteLine("Please enter your Enrollment Status: ");
    EnrollmentStatus = Console.ReadLine();
    Console.WriteLine("Pleas enter one of your school's colors: ");
    ColorOne = Console.ReadLine();
    Console.WriteLine("Please enter the other school color: ");
    ColorTwo = Console.ReadLine();
}
static void Main(string[] args)
{
    GetSchoolInfo();

    Console.ReadLine();

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T00:59:53.907

嗨，正如@Adam Maras 提到的，您正在尝试访问一个不再在您的范围内的变量。当您在函数中声明变量时，它会在该函数中生存和消亡。这意味着您将无法再从函数外部访问它。

现在解决方案；创建一个类来保存变量并在您的主应用程序中使用。

下面是一个演示。

这些是编程的基础知识，了解基础知识将带您走很长的路......祝你好运

```
public class SchoolInfo
{
    /* two properties are defined as public to carry the data */
    public string NameOfTheSchool { get; set; }
    public string AddressOfTheAchool { get; set; }
}

class Program
{
    public static void GetSchoolInfo(SchoolInfo info)
    {
        info.NameOfTheSchool = "AA";
        info.AddressOfTheAchool = "BB";
    }

    static void Main()
    {
        // create the instance of the class
        SchoolInfo mySchoolInfo = new SchoolInfo();

        // pass it into GetSchoolInfo to collect the data
        GetSchoolInfo(mySchoolInfo);

        // print the value of the name of the school
        Console.WriteLine(mySchoolInfo.NameOfTheSchool);

        Console.ReadKey();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T00:47:17.990

您无法在`GetSchoolInfo`方法之外访问这些变量的原因是它们是局部变量，因此超出了该方法之外的任何[范围](http://en.wikipedia.org/wiki/Scope_%28computer_science%29)。我已经[阅读了](http://blogs.msdn.com/b/samng/archive/2007/11/09/local-variable-scoping-in-c.aspx)这个主题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T00:48:16.523

该方法被声明为一个`void`函数。因为变量`SchoolName`、`EnrollmentStatus`、`ColorOne`和`ColorTwo`是局部变量并且不返回，所以您不能在`GetSchoolInfo()`函数之外访问它们。您可以将它们声明为全局变量，也可以创建 a`Collection`并从函数中返回它们。我更喜欢选项 2，但这取决于你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T00:48:24.417

您在 GetSchoolnfo() 方法中定义的变量是该方法的本地变量，这意味着它们只能在该方法中访问。您可以将它们定义为类级别变量而不是方法，以便其他方法也可以访问它们。

```
class Program
{
    private String SchoolName;
    private String EnrollmentStatus;
    private String ColorOne;
    private String ColorTwo;

    public static void GetSchoolInfo()
    {

        Console.WriteLine("Please enter your school name: ");
        SchoolName = Console.ReadLine();
        Console.WriteLine("Please enter your Enrollment Status: ");
        EnrollmentStatus = Console.ReadLine();
        Console.WriteLine("Pleas enter one of your school's colors: ");
        ColorOne = Console.ReadLine();
        Console.WriteLine("Please enter the other school color: ");
        ColorTwo = Console.ReadLine();
    }
    static void Main(string[] args)
    {
        GetSchoolInfo();

        Console.ReadLine();

    } 
```

# java - 从 json 对象填充 java 对象

> ID：14698337
> 
> 赞同：0
> 
> 时间：2013-02-05T00:45:37.377
> 
> 标签：java, json

我想知道是否存在直接从 json 对象填充 java 对象的属性的东西？类似于：TotoObject toto = fill(JsonObject);

我目前正在使用 getter 和 setter 执行此操作，但它很长，当我有一个具有很多属性的对象时，它使我的代码看起来像废话。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:28:34.530

这是一个类似的问题，其答案也建议使用 GSON。答案中也有一个很好的代码片段：[How do I populate List from JSON response](https://stackoverflow.com/questions/10345303/how-do-i-populate-listobject-from-json-response)

# php - mysqli::prepare() 和 bind_param() 的问题

> ID：14698338
> 
> 赞同：-1
> 
> 时间：2013-02-05T00:45:42.180
> 
> 标签：php, sql, mysqli

我的应用程序中有以下类：

```
 <?php

    class Connection extends Mysqli{

public function __construct($mysqli_host,$mysqli_user,$mysqli_pass, $mysqli_db) {
    parent::__construct($mysqli_host,$mysqli_user,$mysqli_pass,$mysqli_db);
    $this->throwConnectionExceptionOnConnectionError();     
}

private function throwConnectionExceptionOnConnectionError(){

    if(!$this->connect_error){
        echo "Database connection established<br/>";
    }else{
    //$message = sprintf('(%s) %s', $this->connect_errno, $this->connect_error);
        echo "Error connecting to the database."; 
    throw new DatabaseException($message);
    }
}
    }

    class DatabaseException extends Exception
    {
    }

class Page extends Mysqli{

private $con; 

public function __construct(Connection $con) {
    $this->con = $con;
    if(isset($_GET['id'])){
    $id = $_GET['id'];
    }else{      
    $id = 1;
    }       
    $this->get_headers($id);
    $this->get_content($id);
    $this->get_footer($id);
}

private function get_headers($pageId){ 
    $retrieveHead = $this->con->prepare("SELECT headers FROM pages WHERE page_id=?");
    $retrieveHead->bind_param('i',$pageId);
    $retrieveHead->execute();
    $retrieveHead->bind_result($header);
    $retrieveHead->fetch();
    $retrieveHead->close();
    echo $header;   
}

private function get_footer($pageId){ 
    $retrieveFooter = $this->con->prepare("SELECT footer FROM pages WHERE page_id=?");
    $retrieveFooter->bind_param('i',$pageId);
    $retrieveFooter->execute();
    $retrieveFooter->bind_result($footer);
    $retrieveFooter->fetch();
    $retrieveFooter->close();
    echo $footer;   
}

private function get_content($pageId){
    $retreiveContent = $this->con->prepare("SELECT template_id, section_title, i1, i2 FROM content WHERE page_id=? ORDER BY sequence DESC");
    $retreiveContent->bind_param('i',$pageId);
    $retreiveContent->execute();
    $retreiveContent->bind_result($template_id, $section_title, $i1, $i2);
         while ($retreiveContent->fetch()) {
            //Variables will be populated for this row.
            //Update the tags in the template.
            $template = $this->get_template($template_id);
            $template = str_replace('[i1]',$i1,$template);
            $template = str_replace('[i2]',$i2,$template);
            //$theTemplate is populated with content. Probably want to echo here
            echo $template;
        }
}

private function get_template($template_id){
    $retreiveTemplate = $this->con->prepare("SELECT code FROM templates WHERE template_id=?");
    $retreiveTemplate->bind_param('i',$template_id);
    $retreiveTemplate->execute();
    $retreiveTemplate->bind_result($template);
    $retreiveTemplate->fetch();
    $retreiveTemplate->close();
    return $template;
}

}
    ?> 
```

小型应用程序基本上应该从 url 获取页面变量，并使用它来提取页面的页眉、内容项和页脚，内容项使用模板呈现，该模板也从数据库中检索。运行包含以下代码的索引文件时：

```
 require ("/req/db_connection.php");
    require ("/req/connection.php");
    $dbConnection = new Connection($mysqli_host,$mysqli_user,$mysqli_pass, $mysqli_db);
    $page = new Page(); 
```

我得到以下输出：

```
 Database connection established

    Warning: mysqli::prepare(): Couldn't fetch Page in C:\xampp\htdocs\forum\req\connection.php on line 39

    Fatal error: Call to a member function bind_param() on a non-object in C:\xampp\htdocs\forum\req\connection.php on line 40 
```

谁能指出我为什么会遇到这些错误的正确方向？

第 39 行是以下语句：

```
 $retrieveHead = $this->prepare("SELECT headers FROM pages WHERE page_id=?"); 
```

第 40 行当然是：

```
 $retrieveHead->bind_param('i',$pageId); 
```

任何帮助将不胜感激。

注意上面的代码现在已经根据下面的答案更正了，但是我在第 80 行仍然遇到以下错误：

```
 Call to a member function bind_param() on a non-object in C:\xampp\htdocs\forum\req\connection.php on line 80 
```

这是哪一行：

```
 $retreiveTemplate->bind_param('i',$template_id); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:37:03.673

```
class Page extends Mysqli{
public function __construct() {
    if(isset($_GET['id'])){
    $id = $_GET['id'];
    }else{      
    $id = 1;
    }       
    $this->get_headers($id);
    $this->get_content($id);
    $this->get_footer($id);
} 
```

上面的代码看起来像问题（等等）。您扩展 mysqli，覆盖构造函数并且不调用父构造函数。结果，没有调用任何基本的 mysqli 构造函数例程，并且您没有任何连接。考虑重新设计您的对象并将您的对象传递给它们`Connection`，而不是到处扩展 mysqli。我也会尽量避免在构造函数中做所有这些工作。例如，您的页面类可能类似于：

```
class Page{

private $con;

public function __construct(Connection $con) {
    $this->con = $con;
}

public function get_headers($pageId){ 
    $retrieveHead = $this->conn->prepare("SELECT headers FROM pages WHERE page_id=?");
    //...
}

} 
```

当我在上面打趣“除其他外”（无意气馁）时，我暗示 - 虽然你的错误的实际原因是构造函数 - 在你的类的设计和一般的 OOP 概念中看起来有些混乱。

```
class Connection extends Mysqli{

 public function __construct($mysqli_host,$mysqli_user,$mysqli_pass, $mysqli_db) {
    parent::__construct($mysqli_host,$mysqli_user,$mysqli_pass,$mysqli_db);
    $this->throwConnectionExceptionOnConnectionError();     
 }
} 
```

在这里，您已经扩展`mysqli`了您的`Connection`类，并正确调用了父构造函数并传递了所有必需的参数以建立连接。如果您实例化这种类型的对象，`$myConnection = new Connection(...)`它可以充当您通往数据库的网关。

其他类`Page`可能需要对数据库执行操作，并且它们可以通过`Connection`不扩展`mysqli`自身来完成。`Connection`您可以在构造函数中传递一个实例`Page`来实现这一点。所以你的代码行在这里：

```
$dbConnection = new Connection($mysqli_host,$mysqli_user,$mysqli_pass, $mysqli_db);
$page = new Page(); 
```

将变为（在对 Page 类进行一些修改后，如上所示）：

```
$dbConnection = new Connection($mysqli_host,$mysqli_user,$mysqli_pass, $mysqli_db);
$page = new Page($dbConnection); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:40:07.077

显示此错误消息是因为您在尝试准备语句时尚未建立与数据库服务器的连接。更短的重现代码：

```
class Page extends Mysqli{
    public function __construct(){
        $this->prepare('SELECT CURRENT_TIMESTAMP');
    }
}
new Page; 
```

在 mysql 对象中，连接是在[构造函数](http://php.net/manual/en/mysqli.construct.php)中建立的，但是您覆盖了这样的构造函数并且永远不会调用父构造函数。

恕我直言，页面是数据库对象的实例毫无意义。您应该在需要时简单地提供一个 DB 对象作为参数。

**更新：**

您可以在每次需要时传递 DB 对象：

```
class Page{
    public function foo(Mysqli $db){
        $db->prepare('SELECT CURRENT_TIMESTAMP');
    }
} 
```

...或将其存储以供以后使用：

```
class Page{
    protected $db;
    public function __construct(Mysqli $db){
        $this->db = $db;
    }
    public function foo(){
        $this->db->prepare('SELECT CURRENT_TIMESTAMP');
    }
} 
```

如果您扩展`Mysqli`，请使用正确的类名作为类型提示：

```
public function foo(Connection $db){
} 
```

还有其他解决方案，例如接口，但它变得太复杂了:)

# visual-studio-2012 - 在 VS2012 中如何在私有模式下使用 IE 浏览

> ID：14698340
> 
> 赞同：0
> 
> 时间：2013-02-05T00:45:52.773
> 
> 标签：visual-studio-2012, internet-explorer-10

我正在使用 Visual Studio 2012，在构建 ASP.NET MVC4 应用程序时，我可以将“浏览方式”设置为我选择的 Internet 浏览器（Immulator/Simulator）。例如：谷歌浏览器、火狐浏览器、Internet Explorer 等。

除了使用默认的 Internet Explorer，我还想使用 Internet Explorer In-Private Mode。

我试过了：

![在此处输入图像描述](../Images/7e08730726737b7b96b2296cfe3730d5.png)

和

![在此处输入图像描述](../Images/c3337ba7d6dbd5a677fe41d53247864e.png)

它会第一次工作，但之后的每一次后续尝试都会以正常模式返回 IE。

我可以在隐身模式下使用 Chrome 轻松完成此操作。但由于某种原因，它不适用于 IE。我正在使用 IE10。

有其他人能够成功地做到这一点吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T01:15:31.423

您实际上必须使用 32 位版本的 Internet Exploring 在 Visual Studio 2012 中进行调试。因此，如果您添加具有以下路径的浏览器：

“C:\Program Files (x86)\Internet Explorer\iexplore.exe”

然后使用 -private 参数，它将正常工作。

-肖恩

# php - 'where 子句'中的未知列'id'

> ID：14698343
> 
> 赞同：0
> 
> 时间：2013-02-05T00:46:17.380
> 
> 标签：php

知道为什么我在提交到数据库时可能会收到此错误吗？

'where 子句' 中的未知列 'id' 警告：mysql_num_rows()：提供的参数不是第 41 行 /home/somebody/public_html/sendmessage.php 中的有效 MySQL 结果资源

```
while($success == FALSE) { 
$rand = rand(100000, 999999); 

$q = "SELECT * FROM $tablename WHERE id = '$rand'"; 
$r = mysql_query($q, $link);

echo mysql_error();

if(mysql_num_rows($r)) { **THIS IS LINE 41** 
    continue; 
} else { 
    $success = TRUE; 
} 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T00:48:33.987

您的表（其名称存储在`$tablename`中）没有名为 的列`id`。这使得查询失败，并且所有后续数据库函数也将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T00:53:30.607

那里看起来不太好，

首先确保您在该表中有一个列“id”。并注意“id”不是“Id”也不是“ID”也不是“iD”！在绝对确定您拥有该列但仍然出现错误后，请尝试使用 quatation 标记：

```
$q = "SELECT * FROM ". $tablename ." WHERE 'id'='". $rand."'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T01:22:32.600

尝试这样的事情。谢谢

而（$success == FALSE）{ $rand = rand(100000, 999999);

```
$q = "SELECT * FROM ". $tablename ." WHERE id = '". $rand ."'"; 
$r = mysql_query($q, $link);
$num_rows = mysql_num_rows($r);

echo mysql_error();

if($num_rows > 0) { **THIS IS LINE 41** 
    continue; 
} else { 
    $success = TRUE; 
} 
} 
```

干杯!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-27T19:36:09.207

'where 子句'中的未知列'id'

我也遇到了这个错误，我发现我正在调用另一个没有 id 属性的表。所以我建议你检查你的表名

# c - x86_64 ASM - 指令的最大字节数？

> ID：14698350
> 
> 赞同：35
> 
> 时间：2013-02-05T00:47:05.807
> 
> 标签：c, assembly, x86, 64-bit, x86-64

x64 asm 代码中一条完整指令需要的最大字节数是多少？

我想像跳转到地址之类的东西可能最多占用 9 个字节：**FF 00 00 00 00 11 12 3F 1F**但我不知道这是否是 x64 指令可以使用的最大字节数

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-05T01:07:05.397

x86 指令集（16、32 或 64 位，所有变体/模式）保证/要求指令最多为 15 个字节。除此之外的任何东西都会给出“无效的操作码”。如果不使用冗余前缀（例如，多个 0x66 或 0x67 前缀），您将无法实现这一点。

实际上将 64 位作为数据项的唯一指令是要注册的加载常量（Intel 语法：`mov reg, 12345678ABCDEF00h`，at&t 语法：）`movabs $12345678ABCDEF00, %reg`- 因此，如果您想向前/向后跳转超过 31 位，这将是目标位置到寄存器中，然后调用/跳转到寄存器。使用 32 位立即数和位移（在相对跳转和寻址模式中）在 64 位模式下的许多指令中节省了四个字节。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-09-24T02:27:22.957

> **问题是**，x86 指令集中最长的指令是什么？
> 
> **答：你可以用****无限个字节**组成一条有效的 x86 指令！
> 
>  **没错，*您可以用一条有效指令填满整个 64K ROM 映像*。更具体地说，8086 条指令的长度没有限制。凉爽的！不幸的是，现代 i386 变体在尝试解码超过 15 个字节的指令时会引发一般保护错误。
> 
> 那么无限长但有效的 8086 指令是什么样的呢？有点无聊，其实。您只能通过在操作码前面使用冗余前缀来形成无限长的指令。指令前缀是附加在指令开头的字节，可以修改指令使用的默认地址大小、数据大小或段寄存器。
> 
> 例如，您可以采用看起来无害的指令：
> 
> ```
> 89 E5              mov %sp,%bp 
> ```
> 
> 并把它变成一个很长的指令：
> 
> ```
> 66 66 66 66 … 66 66 89 E5                mov %sp,%bp 
> ```
> 
> 现在那只是邪恶的。**

 **[https://web.archive.org/web/20131109063453/https://www.onlinedisassembler.com/blog/?p=23](https://web.archive.org/web/20131109063453/https://www.onlinedisassembler.com/blog/?p=23)

* * *

# 另一个没有重复前缀的长指令

> 在某些情况下，可以对超过传统 15 字节长度限制的有效指令进行编码。例如：
> 
> ```
>  ; 16-bit mode
>   F2 F0 36 66 67 81 84 24 disp32 imm32 =  xaquire lock add [ss:esp*1+disp32],imm32
>   F3 F0 36 66 67 81 84 24 disp32 imm32 = xrelease lock add [ss:esp*1+disp32],imm32
> 
>   ; 16-bit mode
>   36 67 8F EA 78 12 84 24 disp32 imm32 = lwpins eax,[ss:esp*1+disp32],imm32
>   36 67 8F EA 78 12 8C 24 disp32 imm32 = lwpval eax,[ss:esp*1+disp32],imm32
>   36 67 8F EA 78 10 84 24 disp32 imm32 =  bextr eax,[ss:esp*1+disp32],imm32
> 
>   ; 64-bit mode
>   64 67 8F EA F8 12 84 18 disp32 imm32 = lwpins rax,[fs:eax+ebx+disp32],imm32
>   64 67 8F EA F8 12 8C 18 disp32 imm32 = lwpval rax,[fs:eax+ebx+disp32],imm32
>   64 67 8F EA F8 10 84 18 disp32 imm32 =  bextr rax,[fs:eax+ebx+disp32],imm32 
> ```

[http://www.sandpile.org/x86/opc_enc.htm](http://www.sandpile.org/x86/opc_enc.htm)

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-02-05T01:05:55.433

来自英特尔® 64 和 IA-32 架构软件开发人员手册：

> **2.3.11 AVX 指令长度**
> 
> Intel 64 和 IA-32 指令的最大长度仍为 15 个字节。

您可以构建编码超过 15 个字节的指令，但这样的指令是非法的并且可能不会执行。**

# c++ - 如何定义具有循环依赖关系的 C++ 类？

> ID：14698354
> 
> 赞同：3
> 
> 时间：2013-02-05T00:47:31.440
> 
> 标签：c++, class, header-files, circular-dependency

我正在尝试建立一个基本的实体/对象管理系统，我有两个类，一个是要继承的实体的基类，另一个是管理和控制它们。

这是我正在尝试使用的源代码：

```
#include <iostream>
#define MAX_ENTS 400
class EFentity;
class EFiterator;
class EFentity {
     public:
          EFentity();
          virtual bool step();
          virtual void create(EFiterator*,int);
          virtual void destroy();
     private:
          int holder_id;
          EFiterator* holder;
};
EFentity::EFentity(void) {
     //    add base entity stuff
}
void EFentity::destroy() {
     holder->ents[holder_id]=NULL;
     std::cout << "destroying object id "<<holder_id;
     delete this;
}
void EFentity::create(EFiterator* h,int pos) {
     holder=h;
     holder_id=pos;
}
bool EFentity::step() {
     return false;
}
class EFiterator {
public:
     EFentity* ents[MAX_ENTS];
     int e_size;
     EFiterator();
     void push(EFentity* e);
     void update();
};
EFiterator::EFiterator() {
     e_size=0;
}
void EFiterator::update() {
     for(int i=0;i<e_size;i++) {
          if (!ents[i]->step()) {
               std::cout << "entity id "<< i<<" generated a fault!\n";
          } else std::cout << "entity id "<<i<<" passed step test.\n";
     }
}
void EFiterator::push(EFentity* e) {
     ents[e_size]=e;
     e->create(this,e_size++);
}
int main() {
     EFiterator main_iterator;
     main_iterator.push(new EFentity());
     main_iterator.update();
     std::cin.get();
     return 0;
} 
```

此代码*显然*无法编译，以下是错误：

```
In member function `virtual void EFentity::destroy()':

[20] invalid use of undefined type `struct EFiterator' 
[5] forward declaration of `struct EFiterator' 
```

我之前在 SO 上看到过这样的问题，但它们不需要访问其他类的成员变量和函数，因此可以通过指针轻松解决。

我*认为*这可以通过使用原型函数来访问内部的数组来解决`EFiterator`，但是有没有办法通过一些棘手的类操作来顺利地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T00:55:17.227

`EFentity::destroy()`需要知道`EFiterator`调用时的具体类型

```
 holder->ents[holder_id]=NULL; 
```

放在`EFentity::destroy()`后面`EFiterator`定义应该可以解决问题，例如放在后面`EFiterator`

```
void EFiterator::push(EFentity* e) {
     ents[e_size]=e;
     e->create(this,e_size++);
}

void EFentity::destroy() {
     holder->ents[holder_id]=NULL;
     std::cout << "destroying object id "<<holder_id;
     delete this;
} 
```

通常在头文件中转发声明类型并在文件中包含具体类型`.cpp`，这会破坏`circular include`问题。

EFentity.h

```
class EFiterator;
class EFentity {
     public:
          EFentity();
          virtual bool step();
          virtual void create(EFiterator*,int);
          virtual void destroy();
     private:
          int holder_id;
          EFiterator* holder;
}; 
```

EFentity.cpp

```
#include "EFiterator.h"

EFentity::EFentity(void) {
     //    add base entity stuff
}
void EFentity::destroy() {
     holder->ents[holder_id]=NULL;
     std::cout << "destroying object id "<<holder_id;
     delete this;
}
void EFentity::create(EFiterator* h,int pos) {
     holder=h;
     holder_id=pos;
}
bool EFentity::step() {
     return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T01:05:51.850

问题是您已经前向声明了类型`EFIterator`，然后尝试在编译器可见定义之前访问其成员。当编译器读取 的定义时`EFentity::destroy()`，它需要知道`EFIterator`有一个名为 的成员`ents`。

解决方案很容易实现：*将两个声明放在定义之前*，如下所示：

```
#include <iostream>
#define MAX_ENTS 400
class EFentity;
// Now we can refer to EFentity by pointer or reference.

class EFiterator {
public:
  EFentity* ents[MAX_ENTS];
  int e_size;
  EFiterator();
  void push(EFentity* e);
  void update();
};
// Now we can refer to EFiterator by pointer, reference, or value.

class EFentity {
public:
  EFentity();
  virtual bool step();
  virtual void create(EFiterator*,int);
  virtual void destroy();
private:
  int holder_id;
  EFiterator* holder;
};
// Now we can refer to EFentity by pointer, reference, or value.

EFiterator::EFiterator() {
  // ... 
```

现在声明`EFiterator`可以将类型引用`EFentity`为指针（除了它是 UDT 之外不需要知道任何其他内容），并且声明`EFentity`可以将类型引用`EFiterator`为指针（也不需要知道除`EFiterator`UDT 之外的任何内容） . `EFiterator`和声明的顺序`EFentity`无关紧要；您可以像这样轻松地反转它们：

```
#include <iostream>
#define MAX_ENTS 400
class EFiterator;
// Now we can refer to EFiterator by pointer or reference.

class EFentity {
public:
  EFentity();
  virtual bool step();
  virtual void create(EFiterator*, int);
  virtual void destroy();
private:
  int holder_id;
  EFiterator* holder;
};
// Now we can refer to EFentity by pointer, reference, or value.

class EFiterator {
public:
  EFentity* ents[MAX_ENTS];
  int e_size;
  EFiterator();
  void push(EFentity*);
  void update();
};
// Now we can refer to EFiterator by pointer, reference, or value.

EFiterator::EFiterator() {
  // ... 
```

直到你得到*定义*，你才需要前面的*声明*可用。

# java - 检查 ProcessBuilder 的参数是否是有效命令

> ID：14698359
> 
> 赞同：0
> 
> 时间：2013-02-05T00:47:54.313
> 
> 标签：java, process, clojure

我正在使用 Clojure 库来简化我的项目的子流程管理。它本质上`ProcessBuilder`以更 Clojuric 的方式包装了 Java。我想做的一件事是捕获任何丢失的命令——也就是说，如果用户想`this-command-not-found`用作 shell 命令，我的代码应该抛出异常。

不过，看起来这很难或不可能`ProcessBuilder`。我是否需要以某种方式获取用户`$PATH`并在那里搜索以检查有效命令，还是有更好的方法？

**编辑：这应该在*不*启动该过程的情况下完成 - 请参阅下面的评论。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T06:17:52.133

是的，当然有比搜索更好的方法`$PATH`：只需运行用户要求您运行的命令即可。使用 ProcessBuilder 或任何其他机制，没有更智能的解决方案是可能的，因为用户可以使用的 shell 集是开放式的，并且不需要他们的 shell 甚至具有`$PATH`供您搜索的概念。你所能做的就是尽你最大的努力去做用户想要的，如果发生错误，让他们知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T00:51:33.370

你`Process`从`ProcessBuilder.start()`.

然后您可以`Process.getErrorStream()`在 Windows 下阅读并检查

`'this-command-not-found' is not recognized as an internal or external command, operable program or batch file.`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T06:11:36.093

您可能可以[`which`](http://linux.about.com/library/cmd/blcmdl1_which.htm)使用 ProcessBuilder 执行命令以了解命令是否存在。这需要`which`存在于系统上。

# javascript - JQuery 弹跳跳出格格不入？

> ID：14698360
> 
> 赞同：2
> 
> 时间：2013-02-05T00:47:58.457
> 
> 标签：javascript, jquery, html, css, bounce

我正在尝试在鼠标悬停时使用 css“left”定位的按钮上使用 jQuery UI 反弹效果。它似乎有效，但是如果您将鼠标在它上面来回移动几次，它就会移出位置并粘在左边。我不确定它为什么这样做。这是我的代码：http: [//jsbin.com/afoyiz/1/edit](http://jsbin.com/afoyiz/1/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:01:12.337

问题是你的css定义

```
left: 20% 
```

似乎被覆盖了。可能是由于`bounce`发出`left: 0`然后没有正确缓存`left`. 随之而来的是`left: 0`被缓存为正确的值，并且当一切都说完后，元素被射向左侧。

我的建议是锁定此功能。这将防止错误，也将防止按钮的游戏。

```
$(document).ready(function() {
  var lockMouseover;
  $("#button").mouseover(function(){
    if( typeof lockMouseover == "undefined" ){
     $("#button").effect( "bounce", {times:3}, 300 );
      lockMouseover = setTimeout( function(){ var un; lockMouseover = un;}, 950 );
    }
  }); 
```

});

我在您的 jsbin 上对此进行了测试，并且有效。

# regex - 什么是“[我的]系统提供的正则表达式库”？

> ID：14698364
> 
> 赞同：19
> 
> 时间：2013-02-05T00:48:28.587
> 
> 标签：regex, linux, gnu

GNU 的*less*实用程序的*手册页说明了以下关于搜索的内容：*

 *```
/pattern
    Search forward in the file for the N-th line containing the pattern.  N
    defaults to 1\.  The pattern is a regular expression, as recognized by the
    regular expression library supplied by your system. 
```

我在各种系统上使用*较少*：我的个人 Ubuntu 笔记本电脑、我的 CentOS 云服务器、工作中的 Cygwin 等。我一直想做负前瞻和其他花哨的东西，但我不知道什么正则表达式要使用的语法。我怎么知道？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T00:54:07.030

它是一个编译时参数。less 的 ./configure 脚本知道`with-regex=LIB`参数。

这是来自上游包自述文件的引用：

> --with-regex=lib

```
 Specifies the regular expression library used by less for pattern
     matching.  The default is "auto", which means the configure program 
     finds a regular expression library automatically.  Other values are:
        posix          Use the POSIX-compatible regcomp.
        pcre           Use the PCRE library.
        regcmp         Use the regcmp library.
        re_comp        Use the re_comp library.
        regcomp        Use the V8-compatible regcomp.
        regcomp-local  Use Henry Spencer's V8-compatible regcomp
                       (source is supplied with less). 
```

所以你需要知道'./configured'有多少。我在 Debian / Ubuntu 上对此进行了调查。他们使用 POSIX 正则表达式库。

我仍在寻找一种通过脚本动态检测它的方法...... :)

* * *

更新：到目前为止，我唯一能做的就是检测 less 是否使用 pcre 正则表达式。如果使用 less 配置`--with-regex=pcre`了它，则链接到 libpcre.so 共享库：

```
#!/bin/bash

# ldd prints out the shared libraries a binary is linked to.
# This can be used to check if less is linked against libpcre
if ldd "$(which less)" | grep 'libpcre\.so' ; then   
    echo "less uses pcre regex syntax"
else 
    echo "less uses non pcre regex syntax"
    # ... more checks should follow. currently trying to find a way
fi 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-07-28T23:33:25.563

我不知道这是否适用于所有情况（旧版本/不同系统），但我能够使用以下方法找到此信息`less --version`：

```
less 458 (GNU regular expressions)
Copyright (C) 1984-2012 Mark Nudelman

less comes with NO WARRANTY, to the extent permitted by law.
For information about the terms of redistribution,
see the file named README in the less distribution.
Homepage: http://www.greenwoodsoftware.com/less 
```

所以它是 GNU 正则表达式语法......

`--with-regex=pcre`在用我编译了一个更新的版本之后

```
less 481 (PCRE regular expressions)
... 
```

**更新**

感谢[crw](https://stackoverflow.com/users/1184892/crw)的检查。*这个解决方案似乎是特定于版本的*。在[greenwoodsoftware](http://www.greenwoodsoftware.com/less/download.html)（Linux 中）编译可用的源代码后，我发现它*不适*用于版本 436（2009 年 7 月 25 日发布）及更早版本。它至少在 451（2012 年 9 月 4 日发布）及以后开始工作。（两者之间的版本不可下载）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-05T17:03:22.497

观察输出的建议答案`less --version`并没有解决我在 Solaris 10 上的情况——前两行如下：

```
less 436
Copyright (C) 1984-2009 Mark Nudelman 
```

我在动态依赖项列表中看不到明显的正则表达式库：

```
$ ldd /usr/bin/less
        libcurses.so.1 =>        /lib/libcurses.so.1
        libc.so.1 =>     /lib/libc.so.1
        libm.so.2 =>     /lib/libm.so.2
        /lib/libm/libm_hwcap1.so.2
        /platform/sun4v/lib/libc_psr.so.1 
```

`man libc`表示库提供了多个正则表达式接口`regcmp`：`re_comp`和`regcomp`.

通过`elfdump`对二进制文件运行，我可以看到对符号的引用`regcomp`：

```
$ elfdump /usr/bin/less | egrep -i 'posix|pcre|regcmp|re_comp|regcomp|regcomp-local'
     [452]  0x0003d6a0 0x00000000  FUNC GLOB  D    0 UNDEF          regcomp
            [452]       regcomp
  R_SPARC_JMP_SLOT            0x3d6a0          0  .rela.plt      regcomp 
```

如果这是指向`regcomp`正则表达式编译器函数的链接，那么来自@hek2mgl 的答案中的 README 文本表明该`less`二进制文件可能使用 POSIX 正则表达式（或 Spencer V8 正则表达式，如果编译成二进制文件？）。

手册页`regcomp(3C)`内容如下：

```
DESCRIPTION
     These functions interpret basic and extended regular expres-
     sions (described on the regex(5) manual page). 
```

尝试在 中进行搜索`less`，我发现正则表达式重复运算符`{...}`可以在没有反斜杠转义的情况下工作。我系统上的联机帮助页`regex(5)`将其定义为扩展正则表达式 (ERE) 语法。

最后，我发现[了一些](https://www.gnu.org/software/gcal/manual/html_node/Regular-Expressions.html)关于各种正则表达式引擎接口的有趣[描述](http://unixpapa.com/incnote/regex.html)，总结如下：

```
Engine            Interface
----------------  --------------------------------
GNU               re_compile_pattern() and regex.h
PCRE              pcre_compile and pcre.h / pcre2_compile and pcre2.h
POSIX             regcomp() and regex.h
Henry Spencer V8  regcomp() and regexp.h
BSD               re_comp()
System V          regcmp() 
```*

# c++ - 类对象上的多线程

> ID：14698371
> 
> 赞同：1
> 
> 时间：2013-02-05T00:49:49.297
> 
> 标签：c++, multithreading, visual-studio-2010, visual-c++

我收到未处理的异常和访问冲突读取位置错误。但有时它执行得很完美。我是否正确传递了向量和向量迭代器？可能导致错误的原因是什么。

```
struct DataStructure
{
    MapSmoother *m1;
    std::vector<Vertex *> v1;
    std::vector<Vertex *>::iterator vit_f;
    std::vector<Vertex *>::iterator vit_e;
    DataStructure() {
        m1 = NULL;
        v1;
        vit_f;
        vit_e;
    }
};
DWORD WINAPI thread_fun(void* p)
{
        DataStructure *input = (DataStructure*)p;
        while ( input->vit_f != input->vit_e ) {
            Vertex *v = *((input->vit_f)++);
            (*(input->m1)).relax(v);
        }
        return 0;
}
int main()
{
    //Read and encode color to Mesh
    // msmoother is an object
    DataStructure* input = new DataStructure();
    input->m1 = &msmoother;
    for(int i = 0; i < 7; ++i) {
        for(int color = 1; color <= k; color++) {
            std::vector<Vertex *> verList;
          //all the vertices with the same color index will be stored in verList vector
            input->v1 = verList;    //Copied to structure
            std::vector<Vertex *>::iterator vit1 = verList.begin();
            std::vector<Vertex *>::iterator vit2 = verList.end();
            input->vit_f = vit1;
            input->vit_e = vit2;
            HANDLE hThread[50];
            cout << "     Processing for color: " << color << endl;
            for(int j = 0; j < 50; ++j){
                hThread[j] = CreateThread(0,0,(LPTHREAD_START_ROUTINE)&thread_fun,input,0,NULL);
            }
            WaitForMultipleObjects(THREAD_COUNT,hThread,TRUE,INFINITE);
            //clear verList vector
            //Close Handles to all threads
        }
    }
} 
```

![错误截图](../Images/0047a98c0431bb2bd624e83147a7d9bf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:19:50.187

我是 C++ 菜鸟，所以我可能错了，但我认为问题可能出在这里：

```
std::vector<Vertex *>::iterator vit1 = verList.begin();
std::vector<Vertex *>::iterator vit2 = verList.end();
input->vit_f = vit1;
input->vit_e = vit2; 
```

您将迭代器传递给`verList`而不是传递给已复制到`DataStructure`. 我想你在这里想要的是：

```
input->v1 = verList; // copy to structure
input->vit_f = input->v1.begin();
input->vit_e = input->v1.end(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T01:20:41.723

不，您没有正确传递它们。

这段代码：

```
input->v1 = verList;    //Copied to structure 
```

制作矢量的副本，从外观上看是有意的。由于向量仅包含指向实际数据的指针，因此您只是制作了一堆指针的副本。但是，后续代码：

```
std::vector<Vertex *>::iterator vit1 = verList.begin();
std::vector<Vertex *>::iterator vit2 = verList.end();
input->vit_f = vit1;
input->vit_e = vit2; 
```

是问题所在。`input`实际上，您在对象中设置的迭代器来自本地`verList`；*不在*您的`input->v1`列表中。

尝试：

```
input->vit_f = input->v1.begin();
input->vit_e = input->v1.end(); 
```

**附录**

为 OP 更新以避免竞争条件和不需要的向量复制。

首先，重新定义`DataStructure`为：

```
struct DataStructure
{
    MapSmoother *m1;
    std::vector<Vertex *>::iterator first, last
    DataStructure() : m1(NULL) {}
}; 
```

接下来，将您的线程函数定义为：

```
DWORD WINAPI thread_fun(void* p)
{
    DataStructure *input = static_cast<DataStructure*>(p);
    if (input && input->m1)
    {
        for (std::vector<Vertex *>::iterator it = input->first
             it != input->last; ++it) 
        {
             input->m1->relax(*it);
        }
    }
    delete input;
    return 0;
} 
```

最后，将其调用为：（在您的循环中）

```
// all the vertices with the same color index will be stored in verList vector
std::vector<Vertex *> verList;
// ... store vector data ...

cout << "     Processing for color: " << color << endl;
HANDLE hThread[50] = {NULL};
for(int j = 0; j < _countof(hThread); ++j)
{
    DataStructure *input= new DataStructure;
    input->first = verList.begin();
    input->last = verList.end();
    input->m1 = &msmoother
    hThread[j] = CreateThread(0,0,(LPTHREAD_START_ROUTINE)&thread_fun,input,0,NULL);
}
WaitForMultipleObjects(THREAD_COUNT,hThread,TRUE,INFINITE); 
```

或类似的东西。我只是在网上敲定了这个，所以我不知道它是否可以编译，但希望能给你一个足够体面的想法。每个线程都将自己的一对迭代器放入`verList`数组中，并因此进行并发访问。**注意：**他们不能修改向量；只使用它。他们获得迭代器的结构由创建者线程分配，但归线程本身所有，线程本身最终负责销毁它。

# c - 如果您知道 C，为什么还要学习 bash？

> ID：14698374
> 
> 赞同：-4
> 
> 时间：2013-02-05T00:50:08.800
> 
> 标签：c, linux, bash, unix

我的目标是为系统编程课程学习 C（在 Linux/UNIX 中教授，而不是在 Windows 中教授）。

很明显，一起输入命令或编写一批命令（例如对于工具链）将比编写新的 C 程序花费更少的时间。

Bash 具有方便的优势，但学习所有 bash 技巧和语法有其自己的学习曲线。例如，为了做一些基本的文件操作，我不得不问这个问题：

[https://unix.stackexchange.com/questions/63632/find-greatest-last-modified-files-of-dira-file-dirb-file](https://unix.stackexchange.com/questions/63632/find-greatest-last-modified-files-of-dira-file-dirb-file)

学生不会从学习如何`stat`工作和编写程序来执行任何循环或`if`构造中获得更多收益吗？

学习 bash 的论据是什么，当您可以用 C 语言编写任何东西时，例如使用 Linux 系统调用，如`execve`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T00:51:25.700

`grep`当然可以，但是用你的双手（即 C）编写代码需要多长时间？

# php - 如何使用正则表达式检查可选的 URL 参数？

> ID：14698375
> 
> 赞同：0
> 
> 时间：2013-02-05T00:50:22.247
> 
> 标签：php, regex, preg-match

我一直在尝试使用正则表达式来确定当前 URL 是否匹配[http://test.com](http://test.com)或 http://test.com/page/[0-9]+

我一直在看无数的教程，但找不到任何可以解决任何问题的教程，即使是这样的远程。我已经尝试了几乎所有的东西，但我对正则表达式太缺乏经验，无法让它继续下去。

谢谢你的帮助，我希望你能指出我正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T00:54:36.000

你可以试试

```
"http://test\.com(?:/page/[0-9]+)?" 
```

# php - php计算特定数组内的总值而不是整个数组

> ID：14698381
> 
> 赞同：-1
> 
> 时间：2013-02-05T00:50:50.423
> 
> 标签：php, arrays, multidimensional-array, calculated-field

我有一个看起来像这样的数组：

```
$costs = 
  Array
   (
    [0] => Array
       (
        [amount_set] => 27.99
        [amount_cost] => 17
        [amount_markup] => 3.6

    )

  )

  Array
      (
       [0] => Array
         (
        [amount_set] => 6.99
        [amount_cost] => 3.12
        [amount_markup] => 1          
       )

       [1] => Array
        (           
          [amount_set] => 16.99
          [amount_cost] => 10
          [amount_markup] => 2.54         
        )
) 
```

我要做的是遍历`$cost`数组，并为每个数组计算一个总值`amount_set`。

如果我使用：

```
foreach($costs as $cost) {
   $amount +=$cost['amount_set'];
} 
```

然后我会得到所有组合`amount_set`值的总和，但我只想得到每个单独值的总和。例如，我的第一个总数是 27.99，第二个应该是 23.98。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T00:59:45.657

如果我理解正确，$costs 是一组成本集，它们是成本数组，您需要每个集的总数。这意味着你需要类似的东西：

```
foreach($costs as $cost_set) {
    $amount = 0;
    foreach ($cost_set as $cost) {
        $amount += $cost['amount_set'];
    }
    $amounts[] = $amount;
} 
```

这将为您提供基于成本组的小计数组。

# ruby-on-rails - 在最后一条记录被销毁时，添加占位符

> ID：14698383
> 
> 赞同：1
> 
> 时间：2013-02-05T00:51:04.383
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我试图确保对象始终至少附有 1 张图像。因此，如果一个人删除了属于某个对象的所有图像，那么它将恢复为默认图像。

在 Rails 中解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:57:14.077

如果您使用的是[回形针](https://github.com/thoughtbot/paperclip)，则可以选择为您的图像指定[default_url ：](http://rubydoc.info/gems/paperclip/Paperclip/ClassMethods#has_attached_file-instance_method)

> default_url：未分配附件时返回的 URL。该字段与 url 一样被插值。默认值为“/:attachment/:style/missing.png”

```
has_attached_file :avatar, :default_url => "/images/default_:style_avatar.png"
User.new.avatar_url(:small) # => "/images/default_small_avatar.png" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T01:39:56.203

您可以检查记录是否有图像列表。在不知道您的关联的情况下，我只能假设您有一个名为`Image`which 属于的模型`SomeOtherModel`。在视图中，您可以只检查这些图像是否存在，如果不存在则渲染不同的图像。

```
if some_other_model.images.any?
  # render images here
else
  = image_tag 'placeholder.png' 
```

一种优雅的解决方案可能是使用 placeholder.png 作为包含图像的 div 的背景图像（设置为无重复）。只需确保 div 具有设定的高度并且第一张图像始终与背景图像重叠。

# c# - 使用 LINQ to SQL 进行条件投影

> ID：14698384
> 
> 赞同：2
> 
> 时间：2013-02-05T00:51:17.147
> 
> 标签：c#, linq-to-sql

是否可以使用 LINQ to SQL 进行条件投影？假设我有一个名为 PersonTable 的 SQL 表。在 C# 中，我有几个类：

```
public interface Person
{
 int employeeType; //1 is employee, 2 is manager
 String name;
} 
```

和两个派生类。为简单起见：

```
public class Employee : Person {}
public class Manager : Person {} 
```

现在，我想使用 LINQ to SQL 根据employeeType 投影到适当的派生类：

```
IQueryable<IPerson> = PersonTable.Select(x => //x.employeeType == 1 ? new Employee { } : x == 2 {new Manager {} ) 
```

这对于这种情况是可以的，但是我有一种情况，我试图实例化 7 种不同的可能派生类型，所以条件会变得又长又难看。此外，在我的真实世界场景中，接口/派生类有 15 个左右的属性要填充；这也会很快变得又长又丑。

我的第一次尝试是编写一个返回适当类型的表达式树，但这不起作用，因为我需要知道参数表达式的值才能正确调用 Expression.MemberInit。对于像这样使用 LINQ to SQL 的大型条件初始化，哪种解决方案可能是最好的。

我不能使用表继承，因为我正在投影中创建数据传输对象。我也考虑过使用 where 和 union，但表达式树路径似乎更有趣，因为我将有一个位置来维护代码，而不是每次引入新的派生类时 - 如果这是一个甚至是一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:31:47.423

也许你可以这样做，

```
PersonTable.Where(p => p.employeeType == 1)
    .Select(p => new Employee { ... })
    .Cast<IPerson>()
    .Concat(
        PersonTable.Where(p => p.employeeType == 2)
            .Select(p => new Manager { ... })
            .Cast<IPerson>()); 
```

你也可以试试

```
PersonTable.Select(p => 
     p.employeeType == 1 ? (IPerson)(new Employee { ... }) :
     p.employeeType == n ? (IPerson)(new Other { ... }) :
     (IPerson)(new Manager { ... })); 
```

或者，如果不需要`IQueryable`，

```
PersonTable.AsEnumerable().Select(p => {
    switch(p.employeeType)
    {
        case 2:
            return Manager { ... };

        default:
            return Employee { ... };   
    }}); 
```

# java - 将用户输入附加到字符串中

> ID：14698385
> 
> 赞同：0
> 
> 时间：2013-02-05T00:51:17.787
> 
> 标签：java, string, append, add

我试图将用户输入的字符串附加到使用全局按键和我找到的 api 中。但是我不知道如何在不覆盖已经存在的情况下添加到字符串中。

```
int i = 1;
public String log = "Write";
public String[] logger = new String[i];
public static PrintStream out = null;
public BufferedWriter writer = null;

    public void nativeKeyPressed(NativeKeyEvent e) {
        while(i<1000000000){

        logger[i] = NativeKeyEvent.getKeyText(e.getKeyCode());
        i++;
        System.out.println(logger[i]);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T00:55:01.883

每当您必须将字符或字符串附加到现有变量时，请使用 StringBuilder 类附加方法。

```
StringBuilder strBuilder= new StringBuilder();
strBuilder.append("I am a bad programmer");
strBuilder.append("to use concatenation");
strBuilder.append("Instead of StringBuilder");
strBuilder.append(" or StringBuffer");
String str= strBuilder.toString();

http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html 
```

# java - 从源代码中打开一个类文件

> ID：14698386
> 
> 赞同：0
> 
> 时间：2013-02-05T00:51:18.580
> 
> 标签：java, eclipse

我很难为这个问题找到正确的搜索词。当我在 Eclipse 中查看源代码时，如果有一种方法可以单击引用的类并让它在编辑器中打开该文件，那就太好了。例如：

```
My_Object myObject = new MyObject(); 
```

我想知道是否有一种方法可以单击`My_Object`（这是项目中的一个文件）并让它在编辑器中打开它？如果有一种方法可以用方法做同样的事情，那就太好了。我总是打开文件并扫描我的代码以查找特定的类或方法。我假设此功能存在，但我无法弄清楚。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T00:56:29.117

在对象高亮的情况下，按“F3”打开减速。您也可以按住控制并单击鼠标左键，也可以在对象高亮的情况下单击鼠标右键并选择打开减速。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T00:53:14.397

`My_Object`按住**Ctrl**左键单击

# php - CakePHP：在 routes.php 中重定向

> ID：14698394
> 
> 赞同：1
> 
> 时间：2013-02-05T00:51:48.110
> 
> 标签：php, cakephp, redirect, cakephp-2.1

好的，我不知道我是否采取了错误的方法，但我被困在这里......

我们已经开发了我们的网站，并且我们有许多需要 id 和特殊变量的控制器，链接已经重定向到通过预期的控制器。

新的要求是使用**friendlyUrls**，想法是，而不是：

> [http://domain.com/search/advanced/term:head/city:/set:show-all/sort:basic-relevance](http://domain.com/search/advanced/term:head/city:/set:show-all/sort:basic-relevance)

它现在显示

> [http://domain.com/search/head](http://domain.com/search/head)

或传递选项。

> [http://domain.com/search/in-edinburgh-scotland/by-rating/head](http://domain.com/search/in-edinburgh-scotland/by-rating/head)

我的想法是，在 Routes.php 的开头有一个简单的 if 例如：

```
 $friendlyUrl = $_SERVER['REQUEST_URI'];
    $friendlyUrl = split('/', $friendlyUrl);
    foreach ($friendlyUrl as $key => $params) {
        if(empty($params)){
            unset($friendlyUrl[$key]);
        }
        if($params == 'search'){
           Router::connect('/search/*', array('plugin'=>'Search','controller' => 'Search', 'action' => 'advancedSearch', 'term'=>'head));

        }elseif ($params == 'employers') {
            # code...
        }elseif ($params == 'employer-reviews') {
            # code...
        }elseif ($params == 'jobs') {
            # code...
        }
    } 
```

那没有用，然后我尝试在我的**AppController**中添加类似的东西，但什么也没有。

总而言之，必须做的是：

*   网址格式为：/search/{term}
*   实际上被重定向到：/search/advanced/{term}/city:{optional}/set:show-all/sort:basic-relevance
*   要继续阅读的网址栏：/search/{term}

有人有想法吗？！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T04:59:15.083

你肯定想看看书中的路由页面

[http://book.cakephp.org/2.0/en/development/routing.html](http://book.cakephp.org/2.0/en/development/routing.html)

有很多选项可以匹配 url 模式以将参数传递给控制器​​。

```
Router::connect(
'/search/:term', 
array('controller' => 'search', 'action' => 'advanced'),
array(
    'pass' => array( 'term')
)
); 
```

您可能应该在操作函数参数定义中设置 city & set & sort 的默认值：

```
public function advanced($term, $city='optional', $sort = 'basic'){
     // your codes
} 
```

这样做的好处是您的 $this->Html->link 将反映它们生成的路径中的路由。（反向路由）

cake 中的路由非常强大，你应该可以通过它们获得一些体面的友好 url。我使用的另一件事是使用行为 - sluggable - 从内容项标题生成可搜索字段 - 用于 cms 中的页面/内容类型。

祝你好运！

# php - 我将如何使用 jQuery 发布此表单？

> ID：14698397
> 
> 赞同：-2
> 
> 时间：2013-02-05T00:51:56.093
> 
> 标签：php, jquery, html, forms

我将表格全部设置为此处的演示：[http](http://www.alessioatzeni.com/wp-content/tutorials/jquery/login-box-modal-dialog-window/index.html) ://www.alessioatzeni.com/wp-content/tutorials/jquery/login-box-modal-dialog-window/index.html但我不知道如何发布用户名和密码以便由我的 jQuery 处理。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:54:33.457

您应该发布您遇到问题的特定代码，但我认为这会有所帮助：

```
$(document).on('click', '.submit.button', function () {
    $.post('/signin', $(this).closest('form').serialize(), function (data) {
        //check success or failure
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T01:12:59.960

希望这会帮助你。容易得多，因为您只有 2 个字段。谢谢

```
jQuery('.submit.button').click(function(){ 
 var username = jQuery(this).find('#username').val(); 
 var password = jQuery(this).find('#password').val(); 

 jQuery.ajax({
    url: "login.php",
    data:{username:username, password: password},
    type: "post",
    success: function(html) {
           //add success function here
    },
    error: function(html) {
       //add error login here
},
    statusCode: {
     404: function() {
       //404 here
     }
    }
});

}); 
```

干杯!

# spring-mvc - autowire failing

> ID：14698399
> 
> 赞同：0
> 
> 时间：2013-02-05T00:52:03.523
> 
> 标签：spring-mvc, jpa-2.0, autowired

I'm doing a spring-mvc-jpa project and my autowiring is failing on my service bean because "no matching bean was found" Below is my bean that is not found:

```
package com.dave.movie.repository;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.repository.PagingAndSortingRepository;
import org.springframework.stereotype.Service;

 import com.dave.movie.entity.*;

 public interface FilmRepository extends JpaRepository<Film, Long> {

 } 
```

Service class that cannot find the bean:

```
 package com.dave.movie.service;

 import java.util.Collection;

 import javax.annotation.Resource;

 import org.springframework.beans.factory.annotation.Autowired;
 import org.springframework.data.domain.Page;
 import org.springframework.data.domain.Pageable;
 import org.springframework.stereotype.Repository;
 import org.springframework.stereotype.Service;
 import org.springframework.transaction.annotation.Transactional;

 import com.dave.movie.*;
 import com.dave.movie.entity.Film;
 import com.dave.movie.repository.FilmRepository;

 @Service("FilmRepositoryService")
 @Repository
 public class FilmRepositoryService {

//@Resource(name="FilmRepository")
@Autowired
FilmRepository dao;

/*
public FilmRepository getDao() {
    return dao;
}

public void setDao(FilmRepository dao) {
    this.dao = dao;
}

 */

public Collection<Film> GetAllFilms() {
    return dao.findAll();
}

@Transactional(readOnly=true)
public Page<Film> findAllByPage(Pageable pageable) {
    return dao.findAll(pageable);
}   

 } 
```

And here is the root-Context

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans.xsd">

<!-- Root Context: defines shared resources visible to all other web components -->

    <import resource="db.xml" />    
 </beans> 
```

And the db.xml:

```
<?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd  
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd" default-autowire="byName">

<!-- Scans within the base package of the application for @Components to configure as beans -->
<bean id="placeholderConfig"
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location" value="classpath:db.properties" />
</bean>

<bean id="entityManagerFactory"
    class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="showSql" value="true" />
            <property name="generateDdl" value="true" />
            <property name="databasePlatform" value="${db.dialect}" />
        </bean>
    </property>     
</bean>

<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
    destroy-method="close">
    <property name="driverClassName" value="${db.driver}" />
    <property name="url" value="${db.url}" />
    <property name="username" value="${db.username}" />
    <property name="password" value="${db.password}" />
</bean>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">

</bean>

<tx:annotation-driven />
<context:annotation-config/>

<context:component-scan base-package="com.dave.movie.repository" />
<context:component-scan base-package="com.dave.movie.entity" />

<bean
    class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" /> 
```

And here is the actual error:

```
ERROR: org.springframework.web.servlet.DispatcherServlet - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'homeController': Injection of resource dependencies failed; nested exception is     org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'FilmRepositoryService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.dave.movie.repository.FilmRepository com.dave.movie.service.FilmRepositoryService.dao; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.dave.movie.repository.FilmRepository] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessPropertyValues(CommonAnnotationBeanPostProcessor.java:306)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
at javax.servlet.GenericServlet.init(GenericServlet.java:160)
at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:857)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:135)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:16:50.680

The reason is because you are using Spring-Data repositories, but have not declared the tag that causes Spring data to generate the repository proxy classes and beans corresponding to the classes. This is done with the following custom tag:

```
<jpa:repositories base-package="com.dave.movie.repository" 
    entity-manager-factory-ref="entityManagerFactory" 
    transaction-manager-ref="transactionManager">
</jpa:repositories> 
```

# ruby - 我的代码行有什么问题？

> ID：14698400
> 
> 赞同：-2
> 
> 时间：2013-02-05T00:52:17.497
> 
> 标签：ruby

这里有什么问题？我不知道？

```
print "Type the first digit, hit enter."
first_digit = gets.chomp

print "Now type the second digit you wish to add."
second_digit = gets.chomp

answer = second_digit + first digit

print "Here is your answer:#{answer}"

sleep 5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T00:53:57.963

您可能希望将这些字符串转换为整数：

```
first_digit = gets.chomp.to_i 
```

另外，您在这里忘记了下划线：

```
answer = second_digit + first digit
                             ^ right here 
```

# java - 在 actionPerformed 中访问变量

> ID：14698403
> 
> 赞同：0
> 
> 时间：2013-02-05T00:52:52.307
> 
> 标签：java, java-ee-6, actionlistener

我必须定义一个名为“路径”的变量，如 ActionListener 内的代码中所示......但我无法在 actionPerformed 方法之外访问“路径”变量！它在方法之外变为空......我如何访问这个变量？！

```
button.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {

            System.out.println("Search " + textField.getText()
                    + " in Project");

            try {
                System.out.println(project.members().length);
                IResource[] ires = project.members();
                String path = "";
                String findResult = "notFound";
                for (int len = 0; len < ires.length; len++) {
                    if (!(path = loopInFolders(project, ires[len],
                            textField.getText())).equals("")) {
                        System.out.println("found at :" + path);
                        findResult = "found";

                        showResultBox(findResult, path);

                        break;
                    }
                }

                if (path.equals("")) {
                    showResultBox(findResult, path);
                }
            } catch (CoreException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

        }
    }); 
```

即使我使用 getter 和 setter 将变量定义为类中的全局变量..但是该变量不会保留它在 actionPerformed 中的值！只有在 Listener 内部才有我想要的正确值......我想在其他方法中使用这个值，但它在那里变成了 null！

这是我的课！我想在execute方法中访问path变量，这个变量会在createOutput方法里面填写actionListener，但是在actionListener外面总是null！

```
public class FindHandler extends AbstractHandler {

private String path;

@Override
public Object execute(ExecutionEvent event) throws ExecutionException {

    Shell shell = HandlerUtil.getActiveShell(event);
    ISelection sel = HandlerUtil.getActiveMenuSelection(event);

    IWorkspaceRoot root = ResourcesPlugin.getWorkspace().getRoot();
    IProject project = root.getProject(sel.toString()
            .substring(1, sel.toString().indexOf(" ")).trim());
    System.out.println("selected folder "
            + sel.toString().substring(1, sel.toString().indexOf(" "))
                    .trim());

    createOutput(shell, project);

    if (path != null) {
        System.out.println("Pathhhh***444"+ path);
        IPath iPath = new Path(path);
        IFile file = project.getFile(iPath);
        System.out.println("test file*****" + file.getName());

        file = ResourcesPlugin.getWorkspace().getRoot()
                .getFileForLocation(iPath);

        ISelection selection = new StructuredSelection(file);

        IViewReference[] views = PlatformUI.getWorkbench()
                .getActiveWorkbenchWindow().getActivePage()
                .getViewReferences();
        PlatformUI.getWorkbench().getActiveWorkbenchWindow()
                .getActivePage().resetPerspective();

        for (IViewReference view : views) {
            if ("org.eclipse.jdt.ui.PackageExplorer".equals(view.getId())) {
                IViewPart pExplorer = view.getView(true);
                pExplorer.getViewSite().getSelectionProvider()
                        .setSelection(selection);
                break;
            }
        }
    }

    return null;
}

private void createOutput(Shell shell, final IProject project) {

    // Creating the window with a textBox and two buttons of 'Search' and
    // 'Cancel'
    System.out.println(project.getLocation());
    final JTextField textField = new JTextField();
    final JFrame frame = new JFrame("Search File");
    frame.setLayout(null);
    frame.setSize(350, 250);
    frame.setLocation(350, 250);
    JLabel label = new JLabel("Enter File Name:");
    label.setSize(120, 20);
    label.setLocation(20, 25);
    textField.setSize(150, 20);
    textField.setLocation(150, 25);
    frame.getContentPane().add(textField);
    frame.getContentPane().add(label);
    JButton button = new JButton("Search");
    button.setSize(100, 30);
    button.setLocation(70, 100);
    button.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {

            System.out.println("Search " + textField.getText()
                    + " in Project");

            try {
                System.out.println(project.members().length);
                IResource[] ires = project.members();
                path = "";
                String findResult = "notFound";
                for (int len = 0; len < ires.length; len++) {
                    if (!(path = loopInFolders(project, ires[len],
                            textField.getText())).equals("")) {
                        System.out.println("found at :" + path);
                        findResult = "found";

                        showResultBox(findResult, path);

                        break;
                    }
                }

                if (path.equals("")) {
                    showResultBox(findResult, path);
                }
            } catch (CoreException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }

        }
    });
    frame.getContentPane().add(button); // Adds Button to content pane of
                                        // frame
    JButton button_2 = new JButton("Cancel");
    button_2.setSize(100, 30);
    button_2.setLocation(180, 100);
    button_2.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            // TODO Auto-generated method stub
            frame.dispose();
        }
    });
    frame.getContentPane().add(button_2);
    frame.setVisible(true);
    frame.setDefaultCloseOperation(JFrame.HIDE_ON_CLOSE);

    System.out.println("Pathhhh***333"+ path);

}

public String loopInFolders(IProject project, IResource ires,
        String fileName) {

    if (ires.getName().equals(fileName)) {
        return ires.getLocation().toString();
    } else {
        System.out.println(ires.getName());
        IFolder secondFolder = null;
        try {
            secondFolder = project.getFolder(ires.getName());
            System.out.println(secondFolder.members().length);
            if (secondFolder.members().length > 0) {
                IResource[] ires1 = secondFolder.members();
                for (int i = 0; i < ires1.length; i++) {
                    if (!loopInFolders(project, ires1[i], fileName).equals(
                            ""))
                        return ires1[i].getLocation().toString();
                }
            }
        } catch (Exception ex) {
        }
    }
    return "";

}

public void showResultBox(String findResult, String path) {

    if (findResult.equals("notFound")) {

        final JFrame frame = new JFrame("File Not Found");
        frame.setLayout(null);
        frame.setSize(350, 250);
        frame.setLocation(350, 250);
        JLabel label = new JLabel("There is no such file in the project!");
        label.setSize(600, 20);
        label.setLocation(20, 25);

        frame.getContentPane().add(label);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.HIDE_ON_CLOSE);

    } else {

        System.out.println("Pathhhh***111"+ path);

        final JFrame frame = new JFrame("File Found");
        frame.setLayout(null);
        frame.setSize(350, 250);
        frame.setLocation(350, 250);
        JLabel label = new JLabel("File is found at: " + path);
        label.setSize(600, 20);
        label.setLocation(20, 25);

        frame.getContentPane().add(label);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.HIDE_ON_CLOSE);

    }

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T01:07:35.780

```
 // make path a global variable
    String path;

    // if you are trying to access path in another class,
    // make sure you have a getter method like 
    public String getPath() {
       return this.path;
    }

    button.addActionListener(new ActionListener() {

    @Override
    public void actionPerformed(ActionEvent e) {

        System.out.println("Search " + textField.getText()
                + " in Project");

        try {
            System.out.println(project.members().length);
            IResource[] ires = project.members();
            path = "";
            String findResult = "notFound";
            for (int len = 0; len < ires.length; len++) {
                if (!(path = loopInFolders(project, ires[len],
                        textField.getText())).equals("")) {
                    System.out.println("found at :" + path);
                    findResult = "found";

                    showResultBox(findResult, path);

                    break;
                }
            }

            if (path.equals("")) {
                showResultBox(findResult, path);
            }
        } catch (CoreException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T02:09:35.017

您的问题也可能是您使用的是 JFrame 而不是模态 JDialog。您的 execute 方法创建一个窗口（上面提到的 JFrame），显示该窗口，然后在用户有机会与新窗口交互之前***立即尝试使用 path 变量，因此 path 为空是有意义的。***

为了防止这种情况发生，要停止执行方法的执行，直到用户处理了窗口并按下了键 JButton，再次不要显示 JFrame，而是显示模态的 JDialog。如果这样做，当对话框设置为可见时，调用代码将被置于“保持”状态，直到对话框不再可见，此时幸运路径不会为空。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T01:04:23.883

声明一个名为 的类级别字段`path`。在您的`ActionListener`中，不要再次重新声明它，只需为其分配您需要的新值。

```
public class MyClass {
    private String path;

    public MyClass() {
        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                path = "";                
                //....//
            }
        }
    }
} 
```

显然，这是一个简化的示例，您的实现可能会有所不同......

# regex - Textmate中的正则表达式数字后跟组匹配

> ID：14698409
> 
> 赞同：2
> 
> 时间：2013-02-05T00:53:19.977
> 
> 标签：regex, textmate

例如，现在我的数字很少

```
4723
4102
2160
8502 
```

我想`0`在中间添加一个，将它们替换为：

```
47023
41002
21060
85002 
```

所以我所做的是匹配：

```
^(\d{2})(\d{2}) 
```

替换：

```
$10$2 
```

但这并没有给我正确的结果。想知道如何逃避`0`介于`$1`和之间`$2`？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:20:22.080

我猜正则表达式解析器与`$10`. 试试`${1}0${2}`。测试：[http ://regex101.com/r/xT3zT7](http://regex101.com/r/xT3zT7)

# haskell - Haskell 模式匹配 "diverge" 和 ⊥

> ID：14698414
> 
> 赞同：17
> 
> 时间：2013-02-05T00:53:44.003
> 
> 标签：haskell, pattern-matching

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-05T01:03:11.880

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-05T02:14:32.963

# c# - 如何使用 SMO 启用/禁用 Service Broker 队列？

> ID：14698415
> 
> 赞同：0
> 
> 时间：2013-02-05T00:53:43.360
> 
> 标签：c#, vb.net, sql-server-2008, smo, service-broker

我正在使用 SMO 对象来访问我的数据库。我在 SQL Server 上启用了服务代理。我想知道是否有人知道如何通过代码（VB/C#）启用/禁用队列。我试过`ServiceQueue.IsEnqueueEnabled`了，但这只会设置属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:20:22.777

控制 的属性`STATUS = {ON | OFF}`确实是[`.IsEnqueueEnabled`](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.broker.servicequeue.isenqueueenabled.aspx)。但是所有 SMO 修改仅在[`.Alter()`](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.broker.servicequeue.alter.aspx)调用该方法之前都在内存中：

> Alter 方法更新自创建 ServiceQueue 对象或自上一个 Alter 语句以来对 ServiceQueue 对象的属性所做的任何更改。

这是与 SMO 对象交互的一般方式，更改仅在显式应用之前在内存中。

如果您好奇为什么将该属性称为`IsEnqueueEnabled`简短答案，则该名称（正确地）反映了[`sys.service_queues.is_enqueue_enabled`](http://msdn.microsoft.com/en-us/library/ms187795.aspx). 长久以来，该列之所以如此命名，是因为曾几何时，队列具有分别为入队和出队禁用的能力。这种分离并没有使 2005 RTM 变得轻而易举，但在目录视图中留下了痕迹。

# javascript - 在拖动时保留 IFRAME 内容

> ID：14698419
> 
> 赞同：0
> 
> 时间：2013-02-05T00:54:13.640
> 
> 标签：javascript, jquery, jquery-ui, jhtmlarea

在我当前的项目中，我正在一些`TEXTAREA's`可拖动和可排序的行中实现 jHtmlArea WYSIWYG 插件。唯一的问题是，一旦您开始拖动它们，它们就会丢失`IFRAME`插件掩盖关联的`TEXTAREA`. jQuery 的`.clone`功能正在被使用，但它本身并不会携带所有数据，甚至将其设置为`.clone(true)`或`.clone(true, true)`不保留拖动数据。例子：

[http://jsfiddle.net/5QL7W/1/](http://jsfiddle.net/5QL7W/1/)

有什么方法可以保存内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:07:56.733

我想我终于在这里弄清楚了：

[http://jsfiddle.net/5QL7W/27/](http://jsfiddle.net/5QL7W/27/)

在我意识到似乎在拖动时消失的内容并没有完全消失而是存储在某个地方（我不知道）并且会在页面重新加载/刷新后重新出现在富文本编辑器的 IFRAME 之后，答案才慢慢出现（无法在 jsfiddle 中轻松说明的东西，其中重新加载页面会从头开始）。一旦我终于意识到，然后我使用了 jHtmlArea 插件的“dispose”功能（我认为他们应该将其命名为“destroy”），然后立即重新初始化插件，然后数据将重新出现。由于我无法弄清楚如何识别 DOM 中被拖动克隆的行（或者至少如何创建它的 jQuery 对象），所以我对所有 TEXTAREA 进行了处理和重新初始化[http://jsfiddle.net/5QL7W/24/](http://jsfiddle.net/5QL7W/24/)为例）。

相关代码：

```
var fixHelperModified = function (e, tr) {
    var $originals = tr.children();
    var $helper = tr.clone();
    $helper.children().each(function (index) {
        $(this).width($originals.eq(index).width())
    });
    return $helper;
},
updateIndex = function (e, ui) {
    $('td.index', ui.item.parent()).each(function (i) {
        $(this).html(i + 1);
    });
    $('#sort TBODY TEXTAREA').each(function () {
        $(this).htmlarea('dispose');
        $(this).htmlarea({
            toolbar: ["bold"]
        });
    });
};

$("#sort TBODY").sortable({
    helper: fixHelperModified,
    stop: updateIndex
}); 
```

# c# - RedirectStandard 输出/错误不会为标准输出/错误调用我的事件

> ID：14698425
> 
> 赞同：0
> 
> 时间：2013-02-05T00:54:35.347
> 
> 标签：c#, httplistener

嗨，我正在尝试为我的系统构建一个解析器来管理我的 Tekkit 服务器我正在使用 C#，但我的 Tekkit 服务器进程上有 RedirectStandardOutput，并且有一个方法设置，然后在添加到我的控制台后将输出发送到列表，但它没有添加到`List<string>`

这是我的代码：

```
public void StartServer(string maxMem, string minMem, string path)
{
    ThreadStart server = new ThreadStart(delegate() { StartServerThread(maxMem, minMem, path); });
    server.Invoke();
}

private void StartServerThread(string maxMem, string minMem, string TekkitPath)
{
    try
    {
        TekkitServer.StartInfo.FileName = "java";
        TekkitServer.StartInfo.Arguments = String.Format("-Xmx{0} -Xms{1} -jar \"" + TekkitPath + "\" -nojline nogui", maxMem, minMem);
        TekkitServer.StartInfo.UseShellExecute = false;
        TekkitServer.StartInfo.RedirectStandardInput = true;
        TekkitServer.StartInfo.RedirectStandardOutput = true;
        TekkitServer.OutputDataReceived += new DataReceivedEventHandler(TekkitServer_OutputDataReceived);

        IsStarted = TekkitServer.Start();
        TekkitServerInput = TekkitServer.StandardInput;
    }
    catch (Exception)
    {
    }
}

void TekkitServer_OutputDataReceived(object sender, DataReceivedEventArgs e)
{
    /*B*/recordedData.Add(e.Data);
    Console.Out.WriteLine(e.Data);
} 
```

断点在哪里`/*B*/`，断点永远不会激活

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:56:40.093

默认情况下，标准输出指向控制台窗口。
如果您需要对它做某事，则需要重定向它，因此，您需要设置`RedirectStandardOutput = true;`要触发的事件。

* * *

编辑：这是我的工作代码（省略了错误处理和日志记录）：

```
public int ExecuteCommand(CommandParameters parameters)
{
  Process process = new Process();
  process.StartInfo.RedirectStandardInput = true;
  process.StartInfo.RedirectStandardOutput = true;
  process.StartInfo.RedirectStandardError = true;
  process.OutputDataReceived += StdOutputHandler;
  process.ErrorDataReceived += StdErrorHandler;
  process.StartInfo.UseShellExecute = false;
  process.StartInfo.FileName = ...;
  process.StartInfo.Arguments = ...;
  process.Start();
  process.BeginErrorReadLine();
  process.BeginOutputReadLine();
  process.WaitForExit(parameters.Timeout);
  return process.ExitCode;
}

private void StdOutputHandler(object sendingProcess, DataReceivedEventArgs outdata)
{
  if (!string.IsNullOrEmpty(outdata.Data))
  {
    OutputMessages.Add(outdata.Data);
  }
} 
```

您的代码中缺少的链接很可能是[`BeginOutputReadLine`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.beginoutputreadline.aspx)实际获取处理程序方法的链接。

此外，我使用了一个新`Process`对象，并等待它完成它的工作，因此不会干扰以前的调用。

# c++ - 最近公开的现代 C 派生词？

> ID：14698427
> 
> 赞同：1
> 
> 时间：2013-02-05T00:54:51.290
> 
> 标签：c++, c

我记得在 Hacker News 上读到过一种现代的类 C 语言，它具有非常漂亮的特性，但我再也找不到它了。我可以唤起的名字是“C9”，但这并没有产生搜索结果。

它几乎是 C 的超集，具有多遍编译（因此，不需要标头和前向声明）和命名空间，以及动态数组语法和字符串处理糖。

我即将开始一个低级项目，这将是一个很好的尝试机会。恐怕我的 C 有点生疏了，经过多年的 python 和咖啡脚本，所以它肯定会派上用场。

任何希望 SO 中的某个人听说过它，或类似的项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T01:05:21.847

我想我读了同一篇文章。听起来像[C2](http://www.c2lang.org/)，包括多遍解析。

# c# - Form.Location 必须设置两次

> ID：14698431
> 
> 赞同：0
> 
> 时间：2013-02-05T00:55:02.253
> 
> 标签：c#, winforms, xna-4.0

我正在编写一个 C# 应用程序（具体来说是 XNA），并且在尝试设置窗口位置时遇到了一些非常奇怪的行为。我第一次设置位置时，它把它放在一个奇怪的地方（总是一样的），但如果我再次设置它，即使在下一行，它也可以工作。

这是我正在使用的代码。Location 中的初始值为 657、286。尝试将其设置为 1920、300 后，位置变为 2257、314。如果我再次运行该设置，它会正确地将位置更新为 1920、300。

我已经尝试过完全清理和重建，并尝试在调试和发布中运行。我还尝试在此行之前放置一些代码，以尝试排除时间问题。我在这里完全被难住了，所以任何帮助将不胜感激。

```
var form = (System.Windows.Forms.Form)System.Windows.Forms.Control.FromHandle( this.Window.Handle );
form.Location = new System.Drawing.Point( 1920, 300 ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:29:36.507

要设置表单的位置，请尝试以下操作：

```
this.Location = new System.Drawing.Point(1920, 300) 
```

请注意，这假定您尝试重新定位的表单是您正在调用的方法的父对象。

# c# - 我最近在我的类库中添加了一个文件夹，现在我收到一个错误“找不到类型或命名空间”

> ID：14698432
> 
> 赞同：0
> 
> 时间：2013-02-05T00:55:11.787
> 
> 标签：c#, asp.net-mvc

我知道这可能很简单，但我最近在我的模型项目中添加了一个文件夹，并将我的所有模型都放在那里。完成此操作后，我收到一条错误消息，提示“在 CapWorx.QuikCap.Models 中找不到类型或命名空间‘填充器’”。正如预期的那样，因为我将“填充”移动到了一个新位置。我在 CapWorx.QuikCap.Models.Data 中放置了“填充物”。这是错误：

![在此处输入图像描述](../Images/6f920a910bbd18eeb1dc402d3cb798e9.png)

当我单击页面上的填充项并且页面应该转到该项目的编辑表单时出现错误：这是我的编辑方法在我的控制器中的样子。请记住，在单步执行代码时，我从未在代码中遇到任何错误。事实上，如果我将鼠标悬停在“填充”上，它会显示所有属性，这是应该在下一个屏幕（编辑）上显示的，但我得到了错误。

```
public ActionResult Edit(int id, int cappk)
    {
        filler filler = db.fillers.Find(id);
        if (filler == null)
        {
            return HttpNotFound();
        }

        ViewBag.capsule_fk = new SelectList(db.capsules, "pk", "name", filler.capsule_fk);
        return View(filler);
    } 
```

我已经将我的 using 语句更新为`using CapWorx.QuikCap.Models.Data`, from `using CapWorx.QuikCap.Models`。

是否有某种缓存正在保留旧位置？下面是我的 CapWorx.QuikCap.Models 项目的屏幕截图。'filler' 在 DataModel.edmx 中定义：

![在此处输入图像描述](../Images/99505ac30e13ec6cbfdd66319bffe6f1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:57:26.917

此问题的解决方案是我的填充对象的编辑视图（这是应用程序在抛出此错误之前试图转到的内容）在页面顶部声明了对我的填充对象的错误引用。之前，这是我页面顶部的样子：

```
@model CapWorx.QuikCap.Models.filler

@{
    ViewBag.Title = "Edit Existing Filler";
    Layout = "~/Views/Shared/_Layout.cshtml";
} 
```

然后，我将其更改为：

```
@model CapWorx.QuikCap.Models.Data.filler

@{
    ViewBag.Title = "Edit Existing Filler";
    Layout = "~/Views/Shared/_Layout.cshtml";
} 
```

然后，它奏效了。大多数人很容易忽略这一点，因为我没有收到任何编译时错误，即使我在此页面上有红色波浪线。感谢所有的建议。

# java - SortedMultiset 返回对象的集合（不仅仅是对象的计数）？

> ID：14698433
> 
> 赞同：1
> 
> 时间：2013-02-05T00:55:11.737
> 
> 标签：java, collections, guava

我想组织一组`Events`具有唯一性`id`和`time`. 我想`Events`在特定的时间范围内有效地查询。有些`Events`可能具有相同`time`但不同的`id`.

有些人`Events`可能有相同的`time`，所以番石榴`TreeMultiSet`类真的很接近我的需要。

但是，请考虑以下伪代码片段：

```
class Event
{
    Object id;
    long time;
}

TreeMultiSet<Event> s = TreeMultiSet.create( new Comparator<Event>( )
        {
            @Override
            public int compare( Event o1, Event o2 )
            {
                if ( o1.time < o2.time )
                {
                    return -1;
                }
                else if ( o1.time > o2.time )
                {
                    return 1;
                }
                else
                {
                    return 0;
                }
            }
        });

s.add( new Event( "a", 0 ) );
s.add( new Event( "b", 0 ) );
s.add( new Event( "c", 0 ) ); 
```

在三个加法之后，`TreeMultiSet`将只包含`Event`3 次“a”，因为`TreeMultiSet`只考虑`Comparator`和三个`Event`对象具有相同的`time`。

我的第一个想法是合并`id`为我的`Comparator`实现的一部分，以区分`Events`with same `time`，但我`ids`没有自然顺序（它们只是`Objects`且不一定实现`Comparable`）。

`subSet()`这在进行,等...查询时也会很尴尬`headSet()`——我不希望我用来设置查询边界`id`的对象的 重要。`Event`

我可以从头开始实现一些定制的东西（或者，更有可能，将繁重的工作委托给一些底层集合），但我想确保那里没有我遗漏的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:22:23.223

听起来您真正想要的是 TreeMultimap，尽管它目前不支持您想要的子多地图视图。不过，这可能会改变。也就是说，它的 asMap 方法返回一个完整的 NavigableMap。

# jquery - 如何在pageload和pageshow之前将元素的数据传递给jquery-mobile事件

> ID：14698435
> 
> 赞同：0
> 
> 时间：2013-02-05T00:55:16.417
> 
> 标签：jquery, jquery-mobile, mobile

我希望能够识别和处理链接元数据与实时事件。因此，如果我有这样的链接：

```
<a href="#workorder_new" data-city="austin" data-state="tx">Click here</a> 
```

不知何故，我需要将上述元素（特别是数据属性）放入“live”函数中，然后使用 jQuery-mobile 实时元素调用 Javascript 函数，例如：

```
$('[href=#workorder_new]').live('click', function()
{
  var target        = $(this);
  var workorder_new = new workorder_new_controller(target.data);

  $('#workorder_new').bind('pagebeforechange',function(event, ui)
  {
    workorder_new.before();
  });

  $('#workorder_new').bind('pageshow',function(event, ui)
  {
    // var page = event.target.id;
    workorder_new.after();
  });
});

function workorder_new_controller(data)
{
  var city  = data.city;
  var state = data.state;

  this.before = function(){
    // console.log(data);
  }
  this.after  = function(){
    // console.log(data);
    var today    = new Date();
    var tomorrow = new Date(today.getTime() + (24 * 60 * 60 * 1000));
    $('#workorder_new_form [name=due_date]').val(readable_date(tomorrow));
  }
} 
```

所以这只是我现在正在尝试拼凑的一些代码。但我想我在这里偏离了方向。有人可以就我如何按预期工作提供一些建议吗？或者至少有一些提示可以让我走上正确的道路？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T01:14:44.413

弄清楚了：

```
var params = {};

$('a').live('click', function(event)
{
  $.each($(event.target)[0].attributes, function(key, value){
    params[value.name] = value.value;
  });
});

$('div[data-role="page"]').live('pageshow',function(event, ui)
{
 console.log(params)
}); 
```

来源： http: [//moorberry.net/blog/link-attributes-jquery-mobile/](http://moorberry.net/blog/link-attributes-jquery-mobile/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:25:11.977

```
var target = $(this);
var city = target.data('city');
var state = target.data('state'); 
```

根据您的 jQuery 版本，您应该更改`.live`为`.on`，但这无关紧要。

# c# - 如何获取参数中使用的变量的名称

> ID：14698439
> 
> 赞同：0
> 
> 时间：2013-02-05T00:55:49.380
> 
> 标签：c#

> **可能重复：**
> [在 C# 中查找传递给函数的变量名称](https://stackoverflow.com/questions/72121/finding-the-variable-name-passed-to-a-function-in-c-sharp)
> [获取变量或参数的名称](https://stackoverflow.com/questions/9801624/get-name-of-a-variable-or-parameter)

这是一个很长的解释，所以我将直接进入这个问题：

有没有办法将参数中使用的变量的名称存储到字符串中？

例子：

```
 void ExampleMethod(int parameter1)
{
Stuff
}

ExampleMethod(VariableInt); 
```

我将如何将“VariableInt”放入字符串变量？

# c# - 哪一个更好？转换和类型转换

> ID：14698446
> 
> 赞同：-1
> 
> 时间：2013-02-05T00:56:31.927
> 
> 标签：c#

我想知道对于以下场景哪种方式更好更快。

```
string dateStart = ((DateTime)dtRow["StartDate"]).ToShortDateString(); 
```

或者

```
string dateStart = DateTime.Parse(dtRow["StartDate"].ToString()).ToString("dd/MM/yyyy") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T00:58:59.267

如果`StartDate`data-table 列中存储的值的类型已经是`DateTime`，则第一个比第二个快。否则我们无法比较它们，因为第一个崩溃了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T01:05:05.263

Cast 无疑更好，因为只有当基础数据是 DateTime 类型或兼容时才合适。

第二种方法将 DateTime 转换为 String，然后再转换回 DateTime，这毫无意义。

# objective-c - 从可变大小的字符串中提取一个 8 位数字

> ID：14698449
> 
> 赞同：0
> 
> 时间：2013-02-05T00:56:50.873
> 
> 标签：objective-c, nsstring

我有一个大小未定的字符串，其中包含一个 8 位数字。例子：

```
This is 123456 a string
This is a new string 123456
123456 This is another string 
```

如何提取此类数字的整数值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:06:35.383

`NSString`有一个实例方法`-integerValue`，它返回从字符串内容中提取的整数值。所以`[@"123456" integerValue]`会回来`123456`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T01:29:02.283

我认为你想要的是一个 NSScanner。让扫描仪扫描到第一次出现的 `decimalDigitCharacterSet`，然后使用`scanInteger:`它来获取它找到的 NSInteger 值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T01:39:11.527

您可以使用正则表达式从字符串中提取任何给定格式的数字。如果您只想从任何给定字符串中获取一个整数（在本例中为第一个整数）：

```
NSString* str = @"This is 123456 a string";

NSRegularExpression* regex = [NSRegularExpression regularExpressionWithPattern:@".*?(\\d+).*?" options:NULL error:nil];

NSArray* results = [regex matchesInString:str options:NULL range:NSMakeRange(0, [str length])];

NSString* str2 = [str substringWithRange:[(NSTextCheckingResult*)[results objectAtIndex:0] rangeAtIndex:1]];

NSLog(@"%@",str2);

NSInteger intResult = [str2 integerValue]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T01:53:22.507

从长度不确定的字符串中提取多个给定数字。

```
#import <Foundation/Foundation.h>

NSNumber* numberFromStringWithDigits(NSString* string, NSUInteger digits)
{
      NSScanner *scanner = [NSScanner scannerWithString:string];  
      NSCharacterSet *allowed = [NSCharacterSet decimalDigitCharacterSet];  
      while ([scanner isAtEnd] == NO) {  
          NSString *buffer;  
          if ([scanner scanCharactersFromSet:allowed intoString:&buffer]) {  
              if ([buffer length]==digits){
                  return [NSNumber numberWithInt:[buffer integerValue]];
              }
          } else {        
              [scanner setScanLocation:([scanner scanLocation] + 1)];  
          } 
      }
      return nil;
}

int main(int argc, char *argv[]) {
    @autoreleasepool {
        NSString *url = @"http://garb23age.com/x555xx/xx12345678xxxxxx";
        NSDate *startTime = [NSDate date];  

        NSNumber *n = numberFromStringWithDigits(url,8);

        NSTimeInterval elapsedTime = [startTime timeIntervalSinceNow];  
        NSLog(@"%@ in %f seconds",n,-elapsedTime); // 12345678 in 0.000188 seconds
    }
} 
```

@Bri An C：可能您想要的是`parameterString`提取`NSURL`. 也许您应该发布 URL 以寻求替代解决方案。

# grails - 在 GSP 中导入和使用 groovy 代码

> ID：14698451
> 
> 赞同：10
> 
> 时间：2013-02-05T00:57:02.650
> 
> 标签：grails, groovy, import, gsp

我正在尝试在 GSP 中使用 groovy 函数。请帮帮我，因为我要在这里剥我的头发。

在我的 GSP 顶部，我有`<%@ page import = company.ConstantsFile %>`

在我的 GSP 里面我有

```
<p>
I have been in the heating and cooling business for <%(ConstantsFile.daysBetween())%>
</p> 
```

和我的 ConstantsFile.groovy

```
package company

import static java.util.Calendar.*

class ConstantsFile {

    def daysBetween() {
        def startDate = Calendar.instance
        def m = [:]
        m[YEAR] = 2004
        m[MONTH] = "JUNE"
        m[DATE] = 26
        startDate.set(m)
        def today = Calendar.instance

        render today - startDate
    }
} 
```

我也尝试过将租户更改为 puts、system.out 等，但这不是我的主要问题。

```
Error 500: Internal Server Error
URI
/company/
Class
java.lang.NullPointerException
Message
Cannot invoke method daysBetween() on null object 
```

所以我尝试

```
<p>
    I have been in the heating and cooling business for <%(new ConstantsFile.daysBetween())%>
    </p> 
```

但后来我明白了

```
Class: org.codehaus.groovy.control.MultipleCompilationErrorsException

unable to resolve class ConstantsFile.daysBetween @ line 37, column 1\. (new ConstantsFile.daysBetween()) ^ 1 error 
```

请有人帮助我或将我指向一个显示要做什么的网站..我尝试过谷歌搜索，所有内容都在谈论 ag:select 或其他类型的标签...我只想像我使用的那样输出函数的结果在 JSP 中。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-05T01:05:24.760

首先，您的 GSP 的导入应该是：

```
<%@ page import="company.ConstantsFile" %> 
```

其次，您的 daysBetween 应该是静态的（这更有意义），并且您不会从除控制器之外的任何东西进行渲染：

```
class ConstantsFile {

    static daysBetween() {
        def startDate = Calendar.instance
        def m = [:]
        m[YEAR] = 2004
        m[MONTH] = "JUNE"
        m[DATE] = 26
        startDate.set(m)
        def today = Calendar.instance

        return today - startDate
    }
} 
```

第三，通过以下方式访问它：

```
<p>I have been in the heating and cooling business for ${ConstantsFile.daysBetween}</p> 
```

最后，您应该为此使用 taglib。我现在正在编辑我的帖子以添加一个示例

```
class MyTagLib {

  static namespace = "my"

  def daysBetween = { attr ->
     out << ConstantsFile.daysBetween()
  }
} 
```

然后在您的 GSP 中使用

```
<p>I have been in the heating and cooling business for <my:daysBetween /></p> 
```

# python - 使用偏移量和限制对数组进行切片

> ID：14698455
> 
> 赞同：3
> 
> 时间：2013-02-05T00:57:16.517
> 
> 标签：python

我正在将 SqlAlchemy 选择中的一些数据迁移到项目 ID 的缓存中。

我正在尝试找出处理附加了限制和偏移量的迁移函数的最佳方法。

我下面的代码工作正常。我担心它需要 7 行代码——通常当这样的事情需要几行代码时，这是因为我没有看到任何东西，或者我忘记了或尚未了解 Python 的某些内容。

```
def sampling( selection, offset=0 , limit=None ):
    if offset or limit:
        if limit is not None:
            limit = offset + limit        
        else:
            limit = len(selection)
        selection = selection[offset:limit]
    return selection

ids = range(1,100)
print sampling(ids,1,20)
print sampling(ids,10,20)
print sampling(ids,90)
print sampling(ids,90,300) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-05T01:02:51.040

以下应该有效：

```
def sampling(selection, offset=0, limit=None):
    return selection[offset:(limit + offset if limit is not None else None)] 
```

这有三个原因：

1.  无需检查偏移量是否为0（如果为0，则从头开始）

2.  `selection[offset:None]`从`offset`列表的末尾开始

3.  如果限制是整数，则`(limit + offset if limit else None)`可以使用三元运算符，如果不是。（请注意，如果大于列表的长度并不重要。将默认到列表的末尾）。`limit + offset``None``limit + offset``selection[10:100000000]`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T01:22:31.880

```
from itertools import islice
def sampling(selection, offset=0, limit=None):
    return islice(islice(selection, offset, None), limit) 
```

或者如果你需要一个列表而不是一个可迭代的

```
def sampling(selection, offset=0, limit=None):
    return list(islice(islice(selection, offset, None), limit)) 
```

# openstack - openstack nbd15 错误信息

> ID：14698457
> 
> 赞同：-1
> 
> 时间：2013-02-05T00:57:29.703
> 
> 标签：openstack

我正在尝试根据“openstack clouding computing cookbook2012”一书进行openstack部署。我做的一切都和书上的一模一样。一切都很好，直到我运行命令：euca-run-instances ami-00000002 -t m1.small -k openstack 来启动一个 openstack 实例。

在我运行这个命令后，euca-describe-instances 显示实例状态一开始是挂起的。但是过了一会，在openstack计算节点看到报错信息：block nbd15: receive control failed (result -32)

然后 euca-describe-instances 显示实例状态为错误。

我尝试了整个过程的两次（我的意思是从安装虚拟机开始），结果相同。

有人可以帮忙吗？我现在被困在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:29:09.303

很抱歉要求澄清，但您使用的是什么版本的 OpenStack 以及确切的错误消息是什么（请包括整个长行，可能带有一些上下文）？nova 代码库中没有出现“接收控制失败”的文本。

# windows - 使用 Visual C++ 2010 制作的 Windows 控制台应用程序的最低操作系统是多少？

> ID：14698458
> 
> 赞同：1
> 
> 时间：2013-02-05T00:57:32.720
> 
> 标签：windows, console, operating-system, requirements, visual-c++-2010

我使用 Visual C++ 2010 创建了一个控制台应用程序。我可以运行该程序的最早版本的 Windows 是什么？我知道它可能取决于您在程序中使用的 Windows API 函数，所以我只在程序中使用以下函数：

*   [GetStdHandle()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683231%28v=vs.85%29.aspx "GetStdHandle()")
*   [SetConsoleTextAttribute()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686047%28v=vs.85%29.aspx "SetConsoleTextAttribute()")

程序中的其他所有内容都是标准 C++。我知道控制台应用程序应该能够在非常早期的 Windows 版本上运行，但我不知道 VC++ 2010 的编译如何影响最低操作系统要求。那么，在 Windows Vista 上使用 Visual C++ 2010 编译的控制台应用程序是否能够在 Windows 95 等系统上运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:06:55.080

根据[Can I use Visual Studio 2010's C++ compiler with Visual Studio 2008's C++ Runtime Library?](https://stackoverflow.com/questions/2484511/can-i-use-visual-studio-2010s-c-compiler-with-visual-studio-2008s-c-runtim) , VS C++ 2010 运行时依赖于 Windows XP SP2 的功能。因此，除非您采取一些变通办法来避免使用 C++ 2010 运行时，否则这是您可以定位的最旧版本。

# node.js - 如何将我的 nodejs 程序更改为 node？

> ID：14698459
> 
> 赞同：0
> 
> 时间：2013-02-05T00:58:05.540
> 
> 标签：node.js

我以我认为正常的方式下载了 NodeJS，但由于某种原因，在我的 linux 机器上安装它后，nodeJS 程序被称为“nodejs”而不是“node”。这是有问题的，因为我从 NPM 获得的每个模块都使用“节点”来运行它们的脚本。所以我不得不进入并手动更改文件以使用“nodejs”。这很烦人，我想改变它，所以我的机器现在只使用“节点”。这样做的最佳方法是什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:32:39.080

创建一个符号链接，如下所示：

```
 sudo ln -s /usr/bin/nodejs /usr/bin/node 
```

那应该这样做。

# jquery - 使用属性“标题”更改 CSS 项目

> ID：14698461
> 
> 赞同：3
> 
> 时间：2013-02-05T00:58:19.900
> 
> 标签：jquery, css, title

到目前为止，只是试图让它根据标题中的内容重新设置每个元素的样式，它只根据第一个元素更改它，而忽略其他元素。当我使用“each()”时，它应该检查每一个，然后将颜色更改为红色表示没有蓝色表示是。

```
 <html>
<head>
<title>colorme</title>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2      /jquery.js"></script>
<script>
$(document).ready(function(){

 $(".test").each(function(){ 

 var title = $(this).find('.taskName').attr("title");
    if(title =="yes") {
   $('div.taskName').css('color','blue');

    }
 else if(title =="no")  {
     $('div.taskName').css('color','red');

    }
});

});

</script>

</head>
<body>
<div class="test">
<div class="taskName" title="yes">this should  be blue</div>
<div class="taskName" title="no">this should not be blue</div>
<div class="taskName" title="yes">this should  be blue</div>
<div class="taskName" title="no">this should not be blue</div>
</div>

</body>

 </html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T01:02:04.717

试试这样：

```
var $div = $('div.taskName');
$div.filter('[title=yes]').css('color', 'blue');
$div.filter('[title=no]').css('color', 'red'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T01:06:48.283

这可以在没有 jQuery 或 JavaScript 的情况下完成。纯 CSS：

```
.taskName[title='yes']
{
    color: blue;
}
.taskName[title='no']
{
    color: red;
} 
```

[jsfiddle.net/KSyn3](http://jsfiddle.net/KSyn3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T01:00:15.560

`.attr`只会选择找到的*第一个*属性。 `$("div.taskName")`也会影响*所有*属性。您需要遍历每一个以获取标题并获取要更新的正确 div。不过，您可以立即执行此操作：

```
$(".test").each(function(){ 
    $(this).find('.taskName').each(function () {
        var title = $(this).attr('title');
        if ('yes' == title) {
            $(this).css('color', 'blue');
        }
        else if ('no' == title) {
            $(this).css('color', 'red');
        }
    });
}); 
```

[http://jsfiddle.net/ExplosionPIlls/qrRGN/](http://jsfiddle.net/ExplosionPIlls/qrRGN/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T01:00:52.070

为什么不避免选择`.test`而只是选择`.taskname`

```
 $(".taskName").each(function(){ 
    var title = $(this).attr("title");
    if(title =="yes") {
        $(this).css('color','blue');

    }else if(title =="no")  {
        $(this).css('color','red');
    }
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-05T01:01:46.917

这是很好的代码：

```
$(document).ready(function(){

    $(".taskName").each(function(){ 

        var title = $(this).attr("title");
        if(title =="yes") {
            $(this).css('color','blue');

        }
        else if(title =="no")  {
            $(this).css('color','red');

        }
    });

}); 
```

您的错误来自您使用`div.taskName`jQuery 选择器这一事实。因此，它针对**所有**任务名称，而不仅仅是当前任务名称。

这就是您需要使用关键字“this”的原因，这样每次循环运行时，它都会针对*不同*的元素。

另外，我更改了循环的目标。这样，您就不需要使用该`find()`功能。这样更快。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-05T01:02:48.403

```
$('.taskName[title="yes"]').css('color', 'blue');
$('.taskName[title="no"]').css('color', 'red'); 
```

还具有在支持它的浏览器上使用 querySelectorAll 的好处。

# scala - Scala：在使用需要它们的 java 框架时消除 getter 和 setter...（Java/Scala 互操作性）

> ID：14698468
> 
> 赞同：0
> 
> 时间：2013-02-05T00:58:54.980
> 
> 标签：scala, properties, functional-programming, pojo

嘿，我正在使用 getter 和 setter，因为我依赖的 java 库还没有 scala 版本（tinkerpop，但它不相关）。

有没有办法重写我的代码以消除使用 java 框架时的可变性？

```
trait GraphedUser extends BaseFramedEntity{

    @Property(GraphedUser.USER_USERID)
    def setUserId (userId: String)

    @Property(GraphedUser.USER_USERID)
    def getUserId:String

    @Property("firstName")
    def setFirstName (userId: String)

    @Property("firstName")
    def getFirstName:String

    // ...
} 
```

# c++ - Libtorrent python SSL 绑定

> ID：14698470
> 
> 赞同：0
> 
> 时间：2013-02-05T00:59:02.943
> 
> 标签：c++, python, p2p, libtorrent

libtorrent-python 是否提供 SSL 绑定？到目前为止，它似乎没有公开 SSL 功能 - 但是我发现了这个讨论，其中提到 SSL 功能已集成到 Python API 中：http: [//sourceforge.net/mailarchive/forum.php?thread_name=1340755061.4fea4c75d780a%40puss。 acc.umu.se&forum_name=libtorrent-讨论](http://sourceforge.net/mailarchive/forum.php?thread_name=1340755061.4fea4c75d780a%40puss.acc.umu.se&forum_name=libtorrent-discuss)

作为 libtorrent 的忠实粉丝，如果它暴露在 Python 层上，那将是非常甜蜜的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T02:57:27.633

是的。

它自 libtorrent 0.16.2 以来一直存在。与 SSL 种子相关的功能是：

torrent_handle::set_ssl_certificate 类 torrent_need_cert_alert session_settings::ssl_listen

所有这些都在该版本及更高版本中。

# java - 不知道为什么得到这个 预期错误

> ID：14698474
> 
> 赞同：-3
> 
> 时间：2013-02-05T00:59:32.073
> 
> 标签：java, identifier

所以这是一个非常基本的代码：

```
public class Problem14 {
    public static void main(String[] args) {
        long sumOfSquares = 0;
        long squareOfSums = 0;

        for(int i = 0; i < 100; i++) {
            sumOfSquares += (i * i);
        }

        for(int i = 0; i < 100; i++)
            squareOfSums += i;
        }
        squareOfSums = squareOfSums * squareOfSums; 
        long diff = sumOfSquares - squareOfSums;
        System.out.println(diff);
    }
}

Problem14.java:13: error: <identifier> expected
        squareOfSums = squareOfSums * squareOfSums; 
                    ^
Problem14.java:15: error: <identifier> expected
        System.out.println(diff);
                          ^
Problem14.java:15: error: <identifier> expected
        System.out.println(diff);
                               ^
Problem14.java:17: error: class, interface, or enum expected
}
^
4 errors 
```

我不确定为什么会收到这些错误。这是一个非常基本的代码！

我无法调试，因为我收到我的代码没有主代码的错误！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T01:00:10.077

您`{`在第二个`for`循环之后缺少一个开口：

```
for(int i = 0; i < 100; i++) {
// Here ---------------------^
    squareOfSums += i;
} 
```

通常，当您看到毫无意义的意外错误时，通常意味着括号不平衡或缺少分号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T01:06:16.733

调试这种编译器错误的一种方法是注释掉方法中的所有代码。然后一次取消注释每一行（或使用 for 循环或 if 语句块）并编译，直到收到错误消息。这将有助于缩小问题所在。

# android - Android Eclipse如何添加带有文本的图像按钮

> ID：14698479
> 
> 赞同：-1
> 
> 时间：2013-02-05T00:59:58.677
> 
> 标签：android

> **可能重复：**
> [如何使用复合可绘制对象而不是包含 ImageView 和 TextView 的 LinearLayout](https://stackoverflow.com/questions/8318765/how-do-i-use-a-compound-drawable-instead-of-a-linearlayout-that-contains-an-imag)

我目前只有一个带有文本的按钮，但现在我想向它添加背景图像。但我不希望背景图像覆盖整个按钮。我希望它看起来像这张图片中的按钮。（查看应用截图下方的图片，这是第一张图片。）这是图片的链接。

[https://play.google.com/store/apps/details?id=com.pxstudios.minecraftpro&feature=related_apps#?t=W251bGwsMSwxLDEwOSwiY29tLnB4c3R1ZGlvcy5taW5lY3JhZnRwcm8iXQ](https://play.google.com/store/apps/details?id=com.pxstudios.minecraftpro&feature=related_apps#?t=W251bGwsMSwxLDEwOSwiY29tLnB4c3R1ZGlvcy5taW5lY3JhZnRwcm8iXQ) ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:30:17.763

你可以这样做：

```
<Button
    android:id="@+id/button_name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/[your_image]"
    android:text="Your_Text"
    android:textSize="48dp" //<==give a dimension to a text
    android:textStyle="bold"//<==is better your text is bold
     /> 
```

如果您使用 Eclipse，请使用图形编辑器创建您想要的按钮数量，只需复制并粘贴到您的 Xml 文件中。并使用 Strings.xml 来存储您的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T01:03:52.493

您的意思是按钮右侧带有文本的列表视图？您使用两个视图，一个文本视图和一个图像视图

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >
    <ImageView ...>
    <TextView ...>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T02:31:38.187

您可以使用 android:drawableLeft 属性将图标设置在左侧。Button 是从 TextView 派生的，所以它支持这个属性，

# c# - 从表单代码页中删除事件后，表单设计器上的所有控件都消失了

> ID：14698484
> 
> 赞同：0
> 
> 时间：2013-02-05T01:00:19.700
> 
> 标签：c#, c#-4.0

```
 private void frmSelectCategory_Load_1(object sender, EventArgs e)
    {

    } 
```

我已删除上述功能并按下`F5`，但它给了我一个错误并停止调试。窗体上的所有控件都消失了。我把这段代码放回去并再次运行，它可以工作，但是当我再次编码时，表单上什么也没有。

这是错误消息：

> 错误 1“EbayForm.frmSelectCategory”不包含“frmSelectCategory_Load_1”的定义，并且找不到接受“EbayForm.frmSelectCategory”类型的第一个参数的扩展方法“frmSelectCategory_Load_1”（您是否缺少 using 指令或程序集引用？） C:\Users\Bilgehan\Documents\Visual Studio 2012\Projects\tutorials\EbayForm\EbayForm\frmSelectCategory.Designer.cs 37 55 EbayForm

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T01:02:53.257

在设计器中打开表单。选择属性并清除加载事件。

或者：搜索所有引用`frmSelectCategory_Load_1`并删除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T01:04:35.960

从代码隐藏文件中删除事件处理程序不会从设计器生成的文件中删除分配。您可以手动搜索并删除它，也可以在“属性”窗格中清除事件处理程序。

# jquery - .is(':even') 不适用于变量选择器？

> ID：14698485
> 
> 赞同：6
> 
> 时间：2013-02-05T01:00:26.223
> 
> 标签：jquery, variables, jquery-selectors

我正在使用 jQuery 来检查元素是**奇数**还是**偶数**：

```
 $("#map183").parent().is(':even'); 
```

这将根据元素的位置返回**true**或**false 。**

但是，这将**始终返回 false**：

```
 function whereAreWe(myself,range){
        var parent = myself.parent();
        var position = parent.is(':even');
        alert(position);
        //outputs false
   }

   $('.hasSVG').on('click', function(){
        whereAreWe($(this),2);
   }); 
```

我在这里有一个工作示例：[JSFiddle](http://jsfiddle.net/hutber/kTFrF/)

在示例中，您将看到我正在尝试查看所述元素的父级（.line）是奇数还是偶数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:40:47.983

这是因为 :even 选择器仅在列表中有用，但 parent 仅指一个对象。因此， :即使列表为 1 也没有意义。

但是，您有指示行号的 ID

```
var position = parent.attr("id").substr(4) % 2 == 0;
console.log(position); 
```

提取 id 并从“lineX”中删除“line”-string 为您提供行号 X。使用 MOD 2 进行检查（或者使用 1 进行按位与：）

```
var position = ((parent.attr("id").substr(4) & 1) == 1); 
```

会成功的。

# sync - 如何强制 NFS 安装的磁盘同步到由另一台机器更新的当前状态？

> ID：14698486
> 
> 赞同：0
> 
> 时间：2013-02-05T01:00:43.190
> 
> 标签：sync, race-condition, nfs, centos5

我在 Centos 5 上运行的 C++ 应用程序中遇到如下问题：

在机器 A 上有一个来自机器 C 的 NFS 安装驱动器，其中包含一个文件：

```
/nfs/mounted/drive/path/directory/file 
```

我的应用程序从机器 A 重命名目录：

```
mv /nfs/mounted/drive/path/directory /nfs/mounted/drive/path/directory.old 
```

机器 A 上的应用程序然后 ssh(s) 到机器 B 以运行我创建的应用程序，该应用程序首先检查文件是否存在：

```
/nfs/mounted/drive/path/directory/file 
```

发现文件存在（这是一个竞争条件，机器 B 仍然看到旧状态），因此机器 B 继续进行，就好像文件存在一样，但随后机器 B 在打开文件时失败，并且它不是真的存在。

`sync()`在检查文件之前，我尝试通过在机器 B 上调用我的应用程序来解决此问题。我也尝试过这样做`echo 2 > /proc/sys/vm/drop_caches`，但这些都没有导致我在机器 B 上的应用程序立即看到文件的当前状态消失了。

在机器 B 上的 C++ 应用程序检查文件以确保数据是最新状态之前，我可以在它执行什么操作？我不想通过打开它来明确测试有问题的文件，而是希望使磁盘处于当前状态。我想从 C++ 以相对快速的方式进行这种强制同步，因为所用时间不到四分之一秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:10:23.580

NFS 对每个文件系统对象都有一个文件句柄。当您重命名目录时，filemhandle 没有更改，并且查找会为您提供积极的结果。为了更好地避免这种情况，最好创建一个新目录，将所有文件和目录从原始目录移动并删除源目录。这样，您将使旧文件句柄无效。

# mysql - 使用连接mysql显示表中的特定记录

> ID：14698497
> 
> 赞同：0
> 
> 时间：2013-02-05T01:02:11.647
> 
> 标签：mysql, join

我有下表。

```
 ID SampleID SampleState Date
1   A1   First 1/10/2013
2   A1   Second 1/11/2013
3   A1   Last   1/12/2013
4   A2   First  1/10/2013
5   A2   Closed 1/11/2013
6   A3   First  1/10/2012
7   A3   Second 1/10/2012 
```

我必须使用以下规则拉出行。

```
a.) Display the lowest date of each SampleID provided the date is more than 10 days from current day
b.) Display the latest state of each SampleID.
c.) Do not display the SampleID if any of the state of the SampleID is Closed 
```

例如，对于这个表，输出应该是

```
 SampleID SampleState Date
     A1   Last   1/10/2013
     A3   Second 1/10/2012 
```

我的查询未显示所有结果。

```
SELECT  a.SampleID,a.SampleState,b.date
FROM    ListOfStates 
        INNER JOIN
        (
            SELECT  ID,SampleID, Max(ID) Max_ID, SampleState
            FROM    ListOfStates 
            GROUP   BY SampleID
        ) a 
    on a.Max_ID = ListOfStates.ID
        INNER JOIN
        (
            SELECT  ID,SampleID, Min(ID) min_ID, date
            FROM    ListOfStates 
            GROUP   BY SampleID
        ) b
on b.min_ID = ListOfStates.ID

where              

 b.Date  < DATE_SUB(CURDATE(), INTERVAL 10 DAY)
and a.SampleState !='Closed' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:59:57.307

以下内容将您的条件放入单个查询中：

```
select SampleId,
       min(case when t.Date < DATE_SUB(CURDATE(), INTERVAL 10 DAY) then date end) as MinDate,
       max(case when t.date = tsum.maxDate then state end) as MostRecentState
from t join
     (select SampleId, max(date) as maxDate
      from t
      group by SampleId
     ) tsum
     on t.SampleId = tsum.SampleId
group by SampleId
having max(case when state = 'Closed' then 1 else 0 end) = 0 and
       min(date) < DATE_SUB(CURDATE(), INTERVAL 10 DAY) 
```

我认为关键是条件聚合。`case`您可以使用子句中的语句聚合事物，而不是使用子句（或子句）`select`进行过滤。`where``having`

# asp.net-mvc - Jquery Ajax & Microsoft JScript 运行时错误：语法错误，无法识别的表达式：

> ID：14698500
> 
> 赞同：0
> 
> 时间：2013-02-05T01:02:27.313
> 
> 标签：asp.net-mvc, jquery, asp.net-mvc-4

我正在由 Scott Allen 在 Pluralsite 上开发 ode-to-food MVC4 演示应用程序，并且在启用 ajax 调用时遇到了一个麻烦的错误。我认为这可能与我最近的 jquery 版本有关，但不确定。

当我取消注释以下行以激活 ajax 调用时，我收到 Microsoft JScript 运行时错误，否则它可以正常工作：

```
$('form[data-ucw-ajax="true"]').submit(ajaxFormSubmit); 
```

**错误是：**

```
Unhandled exception at line 4411, column 2 in http://localhost:17471/Scripts/jquery-1.9.0.js

0x800a139e - Microsoft JScript runtime error: Syntax error, unrecognized expression: 
<div class="wrapper clearfix">
    ....            
</div>
<hr /> 
```

**我的视图有这种形式：**

```
<form method="get" action="@Url.Action("Index")" data-ucw-ajax="true" data-ucw-target="#facilitiesList"> 
```

**我的 JQuery 代码是：**

```
$(function () {

    var ajaxFormSubmit = function () {
        var $form = $(this);

        var options = {
            url: $form.attr('action'),
            type: $form.attr('method'),
            data: $form.serialize()
        };

        $.ajax(options).done(function (data) {
            var $target = $($form.attr('data-ucw-target'));
            var $newHtml = $(data);

            $target.replaceWith($newHtml);
            $newHtml.effect('highlight');
        });

        return false;

    };

       $('form[data-ucw-ajax="true"]').submit(ajaxFormSubmit);
}); 
```

**我的脚本加载包看起来像：**

```
bundles.Add(new ScriptBundle("~/bundles/jquery/ucw").Include(
                        "~/Scripts/jquery-{version}.js",
                        "~/Scripts/jquery-ui-{version}.js",
                        "~/Scripts/jquery.unobtrusive*",
                        "~/Scripts/jquery.validate*",
                        "~/Scripts/jquery-migrate-1.0.0.js",
                        "~/Scripts/My.js"
                        )); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:16:32.587

“这个”有范围问题。您在 ajaxFormSubmit 中引用的“this”是 ajaxFormSubmit 的上下文，而不是链接的单击处理程序。你需要做这样的事情：

```
$form = $('form[data-ucw-ajax="true"]'); 
```

或给表格一个 ID 并使用：

```
$form = $('#myForm'); 
```

此外，我会将 Jquery 移动到另一个包，以确保它在所有其他库之前加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:17:38.147

我从[这个变更集中](http://odetofoodmvc4.codeplex.com/SourceControl/changeset/41a770e1ccce)的代码开始，然后通过 NuGet：

*   将 jQuery 更新到 1.9.1
*   将 jQuery UI 更新到 1.10.0
*   添加了 jQuery migrate 1.1.0（也添加到 jQuery 捆绑包中）

我在 Chrome 或 IE10 中看不到任何问题（JQMigrate 警告除外）。除了 jQuery 版本的细微差别之外，我看不出有什么不同。你能尝试增加你的 jQuery 参考吗？如果问题仍然存在，请使用 1.9.1 再次向我发送错误消息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T15:49:44.937

我对该视频课程的另一个代码有类似的错误-当从包装到 JQuery 中的部分视图返回 html 以稍后应用动画时...

```
 function dataReceived(data) {
       var $newHtml = $(data);  -<<<<same Exception here
        $(target).replaceWith(data);
        $(data).effect("highlight");
    }

Exception: Unhandled exception at line 4421, column 2 in jquery-1.9.1.js

0x800a139e - JavaScript runtime error: Syntax error, unrecognized expression: 
<div id="restaurantsList">..... 
```

# tcp - wget 连接被对等方重置

> ID：14698513
> 
> 赞同：11
> 
> 时间：2013-02-05T01:03:35.467
> 
> 标签：tcp, connection, udp, wget

我尝试使用 wget 从我们的 Web 服务器访问 www.indeed.com，但它会引发“对等连接重置”错误。

```
wget www.indeed.com

--2013-02-05 03:03:12--  (try: 3)  http://www.indeed.com/
Connecting to www.indeed.com|208.43.224.140|:80... connected.
HTTP request sent, awaiting response... Read error (Connection reset by peer) in headers.
Retrying. 
```

它以前可以工作，因为我使用他们的 API 有一段时间了，但现在我什至无法访问他们的公共网站。

可能是什么问题？确实可以将服务器的 IP 添加到他们的黑名单中，还是这与我的防火墙等有关？

有没有办法调试/跟踪问题出在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-06T10:02:29.603

您应该使用用户代理，如以下示例

```
wget "http://www.indeed.com/" --user-agent="Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6" 
```

# ios - 确定必要变量类型的设计模式

> ID：14698514
> 
> 赞同：0
> 
> 时间：2013-02-05T01:03:35.997
> 
> 标签：ios, objective-c, cocoa, design-patterns

我希望就以下情况的设计模式或策略获得一些建议：

我有一个控制器类，给定一个媒体队列，它应该呈现一个合适的播放器。媒体可以是视频、音频或其他。每个媒体类型都有一个对应的播放器类型，每个播放器都实现了一个通用协议，该协议定义了播放、暂停、停止等方法。控制器类需要保留对当前播放器的引用，尽管该播放器可能是几种类型之一. 一种想法是使用 id 类型保留引用：

```
@property id currentPlayer; 
```

或者，我可以创建一个超类 Player 并让每个玩家类型子类 Player：

```
@interface VideoPlayer : Player 
```

然后在控制器类中，我可以保留对 Player 类的引用，并在需要时将其转换为特定类型：

```
@property Player *currentPlayer; 
```

这两个选项对我来说似乎都是错误的，所以我想知道是否有设计模式或其他更好的策略可以帮助我实现这一点。Cocoa 或 Objective-C 中的任何示例都会特别有帮助 - 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:25:19.527

为什么不使用
`id<YourProtocol> currentPlayer;` ？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T02:36:09.957

您可以使用类型`id<MyProtocol> currentPlayer;`

要确定您可以使用的实际播放器类别`[currentPlayer isKindOfClass:[MyPlayerType class]]`

# c# - 使用 C# 和 RegEx 下载变量文件名

> ID：14698517
> 
> 赞同：1
> 
> 时间：2013-02-05T01:03:59.827
> 
> 标签：c#, regex, webclient

我在我校信息技术系的电脑维修部门工作，我们的主要职责是清除学生个人电脑上的病毒。为此，我们需要各种病毒清除工具（例如 Kaspersky Virus Removal Tool 和 Malwarebytes Antimalware）的最新版本。所以我写了一个 C# 程序来为我们下载这些文件。我并不太关心下载文件的实际行为。这已经在起作用了（我只是使用 WebClient 类的 DownloadFile 方法）。我遇到的问题是一些文件名随着时间的推移而变化，因为包括它们最后更新的日期和/或程序的版本号。例如，卡巴斯基病毒清除工具的当前下载链接是“[http://devbuilds.kaspersky-labs.com/devbuilds/AVPTool/avptool11/setup_11.0.0.1245.x01_2013_01_29_22_08.exe](http://devbuilds.kaspersky-labs.com/devbuilds/AVPTool/avptool11/setup_11.0.0.1245.x01_2013_01_29_22_08.exe) ”，但明天可能是“ [http://devbuilds.kaspersky-labs.com/devbuilds/ AVPTool/avptool11/setup_11.0.0.1368.x01_2013_02_05_22_08.exe](http://devbuilds.kaspersky-labs.com/devbuilds/AVPTool/avptool11/setup_11.0.0.1368.x01_2013_02_05_22_08.exe) ”。我想到的第一个解决方案是使用正则表达式......问题是我以前从未真正使用过正则表达式，所以我不完全确定如何在这种特殊情况下实施它们，而且我还没有找到任何对类似问题的引用。

使用程序的当前设置，我必须去更改任何已更新文件的下载 url。理想情况下，我希望我的程序能够自动获取这些病毒清除工具的最新版本，这样我们就可以设置一个计划任务来每天晚上运行。

非常感谢解决我的这个问题的任何帮助......我几个月来一直在思考这个特殊问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:07:43.540

比这更容易，他们命名文件的方式意味着如果您进行字符串比较，较大的名称将是最新的。

仅供参考，获取最新文件名...

```
var client = new WebClient();
var r = new Regex("setup(.*?)exe");
var matches =
  r.Matches(client.DownloadString(@"http://devbuilds.kaspersky-labs.com/devbuilds/AVPTool/avptool11/"));
var latest = matches.Cast<object>().ToList()
             .Select(o => o.ToString())
             .OrderByDescending(s => s)
             .FirstOrDefault(); 
```

# sas - 循环遍历变量并对特定变量求和以创建新变量

> ID：14698518
> 
> 赞同：1
> 
> 时间：2013-02-05T01:04:03.237
> 
> 标签：sas

我有一个数据集，其中包含一段时间内的月度公司债券数据，并且我在其上添加了一个无风险债券价格曲线的样条插值，该曲线按月向前 30 年。我有一个变量“next_int”，它告诉我下一张优惠券到期的月份以及距离到期还剩多少个月，“mnts_mat”。

我还有一个优惠券频率变量“cf”。样条债券价格列为 var1, var2,...,var360。我想总结将支付息票的月份的样条债券价格。

因此，对于下一次利息支付在一个月内到期并在 13 个月内到期且票面利率为两年一次的债券，我想创建一个变量 y=var1+var7+var13。我现在写的是这样的：

```
data bond2 (DROP=i);
set bond1;
by issue_id date;
y=0
do i=next_int to mnts_mat by 12/cf;
y=y+var'i';
end;
run; 
```

这行不通。我还尝试过创建一个宏，以将 i 作为参数并输出 vari，但这也不起作用。任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T09:49:34.757

我不太了解问题的本质，但这里有一些指示：

*   你需要在 "y=0" 后面加一个分号
*   看起来您需要为 var1-var360 声明一个数组
*   一旦你声明了一个数组，你就可以引用像 var[i] (not var'i') 这样的东西

[代码]

```
data bond2 (DROP=i);
  set bond1;
  by issue_id date;
  array vars var1-var360;
  y=0;
  do i=next_int to mnts_mat by 12/cf;
    y=y+var[i];
  end;
run; 
```

# iphone - Tapku 库的奇怪时区问题

> ID：14698529
> 
> 赞同：-2
> 
> 时间：2013-02-05T01:04:54.900
> 
> 标签：iphone, ios, objective-c, nstimezone, tapku

Tapku Calendar 控件库有一个奇怪的问题。

它向我显示了错误的日期信息，所以我替换了所有时区

[NSTimeZone timeZoneForSecondsFromGMT:0]

到

[NSTimeZone systemTimeZone]];

到这里为止一切都很好。

但是，当我在名为的文件中更改时区时

NSDate + CalendarGrid.m，

那时我的日历日期选择被禁用。

在日历上未检测到任何触摸。

我一步一步完成了所有这些，并在 NSDate+CalendarGrid.m 文件中发现了这个问题。

我已经花了很多时间找到这个。

请帮助解决这个奇怪的问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T04:21:47.160

我不知道触摸禁用问题，但是要修复错误的日期信息问题，您可以做的是更改 viewDidLoad 中的以下行

`[self.monthView selectDate:[NSDate date] month];`

到

`[self.monthView selectDate:[NSDate date]];`

希望能帮助到你

# android - Android Twitter 获取个人资料图片大小问题

> ID：14698531
> 
> 赞同：2
> 
> 时间：2013-02-05T01:04:59.583
> 
> 标签：android, image, twitter, twitter4j

我正在尝试获取我的关注者的个人资料图片，以便在 ListView 中用作缩略图。

这些缩略图大约是 125x125，但是标准的 twitter4j 调用 User.getProfileImageURL(); 返回小得多的 48x48 尺寸，也建议不要用作图像源。

我尝试创建一个 ProfileImage 对象并将其作为参数提供，User.getProfileImageURL(profile image object.Original),

但是这段代码需要一些时间来简单地检索 url，这在加载缩略图列表时效率很低。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T01:26:03.430

*编辑* Twitter API v1 已被禁用，因此我的旧答案不再有效。请参阅 API v1.1，我认为这需要身份验证。

~~如果您知道屏幕名称，则[twitter api](https://dev.twitter.com/docs/api/1/get/users/profile_image/%3ascreen_name)允许您以 4 种不同的分辨率获取个人资料图像；~~

```
 https://api.twitter.com/1/users/profile_image?screen_name=Krylez&size=mini
 https://api.twitter.com/1/users/profile_image?screen_name=Krylez&size=normal
 https://api.twitter.com/1/users/profile_image?screen_name=Krylez&size=bigger
 https://api.twitter.com/1/users/profile_image?screen_name=Krylez&size=original 
```

~~“更大”的图像是 73x73，它将插入到您的 125x125 容器中。如果您对此不满意，您可以尝试获取“原始”照片，但这张照片可能非常大（慢）而且不一定是正方形。~~

~~无论您选择哪种方法，请确保您没有在 UI 线程上获取和/或解码位图。Android API 文档为正确执行此操作提供了[极好的指南。](https://developer.android.com/training/displaying-bitmaps/index.html)~~

~~我们还可以通过以下方式使用 Twitter4j：~~

`mTwitter.getUserProfileImage();`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-10T10:10:26.217

来自官方文档：

> 您可以从 获取用户最近的个人资料图片`GET users/show`。在用户对象中，您会找到`profile_image_url` 和`profile_image_url_https`字段。这些字段将包含用户上传图像的调整大小的“正常”变体。这种“正常”变体通常为 48x48 像素。
> 
> 通过修改 URL，您可以检索其他变体大小，例如“更大”、“迷你”和“原始”。

按照代码：

```
TwitterApiClient twitterApiClient = TwitterCore.getInstance().getApiClient();
twitterApiClient.getAccountService().verifyCredentials(false, false, new Callback<User>() {
    @Override
    public void success(Result<User> userResult) {
        String name = userResult.data.name;
        String email = userResult.data.email;

        // _normal (48x48px) | _bigger (73x73px) | _mini (24x24px)  
        String photoUrlNormalSize   = userResult.data.profileImageUrl;
        String photoUrlBiggerSize   = userResult.data.profileImageUrl.replace("_normal", "_bigger");
        String photoUrlMiniSize     = userResult.data.profileImageUrl.replace("_normal", "_mini");
        String photoUrlOriginalSize = userResult.data.profileImageUrl.replace("_normal", "");
    }

    @Override
    public void failure(TwitterException exc) {
        Log.d("TwitterKit", "Verify Credentials Failure", exc);
    }
}); 
```

有关详细信息，请参阅[Twitter API 文档 | 个人资料图片和横幅](https://dev.twitter.com/overview/general/user-profile-images-and-banners)

要创建**自定义尺寸图片**，例如 90x90，您可以使用该`createScaledBitmap()`方法。

```
 private final int PROFILE_PIC_SIZE = 90;
 Bitmap originalPic = null;
 Bitmap resizedPic = null;
 try {
     InputStream in = new java.net.URL(photoUrlOriginalSize).openStream();
     originalPic = BitmapFactory.decodeStream(in);
     resizedPic = Bitmap.createScaledBitmap(originalPic, PROFILE_PIC_SIZE, PROFILE_PIC_SIZE, false);
 } catch (Exception exc) {
     Log.e("Error", exc.getMessage());
     exc.printStackTrace();
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-20T23:52:11.210

例如，您可以使用`getOriginalProfileImageURL()`。这是最大的。较小的是`getBiggerProfileImageURL()`和`getProfileImageURL()`。

这些是您检索的网址：

```
http://pbs.twimg.com/profile_images/NUMBER/c62p-cAD_normal.jpeg
http://pbs.twimg.com/profile_images/NUMBER/c62p-cAD_bigger.jpeg
http://pbs.twimg.com/profile_images/NUMBER/c62p-cAD.jpeg 
```

# java - 调用时 GUI 无法正确显示

> ID：14698532
> 
> 赞同：0
> 
> 时间：2013-02-05T01:05:01.003
> 
> 标签：java, swing, user-interface, netbeans

在我的 Main 类中，在它的 main 方法中，我有以下代码：

```
LogRegGUI mainMenu = new LogRegGUI();
mainMenu.setVisible(true); 
```

LogRegGUI 构造函数：

```
public LogRegGUI() {
    initComponents();
} 
```

LogRegGUI 是我的 GUI 类。当我右键单击类并选择运行时，我的 GUI 显示完美。

当我运行整个程序并调用 main 时，GUI 格式稍微不正确（颜色不匹配和按钮显示不正确）。

我究竟做错了什么？

额外信息：

```
Netbeans 7.3 Beta 2
Mac OS X Mountain Lion
Java Swing 
```

LogRegGUI 代码：

```
package com.john.spp.view;
import java.sql.ResultSet;
import java.sql.Statement;

public class LogRegGUI extends javax.swing.JFrame {

/**
 * Creates new form LoginGUI
 */
public LogRegGUI() {
    initComponents();
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    jScrollPane1 = new javax.swing.JScrollPane();
    jEditorPane1 = new javax.swing.JEditorPane();
    jPanel1 = new javax.swing.JPanel();
    settingsButton = new javax.swing.JButton();
    helpButton = new javax.swing.JButton();
    logoutButton = new javax.swing.JButton();
    dataVaultButton = new javax.swing.JButton();
    jPanel2 = new javax.swing.JPanel();
    loginButton = new javax.swing.JButton();
    registerButton = new javax.swing.JButton();
    jLabel3 = new javax.swing.JLabel();

    jScrollPane1.setViewportView(jEditorPane1);

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    setBackground(new java.awt.Color(0, 0, 0));
    setResizable(false);

    jPanel1.setBackground(new java.awt.Color(255, 255, 255));
    jPanel1.setPreferredSize(new java.awt.Dimension(748, 134));

    settingsButton.setText("Settings");
    settingsButton.setEnabled(false);
    settingsButton.setFocusPainted(false);

    helpButton.setText("Help");
    helpButton.setFocusPainted(false);

    logoutButton.setText("Logout");
    logoutButton.setEnabled(false);
    logoutButton.setFocusPainted(false);

    dataVaultButton.setText("Data Vault");
    dataVaultButton.setEnabled(false);
    dataVaultButton.setFocusPainted(false);

    org.jdesktop.layout.GroupLayout jPanel1Layout = new org.jdesktop.layout.GroupLayout(jPanel1);
    jPanel1.setLayout(jPanel1Layout);
    jPanel1Layout.setHorizontalGroup(
        jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(jPanel1Layout.createSequentialGroup()
            .add(12, 12, 12)
            .add(dataVaultButton, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 172, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(org.jdesktop.layout.LayoutStyle.UNRELATED)
            .add(settingsButton, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 172, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(org.jdesktop.layout.LayoutStyle.UNRELATED)
            .add(helpButton, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 172, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(org.jdesktop.layout.LayoutStyle.UNRELATED)
            .add(logoutButton, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 172, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
            .addContainerGap(12, Short.MAX_VALUE))
    );
    jPanel1Layout.setVerticalGroup(
        jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel1Layout.createSequentialGroup()
            .addContainerGap()
            .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING, false)
                .add(settingsButton, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 122, Short.MAX_VALUE)
                .add(helpButton, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .add(logoutButton, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .add(org.jdesktop.layout.GroupLayout.LEADING, dataVaultButton, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
            .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
    );

    jPanel2.setBackground(new java.awt.Color(255, 255, 255));
    jPanel2.setBorder(new javax.swing.border.SoftBevelBorder(javax.swing.border.BevelBorder.RAISED));
    jPanel2.setForeground(new java.awt.Color(255, 255, 255));

    loginButton.setText("Login");
    loginButton.setFocusPainted(false);
    loginButton.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            loginButtonSceneActionPerformed(evt);
        }
    });

    registerButton.setText("Register");
    registerButton.setFocusPainted(false);
    registerButton.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            registerSceneButtonActionPerformed(evt);
        }
    });

    org.jdesktop.layout.GroupLayout jPanel2Layout = new org.jdesktop.layout.GroupLayout(jPanel2);
    jPanel2.setLayout(jPanel2Layout);
    jPanel2Layout.setHorizontalGroup(
        jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(0, 385, Short.MAX_VALUE)
        .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(jPanel2Layout.createSequentialGroup()
                .add(14, 14, 14)
                .add(loginButton, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 172, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(org.jdesktop.layout.LayoutStyle.UNRELATED)
                .add(registerButton, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 172, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(15, Short.MAX_VALUE)))
    );
    jPanel2Layout.setVerticalGroup(
        jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(0, 306, Short.MAX_VALUE)
        .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(jPanel2Layout.createSequentialGroup()
                .add(92, 92, 92)
                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING, false)
                    .add(loginButton, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 122, Short.MAX_VALUE)
                    .add(registerButton, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap(92, Short.MAX_VALUE)))
    );

    jLabel3.setFont(new java.awt.Font("Calibri", 1, 24)); // NOI18N
    jLabel3.setText("SPARTAN PASSWORD PROTECTOR");

    org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(layout.createSequentialGroup()
            .add(jPanel1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
            .add(0, 0, Short.MAX_VALUE))
        .add(layout.createSequentialGroup()
            .add(176, 176, 176)
            .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.CENTER)
                .add(jLabel3)
                .add(jPanel2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
            .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(layout.createSequentialGroup()
            .add(jPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
            .add(18, 18, 18)
            .add(jLabel3)
            .add(18, 18, 18)
            .add(jPanel2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
            .addContainerGap(52, Short.MAX_VALUE))
    );

    pack();
}// </editor-fold>

private void loginButtonSceneActionPerformed(java.awt.event.ActionEvent evt) {
    LoginGUI itemloader = new LoginGUI();
    itemloader.setVisible(true);
    this.setVisible(false);  
}

private void registerSceneButtonActionPerformed(java.awt.event.ActionEvent evt) {
    RegisterGUI itemloader = new RegisterGUI();
    itemloader.setVisible(true);
    this.setVisible(false);
}

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /* Set the Nimbus look and feel */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
     * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(LogRegGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(LogRegGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(LogRegGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(LogRegGUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new LogRegGUI().setVisible(true);
        }
    });
}
// Variables declaration - do not modify
private javax.swing.JButton dataVaultButton;
private javax.swing.JButton helpButton;
private javax.swing.JEditorPane jEditorPane1;
private javax.swing.JLabel jLabel3;
private javax.swing.JPanel jPanel1;
private javax.swing.JPanel jPanel2;
private javax.swing.JScrollPane jScrollPane1;
private javax.swing.JButton loginButton;
private javax.swing.JButton logoutButton;
private javax.swing.JButton registerButton;
private javax.swing.JButton settingsButton;
// End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T01:26:03.187

再次只是一个猜测，但尝试显示 LogRegGUI GUI 的其他代码库是否也使用 Nimbus 外观？在该类中创建任何 GUI 组件之前是否也设置了外观？这是我对你的问题的猜测。

# javascript - drawImage() 实现

> ID：14698542
> 
> 赞同：0
> 
> 时间：2013-02-05T01:06:07.510
> 
> 标签：javascript, jquery, html, canvas

我有两张不同尺寸的画布。我的目标是将用户的绘图从主画布复制到第二个画布作为缩小版本。到目前为止，drawImage() 和 scale 似乎工作正常，但第二个画布保留了旧版本的主图和新副本。我每次在调用drawImage（）之前都尝试清除它，但这似乎没有做任何事情。每次函数运行时，如何仅将当前图像复制到辅助画布？

```
$('#hand').dblclick(function(){
 var canvas = document.getElementById('myCanvas');
 var context = canvas.getContext('2d');
 //var imageData = context.getImageData(0, 0, 100, 100);
 var newCanvas = document.getElementById('scaledCanvas');
 var destCtx = newCanvas.getContext('2d');
 destCtx.clearRect(0, 0, newCanvas.width, newCanvas.height);
 destCtx.scale(.5,.5);
 destCtx.drawImage(canvas, 0, 0);
}); 
```

如有必要，我可以包含更多代码。我也刚刚意识到规模不断被调用；这解释了为什么新复制的图像每次都会变小，所以这可能是另一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:44:29.253

实际上很简单，您使用的是所谓的变换（平移、旋转或缩放）。

为了每次“新鲜”地使用它们，您必须每次都保存和恢复画布状态。

```
$('#hand').dblclick(function(){
 var canvas = document.getElementById('myCanvas');
 var context = canvas.getContext('2d');
 //var imageData = context.getImageData(0, 0, 100, 100);
 var newCanvas = document.getElementById('scaledCanvas');
 var destCtx = newCanvas.getContext('2d');
 destCtx.clearRect(0, 0, newCanvas.width, newCanvas.height);

 //save the current state of this canvas' drawing mode
 destCtx.save();

 destCtx.scale(.5,.5);
 destCtx.drawImage(canvas, 0, 0);

 //restore destCtx to a 1,1 scale (and also 0,0 origin and 0 rotation)
 destCtx.restore();

}); 
```

同样重要的是要注意您可以在调用恢复之前多次推送，以便使用递归函数等执行许多很酷的几何技巧......

看看这个状态和转换的解释： [https ://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial/Transformations](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial/Transformations)

希望这可以帮助您更好地理解画布转换。

# drools - Drools 对象图规则定义

> ID：14698548
> 
> 赞同：0
> 
> 时间：2013-02-05T01:06:32.640
> 
> 标签：drools, object-graph

我有一个对象图，我试图从 Drools 中生成 Fulfillment 对象。具体来说，Fulfillment 对象表示满足或不满足的规则。我的对象图如下所示：

```
Users ---> many Requirements --> Event
      `--> many Records      ----^ 
```

如果记录都指向同一个事件，则它们可以满足要求。这会在 Drools 中生成一个 Fulfillment 对象。

产生 Fulfillments 的减少规则如下：

```
rule "fulfils"
when
    $u : User()
    $rec : Record() from $u.records
    $r : Requirement(event contains $rec.event) from $u.requirements
then
    insertLogical( new Fulfillment($u, $rec, $r, true));
    System.out.println("Inserting logical");
end

rule "unfulfils"
when
    $u : User()
    $rec : Record() from $u.records
    $r : Requirement(event not contains $rec.event) from $u.requirements
then
    insertLogical( new Fulfillment($u, $rec, $r, false));
    System.out.println("Inserting logical");
end

query "fulfillment"
    $fulfillment : Fulfillment()
end 
```

我在这里遇到的问题是，如果用户没有记录，则没有为需求插入 Fulfillment。我相信这是因为没有 Record() 可以搜索来满足我的图表。

有没有办法使用记录而不需要超过零存在？

另外，我是否需要两个规则来插入真假履行，还是有更好的方法来做到这一点？

**编辑**

这些规则我面临的另一个问题是`Requirement(event contains $rec.event)`没有完成查找是否有任何记录满足给定事件集合的任务。有没有更好的方法来查找多个记录的单个事件与单个要求多个事件之间是否存在重叠？

**另一个编辑**

这是我想到的另一种方法。如果没有找到需求/记录对，而不是插入 Fulfillments，为什么不为没有匹配的正 Fullfillment 的所有需求插入逻辑 Fullfillments：

```
rule "unfulfils"
when
    $u : User()
    $r : Requirement() from $u.requirements
    not(Fulfillment(user == $u, requirement == $r, fulfilled == true))
then
    insertLogical( new Fulfillment($u, null, $r, false));
    System.out.println("Inserting logical");
end

query "fulfillment"
    $fulfillment : Fulfillment()
end 
```

这处理了比较两个集合的重叠的问题，以及用户没有记录的情况。（希望对此进行一些验证）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:26:20.367

针对您的情况使用 2 种不同的规则是一种常见模式。它使您的规则库更易于阅读（并且以某种方式维护）。关于你关于 no Record() 的问题，我认为你可以写这样的东西（如果我正确理解你的问题）：

```
rule "unfulfils because of no Record"
when
    $u : User(records == null || records.empty == true) //A user without records
    $r : Requirement() from $u.requirements // but with Requirements
then
    //You don't have a record to set in your Fulfillment object
    insertLogical( new Fulfillment($u, $rec, null, false));
    System.out.println("Inserting logical");
end 
```

# javascript - css3pie 搞乱 DOM，导致 jQuery 选择器错误

> ID：14698554
> 
> 赞同：6
> 
> 时间：2013-02-05T01:06:54.503
> 
> 标签：javascript, jquery, css, css3pie

为了在 IE 6/7/8 上获得 CSS3 效果（边框半径、框阴影...），我使用`css3pie`.

但是，css3pie 会`css3-container (v1) / css3pie (v2)`在 DOM 中生成一些标签，这会扰乱预期的架构。这是一个例子：

**CSS**

```
pre {
    border: 1px solid #aaa;
    border-radius: 5px;
    behavior: url(pie.htc);
} 
```

**HTML**

```
<div class="foo">bar</div>
<p class="getme">paragraph</p>
<pre>preformatted</pre> 
```

**jQuery**

```
// undefined        expected: getme
alert($("pre").prev().attr("class"));

// css3-container   expected: p
alert($("pre").prev()[0].tagName);

// getme            expected: foo
alert($("pre").prev().prev().attr("class"));

// 4                expected: 3
alert($("body").children().size());

// will not set     expected: Impact
$("p+pre").css({fontFamily: "Impact"});

// it almost affects all such jQuery selctors 
```

实际生成的源码是这样的：

```
<DIV class="foo">bar</DIV>
<P class="paragraph">paragraph</P>
<css3-container...>
    <border...>
        <shape...><stroke></stroke><stroke></stroke></shape>
    </border>
</css3-container>
<PRE>preformatted</PRE> 
```

有没有人遇到过这种问题？任何解决方法？是否有 css3pie 的替代方法可以让 CSS3 在 IE 6/7/8 上运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T11:12:25.280

我也尝试过使用 CSS3PIE，但遇到了类似的问题（主要是 jquery 和 mediaqueries）。事实上，我发现它导致的所有问题都没有简单/实用的解决方案。

我的建议是使用[Modernizr`load`](http://modernizr.com/docs/#load)逐步增强旧版 IE 的用户体验。它需要一个更难/更长的过程，因为您必须为每个 CSS3 功能设置一个 polyfill。正如*mario.tco*已经告诉你的那样，Modernizr 的 repo 上有一个[跨浏览器 polyfills 的列表。](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills)这是[特征检测](https://github.com/Modernizr/Modernizr/tree/master/feature-detects)片段的列表。

也看看[html5please](http://html5please.com/)和[caniuse](http://caniuse.com/)。

关于 IE6 和 7，除非您的站点统计数据显示不同，否则平均使用率[低于 1%](http://gs.statcounter.com/#browser_version-ww-monthly-201211-201301-bar)（有一些例外，请查看[ie6countdown](http://www.ie6countdown.com/)），因此您几乎可以忽略它们。但是，使用[条件注释](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/)，您可以针对每个 IE<10 版本使用特定的回退。

请记住，您实际上并不需要在 IE<9 上使用 box-shadow 和其他视觉装饰（除非它们需要可用性）。事实上，任何回退都可能导致巨大的性能问题（想想 IE7 用户可能拥有的硬件）。[网站**不需要**在任何浏览器中看起来完全相同](http://dowebsitesneedtolookexactlythesameineverybrowser.com/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T16:56:17.577

你有没有试过这个：

[http://blog.reybango.com/2010/10/11/how-polyfills-fill-in-the-gaps-to-make-html5-and-css3-usable-today/](http://blog.reybango.com/2010/10/11/how-polyfills-fill-in-the-gaps-to-make-html5-and-css3-usable-today/)

以下是可用于其他功能的 polyfill 列表：

[https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T03:08:08.773

CSS3PIE 是一种非常有用且强大的模拟 CSS3 圆角的方法 - 在我的公司中，我们选择了它，但还有许多其他方法可以做到这一点。

CSS3PIE 创建圆角的方式会将`<css3-container>`标签创建为具有行为属性的元素的前一个兄弟元素，因此它会改变 DOM 结构并中断您的`prev()`调用。`<pre>`css-container 很重要，因为它是标签后面圆角背景的 VML 绘图。

您可以这样做的一种方法是将您的`<pre>`标签包装在类似 a 的其他东西中`<div>`，然后使用它来使用该函数`<div>`导航 DOM 。`prev()`

您可以这样做的另一种方法是创建一个像这样的 jQuery 插件

```
/* This adds a plugin prevPie and nextPie - it is the same as the
   existing prev and next, but it will ignore css3-containers. */
(function($){
    function addPlugin(name) {
        $.fn[name + 'Pie'] = function() {
            var result = [];
            this[name]().each(function(i,el){
                if (el.tagName == 'css3-container') {
                    var val = $(el)[name]()[0];
                    val && result.push(val);
                } else {
                    result.push(el);
                }
            });
            return $(result);
        }
    }
    addPlugin('prev');
    addPlugin('next');
})(jQuery); 
```

现在，以下内容应该可以在所有浏览器中像您希望的那样工作。

```
// undefined        expected: getme
alert($("pre").prevPie().attr("class"));
// css3-container   expected: p
alert($("pre").prevPie()[0].tagName);

// getme            expected: foo
alert($("pre").prevPie().prevPie().attr("class"));
// P                expected: div
alert($("pre").prevPie().prevPie()[0].tagName)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T08:57:58.190

这可能不是您要寻找的答案，但与其试图让 jQuery 忽略 PIE 的注入元素，我建议（重新）编写您的 jQuery 以更多地使用类/ID 并减少对页面结构的依赖。这样做的好处是使您的代码对其他页面结构更改更具弹性，并使您的代码更具可移植性和可重用性。

[当您必须遍历 DOM 时， jQuery 的](http://api.jquery.com/category/traversing/)大多数（如果不是全部）遍历方法都包含一个过滤器选择器参数，您可以使用它来排除 PIE 的元素，例如：

```
$("pre").prevUntil('*', 'not(css3-container)')

$("body").children('not(css3-container)') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T01:30:39.987

而不是只使用原始`prev()`添加一个 CSS 选择器来缩小搜索范围

```
$("pre").prevUntil('p').attr("class");
// OR
$("pre").prevUntil('.paragraph').attr("class"); 
```

如果您打算使用 CSS3 “hack” 来使 IE 6/7/8 正常运行，请不要尝试在遍历 DOM 时尝试更具体地依赖预期的 DOM 结构。

**编辑**

将`prev()`函数调用更改为`prevUntil()`

# php - 如何使用 PHP 回显存储在数据库中的所有图像？

> ID：14698556
> 
> 赞同：-3
> 
> 时间：2013-02-05T01:06:56.660
> 
> 标签：php, html, mysql, blob, echo

我想创建一个页面，显示存储在我的名为“festival”的数据库的“store”表中的所有图像，并将它们呈现在 HTMl 表中。我数据库中的图像存储为 BLOB。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:12:33.390

首先，您必须查询所有图像。然后您可以显示保存为 blob 的图像，如下所示：

```
echo '<img src="data:image/jpeg;base64,' . base64_encode( $blobimage ) . '" />'; 
```

`$blobimage`包含数据库中图像的变量在哪里

# makefile - 生成文件中的变量错误

> ID：14698560
> 
> 赞同：0
> 
> 时间：2013-02-05T01:07:08.013
> 
> 标签：makefile

`I have Makefile in Ubuntu12.10 as below`. 当我通过 make 命令运行它时，它显示为 g++ -c -o myprog1.o myprog1.cpp

似乎变量 CFLAGS 和 CINCLUDE 不起作用。

任何人都可以帮我检查一下吗？

谢谢，

* * *

```
RM  = rm -f
CC  = gcc
AR  = ar rc

CFLAGS= -Wall -g -O2 -std=c++11 -fPIC 
CINCLUDE= -I. -I../include
OBJECTS= myprog1.o myprog2.o  

STATIC_LIB = libctest.a

$(STATIC_LIB): $(OBJECTS)
$(AR) $(STATIC_LIB) $(OBJECTS) 

%.o : %.c
$(CC) -c $(CFLAGS) $(CINCLUDE) $< -o $@

clean:
$(RM) $(OBJECTS)
$(RM) $(STATIC_LIB) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T01:33:57.320

问题是你有一个 make 规则，`%.o : %.c`但没有`%.o : %.cpp`。运行 make 时，'%.cpp' 的[隐式 make 规则](http://www.gnu.org/software/make/manual/html_node/Catalogue-of-Rules.html#Catalogue-of-Rules)运行，但隐式规则不包含对`CFLAGS`or的引用`CINCLUDE`。

由于您的源代码是 c++，您可能希望为 c++ 编译添加另一个规则并`CXX`适当地设置变量。

```
CXXFLAGS = $(CFLAGS)

%.o : %.cpp
    $(CXX) -c $(CXXFLAGS) $(CINCLUDE) $< -o $@ 
```

# javascript - 反向地理编码器返回未定义

> ID：14698570
> 
> 赞同：0
> 
> 时间：2013-02-05T01:09:17.580
> 
> 标签：javascript, html, google-maps-api-3, google-geocoder

所以，我使用的是谷歌的反向地理编码器，所以我最初做的是输入一个地址，例如东京，然后我得到那个 latlng 将 latlng 放回地理编码器中以接收该位置的正确名称，但它只是返回未定义。我的代码是：

```
var geocoder = new google.maps.Geocoder();
var place = document.getElementById("location").value;
var name;
var place_latlng;
geocoder.geocode({'address' : place}, function(results, status){
  if (status == google.maps.GeocoderStatus.OK){
    place_latlng = results[0].geometry.location;
    addMarker(place_latlng);
  }
});
geocoder.geocode({'latLng' : place_latlng},function(results, status){
  if (status == google.maps.GeocoderStatus.OK){
    name = results[0].formatted_address;
  }
}); 
```

name 每次都未定义，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:18:06.990

地理编码器是异步的，您需要在其回调函数中使用地理编码器返回的数据（未测试）：

```
geocoder.geocode({'address' : place}, function(results, status){
  if (status == google.maps.GeocoderStatus.OK){
    place_latlng = results[0].geometry.location;
    addMarker(place_latlng);
    geocoder.geocode({'latLng' : place_latlng},function(results, status){
      if (status == google.maps.GeocoderStatus.OK){
        name = results[0].formatted_address;
        alert("name = "+name);
      } else { alert("reverse geocode of "+place_latlng+ " failed ("+status+")"); }
    });
  } else { alert("geocode of "+place+" failed ("+status+")"); }
}); 
```

[例子](http://www.geocodezip.com/v3_simpleMap_geocodeReverseGeocode.html)

# android - 使用存储在 android sqlite 数据库中的数据作为 weka 的输入

> ID：14698574
> 
> 赞同：1
> 
> 时间：2013-02-05T01:09:49.030
> 
> 标签：android, sqlite, jdbc, weka

我不确定是否有人试过这个。我目前将属性存储在 android 上的 sqlite 数据库中。我接下来要做的是检索这些数据并应用 Weka 实现的机器学习算法。Weka 确实可以使用 JDBC 从数据库中获取数据。但这可以用android完成吗？android 中的 SQLite 数据库似乎不是普通的 SQLite 数据库。

我已阅读此[http://weka.wikispaces.com/How+do+I+connect+to+a+database%3F](http://weka.wikispaces.com/How+do+I+connect+to+a+database%3F)，但它并没有太大帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:25:07.843

看来 WEKA 不会在没有更改的情况下在 Android 上运行。例如，J48 需要 java.lang.Cloneable 接口，这在 Android 中不可用。 [这是这里](https://github.com/rjmarsan/Weka-for-Android)
的 android 项目的 weka 端口。 希望它会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T02:28:59.620

我认为 Weka 没有现成的实现来从 Android 上的 sqlite 读取数据，因为帮助程序类主要依赖于 Android 不可用的 JDBC。

我可以想到两种选择来实现这一目标：

*   在 Android 上查询 sqlite 数据库并以编程方式即时创建 Weka 训练实例。此解决方案可能更适合在线培训以及当您拥有大型数据集时。

*   将 sqlite 中的训练数据导出为 csv 文件，并将文件传递给 Weka 进行训练。

# internet-explorer - 悬停时图像交换，顶部有文本链接

> ID：14698577
> 
> 赞同：0
> 
> 时间：2013-02-05T01:10:03.080
> 
> 标签：internet-explorer, css, hover, css-transitions

我是 html/css 的新手，所以请那些慷慨提供帮助的人记住这一点。

我正在尝试在悬停时进行图像交换，并在图像顶部进行文本链接，该链接在悬停时会改变颜色以适应悬停的图像。我的目标是让图形的整个区域都可以点击和链接。

我设法让它在 Chrome 上运行，但在 Internet Explorer 中惨遭失败。我不希望过渡效果适用于 Internet Explorer。

这是我的代码。我知道这可能非常混乱。 [http://studyusa.com/images/-IEHover-Issue.html](http://studyusa.com/images/-IEHover-Issue.html)

我尝试了从不同角度添加填充的解决方案，给它一个高度和宽度，透明背景.gif，以及一些我不知道它是否在做任何事情的 JS 片段......

我取自的 JS 代码：

http://css-tricks.com/snippets/jquery/make-entire-div-clickable/

和这里

http://alistapart.com/article/dropdowns

```
<!DOCTYPE html> 
<head>
<style type="text/css">

        /* 3 Features Starts Here */

         div#threefeatures-container { 
            margin: 0 auto; 
            width: 600px;
            height: 120px;
            padding: 0px;   
            border: none;
        } 

        div.threefeatures {
            position: relative;
            width: 190px;
            height: 120px;
            float: left;
        }

        div.threefeatures-margin {
            margin: 0 15px;
        }       

        div.threefeatures a.threefeatures-text-link {
            position: absolute; 
            padding-top: 12px;
            color: black; 
            width: 100%;
            height: 108px;
            font: bold 14px "Helvetica";  
            z-index: 100;
            text-align: center;
            text-decoration: none;
            text-transform: uppercase;
            -webkit-transition: all 500ms ease-in-out;
            -moz-transition: all 500ms ease-in-out;
            -o-transition: all 500ms ease-in-out;
            transition: all 500ms ease-in-out;
            display: block;
            background-color: rgba(255, 255, 255, 0);
            background: url(
            http://studyusa.com/common/homepage_test/images/3-Features-Transparent.gif) no-repeat 0px 0px;

        }       

        div.threefeatures a:link span {
            display: block;
            height: 110px;
                }

        div.threefeatures a:hover {
            color: white;
            -webkit-transition: all 500ms ease-in-out;
            -moz-transition: all 500ms ease-in-out;
            -o-transition: all 500ms ease-in-out;
            transition: all 500ms ease-in-out;
        }

        div.threefeatures img { 
            -webkit-transition: all 550ms ease-in-out; 
            -moz-transition: all 550ms ease-in-out; 
            -o-transition: all 550ms ease-in-out; 
            transition: all 550ms ease-in-out; 
        }

        div.threefeatures img.img1 { 
            /* IE 8 */
            -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=1)";
            /* IE 5-7 */
              filter: alpha(opacity=1); 
            /* Netscape */
              -moz-opacity: 1;  
            /* Safari 1.x */
              -khtml-opacity: 1;
            /* Good browsers */
              opacity: 1;     
            zoom: 1;      
            position: absolute;  /*collapses images together*/
            top:0;
            right:0;
            width:190px;
        } 

        div.threefeatures:hover img.img1 { 

            /* IE 8 */
            -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
            /* IE 5-7 */
              filter: alpha(opacity=0);
            /* Netscape */
              -moz-opacity: 0;      
            /* Safari 1.x */
              -khtml-opacity: 0;            
            /* Good browsers */
              opacity: 0;             
              zoom: 1;
        }   

        div.threefeatures a img.img2 {
            /* IE 8 */
            -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
            /* IE 5-7 */
              filter: alpha(opacity=0);
            /* Netscape */
              -moz-opacity: 0;
            /* Safari 1.x */
              -khtml-opacity: 0;    
            /* Good browsers */
              opacity: 0;     
              zoom: 1;
              position: absolute;
              top:0;
              right:0;
              width:190px;
        }

        div.threefeatures:hover a img.img2  {
            /* IE 8 */
            -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=1)";
            /* IE 5-7 */
              filter: alpha(opacity=1);     
            /* Netscape */
              -moz-opacity: 1;      
            /* Safari 1.x */
              -khtml-opacity: 1;    
            /* Good browsers */
              opacity: 1;     
              zoom: 1;
        } 

   </style>
   </head>

      <body>
                <!--Hover Script for IE-->
        <script>    
        startList = function() {
        if (document.all&&document.getElementById) {
        navRoot = document.getElementById("threefeatures-container");
        for (i=0; i<navRoot.childNodes.length; i++) {
        node = navRoot.childNodes[i];
        if (node.nodeName=="DIV") {
        node.onmouseover=function() {
        this.className+=" over";
          }
          node.onmouseout=function() {
          this.className=this.className.replace
                (" over", "");
           }
           }
          }
         }
        }
        window.onload=startList;
        </script>

<!--3 Features Hover Click-->
    <script>
        $(".threefeatures").click(function(){
        window.location=$(this).find("a").attr("href"); 
        return false;
        });
    </script>

    <!--3 Features Starts Here-->

    <div id="threefeatures-container">
        <div class="threefeatures">

            <a class="threefeatures-text-link" href="http://studyusa.com/en/schools/"><span>Search Schools</span></a>

            <img src="http://studyusa.com/common/homepage_test/images/3-Features-Find-Schools-01.png" class="img1" alt="Use Study in the USA's advanced U.S. Schools Search for International Students to find the perfect school for you">

            <img src="http://studyusa.com/common/homepage_test/images/3-Features-Find-Schools-02.png" class="img2" alt="Use Study in the USA's advanced U.S. Schools Search for International Students to find the perfect school for you">

        </div>

        <div class="threefeatures threefeatures-margin">

            <a class="threefeatures-text-link" a href="http://studyusa.com/en/advisors/"><span>Ask Questions</span></a>

            <img src="http://studyusa.com/common/homepage_test/images/3-Features-Ask-Questions-01.png" class="img1" alt="Get your questions about Studying in the USA answered by asking our adivisors for free">

            <img src="http://studyusa.com/common/homepage_test/images/3-Features-Ask-Questions-02.png" class="img2" alt="Get your questions about Studying in the USA answered by asking our adivisors for free"></a>

        </div>

        <div class="threefeatures">

            <a class="threefeatures-text-link" href="http://studyusa.com/en/resources/"><span>Read Articles</span></a>

            <img src="http://studyusa.com/common/homepage_test/images/3-Features-Read-Articles-01.png" class="img1" alt="Read Articles and learn how to Study in the USA">

            <img src="http://studyusa.com/common/homepage_test/images/3-Features-Read-Articles-02.png" class="img2" alt="Read Articles and learn how to Study in the USA">

        </div>
    </div>  

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:53:59.293

好的，你的代码确实很乱，所以我重建了你的页面并想出了这个。我希望您在研究新代码后能有所收获。如果您不确定某事，请随时询问。下面的代码应该至少适用于 IE8+。

```
<!DOCTYPE html> 
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
</head>
<body>

<style type="text/css">

#three-featured a img { border: none; } /* IE fix */

#three-featured li {
     position: relative;
     display: inline-block;
     text-align: center;
     width: 190px;
     height: 120px;
     margin: 0 5px;
     *display: inline; /* IE fix */
    zoom: 1; /* IE fix */
}

#three-featured li a {
    color: #000;
    width: 100%;
    height: 100%;
    position: absolute;
}

#three-featured li a:hover {
    color: #fff;
}

#three-featured li span {
    position: relative;
    display: inline-block;
    margin: 12px 0 0 0;
    font: bold 14px "Helvetica"; 
    text-transform: uppercase;
}

#three-featured li img {
    position: absolute;
    top: 0;
    left: 0;
    display: none;
}

#schools a {
    background: transparent url('http://studyusa.com/common/homepage_test/images/3-Features-Find-Schools-01.png') no-repeat center center;
}

#questions a {
    background: transparent url('http://studyusa.com/common/homepage_test/images/3-Features-Ask-Questions-01.png') no-repeat center center;
}

#articles a {
    background: transparent url('http://studyusa.com/common/homepage_test/images/3-Features-Read-Articles-01.png') no-repeat center center;
}
</style>

<ul id="three-featured">
    <li id="schools">
        <a href="http://studyusa.com/en/schools/">
            <img src="http://studyusa.com/common/homepage_test/images/3-Features-Find-Schools-02.png" alt="Your alt">
            <span>Search Schools</span>
        </a>
    </li>
    <li id="questions">
       <a href="http://studyusa.com/en/advisors/" data-bg="http://studyusa.com/common/homepage_test/images/3-Features-Find-Schools-02.png"> 
           <img src="http://studyusa.com/common/homepage_test/images/3-Features-Ask-Questions-02.png" alt="your at" />
           <span>Ask Questions</span>
       </a>
    </li>
    <li id="articles">
        <a href="http://studyusa.com/en/resources/" data-bg="http://studyusa.com/common/homepage_test/images/3-Features-Find-Schools-02.png">
            <img src="http://studyusa.com/common/homepage_test/images/3-Features-Read-Articles-02.png" alt="Your alt" />
            <span>Read Articles</span>
        </a>
    </li>
</ul>

<script type="text/javascript">

jQuery(document).on({
    mouseenter: function() {
       jQuery("img", this).stop().fadeIn();
    },  
    mouseleave: function() {
       jQuery("img", this).stop().fadeOut();     
    }
},'#three-featured a'); 

</script>
</body>
</html> 
```

这是一个 jsfiddle： http: [//jsfiddle.net/BDtGG/](http://jsfiddle.net/BDtGG/)（当您提出问题时，请尽可能多地使用此站点 - 也创建 jsfiddle 并将链接粘贴到 stackoverflow 上）

# perl - 使用 perl Archive::Zip 创建 *.epub -- epubchecker 错误

> ID：14698579
> 
> 赞同：3
> 
> 时间：2013-02-05T01:10:14.480
> 
> 标签：perl, archive, epub

我正在编写一个 perl 脚本，它将压缩给定父文件夹中的一组文件并创建一个 *.epub 文件。该过程正常，我可以在 adobe 数字版中打开 epub，但我收到 epubchecker 错误：

```
Required MTA-INF/container.xml resource is missing 
```

当我手动压缩文件时（我在 winxp 机器上）没有问题，但是 perl 创建的文件会引发错误。以下是相关代码：

```
#------------------------------------------------------------------------------- 
# name      :   createEpub
# purpose   :   create an epub from a given parent folder
# args      :   [0] parent folder [1] name of new zip file [2] log object
# example   :   &createEpub( $zipLoc, 'newzip', $log);
# notes     :   it is assumed that mimetype, meta-inf and oebs are all child folders
#               of the given parent folder
# author:   :   jw 2/4/13
#-------------------------------------------------------------------------------

sub createEpub(){
my ($parentFolder, $zipName, $log) = @_;
my $newZipLoc;
$parentFolder =~ s#\\#/#g;

    my $newZip = Archive::Zip->new();

    # add mimetype first with no compression
    my $mimetype = "$parentFolder/mimetype";
    my $mimetypeMember = $newZip->addFile( $mimetype, 'mimetype');
    $mimetypeMember->desiredCompressionMethod( COMPRESSION_STORED );

    ## add web-inf
    my $metaINF = $parentFolder . '/META-INF';
    &addFilesToZip( $metaINF, $parentFolder, $newZip, $log);

    ## add OEBPS
    my $oebps = $parentFolder . '/OEBPS';
    &addFilesToZip( $oebps, $parentFolder, $newZip, $log );

    # maybe break this out in its own func...ok for current epub script purposes
    $newZipLoc = $1 if $parentFolder =~ m/(.*)\//;
    $newZipLoc = $newZipLoc . '/' . $zipName;
    if( $newZipLoc !~ m/\.zip/){
        $newZipLoc = $newZipLoc . '.epub';
    }

    $log->info("writing new zip file to $newZipLoc");
    $newZip->writeToFileNamed( $newZipLoc );

    ## not sure if this is the write thing to do...returning actual file name, not zip     extract object
    return $newZipLoc;

}

sub addFilesToZip(){
my ($file, $origParent, $zip, $log) = @_;

    if( -d $file ){
        my @children = grep{ $_ !~ m/mimetype/} glob("$file/*") or warn "can't add     $file to zip! $!\n";
            foreach my $child( @children ){
                &addFilesToZip( $child, $origParent, $zip, $log);
            }
        } elsif (-f $file){
            my $memPath = $file; $memPath =~ s/\Q$origParent\E//;
            $log->info("adding member $memPath");
            my $newMember = $zip->addFile( $file, $memPath );

        }

} 
```

当我在 winzip 中打开生成的 epub 文件时，container.xml 肯定在那里，我还确保 mimetype 是第一个没有压缩的。这是日志的摘录：

```
-------------------------------------------------------------------------
    creating zip file from recently unzipped files
-------------------------------------------------------------------------

[ok]:     adding member /META-INF/container.xml
[ok]:     adding member /META-INF/stylesheet.css.kindle
[ok]:     adding member /META-INF/toc.ncx.kindle
[ok]:     adding member /OEBPS/content.opf
[ok]:     adding member /OEBPS/coverpage.html 
```

在谷歌搜索中，我看到人们在他们的 linux shell 命令中做了一些细微的改动，但我没有看到任何与 archive::zip 或 win 相关的内容。

谢谢，bp

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T11:41:07.380

从您的日志记录看来，您正在使用绝对路径在 zip 文件中创建条目。

```
[ok]:     adding member /META-INF/container.xml 
```

我相信 epub 文件需要是相对路径 - 尝试从要写入 zip 文件的路径中删除前导“/”。类似的东西（未经测试）

```
 } elsif (-f $file){
        my $memPath = $file; $memPath =~ s/\Q$origParent\E//;
        # remove leading "/"
        $memPath =~ s#^/+##;
        $log->info("adding member $memPath");
        my $newMember = $zip->addFile( $file, $memPath );

    } 
```

# javascript - 更改功能内的图像 onclick

> ID：14698583
> 
> 赞同：0
> 
> 时间：2013-02-05T01:11:08.493
> 
> 标签：javascript, image, button, onclick

我有这个功能显示左右移动的图像。有没有办法在 html 页面中创建一个按钮来更改其中一个图像？

比如，如果你点击“讲个笑话”happy.png 变成了laugh.png？

```
//fish moves on mouse hover
$(document).ready(function() {  
    $("#swim").mousemove(function (event) {//defines the swim area 
        var fish = $("#fish1");//defines the fish css styles
        var position = fish.position();
        var mousey = event.pageX;

        if (position.left > mousey) {
            $("#fish1").html("<img src='images/happy.png' />");//when swimming left, show left facing fish
        } else {
            $("#fish1").html("<img src='images/happyback.png'/>");//when swimming right, show right facing fish
        }

        $("#fish1").stop().animate({//animates the two images to show animated swimming
            left: event.pageX,
            top: event.pageY
        }, 300);
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:25:37.377

像这样的东西应该工作

```
<button type="button" onclick="$('#fish1').prop('src','images/laugh.png');">tell a joke</button> 
```

# c# - Windows Phone C# - 获取实时

> ID：14698586
> 
> 赞同：-4
> 
> 时间：2013-02-05T01:11:41.843
> 
> 标签：c#, facebook, windows-phone-7, time, facebook-c#-sdk

有什么方法可以让我的应用程序获得真实世界的时间吗？（我们只能在互联网上检索如此高精度的时间，所以我需要一个这样的方法，它可以从互联网返回真实的时钟）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:21:19.023

`DateTime.UtcNow`返回与时区无关的 UTC 时间。

[http://msdn.microsoft.com/en-us/library/system.datetime.utcnow.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.utcnow.aspx)

使用谷歌的时间；发送 http get 到[https://www.google.com/search?q=utc+now&oq=utc+now&aqs=chrome.0.57j0j60j0j60j62.1138&sourceid=chrome&ie=UTF-8](https://www.google.com/search?q=utc+now&oq=utc+now&aqs=chrome.0.57j0j60j0j60j62.1138&sourceid=chrome&ie=UTF-8)

`<div class="vk_bk vk_ans">1:31 AM</div>`基本上解析出值；`where element.class == "vk_bk vk_ans" get element.innerHTML`

如果您正在与自己的服务器进行交互，只需让它以滴答的形式将时间发送回客户端。顺便说一句，即使您这样做，真正想欺骗您的系统的人也可以做到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T01:19:27.490

如果花在某项任务上的时间很重要，请将所有时间都保留在服务器上。有一个开始时间的方法，它应该返回到期时间。然后用户提交答案，如果超过预期时间，则拒绝它。

# php - regexp - 查找所有匹配的链接

> ID：14698587
> 
> 赞同：0
> 
> 时间：2013-02-05T01:12:00.457
> 
> 标签：php, regex

> **可能重复：**
> [与正则表达式链接的 PHP URL](https://stackoverflow.com/questions/6393787/php-url-to-link-with-regex)

我正在尝试**`preg_replace`**文本块中的所有链接，以便将它们替换为字符串`"<< IMAGE >>"`

我正在尝试匹配此文本块中的所有链接：

```
"Here we can see the chupacabra trying to eat http://somesite.com/img/chupacabra.jpg. 
look at the the snails somesite.com/img/snails.png" 
```

我正在使用这个正则表达式：

**`(https?:\/\/)?.*(jpg|png|jpeg|bmp|gif)`**

但我不能让它只选择确切的链接字符串。
我需要的是这个：

**“在这里我们可以看到卓柏卡布拉试图吃东西** `http://somesite.com/img/chupacabra.jpg`。 **看看蜗牛** `somesite.com/img/snails.png`”

在[regexpal.com上进行测试](http://www.regexpal.com/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T01:14:31.950

有两个问题 - 首先 * ist 贪婪，所以它匹配的方式很多。第二个是， .* 包含空格，这些空格不在 URL 中，因此您无法获得正确的 URL。

最简单的解决方案是使用 \S 匹配除空格以外的所有内容：

```
(https?:\/\/)?\S*(jpg|png|jpeg|bmp|gif) 
```

更好的方法是使用这个使用 ?<= 的lookbehind

```
(?<= |^)(https?://)?[\w-]+(\.[\w-]+)+\.?(:\d+)?(/\S*)\.(jpg|png|jpeg|bmp|gif) 
```

# jquery - 来自id选择器的jQuery数组对象

> ID：14698588
> 
> 赞同：0
> 
> 时间：2013-02-05T01:12:17.743
> 
> 标签：jquery, arrays, jquery-selectors

原始代码：

```
var myContainer = document.getElementsByClassName("containerName");

for (var i=0; i<list.length; i++) {
    actionRequest(myContainer[i]);
}

function actionRequest(container) {
    $.getJSON(url, function(data) {
        var array = [];
        var object = {//create objects};
        array.push(object);
    }
    container.innerHTML = '';

    $.each(array, function(idx, value) {
        container.innerHTML += '....';
    }
} 
```

这工作得很好。但是，一旦我将 id 分配给“containerName”而不是类名：

```
 var myContainer = document.getElementById("containerName"); 
```

console.log 向我抛出一条错误消息：“容器未定义”。

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T01:23:49.657

`getElementsByClassName`返回一个节点列表，但`getElementById`返回一个节点，所以如果你想使用它，你可以删除`for`循环`actionRequest`并直接在结果上调用它`getElementById`。

* * *

丑陋的是，您可以检查第一个元素是否存在以确定是否应该执行循环：

```
if (typeof myContainer[i] === 'undefined') {
    actionRequest(myContainer);
}
else {
    for (var i=0; i<list.length; i++) {
        actionRequest(myContainer[i]);
    }
} 
```

# css - FontAwesome 不能作为字体系列使用？

> ID：14698589
> 
> 赞同：8
> 
> 时间：2013-02-05T01:12:27.260
> 
> 标签：css, font-face, font-awesome

这无疑是我在做一些非常愚蠢的事情，但我看不到。我正在尝试在我的 css 中使用 FontAwesome 作为字体系列，但它似乎不起作用。

用最少的代码，我有：

```
<head>
    <link href="assets/css/font-awesome.css" rel="stylesheet">
    <style>
        body {
            font-family: FontAwesome;
        }
    </style>
</head>
<body>
    Test FontAwesome!
</body> 
```

这清楚地显示为Times New Roman。

FontAwesome 字体本身存储在 assets/font/ 中，font-awesome.css`@font-face`定义了以下内容：

```
@font-face {
  font-family: 'FontAwesome';
  src: url('../font/fontawesome-webfont.eot?v=3.0.1');
  src: url('../font/fontawesome-webfont.eot?#iefix&v=3.0.1') format('embedded-opentype'),
    url('../font/fontawesome-webfont.woff?v=3.0.1') format('woff'),
    url('../font/fontawesome-webfont.ttf?v=3.0.1') format('truetype');
  font-weight: normal;
  font-style: normal;
} 
```

更改为`..`会`assets`给出一个明显的错误，即找不到字体，所以我很确定相对路径很好而且花花公子。如果我将其更改为`font-family: FontAwesome,Arial;`，它将使用 Arial。显然，它找不到 FontAwesome，我也不知道为什么。

为什么我无法将正文字体更改为 FontAwesome 有什么特别的原因？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-26T16:55:51.747

您正在列出相对路径，有时它们会由于拼写错误而导致意外问题。我数不清有多少次因为实际上有一个名为`fonts`而不是`font`.

尝试 Yovav 的回答（[https://stackoverflow.com/a/28556064/3616018](https://stackoverflow.com/a/28556064/3616018)）（如下），看看是否可以解决问题，如果没有，请尝试使用绝对路径或确保链接正确。

如果您正在为本地字体苦苦挣扎，您可以通过 cdn 尝试“远程”字体（有可能已经被其他站点的浏览器缓存了）

```
// Swap http for https if required.

@font-face {
    font-family: "FontAwesome";
    font-weight: normal;
    font-style : normal;
           src : url("http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/fonts/fontawesome-webfont.eot?v=4.3.0");
           src : url("http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/fonts/fontawesome-webfont.eot?#iefix&v=4.3.0") format("embedded-opentype"),
                 url("http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/fonts/fontawesome-webfont.woff2?v=4.3.0") format("woff2"),
                 url("http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/fonts/fontawesome-webfont.woff?v=4.3.0") format("woff"),
                 url("http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/fonts/fontawesome-webfont.ttf?v=4.3.0") format("truetype"),
                 url("http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/fonts/fontawesome-webfont.svg?v=4.3.0#fontawesomeregular") format("svg");
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-20T18:40:43.597

更好的是使用这个：

```
<head>

<!-- fonts awesome -->

<link href='http://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.3/css/font-awesome.min.css' rel='stylesheet' type='text/css'>

</head> 
```

在您的样式表中仅使用例如：

```
#post-title a:before {

    font-family: FontAwesome;
    content: "\f0c4";

} 
```

不多，不多：））））

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-02-17T06:36:35.137

确保 .woff 和 .woff2 都被服务器识别...

在 web.config 的元素中添加这个：

```
<staticContent>
  <remove fileExtension=".woff" />
  <remove fileExtension=".woff2" />
  <mimeMap fileExtension=".woff" mimeType="application/font-woff" />
  <mimeMap fileExtension=".woff2" mimeType="application/font-woff2" />
</staticContent> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-18T04:23:09.013

直到我在样式名称中添加了“之前”这个词之前，我无法让它工作。那为我修好了！

```
.myClass:before {
    font-family: FontAwesome;
    content: "\f024";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-26T17:07:41.020

FontAwesome 字符是仅存储在 Unicode 私人使用区域中的图标，因此如果您的文本不使用这些字符，您将看不到该字体。

试试`&#xF00C;`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T11:47:59.883

需要回答的第一个问题是您使用的是什么网络浏览器。并非所有浏览器都支持自定义字体。有些人这样做，但只有额外的 CSS/HTML。

我建议先在 Chrome 中测试它（它似乎有最好的字体支持）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-15T13:52:07.983

你写错了：`font-family: FontAwesome;`

请这样写。`font-family:'FontAwesome';`

我认为这会对你有所帮助，因为我在一个月前遇到了同样的问题。

# symfony - Symfony2 在 FOSUserBundle 中区分用户类型

> ID：14698594
> 
> 赞同：0
> 
> 时间：2013-02-05T01:13:10.903
> 
> 标签：symfony, symfony-2.1, fosuserbundle

用 FOSUserBundle 区分用户的方法是什么？例如：我有一个名为“standard”的用户，它与实体“Anagrafic”相关，并且访问被重定向到路由“/user/”，因为用户“admin”没有链接到任何实体并且访问路由被重定向到“/ 行政 /”。我可以在同一个实体中保留同一个用户吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:37:33.447

要区分 FOUserBundle 中的用户，您必须使用 ROLES，这里有完整的教程。 [http://symfony.com/doc/2.0/book/security.html](http://symfony.com/doc/2.0/book/security.html) 你不需要添加另一个实体。

# html - 使用 codeigniter 将文本放在图像链接下方

> ID：14698596
> 
> 赞同：1
> 
> 时间：2013-02-05T01:14:08.457
> 
> 标签：html, css, image, codeigniter

好吧，有点愚蠢的问题，但我不能让它为我的生活工作。我正在尝试将文本放置在导航图像下方。

我尝试将文本放在跨度、段落中，甚至尝试过中断标签。

这是我的ul

```
<ul id="mainImg">
  <li><?=anchor('home/artwork', $art); ?></li>
  <li><?=anchor('home/comps', $des); ?></li>
  <li><?=anchor('home/sites', $web); ?></li>
</ul> 
```

我正在使用 codeigniter，因此图像被存储在变量中，然后我将它们传递到上面的链接中，以便它们可以点击。

我在这三幅图像上的唯一样式是不透明度和显示：li 上的内联，以便它们彼此相邻。每次尝试将文本放在它们下方时，它也会将其余图像推送到下一行。如果可能的话，我想避免这种情况。

如果您想看看我想要完成的工作，我确实有一个现场站点。catlyndesigns.net 请记住，我目前正在重新编码该站点的整个后端，因此目前几乎没有任何工作。

谢谢你的帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:24:58.383

改为使用`display: inline-block`。

示例： [http ://codepen.io/jonjaques/pen/JvocB](http://codepen.io/jonjaques/pen/JvocB)

请注意，我在锚标记内使用了 span，因为它更具语义性。你也可以使用`<p>`标签，重要的是包装文本的元素需要有`display: block`

# jquery - 单击时jQuery更改

> ID：14698598
> 
> 赞同：3
> 
> 时间：2013-02-05T01:14:10.353
> 
> 标签：jquery, html

在用户关闭消耗性文本后，我试图让“减号”符号变回加号。

这是代码HTML

```
<p class="textDropTitle"><span class="textDropLogo"></span>Title</p>
    <div class="textDropSub"><p>This is my text Below</div>
    <p class="textDropTitle"><span class="textDropLogo">+</span>Title</p>
    <div class="textDropSub"><p>This is my text Below</div>
    <p class="textDropTitle"><span class="textDropLogo">+</span>Title</p>
    <div class="textDropSub"><p>This is my text Below</div> 
```

jQuery

```
$(".textDropSub").hide();

$('.textDropLogo', this).text('+');

$(".textDropTitle").click(function() {
    $(this).next().toggle('fast');
    $('.textDropLogo', this).text('-');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:15:52.657

*使用条件三元运算符*非常简单 *`(?:)`*

 *```
$(".textDropTitle").click(function() {

    $(this).next().toggle('fast');

    var $el = $('.textDropLogo', this);
    $el.text( $el.text() == '+' ? '-' : '+' );

}); 
```

> [健康）状况] ？[如果是真的] : [如果是假的] ;

`**[READ MORE](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator)**`*

# php - 如何在 mongodb 中获得具有条件的 N 个结果和具有另一个条件的 M 个结果

> ID：14698601
> 
> 赞同：0
> 
> 时间：2013-02-05T01:14:21.607
> 
> 标签：php, mongodb

抱歉，这听起来像是一个愚蠢的问题，但我是 mongoDB 的新手，我找不到解决方案。

我想从集合中获取确定数量（n）的“高级”对象和另一个确定数量（m）的非“高级”元素。这两种元素都存储在同一个集合中，并且它们有一个名为“premium”的布尔字段。它们也是地理定位的（二维索引数组），我想让它们按距离排序，然后按溢价/非溢价（按重要性顺序）。

不知道我是否遗漏了什么，很抱歉打扰。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:24:18.400

您不能同时进行两个查询。您必须运行两个查询并为每个查询使用限制，然后将它们组合到您的应用程序中。

或者，您运行一个没有“premium”和“non-premium”谓词的查询，并在您的应用程序中拆分。您可能不得不高估项目的数量，以便您的结果中有足够的高级和非高级文档。

当您按距离排序时，我发现除非您必须使用完全相同位置的文档，否则您将拥有两个具有相同距离的文档，因此不太可能对“高级”进行二次排序是必要的。

# c# - 如何判断 datagridview 列是图像列还是复选框列？

> ID：14698608
> 
> 赞同：3
> 
> 时间：2013-02-05T01:15:25.710
> 
> 标签：c#, types, datagridview, detection

我正在尝试创建一个自定义函数，将 datagridview 的内容保存到文件中。我这样做而不是序列化，因为我的自定义函数旨在尽可能简单快速地实现以保存和加载 winform 的状态，并且每次我想序列化对象时创建自定义类并不容易和快速尽可能。

为此，我需要以编程方式检测 datagridview 中的哪些列是图像列或复选框列，以便我知道如何在加载时正确处理它们。我在网上看了看，似乎还没有其他人提到过它（据我的谷歌搜索建议），但我绝对确定有某种方法可以判断某个单元格的类型/列/列是。有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:25:53.557

你可以做这样的事情 -

```
 foreach (var col in dataGridView1.Columns)
        {
            if (col is DataGridViewImageColumn)
            {
                // Image Column
            }

            if (col is DataGridViewCheckBoxColumn)
            {
                // CheckBox Column
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T01:26:54.610

```
foreach (DataGridViewRow dr in dataGridView1.Rows) {
  foreach (DataGridViewCell dc in dr.Cells) {
    if (dc.GetType() == typeof(DataGridViewImageCell)) {

    }
  }
} 
```

这应该工作......包括细胞！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-26T17:06:50.063

只需比较类型：

```
 DataGridView dgv = new DataGridView();

        foreach (DataGridViewColumn col in dgv.Columns)
        {
            if (col.GetType() == typeof(DataGridViewCheckBoxColumn))
            {
                // do something
            }
            else if (col.GetType() == typeof(DataGridViewImageColumn))
            {
                // do something else
            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-10T08:29:35.607

这是我正在使用的：

```
Dim colType As Type = DataGridView1.Columns(0).GetType
If colType.Name = "DataGridViewImageColumn" Then
'code for image column type
End If 
```

学分： [链接到 VB 论坛](http://www.vbforums.com/showthread.php?559644-Counting-Particular-Letter-Occurrences-in-a-String)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-02T21:23:43.300

这应该有效。

```
 For each col in datagridview.columns   
   If col.CellType.Name = "DataGridViewImageColumn" Then
   'do something
   End If
 Next 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-13T14:47:18.937

您可能还想研究

```
column.ValueType 
```

# java - 在对象中存储数据成员

> ID：14698609
> 
> 赞同：0
> 
> 时间：2013-02-05T01:15:31.110
> 
> 标签：java

如何放置/访问存储到/来自对象的数据？

我正在尝试制作一个非常简单的游戏，因此我制作了一个对象数组来存储有关玩家的信息，如下所示：

```
 player[] p = new player[4]; 
```

然后将播放器对象放入数组中，如下所示：

```
for(int i = 0; i < 4; i++)
{
p[i] = new player();
} 
```

上面应该创建一个包含 4 个元素的数组，每个元素都有一个播放器对象。

现在……是我迷路的地方。这是将数据成员放入对象的语法吗？

```
player() = {name, turn, rolledNumber} 
```

// 字符串名称，布尔值，introlledNumber

//从 wiki 上得到这个可能不是一个安全的选择，但是在 Oracle 教程网站和其他 java 教程网站上搜索了几个小时后，我空手而归。我已经看到这是用数组完成的，所以也许我认为它在某些方面是相似的。

抱歉，如果这是一个空洞的问题，我刚刚开始将 Java 作为一种爱好来学习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:20:33.433

`Player`您可以添加一个带有参数的参数，而不是使用默认构造函数 for `name`，`turn`& `rolledNumber`，然后您可以使用：

```
for(int i = 0; i < 4; i++) {
  p[i] = new Player(name, turn, rolledNumber);
} 
```

仍然可以通过 setter 和 getter 访问各个类成员变量。这称为[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)。

Java[代码约定](http://www.oracle.com/technetwork/java/codeconv-138413.html)表明类采用首字母大写，因此按照指南在此处`player`编写。`Player`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T01:41:50.217

为了将信息存储到 Player 类中的状态（即在本例中为 name、turn、rolledNumber）变量中，您需要将它们设置在自定义构造函数中，将它们公开（通常是个坏主意），或者提供 getter/setter方法。鉴于您可能想要依次更改数据并稍后更改rolledNumber，但未提及一种可能的解决方案是使用构造函数和getter / setter方法实现一个类，如下所示......

```
public class Player
{
    private String playerName;
    private boolean playerTurn;
    private int rolledNumber;

    public Player(String name, bool turn, int number)
    {
        playerName = name;
        playerTurn = turn;
        rolledNumber = number;
    }

    public String getName() { return playerName; }
    public boolean getPlayerTurn() { return playerTurn; }
    public void setPlayerTurn(boolean turn) { playerTurn = turn; }

    ...

} 
```

然后按照上面 Reimeus 的示例调用构造函数。

# java - （Java 初学者问题）为什么这段代码不起作用？

> ID：14698610
> 
> 赞同：3
> 
> 时间：2013-02-05T01:15:42.423
> 
> 标签：java

（下面的完整代码）我刚刚提交了一个课堂实验室，我们必须制作一个描述某本书的课程。我不知道如何做两件事。1\. 如果有人为 'pages' 或 'suggestedRetailPrice' 输入小于零的值，则该值必须设置为零。在此代码中，即使该值为正，该值也设置为 0。在里面：

* * *

```
if ( pages <= 0 )
    {
        pages = 0;
    } 
```

* * *

如果我将第二个“0”设置为不同的数字，则代码，例如：

* * *

```
if ( pages <= 0 )
    {
        pages = 1;
    } 
```

* * *

那么你为'pages'输入的任何值都会是1。但是如果你输入的值是负数，它不应该是1吗？我不明白我做错了什么。

我想不通的第二件事是在代码的底部，我们必须显示所有信息。我的老师希望我们用“是”或“否”而不是“真”或“假”来显示这本书是否是平装本。我该怎么做呢？我试着像这样写一个 if/else 语句： System.out.println("Paperback : " + if (paperback = true) {Yes} if (paperback = false) {no}; )

没用，想不通。请参阅下面的完整代码。

* * *

```
public class Book {
    // Instance variables
    private String title;
    private String author;
    private int isbn;
    private int pages;
    private boolean paperback;
    private int suggestedRetailPrice;

    /**
     * Default contructor
     */
    public Book() {
        title = "";
        author = "";
        isbn = 0;
        pages = 0;
        paperback = false;
        suggestedRetailPrice = 0;
    }

    /**
     * book information
     */
    public Book(String whatIsTitle, String whoIsAuthor, int isbnCode,
            int numberOfPages, boolean isItPaperback,
            int theSuggestedRetailPrice) {
        title = whatIsTitle;
        author = whoIsAuthor;
        isbn = isbnCode;
        if (pages <= 0) {
            pages = 0;
        } else {
            pages = numberOfPages;
        }
        paperback = isItPaperback;
        if (suggestedRetailPrice <= 0) {
            suggestedRetailPrice = 0;
        } else {
            suggestedRetailPrice = theSuggestedRetailPrice;
        }
    }

    /**
     * @return title
     */
    public String getTitle() {
        return title;
    }

    /**
     * @return author
     */
    public String getAuthor() {
        return author;
    }

    /**
     * @return isbn
     */
    public int getIsbn() {
        return isbn;
    }

    /**
     * @return pages
     */
    public int getPages() {
        return pages;
    }

    /**
     * @return paperback
     */
    public boolean getPaperback() {
        return paperback;
    }

    /**
     * @return suggestedRetailPrice
     */
    public int getSuggestedRetailPrice() {
        return suggestedRetailPrice;
    }

    /**
     * title
     */
    public void setTitle(String whatIsTitle) {
        title = whatIsTitle;
    }

    /**
     * author
     */
    public void setAuthor(String whoIsAuthor) {
        author = whoIsAuthor;
    }

    /**
     * isbn code
     */
    public void setIsbn(int isbnCode) {
        isbn = isbnCode;
    }

    /**
     * number of pages
     */
    public void setPages(int numberOfPages) {
        if (pages <= 0) {
            pages = 0;
        } else {
            pages = numberOfPages;
        }
    }

    /**
     * is it paperback
     */
    public void setPaperback(boolean isItPaperback) {
        paperback = isItPaperback;
    }

    /**
     * suggested retail price
     */
    public void setSuggestedRetailPrice(int theSuggestedRetailPrice) {
        if (suggestedRetailPrice <= 0) {
            suggestedRetailPrice = 0;
        } else {
            suggestedRetailPrice = theSuggestedRetailPrice;
        }
    }

    /**
     * displays information
     */
    public void displayBook() {
        System.out.println("Title : " + title);
        System.out.println("Author : " + author);
        System.out.println("ISBN : " + isbn);
        System.out.println("Pages : " + pages);
        System.out.println("Paperback : " + paperback);
        System.out.println("Suggested price : " + suggestedRetailPrice);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T01:18:03.623

在使用参数 numberOfPages 设置*之前*，您正在检查 pages 值：

```
 title = whatIsTitle;
 author = whoIsAuthor;
 isbn = isbnCode;

 // pages is still at its initialzed value of 0 here.
 if ( pages <= 0 )
 {
     pages = 0;
 }
 else
 {
     pages = numberOfPages; // this will *never* be called
 } 
```

颠倒这个顺序。或者更好的是，检查参数值并使用它来设置您的页面值：

```
if (numberOfPages < 0) {
   pages = 0;
} else {
   pages = numberOfPages
} 
```

对于您的第二个问题，创建一个名为 isPaperback 的字符串，如果平装本为真，则将其设置为输出字符串的“是”字符串，如果不是，则将其设置为“否”，然后在需要时显示该字符串。要么把你的 System.out.println("yes") 放在一个 if 块中，测试平装本的价值。

IE，

```
if (paperback) {
   System.out.println(...);
} else {
   System.out.pringln(...);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T01:35:41.983

我有点不确定你想做什么，但我注意到在 Book 类中，当参数为“numberOfPages”时，你正在使用“pages”。尝试做

```
if(numberOfPages <= 0) pages = 0 
```

此外，如果你能弄清楚如何使用三元运算符，你可以让这一切变得整洁漂亮，但我会把这个留给你。

至于打印语句，将“如果”放在打印之外。

```
if(paperback) System.out.println("Paperback: Yes")
else System.out.println("Paperback: no) 
```

还要看这是三元运算符的另一个好地方。

# asp.net - 带有复选框的名称列表

> ID：14698611
> 
> 赞同：1
> 
> 时间：2013-02-05T01:15:44.710
> 
> 标签：asp.net, .net, listview, checkbox

使用 asp.net 我需要列出名称和 ID，并在每一行都有一个复选框

例如

```
<table>
    <tr>
        <td>ID</td>
        <td>Name</td>
        <td><input type="checkbox" name="id"/></td>
    </tr>
</table> 
```

但它需要是一个列表视图，并且只需使用一个布局模板。

大概是这样的

```
<asp:ListView runat="server" ID="ListView1">
    <LayoutTemplate>
        <table runat="server" id="table1" >
            <tr runat="server" id="itemPlaceholder" ></tr>
        </table>
    </LayoutTemplate>
    <ItemTemplate>
        <tr id="Tr1" runat="server">
            <td id="Td1" runat="server">
                <asp:Label ID="IdLabel" runat="server" 
                    Text='<%#Eval("CFId") %>' />
            </td>
            <td id="Td2" runat="server">
                <asp:Label ID="NameLabel" runat="server" 
                    Text='<%#Eval("CFName") %>' />
            </td>
            <td id="Td3" runat="server">
                <asp:Checkbox ID="Checkbox" runat="server" 
                    name='<%#Eval("CFId") %>' />
            </td>
        </tr>
    </ItemTemplate>
</asp:ListView> 
```

我怎样才能得到它，以便我可以从这样的列表中获取选中复选框的列表？每行都有一个复选框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:19:54.343

如果我正确理解了您的问题，您可能需要使用[System.Web.UI.WebControls.CheckBoxList](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkboxlist.aspx)：

```
var r = from item in list.Items.Cast<ListItem>()
        where i.Selected
        select i.Value; 
```

或扩展方法语法中的相同：

```
var r = list.Items.Cast<ListItem>()
                  .Where(i => i.Selected)
                  .Select(i => i.Value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T05:53:25.150

**ASPX：**

```
<asp:ListView runat="server" ID="ListView1">
    <LayoutTemplate>
        <table runat="server" id="table1">
            <tr runat="server" id="itemPlaceholder">
            </tr>
        </table>
    </LayoutTemplate>
    <ItemTemplate>
        <tr id="Tr1" runat="server">
            <td id="Td1" runat="server">
                <asp:Label ID="IdLabel" runat="server" Text='<%#Eval("CFId") %>' />
            </td>
            <td id="Td2" runat="server">
                <asp:Label ID="NameLabel" runat="server" Text='<%#Eval("CFName") %>' />
            </td>
            <td id="Td3" runat="server">
                <asp:CheckBox ID="Checkbox" runat="server" />
            </td>
        </tr>
    </ItemTemplate>
</asp:ListView>
<asp:Button ID="btnGetChecked" runat="server" Text="Get Checked Items" OnClick="GetChecked" /> 
```

**后面的代码：**

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        var table = new DataTable();
        table.Columns.Add("CFId");
        table.Columns.Add("CFName");

        table.Rows.Add("1", "Item 1");
        table.Rows.Add("2", "Item 2");
        table.Rows.Add("3", "Item 3");

        ListView1.DataSource = table;
        ListView1.DataBind();
    }
}

protected void GetChecked(object sender,EventArgs e)
{
    var items = ListView1.Items.Where(i => ((CheckBox)i.FindControl("Checkbox")).Checked);
    foreach (ListViewItem item in items)
    {
        Label IdLabel = item.FindControl("IdLabel") as Label;
        Label NameLabel = item.FindControl("NameLabel") as Label;

        if (IdLabel != null && NameLabel != null)
        {
            string id = IdLabel.Text;
            string name = NameLabel.Text;
        }
    }
} 
```

# r - 什么时候应该使用 geom_map？

> ID：14698616
> 
> 赞同：3
> 
> 时间：2013-02-05T01:16:34.773
> 
> 标签：r, ggplot2, maps, choropleth

我正在制作一个在 ggplot 中添加点的等值线图。因此，按照[geom_map 帮助文档的最后一个示例](http://docs.ggplot2.org/0.9.2.1/geom_map.html)

我想出了这个：

```
require(ggplot2)
require(maps)

set.seed(47)
county_map <- map_data("county", "washington")
names(county_map)[5:6] <- c("state", "id")
countyData <- data.frame(id = unique(county_map$id), value = rnorm(39)) 
map1 <- ggplot(countyData, aes(map_id = id)) +
    geom_map(aes(fill = value), map = county_map, colour = "black") +
    coord_map() +
    expand_limits(x = county_map$long, y = county_map$lat)

print(map1) 
```

这对等值线图很有用。（除此之外，我对这个`map_data`功能很兴奋。）但后来我尝试加分

```
pointData <- structure(list(xx = c(-119.872483243387, -122.809038239929, 
-122.143143065312
), yy = c(48.1320425447619, 46.7352071436801, 47.9911548514037
)), .Names = c("xx", "yy"), row.names = c(1746L, 7281L, 2692L
), class = "data.frame")

map1 + geom_point(mapping = aes(xx, yy), data = pointData) 
```

我无法让它工作。我尝试了很多变体，设置`group`为`NULL`，命名`aes`参数等。没有运气。所以我发现[这个](https://stackoverflow.com/q/12341281/903061)问题通过将地图数据与 choropleth 数据合并并使用 来完成完全相同的事情而没有问题，`geom_polygon`无论如何这似乎更简单。（首先我花了一点时间来计算 ID 映射，因为我没有意识到我必须删除`region`列名才能成功使用`id`. 而且第一种方法的语法对我来说仍然很奇怪。）

所以，两个问题：

1.  如何使用上面显示的方法从不同的数据框中添加点`geom_map`？
2.  `geom_map`更重要的是，与该`geom_polygon`方法相比，使用有什么优势吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T02:04:45.447

这对我有用：

```
map1 <- ggplot(countyData) +
  geom_map( map = county_map, aes(map_id = id,fill = value), 
            colour = "black") + coord_map() +
  expand_limits(x = county_map$long, y = county_map$lat)
  map1 + geom_point(mapping = aes(xx, yy), data = pointData) 
```

对我来说`geom_map`是一个`geom_polygon`. 它是一个包含所有地理设置（按 id 分组的纬度和经度）的图层。

`geom_map`当我绘制地图并`geom_polygon`绘制任何多边形类型时，我会使用它。

**编辑** 添加地图

![在此处输入图像描述](../Images/9aad5e069a086ba424d939d00ef15ab8.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T02:27:58.973

您的直接问题是`ggplot`无法将您的点数据与地图联系起来。查看您的数据框，您的地图有以下内容：

```
str(countyData)
'data.frame':   39 obs. of  2 variables:
 $ id   : chr  "adams" "asotin" "benton" "chelan" ...
 $ value: num  1.995 0.711 0.185 -0.282 0.109 ... 
```

......这是你的观点：

```
str(pointData)
'data.frame':   3 obs. of  2 variables:
 $ xx: num  -120 -123 -122
 $ yy: num  48.1 46.7 48 
```

您在那里看到任何可以`ggplot`定位您的点的常见变量吗？

不过，问题还是很容易解决的。我通常使用`geom_polygon`而不是`geom_map`，但这在很大程度上是出于习惯。这有效，例如：

```
colnames(pointData) <- c('long','lat') # makes consistent with county_map
pointData$group <- 1 # ggplot needs a group to work with
county_map$value <- sapply(1:nrow(county_map),
                           function(x) round(runif(1, 1, 8), 0)) # for colours

ggplot(county_map, aes(x = long, y = lat, group = group)) +
    geom_polygon(aes(fill = value)) +
    coord_map() +
    geom_point(data = pointData, aes(x = long, y = lat), shape = 21, fill = "red") 
```

这给出了以下内容（注意要点）。 ![截屏](../Images/f19d648ccf482b005c54d27d757dbae4.png)

但是，至于是否应该使用`geom_map`or `geom_polygon`，我并没有真正考虑过这个问题。也许别人有看法。

# perl - Perl如果为00如何删除小数点

> ID：14698617
> 
> 赞同：1
> 
> 时间：2013-02-05T01:17:00.513
> 
> 标签：perl, cpan, template-toolkit

我有一个正在生成的字符串传递给模板工具包并由模板工具包输出，使用：

[https://metacpan.org/module/Template::Plugin::Number::Format](https://metacpan.org/module/Template::Plugin::Number::Format)

`format_price`如果它们为零，我想从价格中降低美分。所以 100.00 变成 100

找不到任何明确的解决方案。

更新：

`format_price`在这个项目的数百个地方使用，如果可能的话，我不想改变它，如果可能的话，用这个功能覆盖方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T22:28:26.233

您可以扩展`Template::Plugin::Number::Format`以创建自己的插件，如下所示：

```
package Template::Plugin::My::Number::Format;
use base qw(Template::Plugin::Number::Format);
use Number::Format;

sub init {
    my ($self, $config) = @_;
    $self->SUPER::init($config);
    my $nfo = Number::Format->new(%$config);
    $self->{ _CONTEXT }->define_filter(format_price => sub {
        my ($context, @args) = @_;
        return sub {
            my $text = shift;
            my $result = $nfo->format_price($text, @args);
            $result =~ s/\.00$//;
            return $result;
        };
    }, 1);
    return $self;
} 
```

然后在您的模板中，您将像这样使用您的插件：

```
[% USE My.Number.Format %]
...
[% some_number | format_price %] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T05:15:19.297

实现此函数的覆盖以按照您的需要运行应该相对简单。

插件代码的作用几乎是微不足道的。从您安装它的任何地方获取它的副本并使其成为您的代码库的一部分，因此您的版本是在编译期间将找到的版本，即

`Myapp/lib/Template/Plugin/Number/Format.pm`

编辑它：

```
-use Number::Format;
+use Number::Format::NoZeroCents; 
```

然后在您的代码中添加一个新模块：

`Myapp/lib/Number/Format/NoZeroCents.pm;`

看起来像这样：

```
package Number::Format::NoZeroCents;

use strict;
use warnings;

use base 'Number::Format';

sub format_price {
    my $self = shift;
    my ($number, $precision, $symbol) = @_;
    if(defined $precision){ #default behaviour
        printf STDERR "%s: default behaviour for %s\n", __PACKAGE__, join(';',@_);
        return $self->SUPER::format_price(@_)
    }
    else {
        $precision = 0 if $number == int($number);
        printf STDERR "%s: override behaviour for %s\n", __PACKAGE__, $number;
        return $self->SUPER::format_price($number, $precision, $symbol)
    }
}

1; 
```

这应该意味着您的 NoZeroCents 方法在您的代码中默认使用，但是`[% number | format_price(2) %]`当您希望出现 $100.00 时，您可以通过调用来覆盖。

* * *

**更新**

Number::Format 在被告知使用精度 => 0 时肯定是正确的，因为这个快速测试证实：

```
#!/usr/bin/env perl

use strict;
use warnings;

use Number::Format qw(format_price);

my $v = 100.00;

printf "Original value as string '%s'; as number '%f'; as fp '%s'; as fp0: '%s'\n",
       $v, $v, format_price($v), format_price($v,0); 
```

产生：

```
Original value as string '100'; as number '100.000000'; as fp 'AUD 100.00'; as fp0: 'AUD 100' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T01:22:21.153

看起来额外的零特别适用于货币模式。

> format_price($precision) 返回一个包含 "$number" 的字符串，其格式类似于 "format_number()"，除了小数部分可能添加尾随零以使其正好是 "$precision" 字符长，货币字符串将为前缀。

如果你仍然想避免它，我想不使用这种模式就足够了

# jpa - Drools JPA 实体对象图更新

> ID：14698620
> 
> 赞同：0
> 
> 时间：2013-02-05T01:17:18.580
> 
> 标签：jpa, entity, drools, object-graph

在定义 Drools 规则时，容纳对象图的最佳方式是什么？

假设我有以下具有多对多关系的实体对象图：

```
User <- Group -> Value 
```

我有以下人为的规则：

```
rule "hasPurpleValue"
    $u : User()
    $g : Group() from $u.groups
    $v : Value(color == 'Purple') from $g.values
then
    //...
end 
```

我可以将用户插入到 ksession 中，如下所示：

```
//build user...
User user = new User();
Group group = new Group();
Value value = new Value("Purple");
group.setValue(value);
user.addGroup(group);

ksession.insert(user); 
```

然后更新它们：

```
ksession.update(ksession.getFactHandle(user), user); 
```

但是，如果我将 Value 对象直接更改为`"Orange"`，则 Value 没有 FactHandle，因为它是以用户为根插入的。是否有更好的方法来定义规则并插入实体，以便我可以独立更改实体，而 Drools 将评估结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:18:22.930

你必须做出自己的选择。正如您在帖子中提到的，您无法更新不是事实的内容。您 insert() 的每个对象都是一个事实，但对于嵌套对象而言并非如此。处理嵌套对象的一种方法是做你刚才所做的：使用**from**模式。正如您所描述的，这种模式的问题是您始终必须 update() 与您正在修改的真实对象相关的 Fact 对象。如果你能忍受它，那就去吧。处理此问题的另一种方法是将每个对象作为事实插入：用户、组和值。这可能会使您的插入代码更脏，但您将获得灵活性、可读性以及在某种程度上提高规则的性能。所以，这里没有神奇的食谱。您必须使用对您的场景更方便的东西。

希望能帮助到你，

# asp.net-mvc - 将选定的剑道网格项目添加到另一个网格

> ID：14698621
> 
> 赞同：0
> 
> 时间：2013-02-05T01:17:32.407
> 
> 标签：asp.net-mvc, kendo-ui

我的页面中有两个剑道网格。其中之一绑定到 ASP.NET MVC 操作。启用多个部分。我想将选定的网格项目添加到我的第二个网格。

```
<div id="grid1"></div> -- This Grid holds Master Data
<div id="grid2"></div> -- This Grid should hold Selected items of Grid One

$("#grid1").kendoGrid({

    sortable: true,
    selectable: "multiple row",
    pageable: true,
    change: onchange  ,
    filterable: true,
    dataSource: {
        transport: {
            read: "/Home/getPeople",
            datatype: "json"
        },
        pageSize:10
    },
    columns: [
        { field: "Id", title: "Id", template: '<input id=\'#=Id#\' class="personId" type=\"checkbox\"/>' },
        { field:"FirstName", title:"First Name",sortable:true },
        { field:"MiddleName", title:"Middle Name", sortable:true },
        { field: "LastName", title: "LastName", sortable: true },
    ]
});

$("#grid2").kendoGrid({

    sortable: true,
    selectable: "multiple row",
    pageable: true,
    filterable: true,
    dataSource: { -- Here i need to bind it with the selected items of Grid1.

    },
    columns: [
        { field: "Id", title: "Id", template: '<input id=\'#=Id#\' class="personId" type=\"checkbox\"/>' },
        { field: "FirstName", title: "First Name", sortable: true },
        { field: "MiddleName", title: "Middle Name", sortable: true },
        { field: "LastName", title: "LastName", sortable: true },
    ]
});

function onchange() {   
    var text = "";
    var grid = this;                

    grid.select().each(function() {
        var dataItem = grid.dataItem($(this));
        text += "First Name is: " + dataItem.FirstName + "\n";

        alert(text);
    });

}   

    ----I am capturing onChange event to Alert it's value but could not firgure out how it can be added to Grid2 and how on Submit i can only POST items that exist in Grid

   </script> 
```

# asp.net-mvc-routing - System.Web.Routing 3.5 和 4.0 之间的冲突

> ID：14698624
> 
> 赞同：1
> 
> 时间：2013-02-05T01:17:50.193
> 
> 标签：asp.net-mvc-routing

我有一个 kentico cms，我正在升级到新版本（visual studio 2010）。当我尝试运行该应用程序时，出现以下错误：

错误 102 类型“System.Web.Routing.RouteCollection”同时存在于“c:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\System.Web.dll”和“c:\ Windows\assembly\GAC_MSIL\System.Web.Routing\3.5.0.0__31bf3856ad364e35\System.Web.Routing.dll'
C:\PROJECTS\Upgrade\CmsSite\App_Code\Global.asax.cs 247 39 C:...\NrccuaCmsSite \

system.web.routing 3.5 中有升级文件，我已经运行了自动更新程序，它也引用了 3.5。

4.0 和 3.5 都不会显示在 bin 文件夹下。我怎样才能摆脱一个并解决上述问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:52:32.033

开始了一个干净的项目，因为我也遇到了这个项目的一些其他问题。

# core-graphics - 旋转影响比例变换锚点

> ID：14698627
> 
> 赞同：0
> 
> 时间：2013-02-05T01:18:06.733
> 
> 标签：core-graphics, transformation

我有一个 CGPath，我正在尝试旋转、缩放和翻译。我还有一个“可调整大小”的 UIView，它充当用户的助手，允许他/她应用转换，所以每当这个视图的框架发生变化时，新的转换就会应用于选定的 CGPath。另外，我将变换锚点设置为左上角。它可以很好地缩放和旋转。但是，如果我设置一个不同于 0 的旋转然后缩放，则锚点不再位于左上角。看起来它在旋转过程中发生了变化，所以假设我们从 0 旋转开始，一直到 360，然后锚点设置回左上角，正如我所期望的那样。

这是我用来创建转换的代码：

```
CGPoint anchorPointInPixels = CGPointMake(self.boundingBox.origin.x, self.boundingBox.origin.y);

CGAffineTransform t = CGAffineTransformIdentity;
t = CGAffineTransformTranslate(t, self.translation.x + anchorPointInPixels.x, self.translation.y + anchorPointInPixels.y);
t = CGAffineTransformRotate(t, self.rotation);
t = CGAffineTransformScale(t, self.scale.x, self.scale.y);
t = CGAffineTransformTranslate(t, -anchorPointInPixels.x, -anchorPointInPixels.y);
self.transform = t; 
```

让我稍微解释一下这段代码： 1\. 路径的点在绝对坐标中 2\. 边界框只计算一次，它被设置为包围路径内所有点的矩形。边界框也在绝对坐标 3 中。平移指定了与边界框原点的偏移量，因此当路径创建后，平移等于 0，并且在用户移动它之前一直保持不变

那么，如何在不影响锚点的情况下让它旋转呢？

谢谢阅读！

马里亚诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:15:17.393

所以我能够通过连接矩阵来解决这个问题。代码如下所示：

```
CGPoint anchorPointForScalingInPixels = CGPointMake(origin.x + size.width * self.anchorPointForScaling.x,
                                                    origin.y + size.height * self.anchorPointForScaling.y);

CGPoint anchorPointForRotationInPixels = CGPointMake(origin.x + size.width * self.anchorPointForRotation.x,
                                                     origin.y + size.height * self.anchorPointForRotation.y);

CGAffineTransform rotation = CGAffineTransformIdentity;
rotation = CGAffineTransformTranslate(rotation, anchorPointForRotationInPixels.x, anchorPointForRotationInPixels.y);
rotation = CGAffineTransformRotate(rotation, self.rotation);
rotation = CGAffineTransformTranslate(rotation, -anchorPointForRotationInPixels.x, -anchorPointForRotationInPixels.y);

CGAffineTransform scale = CGAffineTransformIdentity;
scale = CGAffineTransformTranslate(scale, anchorPointForScalingInPixels.x, anchorPointForScalingInPixels.y);
scale = CGAffineTransformScale(scale, self.scale.x, self.scale.y);
scale = CGAffineTransformTranslate(scale, -anchorPointForScalingInPixels.x, -anchorPointForScalingInPixels.y);

CGAffineTransform translate = CGAffineTransformMakeTranslation(self.translation.x, self.translation.y);

CGAffineTransform t = CGAffineTransformConcat(rotation, CGAffineTransformConcat(scale, translate)); 
```

这样我就可以处理两个锚点，一个用于旋转，另一个用于缩放。

# javascript - 使用 javascript ajax 发布请求时在 Instagram API 中获取重复图像

> ID：14698629
> 
> 赞同：1
> 
> 时间：2013-02-05T01:18:23.250
> 
> 标签：javascript, jquery, api, instagram

我很困惑为什么我会收到重复的图像。

这是我在 jsfiddle 上的代码：

[http://jsfiddle.net/NyLch/3/](http://jsfiddle.net/NyLch/3/)

我在想也许这是一个`async`问题，在搜索之前接收新的分页但是，我能做些什么来改变它？

谢谢你

艾登

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:48:35.713

问题是第二个`$.ajax()`电话是在第一个电话结束之前进行的。

您需要做的是设置这样的功能：

```
var n = 0, pages = 2;
function displayImgs(url) {
    $.ajax({
            type: "GET",
            dataType: "jsonp",
            cache: false,
            url: url,
            success: function(data) 
            {
                 alert(data.pagination.next_url);
                 for(var i=0;i<data.data.length; i++)
                 {
                     $("#gallery").append('<img src="'+data.data[i].images.low_resolution.url+'" height="50" width="50">');
                 }
                n++
                if(n<pages) displayImgs(data.pagination.next_url);
            }
    });
} 
```

where**`n`**仅用于检查您调用该函数的次数，并且**`pages`**是您要“加载/显示”的页数。

然后，您只需使用您拥有的 url 调用一次此函数，如下所示：

```
displayImgs(url); 
```

你应该得到你想要的。

这是一个[**演示**](http://jsfiddle.net/Dim13i/NyLch/8/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T01:37:37.847

一方面

```
url = data.pagination.next_url; 
```

不在您的“成功”范围内。

# c++ - 如何在保持其使用一致的同时划分职责？

> ID：14698630
> 
> 赞同：0
> 
> 时间：2013-02-05T01:18:32.257
> 
> 标签：c++

我有许多类与基类及其继承形成类层次结构。每个类都相当大，承担了几个职责，尽管这些职责不是耦合的。我将不同的职责放在一个类中，因为我可以很容易地一致地使用它们（我不能很清楚地表达出来，请参阅说明代码）。但这似乎不是一个好的设计。如何在保持易于使用的同时拆分大类？感谢您的建议和意见！下面请找到说明代码。

```
// Base class.
class Base
{
public:
    // For responsibility A
    virtual void A1();
    virtual void A2();
    ...

    // For responsibility B
    virtual void B1();
    virtual void B2();
    ...

    // More responsibilites.
    ...
};

// Derived class 1.
class Derived_1 : public Base
{...};

// More derived classes.
...

// A function use it.
void Fun()
{
    Base* p = new Derived_1;
    p->A1(); // Here A1 and B1 are binded in the class Base, thus it make sure
    p->B1(); // their uses are consistent. If they are separated, how to ensure it? 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:42:29.090

通过在一个类中拥有多个职责，您就打破了设计的[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。

一般来说，好的设计遵循[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)原则。

打破你的课程。

1.  为每个职责定义一个接口。
2.  尽量不要使用多重继承，[而是使用组合](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance)。

我添加了一些示例代码来说明这个概念：

```
#include <iostream>

//Interface for A
class ResponsibilityA
{
    public:
    virtual ~ResponsibilityA(){};
        virtual void A1() = 0;
        virtual void A2() = 0;
};

//Interface for B
class ResponsibilityB
{
        public:
    virtual ~ResponsibilityB(){};
        virtual void B1() = 0;
        virtual void B2() = 0;
};

//Concrete classes for each interface
class ResponsibilityAExecutor : public ResponsibilityA
{
        public:
        virtual void A1(){ std::cout<<"A1 executed\n"; };
        virtual void A2(){ std::cout<<"A2 executed\n"; };
};

class ResponsibilityBExecutor : public ResponsibilityB
{
        public:
        virtual void B1(){ std::cout<<"B1 executed\n"; }
        virtual void B2(){ std::cout<<"B2 executed\n"; }
};

// Now we use the interface implementations in a class that needs
// to combine both responsibilities
class PlanExecutor
{
public:
        PlanExecutor( ResponsibilityA& a, ResponsibilityB& b ) : 
        a_(a),
        b_(b)
        {

        }
        void ExecutePlan()
        {
                std::cout<<"Executing first part of the plan:\n";
                a_.A1();
                b_.B1();
                std::cout<<"Executing second part of the plan\n";
                a_.A2();
                b_.B2();
        }
private:
        ResponsibilityA &a_;
        ResponsibilityB &b_;    
};

int main()
{
        ResponsibilityAExecutor a;
        ResponsibilityBExecutor b;
        PlanExecutor p(a,b);
        p.ExecutePlan();
        return 0;
} 
```

最后，我还需要强调命名的重要性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T01:33:57.100

我会说，如果 A 和 B 的职责完全不同，则为它们创建单独的类，并让孩子以这种方式实现他们想要的东西，一些孩子只想要 A 或只想要 B 或两者兼而有之，并且它保持可管理和可维护

```
// Base class.
class Base
{
public:
    // For responsibility A
**Goes to class A**
    virtual void A1();
    virtual void A2();
    ...

**//Goes to class B**
    // For responsibility B
    virtual void B1();
    virtual void B2();
    ...

    // More responsibilites.
    ...
};

// Derived class 1.
class Derived_1 : public Base **//inherits from A**
{...}; 

class Derived_2:Public A,Public B 
```

# python - WxPython StaticText 动态更新

> ID：14698631
> 
> 赞同：0
> 
> 时间：2013-02-05T01:18:32.643
> 
> 标签：python, user-interface, wxpython

```
def update_text(self, info):
        index = {
            "username":self.username,
            "online status":self.online_status,
            "dial status":self.dialing_status,
            "dtmf transfer number":self.DTMF_t_num,
            "dtmf number":self.DTMF_num,
            "program status":self.program_status,
            "credits":self.credits}
        text = index[info[0]]
        data = info[1]
        append = info[2]
        if append:
            current = text.GetLabel()
            text.SetLabel(current + " " +data)
        else:
            text.SetLabel(data) 
```

为什么这不更新它所指的 wx.StaticText ？“索引”中的每个变量都引用静态文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:37:51.177

没有一些可运行的代码很难说。我做了自己的事情并使它起作用：

```
import random
import wx

########################################################################
class MyPanel(wx.Panel):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, parent):
        """Constructor"""
        wx.Panel.__init__(self, parent)

        self.username = wx.StaticText(self, label="username")
        self.online_status = wx.StaticText(self, label="offline")
        self.dialing_status = wx.StaticText(self, label="no dial tone")

        btn = wx.Button(self, label="Update")
        btn.Bind(wx.EVT_BUTTON, self.onUpdate)

        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(self.username, 0, wx.ALL, 5)
        sizer.Add(self.online_status, 0, wx.ALL, 5)
        sizer.Add(self.dialing_status, 0, wx.ALL, 5)
        sizer.Add(btn, 0, wx.ALL, 5)
        self.SetSizer(sizer)

    #----------------------------------------------------------------------
    def update_text(self, info):
        """"""
        index = {
            "username":self.username,
            "online status":self.online_status,
            "dial status":self.dialing_status
            }
        text = index[info[0]]
        data = info[1]
        append = info[2]
        if append:
            current = text.GetLabel()
            text.SetLabel(current + " " + data)
        else:
            text.SetLabel(data)

    #----------------------------------------------------------------------
    def onUpdate(self, event):
        """"""
        info = random.choice(
            [("username", "mork89", 1),
             ("online status", "online", 0),
             ("dial status", "dialing", 1)
             ])
        self.update_text(info)

########################################################################
class MainFrame(wx.Frame):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        wx.Frame.__init__(self, None, title="Dynamic StaticText")
        panel = MyPanel(self)
        self.Show()

if __name__ == "__main__":
    app = wx.App(False)
    frame = MainFrame()
    app.MainLoop() 
```

也许我的代码会帮助你弄清楚你的。

# python - Python 属性被覆盖

> ID：14698634
> 
> 赞同：0
> 
> 时间：2013-02-05T01:18:52.607
> 
> 标签：python, properties, metadata, setter, getter

所以我有以下代码，我正在尝试将某种元数据添加到类的属性中。我的想法是我将有一个 getter/setter，其中 getter 将返回一个 float/int/string 私有变量，但会返回一些额外的数据，例如一个详细的名称。

在我使用 setter 之前，这非常有效，曾经使用过的 setter 似乎忽略了 setter 和 getter。

有谁知道为什么我在做什么不起作用？或者，如果有更好的方法来做我想做的事情？

非常感谢！

```
class Param(float):
    def __new__(self,name,value):
        return float.__new__(self,value)

    def __init__(self,name,value):
        self.__name = name

    name = property(lambda self: self.__name)

class Beer:
    def __init__(self, temp):
        self.__T = temp

    @property
    def temp(self):
        return Param('Beer Temperature', self.__T)

    @temp.setter
    def temp(self,value):
        self.__T = float(value) 

print b.temp.name, b.temp.__class__

print b.temp * 4.5

print b.temp.name, b.temp.__class__

b.temp = 101

print b.temp.name, b.temp.__class__ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T01:26:44.170

在 python 2 中，属性仅适用于[新式类](http://docs.python.org/2/reference/datamodel.html#newstyle)（派生自`object`）：

```
class Beer(object):
    def __init__(self, temp):
        self.__T = temp

    @property
    def temp(self):
        return Param('Beer Temperature', self.__T)

    @temp.setter
    def temp(self,value):
        self.__T = float(value) 
```

# javascript - Qunit 给出了奇怪的结果

> ID：14698637
> 
> 赞同：0
> 
> 时间：2013-02-05T01:19:27.900
> 
> 标签：javascript, unit-testing, qunit

在查看 John Resig 的[示例](http://ejohn.org/apps/learn/)时，我想使用 Qunit 重写他的断言示例。一切都很顺利，直到我到达[#55](http://ejohn.org/apps/learn/#56)。在 Johns 示例中，要通过测试，“c”（第 7 行）必须等于“未定义”，现在根据我的示例中的 Qunit，“c”必须等于**8**。我用console.logs包围了“c”测试，两者都产生未定义。这是[jsbin](http://jsbin.com/esipaf/10)。有人可以解释发生了什么吗？我不明白...

以防 jsbin 无法访问，这是我的代码：

```
var a = 5; 
function runMe(a){
    'use strict';
    test('a', function(){
        strictEqual(a, 6, 'Check the value of a.');
    });

    function innerRun(){
        test('b', function(){
            strictEqual(b, 7, 'Check the value of b.');
        });
        console.log(c);
        test('c', function(){
            //the problem seems to be here
            strictEqual(c, 8, 'Check the value of c.');
        });
        console.log(c);
    }

    var b = 7;
    innerRun();
    var c = 8;
} 
runMe(6); 

for ( var d = 0; d < 3; d++ ) {
    setTimeout(function(){ 
        test('d', function(){
            strictEqual(d, 3, 'Check the value of d.');
        });
    }, 100); 
} 
```

但是，如果我将 console.log 放在“c”测试中，它会注销 8。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T16:07:41.277

所有`var`语句在块的开头一起移动（*提升*）。吊装解释了为什么`c`定义。它实际上具有该值的原因`8`是，您为 QUnit 定义了一个测试函数，该函数稍后执行。

在函数定义和执行之间的小时间范围内发生赋值`var c = 8`，从而解释结果。但是 John Resig 正在使用`assert()`，它会立即执行。

# javascript - 如何通过“值”检索元素的 id？

> ID：14698638
> 
> 赞同：0
> 
> 时间：2013-02-05T01:19:36.570
> 
> 标签：javascript, html, getelementbyid

我目前正在进行 Sharepoint 自定义，并且遇到了一个问题，如果选择了特定的元素 ID，我需要调用一个函数。问题是每次我们安装 Sharepoint 实例时元素 ID 都会发生变化，所以我的目标是通过元素 ID 的“值”来识别元素 ID。为了给我的问题一些背景，这是html（不能更改）：

```
<span class="ms-RadioText" title="Yes"><input id="378Ukj200" name="radio_button" value="ctl00" checked="checked" type="radio"><label for="378Ukj200">Yes</label></span>
<span class="ms-RadioText" title="No"><input id="378Ukj201" name="radio_button" value="ctl01" type="radio"><label for="378Ukj201">No</label></span> 
```

这些是当前基于 getElementID 的语句（一旦我们将实例添加到生产框，这些语句将不起作用）：

```
document.getElementByID('378Ukj200').onclick = new Function('checkForRadioChange("Yes");');
document.getElementByID('378Ukj201').onclick = new Function('checkForRadioChange("No");'); 
```

例如，我什至希望使用 span 标签实现一些效果（当然，由于多种原因，这永远不会起作用）：

```
var rispan = document.getElementsByTagName('span');

for( var i = 0, j= rispan.length; i < j; i+=1 ) {
    var classes = span[i].getAttribute("title");
    if( classes ) {
       if( classes.indexOf("Yes") != -1) {
          onclick = new Function('checkForRadioChange("Yes");');
       }
       else if( classes.indexOf("No") != -1) {
          onclick = new Function('checkForRadioChange("No");');
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:31:05.880

由于输入似乎是跨度的唯一输入子项，因此获得以下内容相当简单：

```
var input = rispan[i].getElementsByTagName('input')[0]
...
input.onclick = new Function ... 
```

[http://jsfiddle.net/ExplosionPIlls/Y74bn/](http://jsfiddle.net/ExplosionPIlls/Y74bn/)

* * *

您应该使用`function () {}`语法来定义匿名函数。 `new Function`对你来说似乎不太好。此外，`onlick`是陈旧而邪恶的！`addEventListener`如果存在，您应该使用。否则，`attachEvent`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T01:32:30.903

我会将我的代码放在具有固定 ID 的 div 中，然后获取孩子。

```
var nodes = document.getElementByID('div_id').children; 
```

有了这个，我将在循环中测试 tagName 并在需要的地方附加 onclick 事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T01:33:06.090

要匹配的结构：

```
<span class="ms-RadioText" title="Yes">
    <input id="378Ukj200" name="radio_button" value="ctl00" checked="checked" type="radio">
    <label for="378Ukj200">Yes</label>
</span> 
```

输入元素的 CSS 选择器：

```
span.ms-RadioText[title="Yes"] > input[name="radio_button"] 
```

使用允许 CSS 选择器的库。赢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T01:35:16.787

不确定您需要什么级别的兼容性，但在现代浏览器中，它可以很简单：

```
var inputs = document.querySelectorAll('input[title^="ctl"]');

[].forEach.call(inputs, function(input) {
  var label = input.nextSibling;

  input.addEventListener('click', function() {
    if (label.textContent == 'Yes') {
      ...
    }
  });
}); 
```

# c - 宏的“不允许不完整类型”错误？

> ID：14698640
> 
> 赞同：0
> 
> 时间：2013-02-05T01:19:49.427
> 
> 标签：c, visual-studio-macros

我定义了一个具有两个参数的宏，如下所示：

```
#define DO_LIST_HEADER(Titem,MAX) typedef struct  {\
       int count;\
       Titem array[MAX];\
} TOrderedList##Titem;\
    \
void initialize_list##Titem(TOrderedList *list);\
int insert_item##Titem(TOrderedList *list, Titem item);\
int retrieve_ith##Titem(const TOrderedList *list, int i, Titem *item);\
int number_of_items##Titem(const TOrderedList *list);\
int list_empty##Titem(const TOrderedList *list); 
```

这是在一个头文件中，当我尝试从另一个`.c`文件中“调用”这个宏时，包括其中的头文件。

```
typedef Ttime Titem;

DO_LIST_HEADER(Ttime,10) 
```

在这里，我收到一条错误消息`incomplete type not allowed`。

为什么我会收到这种类型的错误？

`DO_LIST_HEADER`宏包含包含`Ttime`作为参数的函数原型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:39:12.963

函数声明中的类型名称也需要粘贴`##Titem`术语：

```
#define DO_LIST_HEADER(Titem,MAX) typedef struct  {\
       int count;\
       Titem array[MAX];\
} TOrderedList##Titem;\
    \
void initialize_list##Titem(TOrderedList##Titem *list);\
int insert_item##Titem(TOrderedList##Titem *list, Titem item);\
int retrieve_ith##Titem(const TOrderedList##Titem *list, int i, Titem *item);\
int number_of_items##Titem(const TOrderedList##Titem *list);\
int list_empty##Titem(const TOrderedList##Titem *list); 
```

# html - 使用 em 时奇怪但明显特定的字体大小

> ID：14698643
> 
> 赞同：3
> 
> 时间：2013-02-05T01:19:58.587
> 
> 标签：html, css, ems

我注意到使用 em 字体的网站通常有奇怪但明确的特定数字，例如：在流行的重置 css - normalize.css 中，我发现 h3 设置为 1.17em，h4 设置为 1.33em，h5 设置为 1.67em ， 为什么是这样？是否有计算器或我应该用来计算每个字体大小的东西？

我一直在为标题、p、标题等调整 ems 中的字体大小，但没有计算器或任何东西，我只是将其放大或缩小，直到我认为它看起来不错。换句话说，我的网站有 0.7em、0.9em、1em、1.1em 等字体大小，甚至是 4em（我喜欢大 h1）。

这很糟糕吗？在使用 ems 字体大小时，我是否忽略了一个重要事实？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T01:28:46.693

如您所知，`em`字体大小的单位允许文本元素的大小保持其相对于其他文本元素的比例。

有一种可缩放文本的方法，其中在 HTML 或 BODY 元素上设置“基线”字体大小。我通常将此“基线”字体大小设置为 10 像素，因为它是一个很好的整数，并且使`ems`整个站点更易于计算。假设我的设计中的标题是 15px。我会将该标题设置为 1.5em (1.5 x 10px = 15px)。由于此类计算，您可能会注意到看似奇怪的值。

“分数”值也可能看起来不寻常。例如，“1.33em”本质上是“1 ⅓ em”，而“1.67em”本质上是“1 ⅔ em”。这些实现的字体大小分别比基线大三分之一和三分之二。

如果您是动态设计（没有设计补偿），您可能只需调整直到看起来正确即可。通过更改浏览器的缩放和/或字体大小默认值来查看页面的反应始终是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T01:42:11.107

Showdev 很好地说明了 em 的作用，但可以回答您为什么会这样看待事物的问题。

本文很好地解释了如何在所有浏览器中实现一致的文本大小。这个要点是 IE7 中的 14px 与 Firefox 中的 14px 不同。Ems 给出了更一致的结果。 [http://alistapart.com/article/howtosizetextincss](http://alistapart.com/article/howtosizetextincss)

另外，只是为了给出一个扩展的解释。Ems 是相对于父元素的字体大小的。所以如果我有：

```
body {
  font-size: 14px;
}
p {
  font-size: 1em;  /* 14px */
}
h2 {
  font-size: 1.5em; /* 21px */
}
#myDiv {
  font-size: 16px;
}
#myDiv h1 {
  font-size: 2em; /* 32px */
} 
```

# mysql - Mysql - 带有记录的交叉表'where'

> ID：14698645
> 
> 赞同：0
> 
> 时间：2013-02-05T01:20:14.497
> 
> 标签：mysql, sql, subquery

这是我的以下情况：

表：选择

```
selection_id | group_id | selection_group_id |  
------------------------------------------------
     1            1              1 
```

表：选择器

```
selector_id | selection_id | name | index
------------------------------------------
     1             1         Step1   0 
     2             1         Step2   1 
     3             1         Step3   2 
```

**我的问题：**如何找出选择器的唯一“selection_id”以及构造选择单元的联合信息“Step1,Step2,Step3”？

我试图更准确地描述它：我需要一个例程，它从与相同的“selection_id”连接的 3 个选择器中获取唯一的“selection_id”。我的信息是选择器的“名称”和“索引”。“选择器”的名称可能经常出现，但选择器的连续索引是唯一的。——</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T01:28:10.893

我想你想使用`GROUP_CONCAT`- 不确定你甚至需要`JOIN`你的桌子：

```
SELECT selection_id, GROUP_CONCAT(name)
FROM selectors 
```

这是[SQL 小提琴](http://sqlfiddle.com/#!2/4609f/3)。

并找出唯一的 selection_id：

```
SELECT DISTINCT Selection_ID
FROM (
  SELECT selection_id, GROUP_CONCAT(name) gc
  FROM selectors
  ) t
WHERE gc = 'Step1,Step2,Step3' 
```

[http://sqlfiddle.com/#!2/4609f/13](http://sqlfiddle.com/#!2/4609f/13)

如果我误解了你的问题，请告诉我。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T01:46:45.083

为此，您需要使用`having`子句进行聚合。例如：

```
select selector_id
from selectors s
group by selector_id
having max(case when name = 'Step1' then 1 else 0 end) = 1 and
       max(case when name = 'Step2' then 1 else 0 end) = 1 and
       max(case when name = 'Step3' then 1 else 0 end) = 1 and
       max(case when name in ('Step1', 'Step2', 'Step3') then 0 else 1 end) = 0 
```

我发现这种方法是最通用的。. . `having`根据条件最大值使用具有各种条件的语句。还有其他一些表达方式，例如：

```
select selector_id
from selectors s
group by selector_id
having count(distinct name) = 3 and
       max(case when name in ('Step1', 'Step2', 'Step3') then 0 else 1 end) = 0 
```

看起来更简单，但不是一般的形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T14:07:08.990

我已经建立了我的解决方案：[http ://sqlfiddle.com/#!2/fdbba/20/0](http://sqlfiddle.com/#!2/fdbba/20/0)

```
SELECT selections.selection_id FROM `prstshp_productsort_groups_selections` selections 
WHERE EXISTS (SELECT * FROM  `prstshp_productsort_groups_selectors` s3
                WHERE s3.name = "Muskelaufbau" AND s3.index = 0 AND s3.selection_id = selections.selection_id)
AND
EXISTS (SELECT * FROM  `prstshp_productsort_groups_selectors` s4
                WHERE s4.name = "Mesomorph" AND s4.index = 1 AND s4.selection_id = selections.selection_id)
AND
EXISTS (SELECT * FROM  `prstshp_productsort_groups_selectors` s5
                WHERE s5.name = "Männlich" AND s5.index = 2 AND s5.selection_id = selections.selection_id)
AND
EXISTS (SELECT * FROM  `prstshp_productsort_groups_selectors` s6
                WHERE s6.name = "25-40" AND s6.index = 3 AND s6.selection_id = selections.selection_id) 
```

# delphi - 使用旧版本的 delphi 项目

> ID：14698655
> 
> 赞同：2
> 
> 时间：2013-02-05T01:22:02.823
> 
> 标签：delphi

我正在尝试使用 delphi 7 和 2010 打开一个旧项目，但出现错误，提示找不到类 TSCButton。忽略错误并继续？注意：忽略错误可能会导致组件被删除或属性值丢失。当我单击取消时，会发生另一个错误，即创建表单时出错：找不到类 TSCButton。这个问题是否与安装相关软件包或导入 Activex 以使其正常工作有关。关于如何处理这个错误的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T01:24:49.087

问题是您的表单使用了一个名为 的控件`TSCButton`，而您没有在当前的 Delphi 副本中安装它。

实际上只有两种选择：

1.  将包含的任何组件包安装`TSCButton`到您当前的项目中。

2.  `TSCButton`忽略错误，让表单设计者将其删除，然后用不同的按钮替换它（并修复任何引用 的代码）。（这有多困难取决于`TSCButton`标准的额外功能`TButton`。）

~~一个快速的谷歌搜索并没有找到任何明显的点击`TSCButton Delphi`，所以我真的不能告诉你在哪里尝试找到它。也许其他熟悉它的人会出现并可以为您指明正确的方向。~~

它似乎`TScButton`是[`SkinEngine`](http://www.delphipages.com/forum/showthread.php?t=56362)组件库的一部分，它允许您为 Delphi 表单和控件提供一些视觉样式。不过，我不知道它是否仍然可用。该文章的链接`ksdev.com`仅显示了一个空白页面，顶部带有 KSDev 的标题。

# c - C中的动态内存分配二维数组

> ID：14698656
> 
> 赞同：2
> 
> 时间：2013-02-05T01:22:16.690
> 
> 标签：c, arrays, pointers, dynamic

```
int **twoDary = (int**) (malloc(rows * sizeof(int *)));
int **twoDaryStart = twoDary;
int *currentrow;

for ( i = 0; i < rows; i++ ){  // Originally: for (i = 0; i < columns; i++)
    *(twoDary + i) =  (malloc(columns * sizeof(int)));
}

for (j = 0; j < rows; j++) {
    currentrow = *(twoDary + j);
    for ( i = 0; i < columns; i++ ) {
        *(currentrow + i) = i;
        printf("%d\n", *(currentrow+i));
    }
} 
```

我正在尝试创建一个动态二维数组。然后我试图将 i ，当前 i （在内部 for 循环中）分配给每一行中的每个元素。所以我的输出应该是数字 0 - 列打印的行时间。

如果我的行和列不一样，即 5 行 10 列，我会不断收到段错误。谁能从这段代码中看出为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T01:24:26.700

您的第一个循环应该是：

```
for (i = 0; i < rows; i++)
{
    ...
} 
```

* * *

显然代码是一致的（但错误）——同样的问题存在于`free()`代码中。这是我的[SSCCE](http://www.sscce.org/)问题。它被赋予了一份干净的健康证明[`valgrind`](http://valgrind.org/)。

```
#include <stdlib.h>
#include <stdio.h>

extern int **alloc_array(int rows, int columns);

int **alloc_array(int rows, int columns)
{
    int i;
    int j;
    int **twoDary = (int**) (malloc(rows * sizeof(int *)));
    int **twoDaryStart = twoDary;
    int *currentrow;

    for ( i = 0; i < rows; i++ ){
        *(twoDary + i) =  (malloc(columns * sizeof(int)));
    }

    for (j = 0; j < rows; j++) {
        currentrow = *(twoDary + j);
        for ( i = 0; i < columns; i++ ) {
            *(currentrow + i) = i;
            printf("%d\n", *(currentrow+i));
        }
    }  
    return twoDary;
}

int main(void)
{
    int **d2 = alloc_array(5, 10);

    for (int i = 0; i < 5; i++)
        free(d2[i]);
    free(d2);
    return(0);
} 
```

# grails - 在 Grails 中捕获 CertificateExpired 异常

> ID：14698659
> 
> 赞同：3
> 
> 时间：2013-02-05T01:22:28.703
> 
> 标签：grails, groovy

我无法在 Grails 中捕获 CertificateExpiredException。当我在代码中添加异常时，我得到一个“Catch 语句参数类型不是 Throwable 的子类”。信息。如果我把一个通用的“异常”作为一个 catch 参数，它就可以工作。如何捕获此 SSL 错误并为用户提供有意义的响应？

这是一个示例服务：

```
class MyService {

    static transactional = false

    String someUrl = 'https://example.com'

    def getThings() {

        def conn
        try {
            conn = someUrl.toURL().openConnection()
        } catch (CertificateExpiredException e) { // doesn't like this
            log.debug e // doesn't work?
            return "SSL error, no results returned."
        }

        if(conn.responseCode == 200){
            // do stuff
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T04:46:51.707

您需要添加一个导入：

```
import java.security.cert.CertificateExpiredException

class MyService {
   ...
} 
```

# python - 在python中的类中的其他方法上使用装饰器函数，该函数是类中的方法

> ID：14698662
> 
> 赞同：0
> 
> 时间：2013-02-05T01:22:33.497
> 
> 标签：python, class, function, methods, decorator

我一直在尝试使用以下调整后的版本了解有关装饰器的更多信息：[here](http://code.activestate.com/recipes/440499/)

```
def case(comparision):
    def __assign_case(f):
        f.__case = comparision
        return f
    return __assign_case

class switch:
    def __init__(self):
        self.__case_map = {}

        def set_case(key,f):
            self.__case_map[key] = f

        a = [getattr(self,e) for e in dir(self) if getattr(self,e) is not None and hasattr(getattr(self,e),'__case')]
        for f in a:
            cases = getattr(f,'__case')
            if isinstance(cases,tuple) or isinstance(cases,list):
                for c in cases: set_case(c,f)
            else:
                set_case(cases,f)
        print(self.__case_map)

    def match(self,value):
        try:
            self.__case_map[value]
        except KeyError:
            return self.__case_map['_default']
        return self.__case_map[value]

class b(switch):
    @case((1,3))
    def event_one(self):
        print('Event handler for 1,3 in b')

    @case(2)
    def event_two(self):
        print('Event handler for 2 in b')

    @case('_default')
    def default(self):
        print('No match was found, using default case')

a = b()
a.match(1)()
a.match(2)()
a.match(5)() 
```

运行结果为：

```
$ ./switch_decor.py 
{1: <bound method b.event_one of <__main__.b object at 0x7f03374849d0>>, '_default': <bound method b.default of <__main__.b object at 0x7f03374849d0>>, 3: <bound method b.event_one of <__main__.b object at 0x7f03374849d0>>, 2: <bound method b.event_two of <__main__.b object at 0x7f03374849d0>>}
Event handler for 1,3 in b
Event handler for 2 in b
No match was found, using default case 
```

注意填充的字典

我喜欢保留我的代码，因此试图将`case`函数移动到`switch`类中，如下所示：

```
class switch:
    def __init__(self):
        self.__case_map = {}

        def set_case(key,f):
            self.__case_map[key] = f

        a = [getattr(self,e) for e in dir(self) if getattr(self,e) is not None and hasattr(getattr(self,e),'__case')]
        for f in a:
            cases = getattr(f,'__case')
            if isinstance(cases,tuple) or isinstance(cases,list):
                for c in cases: set_case(c,f)
            else:
                set_case(cases,f)
        print(self.__case_map)

    def match(self,value):
        try:
            self.__case_map[value]
        except KeyError:
            return self.__case_map['_default']
        return self.__case_map[value]

    @staticmethod
    def case(comparision):
        def __assign_case(f):
            f.__case = comparision
            return f
        return __assign_case

class b(switch):
    @switch.case((1,3))
    def event_one(self):
        print('Event handler for 1,3 in b')

    @switch.case(2)
    def event_two(self):
        print('Event handler for 2 in b')

    @switch.case('_default')
    def default(self):
        print('No match was found, using default case')

a = b()
a.match(1)()
a.match(2)()
a.match(5)() 
```

但我最终得到一个空`self.__case_map`字典，导致此错误：

```
$ ./switch_decor_contained.py
{}
Traceback (most recent call last):
  File "./switch_decor_contained.py", line 23, in match
    self.__case_map[value]
KeyError: 1

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "./switch_decor_contained.py", line 50, in <module>
    a.match(1)()
  File "./switch_decor_contained.py", line 25, in match
    return self.__case_map['_default']
KeyError: '_default' 
```

注意开头的空白字典。它失败了

```
a.match(1) 
```

在调用返回函数之前，第二`()`个函数是字典空白触发异常的函数，但没有`_default`返回函数值的键。

在上面的第一组代码中，在控制台中运行它会给出：

```
>>> hasattr(a.event_one, "__case")
True 
```

但是在上面的第二组代码中，运行

```
>>> hasattr(a.event_one, "__case")
False 
```

尽管事实证明`@switch.case`正在运行测试。在类中调用它会产生一些不利的副作用。有什么副作用？

如何将`case`函数移动到`switch`类中并成功地将其用作装饰类中的函数的方法`b`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:07:22.880

首先，如果您尝试调用`self.case`，则该方法必须有一个`self`参数`case`。无论您是`case`用作装饰器还是普通功能都没有关系；它仍然以相同的方式调用。

但更重要的是，在定义`b`类时*，*没有`self`. 如果你仔细想想，*不可能*有一个，因为它`self`引用了 的每个实例`b`，而且还没有任何实例——甚至还没有一个类。从另一个角度看，你得到 a 的唯一方法`self`是把一个作为参数；在`self`您定义`b`. （许多 Python 新手认为 有很多魔力，但除了查找然后称为`self`的事实之外，没有其他任何东西。）`foo.bar(baz)``foo``bar(foo, baz)`

如果您只是想将一个函数移动到一个类中以进行封装，而不是使其成为实例方法，那么这样做的方法是[`staticmethod`](http://docs.python.org/3/library/functions.html#staticmethod)：

```
class switch:
    # ...
    @staticmethod
    def case(comparision):
        def __assign_case(f):
            f.__case = comparision
            return f
        return __assign_case 
```

实际上，您想要的并不常见`staticmethod`；通常您想要`classmethod`，因为您想要访问`class`对象（因此您可以调用其他`classmethod`s、访问类属性和/或创建 的实例`class`）。但是在这种情况下，你甚至还没有一个`b`类，即使你有，你也没有任何有用的东西，这`staticmethod`正是你想要的。*（PS，你不想*在这里访问这是一件好事`b`，因为否则，你需要了解元类......我会等到你先掌握装饰器的窍门。）

最后，当我们将装饰器扔进你的装饰器定义时（这是很常见的事情），你几乎总是想[`functools.wraps`](http://docs.python.org/3/library/functools.html#functools.wraps)在任何装饰器中使用：

```
class switch:
    # ...
    @staticmethod
    def case(comparision):
        @functools.wraps(comparision)
        def __assign_case(f):
            f.__case = comparision
            return f
        return __assign_case 
```

无论如何，所有这些都已经解决了，如果你没有，你怎么*打电话* ？好吧，静态方法可以在它所在的类、任何子类或两者的任何实例上调用，但通常在类上调用它：`case``self`

```
class b(switch):
    @switch.case((1,3))
    def event_one(self):
        print('Event handler for 1,3 in b') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:03:12.230

我找到了问题的答案。它与类私有变量中属性的重命名有关。这可以在此处的私有变量下的python [3](http://docs.python.org/3.0/tutorial/classes.html#private-variables)和此处的9.6 私有变量和类本地引用部分的[python 2中看到。](http://docs.python.org/2/tutorial/classes.html#private-variables-and-class-local-references)

在将函数作为方法的代码中（上面的第二个清单），`f.__case`被重命名为`f._switch__case`. 如果除函数之外的每个实例都`__case`被替换为，则代码可以正常工作。我不是 100% 确定为什么 Python 是这样设计的，但我猜它与保留命名空间有关，但我不确定为什么它有自己的命名空间是必要的。`_switch__case``@staticmethod``class`

以下是更正后的代码：

```
class switch:
    def __init__(self):
        self.__case_map = {}

        def set_case(key,f):
            self.__case_map[key] = f

        a = [getattr(self,e) for e in dir(self) if getattr(self,e) is not None and hasattr(getattr(self,e),'_switch__case')]
        for f in a:
            cases = getattr(f,'_switch__case')
            if isinstance(cases,tuple) or isinstance(cases,list):
                for c in cases: set_case(c,f)
            else:
                set_case(cases,f)

    def match(self,value):
        try:
            self.__case_map[value]
        except KeyError:
            return self.__case_map['_default']
        return self.__case_map[value]

    @staticmethod
    def case(comparision):
        def __assign_case(f):
            f.__case = comparision
            return f
        return __assign_case

class b(switch):
    @switch.case((1,3))
    def event_one(self):
        print('Event handler for 1,3 in b')

    @switch.case(2)
    def event_two(self):
        print('Event handler for 2 in b')

    @switch.case('_default')
    def default(self):
        print('No match was found, using default case')

a = b()
a.match(1)()
a.match(2)()
a.match(5)() 
```

# php - 除 ID 外，没有任何内容发送到数据库

> ID：14698668
> 
> 赞同：0
> 
> 时间：2013-02-05T01:23:25.960
> 
> 标签：php, phpmyadmin

出于某种原因，除了 ID 之外，没有任何东西被发送到我的数据库

**HTML**

```
 <form action="sendmessage.php" method="post">

 <input name="youremail" type="text" class="your-field" id="youremail" value="Your Email Address" size="35"  />

 <input name="name" type="text" class="their-field" id="name" value="Receivers Name" size="35" onclick="if(this.value == 'Receivers Name') { this.value = ''; }" />

 <input name="receiveremail" type="text" class="their-field" id="receiveremail" value="Receivers Email Address" size="35" onclick="if(this.value == 'Receivers Email Address') { this.value = ''; }" />

 <textarea name="message" cols="35" rows="5" class="valentine-message" id="textarea" onclick="if(this.value == 'Your Message') { this.value = ''; }" />Your Message</textarea>

 <input class="button" name="" type="image" src="images/button.jpg" onClick="submit')">

 </form> 
```

**PHP**

```
 // creates a random number for the id, ans check to see if the random number currently exists in database
 $success = FALSE; 

 while($success == FALSE) { 
$rand = rand(100000, 999999); 

$q = "SELECT * FROM $tablename WHERE rand = '$rand'"; 
$r = mysql_query($q, $link);

echo mysql_error();

if(mysql_num_rows($r)) { //id exists 
    continue; 
     } else { 
         $success = TRUE; 
     } 
 } 

 // insert your data here with $rand as the id
 $query = "INSERT into $tablename values ('$rand', '$youremail', '$name', '$receiveremail', '$message')";
 $result = mysql_query($query, $link);

 if (!$result) {
echo "Query Failed: " . mysql_error() . "<br />\n";
exit;
 } 
```

这是数据库结构[http://i50.tinypic.com/14jq3he.png](http://i50.tinypic.com/14jq3he.png)你能看到任何问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T01:30:37.427

首先，此代码不能在 PHP 版本 >= 5.4 中工作，因为`register_globals`它已关闭。在几乎所有其他系统上， register_globals 都已关闭，因为这是一个很大的安全问题。

最好使用 $_POST['fieldname']。

第二 - 您的代码容易受到 sql 注入的攻击

最后，不应该再使用 mysql_* 函数，因为它们已经过时并且被 pdo 或 mysqli_* 取代，它们可以处理 sql 注入。

如果您修复了这三件事（或至少前两件事），您的代码应该可以工作或显示有用的错误消息。

最后一件事-如果启用警告，您会看到出了什么问题

# xcode - 更新到 Xcode 4.6 并出现奇怪的 XiB 问题

> ID：14698669
> 
> 赞同：3
> 
> 时间：2013-02-05T01:23:39.313
> 
> 标签：xcode, xcode4.6

今天更新到 Xcode 4.6 并打开了我的一个项目，并为这个可爱的错误感到高兴。

*Interface Builder XiB 编译器错误。Interface Builder 无法打开文档“ViewController_iPhone.xib”，因为它不存在。*

导航到 MyProject/en.lproj 我仍然看到 ViewController_iPhone.xib 文件。我最后一次使用这个项目是上周四晚上在 xcode 4.5 下，我构建并分发了这个项目，100% 知道这个项目当时还可以。从那以后，我返回并访问了该项目的 3 个不同备份，所有 3 个都给了我同样的问题。

现在，这就是它变得更加奇怪的地方。如果我用 xcode 自己打开 ViewController_iPhone.xib 文件，弹出的视图界面构建器大约是我的 .xib 的 4 个月大版本，但是我去打开了一个大约 8 个月大的备份，从项目是 WIP 和它加载最新的 XiB。

我已经从 Xcode 中删除了 ViewController_iPhone.xib 引用并手动将其重新添加，但是应用程序在运行时终止，出现“无法在包中加载 NIB”错误，并且如果我关闭并重新打开项目 Xcode 再次丢失了我的 .xib。

再补充一点，在点击发布你的问题按钮之前，我想我会再试一次，复制并粘贴一个新的备份副本到我的桌面上，然后打开它，它就是它应该是的样子！但后来我决定关闭并重新打开同一个项目，它给了我同样的文件不存在错误！

更多信息：Mac OSX 10.8.2 Xcode：4.6 (4H127)

对于这里可能发生的事情以及如何解决它，我真的很迷茫。我尝试寻找有类似问题的人，但找不到其他有此问题的人。

谢谢

# html - Youtube 嵌入式 iframe api 取消所有其他事件

> ID：14698670
> 
> 赞同：1
> 
> 时间：2013-02-05T01:23:49.027
> 
> 标签：html, youtube, youtube-api, youtube-javascript-api

我在使用 youtube 嵌入式播放器时遇到问题，它破坏了我页面上的其他事件侦听器。我特别使用 Iframe API，因为我需要一个 html5 播放器，通常我想要的功能是将它嵌入到可拖动的对话框。

```
/*DRAGGING*****************************************/                
                    //get offset and set dragging
                    header.onmousedown = preDrag; 
                    document.onmouseup = function(e){
                        dragging = false; 
                    }; 
                    //drag
                    document.onmousemove = drag; 
                    ytplayer.onmousemove =  drag; 
                    function preDrag(){
                        offsetX = container.style.left - mouseX; 
                        offsetY = container.style.top - mouseY; 
                        //alert('left: ' + container.style.left +', top: ' + container.style.top); 
                        //alert('offsetX: ' + offsetX + ', offsetY: ' + offsetY); 
                        dragging = true; 
                    }
                    function drag(){
                        if (dragging == true){
                            container.style.top = (mouseY + offsetY)+"px";
                            container.style.left = (mouseX + offsetX)+"px"; 
                        }
                    }
        }); 

    </script>
</head>
<body>
    <p id="text"></p>
    <div id="vidContainer">
        <div id="vidHeader"></div>
        <div id="vidPlayer"><div id='yt'></div></div>
        <div id="vidPlaylist">
            <ul id="videos">
            </ul>
        </div> 
    </div>
    <!-- <a id="add" href="#" class="btn">Add to the playlist!</a> --> 
    <script> 
        /*YOUTUBE PLAYER API*************/ 
        var player; 
        function onYouTubeIframeAPIReady(){ 
            player = new YT.Player('yt', { 
                height: '390', 
                width : '640', 
                videoId: 'i3Jv9fNPjgk',
                playerVars: {
                    "html5" : 1, 
                    "enablejsapi" : 1,
                },  
                events: { 
                    'onReady' : onPlayerReady, 
                    'onStateChange' : onPlayerStateChange, 
                } 
            }); 
        } 

        function onPlayerReady(event){
            event.target.playVideo(); 
        }           

        function onPlayerStateChange(event){

        }

        function stopVideo(){
            player.stopVideo(); 
        }
        function someFunc(){
            alert('oh hey the first time!!!'); 
        }
        /*******************************/
    </script>
</body> 
```

此代码将允许用户单击标题（视频上方）并将其拖动，从而移动整个容器。问题是，如果用户快速移动鼠标，则鼠标可能会移动到 youtube 视频占用的区域，从而停止拖动功能。这意味着它`document.onmousemove`没有被激活，因此我认为 youtube 播放器正在取消文档事件。

我已经尝试了两种解决方案：

1.  为 youtube 播放器创建一个包装 div 并将事件侦听器附加到它：这就是`ytplayer.onmousemove = drag`它，它完全失败了。

2.  将事件侦听器附加到 youtube 视频播放器对象

    `events: { "onmouseover": "someFunc" }`

    但这也失败了。

我有点没有想法，我不知道该怎么做。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:54:56.967

不幸的是，由于浏览器的安全性，iframe 不会将事件传播到应用程序，因此这可以按预期工作。您是否尝试过检测用户何时进入/退出 iframe 以调整应用的行为？

# php - PHP SQL 数组循环

> ID：14698673
> 
> 赞同：4
> 
> 时间：2013-02-05T01:24:07.753
> 
> 标签：php, mysql, sql, arrays, while-loop

我最近一直在使用相当多的 PHP，虽然我通常觉得它很有趣而且相当轻松，但我担心我可能会偶然发现很多人似乎讨厌它的怪癖之一。

考虑一下：

```
while($row = mysql_fetch_array($result))
{
    //Do something with $row...
} 
```

...其中 $result 是一个 mysql_query ，例如：

> 从人中选择姓名、年龄

每次循环执行时，$row 都会引用返回结果中的不同行。

我从来不知道 while(... 语句在它检查的条件为真时执行除执行之外的任何操作的语言，而且我可以看到上面的内容如何做同样的事情......但我看不出一个while 循环导致它*遍历*获取的数组的索引。

这仅仅是 PHP 的一个奇怪的怪癖，还是 mysql_fetch_array 返回的对象每次被引用时都会增加/拼接自己？

我了解它是如何工作的，所以我可以在我的代码中使用它，但我不明白*为什么*而且我不喜欢死记硬背 - 如果有人能解释一下，我将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T01:31:40.587

> mysql_fetch_array 每次被引用时都会增加/拼接自身返回的对象

你是对的。出于某种原因，在此特定功能的手册参考中没有这样说，但让我们看一下非常相似的参考`mysql_fetch_row` [http://www.php.net/manual/en/function.mysql-fetch-行.php](http://www.php.net/manual/en/function.mysql-fetch-row.php)

引用参考：

> 返回对应于获取的行的数值数组，并将内部数据指针向前移动。

内部数据指针向前移动后，再次调用该函数将获取下一行。这种行为与自身无关`while`。您还可以在连续的行中多次调用该函数。

这种行为其实很常见。考虑从 API 类似于`fread`. 每次阅读时，您都会收到下一个数据块。这也是使用内部数据指针实现的，也称为游标。

# scheme - 符号作为属性？

> ID：14698677
> 
> 赞同：1
> 
> 时间：2013-02-05T01:24:33.740
> 
> 标签：scheme, racket

结构定义

所以我被要求创建一个书籍（这是一本电子书）属性，其中包含标题、作者、大小和`symbol`将电子书指定为`'Kindle, 'Nook, 'Nexus?` “你将如何放入符号”以及它们的确切含义是什么？

```
(define-struct book (ebook ))

(define-struct ebook (make-book title author size ??? )) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:32:23.933

这只是意味着您必须使用 a[`symbol`](http://docs.racket-lang.org/reference/symbols.html)作为电子书品牌的数据类型。例如：

```
(define-struct ebook (title author size brand))

(define my-book (make-ebook "Cryptonomicon" "Neal Stephenson" 2192 'Kindle)) 
```

在上面的代码中，`'Kindle`是一个表示电子书阅读器品牌的符号：

```
(ebook-brand my-book)
=> 'Kindle

(symbol? (ebook-brand my-book))
=> #t 
```

# vbscript - 当我尝试使用 Do Loop 时退出

> ID：14698680
> 
> 赞同：1
> 
> 时间：2013-02-05T01:24:58.413
> 
> 标签：vbscript

我一直在尝试使用 Do Loop，但是由于某种原因，当代码遇到 do loop 命令时，它就退出了。它甚至没有给我任何错误。在此语句之后有大量的脚本，但它没有得到处理和执行。有没有我可以使用的替代方法，还是我做错了？

```
Do while b = vbRetry
msgbox "Remote Keyboard Control accepted from ip 346.195.639.63"
msgbox "Attempting to Block Connection..."
b = msgbox("Could not block connection.", vbCritical+vbAbortRetryIgnore+vbSystemModal)
Loop 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T01:31:17.610

问题是由于您没有`b`正确初始化。该`while`语句所做的第一件事是评估循环条件。在您的情况下，会发生以下情况：
-`b`未定义。
- 是否`b`等于`vbRetry`？不，让我们停止循环（甚至在开始之前）。

由于您至少需要循环一次，因此您应该按如下方式重写您的脚本：

```
Do 
  msgbox "Remote Keyboard Control accepted from ip 346.195.639.63"
  msgbox "Attempting to Block Connection..."
  b = msgbox("Could not block connection.", vbCritical+vbAbortRetryIgnore+vbSystemModal)
Loop while b = vbRetry 
```

这意味着“至少循环一次，然后检查 b 是否等于 vbRetry”。

请注意，我不能 100% 确定语法是否正确，我有一段时间没有使用 vbScript（没有双关语）。

# node.js - webrtc演示的nodejitsu部署无法服务器客户端javascript

> ID：14698684
> 
> 赞同：1
> 
> 时间：2013-02-05T01:25:14.163
> 
> 标签：node.js, express, webrtc, nodejitsu

我正在尝试将一个简单的 WebRTC.io 演示应用程序（[https://github.com/dougnukem/webrtc.io-demo](https://github.com/dougnukem/webrtc.io-demo)）部署到 nodejitsu，但是当它被部署时（[http://dougnukemwebrtc.jit.su/](http://dougnukemwebrtc.jit.su/)）它无法为客户端 javascript 提供服务：

*   [http://dougnukemwebrtc.jit.su/webrtcio.js](http://dougnukemwebrtc.jit.su/webrtcio.js)

> 无法获取 /webrtcio.js

当我在本地运行它时它运行良好：

```
$ git clone https://github.com/dougnukem/webrtc.io-demo.git
$ cd webrtc.io-demo/
$ npm install
$ node example/server.js &
$ curl http://localhost:8000/webrtc.io.js 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T02:01:39.930

webrtc.io.js 实际上是一个符号链接，npm 和 nodejitsu 不会打包和部署它们（[https://github.com/nodejitsu/jitsu/issues/379](https://github.com/nodejitsu/jitsu/issues/379)）。

> ```
> $ ls -al example/public
> webrtc.io.js -> ../../node_modules/webrtc.io-client/lib/webrtc.io.js 
> ```

所以现在我把一个解决方法作为 predeploy/postdeploy hack，将实际文件从 node_modules 复制到 example/public/ 以发送到 nodejitsu 服务器，然后将其恢复为本地开发人员的符号链接。可能有一个更优雅的解决方案。

package.json：[https ://github.com/dougnukem/webrtc.io-demo/commit/3b1073d5b6af78100dd7e018f4a67b078ca552e6](https://github.com/dougnukem/webrtc.io-demo/commit/3b1073d5b6af78100dd7e018f4a67b078ca552e6)

```
"scripts": {
    "predeploy": "cd ./example/public && rm webrtc.io.js && cp ../../node_modules/webrtc.io-client/lib/webrtc.io.js webrtc.io.js",
    "postdeploy": "cd ./example/public && rm webrtc.io.js && ln -s ../../node_modules/webrtc.io-client/lib/webrtc.io.js webrtc.io.js",
    "start": "node example/server.js"
  } 
```

# mongodb - 我应该对可选子文档使用 MongoDB 稀疏索引吗？

> ID：14698685
> 
> 赞同：1
> 
> 时间：2013-02-05T01:25:18.527
> 
> 标签：mongodb

我有一个包含不同类型帖子的“帖子”集合。在我的用例中，我有一个属性“列表”发布文档，它作为嵌入文档存储在其中。

```
listings:{price:0,rooms:0,size:0....} 
```

我在子文档上创建了一个索引，并确保查询遵循字段顺序。

我的问题是，我可以为整个`listings`子文档创建一个稀疏索引吗，因为将嵌入包含在帖子集合中的每个文档中似乎是一种浪费，这样我就可以对其进行索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T04:42:18.723

You can create a sparse index on any field, including one that contains a JSON document.

However, even if you use a regular index you do not need to create the embedded "listings" field in every document - having a regular index on a field does *not* imply the field needs to exist in every document.

# batch-file - 将整个文件夹的内容移动到外部 VIA

> ID：14698696
> 
> 赞同：1
> 
> 时间：2013-02-05T01:26:26.287
> 
> 标签：batch-file

我正在编写一个批处理文件以将整个文件夹及其内容移至外部硬盘驱动器，并创建一个带有日期的文件夹。

目前，在尝试整个文件夹之前，我只处理一个测试文件。

这是我所拥有的：

```
net stop MSSQLSERVER
Set FDate=%Date:~-10,10%
Set Fdate=%FDate:/=-%
MOVE C:\ShaiyaServer\ H:\Daryl\Server Backups\%FDate%\
PAUSE 
```

我知道我`%FDate%`包含正确的格式。但我的错误是：

```
C:\Windows\system32>net stop MSSQLSERVER
The SQL Server (MSSQLSERVER) service is not started.

More help is available by typing NET HELPMSG 3521.

C:\Windows\system32>Set FDate=05/02/2013

C:\Windows\system32>Set Fdate=05-02-2013

C:\Windows\system32>MOVE C:\ShaiyaServer\ H:\Daryl\Server Backups\05-02-2013\
The syntax of the command is incorrect.

C:\Windows\system32>PAUSE
Press any key to continue . . . 
```

我的语法错误是什么？这是以管理员权限运行的

我知道我的 MSSQLSERVER 服务没有启动，这是因为自第一次运行以来我没有再次启动它

顺便说一句.. 我的 C:\ShaiyaServer 文件夹树位于此处：[http ://pastebin.com/G0Sse0uA](http://pastebin.com/G0Sse0uA)

这太长了，无法发布到问题上。但基本上，我有子文件夹，每个子文件夹都被填充

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:41:40.367

你以错误的方式接近这个，我查看了你的文件树；而且你在一个目录中有很多文件。所以批量运行它需要一些时间。

```
net stop MSSQLSERVER
Set FDate=%Date:~-10,10%
Set Fdate=%FDate:/=-%
xcopy /s /e c:\ShaiyaServer\*.* H:\Daryl\Server Backups\%FDate%\
net start MSSQLSERVER
PAUSE 
```

这会将每个文件单独移动到其原始文件夹

对不起。我的原件太复杂了。请参阅我的编辑..您也可能需要考虑记录进度

**按要求更新**

此脚本仅将文件复制到您的目的地，而不是从原始文件中实际移动和删除

# drupal - Drupal 6 表单刷新问题

> ID：14698705
> 
> 赞同：0
> 
> 时间：2013-02-05T01:28:23.687
> 
> 标签：drupal, drupal-6

我制作了一个简单的 drupal 表单，在提交时表明该页面已提交。数据被放入数据库。如果在提交后刷新页面，则重新输入数据，即使用户没有再次按下提交，他们只是刷新了页面。为什么刷新会重新运行提交功能？如何防止这种情况？重定向是一种选择，还有其他选择吗？

# linux - 对制表符分隔文件中的每一列执行不同的正则表达式

> ID：14698706
> 
> 赞同：1
> 
> 时间：2013-02-05T01:28:28.627
> 
> 标签：linux, perl, bash, unix

大约 8 年来，我发现自己第一次编写 PERL，但我在一些本应简单的事情上遇到了困难。这是基本前提：

包含一百个左右字段的文件，其中 10 个有不正确的数据（O 是 0）

```
A   B   C   D    E  F   ... 
br0wn   red   1278076   0range   "20 tr0ut"   123 ...
Green   0range   90876   Yell0w   "18 Salm0n"   456   ... 
```

我正在尝试编写程序来拆分字段，然后允许我在字段 A 上运行正则表达式以将 0 替换为 O 但不将 0 替换为 C 列的 O 等等，我还有一个额外的问题是可能需要运行例如，列 E 的替代正则表达式。

我能够通过 /t 拆分记录中的所有字段。我在格式化命令以遍历每个字段并根据该字段运行特定的正则表达式时遇到问题。

任何帮助将不胜感激，如果您解决了问题，我将向您支付 10 美元购买您选择的饮料。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:54:37.737

使用诸如此类的 csv 解析器[`Text::CSV`](http://search.cpan.org/perldoc?Text%3a%3aCSV)并不复杂。这样的事情可能就足够了：

```
use strict;
use warnings;
use Text::CSV;

my $csv = Text::CSV->new({
        sep_char    => "\t",
        binary      => 1,
        eol         => $/,
});
while (my $row = $csv->getline(*DATA)) {
    tr/0/o/ for @{$row}[0, 1, 3];            # replace in cols A, B and D
    s/(?<!\d)0(?!\d)/o/g for @{$row}[4];     # replace in col E
    $csv->print(*STDOUT, $row);              # print the result
}

__DATA__
A   B   C   D   E   F
br0wn   red 1278076 0range  "20 tr0ut"  123
Green   0range  90876   Yell0w  "18 Salm0n" 456 
```

**输出：**

```
A       B       C       D       E       F
brown   red     1278076 orange  "20 trout"      123
Green   orange  90876   Yellow  "18 Salmon"     456 
```

请注意，我使用简单的正则表达式而不是音译（全局替换）处理了您的混合字符串（E 列），它根本不会替换数字旁边的零，这对于某些数字（例如`20.0`or ）将失败`0`。

**更新：**

如果您想根据列*名*而不是位置进行替换，事情会变得有点复杂。不过，`Text::CSV`可以应付。

```
use strict;
use warnings;
use Text::CSV;

my @pure_text   = qw(A B D);
my @mixed       = qw(E);

my $csv = Text::CSV->new({
        sep_char    => "\t",
        binary      => 1,
        eol     => $/,
});

my $cols = $csv->getline(*DATA);              # read column names
$csv->print(*STDOUT, $cols);
$csv->column_names($cols);                    # set column names

while (my $row = $csv->getline_hr(*DATA)) {   # hash ref instead of array ref
    tr/0/o/ for @{$row}{@pure_text};          # substitution on hash slice
    s/(?<!\d)0(?!\d)/o/g for @{$row}{@mixed};
    my @row = @{$row}{@$cols};                # make temp array for printing
    $csv->print(*STDOUT, \@row);
}

__DATA__
A   B   C   D   E   F
br0wn   red 1278076 0range  "20 tr0ut"  123
Green   0range  90876   Yell0w  "18 Salm0n" 456 
```

此代码是用于演示的独立代码。要在文件上尝试代码，请更改`*DATA`为`*STDIN`并使用以下脚本：

```
perl script.pl < input.csv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:11:39.673

我可能会在“自动拆分”模式下使用 Perl：

```
perl -a -p -F"\t" \
     -e '$F[0] =~ s/0/o/g;
         $F[1] =~ s/0/O/g;
         $F[3] =~ s/0/o/g;
         $F[4] =~ s/(\D)0(\D)/\1o\2/g;  # Or other more complex regex
         # ...                          # Other fields can be edited
         $_ = join("\t", @F);           # Reassign fields to $_
        ' data-file 
```

将“ `$F[4]`20 tr0ut”更改为“20 trout”的正则表达式；如果需要，您可以使其更复杂。

样本数据的输出：

```
A       B       C       D       E       F       ...
brown   red     1278076 orange  "20 trout"      123     ...
Green   Orange  90876   Yellow  "18 Salmon"     456     ... 
```

这确实假设了一个严格的制表符分隔的数据文件。如果您没有严格的制表符分隔数据，则包含空格的引号字符串会使事情复杂化；那时， Text::CSV 对阅读这些行很有吸引力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T02:23:02.897

这是使用数组引用和/或子例程进行简单配置的一种方式，然后替换发生：

```
use strict;
use warnings;

my @subst = ([
  ['this', 'that'],
  ['O', 1],
],[
  ['foo', 'boo'],
  sub {s/a.*//},
]);

sub mk_subst {
  my $list = shift;
  my ($this, $that) = eval { @$list };
  return $list unless defined $this;
  sub { s/\Q$this/$that/ };
}

my @all;
for my $set (@subst) {
  my @list = eval { @$set };
  unless (@list) {
    push @all, [ sub {} ];
    next;
  }
  my @re;
  for my $s (@list) {
    push @re, mk_subst($s);
  }
  push @all, \@re;
}

while (<DATA>) {
  chomp;
  my @list = split /\t/, $_, -1;
  for my $i (0..$#list) {
    for ($list[$i]) {
      for my $funcs ($all[$i]) {
        for my $f (@$funcs) {
          $f->();
        }
      }
    }
  }
  print join("\t", @list), "\n";
}

__DATA__
thisO   fooabca1234
abc 123fooabca1234 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T01:41:08.813

这是使用`GNU awk`. 只需将列名添加到`BEGIN`块中的数组中。在下面的示例中，将仅修改 A、C 和 E 列。像这样运行：

```
awk -f script.awk file 
```

内容`script.awk`：

```
BEGIN {
    FS=OFS="\t"

    a["A"]
    a["C"]
    a["E"]
}

{
    for (i=1;i<=NF;i++) {

        if ($i in a && NR==1) {
            b[i]
        }

        else if (i in b) {
            $i = gensub(/(^|[^0-9])0([^0-9]|$)/,"\\1o\\2", "g", $i)
        }
    }
}1 
```

制表符分隔的结果：

```
A   B   C   D   E   F   ... 
brown   red 1278076 0range  "20 trout"  123 ...
Green   0range  90876   Yell0w  "18 Salmon" 456 ... 
```

或者，这是单线：

```
awk 'BEGIN { FS=OFS="\t"; a["A"]; a["C"]; a["E"] } { for (i=1;i<=NF;i++) { if ($i in a && NR==1) b[i]; else if (i in b) $i = gensub(/(^|[^0-9])0([^0-9]|$)/,"\\1o\\2", "g", $i) } }1' file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T01:46:29.777

创建一个子程序数组，例如：

```
my @fixer;
$fixer[0] = sub { $_[0] =~ s/0/o/; };
my @fields = split /\t/, $input;
for (my $i = 0; $i <= $#fields; $i++) {
   $fixer[$i]->($fields[$i]) if defined $fixer[$i];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T06:56:48.733

```
perl -F -lane 'for(@F){$_=~s/0/o/g if(/0/ && /[a-zA-Z]+/);} print "@F"' your_file 
```

在下面测试

```
> cat temp
br0wn   red   1278076   0range   "20 tr0ut"   123 ...
Green   0range   90876   Yell0w   "18 Salm0n"   456   ...

> perl -F -lane 'for(@F){$_=~s/0/o/g if(/0/ && /[a-zA-Z]+/);} print "@F"' temp
brown red 1278076 orange "20 trout" 123 ...
Green orange 90876 Yellow "18 Salmon" 456 ...
> 
```

# jquery-ui - jquery ui 组合框结果排序

> ID：14698710
> 
> 赞同：1
> 
> 时间：2013-02-05T01:28:47.927
> 
> 标签：jquery-ui, combobox, jquery-ui-autocomplete

我有一个**Jquery UI Combobox 自动完成小部件**，我正在尝试编写一个**匹配器**函数来对搜索结果进行排序。我正在尝试获得首选结果：

当您键入例如。**结果**应该这样排序：

*   **伦敦**_
*   博洛尼亚**_** _
*   巴塞罗那**_** _

当术语与第一个键入的字母匹配时，它位于第一位，当术语包含字母时，它出现在第一条规则之后。

我发现了类似的东西，但我无法让它工作。在此解决方案中，我找不到在**匹配器**变量和**术语**变量之间建立关系的方法。

### 组合框原件

```
source: function( request, response ) {
              // match by first letters in search term
              var matcher = new RegExp( "^" + $.ui.autocomplete.escapeRegex(request.term), "i" ); 
              response( select.children( "option" ).map(function() {
                var text = $( this ).text();
                if ( this.value && ( !request.term || matcher.test(text) ) )
                  return {
                    label: text.replace(
                      new RegExp(
                        "(?![^&;]+;)(?!<[^<>]*)(" + $.ui.autocomplete.escapeRegex(request.term) + ")(?![^<>]*>)(?![^&;]+;)", "gi"
                      ), "<strong>$1</strong>" ),
                    value: text,
                    option: this
                  };
              }) );
            }, 
```

### jquery ui自动完成的解决方案

```
$(document).ready(function () {
    // my source is in html
    var source = ['Adam', 'Benjamin', 'Matt', 'Michael', 'Sam', 'Tim'];
    $("input").autocomplete({
        source: function (request, response) {
            var term = $.ui.autocomplete.escapeRegex(request.term)
                , startsWithMatcher = new RegExp("^" + term, "i")
                , startsWith = $.grep(source, function(value) {
                    return startsWithMatcher.test(value.label || value.value || value);
                })
                , containsMatcher = new RegExp(term, "i")
                , contains = $.grep(source, function (value) {
                    return $.inArray(value, startsWith) < 0 &&
                        containsMatcher.test(value.label || value.value || value);
                });

            response(startsWith.concat(contains));
        }
    });
}); 
```

[链接到我找到的类似答案](https://stackoverflow.com/a/10948954/1650009)

[**JS小提琴**](http://jsfiddle.net/BRANIS/v6aWj/)

任何可能的反馈将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-05T19:10:02.840

我能够通过添加以下内容来完成这项工作：

```
source: function (request, response) {
                var matcher = $.ui.autocomplete.escapeRegex(request.term),
                startsWithMatcher = new RegExp("^" + matcher, "i"), 
                startsWith = $.grep(select.children("option"), function(value) {
                        return startsWithMatcher.test(value.label || value.value || value);
                    }),
                    containsMatcher = new RegExp(matcher, "i"),
                    contains = $.grep(select.children("option"), function (value) {
                        return $.inArray(value, startsWith) < 0 &&
                            containsMatcher.test(value.label || value.value || value);
                    });
                response(startsWith.concat(contains).map(function(option) {
                  var text = $(option).text();
                  var val = $(option).val();  
                  return {
                    label: text,
                    value: val,
                    option: $(option)
                  };
                }));
            } 
```

我还需要从选择框中删除第一个空白选项，否则你会得到一个空的结果。相反，我为组合框输入添加了一个占位符

```
$('.ui-combobox-input').attr('placeholder','Search Here').val(''); 
```

[JS小提琴](http://jsfiddle.net/Amac/ye0fmnak/)

# highcharts - 高图表 - 删除自动缩小 x 轴的时间范围

> ID：14698716
> 
> 赞同：0
> 
> 时间：2013-02-05T01:30:09.970
> 
> 标签：highcharts

创建了具有多个系列的图表，第一个系列有周记录，其他系列有每日记录。每周数据从 2012 年 7 月开始。但在 X 轴时间范围内，它是自动收缩的。如何删除这个自动收缩。我希望时间范围平分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:21:26.273

Remove `dataGrouping`, it's enabled by default.

```
series: [{
    name: 'serie 1',
    data: yourData,
    dataGrouping: {
        enabled: false
    }
}] 
```

*reference*

*   [http://api.highcharts.com/highstock#plotOptions.series.dataGrouping](http://api.highcharts.com/highstock#plotOptions.series.dataGrouping)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:38:29.400

除了 dataGrouping，您还可以将 ordinal 设置为 false。 [http://api.highcharts.com/highstock#xAxis.ordinal](http://api.highcharts.com/highstock#xAxis.ordinal)

# android - 在 Android 锁定屏幕上显示 Activity

> ID：14698718
> 
> 赞同：0
> 
> 时间：2013-02-05T01:30:22.107
> 
> 标签：android, android-4.2-jelly-bean, lockscreen

我试图弄清楚（如果可能的话）复制相机应用程序在 Jelly Bean 锁定屏幕上的工作方式。

从锁定屏幕，我可以向左滑动并显示相机应用程序，如果我向右滑动，我可以添加小部件。是否可以以可以将其添加到锁定屏幕的方式提供活动，或者这仅适用于默认相机应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T01:38:07.223

它只是另一个`widgetCategory`，即`keyguard`，它可以将小部件添加到锁定屏幕。[请参阅此处](http://developer.android.com/guide/topics/appwidgets/index.html)的文档。

您将定义您的 appwidget-provider xml，如下所示：

```
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
   ...
   android:widgetCategory="keyguard|home_screen">
</appwidget-provider> 
```

# css - 如何在另一个 div 中垂直对齐一个 div？

> ID：14698719
> 
> 赞同：0
> 
> 时间：2013-02-05T01:30:23.477
> 
> 标签：css, html

> **可能重复：**
> [在另一个 div 中垂直居中一个 div](https://stackoverflow.com/questions/6490252/vertically-centering-a-div-inside-another-div)

我正在尝试将一个 div 垂直对齐到另一个 div 中。它也居中，但我似乎能够开始工作。内部 div 有一个明确的宽度，我需要能够做到这一点。高度应由内容量决定。我已经尝试过我在 stackoverflow 上看到的各种解决方案，但它们似乎都不能正常工作。如果内部 div 上没有明确的宽度，或者如果不需要水平居中，它们中的一些似乎可以工作。这个问题与其他问题的不同之处在于那些没有明确的宽度，或者当他们这样做时，解决方案包括静态填充或计算填充的 javascript。我希望避免这种情况。

html:

```
<div class="outer">
    <div class="inner">
        //some stuff<br/>
    </div>
</div> 
```

CSS：

```
.outer {
width: 100%;
height: 96px;
    position:relative;
border:1px black solid;   
background-color: black;
}

.inner {
    width:900px;
    height: 40px;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
border: 1px red solid;
vertical-align: middle;
background-color: white;
} 
```

[http://jsfiddle.net/F4nrp/](http://jsfiddle.net/F4nrp/)

更新，这是由下面的路人解决的。确实有很多人提出了非常相似的问题，但是我认为这里有足够的不同。答案也与我见过的任何其他答案都不一样。

# html - 更改文本框中文本的颜色

> ID：14698727
> 
> 赞同：0
> 
> 时间：2013-02-05T01:31:05.990
> 
> 标签：html, css

如何更改文本框中文本的颜色......给出了颜色属性但它不起作用......

在下面提供我的代码和小提琴

[http://jsfiddle.net/Zkdfq/1/embedded/result/](http://jsfiddle.net/Zkdfq/1/embedded/result/)

```
<form class="navbar-form pull-right">
              <input class="span2" type="text" placeholder="Email">
              <input class="span2" type="password" placeholder="Password">
              <button type="submit" class="btn">Sign in</button>
            </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T01:39:13.820

只需添加：

```
input[type="text"] {
    color:red;
} 
```

在 bootstrap.css 之后的某个地方覆盖它。占位符文本不会改变，但是一旦你输入文本就会改变。

或者，如果您只希望它影响导航栏：

```
.navbar-form input[type="text"] {
    color:red;
} 
```

# javascript - 正则表达式验证密码

> ID：14698729
> 
> 赞同：0
> 
> 时间：2013-02-05T01:31:18.423
> 
> 标签：javascript, html, regex

> **可能重复：**
> [密码验证正则表达式](https://stackoverflow.com/questions/5068843/password-validation-regex)

8 到 16 个字符，3 个字符类中的每个字符至少有 1 个字符 - 字母大写和小写字母、数字、符号。

我有这段代码，但它不起作用，当我写超过 16 个字符时，它被认为是有效的，但它不应该；它应该可以与 3 个字符类一起使用，但它可以与 4 个字符类一起使用，我的错误在哪里？

[http://jsbin.com/ugesow/1/edit](http://jsbin.com/ugesow/1/edit)

```
<label for="pass">Enter Pass: </label>
<input type="text" id="pass" onkeyup="validate()"> 
```

脚本

```
function validate() {
    valor = document.getElementById('pass').value;
    if (!(/(?=.{8,16})(?=.*?[^\w\s])(?=.*?[0-9])(?=.*?[A-Z]).*?[a-z].*/.test(valor))) {

        document.getElementById('pass').style.backgroundColor = "red";
    } else {
        document.getElementById('pass').style.backgroundColor = "#adff2f";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:52:41.543

正则表达式不是灵丹妙药。与常规代码混合使用并不难：

```
function validatePassword(password) {
    // First, check the length.
    // Please see my comment on the question about maximum password lengths.
    if(password.length < 8 || password.length > 16) return false;
    // Next, check for alphabetic characters.
    if(!/[A-Z]/i.match(password)) return false;
    // Next, check for numbers.
    if(!/\d/.match(password)) return false;
    // Next, check for anything besides those.
    if(!/[^A-Z\d]/i.match(password)) return false;
    // If we're here, it's valid.
    return true;
} 
```

但是，我会研究像[zxcvbn](https://github.com/lowe/zxcvbn)这样的密码检查器，我认为它是一个更好的密码质量检查器，在 un- [13375p3/-\k 化](https://en.wikipedia.org/wiki/Leet)之后检查常见的字典单词并妥善[处理熵](http://xkcd.com/936/)。它被 Dropbox 等使用。[在这里试试。](https://dl.dropbox.com/u/209/zxcvbn/test/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T01:46:58.580

您需要将匹配锚定到字符串的开头，并将第一个前瞻锚定到末尾：

```
^(?=.{8,16}$) 
```

此外，最后的前瞻需要一分为二：

```
(?=.*?[A-Z])(?=.*?[a-z]) 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-05T01:37:31.653

为什么不直接用正则表达式测试三个字符集：

```
[A-Za-z0-9]+ 
```

然后计算字符串的长度以验证长度。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-02-05T01:44:23.583

这个范围怎么样：

```
/[A-Za-z0-9$-/:-?{-~!"^_`\[\]]/ 
```

所以你可以先检查

```
/[A-Za-z]+/ 
```

然后

```
/\d+/ 
```

最后

```
/[$-/:-?{-~!"^_`\[\]]+/ 
```

如果通过，您可以检查长度。

您可以查看此[链接](https://stackoverflow.com/questions/8359566/regex-to-match-symbols)以了解符号工作的原因。

# mysql - 在 MySQL SELECT ... LIKE 中获取匹配的子字符串

> ID：14698732
> 
> 赞同：2
> 
> 时间：2013-02-05T01:31:36.900
> 
> 标签：mysql, select, substring, sql-like

在 MySQL 中，当查询包含大量文本的表时，使用

```
SELECT textcol FROM manytexts WHERE textcol LIKE "%interesting % bit%"; 
```

我怎样才能只取回 textcol 中的匹配位？

例如从

> “等等等等有趣的绿色位等等等等等等”

预期结果：

> “有趣的绿色位”

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:39:12.747

也许还有另一种方法，但您可以使用`SUBSTR`,`INSTR`和`LENGTH`：

```
SELECT SUBSTR(field, 1, INSTR(field, 'bit') + LENGTH('bit') - 1)
FROM (
  SELECT SUBSTR(YourField, INSTR(YourField, 'interesting'), LENGTH(YourField)) field
  FROM YourTable
  ) t 
```

这是小提琴：[http ://sqlfiddle.com/#!2/539b6/2](http://sqlfiddle.com/#!2/539b6/2)

祝你好运。

# jquery - jQuery下拉菜单显示所有链接

> ID：14698734
> 
> 赞同：2
> 
> 时间：2013-02-05T01:31:38.580
> 
> 标签：jquery, drop-down-menu

我想创建一个菜单，如[http://www.macheesmo.com/](http://www.macheesmo.com/)（食谱），其中显示所有链接（3 级深）。

到目前为止，这是我想出的 - [http://jsfiddle.net/MZxeA/](http://jsfiddle.net/MZxeA/)

我的问题是每次我离开第三个 ul 时，整个子菜单都会消失。

另一个问题是，当我进入第二个 ul 然后回到第一个 ul 时，第三个 ul 消失了。

另一个问题是选择器，除非我删除 a.

我想包含 a 的原因是为悬停/轨迹设置“on”样式。

```
$(function () {
    $(".main-nav ol li a").hover(function () {
        $(this).addClass("hover");
        $('ul', this).css({
            'visibility': 'visible'
        });
    }, function () {
        $(this).removeClass("hover");
        $('ul', this).css({
            'visibility': 'hidden'
        });
    });
}); 
```

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:53:13.107

您在 jsfiddle 中所做的事情有一些错误，我将尝试与您一一修复

1.  首先，您需要在代码中包含 jquery 文件。用 jquery 帮助编写一些代码。要包含 jquery 文件，您可以使用 jquery 的本地文件和此代码

> ```
> <script src="local/jquery.min.js" /> 
> ```

1.  您需要将子菜单的位置设为绝对位置。而李持有他的位置：相对。是使与他父亲相关的子和顶部和左侧的值将您的子菜单放在您想要的真实位置。

2.  在可见选项中有一些问题需要使用。对于子菜单的 jquery 给你例如 show() 和 hide() 选项。在这段代码中，您可以看到更短且更好的代码来完成这项工作

> ```
> $(function () {
>     $(".main-nav ol li a").hover(function () {
>         $(this).addClass("hover");
>         $(this).next('ul').show();
>     }, function () {
>         $(this).removeClass("hover");
>         $(this).next('ul').hide();
>     });
> }); 
> ```

如果您愿意，也可以尝试将 show() 和 hide() 替换为 fadeOut() 和 fadeIn() 以进行一些过渡。

乐于助人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:13:19.860

正如评论中指出的那样，这样做的方法是将javascript排除在外，只需使用CSS（就像您尝试复制的示例网站一样）。

基本上你有三个嵌套列表，级别 1-3，默认情况下只有级别 1 是可见的。这是样式如何工作的玩具示例：

HTML：

```
<ul id="menu">
  <li>
    <a href="#">Item 1</a>
    <ul>
      <li>
        Sub item1
        <ul>
          <li>Third level items go here</li>
        </ul>
      </li>
      <li>Sub item without third level items..</li>
    </ul>
  </li>
  <li><a href="#">Item 2, no submenu</a></li>
</ul> 
```

CSS：

```
/* Hide the submenu by default */
#menu > li > ul {
  display:none;
}

/* Show on parent hover */
#menu > li:hover > ul {
  display:block;
} 
```

现在这是非常基本的 HTML/CSS，仅显示本练习的显示隐藏部分，但其余部分与问题无关。

如果您出于某种原因真的想为此使用 jQuery，您可以删除上面的第二个样式规则并使用此脚本来获得相同的效果：

```
$(document).ready(function(){
  $('#menu > li').hover(function(){
    $(this).children('ul').show();
  }, function(){
    $(this).children('ul').hide();
  });
}); 
```

# c# - 如何更改文本框在按下后退按钮时失去焦点的默认行为

> ID：14698735
> 
> 赞同：0
> 
> 时间：2013-02-05T01:31:38.957
> 
> 标签：c#, windows-phone-8, windows-phone

当文本框处于焦点时按返回按钮的默认行为是虚拟键盘关闭并且文本框失去焦点。并且用户再次按下返回键，窗口回到前一个窗口。

但是，我想改变这种行为。我希望窗口在按下后退键时直接返回到上一个窗口，而忽略文本框是否处于焦点。

我尝试了以下方法，

1.  使用 HardwareButtons.BackPressed 事件，不起作用（也许它只适用于 Direct3D，我不确定）。在按下后退按钮期间不会触发该事件。

2.  使用Textbox_onKeyUp，不起作用。在后退按钮打开期间不会触发该事件。

3.  使用覆盖无效 OnBackKeyPress，不起作用。在其他情况下它会按预期触发，但在文本框从焦点到失去焦点（键盘关闭）的情况下，不会触发事件。

4.  使用 Textbox_OnLoseFocus，工作正常，但需要进行大量条件检查，因为有时失去焦点并不意味着我想返回上一页。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T22:38:10.157

最后我没有改变行为，做了不同的设计。但我仍然认为，在那种情况下，诺基亚的行为是最人性化的。

# css - 我如何理解也有左/右页边距的固定 div？

> ID：14698738
> 
> 赞同：0
> 
> 时间：2013-02-05T01:31:56.577
> 
> 标签：css

据说一个固定的div只是从整个页面中取出，与客户端窗口有固定的关系。在我阅读这篇[文章](https://stackoverflow.com/questions/3303173/position-element-fixed-vertically-absolute-horizontally)的最佳答案之前，我认为这很容易。在那种情况下，我看不到固定 div 和窗口边框之间的密切关系。

任何人都可以解释在固定 div 上设置相对位置的内在黑魔法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T22:06:20.873

这里有两个单独的问题：

1.  如何`position: fixed;`运作。
2.  在什么地方放置绝对和固定定位的项目然后你没有写上/左/下/右坐标。

您在帖子中所写的内容`position: fixed;`基本上是正确的——固定对象被从页面中取出并粘在窗口边框上。如果您通过使用左/右/上/下为它提供起始位置，它将从窗口对象中计算它们。

但是如果添加`position: fixed;`但不添加坐标或仅添加一维坐标会发生什么？

如果您这样做，则对象的起始位置将根据它从页面流中删除之前的位置计算。

让我们尝试一些简单的例子`position: absolute;`（在这方面它的工作原理与固定的几乎相同）。

[我们的示例的 jsFiddle 在这里](http://jsfiddle.net/uW7Ug/)

**示例`position: static;`：**

```
`<div>First sentence. <mark>Second sentence.</mark> third sentence. </div>` 
```

在此示例中，第二句位于页面流内，因此位于第一句之后和第三句之前。

**示例`position: absolute;`：**

```
<div>First sentence. <mark style="position: absolute;">Second sentence.</mark> third sentence.</div> 
```

在这个例子中，第二句取自页面流，但没有给出坐标。所以它位于第一句之后（在我们从流中删除 if 之前的位置），但第三句现在在第二句之下，因为 if 不再是流了。

**和的例子`position: absolute;`；左：0；`：**

```
<div>First sentence. <mark style="position: absolute; left: 0;">Second sentence.</mark> third sentence.</div> 
```

最后我们给第二句一些起点，`left: 0;`所以现在它不仅没有占用任何空间，而且还移到了容器的左侧。（但由于我们没有添加任何坐标，所以它仍然和以前一样高度`top`）`right`。

`position: fixed;`工作几乎一样。因此，在原始帖子中，作者只是固定了顶部坐标而没有固定左右。因为这个对象被水平放置在页面流中它的原始位置的位置。

# java - Spring - 如何将文件写入类路径？

> ID：14698739
> 
> 赞同：1
> 
> 时间：2013-02-05T01:32:11.457
> 
> 标签：java, spring-mvc, classpath

我正在尝试将新文件写入特定于我的类路径的位置。

```
FileOutputStream fileOut = new FileOutputStream("TEST-1.xls");
wb.write(fileOut);
fileOut.close(); 
```

如何指定“TEST-1.xls”以使路径相对于我的 spring 项目的类路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:45:21.870

一般来说，一个“类路径”可能由多个路径条目组成。事实上，大多数 Classpaths 都可以。在这种情况下，您需要（以某种方式）得出您所指的是哪个 Classpath 条目。

换句话说，鉴于 Classpath 的语义，短语“特定于我的 classpath 的位置”并不完全“合法”。将此与您的操作系统`PATH`设置进行比较。如果我要求您将文件写入“特定于您的`PATH`设置”的位置，您会怎么做？

# mysql - 有没有一种优雅的方式来更新模型关系？

> ID：14698740
> 
> 赞同：1
> 
> 时间：2013-02-05T01:32:21.073
> 
> 标签：mysql, ruby-on-rails, database

我正在使用 Ruby on Rails，但也对通用解决方案感兴趣。假设我有一个模型用户、一个模型菜系和一个连接两者的关系表，允许用户拥有一个“最喜欢的菜系”列表。用户会看到所有美食的列表，并且可以单独选中或取消选中它们。例如，假设 Alice 开始喜欢美国、印度和中国食物。然后她取消选中中文并添加泰语并点击保存。更新关系表的最佳方法是什么？

我有三个解决方案，但由于这个操作看起来很常见，我希望有一个更优雅的解决方案。如果没有，执行此操作的标准方法是什么？

*   保留一组添加和一组删除，并确保它们没有重叠
*   删除所有用户最喜欢的食物并插入选定的食物
*   进行 ajax 调用以更新每个单独的添加和删除

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T01:44:59.550

使用`association_ids`方法。无需查找美食列表然后将其分配给用户，只需获取他们的 id 列表并将其分配给`user.cuisine_ids`. 保存记录将为您生成关联记录。由于您使用的是复选框，因此请注意用户取消选中所有内容然后保存的情况。通常发生的情况是没有保存任何更改，保持选择旧的选定菜系。这可以通过添加`nil`与复选框同名的隐藏值来轻松解决。

# ruby-on-rails - 在 Rails 中处理 JSON 响应

> ID：14698741
> 
> 赞同：0
> 
> 时间：2013-02-05T01:32:24.650
> 
> 标签：ruby-on-rails, ajax, json

我在下面有这段代码。我正在使用 AJAX 调用，然后我需要读取 json 作为响应。在我的控制器中，我有这个：

```
def create
  # some code
  respond_to do |format|
    format.html { redirect_to 'index' }
    format.json { render :json => {:test =>"test"} }
  end
end 
```

我如何阅读 json 响应？我应该将javascript代码放在哪个文件中？

```
$('...').live('ajax:success',function(data, status, xhr){
    console.log(data);
    console.log(status);
    console.log(xhr);
}); 
```

我在 application.js 文件中尝试过，但它不起作用

# java - 填充 ArrayList 时出现 NumberFormatException

> ID：14698742
> 
> 赞同：-1
> 
> 时间：2013-02-05T01:32:25.130
> 
> 标签：java

我试图在不知道数组大小的情况下填充数组。我使用 ArrayList 来做到这一点

```
 String filename = "C:\\tmTest.123";
    int tmHex;
    FileInputStream in = null;
    ArrayList<Byte> bytes = new ArrayList<Byte>();        

    try
    {            
        in = new FileInputStream(filename); 

        while((tmHex = in.read()) != -1)
        {                
            bytes.add(Byte.parseByte("", tmHex));

        }
    }
    catch (IOException ex)
    {
        Logger.getLogger(NARSS02.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

但是我遇到了异常 NumberFormatException。为什么 ？以及在从文件读取字节期间是否有任何其他方法来填充数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:53:14.143

[来自 Java API：](http://docs.oracle.com/javase/7/docs/api/java/lang/Byte.html#parseByte%28java.lang.String,%20int%29)（parseByte 方法总结）

> 如果发生以下任何一种情况，则会引发 NumberFormatException 类型的异常：
> 
> *   第一个参数为空或长度为零的字符串。
> *   基数小于 Character.MIN_RADIX 或大于 Character.MAX_RADIX。
> *   字符串的任何字符都不是指定基数的数字，除非第一个字符可能是减号“-”（“\u002D”），前提是该字符串的长度大于 1。
> *   字符串表示的值不是字节类型的值。

# vba - Trim 在 Excel VBA 中如何工作？

> ID：14698745
> 
> 赞同：0
> 
> 时间：2013-02-05T01:32:53.493
> 
> 标签：vba, excel, trim

我有以下代码可以消除中间空格、换行和修剪

但`Trim`不起作用。可能是什么原因？

```
Sub Replace()

  With Sheets("Input_Data").Range("A1:A6300")
  'With Sheets("Input_Limits").Range("A1:A6300")

    .Cells.Replace "  ", " ", xlPart, xlByRows, False
    .Cells.Replace vbLf, "", xlPart, xlByRows, False
    '.Cells.Trim

  End With

End Sub 
```

它给：

> 错误 - 对象不支持此属性方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:53:51.633

您不能`Trim`在范围内使用。该`Trim`文档指出：

> **Trim( *string* )**
> 所需的*字符串*参数是任何有效的字符串表达式。

此外，`Trim`它不适合您的任务，因为它不会删除字符串中的空格。文档中提到了这一点（添加了重点）：

> 返回一个 Variant (String) 包含指定字符串的副本，没有前导空格 (LTrim)、尾随空格 (RTrim)**或前导空格和尾随空格 (Trim)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:33:28.043

以下代码将满足您的要求。请注意，我将修剪操作应用于活动工作表中的所有单元格；如果这不是你想要的，你显然可以编辑它......

```
Sub trimAll()
  Dim c As Range

  For Each c In ActiveSheet.UsedRange.Cells
    If Not (IsEmpty(c) Or IsError(c) Or IsFormula(c)) Then
      c.Value = Trim(c.Value)
    End If
  Next c

  With ActiveSheet.UsedRange.Cells
    .Cells.Replace "  ", " ", xlPart, xlByRows, False
    .Cells.Replace vbLf, "", xlPart, xlByRows, False
  End With

End Sub

Function IsFormula(c)
  ' use this to test for formulas - don't edit those or they become values!
  IsFormula = True
  On Error Resume Next
  If Left(c.Formula, 1) = "=" Then IsFormula = True Else IsFormula = False
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T03:35:56.600

由于 Trim 不支持范围，您可以添加以下内容：

```
Dim c as Cell
For each c in .Cells
  c.Value = Trim(c.Value)
Next c 
```

免责声明：未经测试。有关更完整的解决方案，请参阅其他答案。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-12-09T19:50:51.773

```
Sub DescTrim(Cx As Integer)  
    Dim Rx As Integer: Rx = 5 'Start at row 5  
    Dim STrimmed As String  
        For Rx = 5 To ActiveSheet.UsedRange.Rows.Count  
            STrimmed = Trim(Cells(Rx, Cx).Value)  
            While InStr(STrimmed, chr(32) & (chr(32))  
                STrimmed = Replace(STrimmed, Chr(32) & Chr(32), chr(32))  
            Wend  
            Cells(Rx, Cx).Value = STrimmed  
        Next  
End Sub 
```

# java - 创建一个闪屏并让它停留几秒钟

> ID：14698746
> 
> 赞同：0
> 
> 时间：2013-02-05T01:33:03.127
> 
> 标签：java, netbeans, jar

我想显示一个闪屏，它应该停留几秒钟，以便用户可以阅读闪屏中的内容。

1.  通过在 build.xml 中添加以下代码，我已将所有 .jar 文件变成一个 .jar 文件，

    ```
    <!-- Change the value of this property to be the name of your JAR,
         minus the .jar extension. It should not have spaces.
         <property name="store.jar.name" value="MyJarName"/>
    -->
    <property name="store.jar.name" value="store"/>

    <!-- don't edit below this line -->

    <property name="store.dir" value="store"/>
    <property name="store.jar" value="${store.dir}/${store.jar.name}.jar"/>

    <echo message="Packaging ${application.title} into a single JAR at ${store.jar}"/>

    <delete dir="${store.dir}"/>
    <mkdir dir="${store.dir}"/>

    <jar destfile="${store.dir}/temp_final.jar" filesetmanifest="skip">
        <zipgroupfileset dir="dist" includes="*.jar"/>
        <zipgroupfileset dir="dist/lib" includes="*.jar"/>

        <manifest>
            <attribute name="Main-Class" value="${main.class}"/>
        </manifest>
    </jar>

    <zip destfile="${store.jar}">
        <zipfileset src="${store.dir}/temp_final.jar"
        excludes="META-INF/*.SF, META-INF/*.DSA, META-INF/*.RSA"/>
    </zip>

    <delete file="${store.dir}/temp_final.jar"/> 
    ```

我正在使用netbeans。通过右键单击构建 xml 文件来创建 jar 文件，

运行目标 -> 其他目标 -> package-for-store

任何线索如何构建启动画面并保持几秒钟？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:51:15.783

1.  创造你自己的一个`JWindow`（它已经没有装饰了）。
2.  将窗口关闭后需要加载的“主”类传递给这个窗口。
3.  添加您想要显示的内容。
4.  使用 a`javax.swing.Timer`来“等待”一段给定的时间。当计时器触发时，关闭窗口并使用“主”类引用来加载应用程序的其余部分。

**额外的...**

您还可以查看[如何创建启动画面](http://docs.oracle.com/javase/tutorial/uiswing/misc/splashscreen.html)

# php - 如何在锂框架中包含视图

> ID：14698748
> 
> 赞同：0
> 
> 时间：2013-02-05T01:33:07.780
> 
> 标签：php, lithium

我正在使用锂框架来做我的应用程序，因为它支持 mongodb ，

现在我对如何在视图文件中包含另一个视图文件感到困惑

例如，我得到一个名为“menu.html.php”的视图文件

```
<div id='menu'>
    <ul>
        <li>home</li><li>about</li><li>contact</li>
    </ul>
</div> 
```

在我的 'index.html.php' 中，我想包含上面的文件，这样我就不必每次都编写相同的代码。所以这就是我的解决方案

```
<?php 

$base = ($_SERVER['DOCUMENT_ROOT']);

echo $this->render($base.'/app/views/meeting/mainmenu.html.php');
?> 
```

我认为必须有更好的方法来做到这一点。因为每次我都需要计算完整的视图路径。

我还没有在锂的文档中找到答案。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T05:33:25.057

您可以在视图文件中使用它来渲染元素：

```
<?= $this->_render('element', 'resources/list-single', compact('resource')); ?> 
```

将呈现文件“app/views/elements/resources/list-single.html.php”。$resource 也将在子模板中可用。

# razor - 如何返回带有文本的字段？

> ID：14698749
> 
> 赞同：0
> 
> 时间：2013-02-05T01:33:09.753
> 
> 标签：razor

您好，我正在构建一个显示来自数据库的数据的网页。像这样：

![在此处输入图像描述](../Images/4a510a8eb0bf89dddcb4adf9a9fb786e.png)

为什么没有显示结果？最好的，

```
@model Orchard.Staff.Models.StaffPart
    <fieldset>
      <legend>Map Fields</legend>

      <div class="editor-label">
        @Html.LabelFor(model => model.StaffID)
      </div>
      <div class="editor-field">
        @Html.DisplayFor(model => model.StaffID)
        @Html.ValidationMessageFor(model => model.StaffID)
      </div>
      <div class="editor-label">
        @Html.LabelFor(model => model.CName)
      </div>
      <div class="editor-field">
        @Html.DisplayFor(model => model.CName)
        @Html.ValidationMessageFor(model => model.CName)
      </div>

      <div class="editor-label">
        @Html.LabelFor(model => model.EName)
      </div>
      <div class="editor-field">
        @Html.DisplayFor(model => model.EName)
        @Html.ValidationMessageFor(model => model.EName)
      </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:39:14.553

尝试使用

```
 @Html.TextBoxFor(model => model.EName) 
```

代替，

```
 @Html.DisplayFor(model => model.EName) 
```

如果这不起作用，请确保在将模型发送到视图之前正确填充模型

# ruby-on-rails - UglifierJS 只显示一条版权评论

> ID：14698750
> 
> 赞同：2
> 
> 时间：2013-02-05T01:33:10.733
> 
> 标签：ruby-on-rails, ruby-on-rails-3, asset-pipeline, uglifyjs

我正在制作一个 rails (3.2.11) 应用程序。当我编译我的资产时，我只看到一个版权声明，即使我使用了多个顶部有版权声明的 JS 和 CSS 文件。

我猜这是因为 rails 只是连接所有 js 文件，然后只保留顶部的版权声明。

我想确保给予每个人应有的信任。我可以手动添加一个新的版权声明文件，但是有没有办法用资产管道解决这个问题？

# dos - 文件夹和子文件夹上的最新文件，整体上不按文件夹传播

> ID：14698751
> 
> 赞同：1
> 
> 时间：2013-02-05T01:33:15.080
> 
> 标签：dos, command-prompt

我知道一些 DOS，我可以做一些简单的事情，但无法找到或创建一些东西来搜索带有子文件夹的文件夹上的最近文件。

```
dir *.mp3 /b /o:d /s /t:c > Listing.txt 
```

这很好用，有一个问题，它列出了每个文件夹中的最近文件夹，而不是整个列表。我想要一份关于所有内容的最新文件列表，有点像 Windows 按日期搜索时所做的事情。

```
music  \Josh
       \Rafael 
```

我拥有的脚本会做我需要的，但它会一个接一个地给我每个文件夹上的最新文件，而不是一个整体，所以让我们这样说：

```
Music\file 1.mp3
Music\file 2.mp3
Music\Josh\file24.mp3
Music\Josh\file50.mp3
Music\Rafael\test1.mp3
Music\Rafael\test56.mp3 
```

我想要的是最近的文件，不管文件夹，有点像这样

```
file 1.mp3
file24.mp3
test1.mp3
file 2.mp3
file50.mp3
test56.mp3 
```

拉斐尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:27:01.253

试试这个

```
For /r %I in (*.mp3) do @echo %~nxI 
```

要在结果中包含日期，请执行此操作

```
For /r %I in (*.mp3) do @echo %~nxtI 
```

对于不同的修饰符，请参考[这个 url](http://www.computerhope.com/forhlp.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:24:25.267

如果您需要按日期和时间排序的文件，可以使用这样的批处理文件：

```
@echo off
setlocal
for /f "tokens=1,2,3,4,*" %%f in ('dir /s') do call :eachfile %%f %%g %%h "%%i" "%%j"
exit /b

:eachfile
set dt=%1
set tm=%2
if "%dt%"=="Directory" exit /b
if "%dt%"=="Volume" exit /b
if "%tm%"=="File(s)" exit /b
if "%tm%"=="Dir(s)" exit /b
if "%dt%"=="Total" exit /b
if "%~4"=="<DIR>" exit /b
echo %dt:~6,4%/%dt:~0,5% %3 %tm% %~5
exit /b 
```

将其保存到 eg `dirflat.bat`，然后您可以运行

```
dirflat | sort 
```

按顺序获取文件列表。如果您不在美国，您可能需要调整批处理文件的倒数第二行以正确地剪切和拼接您的目录列表。对我来说，这就变成了：

```
06/14/2011 10:40 AM "209,920" "sed.exe" 
```

进入

```
2011/06/14 AM 10:40 sed.exe 
```

可以很容易地排序。然后，您可以将输出发送到另一个阶段，以去除字符串开头的时间。

# html - 识别 h:outputText 中的链接

> ID：14698752
> 
> 赞同：0
> 
> 时间：2013-02-05T01:33:19.947
> 
> 标签：html, jsf, hyperlink

我需要使用`<h:outputText>`标签组件显示一些文本。有这样的要求，如果文本包含 URL，即`http//example.com.co`，我需要将其显示为链接。

例如，如果用户输入*Yo quiero www.google.com*我需要显示*Yo quiero [www.google.com](http://www.google.com)*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:45:31.310

您需要一个对字符串进行正则表达式替换的函数。你可以用`string.replaceAll()`这个。

您有多种选择来放置此功能。

1.  您可以在支持 bean 中创建一个方法。
2.  您可以创建自定义 jsf 标签（[示例](http://jdevelopment.nl/simple-java-based-jsf-custom-component/)）
3.  您可以创建自定义 el 函数（[示例](https://stackoverflow.com/a/7080174/1107109)）

没有 1 是最容易实现恕我直言。

# php - 什么环境变化导致 get_header 返回不同的输出？

> ID：14698753
> 
> 赞同：2
> 
> 时间：2013-02-05T01:33:22.400
> 
> 标签：php, get-headers

就像标题一样，我在两个不同的 PHP 版本上运行相同的脚本。

*   我的服务器 1- 5.2.17
*   我的服务器 2- 5.3.19

get_headers($url, 1);
$url 是带有 http 和 .co.uk 的 google（没有 www）——或者使用任何返回 404 的 url 不同输出的示例是：

我的服务器 1-

*   `[Server] => gws` [从标题中收集]

我的服务器 2-

*   [服务器] => 数组 [从标题中收集]

    ```
    (
        [0] => gws
        [1] => gws
    ) 
    ```

我假设服务器 2 遵循 301 的位置并将其添加到标题中，其中服务器 1 在数组中只有 301 标题。

所以服务器 2 将转到“ [http://google.co.uk](http://google.co.uk) ”（返回 301）；然后跟随它到“ [http://www.google.co.uk/](http://www.google.co.uk/) ”并将两个响应添加到相同的输出中。

我的问题是——是什么导致了这种变化？我检查了 PHP 频道日志，但看不到对 get_headers 的提及，所以我一定遗漏了一些东西。

如果您知道导致不同输出的原因，并且更好地知道如何恢复更改（无需更改回旧的 PHP 版本），我将不胜感激。我知道我可以使用 cURL，但我真的不想这样做。

完整的代码（没有验证等）

```
1.$address = ($_POST['address']);
2.$headerinfo = get_headers($url, 1);
$server = $headerinfo[Server]; 
```

*   在 PHP 5.2 中 - 如果我回显 $server 它会类似于“Apache”。

*   在 PHP 5.3 - 如果我回显 $server 它将是“数组”（如果它达到 301）。

最后，我计划将 $sever 存储在数据库中。我不能/不想将“数组”存储在那里。

谢谢。

# c# - AppBar 多显示器

> ID：14698755
> 
> 赞同：4
> 
> 时间：2013-02-05T01:33:41.997
> 
> 标签：c#, appbar, multiple-monitors

我制作了一个简单的 appBar，屏幕顶部只有一个标签，可以缩小桌面，但我无法让它出现在我的第二台显示器上。我一直在四处寻找，但我发现的一切都是针对 WPF 的。这些很可能是我犯了错误的地方，但是如果您需要查看任何其他代码，请告诉我。

```
private void InitializeComponent()
{
    this.ClientSize = new System.Drawing.Size(SystemInformation.WorkingArea.Width, -1);
    this.FormBorderStyle = System.Windows.Forms.FormBorderStyle.FixedToolWindow;
    this.Name = "MainForm";
    this.Text = "AppBar";
    this.Closing += new System.ComponentModel.CancelEventHandler(this.OnClosing);
    this.Load += new System.EventHandler(this.OnLoad);
    this.BackColor = Color.Green;
    this.Padding = new Padding(0, 0, 0, 0);
    Label label1 = new Label();
    label1.Text = "TEXT";
    label1.Width = 270;
    label1.Margin = new Padding(0,0,0,0);
    label1.Padding = new Padding(0,0,0,0);
    label1.TextAlign = ContentAlignment.MiddleCenter;
    label1.ForeColor = Color.White;
    label1.Font = new Font(FontFamily.GenericSansSerif, 12,FontStyle.Regular);
    label1.Location = new Point((SystemInformation.WorkingArea.Width - 270) / 2, 0);
    this.Controls.Add(label1);
}

private void ABSetPos()
{
    APPBARDATA abd = new APPBARDATA();
    abd.cbSize = Marshal.SizeOf(abd);
    abd.hWnd = this.Handle;
    abd.uEdge = (int)ABEdge.ABE_TOP;

    if (abd.uEdge == (int)ABEdge.ABE_LEFT || abd.uEdge == (int)ABEdge.ABE_RIGHT)
    {
        abd.rc.top = 0;
        abd.rc.bottom = SystemInformation.PrimaryMonitorSize.Height;
        if (abd.uEdge == (int)ABEdge.ABE_LEFT)
        {
            abd.rc.left = 0;
            abd.rc.right = Size.Width;
        }
        else
        {
            abd.rc.right = SystemInformation.PrimaryMonitorSize.Width;
            abd.rc.left = abd.rc.right - Size.Width;
        }

    }
    else
    {
        abd.rc.left = 0;
        abd.rc.right = SystemInformation.PrimaryMonitorSize.Width;
        if (abd.uEdge == (int)ABEdge.ABE_TOP)
        {
            abd.rc.top = 0;
            abd.rc.bottom = Size.Height;
        }
        else
        {
            abd.rc.bottom = SystemInformation.PrimaryMonitorSize.Height;
            abd.rc.top = abd.rc.bottom - Size.Height;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:37:25.883

您可以通过遍历`Screen.AllScreens`数组来使用不同的屏幕。例如，以下是获取第一个非主监视器的方法：

```
Screen nonPrimaryScreen = Screen.AllScreens.FirstOrDefault(x => !x.Primary); 
```

然后在您使用的任何地方`SystemInformation.WorkingArea`（始终使用主屏幕），您可以使用：

```
nonPrimaryScreen.WorkingArea 
```

假设`nonPrimaryScreen != null`……当然。

编辑：

与其重复代码，不如让它更通用：

```
public static Rectangle GetWorkingArea() {
    if (UseWantsItOnPrimaryScreen) {
        return SystemInformation.WorkingArea;
    }
    else {
        return Screen.AllScreens.FirstOrDefault(x => !x.Primary).WorkingArea;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-31T09:09:47.803

```
private Screen GetScreenObject(String Name)
{
    logger.Info(GlobalModulename + "@ ScreenList::looking for screen:"+Name);
    if ((Name == "Primary"))
    {
        bool ExpectedParameter = true;
        foreach (var screen in Screen.AllScreens)
        {
            // For each screen, add the screen properties to a list box.
            logger.Info(GlobalModulename + "@ ScreenList::("+screen.DeviceName.ToString()+")Primary Screen: " + screen.Primary.ToString());
            if (screen.Primary==ExpectedParameter)
            {
                return screen;
            }
        }
    }
    if ((Name == "Secondary"))
    {
        bool ExpectedParameter = false;
        foreach (var screen in Screen.AllScreens)
        {
            // For each screen, add the screen properties to a list box.
            logger.Info(GlobalModulename + "@ ScreenList::(" + screen.DeviceName.ToString() + ")Primary Screen: " + screen.Primary.ToString());
            if (screen.Primary == ExpectedParameter)
            {
                return screen;
            }
        }
    }

    // konkretni jmeno obrazovky tak jak je to v systemu
    try
    {
        foreach (var screen in Screen.AllScreens)
        {
            // For each screen, add the screen properties to a list box.
            logger.Info("UEFA_Core @ ScreenList::Device Name: " + screen.DeviceName);
            logger.Info("UEFA_Core @ ScreenList::Bounds: " + screen.Bounds.ToString());
            logger.Info("UEFA_Core @ ScreenList::Type: " + screen.GetType().ToString());
            logger.Info("UEFA_Core @ ScreenList::Working Area: " + screen.WorkingArea.ToString());
            logger.Info("UEFA_Core @ ScreenList::Primary Screen: " + screen.Primary.ToString());
            if (screen.DeviceName == Name) return screen;
        }

    }
    catch { }

    // podobne jmeno obrazovky tak jak je to v systemu
    try
    {
        foreach (var screen in Screen.AllScreens)
        {
            // For each screen, add the screen properties to a list box.
            logger.Info("UEFA_Core @ ScreenList::Device Name: " + screen.DeviceName);
            logger.Info("UEFA_Core @ ScreenList::Bounds: " + screen.Bounds.ToString());
            logger.Info("UEFA_Core @ ScreenList::Type: " + screen.GetType().ToString());
            logger.Info("UEFA_Core @ ScreenList::Working Area: " + screen.WorkingArea.ToString());
            logger.Info("UEFA_Core @ ScreenList::Primary Screen: " + screen.Primary.ToString());
            if (screen.DeviceName.Contains(Name)) return screen;
        }

    }
    catch { }

    logger.Info("UEFA_Core @ ScreenList::No screen found by name");
    return Screen.PrimaryScreen;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-18T10:27:51.807

```
 #region APPBAR

    [StructLayout(LayoutKind.Sequential)]
    struct RECT
    {
        public int left;
        public int top;
        public int right;
        public int bottom;
    }

    [StructLayout(LayoutKind.Sequential)]
    struct APPBARDATA
    {
        public int cbSize;
        public IntPtr hWnd;
        public int uCallbackMessage;
        public int uEdge;
        public RECT rc;
        public IntPtr lParam;
    }

    enum ABMsg : int
    {
        ABM_NEW = 0,
        ABM_REMOVE = 1,
        ABM_QUERYPOS = 2,
        ABM_SETPOS = 3,
        ABM_GETSTATE = 4,
        ABM_GETTASKBARPOS = 5,
        ABM_ACTIVATE = 6,
        ABM_GETAUTOHIDEBAR = 7,
        ABM_SETAUTOHIDEBAR = 8,
        ABM_WINDOWPOSCHANGED = 9,
        ABM_SETSTATE = 10
    }

    enum ABNotify : int
    {
        ABN_STATECHANGE = 0,
        ABN_POSCHANGED,
        ABN_FULLSCREENAPP,
        ABN_WINDOWARRANGE
    }

    enum ABEdge : int
    {
        ABE_LEFT = 0,
        ABE_TOP,
        ABE_RIGHT,
        ABE_BOTTOM
    }

    private bool fBarRegistered = false;

    [DllImport("SHELL32", CallingConvention = CallingConvention.StdCall)]
    static extern uint SHAppBarMessage(int dwMessage, ref APPBARDATA pData);
    [DllImport("USER32")]
    static extern int GetSystemMetrics(int Index);
    [DllImport("User32.dll", ExactSpelling = true,
        CharSet = System.Runtime.InteropServices.CharSet.Auto)]
    private static extern bool MoveWindow
        (IntPtr hWnd, int x, int y, int cx, int cy, bool repaint);
    [DllImport("User32.dll", CharSet = CharSet.Auto)]
    private static extern int RegisterWindowMessage(string msg);
    private int uCallBack;

    private void RegisterBar()
    {
        APPBARDATA abd = new APPBARDATA();
        abd.cbSize = Marshal.SizeOf(abd);
        abd.hWnd = this.Handle;
        if (!fBarRegistered)
        {
            uCallBack = RegisterWindowMessage("AppBarMessage");
            abd.uCallbackMessage = uCallBack;

            uint ret = SHAppBarMessage((int)ABMsg.ABM_NEW, ref abd);
            fBarRegistered = true;

            ABSetPos();
        }
        else
        {
            SHAppBarMessage((int)ABMsg.ABM_REMOVE, ref abd);
            fBarRegistered = false;
        }
    }

    private void ABSetPos()
    {

        APPBARDATA abd = new APPBARDATA();
        abd.cbSize = Marshal.SizeOf(abd);
        abd.hWnd = this.Handle;
        abd.uEdge = (int)ABEdge.ABE_TOP;

        if (abd.uEdge == (int)ABEdge.ABE_LEFT || abd.uEdge == (int)ABEdge.ABE_RIGHT)
        {
            abd.rc.top = this.GetScreenObject(ScreenName).Bounds.Top; //0;
            abd.rc.bottom = this.GetScreenObject(ScreenName).Bounds.Top + this.GetScreenObject(ScreenName).Bounds.Height; //SystemInformation.PrimaryMonitorSize.Height;
            if (abd.uEdge == (int)ABEdge.ABE_LEFT)
            {
                abd.rc.left = this.GetScreenObject(ScreenName).Bounds.Left;//0;
                abd.rc.right = Size.Width;
            }
            else
            {
                abd.rc.right = this.GetScreenObject(ScreenName).Bounds.Left + this.GetScreenObject(ScreenName).Bounds.Width; // SystemInformation.PrimaryMonitorSize.Width;
                abd.rc.left = abd.rc.right - Size.Width;
            }

        }
        else
        {
            abd.rc.left = this.GetScreenObject(ScreenName).Bounds.Left; //0;
            abd.rc.right = this.GetScreenObject(ScreenName).Bounds.Left+this.GetScreenObject(ScreenName).Bounds.Width; //SystemInformation.PrimaryMonitorSize.Width;
            if (abd.uEdge == (int)ABEdge.ABE_TOP)
            {
                abd.rc.top = this.GetScreenObject(ScreenName).Bounds.Top;  //0 nebo -1080                    
                abd.rc.bottom = Size.Height;
            }
            else
            {
                abd.rc.bottom = this.GetScreenObject(ScreenName).Bounds.Top + this.GetScreenObject(ScreenName).Bounds.Height; //SystemInformation.PrimaryMonitorSize.Height;
                abd.rc.top = abd.rc.bottom - Size.Height;
            }
        }

        // Query the system for an approved size and position. 
        SHAppBarMessage((int)ABMsg.ABM_QUERYPOS, ref abd);

        // Adjust the rectangle, depending on the edge to which the 
        // appbar is anchored. 
        switch (abd.uEdge)
        {
            case (int)ABEdge.ABE_LEFT:
                abd.rc.right = abd.rc.left + Size.Width;
                break;
            case (int)ABEdge.ABE_RIGHT:
                abd.rc.left = abd.rc.right - Size.Width;
                break;
            case (int)ABEdge.ABE_TOP:
                abd.rc.bottom = abd.rc.top + Size.Height;
                break;
            case (int)ABEdge.ABE_BOTTOM:
                abd.rc.top = abd.rc.bottom - Size.Height;
                break;
        }

        // Pass the final bounding rectangle to the system. 
        SHAppBarMessage((int)ABMsg.ABM_SETPOS, ref abd);

        // Move and size the appbar so that it conforms to the 
        // bounding rectangle passed to the system. 
        MoveWindow(abd.hWnd, abd.rc.left, abd.rc.top,
            abd.rc.right - abd.rc.left, abd.rc.bottom - abd.rc.top, true);
    }

    protected override void WndProc(ref System.Windows.Forms.Message m)
    {
        if (m.Msg == uCallBack)
        {
            switch (m.WParam.ToInt32())
            {
                case (int)ABNotify.ABN_POSCHANGED:
                    ABSetPos();
                    break;
            }
        }

        try
        {
            base.WndProc(ref m);
        }
        catch (Exception E) { }
    }

    protected override System.Windows.Forms.CreateParams CreateParams
    {
        get
        {
            CreateParams cp = base.CreateParams;
            cp.Style &= (~0x00C00000); // WS_CAPTION
            cp.Style &= (~0x00800000); // WS_BORDER
            //cp.ExStyle = 0x00000080 | 0x00000008 | 0x20; // WS_EX_TOOLWINDOW | WS_EX_TOPMOST  
            //cp.ExStyle &= 0x20;
            cp.ExStyle |= 0x00000008 | 0x00000080;
            //cp.ExStyle &= 0x00000080 ; // WS_EX_TOOLWINDOW | WS_EX_TOPMOST  
            return cp;
        }
    }

    private void OnLoad(object sender, System.EventArgs e)
    {
        RegisterBar();
    }

    private void OnClosing(object sender, System.ComponentModel.CancelEventArgs e)
    {
        RegisterBar();
    }

    #endregion 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-26T01:02:46.413

您可以计算将 AppBar 移动到第二台显示器的正确公式，而无需使用`PrimaryMonitorSize`. 例如，对于第二台显示器上的左侧 AppBar，您可以使用以下命令：

```
if (abd.uEdge == (int)ABEdge.ABE_LEFT)
{
     abd.rc.left = SystemInformation.PrimaryMonitorSize.Width;
     abd.rc.right = SystemInformation.PrimaryMonitorSize.Width + Size.Width;
} 
```

# java - 为什么 JSTL c:set 声明会影响我的会话

> ID：14698758
> 
> 赞同：0
> 
> 时间：2013-02-05T01:34:36.837
> 
> 标签：java, jsp, jakarta-ee, servlets, jstl

我在我的单页中设置了许多 c:set 声明。我还将我的 roleId 设置为我的会话。现在，当我制作其他 c:set 时，我的会话角色 ID 受到了影响。我确认了这一点，因为我在我的页面中显示了我的会话 ID。登录后我的会话 ID 是正确的，但是当我刷新页面时，我的会话 ID 发生了变化。为什么？这是我的代码

```
<%@page import="request.RequestDAO"%>
<%@page import="request.RequestItems"%>
<%@include file="/WEB-INF/common/taglibs.jsp"%>
<%@ page import="message.MessageItems"%>
<%@ page import="message.NewMessageDAO"%>
<div id="menu-wrapper">

    <div id="menu">
        <span class="menu-header">Calendar</span>
        <div id="adminCalendar"></div>
    </div>

    <div id="menu">
        <span class="menu-header">Directories <%=((Long) session.getAttribute("role")).longValue()%> </span>
        <ul>
            <li><a href="${pageContext.request.contextPath}/directory/list-of-registered-organizations">Organization </a></li>
            <li><a href="${pageContext.request.contextPath}/directory/list-of-registered-medical-service">Medical Service</a></li>
            <li><a href="${pageContext.request.contextPath}/directory/list-of-registered-evacuation-center">Evacuation Centers</a></li>
            <li><a href="${pageContext.request.contextPath}/directory/list-of-registered-fire-suppression-group">Fire Suppression Groups</a></li>
            <li><a href="${pageContext.request.contextPath}/directory/list-of-registered-medical-facilities">Medical Facilities</a></li>
            <li><a href="${pageContext.request.contextPath}/directory/list-of-registered-rescue-organization">Rescue Organizations</a></li>
            <li><a href="${pageContext.request.contextPath}/directory/list-of-registered-agency">Agency</a></li>
            <li><a href="${pageContext.request.contextPath}/directory/list-of-registered-schools">Schools</a></li>
        </ul>
    </div>
    <c:set var="admin" scope="session" value='<%=((Long) session.getAttribute("role")).longValue()%>' />
    <c:if test="${admin == 121}">
        <div id="menu">
            <span class="menu-header">Registration</span>
            <ul>
                <li><a href="${pageContext.request.contextPath}/registration/organization-registry">Organization Registry </a></li>
                <li><a href="${pageContext.request.contextPath}/registration/emergency-medical-service">Emergency Medical Service Registry</a></li>
                <li><a href="${pageContext.request.contextPath}/registration/register-evacuation-center">Evacuation Centers Registry</a></li>
                <li><a href="${pageContext.request.contextPath}/registration/register-fire-suppression-group">Fire Suppression Group Registry</a></li>
                <li><a href="${pageContext.request.contextPath}/registration/register-medical-facilities">Medical Facilities Registry</a></li>
                <li><a href="${pageContext.request.contextPath}/registration/register-rescue-organizations">Rescue Organizations Registry</a></li>
                <li><a href="${pageContext.request.contextPath}/registration/agency-registration">Agency Registry</a></li>
                <li><a href="${pageContext.request.contextPath}/registration/school-registration">School Registry</a></li>

            </ul>
        </div>
    </c:if>

    <%
        long id = ((Long) session.getAttribute("userId")).longValue();
        MessageItems message = new NewMessageDAO().NewMessages(id);
        RequestItems NewRequest = new RequestDAO().NewRequests(id);
    %>

    <div id="menu">
        <span class="menu-header">User Option</span>
        <ul>
            <li><a href="${pageContext.request.contextPath}/registration/organization-registry">My Account</a></li>
            <li><a href="${pageContext.request.contextPath}/registration/emergency-medical-service">Change Password</a></li>
            <li><a href="${pageContext.request.contextPath}/message/inbox">My Messages

            <c:set var="role" scope="session" value='<%=message.getNewMessages()%>' />
            <c:if test="${role == 0}">
                <li><a href="${pageContext.request.contextPath}/message/inbox">My Messages<label></label></a></li>
            </c:if>
            <c:if test="${role != 0}">
                <li style="font-weight: bold"><a href="${pageContext.request.contextPath}/message/inbox">My Messages <label>(<%=message.getNewMessages()%>)
                    </label></a></li>
            </c:if>

            <li><a href="${pageContext.request.contextPath}/message/new-message">Send Message</a></li>

            <c:set var="role1" scope="session" value='<%=NewRequest.getNewRequest()%>' />
            <c:if test="${role1 == 0}">
                <li><a href="${pageContext.request.contextPath}/request/request-inbox">My Requests<label></label></a></li>
            </c:if>
            <c:if test="${role1 != 0}">
                <li style="font-weight: bold"><a href="${pageContext.request.contextPath}/request/request-inbox">My Requests <label>(<%=NewRequest.getNewRequest()%>)
                    </label></a></li>
            </c:if>
            <li><a href="${pageContext.request.contextPath}/request/new-request">Make Request</a></li>

            <li><a href="${pageContext.request.contextPath}/request/request-inbox">My Requests</a></li>

            <li><a href="${pageContext.request.contextPath}/action/add-user">Add user</a></li>
            <li><a href="${pageContext.request.contextPath}/action/view-all-user">View user</a></li>

        </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:41:54.470

从目前的代码中，我只能假设这是因为这一行

```
<c:set var="role" scope="session" value='<%=message.getNewMessages()%>' /> 
```

当您的页面再次运行时，来自 message.getNewMessages() 的值必须更改。

大概是由于`MessageItems message = new NewMessageDAO().NewMessages(id);`

但是如果没有这些类的代码，就不可能说出来。

# visual-studio-2010 - 在 Visual Studio 2010Installer 中编辑文件系统

> ID：14698765
> 
> 赞同：1
> 
> 时间：2013-02-05T01:35:16.303
> 
> 标签：visual-studio-2010, windows-installer

我正在尝试在用户的开始菜单中添加可执行文件的快捷方式。
StackOverflow 上有很多答案详细说明了如何做到这一点。

但是，所有人都说“在右侧窗格中右键单击以...”

所以我知道你们都有一个看起来像这样的界面：

![用于编辑文件系统的右侧窗格](../Images/b4ab4942d39006396b3decfe7ed068a6.png)

我没有右侧的面板 - 标题为“名称”，包含主要输出。
我已经浏览了我能找到的每个菜单选项来启用此窗格，但找不到它。

有人知道如何显示这个窗口吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T03:30:05.093

我想知道分离器是否一直被拖到右边。尝试折叠所有侧边菜单，例如解决方案/属性/工具箱等。以确保文件系统编辑器填充整个窗口，然后查看右侧是否可以看到拆分器。我还没有找到删除该面板的任何方法。您也可以尝试右键单击“文件系统”选项卡并让它浮动，然后使其全屏显示，然后查看拆分器是否可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-15T12:06:27.880

我遇到了同样的问题，试图找到另一个拆分器但找不到，通过使用“以管理员身份运行”命令打开 Visual Studio 2010 来获得第二个详细信息窗格。

# javascript - 如果已设置为主页，如何禁用按钮“makehomepage”？

> ID：14698767
> 
> 赞同：0
> 
> 时间：2013-02-05T01:35:20.913
> 
> 标签：javascript, html

在加载页面时，我想禁用一个按钮，如果我已经将主页设置为我的网站，则单击该按钮会将我的浏览器的主页设置为感兴趣的主页。

有人对此有任何想法吗？

目前我知道如何制作一个将我的主页设置为 www.myhomepage.com 的按钮，即见下面的脚本，但基本上我需要两件事：

*   如何检查我的主页是否已设置为 www.myhomepage.com
*   禁用按钮的脚本

http://www.myhomepage.com');" value="将此页面设置为您的主页！" />

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:45:17.643

我不相信这是可能的。DOM 不会加载或检测用户设置的主页，因此无法进行比较。

如果有人单击该按钮，您可以在此之后轻松禁用它，甚至设置一个 cookie 以在以后的访问中读取和比较。但是，如果用户手动设置主页，则无法检测到这一点。

# xslt - XSLT 1.0 试图将节点转换为小写以与字符串进行比较

> ID：14698768
> 
> 赞同：0
> 
> 时间：2013-02-05T01:35:31.440
> 
> 标签：xslt, translate, lowercase

我有一个名为 $SearchRecipe 的参数，它包含一个字符串，我总是将小写字符串传递给它。

我有一个 XML 文件，我正在使用我的 xslt 和 xml 文件中的一些数据示例进行访问：

```
<ARecipe>
    <RecipeNo>117</RecipeNo>
    <ItemName>Veggie Sausages with Beans and Chips</ItemName>
    <RecipeInfo>
        <Ingredients>Linda Mcartney Sausages(2 per serving), Beans (400g per serving), Chips(Handful), Random Chillis (up to you how much)</Ingredients>
        <Instructions>Put on fat fryer, insert chips and sausages. Put on wok, insert beans and add some random chillis etc. Heat beans and remove cooked Sausages and Chips. Place sausages and chips in tissue to remove excess oil. Place in a plate and serve warm.</Instructions>
        <RecipeType>Main</RecipeType>
        <Vegetarian>No</Vegetarian>
    </RecipeInfo>
</ARecipe> 
```

我正在运行一个查询来遍历所有 ItemName 节点并将其与我的字符串进行比较，它工作正常。例如，如果我将 V 放入字符串中，它与此 (ARecipe) 中的 ItemName 匹配，这将显示在我的 xslt 输出中。但是，如果我将 v 作为值传递，那么它不会带来这个特定的节点（ARecipe）。

我正在使用这些行来浏览 xml 文件：

```
<xsl:variable name="matchedRecipes"
     select="ARecipe[
           ($SearchType = 'Start' and starts-with($Test, $SearchRecipe)) or
           ($SearchType = 'Contains' and contains(ItemName, $SearchRecipe)) or
           ($SearchType = 'RecipeType' and 
                        contains(RecipeInfo/RecipeType, $SearchRecipe))
                      ]" />

  <xsl:if test="$SearchType = 'Start' or $SearchType = 'Contains'">
    <xsl:apply-templates select="$matchedRecipes"> 
```

到目前为止，我尝试过的是：

```
 <xsl:variable name="Test">
    <xsl:value-of select="translate('ARecipe/ItemName',$ucletters,$lcletters)"/>
    </xsl:variable> 
```

我是大多数语言等方面的新手，但我可以很容易地在 C# 中做这种事情，我与 xslt 有绝对的夜生活。此外，当我写这个寻求帮助的请求时，我已经做了几个小时的工作，最后一个小时我花了各种各样的方法来解决这个小写问题。因此，如果我没有正确询问，我想提前道歉。

如果您想查看更大的图片，我已在此处上传了我的代码：

[http://pastebin.com/w8AsiQRg](http://pastebin.com/w8AsiQRg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:20:49.837

你需要做这样的事情：

```
<xsl:variable name="SearchLc" select="translate($SearchRecipe, $ucletters, $lcletters)" />
<xsl:variable name="matchedRecipes"
     select="ARecipe[
           ($SearchType = 'Start' and 
              starts-with(translate(ItemName, $ucletters, $lcletters), $SearchLc)) or
           ($SearchType = 'Contains' and 
               contains(translate(ItemName, $ucletters, $lcletters), $SearchLc)) or
           ($SearchType = 'RecipeType' and 
                    contains(translate(RecipeInfo/RecipeType, $ucletters, $lcletters),
                                 $SearchRecipe))
                      ]" /> 
```

您可以提前获得搜索文本的小写版本，但随后您需要对选择 XPath 中的各个项目进行小写。

# javascript - 让IE7先加载javascript然后调用函数

> ID：14698773
> 
> 赞同：0
> 
> 时间：2013-02-05T01:35:51.920
> 
> 标签：javascript, internet-explorer-7

IE7 给出以下错误：'myapp' 未定义

```
//home.html
<script type="application/x-javascript" src="//www.mysite.com/myjs.js"></script>
<script type="text/javascript" charset="utf-8">
    new myapp.myfunc();
</script> 
```

javascript文件：

```
//myjs.js
myapp = {
    myfunc : function(){
        alert('hello world');
    }
}; 
```

*我知道有很多方法可以重写 home.html 上使用的代码，但我想在不改变的情况下完成这项工作。我找到了一个结构相似且没有 JS 错误（IE7、IE6）的工作示例。[https://google-developers.appspot.com/custom-search-ads/docs/sample](https://google-developers.appspot.com/custom-search-ads/docs/sample)

编辑： < script > 代码将提供给外部客户端，所以我希望它尽可能简单。请参阅示例链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:25:08.330

[奥卡姆剃刀](http://en.wikipedia.org/wiki/Occam%27s_razor)建议 IE/MSHTML 不支持`script`带有`type="application/x-javascript"`. 这可能与它[`application/x-javascript`不是注册的 MIME 媒体类型有关，也没有必要](https://stackoverflow.com/a/7227303/855543)。

或者它与在该环境中`//www.mysite.example.com/myjs.js`不受支持的[URI 引用这一事实有关。](https://www.rfc-editor.org/rfc/rfc3986)改为使用完全限定的 URI `http://www.mysite.example.com/myjs.js`。（请使用注册的示例域作为示例。）

您还应该声明您打算用作变量的标识符：

```
var myapp = {
  …
}; 
```

如果您不这样做，则如果`myapp`文档中存在指定的元素，则可能会出现问题。在 JScript/MSHTML 中，标识符解析将在范围链中找到一个宿主对象，并将`myapp`其作为其属性。该属性的值将是对相应元素对象的引用，尝试覆盖该属性值将导致运行时错误。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T01:37:47.957

将事件处理程序添加到[正文的`Load`event](http://www.w3schools.com/jsref/event_onload.asp)。在该事件处理程序中，拨打您的`myapp.myfunc()`电话。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-05T02:01:18.537

每当您使您的代码可供消费时，您总是希望确保您是页面上的好公民。这意味着您不想创建不必要的全局变量，并确保您创建的全局变量足够独特。这就是为什么将代码包装在立即调用的函数表达式中是个好主意的原因。

此外，使用 javascript 完成整个操作通常更容易。这就是谷歌分析和 Facebook 插件加载代码的方式。

```
<script type="text/javascript">
(function() {
  var loadScript = function(src, callback) {
    var head = document.getElementsByTagName('head')[0];
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = src;
    // modern browsers
    script.onload = callback;
    // IE 6 & 7
    script.onreadystatechange = function() {
      if (this.readyState == 'complete') {
        callback();
      }
    }
    head.appendChild(script);
  };
  loadScript('path/to/myscript.js', function() {
     //script loaded
  });
})();
</script> 
```

# c# - SelectSingleNode，如何使用字符串变量编写 xpath 查询？

> ID：14698774
> 
> 赞同：0
> 
> 时间：2013-02-05T01:36:05.807
> 
> 标签：c#, xml, xmldocument, msxml, selectsinglenode

您好我有使用不同命名空间的 xml 文件（实际上是 msbuild 文件）

```
<?xml version="1.0" ?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup Condition="'$(key)'=='1111'">
          <Key1>Value1</Key1>
          <Key3>Value3</Key3>
    </PropertyGroup>
    <PropertyGroup Condition="'$(key)'=='2222'">
          <Key2>Value2</Key2>
          <Key4>Value4</Key4>
    </PropertyGroup>
</Project> 
```

我试图获得“钥匙”的价值。但问题是子节点（键）是在 c# 代码中动态决定的。所以我不能只将 childname 附加到 xpath 查询。但我有一个具有子节点名称的字符串变量

```
XmlDocument xml = new XmlDocument();
xml.Load("ref.props");        
XmlNamespaceManager nsmgr = new XmlNamespaceManager(xml.NameTable);
nsmgr.AddNamespace("ms", "http://schemas.microsoft.com/developer/msbuild/2003");

XmlNode platform_node

 = xml.SelectSingleNode("/ms:Project/ms:PropertyGroup[contains(@Condition, '1111')]", nsmgr);

string child_node_name = get_name();
XmlNode child = platform_node.SelectSingleNode(???); 
```

那么，在获得正确的属性组之后，我应该如何编写 xpath 查询才能获得正确的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:01:08.383

如果您正在寻找子节点`"*"`可能会起作用。或者简单地通过[`XmlNode.ChildNodes`](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.childnodes%28v=vs.100%29.aspx)并抓取`Value`或获取所有子节点`InnerText`。

# javascript - jQuery 动画火柴人跳跃（动画顶部，然后底部）

> ID：14698775
> 
> 赞同：2
> 
> 时间：2013-02-05T01:36:39.113
> 
> 标签：javascript, jquery, html, jquery-animate

我正在做这种游戏。它只是一个在屏幕上“走动”的火柴人。如果您按“向上”，我想添加跳转。

这是我的代码（没有跳转）：

```
$(document).ready(function () {
            var sitting = $('#sitting'),
                image = $('#img');
            sitting.hide();
            $(document).keydown(function (e) {
                var keyCode = e.keyCode || e.which,
                    arrow = {
                        left: 37,
                        up: 38,
                        right: 39,
                        down: 40,
                        space: 32
                    };
                switch (keyCode) {
                case arrow.left:
                    if (!sitting.is(':visible')) {
                        image.add(sitting).stop(true).animate({
                            left: '-=60px'
                        }, 300, "linear");
                    }
                    break;
                case arrow.up:
                    break;
                case arrow.right:
                    if (!sitting.is(':visible')) {
                        image.add(sitting).stop(true).animate({
                            left: '+=60px'
                        }, 300, "linear");
                    }
                    break;
                case arrow.down:
                    break;
                case arrow.space:
                    image.fadeToggle(-100, function () {
                        sitting.fadeToggle(-100);
                    });
                    break;
                }
            });
            $('#sit').click(function () {});
        }); 
```

出于常识，我使用了排队动画并做到了这一点（我减少到只有 case arrow.up 因为它是唯一相关的部分）：

```
case arrow.up:
                    if (!sitting.is(':visible')) {
                        image.animate({
                            top: '+=10px'
                        }, 200, "linear");
                        image.animate({
                            bottom: '+=10px'
                        }, 200, "linear");
                    }
                    break; 
```

由于某种原因，它不起作用。怎么回事。这是[jsBin](http://jsbin.com/iwigeg/1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:46:09.457

`**[LIVE DEMO](http://jsbin.com/iwigeg/5/)**`

```
var sitting = $('#sitting'),
    image = $('#img'), // COMMA HERE 
    jumping = false ;  // ADD THIS 
```

并修改：

```
 case arrow.up:
    if (!sitting.is(':visible') && jumping===false) {
        jumping = true;
        image.stop().animate({
            top: '-=150px'
        }, 200, "linear", function(){
          $(this).animate({top: '+=150'}, 300,'linear', function(){
             jumping = false;
          });                 
        });
    }
    break; 
```

# http - netty 客户端 + keep-alive=true

> ID：14698780
> 
> 赞同：1
> 
> 时间：2013-02-05T01:37:09.067
> 
> 标签：http, asynchronous, client, netty

我对如何处理 netty (3.6.2.FINAL) 和 keep-alive=true 中的大量连接感到困惑。

对于作为服务器端连接器的 netty 客户端的工作，对另一个服务进行 http 调用，它希望始终保持连接打开以提高性能（keep-alive=true）。

问题：打开通道的数量有一个硬性限制，之后客户端在尝试打开通道时会挂起。为什么没有异常只是挂起？这是通道超时方面的设置吗？

我似乎无法理解 Netty 对工作线程内连接的整体管理：

*   使用阻塞的写入/读取客户端 ChannelHandler（http 请求/响应），如何检测连接池为空？

*   处理程序可以接收 ChannelEvent(s)，但没有关于连接池中可用的总数（无论如何它非常不确定）。如果通道未打开，考虑到它在工作线程中运行，处理程序启动打开一个新通道是否有意义？

*   但是如果连接池用完了，你怎么去清理一些空闲的连接（在处理程序内）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T01:31:07.427

我必须完全拆开我的处理程序，才能让客户端阻塞调用在不挂起的情况下正常工作。该问题主要是通过不保留处理程序中的本地通道引用来解决的。

现在我们只需将 ConnectionInterface#openConnection() [返回一个新的 ChannelFuture] 传递给共享的自定义 ChannelHandler#call( ConnectionInterface connectionInterface, HttpRequest request )。

最好在处理程序调用方法中打开通道，并在通道.write（x）之前传递该通道以及对其状态的检查，如果！channel.isWritable（）则回收通道（来自新的客户端连接，例如ConnectionInterface #openConnection()) 并重试写入。甚至不需要关闭通道（它在池中处理）。

只需用 500 个线程 / 5000 个请求运行它，它就成功了。

# php - 如何使用 preg_match 更改 URL 的方案？

> ID：14698781
> 
> 赞同：0
> 
> 时间：2013-02-05T01:37:14.227
> 
> 标签：php, regex

> **可能重复：**
> [如果 URL 中不存在 http://，如何添加它？](https://stackoverflow.com/questions/2762061/how-to-add-http-if-its-not-exists-in-the-url)

假设我想匹配一个可能包含或不包含`http://`的URL `https://`。当我更换它时，如果它在那里，我想`https://`在前面有，但如果它是`http://`或者什么都没有，我想`http://`在一开始就拥有。

我不知道如何用 preg_match 表达式来解决这个问题，或者对于非 PHP 倾向，一个搜索和替换 PHP 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:39:23.347

您可以使用[`preg_replace_callback`](http://php.net/preg_replace_callback), 并编写一个函数来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T01:56:48.147

如果你想要一个正则表达式解决方案，这样的东西应该可以工作。

`preg_replace('|^(?:http(s)?://)?(.+)$|', 'http\\1://\\2', $url);`

虽然我可能会使用[parse_url](http://php.net/manual/en/function.parse-url.php)并将其重新组合在一起。

# bash - 在 bash 脚本中使用 if 和布尔函数：如果函数返回 true 时条件评估为 false

> ID：14698783
> 
> 赞同：6
> 
> 时间：2013-02-05T01:37:21.873
> 
> 标签：bash, function

```
is_dir_empty(){

    对于“$1”中的文件
    做
        如果 [ "$file" != "$1" ]; 然后
            返回 0
        菲
    完毕
    回声“返回1”
    返回 1
}

文件="/home/tmp/*.sh"

如果 is_dir_empty "$file"; 然后
    回声“空”
否则回显“不为空”
菲

```

它输出

```
返回 1
不是空的

```

所以 is_dir_empty 返回 1 但如果条件以某种方式评估为假......为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T01:47:33.263

因为 shell 脚本遵循 Unix 约定，期望实用程序成功返回零，失败返回非零，所以布尔条件被反转。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T01:53:12.817

Glob 不会在双引号中展开，因此您总是在与文字值进行比较`/home/tmp/*.sh`。在 for 循环中取消引用`$1`，它会将单词拆分和 glob 扩展为 .sh 文件列表（[此在线工具](http://shellcheck.net)会自动指出这一点）。

此外，与 C 不同，零被认为是成功和非零失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T07:18:02.923

您可以通过以下方式检查目录是否为空：

```
[ "$(ls -A /path/to/directory)" ] && echo "Not Empty" || echo "Empty" 
```

# ruby-on-rails - 强制 Mongoid 在销毁模型时遵守“跳过”标准

> ID：14698784
> 
> 赞同：1
> 
> 时间：2013-02-05T01:37:22.137
> 
> 标签：ruby-on-rails, mongoid

在[Mongoid querying 的文档中](http://mongoid.org/en/mongoid/docs/querying.html)，声称 Criteria#destroy 将遵守“跳过”和“限制”标准。我还没有发现这种情况，我想知道我是否遗漏了什么。

这是我正在运行的查询：

```
Vehicle.where(location_id: id).order(:mileage.asc).skip(100).destroy 
```

我的目的是在按里程排序时销毁除附在某个位置的前 100 条车辆记录之外的所有车辆记录。上面的行在执行时会删除连接到某个位置的所有车辆。

我在使用 Mongoid 2.4.12 的 Rails 应用程序中运行它

谢谢！

# c - 如何在没有 C 本机编译器的情况下创建 C 编译器

> ID：14698786
> 
> 赞同：5
> 
> 时间：2013-02-05T01:37:30.783
> 
> 标签：c, assembly, compiler-construction

这是一个简单的问题。如果编译 C 编译器需要一个 C 编译器......也许直接用汇编代码？也许内核提供了将 C 转换为汇编程序并创建升级基础设施的基本工具？这也是一个愚蠢的问题，但我真的很感兴趣如何从 0 设计一个操作系统（不是我）来与 CPU 和内存交互。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T01:42:08.467

# 自举

如果您想查找它，这来自短语“通过您的引导来提升自己”。自举是一个简单的过程，但需要大量工作。

1.  用另一种语言编写 C 编译器。

2.  用 C 编写一个 C 编译器。

3.  使用步骤#1 中的编译器来编译步骤#2 中的编译器。

其他一些编译器必须引导，而不仅仅是 C 的编译器。例如，必须使用[GHC来编译自身。](http://www.haskell.org/ghc/)

请注意，仅当以下两个都为真时，才需要引导：

1.  您正在发明一种新语言，因此没有现有的编译器。

2.  您想用您正在编译的语言编写编译器。

这与操作系统无关。如果您正在设计一个操作系统，那么您已经有足够的工作要做了。如果您的新操作系统还没有 C 编译器，您可以从不同的操作系统交叉编译编译器。工作量要少得多——可能是几个小时或几天，而不是几个月或几年。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T01:40:41.427

听起来这是Tiny C 编译器`tcc`( [http://bellard.org/tcc/ ) 的任务。](http://bellard.org/tcc/)

它是我所知道的最小的 C 编译器，一旦你移植它就可以编译一个更大的编译器，并且有许多关于如何将它移植到自定义系统的指南。

# c# - 如何在 XML 中表示 \r 或 \n 或 \t 并使用 XmlDocument 正确读取它们

> ID：14698794
> 
> 赞同：4
> 
> 时间：2013-02-05T01:37:47.580
> 
> 标签：c#, xml

例如：

```
<codes>\n\r\t</codes> 
```

当我读取字符串中的节点“代码”时，它应该包含 3 个字符`'\n'`, `'\r'`，`'\t'`就好像它是`s="\n\r\t";`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-05T01:42:53.563

您可以使用十六进制字符实体：

```
<codes>&#xA;&#xD;&#x9;</codes> 
```

# hadoop - 训练 Mahout 解释数据

> ID：14698806
> 
> 赞同：0
> 
> 时间：2013-02-05T01:39:14.167
> 
> 标签：hadoop, mapreduce, mahout

我有一组属于客户满意度调查的问题。用户的回答采用 CSV 文件的形式。根据对问题的回答，布尔值 0 和 1 被分配给每个用户的响应，分别描述了糟糕和良好的体验。

我的任务是使用 Mahout 训练一个带有一组问题的模型，以便它能够分析和回答稍后提供给它的问题。而且由于输入数据很大，我必须结合使用 MapReduce。

不幸的是，我无法制作 Mahout 的头部和尾部，也不知道如何进行。有人可以指导我应该训练哪种模型以及我应该如何去做？

PS我对机器学习一无所知。所以请尽量解释行话，如果使用的话。

# security - Symfony2 - 还要求提供帐户的登录表单

> ID：14698814
> 
> 赞同：1
> 
> 时间：2013-02-05T01:40:34.950
> 
> 标签：security, symfony

我正在用 symfony2.1 开发一个网站，它的要求之一是用户名有一个与之关联的帐户，所以在登录表单中我要求三个字段：帐户、用户名和密码。

我已经修改了表单，但我需要修改 login_check 以考虑新字段（帐户），但我找到的唯一文档假定用户名始终是唯一的，但在我的情况下，我可以有一个重复的用户名：

帐户：companya 用户名：admin

帐户：companyb 用户名：admin

```
#security.yml
form_login:
    check_path: /user/login_check
    login_path: /user/login 
```

有什么想法可以实现吗？

* * *

更新：

我在这个[论坛帖子](http://forum.symfony-project.org/viewtopic.php?f=23&t=38026)中找到了答案，我还需要实现 AbstractAuthenticationListener 和新令牌来处理新字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:39:35.777

如果您有框架提供的“标准方式”未涵盖的需求，您有两种方法：

1.  自己做：跳过内置的安全组件并自己实现一些东西。最后，您始终可以创建一个“普通”表单，自己编写逻辑代码，然后设置会话或 cookie。
2.  修改安全组件。您需要了解它是如何工作的，然后深入研究[User Providers](http://symfony.com/doc/current/cookbook/security/custom_provider.html)和[Authentication Providers](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html)。查看[文档安全部分中的说明书](http://symfony.com/doc/current/cookbook/security/index.html)。

如果你“想做正确的事”，我会选择第二名，如果你只想完成工作，我会选择第一名。

# frameworks - 带有 Play 2 配置的 ElasticSearch

> ID：14698815
> 
> 赞同：0
> 
> 时间：2013-02-05T01:40:38.047
> 
> 标签：frameworks, playframework, playframework-2.0, elasticsearch

我正在尝试将 ElasticSearch 模块 ( [https://github.com/cleverage/play2-elasticsearch](https://github.com/cleverage/play2-elasticsearch) ) 与我的 Play 2 应用程序一起使用。在自述文件中，它说我应该将以下内容添加到我的 application.conf 中：

```
 ## define local mode or not
elasticsearch.local=false

## list clients
elasticsearch.client="192.168.0.46:9300"
# ex : elasticsearch.client="192.168.0.46:9300,192.168.0.47:9300" 
```

什么是本地模式？我的客户 URL 应该是什么？我找不到有关这些选项应该是什么的任何信息。使用我当前的选项，我得到一个 NoNodeAvailableException。

有人建议：

```
elasticsearch.local=false elasticsearch.client=mynode1:9200,mynode2:9200 
```

但是 mynode1 和 mynode2 是什么？它不适用于我的应用程序。任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:51:13.583

什么是本地模式？

> 如果 elaticsearch.local=true，则在您的应用程序中启动一个弹性搜索节点（嵌入式）

我的客户 URL 应该是什么？

> 这是您的主机：端口，但端口是您的弹性搜索节点上定义的 tcp 传输。默认情况下，端口从 9300 开始（[http://www.elasticsearch.org/guide/reference/modules/transport.html](http://www.elasticsearch.org/guide/reference/modules/transport.html)）

我找不到有关这些选项应该是什么的任何信息。使用我当前的选项，我得到一个 NoNodeAvailableException。

> 我认为您的端口号有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:04:01.067

mynode1 和 mynode2 是弹性搜索节点。

您是否有任何 Elasticsearch 节点正在运行？在哪个 IP 地址上？

您能否尝试使用 curl 在这些节点上进行连接，例如：

```
curl localhost:9200 
```

或者

```
curl YOURIPADDRESS:9200 
```

如果其中一项成功，则按照 Nicolas Boire 之前所写的那样，使用 YOURIPADDRESS:9300 配置您的游戏应用程序。如果没有人成功，请检查您之前是否安装了 Elasticsearch 并启动了它。

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-26T14:49:10.657

我刚刚遇到了同样的问题，请确保您尊重表格中写的版本要求：[https ://github.com/cleverage/play2-elasticsearch](https://github.com/cleverage/play2-elasticsearch)

一开始，我设置了最新版本的插件`0.8.1`，但我的 ElasticSearch 版本是`1.0.2`. 通过使用 version 启动 ES `0.9.13`，它起作用了。

# ssis - 事实表更新与缓慢变化的维度

> ID：14698826
> 
> 赞同：3
> 
> 时间：2013-02-05T01:41:57.273
> 
> 标签：ssis, ssas, data-warehouse, etl

搜索关键字有点棘手，因此如果存在此问题，我深表歉意。

假设我有一个标准类型 2 缓慢变化的维度，使用 Startdate 和 Enddate 列建模。Enddate 为 NULL 的记录是维度记录的当前版本。

我知道当我检测到从源数据中插入的事实表时，这非常简单。基于匹配业务键和 Enddate = NULL 的维度记录，新的事实表记录被简单地插入映射到最新的维度记录。

当源系统中的度量值有更新时，我很难弄清楚我的事实表中的更新，而不是插入。看来我只有要加入的业务密钥，事实表中的现有记录可能指向以前版本的维度记录。我不确定如何从维度中获取正确的代理键并执行事实表更新。

如果需要，我可以提供更多细节。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T02:19:39.217

您在源表上有任何日期`insert`或日期吗？`create`你可以用它来做

```
select * from dim where src_dt 
between dim.startdate and dim.enddate and keys = src.keys 
```

并返回正确的维度行。如果您使用的是 SCD。

当您进行查找时，您应该使用日期和自然键来获取正确的维度行，而不是为插入和更新选择最新的暗淡行。

# ruby-on-rails - 视图中的 Ember 局部变量

> ID：14698831
> 
> 赞同：0
> 
> 时间：2013-02-05T01:42:25.553
> 
> 标签：ruby-on-rails, json, ember.js

所以在 Ember 中，如果我有一个名为“foos”的模型 - 它会加载一个带有 data-template-name="foos" 的模板，但是当我加载 1“foo”时我不确定如何从屏幕上擦除“foos” " 以及我不确定如何在控制器中的实例变量（例如@foos）执行@foos.length。对于我想做的其他一些事情。目前，如果我调用 foos.isLoaded 以及调用 foo #4，我的视图不会加载它会将视图附加到页面。但不重绘视图。

我只是不知道如何弄清楚我猜默认的东西是什么样的。

我的控制器东西-路由器

```
App.Router.map(function(){
    this.resource('records', function(){
        this.resource('record', {path: ':record_id'});
    });
});

App.FoosRoute = Ember.Route.extend({
    model: function() {
        return App.Foo.find();
    }
});

// Controller
App.FoosController = Ember.ArrayController.extend({
    itemController: 'record'
});

App.FooController = Ember.ObjectController.extend({
    fullName: function() {
        return this.get('firstName') + ' ' + this.get('middleName') + ' ' + this.get('surname') + ' ' + this.get('suffix')
    }.property('firstName', 'middleName', 'surname', 'suffix')
})

// Model
App.Store = DS.Store.extend({
    revision: 11,
    adapter: 'DS.RESTAdapter'
});

App.Foo = DS.Model.extend({
    firstName: DS.attr('string'),
    middleName: DS.attr('string')
     .....
}) 
```

我的看法：

```
<script type="text/x-handlebars" data-template-name="application">
  {{ outlet }}
</script>

<script type="text/x-handlebars" data-template-name="foos">
  <div class="one_half">
    <h2>Search</h2>
    form here....
  </div>
  <div class="one_half">
    <div id="smallMap">
      map
    </div>
  </div>
  <div id="foos">

    <table>
      <tr>
        <th>Name</th>
        <th>Birth</th>
        <th>Death</th>
      </tr>

      {{#each foo in controller}}
      {{#if foo.isLoaded}}
      <tr>
        <td>{{#linkTo "foo" foo}} {{foo.fullName}} {{/linkTo}}</td>
        <td>{{#linkTo "foo" foo}} {{foo.birthMonth}} {{#if foo.birthMonth}}/{{/if}}{{foo.birthDay}} {{#if foo.birthDay}}/{{/if}}{{foo.birthYear}} {{/linkTo}}</td>
        <td>{{#linkTo "foo" foo}}{{foo.deathMonth}}{{#if foo.deathMonth}}/{{/if}}{{foo.deathDay}}{{#if foo.deathDay}}/{{/if}}{{foo.deathYear}}{{/linkTo}} {{foo.trAlt}}</td>
      </tr>
      {{else}}
      <tr>
        <td colspan="3"  class="loading">Records are loading</td>
      </tr>
      {{/if}}
      {{/each}}
    </table>

  </div>

  {{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="foo">
  <h3>A Record</h3>
  {{id}}
  {{firstName}}
</script> 
```

目前它不会杀死视图并引入新视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T03:07:24.197

嗯 - 这里发生了很多事情，试图为你指明正确的方向。

> 所以在 Ember 中，如果我有一个名为“foos”的模型 - 它将加载一个带有 data-template-name="foos" 的模板

不完全是。约定是使用同名，但是ember不加载基于模型的模板。如果有的话，情况恰恰相反。你最好的选择通常是从模板开始，然后再回到模型层。所以在这种情况下，让我们从 3 个模板开始 - application、foo 和 foos：

```
<script type="text/x-handlebars" data-template-name="application">
  <h1>Foo App</h1>
  {{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="foos">
  <h3>All Foos:</h3>
  <ul>
  {{#each controller}}<li>{{fullName}}</li>{{/each}}
  </ul>
</script>

<script type="text/x-handlebars" data-template-name="foo">
  <h3>Foo Details:</h3>
  <p>{{fullName}}</p>
</script> 
```

> 但是，当我加载 1 个“foo”时，我不确定如何从屏幕上擦除“foos”

当路由改变时，Ember 将负责渲染适当的视图。使这成为可能的一种方法是向您的应用程序添加链接。例如，修改 foos 模板，使每条记录都是一个链接，并添加一个 Show All 链接到详细信息页面。

```
<script type="text/x-handlebars" data-template-name="foos">
  <h3>All Foos:</h3>
  <ul>
  {{#each controller}}
   <li>{{#linkTo "foo" this}}{{fullName}}{{/linkTo}}</li>
  {{/each}}
  </ul>
</script>

<script type="text/x-handlebars" data-template-name="foo">
  <h3>Foo Details:</h3>
  <p>{{fullName}}</p>
  <p>{{#linkTo foos}}Show all{{/linkTo}}</p>
</script> 
```

> 以及我不确定如何让控制器中的实例变量（例如@foos）为我想做的其他一些事情执行@foos.length

不知道你在做什么。@foos 不是实例变量，除非您使用的是 coffeescript 并且真正的意思是 this.foos。

> 目前，如果我调用 foos.isLoaded 以及调用 foo #4，我的视图不会加载它会将视图附加到页面。但不重绘视图。

对。调用 foos.isLoaded 只是告诉您模型是否已加载，它与视图无关。调用 foo #4 是什么意思？似乎您引用的代码可能未包含在您的 SO 帖子中。

> 我只是不知道如何弄清楚我猜默认的东西是什么样的。

好的。我已经对您尝试做的事情进行了一些猜测，并创建了一个工作示例。下面的代码，或者在 jsbin 上查看这个[工作示例](http://jsbin.com/iyijaf/4/edit)

首先，我添加了一个应用程序定义。然后将您的路线更改为`foos`而不是`records`. 在这种情况下也不需要嵌套路由。

```
App = Em.Application.create({});

App.Router.map(function(){
  this.route('foos', {path: '/'});
  this.resource('foo',{path: '/foos/:foo_id'});
}); 
```

`FooRoute`，`FoosController`并且`FooController`按原样正常。

```
App.FoosRoute = Ember.Route.extend({
    model: function() {
        return App.Foo.find();
    }
});

// Controller
App.FoosController = Ember.ArrayController.extend({
    itemController: 'foo'
});

App.FooController = Ember.ObjectController.extend({
    fullName: function() {
        return this.get('firstName') + ' ' + this.get('middleName') + ' ' + this.get('surname') + ' ' + this.get('suffix');
    }.property('firstName', 'middleName', 'surname', 'suffix')
}); 
```

添加了缺少的属性`App.Foo`

```
App.Foo = DS.Model.extend({
    firstName: DS.attr('string'),
    middleName: DS.attr('string'),
    surname: DS.attr('string'),
    suffix: DS.attr('string')
}); 
```

切换到`DS.FixtureAdapter`并添加 4 个夹具记录来模拟您的 API 可能返回的内容

```
App.Store = DS.Store.extend({
  revision: 11,
  adapter: DS.FixtureAdapter
});

App.Foo.FIXTURES = [
  {id: 1, firstName: 'Michael', middleName: 'Paul'},
  {id: 2, firstName: 'Jennifer', middleName: 'Lyn'},
  {id: 3, firstName: 'Sophia', middleName: 'Marie'},
  {id: 4, firstName: 'Greta', middleName: 'Fae'}
]; 
```

# c# - 当站点位于多台服务器上时，每分钟运行自动化任务的最佳方式

> ID：14698834
> 
> 赞同：5
> 
> 时间：2013-02-05T01:42:53.190
> 
> 标签：c#, asp.net, iis, windows-services, automation

我需要设置一个每分钟运行一次并在队列中发送电子邮件的自动化任务。我正在使用 ASP.NET 4.5 和 C#。目前，我使用从 global.asax 开始的调度程序类，并使用缓存和缓存回调。我读过这会导致几个问题。

我这样做的原因是因为这个应用程序在多个负载平衡的服务器上运行，这允许我在一个地方执行，即使一个或多个服务器脱机，代码也会运行。

我正在寻找一些方向来使这更好。我读过关于 Quartz.NET 但从未使用过它。Quartz.NET 是否从应用程序调用方法？还是从 Windows 服务？或来自网络服务？

我还阅读了有关使用 Windows 服务的信息，但据我所知，这些服务直接安装到服务器上。问题是，无论有多少服务器在线并且不想复制它，我都需要执行任务。例如，如果我在服务器 1 和服务器 2 上设置了计划任务，它们将一起运行，因此会复制请求。但是，如果服务器 1 离线，我需要服务器 2 来运行任务。

关于如何在此处继续前进的任何建议，或者 global.asax 方法是多服务器环境的最佳方法吗？顺便说一句，Web 服务器正在运行带有 IIS 8 的 Win Server 2012。

编辑

在请求更多信息时，队列存储在数据库中。我还应该提一下，数据库服务器与 Web 服务器是分开的。有两台数据库服务器，但一次只运行一台。他们都从中读取一个中央存储，因此只有一个数据库实例。当一个数据库服务器出现故障时，另一个会联机。

话虽如此，将 Windows 服务部署到两个数据库服务器是否更有意义？这将确保一次只运行一个。

另外，你对从应用程序运行 Quartz.NET 有什么想法？正如 millimoose 所提到的，我不一定需要它在 Web 前端运行，但是，这样做可以让我不必将 Windows 服务部署到多台机器上，而且我认为这两种方式都不会产生性能差异。想法？

到目前为止，感谢大家的投入。如果需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-06T20:17:22.333

我必须解决您现在面临的确切问题。

首先，您必须意识到您绝对不能在 ASP.NET 中可靠地运行长时间运行的进程。如果从 global.asax 实例化调度程序类，则无法控制该类的生命周期。

换句话说，IIS 可能会决定随时回收承载您的类的工作进程。充其量，这意味着您的课程将被摧毁（您对此无能为力）。在最坏的情况下，你的班级会在工作中被杀。哎呀。

运行长期进程的适当方法是在机器上安装 Windows 服务。我会在每个网络盒子上安装该服务，而不是在数据库上。

Service 实例化 Quartz 调度程序。这样，您就知道只要机器启动，您的调度程序就可以保证继续运行。当需要运行作业时，Quartz 只需调用`IJob`您指定的类的方法。

```
class EmailSender : Quartz.IJob
{
    public void Execute(JobExecutionContext context)
    {
        // send your emails here
    }
} 
```

请记住，Quartz`Execute`在单独的线程上调用该方法，因此您必须小心线程安全。

当然，您现在将在多台机器上运行相同的服务。虽然听起来您对此感到担忧，但实际上您可以将其转化为积极的事情！

我所做的是在我的数据库中添加一个“锁定”列。当发送作业执行时，它通过设置锁定列来获取队列中特定电子邮件的锁定。例如，当作业执行时，生成一个 guid，然后：

```
UPDATE EmailQueue SET Lock=someGuid WHERE Lock IS NULL LIMIT 1;
SELECT * FROM EmailQueue WHERE Lock=someGuid; 
```

这样，您就让数据库服务器处理并发。该`UPDATE`查询告诉数据库将队列中的一封电子邮件（当前未分配）分配给当前实例。然后，您`SELECT`将锁定的电子邮件发送出去。发送后，从队列中删除电子邮件（或者您处理已发送的电子邮件），然后重复该过程，直到队列为空。

现在您可以在两个方向上进行缩放：

*   通过同时在多个线程上运行相同的作业。
*   由于这是在多台机器上运行的事实，您可以有效地在所有服务器上平衡您的发送工作。

由于锁定机制，您可以保证队列中的每封电子邮件只发送一次，即使多台机器上的多个线程都运行相同的代码。

* * *

*回应评论：*我最终得到的实现存在一些差异。

首先，我的 ASP 应用程序可以通知服务队列中有新电子邮件。这意味着我什至不必按计划运行，我可以简单地告诉服务何时开始工作。但是，这种通知机制很难在分布式环境中正确使用，因此只需每分钟左右检查一次队列就可以了。

您使用的时间间隔实际上取决于您的电子邮件传递的时间敏感性。如果需要尽快发送电子邮件，您可能需要每 30 秒或更短时间触发一次。如果不是那么紧急，您可以每 5 分钟检查一次。Quartz 限制了一次执行的作业数量（可配置），并且您可以配置如果错过触发器应该发生什么，因此您不必担心有数百个作业备份。

其次，我实际上一次锁定 5 封电子邮件，以减少数据库服务器上的查询负载。我处理大量事务，因此这有助于提高效率（服务和数据库之间的网络往返次数减少）。这里要注意的是，如果一个节点在发送一组电子邮件的过程中发生故障（无论出于何种原因，从异常到机器本身崩溃），会发生什么。您最终会在数据库中得到“锁定”的行，并且没有任何服务可以为它们服务。群体规模越大，这种风险就越大。此外，如果所有剩余的电子邮件都被锁定，则空闲节点显然无法处理任何事情。

至于线程安全，我的意思是[一般意义上](http://en.wikipedia.org/wiki/Thread_safety)的。Quartz 维护了一个线程池，因此您不必担心实际管理线程本身。

你必须小心你工作中的代码访问什么。根据经验，局部变量应该没问题。但是，如果您访问函数范围之外的任何内容，线程安全是一个真正的问题。例如：

```
class EmailSender : IJob {
    static int counter = 0;

    public void Execute(JobExecutionContext context) {
        counter++; // BAD!
    }
} 
```

此代码不是线程安全的，因为多个线程可能会尝试同时访问`counter`。

```
Thread A           Thread B
Execute()
                   Execute()
Get counter (0)
                   Get counter (0)
Increment (1)
                   Increment (1)
Store value
                   Store value

            counter = 1 
```

`counter` *应该*是 2，但是我们有一个非常难以调试的竞争条件。下次运行此代码时，可能会以这种方式发生：

```
Thread A           Thread B
Execute()
                   Execute()
Get counter (0)
Increment (1)
Store value
                   Get counter (1)
                   Increment (2)
                   Store value

            counter = 2 
```

...而您却在摸不着头脑，为什么这一次会奏效。

在您的特定情况下，只要您在每次调用时创建一个新的数据库连接`Execute`并且不访问任何全局数据结构，就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T18:44:15.423

您必须更具体地了解您的架构。电子邮件队列在哪里；在内存或数据库中？如果它们存在于数据库中，您可以有一个名为“处理”的标志列，当一个任务从队列中抓取一封电子邮件时，它只抓取当前未处理的电子邮件，并将处理标志设置为 true 对于它抓取的电子邮件。然后，您将并发问题留给数据库。

# php - 重写重定向到网络服务器页面的 url

> ID：14698837
> 
> 赞同：1
> 
> 时间：2013-02-05T01:43:38.687
> 
> 标签：php, apache, .htaccess, rewrite

我正在尝试获取一个带有查询字符串的页面以重定向到一个更好看的 url，然后获取该 url 并将其传输回原始查询字符串但不重定向（即不更改 url）目前我得到一个重定向循环（出于显而易见的原因）但我希望有一种方法可以阻止这种情况。

这是我的 htaccess 文件中的代码

```
#rewrite search querystring
    #/search/'apartment'/2_bedrooms/price_0-500000/town_W4/development_18,SW5/
        RewriteRule ^search/([^/]+)/([^/]+)_bedrooms/price_([^/]+)-([^/]+)/town_([^/]+)/development_([^/]+) /search.php?propertytype=$1&bedrooms=$2&minprice=$3&maxprice=$4&location=$5&development=$6 [NC]

    RewriteCond %{QUERY_STRING} propertytype=([^/]+)&bedrooms=([^/]+)&minprice=([^/]+)&maxprice=([^/]+)&location=([^/]+)&development=([^/]+)
    /search/$1/$2_bedrooms/price_$3-$4/town_$5/development_$6 [R,L]
    RewriteRule ^(.*)$ /search/%1/%2_bedrooms/price_%3-%4/town_%5/development_%6? [R,L] 
```

所以它的意思是：用户已被带到：

[http://www.domain.com/search/?propertytype=dev&bedrooms=2&minprice=0&maxprice=10000000&location=W1&development=W1](http://www.domain.com/search/?propertytype=dev&bedrooms=2&minprice=0&maxprice=10000000&location=W1&development=W1)

此页面是服务器上数据来自的实际页面，但我希望用户看到。

[http://www.domain.com/search/dev/2_bedrooms/price_0-10000000/town_W1/development_W1/](http://www.domain.com/search/dev/2_bedrooms/price_0-10000000/town_W1/development_W1/)

是否可以在没有重定向循环的情况下执行此操作。
谢谢你的帮助

**编辑**我认为它可以用重写标志来完成，但我不确定，我对重写引擎很陌生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:07:19.363

*编辑*：

这是一个完整的（有效的）解决方案：

```
RewriteEngine On

# User gets here:
# http://localhost/search/?propertytype=dev&bedrooms=2&minprice=0&maxprice=10000000&location=W1&development=W1
# He is explicit redirected to here:
# http://localhost/search/dev/2_bedrooms/price_0-10000000/town_W1/development_W1/
# Internally, apache calls this:
# http://localhost/search.php?propertytype=dev&bedrooms=2&minprice=0&maxprice=10000000&location=W1&development=W1

RewriteRule ^search/([^/]+)/([^/]+)_bedrooms/price_([^/]+)-([^/]+)/town_([^/]+)/development_([^/]+) search.php?propertytype=$1&bedrooms=$2&minprice=$3&maxprice=$4&location=$5&development=$6 [NC,PT]

RewriteCond %{QUERY_STRING} propertytype=([^/]+)&bedrooms=([^/]+)&minprice=([^/]+)&maxprice=([^/]+)&location=([^/]+)&development=([^/]+)
RewriteRule ^search/(.*)$ /search/%1/%2_bedrooms/price_%3-%4/town_%5/development_%6/? [R,L] 
```

它假定您将 .htaccess 放在服务器根目录中，并且根目录中也有一个文件 search.php。

*原来的：*

我认为您可以在第一条规则中使用`PT`和`QSA`重写规则标志（[http://httpd.apache.org/docs/current/rewrite/flags.html ）](http://httpd.apache.org/docs/current/rewrite/flags.html)

用于`PT`服务器端重定向（它不会更改用户/浏览器的 URL，但会更改您的服务器端脚本）

`QSA`如果您想在执行此重定向时携带查询，请使用

您可以将所有不针对现有文件的请求重定向到特定的 php 脚本，例如：

> RewriteEngine On
> RewriteCond %{REQUEST_FILENAME} !-f
> RewriteRule ^(.*)$ index.php?url=$1 [PT,QSA]

# android - findViewById 在第二次调用时返回 null

> ID：14698838
> 
> 赞同：0
> 
> 时间：2013-02-05T01:43:45.387
> 
> 标签：android

我创建了一个包含项目列表的 ListView，每个项目都有自己的删除按钮。

我已经覆盖了 ArrayAdapter 中的 getView 方法，并将处理程序附加到删除按钮。

问题是，getView 方法被调用了两次。第二次，v.findViewById(DeleteButton) 调用返回 null。我检查了视图，并且 ImageButton 存在于层次结构中，但 Id 为 0。

谁能解释为什么会这样？

**ManualFragment.java**

```
public class ManualFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            final Bundle savedInstanceState) {
        View view = inflater
                .inflate(R.layout.fragment_manual, container, false);
        Button addButton = (Button) view.findViewById(R.id.AddButton);
        ListView listView = (ListView) view.findViewById(R.id.ListView);
        final List<String> items = new ArrayList<String>();
        final ArrayAdapter<String> adapter = new ArrayAdapter<String>(
                getActivity(), R.layout.list_item, R.id.TextItem, items) {
            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                View v = convertView;
                if (v == null) {
                    LayoutInflater vi = (LayoutInflater) ManualFragment.this.getLayoutInflater(savedInstanceState);
                    v = vi.inflate(R.layout.list_item, null);
                }

                TextView time = (TextView) v.findViewById(R.id.TextItem);
                time.setText(items.get(position));
                ImageButton delete = (ImageButton) v
                        .findViewById(R.id.DeleteButton);
                //THIS LINE THROWS A NULLREF ON SECOND CALL
                delete.setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        ImageButton deleteButton = (ImageButton) v;
                        items.remove(deleteButton.getId());
                        notifyDataSetChanged();
                    }
                });
                delete.setId(position);

                return v;
            }
        };
        listView.setAdapter(adapter);
        final EditText addText = (EditText) view.findViewById(R.id.AddText);
        addButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                String value = addText.getText().toString();
                if (!"".equals(value)) {
                    items.add(value);
                    adapter.notifyDataSetChanged();
                    addText.setText("");
                }
            }
        });

        return view;
    }
} 
```

**list_item.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dp"
        android:focusable="false" >

        <TextView
            android:id="@+id/TextItem"
            android:layout_width="267dp"
            android:layout_height="match_parent"
            android:layout_weight="0.89"
            android:focusable="false"
            android:gravity="center_vertical"
            android:text="Item"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <ImageButton
            android:id="@+id/DeleteButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@null"
            android:focusable="false"
            android:src="@drawable/delete" />

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T01:46:28.637

你正在设置它

```
delete.setId(position) 
```

我想你想用位置标记按钮

```
delete.setTag(position) 
```

# html - 内容占据页眉和页脚之间的所有空间

> ID：14698839
> 
> 赞同：0
> 
> 时间：2013-02-05T01:43:47.977
> 
> 标签：html, css

我的简单布局包含页眉、主要部分和页脚。页脚被推到页面底部。我希望主要部分占据页眉和页脚之间的所有空间。

这是我所做的：http: [//jsfiddle.net/5d3m9/](http://jsfiddle.net/5d3m9/)

HTML

```
<div class="wrap">
   <header>header</header>
   <div class="main">lorem2000 </div>
   <div class="clear"></div>
   <footer>@Copyright</footer>
</div> 
```

CSS

```
html, body {
    height: 100%;
}

body {
    margin: 0;
}

header {
    height: 150px;
    background: orange;
}
.wrap {
    min-height: 100%;
    position: relative;
    overflow: hidden;
}
.main {
    background: #00eaea;
    padding-bottom: 32767px;
    margin-bottom: -32767px;
}
.clear {
    height: 50px;
}
footer {
    background: #dadada;
    height: 50px;
    width: 100%;
    position: absolute;
    bottom: 0;
} 
```

有没有其他/更好的方法来实现这一目标？（没有`padding-bottom: 32767px; margin-bottom: -32767px;`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:50:00.750

将以下样式应用于`.main`

```
.main {
    background: #00eaea;
    top: 150px;
    bottom: 50px;
    position:absolute;
    width: 100%;
} 
```

[http://jsfiddle.net/5d3m9/1/](http://jsfiddle.net/5d3m9/1/)

# xna - 使用代码将内容导入 XNA 程序？

> ID：14698844
> 
> 赞同：0
> 
> 时间：2013-02-05T01:45:01.080
> 
> 标签：xna

XNA 程序是否有可能通过代码将资源（等：图像、声音）导入程序内容？例如，用户想在程序中添加一个新图像，XNA 程序的行为就像 Window 的 Add File 或 Copy File。如果可能，WinForm 应避免。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T12:40:58.620

```
 OpenFileDialog f = new OpenFileDialog();
         f.Filter = "PNG files (*.png)|*.png|All files (*.*)|*.*";
         f.Title = "Import Image"; 
         DialogResult result = f.ShowDialog(); // Show the dialog.   
         string file = "";
         if (result == DialogResult.OK) // Test result.
         {
            file = f.FileName;
         }
         else //If cancels, handle here
         Application.Exit();
         using (FileStream SourceStream = File.Open(file, FileMode.Open))
         {
             //Load the Texture here
             YourTexture = Texture2D.FromStream(GraphicsDevice, SourceStream);
         } 
```

它使用了一个简单的 WinForms OpenDialog Window，但如果您不想要 winforms，您可以自己制作并使用这部分来加载。

```
 using (FileStream SourceStream = File.Open(file, FileMode.Open))
       {
           //Load the Texture here
           YourTexture = Texture2D.FromStream(GraphicsDevice, SourceStream);
       } 
```

您可以通过执行保存 Texture2D Back

```
 using(Stream stream = File.Create(file)); 
        {
        texture.SaveAsPng(stream, texture.Width, texture.Height);
        } 
```

# android - Android 和蓝牙挂起 (startActivityForResult)

> ID：14698847
> 
> 赞同：1
> 
> 时间：2013-02-05T01:45:19.190
> 
> 标签：android, bluetooth, arduino

我正在尝试改进一个实际代码，该代码将蓝牙与 Android 手机连接到带有 Arduino（电子微控制器）的 Atmega。我可以接收数据并将数据发送到微控制器，但蓝牙需要在启动我的应用程序之前打开，否则它将挂起并关闭。我确实检查了蓝牙适配器并请求用户更改蓝牙状态，如果它处于关闭状态，但似乎程序继续并尝试在获得用户选择结果之前建立连接。我需要一些帮助来找到解决方案来阻止我的程序，直到用户输入他们的选择，甚至获得更好的解决方案。

我想说我对 Android 编程还是新手，我确实阅读了 Android 活动流程图。

我可以提供 logcat，但我检查了它，它清楚地表明我正在尝试使用蓝牙，即使它没有启用......

这是我的代码：

我要感谢任何可以为我指明正确方向的人

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    btnOn = (Button) findViewById(R.id.btnOn);                  // button LED ON
    btnOff = (Button) findViewById(R.id.btnOff);                // button LED OFF
    txtArduino = (TextView) findViewById(R.id.txtArduino);      // for display the received data from the Arduino

    mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();       // get Bluetooth adapter
    checkBTState(); 

    h = new Handler() {
        public void handleMessage(android.os.Message msg) {
            switch (msg.what) {
            case RECIEVE_MESSAGE:                                                   // if receive massage
                byte[] readBuf = (byte[]) msg.obj;
                String strIncom = new String(readBuf, 0, msg.arg1);                 // create string from bytes array
                sb.append(strIncom);                                                // append string
                int endOfLineIndex = sb.indexOf("\r\n");                            // determine the end-of-line
                if (endOfLineIndex > 0) {                                           // if end-of-line,
                    sbprint = sb.substring(0, endOfLineIndex);              // extract string
                    sb.delete(0, sb.length());                                      // and clear
                    txtArduino.setText("Data from Arduino: " + sbprint); 
                    Log.e(TAG, "Arduino"+sbprint);

               //Test string value     
                    if(sbprint.matches("-?\\d+(\\.\\d+)?")) {
                        try{

                        Float sensorReading = Float.parseFloat(sbprint);
                        Log.e(TAG, "Sensor value"+sensorReading);
                        }catch(NumberFormatException e){
                            Log.e(TAG, "No int format sorry",e);

                        }
                    }   
                    if(sbprint.matches("test")){

                        Log.e(TAG, "garbage");
                    }

                   ///////

                    btnOff.setEnabled(true);
                    btnOn.setEnabled(true); 
                }
                //Log.d(TAG, "...String:"+ sb.toString() +  "Byte:" + msg.arg1 + "...");
                break;
            }
        };
    };

public void onResume() {
    super.onResume();

    Log.d(TAG, "...onResume - try connect...");

    // Set up a pointer to the remote node using it's address.
    BluetoothDevice device = mBluetoothAdapter.getRemoteDevice(address);

    // Two things are needed to make a connection:
    //   A MAC address, which we got above.
    //   A Service ID or UUID.  In this case we are using the
    //     UUID for SPP.

    try {
        btSocket = createBluetoothSocket(device);
    } catch (IOException e) {
        errorExit("Fatal Error", "In onResume() and socket create failed: " + e.getMessage() + ".");
    }

    /*try {
      btSocket = device.createRfcommSocketToServiceRecord(MY_UUID);
    } catch (IOException e) {
      errorExit("Fatal Error", "In onResume() and socket create failed: " + e.getMessage() + ".");
    }*/

    // Discovery is resource intensive.  Make sure it isn't going on
    // when you attempt to connect and pass your message.
    mBluetoothAdapter.cancelDiscovery();

    // Establish the connection.  This will block until it connects.
    Log.d(TAG, "...Connecting...");
    try {
      btSocket.connect();
      Log.d(TAG, "....Connection ok...");
    } catch (IOException e) {
      try {
        btSocket.close();
      } catch (IOException e2) {
        errorExit("Fatal Error", "In onResume() and unable to close socket during connection failure" + e2.getMessage() + ".");
      }
    }

    // Create a data stream so we can talk to server.
    Log.d(TAG, "...Create Socket...");

    mConnectedThread = new ConnectedThread(btSocket);
    mConnectedThread.start();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:02:23.317

你的所有代码都在 onResume 中。onResume 将在活动启动时被调用，因此它几乎会立即执行。我没有看到任何应该延迟它的代码。如果您不想在用户选择某些东西之前尝试连接，那么所有连接代码都应该在按钮的单击处理程序或类似的东西中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:15:24.930

除了@GabeSechan 关于您的所有代码的评论之外`onResume()`，您还在主活动线程中调用蓝牙`connect()`，根据[本文档](http://developer.android.com/guide/topics/connectivity/bluetooth.html#ConnectingAsAClient)，这是一个阻塞调用，并且“应始终在与主活动线程分开的线程中执行”。

# c# - C#以另一种形式向datagridview添加一行

> ID：14698851
> 
> 赞同：1
> 
> 时间：2013-02-05T01:45:31.117
> 
> 标签：c#, datagridview, rows

我在尝试从一种形式传递信息时遇到困难，在这种形式中，用户输入大量员工数据并按下提交按钮，并且信息将作为添加行显示到 datagridview 表中。我能做些什么来解决这个问题？

我目前拥有的代码：

```
Form1:
  public partial class Form1 : Form
  {
    public Form1()
    {
        InitializeComponent();
    }

        private void getEmployeedata(Manager manager)
        {
            int age;
            int years;
            int salary;                

            manager.FirstName = firstnameBox.Text;
            manager.LastName = lastnameBox.Text;
            manager.Gender = genderBox.Text;
            manager.Title = titleBox.Text;
            manager.Exempt = exemptBox.Text;

            if (int.TryParse(ageBox.Text, out age))
            {
                manager.Age = age;

                if (int.TryParse(yearsBox.Text, out years))
                {
                    manager.Years = years;

                    if (int.TryParse(salaryBox.Text, out salary))
                    {
                        manager.Salary = salary;
                    }
                    else
                    {
                        MessageBox.Show("Wrong salary input");
                    }
                }
                else
                {
                    MessageBox.Show("Wrong Years input");
                }
            }
            else
            {
                MessageBox.Show("Wrong age input");
            }
        }

    private void submitButton_Click(object sender, EventArgs e)
    {
        Manager manager = new Manager();
        getEmployeedata(manager);

        EmployeeListing form2 = new EmployeeListing(manager.FirstName, manager.LastName, manager.Gender, manager.Age, manager.Years, manager.Title, manager.Exempt, manager.Salary);
        form2.Show();

    }

    private void clearButton_Click(object sender, EventArgs e)
    {
        firstnameBox.Text = "";
        lastnameBox.Text = "";
        genderBox.Text = "";
        ageBox.Text = "";
        yearsBox.Text = "";
        titleBox.Text = "";
        exemptBox.Text = "";
        salaryBox.Text = "";
    }

}

class Employee
{
    private string firstName = "";
    private string lastName = "";
    private string gender = "";
    private int age = 0;
    private int years = 0;

    public string FirstName
    {
        get { return firstName; }
        set { firstName = value; }

    }

    public string LastName
    {
        get { return lastName; }
        set { lastName = value; }
    }

    public string Gender
    {
        get { return gender; }
        set { gender = value; }
    }

    public int Age
    {
        get { return age; }
        set { age = value; }
    }

    public int Years
    {
        get { return years; }
        set { years = value; }
    }

} //end Employee class

class Manager : Employee
{
    private string title = "";
    private string exempt = "";
    private int salary = 0;

    public string Title
    {
        get { return title; }
        set { title = value; }
    }

    public string Exempt
    {
        get { return exempt; }
        set { exempt = value; }
    }

    public int Salary
    {
        get { return salary; }
        set { salary = value; }
    }

} //end Manager class

Form2:

public partial class EmployeeListing : Form
{
    public EmployeeListing(string firstname, string lastname, string gender, int age, int years, string title, string exempt, int salary)
    {
            InitializeComponent();
            employeeList.Rows.Add(firstname, lastname, gender, age, years, title, exempt, salary);                      
    }

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:07:41.350

在您的单击处理程序中，每次单击按钮时都会初始化一个 EmployeeListing 表单，并且您可能只想这样做一次。因此，将 EmployeeListing 的实例保留在单击处理程序之外，并且只创建一个实例，以便您可以在随后的点击中访问它。要继续向表单添加数据，您可以在 EmployeeListing 表单上创建一个公共方法来添加行数据，然后使用表单的实例从您的单击处理程序中调用此方法。

这是未经测试的，但只是为了让你开始......

```
 public partial class Form1 : Form
      {
        public Form1()
        {
            InitializeComponent();
        }
        private void getEmployeedata(Manager manager)
        {
            int age;
            int years;
            int salary;   
            EmployeeListing form2;      

            manager.FirstName = firstnameBox.Text;
            manager.LastName = lastnameBox.Text;
            manager.Gender = genderBox.Text;
            manager.Title = titleBox.Text;
            manager.Exempt = exemptBox.Text;

            if (int.TryParse(ageBox.Text, out age))
            {
                manager.Age = age;

                if (int.TryParse(yearsBox.Text, out years))
                {
                    manager.Years = years;

                    if (int.TryParse(salaryBox.Text, out salary))
                    {
                        manager.Salary = salary;
                    }
                    else
                    {
                        MessageBox.Show("Wrong salary input");
                    }
                }
                else
                {
                    MessageBox.Show("Wrong Years input");
                }
            }
            else
            {
                MessageBox.Show("Wrong age input");
            }
        }

    private void submitButton_Click(object sender, EventArgs e)
    {
        Manager manager = new Manager();
        getEmployeedata(manager);
        if (form2 == null)
        {
            EmployeeListing form2 = new EmployeeListing();
            form2.Show();
        }       

        form2.AddRowData(manager.FirstName, manager.LastName, manager.Gender, manager.Age, manager.Years, manager.Title, manager.Exempt, manager.Salary);
    }

    private void clearButton_Click(object sender, EventArgs e)
    {
        firstnameBox.Text = "";
        lastnameBox.Text = "";
        genderBox.Text = "";
        ageBox.Text = "";
        yearsBox.Text = "";
        titleBox.Text = "";
        exemptBox.Text = "";
        salaryBox.Text = "";
    }

}

class Employee
{
    private string firstName = "";
    private string lastName = "";
    private string gender = "";
    private int age = 0;
    private int years = 0;

    public string FirstName
    {
        get { return firstName; }
        set { firstName = value; }

    }

    public string LastName
    {
        get { return lastName; }
        set { lastName = value; }
    }

    public string Gender
    {
        get { return gender; }
        set { gender = value; }
    }

    public int Age
    {
        get { return age; }
        set { age = value; }
    }

    public int Years
    {
        get { return years; }
        set { years = value; }
    }

} //end Employee class

class Manager : Employee
{
    private string title = "";
    private string exempt = "";
    private int salary = 0;

    public string Title
    {
        get { return title; }
        set { title = value; }
    }

    public string Exempt
    {
        get { return exempt; }
        set { exempt = value; }
    }

    public int Salary
    {
        get { return salary; }
        set { salary = value; }
    }

} //end Manager class

public partial class EmployeeListing : Form
{
    public EmployeeListing()
    {
        InitializeComponent();                                
    }

    public AddRowData(string firstname, string lastname, string gender, int age, int years, string title, string exempt, int salary)
    {
        employeeList.Rows.Add(firstname, lastname, gender, age, years, title, exempt, salary); 
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:01:18.777

您可以在 EmployeeListing() 构造函数上创建一个 DataTable 并设置 DataSource：

```
public EmployeeListing(string firstname, string lastname, string gender, int age, int years, string title, string exempt, int salary)
    {
            InitializeComponent();
            //employeeList.Rows.Add(firstname, lastname, gender, age, years, title, exempt, salary);                      

            DataTable dtSource = new DataTable();
            dtSource.Columns.Add("firstname", typeof(string));
            dtSource.Columns.Add("lastname", typeof(string));
            dtSource.Columns.Add("gender", typeof(string));
            dtSource.Columns.Add("age", typeof(string));
            dtSource.Columns.Add("years", typeof(string));
            dtSource.Columns.Add("title", typeof(string));
            dtSource.Columns.Add("exempt", typeof(string));
            dtSource.Columns.Add("salary", typeof(string));
            DataRow dtRow;

            dtRow = dtSource.NewRow();
            dtRow[0] = firstname;
            dtRow[1] = lastname;
            dtRow[2] = gender;
            dtRow[3] = age;
            dtRow[4] = years;
            dtRow[5] = Title;
            dtRow[6] = exempt;
            dtRow[7] = salary;

            dtSource.Rows.Add(dtRow.ItemArray);

            employeeList.DataSource = dtSource;

    } 
```

如果您将多次向 gridview 添加行，您还应该在另一个函数中而不是在构造函数中输出它。

# mysql - 导入 SQL 文件“键 'PRIMARY' 的重复条目 '0'”

> ID：14698855
> 
> 赞同：2
> 
> 时间：2013-02-05T01:46:18.910
> 
> 标签：mysql, sql, database, phpmyadmin

我知道有类似的问题得到了回答，但请尝试帮助我。

我正在使用 PHPMyAdmin 将 MyBB 数据库的备份导入到新主机中。尝试导入 .sql 文件时，出现以下错误：

SQL查询：

```
INSERT INTO mybb_datacache(  `title` ,  `cache` ) 
VALUES (

'internal_settings',  'a:1:{s:14:\"encryption_key\";s:32:\"rrvohvVATtOauucNTmEXAmvNvbw9ujvb\";}'
);

MySQL said: 

#1062 - Duplicate entry 'internal_settings' for key 'PRIMARY' 
```

我无法弄清楚问题所在。我已经清空了所有表并全新安装了四次数据库。我整天都在想办法解决这个问题，这非常令人沮丧。

（链接已删除）

请帮帮我。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-28T12:50:32.683

当你从 php admin 导出你的 sql

![在此处输入图像描述](../Images/50b38e371673944455921aad66687c56.png)

选择“自定义”作为导出方式“

![在此处输入图像描述](../Images/a8ef328f5a45589d7aeddd16d5ddcade.png)

然后，而不是“插入”，选择“更新”

这将执行更新语句并防止重复插入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T01:47:12.463

确保设置为您的列设置`PRIMARY KEY`为`AUTO_INCREMENT`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-11T07:36:13.050

我遇到了这个问题，我发现了问题所在。

问题是，该字段不能为空。即，如果您要更改表以添加主键，请确保该字段中有一些值。或者如果你正在导入一个 sql 文件，请确保文件中的该字段具有一些值....

这解决了我的问题...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T01:49:51.130

`title`从问题的当前版本来看，表的列似乎`mybb_datacache`是主键，并且已经有一条包含该值的记录`'internal_settings'`。如果确实如此，那么问题在于所有记录的主键都必须具有唯一值。

# python - 将 Python switch 重写为更紧凑的方式

> ID：14698860
> 
> 赞同：0
> 
> 时间：2013-02-05T01:46:58.547
> 
> 标签：python, switch-statement

> **可能重复：**
> [python中switch语句的替换？](https://stackoverflow.com/questions/60208/replacements-for-switch-statement-in-python)

假设我在 Python 中有一个列表：

> list = ('ADD', 'SUB', 'PUSH', 'POP')

我想根据输入运行一个函数，该输入可以是列表中的任何值。

除了为 中的每个元素编写 switch case 语句之外`list`，还有更紧凑的编写方式吗？

我的理由是列表在未来增长的情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T01:49:22.727

好吧， Python*中*没有 switch/case 语句。

对于一个小的`list`，你想使用`if`/ `elif`：

```
def do_stuff(x, *args):
    if x == 'ADD':
        return do_add(*args)
    elif x == 'SUB':
        return do_sub(*args)
    # …
    else:
        raise RuntimeError('Never heard of {}'.format(x)) 
```

对于较大的`list`，您要确保每个案例都是一个函数（我已经在上面假设了，但是如果您有类似 的代码，则`return args[0] + args[1]`必须将其更改为`do_add`函数），并创建`dict`到函数的映射名称：

```
func_map = {'ADD': do_add, 'SUB': do_sub, … }

def do_stuff(x, *args):
    try:
        return func_map[x](*args)
    except KeyError:
        raise RuntimeError('Never heard of {}'.format(x)) 
```

这是有效的，因为在 Python 中，函数是可以像任何其他对象一样传递的普通对象。因此，您可以将它们存储在 a`dict`中，从 中检索它们`dict`，然后仍然调用它们。

顺便说一句，这一切都在[常见问题解答中进行了](http://docs.python.org/2/faq/design.html#why-isn-t-there-a-switch-or-case-statement-in-python)解释，以及一些额外的幻想。

如果你有一些你想调用而不是引发错误的默认函数，很明显如何使用 // 链来做到这一点`if`，`elif`但`else`你如何使用`dict`地图来做到这一点？您*可以*通过将默认函数放入`except`块中来做到这一点，但有一种更简单的方法：只需使用以下[`dict.get`](http://docs.python.org/2/library/stdtypes.html#dict.get)方法：

```
def do_stuff(x, *args):
    return func_map.get(x, do_default)(*args) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:02:15.640

您也可以使用这样的模式（匆忙，所以无法清理 atm）：

```
>>> class Test(object):
...     def test_FOO(self):
...             print 'foo'
...     
...     def test_BAR(self):
...             print 'bar'
... 
>>> def run_on(cls, name):
...     getattr(cls, 'test_%s' % name)()
... 
>>> run_on(Test(), 'FOO')
foo 
```

# jquery - jQuery Animate Sin 波步法

> ID：14698862
> 
> 赞同：1
> 
> 时间：2013-02-05T01:47:14.443
> 
> 标签：jquery, jquery-animate

**JS 小提琴：http:** [//jsfiddle.net/Kpj3b/19/](http://jsfiddle.net/Kpj3b/19/)

一开始还不错，但很快就变得不稳定和暴力。我只是想从 A 点到 B 点制作一个漂亮的平滑正弦波。

我的数学有什么建议吗？

```
$("#ball").stop().animate({'border-spacing': 400 },{ 
    step: function(p, fx) {
        s = Math.sin(p);
        y = s * 50 + 150;
        console.log(s);
        var move = {top: y + "px", left: p + "px"};
        $(fx.elem).css(move);
    }, duration: 10000, complete: function () { $("#ball").remove(); }
}); 
```

PS：我试图不使用 jquery.path.js。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T01:53:20.653

如果您不指定`easing`，它将默认为`'swing'`，这就是它看起来越来越“暴力”的原因。您可以指定`'linear'`缓动以获得更多您想要的效果。我还更新了属性更改的*数量*，`border-spacing`因为当它太高时，补间对于眼睛来说有点太分开了：

[http://jsfiddle.net/ExplosionPIlls/Kpj3b/20/](http://jsfiddle.net/ExplosionPIlls/Kpj3b/20/)

# r - 具有分类颜色的 R 3d 图

> ID：14698866
> 
> 赞同：4
> 
> 时间：2013-02-05T01:47:37.470
> 
> 标签：r, plot

我在 R 中有 4 列数据，看起来像这样

```
x   y   z  group 
```

这些`group`列具有分类值，因此它是一组离散的值，而其他三列是连续的。

我想用 , 和 , 在 R 中制作一个 3d 图`x`，`y`其中`z`点的颜色由“组”给出。我也想对这个情节有个传说。我怎样才能做到这一点？我对实际颜色没有特别的偏好。我想`rainbow(length(unique(group))`应该做得很好。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T02:49:19.403

这是一个使用`scatterplot3d`并基于小插图中的示例的示例

```
library(scatterplot3d)

# some basic dummy data
DF <- data.frame(x = runif(10),
  y = runif(10), 
  z = runif(10), 
  group = sample(letters[1:3],10, replace = TRUE))

# create the plot, you can be more adventurous with colour if you wish
s3d <- with(DF, scatterplot3d(x, y, z, color = as.numeric(group), pch = 19))

# add the legend using `xyz.convert` to locate it 
# juggle the coordinates to get something that works.
legend(s3d$xyz.convert(0.5, 0.7, 0.5), pch = 19, yjust=0,
       legend = levels(DF$group), col = seq_along(levels(DF$group))) 
```

![在此处输入图像描述](../Images/7f232325e7ab976b3c7f7b99c6086a26.png)

或者，您可以使用`lattice`and `cloud`，在这种情况下，您可以使用`key`

```
cloud(z~x+y, data = DF, pch= 19, col.point = DF$group, 
  key = list(points = list(pch = 19, col = seq_along(levels(DF$group))), 
  text = list(levels(DF$group)), space = 'top', columns = nlevels(DF$group))) 
```

![在此处输入图像描述](../Images/2737e3e6e3e64ffd95084378f144285c.png)

# html - 如何在图像上放置按钮

> ID：14698869
> 
> 赞同：0
> 
> 时间：2013-02-05T01:47:53.230
> 
> 标签：html

在 HTML5 中有没有办法在图像顶部添加按钮？

例如这里是我的 HTML，

```
<div><a href="http://www.website.com/family/">
     <img src="http://www.website.com/accordian.jpg" alt="image" />
</a></div> 
```

或者有没有办法让图像的一部分链接到另一个页面，而图像的另一部分链接到另一个页面？我正在考虑修改图像并放入按钮图像，并将图像的那部分链接到弹出视频。

另外，如何使此视频出现在弹出窗口中？

```
<video width="651" height="358" controls>
 <source src="www.website.com/accordian.mp4" type="video/mp4">
 <object data="www.website.com/accordian.mp4" width="320" height="240">
 </object> 
</video> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T01:51:44.500

您可以使用 Html 区域，您可以在图像上设置坐标并在该区域上放置链接。参见示例：

```
<img src ="http://www.website.com/accordian.jpg" alt="image"
usemap="#imagemap">

<map name="imagemap">
<area shape="rect" coords="0,0,50,100" href="http://www.website.com/family/" alt="Link">
</map> 
```

# r - 如何在点阵布局中制作热图风格的二元直方图？

> ID：14698870
> 
> 赞同：7
> 
> 时间：2013-02-05T01:47:58.500
> 
> 标签：r, lattice

以以下示例数据为例：

```
x <- rnorm(10000)
y <- rnorm(10000) * x
z <- rnorm(10000) * y
df <- data.frame(x,y,z) 
```

我们可以生成一个散点图矩阵，如下所示：

```
splom(df) 
```

![在此处输入图像描述](../Images/b013e3365dd9e05380d7aa825ef9ebf8.png)

但由于大量重叠点，很难衡量密度。

有没有一种简单的方法可以用二元直方图热图替换每个图，就像[squash](http://www.cbs.dtu.dk/~eklund/squash/)产生的那样？

```
library(squash)
hist2(df$x, df$y) 
```

![在此处输入图像描述](../Images/511ea52bc95d7070b0162bfd78412d88.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T02:30:16.290

这`panel.hexbinplot`对于大型数据集很方便。

```
library(hexbin)
splom(df, panel=panel.hexbinplot) 
```

![在此处输入图像描述](../Images/388ddb27c0e46b9de5fd9092682211fd.png)

您可以像这样自定义面板功能：

```
library(hexbin)
splom(df,
      panel = function(x, y, ...){
        panel.hexbinplot(x, y, style = "nested.lattice", 
                      type = c("g", "smooth"),col='blue', ...)
      },
      pscale=0, varname.cex=0.7) 
```

您可以使用 teh`style`参数。

![在此处输入图像描述](../Images/35ea3059021dc60e1cf4ce1c2871141f.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T02:04:08.430

这是另一个更符合您的原始要求的选项

```
# run the code you've provided
library(lattice)
x <- rnorm(10000)
y <- rnorm(10000) * x
z <- rnorm(10000) * y
df <- data.frame(x,y,z)

# look at each of these options one-by-one..  go slowly!

# here's your original
splom(df)

# here each point has been set to very transparent
splom(df , col="#00000005" ) 
```

![在此处输入图像描述](../Images/2fd52dd891d083d3de5541e39ef0a025.png)

```
# here each point has been set to moderately transparent
splom(df , col="#00000025" ) 
```

![在此处输入图像描述](../Images/2ad844b3ad1b39639277ee976efc3f02.png)

```
# here each point has been set to less transparent
splom(df , col="#00000050" ) 
```

![在此处输入图像描述](../Images/264a9b895629136bcf4a735a90c9d6c6.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T01:58:17.443

这不是您要求的方法，但确实可以帮助您解决您描述的基本问题:)

```
# run the code you've provided
library(lattice)
x <- rnorm(10000)
y <- rnorm(10000) * x
z <- rnorm(10000) * y
df <- data.frame(x,y,z)

# figure out what ten percent of the total records are
ten.percent <- nrow( df ) / 10

# create a new data frame `df2` containing
# a randomly-sampled ten percent of the original data frame
df2 <- df[ sample( nrow( df ) , ten.percent  ) , ]

# now `splom` that.. and notice it's easier to see densities
splom(df2) 
```

# php - ajax向php发送请求相同的值

> ID：14698872
> 
> 赞同：0
> 
> 时间：2013-02-05T01:48:16.813
> 
> 标签：php, ajax, request, send

我在将一个变量 (i) 发送到我的 php.ini 时遇到问题。我的变量 i 每次都是 6，我该如何解决？

```
$(document).ready(function(){
for (i=1; i<=5; i++){
    $('#rate'+ i +'_').click(function(){
    sendValue($(this).val(),i);
    });
}
});
function sendValue(str,str2){
$.post("/php/test.php",{ sendValue: str, sendValue2 : str2 },
    function(data){
    $('#display').html(data.returnValue);
    }, "json");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:51:17.003

`i`将as 数据传递给[`click`](http://api.jquery.com/click/#click-eventData-handlereventObject)事件的处理程序

```
for (i=1; i<=5; i++){
    $('#rate'+ i +'_').click(i, function(e){
    sendValue($(this).val(),e.data);
    });
} 
```

# paypal - 缺少 IPN 通知

> ID：14698873
> 
> 赞同：1
> 
> 时间：2013-02-05T01:48:32.873
> 
> 标签：paypal

几个月以来，我一直在我的网站上运行“立即购买”按钮，几周前，我观察到一次购买已经通过，没有从 PayPal 向我的网站发送 IPN。当天后来的购买成功了。

**观察**

*   PayPal 向我发送了购买成功的电子邮件通知，它还在我帐户的付款日志中记录了此交易。这个是正常的。
*   IPN 历史没有记录该交易的任何 IPN 条目；没有 PayPal 尝试联系我的网站以将 IPN 通知它的记录。这不正常。
*   在过去的六个月中，我没有对“立即购买”进行任何修改，并且只有一个“立即购买”按钮连接到 PayPal。此外，这是当天唯一没有出现在 IPN 历史上的付款。

我读过（我忘记了这篇文章），这并不少见（对于受欢迎的卖家来说，每年都会发生几次）。但是，我不知道解决方案是什么。一周前我联系了 PayPal 支持，但他们没有回复我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-18T20:29:20.937

我发现如果购买者使用信用卡选项付款，并且他们通过付款页面，最后一页有另一个按钮。一些购买者不会点击最后一个按钮。结果是付款发生了，但您的 notify_url 的 IPN 没有触发。

如果购买者使用他们的贝宝帐户进行购买，则不会发生此问题。

我正在寻找解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T06:20:22.723

有时 IPN 会因各种原因延迟，但通常会在某个时间点发布。

我知道就在上周（或者可能是前一周）IPN 服务器出现故障，所以实际上有数百万个 IPN 在系统中排队，并且需要很长时间才能全部赶上。

不过，通常 IPN 效果很好，而且几乎是实时的。

# ruby-on-rails - 你如何添加一个文件夹来获取统计数据？

> ID：14698875
> 
> 赞同：8
> 
> 时间：2013-02-05T01:48:49.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rake

我已将一些文件夹（lib、spec、cell 等）添加到我的 Rails 应用程序中，并希望将它们添加到 rake stats 列表中。是否可以添加新文件夹？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-08-25T14:02:12.383

我知道我参加聚会迟到了，但由于我没有找到更多信息，我将我的答案加入其中。

我在我的项目中添加了一个 rake-task，其内容类似于以下内容：

```
task :stats => "todolist:statsetup"

namespace :todolist do
  task :statsetup do
    require 'rails/code_statistics'
    ::STATS_DIRECTORIES << ["Policies", "app/policies"]
    ::STATS_DIRECTORIES << ["Services", "app/services"]

    # For test folders not defined in CodeStatistics::TEST_TYPES (ie: spec/)
    ::STATS_DIRECTORIES << ["Services specs", "specs/services"]
    CodeStatistics::TEST_TYPES << "Services specs"
  end
end 
```

这将两个文件夹添加到我的`rake stats`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-06T02:42:10.787

这是一个很好的答案，可以找到[定义特定 rake 任务的位置](https://stackoverflow.com/a/12226128/429758)。

有了这个提示，发现`rake stats`任务是在`gems/railties-3.2.11/lib/rails/tasks/statistics.rake`文件中定义的；所以它在`railties gem`哪个是[rails 存储库](https://github.com/rails/rails/blob/master/railties/lib/rails/tasks/statistics.rake)的一部分。

在文件的最顶部，要考虑的目录包含在`STATS_DIRECTORIES`变量中。

可能最好使用相同的代码[实现自定义 rake 任务](http://railscasts.com/episodes/66-custom-rake-tasks)（例如命名`my_stats`），并添加要包含的新文件夹。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-09T18:20:40.597

我发现在列表中的合理位置插入新统计信息很有用。

这是我正在使用的（使用 rails 5.1）：

```
# lib/stats.rake

require "rails/code_statistics"

task stats: :more_stats

task :more_stats do
  %w[Forms Policies Presenters Serializers Services].each_with_index do |type, i|
    STATS_DIRECTORIES.insert i + 5, [type, "app/#{type.downcase}"]
    STATS_DIRECTORIES.insert i * 2 + 13, ["#{type} tests", "test/#{type.downcase}"]
    CodeStatistics::TEST_TYPES << "#{type} tests"
  end
end 
```

# c# - 适用于 Windows Phone 8 的 Http Post

> ID：14698879
> 
> 赞同：9
> 
> 时间：2013-02-05T01:49:37.577
> 
> 标签：c#, http-post, windows-phone

我是 C# 的新手，所以我想知道是否有人可以帮助我解决这个问题。我正在尝试将 HttpPost 从 Windows Phone 8 发送到服务器。我找到了两个我想合并的例子。

第一个是发送 Http Post 的示例（[http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetrequeststream.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetrequeststream.aspx)）。这个问题是 Windows Phone 8 不支持它。

第二个示例是使用 BeginGetResponse ( [http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.net.httpwebrequest(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.net.httpwebrequest(v=vs.105).aspx) )。这支持windows phone 8。

我需要像第一个示例一样将第二个示例转换为 BeginGetRequestStream()。我会尝试自己解决这个问题，但如果有人已经知道如何做到这一点，我会在网上发布。我相信这将对其他 WP8 开发人员有所帮助。

**更新** 我现在正试图从服务器获得响应。我开始了一个新问题。请点击此链接（[Windows Phone 8 的 Http Post Get Response Error](https://stackoverflow.com/questions/14703087/http-post-get-response-error-for-windows-phone-8)）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-05T01:58:18.617

我目前也在做一个 Windows Phone 8 项目，这就是我发布到服务器的方式。Windows Phone 8 对完整 .NET 功能的访问权限有限，而且我阅读的大多数指南都说您需要使用所有功能的异步版本。

```
// server to POST to
string url = "myserver.com/path/to/my/post";

// HTTP web request
var httpWebRequest = (HttpWebRequest)WebRequest.Create(url);
httpWebRequest.ContentType = "text/plain; charset=utf-8";
httpWebRequest.Method = "POST";

// Write the request Asynchronously 
using (var stream = await Task.Factory.FromAsync<Stream>(httpWebRequest.BeginGetRequestStream,          
                                                         httpWebRequest.EndGetRequestStream, null))
{
   //create some json string
   string json = "{ \"my\" : \"json\" }";

   // convert json to byte array
   byte[] jsonAsBytes = Encoding.UTF8.GetBytes(json);

   // Write the bytes to the stream
   await stream.WriteAsync(jsonAsBytes, 0, jsonAsBytes.Length);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-05T12:11:26.387

[我在这里](https://gist.github.com/mcnemesis/6250994)提出了一种更通用的异步方法来支持成功和错误回调：

```
//Our generic success callback accepts a stream - to read whatever got sent back from server
public delegate void RESTSuccessCallback(Stream stream);
//the generic fail callback accepts a string - possible dynamic /hardcoded error/exception message from client side
public delegate void RESTErrorCallback(String reason);

public void post(Uri uri,  Dictionary<String, String> post_params, Dictionary<String, String> extra_headers, RESTSuccessCallback success_callback, RESTErrorCallback error_callback)
{
    HttpWebRequest request = WebRequest.CreateHttp(uri);
    //we could move the content-type into a function argument too.
    request.ContentType = "application/x-www-form-urlencoded";
    request.Method = "POST";

    //this might be helpful for APIs that require setting custom headers...
    if (extra_headers != null)
        foreach (String header in extra_headers.Keys)
            try
            {
                request.Headers[header] = extra_headers[header];
            }
            catch (Exception) { }

    //we first obtain an input stream to which to write the body of the HTTP POST
    request.BeginGetRequestStream((IAsyncResult result) =>
    {
        HttpWebRequest preq = result.AsyncState as HttpWebRequest;
        if (preq != null)
        {
            Stream postStream = preq.EndGetRequestStream(result);

            //allow for dynamic spec of post body
            StringBuilder postParamBuilder = new StringBuilder();
            if (post_params != null)
                foreach (String key in post_params.Keys)
                    postParamBuilder.Append(String.Format("{0}={1}&", key, post_params[key]));

            Byte[] byteArray = Encoding.UTF8.GetBytes(postParamBuilder.ToString());

            //guess one could just accept a byte[] [via function argument] for arbitrary data types - images, audio,...
            postStream.Write(byteArray, 0, byteArray.Length);
            postStream.Close();

            //we can then finalize the request...
            preq.BeginGetResponse((IAsyncResult final_result) =>
            {
                HttpWebRequest req = final_result.AsyncState as HttpWebRequest;
                if (req != null)
                {
                    try
                    {
                        //we call the success callback as long as we get a response stream
                        WebResponse response = req.EndGetResponse(final_result);
                        success_callback(response.GetResponseStream());
                    }
                    catch (WebException e)
                    {
                        //otherwise call the error/failure callback
                        error_callback(e.Message);
                        return;
                    }
                }
            }, preq);
        }
    }, request);            
} 
```

# html - 一组 div 的 HTML 类与 id

> ID：14698880
> 
> 赞同：0
> 
> 时间：2013-02-05T01:49:49.950
> 
> 标签：html

这让我感到困惑：

```
<div class='wrapper'>
   <div id='redRose' class='roses'>...</div>
</div>

 <div class='wrapper'>
   <div id='redRose' class='roses'>...</div>
</div>

 <div class='wrapper'>
   <div id='redRose' class='roses'>...</div>
</div> 
```

我可以看到 'redRose' 和 'roses' 之间的明显区别，但为什么他将相同的 id 'redRose' 分配给多个 div？似乎它在这里失去了 id 的唯一标识字符。我错过了什么？

**更新：**

感谢大家的帮助。我希望我可以标记每个人的答案都是正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T01:58:20.740

这是无效的；id 必须是唯一的。然而，类名可以共享。

[http://www.w3.org/TR/html401/struct/global.html#h-7.5.2](http://www.w3.org/TR/html401/struct/global.html#h-7.5.2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T01:59:31.467

在任何给定页面上多次使用相同的 ID 是错误的。永远不应该这样做，并且会破坏引用该 ID 的代码。正确的方法是使用类。一个 css 类可以分配多次，而一个 ID 只能分配一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T02:00:14.163

好吧，显而易见的事情是标记是错误的。id 是唯一的，class 不是。

[http://css-tricks.com/the-difference-between-id-and-class/](http://css-tricks.com/the-difference-between-id-and-class/)

如果一个人想要定位类似的东西，那么父容器可能会有一个 redRose 的 id，`#redRose div`但`#redRose .roses`就目前而言，css 只会针对指定的 id 之一，而且一开始就是错误的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T02:00:47.820

[http://css-tricks.com/the-difference-between-id-and-class/](http://css-tricks.com/the-difference-between-id-and-class/)

> **ID 是唯一的** 每个元素只能有一个 ID 每个页面只能有一个具有该 ID 的元素
> 
> **类不是唯一的**您可以在多个元素上使用相同的类。您可以在同一个元素上使用多个类。

# javascript - 动画数组元素

> ID：14698884
> 
> 赞同：-3
> 
> 时间：2013-02-05T01:50:05.580
> 
> 标签：javascript, html

我有一些函数返回 getById getByClass 和一个具有 id 或类的 html 元素数组。问题是我想将这样的动画应用于每个元素和这些数组，每个人都平等地在一个函数中，我现在有这个。

```
var slideDown = function (elem, to) {
    var e = getById(elem),
        st, i;
    if (e == false) {
        e = getByClass(elem);
    }
    for (var i in e) {
        //alert(e[i].offsetHeight + e[i].nodeName + e[i].textContent.trim());
        st = setInterval(doAnim(e[i]), 1000);

        function doAnim(e, h) {
            h = e.offsetHeight;
            if (h < to) {
                e.style.height = h + "px";
                h++;
                console.log(h);
                doAnim(e[i], h);
            }
        }
    }
} 
```

问题是因为 for 循环中的动画函数只会运行两次，在这种情况下，数组包含 2 个 xq 项目，如果我放出也运行两次 xq for setInterval is inside，我的问题是如何解决这个问题，我的意思是，就像修改数组元素一样，不必去索引索引。在此先感谢，不要指望像 USA JQUERY 之类的答案，我知道 jquery 会这样做，但我正在尝试调查新事物，但在这方面锁定了我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:06:00.237

首先，`setInterval`将函数作为第一个参数。但是，不是传递对函数的引用，而是*调用*一个返回的函数`undefined`（即，它没有返回值）。因此，`setInterval`接收`undefined`作为第一个参数。

相反，您需要传递一个函数引用：

```
st = setInterval(doAnim(e[i]), 1000);

function doAnim(e, h) {
    return function() {
        h = e.offsetHeight;
        if (h < to) {
            e.style.height = h + "px";
            h++;
            console.log(h);
            doAnim(e[i], h);
        }
    };
} 
```

接下来，您将使用`for..in`enumerator 语句迭代集合。这可能会产生意想不到的后果。相反，使用常规`for`循环，或者`Array.forEach()`（如果它是一个数组）。

最后，你永远不会终止你的间隔。`if`与其将函数逻辑包装在语句中，不如将 a`clearInterval`放入该`if`语句中。

# objective-c - 在 cocos2d 中添加和触摸多个精灵

> ID：14698885
> 
> 赞同：0
> 
> 时间：2013-02-05T01:50:19.260
> 
> 标签：objective-c, cocos2d-iphone

我有一个类，我在其中添加多个精灵，如下面的代码所示：

```
 CCSprite *b = [CCSprite spriteWithFile:@"b"];
    b.position = ccp(100, 160);

    CCSprite *b2 = [CCSprite spriteWithFile:@"b2.png"];
    b2.position = ccp(115, 150);

    CCSprite *b3 = [CCSprite spriteWithFile:@"b3.png"];
    b.position = ccp(200, 150);

    CCSprite *b4 = [CCSprite spriteWithFile:@"b4.png"];
    b4.position = ccp(220, 145);

    b.anchorPoint = ccp(0.98, 0.05);
    b2.anchorPoint = ccp(0.03, 0.05);
    b3.anchorPoint = ccp(0.03, 0.05);
    b4.anchorPoint = ccp(0.95, 0.05);

    [self addChild:b z:1 tag:1];
    [self addChild:b2 z:1 tag:2];
    [self addChild:b3 z:1 tag:3];
    [self addChild:b4 z:1 tag:4]; 
```

这是触摸事件的代码：

```
-(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
NSSet *allTouch = [event allTouches];
UITouch *touch = [[allTouch allObjects]objectAtIndex:0];
CGPoint location = [touch locationInView:[touch view]];
location = [[CCDirector sharedDirector]convertToGL:location];

//Swipe Detection - Beginning point
beginTouch = location;

for(int i = 0; i < [hairArray count]; i++)
{
    CCSprite *sprite = (CCSprite *)[hairArray objectAtIndex:i];
    if(CGRectContainsPoint([sprite boundingBox], location))
    {
        //selectedSprite is a sprite declared on the header file
        selectedSprite = sprite;
    }
}}

-(void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
//Move touched sprite
NSSet *allTouch = [event allTouches];
UITouch *touch = [[allTouch allObjects]objectAtIndex:0];
CGPoint location = [touch locationInView:[touch view]];
location = [[CCDirector sharedDirector]convertToGL:location];

if(selectedSprite != nil)
{
    selectedSprite.position = ccp(location.x, location.y);
}}

-(void) ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
//End point of sprite after dragged
NSSet *allTouch = [event allTouches];
UITouch *touch = [[allTouch allObjects]objectAtIndex:0];
CGPoint location = [touch locationInView:[touch view]];
location = [[CCDirector sharedDirector]convertToGL:location];

endTouch = location;
posX = endTouch.x;

//Minimum swipe length
posY = ccpDistance(beginTouch, endTouch);

[self moveSprite];} 
```

现在，动作本身工作得很好，但我遇到的麻烦是，如果我想拖动 b2，我必须先拖动 b3 和 b4。我不确定它是否与 z-index 有关，或者是因为每个精灵都存在透明区域。我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:26:22.680

```
if(CGRectContainsPoint([sprite boundingBox], location))
{
  //selectedSprite is a sprite declared on the header file
  selectedSprite = sprite;
 } 
```

在循环所有精灵时，此代码会在找到新精灵后立即更新当前选定的精灵。这意味着如果 3 个 sprite 重叠，您将得到所选的一个是父节点数组中的最后一个。

你不能对订单做出任何假设，所以这不是你想要的，你必须决定一个政策来给予精灵优先权。请注意，`anchorPoint`与边界框相比，编辑可能会改变精灵的位置（因此边界框甚至在精灵之外）。

为了确保这一点，您应该启用：

```
#define CC_SPRITE_DEBUG_DRAW 1 
```

在`ccConfig.h`. 这将渲染精灵周围的边界框。

# c++ - 这是在 C++ 中实现组合的正确方法吗？

> ID：14698886
> 
> 赞同：1
> 
> 时间：2013-02-05T01:50:20.157
> 
> 标签：c++, class, design-patterns, composition

宝箱由宝物组成。
![在此处输入图像描述](../Images/b70a75af4be1806aea266e2fba888ac4.png)
我已经通过以下方式实现了它：

**宝藏.hpp**

```
#pragma once
class Treasure{

    public:
    protected:
    private:

    //data members
    int gold;

}; 
```

**胸部.hpp**

```
#pragma once
class Chest{

    private: 
    #include "treasure/treasure.hpp"

    public:
    protected:
    private:

    //data members
    Treasure treasure;

}; 
```

**假设两个头文件都使用相应的“.cpp”进行编译以创建目标文件。*

**在胸的类声明中包含宝藏的头文件是否合适？**
这对我来说很有意义，因为我得到以下行为：
![在此处输入图像描述](../Images/58a7daacb84dd9343652469451ed9856.png)
**Main 无法创建或直接访问 Treasure。*

```
#include "chest.hpp"

int main(int argc, char** argv){

    Chest chest;
} 
```

我从未见过这种方式，所以我不确定这是否是不好的做法。

关于组成，首选哪种方法：

1.  包括类声明之前的标题；主要间接包括Treasure？
2.  # 如上所示，在类声明中包含私有标题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T01:54:59.833

我会`#include "treasure.hpp"`在`Chest`class 声明之前在 chest.hpp 的顶部。并不是所有的宝藏都在箱子里。如果`main()`要创建不在 a 中的 Treasure，`Chest`应该允许这样做。

另一方面，我当然可以想象私人课程会有用的时候。在这种情况下，我会直接在外部类中编写私有类而不是#include。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T01:55:39.047

我会间接地主要包含文件（宝藏包含在胸部的顶部）。拥有多个包含没有多大意义。事实上，这是这些预编译器指令的主要用途之一。以防止由于多次包含文件而导致编译错误。

如果你以另一种方式做，你就不能做主要的事情；创造新的宝藏并将其添加到您的胸部或从您的胸部取出宝藏并独立使用它。仅当对象 B 仅由对象 A 使用时，该实现才有意义。

# html - 显示：内联和浮动：左

> ID：14698894
> 
> 赞同：1
> 
> 时间：2013-02-05T01:51:46.053
> 
> 标签：html, css

我正在尝试创建一个包含两种元素的容器项目：项目和文本。逻辑应该是这样的：

*   背景总是用内联显示样式着色（背景换行而不是块）；

*   在一个列表中分隔项目。

请看看我的小提琴：http: [//jsfiddle.net/BZw4A/](http://jsfiddle.net/BZw4A/)

这是使用的层次结构：

```
<div id="container">
    <div class="text bg">This is only a sample text to show the weird problem about inline text and background.</div>
    <div class="item bg">Item One</div>
    <div class="item bg">Item Two</div>
    <div class="item bg">Item Three</div>
    <div class="item bg">Item Four</div>
    <div class="item bg">Item Five</div>
</div> 
```

从小提琴中可以看出，由于容器的宽度值，文本元素的背景看起来像块而不是内联。我能找到的唯一方法是删除这些行：

```
float: left;
clear: both; 
```

当我删除这些行时，文本背景会恢复到我想要的样子，但是，按钮会失去它们的顺序（因为内联）并像普通文本一样显示在同一行上。

我很想听听这个问题的一些解决方案，主要是基于这些排版问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:59:28.547

这有点 hacky，但您可以`:after`用来制作换行符：

```
.bg:after {
    content: '';
    display: block;
} 
```

**演示：http: [//jsfiddle.net/BZw4A/4/](http://jsfiddle.net/BZw4A/4/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T02:00:50.687

您可以更改您的标记以指示每个项目应该在自己的行（`<div>`s）上，然后为内联元素内的内容设置样式。

```
<div id="container">
    <div class="text"><span class="bg">This is only a sample text to show the weird problem about inline text and background.</span></div>
    <div class="item"><span class="bg">Item One</span></div>
    <div class="item"><span class="bg">Item Two</span></div>
    <div class="item"><span class="bg">Item Three</span></div>
    <div class="item"><span class="bg">Item Four</span></div>
    <div class="item"><span class="bg">Item Five</span></div>
</div> 
```

然后你根本不需要浮动/清除 css。

示例：http: [//jsfiddle.net/BZw4A/3/](http://jsfiddle.net/BZw4A/3/)

# ruby - 如何使用方法但没有类执行 ruby 脚本？

> ID：14698897
> 
> 赞同：-1
> 
> 时间：2013-02-05T01:52:20.623
> 
> 标签：ruby

我有：

```
def is_valid_cool_string(str)
  ...
end 
```

我想写一些类似的东西

```
is_valid_cool_string("Foobar")
```

在文件底部执行此操作。有没有类似的主要方法或类似的方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:05:45.733

你不需要任何东西来完成这项工作。:)

如果方法返回某些内容，请不要忘记打印结果。

```
puts is_valid_cool_string("Foobar") 
```

或类似的东西

```
puts "Is valid: #{is_valid_cool_string("Foobar").inspect}" 
```

# jquery - 使用 jQuery 根据包含 & 符号的名称设置选择列表的选定值

> ID：14698898
> 
> 赞同：2
> 
> 时间：2013-02-05T01:52:22.533
> 
> 标签：jquery, asp.net, asp.net-mvc, razor

我有一个下拉列表，其中包含供应商名称及其 ID 的集合。我正在尝试根据模型中供应商的名称设置下拉列表的选定值。

这是我的代码：

```
<script type="text/javascript" language="javascript">
    $(document).ready(function () {

        $("#vendors option:contains(@Model.Vendor)  // @Model.Vendor = "A B & C"
            .attr('selected', 'selected');

    });
</script>

@Html.DropDownList("vendors",
    new SelectList(Model.Vendors, "VendorID", "Name"),
    "- Select a Vendor -") 
```

出于某种原因，如果名称包含 & 符号，则不会选择下拉列表项。但如果不是，则列表项将被选中。

有没有办法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:57:52.937

像这样的字符`&`在出现在 HTML 中时会被编码（例如`&`变成`&amp;`）。要将您的文本与元素的实际文本值进行比较，您可以使用以下内容：

```
$("#vendors option").filter(function() {
  return $(this).text().indexOf(@Model.Vendor) > -1; // @Model.Vendor = "A B & C"
}).prop('selected', true); 
```

此外，要将选项设置为“已选择”，正确的使用方法是[`prop`](http://api.jquery.com/prop)（在每个 jQuery 1.6+ 版本中）。

# xcode - 如何在 xcode 代码意义上找到我想要的特定类的属性

> ID：14698902
> 
> 赞同：2
> 
> 时间：2013-02-05T01:52:44.047
> 
> 标签：xcode, code-completion

当我使用代码意义（点符号）并在“点”后面按下“转义”键时，有很多属性可以使用，如下图所示：

![感觉](../Images/723c418a252faeb11fc67b115fb668c0.png)

我想要的是这个下拉列表只显示特定类的属性。例如，在这张图片上，我只想查看 UITableViewCellAccessoryType 类的属性。或任何其他课程，如果我愿意。无效，UIButton，UIView，...等。

# anchor - Google+ 分享特定文章

> ID：14698916
> 
> 赞同：0
> 
> 时间：2013-02-05T01:53:55.560
> 
> 标签：anchor, share, google-plus

我在我的网站中包含了 Google+ 分享网址（不是 +1）。但是，它共享整个页面，而不是我要链接到的特定文章。我的文章标题有一个锚 id，但是当我将它添加到共享的 url 时，它没有选择它......

`<a href="https://plus.google.com/share?url=http://mywebsite.com/pagetitle.html#anchorid" title="Google+" target="_new"></a>`

页面的标志和简短的描述会显示出来，但它不会链接到特定的文章。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:35:38.843

您需要使用共享按钮而不是共享 URL 才能与锚共享链接。即使是对锚点进行 URL 编码，也会导致它们从与链接共享的 URL 中被剥离。使用按钮时，指定 href 值以包含您需要的特定锚点。

**如果需要共享链接，另一种方法是**....

将在您的网站上实施锚点的替代方法。例如，使用[http://mysite.com/?article=myarticleid](http://mysite.com/?article=myarticleid)，其中 myarticleid 与锚点相同，并在页面加载时检查（来源）。

```
function getParameter(param) {
            var val = document.URL;
            var url = val.substr(val.indexOf(param))  
            var n=url.replace(param+"=","");
            alert(n); 
}
var anchor;

function checkForAnchor(){
  anchor = getParameter("myarticle");

  // Do something with anchor, see code examples below.
}

window.onload = checkForAnchor; 
```

然后在该 checkForAnchor() 函数的末尾添加一些 JavaScript，它将在加载时将页面滚动到正确的位置，或者只是跳转到锚点。

在 jQuery 中，您可能会像 ( [source](/questions/6451193//questions/6451193/) ) 一样为该效果设置动画：

```
jQuery('html,body').animate({scrollTop: jQuery('#' + anchor).offset()}, 1000); 
```

在标准 JavaScript 中，您可以简单地更改位置并附加锚点：

```
window.location = '#'+id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T12:06:40.573

据我所知，Google+ 分享按钮目前仅适用于整个页面而不是部分。
唯一的方法，虽然不是非常用户友好，但是将每个内容分成单个页面。

任何人 - 如果我错了，请纠正我。

# python - Django 中的延迟翻译和基本博客问题

> ID：14698918
> 
> 赞同：-1
> 
> 时间：2013-02-05T01:54:09.317
> 
> 标签：python, django

[我已经使用Django Basic Apps](http://code.google.com/p/django-basic-apps/)附带的博客已经有一段时间了，直到现在还没有遇到任何问题。每当我尝试访问新创建的博客文章的单个页面时，都会发生错误。请注意，这只发生在最近创建的帖子中；早期的帖子工作得很好。

这是 Django 唯一告诉我的：

`No <django.utils.functional.__proxy__ object at 0x105ab8890> found for`

我做了更多的研究，并确定 Django 具有某种[惰性翻译](https://docs.djangoproject.com/en/dev/ref/unicode/)功能，那就是找不到的对象。我仍然完全不知道我可以改变什么参数会突然导致这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:26:44.257

您最近是否添加了一些已`_()` [翻译的字符串？](https://docs.djangoproject.com/en/dev/ref/unicode/#translated-strings)您能否发布代码，或创建此错误的示例？

# ruby-on-rails - Rails 模型关系

> ID：14698919
> 
> 赞同：0
> 
> 时间：2013-02-05T01:54:12.100
> 
> 标签：ruby-on-rails, model, rails-activerecord

如果我有一个模型有两个对同一模型的引用，我该如何设置它？我现在拥有的是

```
class Game < ActiveRecord::Base
    has_one :home_team_stats, :class_name => 'Stats'
    has_one :away_team_stats, :class_name => 'Stats'

class Stats < ActiveRecord::Base
    belongs_to :game 
```

但是，当 Activerecord 运行查询时，它会搜索第一个 game_id 为 x 的 Stats 条目。因此，如果 home_stats 是最新条目，则 home_stats 和 away_stats 都设置为 home_stats 条目。如果是 away_game，他们都会被设置成这样。

```
Stats Load (0.3ms)  SELECT "stats".* FROM "stats" WHERE "stats"."game_id" = 1 LIMIT 1 
```

据我了解，解决此问题的方法是将关系从 has_one 更改为 belongs_to 或类似的东西。但这感觉本质上是错误的，因为通俗地说，统计数据属于一场比赛，一场比赛有主队和客队的统计数据。有没有更好的方法来设置它？

**编辑：想通了。**

我将游戏模型更改为以下内容：

```
has_one :home_team_stats, :class_name => 'Stats', :foreign_key => "id", :primary_key => "home_team_stats_id"
has_one :away_team_stats, :class_name => 'Stats', :foreign_key => "id", :primary_key => "away_team_stats_id" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:05:01.563

问题是没有办法将 Stats 的实例标识为 home 或 away。（你已经展示了）

一个潜在的解决方法是在 中引入一`home`列`stats`，然后将关系更改为：

```
class Game < ActiveRecord::Base
  has_one :home_team_stats, :class_name => 'Stats', :conditions => {:home => true}
  has_one :away_team_stats, :class_name => 'Stats', :conditions => {:home => false} 
```

# facebook-graph-api - 通过 Ads API 生成的响应者人口统计报告

> ID：14698923
> 
> 赞同：1
> 
> 时间：2013-02-05T01:54:44.853
> 
> 标签：facebook-graph-api, ads, facebook-ads-api

有没有办法通过 Ads API 检索 Responder Demographics 广告报告，该报告按年龄、性别和位置细分效果？如果不是，此报告类型是否是计划中的 API 功能，是否有预计何时实施？

# c++ - 对于 C++ 中的静态类（带有私有构造函数），我应该定义一个析构函数吗？

> ID：14698924
> 
> 赞同：2
> 
> 时间：2013-02-05T01:54:48.927
> 
> 标签：c++, static, destructor

我在 C++ 中有一个静态类，即这个类的所有成员都是静态的。

因为我不希望类被实例化，所以我将构造函数设为私有。我没有为这个类定义一个默认的复制赋值运算符或复制构造函数，因为它永远不能被实例化。但是，我的静态代码分析器告诉我：

> 如果因为类管理资源而声明了析构函数，出于同样的原因，您可能还需要声明复制构造函数和复制赋值运算符。

-> 如果我不为这个类定义析构函数可以吗？既然它永远不能被创造，它也不能被摧毁，我想？

-> 这是一个好习惯吗？我的设计有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T01:59:09.973

> 因为我不希望类被实例化，所以我将构造函数设为私有。

如果您可以访问 C++11 编译器，那么您有一个更好的选择：您可以[显式删除编译器提供的“无偿”构造函数](http://en.cppreference.com/w/cpp/language/default_constructor#Deleted_implicitly-declared_default_constructor)。这应该解决析构函数的问题，因为编译器会知道不可能构造你的类。

如果您不能使用已删除的构造函数功能，则将构造函数声明为私有应该足以防止外部实例化。析构函数不是必需的，因为没有什么可破坏的。

> 这是一个好习惯吗？我的设计有什么问题吗？

这种做法在无法定义独立函数/变量的语言中更为常见。另一方面，C++ 提供独立的函数和变量。这两个特性与命名空间的结合使得只有静态成员的类变得不必要：这样的类在功能上等同于命名空间，但对 C++ 来说不是惯用的。

# javascript - Raspberry Pi - JavaScript 在 chromium kiosk 模式下不起作用

> ID：14698928
> 
> 赞同：1
> 
> 时间：2013-02-05T01:55:27.873
> 
> 标签：javascript, chromium, raspberry-pi

我在我的 RPI 上运行最新的 Raspbian Wheezy O/S，我遇到了一个非常奇怪的问题。

我创建了许多 html 文件，我试图在启动时以 kiosk 模式自动运行（修改自动启动文件）。

```
@chromium --kiosk --incognito http://some.web. 
```

基本上，HTML 页面使用 javascript setTimeout 命令随机播放：

```
setTimeout("location.href = 'widgets.html';", 120000); 
```

每个 HTML 文件都有这个命令。

当我让系统手动启动并通过双击它们手动启动 HTML 文件时，这些命令可以正常工作。当它们通过修改自动启动或通过命令行运行时，上面的行不起作用。

知道为什么会这样吗？

我试过玩不同的铬开关，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T23:46:06.803

不要为 Chromium 的 kiosk 模式而烦恼，我认为它正在被新版本中删除。尝试改用 app 命令行开关。

```
chromium-browser --app=http://some.web 
```

其次，如果您正在创建基于 Web 的信息亭，请查看对我有帮助的博客文章：[http ://www.alandmoore.com/blog/2011/11/05/creating-a-kiosk-with-linux -and-x11-2011 版/](http://www.alandmoore.com/blog/2011/11/05/creating-a-kiosk-with-linux-and-x11-2011-edition/)

# ios - 用特定类型覆盖 UIViewController.view

> ID：14698935
> 
> 赞同：5
> 
> 时间：2013-02-05T01:56:41.867
> 
> 标签：ios, objective-c, cocoa-touch

让我们考虑一个具有高度自定义或复杂视图的应用程序。

我们将有一种特定类型的视图控制器向特定类型的 UIView 发送方法，其中 UIView 本身由许多其他视图组成。

视图应该有一个丰富的、特定于域的接口，允许控制器行动是它和一个类似丰富的模型之间的薄“胶水”层。

**所以我们重写控制器的视图属性如下：**

```
@interface PlaybackViewController : UIViewController<StageLayoutDelegate, ControlPanelDelegate>
{
    NSMutableArray* _sections;
    LightingMode _lightingMode;
}

@property (nonatomic, strong) PlaybackView* view; // <------ Specific type of view

#pragma mark - injected
@property (nonatomic, strong) id<OscClient> oscClient;
@property (nonatomic, strong) AbstractStageLayoutView* stageLayoutView;

@end 
```

覆盖比定义另一个访问器更有意义，我可以将消息发送到特定类型的 UIView 而无需强制转换。

**问题：**唯一的问题是它会导致编译器警告：

*属性类型“PlaybackView *”与从“UIViewController”继承的“UIView *”类型不兼容*

. . 我喜欢构建没有任何警告的代码。这样，一个有效的警告就不会被埋在其他警告中而错过。

**问题：**

*   有没有办法抑制这个*特定*的警告？
*   为什么这部分是默认设置，而大多数现代 OO 语言将很高兴地允许覆盖子类中的属性或方法，以便它返回在超类中声明的类型的更具体的子类？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-05T13:51:05.317

这里的问题不是属性的覆盖，而是使用类类型的前向声明。

所以这...

```
@class PlaybackView;

@interface PlaybackViewController : UIViewController

@property (nonatomic, strong) PlaybackView* view;

@end 
```

会给你提到的警告，因为编译器无法知道`PlaybackView`. `UIViewController`有合同`UIView`从其`view`财产中提供

它告诉你它认为`PlaybackView`不是`UIView`

这里的简单解决方案是使用 a`#import`来让编译器充分了解`PlaybackView`...

```
#import "PlaybackView.h"

@interface PlaybackViewController : UIViewController

@property (nonatomic, strong) PlaybackView* view;

@end 
```

或者（但非常糟糕的形式，因为 PCH 是一个优化功能，不应该管理依赖项）是添加`#import "PlaybackView.h"`到您的项目 PCH

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-06T01:04:36.510

正如另一个答案中所建议的那样，使用`#import`而不是`@class`将清除警告，但建议在标题中尽可能少地导入，所以我建议保持`view`不变并增加一个`PlaybackView * playbackView`：

*   拥有两者`view`并`playbackView`指向同一个视图是完全可以的。
*   需要了解您的专业知识的类必须`view`导入您的控制器标头，以便它们可以`playbackView`首先使用。
*   更重要的是，如果您希望将来将您的专用视图嵌入为子视图（这通常像添加`UIScrollView`超级视图一样发生），您将不必重构其他代码和类！
*   很干净。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T02:21:17.267

我不认为覆盖 UIViewControllers 视图属性是一个好方法。

我认为这样做更好：

```
@interface PlaybackViewController : UIViewController<StageLayoutDelegate, ControlPanelDelegate>
{
    NSMutableArray* _sections;
    LightingMode _lightingMode;
}

//@property (nonatomic, strong) PlaybackView* view; //you do not need this property

#pragma mark - injected
@property (nonatomic, strong) id<OscClient> oscClient;
@property (nonatomic, strong) AbstractStageLayoutView* stageLayoutView;

@end 
```

并在 .m 文件中。

```
- (void)loadView
{
    PlaybackView *mainView = [[PlaybackView alloc] initWithFrame:[UIScreen mainScreen].applicationFrame];
    // set the mainView
    self.view = mainView;
} 
```

你可以像这样使用你的 PlaybackView 。

```
((PlaybackView *)(self.view)).oscClient 
```

或者

```
((PlaybackView *)(xxxViewControler.view)).oscClient 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-05T09:59:33.963

[更新]
最后我可能找到了适合该问题的解决方案：这是一个快速而肮脏的方法，只是为了抑制警告，尝试在这些行之间包装你的代码

```
#pragma clang diagnostic push
#pragma clang diagnostic ignored "-Wgnu" 
//YOUR CODE
#pragma clang diagnostic pop 
```

或 -Wall 查看更多关于编译器警告抑制的[Clang 手册](http://clang.llvm.org/docs/UsersManual.html#controlling-diagnostics-via-pragmas)

[旧答案]
~~我想给我的 2 美分。如果我理解得很好，您正在尝试创建一种抽象工厂，它为您提供基于视图控制器功能的专用视图版本。在我看来，故事板在这种设计中效果不佳，但我想告诉你我对它的看法。~~

首先，我将为您的视图控制器创建一个抽象类，在接口中您声明所有 VC 子类中需要的所有属性，例如：

*   操作系统客户端
*   AbstractStageLayoutView
*   **PlaybackView**弱
*   **播放属性**

PlaybackView 类是一个类集群，例如 NSNumber，您在其上调用工厂方法，该类将返回一个可能因情况而异的对象。如果你检查一个 NSNumber，如果你创建一个浮点数或一个整数，它会返回一个不同的对象，但它们都是 NSNumber 的子类，并且 NSNumber 声明了它的子类的所有属性，但它没有实现它们。
现在你可以在抽象类的 -viewDidLoad 方法中做的是调用这样的方法

```
PlaybackView *plbackView = [PlaybackView playbackViewFroProperty:self.playbackProperty];
[self.view addSubview:playbackView];
self.playbackView = plbackView; 
```

~~PlaybackProperty 可以`User defined runtime attibute`在 viewcontroller 故事板编辑器的内部赋值。~~

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-05T10:45:21.433

从某种意义上说，也许您可​​以声明另一种为您提供演员表的方法。

```
@implementation PlaybackViewController

- (void)viewDidLoad {
    [super viewDidLoad];

    //  use view_ property instead of view
    self.view_.foo = 1;
}

- (void)loadView {
    CGRect frame = [UIScreen mainScreen].applicationFrame;
    self.view = [[PlaybackView alloc] initWithFrame:frame];
}

- (PlaybackView *)view_ {
    return (PlaybackView *)self.view;
} 
```

不完全是最干净的方法，但它确实避免了强制转换`self.view`（虽然不使用`self.view`）

# perl - cpan 忽略 makepl_arg 和 mbuild_arg

> ID：14698937
> 
> 赞同：2
> 
> 时间：2013-02-05T01:56:59.077
> 
> 标签：perl, cpan

我按照这个问题投票最多的答案中的说明[如何将 CPAN 模块安装到本地目录中？](https://stackoverflow.com/questions/540640/how-can-i-install-a-cpan-module-into-a-local-directory)，这基本上说我可以配置 CPAN 以在本地安装模块：

```
% cpan
cpan> o conf makepl_arg INSTALL_BASE=/mydir/perl
cpan> o conf commit

cpan> o conf mbuild_arg '--install_base /mydir/perl'
cpan> o conf commit 
```

但是，当我尝试

```
% cpan
% install List::Gen 
```

我的安装失败（看起来 CPAN 仍然尝试在系统路径上安装）。为什么？

```
cpan[4]> install List::Gen
Going to read '/home/XXXX/.cpan/Metadata'
  Database was generated on Mon, 04 Feb 2013 18:41:02 GMT
Running install for module 'List::Gen'
Running make for A/AS/ASG/List-Gen-0.974.tar.gz
Checksum for /home/XXXX/.cpan/sources/authors/id/A/AS/ASG/List-Gen-0.974
.tar.gz ok                                                                 
Scanning cache /home/XXXX/.cpan/build for sizes
............................................................................
DONE                                                                       
/bin/tar: Read 9216 bytes from -

  CPAN.pm: Going to build A/AS/ASG/List-Gen-0.974.tar.gz

Created MYMETA.yml and MYMETA.json
Creating new 'Build' script for 'List-Gen' version '0.974'
Building List-Gen
  ASG/List-Gen-0.974.tar.gz
  ./Build --install_base /mydir/perl --install_base /mydir/perl -- OK                                                              
Running Build test
t/00-load.t ............... 1/1 # Testing List::Gen 0.974, Perl 5.014001, /SOME_SYSTEM_PATH/perl-5.14.1-x86_64/bin/perl        
t/00-load.t ............... ok   
t/01-load.t ............... ok   
t/02-load.t ............... ok   
t/03-load.t ............... ok   
t/04-load.t ............... ok   
t/05-load.t ............... ok   
t/06-load.t ............... ok   
t/listgen.t ............... ok         
t/listgen_builtins.t ...... ok   
t/listgen_lazy.t .......... ok     
t/listgen_lazy_haskell.t .. ok       
t/listgen_ops.t ........... ok     
t/listgen_perl6.t ......... ok     
t/listgenerator.t ......... ok       
t/pod-coverage.t .......... skipped: Test::Pod::Coverage 1.08 required for t
esting POD coverage                                                        
t/pod.t ................... ok   
t/threads.t ............... skipped: threads not yet supported in perl 5.13+
All tests successful.
Files=17, Tests=1614,  6 wallclock secs ( 0.20 usr  0.11 sys +  3.12 cusr  0
.60 csys =  4.03 CPU)                                                      
Result: PASS
  ASG/List-Gen-0.974.tar.gz
  ./Build test -- OK
Running Build install
Building List-Gen
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
ERROR: Can't create '/SOME_SYSTEM_PATH/perl-5.14.1-x86_64/lib/site_perl/5.14.1/List'
mkdir /SOME_SYSTEM_PATH/perl-5.14.1-x86_64/lib/site_perl/5.14.1/List: Permission denied a
t /SOME_SYSTEM_PATH/perl-5.14.1-x86_64/lib/5.14.1/ExtUtils/Install.pm line 494\.         

!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 at /SOME_SYSTEM_PATH/perl-5.14.1-x86_64/lib/site_perl/5.14.1/Module/Build/Base.pm line 3
581\.                                                                       
  ASG/List-Gen-0.974.tar.gz
  ./Build install  -- NOT OK
Failed during this command:
 ASG/List-Gen-0.974.tar.gz                    : install NO 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:12:00.470

应该是`mbuildpl_arg`，不是`mbuild_arg`

```
o conf mbuild_arg ''                              # Fix past error
o conf mbuildpl_arg '--install_base /mydir/perl'  # Specify install base
o conf commit                                     # Save changes 
```

# ios - 添加导航控制器但导航项未显示

> ID：14698942
> 
> 赞同：-1
> 
> 时间：2013-02-05T01:57:39.060
> 
> 标签：ios, objective-c, xcode

最初我有一个自定义 NavigationBar，没有导航控制器。我有一个滑动菜单。

在主屏幕上有一个带有列表的表格视图。我希望能够将项目添加到此列表中。所以，我不得不在事后添加一个导航控制器。我将导航控制器添加到情节提要中并将其链接到我的主视图控制器[带有列表的那个]。然后我拖入一个视图控制器。我将一个条形按钮项放入导航项，并将其推送到最近添加的视图控制器。

我运行了我的应用程序，该应用程序现在没有显示任何导航栏或导航项。最初我有一个自定义导航栏。

我不太确定这里发生了什么。谢谢你的帮助。

```
- (void)customizeAppearance {
    UIImage *NavBG = [UIImage imageNamed:@"nav bar.png"];
    [[UINavigationBar appearance] setBackgroundImage:NavBG forBarMetrics:UIBarMetricsDefault]; 
```

![我的故事板](../Images/472b161f63f25b070201e95dd4607dac.png)

从 .m 初始化视图控制器代码

```
#import "initViewController.h"
#import "ECSlidingViewController.h"
#import "MenuViewController.h"

@interface initViewController ()

@end

@implementation initViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.topViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"Main"];

} 
```

从.h

```
#import "ECSlidingViewController.h"

@interface initViewController : ECSlidingViewController

@end 
```

来自 main.m

```
#import "MainViewController.h"

#import "ECSlidingViewController.h"
#import "MenuViewController.h"

@interface MainViewController ()

@end

@implementation MainViewController
{
    NSArray *toDoList;
    NSIndexPath *selectedIndexPath;
} 

@synthesize menuBtn;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
} 
```

来自 main.h

```
#import <UIKit/UIKit.h>

@interface MainViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>
{

}

@property (strong, nonatomic) UIButton *menuBtn; // go to MenuViewController.m and synthesize

@end 
```

第二个视图 controller.m 文件

```
 #import "SecondViewController.h"
#import "ECSlidingViewController.h"
#import "MenuViewController.h"

@interface SecondViewController ()

@end

@implementation SecondViewController
@synthesize menuBtn;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Below is the same stuff pasted from MainViewController.m

    // Do any additional setup after loading the view.
    self.view.layer.shadowOpacity = 0.75f;
    self.view.layer.shadowOpacity = 10.0f;
    self.view.layer.shadowColor = [UIColor blackColor].CGColor;

    if (![self.slidingViewController.underLeftViewController isKindOfClass:[MenuViewController class]]) {
        self.slidingViewController.underLeftViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"Menu"];

    }

    [self.view addGestureRecognizer:self.slidingViewController.panGesture];

    self.menuBtn = [UIButton buttonWithType:UIButtonTypeCustom];
    menuBtn.frame = CGRectMake(8, 10, 34, 24);
    [menuBtn setBackgroundImage:[UIImage imageNamed:@"menuButton.png"] forState:UIControlStateNormal];
    [menuBtn addTarget:self action:@selector(revealMenu:) forControlEvents:UIControlEventTouchUpInside];

    [self.view addSubview:self.menuBtn];
} 
```

这是我使用的所有数组

![所有阵列](../Images/2c62bd66a76e19bb2ad785aa18b782bb.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-05T02:43:39.283

从您展示的图像来看，看起来任何 VC 的左侧都没有起始箭头。如果是这种情况，请转到 SB，单击导航控制器，转到右侧的属性检查器，向下滚动并检查“是初始视图控制器”。

希望这能回答它。

更新：猜测您的代码，您正在尝试修改不可变的 NSArray。将您的声明更改为 NSMutableArray *toDoList。

# eclipse - 代码折叠在 PydeV + Eclipse 中不起作用

> ID：14698944
> 
> 赞同：2
> 
> 时间：2013-02-05T01:58:11.723
> 
> 标签：eclipse, pydev

刚刚下载并安装了适用于 Windows 64 位的 Eclipse Classic、PyDev 和 Java Runtime。一切都很好，似乎工作正常 - 除了使用键盘折叠代码。我试过 Ctrl + Numpad-Subtract、Numpad-Add 等等，我已经分配了我自己的快捷键 - 它根本不起作用。

注意：代码折叠在使用鼠标时有效。但是我编程，我使用键盘，所以我需要它来使用键盘工作。有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-02-05T13:52:10.093

它只是想通了。根本原因是 Eclipse 默认使用标准代码折叠和 PyDev 的相同组合键。因此，如果将键更改为，例如 Ctrl+9 用于 Collapse All，PyDev 将折叠所有代码块而不会出现任何问题。

进行更改的地方是 Window>Preference>General>Keys>Python Collapse All

# c# - linq，Ajax 错误，其中查询返回 null

> ID：14698949
> 
> 赞同：-2
> 
> 时间：2013-02-05T01:58:34.320
> 
> 标签：c#, asp.net-mvc, linq

我收到此错误，我正在尝试使用 linq 搜索列表。

当我找到结果时它工作正常..但是当我没有结果时我得到这个错误，这对我来说没有意义。

任何人都可以为我指出如何调试此错误的正确方向？

Microsoft JScript 运行时错误：Sys.ArgumentException：无法反序列化。数据不对应于有效的 JSON。参数名称：数据

示例代码：

```
IEnumerable<ClassA> listClassA = bar.ToList(); // at this point list contains values.

decimal b = listClassA.FirstOrDefault(a => a.date.Month == 9).number; // at this point if there are no results it crashes and i get the error. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:26:43.143

根据提供的代码和注释，`ClassA.date`, `ClassA.date.Month`，或`ClassA.number`进行一些解析并获得“好的”答案，您必须发布这些属性的代码。

有一个很小的机会，一个错字`data`而不是`date`导致异常，但真的很难说。

对于它的价值（因为这不是您提供的错误的原因），您必须检查 null。

```
decimal b = listClassA.FirstOrDefault(a => a.date.Month == 9).number; 
```

... 应该：

```
decimal b;
var septemberData = listClassA.FirstOrDefault(a => a.date.Month == 9);

if (septemberData != null)
{
    b = septemberData.number;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T02:31:52.220

当没有结果时，大概您的调用`FirstOrDefault()`将返回 null。但是您随后尝试访问`number`此空引用的属性。在执行此操作之前，您应该检查 null：

```
var firstItem = listClassA.FirstOrDefault(a => a.date.Month == 9);
decimal b = (firstItem != null ? firstItem.number : -1); // or pick some other sensible default value 
```

# facebook - 向多个用户发布信息

> ID：14698951
> 
> 赞同：1
> 
> 时间：2013-02-05T01:59:00.100
> 
> 标签：facebook, feed

我正在开发一个 web 应用程序，它具有能够将消息发布到选定的 facebook 朋友墙列表的所需功能。我的代码使用 /user-id/feed/ API 调用来完成此功能，但随着即将发生的更改，该方法将不再起作用。我对网站进行了更改以使用提要对话框，但这仅允许发布到单个朋友的提要。是否不再有办法发布到选定的朋友供稿列表？

# sap - 如何在 SAP 业务一中复制整个条目？

> ID：14698954
> 
> 赞同：-1
> 
> 时间：2013-02-05T01:59:17.480
> 
> 标签：sap

我如何将整个条目复制为具有下一个自动编号的新条目。例如，如果表格包含交易编号（4）和交易详细信息（a，b，c）。交易详情(a,b,c) 应与新交易编号 (5) 重复。我在论坛中搜索，只有重复的行。帮助我克服这个问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-07T07:00:38.217

我通过在右键单击事件中启用重复菜单解决了这个问题

```
 oForm.EnableMenu("1287", True) 
```

当“右键单击”时，这将给出重复的菜单。它将复制整个条目并创建新条目。我捕获菜单事件并手动增加自动编号。

# bash - 外壳获取字符串

> ID：14698967
> 
> 赞同：0
> 
> 时间：2013-02-05T02:01:10.300
> 
> 标签：bash, shell

我有一些行具有相同的结构，例如

```
1000    AS34_59329    RICwdsRSYHSD11-2-IPAAPEK-93     /ifshk5/BC_IP/PROJECT/T1
1073/T11073_RICekkR/Fq/AS34_59329/111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IP
AAPEK-93_1.fq.gz        /ifshk5/BC_IP/PROJECT/T11073/T11073_RICekkR/Fq/AS34_5932
9/111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-93_2.fq.gz        /ifshk5/
BC_IP/PROJECT/T11073/T11073_RICekkR/Fq/AS34_59329/clean_111220_I631_FCC0E5EACXX_
L4_RICwdsRSYHSD11-2-IPAAPEK-93_1.fq.gz.total.info       11.824  0.981393
43.8283 95.7401 OK 
```

我想得到粗体部分来检查是否`/home/jesse/`有这个文件夹，如果没有创建 mkdir`/home/jesse/AS34_59329`

我使用此代码

```
 ! /bin/bash
  myPath="/home/jesse/"
  while read myline
  do
     dirname= echo "$myline" | awk -F ' ' '{print $2}'
     echo $dirname
     myPath= $myPath$dirname
     echo $myPath
     mkdir -p "$myPath"

  done < T11073_all_3254.fq.list 
```

但它不能 mkdir 并显示路径名，它显示

```
 -bash: /home/jesse/: is a directory
 /home/jesse/
 AS39_59324 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:11:43.027

`read`可以将每个字段读入一个单独的变量，并且`mkdir -p`仅当它不存在时才会创建一个目录：

```
path="/home/jesse"
while read _ dir _ 
do 
    mkdir -p "$path/$dir"
done < T11073_all_3254.fq.list 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:06:13.470

`for`将遍历每个空格分隔的标记。试试这个。

```
#!/usr/bin/env bash
# Invoke with first arg as file containing the lines
#     foo.sh <input_filename>

for i in `cat $1 | cut -d " " -f2`
do 
    if [ -d /home/jesse/$i ]
    then
        echo "Directory /home/jesse/$i exists"
    else
        mkdir /home/jesse/$i;
        echo "Directory /home/jesse/$i created"
    fi
done 
```

# ruby-on-rails - Rails 在构建后创建控制器操作中获取 id

> ID：14698970
> 
> 赞同：0
> 
> 时间：2013-02-05T02:01:30.363
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我试图在构建对象后获取 id。在以下情况下如何获取 id：

```
 def create
    @event = current_customer.events.build(params[:event])
    @ev = Event.find(@event) 
```

我正在尝试使用，因此我可以将 event.id 保存到特定位置，但我不确定如何获取它构建的 id 是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:09:30.747

当您使用`#build`时，它与`#new`不创建对象因此没有分配 id 相同。你应该使用`#create`

# javascript - 在 Web 上使用 CSS 创建无缝模式

> ID：14698972
> 
> 赞同：10
> 
> 时间：2013-02-05T02:01:42.923
> 
> 标签：javascript, jquery, html, css

我正在网络上制作无缝的 CSS 模式。我知道这完全是胡说八道，根本不切实际。但这只是为了玩得开心。

[http://codepen.io/vennsoh/pen/iFKyo](http://codepen.io/vennsoh/pen/iFKyo)

我已经完成了我的第一个图块的创建。现在我正在考虑一种重复它以填充整个背景的方法。

我可以仅使用 HTML 和 CSS 来完成这项壮举吗？或者我必须使用 javascript 来完成这个吗？

-

如果使用 javascript，请纠正我或提出更好的方法，这是我的步骤：

1.  计算当前浏览器的宽度和高度。
2.  单个图块是 (150x150)，我只需要创建尽可能多的 div 来覆盖整个屏幕。

-

我可能想让东西四处移动，每个多边形都会改变颜色等。它不会是静态的。我不是在寻找背景图像解决方案。

谢谢，维恩。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T04:12:57.300

实际上，只有 html 和 css 才有可能。您的示例中的问题是，当您设置属性时，背景的每个部分都会重叠，`background-repeat`因为它们具有不同的大小，因此您只需要以不同的方式调整形状的大小和位置。在您的情况下执行此操作的简单方法是`background-size`为每个形状（所需完整图案的大小）设置一个，并相应地更改它们的位置。

我已经修改了您的示例的一部分，让您了解它的外观：[http ://codepen.io/anon/pen/pnxyd](http://codepen.io/anon/pen/pnxyd)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T02:36:02.843

只需添加，

```
float:left; 
```

到 css，然后只复制 div 的多个副本，就像这里一样...... [http://codepen.io/anon/pen/rlDqh](http://codepen.io/anon/pen/rlDqh)

我想这应该可以解决问题。

# php - 在 php 中启动会话

> ID：14698974
> 
> 赞同：-1
> 
> 时间：2013-02-05T02:02:16.050
> 
> 标签：php

我正在尝试为我的新站点上的用户创建一个选项，以使用 session_start(); . 请记住，如果这是一个简单的修复，这是我第一次这样做！

到目前为止，我已经设置了登录页面。我还有另一个页面检查数据库并确保输入的组合正确。从那个检查信息的页面我有这个：

```
session_register("myusername"); 
session_register("mypassword"); 
```

然后它重定向到主页。

然后在主页和我拥有的网站上的所有页面上

```
session_start(); 
```

没有错误，但我可以说没有会话启动，因为当我回显 session_id(); 时没有显示会话 ID；

谁能给我一个关于如何让它工作的准确答案？我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:06:27.620

> **警告**
> 自 PHP 5.3.0 起，该函数已被弃用，自 PHP 5.4.0 起已移除。

该`session_register`函数不再是 PHP 的一部分。相反，您应该分配给`$_SESSION`超全局数组：

```
$_SESSION['myusername'] = "abc";
$_SESSION['mypassword'] = "def"; 
```

您的会话可能没有被保存，因为您实际上没有保存任何变量。

但是，还有其他事情需要检查。例如，是否`$_COOKIE`包含会话 ID 条目？在哪里`php.ini`告诉您的服务器保存会话文件？该位置是否可写？

# sql - 选择哪种数据库结构？

> ID：14698980
> 
> 赞同：3
> 
> 时间：2013-02-05T02:03:13.673
> 
> 标签：sql, database-design, relational-database

我想实现一个通知系统。我有用户，每个用户都有通知设置

结构一：

```
 Users                Notification_settings                Notifications
 -id (pk)             -id                                   -id (pk)
 -username            -user_id (fk) references Users        -user_id (fk)
 -password            -receive_email (boolean)              -message
                                                            -is_read 
```

结构二：

```
 Users                                               Notifications_settings
 -id (pk)                                             -id (pk) 
 -setting_id (fk) references Notifications_settings   -receive_email
 -username                                            
 -password            

 Notifications
 -id (pk)
 -user_id (fk)
 -message
 -is_read 
```

通知系统选择哪种数据库结构或任何其他数据库结构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:18:10.483

现在[引用 Joe Celko 的话](http://www.simple-talk.com/sql/t-sql-programming/unique-constraints-in-sql/)：

> 一个强大的实体是一个依靠自己的优点而存在的实体。弱实体是因为强实体而存在的实体。典型的例子是销售订单。订单标题很强大，订单细节很弱。如果订单被删除，那么所有订单详细信息都应该消失。

那么，用户可以在没有通知的情况下独立存在吗？然后通知表应该有用户的外键。反过来是真的吗？然后换一种方式。这些都不是真的吗？那么也许你的模型不正确，它们之间应该有一个[联结表](http://en.wikipedia.org/wiki/Junction_table)（即使上面有唯一的约束），或者它们确实属于同一个表。我不特别喜欢将它们放在同一张表中的最后一个选项，因为您已经自然地想出了两个名词来描述不同的实体。

用户以外的其他实体可以“拥有”通知吗？也许这种想法可以帮助你为这个领域建模。

**更新**- 一些额外的想法：

如果您要将所有这些列放入一个表中，其中哪一个（如果有）现在看起来将包含冗余数据？让我们想象现在只有几个不同的消息。也许您不需要 Notifications 表而是 Messages 表，以及该表和用户之间的联结表，该表可以存储随时间发送给用户的消息，包括它们是否已被阅读。在这一点上，receive_email 可能是用户的一个更好的属性，尽管可能仅将消息映射到用户就足以说明该用户应该接收电子邮件。这些只是我可能正在考虑的一些事情，并希望能够更好地理解该应用程序。

此外，请注意位/布尔数据类型不是 ANSI SQL，通常可以从其他数据派生，或者甚至可以转换为映射到多个状态的 int。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T02:15:06.550

似乎应该是用户<通知（一对多），但也许你有一个特定的原因应该是1-1。在这种情况下，我会让父表（没有 FK 列的表）成为具有更多一对多关系的表。因此，很自然地，将用户 ID 存储在通知表中是有意义的。

通知似乎**总是**有一个用户，但反之则不然。因此，您应该将外键存储到通知表中的 UserID 中——而不是相反。

*编辑——正如其他人所建议的，如果您确实想要 1-1 关系，您可以将通知字段添加到 User 表中。乍一看这些似乎违反了规范化规则，但如果它确实是 1-1 关系，那么无论如何，有它*

**编辑 2- 由于您明确声明没有用户的通知不存在，我会明确地说您应该将外键存储到通知表中的用户，没有例外（除非您想将通知信息存储在用户的桌子 ：）**

编辑＃2937：

您应该将用户的**通知首选项**存储在**User**表中 - 无需将其拆分为不同的表，除非您有一些混淆设计并且已经为您的用户提供了 256 列，这就是限制。

您应该将通知存储在**单独**的表中，并具有从用户到通知的一对多关系。这是我最后的答案，瑞吉斯 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T02:12:44.357

**如果您的网站流量不大，请将其全部放在同一张表中（用户和设置）。** 这是 OP 的相关答案。
通常，当几种情况（一起）发生时，您将 1:1 分成不同的表：

1.  每组字段都与您应用中的不同模块相关
2.  每组字段以不同的速率访问（例如，每次登录的用户名/密码、每周一次/两次的计费设置）
3.  您的网站有大量流量，您需要从系统中榨取任何性能

正如您从上面看到的，大多数不需要将其分开。

# c - 为什么它会跳过 fgets()？

> ID：14698981
> 
> 赞同：0
> 
> 时间：2013-02-05T02:03:14.390
> 
> 标签：c, fgets

```
typedef struct {
int serial_no;
char s_name[100];
char s_street[50];
char s_town[20];
int s_speaker_no;
int max_no_teachers;
int no_applied_teachers;
} type_seminar;

void add_seminar() {
int seminar_number, temp_int;
char *temp_string;
temp_string = (char*) malloc(100 * sizeof(char));

FILE *f_sem;
FILE *f_school;
f_sem = fopen("seminars.bin", "a");
f_school = fopen("school_list.txt", "r");

fgets(temp_string, 10, f_school);
seminar_number = (atoi(temp_string) + 1);

type_seminar *temp_s = (type_seminar*) malloc(sizeof(type_seminar));
temp_s->serial_no = seminar_number;
temp_s->no_applied_teachers = 0;
temp_s->s_speaker_no = 0;

printf("Enter the seminar title: \n");
fgets(temp_string, sizeof temp_string, stdin);
strcpy(temp_s->s_name, temp_string);

printf("Enter the seminar address(street and house number): \n");
fgets(temp_string, sizeof temp_string, stdin);
strcpy(temp_s->s_street, temp_string);

printf("Enter the town (where the seminar will be held) : \n");
fgets(temp_string, sizeof temp_string, stdin);
strcpy(temp_s->s_town, temp_string);

printf("Enter the maximum number of the seminar participants : \n");
fgets(temp_string, sizeof temp_string, stdin);
temp_int = (atoi(temp_string));
temp_s->max_no_teachers = temp_int;

free(temp_s);
free(temp_string);
fclose(f_school);
fclose(f_sem);
} 
```

每次我运行该函数时，都会跳过用户应该输入研讨会标题的第一个 fgets()。我认为从 txt 文件中读取的 previus fgets() 在缓冲区中留下了一些东西？我不知道如何解决这个问题......另外，我是 C 和一般编程的新手，所以如果它是显而易见的......对不起：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T02:09:58.120

使用`fgets`以避免缓冲区溢出的荣誉，但你并不*完全*在那里：

```
char *temp_string;
:
temp_string = (char*) malloc(100 * sizeof(char));
:
fgets(temp_string, sizeof temp_string, stdin); 
```

的大小`temp_string`是*char 指针的大小，*而不是您分配的缓冲区的大小。这意味着您很可能最多只读取四个（或者如果您有 64 位指针，可能是八个）字符，然后其余的留在输入流中。

您应该使用缓冲区的大小（100，尽管作为定义的常量而不是硬编码的值会更好）。

或者，看看[这个 getLine 例程](https://stackoverflow.com/questions/4023895/how-to-read-string-entered-by-user-in-c/4023921#4023921)，它处理了很多边缘情况。

* * *

而且，顺便说一句，您不需要乘以，`sizeof(char)`因为根据定义总是可以保证`1`- 乘以只会阻塞您的源代码。

您也不应该从中转换返回值，`malloc`因为它可以隐藏某些细微的错误。C 非常有能力将`the`void *` 返回值隐式转换为任何其他指针类型。

您应该注意的另一件事是：即使您`fgets`用于保护`temp_string`缓冲区免于溢出，也没有为您的`strcpy`函数设置类似的保护。

这意味着它将允许您输入一个 80 个字符的城镇名称，然后它将把它不应该触及的记忆吹到`strcpy`20 个字符的结构字段中。

# perl - Perl 重定向浏览器并继续处理

> ID：14698984
> 
> 赞同：4
> 
> 时间：2013-02-05T02:03:42.827
> 
> 标签：perl, redirect

这工作正常（重定向到不同的域）：

```
#! /usr/bin/perl 
print "Location:http://AnyDomainBesidesMyOwn.com/\n\n"; 
close(STDOUT); close(STDIN); close(STDERR); 
[some long process] 
```

但是以下方式会使浏览器停止，拒绝重定向，直到漫长的过程完成。上面唯一的变化是我重定向到运行脚本的同一域上的另一个页面。

```
#! /usr/bin/perl 
print "Location:http://MyOwnDomain.com/\n\n"; 
close(STDOUT); close(STDIN); close(STDERR); 
[some long process] 
```

我知道我可以通过分叉一个新进程来让它工作，但必须有一个更简单的方法......对吗？

## 更新：这是我从 Firefox 中的 Live Headers 获得的输出：

```
http://example.com/test3.cgi 

GET /test3.cgi HTTP/1.1 
Host: example.com 
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:18.0) Gecko/20100101 Firefox/18.0 
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 
Accept-Language: en-US,en;q=0.5 
Accept-Encoding: gzip, deflate 
Connection: keep-alive 

HTTP/1.1 302 Found 
Date: Sun, 27 Jan 2013 23:31:49 GMT 
Server: Apache 
Location: http://example.com/ 
Vary: Accept-Encoding 
Content-Encoding: gzip 
Content-Length: 187 
Keep-Alive: timeout=2, max=100 
Connection: Keep-Alive 
Content-Type: text/html; charset=iso-8859-1 
```

* * *

## 然后在它设计重定向之后：

```
http: //example.com/ [Have to include the space b/c stackoverflow limits the number of links I can include in a post]

GET / HTTP/1.1 
Host: example.com 
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:18.0) Gecko/20100101 Firefox/18.0 
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 
Accept-Language: en-US,en;q=0.5 
Accept-Encoding: gzip, deflate 
Connection: keep-alive 

HTTP/1.1 200 OK 
Date: Sun, 27 Jan 2013 23:31:54 GMT 
Server: Apache 
Accept-Ranges: bytes 
X-Mod-Pagespeed: 0.10.21.2-1381 [Same problem even on a domain w/o pagespeed installed]
Vary: Accept-Encoding 
Content-Encoding: gzip 
MS-Author-Via: DAV 
Cache-Control: max-age=0, no-cache 
Content-Length: 12189 
Keep-Alive: timeout=2, max=99 
Connection: Keep-Alive 
Content-Type: text/html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-07T00:08:02.330

我相信经过一些试验和错误后我找到了解决方案。关键是使用`fork()`和退出父进程。然后关闭子进程中的所有文件句柄：

```
#!/usr/bin/perl

print "Location: ../myHomePage.htm\n\n"; 

exit 0 if fork();
close(STDIN);
close(STDOUT);
close(STDERR);

# do some long process
open(SM, "| /usr/sbin/sendmail -ti -odq); 

⋮ 
```

就我而言，邮件程序需要几秒钟来接受消息并将其排队。网页看起来非常缓慢。执行上述操作后，重定向立即发生，几秒钟后消息出现在邮件日志中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T08:35:57.317

您应该在发送重定向标头后退出。如果我是正确的，在“位置：”之后需要一个空格。您可以使用 CGI 重定向方法来实现这一点。

```
 #!/usr/bin/perl
  print "Location: http://MyOwnDomain.com/\n\n"; 
  close(STDOUT); close(STDIN); close(STDERR); 
  exit 0; 
```

使用 CGI 重定向：http: [//perldoc.perl.org/CGI.html#GENERATING-A-REDIRECTION-HEADER](http://perldoc.perl.org/CGI.html#GENERATING-A-REDIRECTION-HEADER)

```
 use CGI; # load CGI routines
  $q = CGI->new; 
  print $q->redirect('http://somewhere.else/in/movie/land'); 
```

# c# - 如何让 GridView 适应 Windows Store 应用中的不同分辨率

> ID：14698988
> 
> 赞同：2
> 
> 时间：2013-02-05T02:04:16.460
> 
> 标签：c#, xaml, gridview, windows-8, windows-runtime

在 Windows Store 应用中，如果内容是固定的，我们可以将其封装到一个 ViewBox 中，让内容适应不同的分辨率。但是，如果内容不固定，在我的应用程序中，有一个 GridView 哪些项目是动态的，如何使其适应不同的分辨率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T03:59:41.530

如果您有自适应布局，则可以使用[ListView](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.listview.aspx)等控件根据屏幕分辨率动态增长。更多内容请参见[缩放至屏幕指南](http://msdn.microsoft.com/en-us/library/windows/apps/hh780612.aspx)。此外，请查看 Visual Studio 2012 中的模板项目。它们对其内容使用自适应布局。

# python - 如何将 aa 数字向量映射到 python 中的颜色？

> ID：14698989
> 
> 赞同：0
> 
> 时间：2013-02-05T02:04:19.710
> 
> 标签：python, django, matplotlib

我很难找到一种将数字向量转换为“好”色标（ala matplotlib）的方法，这样我就可以只拥有颜色值的向量。这对于在 django 中呈现一些静态 html 页面很有用。有什么想法吗？

谢谢各位的解答！真的很有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:49:17.037

您可以使用以下代码：

```
from __future__ import division

import numpy
import matplotlib.cm as cmap

r = numpy.random.rand(1000)                             #random numbers
c = cmap.jet(numpy.int_((r-r.min())/r.ptp()*255))       #colors 
```

所以你尝试：

```
>>> r
array([ 0.88741281,  0.61022571,  0.14819983,  0.3695846 ,  0.73832029,
        0.6266069 ,  0.6917337 ,  0.09162752,  0.83532511,  0.54001574, ...,])
>>> c
array([[ 1\.        ,  0.08787219,  0\.        ,  1\.        ],
       [ 0.83175206,  1\.        ,  0.13598988,  1\.        ],
       [ 0\.        ,  0.08039216,  1\.        ,  1\.        ],
       ..., 
       [ 0\.        ,  0.72352941,  1\.        ,  1\.        ],
       [ 0.24984187,  1\.        ,  0.71790006,  1\.        ],
       [ 1\.        ,  0.45098039,  0\.        ,  1\.        ]]) 
```

它们是 RGBA 格式的每一行的颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T10:18:04.023

你也可以看看[ColorConverter](http://matplotlib.org/api/colors_api.html#matplotlib.colors.ColorConverter)。它提供了一些将有效的 matplotlib 颜色转换为 RGB 或 RGBA 的方法。

有效的 matplotlib 颜色是

> 1.  来自集合'rgbcmykw'的一封信
> 2.  十六进制颜色字符串，例如 '#00FFFF'</li>
> 3.  标准名称，如 'aqua' 浮点数，如 '0.4'，表示灰色
> 4.  0-1 比例

# javascript - getBlock('meta') 如何在 DocPad 中工作？

> ID：14698992
> 
> 赞同：2
> 
> 时间：2013-02-05T02:04:32.937
> 
> 标签：javascript, node.js, docpad, static-site

我正在将网站从不同的站点生成器移动到[DocPad](http://www.docbad.org)，并试图了解*getBlock('meta')*功能。弄清楚*getBlock('scripts')*和*getBlock('styles')*非常容易，因为我只需要将单个资源位置传递给数组中的*.add*方法，每个位置占用一个空间。另一方面，生成元标记似乎必须稍微复杂一些，因为每个标记都有两个组件：名称和值。

我的问题是，如何将元标记名称和值传递给*getBlock('meta').add()*以便它为我创建一些元标记？

另外，我注意到*getBlock('meta')*默认创建一个标签：

```
<meta http-equiv="X-Powered-By" content="DocPad"/> 
```

我不想在我的标记中有。我完全赞成将令人敬畏的 DocPad 项目归功于它，但是我更喜欢以不同的方式和在不同的位置进行。如何防止生成该标签？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T22:03:23.243

@przemo_li 和 @Rafael Epplee 是对的，通过标准安装，如果您有时间提交拉取请求以通过 docpad 配置选项使该支持的元元素成为可选，则元块只会输出该内容 - 我很乐意接受。

然而，它的意义不仅仅是输出那个由驱动的元素，而是让插件能够注入他们自己的元数据——我还不知道有任何插件这样做，但可以从以下给出一个很好的例子@Rafael 的示例 - 您通过文档的元数据定义元元素，然后使用插件将它们注入元块，让您轻松拥有特定于页面的元数据。另一个例子可能是根据文档的编码适当地注入字符集/编码元元素，而不是总是使用标准 utf8 编码的布局。

因此，虽然它现在不是那么有用，但有一天插件可能会需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:59:35.773

在我看来，docpad 对`getBlock('meta').add()`. 我查看了源代码，其他块都在 add() 上生成了一些特定于块的 HTML，而元块没有。

我的猜测是 docpad 自动从文档中收集元数据并以其他方式将它们插入到元块中。

我认为目前将元数据添加到您的站点的唯一可能方法是使用文档或 docpad.coffee 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T21:31:30.043

忘掉它。

手写你自己的元数据。在您的布局中。

只要您不需要特定于页面的元数据，您就可以使用。

如果您需要它，您可以随时更改 DocPad 的源代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-14T22:12:39.123

我的回答已经很晚了，但到目前为止，Docpad 是 v6.78.4，并提供了挂钩事件的方法，这正是我们所需要的。

首先，Docpad *meta*是一个出人意料的平淡无奇的[MetaCollection](https://github.com/docpad/docpad/blob/master/src/lib/collections/meta.coffee)，它基本上是一个项目数组，带有一种`.toHTML()`将它们连接成字符串的方法。它被称为*块*，因为它驻留在可以在其他地方修改的不同结构中，并且具有一组单独的方法，例如`getBlock()`和`setBlock()`

[事件](http://docpad.org/docs/events)是可以触发用户代码的预定义点。我建议对元事物使用 generateBefore，以便在生成任何内容之前设置它：

```
# Define the DocPad Configuration
docpadConfig = {
    # ...
    events:
        generateBefore: () ->
            @docpad.getBlock('meta').add('<meta name="viewport" content="width=device-width,initial-scale=1"/>')
} 
```

至于第二个问题，元`generator`（我猜它是 X-Powered-By 在问题中）有条件地添加到`DocPad.prototype.resetCollections`：

```
if (docpad.getConfig().poweredByDocPad !== false) {
    meta.add("<meta name=\"generator\" content=\"DocPad v" + (docpad.getVersion()) + "\" />");
} 
```

`poweredByDocPad: false`您可以通过在`docpad.coffee`文件中添加 a 来禁用它。

# pass-by-reference - 检索和更改同一行中的值可能会导致哪些潜在错误？

> ID：14698993
> 
> 赞同：-3
> 
> 时间：2013-02-05T02:04:34.637
> 
> 标签：pass-by-reference, pseudocode

我被问到如果我尝试检索参考值然后尝试在同一行代码中更改它会发生什么。我的回答是什么都不会发生，因为我在没有遇到任何编译器错误（至少在 C# 或 Java 中）之前尝试这样做。

这个问题的真正答案是什么？

这是伪代码的示例：

```
Module main()
    Call changeNumber(10)
End Module

Module changeNumber(Integer Ref number)
    Set number = number * number
    Display number
End Module 
```

（PS。很抱歉没有正确格式化/创建这篇文章。我在[这里遇到了一些问题](https://meta.stackexchange.com/questions/166268/what-is-happening-to-stackoverflow-css-styles-arent-loading)。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T02:07:31.267

在您的特定伪代码中，什么都不会发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T02:08:21.557

如果您要问的话，不会有不寻常的副作用。语言规范规定了特定的执行顺序（`number * number`被评估，*然后*设置为`number`），这可以防止任何问题的发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T21:09:40.000

关于您在此问题后提出的问题-

实际上，在极少数情况下可能会出现问题，但这取决于您如何为数字和编码语言分配空间。考虑一下。您将数据类型明确命名为 int，如果接受的输入是大于 int 可以处理的数字（或负数）怎么办，最终是 x 整数长，然后将其乘以相同的数字，您分配的空间（通常具有整数填充）也可能没有足够的空间，对于这个特定实例来说太小，这将导致 C 中的分段错误。取决于您使用的语言，它是否比 C 更高级别，它可能对这种情况进行编译检查，但并非总是如此。

# c++ - 是否有任何广泛使用的支持测试类别的 C++ 单元测试框架？

> ID：14698999
> 
> 赞同：6
> 
> 时间：2013-02-05T02:05:22.717
> 
> 标签：c++, unit-testing

我目前正在使用 CppUnit 进行测试，但由于缺乏对[Categories](http://www.nunit.org/index.php?p=category&r=2.2)概念的支持而感到沮丧。**是否有任何广泛使用的 C++ 单元测试框架支持这个想法？**

这是直接来自 NUnit 文档的示例：

```
namespace NUnit.Tests
{
  using System;
  using NUnit.Framework;

  [TestFixture]
  [Category("LongRunning")]
  public class LongRunningTests
  {
    // ...
  }
} 
```

这个想法是能够将测试分组到不同的类别中，并在指定的类别中执行测试，或者可能根据它们的类别排除测试。

我尝试过 CppUnit、Boost.Test 和 Google Test，它们都没有直接支持这个想法。

*例如，*我有*单元*测试、*集成*测试、*中型*测试和*大型*测试。*单元*和*集成*测试运行很快，所以我在自动构建的每个构建配置中运行它们：Release/Debug、x86/x64、linux/windows。*中等*测试需要时间来运行，所以我只在*Release|x64|windows*构建中运行它们。*大的*测试作为开发辅助存在：它们永远不会在自动构建中运行。然后为了增加乐趣，我有只存在于 x86|windows 中的功能（这很复杂）。我用一个复杂的层次结构来完成这一切，CppUnit 很高兴地支持它。但是，使用“发布”、“调试”、“x86”等类别会更好。

在 CppUnit 中，我的测试目前在 Fixture 类中。理想情况下，我希望能够用类别标记这些装置，然后我可以相应地过滤它们。

*测试层次结构没有*做的一件关键事情，即哪些类别*会*做，是在一个夹具上拥有多个类别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T03:49:55.583

我不确定我是否理解这个问题。请允许我写一些伪代码，看看我是否理解：

```
class TestCategory : public CPPUNIT_NS::TestCase {

    CPPUNIT_TEST_SUITE_BEGIN(TestCategory);
    CPPUNIT_TEST(myTestFunction);
    CPPUNITT_TEST_SUITE_END();

protected:

    void myTestFunction() {}

} 
```

你可以有*n*个这样的类。主要是：

```
// headers omitted

CPPUNT_TEST_SUITE_REGISTRATION(TestCategory)
// more registrations here
CPPUNIT_TEST_SUITE_REGISTRATION(TestCategory_n_)

int main(int argc, char** argv) {

   // test runner steps
} 
```

请原谅我的迟钝，但您正在寻找测试架构中的逻辑分区，是吗？如果是这样，您可以通过类对测试进行分组，并根据需要将它们包含在主函数中。

帮我理解。谢谢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-12T08:12:52.793

Boost.Test 中的[**--run_test**](http://www.boost.org/doc/libs/1_55_0/libs/test/doc/html/utf/user-guide/runtime-config/run-by-name.html)[选项](http://www.boost.org/doc/libs/1_55_0/libs/test/doc/html/utf/user-guide/runtime-config/run-by-name.html)**支持测试和/或套件名称的通配符匹配。我不完全确定匹配有多灵活，但是如果您要将类似标签的命名部分放入您的测试（-套件）名称中，您也许可以运行`--run_test=suite_LongRunning*/*`类似的东西。**

 *** * *

我还偶然发现了[**xUnit++**](https://bitbucket.org/moswald/xunit/wiki/Compare.wiki)，它具有可用于[运行](https://bitbucket.org/moswald/xunit/wiki/RunningTests.wiki)不同类别的[属性。](https://bitbucket.org/moswald/xunit/wiki/SuitesAndAttributes.wiki)（由于它是仿照 NUnit 建模的，这应该不足为奇。）**