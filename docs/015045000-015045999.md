# StackOverflow 问答 15045000-15045999

# github - 安装 Github for Eclipse 的未解决依赖项

> ID：15045004
> 
> 赞同：2
> 
> 时间：2013-02-23T20:02:22.040
> 
> 标签：github, eclipse-plugin

我真的不明白这一点。我正在尝试从市场上为 Eclipse 安装 Github 插件。我尝试了各种各样的事情，但我总是以某种不满意的依赖而告终。

```
Cannot complete the install because one or more required items could not be found.
Software being installed: Eclipse EGit Mylyn GitHub Feature 2.2.0.201212191850-r (org.eclipse.mylyn.github.feature.feature.group 2.2.0.201212191850-r)
Missing requirement: Mylyn GitHub Connector UI 2.2.0.201212191850-r (org.eclipse.mylyn.github.ui 2.2.0.201212191850-r) requires 'package org.eclipse.egit.core[2.2.0,2.3.0)' but it could not be found
Cannot satisfy dependency:
From: Eclipse EGit Mylyn GitHub Feature 2.2.0.201212191850-r (org.eclipse.mylyn.github.feature.feature.group 2.2.0.201212191850-r)
To: org.eclipse.mylyn.github.ui [2.2.0.201212191850-r] 
```

![图片](../Images/d081e58b541ce13538fb2dc621aaf41e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T17:45:13.543

Github 集成 2.2 需要 Egit 2.2，而后者又需要 Eclipse 3.7.2 或更高版本：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=365425](https://bugs.eclipse.org/bugs/show_bug.cgi?id=365425)

很可能，您的 Eclipse 安装版本比 3.7.2 旧。

# objective-c - 从 Xcode 中的其他类继承

> ID：15045010
> 
> 赞同：0
> 
> 时间：2013-02-23T20:02:51.277
> 
> 标签：objective-c, xcode, inheritance, superclass

我正在为 Person 和 PersonChild 类做一个例子。我想知道为什么我可以从 Person 类中得到这个 Int 。

//主要的

```
#import <Foundation/Foundation.h>
#import "Person.h"
#import "PersonChild.h"

int main(int argc, const char * argv[]){
    @autoreleasepool {
        PersonChild *Ben = [[PersonChild alloc]init];
        Ben.age = 25;  <-- Property 'age' not found on object of type 'PersonChild *'
        [Ben printThing];
    }
    return 0;
} 
```

//人物类

```
#import "Person.h"

@implementation Person
@synthesize age, weight;

@end 
```

//人.h

```
#import <Foundation/Foundation.h>

@interface Person : NSObject{
    int age;
}
@property int age, weight;
@end 
```

//PersonChild 类

```
#import "PersonChild.h"

@implementation PersonChild

-(void) printThing{
   NSLog(@"%i", age);
}
@end 
```

//PersonChild.h

```
#import <Foundation/Foundation.h>
#import "Person.h"

@class Person;
@interface PersonChild : NSObject

-(void) printThing;

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T20:30:37.377

PersonChild 不是从 Person 继承的。PersonChild.h 的正确语法是：

```
#import "Person.h"
@interface PersonChild : Person 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T20:18:25.837

除非您错误地列出了标题，否则“age”是 person.h 的一个属性，而“Ben”是 personChild.h 的一个实例

类的任何实例使用的实例变量 (iVar) 必须在该类（或超类）中声明为实例变量。

我认为您混淆了继承和导入。您在上面所做的是将 Person.h 导入 PersonChild.h 并假设这将导致所有“Person”类 iVar 在“PersonChild”类中可用。

理解差异的一种方法是将 PersonChild.h 更改为以下内容。请注意如何在@interface 行添加 Person 是说 PersonChild 类继承自 Person 类的正确方法。这应该可以解决您的错误。

```
#import <Foundation/Foundation.h>
#import Person.h    

@interface PersonChild : Person

-(void) printThing;
@end 
```

希望这可以帮助

# ruby-on-rails-3 - 如何使用 Accepts_nested_attributes_for 保存模型？

> ID：15045013
> 
> 赞同：0
> 
> 时间：2013-02-23T20:03:10.873
> 
> 标签：ruby-on-rails-3

我有一个模型用户，它有大约 40 个表单字段。然后我在表单中有 3 个属于 Child 模型的字段。它们是：年龄，：性别，：家庭。

我查看了accepts_nested_attributes_for 的文档，对如何将子模型保存到数据库感到有些困惑。

在我的 UsersController 中，我有以下内容：

```
@user = User.new(params[:user])
...
@user.save 
```

现在在 Rails 文档中，他们有一个名为 Member 的模型，在其中，它 has_many :posts 和 accept_nested_attributes_for :posts。他们像这样保存成员模型：

```
params = { :member => {
  :name => 'joe', :posts_attributes => [
    { :title => 'Kari, the awesome Ruby documentation browser!' },
    { :title => 'The egalitarian assumption of the modern citizen' },
    { :title => '', :_destroy => '1' } # this will be ignored
  ]
}}

member = Member.create(params['member']) 
```

但是我已经有了 params[:member] 和 params[:user] 的等价物。我的 3 个子字段：age、:gender 和 :home 在 params[:age]、params[:gender] 和 params[:home] 中。所以我想我的问题是如何保存用户模型并将 3 个子字段保存在子模型中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T20:57:09.617

您需要正确设置表单以使用`accepts_nested_attributes_for`.

因此，在您的`User`模型中，您将拥有：

```
accepts_nested_attributes_for :child 
```

在您的表格中，您可以这样做：

```
form_for @user do |f|
  f.text_field :name #or whatever your user attributes

  f.fields_for :child, @user.build_child do |child|
    child.text_field :age
    #etc
  end
end 
```

现在，rails 应该将对象构建为`child`对象的一部分`user`，并且您应该能够一次性创建`user`and`child`对象。

是 put`child`还是`children`for`accepts_nested_attributes_for`完全取决于 a`user`和 a 之间的关系`child`。如果 a `user`just `has_one :child`，那么以上就足够了。如果是`has_many`关系，您需要将符号更改为`:children`并将其更改`@user.build_child`为`@user.children.build.`

另外，不要忘记添加`(child|children)_attributes`到您`attr_accessible`的`user`模型中，否则您将无法通过表单提交来批量分配它们。

# c++ - 在 C++ 中返回一个向量数组

> ID：15045015
> 
> 赞同：1
> 
> 时间：2013-02-23T20:03:13.357
> 
> 标签：c++, arrays, pointers, vector

我很难返回一个字符串向量数组。我有一个功能：

```
std::vector<std::string>* generatecVec(std::vector<std::string> strVec){
  std::vector<std::string> cVec[3];
  cVec[0].push_back("Test11");
  cVec[0].push_back("Test12");
  cVec[0].push_back("Test13");
  cVec[1].push_back("Test21");
  cVec[1].push_back("Test22");
  cVec[1].push_back("Test23");
  cVec[2].push_back("Test31");
  cVec[2].push_back("Test32");
  cVec[2].push_back("Test33");
  return cVec;
} 
```

后来我使用了类似的功能

```
std::vector<std::string> *cVec = generatecVec(strVec);
for(std::vector<string>::iterator it = cVec[0].begin(); it != cVec[0].end(); ++it) {
    std::cout << *it;
} 
```

但我不断收到分段错误。我意识到我必须不正确地使用指针，但我该如何解决这个问题？我使用向量数组是因为它很容易通过索引来引用它（我只需要三个，非动态的）。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T20:05:25.410

您正在返回一个指向仅存在于函数范围内的东西的指针。一旦函数完成，就会`cVec`消失，调用者会留下一个悬空指针。我建议返回一个可以实际复制的对象，例如`std::array<std::vector<std::string> 3>`.

```
#include <array> // for std::array

std::array<std::vector<std::string>,3> generatecVec(/*std::vector<std::string> strVec*/){
  std::array<std::vector<std::string>,3> cVec;
  cVec[0].push_back("Test11");
  cVec[0].push_back("Test12");
  cVec[0].push_back("Test13");
  cVec[1].push_back("Test21");
  cVec[1].push_back("Test22");
  cVec[1].push_back("Test23");
  cVec[2].push_back("Test31");
  cVec[2].push_back("Test32");
  cVec[2].push_back("Test33");
  return cVec;
} 
```

我在这里注释掉了`strvec`，因为它似乎在函数中没有任何作用。

然后您可以像这样使用它（基于 C++11 范围的 for 循环语法）：

```
auto cVec = generatecVec(); // no strVec because it doesn't play any role
for(auto it = cVec[0].cbegin(); it != cVec[0].cend(); ++it) {
    std::cout << *it;
} 
```

请注意，`push_backs`如果您的编译器支持 C++11 初始化程序列表初始化，则可能不需要。

如果您的编译器不支持`std::array`，请尝试`std::tr1::array`from 或`boost::array`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T20:17:15.883

奇怪的是，当您需要收集字符串时使用字符串向量，而当您需要收集向量时使用指针。使用 typedef 应该有助于抽象细节并查看可能的解决方案：

```
typedef std::vector<std::string> strings;
typedef std::vector<strings> strings_seq;

strings_seq generateVec()
{
  strings_seq cVec( 3 );
  cVec[0].push_back("Test11");
  cVec[0].push_back("Test12");
  cVec[0].push_back("Test13");
  cVec[1].push_back("Test21");
  cVec[1].push_back("Test22");
  cVec[1].push_back("Test23");
  cVec[2].push_back("Test31");
  cVec[2].push_back("Test32");
  cVec[2].push_back("Test33");
  return cVec;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T20:17:27.447

正如其他人已经解释的那样，您正在返回一个本地引用，即函数范围之外的垃圾。根据经验，我尽量避免使用原始指针，因为最终我忘记在使用后删除指针，或者初始化一个指针以开始。

当您返回 std::array 或 std::vector 时，您调用复制构造函数并接收向量、数组等的新副本......我个人倾向于在这些情况下使用 boost shared_ptr，因为它们克服了大多数缺点带有经典的 C 指针

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T20:07:21.953

您正在返回一个指向自动数组的指针，该数组在超出范围时被破坏，并且您的指针指向一个充满破坏向量的破坏数组。

使用`std::array`并按值返回：

```
// This means: std::array of 3 std::vector<string>
//   Type--VVVVVVVVVVVVVVVVVVVVVVVV  V-- Array size
std::array<std::vector<std::string>, 3> generatecVec(std::vector<std::string> strVec){
  return { {
     { "Test11", "Test12", "Test13" },
     { "Test21", "Test22", "Test23" },
     { "Test31", "Test32", "Test33" }
  } };
}

auto cVec = generatecVec(strVec);
for(auto it = cVec[0].begin(); it != cVec[0].end(); ++it) {
    std::cout << *it;
} 
```

# entity-framework - MVC 4 处理全局数据

> ID：15045016
> 
> 赞同：0
> 
> 时间：2013-02-23T20:03:20.827
> 
> 标签：entity-framework, asp.net-mvc-4

我有一个两部分的问题，并希望得到一个“最佳实践”的建议。

1.  如标题所述，我使用 MVC 4 来允许用户登录到他们的组织。我的所有模型都将存储此组织 ID，以便在创建数据库条目时使用。因为有很多场景（用户可以设置成员资格以保持登录状态，因此登录控制器操作永远不会触发）或者他们可以注销并重新登录等。有没有一个地方最好设置这个组织信息所以所有控制器/视图都可以访问它？

2.  我目前在我的一个模型中只设置了一个静态变量，似乎应该有一种更好、更强大的方法来做到这一点。

感谢大家花时间提供帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:53:00.080

听起来像是[Application State](http://msdn.microsoft.com/en-us/library/ms178594%28v=vs.100%29.aspx)的工作。

> 应用程序状态是可供 ASP.NET 应用程序中的所有类使用的数据存储库。应用程序状态存储在服务器的内存中，比在数据库中存储和检索信息要快。与特定于单个用户会话的会话状态不同，应用程序状态适用于所有用户和会话。因此，应用程序状态是存储少量常用数据的有用地方，这些数据不会从一个用户更改为另一个用户。

恕我直言，重新发明轮子没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:20:57.110

根据我的说法，您应该将有关用户的数据保存在`session storage`/中`cookie storage`，以便任何人都可以

在您需要访问它的任何地方访问它，只需检查用户是否经过身份验证，`true`然后访问数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T21:15:50.983

您可以创建一个 BaseController 类，该类又继承自：Controller。

所以你们所有的控制器都被声明了

```
 public class HomeController : MYBaseController 
```

这个基本控制器类可以完成所有的全局工作。

# wordpress - 如何修改查询？

> ID：15045017
> 
> 赞同：0
> 
> 时间：2013-02-23T20:03:22.290
> 
> 标签：wordpress

我需要修改单页上的查询以显示带有 post_status 发布和未来的帖子（默认不显示带有未来帖子状态的帖子）。这是我的代码，但不工作

```
query_posts($query_string . '&post_status=publish,future'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T17:04:29.623

要获得这两个帖子，您需要对 post_status 使用以下代码

$args = array('post_status' =>array('future','published')); 查询帖子（$args）；

# sql - SQL Server 使用 IN 语句选择别名不起作用

> ID：15045020
> 
> 赞同：1
> 
> 时间：2013-02-23T20:03:34.693
> 
> 标签：sql, sql-server, select, alias

我有以下`SELECT`声明。

```
SELECT t.ID, 
       t.SiteID, 
       t.SpareID, 
       t.SpareLocationID, 
       t.Qty, 
       t.IsDefault
  FROM TrainingDB.dbo.LocationsPerSpare t
 WHERE t.SpareID IN
       (SELECT s.SpareID
          FROM TrainingDB.dbo.LocationsPerSpare s
         WHERE s.SpareLocationID = t.SpareLocationID
           AND s.SpareID = t.SpareID
         GROUP BY s.SpareID
        HAVING COUNT(CONVERT(VARCHAR(36), s.SpareID)) > 2)
 ORDER BY t.SpareID 
```

如果我执行该脚本，它会返回`NULL`. 但是，如果我如下删除`t.`别名，它会正常运行。

```
SELECT ID, 
       SiteID, 
       SpareID, 
       SpareLocationID, 
       Qty, 
       IsDefault
  FROM TrainingDB.dbo.LocationsPerSpare 
 WHERE SpareID IN
       (SELECT s.SpareID
          FROM TrainingDB.dbo.LocationsPerSpare s
         WHERE s.SpareLocationID = SpareLocationID
           AND s.SpareID = SpareID
         GROUP BY s.SpareID
        HAVING COUNT(CONVERT(VARCHAR(36), s.SpareID)) > 2)
 ORDER BY SpareID 
```

我觉得这很奇怪。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:17:15.300

你需要删除

```
AND s.SpareID = t.SpareID 
```

从您的子查询中。当 SpareID 还没有值时，您正在使用子查询过滤主查询中 SpareID 的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:53:30.223

顺便说一句，您可以在不使用连接的情况下重写此查询，而是使用窗口函数：

```
select lps.ID, lps.SiteID, lps.SpareID, lps.SpareLocationID, 
       lps.Qty, lps.IsDefault
from (select lps.*,
             count(*) over (partition by spareId) as SpareCnt
      from TrainingDB.dbo.LocationsPerSpare lps
     ) lps
where SpareCnt > 2 
```

您需要别名的原因是因为子查询中的非别名列被分配给最近引用处的表。所以，

```
 where s.SpareID = t.SpareID 
```

将外部表引用中的 SpareId 与内部表引用进行比较。

```
 where s.SpareID = SpareID 
```

首先确定`SpareID`来自哪个表。它匹配内部子查询中的列，因此它使用它。表达式等价于：

```
where s.SpareID = s.SpareId 
```

最后，`convert`with的用户`count`是完全没有必要的。 `Count`只是计算非 NULL 值的数量，并且在转换为字符串时不会改变。

例如，当我测试这段代码时，它工作正常：

```
declare @t uniqueidentifier = newid();

select count(distinct t)
from (select @t as t) v 
```

虽然有趣的是，这段代码在 SQLFiddle 上不起作用。但是存在`@t`未定义的错误，这是不相关的。

# java - 2个线程依次打印数字

> ID：15045028
> 
> 赞同：3
> 
> 时间：2013-02-23T20:03:54.943
> 
> 标签：java, multithreading

我有线程 t1 打印 `odd number 1 3 5 7...`

我有线程 t2 打印`even number 0 2 4 6 ...`

我希望从这两个线程按顺序打印输出，例如

```
 0 1 2 3 4 5 6 7 
```

我不想在这里写代码，请指导我在 java 中使用什么框架？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T20:17:30.410

让两个线程交替使用的最简单方法是每个线程`java.util.concurrent.CountDownLatch`在打印后创建一个计数为 1 的集合，然后等待另一个线程释放其锁存器。

```
Thread A: print 0
Thread A: create a latch
Thread A: call countDown on B's latch
Thread A: await
Thread B: print 1
Thread B: create a latch
Thread B: call countDown on A's latch
Thread B: await 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T20:17:38.537

我可能会做类似的事情：

```
public class Counter
{
  private static int c = 0;

  // synchronized means the two threads can't be in here at the same time
  // returns bool because that's a good thing to do, even if currently unused
  public static synchronized boolean incrementAndPrint(boolean even)
  {
    if ((even  && c % 2 == 1) ||
        (!even && c % 2 == 0))
    {
      return false;
    }
    System.out.println(c++);
    return true;
  }
} 
```

线程 1：

```
while (true)
{
  if (!Counter.incrementAndPrint(true))
    Thread.sleep(1); // so this thread doesn't lock up processor while waiting
} 
```

线程 2：

```
while (true)
{
  if (!Counter.incrementAndPrint(false))
    Thread.sleep(1); // so this thread doesn't lock up processor while waiting
} 
```

可能不是最有效的做事方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T21:14:39.003

两个信号量，每个线程一个。使用信号量在线程之间发出“printToken”信号。伪：

```
CreateThread(EvenThread);
CreateThread(OddThread);
Signal(EvenThread);
..
..
EvenThread();
  Wait(EvenSema);
  Print(EvenNumber);
  Signal(OddSema);
..
..
OddThread();
  Wait(OddSema);
  Print(OddNumber);
  Signal(EvenSema); 
```

# php - 可以注入 SELECT 语句吗？

> ID：15045029
> 
> 赞同：0
> 
> 时间：2013-02-23T20:04:01.557
> 
> 标签：php, sql, sql-injection

我正在重新编码我网站上的所有 sql 语句以使用 PDO 和准备好的语句。我已尽力了解 SQL 注入的工作原理，所以我有一个问题。

如果我有一个页面说 viewitems.php 该页面将查询数据库并从表中提取所有数据并将其全部显示在页面上。由于用户没有任何输入可以注入吗？我知道可以注入使用带有标题变量的数据向下钻取的页面，因为用户可能会弄​​乱标题，但是如果将 SQL 编码到页面中而无需任何外部变量，是否可以注入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T20:05:46.203

> 我正在重新编码我网站上的所有 sql 语句以使用 PDO 和准备好的语句。

**太棒了。**

> 由于用户没有任何输入可以注入吗？如果将 SQL 编码到页面中而无需任何外部变量，是否可以注入？

如果 SQL 语句中没有运行时变量，则不存在，该语句不易受到 SQL 注入攻击。在这种情况下使用准备好的语句仍然没有害处。出于多种原因，这样做甚至可能是有益的：

*   与其他确实需要使用准备好的语句的代码保持一致（为了安全）
*   如果/当您确实需要查询中的参数时，面向未来
*   查询缓存（尽管这取决于您的特定数据库和/或驱动程序；请参阅[1](https://stackoverflow.com/q/1884576/139010)和[2](https://stackoverflow.com/q/2433350/139010)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T20:07:38.040

> 可以注入 SELECT 语句吗？

一般情况下是
的。

但是，如果将 SQL 编码到没有变量的页面中，那么当然不可能没有注入，因为没有任何东西可以注入。

但是，如果将 SQL 编码到页面中并注入了一些变量，尽管是“非外部的”，那么二阶注入是很有可能的。
这就是为什么**如果总是使用准备好的语句可以做任何事情，没有例外。**

# html - 用于响应式结帐流程的表格或 div？

> ID：15045032
> 
> 赞同：1
> 
> 时间：2013-02-23T20:04:30.557
> 
> 标签：html, twitter-bootstrap, e-commerce, shopping-cart, fluid

我正在研究电子商务的结帐流程，并且该网站应该是完全响应的。我使用 Bootstrap 作为基线，而表格对于移动视图来说总是很痛苦。

我看过很多关于表格的不同解决方案，他们并没有真正考虑表单元素等元素（数量、颜色选择器、删除、添加到购物车按钮）

网站上有很多微妙的表格变化，想在开发之前看看其他人的想法。

**我的问题是..**

考虑语义、维护、可用性，最好使用表还是使用其他元素构建它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T20:20:08.003

表应该只用于呈现表格数据。

它们的包含将减慢许多浏览器中的布局过程，导致响应性较差的 UI 体验。

# javascript - 在jQuery中模拟每5秒点击一次空格键

> ID：15045033
> 
> 赞同：1
> 
> 时间：2013-02-23T20:04:40.160
> 
> 标签：javascript, jquery

我想每 5 分钟模拟一次空格键的点击，我该怎么做，我知道空格键的 ascii 代码是 32 在 jQuery 中我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T20:20:38.763

这是一个演示每 750 毫秒向元素发送一次按键的 plunker，但您可以根据需要配置时间

[http://plnkr.co/edit/33yTNn1dKFhKMwSls5MU](http://plnkr.co/edit/33yTNn1dKFhKMwSls5MU)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T20:09:29.037

您应该为您选择的控件的按键事件分配一个事件处理函数，然后设置一个调用相同函数的[setInterval 。](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)

# java - 为什么我不能将 Object 类型的对象添加到 List 中？

> ID：15045034
> 
> 赞同：2
> 
> 时间：2013-02-23T20:04:42.417
> 
> 标签：java, generics

据我了解， a `List<?>`被定义为*一些特定但未知类型的列表*。所以无论 this 的参数类型是什么`List`，它都应该是扩展的，`Object`因为在 Java 中你不能有任何不扩展的类型`Object`。那么为什么下面的代码没有被编译呢？它是如何违反不变量的`listObj`

```
 List<?> listObj = returnSomeList();
    listObj.add(new Object()); //Why does this not work ? 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T20:09:52.660

`List<?> listObj`可以指向可以存储不同类型对象的任何类型的 List。

您如何看待，例如，让它添加任何对象是否安全

```
List<?> listObj = new ArrayList<String>();
listObj.add(new Object()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T20:07:25.557

```
List<?> and `List<? extends Object>` are identical. 
```

您不能将任何东西添加到使用的集合中？扩展类型语法（带有子类型的通配符）。**原因**是您可能只是将错误的类型添加到集合中。

## 如果允许：

```
List<?> listOfObjects = new ArrayList<Object>();
listOfObjects.add(new Object()); //not valid
somewhere in future

listOfObjects = new ArrayList<Animal>();
listOfObjects.add(new Animal()); 
```

如果允许，您只需将 Animal 添加到 Object 列表中，这会破坏泛型类型的全部原因。当您从集合中检索 Animal 时，您必须再次执行**instanceOf**检查以查看它是否是 Animal 并将其转换回 Animal，就像我们**在前泛型代码中所做的那样。**

**[相关问题](https://stackoverflow.com/questions/13993745/add-strings-through-use-of-generic-extends-causes-compiler-error/13993770#13993770)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T20:33:57.797

您正在混淆 a`List<Object>`和 a `List<?>`or `List<? extends Object>`。

使用 a `List<Object>`，您可以将任何内容放入其中，但这`List<?>`并不意味着这是一个 List 或它将（必然）收到 a `List<Object>`。

它可以接收一个`List<Object>`，在这种情况下添加一个 Object 是允许的；但是，它也可以接收任何其他内容，例如 a `List<Integer>`、 a`List<String>`或 a `List<Animal>`。显然，您不能将 Object 添加到 a `List<Integer>`、 a`List<String>`或 a `List<Animal>`。

由于编译器不会记住指令之间对象的类型，因此即使您将对象设置`List<?>`为 a ，添加对象也将始终是非法的，`List<Object>`因为编译器不会记住您已将其设置为 a `List<Object>`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T20:18:05.620

“？” 称为**WildCard Capture**，这意味着类型参数与未知类型匹配。这表示

```
 List<?> listObj = returnSomeList(); 
```

是一个列表

```
 Unknown Type 
```

并且您正在尝试将**对象**添加到列表中

```
 Unknown Type. 
```

您发布的示例会给您编译时错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-23T20:09:46.500

因为`Object`是 Java 中最通用的类​​型。它没有资格被称为特定于任何级别。

# php - 当响应包含“/”时，Google Geocode API JSON 的 PHP 解码中断

> ID：15045039
> 
> 赞同：0
> 
> 时间：2013-02-23T20:05:23.020
> 
> 标签：php, geocoding, json, google-geocoder

以下是我的应用程序中的相关代码......

```
<?
$jsonData   = file_get_contents($url);
        $data = json_decode($jsonData, TRUE);
        $lat = $data['results']['0']['geometry']['location']['lat'];
        $lng = $data['results']['0']['geometry']['location']['lng'];
        $formattedAddress = $data['results']['0']['formatted_address'];
        $acomp = $data['results']['0']['address_components'];
        foreach ($acomp as $acompArray) {
            if (in_array("neighborhood", $acompArray["types"])) {
                $neighborhood = $acompArray["long_name"];
            }
        }
$acomp = $data['results']['0']['address_components'];
foreach ($acomp as $acompArray) {
    if (in_array("neighborhood", $acompArray["types"])) {
         $neighborhood = $acompArray["long_name"];
    }
}
?> 
```

以下是来自 Google 地理编码器 API 的 JSON 响应（其中一个损坏的示例）

```
{
   "results" : [
      {
         "address_components" : [
            {
               "long_name" : "3900",
               "short_name" : "3900",
               "types" : [ "street_number" ]
            },
            {
           "long_name" : "Winchell Avenue",
           "short_name" : "Winchell Ave",
           "types" : [ "route" ]
        },
        {
           "long_name" : "Oakland/Winchell",
           "short_name" : "Oakland/Winchell",
           "types" : [ "neighborhood", "political" ]
        },
        {
           "long_name" : "Kalamazoo",
           "short_name" : "Kalamazoo",
           "types" : [ "locality", "political" ]
        },
        {
           "long_name" : "Kalamazoo",
           "short_name" : "Kalamazoo",
           "types" : [ "administrative_area_level_2", "political" ]
        },
        {
           "long_name" : "Michigan",
           "short_name" : "MI",
           "types" : [ "administrative_area_level_1", "political" ]
        },
        {
           "long_name" : "United States",
           "short_name" : "US",
           "types" : [ "country", "political" ]
        },
        {
           "long_name" : "49008",
           "short_name" : "49008",
           "types" : [ "postal_code" ]
        }
     ],
     ---A LOT MORE BUT DELETED THE IRRELEVANT PORTIONS---
} 
```

问题似乎发生在“奥克兰/温切尔”附近，我的理论是它包含一个“/”，这似乎使它什么都不返回......我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-10-14T22:33:47.513

```
$json_url = "http://maps.googleapis.com/maps/api/geocode/json?latlng=".$row2[lat].",".$row2[lng]."&sensor=true";
// Initializing curl
$ch = curl_init( $json_url );

// Setting curl options
curl_setopt_array( $ch, $options );

// Getting results                                                                     
    $data = curl_exec($ch);
    curl_close($ch);

// parse the json response
    $jsondata = json_decode($data,true);
    $results = $jsondata['results'][0];
    $addr =$results['formatted_address']; 
```

# html - 在 TMENU 中始终首先显示活动元素 (TYPO3)

> ID：15045053
> 
> 赞同：2
> 
> 时间：2013-02-23T20:06:40.830
> 
> 标签：html, css, typo3, typoscript

我创建了一个不错的 HTML 模板，我目前正在尝试将其集成到我的 TYPO3 实例中。

像往常一样，我做的事情并不容易:)现在我想知道是否有解决我在标题中已经写过的内容：

有没有办法总是从菜单中的当前活动元素开始？

感谢您的帮助，非常感谢！

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T20:37:48.667

我不认为有一种方法可以用一个菜单来做到这一点。我的想法是使用两个菜单：第一个只呈现活动项目，第二个只呈现普通项目。为此，请`doNotShowLink`在不需要的菜单项上使用。然后，使用 COA 将菜单组合成一个元素。这是第一级菜单的一些 TS：

```
lib.menu = COA
lib.menu {
 wrap = <ol class="menu">|</ol>

  1 = HMENU
  1 {

    1 = TMENU
    1 {

      NO.doNotShowLink = 1

      ACT = 1
      ACT {
        wrapItemAndSub = <li class="active">|</li>
      }
    }
  }

  2 = HMENU
  2 {

    1 = TMENU
    1 {

      NO = 1
      NO {
        wrapItemAndSub = <li class="normal">|</li>
      }

      ACT = 1
      ACT.doNotShowLink = 1
    }
  }
} 
```

通过使用一些巧妙的复制，即使有两个菜单，也应该可以将维护工作保持在最低限度。

# javascript - JavaScript - 正则表达式，是否有任何字符串的标记？

> ID：15045055
> 
> 赞同：2
> 
> 时间：2013-02-23T20:06:41.750
> 
> 标签：javascript, regex, string

str.replace(/\w*(\ || --> 一个标记可以表示任何字符或字符串？<-- || )/g, function() {return "(" + arguments[0] + ") "})

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T20:14:04.500

点 ( `.`) 匹配任何 (1) 个字符；`.+`匹配长度至少为 1`.*`的字符串，匹配长度至少为 0 的字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T20:14:17.603

句点用于表示任何不是换行符的字符，但要表示任何字符，您可以使用具有两个互补集的集合，例如所有字母数字字符和所有非字母数字字符：

```
str = str.replace(/\w*([\W\w])/g, "($1)"); 
```

这将匹配单个字符，如果要匹配多个字符，则必须指定多少个。`[\W\w]{1,3}`例如将匹配一到三个字符。`[\W\w]+`会将所有内容匹配到字符串的末尾。

请注意，对于这样的简单替换，您不需要回调，只需将字符串`$1`替换为第一个捕获的值。

* * *

编辑：
想一想，由于字符遵循与字母数字字符匹配的集合，因此它必须是非字母数字，所以就可以了`\W`：

```
 str = str.replace(/\w*(\W)/g, "($1)"); 
```

# ios - senTestCase 中的“sen”是什么意思？

> ID：15045056
> 
> 赞同：0
> 
> 时间：2013-02-23T20:06:44.550
> 
> 标签：ios, objective-c

这个问题说明了一切。

谁想出了这个名字？

只是对词源感到好奇。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T20:12:20.240

SenTestingKit 框架是 Apple 的 OCUnit 的分支/衍生工具，[OCUnit是由](http://www.sente.ch/software/ocunit/)[瑞士软件公司“Sen:te”](http://www.sente.ch/)编写的单元测试框架，因此得名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T20:32:44.203

该名称来自创建 SenTestingKit 框架的瑞士软件公司“Sen:te”的名称。“先”是先做重要的事，后做紧急的事。在这里，紧急的可能是推送代码，而重要的可能是测试。

根据[Sen:te 的网站](http://www.sente.ch/?page_id=170&lang=en)，

> To be sente，在日语中，意味着拥有主动权。这是围棋等战略游戏的关键概念。也可以理解为先做一些新的事情，或者先做重要的事情，而不是先做紧急的事情。

Sen:te 在 1998 年编写了 OCUnit。Apple 决定在 Xcode 2.1 中集成单元测试并选择了 OCUnit。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T20:11:26.230

它[来自](http://www.sente.ch/software/ocunit/)开发`OCUnit`.

# javascript - 定义图像的一部分并分配给悬停，单击事件

> ID：15045058
> 
> 赞同：5
> 
> 时间：2013-02-23T20:07:09.153
> 
> 标签：javascript, jquery, image-processing, imagemap

假设我们有一个人体图像，我希望当用户将鼠标悬停在身体​​的一部分（头部、手臂等）上时，这个器官变成绿色，当他点击一个定义的动作时发生。

使用javascript可行吗？如果是这样，这个概念是什么？

提问原因：

**目标：** 这只是用户输入他的病史的现有项目的一小部分，所以我想给他一个所有器官的下拉列表，只显示一个人体模型，然后他点击并保存他的tramua历史等。

为此，我认为我需要一张人体图像，并定义该图像上表示的每个器官的 XY 边界，并为其赋予一些属性（名称）。

1.  用户悬停：例如器官显示的边界和背景颜色为绿色
2.  当用户单击时，它会调用该对象表单。

js-jquery 中是否存在类似的东西？还是我需要发明轮子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T20:18:04.080

1.  您可以使用图像映射。您可以通过坐标定义图像内部的不同区域。
2.  您可以使用画布（HTML5，现代浏览器支持）
3.  您可以使用 svg （现代浏览器支持）
4.  一种更糟糕的方法，但可能是最简单的方法，将绝对定位的 div 放在身体图像上。（总是会给出矩形）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T20:17:25.900

您可以使用[HTML 地图](http://www.w3schools.com/tags/tag_map.asp)并将鼠标事件绑定到不同的区域以更改颜色并在单击时执行不同的回调。

# javascript - jQuery在页面加载时“淡入”而不在css中使用“display：none”

> ID：15045064
> 
> 赞同：1
> 
> 时间：2013-02-23T20:07:35.033
> 
> 标签：javascript, jquery

希望是一个简单的...

所以我在我的网站上的页面加载基本淡入之后，类似于这个网站的... [http://jack-hughes.com/](http://jack-hughes.com/)

我遇到的问题是标准的 jQuery fadeIn 函数似乎需要在要动画的元素上使用“display:none”，这显然意味着如果有人禁用了 javascript，它就会保持隐藏状态。

```
$('.h1').fadeIn('slow', function() {
    // Animation complete
}); 
```

我可以让某人指出我正确的方向，以便在我的任何元素上都没有 display:none 来获得这种效果。

我自己去试了也没用。简单地尝试检查元素是否存在，如果存在，将 css 不透明度设置为 0，然后运行动画。我敢肯定，你可以嘲笑我的付出（我不是 JS 人）。谢谢！

```
if($('.h1').length > 0) {
    $(this).css("opacity","0");
    $('.h1').animate({
        opacity:1,
    }, 1500, function() {
        //Animation Complete
    });
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T20:14:38.337

我认为你最好的选择是在你的 CSS 中使用 display:none ，然后包含一个像这样包装的简单样式标签

```
<noscript>
    <style>
        #container { display:block !important; }
    </style>
</noscript> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T20:10:27.403

先藏起来怎么样

```
$('.h1').hide().fadeIn('slow', function() {
    // Animation complete
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T20:32:32.883

```
$('.h1').hide(<h1>hello</h1>).fadeIn('slow', function() {
    // Animation complete
}); 
```

按照Musa这样写

# javascript - Javascript 继承：设置原型时调用 Object.create

> ID：15045080
> 
> 赞同：8
> 
> 时间：2013-02-23T20:08:59.713
> 
> 标签：javascript, prototype, prototype-programming

我正在学习面向对象的 Javascript 的某些方面。我遇到了这个片段

```
var Person = function(firstName, lastName)
{
  this.lastName = lastName;
  this.firstName = firstName;
};

Object.defineProperties(Person.prototype, {
  sayHi: {
    value: function() {
      return "Hi my name is " + this.firstName;
    }
  },
  fullName: {
    get: function() {
      return this.firstName + " " + this.lastName;
    }
  }
});

var Employee = function(firstName, lastName, position) {
  Person.call(this, firstName, lastName);
  this.position = position;
};

Employee.prototype = Object.create(Person.prototype);

var john = new Employee("John", "Doe", "Dev"); 
```

我的问题是：为什么这个片段使用 Object.create(Person.prototype)？我们不应该简单地重置原型：

```
Employee.prototype = Person.prototype; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-23T21:00:11.923

执行 Employee.prototype = Person.prototype 就像说“Employee is Person”而不是“Employee is a Person”。对任一原型的任何更改都将反映在*两个*类中。

这是一个[演示](http://jsfiddle.net/SCAbC/)。显然，我们不希望我们的 Person 工作，因为他们没有职位。

所以在没有 Object.create 的情况下设置原型链的正确方法是：

```
Employee.prototype = new Person; 
```

但这需要实例化一个对象，这有点奇怪——尤其是如果您不希望调用 Person 的构造函数。无论您是否想要，您的所有 Employee 实例都将继承未定义的“firstName”和“lastName”属性。

在这种情况下，这没什么大不了的——Employee 构造函数将在其自身上设置这些属性，这将取代从 Person 继承的属性。但是考虑[这个例子](http://jsfiddle.net/SCAbC/3/)。有人可能认为 freeTime 是 Person 的实例级属性，不会被复制，因为它不在原型上。另外，我们从未从 Employee 调用 Person 构造函数。并非如此—— freeTime*是*在 Employee 原型上设置的，因为我们必须实例化一个对象。

因此，您可以做的最好和最干净的继承是通过 Object.create。如果要调用父类的构造函数，可以在子类的构造函数中显式调用。另一个好处是 Object.create 有第二个（可选的）参数来定义属性。所以你也可以这样做：

```
Employee.prototype = Object.create(Person.prototype, {
  work: {
    value: function() {
      return this.fullName+" is doing some "+this.position+" stuff");  
    }
  }
}); 
```

当然，如果您必须支持旧版浏览器，则不能使用 Object.create。另一种方法是使用来自下划线或 lodash 等库的克隆/扩展。或者有这个小舞蹈：

```
var subclass = function() { };
subclass.prototype = Person.prototype;
Employee.prototype = new subclass; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T20:19:52.917

我的猜测是，目的是创建一个新对象，而不仅仅是来自 Person 的引用。

```
//create a new object with its prototype assigned to Person.prototype
Employee.prototype = Object.create(Person.prototype); 
```

# css - 时髦的响应式 CSS

> ID：15045091
> 
> 赞同：-1
> 
> 时间：2013-02-23T20:10:21.023
> 
> 标签：css

我的响应式 CSS 有问题。一旦我缩小到大约 500 像素的屏幕宽度，我的整个页面都会出现绿色背景。

如果有人可以提供帮助，我将不胜感激。我认为它来自我想要保持不变的 .widget-title。

```
http://69.195.124.68/~discowv9/?page_id=7 
```

提前致谢。

马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:20:46.853

这是一个名为 h3 的元素，应用了 .widgetTitle 类。准确地说，它是快速链接的标题背景。

当您减小页面大小时，h3 标签保持在相同的高度，而当有用的链接一直被推到底部时，h3 标签会一直延伸到它的底部，在它后面留下一个大的绿色背景轨迹。（向下滚动并亲自查看。）

我会检查你的 HTML 结构和 CSS，看看我能不能弄清楚它有什么问题。

在你的类 .widget-area 添加这行代码：

```
overflow: hidden; 
```

这将解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T20:24:15.217

您的浮动未清除，请通过添加 clear:both; 更新您的 css .widget-area；第 446 行

前任：

```
.widget-area {
margin: 0 0 3.3rem;
background-color: #FFF;
-webkit-border-radius: 15px;
-moz-border-radius: 15px;
border-radius: 15px;
border: 1px solid #a5a5a5;
padding: 0 0.857143rem 0 0.857143rem;
width: 20%;
min-width: 195px;
clear: both;
} 
```

# vb.net - VB.Net 2012 中的全局鼠标钩子/响应事件

> ID：15045093
> 
> 赞同：0
> 
> 时间：2013-02-23T20:10:36.223
> 
> 标签：vb.net, visual-studio-2012, mouseevent, mouse-hook

寻找与 VB.Net 2012 兼容的全局鼠标钩子的源代码示例。

应用需求基本：全局拦截中键。

几乎我发现的每个示例都已过时、存在错误或生成毫无意义的错误，我无法在 VS 2012 Pro 中解决。

这一定是一个艰难的问题，因为我没有看到这个问题被多次问过 C# 和 VB，但没有遇到任何答案。

谢谢。

富有的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:31:26.227

在 VB.net（和 C#）中，当您调用 SetWindowsHookEx 函数时，请使用 hookid WH_MOUSE_LL (=14)... 其余的对于委托和 proc 是相同的。

# javascript - 如何从部分重定向到另一个视图？

> ID：15045096
> 
> 赞同：0
> 
> 时间：2013-02-23T20:11:18.007
> 
> 标签：javascript, jquery, asp.net, ajax, asp.net-mvc

在我的 MVC 应用程序中，我的 _Layout.cshtml 中有一个搜索表单。

提交表单后，我有一个 jquery 函数，该函数被调用，并正确转到我的 SearchController，执行所有正确的代码，但我从未被带到正确的页面，无论我当前所在的页面只是被刷新。

现在，如果我手动转到 /Search?q=query 它会显示正常，但我的 Action 方法返回

```
return View("Index", new SearchViewModel()) 
```

**从我的jQuery** `.post()`调用中没有做任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:43:38.487

```
doesn't do anything from my jQuery post call 
```

*   对于初学者，您不能从 JQuery Post（AJAX 调用）重定向

您将希望使用返回值进行`window.location='{url}'`调用

*   为什么要使用 JQuery Post 之类的 Ajax 调用？为什么不让您的电话成为真正的帖子？

从那里你可以返回一个 View、RedirectToAction 等。

你的选择会大大增加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T20:14:58.023

```
return PartialView ("Index", new SearchViewModel()) 
```

# python - 如何使用 django filter icontains 获得多个字段

> ID：15045101
> 
> 赞同：8
> 
> 时间：2013-02-23T20:11:45.420
> 
> 标签：python, django, search

我正在尝试将我的查询搜索与我的所有模型字段进行比较，但我不知道如何在多个字段中进行比较。

这是我的代码。

```
expense = Expense.objects.filter(user=request.user.id).order_by('date')

q = request.GET['q']
result = expense.filter(name__icontains=q) 
```

我要签到: `name`, `amount`,`category`

提前致谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-23T20:18:35.143

来自 Django 文档：

“关键字参数查询 - 在 filter() 等中 - 被“AND”在一起。如果您需要执行更复杂的查询（例如，使用 OR 语句的查询），您可以使用 Q 对象。

```
from django.db.models import Q
expense.objects.filter(
    Q(name__icontains=q) | Q(amount__icontains=q) | Q(category__icontains=q)
) 
```

我不确定您的模型中的数量和类别的类型，因此图标可能无法在它们上使用。

看到[这个链接](https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects)。

# arduino - 将另一个数字后的数字转换为 2 algarisms 数字？（1 然后 1 = 11） - Arduino

> ID：15045106
> 
> 赞同：0
> 
> 时间：2013-02-23T20:12:05.597
> 
> 标签：arduino, numbers, calculator, infrared

所以，我正在尝试用 Arduino 设置一种计算器。我已经设法从红外遥控器读取数据并将它们显示在 LCD 16x2 显示器中。例如，如果我输入“1”，显示屏上将显示“1”，但我如何设法让程序明白，如果在 Enter 按钮之前按下了两个或多个数字，则它是一个大于 1 的数字阿尔加主义？就像按 1，然后 2，然后 3 等于 123？

我可以制作很多 if 语句来执行诸如“如果在现有的 1 之后按下 1 而不是变量 == 11”等等，但这没有用。

无论如何，我该怎么做？或者你能给我指出这种函数/算法的名称，以便我期待它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:54:02.510

这里有两种方法可以解决这个问题。1st 将简单地连接一个字符串类型并在回车完成时将其转换为整数。

```
#define _CR 13
String readString;

void setup() {
  Serial.begin(9600);
}

void loop() {
  while (Serial.available()) {
    char c = Serial.read();  //gets one byte from serial buffer
    readString += c; //makes the string readString
    delay(2);  //slow looping to allow buffer to fill with next character
  }

  if ((readString.length() >0) || ( c == CR_)) {
    Serial.println(readString);  //so you can see the captured string 
    int n = readString.toInt();  //convert readString into a number

    // do whatever you want
    // ...
    //
    //

    readString=""; //empty for next input
  } 
} 
```

* * *

另一种方法是使用字符间超时。请注意，通常

```
while (!Serial.available()) {
  // wait for Serial input
};
inkey = Serial.read(); 
```

正在阻塞。下面使用 char 数组的指针来构建输入，最多 5 位是 int16_t 的长度（即 65535）。嗯，它只处理积极因素。但是您可以对其进行调整以获取负数，以及其他命令，例如“+”、“-”等...

我使用 ICT 方法的原因是因为 Arduino 的 IDE 串行监视器实用程序默认为无 LF/CR。它只是一次发送输入而没有任何 LF/CR。

```
int16_t last_ms_char; // milliseconds of last recieved character from Serial port.
int8_t buffer_pos; // next position to recieve character from Serial port.
char buffer[6]; // 0-35K+null
int16_t fn_index;
int16_t Serial_Input_Number;

void setup() {

  Serial.begin(115200);
  last_ms_char = millis(); // stroke the inter character timeout.
  buffer_pos = 0; // start the command string at zero length.

}

void loop() {

  char inByte;
  if (Serial.available() > 0) {
    inByte = Serial.read();
    if (isDigit(inByte)) { // macro for ((inByte >= '0') && (inByte <= '9'))
      // else if it is a number, add it to the string
      buffer[buffer_pos++] = inByte;
    } else {
      // input char is a letter command
      buffer_pos = 0;
      parse_menu(inByte);
    }
    buffer[buffer_pos] = 0; // update end of line
    last_ms_char = millis(); // stroke the inter character timeout.

  } else if ((millis() - last_ms_char) > 500 && ( buffer_pos > 0 )) {
    // ICT expired and have something
    if (buffer_pos == 1) {
      // look for single byte (non-number) menu commands
      parse_menu(buffer[buffer_pos - 1]);

    } else if (buffer_pos > 5) {
      // dump if entered command is greater then uint16_t
      Serial.println(F("Ignored, Number is Too Big!"));

    } else {
      // otherwise its a number, scan through files looking for matching index.
      Serial_Input_Number = atoi(buffer);

      //
      //
      // Do something with "Serial_Input_Number"
      // one time here. Or set flag and do something out of this big if
      // ...
      //
      //

    }

    //reset buffer to start over
    buffer_pos = 0;
    buffer[buffer_pos] = 0; // delimit

    //
    //
    // do other stuff repeatedly between new characters
    // ...
    //
    //
  } 
```

无法保证确切的代码，因为它是从更大的示例中剪裁和修剪的，确实有效。

# java - 可执行的 JAR 文件在单击时不运行

> ID：15045107
> 
> 赞同：0
> 
> 时间：2013-02-23T20:12:11.143
> 
> 标签：java

所以我创建了 JAR 文件。我在清单中设置了主类。当我从命令行程序启动运行它时。但是当我单击 JAR 文件图标时，它会打开并显示目录，但不会运行。如何使系统在双击而不是打开它时运行 JAR 文件？我正在使用 Ubuntu Linux

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:21:41.667

将jar文件标记为可执行，并将JRE设置为打开jar文件的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T20:20:28.353

尝试，右键单击 .jar 文件，然后选择 Open With Other Application... -> Java。如果有效，则再次右键单击 .jar，选择属性。在属性窗口中，选择打开方式选项卡。在这里，您可以为文件类型（如 jar）配置默认应用程序。

# c++ - C ++模板元编程-不确定我是否大惊小怪？

> ID：15045112
> 
> 赞同：0
> 
> 时间：2013-02-23T20:12:17.847
> 
> 标签：c++, templates, template-meta-programming

据我了解，普通的 C++ 代码在编译时被翻译成汇编程序，然后由 CPU 在运行时执行。所以我不太明白模板元编程的优点有什么大惊小怪的？

维基百科对模板元编程有以下说法：

> 模板元编程是一种元编程技术，其中编译器使用模板生成临时源代码，编译器将其与源代码的其余部分合并，然后进行编译。这些模板的输出包括编译时常量、数据结构和完整的函数。模板的使用可以被认为是编译时执行。

这似乎并没有真正向我强调模板元编程的优势......？

我之所以问，是因为我对模板元编程可以做什么来优化/提高低延迟 C++ 应用程序的效率感兴趣。在此过程中，我可能没有正确理解某些内容，因此请随时纠正我的理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T20:25:19.870

您是否阅读过无数篇彻底讨论 TM 的文章？例如：

*   [http://www.codeproject.com/Articles/3743/A-gentle-introduction-to-Template-Metaprogramming](http://www.codeproject.com/Articles/3743/A-gentle-introduction-to-Template-Metaprogramming)
*   [http://aszt.inf.elte.hu/~gsd/halado_cpp/ch06s04.html](http://aszt.inf.elte.hu/~gsd/halado_cpp/ch06s04.html)
*   [http://blog.lorentey.hu/2010/04/21/cpp-template-metaprogramming/](http://blog.lorentey.hu/2010/04/21/cpp-template-metaprogramming/)
*   等等等等

查看（一种）模板元编程的一种简单方法是“强”记忆。一个常见的例子如下：

假设您的程序需要计算某个数字的阶乘。使用 TM，您可以在编译时计算阶乘，这会增加编译时间（和二进制大小）但会减少运行时间。示例代码来自上面的第二个站点；如果您以“幼稚”的方式进行操作，则代码如下：

```
int factorial( int n) {
    return (n==0) ? 1 : n*factorial(n-1)l
}

int main() {
    cout << factorial(5) << endl;
    return 0;
} 
```

使用 TM，我们可以在编译时计算阶乘：

```
// factorial.cpp

#include <iostream>

template <int N>
struct Factorial {
    enum { value = N * Factorial<N-1>::value };
};

template <>
struct Factorial<1> {
    enum { value = 1 };
};

// example use
int main() {
    const int fact5 = Factorial<15>::value;
    std::cout << fact5 << endl;
    return 0;
} 
```

这里`Factorial<15>::value`本质上是一个编译时常量。与往常一样，简单的示例并不是特别有用，但希望您能掌握其中的要点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T11:06:01.223

另一个例子是如何计算斐波那契数列。

正常的递归方式：

```
uint64_t fibonacci(int n) {
    if (n <= 2)
        return 1;
    else
        return fibonacci(n - 1) + fibonacci(n - 2);
} 
```

使用元编程：

```
template< int n > struct Fibonacci {
    static const uint64_t value = Fibonacci< n-1 >::value +  Fibonacci< n-2 >::value;
};

template<> struct Fibonacci< 1 > {
    static const uint64_t value = 1;
};

template<> struct Fibonacci< 0 > {
    static const uint64_t value = 0;
}; 
```

现在您可以自己尝试调用`fibonacci(80)`或`Fibonacci<80>::value`。递归函数可能无法工作并崩溃，使用元编程的函数将非常好并且非常快。

# url - Solr + Jelastic 访问 URL

> ID：15045113
> 
> 赞同：1
> 
> 时间：2013-02-23T20:12:18.540
> 
> 标签：url, solr, jetty, jelastic

我已将 Solr 与 Jetty 一起部署在 Jelastic 中。可以使用以下 URL 访问其管理页面：

```
http://mydomain.jelastic.servint.net/solr 
```

但是当我尝试像这样从另一台机器添加文档时：

```
String urlString = "http://mydomain.jelastic.servint.net/solr";
SolrServer solr = new HttpSolrServer(urlString);
SolrInputDocument document = new SolrInputDocument();
document.addField("id", "552199");
document.addField("name", "Gouda cheese wheel cheese");
UpdateRequest req = new UpdateRequest();
req.add(document);
UpdateResponse response = req.process(solr); 
```

这没用。我收到以下错误：

```
org.apache.solr.common.SolrException: Server at http://mydomain.jelastic.servint.net/solr returned non ok status:411, message:Length Required 
```

如果我使用假 URL，它会返回相同的错误，所以我认为根本原因一定是 URL 有问题。
在同一台机器上访问 Solr 可以正常工作。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T20:24:39.093

它还可能需要您的 Jetty 应用服务器的[公共 IP](http://jelastic.com/docs/public-ipv4)。因为默认情况下所有请求都通过全局解析器，它也可以限制您的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T06:23:54.873

我有同样的问题。并解决。原因是1.3.9下的nginx不支持HttpChunkinModule。 [http://wiki.nginx.org/HttpChunkinModule](http://wiki.nginx.org/HttpChunkinModule)

# android - ELF Android 系统库中 .rel.dyn 部分的用途

> ID：15045123
> 
> 赞同：7
> 
> 时间：2013-02-23T20:13:12.720
> 
> 标签：android, elf, prelink

我正在尝试处理`.rel.plt`某些 Android 系统库的部分，我可以很容易地找到函数的地址。

但是，我不确定该`.rel.dyn`部分的条目是什么。本节是否也包含功能？`.got.plt`ARM Android 库中缺少 X86 库中的表。不确定是否也需要这些。

android 链接器代码提到系统库是预先链接并加载到固定地址的。这对处理`.rel.plt`和`.rel.dyn`部分有何影响。

更广泛的问题是围绕了解基于 Android ARM 的系统库和`.rel.dyn`,`rel.plt`以及`.got.plt`添加了预链接问题的部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T02:43:12.413

我认为这个项目会对你有很大帮助。[https://github.com/shoumikhin/ELF-Hook](https://github.com/shoumikhin/ELF-Hook) 这个人刚刚制作了这里记录的方法[http://www.codeproject.com/Articles/70302/Redirecting-functions-in-shared-ELF-libraries](http://www.codeproject.com/Articles/70302/Redirecting-functions-in-shared-ELF-libraries)适用于 ARM Android平台

# ios - AvPlayer 失真

> ID：15045130
> 
> 赞同：1
> 
> 时间：2013-02-23T20:14:08.940
> 
> 标签：ios, core-animation, avfoundation, avplayer, avplayerlayer

有没有办法让（一个）AVPlayerLayer 覆盖该区域，如下图所示？
玩家应该以适当的视角覆盖白色和红色区域。

![在此处输入图像描述](../Images/16c52cea04a7172e225cbbb495302d44.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:13:03.037

你绝对不能用仿射变换的一层来做到这一点。也许使用 Core Image，但我不知道你会使用什么过滤器，而且它们可能真的很贵。

您可以做的是使用多个 AVPlayerLayers，每个播放相同的项目，并设置它们的 3D 变换，以便它们在折叠点相交。右侧图层的左侧将位于左侧图层的后面，左侧图层的右侧将位于右侧图层的后面。

*   您可能希望将两个播放器层都放在 AVSynchronizedLayer 中，以保持它们播放相同的时钟。
*   我不知道你是否需要两个 AVPlayer。无论如何，很容易`playerItem`从一个中获取并围绕它创建第二个 AVPlayer。

你可以猜到，我没有这样做，所以请注意实施者。希望它能让你朝着正确的方向前进。

# python - 在 member_id 的 login_user 函数视图中获取 KeyError

> ID：15045131
> 
> 赞同：1
> 
> 时间：2013-02-23T20:14:09.530
> 
> 标签：python, django

```
def login_user(request):
    if request.session['member_id']:
        m=User.objects.get(id=request.session['member_id'])
        #state = "You're successfully logged in!"
        username = m.username
        return render(request,'auth/success.html',{'username': username})
    else:    
        state = "Please log in below..."
        username = password = ''
        if request.POST:
            username = request.POST.get('username')
            password = request.POST.get('password')

            user = authenticate(username=username, password=password)
            if user is not None:
                if user.is_active:
                    login(request, user)
                    m=User.objects.get(username=username)
                    state = "You're successfully logged in!"
                    request.session['member_id'] = m.id
                    return render(request,'auth/success.html',{'state':state, 'username': username})
                else:
                    state = "Your account is not active, please contact the site admin."
                    return render(request,'auth/auth.html',{'state':state, 'username': username})
            else:
                state = "Your username and/or password were incorrect."
                return render(request,'auth/auth.html',{'state':state, 'username': username})

        else:
            return render(request,'auth/auth.html',{'state':state, 'username': username}) 
```

我的代码和上面一样。实际上我想检查 session 中是否存在 member_id。但是在 member_id 的 login_user 函数视图中获取 KeyError

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T20:21:40.347

您应该使用[`in`运算符](http://kracekumar.com/post/22512660850/python-in-operator-use-cases)：

```
if 'member_id' in request.session: 
```

请注意，如果它存在，但“虚假”（`False`、`None`、等），则`0`运算符将成功，但不会是有效的，因此您可能需要同时检查两者：`""``in``request.session['member_id']``id`

```
if 'member_id' in request.session and request.session['member_id']: 
```

# c++ - 通过联合访问 __m128 变量的字节是否合法？

> ID：15045132
> 
> 赞同：11
> 
> 时间：2013-02-23T20:14:16.260
> 
> 标签：c++, sse, unions

考虑这个变量声明：

```
union {
        struct {
            float x, y, z, padding;
        } components;
        __m128 sse;
    } _data; 
```

我的想法是通过`x`, `y`,字段分配值，执行 SSE2 计算并通过, ,`z`读取结果。不过，我有点怀疑它是否合法。我关心的是对齐：MSDN 说变量会自动对齐到 16 字节边界，我想知道我的联合是否可以打破这种行为。这里还有其他需要考虑的陷阱吗？`x``y``z``__m128`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T20:24:07.293

union 的对齐应该没问题，但在 Windows 的情况下，您可能能够直接访问 32 位组件。从`xmmintrin.h`( `DirectXMath`):

```
typedef union __declspec(intrin_type) _CRT_ALIGN(16) __m128 {
     float               m128_f32[4];
     unsigned __int64    m128_u64[2];
     __int8              m128_i8[16];
     __int16             m128_i16[8];
     __int32             m128_i32[4];
     __int64             m128_i64[2];
     unsigned __int8     m128_u8[16];
     unsigned __int16    m128_u16[8];
     unsigned __int32    m128_u32[4];
 } __m128; 
```

如您所见，那里有 4 个花车。如果您想成为超级偏执狂，您可能可以定义所有相同的对齐特性等，以确保不会破坏任何东西。但是，据我所知，鉴于您在回答中提到了 MSDN，您应该一切顺利。如果你知道你有 SSE 兼容的东西，联合和直接访问它都应该工作。您也可以查看 DirectXMath 标头，以了解 Windows 如何进行定义和自行处理：它们还定义了一些宏，具体取决于编译时存在的内在函数和功能。

编辑：正如 R.MartinhoFernandes 在评论中所说，直接访问它可能比在联合中重新定义它更令人头疼。

# eclipse - 如何在 SVN (Eclipse) 中从提交中删除文件夹

> ID：15045140
> 
> 赞同：4
> 
> 时间：2013-02-23T20:15:08.350
> 
> 标签：eclipse, svn, version-control, subclipse, springloops

我知道我可能会因为这个问题而受到抨击，但我查看了以前的 SO 问题并没有找到我的答案。

我正在使用 SpringLoops 来托管我的 SVN 版本控制。我正在为 Eclipse 使用**Subclipse**一个 SVN 插件。

当我右键单击我的项目的根文件夹并且`Team -> Commit`我**不想**将该`bin`文件夹包含到该提交时。是的，我之前已经提交过它，根据这个问题：[Subclipse svn:ignore](https://stackoverflow.com/questions/1066809/subclipse-svnignore)我必须先从我的存储库中删除它。我不确定这到底意味着什么。我无法从 Springloops 网站中删除，并且在 Eclipse 中，当我删除该`bin`文件夹时，它会自动重新创建（当然）。

如何`bin`从我的提交中删除该文件夹？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-23T20:20:00.000

我想通了。我是一个白痴。为了避免人们将来的头疼，您需要转到`SVN Repository`Eclipse 中的视图（默认情况下，右上角，它显示的位置等。从那里删除它，然后“更新到头部”，然后您可以右键单击并添加`Java`到. 那么，这个改变应该被提交。`Debug``SVN:ignore`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T20:22:48.753

在您的自我回答中，您并没有真正删除文件/文件夹。在 SVN 中，您必须提交删除。根据 SVN、Eclipse、SVNKit 等的版本，您可能通过 GUI 获得它可能会很棘手或有问题。

# java - 使用 Java、JPA、HTML5 和 REST 服务时的客户端-服务器应用程序架构

> ID：15045142
> 
> 赞同：0
> 
> 时间：2013-02-23T20:15:17.540
> 
> 标签：java, json, html, rest, jpa

我正在使用 Rest-services 和 JPA 编写的 java 启动 HTML5-client-server 应用程序。我遇到了如何实现服务器端的问题。想象一下你有对象的情况

```
public class User {
    private String firstName = "";
    private String surName = "";
    private Address address = "";
}

public class Address {
    private long id = 0L;
    private String sAddress ="";
} 
```

这是创建/删除/更新数据库时同时使用休息服务和控制器的最终实体。

现在我尝试将一个新用户从 ui（使用 jquery 和 ajax）插入 DB，并且我已经填充了 JSON 对象。但是在用户对象中有那个地址对象。有什么方法可以实现/使用它，或者我应该创建新的 pojo，其中只有基本类型，然后是一个新层，我在其中填充最终的 JPA 实体，如带有地址对象的用户？我希望我的英语足够好来解释这个问题。

1.  这是创建一个数据（JPA 实体）与 Web 服务层和客户端层中的对象完全相似的应用程序的好主意吗？
2.  知道如何实现吗？
3.  甚至可以在休息服务中使用自己的对象类型 - HTML5（JSON）组合甚至一般？

您可以使用 Netbeans 7.3 轻松创建此类问题/应用程序。首先创建一个包含两个表的数据库，创建一个项目并从数据库生成 Web 服务，就是这样。现在你已经有了实体、带有外观的 Web 服务、数据库和项目。

我之前用示例代码问过这个问题，但没有答案： [https ://stackoverflow.com/questions/14936031/mapping-and-parsing-json-objects-in-ui-and-in-java](https://stackoverflow.com/questions/14936031/mapping-and-parsing-json-objects-in-ui-and-in-java)

并出现这样的**错误**：

```
WARNING: StandardWrapperValve[ServletAdaptor]: PWC1406: Servlet.service() for servlet ServletAdaptor threw exception
org.codehaus.jackson.map.JsonMappingException: Can not instantiate value of type [simple type, class entity.Address] from JSON String; no single-String constructor/factory method (through reference chain: entity.User["addressAddressId"])
    at org.codehaus.jackson.map.deser.std.StdValueInstantiator._createFromStringFallbacks(StdValueInstantiator.java:379)
    at org.codehaus.jackson.map.deser.std.StdValueInstantiator.createFromString(StdValueInstantiator.java:268) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T20:39:17.863

你是在问如何创建一个`User`JPA对象（对应一个`USER`表），包含一个`Address`对象（对应一个`ADDRESS`表）？

如果是这样，这里有一些答案：

1.  这样做是完全有效的，但是一些开发人员和框架提倡在 Web 服务层和客户端层之间建立一个抽象层。一些人提倡直接使用这些实体（例如，Rails 通常使用这种模型）。其他人主张为此用途创建特定的数据传输对象（例如，从现有的 WSDL 文件生成服务器存根）。前者的优点是重复少；后者的优点是抽象层，因此如果您更改域，则不必更改 Web 服务层。
2.  使用[`@OneToOne`](http://en.wikibooks.org/wiki/Java_Persistence/OneToOne)注释，至少从`User`到`Address`，可能还有其他方向。上面链接的页面甚至使用了您的带有地址的员工示例。:)

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:48:11.607

> 这是创建一个数据（JPA 实体）与 Web 服务层和客户端层中的对象完全相似的应用程序的好主意吗？

在 RESTful WebServices 中，您可以对资源调用 HTTP 方法。通常 a`HTTP-GET`获取由 URI 定义的资源。因此必须处理该请求，检索数据并以响应的形式放回。如果请求是纯粹的数据检索，那么服务器上的数据和客户端上的数据应该是相似的。

> 知道如何实现吗？

您可以在此处使用 DAO 对象来访问您的持久层。

> 甚至可以在休息服务中使用自己的对象类型 - HTML5（JSON）组合甚至一般？

REST 实际上与 HTML 无关，它是服务工作方式的范例。HTML 是一种可以用来与浏览器等客户端交互的语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-31T21:26:43.733

根据您得到的异常，您所缺少的只是您的 Address 对象的正确构造函数。您需要 Address(String x) 构造函数。

# objective-c - otool for armv7 的方法实现地址错误？

> ID：15045144
> 
> 赞同：3
> 
> 时间：2013-02-23T20:15:21.923
> 
> 标签：objective-c, assembly, arm, mach-o, otool

我不断地为“otool”显示的方法的实现地址获得 1 个字节的偏移量。

例如，'otool -o' 给出 0xe99d5 但 'otool -tvV' 给出：

```
+[NSError(SomeCategory) someMethod]:
000e99d4            b590        push    {r4, r7, lr}
000e99d6        f6441184        movw    r1, 0x4984
000e99da            af01        add     r7, sp, #4
000e99dc        f2c0010a        movt    r1, 0xa 
```

所以方法从 0xe99d4 开始。0xe99d5 看起来不对，未对齐。我相信“otool”工作正常，我不了解实施的某些方面。如何解释输出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T20:33:35.700

现代 ARM 内核有两种类型的指令集。原始的一种称为`arm`模式，其中每条指令长四个字节，而新的称为模式`thumb2`（您可以猜到它已经通过了一些迭代），其中指令可以长两个或四个字节（引入的原因是代码密度）。

CPU 在进行分支时可以改变模式，通知 CPU 使用的指令集的方法是设置要跳转的指令地址中的最低有效位。如果为 0 指令将被解释为`arm`模式，如果为 1 它们将被解释为`thumb`模式。

所以你看到的是你的函数处于`thumb2`模式，我们可以通过看到它包含两个和四个字节长的指令来验证它。

# sql - 似乎无法转换为有效的选择语句

> ID：15045149
> 
> 赞同：1
> 
> 时间：2013-02-23T20:16:12.317
> 
> 标签：sql, database, oracle

我试图解决以下问题：

**显示 2011 年 12 月 1 日至 2012 年 1 月 31 日之间的周（例如 1-52）、该周的开始和结束日期以及该周内报告的传感器温度数，按周数排序降序。**

使用以下选择。

```
SELECT TO_CHAR(R.Report_Time,'WW') as Week, NEXT_DAY(R.Report_Time-7,'Monday'), NEXT_DAY(R.Report_Time-1, 'Sunday')
FROM REPORT R
WHERE R.Report_Time BETWEEN '01-DEC-2011' AND '31-JAN-2012'
GROUP BY Week
ORDER BY TO_CHAR(R.Report_Time, 'WW') DESC; 
```

这会出现一些错误，这些错误不会让查询正确执行，例如不是按表达式分组。

它的表 REPORT 是一个报告列表，其中包含数据和报告时间。

**编辑：**

```
WE NEXT_DAY( NEXT_DAY( SENSOR_COUNT
-- --------- --------- ------------
03 16-JAN-12 22-JAN-12        1
02 09-JAN-12 15-JAN-12        1
02 09-JAN-12 15-JAN-12        1
02 09-JAN-12 15-JAN-12        1 
```

它是打印出来的。它似乎不仅仅按周分组，正如您在这里看到的那样，我相信输出应该看起来更接近于：

```
WE NEXT_DAY( NEXT_DAY( SENSOR_COUNT
-- --------- --------- ------------
03 16-JAN-12 22-JAN-12        1
02 09-JAN-12 15-JAN-12        3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:19:47.753

您不能 GROUP BY 别名。您必须完全指定要分组的表达式：

我还添加了一些可能会更进一步的东西：

```
SELECT TO_CHAR(R.Report_Time,'WW') as Week
     , NEXT_DAY(R.Report_Time-7,'Monday')
     , NEXT_DAY(R.Report_Time-1, 'Sunday')
     , COUNT(*) Sensor_count
FROM REPORT R
WHERE R.Report_Time BETWEEN '01-DEC-2011' AND '31-JAN-2012'
GROUP BY TO_CHAR(R.Report_Time,'WW'), NEXT_DAY(R.Report_Time-7,'Monday')
       , NEXT_DAY(R.Report_Time-1, 'Sunday')
ORDER BY TO_CHAR(R.Report_Time, 'WW') DESC; 
```

您的查询还有其他问题，您很快就会发现 :-) 您可能会想在这里使用分析函数。您还将按其他两列进行分组。

编辑

根据您的编辑，我认为这应该让您更接近：

```
SELECT week, first_day, last_day, COUNT(*)
  FROM (SELECT TO_CHAR(R.Report_Time,'WW') as Week
             , NEXT_DAY(R.Report_Time-7,'Monday') first_day
             , NEXT_DAY(R.Report_Time-1, 'Sunday') last_day
         FROM REPORT R
        WHERE R.Report_Time BETWEEN '01-DEC-2011' AND '31-JAN-2012')
 GROUP BY week, first_day, last_day
 ORDER BY week DESC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:16:09.990

另外... 使用 ISO 周的年度周表示例。如果需要，将 IW 更改为 WW。使用您的日期作为开始/结束日期和我的格式来获取 week_start/结束日期，而无需将日期硬编码为“DY”。如果使用表日期和 BETWEEN 运算符，则不必使用 CONNECT BY。我的例子不是基于表格的。删除不必要的列，添加计数，按 ISO_wk#（或非 iso）、wk_starts、wk_ends 分组...：

```
SELECT start_date
    , TRUNC(start_date, 'IW')                  wk_starts  
    , TRUNC(start_date, 'IW') + 7 - 1/86400    wk_ends
    , TO_NUMBER (TO_CHAR (start_date, 'IW'))   ISO_wk#
  FROM
  (
   SELECT TRUNC(SYSDATE, 'YEAR')+((LEVEL-1)*7)-1 AS start_date
    FROM dual
   CONNECT BY LEVEL <= 
   ( -- Nbr of days / 7 = 52 weeks in 2013 --
    SELECT Round((TRUNC(ADD_MONTHS (SYSDATE, 12), 'Y')-TRUNC(SYSDATE, 'Y'))/7) 
      FROM dual
   )
 )
/

START_DATE    WK_STARTS     WK_ENDS                ISO_WK#
-----------------------------------------------------------
12/31/2012    12/31/2012    1/6/2013 11:59:59 PM      1
1/7/2013      1/7/2013      1/13/2013 11:59:59 PM     2
1/14/2013     1/14/2013     1/20/2013 11:59:59 PM     3
...
...
12/23/2013    12/23/2013    12/29/2013 11:59:59 PM    52 
```

周数日历以确认周日期和数字：[http ://www.epochconverter.com/date-and-time/weeknumbers-by-year.php](http://www.epochconverter.com/date-and-time/weeknumbers-by-year.php)

# c# - 在 TabContainer 中使用 FileUpload

> ID：15045154
> 
> 赞同：0
> 
> 时间：2013-02-23T20:16:42.010
> 
> 标签：c#, asp.net, tabs, tabcontainer

我在 TabContainer 控件中使用 FileUpload 控件 asp.net（选项卡 asp.net ajax 控件工具包：[地址](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Tabs/Tabs.aspx)）。

但是 FileUpload 不能正常工作。请帮助我在 TabContainer 中使用 FileUpload。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:24:18.300

我认为在 TabContainer 中使用 FileUpload 存在一些已知问题，您必须进行回发才能使用 FileUpload

也许您可以在这些网站上查看一些详细信息

[http://forums.asp.net/t/1755112.aspx/1](http://forums.asp.net/t/1755112.aspx/1)

[http://forums.asp.net/t/1456188.aspx/1](http://forums.asp.net/t/1456188.aspx/1)

# jsf - 将动作动态添加到 commandButton

> ID：15045164
> 
> 赞同：0
> 
> 时间：2013-02-23T20:17:42.733
> 
> 标签：jsf, tomahawk

我正在使用 JSF 2.0 和 tomahawk-lib 动态创建 html 元素。我想向 HtmlCommandButton 添加一个操作命令，但无法完成。在此先感谢您的帮助。我可以看到按钮和onclick被触发，所以一定是与方法表达式有关的错误。

```
HtmlCommandButton submitLogin = new HtmlCommandButton();
FacesContext fc = FacesContext.getCurrentInstance();
ELContext ctx = fc.getELContext();
String expression = "#{hangmanController.login}";
Class[] parameterTypes = new Class[0];
MethodExpression me = fc.getApplication().getExpressionFactory().
     createMethodExpression(ctx, expression, String.class, parameterTypes);
submitLogin.setActionExpression(me);
submitLogin.setOnclick("alert('BP');"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:55:53.553

以编程方式创建`UIInput`的`UICommand`组件必须具有固定的 ID 集，否则 JSF 将在应用请求值阶段无法识别与请求参数映射中的输入和命令组件关联的请求参数。

```
submitLogin.setId("submitLogin"); 
```

# jquery - 固定侧边栏 - 使用 jQuery 粘在页脚

> ID：15045170
> 
> 赞同：1
> 
> 时间：2013-02-23T20:18:13.440
> 
> 标签：jquery, css

我有以下 [JSFIDDLE](http://jsfiddle.net/TGw7j/5/)来演示我正在使用的页面布局，但很难实现我想要的。

如果将主要内容一直滚动到底部，您将看到侧边栏的底部与页脚的顶部相接。 *那是应该永远看起来的样子*。但是，如果您调整大小或滚动，您会发现并非如此。

经过几天的 css 摆弄，我得出结论，这只能用 js 完成。请提供一个有效的小提琴，**特别是**如果您声称它可以像其他人在我的其他问题中那样仅使用 CSS 来完成，而我无法获得任何工作答案。所有提出的答案的问题都`position:fixed`被删除了，侧边栏随着主要内容滚动，这是不应该发生的。

请帮助达到预期的效果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:26:10.423

更新：

这显然不能仅在 CSS 上实现，这是一个 jQuery 解决方案。

```
var vh = $("body").height() - $("footer").height();
var sh = $("#side").height();

$(window).resize(function() {
    vh = $("body").height() - $("footer").height();
    sh = $("#side").height();
});

$(document).scroll(function() {
    var vs = $(document).scrollTop() + sh + $("footer").height();

    if(vs < vh)
        $("#side").css("bottom", "0px");
    else
        $("#side").css("bottom", (vs - vh) + "px");
}); 
```

这是一个用于测试的[jsFiddle](http://jsfiddle.net/goffreder/cYAct/6/)。

# latex - 在 pandoc 预格式化部分中包含 LaTeX

> ID：15045173
> 
> 赞同：3
> 
> 时间：2013-02-23T20:18:35.227
> 
> 标签：latex, pandoc

我在 pandoc 文档中有一段预先格式化的代码。这是伪代码，严格来说，我想在预格式化部分中包含一些渲染的 LaTeX。例如：

```
# Dijkstra's algorithm

Dijkstra's Algorithm (G,l)
Let S be the set of explored nodes
    For each u in S, we store a distance d(u)
Initially S = {s} and d(s) = 0
While S is not equal to V
    Select a node v not in S with at least one edge from S for which
        d'(v) = min_{e = (u,v) : u in S} d(u) + l_e is as small as possible
    Add v to S and define d(v) = d'(v)
EndWhile 
```

例如，我想`d'(v) = min_{e = (u,v) : u in S} d(u) + l_e`在文档的正文中像这样呈现：`$d'(v) = \mathrm{min}_{e = (u,v) : u \in S} d(u) + l_e$`

不，`$d'(v) = \mathrm{min}_{e = (u,v) : u \in S} d(u) + l_e$`在预格式化部分中输入它不会这样做......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T23:18:08.473

您是否尝试过转义字符，例如：

```
\$d'(v) = \mathrm{min}_{e = (u,v) : u \in S} d(u) + l_e\$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T22:21:06.700

这真的是一个乳胶问题......包`fancyvrb`应该做你想要的。它允许您在 Verbatim 块中指定转义序列。例如，在标题中包含 \usepackage{fancyvrb} 后：

```
\begin{Verbatim}[commandchars=\\\{\}] \textit{% This is a comment}
First verbatim line.
\fbox{Second} verbatim line. \textcolor{red}{Third} verbatim line.
\end{Verbatim} 
```

将在第三行以红色渲染单词 red。注意 \begin{Verbatim} 与大写 V 区别于常规逐字环境。

# c++ - 范围的 C++ 映射

> ID：15045177
> 
> 赞同：1
> 
> 时间：2013-02-23T20:18:41.067
> 
> 标签：c++, map, hex, range

我正在做一个关于 C++ 的项目，并且我是该语言的新手。

我正在使用一个函数，它必须执行从 0x00 到 0xFF 的十六进制数字，并且有人告诉我我可以用地图来做到这一点。

问题是，到目前为止，在我看到的示例中，我只看到它仅用于一个条目，而我需要根据特定范围做一些事情。

有没有办法在地图中做到这一点，或者我需要使用其他东西来完成所需的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:18:04.600

如果理解正确，您将一些值存储在映射中，键是从 0x00 到 0xFF 的值？可能的解决方案可能是：

```
typedef std::map<unsigned char, int> values;
void print( values::const_iterator begin, values::const_iterator end );

values v;
// print range [0x01,0x20]
print( v.lower_bound( 0x01 ), v.upper_bound( 0x20 ) );
// print range [0x10,0x40[
print( v.lower_bound( 0x10 ), v.lower_bound( 0x40 ) );
// print range ]0x20,0x50[
print( v.upper_bound( 0x20 ), v.lower_bound( 0x50 ) ); 
```

那是你需要的吗？

# python - While 循环的平均时间

> ID：15045181
> 
> 赞同：0
> 
> 时间：2013-02-23T20:18:54.103
> 
> 标签：python, time, python-3.x

我有一个函数可以测量某人回答乘法和所需的时间，但我希望能够显示用户完成使用该函数后所花费的**平均时间（它在一个 while 循环中）。**这是功能：

```
def withTimer():
    playAgain = "yes"
    correct = 0
    total = 0
    while playAgain == "yes":
        total = total + 1
        random1 = random.choice(tablesUsed)
        random2 = random.randint(1, 12)
        realAnswer = random1 * random2
        start = time.time()
        humanAnswer = int(input("What is the answer to this multiplication sum?\n" + str(random1) + " * " + str(random2) + "\n"))
        if realAnswer == humanAnswer:
            elapsed = round((time.time() - start), 1)
            correct = correct + 1
            score = str(int(correct / total * 100)) + "%"
            if elapsed < 2:
                print("Congratulations, you got it correct in " + str(elapsed) + " seconds!\nThat is a very good time!\nScore: " + score)
            else:
                print("Congratulations, you got it correct in " + str(elapsed) + " seconds!\nNow work on your time.\nScore: " + score)            
        else:
            score = str(int(correct / total * 100)) + "%"
            print("Unforunately, you got this one incorrect, the actual answer was " + str(realAnswer) + ".\nScore: " + score)
        elapsed1 = 
        playAgain = input("Do you wish to play again? (yes or no)\n")
        if playAgain == "yes":
            settings()
        else:
            print("Thank you for practicing your multiplication tables\nwith me\nFinal Score: " + score + "\nAverage Time: " + averageTime) 
```

我已经编写了 averageTime 变量来显示我想要显示的平均时间。
我试过这个：

```
if realAnswer == humanAnswer:
            elapsed = round((time.time() - start), 1)
            times = times.append(elapsed) 
```

我在哪里定义了变量`times = []`，并且`global times`在另一个函数中，但这会产生错误：

```
'NoneType' object has no attribute 'append', line 26 
```

请帮助我尝试了解发生了什么，以及解决方案！
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T20:20:57.843

您可以创建一个经过时间的列表，然后通过将所有经过的时间相加并除以列表中的项目数来计算平均值，但是您不需要这样做。只要您保持已用时间的总和，平均回答时间就是总用时除以回答总数。

您的程序的以下版本以这两种方式计算平均值并显示两者以表明两种方式的结果相同。

```
import time,random

def withTimer():
    playAgain = "yes"
    correct = 0
    total = 0
    totalTime = 0
    etime = []
    while playAgain[0] == "y":
        total = total + 1
        random1 = random.randint(1, 12)
        random2 = random.randint(1, 12)
        realAnswer = random1 * random2
        start = time.time()
        humanAnswer = int(input("What is the answer to this multiplication sum?\n" + str(random1) + " * " + str(random2) + "\n"))
        if realAnswer == humanAnswer:
            elapsed = round((time.time() - start), 1)
            etime.append(elapsed)
            correct = correct + 1
            score = str(int(correct / total * 100)) + "%"
            if elapsed < 2:
                print("Congratulations, you got it correct in " + str(elapsed) + " seconds!\nThat is a very good time!\nScore: " + score)
            else:
                print("Congratulations, you got it correct in " + str(elapsed) + " seconds!\nNow work on your time.\nScore: " + score)            
        else:
            score = str(int(correct / total * 100)) + "%"
            print("Unforunately, you got this one incorrect, the actual answer was " + str(realAnswer) + ".\nScore: " + score)
        totalTime += elapsed
        playAgain = input("Do you wish to play again? (yes or no)\n")
    averageTime = totalTime / total
    averageTime1 = sum(etime) / len(etime)
    if playAgain[0] != "y":
        print("Thank you for practicing your multiplication tables\nwith me\nFinal Score: " + score + "\nAverage Time: " + str(averageTime) + " AverageTime1 = "  + str(averageTime))

withTimer() 
```

# java - Java 是否提供 ExecutorService 允许工作人员在同一个线程上执行？

> ID：15045182
> 
> 赞同：5
> 
> 时间：2013-02-23T20:19:25.413
> 
> 标签：java, multithreading, concurrency, threadpool, executorservice

我正在寻找一种实现，`ExecutorService`它将提供以下语义。每个线程都由一个“工作人员”占用，该工作人员根据输入执行某些任务。每个工作者都保证只在单个线程中执行，因此，应该允许它在一个任务之间维护状态，而没有同步的开销，因为它将在单个线程中与自身同步。

因此，假设我有 100 个输入和 10 个工人，我希望能够编写如下内容：

```
for (Input input: inputs) {
    // The following code would pass t to all 10 workers,
    // each bound to their own thread,
    // and wait for them to complete.
    executor.invokeAll(input);
} 
```

请注意，每个 Worker 对任何给定的输入都会做不同的事情。输入不是可运行的代码块，它只是工人的一个参数。每个工人决定如何处理输入。不过，为了使其更简单，工作人员实现了一个接口，允许以多态方式调用它，接收输入。

我已经使用 a 破解了一些可行的东西，我的瘦包装器在`Map<Worker, WorkerExecutor>`哪里a ，并且每个线程池中只有一个 Worker 实例将运行。我更愿意找到知道自己在做什么的人写的东西:-)`WorkerExecutor``Executors.newSingleThreadPool`

* * *

### 潜在的低效率我可以接受

我意识到这种语义会导致效率低下，但是，我试图在开发时间方面获得最大的收益，并且重新设计 Worker 的每个实现以实现线程安全并非易事。我的意思是效率低下是执行可能/将看起来像这样（在此示例中模拟最多 2 个活动线程）：

```
 | Task 1    | Task 2    | Task 3    | Task 4    |
Worker 1 | =@        | =@        | =@        | =@        |
Worker 2 | ==@       | ==@       | ==@       | ==@       |
Worker 3 |   ==@     |   ==@     |   ==@     |   ==@     |
Worker 4 |    =====@ |    =====@ |    =====@ |    =====@ | 
```

问题是 Worker 3 完成后，没有任务可做，直到 Worker 4 完成后才能完成任何工作。这可能是 CPU 可以空闲的任意长的时间。

* * *

### 这样的`ExecutorService`存在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T21:02:11.250

听起来你真正想要的是[演员](http://en.wikipedia.org/wiki/Actor_model)。简单地说，actor 是一个在单个线程中运行的对象，并且有一个任务“邮箱”，它负责按顺序处理这些任务。[Akka](http://akka.io/)似乎是当前在 JVM 上提供 actor 的领先库/框架。看看那边。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T18:30:40.193

类似于以下内容：

```
import java.util.LinkedHashSet;
import java.util.Set;
import java.util.concurrent.Executor;
import java.util.concurrent.Executors;

// you implement this for each of your non-parallelisable jobbies
interface Worker<T> {
    public void process(T input);
}

// implementation detail
class Clerk<T> {
    private final Executor executor = Executors.newSingleThreadExecutor();
    private final Worker<T> worker;

    public Clerk(Worker<T> worker) {
        this.worker = worker;
    }

    public void process(final T input) {
        executor.execute(new Runnable() {
            @Override
            public void run() {
                worker.process(input);
            }
        });
    }
}

// make one of these, and give it all your workers, then give it input
class Workshop<T> {
    private final Set<Clerk<T>> clerks = new LinkedHashSet<Clerk<T>>();

    public void addWorker(Worker<T> worker) {
        // mutable; you love it
        clerks.add(new Clerk<T>(worker));
    }

    public void process(T input) {
        for (Clerk<T> clerk : clerks) {
            clerk.process(input);
        }
    }

    public void processAll(Iterable<T> inputs) {
        for (T input : inputs) {
            process(input);
        }
    }
} 
```

也许？

# sql - Oracle SQL：仅返回另一个表的字段中包含的值

> ID：15045184
> 
> 赞同：1
> 
> 时间：2013-02-23T20:19:33.923
> 
> 标签：sql, string, oracle, subquery

我正在尝试编写一个 Oracle SQL 查询以返回一组当前配置为执行工作的值。

我有两张桌子：

```
VALUES
A
B
C
D

JOB, STRINGS_TO_SEARCH
1    {r, e, 'Hello' A w: B, xyz}
2    {ok, D } 
```

每个作业的配置都存储在一个字符串中。我将如何编写一个只返回为作业配置的值的查询？

这甚至可以使用内置的 Oracle 函数吗？好像我可能要求生成一个动态查询......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T20:43:58.320

```
create table T_VALUES (
   VAL   varchar2(20)
);

insert into T_VALUES values ('A');
insert into T_VALUES values ('B');
insert into T_VALUES values ('C');
insert into T_VALUES values ('D');

create table T_JOBS (
   JOB_ID   int,
   STR_LIST varchar2(50)
);

insert into T_JOBS values (1, 'r, e, ''Hello'' A w: B, xyz');
insert into T_JOBS values (2, 'ok, D ');

select
   job_id,
   val
from
   T_VALUES
   natural join (
      select
         job_id,
         regexp_substr(str_list, '[^ ,]+', 1, occ) as val
      from
         T_JOBS
         cross join (
            select level as occ from dual
            connect by level <= (select max(length(str_list)) from T_JOBS)
         )
   )
order by 1, 2 
```

[小提琴](http://www.sqlfiddle.com/#!4/ebc94/1)

* * *

**编辑 ：**

改进版（使用 Ben 的想法）

```
create table T_VALUES (
   VAL   varchar2(20)
);

insert into T_VALUES values ('A');
insert into T_VALUES values ('B');
insert into T_VALUES values ('C');
insert into T_VALUES values ('D');

create table T_JOBS (
   JOB_ID   int,
   STR_LIST varchar2(50)
);

insert into T_JOBS values (1, 'junk, values=A:NotA:B:r:e, more_junk');
insert into T_JOBS values (2, 'ok, values=D ');

create type nt_str as table of varchar2(50);

select
   j.job_id,
   v.val
from
   T_JOBS j,
   table(
      cast(
        multiset(
          select
            regexp_substr(
              regexp_substr(j.str_list, 'values=([^, ]+)', 1, 1, 'i', 1), 
              '[^:]+', 1, level)
          from dual
          connect by 
            regexp_substr(
              regexp_substr(j.str_list, 'values=([^, ]+)', 1, 1, 'i', 1), 
              '[^:]+', 1, level) is not null
        ) as nt_str
      )
   ) t
   join T_VALUES v 
     on v.val = t.column_value
order by 1, 2 
```

[再来一把小提琴](http://www.sqlfiddle.com/#!4/83fc8/2)

# sharepoint-workflow - 如何从 powershell 启动工作流 2013

> ID：15045189
> 
> 赞同：2
> 
> 时间：2013-02-23T20:20:07.940
> 
> 标签：sharepoint-workflow

有一些关于[如何使用 powershell 处理 2010 工作流](http://www.mysharepointadventures.com/2012/06/start-a-workflow-using-powershell/)的指南。有人可以向我指出如何对 2013 工作流程做同样的事情吗？它们不再列在里面`$list.WorkFlowAssociations`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-30T20:46:10.130

```
$siteURL = "URL"
$web = Get-SPWeb $siteURL
$wfm = New-object Microsoft.SharePoint.WorkflowServices.WorkflowServicesManager($web)
$sub = $wfm.GetWorkflowSubscriptionService()
$subscriptions = $sub.EnumerateSubscriptionsByList($list.ID) 
```

在 $subscriptions 中，有相关的工作流。希望能帮助到你

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-22T18:46:11.363

此[MSDN 博客文章](http://social.technet.microsoft.com/wiki/contents/articles/23850.sharepoint-2013-workflow-management-starting-a-workflow-using-powershell.aspx)显示了大部分答案，但他们试图迭代列表而不是列表中的项目。下面是一个更新的版本。

```
$sourceWebURL = '<URL>'
$sourceListName = '<List Name>'
$TargetWorkflow = '<Workflow Name>'
$spSourceWeb = Get-SPWeb $sourceWebURL
$spSourceList = $spSourceWeb.Lists[$sourceListName]
$items = $spSourceList.getItems()

#-- Getting a Workflow manager object to work with.
$wfm = New-object Microsoft.SharePoint.WorkflowServices.WorkflowServicesManager($spSourceweb)
#-- Getting the subscriptions
$sub = $wfm.GetWorkflowSubscriptionService()
#-- Getting the specific workflow within the list of subscriptions on the specific list. (SP2010 associated workflows basically)
$WF = $sub.EnumerateSubscriptionsByList($spSourcelist.ID) | Where-Object {$_.Name -eq "$TargetWorkflow"}
#-- Getting a Workflow instance in order to perform my commands.
$wfis=$wfm.GetWorkflowInstanceService()

Foreach($item in $items){
    #-- Creating the dictionary object I need to parse into StartWorkflow. This could be most other workflow commands.
    $object = New-Object 'system.collections.generic.dictionary[string,object]'
    $object.Add("WorkflowStart", "StartWorkflow");
    $wfis.StartWorkflowOnListItem($WF, $item.ID, $object)
} 
```

# nlp - 命名实体识别数据和特征

> ID：15045190
> 
> 赞同：5
> 
> 时间：2013-02-23T20:20:09.567
> 
> 标签：nlp, named-entity-recognition

我正在构建一个带有条件随机字段的命名实体识别器，并且正在寻找两件事：

A) 用于人员、位置和组织实体的开源英语 NER 数据集

B) 英语 NER 特征列表

我已经查看了 CoNLL-2003 语料库，发现这正是我想要的，但它并不容易获得。我未能成功找到 NER 特征列表；我试图避免手工设计这些功能。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-15T21:55:22.190

您将在Ratinov & Roth的[这篇论文](http://www.aclweb.org/anthology/W09-1119)中找到关于 NER 所需内容的总结且内容丰富的研究。此外，他们的系统是完全开源的，包括从维基百科收集的命名实体列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:17:56.560

A) 除了 MUC 语料库，您还应该在此处查看手动注释的子语料库：http: [//www.americannationalcorpus.org/MASC/About.html](http://www.americannationalcorpus.org/MASC/About.html)它是免费的，并且具有各种文档类型。它带有用于解析 NLTK、GATE 和 UIMA 格式的工具：[http ://www.anc.org/MASC/Download](http://www.anc.org/MASC/Download)

B）这是一个非常笼统的问题。您可以尝试 n-gram、单词大写、使用字符串作为特征、词性等。您可以从阅读斯坦福解析器方法与 CRF 开始：[http://nlp .stanford.edu/software/CRF-NER.shtml](http://nlp.stanford.edu/software/CRF-NER.shtml)

# ios - ASIHTTPRequest 与 Put 问题和 kCFErrorDomainCFNetwork 错误 303

> ID：15045191
> 
> 赞同：0
> 
> 时间：2013-02-23T20:20:12.653
> 
> 标签：ios, asihttprequest

我正在尝试使用 ASIHTTPRequest put 方法将文件从 Document 文件夹上传到 URL。我收到以下错误，似乎是 kCFErrorHTTPParseFailure error 。任何想法是什么问题以及如何解决？

```
 Error Domain=ASIHTTPRequestErrorDomain Code=1 "A connection failure occurred"
 UserInfo=0xe027890 {NSUnderlyingError=0xe026300 "The operation couldn’t be completed. 
(kCFErrorDomainCFNetwork error 303.)", NSLocalizedDescription=A connection failure 
 occurred}

 My code as follow 

NSURL *url = [NSURL URLWithString:@"http://www.uploadURL/"];
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request setRequestMethod:@"PUT"];
[request addBasicAuthenticationHeaderWithUsername:@"UsrName"
                                      andPassword:@"UserPassword"];
[request setValidatesSecureCertificate:NO];
[request setDelegate:self];
 request.shouldAttemptPersistentConnection   = NO;

[request setPostBodyFilePath:fullPathFile];
[request setShouldStreamPostDataFromDisk:YES];
[request startAsynchronous]; 
```

我只是在尝试为什么我会收到该错误以及正确执行此操作的方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:31:09.177

好吧，我确实想通了。以下代码用于使用 HTTP put 上传文件。希望这会帮助某人。

```
 NSURL *url = [NSURL URLWithString:@"http://www.SomeSite/UploadFolder/FileName.ext"];
 ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
 [request setRequestMethod:@"PUT"];
 [request addBasicAuthenticationHeaderWithUsername:@"UsrName"
                                       andPassword:@"UsrPassword"];
 [request setShouldPresentCredentialsBeforeChallenge:YES];
 [request setDelegate:self];
 [request setAuthenticationScheme:(NSString *) kCFHTTPAuthenticationSchemeBasic];

 [request setPostBodyFilePath:fullFilePath]; // Example: Documents/MyFile.txt
 [request setShouldStreamPostDataFromDisk:YES];
 [request startAsynchronous]; 
```

# telerik-grid - Telerik for ASP.Net MVC 扩展的 onError 事件

> ID：15045194
> 
> 赞同：0
> 
> 时间：2013-02-23T20:20:24.490
> 
> 标签：telerik-grid, telerik-mvc

网格的 onError 事件究竟是什么时候触发的？

我想知道我所拥有的是否足以应对控制器中发生的任何错误。在我的 .Layout_cshtml 页面中，我有以下代码片段......

我想确保如果 Catch 块内发生错误，它将显示（通过 _Layout.cshtml 页面中的代码）。

在我的控制器中，在 Catch 中，我什么都没有。

如果我的模型有错误怎么办？这会自动按原样显示还是我需要在 Controller 中捕获 ModelState 错误（我知道该怎么做）并在此处吐出警报消息...。

在我看来，我有以下几点：

```
.ClientEvents(ev => ev.OnError("error_handler")) 
```

.Layout_cshtml 页面：

```
<script type="text/javascript">

            function error_handler(e) {

                if (e.errors) {

                    var message = "Errors:\n";

                    $.each(e.errors, function (key, value) {

                        if ('errors' in value) {

                            $.each(value.errors, function () {

                                message += this + "\n";

                            });

                        }

                    });

                    alert(message);

                }

            }

        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:19:45.020

As explained in the [documentation](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-client-api-and-events.html#OnError) it is fired for several reasons. Mainly it is used if there are model state errors during after update. Or if there is error on the server while binding.

It will also get fired if the response returned from the server is not in the correct format.

# c++ - Makefile 包含错误

> ID：15045195
> 
> 赞同：0
> 
> 时间：2013-02-23T20:20:25.783
> 
> 标签：c++, makefile

我是 makefile 的新手，编译时出现此错误。

```
all: main
main.o:ssh-functions.o mysql_connector.o
    g++ -c main.c ssh-functions.o mysql_connector.o -I libuv/include -L libuv/ -luv -lrt -lpthread
ssh-functions.o:ssh-functions.cpp 
    g++ -c  ssh-functions.cpp -lssl -lcrypto 
mysql_connector.o: mysql_connector.c
    g++ -I/usr/include/mysql/ -c mysql_connector.c -L/usr/include/mysql/ -lmysqlclient 

clean:
    rm -rf *.o 
```

输出：

```
g++ -c  ssh-functions.cpp -lssl -lcrypto
g++ -I/usr/include/mysql/ -c mysql_connector.c -L/usr/include/mysql/ -lmysqlclient
g++ -c main.c ssh-functions.o mysql_connector.o -I libuv/include -L libuv/ -luv -lrt -lpthread
In file included from main.c:4:0:
mysql_connector.c:4:19: fatal error: mysql.h: No such file or directory
compilation terminated.
make: *** [main.o] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:55:45.900

试试…… 像这样（最终替换`main`为`main.exe`这取决于您的目标操作系统环境）：

```
MY_INCLPATHS=-I /usr/include/mysql -I libuv/include
MY_LIBPATHS=-L /usr/include/mysql -L libuv/
MY_LIBS=-lmysqlclient -lssl -lcrypto -luv -lrt -lpthread

all: main
main: main.o ssh-functions.o mysql_connector.o   
    g++ ${MY_LIBPATHS} main.o ssh-functions.o mysql_connector.o ${MY_LIBS} -o main
main.o: main.c
    g++  ${MY_INCLPATHS} -c main.c
ssh-functions.o: ssh-functions.cpp 
    g++  ${MY_INCLPATHS} -c ssh-functions.cpp
mysql_connector.o: mysql_connector.c
     g++ ${MY_INCLPATHS} -c mysql_connector.c  

clean:
    rm -rf main *.o 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T20:26:36.240

您需要`-I/usr/include/mysql`在每个编译器调用上添加，它将编译包含`#include <mysql.h>`或等效的源代码。

你在 compiles 的行上错过了那个`main.c`。

提示 1：将`-I`(include search paths) 移到您正在编译的源代码文件*之前*`-L`，将(library search paths) 和`-l`(libraries) 部分移到代码文件*之后。*`-I`用于预处理器，它*首先*运行。`-L`并且是*最后*`-l`运行的链接器。

 *提示 2：除非您确切知道自己在做什么，否则*不要*使用。`-lpthread`改为使用`-pthread`。如果你需要它来进行一次编译，那么你很可能需要它来进行同一个项目中的所有编译。（把它放在影响完整编译、预处理器和链接器的所有内容之前。）*

# ios - 具有边框半径 + 边框颜色的图像在 Chrome/Safari iOS 上不起作用

> ID：15045196
> 
> 赞同：4
> 
> 时间：2013-02-23T20:20:28.093
> 
> 标签：ios, css

我试图弄清楚为什么具有圆形边框半径和白色边框颜色的图像在 iOS 上的 Chrome/Safari 上不起作用。它适用于我的桌面。

这是它的外观截图，以及我的 HTML/CSS：

**截图：http:** [//i46.tinypic.com/29z61c4.jpg](http://i46.tinypic.com/29z61c4.jpg)

**HTML：**

```
<div class="span4">
        <img class="img-circle" src="assets/img/subfeatured1.jpg">
        <h3>Feature 1</h3>
        <p>Donec sed odio dui. Etiam porta sem malesuada magna mollis euismod. Nullam id dolor id nibh ultricies vehicula ut id elit. Morbi leo risus, porta ac consectetur ac, vestibulum at eros. Praesent commodo cursus magna, vel scelerisque nisl consectetur et.</p>
        <p><a class="btn btn-primary" href="#">View details »</a></p>
</div> 
```

**CSS：**

```
.img-circle {
  width: 70%;
  border: 10px solid white;

    -webkit-border-radius: 50%;
       -moz-border-radius: 50%;       
            border-radius: 50%;

       -webkit-box-shadow: 0 5px 12px rgba(0,0,0,1);  
          -moz-box-shadow: 0 5px 12px rgba(0,0,0,1);  
               box-shadow: 0 5px 12px rgba(0,0,0,1);

     -moz-background-clip: padding;  
  -webkit-background-clip: padding-box;  
          background-clip: padding-box;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T07:35:23.580

检查您的浏览器版本是否旧，这就是发生此问题的原因。而且你不需要使用`background-clip`财产。

检查这个，`**[demo jsFiddle](http://jsfiddle.net/wEGDY/)**`

### HTML

```
<img class="img-circle" src="http://3.bp.blogspot.com/-J_QabuviUDk/UEdgMt2AvfI/AAAAAAAAEIQ/yPc1XekoSnE/s1600/800px-Rectangle_example.svg.png"> 
```

### CSS

```
.img-circle {
  width: 80%;
  border: 10px solid white;

    -webkit-border-radius: 50%;
       -moz-border-radius: 50%; 
            border-radius: 50%;

       -webkit-box-shadow: 0 5px 12px rgba(0,0,0,1);  
          -moz-box-shadow: 0 5px 12px rgba(0,0,0,1);  
               box-shadow: 0 5px 12px rgba(0,0,0,1);
} 
```

`Chrome`和`Safari`供应商前缀相同，所以我认为它在 safari 上工作，我不确定 100%。

# java - 在 writeObject(null) 之后期望 0 个字节，但我发现 5 个字节，这是怎么回事？

> ID：15045198
> 
> 赞同：1
> 
> 时间：2013-02-23T20:20:37.893
> 
> 标签：java, objectoutputstream, bytearrayoutputstream

将对象写入 ByteArrayOutputStream 时，我得到了一些奇怪的结果。

```
 ByteArrayOutputStream baos = new ByteArrayOutputStream();
    ObjectOutputStream os = new ObjectOutputStream(baos);
    os.writeObject(null);

    byte[] objectBytes = baos.toByteArray();
    int objectSize = objectBytes.length; 
```

所以我将空值写入 ByteArrayOutputStream，然后当我从该流中检索字节而不是找到 0 个字节时，我发现有 5 个。字节的值如下 -

*   [0] => -84
*   [1] => -19
*   [2] => 0
*   [3] => 5
*   [4] => 112

如果我更改`os.writeObject(null)`为`os.writeObject("A")`我得到 8 个字节，这些是 -

*   [0] => -84
*   [1] => -19
*   [2] => 0
*   [3] => 5
*   [4] => 116
*   [5] => 0
*   [6] => 65
*   [7] => 8

那么这里发生了什么，如果我写 0 个字节，我希望在检索字节数组时找到字节。然后我看到它增加了额外的 5 个字节。所以当我写“A”时，我希望它在字节数组中返回 6 个字节，但它返回 8。这是怎么回事？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-23T20:27:30.150

首先，你写的时候不是什么都写`null`。您正在编写一个空值。序列化过程必须确保当你反序列化时，你会得到一个`null`返回，所以它必须以某种方式表示。开始时也可能有开销来标记流的开始。

同样，当您写“A”时，您不仅仅是在输入“A”字符。您正在序列化一个完整的 String 对象。这必须包含反序列化器稍后重建具有相同值的 String 对象的信息。所以有类型信息和内容。内容本身也将占用超过一个字节，因为 Java 在内部将 String 表示为`char`2 字节值的数组，并且还因为字符串的长度必须以某种方式编码（实际上我什至很惊讶他们'会把所有这些都放在8个字节中）。

**编辑：**我已经查看了[此页面](http://www.javaworld.com/community/node/2915)上的解释。我们可以使用它来了解您获得的结果。

在第一个示例中，您有以下字节：

*   AC ED（这是 -84 -19 的十六进制）：STREAM_MAGIC。指定这是一个序列化协议的神奇值。
*   00 05：STREAM_VERSION。版本 5。
*   70（十六进制表示112）：TC_NULL，代表一个空值。

在您的第二个示例中，实际上您给出的值不对应。我自己试过你的代码，我得到了：

*   AC ED：STREAM_MAGIC
*   00 05：STREAM_VERSION
*   74：TC_STRING，代表一个新的String
*   00 01：字符串的长度（1）
*   65：“A”的 UTF8 表示。

对于最后一个字节，我显然有点错误：即使 Java 在内部使用 2 字节表示 char，它也使用 UTF8 对字符串进行编码，它只使用一个字节来表示字符“A”。

格式中的所有特殊值都是[ObjectStreamConstants类中的常量](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/ObjectStreamConstants.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T20:29:26.237

Null 是一个与任何其他值一样的值。可能存在需要编写的情况。

# android - android - 通过方向改变保持唤醒锁？

> ID：15045204
> 
> 赞同：0
> 
> 时间：2013-02-23T20:20:53.897
> 
> 标签：android, orientation, wakelock

我正在尝试创建一个只要用户选择它就会保持清醒的应用程序 - 在方向改变的情况下它甚至会保持清醒。

最初，我通过在用户决定应用程序应该保持唤醒状态时创建一个唤醒锁来做到这一点，然后在 onPause() 处释放这个锁，这样它就不会永远保持下去。但是，当方向发生变化时，相关活动将被销毁并创建一个新活动 - 我看不到将唤醒锁“移交”给新实例的方法。

当然可以将其保存为已保存的实例状态 - 但是在活动被销毁时，人们不知道它是否是因为方向改变的原因，或者它是否被永久销毁。

有没有通用的方法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-01T20:40:15.640

正如在[Android: Wakelock & handling orientation change](https://stackoverflow.com/questions/2058712/android-wakelock-handling-orientation-change)中也提到的，您可以在 onCreate() 中使用 FLAG_KEEP_SCREEN_ON 标志：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

如果您只需要该一项活动的唤醒锁，那应该就足够了，因此您甚至不需要唤醒锁权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T00:15:31.057

我参加这个聚会有点晚了，但我是这样做的……

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
wl = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK|PowerManager.ON_AFTER_RELEASE, "DoNotDimScreen"); 
```

其次是...

```
wl.acquire(); 
```

...当您需要实际激活唤醒锁时。

'PowerManager.ON_AFTER_RELEASE' 标志会触发用户活动计时器，因此当此唤醒锁被释放时屏幕会停留更长时间，当您的活动因方向改变而被破坏时就是这种情况。

非常适合我！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T20:25:14.963

你可以来电`isFinishing()`。`onPause()`

[http://developer.android.com/reference/android/app/Activity.html#isFinishing%28%29](http://developer.android.com/reference/android/app/Activity.html#isFinishing%28%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-30T10:28:30.167

可用的解决方案，如果您需要其他`SCREEN_BRIGHT_WAKE_LOCK`：[请参阅我的答案here](https://stackoverflow.com/a/24487979/952135)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-23T21:30:37.190

我认为你应该能够使用：

[http://developer.android.com/reference/android/app/Fragment.html#setRetainInstance(boolean)](http://developer.android.com/reference/android/app/Fragment.html#setRetainInstance(boolean))

...区分配置更改（方向）和实际终止

# ruby-on-rails - Completed 500 Internal Server Error in 4ms NameError (未初始化常量 Site::Whois)

> ID：15045205
> 
> 赞同：0
> 
> 时间：2013-02-23T20:21:03.700
> 
> 标签：ruby-on-rails, ruby, whois

我正在使用 whois gem，我在开发中工作得很好。当我在生产中上传它时，我有这样的错误：

```
Completed 500 Internal Server Error in 4ms
NameError (uninitialized constant Site::Whois):
app/models/site.rb:11:in `get_whois'
app/controllers/whois_controller.rb:11:in `show' 
```

我的 get_whois 方法是

```
 def get_whois
    c = Whois::Client.new
    @array = c.query(@site_domain)
  end 
```

错误是 Whois::Client.new

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:23:29.550

`Whois`当您尝试在`Site`模型中使用该库时，该库似乎未正确加载到您的生产环境中。

# input - 为 XNA 游戏提供更好的键盘输入

> ID：15045208
> 
> 赞同：0
> 
> 时间：2013-02-23T20:21:37.137
> 
> 标签：input, xna

默认 XNA 输入不提供可能在帧处理期间调用某些方法的事件处理程序（在更新调用之间，按下键时立即调用）。

我尝试使用 Nuclex.Input，但它有一些缺陷——F10、Alt 和 Pause 等键不会触发分配的事件。其中一些键出现在`GetKeyboard().GetState().GetPressedKeys()`列表中，但其中一些没有出现，这对于制作快捷方式是不可接受的。

如果有办法让 XNA 的默认输入管理器处理事件，我会很高兴，但我还没有看到有人说这是可能的。所以我可能正在寻找其他一些输入管理器，它可以给我任何按键按下/释放事件处理程序。

或者，也许有一些方法可以通过使用 Windows 挂钩来避免使用第三方库，例如为任何按键按下/释放触发处理程序事件？

还是整个 XNA 输入方式都被破坏了，而更高级别的游戏引擎使用了完全不同的方法？

* * *

我看到过去几年[每个人都在使用 XInput。](http://en.wikipedia.org/wiki/List_of_XInput_games)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:06:02.773

这是我的一个旧项目的一些代码。`KeyboardState`它发现两个对象之间的差异。具体来说，它返回一个`KeyboardState`包含在第二个而不是第一个中的键。

```
KeyboardState GetKeysPressedBetween(KeyboardState first, KeyboardState second)
{
    KeyboardState pressed = new KeyboardState();
    for (int i = 0; i < 8; i++)
    {
        FieldInfo currentStateI = typeof(KeyboardState).GetField("currentState" + i, BindingFlags.NonPublic | BindingFlags.Instance);
        uint firstCurrentStateI = (uint)currentStateI.GetValue(first);
        uint secondCurrentStateI = (uint)currentStateI.GetValue(second);
        currentStateI.SetValueDirect(__makeref(pressed), ~firstCurrentStateI & secondCurrentStateI);
    }
    return pressed;
} 
```

这通常每帧调用一次，将当前状态与前一个状态进行比较。

可以修改代码以获取已释放的密钥，方法是替换

```
~firstCurrentStateI & secondCurrentStateI 
```

和

```
firstCurrentStateI & ~secondCurrentStateI 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T07:30:34.200

现在我已经在我的 XNA 游戏中使用 Nuclex.Input，但我仍在寻找更好的选择。

Nuclex.Input 的一些问题是它不区分左右 Shift 或 Ctrl 按钮，并且不检测某些键（包括 F10、左 Alt、PrintScreen 和 Pause）。

# python - 如果值不存在，则在字典中设置值？

> ID：15045211
> 
> 赞同：2
> 
> 时间：2013-02-23T20:21:42.730
> 
> 标签：python

我正在使用字典来存储一堆计数器，其中每个计数器都在计算文件类型（.wav、.mp3 等）的出现。

```
filetypecounter = {} 
```

当我遇到某种文件类型时，我希望能够以 Python 的方式增加计数器。所以我在想...

```
filetypecounter[filetype] +=1 
```

但是，如果文件类型不在字典中，我想将其实例化为 1。所以我的逻辑是如果文件类型计数器存在，则将计数器值加 1，否则将其设置为 1。

```
if filetype not in filetypecounter:
    filetypecounter[filetype] = 1
else: 
    filetypecounter[filetype] +=1 
```

有没有更蟒蛇的方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T20:25:41.010

```
from collections import defaultdict

filetypecounter = defaultdict(int)
filetypecounter[filetype] += 1 
```

或者

```
from collections import Counter

filetypecounter = Counter()
filetypecounter.update([filetype]) 
```

对于信息，如果您必须使用 a `dict`，那么您的解决方案（检查密钥是否存在）是一个合理的解决方案。也许更“pythonic”的解决方案可能是：

```
filetypecounter = {}
filetypecounter[filetype] = filetypecounter.get(filetype, 0) + 1 
```

但实际上，这个和其他建议只是同一主题的变体。我会使用柜台。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T20:23:44.373

看起来你想要的是[collections.defaultdict](http://docs.python.org/2/library/collections.html#collections.defaultdict)，或者Python 2.7 及更高版本的[collections.Counter 。](http://docs.python.org/2/library/collections.html#collections.Counter)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T20:43:09.137

这组答案很好地涵盖了使用`collections.Counter`情况，但这可能不是最快的选择。

一种较旧的方法是：

```
>>> d={}
>>> for ext in ('.mp3','.mp3','.m4a','.mp3','.wav','.m4a'):
...    d[ext]=d.setdefault(ext,0)+1
... 
>>> d
{'.mp3': 3, '.wav': 1, '.m4a': 2} 
```

这也不是最快的，但它比`collections.Counter`

这些方法有[基准测试](http://evanmuehlhausen.com/simple-counters-in-python-with-benchmarks/)，defaultdict、try/except 或您的原始方法是最快的。

我在这里复制（并扩展）了基准：

```
import urllib2
import timeit

response = urllib2.urlopen('http://pastebin.com/raw.php?i=7p3uycAz')
hamlet = response.read().replace('\r\n','\n')
LETTERS = [w for w in hamlet]
WORDS = hamlet.split(' ')
fmt='{:>20}: {:7.4} seconds for {} loops'
n=100
print
t = timeit.Timer(stmt="""
        counter = defaultdict(int)
        for k in LETTERS:
            counter[k] += 1 
        """,
        setup="from collections import defaultdict; from __main__ import LETTERS")

print fmt.format("defaultdict letters",t.timeit(n),n)
t = timeit.Timer(stmt="""
        counter = defaultdict(int)
        for k in WORDS:
            counter[k] += 1 
        """,
        setup="from collections import defaultdict; from __main__ import WORDS")

print fmt.format("defaultdict words",t.timeit(n),n)
print

# setdefault
t = timeit.Timer(stmt="""
        counter = {}
        for k in LETTERS:
            counter[k]=counter.setdefault(k, 0)+1
        """,
        setup="from __main__ import LETTERS")
print fmt.format("setdefault letters",t.timeit(n),n)
t = timeit.Timer(stmt="""
        counter = {}
        for k in WORDS:
            counter[k]=counter.setdefault(k, 0)+1
        """,
        setup="from __main__ import WORDS")
print fmt.format("setdefault words",t.timeit(n),n)
print

# Counter
t = timeit.Timer(stmt="c = Counter(LETTERS)",
        setup="from collections import Counter; from __main__ import LETTERS")

print fmt.format("Counter letters",t.timeit(n),n)
t = timeit.Timer(stmt="c = Counter(WORDS)",
        setup="from collections import Counter; from __main__ import WORDS")
print fmt.format("Counter words",t.timeit(n),n)
print

# in
t = timeit.Timer(stmt="""
        counter = {}
        for k in LETTERS:
            if k in counter: counter[k]+=1
            else: counter[k]=1   
        """,
        setup="from __main__ import LETTERS")
print fmt.format("'in' letters",t.timeit(n),n)
t = timeit.Timer(stmt="""
        counter = {}
        for k in WORDS:
            if k in counter: counter[k]+=1
            else: counter[k]=1   
        """,
        setup="from __main__ import WORDS")
print fmt.format("'in' words",t.timeit(n),n)
print

# try
t = timeit.Timer(stmt="""
        counter = {}
        for k in LETTERS:
            try:
                counter[k]+=1
            except KeyError:
                counter[k]=1     
        """,
        setup="from __main__ import LETTERS")
print fmt.format("try letters",t.timeit(n),n)
t = timeit.Timer(stmt="""
        counter = {}
        for k in WORDS:
            try:
                counter[k]+=1
            except KeyError:
                counter[k]=1             """,
        setup="from __main__ import WORDS")
print fmt.format("try words",t.timeit(n),n)
print "\n{:,} letters and {:,} words".format(len(list(LETTERS)),len(list(WORDS))) 
```

印刷：

```
 defaultdict letters:   3.001 seconds for 100 loops
   defaultdict words:  0.8495 seconds for 100 loops

  setdefault letters:   4.839 seconds for 100 loops
    setdefault words:   0.946 seconds for 100 loops

     Counter letters:   7.335 seconds for 100 loops
       Counter words:   1.298 seconds for 100 loops

        'in' letters:   4.013 seconds for 100 loops
          'in' words:  0.7275 seconds for 100 loops

         try letters:   3.389 seconds for 100 loops
           try words:   1.571 seconds for 100 loops

175,176 letters and 26,630 words 
```

就我个人而言，我很惊讶这`try` `except`是最快的方法之一。谁知道...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-23T20:25:00.050

另一种方法是 try / except 子句：

```
try: 
    filetypecounter[filetype] += 1
except KeyError:
    filetypecounter[filetype] = 1 
```

如果您的文件类型比文件少，则此方法更有效，因为您无需检查是否`filetype`存在 in `filetypecounter`，而是假设是这种情况，并且仅在`filetypecounter`不存在时才创建新条目。

**编辑**：添加`KeyError`以回应@delnan 的评论。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-23T20:25:15.323

我想你需要的只是[计数器](http://docs.python.org/2/library/collections.html#collections.Counter)模块。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-23T20:28:00.633

[collections.Counter](http://docs.python.org/2/library/collections.html?highlight=counter#collections.Counter)类正是您（真正）需要的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-23T20:28:11.710

我想你想要[`defaultdict`](http://docs.python.org/3.3/library/collections.html#collections.defaultdict)：

```
from collections import defaultdict

d = defaultdict(lambda: 0)
d['foo'] += 1
# d['foo'] is now 1 
```

另一个想法是使用`dict.setdefault`：

```
d = {}
d.setdefault('foo', 0)  # won't override if 'foo' is already in d
d['foo'] += 1 
```

# video - 在花哨的盒子里播放 Youtube 视频

> ID：15045213
> 
> 赞同：2
> 
> 时间：2013-02-23T20:21:51.997
> 
> 标签：video, youtube, fancybox

再会

我在以下 URL 创建了脚本：[http ://www.radiocraft.ca](http://www.radiocraft.ca)

在第 634 到 668 行

我做错了，结果当我点击播放按钮时，我没有打开fancybox，而是被发送到Youtube视频的全屏版本。我做错了什么？

谢谢你。

另外，如何使fancybox视频的角以5 pt为半径变圆？

再次感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:20:13.560

你没有`video`方法，我想你想`fancybox`改用

像这样 ：

```
$("#yt").click(function() {
                $.fancybox({
                        'padding'        : 0,
                        'autoScale'      : false,
                        'transitionIn'   : 'elastic',
                        'transitionOut'  : 'elastic',
                        'title'          : this.title,
                        'speedIn'        : 600, 
                        'speedOut'       : 200, 
                        'width'          : 680,
                        'height'         : 495,
                        'href'           : this.href.replace(new RegExp("watch\\?v=", "i"), 'v/'),
                        'type'           : 'swf',
                        'swf'            : {
                            'wmode'              : 'transparent',
                            'allowfullscreen'    : 'true'
                        }
                    });
                return false;
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:35:02.753

只需将这行代码添加到您的代码中：（这是javascript）

```
$(document).ready(function() {
    $(".video").fancybox({
        maxWidth    : 800,
        maxHeight   : 600,
        fitToView   : false,
        width       : '70%',
        height      : '70%',
        autoSize    : false,
        closeClick  : false,
        openEffect  : 'none',
        closeEffect : 'none'
    });
}); 
```

并到您的 html 链接（您有课程视频的地方添加下一个类**fancybox.iframe**）

所以你的 html 链接看起来像：（包括你的 href 图像）

```
<a class="video fancybox.iframe" href="http://www.youtube.com/v/meqnw_DdArE?fs=1&autoplay=1"><img alt="Corvette Video" src="Headphone%20Amplifier%20Corvette%20Video%20Main.jpg" width="587" height="391" class="style40" /></a> 
```

我希望这个 mini-fancybox 教程对你有所帮助；）

# php - ReferenceError：错误＃1069：在字符串上找不到属性并且没有默认值

> ID：15045215
> 
> 赞同：4
> 
> 时间：2013-02-23T20:21:59.080
> 
> 标签：php, string, actionscript-3, flash, url

我正在使用 URLRequest 在 Flash 中加载外部 php 文件。但不幸的是，我收到了这个错误-

```
ReferenceError: Error #1069:Property email not found on String and there is no default value.
    at Main/variablesGot()
    at flash.events::EventDispatcher/dispatchEventFunction()
    at flash.events::EventDispatcher/dispatchEvent()
    at flash.net::URLLoader/onComplete() 
```

这是相关的as3代码

```
phpLoader.addEventListener(Event.COMPLETE, variablesGot);    
private function variablesGot(ev:Event):void

    {
        trace(ev.target.data.toString());  //THIS OUTPUTS CORRECTLY
        //OUTPUT for this trace is as follows
        //athleteName=ankur&email=email@yahoo.com&password=newpass&personalBest=9.58&shirtNumber=10         

        trace(ev.target.data.email.toString()); //LINE WITH ERROR
    } 
```

这是我正在加载的 php 文件中的相关 php 代码

```
print "athleteName=".$_SESSION[athleteName];
print "&email=".$_SESSION[email];
print "&password=".$_SESSION[password];
print "&personalBest=".$_SESSION[personalBest];
print "&shirtNumber=".$_SESSION[shirtNumber];
print "&country=".$_SESSION[country]; 
```

我认为错误可能是由于我在 php 中打印的方式？但我不确定。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T20:30:38.310

默认情况下，`URLLoader`将数据加载为文本，因此`email`在 raw 中不存在`String`。尝试设置：

```
phpLoader.dataFormat = URLLoaderDataFormat.VARIABLES; 
```

# c++ - 多个条件语句

> ID：15045218
> 
> 赞同：2
> 
> 时间：2013-02-23T20:22:24.503
> 
> 标签：c++, c, if-statement

我想知道如何在 C/C++ 中处理多个条件。我有一些运行良好的代码，但我担心这涉及到运气因素，我不想被抓住。考虑：

```
if ( (/*condition1*/) || (/*condition containing invalid reference*/) )
{
    // do something
} 
```

只要“条件 1”为 TRUE，即使条件本身会产生故障，第二个条件似乎也不会产生错误。例如：

```
int main()
{
    char    string1[] = "StackOverflow";
    char    *string2 = 0;

    // (1) This will work because string1 is valid
    if (strlen(string1) != 0)
        printf("%s", string1);

    // (2) This will cause an error
    if (strlen(string2) != 0)
        printf("%s", string2);

    // (3) But this if(OR) works fine
    if ((strlen(string1) != 0)||(strlen(string2) != 0))
        printf("no problem!");

    // (4) And of course this doesn't
    if ((strlen(string2) != 0)||(strlen(string1) != 0))
        printf("I don't believe it!");

    return 0;
} 
```

从 OR 条件列表可以看出，if()“问题”在第一个 TRUE 语句处停止，从左到右阅读，无论后面是什么。但是，将数字 (3) 更改为：

```
if ((strlen(string1) == 0) && (strlen(string2) == 0) 
```

尽管第一个条件为假，但仍然会失败，从而将整个事情呈现为假 - 即问题不会像 OR 示例那样停止。

概括地说，我观察到以下几点：

```
if ( (TRUE) or (INVALID) )   -> no problem

if ( (FALSE) or (INVALID) )  -> error

if ( (TRUE) and (INVALID) )  -> error

if ( (FALSE) and (INVALID) ) -> error    // see the EDIT 
```

这些结果在所有情况下都是通用的，还是依赖于编译器/平台？

我可以按照上述规则编写代码，还是永远不要陷入其中一个条件无效的情况？

我正在为我的老板检查一些旧代码，其中充斥着上面 (3) 之类的示例。将它们全部捕获并调整代码以避免任何无效条件将需要相当长的时间。虽然（3）和（4）可以很容易地调整到一个`if(string2 != 0) { // }`块内，但对于我拥有的代码来说，在实践中并不是那么容易。

编辑：

由于再次检查，`if ( (FALSE) and (INVALID) )`确实运行没有错误。我不知道为什么它之前失败了；如果它最初有效，我什至可能都没有提出这个问题。我会把它归结为巫术和注意力不集中。

最终，虽然已经暗示了答案但没有逐字确认，但似乎这种对短路评估的依赖（感谢维基链接！）是一种合法的技术。我很高兴我不必重新编写任何代码！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T20:35:09.887

是的，这是众所周知的行为，它适用于任何遵循标准的 C/C++ 编译器。正如 Jesse 在他的评论中已经提到的那样，这被称为短路并且经常使用，尤其是指针：

```
void func( int *ptr )
{
   if( ptr && *ptr ) {
      // pointer is valid and integer that it points to is not 0
   }
} 
```

你的最后一句话：

```
if ( (FALSE) and (INVALID) ) -> error 
```

不正确。如果 left 为假，又名 && 将不会评估右操作数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T20:40:50.213

您所说的称为“短路”，它是c ++中的通用功能。它的工作方式是 (TRUE || any) 总是为真，因此一旦知道表达式为真，就不会进一步评估表达式。这同样适用（FALSE && any），因为这总是错误的。

这是如何有用的一个很好的例子：

```
int x = 0;
cin >> x;
if (x != 0 && 10 / x == 2) {
    // ...
} 
```

通过对 x 的检查，如果用户输入 0，则不会出现 10 / 0，从而使您的程序免于除以 0。

您始终可以使用涉及 && 和 || 的表达式来依赖此功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T20:35:09.560

在 C 和 C++ 中，一旦确定结果，它就会停止计算布尔表达式，|| 因此，运算符总是在某些东西返回 true 时立即停止评估，左侧部分优先，&& 在某些东西返回 false 时立即停止。

你可以把任何你想要的东西放在右边，它不会评估。

请记住，您将具有未定义行为的东西用作“无效”表达式，如果它起作用，则无法知道会发生什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T20:28:23.307

```
 if (strlen(string2) != 0)
    printf("%s", string2); 
```

这里`string2`不是字符串，因此`strlen`调用会调用未定义的行为。

```
if ((strlen(string1) != 0)||(strlen(string2) != 0)) 
```

在 C 中，`||`如果运算符的左操作数计算结果为 ，则保证运算符不会计算其右操作数`1`。这里的左操作数`||`计算结果为`1`so `strlen(string2)`，这是未定义的行为，永远不会被调用。

# android - Android p2p0接口有ipv6地址

> ID：15045220
> 
> 赞同：3
> 
> 时间：2013-02-23T20:22:43.620
> 
> 标签：android, networking, p2p, ipv6, ipv4

我下载了 OS Monitor 应用程序来检查所有网络接口。我发现：

在 p2p0 接口上，在任何 ad hoc（wifi 直接）连接之前都有一个默认的 ipv6 地址。该值类似于 wlan0#ipv6 地址，但翻转了一位。然而，ipv4 地址是空的。通过在 Android SDK 中打印出 NetworkInterface 对象确认了相同的行为。

这让我很困惑。我认为对于 wifi direct，在加入任何组之前，不应该分配任何 IP 地址，既不是 ipv6 也不是 ipv4。我在这里错过了什么吗？

欢迎任何评论/建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T22:26:02.420

这是一个链接本地地址。fe80::/64 块是为链接本地地址保留的。

[在这里](http://en.wikipedia.org/wiki/Link-local_address)由维基百科解释。

建立连接后，您应该获得一个公共 IPv6 地址。

# macos - 如何在 osx 中创建“相对路径”别名或符号链接？

> ID：15045222
> 
> 赞同：1
> 
> 时间：2013-02-23T20:22:50.483
> 
> 标签：macos, installation, alias, relative-path, symlink

我需要一个链接。它用于软件交付 DMG 文件。这很简单。但是我不太懂编程。

我需要获取链接到相对路径的**别名**或**符号链接**，如下所示：

/users/USERFOLDER-name/Library/Application Support/Some Folder/some other folder/ etc...

这是怎么做到的？通过某种形式的苹果脚本？有没有办法用脚本或程序来做到这一点？

希望有人可以提供帮助，虽然我不太了解编程...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T20:29:43.580

可以在 Finder 的上下文菜单中创建别名。

（符号）链接可以通过`ln -s <original_path> <alias_path>`.

**编辑**

您必须在 shell 中输入代码。OSX 的标准外壳是`bash`. 您可以通过某些终端程序打开外壳（启动）外壳，通常是`Terminal.app`. `ln`如果您键入 ，您将在那里获得更多信息`man ln`。

# javascript - 保存来自单击处理程序的值并在多个外部 JavaScript 文件中使用

> ID：15045224
> 
> 赞同：0
> 
> 时间：2013-02-23T20:22:55.337
> 
> 标签：javascript, jquery

我已经有一段时间了，我已经尝试了一切（并且由于stackoverflow而学到了很多新东西）。我一直遇到的问题是我似乎无法从我的 citations.js 保存的点击处理程序中获取值，以便我可以在 main.js 中使用它？我尝试过使用带有 set 和 get 的函数，在 click 处理程序中返回 ajax 调用以及其他一些东西，因此非常感谢任何帮助，

我有三个 .js 文件 request.js、citations.js 和 main.js

这是代码，

```
request.js,

function citeAjax(citationId) {
return $.ajax({
              type: 'GET',
              url: 'https://www.sciencebase.gov/catalog/itemLink/' + citationId +    
'?format=jsonp',
              jsonpCallback: 'getSBJSON',
              contentType: "application/json",
              dataType: 'jsonp'             
         });
}

var promise = citeAjax(citationId);

citations.js,

promise.done(function (json) {
                 var linkBase = "http://www.sciencebase.gov/catalog/item/";
                 var link = "";                     
                 var itemId = "";                    
                 var urlId = "";

                 $.each(json.items, function(i,item) {
                     link = linkBase + this.id;

                     $('#sbItems').append('<li><b><a href="' + link + '" id="idNum' + 
i + ' ">' + this.title + '</a> - </b>' + this.summary + '</li>');                    
                 });

                 $('#sbItems a').click(function () {                        
                     var str = $(this).attr('id');                         
                     if (str.length == 7) {                      
                          itemId = str.slice(5,6);
                     } else if (str.length == 8) {
                          itemId = str.slice(5,7);
                     }
                 **// I want to get (json.items[itemId].id) which is any id from the   
link that is clicked and then store it in citeAjax()**  

                 }); // END Click event    

}).fail(function() {
    alert("Ajax call failed!");
}); 
```

主.js，

我想用

```
promise.done(function (json) {
   // do something with the ajax request from any id that's inserted into the url
}); 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:08:09.193

```
 var itemId = ''; //store globally in first loaded file
function citeAjax(citationId) {
//do something with citationid in here or your ajax call
 return $.ajax({
          type: 'GET',
          url: 'https://www.sciencebase.gov/catalog/itemLink/' + citationId +    
'?format=jsonp',
          jsonpCallback: 'getSBJSON',
          contentType: "application/json",
          dataType: 'jsonp'             
     });
}
$('#sbItems a').live('click' function () {                        
                 var str = $(this).attr('id');                         
                 if (str.length == 7) {                      
                      itemId = str.slice(5,6);
                 } else if (str.length == 8) {
                      itemId = str.slice(5,7);
                 }
})

 //call again 
citeAjax(itemID) // itemID should be updated 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T20:56:01.997

第一，我建议再次将您的应用程序视图与应用程序模型混合。

如果您希望在 citation.js 中获取数据，首先使用 $.data() 将 ajax 数据绑定到您的视图，例如，绑定到 $('#sbItem')

然后从那里读到 citation.js

# php - 将变量连接到逗号分隔列表时删除不必要的逗号？

> ID：15045226
> 
> 赞同：0
> 
> 时间：2013-02-23T20:23:21.830
> 
> 标签：php, variables, concatenation, comma

当我连接 PHP 变量以形成一个逗号分隔的列表时，它会添加一个逗号，无论该变量是否具有值。

将变量连接到逗号分隔列表时如何删除不必要的逗号？

```
try {
    $stmt = $conn->prepare("SELECT * FROM customer_info WHERE user_id = :user_id");
    $stmt->bindValue(':user_id', $user_id);
    $stmt->execute();
}
catch (PDOException $e) {
    echo $e->getMessage();
}
$search = array('_', ',', 'Null');
$replace = array(' ', ', ', '');
$rows = str_replace($search, $replace, $row);

$merged_likes = $rows['items_like'] . ",  " . $rows['first_like'] . ",  " . $rows['second_like'] . ",  " . $rows['third_like'];
echo $merged_likes; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T21:29:18.660

请参阅[我对您其他问题的回答](https://stackoverflow.com/a/15045882/1411510)。将项目放入数组后，只需用 . 过滤掉任何空白的内容[`array_filter()`](http://php.net/array_filter)。例子：

```
$likes = array_filter($likes, function($item)
{
    return !empty($item);
});

echo implode(', ', $likes); 
```

此语法仅适用于 PHP >=5.3.0。有关详细信息，请参阅[匿名函数](http://php.net/manual/en/functions.anonymous.php)。

### 编辑

正如 KingCrunch 在下面提到的，如果所有空白项的[计算结果为`false`](http://php.net/manual/en/language.types.boolean.php#language.types.boolean.casting)（例如，一个空字符串），您可以简单地省略回调函数：

```
$likes = array_filter($likes);
echo implode(', ', $likes);

// or more succinctly

echo implode(', ', array_filter($likes)); 
```

# java - 在 Java 7 中绘制矢量图

> ID：15045228
> 
> 赞同：1
> 
> 时间：2013-02-23T20:23:27.757
> 
> 标签：java, swing, jpanel, vector-graphics

我正在尝试在 Swing/JPanel 中创建一些代码，该代码采用一些（可变）变量并绘制如下图：

![图片](../Images/8503c6bf8f6e1492ba061c7b29b42cb0.png)

我不知道从哪里开始。这个想法是在六边形上会有一个关键点，每个变量一个，每个点之间会画一条线，然后自定义形状内部的空间会被遮蔽。有什么想法吗？

代码原型

```
import java.awt.*;
import javax.swing.*;

public class DrawPolygon extends JPanel {

int xOffset = 0;
int yOffset = 0;
int sizeModifer = 50;
int numOfPoints = 8;
int linePosition = 80;
double sizeMultiplier = 1;

@Override
public void paintComponent(Graphics g) {
    super.paintComponent(g);

    Polygon[] polygons = new Polygon[5];
    for (int i = 0; i < polygons.length; i++){
        polygons[i] = new Polygon();
        for (int q = 0; q < numOfPoints; q++) {
            polygons[i].addPoint(
                xOffset + (int) (linePosition + (sizeModifer*sizeMultiplier)
                * Math.cos(q * 2 * Math.PI / numOfPoints)),
                yOffset + (int) ((linePosition - 10) + (sizeModifer*sizeMultiplier)
                * Math.sin(q * 2 * Math.PI / numOfPoints)));
        }//built points
        sizeMultiplier = sizeMultiplier - 0.2;
    }//build polygon arrays

    Polygon innerPolygon = new Polygon();
    for (int i = 0; i < numOfPoints; i++) {
        int randomRange = 5 + (int) (Math.random() * ((sizeModifer - 5) + 1));
        innerPolygon.addPoint(
            xOffset + (int) (linePosition + randomRange
            * Math.cos(i * 2 * Math.PI / numOfPoints)),
            yOffset + (int) ((linePosition - 10) + randomRange
            * Math.sin(i * 2 * Math.PI / numOfPoints)));
    }
    Graphics2D g2d = (Graphics2D) g;
    g2d.setRenderingHint(
        RenderingHints.KEY_ANTIALIASING,
        RenderingHints.VALUE_ANTIALIAS_ON);
    g2d.setStroke(new BasicStroke(1));

    for (int i = 0; i < polygons.length; i++){
        g2d.setColor(Color.green);
        g2d.fill(polygons[i]);
        g2d.setColor(Color.black);
        g2d.draw(polygons[i]);
    }//draw polygons from arrays

    double distanceModifier = 1;
    for (int i = 0; i < numOfPoints; i++) {
        g2d.drawString("test"+(i+1),
            xOffset + (int) (linePosition + (sizeModifer*distanceModifier)
            * Math.cos(i * 2 * Math.PI / numOfPoints)),
            yOffset + (int) ((linePosition - 10) + (sizeModifer*distanceModifier)
            * Math.sin(i * 2 * Math.PI / numOfPoints)));
        distanceModifier = distanceModifier +.01;
    }

    g2d.setColor(new Color(255,213,200,90));
    g2d.fill(innerPolygon);
    g2d.setColor(Color.red);
    g2d.draw(innerPolygon);
}

@Override
public Dimension getPreferredSize() {
    // TODO calculate size based on geometry
    return new Dimension(160, 160);
}

public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            JFrame frame = new JFrame();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setTitle("Show Different Polygons");
            frame.add(new DrawPolygon());
            frame.pack();
            frame.setLocationByPlatform(true);
            frame.setVisible(true);
        }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T03:24:22.567

[`JFreeChart`](http://www.jfree.org/jfreechart/)包括一个[`SpiderWebPlot`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/plot/SpiderWebPlot.html)，在“*杂项*”下的[演示中显示，并在](http://www.jfree.org/jfreechart/samples.html)[此处](http://www.jfree.org/phpBB2/viewtopic.php?f=3&t=28485) 讨论。虽然包含五个类别，但您的图像似乎包含六个。*`SpiderWebChartDemo1`*

 *![图片](../Images/a96656be9325de7c2ef647f77586346e.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T21:04:53.720

当然。我确信已经有 Java 库可以做到这一点。例如，[Sonar](http://www.sonarsource.org)显示了与此类似的图表。通常最好使用其他人的组件，而不是尽可能编写自己的组件。通常我会使用 JFreeChart，但它看起来没有这样的组件。

如果你想自己写，你只需要对网络上每个点的位置做一些简单的计算。从中心开始，您将首先在 0 度处绘制一条线。然后每条后续的径向线将旋转`2*pi/n`弧度。您可以应用一些简单的三角函数从每个六边形的角度和半径中计算出笛卡尔 (x, y) 坐标。最后，您将覆盖填充区域。所以算法可能是这样的。在下面的伪代码中，参数`values`是一个小正整数列表，表示多边形上的每个点，作为距图表中心的偏移量。因此，对于六边形，您将在此列表中有六个值。

```
function drawGraph(values):

    steps = maximum value from values
    lines = number of values

    webWidth = min(width, height)
    centerX = width / 2
    centerY = height / 2

    // Draw lines

    for radialLineNumber in 0..lines:
        angle = radialLineNumber * 2 * pi / lines;
        draw line from (centerX, centerY) to (centerX + cos(angle)*webWidth, centerY + sin(angle) * webWidth))
        edgePolygon = blank polygon
        for edgeNumber in 1..steps:
            x = centerX + cos(angle) * webWidth * edgeNumber / steps
            y = centerY + sin(angle) * webWidth * edgeNumber / steps
            add (x, y) to edgePolygon
        stroke polygon edgePolygon

    // Draw polygon

    areaPolygon = blank polygon
    radialLineNumber = 0
    for value in values:
        angle = radialLineNumber * 2 * pi / lines;
        x = centerX + cos(angle) * value * webWidth / steps
        y = centerY + sin(angle) * value * webWidth / steps
        add (x, y) to areaPolygon
    fill polygon areaPolygon 
```

我将把这个伪代码翻译成真正的`JComponent`. 我使用的所有功能都是 on[`Math`](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html)或[`Graphics2D`](http://docs.oracle.com/javase/6/docs/api/java/awt/class-use/Graphics2D.html). 您可能需要在绘制区域多边形之前设置它的不透明度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-24T14:55:34.483

关于您的示例的一些说明：

*   使用 的功能`Graphics2D`来呈现您的`Polygon`，实现`Shape`.

*   覆盖，如[这里](https://stackoverflow.com/q/7229226/230513)`getPreferredSize()`所讨论的。

*   Swing GUI 对象应该*只*在[事件分派线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)上构建和操作。

![图片](../Images/a65b3dd7cc375672d0e77aa576d384ff.png)

```
import java.awt.*;
import javax.swing.*;

public class DrawPolygon extends JPanel {

    int xOffset = 0;
    int yOffset = 0;
    int sizeModifer = 50;
    int numOfPoints = 8;
    int linePosition = 80;

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Polygon outerPolygon = new Polygon();
        for (int i = 0; i < numOfPoints; i++) {
            outerPolygon.addPoint(
                xOffset + (int) (linePosition + sizeModifer
                * Math.cos(i * 2 * Math.PI / numOfPoints)),
                yOffset + (int) ((linePosition - 10) + sizeModifer
                * Math.sin(i * 2 * Math.PI / numOfPoints)));
        }
        Graphics2D g2d = (Graphics2D) g;
        g2d.setRenderingHint(
            RenderingHints.KEY_ANTIALIASING,
            RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.setColor(Color.cyan);
        g2d.fill(outerPolygon);
        g2d.setStroke(new BasicStroke(2));
        g2d.setColor(Color.red);
        g2d.draw(outerPolygon);
    }

    @Override
    public Dimension getPreferredSize() {
        // TODO calculate size based on geometry
        return new Dimension(160, 160);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setTitle("Show Different Polygons");
                frame.add(new DrawPolygon());
                frame.pack();
                frame.setLocationByPlatform(true);
                frame.setVisible(true);
            }
        });
    }
} 
```

附录：根据评论，本次修订恢复了原版`innerPolygon`。

```
import java.awt.*;
import javax.swing.*;

public class DrawPolygon extends JPanel {

    int xOffset = 0;
    int yOffset = 0;
    int sizeModifer = 50;
    int numOfPoints = 8;
    int linePosition = 80;

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Polygon outerPolygon = new Polygon();
        for (int i = 0; i < numOfPoints; i++) {
            outerPolygon.addPoint(
                xOffset + (int) (linePosition + sizeModifer
                * Math.cos(i * 2 * Math.PI / numOfPoints)),
                yOffset + (int) ((linePosition - 10) + sizeModifer
                * Math.sin(i * 2 * Math.PI / numOfPoints)));
        }
        Polygon innerPolygon = new Polygon();
        for (int i = 0; i < numOfPoints; i++) {
            int randomRange = 5 + (int) (Math.random() * ((sizeModifer - 5) + 1));
            innerPolygon.addPoint(
                xOffset + (int) (linePosition + randomRange
                * Math.cos(i * 2 * Math.PI / numOfPoints)),
                yOffset + (int) ((linePosition - 10) + randomRange
                * Math.sin(i * 2 * Math.PI / numOfPoints)));
        }
        Graphics2D g2d = (Graphics2D) g;
        g2d.setRenderingHint(
            RenderingHints.KEY_ANTIALIASING,
            RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.setStroke(new BasicStroke(2));
        g2d.setColor(Color.cyan);
        g2d.fill(outerPolygon);
        g2d.setColor(Color.red);
        g2d.draw(outerPolygon);
        g2d.setColor(Color.blue);
        g2d.fill(innerPolygon);
        g2d.setColor(Color.red);
        g2d.draw(innerPolygon);
    }

    @Override
    public Dimension getPreferredSize() {
        // TODO calculate size based on geometry
        return new Dimension(160, 160);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setTitle("Show Different Polygons");
                frame.add(new DrawPolygon());
                frame.pack();
                frame.setLocationByPlatform(true);
                frame.setVisible(true);
            }
        });
    }
} 
```*

# php - 正则表达式，当有 2 个字符相同时不替换？

> ID：15045229
> 
> 赞同：0
> 
> 时间：2013-02-23T20:23:29.353
> 
> 标签：php, regex

我需要能够替换`*hello*`为`somethinghellosomething`. 我可以用 regex 做到这一点`#\*(.*?)\*#`。问题是，我想忽略任何带有`**hello**`. 我已经尝试过`#\*([^\s].*?)\*#`，它在哪里工作，但返回`*somethinghellosomething*`，而不仅仅是`**hello**`. 我需要在我的表达式中添加什么，以确保它不会替换任何`**`封装的字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T20:31:19.813

您可以尝试[环视断言](http://www.regular-expressions.info/lookaround.html)以仅在没有在另一个之前或之后进行匹配`*`。

```
(?<!\*)\*([^*]+)\*(?!\*) 
```

另外，请注意，我将您的更改`.*?`为`[^*]+`. 否则，它可以匹配两个连续的星号，因为`.*?`可以匹配*nothing*。

示例：[http ://regexr.com?33sp0](http://regexr.com?33sp0)

* * *

一块一块的，是这样的：

```
(?<!\*)    # not preceded by an asterisk
\*         # an asterisk
([^*]+)    # at least one non-asterisk character
\*         # an asterisk
(?!\*)     # not followed by an asterisk 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T20:43:55.783

试试这个

```
 #(\*+)(.*?)(\*+)# 
```

示例代码

```
 $notecomments=" **hello**  *hello*   ***hello*** ****hello**** ";
 $output=preg_replace_callback(array("#(\*+)(.*?)(\*+)#"),function($matches){
if($matches[1]=="*")
  return 'something'.$matches[2].'something';
else
  return $matches[0];

},' '.$notecomments.' '); 
```

输出：

```
 **hello** somethinghellosomething ***hello*** ****hello**** 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T20:49:58.537

```
$text = '**something**   **another**  *hello*';
function myfunc($matches)
{
 if($matches[0][0] == '*' && $matches[0][1] == '*'){
  return $matches[0];
 }else{
  return str_replace('*', 'something', $matches[0]);
 }
}
echo preg_replace_callback("/(\*){1,2}([^*]+)(\*){1,2}/","myfunc", $text); 
```

# windows - 在 Windows 8 应用程序中使用带有 POSIX 的“C”库

> ID：15045230
> 
> 赞同：1
> 
> 时间：2013-02-23T20:23:34.333
> 
> 标签：windows, visual-studio-2010, windows-phone-7, windows-8

我是 Windows 编程的绝对新手。我正在编写一些将使用“C”库的应用程序（也将包括一些 POSIX API）。这个库也将由我编写。

至于可移植性问题，我想我可以设法将这个库用于 iOS、Android 和 Linux 平台，但是当我想将它移植到 Windows 时，我不确定它会如何工作。有人可以解释一下吗？

基本上我需要一个可以编译我的库的编译器，基本上我需要适用于 Windows 的 GCC（不确定我可以使用什么——MinGW 被排除在外，因为他们说不支持 POSIX）。我不知道它是否可以在 Visual Studio 2012 上完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:46:19.670

这似乎是一个可以用明确的“是的，但是……”来回答的问题；）当您说“POSIX”时，您指的是哪个功能集？

特别是与文件相关的功能被沙箱严重降低了有用性。例如 fopen 只能处理你的 app bundle 或 localStorage 中的文件。

其他的，如 strncasecmp 可以使用#define 在 Win8 上编译，因为还有其他具有相同签名的函数可用 (_strnicmp)。对于另一组函数 (strcpy)，Microsoft 提供了增强版本 (strcpy_s)，它们的工作方式略有不同。不过，您仍然可以使用旧版本，方法是使用#define 禁用安全变体。

最后，您可能需要在您的库代码中混合使用#ifdef-encapsulated 部分，并且可能需要一些包装器以像 W8 应用程序中所预期的那样以良好的异步方式包装同步代码。

# scala - 类型不匹配：对象中引用的类型与对象扩展的特征中定义的类型不同？

> ID：15045232
> 
> 赞同：0
> 
> 时间：2013-02-23T20:23:41.533
> 
> 标签：scala

对象`O`扩展了`T1`具有已定义类型的特征`C`。

在`T1`我想操作`stack`object 中定义的静态数据结构`O`。但是编译器一直在抱怨

> 找到 T1.this.C 的类型不匹配，需要 OC

代码如下：

```
trait T1 {

 case class C(i: Int, s: String)
  def dumbAdd(i: Int, s: String) = {
    O.stack.push(C(i, s))  // type mismatch error goes here.
  }
}

object O extends T1 {

  var stack: Stack[C] = new Stack[C]

} 
```

我很困惑...不`O`知道`C`并且应该与中的类型相同`T1`？我在这里想念什么？我该怎么做？

*更新*

根据一个建议放入`C`object `T1`，但在我的真实示例中，对象`T1`无法访问 trait 中定义的类型`T1`。减少的问题如下：

```
trait T1 {

  abstract sealed class S

  case class SC extends S

  def dumbAdd(i: Int, s: String) = {
    O.stack.push(C(i, s))
  }
}

object T1 {

  case class C(i: Int, s: String)

  def tryASC {
    val scc = SC() // Here the compiler says not found value SC
  }
}

object O extends T1 {

  var stack: Stack[C] = new Stack[C]

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T20:40:23.510

嵌套类属于其父类的一个*实例*。也就是`x`和`y`下面的类型不同：

```
val a = new T1 {}
val b = new T2 {}
val x = new a.C(0, "")
val y = new b.C(0, "") 
```

is的类型`x`，字面意思是 ，`a.C`的类型`y`是`b.C`。

您的代码中的问题是您所指的是`C`没有指定属于哪个实例的实例，`C`最终结果是它们都被假定来自不同的实例。

嵌套类很有用，但由于其非常严格的语义而难以使用。

# html - WebKit 浏览器中不同的列表样式类型的图像填充

> ID：15045233
> 
> 赞同：0
> 
> 时间：2013-02-23T20:23:41.937
> 
> 标签：html, css, list

我正在尝试将 css 列表样式类型的图像与父边框对齐。

不幸的是，即使在非常老的 IE 浏览器、Firefox 和 Opera 中它也能很好地工作，但在 WebKit 浏览器（Chrome/Safari）中确实很混乱。

任何想法是什么导致它，以及使用背景图像以外的任何解决方法？这不是 reset.css 的事情，尝试了一些不同的重置，但似乎没有任何解决办法。

**图片**

![例子](../Images/13e868a5bdd2aab02ca3a429d8b526d2.png)

**JSFiddle**

[http://jsfiddle.net/zzUdk/](http://jsfiddle.net/zzUdk/)

**来源**

HTML

```
<ul>
  <li><a href="#">Link Title</a></li>
  <li><a href="#">Link Title</a></li>
  <li><a href="#">Link Title</a></li>
  <li><a href="#">Link Title</a></li>
  <li><a href="#">Link Title</a></li>
  <li><a href="#">Link Title</a></li>
</ul> 
```

CSS

```
ul {
    margin: 2em;
    border-left: solid 3px #999;
}

ul li {
    position: relative;
    left: 0.6em;
    list-style-type: disc;
} 
```

（顺便说一句，Opera 用户，你能从 JSFiddle 复制代码吗？因为我现在有好几个星期都不能了？:()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T20:34:09.610

如果您使用：

```
list-style-position: inside 
```

您将把回合放在 li 元素内，但正好在它的开始处。然后你可以把它移动到你想要的地方，但我认为现在没问题。

[http://jsfiddle.net/zzUdk/2/](http://jsfiddle.net/zzUdk/2/)

PS：如果您将这种行为中继到浏览器，您可能会遇到问题。我建议您放置自己的列表图标，结果会更好且一致。

# objective-c - 设置视图控制器故事板 ID 不起作用

> ID：15045236
> 
> 赞同：2
> 
> 时间：2013-02-23T20:23:54.367
> 
> 标签：objective-c, xcode

我有这段代码可以转换到另一个视图控制器（我想以编程方式执行此操作，因为该应用程序有许多彼此连接的视图控制器）：

```
UIViewController *homeViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"HomeViewController"];
[self presentViewController:homeViewController animated:0 completion:nil]; 
```

我还在情节提要文件`Storyboard ID`中将 viewController设置为`HomeViewController`。

当我运行它时，我收到错误：`'Storyboard (<UIStoryboard: 0x712af50>) doesn't contain a view controller with identifier 'HomeViewController''`

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T09:58:06.293

我有同样的问题。我只是清理项目并从我的模拟器或手机中删除应用程序并再次运行它。有效。

# java - 如何使用 Intent 制作视频？

> ID：15045237
> 
> 赞同：2
> 
> 时间：2013-02-23T20:24:02.687
> 
> 标签：java, android

使用 Intent 开始视频录制的代码如下：

```
startActivityForResult(new Intent(MediaStore.ACTION_VIDEO_CAPTURE), 100); 
```

但是有一些问题：它在我的设备上运行良好，即我录制了一些视频，然后单击标准录像机中的“完成”按钮，一切都很好。但是如果用户使用低于 4.0 的 Android 设备，他的设备可能没有“完成”按钮，因此用户可以录制，但无法保存这个新视频，并且我的 onActivityResult() 方法在 Intent 的数据字段中为空。请告诉我，是否有任何通用方法可以启动 Intent 以使用 Intent 录制视频？

# php - 在 home.tpl 上列出制造商

> ID：15045240
> 
> 赞同：0
> 
> 时间：2013-02-23T20:24:16.617
> 
> 标签：php, opencart

在我的主页中，我只使用以下方式检索类别列表：

```
$results = $this->model_catalog_category->getCategories(); 
```

使用相同的逻辑来检索制造商列表：

```
$results = $this->model_catalog_manufacturer->getManufacturers(); 
```

但是这次我得到一个错误：

> 致命错误：在 C:\wamp\www\ecommerce\catalog\view\theme\pinshop\template\common\home.tpl 中的非对象上调用成员函数 getManufacturers()

所以我猜在 home.tpl`model_catalog_manufacturer`中没有定义 contant，对吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:25:53.273

您需要先加载制造商模型，然后才能使用该方法

```
$this->load->model('catalog/manufacturer'); 
```

一旦你在`$results = ...`上面的行之前添加它，它就会起作用

# java - Java线程 - 工作线程更改其老板的哈希图

> ID：15045243
> 
> 赞同：1
> 
> 时间：2013-02-23T20:24:41.127
> 
> 标签：java, multithreading, sockets

我有一个监听请求的类（服务器），一旦发出请求，就会启动一个新线程来处理它。处理程序线程将读取数据，将其存储到哈希图中并完成。我已将哈希图放在服务器类中，因为可以有多个处理程序线程在数据进入时读取数据。

我很困惑这是否是正确的方法，因为为了更改/访问哈希图，我必须编写 getter 和 setter 并将 Server 类传递给每个工作线程。一些示例代码来尝试描述我的查询：

```
public class Server implements Runnable {
        private HashMap<String, Integer> data;

    public void run() {
       while(true) {
            Socket s = serverSocket.accept();
            Handler h = new Handler(s);
            Thread t = new Thread(h);
            t.start();
       }
   }
}

public class Handler implements Runnable {

    public void run() {
        //read in data from socket
        data.put(d); //access the hashmap and insert data in
    } 

} 
```

任何建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T20:28:49.593

您的方法很好，但您应该使用[`ConcurrentMap`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentMap.html), 或`synchronize`在地图上。第一种方法更好，因为同步集合[经过优化，以便尽可能避免阻塞](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html)。

# php - php在字符串中的高级搜索

> ID：15045244
> 
> 赞同：0
> 
> 时间：2013-02-23T20:24:57.543
> 
> 标签：php, string, search

我是 php 的新手，也许以前有人问过这个问题，但我不知道具体要搜索什么，这就是问题所在

如果我有一个像这样的字符串

```
 $adam = "this is a very long long string in here and has a lot of words"; 
```

我想在这个字符串中搜索单词“long”和单词“here”的第一次出现

然后选择它们之间的所有内容，并将其存储在一个新字符串中

所以结果应该是

```
 $new_string = "long long string in here" 
```

顺便说一句，我不知道字符串的长度和内容，我所知道的是它有“长”和“这里”这个词，我想要它们之间的词..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:33:09.997

使用这些功能来做到这一点：

*   [strpos()](http://php.net/manual/en/function.strpos.php) - 用它来搜索字符串中的单词
*   [substr()](http://php.net/manual/en/function.substr.php) - 用它来“剪切”你的字符串
*   [strlen()](http://php.net/manual/en/function.strlen.php) - 使用它来获取字符串长度

找到*'long'*和*'word' 的*位置，并使用`substr`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T20:39:52.817

简单`strpos`，，`substr`就`strlen`可以了

您的代码可能如下所示

```
$adam = "this is a very long long string in here and has a lot of words";
$word1="long";
$word2="here";

$first = strpos($adam, $word1);
$second = strpos($adam, $word2);

if ($first < $second) {
    $result = substr($adam, $first, $second + strlen($word2) - $first);
}

echo $result; 
```

这是一个[工作示例](http://codepad.viper-7.com/d93l0N)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T20:37:25.173

这是您的脚本，可以复制粘贴了；）

```
$begin=stripos($adam,"long");  //find the 1st position of the word "long"
$end=strripos($adam,"here")+4; //find the last position of the word "here" + 4 caraters of "here"
$length=$end-$begin;
$your_string=substr($adam,$begin,$length); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T20:44:38.773

这是使用正则表达式的一种方法：

```
$string = "this is a very long long string in here and has a lot of words";
$first = "long";
$last = "here";

$matches = array();

preg_match('%'.preg_quote($first).'.+'.preg_quote($last).'%', $string, $matches);
print $matches[0]; 
```

# javascript - 需要 javascript 根据下拉选择在表单上显示特定的评论框

> ID：15045251
> 
> 赞同：0
> 
> 时间：2013-02-23T20:25:24.670
> 
> 标签：javascript, forms, drop-down-menu, comments

我试图弄清楚如何根据下拉菜单显示特定的评论框。我想要一个带有选项为 0-10 的下拉框的表单。

如果选择了 0-9 之间的任何数字，则应显示带有评论框的单个问题（相同的问题/框，无论是 0、1、2、3、4、5、6、7、8 还是 9）。

如果选择 10，则会显示不同的问题和评论框。

我知道有一种干净/优雅的方法可以在一个“组”中定义 0-9，它显示一个框并隐藏它，如果显示 10，则显示另一个框，但我似乎无法理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T20:36:23.013

将问题 0-9 放在一个 div 中，将问题 10 放在另一个 div 中并隐藏两者。将下拉列表的 onselect 事件链接到您的脚本。在脚本内部，从下拉列表中抓取所选项目，如果它在 0-9 之间，则使第一个 div 可见，或者如果它是 10，则使第二个 div 可见。

# xml - xsd 模式应用到 xml 文档？

> ID：15045253
> 
> 赞同：3
> 
> 时间：2013-02-23T20:25:34.417
> 
> 标签：xml, xslt, mapping, quickbase

我正在尝试将数据从 quickbase 数据库传输到另一个应用程序。我有接收应用程序将接受的 .xsd 架构，并且能够从 quickbase 导出平面 .xml 文件。Quickbase 提供了将 .xsl 样式表应用到 .xml 导出的能力，我假设它能够将架构格式应用于导出。.xsd 中的元素名称和 .xml 导出中的元素名称匹配，因为使用接收应用程序的架构元素设计的 quickbase 字段。

我遇到的问题是我不知道如何创建所需的 .xsl。如果您有一个包含正确数据元素和所需 .xsd 的 .xml，是否有（免费）工具可以生成 xsl？如果是这样，你会推荐什么？如果没有，任何关于前进道路的建议将不胜感激。

我目前正在使用带有 webtools xml 插件的 Eclipse EE。

免责声明-这是我关于stackoverflow（或任何论坛）的第一个问题，所以如果我完全不在基地，请耐心等待......我是菜鸟。

提前致谢，

吉米

# mono - MonoDevelop 命令行调试器

> ID：15045254
> 
> 赞同：1
> 
> 时间：2013-02-23T20:25:39.113
> 
> 标签：mono, monodevelop, unity3d

Monodevelop 的命令行调试器在哪里？我正在使用单声道版本 2.10 的统一版本（3.5）？我正在使用 OSX

我试图找到这里谈到的 mdb：[http ://www.mono-project.com/Guide:Debugger](http://www.mono-project.com/Guide:Debugger)

我在这里没有看到它/Applications/Unity/MonoDevelop.app/Contents/MacOS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:34:27.703

mdb 调试器已死，不再开发。它甚至可能不适用于您的 Mono 版本。

目前唯一的 Mono 调试器是 MonoDevelop 中内置的调试器。

# iphone - 分发模式下的空视图控制器

> ID：15045260
> 
> 赞同：0
> 
> 时间：2013-02-23T20:26:01.857
> 
> 标签：iphone, ios, objective-c, uiviewcontroller, uinavigationcontroller

我有一个视图控制器，可以很好地显示并且在模拟器中运行良好，同时在各种设备上进行调试（不同代的 ipad 和 iphone - 仅限 iPhone 应用程序）

但是当从商店下载时，这个视图仍然是空的。当 IPA 边界是为 beta 测试者制作时，它也仍然是空的。

视图控制器被弹出、显示和动画。出现导航栏，我可以导航回调用视图控制器。小应用程序的所有其他视图控制器都可以很好地工作。

知道这里可能有什么问题吗？

我不知道这是否允许，但如果允许，我可以为任何想测试它的人提供商店的链接。这是一个免费的应用程序。

这可能是一些非常愚蠢的事情，因为这是我前一段时间的第一个应用程序。但是，它曾经可以正常工作（afaik）。

更新：当从商店或 AdHoc 绑定安装时，视图将按照 XIB 文件中的定义显示。在那个文件中它是空的。在模拟器或设备上安装调试时，我确实看到了两个以编程方式生成的控件。他们甚至可以正常工作。这是创建代码：

```
#define kSegmentedControlHeight 40.0
#define kLabelHeight            20.0
#define kLeftMargin             20.0
#define kTopMargin              20.0
#define kRightMargin            20.0
#define kTweenMargin            10.0

- (void)createControls
{
    NSArray *segmentBlendeTextContent = [NSArray arrayWithObjects: @"ganz", @"halb", @"drittel", nil];
    NSArray *segmentISOTextContent = [NSArray arrayWithObjects: @"ISO", @"ASA", @"DIN", @"GOST", nil];

    CGFloat yPlacement;
    CGRect frame;

    // label
    yPlacement += (kTweenMargin * 2.0) + kSegmentedControlHeight;
    frame = CGRectMake( kLeftMargin,
                       yPlacement,
                       self.view.bounds.size.width - (kRightMargin * 2.0),
                       kLabelHeight);
    [self.view addSubview:[SettingsViewController labelWithFrame:frame title:@"Blendstufen:"]];

    fStopSegmentedControl = [[UISegmentedControl alloc] initWithItems:segmentBlendeTextContent];
    yPlacement += kTweenMargin + kLabelHeight;
    frame = CGRectMake( kLeftMargin,
                       yPlacement,
                       self.view.bounds.size.width - (kRightMargin * 2.0),
                       kSegmentedControlHeight);
    fStopSegmentedControl.frame = frame;
    fStopSegmentedControl.tintColor = theGlobals.inBarColor;
    [fStopSegmentedControl addTarget:self action:@selector(fStopSegmentAction:) forControlEvents:UIControlEventValueChanged];
    fStopSegmentedControl.segmentedControlStyle = UISegmentedControlStyleBar;
    // Hier wird der Default gesetzt !!!
    fStopSegmentedControl.selectedSegmentIndex = 1;

    [self.view addSubview:fStopSegmentedControl];

    //Setze Control für Blendestufen-Wert
    [fStopSegmentedControl setEnabled:YES forSegmentAtIndex:theGlobals.fStopSetting.integerValue - 1];   

    // label
    yPlacement += (kTweenMargin * 2.0) + kSegmentedControlHeight;
    frame = CGRectMake( kLeftMargin,
                       yPlacement,
                       self.view.bounds.size.width - (kRightMargin * 2.0),
                       kLabelHeight);
    [self.view addSubview:[SettingsViewController labelWithFrame:frame title:@"Normensystem Film/Sensor:"]];

    yPlacement += kTweenMargin + kLabelHeight;
    isoSegmentedControl = [[UISegmentedControl alloc] initWithItems:segmentISOTextContent];
    frame = CGRectMake( kLeftMargin,
                       yPlacement,
                       self.view.bounds.size.width - (kRightMargin * 2.0),
                       kSegmentedControlHeight);
    isoSegmentedControl.frame = frame;
//  isoSegmentedControl.tintColor = [UIColor blackColor];
    isoSegmentedControl.tintColor = theGlobals.inBarColor;
    [isoSegmentedControl addTarget:self action:@selector(isoSegmentAction:) forControlEvents:UIControlEventValueChanged];
    isoSegmentedControl.segmentedControlStyle = UISegmentedControlStyleBar;

    // Setze Wert für Blendstufen
    isoSegmentedControl.selectedSegmentIndex = theGlobals.isoSetting.integerValue - 1;

    [self.view addSubview:isoSegmentedControl];

    //Setze Control für ISO-Wert
    [isoSegmentedControl setEnabled:YES forSegmentAtIndex:theGlobals.isoSetting.integerValue - 1];   // 1 noch in Variable ändern !!!

}

- (void)viewDidLoad
{   
    [super viewDidLoad];

    self.title = @"Einstellungen";

//  self.view.backgroundColor = [UIColor grayColor];    
    self.view.backgroundColor = [UIColor colorWithRed:32.0/255.0 green:32.0/255.0 blue:32.0/255.0 alpha:1.0];   

    [self createControls];  // create the showcase of controls
} 
```

更新 2：不同之处在于构建配置。当我在本地构建“运行”但使用“分发”配置而不是“开发”配置时，我在设备上观察到相同的行为：空白视图控制器。但是在模拟器上，我确实看到了控件，只是放错了位置。所以目前我猜这些控件也是设备视图的一部分，但显示在屏幕底线下方。

更新 3：越来越近...归结为浮动 yPlacement。在发布模式下，调试器无法显示其内容。在显示变量但未解析的调试器窗口中提到了它。打印其说明时，我得到：

```
Printing description of yPlacement:
(CGFloat) yPlacement = <variable not available> 
```

所以最后它似乎归结为一些编译器错误以及可能为调试（-O0）而不是为发布/分发（-Os）设置的优化标志。或者它只是由于在发布和分发版本中删除了调试符号这一事实引起的。但是，我可以正确看到框架变量。显然，通过 yPlacement 输入的值是不同的。

更新 5：找到解决方案。问题已修复。我会做一些进一步的测试，如果我在这里，我会发布一个答案。顺便说一句 - 它在代码中。你可以看到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:25:09.560

太明显了，看不出来。

```
CGFloat yPlacement;

yPlacement += (kTweenMargin * 2.0) + kSegmentedControlHeight; 
```

yPlacement 被定义为局部变量但未初始化。接下来发生的事情不是分配一个值，而是使用`+=`运算符将​​新值添加到变量中。

出于某种原因，在没有任何优化`-O0`的调试模式下，变量碰巧驻留在零内存中，因此其值为 0，就好像它已正确初始化一样。但事实并非如此！结果，到目前为止一切都很好，这很有误导性。

在分发和发布配置中，优化设置为最小/最快，即`-Os`. 在那种模式下，我很幸运在未初始化的变量中有 0 个值。因此，新值被添加到某个随机值，然后碰巧导致控件放置在可见区域之外的某处。

感谢大家聆听和讨论这个问题。最后，它使我发现了错误。

# php - 无法在 Drupal 中加载自定义 JS

> ID：15045261
> 
> 赞同：1
> 
> 时间：2013-02-23T20:26:03.900
> 
> 标签：php, javascript, google-chrome, drupal

我需要使用 jquery ui 选项卡库，但只能以一种添加形式。所以我曾经`hook_form_alter()`启用标签并添加我的js：

```
drupal_add_library('system', 'ui.tabs');
drupal_add_js(drupal_get_path('theme', 'rating') .'/js/newad.js', 'file'); 
```

库和脚本已正确添加到页眉中

并且该网址可以正确使用它，但是它有问题并且无法正常工作：

![错误截图](../Images/3a45984c15c781fc1a0eb5310e3d4273.png)

为什么 Chrome 加载失败？

newad.js 的内容：

```
(function ($) {

    $(function() {
        $( ".select-format-ads" ).tabs();
    });

})(jQuery); 
```

UPD：如果我`alert('test');`开始添加 Chrome 中没有任何反应，但在 Safari 中可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:32:16.460

我正在解决这个问题。由于 js 文件名中的术语“ad”而导致 GoogleChrome 的 AdBlock 扩展出现问题。

[在其他问题](https://stackoverflow.com/questions/4390134/failed-to-load-resource-under-chrome)中找到了答案

所以我只是重命名了文件，现在一切似乎都很好。

# c++ - 矩阵乘法（我没有返回所有值）

> ID：15045267
> 
> 赞同：0
> 
> 时间：2013-02-23T20:26:54.557
> 
> 标签：c++, c

嗨，任何人都可以帮我弄清楚我做错了什么。编写一个函数来执行矩阵乘法。我没有显示我的所有值。我真的很困惑。谢谢（对 C++ 非常陌生）

```
 int MultiplyTwoMatrices(int **MatrixA, int rowA, int ColumnA, int **MatrixB, int rowB,    int columnB);
int **Matrixmultiply;       //I have allocated and freed it's memory
int rowA=4;
int rowB=4;
int columnA=4;
int columnB=4;

int main()
{
for ( x = 0; x < rowA; x++)
{
    for (y = 0; y < columnB; y++)
    {
    Matrixmultiply[x][y] = MultiplyTwoMatrices(MatrixA,rowA,columnA,MatrixB,rowB,columnB);
        cout<<Matrixmultiply[x][y] <<"\t";

    }
    cout<<"\n";
}

int MultiplyTwoMatrices(int **MatrixA, int rowA, int ColumnA, int **MatrixB, int rowB,    int columnB)
{

int **temp = NULL;
int sum = 0;
double **Multiple = NULL;
int i=0, j=0;

temp = (int**)malloc(columnB*(sizeof(int*)));
for (int p=0; p<columnB; p++)
    {
        temp[p] = (int*)malloc(rowB*(sizeof(int))); 

    }

Multiple = (double**)malloc(rowA*(sizeof(double*)));
for (int p=0; p<rowA; p++)
    {
        Multiple[p] = (double*)malloc(columnB*(sizeof(double))); 

    }

for (int p =0; p<columnB; p++)
    {
        for (int q = 0; q<rowB; q++)
        {
            temp[p][q] = MatrixB[q][p];
        }

    }
for (i =0; i<rowA; i++)
    {
        for (j = 0; j<columnB; j++)
        {
            for (int r = 0; r<rowB; r++)
            {
            sum = sum + (MatrixA[i][r]  * temp[j][r]);
            }

            Multiple[i][j] = sum;
            return Multiple[i][j];
            //cout<<Multiple[i][j]<<"\t";
            sum=0;
        }
            //cout<<"\n";

    }

for (int p =0; p<columnB; p++)
    free (temp[p]);
    free(temp);
for (int p =0; p<rowA; p++)
    free (Multiple[p]);
    free(Multiple);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T20:59:51.300

好的，首先在您的代码中需要进行大量清理。保持函数自包含是一种很好的做法，因此只在函数中传递两个矩阵参数并在函数本身中进行所有迭代。对此的一个简单论点是效率，否则您的代码必须进行 n*m 函数调用，这不好。所以：

```
int MultiplyTwoMatrices(int **MatrixA, int **MatrixB){} 
```

更好的是，您使用的是 C++ 而不是 C，因此请使用对象！将 int ** 封装在一个矩阵类中，这将使您的生活更轻松，您只需要传递对象引用而不是指针！

我强烈建议您阅读我推荐的书，因为您将充分利用 C++。

无论如何，问题是你在 for 循环中返回。当您返回函数时会停止，因此它不会遍历最终的 for 循环。

# java - 方法中的方法

> ID：15045272
> 
> 赞同：5
> 
> 时间：2013-02-23T20:27:05.680
> 
> 标签：java, methods

在 Java 的 main 方法中包含一个方法在语法上是否正确？例如

```
class Blastoff {

    public static void main(String[] args) {

        //countdown method inside main
        public static void countdown(int n) {

            if (n == 0) {
                System.out.println("Blastoff!");
            } else {
                System.out.println(n);
                countdown(n - 1);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T20:30:32.480

不，不直接；但是，方法可以包含*本地内部类*，当然该内部类可以包含方法。[这个 StackOverflow 问题](https://stackoverflow.com/q/355167/978917)给出了一些例子。

但是，在您的情况下，您可能只想`countdown`从内部调用`main`；你实际上并不需要它的整个定义在里面`main`。例如：

```
class Blastoff {

    public static void main(String[] args) {
        countdown(Integer.parseInt(args[0]));
    }

    private static void countdown(int n) {
        if (n == 0) {
            System.out.println("Blastoff!");
        } else {
            System.out.println(n);
            countdown(n - 1);
        }
    }
} 
```

（请注意，我已声明`countdown`为`private`，因此只能从`Blastoff`类中调用它，我假设这是您的意图？）

# matlab - 如何让这个“for循环”在matlab中绘制100个值？

> ID：15045280
> 
> 赞同：0
> 
> 时间：2013-02-23T20:28:09.480
> 
> 标签：matlab, montecarlo

如何让这个“for循环”在matlab中绘制100个值？无法确定在哪里包含“i”
这是共发射极放大器工作点的蒙特卡罗分析图

```
for i=1:100
   Rb = 377000 * (1 + (rand()*2-1)*0.01);
   Rc = 1000 * (1 + (rand()*2-1)*0.01);
   Beta = 200 + 100*(rand()*2-1);
   Ib = (12-0.7)/Rb;
   Ic = Beta*Ib;
   Vc = 12-Ic*Rc;
   plot(Vc,Ic*1000,'.');
   end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T20:31:15.360

![在此处输入图像描述](../Images/5f7a90be58daa6dba775fe0b55b17981.png)那这个呢 ？加持你得到比你100分？？

```
 figure;
 axes('NextPlot',add'); %This remove the need to call hold on, also  I added an extra ' for SO formatting
 for i=1:100
    Rb = 377000 * (1 + (rand()*2-1)*0.01);
    Rc = 1000 * (1 + (rand()*2-1)*0.01);
    Beta = 200 + 100*(rand()*2-1);
    Ib = (12-0.7)/Rb;
    Ic = Beta*Ib;
    Vc = 12-Ic*Rc;
    plot(Vc,Ic*1000,'.');
  end 
```

# php - 在 wp-plugin 中保存用户生成的选项

> ID：15045283
> 
> 赞同：0
> 
> 时间：2013-02-23T20:28:15.893
> 
> 标签：php, javascript, jquery, wordpress

我想为 wordpress 创建一个带有简单用户界面的标语插件。它会随机显示一个用户定义的口号以及说出它的名字。在插件选项中，我想让用户动态添加或删除这些标语。这是我最终想要的快速模型，以便您更好地理解它：

![我的想法的模型](../Images/7de0e3faa42f24d16e7575a5f7261f06.png)

有一个“添加标语”按钮，它添加了 2 个新的输入字段以及删除此标语按钮。因此，如果只有 Name1 并且您按下按钮，Name2 的那些字段就会弹出。JS 部分对我来说没问题，但我在保存这些值时遇到了问题。如何将新值添加到选项中并保存所有动态生成的选项？更困难的是：如果我单击删除 Name2 的此标语并单击保存，它也应该从选项中删除此行，并使用当前值更新 Name1 和 Name 3 字段。

怎么能做到这一点，我现在有点无能为力，查看插件法典并没有真正帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:27:10.710

你的意思是这样的？

```
add_action( 'add_meta_boxes', 'dynamic_add_custom_box' );

/* Do something with the data entered */
add_action( 'save_post', 'dynamic_save_postdata' );

/* Adds a box to the main column on the Post and Page edit screens */
function dynamic_add_custom_box() {
    add_meta_box(
        'dynamic_sectionid',
        __( 'My Slogans', 'myplugin_textdomain' ),
        'dynamic_inner_custom_box',
        'post');
}

/* Render the box content */
function dynamic_inner_custom_box() {
    global $post;
    // nonce for verification
    wp_nonce_field( plugin_basename( __FILE__ ), 'dynamicMeta_noncename' );
    ?>
    <div id="meta_inner">
    <?php

    //GEt the array of saved meta
    $slogans = get_post_meta($post->ID,'slogans',true);

    $c = 0;
    //if ( count( $slogans ) > 0 ) {
    if( is_array ( $slogans ) ){
        foreach( $slogans as $slogan ) {
            if ( isset( $slogan['name'] ) || isset( $slogan['slogan'] ) ) {
                printf( '<p>Slogan Name <input type="text" name="slogans[%1$s][name]" value="%2$s" /> -- Slogan Content : <input type="text" name="slogans[%1$s][slogan]" value="%3$s" /><input class="button tagadd remove" type="button" value="%4$s"></p>', $c, $slogan['name'], $slogan['slogan'], __( 'Remove Slogan' ) );
                $c = $c +1;
            }
        }
    }

    ?>
<span id="here"></span>
<input class="button tagadd add" type="button" value="<?php _e('Add Slogan'); ?>">
<script>
    var $ =jQuery.noConflict();
    $(document).ready(function() {
        var count = <?php echo $c; ?>;
        $(".add").click(function() {
            count = count + 1;

            $('#here').append('<p> Slogan Name <input type="text" name="slogans['+count+'][name]" value="" /> -- Slogan Content : <input type="text" name="slogans['+count+'][slogan]" value="" /><input class="button tagadd remove" type="button" value="<?php _e('Remove Slogan'); ?>">' );
            return false;
        });
        $(".remove").live('click', function() {
            $(this).parent().remove();
        });
    });
    </script>
</div><?php

}

/*  saves our custom data when the post is saved */
function dynamic_save_postdata( $post_id ) {
    // verify if this is an auto save routine. 
    if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) 
        return;

    // verify Nonce and that the request is valid,
    if ( !isset( $_POST['dynamicMeta_noncename'] ) )
        return;

    if ( !wp_verify_nonce( $_POST['dynamicMeta_noncename'], plugin_basename( __FILE__ ) ) )
        return;

    // GOOD; we are set, find a save data

    $slogans = $_POST['slogans'];

    update_post_meta($post_id,'slogans',$slogans);
} 
```

# c# - 数据绑定似乎不适用于特定部分

> ID：15045286
> 
> 赞同：1
> 
> 时间：2013-02-23T20:28:39.887
> 
> 标签：c#, wpf, data-binding

我试图为一个学校项目创建一个网上商店。问题是在底部附近我想将所选名称放入文本框中，但它似乎不起作用

```
 <Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:Default="clr-namespace" x:Class="Project.BrowseStore"
    Title="Browse the store" Height="501.786" Width="735.714" WindowStartupLocation="CenterScreen">
<Grid>
    <Label Content="" HorizontalAlignment="Left" Margin="107.94,65.044,0,0" VerticalAlignment="Top"/>
    <ComboBox x:Name="CmbSort" HorizontalAlignment="Left" Margin="270.627,65.044,0,0" VerticalAlignment="Top" Width="120" IsReadOnly="True" ToolTip="Sorteren" Tag="Sorteren" Text="Sorteren">
        <ComboBoxItem Content="Alle" Selected="ComboBoxItem_Selected_Alle"/>
        <ComboBoxItem Content="Prijs groter dan" Selected="ComboBoxItem_Selected_Prijs"/>
        <ComboBoxItem Content="Prijs kleiner dan" Selected="ComboBoxItem_Selected_Prijs"/>
        <ComboBoxItem Content="Naam" Selected="ComboBoxItem_Selected_Naam"/>
        <ComboBoxItem Content="Boeken" Selected="ComboBoxItem_Selected_Alle"/>
        <ComboBoxItem Content="Games" Selected="ComboBoxItem_Selected_Alle"/>
        <ComboBoxItem Content="Jaaruitgave" Selected="ComboBoxItem_Selected_Jaaruitgave"/>
    </ComboBox>
    <Label Content="Zoeken op" HorizontalAlignment="Left" Margin="122.94,65.044,0,0" VerticalAlignment="Top" Width="82.77" Height="25.96"/>
    <TextBox x:Name="TxtSort" IsEnabled="False" HorizontalAlignment="Left" Height="23" Margin="427.344,65.044,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="120" RenderTransformOrigin="-0.062,0.519"/>
    <Button x:Name="BtnGo" Content="Go" HorizontalAlignment="Left" Margin="581.075,67.044,0,0" VerticalAlignment="Top" Width="75" Click="Button_Click_1"/>
    <TextBox x:Name="txtTest" HorizontalAlignment="Left" Height="23" Margin="143.761,117.284,0,0" TextWrapping="Wrap" Text="&#xA;" VerticalAlignment="Top" Width="120"/>
    <Button Content="Order" HorizontalAlignment="Left" Margin="130.71,442.226,0,0" VerticalAlignment="Top" Width="75"/>
    <DockPanel x:Name="Panel" Height="282.226" LastChildFill="False" Margin="23.493,155,0,0" VerticalAlignment="Top" Width="683.881">
        <ListView x:Name="lstSort" HorizontalAlignment="Left" Height="138.209" VerticalAlignment="Top" Width="683.881" DockPanel.Dock="Top" IsSynchronizedWithCurrentItem="True">
            <ListView.View>
                <GridView AllowsColumnReorder="False">
                    <GridViewColumn Header="Type" DisplayMemberBinding="{Binding Type}"/>
                    <GridViewColumn Header="Naam"  DisplayMemberBinding="{Binding Naam}"/>
                    <GridViewColumn Header="Prijs" DisplayMemberBinding="{Binding Prijs}"/>
                    <GridViewColumn Header="Jaaruitgave" DisplayMemberBinding="{Binding Jaaruitgave}"/>
                    <GridViewColumn Header="Afbeelding" DisplayMemberBinding="{Binding Afbeelding}"/>
                    <GridViewColumn Header="Uitgever" DisplayMemberBinding="{Binding Uitgever}"/>
                    <GridViewColumn Header="Stock" DisplayMemberBinding="{Binding Stock}"/>

                </GridView>

            </ListView.View>

        </ListView>
        <TextBox Height="144.017" TextWrapping="Wrap" Text="{Binding Naam}" VerticalAlignment="Top" Width="120"/>
    </DockPanel>

</Grid> 
```

这部分似乎不起作用......

```
 <TextBox Height="144.017" TextWrapping="Wrap" Text="{Binding Naam}" VerticalAlignment="Top" Width="120"/> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:19:45.730

这是使用[MVVM](http://en.wikipedia.org/wiki/Model_View_ViewModel)的示例。看看它。一旦你了解它是如何工作的，你会问自己没有它你是怎么做任何事情的：D

这就是你应该如何修改你的窗口（XAML）类

```
<Window ... DataContext="ViewModel">
    <Window.Resources>
        <local:BrowseStoreViewModel x:Key="ViewModel" />
    </Window.Resources>
    ...
    <DockPanel ...>
        ...
        <TextBox Text="{Binding SelectedItem.Naam}" ... />
    </DockPanel> 
```

现在您应该为该窗口创建一个 ViewModel，我们将其命名`BrowseStoreViewModel`

```
public class BrowseStoreViewModel : DependencyObject {
    // Dependency property for Selected Item
    // Replace "ItemType" with type you're populating GridView
    public ItemType SelectedItem {
        get { return (ItemType )GetValue(SelectedItemProperty); }
        set { SetValue(SelectedItemProperty, value); }
    }
    public static readonly DependencyProperty SelectedItemProperty=
        DependencyProperty.Register("SelectedItem", typeof(ItemType), typeof(BrowseStoreViewModel), new PropertyMetadata(default(ItemType)));
} 
```

现在只需将 ViewModel.SelectedItem 设置为当前选定的项目（在选择更改时），TextBox 应该会自动更新。我不完全知道如何将选定的行直接绑定到 ViewModel.SelectedItem 但它应该看起来像这样：

```
<GridView AllowsColumnReorder="False" SelectedValue="{Binding SelectedItem}"> ... 
```

# iphone - 如何在 iOS 中通过 Facebook 应用程序打开页面？

> ID：15045293
> 
> 赞同：1
> 
> 时间：2013-02-23T20:29:05.397
> 
> 标签：iphone, facebook, cocoa-touch, ios5, ios6

我有一个 Facebook 粉丝页面，我想通过 iOS 中的 Facebook 应用程序打开它！我使用此代码在 iOS 的 Safari 应用程序中打开页面。

```
NSURL *myUrl = [NSURL URLWithString:@"https://www.facebook.com/pages/example123123123"];

    if(![[UIApplication sharedApplication] openURL:myUrl]){
        NSLog(@"open Faild...");
    } 
```

它在 Facebook 应用程序不存在时工作。它在 safari 中打开并且可以正常工作。但是如果 Facebook 应用程序在 iOS 中它由 Facebook 应用程序打开并且它不起作用！

我的问题是如何使用 Facebook 应用程序打开我的粉丝页面？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T22:22:36.540

这是我在 Facebook 上点赞方法的示例：

```
- (IBAction) likeOnFacebook: (id) sender
{
    NSURL* facebookURL = [ NSURL URLWithString: @"https://facebook.com/jabbermouth" ];
    NSURL* facebookAppURL = [ NSURL URLWithString: @"fb://profile/157893597658332" ];
    UIApplication* app = [ UIApplication sharedApplication ];
    if( [ app canOpenURL: facebookAppURL ] ) {
        [ app openURL: facebookAppURL ];
    } else {
        [ app openURL: facebookURL ];
    }
} 
```

facebook 应用程序可以理解格式为 fb:// 的 URL，您可以使用 canOpenURL 方法测试应用程序是否存在。这是[facebook url scheme](http://wiki.akosma.com/IPhone_URL_Schemes#Facebook)的一些非官方文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-01T20:26:27.433

我发现的另一种方法无需执行两个不同的 URL，具体取决于是否安装了 FB 应用程序。如果未安装 FB 应用程序，将在 Safari 中正常加载，但如果已安装，则使用 FB 应用程序。

[https://www.facebook.com/your-facebook-page-id（id](https://www.facebook.com/your-facebook-page-id) ，不是名字）

如今，您只需点击“编辑页面”并转到“页面信息”选项卡，它就可以更轻松地找到您的 ID，它位于底部。

注意：如果您使用您的页面名称，这不起作用，出于某种原因必须是页面 ID 以便 FB 应用程序正确加载它。

# c# - EMGUCV 最快设置像素

> ID：15045295
> 
> 赞同：0
> 
> 时间：2013-02-23T20:29:25.147
> 
> 标签：c#, emgucv

我需要最快的方法来迭代 EmguCV 位图矩阵并设置像素。我在谷歌之后发现了这个，但对于 700x500 图像大约需要 3 秒：

文档说访问（获取）数据矩阵只是o（1），但它没有明确声明集合数据。

```
 for(int i = 0; i < img.Rows ; i++)

        for(int j = 0; j < img.Cols; j++){

            img.Data[x,y,0] = 255;

            img.Data[x,y,1] = 255;

            img.Data[x,y,2] = 255;

        } 

```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T21:55:52.293

`Emgu.CV.Image<>`的属性的 getter`Data`返回对类内部使用的三维数组的引用。当您分配给该数组的元素时（正如您在上面的代码中所做的那样），您并没有调用`Data`属性的设置器，而是在操作数组本身。

我怀疑您遇到的减速与调用非托管代码有关，因为 EmguCV 代码在很大程度上是非托管的。

试试这个，看看速度有没有变化：

```
Byte[,,] data = img.Data;
int rows = img.Rows;
int cols = img.Cols;

for (int y = 0; y < rows; ++i)
{
    for (int x = 0; x < cols; ++x)
    {
        data[x, y, 0] = 255;
        data[x, y, 1] = 255;
        data[x, y, 2] = 255;
    }
} 
```

该类还有`Image`一个方法`SetValue`可以将每个像素设置为特定值。如果您想要实现的是将图像清除为白色，请尝试调用`img.SetValue(new Rgb(255,255,255))`（或您用于图像的任何颜色类型）而不是手动执行。可能会更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-17T02:44:59.593

```
for (int y = 0; y < rows; y++)
{
    for (int x = 0; x < cols; x++)
    {
        b = (int)frameClone.Data[y, x, 0];
        g = (int)frameClone.Data[y, x, 1];
        r = (int)frameClone.Data[y, x, 2];
    }

    currIntensity = b + g + r;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-24T22:27:39.850

`Emgu.Cv.Image`使用安全或不安全的方法转换位`System.Drawing.Bitmap`图并遍历位图要快得多。

*   安全方法使用

    ```
    color.toargb = bmp.getpixel(X, Y).toargb / bmp.setpixel(X, Y).toargb 
    ```

    这是相当直截了当的。

*   unsafe 方法超级快，依赖`bmp.lockbits(bmp_data)`并将`interopservices.marshal`bmp 数据复制到数组。你可以在网上找到大量的例子。

我对 EmguCV 3.0 像素访问感到非常失望。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-06T08:07:39.367

这是我用来替换颜色的一种方法，它可以替换任何给定的颜色，这些颜色不在给定的（差异）范围内。它非常快，使用不安全

```
/// <summary>
    /// Replaces a given color in a bitmap
    /// </summary>
    /// <param name="image"></param>
    /// <returns></returns>
    public static unsafe void ReplaceColor(Bitmap image,
        Color FindColor,
        int WithinDistance,
        Color ReplaceColor
        )
    {

        byte FindColorR = (byte)FindColor.R;
        byte FindColorG = (byte)FindColor.G;
        byte FindColorB = (byte)FindColor.B;

        byte ReplaceColorR = (byte)ReplaceColor.R;
        byte ReplaceColorG = (byte)ReplaceColor.G;
        byte ReplaceColorB = (byte)ReplaceColor.B;

        byte WithinDistanceByte = (byte)WithinDistance;

        BitmapData imageData = image.LockBits(new Rectangle(0, 0, image.Width, image.Height),
            ImageLockMode.ReadWrite,
            PixelFormat.Format24bppRgb);

        int bytesPerPixel = 3;
        byte* scan0 = (byte*)imageData.Scan0.ToPointer();
        int stride = imageData.Stride;
        PixelData NewData = new PixelData(image.Height,image.Size);
        for (int y = 0; y < imageData.Height; y++)
        {
            byte* row = scan0 + (y * stride);
            for (int x = 0; x < imageData.Width; x++)
            {
                int bIndex = x * bytesPerPixel;
                int gIndex = bIndex + 1;
                int rIndex = bIndex + 2;

                byte pixelR = row[rIndex];
                byte pixelG = row[gIndex];
                byte pixelB = row[bIndex];

                if( Math.Abs(FindColorR - pixelR) > WithinDistanceByte && 
                    Math.Abs(FindColorG - pixelG) > WithinDistanceByte &&
                    Math.Abs(FindColorB - pixelB) > WithinDistanceByte )
                {
                    row[rIndex] = ReplaceColorR;
                    row[gIndex] = ReplaceColorG;
                    row[bIndex] = ReplaceColorB;
                }
                else
                {
                    row[rIndex] = FindColorR;
                    row[gIndex] = FindColorG;
                    row[bIndex] = FindColorB;
                }
            }
        }
        image.UnlockBits(imageData);
    } 
```

# matplotlib - 不同拉伸的颜色标准化

> ID：15045297
> 
> 赞同：0
> 
> 时间：2013-02-23T20:29:27.130
> 
> 标签：matplotlib

在 matplotlib 中定义颜色条标准化的最佳方法是什么？例如，我想要一个`sqrt`标准化以将值集中在 1 附近。据我所知，唯一改变拉伸 & 的标准化是内置的`matplotlib.colors.LogNorm`。

我已经成功地`AsinhNorm`为[arcsinh normalization](http://code.google.com/p/agpy/source/browse/trunk/agpy/asinh_norm.py)编写了一个规范化器，但对于一个相对简单的过程来说，这是相当多的代码。

# android - android: 在 XML 中定义 RadioGroup onCheckChanged

> ID：15045298
> 
> 赞同：0
> 
> 时间：2013-02-23T20:29:28.470
> 
> 标签：android, xml, radio-button, oncheckedchanged

想知道我是否可以`onCheckChanged`在 android 的布局 xml 文件中为 a 定义方法`RadioGroup`？就目前而言，我已经以编程方式完成了这项工作

`rgroup.setOnCheckedChangeListener(this);`

然后对我的方法进行编码`onCheckedChanged()`，它可以按预期完美运行。再次，只是想知道我是否可以在类似于 a `Button`, ( `android:onClick=methodName`)的 XML 中做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T20:36:27.023

您可以在 xml 中`onClick`为 each定义一个。`RadioButton`我不确定这有什么好处/坏处。但似乎没有类似的东西`RadioGroup`。它不一定会知道组中的一个人被“改变”了，但这`RadioButton`是`checked`

[文档](http://developer.android.com/guide/topics/ui/controls/radiobutton.html)

# html - POST HTTP 响应

> ID：15045301
> 
> 赞同：0
> 
> 时间：2013-02-23T20:30:04.987
> 
> 标签：html, c, post, webserver

我正在制作一个简单的 C Web 服务器，它解析包含和 xml 正文的 POST 请求。我正在尝试发回响应，但我似乎无法正确处理。这是我的代码：

```
char res[2000];
strcpy(res, "HTTP/1.1 201 OK\nContent-Type: text/html\n");

printf("%s", res);;
char re[4026];
strcpy(re,"<html><body><p>");
strcat(re, result);
strcat(re, "</p></body></html>\n");
printf("\n%s\n", re);

char tm[1000];
sprintf(tm, "Content-Length: ");
char len[4035];
int l= strlen(re);
sprintf(len, "%d\n", l);
printf("\n%s\n", len);
strcat(tm, len);
printf("\n%s\n", tm);

strcat(res, tm);
strcat(res, re);
printf("\n%s", res);
strcat(res, "\0");

send(sock, res, strlen(res),0); 
```

我不知道为什么，但是当我发送时，会收到注释并且我会留在循环中。

以防万一代码有点难以理解，这是我正在生成的字符串：

```
HTTP/1.1 201 OK
Content-Type: text/html
Content-Length: 37
<html><body><p>139</p></body></html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T20:31:31.243

您需要在标题之后和正文之前再添加一行：

```
HTTP/1.1 201 OK
Content-Type: text/html
Content-Length: 37

<html><body><p>139</p></body></html> 
```

# python - 当我在 Python 中刷新串行缓冲区时，它会停止读取

> ID：15045302
> 
> 赞同：1
> 
> 时间：2013-02-23T20:30:06.973
> 
> 标签：python, serial-port, arduino, pyserial

我已经编写了一个 Arduino 以将数据串行发送到我的计算机。pySerial 正在从串行中正确读取，但由于我总是想拥有最新的信息，我想我可以使用 flushInput() 刷新输入缓冲区，但是当执行命令时，我无法再读取连续剧。我只尝试每 51 次刷新一次（因为 51 是质数，我可以用计数器轻松计数 51 次而无需重置它），这样 Arduino 就有足够的时间发送下一个数据包（以 57600 波特运行)，但仍然无法正常工作。也就是说，我使用了一个变量来存储读取行的长度，使用期限（），但是，一旦我达到 51 并且输入缓冲区被刷新，我总是得到 0 的读数，这意味着它没有读取任何内容。我已经阅读了 pySerial 的文档，但没有找到任何相关信息。flushInput() 是否也会终止串行连接？非常感谢。

编辑：我正在运行 Mac OS 10.7.5 和 Python 2.7.3

```
try:
    self.s = serial.Serial("/dev/tty.usbmodemfa131", 57600, timeout = 0)
    self.FlightLoopCB = self.FlightLoopCallback
    XPLMRegisterFlightLoopCallback(self, self.FlightLoopCB, self.interval, 0)
except serial.SerialException:
    self.s = None
    .
    .
    .

    self.length=0
    self.myline=self.s.readline()
    self.length=len(self.myline)
    print "Test: %i %i" % (self.length, self.j)
    if(self.length>=7):
        if(self.myline[0:2]=="R,"):
            if(self.j%51==0):
                self.s.flushInput()

            self.length=len(self.myline)
            self.myline=self.myline[2:6]
            self.myLineBytes=[0,0]

            self.myLineBytes[0]=unpack('>H', self.myline[0:2])
            self.myLineBytes[1]=unpack('>H', self.myline[2:4]) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T20:47:22.780

**是否`Serial.flushInput()`也关闭流？**

所以我确实研究了 pySerial 的代码（它是可用的，[你可以通过 SVN 拉它，](http://sourceforge.net/scm/?type=svn&group_id=46487)如果你有进一步的麻烦，我建议你这样做）。

由于您在 OSX 上，python 报告`os.name`为“posix”，因此`serial.Serial`实际上解析为`serial.serialposix.Serial`. for的定义`flushInput()`是：

```
def flushInput(self):
    """Clear input buffer, discarding all that is in the buffer."""
    if not self._isOpen: raise portNotOpenError
    termios.tcflush(self.fd, TERMIOS.TCIFLUSH) 
```

（如果你想看它，它[在](http://pyserial.svn.sourceforge.net/viewvc/pyserial/trunk/pyserial/serial/serialposix.py?revision=455&view=markup)第 500 行）

所以本质上它只是一个包装器`termios.tcflush()`。[文档](http://docs.python.org/2/library/termios.html#termios.tcflush)有这样的说法：

> termios.tcflush（fd，队列）
> 
> 丢弃文件描述符 fd 上的排队数据。队列选择器指定哪个队列：TCIFLUSH 用于输入队列，TCOFLUSH 用于输出队列，或 TCIOFLUSH 用于两个队列。

然后根据文档，它不会*关闭*底层流，只会丢弃数据。这可能是您最初期望的行为。

这使我说您的代码可能还有其他问题。没有足够的发布代码能够推断出问题所在。

这只是一个猜测，但也许递增的代码`self.j`在一个块内，它在达到 51 后没有被调用，所以你总是在刷新？如果您可以发布一个产生问题的完整代码示例（也许一些简化的代码集只是练习您所看到的这个问题），那么我可能会提供帮助。

**PS——关于过早优化的说明：**

除非在串行接口的另一端产生数据的速度比您消耗的速度快得多，否则可能不需要首先刷新，因为缓冲区中不会积聚大量数据. 不知何故，我怀疑以 57600 波特运行的串行接口是否能够做到这一点。在进行之前，您应该首先检查并确保确实需要冲洗。

不要仅仅因为您认为可能需要它或“只是为了确保”而这样做。在做之前检查它是否真的解决了一个问题，否则这是一个过早的优化，它只会无缘无故地增加代码的复杂性和脆弱性。

# entity-framework - ef 5 codefirst 枚举集合未在数据库中生成

> ID：15045303
> 
> 赞同：5
> 
> 时间：2013-02-23T20:30:07.673
> 
> 标签：entity-framework, ef-code-first

我正在使用 EF5 和 .NET 4.5。我有一个在数据库中错误生成的特定类。虽然在我的网站上有点复杂，但我会简化一下；

```
namespace Store.Enities
{
    public enum Role
    { Manager, Clerk }

    public class User
    {
        public int Id {get; set;}
        public ICollection<Role> Roles {get; set;}
    }

    public class StoreContext : DbContext
    {
        public DbSet<User> Users {get; set;}

        public StoreContext()
        {
            Database.SetIntializer(new DropCreateDatabaseIfModelChanges<StoreContext>());
        }
    }
} 
```

如您所见，一个用户可以拥有多个角色。由于某种原因，我无法将角色存储在数据库中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-24T14:31:49.687

枚举仍然是原始类型，尤其是整数。就像你的`User`类不能有一个`ICollection<int>`映射到数据库中的东西一样，它也不能有一个枚举的集合。

您应该定义一个`Role`如下所示的类：

```
public class Role
{
    public int Id {get; set;}
    public Roles Role {get; set;}
} 
```

并将枚举的名称更改为`Roles`（或除 之外的任何名称`Role`）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-24T00:03:37.063

我仍在运行 Windows XP SP3，因此无法安装 .NET Framework 4.5，也无法运行测试以查看问题所在，但我可以猜到。在您的设计中，每个“用户”可能有零对多的“角色”，现在按照惯例，实体框架会在“角色”上生成一个外键来引用“用户”，但由于“角色”是一个复杂对象的枚举（值对象）实体框架不支持这种情况，“实体框架不支持在实体类型上具有复杂类型的集合”，您需要将角色设置为实体并给它一个 ID。只是为了确保我是正确的，尝试建立一对一的关系（每个用户只有一个角色），如果它有效，那么我是对的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-08T15:24:08.253

根据 Gert Amold 的回答，您可以使用隐式运算符创建一个不错的包装类：

```
public class RoleWrapper
{
    public int Id { get; set; }

    // Role is any Enum
    public Role Role { get; set; }

    public static implicit operator Role(RoleWrapper val)
    {
        return val.Role;
    }
    public static implicit operator RoleWrapper(Role val)
    {
        return new RoleWrapper() { Role = val };
    }
} 
```

这样，您可以将集合与原始枚举类型角色一起使用：

```
myUser.Roles.Add(Role.WhateverRole);
Role firstRole = myUser.Roles[0]; 
```

# python - 被一行 Python 难倒

> ID：15045308
> 
> 赞同：5
> 
> 时间：2013-02-23T20:30:38.503
> 
> 标签：python, reduce, function-call

我正在通过 Berkely 非正式地学习 Python 课程 CS61A，我完全被一项简单的作业难住了，该作业要求我在提供的模板的最后只提供一个表达式。这是问题代码：

```
# HW 4 Q5\. (fall 2012)

def square(x):
    return x*x

def compose1(f, g):
    """Return a function of x that computes f(g(x))."""
    return lambda x: f(g(x))

from functools import reduce

def repeated(f, n):
    """Return the function that computes the nth application of f, for n>=1.

    f -- a function that takes one argument
    n -- a positive integer

    >>> repeated(square, 2)(5)
    625
    >>> repeated(square, 4)(5)
    152587890625
    """
    assert type(n) == int and n > 0, "Bad n"
    return reduce(compose1, "*** YOUR CODE HERE ***" )

repeated(square, 2)(5) # Sample run 
```

我已经尝试了一切来完成这项工作。在我看来，这个 return stmt 应该这样做：

```
return reduce(compose1, range(n)) 
```

但我什至没有接近。Compose1 需要两个参数 (f, g)，它们都应该是函数。但是当 return 语句调用 'compose1' 时，'compose1' 使用 '0' 代表 'f' 和 'n' 代表 'g'。但是 'f' 和 'g' 应该是函数调用--'square'

我错过了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T20:46:57.893

这里有一个提示。想想返回值是多少`compose1(square, square)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T21:03:55.760

`reduce`当提供只有一个项目的列表时有一个边缘情况：它只是返回第一个项目。所以如果你输入`[f]`它`return reduce(compose1, [f])`等于`f`。

如果提供了两个项目，`compose1`则实际应用于这两个项目并返回。所以`[f, f]`会返回：

```
 compose(f, f)
= lambda x: f(f(x)) 
```

列表中的下一项将用作第二个参数，前一个结果将用作第一个参数。因此，如果我们提供`[f, f, f]`它将返回：

```
 compose(compose(f, f), f)
= lambda x: f(f(f(x))) 
```

现在你应该看到一个模式。列表中的每个`f`都应用一次。因此，您需要`[f] * n`获取带有`n`times的列表`f`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T20:46:41.780

Compose 需要两个参数，这两个参数都需要是函数

通过使用`range`，您传递`compse1`了一对整数（由于`int`s 不可调用，因此正确地爆炸了。您想要传递要组合的函数的列表。

`reduce`在它的第二个参数的前两个元素上调用它的第一个参数，然后在那个结果和第三个元素上......直到你到达最后。中间结果将如下所示：

```
compose1(f1, f2)
compose1(compose(f1, f2), f3)
compase1(compose1(compose(f1, f2), f3), f4)
.... 
```

或更紧凑

```
 f1(f2(x))
 f1(f2(f3(x)))
 f1(f2(f3(f4(x))))
 .... 
```

# php - 从我自己的域通过电子邮件发送时获取不正确的图像 url

> ID：15045309
> 
> 赞同：0
> 
> 时间：2013-02-23T20:30:39.293
> 
> 标签：php, email, kohana

我在发送带有图像的电子邮件时遇到问题。我正在使用富文本编辑器。关键是当我从另一个域中放置图像 URL 时，它是正确的，并且我使用该图像正确地收到了电子邮件。但是当我试图从我自己的域中传递图像的 URL 时，而不是获取例如

> img src = "my_domain_name.ru/path_to_image"

我在电子邮件中收到这个

> img src = "../../../path_to_image"

我没有在 url 中获得 domain_name 。我正在编写 Php Kohana 框架。请帮忙，如果有任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:21:16.530

TinyMCE 有一个`relative_urls`设置，您需要将其设置为`false`.

参见例如[这个论坛主题](http://www.tinymce.com/forum/viewtopic.php?id=1881)

这是[有关该问题的官方 TinyMCE 页面以及示例](http://www.tinymce.com/tryit/url_conversion.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:57:43.720

```
 <script language="javascript" type="text/javascript">
        tinyMCE.init({
            mode : "textareas",
            fix_content_duplication: true,
            content_css : "/adresseofyourcss.css",
            remove_script_host : false,
            relative_urls : true,
            urlconvertor_callback: "convLinkVC",
            theme : "advanced",
            document_base_url : "http://www.yourbaseaddress.com/"
        });

        function convLinkVC(strUrl, node, on_save) {
            strUrl=strUrl.replace("http://www.yourbaseaddress.com","");
            return strUrl;
        }
    </script> 
```

现在可以使用

# php - 多个 $_GET 函数不起作用

> ID：15045310
> 
> 赞同：0
> 
> 时间：2013-02-23T20:30:40.120
> 
> 标签：php, html, get

我一直在设计一些网站。我一直在尝试使用多个 if(isset($_GET['type']) == 'page') { } 等等函数。他们似乎没有工作有人可以启发我吗？

```
<?php
    if(isset($_GET['type']) == 'all') {
    // View All Pages Title
    echo '<h3>View All Pages</h3>';

        if($control1 == 'all') {
            echo '<table width="100%" border="0">';
            echo '<tr>';
            echo '<th scope="col">Page Name</th>';
            echo '<th scope="col">Time Created</th>';
            echo '<th scope="col">View</th>';
            echo '<th scope="col">Edit</th>';
            echo '<th scope="col">Delete</th>';
            echo '</tr>';                 
            $qry=mysql_query("SELECT * FROM page", $con);
            if(!$qry) {
                die("Query Failed: ". mysql_error());
        }
        while($row=mysql_fetch_array($qry)) {
            echo '<tr>';
            echo '<td height="38">'.$row['page_title'].'</td>';
            echo '<td>'.$row['page_updated'].'</td>';
            echo '<td><a href="page.php?view=page&page='.$row['page_link'].'">View</a></td>';
            echo '<td><a href="page.php?edit='.$row['page_link'].'">Edit</td>';
            echo '<td><a href="page.php?delete='.$row['id'].'">Delete</td>';
            echo '</tr>';
        }     
        echo '</table>';
    }
    else {
        echo "<p>You can't view all the pages. Your Account does not hold the correct priorirty</p>";   
    }
}
elseif(isset($_GET['type']) == 'add') {
    // Add New Page Title
    echo '<h3>Add New Page</h3>';
        if($control1 == 'all') {
            echo '<p><a href="pages.php?type=add&add=control" target="new">Click Here to add a new page</a></p>';
    }
    else {
        echo "<p>You can't add new pages. Your Account does not hold the correct priority.</p>";
    }
}
elseif(isset($_GET['type']) == 'edit') {
    // Edit Pages Title
    echo '<h3>Edit a Page</h3>';
        if($control1 == 'all') {
            echo '<table width="100%" border="0">';
            echo '<tr>';
            echo '<th scope="col">Page Name</th>';
            echo '<th scope="col">Edit</th>';
            echo '</tr>';
            $qry=mysql_query("SELECT * FROM page", $con);
                if(!$qry) {
                    die("Query Failed: ". mysql_error());
            }
            while($row=mysql_fetch_array($qry)) {
                echo '<tr>';
                echo '<td height="38">'.$row['page_title'].'</td>';
                echo '<td><a href="page.php?edit='.$row['page_link'].'">Edit</td>';
                echo '</tr>';
            }
            echo '</table>';
        }
        else {
            echo "<p>You can't edit any pages. Your Account does not hold the correct priority </p>";
        }
    }
?> 
```

这是确切的代码。如果您能解释我可以做些什么来修复它，将不胜感激！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T20:34:01.487

`isset($_GET['type'])`返回一个布尔值，因此如果将该布尔值与任何不同的布尔值 ( `isset($_GET['type']) == 'all'`) 进行比较，它将返回 false。

你应该做

```
if ( isset($_GET['type']) && $_GET['type'] == 'all' ) { // code } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T20:34:01.393

应该是这样的

```
if(isset($_GET['type']) && $_GET['type'] == 'page') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T20:34:06.650

`isset`返回布尔值：真或假。因此您的代码：

```
if(isset($_GET['type']) == 'page') 
```

不会工作。您可以像这样更改它：

```
if(isset($_GET['type']) and $_GET['type'] == 'page') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T20:36:03.013

问题是该`isset()`函数仅返回`TRUE`or`FALSE`并且您正在将其与字符串进行比较。就这样使用它：

```
if (isset($_GET['type']) {
   if ($_GET['type'] == 'page') {
      //...
   } elseif($_GET['type'] == 'add') {
      //and so on...
   }
} 
```

最好将`isset`test 放在开头，这样您就不会在每个`if`语句中都检查它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-23T20:36:58.670

正如我所看到的，isset() 正在返回一个布尔值（真/假），您将其与“all”、“add”等进行比较。那不是你想要的。

你可以这样做：

```
if (isset($_GET['type']) && $_GET['type'] == "all") {
    #your code here
} 
```

# android - 如何在windows机器上下载android开源项目？

> ID：15045311
> 
> 赞同：1
> 
> 时间：2013-02-23T20:30:43.273
> 
> 标签：android, android-source, repository

我无法在我的办公室电脑上安装 ubuntu，所以我需要知道有没有办法在 windows 机器上下载 android 开源项目？如何 ？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T20:33:28.647

您可以使用 VirtualBox 在您的主机 Windows 机器上安装 ubuntu 作为来宾操作系统。如果您只想浏览代码，您可以在 github 上在线进行，任何与构建相关的事情都需要 ubuntu（或其他 linux 风格）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:19:51.723

谢谢。本指南帮助我在 Windows 上下载：http: [//blog.csdn.net/zhenwenxian/article/details/5780412](http://blog.csdn.net/zhenwenxian/article/details/5780412) 完成。

# android - 如何在我的音频流项目中使用这个类？

> ID：15045315
> 
> 赞同：1
> 
> 时间：2013-02-23T20:31:10.917
> 
> 标签：android, class, audio, streaming

几天来，我一直在尝试为我在 android 上运行的 4.x 版本的应用程序流式音频找到解决方案，但没有找到。我认为这个类与我需要的应用程序非常相似。但不幸的是我是这门编程语言的初学者，很难找到解决方案，所以我请求帮助我使用这个类。

```
package com.testestreaming;

import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;
import java.net.URLConnection;

import android.app.Activity;
import android.content.Context;
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.ProgressBar;
import android.widget.TextView;

/**
 * MediaPlayer does not yet support streaming from external URLs so this class provides a pseudo-streaming function
 * by downloading the content incrementally & playing as soon as we get enough audio in our temporary storage.
 */
public class MainActivity extends Activity {

    private static final int INTIAL_KB_BUFFER =  96*10/8;//assume 96kbps*10secs/8bits per byte
    private TextView textStreamed;
    private ImageButton playButton;
    private ProgressBar progressBar;

    //  Track for display by progressBar
    private long mediaLengthInKb, mediaLengthInSeconds;
    private int totalKbRead = 0;

    // Create Handler to call View updates on the main UI thread.
    private final Handler handler = new Handler();
    private MediaPlayer mediaPlayer;
    private File downloadingMediaFile;
    private boolean isInterrupted;
    private Context context;
    private int counter = 0;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    public void StreamingMediaPlayer(Context context, TextView textStreamed, ImageButton    playButton, Button streamButton, ProgressBar progressBar){
        this.context = context;
        this.textStreamed = textStreamed;
        this.playButton = playButton;
        this.progressBar = progressBar;
    }

    /*
    Progressivly download the media to a temporary location and update the MediaPlayer as new content becomes available.
    */
    public void startStreaming(final String mediaUrl, long mediaLengthInKb, long mediaLengthInSeconds) throws IOException {

        this.mediaLengthInKb = mediaLengthInKb;
        this.mediaLengthInSeconds = mediaLengthInSeconds;

        Runnable r = new Runnable() {   
            public void run() {   
                try {   
                    downloadAudioIncrement(mediaUrl);
                } catch (IOException e) {
                    Log.e(getClass().getName(), "Unable to initialize the MediaPlayer for fileUrl=" + mediaUrl, e);
                    return;
                }   
            }   
        };
        new Thread(r).start();
    }

    /**  
     * Download the url stream to a temporary location and then call the setDataSource  
     * for that local file
     */  
    public void downloadAudioIncrement(String mediaUrl) throws IOException {

        URLConnection cn = new URL(mediaUrl).openConnection();   
        cn.connect();   
        InputStream stream = cn.getInputStream();
        if (stream == null) {
            Log.e(getClass().getName(), "Unable to create InputStream for mediaUrl:" + mediaUrl);
        }

        downloadingMediaFile = new File(context.getCacheDir(),"downloadingMedia.dat");

        // Just in case a prior deletion failed because our code crashed or something, we also delete any previously 
        // downloaded file to ensure we start fresh.  If you use this code, always delete 
        // no longer used downloads else you'll quickly fill up your hard disk memory.  Of course, you can also 
        // store any previously downloaded file in a separate data cache for instant replay if you wanted as well.
        if (downloadingMediaFile.exists()) {
            downloadingMediaFile.delete();
        }

        @SuppressWarnings("resource")
        FileOutputStream out = new FileOutputStream(downloadingMediaFile);   
        byte buf[] = new byte[16384];
        int totalBytesRead = 0, incrementalBytesRead = 0;
        do {
            int numread = stream.read(buf);   
            if (numread <= 0)   
                break;   
            out.write(buf, 0, numread);
            totalBytesRead += numread;
            incrementalBytesRead += numread;
            totalKbRead = totalBytesRead/1000;

            testMediaBuffer();
            fireDataLoadUpdate();
        } while (validateNotInterrupted());   
            stream.close();
        if (validateNotInterrupted()) {
            fireDataFullyLoaded();
        }
    }  

    private boolean validateNotInterrupted() {
        if (isInterrupted) {
            if (mediaPlayer != null) {
                mediaPlayer.pause();
                //mediaPlayer.release();
            }
            return false;
        } else {
            return true;
        }
    }

    /**
     * Test whether we need to transfer buffered data to the MediaPlayer.
     * Interacting with MediaPlayer on non-main UI thread can causes crashes to so perform this using a Handler.
     */  
    private void  testMediaBuffer() {
        Runnable updater = new Runnable() {
            public void run() {
                if (mediaPlayer == null) {
                    //  Only create the MediaPlayer once we have the minimum buffered data
                    if ( totalKbRead >= INTIAL_KB_BUFFER) {
                        try {
                            startMediaPlayer();
                        } catch (Exception e) {
                            Log.e(getClass().getName(), "Error copying buffered conent.", e);               
                        }
                    }
                } else if ( mediaPlayer.getDuration() - mediaPlayer.getCurrentPosition() <= 1000 ){ 
                    //  NOTE:  The media player has stopped at the end so transfer any existing buffered data
                    //  We test for < 1second of data because the media player can stop when there is still
                    //  a few milliseconds of data left to play
                    transferBufferToMediaPlayer();
                }
            }
        };
        handler.post(updater);
    }

    private void startMediaPlayer() {
        try {   
            File bufferedFile = new File(context.getCacheDir(),"playingMedia" + (counter++) + ".dat");

            // We double buffer the data to avoid potential read/write errors that could happen if the 
            // download thread attempted to write at the same time the MediaPlayer was trying to read.
            // For example, we can't guarantee that the MediaPlayer won't open a file for playing and leave it locked while 
            // the media is playing.  This would permanently deadlock the file download.  To avoid such a deadloack, 
            // we move the currently loaded data to a temporary buffer file that we start playing while the remaining 
            // data downloads.  
            moveFile(downloadingMediaFile,bufferedFile);

            Log.e(getClass().getName(),"Buffered File path: " + bufferedFile.getAbsolutePath());
            Log.e(getClass().getName(),"Buffered File length: " + bufferedFile.length()+"");

            mediaPlayer = createMediaPlayer(bufferedFile);

            // We have pre-loaded enough content and started the MediaPlayer so update the buttons & progress meters.
            mediaPlayer.start();
            startPlayProgressUpdater();         
            playButton.setEnabled(true);
        } catch (IOException e) {
            Log.e(getClass().getName(), "Error initializing the MediaPlayer.", e);
            return;
        }   
    }

    private MediaPlayer createMediaPlayer(File mediaFile)
    throws IOException {
        MediaPlayer mPlayer = new MediaPlayer();
        mPlayer.setOnErrorListener(
                new MediaPlayer.OnErrorListener() {
                    public boolean onError(MediaPlayer mp, int what, int extra) {
                        Log.e(getClass().getName(), "Error in MediaPlayer: (" + what +") with extra (" +extra +")" );
                        return false;
                    }
                });

        //  It appears that for security/permission reasons, it is better to pass a FileDescriptor rather than a direct path to the File.
        //  Also I have seen errors such as "PVMFErrNotSupported" and "Prepare failed.: status=0x1" if a file path String is passed to
        //  setDataSource().  So unless otherwise noted, we use a FileDescriptor here.
        @SuppressWarnings("resource")
        FileInputStream fis = new FileInputStream(mediaFile);
        mPlayer.setDataSource(fis.getFD());
        mPlayer.prepare();
        return mPlayer;
    }

    /**
     * Transfer buffered data to the MediaPlayer.
     * NOTE: Interacting with a MediaPlayer on a non-main UI thread can cause thread-lock and crashes so 
     * this method should always be called using a Handler.
     */  
    private void transferBufferToMediaPlayer() {
        try {
            // First determine if we need to restart the player after transferring data...e.g. perhaps the user pressed pause
            boolean wasPlaying = mediaPlayer.isPlaying();
            int curPosition = mediaPlayer.getCurrentPosition();

            // Copy the currently downloaded content to a new buffered File.  Store the old File for deleting later. 
            File oldBufferedFile = new File(context.getCacheDir(),"playingMedia" + counter + ".dat");
            File bufferedFile = new File(context.getCacheDir(),"playingMedia" + (counter++) + ".dat");

            //  This may be the last buffered File so ask that it be delete on exit.  If it's already deleted, then this won't mean anything.  If you want to 
            // keep and track fully downloaded files for later use, write caching code and please send me a copy.
            bufferedFile.deleteOnExit();   
            moveFile(downloadingMediaFile,bufferedFile);

            // Pause the current player now as we are about to create and start a new one.  So far (Android v1.5),
            // this always happens so quickly that the user never realized we've stopped the player and started a new one
            mediaPlayer.pause();

            // Create a new MediaPlayer rather than try to re-prepare the prior one.
            mediaPlayer = createMediaPlayer(bufferedFile);
            mediaPlayer.seekTo(curPosition);

            //  Restart if at end of prior buffered content or mediaPlayer was previously playing.  
            //  NOTE:  We test for < 1second of data because the media player can stop when there is still
            //  a few milliseconds of data left to play
            boolean atEndOfFile = mediaPlayer.getDuration() - mediaPlayer.getCurrentPosition() <= 1000;
            if (wasPlaying || atEndOfFile){
                mediaPlayer.start();
            }

            // Lastly delete the previously playing buffered File as it's no longer needed.
            oldBufferedFile.delete();

        }catch (Exception e) {
            Log.e(getClass().getName(), "Error updating to newly loaded content.", e);                  
        }
    }

    private void fireDataLoadUpdate() {
        Runnable updater = new Runnable() {
            public void run() {
                textStreamed.setText((totalKbRead + " Kb read"));
                float loadProgress = ((float)totalKbRead/(float)mediaLengthInKb);
                progressBar.setSecondaryProgress((int)(loadProgress*100));
            }
        };
        handler.post(updater);
    }

    private void fireDataFullyLoaded() {
        Runnable updater = new Runnable() { 
            public void run() {
                transferBufferToMediaPlayer();

                // Delete the downloaded File as it's now been transferred to the currently playing buffer file.
                downloadingMediaFile.delete();
                textStreamed.setText(("Audio full loaded: " + totalKbRead + " Kb read"));
            }
        };
        handler.post(updater);
    }

    public MediaPlayer getMediaPlayer() {
        return mediaPlayer;
    }

    public void startPlayProgressUpdater() {
        float progress = (((float)mediaPlayer.getCurrentPosition()/1000)/mediaLengthInSeconds);
        progressBar.setProgress((int)(progress*100));

        if (mediaPlayer.isPlaying()) {
            Runnable notification = new Runnable() {
                public void run() {
                    startPlayProgressUpdater();
                }
            };
            handler.postDelayed(notification,1000);
        }
    }    

    public void interrupt() {
        playButton.setEnabled(false);
        isInterrupted = true;
        validateNotInterrupted();
    }

    /**
     *  Move the file in oldLocation to newLocation.
     */
    public void moveFile(File oldLocation, File newLocation)
    throws IOException {

        if ( oldLocation.exists( )) {
            BufferedInputStream  reader = new BufferedInputStream( new FileInputStream(oldLocation) );
            BufferedOutputStream  writer = new BufferedOutputStream( new FileOutputStream(newLocation, false));
            try {
                byte[]  buff = new byte[8192];
                int numChars;
                while ( (numChars = reader.read(  buff, 0, buff.length ) ) != -1) {
                    writer.write( buff, 0, numChars );
                }
            } catch( IOException ex ) {
                throw new IOException("IOException when transferring " + oldLocation.getPath() + " to " + newLocation.getPath());
            } finally {
                try {
                    if ( reader != null ){                      
                        writer.close();
                        reader.close();
                    }
                } catch( IOException ex ){
                    Log.e(getClass().getName(),"Error closing files when transferring " + oldLocation.getPath() + " to " + newLocation.getPath() ); 
                }
            }
        } else {
            throw new IOException("Old location does not exist when transferring " + oldLocation.getPath() + " to " + newLocation.getPath() );
        }
    }
} 
```

我需要一个可以播放此网址的播放器：

```
Streaming: http://69.64.48.96:9880 
```

一个简单的应用程序，只有一个按钮播放和停止。我使用 MediaPlayer 做了另一个应用程序，但仅适用于 2.x 和 3.x 版本，4.x 不起作用 然后我会尝试使用此类但不知道如何将其称为播放按钮。

我试过了：

```
public void onClick () {
    try {
        startStreaming ("http://69.64.48.96:9880", 50, 10);
    } Catch (IOException e) {
        e.printStackTrace ();
    }
} 
```

但它不应该是这样，因为当我调用播放按钮时会关闭应用程序。

这是我的初始应用程序，但不适用于 android 4.x。

```
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.media.MediaPlayer.OnPreparedListener;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Toast;
import java.io.IOException;

public class Main extends Activity  implements OnPreparedListener{
    public String url = "http://69.64.48.96:9880/";
    public MediaPlayer player = new MediaPlayer();

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        play();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    public void stop(){
        Toast.makeText(getApplicationContext(), "Finalizando...", Toast.LENGTH_SHORT).show();
        if(player.isPlaying()){
            player.stop();
            player.reset();
        }
    }

    public void play(){

        if(player.isPlaying()){
            Toast.makeText(getApplicationContext(), "Já está em execução!", Toast.LENGTH_SHORT).show();
        } else {
            Toast.makeText(getApplicationContext(), "Preparando...", Toast.LENGTH_SHORT).show();
            player.setAudioStreamType(AudioManager.STREAM_MUSIC);
            player.setAudioStreamType(AudioManager.STREAM_NOTIFICATION);
            try {
                player.setDataSource(url);
            } catch (IllegalArgumentException e) {
                e.printStackTrace();
            } catch (SecurityException e) {
                e.printStackTrace();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            try {
                player.setOnPreparedListener(this);
                player.prepareAsync();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            }
        }
    }

    public void onPrepared(MediaPlayer mp) {
        mp.start();
    }

    public void onClick(View v){
        final int id = v.getId();
        switch (id){
        case R.id.btnPlay:
            play();
            break;
        case R.id.btnStop:
            stop();
            break;
        }
    }
} 
```

# c - C 元宏模式匹配

> ID：15045319
> 
> 赞同：0
> 
> 时间：2013-02-23T20:31:29.047
> 
> 标签：c, macros, c-preprocessor

我有一些宏`KEY_*`。我想将它们全部定义为外部变量，但数量和名称可能会有所不同。

文件1.h：

```
#define KEY_FOO 200
...
#define KEY_ASDFG 423 
```

预处理器后的file2.c：

```
#include <file1.h>
// Something like this should be generated by macros or so, but should not hardcode the names (except KEY_)
extern int key_foo; int key_foo = 200;
...
extern int key_asdfg; int key_asdfg = 423; 
```

我可以（以及如何）制作一个像这样工作并且不需要使用 / 调用的元宏/东西`FOO`吗`ASDFG`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:38:14.600

您不能仅使用 C 预处理器来执行此操作。

至少，它需要将`KEY_FOO`标记分解为其组成字符，并且没有预处理器工具可以做到这一点。

用 sed 或 perl 应该很容易做到，或者你甚至可以编写一个 C 程序来执行这种转换，但你不能在预处理器中做到这一点。

# ios - 可以在 iPad 上看到 Core Data 而不运行使用它的应用程序吗？

> ID：15045321
> 
> 赞同：1
> 
> 时间：2013-02-23T20:31:33.323
> 
> 标签：ios, ipad, core-data, ios6

我正在创建一个使用 Core Data 的应用程序。我想知道，一旦将应用程序加载到 iPad 上，应用程序内的数据是否安全，或者是否可以在运行应用程序之外查看数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:04:39.377

默认情况下，可以使用 PhoneView 或一些类似的桌面应用程序，结合命令行 SQLite 或任何其他 SQLite 前端应用程序轻松查看 SQLite 持久存储。

现在其他功能，如 iOS 使用锁码的加密可能会为设备数据的所有者提供一些安全性，但 Core Data 不会提供额外的保护。如果这不是您关心的问题，而是阻止用户理解数据模型，那么您必须意识到，要解密设备上的文件，您必须在某个时候拥有设备内存中的密钥 - 任何确定的个人都能够通过越狱或许多其他技术获取该密钥。

# php - Zend Framework 2 段路由所需段

> ID：15045322
> 
> 赞同：4
> 
> 时间：2013-02-23T20:31:45.897
> 
> 标签：php, routing, zend-framework2, zend-route, zend-framework-routing

我正在尝试制作一条（或两条）路线，让我使用以下 URL 格式调用两个不同的操作。

```
mydomain.com/profile
mydomain.com/profile/1234/something 
```

对于第二种格式，`1234`应该是必需的整数值，而`something`应该是可选字符串。第一种格式很简单，使用文字路由。我以为我可以为第二种格式添加一个分段子路由，但我无法让它工作。我试图省略第一种格式，只使用分段路线做第二种格式，但我也没有成功。

这是我尝试过的：

```
'profile' => array(
    'type' => 'Zend\Mvc\Router\Http\Literal',
    'options' => array(
        'route' => '/profile',
        'defaults' => array(
            'controller' => 'User\Controller\User',
            'action' => 'profile'
        )
    ),
    'child_routes' => array(
        'profile_view' => array(
            'type' => 'Zend\Mvc\Router\Http\Segment',
            'options' => array(
                'route' => '/:code[/:username]',
                'constraints' => array(
                    'code' => '[0-9]*',
                    'username' => '[a-zA-Z0-9_-]*'
                ),
                'defaults' => array(
                    'controller' => 'User\Controller\User',
                    'action' => 'view_profile'
                )
            )
        )
    )
) 
```

对于`mydomain.com/profile`，我得到以下错误：

```
Fatal error: Uncaught exception 'Zend\View\Exception\RuntimeException' with message 'No RouteMatch instance provided' 
```

对于`mydomain.com/1234/something`，我收到以下错误：

```
Fatal error: Uncaught exception 'Zend\Mvc\Router\Exception\InvalidArgumentException' with message 'Missing parameter "code"' 
```

该[手册指出以下内容](http://framework.zend.com/manual/2.1/en/modules/zend.mvc.routing.html#zend-mvc-router-http-segment)：

> 如果一个段是可选的，它应该用括号括起来。例如，“/:foo[/:bar]”将匹配“/”后跟文本并将其分配给键“foo”；如果发现任何额外的“/”字符，则最后一个字符之后的任何文本都将分配给键“bar”。

这不正是我正在做的吗？如果我注释掉约束，上述错误保持不变。

我在这里想念什么？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-17T12:20:20.630

**我的解决方案：将可选参数的默认值设置为空字符串**

我遇到了类似的问题，我通过设置可选参数的默认值来解决它（在你的情况下，“用户名”为空字符串“”；我的解决方案：

```
'users' => array(
    'type' => 'segment',
    'options' => array(
        'route' => '/users[/:user_id]',
        'constraints' => array(
            'user_id' => '[0-9]*',
        ),
        'defaults' => array(
            'controller' => 'My\Controller\User',
            'user_id' => ""
        )
    ), 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T20:12:17.287

我又玩了一些。经过调试，我仍然无法弄清楚。我试图为`code`参数添加一个默认值，这似乎起到了作用。为什么在地球上有效，以及它是如何有意义的，我不知道。对我来说，如果我在 URL 中为 URL 中的参数提供了一个值，是否指定了默认值并不重要。尽管如此，显然它确实很重要 - 或者至少在这种情况下它确实重要。

这是工作代码。我还更新了 code 参数的正则表达式。

```
'profile' => array(
    'type' => 'Zend\Mvc\Router\Http\Literal',
    'options' => array(
        'route' => '/profile',
        'defaults' => array(
            'controller' => 'User\Controller\User',
            'action'     => 'profile',
        ),
    ),
    'may_terminate' => true,
    'child_routes' => array(
        'view' => array(
            'type' => 'Zend\Mvc\Router\Http\Segment',
            'options' => array(
                'route' => '/:code[/:username]',
                'constraints' => array(
                    'code' => '\d+',
                    'username' => '[a-zA-Z0-9_-]*',
                ),
                'defaults' => array(
                    'controller' => 'User\Controller\User',
                    'action' => 'viewProfile',
                    'code' => 0,
                ),
            ),
        ),
    ),
), 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T04:38:31.930

您得到的第二个例外`Missing parameter "code"`来自组装，而不是匹配。这意味着您在组装路线时没有提供代码`profile/profile_view`。

顺便说一句，您不必在 child_routes 前面加上父路由的名称。只需将子路由称为“视图”，并将其组装为`profile/view`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T22:33:26.697

我相信您缺少该`may_terminate`选项，如下所示：

```
'profile' => array(
    'type' => 'Zend\Mvc\Router\Http\Literal',
    'options' => array(
        'route' => '/profile',
        'defaults' => array(
            'controller' => 'User\Controller\User',
            'action' => 'profile'
        )
    ),
    'may_terminate' => true,
    'child_routes' => array(
    ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-14T23:08:26.320

根据 Bittarman，发生这种情况的原因有两个。他说，主要原因是：

```
<Bittarman> ezio, that looks like what happens when you make a new phprenderer rather than using the configured one 
```

我显然有较小的原因：我在我的布局中使用了 $this->url() 。因为没有路由匹配——一个 404 错误——它在所有 404 错误上都被炸毁了。

```
<Bittarman> for all of those things, stop doing if (!$this->url() == $this->url('home') etc
<ezio> ummm when it's home my business partner wants the whole order changed so google can hit on a bunch of keyords
<Bittarman> instead, in the VIEW for home, set what you need.
<ezio> how would i set the second example where i'm trying to highlight the currently-being-used menu item
<Bittarman> so, in your layout, you just want echo $this->headTitle()->setSeparator(' - ')->setAutoEscape(false)
<Bittarman> ezio, use the placeholder view helper
<ezio> okay
<ezio> thanks Bittarman ... tearing my hair out is not fun when you're already losing so much of it :p
<Bittarman> <?= $this->placeholder('currently-being-used') ?>
<Bittarman> and in your view, <?php $this->placeholder('currently-being-used')->append('foo') ?>
<ezio> sense making a lot you are 
```

# python - Python 3 插入双向链表

> ID：15045323
> 
> 赞同：0
> 
> 时间：2013-02-23T20:31:48.233
> 
> 标签：python, python-3.x

刚开始，这是作业，所以我只是在这里寻找提示。我对 Python 和一般编程很陌生。我应该实现一个双链接的基于游标的列表。我在插入列表时遇到了一些麻烦。我的导师提供了一个简单的 Node 类和 Node2Way 类。他还提供了init方法：

```
from node import Node

class Node2Way(Node):
    def __init__(self,initdata):
        Node.__init__(self,initdata)
        self.previous = None

    def getPrevious(self):
        return self.previous

    def setPrevious(self,newprevious):
        self.previous = newprevious 
```

这是我到目前为止所拥有的（只是相关的方法）：

```
from node2way import Node2Way

class CursorBasedList(object):
    """ Linked implementation of a positional list."""

    def __init__(self):
        """ Creates an empty cursor-based list."""
        self._header = Node2Way(None)
        self._trailer = Node2Way(None)
        self._trailer.setPrevious(self._header)
        self._header.setNext(self._trailer)
        self._current = None
        self._size = 0

def insertAfter(self, item):
        """Inserts item after the current item, or
        as the only item if the list is empty.  The new item is the
        current item."""
        temp = Node2Way(item)
        if self.isEmpty():
            self._header.setNext(temp)
            self._trailer.setPrevious(temp)
        else:
            temp.setNext(self._current.getNext())
            self._current.setNext(temp)
            temp.setPrevious(self._current)
        self._current = temp
        self._size+=1 
```

当我测试 insertAfter 方法时，它适用于添加第一项，但是当我尝试添加第二项时，它说 self._current 是 None 类型并且不能使用 getNext 方法。我不知道是否有另一种方法可以让 temp 在当前节点之后引用节点。我不确定我做错了什么，或者即使我做的任何事情都是对的。我想一旦我正确地使用了 insertAfter 方法，我就可以使用 insertBefore 方法了。

任何提示将不胜感激。先感谢您！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:47:15.517

如果是

```
 if self.isEmpty():
        self._header.setNext(temp)
        self._trailer.setPrevious(temp) 
```

您永远不会设置`temp`.

# jquery - Magento：添加外部 jQuery 文件

> ID：15045327
> 
> 赞同：1
> 
> 时间：2013-02-23T20:32:20.227
> 
> 标签：jquery, magento

我想知道如何将外部 jQuery 文件添加到 magento（在每个页面上）。这样做的最佳做法是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T20:43:21.230

就这样做吧。
在前端（默认主题）上对“app/design/frontend/default/default/layout/page.xml”进行修改，然后添加：

```
<action method="addJs"><script>jquery/jquery.min.js</script></action> to block with name “head” . 
```

并在后端（默认主题）对“修改应用程序/设计/管理html/默认/默认/布局/main.xml。：

这就是javascript文件将如何包含在每个页面标题中的方式。
这是一个链接，您可以参考并了解更多信息。
[http://www.fontis.com.au/blog/magento/using-jquery-magento](http://www.fontis.com.au/blog/magento/using-jquery-magento) “了解更多。

这里是你如何写“noConflict”。

```
<default>
<reference name="head">
    <block type="core/text" name="google.cdn.jquery">
        <action method="setText">
            <text><![CDATA[<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script><script type="text/javascript">jQuery.noConflict();</script>]]>
            </text>
        </action>
    </block>
</reference> 
```

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T01:04:06.697

您可以将其放在 Page.xml 中。您可以在模板的布局文件夹中找到它。为了避免与其他库发生冲突，您应该调用 jQuery.noConflict()

# c++ - 二叉搜索树（搜索功能）

> ID：15045333
> 
> 赞同：0
> 
> 时间：2013-02-23T20:32:47.737
> 
> 标签：c++

```
template <class T>
struct TreeNode{
  string value;
  T key;
  TreeNode<T> *Parent;
  TreeNode<T> *LeftChild;
  TreeNode<T> *RightChild;
  TreeNode (T k,string Val)
  {
           this->value=Val;
           this->key=k;
           this->Parent=NULL;
           this->LeftChild=NULL;
           this->RightChild=NULL;
  }
};

template <class T>
class BinaryTree{
  private:
       TreeNode<T> *Root;        
  public:  
       BinaryTree();
       ~BinaryTree();
       void insertNode(T Key,string Val);
       void deleteNode(T Key);
       string searchNode(T Key);
       void UpdateKey(T newkey,T oldkey);
       int Height(TreeNode<T> *node);
       int height();
};

template <class T>
string BinaryTree<T>::searchNode(T Key)
{        
TreeNode<T> *temp=Root;
while (temp!=NULL)
{
      if (temp->key==Key)
      {
          cout<<temp->key<<endl;                             
          return temp->value;
      }
      if (temp->key>Key)
      {
          temp=temp->LeftChild;
      }
      else if (temp->key<Key)
      {
           temp=temp->RightChild;
      }                  
}     
return "\0";
} 
```

我正在制作一个二叉搜索树。但是当我运行我的搜索函数时，它总是返回 NULL 值，即使该值存在于树中。要么我的构造函数不正确，要么我的搜索功能有问题。我似乎无法弄清楚问题所在。这是构造函数：

```
template <class T>
BinaryTree<T>::BinaryTree()
{
Root=NULL;                       
ifstream fin;
fin.open("names.txt");
string buffer;
T buff;
while (!fin.eof())
{
      getline(fin,buffer,'~');
      fin>>buff;

      TreeNode<T> *temp,*temp1;
      temp=Root;
      temp1=temp;
      while (temp!=NULL)
      {
          temp1=temp;  
          TreeNode<T> *Right=temp->RightChild;
          TreeNode<T> *Left=temp->LeftChild;
          if (temp->key>buff)
          {
              temp=temp->LeftChild;
          }
          else if (temp->key<buff)
          {
              temp=temp->RightChild;
          }
          else
          {
              temp=temp->LeftChild;
          }
      }
      if (temp!=Root)
      temp->Parent=temp1;
      temp=new TreeNode<T>(buff,buffer);
}
fin.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T20:46:24.697

首先，这不属于构造函数。这应该在一个`readFile()`方法或一些`operator>>()`.

现在到你的阅读功能

不要检查

```
while (!fin.eof()) 
```

检查

```
while (std::getline(fin, buffer, '~')) 
```

反而。

最后，您永远不会向树中添加任何内容，只会添加一些`temp`变量。这可能是您的搜索功能失败的原因。

# php - MYSQL 列指定了两次 INSERT

> ID：15045340
> 
> 赞同：0
> 
> 时间：2013-02-23T20:33:17.860
> 
> 标签：php, mysql, ajax

我希望我能得到一些帮助。

我正在制作一个添加任务表，用户可以在其中将标题、描述、用户分配和其他内容输入到任务的规范中。可以选择添加另一行（任务），这是使用 ajax 生成的。

行中的每个输入都有一个原始名称 (name="tasktitle0", name="privacy0")，当您添加新行时，它们具有相同的名称，但变量会递增并附加到 if ex (tasktitle1 , 和 taskprivacy1 等等）。

当我提交表单时，我 subst() 输入的名称，修剪前四个字符，然后修剪最后一个字符，因此名称变为“标题”、“隐私”，就像我要插入它们的数据库中的列一样.

如果我只提交一项任务，该应用程序就可以工作。但是如果我创建一个新行（任务）MySql 给我一个错误说

有一个错误。错误 #Column 'privacy' 指定了两次

我知道为什么要这样做，我只需要知道如何解决这个问题。

这是我修剪名称的php：

```
if ($_GET['s'] == "Y") {
    $str2 = '';
    foreach ($_POST as $p => $v) {
        if (substr($p, 0, 4) != "flag" && $p != "key" && substr($p, 0, 4) == "task") {
            if (!empty($v)) {
                $str2 .= mb_substr(substr($p, 4), 0, -1) . "='" . addslashes($v) . "',";
            } else {
                $str2 .= substr($p, 4) . "=NULL,";
            }
        }
    }
} 
```

这是我插入它的地方：

```
$sql3 = "INSERT INTO nameofDB.tablename SET ";
$sql3 .= $str2;
$sql3 = substr($sql3, 0, -1);

if ($str2 != '') {
    if ($r2 = mysql_query($sql3, $Link)) {
        $mess = "Successfully saved support ticket.";
    } else {
        $mess = "There was an error. Error #" . mysql_error($Link);
        echo $mess . "<br>";
        echo $sql3;
        exit;
    }
} 
```

这是它显示的错误：

这是当我执行 2 行（任务）时，我知道在一个查询中我告诉它两次插入列但我该如何解决这个问题？想法？

> 有一个错误。错误 #Column 'privacy' 指定了两次 INSERT INTO dbname.tablename SET ticketNum='95240560',title='d',tdesc='asd',datefrom='02/26/2013',cat='PERSONAL',userid= '3171',status='INACTIVE',priority='MEDIUM',privacy='PUBLIC',ticketNum='95240560',title='sad',tdesc='d',datefrom='02/28/2013', cat='BEREAVEMENT',userid='1949',status='COMPLETED',priority='HIGH',privacy='PRIVATE'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T20:35:34.070

错误消息说明了一切：*您正在尝试在列中插入两个值`privacy`*

> INSERT INTO dbname.tablename SET ticketNum='95240560',title='d',tdesc='asd',datefrom='02/26/2013',cat='PERSONAL',userid='3171',status='INACTIVE ',priority='MEDIUM', **privacy='PUBLIC'** ,ticketNum='95240560',title='sad',tdesc='d',datefrom='02/28/2013',cat='BEREAVEMENT',userid= '1949',status='COMPLETED',priority='HIGH',**隐私='PRIVATE'**

更糟糕的是，您分配了两个不同的值。你***真的***需要检查你的逻辑，因为这不是你得到冲突值的好兆头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T20:37:24.167

一次向 MySQL 表中插入多于一行的 SQL 语法是：

```
INSERT INTO nameofDB.tablename
    (columnName1, columnName2, columnName3, columnName4)
VALUES
    ('row1value1', 'row1value2', 'row1value3', 'row1value4'),
    ('row2value1', 'row2value2', 'row2value3', 'row2value4'); 
```

您不能使用`INSERT ... SET`语法在单个查询中插入多行。

有关详细信息，请参阅[http://dev.mysql.com/doc/refman/5.5/en/insert.html](http://dev.mysql.com/doc/refman/5.5/en/insert.html)

# java - 如何将 HTML 表格转换为 java 数组

> ID：15045343
> 
> 赞同：0
> 
> 时间：2013-02-23T20:33:25.160
> 
> 标签：java, html

我有 Html 表，我想将其转换为 java 数组。表如下所示：

```
<html>
<body>
<table border="1">
<tr>
<td>row 1, cell 1</td>
<td>row 1, cell 2</td>
</tr>
<tr>
<td>row 2, cell 1</td>
<td>row 2, cell 2</td>
</tr>
</table>
</body>
</html> 
```

我想它在java中看起来像这样：

num[1] = 行 1，单元格 1

num[2] = 行 1，单元格 2

num[3] = 第 2 行，单元格 1

num[4] = 第 2 行，第 2 单元格

如何？

# javascript - 这个 JS 复制技巧是如何工作的？

> ID：15045346
> 
> 赞同：5
> 
> 时间：2013-02-23T20:33:34.140
> 
> 标签：javascript, dom

在[此页面](http://www.songmeanings.net/songs/view/70360/)上，如果您复制该页面的几乎任何位置，您都会将字符串 `Read more at http://`添加到副本的末尾。我想知道怎么做。查看源代码（post-copypaste.js）并设置断点后，我不明白。当我选择文本时，该区域似乎正在触发。

我尝试查看 DOM（通过在 Firefox 中查看选定的源），但没有看到 dom 中的文本。所以它一定是一个javascript技巧。我可以想象捕获一个控制 C 事件（我不知道这是否正在发生），但我无法想象如何添加或影响正在编译的文本，因为它属于 dom。我没有看到闪烁或任何东西

这个 JS 技巧是如何工作的，或者我如何调试它来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T13:45:17.143

> 但尴尬的是常规窗口/dom 上的选择似乎没有受到影响。

它是，但只是不可见。通常发生的情况是页面上的其他地方有一个容器（不一定可见）。您选择的内容将被粘贴到那里，然后扩展，然后从容器中复制和删除。这一切都需要几分之一秒，当您将其粘贴到某个地方时，您的剪贴板已经存储了扩展内容。

如果您仔细查看作为示例链接的页面，主体中有一个空的 div 标记，其类为 pw-root。`<div class='pw-root'></div>`当您复制文本时，一秒钟（例如在 Firebug 中可见）它会按照上面的说明进行更改，然后再次清空。

# c++ - 不正确的浮点行为

> ID：15045351
> 
> 赞同：14
> 
> 时间：2013-02-23T20:34:02.510
> 
> 标签：c++, floating-point, embedded-linux, ieee-754, powerpc

当我在支持软件浮点仿真（禁用硬件浮点）的 32 位 powerpc 内核中运行以下 C++ 程序时，我得到一个不正确的条件评估。有人能告诉我这里潜在的问题是什么吗？

```
#include <stdio.h>

int main() {
   int newmax = 1;
   if ((newmax + 0.0) > 256) {
       printf("\nShouldn't be here\n");
   } else {
       printf("\nShould be here\n");
   }
} 
```

编译：

```
powerpc-linux-g++ -msoft-float -c floating.cxx
powerpc-linux-g++  -o floating floating.o 
```

目标系统中的输出：

```
[linux:/]$ ./floating
Shouldn't be here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T11:36:43.013

您还应该在链接时指定 -msoft-float 给我们一个带有 -S 标志的反汇编：powerpc-linux-g++ -msoft-float -c floating.cxx -S -o floating.s

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T06:22:14.370

首先，为什么禁用硬件浮点？

由于这种类型的转换可能会以不正确的顺序执行。

```
(double)1 = 0x3FF0000000000000
(float) 1 = 0x3F800000 
```

这是你的条件。

```
if ((newmax + 0.0) > 256) 
```

在您的情况下：1）newmax 转换为浮动或双倍；2）加0.0；3) 将值转换回 int。

这取决于您的机器，但 int 通常是 32 位值。要检查它，您可以使用：

```
int i;
printf("%d", sizeof(i)); 
```

无论如何，回到你的问题，在计算值转换为 int 之后，你会得到很大的正数。在您的情况下，我会打印它/或不与 0x100 比较，而是与

0x3F800000, 0x3FF0000000000000, 0x3FF00000

要找出发生了什么，但拆卸是最好的选择。

可能它没有那么有帮助，但这只是我的想法，发生了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T14:49:24.657

这可能是从编译器错误到汇编器错误到链接器错误到内核错误的任何内容。正如其他人已经指出的那样：如果您使用 -S 选项提供编译输出，则可以验证（或排除）编译器错误 - 这是此错误的最可能来源。如果不是编译器错误，浮点仿真的内核错误将是下一个可能的问题根源。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-27T05:53:28.720

代码 newmax + 0.0 中的语句产生浮点或双精度结果，但与整数值进行比较。

因此这个错误。

试试这个，

```
int i=1;
printf("%d",(i+0.0)); 
```

无论 i 的值是多少，每次都会得到结果 0。然而，

```
int i=1;
printf("%f",(i+0.0)); 
```

这产生 1.0000

# android - 在android中设置通知的最佳方法是什么

> ID：15045353
> 
> 赞同：0
> 
> 时间：2013-02-23T20:34:08.087
> 
> 标签：android, notifications

我正在制作一个应用程序来提醒一个接近 100 个用户的论坛。每次用户提出问题时，应用程序都需要为在他关闭的论坛中发生的所有用户发送通知，这将是同时发送的大量通知。
有谁知道在android中设置这种通知的最佳方法是什么？也许每次数据库更新时，或者每 3 分钟更新一次用户应用程序。我需要用户尽快收到通知。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T20:51:22.847

通知可以大致分为推送通知和拉取通知两类。

推送：这将需要基于事件的服务器操作，检查 Google Cloud Messaging

拉取：您在设备上运行服务并在一定时间间隔后继续 ping 服务器以获取数据。

在您的场景中，如果所需的通知不是实时的，您可能希望使用 Pull 通知，尽管间隔时间更长，例如 10 分钟。间隔时间越短，用户的电池和数据费用就越多。如果需要实时通知，您可以使用 Push。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T20:53:13.483

如果您可以访问网络资源，您可以使用 GCM（Google Cloud Messaging，[http://developer.android.com/google/gcm/index.html](http://developer.android.com/google/gcm/index.html)）将消息推送到您的 android 客户端。所以它不会像拉模式那样消耗太多的能量。

如果还没有，最好的方法是按一定时间间隔检索数据并通知用户数据更改。您也可以仅检索标题`Content-Length`并与以前的值进行比较以防止加载所有页面

# backbone.js - 骨干路由和视图状态

> ID：15045362
> 
> 赞同：0
> 
> 时间：2013-02-23T20:34:56.690
> 
> 标签：backbone.js, backbone-routing

为可能表述不当的标题道歉。骨干网新手。

我在思考如何处理与视图相关的路线时遇到了麻烦。基本上我有一个视图（我们称之为`ListView`），根据它，使用不同的模板进行`viewMode`渲染。`ItemViews`它看起来像这样：

```
var ListView = Backbone.View.extend({

    // Cache a bunch of templates here

    viewMode: 'list', // Default is list

    render: function() {

        switch(this.viewMode) {
            case 'list':
                // Render ItemView based on list template
                break;

            case 'gallery':
                // Render ItemView based on gallery template
                break;

        }

        // Render all items in list
        this.collection.each(function(model, index) {
            new ItemView(); // Maybe pass viewMode as a parameter
        });

    }

}); 
```

我的目标是，每当`ListView`使用`viewMode`“列表”或“画廊”时，这应该反映在地址栏中，同样手动输入或单击指向例如**mysite.com/page.html#items/list**或**#items的链接/gallery**应该呈现相同的结果。

有没有办法使这个过程自动化，或者以其他方式解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:04:18.063

认为您的路由器将类似于：

```
var yourRouter = Backbone.Router.extend({

    routes: {
        "items/list":    "showList",
        "items/gallery": "showGallery"
    },

    showList: function() {
        listView.viewMode = "list"
        listView.render();
    }

    showGallery: function() {
        listView.viewMode = "gallery"
        listView.render();
    }

}); 
```

然后在您的视图事件中，您可以调用`navigate`路由器的方法。这将更新地址栏。

`yourRouter.navigate("items/list")`

# c - 在 Raspberry Pi 上为 C 设置 i2c？

> ID：15045367
> 
> 赞同：5
> 
> 时间：2013-02-23T20:35:20.277
> 
> 标签：c, raspberry-pi, i2c

我正在为用 C 编写的应用程序设置 i2c，但我找不到任何方法。我正在使用 LXDE 在 Debian 6 上运行 model-b Raspberry Pi。谁能告诉我如何设置 i2c 以便我可以在 C 应用程序中使用它？

感谢您提前提供任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T06:12:49.370

我一直在寻找类似的信息，发现了一些 i2c 教程，一个在[adafruit 教程](http://learn.adafruit.com/category/raspberry-pi)中，另一个在[Guy Carpenter 的 Gaugette 博客](http://guy.carpenter.id.au/gaugette/)中。我还没有到实际使用它的阶段，所以我不能保证它们的完整性，但它们似乎是一个好的开始。

*   [为 I2C 配置您的 Pi](http://learn.adafruit.com/adafruit-16-channel-servo-driver-with-raspberry-pi/configuring-your-pi-for-i2c)
*   [在 Raspberry Pi 上使用 I²C 的模拟仪表](http://guy.carpenter.id.au/gaugette/blog/2012/09/14/i2c-with-raspberry-pi/)
*   [树莓派的 I2C 安装](http://www.skpang.co.uk/blog/archives/575)。我认为只有在不使用包含它的 AdaFruit 的[Occidentalis](http://learn.adafruit.com/adafruit-raspberry-pi-educational-linux-distro/overview)版本时才有必要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-13T09:16:01.410

试试这个 ：

[Raspberry Pi 的 C GPIO 接口库](http://wiringpi.com/)

它提供了用于处理 Raspberry 上的 GPIO 端口的 API，包括 I2C 接口的专用功能。我一直在使用它来读取温度传感器的测量值，它运行良好（STCN75 连接到 RPi rev. B）。

您可以在作者的网站上找到示例和说明。项目在公共 Git 存储库上经常维护和更新。

# ruby-on-rails - 使用环境变量进行 Redmine 电子邮件配置

> ID：15045369
> 
> 赞同：1
> 
> 时间：2013-02-23T20:35:36.500
> 
> 标签：ruby-on-rails, email, environment-variables, redmine

[我已经根据 redmine wiki](http://www.redmine.org/projects/redmine/wiki/EmailConfiguration)中的说明在 redmine 上配置了电子邮件，一切正常。以下是我的 config/configuration.yml 文件的内容：

```
production:
delivery_method: :smtp
 smtp_settings:
    address: "smtp.sendgrid.net"
    port: 587
    authentication: :plain
    domain: "heroku.com"
    user_name: my_email@gmail.com
    password: my_password 
```

但是我正在尝试使用环境变量代替 my_email@gmail.com 和 my_password ，如下所示：

```
production:
  delivery_method: :smtp
  smtp_settings:
    address: "smtp.sendgrid.net"
    port: 587
    authentication: :plain
    domain: "heroku.com"
    user_name: <%= ENV['SENDGRID_USERNAME'] %>
    password: <%= ENV['SENDGRID_PASSWORD'] %> 
```

当我尝试使用配置文件中的环境变量发送测试电子邮件时，redmine 给出此错误：

> '发送邮件时发生错误（535 身份验证失败：用户名/密码错误）'。

所以我猜 erb 片段没有被评估（我已经仔细检查了环境变量的值）。

我已经搜索了一个解决方案但结果是空的，有没有人对我应该如何在 redmine 中配置电子邮件有任何建议，这样我就不会在配置文件中公开我的 sendgrid 凭据？

或者，如果有人可以告诉我直接使用凭据而不存在环境变量不是安全风险，那也可以解决我的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-26T06:18:44.733

我两周前回答过这个问题，马上就被别人删了。所以我不确定是否有人会再次删除这个答案以防止其他人知道如何解决这个问题。祝你好运！

我遇到了同样的问题，这篇文章 [在 heroku 上的 redmine 中设置邮件](http://ascendonce.com/note/show/194)解决了我的问题。

这个想法是将设置从 移动`config/configuration.yml`到`config/environments/production.rb`并使用 Ruby 代码进行设置。由于`ENV['key']`由 处理`erb`，我想`configuration.yml`不是那样处理的。也许有一些安全问题？

所以在你的情况下，你应该将这些代码添加到`config/environments/production.rb`如下，

```
ActionMailer::Base.smtp_settings = {
  :address        => 'smtp.sendgrid.net',
  :port           => '587',
  :authentication => :plain,
  :user_name      => ENV['SENDGRID_USERNAME'],
  :password       => ENV['SENDGRID_PASSWORD'],
  :domain         => 'heroku.com'
}
ActionMailer::Base.delivery_method = :smtp 
```

并从中删除代码`config/configuration.yml`并使其看起来像这样，

```
default:
  # Outgoing emails configuration (see examples above)
  email_delivery:
    delivery_method: :smtp 
```

# c++ - 头文件的多次包含

> ID：15045370
> 
> 赞同：0
> 
> 时间：2013-02-23T20:35:49.300
> 
> 标签：c++

我有`A.cpp`并且`B.cpp`两者都包含头文件`header.h`。

后来两者`A.cpp`和`B.cpp`都包含在`main.cpp`.

这在编译时会导致错误，`main.cpp`说头文件`header.h`已被包含两次。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T20:38:27.917

您应该将头文件包围在

```
#ifndef MYFILE_H
#define MYFILE_H

// Contents of your file

#endif 
```

这些被称为包括警卫。

第二点：你不应该包含 .cpp 文件，只包含 .h 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T20:37:55.753

使用[包括警卫](http://en.wikipedia.org/wiki/Include_guard)。在您的标题中，例如：

```
// Header.h
#ifndef HEADER_H_
#define HEADER_H_

// code from original header.h

#endif 
```

并且不要`.cpp`在其他文件中包含`.cpp`文件。仅包括必要的标题。

**编辑**如果头文件来自第 3 方库，并且没有包含保护，我会非常怀疑该库。我会放弃它。但是，您可以制作自己的标头，包括包含保护中的库标头：

```
// FixedHeader.h
#ifndef HEADER_H_
#define HEADER_H_

#include "header.h"

#endif 
```

然后`#include "FixedHeader.h"`。但我会放弃图书馆，认真的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T20:52:07.913

如果您无法修改头文件以包含警卫，则有 3 种可能的解决方案（从好到坏排序）：

1 不要使用那些垃圾。
2 使用包装器 my_header.h

```
#ifndef MY_HEADER_H
#define MY_HEADER_H
#include <header.h>
#endif // MY_HEADER_H 
```

在代码中包含 my_header.h 而不是 header.h

3 在 .cpp 文件中使用警卫

```
 #ifndef HEADER_H  
 #define HEADER_H  
 #include <header.h>  
 #endif // HEADER_H 
```

不过，您必须保持一致并在任何地方使用相同的防护装置（这就是解决方案 3 的原因）

# java - 删除单词中等于单词中最后一个符号的所有符号

> ID：15045371
> 
> 赞同：0
> 
> 时间：2013-02-23T20:35:51.450
> 
> 标签：java, string

如何删除单词中等于单词中最后一个符号的所有符号？例如：单词是“alphabeta”，返回单词必须是“lphbet”。

```
private static StringBuilder deleteAllChars(StringBuilder arr, String a)
{
    StringBuilder tmp=new StringBuilder();
    for(int i=0;i<arr.length();i++)
    {
        tmp = arr.deleteCharAt(arr.indexOf(a));
    }
    return tmp;
} 
```

但是这个功能不好用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T20:37:46.083

使用[**字符串#replace()**](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)

```
String str="alphabeta";
System.out.println(str.replace(str.substring(str.length()-1), "")); 
```

* * *

```
Output:   lphbet 
```

# assembly - 什么在操作系统中强制执行内存保护？

> ID：15045375
> 
> 赞同：4
> 
> 时间：2013-02-23T20:36:26.150
> 
> 标签：assembly, memory, operating-system, cpu-architecture, mmu

一般来说，我知道一个进程无法写入具有不允许写入的保护的内存（在其地址空间中）。但是什么检查进程是否可以做到这一点？是否有任何汇编指令通过操作系统？它是如何工作的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-23T20:47:09.673

在大多数现代 CPU（Intel x86，大多数 ARM 版本）中，是 CPU 本身进行检查。CPU 在其中一个寄存器中存储数据结构的地址，该地址指定存储器的布局（“页表”）——具体来说，哪些地址是可读的，哪些是可写的，哪些是可执行的。CPU 中的每个内存访问操作都会根据页表进行检查。

当程序尝试对相应页表条目不允许的内存位置执行某些操作时，CPU 会生成异常（中断），并且操作系统会获得控制权。进一步的操作取决于操作系统。一种常见情况涉及操作系统显示错误消息并终止有故障的程序。不过，不一定。例如，页面交换（将内存写入磁盘上的页面文件并在需要时回读）通过相同的机制实现。

页表由操作系统维护，并且（通常）对用户代码不可见。操作系统中的相关部分取决于硬件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T20:39:29.077

页表，它们包含当前执行进程的内存空间的所有信息。当您尝试通过写入来访问只读内存或访问不属于您的内存时，处理器无法找到映射（或看到您无法写入）并向操作系统发出页面错误. 然后操作系统决定它是否是写入页面上的副本，您访问的页面是否完全属于您但尚未映射，或者您是否只是访问了坏空间并相应地处理它（通常会以段错误杀死进程如果您访问不良空间）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-23T20:40:20.747

当硬件支持这一点时，通常在描述分配的内存块的信息中会有一个位，指示是否可以执行该内存块。

在 Intel 处理器上，这称为 NX（从不执行）位，而 AMD 称为 XD（禁用执行）位。

> NX 位特指页表中64 位条目的第63 位（即最高有效位）。如果该位设置为 0，则可以从该页面执行代码；如果设置为 1，则无法从该页面执行代码，并且假定存在于该页面的任何内容都是数据。

[http://en.wikipedia.org/wiki/NX_bit](http://en.wikipedia.org/wiki/NX_bit)

该位由操作系统在将可执行代码加载到内存后设置。它只能由特权代码（例如操作系统或驱动程序）设置。

也可以看看：

[http://en.wikipedia.org/wiki/Executable_space_protection](http://en.wikipedia.org/wiki/Executable_space_protection)

# ruby-on-rails - Twitter个人资料照片是否应该缓存在本地服务器上，以进行前端优化？

> ID：15045379
> 
> 赞同：0
> 
> 时间：2013-02-23T20:36:58.737
> 
> 标签：ruby-on-rails, ruby-on-rails-3, optimization, twitter

创建 Twitter 应用程序时。大多数应用程序都会热链接 Twitter 个人资料照片。但是，如果一个页面显示了几张 20-40 个人资料图片照片。Firebug（网络选项卡）报告所有这些照片的加载时间为 30-50 毫秒（每张）。把这一切加起来，你会得到几秒钟的时间。

用于页面渲染和优化目的。Twitter 个人资料照片是否应该缓存/存储在本地服务器上？

在旁注中。我了解过时照片的挑战（因为它们将被缓存）。但这不是现在的重点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:40:53.940

您如何看待在本地服务器上缓存它们以减少网络请求的数量？

如果您确实将它们缓存在本地服务器上，那么您仍然需要将它们提供给客户端，在这种情况下，您可以内联图像以减少请求数量，但这会增加下载大小并破坏缓存。

从 twitter 检索它们的一个优点是它们将来自 twitter 的 CDN，因此可能比自己服务它们具有更低的延迟。

# java - 为什么我的第二个线程没有运行？

> ID：15045383
> 
> 赞同：-3
> 
> 时间：2013-02-23T20:37:22.650
> 
> 标签：java, multithreading, synchronization, countdownlatch

我有以下程序，我想让吸烟者等待代理的 3 个线程。我正在尝试使用 CountDown 闩锁来实现这一点。

```
public void runThreads(){
            int numofTests;
            Scanner in = new Scanner(System.in);
            System.out.print("Enter the number of iterations to be completed:");
            numofTests = Integer.parseInt(in.nextLine());///Gets the number of tests from the user
            Agent agent = new Agent();
            Smoker Pam = new Smoker ("paper", "Pam");
            Smoker Tom = new Smoker ("tobacco", "Tom");
            Smoker Matt = new Smoker ("matches", "Matt");

            for(int i = 0; i < numofTests; i++){  //passes out as many rounds as the user specifies
                Pam.run();
                Tom.run();
                Matt.run();
                agent.run();
            } 
```

出于某种原因，当我使用以下代码运行 Pam.run 时，它只是在latch.await 上冻结，而我的其余线程不运行。所以我的问题是我怎样才能正确地做到这一点，以便前 3 名吸烟者等待latch.countdown(); 由代理线程调用。

```
 public class Smoker implements Runnable{
        String ingredient;   //This is the one ingredient the smoker starts out with
        String name;
        public static CountDownLatch latch = new CountDownLatch(1);
        int numOfSmokes = 0; //Total number of cigs smoker smoked;

        public Smoker(String ingredient1, String Name)
        {
            ingredient1 = ingredient;
            name = Name;
        }

        public void run(){
            try {
                System.out.println(this.name + " waits on the table...");
                latch.await();///waits for agent to signal that new ingredients have been passed out
            } catch(InterruptedException ex) {
                Thread.currentThread().interrupt();
            }
            System.out.println(this.name + " stops waiting and checks the table...");
            checkTable();
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T20:38:43.620

您应该创建一个`Thread`并将`Runnable`实例作为参数传递。此外，您应该调用该`start`函数，而不是`run`. 将您的代码更改为

```
(new Thread(Pam)).start();
//similar for others... 
```

信息：[定义和启动线程](http://docs.oracle.com/javase/tutorial/essential/concurrency/runthread.html)

# php - PHP MYSQL 多维数组

> ID：15045385
> 
> 赞同：2
> 
> 时间：2013-02-23T20:37:24.940
> 
> 标签：php, mysql

我在尝试从两个单独的 MySQL 选择中创建多维数组时遇到了很大的麻烦。我整天都在这里和谷歌搜索，最终不得不承认失败并寻求帮助（我也是新手这没有帮助！！！）。

我有两个表，一个包含每个 id 的单行结果，另一个可以包含一个 id 的多行。我想要做的是将两者组合成一个多维数组。

我的代码（可能很差）如下所示：

```
require 'php/phpConnection.php';

$sqlString1 = mysql_query("SELECT id FROM supportstaff_section1_a");

$firstArray = array();
$secondArray = array();

while ($r = mysql_fetch_assoc($sqlString1)) {
    $applicantID = $r['id'];
    $sqlString2 = mysql_query("SELECT educationalname FROM supportstaff_section5 WHERE id = '$applicantID'");

    while ($x = mysql_fetch_assoc($sqlString2)) {
        $secondArray[] = $x;
    }
    $firstArray[] = $r + $secondArray;
    $secondArray  = array();
}
print json_encode($firstArray);
mysql_close($con); 
```

结果是这样的：

```
[{"id":"8m8wwy","0":{"educationalname":"GCSE - English"},"1":{"educationalname":"GCSE - Maths"}},{"id":"wiL7Bn"},{"id":"zAw6M1"}] 
```

但我**认为**它需要看起来像这样：

```
[{"id":"8m8wwy","Array2":"[{"educationalname":"GCSE - English"},{"educationalname":"GCSE - Maths"}]"},{"id":"wiL7Bn"},{"id":"zAw6M1"}] 
```

无论如何，如何将我的第二个 SQL Select 插入到每个 ID 的第一个 SQL Select 中。

感谢您的任何建议/帮助。

**编辑**

取自 W3Schools.com：

```
Array
(
    [Griffin] => Array
    (
    [0] => Peter
    [1] => Lois
    [2] => Megan
    )
[Quagmire] => Array
    (
    [0] => Glenn
    )
[Brown] => Array
    (
    [0] => Cleveland
    [1] => Loretta
    [2] => Junior
    )
) 
```

我试图让它像上面那样工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T21:01:30.777

你需要在这里有点创意。像下面这样的东西可以作为一个连接和多维数据：

```
<?php
  require 'php/phpConnection.php';

  // ======================================================================
  // Create a join query (way faster than several separate ones!)
  $sqlquery =
    "SELECT SSSA.id, SSS5.educationalname" .
    " FROM supportstaff_section1_a SSSA" .
      " LEFT OUTER JOIN supportstaff_section5 SSS5 ON SSS5.id = SSSA.ID";

  // ======================================================================
  // Run the query and get our results
  $resultarray = array();
  if ($resource = mysql_query($sqlquery)) {
    while ($curarray = mysql_fetch_assoc($resource)) {
      // Create an array, if it doesn't exist
      if (!isset($resultarray[$curarray["id"]]))
        $resultarray[$curarray["id"]] = array();

      // Add to the array, if not null
      $curstring = (string) $curarray["educationalname"];
      if ($curstring != "")
        $resultarray[$curarray["id"]][] = $curstring;
    }
    mysql_free_result($resource);
  }

  // ======================================================================
  // Convert from a keyed array to a standard indexed array (0, 1, 2, etc.)
  $finalarray = array();
  foreach ($resultarray as $id => & $data) {
    // Start with just ID
    $newarray = array(
      "id" => $id
    );

    // Get the data, if we have any
    if (count($data))
      $newarray["educationalnames"] = & $data;

    // Add to our final array and clear the newarray
    $finalarray[] = & $newarray;
    unset($newarray);
  }

  // ======================================================================
  // Get the JSON of our result
  $jsonresult = json_encode($finalarray);

  // ======================================================================
  // Echo it to test
  echo $jsonresult;

  // ======================================================================
  // Close the database
  mysql_close($con);
?> 
```

生成的 $jsondata 看起来像这样（但当然不是那么复杂）：

```
[
  {
    "id": "8m8wwy",
    "educationalnames": ["GCSE - English", "GCSE - Maths"]
  },
  {
    "id": "wiL7Bn"
  },
  {
    "id": "zAw6M1"
  }
] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T20:46:22.557

如果您有来自第一个数组的 ID，则可以在第二个数组中检查具有此 ID 的键/值。

如果你想得到你应该使用的密钥

```
array_key_exists($string) 
```

如果你想获得你应该使用的价值

```
in_array($string) 
```

您可以使用 foreach 循环来执行此功能！

# c# - 谓词委托可以简单地称为布尔委托吗？

> ID：15045386
> 
> 赞同：1
> 
> 时间：2013-02-23T20:37:24.650
> 
> 标签：c#, delegates, boolean, predicate

代表们，是的，我正在尝试理解这个概念的使用，它有助于在 C# 中解决哪些问题。到目前为止，我真的很喜欢它提供代码的解耦工具。然后我遇到了谓词代表。根据[this MSDN library article，它*表明*它们是接受任何数据类型参数并返回bool类型值的委托](http://msdn.microsoft.com/en-us/library/bfcke1bz.aspx)......。

它还说，这个特定的委托接受泛型，`<T>`可以说是任何类型......

那么说 Predicate Delegate 只是一个 Boolean Delegate 是否正确？这意味着任何具有布尔返回类型的委托？或者是否有更多用于指定不同名称：谓词代表..？

例如

```
delegate bool BooleanDelegate(anytype parameter);
BooleanDelegate bd = new BooleanDelegate(yesno);     
//assuming parameter type is int
MessageBox.Show(bd.Invoke(2).ToString());

public bool yesno(anytype parameter)
{      
   If (parameter == 2)
    {
       return true;
    }
   Else
    {
       return false;
    }     
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T20:45:56.850

一般来说，谓词是一个布尔值函数。所以是的，任何返回布尔值的函数都是谓词。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T20:57:46.617

是的，a`Predicate<T>`代表一个方法，它接受一个类型的参数`T`，并返回`bool`。例如， a`Predicate<string>`表示一个接受 a`string`并返回 a的方法`bool`。

例如：

```
Predicate<string> p = String.IsNullOrEmpty;  // this static method has the correct signature and return type 
```

你可以说

```
bool answer = p("your words"); 
```

泛型意味着`T`在不同的情况下可以有不同的含义。因此，您不必制作一大堆委托类型，例如`StringPredicate`, `DateTimePredicate`,`BicyclePredicate`等，但您可以使用`Predicate<DateTime>`, `Predicate<Bicycle>`, ...

A`Predicate<T>`具有与 a 相同的签名和返回类型`Func<T, bool>`（在 .NET 版本 3.5 中引入）。两者都是逆变的`T`。

你：

> 那么说 Predicate Delegate 只是一个 Boolean Delegate 是否正确？

它的签名必须是正确的。必须只有一个参数（不是零，也不是两个或更多）。参数不能是`ref`or `out`。参数必须具有正确的类型`T`（但 的含义`T`可能不同）。例如，接受 a 的方法`Bicycle`可能是 a `Predicate<Bicycle>`，但不是 a `Predicate<DateTime>`。

# html - 如何在不影响下方元素布局的情况下将 HTML 元素放置在另一个元素之上？

> ID：15045388
> 
> 赞同：5
> 
> 时间：2013-02-23T20:37:26.797
> 
> 标签：html, css, layout

一般来说，HTML 布局是基于流的。每个元素都被定位在它之前的元素之后，或者在它的右边或者在它的下面。当然，也有很多例外，你可以通过玩弄风格来获得，但即便如此，如果你改变了某些东西的顺序，大多数东西都会围绕它“流动”并为它腾出空间。

但是偶尔我会看到一些行为非常不同的东西，例如带有浮动在屏幕中间的“对话框”的页面，它们不受它们作为父级的 div 的尺寸的限制并且不会取代他们周围的其他布局元素。

我试图找出一种方法来做类似的事情，但不完全相同。我有一张用于显示网格的表格（是的，实际上正确使用了表格），我想将图像放在一个网格单元格的顶部。我不能把它*放在*单元格中，因为它比单元格大，我不想拉伸我的网格，但我希望它始终显示在相对于网格的相同位置，即使浏览器窗口滚动或调整大小。

我认为必须有某种方法可以做到这一点。如果我在其中一个单元格上放置一个 ID 或类`<TD>`，我如何创建一个`<Image>`不属于它的单元格，`<TD>`甚至不`<TABLE>`属于它的单元格，但始终将自身定位在该`<TD>`单元格的顶部而不移动任何内容或影响其布局?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T21:16:33.603

为了扩展 CJGreen 和 Napolux 的建议，您仍然可以将图像放在表格单元格中，但绝对定位。

[编辑] 由于定义表格单元格的位置被认为是非法的（因此被 Firefox 忽略），您可以将每个单元格的内容包装`<td>`在一个`<div>`元素中（最好使用 JS，这样您就不必进行大量更改）然后设置`<div>`位置相对：

**CSS：**

```
table td > div {
    position: relative;
}
table td > div img {
    position: absolute;   
    z-index: 999;
} 
```

**JS：**

```
$(document).ready(function() {
   $("td").wrapInner('<div />'); 
}); 
```

在此处查看（更新的）小提琴 - [http://jsfiddle.net/teddyrised/qyu3g/](http://jsfiddle.net/teddyrised/qyu3g/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T20:47:44.500

如果你使用

```
table {position:relative;} 
```

那么你可以使用：

```
table img {
    position:absolute;
    top: #px;
    left: #px;
} 
```

这会将图像偏移到包含表中的特定位置，并将其从围绕它的表的其余部分流中取出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T20:51:16.867

如果我理解正确，您需要将`offset`属性与`position:absolute`.

绝对位置使您的图像脱离流程，偏移量可以为您提供要覆盖的元素的位置（问题中的 TD）。

有了偏移量（TD 页面左侧和顶部的 px），您可以将图像移动到正确的位置。

看这里：http: [//jsfiddle.net/jrUsM/](http://jsfiddle.net/jrUsM/)

[jQuery 文档](http://api.jquery.com/offset/)很好地解释了它。

# r - R抑制网格表中的行名

> ID：15045396
> 
> 赞同：15
> 
> 时间：2013-02-23T20:38:07.093
> 
> 标签：r, gridextra

我可以用 gridExtra 生成一个表格：

例如：

```
 library(gridExtra)
    grid.table(head(iris)) 
```

但这会产生一个 1:6 的行名列。有没有办法能够抑制 rownames 列，使其不会出现在表中？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-23T20:47:35.820

只需添加`rows = NULL`：

```
grid.table(head(iris), rows = NULL) 
```

![在此处输入图像描述](../Images/77b771710c18d29ab3b3a0324983ccd2.png)

# c - 链表中的节点交换

> ID：15045398
> 
> 赞同：0
> 
> 时间：2013-02-23T20:38:15.553
> 
> 标签：c, nodes

我是 C 新手。我正在尝试使用链表交换两个节点。不知道出了什么问题。它给了我一个错误说

> “temp”未声明。

另外，我可以在这段代码中进行哪些更改，不仅可以交换 char，还可以交换 int？

```
struct lnode {
int some_line;
int count;
char* some_word;
struct lnode* next;
   };

   void swapNodes(struct lnode** head, struct lnode* n1, struct lnode* n2);

   int main()
   {

     struct lnode* head = NULL;
     struct lnode* node0 = newCharNode(&head,"this is");
     struct lnode* node1 = newCharNode(&head,"programming");
     swapNodes(&head,node0,node1);
     getchar();
     return 0;
   }

   void swapNodes(struct lnode** head, struct lnode* n1, struct lnode* n2)
  {
    struct lnode* current = (*head);
    struct lnode* temp;

        while((current != NULL) && (current->next != NULL))
    {
           temp->some_word = n1->some_word;
       n1->some_word = n2->some_word;
       n2->some_word = temp->some_word;
    }
       printf("%s %s",n1,n2);
       current = (current->next)->next;
  }

   struct lnode* newCharNode(struct lnode** head, char* myword) {
   struct lnode* new_node = (struct lnode*) malloc(sizeof(struct lnode));
   new_node ->some_word = myword;
   new_node ->next = (*head);
   (*head) = new_node;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:44:10.320

在无效交换节点（）

```
temp->some_word 
```

这里 temp 只是一个未初始化的指针，您不能进行该分配。

# multithreading - 当perl中的“if”写在行尾时，它的范围是什么

> ID：15045402
> 
> 赞同：4
> 
> 时间：2013-02-23T20:38:32.940
> 
> 标签：multithreading, perl, locking

这个问题实际上来自使用线程。我们知道，在 perl 线程中，我们有一个名为 lock 的函数，并且根据 cpan [http://perldoc.perl.org/threads/shared.html](http://perldoc.perl.org/threads/shared.html)： lock 在变量上放置一个咨询锁，直到锁超出范围。好的，如果我们这样写：

```
1 sub foo{
2   lock($obj) if threads::shared::is_shared($obj); #equivalent to if(threads::shared::is_shared($obj)) {lock($obj);}  ?
3   ... rest of the code
4   ... more code
5 } 
```

所以锁定的范围是从第 2 行到第 4 行还是只是第 2 行？if "if" 语句添加一个块，然后 lock($obj) 可能只是第 2 行，请参阅我的 #comments

* * *

这个问题实际上得到了回答，但我想补充一些发现：

我发现无论你怎么写：

```
lock($ojb) if threads::shared::is_shared($obj); 
```

或者

```
if (threads::shared::is_shared($obj)) {
   lock($ojb);
} 
```

锁的范围是相同的——整个 foo() 子例程。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T20:45:10.623

`if`语句修饰符*不会*在它适用的语句周围放置隐式块。所以锁的范围（如果它被应用的话）就是你的子程序的整个其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:12:33.787

根据实验结果，我发现无论你怎么写：

```
lock($ojb) if threads::shared::is_shared($obj); 
```

或者

```
if (threads::shared::is_shared($obj)) {
   lock($ojb);
} 
```

锁的范围是相同的——整个 foo() 子例程。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-23T20:41:47.457

从您在问题中链接的[文档](http://perldoc.perl.org/threads/shared.html)中：

```
 my $var :shared;
  {
      lock($var);
      # $var is locked from here to the end of the block
      ...
  }
  # $var is now unlocked 
```

所以锁一直持续到块的末尾。

# maven - Maven - 自定义输出项目结构

> ID：15045408
> 
> 赞同：2
> 
> 时间：2013-02-23T20:38:49.360
> 
> 标签：maven, module, project, structure

晚安，人们。我已经浪费了一整天的时间来尝试使用 Maven 进行管理。

我有以下项目结构：

```
base-pom.xml
 |-module1
 |  |-module1-resources
 |-module2
 |  |-module2-resources
 |-module3
 |  |module3-resources
 |
 |-general-resources 
```

我正在寻找某种获得以下输出结构的方法：

```
output-folder
 |-libs-folder/3rdrarty-jars
 |-config-folder/general-resources not-packed
 |-module1.jar
 |-module2.jar
 |-module3.jar
 |-module1-resources not-packed
 |-module2-resources not-packed
 |-module3-resources not-packed 
```

还有一件事要提：我的项目模块的类路径应该是这样的：

*类路径：/config-folder module2.jar module3.jar libs/3rdparty_1.jar libs/3rdparty_2.jar libs/3rdparty_3.jar*

我不知道 maven 是否允许拥有如此复杂的输出结构 - 我发现浪费了很多时间的所有样本都没有显示出与我的要求相似的内容。

# android - 字符串值会匹配 sqlitedatabase 中的整数值吗？

> ID：15045409
> 
> 赞同：0
> 
> 时间：2013-02-23T20:39:06.140
> 
> 标签：android, database, string, integer

我有如下查询，`DbEntry.COLUMN_NAME_SCENE_ID`是整数类型。字符串“123”会与 sqlitedatabase 中的整数 123 匹配吗？

```
db.query(DbEntry.TABLE_NAME, new String[]{DbEntry.COLUMN_NAME_MODEL_PATH}, DbEntry.COLUMN_NAME_SCENE_ID+"=?", new String[]{String.valueof(scene_id)}, null, null, null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:49:19.140

它会起作用的。SQLite 在类型方面非常宽松。例如，您可以启动 SQLite 客户端并连接到 SQLite 数据库，然后使用`WHERE`带有字符串值的子句对带有整数字段的表运行查询。它会工作得很好。

# jquery - 如何从下拉有序列表中获取所选项目？

> ID：15045412
> 
> 赞同：1
> 
> 时间：2013-02-23T20:39:23.027
> 
> 标签：jquery, drop-down-menu, html-lists, selected

我想用所选项目列表替换跨度的默认值。

```
<span id="selected-lang">Select your language</span>
<ol class="lang-list">
    <li data-value="en" class="active">
        <a><img src="en.gif" />English</a>
    </li>
    <li data-value="de">
        <a><img src="de.gif" />Deutsch</a>
    </li>
    <li data-value="fr">
        <a><img src="en.gif" />Francais</a>
    </li>
</ol> 
```

我尝试使用 jQuery`.change`但不起作用：

```
$(".lang-list").change(function () {
  var str = "";
  $(".lang-list li.active").each(function () {
        str += $(this).text()+"";
      });
  $("#selected-lang").text(str);
}) 
```

我怎样才能做到这一点？
谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T20:42:11.817

```
$(".lang-list a").click(function () {
    $('ol.lang-list li').removeClass('active');
    $(this).parent().addClass('active');
    $("#selected-lang").text($(this).text());
}) 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/LYBXH/1/)**

# jsf - h:selectOneMenu 与用户定义的对象

> ID：15045420
> 
> 赞同：7
> 
> 时间：2013-02-23T20:40:11.857
> 
> 标签：jsf

我正在尝试实现两个`<h:selectOneMenu/>`

第一个包含类型 1 对象。当用户从该列表中选择一个对象时，`<h:selectOneMenu/>`将显示第二个。

这是我的代码

xhtml

```
<h:form>
<h:selectOneMenu value="#{handler.selectedType1}" valueChangeListener="#{handler.valueChanged}">
    <f:selectItems value="#{handler.types1}" var="type1" itemValue="#{type1.name}" itemLabel="#{type1.name}" />
    <a4j:ajax event="valueChange" render="type2List" execute="@this"/>
</h:selectOneMenu>
<h:selectOneMenu id="type2List" value="#{handler.selectedType2}" rendered="#{not empty handler.selectedType2}">
    <f:selectItems value="#{handler.types2}" var="type2" itemLabel="#{type2.name}" />
</h:selectOneMenu>
</h:form> 
```

托管豆

```
@ManagedBean
@ViewScoped
public class Handler {

    private Type1 selectedType1;
    private List<Type1> types1;
    private Type2 selectedType2;
    private List<Type2> types2;

        //getters, setters

        public void valueChanged(ValueChangeEvent event) {
        variants.clear();
        if (event.getNewValue() != null) {
            System.out.println("new value: " + event.getNewValue());
                        // Fill the second list
        }
    }
} 
```

Type1 和 Type2 用于自定义类。他们的名字属性是一个字符串。

问题是当我从第一个列表中选择一个元素时，我得到

```
 24 févr. 2013 12:15:26 com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer getConvertedValue
GRAVE: Could not instantiate converter for type class com.flightfaq.beans.business.AircraftType: java.lang.NullPointerException
24 févr. 2013 12:15:26 com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer getConvertedValue
GRAVE: 
java.lang.NullPointerException
    at com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getConvertedValue(HtmlBasicInputRenderer.java:129)
    at com.sun.faces.renderkit.html_basic.MenuRenderer.convertSelectOneValue(MenuRenderer.java:201)
    at com.sun.faces.renderkit.html_basic.MenuRenderer.getConvertedValue(MenuRenderer.java:318)
    at javax.faces.component.UIInput.getConvertedValue(UIInput.java:1030)
    at javax.faces.component.UIInput.validate(UIInput.java:960)
    at javax.faces.component.UIInput.executeValidate(UIInput.java:1233)
    at javax.faces.component.UIInput.processValidators(UIInput.java:698)
    at org.richfaces.context.PartialViewExecuteVisitCallback.visit(PartialViewExecuteVisitCallback.java:55)
    at org.richfaces.context.BaseExtendedVisitContext.invokeVisitCallback(BaseExtendedVisitContext.java:321)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1612)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at javax.faces.component.UIForm.visitTree(UIForm.java:371)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623)
    at org.richfaces.context.ExtendedPartialViewContextImpl.executeComponents(ExtendedPartialViewContextImpl.java:237)
    at org.richfaces.context.ExtendedPartialViewContextImpl.processPartialExecutePhase(ExtendedPartialViewContextImpl.java:217)
    at org.richfaces.context.ExtendedPartialViewContextImpl.processPartial(ExtendedPartialViewContextImpl.java:196)
    at javax.faces.component.UIViewRoot.processValidators(UIViewRoot.java:1167)
    at com.sun.faces.lifecycle.ProcessValidationsPhase.execute(ProcessValidationsPhase.java:76)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.tomee.catalina.OpenEJBValve.invoke(OpenEJBValve.java:45)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:680) 
```

我猜想第一个选择元素上的 valueChangeListener 属性试图触发我的托管 bean 方法“valueChanged”。但是在到达它之前就停止了（我在里面打印了一些东西，并且在抛出异常之前它没有显示在java控制台中）

问题是否与 Type1 和 Type2 不是 Strings 的事实有关？我怎样才能解决这个问题 ？

* * *

编辑：在 BalusC 的回答之后，这是我的代码：

xhtml

```
 <h:form>
        <h:selectOneMenu value="#{missionHandler.selectedAircraftType}" converter="#{missionHandler.acTypeConverter}">
            <f:selectItems value="#{missionHandler.aircraftTypes}" var="type" itemValue="#{type}" itemLabel="#{type.typeOACI}" />
            <f:ajax listener="#{missionHandler.changeSelectedAircraftType}" render="variantsMenu"/>
        </h:selectOneMenu>
        <h:selectOneMenu id="variantsMenu" value="#{missionHandler.selectedVariant}" converter="#{missionHandler.variantConverter}">
            <f:selectItems value="#{missionHandler.variants}" var="variant" itemValue="#{variant}" itemLabel="#{variant.commercialName}" />
        </h:selectOneMenu>
    </h:form> 
```

托管豆

```
@ManagedBean
@ViewScoped
public class MissionHandler implements Serializable {

    private static final long serialVersionUID = 2462652101518266609L;

    private Mission mission;

    @EJB
    private AircraftTypeDao aircraftTypeDao;

    @EJB
    private VariantDao variantDao;

    private AircraftType selectedAircraftType;

    private List<AircraftType> aircraftTypes;

    private Variant selectedVariant;

    private List<Variant> variants;

    private AircraftTypeConverter acTypeConverter;

    private VariantConverter variantConverter;

    public MissionHandler() {
        /** Create an empty mission */
        mission = new Mission();
    }

    @PostConstruct
    public void init() {
        aircraftTypes = aircraftTypeDao.findAll();
    }

    public void changeSelectedAircraftType(AjaxBehaviorEvent event) {
        System.out.println("Listener call");
        variants=variantDao.find(selectedAircraftType);
        System.out.println("Listener out");
    }
} 
```

转换器

```
@FacesConverter(forClass=AircraftType.class)
public class AircraftTypeConverter implements Converter, Serializable {

    private static final long serialVersionUID = 7053414108213420057L;

    private final AircraftTypeDao aircraftDao = new AircraftTypeDaoImpl();

    @Override
    public Object getAsObject(FacesContext context, UIComponent component,
            String value) {
        System.out.println("convert to Object " + value);
        AircraftType acType = aircraftDao.find(value);
        System.out.println("got ac type " + acType.getTypeOACI());
        return acType;
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component,
            Object value) {
        System.out.println("convert to String " + value);
        return ((AircraftType) value).getTypeOACI();
    }

}

@FacesConverter(forClass=Variant.class)
public class VariantConverter implements Converter, Serializable {

    private static final long serialVersionUID = 7053414108213420057L;

    private final VariantDao variantDao = new VariantDaoImpl();

    @Override
    public Object getAsObject(FacesContext context, UIComponent component,
            String value) {
        System.out.println("convert to Object " + value);
        Variant variant = variantDao.find(value);
        System.out.println("got variant " + variant.getCommercialName());
        return variant;
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component,
            Object value) {
        System.out.println("convert to String " + value);
        return ((Variant) value).getCommercialName();
    }

} 
```

当我执行此代码时： - 飞机类型列表是从数据库中正确加载的 - 当我选择一个时，它是从字符串正确转换为 AircraftType（感谢转换器）但仅此而已。不调用侦听器方法，也不更新“变体”selectOneMenu

我仍然需要你的帮助:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T11:59:20.547

简短的回答：您需要创建一个在 Java 端使用的对象和HTML/HTTP 端使用的唯一对象[`Converter`](http://docs.oracle.com/javaee/6/api/javax/faces/convert/Converter.html)之间进行转换。`AircrafType``String`

长答案：仔细阅读“null Converter”和[Primefaces selectOneMenu 侦听](https://stackoverflow.com/questions/10601710/primefaces-selectonemenu-listener-not-called-with-objects-other-than-strings/10601865#10601865)[器的转换错误设置值，](https://stackoverflow.com/questions/4734580/jsf-2-selection-combo-box-with-without-conversion-strategy/4735322#4735322)该侦听器未使用 Strings 以外的 Objects 调用。

如果尚未完成，请不要忘记[实施`equals()`和`hashCode()`](https://stackoverflow.com/questions/9069379/validation-error-value-is-not-valid/9069660#9069660)in 。`AircraftType`

* * *

**与具体问题**无关**`valueChangeListener`，这是工作的错误工具。改为使用`<p:ajax listener>`。另请参阅[何时使用 valueChangeListener 或 f:ajax 侦听器？](https://stackoverflow.com/questions/11879138/when-to-use-valuechangelistener-or-fajax-listener/11883021#11883021)以及[如何在更改第一个 selectOneMenu 时加载第二个 selectOneMenu？](https://stackoverflow.com/questions/9171050/how-to-load-second-selectonemenu-on-change-of-first-selectonemenu/9176594#9176594)**

# security - 使用 windows 域名识别 Web 应用用户

> ID：15045422
> 
> 赞同：0
> 
> 时间：2013-02-23T20:40:21.117
> 
> 标签：security, tomcat, web-applications, windows-authentication

我有一个 GWT webapp 在 RedHat 上的 tomcat 7 上运行。所有客户端都驻留在 Intranet 中，并使用 XP 机器上的 IE7 来访问 webapp。

新要求是按用户日志设置。如果用户声称他因为 webapp 而做错了什么，管理员应该能够检查该请求的 webapp 响应。另一个要求（一个非常好的功能）是避免登录/密码屏幕并使用域用户名。

我想我可以让我的管理员为 Tomcat [http://www.tomcatexpert.com/blog/2011/06/22/windows-authentication-apache-tomcat](http://www.tomcatexpert.com/blog/2011/06/22/windows-authentication-apache-tomcat)设置集成 Windows 身份验证。一旦在 Tomcat 上实现了 IWA，我希望我能够从我的 web 应用程序中使用 HTTPServletRequest.getRemoteUser() 访问用户名。

1.  我的假设是对的吗？
2.  还有比这更简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T03:01:29.687

通过 IWA、SPNEGO、Kerberos 等将 Java 容器（如 Tomcat）与 Windows 域集成可能是一项非常复杂的任务，您指向的 Tomcat 指令可能会或可能不会在第一次工作，并且可能还需要更改Windows 环境的配置方式。

一旦该集成正常工作，您的 Web 应用程序将需要在 web.xml 中指定身份验证约束以保护部分或整个 Web 应用程序。尽管如果 Windows 身份验证设置无缝工作，它可能不会提示输入用户 ID，但在 getRemoteUser 将在应用程序中返回任何内容之前，配置是必要的。

# java - 在java中，一次读取一个文件时，如何确定EOF？

> ID：15045424
> 
> 赞同：0
> 
> 时间：2013-02-23T20:40:30.437
> 
> 标签：java, input, eof

我不得不在一段时间内阅读并使用算法对每个字母进行编码，然后将它们打印到另一个文件中。我通常知道要找到文件的结尾，你会使用 readLine 并检查它是否为空。我正在使用缓冲阅读器。无论如何要检查是否有另一个字符要读入？基本上，我怎么知道我刚刚读入了文件的最后一个字符？

我想我可以使用 readline 看看是否还有另一行，如果我知道如何确定我何时处于当前行的末尾。

我发现 File 类有一个名为 size() 的方法，它可以转换文件的字节长度。那会告诉我文件中有多少个字符吗？我可以`while(charCount<length)` 吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-23T20:47:44.487

我不完全明白你想做什么。我猜你可能想逐个字符地读取文件。如果是这样，您可以这样做：

```
FileInputStream fileInput = new FileInputStream("file.txt");
int r;
while ((r = fileInput.read()) != -1) {
   char c = (char) r;
   // do something with the character c
}
fileInput.close(); 
```

[`FileInputStream.read()`](http://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html#read%28%29)`-1`当没有更多字符要读取时返回。它返回 an`int`而不是 a`char`所以强制转换。

请注意，如果您的文件是 UTF-8 格式并包含多字节字符，这将不起作用。在这种情况下，您必须将其包装起来`FileInputStream`并`InputStreamReader`指定适当的字符集。为了简单起见，我在这里省略了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T20:53:47.650

据我了解，如果没有剩余字符，缓冲区将返回 -1。所以你可以写：

```
BufferedInputStream in = new BufferedInputStream(new FileInputStream("filename"));
while (currentChar = in.read() != -1) { 
    //do something 
}
in.close(); 
```

# font-face - 让网页字体在 IE10 中工作

> ID：15045425
> 
> 赞同：1
> 
> 时间：2013-02-23T20:40:31.057
> 
> 标签：font-face, internet-explorer-10

我正在尝试使我的网站与 IE 更兼容（现在为它开发不再是一场噩梦），但我无法让一些网络字体工作。这是我的标记：

`@font-face`句法：

```
@font-face {
    font-family:Roboto Thin;
    font-weight:100;
    font-style:normal;
    src:url(/fonts/ttf/roboto-thin-webfont.ttf) format("truetype"),
        url(/fonts/eot/roboto-thin-webfont.eot) format("embedded-opentype"),
        url(/fonts/svg/roboto-thin-webfont.svg) format("svg"),
        url(/fonts/otf/roboto-thin-webfont.otf) format("opentype"),
        url(/fonts/woff/roboto-thin-webfont.woff) format("woff");
} 
```

CSS文件中的实现：

```
.animation-text {
    font-family:Roboto Thin,Helvetica Neue,Helvetica,Arial,sans-serif;
    font-weight:100;
    font-style:normal;
    text-align:center;
    margin:auto;
    position: absolute;
    background-position: center;
    background-size: contain;
    animation-fill-mode: forwards;
    top: 1px;
}

#design {
    transform-origin:50% 75%;
    font-size:60px;
    color:#ccc;
    height:auto;
    padding-top:540px;
    opacity:0;
    z-index:4;
    animation-name:text;
    animation-delay:3000ms;
    animation-duration:500ms;
    animation-timing-function:ease-out;
} 
```

HTML：

```
<div class="animation-text" id="design">Design</div> 
```

我还在 OS X 下运行的其他四种主要浏览器（Firefox 19、Chrome 25、Safari 6.1、Opera 12）中测试了代码，它们都完美地显示了 Roboto。在 Windows 8 下运行的 IE10 回退到 Arial。不应该包括字体`.eot`的`.otf`版本已经解决了这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T03:49:59.640

尝试引用字体并删除空格，如下所示...（您需要相应地更改路径）

```
@font-face {
    font-family: 'RobotoThin';
    src: url('Roboto-Thin-webfont.eot');
    src: url('Roboto-Thin-webfont.eot?#iefix') format('embedded-opentype'),
         url('Roboto-Thin-webfont.woff') format('woff'),
         url('Roboto-Thin-webfont.ttf') format('truetype'),
         url('Roboto-Thin-webfont.svg#RobotoThin') format('svg');
    font-weight: normal;
    font-style: normal;
}

.animation-text {
    font-family: 'RobotoThin',Helvetica Neue,Helvetica,Arial,sans-serif;
    /* ... other styles ... */
} 
```

# java - Ebean 和多对一建议

> ID：15045427
> 
> 赞同：4
> 
> 时间：2013-02-23T20:41:01.353
> 
> 标签：java, sql, playframework-2.0, ebean

嗨，我可能需要一些帮助来了解我应该如何处理以下问题：

仅供参考，我正在使用 play framework 2.0 和 Ebeans version ~2.7

我有一个模型项目和一个模型报告。一个项目可以有多个报告，但一个报告只能属于一个项目。

这是我的项目模型：

```
@Entity
@Table(name = "Projects")
public class Projects extends Model {
    private static final long serialVersionUID = -3343133304437498550L;

   @Id
   public long id;

   @NotNull
   @Size(min = 1, max = 255)
   public String name;

   @NotNull
   @Size(min = 1, max = 255)
   public String description;

   @Formats.DateTime(pattern = "dd/MM/yyyy")
   public Date created_at = new Date();

   public static Finder<Long, Projects> find = new Finder<Long, Projects>(Long.class, Projects.class); 
```

}

这是我的报告模型：

```
@Entity
@Table(name = "Reports")
public class Reports extends Model {
    private static final long serialVersionUID = -6617128169471038678L;

    @Id
    public long id;

    @Constraints.Required
    public String description;

    @Formats.DateTime(pattern = "dd/MM/yyyy")
    public Date created_at = new Date();

    @ManyToOne
    @NotNull
    public Projects project;

    public static Finder<Long, Reports> find = new Finder<Long, Reports>(Long.class, Reports.class);
} 
```

保存工作没有问题我可以创建一个项目，我可以创建多个指向正确项目的报告。我的问题是我将如何查询这个。

当我有一个项目时，我将如何获得所有相关报告？我想我可以把它当作一个普通的 SQL 查询，但我很确定它应该可以使用 ebean。

最好的问候，并感谢您的宝贵时间！

**更新：** 这就是我将如何使用 sql 查询

```
SELECT * FROM `Projects` LEFT JOIN `Reports` ON Projects.`id` = Reports.`id`; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T14:07:38.350

我现在不能尝试，但我会做这样的事情：

```
public class Reports extends Model {

...

  public static List<Reports> findByProject(Projects project) {
    return find.fetch("project").where().eq("project.id", project.id).findList();
  }
} 
```

# macos - Apache 无法启动 - 表示 httpd 模块已加载但未运行

> ID：15045428
> 
> 赞同：6
> 
> 时间：2013-02-23T20:41:09.897
> 
> 标签：macos, apache, configuration, virtualhost

所以我一直在使用 OS X 10.8.2 上的几个虚拟主机。我正在使用 Apache2 安装和 MySQL 来运行基于名称的虚拟主机。直到昨晚，他们都工作得很好。突然，我所有的虚拟主机都重定向到“无法连接到”页面。

在摆弄并最终检查错误日志之后，我得出的结论是 Apache 实际上并没有运行。例如，ps aux | grep apache 只返回 grep 进程。但是，如果我尝试 sudo /usr/sbin/apachectl start 我得到“org.apache.httpd：已加载”作为响应。

我检查了我的 httpd.conf 文件，它看起来非常好。我看不到它有任何变化。我还运行了语法检查命令（它在我的大脑中转瞬即逝），它返回了 OK。我在错误日志中发现的唯一一件事，最后一件事是昨天，2 月 21 日，它说：“[2013 年 2 月 21 日星期四 21:46:02] [通知] 捕获 SIGTERM，正在关闭”

从那时起，我的 Apache 错误日志什么都没有（因为它没有运行）。我已经重新启动，尝试重新启动 apache；我完全不知道为什么它认为它正在运行，即使它不是。

有任何想法吗？

当我尝试启动和重新启动 Apache 时，在 /var/logs/system.log 中：

```
Feb 23 09:27:00 Baileys-MacBook-Pro com.apple.launchd[1] (org.apache.httpd[8766]): Exited with code: 1
Feb 23 09:27:00 Baileys-MacBook-Pro com.apple.launchd[1] (org.apache.httpd): Throttling respawn: Will start in 10 seconds
Feb 23 09:27:10 Baileys-MacBook-Pro com.apple.launchd[1] (org.apache.httpd[8767]): Exited with code: 1
Feb 23 09:27:10 Baileys-MacBook-Pro com.apple.launchd[1] (org.apache.httpd): Throttling respawn: Will start in 10 seconds
Feb 23 09:27:16 Baileys-MacBook-Pro.local sudo[8769]:   bailey : TTY=ttys000 ; PWD=/private/var/log ; USER=root ; COMMAND=/usr/sbin/apachectl start
Feb 23 09:27:20 Baileys-MacBook-Pro com.apple.launchd[1] (org.apache.httpd[8772]): Exited with code: 1
Feb 23 09:27:20 Baileys-MacBook-Pro com.apple.launchd[1] (org.apache.httpd): Throttling respawn: Will start in 10 seconds
Feb 23 09:27:20 Baileys-MacBook-Pro.local sudo[8773]:   bailey : TTY=ttys000 ; PWD=/private/var/log ; USER=root ; COMMAND=/usr/sbin/apachectl restart
Feb 23 09:27:20 Baileys-MacBook-Pro com.apple.launchd[1] (org.apache.httpd[8777]): Exited with code: 1
Feb 23 09:27:20 Baileys-MacBook-Pro com.apple.launchd[1] (org.apache.httpd): Throttling respawn: Will start in 10 seconds
Feb 23 09:27:26 Baileys-MacBook-Pro.local sudo[8778]:   bailey : TTY=ttys000 ; PWD=/private/var/log ; USER=root ; COMMAND=/usr/bin/vi system.log 
```

重新启动后此问题仍然存在。从前几天开始，它就不会启动但认为 httpd 模块已加载。

我试图通过谷歌找出答案，但是——有谁知道 Apache 如何检查它是否已加载？我知道很多要运行的服务锁定文件；尽管 Apache 当前未运行，Apache 是否有可能在某处仍然锁定的锁定文件？

注意：我也在 ServerFault 上发布了这个——我也在这里发布这个，因为到目前为止我没有在 ServerFault 上得到任何东西，而且我一直在看 StackOverflow 上的 Apache 帖子，所以我假设Apache 问题适用于 Stack。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-23T21:00:51.970

当另一个进程已经在监听 Apache 想要绑定的同一个端口（通常是端口 80）时，我可以通过启动 Apache 来重现这个问题（有点）。因此，请检查是否有另一个进程正在侦听该端口：

```
sudo lsof -i tcp:80 | grep LISTEN 
```

**编辑：**也许更简单：您可以在调试模式下手动启动 Apache，看看它无法启动的原因：

```
sudo /usr/sbin/httpd -k start -e Debug -E /dev/stdout 
```

在我的情况下（已经在端口 80 上监听的东西），它将产生：

```
(48)Address already in use: make_sock: could not bind to address 0.0.0.0:80 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-22T12:42:02.497

就我而言，我得到了：

> (2)No such file or directory: httpd: 无法打开错误日志文件/private/var/log/apache2/error_log。无法打开日志

创建目录 apache2 使其运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T21:13:19.820

robertklep 的指针：

`sudo /usr/sbin/httpd -k start -e Debug -E /dev/stdout`

为我解决了一个相关的问题。相同的症状，不同的原因，我想。我使用 SSL 和自签名证书设置了一个测试虚拟主机。

我已经生成了一个带有密码的私钥。所以 httpd 正在等待一个密码（我没有提供）。当我开始使用调试选项时，我得到了提示，提供了密码并启动了 httpd。

因此，将在没有密码的情况下重做私钥......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-22T09:48:34.060

不知道这是否相关，但由于我遇到了同样的问题并且找到了替代解决方案，所以无论如何让我放入我的 2c。

当我遇到同样的问题时，查看了这篇文章。原来 httpd.conf 文件是罪魁祸首。我已经改变它来安装一些东西。虽然我删除了安装程序文件，但我忘记将 httpd.conf 改回来。我希望你没有遇到同样的问题。

关于端口 80 的问题，我曾看到 Skype 占用该端口以及 443，（天知道是什么原因），关闭它后我得到了更好的结果。确保您没有在端口 80 上运行 Skype。

# iphone - 将 UITextView 调整为其内容的大小不起作用

> ID：15045429
> 
> 赞同：0
> 
> 时间：2013-02-23T20:41:19.513
> 
> 标签：iphone, ios, objective-c, uitextview

这是我想要调整到其内容高度的 UITextView 的代码。

如果我像这样明确地写出`textView.frame`高度：

```
 textView.frame = CGRectMake(100, 12, 320, 458); 
```

textView 的大小与预期的一样。

但是，如果我这样写。尽管 NSLog 语句说有一个值，但它甚至不显示`textView.contentSize.height`

```
UITextView *textView = [[UITextView alloc] init];
textView.layer.borderWidth = 5.0f;

textView.layer.borderColor = [[UIColor redColor] CGColor];

textView.text = [item objectForKey:@"description"];

textView.frame = CGRectMake(100, 12, 320, textView.contentSize.height);

NSLog(@"%f textviewcontnet size", textView.contentSize.height);

textView.editable = NO;

[self.view addSubview:textView]; 
```

当我记录以下输出时：

```
NSLog(@"%f textviewcontent size", textView.contentSize.height); 
```

我得到“458.000000 textviewcontent 大小”

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:24:06.617

我建议尝试：

```
UITextView *textView = [[UITextView alloc] init];
textView.layer.borderWidth = 5.0f;
textView.layer.borderColor = [[UIColor redColor] CGColor];
textView.text = [item objectForKey:@"description"];
textView.frame = CGRectMake(100, 12, 320, 458);    
textView.editable = NO;

[self.view addSubview:textView];

textView.frame = CGRectMake(100, 12, 320, textView.contentSize.height); 
```

我听说在`textView.contentSize.height`将其添加到视图之前不起作用（尽管这不是我的经验）。`textView.contentSize.height`更重要的是，如果它还不知道控件的宽度是多少，我不知道它会如何解释。所以继续，设置初始值`frame`，`addSubview`然后根据 重新调整大小`textView.contentSize.height`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T20:59:30.263

快速从我的一个项目中复制出来：

```
AppDelegate *appDelegate;

CGSize  textSize1, textSize2;

appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];

textSize1 = [self.subjectLabel.text sizeWithFont:[appDelegate fontNormal] constrainedToSize:CGSizeMake(300.0f, 10000.0f) lineBreakMode:NSLineBreakByWordWrapping];
self.subjectLabel.frame = CGRectMake(10, 5, 300, textSize1.height);
textSize2 = [self.descriptionLabel.text sizeWithFont:[appDelegate fontNormal] constrainedToSize:CGSizeMake(300.0f, 10000.0f) lineBreakMode:NSLineBreakByWordWrapping];
self.descriptionLabel.frame = CGRectMake(10, 5 + textSize1.height + 5, 300, textSize2.height); 
```

`[appDelegate fontNormal]`只返回一个 UIFont 对象，我用于所有“普通”文本项的对象。不要担心太多。但重要的是您也要使用与文本视图相同的字体。

我的例子更简单一些，因为它是一个 UILable。这也适用于文本视图，但您必须考虑昆虫。简单的解决方案，与文本视图的框架宽度相比，只需从宽度中减去一些“模糊偏移”。

# java - 在java中获取实例化类型变量

> ID：15045430
> 
> 赞同：0
> 
> 时间：2013-02-23T20:41:21.650
> 
> 标签：java, generics, types

我想检查泛型类的实例化类型是否具有某些属性，例如：

```
class Foo<T> {
  void bar () { 
    if (T instanceof Serializable)   // does not compile
      ...
  } 
} 
```

我想知道通用信息是否在运行时完全丢失？这是否意味着没有办法完成我想做的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T20:47:11.860

> 这是否意味着没有办法完成我想做的事情？

你可以写：

```
class Foo<T> {
  private final Class<T> clazz;

  Foo (final Class<T> clazz) { // require creator to supply a Class<T>
    this.clazz = clazz;
    if (clazz == null) {
      throw new NullPointerException();
    }
  }

  void bar () { 
    if (Serializable.class.isAssignableFrom(clazz)) {
      ...
    }
  } 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T20:42:42.800

你是对的，`generic type information`在运行时丢失了。它被称为[**类型擦除**](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)。编译器将删除所有泛型类型并在运行时进行强制转换（如有必要）。和所有的

# session - 在 GWT 中自动登录的会话和 Cookie

> ID：15045431
> 
> 赞同：5
> 
> 时间：2013-02-23T20:41:34.853
> 
> 标签：session, gwt, cookies, login, session-cookies

我知道这已经有很多问题了，但我似乎仍然没有找到明确的答案。我想要做的是让用户在登录 2 周后或直到他们注销后被记住。以下是我认为应该发生的事情，我想知道是否有更多经验的人可以告诉我我是对还是错。

用户首次登录。对服务器的 RPC 调用会返回一个“UserInfo”对象，其中包含一个新的 sessionID。Aka 在服务器上发生并`user`返回：

`user.setSessionId(getThreadLocalRequest().getSession().getId());`

现在`user`返回之后，我们必须创建 Cookie 来存储客户端数据。我是否正确地说我们需要一个 Cookie 来识别当前用户和另一个用于 sessionID：

```
final long DURATION = 1000 * 60 * 60 * 24 * 14; //duration remembering login - 2 weeks
Date expires = new Date(System.currentTimeMillis() + DURATION);

String sessionID = user.getSessionId();
String username = user.getUsername();
Cookies.setCookie("sessionID", sessionID, expires, null, "/", false);
Cookies.setCookie("username", username, expires, null, "/", false); 
```

现在，当用户稍后返回应用程序时，我们会检查 cookie 并且（如果它们存在并且由于某些原因（例如从用户显式注销）没有被删除）使用它们的值通过 RPC 检查会话有效性以服务器：

```
String sessionID = Cookies.getCookie("sessionID");
String username = Cookies.getCookie("username");

    if ( sessionID != null && username != null){
        AsyncCallback<UserInfo> callBack = new AsyncCallback<UserInfo>(){

            @Override
            public void onFailure(Throwable caught) {

                Window.alert("Error connecting to server.");

            }

            @Override
            public void onSuccess(Boolean sessionValid) {

                if (sessionValid)
                    loadInitialInterfaceForUser("username");
                else
                    loadLoginInterface();
            }

        };

    loginSvc.checkSessionValidity(sessionID,username, callBack);
    }

    else 
        loadLoginInterface(); 
```

现在，假设我到目前为止所做的事情是正确的（这有点远：P）我真正的问题是我应该在服务器端检查`checkSessionValidity(sessionID,username)`什么？

这仅仅是获取我存储在服务器端的用户并 `sessionID`与`sessionID`我与用户关联的用户进行比较的情况吗？我还要检查它没有过期吗？

我知道这是一个冗长的问题，也许措辞不是很好......我正在努力解决这个问题，所以非常欢迎任何和所有的帮助！

干杯，史蒂夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T21:27:03.930

是的，这是一个关键的事情。

这是讨论的一些有趣的观点（在数据库中存储会话 ID 和用户名）

看看这个（当然你可以签入`impl class`而不是签入`servlet`）
[如何检查 sessionId 在 servlet (java) 中是否有效](https://stackoverflow.com/questions/3869209/how-to-check-if-a-sessionid-is-valid-in-a-servlet-java)。

这是GWT中会话管理的一个很好的例子

[http://varuntayur.wordpress.com/2012/01/25/session-management-in-gwt](http://varuntayur.wordpress.com/2012/01/25/session-management-in-gwt)

另请阅读 [有关 GWT、Cookie 和网页指导的问题](https://stackoverflow.com/questions/2974100/question-on-gwt-cookies-and-webpage-directing/2976062#2976062)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T05:06:45.393

看看下面的链接。

[不能对多个 GWT 应用程序使用相同的 cookie](https://stackoverflow.com/questions/14305654/cannot-use-same-cookie-for-multiple-gwt-applications/14306386#14306386)

这可能会解决您的问题。

# c# - MVC 在视图模型中使用领域模型

> ID：15045445
> 
> 赞同：11
> 
> 时间：2013-02-23T20:42:59.287
> 
> 标签：c#, asp.net-mvc

以下可以吗？我知道领域模型不应该在视图中使用，但是在视图模型中使用领域模型可以吗？对于一些非常小的模型，为它们创建和管理视图模型似乎不值得。

例如

```
public class LoginDomainModel
{
    public string Email { get; set; }
    public string Password { get; set; }
    public string DisplayName { get; set; }
    public long UserTypeID { get; set; }      
    public virtual UserType UserType { get; set; } 
}
public class UserTypeDomainModel
{
    public UserType()
    {
        this.Logins = new List<Login>();
    }
    public long UserTypeID { get; set; }
    public string UserType { get; set; }
    public string Description { get; set; }
    public virtual ICollection<Login> Logins { get; set; }
}

public class LoginViewModel
{
    public string Email { get; set; }
    public long UserTypeID {get; set;}

    //Right here
    public List<UserTypeDomainModel> UserTypesSelectList {get; set;}
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-23T20:47:22.100

我个人在视图中使用域模型，*如果它们自然是完全适合的*。这可能只发生在本质上是 CRUD 的琐碎项目上（以直接的方式编辑域实体）。我发现为了纯粹性而创建域实体的精确副本是浪费时间。

我*永远不会*修改域模型来满足视图的需要。在我 95% 以上的项目中，这就是我发现自己所处的环境。当你为了视图而污染域时，就会引入可维护性问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T21:03:11.887

长期以来，我一直在为由单独的视图模型和域模型引起的感知重复而苦苦挣扎。我会断言，由于它们用于不同的目的，因此并不是*真正*的重复，但是声明这么多相似的属性仍然感觉“错误”。

在非常小的项目中（尤其是那些具有高度信任的经过身份验证的用户组的项目），我可能只是直接绑定到域模型并完成它。或者，如果视图模型需要不同的结构（如@Eric J. 所述），我可以混合搭配。

**但是**：ModelBinder 将尝试将请求中的值与模型上的属性相匹配。这意味着域模型上的任何属性都可能被（流氓）请求填充。有一些方法可以防止这种情况发生，但对我来说，安心胜过创建单独的视图模型的一点额外努力。

我认为没有绝对需要为只读的未绑定值创建单独的视图模型（在您的情况下可能是用户类型列表，尽管`public virtual ICollection<Login> Logins`可能会否定这一点）。

或者，您可能希望将域模型投影到面向 UI 的抽象（例如`IEnumerable<SelectListItem>`）。您可以使用`SelectListItems`多种输入机制，因此您不会将自己束缚于特定的 UI 行为。

即使使用抽象，您仍可能需要验证请求不包含非法值。例如，也许只有超级管理员可以分配某些`UserTypeDomainModel`ID。不管抽象如何，您仍然需要验证这一点。

**TLDR：**尽可能多地抽象领域模型，找到适当的抽象（新的视图模型并不总是正确的答案），并且（有点偏执）输入验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T21:03:48.227

这取决于您所说的“域模型”是什么意思。你的意思是EF实体吗？还是您的意思是业务层对象？

将 EF 实体传递给视图绝不是一个好主意，尤其是在您使用默认模型绑定的情况下。如果您不小心，这可能会产生安全问题。尽管如果您对传递给视图的业务对象不小心，也会出现同样的问题。

视图模型的巨大优势之一是您可以更好地控制数据映射，因此您可以更轻松地验证只有正确的映射出现。

不过，这一切都取决于您的应用程序。如果它是一个简单的应用程序，那么做更复杂的映射可能不值得。如果它是一个复杂的应用程序，它必须存在很长时间，并且可能会更新很多......那么你绝对应该投入精力。

# excel - 从pdf（到excel）中提取表格，pref。带 vba

> ID：15045446
> 
> 赞同：7
> 
> 时间：2013-02-23T20:43:03.250
> 
> 标签：excel, vba, pdf, filesystemobject

我正在尝试使用 vba 从 pdf 文件中提取表格并将它们导出到 excel。如果一切都按应有的方式进行，它应该是自动的。问题是表格没有标准化。

这就是我到目前为止所拥有的。

1.  VBA (Excel) 运行[XPDF](http://www.foolabs.com/xpdf/)，并将当前文件夹中的所有 .pdf 文件转换为文本文件。
2.  VBA (Excel) 逐行读取每个文本文件。

和代码：

```
With New Scripting.FileSystemObject
With .OpenTextFile(strFileName, 1, False, 0)

    If Not .AtEndOfStream Then .SkipLine
    Do Until .AtEndOfStream
        //do something
    Loop
End With
End With 
```

这一切都很好。但是现在我要解决从文本文件中提取表格的问题。我想做的是 VBA 找到一个字符串，例如“年收入”，然后将数据输出到列中。（直到桌子结束。）

第一部分不是很困难（找到某个字符串），但是我将如何进行第二部分。文本文件将如下[所示 Pastebin](http://pastebin.com/jf4VG92x)。问题是文本没有标准化。例如，有些表有 3 年的列（2010 2011 2012），有些只有两个（或 1 个），有些表在列之间有更多的空间，有些不包括某些行（例如 Capital Asset，net）。

我正在考虑做这样的事情，但不知道如何在 VBA 中进行。

1.  查找用户定义的字符串。例如。“表一：年复一年。”
2.  一个。下一行查找年份；如果有两个，我们将需要输出三列（标题 +，2x 年），如果有三个，我们将需要四个（标题 +，3x 年）.. 等等
    b。为每年创建标题列+列。
3.  到达行尾时，转到下一行
4.  一个。读取文本 -> 输出到第 1 列
    。将空格（空格 > 3？）识别为第 2 列的开始。读取数字 -> 输出到第 2 列。
    c。（如果 column = 3）将空格识别为第 3 列的开头。读取数字 -> 输出到第 3 列
    。（如果 column = 4）将空格识别为第 4 列的开头。读取数字 -> 输出到第 4 列。
5.  每行，循环 4。
6.  下一行不包含任何数字 - 结束表。（可能最简单的只是用户定义的数字，15 个字符后没有数字？结束表）

我的第一个版本基于[Pdf to excel](http://www.business-spreadsheets.com/forum.asp?t=884&o=n)，但是在线阅读的人不推荐`OpenFile`而是推荐`FileSystemObject`（尽管它似乎要慢很多）。

任何让我开始的指针，主要是在第 2 步？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T08:03:39.537

您有多种方法来剖析文本文件，具体取决于它的复杂程度可能会导致您以一种或另一种方式倾斜。我开始了这个，它有点失控......享受。

根据您提供的示例和其他评论，我注意到以下内容。其中一些可能适用于简单文件，但对于更大更复杂的文件可能会变得笨拙。此外，我在这里使用的方法或技巧可能会稍微更有效，但这肯定会让你达到预期的结果。希望这与提供的代码一起有意义：

*   您可以使用布尔值来帮助您确定您所在的文本文件的“部分”。即`InStr`在当前行上通过查找文本“表格”来确定您在表格中，然后一旦您知道您在文件的“表格”部分开始寻找“资产”部分等
*   您可以使用几种方法来确定您拥有的年数（或列数）。该`Split`函数和一个循环将完成这项工作。
*   如果您的文件始终具有恒定格式，即使仅在某些部分，您也可以利用这一点。例如，如果您知道您的文件行前面总是有一个美元符号，那么您知道这将定义列宽，您可以在随后的文本行中使用它。

以下代码将从文本文件中提取资产详细信息，您可以对其进行修改以提取其他部分。它应该处理多行。希望我已经足够评论了。看看，如果需要进一步帮助，我会编辑。

```
 Sub ReadInTextFile()
    Dim fs As Scripting.FileSystemObject, fsFile As Scripting.TextStream
    Dim sFileName As String, sLine As String, vYears As Variant
    Dim iNoColumns As Integer, ii As Integer, iCount As Integer
    Dim bIsTable As Boolean, bIsAssets As Boolean, bIsLiabilities As Boolean, bIsNetAssets As Boolean

    Set fs = CreateObject("Scripting.FileSystemObject")
    sFileName = "G:\Sample.txt"
    Set fsFile = fs.OpenTextFile(sFileName, 1, False)

    'Loop through the file as you've already done
    Do While fsFile.AtEndOfStream <> True
        'Determine flag positions in text file
        sLine = fsFile.Readline

        Debug.Print VBA.Len(sLine)

        'Always skip empty lines (including single spaceS)
        If VBA.Len(sLine) > 1 Then

            'We've found a new table so we can reset the booleans
            If VBA.InStr(1, sLine, "Table") > 0 Then
                bIsTable = True
                bIsAssets = False
                bIsNetAssets = False
                bIsLiabilities = False
                iNoColumns = 0
            End If

            'Perhaps you want to also have some sort of way to designate that a table has finished.  Like so
            If VBA.Instr(1, sLine, "Some text that designates the end of the table") Then
                bIsTable = False
            End If 

            'If we're in the table section then we want to read in the data
            If bIsTable Then
                'Check for your different sections.  You could make this constant if your text file allowed it.
                If VBA.InStr(1, sLine, "Assets") > 0 And VBA.InStr(1, sLine, "Net") = 0 Then bIsAssets = True: bIsLiabilities = False: bIsNetAssets = False
                If VBA.InStr(1, sLine, "Liabilities") > 0 Then bIsAssets = False: bIsLiabilities = True: bIsNetAssets = False
                If VBA.InStr(1, sLine, "Net Assests") > 0 Then bIsAssets = True: bIsLiabilities = False: bIsNetAssets = True

                'If we haven't triggered any of these booleans then we're at the column headings
                If Not bIsAssets And Not bIsLiabilities And Not bIsNetAssets And VBA.InStr(1, sLine, "Table") = 0 Then
                    'Trim the current line to remove leading and trailing spaces then use the split function to determine the number of years
                    vYears = VBA.Split(VBA.Trim$(sLine), " ")
                    For ii = LBound(vYears) To UBound(vYears)
                        If VBA.Len(vYears(ii)) > 0 Then iNoColumns = iNoColumns + 1
                    Next ii

                    'Now we can redefine some variables to hold the information (you'll want to redim after you've collected the info)
                    ReDim sAssets(1 To iNoColumns + 1, 1 To 100) As String
                    ReDim iColumns(1 To iNoColumns) As Integer
                Else
                    If bIsAssets Then
                        'Skip the heading line
                        If Not VBA.Trim$(sLine) = "Assets" Then
                            'Increment the counter
                            iCount = iCount + 1

                            'If iCount reaches it's limit you'll have to redim preseve you sAssets array (I'll leave this to you)
                            If iCount > 99 Then
                                'You'll find other posts on stackoverflow to do this
                            End If

                            'This will happen on the first row, it'll happen everytime you
                            'hit a $ sign but you could code to only do so the first time
                            If VBA.InStr(1, sLine, "$") > 0 Then
                                iColumns(1) = VBA.InStr(1, sLine, "$")
                                For ii = 2 To iNoColumns
                                    'We need to start at the next character across
                                    iColumns(ii) = VBA.InStr(iColumns(ii - 1) + 1, sLine, "$")
                                Next ii
                            End If

                            'The first part (the name) is simply up to the $ sign (trimmed of spaces)
                            sAssets(1, iCount) = VBA.Trim$(VBA.Mid$(sLine, 1, iColumns(1) - 1))
                            For ii = 2 To iNoColumns
                                'Then we can loop around for the rest
                                sAssets(ii, iCount) = VBA.Trim$(VBA.Mid$(sLine, iColumns(ii) + 1, iColumns(ii) - iColumns(ii - 1)))
                            Next ii

                            'Now do the last column
                            If VBA.Len(sLine) > iColumns(iNoColumns) Then
                                sAssets(iNoColumns + 1, iCount) = VBA.Trim$(VBA.Right$(sLine, VBA.Len(sLine) - iColumns(iNoColumns)))
                            End If
                        Else
                            'Reset the counter
                            iCount = 0
                        End If
                    End If
                End If

            End If
        End If
    Loop

    'Clean up
    fsFile.Close
    Set fsFile = Nothing
    Set fs = Nothing
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T12:08:22.163

由于 PasteBin 已被删除，我无法检查示例数据。根据我从问题描述中收集到的信息，在我看来，使用正则表达式会使解析数据变得更加容易。

为 FileSystemObject 添加对脚本运行时 scrrun.dll 的引用。
添加对 Microsoft VBScript 正则表达式 5.5 的引用。RegExp 对象的库。

使用 Dim objRE As New RegExp 实例化 RegEx 对象

将 Pattern 属性设置为 "(\bd{4}\b){1,3}" 上面的模式应该匹配包含以下字符串的行：2010 2010 2011 2010 2011 2012

年份字符串之间的空格数无关紧要，只要至少有一个（因为我们不希望遇到像 201020112012 这样的字符串）

将 Global 属性设置为 True

捕获的组将在 RegEx 对象 objRE 的 Execute 方法返回的 MatchCollection 中的各个 Match 对象中找到。所以声明适当的对象：

```
Dim objMatches as MatchCollection
Dim objMatch as Match
Dim intMatchCount 'tells you how many year strings were found, if any 
```

假设您已经设置了一个 FileSystemObject 对象并正在扫描文本文件，将每一行读入变量 strLine

首先测试当前行是否包含寻找的模式：

```
If objRE.Test(strLine) Then
  'do something
Else
  'skip over this line
End If

Set objMatches = objRe.Execute(strLine)
intMatchCount = objMatches.Count

For i = 0 To intMatchCount - 1
   'processing code such as writing the years as column headings in Excel
    Set objMatch = objMatches(i)
    e.g. ActiveCell.Value = objMatch.Value
   'subsequent lines beneath the line containing the year strings should
   'have the amounts, which may be captured in a similar fashion using an
   'additional RegExp object and a Pattern such as "(\b\d+\b){1,3}" for
   'whole numbers or "(\b\d+\.\d+\b){1,3}" for floats. For currency, you
   'can use "(\b\$\d+\.\d{2}\b){1,3}"
Next i 
```

这只是我将如何应对这一挑战的粗略概述。我希望此代码大纲中的某些内容对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-26T17:52:16.213

我取得了一些成功的另一种方法是使用 VBA 转换为 .doc 或 .docx 文件，然后从 Word 文件中搜索并提取表格。它们可以很容易地提取到 Excel 工作表中。转换似乎很好地处理了表格。但是请注意，它是逐页工作的，因此延伸到一页上的表格最终会在 word doc 中作为单独的表格。

# tooltip - 如何为多个控件显示单个工具提示

> ID：15045453
> 
> 赞同：0
> 
> 时间：2013-02-23T20:43:39.093
> 
> 标签：tooltip, mouseover

我有许多不同的控件，我想显示相同的工具提示。问题是“for”属性似乎是单个值。有没有办法让单个工具提示响应鼠标悬停在多个控件上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:26:22.643

您可以使用以下步骤为所有控件设置一个工具提示

1.  创建一个 div 元素
2.  为 div 设置 style.display = 'none'
3.  将其附加到文档的正文
4.  在 mouseover 事件中，使用 evt.clientX 和 evt.clientY 获取鼠标坐标，然后设置 style.display = 'block' style.position = 'absolute' style.top = evt.clientY +'px' style.left = evt.clientX + 'px' 为 div

# ruby-on-rails - 将数据从 datetimepicker（人类可读）转换为 Time 类（机器可读）

> ID：15045457
> 
> 赞同：0
> 
> 时间：2013-02-23T20:43:57.793
> 
> 标签：ruby-on-rails, parsing, time, datetimepicker

现在我正在使用 datetimepicker 让用户可以轻松选择准确的日期/时间并以可读的格式呈现。但是，rails 不喜欢这种格式并且不能 Time.parse 它。

我已经尝试过 Chronic gem，它很接近，但它仍然无法解析类似的内容：

2013 年 2 月 27 日下午 8 点 36 分 57 秒

如何使用户输入的时间成为我的数据库可接受的格式？（蒙哥）

* * *

我正在使用这个宝石：[https ://github.com/asgeo1/bootstrap-datetimepicker-rails](https://github.com/asgeo1/bootstrap-datetimepicker-rails)

基于此日期时间选择器：[https ://github.com/tarruda/bootstrap-datetimepicker](https://github.com/tarruda/bootstrap-datetimepicker)

在这里演示：http: [//tarruda.github.com/bootstrap-datetimepicker/](http://tarruda.github.com/bootstrap-datetimepicker/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T20:46:50.973

查看及时性 gem： [https ://github.com/adzap/timeliness](https://github.com/adzap/timeliness)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T20:49:45.707

日期选择器将始终以标准格式返回值，因此您可以对其进行解析。

```
#02/27/2013 08:36:57 PM
month = input[0..1]
date = input[3..4]
year = input[6..9]
datetime = DateTime.civil(input[6..9], input[0..1], input[3..4],
                          input[11..12], input[14..15], input[17..18]) 
```

# c - 包含动态数组的不透明 c 结构

> ID：15045461
> 
> 赞同：1
> 
> 时间：2013-02-23T20:44:15.657
> 
> 标签：c, malloc

这是为包含动态数组的 ac 结构分配内存的正确方法吗？特别是，考虑到还不知道结构实际上有多大，我为 myStruct 分配内存的方式是否正确？

```
//test.h
struct Test;
struct Test * testCreate();
void testDestroy(struct Test *);
void testSet(struct Test *, int);

//test.c
#include <stdlib.h>
struct Test{
  double *var;
};

struct Test * testCreate(int size){
  struct Test *myTest = (struct Test *) malloc(sizeof(struct Test));
  myTest->var = malloc(sizeof(double)*size);
  return(myTest);
}
void testDestroy(struct Test * myTest){
  free(myTest->var);
  free(myTest);
}
void testSet(struct Test * myTest, int size){
  int i;
  for (i=0;i<size;++i){
    myTest->var[i] = i;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:49:19.063

`struct`s 具有固定的大小，这就是`sizeof`返回的内容。

你的结构有一个元素，一个双指针，并且有一个（平台相关的）固定大小。

您的`testCreate`功能正确地做事。如果您不知道动态分配部分的大小，可以将指针设置`NULL`为表示必须稍后分配内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T20:53:16.250

是的，您正确地为结构分配空间，然后为结构中的双精度数组分配空间。实际上，在尝试使用内存之前，您应该始终测试 malloc() 的返回是否为 NULL。此外，大多数像这样的程序也将数组的大小存储在结构中，因此您可以编写更通用的代码，以确保它不会在分配空间的末尾运行。

# objective-c - 如何在 Objective C 中访问这个 JSON 编码的值？

> ID：15045463
> 
> 赞同：-3
> 
> 时间：2013-02-23T20:44:27.707
> 
> 标签：objective-c

我有一个看起来像这样的对象：

```
{
 "userID": "2A8761E4-C13A-470E-A759-91432D61B6AF-25982-0000352D853511AF"
} 
```

它是来自 AFNetworking JSON 请求的返回值。该对象称为 JSON。

我尝试以几种不同的方式访问 userID 值，但不断收到错误“无法识别的选择器”。这是我尝试过的：

```
[JSON objectForKey:@"userID"]
[JSON valueForKey:@"userID"]   
[[JSON objectAtIndex:0] valueForKey:@"userID"];
[[JSON objectAtIndex:0] objectForKey:@"userID"];
[JSON objectAtIndex[0]]; 
```

什么是正确的语法？

编辑

这是有关无法识别的选择器错误的更多详细信息。

```
-[__NSCFString objectForKey:]: unrecognized selector sent to instance 0x20068150
2013-02-23 15:58:13.993 BMTabbed[12312:907] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString objectForKey:]: unrecognized selector sent to instance 0x20068150'
*** First throw call stack:
(0x325032a3 0x3a22097f 0x32506e07 0x32505531 0x3245cf68 0xbe9ed 0xbe91b 0xaae8f 0xabe65 0x3a63811f 0x3a6374b7 0x3a63c1bd 0x324d6f3b 0x32449ebd 0x32449d49 0x360202eb 0x3435f301 0x96e95 0x3a657b20)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:18:35.640

您正在将`NSDictionary`选择器发送到`NSString`. 您可以使用`NSJSONSerialization`将 JSON 字符串转换为`NSDictionary`or `NSArray`，具体取决于 JSON 字符串的根对象。在您的情况下，它是`NSDictionary`：

```
NSData *data = [NSData dataWithBytes:[json UTF8String] length:[json lengthOfBytesUsingEncoding:NSUTF8StringEncoding]];
NSDictionary *dict = [NSJSONSerialization JSONObjectWithData:data options:0 error:NULL]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T21:29:32.543

如果

```
NSLog(@"%@", [JSON class]); //=> __NSCFDictionary 
```

然后要么

```
[JSON objectForKey:@"userID"] 
```

或者

```
JSON[@"userID"] 
```

应该管用。

# spring - java.lang.IllegalArgumentException：在 spring+hibernate 中需要“sessionFactory”或“hibernateTemplate”

> ID：15045468
> 
> 赞同：8
> 
> 时间：2013-02-23T20:44:50.977
> 
> 标签：spring, hibernate

我正在做 spring + hibernate 应用程序。当我在 tomcat 服务器上运行应用程序时，我遇到了一些异常。下面是我的代码。

这是我的 bean 配置文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

 <bean
    class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location">
        <value>WEB-INF/database/db.properties</value>
    </property>
</bean>
    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="${jdbc.driverClassName}" />
        <property name="url" value="${jdbc.url}" />
        <property name="username" value="${jdbc.username}" />
        <property name="password" value="${jdbc.password}" />
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">

        <property name="dataSource">
            <ref bean="dataSource" />
        </property> 
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
        <property name="mappingResources">
            <list>
                <value>Employee.hbm.xml</value>
            </list>
        </property>
    </bean>
    <bean id="employeeBo" class="com.saggezza.employee.bo.impl.EmployeeBoImpl">
        <property name="employeeDao" ref="employeeDao" />
    </bean>

    <bean id="employeeDao" class="com.saggezza.employee.dao.impl.EmployeeDaoImpl">
        <constructor-arg ref="sessionFactory"></constructor-arg>
    </bean> 
```

这是我的道课。

```
public class EmployeeDaoImpl extends HibernateDaoSupport implements EmployeeDao {

    private SessionFactory sessionFactory;
    public EmployeeDaoImpl(SessionFactory sessionfactory){
        this.sessionFactory=sessionfactory;
    }

    @Override
    public List<Employee> getEmployeeDetails() {
        return getHibernateTemplate().find("from Employee");

    }
} 
```

这里另一个类employeeBo 正在调用employeeDaoImpl。当我运行这个时，我得到了以下异常。

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'employeeBo' defined in ServletContext resource [/WEB-INF/spring/EmployeeBean.xml]: Cannot resolve reference to bean 'employeeDao' while setting bean property 'employeeDao'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'employeeDao' defined in ServletContext resource [/WEB-INF/spring/EmployeeBean.xml]: Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: 'sessionFactory' or 'hibernateTemplate' is required 
```

任何人都可以帮助解决这个问题。我已经尝试了很多并且谷歌它也是如此。但确实得到了解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T20:51:32.017

如果您有两个配置文件，则复制“sessionFactory”定义。删除“sessionFactory”定义之一。在 IllegalArgumentException 之前，您会遇到重复的 bean 定义异常。

编辑：在您发表评论后，

```
public class EmployeeDaoImpl extends HibernateDaoSupport implements EmployeeDao {

public EmployeeDaoImpl(SessionFactory sessionfactory){
    setSessionFactory(sessionfactory);
}

@Override
public List<Employee> getEmployeeDetails() {
    return getHibernateTemplate().find("from Employee");

}
} 
```

或摆脱上面代码中的构造函数并使用 setter injection 注入“sessionFactory” 。参见`org.springframework.orm.hibernate3.support.HibernateDaoSupport.setSessionFactory(SessionFactory)`。我更喜欢后来的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:52:36.320

我认为问题在于`SessionFactory`您注入`EmployeeDaoImpl`的类型与您在课堂上使用的类型不匹配`SessionFactory`。

你能检查一下吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-05T19:23:49.560

这是一个老问题，所以现在必须解决，但如果有人遇到这个问题。以下是解决方案。

您可以通过扩展 HibernateDAOSupport 类并覆盖其 afterPropertiesSet() 方法来使用 Hibernate DAO 支持。

在 HibernateDAO 支持中调用此方法，当时由于 sessionFactory 为 null，因此引发此错误。在您的自定义类中，您可以显式设置此属性，然后调用父类的相同方法（即 HibernateDAOSupport 的 addProperties() 方法）

```
package com.techcielo.spring4.hibernate.template;

import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.orm.hibernate3.HibernateTemplate;
import org.springframework.stereotype.Component;

@Component("hibernateTemplate")
public class Hibernate4CustomTemplate extends HibernateTemplate{

    @Autowired(required=true)
    private SessionFactory sessionFactory;
    public void setSessionFactory(SessionFactory sessionFactory) {
        System.out.println("Setting SessionFactory");
        this.sessionFactory = sessionFactory;
        super.setSessionFactory(sessionFactory);
    }

    @Override
    public void afterPropertiesSet() {
    System.out.println("Checking if properties set..."+this.sessionFactory);
    setSessionFactory(sessionFactory);
    super.afterPropertiesSet();
    }
} 
```

以下可用于[示例](http://keyurj.blogspot.in/2014/01/jms-with-spring-4.html)！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-24T16:20:43.863

我遇到了同样的问题，并通过使用`Autowired`带有`EntityManagerFactory`. [Keyur](https://stackoverflow.com/users/1884473/keyur)的答案是正确的

```
@Service
class EmployeeDaoImpl @Autowired constructor(
        factory: EntityManagerFactory
) : HibernateDaoSupport(), EmployeeDao {

    init {
        if (factory.unwrap(SessionFactory::class.java) == null) {
            throw NullPointerException("factory is not a hibernate factory")
        }
        setSessionFactory(factory.unwrap(SessionFactory::class.java))
    }
    ...

} 
```

# wordpress - 可能允许 wp-admin 使用 cookie，但在使用 Varnish 时不允许前端？

> ID：15045469
> 
> 赞同：1
> 
> 时间：2013-02-23T20:44:53.240
> 
> 标签：wordpress, redirect, cookies, varnish

我在我的 Wordpress 网站前运行 Varnish。为了增加我的缓存命中统计信息，我在 default.vcl 的清漆配置中阻止了 cookie

```
# Drop any cookies sent to Wordpress.
sub vcl_recv {
    unset req.http.cookie;
}
# Drop any cookies Wordpress tries to send back to the client.
sub vcl_fetch {
    unset beresp.http.set-cookie;
} 
```

我相信这就是让我现在无法登录 wp-admin 的原因。我不断被重定向回登录页面。知道我需要将哪种过滤器传递给该 cookie 拦截器吗？我不熟悉这种配置语言。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T07:33:54.857

如果 URL 来自管理部分，则不需要删除 cookie。

像这样：

```
sub vcl_recv {
    if (!(req.url ~ "wp-(login|admin)")) {
        unset req.http.cookie;
    }
}

sub vcl_fetch {
    if (!(req.url ~ "wp-(login|admin)")) {
        unset beresp.http.set-cookie;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-23T04:28:37.913

为什么不：

```
sub vcl_recv {
    if (req.http.Cookie ~ "(wordpress_|wp-)") {
        return (pass); // If WP cookies exist, do not cache
    } else {
        unset req.http.Cookie;
    }
} 
```

?

# java - BigInteger 到 byte[] 没有二进制补码？

> ID：15045472
> 
> 赞同：1
> 
> 时间：2013-02-23T20:45:17.437
> 
> 标签：java

我有一个数字签名 ( `byte[] signedBytes`) 在`byte[] array`. 我需要将其转换为`BigInteger`( `bigSignedBytes`)，将生成的数字用于某事，然后`byte[] convertBackSignedBytes`从`BigInteger`.

```
byte[] signedBytes = rsa.sign();
BigInteger bigSigned = new BigInteger(signedBytes);
convertBackSignedBytes = bigSigned.toByteArray();
//signedBytes and convertBackSignedBytes differ. 
```

问题是在从`BigInteger`back to重新转换之后`byte[] convertBackSignedBytes`- 它似乎与我的原始`signedBytes`变量不同。我知道`BigInteger.toByteArray()`返回一个二进制补码`byte[] value`- 这可能是负责任的。

那么如何在`BigInteger`没有二进制补码的情况下获取原始字节呢？

有人推荐这个：

```
byte[] convertBackSignedBytes = bigIntegerValue.toByteArray();
if (convertBackSignedBytes[0] == 0) {
    byte[] tmp = new byte[convertBackSignedBytes.length - 1];
    System.arraycopy(convertBackSignedBytes, 1, tmp, 0, tmp.length);
    convertBackSignedBytes = tmp;
} 
```

试过了 - 没用。仍然从 original 返回不同的 byte[]value `signedBytes`。

如果我尝试验证原始签名 - 它会成功。

但是，如果我尝试使用转换后的签名进行验证 - 它会失败。所以`signedBytes`和`convertBackSignedBytes`不再一样。

请问有什么快速的指点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:25:14.997

如果二进制补码确实是问题（我不相信），您应该能够通过始终在原始字节数组之前添加一个 0x00 字节来解决它。这样，您将始终拥有一个正数。

但是，例如，这可能是问题所在：如果您的原始数组以 0x00 或 0xFF 字节开头，则它们中的一些或全部可能会在转换过程中消失。

因此，您为什么不简单地传输像“0102affe01dead07cafe89babe”这样的字符串，而不是传输一个整数？将字节编码为十六进制字符串并返回应该很简单。

如果您**绝对必须**使用大整数，请在编码前添加 0x01（这仍会给出正数）并在解码后将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:37:19.770

由于长度不同，转换回可能会失败。

```
import java.math.BigInteger;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
public class So15045472 {
    static void print(byte[] bytes) {
        List<Byte> bs=new ArrayList<Byte>(bytes.length);
        for(byte b:bytes)
            bs.add(b);
        System.out.println(bs);
    }
    static boolean compare(byte[] x,byte[] y) {
        if(x.length!=y.length) {
            System.out.println("unequal lengths");
            return false;
        }
        for(int i=0;i<x.length;i++)
            if(x[i]!=y[i])
                return false;
        return true;
    }
    static void check(byte[] bytes) {
        BigInteger x=new BigInteger(bytes);
        System.out.println(x);
        byte[] b=x.toByteArray();
        print(bytes);
        print(b);
        boolean isEqual=compare(bytes,b);
        if(!isEqual)
            System.out.println("compare says "+isEqual);
        else System.out.println("ok");
    }
    public static void main(String[] args) {
        byte[] b1=new byte[]{(byte)0x00,(byte)0xff};
        check(b1);
        byte[] b2=new byte[]{(byte)0xff,(byte)0xff};
        check(b2);
    }
} 
```

# jquery - 如何从所有输入中获取所有值？

> ID：15045474
> 
> 赞同：0
> 
> 时间：2013-02-23T20:45:25.260
> 
> 标签：jquery

我有输入

```
<input name="v[]" value="1" type="checkbox">
<input name="v[]" value="2" type="checkbox">
<input name="v[]" value="3" type="checkbox">
<input name="v[]" value="4" type="checkbox"> 
```

使用此代码检查的位置

```
$(document).on('click',"tbody tr", function() {
    if ($(this).hasClass('info')) {
        $(this).removeClass('info');
        $(this).find('input[name="v[]"]').prop('checked', false);
    } else {
        $(this).addClass('info');
        $(this).find('input[name="v[]"]').prop('checked', true);
    }
}); 
```

我想获取检查输入的数组及其值。我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T20:49:12.830

```
var values = $.map($('input[name="v[]"]:checked'), function(el,i) { return el.value }); 
```

[**小提琴**](http://jsfiddle.net/K3Kxb/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T20:51:43.340

`.serializeArray`应该这样做

```
$('input').on('click', function(){
    console.log($('input').serializeArray());
}); 
```

[http://jsfiddle.net/cbm4T/](http://jsfiddle.net/cbm4T/)

[仅获取http://jsfiddle.net/cbm4T/1/](http://jsfiddle.net/cbm4T/1/)类型输入的示例`checkbox`

```
$('input').on('click', function(){
    console.log($('input[type=checkbox]').serializeArray());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T21:13:01.390

```
var values = $.map($('input[name="v[]"]:checked'), function(obj) {
              return $(obj).val();

}); 
```

编辑：其他人打败了我。

**和**

如果由于某种原因你想要相反。未单击的复选框及其值。

```
var values = $.map($('input[name="v[]"]:not(:checked)'), function(obj) {
              return $(obj).val();

}); 
```

# c++ - 研究 C++ 警告的后果

> ID：15045477
> 
> 赞同：0
> 
> 时间：2013-02-23T20:45:48.350
> 
> 标签：c++, warnings

我刚开始从事一份代码非常旧的工作，编译这段代码时即使启用了基本警告也会产生数千个警告，其中许多对我来说真的很可怕。大部分代码是在 80 年代编写的，因此管理层对于让一些新工程师尝试修复它并不感到兴奋。

我的观点是消除这些警告应该是当务之急，但我没有任何数据可以支持我。我理解管理层的想法，即修复所有警告是一项严肃的工作，并且可能不值得为看起来可以正常工作的代码付出努力。我正在寻找一项指向错误/警告或类似内容的研究，因此我可以去找他们并说：“我们有 200,000 个警告，从研究 X 中，很可能有 2,000 个错误隐藏在其中。 "

这里非常相似的讨论：[https ://softwareengineering.stackexchange.com/questions/111616/handling-false-positives-and-legacy-code-warnings-in-static-analysis-of-c-code](https://softwareengineering.stackexchange.com/questions/111616/handling-false-positives-and-legacy-code-warnings-in-static-analysis-of-c-code)

我认为这不应该因为跑题而被关闭，因为它是一个：“编程行业独有的实用、可回答的问题”。

由于题外话而关闭，但我发现了一项研究： http: [//institute.lanl.gov/isti/irhpit/presentations/ensuring-sq.pdf](http://institute.lanl.gov/isti/irhpit/presentations/ensuring-sq.pdf) [http://collaboration.csc.ncsu.edu/laurie/论文/TSE-0197-0705-2.pdf](http://collaboration.csc.ncsu.edu/laurie/Papers/TSE-0197-0705-2.pdf)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T20:56:32.963

我认为没有这样的研究。我也将在这里冒昧地说管理层是正确的——试图修复所有这些警告，只是修复所有这些警告，是一个坏主意。

您将通过修复警告来破坏事情！现在该代码可能有很多错误，但它有很多正确之处，并且对于您来说，在“工作”代码中出现问题并不会很好地解决。

在您的情况下，我将着手进行我需要做的任何修改/修复。在此过程中，为您接触的所有内容编写单元测试，并为您接触的所有内容清除警告。

我不知道你的构建系统是什么，但如果可能的话，构建你接触到的所有东西，并打开警告，为旧的东西留下警告，并将你更改的代码移动到新的“干净编译”文件中。

你不会很快掌握它，但你不能只是跳进去改变一堆东西。你必须找到一种工作方式，让你在不破坏最终用户的情况下取得进步。

更新：我将此作为评论开始，但我认为它应该成为答案的一部分。

干净的代码（没有警告的代码、具有单元测试的代码、易于理解的代码）不是也不应该成为任何实际必须在现实世界中*完成任务的开发人员的目标。*

干净的代码是我们使用的一种工具，它可以让我们的产品变得更好，让我们的生活（以及那些追随我们脚步的人的生活）更轻松。这是一个很好的工具，不，一个很棒的工具，但它只是一个工具。

如果您忽略了实际目标（生产有效的软件），您可能会陷入与您的流程相关的琐事中。这可能感觉很好，但它通常不能满足用户，或按时交付产品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T21:14:58.307

我同意 Michael Khone 所说的大部分内容，但这里涉及到相当多的产品/开发管理，评估取决于此。您应该问自己一些（但不是全部）主要问题：

1.  这个产品的开发模式是什么？它只是不时进行小改进的错误修复，还是您不断开发新功能。
2.  是否有足够的测试覆盖率？如果您没有像样的回归套件，那么进行重大重写就是自杀。即使这样，仍然会出现一些错误，但总比没有好。
3.  是否需要更新工具链/平台？这一点很重要，因为许多警告实际上不会显示任何问题，只要您坚持在同一环境中确定这种“有问题的”行为是可预测的（并且可能对您的代码正确）。但是，如果您想彻底更改其中之一，那么花时间解决所有这些警告可能是一个非常好的主意。

所以警告 -> 错误很大程度上取决于您的实际产品。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T20:51:22.793

警告并不意味着缺陷。每一个没有经过充分测试的产品都包含缺陷。如果产品经过良好测试，则没有缺陷。

由于其他原因，许多警告都是不好的。警告隐藏了新的警告（可能表明新出现的缺陷）以防止维护。因此，维护带有大量警告的代码会更加昂贵。

修复警告，有时甚至是内存泄漏等真正的缺陷都应该小心。它永远不应该机械地完成。这很可能会破坏工作产品。我在实践中见过几十次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T21:17:11.630

可悲的事实是，修复旧代码往往是徒劳的冒险。旧代码通常没有单元测试，编写代码的人早已离开公司。如果您在代码中看到一些奇怪的东西，它可能是出于特定原因而完成的，但是从那时起许多因素发生了变化，以至于很难进行任何影响分析。重写旧代码时有太多事情可能出错。相反，您应该专注于以良好的风格编写*新代码。*

另一个问题是管理层完全不理解为什么要重写代码，因为代码就是功能——时期

# java - 快速排序算法未正确分配枢轴

> ID：15045481
> 
> 赞同：6
> 
> 时间：2013-02-23T20:46:18.167
> 
> 标签：java, sorting, quicksort

我观看了快速排序算法的精彩可视化：[http ://www.youtube.com/watch?v=Z5nSXTnD1I4](http://www.youtube.com/watch?v=Z5nSXTnD1I4)

我觉得我真的理解了快速排序背后的原理，并在一些在线指南的帮助下，着手创建自己的快速排序。
这就是我想出的：

```
public void quickSort(int[] a, int left, int right) {

    int index = partition(a, left, right);
    if (left < index - 1)
      quickSort(a, left, index);
    if (index < right)
      quickSort(a, index + 1, right);
}

private int partition (int[] a, int left, int right) {
    int i = left - 1;
    int j = right + 1;
    int pivot = a[0];

    while (i < j) {

        i++;

        while (a[i] < pivot)
            i++;

        j--;

        while (a[j] > pivot)
            j--;

        if (i < j)
            swap (a, i, j);
    }
return i;
}   

private void swap (int[] a, int i, int j) {
    int temp = a[i];
    a[i] = a[j];
    a[j] = temp;
} 
```

left 和 right 的值如下：

```
left = 0
right = array size - 1 
```

不幸的是，输出不正确。问题似乎在于我对支点的处理。在我观看的可视化中，讲师物理地移除了枢轴，并使指针指向任何东西。他继续教程，当他到达 i 和 j（我称之为左和右）都指向同一个空白点时，他插入枢轴并继续。

由于我在物理上将枢轴固定在适当的位置，因此我发现很难对其进行正确分类。

在这段代码中，我正在处理输入：

```
4 8 1 6 3 7 2 5 
```

我得到输出：

```
1 3 2 6 8 7 4 5 
```

一旦在算法的一开始就对“4”值（即枢轴）进行排序，我就从不使用它，这会把所有东西都扔掉。另外，我认为 quickSort 方法有问题。

有人可以给我一些指示吗？谢谢。

**编辑：此处的两个编辑已被删除，因为它们包含不必要和不正确的信息。其中一个将枢轴更改为：（左+右）/ 2。由于下面的答案中解释的原因，这当然是错误的。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T21:47:23.170

我不得不摆脱分区，因为你需要`i`和`j`. 它应该如下所示：

```
public void quickSort(int[] a, int left, int right) {

    int i = left; // Was -1 
    int j = right; // Was +1
    int pivot = a[left + (right - left) / 2]; // Pivot is the value of the middle index, not the index itself
    while (i <= j) { // Changed terminating condition
        //   i++;  Not needed
        while (a[i] < pivot) { 
            i++;
        }
        //    j++; Not needed
        while (a[j] > pivot) {
            j--;
        }
        if (i <= j) {  // Changed terminating condition
            swap(a, i, j);
            i++;  // You need to progress the indexes after the swap
            j--;
        }
    }

    System.out.println(Arrays.toString(a));
    if (left < j) {  // Changed condition
        quickSort(a, left, j);
    }
    if (i < right) { 
        quickSort(a, i, right); // was i + 1
    }
} 
```

输出：

```
[4, 5, 1, 2, 3, 7, 6, 8]
[1, 5, 4, 2, 3, 7, 6, 8]
[1, 3, 2, 4, 5, 7, 6, 8]
[1, 2, 3, 4, 5, 7, 6, 8]
[1, 2, 3, 4, 5, 7, 6, 8]
[1, 2, 3, 4, 5, 6, 7, 8]
[1, 2, 3, 4, 5, 6, 7, 8]
[1, 2, 3, 4, 5, 6, 7, 8] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T22:07:15.587

很明显，你已经得到了你接受的答案。但是我会提到，您的分区逻辑可以更容易地实现，只有一个 for（或 while）循环，也没有嵌套循环：

```
int partition(final int[] a, final int left, final int right) {
        // set the last element as pivot
        final int pivot = a[right];
        int i = left - 1, j = left;
        for (; j < right; j++) 
            if (a[j] < pivot) {
                i++;
                swap(a, i, j);
            }       
        // swap a[i+1] and pivot
        swap(a, i + 1, right);
        return i + 1;
    } 
```

并在您的快速排序方法中：

```
if (left < index)
  quickSort(a, left, index-1);
if (index < right)
  quickSort(a, index + 1, right); 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T22:16:03.770

```
int pivot = a[0]; 
```

应该

```
int pivot = a[left]; 
```

那，随着更改`swap (a, i, j);`为`swap (a, i--, j++);`，[一切似乎都工作正常](http://ideone.com/27kE5r)。

**为什么上述变化：**

枢轴应该是范围中的第一个元素，而不是第一个元素。

也不应该在这个中间，就像这里：

```
int pivot = a[(left + right) / 2]; 
```

您希望枢轴成为哪个元素并不重要，最简单的方法是始终将所选元素与第一个元素交换，然后照常继续。可能还有其他的做事方式，但这些方式可能会更复杂。

所以你可以说：

```
swap(left, (left + right) / 2);
int pivot = a[left]; 
```

这与上述非常相似（不完全相同），只是更容易处理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-23T21:36:13.290

我认为该`partition`方法应该返回`j`而不是`i`.

您的代码中的另一个问题是您的停止条件：

而不是两个单独的条件，我将其更改为单个条件：

```
if (left < right)  {

  do partition & recursive calls

} 
```

完整代码：

```
public void quickSort(int[] a, int left, int right) {
    if (left < right) {
      int index = partition(a, left, right);
      quickSort(a, left, index);
      quickSort(a, index + 1, right);
    }
}

private int partition (int[] a, int left, int right) {
    int i = left - 1;
    int j = right + 1;
    int pivot = a[(left+right)/2];

    while (i < j) {

        i++;

        while (a[i] < pivot)
            i++;

        j--;

        while (a[j] > pivot)
            j--;

        if (i < j)
            swap (a, i, j);
    }
    return j;
}   

private void swap (int[] a, int i, int j) {
    int temp = a[i];
    a[i] = a[j];
    a[j] = temp;
} 
```

# wordpress - 仅当当前页面在菜单中时才显示菜单

> ID：15045489
> 
> 赞同：2
> 
> 时间：2013-02-23T20:46:41.570
> 
> 标签：wordpress, wordpress-theming

是否可以根据当前页面是否存在于菜单中来有条件地显示菜单？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T09:03:47.287

您可以使用以下代码。循环遍历每个菜单中的每个项目，并检查该项目是否存在。如果是，则显示菜单并转到下一个菜单。

```
 <?php 
    // get array of nav menus
    $menus = wp_get_nav_menus(); 

    //get current page URL
    $uri = $_SERVER['REQUEST_URI'];

    //loop through each menu looking for current page
    foreach($menus as $menu)
    {
        //get menu items from ith menu in loop
        $items = wp_get_nav_menu_items( $menu->term_id );

        //loop through each item in menu to check for 
        foreach($items as $item)
        {
            if( strpos($item->url, $uri) !== false )
            {
                //display menu
                wp_nav_menu( array('menu'=>$menu->term_id) );

                //current menu done, check next menu
                break;
            }
        }
    }
    ?> 
```

所有相关的 Wordpress 功能用法都可以在 codex 中找到，也可以通过 Google Search 找到。

# php - 在 Wordpress 中按 TAG ID 获取页面

> ID：15045515
> 
> 赞同：0
> 
> 时间：2013-02-23T20:49:14.020
> 
> 标签：php, wordpress, wordpress-theming, tagging

所以我有一个 php 脚本需要检索某个“页面”，而不是帖子，而是一个页面，在 wordpress 中，我想检索一个指向特定标签的页面。我想知道如何检索特定页面，它需要的唯一参数是 tag->term_id。

我尝试在谷歌搜索来实现这一点。这可能吗？

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:55:12.373

使用`WP_Query`with `post_type`set to`page`查询数据库中的页面。您可以使用该`tag_id`参数按标签缩小范围。`posts_per_page`使用set to将其限制为一个结果`1`。

```
//narrow down your query with $args
$args = array('post_type'=>'page', 'tag_id'=>3, 'posts_per_page'=>1);

// The Query
$the_query = new WP_Query( $args );

// The Loop
while ( $the_query->have_posts() ) :
    $the_query->the_post();
    echo '<li>' . get_the_title() . '</li>';
endwhile; 
```

[http://codex.wordpress.org/Class_Reference/WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)

# php - 将 if 语句放在 echo 中

> ID：15045518
> 
> 赞同：0
> 
> 时间：2013-02-23T20:49:29.563
> 
> 标签：php

我有一行看起来像这样的代码：

```
echo "Slope intercept form: $$"."y = ".toFraction($slope)."x + $b"."$$"; 
```

但是，我想添加一个 if 语句来检查数字是否为小数以运行函数“toFraction”。如果它不是分数，我希望它只是在没有函数的情况下回显 $slope 变量。换句话说，是这样的：

```
echo "Slope intercept form: $$"."y = ".if(strpos($number,".") !== false){toFraction($slope)}else{$slope}."x + $b"."$$"; 
```

但是，我不确定这是否可能，或者如果是，那么完成它的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T20:53:25.753

语法错误你可以使用内联 if with `?`and `:`：

```
echo "Slope intercept form: $$"."y = ".(strpos($number,".") !== false ? toFraction($slope) : $slope) . "x + $b"."$$"; 
```

或尝试以下语法：

```
echo "Slope intercept form: $$"."y = ";
if(strpos($number,".") !== false) {
    echo toFraction($slope)
} else {
    echo $slope;
}
echo "x + $b"."$$"; 
```

内联 ifs 的语法模式如下所示：`(`*condition* `?`*true path* `:`*false path*`)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T20:52:01.157

使用[三元运算符](http://php.net/manual/en/language.operators.comparison.php)

```
echo "Slope intercept form: $$"."y = ".((strpos($number,".") !== false) ? toFraction($slope): $slope)."x + $b"."$$"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T20:52:27.867

```
echo "Slope intercept form: $$"."y = " . ((strpos($number,".") !== false ? toFraction($slope) : $slope) . "x + $b" . "$$"); 
```

使用[三元运算符](http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T20:54:18.537

```
echo "Slope intercept form: $$"."y = ";
if(strpos($number,".") !== false) echo toFraction($slope); else echo $slope;
echo "x + $b"."$$"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-23T20:58:14.700

请记住两条简单的规则：

1.  尝试垂直书写，而不是水平书写。长语句要么不可读，要么晦涩难懂。
2.  三元运算符很丑陋。

所以

```
if (strpos($number,".") !== false) {
    $slope = toFraction($slope);
}
echo 'Slope intercept form: $$y = '.$slope.'x + '.$b.'$$'; 
```

# c# - 如果在远程服务器机器上运行应用程序，TCP 连接将被终止 - 奇怪的行为

> ID：15045520
> 
> 赞同：2
> 
> 时间：2013-02-23T20:49:39.397
> 
> 标签：c#, windows, sockets, networking, tcp

所以，我知道这个问题会有点“模糊”，因为我不能给你任何关于这个问题的代码示例，但我会尝试解释这个问题，也许有人会认出它。

基本上，我有两个应用程序，都是用 C# 编写的。

[App A] 通过 TCP 套接字连接到 [App B] 并发送数据，[App B] 当然可以在同一个 TCP 连接上将数据发送回 [App A]。【App B】是一款已经使用了6-7年，在“生产服务器”上运行良好的应用。

问题是这样的：

如果我在本地机器上运行 [App A] 和 [App B]，则 comm. 他们之间的工作就像预期的那样。

但是，如果我在服务器/远程机器上运行 [App A] 和 [App B]（两者都在同一台机器上运行，但在远程服务器上运行），那么它们之间的通信将无法按预期工作。然后[App A]连接并管理向[App B]发送数据，[App B]做出相应反应并将回复发送给[App A]，但[App A]从未收到回复，而是我看到TCP 连接被终止。

如果我在本地机器上运行完全相同的代码，则不会发生这种情况*。*

现在，如果我改为在本地机器上运行 [App A]，并且 [App A] 连接到远程/服务器机器上的 [App B]，那么它也可以按预期工作，即。通讯。工作和 TCP 连接保持活跃。

如果我让 [App B] 继续在远程服务器上运行，而是在远程服务器（而不是我的本地机器）上启动 [App A]，那么它就不再工作了；[App A] 发送数据后，TCP 连接被终止。

在我看来，这不是代码的问题，因为它可以在本地工作，而且如果我在不同的机器上运行应用程序，对吗？

我在两台机器上运行 Windows，本地 Win 7 和远程/服务器机器上的 Win Server 2003，使用 .NET 4.0。

这会敲响警钟吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T20:57:25.520

在黑暗中刺伤，因为没有什么可做的。我的随机猜测是 App A 或 App B 使用的端口之一正在服务器/远程机器上使用。相同的端口可能在您的本地计算机上免费可用，因此您不会观察到相同的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T20:51:56.480

听起来很像运行 App A 的服务器具有本地防火墙设置或物理防火墙，阻止来自 App B 的服务器的入站连接。

检查您正在侦听的端口，连接类型（TCP 或 UDP）是否允许入站连接。

# javascript - 如果不是 Opera Mini

> ID：15045527
> 
> 赞同：2
> 
> 时间：2013-02-23T20:50:18.923
> 
> 标签：javascript, jquery, html, opera, opera-mini

这个问题很简单，但我还是想问。

这段代码告诉我们用户的浏览器是著名的**Opera Mini**

```
var isOperaMini = (navigator.userAgent.indexOf('Opera Mini') > -1); 
```

所以我可以这样使用它：

```
if (navigator.userAgent.indexOf('Opera Mini') > -1)
    alert('hey! your browser is buggy'); 
```

这是`if Opera Mini, then`有条件的。

如何使**正确的短条件**为`if not Opera mini, then`？

我不确定我应该如何玩`-1`整数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T20:54:34.777

您可以简单地将其更改为

```
if (navigator.userAgent.indexOf('Opera Mini') == -1) 
```

如果在用户代理字符串中未找到“Opera Mini”，则返回 true

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-03T21:00:51.250

来自[Opera 文档](https://dev.opera.com/articles/opera-mini-and-javascript/)：

> **检测 Opera Mini**：2 种方法：您可以：
> 
> 1.  检查用户代理字符串
>     
>     
> 2.  检查是否存在operamini 对象

即如果不是 Opera Mini 是：

`if (!window.operamini){}`

简短、简单、可靠。与可欺骗的用户代理不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T21:00:20.880

使用运算符的另一个选项（可能不太可读）`~`：

```
if (~navigator.userAgent.indexOf('Opera Mini')) {
    // opera mini
}

if (!~navigator.userAgent.indexOf('Opera Mini')) {
    // not opera mini
} 
```

但是`-1`，在您熟悉语法之前，与 进行比较可能会更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-02T08:12:35.303

[https://dev.opera.com/articles/opera-mini-and-javascript/](https://dev.opera.com/articles/opera-mini-and-javascript/)

```
var isOperaMini = Object.prototype.toString.call(window.operamini) === "[object OperaMini]" 
```

# zend-framework - Zend 自动加载在引导程序中不起作用

> ID：15045530
> 
> 赞同：1
> 
> 时间：2013-02-23T20:50:37.467
> 
> 标签：zend-framework, bootstrapping, zend-autoloader

我用zend框架开发了一个网站。我使用自动加载来加载一个类。它适用于控制器，模型，但不适用于引导文件。为什么？

引导程序.php

```
 protected function _initAutoload ()
    {
        // Add autoloader empty namespace
        $autoLoader = Zend_Loader_Autoloader::getInstance();
        $resourceLoader = new Zend_Loader_Autoloader_Resource(
                array('basePath' => APPLICATION_PATH, 'namespace' => '',
                        'resourceTypes' => array(
                                'form' => array('path' => 'forms/', 'namespace' => 'Form_'),
                                'model' => array('path' => 'models/', 'namespace' => 'Model_'),
                                'plugin' => array('path' => 'plugin/', 'namespace' => 'Plugin_'))));
        // viene restituto l'oggetto per essere utilizzato e memorizzato nel bootstrap
        return $autoLoader;
    }
    /**
     * inizializza l'autenticazione
     */
    protected function _initAuth ()
    {
        $this->bootstrap("db");
        $this->bootstrap("Autoload");
        $db = $this->getPluginResource('db')->getDbAdapter();
        $adp = new Zend_Auth_Adapter_DbTable($db);
        $adp->setTableName(USERS_TABLE)
        ->setIdentityColumn('username')
        ->setCredentialColumn('password')
        ->setCredentialTreatment('sha1(?)');
        $storage = new Model_Sessions(false, $db);//line 81
        $auth = Zend_Auth::getInstance();
        $auth->setStorage($storage);
        //$this->bootstrap('log');$log=$this->getResource('log');
        if ($auth->hasIdentity()) {
            $identity = $auth->getIdentity();
            $user = $identity->user_id;
        } else
            $user = 1;
        $user = new Model_user($user);
    } 
```

输出错误

致命错误：在第 81 行的 /application/Bootstrap.php 中找不到类“Model_Sessions”

在 Session.php

```
 <?php
/**
 * @method get($k,$dv=FALSE)
 */
class Model_Sessions implements Zend_Auth_Storage_Interface
{ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T02:52:08.060

您的资源自动加载器看起来不错。

我怀疑你想要`Model_Sessions`，而不是`Model_sessions`（不是“会话”上的小写/大写）。

确保类`Model_Sessions`存储在文件中`application/models/Sessions.php`

作为旁注，您的资源自动加载器正在寻找具有命名空间前缀的插件`plugins_`。同样，在这里，我怀疑你想要大写`Plugins_`。

# python - 文件更改事件网络共享

> ID：15045532
> 
> 赞同：4
> 
> 时间：2013-02-23T20:51:04.603
> 
> 标签：python, windows, events, python-3.3

**我想做的事：**

我有两个目录。每个包含大约 90.000 个 xml 和 bak 文件。

当文件更改时，我需要 xml 文件在两个文件夹中同步（当然应该复制较新的文件）。

**问题是：**

由于文件数量巨大，而且其中一个目录是网络共享，我不能只循环目录并比较`os.path.getmtime(file)`值。

甚至看门狗和 PyQt 也不起作用（从[这里](https://stackoverflow.com/questions/182197/how-do-i-watch-a-file-for-changes-using-python)和[这里](https://stackoverflow.com/questions/5738442/detect-file-change-without-polling)尝试了解决方案）。

**问题：**

有没有其他方法来获取文件更改事件（在 Windows 系统上），它适用于那些配置而不循环所有这些文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:05:02.683

所以我终于找到了解决方案：我更改了一些网络共享设置并使用了[FileSystemWatcher](http://timgolden.me.uk/python/win32_how_do_i/watch_directory_for_changes.html)

为了防止文件在同步时同步，我使用 md5 文件哈希。

我使用的代码可以在[pastebin](http://pastebin.com/Jc8EJ57G)找到（这是一个快速而肮脏的代码，只是这里的问题中提到的部分）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T18:47:57.220

中的代码...

[https://stackoverflow.com/a/12345282/976427](https://stackoverflow.com/a/12345282/976427)

通过网络共享时似乎对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T06:38:30.143

我冒着给出一个离这里很远的答案的风险（你没有指定关于速度等的要求）但是...... [Dropbox](http://www.dropbox.com)会免费为你做这件事，并且根本不需要编写任何代码。

当然，如果您需要实时同步，或者您想避免与第三方“共享”您的文件（尽管您可以先加密它们），它可能不适合您的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T21:36:01.947

您可以使用此页面上的第二个选项吗？

[http://timgolden.me.uk/python/win32_how_do_i/watch_directory_for_changes.html](http://timgolden.me.uk/python/win32_how_do_i/watch_directory_for_changes.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T09:51:15.580

提到看门狗，我假设您在 Linux 下运行。对于本地机器 inotify 可以提供帮助，但对于网络共享，您就不走运了。Mercurial 的 inotify 扩展[http://hgbook.red-bean.com/read/adding-functionality-with-extensions.html](http://hgbook.red-bean.com/read/adding-functionality-with-extensions.html) 有同样的限制。

在类似的情况下（10K+ 文件），我在服务器和本地机器上都使用了带有 inotify 的克隆 mercurial 存储库。他们自动提交并通知对方更改。它有一点延迟（在我的情况下没问题），但作为一个好处，它有完整的更改历史，并且在其中一个系统关闭后很容易重新同步。

# cordova - 是否有用于 angularjs 的 UI 库用于 phonegap 应用程序？

> ID：15045533
> 
> 赞同：9
> 
> 时间：2013-02-23T20:51:15.537
> 
> 标签：cordova, angularjs

我正在将 angularjs 视为开发 phonegap 应用程序的一种选择。您如何使用幻灯片、翻转、带有历史记录的标题栏、列表等创建移动体验？

我一直在看 morpheus ( [https://github.com/ded/morpheus](https://github.com/ded/morpheus)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-23T23:51:38.263

您可以使用[Lungo.JS](http://lungo.tapquo.com) + Angular + 一段桥接代码，想象地称为 Lungo-Angular-Bridge - [https://github.com/centralway/lungo-angular-bridge](https://github.com/centralway/lungo-angular-bridge)（免责声明，我写了它：D）。

我们发现 Lungo.JS 在移动设备上表现出色，我们的一位 JS 人员评论说“它甚至比原生更好！” - 您唯一的问题是 Lungo 是根据 GPL3 获得许可的，尽管有商业许可可用（其价格不是敲诈勒索的）。

您可以在此处找到 Lungo 的“厨房水槽”演示：lungo.tapquo.com/example/index.html 它们并不真正支持部署为应用程序（即 Phonegap），但这是我们的目标。

我们的桥接代码仍然是 alpha 版，尽管我们正在开发两个基于它的应用程序，因此我们很快就能找到并修复问题。事实上，我最好现在就去修一个。

**编辑**

至少一年左右的时间，将可爱的[Ionic 框架](http://ionicframework.com "离子框架")用于您直接部署到手机中的混合应用程序（而不是移动 web 应用程序）。

我最初建议的框架已不再使用。它所基于的 UI 框架 Lugo.JS*仍在*开发中。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-08T03:58:14.913

[只需为我们自己的Ionic 框架](http://ionicframework.com/)添加一个插件，该框架是专门使用 AngularJS 构建的。此外，它是 MIT 许可的，因此您可以在开源和商业项目中免费使用它。

我们尝试提供一个 UI 库，让您可以创建原生风格的界面。对于现代手机，您可以使用 HTML5 做的事情令人惊叹，而且我们在提供动画和手势方面绝对是积极进取的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-23T20:55:03.793

我专门为 phonegap 应用程序制作了[angular-mobile-nav :-)。](http://github.com/ajoslin/angular-mobile-nav)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-23T21:20:33.333

感谢[https://github.com/tigbro/jquery-mobile-angular-adapter ，您可以将 Angular 与 jQuery Mobile 一起使用](https://github.com/tigbro/jquery-mobile-angular-adapter)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-13T07:05:25.383

您可以使用英特尔 App Framework UI 和 AngularJS 来获取幻灯片、翻转、带有历史记录的标题栏等内容。

我还没有尝试过，但看起来[这](https://forums.html5dev-software.intel.com/viewtopic.php?f=26&t=4746&p=18601&hilit=angular#p17496)是一个很好的起点。

# xml - xml 模式根据父属性选择子元素

> ID：15045539
> 
> 赞同：0
> 
> 时间：2013-02-23T20:51:24.680
> 
> 标签：xml, xsd

我有一个父元素（产品），其属性（类别）可以采用 2 个值中的任何一个（易腐烂和非易腐烂）。如果物品是易腐烂的，我想要子元素“食物”，如果它不是易腐烂的，我想要子元素“库存”。从外观来看，我认为这可以在 XSD 1.1 中完成，但不能在 XSD 1.0 中完成。但是，我没有找到如何做到这一点。

下面是我的代码，缩短以显示重要部分：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
 <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
   <xs:element name="products">
     <xs:complexType>
      <xs:sequence>
       <xs:element name="product" minOccurs="1" maxOccurs="unbounded">
         <xs:complexType>
           <xs:sequence>
             <xs:element name="name" type="xs:string"/>
             <xs:choice>
               <xs:element name="food">
                 <xs:complexType>
                   /*DEFINED FOOD HERE*?
                 </xs:complexType>
               </xs:element>
               <xs:element name="stock">
                 <xs:complexType>
                   /*DEFINED STOCK HERE*/
                 </xs:complexType>
               </xs:element>
             </xs:choice>
           </xs:sequence>
           <xs:attribute name="id" type="xs:ID"/>
           <xs:attribute name="category">
             <xs:simpleType>
               <xs:restriction base="xs:string">
                 <xs:enumeration value="perishable"/>
                 <xs:enumeration value="nonPerishable"/>
               </xs:restriction>
             </xs:simpleType>
           </xs:attribute>
         </xs:complexType>
       </xs:element>
      </xs:sequence>
     </xs:complexType>
   </xs:element>
 </xs:schema> 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:02:18.953

如果您正在寻找类似的东西：

```
 <perishable>
     <food>cheese</food>
    </perishable>

<xs:element name="perishable">
  <xs:complexType>
    <xs:sequence>
      <xs:element name="food" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

# ios - 如何使用某种形式的数据持久性在我的应用程序中保留文本类型数据

> ID：15045540
> 
> 赞同：1
> 
> 时间：2013-02-23T20:51:31.237
> 
> 标签：ios, iphone, ios6, data-persistence

我需要在我的第一个应用程序中输入一些实质性的文本，这些文本会随着整个月的日期变化（即每天）而变化。

这些数据，我目前将其全部保存在一个 .doc 文件中，该文件中每天的内容都已正确分隔。

我可以使用什么方法将这些数据存储在我的应用程序中，以及如何以这样一种方式格式化它，即应用程序获取文本的日期部分并使用它来确定它是否应该显示文本的特定部分天。

该应用程序将每月更新内容。

我到处看了看，我看到的关于持久数据的帖子让我更加困惑。这可能只使用 plists 吗？数据将始终是文本，而不是图像或其他任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:10:00.557

如果您发布文本示例，我们可能会给您一个更好的答案（不清楚您在问什么），但这听起来像是**[core data](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)****或****[sqlite](https://github.com/ccgus/fmdb)****的完美候选者**。将**文本按日期/文本组合分隔后，**按适当的日期进行搜索并仅显示相关文本就变得非常简单。

顺便说一句，以 *.doc 格式保存它只会增加不必要的开销。如果你真的想把它放在一个平面文件中，使用类似 json.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T21:27:36.307

对于 plist 来说，这看起来有点多。您可以使用核心数据或 sqlite，但也有更简单的选择，即拥有单独的纯文本文件并阅读它们，如[本问题所示](https://stackoverflow.com/questions/1492335/read-text-file-programmatically-using-objective-c)。

# ios - iOS：在没有 API 的 UIWebView 中显示 Google 搜索结果

> ID：15045543
> 
> 赞同：3
> 
> 时间：2013-02-23T20:51:36.100
> 
> 标签：ios

我有一个 iOS 应用程序，用户可以在其中选择关键字，该应用程序将通过应用程序内显示来自 Google 的搜索结果`UIWebView`。

例如，一个用户选择`my term name`，我构造了这个 URL: `https://www.google.com/search?q=my+term+name`，然后在一个`UIWebView`.

这是否违反了 Google 的服务条款？我是否需要在 URL 中包含任何类型的身份验证凭据？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T08:10:52.027

如果您只是显示一个谷歌网页，那很好。您所做的只是构建一个 URL 并显示结果。如果您正在解析/抓取结果，那么您将遇到法律问题。如果出现问题，诸如 lmgtfy 之类的服务将不合法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-01T10:07:30.637

很简单....试试这个：

```
 Google Search = http://google.com/search?q=ios 
```

对于其他搜索引擎：

1.  雅虎搜索 = [http://search.yahoo.com/?q=ios](http://search.yahoo.com/?q=ios)
2.  必应搜索 = [http://www.bing.com/search?q=ios](http://www.bing.com/search?q=ios)
3.  询问搜索 = [http://www.ask.com/web?q=ios](http://www.ask.com/web?q=ios)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T01:30:54.157

直接从 goog html 抓取结果违反了他们的 TOS。

第 5.3 条谷歌服务条款：

“您明确同意不通过任何自动化方式（包括使用脚本或网络爬虫）访问（或试图访问）任何服务......”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T12:37:15.970

你可以使用

```
-(void)recivedRequest {

    //load the request to a web view
    [webView loadRequest:[NSUrlConnection connectionWithURL:[URL urlWithString:[NSString stringWithFormat:@"http://www.google.com/search?q=my+term+name"]]]]; 
```

或者，如果您想在加载请求之前创建一个字符串，您可以这样做：

```
-(void)recivedRequest {

    //create a NSString with the keyword
    NSString *keyWord = @"my+term+name";

    //load the request to a web view
    [webView loadRequest:[NSUrlRequest requestWithURL:[NSURL urlWithString:[NSString stringWithFormat:@"http://www.google.com/search?q=%@", keyWord]]]]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T11:56:01.070

不，它不需要任何身份验证凭据或某些证书即可查看您 ios 设备中的 Google 链接。

我你认为它会有任何问题然后你可以制作多个网页并使用phoneGap在iOS中使用它们。

# java - 图像不使用画布抗锯齿

> ID：15045553
> 
> 赞同：0
> 
> 时间：2013-02-23T20:52:26.323
> 
> 标签：java, android, android-canvas

我正在尝试使用画布显示图像 .png 但由于某种原因我无法让它工作，图像没有抗锯齿。这使得它在曲线或对角线上全部像素化。

这是我正在使用的代码：

```
Pixmap button = g.newPixmap("button.png");

@Override
public Pixmap newPixmap(String fileName) {
  Config config = Config.ARGB_8888;

  Options options = new Options();
  options.inPreferredConfig = config;

  InputStream in = null;
  Bitmap bitmap = null;
  try {
    in = manager.open(fileName);
    bitmap = BitmapFactory.decodeStream(in, null, options);
    if (bitmap == null)
      throw new RuntimeException("Couldn't load bitmap from asset '" + fileName + "'");
  } catch (IOException e) {
    throw new RuntimeException("Couldn't load bitmap from asset '" + fileName + "'");
  } finally {
    if (in != null) {
      try {
        in.close();
      } catch (IOException e) {
      }
    }
  }

  return new Pixmap(bitmap);
}

g.drawPixmap(button);

@Override
public void drawPixmap(Pixmap pixmap) {
  srcRect = new Rect(0, 0, pixmap.getOriginalWidth(), pixmap.getOriginalHeight());
  dstRect = new Rect(pixmap.getX(), pixmap.getY(), pixmap.getX() + pixmap.getVirtualWidth(), pixmap.getY() + pixmap.getVirtualHeight());
  canvas.drawBitmap(pixmap.bitmap, srcRect, dstRect, paint); 
} 
```

我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T20:58:07.880

尝试：

```
paint.setAntiAlias(true);
paint.setFilterBitmap(true);
paint.setDither(true); 
```

或者：

```
Paint paint = new Paint(Paint.FILTER_BITMAP_FLAG); 
```

# adobe - 是否可以在不使用任何 3rd 方软件/服务的情况下对 EPub 文件进行 DRM？

> ID：15045555
> 
> 赞同：0
> 
> 时间：2013-02-23T20:53:08.460
> 
> 标签：adobe, epub, drm

我正在寻找一种方法来为 EPub 文件添加 DRM 保护，而无需以 6500 美元的价格购买 Adob​​e 软件或使用任何第三方服务。我们想建立自己的 DRM 服务器。

场景：我上传了一个hello world EPub文件，系统添加了DRM。是否可以？

我多次听到这是不可能的，但有人可以澄清原因吗？Adobe DRM 究竟是如何工作的，为什么我不能构建自己的 DRM 服务器？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:35:07.263

问题不在于构建 DRM 服务器。你可以这样做。问题是没有标准的电子阅读器软件或硬件能够处理您的 DRM 风格，因此用户将无法阅读您的书籍。因此，您最终将不得不提供 DRM 服务器和电子阅读器软件的完整端到端环境。如果您能够坚持让用户安装您的电子阅读器软件，这可能是一种选择。

# c - 有 C 语言的字典库吗？

> ID：15045558
> 
> 赞同：2
> 
> 时间：2013-02-23T20:53:20.607
> 
> 标签：c, dictionary

我想知道是否有任何用于 C 的字典库。字典库，字面意思（它与 python 字典（哈希图）无关）。使用英语的所有单词，并使用诸如...之类的工具

“我想打印所有以 C 开头并以 Y 结尾的单词”。

我不会谷歌它，因为我真的很想知道你的意见，如果有什么特别好的。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T20:59:15.400

您可能想从查看[Aspell](http://aspell.net/)开始。虽然它主要用作拼写检查器，但 Aspell 还支持一次使用多个字典，并在同时打开多个 Aspell 进程时智能地处理个人字典。我不相信您也必须连接到 Internet 才能使用它。

[维基词典](http://en.wiktionary.org/wiki/Main_page)也可能有帮助。有*很多*本地化的变体来支持不同的语言，如果还没有的话，可能会有一种方法让他们支持你感兴趣的语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T21:03:06.820

如果您不介意使用 Internet 来完成这项任务，这里有很棒的[Wordnik API 。](http://developer.wordnik.com)API 相当简单，并且支持正则表达式搜索。您正在寻找的方法是[`/words.{format}/search/{query}`](http://developer.wordnik.com/docs#!/words/search_words)

它还具有检索含义 ( [`/word.{format}/{word}/definitions`](http://developer.wordnik.com/docs#!/word/get_definitions))、同义词 ( [`/word.{format}/{word}/relatedWords`](http://developer.wordnik.com/docs#!/word/get_related_words)) 和许多其他内容的方法。

目前还没有 C 包装器，尽管直接将 API 与 libcurl 和任何 JSON 或 XML 解析器一起使用非常容易。

# glsl - gl_ModelViewProjectionMatrix 与 gl_ModelViewMatrix

> ID：15045562
> 
> 赞同：1
> 
> 时间：2013-02-23T20:53:44.367
> 
> 标签：glsl, shader

我是 GLSL 的初学者。我正在阅读顶点着色器代码，但我不明白这部分代码：

```
out vec3 position;
...
gl_Position=gl_ModelViewProjectionMatrix*gl_Vertex; 
position=vec3(gl_ModelViewMatrix*gl_Vertex); 
```

gl_ModelViewProjectionMatrix 和 gl_ModelViewMatrix 有什么区别？

gl_Position 和 position 有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:18:08.583

您可能会怀疑，gl_ModelViewProjectionMatrix 是 gl_ModelViewMatrix 加上投影 - 即透视相机失真。

gl_Position 是一个预定义的变量，意思是“这个顶点着色器的投影结果”（所有顶点着色器都需要为 gl_Position 分配一个值），而值“位置”是一个额外的程序员定义的值，伴随着骑行（为什么是不可能的，取决于整个shader）

# java - 谁能告诉我我做错了什么？- 堆栈

> ID：15045571
> 
> 赞同：1
> 
> 时间：2013-02-23T20:55:16.553
> 
> 标签：java, methods, stack, counter

我需要编写一个方法，压缩执行以下操作；

compress 方法的目标是从堆栈 s1 中删除所有空元素。其余（非空）元素应按初始顺序保留在 s1 上。辅助堆栈 s2 应用作 s1 中元素的临时存储。在该方法的计算结束时，堆栈 s2 应该与计算开始时的内容相同。有关方法 compress 的预期行为的示例，请参见方法 main。

到目前为止，我有；

```
import net.datastructures.ArrayStack;
import net.datastructures.Stack;

public class Stacks {

public static <E> void compress(Stack<E> S1, Stack<E> S2) {

    int counter = 0;
    while (!S1.isEmpty()) {

    }
    if (S1.top() == null) {
        S1.pop();
    } else if (S1.top() != null) {
        S2.push(S1.pop());

        counter++;
    }

    for (int i = counter; i < counter; i++) {

        S2.push(S1.pop());
    }
}

public static void main(String[] args) {
    // test method compress
    Stack<Integer> S1 = new ArrayStack<Integer>(10);
    S1.push(2);
    S1.push(null);
    S1.push(null);
    S1.push(4);
    S1.push(6);
    S1.push(null);

    Stack<Integer> S2 = new ArrayStack<Integer>(10);
    S2.push(7);
    S2.push(9);

    System.out.println("stack S1: " + S1);
    // prints: "stack S1: [2, null, null, 4, 6, null]"

    System.out.println("stack S2: " + S2);
    // prints: "stack s2: [7, 9]"

    compress(S1, S2);

    System.out.println("stack S1: " + S1);
    // should print: "stack S1: [2, 4, 6]"

    System.out.println("stack S2: " + S2);
    // should print: "stack S2: [7, 9]"
}

} 
```

我不知道哪里出错了，代码在 compress 方法之前打印了两行，然后什么也不打印。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:02:49.840

我在您的代码中发现了两个错误。每个周期一个。

1.  您的`while`循环应该在它之后包装条件。
2.  您的`for`循环的增量变量分配错误。

正确的版本应该是：

```
public static <E> void compress(Stack<E> S1, Stack<E> S2) {
    int counter = 0;

    while (!S1.isEmpty()) {
        if (S1.top() == null) {
            S1.pop();
        } else {
            S2.push(S1.pop());
            counter++;
        }
    }

    for (int i = 0; i < counter; i++) {
        S1.push(S2.pop());
    }
} 
```

**编辑：**等效`for`循环（也许你试图写这个）可能如下。

```
for (int i = counter; i > 0; i--) {
    S1.push(S2.pop());
} 
```

**第二次编辑：**循环中的变量`for`被切换（S2 在 S1 的位置，反之亦然）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:11:51.227

```
while (!S1.isEmpty()) {

} 
```

就在那里，你有一个无限循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T21:17:26.730

我想在你的 while() 中写 if...else 如下

```
while (!S1.isEmpty()) {
if (S1.top() == null) {
    S1.pop();
} else if (S1.top() != null) {
    S2.push(S1.pop());

    counter++;
} 
```

}

在你的里面它必须是这样的

```
for (int i = counter; i < counter; i++) {

    S1.push(S2.pop());
} 
```

猜它应该工作

# php - 动态标头重定向后会话失败

> ID：15045572
> 
> 赞同：0
> 
> 时间：2013-02-23T20:55:29.823
> 
> 标签：php, session, redirect, session-variables

我已经为此苦苦挣扎了很长时间，并且已经阅读了数十篇与之相关的帖子，但没有任何东西可以帮助我解决这个问题。

我有一个检查设置，所以如果您没有登录我的网站，它会将您发送到登录页面，其中包含一个`$_GET`变量，其中包含成功登录后需要重定向回的信息。

在登录页面上，我将 HTML 表单发送到“ `checklogin.php`”文件，以便在用户名和密码与数据库匹配的情况下登录用户（这次我还将`$_GET`重定向的原始变量作为`$_POST`变量传递，以保持 '面包屑的连接）。如果登录信息匹配，我将启动一个会话并为会话变量分配有关用户的一些信息。

在页面底部，成功登录后，我这样做是为了回到之前的位置：

```
$go = "http://something/page.php?id=".$_POST['breadcrumb'];
header($go); 
```

这有效......最初（会话变量成功传递给`page.php`）。但是随后用户点击进入的*下一页*，会话结束并且他/她不再登录。

太令人沮丧了！**位于`session_start()`每一页的顶部。**当用户在没有动态标头重定向（没有`$_POST['breadcrumb']`）的情况下登录时，会话始终是成功的。

我尝试了许多不同的解决方案，但没有解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:08:49.327

您是否检查了所有代码以确保某处没有会话破坏？您也可以尝试使用 $_SERVER['REQUEST_URI']; 要获取您的重定向网址，然后只需将其插入标题代码中即可。

```
header("location: <breadcrumb>); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T18:41:36.217

问题是我没有在整个网站上保持我的 url 重定向一致。有时我有

```
www.website.com/home.php 
```

有时我有

```
/home.php 
```

这搞砸了$SESSION。

解决方案是在 URL 的开头保持我的标头重定向全部一致，而没有（或全部一致）“www.website.com”。

# javascript - 为什么我不能得到 scrollTop()

> ID：15045573
> 
> 赞同：0
> 
> 时间：2013-02-23T20:55:33.510
> 
> 标签：javascript, scrolltop

我试图让一个元素出现在某个滚动发生后我正在使用 scrollTop() 但我总是得到 0。

```
$(document).on("mousewheel", function(){
                   console.log($(window).scrollTop());
               }); 
```

而不是`window`我已经尝试过`body`，但是对于所有这些`#wrapper`，`document`我得到一个常数 0。我缺少什么来获得正确的阅读？（`#wrapper`没有设定高度，只有宽度。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:07:58.163

您是否将代码放在 $(document).ready() 下，换句话说，[DomContentLoaded](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/DOMContentLoaded_%28event%29)事件是否在您的代码执行之前触发？

.scrollTop() 只有在文档完全加载后才会给出正确的结果。

你能举一个详细的例子吗？

旁注： $(document).on('event', callback) 与文档是否完全加载无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:26:29.960

问题 - 它必须是“鼠标滚轮”吗？除非您使用 jquery 插件，否则我不相信有鼠标滚轮处理程序。

这样做，它对我有用：

```
 $(document).on("scroll", function(){
               console.log($(window).scrollTop());
           }); 
```

# php - 不同的 SQL / PHP 行为（仅返回 1 行）

> ID：15045580
> 
> 赞同：0
> 
> 时间：2013-02-23T20:56:08.713
> 
> 标签：php, sql, arrays, distinct

我的 PHP / SQL 有点问题。这是代码：

代码：

```
$query = "SELECT DISTINCT student FROM classes LIMIT 100";
$result = mysqli_query($link, $query);
$row = mysqli_fetch_array($result, MYSQLI_NUM);
print_r($row); 
```

手动运行查询后，我得到了大约 40 个返回值。那里一切都好。但是，当我执行 print_r 时，我只得到第一个返回值，即 $row 数组只有一个条目。链接和数据库很好，它似乎是我的数组处理。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T20:58:34.767

您需要遍历返回的行。试试这个：

```
$query = "SELECT DISTINCT student FROM classes LIMIT 100";
$result = mysqli_query($link, $query);
while($row = mysqli_fetch_array($result, MYSQLI_NUM)) {
    print_r($row);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T20:59:17.397

该函数`mysqli_fetch_array`一次只获取一行。考虑在循环中使用它：

```
while($row = mysqli_fetch_array($result, MYSQLI_NUM))
{
    print_r($row);
} 
```

# java - Java如何选择字符串的一半？

> ID：15045581
> 
> 赞同：0
> 
> 时间：2013-02-23T20:56:10.593
> 
> 标签：java, html, string

我有这样的字符串：

```
<html>
<body>
<p>Hello</p>
</body>
</html> 
```

在java中我想在选择字符串之后看起来像这样：

```
<p>Hello</p> 
```

如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T20:56:52.840

如果您正在处理 HTML 解析，请使用[JSoup](http://jsoup.org)

```
String html = "<html><body><p>Hello</p></body></html>";
Document doc = Jsoup.parseBodyFragment(html);
Elements fragment = doc.select("p"); // p tag
System.out.println(fragment.html()); 
```

*   [快速链接](http://jsoup.org/cookbook/extracting-data/selector-syntax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:06:17.593

这一行应该做到这一点：

```
String text = input.replaceAll("(?s).*(<p>.*</p>).*", "$1"); 
```

或者只是获取`<body>`标签中的所有内容，请执行以下操作：

```
String text = input.replaceAll("(?s).*<body>(.*)</body>.*", "$1"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T16:49:04.667

你可以使用[JSoup](http://jsoup.org/cookbook/extracting-data/selector-syntax)，它对你来说很方便。

# python - 在 Python 中解开熊猫数据框？

> ID：15045582
> 
> 赞同：3
> 
> 时间：2013-02-23T20:56:19.703
> 
> 标签：python, numpy, pandas, dataform, dataframe

我融化了一个 pandas 数据框，用于与 ggplot 一起绘图（这通常需要长格式的数据框），如下所示：

```
test = pandas.melt(iris, id_vars=["Name"], value_vars=["SepalLength", "SepalWidth"]) 
```

这将 iris 数据集的字段保留在索引中，`Name`但将列转换为长格式：`SepalLength``SepalWidth`

```
test.ix[0:10]
Out:
           Name     variable  value
0   Iris-setosa  SepalLength    5.1
1   Iris-setosa  SepalLength    4.9
2   Iris-setosa  SepalLength    4.7
3   Iris-setosa  SepalLength    4.6
4   Iris-setosa  SepalLength    5.0
5   Iris-setosa  SepalLength    5.4
6   Iris-setosa  SepalLength    4.6
7   Iris-setosa  SepalLength    5.0
8   Iris-setosa  SepalLength    4.4
9   Iris-setosa  SepalLength    4.9
10  Iris-setosa  SepalLength    5.4 
```

我怎样才能“解开”这个数据框？我希望`Name`保留该列，但将`variable`字段的值转换为单独的列。该`Name`字段不是唯一的，所以我认为它不能用作索引。我的印象是这样`pivot`做是正确的功能，但它是不正确的：

```
test.pivot(columns="variable", values="value")
KeyError: u'no item named ' 
```

我怎么能这样做？另外，我可以解开有多列长格式的数据框，即其中的多列`test`就像`variable`上面的列吗？这似乎意味着`columns`将不得不接受列列表，而不是单个值。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T22:06:17.607

我认为这种情况是模棱两可的，因为`test`数据框没有标识每个唯一行的索引。如果`melt`只是将行与`value_vars`SepalLength 和 SepalWidth 堆叠在一起，那么您可以手动创建一个索引以作为枢轴；看起来结果与原始结果相同：

```
In [15]: test['index'] = range(len(test) / 2) * 2
In [16]: test[:10]
Out[16]: 
          Name     variable  value  index
0  Iris-setosa  SepalLength    5.1      0
1  Iris-setosa  SepalLength    4.9      1
2  Iris-setosa  SepalLength    4.7      2
3  Iris-setosa  SepalLength    4.6      3
4  Iris-setosa  SepalLength    5.0      4
5  Iris-setosa  SepalLength    5.4      5
6  Iris-setosa  SepalLength    4.6      6
7  Iris-setosa  SepalLength    5.0      7
8  Iris-setosa  SepalLength    4.4      8
9  Iris-setosa  SepalLength    4.9      9

In [17]: test[-10:]
Out[17]: 
               Name    variable  value  index
290  Iris-virginica  SepalWidth    3.1    140
291  Iris-virginica  SepalWidth    3.1    141
292  Iris-virginica  SepalWidth    2.7    142
293  Iris-virginica  SepalWidth    3.2    143
294  Iris-virginica  SepalWidth    3.3    144
295  Iris-virginica  SepalWidth    3.0    145
296  Iris-virginica  SepalWidth    2.5    146
297  Iris-virginica  SepalWidth    3.0    147
298  Iris-virginica  SepalWidth    3.4    148
299  Iris-virginica  SepalWidth    3.0    149

In [18]: df = test.pivot(index='index', columns='variable', values='value')
In [19]: df['Name'] = test['Name']
In [20]: df[:10]
Out[20]: 
variable  SepalLength  SepalWidth         Name
index                                         
0                 5.1         3.5  Iris-setosa
1                 4.9         3.0  Iris-setosa
2                 4.7         3.2  Iris-setosa
3                 4.6         3.1  Iris-setosa
4                 5.0         3.6  Iris-setosa
5                 5.4         3.9  Iris-setosa
6                 4.6         3.4  Iris-setosa
7                 5.0         3.4  Iris-setosa
8                 4.4         2.9  Iris-setosa
9                 4.9         3.1  Iris-setosa

In [21]: (iris[["SepalLength", "SepalWidth", "Name"]] == df[["SepalLength", "SepalWidth", "Name"]]).all()
Out[21]: 
SepalLength    True
SepalWidth     True
Name           True 
```

# asp.net - Facebook登录后重定向C#

> ID：15045583
> 
> 赞同：0
> 
> 时间：2013-02-23T20:56:23.433
> 
> 标签：asp.net, facebook

在此处输入代码我一直在关注 C# 的 Facebook 教程并获取访问令牌，我刚刚得到它，但我似乎无法理解他们教程中关于事件处理和重定向的步骤。我从来没有使用 JavaScript 到 C# 做过类似的事情。我有以下内容：

```
<div id="fb-root"></div>
<script>
    window.fbAsyncInit = function () {
        FB.init({
            appId: '{app Id}', // App ID
            status: true, // check login status
            cookie: true, // enable cookies to allow the server to access the session
            xfbml: true  // parse XFBML
        });

        // Additional initialization code here

        FB.Event.subscribe('auth.authResponseChange', function (response) {
            if (response.status === 'connected') {
                // the user is logged in and has authenticated your
                // app, and response.authResponse supplies
                // the user's ID, a valid access token, a signed
                // request, and the time the access token 
                // and signed request each expire
                var uid = response.authResponse.userID;
                var accessToken = response.authResponse.accessToken;

                // TODO: Handle the access token

                // Do a post to the server to finish the logon
                // This is a form post since we don't want to use AJAX
                var form = document.createElement("form");
                form.setAttribute("method", 'post');
                form.setAttribute("action", '/FacebookLogin.ashx');

                var field = document.createElement("input");
                field.setAttribute("type", "hidden");
                field.setAttribute("name", 'accessToken');
                field.setAttribute("value", accessToken);
                form.appendChild(field);

                document.body.appendChild(form);
                form.submit();

            } else if (response.status === 'not_authorized') {
                // the user is logged in to Facebook, 
                // but has not authenticated your app
            } else {
                // the user isn't logged in to Facebook.
            }
        });
    };

    // Load the SDK Asynchronously
    (function (d) {
        var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
        if (d.getElementById(id)) { return; }
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/en_US/all.js";
        ref.parentNode.insertBefore(js, ref);
    }(document));
</script> 
```

以及一个 Facebook 按钮，一切正常，但是根据教程[在这里](http://csharpsdk.org/docs/web/getting-started)我需要“下一步，创建一个页面、操作或处理程序来接收令牌并重定向用户。对于这个例子，我们将创建一个通用处理程序。”

他们使用这个：

```
public class FacebookLogin : IHttpHandler, System.Web.SessionState.IRequiresSessionState {

    public void ProcessRequest(HttpContext context) {
        var accessToken = context.Request["accessToken"];
        context.Session["AccessToken"] = accessToken;

        context.Response.Redirect("/MyUrlHere");
    }

    public bool IsReusable {
        get { return false; }
    }
} 
```

我只是把它放在我的代码后面，但它没有做任何事情。我只是不确定从这里做什么。如何让我的页面重定向到新页面，以便我可以执行以下操作：

```
var accessToken = Session["AccessToken"].ToString();
var client = new FacebookClient(accessToken);
dynamic result = client.Get("me", new { fields = "name,id" });
string name = result.name;
string id = result.id; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-16T10:31:48.477

确保您没有将 FacebokLogin 处理程序放在 aspx.cs 代码隐藏文件中。它需要是一个单独的 .ashx 文件。

在您的评论中，您说 FB.Event.subscribe('auth.authResponseChange', function (response) {...} 永远不会被调用。尝试在 FB.init 中包含 apiKey: "[OAuth token going here]"。不确定如果它会起作用，但值得一试。

例如

```
FB.init({
    appId: '{app Id}', // App ID
    status: true, // check login status
    cookie: true, // enable cookies to allow the server to access the session
    xfbml: true,  // parse XFBML
    apiKey: "92834yv221985vn4139y845vn19835vynv519835vn"
}); 
```

# build - 如何为不同的构建配置配置 tup 构建系统，例如调试或发布标志？

> ID：15045584
> 
> 赞同：2
> 
> 时间：2013-02-23T20:56:31.007
> 
> 标签：build, tup

我对 tup 很陌生，但仍然喜欢它的功能。我正在考虑的一个问题是 tup 如何支持不同的构建选项，例如调试或发布（-> 不同的 CFLAGS）？

我使用谷歌没有找到任何有用的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T21:18:23.920

我找到了解决方案：tup 变体，请参阅[http://gittup.org/tup/manual.html#lbAE](http://gittup.org/tup/manual.html#lbAE)

谢谢！

# jquery - 移动友好的响应式 jquery 选项卡

> ID：15045591
> 
> 赞同：0
> 
> 时间：2013-02-23T20:57:22.620
> 
> 标签：jquery, tabs

我正在寻找一些基于 jquery 的插件（如果可用），它会自动从常规选项卡更改为响应式可折叠容器，以实现移动友好性。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:04:02.480

您可能想看看 jQuery Mobile 项目。jQuery Mobile 是开发移动 Web 应用程序的良好开端。可在 jquery Mobile 文档[Collapsibles](http://view.jquerymobile.com/1.3.0/docs/widgets/collapsibles/)中找到可折叠容器的示例。如果您喜欢该示例，请[查看 jQuery Mobile](http://jquerymobile.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:00:37.477

简单、可定制且响应迅速

[Twitter 引导选项卡](http://twitter.github.com/bootstrap/javascript.html#tabs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T21:03:34.260

您可以使用媒体查询根据规范更改每个元素的样式。您必须将这些添加到样式表的底部，或者创建一个新样式表（例如repsonsive.css），以便它根据屏幕大小覆盖您的默认样式。

以下媒体查询模板仅基于屏幕大小。您也可以使用更复杂的媒体查询来定位特定设备。

要支持旧版浏览器 (IE)，您必须使用条件语句来包含 respond.js 或 media-queries.js。媒体查询仅适用于设备规格，例如屏幕、手持设备等...

例如：

```
/* Large desktop */ 
@media (min-width: 1200px) { ... }

/* Portrait tablet to landscape and desktop */
@media (min-width: 768px) and (max-width: 979px) { ... }

/* Landscape phone to portrait tablet */
@media (max-width: 767px) { ... }

/* Landscape phones and down */
@media (max-width: 480px) { ... } 
```

根据上一个 stackexchange 问题的链接回答[。](https://wordpress.stackexchange.com/questions/87186/how-would-i-use-a-media-query-to-make-my-entire-theme-responsive-or-fluid)

--

如果您的偏好只是使用 jquery 插件，您可以使用以下内容：
[ResponseJS](http://responsejs.com/) with this [Jquery plugin](https://github.com/AlessMascherpa/jq-responsive-tabs)

# hdfs - 在 Cloudera Manager 中的安全集群上启用 HA 名称节点失败

> ID：15045594
> 
> 赞同：2
> 
> 时间：2013-02-23T20:57:46.410
> 
> 标签：hdfs, cloudera, high-availability

我正在运行一个 CDH4.1.2 安全集群，它在单个 namenode+secondarynamenode 配置下运行良好，但是当我尝试从 Cloudera Manager 界面启用高可用性（基于仲裁）时，它在 16 步中的第 10 步死机，“启动 NameNode这将转换为活动模式 namenode ([my namenode's hostname])"。

深入研究角色日志文件会出现以下致命错误：

```
Exception in namenode joinjava.lang.IllegalArgumentException: Does not contain a valid host:port authority: [my namenode's fqhn]:[my namenode's fqhn]:0 at
org.apache.hadoop.net.NetUtils.createSocketAddr(NetUtils.java:206) at
org.apache.hadoop.net.NetUtils.createSocketAddr(NetUtils.java:158) at
org.apache.hadoop.net.NetUtils.createSocketAddr(NetUtils.java:147) at
org.apache.hadoop.hdfs.server.namenode.NameNodeHttpServer.start(NameNodeHttpServer.java:143) at
org.apache.hadoop.hdfs.server.namenode.NameNode.startHttpServer(NameNode.java:547) at
org.apache.hadoop.hdfs.server.namenode.NameNode.startCommonServices(NameNode.java:480) at
org.apache.hadoop.hdfs.server.namenode.NameNode.initialize(NameNode.java:443) at
org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:608) at
org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:589) at
org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:1140) at
org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:1204) 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T07:50:03.263

看起来你有两个问题：

1.  NameNode 的 IP 地址解析为“我的 namenode 的 fqhn”，而不是常规主机名。检查您的 /etc/hosts 文件以解决此问题。
2.  您需要配置 dfs.https.port。使用 Cloudera Manager 免费版，您必须必须将适当的配置添加到安全阀以启用安全性。作为其中的一部分，您需要配置 dfs.https.port。

鉴于即使在非 HA 模式下也会遍历此代码路径，我很惊讶您能够在启用 HA 之前让您的安全 NameNode 正确启动。如果您还没有，我建议您首先启用安全性，测试所有 HDFS 角色是否正确启动，然后启用 HA。

# php - 从一个类中获取所有函数及其参数

> ID：15045596
> 
> 赞同：2
> 
> 时间：2013-02-23T20:58:07.210
> 
> 标签：php, oop

我正在为我的 CMS 开发一个插件系统，为了简化事件注册系统，我需要一个可以执行以下操作的函数。

我需要一个函数，该函数将返回指定类中的所有函数及其参数的类。当然，如果从类中获取函数的函数和获取函数参数的所有类名的函数不同也可以。

例如，如果您有以下具有这些功能的类；

```
class MyClass {
    public function myFunction(Event $event) {
        // Function code
    }
} 
```

如果可以退回这样的东西，那就太棒了；

```
Array() { 
    'myFunction' => Array() {
        0 => 'Event'
    }
} 
```

有没有办法做到这一点？

在此先感谢蒂姆·维塞

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T21:07:49.320

您指的是[反射](http://php.net/manual/en/book.reflection.php)API。反射[类](http://php.net/manual/en/class.reflectionclass.php)或[方法](http://php.net/manual/en/class.reflectionmethod.php)可以引导你做你需要的事情。例如，尝试：

```
$class = new ReflectionClass('MyClass');
$methods = $class->getMethods();

print_r($methods);

foreach ($methods as $method) {
    print_r($method->getParameters());
} 
```

# sql - 将 TIME 插入 Oracle SQL，DATE 字段

> ID：15045600
> 
> 赞同：2
> 
> 时间：2013-02-23T20:58:22.957
> 
> 标签：sql, oracle, date

无论如何，是否只在“日期”类型的 SQL 字段中插入时间（无日期）

我试过插入：

```
13:00 
```

和

```
01:00 
```

和

```
13:00pm 
```

和

```
01:00pm 
```

但不断收到错误：

```
Not A Valid Month 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T21:26:56.617

问题是字面意思。对于日期/时间值，Oracle 需要 ddMMMyyyy 格式的值。（或者，您可以使用表达式。[此处](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements003.htm#BABGIGCJ)`DATE '2001-01-01`解释了文字值。）没有日期的时间似乎没有默认格式。

换句话说，你可以得到同样的错误`cast('1/1/2001' as date)`。

相反，请使用以下`to_date()`功能：

```
select to_date('10:00', 'hh:mi')
from dual 
```

这为您提供了更多格式的灵活性。

此外，正如 Ben 在评论中指出的那样，这会为您提供指定时间的当前日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:47:12.070

使用 SYSDATE 和某个日期的 EXTRACT 和仅时间部分的示例...：

```
SELECT hh||':'||mi||':'||ss time_only_portion
  FROM
  ( 
  Select
    EXTRACT(hour   From Cast(SYSDATE as timestamp)) hh,
    EXTRACT(minute From Cast(SYSDATE as timestamp)) mi,
    EXTRACT(second From Cast(SYSDATE as timestamp)) ss
  From dual
 )
/

SELECT EXTRACT(HOUR From t_stamp) hh
  FROM
 (
 SELECT CAST(to_date('21/02/2012 06:10:00 am', 'dd/mm/yyyy  hh:mi:ss am') AS TIMESTAMP) t_stamp 
   FROM dual
 )
/ 
```

# html - 使用 css 将输入字段居中

> ID：15045601
> 
> 赞同：2
> 
> 时间：2013-02-23T20:58:24.367
> 
> 标签：html, css

我有一个宽度为 20% 的输入字段，如您在此处看到的：

```
<input id="saveServer" width="20%"  class="depth"></input> 
```

因此，为了使其居中，我在输入字段之前和之后添加了两个宽度：40% 的跨度元素，以使输入字段居中。就像你可以在这里看到的：

```
<span style="width:40%"></span>
<input id="saveServer" width="20%"  class="depth"></input>
<span style="width:40%"></span> 
```

但不知何故， inut 领域并没有以自己为中心。我不知道如何居中！来自德国的问候！谢谢！

这是小提琴上的相同示例：http: [//jsfiddle.net/bmkc2/](http://jsfiddle.net/bmkc2/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-23T21:02:20.793

我认为更多的上下文将有助于澄清问题，但这是你所追求的吗？使输入本身居中的一种方法是添加规则：
`margin: 0 auto;`

[http://jsfiddle.net/QqRCm/](http://jsfiddle.net/QqRCm/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-23T21:09:54.720

坚持你的方法，这是一个有效的小提琴：http: [//jsfiddle.net/bmkc2/1/](http://jsfiddle.net/bmkc2/1/)

*   需要考虑的是，宽度不能应用于像 a 这样的内联元素`span`。例如，您首先必须将其显示为 inline-block。
*   `display: block`on input 将单独显示在自己的行上。同样，内联块或浮动。
*   inline-block 有一个烦恼（这很正常，但在这里仍然很烦人），它会在显示为 inline-block 的元素之间显示空白，即每个跨度和输入之间有 4px 的空间。HTML 注释是为了避免这些空格（这是正常的，因为想象两个单词在一个跨度中并由空格分隔。你需要并期望单词之间有这个空格，否则它会不可读！）
*   width: 20% 和 border-width: 1px 和 padding 5px 相加，2x40% 将大于 100%。`box-sizing: border-box`将避免从 20% 宽度中获取边框和填充（查看 caniuse.com 以获取要添加 -moz- 等的前缀的完整列表）。

编辑：

*   您的输入既没有标签（与其`for`属性相关联）也没有标题属性，仅仅是因为它是一个演示吗？
*   `margin: 0 auto`如另一个答案中所述，`text-align: center`最好添加2个空元素仅用于居中。我只是想让你的第一次尝试成功。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T21:10:33.953

您的代码无法按您认为的那样工作的原因是输入元素和跨度元素都是浮动元素。为了让它们按照您的想法工作，您需要将它们显示为内联块元素。

添加以下代码，它将按照您期望的方式工作。

```
span, #saveServer {
    display:inline-block;
} 
```

jsfiddle：http: [//jsfiddle.net/bmkc2/2/](http://jsfiddle.net/bmkc2/2/)

# stata - 期望最大化算法的 Stata 代码

> ID：15045602
> 
> 赞同：1
> 
> 时间：2013-02-23T20:58:25.057
> 
> 标签：stata, expectation-maximization

是否有可用于期望最大化 (EM) 算法的 Stata 模块或代码？我似乎找不到任何东西，但我认为值得一试。

我的兴趣是在 EM 中进行记录链接。参见，例如：

*   [http://www.ncbi.nlm.nih.gov/pmc/articles/PMC1479910/](http://www.ncbi.nlm.nih.gov/pmc/articles/PMC1479910/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T00:22:22.393

常用名称：期望最大化。

没有通用命令或命令集为 EM 应用程序提供框架。相反，EM 算法在代码中用于各种命令。

# magento - Magento 1.7 - 从 /customer/account/create/ 中的注册中删除字段

> ID：15045603
> 
> 赞同：2
> 
> 时间：2013-02-23T20:58:32.113
> 
> 标签：magento, magento-1.7

我想从注册 (/customer/account/create/) 中删除字段。我怎样才能做到这一点？有没有办法不进入商店的文件（例如隐藏这些字段）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T21:51:25.163

您应该更新数据库中的一些字段。

例如。我需要从注册表中删除姓氏。这是一个必填字段。所以我用 sql 更新文件创建了自己的模块来更改字段参数：

**升级-1.0.0.1-1.0.0.2.php**

```
/* @var $installer Mage_Customer_Model_Entity_Setup */

$installer = $this;

$installer->startSetup();
// SELECT attribute_id, entity_type_id FROM eav_attribute where attribute_code = 'lastname'
// SELECT * FROM customer_eav_attribute where attribute_id in (SELECT attribute_id FROM eav_attribute where attribute_code = 'lastname')
$options = unserialize('a:2:{s:15:"max_text_length";i:255;s:15:"min_text_length";i:1;}');

if (isset($options['min_text_length'])) unset($options['min_text_length']);

$installer->addAttribute('customer', 'lastname', array(
    'validate_rules' => serialize($options),
    'required'       => false
));

$installer->addAttribute('customer_address', 'lastname', array(
    'validate_rules' => serialize($options),
    'required'       => false
));

$installer->endSetup(); 
```

之后，您应该使用 html+css 或 js 隐藏此字段

**更新：**

编辑文件*/app/design/frontend/default/YOURTHEME/template/customer/widget/name.phtml*以更改您的注册表单。就我而言，我在那里注释掉了 html 块：

```
<?php /*if ($this->showMiddlename()): ?>
        <?php $isMiddlenameRequired = $this->isMiddlenameRequired(); ?>
        <div class="field name-middlename">
            <label for="<?php echo $this->getFieldId('middlename')?>"<?php echo $isMiddlenameRequired ? ' class="required"' : '' ?>><?php echo $isMiddlenameRequired ? '<em>*</em>' : '' ?><?php echo $this->getStoreLabel('middlename') ?></label>
            <div class="input-box">
                <input type="text" id="<?php echo $this->getFieldId('middlename')?>" name="<?php echo $this->getFieldName('middlename')?>" value="<?php echo $this->escapeHtml($this->getObject()->getMiddlename()) ?>" title="<?php echo $this->getStoreLabel('middlename') ?>" class="input-text <?php echo $this->helper('customer/address')->getAttributeValidationClass('middlename') ?>" <?php echo $this->getFieldParams() ?> />
            </div>
        </div>
    <?php endif; */?>

    <!--<div class="field name-lastname">
        <label for="<?php echo $this->getFieldId('lastname')?>" class="required"><em>*</em><?php echo $this->getStoreLabel('lastname') ?></label>
        <div class="input-box">
            <input type="text" id="<?php echo $this->getFieldId('lastname')?>" name="<?php echo $this->getFieldName('lastname')?>" value="<?php echo $this->escapeHtml($this->getObject()->getLastname()) ?>" title="<?php echo $this->getStoreLabel('lastname') ?>" maxlength="255" class="input-text <?php echo $this->helper('customer/address')->getAttributeValidationClass('lastname') ?>" <?php echo $this->getFieldParams() ?> />
        </div>
    </div>--> 
```

`<div class="field name-middlename">`您也可以在and中添加一些类`<div class="field name-lastname">`。这个类应该有 css 属性`"display:none;"`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-16T18:10:18.490

不知怎的，我让它工作了。这是我想要的，我要求您尝试一下并检查它是否解决了问题。

1.  打开 Magento DB 并转到表 core_config_data。
2.  搜索路径 - `customer/address/middlename_show`。
3.  编辑 Value 字段`customer/address/middlename_show`并将其更改为**1**。通常，默认值为 0（零）。
4.  保存表格。
5.  清除缓存。最好删除 var 文件夹中存在的文件夹 Cache 和 Session。
6.  登录到 Magento 管理员并转到以下位置： **系统 --> 配置 --> 客户 --> 客户配置**
7.  在“姓名和地址选项”选项卡下，现在“显示中间名（初始）”选项将显示为“是”。
8.  Change it to "No".
9.  Save Config and clear Cache.

# algorithm - 在多个数组中查找最近的元素

> ID：15045607
> 
> 赞同：3
> 
> 时间：2013-02-23T20:58:57.707
> 
> 标签：algorithm, matlab, grouping, matching, closest

假设我有两个数组：

```
a=[10 21 50 70 100 120];
b=[18 91]; 
```

我想匹配 a 和 b 中最接近 AND 10 个单位以内的（单个）元素。

结果 ：

```
idxa=[1 2 3 4 5 6]

idxb=[2 5] 
```

其中匹配的元素共享相同的编号。

我很困惑，因为我不确定（例如）如何确保 18 与 21 而不是 10 匹配，因为它们都满足彼此在 10 个单位以内的要求。此外，我想在几个（最多 8 个）列表中执行此操作，并且代码变得过于复杂，我觉得我缺少一个简单的解决方案。我不担心效率，因为列表的长度很小。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:50:16.967

对于小型阵列，这可以通过蛮力来完成：

(1) 迭代两个数组中较小的，然后是较大的数组
(2) 跟踪“迄今为止最接近的匹配” CMSF
(3) 如果找到更好的匹配，更新 CMSF
(4) 当你到达末尾时列表，如果 CMSF <= 10 保留它，否则忽略此项目（它没有匹配项）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:21:47.447

您的数组似乎已排序（我将继续进行该假设；如果没有，您可以简单地对它们进行排序）。

您是否尝试过将多个数组合并为一个更大的数组？（类似于归并排序的归并步骤）。这将是一个很好的起点，因为它将您的问题减少到“在数组中查找壁橱元素”，相比之下这是微不足道的。

这也将允许您删除重复项；即将数组中的所有'21' 减少为单个'21'。

为了确保 18 匹配 21 而不是 10，您需要计算键 (18) 与 10 个单位 ([10,21)) 内的每个值之间的差异，然后选择差异最小的那个。

更新：针对您关于仅查找所有数组共有的值的评论，这可以在合并数组时通过查找数组的交集来完成，这实际上可能是一种预定义的方法，具体取决于您的语言。

# jquery - 是否可以使用键（PgUp，PgDn，...空格键？...）控制可滚动的 jquery ui 对话框

> ID：15045610
> 
> 赞同：3
> 
> 时间：2013-02-23T20:59:17.847
> 
> 标签：jquery, jquery-ui, scroll

我有一个 jQuery UI 对话框，它有足够的内容来触发垂直滚动条的出现。我发现使其滚动的唯一方法是单击并拖动滚动条，或单击滚动条区域 - 即无法使用 PgUp 或 PgDn 键使其滚动，也无法使用箭头键或空格键等。启用键盘激活滚动的最佳方法是什么？

[注意：我实际上使用的是 jQuery UI 对话框的增强版本（[http://www.fieryprophet.com/demo/jqui-dialog-minmax/](http://www.fieryprophet.com/demo/jqui-dialog-minmax/)），但发现与普通对话框相同的问题。]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-04T11:00:48.427

这可以通过将属性*tabindex*添加到对话框容器*div*来实现，以使其接受关键​​事件。例如：

```
<div id="dialog" tabindex="-1">
  very much content here ...
</div> 
```

您还可以将其添加到对话框的*open方法中：*

```
$('#dialog').dialog({
    open: function(e, ui) {
        var $dlg = $(e.target);
        if ($dlg.is(':visible')) {
            $dlg.focus();
        }
    }
}); 
```

有关工作示例，请参阅此[JSFiddle 。](http://jsfiddle.net/jx5xe3fb/ "JSFiddle 演示使用键在对话框中滚动")（当然，在 JSFIddle 中设置焦点并不像在独立页面中那样真正起作用）。

请参阅[.focus()](http://api.jquery.com/focus/ ".focus() 的文档")的文档：“*尝试将焦点设置到隐藏元素会导致 Internet Explorer 出错。* ”。

*有关tabindex="-1**作用的详细说明，请参阅“[使用 Tabindex 使元素具有焦点](http://snook.ca/archives/accessibility_and_usability/elements_focusable_with_tabindex "使用 Tabindex 使元素具有焦点")” 。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T23:03:57.280

您可以将事件处理程序绑定到`keyup`窗口的事件，如果按下的键是 PgUP 或 PgDown 或您决定的任何内容，您可以滚动对话框。像这样的东西：

```
$(window).keydown(event) {
    event.preventDefault();
}

$(window).keypress(event) {
    event.preventDefault();
}

$(window).keyup(function(event) {
    event.preventDefault();

    var curScroll = $("#content").scrollTop();

    switch(event.which) {
        case 32:
        case 34:
            curFocus.scrollTop(curScroll + 100);
            break;
        case 33:
            curFocus.scrollTop(curScroll - 100);
            break;
    }
}); 
```

我做了一个[jsFiddle](http://jsfiddle.net/goffreder/PfY6N/4/)来更好地解释我的解决方案。

编辑：添加`event.preventDefault()`到键盘事件处理程序以避免页面滚动。

更新：显然对话框不会引发简单`focus`或`blur`事件，正文也不会。我添加了一些指令以仅使焦点元素可滚动，或者如果没有则窗口。

```
var curFocus = $(window);

$("#content").on("dialogfocus", function() {
    curFocus = $(this);
});

$("body").click(function(event) {
    if((event.target) != $("#content")[0])
        curFocus = $(window);
}); 
```*

# java - 输入不是a或b时循环吗？

> ID：15045633
> 
> 赞同：1
> 
> 时间：2013-02-23T21:02:06.520
> 
> 标签：java, boolean-logic

我正在为一个班级项目做最后的润色，我正在为我的一个用户输入添加一个安全网。我已经设置好了，如果用户输入“1”或“2”，他们输入的数据将以不同的方式显示。我想添加一种方法来防止用户输入除“1”或“2”以外的任何内容。这是它的代码。

```
do
{
System.out.println("Please type either '1' or '2'.");
Scanner scan = new Scanner(System.in);
a = scan.nextInt();
}
while (a != (1||2));
//after user enters 1 or 2, return the choice
return a; 
```

我一直在阅读有关操作数和逻辑的信息，但我有点卡住了。我一直在纠缠我的老师，所以我想我应该让他休息一下，因为我不是他唯一的学生。我的错误是“二元运算符'||'的操作数类型错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T21:09:53.467

这是学习编程时常见的误解。

作为人类，你可以很容易地阅读这样的陈述：“虽然a不是1或2”，但计算机必须遵循一定的规则，其中一个规则是“或”优先。

这意味着它首先试图弄清楚“1 或 2”是什么意思，因为基本上，您的陈述与此类似：

```
while (a != SOMETHING); 
```

`||`在Java语言中是“逻辑或”，翻译过来就是：取两边（称为运算符）的两个值（称为操作数）`||`，按照“逻辑或”的规则组合起来。

“逻辑或”使用两个布尔值，它们只能是 True 或 False，并且由于您要求它使用带有数字的运算符，这就是您收到特定错误消息的原因。

如果您尝试使用单管道 ,`|`编译器可能已经停止抱怨，但它仍然不会做您希望它做的事情。

`1 or 2`在处理数字时，使用`|`运算符，即“按位或”运算符，您可以将两个数字组合成数字 3。如果您想知道原因，可以阅读有关“按位运算符”的更多信息。

简而言之，你不能这样写你的比较。

在编程语言中，一次比较两个值，即。一个对另一个，所以你唯一的选择是扩展表达式来比较两次。

下面是一些等价的表达式，可以满足您的需求：

```
while (a != 1 && a != 2); 
```

或这个：

```
while (!(a == 1 || a == 2)); 
```

老实说，我更喜欢第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:04:40.610

它是`(a != 1 && a!=2)`- 当 a 为 1 或 2 时，您实际上想要退出循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T21:04:44.337

您需要为`a!= 1`和执行单独的条件语句`a!= 2`。

您的条件语句应如下所示：

```
(a!=1) && (a!=2) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T21:04:54.557

这里的问题是您正在尝试编写有意义的英文代码，但它不是那样工作的。该`||`运算符接受两个表达式，如果其中一个是 ，则返回`true`。这意味着你写的东西没有意义。

替换它的最简单方法是将其扩展：

```
a != 1 && a != 2 
```

（我们需要使用`&&`，因为我们正在检查它们都不是真的）。

请注意，这可能会变得冗长和尴尬。或者，一个好的替代品（假设您有很多值要检查）是集合中的成员资格检查（a`Set`是一个不错的选择，因为您可以保证 O(1) 成员资格测试）。例如：

```
Set<Integer> possibles = new HashSet<Integer>();
Collections.addAll(possibles, new Integer[] {1, 2, ...});
while (!possibles.contains(a)) {
    ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-23T21:04:58.573

你不能对待一个`int`like pseudo- `regex`。代替

```
while (a != (1||2)); 
```

和

```
while (a != 1 && a!= 2); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-23T21:05:20.327

在你的while循环条件下试试这个

```
((a!=1) && (a!=2)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-23T21:05:34.773

你必须写

```
while (a != 1 && a != 2) 
```

因为它相当于**not** `(a == 1 || a == 2)`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-23T21:09:31.180

二元运算符'||' 两边都需要两个布尔操作数。由于您的操作数是整数，因此这是一个语法错误。

你应该这样做：

```
do{
// core of the loop...
}while(a!=1 && a!=2); 
```

# c# - ASP.NET MVC，错误输出源代码

> ID：15045636
> 
> 赞同：2
> 
> 时间：2013-02-23T21:02:11.360
> 
> 标签：c#, asp.net, asp.net-mvc

所以我在一个非常奇怪的地方结束了。由于我无法控制的情况，在我能够对备份/存储库进行某些更改之前，一台机器就烧毁了。这只是一个没有备份的文件，但它对我来说仍然很重要。

然而，生成的二进制文件仍然存在于内部测试网页上。所以我的第一个想法是尝试一个反编译器，它给出了一些结果，但它不是很准确。

我注意到，当我没有为 ASP.NET MVC 进行太多配置时，如果没有任何处理方式，错误会显示引发异常的文件的源代码。

我想知道是否可以使用它来取回我的代码，但输出长度似乎限制为 9 行。

所以。

(A) 这可能吗？

(B) 有什么办法可以得到超过 9 行？

(C) 这种事情有什么好的工具吗？

我不是想破解。我拥有该网站和代码。这只是一个不幸的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:09:55.260

我认为您在谈论 PDB 文件。有个问题：[从exe/pdb获取可执行代码的信息](https://stackoverflow.com/questions/970443/obtaining-information-about-executable-code-from-exe-pdb)

您可以使用[http://www.codeproject.com/Articles/37456/How-To-Inspect-the-Content-of-a-Program-Database-P](http://www.codeproject.com/Articles/37456/How-To-Inspect-the-Content-of-a-Program-Database-P)进行检查，但它只显示很少的信息。

正如您可以在[http://www.wintellect.com/CS/blogs/jrobbins/archive/2009/05/11/pdb-files-what-every-developer-must-know.aspx中阅读的那样](http://www.wintellect.com/CS/blogs/jrobbins/archive/2009/05/11/pdb-files-what-every-developer-must-know.aspx)

> *PDB 文件的实际文件格式是一个严密保密的秘密，但 Microsoft 提供 API 来为调试器返回数据。*

# java - 如何检查两个单词是否是字谜

> ID：15045640
> 
> 赞同：50
> 
> 时间：2013-02-23T21:02:26.547
> 
> 标签：java, string, algorithm, anagram

我有一个程序可以显示两个单词是否是彼此的字谜。有一些示例无法正常工作，我将不胜感激，尽管如果它不先进，那将是很棒的，因为我是一年级程序员。“schoolmaster”和“theclassroom”是彼此的字谜，但是当我将“theclassroom”更改为“theclafsroom”时，它仍然说它们是字谜，我做错了什么？

```
import java.util.ArrayList;
public class AnagramCheck {
    public static void main(String args[]) {
        String phrase1 = "tbeclassroom";
        phrase1 = (phrase1.toLowerCase()).trim();
        char[] phrase1Arr = phrase1.toCharArray();

        String phrase2 = "schoolmaster";
        phrase2 = (phrase2.toLowerCase()).trim();
        ArrayList<Character> phrase2ArrList = convertStringToArraylist(phrase2);

        if (phrase1.length() != phrase2.length()) {
            System.out.print("There is no anagram present.");
        } else {
            boolean isFound = true;
            for (int i = 0; i < phrase1Arr.length; i++) {
                for (int j = 0; j < phrase2ArrList.size(); j++) {
                    if (phrase1Arr[i] == phrase2ArrList.get(j)) {
                        System.out.print("There is a common element.\n");
                        isFound =;
                        phrase2ArrList.remove(j);
                    }
                }
                if (isFound == false) {
                    System.out.print("There are no anagrams present.");
                    return;
                }
            }
            System.out.printf("%s is an anagram of %s", phrase1, phrase2);
        }
    }

    public static ArrayList<Character> convertStringToArraylist(String str) {
        ArrayList<Character> charList = new ArrayList<Character>();
        for (int i = 0; i < str.length(); i++) {
            charList.add(str.charAt(i));
        }
        return charList;
    }
} 
```

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-02-23T21:15:32.957

如果两个单词包含相同数量的字符和相同的字符，则它们是彼此的字谜。您只需要按字典顺序对字符进行排序，并确定一个字符串中的所有字符是否与另一个字符串中的所有字符相等*且顺序相同*。

这是一个代码示例。查看[`Arrays`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html)API 以了解这里发生了什么。

```
public boolean isAnagram(String firstWord, String secondWord) {
     char[] word1 = firstWord.replaceAll("[\\s]", "").toCharArray();
     char[] word2 = secondWord.replaceAll("[\\s]", "").toCharArray();
     Arrays.sort(word1);
     Arrays.sort(word2);
     return Arrays.equals(word1, word2);
} 
```

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2013-06-08T23:25:16.080

最快的算法是将 26 个英文字符中的每一个映射到一个唯一的素数。然后计算字符串的乘积。根据算术基本定理，当且仅当它们的乘积相同时，两个字符串才是字谜。

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2013-02-23T21:25:11.590

如果对任一数组进行排序，解决方案将变为 O(n log n)。但如果您使用哈希图，则为 O(n)。测试和工作。

```
char[] word1 = "test".toCharArray();
char[] word2 = "tes".toCharArray();

Map<Character, Integer> lettersInWord1 = new HashMap<Character, Integer>();

for (char c : word1) {
    int count = 1;
    if (lettersInWord1.containsKey(c)) {
        count = lettersInWord1.get(c) + 1;
    }
    lettersInWord1.put(c, count);
}

for (char c : word2) {
    int count = -1;
    if (lettersInWord1.containsKey(c)) {
        count = lettersInWord1.get(c) - 1;
    }
    lettersInWord1.put(c, count);
}

for (char c : lettersInWord1.keySet()) {
    if (lettersInWord1.get(c) != 0) {
        return false;
    }
}

return true; 
```

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2015-03-01T23:18:17.940

这是一个简单的快速 O(n) 解决方案，不使用排序或多个循环或哈希映射。我们增加第一个数组中每个字符的计数并减少第二个数组中每个字符的计数。如果结果计数数组全为零，则字符串是字谜。可以通过增加计数数组的大小来扩展以包含其他字符。

```
class AnagramsFaster{

    private static boolean compare(String a, String b){
        char[] aArr = a.toLowerCase().toCharArray(), bArr = b.toLowerCase().toCharArray();
        if (aArr.length != bArr.length)
            return false;
        int[] counts = new int[26]; // An array to hold the number of occurrences of each character
        for (int i = 0; i < aArr.length; i++){
            counts[aArr[i]-97]++;  // Increment the count of the character at i
            counts[bArr[i]-97]--;  // Decrement the count of the character at i
        }
        // If the strings are anagrams, the counts array will be full of zeros
        for (int i = 0; i<26; i++)
            if (counts[i] != 0)
                return false;
        return true;
    }

    public static void main(String[] args){
        System.out.println(compare(args[0], args[1]));
    }
} 
```

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2014-09-27T03:17:26.290

很多人提出了解决方案，但我只想谈谈一些常见方法的算法复杂性：

*   简单的“使用排序字符`Arrays.sort()`”方法将是`O(N log N)`。

*   如果您使用基数排序，则减少为`O(N)`空格`O(M)`，其中`M`是字母表中不同字符的数量。（在英语中是 26 ......但理论上我们应该考虑多语言字谜。）

*   使用计数数组的“计数字符”也是`O(N)`......并且比基数排序更快，因为您不需要重建排序的字符串。空间使用量将是`O(M)`.

*   除非字母表很大，否则使用字典、哈希图、树图或等效方法“计算字符”会比数组方法慢。

*   不幸的是，优雅的“素数乘积”方法是`O(N^2)`最坏的情况，这是因为对于足够长的单词或短语，素数的乘积不适合`long`. 这意味着您需要使用, 并且将 a 乘以一个小常数`BigInteger`N 次是. `BigInteger``O(N^2)`

    对于假设的大字母表，比例因子会很大。将素数的乘积保持为 a 的最坏情况空间使用`BigInteger`是（我认为）`O(N*logM)`。

*   基于的`hashcode`方法通常是`O(N)`如果单词不是字谜。如果哈希码相等，那么您仍然需要进行适当的字谜测试。所以这不是一个完整的解决方案。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-02-04T13:11:19.967

O(n) 解决方案，无需任何排序且仅使用一张地图。

```
public boolean isAnagram(String leftString, String rightString) {
  if (leftString == null || rightString == null) {
    return false;
  } else if (leftString.length() != rightString.length()) {
    return false;
  }

  Map<Character, Integer> occurrencesMap = new HashMap<>();

  for(int i = 0; i < leftString.length(); i++){
    char charFromLeft = leftString.charAt(i);
    int nrOfCharsInLeft = occurrencesMap.containsKey(charFromLeft) ? occurrencesMap.get(charFromLeft) : 0;
    occurrencesMap.put(charFromLeft, ++nrOfCharsInLeft);
    char charFromRight = rightString.charAt(i);
    int nrOfCharsInRight = occurrencesMap.containsKey(charFromRight) ? occurrencesMap.get(charFromRight) : 0;
    occurrencesMap.put(charFromRight, --nrOfCharsInRight);
  }

  for(int occurrencesNr : occurrencesMap.values()){
    if(occurrencesNr != 0){
      return false;
    }
  }

  return true;
} 
```

和不太通用的解决方案，但更快一点。你必须把你的字母表放在这里：

```
public boolean isAnagram(String leftString, String rightString) {
  if (leftString == null || rightString == null) {
    return false;
  } else if (leftString.length() != rightString.length()) {
    return false;
  }

  char letters[] = {'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'};
  Map<Character, Integer> occurrencesMap = new HashMap<>();
  for (char l : letters) {
    occurrencesMap.put(l, 0);
  }

  for(int i = 0; i < leftString.length(); i++){
    char charFromLeft = leftString.charAt(i);
    Integer nrOfCharsInLeft = occurrencesMap.get(charFromLeft);
    occurrencesMap.put(charFromLeft, ++nrOfCharsInLeft);
    char charFromRight = rightString.charAt(i);
    Integer nrOfCharsInRight = occurrencesMap.get(charFromRight);
    occurrencesMap.put(charFromRight, --nrOfCharsInRight);
  }

  for(Integer occurrencesNr : occurrencesMap.values()){
    if(occurrencesNr != 0){
      return false;
    }
  }

  return true;
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-01-30T03:13:16.733

我们正在遍历两个长度相等的字符串并跟踪它们之间的差异。我们不在乎有什么区别，我们只想知道它们是否具有相同的字符。我们可以在 O(n/2) 中做到这一点，而无需任何后处理（或大量素数）。

```
public class TestAnagram {
  public static boolean isAnagram(String first, String second) {
    String positive = first.toLowerCase();
    String negative = second.toLowerCase();

    if (positive.length() != negative.length()) {
      return false;
    }

    int[] counts = new int[26];

    int diff = 0;

    for (int i = 0; i < positive.length(); i++) {
      int pos = (int) positive.charAt(i) - 97; // convert the char into an array index
      if (counts[pos] >= 0) { // the other string doesn't have this
        diff++; // an increase in differences
      } else { // it does have it
        diff--; // a decrease in differences
      }
      counts[pos]++; // track it

      int neg = (int) negative.charAt(i) - 97;
      if (counts[neg] <= 0) { // the other string doesn't have this
        diff++; // an increase in differences
      } else { // it does have it
        diff--; // a decrease in differences
      }
      counts[neg]--; // track it
    }

    return diff == 0;
  }

  public static void main(String[] args) {
    System.out.println(isAnagram("zMarry", "zArmry")); // true
    System.out.println(isAnagram("basiparachromatin", "marsipobranchiata")); // true
    System.out.println(isAnagram("hydroxydeoxycorticosterones", "hydroxydesoxycorticosterone")); // true
    System.out.println(isAnagram("hydroxydeoxycorticosterones", "hydroxydesoxycorticosterons")); // false
    System.out.println(isAnagram("zArmcy", "zArmry")); // false
  }
} 
```

是的，此代码取决于小写字符的 ASCII 英文字符集，但修改为其他语言应该不难。您始终可以使用 Map[Character, Int] 来跟踪相同的信息，它只会更慢。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-08-07T10:23:23.550

通过使用更多内存（最多 N/2 个元素的 HashMap），我们不需要对字符串进行排序。

```
public static boolean areAnagrams(String one, String two) {
    if (one.length() == two.length()) {
        String s0 = one.toLowerCase();
        String s1 = two.toLowerCase();
        HashMap<Character, Integer> chars = new HashMap<Character, Integer>(one.length());
        Integer count;
        for (char c : s0.toCharArray()) {
            count = chars.get(c);
            count = Integer.valueOf(count != null ? count + 1 : 1);
            chars.put(c, count);
        }
        for (char c : s1.toCharArray()) {
            count = chars.get(c);
            if (count == null) {
                return false;
            } else {
                count--;
                chars.put(c, count);
            }
        }
        for (Integer i : chars.values()) {
            if (i != 0) {
                return false;
            }
        }
        return true;
    } else {
        return false;
    }
} 
```

这个函数实际上是在 O(N) ...而不是 O(NlogN) 中运行的，用于对字符串进行排序的解决方案。如果我假设您将只使用字母字符，我只能使用 26 个整数的数组（从 a 到 z，没有重音或装饰）而不是 hashmap。

如果我们定义： N = |one| + |二| 我们对 N 进行一次迭代（一次超过 1 以增加计数器，一次以减少计数器超过 2）。然后检查我们在 mose N/2 处迭代的总数。

所描述的其他算法有一个优点：假设 Arrays.sort 使用 QuickSort 或合并排序的就地版本，它们不使用额外的内存。但是由于我们在谈论字谜，我会假设我们在谈论人类语言，因此单词不应该长到足以引起记忆问题。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-12-08T02:22:14.107

```
 /*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

package Algorithms;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;
import javax.swing.JOptionPane;

/**
 *
 * @author Mokhtar
 */
public class Anagrams {

    //Write aprogram to check if two words are anagrams
    public static void main(String[] args) {
        Anagrams an=new Anagrams();
        ArrayList<String> l=new ArrayList<String>();
        String result=JOptionPane.showInputDialog("How many words to test anagrams");
        if(Integer.parseInt(result) >1)
        {    
            for(int i=0;i<Integer.parseInt(result);i++)
            {

                String word=JOptionPane.showInputDialog("Enter word #"+i);
                l.add(word);   
            }
            System.out.println(an.isanagrams(l));
        }
        else
        {
            JOptionPane.showMessageDialog(null, "Can not be tested, \nYou can test two words or more");
        }

    }

    private static String sortString( String w )
    {
        char[] ch = w.toCharArray();
        Arrays.sort(ch);
        return new String(ch);
    }

    public boolean isanagrams(ArrayList<String> l)
    {
        boolean isanagrams=true; 
        ArrayList<String> anagrams = null;
        HashMap<String, ArrayList<String>> map =  new HashMap<String, ArrayList<String>>();
        for(int i=0;i<l.size();i++)
            {
        String word = l.get(i);
        String sortedWord = sortString(word);
            anagrams = map.get( sortedWord );
        if( anagrams == null ) anagrams = new ArrayList<String>();
        anagrams.add(word);
        map.put(sortedWord, anagrams);
            }

            for(int h=0;h<l.size();h++)
            {
                if(!anagrams.contains(l.get(h)))
                {
                    isanagrams=false;
                    break;
                }
            }

            return isanagrams;
        //}
        }

} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-02-15T20:24:04.583

我是一名 C++ 开发人员，下面的代码使用 C++ 编写。我相信最快和最简单的方法是：

创建一个大小为 26 的整数向量，所有槽都初始化为 0，并将字符串的每个字符放在向量中的适当位置。请记住，向量是按字母顺序排列的，因此如果字符串中的第一个字母是 z，它将进入 myvector[26]。注意：这可以使用 ASCII 字符来完成，所以基本上你的代码看起来像这样：

```
string s = zadg;
for(int i =0; i < s.size(); ++i){
    myvector[s[i] - 'a'] = myvector['s[i] - 'a'] + 1;
} 
```

因此，插入所有元素将花费 O(n) 时间，因为您只会遍历列表一次。您现在可以对第二个字符串执行完全相同的操作，这也需要 O(n) 时间。然后，您可以通过检查每个插槽中的计数器是否相同来比较两个向量。如果是，则意味着您在两个字符串中都有相同数量的每个字符，因此它们是字谜。两个向量的比较也应该花费 O(n) 时间，因为您只遍历它一次。

注意：该代码仅适用于单个单词的字符。如果你有空格、数字和符号，你可以创建一个大小为 96（ASCII 字符 32-127）的向量，而不是说 - 'a' 你会说 - ' ' 因为空格字符是第一个ASCII 字符列表。

我希望这会有所帮助。如果我在某处犯了错误，请发表评论。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-07-15T09:32:00.997

这里有很多复杂的答案。基于[接受的答案](https://stackoverflow.com/questions/15045640/how-to-check-if-two-words-are-anagrams-in-java/31426625#17004897)和提到'ac'-'bb'问题[的评论](https://stackoverflow.com/questions/15045640/how-to-check-if-two-words-are-anagrams-in-java/31426625#comment50369816_17004897)假设A = 65 B = 66 C = 67，我们可以简单地使用代表字符的每个整数的平方并解决问题：

```
public boolean anagram(String s, String t) {
    if(s.length() != t.length())
        return false;

    int value = 0;
    for(int i = 0; i < s.length(); i++){
        value += ((int)s.charAt(i))^2;
        value -= ((int)t.charAt(i))^2;
    }
    return value == 0;
} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-03-25T09:12:59.947

到目前为止，所有提议的解决方案都适用于单独的`char`项目，而不是代码点。我想提出两种解决方案来正确处理[代理对](https://stackoverflow.com/a/5903080/3459206)（这些是[从 U+10000 到 U+10FFFF](https://en.wikipedia.org/wiki/UTF-16#U.2B10000_to_U.2B10FFFF)的字符，由两个`char`项目组成）。

1)利用 Java 8流的单行**O(n logn)解决方案：**[`CharSequence.codePoints()`](https://docs.oracle.com/javase/8/docs/api/java/lang/CharSequence.html#codePoints--)

```
static boolean areAnagrams(CharSequence a, CharSequence b) {
    return Arrays.equals(a.codePoints().sorted().toArray(),
                         b.codePoints().sorted().toArray());
} 
```

2) 不太优雅的**O(n)**解决方案*（事实上，它只会对不太可能成为字谜的长字符串更快）*：

```
static boolean areAnagrams(CharSequence a, CharSequence b) {
    int len = a.length();
    if (len != b.length())
        return false;

    // collect codepoint occurrences in "a"
    Map<Integer, Integer> ocr = new HashMap<>(64);
    a.codePoints().forEach(c -> ocr.merge(c, 1, Integer::sum));

    // for each codepoint in "b", look for matching occurrence
    for (int i = 0, c = 0; i < len; i += Character.charCount(c)) {
        int cc = ocr.getOrDefault((c = Character.codePointAt(b, i)), 0);
        if (cc == 0)                        
            return false;            
        ocr.put(c, cc - 1);
    }
    return true;
} 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-06-12T09:22:12.787

感谢您指出发表评论，发表评论时我发现有不正确的逻辑。我更正了逻辑并为每段代码添加了注释。

```
// Time complexity: O(N) where N is number of character in String
// Required space :constant space.
// will work for string that contains ASCII chars

private static boolean isAnagram(String s1, String s2) {

    // if length of both string's are not equal then they are not anagram of each other 
    if(s1.length() != s2.length())return false;

    // array to store the presence of a character with number of occurrences.   
    int []seen = new int[256];

    // initialize the array with zero. Do not need to initialize specifically  since by default element will initialized by 0.
    // Added this is just increase the readability of the code. 
    Arrays.fill(seen, 0);

    // convert each string to lower case if you want to make ABC and aBC as anagram, other wise no need to change the case.  
    s1 = s1.toLowerCase();
    s2 = s2.toLowerCase();

    //  iterate through the first string and count the occurrences of each character
    for(int i =0; i < s1.length(); i++){
        seen[s1.charAt(i)] = seen[s1.charAt(i)] +1;
    }

    // iterate through second string and if any char has 0 occurrence then return false, it mean some char in s2 is there that is not present in s1.
    // other wise reduce the occurrences by one every time .
    for(int i =0; i < s2.length(); i++){
        if(seen[s2.charAt(i)] ==0)return false;
        seen[s2.charAt(i)] = seen[s2.charAt(i)]-1;
    }

    // now if both string have same occurrence of each character then the seen array must contains all element as zero. if any one has non zero element return false mean there are 
    // some character that either does not appear in one of the string or/and mismatch in occurrences 
    for(int i = 0; i < 256; i++){
        if(seen[i] != 0)return false;
    }
    return true;
} 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-09-17T11:43:29.267

恕我直言，@Siguza 提供了最有效的解决方案，我已将其扩展到包含空格的字符串，例如：“William Shakespeare”、“I am a weakish speller”、“School master”、“The class”

```
public int getAnagramScore(String word, String anagram) {

        if (word == null || anagram == null) {
            throw new NullPointerException("Both, word and anagram, must be non-null");
        }

        char[] wordArray = word.trim().toLowerCase().toCharArray();
        char[] anagramArray = anagram.trim().toLowerCase().toCharArray();

        int[] alphabetCountArray = new int[26];

        int reference = 'a';

        for (int i = 0; i < wordArray.length; i++) {
            if (!Character.isWhitespace(wordArray[i])) {
                alphabetCountArray[wordArray[i] - reference]++;
            }
        }
        for (int i = 0; i < anagramArray.length; i++) {
            if (!Character.isWhitespace(anagramArray[i])) {
                alphabetCountArray[anagramArray[i] - reference]--;
            }
        }

        for (int i = 0; i < 26; i++)
            if (alphabetCountArray[i] != 0)
                return 0;

        return word.length();

    } 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2013-12-18T21:51:42.203

排序方法不是最好的方法。它需要 O(n) 空间和 O(nlogn) 时间。相反，制作一个字符的哈希映射并计算它们（增加出现在第一个字符串中的字符和减少出现在第二个字符串中的字符）。当某个计数达到零时，将其从哈希中删除。最后，如果两个字符串是字谜，那么哈希表最终将为空 - 否则它不会为空。

几个重要说明：（1）忽略字母大小写和（2）忽略空格。

下面是详细的C#分析和实现：[Test If Two Strings are Anagrams](https://codinghelmet.com/exercises/anagram-testing)

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2014-04-20T14:01:51.340

类似的答案可能已经在 C++ 中发布，这里又是在 Java 中。请注意，最优雅的方法是使用 Trie 以排序顺序存储字符，但是，这是一个更复杂的解决方案。一种方法是使用哈希集来存储我们正在比较的所有单词，然后逐个比较它们。要比较它们，请使用表示字符的 ANCII 值的索引（使用归一化器，因为 'a' 的 ANCII 值是 97）和表示该字符的出现次数的值来创建一个字符数组。这将在 O(n) 时间内运行并使用 O(m*z) 空间，其中 m 是 currentWord 的大小，z 是 storedWord 的大小，我们为此创建了一个 Char[]。

```
public static boolean makeAnagram(String currentWord, String storedWord){
    if(currentWord.length() != storedWord.length()) return false;//words must be same length
    Integer[] currentWordChars = new Integer[totalAlphabets];
    Integer[] storedWordChars = new Integer[totalAlphabets];
    //create a temp Arrays to compare the words
    storeWordCharacterInArray(currentWordChars, currentWord);
    storeWordCharacterInArray(storedWordChars, storedWord);
    for(int i = 0; i < totalAlphabets; i++){
        //compare the new word to the current charList to see if anagram is possible
        if(currentWordChars[i] != storedWordChars[i]) return false;
    }
    return true;//and store this word in the HashSet of word in the Heap
}
//for each word store its characters
public static void storeWordCharacterInArray(Integer[] characterList, String word){
    char[] charCheck = word.toCharArray();
    for(char c: charCheck){
        Character cc = c;
        int index = cc.charValue()-indexNormalizer;
        characterList[index] += 1;
    }
} 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2015-07-29T16:08:53.190

*数学家在编写任何代码之前*可能会如何思考这个问题：

1.  字符串之间的关系“是字谜”是**等价关系**，因此将所有字符串的集合划分为等价类。
2.  假设我们有一个规则从每个类中选择一个**代表**（婴儿床），那么通过比较它们的代表很容易测试两个类是否相同。
3.  一组字符串的一个明显代表是“**按字典顺序排列的最小元素**”，它很容易通过排序从任何元素中计算出来。例如，包含“hat”的字谜类的代表是“aht”。

在您的示例中，“schoolmaster”和“theclassroom”是字谜，因为它们都属于带有婴儿床“acehlmoorsst”的字谜类。

在伪代码中：

```
>>> def crib(word):
...     return sorted(word)
...
>>> crib("schoolmaster") == crib("theclassroom")
True 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-09-04T17:00:42.083

```
import java.util.ArrayList;
import java.util.List;
import java.util.Map;
import java.util.TreeMap;
/**
 * Check if Anagram by Prime Number Logic
 * @author Pallav
 *
 */
public class Anagram {
    public static void main(String args[]) {
        System.out.println(isAnagram(args[0].toUpperCase(),
                args[1].toUpperCase()));
    }
/**
 * 
 * @param word : The String 1
 * @param anagram_word : The String 2 with which Anagram to be verified
 * @return true or false based on Anagram
 */
    public static Boolean isAnagram(String word, String anagram_word) {
        //If length is different return false
        if (word.length() != anagram_word.length()) {
            return false;
        }
        char[] words_char = word.toCharArray();//Get the Char Array of First String
        char[] anagram_word_char = anagram_word.toCharArray();//Get the Char Array of Second String
        int words_char_num = 1;//Initialize Multiplication Factor to 1
        int anagram_word_num = 1;//Initialize Multiplication Factor to 1 for String 2
        Map<Character, Integer> wordPrimeMap = wordPrimeMap();//Get the Prime numbers Mapped to each alphabets in English
        for (int i = 0; i < words_char.length; i++) {
            words_char_num *= wordPrimeMap.get(words_char[i]);//get Multiplication value for String 1
        }
        for (int i = 0; i < anagram_word_char.length; i++) {
            anagram_word_num *= wordPrimeMap.get(anagram_word_char[i]);//get Multiplication value for String 2
        }

        return anagram_word_num == words_char_num;
    }
/**
 * Get the Prime numbers Mapped to each alphabets in English
 * @return
 */
    public static Map<Character, Integer> wordPrimeMap() {
        List<Integer> primes = primes(26);
        int k = 65;
        Map<Character, Integer> map = new TreeMap<Character, Integer>();
        for (int i = 0; i < primes.size(); i++) {
            Character character = (char) k;
            map.put(character, primes.get(i));
            k++;
        }
        // System.out.println(map);
        return map;
    }
/**
 * get first N prime Numbers where Number is greater than 2
 * @param N : Number of Prime Numbers
 * @return
 */
    public static List<Integer> primes(Integer N) {
        List<Integer> primes = new ArrayList<Integer>();
        primes.add(2);
        primes.add(3);

        int n = 5;
        int k = 0;
        do {
            boolean is_prime = true;
            for (int i = 2; i <= Math.sqrt(n); i++) {
                if (n % i == 0) {
                    is_prime = false;
                    break;
                }
            }

            if (is_prime == true) {
                primes.add(n);

            }
            n++;
            // System.out.println(k);
        } while (primes.size() < N);

        // }

        return primes;
    }

} 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2017-10-18T07:14:49.703

这是我的解决方案。首先将字符串分解为 char 数组，然后对它们进行排序，然后比较它们是否相等。我猜这段代码的时间复杂度是 O(a+b)。如果 a=b 我们可以说 O(2A)

```
public boolean isAnagram(String s1, String s2) {

        StringBuilder sb1 = new StringBuilder();
        StringBuilder sb2 = new StringBuilder();
        if (s1.length() != s2.length())
            return false;

        char arr1[] = s1.toCharArray();
        char arr2[] = s2.toCharArray();
        Arrays.sort(arr1);
        Arrays.sort(arr2);

        for (char c : arr1) {
            sb1.append(c);
        }

        for (char c : arr2) {
            sb2.append(c);
        }

        System.out.println(sb1.toString());
        System.out.println(sb2.toString());

        if (sb1.toString().equals(sb2.toString()))
            return true;
        else
            return false;

    } 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2019-02-25T18:16:34.457

```
// When this method returns 0 means strings are Anagram, else Not.

public static int isAnagram(String str1, String str2) {
        int value = 0;
        if (str1.length() == str2.length()) {
            for (int i = 0; i < str1.length(); i++) {
                value = value + str1.charAt(i);
                value = value - str2.charAt(i);
            }

        } else {
            value = -1;
        }
        return value;
    } 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2013-04-20T23:07:55.150

其他一些没有排序的解决方案。

```
public static boolean isAnagram(String s1, String s2){
    //case insensitive anagram

    StringBuffer sb = new StringBuffer(s2.toLowerCase());
    for (char c: s1.toLowerCase().toCharArray()){
        if (Character.isLetter(c)){

            int index = sb.indexOf(String.valueOf(c));
            if (index == -1){
                //char does not exist in other s2
                return false;
            }
            sb.deleteCharAt(index);
        }
    }
    for (char c: sb.toString().toCharArray()){
        //only allow whitespace as left overs
        if (!Character.isWhitespace(c)){
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2014-05-13T11:28:53.440

一个简单的方法来判断 testString 是否是 baseString 的字谜。

```
private static boolean isAnagram(String baseString, String testString){
    //Assume that there are no empty spaces in either string.

    if(baseString.length() != testString.length()){
        System.out.println("The 2 given words cannot be anagram since their lengths are different");
        return false;
    }
    else{
        if(baseString.length() == testString.length()){
            if(baseString.equalsIgnoreCase(testString)){
                System.out.println("The 2 given words are anagram since they are identical.");
                return true;
            }
            else{
                List<Character> list = new ArrayList<>();

                for(Character ch : baseString.toLowerCase().toCharArray()){
                    list.add(ch);
                }
                System.out.println("List is : "+ list);

                for(Character ch : testString.toLowerCase().toCharArray()){
                    if(list.contains(ch)){
                        list.remove(ch);
                    }
                }

                if(list.isEmpty()){
                    System.out.println("The 2 words are anagrams");
                    return true;
                }
            }
        }
    }
    return false;
} 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2014-06-15T14:00:38.190

抱歉，解决方案是用 C# 编写的，但我认为用于得出解决方案的不同元素非常直观。连字符的单词需要稍微调整，但对于普通单词它应该可以正常工作。

```
 internal bool isAnagram(string input1,string input2)
    {
        Dictionary<char, int> outChars = AddToDict(input2.ToLower().Replace(" ", ""));
        input1 = input1.ToLower().Replace(" ","");
        foreach(char c in input1)
        {
            if (outChars.ContainsKey(c))
            {
                if (outChars[c] > 1)
                    outChars[c] -= 1;
                else
                    outChars.Remove(c);
            }
        }
        return outChars.Count == 0;
    }

    private Dictionary<char, int> AddToDict(string input)
    {
        Dictionary<char, int> inputChars = new Dictionary<char, int>();
        foreach(char c in input)
        {
            if(inputChars.ContainsKey(c))
            {
                inputChars[c] += 1;
            }
            else
            {
                inputChars.Add(c, 1);
            }     
        }
        return inputChars;
    } 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2014-09-25T21:08:00.250

我看到没有人使用“哈希码”方法来找出字谜。我发现我的方法与上面讨论的方法几乎没有什么不同，因此想到了分享它。我编写了以下代码来查找在 O(n) 中有效的字谜。

```
/**
 * This class performs the logic of finding anagrams
 * @author ripudam
 *
 */
public class AnagramTest {

    public static boolean isAnagram(final String word1, final String word2) {

            if (word1 == null || word2 == null || word1.length() != word2.length()) {
                 return false;
            }

            if (word1.equals(word2)) {
                return true;
            }

            final AnagramWrapper word1Obj = new AnagramWrapper(word1);
            final AnagramWrapper word2Obj = new AnagramWrapper(word2);

            if (word1Obj.equals(word2Obj)) {
                return true;
            }

            return false;
        }

        /*
         * Inner class to wrap the string received for anagram check to find the
         * hash
         */
        static class AnagramWrapper {
            String word;

            public AnagramWrapper(final String word) {
                this.word = word;
            }

            @Override
            public boolean equals(final Object obj) {

                return hashCode() == obj.hashCode();
            }

            @Override
            public int hashCode() {
                final char[] array = word.toCharArray();
                int hashcode = 0;
                for (final char c : array) {
                    hashcode = hashcode + (c * c);
                }
                return hashcode;
            }
         }
    } 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2016-02-17T11:10:08.823

这是在 Java 中使用 HashMap 的另一种方法

```
public static boolean isAnagram(String first, String second) {
    if (first == null || second == null) {
        return false;
    }
    if (first.length() != second.length()) {
        return false;
    }
    return doCheckAnagramUsingHashMap(first.toLowerCase(), second.toLowerCase());
}

private static boolean doCheckAnagramUsingHashMap(final String first, final String second) {
    Map<Character, Integer> counter = populateMap(first, second);
    return validateMap(counter);
}

private static boolean validateMap(Map<Character, Integer> counter) {
    for (int val : counter.values()) {
        if (val != 0) {
            return false;
        }
    }
    return true;
} 
```

这是测试用例

```
@Test
public void anagramTest() {
    assertTrue(StringUtil.isAnagram("keep" , "PeeK"));
    assertFalse(StringUtil.isAnagram("Hello", "hell"));
    assertTrue(StringUtil.isAnagram("SiLeNt caT", "LisTen cat"));       
} 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2017-07-21T11:13:25.493

```
private static boolean checkAnagram(String s1, String s2) {
   if (s1 == null || s2 == null) {
       return false;
   } else if (s1.length() != s2.length()) {
       return false;
   }
   char[] a1 = s1.toCharArray();
   char[] a2 = s2.toCharArray();
   int length = s2.length();
   int s1Count = 0;
   int s2Count = 0;
   for (int i = 0; i < length; i++) {
       s1Count+=a1[i];
       s2Count+=a2[i];
   }
   return s2Count == s1Count ? true : false;
} 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2019-01-05T05:00:13.053

复杂度为 O(N) 的最简单解决方案是使用 Map。

```
public static Boolean checkAnagram(String string1, String string2) {
    Boolean anagram = true;

    Map<Character, Integer> map1 = new HashMap<>();
    Map<Character, Integer> map2 = new HashMap<>();

    char[] chars1 = string1.toCharArray();
    char[] chars2 = string2.toCharArray();

    for(int i=0; i<chars1.length; i++) {
        if(map1.get(chars1[i]) == null) {
            map1.put(chars1[i], 1);
        } else {
            map1.put(chars1[i], map1.get(chars1[i])+1);
        }

        if(map2.get(chars2[i]) == null) {
            map2.put(chars2[i], 1);
        } else {
            map2.put(chars2[i], map2.get(chars2[i])+1);
        }
    }

    Set<Map.Entry<Character, Integer>> entrySet1 = map1.entrySet();
    Set<Map.Entry<Character, Integer>> entrySet2 = map2.entrySet();
    for(Map.Entry<Character, Integer> entry:entrySet1) {

        if(entry.getValue() != map2.get(entry.getKey())) {
            anagram = false;
            break;
        }
    }

    return anagram;
} 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2021-01-13T09:27:05.507

让我们提出一个问题：给定两个字符串 s 和 t，编写一个函数来确定 t 是否是 s 的字谜。

例如，s = "anagram"，t = "nagaram"，返回 true。s =“老鼠”，t =“汽车”，返回假。

方法一（使用 HashMap ）：

```
public class Method1 {

    public static void main(String[] args) {
        String a = "protijayi";
        String b = "jayiproti";
        System.out.println(isAnagram(a, b ));// output => true

    }

    private static boolean isAnagram(String a, String b) {
        Map<Character ,Integer> map = new HashMap<>();
        for( char c : a.toCharArray()) {
            map.put(c,    map.getOrDefault(c, 0 ) + 1 );
        }
        for(char c : b.toCharArray()) {
            int count = map.getOrDefault(c, 0);
            if(count  == 0 ) {return false ; }
            else {map.put(c, count - 1 ) ; }
        }

        return true;
    }

} 
```

方法二：

```
public class Method2 {
public static void main(String[] args) {
    String a = "protijayi";
    String b = "jayiproti";

    System.out.println(isAnagram(a, b));// output=> true
}

private static boolean isAnagram(String a, String b) {

    int[] alphabet = new int[26];
    for(int i = 0 ; i < a.length() ;i++) {
         alphabet[a.charAt(i) - 'a']++ ;
    }
    for (int i = 0; i < b.length(); i++) {
         alphabet[b.charAt(i) - 'a']-- ;
    }

    for(  int w :  alphabet ) {
         if(w != 0 ) {return false;}
    }
    return true;

}
} 
```

方法3：

```
public class Method3 {
public static void main(String[] args) {
    String a = "protijayi";
    String b = "jayiproti";

    System.out.println(isAnagram(a, b ));// output => true
}

private static boolean isAnagram(String a, String b) {
    char[] ca = a.toCharArray() ;
    char[] cb = b.toCharArray();
    Arrays.sort(   ca     );

    Arrays.sort(   cb        );
    return Arrays.equals(ca , cb );
}
} 
```

方法四：

```
public class AnagramsOrNot {
    public static void main(String[] args) {
        String a = "Protijayi";
        String b = "jayiProti";
        isAnagram(a, b);
    }

    private static void isAnagram(String a, String b) {
        Map<Integer, Integer> map = new LinkedHashMap<>();

        a.codePoints().forEach(code -> map.put(code, map.getOrDefault(code, 0) + 1));
        System.out.println(map);
        b.codePoints().forEach(code -> map.put(code, map.getOrDefault(code, 0) - 1));
        System.out.println(map);
        if (map.values().contains(0)) {
            System.out.println("Anagrams");
        } else {
            System.out.println("Not Anagrams");
        }
    }
} 
```

在 Python 中：

```
def areAnagram(a, b):
    if len(a) != len(b): return False
    count1 = [0] * 256
    count2 = [0] * 256
    for i in a:count1[ord(i)] += 1
    for i in b:count2[ord(i)] += 1

    for i in range(256):
        if(count1[i] != count2[i]):return False    

    return True

str1 = "Giniiii"
str2 = "Protijayi"
print(areAnagram(str1, str2)) 
```

让我们来看看另一个著名的面试问题：对给定字符串中的 Anagrams 进行分组：

```
public class GroupAnagrams {
    public static void main(String[] args) {
        String a = "Gini Gina Protijayi iGin aGin jayiProti Soudipta";
        Map<String, List<String>> map = Arrays.stream(a.split(" ")).collect(Collectors.groupingBy(GroupAnagrams::sortedString));
        System.out.println("MAP => " + map);
        map.forEach((k,v) -> System.out.println(k +" and the anagrams are =>" + v ));
        /*
         Look at the Map output:
        MAP => {Giin=[Gini, iGin], Paiijorty=[Protijayi, jayiProti], Sadioptu=[Soudipta], Gain=[Gina, aGin]}
        As we can see, there are multiple Lists. Hence, we have to use a flatMap(List::stream)
        Now, Look at the output:
        Paiijorty and the anagrams are =>[Protijayi, jayiProti]

        Now, look at this output:
        Sadioptu and the anagrams are =>[Soudipta]
        List contains only word. No anagrams.
        That means we have to work with map.values(). List contains all the anagrams.

        */
        String stringFromMapHavingListofLists = map.values().stream().flatMap(List::stream).collect(Collectors.joining(" "));
        System.out.println(stringFromMapHavingListofLists);
    }

    public static String sortedString(String a) {
        String sortedString = a.chars().sorted()
                .collect(StringBuilder::new, StringBuilder::appendCodePoint, StringBuilder::append).toString();

        return sortedString;

    }

    /*
     * The output : Gini iGin Protijayi jayiProti Soudipta Gina aGin
     * All the anagrams are side by side.
     */
} 
```

现在在 Python 中对 Anagrams 进行分组再次变得容易。我们必须： 对列表进行排序。然后，创建字典。现在字典会告诉我们这些字谜在哪里（字典索引）。那么字典的值就是字谜的实际索引。

```
def groupAnagrams(words):

    # sort each word in the list
    A = [''.join(sorted(word)) for word in words]
    dict = {}
    for indexofsamewords, names in enumerate(A):
     dict.setdefault(names, []).append(indexofsamewords)
    print(dict)
    #{'AOOPR': [0, 2, 5, 11, 13], 'ABTU': [1, 3, 4], 'Sorry': [6], 'adnopr': [7], 'Sadioptu': [8, 16], ' KPaaehiklry': [9], 'Taeggllnouy': [10], 'Leov': [12], 'Paiijorty': [14, 18], 'Paaaikpr': [15], 'Saaaabhmryz': [17], ' CNaachlortttu': [19], 'Saaaaborvz': [20]}

    for index in dict.values():
     print([words[i] for i in index])

if __name__ == '__main__':

    # list of words
    words = ["ROOPA","TABU","OOPAR","BUTA","BUAT" , "PAROO","Soudipta",
        "Kheyali Park", "Tollygaunge", "AROOP","Love","AOORP", "Protijayi","Paikpara","dipSouta","Shyambazaar",
        "jayiProti", "North Calcutta", "Sovabazaar"]

    groupAnagrams(words) 
```

输出 ：

```
['ROOPA', 'OOPAR', 'PAROO', 'AROOP', 'AOORP']
['TABU', 'BUTA', 'BUAT']
['Soudipta', 'dipSouta']
['Kheyali Park']
['Tollygaunge']
['Love']
['Protijayi', 'jayiProti']
['Paikpara']
['Shyambazaar']
['North Calcutta']
['Sovabazaar'] 
```

另一个重要的字谜问题：找到最大的字谜。次数。在示例中，ROOPA 是出现次数最多的单词。因此， ['ROOPA' 'OOPAR' 'PAROO' 'AROOP' 'AOORP'] 将是最终输出。

```
from sqlite3 import collections
from statistics import mode, mean

import numpy as np

# list of words
words = ["ROOPA","TABU","OOPAR","BUTA","BUAT" , "PAROO","Soudipta",
        "Kheyali Park", "Tollygaunge", "AROOP","Love","AOORP",
         "Protijayi","Paikpara","dipSouta","Shyambazaar",
        "jayiProti", "North Calcutta", "Sovabazaar"]

print(".....Method 1....... ")

sortedwords = [''.join(sorted(word)) for word in words]
print(sortedwords)
print("...........")
LongestAnagram = np.array(words)[np.array(sortedwords) == mode(sortedwords)]
# Longest anagram 
print("Longest anagram by Method 1:")
print(LongestAnagram)

print(".....................................................")  

print(".....Method 2....... ")  

A = [''.join(sorted(word)) for word in words]

dict = {}

for indexofsamewords,samewords in  enumerate(A):
    dict.setdefault(samewords,[]).append(samewords)
#print(dict)  
#{'AOOPR': ['AOOPR', 'AOOPR', 'AOOPR', 'AOOPR', 'AOOPR'], 'ABTU': ['ABTU', 'ABTU', 'ABTU'], 'Sadioptu': ['Sadioptu', 'Sadioptu'], ' KPaaehiklry': [' KPaaehiklry'], 'Taeggllnouy': ['Taeggllnouy'], 'Leov': ['Leov'], 'Paiijorty': ['Paiijorty', 'Paiijorty'], 'Paaaikpr': ['Paaaikpr'], 'Saaaabhmryz': ['Saaaabhmryz'], ' CNaachlortttu': [' CNaachlortttu'], 'Saaaaborvz': ['Saaaaborvz']}

aa =  max(dict.items() , key = lambda x : len(x[1]))
print("aa => " , aa)    
word, anagrams = aa 
print("Longest anagram by Method 2:")
print(" ".join(anagrams)) 
```

输出 ：

```
.....Method 1....... 
['AOOPR', 'ABTU', 'AOOPR', 'ABTU', 'ABTU', 'AOOPR', 'Sadioptu', ' KPaaehiklry', 'Taeggllnouy', 'AOOPR', 'Leov', 'AOOPR', 'Paiijorty', 'Paaaikpr', 'Sadioptu', 'Saaaabhmryz', 'Paiijorty', ' CNaachlortttu', 'Saaaaborvz']
...........
Longest anagram by Method 1:
['ROOPA' 'OOPAR' 'PAROO' 'AROOP' 'AOORP']
.....................................................
.....Method 2....... 
aa =>  ('AOOPR', ['AOOPR', 'AOOPR', 'AOOPR', 'AOOPR', 'AOOPR'])
Longest anagram by Method 2:
AOOPR AOOPR AOOPR AOOPR AOOPR 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2021-02-05T21:30:12.893

这可能是简单的函数调用

功能代码和命令式代码的混合

```
static boolean isAnagram(String a, String b) {

    String sortedA = "";
    Object[] aArr = a.toLowerCase().chars().sorted().mapToObj(i -> (char) i).toArray();
    for (Object o: aArr) {
        sortedA = sortedA.concat(o.toString());
    }

    String sortedB = "";
    Object[] bArr = b.toLowerCase().chars().sorted().mapToObj(i -> (char) i).toArray();
    for (Object o: bArr) {
        sortedB = sortedB.concat(o.toString());
    }

    if(sortedA.equals(sortedB))    
        return true;
    else
        return false;    
} 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2021-07-02T14:33:54.707

我能想到3个解决方案：

1.  使用排序

```
# O(NlogN) + O(MlogM) time, O(1) space 
def solve_by_sort(word1, word2):
    return sorted(word1) == sorted(word2) 
```

2.  使用字母频率计数

```
# O(N+M) time, O(N+M) space
def solve_by_letter_frequency(word1, word2):
    from collections import Counter
    return Counter(word1) == Counter(word2) 
```

3.  使用素数分解的概念。（为每个字母分配质数）

```
import operator
from functools import reduce

# O(N) time, O(1) space - prime factorization
def solve_by_prime_number_hash(word1, word2):
    return get_prime_number_hash(word1) == get_prime_number_hash(word2)

def get_prime_number_hash(word):
    letter_code = {'a': 2, 'b': 3, 'c': 5, 'd': 7, 'e': 11, 'f': 13, 'g': 17, 'h': 19, 'i': 23, 'j': 29, 'k': 31,'l': 37, 'm': 41, 'n': 43,'o': 47, 'p': 53, 'q': 59, 'r': 61, 's': 67, 't': 71, 'u': 73, 'v': 79, 'w': 83, 'x': 89, 'y': 97,'z': 101}
    return 0 if not word else reduce(operator.mul, [letter_code[letter] for letter in word]) 
```

我在我的媒体[故事](https://freezefrancis.medium.com/algorithm-for-detecting-anagrams-8454680f2c0b)中对这些进行了更详细的分析。

* * *

## 回答 #31

> 赞同：-1
> 
> 时间：2013-02-23T21:07:18.813

你应该使用类似的东西：

```
 for (int i...) {
        isFound = false;
        for (int j...) {
            if (...) {
                ...
                isFound = true;
            }
        } 
```

的默认值`isFound`应该是假的。只是它

* * *

## 回答 #32

> 赞同：-1
> 
> 时间：2015-07-26T00:42:33.610

我知道这是一个老问题。但是，我希望这可以对某人有所帮助。该解决方案的时间复杂度为 O(n^2)。

```
public boolean areAnagrams(final String word1, final String word2) {
        if (word1.length() != word2.length())
            return false;

        if (word1.equals(word2))
            return true;

        if (word1.length() == 0 && word2.length() == 0)
            return true;

        String secondWord = word2;
        for (int i = 0; i < word1.length(); i++) {
            if (secondWord.indexOf(word1.charAt(i)) == -1)
                return false;

            secondWord = secondWord.replaceFirst(word1.charAt(i) + "", "");
        }

        if (secondWord.length() > 0)
            return false;

        return true;
} 
```

* * *

## 回答 #33

> 赞同：-1
> 
> 时间：2016-03-09T04:42:19.643

完美运行！但不是一个好方法，因为它在 O(n^2) 中运行

```
boolean isAnagram(String A, String B) {
    if(A.length() != B.length())
        return false;

   A = A.toLowerCase();
   B = B.toLowerCase();

   for(int i = 0; i < A.length(); i++){
       boolean found = false;
       for(int j = 0; j < B.length(); j++){
           if(A.charAt(i) == B.charAt(j)){
               found = true;
               break;
           }
       }
       if(!found){
           return false;
       }
   }

   for(int i = 0; i < B.length(); i++){
       boolean found = false;
       for(int j = 0; j < A.length(); j++){
           if(A.charAt(j) == B.charAt(i)){
               found = true;
               break;
           }
       }
       if(!found){
           return false;
       }
   }

   int sum1 = 0, sum2 = 0;
   for(int i = 0; i < A.length(); i++){
       sum1 += (int)A.charAt(i);
       sum2 += (int)B.charAt(i);               
   }

   if(sum1 == sum2){
       return true;
   } 
   return false;
} 
```

* * *

## 回答 #34

> 赞同：-1
> 
> 时间：2017-06-09T11:52:56.323

我用java编写了这个程序。我认为这也可能有所帮助：

```
public class Anagram {
    public static void main(String[] args) {
        checkAnagram("listen", "silent");
    }

    public static void checkAnagram(String str1, String str2) {
        boolean isAnagram = false;
        str1 = sortStr(str1);
        str2 = sortStr(str2);
        if (str1.equals(str2)) {
            isAnagram = true;
        }
        if (isAnagram) {
            System.out.println("Two strings are anagram");
        } else {
            System.out.println("Two string are not anagram");
        }

    }

    public static String sortStr(String str) {
        char[] strArr = str.toCharArray();
        for (int i = 0; i < str.length(); i++) {
            for (int j = i + 1; j < str.length(); j++) {
                if (strArr[i] > strArr[j]) {
                    char temp = strArr[i];
                    strArr[i] = strArr[j];
                    strArr[j] = temp;
                }
            }
        }
        String output = String.valueOf(strArr);
        return output;
    }
} 
```

* * *

## 回答 #35

> 赞同：-2
> 
> 时间：2014-05-26T09:21:22.867

解决此问题的方法-基于 Sai Kiran 的回答..

```
import java.util.Scanner;

public class Anagram {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        System.out.print("Enter first word : ");
        String word1 = sc.nextLine();
        System.out.print("Enter second word : ");
        String word2 = sc.nextLine();

        sc.close();

        System.out.println("Is Anagram : " + isAnagram(word1, word2));
    }

    private static boolean isAnagram(String word1, String word2) {

        if (word1.length() != word2.length()) {
            System.err.println("Words length didn't match!");
            return false;
        }

        char ch1, ch2;
        int len = word1.length(), sumOfWord1Chars = 0, sumOfWord2Chars = 0;

        for (int i = 0; i < len; i++) {
            ch1 = word1.charAt(i);
            if (word2.indexOf(ch1) < 0) {
                System.err.println("'" + ch1 + "' not found in \"" + word2
                        + "\"");
                return false;
            }
            sumOfWord1Chars += word1.charAt(i);

            ch2 = word2.charAt(i);
            if (word1.indexOf(ch2) < 0) {
                System.err.println("'" + ch2 + "' not found in \"" + word1
                        + "\"");
                return false;
            }
            sumOfWord2Chars += word2.charAt(i);
        }

        if (sumOfWord1Chars != sumOfWord2Chars) {
            System.err
                    .println("Sum of both words didn't match, i.e., words having same characters but with different counts!");
            return false;
        }

        return true;
    }
} 
```

* * *

## 回答 #36

> 赞同：-3
> 
> 时间：2013-02-25T19:12:48.427

对于这样一个简单的任务，似乎很尴尬。

首先，

你的循环太复杂了。尝试这样的事情。

```
public static String lettersOnly(String word) 
{
    int length = word.length();
    StringBuilder end = new StringBuilder(length);
    char x;

    for (int i = (length - 1); i >= 0; i--) {
        x = word.charAt(i);
        if (Character.isLetter(x)) {
            end.append(x);
        }
    }
    return end.toString(); 
```

这是检查它们是否是字谜的一种更简单的方法。

您还可以为所有打印创建一个单独的方法，这会容易得多。

最后，只需使用

```
 String ltrsOnlyOne = lettersOnly(wordOne);
    String ltrsOnlyTwo = lettersOnly(wordTwo); 
```

用于创建字符串。

* * *

## 回答 #37

> 赞同：-4
> 
> 时间：2020-05-08T16:39:06.107

```
 String str1 = "evil";
    String str2 = "vile";

    int ana1 = 0;
    int ana2 = 0;

    for (int i = 0; i < str1.length(); i++) {
        ana1 += str1.charAt(i);
    }

    for (int i = 0; i < str1.length(); i++) {
        ana2 += str2.charAt(i);
    }

    if (ana1 == ana2) {
        System.out.println("Is anagram");
    } 
```

# opencv - 提高 SURF 在小图像上的性能

> ID：15045644
> 
> 赞同：2
> 
> 时间：2013-02-23T21:03:10.963
> 
> 标签：opencv, image-processing, computer-vision, surf, object-recognition

我在网络上遇到的每一个 SURF 实现似乎在从小图像（比如 100x100 或更小）中提取有用数量的兴趣点方面都特别糟糕。

我尝试了多种方法：

1）使用各种放大算法（从简单的最近邻算法到更高级的算法 - 基本上每个升级程序 imagemagick 都提供）在分析之前增加小图像的大小。

2) 其他图像处理调整以显示图像中的特征，例如对比度增强和在积分图像计算中使用不同的 RGB 权重。

3）（重新）压缩，假设压缩伪影将主要出现在现有特征周围，从而增加它们的相对“表面积”。

然而，这些都没有对从小图像中提取的兴趣点数量产生任何可测量的影响。

还有什么值得尝试的吗？或者 SURF 只是不擅长小图像，时期？如果是这样，还有哪些其他算法更适合这些算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-04-12T20:55:17.290

这取决于你想做什么。100x100 的图像不包含很多信息。此外，对于 100x100 的图像，SURF 生成有意义的描述符所需的描述符区域非常小。根据您要执行的操作，请尝试以下操作：

1.  使用整个 100 个图像作为描述符大小。根本不检测兴趣点，而是在 100x100 图像的中心（50、50 处）放置一个兴趣点，并使用整个图像数据制作描述符。这可以帮助您检测那些小图像中的相似之处。使用直立 SURF 或与方向无关的 SURF。
2.  使用双图像大小标志获得更多兴趣点。
3.  通过使用更小的表面和更少的正方形来减小描述符的维度。这实际上对于对象识别非常有效，但对于 3D 重建效果不佳。

把它们加起来。这完全取决于您想要达到的目标。随时给我留言（也许在[SURF 的 Github 存储库上](https://github.com/herbertbay/SURF)）

# glsl - GLSL 错误访问以变量为索引的浮点数组

> ID：15045649
> 
> 赞同：2
> 
> 时间：2013-02-23T21:03:26.043
> 
> 标签：glsl

我正在[glsl.heroku.com](http://glsl.heroku.com)中制作一个着色器，当我尝试访问这样声明的浮点数组时：

```
float colors[200]; 
```

这样：

```
int i=function();
float color=colors[i]; 
```

它不编译，出现“编译错误”错误。这是因为 glsl 不允许它还是 Heroku 特定的问题？如果是前者，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:30:47.637

好的，我找到了答案（好吧，用户 kaoD 解决了它）。heroku 使用 WebGL，它使用 OpenGL ES 2.0，它不会将数组视为普通数组，而更像是分隔变量，因此它无法在运行时访问它们，除非它具有常量索引。

# c++ - C++：类和函数的命名空间说明符

> ID：15045651
> 
> 赞同：0
> 
> 时间：2013-02-23T21:03:42.493
> 
> 标签：c++, namespaces

为什么使用向量类我应该写命名空间说明符`std::vector`但`std::find`我可以省略函数`std::`？有什么不同？两者都在`std`命名空间中定义，对吧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T21:08:37.620

> 为什么使用向量类我应该写命名空间说明符 std::vector 但对于 std::find 函数我可以省略 std:: ？

一般来说，这是不正确的。

> 有什么不同。两者都在 std 命名空间中定义，对吧？

是的，原则上没有区别。根据 C++11 标准的第 17.6.1.1/2 段：

> **除了宏、operator new 和 operator delete 之外的所有库实体都定义在命名`std`空间内或嵌套在命名空间内的命名空间内`std`。**[...]

但是，您必须记住，[Argument-Dependent Lookup](http://en.wikipedia.org/wiki/Argument-dependent_name_lookup)规则允许异常：由于这种查找技术，没有必要显式指定函数的命名空间，因为名称将在命名空间中查找您提供给该函数的*参数。*

因此，如果函数恰好与它的任何参数定义在同一个命名空间中，即使它的名称不符合它所属的命名空间，编译器也会找到它：

```
namespace N
{
    struct X { };

    void foo(X) { }
}

int main()
{
    N::X x;
    foo(x); // OK
} 
```

因此，如果您使用命名空间`std::find()`中定义的类型实例的某些参数进行调用，`std`则无需限定对`find()`with的调用`std::`。例如：

```
#include <vector>
#include <algorithm>
#include <iostream>

int main()
{
    std::vector<int> v { 1, 2, 3 };
    auto i = find(v.begin(), v.end(), 2); // ADL applies if the result of
                                          // v.begin() and v.end() is an
                                          // iterator whose type is defined 
                                          // in the std namespace!
    std::cout << *i;
} 
```

显然，这不适用于不接受*任何*参数的函数。在这种情况下，命名空间限定始终是必要的，除非调用点在该命名空间内（尽管您不能向命名空间*添加*任何内容，但`std`命名空间中的一些模板`std`可以被专门化）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T21:08:29.247

一开始，您将库包含到您的程序中（std 命名空间），然后您就不需要一直使用 std 这个词了。但实际上所有对象都等于 std::cout std::cin

std 是 c++ 的基本库之一

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T21:09:09.463

这取决于您如何调用`std::find`...例如，如果您从 std 容器传递一些迭代器，则此函数将由[ADL](http://en.wikipedia.org/wiki/Argument-dependent_name_lookup)找到，否则您必须添加`std::`才能调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T21:16:19.483

出于某种原因，STL 选择在全局名称空间中公开许多算法（在 中）。这就是为什么你可以只写 find(...) 或 transform(...)。向量没有暴露，所以你必须要么做`std::vector<>()`。或者您可以将 using`std::vector;`放在文件顶部

# coding-style - 缩小网站 HTML 代码的术语是什么？前几天看的，现在想不起来了

> ID：15045652
> 
> 赞同：0
> 
> 时间：2013-02-23T21:03:46.883
> 
> 标签：coding-style

在浏览过程中，我尝试查看网页的来源。代码只有 4-5 行，但每行都很长。我知道代码被缩小了，但是用了一个奇怪的词。

就像*SomeWebsite*完成的*Bla Bla Bla*

 *我无法记住这个词。即使我搜索了它，但忘了给它添加书签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:05:32.927

术语是[缩小](http://en.wikipedia.org/wiki/Minification_%28programming%29)。

通常 JavaScript 和 CSS 会被缩小。

一个好的压缩器不仅会删除不必要的符号（例如空格和注释），还会将冗长的 JavaScript 重写为等效的、更紧凑的形式。变量重命名对于 JavaScript 缩小很常见。一个更紧凑但等效的表达式的示例是使用 !0 表示真，使用 !1 表示假。

也可以通过从 HTML 中删除额外的空白来获得一些效率，尽管我个人没有听说过这被称为缩小。*

# iphone - 我可以在 nib 文件中设置自定义 UICollectionViewLayout 吗？

> ID：15045656
> 
> 赞同：0
> 
> 时间：2013-02-23T21:03:59.160
> 
> 标签：iphone, ios, ipad, uicollectionview

我最近一直在试验 UICollectionViews，到目前为止我和他们相处得很好，没有大问题。但是，我正在尝试尽可能多地使用 nib 文件来简化 UI 设计和项目后期的更改，而我似乎无法做的一件事是在 nib 中获取 UICollectionView 对象并为不同类型的布局对象更改默认 UICollectionFlowLayout 对象。我宁愿这样做，因为创建一个对象然后立即在 viewDidLoad 中替换它似乎很浪费。

我已经尝试过简单地选择对象并更改其类型的常用方法，但它不允许我使用常规 UICollectionViewLayout 子类这样做。

有任何想法吗？这不是必需的，但我想正确地做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:08:45.007

在 Collection 视图的 Attributes 检查器中，您必须首先将布局类型从“Flow”更改为“Custom”。然后你可以选择你的自定义`UICollectionViewLayout`类。

![在此处输入图像描述](../Images/adc48f1c3720507c9993c408ae129a93.png)

# android - 从特定日期到日期（例如每个月的 20 日到 20 日）提取通话记录

> ID：15045658
> 
> 赞同：0
> 
> 时间：2013-02-23T21:04:09.203
> 
> 标签：android, calllog

我正在创建一个 android 应用程序，它从设备中获取呼叫日志、格式化其日期等，在列表中显示所有呼叫以及一段代码来计算持续时间到分钟。它工作正常，但我希望我的应用程序显示从每月 20 日到下个月 20 日的通话记录。这样我就可以计算出我一个月说话的分钟数。这是我的代码

```
private String getCallDetails() {

                StringBuffer sb = new StringBuffer();
                Cursor managedCursor = managedQuery(CallLog.Calls.CONTENT_URI, null,
                        null, null, null);
                int number = managedCursor.getColumnIndex(CallLog.Calls.NUMBER);
                int type = managedCursor.getColumnIndex(CallLog.Calls.TYPE);
                int date = managedCursor.getColumnIndex(CallLog.Calls.DATE);
                int duration = managedCursor.getColumnIndex(CallLog.Calls.DURATION);
                sb.append("Call Details :");
                while (managedCursor.moveToNext()) {
                    String phNumber = managedCursor.getString(number);
                    String callType = managedCursor.getString(type);
                    String callDate = managedCursor.getString(date);
                    Date callDayTime = new Date(Long.valueOf(callDate));
                    String dateStr = new SimpleDateFormat("dd:MM:yyyy", Locale.ENGLISH).format(callDayTime);

                    String callDuration = managedCursor.getString(duration);
                    float caldu =Float.parseFloat(callDuration); //convert seconds into minutes eg. 4secs to 1 minute
                    float value = caldu/60;
                    String tempStr=""+value;
                    StringTokenizer tokens = new StringTokenizer(tempStr, ".");
                    String strToken1=tokens.nextToken();
                    String strToken2=tokens.nextToken();
                    int lVal=Integer.parseInt(strToken1);
                    int rVal=Integer.parseInt(strToken2);
                    String CallsDurationStr = null;
                    if(rVal>0)
                    {
                        lVal=lVal+1;
                        CallsDurationStr=""+lVal;
                    }
                    else if(rVal==0)
                    {
                        CallsDurationStr=""+lVal;
                    }

                    String dir = null;
                    int dircode = Integer.parseInt(callType);
                    if(dircode==CallLog.Calls.OUTGOING_TYPE)
                    {
                        dir="outgoing";
                        sb.append("\nPhone Number:--- " + phNumber + " \nCall Date:--- " + dateStr
                                + " \nCall duration in min :--- " + CallsDurationStr);
                        sb.append("\n----------------------------------");
                    }

                }
                managedCursor.close();
                return sb.toString();

            } 
```

它显示了我在设备中的所有通话记录。如何获取特定时期的通话记录。提前致谢！![这是一个视图](../Images/30df6d9e0d8e0a62bfa62ec7a3d3bda0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:10:11.960

您现在正在获取日期，`callDayTime`请检查此日期是否在您的特定日期 A 和 B 之间。如果它超出您的日期持续时间，请不要将此条目添加到您正在使用的字符串缓冲区中。

```
 sb.append("\nPhone Number:--- " + phNumber + " \nCall Date:--- " + dateStr
                            + " \nCall duration in min :--- " + CallsDurationStr);
            sb.append("\n----------------------------------"); 
```

# javascript - Jquery点击功能不起作用

> ID：15045660
> 
> 赞同：0
> 
> 时间：2013-02-23T21:04:20.097
> 
> 标签：javascript, jquery

我正在尝试使用 jquery`click`函数为我的按钮提供一些功能。但是当我运行代码时，该函数根本不会被调用。

我的代码是：

```
 <script type="text/javascript">
 $(function () {
     $("#min").click(function(e){
         $("#listFriends").css('display','none');
         $("#friendsO").show();
     });
 </script> 
```

和

```
<button id="min">[-]</button> 
```

请任何人告诉我我在这段代码中犯了什么错误......谢谢............

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T21:06:13.303

您缺少`});`关闭文档就绪处理程序。

```
$(function() {
   $("#min").click(function(e){
      console.log('test');
      $("#listFriends").hide();
      $("#friendsO").show();
   });
}); // <---- 
```

如果动态生成元素，则应该从元素或`document`对象的静态父对象之一委托事件：

```
$(document).on('click', "#min", function(e){
      console.log('test');
      $("#listFriends").hide();
      $("#friendsO").show();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:12:24.317

在 firefox 上安装 firebug 并启用调试，请参见[此处](https://addons.mozilla.org/en-US/firefox/addon/firebug/)。

# wpf - 如何以编程方式在 WPF ListView 中设置选择标记（焦点项目）

> ID：15045671
> 
> 赞同：2
> 
> 时间：2013-02-23T21:04:58.547
> 
> 标签：wpf, wpf-controls

我找不到在 WPF ListView 中以编程方式设置焦点项目的方法。我只能找到 Selected Item | 的变体 项目 | 索引 | 值，但 'Focused' 项目与 'selected' 项目没有直接关系 - 可以不选择焦点项目（例如，当使用 Ctrl+Click 取消选择当前项目时）。

简而言之-我想从下面提供的代码中获得以下行为（它用虚拟的 8 个项目填充虚拟列表视图，并在按下 X 时尝试从末尾开始关注第二个项目）：

想要的行为：

*   使用鼠标 - 选择第二个项目
*   按 X - 这会从最后开始关注第二个项目
*   按键盘上的“向下”数组 - 这应该将当前选择移动到最后一项

实际发生了什么：

*   使用鼠标 - 选择第二个项目
*   按 X - 这会从最后选择第二个项目，但焦点仍然在从开始的第二个项目上
*   按键盘上的“向下”数组 - 这应该将当前选择移动到最后一项，但选择的是第三项。

注意：普通的 Win32 API（当然，与 WPF 完全不同）有 LVM_SETSELECTIONMARK 消息。我在 WPF 中找不到类似的东西。它存在吗？

示例 XAML：

```
<Window x:Class="WpfListviewTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:sys="clr-namespace:System;assembly=mscorlib"
        Title="MainWindow" Height="350" Width="525">
  <ListView x:Name="List1" KeyDown="List1_KeyDown">
    <ListView.View>
      <GridView>
        <GridViewColumn Width="140" Header="Column 1" />
        <GridViewColumn Width="140" Header="Column 2" />
        <GridViewColumn Width="140" Header="Column 3" />
      </GridView>
    </ListView.View>
    <sys:DateTime>1/2/3</sys:DateTime>
    <sys:DateTime>4/5/6</sys:DateTime>
    <sys:DateTime>7/8/9</sys:DateTime>
    <sys:DateTime>10/11/12</sys:DateTime>
    <sys:DateTime>1/2/3</sys:DateTime>
    <sys:DateTime>4/5/6</sys:DateTime>
    <sys:DateTime>7/8/9</sys:DateTime>
    <sys:DateTime>10/11/12</sys:DateTime>
  </ListView>
</Window> 
```

示例代码隐藏：

```
public partial class MainWindow : Window {
    public MainWindow() {
        InitializeComponent();
    }

    private void List1_KeyDown(object sender, KeyEventArgs e) {
        if( e.Key == Key.X ) {
            List1.SelectionMode = SelectionMode.Single;
            List1.SelectedIndex = List1.Items.Count - 2;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T11:54:48.943

感谢 Mic 回答中的链接，我获得了更多有用的信息，并为我的案例找到了可行的解决方案。

一些背景资料：

*   与 ListView 控件的其他实现不同（在 WinForms 或 Win32 中），WPF 的 ListView 版本没有像 FocusedItem 这样的东西。似乎 MS 决定使用 UIElement 的通用接口将项目集中在列表视图中，每个视觉 ListViewItem 都是其后裔。这导致我的用例在 WPF 中变得更加复杂。

*   WPF listview 中的可视项目可以通过获取，`ListView.ItemContainerGenerator.ContainerFromIndex(index) as ListViewItem`并且该项目具有`Focus()`需要功能的方法。但是，在虚拟化列表视图中，这不适用于当前可见区域之外的项目 - 它们尚未创建并且方法返回`null`:(

*   这就是为什么首先需要使要聚焦的项目可见。这可以通过`ScrollViewer`在 ListView 中使用它的`ScrollToVerticalOffset()`方法来完成（您需要知道要滚动到的项目的索引 - 可以使用 来完成`ListView.Items.IndexOf()`）。

*   接下来，不幸的是，listview 项目不会在程序化滚动完成后立即创建——这就是为什么实际聚焦可以在稍后创建新可见项目时完成的原因。我为此找到了合适的事件 - ListView.LayoutUpdated。

*   侧节点：

    *   有一种`ListView.ScrollIntoView(object item)`方法似乎是获得相同的“本机路径”，但是当列表在不同位置包含相当相等的项目时，它不能可靠地工作。ListView 没有类似`ListView.ScrollIndexIntoView(int index)`.

    *   似乎上面的大多数工作人员都可以通过单一方法使用`VirtualizingStackPanel.BringIndexIntoView()`，但 MS 决定对其进行保护，因此无法从外部访问......

这是工作解决方案

示例 XAML：

```
<Window x:Class="WpfListviewTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:sys="clr-namespace:System;assembly=mscorlib"
        Title="MainWindow" Height="150" Width="525">
  <ListView x:Name="List1" KeyDown="List1_KeyDown" LayoutUpdated="List1_LayoutUpdated">
    <ListView.View>
      <GridView>
        <GridViewColumn Width="140" Header="Column 1" />
        <GridViewColumn Width="140" Header="Column 2" />
        <GridViewColumn Width="140" Header="Column 3" />
      </GridView>
    </ListView.View>
    <sys:DateTime>1/2/3</sys:DateTime>
    <sys:DateTime>4/5/6</sys:DateTime>
    <sys:DateTime>7/8/9</sys:DateTime>
    <sys:DateTime>10/11/12</sys:DateTime>
    <sys:DateTime>1/2/3</sys:DateTime>
    <sys:DateTime>4/5/6</sys:DateTime>
    <sys:DateTime>7/8/9</sys:DateTime>
    <sys:DateTime>10/11/12</sys:DateTime>
  </ListView>
</Window> 
```

示例代码隐藏：

```
public partial class MainWindow : Window {
    public MainWindow() {
        InitializeComponent();
    }

    private int? _indexToFocus;

    private void List1_KeyDown(object sender, KeyEventArgs e) {
        switch( e.Key ) {
            case Key.S:
                FocusItemByIndex(1); break;
            case Key.X:
                FocusItemByIndex(List1.Items.Count - 2); break;
            case Key.Z:
                List1.ScrollIntoView(List1.Items[List1.Items.Count - 2]); break;
        }
    }

    public void FocusItemByIndex(int index) {
        ScrollViewer sv = FindChild<ScrollViewer>(List1);
        double firstVisible = sv.VerticalOffset;
        double lastVisible = firstVisible + sv.ViewportHeight;

        if( index > lastVisible ) {
            double topVisible = index - sv.ViewportHeight + 1;
            sv.ScrollToVerticalOffset(topVisible);
        }
        else if( index < firstVisible ) {
            sv.ScrollToVerticalOffset(index);
        }

        _indexToFocus = index;
    }

    public static T FindChild<T>(DependencyObject parent, string name = null) 
        where T : DependencyObject 
    {
        if( parent == null )
            return null;

        int cChildren = VisualTreeHelper.GetChildrenCount(parent);
        T result = null;

        for( int i = 0; (result == null) && (i < cChildren); i++ ) {
            DependencyObject child = VisualTreeHelper.GetChild(parent, i);
            T tChild = child as T;

            if( tChild != null ) {
                if( name == null ) {
                    result = (T)child;
                }
                else {
                    FrameworkElement feChild = child as FrameworkElement;

                    if( feChild != null && feChild.Name == name )
                        result = (T)child;
                }
            }

            if( result == null )
                result = FindChild<T>(child, name);
        }

        return result;
    }

    private void List1_LayoutUpdated(object sender, EventArgs e) {
        if( _indexToFocus != null ) {
            ItemContainerGenerator lvItems = List1.ItemContainerGenerator;
            ListViewItem lvitemToFocus = lvItems.ContainerFromIndex(_indexToFocus.Value) as ListViewItem;

            if( lvitemToFocus != null ) {
                lvitemToFocus.Focus();
                _indexToFocus = null;
            }
        }
    }  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T21:43:33.860

看起来你必须通过你的代码隐藏来做到这一点，并查看/修改`IsFocused`属性。[您可以在此博客文章](http://blogs.msdn.com/b/andrewarnottms/archive/2007/09/05/how-to-find-the-focused-listboxitem-in-wpf.aspx)中找到更多信息。

您还可以查看[这篇 SO 帖子](https://stackoverflow.com/questions/11745028/set-item-focus-in-listview-wpf)，它准确地解释了您的需求。

# html - 在 Internet Explorer 上，Flash 视频对象不会扩展到 100%

> ID：15045673
> 
> 赞同：0
> 
> 时间：2013-02-23T21:05:02.490
> 
> 标签：html, css, flash, internet-explorer, internet-explorer-8

我有一大堆要发布的 Flash 视频。我希望它们扩展到打开的 html 页面的 100%。它在 Chrome 上运行没问题，但在 Internet Explorer 8 中它只是以很小的尺寸显示。

```
<object type="application/x-shockwave-flash" src="../Resources/Videos/my-video.swf" MadCap:Param_quality="Best">
    <param name="Scale" value="showall" />
    <param name="AutoSize" value="true" />
    <param name="StretchToFit" value="true" />
    <param name="quality" value="best" />
    <param name="allowfullscreen" value="true" />
    <param name="autostart" value="true" />
    <param name="showendscreen" value="false" />
    <param name="allowscriptaccess" value="always" />
</object> 
```

在级联样式表中，我设置了 object { height: 100%; 宽度：100%；}

html超级简单。我通过着色背景验证了正文扩展为 html 页面的完整大小。

我可以更改大小的唯一方法是将高度/宽度标签专门设置为像素。是否有解决方法是 Internet Explorer 无法做到这一点？

谢谢！

# android - 如何在葫芦 android 中设置 SCRENSHOT_VIA_USB=true 。

> ID：15045675
> 
> 赞同：1
> 
> 时间：2013-02-23T21:05:10.887
> 
> 标签：android, calabash

我需要在模拟器中截取警报框的屏幕截图。我只是得到背景图像而不是弹出/警报框。

我不知道要设置这个 SCREENSHOT_VIA_USB=true 。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T06:33:52.723

```
 if ENV["SCREENSHOT_VIA_USB"] == "true"
    device_args = "-s #{@serial}" if @serial
    screenshot_cmd = "java -jar #{File.join(File.dirname(__FILE__), 'lib', 'screenShotTaker.jar')} #{path} #{device_args}"
    log screenshot_cmd
    raise "Could not take screenshot" unless system(screenshot_cmd)
  else
    begin
      res = http("/screenshot")
    rescue EOFError
      raise "Could not take screenshot. App is most likely not running anymore."
    end
    File.open(path, 'wb') do |f|
      f.write res
    end
  end 
```

SCREENSHOT_VIA_USB 是一个环境变量，试试：

```
 export SCREENSHOT_VIA_USB=true 
```

# jquery - 在 2 个文本 JQuery 之间切换

> ID：15045678
> 
> 赞同：0
> 
> 时间：2013-02-23T21:05:21.630
> 
> 标签：jquery, toggle

我经常在这里找到帮助，我做了我的研究，按照任何逻辑，这两种方法中的任何一种都应该有效，但它没有。当我单击 #1 或 #2 时，文本会在另一个元素中切换，但它不会更改自己的 html 或文本，我不介意。我想在点击元素 id="1" 和 id="2" 时更改 2 个文本，就像我在 id="rita" 和 id="filip" 中所做的一样。很可能它很简单，但是，我卡住了，在此先感谢:)

```
$(document).ready(function() {
$("#rita").hide();
$("#filip").hide();

$("#1").click(function()  {
    $("#rita").toggle(200);
    $("#1").toggle(     function(){
                        $("this").html("-Sveta Rita");},
                        function(){
                        $("this").html("+Sveta Rita");}
                   );

    });

$("#2").click(function()  {
    var originalValue = $(this).val();
    $(this).val(originalValue == '-Sveti Filip' ? '+Sveti Filip' : '-Sveti Filip');

    $("#filip").toggle(200);

    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:13:27.683

切换两个功能的`toggle()`版本已被弃用，但使用函数调用`text()`并切换返回的文本应该可以工作：

```
$(document).ready(function () {
    $("#rita").hide();
    $("#filip").hide();

    $("#a1").on('click', function () {
        $("#rita").toggle(200);
        $(this).text(function () {
            var current_value = $.trim($(this).text());
            var return_value  = "";

            if (current_value == '-Sveta Rita') {
                return_value = '+Sveta Rita';
            }else{
                return_value = '-Sveta Rita';
            }

            return return_value;
        });
    });

    $("#a2").on('click', function () {
        $("#filip").toggle(200);
        $(this).text(function () {
            return $.trim($(this).text()) == '-Sveti Filip' ? '+Sveti Filip' : '-Sveti Filip';
        });
    });
}); 
```

[**小提琴**](http://jsfiddle.net/K6saC/1/)

此外，ID 不应该只包含一个数字！

# android - 如何在应用计费中更改要在 android 上使用的测试帐户？

> ID：15045686
> 
> 赞同：4
> 
> 时间：2013-02-23T21:06:05.847
> 
> 标签：android, in-app-purchase, in-app-billing

我正在我的 android 应用上测试应用计费。我无法通过手机使用主帐户，因为那是我的开发者帐户，不能用于测试应用计费。所以我有几个不同的谷歌账户登录到我的手机。但是当尝试在我的应用程序上购买商品时，它会自动尝试使用列表中的第一个帐户购买。到目前为止，我唯一的解决方案是删除所有帐户，但我需要测试的帐户除外。或者在我的4.2平板上测试，让我换个用户。但这些都不适合我的手机。

作为最终用户，我有什么方法可以更改当前的活动帐户以在我的手机上进行应用计费测试？或者，在代码中，让我的应用程序的用户选择将用于应用程序计费的帐户？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-23T22:09:04.883

不可以。很遗憾，如果不重置手机，您将无法执行此操作。这只是您需要的不仅仅是日常使用的手机进行测试的原因之一。

唯一可以测试的帐户是设备的主帐户，即注册的*第一个*帐户。对于它的价值，根据我的经验，即使删除所有其他帐户也不起作用，我不得不恢复出厂设置。

[这里的第四步](http://developer.android.com/google/play/billing/billing_testing.html#billing-testing-real)是参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-28T18:44:25.243

网上有一些报道说，实际上您必须从 Play 中删除第一个帐户，然后再使用另一个帐户。请参阅[http://code.google.com/p/marketbilling/issues/detail?id=76](http://code.google.com/p/marketbilling/issues/detail?id=76)或[http://forums.androidcentral.com/market-help/204265-help-please-how-do-i-change -accounts-app-purchase.html](http://forums.androidcentral.com/market-help/204265-help-please-how-do-i-change-accounts-app-purchase.html)

# drag-and-drop - 带有适用于 iOS 的 Google Maps SDK 的可拖动标记

> ID：15045687
> 
> 赞同：15
> 
> 时间：2013-02-23T21:06:09.840
> 
> 标签：drag-and-drop, google-maps-markers, draggable, google-maps-sdk-ios

有人知道如何使用新的 iOS 版 Google Maps SDK 实现可拖动标记吗？API 还没有原生地提供它。功能请求已提交。

如果我能掌握 GMSMarker 的底层视图，我就可以拦截 Touch 事件。有人试过这个吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-08-22T17:46:45.703

截至今天，您不需要使用外部类，只需让您的标记“可拖动”

```
GMSMarker *myMarker = [[GMSMarker alloc] ...];
...
[myMarker setDraggable: YES];
// Use some kind of data to identify each marker, marker does not have 'tag' but 'userData' that is an 'id' type
[myMarker setUserData: markerId]; 
```

并实现各自的委托

```
@interface YourController: UIViewController<GMSMapViewDelegate> ... 
```

设置你的代表

```
GMSMapView *myMapView = [[GMSMapView alloc] ...];
...
myMapView.delegate = self; 
```

然后您可以处理每个标记事件，即：

```
-(void)mapView:(GMSMapView *)mapView didEndDraggingMarker:(GMSMarker *)marker{
    if ([marker.userData isEqualtoString:@"xMark"])
        NSLog(@"marker dragged to location: %f,%f", marker.position.latitude, marker.position.longitude);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T00:37:20.417

Hello I just implemented a drag and drop functionality for marker in the new GoogleMaps SDK for iOS. I published the code on github under the following link: [https://github.com/rweindl/google-maps-sdk-ios-drag-drop](https://github.com/rweindl/google-maps-sdk-ios-drag-drop)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-31T16:05:51.017

**斯威夫特 3.0**

甜的！我所要做的就是将此变量添加到我的标记中。然后，当仔细选择并按住标记片刻时，您可以拖动它。

```
marker.isDraggable = true 
```

我还没有实现代表来保存我的标记数据，但它应该是这样的。

```
extension MapVC : GMSMapViewDelegate {

    func mapView (_ mapView: GMSMapView, didEndDragging didEndDraggingMarker: GMSMarker) {

        print("Drag ended!")
        print("Update Marker data if stored somewhere.")

    }

} 
```

注意：有一段时间我试图取消动画屏幕和标记在选择后浮动和动画 UP。现在我看到这是一个“功能”，因为你的手指挡住了你的视线，如果它在拖动过程中不移动屏幕，你就看不清楚。（呃！）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T22:02:08.057

可拖动标记尚未添加到 SDK。请[提交功能请求](https://code.google.com/p/gmaps-api-issues/issues/entry?template=Maps%20SDK%20for%20iOS%20-%20Feature%20Request)。

# assembly - 基于寻址模式的汇编 x86

> ID：15045689
> 
> 赞同：0
> 
> 时间：2013-02-23T21:06:14.540
> 
> 标签：assembly, x86, addressing-mode

我正在上我的第一堂汇编编程课，我的导师希望我们了解基于寻址模式的工作原理。所以这是我写的一些代码来尝试这样做。唯一的问题是我不能理解它，因为我不断遇到分段错误。我评论了这些台词，试图展示我认为他们在做什么。有人可以纠正我的误解。

谢谢！

```
.text
.global _start
L0: .int 0x99999999
L1: .int 0x12345678
L2: .int 0x11111111
_start:
movl $L1, %eax   #Stores the address of what L1 "pionts to" in regester eax
movb $0, 2(%eax)  #Stores 0 in the location eax has in it +2 memory locations
              #So 0 should be stored in the same place as L1+2
checkHere:

movl $1,%eax
movl $0,%ebx
int $0x80 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:16:18.033

`.text`是只读的。将您的数据放入`.data`其中，它应该可以工作。

# xna - XNA 中的基本像素着色器：带有两个纹理的难以理解的错误

> ID：15045692
> 
> 赞同：1
> 
> 时间：2013-02-23T21:06:28.463
> 
> 标签：xna, shader

所以我是着色器的新手（使用 XNA），我遇到了一个我无法解释的超级奇怪的错误。考虑以下像素着色器函数：

```
float4 BasicTest(float2 coords: TEXCOORD0) : COLOR0  
{
float4 src=tex2D(s0, coords);
float4 dst=tex2D(s1, coords);
float4 color=src;
if (coords.x>0.5) color=dst;
return color;
} 
```

正如预期的那样，这将`src`在屏幕左侧和右侧显示纹理。`dst`但是，如果我只是使用：

```
float4 BasicTest(float2 coords: TEXCOORD0) : COLOR0  
{
float4 src=tex2D(s0, coords);
float4 dst=tex2D(s1, coords);
float4 color=dst;
return color;
} 
```

我`src`登上了整个屏幕！

显然，着色器根本拒绝显示`dst`，除非它处于某种表达式中（`color=src*0.5+dst*0.5`也可以正常工作）。我想我可以在这个问题上作弊（`if (coords.x>=0)`也许），但我真的很想知道是什么原因造成的！

如果您需要有关我的代码的更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T13:21:20.323

这确实是一个奇怪的错误。

如果您使用 ps 2.0 或更高版本：像这样注册您的示例：

```
sampler tex0: register(s1);
sampler tex1: register(s2); 
```

否则，对于较低像素着色器版本，请使用 t1、t2、t3...

# java - 使用“||” 在java中的switch语句中

> ID：15045695
> 
> 赞同：5
> 
> 时间：2013-02-23T21:06:34.430
> 
> 标签：java, switch-statement

我正在制作的 Java 程序的一部分询问用户他们的祖国。另一部分使用 switch 语句，我得到一个错误。错误是：`The operator || is undefined for the argument type(s) java.lang.String, java.lang.String`。这是发生问题的方法：

```
public static String getCountryMessage(String countryName) {
    switch (countryName) {
    case "USA":
        return "Hello, ";
    case "England" || "UK":
        return "Hallo, ";
    case "Spain":
        return "Hola, ";
    case "France":
        return "Bonjour, ";
    case "Germany":
        return "Guten tag, ";
    default:
        return "Hello, ";
    }
} 
```

如何使用 && 和 || 在Java switch 语句中？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-23T21:07:52.353

我认为您不能在 switch 语句中使用这样的条件。写这个会更简单，更直接：

```
case "England":
case "UK":
    return "Hallo"; 
```

这是一个[失败案例](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)- 如果您的字符串与 England 或 UK 匹配，它将返回`Hallo`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-23T21:08:04.623

使用跌落式案例：

```
case "England":
case "UK":
    return "Hallo, "; 
```

# javascript - 使用 Javascript 解析 XML 数据

> ID：15045698
> 
> 赞同：-1
> 
> 时间：2013-02-23T21:06:53.533
> 
> 标签：javascript, xml, file, parsing, xmlhttprequest

我在我的 chrome 控制台上收到此错误：

`Uncaught TypeError: Object #<Document> has no method 'getElementByTagName' Calendar.html:160 parseXML Calendar.html:160 XMLHttpRequestObject.onreadystatechange`

我的 XML 显示为空。

我是 XML 新手，所以我不确定这意味着什么。我已经验证了我的 XML，它只给了我一个关于 charset "text/xml" 的警告，但这不应该是导致它的原因。这是我所拥有的：

用于获取 XML 数据的按钮处理程序。

```
<input type="submit" onclick="getServerData('Event.XML','divData')" value="Serve Me" /> 
```

然后就到这里了。

```
function parseXML(xmlData){
var eventYear = xmlData.getElementsByTagName("year");
var eventMonth = xmlData.getElementsByTagName("month");
var eventDay = xmlData.getElementsByTagName("day");
var eventHour = xmlData.getElementsByTagName("hours");
var eventMinute = xmlData.getElementsByTagName("minutes");
var eventTitle = xmlData.getElementsByTagName("title");

}
function getServerData(dataIN,tagOUT)
{
    var dataOutput=document.getElementById(tagOUT)
    //alert(dataIN)
    //alert(tagOUT)
   if(XMLHttpRequestObject) 
   {
       XMLHttpRequestObject.open("GET", dataIN);
       XMLHttpRequestObject.onreadystatechange = function(){
            if (XMLHttpRequestObject.readyState == 4 && XMLHttpRequestObject.status == 200) 
            {
                var xmlResponse = XMLHttpRequestObject.responseXML;

                parseXML(xmlResponse);
                dataOutput.innerHTML = xmlResponse;

            }
        }
        XMLHttpRequestObject.send(null);
    }
} 
```

继承人 XML 示例：

```
<event>
      <date>
        <year>2013</year>
        <month>2</month>
        <day>4</day>
      </date>
      <time>
          <start>
            <hours>12</hours>
            <minutes>00</minutes>
          </start>
          <end>
            <hours>2</hours>
            <minutes>30</minutes>
          </end>
      </time>
    <title>Party</title>    
  </event> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T21:11:31.843

方法的名称是`getElementsByTagName`不用`getElementByTagName`注意的`s`。

# sql-server - SQL Server - 日志文件 - 零初始化

> ID：15045701
> 
> 赞同：1
> 
> 时间：2013-02-23T21:07:14.447
> 
> 标签：sql-server, sql-server-2008

当我们创建数据库时，日志文件是零初始化的。谁能帮我解决以下突出显示的数字（（**0x5000 到 0x6000**），**（0x6000 到 0x3c6000）**）？这些突出显示的数字代表什么……</p>

> 2013-02-23 12:42:36.850 spid51 清零 C:\Program Files\Microsoft SQL Server\MSSQL10.SQL2K8ENT\MSSQL\DATA\Instant_Initialization_log.ldf 从第 0 页到 393216（0x0 到 0xc0000000）
> 
> 2013-02-23 12:43:22.960 spid51 清零已在 C:\Program Files\Microsoft SQL Server\MSSQL10.SQL2K8ENT\MSSQL\DATA\Instant_Initialization_log.ldf 上完成
> 
> 2013-02-23 12:43:23.410 spid51 启动数据库“Instant_Initialization”。
> 
> 2013-02-23 12:43:23.440 spid51 **FixupLogTail**（进度）将 C:\Program Files\Microsoft SQL Server\MSSQL10.SQL2K8ENT\MSSQL\DATA\Instant_Initialization_log.ldf 从**0x5000 归零到 0x6000。**
> 
> 2013-02-23 12:43:23.440 spid51 清零 C:\Program Files\Microsoft SQL Server\MSSQL10.SQL2K8ENT\MSSQL\DATA\Instant_Initialization_log.ldf 从第 3 页到第 483 页**（0x6000 到 0x3c6000）**
> 
> 2013-02-23 12:43:23.460 spid51 清零已在 C:\Program Files\Microsoft SQL Server\MSSQL10.SQL2K8ENT\MSSQL\DATA\Instant_Initialization_log.ldf 上完成

一旦日志文件已经被零初始化，为什么在“FixupLogTail”时会再次发生零初始化过程？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:18:46.827

SQL Server 中的一页长度为 8192 字节。十六进制数字似乎指的是页面的字节位置。

例如：

```
 "from page 3 to 483 (0x6000 to 0x3c6000)"

 0x6000 = 24576
 24576 / 8192 = 3

 0x3c600 = 3956736
 3956736 / 8192 = 483 
```

# php - 解析错误：语法错误，第 5 行文件中出现意外 $end

> ID：15045704
> 
> 赞同：-3
> 
> 时间：2013-02-23T21:07:41.987
> 
> 标签：php

```
<?php
print_r($_FILES);
$new_image_name = "namethisimage.jpg";
move_uploaded_file($_FILES["file"]["tmp_name"], "C:\Program Files\wamp\www\workspace\DiaryApp\upload\".$new_image_name);
?> 
```

请帮我解决我是php新手的错误

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T21:09:24.443

转义 的`\`路径参数中的最后一个`move_uploaded_file()`。

```
"C:\Program Files\wamp\www\workspace\DiaryApp\upload\\" 
```

否则，您实际上是在转义结束字符串分隔符`"`并将其作为[文字双引号](http://php.net/manual/en/language.types.string.php)添加到字符串中。这意味着字符串在与以下变量连接之前不会终止`$new_image_name`，从而导致您指定的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T21:11:26.260

您需要将最后一行更改为：

```
move_uploaded_file($_FILES["file"]["tmp_name"], "C:\\Program Files\\wamp\\www\\workspace\\DiaryApp\\upload\\".$new_image_name); 
```

以便转义路径名中的所有反斜杠

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T21:11:39.037

在文件路径中使用正斜杠 /。这将适用于 Windows。此外，将这些路径写入变量。你真的不希望这些硬编码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-23T21:28:18.100

我可以看到您是新人（不是问题，每个人都必须学习；））

a`\`是 php 的通知，它将跟随一个特殊的字符，例如 \n \r \" \'

所以这就是为什么你必须“**逃避**”你的`\`.

```
<?php
print_r($_FILES);
$new_image_name = "namethisimage.jpg";
move_uploaded_file($_FILES["file"]["tmp_name"], "C:\\Program Files\\wamp\\www\\workspace\\DiaryApp\\upload\\".$new_image_name);
?> 
```

仅当您将字符串放在**“**（双引号）之间时。您也可以将它们放在**'**（单引号）之间，然后您不能转义它们。 **==> 不是真的，您必须始终转义`\`**

```
<?php
print_r($_FILES);
$new_image_name = "namethisimage.jpg";
move_uploaded_file($_FILES["file"]["tmp_name"], 'C:\\Program Files\\wamp\\www\\workspace\\DiaryApp\\upload\\'.$new_image_name);
?> 
```

**这对教育很有用：**

**所以我在这里你想：“ “**＆**'**之间有什么区别？”。

那么白色**“”**你可以在你的引号之间放置变量，例如

```
<?php
$str="string";
echo "this is a $str.";
?> 
```

输出将是：**这是一个字符串。**

使用**' '**，所有字符都按字面意思表示

```
<?php
$str="string";
echo 'this is a $str.';
?> 
```

输出将是：**这是一个 $str。**

# xcode - 在现有 XCode 安装之上安装 g++

> ID：15045706
> 
> 赞同：1
> 
> 时间：2013-02-23T21:07:48.297
> 
> 标签：xcode, g++

我想我做了一些愚蠢的事情……我使用 Mac OS X (10.7.5) 和 XCode 4.5。由于一些编程问题，我需要 g++ 4.4.6，但 XCode 只附带 4.2。所以我想“是的，我只是安装了所需的 g++ 版本”。于是我从gcc-page下载了对应的gcc版本，执行了configure-make-sudo make install。是的...但是使用 g++ --version 我只能得到旧版本 4.2...

现在我担心我“损坏”了我现有的版本 auf g++。我应该执行哪些步骤才能使一切恢复正常？

我希望你能帮助我。

最好的问候多米尼克

Ps：是的，我仍然需要 g++ 4.4.6 版本。有没有可能额外获得这个版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:34:11.300

您只需要添加`/usr/local/bin`到您的`$PATH`. `~/.profile`您可以通过编辑和添加使其永久化：

```
export PATH=/usr/local/bin:$PATH
export MANPATH=/usr/local/share/man:$MANPATH 
```

# iphone - 合并一个音频文件和两个视频文件 iphone sdk

> ID：15045711
> 
> 赞同：0
> 
> 时间：2013-02-23T21:08:08.813
> 
> 标签：iphone, xcode, audio, video, avmutablecomposition

我想知道如何将给定的音频文件与两个视频文件结合起来。在合并音频时我被卡住了，但是视频很好，这是我到目前为止所做的

```
- (IBAction)MergeAndSave:(id)sender{
    if(firstAsset !=nil && secondAsset!=nil){
        [ActivityView startAnimating];
        //Create AVMutableComposition Object.This object will hold our multiple AVMutableCompositionTrack.
        AVMutableComposition* mixComposition = [[AVMutableComposition alloc] init];

        //VIDEO TRACK
        AVMutableCompositionTrack *firstTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
        [firstTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, firstAsset.duration) ofTrack:[[firstAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:kCMTimeZero error:nil];

        AVMutableCompositionTrack *secondTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
        [secondTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, secondAsset.duration) ofTrack:[[secondAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:firstAsset.duration error:nil];

        //AUDIO TRACK
        if(audioAsset==nil){

            NSURL* musicFile = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                                       pathForResource:@"click"
                                                       ofType:@"caf"]];

            AVMutableCompositionTrack *click = [[AVMediaTypeAudio] initWithContentsOfURL:musicFile error:nil];
            [click insertTimeRange:CMTimeRangeMake(kCMTimeZero, CMTimeAdd(firstAsset.duration, secondAsset.duration))
                                ofTrack:[[audioAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] atTime:kCMTimeZero error:nil];

                   } 
```

如您所见，我的音频代码根本不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:07:21.473

将 audioAsset 的类型更改为 AVURLAsset 而不是 AVAsset ...希望它有效

如果不试试这个...[如何在 Xcode 中重叠音频文件并为 iPhone 组合？](https://stackoverflow.com/questions/12628554/how-can-i-overlap-audio-files-and-combine-for-iphone-in-xcode)

# visual-studio-2010 - Visual Basic 2010 在面板中嵌入面板

> ID：15045714
> 
> 赞同：0
> 
> 时间：2013-02-23T17:36:31.653
> 
> 标签：visual-studio-2010, panel

在 Visual Basic（使用代码）中，我创建了一个带有多个标签、文本框等的面板，这些标签需要在另一个面板中复制。创建重复面板的代码如下所示：

```
Public Class frmOrderEntry2

Dim a As Integer = 2
Dim x As Integer = 160

Public Sub frmOrderEntry2_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    '
    'This loads the module name and system date
    Dim today1 As String = Today.Date()
    txbDate.Text = today1
    txbDate.ForeColor = Color.White
    txbDate.BackColor = Color.DarkBlue
    txbDate.ReadOnly = True
    txbLineNumber.Text = 1

End Sub

Private Sub btnCreateNewLine_(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnCreateNewLine.Click

    Dim b As String = Short.Parse(a)

    'This creates the label "Part No."

    Dim lblPrtNo As New Label()
    lblPrtNo.Name = "lblPrtNo" & Convert.ToString(b)
    lblPrtNo.Text = "Part Number"
    lblPrtNo.ForeColor = Color.White
    lblPrtNo.Font = New Font("Sans Serif", 9)
    lblPrtNo.Font = New Font(lblPrtNo.Font, FontStyle.Regular)
    lblPrtNo.Location = New Point(13, 8)
    lblPrtNo.Size = New Size(77, 15)
    Me.Controls.Add(lblPrtNo)
    '
    'This generates the textbox for the user to enter the Part No.
    Dim txbPartNo As New TextBox()
    txbPartNo.Name = "txbPartNo" & Convert.ToString(b)
    txbPartNo.Text = ""
    txbPartNo.ForeColor = Color.Black
    txbPartNo.BackColor = Color.Yellow
    txbPartNo.Font = New Font("Sans Serif", 10)
    txbPartNo.Font = New Font(txbPartNo.Font, FontStyle.Bold)
    txbPartNo.Location = New Point(16, 26)
    txbPartNo.Size = New Size(263, 22)
    txbPartNo.Cursor = Cursors.Hand
    txbPartNo.AcceptsReturn = True
    txbPartNo.AcceptsTab = True
    txbPartNo.TabIndex = 10
    AddHandler txbPartNo.TextChanged, AddressOf txbPartNo_Textchanged
    Me.Controls.Add(txbPartNo)
    '
    ' This generates the button control to do a part number search
    Dim btnPartNoSearch As New Button()
    btnPartNoSearch.Name = "btnPartNoSearch"
    btnPartNoSearch.Text = "S"
    btnPartNoSearch.FlatStyle = FlatStyle.Popup
    btnPartNoSearch.FlatAppearance.BorderColor = Color.Black
    btnPartNoSearch.FlatAppearance.BorderSize = 2
    btnPartNoSearch.Cursor = Cursors.Hand
    btnPartNoSearch.TabIndex = 11
    btnPartNoSearch.ForeColor = Color.White
    btnPartNoSearch.BackColor = Color.Red
    btnPartNoSearch.Size = New Size(26, 23)
    btnPartNoSearch.Location = New Point(285, 26)
    btnPartNoSearch.Visible = True
    Me.Controls.Add(btnPartNoSearch)
'This creates the Panel and sets the labels and Textboxes to be displayed.
    Dim pnlOrderLine As New Panel()
    pnlOrderLine.Size = New Size(1577, 122)
    pnlOrderLine.Location = New Point(12, x)
    pnlOrderLine.BorderStyle = BorderStyle.Fixed3D
    pnlOrderLine.ForeColor = Color.White
    pnlOrderLine.Controls.Add(lblPrtNo)
    pnlOrderLine.Controls.Add(txbPartNo)
    pnlOrderLine.Controls.Add(btnPartNoSearch)

    a = a + 1
    x = x + 146

End Sub

Private Sub txbPartNo_Textchanged(ByVal sender As System.Object, ByVal e As EventArgs)
    Dim txbPartNo As TextBox = DirectCast(sender, TextBox)
    Me.Text = txbPartNo.Name & ": " & txbPartNo.Text
    txbPartNo.Show()

End Sub 
```

使用相同的思维过程来创建重复面板，我尝试使用以下代码将该面板放入主面板：

```
' This set the order line panel within the main panel
'Adding to main panel
pnlMainPanel.Controls.Add(pnlOrderLine)
pnlMainPanel.Visible = True
'Adding to Form i.e. me
Me.Controls.Add(pnlOrderLine) 
```

不用说，这是行不通的。线条面板已创建，但它们位于主面板后面。我需要它们在主面板中。

有人知道该怎么做吗？

在此先感谢您的帮助。

大学教师

# list - 列表的表达式结果

> ID：15045716
> 
> 赞同：0
> 
> 时间：2013-02-23T21:08:47.860
> 
> 标签：list, scheme

为什么不显示表达式的结果？

```
(define a '((+ 1 5)(- 5 1)))
(define (ex) (car a))
(write ex) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:28:56.330

你没有打电话给前任，试试：

```
(write (ex)) 
```

如果您想要评估 (+ 1 5) 的结果，您可能需要

```
(define a (list (+ 1 5) (- 5 1))) 
```

# r - 如何在函数内调用动态变量名？

> ID：15045718
> 
> 赞同：1
> 
> 时间：2013-02-23T21:09:02.180
> 
> 标签：r, regression

我需要将分类变量转换为多个二分（“虚拟”）变量以用于逻辑回归。说我的数据框是：

```
 tdf <- data.frame(first=sample(c("A", "B", "C", "D"), 100, replace=T),
                      lobe = sample(c("RUL", "RML", "RLL", "LUL", "LLL"), 100, replace=T),
                      continuous=sample(1:100, 100),
                      smoker = sample(c("never", "less20", "more20"), 100, replace=T)
                      ) 
```

我可以手动做

```
first. <- with (tdf,  factor (first))
dummies <-  model.matrix(~ first.)
dummies <- dummies[,-1]
tdf <- cbind(tdf, dummies) 
```

请注意，将因素称为“第一”很重要。（或更一般地，“变量”），因为虚拟变量会将此前缀继承到它们各自的名称中，以便以后更容易识别它们（'variable1.factor2'，'variable1.factor3'等）。

我的问题是：如何使用以编程方式分配变量名称的函数来做到这一点：

```
dummify <- function(df, vectorOfColIndices) {
  cn <- colnames(df) 
  for (i in vectorOfColIndices) {
    t. <- with (tdf,  factor (df[i])) # temporary factor
    assign (cn[i], t.) # give it the proper 'Variable.' name
    dummies <-  model.matrix(~ ????) # Stuck here: how do I call this newly created structure?
    ...
  }
} 
```

这样我以后就可以像这样转换数据框：

```
vd <- c(1,2,4) # columns that need to be converted into dummy vars
df <- dummify(df, vd) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T22:14:08.160

```
dummify <- function( df , col.indicies.to.add.dummies ) {

    for ( i in names( df )[ col.indicies.to.add.dummies ] ) {

        t. <- with( df , factor( df[ , i] ) )

        dummies <-  model.matrix( ~t. ) 

        colnames( dummies ) <- paste( i , levels( t. ) , sep = "." )

        dummies <- dummies[ , -1 ]

        df <- cbind( df , dummies )

    }

    df
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T23:00:38.623

同意 Dason 的评论，即在很多情况下您应该手动创建假人。而且，如果你这样做，安东尼的解决方案很好。我提出这个替代方案只是为了好玩:)

```
dummify <- function(df, vectorOfColIndices) {
  for (i in vectorOfColIndices) {
    var <- paste(names(df)[i], ".", sep="")
    assign(var, df[[i]])
    df <- cbind(df, model.matrix(reformulate(var))[, -1])
  }
  return(df)
} 
```

# vb.net - 使用 vb.net 2010 pro 更新 sql 数据库时出现日期错误

> ID：15045722
> 
> 赞同：0
> 
> 时间：2013-02-23T21:09:22.787
> 
> 标签：vb.net

尝试更新我的 sql 数据库时出现以下错误。

> SqlDateTime 溢出必须在 1/1/1753 12:00:00 AM 和 12-31-9999 11:59:59 PM 之间

在 SQL 中，我将 UP_DATE 字段设置为`datetime2(0)`

下面是我的班级设置。我删除了一些信息以缩短这个问题。

```
Public Class Riders
Private m_RIDER_NO As Integer
Private m_UP_DATE As Date

Public Property UP_DATE() As Date
    Get
        Return m_UP_DATE
    End Get
    Set(ByVal value As Date)
        m_UP_DATE = value
    End Set
End Property 
```

在我的更新功能代码中：

```
If IsDate(newRider.UP_DATE) Then
        updateCommand.Parameters.AddWithValue("@NewUP_DATE", newRider.UP_DATE)
 Else
        updateCommand.Parameters.AddWithValue("@NewUP_DATE", DBNull.Value)
End If 
```

现在，如果我将我的类更改为以下它可以正常工作，因为 STRING sql 更新除外。

```
Private m_UP_DATE As String

Public Property UP_DATE() As String
    Get
        Return m_UP_DATE 
    End Get
    Set(ByVal value As String)
        m_UP_DATE = value
    End Set
End Property 
```

1.  任何人都知道这是否可以例外，或者我以后会遇到问题。
2.  当我在 VB 中将 UP_DATE 字段设置为字符串并在 sql 中设置为 datetime2(0) 时，为什么要使用 sql 除了更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:18:36.100

使用 .NET 字符串作为日期是避免`Date`数据类型的默认日期问题的好方法。SQL Server 将接受它可以转换的任何数据类型，而不会导致数据丢失。将字符串转换为日期没有问题。

# cuda - 如何标记可从主机和设备调用的函数？

> ID：15045726
> 
> 赞同：1
> 
> 时间：2013-02-23T21:09:36.467
> 
> 标签：cuda

我有一堆常用函数，如`swap`,`min`等`max`。如何标记它们以便我可以从主机和设备调用它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T21:18:41.350

您`__host__` `__device__`在函数声明之前使用，例如：

```
__host__ __device__ int min(int A, int B) {return (A<B)?A:B;} 
```

这在[此处](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#function-type-qualifiers)的 C 编程指南中有记录。

# javascript - 将全局变量传递给函数 - 函数运行后全局变量未更新

> ID：15045728
> 
> 赞同：0
> 
> 时间：2013-02-23T21:09:38.497
> 
> 标签：javascript, variables, namespaces, global-variables

我的代码将数字递增或递减 1。问题是“testNum”，它是一个全局变量，应该反映递增或递减，但是当我在控制台中检查“testNum”的值时，它总是 20。我通过了“testNum” " 到我的函数并返回它。为什么它不反映增量？

小提琴：http: [//jsfiddle.net/FnUXw/1/](http://jsfiddle.net/FnUXw/1/)

```
<input type="button" id="btnDown" value="-">
<span id="amountDiv">amount div</span>
<input type="button" id="btnUp" value="+">

<script>
var testNum = 20;

amountDiv.innerHTML = testNum;

function makeButtonIncrement(button, upDown, displayDiv, variable) {

    function changeValue () {
        if (upDown == "up") {
            variable++;
        }

        if (upDown == "down") {
            variable--;
        }

        displayDiv.innerHTML = variable;
    }

    button.onclick = changeValue;

    return variable;
}

makeButtonIncrement(document.getElementById('btnDown'), "down", document.getElementById('amountDiv'), testNum);

makeButtonIncrement(document.getElementById('btnUp'), "up", document.getElementById('amountDiv'), testNum);
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T21:17:24.360

数字是按值传递的，而不是引用，所以你可以做你想做的事。按照您的代码结构，您需要像这样分配返回值：

```
testNum = makeButtonIncrement(document.getElementById('btnDown'), "down", document.getElementById('amountDiv'), testNum); 
```

只有数组和对象是通过引用传递的，因此它们可以作为参数传递并让函数修改原始变量。其他类型是按值传递的（例如，为参数制作了一个副本），因此您无法修改原始类型。

修改原始文件的解决方法是将其作为对象的属性传递。然后，因为对象是通过引用传递的，所以函数可以修改原来的属性值。

* * *

或者，由于您已经在使用全局变量，您可以直接修改全局变量，甚至不将其作为参数传递。它是作为参数传递的，它复制了它，所以你不能修改原始文件。一般来说，不推荐使用全局变量，但如果由于其他原因它已经是全局变量，则可以直接在函数中修改它，而无需将其作为参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:24:10.973

```
function makeButtonIncrement(button, upDown, displayDiv) {

    function changeValue () {
        if (upDown == "up") {
            testNum++;
        }

        if (upDown == "down") {
            testNum--;
        }

        displayDiv.innerHTML = testNum;
    }

    button.onclick = changeValue;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T21:18:07.347

您正在使用“variable++”和“variable--”，它们递增或递减本地范围的变量（函数范围的本地）。参数不是指向全局变量的指针，它是按值传递（而不是通过引用）。

最简单的修改是分别更改`variable++`和`variable--`更改`testNum++`和`testNum--`删除最终函数参数，因为它是不必要的。

# jquery - 如何在转发器中动态设置 jquery 对话框的标题？

> ID：15045729
> 
> 赞同：0
> 
> 时间：2013-02-23T21:09:42.557
> 
> 标签：jquery, asp.net, dotnetnuke

我试图弄清楚如何使用 .ascx 页面上的转发器从 dotnetnuke 模块设置 jquery 对话框的标题。

这是用户控件：

```
<asp:Label ID="lblitemName" runat="server" Text='<%#DataBinder.Eval(Container.DataItem,"ItemName").ToString() %>' /> 
```

这是jQuery：

```
jQuery(function ($)
{
$('#dialogs-Reader .alert').click(function (event)
{
    event.preventDefault();
    $.dnnAlert
     ({
         text: '<blockquote style="font-size:14px;">Just some text.',
         okText: 'Close',
         draggable: false,
         position: ["center", "center"],
         width: ($(window).width()-100),
         height: ($(window).height()-100)
     });
});
$('#lblitemName').change(function ()
{
    var newTitle = $("#lblitemName").val()
    $('#dialogs-Reader .alert').dialog('option', 'title', newTitle).click("open");

    return false;
}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:13:47.193

试试这个

> $("span.ui-dialog-title").text('我的新标题');

为了将来参考，您可以使用 jQuery 跳过 google。大多数时候，jQuery API 会回答你的问题。在这种情况下，Dialog API 页面。对于主库：[http ://api.jquery.com](http://api.jquery.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-24T02:29:51.143

```
$('#lblitemName') 
```

由于您在中继器中，因此当呈现到页面时，这将不再是标签的 ID，它看起来更像“dnn_ctr156562_repeaterid_lblitemName”，请尝试

```
$('id$=lblitemName') 
```

这会将您的更改事件添加到 ID 以“lblitemName”结尾的中继器中的所有标签

# node.js - Node.js (with socket.io 和 express) throw "events.js:71 throw arguments[1]; // 未处理的 'error' 事件"

> ID：15045730
> 
> 赞同：5
> 
> 时间：2013-02-23T21:09:42.610
> 
> 标签：node.js, express, socket.io

我正在使用 socket.io 运行 express（通过 nginx 代理），片刻之后（应用程序可以正常工作一段时间）控制台抛出这个：

```
events.js:71
        throw arguments[1]; // Unhandled 'error' event
                       ^
Error: socket hang up
    at createHangUpError (http.js:1360:15)
    at ServerResponse.OutgoingMessage._writeRaw (http.js:507:26)
    at ServerResponse.OutgoingMessage._send (http.js:476:15)
    at ServerResponse.OutgoingMessage.write (http.js:749:16)
    at XHRPolling.doWrite (/home/xyz/chat/node_modules/socket.io/lib/transports/xhr-polling.js:67:17)
    at XHRPolling.HTTPPolling.write (/home/xyz/chat/node_modules/socket.io/lib/transports/http-polling.js:132:8)
    at XHRPolling.Transport.onDispatch (/home/xyz/chat/node_modules/socket.io/lib/transport.js:222:10)
    at Socket.dispatch (/home/xyz/chat/node_modules/socket.io/lib/socket.js:230:38)
    at Socket.packet (/home/xyz/chat/node_modules/socket.io/lib/socket.js:214:10)
    at Socket.emit (/home/xyz/chat/node_modules/socket.io/lib/socket.js:368:15) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:27:45.740

如果您使用的是 node.js 版本 0.8.20，那么包括我在内的许多人都观察到了这个错误。

[https://github.com/LearnBoost/socket.io/issues/1160](https://github.com/LearnBoost/socket.io/issues/1160)

将 node.js 升级到 0.8.21 版本解决了这个问题。

# sql - 计数不同的值，包括 null

> ID：15045734
> 
> 赞同：0
> 
> 时间：2013-02-23T21:10:03.030
> 
> 标签：sql, distinct

我有这个问题，我无法解决：

表格“habitacions”记录了每个房间的客人必须被唤醒的时间（“hora”和“minut”列）。如果时间为空值，则不得唤醒客人。给出一个返回某人必须被唤醒的不同小时数（忽略列“minut”）的 SQL 语句。不愿被唤醒被认为是一个新的不同时刻。

```
CREATE TABLE vigilants(
nom VARCHAR(20) PRIMARY key,
edat integer);

CREATE TABLE rondes(
hora INTEGER,
planta INTEGER,
vigilant VARCHAR(20) REFERENCES vigilants,
PRIMARY KEY(hora, planta));

CREATE TABLE habitacions(
num INTEGER,
planta INTEGER,
places INTEGER,
hora INTEGER,
minut INTEGER,
PRIMARY KEY(num, planta),
FOREIGN KEY(hora, planta) REFERENCES rondes);` 
```

有这个限制：尽量减少解决查询所需的子查询数量。此外，不允许使用以下结构： - FROM 或 SELECT 中的 SELECT。您可以有子查询（SELECT 在 WHERE 或 HAVING 中） - 聚合函数的组合，例如 COUNT (COUNT...))、SUM (COUNT...)) 等。- 如果你能避免它，UNION。- 非标准功能（如 NVL） - CASE

示例：使用此插入：

```
INSERT INTO vigilants(nom, edat) VALUES ('Mulder', 32);
INSERT INTO vigilants(nom, edat) VALUES ('Scully', 30);

INSERT INTO rondes(hora, planta, vigilant) VALUES (7, 1, 'Mulder');
INSERT INTO rondes(hora, planta, vigilant) VALUES (8, 1, 'Mulder');
INSERT INTO rondes(hora, planta, vigilant) VALUES (7, 2, 'Mulder');

INSERT INTO habitacions(num, planta, places, hora, minut) VALUES (1, 1, 1, 7, 30);
INSERT INTO habitacions(num, planta, places, hora, minut) VALUES (5, 1, 1, 7, 30);
INSERT INTO habitacions(num, planta, places, hora, minut) VALUES (2, 1, 1, 8, 30);
INSERT INTO habitacions(num, planta, places, hora, minut) VALUES (3, 1, 1, null, null);
INSERT INTO habitacions(num, planta, places, hora, minut) VALUES (4, 1, 1, null, null);
INSERT INTO habitacions(num, planta, places, hora, minut) VALUES (1, 2, 1, null, null); 
```

结果是 3 :)（7,8 和 null）

很多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T21:35:59.717

提示：您可以将`coalesce()`函数与`count(distinct)`.

因此，允许执行以下操作：

```
select count(distinct coalesce(hour, -1)) 
```

它将 NULL 值替换为 -1，它不是有效值。这应该具有您正在寻找的效果。

# rest - 在移交给泽西岛之前检查请求实体

> ID：15045737
> 
> 赞同：0
> 
> 时间：2013-02-23T21:10:15.380
> 
> 标签：rest, jersey

我正在使用 Jersey 构建一个 RESTful 服务来替换现有的遗留服务。

旧式请求格式要求身份验证凭据在 POST 请求的正文中传递。这使得在将请求传递给 Jersey 之前验证请求（使用 Spring 安全性）变得很尴尬，因为必须读取 POST 主体以提取身份验证凭据，然后在移交给 Jersey 之前重新打包。

这意味着，对于每个 POST 请求，必须读取请求流，重新序列化，然后由 Jersey 再次读取`MessageBodyReader`。我不喜欢这个，因为它效率低下。理想情况下，我想做的是将传入的消息转换为规范的消息格式，对其进行身份验证，然后将该规范格式传递给 Jersey。JAX-RS 似乎不支持这种事情。

有没有人建议避免重复阅读请求正文的方法？任何允许我使用自定义、规范消息格式而不是 in 的 RESTful 框架`InputStream`？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T09:16:51.013

这里有几个选项。

最简单的方法是阅读消息正文并使用它在过滤器中检查您的凭据。但是，如果您这样做，您将需要设置一个`InputStream`数据，以便您可以将其传递给可能存在的任何下游过滤器（以及最终的消息正文阅读器）。听起来这就是你一直在走的路，我建议你坚持下去。您不需要重新序列化，因为您拥有原始输入字符串并且可以将其传递给它`InputStream`而不对其进行转换，如果输入格式正确，您也可以避免完全序列化。

或者，您可以在检查凭据的同时将所有内容转换为某种描述的规范对象，并将其存储为可以由您的资源访问的请求变量。问题在于你正在与泽西的做事方式作斗争，所以我不推荐它。你的资源方法在外人看来会有点奇怪，你的过滤器需要知道你的模型的所有信息，所以设计有点颠倒。

# c# - 部分无模式文档覆盖无模式值

> ID：15045738
> 
> 赞同：1
> 
> 时间：2013-02-23T21:10:16.090
> 
> 标签：c#, mongodb, overwrite, schemaless

我在 C# 中有一个类，例如：

```
public class MyEntry
{
    public ObjectId Id { get; set; }
    public string SimpleHash { get; set; }
    public string GroupIdentifier { get; set; }
} 
```

现在将其保存在 mongo 中可以正常工作。现在我想在这个文档中添加一些子文档。子文档的类如下所示：

```
public class Detail
{
    public DateTime CreateDate { get; set; }
    public string DetailHash { get; set; }
} 
```

我使用 Push-command 将这些详细信息添加到根文档中，如下所示：

```
collection.Update(query, Update.PushWrapped("Details", detail)); 
```

到目前为止，这很好用，我有可能阅读`MyEntry`没有附加的所有内容`Details`，我可以阅读所有/第一个/最后一个/`Details`我想要的任何一个。但是我现在的问题是，如果我在 an 中更改某些`MyEntry`内容并保存它，则`Details`-Array 将被完全删除。
有没有办法在更新时单独留下类中未提及的字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:51:44.343

您需要像对`Detail`. 如果您只是使用整个 C# 类的本机序列化到 MongoDB 集合中，您将覆盖整个文档，如您所见。

```
public class MyEntry
{
    public ObjectId Id { get; set; }
    public string SimpleHash { get; set; }
    public string GroupIdentifier { get; set; }
}

var update = Update<MyEntry>.Combine(
    Update<MyEntry>.Set(m => SimpleHash, "TheHash!"),
    Update<MyEntry>.Set(m => GroupIdentifier, "MyGroup")); 
```

然后，`Update`使用查询将文档放入集合中，传递`update`上面的构建器对象。（当然，您可以根据需要更改属性）。与尝试合并对象相比，我更喜欢这种方法，因为这意味着我不需要担心部分加载的 C# 对象或意外地从 MongoDB 文档中删除属性，因为它们没有设置。

我希望您可能需要`[BsonIgnoreExtraElements]`在反序列化期间将该属性添加到您的 MyEntry 类，否则驱动程序在遇到意外的额外数据时可能会抛出错误。

# jquery - 我需要一些帮助来居中并内联文本和图像（Jquery）

> ID：15045744
> 
> 赞同：2
> 
> 时间：2013-02-23T21:10:36.603
> 
> 标签：jquery, css, html, jquery-mobile

我需要将下面的文本和图像放在同一行，居中。我在 jquery 中使用 data-role="header" 函数，但似乎无法将所有内容集中在一行中。CSS 是 Jquery 标准

```
 <html>
        <head>
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, initial-scale=1">
            <title>jQuery</title>
                <link rel="stylesheet" href="themes/scavenger-hunt.min.css" />
            <link rel="stylesheet" href="Publish/jquery-mobile/jquery.mobile.structure-1.0.min.css" />
            <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
            <script src="http://code.jquery.com/mobile/1.3.0-rc.1/jquery.mobile-1.3.0-rc.1.min.js"></script>
        <body> 

<div data-role="page" id="home">
    <div data-role="header">
    <h1>Scavenger</h1><img src="images/logosh.png" alt="logo" width="50" height="50" align="absmiddle"><h1>Hunt</h1> 
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:22:34.643

我强烈建议不要将标题分成两个单独`<h1>`的元素，因为这是不必要的，也不太正确：P

尝试使用此 HTML 代码：

```
<h1>
    Scavenger
    <img src="http://placehold.it/50x50" alt="logo" width="50" height="50" align="absmiddle">
    Hunt
</h1> 
```

这个CSS：

```
h1 {
    text-align: center;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:16:06.160

把你的h1放在第一位，然后把你的图片放在html中，css应该是这样的

```
 #home > div h1:first-child {float:left}
#home > div h1 {float:right}
img {display:block; margin-left:auto; margin-right:auto;} 
```

这是一个小提琴[http://jsfiddle.net/tbd5f/1/](http://jsfiddle.net/tbd5f/1/)

# c - 如何在 C Makefile 中使用外部库和头文件？

> ID：15045748
> 
> 赞同：5
> 
> 时间：2013-02-23T21:10:55.800
> 
> 标签：c, makefile, static-libraries, external

我在 directory1 中有一个头文件 myheader.h 和一个静态库 libmylib.a 文件。在 directory2 中，我正在编写一个使用它们的程序。假设我在 directory2 中有 main.c，它使用了 myheader.h 和 libmylib.a。如何创建 Makefile 来编译和链接它们？

现在，在我的 main.c 中，我添加了

```
#include "../directory1/myheader.h" 
```

这是我现在的Makefile：

```
CC = gcc

INCLUDES = -I

CFLAGS = -g -Wall $(INCLUDES)

main: main.o ../directory1/libmylib.a
    $(CC) main.o ../directory1/libmylib.a -o main

main.o: main.c ../directory1/myheader.h
    $(CC) $(CFLAGS) -c main.c 
```

我收到以下警告：

```
gcc -g -Wall -I -c main.c
/home/me/directory2/main.c:72: undefined reference to `foo'
collect2: ld returned 1 exit status
make: *** [main.o] Error 1 
```

其中 foo 是库中的函数之一。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T22:06:18.513

好的。解决它。

我将其删除`#include "../directory1/myheader.h"`并替换为`#include "myheader.h"`.

然后在Makefile中，我使用了：

```
CC = gcc

INCLUDES = -I../directory1

CFLAGS = -g -Wall $(INCLUDES)

LDFLAGS = -L../directory1

main: main.o ../directory1/libmylib.a
    $(CC) main.o $(LDFLAGS) -lmylib -o main

main.o: main.c ../directory1/myheader.h
    $(CC) $(CFLAGS) -c main.c 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T21:16:31.887

使用`-lmylib`会有问题。对于非静态库，您需要摆弄变量 LD_LIBRARY_PATH; 请参阅[为什么每次运行应用程序时都必须使用导出定义 LD_LIBRARY_PATH？](https://stackoverflow.com/q/695530/318716). 您可以通过添加`-L ../directory1`. 但最简单的就是替换`-lmylib`为`../directory1/libmylib.a`.

例如：

目录 1/mylib.c

```
#include "../directory1/myheader.h"
void foo(void) {} 
```

目录 1/Makefile

```
libmylib.a: mylib.o
    ar r $@ $? 
```

目录 1/main.c：

```
#include "../directory1/myheader.h"
int main(void) {
   foo();
   return 0;
} 
```

目录 1/Makefile

```
main: main.o ../directory1/libmylib.a
   gcc main.o ../directory1/libmylib.a -o main 
```

# java - 如何正确发布 Android MediaPlayer

> ID：15045750
> 
> 赞同：17
> 
> 时间：2013-02-23T21:11:07.420
> 
> 标签：java, android

我正在尝试向我的 android 应用程序添加一个按钮，当点击该按钮时它会播放 MP3。我已经让它工作了，但没有办法释放 mediaPlayer 对象 - 因此即使在我离开活动后它也会继续播放。如果我在我的 react() 方法（按下按钮时调用的方法）之外初始化 MediaPlayer 对象，它会导致应用程序在活动打开时强制关闭。但是如果我在 react() 方法中初始化 MediaPlayer，我就不能在 onQuit() 方法中使用 mplayer.release。我在这里没有看到什么？

```
 public void react(View view) {
    MediaPlayer mediaPlayer = MediaPlayer.create(ToBeOrNot.this, R.raw.achord);
    mediaPlayer.start();
}
protected void onStop(){
    mediaPlayer.release();
    mediaPlayer = null;
} 
```

由于明显的原因不起作用并且

```
MediaPlayer mediaPlayer = MediaPlayer.create(ToBeOrNot.this, R.raw.achord);
public void react(View view) {
            mediaPlayer.start(); 
}
protected void onStop(){
    mediaPlayer.release();
    mediaPlayer = null;
} 
```

导致它强制关闭。

**更新：** 这是整个 java 类。

```
public class ToBeOrNot extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_to_be_or_not);

        }
MediaPlayer mediaPlayer;

public void react(View view) {
        mediaPlayer = MediaPlayer.create(ToBeOrNot.this, R.raw.achord);
        mediaPlayer.start(); 
}
protected void onStop(){
    mediaPlayer.release();
    mediaPlayer = null;
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    //getMenuInflater().inflate(R.menu.activity_to_be_or_not, menu);
    // Locate MenuItem with ShareActionProvider
   return true;
}

} 
```

我认为它的作用是相对不言自明的。当被调用时，它会显示一些文本和一个按钮，当点击该按钮时会开始播放录音。当有人点击后退按钮时，它应该回到上一个活动并停止录制。谢谢你帮助我！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-23T22:00:46.097

您不能在所有方法之外初始化 mediaplayer 对象。如果这样做，它会尝试使用尚未创建的上下文。您需要将其声明为类变量（在方法之外），并在内部对其进行初始化：

```
MediaPlayer mediaPlayer;

public void react(View view) {
    mediaPlayer = MediaPlayer.create(ToBeOrNot.this, R.raw.achord);
    mediaPlayer.start(); 
}

protected void onStop(){
    mediaPlayer.release();
    mediaPlayer = null;
} 
```

此外，我建议阅读[Java 中的变量范围](http://www.itcsolutions.eu/2011/02/10/tutorial-java-scjp-10-variable-scope/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-19T16:37:23.490

根据 Google [docs](https://developer.android.com/reference/android/media/MediaPlayer#setOnCompletionListener(android.media.MediaPlayer.OnCompletionListener))`MediaPlayer` ，您可以在下面的示例中实现侦听器。

完成后，您可以自动释放和重置。

```
MediaPlayer mp = MediaPlayer.create(context, R.raw.sound_one);
mp.setOnCompletionListener(new OnCompletionListener() {
    @Override
    public void onCompletion(MediaPlayer mp) {
        mp.reset();
        mp.release();
        mp=null;
    }
});
mp.start(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-25T10:59:38.707

这对我很有效。

```
public class MainActivity extends AppCompatActivity {

    MediaPlayer mediaPlayer;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mediaPlayer = MediaPlayer.create(this, R.raw.beep_warning);

        final CheckBox checkBox = (CheckBox) findViewById(R.id.checkBox);
        checkBox.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                if (checkBox.isChecked()) {
                    mediaPlayer.start();
                    mediaPlayer.setLooping(true);
                }
                else{
                    mediaPlayer.pause();
                }
                }

        });

    }
    @Override
    protected void onStop() {
        super.onStop();
        mediaPlayer.release();
    } 
```

# java - 在hadoop中查找不同列的最有效方法是什么

> ID：15045753
> 
> 赞同：0
> 
> 时间：2013-02-23T21:11:14.833
> 
> 标签：java, hadoop, mapreduce

我有一个大小为 1TB 的文件。我们需要找到文件中 4 列的不同值。例如，如果我们有 A、B、C、D、E、F 等列。其中，我们需要在 A 列中找到所有不同的值，并在 HDFS 中创建一个文件。B、C 和 D 也是如此。

注意：我们只需要对 4 列执行此操作，其余列则不需要。该文件共有 300 列。

我们需要为此编写 Map Reduce。什么是解决这个问题的有效方法。感谢你的帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T07:02:23.593

让映射器为您需要唯一值的每一列输出一条记录。因此，在您的示例中，地图将（使用单个输入记录）输出 4 条记录，键为 A、B、C、D。

然后，您可以在减速器中处理所有值。

根据您需要的详细信息，您可能希望使用如下所示的键：“A：A 列的值”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:46:50.567

基本上你需要过滤掉重复的记录，这可以从 mapper、combiner 和 reducer 开始的几个步骤中完成。你也可以使用java Set。Mapper 可以输出 key='Column A' Value='complete record'。将键存储在 Set 中，如果 set 包含键不发出记录。在组合器中也可以这样做。可能你不需要减速器。还需要锻炼，因此 Set 不会通过清除某些特定大小来创建内存不足错误。

# java - 更改 Jabel 中的文本

> ID：15045759
> 
> 赞同：-1
> 
> 时间：2013-02-23T21:11:49.710
> 
> 标签：java, jlabel

我正在尝试向项目添加一些额外内容以了解 gui 接口。我正在用java构建一个警报面板，我只想在各种激活状态下更改文本，即从武装到武装，从解除武装到解除武装。

我尝试使用该`Thread.sleep`方法，但这只会延迟我的文本出现在屏幕上的时间。
你能告诉我需要抬头的方向吗？以下是我正在处理的部分，但如果需要，我有完整的代码可用。

```
public void actionPerformed(ActionEvent e){
    else if(e.getSource() == disarm){
    dPanel.setBackground(Color.GREEN);
    adPanel.setBackground(Color.GREEN);
    screen.setText("Disarming");
    try {
      Thread.sleep(5000);
    } catch (InterruptedException e1) {                                         
       e1.printStackTrace();
       }
 screen.setText("Disarmed"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T21:13:32.467

`Thread.sleep` *永远*不要在 Swing 中使用，它会阻止`EDT`— 改用[Swing 计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:14:06.257

问题是使用 Thread.sleep() 你阻塞了 GUI 线程，你**永远**不会这样做。使用计时器。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-23T21:20:37.250

我不确定你想做什么。如果您确实需要一个计时器，请使用一个： [Swing Timer example](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)

也许您可以尝试以其他方式解释您的问题，以使其更易于理解。

# asp.net - DBContext.Entry 有什么作用？

> ID：15045763
> 
> 赞同：37
> 
> 时间：2013-02-23T21:12:33.127
> 
> 标签：asp.net, asp.net-mvc, entity-framework, dbcontext

```
[HttpPost]
public ActionResult Edit(Movie movie)
{
    if (ModelState.IsValid)
    {
        db.Entry(movie).State = EntityState.Modified;
        db.SaveChanges();
        return RedirectToAction("Index");
    }
    return View(movie);
} 
```

这个动作接收一个电影模型并在数据库中更新它。
但我不知道怎么做。
该`movie`对象未附加到数据库，那么实体框架如何知道数据库中的哪一行应该被更新？

我确信 Entry 方法与它有关，但我真的不知道这个方法是做什么的。我读到它提供了信息，但我无法理解如何仅通过更改`State`条目的 来附加并由`DBContext`.

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-23T21:15:15.397

它只是将实体附加到 dataContext。否则，您将不得不使用主键搜索实体，然后编辑该值并保存它。

如果您有一个您知道数据库中已经存在但可能已对其进行更改的实体，那么您可以告诉上下文附加该实体并将其状态设置为已修改。 [http://msdn.microsoft.com/en-US/data/jj592676](http://msdn.microsoft.com/en-US/data/jj592676)

# build - `make clean` 是否应该删除子模块和第三方包？

> ID：15045765
> 
> 赞同：0
> 
> 时间：2013-02-23T21:12:56.290
> 
> 标签：build, makefile

我对Makefiles相当陌生。我不确定`make clean`. 以下哪项是正确的？

*   **`make clean`应该删除从存储库中的其他文件构建的所有文件。**例如：

    ```
    clean:
        @rm -rf dist 
    ```

*   **`make clean`应该删除从存储库中的其他文件构建的所有文件，*或者由`make setup`*.** 例如：

    ```
    clean:
        @rm -rf dist
        @rm -rf node_modules # remove npm packages installed by `setup` 
    ```

从另一个文件构建一个文件通常不需要 Internet 连接，但通常需要获取第三方依赖项。这表明`make clean`不应删除由`make setup`. 但是，如果一个人一直在修改第三方依赖项的来源，那么也许将这些更改吹走正是人们期望`make clean`做的事情。

换句话说，应该`make clean`“撤消” `make`，还是应该撤消`make setup && make`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:57:17.203

一般来说，这取决于你做什么`make clean` 。您引用的规则只是约定。

但是，调用的原因基本上是`make clean`：

*   完成所有操作后，尽可能多地释放磁盘空间。
*   允许重新开始，以防万一出现问题（例如，时间戳）并且增量构建不再起作用。

关于第一种情况，根据“一切都完成”的语义，您的两种选择都是合理的。但是，我更愿意`make uninstall`重做（一切）安装。

# javascript - 联系表单显示成功消息但不发送电子邮件

> ID：15045770
> 
> 赞同：0
> 
> 时间：2013-02-23T21:13:11.310
> 
> 标签：javascript, email, sendmail, php

我为我的网站的联系页面创建了以下 php 脚本。该脚本的问题在于，当用户填写并单击提交按钮时，它会显示成功消息但未发送电子邮件。
有人可以检查并告诉我哪里出错了。

```
<?php 
error_reporting(E_ALL ^ E_NOTICE); // hide all basic notices from PHP

//If the form is submitted
if(isset($_POST['submitted'])) {

// require a name from user
if(trim($_POST['contactName']) === '') {
    $nameError =  'Forgot your name!'; 
    $hasError = true;
} else {
    $name = trim($_POST['contactName']);
}

// need valid email
if(trim($_POST['email']) === '')  {
    $emailError = 'Forgot to enter in your e-mail address.';
    $hasError = true;
} else if (!preg_match("/^[[:alnum:]][a-z0-9_.-]*@[a-z0-9.-]+\.[a-z]{2,4}$/i", trim($_POST['email']))) {
    $emailError = 'You entered an invalid email address.';
    $hasError = true;
} else {
    $email = trim($_POST['email']);
}

// we need at least some content
if(trim($_POST['comments']) === '') {
    $commentError = 'You forgot to enter a message!';
    $hasError = true;
} else {
    if(function_exists('stripslashes')) {
        $comments = stripslashes(trim($_POST['comments']));
    } else {
        $comments = trim($_POST['comments']);
    }
}

// upon no failure errors let's email now!
if(!isset($hasError)) {

    $emailTo = 'info@example.com';
    $subject = 'Submitted message from '.$name;
    $sendCopy = trim($_POST['sendCopy']);
    $body = "Name: $name \n\nEmail: $email \n\nComments: $comments";
    $headers = 'From: ' .' <'.$emailTo.'>' . "\r\n" . 'Reply-To: ' . $email;

    mail($emailTo, $subject, $body, $headers);

    // set our boolean completion value to TRUE
    $emailSent = true;
}
}
?>

<!-- @begin contact -->
<div id="contact" class="section">
    <div class="container content">

        <?php if(isset($emailSent) && $emailSent == true) { ?>
            <p class="info">Your email was sent. Sir!</p>
        <?php } else { ?>

            <div id="contact-form">
                <?php if(isset($hasError) || isset($captchaError) ) { ?>
                    <p class="alert">Error submitting the form</p>
                <?php } ?>

                <form id="contact-us" action="contacts.php" method="post">
            <div class="columns two contact_label alpha">
                Your Name 
            </div>
            <div class="columns five contact_input omega">
                <input type="text" name="contactName" id="contactName" value="<?php if(isset($_POST['contactName'])) echo $_POST['contactName'];?>" class="txt requiredField" placeholder="Name:" />
                        <?php if($nameError != '') { ?>
                            <br /><span class="error"><?php echo $nameError;?></span> 
                        <?php } ?>
                    </div>

                    <div class="clear"><!-- ClearFix --></div>
            <div class="columns two contact_label alpha">
                E-Mail Address
            </div>
            <div class="columns five contact_input omega">
                <input type="text" name="email" id="email" value="<?php if(isset($_POST['email']))  echo $_POST['email'];?>" class="txt requiredField email" placeholder="Email:" />
                        <?php if($emailError != '') { ?>
                            <br /><span class="error"><?php echo $emailError;?></span>
                        <?php } ?>
                    </div>
            <div class="clear"><!-- ClearFix --></div>
                <div class="columns two contact_label alpha">
                Your Message
            </div>
            <div class="columns five contact_input omega">
                <textarea name="comments" id="commentsText" cols="45" rows="5" class="txtarea requiredField" placeholder="Message:"><?php if(isset($_POST['comments'])) { if(function_exists('stripslashes')) { echo stripslashes($_POST['comments']); } else { echo $_POST['comments']; } } ?></textarea>
                        <?php if($commentError != '') { ?>
                            <br /><span class="error"><?php echo $commentError;?></span> 
                        <?php } ?>
                    </div>
            <div class="clear"><!-- ClearFix --></div>

                <div class="columns five contact_button alpha omega offset-by-two">
                <input type="submit" name="submitted" id="submitted" value="Send Email" />
            </div>
            <div class="clear"><!-- ClearFix --></div> 

                </form>         

             </div>
        <?php } ?>
    </div>
</div><!-- End #contact --> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T21:16:28.860

您需要删除该行：

```
$emailSent = true; 
```

并将邮件发送行更改为

`$emailSent = mail($emailTo, $subject, $body, $headers);`

如果电子邮件被接受发送，这会将 $emailSent 设置为 true。[PHP 邮件](http://php.net/manual/en/function.mail.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T21:17:09.623

代替

```
mail($emailTo, $subject, $body, $headers);

    // set our boolean completion value to TRUE
    $emailSent = true; 
```

做

`$emailSent = mail($emailTo, $subject, $body, $headers);`

否则您将对结果进行硬编码，如果您不知道，为什么要说电子邮件已发送？你是什​​么，某种骗子？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T21:20:16.610

我想，您应该尝试更改以下内容：

```
if(!isset($hasError)) {
    ...
} 
```

健康）状况。你应该输入：

```
if(!$hasError)
{
    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T20:46:46.807

确保您的 php 邮件 smtp 标头已正确配置。下面是对我有用的示例代码。复制并尝试一下。

如果下面的代码对您不起作用，请尝试安装 Dropifi Contact Widget (www.dropifi.com)。他们有一个非常直观的联系表格，您可以对其进行自定义以满足您的需要。

```
require_once("class.phpmailer.php");
require_once("class.smtp.php");

  class Email extends PHPMailer
  {       
      public function __construct(){
          parent::__construct(true);
          $this->IsSMTP();
          $this->SMTPAuth = true;
          $this->SMTPSecure = "ssl";
          $this->Host = "smtp.gmail.com";
          $this->Port = 465;
          $this->Username = "someemail@gmail.com";
          $this->Password = "your password";
          $this->from = "no-reply@localhost.com";
          $this->FromName = "Webmaster";
          $this->WordWrap = 50;
          $this->IsHTML(true);
          $this->AddReplyTo("no-reply@localhost.com", "Webmaster");
          $this->Mailer = "smtp";
      }

      public function setReceiver($to){ 
          $this->AddAddress($to,"Administrator");
      }

      public function setSubject($subject){ 
          $this->Subject = $subject;
      }

      public function setMessage($param){

          $this->AltBody = "your alternative message";

          $message = "your main  message";
          $this->MsgHTML($message);
      }

      public function sendmail(){
          try{
              $flag = $this->Send();
              return $flag;
          }catch(phpmailerException $e){
              return $e->getMessage(); 
          }
      }
  } 
```

# objective-c - 如果删除了关系，则删除子实体

> ID：15045775
> 
> 赞同：1
> 
> 时间：2013-02-23T21:13:36.523
> 
> 标签：objective-c, core-data

存在包含`OneToOne`关系`Library -- Boss`：

```
Library --(Cascade)--> Boss
Boss    --(No Action)--> Library 
```

用例：更换老板。替换意味着从数据库中删除旧值，在数据库中保存新值并设置关系的新值。如果我设置一个新老板并保存上下文，则插入新老板，将关系设置为新老板，但不会删除旧老板，它只会使库密钥无效。我将如何从数据库中删除旧老板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:02:42.593

所以你将库和老板之间的删除规则设置为“级联”，对吗？在这种情况下，只有当没有其他实体引用老板时，老板才会被删除。引用计数的排序。您确定您的数据库中没有当前引用老板实体的记录/实体吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:55:41.057

您可以为 Boss 子类化 NSManagedObject，并覆盖 -(void)willSave，并在必要时删除该方法中的对象。

作为旁注，在这种情况下，您应该使用 Nullify 而不是 No action。没有行动会引起麻烦，而且很少有用。请参阅[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdRelationships.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdRelationships.html)

# matlab - matlab：为什么循环只返回最后一个元素

> ID：15045776
> 
> 赞同：-2
> 
> 时间：2013-02-23T21:13:41.567
> 
> 标签：matlab

MatLab：此代码检索某个页面的单词并将它们存储到 wrd 中，并将 DB 中的行存储到 kwres 中，然后将它们一起比较，并返回 like 的单词。

为什么这段代码只返回数组的最后一个元素？

```
%connection to DB
con=database('Dic','','');
%retrieve kw_table rows (id,keywords)
kwres=fetch(con,'select * from kw_table');

[FileName,PathName]= uigetfile('*.txt');
dat= [PathName FileName];
txt=fileread(dat);
txt(~ismember(txt,['A':'Z' 'a':'z']))=' ';
wrd=strread(txt,'%s','delimiter',' ');

k=1;
for i=1:length(wrd)
s=wrd{i};
for j=1:length(kwres)
    if strcmpi(s,kwres(j,2))
        ids{k}=kwres(j,1);
        set(handles.listbox2,'String',s)
        k=k+1;
    end
end 
```

结尾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:25:09.387

在：

```
set(handles.listbox2,'String',s) 
```

您指定要显示的字符串`s`，因此最终显示找到的最后一个（实际上所有都显示，但随着`for`循环的进行相互覆盖）。您应该创建一个列表并动态添加与该列表匹配的每个字符串。而不是`s`，列表应该在`set`命令的参数中。

请在[Matlab Central](http://www.mathworks.com/matlabcentral/newsreader/view_thread/306787)查看详细信息。

# ms-access - 不能在报表中使用一对多的关系来显示信息。（应该很简单）

> ID：15045781
> 
> 赞同：1
> 
> 时间：2013-02-23T21:14:14.527
> 
> 标签：ms-access, ms-access-2010

我有 2 个表，它们以一对多的关系连接。

我在bikeSold 表中有一个BikeID (FK) 和另一个名为BikeInfo (PK) 的表。但是，当我去创建报告时，我无法显示“BikeName”而不是（FK/PK）！

（这是表格的图像，但请注意，您看不到许多标志，但右键单击时确实显示它是）

[关系表](http://i.stack.imgur.com/5ggzm.png)

当我生成报告时，我得到了需要显示 BikeName 的 PK，我尝试了 Dlookup、SQL 和 Queries，但它们似乎都不起作用。（诚​​然，自从我使用数据库以来已经有一段时间了）

我认为这将是一件简单的事情！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:31:01.553

查询应该非常适合您，例如：

```
SELECT a.BikeName, a.Cost, b.DateSold
FROM BikeSold b
INNER JOIN BikeInfo a
ON b.BikeID = a.ID 
```

然后，该报告可以基于保存的查询，其中包含您需要的所有数据。

# c++ - 跨平台获取可用字体列表的方法？

> ID：15045784
> 
> 赞同：2
> 
> 时间：2013-02-23T21:14:57.490
> 
> 标签：c++, linux, windows, freetype

如何获取可用字体列表？

如果我不必依赖巨大的东西，我会更好。

到目前为止，我的解决方案是列出`/usr/share/fonts`linux 和`C:\Windows\Fonts`windows 上的目录。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T21:33:01.367

不，这不是正确的方法。然而，问题在于实际上没有正确的方法，没有像 freetype 这样的标准化或编写自己的库，其中包含许多针对不同操作系统的后端。

更清楚地说：大多数操作系统都有位图字体、轮廓字体、不同的字体编码、出现的各种其他字体格式，但没有得到很好的支持，或者通过一些额外的插件支持，非字母字体（想想 Wingdings 、棋子等）、彩色字体、TeX 字体、postscript 字体、3D 字体等。

此外，您甚至可能没有列出它们的标准方法。例如，大多数操作系统按名称和大小列出字体，但 X Window 系统传统上按许多列标题列出字体，包括它们的粗细、它们是无衬线、固定/可变间距、斜体还是斜体等.

此外，您还会遇到诸如用户字体与系统范围字体，甚至网络字体、字体服务器以及现在的网络字体之类的问题。

简而言之，字体很复杂。正是出于这样的原因，才有了像 freetype 这样的库。我建议只使用一个。

但是，如果您确实想要一个更快、更 hackish 的解决方案，那么列出这些目录就是一个开始。您可能应该使用您提到的两种可能的后端，为 Linux 与 Windows 选择默认后端，但也许可以列出 /usr/share/X11/fonts 或通过 defoma 列出字体的可能性，例如。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T21:32:48.647

嗯......我会使用 OpenGL 和默认（保证）字体，可以在[这里找到一个列表](http://www.docjar.org/docs/api/gl4java/utils/glut/GLUTEnum.html)

或者我会看看这些链接：

1.  [获取字体目录的平台独立方式？](https://stackoverflow.com/questions/3954223/platform-independent-way-to-get-font-directory)
2.  [多平台环境中的字体](https://stackoverflow.com/questions/2678998/fonts-in-a-multi-platform-environment)
3.  [OpenGL字体教程](http://content.gpwiki.org/index.php/OpenGL:Tutorials:Font_System)

或者你可以只使用一个图形库（SDL、OpenGL）和一个 BITMAP，其中包含字体......并将其用于文本！:)

祝你好运，我希望你能找到你要找的东西！

# entity-framework - 为什么我不能将所有单独的存储库方法放在通用基础存储库中

> ID：15045788
> 
> 赞同：0
> 
> 时间：2013-02-23T21:15:17.037
> 
> 标签：entity-framework, repository, repository-pattern

我想从独家技术的角度重新表述这个问题。

通常，通用基础存储库类包含 Add、Delete、Update、GetById 和 GetAll 方法。

现在我很想在这个基类中放置更多方法，比如 EntityExists 等......当我需要更具体的东西时，我必须深入研究 IQueryable.GetAll() 方法，我可以将谓词组合/附加到 GetAll 方法. 这应该可以节省我从技术方面看到的大量类和接口。

但是当我采用这种方法时，对我的程序有什么负面影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T06:44:31.600

基类不是瑞士军刀或实用类。SOLID 原则也适用于他们。

对于存储库，您可以采用两种方式。第一个是使用规范模式，您对所有实体使用相同的存储库类。相反，您要做的是创建可以在查询时组合或单独使用的小型规范类。例子：

```
repository.Query(new FindLockedUsers(new Paging(1, 50)); 
```

其中`FindLockedUsers`和`Paging`是两个规范（内部类是`AND`:ed）。实现是一种装饰器模式。

另一种方法是为每个实体（根聚合）使用特定的存储库。这些按实体定制的 get 方法，例如：

```
repository.FindLockedUsers(int pageNumber, int pageSize); 
```

我个人更喜欢后者，因为它使合同更容易遵循（即我只需要阅读存储库接口/类即可了解如何使用它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T22:19:03.703

*通用基础存储库类应该只实现对所有*可能扩展它的存储库有意义的方法。如果您有不会违反任何 SOLID 原则的此类方法的示例，我会说随时添加到此基类中。

如果没有更具体的示例（代码），我认为我无法提供比这更多的指导。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T07:16:06.670

如果您遵循 OOP 原则，我会说您可以随心所欲。通常我有一个接口来声明我需要我的 EfDb 类来实现的所有内容。这样，我的控制器只能与我的界面对话，而不能直接访问我的 EfBd 类。请参见下面的示例：

**界面**

```
public interface IDataSource
{
    //Person Entities
    IQueryable<Person> Persons{ get; }
    void SavePerson(Person person);        
} 
```

**EfDb 类**

```
 //Person
    public DbSet<Person> Persons { get; set; }
    IQueryable<Person> IDataSource.Persons
    {
        get { return Persons; }
    }

    public void SavePerson(Person person)
    {
        using (var context = new EFootballDb())
        {
            if (person.PersonId == 0)
            {
                context.Persons.Add(player);
            }
            else if (person.PersonId > 0)
            {
                 var currentPerson = context.Persons
                    .Single(p => p.PersonId == person.PersonId);

                context.Entry(currentPerson ).CurrentValues.SetValues(person);                    
            }
            context.SaveChanges();
        }
    } 
```

**然后在您的控制器中，您只需像这样调用您的界面，并可能实现您的创建操作，如下所示。**

```
 public class PersonController : Controller
 {

    private readonly IDataSource _dataSource;

    public PersonController(IDataSource dataSource)
    {
        _dataSource = dataSource;
    }

    [HttpGet]
    public ActionResult Create()
    {
        return View();
    }

    [HttpPost]
    public ActionResult Create(Person model)
    {
       try
        {
            if (ModelState.IsValid)
            {                
                _dataSource.SavePerson(model);
                return RedirectToAction("Index", "Home");
            }
        }
        catch (Exception)
        {
            ModelState.AddModelError("", "Unable to save changes. Try again, and if the problem persists, see your system administrator.");
        }
        return View(model);
    } 
```

我希望这会有所帮助，很抱歉长时间的演示，但只要您遵循某种软件设计原则，例如面向对象编程（OOP），一切都应该没问题。这一切都取决于您对其他类隐藏您的实现的程度。就像在我的演示中一样，控制器类无法访问我的 EfDb 类。

# php - Wordpress 更改帖子缩略图属性

> ID：15045789
> 
> 赞同：0
> 
> 时间：2013-02-23T21:15:17.973
> 
> 标签：php, wordpress

我正在尝试更改帖子缩略图的属性以支持[延迟加载](http://www.appelsiini.net/projects/lazyload)。这需要我添加一个类`lazy`，将源更改为占位符图像，并将图像源放入`data-original`属性中。

我已经完成了研究并参考了[文档](http://codex.wordpress.org/Function_Reference/the_post_thumbnail)，但仍然遇到问题。

这是我尝试使用的代码：

```
<?php
    $tempimg = get_bloginfo('template_url') . "/img/grey.gif";
    $default_attr = array(
        'src' => $tempimg,
        'data-original' => $src,
        'class' => "lazy attachment-$size",
    );
    the_post_thumbnail('project-thumbnail', $default_attr);
?> 
```

你会认为它会起作用，但是一旦我使用了这些属性，`$src`and`$size`变量就不起作用了。他们只是空白。有什么我想念的吗？

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:40:01.737

> 有什么我想念的吗？

是的。您还没有设置`$src`或`$size`在该代码块中设置。它们是空白的，因为未设置变量。事实上，它们是空白的——可以说是空白。如果你要设置这两个值——像这样——

```
$size = 123;
$tempimg = $src = get_bloginfo('template_url') . "/img/grey.gif";
$default_attr = array(
    'src' => $tempimg,
    'data-original' => $src,
    'class' => "lazy attachment-$size",
);
the_post_thumbnail('project-thumbnail', $default_attr); 
```

...它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T06:28:29.203

无需更改所有属性。

如果你只是想给它上课懒惰。

只需将类属性设置为惰性，例如：

```
the_post_thumbnail(array(200,200), array('class' => 'lazy')); 
```

希望这对其他人有帮助

# c# - 使用通用字典和/或使用 IDictionary 排序

> ID：15045790
> 
> 赞同：2
> 
> 时间：2013-02-23T21:15:26.960
> 
> 标签：c#, generics, sorting, dictionary, idictionary

我有一本字典，其中的值是在运行时确定的。我可以将它创建为一个`IDictionary`并添加到它，但是我无法排序。有没有办法将其创建为 a`Dictionary`以便我可以访问`OrderBy`，或者是否有另一种方法将其排序为 a `IDictionary`？

```
void func (PropertyDescriptor prop)
{
  //Create dynamic dictionary
  Type GenericTypeDictionary = typeof(Dictionary<,>);
  Type SpecificTypeDictionary = GenericTypeDictionary.MakeGenericType(typeof(T), prop.PropertyType);
  var genericDictionary = Activator.CreateInstance(SpecificTypeDictionary) as IDictionary ;

  //Add some items to it
  //....

  //Sort items (this line doesn't compile)
  genericDictionary = genericDictionary.OrderBy(x => x.Value).ToDictionary(x => x.Key, x => x.Value);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T21:32:40.820

忽略您尝试做的事情可能没有意义的观点，您可以从`IDictionary`to创建一个适配器`IEnumerable<DictionaryEntry>`：

```
IEnumerable<DictionaryEntry> EnumerateEntries(IDictionary d)
{
    foreach (DictionaryEntry de in d) 
    {
        yield return de;
    }
}

// ...

genericDictionary = EnumerateEntries(genericDictionary).OrderBy(…).ToDictionary(…); 
```

（出于某种原因，我没有进一步调查，使用`genericDictionary.Cast<DictionaryEntry>()`而不是辅助方法对我不起作用，但这可能是 Mono 的怪癖。）

# mysql - Ruby on Rails 中跨 4 个模型的关系

> ID：15045799
> 
> 赞同：0
> 
> 时间：2013-02-23T21:16:14.960
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, foreign-keys, active-relation

我正在尝试在我的 RoR 模型中建立一些高级关系。

到目前为止，我所做的是项目和任务——项目有任务，用户有项目。

我现在希望“注册”到项目的用户现在可以“注册”到该项目中的任务。

我目前的课程简介：

```
class AdminUser < ActiveRecord::Base
 has_and_belongs_to_many :projects
 has_and_belongs_to_many  :tasks
 has_many :admin_users_projects

[...]

class AdminUsersProject < ActiveRecord::Base

  belongs_to :admin_user
  has_and_belongs_to_many :project
  has_many :tasks

[...]

class Project < ActiveRecord::Base

  has_many :tasks
  has_and_belongs_to_many :admin_users
  has_and_belongs_to_many :admin_users_projects

[...]

class Task < ActiveRecord::Base

  belongs_to :project
  has_and_belongs_to_many :admin_users
  belongs_to :admin_users_project

[...] 
```

架构如下所示：

```
 create_table "admin_users", :force => true do |t|
    t.string   "first_name",      :limit => 25
    t.string   "last_name",       :limit => 50
    t.string   "email",           :limit => 100, :default => "", :null => false
    t.string   "hashed_password", :limit => 40
    t.datetime "created_at",                                     :null => false
    t.datetime "updated_at",                                     :null => false
    t.string   "username",        :limit => 25
    t.string   "salt",            :limit => 40
  end

  add_index "admin_users", ["username"], :name => "index_admin_users_on_username"

  create_table "admin_users_projects", :force => true do |t|
    t.integer "admin_user_id"
    t.integer "project_id"
  end

  add_index "admin_users_projects", ["admin_user_id", "project_id"], :name =>     "index_admin_users_projects_on_admin_user_id_and_project_id"

  create_table "projects", :force => true do |t|
    t.string   "name"
    t.integer  "position"
    t.boolean  "visible",    :default => false
    t.datetime "created_at",                    :null => false
    t.datetime "updated_at",                    :null => false
  end

  create_table "tasks", :force => true do |t|
    t.integer  "project_id"
    t.string   "permalink"
    t.integer  "position"
    t.boolean  "visible"
    t.datetime "created_at",    :null => false
    t.datetime "updated_at",    :null => false
    t.string   "name"
    t.integer  "admin_user_id"
    t.integer  "progress"
  end

  add_index "tasks", ["permalink"], :name => "index_tasks_on_permalink"
  add_index "tasks", ["project_id"], :name => "index_tasks_on_project_id"

end 
```

我有一个显示项目的视图，然后是他们的任务子集的视图我还有一个显示用户项目的视图，但现在我希望它显示用户的任务子集。

我对“admin_user_projects”的简要看法如下：

```
 <% @admin_users_projects.each do |admin_users_projects| %>
    <tr>
        <td><%= admin_users_projects.admin_user_id %></td>
        <td><%= admin_users_projects.admin_user.username  %></td>
        <td><%= admin_users_projects.project_id %></td>
        <td><%= admin_users_projects.project.name  %></td>
    </tr>
    <% end %> 
```

这显示了用户 ID、用户名、项目 ID 和项目名称。我现在想添加一行，显示用户为该项目“注册”了多少任务。我努力了

```
 <td><%= admin_users_projects.tasks.size  %></td> 
```

但是得到以下信息：

```
Mysql2::Error: Unknown column 'tasks.admin_users_project_id' in 'where clause': SELECT COUNT(*) FROM `tasks`  WHERE `tasks`.`admin_users_project_id` = 1 
```

有谁知道如何让这些关系有效运作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:50:20.937

我的建议是这样的：

```
class AdminUser < ActiveRecord::Base
  has_and_belongs_to_many :projects
  has_many :assigned_tasks
  has_many :tasks, through: :assigned_tasks
end

class AssignedTask < ActiveRecord::Base
  belongs_to :user
  belongs_to :task

  validate :user_assigned_to_project

  private

  def user_assigned_to_project
    unless user.projects.include? task.project
      errors.add(:project, "is not valid")
    end
  end
end

class Project < ActiveRecord::Base
  has_and_belongs_to_many :admin_users
  has_many :tasks
end

class Task < ActiveRecord::Base
  has_many :assigned_tasks
  has_many :users, through: :assigned_tasks
  belongs_to :project
end

class GiantMigration < ActiveRecord::Migration
  create_table :admin_users do |t|
    # whatever
  end
  create_table :projects do |t|
    # whatever
  end
  create_table :assigned_tasks do |t|
    t.integer :admin_user_id, null: false
    t.integer :task_id, null: false
  end
  create_table :tasks do |t|
    # whatever
    t.integer :project_id
  end
  create_table :admin_users_projects, id: false do |t|
    t.integer :admin_user_id, null: false
    t.integer :project_id, null: false
  end
end 
```

一些一般注意事项：

*   您必须选择是使用纯连接表 (HABTM) 还是连接模型 ( `has_many :through`)。现在你正在混合两者。
*   不要`force: true`在迁移中默认使用。
*   坚持 Rails 的约定：（`has_and_belongs_to_many :projects`你使用了项目，单数）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:26:48.140

你没有关系

```
class AdminUsersProject < ActiveRecord::Base
  has_many :tasks 
```

除非任务表有一个名为 admin_users_project_id 的外键。

我怀疑您对 AdminUsersProjects 链接记录没有太多任务。

相反，我认为您想要管理员用户的任务或项目的任务。

在你弄清楚你想要什么之前，没有人可以帮助你。一旦你清楚自己想要什么，你或许就能自己找出答案。

# c++ - 为什么引用总是无效的？

> ID：15045813
> 
> 赞同：-3
> 
> 时间：2013-02-23T21:17:10.683
> 
> 标签：c++, stl, reference, iterator

所以我看到了[这个问题](https://stackoverflow.com/questions/6438086/iterator-invalidation-rules)，它基本上说引用和迭代器一起失效。

我明白为什么在某些情况下迭代器无效，但**为什么引用无效**？

从实际的角度来看，我不明白为什么需要这样做。

这只是一个设计决定还是有一些实际原因？

**编辑：**澄清一下，据我了解底层结构，它只是指向需要重新分配的数据的指针（数据（以及对它的引用）可以保持不变）。对？

一些测试代码：

```
#include <vector>
#include <iostream>
using namespace std;

int main()
{
    vector<string> yourVect;
    yourVect.push_back("def");
    vector<string>::iterator iter = yourVect.begin();
    const string& ref = *iter;
    yourVect.insert(yourVect.begin(), "abc");
    cout << ref << endl; // !! --- doesn't work - why ?? --- !!
    cout << *iter << endl; // obviously doesn't work
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T21:20:52.680

如果您在向量的开头插入一个字符串，则所有数据都必须向前移动一个位置，并且如果容量`vector`耗尽，`vector`则必须重新分配。

因此，最好的情况是引用现在引用不同的数据，最坏的情况是引用无效的内存位置：如果向量重新分配，则分配一个新的内存块，旧数据复制¹到新块中，旧块被解除分配；由于所有旧引用都指向旧块内的内存位置，因此它们都将无效。

保证涉及“最坏情况”，这就是为什么不保证在`insert`操作后引用仍然有效的原因。或者，换一种说法，向量中的插入*可能*会使迭代器和引用无效。

另外，我不明白为什么您认为引用和迭代器之间的这种行为存在很大差异 -`vector`迭代器通常只是指向被引用`vector`位置的指针（通常隐藏在实现定义的类中），所以它或多或少是与参考相同。

* * *

1.  C++11 中的 IIRC 实际上是“移动”的（如`std::move`）；这不会改变旧引用将继续指向然后释放的内存的事实。

# android - Android setText（）覆盖自己？

> ID：15045821
> 
> 赞同：1
> 
> 时间：2013-02-23T21:17:43.960
> 
> 标签：android, printing, settext

我对 Android 编程有点陌生，我想要的只是将一些文本设置到屏幕上。此功能应该适用于您打开和关闭屏幕时。开机时，屏幕上会打印开机时的时间戳和 1。此外，当您关闭它时，屏幕上会打印一个关闭时间的时间戳和一个 0。我在简单地“附加”到前一个时间戳时遇到了一些麻烦，这意味着我想连续记录 Android 屏幕何时关闭和屏幕何时打开。它不断地覆盖自己。这是我的尝试：

```
protected void onResume(){ //this is for when the screen is turned back on
    Time now = new Time();
    if(!ScreenReceiver.screenOn){
        now.setToNow();
        String lsNow = now.format("%m-%d-%Y %I:%M:%S");
        LinearLayout lView = new LinearLayout(this);
        myText = new TextView(this);
        myText.setText(lsNow + ", 1");
        lView.addView(myText);
        setContentView(lView);
... //more code here
}

 protected void onPause(){
    Time now = new Time();
    if(ScreenReceiver.screenOn){
        now.setToNow();

        String lsNow = now.format("%m-%d-%Y %I:%M:%S");
        LinearLayout lView = new LinearLayout(this);
        myText = new TextView(this);
        myText.setText(lsNow + ", 0");
        lView.addView(myText);
        setContentView(lView);
...//more code here
} 
```

如果有人知道解决方案，那就太好了！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:21:23.890

1.  您正在创建一个新布局，然后为该布局设置内容视图，这很有意义，不仅 TextView 将被覆盖，而且其他所有内容都将被覆盖，因为*整个*布局都被替换了。而是继续使用一个 TextView，一个布局。
2.  TextView 中有一个[`append()`](http://developer.android.com/reference/android/widget/TextView.html#append%28java.lang.CharSequence%29)用于追加的方法。

我也会做一个共享的方法：

```
public void logTime (boolean screen)
{
  Time now = new Time();
  now.setToNow();

  String lsNow = now.format("%m-%d-%Y %I:%M:%S");
  TextView myText = (TextView) findViewById (R.id.myText);
  myText.append (" " + lsNow + (screen ? "0" : "1"));
} 
```

然后调用 with`ScreenReceiver.screenOn`作为参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:22:04.780

您的代码当前正在恢复和暂停时重置活动的整个布局。当您打电话时，`setContentView`您实际上是在用您创建的新布局交换旧布局。在资源文件夹中创建一个布局，然后在活动中`onCreate`调用该`setContentView`方法。之后，使用`FindviewById<TextView>`获取对`TextView`布局中的引用。您需要传递您在布局文件中声明的元素的 ID。

为了将文本附加到控件，您必须使用当前文本，然后向其中添加新信息：`textView.setText(textView.getText() + "new text")`这样旧数据就不会被覆盖。

# regex - 在 Tcl RegExp 上需要帮助

> ID：15045826
> 
> 赞同：0
> 
> 时间：2013-02-23T21:18:23.117
> 
> 标签：regex, tcl

我想匹配如下所示的模式，它是一个环境变量，后跟一个目录名称。我想完全匹配这两个词。如果匹配，则返回 1。

```
$::env(WORK)/bill/ 
```

*如何在 TCL 中使用regexp*做到这一点？
我是新手，所以任何帮助表示赞赏。谢谢。

我已经尝试过了，它可以工作：

```
if {![file isdirectory "${::env(WORK)}/bill/"]} {} else { return 1} 
```

使用 RE: regexp {^(bill)$} 作为第二个单词。第一个词，因为它是环境变量，所以我被困在那里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:56:37.163

让我们看看我是否理解你的问题。你有一个 Tcl 字符串并且你想匹配一个模式`$::env(something)/somethingelse/`来识别`something`和`somethingelse`部分。

如果是这样，那么您想使用类似

```
set str {$::env(WORK)/bill/}
if {[regexp {\$::env\((.+)\)/(.+)/} $string -> envName dirName]} {
    puts $envName
    puts $dirName
} 
```

你应该有

```
WORK
bill 
```

打印在您的终端上。

在`regexp`命令中，模式被包含在其中`{}`以避免 Tcl 替换。它以转义的美元开头，`\$`因为美元将匹配行尾。然后是文字`::env`。然后转义括号`\(...\)`以匹配数组语法。在它们中，我们有一个捕获原子`(.+)`，用于匹配任何重复一次或多次的字符，并带有报告。然后跟随文字斜线`/.../`和第二个捕获原子`(.+)`以匹配目录部分。

`->`是一个变量的名称，它将包含与模式匹配的所有内容（`$str`您可以通过使用 打印它来查看它`puts ${->}`），但在这种情况下不需要它，因此我们使用奇怪的名称。

然后是两个 var 名称，`envName`和`dirName`，它们将分别报告第一个和第二个原子的匹配`(.+)`（不包括括号）。

**编辑**对于非贪婪匹配，正如 Donal Fellows 所指出的，您可以使用`(.+?)`而不是`(.+)`，我同意这将是一个不错的添加。

我希望这能满足您的需求。

# java - Spring LinkedCaseInsensitiveMap 不返回带括号的键的值？

> ID：15045831
> 
> 赞同：0
> 
> 时间：2013-02-23T21:18:48.390
> 
> 标签：java, spring, map

我只是想确认这是一个错误还是预期的行为。我正在使用如下所示的代码段：

```
String sql = "select distinct wp.APP, max(wp.FUNCTIONALITY_DESCRIPTION) from test_table wp where wp.user = ?";
List<Map<String, Object>> rows = jdbcTemplate.queryForList(sql, new Object[] {user});
for (Map<String, Object> row : rows) {
    userSoftware.add(new Software((String) row.get("APP"), (String)row.get("MAX(WP.FUNCTIONALITY_DESCRIPTION)")));
} 
```

我注意到我总是将 row.get("MAX(WP.FUNCTIONALITY_DESCRIPTION)") 的值设为空。我尝试调试代码，即使我可以在 Eclipse 调试器中看到 Map 中的值，但 get 函数调用总是返回 null。

然后我尝试了这个代码段：

```
String sql = "select distinct wp.APP, max(wp.FUNCTIONALITY_DESCRIPTION) func_desc from test_table wp where wp.user = ?";
List<Map<String, Object>> rows = jdbcTemplate.queryForList(sql, new Object[] {user});
for (Map<String, Object> row : rows) {
    userSoftware.add(new Software((String) row.get("APP"), (String)row.get("func_desc")));
} 
```

我可以得到价值。请原谅这段代码中的任何语法错误，我不得不丢弃敏感信息，并且可能已经破坏了一些东西。但是，是的，代码确实编译了，这个示例代码是我问题的最佳代表。这里的软件是一个简单的类，有两个 String 成员，appName 和 description 由构造函数设置。我只能看到两个键之间的区别是括号。它应该不区分大小写，但我确实尝试了各种组合。

# asp.net-web-api - 使用 WebAPI 可以将 SAML 令牌切换到 SWT 吗？

> ID：15045837
> 
> 赞同：0
> 
> 时间：2013-02-23T21:19:25.543
> 
> 标签：asp.net-web-api, simple-web-token

我正在使用 ASP.NET WebAPI 开发 API。身份验证由第 3 方完成，我们会收到一个 SAML 令牌以进行身份​​验证（我们提供了要检查的证书）。

但是，我不想继续验证 SAML 令牌，因为它非常大，所以我想发出一个简单的 Web 令牌或类似的东西。我在网上看到的所有示例都有第三方，或者某种身份服务器发出 SWT。

有什么理由我不能自己发行令牌吗？我正在考虑使用 wif.swt，或者可能只是自己滚动。为了保证令牌的安全，我需要考虑什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T22:49:37.220

这就是我解释你的提议的方式......你希望第 3 方向你发送一个 SAML 令牌，一旦验证，你就想发出一个较小的 SWT 作为会话令牌，第 3 方随后将使用它来与你的服务交谈（大概直到某种到期日）？

我的第一点是先看一下 JSON Web Token [JWT](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-json-web-token-06)，它的大小应该比 SWT 更轻，最重要的是规范明确解释了应该如何保护令牌（HMAC 256 签名或加密）。

有许多库可以让您使用这些库：

*   [智威汤逊](http://nuget.org/packages/JWT/)
*   [微软自己的](https://www.nuget.org/packages/System.IdentityModel.Tokens.Jwt/)
*   [思维结构](https://github.com/identitymodel/Thinktecture.IdentityModel)

如果顶部提到的方法是您所追求的，那么这里有一个[使用](https://github.com/thinktecture/Thinktecture.IdentityModel.45/blob/master/Samples/Web%20API%20Security/Common/Security/WebApiConfig.cs)Thinktecture 库获取 SAML 令牌并返回 JWT 会话的示例。

# c++ - 行列式中的分段错误（核心转储）

> ID：15045850
> 
> 赞同：1
> 
> 时间：2013-02-23T21:20:19.543
> 
> 标签：c++, arrays, matrix, double

当我设置时，我在以下代码中收到错误段错误（核心转储）：

```
int et=pow(2,10) 
```

或者更多。事实上，我正在计算 n*n 矩阵行列式。对于`n=pow(2,10)`或更多代码给出错误。我真的不知道该怎么办

这是我的代码：

```
#include <cfloat>
#include <iostream>
#include <sstream>
#include <stdio.h>
#include <vector>
#include <cmath>
#include <stdlib.h>
#include <time.h>
#include <iomanip>
using namespace std;

int dimention = 3;
int et = pow(2,9); 
```

在上面当我放`et= pow(2, 10)`或更多时，它给出了错误。

```
int N = 1 ;
vector<                 
vector<                 
vector<double> > > r;   

//random function
double unifRand(){
   double X=((double)rand()/(double)RAND_MAX);  // creating random between 0 1
   return X;
}
void seed(){
    srand(time(0));  //initializing random
}
void initialize(){
    seed();
    r.clear();
    for (int n=0; n<N; n++){
        vector < vector<double> > exyz;
        for (int e=0; e<et; e++){
            vector < double > xyz;
            for (int d=0; d<dimention; d++)
                 xyz.push_back(unifRand()-0.5);
            exyz.push_back(xyz);
        }
        r.push_back(exyz);
    }

}

  void Det(vector<double>& r_et ){
       vector< vector<double> > Psi;
        for(int i=0; i<et; i++){
                vector<double> Psie;
                for (int e=0; e<et; e++){
                        double Ps= -2*r_et[e]+(r_et[e]-r_et[i]);
                        double Pse = exp(Ps);  
                        Psie.push_back(Pse);
                }
                Psi.push_back(Psie);
        }

        /* Transform matrix into upper triangular */
        int counti = 0;
        double temp=0;
        for(int i = 0; i < et - 1 ; i++){
        /* Elementary Row Operation I */
                if(Psi[i][i] == 0.0){
                        for(int k = i; k < et; k++){
                                if(Psi[k][i] != 0.0){
                                        for(int j = 0; j < et; j++){
                                                temp = Psi[i][j];
                                                Psi[i][j] = Psi[k][j];
                                               Psi[k][j] = temp;
                                       }
                                       k = et;
                               }
                       }   
               counti++;
               }
       /* Elementary Row Operation III */
               if(Psi[i][i] != 0.0){
                       for(int k = i + 1; k < et; k++){    // k is the row number
                               for(int j = i; j < et; j++){
                                   double factor = Psi[i][j] /  Psi[i][i];
                                   if (factor < (10^-10)){
                                       factor = 1;
                                   }

                  Psi[k][j] = Psi[k][j] + (-1.0 * Psi[k][i]*(Psi[i][j] /  Psi[i][i]) );
                               }
                       }
               }
       }

    /* Display upper triangular matrix */
    /* Calculate determinant */
    double temp2=1;
    for(int i = 0; i < et; i++){
            temp2 *= Psi[i][i];
           // cout << Psi[i][i];
       }

    /* Modify determinant */
        cout<<"\nDeterminant:\n";
       if(counti % 2 == 0){
               cout<<endl<<"     "<<temp2<<endl<<endl;
       }else{
               cout<<endl<<"     "<<-1*temp2<<endl<<endl;
       }

  }

  //compute trial wave function
  void step(int w){
      //make a trial move of each electron
      vector<double> r_td(dimention);
          for (int ee=0; ee<et; ee++){
                  for (int dd=0; dd<dimention; dd++){
                          r_td[ee] += r[w][ee][dd]*r[w][ee][dd];
                  }
                  r_td[ee]=sqrt(r_td[ee]);
          }

      Det(r_td);

  }

  int main(){
           initialize();

        for (int n=0; n<N; n++)
               step(n);
  return 0;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:32:28.433

```
 vector<double> r_td(dimention);  // dim 3   ---> et
      for (int ee=0; ee<et; ee++){
              for (int dd=0; dd<dimention; dd++){
                      r_td[ee] += r[w][ee][dd]*r[w][ee][dd];
                           ^^  pow(2,10)  ?? 
```

# android - 如何在 android 中读取 android.R.id.text2？

> ID：15045852
> 
> 赞同：0
> 
> 时间：2013-02-23T21:20:20.340
> 
> 标签：android, contactscontract, onitemclicklistener

我有以下代码

```
public class Contacts extends ListActivity {

    ListView lv;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Cursor cursor = getContentResolver().query(
                ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null, null, null);

        startManagingCursor(cursor);

        String[] from = { ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,
                ContactsContract.CommonDataKinds.Phone.NUMBER,
                ContactsContract.CommonDataKinds.Phone._ID };

        int[] to = { android.R.id.text1, android.R.id.text2 };

        ListAdapter listadapter = new SimpleCursorAdapter(this,
                android.R.layout.simple_list_item_multiple_choice, cursor,
                from, to);

        setListAdapter(listadapter);

        lv = getListView();

        lv.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

        lv.setItemsCanFocus(false);
        lv.setTextFilterEnabled(true);

        final int check = lv.getCheckedItemPosition();//lv.getCheckedItemIds();

        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                TextView tv = (TextView) arg1.findViewById(android.R.id.text2);

                String aa = (String) tv.getText(); 

                String ab =  lv.getItemAtPosition(arg2).toString();
                int ac = lv.getSelectedItemPosition();
                System.out.println("wow "+ab +" ww "+ ac + " "+ aa);

                Toast.makeText(Contacts.this, ((TextView) arg1).getText(), Toast.LENGTH_LONG).show();       
            }
        });

    }

} 
```

我想阅读`ListView`到目前为止我无法做到的数字部分。我什至尝试过 `TextView tv = (TextView) arg1.findViewById(android.R.id.text2);` `String test = tv.getText().toString();` ，但`NullPointerException` 基本上我总是想从手机的联系人列表中获取所有联系人，这样我就可以一次选择多个联系人。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:27:44.053

问题是您正在使用`android.R.layout.simple_list_item_multiple_choice`，其中不包含任何`TextView`带有 id的内容`android.R.id.text2`。布局包含以下内容（至少在某些设备上）：

```
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/text1"
    android:layout_width="match_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:textAppearance="?android:attr/textAppearanceListItem"
    android:gravity="center_vertical"
    android:checkMark="?android:attr/listChoiceIndicatorMultiple"
    android:paddingLeft="8dip"
    android:paddingRight="8dip"
/> 
```

您应该为列表项创建自定义布局。

另请注意，使用私有布局和其他资源（`android.R`课堂上的资源）通常不是一个好主意，您不能确定它们是否存在于所有设备和 Android 版本上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:29:05.893

如果您要获取的数据在 ListView 中，则您在 ListAdapter 上具有相同的数据，因此在 itemClick 上，您可以检索具有单击项目的视图 id 的相应对象。

```
@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    int id = arg1.getItemId();
    listadapter.getItem(id);
    ...
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T21:30:10.337

我猜 setcontentview(R.id.yourlayout) 不是在 oncreate() 中创建的，所以程序每次都会给你空指针异常......只需设置 setcontentview(R.id.yourlayout) 我猜它会起作用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T21:43:37.543

查看[onItemClick](http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html#onItemClick%28android.widget.AdapterView%3C?%3E,%20android.view.View,%20int,%20long%29)的签名：

```
public abstract void onItemClick (AdapterView<?> parent, View view, int position, long id) 
```

您可以将第三个作为被选中项的位置，并以该值作为参数调用[getItem ()。](http://developer.android.com/reference/android/widget/Adapter.html#getItem%28int%29)

无论您做什么，都不要使用 findViewById ，因为它对 listview 是错误的。错误的原因是 listView 重复使用旧视图以使用最少数量的视图（与任何时候显示的视图数量大致相同）。

* * *

编辑：

这是一个例子，说明你可以用我写的东西做些什么：

```
lv.setOnItemClickListener(new OnItemClickListener()
      {
        @Override
        public void onItemClick(final AdapterView<?> arg0,final View arg1,final int arg2,final long arg3)
          {
          final Object item=listadapter.getItem(arg2);
          final CursorWrapper cursorWrapper=(CursorWrapper)listadapter.getItem(arg2);
          final int columnCount=cursorWrapper.getColumnCount();
          for(int i=0;i<columnCount;++i)
            Log.d("DEBUG",cursorWrapper.getColumnName(i)+":"+cursorWrapper.getString(i));
          }
      }); 
```

# c# - 用于关闭 UDP 套接字的 SocketException

> ID：15045853
> 
> 赞同：0
> 
> 时间：2013-02-23T21:20:21.690
> 
> 标签：c#, .net, sockets, xamarin.android

我有一个用 C# 编写的库，我在 WP7/iOS/Windows 应用程序中使用过它。它适用于 Mono，因为我只使用 UdpClient，仅此而已。它是一个自动查找对等点的开源库。您可以在[salaam.codeplex.com上找到它](http://salaam.codeplex.com)

现在我只是想将我的应用程序移植到 Android 上。当我找到我的同伴时，我只想关闭 UDP 连接并转到另一个活动，但是当我关闭套接字时，尽管我把它放在了一个 try catch 短语中，但它抛出了一个`SocketException`并退出。

我能做些什么来防止这种情况发生？

如果您完成活动，它会给您该异常，如果您调用`SalaamBrowser.Close();`它是相同的。

异常文本：

未处理的异常：System.Net.Sockets.SocketException：在 System.Net.Sockets.Socket.ReceiveFrom_nochecks_exc 中断（System.Byte [] buf，Int32 偏移量，Int32 大小，SocketFlags 标志，System.Net.EndPoint 和 remote_end，布尔 throwOnError，系统.Int32& 错误）[0x00000] in :0

在 System.Net.Sockets.Socket.ReceiveFrom_nochecks (System.Byte[] buf, Int32 偏移量, Int32 大小, SocketFlags 标志, System.Net.EndPoint& remote_end) [0x00000] in :0

在 System.Net.Sockets.Socket+Worker.ReceiveFrom () [0x00000] in :0

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T04:32:31.323

您`try/catch`不起作用的原因是错误发生在该块之外。

您正在使用`Async`传输，并且在关闭套接字时，您的接收委托会引发异常。

您从错误的点终止，从内部接收委托。

你所做的就像拔掉电脑而不是关闭它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T03:16:48.550

抛出异常的是接收，而不是关闭。它正在抛出它，因为你关闭了它。我不知道你还能期待什么。

# git - 取消 git push 并忽略其他文件夹

> ID：15045857
> 
> 赞同：2
> 
> 时间：2013-02-23T21:20:41.820
> 
> 标签：git, gitignore, git-commit

我想取消 git push。我已经用`cntrl + C` 命令完成了。我将 --mixed 重置为我的旧状态。将忘记的目录添加到我的 gitignore 文件中，但是当我`git push`再次执行时，它仍然尝试发送忽略的文件夹。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:21:38.487

如果在旧状态（在 之后`git reset`），文件夹（及其内容）仍然是索引的一部分（仍然由 git 状态列为“已添加”，准备提交），那么您需要删除它们从指数。

```
git rm --cached -r /patH/to/folder 
```

如果不这样做，`.gitignore`文件中的指令将被忽略，并且下一次提交将再次包含该文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T18:38:51.173

实际找到方法...

git filter-branch --index-filter 'git rm -r --cached --ignore-unmatch ' --prune-empty -- --all

# javascript - 如何将 Javascript 字符串数组发送到控制器并渲染 PartialView

> ID：15045859
> 
> 赞同：0
> 
> 时间：2013-02-23T21:20:52.897
> 
> 标签：javascript, ajax, jquery, asp.net-ajax

我有这个问题。

*   我在 JavaScript 中有一个数组，如下所示：

    checkItems={"1000","1001","1002"}

*   我需要将此数组发送到 C# 控制器

*   当控制器完成此数组的工作时，返回 PartialView
*   PartialView 将被渲染

我尝试了一切，但没有任何效果。

这是我的 Javascript：

```
function getAllCheckedFirsts()
{
    var postIds = {
        data: []
    };

    var i = 0;
    $(":checked[id$='-first']").each(function (){
        var id = $(this).attr("id");
        var words = id.split("-");
        postIds.data.push(words[0]);
        i++;
    });

    $.post("/Home/getInfoAboutChecked", postIds);
} 
```

这是我的控制器：

```
[HttpPost]
public PartialViewResult getInfoAboutChecked(string[] data)
{
    List<EntityModel> model = new List<EntityModel>();
    if (data.Length != 0)
    {
        int id = 0;
        WSEntityInfo entity;
        WSPropertyInfo[] fids;
        foreach (var e in data)
        {
            id = Convert.ToInt32(e);
            entity = WSConnect.getEntityInfo(id);
            fids = WSConnect.getAllFidsAsWSPropertyInfo(id);
            model.Add(new EntityModel(entity, fids));
        }               
    }
    return PartialView("_EntitiesView",model);
} 
```

但是控制器中的数据仍然是 NULL 有什么问题？还有一个问题，我在哪里以及如何定义 html 中的渲染位置。感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:27:42.360

```
$.post("/Home/getInfoAboutChecked", JSON.stringify(postIds.data)); 
```

并且您可以使用`@Url.Action to`渲染链接，因此假设 home 作为控制器，另一部分作为操作

```
$.post("@Url.Action("getInfoAboutChecked", "Home")", JSON.stringify(postIds.data)); 
```

您的控制器需要一个字符串数组，而您要发送的是一个对象，该对象的属性是一个字符串数组，
也使用[$.post](http://api.jquery.com/jQuery.post/)您可以发送一个简单的对象并对其进行序列化，但不能发送一个数组，因此您必须使用`JSON.stringify`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:24:38.603

可能有更好的方法来做到这一点（我对 JavaScript 还很陌生），但碰巧我昨晚编写了一个函数式的方法来做到这一点：

```
var opts = "";
$('#myForm input:checked').each(function (i, elem) {
    opts += this.value + ",";
});
var ajaxUrl = myUrl + "&opts=" + opts; 
```

在控制器中，我期望一个参数，`string ops`. 在控制器中，我将字符串拆分为“，”以获取各个值。

**更新**

您的帖子可以像这样更新 HTML：

```
$.post("/Home/getInfoAboutChecked", postIds, function(data) {
  $('#idOfDivWhereResultShouldGo').html(data);
}); 
```

# regex - 正则表达式和带引号的字符串

> ID：15045860
> 
> 赞同：0
> 
> 时间：2013-02-23T21:20:52.833
> 
> 标签：regex, bash

这是一个名为“目标”的变量

```
$ echo $_target
x86_64-linux-gnu 
```

此正则表达式测试成功...

```
$ if [[ $_target =~ "x86_64" ]]; then echo "match"; fi
match 
```

但它不会测试表达式是否位于行首。让我将锚标记添加到正则表达式：

```
$ if [[ $_target =~ "^x86_64" ]]; then echo "match"; fi
$ 
```

上面的行并不表示匹配。诡异的。

但是，如果我去掉正则表达式周围的引号，一切都很好

```
$ if [[ $_target =~ ^x86_64 ]]; then echo "match"; fi
match 
```

为什么引号会影响正则表达式测试？我对上面的第二个测试不匹配感到惊讶，我的理解中缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:26:52.477

您不应该将 =~ 运算符的右侧放在引号中，因为这意味着一个字符串，而不是一个正则表达式。（[来源](http://unixdog.com/?p=94)

# c++ - 为什么使用引用而不是指针？

> ID：15045863
> 
> 赞同：0
> 
> 时间：2013-02-23T21:21:20.290
> 
> 标签：c++, pointers, reference, pass-by-reference

当没有对引用进行编译时类型检查时，为什么要使用引用而不是指针？

想象一下，您正在创建一个类型的对象，该对象`Person`需要保存指向它们的引用/指针`House`（非常随机） - 因此人员对象会将房屋引用/指针保存为数据成员。想象一下这是通过引用完成的：

```
class Person{
   public:
      Person(House& myHouse) : house(myHouse) { }
   private:
      House& house;
}; 
```

我看到的问题是，如果您忘记在数据成员声明中包含 & ，那么您认为是引用的东西就会变成副本。当然，传递并保存一个指针会更安全，这样这个错误就会在编译时被标记出来？

我不是要使用一个或另一个 - 我在问为什么在指针上使用引用来保存数据成员？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:29:54.740

> *如果您忘记在数据成员声明中包含 & ，那么您认为是引用的东西变成了副本......传递并保存指针会更安全，这样这个错误就会在编译时被标记出来？*

声明成员时**不能**忘记输入符号。`&`无论您编写`House& house`还是您`House house`的决定，编译器都应该尊重。当您更改对对象的引用声明时，您是**故意**这样做的。这不是您的编译器应该警告您的事情。

编译器无法知道您是打算通过值传递还是通过引用传递。当您将按指针传递更改为按值传递时，编译器报告错误只是因为您将副本（具有自动存储持续时间的对象）视为指针（在语法上不正确），而不是因为它能够识别您可能意味着通过指针传递。

> *为什么在指针上使用引用来保存数据成员？*

主要原因是确保引用将始终使用现有对象进行初始化，这也意味着不`NULL`检查错误处理并在编译类型而不是运行时捕获可能的错误。其他争论可能是更简洁的代码（可读性），在我看来，引用的使用也会导致人们依赖具有自动存储持续时间的对象并学习遵循[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)习语，而不是进入丑陋的内存管理和内存泄漏的地牢。

但我相信你会发现许多现有的问题来解决这个问题，例如[指针与参考](https://stackoverflow.com/q/114180/1168156)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:42:43.493

> 我不是要使用一个或另一个 - 我在问为什么在指针上使用引用来保存数据成员？

指针和引用都用作数据成员。引用`T&`与不可变指针一样灵活`T* const`。此外，引用可能不为空。因此，如果这些属性以最佳方式描述了您的需求，那么请使用参考。

IOW，如果每个人都`Person`必须有一个`House`并且可能在's 的生命周期内`Person`不能切换到其他人，那么请使用参考。显然，这两个前提都感觉很荒谬，所以指针实际上可能更好。`House``Person`

指针并不总是更好。当事物保持不变时，支持不变性（`int* const`）而不是可变性（ ）。`int*`当事情确定时，倾向于确定性（完全是一个）而不是不确定性（一个或没有）。

在 OOP 中，组件对象中的组合关系通常作为对组合对象的引用来完成。一个组件没有复合就不能存在，也不能成为其他复合的组件，因此最好参考。

# java - 如何删除警告可序列化类 ClassNAME 未声明 long 类型的静态最终 serialVersionUID 字段

> ID：15045865
> 
> 赞同：19
> 
> 时间：2013-02-23T21:21:30.127
> 
> 标签：java

我创建了一个扩展`Exception`类的类，我在 Eclipse 上收到了这个警告

> 可序列化类 PhoneAlreadyExists 未声明 long 类型的静态最终 serialVersionUID 字段

请问怎么去掉？

```
public class PhoneAlreadyExists extends Exception {
    public PhoneAlreadyExists() {
        // TODO Auto-generated constructor stub
        super();
    }

    PhoneAlreadyExists(String message) {
        super(message);
    }

} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-23T21:26:23.720

要全局更改 Eclipse 中的行为：转到 Preferences->Java-> *Compiler* ->Errors/Warnings->Potential Programming Problems。这个特定问题有一个条目。您也可以为特定项目更改它。

不过，这回答了您的问题-我建议将其保留在警告级别并添加缺少的字段。或者将 SuppressWarnings 注释添加到那些真正不需要该字段的可序列化类，因为它们永远不会被序列化。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-23T21:25:27.130

在您的课程上添加注释`@SuppressWarnings("serial")`，以忽略该警告

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-23T21:23:36.873

您需要声明一个 long 类型的静态最终 serialVersionUID 字段。

查找`Serializable`Java的API。异常必须实现`Serializable`，并且`Serializable`类必须具有`serialVersionUID`：

```
public static final long serialVersionUID = 1L; 
```

每当您对类进行不兼容的更改时，请增加此版本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-29T10:45:41.070

要忽略警告“可序列化的类 ClassNAME 没有声明静态最终 serialVersionUID......”，请在 eclipse* 中执行以下操作：

1.  单击窗口-首选项-Java-编译器-错误/警告
2.  点击“潜在的编程问题”
3.  向下滚动到“没有serialVersionUID的可序列化类”
4.  选择“忽略”
5.  单击应用
6.  点击确定

保存并关闭您的 Eclipse IDE 当您重新打开 Eclipse 时，不应再列出这些特定的警告。

*对于这个示例解决方案，我使用 Eclipse IDE for Java Developers - 版本：Mars.2 Release (4.5.2)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-26T12:28:27.330

只需在公共类 PhoneAlreadyExists 上方添加此代码 @SuppressWarnings("serial") extends Exception { line

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-26T13:01:21.380

大多数情况下最好添加serialversionUID，但是eclipse对所有swing派生类都会给出警告，这些类永远不会被序列化。我尝试在首选项-> Java -> 编译器-> 错误/警告-> 潜在的编程问题中更改设置，但没有效果。所以我想最好的解决方案是抑制每个永远不会被序列化的类的警告；或者咬紧牙关，忽略警告。

# ruby - 为什么 Ruby 实例变量 object_id 很奇怪

> ID：15045867
> 
> 赞同：0
> 
> 时间：2013-02-23T21:22:04.720
> 
> 标签：ruby, metaprogramming, objectid

下面是测试用例，我只是想用`dup`方法做一些事情。但我意识到了这种奇怪的行为。我找不到任何合理的解释。

```
class ObjectIdTest
  attr_accessor :x, :y
  def initialize
    @x, @y = 1, 2
  end

  def object_ids
    "x:#{@x.object_id}, y: #{@y.object_id}"
  end
end

class ObjectIdTestChild < ObjectIdTest
  attr_accessor :z
  def initialize
    @z = 3
  end

  def object_ids
    super + " z: #{@z.object_id}"
  end
end

oid1 = ObjectIdTest.new
oid2 = ObjectIdTestChild.new
p oid2.object_ids

oid3 = oid2.dup
p oid3.object_ids 
```

**输出：** “x：4，y：4 z：7”

“x：4，y：4 z：7”

1.  通常对象 id 较长（如*70322728590900*），为什么它们这么小？（他们是亲戚还是类似的东西？）
2.  为什么**x**和**y**的对象 id 相同？
3.  为什么**oid2**和**oid3**的实例变量具有相同的对象 id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:34:38.060

1 - Fixnumber 以外的对象具有更大的值。例如：

```
 "hello".object_id #=> 70256148388440
 0x3FFFFFFFF.object_id #=> 34359738367 
```

2 和 3 - 虽然`dup`会生成对象的浅表副本，但在这种情况下，该对象恰好代表相同的 Fixnums。对于 Fixnums，相同的数字始终具有相同的 object_id。 [红宝石对象](http://ruby-doc.org/core-1.9.3/Object.html)

# html - Facebook LIKE Page iFrame 显示网页不可用

> ID：15045873
> 
> 赞同：0
> 
> 时间：2013-02-23T21:22:38.837
> 
> 标签：html, facebook, iframe

我正在尝试在我的 Facebook 网站上创建一个赞按钮，我从 Facebook 收到了 iFrame 代码，但它没有显示！

```
<iframe src="//www.facebook.com/plugins/like.php?href=https%3A%2F%2Fwww.facebook.com%2Fpages%2FSuper-Short-Comedy-Show%2F105982759575529&amp;send=false&amp;layout=box_count&amp;width=450&amp;show_faces=true&amp;font=lucida+grande&amp;colorscheme=dark&amp;action=like&amp;height=90&amp;appId=542903592396470" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:90px;" allowTransparency="true"></iframe> 
```

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:27:57.877

试试这个：

```
<iframe src=\"http://www.facebook.com/plugins/likebox.php?id=PASS_YOUR_FACEBOOK_PAGE_ID&amp;width=292&amp;connections=0&amp;stream=false&amp;header=false&amp;height=62\" scrolling=\"no\" frameborder=\"0\" style=\"border:none; overflow:hidden; width:282px; height:62px;\" allowTransparency=\"true\"></iframe> 
```

而不是我的'PASS_YOUR_FACEBOOK_PAGE_ID'，在那里传递pageid。

例如 facebook 开发者页面：

```
<iframe src=\"http://www.facebook.com/plugins/likebox.php?id=19292868552&amp;width=292&amp;connections=0&amp;stream=false&amp;header=false&amp;height=62\" scrolling=\"no\" frameborder=\"0\" style=\"border:none; overflow:hidden; width:282px; height:62px;\" allowTransparency=\"true\"></iframe> 
```

希望能帮助到你。:)

**最终编辑**：

对于您目前正在拉动的特定页面，试试这个 -

```
<iframe src="http://www.facebook.com/plugins/likebox.php?id=105982759575529&amp;width=292&amp;connections=0&amp;stream=false&amp;header=false&amp;height=62" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:282px; height:62px;" allowTransparency="true"></iframe> 
```

# android - 封顶帧率

> ID：15045874
> 
> 赞同：1
> 
> 时间：2013-02-23T21:22:45.447
> 
> 标签：android, logic, frame-rate, game-loop

这是我在我的 Android 应用程序中实现的游戏循环代码。

它工作得很好，但我遇到的问题是，虽然它将逻辑更新限制在 30 - 实际渲染运行平稳，这显然不利于电池寿命。

我不知道如何将渲染限制/上限为固定数量（比如 30 FPS 左右）。

具体来说，渲染应该只在逻辑已更新时渲染，而不是渲染冗余帧（即，当没有发生逻辑更新时）。

编辑：我刚刚添加了代码的插值部分 - 当我按照@Geobits 的建议限制帧时，这会导致问题吗？

```
int TICKS_PER_SECOND = 30;
int SKIP_TICKS = 1000 / TICKS_PER_SECOND;
int MAX_FRAMESKIP = 10;

long next_game_tick = GetTickCount();
int loops;

bool game_is_running = true;
while( game_is_running ) {

    loops = 0;
    while( GetTickCount() > next_game_tick && loops < MAX_FRAMESKIP) {
        update_game();

        next_game_tick += SKIP_TICKS;
        loops++;
    }
    interpolation = float( GetTickCount() + SKIP_TICKS - next_game_tick )
                    / float( SKIP_TICKS );
    display_game( interpolation );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:12:18.957

有几种方法可以限制帧率，但如果你想做的只是：

> 具体来说，渲染应该只在逻辑已更新时渲染，而不是渲染冗余帧（即，当没有发生逻辑更新时）。

然后你可以设置一个简单的布尔标志。在 中将其设置为 true `update_game()`，并在 中检查`onDraw()`。如果它是假的，就直接返回而不绘制/清除屏幕。如果为真，请进行绘图并将其设置为假；

# sql - 在某些条件下设置一个表中的字段等于另一个表中的字段

> ID：15045876
> 
> 赞同：3
> 
> 时间：2013-02-23T21:22:55.073
> 
> 标签：sql, sql-server

我正在使用 SQL Server 2005 中的数据库，该数据库在我需要它们的所有表中都没有唯一 ID。我的解决方法是创建另一组具有强制唯一 ID 的类似表。

我现在想将新 ID 的引用带回到初始表集以用于连接等目的。（除此之外：这些表会被定期截断和重新填充，因此是解决方法）。

换句话说：我想在 Table2 中获取 ID，并与 Table1 中的记录正确关联。

对我来说困难的是 Table1 中的记录只有在考虑三个字段时才是唯一的。

我在 Table1 中添加了一个 ID 字段，然后我尝试了以下操作：

```
UPDATE dbo.Table1

SET dbo.Table1.ID = dbo.Table2.ID

WHERE dbo.Table1.foo = dbo.Table2.foo
And dbo.Table1.bar = dbo.Table2.bar
And dbo.Table1.buzz = dbo.Table2.buzz 
```

但是，我收到以下错误：

```
Msg 4104, Level 16, State 1, Line 1
The multi-part identifier "dbo.Table2.foo" could not be bound.
Msg 4104, Level 16, State 1, Line 1
The multi-part identifier "dbo.Table2.bar" could not be bound.
Msg 4104, Level 16, State 1, Line 1
The multi-part identifier "dbo.Table2.buzz" could not be bound. 
```

有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T21:29:53.237

这应该适合你：

```
UPDATE t
SET id = t2.id
FROM table1 t JOIN 
  table2 t2 ON t.foo = t2.foo AND
    t.bar = t2.bar AND
    t.buzz = t2.buzz 
```

[小提琴演示示例](http://sqlfiddle.com/#!3/ed81c/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T21:30:52.580

您没有在查询中引用表 2。尝试以下操作：

```
UPDATE dbo.Table1

SET ID = Table2.ID
FROM Table1 INNER JOIN Table 2 ON
Table1.foo = Table2.foo
And Table1.bar = Table2.bar
And Table1.buzz = Table2.buzz 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T22:38:05.060

您已经找到了解决问题的方法，但是您创建了冗余数据并对数据库进行了非规范化，从而降低了它的性能。

你说你在一个表中没有唯一的键。然后你说你很难使用使一行唯一的三个字段，例如唯一键。这告诉我你对复合键和复合键的主题有点模糊。我在 Oracle 系统中多次看到它们，当我第一次接触到这个概念时，它让我大吃一惊。

虽然它们是难以理解和使用的概念，但它们在大型标准化环境中可以成为非常强大的工具。我会重新审视它们并再次查看“旧方式”，看看它是否更有意义。即使设计被证明是劣质的，至少你会做出一个明智的设计决定。然后，您可以制作烫发解决方案。

阻止您使用复合键的问题是什么？是复杂性吗？坚持下去！在我创建一个新表并将一袋数据添加到返回的每一行之前，我必须在设计上遇到一个非常严重的错误。考虑使用视图并查询它，无论您需要做什么来保持您的数据库正常化。

[Oracle 组合键](http://www.orafaq.com/wiki/Composite_key)

[维基百科](http://en.wikipedia.org/wiki/Composite_key)（不是很多信息，但有一些）

# c++ - QT 5.0 的 C++ 11.0 编译器？错误

> ID：15045878
> 
> 赞同：1
> 
> 时间：2013-02-23T21:23:22.537
> 
> 标签：c++, qt

我对 QT creator 没什么问题。

当我尝试构建或调试项目时，出现以下错误消息：

**:-1: 错误：Qt Creator 需要设置编译器来构建。在套件选项中配置编译器。**

然后我去

**Tools->Options->Debug** in Kits 选项卡设置新的编译器，并再次出现错误消息，我需要旧编译器，并警告我的调试器未设置？

我用谷歌搜索了这个错误，并找到了我需要安装旧 C++ 10 或更早版本编译器的解决方案。有没有其他方法可以解决这个问题，或者我需要卸载 11.0 并安装 10.0？我已经安装了 Visual Studio 2012 完整的付费版。

谢谢你。

# c++ - 模板类的模板化构造函数的显式实例化

> ID：15045879
> 
> 赞同：12
> 
> 时间：2013-02-23T21:23:23.893
> 
> 标签：c++, clang, clang++, explicit-instantiation

我不确定这是 Clang 3.2 中的错误还是违反 C++03，但似乎模板类的模板化构造函数的显式实例化失败，但模板类的模板化成员函数的显式实例化成功。

例如，使用 clang++ 和 g++ 编译以下代码没有问题：

```
template<typename T>
class Foo
{
public:
    template<typename S>
    void Bar( const Foo<S>& foo )
    { }
};
template class Foo<int>;
template class Foo<float>;

template void Foo<int>::Bar( const Foo<int>& foo );
template void Foo<int>::Bar( const Foo<float>& foo );
template void Foo<float>::Bar( const Foo<int>& foo );
template void Foo<float>::Bar( const Foo<float>& foo ); 
```

而以下使用 g++ 编译时没有警告但使用 clang++ 失败：

```
template<typename T>
class Foo
{
public:
    template<typename S>
    Foo( const Foo<S>& foo )
    { }
};
template class Foo<int>;
template class Foo<float>;

template Foo<int>::Foo( const Foo<int>& foo );
template Foo<int>::Foo( const Foo<float>& foo );
template Foo<float>::Foo( const Foo<int>& foo );
template Foo<float>::Foo( const Foo<float>& foo ); 
```

特别是，我看到了两条错误消息：

```
TemplateMember.cpp:12:20: error: explicit instantiation refers to member
      function 'Foo<int>::Foo' that is not an instantiation
template Foo<int>::Foo( const Foo<int>& foo );
                   ^
TemplateMember.cpp:9:16: note: explicit instantiation refers here
template class Foo<int>;
               ^ 
```

这是违反标准还是clang ++中的错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T21:44:34.303

看起来您发现了一个 GCC 错误。这些都命名了隐式声明的复制构造函数：

```
template Foo<int>::Foo( const Foo<int>& foo );
template Foo<float>::Foo( const Foo<float>& foo ); 
```

每 [temp.explicit]p4,

> 如果显式实例化的声明命名了一个隐式声明的特殊成员函数（第 12 条），则程序是非良构的。

因此，Clang 拒绝此代码是正确的。

# html - 锚链接让我跳转到 Xenforo 中的文档根目录

> ID：15045885
> 
> 赞同：2
> 
> 时间：2013-02-23T21:24:22.747
> 
> 标签：html, anchor

我有一个问题应该是一个非常简单的任务：创建一个 BBCode 标记来创建一个文本锚，并创建另一个来跳转到该文本锚。

但是，发生了一些事情，这导致我的锚点跳转到网站的根目录。

这是 BBCode 生成的 HTML：

```
<div id="section1">Section Header</div>
<a href="#section1">Goto Section Header</a> 
```

但是，当它在实时页面中时，单击它将跳转到网站的根目录而不是当前页面。这是在 Firefox 和 Chrome 中测试的。我不知道我错过了什么。

这是一个使用 BBCode 的实时示例页面（锚点源中的文本搜索 section1）。 [http://community.playstarbound.com/index.php?help/bb-codes](http://community.playstarbound.com/index.php?help/bb-codes)

如您所见，单击“转到”下的链接会将您带到[http://community.playstarbound.com/#section1](http://community.playstarbound.com/#section1)而不是[http://community.playstarbound.com/index.php?help/bb-codes #section1](http://community.playstarbound.com/index.php?help/bb-codes#section1)符合预期。

这个 div 和锚标记是否有任何外部因素会导致这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T21:54:57.977

**问题**

浏览器似乎无法正确识别您网页的基本 URL。因此，您的锚链接的相对 URL 当前被浏览器解释为

```
http://community.playstarbound.com/#some-anchor 
```

实际上它的实际 URL 应该是

```
http://community.playstarbound.com/index.php?threads/expand-the-bb-code-selection.15492/#some-anchor 
```

由于链接的 URL 与当前页面的 URL 不同，它会导致浏览器将其视为常规链接，而不是当前页面中的内部锚点，从而将您重定向到站点的根目录。

**解决方案**

1.  在锚链接中指定绝对路径。
2.  **编辑：**按照您的建议，更正您网站`base`标签中指定的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T22:29:46.137

我如何修复它：

我无法更正`base`标签中指定的值。而且我无法指定绝对路径。相反，我做了一点 javascript 魔术。

```
<a href="javascript:;" onclick="window.location.hash = 'some-anchor';"> 
```

这解决了我的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-20T07:28:57.543

我们许多人在前 MVC 世界中使用的页内锚点肯定会导致 MVC 中的 PITA。我使用了两种不同的修复方法：

1.  如果您只是使用'href = #'并且不需要它在任何地方导航，那么使用jquery“e.preventDefault”。如：

```
$('(Your attribute, class, and/or ID) a).click(function (e) {
  //whatever else you might want to do, i.e. highlight,etc...
  e.preventDefault(); //Prevent in-page anchor from navigating to root of site
});
```

（我已经在脚本中看到了足够多的**“href='#'”**，所以我不再问了，也不再问我为什么了）。

2.  If you're wanting to navigate somewhere else in the page, add a similar jQuery, but instead of e.preventDefault(), you'll just "return false;". For example, if you have an item `<span><a class="fa fa-arrow-down down-to-bottom" href="#footer">&nbsp;down</a></span>` that you need to go to page bottom, this will do that and shouldn't throw you out to the 'root':

```
$('.down-to-bottom').click(function () {
    $('html, body').animate({
      scrollTop: $(document).height()
    }, 1500, 'easeInOutExpo');
    return false;
});
```

Modify it however you want to go to somewhere besides the bottom (like to another "div") --just be sure to "return false;".

Either of these can probably be done in 'vanilla' javascript too. I usually use jQuery because it's easier for me and a lot of others.

# ruby-on-rails - Rails 3.2 上与自定义表名的多对多关系

> ID：15045886
> 
> 赞同：1
> 
> 时间：2013-02-23T21:24:26.060
> 
> 标签：ruby-on-rails, associations, has-many-through, rails-migrations

我是 Rails 的初学者（刚刚完成 Hartl 的教程），我在处理某些类型的关联时遇到了麻烦，这些关联似乎比我迄今为止接触过的关联更复杂。我一直在 google 和 stackoverflow 上浏览我的问题的解决方案，但是虽然我找到了许多相关的答案，但我仍然不知道如何解决我的问题。

基本上我要做的是实现以下关系：

![ER图](../Images/5813196dc3dcc981bf50807c4a069b31.png)

在研究了它之后，我想出的是：

**楷模**

```
# models/user.rb
class User < ActiveRecord::Base
  attr_accessible :first_name, :last_name, :email …

  has_many :speak, :class_name => "Speaks"
  has_many :speaks, :through => :speak, :source => :language

  has_many :want_to_learn, :class_name => "WantsToLearn"
  has_many :wants_to_learn, :through => :want_to_learn, :source => :language
  …

end

# models/language.rb
class Language < ActiveRecord::Base
  attr_accessible :iso_639_1_code, :name_en, :name_fr, :name_pt

  has_many :speak, :class_name => "Speaks"
  has_many :users_who_speak, :through => :speak, :source => :user

  has_many :want_to_learn, :class_name => "WantsToLearn"
  has_many :users_who_want_to_learn, :through => :wants_to_learn, :source => :user
end

# models/speaks.rb
class Speaks < ActiveRecord::Base
  set_table_name 'speak'
  attr_accessible :level, :language
  references :user
  references :language
end

# models/wants_to_learn.rb
class WantsToLearn < ActiveRecord::Base
  set_table_name 'want_to_learn'
  attr_accessible :language
  references :user
  references :language
end 
```

**迁移**

```
# db/migrate/20130210153328_create_speak.rb
class CreateSpeak < ActiveRecord::Migration
  def change
    create_table :speak do |t|
      t.references :user
      t.references :language
      t.integer :level

      t.timestamps
    end
  end
  add_index :speak, :user
  add_index :speak, :language
end

# db/migrate/20130210153342_create_want_to_learn.rb
class CreateWantToLearn < ActiveRecord::Migration
  def change
    create_table :want_to_learn do |t|
      t.references :user
      t.references :language

      t.timestamps
    end
  end
  add_index :want_to_learn, :user
  add_index :want_to_learn, :language
end 
```

当我这样做并尝试运行`rake:db migrate`时，我收到以下错误：

```
-- add_index(:speak, :user)
rake aborted!
An error has occurred, this and all later migrations canceled:

PG::Error: ERROR:  relation "speak" does not exist
: CREATE  INDEX "index_speak_on_user" ON "speak" ("user")
... 
```

如果我注释掉`add_index`迁移成功运行的行，但我无法从用户创建“说话”关系。例如，如果我运行：

```
> john = User.new(first_name: "John", last_name: "Doe", email: "john@doe.com"...)

> john.speaks.create!(level: '6', language: '139') 
```

我得到：

```
NoMethodError: undefined method `references' for #<Class:0x007ff14c1771a0> 
```

我试图用“belongs_to”和其他一些东西替换所有“引用”，其中许多我什至不记得了，但无济于事。这在我的脑海中提出了几个疑问，例如：

• “references”真的和“belongs_to”一样吗？即使在模型的背景下？我已经看到迁移中使用了“引用”，但从未见过模型。

• 我是否正确使用了“class_name”？我真的对此没有信心。这正是我阅读完所有内容后最有意义的，但我还没有在这样的关联中看到任何自定义示例。

• 添加这些索引有什么问题？

好吧，我不知道这里的礼仪是什么，但我的最后一个问题是：

我该如何正确地做这一切？

先感谢您！

------**编辑**------

我到处都用“belongs_to”替换了关键字“references”。索引的迁移错误完全相同。当我评论索引创建行时，运行迁移，创建用户，然后尝试命令

```
> john.speaks.create!(level: 6, language: 139) 
```

错误是：

```
ActiveModel::MassAssignmentSecurity::Error:
Can't mass-assign protected attributes: level, language 
```

尽管行`attr_accessible :level, :language`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:35:23.137

我是 Rails 中的 references 关键字的新手，但我在 Rails 指南的迁移中看到它，但在类中没有，所以不要在类中使用它。

因此，它与belongs_to 不同，因为belongs_to 用于类中，而引用用于迁移。

在创建索引时迁移会关心类中的关联对我来说也是新的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:10:05.187

好的。我终于设法让一切正常工作，我认为社区放弃未回答的问题不会很有建设性。我的代码现在可以完美运行，它包括我为了允许嵌套表单而必须进行的添加。这是它的外观：

**楷模**

```
# models/user.rb
class User < ActiveRecord::Base
  attr_accessible :first_name, :last_name, :email, ... ,
  :speaks_attributes, :wants_to_learn_attributes
  # These last two attributes are necessary for nested forms

  has_many :speaks, :class_name => "Speaks", :dependent => :destroy
  accepts_nested_attributes_for :speaks, :allow_destroy => true # this one too
  has_many :speaks_languages, :through => :speaks, :source => :language

  has_many :wants_to_learn, :class_name => "WantsToLearn", :dependent => :destroy
  accepts_nested_attributes_for :wants_to_learn, :allow_destroy => true # and this one too
  has_many :wants_to_learn_languages, :through => :wants_to_learn, :source => :language
  .
  .
  .

end

# models/language.rb
class Language < ActiveRecord::Base
  attr_accessible :iso_639_1_code, :name_en, :name_fr, :name_pt

  has_many :speak, :class_name => "Speaks"
  has_many :users_who_speak, :through => :speak, :source => :user

  has_many :want_to_learn, :class_name => "WantsToLearn"
  has_many :users_who_want_to_learn, :through => :want_to_learn, :source => :user
end

# models/speaks.rb
class Speaks < ActiveRecord::Base
  set_table_name 'speak'
  attr_accessible :language, :language_id, :level
  belongs_to :user
  belongs_to :language
end

# models/wants_to_learn.rb
class WantsToLearn < ActiveRecord::Base
  set_table_name 'want_to_learn'
  attr_accessible :language, :language_id
  belongs_to :user
  belongs_to :language
end 
```

**迁移**

```
# db/migrate/20130210153328_create_speak.rb
class CreateSpeak < ActiveRecord::Migration
  def change
    create_table :speak, :id => false do |t|
      t.belongs_to :user
      t.belongs_to :language
      t.integer :level

      t.timestamps
    end
    add_index :speak, :user_id
    add_index :speak, :language_id
  end
end

# db/migrate/20130210153342_create_want_to_learn.rb
class CreateWantToLearn < ActiveRecord::Migration
  def change
    create_table :want_to_learn, :id => false do |t|
      t.belongs_to :user
      t.belongs_to :language

      t.timestamps
    end
    add_index :want_to_learn, :user_id
    add_index :want_to_learn, :language_id
  end
end 
```

在迁移中，我将“add_index”行放在“def change”块内，因为上次我很愚蠢，心烦意乱地把它放在外面，并将“user”和“language”分别更改为“user_id”和“language_id”。那解决了它。

现在我可以创建一个用户`ariel`，并通过运行让他说葡萄牙语和法语：

```
> ariel.speaks.create!(language_id: 129, level: 6)
> ariel.speaks.create!(language_id: 50, level: 4) 
```

`ariel`然后我可以通过运行获取与“说话”表中相关的条目：

```
> ariel.speaks
=> [#<Speaks id: 1, user_id: 1, language_id: 129, level: 6, created_at: "2013-02-25 19:30:01", updated_at: "2013-02-25 19:30:01">, #<Speaks id: 4, user_id: 1, la
nguage_id: 50, level: 4, created_at: "2013-02-26 12:37:34", updated_at: "2013-02-26 12:37:34">] 
```

并通过运行“语言”表中的条目：

```
> ariel.speaks_languages
 => [#<Language id: 50, iso_639_1_code: "fr", name_en: "French", name_fr: "français\n", name_pt: nil>, #<Language id: 129, iso_639_1_code: "pt", name_en: "Portugu
ese", name_fr: "portugais\n", name_pt: nil>] 
```

该过程类似于 Wants_to_learn 关联。

# javascript - 需要在javascript中执行操作

> ID：15045889
> 
> 赞同：0
> 
> 时间：2013-02-23T21:24:59.090
> 
> 标签：javascript

我想减去 2 个值，并立即使用 javascript 进行计算。我需要找到一种`<select>`在 JS 中定位第二个 id 的方法，因为我回显了这些选项，所以我这样做：

```
<tr> <!-- first row, with css -->
<td style="width:50%;">From</td>
<td style="width:50%;">
    <select name="fromlevel" id="fromlevel" style="width:100%; text-align:center; font-weight:bold;">
        <?php 
        $i = 1;
        while ($i < 91) {
            echo '
            <option value=f' . $i . ' name=f' . $i . '>' . $i . '</option>';
            $i++;
        }
        ?>  
    </select>
</td>
</tr>
<tr> <!-- second row, with css -->
<td>To</td>
<td>
    <select name="tolevel" id="tolevel" style="width:100%; text-align:center; font-weight:bold;">
        <?php 
        $i = 1;

        while ($i < 91) {
            echo '
            <option value=t' . $i . ' name=t' . $i . '>' . $i . '</option>';
            $i++;
        }
        ?>  
    </select>
</td>
</tr> 
```

我用 f1、f2、f3、f4 等和 t1、t2、t3、t4 等引用了 ID。我如何在 JS 中区分它们？

如果我只是将第一个的 ID`<select>`引用为 $i，则下面的 JS 可以工作，我对 JS 非常不利，而且我不知道如何使该引用为 f$i

```
var level_current_prices = {};

for(var i = 1; i <= 90; i++ ) {
   level_current_prices[i] = i;
}

function getCurrentLevel() { // current level, from
    var levelSetPrice=0;
    var theForm = document.forms["priceCalcForm"];
    var selectedLevel = theForm.elements["fromlevel"];
    levelSetPrice = level_current_prices[selectedLevel.value];
    return levelSetPrice;
}

function calculateTotal() {
    var LevelPrice = getCurrentLevel();
    var divobj = document.getElementById('totalPrice');
    divobj.style.display='block';
    divobj.innerHTML = "Total Price For the Leveling $"+LevelPrice;
}

function hideTotal() {
    var divobj = document.getElementById('totalPrice');
    divobj.style.display='none';
}

document.forms['priceCalcForm'].fromlevel.onchange = function () {
   calculateTotal();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:40:58.573

对你的问题有点困惑。我想你在谈论以下几行？

```
for(var i = 1; i <= 90; i++ ) {
   level_current_prices[i] = i;
} 
```

用数据预先填充对象，索引`level_current_prices`是一个字符串，而不是一个数字（那将是一个数组）。您几乎可以在括号内执行您想要的操作来生成密钥，但是您所需要的只是`level_current_prices['f'+i]`

如果这不是您的意思，请澄清您的问题。

如果这是您想要的，您可以使用 php.ini 预先生成对象（作为 JSON）。

```
<?php
  $i=1;
  $out = "{";
  while ($i<91) {
    $out .= "\"t".$i."\"=".$i.",";
    $i++;
  }
  $out .="};";
  echo "var level_current_prices = ".$out;
?> 
```

自从我使用 php 以来已经有一段时间了，所以你也许可以做得更好：D。

# excel - 不计算 Excel VBA 中出现的总次数

> ID：15045890
> 
> 赞同：1
> 
> 时间：2013-02-23T21:24:59.043
> 
> 标签：excel, vba

我需要帮助逐行计算某个单词并填充每列下的出现总数。现在，我的代码正在计算某个单词的总数，直到 GM 列以及该列之后的任何内容，我得到 #N/A。我不知道这是否应该发生。这是我到目前为止的代码。

```
Option Compare Text

Sub Count_Named_Entities()
Dim Sum_of_ABS01 As Long
Dim Sum_of_ABS02 As Long
Dim Sum_of_Academ As Long
Dim Sum_of_Active As Long
Dim Sum_of_AffGain As Long
Dim Sum_of_Affil As Long
Dim Sum_of_AffLoss As Long
Dim Sum_of_AffOth As Long
Dim Sum_of_AffPt As Long
Dim Sum_of_AffTot As Long
Dim Sum_of_ANI As Long
Dim Sum_of_Anomie As Long
Dim Sum_of_Aquatic As Long
Dim Sum_of_ArenaLw As Long
Dim Sum_of_Arousal As Long
Dim Sum_of_Begin As Long
Dim Sum_of_BldgPt As Long
Dim Sum_of_BodyPt As Long
Dim Sum_of_CARD As Long
Dim Sum_of_Causal As Long
Dim Sum_of_COLL As Long
Dim Sum_of_COLOR As Long
Dim Sum_of_COM As Long
Dim Sum_of_ConForm As Long
Dim Sum_of_ComnObj As Long
Dim Sum_of_Compare As Long
Dim Sum_of_Complet As Long
Dim Sum_of_DAV As Long
Dim Sum_of_Decreas As Long
Dim Sum_of_DIM As Long
Dim Sum_of_DIST As Long
Dim Sum_of_Doctrin As Long
Dim Sum_of_Econ01 As Long
Dim Sum_of_Econ02 As Long
Dim Sum_of_EMOT As Long
Dim Sum_of_EndsLw As Long
Dim Sum_of_EnlEnds As Long
Dim Sum_of_EnlGain As Long
Dim Sum_of_EnlLoss As Long
Dim Sum_of_EnlOth As Long
Dim Sum_of_EnlPt As Long
Dim Sum_of_EnlTot As Long
Dim Sum_of_EVAL01 As Long
Dim Sum_of_Eval02 As Long
Dim Sum_of_Exch As Long
Dim Sum_of_Exert As Long
Dim Sum_of_Exprsv As Long
Dim Sum_of_Fail As Long
Dim Sum_of_Fall As Long
Dim Sum_of_Feel As Long
Dim Sum_of_Female As Long
Dim Sum_of_Fetch As Long
Dim Sum_of_Finish As Long
Dim Sum_of_Food As Long
Dim Sum_of_FormLw As Long
Dim Sum_of_FREQ As Long
Dim Sum_of_Goal As Long
Dim Sum_of_Hostile As Long
Dim Sum_of_HU As Long
Dim Sum_of_IAV As Long
Dim Sum_of_If As Long
Dim Sum_of_Increas As Long
Dim Sum_of_IndAdj As Long
Dim Sum_of_Intrj As Long
Dim Sum_of_IPadj As Long
Dim Sum_of_Is_In_General_Inquirer As Long
Dim Sum_of_Kin As Long
Dim Sum_of_Know As Long
Dim Sum_of_Land As Long
Dim Sum_of_Legal As Long
Dim Sum_of_MALE As Long
Dim Sum_of_Means As Long
Dim Sum_of_MeansLw As Long
Dim Sum_of_Milit As Long
Dim Sum_of_Name As Long
Dim Sum_of_Nation As Long
Dim Sum_of_NatObj As Long
Dim Sum_of_NatrPro As Long
Dim Sum_of_Need As Long
Dim Sum_of_NegAff As Long
Dim Sum_of_Negate As Long
Dim Sum_of_Negativ As Long
Dim Sum_of_Ngtv As Long
Dim Sum_of_No As Long
Dim Sum_of_Nonadlt As Long
Dim Sum_of_NotLw As Long
Dim Sum_of_NUMB As Long
Dim Sum_of_Object As Long
Dim Sum_of_ORD As Long
Dim Sum_of_Ought As Long
Dim Sum_of_Our As Long
Dim Sum_of_Ovrst As Long
Dim Sum_of_Pain As Long
Dim Sum_of_Passive As Long
Dim Sum_of_Perceiv As Long
Dim Sum_of_Persist As Long
Dim Sum_of_PLACE As Long
Dim Sum_of_Pleasur As Long
Dim Sum_of_Polit01 As Long
Dim Sum_of_Polit02 As Long
Dim Sum_of_POS As Long
Dim Sum_of_PosAff As Long
Dim Sum_of_Positiv As Long
Dim Sum_of_PowAren As Long
Dim Sum_of_PowAuPt As Long  
Dim Sum_of_PowAuth As Long
Dim Sum_of_PowCon As Long
Dim Sum_of_PowCoop As Long
Dim Sum_of_PowDoct As Long
Dim Sum_of_PowEnds As Long
Dim Sum_of_Power As Long
Dim Sum_of_PowGain As Long
Dim Sum_of_PowLoss As Long
Dim Sum_of_PowOth As Long
Dim Sum_of_PowPtas As Long
Dim Sum_of_PowTot As Long
Dim Sum_of_Pstv As Long
Dim Sum_of_PtLw As Long
Dim Sum_of_Quality As Long
Dim Sum_of_Quan As Long
Dim Sum_of_Race As Long
Dim Sum_of_RcEnds As Long
Dim Sum_of_RcEthic As Long
Dim Sum_of_RcGain As Long
Dim Sum_of_RcLoss As Long
Dim Sum_of_RcRelig As Long
Dim Sum_of_RcTot As Long
Dim Sum_of_Region As Long
Dim Sum_of_Rel As Long
Dim Sum_of_Relig As Long
Dim Sum_of_Rise As Long
Dim Sum_of_Ritual As Long
Dim Sum_of_Role As Long
Dim Sum_of_Route As Long
Dim Sum_of_RspGain As Long
Dim Sum_of_RspLoss As Long
Dim Sum_of_RspOth As Long
Dim Sum_of_RspTot As Long
Dim Sum_of_Say As Long
Dim Sum_of_Self As Long
Dim Sum_of_SklAsth As Long
Dim Sum_of_SklOth As Long
Dim Sum_of_SklPt As Long
Dim Sum_of_SklTot As Long
Dim Sum_of_Sky As Long
Dim Sum_of_Social As Long
Dim Sum_of_SocRel As Long
Dim Sum_of_Solve As Long
Dim Sum_of_Space As Long
Dim Sum_of_Stay As Long
Dim Sum_of_Strong As Long
Dim Sum_of_Submit As Long
Dim Sum_of_SureLw As Long
Dim Sum_of_SV As Long
Dim Sum_of_Think As Long
Dim Sum_of_TIME01 As Long
Dim Sum_of_Time02 As Long
Dim Sum_of_TimeSpc As Long
Dim Sum_of_Tool As Long
Dim Sum_of_TranLw As Long
Dim Sum_of_Travel As Long
Dim Sum_of_TrnGain As Long
Dim Sum_of_TrnLoss As Long
Dim Sum_of_Try As Long
Dim Sum_of_Undrst As Long
Dim Sum_of_Vary As Long
Dim Sum_of_Vehicle As Long
Dim Sum_of_Vice As Long
Dim Sum_of_Virtue As Long
Dim Sum_of_Weak As Long
Dim Sum_of_WlbGain As Long
Dim Sum_of_WlbLoss As Long
Dim Sum_of_WlbPhys As Long
Dim Sum_of_WlbPsyc As Long
Dim Sum_of_WlbPt As Long
Dim Sum_of_WlbTot As Long
Dim Sum_of_WltOth As Long
Dim Sum_of_WltPt As Long
Dim Sum_of_WltTot As Long
Dim Sum_of_WltTran As Long
Dim Sum_of_Work As Long
Dim Sum_of_Yes As Long
Dim Sum_of_You As Long
Dim Sum_of_Bear As Long
Dim Sum_of_Ice As Long

Dim ActiveDocument As Object
Dim row As Integer
Dim txt As String

row = 3

Set ActiveDocument = CreateObject("Word.Document")

Do While Worksheets("Sample_Output_2").Cells(row, 1) <> ""

    txt = Worksheets("Sample_Output_2").Cells(row, 2).Value
    ActiveDocument.Content = txt

    Sum_of_ABS01 = CountChar(txt, "ABS")
    Sum_of_ABS02 = CountChar(txt, "ABS@")
    Sum_of_Academ = CountChar(txt, "Academ")
    Sum_of_Active = CountChar(txt, "Active")
    Sum_of_AffPt = CountChar(txt, "AffPt")
    Sum_of_AffTot = CountChar(txt, "AffTot")
    Sum_of_ANI = CountChar(txt, "ANI")
    Sum_of_Anomie = CountChar(txt, "Anomie")
    Sum_of_Aquatic = CountChar(txt, "Aquatic")
    Sum_of_ArenaLw = CountChar(txt, "ArenaLw")
    Sum_of_Arousal = CountChar(txt, "Arousal")
    Sum_of_Begin = CountChar(txt, "BeginS")
    Sum_of_BldgPt = CountChar(txt, "BldgP")
    Sum_of_BodyPt = CountChar(txt, "BodyPt")
    Sum_of_CARD = CountChar(txt, "CARD")
    Sum_of_Causal = CountChar(txt, "Causal")
    Sum_of_COLL = CountChar(txt, "COLL")
    Sum_of_COLOR = CountChar(txt, "COLOR")
    Sum_of_COM = CountChar(txt, "COM")
    Sum_of_ConForm = CountChar(txt, "ConForm")
    Sum_of_ComnObj = CountChar(txt, "ComnObj")
    Sum_of_Compare = CountChar(txt, "Compare")
    Sum_of_Complet = CountChar(txt, "DAV")
    Sum_of_DAV = CountChar(txt, "Complet")
    Sum_of_Decreas = CountChar(txt, "Decreas")
    Sum_of_DIM = CountChar(txt, "DIM")
    Sum_of_DIST = CountChar(txt, "DIST")
    Sum_of_Doctrin = CountChar(txt, "Doctrin")
    Sum_of_Econ01 = CountChar(txt, "Econ")
    Sum_of_Econ02 = CountChar(txt, "Econ@")
    Sum_of_EMOT = CountChar(txt, "EMOT")
    Sum_of_EndsLw = CountChar(txt, "EndsLw")
    Sum_of_EnlEnds = CountChar(txt, "EnlEnds")
    Sum_of_EnlGain = CountChar(txt, "EnlGain")
    Sum_of_EnlLoss = CountChar(txt, "EnlLoss")
    Sum_of_EnlOth = CountChar(txt, "EnlOth")
    Sum_of_EnlPt = CountChar(txt, "EnlPt")
    Sum_of_EnlTot = CountChar(txt, "EnlTot")
    Sum_of_EVAL01 = CountChar(txt, "EVAL")
    Sum_of_Eval02 = CountChar(txt, "Eval@")
    Sum_of_Exch = CountChar(txt, "Exch")
    Sum_of_Exert = CountChar(txt, "Exert")
    Sum_of_Exprsv = CountChar(txt, "Exprsv")
    Sum_of_Fail = CountChar(txt, "Failt")
    Sum_of_Fall = CountChar(txt, "Fall")
    Sum_of_Feel = CountChar(txt, "Feel")
    Sum_of_Female = CountChar(txt, "Female")
    Sum_of_Fetch = CountChar(txt, "Fetch")
    Sum_of_Finish = CountChar(txt, "Finish")
    Sum_of_Food = CountChar(txt, "Food")
    Sum_of_FormLw = CountChar(txt, "FormLw")
    Sum_of_FREQ = CountChar(txt, "FREQ")
    Sum_of_Goal = CountChar(txt, "Goal")
    Sum_of_Hostile = CountChar(txt, "Hostile")
    Sum_of_HU = CountChar(txt, "HU")
    Sum_of_IAV = CountChar(txt, "IAV")
    Sum_of_If = CountChar(txt, "If")
    Sum_of_Increas = CountChar(txt, "Increas")
    Sum_of_IndAdj = CountChar(txt, "IndAdj")
    Sum_of_Intrj = CountChar(txt, "Intrj")
    Sum_of_IPadj = CountChar(txt, "IPadj")
    Sum_of_Is_In_General_Inquirer = CountChar(txt, "Is In General Inquirer")
    Sum_of_Kin = CountChar(txt, "Kin")
    Sum_of_Know = CountChar(txt, "Know")
    Sum_of_Land = CountChar(txt, "Land")
    Sum_of_Legal = CountChar(txt, "Legal")
    Sum_of_MALE = CountChar(txt, "MALE")
    Sum_of_Means = CountChar(txt, "Means")
    Sum_of_MeansLw = CountChar(txt, "MeansLw")
    Sum_of_Milit = CountChar(txt, "Milit")
    Sum_of_Name = CountChar(txt, "Name")
    Sum_of_NatObj = CountChar(txt, "NatObj")
    Sum_of_NatrPro = CountChar(txt, "NatrPro")
    Sum_of_Need = CountChar(txt, "Need")
    Sum_of_NegAff = CountChar(txt, "NegAff")
    Sum_of_Negate = CountChar(txt, "Negate")
    Sum_of_Negativ = CountChar(txt, "Negativ")
    Sum_of_Ngtv = CountChar(txt, "Ngtv")
    Sum_of_No = CountChar(txt, "No")
    Sum_of_Nonadlt = CountChar(txt, "Nonadlt")
    Sum_of_NotLw = CountChar(txt, "NotLw")
    Sum_of_NUMB = CountChar(txt, "NUMB")
    Sum_of_Object = CountChar(txt, "Object")
    Sum_of_ORD = CountChar(txt, "ORD")
    Sum_of_Ought = CountChar(txt, "Ought")
    Sum_of_Our = CountChar(txt, "Our")
    Sum_of_Ovrst = CountChar(txt, "Ovrst")
    Sum_of_Pain = CountChar(txt, "Pain")
    Sum_of_Passive = CountChar(txt, "Passive")
    Sum_of_Perceiv = CountChar(txt, "Perceiv")
    Sum_of_Persist = CountChar(txt, "Persist")
    Sum_of_PLACE = CountChar(txt, "PLACE")
    Sum_of_Pleasur = CountChar(txt, "Pleasur")
    Sum_of_Polit01 = CountChar(txt, "Polit")
    Sum_of_Polit02 = CountChar(txt, "Polit@")
    Sum_of_POS = CountChar(txt, "POS")
    Sum_of_PosAff = CountChar(txt, "PosAff")
    Sum_of_Positiv = CountChar(txt, "Positiv")
    Sum_of_PowAren = CountChar(txt, "PowAren")
    Sum_of_PowAuPt = CountChar(txt, "PowAuPt")
    Sum_of_PowAuth = CountChar(txt, "PowAuth")
    Sum_of_PowCon = CountChar(txt, "PowCon")
    Sum_of_PowCoop = CountChar(txt, "PowCoop")
    Sum_of_PowDoct = CountChar(txt, "PowDoct")
    Sum_of_PowEnds = CountChar(txt, "PowEnds")
    Sum_of_Power = CountChar(txt, "Power")
    Sum_of_PowGain = CountChar(txt, "PowGain")
    Sum_of_PowLoss = CountChar(txt, "PowLoss")
    Sum_of_PowOth = CountChar(txt, "PowOth")
    Sum_of_PowPtas = CountChar(txt, "PowPtas")
    Sum_of_PowTot = CountChar(txt, "PowTot")
    Sum_of_Pstv = CountChar(txt, "Pstv")
    Sum_of_PtLw = CountChar(txt, "PtLw")
    Sum_of_Quality = CountChar(txt, "Quality")
    Sum_of_Quan = CountChar(txt, "Quan")
    Sum_of_Race = CountChar(txt, "Race")
    Sum_of_RcEnds = CountChar(txt, "RcEnds")
    Sum_of_RcEthic = CountChar(txt, "RcEthic")
    Sum_of_RcGain = CountChar(txt, "RcGain")
    Sum_of_RcLoss = CountChar(txt, "RcLoss")
    Sum_of_RcRelig = CountChar(txt, "RcRelig")
    Sum_of_RcTot = CountChar(txt, "RcTot")
    Sum_of_Region = CountChar(txt, "Region")
    Sum_of_Rel = CountChar(txt, "Rel")
    Sum_of_Relig = CountChar(txt, "Relig")
    Sum_of_Rise = CountChar(txt, "Rise")
    Sum_of_Ritual = CountChar(txt, "Ritual")
    Sum_of_Role = CountChar(txt, "Role")
    Sum_of_Route = CountChar(txt, "Route")
    Sum_of_RspGain = CountChar(txt, "RspGain")
    Sum_of_RspLoss = CountChar(txt, "RspLoss")
    Sum_of_RspOth = CountChar(txt, "RspOth")
    Sum_of_RspTot = CountChar(txt, "RspTot")
    Sum_of_Say = CountChar(txt, "Say")
    Sum_of_Self = CountChar(txt, "Self")
    Sum_of_SklAsth = CountChar(txt, "SklAsth")
    Sum_of_SklOth = CountChar(txt, "SklOth")
    Sum_of_SklPt = CountChar(txt, "SklPt")
    Sum_of_SklTot = CountChar(txt, "SklTot")
    Sum_of_Sky = CountChar(txt, "Sky")
    Sum_of_Social = CountChar(txt, "Social")
    Sum_of_SocRel = CountChar(txt, "SocRel")
    Sum_of_Solve = CountChar(txt, "Solve")
    Sum_of_Space = CountChar(txt, "Space")
    Sum_of_Stay = CountChar(txt, "Stay")
    Sum_of_Strong = CountChar(txt, "Strong")
    Sum_of_Submit = CountChar(txt, "Submit")
    Sum_of_SureLw = CountChar(txt, "SureLw")
    Sum_of_SV = CountChar(txt, "SV")
    Sum_of_Think = CountChar(txt, "Think")
    Sum_of_TIME01 = CountChar(txt, "TIME")
    Sum_of_Time02 = CountChar(txt, "Time@")
    Sum_of_TimeSpc = CountChar(txt, "TimeSpc")
    Sum_of_Tool = CountChar(txt, "Tool")
    Sum_of_TranLw = CountChar(txt, "TranLw")
    Sum_of_Travel = CountChar(txt, "Travel")
    Sum_of_TrnGain = CountChar(txt, "TrnGain")
    Sum_of_TrnLoss = CountChar(txt, "TrnLoss")
    Sum_of_Try = CountChar(txt, "Try")
    Sum_of_Undrst = CountChar(txt, "Undrst")
    Sum_of_Vary = CountChar(txt, "Vary")
    Sum_of_Vehicle = CountChar(txt, "Vehicle")
    Sum_of_Vice = CountChar(txt, "Vice")
    Sum_of_Virtue = CountChar(txt, "Virtue")
    Sum_of_Weak = CountChar(txt, "Weak")
    Sum_of_WlbGain = CountChar(txt, "WlbGain")
    Sum_of_WlbLoss = CountChar(txt, "WlbLoss")
    Sum_of_WlbPhys = CountChar(txt, "WlbPhys")
    Sum_of_WlbPsyc = CountChar(txt, "WlbPsyc")
    Sum_of_WlbPt = CountChar(txt, "WlbPt")
    Sum_of_WlbTot = CountChar(txt, "WlbTot")
    Sum_of_WltOth = CountChar(txt, "WltOth")
    Sum_of_WltPt = CountChar(txt, "WltPt")
    Sum_of_WltTot = CountChar(txt, "WltTot")
    Sum_of_WltTran = CountChar(txt, "WltTran")
    Sum_of_Work = CountChar(txt, "Work")
    Sum_of_Yes = CountChar(txt, "Yes")
    Sum_of_You = CountChar(txt, "You")
    Sum_of_Bear = CountChar(txt, "Bear")
    Sum_of_Ice = CountChar(txt, "ice")

    Worksheets("Sample_Output_2").Cells(row, 16).Resize(1, 185).Value = _
        Array(Sum_of_ABS01, Sum_of_ABS02, Sum_of_Academ, Sum_of_Active, Sum_of_AffPt, Sum_of_AffTot, Sum_of_ANI, Sum_of_Anomie, _
              Sum_of_Aquatic, Sum_of_ArenaLw, Sum_of_Arousal, Sum_of_Begin, Sum_of_BldgPt, Sum_of_BodyPt, Sum_of_CARD, Sum_of_Causal, _
              Sum_of_COLL, Sum_of_COLOR, Sum_of_COM, Sum_of_ConForm, Sum_of_ComnObj, Sum_of_Compare, Sum_of_Complet, Sum_of_DAV, _
              Sum_of_Decreas, Sum_of_DIM, Sum_of_DIST, Sum_of_Doctrin, Sum_of_Econ01, Sum_of_Econ02, Sum_of_EMOT, Sum_of_EndsLw, _
              Sum_of_EnlEnds, Sum_of_EnlGain, Sum_of_EnlLoss, Sum_of_EnlOth, Sum_of_EnlPt, Sum_of_EnlTot, Sum_of_EVAL01, Sum_of_Eval02, _
              Sum_of_Exch, Sum_of_Exert, Sum_of_Exprsv, Sum_of_Fail, Sum_of_Fall, Sum_of_Feel, Sum_of_Female, Sum_of_Fetch, Sum_of_Finish, _
              Sum_of_Food, Sum_of_FormLw, Sum_of_FREQ, Sum_of_Goal, Sum_of_Hostile, Sum_of_HU, Sum_of_IAV, Sum_of_If, Sum_of_Increas, _
              Sum_of_IndAdj, Sum_of_Intrj, Sum_of_IPadj, Sum_of_Is_In_General_Inquirer, Sum_of_Kin, Sum_of_Know, Sum_of_Land, _
              Sum_of_Legal, Sum_of_MALE, Sum_of_Means, Sum_of_MeansLw, Sum_of_Milit, Sum_of_Name, Sum_of_NatObj, Sum_of_NatrPro, _
              Sum_of_Need, Sum_of_NegAff, Sum_of_Negate, Sum_of_Negativ, Sum_of_Ngtv, Sum_of_No, Sum_of_Nonadlt, Sum_of_NotLw, Sum_of_NUMB, _
              Sum_of_Object, Sum_of_ORD, Sum_of_Ought, Sum_of_Our, Sum_of_Ovrst, Sum_of_Pain, Sum_of_Passive, Sum_of_Perceiv, _
              Sum_of_Persist, Sum_of_PLACE, Sum_of_Pleasur, Sum_of_Polit01, Sum_of_Polit02, Sum_of_POS, Sum_of_PosAff, Sum_of_Positiv, _
              Sum_of_PowAren, Sum_of_PowAuPt, Sum_of_PowAuth, Sum_of_PowCon, Sum_of_PowCoop, Sum_of_PowDoct, Sum_of_PowEnds, Sum_of_Power, _
              Sum_of_PowGain, Sum_of_PowLoss, Sum_of_PowOth, Sum_of_PowPtas, Sum_of_PowTot, Sum_of_Pstv, Sum_of_PtLw, Sum_of_Quality, _
              Sum_of_Quan, Sum_of_Race, Sum_of_RcEnds, Sum_of_RcEthic, Sum_of_RcGain, Sum_of_RcLoss, Sum_of_RcRelig, Sum_of_RcTot, _
              Sum_of_Region, Sum_of_Rel, Sum_of_Relig, Sum_of_Rise, Sum_of_Ritual, Sum_of_Role, Sum_of_Route, Sum_of_RspGain, _
              Sum_of_RspLoss, Sum_of_RspOth, Sum_of_RspTot, Sum_of_Say, Sum_of_Self, Sum_of_SklAsth, Sum_of_SklOth, Sum_of_SklPt, _
              Sum_of_SklTot, Sum_of_Sky, Sum_of_Social, Sum_of_SocRel, Sum_of_Solve, Sum_of_Space, Sum_of_Stay, Sum_of_Strong, _
              Sum_of_Submit, Sum_of_SureLw, Sum_of_SV, Sum_of_Think, Sum_of_TIME01, Sum_of_Time02, Sum_of_TimeSpc, Sum_of_Tool, Sum_of_TranLw, _
              Sum_of_Travel, Sum_of_TrnGain, Sum_of_TrnLoss, Sum_of_Try, Sum_of_Undrst, Sum_of_Vary, Sum_of_Vehicle, Sum_of_Vice, _
              Sum_of_Virtue, Sum_of_Weak, Sum_of_WlbGain, Sum_of_WlbLoss, Sum_of_WlbPhys, Sum_of_WlbPsyc, Sum_of_WlbPt, Sum_of_WlbTot, _
              Sum_of_WltOth, Sum_of_WltPt, Sum_of_WltTot, Sum_of_WltTran, Sum_of_Work, Sum_of_Yes, Sum_of_You, Sum_of_Bear, Sum_of_Ice)

    row = row + 1
Loop
End Sub

Function CountChar(txt As String, char As String) As Long
    CountChar = Len(txt) - Len(Replace(txt, char, ""))
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:33:22.587

试试这个代码：

```
Sub CountAll()
    Dim varWords As Variant
    Dim txt As String
    Dim row As Long
    Dim i As 

    varWords = Array( _
        "ABS01", "ABS02", "Academ", "Active", "AffGain", "Affil", "AffLoss", "AffOth", _
        "AffPt", "AffTot", "ANI", "Anomie", "Aquatic", "ArenaLw", "Arousal", "Begin", _
        "BldgPt", "BodyPt", "CARD", "Causal", "COLL", "COLOR", "COM", "ConForm", "ComnObj", _
        "Compare", "Complet", "DAV", "Decreas", "DIM", "DIST", "Doctrin", "Econ01", _
        "Econ02", "EMOT", "EndsLw", "EnlEnds", "EnlGain", "EnlLoss", "EnlOth", "EnlPt", _
        "EnlTot", "EVAL01", "Eval02", "Exch", "Exert", "Exprsv", "Fail", "Fall", "Feel", _
        "Female", "Fetch", "Finish", "Food", "FormLw", "FREQ", "Goal", "Hostile", "HU", _
        "IAV", "If", "Increas", "IndAdj", "Intrj", "IPadj", "Is_In_General_Inquirer", _
        "Kin", "Know", "Land", "Legal", "MALE", "Means", "MeansLw", "Milit", "Name", _
        "Nation", "NatObj", "NatrPro", "Need", "NegAff", "Negate", "Negativ", "Ngtv", _
        "No", "Nonadlt", "NotLw", "NUMB", "Object", "ORD", "Ought", "Our", "Ovrst", _
        "Pain", "Passive", "Perceiv", "Persist", "PLACE", "Pleasur", "Polit01", _
        "Polit02", "POS", "PosAff", "Positiv", "PowAren", "PowAuPt", "PowAuth", _
        "PowCon", "PowCoop", "PowDoct", "PowEnds", "Power", "PowGain", "PowLoss", _
        "PowOth", "PowPtas", "PowTot", "Pstv", "PtLw", "Quality", "Quan", "Race", _
        "RcEnds", "RcEthic", "RcGain", "RcLoss", "RcRelig", "RcTot", "Region", _
        "Rel", "Relig", "Rise", "Ritual", "Role", "Route", "RspGain", "RspLoss", _
        "RspOth", "RspTot", "Say", "Self", "SklAsth", "SklOth", "SklPt", "SklTot", _
        "Sky", "Social", "SocRel", "Solve", "Space", "Stay", "Strong", "Submit", _
        "SureLw", "SV", "Think", "TIME01", "Time02", "TimeSpc", "Tool", "TranLw", _
        "Travel", "TrnGain", "TrnLoss", "Try", "Undrst", "Vary", "Vehicle", "Vice", _
        "Virtue", "Weak", "WlbGain", "WlbLoss", "WlbPhys", "WlbPsyc", "WlbPt", _
        "WlbTot", "WltOth", "WltPt", "WltTot", "WltTran", "Work", "Yes", "You", _
        "Bear", "Ice")

    While Worksheets("Sample_Output_2").Cells(row, 1) <> ""
        txt = Worksheets("Sample_Output_2").Cells(row, 2).Value
        For i = 0 To UBound(varWords)
            Worksheets("Sample_Output_2").Cells(row, 16 + i) = _
                CountOccurrences(CStr(varWords(i)), txt)
        Next i
    Wend
End Sub

Private Function CountOccurrences(strWord As String, strText As String)
    CountOccurrences = UBound(Split(UCase(strText), UCase(strWord)))
End Function 
```

# java - Java - 全屏窗口的打印对话框

> ID：15045891
> 
> 赞同：2
> 
> 时间：2013-02-23T21:25:05.943
> 
> 标签：java, swing, printing

我有一个全屏应用程序，我需要打印。对于其他弹出屏幕，我使用了 JInternalFrames，但现在我需要使用 PrintJob。我目前的代码如下：

```
PrinterJob printJob = PrinterJob.getPrinterJob();
printJob.setPrintable(receipt);
if (printJob.printDialog())
    try { 
        printJob.print();
    } catch(PrinterException pe) {
        System.out.println("Error printing: " + pe);
    } 
```

但这当然不会显示在全屏窗口上方，因此为了看到对话框，您必须离开我的应用程序（使用 alt-tab 或 windows 键或类似的东西）。显然这不是特别实用。那么如何在不让用户最小化程序的情况下从全屏应用程序打印呢？

# javascript - javascript代码不起作用

> ID：15045893
> 
> 赞同：1
> 
> 时间：2013-02-23T21:25:11.233
> 
> 标签：javascript, jquery, three.js

我正在尝试使用 three.js 库，它是一个 javascript 3d 库...

所以代码片段是这样的：

```
var segments = 16, rings = 16;
//var radius = 50;  <-- original

// create a new mesh with sphere geometry -
// we will cover the sphereMaterial next!
var scene = new THREE.Scene();
// My read from file snippet.
$.getJSON('sample.json', function(data) {  
     var radius = data.circles.r;
     console.log(radius);

    var sphere = new THREE.Mesh(
       new THREE.SphereGeometry(radius, segments, rings),
       sphereMaterial);

    // add the sphere to the scene
    scene.add(sphere);
});
// and the camera
scene.add(camera); 
```

所以基本上早先这段代码..半径是硬编码的（第二行），而不是硬编码半径..我是从下面的json文件中读取它的？

```
{
 "circles":

{"x":14,"y":2,"z":4,"r":20}
} 
```

但它没有显示任何东西？而且我在萤火虫中也没有看到任何错误有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:31:59.150

调用`$.getJSON(...)`是异步的。所以语句的顺序最有可能

1.  var 场景 = new THREE.Scene();
2.  场景。添加（相机）；
3.  var sphere = new THREE.Mesh(...);
4.  场景.添加（球体）；

如果你`scene.add(camera);`进入你的成功功能，它应该像以前一样工作。

# r - R 数据表中的“*ply”功能

> ID：15045897
> 
> 赞同：3
> 
> 时间：2013-02-23T21:25:30.163
> 
> 标签：r, data.table

我正在寻找一种将 split-apply-combine 策略与 R`data.table`包一起使用的方法。

```
library(data.table)

# take a data.table object, return integer
func <- function(DT) 
{
   DT$a * DT$a
}

DT = data.table(
  a = 1:50
  # ... further fields here
  b = rep(1:10, 5)
)

# this obviously won't work:
DT[, result:=func, by=b]

# but this will (based on @Aruns answer below)
DT[, result:=func(.SD), by=b] 
```

虽然这里非常简单`data.table`，结构更复杂，但我希望能够将逻辑提取到函数中并将子集作为`data.table`s 发送给它们，而不必列出所有字段名称。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-23T21:52:19.053

**编辑：**查看[data.table 项目 wiki 上](https://github.com/Rdatatable/data.table/wiki/Getting-started)提供的更详细的 HTML 小插图。

好的，让我向您展示一个用于显示等效性的`plyr`方法的小比较。`data.table`也许这会帮助你开始。但重要的是您阅读[**这个非常好的 data.table 介绍**](http://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.pdf)和[**这个常见问题解答**](http://datatable.r-forge.r-project.org/datatable-faq.pdf)。

```
set.seed(45) # for reproducibility
# dummy data
m  <- matrix(10*sample(15, 100, replace=T), ncol=10) # 100*10 matrix
df <- data.frame(grp = sample(1:10, 100, replace = T))
df <- cbind(df, as.data.frame(m)) 
```

您有一个包含 11 列、10 个数据和 1 个分组列的 data.frame。现在，如果您想获取每个组中每个列的平均值，那么使用`plyr`，您可以执行以下操作：

```
require(plyr)
ddply(df, .(grp), function(x) colMeans(x[, 2:11])) 
```

使用`data.table`，您可以使用（除了阅读文档链接之外，`.SD`请查看[**这篇文章**](https://stackoverflow.com/questions/8508482/what-does-sd-stand-for-in-data-table-in-r)以获得关于什么的很好的解释）。`.SD`

```
require(data.table)
dt <-data.table(df, key="grp")
dt[, lapply(.SD, mean), by=grp] 
```

这应该让你开始，我想..？

# asp.net - 为什么 aspnet_compiler 以可更新标志成功，但否则失败？

> ID：15045899
> 
> 赞同：1
> 
> 时间：2013-02-23T21:26:06.997
> 
> 标签：asp.net, aspnet-compiler

我们正在研究预编译我们的网站以缩短网站启动时间的可行性。我们试图避免的是`csc.exe`用户访问网站时的任何调用。当 csc.exe 运行时，IIS 不会为任何额外的 HTTP 请求提供服务。这限制了我们向网站发布新二进制文件的频率和速度，因为部署代码和预热我们场中的每个 Web 服务器需要数小时。

我已经`aspnet_compiler.exe`以可更新模式（即使用`-u`标志）编译站点，但经过测试，看起来 IIS 仍在调用`csc.exe`编译控件/页面。

```
> aspnet_compiler -v / -p F:\Projects\Website\webroot -u F:\BuildOutput\Website 
```

因此，我尝试不使用该`-u`标志，但现在出现编译错误：

```
> aspnet_compiler -v / -p F:\Projects\Website\webroot F:\BuildOutput\Website
/Tool/Controls/ToolCustomDateRangePicker.ascx(8): error ASPPARSE: Unknown server 
tag 'SharedControls:DateRangePicker'. 
```

当我打开`/Tool/Controls/ToolCustomDateRantPicker.ascx`时，它`SharedControls:DateRangePicker`正确引用：

```
<%@ Register TagPrefix="SharedControls" TagName="DateRangePicker" 
             Src="../../common/Controls/DateRangePicker.ascx" %> 
```

是什么赋予了？ **为什么`aspnet_compiler`我的网站在可更新时可以正确编译，但在编译时却失败了，因此无法更新？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T16:59:57.813

我有一个类似的问题 - 似乎使用 -u 选项实际上并没有编译内部代码 - 所以它需要在运行时编译。来自：MSDN

> 使用此选项时，不会编译 .aspx 文件中的代码块（即位于脚本元素中或 <% 和 %> 标记之间的代码）。因此，如果这些代码块中存在编译错误，您只会在运行时看到该错误，因为 .aspx 文件只有在那时才被完全编译。对于依赖 .aspx 文件中的代码块的站点，使用此选项通常是不安全的。

# c# - 列上的唯一约束

> ID：15045908
> 
> 赞同：0
> 
> 时间：2013-02-23T21:27:00.820
> 
> 标签：c#, sql-server-2008

我在 Sql Server 2008 中创建了一个表 t1：

```
create t1  
    (id int primary key,  
    name varchar(50) null,  
    city varchar(50) unique  
    ) 
```

现在我想获取 C# 程序中每一列的属性。我可以写：

```
foreach(Column cl in t1)  
   if(cl.nullable)  
        ...... 
```

但我无法检查给定列的`Unique`约束

有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:06:24.673

你为什么不使用[`DataTable`](http://msdn.microsoft.com/en-us/library/system.data.datatable%28v=vs.90%29.aspx)然后阅读属性[`DataColumn.Unique`](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.unique%28v=vs.90%29.aspx)？这似乎是最简单的解决方案。

# c - 信号量权限被拒绝

> ID：15045910
> 
> 赞同：1
> 
> 时间：2013-02-23T21:27:04.950
> 
> 标签：c, macos, process, multiprocessing, semaphore

我正在尝试创建一个可以在进程之间共享的简单信号量。我的主程序调用以下函数来创建信号量。

```
#define SHAREDSEM "/sharedSem"
sem_t *sharedSem = sem_open(SHAREDSEM, O_CREAT, 0644, 1); 
```

但是，我收到错误“权限被拒绝”。我在 Mac OS X 上运行这段代码，我知道它不支持未命名的信号量。但我很确定 sem_open 用于命名信号量。

我试过使用不同的 t_mode 没有成功。

有没有其他人遇到过这个问题并可以提供帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-07T16:30:50.350

我最近在使用 OS X 时遇到了这个问题。我找到的解决方案是取消链接共享内存，然后重新创建它。您也可以尝试重新启动，因为至少对于 Linux，POSIX 风格的信号量是内核持久的。

> POSIX 命名信号量具有内核持久性：如果没有被 sem_unlink(3) 删除，信号量将一直存在，直到系统关闭。

当您尝试创建共享内存时为该模式提供不正确的权限，或者可能完全忽略该模式时，就会出现问题。然后，当您更正问题并尝试打开信号量时，它仍在使用保留的原始信号量。

所以尝试这样做：

```
#define SHAREDSEM "/sharedSem"
sem_unlink(SHAREDSEM);
sem_t *sharedSem = sem_open(SHAREDSEM, O_CREAT, 0777, 1); 
```

如果这是您希望创建信号量的唯一位置，那么您可以选择添加`O_EXCL`选项，如果信号量已经存在，则该选项会失败。这可能至少对调试有用，以查看这是否是您面临的问题。

为此，请尝试：

```
#define SHAREDSEM "/sharedSem"
sem_unlink(SHAREDSEM);
sem_t *sharedSem = sem_open(SHAREDSEM, O_CREAT | O_EXCL, 0777, 1); 
```

请注意，在这些示例中，我将权限设置为 0777，以便所有人都可以访问它。这对于调试很有用。在您的最终实现中，请记住将其设置回您需要的正确权限。

# mongodb - Mongod 服务器在运行时退出

> ID：15045911
> 
> 赞同：2
> 
> 时间：2013-02-23T21:27:19.177
> 
> 标签：mongodb

我几个月以来一直在使用 mongodb，它一直运行良好，直到昨天，但今天我遇到了麻烦。`data\db`我在指定路径的驱动器中有 23.7GB 可用空间，但它说`Please make at least 3379MB available in /data/db/journal`。这是一个错误还是什么？

```
C:\Users\sadaf2605\Downloads\Compressed\Console2>mongod
mongod --help for help and startup options
Sun Feb 24 03:20:05 [initandlisten] MongoDB starting : pid=7020 port=27017 dbpath=\data\db\ 64-bit host=Sadaf
Sun Feb 24 03:20:05 [initandlisten] db version v2.2.2, pdfile version 4.5
Sun Feb 24 03:20:05 [initandlisten] git version: d1b43b61a5308c4ad0679d34b262c5af9d664267
Sun Feb 24 03:20:05 [initandlisten] build info: windows sys.getwindowsversion(major=6, minor=1, build=7601, pla
tform=2, service_pack='Service Pack 1') BOOST_LIB_VERSION=1_49
Sun Feb 24 03:20:05 [initandlisten] options: {}
Sun Feb 24 03:20:05 [initandlisten] journal dir=/data/db/journal
Sun Feb 24 03:20:05 [initandlisten] recover : no journal files present, no recovery needed
Sun Feb 24 03:20:05 [initandlisten]
Sun Feb 24 03:20:05 [initandlisten] ERROR: Insufficient free space for journal files
Sun Feb 24 03:20:05 [initandlisten] Please make at least 3379MB available in /data/db/journal or use --smallfiles
Sun Feb 24 03:20:05 [initandlisten]
Sun Feb 24 03:20:05 [initandlisten] exception in initAndListen: 15926 Insufficient free space for journals, terminating
Sun Feb 24 03:20:05 dbexit:
Sun Feb 24 03:20:05 [initandlisten] shutdown: going to close listening sockets...
Sun Feb 24 03:20:05 [initandlisten] shutdown: going to flush diaglog...
Sun Feb 24 03:20:05 [initandlisten] shutdown: going to close sockets...
Sun Feb 24 03:20:05 [initandlisten] shutdown: waiting for fs preallocator...
Sun Feb 24 03:20:05 [initandlisten] shutdown: lock for final commit...
Sun Feb 24 03:20:05 [initandlisten] shutdown: final commit...
Sun Feb 24 03:20:05 [initandlisten] shutdown: closing all files...
Sun Feb 24 03:20:05 [initandlisten] closeAllFiles() finished
Sun Feb 24 03:20:05 [initandlisten] journalCleanup...
Sun Feb 24 03:20:05 [initandlisten] removeJournalFiles
Sun Feb 24 03:20:05 [initandlisten] shutdown: removing fs lock...
Sun Feb 24 03:20:05 dbexit: really exiting now 
```

我也尝试过使用--smallfiles，但它不起作用！

```
C:\Users\sadaf2605\Downloads\Compressed\Console2>mongod --smallfiles
Sun Feb 24 03:23:38 [initandlisten] MongoDB starting : pid=6844 port=27017 dbpath=\data\db\ 64-bit host=Sadaf
Sun Feb 24 03:23:38 [initandlisten] db version v2.2.2, pdfile version 4.5
Sun Feb 24 03:23:38 [initandlisten] git version: d1b43b61a5308c4ad0679d34b262c5af9d664267
Sun Feb 24 03:23:38 [initandlisten] build info: windows sys.getwindowsversion(major=6, minor=1, build=7601, platform=2, service_pack=
'Service Pack 1') BOOST_LIB_VERSION=1_49
Sun Feb 24 03:23:38 [initandlisten] options: { smallfiles: true }
Sun Feb 24 03:23:38 [initandlisten] journal dir=/data/db/journal
Sun Feb 24 03:23:38 [initandlisten] recover : no journal files present, no recovery needed
Sun Feb 24 03:23:38 [initandlisten] ERROR: listen(): bind() failed errno:10048 Only one usage of each socket address (protocol/networ
k address/port) is normally permitted. for socket: 0.0.0.0:27017
Sun Feb 24 03:23:38 [websvr] admin web console waiting for connections on port 28017
Sun Feb 24 03:23:38 [initandlisten] now exiting
Sun Feb 24 03:23:38 dbexit:
Sun Feb 24 03:23:38 [initandlisten] shutdown: going to close listening sockets...
Sun Feb 24 03:23:38 [initandlisten] closing listening socket: 464
Sun Feb 24 03:23:38 [initandlisten] shutdown: going to flush diaglog...
Sun Feb 24 03:23:38 [initandlisten] shutdown: going to close sockets...
Sun Feb 24 03:23:38 [initandlisten] shutdown: waiting for fs preallocator...
Sun Feb 24 03:23:38 [initandlisten] shutdown: lock for final commit...
Sun Feb 24 03:23:38 [initandlisten] shutdown: final commit...
Sun Feb 24 03:23:38 [initandlisten] shutdown: closing all files...
Sun Feb 24 03:23:38 [initandlisten] closeAllFiles() finished
Sun Feb 24 03:23:38 [initandlisten] journalCleanup...
Sun Feb 24 03:23:38 [initandlisten] removeJournalFiles
Sun Feb 24 03:23:38 [initandlisten] shutdown: removing fs lock...
Sun Feb 24 03:23:38 dbexit: really exiting now 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-24T23:09:13.873

> 错误：日志文件的可用空间不足

根据上述错误，释放您的空间。

另请参阅：[日记文件存在于日记目录中，但在未启用日记的情况下开始](https://stackoverflow.com/q/18044462/55075)

> 错误：listen():bind() failed errno:10048 每个套接字地址（协议/网络地址/端口）通常只允许使用一次。对于套接字：0.0.0.0:27017

这表明端口 27017 上已经有一些进程绑定，应该被杀死。

# c# - 列表 .Add 一个对象给出了 UgenityAdministrationConsole.exe 中发生的“System.NullReferenceException”类型的未处理异常

> ID：15045914
> 
> 赞同：-3
> 
> 时间：2013-02-23T21:27:42.460
> 
> 标签：c#, exception, object, initialization, nullreferenceexception

我收到一个未处理的类型异常

> UgenityAdministrationConsole.exe 中发生“System.NullReferenceException”
> 
> 附加信息：对象引用未设置为对象的实例。

这发生在我的类构造函数中。

这是我的代码：

```
 public static object dummyObject = new object(); // create a dummy object to use for initializing various things

    public class EntityValuesClass
    {
        public List<EntityValue> EntityValues { get; set; }

        public EntityValuesClass(EntityType _entType)
        {
            Type t;
            PropertyInfo[] propInfoArray;
            EntityValue entValue = new EntityValue();

            t = entityTypeToType[_entType];
            propInfoArray = t.GetProperties();

            foreach (PropertyInfo propItem in propInfoArray)
            {
                entValue.FieldName = propItem.Name;
                entValue.FieldValue = dummyObject;
                EntityValues.Add(entValue);  <------ this is where the error is happening
            }
        }
    }

    public class EntityValue
    {
        public string FieldName { get; set; }
        public object FieldValue { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T21:31:15.867

`EntityValues`一片空白。你从来没有初始化它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T21:31:58.580

您必须先初始化`EntityValue`属性：

```
EntityValues = new List<EntityValue>(); 
```

另一方面，根据[CA1002：不要公开通用列表](http://msdn.microsoft.com/en-us/library/ms182142.aspx)，您应该考虑将您的类更改为：

```
private List<EntityValue> _entityValues = new List<EntityValue>();
public List<EntityValue> EntityValues
{
    get { return _entityValues; }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T21:33:50.820

`EntityValues`就像`null`你没有为它分配任何东西一样。

您可以添加`EntityValues = new List<EntityValue>();`到构造函数的开头以对其进行初始化。

# ruby - Ruby 类到符号

> ID：15045917
> 
> 赞同：1
> 
> 时间：2013-02-23T21:27:46.750
> 
> 标签：ruby

我想获得一个对象的类并将其变成一个符号。特别是，鉴于此：

```
class Apple
end

class Apple_Pie
  def name
    "apple pies"
  end
end

fruit_table = {:Apple => :Apple_Pie}

a = Apple.new 
```

我想`Apple_Pie`从`a`. 我试过：

```
obj = Object.const_get(fruit_table[a.class])
obj.name 
```

期待

```
apple pies 
```

但这实际上并没有发生。我不确定如何将课程变成一个符号。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T21:36:37.407

您需要使用`Module#name`获取类的字符串名称，然后使用 将其转换为符号`String#to_sym`。

从我的控制台：

```
> a.class
=> Apple
> a.class.name
=> "Apple"
> a.class.name.to_sym
=> :Apple 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T21:40:35.657

我刚刚粘贴了您的代码，并将**.new**添加到 `obj = obj = Object.const_get(fruit_table[a.class.name.to_sym]).new.name 它有效。不确定这是否真的是你想要的。

更新：忘记添加**.name.to_sym**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-01T04:07:09.960

```
 ob_demoobject=Hash.new
    sym=ob_demoobject.class.to_s.to_sym 
```

# scala - 如何找到不会给出无限结果的最小“双”除数？

> ID：15045920
> 
> 赞同：2
> 
> 时间：2013-02-23T21:28:24.363
> 
> 标签：scala, double, divide-by-zero

```
Welcome to Scala version 2.9.2 (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_26).

scala> 1.0 / Double.MinPositiveValue
res0: Double = Infinity 
```

哦。恼人的。我希望我可以做类似的事情：

```
def f(x: Double) = 1.0 / (x + Double.MinPositiveValue) 
```

...并避免`Infinity`为`f(0.0)`. 让我们尝试找到一个稍大的数字：

```
scala> val xs = Iterator.iterate(Double.MinPositiveValue)(_ + Double.MinPositiveValue)
xs: Iterator[Double] = non-empty iterator

scala> xs.take(10).toList
res1: List[Double] = List(4.9E-324, 1.0E-323, 1.5E-323, 2.0E-323, 2.5E-323, 3.0E-323, 3.5E-323, 4.0E-323, 4.4E-323, 4.9E-323) 
```

好的。好的。它在增加。怎么样：

```
scala> xs.map(1.0 / _).take(10).toList
res2: List[Double] = List(Infinity, Infinity, Infinity, Infinity, Infinity, Infinity, Infinity, Infinity, Infinity, Infinity) 
```

嗯……也许需要一段时间。我们试试看：

```
scala> xs.find(x => !(1.0 / x).isInfinite) 
```

......我还在等这个。看起来它不会很快终止。

如何找到`Double`不会给出无限结果的最小除数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T21:52:43.797

^(如果您要搜索，至少使用二分法进行搜索，因为那是 2 (#bits in exponent))，迭代次数不应超过 1024 次。

但事实证明你不需要，因为你可以更快地通过试用找到它。它应该非常接近`1/Double.MaxValue`：

```
scala> Double.MaxValue
res35: Double = 1.7976931348623157E308

scala> 1/res35
res36: Double = 5.562684646268003E-309

scala> 1/res36
res37: Double = Infinity

scala> 1/(res36+math.ulp(res36))
res38: Double = 1.7976931348623143E308

scala> res36+math.ulp(res36)
res39: Double = 5.56268464626801E-309 
```

没那么糟糕。

# c++ - 将类的静态 const 数据成员初始化为类

> ID：15045921
> 
> 赞同：0
> 
> 时间：2013-02-23T21:28:34.353
> 
> 标签：c++, static, constructor, constants, initializer-list

假设我们在头文件中有这个：

```
class A
{
private:
     static const double x;
public:
    A(double given_x);
};

class B
{
private:
    static const double x;
    class A;
public:
     B(double x_given);
}; 
```

并且我们需要在初始化的时候初始化A类的静态常量数据成员。
我认为将`x_given`带有初始化列表的变量从 B 类的构造函数传递给 A 类是可以的，但我显然错了。

如何才能做到这一点？

此外，两个类*可能*需要具有相同的数据成员。

**编辑#1：** 我需要声明一个 const 变量，以确保它不会在类成员函数中的任何地方更改。但是这个值是在施工时给出的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:40:34.393

静态成员具有静态存储持续时间，因此它不会等到对象被创建后才被初始化。当您有一个`const`整数类型的静态成员时，您可以在此处初始化它，然后在类定义中进行初始化。但是，由于您的类型是`double`，因此您需要在单个翻译单元中定义它（例如在您的`A`类的实现文件中）：

```
const double A::x = 48151623.42; 
```

# cocoa-touch - Cocos2d在方向改变时手动旋转UIKit

> ID：15045922
> 
> 赞同：1
> 
> 时间：2013-02-23T21:28:42.380
> 
> 标签：cocoa-touch, cocos2d-iphone, rotation

我需要对此代码进行哪些更改才能使其在 Cocos2d 中工作？当方向改变时手动旋转触摸效果很好。

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration{
    [super willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];
    if(UIInterfaceOrientationIsPortrait(toInterfaceOrientation)){
        [self changeTheViewToPortrait:YES andDuration:duration];
    }
    else if(UIInterfaceOrientationIsLandscape(toInterfaceOrientation)){
        [self changeTheViewToPortrait:NO andDuration:duration];
    }
}

- (void) changeTheViewToPortrait:(BOOL)portrait andDuration:(NSTimeInterval)duration{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:duration];
    if(portrait){
        //change the view and subview frames for the portrait view
        tabBar.frame = CGRectMake(0, 420, 320, 40);
    }
    else {
        //change the view and subview  frames for the landscape view
        tabBar.frame = CGRectMake(0, 260, 480, 40);
    }
    [UIView commitAnimations];
} 
```

# c# - 关于模型更改的实体框架更新数据库

> ID：15045923
> 
> 赞同：1
> 
> 时间：2013-02-23T21:28:42.787
> 
> 标签：c#, entity-framework, database-migration, entity-framework-4.3, entity-framework-migrations

我目前正在使用带有以下 powershell 控制台命令的自动迁移： add-migration update-database

我想知道如果模型更改（DbContext）而不使用控制台命令，是否有自动更新数据库的选项。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:29:18.123

我用

```
public class DataContext : DbContext
{

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {

        Database.SetInitializer(new MigrateDatabaseToLatestVersion<DataContext,Configuration>());

        base.OnModelCreating(modelBuilder);
    }
} 
```

当在代码运行时创建数据上下文时，这会导致数据库迁移到最新版本。

# java - 不断得到相同的答案，但认为这是由于我的回归

> ID：15045928
> 
> 赞同：0
> 
> 时间：2013-02-23T21:29:19.850
> 
> 标签：java, methods, for-loop

我已经更新了我的代码，但是它继续将我初始化年份的数字放在运行时打印出来的表格的底部。而且我仍在尝试弄清楚如何使用打印输出部分中的 %.2d 来创建 2 位小数。因此，对此的任何反馈也会有所帮助。

```
import java.util.Scanner;

public class Investment {

public static double futureInvestmentValue(double investmentAmount, double monthlyInterestRate, int years){

double futureInvestmentValue = 0.0;

for (years = 1; years <=30; years++){
    //calculate futureInvestmentValue
    futureInvestmentValue += (investmentAmount * (Math.pow(1 + monthlyInterestRate, years * 12)));
    System.out.print(years + "\t" + futureInvestmentValue + "\n");

}//end for
return futureInvestmentValue;
}//end futureInvestmentValue

public static void main(String[] args){

    Scanner input = new Scanner (System.in);

    //obtain Investment amount
    System.out.print("Enter Investment amount: ");
    double investmentAmount = input.nextDouble();

    //obtain monthly interest rate in percentage
    System.out.print("Enter annual interest rate in percentage: ");
    double annualInterestRate = input.nextDouble();

    //calculate annual interest rate
    double monthlyInterestRate = (annualInterestRate / 1200);

int years = 1;

System.out.println("Years\t" + "Future Value");

System.out.print(years + "\t" + futureInvestmentValue(investmentAmount, monthlyInterestRate, years) + "\n");

}//end main
}// 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:34:40.023

您永远不会修改用于计算此值的任何术语`annualInterest`

`double annualInterest = (1-1 / Math.pow(investmentAmount * (1 + monthlyInterestRate), years * 12));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:36:24.803

您返回的值与从 Scanner 获得的值相同：

双投资金额 = input.nextDouble();

您应该返回 futureInvestmentValue。

而且，正如其他评论中所指出的，您正在循环，但您并没有改变，而是改变了循环中变量的值，因此您可以避免循环或检查逻辑。

# embedded - 微控制器需要一些指导（初学者）

> ID：15045929
> 
> 赞同：0
> 
> 时间：2013-02-23T21:29:22.010
> 
> 标签：embedded, arduino, pic

您好，我无法真正找到我正在寻找的信息，所以我决定问。我正在寻找使用微控制器进行嵌入式编程，但我不知道从哪里开始。可能的选择是巨大的。最终我的目标是开始一个爱好项目，最终开发我自己的微型嵌入式操作系统。

考虑到这个目标，您会推荐什么控制器？

1.  应该允许使用 ASM（我想了解处理器的工作原理）
2.  在您可以使用它创建的内容上具有相当大的灵活性。例如，用它建造一台迷你电脑。
3.  有可供初学者学习的可靠资源。

由于受欢迎，我倾向于使用 Arduino，但我听说 PIC 也不错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T09:18:22.720

关于 Arduino 的关键在于它*不是*微控制器。它是一个开放硬件/开源项目，用于开发板和开发工具，使学习和创建嵌入式系统变得简单。在这个程度上，它可能满足您的需求。

Arduino 最初使用 AtmelAVR 微控制器，尽管新的[Arduino Due](http://arduino.cc/en/Main/ArduinoBoardDue)使用 Atmel SAM3X8E ARM Cortex-M3。

在这种情况下，无论如何我都会推荐 ARM 设备，所以也许 Arduino Due 适合你，但是还有许多其他 ARM 板设计具有类似的支持生态系统，例如[BeagleBoard](http://beagleboard.org/)、[PandaBoard](http://pandaboard.org/)和成本极低的[Raspberry Pi](http://www.raspberrypi.org/) . 后者已经是运行 Linux 的“小型计算机”，因此可能过于抽象，无法轻松学习嵌入式系统和微控制器。

使用 ARM 的优势在于它无处不在，从 10 兆赫兹的能力和小型 RAM/闪存部件到运行 > 1GGz 的应用处理器。ARM 不会制造混乱，他们将架构授权给其他制造商，因此许多供应商使用不同的专有外设集制造 ARM 部件，并针对不同的目标应用程序，因此您总能找到符合您需求的 ARM 部件。

我不一定推荐 PIC，零件由单一供应商制造，指令集不一致，说 PIC18、PIC16、PIC18、PIC24 和 PIC32 之间存在显着的架构差异 - 后者实际上与前面的完全不同PIC 架构。低端 PIC 设备不太适合高级语言开发。虽然这可能使学习汇编程序变得容易，但在使用 C 或 C++ 编码时确实会出现妥协。另一方面，AtmelAVR（在 Arduino 中使用）具有专门设计用于支持高效 C 和 C++ 编译的指令集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T22:00:03.550

这听起来很时髦。但 Arduino 非常适合初学者。它的 IDE 使事情变得简单。您可以包含您的程序集或编写您自己的 C++。作为 gcc 之上的包装器，为您提供与更大芯片相同的工作原理。这样当您成长为 MAKE 和 Eclipse 时，您就可以从方便的 IDE 中扩展您的技能。除了为更大的芯片提供一条不错的路径。

拿起其他库并对其进行调整以弄脏您的手指。和学习的想法。

# javascript - 从外部调用 JavaScript 函数

> ID：15045936
> 
> 赞同：0
> 
> 时间：2013-02-23T21:30:00.063
> 
> 标签：javascript, web

我需要向使用大量 JavaScript 的站点重复输入大量数据。所以我不能简单地将数据传递给 html 表单。我不是该网站的所有者，因此我无法直接向该网站输入 javascript 代码。有什么方法可以从外部调用带有数据作为参数的 JavaScript 函数？我已经考虑过使用 curl 发布数据或将页面加载为 iframe，由于安全原因，这不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:34:32.277

您可以在 chrome 控制台中放置代码。还有一个名为油脂猴的Firefox插件，它是相似的。否则，您无法在浏览器之外执行此操作。

# bash - 从 Bash 脚本写入自定义日志文件

> ID：15045946
> 
> 赞同：44
> 
> 时间：2013-02-23T21:30:50.360
> 
> 标签：bash, shell, logging

在 Linux 中，我知道如何`/var/log/messages`在我创建的一个简单的 shell 脚本中向文件写入一条简单的消息：

```
#!/bin/bash
logger "have fun!" 
```

我想停止将消息扔到默认`/var/log/messages`文件中，并创建我自己的。

我试过这个：

```
#!/bin/bash
logger "have more fun" > /var/log/mycustomlog 
```

它仍然记录到`/var/log/messages`. 它确实创建了`/var/log/mycustomlog`，但它是空的。

有人看到我错过了什么吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-23T22:23:35.477

`logger`记录到 syslog 设施。如果您希望消息转到特定文件，则必须相应地修改 syslog 配置。你可以像这样添加一行：

```
local7.*   -/var/log/mycustomlog 
```

并重新启动系统日志。然后你可以像这样记录：

```
logger -p local7.info "information message"
logger -p local7.err "error message" 
```

并且消息将以正确的日志级别出现在所需的日志文件中。

在不更改 syslog 配置的情况下，您可以`logger`像这样使用：

```
logger -s "foo bar" >> /var/log/mycustomlog 
```

这将指示`logger`将消息也打印到 STDERR（除了将其记录到 syslog 之外），因此您可以将 STDERR 重定向到文件。但是，这完全没有意义，因为无论如何都已经通过 syslog 记录了消息（使用默认优先级`user.notice`）。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-02-23T21:55:13.583

`logger`@chepner 提出了一个专门用于记录消息的好观点。

我确实需要提到@Thomas Haratyk 只是询问我为什么不简单地使用`echo`.

当时，我不知道回声，因为我正在学习`shell-scripting`，但他是对的。

我的简单解决方案现在是这样的：

```
#!/bin/bash
echo "This logs to where I want, but using echo" > /var/log/mycustomlog 
```

上面的示例将覆盖 > 之后的文件

所以，我可以用这个附加到那个文件：

```
#!/bin/bash
echo "I will just append to my custom log file" >> /var/log/customlog 
```

多谢你们！

*   顺便说一句，保持我的个人登录只是我个人的偏好`/var/log/`，但我相信还有其他好主意。而且由于我没有创建守护程序，`/var/log/`因此可能不是我的自定义日志文件的最佳位置。（只是说）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-04-14T04:43:11.377

通过 shell 的全局变量记录 shell 脚本有很多细节。我们可以在 shell 脚本中模拟类似的日志记录：[http](http://www.cubicrace.com/2016/03/efficient-logging-mechnism-in-shell.html) ://www.cubicrace.com/2016/03/efficient-logging-mechnism-in-shell.html 这篇文章详细介绍了介绍日志级别，如 INFO 、 DEBUG 、错误。跟踪脚本入口、脚本出口、函数入口、函数出口等细节。

样本日志： [![在此处输入图像描述](../Images/dd6c6f683709ba05c4636263a19374bb.png)](https://i.stack.imgur.com/LUuu6.jpg)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-23T22:10:15.020

如果您看到记录器的手册页：

```
$ man logger 
```

> LOGGER(1) BSD 通用命令手册 LOGGER(1)
> 
> NAME logger — syslog(3) 系统日志模块的 shell 命令接口
> 
> 概要记录器 [-isd] [-f 文件] [-p pri] [-t 标签] [-u 套接字] [消息 ...]
> 
> 描述 Logger 在系统日志中创建条目。它为 syslog(3) 系统日志模块提供了一个 shell 命令接口。

它清楚地表示它将记录到系统日志。如果要登录到文件，可以使用“>>”重定向到日志文件。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-06-05T14:43:12.440

我通过使用过滤器做到了。现在大多数 linux 系统都使用 rsyslog。配置文件位于`/etc/rsyslog.conf`和`/etc/rsyslog.d`。

每当我运行命令`logger -t SRI some message`时，我希望“一些消息”只显示在`/var/log/sri.log`.

为此，我添加了`/etc/rsyslog.d/00-sri.conf`具有以下内容的文件。

```
# Filter all messages whose tag starts with SRI
# Note that 'isequal, "SRI:"' or 'isequal "SRI"' will not work.
#
:syslogtag, startswith, "SRI" /var/log/sri.log

# The stop command prevents this message from getting processed any further.
# Thus the message will not show up in /var/log/messages.
#
& stop 
```

然后重启 rsyslogd 服务：

```
systemctl restart rsyslog.service 
```

这是一个显示结果的 shell 会话：

```
[root@rpm-server html]# logger -t SRI Hello World!
[root@rpm-server html]# cat /var/log/sri.log
Jun  5 10:33:01 rpm-server SRI[11785]: Hello World!
[root@rpm-server html]#
[root@rpm-server html]# # see that nothing shows up in /var/log/messages
[root@rpm-server html]# tail -10 /var/log/messages | grep SRI
[root@rpm-server html]# 
```

# c++ - CreateProcessAsUser：如何使用默认应用程序打开文件？

> ID：15045948
> 
> 赞同：0
> 
> 时间：2013-02-23T21:30:56.140
> 
> 标签：c++, windows, createprocess

我在 C++ 代码中使用 CreateProcessAsUser 打开模拟用户的应用程序。如果给出了可执行文件但由于不可执行文件而失败，则此方法效果很好。

使用 CreateProcessAsUser 的默认应用程序打开不可执行文件的最简单方法是什么。

我需要通过以下方式以外的解决**方案**：

```
cmd.exe /S /C ""path_to_my_file"" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T22:35:21.763

最简单的解决方案如下：

1.  从原来的进程，说进程A，`CreateProcessAsUser`用来创建一个新进程，说进程B。进程 B 作为不同的用户运行。
2.  传递给指定要打开的文件的进程 B 命令行参数。
3.  从进程 B 调用`ShellExecute`或`ShellExecuteEx`打开其他文件。

# jquery - 从坐标中获取 DIV id

> ID：15045949
> 
> 赞同：1
> 
> 时间：2013-02-23T21:30:57.790
> 
> 标签：jquery, css

例如，我有以下代码，每行显示 3 个 div 框，页面上有很多行

```
 <div id='row1col1' class='duty' style="top:50px ; left:50px " ></div>
      <div id='row1col2' class='duty' style="top:50px ; left:150px " ></div>
      <div id='row1col3' class='duty' style="top:50px ; left:250px " ></div>
      <div id='row2col1' class='duty' style="top:150px ; left:50px " ></div>
      <div id='row2col2' class='duty' style="top:150px ; left:150px " ></div>
      <div id='row2col2' class='duty' style="top:150px ; left:250px " ></div>
      <div id='row3col1' class='duty' style="top:250px ; left:50px " ></div>
      <div id='row3col2' class='duty' style="top:250px ; left:150px " ></div>
      etc 
```

我想要做的是动态放置一个新的 div 并根据其上方 div 的 id 或其他属性对其进行更改，我认为这不是父级，所以有什么办法可以获取这些数据？正如我所知道的“顶部”和“左侧”位置，我可以通过这种方式获取 div 的 ID 吗？

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:05:17.380

可能有更好的方法来实现您的目标。但是，这个函数会做我认为你想要的：

```
function findAbove(selector, x, y) {
    var maxpos = 0, maxel;
    jQuery(selector).each(function(i, el) {
        var $el = jQuery(el),
            ex = parseInt($el.css('left')),
            ey = parseInt($el.css('top'));
        if (ex < x && ey < y && ex + ey > maxpos) {
            maxpos = ex + ey;
            maxel = $el;
        }
    });
    return maxel;
}
// Pass the coordinates of the new div
findAbove('.duty', 250, 250).css('border','2px solid green'); 
```

如果您知道您的新 div 将与其上方的 div 完全对齐，那么您应该更改`ex < x`为`ex == x`，并`ex + ey`（两次）更改为`ey`。

# css - Wordpress 菜单不会停留在顶部

> ID：15045951
> 
> 赞同：0
> 
> 时间：2013-02-23T21:31:01.890
> 
> 标签：css, wordpress, twitter-bootstrap, menu, themes

我在一个 wordpress 网站上工作，我有我试图使用的模板，我想让菜单在向下滚动页面时保持固定在屏幕顶部。我知道足够多的引导程序，如果我可以正确集成它，我可以使用它来使其保持不变，或者完全编写一个新菜单，但我不确定我需要在 wordpress 中去哪里来实现这一点，或者是否有一个插件可以做到？这个。提前感谢您的任何帮助。

我尝试将以下类添加到菜单中，但没有帮助，代码是 Bootstrap。

我确实记得关闭 div 但它没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:50:54.630

您的班级名称中有一个空格，我认为 CSS 不允许。如果类名是“navbar-fixed-top”，这应该使它固定在顶部！

```
.navbar-fixed-top {
position: fixed;
right: 0;
left: 0;
z-index: 1030;
top: 0;
} 
```

# android - 更新后打开我的android程序

> ID：15045952
> 
> 赞同：6
> 
> 时间：2013-02-23T21:31:08.610
> 
> 标签：android, updates

我使用[https://stackoverflow.com/a/14353076/1327384](https://stackoverflow.com/a/14353076/1327384)来更新我的 android 程序，但是在更新我的程序后它将被关闭，所以我想在完成更新过程后重新打开它，我该怎么做？

我用过这个类

```
package services;
    public class PackageChangeReceiver extends BroadcastReceiver {
         @Override
            public void onReceive(Context ctx, Intent intent) {
            Uri data = intent.getData();
            boolean replacing = intent.getBooleanExtra(Intent.EXTRA_REPLACING, false);

            Intent intent1 = new Intent(ctx, service.class);
            ctx.startService(intent1);
            Log.d("service", "Action: " + intent.getAction());
            Log.d("service", "The DATA: " + data);
            }

    } 
```

和这个主要的

```
 <receiver android:name="services.PackageChangeReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.PACKAGE_REMOVED" />
                <action android:name="android.intent.action.PACKAGE_REPLACED" />
                <action android:name="android.intent.action.PACKAGE_ADDED" />

                <data android:scheme="package" />
            </intent-filter>
        </receiver> 
```

但我手动启动应用程序后仍然收到意图

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T21:59:26.250

a) 看看[android.intent.action.PACKAGE_REPLACED](http://developer.android.com/reference/android/content/Intent.html#ACTION_PACKAGE_REPLACED)。

b）我相信如果您的应用程序具有粘性服务，那么该服务会在包更新后重新启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T21:52:06.930

可能[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)可以提供帮助吗？您可以设置任务以启动应用程序的活动，例如在您的 apk 下载并用户单击安装后 40 秒内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-04T15:10:00.110

**For API Level 12 & above**

Simply register a broadcast receiver to receive a call **only when your** application package is updated.

```
public class PackageUpdateReceiver extends BroadcastReceiver {

   @Override
   public void onReceive(Context context, Intent intent) {
       //get the launch activity or any activity you want to open 
       Intent i = getBaseContext().getPackageManager().
               getLaunchIntentForPackage(getBaseContext().getPackageName());
       i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
       i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
       context.startActivity(i);
   }
} 
```

Make sure to register the broadcast receiverin the manifest!

```
 <receiver android:name=".receivers.PackageUpdateReceiver">
        <intent-filter>
            <action android:name="android.intent.action.MY_PACKAGE_REPLACED" />
        </intent-filter>
    </receiver> 
```

**Now for the API Level < 12**

You have to register for a generic package update receiver by replacing action name in the manifest as below,

```
MY_PACKAGE_REPLACED with PACKAGE_REPLACED 
```

And in the onReceive() method of the BroadcastReceiver check if it's your application's package name,

```
if (intent.getDataString().contains("com.your.app")){
...
} 
```

# c - strncpy 导致 LPC-2378 挂起/死机

> ID：15045953
> 
> 赞同：1
> 
> 时间：2013-02-23T21:31:09.207
> 
> 标签：c, embedded, strncpy

我正在做一些关于 Olimex LPC2378-STK 的工作。

我有以下声明。

```
unsigned char buffer[256]; 
```

然后我尝试做：

```
strncpy((char *)buffer, "CREATED_BY", 255); 
```

有谁知道为什么这会导致问题。

如果我注释掉它运行没有问题但使用它似乎会导致程序死亡的代码行。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T08:50:51.323

您发布的代码本质上没有任何问题，但它没有上下文。例如，如果`buffer[]`是一个局部变量，它将在堆栈上创建，并且您可能会溢出堆栈。

您可以将其声明为静态以查看问题是否消失，这将验证堆栈溢出。如果变量需要是临时的，那么您将需要分配一个适当更大的堆栈。

请注意，堆栈溢出可能不会专门发生在 strncpy 中。`buffer`可能包含在堆栈中，但它的大小可能已将其他对象推到堆栈之外，因此写入*它们*会导致堆栈损坏。失败点通常是当函数尝试使用损坏的返回地址返回时。您真的应该使用调试器来单步执行代码，以查看调用堆栈、堆栈指针以及函数是否在 strncpy 上或调用函数返回时失败。

关于代码安全性和可维护性的一点，您应该更喜欢：

```
strncpy((char *)buffer, "CREATED_BY", sizeof(buffer) - 1); 
```

您还可以更方便地使用初始化程序：

```
unsigned char buffer[256] = "CREATED_BY" ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T09:25:09.620

strncpy 可能会出现很多问题：

1.  您正在尝试写入尚未分配的内存，具有 NULL 地址，或者您没有权限（强制转换`char *`为高度可疑），
2.  您的缓冲区内容不是 NUL 终止的
3.  您正在溢出缓冲区，覆盖某些内容。

使用调试器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T20:48:31.100

我已经处理了您报告的相同问题。

发生在我身上的是我没有配置启动代码（如果使用 keil）来为 HEAP 内存保留空间。printf 系列函数使用 malloc 和 free，因此，HEAP 空间是强制性的。

如果您使用的是 GCC，问题是您没有正确设置 newlib。检查堆。

# java - 每个线程应该选择 95% 的时间有效 id 和剩余 5% 的时间无效 id

> ID：15045956
> 
> 赞同：-1
> 
> 时间：2013-02-23T21:31:27.817
> 
> 标签：java, multithreading, random, executorservice

我正在做一个项目，我应该从文件中读取几个属性。以下是我的属性文件-

```
NUMBER_OF_THREADS: 10
RANGE_VALID_USER_ID: 1-5000
RANGE_NON_VALID_USER_ID: 10000-50000
PERCENTAGE_VALID_USER_ID: 95 
```

现在这意味着从上述属性中，`number of threads`is `10`，然后 range of `valid user id's`is from `1 to 5000`，range of `non valid user id`is from `10000-50000`，最重要的是`95% of time`每个线程应该从有效用户 id 范围中选择 id ，这意味着剩余`5% of time`它将从非有效用户 id 范围中选择 id .

下面是我写的程序。它将读取上述属性文件。

```
private static Properties prop = new Properties();
private static int threads;
private static int startValidRange;
private static int endValidRange;
private static int startNonValidRange;
private static int endNonValidRange;
private static double percentageValidId;

public static void main(String[] args) {

    // create thread pool with given size
    ExecutorService service = Executors.newFixedThreadPool(threads);

    try {
        readPropertyFile();

        for (int i = 0; i < threads; i++) {
            service.submit(new ReadTask());
        }

    } catch (InterruptedException e) {

    } catch (IOException e) {

    }
}

private static void readPropertyFile() throws IOException {

    prop.load(Read.class.getClassLoader().getResourceAsStream("config.properties"));

    threads = Integer.parseInt(prop.getProperty("NUMBER_OF_THREADS"));

    startValidRange = Integer.parseInt(prop.getProperty("RANGE_VALID_USER_ID").split("-")[0]);
    endValidRange = Integer.parseInt(prop.getProperty("RANGE_VALID_USER_ID").split("-")[1]);

    startNonValidRange = Integer.parseInt(prop.getProperty("RANGE_NON_VALID_USER_ID").split("-")[0]);
    endNonValidRange = Integer.parseInt(prop.getProperty("RANGE_NON_VALID_USER_ID").split("-")[1]);

    percentageValidId = Double.parseDouble(prop.getProperty("PERCENTAGE_VALID_USER_ID"));
} 
```

下面是我的`ReadTask class`那个实现`Runnable Interface`。

```
class ReadTask implements Runnable {

    public ReadTask() {
    }

    @Override
    public void run() {

    long startTime = System.currentTimeMillis();
    long endTime = startTime + (durationOfRun*60*1000);    

    while (System.currentTimeMillis() <= endTime) {

    /* Print valid user id 95% of time 
     * and remaining 5% of time it will print 
     * non valid user id.
     */

        }
    }
} 
```

正如您目前在我的 run 方法中看到的那样，每个线程将运行特定的时间段，并且在特定的时间段内，它将选择有效的用户 id 95% 的时间和剩余的 5% 的时间，它将选择非有效的用户 ID。

**我的问题：-**

目前我被困在这个问题上，如何确保每个线程将使用 95% 的时间有效用户 ID 和剩余 5% 的时间，它将选择非有效用户 ID。

如果我在任何部分不清楚，请告诉我。任何建议都会对解决这个问题有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:48:07.433

如果可以的话，您选择的数据结构，只需确保静态字段可访问`ReadTask`（通过使它们`public`/“包保护”，或通过创建`ReadTask`内部类）。要选择您的号码，首先在“有效”或“无效”之间随机选择（如@bmorris591 所建议）。然后得到一个随机整数，但“移位”以匹配您的间隔：

```
Random r = new SecureRandom();
while (System.currentTimeMillis() <= endTime) {
    int randomID;
    if ( r.nextFloat() < percentageValidId/100 )
        randomID = r.nextInt(endValidRange - startValidRange + 1) + startValidRange;
    else
        randomID = r.nextInt(endNonValidRange - startNonValidRange + 1) + startNonValidRange;
    // Print it
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T22:04:27.840

从线程访问成员变量（如 endTime）时要小心。如果变量不是最终的，你应该同步它的访问，或者，如果它只在一个线程中被修改，让它成为瞬态的。

# php - 为什么图像标题不让我保存图像？

> ID：15045963
> 
> 赞同：1
> 
> 时间：2013-02-23T21:32:21.730
> 
> 标签：php, header

我正在使用 jcrop 来裁剪图像。
但生成的裁剪图像无法保存，我的意思是当我右键单击并保存图像时，它会保存 .php 文件。
这是使用的代码：

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
$targ_iw = $_REQUEST['iwidth'];
$targ_ih = $_REQUEST['iheight'];
$source = $_REQUEST['tname'];
if(empty($targ_iw)){
    $targ_iw = $_POST['w'];
    $targ_ih = $_POST['h'];
    }
    $jpeg_quality = 90;

    $src = 'http://www.imageopti.com/crop/files/'.$source;
    $img_r = imagecreatefromjpeg($src);
    $dst_r = ImageCreateTrueColor( $targ_iw, $targ_ih );

    imagecopyresampled($dst_r,$img_r,0,0,$_POST['x'],$_POST['y'],
    $targ_iw,$targ_ih,$_POST['w'],$_POST['h']);

    header('Content-type: image/jpeg');
    imagejpeg($dst_r, null, $jpeg_quality);
    exit;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T22:04:34.070

*   在您的 HTML 代码中，添加

    ```
    <input type="hidden" name="create" value="true" /> 
    ```

*   添加我的功能

    ```
    function new_my_resampled($source, $iwidth, $iheight, $w, $h, $x, $y)
    {
        $filename   = "http://www.imageopti.com/crop/files/" . $source;

        $targ_iw = $iwidth;
        $targ_ih = $iheight;
        if(empty($targ_iw))
        {
            $targ_iw = $w;
            $targ_ih = $h;
        }

        $image = imagecreatetruecolor($targ_iw,$targ_ih);
        $o_img = imagecreatefromjpeg($filename);
        imagecopyresampled($image,$o_img,0,0,$x,$y,$targ_iw,$targ_ih,$w,$h);
        imagejpeg($image, null, 100);
    } 
    ```

*   在你的 php 文件中添加

    ```
    if($_POST['create'] == 'true')
    {
        /*
         * Write here your conditions
         */

        $filename = "http://www.imageopti.com/crop/files/" . $_POST['tname'];
        $f_name   = trim(basename($filename));
        //$f_size   = getSizeFile($filename);
        header("(anti-spam-content-type:) image/jpeg");
        header('Cache-control: max-age=31536000');
        header('Expires: ' . gmdate('D, d M Y H:i:s', (time() + 31536000)) . ' GMT');
        header('Content-transfer-encoding: binary');
        header('ETag: "' . time() . '"');
        header("Content-Disposition: attachment; filename=" . $f_name);
        header("Content-type: image/jpeg");
        header("Content-Type: application/octet-stream");
        header("Content-Type: application/download");
        header("Content-Description: File Transfer");  
        //header("Content-length:" . $f_size);
        header("Cache-control: private"); 
        new_my_resampled($_POST['tname'], $_POST['iwidth'], $_POST['iheight'], $_POST['w'], $_POST['h'],$_POST['x'],$_POST['y']);
    } 
    ```

*   ！！！如果你想使用`$f_zise`，你可以从[php.net](http://www.php.net/manual/en/function.filesize.php#84130)`header("Content-length:" . $f_size);`使用这个函数`getSizeFile`

请测试一下...

# angularjs - AngularJS 模型

> ID：15045964
> 
> 赞同：4
> 
> 时间：2013-02-23T21:32:25.827
> 
> 标签：angularjs

我正试图围绕 AngularJS。我很喜欢它，但一个核心概念似乎在逃避我——模型在哪里？

例如，如果我有一个显示多个交易列表的应用程序。一个列表向服务器查询匹配某些条件的分页事务集，另一个列表使用不同的条件，但可能有一些事务同时匹配两个条件并最终出现在两个列表中。现在：

1.  出现在两个列表中的事务应该是两个范围内的相同对象，对吗？这不是数据绑定的一大亮点吗，所以一个地方的更新会反映在另一个地方？

2.  事务可能具有抽象原始服务器 API 请求的复杂行为，需要对服务器进行后续查询以收集更多数据，观察自己的变化并将自己标记为脏，所有这些都去哪里了？

3.  列表本身需要知道何时删除了事务，因此在一个列表中删除的同一事务将从另一个列表中消失。

4.  我们可能想以某种客户端存储方式缓存事务？

那么问题又来了：这一切都去哪儿了？这一切都被塞进 $rootScope 并由控制器控制吗？委派服务？

这里的任何方向，无论多么模糊，都会受到赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-23T22:02:09.430

关于 Angular 的事情是它把模型留给你。您不必扩展某些内置对象以使其工作，它可以是您想要的任何对象。

a) 是的，但就像我说的，这取决于你。如果您愿意，您甚至可以使用 Backbones 模型实现。

b）可能在您的模型对象中。Angular 提供了一个你可以使用的资源服务。您可以在这些资源上定义自己的方法，这是一个很好的起点。

c）您是指 GUI 部分还是业务逻辑？Angular 为您处理 GUI。只需实现从列表中删除交易的功能，Angular 就会为您重新渲染它。

d) 同样，这取决于您来实现或使用库。Angular 主要是一个 GUI 框架，对您的模型/持久层几乎没有意见。

对于你的最后一个问题；您会将大部分逻辑放在服务中。您的 Angular 控制器将被注入他们需要的服务，并通过范围向视图公开功能。您应该尽可能避免将内容添加到根范围，因为它们在您的模板中基本上是全局的。

# meteor - 模板不显示对象

> ID：15045970
> 
> 赞同：0
> 
> 时间：2013-02-23T21:32:59.120
> 
> 标签：meteor

*我是 Meteor 的新手，所以为新手问题道歉。注意我使用的是 CoffeeScript。*

我在服务器和客户端“ifs”之上创建了一个新集合，如下所示：

```
Trivia = new Meteor.Collection("trivia") 
```

在启动时，我将一些文档插入到 if Meteor.isServer 下的集合中。这里的一个例子：

```
Meteor.startup () ->
        Trivia.remove({})
        Trivia.insert({question: "Who Played Ethan Hunt in Mission Impossible?", choices: ["Tom Cruise", "Matt Damon", "Liam Neeson", "Edward Norton"], answer: "Tom Cruise", used: false}) 
```

在 HTML 页面上，我有一个带有 {{ask}} 的“琐事”模板。

```
<body>
  {{> trivia}}
</body>

<template name="trivia">
  <p class="label label-info">Movie Trivia:</p>
  <h3>{{ask}}</h3>
</template> 
```

这是我在 .isClient 中的代码

```
if Meteor.isClient
    Template.trivia.ask = () ->
        Trivia.findOne({used: false}) 
```

事实上，我在 HTML 中的 h3 标记内返回 [object Object]。

我试图只取回问题文本，但如果我使用以下代码，我会得到一个空白页：

```
Template.trivia.ask = () ->
    Trivia.findOne({used: false}).question 
```

如果我在控制台中运行**Trivia.findOne({used: false}).question**，我会得到我正在寻找的内容，即：“谁在 Mission Impossible 中扮演 Ethan Hunt？”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:43:08.020

答案是汤姆克鲁斯！笑话

该查询返回一个包含您的文档的对象：

```
{
  question: "Who Played Ethan Hunt in Mission Impossible?", 
  choices: ["Tom Cruise", "Matt Damon", "Liam Neeson", "Edward Norton"], 
  answer: "Tom Cruise", 
  used: false
} 
```

所以上面是给车把的，但你想要这个问题，所以你应该使用：

```
<h3>{{ask.question}}</h3> 
```

关于使用时的空白页`Trivia.findOne({used: false}).question`。这是因为当流星最初在浏览器上加载时，本地集合是空的，直到它从服务器获取它们。所以在某些时候，在很短的时间内，查询不会返回任何内容，所以你只需要处理`findOne({used:false})`没有结果的情况。遇到异常时页面变为空白。

# css - CSS a:visited 不使用 AJAX 调用 - Ruby On Rails

> ID：15045974
> 
> 赞同：0
> 
> 时间：2013-02-23T21:33:43.087
> 
> 标签：css, ruby-on-rails, ajax

我有一个 Ruby on Rails 应用程序，我在其中跟踪对各种主题的喜欢或不喜欢。当用户点击喜欢时，喜欢的数量会增加，并且通过 ajax 调用立即显示数量以重新加载部分。但问题是由于link_to在我的一个控制器中调用了一个函数，然后执行ajax（在respond_to中），实际上没有任何内容存储在历史记录中，因此链接无法在访问时改变颜色。

这是我的CSS：

```
/* Links */
a:link {
  color: #06c;
  text-decoration: none;
}
a:visited {
  color: red !important;
  text-decoration: none;
}
a:hover{
  color:#D8CA92;
  text-decoration: none;
}
a:active {
  color: #CC9966;
  text-decoration: none;
} 
```

我的链接：

```
<%= link_to '&#9650;'.html_safe,{ :controller => :confessions, :action => :upvote, :id => conf.id }, :remote=>true %> 
```

以及被调用的相关 js.erb 文件

```
$('#ajax').html("<%= escape_javascript(render :partial => 'layouts/confessions') %>"); 
```

如何在仍然使用 ajax 调用的同时让 a:visited 工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T00:40:22.443

正如 Sheikh 评论的那样，最简单的方法是`.visited`向链接添加类（唯一的另一种方法是使用 html5 api，正如您所想象的那样，它并没有得到广泛的支持）。你这样做的方法是在成功调用 rails ajax 后设置回调：

```
$(function() {
  $('a').on('ajax:success', function() {
    $(this).addClass('visited');
  });
)}; 
```

如果可以通过 ajax 调用添加这些链接，您可能希望使用 live 代替。请注意，这不会保留点击之间的状态。为此，您可能需要将状态保存到 cookie 或类似的东西中。

# php - MySQL 选择时间戳是否在过去

> ID：15045977
> 
> 赞同：3
> 
> 时间：2013-02-23T21:33:51.707
> 
> 标签：php, mysql, datetime

我有一个这样的数据库：

```
桌子
姓名 | 时间戳
------------------------------------------
你好 | 2013-02-23 14:26:18
哟 | 2013-03-22 14:26:18

```

我想做一个SQL Select，只选择过去的事情（例如，没有为未来设置时间戳）。

最好的方法是什么？

谢谢你的帮助。

**编辑：**

我尝试了这些建议，但它们似乎都不起作用，这是查询：

```
SELECT * FROM TABLE WHERE timestamp<NOW() 
```

它仍然选择了所有内容，我也尝试过：

```
SELECT * FROM TABLE WHERE timestamp<CURRENT_TIMESTAMP 
```

它仍然再次选择了所有内容。

真的很奇怪，当我使用“timestamp>CURRENT_TIMESTAMP”时，它似乎可以工作（它隐藏了所有未来的项目）但当我尝试另一个没有意义的方向时却不行。可能是时区问题还是类似的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T21:36:04.477

```
SELECT `Name` FROM `TABLE` WHERE `timestamp` < NOW(); 
```

应该得到你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:35:58.827

```
SELECT * FROM TABLE WHERE timestamp<now(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T21:35:59.750

尝试以下查询：

```
SELECT * FROM YourTable WHERE 'timestamp' < CURRENT_TIMESTAMP 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T21:36:24.630

你有没有尝试过

```
SELECT * 
FROM yourtable T
WHERE T.timestamp < NOW(); 
```

...？

[`NOW()`](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_now)...

> 返回当前日期和时间作为 'YYYY-MM-DD HH:MM:SS' 或 YYYYMMDDHHMMSS.uuuuuu 格式的值，具体取决于函数是在字符串还是数字上下文中使用。该值以当前时区表示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-23T21:38:29.363

```
select * from table where `timestamp` < now() 
```

# python - 在修改其值的函数中使用模块局部变量的最佳方法？

> ID：15045979
> 
> 赞同：0
> 
> 时间：2013-02-23T21:34:05.287
> 
> 标签：python, python-2.7, scope

这是在 Python 2.7 中。这是一个例子。

```
v = 1

def print_v():
    v += 1
    print v

print_v() 
```

这怎么能被重写，当这个模块被导入时，我没有得到这个：

```
$ python -c "import the_above_module"
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "the_above_module.py", line 9, in <module>
    print_v()
  File "the_above_module.py", line 6, in print_v
    v += 1
UnboundLocalError: local variable 'v' referenced before assignment 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T21:36:43.227

放在`global v`你的`print_v`函数里面。

但是，您应该考虑为什么要使用（和修改）全局变量。这通常是一种脆弱的做事方式。

# ruby-on-rails - Restful API 或传统网络应用

> ID：15045987
> 
> 赞同：2
> 
> 时间：2013-02-23T21:34:46.067
> 
> 标签：ruby-on-rails, django, web-applications, backbone.js, restful-architecture

我看到 web 应用程序社区似乎有两种不同的方式来构建体验丰富的 web 应用程序。

1.  将后端构建为纯 Restful API 服务器，并使用 javascript MVC 框架（如骨干网）+ UX 设计框架（如 twitter-bootstrap）来构建 UI 前端。

    -- 我看到人们称这为 think-client 方法，因为很多逻辑发生在浏览器端；另外，设计 Restful API 接口（尤其是可扩展的接口）比下面的方法需要更多的思考过程

2.  使用 RoR 或 Django 等 Web 应用程序框架来构建 Web 应用程序，这是一种广泛使用的方法。

这个问题有点像[Is using RESTful Api as a custom web app backend required?](https://stackoverflow.com/questions/10862839/is-using-restful-api-as-a-custom-web-app-backend-needed) . 我知道方法 1 可能有助于重用支持原生应用程序的开发工作，但它比方法 2 强加了多少前期开销？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:43:41.077

后端/前端拆分是创建服务的一个简单示例。服务的概念非常强大，尤其是当您开始扩展到大量用户并添加新功能时。

要回答您的问题，您必须投资将 API 和前端作为两个独立的应用程序来实现。如果您只打算拥有一个 Web 客户端，那么传统的 rails/django 应用程序可能是有意义的。另一方面，如果您计划拥有各种客户端（移动、Web、cli），那么基于服务/API 的结构更有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:38:38.840

如果您使用胖客户端，尤其是在使用框架时，则需要 RESTful API 或某些 Web 服务 API。

在方法 2 中，不需要 Web 服务（例如 RESTful API），因为您提供的是静态页面。然而，要在页面上执行任何 AJAX，将需要有效的 Web 服务，尽管它们可能看起来不是特别 RESTful。

# java - 纯 Java MPEG DASH 库

> ID：15045989
> 
> 赞同：4
> 
> 时间：2013-02-23T21:35:00.483
> 
> 标签：java, video, streaming, mpeg-dash, mpeg

是否有任何 PURE Java 开源项目可以在不使用本地 C 或 C++ 库的情况下处理 MPEG4 或 MPEG-DASH（又名 MPEG Dash）？

# php - PHP 如何在提交表单之前检查两封电子邮件是否匹配？

> ID：15045991
> 
> 赞同：-2
> 
> 时间：2013-02-23T21:35:04.443
> 
> 标签：php, forms, form-submit

我有以下代码，我想验证表单以确保在提交 for 之前两封电子邮件都匹配。

电子邮件在第 24 和 26 行，提前致谢。

```
<?php
include_once 'includes/config.php';
$pageTitle = 'Members';
include HEADER;
?>

<?php
$fname  = "";
$lname  = "";
$email1 = "";
$email2 = "";
?>

<p>To create an account with us please fill out the form below</p>

<form action="sendRegister.php" method="get">
    First Name: <input name="new[fname]" type="text"><br>
    Last Name: <input name="new[lname]" type="text"><br>
</form>

Email : <input name="new[email1]" required="" type="email" value="<?php echo $email1;?>"><br>
Re-Enter Email : <input name="new[email2]" required="" type="email" value="<?php echo $email2;?>"><br>
Password: <input name="new[password1]" type="password"><br>
Re-enter password:<input name="new[password2]" type="password"><br>
Gender: <select name="new[gender]">
    <option value="Male">
        Male
    </option>

    <option value="Female">
        Female
    </option>
</select><br>
State of Residence:<select name="new[states]">
    <option value="NY">
        New York
    </option>

    <option value="NJ">
        New Jersey
    </option>
</select><br>
<br>
<?php 
if(isset($email1) != $email2){
echo 'please correct your email';
}
?>
<input type='submit' value='submit'>
</form>
<?php 
include FOOTER;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:18:46.573

如果您想在提交表单**之前**进行检查，则必须使用 javascript 进行。

第二种可能性是：将您提交的表单值作为默认值，例如：

```
<?php
$pass1=$_POST["pass1"];
$pass2=$_POST["pass2"];
if (isset($pass1,$pass2) && $pass1!=$pass2) echo 'Your password confirmation is not equal to your password';
echo '<form ....>';
echo '<input type="text" name="pass1" value="'.$pass1.'">';
echo '<input type="text" name="pass2" value="'.$pass2.'">';
echo '</form>';
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:39:07.317

尝试：

```
if(isset($email1, $email2)) {
  if($email1 != $email2){
    echo "Bad Email"
    ....
  }
} 
```

您也可以使用 javascript 来执行此操作 ( [http://www.w3schools.com/js/js_form_validation.asp](http://www.w3schools.com/js/js_form_validation.asp) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T21:39:51.663

我认为最好为此使用 JavaScript，特别是如果您希望在提交之前对其进行验证，因为（afaik）PHP 必须在提交时进行检查，而您可以使用 JavaScript 在单击提交按钮时进行检查，具体取决于验证的结果进行。

看看：[W3Schools JS 表单验证](http://www.w3schools.com/js/js_form_validation.asp)

# django - Django 管理站点——在更改页面上将 ForeignKey 项目列为更改列表

> ID：15045992
> 
> 赞同：2
> 
> 时间：2013-02-23T21:35:18.937
> 
> 标签：django, django-models, django-admin, changelist

在我的项目（玩具版）中，有拥有任意数量对象的所有者。我的`models.py`文件看起来像

```
class Owner(models.Model)
    name = models.CharField(max_length=50)
    date_of_birth = models.DateField()

class Object(models.Model)
    name = models.CharField(max_length=50)
    price = models.models.DecimalField(max_digits=9, decimal_places=2)
    owner = models.ForeignKey(Owner) 
```

我的问题与管理站点上所有者的更改页面有关，例如

```
http://mysite.com/admin/myapp/owner/1/. 
```

现在我知道，如果我注册`Object`为 a`TabularInline`或 a `StackedInline`，那么我会得到这个所有者拥有的对象的可编辑列表。然而，在我的项目的真实版本中，an`Object`有 25 个字段，而不是 2 个，因此从美学角度来看，这些选项都不是真正可取的。

相反，我真正想要的是在所有者的更改页面上显示所有者拥有的所有对象的更改列表。（这样我得到了所有所有者对象的一个​​很好的紧凑列表，如果我需要编辑一个的详细信息，我可以单击它的链接并在它自己的页面中编辑它。）基本上我想要的内容

```
http://mysite.com/admin/myapp/object/?owner__id__exact=1 
```

出现在

```
http://mysite.com/admin/myapp/owner/1/. 
```

有没有办法做到这一点？

PS：我使用的是 Django 1.4 和 Python 2.7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T10:12:11.590

[您可以使用这些属性](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#inlinemodeladmin-options)在每个 InlineModelAdmin 中定义要使用的表单类和/或字段，并以此方式限制每个对象的输入字段数量。

# c# - XAML 全球化使用组合框中的资源

> ID：15045994
> 
> 赞同：4
> 
> 时间：2013-02-23T21:35:23.647
> 
> 标签：c#, xaml, windows-8, localization, winrt-xaml

我正在[全球化](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh965329.aspx)我的 WinRT 应用程序，但我无法在我的组合框中使用语言资源。我可以使用**Text**属性在我的 TextBlocks 中使用它，但不能使用**x:string**。我究竟做错了什么？

```
TextBlock x:Uid="Priority" Text="Default"></TextBlock>
<ComboBox>
     <x:String x:Uid="Color">Default1</x:String>
     <x:String x:Uid="Color.Text">Default2</x:String>
</ComboBox> 
```

**编辑**

为什么我不能在 XAML 代码中使用资源字符串填充 ComboBox 元素？我知道我可以在 ComboBox 中添加 TextBlock 元素以使用字典，或者就像我现在所做的那样，通过代码加载它们，但这不是对我问题的回应。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T18:06:38.423

据我所知，当您在 xaml 中使用时，它是一个编译时间常量，它无法在运行时更改并绑定到资源。这就是为什么您可能会在组合框中将 Default1 或 Default2 视为项目的原因。

我能够找到解决您问题的方法。

这个想法是在组合框中您应该使用 ComboBoxItem 并将 x:Uid 设置为资源的值。但在资源文件中，实际名称应该是 Name.Content，因为 ComboBoxItem 默认包含 ContentPresenter 而不是 TextBlock。

所以这是对我有用的代码：在资源文件中我有：

```
Combo.Content        ComboBox1 
```

在我使用的 Xaml 中：

```
<ComboBox>
   <ComboBoxItem x:Uid="Combo" />
</ComboBox> 
```

这将使用项目“ComboBox1”（来自资源文件）填充 ComboBox。

我没有对此进行测试以查看它是否适用于不同语言的资源文件，但我看不出它为什么不能工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T15:31:22.053

我会怀疑（但没有在文档中找到具体的声明），resource.resw 中的条目需要是对象的（依赖关系？）属性才能使自动资源绑定起作用。字符串没有这样的属性；例如，`Default1`不是 的值。`String.Content`

阻力最小的路径是为您的 ComboBox 元素使用 TextBlock。或者，您可以在代码中加载资源并以这种方式将其分配给字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T11:53:56.790

是否有任何东西阻止您对 ComboBox 的 ItemsSource 使用绑定？这样，您可以使用包含所需信息的自定义对象以及`DisplayName`属性，然后可以从 .resx 文件中获取正确的资源字符串。

如果这根本不是一个选项，我现在不确定完全在 XAML 中完成整个事情的解决方案是什么。

# java - 给定一串单词，你能构造一个wordladder吗

> ID：15045995
> 
> 赞同：-3
> 
> 时间：2013-02-23T21:35:26.513
> 
> 标签：java, recursion

我得到了一个起始词、一个目标词和一个允许使用的词的字符串数组。我应该使用递归来返回是否可以使用给定字符串数组中的至少一个单词在第一个单词和最后一个单词之间构造一个单词阶梯。

递归对我来说非常具有挑战性，所以对于如何解决这个问题，我真的很迷茫/困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T21:43:27.287

递归在于从自身内部调用一个函数。您始终需要指定退出条件（否则您将获得堆栈溢出）。其余的取决于您的需求：

```
class Myclass {
    public static int doSomething(int a) {
        if (a < 10) {
             doSomething(a + 1);
        }
    }

    public static void main(String [] args) {
        System.out.printl(Myclass.doSomething(0));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:44:19.460

对于每个单词，将其链接到所有可能的同级列表。然后开始构建所有可能的梯子树......从第一个开始。如果您达到目标，则返回两者之间的路径。您可以在导航树时使用递归。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T21:56:31.983

@user2103249 说了什么。对于这样的事情，您的递归例程可能应该返回成功的路径。一些东西的顺序：

```
public String[] canFindPath(String[] pathSoFar) {
    for (characters in last word of pathSoFar) {
        for (all possible modifications of the character) {
            if (modifying the character produces a word in the word list but not already in pathSoFar) {
                Create new pathSoFar copy, with the one additional word;
                if (additionalWord == goalWord) {
                    return newPathSoFar;
                }
                String[] result = canFindPath(newPathSofar);
                if (result != null) return result;
             }
         }
     }
     return null;
} 
```

尽管有十几种不同的方法。

最初在单词列表中构建从 wordA 到 wordB 的可能转换映射会加快速度，因为您可以快速索引所有可能性，而不必在每个步骤中搜索每个可能性。