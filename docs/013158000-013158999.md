# StackOverflow 问答 13158000-13158999

# python - 如果在名册上，Django / Userena 允许注册

> ID：13158004
> 
> 赞同：0
> 
> 时间：2012-10-31T12:30:33.010
> 
> 标签：python, django

我想知道解决这个问题的最佳方法。我使用 Userena 作为我的项目的基础。我想将团队花名册加载到数据库或保留花名册的文本文件，在用户注册之前，网站应检查用户是否在花名册上。如果没有，那么他们将无法注册。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:56:20.380

在 userena.forms 中是 SignupForm。我将扩展表单验证中正在实施的三种干净方法之一。它们是 clean_username、clean_email 和 clean。

例如，下面是 clean_email 方法。它已经检查电子邮件是否已在使用中。我会维护一个包含有效电子邮件的名册表。因此，您可以添加另一层检查。我会把它放在第一个下面。

```
def clean_email(self):
    """ Validate that the e-mail address is unique. """
    if User.objects.filter(email__iexact=self.cleaned_data['email']):
        raise forms.ValidationError(_('This email is already in use. Please supply a different email.'))
    return self.cleaned_data['email'] 
```

与检查电子邮件是否被其他用户使用相比。对于名册，如果在名册表中找不到它，我们将引发错误。

```
def clean_email(self):
    """ Validate that the e-mail address is unique. """
    if User.objects.filter(email__iexact=self.cleaned_data['email']):
        raise forms.ValidationError(_('This email is already in use. Please supply a different email.'))
    if not Roster.objects.filter(email__iexact=self.cleaned_data['email']):
        raise forms.ValidationError(_('You are not able to signup as you are not part of the Roster.'))
    return self.cleaned_data['email'] 
```

注意：请务必将您的名册模型导入到您添加检查的任何位置。

# batch-file - 将文件从一个目录移动并将日期附加到文件名到另一个目录

> ID：13158009
> 
> 赞同：0
> 
> 时间：2012-10-31T12:30:46.630
> 
> 标签：batch-file

我有一个批处理脚本如下

```
move /Y E:\Scripts\*.sql E:\Scripts\OBIEE 
```

假设在 E:\Scripts 我有一个文件 insert.sql 我想将它保存在 E:\Scripts\OBIEE 作为 insert_31102012.sql 其中 31102012 是当前日期 2012 年 10 月 31 日。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:48:18.247

这会将日期 (_YYYYMMDD) 附加到 E:\Scripts\ 目录中的所有 .SQL 文件，然后将它们移动到 E:\Scripts\OBIEE\ 子文件夹。

```
@echo off
cd E:\Scripts\
set cur_yyyy=%date:~10,4%
set cur_mm=%date:~4,2%
set cur_dd=%date:~7,2%
for /f %%f in ('dir /b *.sql') do (
rename %%f %%~nf_%cur_yyyy%%cur_mm%%cur_dd%%%~xf
move %%~nf_%cur_yyyy%%cur_mm%%cur_dd%%%~xf ./OBIEE/
) 
```

# asp.net - 从浏览器访问相机而不使用闪光灯/silverlight

> ID：13158016
> 
> 赞同：-2
> 
> 时间：2012-10-31T12:31:07.240
> 
> 标签：asp.net, html, ipad

我想从浏览器访问相机。我在[XARG](http://www.xarg.org/project/jquery-webcam-plugin/)找到了一个很好的解决方案，但这是使用闪存，因此不符合我的要求（在 iPad 中不起作用）。现在我想知道，是否有任何其他方式可以在不使用闪光灯/银光的情况下访问相机。

我也在考虑 getusermedia(HTML5) 但它的浏览器支持很差。

另一种选择可能是 phonegap，但我不确定如何使用它，我也没有任何使用 phonegap 的实时示例的链接。

我愿意接受所有适用于 iPad 浏览器的选项。我正在使用 ASP.NET 和 HTML5。任何指针的赞赏。谢谢。

拉维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:04:36.550

*浏览器*中的相机支持目前只能通过以下两种方式之一获得：

1.  使用 Flash 播放器
2.  使用 HTML 标准 = getUserMedia()

每个都有其优点，但正如您所提到的，并非所有浏览器都普遍支持，而且我认为 iPad 也不支持（注意：BlackBerry 10 同时支持 Flash 和 getUserMedia）：

[http://html5test.com/compare/browser/bb10/ios60/android40.html](http://html5test.com/compare/browser/bb10/ios60/android40.html)

如果你想使用像 PhoneGap 这样的独立框架，这里是相机 API 文档的链接：

[http://docs.phonegap.com/en/2.1.0/cordova_camera_camera.md.html#Camera](http://docs.phonegap.com/en/2.1.0/cordova_camera_camera.md.html#Camera)

# javascript - 电池高效的定期数据提交

> ID：13158018
> 
> 赞同：5
> 
> 时间：2012-10-31T12:31:13.090
> 
> 标签：javascript, http, websocket, battery

我有一个要在手机上运行的 Web 应用程序，当它打开时会连续生成数据（根据设置，每隔几秒或每隔几分钟生成几千字节），并且需要将其实时推送到服务器。从来没有数据从服务器发送到浏览器。

我主要关心的是让这个提交**电池高效**，延迟几秒钟是完全可以的。

我设想了两种解决方案：

1.  定期使用数据对服务器进行**POST**（以避免需要维护永久连接）
2.  有一个打开的**websocket**并定期发送消息（以避免 http 请求的重量）

哪一种对电池最有效？我还缺少其他策略吗？

* * *

实际上我的应用程序将托管在[不支持 websockets](https://devcenter.heroku.com/articles/using-socket-io-with-node-js-on-heroku)的 heroku 上，导致长时间轮询，因此目前我认为按需发布更好，但我想知道它是否可以成为未来的选择（或者这个假设可能是错误的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:37:27.200

## 安卓

[如文档所述](https://developer.android.com/training/efficient-downloads/efficient-network-access.html)，在 Android 设备上，存在三种不同的网络无线电状态：

> 典型 3G 网络无线电的状态机由三种能量状态组成：
> 
> 1.  **全功率**：在连接处于活动状态时使用，允许设备以尽可能高的速率传输数据。
>     
>     
> 2.  **低功耗**：一种中间状态，在完全状态下使用大约 50% 的电池电量。
>     
>     
> 3.  **待机**：没有网络连接处于活动状态或不需要网络连接的最低能量状态。
>     
>     
> 
> 虽然低状态和空闲状态消耗的电量显着减少，但它们也会给网络请求带来显着的延迟。从低状态恢复到全功率大约需要 1.5 秒，而从空闲到全功率可能需要 2 秒以上。

设备在 5 秒的空闲时间后从 Full 变为 Low，然后再过 12 秒后从 Low 变为 Standby。

上面的链接还涵盖了一些电池友好连接的最佳实践，尽管它没有具体说明 Websockets。

## iOS

我在 iOS 设备上找不到这样的特定文档，但该模型[似乎以类似的方式应用](https://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/PerformanceTuning/PerformanceTuning.html)：

> 蜂窝和 Wi-Fi 无线电设计为在没有活动时关闭。但是，根据收音机的不同，这样做可能需要几秒钟。如果您的应用程序每隔几秒钟传输一次小数据突发，那么无线电可能会保持通电并继续消耗电力，即使它们实际上并没有做任何事情。与其更频繁地传输少量数据，不如一次或以相对较大的间隔传输大量数据。

## 所以呢？

一般来说，您应该使用较短的 POST 请求并尽可能少地发送数据，以便无线电可以在这两者之间关闭。

# python - 在 python 中找不到 hbase 模块 - 如何导入？

> ID：13158019
> 
> 赞同：1
> 
> 时间：2012-10-31T12:31:13.387
> 
> 标签：python, hadoop, hbase

我已经用[这个教程](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/)安装了hadoop ，用这个安装了[hbase，用](http://ria101.wordpress.com/2010/01/28/setup-hbase-in-pseudo-distributed-mode-and-connect-java-client/)这个安装[`hbase.thrift`了](http://whynosql.com/using-thrift-python-client-with-hbase/)

现在我有一个给定的 python 脚本，用于创建一些 hbase 表。当我运行 py 文件时，它给了我错误：

```
Traceback (most recent call last):
  File "./createTables.py", line 9, in <module>
    from hbase import Hbase
ImportError: No module named hbase 
```

这个问题似乎有同样的麻烦：[How can I import hbase in python?](https://stackoverflow.com/questions/9281742/how-can-i-import-hbase-in-python)

我尝试了那里给出的解决方案。我跑了

```
thrift --gen py Hbase.thrift 
```

在`/usr/lib/hbase-0.94.2/src/main/resources/org/apache/hadoop/hbase/thrift`文件夹中，它所在的`Hbase.thrift`位置。Ot 创建了子文件夹`gen-py`，如上述类似问题中链接的教程中所述。

现在，如果我得到“只需执行该命令并将其复制到您的默认模块文件夹（或在您运行程序的文件夹中，它应该可以工作）。” 作为给定解决方案的一部分，我转到给定 py 文件所在的文件夹（例如`/home/kumo/Downloads/createTables.py`）并运行

```
thrift --gen py /usr/lib/hbase-0.94.2/src/main/resources/org/apache/hadoop/hbase/thrift/Hbase.thrift 
```

...？但没有任何事情发生。将 Hbase.thrift 文件复制到 py 文件旁边的 Downloads 文件夹中，仅给出

```
[FAILURE:arguments:1] Could not open input file with realpath: ./Hbase.thrift 
```

所以显然也没有帮助。

我也尝试添加

```
import sys
sys.path.append('/usr/lib/hbase-0.94.2/src/main/resources/org/apache/hadoop/hbase/thrift/gen-py') 
```

再次给出相同的初始缺失模块错误。

我还尝试添加 5.c。通过在 .bashrc 中添加 python 路径来完成节俭教程的步骤：

```
export PYTHONPATH=$PYTHONPATH:/usr/lib/hbase-0.94.2/src/main/resources/org/apache/hadoop/hbase/thrift/gen-py 
```

并没有真正起作用。

我对 path 感到厌烦`/usr/local/hadoop/src/contrib/thriftfs/gen-py`，因为那是另一个以某种方式弹出的 gen-py 文件夹，既作为 sys 导入又作为 pythonpath 导出，但它仍然给我同样的错误。

我对这一切还是新手，所以我只是一步一步地按照教程。我不知道我可能错过了什么或不在教程中。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T19:24:39.607

不确定您的情况到底是什么问题，但我对[HappyBase](https://github.com/wbolster/happybase)感到非常满意- 您可能想尝试一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T12:29:29.890

解决方案似乎是 python 文件夹中指向生成的 gen-py 文件夹的链接。我将解压缩的 hbase 文件夹移动到家中自己的“软件”文件夹中，然后创建了链接：

```
cd /usr/local/lib/python2.7/dist-packages/
ln -s /home/kumo/software/hbase-0.94.2/src/main/resources/org/apache/hadoop/hbase/thrift/gen-py/hbase/ 
```

这个错误一切都很好。不确定，通过多个项目会发生什么。

# c# - 通过 asp.net 发送邮件抛出异常

> ID：13158022
> 
> 赞同：-1
> 
> 时间：2012-10-31T12:31:26.257
> 
> 标签：c#, asp.net, email, smtp, smtpclient

我在 asp.net 中编写了此代码用于发送电子邮件：

```
MailMessage mailObject = new MailMessage("a@b.com(I use fake email, exactly this email)", "info@mydomain.com", "contact us", "Test message");
SmtpClient smtpC = new SmtpClient("my smtp server name");
smtpC.Send(mailObject); 
```

但我收到了这个例外：

> System.Net.Sockets.SocketException：连接尝试失败，因为连接方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应

我也无法通过 tel net 连接到我的“smpt 服务器名称”：

> telnet SMTPServerName 25 Connecting To SMTPServerName...无法在端口 25 上打开与主机的连接：连接失败

有什么标准可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:34:49.987

服务器名称或端口很可能不正确。在您的代码中进一步排除故障之前，请确保您可以从 SMTP 客户端发送。

# cloud - cloudshare.com网站背后的概念是什么

> ID：13158025
> 
> 赞同：0
> 
> 时间：2012-10-31T12:31:28.957
> 
> 标签：cloud, virtual, cloud-hosting

我正在使用[cloudshare](http://cloudshare.com)来练习 sharepoint。真的很神奇。环境将在几秒钟内创建。他们是怎么做到的。这背后隐藏着什么概念。近 1000 名用户将使用 cloudshare 虚拟环境。他们如何提供如此美妙的环境？他们说一切都是云，这意味着它依赖于像 azure 这样的云技术？谁能告诉我它是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-14T23:41:04.710

该服务耗尽了 Terremark 的美国数据中心旗舰 NAP，即 Tier IV 设施。它现在也在亚太地区和欧洲、中东和非洲的数据中心上运行。

Azure 也是一项了不起的服务，但目前在一些不同的规范上还不够成熟。例如，“对于系统还原点之类的东西，确实没有 Azure 特定的机制，因为它在操作系统本身内。” 请参阅 serverfault 链接：[https](https://serverfault.com/questions/531673/how-do-i-backup-a-windows-azure-virtual-machine) ://serverfault.com/questions/531673/how-do-i-backup-a-windows-azure-virtual-machine 。

我也在 CloudShare 工作，很乐意回答任何问题。联系我@alex@cloudshare.com

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-01T04:28:26.050

全面披露：我来自 CloudShare。我是 7 个月前加入公司的，我也问过同样的问题。我今天可以告诉您，该解决方案是从第一天开始构建的，期望我们的用户具备零 IT 基础架构知识。

# objective-c - 在iOS程序中比较char数组和字符串

> ID：13158027
> 
> 赞同：0
> 
> 时间：2012-10-31T12:31:37.377
> 
> 标签：objective-c, ios, xcode

> **可能重复：**
> [如何比较 char* 和 NSString？](https://stackoverflow.com/questions/8065537/how-to-compare-char-and-nsstring)

如果我有：

```
char XYZ[256]=""; 
```

如何在 iOS Objective-C 程序中将此 char 数组与另一个字符串（例如“testing”）进行比较？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:39:37.580

使用[strcmp](http://developer.apple.com/library/Mac/#documentation/Darwin/Reference/ManPages/man3/strcmp.3.html)

```
char XYZ[256] = "";
char *string = "some other string";

int order = strcmp(XYZ, string); 
```

> **返回值**
> strcmp() 和 strncmp() 函数根据字符串 s1 大于、等于或小于字符串 s2 返回一个大于、等于或小于 0 的整数。比较是使用无符号字符完成的，因此`\200' is greater than`\0'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:43:18.153

您还可以将它们转换为 NSString，这会产生很多开销，但会将您的字符串带到 Objective-C 对象：

```
char XYZ[256] = "";
NSString *s = [[NSString alloc] initWithBytes:XYZ length:strlen(XYZ) encoding:[NSString defaultCStringEncoding]];
NSString *testing = @"testing";
if ([testing compare:s] == NSOrderedSame) {
    NSLog(@"They are hte same!");
} 
```

请注意，这`strcmp`要快得多！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:43:57.560

仅仅因为它是 iOS 并不意味着您不能“#include”string.h 并使用“strcmp”（现在如上所述）。

另一种方法是创建一个新的 NSString 并使用可比较的 iOS Objective-C 调用对其进行比较：

```
NSString myString = [NSString stringWithCString:XYZ encodingNSASCIIStringEncoding];

if(YES == [myString isEqualToString:@"testing"]){
    // Perform Code if the strings are equal
}else{
    // Perform Code if the strings are NOT equal
} 
```

# android - 如何自动启用网络位置提供程序

> ID：13158028
> 
> 赞同：5
> 
> 时间：2012-10-31T12:31:36.350
> 
> 标签：android

我正在通过网络获取纬度和经度

它给了我纬度和经度，但是如果我`NETWORK LOCATION PROVIDER`的未检查怎么办

它永远不会为我提供当前位置的纬度和经度。

我想要的是，如何`NETWORK LOCATION PROVIDER`在不知道用户打开它的情况下启用手机，

我怎样才能做到这一点？

我试过的是：

```
Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
startActivityForResult(intent, 1);

But this will open the page in my phone to check it  i want to check AUTOMATICALLY          

Intent intent = new Intent(Intent.ACTION_MAIN);
intent.setClassName("com.android.phone", "com.android.phone.Settings");
startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T12:44:37.343

如前所述，不可能自动启用网络提供商位置。正确的方法是显示一个框并将用户重定向到设置页面。[您可以通过使用此处](https://stackoverflow.com/questions/4721449/enable-gps-programatically-like-tasker)提到的小技巧来启用 GPS 。我仍然不建议这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T12:38:05.980

无法自动启用它。网络设置只能由用户手动启用。您可以向用户显示消息以启用他的网络。

您可以打开定位服务页面来启用它。通过程序化，不可能。

# java - 诊断间歇性连接超时？

> ID：13158040
> 
> 赞同：4
> 
> 时间：2012-10-31T12:32:10.830
> 
> 标签：java, tomcat, networking, timeout

我有一个 java 客户端，它调用一个线程来访问一个 servlet，并从服务器上的日志中检索最后几行，并在客户端上显示检索到的日志行。每隔一段时间，日志线程就会超时。应用程序服务器是 Tomcat，但该错误在 Tomcat 和 Websphere 中间歇性地重现，客户端在 Windows 上，服务器在 Windows 上。使用 Windows 上的客户端和 AIX 上的服务器，到目前为止还没有出现此问题。我必须提到，代码在很多次迭代中都是稳定的，然后突然开始出现这些问题。

到目前为止我尝试过的

1.  日志读取客户端每 0.1 秒调用一次线程（使用睡眠）。我尝试在代码中将睡眠时间增加到 5 秒，但没有帮助。

2.  创建 URLConnection 对象时，我设置了 connectTimeout 和 readTimeout 等属性。我不认为 readTimeout 可能是一个原因，因为那会引发 Socket 异常。

3 我尝试使用 Tomcat 配置。

```
Connector port="9962" protocol="HTTP/1.1" connectionTimeout="200000" redirectPort="8445" acceptCount="30" 
```

4\. 使用后 url 连接“断开”。

5 堆栈跟踪似乎暗示请求从未到达应用程序服务器，这可能是因为某些操作系统层对连接的限制。但在这种情况下，Windows 的事件查看器中会有一个条目。

```
 java.net.ConnectException: Connection timed out: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(Unknown Source)
    at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at sun.net.NetworkClient.doConnect(Unknown Source)
    at sun.net.www.http.HttpClient.openServer(Unknown Source)
    at sun.net.www.http.HttpClient.openServer(Unknown Source)
    at sun.net.www.http.HttpClient.<init>(Unknown Source)
    at sun.net.www.http.HttpClient.New(Unknown Source)
    at sun.net.www.http.HttpClient.New(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.connect(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(Unknown Source) 
```

你将如何诊断这个问题？服务器日志没有显示任何可疑内容。据我所知，客户端和服务器没有任何其他网络设备，因此不需要代理，并且防火墙已关闭。到目前为止，我还没有使用过保持活力。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T13:11:40.280

很难预测是什么原因造成的。但是，您的下一步应该是尝试在客户端和/或服务器上运行数据包嗅探器，以查看 TCP 连接请求是否正在发送到 Windows 机器。

如果问题同时出现在 Tomcat 和 Websphere 中，则意味着原因处于较低级别；即在操作系统 TCP/IP 堆栈、防火墙……或网络中。（如果服务器在虚拟环境中运行，它可能会在虚拟网络中退出。）

# cakephp - CakePHP 漂亮的 URL 路由仅在生产服务器上不起作用

> ID：13158041
> 
> 赞同：0
> 
> 时间：2012-10-31T12:32:18.223
> 
> 标签：cakephp

我正在尝试在我的 routes.php 文件中使用以下内容：

```
Router::connect(
    "/:slug/:controller/:action/:id", 
    array('controller' => ":controller", 'action' => ':action'),
    array('id'=>'[0-9]','pass'=>array('id'))
); 
```

这在我的测试服务器上运行良好，但是一旦我上传到我的生产服务器，我就会收到“找不到控制器”错误，这意味着 CakePHP 正在尝试使用错误的路由。

通常我会认为这是某处服务器上的错误配置，但我在同一台服务器上运行其他 cakephp 站点，并且漂亮的 URL 路由工作绝对正常。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:59:30.860

我认为您还需要为 slug 指定正则表达式条件....

# iphone - iOS 6 iphone 问题中的设备方向

> ID：13158042
> 
> 赞同：0
> 
> 时间：2012-10-31T12:32:22.077
> 
> 标签：iphone, objective-c

您好我有一个基于标签栏的应用程序。当我单击第三个选项卡时，打开的视图有一个 tableview ( `AggregateMediaViewController`)。在 didSelect 的行中，我使用`MPMoviePlayerViewController`. 每当设备的方向发生变化时，我都想设置此视频的方向。我创建了一个`UITabbarController`名为的子类`OrientationTabBarController`：

```
@implementation OrientationTabBarControllerViewController
- (BOOL)shouldAutorotate {
    NSLog(@"in shouldAutorotate tabbar is %@", self.viewControllers);

    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
} 
```

在appDidFifnishLaunching: [window setRootViewController:tabBarController]; 其中 tabBarController 是 OrientationTabBarController 的子类。

在 AggregateMediaViewController 中，我有以下代码：

```
- (BOOL)shouldAutorotate
{
    NSLog(@"in shouldAutorotate of media");
    return YES;
}

-(NSInteger)supportedInterfaceOrientations {    
    return (UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight | UIInterfaceOrientationMaskPortraitUpsideDown);
} 
```

但是当我运行应用程序时，方向不起作用:(请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:51:25.380

您需要继承父控制器并添加`UIViewController`. 在您的情况下，它是 UITabBarController。并在 appDelegate 中将其设置为 rootViewController：

```
[self.window setRootViewController:_myTabBarController]; 
```

# android - 更改 android 手机方向会导致 div 消失

> ID：13158044
> 
> 赞同：3
> 
> 时间：2012-10-31T12:32:25.510
> 
> 标签：android, html, css, android-layout

我有[一个简单的网页](http://yaddahost.co.uk/blvdmock2/)`position:fixed`，左侧有一个内容部分和一个菜单。

当我在`Android`手机上查看它并将方向更改为横向时，菜单会消失。当您将手机转回纵向时，它会重新出现。

这个问题似乎只出现在更高版本的`Android`- 它在我的旧版本上运行良好，`(v2.2) Android`并且页面在`iOS`.

编辑：我不确定某人添加的 Android 标签是否真的合适。这是在 Android 网络浏览器中查看时网页的 CSS 问题...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:46:09.327

你试过设置视口吗？

像这样的元标记：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:35:44.673

您是否尝试过检查 CSS 中的媒体查询？这将是我的第一个猜测。

像这样的东西：

```
@media only screen and (max-width:320px) and (max-height:480px){
    .element_name{
        display: none;
    }
} 
```

# asp.net - 在 log4net 中公开 HttpContext

> ID：13158047
> 
> 赞同：1
> 
> 时间：2012-10-31T12:32:27.927
> 
> 标签：asp.net, logging, log4net

我有一个 ASP.NET 网站，我正在使用 log4net 进行日志记录。由于日志记录要求经常变化，我希望 PM 能够修改记录的信息，并能够记录额外的信息以在生产中进行调试（即无需重新编译）

我的计划是向 log4net 公开某些值，例如上下文中的 GET / POST 参数。要记录这样的参数，用户只需转到 log4net 配置并执行 %message{userId} 之类的操作

我找到了一种使用 log4net.ThreadContext 上的属性包的方法，但我不确定这是否没有副作用，即这些值保留了太长时间。

另一种方法是使用转发附加器，并在记录器被调用时注入额外的值，但我无法实现这一点，没有足够的例子。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:40:11.790

你应该看看 log4net 中的 NDC（嵌套诊断上下文）。这将为您提供添加信息记录消息的可能性，例如设置堆栈：

```
using(log4net.NDC.Push("My extra info")){

} 
```

NDC 范围内的所有日志消息都将具有可用的 inner_context（模式布局格式）：

```
[%ndc] - %message%newline 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T16:47:47.470

看看我对[这个问题的](https://stackoverflow.com/questions/4813242/capture-username-with-log4net)[回答](https://stackoverflow.com/a/4819145/125439)。链接的问题和答案专门关于将用户名从 HttpContext.Current.User 添加到日志文件，但制作一个更通用的解决方案应该很容易满足您的需求。

它可能会为您提供一些关于如何将 HttpContext 中的信息合并到 log4net 日志记录中的想法。该线程中还有其他好主意。

# android - 发布 apk 中的“未知来源”

> ID：13158048
> 
> 赞同：2
> 
> 时间：2012-10-31T12:32:29.457
> 
> 标签：android, apk

我的调试 APK 中的所有内容都运行良好。但是，当我导出我的 APK 并安装它时，一切正常，直到我调用引用的库。

```
E/AndroidRuntime(32571):    at com.znood.znoodapp.ShowResultsActivity.a (Unknown Source) 
```

我正在使用 ProGuard。

我的库位于 libs 目录中，并被添加到构建路径中。

任何指针都非常感谢=）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T16:24:42.737

问题出在 Google Gson 库上。Proguard 将类名转换为混淆的类名，从而呈现 json 转换错误。

为了解决这个问题，请确保在您的 proguard-project.txt 中有以下内容

```
# the classes that you use for Gson conversion
-keep class com.yourapp.objects.** { *; }

# without this line, I was having ClassCastException
-keepattributes Signature, *Annotation* 
```

我希望这可以帮助某人=）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:45:16.803

如果你还没有定义你的库，`proguard-project.txt`那么你可以像这样添加

> -libraryjars /libs/smack.jar
> -libraryjars /libs/libphonenumber-5.0v1.5.jar

[使用 proguard 的 Android 混淆应用程序会不断混淆库 jar - 是吗？](https://stackoverflow.com/questions/6542631/android-obfuscate-app-using-proguard-keeps-obfuscating-library-jars-or-is-it)

# android - 使用 json 的泰卢固语文本

> ID：13158052
> 
> 赞同：1
> 
> 时间：2012-10-31T12:32:46.677
> 
> 标签：android, json, translation, android-fonts

是否可以从服务器检索用泰卢固语编写的文本以用于应用程序。我对 Json 使用了以下格式。它在 avd 的 logcat 中给我一些符号错误。如果不是，那将适合获取此类文本。

```
{
"contacts": [
    {
            "id": "c200",
            "name": "అశ్విని",
            "email": "అశ్విని@అశ్విని.అశ్విని",
            "address": "అశ్విని",
            "gender" : "అశ్విని",
            "phone": {
                "mobile": "అశ్విని",
                "home": "అశ్విని",
                "office": " రేవతి"
            }
    },
    {
            "id": "c201",
            "name": "అశ్విని ram",
            "email": "అశ్విని@అశ్విని.అశ్విని",
            "address": "అశ్విని",
            "gender" : "అశ్విని",
            "phone": {
                "mobile": "అశ్విని",
                "home": "అశ్విని",
                "office": "అశ్విని"
            }
    }
]
} 
```

以下是我用来检索数据的代码

```
public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

public JSONObject getJSONFromUrl(String url) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:26:10.077

You need to use NTR.TTF font in the assets folder and should change the line below

```
BufferedReader reader = new BufferedReader(new InputStreamReader(is, "UTF-8"), 8000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:57:56.383

JSON 内容使用 UTF-8 作为默认字符集（参见 RFC 4627，第 3 章）。您必须确保服务器返回具有正确编码的响应，并为流阅读器显式使用 UTF-8 编码：

```
BufferedReader r = new BufferedReader(new InputStreamReader(instream, "UTF-8"), 8000); 
```

# javascript - 将 ddsmoothmenu 子菜单侧更改为左侧

> ID：13158053
> 
> 赞同：1
> 
> 时间：2012-10-31T12:32:55.150
> 
> 标签：javascript, css, wordpress, drop-down-menu

我希望我的网站显示 ddsmoothmenu 菜单的子菜单以向左而不是向右打开。

我该怎么办？

在我的网站顶部查看：[http ://cor.co.il](http://cor.co.il)

（在希伯来语中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:44:48.843

如果您不想编辑 JS 文件（好像您正在使用连接到 Wordpress 的插件），您可以将其添加到您的 css 文件（layout.css 第 111 行）：

```
header #top-menu ul li ul {
     left: auto!important;
     right: 0;
} 
```

# android - 通过蓝牙连接安卓手机和笔记本电脑

> ID：13158059
> 
> 赞同：4
> 
> 时间：2012-10-31T12:33:03.977
> 
> 标签：android, bluetooth, connection

我开始在我的应用程序中使用蓝牙，并希望能够通过此连接将数据从我的手机发送到我的笔记本电脑。我必须使用蓝牙，因为我最终会将这些数据直接从我的手机发送到只能通过蓝牙访问的机器人。不幸的是，我无法连接我的笔记本电脑和手机。我的手机显示它与我的笔记本电脑配对，但我的笔记本电脑显示没有连接。我的手机确实出现在我的笔记本电脑上，但是当我告诉它连接到它时，我收到了这个错误：“连接已被 PAN 服务器 [Nexus S] 拒绝。非常感谢任何关于我可以做些什么来解决这个问题的输入。我的手机运行的是 ICS 4.1.1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:36:09.237

我建议您在您的 Android 手机上安装一个自定义 Serial Port over Bluetooth 应用程序，并让它尝试连接到您的笔记本电脑。[那里有很多免费的应用程序](https://play.google.com/store/search?q=serial%20port%20profile&c=apps)。

您没有连接到笔记本电脑，因为手机不知道您要连接的配置文件（蓝牙的一部分）。

蓝牙连接是服务器-客户端连接，可以有多种用途（发送数据、发送音频、控制蓝牙链接等。

最终，您可能会使用[SPP](http://en.wikipedia.org/wiki/Bluetooth_profile#Serial_Port_Profile_.28SPP.29) over [RFCOMM](http://en.wikipedia.org/wiki/RFCOMM#Radio_frequency_communication_.28RFCOMM.29)连接到您的机器人。如果您的笔记本电脑的蓝牙芯片驱动程序和应用程序处理（接受）这种类型的连接，将会有所帮助。如果没有，例如，您可以使用[PyBluez](http://code.google.com/p/pybluez/)制作自己的快速 PC 应用程序。尝试找出答案。

有帮助别忘了投票哦！

# qt4 - Qt - Windows 7 基本主题下禁用 QPushButton 的样式表

> ID：13158062
> 
> 赞同：5
> 
> 时间：2012-10-31T12:33:21.403
> 
> 标签：qt4, qt4.7, qt4.8, qtstylesheets, qpushbutton

我可以使用**StyleSheets更改****QPushButton**的*字体和字体颜色*。问题是在***旧的 Windows 主题下，禁用的按钮显示阴影字体***，但我不知道如何通过 StyleSheets 摆脱这个阴影前面。任何人都可以请提出你的想法。提前致谢。

 ****** * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-01T11:36:16.720

正常状态按钮的样式：

```
QPushButton
{
     color: red;
} 
```

“禁用”状态按钮的样式：

```
QPushButton:!enabled
{
     color:blue;
} 
```

这可能会解决您的问题*****

# apache-flex - Flex SharedObject 显示客户端值

> ID：13158064
> 
> 赞同：2
> 
> 时间：2012-10-31T12:33:31.387
> 
> 标签：apache-flex, shared-objects

我有一个远程 flex SharedObject，我正在尝试（使用 Red5）向所有客户端发送一条消息和一个带有一些用户/发送者数据的对象。

问题是：客户端中显示的值是存储在它们上的值，而不是我的 SO 中的值。

继承人一些代码：

```
protected function btSend_clickHandler(event:MouseEvent):void
{               
    soChat.setProperty("msg",tiMessage.text);
    soChat.setProperty("userVO",modtrackModel.userVO);
    tiMessage.text = "";        

}

private function syncListener(event:SyncEvent):void
{
    for(var i:Object in event.changeList) {
        var changeObj:Object = event.changeList[i];

        switch(changeObj.name) {
            case "msg":                 
               newMessage(event.target.data["userVO"].userName);                                                                                        
               break;

        }
    }
}

public function newMessage( msg:String):void
{           
    Alert.show(msg);
} 
```

所以问题是，如果我在浏览器 A 中登录为 Ricardo，在浏览器 B 中登录为 Rodrigo，则警报显示浏览器 A 中的 Ricardo 和浏览器 B 中的 Rodrigo ......它不应该，对吗？它应该显示我的 SO 中设置的最后一个值，对吗？

Ty 寻求任何帮助，并为我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:44:05.923

您在此处定义 msg 值：

```
newMessage(event.target.data["userVO"].userName); 
```

哪个正在将用户名信息显示在警报中。您应该将其更改为要显示的值。

# asp.net - 根据声明允许或拒绝访问整个站点

> ID：13158066
> 
> 赞同：2
> 
> 时间：2012-10-31T12:33:37.677
> 
> 标签：asp.net, wif, claims-based-identity, fubumvc

我有一个 FubuMvc 网站，它使用来自 WIF 单点登录服务器的基于声明的授权。身份验证发生在 SSO 上，包括角色和一组自定义声明在内的声明被传递到网站进行授权。

SSO 和网站与基于角色的授权一样工作正常，但我想要做的是拒绝访问整个站点，并根据缺少自定义声明保存错误页面。目前，我正在使用一种习惯[`ClaimsAuthenticationManager`](http://msdn.microsoft.com/en-us/library/microsoft.identitymodel.claims.claimsauthenticationmanager.aspx)来检查索赔并检查是否存在所需的索赔。如果缺少声明，则会引发异常。这会导致 500 错误，但我真正想要的是系统抛出 401 错误并重定向到网站上的未授权页面。

以下是自定义的示例`ClaimsAuthenticationManager`。

```
public class CustomAuthenticationManager : ClaimsAuthenticationManager
{
    private readonly string expectedClaim;

    public CustomAuthenticationManager (object config)
    {
        var nodes = config as XmlNodeList;
        foreach (XmlNode node in nodes)
        {
            using (var stringReader = new StringReader(node.OuterXml))
            using (var rdr = new XmlTextReader(stringReader))
            {
                rdr.MoveToContent();
                rdr.Read();
                string claimType = rdr.GetAttribute("claimType");
                if (claimType.CompareTo(ClaimTypes.CustomClaim) != 0)
                {
                    throw new NotSupportedException("Only custom claims are supported");
                }
                expectedSystemName = rdr.GetAttribute("customClaimValue");
            }
        }
    }

    public override IClaimsPrincipal Authenticate(
        string resourceName, IClaimsPrincipal incomingPrincipal)
    {
        var authenticatedIdentities = incomingPrincipal.Identities.Where(x => x.IsAuthenticated);
        if (authenticatedIdentities.Any() &&
                authenticatedIdentities.Where(x => x.IsAuthenticated)
                                       .SelectMany(x => x.Claims)
                                       .Where(x => x.ClaimType == ClaimTypes.CustomClaim)
                                       .All(x => x.Value != expectedClaim))
        {
                throw new HttpException(
                    (int)HttpStatusCode.Unauthorized,
                    "User does not have access to the system");
        }
        return base.Authenticate(resourceName, incomingPrincipal);
    }
} 
```

以上工作并阻止了对系统的访问，但 ti 不是很友好，因为用户只会收到 500 错误。也因为用户本质上是登录的，但他们没有访问权限，他们无法注销。我暴露了一个未经授权的错误页面，它提供对匿名用户的访问，但我还没有办法重定向用户。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T13:49:23.903

我想知道您为什么在身份验证管理器中实现了您的逻辑。

您是否考虑过切换到`ClaimsAuthorizationManager`? 为此，您需要将其添加`ClaimsAuthorizationModule`到您的管道中：

```
 <system.webServer>
    <modules>
        ...
        <add name="SessionAuthenticationModule" ....
        <add name="ClaimsAuthorizationModule" type="Microsoft.IndentityModel.Web.ClaimsAuthorizationModule, Microsoft.IndentityModel.Web" />
    </modules>
 </system.webServer> 
```

然后您创建授权角色的结构：

```
 <claimsAuthorizationManager type="yourtype, yourassembly">
      <requiredClaim claimType="foobar" />
 </claimsAuthorizationManager> 
```

在经理中：

```
public class FederatedClaimsAuthorizationManager : ClaimsAuthorizationManager
{
    private List<string> _requiredClaims = new List<string>();

    public FederatedClaimsAuthorizationManager( object config )
    {
        XmlNodeList nodes = config as XmlNodeList;
        foreach ( XmlNode node in nodes )
        {
            XmlTextReader xtr = new XmlTextReader( new StringReader( node.OuterXml ) );
            xtr.MoveToContent();

            _requiredClaims.Add( xtr.GetAttribute( "claimType" ) );
        }
    }

    public override bool CheckAccess( AuthorizationContext context )
    {
        IClaimsIdentity identity = context.Principal.Identities[0];

        return !identity.IsAuthenticated ||
                identity.Claims.Any( c => _requiredClaims.Any( rq => c.ClaimType == rq ) );
    }
} 
```

这与您的方法之间的区别在于，仅通过重新调用身份验证过程来处理失败的授权 - 没有例外，没有 500s。

例如 - 如果您`<wif:FederatedPassiveSignIn />`在登录页面上使用 ，那么失败的授权只会将用户重定向到登录页面，您可以在其中检查用户是否已通过身份验证并显示消息“您已重定向到登录页面，这可能意味着您尝试过访问您无权访问的资源”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-16T19:25:20.297

除了转换声明的典型案例外，文档还不清楚如何实现 Authenticate。如果您需要根据声明拒绝用户，则只能靠您自己。

我尝试返回 null 并引发各种异常，包括 401（类似于您的示例）。我发现最有效的解决方案是创建并返回一个匿名主体。

```
using System.Security.Principal;

...

public class CustomAuthenticationManager : ClaimsAuthenticationManager
{
    public override IClaimsPrincipal Authenticate(
        string resourceName, 
        IClaimsPrincipal incomingPrincipal)
    {
        ...

        ClaimsIdentity identity = new GenericIdentity(String.Empty);
        return new GenericPrincipal(identity, new string[0] { });
    }
} 
```

您必须传递一个空字符串作为身份名称，以便通用声明身份上的 IsAuthenticated 返回 false。

# sql - 根据用户参数进入循环

> ID：13158067
> 
> 赞同：0
> 
> 时间：2012-10-31T12:33:40.127
> 
> 标签：sql, database, oracle, plsql, plsqldeveloper

有 4 个参数 .material，Suppliernbr，Suppliername，Materail 代码。我的查询是，如果用户在单个参数中输入任何具有单个值的参数，我需要进入循环。

```
For Eg:
P_suppname='stack'
p_matrl='NULL'
p_suppnbr:=NULL
P_mtrlcde='NULL' I can go inside 
```

但如果

```
P_suppname=NULL
p_matrl=211
p_suppnbr:=43443443
P_mtrlcde='NULL' I shouldnt go. 
```

还

```
P_suppname=NULL
p_matrl='211;2322'
p_suppnbr:=NULL
P_mtrlcde='NULL' I should nt go 
```

这个怎么做？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:02:12.380

虽然我无法想象会产生这种要求的接口类型（或两者的有效值`NULL`和`'NULL'`），但这是我处理它的方式：

```
DECLARE 

    cnt NUMBER;

BEGIN

SELECT DECODE(p_suppname, 'NULL',0, DECODE(INSTR(p_suppname,';'),NULL,0,0,1,0)) + 
DECODE(p_matrl, 'NULL', 0, DECODE(INSTR(p_suppname,';'),NULL,0,0,1,0)) + 
DECODE(p_suppnbr, NULL, 0, 1) + 
DECODE(p_mtrlcde, 'NULL', 0, DECODE(INSTR(p_suppname,';'),NULL,0,0,1,0)) into cnt 
from dual;

IF cnt = 1 THEN
    LOOP
        /* do whatever here */
    END LOOP;
END IF;

END; 
```

我假设 p_suppnbr 是一个数字，而所有其他都是字符串。
我还假设任何参数都可以为 NULL，并且字符串 'NULL' 等价于 NULL 值。
（我还隐含地假设任何带有分号的参数至少包含 2 个值）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:10:41.803

计算`;`每个参数中的数量，`nvl`用于对空值计数为零：

```
select 
  nvl( length('211;2322')    - length(replace('211;2322', ';', ''))    +1, 0), -->2
  nvl( length('211;2322;34') - length(replace('211;2322;34', ';', '')) +1, 0), -->3
  nvl( length(Null)          - length(replace(Null, ';', ''))          +1, 0)  -->0
from dual 
```

在一个`IF`条件下使用：

```
IF ( nvl( length(p_suppname) - length(replace(p_suppname, ';', '')) +1, 0)
   + nvl( length(p_matrl)    - length(replace(p_matrl, ';', ''))    +1, 0)
   + nvl( length(p_suppnbr)  - length(replace(p_suppnbr, ';', ''))  +1, 0)
   + nvl( length(p_mtrlcde)  - length(replace(p_mtrlcde, ';', ''))  +1, 0)
) = 1 THEN
  --LOOP
END IF; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T15:48:21.673

对于显而易见的解决方案，有很多话要说。毕竟，大自然给了我们cut'n'paste，而不是使用它？

```
IF NOT ( (P_suppname is NOT NULL and p_matrl is null and p_suppnbr is NULL and P_mtrlcde is NULL )
    or  (P_suppname is NULL and p_matrl is NOT NULL and p_suppnbr is NULL and P_mtrlcde is NULL )
    or  (P_suppname is NULL and p_matrl is NULL and p_suppnbr is NOT NULL and P_mtrlcde is NULL )
     or  (P_suppname is NULL and p_matrl is NULL and p_suppnbr is NULL and P_mtrlcde is NOT NULL ) )
THEN
     raise_application_error(-20000, 'wrong number of parameters');
ELSE
    ..... 
```

这具有表达其意图的巨大好处：它清楚地检查一个且只有一个参数包含一个值。其他解决方案可能更奇特，但它们会阻碍人们理解他们正在尝试做的事情的能力。

* * *

当然，发布的代码引入了一些复杂性。该接口显然允许调用程序传递字符串“NULL”，而不仅仅是传递 NULL。此外，虽然它似乎`p_matrl`是一个数字，但它被定义为 varchar2，因此调用程序可以传递诸如“211;2322”之类的废话。

解决这些缺陷的正确方法是修复 API，使其不接受此类废话。这是界面设计者的特权，可以指定调用程序应遵守的合同。换句话说，如果调用程序传递“NULL”而不是 NULL，则拒绝它们的参数。将数据类型更改`p_matrl`为数字。

但是一旦 API 被广泛使用并投入使用，处理垃圾的重担就落在了界面设计者的肩上。他们必须包括额外的验证代码。这就是规格不佳的代价。不幸的是，它通常不是由原始人承担的：设计者的罪过在维护者身上被访问。

无论如何，为了解决这些问题，我们需要声明局部变量并检查/传递参数值。例如：

```
if p_matrl = 'NULL'
then
     l_matrl := null;
else
    l_matrl := to_number(p_matrl);
end if; 
```

对所有参数进行验证，并在上面的 IF 语句中使用适当的变量。

# iphone - 没有得到 NSLibraryDirectory 的完整路径

> ID：13158068
> 
> 赞同：1
> 
> 时间：2012-10-31T12:33:41.407
> 
> 标签：iphone, directory

我想从位于`NSLibraryDirectory`.

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory,NSUserDomainMask, YES);
 NSString *documentsDirectory = [[paths objectAtIndex:0] stringByAppendingPathComponent:[NSString stringWithFormat:str]];

 NSString *getImagePath = [documentsDirectory stringByAppendingPathComponent: [@"images" stringByAppendingFormat:@"%d",[[NSUserDefaults standardUserDefaults] integerForKey:@"HighScore"]] stringByAppendingFormat:@".png"];
 img = [UIImage imageWithContentsOfFile:getImagePath];
 NSLog(@"img:%@", img); 
```

这是我正在使用的代码

getImagePath 的打印说明：

> /Users/Admin/Library/Application Support/iPhone Simulator/5.0/Applications/6842528E-9629-4DE7-96C1-A46AEB8A8EE0/Library/Thapa

它应该是：

getImagePath 的打印说明：

> /Users/Admin/Library/Application Support/iPhone Simulator/5.0/Applications/6842528E-9629-4DE7-96C1-A46AEB8A8EE0/Library/Thapa/images47.png

如何实现这一点不知道，我尝试的是上面的。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:41:21.750

首先，你在一行代码中做了太多的事情。编写代码的最佳实践是保持简单（这样您的代码对您和其他任何查看它的人都是可读的）。

当我看到这一行时：

```
NSString *getImagePath = [documentsDirectory stringByAppendingPathComponent: [@"images" stringByAppendingFormat:@"%d",[[NSUserDefaults standardUserDefaults] integerForKey:@"HighScore"]] stringByAppendingFormat:@".png"]; 
```

那里发生的事情太多了！

为什么不做类似的事情：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory,     NSUserDomainMask, YES);
if(paths)
{
    NSString *documentsDirectory = [[paths objectAtIndex:0] stringByAppendingPathComponent:[NSString stringWithFormat:str]];
    if(documentsDirectory)
    {
        NSInteger highScoreNumber = [[NSUserDefault standardUserDefaults] integerForKey: @"HighScore"];
        NSString * numberGraphicFilename = [NSString stringWithFormat: @"images%d.png", highScoreNumber ];
        if(numberGraphicFilename)
        {
            NSString *getImagePath = [documentsDirectory stringByAppendingPathComponent: numberGraphicFilename];
            if(getImagePath)
            {
                img = [UIImage imageWithContentsOfFile:getImagePath];
            }
        }
    }
} 
```

奖励：这也为您的代码引入了错误检查/处理的概念。

编写的代码更多，但阅读和遵循要容易得多。通过走这条路线，您也许可以找出问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:41:15.440

**将getImagePath**更改为

```
NSString *getImagePath = [documentsDirectory stringByAppendingPathComponent: [@"YourSubFolderName/images" stringByAppendingFormat:@"%d",[[NSUserDefaults standardUserDefaults] integerForKey:@"HighScore"]] stringByAppendingFormat:@".png"]; 
```

**所以你的代码将如下所示**

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory,     NSUserDomainMask, YES);
NSString *documentsDirectory= [paths objectAtIndex:0];

NSString *getImagePath = [documentsDirectory stringByAppendingPathComponent: [@"YourSubFolderName/images" stringByAppendingFormat:@"%d",[[NSUserDefaults standardUserDefaults] integerForKey:@"HighScore"]] stringByAppendingFormat:@".png"];
img = [UIImage imageWithContentsOfFile:getImagePath];
NSLog(@"img:%@", img); 
```

# custom-controls - 将视图面板中的行数据变量作为属性传递给自定义控件

> ID：13158078
> 
> 赞同：0
> 
> 时间：2012-10-31T12:34:14.497
> 
> 标签：custom-controls, xpages

我有一个`<xp:viewColumn>`用于文档锁定目的的自定义控件；我需要将视图面板中的行数据变量作为自定义属性传递给我的自定义控件。

我在自定义控件上定义了一个新属性：

> 名称：rowEntry
> 
> 类型：com.ibm.xsp.model.ViewRowData

这是我`ccColDocLocking`在我的视图面板中的一个例子；如果我在所有视图面板上使用相同的 var，它工作正常，但是，我不想对其进行硬编码。

```
 <xp:viewPanel rows="15" id="viewPanel1" viewStyle="width:100%"
            rowClasses="even,odd" var="rowData">        
       <xp:this.data>
            <xp:dominoView viewName="IntakeForms" var="view1"></xp:dominoView>
       </xp:this.data>
       <xc:ccColDocLocking rowEntry="#{javascript:rowData}"></xc:ccColDocLocking>
       <xp:viewColumn columnName="reqDate" id="viewColumn1"
            displayAs="link" openDocAsReadonly="true">
            <xp:this.converter>
                <xp:convertDateTime pattern="MM/dd/yyyy"></xp:convertDateTime>
            </xp:this.converter>
            <xp:viewColumnHeader value="Request  Date"
                id="viewColumnHeader1" sortable="true">
         </xp:viewColumnHeader>
        </xp:viewColumn>
 </xp:view> 
```

这是来自我的自定义控件：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">    
    <xp:viewColumn id="viewColDocLock">
        <xp:this.facets>
            <xp:viewColumnHeader xp:key="header" id="viewColumnHeader5">
            </xp:viewColumnHeader>
        </xp:this.facets>
        <xp:this.value><![CDATA[#{javascript:""}]]></xp:this.value>
        <xp:image id="imgDocLock">
            <xp:this.url><![CDATA[#{javascript:if (rowData.getDocument().hasItem("$Writers") != "") {
    return "/locked.gif";
}}]]></xp:this.url>
            <xp:this.alt><![CDATA[#{javascript:"Document locked by " + @Name('[Abbreviate]', rowData.getDocument().getItemValueString("$Writers"))}]]></xp:this.alt>
            <xp:this.title><![CDATA[#{javascript:"Document locked by " + @Name('[Abbreviate]', rowData.getDocument().getItemValueString("$Writers"))}]]></xp:this.title>
        </xp:image>
    </xp:viewColumn>
</xp:view> 
```

我得到的错误是：[ReferenceError] 'compositeData' not found

当我尝试替换`rowData.getDocument()`为`compositeData.rowEntry.getDocument()`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T13:35:53.980

如果您将数据源作为复合数据传递给重复数据源，则它需要在页面加载时可用。默认情况下不会发生，默认情况下，重复的框架是在页面加载时创建的，但特定于数据的内容是在运行时计算的。证明是您不能在重复的绑定中使用 ${datasourceName.fieldName}，只能使用 #{datasourceName.fieldName}

要执行您想要的操作，您需要在重复上设置 repeatControls="true"。这告诉它“在页面加载时使用此集合中的 x 行创建重复的内容”。然后你可以传递数据源。

但是，因为行和数据是在页面加载时写入的，所以部分刷新不会改变内容。你不能使用寻呼机或类似的东西。您仅限于在页面加载时重复写入的数据。

如果这对您不起作用，您需要将字符串引用传递给自定义控件（例如 UNID），并在自定义控件中添加一个数据源以检索相关数据源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T06:36:03.663

我在 Lotus Notes 和 Domino 应用程序开发 wiki 中找到了这个可能对您有所帮助的内容：

> 在自定义控件中：
> 
> ```
> <xp:this.beforePageLoad>
> <![CDATA[#{javascript:this.setAutoRemove(false);}]]>
> </xp:this.beforePageLoad> 
> ```

来源/更多解释： [http ://www-10.lotus.com/ldd/ddwiki.nsf/dx/XPages_compositeData_not_found](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/XPages_compositeData_not_found)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-14T07:57:58.340

[![[![][1]](../Images/f7c2615974b59f0ba0a56d2a745259f0.png)](https://i.stack.imgur.com/0hbbO.jpg)] [2](https://i.stack.imgur.com/AASN1.jpg)

对自定义控件内的“com.ibm.xsp.model.ViewRowData”自定义属性类型使用 var Picker Editor。在视图面板中设置您的自定义属性值。请参阅屏幕截图。

# mysql - 如何在单个查询中对表的所有列添加约束？

> ID：13158079
> 
> 赞同：0
> 
> 时间：2012-10-31T12:34:14.303
> 
> 标签：mysql, database, constraints, unique

我有一个名为 dbapp 的数据库。我需要将约束“NOT NULL”添加到该数据库中所有表的所有列中。我无法形成这个查询。即使我能够在每张桌子上单独执行它，也可以。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:13:22.127

这不是一项微不足道的任务。但你可以试试——

*   `information_schema.columns`从表中读取信息
*   为每个表生成 ALTER TABLE 语句

请注意，您应该考虑所有字段属性，而不仅仅是 NULL/NOT NULL。

另一种变体是使用 MySQL GUI 工具一个一个地编辑字段。

# shell - 在命令行上使用 Firefox 截取整页屏幕截图

> ID：13158083
> 
> 赞同：233
> 
> 时间：2012-10-31T12:34:37.543
> 
> 标签：shell, firefox, command-line, screenshot

我在 VPS 的 Xvfb 上运行 Firefox。我想要做的是对页面进行整页截图。

我可以使用重定向 Firefox 到特定页面

```
firefox http://google.com 
```

并使用 ImageMagick 截取屏幕截图（在 X 内）

```
import root -window output.jpg 
```

问题是，大部分页面都需要滚动，我无法事先知道高度。

另一种方法是选择一个非常大的高度（如 4000px），然后处理图像并删除无用的部分。但这是不必要的处理。

我发现了许多 Firefox 附加组件，但我正在寻找一种可以使用 Shell 命令行进行编程的解决方案。

编辑：我最终为此编写了自己的[FireFox 扩展。](https://github.com/omarabid/CmdShots)

* * *

## 回答 #1

> 赞同：491
> 
> 时间：2013-02-12T10:22:16.980

[开发者工具栏 GCLI 和`Shift`+`F2`快捷方式在 Firefox 版本 60 中被](https://mail.mozilla.org/pipermail/firefox-dev/2018-March/006249.html)删除。要以 60 或更高版本截取屏幕截图：

*   按`Ctrl`+ `Shift`+`K`打开开发者控制台（macOS 上的`⌥ Option`+ `⌘ Command`+ ）`K`
*   输入`:screenshot`或`:screenshot --fullpage`

[了解有关屏幕截图和其他功能的更多信息](https://blog.nightly.mozilla.org/2018/08/23/screenshots-from-the-console/)

* * *

对于 < 60 的 Firefox 版本：

按`Shift`+`F2`或转到**工具 > Web 开发人员 > 开发人员工具栏**以打开命令行。写：

```
screenshot 
```

并按**Enter**以截取屏幕截图。

要完全回答这个问题，您甚至可以保存整个页面，而不仅仅是它的可见部分：

```
screenshot --fullpage 
```

并将屏幕截图复制到剪贴板，使用`--clipboard`选项：

```
screenshot --clipboard --fullpage 
```

[Firefox 18](http://support.mozilla.org/es/questions/947227)更改了将参数传递给命令的方式，您必须在它们之前添加“--”。

[Firefox 88.0](https://stackoverflow.com/questions/13158083/take-a-full-page-screenshot-with-firefox-on-the-command-line/14830242?noredirect=1#comment118932922_14830242 "谢谢你，泰勒！")有一种新的截屏方法。如果在**about:config**`extensions.screenshots.disabled`中设置为，您可以右键单击屏幕并选择**Take Screenshot**。还有一个屏幕截图菜单按钮，您可以通过自定义将其添加到菜单中。`false`

 ****[您可以在此处](https://developer.mozilla.org/en-US/docs/Tools/GCLI)找到一些文档和完整的命令列表。

[PS。屏幕截图默认保存在*下载目录中。*]

* * *

## 回答 #2

> 赞同：140
> 
> 时间：2014-09-02T19:05:37.700

**2018-07-23 更新**

正如评论中刚刚指出的那样，这个问题是关于*从命令行*获取屏幕截图。对不起，我刚刚读了一遍。所以这里是正确的答案：

从 Firefox 57 开始，您可以像这样以无头模式创建屏幕截图：

```
firefox -screenshot https://developer.mozilla.com 
```

[在文档](https://developer.mozilla.org/en-US/Firefox/Headless_mode#Taking_screenshots)中阅读更多内容。

**2017-06-15 更新**

从 Firefox 55 开始，[Firefox Screenshots](https://screenshots.firefox.com/)作为更灵活的选择。从 Firefox 57 开始，屏幕截图也可以捕获整页。

**原始答案**

从 Firefox 32 开始，开发者工具 (F12) 中还有一个[全页截图按钮](https://developer.mozilla.org/en-US/Firefox/Releases/32)。如果未启用，请转到开发人员工具设置（齿轮按钮）并在“可用工具箱按钮”部分选择“获取整页截图”。

![开发者工具工具栏](../Images/5978b7b388a5922d610108fd795b6925.png) *来源：developer.mozilla.org*

默认情况下，屏幕截图保存在下载目录中。这与工具栏中的类似`screenshot --fullpage`。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-15T20:59:09.700

我最终编写了一个自定义解决方案（Firefox 扩展）来执行此操作。我想当我开发它时，enreas 中提到的命令行并不存在。

Firefox 扩展是[CmdShots](https://github.com/omarabid/CmdShots)。如果您需要更好地控制截屏过程（或者您想要进行一些 HTML/JS 修改和图像处理），这是一个不错的选择。

你可以使用它并滥用它。我决定保持它未经许可，因此您可以随意使用它。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-10-31T19:56:59.273

我认为您正在寻找的是一个实用程序，它使您能够将在浏览器中打开的**完整页面保存到 png 文件中。**您很可能正在寻找像[commandlineprint2](https://sites.google.com/site/torisugari/commandlineprint2)这样的实用程序。

安装扩展后，您只需要键入命令：

```
firefox -print http://google.com -printfile ~/foo.png 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-07-23T09:20:45.110

[Firefox Screenshots](https://support.mozilla.org/en-US/kb/firefox-screenshots)是 Firefox 附带的一个新工具。它不是开发者工具，它是针对浏览器的最终用户的。

要截屏，请右键单击页面上的空白区域，然后选择“截屏”。如果您然后单击“保存整页”，它将保存整页，为您滚动。

[（来源：[Mozilla.net](https://prod-cdn.sumo.mozilla.net/uploads/gallery/images/2017-10-22-18-49-59-62c92b.png)）]

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-29T01:16:47.793

您可以使用 selenium 和 Firefox 的 webdriver。

```
import selenium.webdriver
import selenium.common

options = selenium.webdriver.firefox.options.Options()
# options.headless = True
with selenium.webdriver.Firefox(options=options) as driver:
    driver.get('http://google.com')
    time.sleep(2)
    root=driver.find_element_by_tag_name('html')
    root.screenshot('whole page screenshot.png') 
```****

# c# - 如何使用 HTML Agility 实用程序提取 url 的标题、图像和描述

> ID：13158091
> 
> 赞同：1
> 
> 时间：2012-10-31T12:35:22.743
> 
> 标签：c#, asp.net, webforms, html-agility-pack

我想使用[HTML Agility 实用程序](http://htmlagilitypack.codeplex.com/)从 URL 中提取标题、描述和图像， 到目前为止，我无法找到一个易于理解的示例并且可以帮助我做到这一点。

如果有人可以帮助我举例，我将不胜感激，以便我可以提取标题、描述并让用户选择从一系列图像中选择图像（当我们共享链接时类似于 Facebook 的东西）。

**更新：**

我在 .aspx 页面上放置了标题、描述和按钮、文本框的标签，并且我在按钮单击事件上触发了以下代码。但它为所有值返回 null 。可能是我做错了什么。

我使用了以下示例 URLhttp://edition.cnn.com/2012/10/31/world/asia/india/index.html?hpt=hp_t2

```
protected void btnGetURLDetails_Click(object sender, EventArgs e)
{
    HtmlDocument doc = new HtmlDocument();
    var response = txtURL.Text;
    doc.LoadHtml(response);

    String title = (from x in doc.DocumentNode.Descendants()
                    where x.Name.ToLower() == "title"
                    select x.InnerText).FirstOrDefault();

    String desc = (from x in doc.DocumentNode.Descendants()
                   where x.Name.ToLower() == "description"
                   select x.InnerText).FirstOrDefault();

    List<String> imgs = (from x in doc.DocumentNode.Descendants()
                         where x.Name.ToLower() == "img"
                         select x.Attributes["src"].Value).ToList<String>();

    lblTitle.Text = title;
    lblDescription.Text = desc;
} 
```

上面的代码让我得到所有变量的空值

如果我用这个修改代码

```
HtmlDocument doc = new HtmlDocument();
        var url = txtURL.Text;

        var webGet = new HtmlWeb();
         doc = webGet.Load(url); 
```

在这种情况下，它只会让我的标题和描述值再次为空

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:13:44.253

```
protected void btnGetURLDetails_Click(object sender, EventArgs e)
{
    HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(new Uri(txtURL.Text));
    request.Method = WebRequestMethods.Http.Get;

    HttpWebResponse response = (HttpWebResponse)request.GetResponse();

    StreamReader reader = new StreamReader(response.GetResponseStream());

    String responseString = reader.ReadToEnd();

    response.Close();

    HtmlDocument doc = new HtmlDocument();
    doc.LoadHtml(responseString);

    String title = (from x in doc.DocumentNode.Descendants()
                where x.Name.ToLower() == "title"
                select x.InnerText).FirstOrDefault();

    String desc = (from x in doc.DocumentNode.Descendants()
               where x.Name.ToLower() == "meta"
               && x.Attributes["name"] != null
               && x.Attributes["name"].Value.ToLower() == "description"
               select x.Attributes["content"].Value).FirstOrDefault();

    List<String> imgs = (from x in doc.DocumentNode.Descendants()
                     where x.Name.ToLower() == "img"
                     select x.Attributes["src"].Value).ToList<String>();

   lblTitle.Text = title;
   lblDescription.Text = desc; 
```

}

# drupal - Drupal 7 链批处理

> ID：13158095
> 
> 赞同：0
> 
> 时间：2012-10-31T12:35:38.843
> 
> 标签：drupal, batch-file, drupal-7

我有一系列相互传递数据的函数。我想批量按顺序运行这些，以便每个结果都将传递并排列到下一个函数。

例如：

*   功能 1 --> 处理文件 --> 输出数组
*   功能 2 --> 输入数组 --> 输出数组
*   功能 3 --> 输入数组 --> 创建节点

我没有尽我所能解释，但我不熟悉这个过程。如果您可能需要任何其他信息，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T02:32:27.427

让函数将结果存储在 $context['sandbox'] 中以供下一个要处理的函数。drupal 中的所有批处理函数都应通过引用将上下文参数作为最后一个参数。请注意，此数据应该是会话变量安全的（无对象）

# javascript - ASP.NET 打破 jQuery

> ID：13158096
> 
> 赞同：2
> 
> 时间：2012-10-31T12:35:44.333
> 
> 标签：javascript, jquery, asp.net

简而言之，似乎当 ASP.NET 页面具有`<form runat=server>`标记时，它会破坏一些 jQuery 脚本。这是一个例子：

我有一个非常简单的页面，只有一个复选框，如下所示：

```
<input type="checkbox" id="myCheckbox01" /> 
```

并像这样调用 jQuery 函数：

```
<script language=javascript>
    $(document).ready(function () {
        $("[type=checkbox]").iphoneStyle();
    });
</script> 
```

请注意，我没有专门引用任何 ID。jQuery 调用适用于页面中的所有复选框。

这工作正常，jQuery 调用按预期工作。但...

当我将复选框附在 ASP.NET 表单中时，如下所示：

```
<form runat="server" id="form1">
    <input type="checkbox" id="myCheckbox01" />
</form> 
```

jQuery 调用停止工作，并且我收到 JavaScript 错误***"Object doesn't support property or method 'iphoneStyle'"***。

再次请注意，我没有引用任何特定的 ID，复选框也不是 ASP.NET (runat=server) 控件——它只是一个普通的旧复选框。

我似乎无法追踪这个问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-14T23:50:08.013

我有这个问题。jQuery 本身可以工作，但我添加的任何插件都不会。我不断收到“对象不支持属性或方法......”的投诉。解决方案是将对 jQuery 插件的引用从 Site.Master aspx 页面移动到我使用 jQuery 插件的“主”页面。我认为将所有脚本引用都放在 Site.Master 中是很聪明的，但毕竟我太聪明了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T13:11:35.130

像这样更改您的脚本。这个对我有用

```
 <script language="javascript">
      $(document).ready(function () {
      $('input:checkbox').iphoneStyle();
      });
  </script> 
```

# vb.net - 防止将继承的对象传递给共享函数

> ID：13158098
> 
> 赞同：0
> 
> 时间：2012-10-31T12:35:50.767
> 
> 标签：vb.net, inheritance

我有一个非常人为的例子来说明我的业务对象如何加载它们的数据。但是，我想防止下面展示的情况。我知道这里有缺点，但它就是这样（到目前为止）！如何在不重组接口等的情况下实现这一目标？

```
Public Class Car

  Public Property Passengers As Integer

  Public Shared Sub Fill(c As Car, r As SqlDataReader)
    Passengers = r.GetInt32(0)
  End Sub

End Class

Public Class UsedCar
  Inherits Car

  Public Property PreviousOwner As String

  Public Shared Sub FillUsed(l As Limo, r As SqlDataReader)
    Passengers = r.GetInt32(0)
    PreviousOwner = r.GetString(1)
  End Sub

End Class

Public Sub CreateVehicles()

  Dim c As New Car()
  Car.FillWithStuff(c, GetSqlReader(carId))

  Dim l As New UsedCar()
  UsedCar.FillUsed(l, GetSqlReader(usedCarId)) 'Great
  Car.Fill(l, GetSqlReader(usedCarId)) 'No! << Stop this at once!
  UsedCar.Fill(l, GetSqlReader(usedCarId)) '<<< Even more wrong!

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:08:01.127

将构造函数设为私有，并让您的各种 Fill() 方法实例化并返回一个全新的对象，或者您可以将 Fill() 代码移动到构造函数本身。由于您的方法与数据库结果密切相关，另一个选择是将构造函数标记为“朋友”并将您的 Fill() 方法移动到与您的数据层一起存在的单独模块中。

这里的目标是创建汽车的*唯一方法是使用已定义的工厂方法，该方法能够**在编译时*检查适当的类型是否匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:14:55.377

除了抛出异常之外，没有办法要求这样做。例如：

```
Public Shared Sub FillWithStuff(c As Car)
    If Not (TypeOf c Is Car) Then
        Throw New Exception("Must be a Car")
    End If
    Passengers = 4
End Sub 
```

但是，您提供的简化示例并不能充分解释为什么在您的情况下，豪华轿车不是有效的汽车。如果事实上，它不是一辆有效的汽车，那么它不应该从汽车继承。很可能您的代码应该重构，以便 car 和 limo 是两个不相关的类，它们共享相同的依赖业务类以实现通用功能。

# sql-server-2008 - SQL Server 2008 删除所有明细记录后，如何自动删除主记录？

> ID：13158100
> 
> 赞同：1
> 
> 时间：2012-10-31T12:35:57.600
> 
> 标签：sql-server-2008, master-detail, cascading-deletes

假设我有两张桌子。 `Errors`和`ErrorsDetails`。所以我有一个错误记录，其中可能包含许多 ErrorDetails 记录。

用户将通过他们使用的应用程序定期删除详细记录。当所有详细记录都被清理（删除）后，我也想自动删除主记录。

一个很酷的 SQL 删除语句将删除详细信息和如果 master 没有更多详细信息，则删除 master。但我似乎无法得到一个干净的 SQL 语句来做到这一点。每次删除后，我宁愿不要轮询主人以获取详细信息。

**错误**

```
ID        Error
1         Import Error
2         Export Error 
```

**错误详情**

```
ID        ErrorsID        DetailedInfo
1         1               Couldn't import file because of FTP error
2         1               Couldn't import file because of permission error
3         2               Couldn't export file because of directory doesn't exist 
```

我试过`cascade`像这样添加一个删除约束，但它似乎没有用。

```
alter table dbo.ErrorsDetails
    add constraint FK_Delete_Master
        foreign key (ErrorsID) references dbo.Errors(ErrorsID) on delete cascade 
```

感谢您的任何建议。

**更新**

有人提到使用触发器。我想过，但没有提及。触发器肯定会完成这项工作。这种情况下触发器的优点/缺点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:45:10.040

您可以使用触发器或

```
declare @ErrorsId int
select @ErrorsId = ErrorsId from ErrorsDetails where ID = @id
delete from ErrorsDetails where ID = @id

declare @errorDetailCount int
select @errorDetailCount = count(*) from ErrorsDetails where ErrorsId = @ErrorsId 

if (@errorDetailCount = 0)
begin
 delete from Errors where ID = @ErrorsId 
end 
```

更新：触发：

```
create trigger [dbo].[ErrorsDetails_Delete_Trigger] on [dbo].[ErrorsDetails] 
instead of delete
as 
begin          
    declare @ErrorsId int
    select @ErrorsId = ErrorsId from deleted
    delete from ErrorsDetails where ID = deleted.ID

    declare @errorDetailCount int
    select @errorDetailCount = count(*) from ErrorsDetails where ErrorsId = @ErrorsId 

    if (@errorDetailCount = 0)
    begin
     delete from Errors where ID = @ErrorsId 
    end     
end 
```

# delphi - 当 TCheckBox 的属性应该为真时，它的显示属性为假

> ID：13158103
> 
> 赞同：1
> 
> 时间：2012-10-31T12:36:03.587
> 
> 标签：delphi, c++builder, vcl

我正在使用 C++ Builder XE，并且 TCheckBox 的“显示”属性有问题。

我有一个`TForm`（ChannelConfigForm），其中有一个`TGroupBox`（AlarmsGroupBox），其中有一个`TCheckBox`（A4_en_Xbox）。

有时，我看不到表单上的某些控件。

根据帮助文档：“如果组件的 Visible 属性及其父层次结构中的所有父级都为 true，则 Showing 保证为 true。如果包含该控件的父级之一的 Visible 属性值为 false，则 Showing 可能是真或假。显示是一个只读属性。

为了找出发生了什么，我编写了以下函数来调试程序：（注意：此函数中的 debugf 只是我编写的调试语句，其工作方式类似于 printf，它将调试内容写入表单）

```
void ShowParentTree(TControl *Control)
{
  wchar_t Name[32];
  static int level=0;
  TWinControl *wc;

  level++;
  if (level==1)
    debugf(L"Parents of control \"%s\" (%s) :",
                       Control->Name.c_str(),
                       Control->ClassName().c_str());

  // Display what Control has as parents and if they're visible and showing
  debugf(L"level %d : %s->Visible  = %s",level,
                       Control->Name.c_str(),
                       Control->Visible?L"true":L"false");
  wc=(TWinControl *)Control;
  debugf(L"level %d : %s->Showing  = %s",level,
                       wc->Name.c_str(),
                       wc->Showing?L"true":L"false");

  if (Control->Parent)
    ShowParentTree((TControl *)Control->Parent);

  level--;
} 
```

有时当我显示 ChannelConfigForm 时，我会得到以下信息：

```
Parents of control "A4_en_Xbox" (TCheckBox) :
level 1 : A4_en_Xbox->Visible  = true
level 1 : A4_en_Xbox->Showing  = false
level 2 : AlarmsGroupBox->Visible  = true
level 2 : AlarmsGroupBox->Showing  = true
level 3 : ChannelConfigForm->Visible  = true
level 3 : ChannelConfigForm->Showing  = true 
```

我理解这意味着 A4_en_Xbox->Showing 属性在我认为应该为真时为假。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:10:47.217

检查`A4_en_Xbox->HandleAllocated()`返回的内容。 `Showing`如果`HandleAllocated()`返回 false，则为 false。VCL 不保证 TWinControl 派生的组件始终始终具有`HWND`分配。有时它会`HWND`在内部释放 s 并在需要时重新创建它们。

此外，您的代码中有一个小的逻辑错误。并非所有`TControl`后代都派生自`TWinControl`，但您的代码假定输入`TControl`始终是`TWinControl`后代。您需要检查这一点，这样您就可以避免访问`Showing`非`TWinControl`控件的属性。您也可以完全取消递归，只需使用简单的循环即可：

```
void ShowParentTree(TControl *Control)
{
    if (!Control)
        return;

    int level = 0;
    TWinControl *wc = dynamic_cast<TWinControl*>(Control);

    debugf(L"Parents of control \"%s\" (%s) :",
                         Control->Name.c_str(),
                         Control->ClassName().c_str());

    // Display what Control has as parents and if they're visible and showing
    do
    {
        level++;

        if (wc)
        {
            debugf(L"level %d : %s Visible = %s, Showing = %s, HandleAllocated = %s",
                level,
                Control->Name.c_str(),
                Control->Visible ? L"true" : L"false",
                wc->Showing ? L"true" : L"false",
                wc->HandleAllocated() ? L"true" : L"false");

        }
        else
        {
            debugf(L"level %d : %s Visible = %s",
                level,
                Control->Name.c_str(),
                Control->Visible ? L"true" : L"false");
        }

        wc = Control->Parent;
        Control = wc;
    }
    while (Control);
} 
```

# java - 将 Kundera 与 Cassandra 一起使用时 JPA 的连接类型？

> ID：13158105
> 
> 赞同：1
> 
> 时间：2012-10-31T12:36:15.027
> 
> 标签：java, jpa, cassandra, database-connection, kundera

Java 是否使用`TCP`连接来`JPA`请求数据库？例如，如果数据库服务器`IP address`设置为`x.x.x.x:xxxx`，那么什么样的代理可以处理该连接？`HTTP`或`TCP`代理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:47:48.233

JDBC 驱动程序不一定使用网络连接。例如，超音速 (HSQL) 提供不同的操作模式

如果将其配置为服务器，它将接受 TCP 连接，并且可以使用 JDBC-URL 进行访问，例如：

```
jdbc:hsqldb:hsql://machine/dbname 
```

在嵌入式模式下，不需要 TCP 连接 URL 没有服务器名称（或 IP），URL 看起来像：

```
jdbc:hsqldb:mem:dbname 
```

如果您使用数据库服务器，则需要使用机器名称（如果不使用默认值，则为端口号）配置 JDBC URL。不需要代理，驱动会自己建立连接。顺便提一句。HTTP 与 JDBC 无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T14:47:26.610

人们对这个问题感到困惑，因为 JPA != nosql 实际上是完全不兼容的。有一些相同的东西，但 JPA 确实是为 RDBMS 设计的。

ORM下的所有java客户端都使用hector、astyanax等等等，它们都使用基于tcp的thrift。因此，您可以根据需要代理 tcp，并且可以生成自己的 thrift 库，如 astyanax 和 hector，并创建您需要的任何类型的代理。

院长

PlayOrm 开发人员

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T12:44:27.803

请参阅[有关 JPA 的 Oracale 页面](http://www.oracle.com/technetwork/java/javaee/tech/persistence-jsp-140049.html)和[Java EE 6 教程](http://docs.oracle.com/javaee/6/tutorial/doc/bnbpy.html)。

您连接到数据库的方式取决于您使用的数据库和 JDBC 驱动程序。[SQLite](http://sqlite.org/)等一些数据库不使用*任何*网络连接。

# .htaccess - RewriteCond 或只是 RewriteRule 用于简单的 .htaccess 重写？

> ID：13158107
> 
> 赞同：1
> 
> 时间：2012-10-31T12:36:18.787
> 
> 标签：.htaccess, mod-rewrite

我正在编写一个简单的 .htaccess 重写以强制单个页面使用 https（受此[问题](https://stackoverflow.com/questions/1108706/correctly-switching-between-http-and-https-using-htaccess)答案的启发）。

是不是用RewriteCond比较好，如下：

```
RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} ^/page\.php$
RewriteRule .* https://%{SERVER_NAME}%{REQUEST_URI} [R=301,L] 
```

或具有 RewriteRule 条件的较短替代方案：

```
RewriteCond %{HTTPS} off
RewriteRule ^page\.php$ https://%{SERVER_NAME}%{REQUEST_URI} [R=301,L] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T15:33:14.367

好吧，如果您使用 apache 作为您的 httpd 服务器，那么您绝对可以安全地使用单一条件和单一规则，这足以完成您的给定任务。使用前者比使用较短的没有优势。我说，如果您不必制定/应用进一步的规则或检查，那么请使用较短的规则，而不是再应用一个额外的条件。我这么说是因为您的情况相当简单，您只需重定向到`https`一个给定的页面。

即使您在[这里查看 AskApache 站点，](http://www.askapache.com/htaccess/ssl-example-usage-in-htaccess.html#rewrite-http-to-https-no-mod_ssl)他们也建议最好的方法是仅使用 %{HTTPS} 变量和一个 RewriteRule，这是最好和有效的方法。

如果您的担忧与我上面提到的不同，请告诉我。

# unix - 在远程服务器上运行 shell 脚本

> ID：13158116
> 
> 赞同：0
> 
> 时间：2012-10-31T12:36:38.017
> 
> 标签：unix, ssh, remote-server

我正在尝试在远程服务器上运行 .sh 脚本并收到以下错误消息。

真的不知道我做错了什么。

我使用的命令是： $ssh user@remoteserver 要执行的文件路径/Test.sh

返回错误：ksh：语法错误：`（'意外

任何指针都会很棒:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:49:20.647

如果机器 A 是 Windows 机器，您可以使用带有 -m 参数的 Plink（PuTTY 的一部分），它将在远程服务器上执行本地脚本。

```
plink root@MachineB -m local_script.sh 
```

如果机器 A 是基于 Unix 的系统，您可以使用：

```
ssh root@MachineB 'bash -s' < local_script.sh 
```

您不必将脚本复制到远程服务器来运行它。

资料来源： [如何使用 SSH 在远程机器上运行 shell 脚本？](https://stackoverflow.com/questions/305035/how-to-use-ssh-to-run-shell-script-on-a-remote-machine)

# c++ - 更改 wxListBox 中项目的位置

> ID：13158118
> 
> 赞同：3
> 
> 时间：2012-10-31T12:36:44.147
> 
> 标签：c++, drag-and-drop, wxwidgets

我想问你如何在wxListBox 中动态改变一个项目的位置（例如拖放） 我只发现了如何从名为dnd 的wxWidget 示例（使用wxWidgets 下载）中将项目插入wxListBox。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T00:57:24.343

如果您只想允许用户重新排序列表框中的项目，请考虑使用[wxEditableListBox](http://docs.wxwidgets.org/trunk/classwx_editable_list_box.html)。如果你真的需要拖放，应该可以按照 ravenpoint 的回答中的说明来实现它，但这更难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:50:58.003

始终最好从明确规定的要求开始。

1.  用户在列表框中选择要移动的项目
2.  用户表示他想将项目拖到新位置
3.  用户选择列表框中的项目以替换为拖动的项目
4.  应用程序根据要求重新排列列表框中的项目。

第 1 步似乎很简单。我想你不需要帮助吗？

第 2 步是最棘手的。您将需要处理鼠标事件，以便检测用户何时在项目中拖动鼠标。这是鼠标事件类的文档[http://docs.wxwidgets.org/trunk/classwx_mouse_event.html](http://docs.wxwidgets.org/trunk/classwx_mouse_event.html) 您需要了解大部分内容才能完成这个技巧！

第 3 步也很棘手。当用户在拖动后释放按钮时，您需要从事件中获取鼠标位置，并计算释放按钮时鼠标下方的项目。您需要一个 HitTest 方法。wxListBox 有吗？我怀疑不是！也许您应该考虑使用 wxListCtrl，而不是尝试自己构建。 [http://docs.wxwidgets.org/trunk/classwx_list_ctrl.html#ac346d7aa18722fb54580d4c4ed5cf113](http://docs.wxwidgets.org/trunk/classwx_list_ctrl.html#ac346d7aa18722fb54580d4c4ed5cf113)

第 4 步。现在，在所有鼠标处理之后，您应该在（您的调用）之前或之后插入已移动的项目和要插入的项目 清除列表框，然后按新顺序插入项目。

这一切似乎是个大麻烦。这个功能真的那么重要吗？你能接受一个更简单的用户界面，只需一小部分编码、测试和调试就可以完成工作吗？

像这样的东西：

1.  用户选择要移动的项目
2.  用户选择向上或向下移动项目（向上/向下箭头键、鼠标左/右键、滚轮都是可能的）
3.  应用程序向上或向下移动所选项目
4.  用户重复直到项目处于所需位置

# c# - 如何将一系列项目添加到 IList？

> ID：13158121
> 
> 赞同：90
> 
> 时间：2012-10-31T12:36:45.270
> 
> 标签：c#, list, collections, addrange

没有`AddRange()`办法`IList<T>`。

如何在`IList<T>`不遍历项目和使用`Add()`方法的情况下将项目列表添加到？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2015-10-13T13:36:30.137

如果您查看[List<T> 的 C# 源代码](https://referencesource.microsoft.com/#mscorlib/system/collections/generic/list.cs,cf7f4095e4de7646)，我认为 List<T>.AddRange() 具有简单循环无法解决的优化。因此，扩展方法应该简单地检查 IList<T> 是否为 List<T>，如果是，则使用其本机 AddRange()。

查看源代码，您会看到 .NET 人员在他们自己的 LINQ 扩展中为 .ToList() 之类的东西做了类似的事情（如果它是一个列表，则强制转换它......否则创建它）。

```
public static class IListExtension
{
    public static void AddRange<T>(this IList<T> list, IEnumerable<T> items)
    {
        if (list == null) throw new ArgumentNullException(nameof(list));
        if (items == null) throw new ArgumentNullException(nameof(items));

        if (list is List<T> asList)
        {
            asList.AddRange(items);
        }
        else
        {
            foreach (var item in items)
            {
                list.Add(item);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2012-10-31T12:39:02.087

`AddRange`定义在 上`List<T>`，而不是接口上。

您可以将变量声明为`List<T>`代替`IList<T>`或将其强制转换`List<T>`为以获得对`AddRange`.

```
((List<myType>)myIList).AddRange(anotherList); 
```

这不是好的做法（请参阅下面的注释），因为 a`IList<T>`可能*不是*a `List<T>`，而是实现接口的其他类型并且很可能没有`AddRange`方法 - 在这种情况下，您只会发现代码何时抛出运行时异常。

因此，除非您确定类型确实是 a `List<T>`，否则您不应该尝试使用`AddRange`.

一种方法是使用[is](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/type-testing-and-cast#is-operator)或[as](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/type-testing-and-cast#as-operator)运算符测试类型（自 C# 7 起）。

```
if(myIList is List<T>)
{
   // can cast and AddRange
}
else
{
   // iterate with Add
} 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-10-31T12:39:07.610

你可以这样做：

```
IList<string> oIList1 = new List<string>{"1","2","3"};
IList<string> oIList2 = new List<string>{"4","5","6"};
IList<string> oIList3 = oIList1.Concat(oIList2).ToList(); 
```

所以，基本上你会使用`Concat()`扩展并`ToList()`获得与`AddRange()`.

[来源](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/7a081b9d-7617-4432-829a-5b7548de5dab)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-07-17T13:32:01.610

你也可以这样写一个扩展方法：

```
internal static class EnumerableHelpers
{
    public static void AddRange<T>(this IList<T> collection, IEnumerable<T> items)
    {
        foreach (var item in items)
        {
            collection.Add(item);
        }
    }
} 
```

用法：

```
IList<int> collection = new MyCustomList(); //Or any other IList except for a fixed-size collection like an array
var items = new[] {1, 4, 5, 6, 7};
collection.AddRange(items); 
```

它仍在迭代项目，但您不必每次调用它时都编写迭代或强制转换。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-07-17T23:49:31.830

另一个使用 LINQ 的答案，前提是您要添加的内容是 a`List<T>`或者您可以调用`ToList()`它：

```
IEnumerable<string> toAdd = new string[] {"a", "b", "c"};
IList<string> target = new List<string>();

toAdd.ToList().ForEach(target.Add); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-12T13:39:09.037

IList 没有 AddRange() ，但有 Concat() 结合你的收藏

# asp.net - 我可以获得更高质量的图表吗？

> ID：13158122
> 
> 赞同：2
> 
> 时间：2012-10-31T12:36:52.140
> 
> 标签：asp.net, charts, mschart

我创建了一个新图表，在 asp.net 中看起来像这样（使用 mvc）：

```
@{
    var myChart = new Chart(width: 600, height: 400)
        .AddTitle("Number of errors")
        .AddSeries(            
            xValue: @ViewBag.Chart.xVal,
            yValues: @ViewBag.Chart.yVal)
        .Write();
} 
```

这给了我这张图片：

![在此处输入图像描述](../Images/25e055c7d64faa358cdfe629e7023263.png)

你可能看不到它，但在我的超平滑液晶屏幕上，图像有抖动区域

**已解决**：

```
@{
        var myChart = new Chart(width: 600, height: 400)
            .AddTitle("Number of errors")
            .AddSeries(            
                xValue: @ViewBag.Chart.xVal,
                yValues: @ViewBag.Chart.yVal)
            .Write("png");
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T13:47:46.760

假设这是来自`System.Web.Helpers`程序集的图表，默认格式为 Jpeg。尝试`"png"`作为`format`参数传递给`Write`方法。

# java - 使用消息传递的消费者生产者（不是共享内存）

> ID：13158123
> 
> 赞同：1
> 
> 时间：2012-10-31T12:36:57.487
> 
> 标签：java, multithreading, concurrency, java.util.concurrent, message-passing

我对 Java 中多个线程之间的消息传递有点困惑。在很多地方都写到目前标准方法不支持它，但是有一些库，比如[kilim](http://www.malhar.net/sriram/kilim/)。我找到了[java nio](http://docs.oracle.com/javase/6/docs/api/java/nio/channels/package-summary.html)。

1.  nio不就是为了这个目的吗？

2.  在线程（共享内存，发送消息）之间传递数据的方式有哪些？（java io - 它是使用共享内存的方式吗？）

3.  我在哪里可以找到使用消息传递（不使用共享内存）实现消费者生产者任务的示例？

提前感谢您的帮助。

# php - 如何在不使用名称和值php的情况下通过表单发布发送messageid

> ID：13158124
> 
> 赞同：2
> 
> 时间：2012-10-31T12:37:03.607
> 
> 标签：php, forms, post

所以我有这个网站，用户可以在其中拥有个人资料并发送留言簿消息。如果您已登录并查看您的消息，则每条消息都有一个提交按钮来删除该消息。

我知道如何删除这条消息，但我不知道如何在发布时获取 messageID。

控制器使用此（一条消息）创建一个包含所有消息的循环：

```
{   $this->theMessageID = $messageID;

    $guestbookHtml .= "<div id='guestbook'>
                    <form method='post' action='' class='deletemsg'>
                    <input class='deleteinput' type='submit' name='$this->m_delete' value='delete'/>
                    </form>                     
                    <p class='message'>$message</p>
                    </div>"; 

    return $guestbookHtml;
} 
```

然后我有这个功能来检查我是否按下了一个按钮

```
 {
    if (isset($_POST[$this->m_delete])) {
         return true;
    } else {
         return false;
    }
 } 
```

是的，现在我如何将 $this->theMessageID 发送到我的控制器也取决于我按下了哪些消息.... :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:43:32.167

使用隐藏字段并存储要删除的 id。

```
{   $this->theMessageID = $messageID;

    $guestbookHtml .= "<div id='guestbook'>
                    <form method='post' action='' class='deletemsg'>
                    <input type='hidden' name='{$this->m_delete}' value='{$this->theMessageID}'/>
                    <input class='deleteinput' type='submit' value='delete'/>
                    </form>                     
                    <p class='message'>$message</p>
                    </div>"; 

    return $guestbookHtml;
} 
```

因此，如果`$_POST[$this->m_delete]`设置了，则删除的 ID 在`$_POST[$this->m_delete]`

# javascript - div拖动不作为背景

> ID：13158130
> 
> 赞同：0
> 
> 时间：2012-10-31T12:37:27.583
> 
> 标签：javascript, jquery, html, css

我正在尝试拖动框，这会改变复选框的状态，机器人这不是我现在想要做的，我试图达到我的 div 不作为背景图像拖动。Div 必须不是背景图像，可以添加背景图像。

```
(function($){
$.fn.slideCheckbox = function(){

    return this.each(function(){

        //init, native js for better performance
        slidesHolder = document.createElement( 'div' );
        slidesHolder.setAttribute( 'class', 'slides_holder' );
        slides = document.createElement( 'div' );
        slides.setAttribute( 'class', 'slides' );
        slidesHolder.appendChild( slides );

        slide_on = document.createElement( 'div' );
        slide_on.setAttribute( 'class', 'slide_on' );
        slide_off = document.createElement( 'div' );
        slide_off.setAttribute( 'class', 'slide_off' );
        slides.appendChild( slide_on );
        slides.appendChild( slide_off );
        this.parentNode.insertBefore( slidesHolder, this.nextSibling );

        // mouse hold and position
        var down = false;
        var clickPos = null;

        $( slidesHolder ).bind({

            mousedown : function( e ){

                clickPos = e.pageX;
                down = true;
            },
            mousemove : function( e ){
                if ( !down ) return;

                // slinkimas i desine
                if ( clickPos < e.pageX ) {

                    $( slides ).offset({ left: e.pageX - clickPos });
                }

                // slinkimas i kaire
                if ( clickPos > e.pageX ) {

                    $( slides ).offset({ left: e.pageX - clickPos  });
                }

            },
            mouseup : function(){

                down = false;
            }
        });
    });
}
 })(jQuery);

$(function(){

     $( '#slide_checkbox' ).slideCheckbox();
}); 
```

完整示例如下：

[http://jsfiddle.net/GomatoX/w2DBU/](http://jsfiddle.net/GomatoX/w2DBU/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:28:22.647

如果你已经在使用 jquery 为什么不使用这样的东西呢？

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery UI Slider - Default functionality</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<script>
$(document).ready(function() {
    $( "#slider" ).slider({ max: 1 });
    $( "#slider" ).bind( "slidechange", function(event, ui) {
    document.getElementById('slide_checkbox').checked=$(this).slider("option","value");
    });

});
</script>
</head>
<body>
<label for="slide_checkbox">Slider Checkbox</labeL>
    <input type="checkbox" value="" name="" id="slide_checkbox" />
<div id="slider"></div>
</body>
</html>​ 
```

[http://jsfiddle.net/q3hBj/](http://jsfiddle.net/q3hBj/)

# nsstring - NSString 无法解码类版本 XXXX

> ID：13158134
> 
> 赞同：0
> 
> 时间：2012-10-31T12:37:34.247
> 
> 标签：nsstring, runtime-error, subclassing, nscoder, nsstringencoding

我正在实现自己的键控`NSCoder`子类，并且 NSString 的解码失败。

如果我执行以下操作：

```
MyUnarchiver *aDecoder = [[MyUnarchiver alloc] initWithData:someArchivedData];
NSString *aString = [[NSString alloc] initWithCoder:aDecoder]; 
```

然后抛出以下“未捕获的异常”：

```
*** Terminating app due to uncaught exception 'NSGenericException', reason: 'NSString cannot decode class version 12345' 
```

我认为12345 来自此方法的位置`MyUnarchiver`：

```
-(NSInteger)versionForClassName:(NSString *)className
{
    return 12345;
} 
```

同样，如果我们抛出一个`nil` `NSCoder`at `NSString`，`initWithCoder:`那么我们会得到与上面相同的错误，但版本号是 0。

我怀疑这可能与我不知道我应该在该`versionForClassName:`方法中实现什么这一事实有关。即使从[档案和序列化：子类化 NSCoder](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/Archiving/Articles/subclassing.html)参考资料中我也无法收集到太多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:37:34.247

Aaaand....在写出问题的过程中，我意识到我没有实现该`allowsKeyedCoding`方法，这似乎至少缓解了这个问题。

但是，我仍然不确定应该实施`versionForClassName:`什么。我刚刚从我的实现中删除了它，一切似乎都正常工作。

希望这可以帮助某人。

# ruby-on-rails - 是 Devise 的 :authenticate_user！与 :signed_in_user 相同吗？

> ID：13158136
> 
> 赞同：1
> 
> 时间：2012-10-31T12:37:35.900
> 
> 标签：ruby-on-rails, devise

这是来自[Rails 教程书](http://ruby.railstutorial.org/)：

[http://ruby.railstutorial.org/](http://ruby.railstutorial.org/)

```
 before_filter :signed_in_user, only: [:create, :destroy]

  def signed_in_user
    unless signed_in?
      store_location
      redirect_to signin_url, notice: "Please sign in."
    end
  end

  def signed_in?
    !current_user.nil?
  end 
```

因此，代码只允许用户在登录后创建和销毁帖子。

我想知道是否使用**Devise** `before_filter :authenticate_user!, only: [:create, :destroy]`这样做。结果是一样的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T12:54:02.633

不，不一样！你必须使用

`before_filter :authenticate_user!, only: [:create, :destroy`

在你的情况下。观看这些视频以更好地理解：

*   [http://railscasts.com/episodes/209-introducing-devise](http://railscasts.com/episodes/209-introducing-devise)
*   [http://railscasts.com/episodes/210-customizing-devise](http://railscasts.com/episodes/210-customizing-devise)

更新：

以下是设计 wiki 文章的完整列表：[https ://github.com/plataformatec/devise/wiki/_pages](https://github.com/plataformatec/devise/wiki/_pages)

# sql - 如何分隔oracle中的字段包含数据varchar和数字和日期

> ID：13158137
> 
> 赞同：2
> 
> 时间：2012-10-31T12:37:34.537
> 
> 标签：sql, oracle, plsql

如何在 oracle 中分隔包含数据 var char 和数字和日期的字段，例如：

```
table1:
column1:MohammadBadarneh_07889855_12021990

create procedure to separate and insert into table2:
table2:
name:Mohammad Badarneh
phone number: 07889855
date: 12-02-1990 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:25:31.993

例如，要在不验证日期格式的情况下分隔字符串值，您可以编写类似的查询。

```
-- sample of data
 with t1(col) as(
   select 'MohammadBadarneh_07889855_12021990'       from dual union all
   select 'SomethingElse_07889855_12021990'          from dual union all
   select 'SomethingDifferentHere_07889855_12021990' from dual union all
   select 'MohammadBadarneh_07869855_11021990'       from dual
  ),
  upos (ps) as(
    select level as ps
      from dual
   connect by level <= 3
  ), 
  PData as(
    select Name
         , Phone
         , to_date(Date1, 'dd-mm-yyyy') date1
      from (select q.*
                 , row_number() over(partition by ps order by ps) rn
              from (select u.ps 
                         , regexp_substr(col, '[^_]+', 1, u.ps) res 
                      from t1
                     cross join upos u
                   ) q
           ) s
     pivot (
       min(res)
       for ps in (1 as Name,2 Phone,3 Date1)
     )
  )

select Name
     , Phone
     , Date1
  from PData 
```

结果：

```
Name                    Phone         Date1 
---------------------------------------------
MohammadBadarneh        07889855     12-02-1990 
SomethingElse           07889855     12-02-1990 
MohammadBadarneh        07889855     11-02-1990 
SomethingDifferentHere  07869855     12-02-1990 
```

这是一个[**演示**](http://www.sqlfiddle.com/#!4/c5b66/2)

然后您可以使用`insert`语句将上述查询的输出插入到您的表中：

```
 insert into your_table_name
      select Name
           , Phone
           , to_date(Date1, 'dd-mm-yyyy')
        from (select q.*
                   , row_number() over(partition by ps order by ps) rn
                from (select u.ps 
                           , regexp_substr(t.your_string_column, '[^_]+', 1, u.ps) res 
                        from Yor_Table_With_String t
                       cross join (select level as ps
                                     from dual
                                  connect by level <= 3
                                  ) u
                     ) q
             ) s
       pivot (
         min(res)
         for ps in (1 as Name,2 Phone,3 Date1)
        ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T11:54:40.987

这是仅使用正则表达式的另一种解决方案：

```
with v_data as(
   select 'MohammadBadarneh_07889855_12021990' col1 from dual union all
   select 'JohnDoe_07869856_01011980' col1 from dual
  )
select 
  regexp_replace(col1, '^([[:alpha:]]+)_([[:digit:]]+)_([[:digit:]]+)', '\1') as name,
  regexp_replace(col1, '^([[:alpha:]]+)_([[:digit:]]+)_([[:digit:]]+)', '\2') as phone,
  regexp_replace(col1, '^([[:alpha:]]+)_([[:digit:]]+)_([[:digit:]]+)', '\3') as date1
   from v_data 
```

它三次使用相同的正则表达式将字符串分成三部分（由_分隔）。

# c# - 如何通过在网格视图中聚焦单元格来选择以单元格为中心的单元格值

> ID：13158138
> 
> 赞同：0
> 
> 时间：2012-10-31T12:37:41.657
> 
> 标签：c#, xtragrid

我希望当我输入 gridview 的任何单元格时，应该选择该单元格值。

应在 Gridview Cells 中选择 Meana 聚焦单元格值。

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:43:02.470

利用：

```
OptionsBehavior.EditorShowMode 
```

您的问题的解决方案在[这里](http://www.devexpress.com/Support/Center/KB/p/A277.aspx)

# php - cakephp的静态页面如何进行搜索操作

> ID：13158144
> 
> 赞同：0
> 
> 时间：2012-10-31T12:38:16.270
> 
> 标签：php, regex, cakephp, static, controller

我正在为一个站点使用 cakephp 2.0，在这个站点中，我有页面控制器，其中包含所有静态页面，例如关于我们、公司、服务……我想使用搜索插件让用户搜索视图内容。但是我找不到任何可以帮助我定位**静态页面**进行搜索的插件。谁能帮我想出在静态页面上实现搜索功能的想法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:38:24.123

没有内置的方法来搜索静态页面，因为它们只是磁盘上的文件。

你有三个选择

*   建立一个模型来保存数据，有点像 CMS，这样您就可以使用 mysql 搜索。
*   谷歌搜索网站
*   阅读所有页面的内容并在内容上使用 preg_match() 或类似方法来查找匹配项的更hacky方法。

第一个选项可能是最好的，具体取决于您的用例。如果其面向公众的内容，第二个选项是最简单的。第三种选择是一个可怕的想法

# android - Facebook SDK 3.0 for Android - 如何将旧的 Facebook.Dialog 与新的 Session 机制集成

> ID：13158148
> 
> 赞同：1
> 
> 时间：2012-10-31T12:38:46.580
> 
> 标签：android, facebook, facebook-android-sdk

我在集成新的 Android 版 Facebook SDK 3.0 的提要对话框时遇到问题。该文档非常清楚如何做到这一点，但是省略了一个非常重要的案例，只是提到它好像它几乎永远不会发生。

[Facebook 提要对话框文档](https://developers.facebook.com/docs/howtos/androidsdk/3.0/feed-dialog/#step2)

当用户想要发布一些东西，但他还没有登录并且没有会话和访问令牌时，就会出现这种情况。

SDK 提供了一种在旧 Facebook 对象中设置访问令牌（和整个会话）的方法，但是在用户登录并通过提要对话框发布他的提要后，我找不到获取会话或访问令牌的方法。

所以流程是：

1.  用户按下分享按钮。
2.  他没有登录，所以没有会话访问令牌
3.  `facebook.dialog()`启动并显示登录对话框
4.  用户登录并分享他的链接
5.  他回到了应用程序，但他仍然没有会话访问令牌，并且他没有登录到 facebook，尽管他在一分钟前登录了。

我的问题是，如何在步骤 5 中获取访问令牌（肯定是在某处创建的）并在我的程序中使用它来创建有效的 SDK 3.0 Session 对象，以便用户在使用后可以使用 Access Token 获得有效的 Session脸书对话框？

- - 编辑 - -

我只是想澄清一下，当手机上没有安装本机 facebook 应用程序时，我猜会使用 webview 对话框。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T03:22:50.803

如果您在 Facebook 类上设置了打开的 Session，则 dialog() 不应提示用户登录。

这是一个例子：

```
public class MainActivity extends Activity {
    boolean pendingShare;
    Session session;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        if (savedInstanceState != null) {
            pendingShare = savedInstanceState.getBoolean("pendingShare");
            session = Session.restoreSession(this, null, new SessionCallback(), savedInstanceState);
        }

        ((Button) findViewById(R.id.share_button)).setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                onClickShare();
            }
        });
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putBoolean("pendingShare", pendingShare);
        Session.saveSession(session, outState);
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if (session != null) {
            session.onActivityResult(this, requestCode, resultCode, data);
        }
    }

    private void onClickShare() {
        pendingShare = true;
        session = new Session(MainActivity.this);
        session.openForRead(new Session.OpenRequest(MainActivity.this).setCallback(new SessionCallback()));
    }

    private void share(Session session) {
        Facebook facebook = new Facebook(session.getApplicationId());
        facebook.setSession(session);
        facebook.dialog(this, "feed", null);
        pendingShare = false;
    }

    class SessionCallback implements Session.StatusCallback {
        @Override
        public void call(Session session, SessionState state, Exception exception) {
            if (state.isOpened() && pendingShare) {
                share(session);
            }
        }
    }
} 
```

保存/恢复“pendingShare”（和会话）在这里很有用，因为您的 Activity 可以在登录期间卸载，这会记住在重新加载 MainActivity 时触发 dialog() 调用。

# android - JQM，Android 2.3，密码输入栏不正确覆盖

> ID：13158156
> 
> 赞同：3
> 
> 时间：2012-10-31T12:39:08.633
> 
> 标签：android, cordova, jquery-mobile

安卓2.3版本。使用 jQuery mobile 和 phonegap 开发的应用程序。为什么密码输入字段表现得如此奇怪？白色输入字段边框覆盖在不正确的位置。

![密码输入框边框覆盖](../Images/94278c660a1cfed6340e491c25a20ab8.png)

HTML 代码：

```
<div data-role="content" class="loginContent">
        <div id="loginLogoContent">
            <div id="loginLogo">
                <img src="../../css/images/ivo.png" style="vertical-align:middle" />
            </div>          
            <div class="logoText">xxx</div>
        </div>

        <div>
            <form id="loginForm">   
                <input type="text" id="card" placeholder="xxx" class="required">                
                <input type="password" id="password" placeholder="yyy" class="required">

                <label for="remember_login">xxx</label>
                <input type="checkbox" name="remember_login" id="remember_login">               

                <input id="loginButton" type="submit" name="login_submit" value="yyy">              
            </form>

            <input id="registerButton" type="button" name="register" value="xxx" class="registerButton">
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:54:10.203

抱歉，无法重现您的问题，请看截图（HTC Desire，Android 2.2，Dolphin 浏览器），看起来不错...

![在此处输入图像描述](../Images/cd0348a1b4aab153d9b2efada71e5cdd.png)

# java - JAVA JPA 验证异常

> ID：13158160
> 
> 赞同：-1
> 
> 时间：2012-10-31T12:39:23.230
> 
> 标签：java, exception, jpa

当我想在数据库中插入行时，我遇到了一个 JPA 异常问题，我遇到了这个异常：

```
javax.persistence.RollbackException: Exception [EclipseLink-7124] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.ValidationException
Exception Description: An unsuccessful writeChanges() has been called on this UnitOfWork.  Given the danger that partial changes have been written to the datastore but not rolled back (if inside external transaction), the only supported operations now are release, global transaction rollback, any non-object level query or SQLCall execution.  The operation commit was attempted.
    at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commitInternal(EntityTransactionImpl.java:102)
    at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commit(EntityTransactionImpl.java:63)
    at database.TarpineManager.commitTransaction(TarpineManager.java:23)
    at gijos.InsertToDB.insertLink(InsertToDB.java:57)
    at gijos.LygiagretusIrasymas.run(LygiagretusIrasymas.java:26)
Caused by: Exception [EclipseLink-7124] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.ValidationException
Exception Description: An unsuccessful writeChanges() has been called on this UnitOfWork.  Given the danger that partial changes have been written to the datastore but not rolled back (if inside external transaction), the only supported operations now are release, global transaction rollback, any non-object level query or SQLCall execution.  The operation commit was attempted.
    at org.eclipse.persistence.exceptions.ValidationException.unitOfWorkAfterWriteChangesFailed(ValidationException.java:1802)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitAndResume(UnitOfWorkImpl.java:1119)
    at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commitInternal(EntityTransactionImpl.java:84)
    ... 4 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T03:35:40.513

1.  你有一个 javax.persistence.RollbackException

2.  这仅在 EntityTransaction.commit() 失败时引发

3.  EclipseLink 中的根本原因是 org.eclipse.persistence.exceptions.ValidationException 在此 UnitOfWork 上调用了不成功的 writeChanges()。鉴于部分更改已写入数据存储但未回滚（如果在外部事务中）的危险，现在唯一支持的操作是发布、全局事务回滚、任何非对象级查询或 SQLCall 执行。已尝试操作提交。

到目前为止，您需要提供一些代码或一些交易描述。

我想也许你： 1\. 开始一个事务，更新/持久化数据，提交失败，收到一个 RollbackException 2\. 在相同的持久性上下文中继续使用相同的实体对象并收到另一个 RollbackException。这是非法的。第一次收到 RollbackException 时，必须清除持久性上下文并重新开始：

如果这是 try:`EntityManager.clear()`在错误处理代码中使用，则在开始新事务之前重新检索对象。

# android - 定时器任务在android中无限期后停止运行

> ID：13158163
> 
> 赞同：4
> 
> 时间：2012-10-31T12:39:37.017
> 
> 标签：android, service, timer, timertask, background-service

我是android的新手。我正在开发一个应用程序，其中每 5 秒在后台执行一段特定的代码。为了实现这一点，我正在使用一个带有计时器的服务，其中包含一个计时器任务。有时它工作正常，但经过一些不确定的服务正在运行，但计时器任务在 android 中自动停止。这是我的代码，请帮忙。提前致谢。

```
 public void onStart(Intent intent, int startid) {
    //this is the code for my onStart in service class
    int delay = 1000; // delay for 1 sec.

    final int period = 5000; // repeat 5 sec.

    timer = new Timer();
    timer.schedule(new TimerTask() {
        @Override
        public void run() {
                        executeCode();
    }, delay, period);

}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T12:50:29.040

在我看来，您应该使用带有 IntentService 的 AlarmManager 来安排重复的后台任务而不是 Timer 任务。Timer 是不可靠的，并且在 Android 框架中并不总是能正常工作。此外，如果手机处于睡眠状态，计时器将不会执行。您可以让闹钟唤醒手机以使用 AlarmManager 执行您的代码。

看：

[https://developer.android.com/reference/android/app/AlarmManager.html](https://developer.android.com/reference/android/app/AlarmManager.html)

[http://mobile.tutsplus.com/tutorials/android/android-fundamentals-scheduling-recurring-tasks/](http://mobile.tutsplus.com/tutorials/android/android-fundamentals-scheduling-recurring-tasks/)

[http://android-er.blogspot.in/2010/10/simple-example-of-alarm-service-using.html](http://android-er.blogspot.in/2010/10/simple-example-of-alarm-service-using.html)

如果手机重启，您将需要再次触发警报管理器。有关如何执行此操作的确切说明，请参阅本教程：

[http://www.androidenea.com/2009/09/starting-android-service-after-boot.html](http://www.androidenea.com/2009/09/starting-android-service-after-boot.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:50:04.433

通常，当设备长时间进入睡眠模式时，TimerTask 会停止。尝试使用 AlarmManager 类来满足您的要求。AlarmManager 也使用较少的电池消耗。

这是一个例子，如何使用[AlarmManager](https://stackoverflow.com/a/12974736/996493)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:52:55.303

我想如果您使用具有内置方法的倒计时计时器，您可以更好地完成此任务，该方法在您指定的时间后调用

例子

```
public class CountDownTest extends Activity {
TextView tv; //textview to display the countdown
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
tv = new TextView(this);
this.setContentView(tv);
//5000 is the starting number (in milliseconds)
//1000 is the number to count down each time (in milliseconds)
MyCount counter = new MyCount(5000,1000);
counter.start();
}
//countdowntimer is an abstract class, so extend it and fill in methods
public class MyCount extends CountDownTimer{
public MyCount(long millisInFuture, long countDownInterval) {
super(millisInFuture, countDownInterval);
}
@Override
public void onFinish() {
tv.setText(”done!”);
}
@Override
public void onTick(long millisUntilFinished) {
tv.setText(”Left: ” + millisUntilFinished/1000);
}
} 
```

**编辑**
您可以在 OnTick 方法中执行任何功能，在上面的示例中每 1000 毫秒调用一次

[在此处](http://developer.android.com/reference/android/os/CountDownTimer.html)了解更多信息

# html - bing地图控制不尊重div

> ID：13158165
> 
> 赞同：2
> 
> 时间：2012-10-31T12:39:44.697
> 
> 标签：html, ajax, bing-maps

从这个页面[http://www.bingmapsportal.com/isdk/ajaxv7#CreateMap1](http://www.bingmapsportal.com/isdk/ajaxv7#CreateMap1)我能够创建一个地图。这是html代码：

```
<div class="fluid-row" style="height:300px;">
<div class="span12">
    <div id="prdmap" class="map">
    </div>
</div> 
```

和javascript：

```
var map = null;
$(document).ready(function(){
    map = new Microsoft.Maps.Map(document.getElementById('prdmap'), {
        credentials: 'api_key',
        enableSearchLogo: false,
        enableClickableLogo: false
    });
    map.setView({mapTypeId : Microsoft.Maps.MapTypeId.road});
}); 
```

但是当地图加载时，它会占用整个屏幕，而不是其容器的高度和宽度。这可以取容器 div 的高度和宽度吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T21:43:41.260

使用位置参数解决了我的问题。

```
<div id="prdmap" style="position:absolute; width:400px; height:400px;></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T18:02:45.047

如果您在容器元素上指定（或继承）了宽度和高度，地图将采用它。您发布的代码没有显示`prdmap`. `prdmap`可能有关于为 id 、 class`map`或`<div>`under class等定义的宽度和高度的 CSS 样式`span12`......你明白了。检查您的 html 源代码，看看为什么地图会在整个屏幕上显示。如果可能的话，也尝试定义一个明确的宽度和高度：

```
 <div id='prdmap' style="width:500px; height:500px">
        </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-26T08:28:38.220

您必须在创建地图时指定高度和宽度。

```
 map = new Microsoft.Maps.Map(document.getElementById('prdmap'), {
    credentials: 'api_key',
    enableSearchLogo: false,
    enableClickableLogo: false,
    width:500,
    height:500
}); 
```

# objective-c - 使用 GCD xcode 在块外分配值

> ID：13158166
> 
> 赞同：0
> 
> 时间：2012-10-31T12:39:47.797
> 
> 标签：objective-c, ios, xcode, objective-c-blocks, grand-central-dispatch

我正在使用亚马逊网络服务上传图片。我无法访问 GCD 块之外的值。我应该如何访问其他类中“myString”的值？

我的代码：

```
-(void)request:(AmazonServiceRequest *)request didCompleteWithResponse:(AmazonServiceResponse *)response
{
    AppDelegate *del = [[UIApplication sharedApplication]delegate];
    if(indicatorView!=nil)
    {
        [indicatorView removeFromSuperview];
        indicatorView=nil;
    }

    UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Upload Completed" message:@"The image was successfully uploaded." delegate:self cancelButtonTitle:@"Dismiss" otherButtonTitles:nil, nil];
    [alert show];

    //del.fileName = url;

    // Set the content type so that the browser will treat the URL as an image.
    /*S3ResponseHeaderOverrides *override = [[S3ResponseHeaderOverrides alloc] init];
    override.contentType = @"image/jpeg";

    // Request a pre-signed URL to picture that has been uplaoded.
    S3GetPreSignedURLRequest *gpsur = [[S3GetPreSignedURLRequest alloc] init];
    gpsur.key = @"NameOfThePicture";
    //del.fileName = gpsur.key;
    gpsur.bucket = @"pic-bucket";
    gpsur.expires = [NSDate dateWithTimeIntervalSinceNow:(NSTimeInterval) 3600]; // Added an hour's worth of seconds to the current time.

    gpsur.responseHeaderOverrides = override;

    // Get the URL
    NSError *error;
    url = [self.s3 getPreSignedURL:gpsur error:&error];
    NSString *myString = [url absoluteString];

    NSLog(@"myStringgg====>%@",myString);
    del.fileName = myString;
    NSLog(@"URL=====>%@",url);*/

    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    dispatch_async(queue, ^
    {

        // Set the content type so that the browser will treat the URL as an image.
        S3ResponseHeaderOverrides *override = [[S3ResponseHeaderOverrides alloc] init];
        override.contentType = @"image/jpeg";

        // Request a pre-signed URL to picture that has been uplaoded.
        S3GetPreSignedURLRequest *gpsur = [[S3GetPreSignedURLRequest alloc] init];
        gpsur.key = @"NameOfThePicture";
        //del.fileName = gpsur.key;
        gpsur.bucket = @"pic-bucket";
        gpsur.expires = [NSDate dateWithTimeIntervalSinceNow:(NSTimeInterval) 3600]; // Added an hour's worth of seconds to the current time.

        gpsur.responseHeaderOverrides = override;

        // Get the URL
        NSError *error;
        NSURL *url = [self.s3 getPreSignedURL:gpsur error:&error];
        NSString *myString = [url absoluteString];
        //del.fileName = myString;
        NSLog(@"URL=====>%@",url);

        if(url == nil)
        {
            if(error != nil)
            {
                dispatch_async(dispatch_get_main_queue(), ^{

                    NSLog(@"Error: %@", error);
                    //[self showAlertMessage:[error.userInfo objectForKey:@"message"] withTitle:@"Browser Error"];
                });
            }
        }
        else
        {
            dispatch_async(dispatch_get_main_queue(), ^{

                //del.fileName = myString;

                //NSLog(@"haURL===>%@",del.fileName);
            });

            del.fileName = myString;
        }

    //NSLog(@"nameURL====>%@",url);
    });

} 
```

现在我想访问“myString” var，以便我可以在其他类中访问它的值。谢谢

属性声明：

@property(nonatomic,strong)NSString *fileName; //在 appdelegate.h @property(nonatomic,strong) NSString *File; //与GCD在同一个控制器中

更新：

```
 PictureViewController *pic = [[PictureViewController alloc]init];

        **NSLog(@"newNameeee====>%@",pic.File);**

        AppDelegate *del = [[UIApplication sharedApplication]delegate];
        NSLog(@"LocatedAt====>%@",del.locatedAt);

        NSLog(@"FileSize====>%d",del.fileSize);
        **NSLog(@"FileName====>%@",del.fileName);** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:19:40.360

问题是您尝试`del.fileName`在完成的异步部分之前访问`request:didCompleteWithResponse:`。

尝试以下操作：稍微修改您的代码，将其`del.fileName = myString`移至主踏板上的调度块：

```
-(void)request:(AmazonServiceRequest *)request didCompleteWithResponse:(AmazonServiceResponse *)response
{
    AppDelegate *del = [[UIApplication sharedApplication]delegate];
    if(indicatorView!=nil)
    {
        [indicatorView removeFromSuperview];
        indicatorView=nil;
    }

    UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Upload Completed" message:@"The image was successfully uploaded." delegate:self cancelButtonTitle:@"Dismiss" otherButtonTitles:nil, nil];
    [alert show];

    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    dispatch_async(queue, ^
    {

        // Set the content type so that the browser will treat the URL as an image.
        S3ResponseHeaderOverrides *override = [[S3ResponseHeaderOverrides alloc] init];
        override.contentType = @"image/jpeg";

        // Request a pre-signed URL to picture that has been uplaoded.
        S3GetPreSignedURLRequest *gpsur = [[S3GetPreSignedURLRequest alloc] init];
        gpsur.key = @"NameOfThePicture";
        //del.fileName = gpsur.key;
        gpsur.bucket = @"pic-bucket";
        gpsur.expires = [NSDate dateWithTimeIntervalSinceNow:(NSTimeInterval) 3600]; // Added an hour's worth of seconds to the current time.

        gpsur.responseHeaderOverrides = override;

        // Get the URL
        NSError *error;
        NSURL *url = [self.s3 getPreSignedURL:gpsur error:&error];
        NSString *myString = [url absoluteString];
        //del.fileName = myString;
        NSLog(@"URL=====>%@",url);

        if(url == nil)
        {
            if(error != nil)
            {
                dispatch_async(dispatch_get_main_queue(), ^{

                    NSLog(@"Error: %@", error);
                    //[self showAlertMessage:[error.userInfo objectForKey:@"message"] withTitle:@"Browser Error"];
                });
            }
        }
        else
        {
            dispatch_async(dispatch_get_main_queue(), ^{

                del.fileName = myString;
                [del didReceivePictureFilename];
            });
        }
    });
} 
```

比您`didReceivePictureFilename`在您的声明中声明并将`AppDelegate`代码的访问部分移动到该方法。但是您必须在其他地方执行开始上传的部分。（您问题中的代码未显示该部分）

当然，您也可以`fileName`完全省略该属性并直接在`didReceivePictureFilename`回调中传递文件名：

```
[del didReceivePictureFilename:myString]; 
```

# c# - 如何在 C# 中从 Photoshop 中取出文件？

> ID：13158169
> 
> 赞同：1
> 
> 时间：2012-10-31T12:39:50.183
> 
> 标签：c#, photoshop

> **可能重复：**
> [读取 PSD 文件格式](https://stackoverflow.com/questions/414852/reading-psd-file-format)

C# 中是否有一个库可以让我读取 Photoshop 文件 (PSD) 中的图层并将它们提取为透明图像 (PNG)？

Photoshop 有一个批处理命令，可以提取单个文件中的所有图层，但没有透明 PNG 的选择。我的目标是创建一个小型实用程序，它可以根据需要创建图层组合（例如，考虑创建卡片组）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:40:25.887

CodeProject 上有一篇不错的[文章](http://www.codeproject.com/KB/graphics/PSDParser.aspx)可能会有所帮助。这是一个关于 SO 讨论 PSD 文件格式解析与 C#的[线程。](https://stackoverflow.com/questions/414852/reading-psd-file-format)

# asp.net-mvc-4 - DD4T 默认路由不起作用

> ID：13158180
> 
> 赞同：5
> 
> 时间：2012-10-31T12:40:17.330
> 
> 标签：asp.net-mvc-4, tridion, tridion-2011, dd4t

我正在使用带有 SDL Tridion 2011 和 ASP.NET MVC4 的 DD4T 框架

我有一些我想使用的非 DD4T 控制器和视图，但是当我尝试访问这些 url 时出现 404 错误。

这是我的路由表

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        // Route for SDL Tridion UI 2011 (Aka !SiteEdit)
        routes.MapRoute(
            "SiteEditBlankPage",
            "se_blank.html",
            new { controller = "Empty", action = "Index" });

        routes.MapRoute(
            null, // Route name
            "xml/{*PageId}", // URL with parameters
            new { controller = "Page", action = "Xml" }, // Parameter defaults
           new { pageId = @"^(.*)?$" } // Parameter constraints
        );

        // Tridion page route
        routes.MapRoute(
           "TridionPage",
           "{*PageId}",
           new { controller = "Page", action = "Page" }, // Parameter defaults
           new { pageId = @"^(.*)?$" } // Parameter constraints
        );

        routes.MapRoute(
            null, // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );
    } 
```

我曾尝试将默认路由移到 Tridion 之上，但随后我得到了 Tridion 页面的 404。

让它工作的唯一方法似乎是有一个特定的路线到我的控制器，例如：

```
 routes.MapRoute(
           null, // Route name
           "MyController/{action}/{id}", // URL with parameters
           new { controller = "MyController", action = "Index", id = UrlParameter.Optional } // Parameter defaults
       ); 
```

有人有想法么？由于上述解决方案并不理想。

（我的 web.config 中没有任何 UI 2012 配置）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T14:02:55.797

AFAICS 有几个选项：

1.  如果您可以从“普通”网址（扩展名、启动路径等）中识别出 Tridion 网址，则可以通过调整 TridionPage 路由来解决它。但我认为这对你来说是没有选择的，因为如果你能从普通的 URL 中识别出 Tridion url，你已经想出了这个解决方案；）

2.  在 TridionPage 路由上实现路由约束。如果请求的 url 在 Broker 中，请检查此 routeconstraint。如果为真：返回真，否则为假。如果它返回 false，则下一个路由（匹配的）将处理该请求。虽然不确定性能。

3.  您自己的选择：普通页面的特定路线。

我确定我错过了一些选择。希望其他人在这里分享它们。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-31T14:27:46.430

正常的 DD4T 操作是让 Tridion 拥有 URL，即捕获所有 URL 并将它们传递给一个 PageController。这会干扰基于名称的控制器/动作的自动路由，因此必须提供这些细节之一！

我个人喜欢 Albert 的第一个建议，因为它很简单。例如，仅将以“.html”结尾的 URL 映射到 Tridion。不幸的是，这会导致 SG 中的默认页面出现问题，因为无法识别“/sg”，即使您在代理中可能有“/sg/index.html”。解决此问题的一些替代方法：

*   为所有一级结构组（/news、/products 等）配置显式路由

*   将所有 Tridion 页面发布到您网站的一个子部分，例如 /content 并将其映射到特定路线

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-31T13:26:50.867

我们只是在根目录中放置了一个页面 se_blank.html，并确保它只部署到登台，因此它在需要的地方并且不需要特定的路由。

当然，这并不能真正回答您的问题，但您也许可以将其视为一种选择。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-31T13:37:40.357

也许您可以创建一个捕获所有映射，例如 TridionPage 映射到一个控制器，该控制器根据 RedirectToAction 函数的参数重定向到正确的控制器和动作？

不确定这是否是您的理想解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-03T08:16:42.817

我们的解决方案：Tridion 不允许在链接中创建带有“mvc”的页面 => 我们定义了一个约束，在 RouteConfig 中忽略带有“mvc”的 PageId。

所以：当 DD4T 收到对“tridion”页面的请求时，它使用 TridionPage 路由，而当它是请求 /Controller/Action 时，它使用默认的 MVC 路由。

```
routes.MapRoute(
"TridionPage",
"{PageId}",
new { controller = "Page", action = "Page" }, //parameter defaults
new { PageId = @"(?!mvc.)*" } // Parameter constraint: ignore PageId with '/'
);

//Default MVC route
routes.MapRoute(
"MVC", //Route name
"mvc/{controller}/{action}/{id}", 
new { controller = "Home", action = "Index", id = UrlParameter.Optional}
); 
```

# google-tv - 谷歌电视模拟器 - 谷歌地图支持

> ID：13158185
> 
> 赞同：0
> 
> 时间：2012-10-31T12:40:32.867
> 
> 标签：google-tv

我正在尝试在 Google TV Emulator 上运行 Google TV Maps 示例。我面临一个问题，因为模拟器不包含运行应用程序所需的谷歌地图应用程序。

谷歌电视支持谷歌地图吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:26:35.290

Google TV 模拟器并未包含所有标准的 Google TV 应用程序。真正的 Google TV 确实支持 Google 地图以及您无法使用模拟器完成的许多其他事情。如果您正在构建针对 Google TV 的应用程序（移植平板电脑应用程序或编写新应用程序），我建议您购买 Google TV 设备。

# jbpm - 在 Guvnor BRL 编辑器中添加导入语句

> ID：13158186
> 
> 赞同：0
> 
> 时间：2012-10-31T12:40:34.333
> 
> 标签：jbpm, drools-guvnor

我在drools guvnor 中创建了一个“新规则”。我想用流程实例变量创建一个事实。我试过的规则：

```
rule "CreatePersonFact"
    ruleflow-group "CreatePerson"
        dialect "mvel"
        when
            $process: WorkflowProcessInstance()
        then
            Person $person = new Person();
            $person.name=$processInstance.getVariable("person_name");
            $person.age=$processInstance.getVariable("age");
            $person.weight=$processInstance.getVariable("weight");
            insert($person);
    end 
```

当我构建包时，我收到错误“*无法解析 ObjectType WorkflowProcessInstance* ”

我希望我们应该在规则中导入*org.drools.runtime.process.WorkflowProcessInstance*来解决这个错误。如何在 Guvnor 的 BRL 编辑器中添加此导入语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T08:09:44.800

在 Guvnor 中，导入是在包中配置的，而不是在每个规则中。在构建包的同一窗口中，有一个框可以添加自己的导入。默认情况下，您将看到模型中每个类的条目，但您也可以添加自己的导入（只要您导入的类在 Guvnor 的类路径中）。

最好的祝福，

# .net - .NET File.Move 到新目录不会导致数据传输吗？

> ID：13158188
> 
> 赞同：1
> 
> 时间：2012-10-31T12:40:38.483
> 
> 标签：.net, file, io

我们有一个将非常大的数据文件导出到 Windows 网络共享的应用程序。我们可能需要在稍后的处理过程中将该文件移动到同一共享下的不同文件夹中。我们通常使用 File.Move 重命名同一目录中的文件，因此开销很小。但我担心对新目录执行此操作，因为它会导致数据被复制，这是不可接受的。在 linux/unix 中， mv 命令只是操作文件夹节点，所以只要它是相同的设备/卷，它就很快。但是对于 Windows，我认为在很多情况下它会先复制然后删除源。这是我想避免的。

所以我的问题是针对 Windows 网络共享上的 .NET 4 File.Move()，我想将文件从一个目录移动到另一个相邻的目录，移动数据会产生成本还是快速简单文件结构操作与文件大小无关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:45:12.107

如果文件移动到同一卷上的另一个文件夹，则底层 Windows API 调用只会移动文件的目录条目（而不是复制它）。这适用于网络卷和本地卷。如果共享不以某种方式跨越多个卷，那么您应该没问题。试试看。

# android - 通过 Android 获取图像并从捕获图像中获取文本

> ID：13158196
> 
> 赞同：0
> 
> 时间：2012-10-31T12:41:26.453
> 
> 标签：android, image-processing

我正在尝试制作一个应用程序来使用 android 获取图像，然后从捕获的图像中获取文本（它可能类似于 OCR）。如果有人对此有任何想法，请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:45:37.327

要捕获图像，您可以查看此[http://marakana.com/forums/android/examples/39.html](http://marakana.com/forums/android/examples/39.html)或此[http://notes.hfoss.org/index.php/Tutorial:Camera_and_Gallery_Demo](http://notes.hfoss.org/index.php/Tutorial:Camera_and_Gallery_Demo)。

对于 OCR，您可以查看此线程[是否有适用于 Android 的免费 OCR 库？](https://stackoverflow.com/questions/1106202/android-ocr).

希望这可以帮助。

# c# - 图像预览 asp.net 与 c#

> ID：13158199
> 
> 赞同：0
> 
> 时间：2012-10-31T12:41:35.207
> 
> 标签：c#, asp.net, listbox, image

我正在努力从 a`image`进入`picturebox`asp.net 上的 a `list-box`，`list-box`读取一个目录，然后将其填充`jpegs`到文件中。这需要在 c# 中完成，目前我对它是如何完成的有一个粗略的想法，但我没有得到任何图片显示：

```
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

        if (!IsPostBack)
        {
          DirectoryInfo infoDir = new DirectoryInfo(@"G:/Test_Directory");            
          FileInfo[] infoFile = infoDir.GetFiles("*.jpeg");
          foreach( FileInfo file in infoFile )
          {
               lstDirectory.Items.Add(file.Name);
          }
        }    
    }

    protected void lstDirectory_SelectedIndexChanged(object sender, EventArgs e)
    { 
        Server.MapPath(lstDirectory.SelectedValue.ToString());
        imageChange.ImageUrl = lstDirectory.SelectedValue.ToString();            
    }
} 
```

这可能是路径不正确的情况，或者可能是其他情况。有人可以指导我到哪里出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:45:14.877

您没有使用`MapPath`. 试试这个。

```
 var img = Server.MapPath(lstDirectory.SelectedValue.ToString());
    imageChange.ImageUrl = img; 
```

**更新：**您的图像文件文件夹似乎在网络文件夹之外，将其移到里面。没有简单的方法可以让它工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:01:30.260

我建议你`add New folder`在你的解决方案中`add all your images in to it...`

```
protected void Page_Load(object sender, EventArgs e)
    {

        if (!IsPostBack)
        {
          DirectoryInfo infoDir = new DirectoryInfo(Server.MapPath("Images"));//this is the image foled name            
          FileInfo[] infoFile = infoDir.GetFiles("*.jpeg");
          foreach( FileInfo file in infoFile )
          {
               lstDirectory.Items.Add(file.Name,"Images/"+file.Name);
             //here you are setting relative path of images in your value field
          }
        }    
    } 
```

然后将图像路径设置为 thr Server.MapPath 如下....

```
protected void lstDirectory_SelectedIndexChanged(object sender, EventArgs e)
    { 
        if(File.Exists(Server.MapPath(lstDirectory.SelectedValue.ToString())))
        {
          imageChange.ImageUrl =Server.MapPath(lstDirectory.SelectedValue.ToString());            
        }
    } 
```

# python - 从文件中读取字符串的某些部分

> ID：13158207
> 
> 赞同：1
> 
> 时间：2012-10-31T12:42:06.133
> 
> 标签：python

很长一段时间后尝试python。

我有一个文件有一行：

```
My_NUMBER                 =  24 
```

我想提取这个数字（这里我假设为 24，但这是我想根据 My_NUMBER 提取的东西。在我的 python 代码中，我能够读取该行

```
with open(filename) as f: lines = f.read().splitlines()

for line in lines:
    if line.startswith(' My_NUMBER                 ='):
        line=(line.rsplit(' ', 1)[0])
        num= line.rsplit('=',1)[1].split("=")[0]
        num = num.strip(" ")
        print num 
```

但是，这会打印空白输出而不是数字。如果我在这里做任何明显错误的事情，任何人都可以评论吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:45:54.673

这是正则表达式的完美工作：

```
import re
text = open(filename).read()
print re.search("^\s*My_NUMBER\s*=\s*(\d*)\s*$", text, re.MULTILINE).group(1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T12:46:16.733

我会选择这样的东西

```
with open(filename) as f:
    for line in f:
        line = line.replace(' ', '')
        if line.startswith('My_NUMBER'):
            number = line.partition('=')[2]
            print number 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:44:39.033

使用正则表达式可能会更好

```
import re

txt='My_NUMBER                 =  24'

re1='.*?'   # Non-greedy match on filler
re2='(\\d+)'    # Integer Number 1

rg = re.compile(re1+re2,re.IGNORECASE|re.DOTALL)
m = rg.search(txt)
if m:
    int1=m.group(1)
    print "("+int1+")"+"\n" 
```

从这里： [http ://txt2re.com/index-python.php3?s=My_NUMBER%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20 %20%20=%20%2024&4](http://txt2re.com/index-python.php3?s=My_NUMBER%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20=%20%2024&4)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T12:44:51.243

尝试这样的事情：

```
In [49]: with open("data1.txt") as f:
   ....:     for line in f:
   ....:         if line.strip():           #if line is not an empty line
   ....:             if "My_NUMBER" in line:
   ....:                 num=line.split("=")[-1] # split line at "=" and 
                                                 # return the last element
   ....:                 print num
   ....:                 
   ....:                 
  24 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T12:46:00.110

```
for line in lines:
    if line.startswith(' My_NUMBER                 ='):
        num = line.split('=')[-1].strip()
        print num 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T12:46:47.030

```
import re

exp = re.compile(r'My_NUMBER *= *(\d*)')
with open('infile.txt','r') as f:
    for line in f:
        a = exp.match(line)
        if a:
            print a.groups()[0] 
```

未经测试，但应该可以工作

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-31T12:55:18.877

我想说，最整洁的方法是遍历每一行，基于 拆分`=`，然后检查之前的值是否`=`是`MY_NUMBER`

该[`str.partition`](http://docs.python.org/2/library/stdtypes.html#str.partition)函数对此很有用（它类似于 split，但总是返回 3 个块）。也使用`str.strip`意味着你不需要担心空格

```
with open(filename) as f:
    lines = f.readlines()

for line in lines:
    key, eq, value = line.partition("=")
    if key.strip() == "MY_NUMBER":
        num = value.strip()
        print num 
```

# file-upload - Yii 中不同类型文件的不同 maxsizes

> ID：13158209
> 
> 赞同：1
> 
> 时间：2012-10-31T12:42:13.523
> 
> 标签：file-upload, yii

我用 yii 上传文件，我想验证这些文件。但是对于不同类型的文件 - 不同的大小。例如 - 如果用户想要上传 jpg 或 pdf 文件 - maxSize - 10 MB。- 对于视频文件 - maxSize - 150 MB。

我怎么能这样？

此变体不起作用，因为仅适用于第二条规则。

```
public function rules()
{
    return array(
        array('files', 'validateFiles', 'types' => 'jpg, gif, png, pdf, doc, docx', 'maxSize' => 10 * 1024 * 1024, 'on' => 'upload'),
        array('files', 'validateFiles', 'types' => 'avi, mpg, flv, mov, mpeg, mp4, 3gp, wmv', 'maxSize' => 150 * 1024 * 1024, 'on' => 'upload'),
}

public function validateFiles($attribute, $params)
{
    $validator = CValidator::createValidator('file', $this, $attribute, $params);
    $files = array();
    foreach(CUploadedFile::getInstances($this, $attribute) as $file) {
        $this->$attribute = $file;
        $files[] = $file;
        $validator->validate($this, $attribute);
    }
    $this->$attribute = $files;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T20:31:42.667

您可以允许最大值。要上传的文件大小，然后在收到文件时验证 - 在模型或控制器中验证。无论如何，文件大小仅在文件上传后才在 Yii 中验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:12:37.060

你这样做的方式是行不通的。

如果代码对第一个数组进行验证，它将对第二个数组失败，反之亦然。除非满足这两个条件，否则您的模型将永远不会验证。

实现这一点的最佳方法是扩展 validateFiles 函数并检查那里的扩展名/文件大小。

例如，首先将规则功能更改为两者的组合

```
public function rules()
{
    return array(
        array('files', 'validateFiles', 'types' => 'jpg, gif, png, pdf, doc, docx, avi, mpg, flv, mov, mpeg, mp4, 3gp, wmv', 'maxSize' => 150 * 1024 * 1024, 'on' => 'upload')
    )
} 
```

这样，文件类型的检查就完成了，并且完成了总最大文件大小的检查。

之后，更改 validateFiles 函数以检查扩展名/文件大小

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T11:16:37.563

我的解决方案 - 创建新的验证器 - 例如 PictureVideoValidator 并在此文件中选择哪种文件类型并进行验证。

```
<?php
class PictureVideoValidator extends CValidator
{
    public $allowEmpty = false;
    public $maxSizePicture = 4194304; // 4 Mb
    public $maxSizeVideo = 157286400; // 150 Mb

    protected function validateAttribute($object, $attribute)
    {
        $file = $object->$attribute;

        if (!$file instanceof CUploadedFile) {
            $file = CUploadedFile::getInstance($object, $attribute);
            if ($file == null)
                return $this->emptyAttribute($object, $attribute);
        }

        $type = CFileHelper::getMimeType($file->tempName);
        list($type, $subtype) = @explode('/', $type);

        $allowedTypes = array('image', 'video');

        if (!in_array($type, $allowedTypes)) {
            $message = Yii::t('ext', 'File cannot be uploaded because it is not a valid image/video file');
            $this->addError($object, $attribute, $message);
            return;
        }

        $fileSize = filesize($file->tempName);
        if ($type == 'image') {
            $maxSize = $this->maxSizePicture;
        } else if ($type == 'video') {
            $maxSize = $this->maxSizeVideo;
        }

        if ($fileSize > $maxSize) {
            $message = Yii::t('ext', 'The file "{fileName}" is too large. Its size cannot exceed {maxSize} bytes.');
            $this->addError($object, $attribute, $message, array(
                '{fileName}' => $file->getName(),
                '{maxSize}' => $this->maxSizePicture
            ));
        }
    }

    protected function emptyAttribute($object, $attribute)
    {
        if (!$this->allowEmpty) {
            $message = $this->message !== null ? $this->message : Yii::t('yii', '{attribute} cannot be blank.');
            $this->addError($object, $attribute, $message);
        }
    }

}

?> 
```

# msbuild - 通过 TFS 2012 构建无法显示有用的错误

> ID：13158211
> 
> 赞同：4
> 
> 时间：2012-10-31T12:42:19.057
> 
> 标签：msbuild

我正在通过 TFS 运行 CI 构建，并且构建服务器（不是本地）上的构建失败。

该错误并非完全出乎意料，因为可能需要在构建服务器上安装某些东西，但构建输出中没有错误消息。

我已经编辑了构建以将输出设置为“诊断”，但除了下面的一般错误之外，仍然没有收到任何错误。

我只得到这个错误：

> 异常消息：MSBuild 错误 1 ​​已结束此构建。您可以在上述消息中找到有关此错误原因的更多具体信息。（类型 BuildProcessTerminateException）
> 
> 异常堆栈跟踪：在 System.Activities.Statements.Throw.Execute（CodeActivityContext 上下文）
> 
> 在 System.Activities.CodeActivity.InternalExecute（ActivityInstance 实例，ActivityExecutor 执行器，BookmarkManager 书签管理器）
> 
> 在 System.Activities.Runtime.ActivityExecutor.ExecuteActivityWorkItem.ExecuteBody（ActivityExecutor 执行器，BookmarkManager 书签管理器，位置结果位置）

我可以看到错误被捕获的位置，更远的日志文件，但它同样是免费的信息：

> 处理异常
> 
> 将 CompilationStatus 设置为失败
> 
> 初始属性值
> 
> ...
> 
> 最终属性值
> 
> ...

在本节之前没有任何问题的迹象。

有没有办法在构建日志中获得更好的异常消息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T16:31:44.847

在没有像样的错误消息的情况下，我只是登录到构建服务器并在 Visual Studio 中手动运行构建。

我的具体问题是，Fakes 仅在 Visual Studio 2012 Ultimate 中可用，而构建服务器只有高级版。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-12T15:52:01.710

我在使用 Microsoft Fakes 的 2 个解决方案时遇到了同样的问题，但在我的情况下，我在构建服务器上安装了 VS2012 Ultimate（更新 3）。

我团队中的某个人已将 FakesAssemblies 文件夹签入 TFS。如果我将构建服务器上的 FakesAssemblies 文件夹重命名为 FakesAssemblies2 并将构建设置为仅清理输出，则构建能够创建新的 FakesAssemblies 文件夹并创建文件。

如果我查看 FakesAssemblies2 文件夹（最初签入 TFS 的文件夹），所有文件都被标记为只读。我假设由于只读标志，构建在覆盖这些文件方面存在问题。

# java - 从 Java 调用 Oracle 函数

> ID：13158212
> 
> 赞同：22
> 
> 时间：2012-10-31T12:42:17.717
> 
> 标签：java, oracle, jdbc

我在使用 ojdbc14.jar 从 Java 1.6 调用 Oracle FUNCTION（不是存储过程）时遇到问题。

当我从远程服务器调用它时，我不知道该函数包含什么，我所知道的是：

```
FUNCTION ap_ch_get_acct_balances (VAR_PI_MOB_NO_ACCT_NO VARCHAR2,
VAR_REPLY_CODE OUT NUMBER, VAR_EXT_RESPONSE OUT VARCHAR2, VAR_PO_ACC_BAL OUT CHAR,
VAR_PO_ACCT_NO OUT CHAR) 
```

我需要使用的架构是：FCRLIVE.AP_CH_GET_ACCT_BALANCES

我正在尝试这个：

```
String call = "{ ? = call FCRLIVE.AP_CH_GET_ACCT_BALANCES(?, ?, ?, ?, ?) }";
CallableStatement cstmt = conn.prepareCall(call);
cstmt.setQueryTimeout(1800);
cstmt.setString(1, inputCode);
cstmt.registerOutParameter(2, oracle.jdbc.OracleTypes.NUMBER);
cstmt.registerOutParameter(3, oracle.jdbc.OracleTypes.VARCHAR);
cstmt.registerOutParameter(4, oracle.jdbc.OracleTypes.CHAR);
cstmt.registerOutParameter(5, oracle.jdbc.OracleTypes.CHAR);
cstmt.executeUpdate(); 
```

但我一直在日志文件中看到这一点：

```
java.sql.SQLException: ORA-01006: bind variable does not exist
at oracle.jdbc.dbaccess.DBError.throwSqlException(DBError.java:134)
    at oracle.jdbc.ttc7.TTIoer.processError(TTIoer.java:289)
    at oracle.jdbc.ttc7.Oall7.receive(Oall7.java:573)
    at oracle.jdbc.ttc7.TTC7Protocol.doOall7(TTC7Protocol.java:1891)
    at oracle.jdbc.ttc7.TTC7Protocol.parseExecuteFetch(TTC7Protocol.java:1093)
    at oracle.jdbc.driver.OracleStatement.executeNonQuery(OracleStatement.java:2047)
    at oracle.jdbc.driver.OracleStatement.doExecuteOther(OracleStatement.java:1940)
    at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:2688)
    at oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:589) 
```

我是否调用了错误的函数？或者这可能是什么？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-31T12:45:22.333

它应该是：

```
String call = "{ ? = call FCRLIVE.AP_CH_GET_ACCT_BALANCES(?, ?, ?, ?, ?) }"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T11:27:05.947

您需要定义函数返回的参数：

```
String call = "{ ? = call FCRLIVE.AP_CH_GET_ACCT_BALANCES(?, ?, ?, ?, ?) }";
                  CallableStatement cstmt = conn.prepareCall(call);
                  cstmt.setQueryTimeout(1800);
                  cstmt.registerOutParameter(1, ...Type returned by function);
                  cstmt.setString(2, inputCode);
                  cstmt.registerOutParameter(3, oracle.jdbc.OracleTypes.NUMBER);
                  cstmt.registerOutParameter(4, oracle.jdbc.OracleTypes.VARCHAR);
                  cstmt.registerOutParameter(5, oracle.jdbc.OracleTypes.CHAR);
                  cstmt.registerOutParameter(6, oracle.jdbc.OracleTypes.CHAR);
                  cstmt.executeUpdate(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-04T05:18:05.733

您的返回参数只有一个。第一个。这是唯一一个你必须注册它的类型。所以，第一件事：

> cstmt.registerOutParameter(1, oracle.jdbc.OracleTypes.VARCHAR);

然后根据需要设置/注册其他参数，但您有 6 个参数，如问号，您只处理 5 个。您还需要设置第 6 个参数：

> cstmt.setString(6, myVariable);

如果不清楚，请发布您正在使用的 sql 函数的原型，我会指出您确切缺少的绑定。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-04-27T13:22:16.357

实际上有多种方法可以做到这一点。但其中最简单的就是触发查询。这是如何做到的。

```
String sql="select myFunction('"+number+"','"+date"') from dual";
statement.execute(sql); 
```

如果您使用 JDBC，请设置输入和输出参数。

如果您使用的是休眠，请使用类似这样的命名查询： **YourMapping.hbm.xml**

```
<sql-query name="my_function" callable="true">
<return alias="demo" class="net.bean.Demo">
<return-property name="id" column="id"/>
<return-property name="fname" column="fname"/>
<return-property name="lname" column="lname"/>
</return>
    {?=call demoFunc(:param1,:param2)}
</sql-query> 
```

现在这将为函数创建一个命名查询

接下来要做的就是使用以下代码简单地调用它

```
Query query=session.getNamedQuery("my_function");
query.setParameter("parma1",date);
query.setParameter("parma2",number);
query.executeUpdate(); 
```

请注意，在 hbm.xml 文件中，如果函数返回适当的值，则仅当您映射了返回值时，返回类名称和属性才适用。

# tcl - TCL：ANSI C++ 声明语法的正则表达式

> ID：13158214
> 
> 赞同：2
> 
> 时间：2012-10-31T12:42:27.703
> 
> 标签：tcl

我是 TCL 的初学者，并试图编写一个 TCL 脚本来解析和打印用于变量声明的 C++ 代码文件中的所有行。到目前为止，我能够检测并打印块 {} 内的所有语句。现在我明白 Ansi C++ 模块中不同的变量声明格式可能是：

```
int  x;
int  y=9;
int  x,y;
int  x,y=0;
int  x,y=0,c;
short const x=9;
int* x,y,c=null;
short const *x=NULL;
MyObj aobj();
MyObj aobj(x,y);
Myobj * a = dynamic_cast<A *>(b);
String x = "test"; 
```

我不确定我是否错过了任何一个。

我正在做的是我正在拆分线路：

```
if { [ string equal $lineType "statement" ] == 1 } {
        puts $lineValue
        set wordList [regexp -inline -all -- {\S+} $lineValue]
} 
```

通过其列表索引处的不同值验证以下格式：

```
qualifier varaiablename = value;
qualifier varaiablename;
qualifier varaiablename = value, variablename; 
```

但我无法实现它。我相信 TCL 正则表达式将帮助我们在这里实现目标。但是我无法断定我应该在这里使用什么正则表达式/代码。

我想避免寻找 C++ 定义的数据类型/关键字，而是寻找实际上是 C++ 语句的字符串中的特定格式：

```
qualifier type name;
qualifier type name, name2;
qualifier type name = value; 
```

更确切地说

```
word word word;
word word word, word;
word word word = integer, word = word; 
```

按照上面提到的声明格式。

请提供您宝贵的想法/意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T02:59:36.313

有[C/C++ 标记](https://github.com/CorsixTH/CorsixTH/blob/master/LDocGen/c_tokenise.lua)器，它使用 LPEG 语法将 C/C++ 文件转换为标记数组，并且还有用于将标记数组漂亮地打印为 HTML 的代码。

[ltcl](http://www.tset.de/ltcltk/README_ltcl.html)是 Tcl 解释器与 Lua 的简单绑定，可用于集成它。

# oracle - 如何获取与 Oracle 中的 ID 不匹配的行？

> ID：13158221
> 
> 赞同：1
> 
> 时间：2012-10-31T12:42:45.220
> 
> 标签：oracle

我想编写一个 Oracle 查询，它将列出 repo1 中的所有 id、name 和文件，这些文件在 file_repo 中具有匹配的 id，但在 repo1_status 中没有找到匹配的 id

```
repo1
id, name    
1,  abc 
2,  def
3,  emm
4,  xdd

file_repo
id, file
1,  a.c
2,  d.c
3,  e.c
4,  x.c

repo1_status
id, status, status_desc
1,  good,   new generated
3,  good,   new generated 
```

到目前为止，我编写了以下查询，但它不起作用。任何帮助

```
SELECT repo1.id, name,file
FROM repo1,file_repo,repo1_status
WHERE (repo1.id=file_repo.id and repo1.id!=repo1_status.id) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:46:17.237

你可以试试这个

```
 SELECT repo1.id, name,file_repo
 FROM repo1 INNER JOIN file_repo ON repo1.id = file_repo.id 
 WHERE NOT EXISTS (SELECT id FROM repo1_status WHERE repo1_status.id = repo1.id) 
```

[这](http://www.orafaq.com/wiki/EXISTS)是关于 EXISTS 的链接

**或者**

```
SELECT repo1.id, name,file_repo
 FROM ((repo1 INNER JOIN file_repo ON repo1.id = file_repo.id)
      LEFT JOIN file_repo.id ON file_repo.id = repo1.id)
 WHERE file_repo.id is null 
```

A `left join`like this 是一样的`NOT EXISTS`，它可能有更好的性能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:54:05.347

尝试

```
 SELECT repo1.id, name,file_repo
 FROM repo1 INNER JOIN file_repo ON repo1.id = file_repo.id 
 WHERE repo1.id not in (SELECT id FROM repo1_status) 
```

# gmail - .Net Web 应用程序中的 Gmail 或 Skype 等自定义聊天

> ID：13158222
> 
> 赞同：0
> 
> 时间：2012-10-31T12:42:56.270
> 
> 标签：gmail, chat

我们开发像 Gmail 这样的网络应用程序。为此需要Gmail或Skype之类的聊天系统。但我们不知道是否有任何开源可用？或者我们需要遵循哪些方法。如果有人有这方面的经验，请将您的建议添加到这篇文章中。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:55:42.127

[GTalk 使用一种称为XMPP](http://en.wikipedia.org/wiki/Extensible_Messaging_and_Presence_Protocol) / [Jingle](http://en.wikipedia.org/wiki/Jingle_%28protocol%29)的开放协议。如果你只想要即时消息，XMPP 应该就足够了，你可以找到更多关于它的信息（例如，一个[库列表](http://xmpp.org/xmpp-software/libraries/)）。如果您还想进行语音通话和所有功能，您可以使用[谷歌库](http://code.google.com/p/libjingle/)，它是开源的（[BSD 许可证](http://opensource.org/licenses/BSD-3-Clause)）。

# html - 表：td 的影响比实际存在的多列

> ID：13158225
> 
> 赞同：0
> 
> 时间：2012-10-31T12:43:09.663
> 
> 标签：html, html-table

我必须使用的项目使用很多表，这些表可以隐藏任意数量的列，并且“页脚”td 单元格将跨越固定数量的列。因此，如果一个表有 10 个列，则隐藏 2 个（'display:none'），最后一行有一个跨越 10 个的单元格。（[此处](http://jsfiddle.net/HenriPablo/4MZu6/1/)为小提琴示例）。

我对此感到不满，因为它是“错误的”，现在我发现自己做的事情与权衡取舍完全一样，因为出于实际原因。因此，我查看了 fiddle xross 浏览器，它似乎“工作”还可以（包括我必须支持的 IE7）。

这种做法可能产生什么影响？

```
<style type="text/css">
.hidden{ display:none; }​
</style>
<table border="1">

<tr>
    <td class="header"> header 1</td>
    <td class="header hidden"> header 2</td>
    <td class="header"> header 3</td>
    <td class="header"> header 4</td>
</tr>

<tr>
    <td class="cell"> cell 1</td>
    <td class="cell hidden"> cell 2</td>
    <td class="cell"> cell 3</td>
    <td class="cell"> cell 4</td>
</tr>

<tr>
    <td colspan="4">
        odd ball
    </td>
</tr>
</table>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:03:51.983

这不是您问题的答案，而更像是“答案”。

我在创建一个表格中包含很多隐藏单元格/行的表格时遇到了同样的挑战，我觉得我失去了使用表格的一些控制权，所以我用 div 代替了表格。使用 div，我可以完全控制隐藏或不隐藏某些内容时会发生什么。

# c# - 只允许数字和负值

> ID：13158226
> 
> 赞同：5
> 
> 时间：2012-10-31T12:43:12.370
> 
> 标签：c#, .net, winforms

我有一个`textbox`只需要接受数字（可以是十进制值）和负值。

目前我有这样的`KeyPress`事情

```
 if (!char.IsControl(e.KeyChar) && !char.IsDigit(e.KeyChar) && e.KeyChar != '.')
    {
        e.Handled = true;                
    } 
```

为了允许负值，我还应该做什么？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-31T12:51:39.507

```
if (!char.IsControl(e.KeyChar) && (!char.IsDigit(e.KeyChar)) 
        && (e.KeyChar != '.')  && (e.KeyChar != '-'))
    e.Handled = true;

// only allow one decimal point
if (e.KeyChar == '.' && (sender as TextBox).Text.IndexOf('.') > -1)
    e.Handled = true;

// only allow minus sign at the beginning
if (e.KeyChar == '-' && (sender as TextBox).Text.Length > 0)
    e.Handled = true; 
```

正如 LB 在评论中正确提到的那样，这将不允许一些高级符号，例如`3E-2`，但对于简单的数字，它可以解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-05T13:20:42.660

@DennisTraub 的作品，但是它忽略了一些极端情况。例如，如果文本框中的文本是“-11”并且用户将光标放在文本的开头，他或她可以输入另一个字符，这样文本可以是“1-11”或“.- 11"。这是他的答案的扩展，似乎对我有用。

```
TextBox textBox = sender as TextBox;
// If the text already contains a negative sign, we need to make sure that 
//    the user is not trying to enter a character at the start
// If there is already a negative sign and the negative sign is not selected, the key press is not valid
// This allows the user to highlight some of the text and replace it with a negative sign
if ((textBox.Text.IndexOf('-') > -1) && textBox.SelectionStart == 0 && !textBox.SelectedText.Contains('-'))
{
    e.Handled = true;
}
// Do not accept a character that is not included in the following
if (!char.IsControl(e.KeyChar) && !char.IsDigit(e.KeyChar) && e.KeyChar != '.' && e.KeyChar != '-')
{
    e.Handled = true;
}
// Only allow one decimal point
if ((e.KeyChar == '.') && (textBox.Text.IndexOf('.') > -1))
{
    e.Handled = true;
}            
// The negative sign can only be at the start
if ((e.KeyChar == '-'))
{
    // If the cursor is not at the start of the text, the key press is not valid
    if (textBox.SelectionStart > 0)
    {
        e.Handled = true;
    }
    // If there is already a negative sign and the negative sign is not selected, the key press is not valid
    // This allows the user to highlight some of the text and replace it with a negative sign
    if (textBox.Text.IndexOf('-') > -1 && !textBox.SelectedText.Contains('-'))
    {
        e.Handled = true;
    }
} 
```

我已经分解了一些可以合并为一行的东西。但基本上你还需要检查文本中是否已经存在负号，以及用户是否将光标放在文本的开头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T12:51:13.570

我认为文本框有一个属性，您可以在其中设置所插入内容的输入。虽然我目前无法检查这一点。

否则，作为替代方案，您可以在提交值时尝试将输入解析为双精度值。就像是：

```
double myDouble;
try
{
    myDouble = double.parse(textbox.Text)
}
catch (Exception e)
{
    MessageBox.Show("Input is incorrect", "Error")
} 
```

这可能不是最好的解决方法，但它可能只是解决问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T12:57:33.570

连接 Validating 事件，如下所示：

```
private void myTextBox_Validating(object sender, CancelEventArgs event) {
    decimal d;
    if(!decimal.TryParse(myTextBox.Text, out d) {
        event.Cancel = true;
        //this.errorProvider1.SetError(myTextBox, "My Text Box must be a negative number."); //optional
        return;
    }

    if(d >= 0) {
        event.Cancel = true;
        //this.errorProvider1.SetError(myTextBox, "My Text Box must be a negative number."); //optional
        return;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T12:52:59.653

就像是：

```
var regex = new Regex("^[-]?\d+(\.\d+)?$", RegexOptions.Compiled);
Match m = regex.Match(textbox.Text + e.KeyChar);
e.Handled = m.Success; 
```

**编辑**：它现在允许任何实数

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T12:53:01.243

```
// Boolean flag used to determine when a character other than a number is entered. 
        private bool nonNumberEntered = false;

        // Handle the KeyDown event to determine the type of character entered into the control. 
        private void textBox1_KeyDown(object sender, System.Windows.Forms.KeyEventArgs e)
        {
            // Initialize the flag to false.
            nonNumberEntered = false;

            // Determine whether the keystroke is a number from the top of the keyboard. 
            if (e.KeyCode < Keys.D0 || e.KeyCode > Keys.D9)
            {
                // Determine whether the keystroke is a number from the keypad. 
                if (e.KeyCode < Keys.NumPad0 || e.KeyCode > Keys.NumPad9)
                {
                    // Determine whether the keystroke is a backspace. 
                    if(e.KeyCode != Keys.Back)
                    {
                        // A non-numerical keystroke was pressed. 
                        // Set the flag to true and evaluate in KeyPress event.
                        nonNumberEntered = true;
                    }
                }
            }
            //If shift key was pressed, it's not a number. 
            if (Control.ModifierKeys == Keys.Shift) {
                nonNumberEntered = true;
            }
        }

        // This event occurs after the KeyDown event and can be used to prevent 
        // characters from entering the control. 
        private void textBox1_KeyPress(object sender, System.Windows.Forms.KeyPressEventArgs e)
        {
            // Check for the flag being set in the KeyDown event. 
            if (nonNumberEntered == true)
            {
                // Stop the character from being entered into the control since it is non-numerical.
                e.Handled = true;
            }
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-31T12:58:26.290

试试这个正则表达式

```
"/^(?!0*[.,]0*$|[.,]0*$|0*$)\d+[,.]?\d{0,2}$/" 
```

并使用`System.Text.RegularExpressions`命名空间

请参阅此处的示例：http: [//msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)

# c# - 在 C# 中重载 = 运算符

> ID：13158227
> 
> 赞同：17
> 
> 时间：2012-10-31T12:43:15.750
> 
> 标签：c#, overloading, operator-keyword

好的，我知道这是不可能的，但这是制定问题标题的最佳方式。问题是，我正在尝试使用我自己的自定义类而不是浮点数（用于确定性模拟），并且我希望语法尽可能接近。所以，我当然希望能够写出类似的东西

```
FixedPoint myNumber = 0.5f; 
```

可能吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-31T12:44:42.850

`FixedPoint`是的，如果此类是由您编写的，则通过创建隐式类型转换运算符。

```
class FixedPoint
{
    public static implicit operator FixedPoint(double d)
    {
        return new FixedPoint(d);
    }
} 
```

如果读者/编码人员不明白 a`double`可以转换为`FixedPoint`，您也可以改用显式类型转换。然后你必须写：

```
FixedPoint fp = (FixedPoint) 3.5; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-31T12:52:12.013

重载`implicit`强制转换运算符：

```
class FixedPoint
{
    private readonly float _floatField;

    public FixedPoint(float field)
    {
        _floatField = field;
    }

    public static implicit operator FixedPoint(float f)
    {
        return new FixedPoint(f);
    }

    public static implicit  operator float(FixedPoint fp)
    {
        return fp._floatField;
    }
} 
```

所以你可以使用：

```
FixedPoint fp = 1;
float f = fp; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T12:49:24.057

创建隐式类型转换。

这是一个例子：

```
<class> instance = new <class>();

float f = instance; // We want to cast instance to float.

public static implicit operator <Predefined Data type> (<Class> instance)
{
    //implicit cast logic
    return <Predefined Data type>;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T12:50:30.923

如果在 = 重载中隐式不是您想要的，另一种选择是在您的类上使用显式运算符，如下所示，它将强制转换为它，使其被用户理解：

```
public static explicit operator FixedPoint(float oc)     
{         

     FixedPoint etc = new FixedPoint();          
     etc._myValue = oc;          
     return etc;      
}

... usage

FixedPoint myNumber = (FixedPoint)0.5f; 
```

# c# - Excel：处理 workbook.open 的异常

> ID：13158230
> 
> 赞同：0
> 
> 时间：2012-10-31T12:43:19.330
> 
> 标签：c#, excel

如何在“C#”中为错误处理异常，例如->

```
Code:
Workbooks.Open(folderPath,filename,Excel.XlPlatform.xlWindows,"",""....)

"System.Runtime.InteropServices.COMException (0x80070BBC): Office has detected a problem with this file. To help protect your computer this file cannot be opened.
at Excel.Workbooks.Open" 
```

很少有优秀的作品没有错误，但很少有人能超越错误。请提出一些答案。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:57:00.923

尝试以下代码打开 Excel 文件：

```
 String connString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + excelFilePath + ";Extended Properties=Excel 12.0;";
    // Create connection object by using the preceding connection string.
    OleDbConnection objConn = new OleDbConnection(connString);
    // Open connection with the database.
    objConn.Open(); 
```

# android - 动态壁纸 - 在预览模式下超出内存预算

> ID：13158232
> 
> 赞同：0
> 
> 时间：2012-10-31T12:43:27.863
> 
> 标签：android, memory, bitmap, live-wallpaper

我的动态壁纸遇到了这个问题。它加载了大约 10 张图像，一张足够大（960x600），其他的要小得多，大的一张是 jpg，在 png 中更小（因为透明度）。无论如何，它工作得很好，除了预览模式。当我第一次运行它时，它很好。另一次- 再次确定。但是当运行第三次或第四次时 - 它由于超出 VM 内存预算而崩溃。似乎它将位图加载到内存中，并且在关闭预览模式后不会将其删除。那么预览模式后如何清理内存呢？这样会有空间再次打开它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:54:01.310

好吧，看来我刚刚找到了一个解决方案，所以也许它会帮助其他人。我已经添加 ：

```
myBitmap.recycle();
myBitmap1.recycle();
etc... 
```

在我的项目中使用的每个位图的 onDestroy 和 onSurfaceDestroyed 中。如此简单，解决了整个事情。

# ios - 如何从iOS中的字符串中删除空格

> ID：13158236
> 
> 赞同：-2
> 
> 时间：2012-10-31T12:43:37.750
> 
> 标签：ios, nsstring, nscharacterset

> **可能重复：**
> [在 Objective-C 中替换字符串中的一个](https://stackoverflow.com/questions/5223701/replacing-one-character-in-a-string-in-objective-c)
> [字符从 NSString 中删除所有空格](https://stackoverflow.com/questions/7628470/remove-all-whitespace-from-nsstring)

`@"this string contains blank spaces"`.

我们怎样才能把这个字符串转换成`@"thisstringcontainsblankspaces"`.

我的意思是我们如何修剪字符串中的所有空格和换行符。我已经尝试`NSCharecterSet`过使用`whitespaceCharacterSet`. 但这只会删除字符串末尾的空格，而不是中间的空格......

有任何想法吗？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T12:45:57.700

使用此代码删除空格：

```
NSString *str    =  @"this string contains blank spaces";
NSString *newStr = [str stringByReplacingOccurrencesOfString:@" " withString:@""]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T12:46:52.320

```
str = [str stringByReplacingOccurrencesOfString:@" " withString:@""]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:55:12.897

使用以下代码：

```
[YourString stringByReplacingOccurrencesOfString:@" " withString:@""]; 
```

您可以传递要替换的任何字符或单词

```
stringByReplacingOccurrencesOfString:@" " 
```

并替换单词/字符串/字符：

```
withString:@" " 
```

享受编码。

# objective-c - 子类和类方法

> ID：13158237
> 
> 赞同：3
> 
> 时间：2012-10-31T12:43:43.607
> 
> 标签：objective-c, subclass, uibezierpath

我想继承 UIBezierPath 以添加 CGPoint 属性。

```
@interface MyUIBezierPath : UIBezierPath
@property  CGPoint origin;
@end 
```

我这样使用它：

```
MyUIBezierPath * path0 = [MyUIBezierPath bezierPathWithRoundedRect:
    CGRectMake(0, 0, 20, 190) byRoundingCorners:UIRectCornerAllCorners 
    cornerRadii:CGSizeMake(10, 10)]; 
```

编译器抱怨：`Incompatible pointer types initializing 'MyUIBezierPath *__strong' with an expression of type 'UIBezierPath *'`

`bezierPathWithRoundedRect`返回一个 UIBezierPath。

所以我不能发送`setOrigin:`到 path0，而不是 MyUIBezierPath 的一个实例。

我应该修改什么以`bezierPathWithRoundedRect`返回我的类的实例？

编辑：阅读相关问题后，我觉得在这种情况下子类化可能不是最好的事情（扩展 UIBezierPath 功能）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T00:03:32.747

One way you can do that is by overriding the method in the subclass and changing the class of the returned object:

```
#import <objc/runtime.h>

+ (UIBezierPath *)bezierPathWithRoundedRect:(CGRect)rect cornerRadius:(CGFloat)cornerRadius
{
    UIBezierPath *path = [super bezierPathWithRoundedRect:rect cornerRadius:cornerRadius];

    object_setClass(path, self);

    return path;
} 
```

The cleaner way to do this is to use Associated Objects to add the property to `UIBezierPath` in a category.

e.g.:

```
static const char key;
- (CGPoint)origin
{
    return [objc_getAssociatedObject(self, &key) CGPointValue];
}

- (void)setOrigin:(CGPoint)origin
{
    objc_setAssociatedObject(self, &key, [NSValue valueWithCGPoint:origin], OBJC_ASSOCIATION_RETAIN_NONATOMIC);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:00:59.200

当然，bezierPathWithRoundedRect 返回一个 UIBezierPath，因为它是 UIBezierPath 类的方法。您必须在新子类 (MyUIBezierPath) 中创建一个方法，该方法等效于显然创建该父类实例的父类之一。

但我认为这很难做到，因为没有方法可以调用。FWIK几乎不可能没有像“initWithRoundedRect：byRoundingCorners：cornerRadii：”这样的方法

# php - PHP：“...的声明应该与...的声明兼容”

> ID：13158243
> 
> 赞同：4
> 
> 时间：2012-10-31T12:44:10.517
> 
> 标签：php, symfony

我想为可增删改查的实体创建一个接口（可以保存和删除）。这是我的抽象类：

```
abstract class AbstractCrudableEntity extends AbstractEntity
{
    abstract public function doSave();
    abstract public function doDelete();
} 
```

我的实现类需要这些方法的几个额外参数。这是实现类的签名：

```
class Contact extends AbstractCrudableEntity {
    public function doSave(User $user, \UberClientManager $manager);
    public function doDelete(User $user, \UberClientManager $manager);
} 
```

我了解 PHP 要求实现类具有与父类相同的方法参数（有几个问题可以回答这个问题：例如[this](https://stackoverflow.com/questions/3115388/declaration-of-methods-should-be-compatible-with-parent-methods-in-php)）。所以这不是问题。

然而，我最近在 Symfony 中遇到了一些处理身份验证令牌的代码。类`UsernamePasswordToken`extends `AbstractToken`，并且在方法中有一组不同的参数`__construct()`：[`AbstractToken::__construct()`](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Security/Core/Authentication/Token/AbstractToken.php#L38)与[`UsernamePasswordToken::__construct()`](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Security/Core/Authentication/Token/UsernamePasswordToken.php#L34).

我的问题是 Symfony 是如何做到这一点的？这和我的代码有什么区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T12:47:52.973

重写构造函数是一种[特殊情况](http://php.net/construct)：

> 与其他方法不同，当使用与父方法不同的参数覆盖时，PHP 不会生成`E_STRICT`级别错误消息。`__construct()``__construct()`

你*不能*用其他方法做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:48:24.313

您的子方法必须具有与抽象父类中的抽象方法相同数量的参数。

您示例中的构造函数不是抽象的 - 孩子只是覆盖它。

# javascript - 我可以在javascript中的其他数组位置插入整个数组吗？

> ID：13158246
> 
> 赞同：0
> 
> 时间：2012-10-31T12:44:13.883
> 
> 标签：javascript, arrays, dynamic-arrays

我有一个名为*arr1的数组和一个名为**arr2*的第二个数组。两者都是动态创建的（我的意思是 arr2 每次进入一段时间都不同，而 arr1 它是相同的，但每次都由 arr2 新数组填充）。

我希望*arr1*的每个位置都有一个不同的数组（在示例中 arr2 总是相同的，但没关系），我该怎么做？

我试过这样：

```
//Some context
arr1[x] = new Array();
arr2[y] = new Array();
while(j < 10){
  arr2[j] = j;
  j++;
}
while(x < 10){
  arr1[x] = [arr2]; //problem
  x++;
}

arr1[x] = new Array(otherArr.length);

arr1[x] = [arr2]  (?)

arr1[x] = arr2 (?)

arr1[x] = new Array(arr2.length)
arr1[x] = arr2 (?) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:49:39.943

```
for(var i=0; i<arr1.length; i++)
  arr1[i] = arr2; 
```

编辑： `for(var i=0; i<arr1.length; i++) arr1[i] = arr2.slice(0);` 如果要复制数组而不是使用引用，请使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:49:38.747

如果 array1 的长度 > 0，那么您可以使用此方法将 array1 中的每个位置替换为 array2。

> ```
> array1 = ["","",""]
> array2 = [1,2,3]
> 
> for (var i=0; i<array1.length; i++)
>   {
>   array1[i] = array2;
>   } 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:56:44.380

如果您想`arr2`用作模板，以便以后对“行”的修改不会影响其他人：

```
var arr1 = [1,2,3];
var arr2 = [4,5,6];

for (var i=arr1.length;i--;) arr1[i] = arr2.concat(); // create a copy 
```

此时，您等效于：

```
var arr1 = [
  [4,5,6],
  [4,5,6],
  [4,5,6]
]; 
```

…这样您就可以更改`arr1[0][0] = 0`并查看：

```
[
  [0,5,6],
  [4,5,6],
  [4,5,6]
] 
```

代替

```
[
  [0,5,6],
  [0,5,6],
  [0,5,6]
] 
```

因为这里的一些其他答案会导致。

# javascript - 为什么这个字段未定义？

> ID：13158248
> 
> 赞同：0
> 
> 时间：2012-10-31T12:44:25.973
> 
> 标签：javascript, html

在我提交表单并返回页面后，提交的字段显示不需要的文本“未定义”：

![在此处输入图像描述](../Images/e9068615eae057cf4cb9b6d8a7826499.png)

如何丢失文本“未定义”？我绝对没有做任何事情让它出现。这是 HTML：

```
<span class="small60">Nummer: 
<input onkeypress="javascript:searchWithEnter('Oversikt','fastsearch')" 
       title="<%=mouseOverFast %>" type="text" size="40" name="fastsearch"> 
```

剧本：

```
function searchWithEnter(action, command) {
    if (window.event && window.event.keyCode == 13) {
        document.actionForm.action.value = 'Oversikt';
        document.actionForm.actionCommand.value = 'fastsearch';
        document.actionForm.submit();
        disableAll();

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:46:04.553

`searchWithEnter`尝试使用未定义的变量设置字段的值。

编辑：我没有看到输入的值属性。

# eclipse - Mac 问题的黑莓应用程序开发设置...？

> ID：13158254
> 
> 赞同：0
> 
> 时间：2012-10-31T12:44:40.423
> 
> 标签：eclipse, plugins, blackberry, installation

我是黑莓移动应用程序开发的新手。我使用 mac 作为 os 和 eclipse juno。只需从[https://developer.blackberry.com/java/download/eclipse下载](https://developer.blackberry.com/java/download/eclipse)**BlackBerry Java Plug-in Setup**

当我尝试安装它时，它给了我以下警告 ![在此处输入图像描述](../Images/870fc2f3d08fcfb28b416d67d5865206.png)

当我使用链接**BlackBerry Desktop Software for Mac** [http://us.blackberry.com/404.html](http://us.blackberry.com/404.html)时。那里没有可用的页面。

任何面临同样问题的人。我应该怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:42:47.320

我得到了答案

链接嵌入**BlackBerry Desktop Software for Mac**已失效。它替换为以下一个。**实际上，它适用于 Mac，您必须在安装BlackBerry Java Plug-in Setup** 之前下载并安装[http://us.blackberry.com/software/desktop/desktop-mac.html](http://us.blackberry.com/software/desktop/desktop-mac.html)

# c# - 如何通过一些 api 在 Windows 7 中获取电池状态？

> ID：13158260
> 
> 赞同：1
> 
> 时间：2012-10-31T12:44:51.727
> 
> 标签：c#, windows-7, battery

我想知道有没有办法通过 c# 代码知道笔记本电脑的电池已充满电，或者电池充满时是否会引发任何事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:47:29.430

我猜你可以使用 WMI 类[Win32_Battery](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394074%28v=vs.85%29.aspx)。

有多个可能有用的字段 - `DesignCapacity`, `BatteryStatus`,`FullChargeCapacity`或`ExpectedLife`

所以我的猜测是，你可以使用 WMI 读取这两个值，然后计算`FullChargeCapacity/BatteryStatus/DesignCapacity/ExpectedLife`以找到电池健康百分比数。

# jquery - OnEdit 没有被调用

> ID：13158264
> 
> 赞同：-1
> 
> 时间：2012-10-31T12:45:06.373
> 
> 标签：jquery, jeditable

我正在使用 jQuery`.editable()`进行`<p>`编辑。

我要做的是在用户单击元素进行编辑时选择元素中已有的文本。

我已经读过这`OnEdit`是每次用户单击 .editable 对象时我应该用来调用函数的选项，但由于某种原因，我的测试`alert()`根本没有被调用。

JS：

```
 this.$('.name').editable(function (value, settings) {
        if (value.length > 50)
            value = value.substr(0, 50);
        that.model.save("name", value);
        return(value);
    }, HotelNinjas.Settings.textPluginData);
    this.showRoomType();
    return this;
},
...

onEdit: function (e) {
    alert("edit"); // <<--- DOESN'T GET CALLED
}
}); 
```

HTML：

```
<p class="name">Some Text</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:58:17.613

请发布更多代码，甚至更好，创建一个 jsFiddle。在任何情况下，请尝试使用它来代替在编辑时发出警报。

```
$('.name').on('edit',function (e) {
    alert("edit");
}); 
```

您的 javascript 控制台是否偶然输出任何错误？

# json - JSON 中的特殊字符

> ID：13158270
> 
> 赞同：-1
> 
> 时间：2012-10-31T12:45:14.260
> 
> 标签：json, special-characters

我收到了一些看起来像这样的 JSON：

```
{
  "result": {
    "customer": {
      "@username": "peter"
    }
  }
} 
```

然后我想在页面上显示用户名，这样做：

```
$("#result").html(data.result.customer.@username); 
```

但是，这不起作用，因为`@`它是无效字符。有没有办法在不改变 JSON 的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:51:34.417

`data.result.customer["@username"]`应该提供你想要的结果。

# java - 使用 xalan 扩展在 XSL 中处理 java 集合

> ID：13158272
> 
> 赞同：3
> 
> 时间：2012-10-31T12:45:15.103
> 
> 标签：java, xml, xslt, collections, xalan

我想迭代`ArrayList <String>`并将所有字符串放入输出树，但不知道该怎么做。

方法：

```
public ArrayList<String> getErrorList(String name) {
    if (errorMap.containsKey(name)) {
        return errorMap.get(name);
    }
    return new ArrayList<>();
} 
```

xsl 文件：

```
<xsl:variable name="list">
    <xsl:value-of select="validator:getErrorList($validator, 'model')"/>
</xsl:variable>

<tr>
    <td style="color: red;">
        <ul>
            <li> first string from ArrayList </li>
            . . .
            <li> last string from ArrayList </li>
        </ul>
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T14:22:55.093

您的错误是初始化变量，例如

```
<xsl:variable name="list">
    <xsl:value-of select="validator:getErrorList($validator, 'model')"/>
</xsl:variable> 
```

因为 xslt 认为，这个变量的值是`#STRING`，所以你会得到错误

> 对于扩展函数，找不到方法 java.util.ArrayList.size([ExpressionContext,] #STRING)。

您必须使用下一个声明，而不是上一个：

```
<xsl:variable name="list" select="validator:getErrorList($validator, 'model')"/> 
```

因此，方法`getErrorList`将返回`ArrayList`对象。接下来的代码将向您展示如何使用 XSL 函数迭代 ArrayList 集合：

```
<xsl:variable name="list" select="validator:getErrorList($validator, 'model')"/>
<xsl:variable name="length" select="list:size($list)"/>
<xsl:if test="$length > 0">
    <xsl:call-template name="looper">
        <xsl:with-param name="iterations" select="$length - 1"/>
        <xsl:with-param name="list" select="$list"/>
    </xsl:call-template>
</xsl:if>
. . .
<xsl:template name="looper">
    <xsl:param name="iterations"/>
    <xsl:param name="list"/>
    <xsl:if test="$iterations > -1">
        <xsl:value-of select="list:get($list, $iterations)"></xsl:value-of>
        <xsl:call-template name="looper">
             <xsl:with-param name="iterations" select="$iterations - 1"/>
               <xsl:with-param name="list" select="$list"/>
          </xsl:call-template>
     </xsl:if>
</xsl:template> 
```

所以，你必须使用递归，因为不可能在函数式语言中使用循环，比如 XSLT。你可以[在这里阅读](http://www.ibm.com/developerworks/xml/library/x-tiploop/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:05:43.520

您必须在样式表中为 Java 扩展函数定义命名空间。它应该看起来像`xmlns:yourchoice = "javapackage.classname`。假设 getErrorList 方法在 ErrorListClass 类中，它可能如下所示：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:validator="mypackage.ErrorListClass"
exclude-result-prefixes="filecounter" version="1.0"> 
```

然后在 XSLT 中调用它

```
<xsl:variable name="list">
<xsl:value-of select="validator:getErrorList($validator, 'model')"/>
</xsl:variable> 
```

# jquery - 如何在 jQuery 中切换

> ID：13158276
> 
> 赞同：1
> 
> 时间：2012-10-31T12:45:19.123
> 
> 标签：jquery

我想单击一个按钮（或在下面的示例中为一个链接）并在 2 个内容块之间切换，以从显示内容到编辑内容。

我有以下代码片段：

```
<style type="text/css">
    div.show {display:block;}
    input.hide {display:none;}
</style>

<a href="#">edit</a> <!--not sure what my jquery should look like to do toggling-->
<div class="show" id="d-01-on">Some content</div>
<input class="hide" id="d-01-off" name="d-01" value="Some content" /> 
```

感谢您的帮助。

[请参阅[如何简化和压缩重复的 jQuery 代码](https://stackoverflow.com/questions/13159735/how-to-toggle-within-a-content-list-in-jquery)以扩展此技术]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:49:06.543

使用 jquery 显示和隐藏元素的方法如下：

HTML：

```
<div id="d-01">content</div> 
```

Javascript：

```
$.("#d-01").toggle(); //toggles display so if shown then hides, if hidden then shows;
$.("#d-01").show();  //shows div
$.("#d-01").hide();  //hides div 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:50:55.490

这将切换两个元素的可见性：

```
function handleClick() {
  $('div.show').toggle();
  $('input.hide').toggle();
} 
```

那么你的班级名称当然会是错误的。您可以改用 ID。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T12:52:18.227

使用 jQuery 很容易，只需添加以下 JS 代码：

```
$(document).ready(function(){
   $('#button').on('click', function() {
        $('#d-01-on').toggle();
        $('#d-01-off').toggle();
   });
}) 
```

它将适用于您当前的标记和 css 代码。

# backbone.js - 使用 Require.js 导入 jQuery、Underscore 和 Backbone 的依赖解析

> ID：13158278
> 
> 赞同：2
> 
> 时间：2012-10-31T12:45:24.797
> 
> 标签：backbone.js, requirejs, underscore.js

我花了几个小时试图弄清楚为什么我的代码不能正常工作，因为它应该基于我试图遵循的几个教程。事情就是这样。许多关于在 Backbone 中使用 Require.js 的教程和文章的代码如下所示：

```
define(["jquery", "underscore", "backbone"], function($, _, Backbone){
  return function(){
    /* Some instantiation of Backbone stuff */
  };
}); 
```

当我尝试运行此代码时，控制台会显示“Backbone is undefined”。奇怪的是 jQuery 对象被成功实例化为 $. 只是未定义的“_”和“Backbone”。所以我做了一些搜索，发现了 use.js

我被告知 use.js 的诞生是因为 Backbone 的主要贡献者不想更改 Backbone.js 的代码只是为了使其适合 require.js，我理解。所以我尝试使用 use.js 在 require 的配置中指定 Backbone 的依赖项设置，如下所示：

```
require.config({
  use: {
    'backbone': {
      'deps': ['use!underscore', 'jquery'],
      'attach': 'Backbone'
    },
    'underscore': {
      'attach': '_'
    }
  }
}); 
```

在添加此代码并从原始定义中调用 'use!backbone' 而不是要求 'underscore' 和 'backbone' 之后，它终于可以工作了。但我不明白这里发生了什么。如果我必须完成所有这些工作才能使 Backbone 工作，为什么所有那些文章和教程都没有提到这个事实？几乎就像他们的版本没有做这一切就可以正常工作。有什么改变吗？

这也是使用 require.js 处理 Backbone 的唯一方法吗？有没有更简单的方法？（最新的方法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:16:50.610

也许这些信息会帮助你...

```
// This set's up the module paths for underscore and backbone
require.config({ 
    'paths': { 
        "underscore": "libs/underscore-min", 
        "backbone": "libs/backbone-min"
    },
    'shim': 
    {
        backbone: {
            'deps': ['jquery', 'underscore'],
            'exports': 'Backbone'
        },
        underscore: {
            'exports': '_'
        }
    }   
}); 

require([
    'underscore',
    'backbone',
    'app'
    ], 
    function(_, Backbone, app){
        app.init();
}); 
```

[http://jcreamerlive.com/2012/07/14/using-backbonejs-and-amplifyjs-in-a-requirejs-2-0-application/](http://jcreamerlive.com/2012/07/14/using-backbonejs-and-amplifyjs-in-a-requirejs-2-0-application/)
[https://github.com/jcreamer898/RequireJS-Backbone-Starter](https://github.com/jcreamer898/RequireJS-Backbone-Starter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:12:19.217

如果您使用的是 RequireJS 2.0，您可以使用该`shim`功能来包含非 AMD 模块。

以下文章可能会有所帮助：

[https://github.com/jrburke/requirejs/wiki/Upgrading-to-RequireJS-2.0#wiki-shim](https://github.com/jrburke/requirejs/wiki/Upgrading-to-RequireJS-2.0#wiki-shim)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T15:35:08.720

做这个

```
define('backbone', [], function(){ return window.Backbone;}); 
```

这样你就定义了主干是什么，主干将附加到窗口上。在您最初设置的地方执行此操作。在初始化主干后定义主干。

```
define(["jquery", "underscore", "backbone"], function($, _, Backbone){
  return function(){
    /* Some instantiation of Backbone stuff */
  };
}); 
```

希望有帮助！

干杯! 苏杰

# c++ - 在结构中定义固定大小的数组

> ID：13158280
> 
> 赞同：1
> 
> 时间：2012-10-31T12:45:33.120
> 
> 标签：c++, arrays, struct, static-members

我在一个类中定义了一个结构。其中一个成员是具有给定大小的数组。

```
class foo {
private:
  int N;
  struct entry {
    uint64_t pc;
    uint64_t offset;
    bool pattern [N];
  };
public:
  void bar()
  {
   entry en;
   en.pc = 1;
   en.offset = 2;
   en.pattern[en.pc] = 1;
  }
}; 
```

但错误是

```
error: invalid use of non-static data member ‘N’ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T12:46:59.277

C++ 不支持变长数组。`N`必须在编译时知道。另一种方法是使用 a`std::vector`代替。

```
class foo {
private:
  int N;
  struct entry {
    uint64_t pc;
    uint64_t offset;
    std::vector<int> pattern;
  };
public:
  void bar()
  {
   N = 100; //don't forget to initialize N
   entry en;
   en.pc = 1;
   en.offset = 2;
   en.pattern.resize(N);
   en.pattern[en.pc] = 1;
  }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T12:47:48.823

N 大小必须在编译时知道。如果你喜欢`static const int N=5`它会编译。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T12:49:58.947

要初始化数组，您必须使用编译时已知的整数常量。如果你说`static const int N=10;`，说它会奏效。

C++ 中不允许使用可变长度数组，即直到运行时才知道大小的数组。

另一种方法是使用模板，例如：

```
template<int N>
struct my_struct {
    bool vals[N];
}; 
```

或者，类似地，使用`std::array`，如`std::array<bool,10> vals;`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T13:04:06.507

在大多数情况下，使用 a`std::vector`比使用固定长度数组更好。在这种情况下，您在编译时不知道大小，这无论如何都是不允许的。鉴于它是 的集合`bool`，您可能需要考虑一个`std::bitset`比`bool`

```
template < int S >
class foo {
private:
  int N;
  struct entry {
    uint64_t pc;
    uint64_t offset;
    std::bitset<S> pattern;
  };
public:
  entry en;
  foo()
  {
    en.pc = 1;
    en.offset = 2;
    en.pattern[en.pc] = 1;
  }
}; 
```

请注意，我添加了`foo`构造函数，考虑到切换到 bitset，它现在可能有意义，也可能没有意义，现在可以按如下方式使用该对象：

```
foo<24> myBits; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T12:52:25.857

这里`N`在编译时是未知的。如果您创建 a`ob1,ob2,ob3`那么所有三个对象都有可能具有不同的值，`N`这违反了 c++（可变长度数组）的定律。

使用`const int N=5;`或制作 N 作为类变量`static int foo::N=6;`

# c# - 如何检查图片是否为灰度

> ID：13158281
> 
> 赞同：1
> 
> 时间：2012-10-31T12:45:36.133
> 
> 标签：c#, bitmap

> **可能重复：**
> [如何检查位图的颜色深度？](https://stackoverflow.com/questions/2150504/how-can-i-check-the-color-depth-of-a-bitmap)

我正在接收图片的路径。我需要知道该图片是否为灰度。我怎样才能做到这一点？

我正在尝试使用此代码将该路径加载到位图，但它一直告诉我该参数无效。

```
Bitmap myBitmap = new Bitmap(pFilePath); 
```

我可以检查它是否是来自 ByteArray 的灰度吗？或者有什么方法可以从位图做到这一点？那会怎么样？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:50:29.267

检查此[属性](http://msdn.microsoft.com/en-us/library/system.drawing.image.pixelformat.aspx)

```
image.PixelFormat 
```

它将匹配[System.Drawing.Imaging.PixelFormat中的值之一](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.pixelformat.aspx)

# css - 将设备方向从横向更改为纵向时在 x 轴上溢出

> ID：13158282
> 
> 赞同：3
> 
> 时间：2012-10-31T12:45:36.320
> 
> 标签：css, webkit, media-queries, device-orientation

因此，正如帖子的标题所说，在所有 Webkit 浏览器中将设备方向从横向更改为纵向时，我遇到 x 轴溢出问题，我只尝试过 iOS 和 Android 驱动的设备 [iPhone 4、4S 和 5，三星 Galaxy Nexus、Samsung Galaxy II 和 III 在使用 Google Chrome 或 Safari 时出现问题的手机]。

我已将此标签放在我的网页顶部：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"> 
```

我还应该声明我正在处理媒体查询：

```
@media (min-width: 1200px)

...

@media (min-width: 980px)

...

@media (min-width: 768px) and (max-width: 979px)

...

@media (max-width: 767px)

...

@media (max-width: 480px)

... 
```

所以我想知道是否有人遇到过这个问题，如果你有解决方案，因为它真的很烦人。

更准确地说，我有一个基于 twitter 引导框架的移动 Web 应用程序，它也只能在移动设备和平板电脑上查看。因此，显然我需要使用媒体查询来根据您正在查看 Web 应用程序的屏幕大小更改布局。我遇到的问题是，当您在纵向模式下的页面上时，您会将设备方向更改为横向，然后再返回纵向，即使您第一次登陆，内容现在也会大于设备的宽度在纵向模式下的 Web 应用程序页面上，布局的宽度与设备屏幕宽度相同，因此只有在您转向横向并返回纵向后，我才会明白这一点。我希望这是一个足够好的解释（：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T10:38:35.510

我正在制作的页面上有同样的错误。在最小化页面后，我最终将其追踪到一个占位符：

```
<input placeholder="foo"> 
```

如果在横向模式下输入的宽度大于纵向宽度，则会出现该错误：

```
input {
  width 95%;
} 
```

如果您看到的错误也是由占位符引起的，一个简单的 overflow-x: hidden 在输入的父元素上对我来说是一个修复。

有更多关于[iOS 6 从横向到纵向的文本输入占位符属性的工作方法的讨论](https://stackoverflow.com/questions/12582788/placeholder-attribute-on-text-input-with-ios-6-from-landscape-to-portrait)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-31T14:03:01.900

你可以试试

```
<meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"> 
```

编辑
好的，我通常使用带有媒体查询的元名称没有这个问题，如下面的组合方向

```
@media screen and (min-width: 480px) and (orientation:portrait) {

} 
```

# java - Java EE 条件过滤器映射

> ID：13158284
> 
> 赞同：1
> 
> 时间：2012-10-31T12:45:40.533
> 
> 标签：java, spring, jakarta-ee, maven, servlet-filters

我在 web.xml 中有一个 Spring MVC Web 应用程序，其中包含以下内容：

```
<filter>
    <filter-name>foo</filter-name>
    <filter-class>bar.foo</filter-class>
    <init-param>
        <param-name>yada</param-name>
        <param-value>baz</param-value>
        <description>fooz.</description>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>foo</filter-name>
    <url-pattern>*.htm</url-pattern>
</filter-mapping> 
```

这对于在生产环境中运行非常好，但在我在本地机器上开发时却不行。

有没有办法设置例如 Maven 属性，以便根据活动的构建配置文件启用或禁用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:52:54.537

只需在过滤器的代码中执行检查即可。

```
private boolean disabled;

@Override
public void init(FilterConfig config) throws ServletException {
    disabled = lookupSomeEnvironmentVariableAndReturnBooleanAccordingly();
}

@Override
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
    if (disabled) {
        chain.doFilter(request, response);
        return;
    }

    // Original code here.
    // ...
} 
```

[Maven 能够为每个配置文件设置环境变量](https://stackoverflow.com/search?q=maven%20set%20environment%20variable)。

# php - 在 PHP 中，我有一个自定义自动加载器，如何为命名空间扩展它？

> ID：13158285
> 
> 赞同：0
> 
> 时间：2012-10-31T12:45:41.100
> 
> 标签：php, namespaces, autoloader

我在 php 中有一个自定义的自动加载器。搜索路径设置在一个数组中。加载本身：

*   $classname 未加载类的名称
*   $path 目录
*   $autoloadClassPaths [类名] => 绝对文件名

这是一个 spl_autoload_register() 注册函数！

```
 if (!isset($autoloadClassPaths[$classname]))
    {
        foreach ($path as $dir)
        {
            foreach (new DirectoryIterator($dir) as $fileinfo)
            {
                if (substr($fileinfo->getFilename(), -4) == '.php')
                {
                    $tokens = token_get_all(file_get_contents($fileinfo->getPathname()));
                    $count = count($tokens);
                    for ($i = 2; $i < $count; $i++)
                    {
                          if (  ($tokens[$i - 2][0] == T_CLASS || $tokens[$i - 2][0] == T_INTERFACE)
                             && $tokens[$i - 1][0] == T_WHITESPACE
                             && $tokens[$i][0] == T_STRING)
                          {
                               $autoloadClassPaths[$tokens[$i][1]] = $fileinfo->getPathname();
                          }
                    }
                }
            }
        }
    }
    else
    {
        require ($autoloadClassPaths[$classname]);
    } 
```

问题是我现在遇到了命名空间。这个自动加载的怎么写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:51:04.647

使用这样的自动加载器，您可以获得任何类的类名，例如`SomeClassName`. 在命名空间类的情况下，您将获得具有类名的命名空间，如下所示`SomeNamespace\SomeClassName`。如果您有一个干净的目录结构，它包括加载文件所需的所有信息。（如：库\SomeNamespace\SomeClassName.php）。

# android - android图像加载动态openGL

> ID：13158286
> 
> 赞同：1
> 
> 时间：2012-10-31T12:45:43.463
> 
> 标签：android, opengl-es, textures

我遇到了麻烦，为什么我加载的图像不能正常工作。我有一个渲染器类、一个模型类和一个片段类。在渲染类中，我生成模型，每个模型都有一个片段属性。在渲染类中

```
@Override
public void onSurfaceCreated(GL10 gl, EGLConfig config) {

    // preparation
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
    loadGLTexture(gl, context);
    models=new HashMap<Identity,Model>();
    for(int i=-9;i<10;i+=2){
        for(int j=-8;j<10;j+=4){
            models.put(new Identity(i,j), new Model(j,i,0f,w,h));
            models.get(new Identity(i,j)).getPiece().setImageBuffer(imageBuffer);
            models.get(new Identity(i,j)).getPiece().setTextures(textures);   
        }
    }

        // Load the texture for the square
    gl.glEnable(GL10.GL_TEXTURE_2D);            //Enable Texture Mapping ( NEW )
    gl.glShadeModel(GL10.GL_SMOOTH);            //Enable Smooth Shading
    gl.glClearColor(0.0f, 0.0f, 0.0f, 0.5f);    //Black Background
    gl.glClearDepthf(1.0f);                     //Depth Buffer Setup
    gl.glEnable(GL10.GL_DEPTH_TEST);            //Enables Depth Testing
    gl.glDepthFunc(GL10.GL_LEQUAL);             //The Type Of Depth Testing To Do
    gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST);

}
public void loadGLTexture(GL10 gl, Context context) {
        Bitmap bitmap = BitmapFactory.decodeResource(context.getResources(),
                R.drawable.tree2);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MIN_FILTER, GL10.GL_NEAREST);
        gl.glTexParameterf(GL10.GL_TEXTURE_2D, GL10.GL_TEXTURE_MAG_FILTER, GL10.GL_LINEAR);

        // generate one texture pointer
        gl.glGenTextures(1, textures, 0);
        // ...and bind it to our array

        gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);

        // create nearest filtered texture

        imageBuffer = ByteBuffer.allocateDirect(bitmap.getHeight() * bitmap.getWidth() * 4);
        imageBuffer.order(ByteOrder.nativeOrder());
        byte buffer[] = new byte[4];
        for(int i = 0; i < bitmap.getHeight(); i++)
        {
            for(int j = 0; j < bitmap.getWidth(); j++)
            {
                int color = bitmap.getPixel(j, i);
                buffer[0] = (byte)Color.red(color);
                buffer[1] = (byte)Color.green(color);
                buffer[2] = (byte)Color.blue(color);
                buffer[3] = (byte)Color.alpha(color);
                imageBuffer.put(buffer);
            }
        }
        imageBuffer.position(0);
        gl.glTexImage2D(GL10.GL_TEXTURE_2D, 0, GL10.GL_RGBA, bitmap.getWidth(), bitmap.getHeight(), 0, GL10.GL_RGBA, GL10.GL_UNSIGNED_BYTE, imageBuffer);    
        // Recycle the bitmap, since its data has been loaded into OpenGL.
        bitmap.recycle();
     } 
```

绘图功能：

```
@Override
public void onDrawFrame(GL10 gl) {
     // define the color we want to be displayed as the "clipping wall"
    gl.glClearColor(_red, _green, _blue, 1.0f);
    // reset the matrix - good to fix the rotation to a static angle

    gl.glLoadIdentity();   
    // clear the color buffer to show the ClearColor we called above...
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
    gl.glEnable(GL10.GL_BLEND);
    gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
    for(Model model:models.values()){
        model.draw(gl);    
    }

 } 
```

在模型课中，我画了彩色六边形；

```
public void draw(GL10 gl){

     gl.glLoadIdentity();
     gl.glVertexPointer(3, GL10.GL_FLOAT, 0, _vertexBuffer);
     gl.glColor4f(0.5f, 0.5f, 0.5f, 1f); 
     gl.glDrawElements(GL10.GL_TRIANGLE_FAN, _nrOfVertices, GL10.GL_UNSIGNED_SHORT, _indexBuffer);
     if(piece!=null){
         piece.draw(gl);
     }
 } 
```

在单品类

```
public void draw(GL10 gl){

     gl.glLoadIdentity();
    // gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
            // bind the previously generated texture
            gl.glActiveTexture(GL10.GL_TEXTURE0);
    // gl.glBlendFunc(GL10.GL_ONE, GL10.GL_ONE_MINUS_SRC_ALPHA); 
            gl.glBindTexture(GL10.GL_TEXTURE_2D, textures[0]);
            gl.glTexImage2D(GL10.GL_TEXTURE_2D, 0, GL10.GL_RGBA, 32, 32, 0, GL10.GL_RGBA, GL10.GL_UNSIGNED_BYTE, imageBuffer);
            // gl.glTexSubImage2D(GL10.GL_TEXTURE_2D, 0, GL10.GL_RGBA, 32, 32, 0, GL10.GL_RGBA, GL10.GL_UNSIGNED_BYTE, imageBuffer);
            gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);
            gl.glTexCoordPointer(2, GL10.GL_FLOAT, 0, textureBuffer);

            // Draw the vertices as triangle strip
            gl.glDrawArrays(GL10.GL_TRIANGLE_STRIP, 0,4);

 } 
```

我在构造函数中设置了 vertexBuffer 和 textureBuffer。我不知道女巫 gl 方法在哪里使用，在大多数教程中只使用一次图像。为什么我的 png 失去了透明性，为什么我看不到模型的六边形。

它开始对我来说很复杂:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T22:40:20.547

在 OpenGL ES 2.0 中，我的图像加载代码如下所示：

```
 final int[] textureObjectIds = new int[1];
    glGenTextures(1, textureObjectIds, 0);

    if (textureObjectIds[0] == 0) {
            Log.w(TAG, "Could not generate a new OpenGL texture object.");
        return 0;
    } 

    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inScaled = false;
    options.inPreferredConfig = Bitmap.Config.ARGB_8888;

    // Read in the resource
    final Bitmap bitmap = BitmapFactory.decodeResource(
        context.getResources(), resourceId, options);

    if (bitmap == null) {
        if(GameLogger.ON)
        {
            Log.w(TAG, "Resource ID " + resourceId + " could not be decoded.");
        }
        glDeleteTextures(1, textureObjectIds, 0);
        return 0;
    } 

    // Bind to the texture in OpenGL
    glBindTexture(GL_TEXTURE_2D, textureObjectIds[0]);

    // Set filtering: a default must be set, or the texture will be
    // black.
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

    texImage2D(GL_TEXTURE_2D, 0, bitmap, 0);

    glGenerateMipmap(GL_TEXTURE_2D);

    // Recycle the bitmap, since its data has been loaded into OpenGL.
    bitmap.recycle();

    // Unbind from the texture.
    glBindTexture(GL_TEXTURE_2D, 0); 
```

希望对您有所帮助。

# javascript - Angularjs：处理项目数据中外键的最佳方法

> ID：13158287
> 
> 赞同：2
> 
> 时间：2012-10-31T12:45:49.010
> 
> 标签：javascript, angularjs

我有文件和文件夹。文件夹包含文件。

我从服务器获取的 JSON 如下所示：

```
folder: {id: 5, name: "my stuff" }
file: {id: 3, name: "my file", folderId: 5}
file: {id: 5, name: "my file 2", folderId: 5} 
```

构建文件夹 - 文件结构的最佳方法是什么？将文件嵌套在文件夹中，例如：

```
{id: 5, name: "my stuff" files: [
    {id: 3, name: "my file", folderId: 5},
    {id: 5, name: "my file 2", folderId: 5}
]},
{id: 6, name: "other things" files: [
    {id: 1, name: "my file", folderId: 6},
    {id: 2, name: "my file 2", folderId: 6}
]} 
```

或者使用仅返回属于文件夹 id 的文件的过滤器？喜欢：

```
<li ng-repeat="folder in folders">
    <ul>
        <li ng-repeat="file in files | fileInFolder:folder.id"></li>
    </ul>
</li> 
```

**文件可以移动到不同的文件夹！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:12:14.123

“最好的方式”总是最容易维护的方式。就我个人而言，我喜欢选项 2（过滤器），因为它适合您获得的数据。但是，选项 1（json 结构）是数据的更好表示，IMO。如果您坚持使用该数据结构，那么我想选项 2 将是我的选择。

...但我对您的应用程序结构一无所知。这是持久化到数据库吗？什么时候坚持？瞬间？还是仅在调用保存后？许多因素将影响哪种结构最适合您并且更适合您的特定解决方案。

# java - 将空值的双精度转换为字符串错误

> ID：13158291
> 
> 赞同：3
> 
> 时间：2012-10-31T12:45:57.593
> 
> 标签：java

如何解决这个问题呢

```
public class DoubleTest {

    public static void main(String[] args) {
        double dbl = (Double) null;
        String str = Double.toString(dbl);
        System.out.println(str);

    }

} 
```

有错误：

```
Exception in thread "main" java.lang.NullPointerException
    at test.java.DoubleTest.main(DoubleTest.java:6) 
```

请问有什么想法吗？

我问这个是因为我有一个返回 Double 的方法，我必须再次将其转换为 String。

如果我的方法返回**null**，那么就会出现这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T12:48:30.430

这将永远失败：

```
 double dbl = (Double) null; 
```

您不能将 null 分配给基元（小写双精度）。如果将其更改为大写 Double，则分配将起作用，但 Double.toString(dbl) 会失败，因为它不能为空。为了防止这种情况，您可以将代码更改为之前建议的代码（假设 db1 是 Double 而不是 double）：

```
String str = dbl != null ? Double.toString(dbl) : "null"; 
```

这将始终打印“null”，因为 db1 将始终为空。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T12:53:01.963

如果您有一个返回 null 的方法，如下所示：

```
Double d = myMethod(); 
```

然后你可以像这样进行 Double 到 String 的转换：

```
String str = "";

if (d != null)
   str = d.toString(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T13:12:42.120

[`From JLS #5.1.8\. Unboxing Conversion`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.8)

*   如果 r 是 type 的引用`Double`，则拆箱转换将 r 转换为`r.doubleValue()`
*   如果 r 是`null`，拆箱转换会抛出一个`NullPointerException`

这是为您的程序生成的字节码

```
 0  aconst_null
 1  invokevirtual java.lang.Double.doubleValue() : double [16]
 4  dstore_1 [dbl]
 5  dload_1 [dbl]
 6  invokestatic java.lang.Double.toString(double) : java.lang.String [22]
 9  astore_3 [str]
10  getstatic java.lang.System.out : java.io.PrintStream [26]
13  aload_3 [str]
14  invokevirtual java.io.PrintStream.println(java.lang.String) : void [32]
17  return 
```

对此的适当解决方案将涉及使用`String.valueOf`which 已经处理`null`案例。

```
public static void main(String[] args) {
    Double dbl = null;
    String str = String.valueOf(dbl);//Str will have `null` value
    System.out.println(str);

} 
```

第二种方法

```
public static void main(String[] args) {
    Double dbl = null;
    String str = null;
    if (dbl != null) {
        str = String.valueOf(dbl);// <--This is dead code currently but it
                                    // is useful if you are checking
                                    // against null
    }
    System.out.println(str);

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T12:58:53.903

线

```
 double dbl = (Double) null; 
```

是这里的问题，但它实际上与从 null 到 Double 的转换有关。你会得到一个`Nullpointerexception`由于这里的演员，而不是因为分配。

将对象自动拆箱到对象为空的原语会出现类似的问题：

```
Double myDouble = null;
double dbl = myDouble; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T12:59:49.427

Double 有一个 toString 方法，理想情况下应该处理转换本身。

由于 Double 也可以为 null，因此您可能希望自己处理它或让 toString 将其返回为“null”。

`String str = (dblVariable == null)? {custom-code-here} : dblVariable.toString();`

# css - CSS 图像弹性宽度

> ID：13158299
> 
> 赞同：-1
> 
> 时间：2012-10-31T12:46:11.680
> 
> 标签：css

所以我在我的网页顶部有这个横幅。从我的 23" 显示器观看时看起来不错。但是当我用我的 15" 方形显示器观看时，横幅会因为太长而从右侧剪掉。

如何使用 CSS 使横幅的宽度根据用户的屏幕尺寸进行调整？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:48:08.543

它不仅应该根据用户的屏幕大小，还应该根据浏览器窗口的大小。

尝试`width: 100%`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:48:52.767

而不是使用像素来设置固定宽度，您可以使用百分比，例如

宽度：100%；

# android - Android - 在默认按钮上保持背景图像的纵横比

> ID：13158305
> 
> 赞同：1
> 
> 时间：2012-10-31T12:46:42.607
> 
> 标签：android, button, background, aspect-ratio

有什么方法可以在作为背景应用时保持可绘制对象的纵横比`Button`（不能使用`ImageButton`（需要文本的可能性`Button`），不能使用`setCompoundDrawables()`，因为这也不符合我的要求（我做了我自己的类来支持添加背景，同时仍保留原始的android默认按钮，另外我需要在按钮中间设置背景，而不是左、右、顶部或底部））。

我尝试了一个解决方案`ScaleDrawable`，但要么我做错了，要么它不起作用：

```
Bitmap scaled = Bitmap.createScaledBitmap(original, (int)newBmpWidth, (int)newBmpHeight, false);
BitmapDrawable bd = new BitmapDrawable(scaled);
ScaleDrawable sd = new ScaleDrawable(bd, Gravity.CENTER, a, b);
//for a and b I tried lots of different values, ranging from 0.07f to 1000
sd.setLevel(1); 
```

然后我使用`ScaleDrawable`作为背景，但无论如何它都会被拉伸。

我也试过了`InsetDrawable`，但同样，要么我做错了什么，要么它不起作用，期待第一个：

```
BitmapDrawable mBitmapDrawable = new BitmapDrawable(mBitmap);
InsetDrawable mInsetDrawable = new InsetDrawable(mBitmapDrawable, mLeftOffset, 0, mRightOffset, 0); 
```

然后我使用`InsetDrawable`作为背景，但无论如何这也会被拉伸。

**有什么方法可以应用背景但在 a 上保持纵横比`Button`？**我可以找到很多答案`ImageButtons`，但遗憾的是 a`Button`没有 a `setImageBitmap()`or`setScaleType()`方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-08T18:27:55.547

我最近在设置背景图像时遇到了同样的问题`ImageView`。我提出的解决方案适用于 any `View`，因此它也应该涵盖`Button`。

问题在于，无论作为背景提供的 Drawable 的缩放比例如何，它`View`总是将其背景拉伸到 ' 的宽度和高度的全部范围。`View`正如您关于未能提供专门的 Drawables 的报告所暗示的那样，这不能通过在将图像设置为背景之前缩放图像的任何方式来抵消，因为它`View`只会获取图像尺寸，无论它们是什么，然后再次独立缩放它们以`View`填充区域。

我的解决方案基于以下事实采用不同的方法：如果我们可以提供与`View`'s 具有相同纵横比的背景图像，则不会出现失真。

下面的函数`scaleKeepingAspect()`采用图像资源并回答`BitmapDrawable`包含缩放到所需宽度和高度的原始图像的 a。缩放以保持原始图像的纵横比的方式执行，并且最终剩余的空间以适合所需的框被透明像素填充。原始图像在结果图像中居中。

```
private BitmapDrawable scaleKeepingAspect(Resources res, int id, int dstWidth, int dstHeight) {

    Bitmap b = (new BitmapFactory()).decodeResource(res, id);
    float scaleX = (float) dstWidth / b.getWidth();
    float scaleY = (float) dstHeight / b.getHeight();
    float scale = scaleX < scaleY ? scaleX : scaleY;
    int sclWidth = Math.round(scale * b.getWidth());
    int sclHeight = Math.round(scale * b.getHeight());
    b = Bitmap.createScaledBitmap(b, sclWidth, sclHeight, false);
    int[] pixels = new int[sclWidth * sclHeight];
    b.getPixels(pixels, 0, sclWidth, 0, 0, sclWidth, sclHeight);
    b = Bitmap.createBitmap(dstWidth, dstHeight, b.getConfig());
    b.setPixels(pixels, 0, sclWidth, (dstWidth - sclWidth) / 2, (dstHeight - sclHeight) / 2, sclWidth, sclHeight);
    return new BitmapDrawable(res, Bitmap.createBitmap(b));

} 
```

`scaleKeepingAspect()`设置背景的适当位置是在布局更改事件期间，因此当由于布局处理`View`而更改的边界时，背景会正确更新。`View`为此，假设 (a) 您在布局 xml 中`View`被标识为`myView`，并且 (b) 您的背景图像是 file `res/drawable/background.png`，请执行以下操作：

1.  将您声明`Activity`为`View.OnLayoutChangeListener`接口的实现者：

    ```
    public class MyActivity extends Activity implements View.OnLayoutChangeListener {

        ...

    } 
    ```

2.  将您注册`Activity`为侦听器以了解您的布局更改`View`：

    ```
    @Override public void onCreate(Bundle savedInstanceState) {

        ...

        myView = (View) findViewById(R.id.myView);
        myView.addOnLayoutChangeListener(this);

        ...

    } 
    ```

3.  在布局更改处理程序中检测`View`布局更新，并在需要时更新其背景：

    ```
    @Override public void onLayoutChange (View v,
            int left, int top, int right, int bottom,
            int oldLeft, int oldTop, int oldRight, int oldBottom) {

        if (left == right || top == bottom || (
                left == oldLeft && top == oldTop &&
                right == oldRight && bottom == oldBottom))
            return;

        switch (v.getId()) {

            case R.id.myView:

                v.setBackground(
                    scaleKeepingAspect(
                        getResources(),
                        R.drawable.background,
                        v.getWidth(),
                        v.getHeight()));
                break;

        }

    } 
    ```

# c# - 在 Windows 8 / XAML 中向鼠标/指针旋转模拟表盘

> ID：13158310
> 
> 赞同：0
> 
> 时间：2012-10-31T12:46:54.150
> 
> 标签：c#, xaml, windows-8

我在 Windows 8 XAML 中实现了一个模拟拨号，它几乎可以工作

但是，当转动表盘时，它会像疯了一样摇晃。它似乎在移动时顺时针和逆时针旋转了近 90 度。我已经使用`PointerPressed`,`PointerReleased`和`PointerMoved`

我的代码

```
private void dial_PointerPressed(object sender, PointerRoutedEventArgs e)
{
    dialPressed = true;    
}

private void dial_PointerReleased(object sender, PointerRoutedEventArgs e)
{
    dialPressed = false;
}

private void dial_PointerMoved(object sender, PointerRoutedEventArgs e)
{
    if(dialPressed)
    {
        Windows.UI.Input.PointerPoint currentLocation = 
              e.GetCurrentPoint(dial); 

        Point dialCenter = 
              new Point(dial.ActualHeight / 2, dial.ActualWidth / 2);

        double radians = Math.Atan(
              (currentLocation.Position.Y - dialCenter.Y) / 
              (currentLocation.Position.X - dialCenter.X));

        RotateTransform r = new RotateTransform();
        r.Angle = radians * 180 / Math.PI;

        if (currentLocation.Position.X - dialCenter.X < 0)
        {
            r.Angle += 180;
        }

        TransformGroup t = new TransformGroup();
        t.Children.Add(r);
        dial.RenderTransform = t;

    }
} 
```

我应该对不同的事件有约束力吗？是什么让我的表盘抖动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T11:44:09.403

好的，我解决了我的问题。

该代码来自 WPF 示例，在 Windows 8 中有一些不同之处！这对我有用。

```
if (dialPressed)
{

  // Get the current mouse position relative to the dial
  // I was doing this relative to the dial that was turning, which is wrong. 
  // The position of the pointer relative to the dial will change as the dial turns!
  // I created a static dial behind it, the same dimensions
  Windows.UI.Input.PointerPoint currentLocation = 
                                e.GetCurrentPoint(this.dial_Static); 

  Point dialCenter = 
        new Point(this.dial.ActualHeight / 2, this.dial.ActualWidth / 2);

  // Calculate an angle
  double radians = Math.Atan((currentLocation.Position.Y - dialCenter.Y) /                           
                             (currentLocation.Position.X - dialCenter.X));

  // in order to get these figures to work, I actually had to *add* 90 degrees to it,     
  // and *subtract* 180 from it if the X coord is negative. 
  double x = (radians * 180 / Math.PI) + 90;
  if ((currentLocation.Position.X - dialCenter.X) < 0)
  {
     x = x - 180;
  }

  RotateTransform r = new RotateTransform();
  r.Angle = x;

  TransformGroup t = new TransformGroup();
  t.Children.Add(r);
  dial.RenderTransform = t;

} 
```

我知道这段代码可以写得更整洁，但我试图让它尽可能接近上面的版本，以显示发生了什么变化。

# php - 在 nginx 中如何处理 post 值

> ID：13158313
> 
> 赞同：0
> 
> 时间：2012-10-31T12:47:00.580
> 
> 标签：php, mysql, apache, nginx

我是 nginx 新手，正在尝试使用 nginx 缓存动态页面。我理解缓存过程，因为动态页面将被缓存为静态文件，然后将在进一步的请求中发送。

我在页面上有评论部分，评论将在帖子中更新到数据库并在管理员审核后发布。nginx 将如何处理 post 值？是否可以捕获帖子值并更新到数据库？

有人可以指导我吗？您的回答将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:01:48.130

使用 PHP 的一般性质通常会创建超出服务器范围的动态页面（因为服务器不知道该页面是否需要重新呈现，因为它可以说是一条新评论）。你最好不要使用nginx甚至服务器缓存php页面，而是在应用程序（php）级别应用缓存，使用apc和memcache等缓存来缓存页面的部分以及利用数据库查询缓存。

如果页面被静态缓存，则通常会丢弃发布请求，因为静态页面将无法处理发布请求 - 因为它已被缓存。

# html - html5 localstorage 存储和访问

> ID：13158316
> 
> 赞同：2
> 
> 时间：2012-10-31T12:47:10.470
> 
> 标签：html, local-storage

我想存储计数器的结果并在另一页上返回信息。

到目前为止我有这个..

```
<script>

function clickCounter() {
document.getElementById("p4").style.display="none";

if(typeof(Storage)!=="undefined") {

if (localStorage.clickcount) {
localStorage.clickcount=Number(localStorage.clickcount)+1;}

else {
localStorage.clickcount=1;}
document.getElementById("result").innerHTML="You have had " + localStorage.clickcount + " drink(s)";}

else {
document.getElementById("result").innerHTML="Sorry, your browser does not support web storage.";}
}
</script> 
```

所以当我按下按钮时计数器工作，它每次增加 1。

我不确定我应该坚持在哪里`.setItem("result")`; 然后是`.getItem("result")`方法。

有点无能为力，任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:53:50.260

您需要使用 setItem() 和 getItem() 方法来访问 localStorage，而不是直接针对“localStorage”对象获取/设置属性。这是我的意思的一个例子：

```
//Saving a new item named "foo" with a value of "bar"
window.sessionStorage.setItem("foo", "bar");

//Retrieveing a saved item:
var value = window.localStorage.getItem("foo");    //returns "bar"

//Deleting an item
localStorage.removeItem("foo");

//Clearing all local storage
localStorage.clear(); 
```

这是我创建的示例页面，演示了如何从本地存储中添加、删除和清除项目：

[http://blackberry.github.com/WebWorks-Samples/kitchenSink/html/html5/storage.html](http://blackberry.github.com/WebWorks-Samples/kitchenSink/html/html5/storage.html)

# mongodb - Mongo DB：获取最后一个已知文档之后插入的所有文档

> ID：13158319
> 
> 赞同：10
> 
> 时间：2012-10-31T12:47:16.763
> 
> 标签：mongodb

```
> db.events.find()
{ "_id" : ObjectId("50911c3e09913b2c643f1215"), "context" : "jvc8irfjc9cdnf93", "key" : "value" }
{ "_id" : ObjectId("50911c4709913b2c643f1216"), "context" : "jvc8irfjc9cdnf93", "key" : "new value" }
{ "_id" : ObjectId("50911c4b09913b2c643f1217"), "context" : "jvc8irfjc9cdnf93", "key" : "newer value" }
{ "_id" : ObjectId("50911c4f09913b2c643f1218"), "context" : "jvc8irfjc9cdnf93", "key" : "newest value" }
{ "_id" : ObjectId("50911c6309913b2c643f1219"), "context" : "0djd8vcndkfnjhv3", "key" : "value" } 
```

是 Mongo DB 服务器上的事件列表。客户端跟踪他知道的最后一个事件，例如`50911c4709913b2c643f1216`第二个事件。

如何获取在这个已知事件之后插入的所有事件？在这种情况下`50911c4b09913b2c643f1217`，`50911c4f09913b2c643f1218`和`50911c6309913b2c643f1219`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T13:32:47.803

由于`ObjectId`默认情况下包含 a`inc`和 a `timestamp`( [http://www.mongodb.org/display/DOCS/Object+IDs#ObjectIDs-BSONObjectIDSpecification](http://www.mongodb.org/display/DOCS/Object+IDs#ObjectIDs-BSONObjectIDSpecification) )，您实际上可以通过以下方式使用`ObjectId`(大致) 来了解插入时间：

```
db.col.find({_id: {$gt: {ObjectId("50911c4709913b2c643f1216")}}}); 
```

但是，这`ObjectId`并不总是非常可靠，特别是如果在您的应用程序中，您`ObjectId`在插入之前创建了一段时间，并且实际上您知道稍后创建的一条记录实际上显示（因为它`_id`）如前所述。

对于在某些情况下您不能信任`ObjectId`插入计时器的插入，您可以使用两个查询添加`ts`一个 BSON 日期类型 ( `ISODate`) 和范围的字段，一个用于获取原始文档时间，另一个用于获取之后的所有文档。

我个人更喜欢使用 BSON 日期类型的第二种方法，因为它更可靠、更灵活。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T13:48:27.530

您在此处看到对象 id 以递增顺序排列的原因是因为规范说这 `time|machine|pid|inc`是创建`ObjectId`.

请注意， 中已经有一个时间分量`ObjectId`，但是以秒为单位的。
Mongo 中的`Date`类型表示从 epoch 开始的毫秒数，这将为您提供更精确的计算插入时间。

如果您需要超过毫秒的绝对精度，我认为最好的方法是使用**[序列号形式的计数器，但如果您认为您的应用程序不是写密集型的，只需使用](http://www.mongodb.org/display/DOCS/Object+IDs#ObjectIDs-SequenceNumbers)****[Date](http://www.mongodb.org/display/DOCS/Dates)**类型的附加键形式时间戳。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T12:58:04.200

在您的示例中，您使用的是“内置”ObjectID。[他们试图是唯一的，而不是顺序](http://www.mongodb.org/display/DOCS/Object+IDs)的。您可以添加时间戳或使用官方文档建议的序列号，并根据该属性进行查询。

添加此新属性后，您必须执行两个查询。一个获取与客户端指定 ID 对应的序号或时间戳，然后另一个查询获取插入的项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-09T11:18:45.443

由于 ObjectID 是基于时间的，就像其他人已经提到的那样，我们可以构建自己的基于时间的 ObjectID 进行查询。这应该节省索引空间:)

有关 Javascript 的实现，请参阅[https://stackoverflow.com/a/8753670/1008449](https://stackoverflow.com/a/8753670/1008449)。

# android - LayoutInflater.inflate() 是同步的吗？

> ID：13158320
> 
> 赞同：3
> 
> 时间：2012-10-31T12:47:21.320
> 
> 标签：android, layout-inflater

也就是说，它会立即以阻塞的方式膨胀布局，并`onInflateFinished()`在返回之前调用，还是立即返回并安排稍后的膨胀？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:10:29.167

`Inflate`是同步的。异步没有意义，更不用说获取返回值，会变得相当复杂。

[请参阅文档](http://developer.android.com/reference/android/view/LayoutInflater.html#inflate%28int,%20android.view.ViewGroup%29)：

> **回报：**
> 
> 膨胀层次结构的根视图。如果提供了 root，则这是根视图；否则它是膨胀的 XML 文件的根。

# android - 使用带有 ViewFlipper 的大型文本文件的性能下降

> ID：13158327
> 
> 赞同：0
> 
> 时间：2012-10-31T12:47:49.603
> 
> 标签：android, viewflipper

我有一个 viewflipper，它有大约 20 个长字符串作为子 TextViews。当我开始活动时，它的加载速度非常慢，我猜是因为它一次实例化了所有子视图。如果是这种情况，有没有办法让它以列表视图的方式回收视图？

谢谢

# facebook - facebook连接中的服务器错误

> ID：13158333
> 
> 赞同：2
> 
> 时间：2012-10-31T12:48:10.137
> 
> 标签：facebook, connect

我正在通过 Graph API 在 facebook 上工作。

一切正常。只有一个电子邮件 ID 给出错误...

错误是：

```
Server error
The website encountered an error while retrieving http://www.website.com/facebook.php?state=c000369c7062e9ae2ecca0476e744cbd4&code=AQBC3Ed74fe5_YNyuidHul86YaPyAUxhzVc4HiCGaQE4P1lLFYoIOfrr0rb8w96e8TLqEzz3zaE-WuSMNVi1RsgE6Dk-XIMhd2jd2JKsxH_MxuRRirh6kSjZ1TGU9hsMidyTG6zyybsnydF4OS5YFgWKfPakMGH9uqdL9Wx-4EycSyZ4HBOHBTC0vkoAcZVWyCKu9u87Aj9e-#_=_. It may be down for maintenance or configured incorrectly. 
```

以下是一些建议： 稍后重新加载此网页。

```
HTTP Error 500 (Internal Server Error): An unexpected condition was encountered while the server was attempting to fulfill the request. 
```

# mongodb - 使用 golang 和 mgo，如何在 MongoDB 中搜索一系列值？

> ID：13158335
> 
> 赞同：6
> 
> 时间：2012-10-31T12:48:11.833
> 
> 标签：mongodb, go, mongodb-query, mgo

我研究了[mgo 主页](http://labix.org/mgo)上的示例，但我正在努力寻找一种方法来查询一系列值。该行：
`searchResults, searchErr = SearchReading(bson.M{"k": key, "t": { $gte: start, $lte: end } }, limit)`
失败：
`line67: syntax error: unexpected $`
`line67: missing type in composite literal`

我遗漏了一些非必要的代码......

```
type Reading struct {
    K string  "k"
    T int64   "t"
    V float64 "v"
}

func SearchReading(q interface{}, limit int) (searchResults []Reading, searchErr string) {
    searchErr = ""
    searchResults = []Reading{}
    query := func(c *mgo.Collection) error {
        fn := c.Find(q).Limit(limit).All(&searchResults)
        if limit < 0 {
            fn = c.Find(q).All(&searchResults)
        }
        return fn
    }
    search := func() error {
        return withCollection("reading", query)
    }
    err := search()
    if err != nil {
        searchErr = "Database Error"
    }
    return
}

func GetReadingsForKey(key string, start int64, end int64, limit int) (searchResults []Reading, searchErr string) {
    searchResults, searchErr = SearchReading(bson.M{"k": key, "t": { $gte: start, $lte: end } }, limit)
    return
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-31T13:01:40.203

该行：

```
searchResults, searchErr = SearchReading(bson.M{"k": key, "t": { $gte: start, $lte: end } }, limit) 
```

需要改为：

```
searchResults, searchErr = SearchReading(bson.M{"k": key, "t": bson.M{"$gte": start, "$lte": end}}, limit) 
```

# firefox - window.focus() 不适用于带有增强窗口的 F irefox 驱动程序

> ID：13158336
> 
> 赞同：1
> 
> 时间：2012-10-31T12:48:17.190
> 
> 标签：firefox, window, focus, webdriver

将该属性设置`dom.disable_window_flip`为 false 时，可以在 Firefox 中启用主窗口的“升起或降下窗口”选项。但是，对于增强器窗口，该选项未启用，并且当我在主窗口上执行 window.focus 时，增强器窗口不会进入背景。

```
FirefoxProfile profile = new FirefoxProfile();
profile.setPreference("dom.disable_window_flip",false);
driver = new FirefoxDriver(profile);
augmentedDriver = new Augmenter().augment(driver);
((JavascriptExecutor)driver).executeScript("window.focus()"); 
```

# javascript - 修改乱七八糟的JS代码，三元运算符

> ID：13158340
> 
> 赞同：0
> 
> 时间：2012-10-31T12:48:42.690
> 
> 标签：javascript, keyboard

我想修改代码，以便在用户按下键盘键时添加“虚拟吉他音符”。问题是我不明白以下代码：

```
 (b = c) ? b = "number" 
        == typeof b.which ? 3 : "number" 
        == typeof b.keyCode ? 2 : "number" 
        == typeof b.charCode ? 4 : 0 
        : (b = window.event, b = "number" == typeof b.keyCode ? 1 : 0); 
```

和

```
 0 != b ? 
        ("number" == typeof c.modifiers ? a += "var c=f.modifiers;" 
        : "boolean" == typeof c.shiftKey ? a += "var c=f.shiftKey*4+f.ctrlKey*2+f.altKey;" 
        : Stop(), c.srcElement ? a += "var d=f.srcElement;" 
        : c.target ? a += "var d=f.target;" 
        : St()) 
        : St(); 
```

和

```
 DFunct || (d=10, f=11); 
```

我知道最后一行翻译为：

```
 if(!DFunct){
           d=10;
           f=11;
        } 
```

我需要使用简单的 if else 语句来实现这一点，这样我就可以根据按下的值来播放音符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:00:25.930

### 第一的：

```
b = c;

if ( c ) {

    if ( typeof b.which === "number" ) {

        b = 3;

    } else {

        if ( typeof b.keyCode === "number" ) {

            b = 2;

        } else {

            if ( typeof b.charCode === "number" ) {

                b = 4;

            } else {

                b = 0;

            }

        }

    }

} else {

    b = window.event;
    b = typeof b.keyCode === "number" ? 1 : 0;

} 
```

### 第二：

```
if ( b !== 0 ) {

    if ( typeof c.modifiers === "number" ) {

        a += "var c=f.modifiers;";

    } else {

        if ( typeof c.shiftKey === "boolean" ) {

            a += "var c=f.shiftKey*4+f.ctrlKey*2+f.altKey;";

        } else {

            Stop();

            if ( c.srcElement ) {

                a += "var d=f.srcElement;";

            } else {

                if ( c.target ) {

                    a += "var d=f.target;";

                } else {

                    St();

                }

            }

        }

}​ else St(); 
```

# hook - capistrano 钩子不开火后

> ID：13158342
> 
> 赞同：0
> 
> 时间：2012-10-31T12:48:55.743
> 
> 标签：hook, capistrano

我有一个 Rails 应用程序在 Capistrano 2.5.18 和 Rake 0.9.2.2 的机器上运行。部署工作得很好。

我在另一台运行 Capistrano 2.12.0 和 Rake 0.9.2.2 的机器上设置了相同的应用程序，它运行到一个点 - 复制文件等 - 但不运行我的后挂钩。

我读到了 deploy:symlink 任务被更改为 deploy:create_symlink 所以我更新了它。

这是精简的食谱...

```
set :ssh_options, { :forward_agent => true }
set :use_sudo, true 
set :deploy_via, :copy
set :copy_strategy, :export
set :copy_compression, :gzip
on :load, 'max:deploy:ask_env'

after 'deploy:create_symlink', 'max:deploy:finalize_update' # DOESN'T WORK!!

namespace :deploy do
  task :restart do
    run "#{sudo :as => admin_runner} touch #{current_path}/tmp/restart.txt"
  end
end

namespace :max do
  [...]
  namespace :deploy do
    # NEVER CALLED!!!
    desc "Finalizes update by setting permissions"
    task :finalize_update do
      run "chgrp -R #{admin_group} #{current_release}; exit 0"
    end
  end
  [...]
end 
```

运行脚本时的最后一点输出看起来像......

```
 * executing `deploy:create_symlink'
  * executing "rm -f /home/s-exer1/webapps/max-shared-desktop/application_home/current && ln -s /home/s-exer1/webapps/max-shared-desktop/application_home/releases/20121031124115 /home/s-exer1/webapps/max-shared-desktop/application_home/current"
    servers: ["vaomb81"]
    [vaomb81] executing command
    command finished in 97ms
 ** transaction: commit
  * executing `deploy:restart'
  * executing "sudo -p 'sudo password: ' -u s-exer1 touch /home/s-exer1/webapps/max-shared-desktop/application_home/current/tmp/restart.txt" 
```

deploy:create_symlink 任务运行，然后跳转到 deploy:restart - 跳过我的后挂钩。

关于可能导致这种情况的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:54:45.813

不知道我做错了什么，但事实证明

```
 after 'deploy:create_symlink', 'max:deploy:finalize_update' 
```

确实适用于 Capistrano 2.12.0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:05:25.390

一个可能的原因是您的后续任务之一（可能带有 的行`sudo`）在没有显示输出的情况下失败。一个明显的迹象是`command finished in ...s`最后一个命令甚至没有显示。

# javascript - js 替换 innerHTML 仅适用于没有 jQuery

> ID：13158344
> 
> 赞同：0
> 
> 时间：2012-10-31T12:49:05.020
> 
> 标签：javascript, jquery, html

我曾想过：

```
$('#slideshow_body').html(newContent); 
```

相当于：

```
document.getElementById('slideshow_body').innerHTML=newContent; 
```

但事实并非如此。这两件作品中只有后者=（我希望对我的代码进行现代化改造和缩短一点。

newContent 目前包含此字符串，但将包含任意数量的 div:s：

```
 <script id="pauseTimesScript" type="text/javascript">
//<![CDATA[
  /* Define pauseTimes (array holding duration of each slide) */
  try {
                pauseTimes=null;
                pauseTimes=undefined;
                pauseTimes = new Array();       
                setPauseTimes();                
                /*alert('satte fÃ¶rst till null, deklarerade sedan om.');*/
  } catch(e) {
                pauseTimes = new Array();       
                setPauseTimes();                
                /*alert('deklarerade utan att fÃ¶rst sÃ¤tta null.');*/
  }
  function setPauseTimes() {      
        pauseTimes[1]=10000;                    
  }
  //]]>
  </script>
  <div id="avbrott" style="display: none;">
    Tillf&Atilde;&curren;lligt avbrott, visar cachelagrat inneh&Atilde;&yen;ll sedan
    2012-10-31 14:04:52
  </div>
  <div id="canvas" style="width:1072px;height:732px;">
    <div id="slide1" class="slide" style="z-index: 1; display: block;">
      <div id="slide_bg" style=
      "float:left;height:100%;width:100%;background-color:#ffffff;background-image:url('http://bglabs.evade.netdna-cdn.com/45875kli90/71.jpg');">
      <div style=
      "background-color:#ff0000;color:#ffffff;float:none;text-align:center;margin-top:30px;padding:10px;font-weight:bold;font-size:58pt;"
        id="preview_title">
          Nu &Atilde;&curren;r det jul igen!
        </div>
        <div style="clear:both;float:none;"></div>
        <p style=
        "color:#0f00de;margin:10px 10px 0 20px;font-style:italic;font-size:42pt;" id=
        "preview_data_6">Tja, snart i alla fall =)</p>
      </div>
    </div>
  </div> 
```

这是我获取该字符串的方法，不知道它是否会改变任何东西...

```
function ajaxUpdate() {

    //Load current uri again asynchroneously
    var jqxhr = $.get(currentUri)
      .success(function(data) { newContent = data; })
      .error(function() { newContent = 'blank'; }); 

    //make sure we got the end token (</body>) so that our transmission wasn't interrupted in the middle of the request
    endtoken_test = newContent.search('</body>');

    //strip of everything before starttoken (<body>)
    newContent = newContent.substring(newContent.indexOf('<body id="slideshow_body">') +26 );

    //strip of everything before endtoken (</body>)
    newContent = newContent.slice(0, newContent.lastIndexOf("</body>"));

    if (endtoken_test != -1) { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:09:37.913

他们应该以同样的方式行事。

[在这里](http://jsfiddle.net/wpHTB/)拉小提琴

```
$(function(){
    $('#jq').click(function(){
        $('#content').html('jQuery');
    });

    $('#js').click(function(){
        document.getElementById('content').innerHTML = 'javascript';
    });
}); 
```

[jQuery 文档](http://api.jquery.com/html/)

# ios - iOS 中的动画过滤器

> ID：13158349
> 
> 赞同：0
> 
> 时间：2012-10-31T12:49:22.850
> 
> 标签：ios, image, filter

我将如何在 iOS 应用程序中实现过滤器的动画。例如，我有一个应用了模糊滤镜的静止图像。然后图像动画到清晰/正常版本。我知道一些像这样的图像处理的好框架。我也知道带有集成过滤器的 CoreImage。但是我找不到过滤器值的平滑动画的方法。

下一个问题我：如果有办法为它们设置动画，是否可以通过点击按钮来停止动画？

谢谢大家，马夏尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:02:50.190

获取原始图像的副本，对其应用过滤器，将其不透明度设置为 0，将其保留在原始图像之上，使用 UIViewAnimation 将其不透明度设置为 1。完成所有操作后，将原始图像替换为新图像并从 uiview 中删除新图像，​​问我你是否听不懂我在说什么，或者你是否需要进一步的帮助

# drupal - 如何过滤相关的分类术语？

> ID：13158352
> 
> 赞同：0
> 
> 时间：2012-10-31T12:49:33.627
> 
> 标签：drupal, drupal-7, drupal-views, drupal-taxonomy

我的分类中有一个类别列表，每个类别都有一个作为术语参考字段附加到它们的“相关类别”列表，即：

```
Category - "Brushes" -> Related Categories -"Ink, Paints, Paper" 
```

（其中每个“相关类别”都是有效的“类别”）

如何调整相关产品列表的视图，其中包含当前产品的类别，并返回与任何“相关类别”匹配的其他产品？

还是我以错误的方式接近这个，还有更好的方法？我试图减少工作量，而不是将“相关类别”附加到每个产品（这将涉及冗长的数据输入），而是将关系与已设置的类别联系起来。

请注意，每个产品都可以分配多个类别，这可能会使情况复杂化。

# c++ - 在函数声明中使用 ->

> ID：13158354
> 
> 赞同：6
> 
> 时间：2012-10-31T12:49:39.357
> 
> 标签：c++, c++11

> **可能重复：**
> [函数声明后的“->”是什么？](https://stackoverflow.com/questions/12417197/what-is-after-function-declaration)

我刚刚遇到以下使用 new`auto`关键字的 C++ 函数示例，我希望有人能帮助我理解语法的含义。

```
template <class T, class U>
auto add(T t, U u) -> decltype(t + u);

auto f = [](int a, int b) -> int {
   return a*b;
}; 
```

具体来说，我`->`对函数签名中的用户感到困惑，我希望这些写在 as

```
template <class T, class U>
auto add(T t, U u)
{
    decltype(t + u);
}

auto f = [](int a, int b){
    return a*b;
}; 
```

操作员在那里做什么`->`，我在哪里可以了解有关此语法的更多信息？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-31T12:55:03.553

> 操作员在里面做什么`->`？

这是一个*尾随返回类型*。代替：

```
int f(); 
```

你可以等效地写：

```
auto f() -> int; 
```

如果返回类型取决于函数参数类型，则需要使用这种形式；参数在声明之前不可用：

```
decltype(t+u) add(T t, U u); // Error: uses `t` and `u` before they're declared
auto add(T t, U u) -> decltype(t + u); // OK 
```

另外，如果你想指定一个 lambda 的返回类型，那么你必须使用这种形式；但是，正如您所指出的，在许多情况下（包括这个），您根本不需要指定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T12:57:16.350

[dcl.spec.auto]/2 解释了如何编写具有自动返回类型的函数声明：

> 在此类声明符有效的任何上下文中，自动类型说明符可能与带有尾随返回类型（8.3.5）的函数声明符一起出现。

然后，在 [dcl.fct]/12 中，有一条注释：

当函数的返回类型很复杂时，类型定义和尾随返回类型有时很方便。例如，上面的函数 fpif 可以被声明

```
typedef int IFUNC(int);
IFUNC* fpif(int); 
```

或者

```
auto fpif(int)->int(*)(int) 
```

trailing-return-type 对于在 declarator-id 之前指定更复杂的类型最有用：

```
template <class T, class U> auto add(T t, U u) -> decltype(t + u); 
```

而不是

```
template <class T, class U> decltype((*(T*)0) + (*(U*)0)) add(T t, U u); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T12:54:14.447

此语法（所谓*的 trailing-return-type*）是使用表达式作为返回类型的解决方法，如下所示：

```
template <class T, class U>
   decltype(t + u) add(T t, U u) { ... } 
```

...在 C++ 中是不正确的。

[不得不说这个问题在Wiki](http://en.wikipedia.org/wiki/C++11#Alternative_function_syntax)中解释得很好（我想）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T13:00:02.390

`->`是*尾随返回类型*。

C++11 提出了另一种函数声明语法。 `auto`关键字代替了通常的函数返回类型，而实际的返回类型在`->`.

例如，

```
auto f (int a, int b) -> int; 
```

相当于

```
int f(int a, int b); 
```

此功能对于必须从模板参数推断返回类型的模板函数最有用。

例如，

```
template <class T, class U>
auto add(T t, U u) -> decltype(t + u); 
```

返回类型将是表达式的类型`(t+u)`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-31T13:09:52.993

> -> 运算符在其中做什么，我在哪里可以了解有关此语法的更多信息？

[在cprogramming](http://www.cprogramming.com/c++11/c++11-auto-decltype-return-value-after-function.html)上有一个很好的解释。

使用 -> （在您的情况下）或 auto，decltype 的本质是方便，让您更专注于编程逻辑。

*尾随返回类型*(->) 可帮助您在函数声明本身中包含返回类型信息。

如果是您的替代示例：

```
auto add(T t, U u)
{
    decltype(t + u);
} 
```

如果函数相当复杂，那么程序的读者很难（不是很明显）弄清楚预期的返回类型是什么。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T12:56:58.783

函数声明中的 -> 运算符指定返回“auto”的函数的返回类型。它在 C++11 标准的第 8 章中定义。

# postgresql - 重复一列，将其复制到同一行中更多相同的列中

> ID：13158358
> 
> 赞同：1
> 
> 时间：2012-10-31T12:49:48.587
> 
> 标签：postgresql, pivot, crosstab

我有这样的 3 列表：`(ID, city,city_pop).`我只想复制**city_pop**列 20 次。所以决赛桌看起来像这样：与**city_pop**`(ID, city, city_pop, city_pop1, city_pop2, ...city_pop20)`具有相同的值。是否可以？

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T13:52:13.767

```
-- CREATE TABLE cities20 AS
SELECT id,city
    , city_pop AS city_pop0
    , city_pop AS city_pop1
    , city_pop AS city_pop2
    , city_pop AS city_pop3
    , city_pop AS city_pop4
    , city_pop AS city_pop5
    , city_pop AS city_pop6
    , city_pop AS city_pop7
    , city_pop AS city_pop8
    , city_pop AS city_pop9
    , city_pop AS city_pop10
    , city_pop AS city_pop11
    , city_pop AS city_pop12
    , city_pop AS city_pop13
    , city_pop AS city_pop14
    , city_pop AS city_pop15
    , city_pop AS city_pop16
    , city_pop AS city_pop17
    , city_pop AS city_pop18
    , city_pop AS city_pop19
 FROM cities
     ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T13:01:12.030

[这是扩展程序](http://www.postgresql.org/docs/current/static/tablefunc.html)[`crosstab`的`tablefunc`](http://www.postgresql.org/docs/current/static/tablefunc.html)另一项工作，尽管[这似乎是一件真正奇怪的事情](https://stackoverflow.com/a/13149878/398670)。

设置演示数据并加载`tablefunc`扩展：

```
CREATE TABLE cities (ID integer, city text, city_pop integer);

INSERT INTO cities VALUES (1,'Boganville',200), (2, 'Amity', 543);

CREATE EXTENSION tablefunc; 
```

询问：

```
SELECT city, ct.* FROM crosstab(
  'SELECT id, ''city_pop''||CASE WHEN x = 1 THEN '''' ELSE x::text END AS colname, city_pop  FROM generate_series(1,20) x CROSS JOIN cities ORDER BY 1, x;'
) ct(
    cityid integer,
    city_pop integer, city_pop2 integer, city_pop3 integer, city_pop4 integer,
    city_pop5 integer, city_pop6 integer, city_pop7 integer, city_pop8 integer,
    city_pop9 integer, city_pop10 integer, city_pop11 integer, city_pop12 integer,
    city_pop13 integer, city_pop14 integer, city_pop15 integer, city_pop16 integer,
    city_pop17 integer, city_pop18 integer, city_pop19 integer, city_pop20 integer
) INNER JOIN cities ON (ct.cityid = cities.id); 
```

结果：

```
 city    | cityid | city_pop | city_pop2 | city_pop3 | city_pop4 | city_pop5 | city_pop6 | city_pop7 | city_pop8 | city_pop9 | city_pop10 | city_pop11 | city_pop12 | city_pop13 | city_pop14 | city_pop15 | city_pop16 | city_pop17 | city_pop18 | city_pop19 | city_pop20 
------------+--------+----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+------------+------------+------------+------------+------------+------------+------------+------------+------------+------------+------------
 Boganville |      1 |      200 |       200 |       200 |       200 |       200 |       200 |       200 |       200 |       200 |        200 |        200 |        200 |        200 |        200 |        200 |        200 |        200 |        200 |        200 |        200
 Amity      |      2 |      543 |       543 |       543 |       543 |       543 |       543 |       543 |       543 |       543 |        543 |        543 |        543 |        543 |        543 |        543 |        543 |        543 |        543 |        543 |        543
(2 rows) 
```

使用以下命令生成的列列表：

```
SELECT string_agg( 'city_pop'||CASE WHEN x = 1 THEN '' ELSE x::text END || ' integer', ', ')  FROM generate_series(1,20) x; 
```**

# eclipse - 相当于 Intellij IDEA 中的 Eclipse Classpath Container

> ID：13158360
> 
> 赞同：2
> 
> 时间：2012-10-31T12:49:59.310
> 
> 标签：eclipse, plugins, intellij-idea, classpath, equivalent

我编写了一个 Eclipse 插件，它提供了一个类路径容器（只是为了完整起见——CPC 从本地开发服务器获取它的知识）。现在我被要求为 IntelliJ IDEA 提供相同的功能。

IntelliJ 是否支持类似的技术，或者有人将如何将动态计算的类路径条目实现为 intelliJ 插件。

提前感谢所有答案！

你做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T08:55:14.460

您正在寻找[“图书馆”或“全球图书馆”](http://www.jetbrains.com/idea/webhelp/library.html)。将 jar 和松散的类组合成您的模块可以依赖的集合。库是为单个项目定义的，而全局库在 IDEA 中的每个项目中都可用（因此是“全局”）。

您可以通过项目设置屏幕 ( `CTRL`+ `ALT`+ `SHIFT`+ `S`) 定义两者。

# tinymce - MODX Revolution 2.2.5pl 前端使用的富文本编辑器

> ID：13158364
> 
> 赞同：0
> 
> 时间：2012-10-31T12:50:08.443
> 
> 标签：tinymce, modx, modx-revolution

我正在创建一个网站，用户应该能够以与经理在后端相同的方式制作 html 内容。

如果用户也可以像后端一样上传图片，那就太好了。

有没有办法使用为后端安装的 TinyMCE 包？

MODX版本：革命2.2.5pl

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:31:07.683

但是，我知道没有这样的额外内容 - 您将想要安装和配置一个单独的 tinymce 实例，而不是尝试强制用于管理器的安装按照您的意愿运行。

短线在这里： [http ://forums.modx.com/thread/?thread=46174&page=1](http://forums.modx.com/thread/?thread=46174&page=1)

# android - 无法找到或加载主类 Start

> ID：13158367
> 
> 赞同：1
> 
> 时间：2012-10-31T12:50:17.497
> 
> 标签：android, eclipse

我开始使用 Eclipse 进行 Android 应用程序开发。我以前使用 eclipse 进行 java 开发没有问题。

我正在关注 developer.android.com 的[“创建 Android 项目”](http://developer.android.com/training/basics/firstapp/creating-project.html)，但我无法运行该应用程序，因为我得到了`"Error: Could not find or load main class Start"`

说明没有说明创建 Start 类，Android 插件也没有在创建的初始步骤中创建一个。

我已经完成了我的功课并寻找了我的问题的解决方案，但我的问题的所有可能答案都没有得到任何结果。

我已经安装了：

```
Eclipse Java EE IDE for Web Developers.
Version: Juno Service Release 1
Build id: 20121004-1855
Android Development Toolkit
Version: 20.0.3.v201208082019-427395 
```

我也安装了每个 Android SDK。

我在develop.android.com上教程的设置部分确实看到的一件事是他们提到的是在Eclipse插件的初始安装之后是配置插件

> Eclipse 重新启动后，您必须指定 Android SDK 目录的位置：
> 
> 1.在出现的“Welcome to Android Development”窗口中，选择Use existing SDKs。
> 
> 2.浏览并选择您最近下载的Android SDK目录的位置。
> 
> 3.单击下一步。

但是，我从未遇到过“欢迎使用 Android 开发”屏幕，我认为这可能是问题所在，但我找不到可以配置 ADT 插件的位置。

我感谢任何帮助，也为我对这个问题的无知表示歉意

谢谢，
HalbergM

# php - 输入起始和结束地理位置（纬度和经度）并从数据库（mysql）中搜索输入的起始位置和结束位置之间的位置？

> ID：13158377
> 
> 赞同：3
> 
> 时间：2012-10-31T12:50:38.630
> 
> 标签：php, android, mysql, google-maps, gps

我很困惑，也很累，无法找到上面的把戏。实际上，我有一个数据库表，其中包含六个字段 id、Sratlatitude、Startlongitude、EndLatitude、EndLongitude 和用户名。现在我想在数据库中查询

```
SELECT * FROM LOCATIONS(table name) WHERE USERS BETWEEN STARTING POINT(InputedStartlatitude and InputedStartlongitude) AND ENDING POINT(InputedEndlatitude and InputedEndlongitude);
```

例如：USERXXX 输入起点（InputedStartlatitude = 18.9647 和 InputedStartlongitude = 72.8258）= 孟买和终点（InputedEndlatitude = 18.9647 和 InputedEndlongitude = 72.8258）= 德里。现在他想使用 Inutedlatitudes 和 Inputedlongitudes 来搜索这条输入路线（行驶方向）之间有多少用户。搜索查询将触发到 mysql 数据库，并从存储的孟买到德里之间的开始和结束纬度和经度进行比较。

我为此找到了一种解决方案，例如对数据库进行查询：

```
SELECT * FROM lOCATIONS(tablename) WHERE (InputStartLatitude >= StartLatitude and IntartLongitude >= StartLong) and (InputEndLatitude <= EndLatitude and InuteEndLongitude <= EndLongitude); 
```

但是我在上面的查询中遇到了一些问题。下面是一些地方的坐标。请看：

![在此处输入图像描述](../Images/88a9681d7e6a3d703a0af148e36f0228.png)

开始和结束坐标为红色。起点是：Porbandar，终点是：Mumbai。现在的问题是，我面临的问题是，当我尝试搜索 Porbandar 到 Mumbai 之间的城市时，由于我的查询，并非所有城市都实际位于行驶方向。我在我的查询中只调用了那些城市，它们是如何大于开始经纬度和小于结束经纬度的。但这里孟买的纬度和经度几乎低于所有城市。那么我怎样才能进行正确的搜索查询呢？
希望我已经很好地解释了上述情况。

任何回应都会对我很有帮助。
我在客户端使用 php-mysql 作为后端和 android。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T10:51:53.707

您的问题可能是如果您的起始值高于结束值，则您的搜索表达式无法正常工作。在将边界值与表格字段进行比较之前，您必须对其进行排序。

这是一个始终有效的查询 - 无论您的起始位置是结束位置的东边还是西边（北边或南边）。为方便起见，我使用 MySQL 的`BETWEEN`运算符而不是`>=`and `<=`，但此查询的主要细节是边界值使用`LEAST`and`GREATEST`运算符进行排序：

```
SELECT * 
  FROM `locationtable` 
  WHERE  ( `lat` BETWEEN LEAST(InputStartLatitude, InputEndLatitude) AND GREATEST(InputStartLatitude, InputEndLatitude) )  
  AND    ( `long` BETWEEN LEAST(InputStartLongitude, InputEndLongitude) AND GREATEST(InputStartLongitude, InputEndLongitude) )
; 
```

希望这就是你要找的。

**编辑：**

在您现在指定了“之间”的*真正*含义之后，很明显您首先必须考虑一种算法来解决您的任务 - 早在您考虑该算法的实现之前（在 MySQL 或其他地方）。

这是我将如何解决您的难题的快速草图：

1.  为请求的行程以及所有提供的行程获取 Google 行车路线。
2.  这些行车路线包含“步数”（请参阅[​​ Maps API](https://developers.google.com/maps/documentation/directions/#DirectionsLegs)），这些步数基本上是计算行程所经过的纬度/经度点列表。您必须将所有提供的游乐设施的行车路线存储在您的数据库中，因为您将一次又一次地需要它们来检查每个新请求的游乐设施。
3.  现在的基本魔法是，查找请求的骑行的步骤是否是数据库中任何提供的骑行的步骤的子集。不幸的是，这几乎永远不会是这种情况，因为请求骑行的第一英里和最后一英里总是非常特定于请求者的位置（例如，从他家到下一条高速公路的道路）。所以你必须在这里实现一些容忍度。你可以通过多种方法做到这一点。让我举两个例子：

    a) 您可以尝试查找所请求的行程与任何提供的行程有哪些共同步骤，而不是检查请求的行程是否完全包含在任何提供的行程中（这从未发生过如上所述的情况）。从结果中取最长的一个（步数最多）。这个最长的可以“按原样”提供给请求者 - 这是他请求的最佳可用解决方案。找到共同的子部分可以通过以下方式完成：1.）在请求和任何提供的游乐设施的行驶方向上寻找第一个共同的纬度/经度步长坐标，以及 2.）从那里计算在两个游乐设施中相同的所有进一步步骤. 由于您必须将请求的游乐设施与所有提供的游乐设施相匹配，因此找到第一个公共纬度/经度坐标的过程确实非常昂贵！

    b) 另一种容错算法（更简单且更便宜）将首先丢弃从仅涵盖短距离的所有驾驶方向（乘车请求和乘车提议）的开始和结束的所有步骤。这些步骤很可能是往返于下一条高速公路的本地驾驶。然后，您可以直接匹配缩短的列表，而无需进一步容忍。如果（缩短的）请求完全包含在任何（缩短的）报价中，则该报价是成功的。这样做非常便宜。如果你创建了一个聪明的数据表示，你甚至可以在 MySQL 中做到这一点。例如，您可以在缩短的列表中创建所有纬度/经度对的字符串表示形式，并检查数据库中包含作为完整子字符串请求的乘车的提供的乘车（使用 MySQL 的`LIKE '%string%'`模式匹配）。

我希望这能对您的问题有所了解，并使您走上正轨。

# linux - Linux 内核驱动程序异步 I2C（在 Raspberry PI 上）

> ID：13158378
> 
> 赞同：1
> 
> 时间：2012-10-31T12:50:46.117
> 
> 标签：linux, asynchronous, driver, nonblocking, i2c

我想为传感器设备编写 I2C 驱动程序。有一个非零转换时间，我不想浪费内核时间等待和轮询忙状态，直到设备忙。

我以为我设置了一个计时器并不时调用更新。

然而，当执行到任何 I2C 函数时，整个系统都会冻结。

我准备了一个非常简化的示例，但它不起作用。一切都很好，直到 I2C 访问。

[http://pastebin.com/kP5LCK2c](http://pastebin.com/kP5LCK2c)

没有 I2C 的东西，代码就可以工作。没有定时器的东西，I2C 就可以工作。

我没有找到如何以异步（非阻塞）方式使用 I2C。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T14:28:18.740

由于 i2c 函数处于休眠状态，因此无法从计时器调用它们。幸运的是，计时器并不是安排未来工作的唯一方法。查看工作队列：

*   [LDD3](http://www.makelinux.net/ldd3/chp-7-sect-6)
*   [如何使用 Linux 工作队列](https://stackoverflow.com/questions/7937245/how-to-use-linux-work-queue)

特别是查看`queue_delayed_work`，它将允许您在将来在能够休眠的进程上下文中运行函数。

# php - “胖模型”与控制器的交互

> ID：13158380
> 
> 赞同：0
> 
> 时间：2012-10-31T12:50:57.053
> 
> 标签：php, model-view-controller

我正在尝试应用“胖模型”原理，但我不知道如何正确地在“胖模型”和控制器之间进行交互。

假设我们有`Model_User`,`Controller_User`和`Model_User_Resource`（与 Db 交互）。

```
class Model_User
{

    public function register($data, $sendRegistrationEmail = false) {

        //checking ACL rules
        if (!$this->getAcl()->checkAcl('registration')) {        
            throw new Acl_Exception();
        }

        //validating form
        $F = new Form_User_Registration($data);
        if (!$F->isValid()) {
            return $F;
        }

        //inserting data and returning new user's id
        $Resource = new Model_User_Resource();
        $userId = $Resource->insert($data);

        return $userId;

    }

}

class Controller_User
{

    public function registrationAction() {

        $post = $this->getRequest->getPost();
        $Model = new Model_User();
        $result = $Model->register($post);

        if ($result instanceof Form_User_Registration) {
            //model has returned Form instance
            return new Response(json_encode($result->getErrors()));
        }

        //registration was successful and we're doing some kind of redirect here, I suppose

    }

} 
```

那么，这段代码有什么问题呢？模型可以：抛出 Acl 异常，如果发生错误则返回 Form 实例，如果成功或任何其他异常则返回整数。我的问题是：**模型以这种方式返回错误是否正确？最佳做法是什么？这种方式将来会很痛苦吗？**

谢谢！

# android - 无法访问之前创建的 SQLite 数据库

> ID：13158383
> 
> 赞同：1
> 
> 时间：2012-10-31T12:50:57.723
> 
> 标签：android, database, sqlite, mobile-application

我正在创建一个应用程序，我必须在其中打开以前创建的 SQLite 数据库。我正在使用 DBHelper 类。当我模拟应用程序时一切都很好，但是 logcat 显示以下错误：

```
10-31 17:59:56.345: I/Database(391): sqlite returned: error code = 14, msg = cannot open file at source line 25467
10-31 17:59:56.345: E/Database(391): sqlite3_open_v2("/data/data/com.proj.neuroq/databases/quiz.db", &handle, 1, NULL) failed 
```

**我的活动课：**

```
public class QuestionActivity extends Activity {

    String db_name="quiz";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_question);

        DatabaseHelper myDbHelper = new DatabaseHelper(getBaseContext());
        myDbHelper = new DatabaseHelper(this);

        try {

            myDbHelper.createDatabase();

    } catch (IOException ioe) {

        throw new Error("Unable to create database");

    }

    try {

        myDbHelper.openDataBase();

    }catch(SQLException sqle){

        throw sqle;

    }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_question, menu);
        return true;
    }

} 
```

**我的 DatabaseHelper 类：**

```
public class DatabaseHelper extends SQLiteOpenHelper {

    private static String DB_PATH = "/data/data/com.proj.neuroq/databases/";
    private static String DB_NAME = "quiz.db";
    private SQLiteDatabase db;
    private final Context myContext;

    public DatabaseHelper(Context context) {
        super(context, DB_NAME, null, 1);
        this.myContext = context;
    }

    /**
     * Creates a empty database on the system and rewrites it with your own database.
     */
    public void createDatabase() throws IOException {
        boolean dbExist = checkDataBase();

        if(dbExist) {
            //do nothing - database already exist
        } else {
            //By calling this method and empty database will be created into the default system path
            //of your application so we are gonna be able to overwrite that database with our database.
            this.getReadableDatabase();

            try {
                copyDataBase();
            } catch(IOException e) {
                throw new Error("Error copying database");
            }
        }
    }

    /**
     * Check if the database already exist to avoid re-copying the file each time you open the application.
     * @return true if it exists, false if it dosen't
     */
    private boolean checkDataBase(){
        SQLiteDatabase checkDB = null;

        try {
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
        } catch (SQLiteException e) {

        }

        if(checkDB != null) {
            checkDB.close();
        }

        return checkDB != null ? true : false;
    }

    /**
     * Copies your database from your local assets-folder to the just created empty database in the
     * system folder, from where it can be accessed and handled.
     * This is done by transfering bytestream.
     */
    private void copyDataBase() throws IOException {
        //Open your local db as the input stream
        InputStream myInput = myContext.getAssets().open(DB_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        // Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        //transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while((length = myInput.read(buffer))>0) {
            myOutput.write(buffer, 0, length);
        }

        // Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();
    }

    public void openDataBase() throws SQLException {
        //Open the database
        String myPath = DB_PATH + DB_NAME;
        db = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
    }

    @Override
    public synchronized void close() {
        if(db != null)
            db.close();

        super.close();
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub

    }

} 
```

**我的清单文件：**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.proj.neuroq"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".QuestionActivity"
            android:label="@string/title_activity_question" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

**这是我的项目结构：**

![**资产**中的项目结构**quiz.db**](../Images/db5f5d6496186e6c839819b1b6ccdb6f.png)

这是我的**logcat 输出：**

![**Logcat** 错误](../Images/6ec89004d869eea32e5db4e5f7ebdeb2.png)

我提到的链接：

[http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

[http://snipplr.com/view.php?codeview&id=58589](http://snipplr.com/view.php?codeview&id=58589)

棘手的问题在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:13:42.170

你应该用这样的东西替换你的 checkDataBase() 方法：

```
public boolean checkDataBase()
{
    File dbFile = new File(DB_PATH + DB_NAME);
    return dbFile.exists();
} 
```

如本文所建议：[http ://www.itsalif.info/content/check-if-database-exist-android-sqlite3openv2-failed](http://www.itsalif.info/content/check-if-database-exist-android-sqlite3openv2-failed)

# regex - 带有国家特定代码的电话号码的正则表达式，没有空格

> ID：13158385
> 
> 赞同：-3
> 
> 时间：2012-10-31T12:51:05.707
> 
> 标签：regex

我想检查数字类型是否采用格式`+255`数字总是`+255*********`我希望能够选择国家代码，然后是 9 个数字，之后**没有**空格。我只希望国家代码和数字在 +255 之后没有任何空格并且没有前导零，因为大多数数字都采用这种格式。0711223344\. 我不想让用户在国家代码后面输入 0。

我正在使用 jquery 验证器，并想为验证器添加一个新的正则表达式查找。它纯粹是 jscript。

我有

```
/^([+]255)([\d]{9})$/ 
```

我希望它在 +255 之后禁用输入 0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:24:19.110

使用您的表达式作为基础：

```
/^(+255)([1-9][\d]{8})$/ 
```

# jpa - 错误新的缺失/不满足的依赖关系：（无法配置数据源）

> ID：13158387
> 
> 赞同：3
> 
> 时间：2012-10-31T12:51:12.510
> 
> 标签：jpa, jboss, jboss7.x

我有一个使用 JSF(Primefaces)、JPA(Hibernate) 和 EJB 的 Web 应用程序，并且无法在 JBoss 上配置数据源。我收到以下错误：

```
2012/10/31 07:20:17,948 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-3) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)

2012/10/31 07:20:18,836 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS015870: Deploy of deployment "ROOT.war" was rolled back with failure message {"JBAS014771: Services with missing/unavailable dependencies" => ["jboss.persistenceunit.\"ROOT.war#test\"jboss.naming.context.java.jboss.datasources.MysqlDSMissing[jboss.persistenceunit.\"ROOT.war#test\"jboss.naming.context.java.jboss.datasources.MysqlDS]"]}

2012/10/31 07:20:19,252 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015877: Stopped deployment ROOT.war in 413ms

2012/10/31 07:20:19,255 INFO  [org.jboss.as.controller] (DeploymentScanner-threads - 2) JBAS014774: Service status report

JBAS014775:    New missing/unsatisfied dependencies:

      service jboss.naming.context.java.jboss.datasources.MysqlDS (missing) dependents: [service jboss.persistenceunit."ROOT.war#test"]

2012/10/31 07:20:19,334 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) {"JBAS014653: Composite operation failed and was rolled back. Steps that failed:" => {"Operation step-2" => {"JBAS014771: Services with missing/unavailable dependencies" => ["jboss.persistenceunit.\"ROOT.war#test\"jboss.naming.context.java.jboss.datasources.MysqlDSMissing[jboss.persistenceunit.\"ROOT.war#test\"jboss.naming.context.java.jboss.datasources.MysqlDS]"]}}} 
```

您可以在下面看到我的`persistence.xml`,`stanadlone.xml`和`pom.xml`. **我是否缺少 pom.xml 中的一些依赖项？**

持久性.xml

```
 <provider>org.hibernate.ejb.HibernatePersistence</provider> 

<jta-data-source>java:jboss/datasources/MysqlDS</jta-data-source> 

<properties>

  <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>    

  <property name="hibernate.show_sql" value="true"/>

  <property name="hibernate.max_fetch_depth" value="3"/>

  <property name="hibernate.hbm2ddl.auto" value="update" />

</properties> 
```

独立的.xml

```
<datasources>
            <datasource jndi-name="java:jboss/datasources/ExampleDS" enabled="true" use-java-context="true" pool-name="H2DS">
                <connection-url>jdbc:h2:${jboss.server.data.dir}/test;DB_CLOSE_DELAY=-1</connection-url>
                <driver>h2</driver>
            <security>
                    <user-name>sa</user-name>
                    <password>sa</password>
                </security>
            </datasource>
            <datasource jndi-name="java:jboss/datasources/MysqlDS" enabled="${mysql.enabled}" use-java-context="true" pool-name="MysqlDS">
                <connection-url>jdbc:mysql://127.5.54.1:3306/researchprojects</connection-url>
                <driver>mysql</driver>
                <security>
                  <user-name>admin</user-name>
                  <password>*******</password>
                </security>
                <validation>
                  <check-valid-connection-sql>SELECT 1</check-valid-connection-sql>
                </validation>
            </datasource>
            <datasource jndi-name="java:jboss/datasources/PostgreSQLDS" enabled="${postgresql.enabled}" use-java-context="true" pool-name="PostgreSQLDS" use-ccm="true">
                <connection-url>jdbc:postgresql://${env.OPENSHIFT_DB_HOST}:${env.OPENSHIFT_DB_PORT}/${env.OPENSHIFT_APP_NAME}</connection-url>
                <driver>postgresql</driver>
                <security>
                  <user-name>${env.OPENSHIFT_DB_USERNAME}</user-name>
                  <password>${env.OPENSHIFT_DB_PASSWORD}</password>
                </security>
                <validation>
                  <check-valid-connection-sql>SELECT 1</check-valid-connection-sql>
                </validation>
            </datasource>
            <drivers>
                <driver name="h2" module="com.h2database.h2">
                    <xa-datasource-class>org.h2.jdbcx.JdbcDataSource</xa-datasource-class>
                </driver>
                <driver name="mysql" module="com.mysql.jdbc">
                    <xa-datasource-class>com.mysql.jdbc.jdbc2.optional.MysqlXADataSource</xa-datasource-class>
                </driver>
                <driver name="postgresql" module="org.postgresql.jdbc">
                    <xa-datasource-class>org.postgresql.xa.PGXADataSource</xa-datasource-class>
                </driver>
            </drivers>
        </datasources> 
```

Pom.xml

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>openshifttest</groupId>
  <artifactId>openshifttest</artifactId>
  <packaging>war</packaging>
  <version>1.0</version>
  <name>openshifttest</name>

 <repositories>
  <repository>
        <id>scala</id>
        <name>Scala Tools</name>
        <url>http://scala-tools.org/repo-releases/</url>
        <releases>
            <enabled>true</enabled>
        </releases>
        <snapshots>
            <enabled>false</enabled>
        </snapshots>
    </repository>
  <repository>  
    <id>prime-repo</id>  
    <name>PrimeFaces Maven Repository</name>  
    <url>http://repository.primefaces.org</url>  
    <layout>default</layout>  
    </repository>
</repositories>   

    <pluginRepositories>
        <pluginRepository>
            <id>scala</id>
            <name>Scala Tools</name>
            <url>http://scala-tools.org/repo-releases/</url>
            <releases>
                <enabled>true</enabled>
            </releases>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </pluginRepository>
    </pluginRepositories>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <maven.compiler.source>1.6</maven.compiler.source>
    <maven.compiler.target>1.6</maven.compiler.target>
  </properties>

  <dependencies>
    <dependency>
      <groupId>org.jboss.spec</groupId>
      <artifactId>jboss-javaee-6.0</artifactId>
      <version>1.0.0.Final</version>
      <type>pom</type>
      <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.scala-lang</groupId>
        <artifactId>scala-library</artifactId>
        <version>2.7.2</version>
    </dependency>
    <dependency>  
        <groupId>org.primefaces</groupId>  
        <artifactId>primefaces</artifactId>  
        <version>3.4.1</version>  
    </dependency>
  </dependencies>

  <profiles>
    <profile>
     <!-- When built in OpenShift the 'openshift' profile will be used when invoking mvn. -->
     <!-- Use this profile for any OpenShift specific customization your app will need. -->
     <!-- By default that is to put the resulting archive into the 'deployments' folder. -->
     <!-- http://maven.apache.org/guides/mini/guide-building-for-different-environments.html -->
     <id>openshift</id>
     <build>
        <finalName>openshifttest</finalName>
        <plugins>
          <plugin>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1.1</version>
            <configuration>
              <outputDirectory>deployments</outputDirectory>
              <warName>ROOT</warName>
            </configuration>
          </plugin>
          <plugin>
                <groupId>org.scala-tools</groupId>
               <artifactId>maven-scala-plugin</artifactId>

                <executions>
                    <execution>
                        <id>compile</id>
                        <goals>
                        <goal>compile</goal>
                        </goals>
                        <phase>compile</phase>
                    </execution>

                    <execution>
                        <id>test-compile</id>
                        <goals>
                        <goal>testCompile</goal>
                        </goals>
                        <phase>test-compile</phase>
                    </execution>

                    <execution>
                        <phase>process-resources</phase>
                        <goals>
                            <goal>compile</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
      </build>
    </profile>
  </profiles>
</project> 
```

**有人可以告诉我我做错了什么吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T00:38:48.480

你启用mysql数据源了吗？默认情况下它是禁用的。

部分配置

```
<datasource jndi-name="java:jboss/datasources/MysqlDS" enabled="${mysql.enabled}" use-java-context="true" pool-name="MysqlDS"> 
```

具有标志 ${mysql.enabled} ，它是启用数据源的系统属性，以防它是启用的 mysql。

看看指南[http://jaitechwriteups.blogspot.com/2011/08/deploy-java-ee-application-on-openshift.html](http://jaitechwriteups.blogspot.com/2011/08/deploy-java-ee-application-on-openshift.html)

并搜索“使用 OpenShift Express 中可用的 MySQL 数据库”一章

这向您显示了您缺少的配置部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-19T09:02:19.860

有点晚了，但是在收到这个错误并检查了很多东西之后，结果发现我只是将驱动程序的定义留在了standalone.xml中

`<drivers> <driver name="mysql" module="com.mysql"> <xa-datasource-class>com.mysql.jdbc.Driver</xa-datasource-class> </driver> </drivers>`

因此，检查的步骤是：

1.  将 jar 文件 mysql-connector-java-5.1.13-bin.jar 添加到 jboss-eap-6.1/modules/com/mysql/main

2.  将 module.xml 文件添加到 jboss-eap-6.1/modules/com/mysql/main

`

```
<module xmlns="urn:jboss:module:1.1" name="com.mysql"><resources>
<resource-root path="mysql-connector-java-5.1.13-bin.jar"/>
</resources>
<dependencies>
<module name="javax.api"/>
<module name="javax.transaction.api"/>
<module name="javax.servlet.api" optional="true"/>
</dependencies>
</module> 
```

`

3.将此添加到standalone.xml `

```
 <datasource jndi-name="java:jboss/datasources/MySqlDS"
          pool-name="MySqlDS" enabled="true"
          use-java-context="true" jta="true" use-ccm="true">
            <connection-url>jdbc:mysql://localhost:3306/testDB</connection-url>
            <driver-class>com.mysql.jdbc.Driver</driver-class>
            <driver>mysql</driver>

            <security>
                <user-name>root</user-name>
                <password></password>
            </security>
       </datasource>
        <drivers>
            <driver name="mysql" module="com.mysql">
                <xa-datasource-class>com.mysql.jdbc.Driver</xa-datasource-class>
            </driver>
        </drivers> 
```

`4\. in your web app persistance.xml, add this line`

java:jboss/数据源/MySqlDS

`

希望这对某人有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T13:18:31.027

您需要正确安装 JDBC 驱动程序作为 JBoss 7 模块。

一种。创建文件夹 JBOSS_HOME\modules\com\mysql\main （是的，主子文件夹必须在那里）

湾。将 JDBC 驱动程序复制到该文件夹

C。在该文件夹中创建具有以下内容的 module.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>

<module xmlns="urn:jboss:module:1.0" name="com.mysql">
  <resources>
    <resource-root path="mysql-connector-java-5.1.6-bin.jar"/>
  </resources>
  <dependencies>
    <module name="javax.api"/>
    <module name="javax.transaction.api"/>
  </dependencies>
</module> 
```

where`mysql-connector-java-5.1.6-bin.jar`必须用您的驱动程序名称替换。请注意，对于此类模块配置，您需要将`module`驱动程序定义中的名称更改为`com.mysql`（这是一种命名约定），或者只是在 module.xml 中重命名模块名称。

重新启动服务器后，您应该在 JBOSS_HOME\modules\com\mysql\main 中看到一个新文件 .index。

我已经在 J​​Boss 7.1.1.Final 上测试过了

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-16T05:48:26.477

如果您将数据源指定为 web.xml 中的资源引用，则将名称与standalone.xml（或 domain.xml） 中的名称*完全匹配：*

**网页.xml**：

```
 <resource-ref>
  <res-ref-name>java:jboss/datasources/OracleDS</res-ref-name>
  <res-type>javax.sql.DataSource</res-type>
  <res-auth>Container</res-auth>
 </resource-ref> 
```

**独立的.xml**：

```
<datasource jndi-name="java:jboss/datasources/OracleDS" pool-name="OracleDS" enabled="true" use-java-context="false"> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-21T08:06:28.220

就我而言，persistence.xml 中有拼写问题

```
<jta-data-source>java:jboss/datasources/mydb</jta-data-source> 
```

必须匹配：

```
<datasource jta="true" jndi-name="java:jboss/datasources/mydb" pool-name="EmployeeDb" enabled="true" use-ccm="false"> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-01T16:27:19.993

有同样的问题。几个小时后，我在以下位置找到了解决方案：

[https://docs.jboss.org/author/display/AS7/How+do+I+migrate+my+application+from+AS5+or+AS6+to+AS7](https://docs.jboss.org/author/display/AS7/How+do+I+migrate+my+application+from+AS5+or+AS6+to+AS7)

> 确保您在 module.xml 文件的开头没有空格，否则您将收到此驱动程序的“新缺少/不满足的依赖项”错误。

嗬！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-07T14:39:59.627

您应该考虑尝试设置不同版本的 mysql 驱动程序。

```
mysql-connector-java-5.1.17-bin worked fine for me. 
```

希望这个对你有帮助，

谢谢。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-20T07:48:11.293

如果您对数据源配置没问题。确保您安装了 jboss 开发工具包以从 eclipse 市场进行 eclipse。它会起作用的。

# android - 会话用户管理android

> ID：13158388
> 
> 赞同：1
> 
> 时间：2012-10-31T12:51:11.910
> 
> 标签：android

我有一个应用程序，您必须像使用密码的用户一样登录。

这个应用程序需要是安全的，所以当用户在一段确定的时间（比如说，5 分钟）内没有触摸屏幕时，它需要注销用户。

问题是，一旦用户登录，他可以进行许多活动，而不仅仅是一个，我想知道Android中是否有办法知道用户是否可以在几分钟后退出。

我正在考虑使用 onInterceptTouchEvent(MotionEvent ev) 方法，但问题是，¿我必须在每个活动中使用此方法吗？¿ 在 Android 中还有另一种更简单的管理方法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:08:46.093

**1.**实现此目的的一种方法`System.currentTimeMillis()`是在用户登录应用程序时获取当前时间（使用 ）。让我们把它保存在一个变量`t1`中。

**2.**启动一个服务，它将监视/检查/执行以下事情：

**2a.** 每当用户触摸您的任何活动时，将值设置`t1`为当前时间。

**2b。**连续获取当前时间 ( ) 并计算和(ie )`t2`之间的时间间隔。如果此延时等于或大于 5 分钟，您可以调用该函数。`t1``t2``t2 - t1``logOut()`

是的，您必须从每个活动中通知后台服务用户存在。尽管**Carnal**提供的解决方案将大大减少您实现这一目标的努力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:08:56.520

`Activity`您可以像这样创建一个，而不是在 every 上实现`Activity`这个：

```
public class BaseActivity extends Activity 
```

并`onInterceptTouchEvent`在您的`BaseActivity`.

然后从所有其他`Activities`你将不得不扩展`BaseActivity`

**更新：**`onTouch`如果你想在整个屏幕上监听事件， 你将不得不使用。这要求在您的每个 xml 文件中`Activity`，您必须为您的 xml（ 、、或其他）`id`的根视图提供一个。因此，为了让您从其他人那里获取输入，您必须将您的根视图传递给它，如下所示：`Linearlayout``Relativelayout``Framelayout``BaseActivity``Activities`

```
public class MyActivity extends BaseActivity{
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.my_activity);
        super.setRootView(findViewById(R.id.rootView));
    }
}

public class BaseActivity extends Activity implements OnTouchListener{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    public void setRootView(View rootView){
        rootView.setOnTouchListener(this);
    }

    public boolean onTouch(View v, MotionEvent event) {
        Log.d("BaseActivity", "onTouch!");
        return super.onTouchEvent(event);
    }
} 
```

# java - 从 Android Java 和 PHP REST API 解析 JSON 的异常

> ID：13158392
> 
> 赞同：3
> 
> 时间：2012-10-31T12:51:16.757
> 
> 标签：java, android, json, rest

我想发送这样的 JSON：

```
{"reverseme" : "Reverse Me!" } 
```

所以我创建了这个Java：

```
JSONObject jsonToSend = new JSONObject()
    .put("reverseme", "Reverse ME!") 
```

如果我将其转换为 String 并将其发送到我的 api 我没有问题：

```
HttpClient client = new HttpClient();
HttpPost post = new HttpPost("http://192.168.0.10/api");

List<NameValuePair> postData= new ArrayList<NameValuePair>();
postParams.add(new BasicNameValuePair("json", jsonToSend.toString()));

post.setEntity(new UrlEncodedFormEntity(postData)); 
```

它将转到我的 PHP API 就像这样简单（我正在测试一些东西）：

```
<?php 
$JSON = json_decode($_POST['json'], true);

print(
    json_encode( Array(
        'reversed' : strrev($JSON['reverseme'])
    ))
); ?> 
```

最后，读取响应的 Java 代码是这样的：

```
HttpResponse httpresponse = client.execute(post);
String jsonstringresponse = EntityUtils.toString(httpresponse.getEntity()); 
JSONObject jsonresponse = new JSONObject(jsonstringresponse); 
```

它给了我这个 StackTrace：

```
org.json.JSONException: A JSONObject text must begin with '{' at character 1 of "{\"reversed\": "!EM esreveR"}"
    at org.json.JSONTokener.syntaxError(JSONTokener.java:448)
    at org.json.JSONObject.<init>(JSONObject.java:178)
    at org.json.JSONObject.<init>(JSONObject.java:246)
 -> at com.example.test.MainActivity.onClick(MainActivity.java:67)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:521)
    at android.view.View$1.onClick(View.java:2026)
... 
```

当然，正如您在 StackTrace 的最后一行中看到的那样，我有一些 Android UI，它从 EditText 读取并将 JSONresult 放入 TextView。

问题是它来自服务器：

```
"{\"reversed\": "!EM esreveR"}" 
```

这里有什么问题？为什么 json_encode 会转义每个字符？是字符集问题还是需要清洁或什么？

感谢任何建议。

* * *

**更新 1** 在 Apache 错误日志中，我发现了这一行：

```
[error] PHP Warning:  json_encode(): Invalid UTF-8 sequence in argument in /var/www/controllers/api.inc.php on line 4. 
```

我认为它甚至可能是 PHP 配置错误？

* * *

**更新 2**

json_encode 收到一个西班牙语字符串，这就是该错误的原因：读取“Atención”会因为“ó”而出错。

我暂时使用 stripslashes() 并删除第一个和最后一个字符以使其工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:46:35.733

是服务器配置错误，PHP 保存在 ISO-8859-1 字符集上，因此 PHP 与 3 个不同的字符集混淆。

# extjs4.1 - 按钮单击以在 Ext Js - 桌面应用程序中从一个视图导航到另一个视图

> ID：13158395
> 
> 赞同：1
> 
> 时间：2012-10-31T12:51:36.347
> 
> 标签：extjs4.1

我有一个面板，里面有 2 个表格。第一种形式有按钮。单击表单 1 中的按钮应显示表单 2。

我为按钮编写了一个处理函数 var a = Ext.getCmp('mainpanel'); //它是面板的id a.setActiveItem(Ext.getCmp('subform2')); //是第二种形式的id

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:22:27.160

尝试创建一个分层面板，然后向其中添加 2 个面板

```
private JLayeredPane mainPanel = new JLayeredPane();
private JPanel form1Panel = new JPanel();
private JPanel form2Panel = new JPanel();

//other settings on the panel ...
//your form...

//on form1 button
JButton button1 = new JButton("go to form 2");
button.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent e){
           form1Panel.setVisible(false);
           form2Panel.setVisible(true);
    }
});
form1Panel.add(button1);

mainPanel.add(form1Panel);
mainPanel.add(form2Panel); 
```

# android - Android Widgets : On Focus, On Click 小部件的效果

> ID：13158398
> 
> 赞同：0
> 
> 时间：2012-10-31T12:51:41.370
> 
> 标签：android, android-layout, android-widget, android-launcher

感谢您阅读我的问题，请耐心阅读。该场景与普通的 Android 应用程序有点不同。

我正在为 Android TV 创建自己的启动器。我拥有将我的应用程序作为系统应用程序运行的完全权限。

我有自己的启动器，我在其中放置小部件。在 Android 中，我们通常通过在主屏幕上拖放来放置小部件，但在我的情况下，我必须在启动器启动后立即放置所有小部件。我能够成功放置所有小部件。用户不允许更改小部件位置或不允许删除任何小部件。所有小部件都是固定的。

现在的要求是这样的，

1.  对于 Android TV，我可以通过遥控器访问所有小部件和应用程序等。我可以通过遥控器访问所有内容，而不是触摸屏。

2.  在我拥有所有小部件的主屏幕/启动器上，我需要实现空间导航。即我必须通过远程左/右/上/下键浏览所有小部件。

作为解决方案，我做了以下事情：

1.  我已经处理了 onFocusChangeListener 来监听焦点更改事件，我还处理了 onClickListener 来处理 onClick 事件。

2.  在焦点更改和单击时，我向每个小部件发送广播，以及额外的数据，即 got_focus、lost_focus 或 clicked。在每个小部件中，我都有一个接收广播的接收器，并且根据任何状态，小部件都会更改其背景图像。我已经在我的每个接收器中输入了日志。所有接收者都接收到各自的广播，但问题是改变状态的行为并不一致。有时小部件会改变状态，但有时它们不会，即使它们接收到广播。

所以，我想知道有没有其他方法可以使这种行为保持一致。任何在启动器上工作并遇到过相同情况的人，请帮助我。从过去的 3 天开始，我被困在这部分。有没有其他方法可以从启动器更新小部件背景图像。

感谢您耐心阅读。任何形式的帮助将不胜感激。

再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T08:15:33.193

现在小部件不适合电视。

你可以把LinearLayout包含小部件。

设置可聚焦的线性布局。

禁止小部件内容焦点。

遥控键使 LinearLayout 状态发生变化。

如果你按确定。只需启动小部件的活动。

但它无法控制小部件的内容（禁止焦点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-21T12:15:39.227

转到 developer.android.com 并搜索“状态列表资源”并将其应用于相关的 Android TV GUI 元素。

# ruby-on-rails - 启动 ruby 服务器时出错

> ID：13158399
> 
> 赞同：0
> 
> 时间：2012-10-31T12:51:41.170
> 
> 标签：ruby-on-rails, ruby

我是红宝石新手。我正在尝试使用命令启动 ruby​​ 服务器`bundle exec rails server -p 3018`。但我收到以下错误。我检查了代码，没有`newrelic.yml`文件。

```
Cannot find or read /Users/hjodiawalla/Downloads/TheGiftsProject-Plugin/config/newrelic.yml
Exiting
/Library/Ruby/Gems/1.8/gems/activerecord-3.0.3/lib/active_record/connection_adapters/postgresql_adapter.rb:928:in 'initialize': could not connect to server: Connection refused (PG::Error)
Is the server running on host "localhost" and accepting TCP/IP connections on port 5432? could not connect to server: Connection refused
Is the server running on host "localhost" and accepting TCP/IP connections on port 5432? could not connect to server: Connection refused
Is the server running on host "localhost" and accepting TCP/IP connections on port 5432?
    from /Library/Ruby/Gems/1.8/gems/activerecord-3.0.3/lib/active_record/connection_adapters/postgresql_adapter.rb:928:in 'connect'
    from /Library/Ruby/Gems/1.8/gems/activerecord-3.0.3/lib/active_record/connection_adapters/postgresql_adapter.rb:928:in 'connect' 
```

我该如何解决这个问题。服务器之前使用相同的配置工作。所以我在这里错过了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:06:14.753

你必须安装一个`config/newrelic.yml`文件。（[文档](https://newrelic.com/docs/ruby/ruby-agent-installation)）

# iphone - 设置UITableView contentOffset，然后拖动，视图偏移跳转到新位置

> ID：13158402
> 
> 赞同：5
> 
> 时间：2012-10-31T12:52:07.753
> 
> 标签：iphone, uitableview, uiscrollview

我有一个`UITableView`略大于`self.view`. 我`UITextField`在视图底部有一个，`– textFieldDidBeginEditing:`当文本字段开始编辑时，我使用委托方法将视图向上移动。

这很好用，但是如果我`UITextField`在编辑时尝试滚动视图（并且内容已经偏移），那么内容会猛烈移动到视图的底部“适当”位置。换句话说，`contentOffset.y`I 设置更改为等于内容视图的大小（正如您对正常行为所期望的那样）。

任何想法如何在编辑时覆盖此行为？

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    // Scroll to the currently editing text field
    [self scrollViewToTextField:textField];

}

- (void)scrollViewToTextField:(id)textField
{
    // Set the current _scrollOffset, so we can return the user after editing
    _scrollOffsetY = self.tableView.contentOffset.y;

    // Get a pointer to the text field's cell
    UITableViewCell *theTextFieldCell = (UITableViewCell *)[textField superview];

    // Get the text fields location
    CGPoint point = [theTextFieldCell convertPoint:theTextFieldCell.frame.origin toView:self.tableView];

    // Scroll to cell
    [self.tableView setContentOffset:CGPointMake(0, point.y - 12) animated: YES];
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-31T16:03:19.107

避免这种行为的方法是同时应用`contentInset`。所以对于上面的例子：

```
- (void)scrollViewToTextField:(id)textField
{
    // Set the current _scrollOffset, so we can return the user after editing
    _scrollOffsetY = self.tableView.contentOffset.y;

    // Get a pointer to the text field's cell
    UITableViewCell *theTextFieldCell = (UITableViewCell *)[textField superview];

    // Get the text fields location
    CGPoint point = [theTextFieldCell convertPoint:theTextFieldCell.frame.origin toView:self.tableView];

    // Scroll to cell
    [self.tableView setContentOffset:CGPointMake(0, point.y - 12) animated: YES];

    // Add some padding at the bottom to 'trick' the scrollView.
    [self.tableView setContentInset:UIEdgeInsetsMake(0, 0, point.y - 60, 0)];
} 
```

然后确保在编辑后重置插图：

```
- (void)textFieldDidEndEditing:(UITextField *)textField {
    [self.tableView setContentInset:UIEdgeInsetsMake(0, 0, 0, 0)];
} 
```

这种方法的警告是，您必须在`- (void)scrollViewDidScroll:(UIScrollView *)scrollView`方法中执行一些检查，以检查您的文本字段是否仍在视图中。

替代方法是在编辑开始时禁用滚动，并在结束时重新启用滚动。您必须确定此操作是否对您的应用程序中的 UX 不利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:30:15.327

如果您使用输入文本字段，我想补充一点。并且需要滚动然后应用一个应用 EdgeInset 的 firstResponder 使用：

```
[self.tableView setContentOffset:CGPointMake(0.0f, 0.0f) animated:YES];
[self.tableView setContentInset:UIEdgeInsetsZero]; 
```

在 UITableView 中的输入字段获得焦点时停止自动滚动之后。谢谢@squarefrog

# php - PHP：如何通过正则表达式获取子字符串

> ID：13158405
> 
> 赞同：0
> 
> 时间：2012-10-31T12:52:11.240
> 
> 标签：php, regex

我有这样的 htacess 规则：

```
RewriteRule ^([A-z])([0-9]+)-([^/]*)?$ index.php?tt=$1&ii=$2&ll=$3 
```

是否有任何 PHP 函数可以做到这一点？
就像是：

```
$A = XXXX_preg_match("([A-z])([0-9]+)-([^/]*)" , "A123-boooooo");
// $A become to =array("A","123","boooooo") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:57:07.350

如果您只想检索这三个值，您可以传递一个输出参数，`preg_match`如下所示：

```
preg_match(
    '~^([A-z])([0-9]+)-([^/]*)$~' ,
    'A123-boooooo',
    $matches
);

$fullMatch = $matches[0]; // 'A123-boooooo'
$letter = $matches[1];    // 'A'
$number = $matches[2];    // '123'
$word = $matches[3];      // 'boooooo'

// Therefore
$A = array_slice($matches, 1); 
```

如果您想立即进行更换，请使用`preg_replace`：

```
$newString = preg_replace(
    '~^([A-z])([0-9]+)-([^/]*)$~',
    'index.php?tt=$1&ii=$2&ll=$3',
    'A123-boooooo
); 
```

这些[文档](http://www.php.net/manual/en/ref.pcre.php)通常非常适合提供更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T12:57:42.123

```
preg_match('/([a-zA-Z])(\d+)-([^\/]+)/', 'A123-boooooo', $A);
array_shift($A); 
```

**输出：** `print_r($A);`

```
Array
(
    [0] => A
    [1] => 123
    [2] => boooooo
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:56:58.507

根据[preg_match](http://php.net/manual/en/function.preg-match.php)文档

```
preg_match("~([A-z])([0-9]+)-([^/]*)~" , "A123-boooooo", $matches);
print_r($matches); 
```

**输出：**

```
Array
(
    [0] => A123-boooooo
    [1] => A
    [2] => 123
    [3] => boooooo
) 
```

# objective-c - 向 cocos2d 添加类

> ID：13158407
> 
> 赞同：0
> 
> 时间：2012-10-31T12:52:18.970
> 
> 标签：objective-c, class, cocos2d-iphone

我有一个 CCButton 类，如何将它添加到我的 cocos2d 库中，这样我就不需要手动将它添加到我的新项目中，它会自动添加到 cocos2d 模板中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:01:02.637

最好的想法是创建您自己的框架项目，您可以在所有其他相关项目中引用该项目。这样，您只需更新一次代码并使更改在所有子项目中可用。

[http://www.cocoanetics.com/2010/05/making-your-own-iphone-frameworks-in-xcode/](http://www.cocoanetics.com/2010/05/making-your-own-iphone-frameworks-in-xcode/)

# python - Scrapy：为抓取页面中的选项选择创建多个项目

> ID：13158409
> 
> 赞同：0
> 
> 时间：2012-10-31T12:52:33.747
> 
> 标签：python, scrapy

所以，我有一个爬取页面的蜘蛛，收集它遇到的每个项目的数据。如果项目没有选项，它只是将项目发送到管道中。如果有选项，它会组装一个选项列表列表，并为每个唯一的选项组合发送一个请求（作为 HTML 片段返回，因此我将其视为 XML）。对于每个选项组合，它会提取项目的价格并将其发送到管道中。只是，它没有。

这是一些代码：

```
#spider code above here that does all the normal stuff, 
#plus gets and organize all options.  Then this:

for optLists in uberList:
  queryString = '?func=Options&currentOption=1&Modal=False&AddUniqueID=False&sku=' + sku + '&option1=' + optLists[0] + '&option2=' + optLists[1] + '&option3=' + optLists[2]
  reqURL = urljoin(baseAjaxURL, queryString)
  req = Request(url=reqURL,
                callback=self.parse_ajax,
                meta = {'item' : item},
               )
  self.log('simplified item: ' + reqURL, level=log.DEBUG)
  yield req 
```

以及回调函数：

```
def parse_ajax(self, response):
  print 'parsing ajax'
  xxs = XmlXPathSelector(response)
  item = response.meta['item']
  item['price'] = xxs.select("normalize-space(substring-before(substring-after(.//skuMainPrice/text(), 'ppPrice:'),'/span'))").extract()[0]
  print 'parse_ajax price: ', item['price']
  return item 
```

第一种方法中的 for 循环正确触发，每组选项一次。如果回调是针对不存在的方法（这很好），则请求会引发错误，但回调方法中的打印语句永远不会触发，项目也不会沿着管道传播。

任何关于我做错了什么或如何做对的建议都将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T06:28:35.723

花了一些时间和一点绝望，但我想出了这个。我正在为这个蜘蛛使用 CrawlSpider，我必须将 ajax URL 添加到“允许”规则中。没有它，该 url 既不能跟踪也不能解析。

# c# - 以编程方式将 Windows 服务添加到 Windows 防火墙（安装期间）

> ID：13158411
> 
> 赞同：3
> 
> 时间：2012-10-31T12:52:36.767
> 
> 标签：c#, windows-services, firewall

> **可能重复：**
> [以编程方式将应用程序添加到 Windows 防火墙](https://stackoverflow.com/questions/113755/programmatically-add-an-application-to-windows-firewall)

在我的解决方案中，我有一个 Windows 服务项目和安装程序来安装此服务我如何在安装期间将此服务添加到 Windows 防火墙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T13:27:56.150

假设我们正在使用`Visual Studio Installer->Setup Project`- 您需要在正在安装的程序集中有这样的安装程序类，然后确保在安装阶段为“主要输出”添加自定义操作。

```
using System.Collections;
using System.ComponentModel;
using System.Configuration.Install;
using System.IO;
using System.Diagnostics;

namespace YourNamespace
{
    [RunInstaller(true)]
    public class AddFirewallExceptionInstaller : Installer
    {
        protected override void OnAfterInstall(IDictionary savedState)
        {
            base.OnAfterInstall(savedState);

            var path = Path.GetDirectoryName(Context.Parameters["assemblypath"]);
            OpenFirewallForProgram(Path.Combine(path, "YourExe.exe"),
                                   "Your program name for display");
        }

        private static void OpenFirewallForProgram(string exeFileName, string displayName)
        {
            var proc = Process.Start(
                new ProcessStartInfo
                    {
                        FileName = "netsh",
                        Arguments =
                            string.Format(
                                "firewall add allowedprogram program=\"{0}\" name=\"{1}\" profile=\"ALL\"",
                                exeFileName, displayName),
                        WindowStyle = ProcessWindowStyle.Hidden
                    });
            proc.WaitForExit();
        }
    }
} 
```

# java - java中日期和时间的时间戳

> ID：13158417
> 
> 赞同：0
> 
> 时间：2012-10-31T12:52:57.600
> 
> 标签：java, android, timestamp

如何根据格式找到日期和时间的时间戳：

```
Wed Oct 31 17:40:42 IST 2012 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:56:32.840

使用`SimpleDateFormat`解析您的日期

```
SimpleDateFormat parserSDF=new SimpleDateFormat("EEE MMM d HH:mm:ss zzz yyyy");
Calendar cal = Calendar.getInstance();
System.out.println(parserSDF.format(cal.getTime())); 
```

它将打印为`Wed Oct 31 18:28:55 IST 2012`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:58:17.473

使用`SimpleDateFormat`：

```
String str_date = "Wed Oct 31 18:28:55 IST 2012";

// Here is your date as string

DateFormat formatter = new SimpleDateFormat("EEE MMM d HH:mm:ss zzz yyyy");
Date date = (Date) formatter.parse(str_date); 
Timestamp timeStampDate = new Timestamp(date.getTime());

// Here is your date as timestamp 
```

# visual-studio - 在 Visual Studio 中获取最新版本的键盘快捷键

> ID：13158424
> 
> 赞同：18
> 
> 时间：2012-10-31T12:53:29.843
> 
> 标签：visual-studio, keyboard-shortcuts

我想要一个键盘快捷键来获取 Visual Studio 2012 中当前解决方案的最新版本（递归）。我们正在使用 TFS。

我试图映射

```
File.GetLatestSolutionFiles
File.GetLatestVersion
File.TfsGetLatestVersion 
```

但什么也没发生。有任何想法吗？

作为一种解决方法，我也尝试将键盘快捷键映射到：

```
Tools.shell """c:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\TF.exe""" get $/OUR/REPOSITORY/Main /recursive 
```

这是我想要键盘快捷键的命令： ![在此处输入图像描述](../Images/6f2d2c144322a0eb668dc6bdd4db8e91.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T12:56:18.803

Alt-V P 主页 Alt-F RL

或者

Alt-V P Home Menu L（我每天都是这样做的）

更短的解决方案是绑定您列出的命令之一；你是怎么尝试的，究竟是什么？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-29T16:05:57.183

在 2012 年，您可以简单地执行“ALT-F R L”

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-28T21:03:06.637

命令是**`TfsGetLatestVersionDynamicSilent`**。该命令的工作方式基于`Solution Explorer`.

1.  将您的键绑定设置为`Options > Environment > Keyboard`. [![TfsGetLatestVersionDynamicSilent](../Images/22cb5248ccd6a2e5bb065038cc273961.png)](https://i.stack.imgur.com/8xlPO.png)
2.  在 中选择要更新的内容`Solution Explorer`。在这里，我选择`Solution`. [![解决方案](../Images/9ef4b2ee820d2b7bef504ff75caf5da5.png)](https://i.stack.imgur.com/zgciN.png)
3.  然后，点击你的键绑定，瞧！现在，您从 TFS 获得了最新的`Solution`. [![所有文件都是最新的。](../Images/61856858ab76c967ad184cddcb29b2a3.png)](https://i.stack.imgur.com/cQ9ck.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-09-05T07:55:31.213

```
C:\Foo\Bar\Main>tf get . /recursive 
```

从 Visual Studio 命令提示符

**完整示例**

把它放在一个bat文件中：

```
@echo off
call "C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\Tools\VsDevCmd.bat"
cd /d "C:\Foo\Bar\Main"
tf get . /recursive
pause 
```

在桌面上创建 .bat 文件的快捷方式，并为该快捷方式分配一个全局键（我已映射到*CTRL+ALT+G*）。如果右键单击快捷方式并选择属性，则可以分配键。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-12T17:09:14.303

通过工具 -> 选项 -> 环境 -> 键盘映射快捷方式有效。

脚步：

1.  转到工具菜单-> 选项。
2.  展开环境节点。转到键盘部分
3.  在“显示包含：的命令”文本框中键入“tfsget”。
4.  从显示的选项列表中选择 File.TfsGetLatestVersion。 [![在此处输入图像描述](../Images/766f2cac4893cf046ae92e08d89eaa25.png)](https://i.stack.imgur.com/ZT3cQ.png)
5.  选择“按下快捷键：”文本框并输入您的组合键。
6.  单击分配按钮并确保组合键显示在“所选命令的快捷方式：”下拉列表中。
7.  单击确定按钮。

为确保此操作有效，请打开输出窗口（查看菜单 -> 输出），清除其中的所有消息。 在解决方案资源管理器中打开解决方案，选择您需要获取最新信息的解决方案、项目或文件并输入您的组合。[![在此处输入图像描述](../Images/ea2051ede1806fe09a2767d19eaf1a62.png)](https://i.stack.imgur.com/0Rz1F.png)

如果它有效，您将在输出窗口中看到消息： [![在此处输入图像描述](../Images/ec4647b23acd182e3239f93a58e924d1.png)](https://i.stack.imgur.com/gESTW.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-10T01:00:10.827

修改了@RickardN 的答案

创建一个名为 GetLatest.bat 的文件并将其放入您的程序文件夹中。

该文件应包含以下内容：

```
@echo off
call "C:\Program Files (x86)\Microsoft Visual Studio 12.0\Common7\Tools\VsDevCmd.bat"
tf get . /recursive
rem require keypress on error, else pause a few seconds
if %errorlevel% neq 0 pause
if %errorlevel% == 0 choice /C X /T 3 /D X > nul 
```

vsdevcmd.bat 的路径假定您使用的是 Visual Studio 2013；根据您的 Visual Studio 版本更改路径。现在转到工具-> 外部工具并添加一个新命令。称之为获取最新。将 Command 设置为 .bat 文件的路径，并将 Initial Directory 设置为 $(SolutionDir)。

您可以将外部命令映射到工具栏按钮或快捷方式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-17T12:32:02.223

使用 Visual Studio 宏，您可以设置此宏

```
//go to solution explorer
dte.ExecuteCommand("View.SolutionExplorer");

//1 based indexing so item 1 is the first item, which should be you Solution
dte.Windows.Item(1).Activate();

//perform get on the activated item (which is the solution)
dte.ExecuteCommand("File.TfsGetLatestVersion"); 
```

然后你只需将该宏绑定到类似 cntrl+alt+shift+G

如果您不使用 Visual Studio 宏，我强烈推荐它们： [Macros For Visual Studio 13/15/17](https://marketplace.visualstudio.com/items?itemName=VisualStudioPlatformTeam.MacrosforVisualStudio "Visual Studio 的宏 2017 年 13 月 15 日")

# flash - Flash Tlf 在 Flash Professional CS5.5 中看起来很糟糕

> ID：13158429
> 
> 赞同：0
> 
> 时间：2012-10-31T12:53:48.800
> 
> 标签：flash, text, tlf, flash-cs5.5

只是画一个简单的文本行。

TLF 文本看起来像素化，而经典文本看起来还不错。 ![在此处输入图像描述](../Images/58a5a36aacf0e0ec3e81536a7f915b68.png)

查看 's' 和 'r' 他们在 TLF 文本中看起来很糟糕。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T13:47:59.557

据我所知，这可能是因为经典文本使用了抗锯齿，而您可能不会将它与 TLF 文本一起使用。

[http://en.wikipedia.org/wiki/Spatial_anti-aliasing](http://en.wikipedia.org/wiki/Spatial_anti-aliasing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:54:16.777

如果您使用纯 AS 创建 TLFTextField，请尝试添加自定义抗锯齿：

```
tlf.antiAliasType = AntiAliasType.ADVANCED; 
```

# directory - 在 Winmerge 中，如何单独比较文件夹结构（无文件比较）？

> ID：13158436
> 
> 赞同：5
> 
> 时间：2012-10-31T12:54:10.470
> 
> 标签：directory, directory-structure, winmerge

经过多年的备份和将大量目录从一台计算机复制到另一台计算机后，我的情况一团糟。Duplicate finder 软件和 winmerge 想要通过浏览单个文件来搞砸。考虑到问题的规模，搜索或扫描需要很长时间，并且给我提供了非常长的列表。

我想比较文件夹名称和目录结构。一旦我这样做了，就可以很容易地放大几个文件夹来比较其中的文件，然后我可以决定可以删除什么，可以删除什么以及应该合并什么。

在 winmerge 中，我不知道如何仅比较文件夹名称。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T17:28:50.967

我今天遇到了同样的问题。对于速度，您可以更改编辑 -> 选项 -> 比较 -> 文件夹 -> 菜单比较方法。我选择了大小。

[![在此处输入图像描述](../Images/fe7b713ba2734de4c2a1ff144713f4b0.png)](https://i.stack.imgur.com/x6fsh.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-06T02:55:18.280

猜你的问题已经解决了。

我建议使用视图->树模式提供的树选项，并在使用大小标准时根据需要展开文件夹。我相信您需要查看其中的一些文件夹。

还要确保未选中查看->显示相同项目以减少混乱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-05T23:52:47.440

使用此过滤器。

```
name: Skip files compare directories
desc: Skip files compare directories
def: exclude
d: \\*$ 
```

以下是有关过滤器的文档：[https ://manual.winmerge.org/en/Filters.html](https://manual.winmerge.org/en/Filters.html)

我不得不做一些实验来制作这个过滤器。我的第一次尝试（不成功）是使用`f: \*$`. 听起来它应该工作，但它没有。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-04-05T17:34:06.623

您可能已经找到了解决方案，但有人告诉我这样做。首先打开文件资源管理器并导航到要比较的文件夹，假设该文件夹是文件夹 A。接下来打开另一个文件资源管理器到您的第二个文件夹进行比较，即文件夹 B。启动 WinMerge 并将其最大化为全屏模式，然后将文件夹 A 拖到 WinMerge 屏幕，结果这将弹出您在 WinMerge 中单击文件->打开菜单时通常看到的窗口。所以接下来只需将文件夹B 拖到弹出的窗口并等待位然后确定按钮将变为可点击，因此单击它然后比较将开始。

比较完成后，在比较结果列下查看。差异通常在列的底部。

# arrays - 找到数组中 (i,j) 对的总数，使得 i 一个[j]

> ID：13158439
> 
> 赞同：9
> 
> 时间：2012-10-31T12:54:21.717
> 
> 标签：arrays, algorithm, sorting, optimization

如问题中所述，需要在数组中找到 (i,j) 对的总数，使得

```
(1) **i<j** 
(2) **a[i]>a[j]** 
```

其中 i 和 j 是数组的索引。没有空间限制。

我的问题是

```
 1) Is there any approach which takes less than O(N^2) time?
 2) if so what is least complexity ?
 3) How do we prove that ? 
```

我希望我对这个问题很清楚。

我的方法如下

解决问题的一种方法是使用需要 O(N^2) 时间的蛮力。

但是我认为这个问题至少应该有一个更好的优化解决方案 O(NlogN) 解决方案。我直觉的原因如下

直觉 `1) For sorting an array in ascending order conditions we have are : for i<j , a[i]<a[j] which is similar to my question . I also read that sorting has lower bound of Omega(n log n) . So my question should also have Omega(n log n) . I may be completely wrong if so please correct me .`

我的第二个直觉是：

假设我们有一个元素数组如下：4,9,7,3,2,1,8,12

我们计算`i<j , a[i]>a[j]` 元素 4 的上述条件，因为 i=0 指向 4 ，所以 j 的可能值为 3,4,5 .因为 a[0]>a[3],a[0]>a[4],a [0]>a[5] ，所以我现在 (i,j) 对的总数是 3 。下次当我将 i(index) 增加到 1 时， j 的可能值为 2,3,4,5,6 。但是我们应该使用这样一个事实，即当 i=0 时（当 a[i]=4 时）我们计算了比 a[i=0] 少 3 个元素，而 a[i=0] 又小于 a[i=1] ，所以我不会将 9 与 3,2,1 进行比较（以消除不必要的计算）。如果我们可以消除不必要的计算，那么我们可以将复杂度降低到小于 O(N^2) 的值，否则不存在小于 O(N^2) 的解。但是如果存在解决方案，那么我们该怎么做。我尝试制作图表，但我的努力是徒劳的。

方法 1)`In-order to obtain O(nlogn) complexity I think we need to tweak around quick sort or merge sort to get solution but problem here is, if we sort the array we loose the actual positions of elements.`

方法 `2)In-order to get solution in O(NlogN) time I think using tree we may get the optimised sollution . I didn't get any clue.`

方法 3)`If there exists any O(N) time algorithm it should be with hashing . But in this case simple hashing doest work .`

所以请让我知道上述哪些直觉或方法是正确的（如果正确，哪种方法将导致优化的解决方案以及如何）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-31T13:22:52.987

您可以使用算法计算倒排对，类似于归并排序，如此[处](http://www.cp.eng.chula.ac.th/~piak/teaching/algo/algo2008/count-inv.htm)所述。

这个想法是在计算每一步改变了多少反转的同时对数组进行合并排序。

* * *

另一种方法是使用顺序统计树。您将数组的元素顺序插入到这棵树中，每次插入后，看看插入元素之前有多少元素比它大。

排序统计树的替代方法是[Indexable skiplist](http://en.wikipedia.org/wiki/Skip_list#Indexable_skiplist)。

* * *

两种算法都有 O(N log N) 的时间复杂度。

为了获得近似的反转次数，O(N) 时间复杂度是可能的，但有一些限制。我们可以像修改合并排序一样修改[桶排序。](http://en.wikipedia.org/wiki/Bucket_sort)

在桶排序的“分散”阶段，我们应该估计桶中较大元素的元素数量，同时在某个桶的末尾插入元素（每个桶中的元素保持原始顺序）。

在桶排序的“排序”阶段，我们应该（以相同的方式）修改排序算法（最有可能是插入排序）。在将元素插入适当的位置时，我们应该计算它跳过了多少其他元素。

至于限制，这个算法只适用于数字（或对象，容易转换为数字），我们应该提前知道这些数字是如何分布的。所以，如果我们有一个均匀分布的整数数组，这个算法应该可以正常工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-31T13:26:51.867

这样的对被称为数组中的反转数。它是衡量数组与排序的接近程度的一种方法。您可以修改归并排序以有效计算 O(nlogn) 时间内的反转次数。有关详细信息，请参阅[此](http://www.cs.umd.edu/class/fall2009/cmsc451/lectures/Lec08-inversions.pdf)。

# velocity - 速度，检查字符串是否为空且不为空的最有效方法是什么

> ID：13158441
> 
> 赞同：33
> 
> 时间：2012-10-31T12:54:32.507
> 
> 标签：velocity

我经常遇到字符串值不存在和/或为空的情况。这是测试这种情况的最佳方法吗？

```
#if( $incentive.disclaimer && $!incentive.disclaimer != '' ) 
   $incentive.disclaimer 
#end 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-31T14:35:51.433

如果您只想让 Velocity 显示值（如果存在），或者如果不存在则不显示任何内容，那么[安静的引用](http://velocity.apache.org/engine/releases/velocity-1.5/user-guide.html#quietreferencenotation)本身就可以解决问题：

```
$!incentive.disclaimer 
```

如果您想明确地测试空，来自[Apache Commons Lang的](http://commons.apache.org/lang/)[StringUtils](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html)可以提供帮助。首先将它添加到您的上下文中（参考[这里](http://velocity.apache.org/engine/devel/developer-guide.html#supportforstaticclasses)）：

```
context.put("StringUtils", StringUtils.class); 
```

虽然如果您使用的是旧版本的 Velocity，它可能不喜欢类引用，因此您可以添加一个实例：

```
context.put("StringUtils", new StringUtils()); 
```

然后你可以从你的 Velocity 模板中调用它的[isEmpty方法：](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#isEmpty%28java.lang.String%29)

```
#if($StringUtils.isEmpty($incentive.disclaimer))
    ## logic here...
#end 
```

如果您希望将空格视为空，还有[isBlank](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#isBlank%28java.lang.String%29)。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-11-29T15:50:37.920

对于`$!incentive.disclaimer`不适合[http://wiki.apache.org/velocity/CheckingForNull](http://wiki.apache.org/velocity/CheckingForNull)的情况，建议使用一个简短的解决方案：

```
#if( "$!car.fuel" != "" ) 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-02-14T13:48:24.827

## 你想要安静的参考符号：$!incentive.disclaimer

```
Bla bla $!incentive.disclaimer. 
```

如果**$incentive.disclaimer**为**null**或**""**，Velocity 将呈现：

```
Bla bla . 
```

参考官方指南部分： [https ://velocity.apache.org/engine/devel/user-guide.html#quiet-reference-notation](https://velocity.apache.org/engine/devel/user-guide.html#quiet-reference-notation)

## 有时你确实需要#if

最常见的情况是您确实需要#if：您的变量只是一段较大文本的一部分，并且如果变量为空，您不想显示它。然后你需要这个：

```
#if($incentive.disclaimer && !$incentive.disclaimer.empty) 
    Please read our incentive disclaimer:
    $incentive.disclaimer
#end 
```

# jquery - 仅当父 div 在视图中时才显示固定按钮

> ID：13158445
> 
> 赞同：2
> 
> 时间：2012-10-31T12:54:51.530
> 
> 标签：jquery, css, css-position

我有一个带有一些图像的 div。首先，只显示一行，当我单击“更多”时，所有图像都会显示。

要关闭 div 我必须滚动到 div 的底部以在有很多图像时关闭容器，到底部的距离太远

所以我想要一个额外的关闭按钮，它有一个固定的位置，但只有当 div 在视口中时才应该显示按钮 - 当我向下滚动到下一个图像容器时，上面容器的 less 按钮应该消失

我的标记看起来像这样

```
<article id="1">
    <h1>Titel</h1>
    <a class="weniger" href="#">less</a>

    <ul class="thumbs">
        <li>img</li>
        <li>img</li>
        <li>img</li>
        <li>img</li>
        <li>img</li>
        <li>img</li>
        <li>img</li>
        <li>img</li>
        <li>img</li>
    </ul>
    <a class="more" href="#">mehr</a>

</article> 
```

jquery 代码看起来像这样

```
jQuery(document).ready(function(){
    jQuery(".more, .weniger").on("click touch",function(){

        var wid = jQuery(this).parent().attr("id");

            jQuery("#"+wid+" .weniger").show();
            jQuery("#"+wid+" .thumbs").css("height","auto");
            jQuery("#"+wid+" .thumbs").css("overflow","auto");

            jQuery(this).text("less");

        return false;
    });
}); 
```

的CSS

```
.thumbs{
    height: 182px;
    overflow: hidden;
}

.thumbs li{
    float: left;   
    height: 182px;
    margin: 0 10px 10px 0;
}

.thumbs img{
    height: 100%;        
}

article{
    margin-bottom: 50px;
}

.weniger{
    display: none;
    position: fixed;
    bottom: 100px;
    right: 20px;
    float: right;
} 
```

我为此做了一个jsfiddle：http: [//jsfiddle.net/oliverspies/VZFtj/6/](http://jsfiddle.net/oliverspies/VZFtj/6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:59:26.000

[`$().offset().top`](http://api.jquery.com/offset/)返回相对于文档的元素位置。

[`$().outerHeight()`](http://api.jquery.com/outerHeight/)返回元素大小，包括填充和边框。

[`$(window).height()`](http://api.jquery.com/height/)返回视口大小。

[`$().scrollTop`](http://api.jquery.com/scrollTop/)返回元素滚动条位置

[`$(window).scroll(...)`](http://api.jquery.com/scroll/)每当滚动窗口时都会触发该事件。

尝试：

```
$(function(){
  $('article').each(function(){
    var $el = $('.thumbs',this);
    var $w = $(window);
    var $less = $('.weniger', this);
    var $more = $('.more', this);
    $(window).on("scroll resize",function(){
      if( $w.scrollTop() > $el.offset().top + $el.outerHeight()
          || $w.scrollTop() + $w.height() < $el.offset().top
      ){
        $less.hide();
      }else if($more.text()=="more"){
        $less.show();
      }
    })
  })
}) 
```

# wpf - Wpf 应用程序中的 SQLite 和实体框架

> ID：13158448
> 
> 赞同：0
> 
> 时间：2012-10-31T12:55:06.070
> 
> 标签：wpf, sqlite, c#-4.0, entity-framework-4

我在我的 wpf 应用程序中使用 SQLite 和实体框架。它在开发机器上运行良好，但是当我将它部署到另一台机器时它不起作用。我收到以下错误消息

```
System.Data.EntityException: The underlying provider failed on Open. --->     
System.Data.SQLite.SQLiteException: Unable to open the database file
at System.Data.SQLite.SQLite3.Open(String strFilename, SQLiteOpenFlagsEnum flags, Int32  
maxPoolSize, Boolean usePool) 
```

您能给我关于“如何使用 SQLite 和实体框架发布 wpf 应用程序”的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:07:40.400

本文介绍了如何将 SQLite 与您的应用程序一起分发。

[http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)

# python - 使用包含数字的字符串进行索引时，2D numpy 数组不会出错

> ID：13158452
> 
> 赞同：11
> 
> 时间：2012-10-31T12:55:17.380
> 
> 标签：python, numpy, indexing

当我在 numpy 中创建一维数组并使用字符串（包含数字）对其进行索引时，我得到了预期的错误：

```
>>> import numpy as np
>>> a = np.arange(15)
>>> a['10']
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: field named 10 not found. 
```

但是，当我创建一个二维数组并使用两个字符串进行索引时，它没有给出错误并返回元素，就好像字符串首先转换为整数一样

```
>>> b = np.arange(15).reshape(3,5)
>>> b
array([[ 0,  1,  2,  3,  4],
       [ 5,  6,  7,  8,  9],
       [10, 11, 12, 13, 14]])
>>> b[1, 2]
7
>>> b['1', '2']
7 
```

这是怎么回事？为什么我在二维情况下不会出错？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:15:49.513

*免责声明*——这个答案肯定是不完整的

我认为您所看到的是[花哨的序列索引](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#integer)的结果。由于字符串实际上是序列，因此您一次获取一个字符的字符串值并将它们转换为 " `intp`" 对象（可能只是使用 python 的`int`函数）——然后为您提供数组索引。

这也解释了 1D 情况：

```
class Foo(object):
    def __getitem__(self,idx):
        print idx

a = Foo()
a[12]
a[12,12] 
```

请注意，在第二种情况下`tuple`，传递了 a，而在第一种情况下，传递了一个整数。

* * *

这个测试证明了我仍然不明白的部分：

```
import numpy as np
a = np.arange(156).reshape(13,12)
print a[12,3] == a['12',3]   #True -- I would have thought False for this one...
print a['12',3] == a[('1','2'),3]  #False -- I would have guessed True for this..
assert( a[tuple('12'),3] == a[(1,2),3] )  #This passes, as expected 
```

随意尝试在评论中向我解释这一点。:) 差异可能是 numpy 在转换为`intp`对象序列时故意留下字符串，以便更顺利地处理记录数组......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:05:13.303

补充一点，请注意第一种情况（单个字符串）可能与对使用字符串作为字段名称的recarrays 的支持有关。

请不要*依赖*第二种情况。Numpy 在使用非数组进行索引方面非常自由，因为如果它是非数组（而不是切片，也不是 None），它会简单地尝试将其转换为整数数组，这对这些字符串进行了很好的定义。然而，这*不是*设计使然，因为太多的软件依赖于这种行为（至少部分地）来实际改变它，老实说，虽然这对于忘记被铸造的浮动有点意义，但它真的没有对于字符串。

* * *

@mgilson 的更多详细信息。考虑到所有这些都是标签外的使用，它真的归结为实现细节。例如，单个字符串当前对于recarrays 是特殊的，即使它不是recarray，但是字符串的元组仅对于recarrays 是特殊的。

现在，字符串列表有点特殊，因为它们不是元组，但在*大多数*情况下表现得像一个。这可能是一个小错误......因为它在其中找到了一个序列，所以它会触发花哨的索引，但“忘记”将其转换为数组。虽然我通常会使用元组来表示多个轴。

# c# - Windows Phone 8 中的 VOIP

> ID：13158455
> 
> 赞同：1
> 
> 时间：2012-10-31T12:55:29.107
> 
> 标签：c#, xaml, windows-phone-8, windows-phone-voip

众所周知，MS 宣布将在 WP8 中提供对 VOIP 的原生支持，并且根据声明，在此命名空间“Microsoft.Phone.Networking.Voip”下添加了一个新 API，它也有一些方法。是否有人在 WP8 中从事 VOIP 工作并使用本机库进行 SIP 呼叫。或者我们需要使用一些第三方的原生库来进行 SIP 调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:03:54.373

VoIP API 不附带任何特定的通信 API，它只是一个集成到电话服务中的 API，用于在应用程序未运行时接听来电，并在应用程序在后台运行时调用。

您必须在 WP8 SDK 提供的 API 之上自行集成所有其他功能，例如 PUSH、音频路由等。

因此，要发起 SIP 呼叫，您需要自己的本地库，并在此基础上集成 WP8 VoIP API。

# sql - 制作动态选择案例（vb）

> ID：13158456
> 
> 赞同：5
> 
> 时间：2012-10-31T12:55:40.333
> 
> 标签：sql, vb.net, select-case

我想让我的一个案例是一个动态字符串，因为在我的表中，这些值部分改变了除了开始代码“2061”所以我如何让我的代码做一些类似于我在查询中查找时的事情“ ... 像 '2061%' 这是我的代码

```
Function GetResponse(val As String) As String
        Select Case val
            Case "2061"
                Return "Opted Out"
            Case "00"
                Return ""
            Case Else
                Return "Other"
        End Select
    End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:16:48.143

为此，您可以在 VB.NET 中使用[Like运算符。](http://msdn.microsoft.com/en-us/library/swf8kaxw%28v=vs.71%29.aspx)在这里，我选择第一个匹配 True 的案例。

```
Function GetResponse(val As String) As String
    Select Case True
        Case val Like "2061*"
            Return "Opted Out"
        Case val = "00"
            Return ""
        Case Else
            Return "Other"
    End Select
End Function 
```

在 C# 中，您将使用 if 语句来获得相同的功能：

```
string GetResponse(string value)
{
    if (value.StartsWith("2061"))
        return "Opted Out";
    else if (value == "00")
        return "";
    else
        return "Other";
} 
```

在 F# 中：

```
let GetResponse (value:string) =
    match value with
    | x when x.StartsWith("2061") -> "Opted Out"
    | "00" -> ""
    | _ -> "Other" 
```

请注意，我建议使用比这更多的描述性函数和变量名称，但我不知道这段代码在什么上下文中。“GetResponse”是含糊的，并不表示返回值可能意味着什么。您可能希望将其重命名为“GetUserOptedOutStatus”或类似名称。

# nstableview - 如何在核心数据（基于文档）中预填充绑定到 ArrayController 的 NSTableView

> ID：13158461
> 
> 赞同：0
> 
> 时间：2012-10-31T12:55:48.243
> 
> 标签：nstableview, nsmanagedobject, nsmanagedobjectcontext, nsarraycontroller

这是我的问题：我有一个基于核心数据文档的程序，带有 ARC（自动引用计数）；我希望 tableView 在开头显示一些数据。但我什么也没收到。这是我所做的：

1-我用实体制作了一个核心数据：MyData

![在此处输入图像描述](../Images/83e89304da1d3c665770866d71c72be3.png)

2-然后我添加了一个 NSArrayController 并将其绑定到 managedObjectContext 和 MyData

![在此处输入图像描述](../Images/a25b38c232db332215805d5382efc9fa.png)

![在此处输入图像描述](../Images/a1522f6b34d962ec5185341dd7fb0d50.png)

3-我将arrayController绑定到col0：

![在此处输入图像描述](../Images/ddc1fa4f762de7ee5902c6647947dc5b.png)

4-然后制作并出口并为 arrayController 添加@synthesize：

![在此处输入图像描述](../Images/6078b6fa1faddc0a3446e055b4e461ce.png)

5-最后添加了这段代码：

> *   (void)windowControllerDidLoadNib:(NSWindowController *)aController {
>     
>     
>     
>     [超级 windowControllerDidLoadNib:aController];
>     
>     
>     
>     for (NSUInteger i=0; i<5; i++) {
>     
>     
>     
>     ```
>     [myArrayController add:self];
>     
>     [myArrayController setSelectionIndex: i];
>     
>     [myArrayController setValue:@"test" forKeyPath:@"selection.col0"];
>     
>     NSLog(@"%lu",[myArrayController selectionIndex]); 
>     ```
>     
>     
>     
>     } }

但这就是问题所在：什么也没发生，而且 SelectionIndex 显示奇怪的数字！！

![在此处输入图像描述](../Images/c3680c1e843571f28fcc8b3762ebda3f.png)

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:34:52.057

一个月后没有人回答我！最后我可以处理它：

> NSError* 错误；
> 
> ```
> NSInteger count=0;
> 
> NSNumber* N=[[NSNumber alloc]initWithInt:0];
> 
> NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
> 
> NSEntityDescription * entityMyData  = [NSEntityDescription entityForName:@"MyData"
>                                                   inManagedObjectContext:[self managedObjectContext]];
> 
> [fetchRequest setEntity:entityMyData];
> 
> count=[self.managedObjectContext countForFetchRequest:fetchRequest error:&error];
> 
>     if (count==0 ) {
>         
> 
>         for (NSInteger i=count+1; i<RowsToAdd+count+1; i++) {
> 
>             N=@(i);
> 
>             managedObject = [NSEntityDescription insertNewObjectForEntityForName:@"MyData"
>                                                           inManagedObjectContext:[self managedObjectContext]];
> 
>             [managedObject setValue:N forKey:@"col0"];
> 
>             [managedObject setValue:N forKey:@"col1"];
> 
>             
>         }
> 
>        
>       
>     } 
> ```

# java - 文件和文件夹的保护程序

> ID：13158462
> 
> 赞同：-4
> 
> 时间：2012-10-31T12:55:54.247
> 
> 标签：java, security, zip, hidden-files, windows-kernel

该项目是一个使用Java锁定文件和文件夹的安全程序
我有两个想法：

第一：在 Windows 内核级别隐藏文件或文件夹
我目前找不到执行此操作的方法。
我怎样才能做到这一点？有什么有用的提示吗？

另一种解决方案：创建一个新的扩展 Windows 无法使用密码读取和关闭它。
将所需文件转换为 zip 文件，然后将其作为字节读取并存储在具有我创建的新扩展名的文件中。这里有两个问题：读取字节需要很长时间，如果文件很大（大于 200 MB），则会在运行时内存已满时产生错误。

你如何解决这些问题？
除了这两种方法之外，还有其他方法可以保护文件和文件夹吗？

*如果有什么不清楚的请问我。

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:20:08.590

“隐藏”文件的唯一可靠方法是将它们从磁盘上移开。例如，您可以将它们放入容器文件（内部带有虚拟存储）中，其中文件和文件元数据（目录条目等）被加密。然后，您需要有一个内核模式驱动程序，它将容器内容公开为虚拟磁盘。这就是 TrueCrypt 所做的。

存在另一种方法 - 文件被文件系统过滤器驱动程序加密和“隐藏”。当驱动程序未运行时，文件是可见的（可能带有混淆的文件名）但已加密。当驱动程序运行时，它决定哪些文件以及如何公开。

在这两种情况下，您都需要一个不能用 Java 编写的内核模式驱动程序（无论是在 Windows 中还是在其他操作系统中）。我们公司提供了几个可以在您的应用程序中使用的库（但没有 Java API，抱歉）。

# android - 将数据从服务器发送到特定的 android 设备

> ID：13158464
> 
> 赞同：2
> 
> 时间：2012-10-31T12:56:01.457
> 
> 标签：android

我是 Android 新手，所以我正在寻找`text/data`一次从`server`（网络服务）发送到一个特定`android device`的（每次发送给另一个用户）的最佳方法。步骤是：

1.  Webservice从应用程序接收一个json，一次登录的用户（很简单）；
2.  服务器处理接收到的数据并将其发送到一个特定的用户\设备。每次服务器接收到数据时，它都会将消息发送给另一个用户。
3.  目前用户是安卓应用所有者。下一步 - 用户可以使用另一个平台应用程序，我在服务器上注册发送/应该接收数据的设备类型。
4.  如果用户离线，则该消息应从等待列表中删除，并且必须发送给另一个在线用户。

对我来说主要的问题是定义如何将数据发送给特定的用户——按`ID\username`、设备 ID 或其他？我尝试练习 GCM，但它似乎并不完全符合我的要求，因为我计划使用同一台服务器不仅将数据发送到 android 设备，而且还将数据发送到 iphone/windows。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:12:24.473

对于 android，您应该使用 GCM。对于其他平台，他们应该有自己的 Push Messaging api。

因此，当电话向 GCM 注册时，您将获得一个句柄，您将与您的服务器通信。当您将此句柄存储在数据库或其他东西中时，还要保留手机的种类（Android、iOS 等）。

当你想通知用户时，检查它是哪种存储，并针对不同的平台实现不同的协议。

可能有一些库也将它抽象出来，~~但我不知道~~。

**编辑：**我找到了一些

您可能想查看[Urban Ship](http://urbanairship.com/products/push-notifications/)（商业）、[PushSharp](https://github.com/Redth/PushSharp)一个服务器端库，让您可以将推送通知发送到许多平台或替代方案：[StackMob](https://www.stackmob.com/devcenter/docs/Push-API)。如果您都不满意，只需谷歌搜索更多选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:12:02.230

无法直接从您的服务器联系设备

*   设备可能无法访问
*   运营商围墙花园中的设备并且没有外部 IP 地址（几乎总是）

您唯一的推送解决方案是云消息传递。或者，您可以实现以下模式：

*   所有设备都有唯一的 ID
*   设备定期轮询服务器以查看是否有适合他们的东西

如果您喜欢“离线”模式，您可以考虑消息过期（例如，您的轮询间隔为 5 分钟，因此所有未在 10 分钟内检索到的消息都过期）

# c# - 如何将字符串变量转换为具有严格长度的 char 变量？

> ID：13158467
> 
> 赞同：0
> 
> 时间：2012-10-31T12:56:19.380
> 
> 标签：c#, char

我想将一个字符串变量转换为 char ，该 char 变量的长度始终为 30 个符号。我用 C# 编写代码。

```
string str="aaa";
char[30] myChar = theString.ToCharArray(); 
```

此代码仅使用 3 个符号创建“myChar”。我希望“myChar”是 30 个符号。怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T12:59:08.473

使用[`PadRight`](http://msdn.microsoft.com/en-us/library/system.string.padright.aspx)：

```
string theString="aaa";
char[30] myChar = theString.PadRight(30).ToCharArray(); 
```

我使用的重载将用空格填充。您可以使用将字符作为第二个参数的第二个重载来填充该字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:00:16.530

```
var result = new string('a',30).ToCharArray(); 
```

# objective-c - 如何从 MPMediaPlayerViewController 显示歌曲标题、持续时间

> ID：13158469
> 
> 赞同：1
> 
> 时间：2012-10-31T12:56:23.547
> 
> 标签：objective-c, ios, bluetooth

我有一个使用 MPMediaPlayerViewController 流式传输 MP3 播客文件的应用程序，如下所示：

```
MPMoviePlayerViewController *v =
  [[[MPMoviePlayerViewController alloc] initWithContentURL:url] autorelease];
[[v moviePlayer] setAllowsAirPlay:YES];
[[v moviePlayer] play];
[self presentMoviePlayerViewControllerAnimated:v];

NSError *myErr;
AVAudioSession *session = [AVAudioSession sharedInstance];
[session setCategory:AVAudioSessionCategoryPlayback error:&myErr]; 
```

AVAudioSession 调用允许音频在后台继续播放。

这一切都很好，但是当我通过蓝牙将音频流式传输到（例如）我的汽车音响时，没有设置轨道信息和持续时间。

是否有任何教程说明如何设置此信息以便信息正确显示在外部播放器上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:04:03.193

此代码显示我当前在锁屏中播放的曲目信息。试试这个：

```
if ([MPNowPlayingInfoCenter class])  {
    /* we're on iOS 5, so set up the now playing center */

    NSDictionary *currentlyPlayingTrackInfo = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:currentPlayingAudio.artist,currentPlayingAudio.title, nil] 
                                                                          forKeys:[NSArray arrayWithObjects:MPMediaItemPropertyArtist,MPMediaItemPropertyTitle, nil]];
    [MPNowPlayingInfoCenter defaultCenter].nowPlayingInfo = currentlyPlayingTrackInfo;
} 
```

`currentPlayingAudio`是我的具有标题和艺术家姓名属性的音频对象。例如，您可以输入您的播客名称。

# javascript - SCRIPT438：对象不支持属性或方法“调试”

> ID：13158470
> 
> 赞同：5
> 
> 时间：2012-10-31T12:56:24.883
> 
> 标签：javascript, internet-explorer

我试图搜索这个但无济于事。我的代码是由网站上的一个真正的好人提供的，然后我修改了属性以使我的元素适合他们需要去的地方，但是，在所有浏览器中一切正常，也就是说，除了 IE - 漂亮几乎所有版本。我在 IE9 中运行调试并收到此错误“

> SCRIPT438：对象不支持属性或方法“调试”

它引用的代码部分是这个

```
function resizeContent() {
    // Retrieve the window width
    var viewPortWidth = $(document).width();
    var viewPortHeight = $(document).height();

    $(".content").each(function(index, element) {

        var jElement = $(this);
        if (jElement.hasClass(currentContentColor)) {
            console.debug('resize content selected (' + (viewPortWidth - 160) + ')');
            // If current content, juste resize the width and height
            jElement.css({
                width: (viewPortWidth - 160) + "px",
                height: viewPortHeight + "px"
            });
        }
        else {
            console.debug('resize content (' + (viewPortWidth - 160) + ')');
            // If not current content, resize with, height and left position
            // (keep content outside)
            jElement.css({
                width: (viewPortWidth - 160) + "px",
                left: viewPortWidth + "px",
                height: viewPortHeight + "px"
            });
        }
    });
} 
```

有问题的特定行是

```
console.debug('resize content (' + (viewPortWidth - 160) + ')'); 
```

或者至少这就是 IE 所说的问题

是否有解决此问题和 IE 的方法-我学习缓慢-但这超出了我所知道的范围。我已经在谷歌和这里搜索了调试错误，但找不到任何东西。

该网站是[http://www.crazyedits.co.uk](http://www.crazyedits.co.uk)

预先感谢您在此问题上提供的任何帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T13:11:11.167

根据[文档](https://developer.mozilla.org/en-US/docs/DOM/console)，`console.debug`已弃用；`console.log`应改为使用。

> log() 的别名；添加它是为了提高与已经使用 debug() 的现有站点的兼容性。但是，您应该改用 console.log()。

在任何情况下，`debug`仅`log`用于将调试信息打印到控制台 - 它们应该从生产代码中删除。

# php - php通过ftp上传多个文件

> ID：13158476
> 
> 赞同：0
> 
> 时间：2012-10-31T12:56:47.023
> 
> 标签：php, file-upload, ftp

我目前正在使用以下代码将图像上传到 ftp 服务器：

```
<input name="userfile" type="file" size="50"> 
```

...

```
$filep=$_FILES['userfile']['tmp_name'];
$name=$_FILES['userfile']['name']; 

$upload = ftp_put($conn_id, $paths.'/'.$name, $filep, FTP_BINARY); 
```

这很好用，只是它只上传一张图片。

任何有关多个（3-4）图像上传的帮助。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:03:02.833

```
<input name="userfile[]" type="file" size="50" />
<input name="userfile[]" type="file" size="50" />
<input name="userfile[]" type="file" size="50" />

for($i = 0; $i < count($_FILES['userfile]); $i++) {
   $filep=$_FILES['userfile']['tmp_name'][$i];
   $name=$_FILES['userfile']['name'][$i]; 

   $upload = ftp_put($conn_id, $paths.'/'.$name, $filep, FTP_BINARY);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:02:10.160

你应该一个一个地异步上传文件:)

HTML：

```
<input name="userfile[]" type="file" size="50" />
<input name="userfile[]" type="file" size="50" />
<input name="userfile[]" type="file" size="50" /> 
```

PHP：

```
for( $i = 0 ; $i < count( $_FILES['userfile'] ) ; $i++ )
{
   $filep = $_FILES['userfile']['tmp_name'][$i];
   $name = $_FILES['userfile']['name'][$i];

   $upload = ftp_put( $conn_id , $paths . '/' . $name , $filep , FTP_BINARY );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T13:04:41.587

这是我用过的一个。所有图像字段具有相同的`name`属性值`files`

`<input type="file" name="files[]" class="files" multiple />`可用于html5，或为非html5添加多个此行。我将 jquery 用于我的上传器，但您可以只显示多个上传字段。

显然，您可以更改我的代码以使用您的 ftp 代码，但这里也有另一种方法。

```
 $files = array();

        $allowed_filetypes = array('.jpg','.jpeg','.gif','.bmp','.png','.tif');
        $max_filesize = 1524288;
        $upload_path = 'images/image_uploads/';

        for ($i = 0; $i < count($_FILES['files']['name']); $i++){
            if($_FILES['files']['name'][$i] != "") {
                $filename = $_FILES['files']['name'][$i];
                $ext = substr($filename, strpos($filename,'.'), strlen($filename)-1); 
                $ext = strtolower($ext);

                if(!in_array($ext,$allowed_filetypes))
                    die("The file you attempted to upload ($filename) is not allowed.");

                if(filesize($_FILES['files']['tmp_name'][$i]) > $max_filesize)
                    die("The file you attempted to upload ($filename) is too large.");

                if(!is_writable($upload_path))
                    die("You cannot upload to the specified directory, please CHMOD it to 777.");

                $ran = rand();
                $filename = $ran.$ext;
                if(move_uploaded_file($_FILES['files']['tmp_name'][$i],$upload_path.$filename)) {
                    $result = mysql_query("Insert Into image_uploads_images (upload_id, image, original_name) Values ('$id', '$filename', '".$_FILES['files']['name'][$i]."');");

                    if($result){
                        array_push($files, "http://www.site.com/images/image_uploads/$filename => ".$_FILES['files']['name'][$i]);
                    }else{
                        echo "<p style=\"color:#cc3333;\">Unable to upload ".$_FILES['files']['name'][$i]."</p>";
                    }
                }else{
                    echo "<p style=\"color:#cc3333;\">Unable to upload ".$_FILES['files']['name'][$i]."</p>";
                }
            }
        } 
```

# apache-flex - 使用ANT构建swc，找不到catalog.xml

> ID：13158484
> 
> 赞同：1
> 
> 时间：2012-10-31T12:57:13.527
> 
> 标签：apache-flex, ant

我正在尝试使用 ANT 构建一个 SWC（在 Flex 4.6 中）。这就是我的 build.xml 现在的样子

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="imanager-framework" basedir=".">

    <property name="src" location="src"/>   
    <property name="dist" location="dist"/> 
    <property name="FLEX_HOME" value="C:/Program Files (x86)/Adobe/Adobe Flash Builder 4.5/sdks/4.6.0"/>        

    <taskdef resource="flexTasks.tasks" classpath="${basedir}/libs/flexTasksFlash4.jar"/>

    <target name="clean">       
        <delete dir="${dist}"/>
    </target>

    <target name="compile">
        <mkdir dir="${dist}"/>
        <compc output="${dist}/imanager-framework.swc">
            <source-path path-element="src" />
            <library-path dir="libs" includes="*" />
            <include-sources dir="${src}" includes="*" />           
        </compc>
    </target>

</project> 
```

flexTasks.tasks 看起来像这样

```
mxmlc=flex.ant.MxmlcTask
compc=flex.ant.CompcTask
html-wrapper=flex.ant.HtmlWrapperTask
asdoc=flex.ant.AsDocTask 
```

当我运行构建时，我得到了这个错误

```
Buildfile: E:\flexspace\imanager\framework\build.xml
compile:
    [compc] Loading configuration file C:\Program Files (x86)\Adobe\Adobe Flash Builder 4.5\sdks\4.6.0\frameworks\flex-config.xml
    [compc] Error: unable to load SWC flexTasksFlash4.jar: could not find catalog.xml within the SWC.

BUILD FAILED
E:\flexspace\imanager\framework\build.xml:16: compc task failed

Total time: 639 milliseconds 
```

看来 compc 正试图将 flexTasks jar 作为 SWC 读取。这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:34:23.250

似乎，您`jar`的任务定义库与`libs`所有`swc`文件一样位于目录中，编译器尝试将其用作`swc`库。由于`jar`和`swc`都是存档，编译器会提取它们并尝试在其中查找`catalog.xml`，但 jar 不是 flash 库并且不包含它。我建议你把 jar 放到另一个位置，只`swc`在 lib 中保留文件。或指定swc模式

```
<library-path dir="libs" includes="*.swc" /> 
```

# java - 如何进入更深层次的变量 - Json Java (Json Simple)

> ID：13158485
> 
> 赞同：0
> 
> 时间：2012-10-31T12:57:13.167
> 
> 标签：java, json

我有一个 Json 代码：

```
{
  "name":"My name",
  "count_pl":{
    "araw":"19 nieruchomo\u015bci",
    "colliers":"20 nieruchomo\u015bci",
    "knightfrank":"30 nieruchomo\u015bci",
    "overall":"69 nieruchomo\u015bci"
  },

  "count_en":{
  "araw":"19 estates",
  "colliers":"20 estates",
  "knightfrank":"30 estates",
  "overall":"69 estates"
  }
} 
```

我有一个可以读取它的java代码：

```
JSONObject jsonObject = (JSONObject) obj;
String name = (String) jsonObject.get("name");          
Log.i("Name", name); 
```

如您所见，我可以轻松获得“名称”，但我该如何访问`count_pl->araw`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T12:59:54.260

`String araw = (String) ((JSONObject) jsonObject.get("count_pl")).get("araw");`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T13:07:00.417

正如您在[javadoc](http://www.json.org/javadoc/org/json/JSONObject.html)中看到的，您可以使用它：

```
String araw = jsonObject.getJSONObject("count_pl").getString("araw"); 
```

当您已经知道此密钥返回什么类型时，您应该始终使用特定的 getter，它比强制转换更漂亮，也更安全。

# c# - 使用实体框架将存储过程结果保存在数据集中

> ID：13158486
> 
> 赞同：2
> 
> 时间：2012-10-31T12:57:15.180
> 
> 标签：c#, sql, entity-framework

我使用这种方法来查询数据库以获取用户的所有估值。返回一个包含多行和多列的表

```
 public void UserValuationGet()
 {
    using (FormValueEntities db = new FormValueEntities())
    {
      //Query the database for the Valuation
      var valuation = db.ValuationOfUserGet(userName);         
    }
 } 
```

如何将评估保存在数据集中，或者是否有任何关于如何使用实体框架复杂类型的好教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:01:36.513

如果您要这样做，则没有唯一的方法可以做到这一点，您需要手动设置 DataSet 并迭代您的查询并将查询结果映射到其中。

# wordpress - 当两者的永久链接结构不同时，如何正确地从一个域重定向到另一个域？

> ID：13158492
> 
> 赞同：0
> 
> 时间：2012-10-31T12:57:40.033
> 
> 标签：wordpress, wordpress-theming

我计划将一个域（例如 www.abc.com）改写为 www.xyz.com，两者都在 wordpress 上运行。但是要重定向的第一个域包含不同的永久链接结构，例如 www.abc.com/2012/10/4/post-name-structure/。而另一个域中不包含年、月、密码。在这种情况下，它是 www.xyz.com/post-name-structure/

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:21:41.137

您是否只是重定向域，以便如果我输入 abc.com 它实际上会将我带到 xyz.com？如果是这种情况，则与您的 WordPress 安装或永久链接结构无关。

或者您实际上是在将一个站点从 abc.com 转移到 xzy.com？移动后，您应该能够重新保存永久链接结构，这将更新帖子和页面的永久链接。

# gstreamer - 是否可以在没有 GLib 主循环的情况下使用 GStreamer？

> ID：13158494
> 
> 赞同：7
> 
> 时间：2012-10-31T12:57:45.400
> 
> 标签：gstreamer, glib

我正在尝试将 GStreamer 用作我们正在内部开发的软件电话的视频后端。我们的软电话不是基于 GLib，有自己的事件循环。是否可以在没有 GMainLoop 的情况下设置 gst 管道并进入各种状态？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T13:08:25.990

是的，视频流独立工作，所以即使是“主循环”也`sleep(10)`可以完成这项工作。但是，需要 GLib 来捕获来自 gst 管道的任何事件或错误消息。

# c++ - 在 64 位数据模型上指定 64 位无符号整数文字

> ID：13158501
> 
> 赞同：32
> 
> 时间：2012-10-31T12:58:09.110
> 
> 标签：c++, integer, 64-bit

由于有各种类型的 64 位数据模型（LLP64/IL32P64、LP64/I32LP64、ILP64、SILP64），指定 64 位无符号整数文字的标准符合方式是什么？

指定 ULL 的后缀就足够了吗？还是我最终会导致文字在某些数据模型上被解释为 128 位？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-31T13:53:25.763

如果你有，你应该使用`[<cstdint> / <stdint.h>](http://www.cplusplus.com/reference/clibrary/cstdint/)`它。这会给你：

*   `uint64_t`是一个无符号整数类型，大小为 64 位
*   `UINT64_C()`是一个用于创建类型常量的`uint64_t`宏，通过让宏附加正确的后缀。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T13:26:59.557

据我所知，没有办法将整数文字添加到特定位宽的后缀。您唯一的选择是 l、ul、ll 和 ull。

如果您对此感到偏执，则必须将文字包装在`#if`检查`long`/的大小中`long long`。

再说一次，正如 KennyTM 上面指出的那样，只要您的文字*在*64 位范围内*并*分配给 64 位值，文字本身是 64 位还是 128 位并不重要，或者是吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T13:42:41.947

在大多数情况下，这并不重要。如果你不给它一个后缀，一个整数文字的类型是由它的值决定的。如果编译器有 32 位`unsigned long`和 64 位`unsigned long long`，那么一个太大而无法放入 an`unsigned long`但又不太适合 an 的无符号值`unsigned long long`将具有 type `unsigned long long`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T13:32:33.367

C 和 C++ 没有标准化的 32/64/128 位变量类型。例如，long 在某些系统上是 32 位，而在其他系统上是 64 位。这很烦人，但大多数操作系统确实提供了一些更好的 typedef 来帮助您，例如`uint32`等，因此您可以选择您需要的确切类型。

这是一个好的`configure`脚本的工作：确定系统提供什么，测试它是否工作，并帮助您为正在运行的正确架构选择正确的类型。

# shopify - 如何从 Theme API 获取活动主题的 ID

> ID：13158513
> 
> 赞同：3
> 
> 时间：2012-10-31T12:58:38.347
> 
> 标签：shopify

使用 Shopify Theme API ( [Link](http://api.shopify.com/theme.html#show) )，我希望能够获取当前活动（主）主题的主题 ID。

我正在使用 api gem 如下：

```
Shopify::Theme.find(:all, :params => { :role => 'published' }) 
```

它返回每个已安装的主题，而不仅仅是主要的、已发布的主题。我可以通过这种方式访问​​主题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:08:19.693

您无法按照您尝试的方式过滤角色。

`ShopifyAPI::Theme.all`但是，由于每个商店最多只能有 8 个主题，因此简单地抓取所有主题然后在它们中搜索用作主要主题的主题并不费力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-27T05:04:46.963

您也可以尝试通过 Assets 获取 ID，如下所示：

```
@theme_asset = ShopifyAPI::Asset.find('layout/theme.liquid')
@theme_asset.theme_id 
```

# java - JAVA浮点运算

> ID：13158517
> 
> 赞同：0
> 
> 时间：2012-10-31T12:58:53.343
> 
> 标签：java

我在我的应用程序中做了很多浮点运算，我知道浮点运算不是 100% 准确的，但在打印结果时我还没有找到正确格式化它的方法.

例如

0.1 + 0.1 = 0.19999999999999999999999

Math.sin(Math.PI) = 1.2246E16 而不是 0

和1.000000000000000001之类的东西

我正在寻找一种通用方法来获取这些结果并获得正确的舍入值（以字符串形式）

所以 0.1 + 0.1 = 0.19999999999999999999999 -> 0.2 这个需要四舍五入

Math.sin(Math.PI) = 1.2246E16 -> 0

和 1.000000000000000001 -> 1 之类的东西；而这个需要四舍五入

我还想避免在结果为 1.1234567891234567 或 1.33333333333333 的情况下丢失数据，在这些情况下结果应该保持不变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:03:25.573

使用例如格式`System.out.printf("%.6f", myFloat)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:13:36.097

如果您想避免使用格式化，您可以在打印之前将结果四舍五入到一个固定的精度，并利用 Java 会进行少量四舍五入来隐藏表示错误的事实。

例如到小数点后 6 位

```
public static double round6(double d) {
    return Math.round(d * 1e6) / 1e6;
} 
```

`round()`和的结果`1e6`可以精确表示。此外，“ [IEEE 754](http://en.wikipedia.org/wiki/Floating_point#IEEE_754%3a_floating_point_in_modern_computers)要求正确舍入：也就是说，舍入结果就像使用无限精确算术来计算值然后舍入一样” 剩下的唯一错误是表示错误，因为它采用最接近的可表示值。Java 的 toString() 假设当您有一个具有较短小数的最接近的可表示值的双精度数时，这就是您想要看到的。

例如 0.1 的实际值是

```
System.out.println(new BigDecimal(0.1)); 
```

印刷

```
0.1000000000000000055511151231257827021181583404541015625 
```

但是当 Double.toString() 被传递这个值时，它确定 0.1 将被转换为这个双精度，所以这就是它应该显示的内容。

顺便说一句，在 Java 6 中有一个错误，它不使用最小位数。

```
for (int i = 1; i <= 9; i++)
    System.out.print(i / 1000.0 + " "); 
```

在 Java 6 中打印

```
0.0010 0.0020 0.0030 0.0040 0.0050 0.0060 0.0070 0.0080 0.0090 
```

并在 Java 7 中打印

```
0.001 0.002 0.003 0.004 0.005 0.006 0.007 0.008 0.009 
```

* * *

如果性能不重要，我经常使用 printf，如果是，我使用自定义例程将双精度写入直接 ByteBuffer 到固定精度（有效地舍入它）这更快，因为它不创建任何对象。

> 我还想避免在结果为 1.1234567891234567 或 1.33333333333333 的情况下丢失数据，在这些情况下结果应该保持不变。

在这种情况下，不要对结果进行四舍五入，直到需要显示它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:04:02.823

如果您想避免丢失小数，请使用 BigDecimal 而不是 float。更慢但更准确。

# c++ - 用于记录源代码的工具（一种调用图+）

> ID：13158519
> 
> 赞同：-2
> 
> 时间：2012-10-31T12:58:59.783
> 
> 标签：c++, call-graph

我正在寻找一种可以帮助我阅读**大量内容的工具**复杂产品的 C++ 源代码量，了解组件和数据类型之间的关系，并绘制图表并注明这些关系。我认为它对我有用的方式是，我会创建一个注释（图中的节点）'foo'，然后对于'foo'调用的每个我感兴趣的函数（主要）我会创建'foo'的子级' 图表节点按它们被调用的顺序，我可以用“缺少 arg 检查？”来注释每个“节点”。或者'我们需要一个胖锁吗？rw 也许？或类似的，并且可能有这些节点虚线引用它使用的数据类型。所以在我看来，它是一种带有自动放置和自动连接节点的 Visio，

非常感谢您提供此类工具的指针，如果您可以建议对流程本身更好的方法，请告诉我，我正被我想要消化的大量代码所淹没，这对我来说是第一次，所以我我是新手。谢谢！

更新。这就是我认为我想要的外观

![手工书法素描](../Images/46846ba9d81df96c6a3632d8381256ba.png).

该工具的“自动”部分是它将重新排列节点，因此所有节点都是可见的，自动调整节点大小，通过单击创建链接（例如右键单击子节点并左键单击以获取数据类型参考）等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T19:02:40.227

原来我的问题的答案是 - 最新的 Microsoft Visual Studio。MS VC 2012 包含这个 - [http://msdn.microsoft.com/en-us/library/dd409453.aspx](http://msdn.microsoft.com/en-us/library/dd409453.aspx)，这正是我一直在寻找的。

# c# - c# 中的 OOP 数据类型是什么？？？他们是班级吗？

> ID：13158523
> 
> 赞同：-1
> 
> 时间：2012-10-31T12:59:06.970
> 
> 标签：c#, oop, class, object

我创建的每个类都需要 NEW 关键字来实例化它。我想知道 Oledbconnection 是一个类（因为它需要一个新的关键字）？？？如果是，那么是 int、bool、char 也是类？？？我只需要理清我的概念。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:06:45.147

.NET 中的大多数类型都派生自作为类的对象。所以你可以说所有这些都是类，但是其中一些派生自 ValueType ，它们的行为与引用类型不同。引用类型是大多数人在谈论类时所指的。在这方面，值类型，例如 int、bool 和任何（其他）结构都不是类。

接口既不是类也不是 struct/ValueType 它是一个接口。

诠释 x = 0; //0 表示的对象是 int 类型，它是 ValueType x.ToString(); //ToString 由基类型 Object 实现，它是一个类 (IComparable)x).CompareTo(1); //System.Int32 实现了那个接口

抛开装箱不谈，上面说明了根据您对它的看法，一个对象可能被归类为 ValueType、Class 或 interface

真正要担心的不是某个东西是类、接口还是其他东西。因为根据您的看法，大多数对象都在一组以上。要记住的关键是某事物是否具有值语义（结构/值类型）或引用语义。每当您将具有价值语义的东西分配给其他东西时，都会制作一份副本。另一方面，如果您分配了具有引用语义的东西，那么您只是在使用别名

```
public struct Foo{
   public int x;
   public Foo(int x){
       this.x = x;
   }
}

//value semantics
Foo x = new Foo(1)
Foo y = x;

//reference semantics
object xx = new object();
object yy = xx

Object.ReferenceEquals(x,y); // <-- returns false;
Object.ReferenceEquals(xx,yY); // <-- returns true; 
```

如果您不小心，那么在将值类型视为具有引用语义或以其他方式处理时，您可能会遇到一些难以发现的错误

```
 public class Baz {
     private Foo _myFoo = new Foo(1);
     public Foo MyFoo {
         get{
            return _myFoo;
         }
     }
 }

Foo bar = new Baz();
bar.MyFoo.x = 789; // <-- returning a copy of _myFoo not a reference to that object
if(barMyFoo.x == 1){
   Console.WriteLine("This will be written to console because bar.x is 1!");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:08:55.190

在 OOP 术语中，这些都是“类”。它们是否需要 new 关键字、值类型机制等都是 C# 语言的实现细节，而不是 OOP 概念。在概念层面上，是的，它们都是面向对象意义上的类。

在 C# 中，OOP 术语“类”分为两种类型，普通类和结构。普通类被视为引用类型，而结构被视为值类型（有关差异的讨论，请参见[此处](http://www.albahari.com/valuevsreftypes.aspx)）。

您提到的原始类型（int、bool、char）是结构的别名。这基本上意味着在幕后，编译器会为您创建一个新的结构类型实例。例如，int 是 System.Int32 的别名，因此您可以互换使用这两者。这又是一个实现细节 - 这并不意味着它们不是类，它只是意味着编译器正在尝试简化事情并让您的生活更轻松。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:05:07.530

在 C# 中，我们有“值类型”，即。int、double、decimal、枚举、结构和“引用类型”——这些都是类。

# javascript - JavaScript 使用 If 语句识别音频何时暂停或播放完毕

> ID：13158525
> 
> 赞同：0
> 
> 时间：2012-10-31T12:59:12.117
> 
> 标签：javascript, audio, canvas

我目前正在 Canvas 上使用 JavaScript 制作网站。（我的英文不是很好，希望大家了解我的情况）

基本上当网站运行时，背景音乐就会播放。（假设背景音乐是​​“A”）如果鼠标指针在图像上，它会播放按钮音效。（假设按钮音乐是“B”）

因此，如果鼠标指针在图像上，它会播放“B”音频，“A”音频会通过执行 A.volume=0.5; 来降低音量；（这有效）但是，如果“B”音频完成或暂停，它不会使“A”音频的音量恢复正常。

我编码如下：

```
function recognizeSoundIsFinished(){
if(B.currentTime == 0){
      A.volume = 1;
}setTimeout("recognizeSoundIsFinished()",30);} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:08:35.783

您使用的是 html5 音频标签还是声音管理器之类的东西？

Soundmanager 具有“onfinish”功能，而 html5 音频会引发“end”事件。

例如。
`myAudio.addEventListener('ended', function(evt) {
// myAudio has ended...
});`

# iphone - 关闭翻转视图后如何刷新视图

> ID：13158531
> 
> 赞同：0
> 
> 时间：2012-10-31T12:59:25.957
> 
> 标签：iphone, objective-c, ios, xcode

我有一个带有不同引脚的 mapView。我还有一个翻转视图，您可以在其中打开或关闭引脚。

我的问题是，当 filpView 被关闭时，添加引脚的功能不会再次运行，因此相同的引脚会留在地图上。

有没有办法再次运行 viewDidLoad 函数，或者有更好的方法来更改引脚？

这是我的两种观点的[代码](http://pastebin.com/qDbAkpL0)。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:07:15.050

`viewWillAppear:`添加您的 Pins 并在下面的方法中调度 localMap 方法

```
-(void)viewWillAppear:(BOOL)animated{

      NSArray *ann = [yourMapView annotations];
     [yourMapView removeAnnotations:ann];
     [self addPins]; 
     //force the map to start on the main queue
     dispatch_async(dispatch_get_main_queue(), ^{[self localMap];});
} 
```

# java - 根据 HTML 元素的 href 下载文件

> ID：13158535
> 
> 赞同：0
> 
> 时间：2012-10-31T12:59:31.970
> 
> 标签：java, ftp, download, jsoup

我正在用 Java 创建一个应用程序，它解析 HTML 并获取所有`<audio>`,`<img>`和`<video>`标签。我使用jsoup做到了这一点。我有属性`href`，因此我得到了链接，我想要一种通过标签将文件下载到我的电脑的方法。这可以通过Java实现吗？

我看到了一种常见的格式，`ftp://user:password@host:port/filePath;type=i.`但我不知道站点的 FTP，然后我如何下载图像和链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:05:14.593

首先，使用 .从 Jsoup 中的 href 属性获取绝对 URL [`Node#absUrl()`](http://jsoup.org/apidocs/org/jsoup/nodes/Node.html#absUrl%28java.lang.String%29)。

```
String absUrl = element.absUrl("href"); 
```

然后，您可以[`InputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html)使用[`URL#openStream()`](http://docs.oracle.com/javase/6/docs/api/java/net/URL.html#openStream%28%29).

```
InputStream input = new URL(absUrl).openStream(); 
```

[然后你可以用通常的方式](http://docs.oracle.com/javase/tutorial/essential/io/)把它写成任意的。例如到一个.[`OutputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/OutputStream.html) `FileOutputStream`

```
OutputStream output = new FileOutputStream(somepath);
// Just write input to output the usual way. 
```

请注意，这一切都与 FTP 无关。那是一个完全不同的主题。

# c# - 从文本区域（MVC）中提取字符串

> ID：13158536
> 
> 赞同：1
> 
> 时间：2012-10-31T12:59:33.093
> 
> 标签：c#, .net, asp.net-mvc

我制作了一个文本区域，希望人们能够在其中输入评论。然后我在控制器中有一个应该使用该字符串的方法。

如何将文本区域中的信息提取到方法中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:05:22.963

我不知道您的 View 或 Action 方法的外观如何，但请给您的 TextArea 一个名称，例如`comment`：

```
@using (Html.BeginForm("MyAction", "MyController")) {
    @Html.TextArea("comment")

    <input type="submit" value="Submit" />
} 
```

然后确保您的操作中有一个具有相同名称的参数：

```
[HttpPost]
public ActionResult MyAction(string comment)
{
    // Do something with the comment
} 
```

当您发布时，默认模型绑定器将负责将 TextArea 中的文本放入`comment`参数中。

# mysql - 用光标触发审计

> ID：13158538
> 
> 赞同：1
> 
> 时间：2012-10-31T12:59:35.613
> 
> 标签：mysql, triggers, cursor

我在这里要做的是创建动态触发器：

1.  从名为 *original_table* 的表中获取列名
2.  遍历返回的列名。
3.  如果与列名关联的旧值和新值之间发生变化，请更新日志表。

我收到此错误消息：`[Err] 1054 - Unknown column 'column_name' in 'NEW'`

如果我手动输入列名，那么它会起作用，但在这种情况下，这种方法会变成静态的，这取决于人工交互。

**扳机：**

```
DELIMITER $$

DROP TRIGGER IF EXISTS log_original_table $$

CREATE TRIGGER log_original_table AFTER UPDATE ON original_table
FOR EACH ROW
BEGIN
    DECLARE done INT DEFAULT FALSE;
    DECLARE column_name VARCHAR(100);
    DECLARE column_cursor CURSOR FOR SELECT column_name FROM information_schema.columns WHERE table_name = 'original_table';
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

    OPEN column_cursor;

    read_loop: LOOP
        FETCH column_cursor INTO column_name;

        IF done THEN
            LEAVE read_loop;
        END IF;

        IF (NEW.column_name <> OLD.column_name) THEN
            INSERT INTO original_table_log
                (parent_id, parent_field_name, parent_old_value, parent_new_value, parent_modified_on)
            VALUES
                (NEW.id, column_name, OLD.column_name, NEW.column_name, NOW());
        END IF;

    END LOOP;

  CLOSE column_cursor;

END$$

DELIMITER ; 
```

**ORIGINAL_TABLE：**

```
DROP TABLE IF EXISTS `original_table`;
CREATE TABLE `original_table` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `firstname` varchar(100) DEFAULT NULL,
  `surname` varchar(100) DEFAULT NULL,
  `username` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=5 DEFAULT CHARSET=latin1;

-- ----------------------------
-- Records of original_table
-- ----------------------------
INSERT INTO `original_table` VALUES ('1', 'michael', 'jakson', 'you');
INSERT INTO `original_table` VALUES ('2', 'john', 'travolta', 'me');
INSERT INTO `original_table` VALUES ('3', 'lionel', 'messi', 'her');
INSERT INTO `original_table` VALUES ('4', 'brian', 'adams', 'they'); 
```

**ORIGINAL_TABLE_LOG：**

```
DROP TABLE IF EXISTS `original_table_log`;
CREATE TABLE `original_table_log` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `parent_id` int(11) DEFAULT NULL,
  `parent_field_name` varchar(100) DEFAULT NULL,
  `parent_old_value` varchar(100) DEFAULT NULL,
  `parent_new_value` varchar(100) DEFAULT NULL,
  `parent_modified_on` datetime DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-01T08:37:55.287

您的列中没有命名列`column_name`，`original_table`因此您可以执行类似`NEW.COLUMN_NAME`或的任何操作`OLD.COLUMN_NAME`。`NEW.First_name`例如，您应该这样做

# svn - Rally 与 Subversion 的双向集成

> ID：13158544
> 
> 赞同：1
> 
> 时间：2012-10-31T12:59:54.800
> 
> 标签：svn, rally

我从[Rally Integration with Subversion](http://www.rallydev.com/help/subversion-installation-user-guide)链接中看到，任何更新`check-ins`都将更新到 Rally。但是有没有办法在`reverse way`. 我想问的是，如果我在其中创建了一个缺陷，`svn/track`那么它会自动更新到吗？`Rally`或者我更新了这个缺陷，`svn/track`我会在 Rally 中收到通知。

# php - 结帐时的 wp 电子商务国家/地区列表

> ID：13158545
> 
> 赞同：0
> 
> 时间：2012-10-31T12:59:56.803
> 
> 标签：php, mysql, wordpress, e-commerce

好的，我在[http://sergedenimes.com/products-page/有一家商店](http://sergedenimes.com/products-page/)

它使用 wordpress 上的 wp 电子商务插件。我已经修改了主题文件以获得我想要的外观和布局，但前几天另一个站点用户冒昧地更新了插件而不备份文件，从而覆盖了我的更改。

（我知道这不应该发生，我应该将主题文件放在不同的目录中，但这是一个不同的问题）

无论如何，幸运的是，我设法将几乎所有主题文件恢复到我的主题文件中，商店又恢复了原样，除了一件事：在结帐页面上有一个下拉菜单，用户可以在其中选择他们的国家，以便商店可以计算运输成本。此下拉列表中现在没有列出任何国家/地区。我检查了结帐主题文件，它的`<?php echo wpsc_shipping_country_list();?>`标签在正确的位置。

任何想法为什么国家列表不再填充选择？我该如何解决？

（为了亲自查看，您需要将至少一种产品添加到购物车并结账）

谢谢

编辑回答马蒂的观点：

*   总价将始终包括运费 - 它是实物商品并添加运费。默认发货国家/地区是英国，这就是它增加 3.60 英镑的原因
*   不知道邮政编码框。你能提供截图吗？对我来说，它没有说明提供邮政编码 - 它说“请在下面选择一个国家来计算您的运费”（应该如此）然后有一个下拉菜单，其中没有可供选择的选项。（这是我的问题）。我在这里看不到文本字段，也不应该有。
*   尽管可能在加拿大服务器上，但该网站和公司位于英国，因此货币反映了这一点
*   感谢您的链接，尽管它似乎不包含解决方案。尝试停用/重新激活，现在购物车小部件中的结帐链接转到错误的页面。

（确定修复了购物车小部件链接问题，但国家下拉菜单仍然损坏）

另一个编辑：这是我的整个结帐页面模板文件的粘贴箱：http: [//pastebin.com/aGxqsTVt](http://pastebin.com/aGxqsTVt)

**更新**：所以我尝试检查核心文件中的查询并将 wp_ 前缀添加到表名中，但没有成功。仍然在为此苦苦挣扎，似乎更新搞砸了很多事情，包括商店现在正在展示保存为草稿的产品。

任何建议都非常感谢。

好的，所以我在其中添加了一个 php 和 mysql 标记，因为我认为这就是问题所在。

这是我认为应该生成国家/地区列表的功能：

```
function wpsc_shipping_country_list( $shippingdetails = false ) {
global $wpdb, $wpsc_shipping_modules, $wpsc_country_data;
$js = '';
$output = '';
if ( !$shippingdetails ) {
    $output = "<input type='hidden' name='wpsc_ajax_actions' value='update_location' />";
    $js = "  onchange='submit_change_country();'";
}
$selected_country = (string) wpsc_get_customer_meta( 'shipping_country' );
$selected_region  = (string) wpsc_get_customer_meta( 'shipping_region'  );

if ( empty( $selected_country ) )
    $selected_country = esc_attr( get_option( 'base_country' ) );

if ( empty( $selected_region ) )
    $selected_region = esc_attr( get_option( 'base_region' ) );

if ( empty( $wpsc_country_data ) )
    $country_data = $wpdb->get_results( "SELECT * FROM `" . WP_WPSC_CURRENCY_LIST . "` WHERE `visible`= '1' ORDER BY `country` ASC", ARRAY_A );
else
    $country_data = $wpsc_country_data;

$acceptable_countries = wpsc_get_acceptable_countries();

$output .= wpsc_get_country_dropdown( array(
    'name'                  => 'country',
    'id'                    => 'current_country',
    'additional_attributes' => $js,
    'acceptable_ids'        => $acceptable_countries,
    'selected'              => $selected_country,
    'placeholder'           => '',
) );

$output .= wpsc_shipping_region_list( $selected_country, $selected_region, $shippingdetails );

if ( isset( $_POST['wpsc_update_location'] ) && $_POST['wpsc_update_location'] == 'true' ) {
    wpsc_update_customer_meta( 'update_location', true );
} else {
    wpsc_delete_customer_meta( 'update_location' );
}

$zipvalue = (string) wpsc_get_customer_meta( 'shipping_zip' );
if ( ! empty( $_POST['zipcode'] ) )
    $zipvalue = $_POST['zipcode'];

$zip_code_text = __( 'Your Zipcode', 'wpsc' );

if ( ( $zipvalue != '' ) && ( $zipvalue != $zip_code_text ) ) {
    $color = '#000';
    wpsc_update_customer_meta( 'shipping_zip', $zipvalue );
} else {
    $zipvalue = $zip_code_text;
    $color = '#999';
}

$uses_zipcode = false;
$custom_shipping = get_option( 'custom_shipping_options' );
foreach ( (array)$custom_shipping as $shipping ) {
    if ( isset( $wpsc_shipping_modules[$shipping]->needs_zipcode ) && $wpsc_shipping_modules[$shipping]->needs_zipcode == true ) {
        $uses_zipcode = true;
    }
}

if ( $uses_zipcode ) {
    $output .= " <input type='text' style='color:" . $color . ";' onclick='if (this.value==\"" . esc_js( $zip_code_text ) . "\") {this.value=\"\";this.style.color=\"#000\";}' onblur='if (this.value==\"\") {this.style.color=\"#999\"; this.value=\"" . esc_js( $zip_code_text ) . "\"; }' value='" . esc_attr( $zipvalue ) . "' size='10' name='zipcode' id='zipcode'>";
}
return $output;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:59:22.267

我更新时遇到了完全相同的问题。我发现问题的原因是从英国到英国的转变。确保您在管理员中使用英国而不是旧英国，您的问题应该得到解决。

坦率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:03:07.880

好的，看看最新版本的 checkout.class.php 文件似乎没有使用 $wpdb->prefix 你在数据库表上使用前缀吗？不只是 wp_ 吗？

```
$country_data = $wpdb->get_results( "SELECT * FROM `" . WPSC_TABLE_CURRENCY_LIST . "` WHERE `visible`= '1' ORDER BY `country` ASC", ARRAY_A ); 
```

应该是什么？

```
$country_data = $wpdb->get_results( "SELECT * FROM `" . $wpdb->prefix.WPSC_TABLE_CURRENCY_LIST . "` WHERE `visible`= '1' ORDER BY `country` ASC", ARRAY_A ); 
```

检查 phpmyadmin 中的数据库结构以查看表名是否匹配？

[更新] 是的，刚刚通读安装文件，他们使用前缀，但仍然检查以确保这些表中仍有数据？

# asp.net - 如何在 ASP.NET 中实现或配置硬会话到期？

> ID：13158551
> 
> 赞同：0
> 
> 时间：2012-10-31T13:00:04.940
> 
> 标签：asp.net, session, web-config, timeout, session-state

我可以为会话设置 20 分钟超时，这意味着如果用户在 20 分钟内没有提出请求，他/她的会话就会过期。

```
<sessionState timeout="20" /> 
```

但我需要的是能够在一定时间后使会话过期，无论用户仍在发送请求。

例如，在 4 小时后，无论用户是否再次发送请求，会话都必须过期；这是为了防止恶意软件滥用默认会话行为......

如何在 ASP.NET 中配置或实现它？

我希望会有一个配置设置，但我找不到？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:04:38.003

此要求没有配置设置，因为它相当独特。

您可以通过在客户端首次连接时向客户端发出 cookie 来实现这一点 - 在每个请求上检查此 cookie，并在 4 小时过去后开始拒绝它。您可以将此开始时间存储在 cookie 或`Session`变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:29:26.417

正如 Oded 提到的，您还应该在会话开始事件的会话中存储第一次登录时间。当您阅读会话时，请检查时间并使用 Session.Clear();

检查会话开始时间的简单方法是使用全局属性访问它。

```
public User CurrentUser
{
    get 
    {
         User user = (User)Session["CurrentUser"];
         if (user.startTime > "4 hours") // you can do it what ever you want.
             Session.Clear(); //or .Abandon(); [Check Here][1]

         return (User)Session["CurrentUser"]
    }
} 
```

[在这里检查](https://stackoverflow.com/questions/347377/in-asp-net-when-should-i-use-session-clear-rather-than-session-abandon)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:57:48.623

这有一个代码示例，正是我想要的：

[http://pooyakhamooshi.blogspot.co.uk/2012/10/how-to-implement-hard-session-expiry-in.html](http://pooyakhamooshi.blogspot.co.uk/2012/10/how-to-implement-hard-session-expiry-in.html)

# jquery - 如何创建多个相交的圆圈？

> ID：13158560
> 
> 赞同：0
> 
> 时间：2012-10-31T13:00:40.697
> 
> 标签：jquery, raphael, geometry

![在此处输入图像描述](../Images/277d0827d9eb706abf15033e0aa576d5.png)

我想制作这样的圆形图像并为其设置动画。可以使用拉斐尔吗？如果是这样，任何人都可以就如何做到这一点提出一些好的想法。我将把它实现到响应式布局中。那可能吗？

要做到这一点，任何人都有一个简单的计算吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:30:40.400

我认为您只需要以半透明 rgba 格式设置圆圈的填充颜色：

```
{fill: rgba(255,0,0, 0.5)} 
```

# android - Robotium 测试用例的模拟数据

> ID：13158563
> 
> 赞同：0
> 
> 时间：2012-10-31T13:00:45.907
> 
> 标签：android, mocking, robotium

我已经完成了基本的机器人教程。我需要更多关于模拟机器人测试用例数据的知识。我应该关注哪个网站/链接或书籍？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:01:55.250

我在[这里](http://www.thomaskeller.biz/blog/2012/10/18/runtime-replace-implementations-with-roboguice-in-functional-tests/)创建了一个小介绍。希望能帮助到你。

# objective-c - Restkit 上的 HTTP 基本身份验证失败，可与 AFNetwork 一起使用

> ID：13158564
> 
> 赞同：0
> 
> 时间：2012-10-31T13:00:47.503
> 
> 标签：objective-c, ios, restkit, afnetworking

我试图向具有基本身份验证的服务器发出发布请求。我用 AFNetwork 库试过它，它可以工作！因为我想使用 Restkit 并且已经使用过很多东西，所以我尝试用它做同样的事情，但它不起作用。我的代码如下所示：

```
 RKClient *client = [[RKClient alloc] initWithBaseURL:URL];
    client.username = @"username";
    client.password = @"password";
    client.authenticationType = RKRequestAuthenticationTypeHTTPBasic;
    client.disableCertificateValidation = YES;

    RKRequest *request = [client post:@"mypath" params:nil delegate:self];
    [request sendSynchronously]; 
```

但在代表

```
- (void)request:(RKRequest *)request didFailLoadWithError:(NSError *)error { 
```

我总是得到错误：

> NSLocalizedDescription=此服务器的证书无效。您可能正在连接到一个伪装成 ####### HIDDEN ####### 的服务器，这可能会使您的机密信息面临风险。, _kCFNetworkCFStreamSSLErrorOriginalValue=-9813, _kCFStreamPropertySSLClientCertificateState=0, NSLocalizedRecoverySuggestion=你愿意吗还是想连接到服务器？

但我设置

> disableCertificationValidation

是

我还尝试按照[RestKit Pull](https://github.com/RestKit/RestKit/pull/131)此处的信息进行操作。但这也完全没有帮助。有没有人有想法，有什么问题？使用 AFNetwork 库，代码或多或少是相同的，但可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:54:27.387

我也是 RestKit 的新手，但我刚刚开始使用 HTTP Basic Auth，主要使用您的示例和以下两个更改：

*   您不需要`disableCertificateValidation`基本身份验证，因为仅在使用 SSL 连接时才需要此方法。所以删除那个。
*   当您同步发送请求时，您不需要委托或接收器方法，您可以稍后简单地评估您的响应一行代码。

如果它仍然不起作用，请检查您的 URL 是否最终正确，方法是`NSLog(@"URL: %@", [[request URL] absoluteString]);`在您的请求初始化和`sendSynchronously`

希望这会有所帮助，它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:16:51.813

至少，我没有通过 RestKit 获得我的解决方案。我尝试了所有方法，还使用 ​​addRootCertificates 添加了证书，但 RestKit 总是遇到同样的错误。最后，我自己做了。

```
NSData* certData = [NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"MyCert" ofType:@"cer"]];

[FileUtility addCertToKeychain:certData]; 
```

方法 addCertToKeychain：

```
#pragma mark SSL Certification Methods
+ (void) addCertToKeychain:(NSData*)certInDer
{
    OSStatus            err = noErr;
    SecCertificateRef   cert;

    cert = SecCertificateCreateWithData(NULL, (__bridge CFDataRef) certInDer);
    assert(cert != NULL);

    CFTypeRef result;

    NSDictionary* dict = [NSDictionary dictionaryWithObjectsAndKeys:
                          (__bridge id)kSecClassCertificate, kSecClass,
                          cert, kSecValueRef,
                          nil];

    err = SecItemAdd((__bridge CFDictionaryRef)dict, &result);
    assert(err == noErr || err == errSecDuplicateItem);

    CFRelease(cert);
} 
```

可能它可以帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-10T11:40:33.037

就我而言，我在 RKClient 上设置了 disableCertificateValidation，但我使用的是使用不同 RKClient 的 RKObjectManager。以下行起到了作用：

```
[RKObjectManager sharedManager].client.disableCertificateValidation = YES; 
```

# cakephp - 组合来自多个模型的数据列表并按在 cakephp 中创建的日期对它们进行排序

> ID：13158565
> 
> 赞同：1
> 
> 时间：2012-10-31T13:00:50.627
> 
> 标签：cakephp

我有 3 个模型。每个都有一个列，其中包含一个名为“created”的 DateTime 在对每个模型执行 find() 之后，我想组合这 3 个列表并根据这个创建日期对它们进行排序。有没有一种简单的方法可以在 cakephp 中做到这一点。这是我使用 find() 查询数据库的代码片段。我这样做了 3 次，每个模型一次。有没有办法像我描述的那样组合和排序这些？

```
$this->set('users',
    $this->Account->find('all', 
        array('conditions'=>
            array('OR'=>
                array('Account.organization_name LIKE'=>'%'.$words.'%', 
            'Account.first_name LIKE'=>'%'.$words.'%',
            'Account.last_name LIKE'=>'%'.$words.'%', 
            'Account.middle_name LIKE'=>'%'.$words.'%')))),
    $this->paginate()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:13:14.440

我通过将所有不同的模型组合到一个数组中并这样做`Set::sort`来做到这一点，如下所示：

```
$allEntities = array();

$articles = $this->Article->find( ... );
foreach ($articles as $k => $v) {
    $allEntities[] = $v['Article'];
}
$documents = $this->Document->find( ... );
foreach ($documents as $k => $v) {
    $allEntities[] = $v['Document'];
}
$videos = $this->Video->find( ... );
foreach ($videos as $k => $v) {
    $allEntities[] = $v['Video'];
}

if (sizeof($allEntities) > 1) {
    $allEntities = Set::sort($allEntities, '/created', 'DESC');
} 
```

如果您需要实体的模型名称，您可以这样做，例如：

```
$videos = $this->Video->find( ... );
foreach ($videos as $k => $v) {
    $v['Video']['modelName'] = 'Video';
    $allEntities[] = $v['Video'];
} 
```

# javascript - IE 支持在“密码”和“文本”之间翻转输入类型？

> ID：13158566
> 
> 赞同：0
> 
> 时间：2012-10-31T13:00:54.703
> 
> 标签：javascript, jquery, internet-explorer, cross-browser

出于可用性原因，我想在我的登录表单中添加一个复选框，允许用户切换密码字段的屏蔽。

* * *

## 示例代码

我为此获得的基本代码如下（***这是快速样机代码，未在 Chrome Canary 以外的任何地方进行测试***）：

**HTML**

```
<input type="password" name="password" id="password" value="somepassword" />
<input type="checkbox" name="unmask" id="unmask" /> 
```

**​JavaScript**

 **```
var password = document.getElementById('password'),
    chkbox = document.getElementById('unmask');

chkbox.addEventListener('click', function (e) {
  password.type = e.currentTarget.checked ? 'text' : 'password';
}); 
```

**JSFiddle**

[请参阅上面的代码](http://jsfiddle.net/qsPdP/)。

* * *

虽然上述概念似乎工作得很好，但当您查看将翻转[jQuery 源代码](http://bit.ly/jqsource)`type`中的属性的代码时，您会看到如下注释：-

> // 我们不能允许改变类型属性（因为它会导致 IE 出现问题）

这增加了我在 StackOverflow 其他地方看到的类似引用......

> 从 Microsoft Internet Explorer 5 开始，type 属性是一次读/写，但仅在使用 createElement 方法创建输入元素且在将其添加到文档之前。

...似乎表明上述代码不适用于 Internet Explorer。

我想知道的是；是这样吗？如果是这样，这只是 IE7/8 等的问题吗？是否有任何进一步的官方文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:04:56.203

你不能在IE上做到这一点。每次当您想在这两种类型之间切换时，您都必须创建新输入并将其替换为旧输入。这是 IE < 9 的唯一解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:07:17.427

IE 不允许您更改输入字段的属性类型。

解决方法：

```
<div id="container">
<input type="password" name="password" id="password" value="somepassword" />
<input type="text" name="passwordtext" id="passtext" value="somepassword" style="display:none;" />
<input type="checkbox" name="unmask" id="unmask" />
</div> 
```

使用 jQuery，而不是原始的 Javascript。在 IE 中，没有 addEventListener，只有 attachEvent（感谢微软的聪明人）。正确绑定事件监听器。

```
$('#unmask').click(function() {
    if($(this).is(':checked')) {
        $('#password').hide();
        $('#passtext').show();
};
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:09:20.123

好吧，这是已知问题，只需查看其他论坛和答案即可。

[http://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/190995/change-input-type-in](http://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/190995/change-input-type-in-ie) ​​-ie http://stackoverflow.com/questions/1987788/javascript-ie6-7 -8-更改输入类型

如果是这种情况，您可以使用`.replaceWith();`.

```
chkbox.addEventListener('click', function (e) {
  var $clone = $("password").clone();
  $clone.attr("type", e.currentTarget.checked ? 'text' : 'password');
  $("password").replaceWith($clone);
}); 
```

出于同样的原因`$clone.attr`可能不起作用，因此您也可以尝试从密码排除类型创建对象。

希望这可以帮助。**

# javascript - Aria 模板调试模式未激活

> ID：13158572
> 
> 赞同：3
> 
> 时间：2012-10-31T13:01:12.833
> 
> 标签：javascript, web-applications, ariatemplates

我正在使用 aria 模板，我正在尝试使用调试模式，但它似乎不起作用，因为我在控制台上没有日志。这是主要的 index.html。

```
<script type="text/javascript" src="/aria/bootstrap.js"></script>
<link type="text/css" href="./view/style.css" rel="stylesheet"></link>
</head>
<body>

<div id="output"></div>

<script type="text/javascript">
        Aria.debug = true;

        Aria.loadTemplate({
            div : "output",
            classpath : "guides.todo_mio.view.Todo",
            moduleCtrl : {
                classpath : "guides.todo_mio.TodoCtrl"
            }
        });
    </script>

</body>
</html> 
```

任何提示？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:37:30.450

您需要`debug`在加载引导程序或 Aria 模板的生产版本之前启用模式，以便自动将每个类的日志级别设置为`LEVEL_DEBUG`.

```
<script>Aria = {debug : true}</script>
<script type="text/javascript" src="/aria/bootstrap.js"></script> 
```

另一种方法是在加载框架后重新设置日志级别

```
aria.core.Log.setLoggingLevel("*", aria.core.Log.LEVEL_DEBUG); 
```

更多信息可在[ariatemplates.com上获得](http://ariatemplates.com/usermanual/Logging_and_debugging)

# html - 如何使用节点中的绝对位置使内部元素的宽度为 100%？

> ID：13158575
> 
> 赞同：0
> 
> 时间：2012-10-31T13:01:18.213
> 
> 标签：html, css

**HTML**

```
<span class="ui-btn-inner">
    <span class="ui-btn-text">TEST
        <span class="title">
            Name<br>Professional
        </span>
    </span>
</span> 
```

**CSS**

```
.ui-btn-text .title {
    display: block;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 70%;
}
.ui-btn-inner .ui-btn-text .title {
    display: none;
    font-size: 0.77em;
    font-weight: normal;
    left: 0;
    line-height: 1em;
    position: absolute;
    top: 21px;
} 
```

这里`ui-btn-inner`类节点具有窗口的全宽（假设该节点的宽度为 1000px）。内部节点`ui-btn-text`并且`title`没有父节点的相对宽度。

该`title`节点只有`ui-btn-text`节点内容'TEST'的宽度，其中`width: 70%;`添加了一个CSS属性以使宽度相对于父节点。

`position: absolute`如果我从下降`title`，它将正常工作。但我不能放弃该属性，因为移动（iphone）集成需要它。如何使它正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:07:50.997

您不能拥有`width:100%`绝对定位的元素。

> 对于包含块基于块容器元素的绝对定位元素，百分比是根据该元素的填充框的宽度计算的。这是从 CSS1 的一个变化，其中百分比宽度总是相对于父元素的内容框计算。

参考：[http ://www.w3.org/TR/CSS21/syndata.html#value-def-percentage](http://www.w3.org/TR/CSS21/syndata.html#value-def-percentage)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:35:14.907

不要使用 span，请使用 div。

给出`width:100%;`绝对元素的解决方案是`position:absolute;`用`position:relative;`. `top:21px;`如果您只使用和`left:0;`定位，它将起作用。

# javascript - 有没有办法知道在javascript中扩展屏幕

> ID：13158579
> 
> 赞同：0
> 
> 时间：2012-10-31T13:01:32.123
> 
> 标签：javascript

有什么方法可以知道在 javascript 中扩展屏幕？

通过`screen.availWidth`，`screen.availHeight`您只能知道主屏幕的宽度和高度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:32:19.597

如果您指的是如何检测扩展屏幕（在两个显示器上），并且您的浏览器窗口在两个屏幕上都运行，您可以使用以下代码进行检测：

```
var extendedScreen = ( window.innerWidth > screen.availWidth ); 
```

但是如果浏览器宽度小于屏幕的可用宽度，上面的代码将不起作用。我不知道检测的通用方法。

还可以查看[https://stackoverflow.com/a/9788029/279262](https://stackoverflow.com/a/9788029/279262)以了解检测屏幕宽度的跨浏览器功能。

# javascript - 按钮的 Chrome 浏览器问题

> ID：13158581
> 
> 赞同：1
> 
> 时间：2012-10-31T13:01:35.937
> 
> 标签：javascript, rally

我有一个按钮问题。它出现在 IE 和 Firefox 中，但没有出现在 Chrome 中。

该按钮的代码使用 Rally API，它是在加载页面时生成的。

我试过谷歌搜索答案，但我找不到任何东西。

这是我的代码：

```
function onClick(b, args) {
    if(OneButtonClickFlag == true) {
        OneButtonClickFlag = false;
        var buttonValue = args.value;
        var userName = "__USER_NAME__";
        TimeSheetReport(); // calling the “timesheet report “

    }
}

function onLoad() {
    var config = {
        text: "Generate",
        value: "myValue"
    };

    var button = new rally.sdk.ui.basic.Button(config);
    button.display("buttonDiv", onClick); // call the “onclick” function 
}

rally.addOnLoad(onLoad); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T20:29:02.310

This App below seems to work with your code in it up until the point where it encounters your OneButtonClick flag. I tested it in Chrome. Does this work for you?

```
<head>
    <title>Button Example</title>
    <meta name="Name" content="Component Example: Button"
    />
    <meta name="Version" content="2010.4" />
    <meta name="Vendor" content="Rally Software" />
    <script type="text/javascript" src="https://rally1.rallydev.com/apps/1.26/sdk.js"></script>
    <script type="text/javascript">
        function onClick(b, args) {
            console.log("works until this undefined variable");
            if (OneButtonClickFlag == true) {
                OneButtonClickFlag = false;
                var buttonValue = args.value;
                var userName = "__USER_NAME__";
                TimeSheetReport(); // calling the “timesheet report “

            }
        }

        function onLoad() {
            var config = {
                text: "Generate",
                value: "myValue"
            };

            var button = new rally.sdk.ui.basic.Button(config);
            button.display("buttonDiv", onClick); // call the “onclick” function 
        }

        rally.addOnLoad(onLoad);
    </script>
</head>

<body>
    <div id="buttonDiv"></div>
</body> 
```

# jquery - 提高隐藏表列的性能

> ID：13158583
> 
> 赞同：0
> 
> 时间：2012-10-31T13:01:37.557
> 
> 标签：jquery, html

单击标题时，我正在隐藏列。我的表有列跨度和行跨度。我正在使用的代码是

```
selector = " > tbody > tr:has(td) td:nth-child(" + Ix + ")";

$(tbl).find(selector).each(function () {

    if (rIx > 0) {
            HideAndShowEle($(this)[0], bShow, true);
    }

}) 
```

隐藏超过 200 行和 20 列的大表非常慢。帮助我找到以更好的方式选择特定列 td 的任何其他方式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:11:08.157

单击标题会隐藏该列。

[jsFiddle](http://jsfiddle.net/TheJoeFletch/S8Ntz/1/)

```
$("table thead th").on("click", function(){
   var index = $(this).index() + 1; 
    $("table tr td:nth-child(" + index + ")").add(this).hide()
});​

<table>
    <thead>
        <tr>
            <th>Head 1</th>
            <th>Head 2</th>
            <th>Head 3</th>
            <th>Head 4</th>
            <th>Head 5</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
            <td>5</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
            <td>5</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
            <td>5</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
            <td>5</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
            <td>4</td>
            <td>5</td>
        </tr>
</tbody>
</table>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:19:58.890

我对列的首选技术（假设您没有具有多个列跨度的单元格）是为每列使用唯一的 css 类，并简单地使用该类作为其选择器。它不必与实际的 css 类相对应，它必须是可识别的。

```
<table class="firstTable">
  <tr>
    <td class="column1"></td>
    <td class="column2"></td>
    <td class="column3"></td>
  </tr>
  <tr>
    <td class="column1"></td>
    <td class="column2"></td>
    <td class="column3"></td>
  </tr>
</table>

<table class="secondTable">
  <tr>
    <td class="column1"></td>
    <td class="column2"></td>
    <td class="column3"></td>
  </tr>
  <tr>
    <td class="column1"></td>
    <td class="column2"></td>
    <td class="column3"></td>
  </tr>
</table> 
```

现在使用通用选择器可以隐藏一列：

```
$(".firstTable .column2").hide(); 
```

要从标题中的链接获取此信息，您可以为链接提供数据属性以指示它所在的列或使用它的父列。

```
<a href="#" data-column="column2" data-table="firstTable" class="columnHeader">Column Header</a>

$(".columnHeader").click(function(event) {
    var col = $(this).attr("column");
    var table = $(this).attr("table");
    $("." + table + " ." + col).hide();
}); 
```

这个发布的代码有明显的漏洞，主要是因为我不知道你的具体要求或页面结构，但这里的概念应该是相当适应的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:06:11.777

```
selector = $('table tbody').has('td').children(Ix) 
```

$(选择器).each(函数 () {

```
if (rIx > 0) {
        HideAndShowEle($(this)[0], bShow, true);
} 
```

})

# c# - Visual Studio 2010 的加载项编译错误连接类

> ID：13158584
> 
> 赞同：2
> 
> 时间：2012-10-31T13:01:37.413
> 
> 标签：c#, .net, visual-studio, add-in

这里：

[有没有办法在 Visual Studio 2008 中指定大纲默认值，以便打开文件时默认折叠成员？](https://stackoverflow.com/questions/293806/is-there-a-way-to-specify-outlining-defaults-in-visual-studio-2008-so-that-a-fil/13158366#13158366)

..我可以找到一个编程插件的例子..但不幸的是它没有编译:-(

> 错误 1
> 
> “CollapsedMembers.Connect”不包含“_openHandler”的定义，并且找不到接受“CollapsedMembers.Connect”类型的第一个参数的扩展方法“_openHandler”（您是否缺少 using 指令或程序集引用？）
> 
> D:\CollapsedMembers\Connect.cs 77 18 CollapsedMembers

实际上那里没有 _openHandler。我已经尝试了所有的 .NET Framework 版本，但不幸的是没有成功。

在 OnOpenHandler.cs 我实现了 OnOpenHandler：

```
namespace CollapsedMembers
{
    internal class OnOpenHandler
    {
        DTE2 _application = null;
        EnvDTE.Events events = null;
        EnvDTE.DocumentEvents docEvents = null;
... and so on... 
```

有人可以帮忙吗？

[编辑：] Connect.cs 如下所示：

```
using System;
using Extensibility;
using EnvDTE;
using EnvDTE80;

namespace CollapsedMembers
{
    /// <summary>The object for implementing an Add-in.</summary>
    /// <seealso class='IDTExtensibility2' />
    public class Connect : IDTExtensibility2
    {
        /// <summary>Implements the constructor for the Add-in object. Place your initialization code within this method.</summary>
        public Connect()
        {
        }

        /// <summary>Implements the OnConnection method of the IDTExtensibility2 interface. Receives notification that the Add-in is being loaded.</summary>
        /// <param term='application'>Root object of the host application.</param>
        /// <param term='connectMode'>Describes how the Add-in is being loaded.</param>
        /// <param term='addInInst'>Object representing this Add-in.</param>
        /// <seealso class='IDTExtensibility2' />
        public void OnConnection(object application, ext_ConnectMode connectMode, object addInInst, ref Array custom)
        {
            _applicationObject = (DTE2)application;
            _addInInstance = (AddIn)addInInst;

            switch (connectMode)
            {
                case ext_ConnectMode.ext_cm_UISetup:
                case ext_ConnectMode.ext_cm_Startup:
                    //Do nothing OnStartup will be called once IDE is initialised.
                    break;
                case ext_ConnectMode.ext_cm_AfterStartup:
                    //The addin was started post startup so we need to call its initialisation manually
                    InitialiseHandlers();
                    break;
            }
        }

        /// <summary>Implements the OnDisconnection method of the IDTExtensibility2 interface. Receives notification that the Add-in is being unloaded.</summary>
        /// <param term='disconnectMode'>Describes how the Add-in is being unloaded.</param>
        /// <param term='custom'>Array of parameters that are host application specific.</param>
        /// <seealso class='IDTExtensibility2' />
        public void OnDisconnection(ext_DisconnectMode disconnectMode, ref Array custom)
        {
        }

        /// <summary>Implements the OnAddInsUpdate method of the IDTExtensibility2 interface. Receives notification when the collection of Add-ins has changed.</summary>
        /// <param term='custom'>Array of parameters that are host application specific.</param>
        /// <seealso class='IDTExtensibility2' />       
        public void OnAddInsUpdate(ref Array custom)
        {
        }

        /// <summary>Implements the OnStartupComplete method of the IDTExtensibility2 interface. Receives notification that the host application has completed loading.</summary>
        /// <param term='custom'>Array of parameters that are host application specific.</param>
        /// <seealso class='IDTExtensibility2' />
        public void OnStartupComplete(ref Array custom)
        {
            InitialiseHandlers();
        }

        /// <summary>Implements the OnBeginShutdown method of the IDTExtensibility2 interface. Receives notification that the host application is being unloaded.</summary>
        /// <param term='custom'>Array of parameters that are host application specific.</param>
        /// <seealso class='IDTExtensibility2' />
        public void OnBeginShutdown(ref Array custom)
        {
        }

        private DTE2 _applicationObject;
        private AddIn _addInInstance;

        private void InitialiseHandlers()
        {
            this._openHandler = new OnOpenHandler(_applicationObject);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-25T15:30:20.147

`_openHandler`是`Connect`类的成员，它没有被定义，你正在使用它

```
private void InitialiseHandlers()
{
    this._openHandler = new OnOpenHandler(_applicationObject);
} 
```

你复制的方法。您需要`OnOpenHandler _openHandler`为类定义一个成员`Connect`。

# symfony - Symfony2 - 生日小部件“无效数据”

> ID：13158590
> 
> 赞同：0
> 
> 时间：2012-10-31T13:01:59.417
> 
> 标签：symfony

我正在尝试`birthday`使用以下代码使小部件工作：

```
$form = $this->createFormBuilder(NULL, array())
    ->add('birthday', 'birthday', array(
        'empty_value' => array(
        'year' => 'Año',
        'month' => 'Mes',
        'day' => 'Día'
    ),
    'required' => TRUE
)); 
```

这在我的本地服务器上并没有给我带来任何麻烦，但是在不同的服务器上，我得到`This value is not valid`验证后。

问题可能出在哪里？

# php - 使用 [] 动态设置数组值时，如何获取最后一个被填充的键？

> ID：13158591
> 
> 赞同：0
> 
> 时间：2012-10-31T13:01:59.787
> 
> 标签：php, arrays, key

使用`[]`动态设置数组值时，如何获取最后填充的键？

例如，考虑：

```
$array[] = 'apple';
$array[] = 'banana';
$array[] = 'orange'; 
```

你如何获得最后一个键值（在这种情况下`2`为“橙色”）？

无论我将它放在哪一行之后，该`key()`函数都会返回。`0`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:32:09.043

请使用此代码：

```
<?php

    $array[] = 'apple';
    $array[] = 'banana';
    $array[] = 'orange';

    $count = count($array);

    $last_key = $count-1;

    $last_value = $array[$last_key];

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:02:54.057

```
end($array);
echo key($array); 
```

是你应该需要的。

`array_search('orange',$array)`如果您已经知道您输入的最后一个值并且只需要密钥，您也可以使用构建的目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:04:16.430

您可以使用 获取最后一个键[`key()`](http://php.net/manual/en/function.key.php)，但您需要先调用[`end()`](http://php.net/manual/en/function.end.php)：

```
echo key(end($array)); 
```

另一种解决方案（性能较低）是使用[`array_keys()`](http://php.net/manual/en/function.array-keys.php)并获取最后一个元素：

```
echo end(array_keys($array)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T13:05:01.900

你可以使用结束功能

```
<?php
end($array);
key($array); 
```

或者试试这个

```
echo count($array); 
```

# visual-c++ - MFC CDateTimeCtrl SetTime 问题

> ID：13158592
> 
> 赞同：1
> 
> 时间：2012-10-31T13:02:03.480
> 
> 标签：visual-c++, mfc

我的代码中有一个 CDateTimeCtrl 时间，它由当前时间初始化并启用/禁用，时间设置是通过单击树控件完成的。

现在，当我单击树控件的一项时，首先启用 dateTime 控件并根据树控件中存在的数据设置时间（例如 14:25:17）。

然后，当我单击树控件的另一项时，时间控件中设置了时间（例如 14:26:30）。

现在，当我再次单击上一个树项时，虽然使用正确的时间值（即 14:25:17）调用了我的 SetTime 函数，但在控件中设置和显示的时间没有更新（仍然是 14:26 :30)。

GetTime 还返回 14:26:30 值。

我用来设置时间的代码是：

```
UINT64_T newSTime = info.m_uiStartTime / 1000;    // Time I receive from tree control (in msecs)
CTime start_time(newSTime);
m_StartTime.SetTime(&start_time); 
```

我尝试过 SetRedraw、Invalidate、UpdateData，但没有任何效果。

希望大家能给点建议。

# jquery - 多个带有叠加层的按钮，找不到打开的叠加层

> ID：13158597
> 
> 赞同：0
> 
> 时间：2012-10-31T13:02:14.343
> 
> 标签：jquery, overlay, jquery-tools

我正在尝试使用 jQuery 工具覆盖，当有一组静态按钮启动覆盖时，它的效果非常好。

但是，当重新创建链接到叠加层的按钮时，叠加层似乎变得孤立，我不明白为什么。我无法关闭它，我什至无法通过使用 each() 遍历 DOM 来找到对它的引用。

我见过一些涉及触发点击的解决方案，但一方面这似乎是一个不雅的解决方案，另一方面它会导致覆盖在我尝试关闭之前闪烁。我想了解这不起作用的原因，以及一个好的解决方案，有人可以帮忙吗？

HTML

```
<div id="container">

</div>
<button class='modalLaunch' rel='#modal'>
    Uncontained launch button
</button>
<div id="modal">
    Modal
    <button id="rebuildContainer">Rebuild container</button>
</div> 
```

​ Javascript

```
$(document).ready(function() {
    $("#modal").hide();

    var rebuildContainer = function() {
        $("#container").html("<button class='modalLaunch' rel='#modal'>Contained launch button 1</button><br><button class='modalLaunch' rel='#modal'>Contained launch button 2</button>");           

        var triggers = $(".modalLaunch").overlay({
            mask: {
                color: '#bbbbee',
                loadSpeed: 200,
                opacity: 0.9
            },
            closeOnClick: true,
            load: false
        });
    }

    $("#rebuildContainer").click(function() {
        console.log("rebuilding buttons inside the container div");

        $(".modalLaunch").each(function() {

            var o = $(this).overlay();
            if (o) {
                console.log("there is an overlay associated with this button");
                if (o.isOpened()) {
                    // I would expect this to be true once each time the handler is called
                    console.log("the overlay associated with this button is open");
                }
            }
        });

        $(".modalLaunch").overlay().close();
        rebuildContainer();
    });

    rebuildContainer();
}); 
```

​</p>

[http://jsfiddle.net/EveryoneMustWin/hjJtc/](http://jsfiddle.net/EveryoneMustWin/hjJtc/)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:24:27.400

自从提出这个问题后，我已经阅读了这个问题[jQuery Tools Alternatives?](https://stackoverflow.com/questions/5561409/jquery-tools-alternatives) 并决定最好放弃 jQuery 工具。他们网站上的论坛甚至不让你开始一个新话题！

# php - php com 对象 msaccess

> ID：13158599
> 
> 赞同：1
> 
> 时间：2012-10-31T13:02:25.997
> 
> 标签：php, ms-access, com, report

平台：Windows 7 Professional Web 服务器：WAMP 2.1

我目前正在构建一个可以使用 php 生成报告的站点。我的 MS Access 中已经有报告，我想使用它来节省时间，而不是在其他报告工具中使用相同的报告再次创建。现在，我正在使用这段代码： `shell_exec("\"C:\\Program Files (x86)\\Microsoft Office\\Office12\\msaccess.exe\" \"E:\\central\\projapps\\HSSE\\hsse.mdb\" /X \"HSSE TRAINING STATISTIC\"");`

1.  首次设置：

    *   WAMP 服务器已关闭，
    *   httpd.exe 作为控制台应用程序运行，一个黑色窗口（类似于 cmd 提示符）
    *   上面的代码将生成我的报告并在 MS Access 中查看
    *   但无法正常查看整个网站
2.  第二个设置：

    *   WAMP 服务器启动
    *   httpd.exe 未作为控制台应用程序运行
    *   上面的代码不会生成我的报告
    *   整个网站将完美运行

在第二个设置中，将出现交互式服务检测。希望我能清楚地表达自己，因为我真的非常需要这个。提前致谢，你们今天过得愉快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:35:34.197

You can't use Access in web development as a reporting tool unless you jump through a pile of hoops to get there. This is because Access is designed to be a desktop application for the most part. You could follow a "Not recommended" path with these steps.

1.  Create a sub or function that runs when the Access file is shelled that takes an argument to determine which report to run.
2.  Export the report to HTML
3.  Point to this HTML file from your website.

Most likely it won't be worth the effort to go this route. I think it would be best to just rewrite the reports in a web reporting tool.

# css - CSS 简单的缩略图网格显示奇怪的间距

> ID：13158600
> 
> 赞同：2
> 
> 时间：2012-10-31T13:02:31.903
> 
> 标签：css, grid-layout

我想创建一个简单的缩略图网格来显示来自[Europeana API](http://labs.europeana.eu/api)的图像。然而，对于一些奇怪的，可能非常明显的原因，我在这个网格中得到随机行，空间很大，好像浮动不起作用。然而，具有随机图像的相同布局（[http://placehold.it/250x350](http://placehold.it/250x350)）似乎没有这个问题。在此处查看 html 和 css 的结果：http: [//jsfiddle.net/VqJzK/1/](http://jsfiddle.net/VqJzK/1/)。

网格的 CSS

```
 .thumb {
        width: 200px;
        background-color: #F5F5F5;
        border-radius: 5px;
        margin-bottom: 0.5em;
        margin-top: 0.5em;
        text-align: left;
        position: relative;
        display: inline-block;
        float: left;
    }

    .thumb img {
        width: 150px;
        vertical-align: middle;

    }​ 
```

和html：

```
 <div class="thumb">
     <img alt="test" src="http://europeanastatic.eu/api/image?uri=http%3A%2F%2Fhdl.handle.net%2F10796%2FKOEKOEK_JG1_26_19311105%3Flocatt%3Dview%3Aderivative2&amp;size=LARGE&amp;type=TEXT"/>
    </div>

    <div class="thumb">
     <img alt="test" src="http://europeanastatic.eu/api/image?uri=http%3A%2F%2Fhdl.handle.net%2F10796%2FKOEKOEK_JG1_02_19310521%3Flocatt%3Dview%3Aderivative2&amp;size=LARGE&amp;type=TEXT"/>
    </div> 
.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:21:53.893

损坏的格式是因为第二个示例中的某些图像更高。较高的图像占用更多空间，并且由于缩略图已`float:left`设置，它们会在较高的图像周围流动。这解释了为什么第一个示例有效，因为它们都具有*相同*的高度。

也就是说，在应用浮点数时`float:left`也会覆盖`display:inline-block`with `display:block`- see [css display 属性](https://stackoverflow.com/questions/9774282/css-display-property-when-a-float-is-applied)

如果您删除`float:left`或设置类的高度，`.thumb`缩略图也将按预期排列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:04:34.630

听起来像标准`inline-block`错误，简单的修复是将您的代码更改为：

```
 <div class="thumb">
     <img alt="test" src="http://europeanastatic.eu/api/image?uri=http%3A%2F%2Fhdl.handle.net%2F10796%2FKOEKOEK_JG1_26_19311105%3Flocatt%3Dview%3Aderivative2&amp;size=LARGE&amp;type=TEXT"/>
    </div><div class="thumb">
     <img alt="test" src="http://europeanastatic.eu/api/image?uri=http%3A%2F%2Fhdl.handle.net%2F10796%2FKOEKOEK_JG1_02_19310521%3Flocatt%3Dview%3Aderivative2&amp;size=LARGE&amp;type=TEXT"/>
    </div> 
```

将元素彼此相邻，因为它被视为`inline`元素之间的空格很重要，因为文本本身是`inline`

或者，您可以使用这样的注释：

```
<div class="thumb">
         <img alt="test" src="http://europeanastatic.eu/api/image?uri=http%3A%2F%2Fhdl.handle.net%2F10796%2FKOEKOEK_JG1_26_19311105%3Flocatt%3Dview%3Aderivative2&amp;size=LARGE&amp;type=TEXT"/>
</div><!--

--><div class="thumb">
         <img alt="test" src="http://europeanastatic.eu/api/image?uri=http%3A%2F%2Fhdl.handle.net%2F10796%2FKOEKOEK_JG1_02_19310521%3Flocatt%3Dview%3Aderivative2&amp;size=LARGE&amp;type=TEXT"/>
   </div> 
```

# ios - 在 App Purchase 状态等待上传

> ID：13158602
> 
> 赞同：12
> 
> 时间：2012-10-31T13:02:46.787
> 
> 标签：ios, in-app-purchase, app-store

我已经上传了我的应用程序二进制文件，状态为“等待审核”。我正在尝试在我的应用程序中测试应用内购买。我已按照这些步骤操作，但无法更改我的应用内购买的状态，仍然显示“等待上传”。我在应用内页面上收到此警告：

> 注意：此应用内购买目前无法在沙盒环境中进行测试，因为您已选择通过 Apple 托管您的内容，但尚未交付您的内容。上传您的内容以在沙盒中测试此应用内购买。

我该如何解决这个警告？

**编辑：**明白了。

问题是我在 In App purchase 中勾选了“Host content using apple”。我努力将任何内容上传到主机。因为我只需要获得苹果的批准就可以将我的精简版转换为付费版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:45:42.753

Once you have created a container in iTunes connect, you can click a button "ready for upload". That means your itunes connect is now expecting you to create an archive of your product and submit for review using Xcode.

To get from "Waiting for binary" to "waiting for review" is to submit your binary archive from Xcode.

before click a button "ready for upload", You have to enable the In_App products.After that you can't enable your In_App products.

# sql - 选择范围内的 100 条记录

> ID：13158603
> 
> 赞同：0
> 
> 时间：2012-10-31T13:02:47.930
> 
> 标签：sql, tsql

假设我有一个学生表，其中有 1000 条记录。

我想编写这样一个查询，它应该只选择 100 条记录，但我应该能够定义范围。

```
Ex. 100 records showing from 501 to 600
or 100 records showing from 101 to 200 
```

PS是的！有一个标识列，但它由随机数组成。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:10:13.070

这应该这样做。

```
SELECT a.* FROM (
     SELECT Row_Number() OVER(ORDER BY table.MySortCol) as RowNum,
     table.* -- columns you need
     FROM table
) a
WHERE a.RowNum between 1 and 100 
```

即使您在表上没有顺序 id，这也会为您提供一致的结果集，因此您可以执行有意义的分页或您有什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:03:34.123

对 SQL Server使用**[`TOP`^([docs])](http://msdn.microsoft.com/en-us/library/ms189463.aspx)**

```
SELECT TOP 100 *
FROM tableName
WHERE columnName BETWEEN 0 AND 100 
```

 ~~但`LIMIT`对于 MySQL

```
SELECT *
FROM tableName
WHERE col BETWEEN 0 AND 100
LIMIT 100 
```

 ~~**更新 1**

```
WITH sampleRec
AS
(
    SELECT column1, col2, col3,
           ROW_NUMBER() OVER (ORDER BY colName) rn
    FROM yourTableName
)
SELECT column1, col2, col3
FROM sampleRec
WHERE rn BETWEEN 1 AND 100 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T13:04:12.590

如果您使用 MySQL，请使用 LIMIT 命令。

SELECT * FROM MyTable 限制 X, Y

其中 X 是您的开始记录，Y 是记录数。所以对于你的 501 到 600，你会做 LIMIT 501, 100。

这可能适用于其他 SQL 版本 - 只需查找系统的 LIMIT 命令。~~~~

# javascript - 使用 Javascript 从 Ajax TabContainer 获取 ActiveTabIndex

> ID：13158610
> 
> 赞同：1
> 
> 时间：2012-10-31T13:03:07.260
> 
> 标签：javascript, asp.net, ajax, web-applications

当用户选择选项卡时，如何从 TabContainer 获取 ActiveTabIndex？我尝试了以下但不起作用。

```
<script type="text/javascript">
    function TabChange() {
        var tc = document.getElementById("TabContainer1")
        alert(tc.ActiveTabIndex);
    }
</script>

 <asp:TabContainer ID="TabContainer1" runat="server" ActiveTabIndex="0" Height="300px"
        Width="300px" CssClass="MyTabStyle" OnClientActiveTabChanged="TabChange">
        <asp:TabPanel runat="server" HeaderText="First" ID="TabPanel1">
            <ContentTemplate>
                <h1>
                    Tab 1
                </h1>
            </ContentTemplate>
        </asp:TabPanel>
        <asp:TabPanel ID="TabPanel2" runat="server" HeaderText="Second">
            <ContentTemplate>
                <h1>
                    Tab 2
                </h1>
            </ContentTemplate>
        </asp:TabPanel>
 </asp:TabContainer> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T13:34:42.820

ASPX：

```
<ajaxToolkit:TabContainer ID="TabContainer1" runat="server" OnClientActiveTabChanged="clientActiveTabChanged">
<ajaxToolkit:TabPanel ID="TabPanel1" runat="server" HeaderText="Test1">
    <ContentTemplate>Test1</ContentTemplate>
</ajaxToolkit:TabPanel>
<ajaxToolkit:TabPanel ID="TabPanel2" runat="server" HeaderText="Test2">
    <ContentTemplate>Test2</ContentTemplate>
</ajaxToolkit:TabPanel>
<ajaxToolkit:TabPanel ID="TabPanel3" runat="server" HeaderText="Test3">
    <ContentTemplate>Test3</ContentTemplate>
</ajaxToolkit:TabPanel> 
```

JS：

```
<script type="text/javascript">

function clientActiveTabChanged(sender, args) {

    alert(sender.get_activeTabIndex());
} 
```

# php - 如何阻止机器人和垃圾邮件提交评论？

> ID：13158611
> 
> 赞同：6
> 
> 时间：2012-10-31T13:03:06.383
> 
> 标签：php, javascript, bots

目前

1.  我正在使用验证码图片
2.  我创建了文本字段并使用 javascript 隐藏它。我希望它的值在服务器端为空，因为机器人应该填写表单上的所有字段。如果 value 不为空，则它不会处理评论。
3.  我还使用时间戳来检查提交评论花了多长时间。我想如果评论是在 15 秒内提交的，它来自机器人，所以我也停止处理评论。

但我仍然无法控制机器人提交我的评论表单。请帮助我现在该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T13:12:51.573

添加具有误导性 ID/名称的隐藏字段

`<input type="hidden" id="Username" name="Username" value=""/>`

如果机器人出现并填写您的表单，他们可能会填写隐藏字段，而用户应该无法填写，因此如果隐藏字段有数据，则不允许提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:18:05.673

为什么不实施[Akismet](http://akismet.com/)并让他们为您处理呢？他们有一个有据可查的 API，成千上万的人依靠它来防止 Wordpress 博客上的垃圾邮件。我在我妻子的博客上使用 Akismet 大概 3 年没有看到垃圾评论了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:13:05.813

1.  对评论中的所有链接使用**no-follow**。这不会阻止垃圾邮件，但会消除垃圾邮件的大部分诱因。（[看这里它是如何工作的](http://en.wikipedia.org/wiki/Nofollow)）
2.  需要**用户身份验证**才能发表评论。
3.  使用非描述性的表单元素（不要将 div 命名为“comment”）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T13:16:42.137

Lyuben Todorov 提出了一个很好的解决方案来防止 BOT 垃圾邮件发送者。但是，如果您仍然有垃圾邮件并且可能是人为垃圾邮件，那么请使用[Akismet](http://akismet.com)反垃圾邮件系统。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-31T13:12:31.730

尝试创建独特的验证码来阻止任何标准机器人（但如果有人想准确地让你发送垃圾邮件，它就行不通了）。

另一种方法是通过电话号码添加验证。

# php - 同步网页

> ID：13158613
> 
> 赞同：1
> 
> 时间：2012-10-31T13:03:17.697
> 
> 标签：php, javascript, jquery

我有一种情况，一个事件必须影响一个事件触发的多个网页。

就像在 GMail 中一样。我正在为我的大学开发一个基于在线股票交易系统的项目。有人要求管理员或经销商无需刷新其应用程序端即可查看客户在应用程序另一端下达的新订单的设施。

正如我所说的，它就像 GMail，等待事件发生，收听并更新页面。

我擅长 JavaScript 和 jQuery，我可以在一个页面中做到这一点：事件侦听器。但是如何跨多个页面执行此操作。

您还可以考虑另一种情况：酒店的服务员、收银员和厨师都有一个 PDA，他们中的任何一个人都不必刷新他们的网页实例来更新所下的订单。

我怎样才能做到这一点？这可能吗？我说我擅长 javascript，但我有自己的限制和怀疑。

我使用 jQuery 和 PHP。

提前致谢。

PS：我知道如何每 5 秒左右刷新一次页面或 iFrame。

**编辑1：**

至于其他细节，我想要类似于下面在java中完成的东西

```
synchronised(sync)
{
   sync.wait()
} 
```

代码可能不准确，这是来自我的实验室实验。但是这个概念是相似的。服务器一直等到客户端移动，并且重复了很长时间。

**编辑2：**

另一个最好的例子是我们在互联网上经常遇到的情况：完成一项调查或其他内容以使内容能够被下载。

我的交易系统需要这样的东西。经销商页面始终侦听客户端页面以与服务器一起操作。在这种情况下，经销商页面会对该动作做出反应。在这种情况下下订单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:06:22.213

研究一个长轮询或“彗星”架构。这被事件驱动的 AJAX 应用程序广泛使用，并将提供您正在寻找的内容。

有关更多信息，请参阅[https://en.wikipedia.org/wiki/Comet_(programming](https://en.wikipedia.org/wiki/Comet_(programming) )。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:08:27.420

如果一个浏览器上有多个页面实例，您可以使用 javascript web worker。

**别的**

使用“长池”或“ajax 查询”

长池化演示：[如何实现基本的“长轮询”？](https://stackoverflow.com/questions/333664/simple-long-polling-example-code)

你做什么，你总是向服务器查询新信息。如果有新信息，您将其退回。然后 javascript 会看到有新信息并显示出来。

# php - 在 PHP 中使用 PDO 和 MySQL 时，引号前不需要反斜杠

> ID：13158618
> 
> 赞同：0
> 
> 时间：2012-10-31T13:03:30.283
> 
> 标签：php, pdo, backslash, html, quotations

我有一个 CMS，它的管理员必须使用它来将一些用 JavaScript 编写的网站小工具插入到它的数据库 MySQL 中。我为此使用了 PDO，但它在所有引号之前放回斜杠（当我在互联网上运行项目时）。所以代码在源代码中看起来像这样：

```
<script type=\"text/javascript\" src=\"something.js\"></script> 
```

因此，页面中不会显示任何内容。当我在本地测试应用程序时，不会应用此反斜杠，并且我能够在页面中看到这些小工具。
实际上，我有相同的代码，它们在不同的位置（本地和远程）以不同的方式起作用。有什么问题？

这是我的代码：

```
try
{
$db = new PDO("mysql:host=$hostname;dbname=dbdirectory", $username, $password, array(PDO::ATTR_PERSISTENT => true));
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING);
$db->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_BOTH);
}
catch(PDOException $e)
{
    echo $e->getMessage();
}

$title = $_POST['title'];
$code = $_POST['code'];
$sql = "INSERT INTO tbl_services (title,code) VALUES (?,?)";
$q = $db->prepare($sql);
$q->execute(array($title,$code)); 
```

# c# - 在 C# Windows 窗体中绘制大量图像

> ID：13158625
> 
> 赞同：4
> 
> 时间：2012-10-31T13:03:53.760
> 
> 标签：c#, winforms, image, panel, picturebox

我正在为 C# Windows 窗体中的游戏创建地图编辑器。我需要的是一个必须存储数千张图像的网格。

我的第一种方法是创建一个`Panel`控件，然后`PictureBoxes`向其中添加多个控件。不幸的是，绘制 2000 张图像大约需要 3 秒。

然后我决定尝试用's 的方法创建`Rectangles`和绘制`Images`它们，希望得到更好的结果，但它仍然很慢。`Panel``OnPaint()`

有没有更好、更有效的方法在 Windows 窗体中呈现如此多的图像？

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:44:58.013

像您一样使用 Paint 事件，但是...

作为图像加载的一部分，缓存一个缩小版本，将 16 个图像合并为一个，即只有 125 个图像，当您缩小到一定比例时，切换到使用预渲染的缩小版本。

您可以随时为多个缩放级别执行此操作，以便随时在屏幕上保留尽可能少的图像。所以你可以再次将其除以 4。

我为一个项目执行此操作，该项目的地图由 65536 张图像 (256 x 256) 组成。缓存也被写入磁盘，因此每次缩小时都会看到相同数量的图像。在我的编辑器中，我一次只能查看 16 张图像，即使我正在查看整个地图。

您可以通过了解用户可用的选项（例如平移和缩放）来进一步改进这一点，这为您提供了用户接下来可能查看的有限图像子集，因此您可以预加载这些图像以提高性能。

您最初会增加加载时间，但我敢打赌您已经有很长的加载时间从磁盘上拉出 2000 张图像

# iphone - 如何在具有从数据库获取内容的 UITableView 中实现按字母顺序排列的部分标题

> ID：13158634
> 
> 赞同：3
> 
> 时间：2012-10-31T13:04:06.897
> 
> 标签：iphone, objective-c, sqlite, uitableview

到目前为止，我已经`UITableView`通过填充数据库中的内容来实现

**通过从 sqlite 数据库**中检索数组

 **`storedContactsArray = [Sqlitefile selectAllContactsFromDB];`

所以没有多个部分，部分标题和返回`storedContactsArray.count`行数。

现在我需要在表格视图中填充相同的数据，但**Alpabetical 部分中的数据集按字母顺序排列。**

我试过了

```
alphabetsArray =[[NSMutableArray alloc]initWithObjects:@"A",@"B",@"C",@"D",@"E",@"F",@"G",@"H",@"I",@"J",@"K",@"L",@"M",@"N",@"O",@"P",@"Q",@"R",@"S",@"T",@"U",@"V",@"W",@"X",@"Y",@"Z",nil];

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
return [alphabetsArray count];
}

- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView {
      return alphabetsArray;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
      return [alphabetsArray objectAtIndex:section];
} 
```

**![需要如下](../Images/4cfab08cfa11f97d7ae74150e5ccc3a6.png)**

但是在 n 的情况下它会失败，因为最初`numberOfRowsInSectio`没有联系人`storedContactsArray`

发生错误： `-[__NSArrayM objectAtIndex:]: index 25 beyond bounds for empty array`

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
  return [[storedContactsArray objectAtIndex:section] count]
} 
```

任何使用完整链接的建议请

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-31T13:11:01.527

为了满足您的要求，您需要首先将所有数据按字母顺序分离到部分中。如下。

这里的部分是一个可变字典，我们将在其中获取所有数据作为字母集。

```
 //Inside ViewDidLoad Method

 sections = [[NSMutableDictionary alloc] init]; ///Global Object

 BOOL found;

for (NSString *temp in arrayYourData)
{        
    NSString *c = [temp substringToIndex:1];

    found = NO;

    for (NSString *str in [sections allKeys])
    {
        if ([str isEqualToString:c])
        {
            found = YES;
        }
    }

    if (!found)
    {     
        [sections setValue:[[NSMutableArray alloc] init] forKey:c];
    }
}
for (NSString *temp in arrayYourData)
{
    [[sections objectForKey:[temp substringToIndex:1]] addObject:temp];
}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [[sections allKeys]count];
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [[sections valueForKey:[[[sections allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)] objectAtIndex:section]] count];
}

-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
      static NSString* CellIdentifier = @"Cell";
      UITableViewCell* cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
     if(cell == Nil)
     {
           cell  = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
     }
     NSString *titleText = [[sections valueForKey:[[[sections allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)] objectAtIndex:indexPath.section]] objectAtIndex:indexPath.row];
     cell.textLabel.text = titleText;
     return cell;
 } 
```

请尝试一下，我正在使用它，它工作正常希望它对你有帮助！！！**

# ruby-on-rails - 在 ruby on rails 中从命令行运行 soffice（libreoffice 或 openoffice）

> ID：13158638
> 
> 赞同：0
> 
> 时间：2012-10-31T13:04:18.597
> 
> 标签：ruby-on-rails, ruby

我有一个应用程序，我想使用 libreoffice 将文件批量转换为 html。我有以下方法：

```
def set_versioned_odt
  condition = %x(soffice --invisible --convert-to html /path/to/file.odt --outdir /path/to/dir/)

  if condition
    Rails.logger.info "This has been finished"
  else
    Rails.logger.info "This failed..."
  end 
```

结尾

当我在应用程序中运行此方法时。它将返回一个失败的语句；但是，如果我在 rails 控制台中运行此命令，soffice 将正确处理。有谁知道我在rails应用程序中做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:06:59.527

最好的猜测是它`soffice`不在路径中。尝试指定`soffice`.

# enums - 在 DTD 中声明元素的枚举

> ID：13158640
> 
> 赞同：0
> 
> 时间：2012-10-31T13:04:31.310
> 
> 标签：enums, dtd

> **可能重复：**
> [DTD 元素类型问题](https://stackoverflow.com/questions/1778401/dtd-element-type-problem)

这是否可以限制具有 DTD 的元​​素上的值？

在此示例中，我想将动物类型限制为仅猫或狗：

```
<example>
   <animal>
      <type>cat</type>
   </animal>
   <animal>
      <type>dog</type>
   </animal>
   <animal>
      <type>fish</type> <-- Error here
   </animal>
</example> 
```

我知道这可以限制属性，但是这可能与元素有关吗？

# mongodb - MongoDB的mapreduce和Hadoop有什么异同？

> ID：13158644
> 
> 赞同：-1
> 
> 时间：2012-10-31T13:04:40.777
> 
> 标签：mongodb, hadoop, mapreduce

除了使用 map 和 reduce 函数的相似性。例如，MongoDB 是否应用了组合功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T21:17:39.547

此线程回答您的问题：[Hadoop Map/Reduce vs built-In Map/Reduce](https://stackoverflow.com/questions/9287585/hadoop-map-reduce-vs-built-in-map-reduce)

您可能还对这篇关于使用 MongoDB mapReduce 分析大量文档的帖子感兴趣：http: [//steveeichert.com/2010/03/31/data-analysis-using-mongodb-map-reduce.html/](http://steveeichert.com/2010/03/31/data-analysis-using-mongodb-map-reduce.html/)

# android - 将 Google Analytics 库添加到 Maven 项目

> ID：13158655
> 
> 赞同：11
> 
> 时间：2012-10-31T13:05:24.430
> 
> 标签：android, maven, google-analytics

我在哪里可以找到 Google Analytics Android 库`groupId`和`archetype`我的项目 pom？

我一直在寻找它几个小时，我找不到任何线索......（

PS 我在 GitHub 上找到了一些东西，但它看起来像是使用了第三方存储库（当我尝试运行时，`mnv install`或者`compile`它给了我一个错误）：

```
<dependency>
  <groupId>com.google.android.analytics</groupId>
  <artifactId>analytics</artifactId>
  <version>2</version>
</dependency> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-03T10:32:41.113

[您可以使用maven-android-sdk-deployer](https://github.com/mosabua/maven-android-sdk-deployer)安装所有缺少的 android 库。**它从 android sdk 文件夹在本地**maven 存储库中安装所有附加功能。用法很简单：下载并运行`mvn install`。Deployer 本身不支持除 sdk 版本之外的可选依赖项。您**必须**首先通过 SDK Manager 安装所有 jar。

*更新：*在写完这个答案后，谷歌已经对 SDK Manager 进行了更新，并在其中包含了 2 个 maven 存储库：`Google Repository`和`Android Support Repository`. 您所要做的就是将它们添加到`pom.xml`. 它提供了以下工件：

*   支持库（v4、v13）
*   网格布局（v7）
*   谷歌播放服务 (3.1.36)

如您所见，它没有分析工件，因此您仍然需要`maven-android-sdk-deployer`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-08T16:38:45.687

从 Google Analytics SDK v4 开始，Google Analytics 是 Google Play 服务的一部分。不再需要单独的依赖项。

[https://developers.google.com/analytics/devguides/collection/android/changelog](https://developers.google.com/analytics/devguides/collection/android/changelog)

# java - 简单的 Java 缓存库或设计模式？

> ID：13158657
> 
> 赞同：14
> 
> 时间：2012-10-31T13:05:28.363
> 
> 标签：java, design-patterns, caching, memcached, ehcache

我需要经常访问耗时计算的结果。结果不经常变化，所以我不得不时不时地重新计算数据，但暂时使用过时的结果是可以的。最简单的方法是什么？是否有现有的库方法或设计模式？

我在想类似的东西

```
private static List myCachedList = null;

...

// refresh list once in 3600 seconds
if (needsRefresh(myCachedList, 3600)) {
    // run the calculation
    myCachedList = ...
}
// use either updated or previous value from here on 
```

一个正确的实现可能不是微不足道的，它可能必须处理线程安全、竞争条件等，所以我宁愿使用一个经过验证的实现而不是在这里推出我自己的实现。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-31T13:06:53.277

恭喜您意识到编写自己的代码可能会更麻烦！

我会查看[Guava 缓存](https://github.com/google/guava/wiki/CachesExplained)解决方案。Guava 是一个经过验证的库，缓存可以通过流畅的工厂 API 轻松获得（并且可配置）。

> 所有 Guava 缓存，无论是否加载，都支持 get(K, Callable<V>) 方法。此方法返回与缓存中的键关联的值，或从指定的 Callable 计算它并将其添加到缓存中。在加载完成之前，不会修改与此缓存关联的可观察状态。此方法提供了对传统“如果缓存，则返回；否则创建，缓存并返回”模式的简单替代。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T13:06:57.513

我会看看 Google [guava-libraries](https://github.com/google/guava/)。大部分工作已经为您完成。

有一个专门称为 Timed Eviction 的部分，可能与您想要的有关。 [https://github.com/google/guava/wiki/CachesExplained#timed-eviction](https://github.com/google/guava/wiki/CachesExplained#timed-eviction)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-31T13:08:59.463

我建议您使用代理设计模式，这样您就可以在代理类中封装缓存逻辑实现

这里有一个很酷的例子，看起来很适合您的需求

[http://en.wikipedia.org/wiki/Proxy_pattern](http://en.wikipedia.org/wiki/Proxy_pattern)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-28T11:16:27.237

如果您不想使用第三方库，只需创建一个包含键和值的静态映射。使用密钥可以快速检索数据。

并编写方法以将值添加到缓存、获取、删除。

```
public SimpleCache{
    private static Map<String,Object> simpleCache = new HashMap<>();

    public static <T> T getValue(String key, Class type){

    //todo check contains here, if map doesn't contains key, throw not found exception

    Object val = simpleCache.get(key);

    return (T)val;    
  }
} 
```

希望这可以帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-12T14:55:59.027

您可以尝试[SimplCache](https://github.com/lekhana3003/SimplCache)，它接受缓存数据库和持久数据库的实现，为缓存系统提供简单的实现。

# c# - 动态关键字不适用于 IoC，但经典反射可以

> ID：13158671
> 
> 赞同：4
> 
> 时间：2012-10-31T13:06:02.777
> 
> 标签：c#, dynamic, reflection

我为我们的系统制作了一个小 CQRS API 我尝试使用 dynamic 关键字替换一些反射代码，但它不起作用

每个命令处理程序都是`CommandHandler<TCommand>`带有方法的泛型`void Execute(TCommand Command)`

通过反射它可以工作

```
public void Invoke(Contracts.Commands.Command command)
{
    var handlerType = types[command.GetType()];

    var handler = kernel.Get(handlerType);
    var method = handlerType.GetMethod("Execute");
    method.Invoke(handler, new object[] { command });
} 
```

`Kernel.Get`是`kernel.Get<T>`我们的 IoC (Ninject) 中的无类型版本。这有效，通用方法 Execute of T 触发

此代码因参数不匹配异常而失败

```
public void Invoke(Contracts.Commands.Command command)
{
    var handlerType = types[command.GetType()];

    dynamic handler = kernel.Get(handlerType);
    handler.Execute(command);
} 
```

如果我静态声明它与动态一起使用的类型

```
dynamic handler = new TestCommandHandler();
handler.Execute(new TestCommand()); 
```

**编辑：**更多信息以回答评论中的问题

*   handlerType 是实现抽象类的具体类`CommandHandler<TCommand> where TCommand : Command`
*   执行方法在抽象类中声明为`public virtual void Execute(TCommand command)`
*   TestCommand 实现抽象类命令
*   奇怪的是，如果我静态地将它们声明为强类型，则相同的处理程序和命令可以工作，最后一个例子（在现实世界的例子中，我在构造函数中有依赖关系

    **编辑2**

*   堆栈跟踪

> 在 CallSite.Target(Closure , CallSite , Object , Command ) 在 System.Dynamic.UpdateDelegates.UpdateAndExecuteVoid2[T0,T1](CallSite 站点, T0 arg0, T1 arg1) 在 XXX.Business.Command.CommandHandlerInvoker.Invoke(Command 命令)在 C:\XXX.Business\Command\CommandHandlerInvoker.cs:line 29 at XXX.Web.XXXService.Execute(Command command) in C:\XXX.Web\ExfiService.svc.cs:line 29 at XXX.Web.Controllers .ComplianceController.XXX(XXXViewModel viewModel) 在 C:\XXX.Web\Controllers\XXXController.cs:line 52 at lambda_method(Closure , ControllerBase , Object[] ) at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object [] 参数）在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 个参数）在 System.Web.Mvc.ControllerActionInvoker.<> *c_DisplayClass15.b* _12() 在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter（IActionFilter 过滤器，ActionExecutingContext preContext，Func`1 延续）

*   例外

> 最好的重载方法匹配 `XXX.Business.Command.CommandHandler<XXX.Contracts.Commands.TestCommand>.Execute(XXX.Contracts.Commands.TestCommand)' has some invalid arguments`

**错误消息说明 T 的抽象类不是具体类，但上面代码中的 handlerType 是具体类**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T07:41:41.677

您需要将代码更改为如下所示：

```
public void Invoke(Contracts.Commands.Command command)
{
    var handlerType = types[command.GetType()];

    dynamic handler = kernel.Get(handlerType);
    dynamic cmd = command;
    handler.Execute(cmd);
} 
```

请注意，`command`参数首先分配给动态局部变量 ( `cmd`)。这允许`cmd`在运行时评估类型并保持对`Execute`真正动态的调用；如果不这样做，`Execute`则假定该方法具有固定签名`Execute(Contracts.Commands.Command command)`

# google-apps-script - UiApp：非gmail用户的持久登录

> ID：13158673
> 
> 赞同：1
> 
> 时间：2012-10-31T13:06:11.933
> 
> 标签：google-apps-script

我正在尝试实现一个 Google Apps 脚本网络服务，该服务要求用户使用我们系统上设置的帐户登录。

用户不一定有 gmail 帐户，也不应该被要求创建一个。

Web 服务必须以脚本所有者身份运行，因为它必须能够写入电子表格和其他没有共享写入权限的资源。

我已经设法实现了登录屏幕，具有相当强的安全性——但我现在遇到的问题是用户每次访问时都必须重新登录，即使他们点击了刷新按钮。

关于如何实现这一点的任何想法？有没有办法在用户浏览器中存储一个包含会话 ID 的 cookie？还是有其他方法可以奏效？

提前致谢！

乔什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T23:36:00.693

这是一个非常古老的帖子，但由于有解决方案，我认为最好展示它以帮助有类似需求的人

嗨乔希，

我已经开发了这样一个系统，并且确实有办法做到这一点。

您确实可以开发一个使用 PrivateCache 类的类似 cookie 的系统：CacheService.getPrivateCache()。

如果用户重新加载页面或关闭它，它会起作用。

但是，当您关闭浏览器时，使用此解决方案将无法再检索信息。

这是我用来防止您强调的问题的功能

随意调整它们

```
function getCookie(){
  var cache=CacheService.getPrivateCache();
  var cached=cache.get("UserCookie");
  if(cached!=null){
    return Utilities.jsonParse(cached);
  }
  return -1;
}

function createCookie(data){
  var cache=CacheService.getPrivateCache();
  cache.put("UserCookie",Utilities.jsonStringify(data),1800); 
}

function removeCookie(){
  var cache=CacheService.getPrivateCache();
  cache.remove("UserCookie"); 
} 
```

另一种方法是使用 UserProperties。在这种情况下，即使您关闭浏览器，它也能正常工作......我刚刚尝试过

因此，要使用的功能是：

```
function getCookie(){
  var cached=UserProperties.getProperty('UserCookie');
  if(cached!=null){
    return Utilities.jsonParse(cached);
  }
  return -1;
}

function createCookie(data){
    UserProperties.setProperty('UserCookie',Utilities.jsonStringify(data));
}

function removeCookie(){
  UserProperties.deleteProperty("UserCookie"); 
} 
```

我希望它会帮助任何人......

干杯

尼古拉斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:19:39.947

Apps 脚本无法进行持久登录，因为 Apps 脚本无法与 cookie 等浏览器对象交互。Apps 脚本仅适用于 Google 帐户。

# c# - 如何将 foreach 中的值分配给 GUI.Label 或 Box

> ID：13158674
> 
> 赞同：0
> 
> 时间：2012-10-31T13:06:11.680
> 
> 标签：c#, user-interface, foreach, unity3d

我正在尝试按我的场景中所有可用游戏对象的名称列出，实际上它几乎完成了，但是出了点问题，这就是为什么我需要你们的帮助！

这是用c#截取的代码：

```
using UnityEngine;
using System.Collections;

public class testLIST : MonoBehaviour {

    public string objects;

    void Start() {
        object[] obj = GameObject.FindSceneObjectsOfType(typeof (GameObject));

        foreach (object o in obj) 
        {

        GameObject g = (GameObject) o;
        objects = g.name;
            print(g.name);
        }

    }

    void OnGUI() {
        int i =0; 
        GUIStyle style = new GUIStyle();
        i = i+1;
        Rect sizeBox = new Rect(Screen.width/2-1, Screen.height/2-150, 300, 100);
        GUI.Box(sizeBox,"Available Objects : \n" + i +". " +objects.ToString(),style);
    } 
```

当一段代码正在运行时，GUI.Box 只代​​表场景中的最后一个对象，而不是所有对象。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:21:40.143

这应该将所有对象名称连接在一个字符串中。

```
List<String> li = new List<string>();
foreach (object o in obj) 
    {

    GameObject g = (GameObject) o;
    li.Add(g.name);
        print(g.name);
    }
Objects = String.Join(", ",li.ToArray()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:02:15.737

`OnGUI()`在里面调用`foreach`你会得到所有的对象。到目前为止，您没有调用 OnGUI() 函数，因此该函数在`foreach`. 所以你从`foreach`.

# ios - 从 url 检索到的图像不适合 UIImageView

> ID：13158678
> 
> 赞同：0
> 
> 时间：2012-10-31T13:06:25.707
> 
> 标签：ios, uiimageview, tableview, nsdata, nsurl

我正在尝试从 url 下载图像并显示到单元格中（示例如下）：

```
NSURL *url = [NSURL URLWithString:@"http://images.google.com/intl/en_ALL/images/logos/images_logo_lg.gif"];

NSData *data = [NSData dataWithContentsOfURL:url];

[cell.imageView setImage:[UIImage imageWithData:data]]; 
```

不知何故，当我显示到单元格中时，它覆盖了整个单元格，比我的 UIImageView 大。

但是，如果我在本地显示图像，如下所示：

```
[cell.imageView setImage:[UIImage imageNamed:@"defaultProfile.png"]]; 
```

它完全适合我在单元格中设置的 UIImageView。

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:11:00.027

使用 imageview 的 scaleToFit 属性

# c++ - c++ std::set 相等

> ID：13158682
> 
> 赞同：8
> 
> 时间：2012-10-31T13:06:41.530
> 
> 标签：c++, set, compare, equals

我尝试使用 a`std::set`以便在我的容器中拥有独特的元素。

因为我有 3D 对象：

```
Class Object3D{  
 private:  
  float x;  
  float y;  
  float z;  
} 
```

当 时，这些对象相等 `(A.x==B.x && A.y==B.y && A.z==B.z)`。
在 std::set 实现中一个元素 `A==B if (!(A < B) && !(B>A))`。
我的比较是不可能的......我试图重载`==`运算符。
我在调用时选择了 set container 来比较值`insert(a)`。`std::vector v`我正在用和他的迭代器做类似的事情：

```
if(!(A).inVector()){
 v.push_back(A);
} 
```

和

```
bool inVector(){
 for(itr = v.begin();itr != v.end();itr++){
  if(this->x==(*itr)->x && this->y==(*itr)->y && this->z==(*itr)->z){
   return true;
  }
 }
 return false;
} 
```

为每个对象（10000-100000）检查它的复杂性很高。
有人可以有一个想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T13:16:02.603

您需要`<`为您的班级实施严格的弱排序。最简单的方法是使用提供的字典顺序`tuple`：

```
#include <tuple>

class Object3D
{
public:
    bool operator<(Object3D const & rhs) const
    {
        return std::tie(x, y, z) < std::tie(rhs.x, rhs.y, rhs.z);
    }

    // ...
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T13:22:29.070

@OP:`std::set`是一个独特的有序容器。它需要`operator<`显式传递一个或一个比较器，这实现了严格的弱排序。

如果您*不想*对元素强加排序，*请不要*使用有序容器。`std::unordered_set`如果您只想检测唯一性而不强加排序，则可以使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T13:35:26.873

您需要提供一个比较器。你不想实施`operator<`，我同意这个决定。您不应该仅仅为了满足某些容器的约束而为您的类提供无意义的功能。谢天谢地，你不需要`operator<`. 但是您确实需要一个行为类似于`operator<`. 这并不一定*意味着*一个对象被认为比另一个对象少。它只需要提供严格的弱排序。你可以给它任何你想要的名字。例如：

```
bool Compare_by_x_then_y_then_z(const Object3D& lhs, const Object3D& rhs)
{
    if (lhs.getX() != rhs.getX()) return lhs.getX() < rhs.getX();
    if (lhs.getY() != rhs.getY()) return lhs.getY() < rhs.getY();
    return lhs.getZ() < rhs.getZ();
} 
```

然后将此函数提供给集合的构造函数：

```
typedef bool(*compT)(const Object3D&, const Object3D&);
std::set<Object3D,compT> objects(Compare_by_x_then_y_then_z); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T13:09:32.527

您*必须*提供一个比较运算符，因为`std::set`它的实现需要它。

一个简单的小于运算符如下所示：

```
bool Object3D::operator<(const Object3D& other) const {
    if(x != other.x) return x < other.x;
    if(y != other.y) return y < other.y;
    return z < other.z;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-31T13:12:07.437

您必须声明运算符<。你可以这样做

```
bool operator<(const Object3D& a, const Object3D& b)
{
    if (a.x < b.x) return true;
    if (b.x < a.x) return false;
    if (a.y < b.y) return true;
    if (b.y < a.y) return false;
    if (a.z < b.z) return true;
    if (b.z < a.z) return false;
    return false;
} 
```

这是任意的，但这并不重要。只要 operator< 给出一致的顺序，你就可以了。

# php - Facebook Connect 服务器端 PHP SDK 登录

> ID：13158696
> 
> 赞同：0
> 
> 时间：2012-10-31T13:07:34.547
> 
> 标签：php, jquery, facebook, facebook-php-sdk

使用以下代码，我可以通过 Facebook 执行登录过程，但永远不会完成（即我的应用程序永远不会收到令牌）。分不清断线。
网址（[www.manlymoose.com](http://www.manlymoose.com)）。

配置文件

```
<?php
session_start();
$appID='*******';
$appSecret='*******';
if($_SERVER['HTTP_HOST']=='localhost'){
    $base_url='http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];
}else{
    $base_url='http://'.$_SERVER['HTTP_HOST'];  
}
?> 
```

索引.php

```
<?php 
session_start();    
if(!isset($_SESSION['User']) && empty($_SESSION['User'])){
    $fbimg = '<img src="images/facebook.png" id="facebook" style="cursor:pointer;float:left;" />';
}else{
$fbimg = '<img src="https://graph.facebook.com/'. $_SESSION['User']['id'] .'/picture" width="30" height="30"/><div>'.$_SESSION['User']['name'].'</div><a href="'.$_SESSION['logout'].'">Logout</a>';
}
?>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title></title>
<link href="scripts/style.css" type="text/css" rel="stylesheet"/>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="js/oauthpopup.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('#facebook').click(function(e){
        $.oauthpopup({
            path: 'login.php',
            width:600,
            height:300,
            callback: function(){
                window.location.reload();
            }
        });
        e.preventDefault();
    });
});
</script>
</head>
<body>
    <?php echo $fbimg; ?>
</body>
</html> 
```

登录.php

```
<?php
require 'config.php';
require 'lib/facebook/facebook.php';

$facebook = new Facebook(array(
        'appId'     => $appID,
        'secret'    => $appSecret,
        ));     
$user = $facebook->getUser();
if($user){

    try{
        $user_profile = $facebook->api('/me');
        $params = array('next' => 'http://www.manlymoose.com/logout.php');
        //logout url
        $logout = $facebook->getLogoutUrl($params);
        $_SESSION['User']=$user_profile;
        $_SESSION['logout']=$logout;
    }catch(FacebookApiException $e){
        error_log($e);
        $user = NULL;
    }       
}
if(empty($user)){
//login url 
$loginurl = $facebook->getLoginUrl(array(
        'scope'         => 'email,read_stream, publish_stream, user_birthday, user_location, user_work_history, user_hometown, user_photos',
        'redirect_uri'  => $base_url,
        'display'=>'popup'
        ));
header('Location: '.$loginurl);
}
?>
<!-- after authentication close the popup -->
<script type="text/javascript">
window.close();
</script> 
```

oauthpopup.js

```
(function (jQuery) {
    jQuery.oauthpopup = function (options) {
        options.windowName = options.windowName || 'ConnectWithOAuth';
        options.windowOptions = options.windowOptions || 'location=0,status=0,width='+options.width+',height='+options.height+',scrollbars=1';
        options.callback = options.callback || function () {
            window.location.reload();
        };
        var that = this;
        that._oauthWindow = window.open(options.path, options.windowName, options.windowOptions);
        that._oauthInterval = window.setInterval(function () {
            if (that._oauthWindow.closed) {
                window.clearInterval(that._oauthInterval);
                options.callback();
            }
        }, 1000);
    };
})(jQuery); 
```

# php - AWS amazon SES 突然停止工作

> ID：13158697
> 
> 赞同：4
> 
> 时间：2012-10-31T13:07:36.717
> 
> 标签：php, codeigniter, amazon-web-services

从星期一（2012 年 10 月 30 日）开始，我无法从 aws.amazon SES 发送邮件，之前它工作正常，但突然停止工作。我得到以下是错误

```
A PHP Error was encountered

Severity: User Warning

Message: SimpleEmailService::getSendQuota(): Sender - RequestExpired: Request timestamp: Wed, 31 Oct 2012 11:50:32 UTC expired. It must be within 300 secs/ of server time. Request Id: e472fb5a-2351-11e2-8183-8138c6c456cf

Filename: libraries/ses.php

Line Number: 363 
```

但是同样的代码在另一台服务器上可以正常工作有什么问题请帮忙，我找不到解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T13:25:59.370

作为一个快速建议，通过向 SES 发出 HTTP 请求来检查 SES 时间（例如 wget -S "https://email.us-east-1.amazonaws.com"），并与您的服务器时间进行比较。更新服务器的时间（如果您还没有，请使用 NTP）并查看问题是否自行解决。谢谢@cyberx86。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T13:27:01.570

正如专家所建议的那样：-英国（可能还有其他国家）在您的错误开始发生的同一天切换到冬季时间，并且错误说时间错误超过 300 秒。我会投票赞成这是根本原因

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T08:02:04.683

我能想到的一个原因是亚马逊邮件服务器和您的服务器之间的时间差异。

执行以下操作

1) 获取亚马逊邮件服务器时间

wget -S " [https://email.us-east-1.amazonaws.com](https://email.us-east-1.amazonaws.com) "

2）获取您的服务器时间

wget -S " [http://yourdomain.com](http://yourdomain.com) "

如果时间差超过 300 秒，请更改您的服务器时间 3) sudo date *nnddhhmmyyyy.ss* WHERE

```
 nn- month between 01 - 12
      dd- day between 01 - 31
      hh- hour between 01 - 12
      mm- minute between 01 - 60
      yyyy - year
      ss - Seconds between 01 - 60 
```

# wcf - 强制 WCF 在反序列化期间使用现有缓冲区？

> ID：13158700
> 
> 赞同：3
> 
> 时间：2012-10-31T13:07:41.837
> 
> 标签：wcf, serialization, deserialization, datacontractserializer, xmlserializer

我也在这里寻找其他一些主题，但我还没有找到解决我的问题的方法。

想象一下：
我有一个非常简单`ServiceContract`的不同`OperationContracts`. 其中之一`OperationContracts`是一个简单的用例“下载数据传输对象”。

服务看起来像：

```
...
[OperationContract]
DTO Download(strind Id)
... 
```

DTO 类看起来像：

```
[DataContract]
public class DTO
{
     [DataMember]
     public string Id;

     [DataMember]
     public byte[] Data;
} 
```

当然它很简单而且效果很好，但是我需要`byte[]`自己在DTO中分配！

我的代码是框架组件的一部分，它在大量内存限制下并行工作。我不希望 WCF 分配所有 byte[] 并且我不希望 ManagedHeap 再次释放它们。我需要共享和重用所有并行的现有缓冲区。

因此，当我完成序列化时，我将重用服务器端的缓冲区。在客户端，我希望 WCF 读入**我的缓冲区**！

我尝试了一些使用 own`XmlObjectSerialiers`和 own 的解决方案`OperationBehaviors`，但它还没有奏效。

有没有人有任何其他想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:35:49.420

更新：

我找到了第一个使用自己的 Serializer:XmlObjectSerializer、自己的 IContractBehavior 和自己的 DataContractSerializerOperationBehavior 的工作解决方案。

在反序列化期间从 XmlDictionaryReader 读取时，我使用以下代码段：

```
public bool DeserializeFrom(XmlDictionaryReader source)
{
     ...
     readBytes = source.ReadElementContentAsBase64(MyOwnAlreadyAllocatedBuffer, offset, toRead);
     ...
} 
```

这可行，但它仍然比 DataContractSerializer 慢一点。

还有其他选择吗？

注意：我只想传输已经二进制序列化的数据！

# php - 无法从 php 调用 sql 连接

> ID：13158701
> 
> 赞同：2
> 
> 时间：2012-10-31T13:07:41.137
> 
> 标签：php, sql, ubuntu

（运行 ubuntu 服务器 12.04）

尤其是这一行在 php 中给我带来了问题：

```
$con = mysql_connect("localhost:3306","root","root"); 
```

从打开错误报告开始，我只得到了这个返回（因为它在该行被杀死，之后什么都不会打印）：

```
Fatal error: Call to undefined function mysql_connect() in /var/www/sql/login.php on line 7 
```

我不知道从那里去哪里，因为它刚刚在我提供的线路处被杀死。我也只使用了“localhost”，并且我已经从命令行成功登录。这可能是 php 权限问题，还是类似配置的问题？如果是这样，那会在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T13:11:03.167

我认为这是因为您的 php 环境中没有加载 mysql 扩展。

要解决此问题，请在您的 ubuntu 中打开 shell 并键入：

```
sudo apt-get install php5-mysql libapache2-mod-auth-mysql 
```

之后，只需使用以下命令重新启动 apache：

```
sudo /etc/init.d/apache2 restart 
```

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:09:47.890

您的 PHP 版本是在没有 MySQL 支持的情况下编译的。您需要按照包含 MySQL的[设置说明重新编译它。](http://www.php.net/manual/en/mysql.installation.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:09:32.053

该`php_mysql`库未安装在您的服务器上。尝试查看`phpinfo()`它是否真的丢失的输出。

# java - 在 JAVA 中使用 JSOUP 从 HTML 中提取 CSS 样式

> ID：13158705
> 
> 赞同：5
> 
> 时间：2012-10-31T13:07:59.730
> 
> 标签：java, jsoup

任何人都可以帮助使用 Java 中的 Jsoup 从 HTML 中提取 CSS 样式。例如，在下面的 html 中，我想提取**.ft00 和 .ft01**

```
<HTML>
<HEAD>
<TITLE>Page 1</TITLE>

<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<DIV style="position:relative;width:931;height:1243;">
<STYLE type="text/css">
<!--
    .ft00{font-size:11px;font-family:Times;color:#ffffff;}
    .ft01{font-size:11px;font-family:Times;color:#ffffff;}
-->
</STYLE>
</HEAD>
</HTML> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T13:09:46.167

如果样式嵌入在您的元素中，您只需使用`.attr("style")`.

JSoup 不是 Html 渲染器，它只是一个 HTML 解析器，因此您必须从检索到的`<style>`标记 html 内容中解析内容。您可以为此使用简单的正则表达式；但并非在所有情况下都有效。您可能希望为此任务使用 CSS 解析器。

```
public class Test {
    public static void main(String[] args) throws Exception {
        String html = "<HTML>\n" +
                "<HEAD>\n"+
                "<TITLE>Page 1</TITLE>\n"+
                "<META http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n"+
                "<DIV style=\"position:relative;width:931;height:1243;\">\n"+
                "<STYLE type=\"text/css\">\n"+
                "<!--\n"+
                "    .ft00{font-size:11px;font-family:Times;color:#ffffff;}\n"+
                "    .ft01{font-size:11px;font-family:Times;color:#ffffff;}\n"+
                "-->\n"+
                "</STYLE>\n"+
                "</HEAD>\n"+
                "</HTML>";

        Document doc = Jsoup.parse(html);
        Element style = doc.select("style").first();
        Matcher cssMatcher = Pattern.compile("[.](\\w+)\\s*[{]([^}]+)[}]").matcher(style.html());
        while (cssMatcher.find()) {
            System.out.println("Style `" + cssMatcher.group(1) + "`: " + cssMatcher.group(2));
        }
    }
} 
```

将输出：

```
Style `ft00`: font-size:11px;font-family:Times;color:#ffffff;
Style `ft01`: font-size:11px;font-family:Times;color:#ffffff; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T13:26:06.753

试试这个：

```
Document document = Jsoup.parse(html);
String style = document.select("style").first().data(); 
```

然后，您可以使用 CSS 解析器来获取您感兴趣的详细信息。

*   [http://www.w3.org/Style/CSS/SAC](http://www.w3.org/Style/CSS/SAC)
*   [http://cssparser.sourceforge.net](http://cssparser.sourceforge.net)
*   [https://github.com/corgrath/osbcp-css-parser#readme](https://github.com/corgrath/osbcp-css-parser#readme)

# symfony - Symfony 表单只读字段

> ID：13158707
> 
> 赞同：18
> 
> 时间：2012-10-31T13:08:06.987
> 
> 标签：symfony, symfony-forms

`read-only`我应该如何使用 Symfony 表单组件呈现字段？

这就是我试图这样做无济于事的方式：

**Symfony 2**

```
$builder
    ->add('descripcion', 'text', array(
        'read_only' =>'true'
    ));
} 
```

**Symfony 3**

```
$builder
    ->add('descripcion', TextType::class, array(
        'read_only' => 'true'
    ));
} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2017-06-15T14:48:19.473

提供的答案都以**Symfony 3**上的这个异常结束：

> 未捕获的 PHP 异常 Symfony\Component\OptionsResolver\Exception\UndefinedOptionsException：“选项“read_only”不存在。

正确的做法是利用`attr`场地上的财产：

```
->add('descripcion', TextareaType::class, array(
    'attr' => array(
        'readonly' => true,
    ),
)); 
```

如果您希望在表单提交期间有一个数据未发布到服务器的字段，您应该使用`disabled`如下：

```
->add('field', TextareaType::class, array(
    'disabled' => true,
)); 
```

在您的表单构建器对象上。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-04-18T12:35:42.123

我相信将表单字段呈现为只读并防止表单接受请求中的新值的唯一安全方法如下。

```
$builder->add(
    'description',
    TextType::class,
    ['disabled' => true]
); 
```

另一个使用`['attr' => ['readonly' => true]]`or的建议`['attr' => ['disabled' => true]]`会让你容易受到伪造请求的攻击。

后两个选项都将在字段上设置`readonly`or 或`disabled`属性，但如果包含在请求中，您的表单仍将接受该字段的新值。

只有上面的第一个选项既会禁用表单字段，也会阻止您的表单接受请求中字段的新值。

我已经用 Symfony Form 3.4 对此进行了测试。我不知道 4 的行为是否相同。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-05-20T08:26:43.043

您已将只读属性声明为字符串，它必须是布尔值。

**去掉周围的引号`true`**

像这样：

```
->add('descripcion','text',array('read_only' => true)) 
```

真的，没有引号。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-09-19T08:03:14.263

Symfony 4 只允许在表单域中使用“禁用”选项。但它与“只读”不同。

*   已禁用 - 用户无法编辑字段，并且在表单提交期间未传递其值。
*   只读 - 用户无法编辑字段，但其值在表单提交期间传递。

我为“只读”找到的唯一解决方案是：

```
->add('fieldname', TextType::class, [
            'label' => false,
            'attr'=> [ 'readonly' => true ]
        ]) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-06-27T18:34:00.033

*自 Symfony 2.8 起，*read_only已被弃用。*所以请改用*只读*。并为此属性提供布尔值*

 *```
->add('','text',array('readonly' => true)) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-03-08T14:11:26.220

更新：从 Symfony 3.0 开始，*只读*值应该在*attr*选项中设置。 [http://symfony.com/doc/2.8/reference/forms/types/form.html#read-only](http://symfony.com/doc/2.8/reference/forms/types/form.html#read-only)

也可以使用disabled*选项。*

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-01T10:35:54.593

建议使用 disabled 选项，因为根据文档，任何提交的值都将被忽略：[https ://symfony.com/doc/current/reference/forms/types/text.html#disabled](https://symfony.com/doc/current/reference/forms/types/text.html#disabled)

```
$builder->add('descripcion', TextType::class, [
    'disabled' => 'true',
]); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-17T08:56:01.670

`readonly`而不是`read_only`。你应该`attr`像这样做这个选项：

```
->add('', TextType::class, array('attr'=> array('readonly' => true))) 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-12-12T23:46:12.693

对于实体类型字段禁用工作正常

```
->add('organizacion', EntityType::class, array(
    'class' => 'AppBundle:Organizacion',
    'label' => 'Institución/Organización',
    'choice_label' => 'nombre',
    'disabled' => true
)) 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2017-09-04T12:01:15.503

让我添加一些其他答案无助于管理的内容。在许多情况下，作为字段处理但“调整”以禁用版本可能会起作用。但是，至少很难以某些完全防止编辑的格式呈现（即呈现为标签）。

如何解决这个问题？我所做的是将字段定义为 HiddenType，并在模板中使用`{{ form.vars.value.myfield }}`或`{{ item.myfield }}`将“item”作为实体对象进行渲染，包含在您能想到的任何内容中，就像任何其他 HTML 元素一样。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2018-08-29T12:52:17.287

只有“禁用”选项不会导致错误

```
$builder
    ->add('descripcion', TextType::class, array(
        'disabled' => 'true'
    ));
} 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2018-08-09T20:06:22.377

其他解决方案可能是：

```
->add('value', TextType::class, ['disabled' => true]): 
```

取自：[http ://symfony.com/doc/current/reference/forms/types/text.html#disabled](http://symfony.com/doc/current/reference/forms/types/text.html#disabled)

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2012-10-31T13:22:18.527

如果 familia 和proveedor 是与其他实体的关系，我认为它们不应该是文本类型。尝试取消他们的类型或更改为*实体*类型并检查它是否有效。*

# javascript - 使用 Underscore 的 _.debounce() 方法

> ID：13158708
> 
> 赞同：8
> 
> 时间：2012-10-31T13:08:11.903
> 
> 标签：javascript, underscore.js

我正在尝试使用 UnderscoreJS，它是`_.debounce()`停止回调函数以在 keyup 事件上重复触发的方法。我这样做是因为每次您开始输入时，都会启动 AJAX 调用，因此为您输入的每个字符进行调用会非常昂贵（：

这就是我使用该方法的方式：

```
onTypeEvents : function(selector, callback) {
        return $(selector).on('keyup', function(event){

            var that = $(this).val().trim();

            switch(event.keyCode) {
                case 8:
                    if(that !== '') {
                        if(that.length >= 2) {
                            return _.debounce(function() { callback.apply(that, [ that ]) }, 150);
                        } else {
                            return _.debounce(function() { callback.apply(null, [ null ]) }, 150);
                        };
                    };
                    break;
                case 9:
                    break;
                case 13:
                    break;
                case 27:
                    break;
                case 37:
                    break;
                case 38:
                    break;
                case 39:
                    break;
                case 40:
                    break;
                default:
                    if(that !== '') {
                        if(that.length >= 2) {
                            return _.debounce(function() { callback.apply(that, [ that ]) }, 150);
                        } else {
                            return _.debounce(function() { callback.apply(null, [ null ]) }, 150);
                        };
                    };
                    break;
            };

            event.preventDefault();
            event.stopPropagation();
        });
    }, 
```

但显然它不起作用，因为没有任何东西再启动，但是如果我删除该方法，我的代码就可以正常工作（：那么那里可能出了什么问题？我做错了还是我错过了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-31T13:15:45.340

这个想法是去抖动 keyup 回调本身。这样，您的代码只会对用户在停止输入之前输入的最后一个键做出反应。就像是：

```
$(selector).on('keyup', _.debounce(function (e) {
  switch (e.keyCode) {
    /* your code */
  }
}, 500)); 
```

# hibernate - 实体中子集合的休眠投影

> ID：13158710
> 
> 赞同：1
> 
> 时间：2012-10-31T13:08:22.613
> 
> 标签：hibernate

这是一个非常简化的示例，说明了我尝试使用 Hibernate 和投影来完成的工作。以下是一些示例表：

```
class User{
    int id;
    String firstName;
    String lastName;
    List<Address> address ;
}

class Address{
    int id;
    String city;
    String state;   
    User user;
} 
```

这就是我定期选择数据的方式。

```
Criteria crit = getSession().createCriteria("User");
crit.add(CriterionUtils.in("id", new Object[]{1,2,3}));   
criteria.list(); 
```

这有效并返回完整的用户对象和完整的地址列表。这将加载带有地址对象列表的完整用户对象。

现在我很难理解 Projections 如何与 Hibernate 一起工作。这是我的目标。我有必须加载的大型实体，但我不需要所有数据，我只需要加载几列和一个子集合，我不需要所有其他数据。本质上，我想用有限的数据加载同一个对象。但是，我不想要 User 对象的 firstName 和 lastName 因为我不需要它们；我想要一个“更轻”的用户对象，它加载了完整的地址列表和用户的 id。请记住，我的目标不是加载地址列表，而是加载具有地址列表的用户对象

如果我试试这个：

```
ProjectionList proList = Projections.projectionList();
proList.add(Projections.property("id"));
criteria = criteria.setProjection(proList);      
criteria.list(); //an Object[] of just the ids 
```

我只得到 id 而没有 User 对象！

如果我试试这个：

```
ProjectionList proList = Projections.projectionList();
proList.add(Projections.property("id"));
proList.add(Projections.property("address"));
criteria = criteria.setProjection(proList);      
criteria.list(); //this actually fails with an Array out of bounds exception 
```

这只是失败！

Projections 似乎只返回您想要的确切数据，而不是实体。我期待用户对象返回部分填充的字段。

也许我做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:34:43.833

你做错了，我猜。不确定您真正想要达到什么，但听起来您需要在映射中进行一些延迟/代理加载，而不是投影。

`lazy ="true"`将加载规则设置为属性或`lazy="proxy"`集合的不必要列。然后，在您尝试在代码中使用它们之前，它们不会从数据库中加载。

还要记住检查 fetch 方法`fetch="select"`（

如果你需要那个投影，你应该从地址开始，因为你的查询中有一些连接。我的建议是 - 先尝试用 SQL 编写查询，而不是把它放在 Hibernate 的 Cirteria api 中（至少在你了解它的工作原理以及如何正确使用它之前）。

# ruby-on-rails - Rails 3.0 在每个循环中都有“或”语句

> ID：13158715
> 
> 赞同：4
> 
> 时间：2012-10-31T13:08:28.717
> 
> 标签：ruby-on-rails, ruby

我正在尝试构建一个比较两个对象的查询，如果它们相同`id`，则不会获取记录。我所拥有的是：

```
@channels.each do |channel|
  unless @guide_channels.where(:id => channel.id).exists?
    @dropdown_channels = @dropdown_channels.where(:id => channel.id)
  end
end 
```

这会创建查询，但在每个值之间放置一个 AND，这不是我想到的。我想要“或”运算符。是否有我可以使用的“orwhere”功能，或者是否有更好的方法可以通过一些比较功能来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:49:38.820

关键是对象的`.where()`方法`AR::Relation`将条件添加到一组条件中，然后`AND`在执行查询时将这些条件组合在一起。

你需要做的是这样的查询`NOT IN`：

```
# select all the ids for related @guide_channels
# if @channels comes from a query (so it's a ActiveRecord::Relation):
guide_ids = @guide_channels.where(:id => @channels.pluck(:id)).pluck(:id)
#  use .where(:id => @channels.map {|c| c.id}) instead if @channels is just an array

# then use the list to exclude results from the following.
@dropdown_channels = @dropdown_channels.where("id NOT IN (?)", guide_ids.to_a) 
```

第一个查询将累积在 中具有条目的频道的所有 ID `@guide_channels`。第二个将使用第一个的结果从下拉列表的结果中排除找到的频道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:44:03.047

这种奇怪的行为是由于 ActiveRecord 对范围的惰性评估。发生的事情是这条线

```
@dropdown_channels = @dropdown_channels.where(:id => channel.id) 
```

在您实际使用 的值之前不会向数据库发送查询`@dropdown_channels`，并且当您这样做时，它将所有条件连接到一个大查询中，这就是您在条件之间获得 AND 的原因。

为了强制 ActiveRecord 预先加载范围，您可以使用`all`范围或`first`范围，例如：

```
@dropdown_channels = @dropdown_channels.where(:id => channel.id).first 
```

这将强制 ActiveRecord 立即计算返回结果的现场查询，而不是累积延迟评估的范围。

另一种方法可能是累积所有这些 channels_id 并稍后在一个查询中获取它们，而不是为每个查询。这种方法与数据库资源相关的成本效益更高。为了实现这一点：

```
dropdown_channels_ids = []
@channels.each do |channel|
  unless @guide_channels.where(:id => channel.id).exists?
    dropdown_channels_ids << channel.id
  end
end
@dropdown_channels = @dropdown_channels.where(:id => dropdown_channels_ids) 
```

# powershell - 检查 BlobStorage 中以 Powershell 中的字符串开头的文件名

> ID：13158716
> 
> 赞同：2
> 
> 时间：2012-10-31T13:08:34.273
> 
> 标签：powershell, azure, azure-storage, azure-blob-storage

我目前正在使用 Powershell 脚本来管理 Windows-Azure 中的 BlobStorage 内容。我想要一个脚本来读取文本文件的内容并显示 BlobStorage 中以此内容开头的文件名。我正在寻找一个通配符搜索，它列出了 BlobStorage 中的名称，该名称以文本文件中指定的内容开头。

我想到了一个循环，它搜索文本文件中的每一行，并在 BlobStorage 中查找以文本文件中指定内容开头的文件名。

**如果我们在文本文件中有例如 2 行*：*

43345-sdfssd-42342-sdfsf

32423-asdsad-23424-dghfs

*BlobStorage 中的文件名是*：

43345-sdfssd-42342-sdfsf-250.PNG

43345-sdfssd-42342-sdfsf-650.PNG

92323-asadad-12342-sdfds-1600.PNG

我想将文本文件中的 ID 与 BlobStorage 文件的名称进行比较，并显示 BlobStorage 中包含此 ID 的所有文件的完整文件名。

**为了进一步说明这一点，我假设**：

```
foreach (ID in textfile) 
{                           

  files = find files in BlobStorage with name that starts with ID (ListBlobsWithPrefix?)

  foreach (textfile in files) 
  {                
            Write filename to console
  }

} 
```

到目前为止，我已经成功地连接到我的 blobstorage 并且它工作正常，我可以在图像容器中列出 Blob 的名称。我已经检查过一切都可以读取文本文件并将内容打印到控制台。我没有设法做的是将文本文件 ID 与 BlobStorage 中 Blob 的文件名进行比较，并在以 ID 开头的 BlobStorage 中打印结果。我已经尝试了很多解决方案，但没有任何运气。

**到目前为止，我已经想出了这个代码：**

```
#Make a connection to my BlobStorage
$SAN = "XX"
$SAK="X"

$creds = New-Object Microsoft.WindowsAzure.StorageCredentialsAccountAndKey($SAN, $SAK)
$client = New-Object      Microsoft.WindowsAzure.StorageClient.CloudBlobClient("https://$SAN.blob.core.windows.net",$creds)

$bro = New-Object Microsoft.WindowsAzure.StorageClient.BlobRequestOptions
$bro.UseFlatBlobListing = $true

#Add $images blobcontainer and use flatbloblisting to list blobnames
$imagecontainer = $client.GetBlobDirectoryReference("images")
$images = $imagecontainer.ListBlobs($bro)

#Add textfile and assign it to a variable
$InputFile = Get-Content C:\transcript\hej.txt

#Loop to find everything in the input file and compare it to matching filenames in  blobstorage. Return filenames that starts with the ID/contains the ID in the inputfile.
foreach ($ID in Get-Content $InputFile) { 
```

感谢进一步的帮助/解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T03:37:59.947

免责声明：我没有使用 Azure 的经验，但快速查看 MSDN 文档让我相信这会起作用：

```
foreach ($ID in $InputFile)
{
    $image_matches = $images | Where-Object {$_.Name -match '^$ID'}

    # process matching images here
} 
```

# javascript - 使用 javascript 将歌曲上传到 Soundcloud 帐户

> ID：13158717
> 
> 赞同：5
> 
> 时间：2012-10-31T13:08:34.023
> 
> 标签：javascript, soundcloud

我正在尝试使用 soundcloud API 和 javascript 将歌曲上传到 soundcloud。但我似乎无法做到。这是我的 javascript

```
function ADDTRACK() {
    var test = document.getElementById('SongTrack').files[0];
    SC.get("http://api.soundcloud.com/users/redstr/tracks.json?client_id=3200814596a029b47877e63edfe6066c", {
        limit: 1
    }, function(tracks) {
        SC.POST({
            tracks: {
                description: 'This track was recorded in Berlin',
                asset_data: '@' + test
            }
        });
    });
} 
```

这是我的 HTML 上传

```
 <input type="file" id ="SongTrack" name="pic" accept="audio/*" />
      <button type="button"   onclick="ADDTRACK()" />Add TRACK</button> 
```

我没有错误，所以有人能指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:19:35.953

来自：http: [//developers.soundcloud.com/docs/api/guide#uploading](http://developers.soundcloud.com/docs/api/guide#uploading)

```
// the JavaScript SDK does not by itself have access
// to the filesystem, so instead this example records
// some audio in the browser and uploads it.

        SC.connect(function() {
          SC.record({
            start: function() {
              window.setTimeout(function() {
                SC.recordStop();
                SC.recordUpload({
                  track: { title: 'This is my sound' }
                });
              }, 5000);
            }
          }    
    }); 
```

所以你不能直接用javascript上传曲目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-21T20:56:33.257

我最终也想通过 Javascript SDK 上传音频文件，所以我对 PHP 和 JS SDK 进行了逆向工程以使其工作。

首先，您应该确保 Javascript SDK 正常工作。我们仅将它用于身份验证令牌（使用未记录的方法）。除了令牌之外，其余部分都是使用对象手动处理`$.ajax`的`FormData`。

HTML：

```
<script src="//cdn.jsdelivr.net/jquery/1.8.3/jquery-1.8.3.min.js"></script>
<script src="//connect.soundcloud.com/sdk.js"></script>
<button id="login">log in</button>
<form>
    <label>Title: <input name="title" disabled /></label><br>
    <label>File: <input name="file" type="file" accept="audio/*" disabled /></label><br>
    <button type="submit" disabled >Submit</button>
</form> 
```

Javascript：

```
SC.initialize({
    client_id: "INSERT_CLIENT_ID",
    redirect_uri: "INSERT_REDIRECT_URI"
});

$("#login").click(function(){
    SC.connect(function(){
        $('form input,form button').removeAttr('disabled');
    });
});

$('form').submit(function(e) {
    var fd = new FormData();
    fd.append('oauth_token', SC.accessToken());
    fd.append('format','json');
    fd.append("track[title]", $(this).find('input[name=title]').val());
    fd.append("track[asset_data]", $(this).find('input[name=file]').prop('files')[0]);

    $.ajax({
        url: 'https://api.soundcloud.com/v1/tracks',
        type: 'POST',
        data: fd,
        processData: false,
        contentType: false,
        xhr: function() {
            var xhr = $.ajaxSettings.xhr();
            xhr.upload.onprogress = function(e) {
                if(e.lengthComputable) {
                    var percent = Math.floor((e.loaded / e.total) * 100);
                    console.log(percent  + '% uploaded');
                }
            };
            return xhr;
        }
    }).done(function(e) {
        console.log('Upload Complete!');
        console.dir(e); // This is the JSON object of the resulting track
    });
    e.preventDefault();
}); 
```

# node.js - 如何在会话到期之前做某事（销毁）

> ID：13158719
> 
> 赞同：1
> 
> 时间：2012-10-31T13:08:36.037
> 
> 标签：node.js, session, express

嗨，我正在使用`expressjs`我的 Web 应用程序，并且我使用`session`中间件，我的问题是如何在会话到期之前做一些事情？

例如，我在会话中存储了一些东西，我将其设置`req.session.cookie.maxAge`为 60000（1 分钟），当会话超时时，我想将会话中的数据保存到磁盘，我该怎么做呢？我检查了API，该`destroy`功能仅支持`callback`...

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:51:51.177

假设您使用`connect-session`的是会话过期事件。

会话到期：

*   在客户端上（当 cookie 过时时）。在发出请求之前无法知道它，因此存在永远不会触发事件的危险。
*   在会话存储中，通常使用某种形式的生存时间。并非所有会话存储都支持事件，因此通常无法进行通知。

但是，您可以尝试使用`setTimeout()`- 当它超时时检查会话的到期日期是否足够接近现在，并执行您需要做的任何事情。

# node.js - Node.js - Facebook 从应用中心登录用户（访问网站按钮）

> ID：13158724
> 
> 赞同：1
> 
> 时间：2012-10-31T13:08:51.243
> 
> 标签：node.js, facebook, passport.js

我正在使用`Passport`和`Facebook Strategy`进行身份验证。它在我的网站上运行良好。单击*登录按钮*发出获取请求`auth/facebook/`，我成功登录用户。我在应用详细信息中有相同的网址：

![脸书登录网站](../Images/5c3fc2734b641b69dedcc02d9af93110.png)

但是，App Center`Visit Website`按钮将其添加到查询中：

```
{ fb_source: 'appcenter',
  fb_appcenter: '1',
  code:xxxxx...., // this is what i want
} 
```

单击后我收到此错误：

> “验证验证码时出错。请确保您的 redirect_uri 与您在 OAuth 对话请求中使用的相同”

我没有得到的是，这在我的网站上同时有效。*单击访问网站*按钮后，如何处理这些额外参数并登录用户？

我还发布了[另一个问题](https://stackoverflow.com/questions/13149896/node-js-passport-get-facebook-session-on-page-load)。我已经处理了一段时间了，现在无法理解它......

注意：据我所知，应用程序批准需要`Visit Button`在单击时对用户进行身份验证，并且不会提示他们使用另一条登录消息。

# windows-8 - Windows phone 8 SDK 可以安装在 Windows 8 32 位机器上吗

> ID：13158729
> 
> 赞同：14
> 
> 时间：2012-10-31T13:08:57.847
> 
> 标签：windows-8, windows-phone-8, windows-phone-8-sdk

我一直在尝试在 Windows 8 (x86) 机器上安装 Windows Phone 8 SDK。但无济于事，即使我在网站上的某个地方读到它将安装但我将无法运行模拟器。

微软是认真的，Win Phone 8 应用程序只能在 64 位机器上开发吗？

![在此处输入图像描述](../Images/63ef20a1abe76f6d28db505265a44e0d.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-31T13:12:04.473

他们清楚地表明[下载页面](http://www.microsoft.com/en-us/download/details.aspx?id=35471)上需要 x64 ：

> Windows 8 64 位 (x64) 客户端版本

我不能说有任何权威，但我怀疑这是因为模拟器使用 Hyper-V，它[也需要 x64](http://technet.microsoft.com/en-us/library/hh857623.aspx)：

> Hyper-V 需要具有二级地址转换 (SLAT) 的 64 位系统。

# linux - 如何将文本消息打印到控制台

> ID：13158731
> 
> 赞同：0
> 
> 时间：2012-10-31T13:09:07.093
> 
> 标签：linux, opengl

当我在 Linux 下从 OpenGL SuperBible 编译和运行示例程序时，没有创建控制台窗口，因此我看不到任何文本消息。这里的短信是指`printf`函数的输出。在 Windows 下确实会发生这种情况 - 运行 exe 会在渲染窗口旁边打开一个控制台窗口，并且所有文本消息都会出现在该控制台窗口中。

如何在 Linux 下将控制台消息打印到终端窗口中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:13:27.560

在终端窗口中运行它，然后您将看到输出。

如果您没有看到任何输出，请查看命令行选项（您可能必须传递`-h or --help`或作为参数）。

# forms - 测试 symfony 2 表单

> ID：13158732
> 
> 赞同：0
> 
> 时间：2012-10-31T13:09:11.923
> 
> 标签：forms, unit-testing, testing, symfony, symfony-forms

我开发了新类型，但我不知道如何测试它。断言注释未加载且未调用验证。任何人都可以帮助我吗？

```
class BarcodeType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->
            add('price');
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Bundles\MyBundle\Form\Model\Barcode',
            'intention'  => 'enable_barcode',
        ));
    }

    public function getName()
    {
        return 'enable_barcode';
    }
} 
```

A 具有以下用于存储表单数据的模型。

```
namepspace Bundles\MyBundle\Form\Model;
class Barcode
{
    /**
     * @Assert\Range(
     *      min = "100",
     *      max = "100000",
     *      minMessage = "...",
     *      maxMessage = "..."
     * )
     */
    public $price;
} 
```

我开发了一些这样的测试，表单没有得到有效的数据，但它是有效的！（因为未应用注释）我尝试添加 ValidatorExtension 但我不知道如何设置构造函数参数

```
 function test...()
    {
        $field = $this->factory->createNamed('name', 'barcode');
        $field->bind(
                array(
                    'price'         => 'hello',
        ));

        $data = $field->getData(); 

        $this->assertTrue($field->isValid()); // Must not be valid 

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:17:41.847

不确定为什么需要对表单进行单元测试。你不能用你的预期输出对你的实体和覆盖控制器进行单元测试验证吗？在测试实体验证时，您可以使用以下内容：

```
public function testIncorrectValuesOfUsernameWhileCallingValidation()
{
  $v =  \Symfony\Component\Validator\ValidatorFactory::buildDefault();
  $validator = $v->getValidator();

  $not_valid = array(
    'as', '1234567890_234567890_234567890_234567890_dadadwadwad231',
    "tab\t", "newline\n",
    "Iñtërnâtiônàlizætiøn hasn't happened to ", 'trśżź',
    'semicolon;', 'quote"', 'tick\'', 'backtick`', 'percent%', 'plus+', 'space ', 'mich @l'
  );    

  foreach ($not_valid as $key) {
    $violations = $validator->validatePropertyValue("\Brillante\SampleBundle\Entity\User", "username", $key);
    $this->assertGreaterThan(0, count($violations) ,"dissalow username to be ($key)");
  } 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T22:24:14.613

功能测试。假设您使用 app/console 原则生成 CRUD:generate:crud 并使用 routing=/ss/barcode，并且鉴于 maxMessage="Too high" 您可以：

```
class BarcodeControllerTest extends WebTestCase
{
    public function testValidator()
    {
        $client = static::createClient();
        $crawler = $client->request('GET', '/ss/barcode/new');
        $this->assertTrue(200 === $client->getResponse()->getStatusCode());
        // Fill in the form and submit it
        $form = $crawler->selectButton('Create')->form(array(
            'ss_bundle_eavbundle_barcodetype[price]'  => '12',
        ));

        $client->submit($form);
        $crawler = $client->followRedirect();
        // Check data in the show view
        $this->assertTrue($crawler->filter('td:contains("12")')->count() > 0);

        // Edit the entity
        $crawler = $client->click($crawler->selectLink('Edit')->link());
        /* force validator response: */ 
        $form = $crawler->selectButton('Edit')->form(array(
            'ss_bundle_eavbundle_barcodetype[price]'  => '1002',
        ));

        $crawler = $client->submit($form);
        // Check the element contains the maxMessage:
        $this->assertTrue($crawler->filter('ul li:contains("Too high")')->count() > 0);

    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-31T13:58:44.333

包含此行必须在模型中并在包含看起来像您的模型后尝试。

```
/* Include the required validators */
use Symfony\Component\Validator\Constraints as Assert;

namespace Bundles\MyBundle\Form\Model;
class Barcode
{
    /**
     * @Assert\Range(
     *      min = "100",
     *      max = "100000",
     *      minMessage = "min message here",
     *      maxMessage = "max message here"
     * )
     */
    public $price;
} 
```

# vhdl - VHDL 改变 CLK 速度

> ID：13158735
> 
> 赞同：0
> 
> 时间：2012-10-31T13:09:19.357
> 
> 标签：vhdl, fpga

从这段代码中，我创建了一个块，然后添加 CLK、KEY[0] 和 LEDR[0:15]

```
 library ieee;
use ieee.std_logic_1164.all;

--library work;
--use work.car_pkg.all;

entity knight_rider2 is
    port (  clk, resetn, clock_button : in std_logic;
        led1, led2, led3, led4, led5, led6, led7, led8, 
        led9, led10, led11, led12, led13, led14, led15 : out std_logic);
end entity knight_rider2;

architecture fsm of knight_rider2 is
    type state_types is (start, forward1, forward2, forward3, 
    forward4, forward5, forward6, forward7, forward8, forward9, 
    forward10,forward11,forward12, forward13, forward14);

    signal state: state_types;
    signal led_states : std_logic_vector(14 downto 0);

begin

             count : process(clk, resetn, clock_button)
begin
  if clock_button = '0' then
    counter   <= 0;
    fsm_pulse <= '0';
  else
    if rising_edge(clk) then
      counter     <= counter + 1;
      fsm_pulse   <= '0';
      if counter = divider then
        fsm_pulse <= '1';
        counter   <= 0;
      end if;
    end if;
  end if;
end process;

    combined_next_current: process (clk, resetn, clock_button)
    begin
        if (resetn = '0') then
            state <= start;
        elsif rising_edge(clk) then
            if fsm_pulse = '1' then
            case state is

                when start => 
                    state <= forward1;

                when forward1 =>                
                    state <= forward2;              

                when forward2 =>                    
                        state <= forward3;              

                when forward3 =>            
                        state <= forward4;              

                when forward4 =>                    
                        state <= forward5;                  

                when forward5 =>                
                        state <= forward6;                  

                when forward6 =>                    
                        state <= forward7;                  

                when forward7 =>                
                            state <= forward8;              

                when forward8 =>                    
                            state <= forward9;      

                when forward9 =>                    
                            state <= forward10;                     

                when forward10 =>                       
                            state <= forward11;

                when forward11 =>                   
                            state <= forward12;                 

                when forward12 =>                       
                            state <= forward13;

                when forward13 =>                       
                            state <= forward14;

                when forward14 => state <=start;

                when others =>
                state <= forward1;

            end case;
        end if;
    end process;

    --combinational output logic

    --internal signal to control state machine transistions

    led_select : process(state)
begin
  case state is
    when forward1 =>
     led_states <= "000000000000011";
     when forward2 =>
     led_states <= "000000000000110";
    when forward3 =>
     led_states <= "000000000001100";
    when forward4 =>
     led_states <= "000000000011000";
     when forward5 =>
     led_states <= "000000000110000";
     when forward6 =>
     led_states <= "000000001100000";
     when forward7 =>
     led_states <= "000000011000000";
     when forward8 =>
     led_states <= "000000110000000";
     when forward9 =>
     led_states <= "000001100000000";
     when forward10 =>
     led_states <= "000011000000000";
     when forward11=>
     led_states <= "000110000000000";
     when forward12=>
     led_states <= "001100000000000";
     when forward13=>
     led_states <= "011000000000000";
     when forward14=>
     led_states <= "110000000000000";
     when others =>
     led_states <= "100000000000001";

  end case;
end process;

led1 <= led_states(0);
led2 <= led_states(1);
led3 <= led_states(2);
led4 <= led_states(3);
led5 <= led_states(4);

led6 <= led_states(5);
led7 <= led_states(6);
led8 <= led_states(7);
led9 <= led_states(8);
led10 <= led_states(9);

led11 <= led_states(10);
led12 <= led_states(11);
led13 <= led_states(12);
led14 <= led_states(13);
led15 <= led_states(14);

end; 
```

但现在我想添加 KEY[1] 按钮来改变速度，例如：

第一次按下：2*f

2 次按压：4*f

3 次按压：8*f

4 按：f

5 按：2*f 等

那么，如何更改此代码以执行我想要的操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:55:36.387

您可以通过使用计数器来更改状态机的运行速率，例如：

```
-- Generate a counter at your main clock frequency
-- counter is declared as an integer.
count : process(clock, resetn)
begin
  if resetn = '0' then
    counter   <= 0;
    fsm_pulse <= '0';
  else
    if rising_edge(clock) then
      counter     <= counter + 1;
      fsm_pulse   <= '0';
      if counter = divider then
        fsm_pulse <= '1';
        counter   <= 0;
      end if;
    end if;
  end if;
end process; 
```

新信号声明如下：

```
signal fsm_pulse : std_logic;
signal counter   : integer;
signal divider   : integer; 
```

`fsm_pulse`然后，在您的 FSM 流程中，您可以使用您生成的触发状态转换：

```
combined_next_current: process (clk, resetn)
begin
    if (resetn = '0') then
        state <= start;
    elsif rising_edge(clk) then
      if fsm_pulse = '1' then
        case state is
            when start => 
                state <= forward1;
            when forward1 =>                
                state <= forward2; 

        ...

        etc (your remaining states)
      end if; 
```

只要计数器达到您选择的`fsm_pulse`分频器值，就会在单个时钟周期内将其设置为“1”。分频器值表示您希望在每个 FSM 转换之后发生的时钟周期数，例如，零分频器将使 FSM 转换为主时钟频率，而分频器为 1 将使 FSM 转换为主时钟频率减半.

# jquery - YouTube API JSON Feed 未循环播放视频 ID

> ID：13158741
> 
> 赞同：0
> 
> 时间：2012-10-31T13:09:31.403
> 
> 标签：jquery, api, mobile, youtube

我试图在 jQuery mobile ui-block 中创建 youtube 视频的 JSON 提要，但每个视频都有相同的 url，因此它为每个视频提取相同的 ID，并且我一生都无法弄清楚！我有它在线 - [http://www.abbeyshruletidyvillages.ie/app/#videos](http://www.abbeyshruletidyvillages.ie/app/#videos)。谢谢皮尔斯

```
/
// Video YouTube JSON Feed
//
function listVideos(data) {
console.log(data);
var output='';
for (var i=0; i<data.feed.entry.length; i++) {

    // Title
    var title = data.feed.entry[i].title.$t;
    // Tumbnail
    var thumbnail = data.feed.entry[i].media$group.media$thumbnail[0].url;
    // Description
    var description = data.feed.entry[0].media$group.media$description.$t;
    // Video ID
    var id = data.feed.entry[0].id.$t.substring(39);

    var blocktype = ((i % 2) === 1) ? 'b' : 'a';
    output += '<a href="#videoplayer" data-transition-"fade" onclick="playVideo(' + id + '\',\'' + title + '\',\'' + escape(description) + '\')">';
    output += '<div class="ui-block-' + blocktype + '">';

    output += '<h3 class=""movivetitle">' + title + '</h3>';
    output += '<img src="' + thumbnail + '" alt="' + title + '" />';
    output += "</a>"
    output += "</div>";
    }
$('#videolist').html(output);
}

function playVideo(id, title, description) {
    var output ='<iframe src="http://www.youtube.com/embed/'+ id +'?wmode=transparent&amp;HD=0&amp;rel=0&amp;showinfo=0&amp;controls=1&amp;autoplay=1" frameborder="0" allowfullscreen></iframe>';
    output += '<h3>' + title + '</h3>';
    output += '<p>' + unescape(description) + '</p>';
    $('#myplayer').html(output);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T10:37:36.053

使用它它有效

var description = data.feed.entry[i].media$group.media$description.$t;

```
var id = data.feed.entry[i].id.$t.substring(39); 
```

# sql-server-2008 - 何时将数据库视为“大型数据库”？

> ID：13158751
> 
> 赞同：-1
> 
> 时间：2012-10-31T13:10:01.917
> 
> 标签：sql-server-2008, tsql, database-performance

我有一个 SQL Server 2008 数据库，有一个包含 50 列的表。主键是日期时间。没有进一步的标准化，它只是一个表格，每几秒存储一次来自不同传感器的值，所以是整数和小数。所以现在，在过去的一个月里，我插入了近 560k 行。我的问题是，我什么时候会开始看到由于数据过多而导致的性能问题？

更具体地说：到目前为止，我的要求是显示（在图表中）上个月（不是这个问题的问题）。如果我总是只在上个月从数据库中获取一个由 PK 过滤的查询（如此索引），那么表有多大是否重要？

Ups，长篇大论 :) 感谢您的输入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:17:04.400

只需确保您对表运行的任何查询都在进行索引搜索，而不是扫描或表扫描。您可以让 SSMS 生成一个查询计划来告诉您这一点。只要执行搜索，您可能有数亿行并且仍然具有出色的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:30:39.323

如果您的表每月增长 500k+，这将迅速增长为一个大表：一年内您将拥有 6M+ 行。即使您需要的查询看起来很简单并使用索引 PK 过滤数据，我认为您可能会遇到性能问题。

例如，您可能需要对数据（计数、总和）运行聚合查询，提供与前几个月的比较，或显示过去 x 个月的趋势演变。

你可能会考虑：

*   清除策略，删除旧数据；
*   构建指标表，汇总图表所需的汇总信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T14:04:35.617

除了上面的一些建议，为了帮助减少 IO 流失，我建议确保日期字段 (PK) 是**聚集**索引。这样，上个月的所有记录都应该是连续的并且易于访问。

# jquery - 文本框的输入按键触发事件

> ID：13158752
> 
> 赞同：33
> 
> 时间：2012-10-31T13:10:03.403
> 
> 标签：jquery, asp.net, event-handling

我有以下 asp.net 文本框控件。

```
<asp:TextBox ID="txtAdd" runat="server" /> 
```

用户在此文本框中写入内容并按下`ENTER`键后，我想从代码隐藏中运行一些代码。

我该怎么办？

使用 jQuery 我捕获了`ENTER`键并触发了一些隐藏的按钮事件

```
$(document).ready(function(){ 
   $(window).keydown(function(e){
      if(e.keyCode == 13) $('#<% addbtn.ClientID %>'.click();
   }); 
}); 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2013-04-25T11:08:13.957

1.  将文本框包裹在`asp:Panel`标签内

2.  隐藏一个具有单击事件的按钮，该事件执行您想要完成的操作，并提供`<asp:panel>`具有`DefaultButton`隐藏按钮 ID 的属性。

```
<asp:Panel runat="server" DefaultButton="Button1">
   <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>    
   <asp:Button ID="Button1" runat="server" style="display:none" OnClick="Button1_Click" />
</asp:Panel> 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-10-31T13:31:28.000

ASPX：

```
<asp:TextBox ID="TextBox1" clientidmode="Static" runat="server" onkeypress="return EnterEvent(event)"></asp:TextBox>    
<asp:Button ID="Button1" runat="server" style="display:none" Text="Button" /> 
```

JS：

```
function EnterEvent(e) {
        if (e.keyCode == 13) {
            __doPostBack('<%=Button1.UniqueID%>', "");
        }
    } 
```

CS：

```
protected void Button1_Click1(object sender, EventArgs e)
    {

    } 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-08-03T11:29:14.577

您可以将文本框和按钮包装在 ASP:Panel 中，并将 Panel 的 DefaultButton 属性设置为您的提交按钮的 Id。

```
<asp:Panel ID="Panel1" runat="server" DefaultButton="SubmitButton">
    <asp:TextBox ID="TextBox1" runat="server" />
    <asp:Button ID="SubmitButton" runat="server" Text="Submit" OnClick="SubmitButton_Click" />
</asp:Panel> 
```

现在，只要焦点位于面板内，按下 enter 就会触发“SubmitButton_Click”事件。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-25T10:15:04.307

ahaliav fox 的答案是正确的，但是有一个小编码问题。
改变

```
<%=Button1.UniqueId%> 
```

到

```
<%=Button1.UniqueID%> 
```

它区分大小写。[Control.UniqueID 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.control.uniqueid.aspx)

> 错误 14“System.Web.UI.WebControls.Button”不包含“UniqueId”的定义，并且找不到接受“System.Web.UI.WebControls.Button”类型的第一个参数的扩展方法“UniqueId”（您是否缺少 using 指令或程序集引用？）

注意，在寻找答案之前，我自己尝试了该`TextChanged`事件`AutoPostBack`，尽管它几乎是正确的，但它并没有给出我想要的结果，也没有给出所问的问题。它会在失去焦点时触发，`Textbox`而不是在按下返回键时触发。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-08-19T07:51:12.590

> 我的 jQuery 驱动的解决方案如下:)

**文本元素：**

```
<asp:TextBox ID="txtTextBox" ClientIDMode="Static" onkeypress="return EnterEvent(event);" runat="server"></asp:TextBox>
<asp:Button ID="btnSubmitButton" ClientIDMode="Static" OnClick="btnSubmitButton_Click" runat="server" Text="Submit Form" /> 
```

**背后的Javascript：**

```
<script type="text/javascript" language="javascript">
    function fnCheckValue() {
        var myVal = $("#txtTextBox").val();
        if (myVal == "") {
            alert("Blank message");
            return false;
        }
        else {
            return true;
        }
    }

    function EnterEvent(e) {
        if (e.keyCode == 13) {
            if (fnCheckValue()) {
                $("#btnSubmitButton").trigger("click");
            } else {
                return false;
            }
        }
    }

    $("#btnSubmitButton").click(function () {
        return fnCheckValue();
    });
</script> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-08T09:01:22.850

```
<asp:Panel ID="Panel2" runat="server" DefaultButton="bttxt">
    <telerik:RadNumericTextBox ID="txt" runat="server">
    </telerik:RadNumericTextBox>
    <asp:LinkButton ID="bttxt" runat="server" Style="display: none;" OnClick="bttxt_Click" />
</asp:Panel> 
```

```
protected void txt_TextChanged(object sender, EventArgs e)
{
    //enter code here
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-06-23T18:43:54.940

尝试跟随： Aspx：

```
<asp:TextBox ID="TextBox1" clientidmode="Static" runat="server" onkeypress="EnterEvent(event, someMethod)"></asp:TextBox>    
<asp:Button ID="Button1" onclick="someMethod()" runat="server" Text="Button" /> 
```

JS：

```
function EnterEvent(e, callback) {
        if (e.keyCode == 13) {
            callback();
        }
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-29T07:04:15.583

试试这个选项。

在捕获 IsPostback 之前更新 Page_Load 事件中的编码部分

```
 TextBox1.Attributes.Add("onkeydown", "if(event.which || event.keyCode){if ((event.which == 13) || (event.keyCode == 13)) {document.getElementById('ctl00_ContentPlaceHolder1_Button1').click();return false;}} else {return true}; "); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-03T02:39:48.887

```
<input type="text" id="txtCode" name="name" class="text_cs"> 
```

和js：

```
<script type="text/javascript">
$('.text_cs').on('change', function () {
var pid = $(this).val();
console.log("Value text: " + pid);
});
</script> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-09-14T09:28:07.480

```
<script type="text/javascript">
    function uniKeyCode(event) {
        var key = event.keyCode;
        if(key == 13){
            __doPostBack('ctl00$MainContent$btnFind', '');
        }
    }
</script>
<asp:TextBox ID="txt_MBCID" CssClass="form-control" placeholder="" runat="server" data-toggle="tooltip" title="ស្វែងរក-តាមរយះលេខMBWin CID" onkeydown="uniKeyCode(event)" data-placement="left"></asp:TextBox>
<asp:LinkButton ID="btnFind" AccessKey="1" runat="server" data-placement="right" title="Search_by_AccountID" data-toggle="tooltip" CssClass="input-group-addon" Text="Find" OnClick="btnFind_Click" ><span class="glyphicon glyphicon-search"></span></asp:LinkButton> 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2014-10-03T13:49:48.030

我的 2c .. 我使用过 javascript，但发现它做了一些意想不到的事情。

正如上述许多帖子所建议的那样，使用面板的 defaultButton 属性/属性。它是可靠的（简单的）并且可以在我测试过的所有浏览器中运行。

# php - 如何去除所有换行符以生成正确的 CSV？

> ID：13158753
> 
> 赞同：13
> 
> 时间：2012-10-31T13:10:04.783
> 
> 标签：php, csv

我有一个 textarea 在正常工作的网站上提交到我的数据库。但是当我从我的数据库生成一个 CSV（通过 PHP）时，所有换行符都会与生成的 CSV 混淆。任何 CSV 阅读器都会将输入中的换行符解释为新行。

我尝试了以下方法：

1.  将字段封装在引号中。

2.  这：

    ```
    $field = str_replace(array('\n', '\r', '\r\n', '\n\r'), ',', $original_field); 
    ```

3.  还有这个：

    ```
    $field = strip_tags(nl2br($original_field)); 
    ```

4.  结合以上所有方法。

无论如何，最终结果仍然是一个混乱的 CSV，它会在用户输入的任何换行符处中断。我已经设法阻止了文本区域的新换行符，但是有很多遗留的提交也需要我在 CSV 端解决这个问题。

为什么它不起作用？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-07-30T14:20:24.163

在（用户）接受的答案`user1517891`不正确之前，它将在字符串中替换两次，当有`\r\n`... 时，它将替换为两个逗号`,`。首先它将替换`\r`=> `,`，然后`\n`=> `,`。

您需要以不同的顺序使用它，如：

```
$field = str_replace(array("\r\n", "\n\r", "\n", "\r"), ',', $original_field); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-31T13:12:04.490

使用双引号：

```
$field = str_replace(array("\n", "\r", "\r\n", "\n\r"), ',', $original_field); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-31T13:20:52.800

我建议使用`preg_replace()`这个而不是`str_replace()`. 原因是可能有多个换行符和 and 的组合`\r`，`\n`我希望您只想用一个逗号替换它们。

我还建议使用`trim()`删除尾随的空白行。

```
$field = preg_replace('/[\n\r]+/', ',', trim($original_field)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-31T13:11:08.857

您必须将`\n`和类似的标签放在双引号中，否则它们将被视为简单字符串而不是换行符。

# winapi - 双缓冲时如何重新调整客户区的大小？

> ID：13158759
> 
> 赞同：0
> 
> 时间：2012-10-31T13:10:13.223
> 
> 标签：winapi, gdi

鉴于我在 GDI 中实现双缓冲：

```
static HDC hdc;
static HDC backDC;
static HBITMAP backBuffer;
static HGDIOBJ oldBitmap;
static RECT client;

case WM_CREATE:     
     hdc=GetDC(hWnd);
    GetClientRect(hWnd, &client);
    backDC=CreateCompatibleDC(hdc);         
    backBuffer=CreateCompatibleBitmap(hdc,client.right,client.bottom);
    oldBitmap=SelectObject(backDC,backBuffer);
    ReleaseDC(hWnd,hdc);

case WM_PAINT:

Rectangle(backDC, 0, 0,client.right,client.bottom); // displays rectangle the
 size of client to draw on it
      hdc = BeginPaint(hWnd, &ps);  
      BitBlt(hdc,0,0,client.right,client.bottom,backDC,0,0,SRCCOPY);
    // TODO: Add any drawing code here...
       EndPaint(hWnd, &ps); 
```

如何处理调整大小？我试图做的一件事是

```
case WM_SIZE:   
client.right=LOWORD(lParam);
client.bottom=HIWORD(lParam);
    SendMessage(hWnd,WM_CREATE,NULL,NULL); 
```

它的作用是，一旦我收到带有新客户端坐标的 resize 消息，它就会将消息发送到 WM_CREATE 并且它实际上可以工作....但是！它会造成大量泄漏，因为我基本上每次都会创建一个新位图而不会破坏它。有人可以告诉我是否有更好的方法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T17:15:23.500

保留后台缓冲区是一种并不总是需要的优化。您可以在 WM_PAINT 处理程序中创建它（到 GetClientRect 的大小），对其进行绘制，从它blit 到实际的窗口 DC，然后进行清理。没有泄漏。所有消息处理程序之间没有功能分布。没有全局变量。干净整洁。

如果您确实想保留一个，我会上课。构造函数采用大小。析构函数清理一切。在 WM_SIZE 上，构造一个新的作为本地堆栈变量，与旧的交换，并让临时堆栈的析构函数清理一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:50:06.770

我建议将后台缓冲区设置为固定大小（通常是屏幕大小），然后使用`StretchBlt`（或者`StretchDIBits`如果您使用的是 DIB）在显示表面上以适当的大小呈现它。

这样，您就不必担心重新分配后台缓冲区。

# android - 获取 JSON 对象有时会使应用程序崩溃

> ID：13158769
> 
> 赞同：0
> 
> 时间：2012-10-31T13:10:55.563
> 
> 标签：android

这是我获取 JSON 数组的代码：

```
 public void download_vse_igralce(View view)
{
    mylist.clear();  //sem dal v oklepaje
    String result = "";
    //the year data to send
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("year","1980"));
     InputStream is = null;
    //http post
    try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://gregor-apps.com/ubs/pokazi_vse_igralce.php");
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
             is = entity.getContent();
    }catch(Exception e){
            Log.e("log_tag", "Error in http connection "+e.toString());
    }

    //convert response to string
    try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
            }
            is.close();

            result=sb.toString();
    }catch(Exception e){

            Log.e("log_tag", "Error converting result "+e.toString());
    }

    //parse json data
    try{
        {
            JSONArray jArray = new JSONArray(result);
            for(int i=0;i<jArray.length();i++){
                    json_data = jArray.getJSONObject(i);

                    Log.i("log_tag","id: "+json_data.getInt("id")+
                            ", ime: "+json_data.getString("ime")+
                            ", priimek: "+json_data.getString("priimek")+
                            ", pozicija: "+json_data.getString("pozicija")
                            );

                            HashMap<String, String> map = new HashMap<String, String>();

                    map.put("id",  json_data.getString("id"));                    
                    map.put("firstname",  json_data.getString("ime"));                     
                    map.put("lastname",  json_data.getString("priimek"));   
                    map.put("position",  json_data.getString("pozicija"));  
                    map.put("height",  json_data.getString("height"));  
                    map.put("weight",  json_data.getString("weight"));  
                    map.put("hometown",  json_data.getString("hometown"));  
                    map.put("birthdate",  json_data.getString("birthdate"));    
                    map.put("jersey",  json_data.getString("number"));  
                    map.put("picture",  json_data.getString("slika"));
                    mylist.add(map);

            }
            downloadani_igralci=1;

    }

    }catch(JSONException e){
        downloadani_igralci=0;
            Log.e("log_tag", "Error parsing data "+e.toString());
    } 
    settings(view);
} 
```

一般来说，这段代码效果很好，它会根据我的需要返回 Mylist。但有时，当我调用我的函数 download_vse_igralce() 时，应用程序会停止反应（在大多数情况下，当我的互联网连接较弱时）。我在网上搜索了异步线程（或类似的东西），但我不知道如何在这段代码中实现它。我有一种方法可以让用户在加载时看到进度条？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:15:33.760

我认为主要问题是您有三个单独的 try/catch 块，但是一旦您实际捕获到异常，您就不会停止处理。例如，您首先进行 POST，如果失败，您仍然尝试读取输出。相反，您应该`return;`在 catch 块中停止处理。

AsyncTasks 也很好，从 4.0 开始需要，但不是解决问题的方法。你也应该调查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:19:23.927

像这样的东西：

```
public void download_vse_igralce(View view){
  mylist.clear(); 
  JSONParserTask task = new JSONParserTask();
  task.execute();
}

private class JSONParserTask extends AsyncTask<Void, Void, Void> {

  protected Void doInBackground( Void... ignoredParams ) {
    String result = "";
//the year data to send
ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("year","1980"));
 InputStream is = null;
//http post
try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://gregor-apps.com/ubs/pokazi_vse_igralce.php");
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
         is = entity.getContent();
}catch(Exception e){
        Log.e("log_tag", "Error in http connection "+e.toString());
}

//convert response to string
try{
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
        }
        is.close();

        result=sb.toString();
}catch(Exception e){

        Log.e("log_tag", "Error converting result "+e.toString());
}

//parse json data
try{
    {
        JSONArray jArray = new JSONArray(result);
        for(int i=0;i<jArray.length();i++){
                json_data = jArray.getJSONObject(i);

                Log.i("log_tag","id: "+json_data.getInt("id")+
                        ", ime: "+json_data.getString("ime")+
                        ", priimek: "+json_data.getString("priimek")+
                        ", pozicija: "+json_data.getString("pozicija")
                        );

                        HashMap<String, String> map = new HashMap<String, String>();

                map.put("id",  json_data.getString("id"));                    
                map.put("firstname",  json_data.getString("ime"));                     
                map.put("lastname",  json_data.getString("priimek"));   
                map.put("position",  json_data.getString("pozicija"));  
                map.put("height",  json_data.getString("height"));  
                map.put("weight",  json_data.getString("weight"));  
                map.put("hometown",  json_data.getString("hometown"));  
                map.put("birthdate",  json_data.getString("birthdate"));    
                map.put("jersey",  json_data.getString("number"));  
                map.put("picture",  json_data.getString("slika"));
                mylist.add(map);

        }
        downloadani_igralci=1;

}

}catch(JSONException e){
    downloadani_igralci=0;
        Log.e("log_tag", "Error parsing data "+e.toString());
} 
  }

  protected void onPostExecute( Void array ) {
    settings(view);
  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:58:55.533

我认为这将是因为互联网连接。有时您的应用程序无法正确下载 JSON 内容，因此当它尝试解析时，它会进入错误状态，并且您的应用程序崩溃是因为 try-catch 样式不正确

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-12T19:37:20.317

“尽管连接良好，但 asynchTask 并不能解决网络不可达的问题。”

您可以通过添加来修复它：

```
httpclient.getConnectionManager().shutdown(); 
```

这将解决“保持活动”连接的问题。

# java - 用户名的 Java 正则表达式

> ID：13158777
> 
> 赞同：0
> 
> 时间：2012-10-31T13:11:26.970
> 
> 标签：java, regex

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:31:48.530

For my answer, I want to use a simpler regex similar to yours: `[A-Z[^!]]+`, which means "At least once: (a character from A to Z) or (a character that is not '!').
Note that *"not '!'"* already includes A to Z. So everything in the outer character group(`[A-Z...`) is pointless.

Try `[\p{Alpha}'-.]+` and compile the regex with the `Pattern.UNICODE_CHARACTER_CLASS` flag.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:07:07.920

Use: (?=.*[@#$%&\s]) - Return true when atleast one special character (from set) and also if username contain space.

you can add more special character as per your requirment. For Example:

```
String str = "k$shor";
String regex = "(?=.*[@#$%&\\s])";
Pattern pattern = Pattern.compile(regex, Pattern.CASE_INSENSITIVE);
Matcher matcher = pattern.matcher(str);
System.out.println(matcher.find()); => gives true 
```

# xaml - XAML 组合框在移回集合中的项目时为空

> ID：13158778
> 
> 赞同：0
> 
> 时间：2012-10-31T13:11:26.780
> 
> 标签：xaml, observablecollection

我有一个组合框和一个标签：

```
<!-- Does not select appropriate value after moving back to current item in collection -->
        <ComboBox
            ItemsSource="{Binding Path=Items}"
            SelectedValue="{Binding Path=SelectedItem, Mode=TwoWay}"
            DisplayMemberPath="ItemName" 
            Margin="8,2,8,16" />

<!-- Displays correctly after moving back to current item in collection -->
        <Label 
        Content="{Binding Path=SelectedItem.ItemName}"/> 
```

我可以在组合框中设置一个项目，但是当我在可观察集合中来回移动到当前项目时，组合框没有像我预期的那样设置 SelectedValue（它保持为空） - 标签的内容设置正确 -并且它绑定到同一件事上。

我究竟做错了什么？

非常感谢任何帮助。

乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:28:08.297

尝试使用`ICollectionView`我在此处描述的（[答案](https://stackoverflow.com/a/13121798/345189)）。CollectionView 负责您的组合框，您可以读取和设置当前项目。只需将事件处理程序附加到`CurrentChanged`ICollectionView 中的事件。

XAML：

```
<ComboBox
      ItemsSource="{Binding Path=Items}"
      DisplayMemberPath="ItemName" 
      IsSynchronizedWithCurrentItem="True" 
      Margin="8,2,8,16" />

<Label Content="{Binding Path=CurrentItem.ItemName}"/> 
```

视图模型：

```
public class ViewModel :INotifyPropertyChanged
{
    private ObservableCollection<Item> _items= new ObservableCollection<Item>();
    private Item _currentItem;

    public ObservableCollection<Item> Items
    {
        get { return _items; }
        set { _items= value; OnPropertyChanged("Items");}
    }

    public Item CurrentItem
    {
        get { return _currentItem; }
        set { _currentItem = value; OnPropertyChanged("CurrentItem");}
    }

    public ICollectionView ItemsView { get; private set; }

    public ViewModel()
    {
        Items.Add(new Item{Id = Guid.NewGuid(), Name = "Item 1"});
        Items.Add(new Item{Id = Guid.NewGuid(), Name = "Item 2"});
        Items.Add(new Item{Id = Guid.NewGuid(), Name = "Item 3"});

        ItemsView = CollectionViewSource.GetDefaultView(Items);
        ItemsView .CurrentChanged += OnItemsChanged;
        ItemsView .MoveCurrentToFirst();
    }

    private void OnItemsChanged(object sender, EventArgs e)
    {
        var selectedItem = ItemsView .CurrentItem as Item;
        if (selectedItem == null) return;

        CurrentItem= selectedItem ;
    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    }
}

public class Item
{
    public Guid Id { get; set; }

    public string Name { get; set; }
} 
```

# jquery - 在 yepnope 之外加载 jQuery 插件

> ID：13158784
> 
> 赞同：1
> 
> 时间：2012-10-31T13:11:47.793
> 
> 标签：jquery, plugins, load, yepnope, script-tag

我正在使用 yepnope 加载 jquery 和一堆插件。

我使用以下方法修复了已准备好的“问题”：

```
var docready=[],$=function(){return{ready:function(fn){docready.push(fn)}}};

yepnope({
  load:["../css/plugins/jquery-1.8.2.min.js"],
  complete: function () {

    $ = jQuery;
    jQuery(document).ready(function() {
        for(n in docready) docready[n]();
    });

            $(document).ready(function(){ jsLoadingALotofPlugins() });  
  } }) 
```

但在某些页面中，我**需要**通常使用脚本标签加载一些插件：

```
<script src="../css/anotherjQueryPlugin.js" type="text/javascript" ></script> 
```

我得到了错误：

```
TypeError: $ is undefined
$.fn.player = function(method){... 
```

如果我在加载这个 js 时使用 yepnope，我知道它会起作用，但我需要使用脚本标签，是否有任何解决方法来解决这个问题，就像我对 onready 所做的那样？

# octave - 为什么 Octave 的“保存”功能不支持 MAT 文件的单精度

> ID：13158785
> 
> 赞同：0
> 
> 时间：2012-10-31T13:11:51.977
> 
> 标签：octave, mat-file

我在 Ubuntu 11.10 上有 Octave 3.2-4。这是 Ubuntu 官方支持的版本。似乎 GNU Octave 的`save`函数不支持在 MAT 文件中以单精度浮点格式保存二进制数据。例如：

```
octave:119> p_t = single(rand(1,5))
p_t =
   0.038507   0.117961   0.894508   0.788297   0.651727

octave:120> class(p_t)
ans = single

octave:121> save -v6 P_T.mat p_t
octave:122> clear all
octave:123> load -v6 P_T.mat p_t
octave:124> p_t
p_t =
   0.038507   0.117961   0.894508   0.788297   0.651727

octave:125> class(p_t)
ans = double 
```

我曾尝试搜索 Octave 的一个已知问题，但找不到任何东西……还有其他人注意到这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T20:23:18.020

升级。这已经被修复了。

“*官方支持的 Ubuntu 版本*”？那绝对没有任何意义。即使您的意思是“由 Ubuntu 打包的最新版本”，它也是错误的。反正：

*   您使用的是旧的 Ubuntu 版本。最新的 Ubuntu 已经有 Octave 3.6.2
*   您使用的是旧的 Octave 版本（差不多 3 年了。从那以后已经有 7 个 Octave 版本，包括 2 个主要版本）

所以你可以做两件事：

*   为 12.10 更新你的 Ubuntu
*   更新您的 Octave 版本，[从源代码编译](http://wiki.octave.org/Debian)或使用[PPA](https://launchpad.net/~octave)

# javascript - 如何使用javascript返回主页？

> ID：13158786
> 
> 赞同：5
> 
> 时间：2012-10-31T13:11:53.380
> 
> 标签：javascript

我是 jscript 的新手。我已在 javascript 中使用此代码返回主页

```
function gohome()
{
window.location="../index.html"
} 
```

我在这段代码中调用该函数

```
'<a accesskey="h" id="home" href="javascript:gohome();">Home<\/a>' + 
```

单击页面时将有一个链接，它将调用 gohome() 函数。但相同的链接出现在索引页面上。单击时显示页面未找到。

如何使这个链接隐藏在 index.html 页面中？

谁能帮我？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T13:13:31.413

添加.href：

```
function gohome()
{
window.location.href="../index.html"
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-31T13:18:15.877

我不认为你需要一个javascript函数回家你可以这样做：

```
<a accesskey="h" id="home" href="../index.html">Home<\/a> 
```

如果您不希望它显示在主页上，但假设主页是 example.com/index.html，您可以执行类似的操作

```
if(window.location.pathname=="/index.html"){
 document.getElementById('home').style.display = 'none';
} 
```

不在函数中，而只是在源代码或头部中的链接之后的某个时间调用。

# objective-c - 使用 minimumImageValue / maximumImageValue 更改 UISlider 值

> ID：13158792
> 
> 赞同：0
> 
> 时间：2012-10-31T13:12:16.173
> 
> 标签：objective-c, ios, cocoa-touch, uislider

我想让 UISlider 响应点击`minimumValueImage`and/or `maximumValueImage`，将值设置为最小值或最大值。对于这种情况，我似乎找不到“正常”的方法，所以我想出了这个解决方案。我正在继承 UISlider 并记录用户开始触摸的位置。通过比较位置，我可以确定它是否在其中一张图像上。工作正常，但是否有一种不那么定制的方法来实现相同的目标？

```
@interface FGSlider ()

@property (nonatomic) CGRect minimumValueImageRect;
@property (nonatomic) CGRect maximumValueImageRect;

@property (nonatomic) BOOL touchesBeganInMinimumValueImageRect;
@property (nonatomic) BOOL touchesBeganInMaximumValueImageRect;

@end

@implementation FGSlider

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesBegan:touches withEvent:event];

    UITouch *touch = [touches anyObject];

    CGPoint location = [touch locationInView:self];
    if(CGRectContainsPoint(self.minimumValueImageRect, location)) {
        self.touchesBeganInMinimumValueImageRect = YES;
    }
    else if(CGRectContainsPoint(self.maximumValueImageRect, location)) {
        self.touchesBeganInMaximumValueImageRect = YES;
    }
}
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    [super touchesEnded:touches withEvent:event];

    UITouch *touch = [touches anyObject];

    CGPoint location = [touch locationInView:self];
    if(self.touchesBeganInMinimumValueImageRect && CGRectContainsPoint(self.minimumValueImageRect, location)) {
        [self setValue:self.minimumValue animated:YES];
        [self sendActionsForControlEvents:UIControlEventValueChanged];
    }
    else if(self.touchesBeganInMaximumValueImageRect && CGRectContainsPoint(self.maximumValueImageRect, location)) {
        [self setValue:self.maximumValue animated:YES];
        [self sendActionsForControlEvents:UIControlEventValueChanged];
    }

    // reset state
    self.touchesBeganInMinimumValueImageRect = NO;
    self.touchesBeganInMinimumValueImageRect = NO;
}

-(CGRect)minimumValueImageRectForBounds:(CGRect)bounds {
    self.minimumValueImageRect = [super minimumValueImageRectForBounds:bounds];
    return self.minimumValueImageRect;
}

-(CGRect)maximumValueImageRectForBounds:(CGRect)bounds {
    self.maximumValueImageRect = [super maximumValueImageRectForBounds:bounds];
    return self.maximumValueImageRect;
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T21:21:14.590

我做了一个简单的类别，它似乎工作并且不依赖于计算边界并且比您的实现简单得多。试试看，让我知道你的想法。

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    for (UIView *view in self.subviews) {
        CGPoint locationPoint = [touch locationInView:view];
        if ([view pointInside:locationPoint withEvent:event]) {
            UIImageView *imageView = (UIImageView*)view;
            if (imageView.image == self.maximumValueImage) {
                [self setValue:self.maximumValue animated:YES];
                [self sendActionsForControlEvents:UIControlEventValueChanged];
            } else if (imageView.image == self.minimumValueImage) {
                [self setValue:self.minimumValue animated:YES];
                [self sendActionsForControlEvents:UIControlEventValueChanged];
            }
        }
    }
    [super touchesBegan:touches withEvent:event];
} 
```

# c# - 使用 gdal 从 C# 中的现有位图创建 geotiff

> ID：13158795
> 
> 赞同：6
> 
> 时间：2012-10-31T13:12:27.423
> 
> 标签：c#, tiff, gdal, geotiff

我必须在 ac# 项目中使用 gdal。我要做的就是将一个简单的位图“转换”为 GeoTiff。我在 gdal 网站上阅读了一些文档，但未能使其完美运行。事实上，我的位图已成功导出到 geotiff，但如果我使用 GIS 软件（例如 QuantumGIS）打开 geotiff，则 GeoTiff 会在 y 轴上反转：

![在此处输入图像描述](../Images/eedc01596f0036d4289d8be270043733.png)：

而原始位图如下所示：

![在此处输入图像描述](../Images/dbdd731c78b474e5fa9c3dc910165abb.png)

这是我所做的：

首先，我将一个临时文件写入磁盘（即位图），通过 gdal 函数（Gdal.Open(path)）创建一个包含位图的数据集，然后使用 GTiff 驱动程序创建一个新数据集位图数据集，我设置了地理转换并将 geotiff 写入磁盘：

```
 String wktProj = null;
  String tmpPath = @"C:\tmp.bmp";
  Bitmap tmpBitmap = bmp.Clone(new Rectangle(0, 0, bmp.Width, bmp.Height), pixFormat);
  tmpBitmap.Save(tmpPath, ImageFormat.Bmp);

  String[] options = null;
  Gdal.AllRegister();
  OSGeo.GDAL.Driver srcDrv = Gdal.GetDriverByName("GTiff");
  Dataset srcDs = Gdal.Open(tmpPath, Access.GA_ReadOnly);
  Dataset dstDs = srcDrv.CreateCopy(path, srcDs, 0, options, null, null);

  //Set the map projection
  Osr.GetWellKnownGeogCSAsWKT("WGS84", out wktProj);
  dstDs.SetProjection(wktProj);

  //Set the map georeferencing
  double mapWidth = Math.Abs(latLongMap.listBounds.topRight.x - latLongMap.listBounds.bottomLeft.x);
  double mapHeight = Math.Abs(latLongMap.listBounds.topRight.y - latLongMap.listBounds.bottomLeft.y);
  double[] geoTransfo = new double[] { -5.14, mapWidth / bmp.Width, 0, 48.75, 0, mapHeight / bmp.Height };
  dstDs.SetGeoTransform(geoTransfo);

  dstDs.FlushCache();
  dstDs.Dispose();
  srcDs.Dispose();
  srcDrv.Dispose();
  tmpBitmap.Dispose();

  File.Delete(tmpPath); 
```

知道我做错了什么吗？

**编辑**我不知道它是否重要，但像素位图是 8bppIndexed。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T11:01:50.373

为了解决这个问题，我替换了这一行：

```
double[] geoTransfo = new double[] { -5.14, mapWidth / bmp.Width, 0, 48.75, 0, mapHeight / bmp.Height }; 
```

通过这个：

```
double[] geoTransfo = new double[] { -5.14, mapWidth / bmp.Width, 0, 48.75, 0, (mapHeight / bmp.Height)*(-1) }; 
```

看起来像素大小（高度）必须是负数。

# iphone - 什么触发了 iOS 中的离屏渲染、混合和 layoutSubviews？

> ID：13158796
> 
> 赞同：17
> 
> 时间：2012-10-31T13:12:29.077
> 
> 标签：iphone, ios, cocoa, core-animation

我应该注意哪些对性能至关重要的事情？

我想要一个包含尽可能多示例的列表。或最佳实践列表。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-30T16:27:36.140

## 离屏渲染/在 CPU 上渲染

图形性能的最大瓶颈是屏幕外渲染和混合——它们可能发生在动画的每一帧中，并可能导致不连贯的滚动。

屏幕外渲染（软件渲染）发生在必须在软件（屏幕外）中进行绘图之前，然后才能将其移交给 GPU。硬件不处理带有蒙版和阴影的文本渲染和高级合成。

以下将触发离屏渲染：

*   任何带有蒙版的图层 ( `layer.mask`)

*   任何具有`layer.masksToBounds`/`view.clipsToBounds`为真的层

*   任何`layer.allowsGroupOpacity`设置为 YES 且`layer.opacity`小于 1.0
    [的层 视图（或层）何时需要离屏渲染？](https://stackoverflow.com/questions/6731545/when-does-a-view-or-layer-require-offscreen-rendering)

*   任何带有阴影 ( `layer.shadow*`) 的图层。
    有关如何修复的提示：[https ://markpospesel.wordpress.com/tag/performance/](https://markpospesel.wordpress.com/tag/performance/)

*   任何`layer.shouldRasterize`真实的层

*   任何带有`layer.cornerRadius`, `layer.edgeAntialiasingMask`,`layer.allowsEdgeAntialiasing`

*   任何带有`layer.borderWith`和的层`layer.borderColor`？
    缺少参考/证明

*   文本（任何类型，包括`UILabel`、`CATextLayer`、`Core Text`等）。

*   您`CGContext`在`drawRect:`. 即使是一个空的实现也会被渲染到屏幕外。

* * *

## 混合

*   `resizableImage`可能导致混合。
    [在 iOS 上使用 resizableImages 时避免混合图层](https://stackoverflow.com/questions/14820185/avoiding-blended-layers-when-using-resizableimages-on-ios)

*   任何不存在且`opaque`a小于 1.0的层`backgroundColor``alpha`

*   任何`alpha`小于 1.0的层

*   `layer.content`任何具有或任何`UIImageView`具有`UIImage`Alpha 通道的图层

* * *

## 布局

以下内容将触发`layoutSubviews`在 UIView 上调用：

*   在同一视图和超级视图上更改`bounds`触发器

*   在同一视图和超级视图上更改`frame`触发器

*   在 superview 上更改`transform`或触发`layer.transform`

注意：我指的是值实际发生变化的实际变化

矛盾的这些变化不会触发`layoutSubviews`被调用：`center`, `layer.position`, `layer.zPosition`, `layer.anchorPoint`, `layer.anchorPointZ`.

参考：[https ://github.com/hfossli/LayoutSubviewsInconsistency](https://github.com/hfossli/LayoutSubviewsInconsistency)

* * *

## 提高性能的一般提示

*   很多时候做`blend`比做要好`render offscreen`。

*   考虑使用`drawRect:`而不是使用具有多个标签和子视图的视图。

*   在后台队列上绘制到 a`UIImage`或`CGImageRef`。

*   绘制到 a （与 相比，`CGLayer`它的缓存更好），然后将您想要的任何内容绘制到其中。 更新，不要：http: [//iosptl.com/posts/cglayer-no-longer-recommended/](http://iosptl.com/posts/cglayer-no-longer-recommended/)`GPU``UIImage`

*   扁平化你的层次结构

*   重用视图——不要在滚动时创建和添加新视图

*   具有`opaque`纯色背景色的视图

*   避免设置`alpha`和`layer.opacity`小于 1.0

*   启用`layer.shouldRasterize`（小心使用）。我个人喜欢避免这种情况，但它在某些情况下执行得更快，因为图层的栅格将被缓存和重用。请记住，如果您`shouldRasterize`在图层上启用频繁更改其内容或子图层内容会导致性能下降，因为 iOS 会在每次更改时继续栅格化图层。

* * *

## 链接

*   [http://iosinjordan.tumblr.com/post/56778173518/help-my-tables-dont-scroll-smoothly](http://iosinjordan.tumblr.com/post/56778173518/help-my-tables-dont-scroll-smoothly)

*   [https://developer.apple.com/library/IOS/documentation/2DDrawing/Conceptual/DrawingPrintingiOS/DrawingTips/DrawingTips.html](https://developer.apple.com/library/IOS/documentation/2DDrawing/Conceptual/DrawingPrintingiOS/DrawingTips/DrawingTips.html)

# iphone - 带有子视图的 ViewController，UIScrollView 第一次不可滚动

> ID：13158797
> 
> 赞同：-1
> 
> 时间：2012-10-31T13:12:30.260
> 
> 标签：iphone, objective-c, ios, xcode

我使用`UIViewController`来自 XIB 的几个子视图（ViewController 的视图），它们是在使用`UISegmentedControl`. 其中一个视图包含一个`UIScrollView`. 问题是*第一次*添加此子视图时`UIScrollView`不可滚动。如果我选择另一个片段/视图，然后选择另一个片段/视图，那么它现在是可滚动的。*`UIScrollView`*

 *`UIScrollView`仅在 IB 中添加。这是 MainViewController.m 中视图和 UISegmentedControl 的一些代码

```
- (void)viewDidLoad
{
[super viewDidLoad];

nameSubViewController = [[NameSubViewController alloc] initWithNibName:@"NameSubViewController" bundle:nil];
nameSubView = (NameSubView *)[nameSubViewController view];

priceSubViewController = [[PriceSubViewController alloc] initWithNibName:@"PriceSubViewController" bundle:nil];
priceSubView = (PriceSubView *)[priceSubViewController view];

[self.view addSubview:nameSubView];
currentView = nameSubView;
}

- (void) segmentAction:(id)sender
{
segmentedControl = sender;
if([segmentedControl selectedSegmentIndex] == 0) {
    [currentView removeFromSuperview];
    [self.view addSubview:nameSubView];
    currentView = nil;
    currentView = nameSubView;
}
if([segmentedControl selectedSegmentIndex] == 1) {
[currentView removeFromSuperview];
[self.view addSubview:priceSubView];
    currentView = nil;
    currentView = priceSubView;
} 
```

在这段代码中，假设段 1 ( `priceSubView`) 包含 UIScrollView。如果我选择此段，除非我再次选择段 0 ( ) 并重新选择段 1，`UIScrollView`否则不会对滚动做出反应。`nameSubView`

是什么导致了这种情况以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:16:47.140

如果您需要在第一次加载时滚动。您需要在 firstLoad 时添加滚动视图。您在更改段控件后添加滚动视图，这就是它不滚动的原因。一探究竟。

更改`viewDidLoad`如下：

```
- (void)viewDidLoad
{
  [super viewDidLoad];

  nameSubViewController = [[NameSubViewController alloc] initWithNibName:@"NameSubViewController" bundle:nil];
  nameSubView = (NameSubView *)[nameSubViewController view];

  priceSubViewController = [[PriceSubViewController alloc] initWithNibName:@"PriceSubViewController" bundle:nil];
  priceSubView = (PriceSubView *)[priceSubViewController view];

  [self.view addSubview:priceSubView];
  currentView = priceSubView;
} 
```*

# jquery - jquery 滚动问题，元素不停留在原位？

> ID：13158801
> 
> 赞同：1
> 
> 时间：2012-10-31T13:12:45.923
> 
> 标签：jquery, css

我有这个 jquery 片段，它使一个元素在向下滚动时保持在顶部可见：

```
 var $window = $(window),
            $stickyEl = $('.rightcol'),
            elTop = $stickyEl.offset().top;
            $window.scroll(function() {
              var windowTop = $window.scrollTop();
              $stickyEl.toggleClass('sticky', windowTop > elTop);

        }); 
```

CSS：

```
.rightcol.sticky {
      position: fixed;
      top: 0;
    } 
```

当我滚动右列时，它确实停留在顶部，但它向左移动，它应该在右边，在滚动或页面加载之前，元素应该放在第一位。我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:29:43.057

您的问题是您已将滚动元素`float: right`设置为并将其设置为`position: fixed`，这将与浮动相矛盾。

当您设置一个元素的`float`属性时，您是在告诉文档的其余部分以适应该元素周围的其他内容。

当您将元素的`position`属性设置为`fixed`，或者`absolute`将其从文档的正常流程中删除时。这意味着元素所占用的空间将不再被考虑，即它不会影响其他元素。这意味着如果您尝试在固定定位之外设置浮动，则文档的其余部分将不会围绕元素流动，因为不会考虑元素的空间。

看看这些：

*   [使固定浮动元素在 Firefox 和 Chrome 中平滑滚动](https://stackoverflow.com/questions/6984580/making-fixed-floating-element-scrolling-smoothly-in-firefox-and-chrome)
*   [滚动时固定/浮动的div元素](https://stackoverflow.com/questions/7735002/fixed-floating-div-element-when-scrolling)

# internet-explorer - IE 和特殊字符

> ID：13158802
> 
> 赞同：0
> 
> 时间：2012-10-31T13:12:48.170
> 
> 标签：internet-explorer, character, special-characters, ie8-compatibility-mode

我对特殊字符“åäö”和 IE 9 有一个奇怪的问题。

![在此处输入图像描述](../Images/00599573830d5ef945cd8a84ca17ed64.png)

如果我打开兼容模式，它会以正确的形式显示字符，但是我不想强制进行压缩。用户模式。为什么这总是一个解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T15:22:30.980

**已编辑**

这是一个有很多因素的棘手问题，但最重要的可能是文本（至少在演示页面上）以两种方式包含 å、ä、ö：直接作为简单字符和分解。例如，“våld”的“å”由“a”和上面的组合环 (U+030A) 组成。统一这一点以便一致地使用简单字符应该可以解决问题。

但是演示页面也使用字体名称`open-sans`而不是`open sans`，导致进一步的问题，但我想这可能是演示中的拼写错误，而不是真实页面。

覆盖原始答案：

这似乎是使用 Google 字体 Open Sans 的问题。IE 可能会根据其模式（Quirks vs. Standard）以不同的方式使用它，因为旧版本的 IE 不支持 WOFF 格式。

如果您从自己的服务器下载字体并提供它，问题可能会消失。经常发生的情况是，从 Google 服务器使用 Google 字体时不起作用，但当您自己管理它们时就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:16:37.487

这些都是瑞典字符。可能您应该使用与 HTML 兼容的字符来解决问题。试试这个字符：

```
&auml;
&aring;
&ouml; 
```

这将在每个浏览器中正确显示

# c# - 用于从 ASP.Net 中的 C# 字段或属性中获取值的 Javascript 函数

> ID：13158805
> 
> 赞同：0
> 
> 时间：2012-10-31T13:13:03.567
> 
> 标签：c#, javascript, asp.net

我是 JavaScript 新手。基本上我想要一个 JavaScript 函数，它会在网络浏览器中显示电子邮件预览。我已经存储了电子邮件的模板、正文和内容。

**SQL：**

```
SELECT Name, template, body, contents FROM Email
WHERE EmailID = 1 
```

**C#：** 我在 asp.net 页面上有一个 LinkBut​​ton (ID="lnkViewDoc")，后面的代码是：

```
lnkViewDoc.Attributes.Add("onclick", "return preview_email();"); 
```

**JavaScript：** 我需要一个函数，它会从类字段中选择值并将其显示在网络浏览器中。谢谢

```
function preview_email() {

  ..................
  window.open() //Something
} 
```

**内容：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org   
/TR/xhtml1/DTD/xhtml1-transitional.dtd">  <html xmlns="http://www.w3.org/1999/xhtml">     
<head>      
    <title></title>  
</head>  
<body>
  <center>
      ..................
  </center>
</body> 
```

**身体：**

```
<div style="text-align: left">   Dear .......,
    ...........................................
</div>  
<div style="text-align: left">   &nbsp;</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:22:18.130

看看前端服务器标签（蜜蜂蜇伤）。我的东西你正在寻找的是

```
<%=... %> 
```

这基本上相当于`Response.Write()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:24:01.253

如果你不害怕在你的 javascript 新手时代使用 jquery，你可以尝试像这样使用 Jquery Dialog：

```
$("<div></div>").load("previewEmail.ascx?emailid=5").dialog({autoOpen:true}); 
```

或类似的东西，您可能需要考虑使用链接到 aspx 的 iframe 打开同一个对话框，因为您的电子邮件将包含令人不安的 html 元素，例如正文标签

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:18:17.160

假设您有一个名为“email”的 .NET 对象。在后面的代码中写：

```
lnkViewDoc.Attributes.Add("onclick", "return preview_email(" + email.EmailID + ");"); 
```

在 JavaScript 中：

```
function preview_email(emailid) {

  ..................
  window.open("previewEmail.aspx?emailid=" + emailid, ... more parameters)
} 
```

# objective-c - 自迁移以来导航栏和表格视图之间的黑条

> ID：13158807
> 
> 赞同：3
> 
> 时间：2012-10-31T13:13:09.033
> 
> 标签：objective-c, ios, xcode, ios6, xcode4.5

首先，我是法国人；对不起英文错误，我希望你能理解我的问题。我只在 iOS 应用程序上工作了 3 个月，也许我还没有掌握所有的 iOS 开发概念。

我有一个应用程序在使用 iOS 5 的设备和模拟器上正确运行，但是当我在 iOS6 设备或模拟器上尝试时，我遇到了一个奇怪的情况。导航栏和我的表格视图之间的屏幕顶部会出现一个黑条。

我做了一些研究，其他人也有同样的问题，但是解决他们问题的方法对我不起作用。请参阅：[导航栏和表格视图之间的黑条出现在 iOS 6 上](https://stackoverflow.com/questions/12547570/black-bar-between-navigation-bar-and-table-view-appears-on-ios-6)

自从我将 xcode 版本升级到 4.5 和 iOS6 SDK 后，我就遇到了这个问题。看下面的模拟器截图，先运行iOS6再运行iOS5。奇怪的是，黑条是在应用程序启动后出现的。如果我更改了选项卡（显然视图控制器已切换），则黑条不再存在。

我尝试通过切换 tabBar 的元素来更改第一个 viewController，但即使我将名为“Tendances”的选项卡放在第一位，也会出现相同的情况。黑条在这个视图上，但不在其他视图上。

我在 iphone 3 模拟器上制作了这些屏幕截图，但使用 iphone4 或 5 模拟器或真实设备并没有解决我的问题。

**屏幕截图 1**：我在 iOS6 模拟器上启动应用程序。您可能会看到黑条位于导航栏和 tableView 标题之间。

[![截图 1](../Images/cf39155596bf07f4e232ea848daa91ce.png)](https://i.stack.imgur.com/lNTL7.png)

**屏幕截图 2**：我仍在同一个模拟（iOS6）上运行同一个应用程序，我决定使用 tabBarController 切换选项卡。黑条消失。

[![截图 2](../Images/b5cd2343395db12c954fbe1cd6a6bf09.png)](https://i.stack.imgur.com/aTZ2S.png)

**屏幕截图 3**：我回到第一个选项卡，然后没有黑条......

[![截图 3](../Images/43ffae89d06ff6cbed465a6f8b6ad2dd.png)](https://i.stack.imgur.com/gCegh.png)

**屏幕截图 4**：我关闭了运行 iOS6 的模拟器以换取另一个运行 iOS5。然后我启动了该应用程序，您可能会看到没有黑条。

![截图 4](../Images/6ab39d4dd14b03702f9a1e1375062d7d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T19:13:56.600

我遇到了完全相同的问题：当第一次启动应用程序/这个 tableviewcontroller 时（我的是一个 fetchedresultscontroller，只是为了更清楚），导航栏的高度会缩小，并且导航栏和 viewcontroller 的项目之间会出现一个黑条. 如果我切换到不同的视图控制器（不是 tableview 的）并返回，该栏将消失，导航栏恢复正常大小。我在过去的 3 个小时里一直在寻找答案，只是尝试了一切，但对我没有任何帮助。

在我的案例中起作用的是一个非常奇怪的解决方案：使导航栏不可见，然后再次可见。所以看起来这实际上加载了两次，第一次是黑条，第二次是恢复正常。

在我的 viewDidLoad 我现在有这个：

```
[self.navigationController setNavigationBarHidden:YES]; 

[self.navigationController setNavigationBarHidden:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:17:28.703

试试这个解决方案：[如何在 setStatusBarHidden:Yes 之后设置顶部位置 = 0？](https://stackoverflow.com/questions/519689/iphone-how-to-set-the-top-position-0-after-setstatusbarhiddenyes)

我曾经遇到过同样的问题，在很多 SO 页面上都苦苦挣扎，但这是最终的解决方案。

# syntax-highlighting - 还有什么其他标记语法最接近 MediaWiki？

> ID：13158811
> 
> 赞同：3
> 
> 时间：2012-10-31T13:13:23.723
> 
> 标签：syntax-highlighting, mediawiki, geshi

GeShi 是一个语法高亮工具，分别被 MediaWiki 和 pastebin.com 等项目和供应商使用。

但是，GeShi 本身并不支持 MediaWiki 标记语法。我可以用来突出显示 MediaWiki 模板的最接近的“外观”是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T15:06:36.127

我怀疑有没有。MediaWiki 的语法有点独特。它不仅仅是用于创建单个文本文档的标记语言，它还用于创建整个站点。区别在于文档之间的关系：链接、重定向和将一个嵌入另一个（模板）。

顺便说一句，为 MediaWiki 语法创建好的语法高亮是不可能的，这一切都是因为模板。例如：

```
{{{!}}
! a !! b
{{!}}} 
```

上面将是英语维基百科上完全有效的表格，因为`{{!}}`解析为`|`，因此第二行中的感叹号应该像表格中一样突出显示，但是如果您无法解析模板，则无法判断。（但是在 Vim 中可以找到不太好的亮点）。

# moodle - Moodle 数据库 API 错误：为一位用户获取一门课程的所有部分的测验分数

> ID：13158813
> 
> 赞同：1
> 
> 时间：2012-10-31T13:13:28.700
> 
> 标签：moodle

我正在尝试获取特定用户在该课程所有部分的特定课程中获得的总分。

以下查询可以使用 mysql 并给出正确的结果，但不能使用 Databse API 调用

$sql = "SELECT d.section as section_id,d.name as section_name, sum(a.sumgrades) A​​S 标记来自 mdl_quiz_attempts a, mdl_quiz b, mdl_course_modules c, mdl_course_sections d WHERE a.userid=6 AND b.course=4 AND a.quiz=b.id AND c.instance=a.quiz AND c.module=14 AND a.sumgrades>0 AND d.id=c.section GROUP BY d.section"

我尝试了不同的 API 调用，主要是我想要的

$DB->get_records_sql($sql);

API 调用的结果毫无意义。有什么建议吗？

PS：这是moodle 2.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-31T20:07:15.673

我只是尝试做类似的事情，只是没有得到这些部分。您只需要课程和用户 ID。我希望这可以帮助你。

```
global $DB;

// get all attempts & grades from a user from every quiz of one course 
$sql = "SELECT qa.id, qa.attempt, qa.quiz, qa.sumgrades AS grade, qa.timefinish, qa.timemodified, q.sumgrades, q.grade AS maxgrade
        FROM {quiz} q, {quiz_attempts} qa
        WHERE q.course=".$courseid."
        AND qa.quiz = q.id
        AND qa.userid = ".$userid."
        AND state = 'finished'
        ORDER BY qa.timefinish ASC"; 
$exams = $DB->get_records_sql($sql);

// calculate final grades from sum grades
$grades = array();
foreach($exams as $exam) {
    $grade = new stdClass;
    $grade->quiz = $exam->quiz;
    $grade->attempt = $exam->attempt;
    // sum to final
    $grade->finalgrade = $exam->grade * ($exam->maxgrade / $exam->sumgrades);
    $grade->grademax = $exam->maxgrade;
    $grade->timemodified = $exam->timemodified;
    array_push($grades, $grade);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-24T19:02:20.087

这适用于最新的moodle版本。穆勒 2.9。尽管我仍然对更好的解决方案持开放态度，因为这确实是一种深入分析用户性能的方法。

# jsp - SPRING：没有找到带有 URI 的 HTTP 请求的映射

> ID：13158816
> 
> 赞同：1
> 
> 时间：2012-10-31T13:13:36.630
> 
> 标签：jsp, redirect, spring-mvc

这是我面临的错误的屏幕截图。

问题是忘记密码再次附加在 URL 中。（参见附件图像的地址栏）

![在此处输入图像描述](../Images/2a3a9fc71094268ae06b7e806f685d83.png)

我的**控制器**如下：

```
@Controller
@RequestMapping(value="/forgot-password")
public class ControllerForgotPassword {
@RequestMapping(value = "/email", method = RequestMethod.POST)
    public ModelAndView sendMail(HttpServletRequest request) {
        String email = (String) request.getParameter("email");
        boolean flag=serviceForgotPassword.checkEmail(email);
        ModelAndView modelAndView = new ModelAndView();
        if(flag)
        {
            modelAndView.addObject("message", "Mail has been sent to your mail box");
            modelAndView.setViewName("forgot-password-sucess");
            return modelAndView;
        }
        else
        {
            modelAndView.addObject("message", "Please Enter Valid email address");
            modelAndView.setViewName("forgot-password");
            return modelAndView;
        }
    }
} 
```

**forgot-password.jsp**内容如下：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ page contentType="text/html;charset=UTF-8" %>
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags" %>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>
<%@ taglib prefix="fmt"
    uri="http://java.sun.com/jsp/jstl/fmt" %>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Forgot-Password</title>
</head>
<body>
<p style="color:red;">${message}</p>
<form action="forgot-password/email" method="POST">
<input type="text" name="email"/>
<input type="submit" value="Send Mail">
</form>
</body>
</html> 
```

我曾尝试`modelAndView.setViewName("redirect:/forgot-password-sucess");`在该`sendMail`方法中使用，但随后我无法接收来自控制器的消息。

**编辑 ：**

如果我添加`<form action="/CabFMS/forgot-password/email" method="POST">`这是我的**上下文/项目**名称，那么它可以正常工作。

我是否需要在 from 操作中随处添加上下文名称以及控制器映射？

我不能只`forgot-password/email`在表单操作中使用吗？

请帮忙。

问候，

阿伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:52:36.583

此表单操作必须是绝对的以匹配您的控制器。它当前正在指定相对路径。

```
<form action="/forgot-password/email" method="POST">
              |
           add this leading slash 
```

**编辑：**这仅在应用程序位于根上下文时才有效。

如果应用程序部署到不同的上下文，则还需要将上下文添加到表单的 action 属性中。

更好的方法是保留相对路径并`<base>`在页面上使用应该*包含*上下文的 HTML 标记 - 请参阅[是否建议使用 <base> html 标记？](https://stackoverflow.com/questions/1889076/is-it-recommended-to-use-the-base-html-tag). 我倾向于在 JSP 中使用以下内容编写 Spring 应用程序。

```
<base href="${pageContext.request.scheme}://${pageContext.request.serverName}:${pageContext.request.serverPort}${pageContext.request.contextPath}/"> 
```

这样，页面中的相对路径可以自然地根据正确的上下文来解析，无论它在哪里。

# php - 图片上传不刷新页面

> ID：13158818
> 
> 赞同：0
> 
> 时间：2012-10-31T13:13:44.083
> 
> 标签：php, javascript

我正在尝试使用 iframe 上传图像而不刷新页面。该代码在 FF 和 Chrome 中运行良好，但在 IE 中它给出了错误“访问被拒绝”。

以下是将带有目标的个人资料图片上传到 iframe 的 html 代码。

```
<form action="/image-upload" id="frmuploadPicture" name="frmuploadPicture" target="upload_iframe" method="post" enctype="multipart/form-data">
                <a href="javascript:void(0);" onclick="javascript:user.openUploadDialog('profileImage');">Edit Photo</a>
                    <input type="file" id="profileImage" name="profileImage" style="-ms-filter:'progid:DXImageTransform.Microsoft.Alpha(Opacity=0)'; filter: alpha(opacity=0);opacity: 0;" accept="image/x-png,image/gif,image/jpeg" onchange="javascript:user.uploadProfileImage(this);"/>
                    <input type="hidden" name="userid" id="txtUserId" value="879987"/>
             </form>
            <iframe name="upload_iframe" src="" style="width: 400px; height: 100px; display: none;"></iframe> 
```

我有一个仅向用户显示的编辑照片链接，单击此编辑链接我触发文件元素的单击事件，并在更改文件元素时提交表单。

我正在使用 document.frmuploadPicture.submit() 提交表单；更改文件元素。

任何帮助或建议将不胜感激。

谢谢高拉夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:29:30.053

您可以使用[jquery 表单插件](http://www.malsup.com/jquery/form/)通过 ajax 上传您的图片：

[演示](http://www.malsup.com/jquery/form/progress.html)

# c# - DesignerHost 无法使用 Visible = false 创建控件

> ID：13158822
> 
> 赞同：3
> 
> 时间：2012-10-31T13:13:58.597
> 
> 标签：c#, winforms, visual-studio-2010

再会！

我正在编写一个 .vsix 来将旧控件替换为新控件。我有designerHost，它是当前的设计器实例。然后我开始像这样转换：

```
 foreach (OldCombo oldCmbx in OldCmbxs())
 {
      ...
      NewCombo newCmbx = designerHost.CreateComponent(NewComboType, oldcmbx.Name) as NewCmbx;
      ...
      newCmbx.Visible = oldCmbx.Visible;
      ...
      designerHost.DestroyComponent(oldCmbx);
 } 
```

事情`-oldCmbx`总是`Visible=true`，无论它是如何写在 Designer.cs 文件中的。我总是在创建`Visible=true`newCmbx。如果我强制 newCmbx 为`Visible=false`，则设计器在转换后不会显示 newCmbx ，但可见属性仍然为真，因此可见属性绝对不是我要寻找的。那么我怎样才能强制 newCmbx 出现`Visible=false`在 Designer.cs 中呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:52:21.620

在挖掘 .NET 源代码后，我发现这`ControlDesigner`是 .NET 的阴影`Visible`属性`Control`，因此将要序列化/反序列化的内容与Control`InitializeComponent`的实际属性有很大关系。`Visible`

`Designer.Visible`属性初始化如下：

```
public override void Initialize(IComponent component)
{
   PropertyDescriptorCollection properties = TypeDescriptor.GetProperties(component.GetType());
   PropertyDescriptor descriptor = properties["Visible"];
   if (((descriptor == null) || (descriptor.PropertyType != typeof(bool))) || !descriptor.ShouldSerializeValue(component))
    {
        this.Visible = true;
    }
    else
    {
        this.Visible = (bool) descriptor.GetValue(component);
    }
    ...
 } 
```

`descriptor.ShouldSerializeValue(component)`for`Control.Visible`总是`false`在新创建的控件的情况下。

`Designer.Visible`财产：

```
private bool Visible
{
    get
    {
        return (bool) base.ShadowProperties["Visible"];
    }
    set
    {
        base.ShadowProperties["Visible"] = value;
    }
} 
```

在`Designer.PreFilterProperties()`实际`Visible`属性中被设计者`Control`的属性所掩盖。`Visible`

现在，当设计器被初始化时（在我创建组件时发生的代码中`designerHost.CreateComponent`）`newCmbx.Visible`总是`true`.

为什么会这样？因为`Visible`的属性`Control`用于绘制控件（在设计器表面上也是如此）。如果我设置`newCmbx.Visible = false`它只是从设计表面消失（但仍然从设计器的`Visible`属性中序列化） - 这很糟糕，所以通过`Control`类的设计，当`Control`被实例化时，它总是`Visible`可以在设计表面上可见。属性的任何后续更改都会`Visible`影响`Visible`设计器的属性，而不是 Control 本身（在设计器模式下工作的上下文中）。

所以，为了解决这个问题，我需要的是`Visible`设计师的财产。

正确的代码如下所示：

```
foreach (OldCombo oldCmbx in OldCmbxs())
{
  bool _visible = GetVisiblePropThroughReflection(designerHost.GetDesigner(oldCmbx));
  ...
  NewCombo newCmbx = designerHost.CreateComponent(NewComboType, oldcmbx.Name) as NewCmbx;
  ...
  SetVisiblePropThroughReflection(designerHost.GetDesigner(newCmbx), _visible);
  ...
  designerHost.DestroyComponent(oldCmbx);
} 
```

# java - 没有 EntityManager 的 detachedcriteria 和 detachedquery

> ID：13158824
> 
> 赞同：2
> 
> 时间：2012-10-31T13:14:01.587
> 
> 标签：java, hibernate, jpa

我有一个关于 JPA 的问题：有没有一种方法可以使用 JPA 2.0 的 api 来模拟 DetachedCriteria（来自 Hibernate）？

如果有一种方法我需要扩展哪些类来实现这一点？

我正在使用休眠 3.6.5 和休眠-jpa-2.0-api-1.0.0.Final。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T10:17:46.100

在休眠中，您在休眠会话之外创建一个 DetachedCriteria 对象，然后将其附加到稍后的会话以执行。

总之 - EJB 风格的 JPA EntityManagers（带有容器管理的 PersistenceContext）可以创建一个自动行为类似于 Hibernate DetachedCriteria 的 Query 对象，但是“核心 java”风格的 EntityManagers（即应用程序管理）永远不能创建行为类似于 Hibernate DetachedCriteria 的查询.

JPA 的 PersistenceContext 相当于一个 Hibernate Session。
JPA 的 Query 相当于一个 DetachedCriteria。
JPA EntityManager 在任何时候都可能存在也可能不存在 PersistenceContext。EntityManager 共有三种类型：

1.  事务上下文 EM - 这种类型的 EM 只能在 SessionBean EJB 中创建 - @Stateless 或 @Stateful。PC 完全由容器管理。当没有事务正在执行时，PC 不存在。当事务开始并发生持久性操作时，PC 会自动创建并与事务一起附加和传播——每个 EM 操作都会在事务私有数据中查找 PC。交易结束时，PC 会自动清除并移除。
2.  扩展上下文 EM - 这种类型的 EM 也只能在 SessionBean EJB 中创建 - 但只能在 @Stateful 中创建。PC 也是完全容器管理的。PC 是在 bean 启动会话会话时创建的（第一个方法从对 bean 的引用调用）。PC 附加到有状态会话 Bean 的私有数据。当会话会话的最后一个方法完成时，PC 被清除并移除（即调用了带有@Remove 标记的方法）
3.  Application Managed EM - 这种类型的 EM 可以在任何地方创建 - 在任何类型的 EJB 或在其类路径中具有 JPA 类的任何 java POJO 中。创建 EM 时创建 PC，关闭 EM 时清除和删除 PC。

在情况 (1) 和 (2) 下，EntityManager 可以随时创建查询（通过 em.createQuery() 方法）。稍后，当 PC 存在时，可以运行查询。这与 Hibernate 的行为相同。在情况 (3) 下，没有等价于 Hibernate DetachedCriteria。

不要被我在这里提到的 EJB 的事实吓到。它们非常容易实现，基本上只是添加了一些额外注释的 POJO，并且在无形中添加了一些 App Server 功能，以使它们比 POJO“更大、更快、更强”。

(2) 的一个例子：

```
@Stateful   
class MyStatelessEJB {    
   // Entity Manager is automatically created and injected     
   // persistent unit name is in persistence.xml
   @PersistenceContext(unitName="myPersistenceUnitName",type=PersistenceContextType.EXTENDED)   
   EntityManager em;    
   Query q1 = null;    
   Query q2 = null;

   @NOT_SUPPORTED                                     // no transaction or PC here 
   public methodA() {....                               
                      q1 = em.createQuery(...);       // create query anyway
                      q2 = em.createTypedQuery(...);
                      ...}  

   public methodB() {....  q.execute();  ...}    // transaction & PC here - just use Query

   @Remove   
   // when this method is completes the EJB Session ends    
   public methodC() {....  List<Foo> fooList = q.execute().getResultList; ...} 

} 
```

(1) 的示例（具有事务范围 PC 的无状态会话 Bean）看起来很相似，但没有实例变量，因为它是无状态的。EntityManager & Query 必须在每个方法中创建和存储为局部变量，或者必须传递/转移到另一个可以存储它们的有状态 EJB。

# mysql - MySQL GROUP BY 和 ORDER BY 顺序

> ID：13158829
> 
> 赞同：2
> 
> 时间：2012-10-31T13:14:39.277
> 
> 标签：mysql, sql

哪个在哪个之后有关系吗？我的意思是如果我这样做

```
SELECT * FROM  table GROUP BY x ORDER BY y 
```

结果会先分组再排序吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T13:15:18.673

`ORDER`是要执行的最后一个子句。

执行顺序

*   FROM 子句
*   WHERE 子句（*不能在此子句上使用别名的原因*）
*   GROUP BY 子句
*   HAVING 子句
*   选择子句
*   ORDER BY 子句

^([欲了解更多信息，请点击这里](http://www.bennadel.com/blog/70-SQL-Query-Order-of-Operations.htm))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:16:58.200

*   第一个`WHERE`条件
*   第二`GROUP BY`
*   第三个是`ORDER BY`

例子 ：

```
SELECT * FROM table GROUP BY columnanme ORDER BY columnanmae 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:21:02.833

在 MySQL 中，`GROUP BY`子句也具有排序列的副作用。如果您的查询中已经有一个`GROUP BY`产生所需排序顺序的子句，则不需要`ORDER BY`.

# android - 以编程方式更改搜索栏的大小，但不能让拇指大于栏

> ID：13158831
> 
> 赞同：8
> 
> 时间：2012-10-31T13:14:49.777
> 
> 标签：android, scrollbar, seekbar

我必须制作一个搜索栏，我可以在其中以编程方式更改几乎所有内容。现在我在更改拇指和条形大小时遇到​​了问题。如果条形图较大或与拇指大小相同，则一切正常，但如果拇指大于条形图，我无法让它以正确大小的条形图显示整个拇指。

这是我创建拇指的代码：

```
 public void setSeekBarThumb(int width, int height, int rColor, int gColor, int bColor){

        ShapeDrawable thumb = new ShapeDrawable( new OvalShape() );
        thumb.setIntrinsicHeight( height );
        thumb.setIntrinsicWidth( width );
        thumb.setBounds(new Rect(0, 0, width, height));

        StateListDrawable states = new StateListDrawable();
        states.addState(new int[] {android.R.attr.state_pressed},thumb  );//add to the state list with the state pressed

        thumb = new ShapeDrawable( new OvalShape() );
        thumb.setIntrinsicHeight( height );
        thumb.setIntrinsicWidth( width );
        thumb.setBounds(new Rect(0, 0, width, height));

        states.addState(new int[] { },thumb );//add to the state list with no state

        seekbar.setThumb(states); 
        seekbar.setThumbOffset(0);
  } 
```

继承人我的代码来创建酒吧：

```
 public void setSeekBarProgress(int width, int height, int rColor, int gColor, int bColor){
        GradientDrawable shape = new GradientDrawable(Orientation.BOTTOM_TOP, new int[]{Color.WHITE,Color.rgb(rColor, gColor, bColor)});
        shape.setCornerRadius(50);
        shape.setSize(width, height);
        shape.setBounds(0, 0, width, height);
        ClipDrawable clip = new ClipDrawable(shape, Gravity.LEFT,ClipDrawable.HORIZONTAL);

        shape = new GradientDrawable(Orientation.BOTTOM_TOP, new int[]{Color.WHITE, getResources().getColor(R.color.DimGray)});
        shape.setCornerRadius(50);//change the corners of the rectangle 
        shape.setSize(width, height);
        shape.setBounds(0, 0, width, height);

        LayerDrawable mylayer= new LayerDrawable(new Drawable[]{shape, clip,});

        seekbar.setProgressDrawable(mylayer); 
        seekbar.setProgress(50);

  } 
```

这是我将所有内容放在一起的代码，我在其中设置了搜索栏的高度：

```
 public MySeekBar(Activity activity, AbsoluteLayout ParentLayout, SeekBarParameters parameters)
  {        
        super(activity.getApplicationContext());

        seekbar =(SeekBar)activity.getLayoutInflater().inflate(R.layout.horizontal_seek_bar, ParentLayout,false);
        seekbar.setMax(100);    
         setSeekBarThumb(parameters.widthThumb, parameters.heightThumb,0,100,0);
         setSeekBarProgress(parameters.width, parameters.height,255,69,0); 

         int drawHeight;
         if(parameters.height>parameters.heightThumb) drawHeight=parameters.height;
         else drawHeight=parameters.heightThumb; 

        AbsoluteLayout.LayoutParams params = new   AsoluteLayout.LayoutParams(parameters.width,drawHeight,parameters.xPosition, parameters.yPosition);
        ParentLayout.addView(seekbar, params);                       

  } 
```

我从以下位置膨胀栏的 XML 代码：

```
 <SeekBar xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:gravity="center"
      android:layout_gravity="center"
      android:max="100"
      android:progress="0"
      android:secondaryProgress="0"
      android:maxHeight="10000dip"
      android:id="@+id/slider"
   /> 
```

要更改搜索栏的大小，我使用 ParentLayout.addView(seekbar, params)。
添加视图时，如果我使用我想要的高度，拇指会被切割。如果我使用拇指的高度，则条形图的高度与拇指的高度相同。Android 将栏的大小调整为我用来添加视图的大小。
我尝试使用 s 设置作为条形的 GradientDrawable 的大小`hape.setSize(width, height)`，我也尝试过`shape.setBounds(0, 0, width, height)`，我尝试创建另一个大小合适的图像并添加到 LayerDrawable mylayer。但没有任何效果。

当通过 XML 创建它时，可以使用条形`paddingTop`并将`paddingBottom`其设置为正确的大小。但我不知道如何以编程方式对 GradientDrawable 执行此操作。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-01T13:07:11.687

好吧，太糟糕了，没有回应，但我能够自己回答这个问题。答案是使用 InsetDrawable。您必须将栏的其中一个可绘制对象放入 InsetDrawable。

那是代码：

```
 public void setSeekBarProgress(int width, int height, int rColor, int gColor, int bColor){
        GradientDrawable shape2 = new GradientDrawable(Orientation.BOTTOM_TOP, new int[]{Color.WHITE,Color.rgb(rColor, gColor, bColor)});
        shape2.setCornerRadius(50);                     
        ClipDrawable clip = new ClipDrawable(shape2, Gravity.LEFT,ClipDrawable.HORIZONTAL);

        GradientDrawable shape1 = new GradientDrawable(Orientation.BOTTOM_TOP, new int[]{Color.WHITE, getResources().getColor(R.color.DimGray)});
        shape1.setCornerRadius(50);//change the corners of the rectangle    
        InsetDrawable d1=  new InsetDrawable(shape1,5,5,5,5);//the padding u want to use        

        LayerDrawable mylayer = new LayerDrawable(new Drawable[]{d1,clip});

        seekbar.setProgressDrawable(mylayer); 

        seekbar.setProgress(50);

  } 
```

我希望这可以帮助其他有同样问题的人。

# sql-server - 而不是使用 CDC 表触发行为

> ID：13158834
> 
> 赞同：2
> 
> 时间：2012-10-31T13:15:03.760
> 
> 标签：sql-server

我们在视图上有一个 insted 触发器（用于 DML 操作）。我们正在尝试使用 CDC 表监视视图上的活动，并且我们已将基表（视图所基于的表）定义为 CDC 表。

当我们在视图上运行更新命令（而不是触发器被触发）时，cdc 表中的输出是删除一行和更新一行（操作码 1，然后是操作码 2），我们希望找到一行带有值bedore（操作码3）和一行带有之后的值（操作码4）。

你知道这是否是更新发生时的正常行为，而不是在幕后触发触发器（删除旧记录并插入新记录）？

谢谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:36:45.583

任何更新都可以实现为拆分更新（删除旧值，插入新值）。查询处理器通常这样做是为了保护[万圣节保护](http://blogs.msdn.com/b/craigfr/archive/2008/02/27/halloween-protection.aspx)（您今天必须发布您的问题！）。您的特定更新有一个广泛的计划（拆分更新）。*你应该时刻准备好处理这种情况，所以它为什么*发生并不重要。是否具有替代更新触发器是否会强制执行广泛的计划是一个正交问题。

# c# - 在 Unity3d 中从 iphone 加载图像

> ID：13158837
> 
> 赞同：3
> 
> 时间：2012-10-31T13:15:16.203
> 
> 标签：c#, .net, ios, unity3d

我使用 iOS Unity 插件将图像路径发送到统一。在 Unity 中，我尝试使用接收到的路径获取此图像（我不知道如何将图像从 iphone 发送到统一）。问题：我仍然无法获取图像。 **WWW 错误：在此服务器上找不到请求的 URL。**

```
//Tried both "file:///..." and "file://..."
string path = "file://var/mobile/Applications/173DE26D-4C0E-4DF7-9DC6-9CBB7D4FC954/Documents/Images/image.png" 

Texture texture;

IEnumerator WaitForRequest(WWW www) {
    yield return www;

    if (www.error == null) {
        texture = www.texture;
    }    
}

void Start() {
    WWW www = new WWW(path);
    StartCoroutine(WaitForRequest(www));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T00:47:13.927

确保文件在那里使用

```
System.IO.File.Exists("/var/mobile/Applications/173DE26D-4C0E-4DF7-9DC6-9CBB7D4FC954/Documents/Images/image.png") 
```

因为您的代码看起来正确。

此外，您应该使用 Application.persistentDataPath，而不是硬编码路径。

```
string path = "file://" + System.IO.Path.Combine(Application.persistentDataPath, "Images/image.png"); 
```

顺便说一句，我认为绝对文件 url 应该始终以`file:///`.

# ios - Facebook SDK 3.1：提要对话框与原生对话框

> ID：13158839
> 
> 赞同：1
> 
> 时间：2012-10-31T13:15:23.257
> 
> 标签：ios, facebook, facebook-graph-api

最近我发现 Facebook API 自去年以来发生了很大变化，我必须在我的应用程序中使用新的 SDK（现在是 3.1）。

我试图弄清楚之前使用的[Feed Dialog](https://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/)和新的[Native Dialog](http://developers.facebook.com/docs/howtos/share-native-dialogs-ios-sdk/)之间有什么区别。到目前为止，我可以看到（与 Feed Dialogs 不同）使用 Native 的对话框仅适用于 IOS 6+，并且它使用了一些新的[共享表](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/SLComposeViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40012205)框架。

您能否用两个词描述（建议？）这些 Native Dialogs 相对于 Feed Dialogs 的实际目的（区别、好处？）是什么？也许您的愿景是让代码复杂化以支持在 IOS6+ 设备上[与本机对话框共享是否有意义。](http://developers.facebook.com/docs/howtos/share-native-dialogs-ios-sdk/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:37:49.657

本[机对话框是 iOS 6 系统中包含的一项功能，](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/SLComposeViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40012205)可通过统一的 UI 为所有应用程序轻松共享消息。为此，用户必须在 iOS 首选项窗格中设置他的帐户！大多数其他东西与 Facebook SDK 相关，不包含在系统中。

**本机控制器的优点：**

*   包含在系统中
*   统一的用户界面
*   用于 Twitter、Facebook 等的统一 API

**Facebook SDK 的优点：**

*   需要外部 SDK
*   也可以在旧系统上运行
*   更多功能和更多定制

# asp.net - 显示计算的 N 个有效数字的更优雅的方法是什么？

> ID：13158840
> 
> 赞同：0
> 
> 时间：2012-10-31T13:15:22.443
> 
> 标签：asp.net, c#-4.0, significant-digits

我创建了以下函数来显示数字的最后六位有效数字：

```
private static string ShowSigDigits(long n, int sig)
{
    string[] arr1 = n.ToString().Select(c => c.ToString()).ToArray();

    // reverse the array of string characters 
    Array.Reverse(arr1);
    List<string> stringList = new List<string>();

    for (int x = 0; x < arr1.Length; x++)
    {
        // get the last sig significant digits (loop is zero-based)
        if (x <= sig-1)
        {
            stringList.Add(arr1[x]);
        }
    }

    stringList.Reverse();

    return(string.Join("", stringList.ToArray()));
} 
```

例如，输入 182736734,6 将得到 736734。

我确信有一种更有效的方法可以做到这一点，并希望得到一些建议。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:19:32.337

将 (x % 1000000) 转换为字符串，其中 % 代表模运算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:17:11.117

有许多不同的方法可以做到这一点 - 这[`Substring`](http://msdn.microsoft.com/en-us/library/system.string.substring.aspx)是最先想到的方法之一（就像 VB.NET 一样`Strings.Right`）。

```
string nString = n.ToString();
return nString.Substring(nString.Length - sig); 
```

# c++ - 奇怪的 const char* 行为

> ID：13158842
> 
> 赞同：3
> 
> 时间：2012-10-31T13:15:29.037
> 
> 标签：c++, char, constants

GetTypeName 为 std::string，如下代码

```
printf("%#x\n", proto->GetTypeName().c_str());
printf("%s\n", proto->GetTypeName().c_str());
const char *res = proto->GetTypeName().c_str();
printf("%#x\n",res);
printf("%s\n",res); 
```

产生这个输出：

```
0x90ef78
ValidTypeName
0x90ef78
ю■ю■ю■ю■ю■ю■ю■ю■ю■ю■ю■ю■ю■ю■ю■ю■ю■ю■ю■ю■ю■ю■ю■ю■ю■ю■ю■ю■←ЬЬQщZ 
```

地址总是相同的；以下代码（行是交换）

```
const char *res = proto->GetTypeName().c_str();
printf("%#x\n",res);
printf("%s\n",res);
printf("%#x\n", proto->GetTypeName().c_str());
printf("%s\n", proto->GetTypeName().c_str()); 
```

产生这个输出，地址总是不同的：

```
0x57ef78
  Y
0x580850
ValidTypeName 
```

我究竟做错了什么？

```
strlen(res) 
```

返回无效的大小，所以我什至不能 strcpy.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T13:24:04.523

YourGetTypeName 函数返回一个 std::string 并且您正在调用 c_str 以获取指向该字符串中内部数据的指针。

由于它是临时的，因此您返回的 std::string 将在语句结束时被删除

```
const char *res = proto->GetTypeName().c_str(); 
```

但是你仍然有 res 指向现在删除的数据。

编辑：将您的代码更改为：-

```
const std::string& res = proto->GetTypeName(); 
```

并在 printf 中的该字符串上调用 .c_str() ，如下所示：-

```
printf("%#x\n",res.c_str());
printf("%s\n",res.c_str()); 
```

将临时分配给引用会将该临时的生命周期延长到与引用的生命周期相同...

更好的是，只需使用 std::string 和 iostream 进行打印，并在不必要时停止使用低级指针:)

# java - 具有多个线程的 java 关闭钩子

> ID：13158847
> 
> 赞同：8
> 
> 时间：2012-10-31T13:15:35.050
> 
> 标签：java, multithreading, shutdown-hook

我正在尝试让一个关闭挂钩在我的 ubuntu 服务器上工作，但是我似乎遇到了多个线程的问题。使用基本的 ShutdownHook，当我使用 杀死进程时，以下代码确实有效`kill <PID>`，这意味着关闭行为被激活。

```
public static void main(String[] args) {
    ShutdownHook shutDown = new ShutdownHook();
    shutDown.attachShutDownHook();

    while(true){}
} 
```

但是，带有附加线程的相同代码不会

```
public static void main(String[] args) {
    ShutdownHook shutDown = new ShutdownHook();
    shutDown.attachShutDownHook();

    (new Thread() {
        public void run() {
            while ( true ) {}
        }
    }).start();

    while(true){}
} 
```

有任何想法吗？

```
class ShutdownHook {

    ShutdownHook() {
    }

    public void attachShutDownHook() {

            Runtime.getRuntime().addShutdownHook(new Thread() {
                    @Override
                    public void run() {
                            System.out.println("Shut down hook activating");
                    }
            });
            System.out.println("Shut Down Hook Attached.");

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:22:46.010

当仍有非守护线程在运行时，JVM 不会退出。尝试调用`setDaemon(true)`您的新线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:43:16.803

以我自己的项目为例；

我的核心类产生了一大堆工作线程，工作人员运行必须完成的事务。

在我的核心课程中；

```
Runtime.getRuntime().addShutdownHook(new ShutdownCleanup()); 
```

看起来像;

```
public final class ShutdownCleanup extends Thread() {
    public void run() {
        log("waiting for worker threads to finish...");
        while(WorkerThread.transactionInProgress()) {
            Thread.sleep(1000);
        }
        //close various sockets and resources
    }
} 
```

在我点击`Ctrl+C`终端的那一刻，`log`消息出现了。所以关闭钩子立即激活，它不是在程序准备好死亡时运行的东西，而是在收到关闭或终止请求后立即运行。

出于这个原因，我相信其他人所说的关闭钩子永远不会被调用，而仍然有一个线程活着是错误的。无论如何，只有在一切都死了之后才激活的关闭挂钩有什么意义？

可能是您正在使用硬杀，例如 -9。您是否尝试过使用`Ctrl+C`or正常关机`SIGINT`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:21:23.603

[`java.lang.Runtime.addShutdownHook( Thread )`](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)注册一个新的虚拟机关闭钩子：

> Java 虚拟机关闭以响应两种事件：
> 
> *   程序正常退出，当最后一个非守护线程退出或调用 exit（等效于 System.exit）方法时，或
>     
>     
> *   虚拟机响应用户中断（例如键入 ^C）或系统范围的事件（例如用户注销或系统关闭）而终止。

您的代码无限期运行，因此永远不会调用关闭挂钩。

[修改后]

你用哪个`kill`？

kill -9 是不可捕获的

kill -2 可用于模拟 ctrl-c (SIGINT)

# python - 使用 http put 方法的 webapp2 有什么好的工作示例吗？

> ID：13158848
> 
> 赞同：1
> 
> 时间：2012-10-31T13:15:36.780
> 
> 标签：python, google-app-engine

我想使用 HTTP PUT 方法，将数据发送到我的谷歌应用引擎应用程序，有什么好的例子吗？我在谷歌上找不到任何东西。

我下面的例子也不起作用。

```
import webapp2

class MainHandler(webapp2.RequestHandler):
    def put(self):
        self.response.write('test put')

app = webapp2.WSGIApplication([
    (r'/test/(.*)', MainHandler)
], debug=True) 
```

我得到了这个错误。

```
TypeError: put() takes exactly 1 argument (2 given) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T13:25:11.113

你正在传递 put 一个参数，并像这样映射它：

```
(r'/test/(.*)', MainHandler) 
```

之后`(.*)`通过 put 方法访问此 urlpath 的任何方法`/test/`。
像这样更新您的处理程序：

```
class MainHandler(webapp2.RequestHandler):
    def put(self, myarg):
        self.response.write('test put, myarg is %s' %myarg) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T13:25:26.363

```
TypeError: put() takes exactly 1 argument (2 given) 
```

表示使用 2 个参数调用方法“put”，而您仅指定 1（self）。

这应该有效：

```
class MainHandler(webapp2.RequestHandler):
    def put(self, param):
        self.response.write('test put') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T18:04:18.577

您可以使用请求对象中的 POST 变量

```
class MainHandler(webapp2.RequestHandler):
    def put(self):
        self.response.write(self.request.POST) 
```

使用 curl 的示例用法

```
curl -X PUT -d"x=1&y=2" http://localhost:8080/add 
```

# php - 狮身人面像搜索 - 多次计数

> ID：13158849
> 
> 赞同：0
> 
> 时间：2012-10-31T13:15:37.797
> 
> 标签：php, mysql, search, sphinx

我有一个包含专辑和图像的项目列表，我想像这样显示它们：

第 1 项（3 张专辑，10 张图片）

第 2 项（2 张专辑，5 张图片）

我可以按专辑或图像使用分组，但对于第二个，我需要进行额外的查询。

那么，是否存在另一种在同一个查询中同时保存两个计数的可能性？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:20:29.643

将您的相册和图像计数索引到项目表中。如果为这些表创建触发器，显示它们会更快，并且不会丢失数据。

然后你可以用 sphinx 索引这些字段。

# php - 如何获取值元素 [@attributes]

> ID：13158855
> 
> 赞同：0
> 
> 时间：2012-10-31T13:15:50.863
> 
> 标签：php, xml

```
 SimpleXMLElement Object
 (
        [@attributes] => Array
            (
                [projectTypeID] => 10
                [genContentID] => 000001
                [language] => en
                [title] => Travel to developing countries
                [subContent] => default
            )

        [versionInfo] => SimpleXMLElement Object
            (
                [@attributes] => Array
                    (
                        [reviewDate] => 2/20/2012
                        [reviewedBy] => Harvey Simon
                    )

            )
     ) 
```

如何获取`@attributes`元素的值？

```
 [title] => Travel to developing countries

   [reviewDate] => 2/20/2012 
```

这是我的代码

```
 <?php   $xml = simplexml_load_file('000001.xml','SimpleXMLElement', LIBXML_NOCDATA);

          echo "<pre>";
           print_r($xml);
          echo "</pre>";

             echo $xml->{'@attributes'}['title'];  // not working
        echo "<br/>";
       echo $xml->versionInfo->{'@attributes'}['reviewDate'];   // not working

   ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:19:38.667

使用属性（）方法：

```
$attrs = $xml->versionInfo->attributes();
echo $attrs['reviewDate']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:21:48.637

试试下面的代码：

```
foreach($xml as $key => $value){
      foreach($value->attributes() as $attributeskey0 => $attributesvalue1){
              echo "________[$attributeskey0] = $attributesvalue1";
      }
} 
```

# sql - 如何使用 cte 查询和解析相邻列表层次结构？

> ID：13158857
> 
> 赞同：2
> 
> 时间：2012-10-31T13:15:55.843
> 
> 标签：sql, sql-server, sql-server-2008, tsql, hierarchy

如何查询此父子层次结构以生成其中级别位于其自己的列中的结果集？样本数据：

```
SET NOCOUNT ON;
USE Tempdb;

IF OBJECT_ID('dbo.Employees', 'U') IS NOT NULL DROP TABLE dbo.Employees;

CREATE TABLE dbo.Employees
(
  empid   INT         NOT NULL PRIMARY KEY,
  mgrid   INT         NULL     REFERENCES dbo.Employees,
  empname VARCHAR(25) NOT NULL,
  salary  MONEY       NOT NULL,
  CHECK (empid <> mgrid),
  CHECK (empid > 0)
);

CREATE UNIQUE INDEX idx_unc_mgrid_empid ON dbo.Employees(mgrid, empid);

INSERT INTO dbo.Employees(empid, mgrid, empname, salary) VALUES
  (1,  NULL, 'David'  , $10000.00),
  (2,  1,    'Eitan'  ,  $7000.00),
  (3,  1,    'Ina'    ,  $7500.00),
  (4,  2,    'Seraph' ,  $5000.00),
  (5,  2,    'Jiru'   ,  $5500.00),
  (6,  2,    'Steve'  ,  $4500.00),
  (7,  3,    'Aaron'  ,  $5000.00),
  (8,  5,    'Lilach' ,  $3500.00),
  (9,  7,    'Rita'   ,  $3000.00),
  (10, 5,    'Sean'   ,  $3000.00),
  (11, 7,    'Gabriel',  $3000.00),
  (12, 9,    'Emilia' ,  $2000.00),
  (13, 9,    'Michael',  $2000.00),
  (14, 9,    'Didi'   ,  $1500.00);

select * from dbo.Employees
go     

;WITH Tree (empid, mgrid, lv)
AS (

SELECT empid, mgrid, 1
FROM Employees
WHERE mgrid IS NULL 

UNION ALL

SELECT E.empid, E.mgrid, lv + 1
FROM Employees AS E
JOIN Tree
ON E.mgrid= Tree.empid
)
SELECT empid, mgrid, lv
FROM Tree
ORDER BY Lv, empid 
```

结果表应具有类似的结构

```
+-------+-----+--------+--------+--------+--------+--------+
| empid | lvl | level1 | level2 | level3 | level4 | level5 |
+-------+-----+--------+--------+--------+--------+--------+
|     1 |   1 |      1 | NULL   | NULL   | NULL   | NULL   |
|     2 |   2 |      1 | 2      | NULL   | NULL   | NULL   |
|     3 |   2 |      1 | 3      | NULL   | NULL   | NULL   |
|     4 |   3 |      1 | 2      | 4      | NULL   | NULL   |
|     5 |   3 |      1 | 2      | 5      | NULL   | NULL   |
|     6 |   3 |      1 | 2      | 6      | NULL   | NULL   |
|     7 |   3 |      1 | 3      | 7      | NULL   | NULL   |
|     8 |   4 |      1 | 2      | 5      | 8      | NULL   |
|     9 |   4 |      1 | 3      | 7      | 9      | NULL   |
|    10 |   4 |      1 | 2      | 5      | 10     | NULL   |
|    11 |   4 |      1 | 3      | 7      | 11     | NULL   |
|    12 |   5 |      1 | 3      | 7      | 9      | 12     |
|    13 |   5 |      1 | 3      | 7      | 9      | 13     |
|    14 |   5 |      1 | 3      | 7      | 9      | 14     |
+-------+-----+--------+--------+--------+--------+--------+ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T13:25:39.640

您的示例数据使问题更清楚。您可以在下降时收集经理级别：

```
; with  Tree as
        (
        SELECT  empid
        ,       mgrid
        ,       1 as lv
        ,       1 as level1
        ,       null as level2
        ,       null as level3
        ,       null as level4
        ,       null as level5
        FROM    Employees
        WHERE   mgrid IS NULL 
        UNION ALL
        SELECT  E.empid
        ,       E.mgrid
        ,       T.lv + 1
        ,       T.level1
        ,       case when T.lv = 1 then E.empid else t.level2 end
        ,       case when T.lv = 2 then E.empid else t.level3 end
        ,       case when T.lv = 3 then E.empid else t.level4 end
        ,       case when T.lv = 4 then E.empid else t.level5 end
        FROM    Employees AS E
        JOIN    Tree T
        ON      E.mgrid = T.empid
        )
select  *
from    Tree 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!3/ba389/1/0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T13:36:53.023

```
;WITH Tree (empid, level, level1, level2, level3, level4, level5)
AS (

SELECT empid, 1, empid, NULL, NULL, NULL, NULL
FROM Employees
WHERE mgrid IS NULL 

UNION ALL

SELECT E.empid, T.level + 1,
       CASE WHEN T.level+1 = 1 THEN E.empid ELSE T.level1 END,
       CASE WHEN T.level+1 = 2 THEN E.empid ELSE T.level2 END,
       CASE WHEN T.level+1 = 3 THEN E.empid ELSE T.level3 END,
       CASE WHEN T.level+1 = 4 THEN E.empid ELSE T.level4 END,
       CASE WHEN T.level+1 = 5 THEN E.empid ELSE T.level5 END 
FROM Employees AS E
JOIN Tree T
ON E.mgrid= T.empid
)
SELECT empid, level, level1, level2, level3, level4, level5
FROM Tree 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:31:24.973

有支点？

```
;WITH Tree (empid, mgrid, lv)
AS (

SELECT empid, mgrid, 1
FROM @Employees
WHERE mgrid IS NULL 

UNION ALL

SELECT E.empid, E.mgrid, lv + 1
FROM @Employees AS E
JOIN Tree
ON E.mgrid= Tree.empid
)
select *
from
Tree
pivot 
(count(empid) for lv in ([1],[2],[3],[4],[5]))p 
```

# objective-c - 可调整大小的自定义 NSPanel

> ID：13158858
> 
> 赞同：0
> 
> 时间：2012-10-31T13:15:58.747
> 
> 标签：objective-c, macos, cocoa, hud

好的，这是我的情况：

*   我正在尝试类似 HUD 的自定义控件集合[SNRHUDKit](https://github.com/indragiek/SNRHUDKit)。
*   我专门`SNRHUDWindow`用作我的主窗口类
*   无论如何，尽管它确实有效，但当用户拖动其右下角时，我无法调整大小`NSWindow`（或- 没有太大区别）。`NSPanel`

的代码`SNRHUDWindow`是：

```
//
//  SNRHUDWindow.m
//  SNRHUDKit
//
//  Created by Indragie Karunaratne on 12-01-22.
//  Copyright (c) 2012 indragie.com. All rights reserved.
//

#import "SNRHUDWindow.h"
#import "NSBezierPath+MCAdditions.h"

#define SNRWindowTitlebarHeight         22.f
#define SNRWindowBorderColor            [NSColor blackColor]
#define SNRWindowTopColor               [NSColor colorWithDeviceWhite:0.240 alpha:0.960]
#define SNRWindowBottomColor            [NSColor colorWithDeviceWhite:0.150 alpha:0.960]
#define SNRWindowHighlightColor         [NSColor colorWithDeviceWhite:1.000 alpha:0.200]
#define SNRWindowCornerRadius           5.f

#define SNRWindowTitleFont              [NSFont systemFontOfSize:11.f]
#define SNRWindowTitleColor             [NSColor colorWithDeviceWhite:0.700 alpha:1.000]
#define SNRWindowTitleShadowOffset      NSMakeSize(0.f, 1.f)
#define SNRWindowTitleShadowBlurRadius  1.f
#define SNRWindowTitleShadowColor       [NSColor blackColor]

#define SNRWindowButtonSize             NSMakeSize(18.f, 18.f)
#define SNRWindowButtonEdgeMargin       5.f
#define SNRWindowButtonBorderColor      [NSColor colorWithDeviceWhite:0.040 alpha:1.000]
#define SNRWindowButtonGradientBottomColor  [NSColor colorWithDeviceWhite:0.070 alpha:1.000]
#define SNRWindowButtonGradientTopColor     [NSColor colorWithDeviceWhite:0.220 alpha:1.000]
#define SNRWindowButtonDropShadowColor  [NSColor colorWithDeviceWhite:1.000 alpha:0.100]
#define SNRWindowButtonCrossColor       [NSColor colorWithDeviceWhite:0.450 alpha:1.000]
#define SNRWindowButtonCrossInset       1.f
#define SNRWindowButtonHighlightOverlayColor [NSColor colorWithDeviceWhite:0.000 alpha:0.300]
#define SNRWindowButtonInnerShadowColor [NSColor colorWithDeviceWhite:1.000 alpha:0.100]
#define SNRWindowButtonInnerShadowOffset NSMakeSize(0.f, 0.f)
#define SNRWindowButtonInnerShadowBlurRadius    1.f

@interface SNRHUDWindowButtonCell : NSButtonCell
@end

@interface SNRHUDWindowFrameView : NSView
- (void)snr_drawTitleInRect:(NSRect)rect;
@end

@implementation SNRHUDWindow {
    NSView *__customContentView;
}

- (id)initWithContentRect:(NSRect)contentRect styleMask:(NSUInteger)windowStyle backing:(NSBackingStoreType)bufferingType defer:(BOOL)deferCreation
{
    if ((self = [super initWithContentRect:contentRect styleMask:NSBorderlessWindowMask backing:bufferingType defer:deferCreation])) {
        [self setOpaque:NO];
        [self setBackgroundColor:[NSColor clearColor]];
        [self setMovableByWindowBackground:YES];
        [self setLevel:NSFloatingWindowLevel];
    }
    return self;
}

- (NSRect)contentRectForFrameRect:(NSRect)windowFrame
{
    windowFrame.origin = NSZeroPoint;
    windowFrame.size.height -= SNRWindowTitlebarHeight;
    return windowFrame;
}

+ (NSRect)frameRectForContentRect:(NSRect)windowContentRect
                        styleMask:(NSUInteger)windowStyle
{
    windowContentRect.size.height += SNRWindowTitlebarHeight;
    return windowContentRect;
}

- (NSRect)frameRectForContentRect:(NSRect)windowContent
{
    windowContent.size.height += SNRWindowTitlebarHeight;
    return windowContent;
}

- (void)setContentView:(NSView *)aView
{
    if ([__customContentView isEqualTo:aView]) {
        return;
    }
    NSRect bounds = [self frame];
    bounds.origin = NSZeroPoint;
    SNRHUDWindowFrameView *frameView = [super contentView];
    if (!frameView) {
        frameView = [[SNRHUDWindowFrameView alloc] initWithFrame:bounds];
        NSSize buttonSize = SNRWindowButtonSize;
        NSRect buttonRect = NSMakeRect(SNRWindowButtonEdgeMargin, NSMaxY(frameView.bounds) -(SNRWindowButtonEdgeMargin + buttonSize.height), buttonSize.width, buttonSize.height);
        NSButton *closeButton = [[NSButton alloc] initWithFrame:buttonRect];
        [closeButton setCell:[[SNRHUDWindowButtonCell alloc] init]];
        [closeButton setButtonType:NSMomentaryChangeButton];
        [closeButton setTarget:self];
        [closeButton setAction:@selector(close)];
        [closeButton setAutoresizingMask:NSViewMaxXMargin | NSViewMinYMargin];
        [frameView addSubview:closeButton];
        [super setContentView:frameView];
    }
    if (__customContentView) {
        [__customContentView removeFromSuperview];
    }
    __customContentView = aView;
    [__customContentView setFrame:[self contentRectForFrameRect:bounds]];
    [__customContentView setAutoresizingMask:NSViewWidthSizable | NSViewHeightSizable];
    [frameView addSubview:__customContentView];
}

- (NSView *)contentView
{
    return __customContentView;
}

- (void)setTitle:(NSString *)aString
{
    [super setTitle:aString];
    [[super contentView] setNeedsDisplay:YES];
}

- (BOOL)canBecomeKeyWindow
{
    return YES;
}
@end

@implementation SNRHUDWindowFrameView

- (void)drawRect:(NSRect)dirtyRect
{
    NSRect drawingRect = NSInsetRect(self.bounds, 0.5f, 0.5f);
    NSBezierPath *path = [NSBezierPath bezierPathWithRoundedRect:drawingRect xRadius:SNRWindowCornerRadius yRadius:SNRWindowCornerRadius];
    [NSGraphicsContext saveGraphicsState];
    [path addClip];
    // Fill in the title bar with a gradient background
    NSRect titleBarRect = NSMakeRect(0.f, NSMaxY(self.bounds) - SNRWindowTitlebarHeight, self.bounds.size.width, SNRWindowTitlebarHeight);
    NSGradient *titlebarGradient = [[NSGradient alloc] initWithStartingColor:SNRWindowBottomColor endingColor:SNRWindowTopColor];
    [titlebarGradient drawInRect:titleBarRect angle:90.f];
    // Draw the window title
    [self snr_drawTitleInRect:titleBarRect];
    // Rest of the window has a solid fill
    NSRect bottomRect = NSMakeRect(0.f, 0.f, self.bounds.size.width, self.bounds.size.height - SNRWindowTitlebarHeight);
    [SNRWindowBottomColor set];
    [NSBezierPath fillRect:bottomRect];
    // Draw the highlight line around the top edge of the window
    // Outset the width of the rectangle by 0.5px so that the highlight "bleeds" around the rounded corners
    // Outset the height by 1px so that the line is drawn right below the border
    NSRect highlightRect = NSInsetRect(drawingRect, 0.f, 0.5f);
    // Make the height of the highlight rect something bigger than the bounds so that it won't show up on the bottom
    highlightRect.size.height += 50.f;
    highlightRect.origin.y -= 50.f;
    NSBezierPath *highlightPath = [NSBezierPath bezierPathWithRoundedRect:highlightRect xRadius:SNRWindowCornerRadius yRadius:SNRWindowCornerRadius];
    [SNRWindowHighlightColor set];
    [highlightPath stroke];
    [NSGraphicsContext restoreGraphicsState];
    [SNRWindowBorderColor set];
    [path stroke];
}

- (void)snr_drawTitleInRect:(NSRect)titleBarRect
{
    NSString *title = [[self window] title];
    if (!title) { return; }
    NSShadow *shadow = [NSShadow new];
    [shadow setShadowColor:SNRWindowTitleShadowColor];
    [shadow setShadowOffset:SNRWindowTitleShadowOffset];
    [shadow setShadowBlurRadius:SNRWindowTitleShadowBlurRadius];
    NSMutableParagraphStyle *style = [NSMutableParagraphStyle new];
    [style setAlignment:NSCenterTextAlignment];
    NSDictionary *attributes = [NSDictionary dictionaryWithObjectsAndKeys:SNRWindowTitleColor, NSForegroundColorAttributeName, SNRWindowTitleFont, NSFontAttributeName, shadow, NSShadowAttributeName, style, NSParagraphStyleAttributeName, nil];
    NSAttributedString *attrTitle = [[NSAttributedString alloc] initWithString:title attributes:attributes];
    NSSize titleSize = attrTitle.size;
    NSRect titleRect = NSMakeRect(0.f, NSMidY(titleBarRect) - (titleSize.height / 2.f), titleBarRect.size.width, titleSize.height);
    [attrTitle drawInRect:NSIntegralRect(titleRect)];
}
@end

@implementation SNRHUDWindowButtonCell

- (void)drawWithFrame:(NSRect)cellFrame inView:(NSView *)controlView
{
    NSRect drawingRect = NSInsetRect(cellFrame, 1.5f, 1.5f);
    drawingRect.origin.y = 0.5f;
    NSRect dropShadowRect = drawingRect;
    dropShadowRect.origin.y += 1.f;
    // Draw the drop shadow so that the bottom edge peeks through
    NSBezierPath *dropShadow = [NSBezierPath bezierPathWithOvalInRect:dropShadowRect];
    [SNRWindowButtonDropShadowColor set];
    [dropShadow stroke];
    // Draw the main circle w/ gradient & border on top of it
    NSBezierPath *circle = [NSBezierPath bezierPathWithOvalInRect:drawingRect];
    NSGradient *gradient = [[NSGradient alloc] initWithStartingColor:SNRWindowButtonGradientBottomColor endingColor:SNRWindowButtonGradientTopColor];
    [gradient drawInBezierPath:circle angle:270.f];
    [SNRWindowButtonBorderColor set];
    [circle stroke];
    // Draw the cross
    NSBezierPath *cross = [NSBezierPath bezierPath];
    CGFloat boxDimension = floor(drawingRect.size.width * cos(45.f)) - SNRWindowButtonCrossInset;
    CGFloat origin = round((drawingRect.size.width - boxDimension) / 2.f);
    NSRect boxRect = NSMakeRect(1.f + origin, origin, boxDimension, boxDimension);
    NSPoint bottomLeft = NSMakePoint(boxRect.origin.x, NSMaxY(boxRect));
    NSPoint topRight = NSMakePoint(NSMaxX(boxRect), boxRect.origin.y);
    NSPoint bottomRight = NSMakePoint(topRight.x, bottomLeft.y);
    NSPoint topLeft = NSMakePoint(bottomLeft.x, topRight.y);
    [cross moveToPoint:bottomLeft];
    [cross lineToPoint:topRight];
    [cross moveToPoint:bottomRight];
    [cross lineToPoint:topLeft];
    [SNRWindowButtonCrossColor set];
    [cross setLineWidth:2.f];
    [cross stroke];
    // Draw the inner shadow
    NSShadow *shadow = [[NSShadow alloc] init];
    [shadow setShadowColor:SNRWindowButtonInnerShadowColor];
    [shadow setShadowBlurRadius:SNRWindowButtonInnerShadowBlurRadius];
    [shadow setShadowOffset:SNRWindowButtonInnerShadowOffset];
    NSRect shadowRect = drawingRect;
    shadowRect.size.height = origin;
    [NSGraphicsContext saveGraphicsState];
    [NSBezierPath clipRect:shadowRect];
    [circle fillWithInnerShadow:shadow];
    [NSGraphicsContext restoreGraphicsState];
    if ([self isHighlighted]) {
        [SNRWindowButtonHighlightOverlayColor set];
        [circle fill];
    }
}

@end 
```

任何想法可能导致`NSPanel`失去调整大小的能力？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T03:11:15.373

我也在使用这个框架，默认情况下调整大小不起作用的原因是 initWithContentRect 方法中的这一行：

```
if ((self = [super initWithContentRect:contentRect styleMask:NSBorderlessWindowMask backing:bufferingType defer:deferCreation])) { 
```

如您所见，它没有传递提供给 super 的 init 方法的 windowStyle 位掩码，而是仅传递 NSBorderlessWindowMask。稍作研究表明，要完全调整大小，styleMask 必须在位掩码中包含 NSResizableWindowMask。

因此，将行更改为

```
if ((self = [super initWithContentRect:contentRect styleMask:NSBorderlessWindowMask|NSResizableWindowMask backing:bufferingType defer:deferCreation])) { 
```

应该可以解决您的问题。

# function - 无法使用 matlab 函数

> ID：13158860
> 
> 赞同：1
> 
> 时间：2012-10-31T13:16:06.910
> 
> 标签：function, matlab

我想在球形地球上从一个点移动到另一个点，当我抬起头时，我发现[`reckon`](http://www.mathworks.in/help/map/ref/reckon.html)matlab 中有一个函数可以满足我的需要。但是当我调用它时，它会说`Undefined function 'reckon' for input arguments of type 'double`。这意味着该函数可能不在我的库中。所以我从互联网上找到了 m 文件并进行了尝试，但随后它导致使用不同功能的相同错误，我发现该功能`reckon`取决于该功能。所以我也将它包含在我的文件夹中，然后又缺少一个新功能......等等。

我有 Matlab R2011b。

这些函数似乎是内置的 matlab 函数，因为它们显示在帮助中，但由于我是 matlab 的新手，也许我错了。可以做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T13:49:11.557

由于我只是想使用 Mapping Toolbox 的功能，经过一番查找，我发现它们都在一个网站上的一个包中。如果其他人也想要它们，并且没有映射工具箱，您可以在这里获得所有功能。

[http://mooring.ucsd.edu/software/matlab/doc/toolbox/geo/index.html](http://mooring.ucsd.edu/software/matlab/doc/toolbox/geo/index.html)

# wpf - Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteException - 类型 Universe 无法解析程序集

> ID：13158862
> 
> 赞同：1
> 
> 时间：2012-10-31T13:16:27.830
> 
> 标签：wpf, xaml, crash, visual-studio-2012, designer

我发布这个基本上是为了继续一个已关闭的线程：

[“尝试在 VS 2012 中打开 VS 2010 项目时出错：类型 Universe 无法解析程序集”](https://stackoverflow.com/questions/13131161/error-trying-to-open-a-vs-2010-project-in-vs-2012-type-universe-cannot-resolve)，作者： [user1766173](https://stackoverflow.com/users/1766173/user1766173)

我已经深入研究了这个问题并缩小了一些范围，因此希望可以恢复讨论。

我正在使用 VS 2012（我没有 2010 可以比较）。我的解决方案`"TWConsole"`在周五运行良好，但到周二却不行。两个版本都编译运行良好，但在设计器中，项目中的任何 XAML 文件都无法打开而不会崩溃。但是，从同一解决方案中的不同项目打开 XAML 可以正常工作。我在谷歌上搜索的有关此问题的所有内容都导致有人处理第 3 方集会。

但是，在我的情况下，无法解析的程序集是我自己的——由构建生成的程序集。

有趣的是，我发现通过用上周一构建的“秘密”替换 bin\Debug 文件夹中的 TWConsole.exe，一切正常！...也就是说，直到我重建解决方案，并且该 exe 被替换，然后 XAML 设计器开始崩溃。

所以有一些与我添加的新代码有关的东西以某种方式“感染”了主程序集。与此同时，在任何人都可以用解决方案来拯救我之前，我将从最后一个可行的解决方案开始，一次只添加一行代码，直到问题浮出水面，以便查明确切的原因。

谢谢

编辑：我已经能够将问题的根源缩小到一行代码：

```
public static bool GetFavWashPkgs(out List<WashPkg> wPkgs) 
```

如果我删除“out”关键字，然后编译，设计器崩溃问题就解决了。同样适用于“ref”关键字——在这种情况下也是一个禁忌。我已经尝试了一个小时，使用测试类和测试函数在更基本的测试中重新创建此异常，但无济于事。我只能报告这个“敏感”函数被重载，自定义类 WashPkg 具有属性 [serializable()]，并且该函数所在的类是静态的。如果我修改函数声明，使 List 的类型是 int 而不是 WashPkg，问题也解决了。所以在这一点上，为什么设计师不喜欢这个函数声明仍然是个谜。

# android - 在 Android 中以编程方式定位视图

> ID：13158866
> 
> 赞同：0
> 
> 时间：2012-10-31T13:16:39.983
> 
> 标签：android, textview, android-linearlayout

我有一个在垂直 LinearLayout 中创建 3 个 textView 的方法：

```
public LinearLayout CreateLayout() {

    LinearLayout aLap = new LinearLayout(this);

    LinearLayout.LayoutParams TextParams = new LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.WRAP_CONTENT,
            LinearLayout.LayoutParams.WRAP_CONTENT);

    TextView txtName = new TextView(this);
    txtName.setText(result1);

    txtName.setLayoutParams(TextParams);
    txtName.setGravity(Gravity.CENTER);
    txtName.setPadding(20, 8, 20, 4);
    txtName.setTextSize(20);
    txtName.setTextColor(Color.parseColor("#000000"));

    TextView txtTime = new TextView(this);
    txtTime.setText(result2);
    txtTime.setLayoutParams(TextParams);
    txtTime.setGravity(Gravity.CENTER);
    txtTime.setTextSize(20);
    txtTime.setPadding(20, 4, 10, 4);
    txtTime.setTextColor(Color.parseColor("#000000"));

    android.view.ViewGroup.LayoutParams Params = new ViewGroup.LayoutParams(
            android.view.ViewGroup.LayoutParams.MATCH_PARENT, 150);

    TextView rep = new TextView(this);
    String Rep = sharedPrefs.getString("R_PREFS", "2");

    rep.setLayoutParams(TextParams);
    rep.setGravity(Gravity.CENTER);
    rep.setTextSize(20);
    rep.setPadding(20, 4, 10, 4);
    rep.setTextColor(Color.parseColor("#000000"));
    rep.setText("Test: " + Rep);

    aLap.setLayoutParams(Params);
    aLap.setBackgroundResource(R.drawable.bg);
    aLap.setOrientation(LinearLayout.VERTICAL);
    aLap.setPadding(3, 3, 3, 3);
    aLap.addView(txtName);
    aLap.addView(txtTime);
    aLap.addView(rep);

    return aLap;

} 
```

我使用垂直布局，因为我希望将 textViews 放在彼此下方。现在我希望将 ImageView 放置在此 textViews 的右侧并垂直居中。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:22:43.597

您无法通过***单个*** `LinearLayout`. 我建议你使用`RelativeLayout`. 它更灵活。您可以通过向视图添加规则来将更多子视图添加到`RelativeLayout`所需位置。查看这篇文章，了解如何在运行时添加规则`Relative Layout`：[如何以编程方式在 RelativeLayout 中布局视图？](https://stackoverflow.com/questions/2305395/laying-out-views-in-relativelayout-programmatically).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:41:49.693

```
<LinearLayout  orientation="horizontal">
  <LinearLayout orientation="vertical">
    <TextView view1/>
    <TextView view1/>
    <TextView view1/>
  </LinearLayout>
  <ImageView height=fill_parent scaleType="center"/>
</LinearLayout> 
```

或多或少是你想要的我想

# c# - C# httpwebrequest 响应流中的空白字符

> ID：13158867
> 
> 赞同：1
> 
> 时间：2012-10-31T13:16:41.823
> 
> 标签：c#, httpwebrequest, responsestream

我正在尝试使用 C# 中的 httpwebrequests 从网络服务器读取响应。我使用以下代码：

```
UriBuilder urib = new UriBuilder();
urib.Host = "wikipedia.com";

HttpWebRequest req = WebRequest.CreateHttp(urib.Uri);
req.KeepAlive = false;
req.Host = "wikipedia.com/";
req.Method = "GET";

HttpWebResponse response = (HttpWebResponse) req.GetResponse();
byte[] buffer = new byte[response.ContentLength];
System.IO.Stream stream = response.GetResponseStream();
stream.Read(buffer, 0, buffer.Length);

Console.WriteLine(System.Text.Encoding.ASCII.GetString(buffer, 0, buffer.Length)); 
```

该代码确实检索到正确数量的数据（我比较了用于创建缓冲区的内容长度，与控制台输出的长度，它们是相同的。我的问题是最后 80% 左右的响应是空白的字符。它们都是 0x00。我用几个页面测试了这个，包括 wikipedia.com，它只是出于某种原因切断了中间文件。

我是否误解/误用了使用 webrequests 的方式，或者任何人都可以在这里发现错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:20:54.347

尝试使用此方法：

```
public static String GetResponseString(Uri url, CookieContainer cc)
{
    HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url);
    request.Method = WebRequestMethods.Http.Get;
    request.CookieContainer = cc;
    request.AutomaticDecompression = DecompressionMethods.GZip;

    HttpWebResponse response = (HttpWebResponse)request.GetResponse();

    StreamReader reader = new StreamReader(response.GetResponseStream());

    String responseString = reader.ReadToEnd();

    response.Close();

    return responseString;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:10:03.837

您的代码有几个问题：

1.  您尝试使用[Stream.Read 一口气](http://msdn.microsoft.com/en-us/library/system.io.stream.read.aspx)阅读整个响应- 这不是它的设计目的。这应该用于更优化的读取，例如 4KB 块。

2.  您以 ASCII 编码读取 HTML 响应 - 您确定该页面不包含任何 Unicode 字符吗？为了安全起见，我会坚持使用 UTF-8 编码（或者读取`Content-Type`响应中的标头）。

从字节流中读取字符（`response`本质上就是这样）时，推荐的方法是使用[StreamReader](http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx)。更具体地说，如果您想一口气读取整个流，请使用[StreamReader.ReadToEnd](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readtoend.aspx)。

您的代码可以缩短为：

```
HttpWebRequest req = WebRequest.CreateHttp(new Uri("http://wikipedia.org"));
req.Method = WebRequestMethods.Http.Get;
using (var response = (HttpWebResponse)req.GetResponse())
using (var reader = new StreamReader(response.GetResponseStream()))
{
    Console.WriteLine(reader.ReadToEnd());
} 
```

# gnuplot - 如何确定 Y2_MAX？

> ID：13158869
> 
> 赞同：0
> 
> 时间：2012-10-31T13:16:43.837
> 
> 标签：gnuplot

我正在通过 gnuplot 绘制 2 个数据集。第一个的价值从~200万到~300万不等。第二个的值是从 1000 到 2000。

从文件绘图并检查`show variables all`GPVAL_Y2_MIN 设置为正确值后，但 GPVAL_Y2_MAX 错误。奇怪的是 GPVAL_Y_MAX 也是错误的，但是如果只绘制第一组，我会得到一个相对较好的值。

我想为*yrange*和*y2range*设置不同的范围，但我无法提前告诉可能的值。当然，我想尽可能地填满输出屏幕。

我怎么能那样做？

编辑：添加当前使用的代码

```
#!/usr/bin/gnuplot
reset
# Get max and min value
plot 'test.dat' every ::1 using 3, '' every ::1 using 4
y1_max = GPVAL_Y_MAX;
y1_min = GPVAL_Y_MIN;
y2_max = GPVAL_Y2_MAX;
y2_min = GPVAL_Y2_MIN;
set terminal png size 1024, 768 #output format png
set format y "%.1s %c"
# show png in a window without save
set output '| display png:-'
set yrange [y1_min:y1_max]
set y2range [y2_min:y2_max]
plot 'test.dat' every ::1 using 3 lt rgb '#FF00FF' title "vsize" with line, \
     '' every ::1 using 4 lt rgb '#FF0000' title "rss" with line axes x1y2 
```

如您所见，我首先绘制数据以获取最小值和最大值，然后创建终端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:52:49.430

如果没有可使用的数据文件，我的猜测是您的问题在于，在您的第一遍（收集最小值/最大值的地方）中，您在 x1y1 轴上绘制了两个数据集。在您的第二遍中，您在 x1y2 轴上绘制第 4 列，但您实际上从未将 y2 范围从默认值（您硬编码而不是自动缩放）以外的任何值重置。换句话说：

```
plot 'test.dat' every ::1 using 3, '' every ::1 using 4 axes x1y2 
```

不过，这带来了另一个问题——你为什么不只是自动缩放？

```
set yrange [*:*]
set y2range [*:*] 
```

# javascript - 使用坐标将元素放置在 fancybox 中

> ID：13158870
> 
> 赞同：0
> 
> 时间：2012-10-31T13:16:43.963
> 
> 标签：javascript, css, fancybox, coordinates

我有一个包含 2 个图像的 div，一个是地图，另一个是精确图像，我使用 javascript 将鼠标点击捕获为 x,y 坐标，精确点随着点击轻松移动，代码如下所示：

```
<div id="areapage" onclick="javascript:SetValues();" style="display: none;">
  <img src="mysource" style="width:420;position:relative;" >
  <img id="pindiv" src="images/pin.png" style="position: absolute;top: 0;left: 0;"> 
</div>

<script>
    function SetValues()
{

        document.getElementById('pindiv').style.left = window.event.screenX + 'px';
        document.getElementById('pindiv').style.top = window.event.screenY + 'px';

}
</script> 
```

它工作得很好，直到我把它放在一个fancybox中，显然有些事情发生了变化，也许x，y现在指的是打开fancybox的背景中的原始文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:15:18.487

尝试将#areapage div 设置为 position:relative; 这将使 pindiv 绝对定位基于该 div 而不是它的父级。

# ios - iPad 应用程序永远不会安装在 Retina 模拟器中

> ID：13158879
> 
> 赞同：4
> 
> 时间：2012-10-31T13:17:10.640
> 
> 标签：ios, ipad, ios-simulator, retina-display, xcode4.5

我为此绞尽脑汁，我可能只是犯了一个愚蠢的错误。切换到 Xcode 4.5.1（可能发生在 4.5）后，我根本*无法*将应用程序加载到 iPad Retina 模拟器中。我编辑了编译方案，说要**始终**为 iPad 使用 Retina 显示屏。没爱。过去，您可以随时更改模拟器，并且打开的任何一个都是项目编译的那个。但我无法弄清楚如何在 4.5 中执行此操作。帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T17:34:43.307

一些奇怪的事情正在发生，这似乎没有按预期行事。按以下顺序尝试这些解决方案。

1.  您的方法是正确的，您在编辑方案时设置了模拟器显示首选项。**确保**方案的目标是 iPad 模拟器，它与**运行**方案相关联，并将 iPad 模拟器显示设置为 Retina。保存/应用您的方案更改，尝试运行您的应用程序。如果这不起作用，请关闭 + 重新打开 Xcode，检查方案设置以查看它们是否卡住，然后重试

    ![如何更改模拟器显示偏好](../Images/e9210d3928de8a164087e385be85f8df.png)

    您可能需要仔细检查您的更改是否卡住。深入研究您的项目文件（通过右键单击您的项目文件，然后选择“显示包内容”）。然后导航到：

    ```
    xcuserdata->username.xcuserdatad->xcschemes->ProjectName.xcscheme 
    ```

    在您喜欢的编辑器中打开它，并检查是否有：

    ```
    simulatorIPadDisplay = "2.000000" 
    ```

    ...对于您所需的方案

2.  如果这些都不起作用，则可能是您的派生数据存在问题（不太可能，但第 1 步应该有效）。转到管理器，然后选择项目选项卡。然后点击“删除...”获取派生数据。和以前一样；运行，关闭 Xcode，检查并重新运行。

    ![如何在 Organizer 中删除派生数据](../Images/8841fa98cbf3721a2aecc628619eace7.png)

3.  好吧，我们真的处于困境中，这是为构建方案设置首选模拟器显示的唯一方法。您可能需要移除 Xcode 并重新安装，然后再次尝试前面的步骤。

4.  到底是怎么回事？！我们已经用尽了我们的方法，您可能需要让 Apple 知道这个问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T21:05:38.073

好吧，经过长时间的“找到我所有的设置文件并保存，删除 Xcode 及其所有设置文件，重新安装 Xcode，重新下载模拟器和文档，替换设置文件等”。我发现自己处于同样的位置。我没有视网膜模拟器。

问题不在于 Xcode 或项目文件***——5.0***模拟器根本无法在 Retina 模式下启动。正如我在编译方案中切换到它们时发现的那样， ***5.1***和***6.0模拟器工作正常。***切换回 5.0，我陷入了正常的模拟器模式。我一直使用 5.0 模拟器的原因是为了测试最低公分母 iOS 功能。那个，iOS 6.0 中存在一个错误，它影响通过 IPSec 进行的大数据包传输，但尚未修复。

所以，我仍然不知道丢失的派生数据状态是什么，除了它现在已经修复并且我认为重新安装应用程序是修复。

# c++ - 在p=new string[0]和p=new int[0]之后，为什么string版本在delete[] p时会崩溃？

> ID：13158882
> 
> 赞同：14
> 
> 时间：2012-10-31T13:17:11.983
> 
> 标签：c++, pointers, new-operator, delete-operator

我有两个关于`new[]`和的代码块`delete[]`：

1)

```
#include <string>

int main()
{
  std::string *p = new std::string[0];
  delete[] p;

  return 0;
} 
```

2）在这种情况下，我只是`std::string`改为`int`

```
int main()
{
  int *p = new int[0];

  delete[] p;

  return 0;
} 
```

**我的问题是：**

为什么第一个程序崩溃并显示以下消息（在 linux 环境中）：

```
Segmentation fault (core dumped) 
```

但是第二个程序运行良好没有任何错误？

**编辑**

编译器：`g++ (Ubuntu/Linaro 4.7.2-2ubuntu1) 4.7.2`

我只是使用`g++`没有任何参数来编译它。

如果是编译器错误，它们是否应该按照标准崩溃？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-31T13:33:23.927

这应该是一个 gcc 错误。整个`new[]`表达式被忽略并`p`变得未初始化，然后我们`delete[]`一个未初始化的指针崩溃了。如果我们用它编译程序`-Wall`会警告你

> 警告：“p”在此函数中未初始化使用

这显然是错误的。该表达式`new X[0]`在 C++03 和 C++11（第 5.3.4/7 节）中定义良好，并且在 clang 中可以正常工作，因此唯一合乎逻辑的结论是它是一个 gcc 错误。

* * *

`new[]`仅当要构造的类型具有任何非平凡的构造函数时，才存在消除错误。并且段错误发生在类型具有析构函数，因为`delete[]`然后将需要取消引用该未初始化的指针。因此，它为`std::string`但不是崩溃`int`，因为`int`它是微不足道的，`std::string`而不是。

* * *

这可以通过使用中间变量来解决，这样表达式就不能直接计算为 0：

```
size_t length = 0;
std::string* p = new std::string[length];
// ...
delete[] p; 
```

# html - 如何让 iframe 占据全宽（即像 div 一样显示）

> ID：13158883
> 
> 赞同：16
> 
> 时间：2012-10-31T13:17:11.197
> 
> 标签：html, css

我试图让一个`iframe`表现得像一个正常的非浮动`DIV`的。即占据父级的全宽。这可能吗？寻找相当于说的东西`display: div;`

**编辑**：我不是在寻找，`width: 100%`因为我在左边有另一个浮动元素。非浮动 DIV 将占用右侧的其余空间。这是我希望实现的行为。

**工作**：`DIV`右边有一个 - [http://jsbin.com/onaxax/1/edit](http://jsbin.com/onaxax/1/edit)

**不工作**：`IFRAME`右边有一个 - [http://jsbin.com/erapuv/1/edit](http://jsbin.com/erapuv/1/edit)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-31T13:37:49.037

您必须将 iframe 包裹在元素中，`overflow:hidden`这样会占用剩余空间，然后将 iframe 的宽度设置为 100%。

[例子](http://codepen.io/thelitek/pen/IuEhc)。

# python - 项目之间的 Django 会话共享

> ID：13158884
> 
> 赞同：0
> 
> 时间：2012-10-31T13:17:13.723
> 
> 标签：python, django, session, cookies, session-cookies

我有两个项目必须在它们之间共享会话。一个项目在`domain.com`，第二个 - `domain.com/app`. 我设置`SESSION_COOKIE_NAME = 'pr1'`并`SESSION_COOKIE_DOMAIN = 'domain.com'`在每个项目上。但是我的用户必须登录两次。

我做错了什么？

UPD。项目在同一个数据库上。

# java - 防止在 jsf 2 中直接访问 xhtml 文件

> ID：13158887
> 
> 赞同：0
> 
> 时间：2012-10-31T13:17:23.363
> 
> 标签：java, jsf, jsf-2

我想防止在我的项目中直接访问 *.xhtml 文件。在页面中，有调用某些 bean 的某些方法的 commandLinks。这些 bean 将视图名称作为字符串返回。

```
return "campaign.xhtml?faces-redirect=true"; 
```

如果用户将以下内容写入浏览器的地址栏，我不希望用户看到 xhtml 文件。

```
http://localhost:8080/myApp/faces/campaign.xhtml 
```

或者

```
http://localhost:8080/myApp/faces/campaign.xhtml?faces-redirect=true 
```

因为，在某些 bean 中，我填充了这些 xhtml 视图。但是，如果用户直接访问 xhtml 文件，用户会看到这些视图没有填充信息。

当我在 web.xml 文件中使用时，访问被拒绝。但是，在这种情况下，当 bean 返回值“campaign.xhtml?faces-redirect=true”时，它也不能显示视图。bean 的访问也被拒绝。

我能做些什么来防止这种情况发生？

谢谢。

法鲁克·库什坎

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T13:21:07.833

> *用户在没有填写信息的情况下看到这些视图。*

`preRenderView`如果信息已填写，只需检查事件侦听器。如果没有，请重定向回来。

```
<f:event type="preRenderView" listener="#{bean.init}" /> 
```

和

```
public void init() throws IOException {
    if (information == null) {
        ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
        externalContext.redirect(externalContext.getRequestContextPath() + "/otherpage.xhtml");
    }
} 
```

如有必要，您可以将它与[`FacesContext#isValidationFailed()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#isValidationFailed%28%29)您是否实际上也在使用`<f:viewParam>`with 验证结合起来。例如

```
<f:viewParam name="id" value="#{bean.information}" required="true" />
<f:event type="preRenderView" listener="#{bean.init}" /> 
```

和

```
public void init() throws IOException {
    FacesContext context = FacesContext.getCurrentInstance();
    if (context.isValidationFailed()) {
        ExternalContext externalContext = context.getExternalContext();
        externalContext.redirect(externalContext.getRequestContextPath() + "/otherpage.xhtml");
    }
} 
```

* * *

**更新**：在 JSF 2.2 中，您可以使用`<f:viewAction>`它。

```
<f:viewAction listener="#{bean.check}" /> 
```

```
public String check() {
    if (information == null) {
        return "otherpage?faces-redirect=true";
    } else {
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-07-24T08:25:54.070

在您的情况下，您需要将一些模式映射到您的 xhtml 文件，以便通过该模式从 URL 访问它们，同时对 .xhtml 扩展名的访问将受到限制。所以在你的 web.xml 中：

```
<servlet>
   <servlet-name>Faces Servlet</servlet-name>
   <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>        
   <load-on-startup>1</load-on-startup>
 </servlet>

    <servlet-mapping>
      <servlet-name>Faces Servlet</servlet-name>
      <url-pattern>*.someExtension</url-pattern>
    </servlet-mapping>

  <security-constraint>  
    <display-name>Restrict access to XHTML Documents</display-name>
    <web-resource-collection>
      <web-resource-name>XHTML</web-resource-name>
      <url-pattern>*.xhtml</url-pattern>
    </web-resource-collection>
    <auth-constraint/>
  </security-constraint> 
```

这就是你的 bean 应该返回的：

```
return "campaign.someExtension?faces-redirect=true"; 
```

通过这种方式，您将能够通过 commandLinks 将用户重定向到您希望的页面，但是当用户键入时

```
http://localhost:8080/myApp/faces/campaign.xhtml 
```

或者

```
http://localhost:8080/myApp/faces/campaign.xhtml?faces-redirect=true 
```

对 URL 的访问将被拒绝。

# php - DOMXpath 无法进入文本内部

> ID：13158889
> 
> 赞同：0
> 
> 时间：2012-10-31T13:17:25.580
> 
> 标签：php, tags, domdocument, domxpath

我有一个像上面这样的 HTML 文件：

```
<div class = "lvlone">
    <div class = "lvltwo">
        <span>Hello</span>
    </div>
</div> 
```

我想得到
我试过的“Hello”字符串，`$res = $xpath->query("//div[@class='lvlone']/div[@class='lvltwo']/span");` 但什么也没有！
有任何想法吗？
不管怎么说，还是要谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:23:50.733

有用。尝试这个

```
$dom = new DOMDocument;
@$dom->loadHTML('<div class = "lvlone">
    <div class = "lvltwo">
        <span>Hello</span>
    </div>
</div>');
$x = new DOMXPath($dom);
$entries = $x->query("//div[@class='lvlone']/div[@class='lvltwo']/span");
foreach ($entries as $entry)
  var_dump($entry->nodeValue);

 //Output - string 'Hello' (length=5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:25:22.143

如果你想解析 HTML 页面，我建议你使用这个： [http ://simplehtmldom.sourceforge.net](http://simplehtmldom.sourceforge.net)

Simplehtmldom 是 PHP 类，它解析网页内容的方式，并让您能够通过不同的参数进行搜索和查找..（标签、类、id 等）

# java - php 中 Java Swings 的替代方案

> ID：13158892
> 
> 赞同：-1
> 
> 时间：2012-10-31T13:17:36.253
> 
> 标签：java, php

谁能帮我使用下面的java代码编写php代码。

我撞到了某个地方，我有很多问题：

如何在php中编写java JFrame、BorderLayout、setJMenuBar、setVisible。

```
 // init the frame
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.setLayout(new BorderLayout());
    this.setSize(600, 400);
    // set MenuBar
    this.setJMenuBar(getApplicationMenuBar());
    // set ProgressBar
    this.add(getApplicationProgressBar(), BorderLayout.SOUTH);
    // set InfoPane
    this.add(getInfoPane(), BorderLayout.WEST);
    // set frame to visible
    this.setVisible(true); 
```

请帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:19:17.450

Swing 在 PHP 中不可用。PHP 语言根本不包含任何默认的 GUI。

# azure - 将许多小文件从 Azure VM 临时磁盘复制到 Azure Blob 时的性能

> ID：13158893
> 
> 赞同：6
> 
> 时间：2012-10-31T13:17:38.060
> 
> 标签：azure, azure-blob-storage

在将数千个小 Blob 写入 Azure 存储时，我试图找出性能最佳的方法。应用场景如下：

*   安装在 Windows Azure VM 上的持续运行的 Windows 服务正在创建或覆盖数千个文件
*   写入虚拟机可用的临时存储，该服务每秒可以创建超过 9,000 个文件
*   文件大小介于 1 KB 和 60 KB 之间
*   在运行相同 sw 的其他 VM 上，正在以相同的速率和标准创建其他文件
*   鉴于需要构建并保持更新中央存储库，每个 VM 上运行的另一个服务将新创建的文件从临时存储复制到 Azure Blob
*   然后其他服务器应在其更新版本中读取 Azure Blob

请注意，对于我没有列出的许多限制，目前无法修改主要服务以直接创建 Blob 而不是临时文件系统上的文件。...从我目前看到的情况来看，这意味着创建速度较慢，按照原始要求是不可接受的。

我正在对 10,000 个文件进行紧密循环测试的此复制操作似乎被限制为每秒创建 200 个 blob。在调整此处找到的名为“Windows Azure ImportExportBlob”的示例代码后，我已经能够达到此结果：[http](http://code.msdn.microsoft.com/windowsazure/Windows-Azure-ImportExportB-9d30ddd5) ://code.msdn.microsoft.com/windowsazure/Windows-Azure-ImportExportB-9d30ddd5 以及在中找到的异步建议这个答案：[在一个小的天蓝色实例中使用 Parallel.Foreach](https://stackoverflow.com/questions/8424690/using-parallel-foreach-in-a-small-azure-instance)

我在具有 8 个内核的超大型 VM 上获得了每秒 200 个 blob 创建的明显最大值，并相应地设置了“maxConcurrentThingsToProcess”信号量。测试期间的网络利用率最大为任务管理器中显示的可用 10Gb 的 1%。这意味着大约 800 Mb 中的 100 Mb 应该在该 VM 大小上可用。

我看到在经过的时间内复制的总大小给了我大约 10 MB/秒。

您可以生成的 Azure 存储流量是否存在一些限制，或者在编写如此多的小文件时我应该使用不同的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T13:25:27.493

@breischl 感谢您的可扩展性目标。读完那篇文章后，我开始搜索可能由微软准备的更多目标人物，并找到了 4 篇文章（我的“声誉”太多了，无法在此处发布，其他 3 篇是同一系列的第 2、3 和 4 部分）：

[http://blogs.microsoft.co.il/blogs/applisec/archive/2012/01/04/windows-azure-benchmarks-part-1-blobs-read-throughput.aspx](http://blogs.microsoft.co.il/blogs/applisec/archive/2012/01/04/windows-azure-benchmarks-part-1-blobs-read-throughput.aspx)

第一篇文章包含一个重要提示：**“您可能必须增加多个线程的*ServicePointManager.DefaultConnectionLimit*才能与存储建立超过 2 个并发连接。”**

我已将其设置为 300 ，重新运行测试并看到 MB/s 显着增加。正如我之前所写的，当“太多”线程正在写入 blob 时，我正在考虑达到底层 blob 服务的限制。这印证了我的担忧。因此，我删除了对代码所做的所有更改以使用信号量并再次将其替换为 parallel.for 以启动尽可能多的 blob 上传操作。**结果非常棒：61 MB/s 写入 blob 和 65 MB/s 读取。**

可扩展性目标是 60 MB/s，我终于对结果感到满意。
再次感谢大家的回答。

# vector - 从 3D 点数组计算加权平均点

> ID：13158894
> 
> 赞同：0
> 
> 时间：2012-10-31T13:17:41.060
> 
> 标签：vector, 3d, point, mean, weighted

我正在用 Cocoa 编写程序，但我认为解决方案必须非常通用。

我有一组由 3D 向量表示的点。每个点都有一个分配给它的权重。权重在 0 到 1 的范围内。所有权重的总和不等于 1。

应该如何从这样的集合中计算加权平均点？

编程或纯数学解决方案都会有所帮助。当然，如果 Cocoa 有一些特定的工具来解决这个任务，我将非常感谢这些信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:41:58.257

简单地将所有按权重缩放的向量相加。最后，除以所有权重的总和。这与首先​​将所有权重归一化为总和为 1 具有相同的效果。

伪代码：

```
sum = [0, 0, 0]
totalWeights = 0
for each point p with associated weight w:
    sum += p * w
    totalWeights += w
mean = sum / totalWeights 
```

# c++ - 接口和子类

> ID：13158901
> 
> 赞同：2
> 
> 时间：2012-10-31T13:18:01.820
> 
> 标签：c++, interface, derived

在 C++ 中，我有一个**FooA**类和一个**FooB**类，它们都是基类**Foo**的子类。FooB 必须实现`interface` **Bar**。如果我只有一个指向 FooB 的 Foo 指针并希望使用 FooB 的 Bar 方法，我将不得不进行强制转换。但是，这似乎违反了`polymorphism`.

我想知道是否有更好的方法允许 FooB 实现 Bar 接口，而不强制所有 Foo 派生类也实现 Bar。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:21:47.247

重新设计你的课程。很有可能继承不是你在这里需要的。

理由：如果你在`Foo`某处有一个指针，那么它的所有者不需要知道它是指向`Foo`对象`FooB`还是任何其他派生对象——它只使用`Foo`功能，不了解实现。（这就是多态性的一般工作原理。）

换句话说：如果您有一个`Foo`指针并且它的用户仅依赖于 中的功能`FooB`，那么该指针首先应该是类型`FooB`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:21:03.393

如果你只想使用 Foo 指针，并调用 Bar 方法，Foo 必须实现 Bar 接口。这是让编译器知道 Foo 对象可以使用此方法的唯一方法，当然无需强制转换。

# objective-c - 将 NSDate 从日历转换为另一个

> ID：13158908
> 
> 赞同：2
> 
> 时间：2012-10-31T13:18:12.340
> 
> 标签：objective-c, nsdate, uidatepicker, nscalendar

我在这里遇到了麻烦。花了我几个小时，但没有用。请记住，我检查了 StackOverFlow 是否有修复，但没有。

当我将`_date`对象从`Gregorian`转换为时，`Hijri`它不会转换。我知道，因为当我打印它时，它仍然给了我`Gregorian`一天。这让我很困扰，因为我想要`setDate`a`UIDatePicker`并且它设置不正确，因为`_date`is`gregorian`和我的`UIDatePicker`对象日历设置为`setCalendar:_hijriCalendar`

```
//DATE SETTING
_date = [NSDate date];
_hijriCalendar = [[NSCalendar alloc]initWithCalendarIdentifier:NSIslamicCalendar];
_gregCalendar = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];

unsigned units = NSYearCalendarUnit| NSMonthCalendarUnit | NSDayCalendarUnit;

NSDateComponents *currentDateComponents = [_hijriCalendar components:units fromDate:[NSDate date]];

NSDate *islamicDate =[_hijriCalendar dateFromComponents:currentDateComponents];

NSLog(@" Current Date: %@",islamicDate);  //this outputs gregorian current date not Hijri 
```

注意：伙计们，我不想只打印日期。我知道使用一`NSDateFotmatter`组正确的`NSCalendar`对象可以完成这项工作。但我想将日期转换为新日期以将其设置为我的`UIDatePicker`. 我希望你们明白我的意思。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:54:38.120

一个`NSDate`物体代表一个时刻，与任何日历、时区或相对论*无关*（最后一个通常被认为是基于地球的计算机科学中的非问题。）

当您通过任何方式创建实例时`NSDate`，它仅存储为自固定时间点以来的秒数（对于 iOS 和 OS X，2001 年 1 月 1 日格林威治标准时间上午 12:00）。

因此，将日期从公历转换为回历不会*做*任何事情，因为固定时刻保持不变。

如果您具体告诉我们您希望公历和回历之间发生的尚未发生的转换，我们可以建议另一种行动方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:22:22.473

您根本不需要进行任何转换。

`NSLog`打印对象的`description`方法。由于`NSDate`仅存储自参考日期以来的秒数，并且不跟踪其所属的日历，因此它使用公历来格式化`description`方法的日期。

自定义`NSDateFormatter`以使用您的日历并用于`stringFromDate:`获取日期的本地化字符串值。

# c# - 在 RavenDB 中查询动态属性

> ID：13158909
> 
> 赞同：3
> 
> 时间：2012-10-31T13:18:12.613
> 
> 标签：c#, ravendb

我在 Raven 中查询动态属性时遇到了一些问题。

这是我的课程：

```
 public class Parent
    {
        public string ID { get; set; }
        public dynamic Child { get; set; }
    }

    public class Son
    {
        public int A { get; set; }
        public Guid Key { get; set; }
    }

    public class Daughter
    {
        public int A { get; set; }
        public Guid Key { get; set; }
    } 
```

我要做的是索引其孩子是儿子但不是女儿的父母，并按子属性“A”或“Key”进行索引。在我的例子中，子类不能从接口继承，因为真正的子类看起来完全不同。这些类是为匹配场景的测试而构建的。

到目前为止，我建立的索引如下所示：

```
 public class DynamicIndex : AbstractIndexCreationTask
    {
        public override Raven.Abstractions.Indexing.IndexDefinition CreateIndexDefinition()
        {
            return new IndexDefinition()
            {
                Map = @"from doc in docs.Parent select new { A = doc.Dynamic.A, B = doc.Dynamic.B }"
            };
        }
    } 
```

该索引有效，但我似乎无法过滤掉匹配一种类型而不匹配另一种类型的孩子。Child 的序列化 JSON 包含一个名为“$type”的属性，它是该类型的全名。我的直觉告诉我用它来区分儿童类型，但我不知道如何访问它。

如何扩展我的索引映射以包含“$test”属性，或者是否有另一种方法来过滤匹配特定类型的子项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:10:09.273

```
Map = @"from doc in docs.Parent select new { A = doc.Dynamic.A, B = doc.Dynamic.B, Type = doc.Dynamic[""$type""] }" 
```

应该管用

# sql - 在复杂的 SQL 查询中连接 2 行

> ID：13158913
> 
> 赞同：1
> 
> 时间：2012-10-31T13:18:25.377
> 
> 标签：sql, ms-access, concatenation

我将 MS-Access 2003 与查询创建器一起使用。我从一个表 ( ) 中选择所有内容，然后从另一个表 ( ) 中选择`FaitsSaillants`一个特定行 ( )。我想从第二个表中选择另一行并将其连接起来。`WHERE VARIABLE='TitreMandat'``tb_SOMMAIRE`

## 查询

```
PARAMETERS
    [CurrAxe] Text ( 255 ), [CurrOTP] Text ( 255 ),
    [CurrClient] Text ( 255 ), [StartDate] DateTime, [EndDate] DateTime;
SELECT 
    tb_SOMMAIRE.Valeur AS Projet, tb_SOMMAIRE.VARIABLE, *
FROM
    (FaitsSaillants
     LEFT JOIN Employes
         ON FaitsSaillants.Utilisateur = Employes.CIP)
    INNER JOIN tb_SOMMAIRE
        ON FaitsSaillants.OTP = tb_SOMMAIRE.OTP
WHERE
    (((FaitsSaillants.OTP)=[CurrOTP]) AND 
     ((FaitsSaillants.Client) Like [CurrClient]) AND
     ((FaitsSaillants.Axe) Like [CurrAxe]) AND
     ((DateValue([DateInsertion]))>=[StartDate] AND
      (DateValue([DateInsertion]))<=[EndDate]) AND
     ((tb_SOMMAIRE.VARIABLE)='TitreMandat'))
ORDER BY
    FaitsSaillants.DateInsertion DESC; 
```

此查询确实添加了`tb_SOMMAIRE.Valeur`ID（`OTP`字段）匹配的字段和 where `tb_SOMMAIRE.VARIABLE='TitreMandat'`。它就像一个魅力。但是，我想在`tb_SOMMAIRE`结果中添加另一行。我想获得 where `VARIABLE='TitreMandat'`（该部分实际上正在工作）的行和 where 的行`VARIABLE='NomInstallation'`。我将得到 2 行，并且我希望在我要求`Projet`( `tb_SOMMAIRE.Value as Projet`) 时将这 2 行连接起来并显示出来。两行的`OTP`(ID) 与在 中选择的行相同`FaitsSaillants`。

对不起，如果是法语。

## 表的结构

FaitsSaillants

> ```
> Index AutoNumber
> Projet Text
> Axe Text
> Client Text
> OTP Text
> FaitSaillant Memo
> DateInsertion Date
> Utilisateur Text 
> ```

tb_SOMMAIRE

> ```
> OTP Text
> VARIABLE Text
> Valeur Text 
> ```

## 数据示例

tb_SOMMAIRE

> ```
> OTP   VARIABLE        Valeur
> UGPSW NomInstallation PosteNemiscau
> UGPSW TitreMandat     oscilloperturbographe
> UGPSW RespIng         CU9656
> GWIHK NomInstallation AnotherInstallation
> GWIHK TitreMandat     Anytitle
> GWIHK Responsable     ImportantPerson 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:29:21.107

怎么样：

```
PARAMETERS [CurrAxe] TEXT ( 255 ), [CurrOTP] TEXT ( 255 ), [CurrClient] TEXT (
255 ), [StartDate] DATETIME, [EndDate] DATETIME;

SELECT q.Projet, *
FROM   (faitssaillants f
LEFT JOIN employes e
ON f.utilisateur = e.cip)
INNER JOIN (
SELECT s1.otp,
     [s1].[valeur] & "," & [s2].[valeur] AS Projet
FROM   (
  SELECT otp, valeur
  FROM   tb_sommaire
  WHERE  [variable] = 'TitreMandat') AS s1
INNER JOIN (
   SELECT otp, valeur
   FROM   tb_sommaire 
   WHERE  [variable] = 'NomInstallation') AS s2
ON s1.otp = s2.otp) q
ON f.otp = q.otp
WHERE f.otp  = [currotp] 
AND f.client LIKE [currclient] 
AND f.axe LIKE [curraxe] 
AND Datevalue([dateinsertion]) 
    Between [startdate] And [enddate] 
ORDER  BY f.dateinsertion DESC; 
```

始终最好避免将所有字段都引用为 *。字段（列）应按名称列出。

以上依赖于创建一个派生表，该表通过 Otp 对来自 tb_sommaire 的行进行分组。您可以将派生表剪切并粘贴到查询设计屏幕（sql 视图）中，以检查返回的行是否符合预期。

# c++ - 将类成员的地址分配给方法变量以进行持久更改

> ID：13158916
> 
> 赞同：0
> 
> 时间：2012-10-31T13:18:44.257
> 
> 标签：c++, pointers, variable-assignment

我有一个方法，我想在两个数据成员之一上迭代运行，在它们之间交替。我想过做以下事情

```
void myClass::alternating_method(){
    Graph G;
    &G = iteration_number%2 ? &A : &B;
    helper_method_which_modifies(G);
    iteration_number++;
    return;
} 
```

where `A`and `B`and `iteration_number`are all `myClass`members，但我不确定它会起作用。这对我来说似乎是对的，但这种风格让我错了。期望的结果是`object.alternating_method()`在一个循环中调用并让它修改`object.A`and `object.B`。

这行得通吗？有没有更好的办法？会不会有意想不到的后果？我是否需要担心`G`超出范围时会调用析构函数？

编辑：为了澄清，我的意思`helper_method_which_modifies`是包含几种方法的 100 行的简写。修改`G`的主要是 boost graph 方法。现在我看到了答案，似乎最好的办法是拥有一个除了在和`alternator`之间进行选择之外什么都不做的事情，然后将正确的变量传递给另一个方法。`A``B`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T13:27:51.440

正如 Luchian Grigore 已经说过的，它不会起作用，因为你需要一个 L 值。

这个想法正在发挥作用，但变化不大。

```
void myClass::alternating_method(){
    Graph& G = iteration_number%2 ? A : B;
    helper_method_which_modifies(G);
    iteration_number++;
    return;
} 
```

或进行更多更改：

```
void myClass::alternating_method(){
    helper_method_which_modifies((++iteration_number%2) ? A : B);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:23:04.153

您是正确的，因为`&`运算符是地址运算符。但是，您不能分配给地址（例如搜索“右值与左值”或类似内容）。

你可以做什么将它声明`G`为一个*指针*并使该指针指向`A`or `B`：

```
Graph* G = iteration_number%2 ? &A : &B; 
```

由于您使用的是 C++，另一种解决方案`G` 是*参考*：

```
Graph& G = iteration_number%2 ? A : B; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T13:24:15.353

你为什么不直接调用它而不使用`G`？通过这种方式，您无需担心。

```
void myClass::alternating_method(){
    helper_method_which_modifies((iteration_number%2 ? &A : &B));
    iteration_number++;
    return;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T13:24:31.620

不需要占位符 G。

```
void myClass::alternating_method(){
    if(iteration_number%2 == 1) {
        helper_method_which_modifies(A);
    } else {
        helper_method_which_modifies(B);
    }
    iteration_number++;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-31T13:21:53.857

做个`G`参考：

```
void myClass::alternating_method(){
    Graph& G = iteration_number%2 ? A : B;
    helper_method_which_modifies(G);
    iteration_number++;
    return;
} 
```

另一种选择是完全消除 G：

```
void myClass::alternating_method(){
    helper_method_which_modifies(iteration_number%2 ? A : B);
    iteration_number++;
    return;
} 
```

# dns - 不同的托管网站在线

> ID：13158923
> 
> 赞同：0
> 
> 时间：2012-10-31T13:19:33.770
> 
> 标签：dns, cname

我在 godaddy 有一个域，我在另一个有一个主机。

如何将域名设置为主机？

我猜需要使用 CNAME 和 IP？我需要设置 MX 设置吗？CNAME 是最好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:30:06.253

只需为他们给您的其他托管站点的IP地址创建一个A记录，并将A记录放入godaddy的记录中。一旦你这样做了，任何查找都会导致网络浏览器（比如）转到托管站点。您根本不需要 CNAME。

请注意，所有 DNS 记录都有一个 TTL 值，这意味着它需要一些时间来切换。因此，一旦您添加了 A 记录，不要指望它会立即生效，因为在 TTL 到期之前，godaddy 的假“建设中”类型的停放页面仍然存在。

如果您想要邮件传递，您只需要 MX 设置，您的托管服务提供商可能会或可能不会给您。如果他们这样做，那么是的，如果您要使用邮件，您将希望 MX 记录指向它。

# c# - 加入空数据表，无论如何显示列的标题

> ID：13158925
> 
> 赞同：1
> 
> 时间：2012-10-31T13:19:37.747
> 
> 标签：c#, linq, join

我有一个关于 Linq 加入的问题。我总是有很多 DataTables 并加入他们，工作得很好。但是现在如果这些表是空的，那么这个列的标题也无法看到。我该怎么做，如果这些表是空的，它们无论如何都会显示这些标题。

表格1：

```
Name  LastName ... 
```

表 2：

```
Name Comment ... 
```

结果：

```
Name LastName Comment ... 
```

我的代码是：

```
var res = from tb1 in Table1.AsEnumerable()
          join tb2 in Table2.AsEnumerable()
          on tb1.Field<String>("Name) equals tb2.Filed<String>("Name")
          Select new {
          Name = tb1.Field<String>("Name"),
          LastName= tb1.Field<String>("LastName"),
          Comment= tb2.Field<String>("Comment"), 
```

但它不显示 res 的标题。我在这里做错了什么？}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:46:21.287

你能做这样的事情吗？

```
 var foo = from t in Table1.AsEnumerable
          select new
          {
              Name = ...,
              LastName = ...,
              Comment = null
          };

var bar = from t in Table2.AsEnumerable
          select new
          {
              Name = ...,
              LastName = null,
              Comment = ...
          };

var res = from x in foo
          join y in bar on y.Name == x.Name
          select new { /*Name, LastName, Comment */} 
```

注意，属性的顺序必须相同。

# php - PHP：如何将“接近白色”表示为一种颜色？

> ID：13158928
> 
> 赞同：5
> 
> 时间：2012-10-31T13:19:47.737
> 
> 标签：php, gd, rgb

我有一个功能可以修剪图像周围的白色区域，类似于

```
if(imagecolorat($img, $x, $top) != 0xFFFFFF) {
    //sets where the top part of the image is trimmed
} 
```

问题是一些图像偶尔会有一个非常接近白色的杂散像素，以至于它不引人注意，但由于它不完全是 0xFFFFFF 而是 0xFFFEFF 或其他东西，所以会破坏裁剪。我怎么能重写上面的语句，以便它对那些接近白色的图像进行评估，比如低至 0xFDFDFD，显然没有测试任何可能的值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T13:24:21.303

```
$color = imagecolorat($img, $x, $top);
$color = array(
    'red'   => ($color >> 16) & 0xFF,
    'green' => ($color >>  8) & 0xFF,
    'blue'  => ($color >>  0) & 0xFF,
);
if ($color['red']   >= 0xFD
 && $color['green'] >= 0xFD
 && $color['blue']  >= 0xFD) {
    //sets where the top part of the image is trimmed
} 
```

有关使用的运算符的说明，请阅读：

*   [PHP - 两个不寻常的运算符一起使用来获取图像像素颜色，请解释](https://stackoverflow.com/q/11570312/367456)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T13:25:19.467

要正确检测这些灰白色，您应该将 RGB 颜色坐标转换为[HSV](http://en.wikipedia.org/wiki/HSL_and_HSV)；在 HSV 中，所有灰白色的 S 接近 0，V 接近 100（归一化）。[This question](https://stackoverflow.com/questions/1773698/rgb-to-hsv-in-php) has an answer with PHP code to do the conversion，因此使用该代码您将拥有：

```
$rgb = imagecolorat($img, $x, $top);
$hsv = RBG_TO_HSV(($rgb >> 16) & 0xFF, ($rgb >> 8) & 0xFF, $rgb & 0xFF);
if ($hsv['S'] < .05 && $hsv['V'] > .95) {
    // color is off-white
} 
```

您可以根据需要调整常量`.05`并`.95`放宽或收紧标准；您还可以使用交互式颜色选择器（例如[this](http://www.colorpicker.com/)）来感受不同 和 值下颜色与白色的接近`S`程度`V`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:23:13.207

我认为这应该做的工作：

```
$range = 0xFFFFFF - 0xFFFEFF;

if((0xFFFEFF - imagecolorat($img, $x, $top)) < $range){
    // do
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T13:25:44.553

这是执行此操作的一种方法。将你的颜色拆分成它的 RGB 分量，这样`$color = 0xFFFEEF`你最终会得到`$red = 0xff; $green =`0xfe；$蓝色 = 0xef'。然后将每个组件与您的阈值进行比较。如果这三个都在您的阈值之内，那么它就是“近乎白色”。所以你的函数将类似于（伪代码）：

```
function is_nearly_white($r, $g, $b) {
    $threshold = 0xfd;
    return ($r > $threshold && $g > $threshold && $b > $threshold);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-15T13:20:05.437

您可以通过对 RGB 整数应用“与”来检测接近白色。基本上与 Alin Roman 所说的相同，但更简单一点，一行。

```
if ((imagecolorat($img, $x, $top) & 0xF0F0F0) != 0xF0F0F0) {
    //sets where the top part of the image is trimmed
} 
```

它应该检测从 0xFFFFFF 到 0xF0F0F0 的颜色。

# repository - 使用“git commit -a”命令时遇到问题

> ID：13158938
> 
> 赞同：5
> 
> 时间：2012-10-31T13:20:13.480
> 
> 标签：repository, git-commit, git

我正在尝试使用以下命令提交所有更改

```
git commit -a 
```

注意：我想在没有任何“提交消息”的情况下提交

但是当我执行上面的命令时，它会显示如下所示的屏幕，我不知道如何离开这个屏幕来完成我的提交。

![在此处输入图像描述](../Images/4ecbf9af5ba02da0d5db2a539eb1b4f5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:25:55.700

您必须为每个提交指定一个提交消息。有两种方法可以做到这一点。首先，您可以在命令行上使用`-m`开关提供它：

```
git commit -am "I made the changes" 
```

如果您不指定该开关，git 会打开配置的编辑器。默认情况下，这是 vim。要在 vim 中编写消息，请键入`i`进入*插入模式*，然后键入您的消息。点击`esc`退出*插入模式*，然后键入`:wq`保存（写入**）**并**退出**编辑器。

您还可以[配置另一个编辑器以供 git 使用](https://stackoverflow.com/q/2596805/2688)。在命令行上，您可以运行类似的命令`git config --global core.editor notepad`，其中`notepad`是您喜欢的编辑器的名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T13:21:45.477

尝试`git commit -a -m '[your commit message]'`

编辑：git 每次提交都需要一个评论，你可以顺便添加一个空评论

```
git commit -a -m '' 
```

或者

```
git commit -am '' 
```

使用 Git 时必须使用消息提交，但也很有帮助：

制作提交消息是开发工作中非常重要的一步。该消息通常是其他开发人员首先看到的内容，Git commit-msg 中的第一行具有特殊含义。它被认为是提交的“标题”或“主题”。许多接口使用这个标题来表示提交，例如：

- 电子邮件通知的主题

-git log 的“单线”模式

-Gerrit 界面（仪表板、搜索结果、标题）

-Git revert（引用提交标题）

-各种 Git GUI 客户端

（使用第一行作为标题，直到第一个空行或正文结束）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:22:14.217

你应该使用`git commit -a -m '[your message here]'`

提交消息是必要的，您也可以将其保留为空

`git commit -a -m ''`

相关问题

[没有提交消息的 Git 提交](https://stackoverflow.com/questions/6218199/git-commit-with-no-commit-message)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T13:25:13.687

您没有指定提交消息，因此 Git 打开默认编辑器（在本例中为 Vim）来指定消息。您有 2 个选项可以解决此问题：

1.  写你的留言写作

    ```
    i{your message}<ESC>:wq<CR> 
    ```

2.  或者直接将消息写入命令行：

    ```
    git commit -am 'your message' 
    ```

# c# - 非托管 c++ 代码导致 .Net 应用程序崩溃

> ID：13158943
> 
> 赞同：2
> 
> 时间：2012-10-31T13:20:46.773
> 
> 标签：c#, c++, crash, unmanaged

我知道这里有一些线程被问到相同的主题，但不幸的是没有一个对我有帮助。

我在我的 .net 应用程序中使用非托管 c++ 代码的包装器，在非托管 Dll 中有一个函数“ `LoadLayoutFile()`”，它加载一个带有扩展名 ( `.lyt`) 的自定义格式文件，我的 .net 应用程序有一个循环，它基于调用该函数数组项计数。如果这个数组有一个项目，应用程序运行顺利，没有任何问题，但如果它有多个项目，应用程序立即崩溃，当然，没有任何机会弄清楚发生了什么，但这也不是所有的时间也是，这非常令人困惑。

我尝试了 DebugDiag、Windbg 来跟踪崩溃，但我没有成功。我还尝试通过添加析构函数、异常处理来修复我的非托管代码，我还尝试将垃圾收集器（在 .net 应用程序中）放在它们应该在的位置，但这些都不起作用。我很想知道发生了什么事？或者至少能够捕捉到错误！

**这是 C++ dll 中的 LoadLayoutFile()：**

```
int CMKCRD32App::LoadLayoutFile(LPCSTR lpszFileName)
{
    try
    {
        int     nRetVal = MCRC_SUCCESS;
        CFile   file;
        WORD    wVersionNumber;

        // Add New Layout to the Layouts List
        nRetVal = AddLayout();

        // If Layout not added Correctly return Error Code
        if(nRetVal<0)
            return MCRC_MAXLAYOUT_REACHED;

        if(file.Open(lpszFileName,CFile::modeRead|CFile::shareCompat))
        {
            CArchive    ar(&file,CArchive::load);

            ar >> wVersionNumber;

            m_pCard[nRetVal]->Serialize(ar,wVersionNumber);

            ar.Close();
            file.Close();

            m_pCard[nRetVal]->OffsetItemsByMargin(TRUE);
        }
        else
        {
            nRetVal = MCRC_ERROROPENFILE;
        }

        return nRetVal;
    }
    catch(char *str)
    {
        throw str;
    }
} 
```

**添加布局（）**

```
int CMKCRD32App::AddLayout()
{
    int nIndex;
    try
    {
        for(nIndex=(_MAX_LAYOUTS_-1); nIndex >= 0; nIndex--)
            if(m_pCard[nIndex]==NULL)
                break;

        if(nIndex>=0)
        {
            m_pCard[nIndex] = new CLYT_Card();

            if(!m_pCard[nIndex])
            {
                nIndex = -1;
            }
        }

        return nIndex;
    }
    catch(char *str)
    {
        throw str;
    }

} 
```

**这里正是它在.net应用程序中崩溃的地方（有时）：**

```
CardLayout cardLayout = new CardLayout(); // Wrapper

foreach(var item in x)
   int layout = cardLayout.LoadLayoutFile("cc.lyt"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T05:59:44.237

您的库看起来不错，可能是性能问题，您可能有很大的堆栈跟踪。如果你调用它一次时它没有崩溃，并且当你调用它时它确实崩溃了（有时就像你说的那样），那可能是因为内存中有巨大的对象，特别是如果你的库有一些图像处理工作要做（我假设那是因为我看过`layout`文件）并且它没有正确销毁它们。

我对您的建议是尝试将您的桌面应用程序代码与调用该库的部分分开，可能您应该尝试让它在另一个线程上工作或尝试将该代码段放在控制台应用程序中并从您的桌面应用程序，这会将它们彼此分开，如果可能发生任何崩溃，它不会影响您的桌面应用程序。

# sql - 使用 OVER() 的“语法错误”错误

> ID：13158944
> 
> 赞同：9
> 
> 时间：2012-10-31T13:20:48.043
> 
> 标签：sql, sql-server, tsql

我有一个每月每个交易日的销售预算。因此，第 1 天的预算为 300，第 2 天的预算为 400，然后当月至今的预算为 700。我在查询中收到此错误： `Incorrect syntax near 'ROWS'.`

```
select 
TradingDate
,Budget
,sum(Budget) over (PARTITION BY TradingDate
order by TradingDate asc
ROWS BETWEEN CURRENT ROW AND 1 FOLLOWING),1) AS BudgetMTD
from #4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T07:37:49.017

好的，我想出了一个子查询解决方案：

```
select TradingDate, Budget,
RunningTotal = (select sum(Budget) from #4 s2
where s2.TradingDate<= s1.TradingDate)
from #4 s1
order by s1.TradingDate 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T16:05:26.523

您的查询是每天金额的总和，以及同一天内的下一个金额（您的分区和排序依据在同一个字段上）。这是允许的，但这意味着以下三件事之一：

1.  TradingDate 是一个日期，每个日期都有多个值。如果是这样，总和是不确定的，因为你不知道会跟随哪一个。
2.  TradingDate 名称不好，它实际上是一个日期时间。在这种情况下，您将在同一日期获得下一个日期时间值。
3.  您的查询格式错误，您并不是真正的意思是“按 TradingDate 分区 order by TradingDate”。

我推测你想要两件事之一。第一个是一天的预算与第二天的预算之和。另一个是累积总和。

您可能每天有多行，并且您想要当天的预算总和。如果是这种情况，那么您可以使用更简单的公式：

```
select TradingDate, Budget,
       sum(Budget) over (PARTITION BY TradingDate) AS BudgetMTD
from #4 
```

# c - 让 printf 语句在 openCL 内核代码中工作

> ID：13158955
> 
> 赞同：0
> 
> 时间：2012-10-31T13:21:16.137
> 
> 标签：c, string, escaping, kernel, opencl

在下面的代码片段中，我尝试`printf()`在代码中使用来尝试打印`input[i]`计算结果，以便我可以看到它工作正常。

然而，这并没有像我希望的那样工作，因为引号`printf()`与内核的字符串格式混淆，因此整个程序将无法编译。我尝试使用转义字符`\"`，它确实允许我为内核键入字符串，但是编译时会给我预期的表达式和缺少字符的错误。

有谁知道如何解决这个问题？这是检查内核代码结果的最佳方法吗？

```
 const char *KernelSource =         "\n"
"__kernel void relax(                    \n"
"   __global double* input,                \n"
"   __global double* output,               \n"
"   __global int N)             \n"
"{                                        \n"
"   int i = get_global_id(0);             \n"
"   if(i > 0 && i < N-1){                         \n"
"       input[i] = 0.25*input[i-1]+0.5*input[i]+0.25*input[i+1];  \n"
"       printf("input[%d] %f \n", i, input[i] )\n"
"   }                                        \n"
"}                                        \n"
"\n"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T13:24:24.387

您需要转义引号，并且需要转义格式字符串内部的`\`。`\n`

```
"       printf(\"input[%d] %f \\n\", i, input[i] )\n" 
```

# c# - 用于 Windows 应用程序的 Crystal Report 部署

> ID：13158962
> 
> 赞同：1
> 
> 时间：2012-10-31T13:21:32.217
> 
> 标签：c#, .net, deployment, crystal-reports, crystal-reports-2008

我有一个包含水晶报表的 Windows 应用程序。我想为我的应用程序创建一个部署项目。

我知道如何为水晶报表创建部署项目，但我需要一种在部署中添加水晶报表的方法。

以下是一些可能对您有所帮助的细节。

1.  开发机器：windows XP 32 bit,Visual Studo 2008,.Net framework 3.5,Crystal report version 10.0.3555.0
2.  目标机器：32位Windows 7

以下是一些如何做到这一点的方法，但我不知道具体如何做到这一点。

1.  在项目中添加合并模块..（我知道这些，但我没有合并模块文件，而且我有一个不能正常工作）
2.  在启动操作中使用自定义操作：但这不允许将水晶报表重新分发包添加到源文件中，因为它的文件类型是 .msi（仅允许 .dll、.exe、.js..）
3.  使用 Installer.cs 类并覆盖 install 方法来启动 .msi 应用程序，但我不知道如何获取当前安装路径。

伙计们请快帮我..我一直在寻找解决方案超过 3 天，现在我认为这超出了我目前的职业。:d

感谢你并致以真诚的问候。

# c++ - 如何获得 C++ 变量声明

> ID：13158965
> 
> 赞同：2
> 
> 时间：2012-10-31T13:21:45.843
> 
> 标签：c++, regex

我是使用正则表达式的新手

任何人都可以提供所需的正则表达式来查找用于声明变量的源代码文件中`C++`的所有代码行吗？`C++`

可以声明的一些方法变量可能如下所述：

```
int  x;
int  y=9;
int  x,y;
int  x,y=0;
int  x,y=0,c;
short const x=9;
int* x,y,c=null;
short const *x=NULL;
MyObj aobj();
MyObj aobj(x,y);
Myobj * a = dynamic_cast<A *>(b);
String x = "test"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:48:18.093

以下正则表达式将帮助您入门：

```
(int|short|MyObj|String).*(;) 
```

分解：

1.  `(int|short|MyObj|String)`= 它将搜索任何列出的项目。A`|`可以与更多选项一起添加到列表中。
2.  `.*(;)`= 直到第一个的所有字符`;`，基本上意味着到行尾。

问题是，可以有很多方法来声明一个变量。仅在您的示例中，就有 4 种（如果您考虑区分大小写，则为 5 种）声明方式。除非这只是一次快速的事情，否则我会寻找 Richard 提到的关于获得完整解析器的内容。我不够熟悉，`C++`无法帮助您。

# c# - 从字符串文本框到十六进制 0x 字节 [] c#

> ID：13158969
> 
> 赞同：4
> 
> 时间：2012-10-31T13:21:47.923
> 
> 标签：c#, hex, bytearray

> **可能重复：**
> [如何在 C# 中将字节数组转换为十六进制字符串，反之亦然？](https://stackoverflow.com/questions/311165/how-do-you-convert-byte-array-to-hexadecimal-string-and-vice-versa-in-c)

我有一个输入字符串“AA 11 22 33 44 55 66 77 88 99 AA BB CC DD EE FF”的文本框，我将它拆分为字符串[]，但现在我必须得到一个字节[]这：

```
byte[] b6 = new byte[20] {0xAA,0x11,0x22,0x33,0x44,0x55,0x66,0x77,0x88 ,0x99 ,0xAA ,0xBB,0xCC ,0xDD ,0xEE,0xFF}; 
```

有人可以建议我怎么做。我尝试使用`Convert.ToByte`，但我得到了无法转换`String`为的错误`byte.`而且我不必转换十六进制的值，只需`0x`在每个字节前面添加并添加到字节数组中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:25:13.307

```
string input = "AA 11 22 33 44 55 66 77 88 99 AA BB CC DD EE FF";
byte[] bytes = input.Split().Select(s => Convert.ToByte(s, 16)).ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:25:41.260

尝试

```
int.Parse(hexValue, System.Globalization.NumberStyles.HexNumber); 
```

对于字符串的每个拆分元素并将其添加到列表中。

```
List<Byte> bytes = new List<Byte>();
foreach (var splittedValue in hexString.Split(' ')) {
    bytes.Add(int.Parse(splittedValue, System.Globalization.NumberStyles.HexNumber));
} 
return bytes.ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T13:24:20.243

您可以使用`byte.Parse`：

```
byte[] bytes = str.Split().Select(s => byte.Parse(s, NumberStyles.HexNumber)).ToArray(); 
```

要以十六进制表示形式显示字节，请使用 ToString 覆盖：

```
foreach (var b in bytes)
{
    Console.WriteLine("0x{0:X}", b);
    //or Console.WriteLine("0x" + b.ToString("X"));
} 
```

您还可以使用“X”格式及其在`string.Format`.

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-10-31T14:21:47.907

你可以使用[tostring](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)函数

# c# - C#5 ReadAsync 和迭代器

> ID：13158971
> 
> 赞同：4
> 
> 时间：2012-10-31T13:21:52.770
> 
> 标签：c#, iterator, system.reactive, async-await, c#-5.0

我正在尝试将以下类转换为懒惰地返回文件。

```
public class ObservableFile2 : IObservable<string>
{
    private readonly IObservable<string> subject;

    public ObservableFile2(string fileName)
    {
        subject = Observable.Using<string, StreamReader>
            (
                () => new StreamReader(new FileStream(fileName, FileMode.Open, FileAccess.Read, FileShare.Read)),
                streamReader => ObserveLines(streamReader)
            );
    }

    private IObservable<string> ObserveLines(StreamReader streamReader)
    {
        return ReadLines(streamReader).ToObservable();
    }

    private IEnumerable<string> ReadLines(StreamReader streamReader)
    {
        while (!streamReader.EndOfStream)
        {
            yield return streamReader.ReadLine();
        }
    }        

    public IDisposable Subscribe(IObserver<string> observer)
    {
        return subject.Subscribe(observer);
    }
} 
```

我现在正在尝试将其转换为使用

```
StreamReader.ReadLineAsync() 
```

甚至更好的是对数据进行分块，即

```
await SourceStream.ReadAsync(buffer, 0, chunkSize). 
```

我似乎没有掌握如何包装和打开任务

欢迎提供协助。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T15:44:32.680

我*不是*Rx 大师，所以可能有比我的答案更好的方法。

我相信这应该可以使用`async`-enabled `Create`：

```
public static class ObservableFile2
{
  public static IObservable<string> Create(string fileName)
  {
    return Observable.Create<string>(async (subject, token) =>
    {
      try
      {
        using (var streamReader = new StreamReader(new FileStream(fileName, FileMode.Open, FileAccess.Read, FileShare.Read))
        {
          while (true)
          {
            token.ThrowIfCancellationRequested();
            var line = await streamReader.ReadLineAsync();
            if (line == null)
            {
              subject.OnCompleted();
              return;
            }
            subject.OnNext(line);
          }
        }
      }
      catch (Exception ex)
      {
        subject.OnError(ex);
      }
    });
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T09:20:43.227

我不知道您的解决方案是否需要异步功能，因为您没有提到它-我只能看到您想“懒惰地”使用该文件-我的猜测是您想获得第一行一个时间，如果是这样，这个应该可以解决问题：

```
public static IEnumerable<string> EnumerateLines(string fileName)
{
    using (
        var streamReader =
            new StreamReader(new FileStream(fileName,
                                            FileMode.Open,
                                            FileAccess.Read,
                                            FileShare.Read)))
    {
        while (true)
        {
            if (streamReader.EndOfStream)
                yield break;

            Console.WriteLine("read another line...");
            yield return streamReader.ReadLine();
        }
    }
} 
```

请注意，这仅取决于 StreamReader.ReadLine 的实现细节。您甚至可以尝试使用 Lazy 对这种非严格评估进行评估 - 但随后您会遇到处理文件句柄的麻烦，因为您不知道这些值何时真正被消耗（即使 Haskell 也有这个问题:)） -我的建议：不要试图对文件*懒惰*......这会让你很容易陷入困境

# perl - 在 Perl 中将二进制数据拆分为字节数组

> ID：13158976
> 
> 赞同：3
> 
> 时间：2012-10-31T13:22:14.007
> 
> 标签：perl, split, binary-data, unpack

我基本上想将二进制字符串转换为字节数组/列表（*以便允许索引，并避免使用`substr`，因为它的语法对我来说使事情变得复杂*），我想出了以下[MWE](https://tex.meta.stackexchange.com/questions/228/ive-just-been-asked-to-write-a-minimal-example-what-is-that/231#231)：

```
#!/usr/bin/env perl

use warnings;
use strict;

# Use open ':raw';      # Unknown PerlIO layer class ':raw'
use open IO => ':raw';

binmode(STDIN);
binmode(STDOUT);

# Create original 8-bit byte array/list
my @atmp = (0x80, 0x23, 0x14, 0x0d, 0x0a, 0x00, 0x00, 0x80, 0x43, 0x00, 0x00);

# Make a copy of portion
my @atmp2 = (0) x 2;
@atmp2[0..1] = @atmp[7..8];

# Print output
print "Copied atmp2 contents as hex: " . join(", ", unpack("H2"x2, pack("C"x2,@atmp2))) . "\n";
print "Copied atmp2 as ushort (16bit) int: " . unpack("S", pack("C"x2, @atmp2));
# doublecheck value by routing through printf with format specifier:
printf(" [%d]\n", unpack("S", pack("C"x2, @atmp2)));

# Now, the same data as string:
my $indata = "\x80\x23\x14\x0d\x0a\x00\x00\x80\x43\x00\x00";

# Create byte array (by converting string $indata to array/list with `split`)
my @btmp = split('',$indata);
print "lastindex: " . $#btmp . "\n";

# Make a copy of portion
my @btmp2 = (0) x 2;
@btmp2[0..1] = @btmp[7..8];

# Print output
print "Copied btmp2 contents as hex: " . join(", ", unpack("H2"x2, pack("C"x2,@btmp2))) . "\n";
print "Copied btmp2 as ushort (16bit) int: " . unpack("S", pack("C"x2, @btmp2));
# doublecheck value by routing through printf with format specifier:
printf(" [%d]\n", unpack("S", pack("C"x2, @btmp2))); 
```

运行此代码的结果是：

```
$ perl test.pl
Copied atmp2 contents as hex: 80, 43
Copied atmp2 as ushort (16bit) int: 17280 [17280]
lastindex: 10
Argument "M-\0" isn't numeric in pack at test.pl line 38.
Argument "C" isn't numeric in pack at test.pl line 38.
Copied btmp2 contents as hex: 00, 00
Copied btmp2 as ushort (16bit) int: 0 [0] 
```

如何让第二部分 (btmp2) 的行为与第一部分 (atmp2) 相同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T13:24:47.377

事实证明，当使用 时`split`，它确实创建了一个与原始字符串具有相同字节的数组；但是，它似乎也以某种方式将结果数组标记为“文本”，因此进一步处理因“参数不是数字”而失败。

答案只是用使用的行替换该`split`行`unpack`，而不是：

```
- my @btmp = split('',$indata);
+ my @btmp = unpack('C*',$indata); 
```

...然后，一切都按预期工作（两个打印输出都是相同的）。有趣的是，在这两种情况下，“lastindex”（对于从字符串派生的数组）都将显示为 10（这让我认为 可能有问题`binmode`，这就是代码中所有这些语句的原因）。

# c++ - 用 itoa 打印 BCD 值

> ID：13158980
> 
> 赞同：0
> 
> 时间：2012-10-31T13:22:23.247
> 
> 标签：c++, encoding, itoa

我需要在屏幕上打印一个以 BCD 编码的变量值。

你知道是否可以通过使用在屏幕上打印它`itoa`？

如果有可能，该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:28:21.363

不，`itoa`不会有帮助。您想查看十六进制表示，因此请使用`hex`like in `cout << hex << n << endl;`

注意：BCD 将数字编码为 4 位序列 0000 到 1001，十六进制为 0 到 9。所以 23 作为 BCD 将是`0010 0011`按位的，或者实际上作为 8 位整数它将是 35，因此将其转换为字符串将没有多大用处。

# vb.net - Visual Basic.Net 中 if 语句的一个奇怪案例

> ID：13158981
> 
> 赞同：1
> 
> 时间：2012-10-31T13:22:23.143
> 
> 标签：vb.net, if-statement

![Visual Basic 中 if 子句的一个奇怪案例](../Images/f8504018bf6ccaa8a2dd5a79f4164207.png)

在这里，我 正在检查***WebBrowserEx1.Document.All.Item(t).OuterHtml*** 是否等于***abc***但尽管它们相同，但它不接受它们相同并且不执行 if 语句中的代码。盲人是我还是Visual Basic？

大图：http: [//i.stack.imgur.com/hVjpH.png](https://i.stack.imgur.com/hVjpH.png)

编辑：

```
For t = 1 To WebBrowserEx1.Document.All.Count
    Dim abc = "<LI style=""PADDING-BOTTOM: 2px; PADDING-TOP: 2px"">Hata oluştu. İşlem tamamlanamamıştır. "
    If WebBrowserEx1.Document.All.Item(t).OuterHtml = abc Then
                        WebBrowserEx1.Navigate("http://uyg.sgk.gov.tr/vizite/tarihGiris.do")
       loc = "giris"
       WebBrowserEx1.Update()
       yeniSayfa = True

       Exit For
     End If
Next 
```

手表中 WebBrowserEx1.Document.All.Item(t).OuterHtml 的值：“Hata oluştu.İşlem tamamlanamamıştır.”

手表中 abc 的价值：“Hata oluştu。İşlem tamamlanamamıştır。”

我认为大图应该更具解释性。

第二次尝试类型更正

```
For t = 1 To WebBrowserEx1.Document.All.Count
                    Dim abc As String
                    abc = "<LI style=""PADDING-BOTTOM: 2px; PADDING-TOP: 2px"">Hata oluştu. İşlem tamamlanamamıştır. "
                    If WebBrowserEx1.Document.All.Item(t).OuterHtml = abc Then
                        WebBrowserEx1.Navigate("http://uyg.sgk.gov.tr/vizite/tarihGiris.do")
                        loc = "giris"
                        WebBrowserEx1.Update()
                        yeniSayfa = True
                        Exit For
                    End If
                Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T13:39:29.157

尝试规范化字符串。它们可能看起来相同，但具有不同的 Unicode 表示

```
If WebBrowserEx1.Document.All.Item(t).OuterHtml.Normalize() = abc.Normalize() Then
    ...
End If 
```

（`abc`正如`String`其他人已经指出的那样，类型推断似乎VB类型推断不如C#类型推断。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T13:26:37.740

测试`Len()`两个字符串的。如果它们不同，则存在一些空白问题。

否则（或在任何情况下找出差异开始的地方）逐个字符检查，直到找到差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T13:30:59.057

**注意右栏中每个对象的类型。**由于 abc 变量的类型为“Object”，因此`=`运算符正在检查*引用*相等性。abc 引用的对象可能是一个字符串，但由于该变量只是作为一个对象键入，因此您可以得到引用比较。由于这两个对象不引用同一块内存，因此比较返回`False`. 将您的声明更改`abc`为如下所示：

```
Dim abc As String = "<LI ... " 
```

其他一些需要寻找的东西：

*   任何空白差异都不会显示在调试/监视窗口中，这可能会破坏变量的显示值以适应空间。试着点击放大镜仔细观察。
*   我看到一些非ASCII字符。确保您使用完全相同的 unicode 代码点，否则比较可能会失败。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-31T13:32:08.073

尝试转换`abc`为`String`.

`dim abc as string`

或者 ...

`OuterHTML = cstr(abc)`

我想问题在于`Object`与`String`.

# java - Java 简单打印到 USB 接口

> ID：13158989
> 
> 赞同：2
> 
> 时间：2012-10-31T13:22:48.240
> 
> 标签：java, printing, interface, usb

我有一个 Java 应用程序，它可以将简单的字符串打印到标签打印机，该打印机连接在 PC 的并行 centtronics 接口上。

```
try 
{
  PrintStream printStream = new PrintStream(new FileOutputStream(“LPT1”));
  printStream.print(“Hello World”);
  printStream.close();
} 
catch (Exception exception) 
{
  System.out.println("printer error");
} 
```

这没有问题。

我将标签打印机连接到 PC 的 USB 接口，并安装了打印机 USB 驱动程序。打印机映射到 USB002。我用“USB002”替换了“LPT1”。但它不起作用。

如何使用 USB 端口对标签打印机进行简单的打印，而无需每次都在打印机选择窗口中输入？

# php - ckeditor 和 javascript 的问题

> ID：13158992
> 
> 赞同：0
> 
> 时间：2012-10-31T13:22:59.077
> 
> 标签：php, javascript, replace, ckeditor

我在使用 javascript 和 ckeditor 时遇到了一些麻烦。

我已经完成了一个函数，它将在 textarea 中用它们的表达式替换所有缩写词，例如 tel -> 电话等....

问题在于ckeditor。在普通的 textarea 上，此功能可以正常工作，如下所示：

```
var abbreviations = {
    <?php $rqt="SELECT * FROM `glossaire` WHERE `id_company` ='".$societe['id']."'";
    $result=mysql_query($rqt);
    while($data=mysql_fetch_assoc($result))
    {?>
    "<?php echo ($data['libelle']) ; ?>": "<?php echo ($data['texte']) ; ?>",
     <?php } ?>    

};

function abbrReplace(el, abbrs) {
    if (!el || !abbrs) {
        return false;
    }
    else {
        var val = el.value,
            words = val.split(/\s/);
        for (var i = 0, len = words.length; i<len; i++) {
            if (abbrs[words[i]]) {
                words[i] = abbrs[words[i]];
            }
        }
        return words.join(' ');
    }
}

document.getElementById("suivi").onkeyup = function(){
    this.value = abbrReplace(this, abbreviations);
}; 
```

所以在ckeditor上，我试过这个：`CKEDITOR.instances.commentaire.insertText('abbreviations');`

像那样：

```
var abbreviations = {
    <?php $rqt="SELECT * FROM `glossaire` WHERE `id_company` ='".$societe['id']."'";
    $result=mysql_query($rqt);
    while($data=mysql_fetch_assoc($result))
    {?>
    "<?php echo ($data['libelle']) ; ?>": "<?php echo ($data['texte']) ; ?>",
     <?php } ?>    

};

function abbrReplace(el, abbrs) {
    if (!el || !abbrs) {
        return false;
    }
    else {
        var val = el.value,
            words = val.split(/\s/);
        for (var i = 0, len = words.length; i<len; i++) {
            if (abbrs[words[i]]) {
                words[i] = abbrs[words[i]];
            }
        }
        return words.join(' ');
    }
}

document.getElementById("suivi").onkeyup = function(){
    this.value = CKEDITOR.instances.commentaire.insertText('abbreviations');
}; 
```

我真的迷路了，在ckeditor上它不起作用，

我想我做错了什么，但是我不知道如何纠正它。

任何帮助将不胜感激。

亲切的问候。

SP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:05:04.567

# php - 如何显示从下拉菜单中选择的模块名称

> ID：13158994
> 
> 赞同：0
> 
> 时间：2012-10-31T13:23:07.670
> 
> 标签：php

我在“module.php”脚本下面有这段代码，它在每个 ModuleId 和 Module Name 的下拉菜单中显示选项：

```
 $sql = "
    SELECT cm.CourseId, cm.ModuleId, 
    c.CourseName,
    m.ModuleName
    FROM Course c
    INNER JOIN Course_Module cm ON c.CourseId = cm.CourseId
    JOIN Module m ON cm.ModuleId = m.ModuleId
    WHERE
    (c.CourseId = ?)
    ORDER BY c.CourseId, m.ModuleId
    "; 

     $sqlstmt=$mysqli->prepare($sql);

     $sqlstmt->bind_param("s",$course);

     $sqlstmt->execute(); 

     $sqlstmt->bind_result($dbCourseId,$dbModuleId,$dbCourseName,$dbModuleName);

    $moduleHTML  = "";  

     while($sqlstmt->fetch()) { 
        $moduleHTML .= "<option value='$dbModuleId'>" . $dbModuleId . " - " . $dbModuleName . "</option>".PHP_EOL;   
    } 

    echo $moduleHTML; 

     $sqlstmt->execute(); 
```

现在我想在单独的页面 (editsession.php) 上回显 ModuleId 和 Module Name，现在我已经设法回显 Module Id 但我的问题是如何在另一个页面上回显模块名称？

```
 $moduleHTML = "";  
    $moduleHTML .= '<select name="modules" id="modulesDrop">'.PHP_EOL; 
    $moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;  
    $moduleHTML .= '</select>'; 

if (isset($_POST['moduleSubmit'])) {    

$outputmodule = ""; 
$outputmodule = "<p><strong>Module:</strong> " . $_POST['modules'] .  " - "  . "" . "</p>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:30:08.050

根据您的 ModuleID 进行 SELECT 查询。

# android - AsyncTask 完成执行后在 DDMS 中处于“等待”状态

> ID：13158996
> 
> 赞同：0
> 
> 时间：2012-10-31T13:23:34.620
> 
> 标签：android, android-asynctask

我有一个 AsyncTask（在后台进行一些网络连接检查），假设它在 onPostExecute 中什么都不做。问题是当我查看 DDMS 线程视图时，我看到我的 AsyncTask 仍在等待 smth，尽管后台工作已经完成并且我什至退出了应用程序。

我认为这种行为不正常，有人可以启发我吗？

```
public class CheckConnectionTask extends AsyncTask<String, Integer, Boolean> {
    private Integer forTask = null;

    public CheckConnectionTask(Integer forTask) {
        super();
        this.forTask = forTask;
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
    }

    @Override
    protected Boolean doInBackground(String... params) {
        if (D) Log.d(TAG, "doInBackground");
        Thread.currentThread().setName("CheckConnectionTask for task " + forTask);

        return DataUtils.isInternetConnectionAvailable(CurrentActivity.this);
    }

    @Override
    protected void onPostExecute(Boolean result) {
        if (D) Log.d(TAG, "onPostExecute");
        super.onPostExecute(result);

        //do some UI work here, nothing for the moment

    }

} 
```

# ios - 关闭 Childbrowser 转发到 html

> ID：13158997
> 
> 赞同：0
> 
> 时间：2012-10-31T13:23:37.597
> 
> 标签：ios, xcode, cordova, phonegap-plugins

使用儿童浏览器。我的情况：

*   有一个 index.html 文件和 test.html。
*   去test.html
*   从 test.html 启动 Childbrowser
*   我按下左上角的“完成”按钮
*   Childbrowser 正在关闭并从我的应用返回到最后打开的页面，在本例中为 www/test.hml

我想将 Childbrowser 重定向/转发到我的 index.html 电话间隙？我该怎么做？

js文件：

// 当用户选择“完成”按钮时回调 // 从本机调用

```
ChildBrowser._onClose = function()
{
    window.plugins.childBrowser.onClose();
}; 
```

.m 文件中的代码片段：

```
- (void)closeBrowser
{

    if (self.delegate != nil) {
        [self.delegate onClose];
    }
    if ([self respondsToSelector:@selector(presentingViewController)]) {
        // Reference UIViewController.h Line:179 for update to iOS 5 difference - @RandyMcMillan
        [[self presentingViewController] dismissViewControllerAnimated:YES completion:nil];
    } else {
        [[self parentViewController] dismissModalViewControllerAnimated:YES];
    }
}

- (IBAction)onDoneButtonPress:(id)sender
{ 
    [self closeBrowser];
    NSURLRequest* request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"about:blank"]];
    [self.webView loadRequest:request];
} 
```

另一个 .m 文件：

```
- (void)close:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options // args: url
{
    [self.childBrowser closeBrowser];
}

- (void)onClose
{
    [self.webView stringByEvaluatingJavaScriptFromString:@"window.plugins.childBrowser.onClose();"];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T14:53:59.520

在您的 onClose 处理程序中，将 document.location 设置为 index.html。应该就这么简单。

# c++ - 如何在另一个宏 agument 列表中调用 put 宏？

> ID：13158998
> 
> 赞同：0
> 
> 时间：2012-10-31T13:23:41.470
> 
> 标签：c++, visual-c++

> **可能重复：**
> [如何使用宏作为其他宏参数列表之一](https://stackoverflow.com/questions/13153811/how-can-i-use-macro-as-one-of-other-macro-parameters-list)

```
#define SUM(a, b, c)  (a+b+c)
#define DUPLICATE(a)   a, a

int result = SUM(1, DUPLICATE(2)); // equivalent to SUM(1, 2, 2) 
```

我收到这个警告：

```
warning C4003: not enough actual parameters for macro 'SUM' 
```

我怎样才能避免这个警告并`SUM(1, DUPLICATE(2))`扩大到`SUM(1, 2, 2)`？