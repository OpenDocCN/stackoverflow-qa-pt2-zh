# StackOverflow 问答 14536000-14536999

# php - PHP 脚本返回 json，但我收到 parseerror

> ID：14536002
> 
> 赞同：0
> 
> 时间：2013-01-26T10:24:16.373
> 
> 标签：php, jquery, ajax, json, parse-error

我知道有类似的问题，但我想在这里得到一些澄清。

使用以下 Ajax 设置：

```
 $.ajaxSetup({
        cache: true,
        dataType: 'json',
        error: function(xhr, status, error){
           console.log(status);
        },
        timeout: 60000, //Timeout of 60s
        type: 'POST',
        url: 'test.php'
    }); //Close $.ajaxSetup()

    $('#openTest').bind('click', function(){
    $.ajax({
        data: {val: "Hello", val2: "Hello2"},
        success: function(response){
            console.log('complete');
            console.log(response);
        }
    }); 
```

当'test.php'是：

```
<?php
$return= array ('one'=>'one1', 'two'=>'two1');
return json_encode($return);
?> 
```

我收到解析错误。但是当我用'echo'替换'return'时，它工作正常。

```
<?php
$return= array ('one'=>'one1', 'two'=>'two1');
echo json_encode($return);
?> 
```

我将通过这个 $.ajax 调用检索更复杂的数据，并且我期待“返回”能够正常工作，“回声”在我看来并不是一个好的解决方案。

那么，你有什么建议？Ajax 设置或调用是否有问题，所以'return' 不起作用，'echo' 是一个好的解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T10:32:58.570

不，您的 ajax 设置没有问题，这是因为它`return`与 PHP 一起使用，`objects`或者`variables`它无法将值返回给其他语言，例如`javascript`. 当您使用`echo`它时，会将值发送到`HTTP response`以便您`ajax response`可以处理它。

处理复杂数据的最佳方法是将它们发送到数组中，例如：

```
$arr = array();
$arr['res'] = 'something';
$arr['res2'] = 'somethingelse'; 
echo json_encode($arr); 
```

然后你可以`object.parameter`像`jquery code`我之前在这个[例子](https://stackoverflow.com/questions/14521684/retrieve-data-from-controller-in-json-code-igniter/14521999#14521999)中指定的那样处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T10:29:41.683

`return`将数据返回给函数的调用者，并且由于您不在函数中，因此无法使用 return。 `echo`打印数据。`echo`走的路也是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T10:30:13.983

当您在 php 中执行 return 时，它不会被打印出来。当你做一个回声时，它会被打印出来。

php 或 Ajax 没有任何问题，只是上下文错误。

简单地说，当您需要捕获返回的数据并可能对其进行处理时，请使用 return。使用 return 的最佳情况是在函数中。

当您需要直接打印某些内容时，请使用 echo。

在这种情况下，我推荐使用回显和退出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T10:32:07.407

Return 用于函数中以获取数据并在 PHP 中以某种方式使用它。Echo 用于 ajax 调用，因为您的 PHP 代码会将数据输出到调用它的任何对象（浏览器、ajax 调用等）。

您可能还希望`header('Content-Type: application/json');`在您的 PHP 文件中包含所有内容以确保一切正常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-27T14:50:58.530

总是在ajax调用中将php打印或解析为html文件然后获取数据，这将为您节省很多精力。

ajax 只是读取文件，没有办法用两种不同的语言 PHP 和 JS 进行调用。JS 刚刚从服务器返回了文件，如果它是 php，那么它将被解释为 html 或其他可能的 Ajax 调用。

# c++ - 如何使用 C++ 在 Windows 中创建守护线程？

> ID：14536010
> 
> 赞同：2
> 
> 时间：2013-01-26T10:25:09.570
> 
> 标签：c++, windows, multithreading

我正在尝试使用本机 api 在 c++ 中为 Windows 创建一个守护线程，但我似乎找不到对守护线程的任何引用。有没有人有与此相关的文档的链接，或者在 Windows 上有不同的术语？如何在 C++ 中的 Windows 上创建守护线程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T01:26:02.217

`ExitProcess`在 Windows 中，当进程准备好退出时，您的主线程应该调用或从 main() 函数返回。如果有其他不应终止的线程正在运行，*则您有责任跟踪这一点，并且在这些线程完成之前不要退出主函数*。

实际上，这意味着所有线程都是“守护线程”。

（原则上，没有线程是守护线程；如果您明确地终止主线程，则该进程将在所有线程退出之前不会退出。不幸的是，这包括 Windows 为您自动创建的线程，其中一些可能永远不会退出，所以这不是一个好主意。）

# c++ - Qt重绘paintEvent被调用但小部件没有更新

> ID：14536011
> 
> 赞同：4
> 
> 时间：2013-01-26T10:25:10.763
> 
> 标签：c++, qt, repaint

My`paintEvent`可以访问一个指针，其值会不时变化，绘制的内容取决于这些值。通过基本调试，我确定正在调用此函数，但窗口没有更新。新的东西只有在失去焦点到另一个应用程序时才会出现在窗口上。

如果这与性能有关，我可以在 中设置一个静态变量`paintEvent`来检查指针是否已更新，以避免不必要的重绘。如果 Qt 能在我告诉它时进行绘画，那就太好了。

我希望有人可以帮助我或为我指明正确文档的方向。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T09:23:22.967

您必须调用**update()**方法来重新绘制您的小部件。

# mysql - MySQL LIMIT 范围 0,500 和 1, 500 有什么区别？

> ID：14536013
> 
> 赞同：7
> 
> 时间：2013-01-26T10:25:15.950
> 
> 标签：mysql, sql, select

如果我想在 MySQL 行 1 到 500 中，我应该使用 LIMIT 0、500 还是 LIMIT、1、500？有什么不同？谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-26T10:26:41.270

第一个从整个结果的第一个记录开始，而第二个从结果的第二个记录开始。

考虑以下记录

```
ID
1 -- index of the first record is zero.
2
3
4
5
6 
```

如果你执行

```
LIMIT 0, 3
-- the result will be ID: 1,2,3

LIMIT 1, 3
-- the result will be ID: 2,3,4 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/92fea/7)

其他）

*   [限制 - MySQL 命令（*更多信息*）](http://php.about.com/od/mysqlcommands/g/Limit_sql.htm)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-20T02:29:03.427

在 MySQL 中，LIMIT n1, n2 的含义是：

```
n1 : 起始索引
n2 ：您要显示的记录/数据的数量

```

例如 ：

```
ID
-------------------------
1 ------------ > 索引 0
2
3
4
5
6
7
8
9
10 ------------ > 索引 9

```

现在，如果您编写查询，例如

```
选择 * 从 tbl_name 限制 0,5
输出 ：
1
2
3
4
5

```

如果你写这样的查询

```
选择 * 从 tbl_name 限制 2,7
输出 ：
3
4
5
6
7
8
9

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-17T04:08:51.920

@JohnWoo 那不正确。`SELECT`没有`ORDER BY`子句的语句中的行顺序是未指定的。因此，即使通过视觉查看此类查询的输出顺序，它可能看起来是特定顺序，但该顺序并不能保证，因此也不可靠。如果您需要以某种方式对结果集进行排序，则必须使用`ORDER BY`子句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-31T09:48:17.890

## ID

1
2 3 4 5 ------------ > 索引 0 6 7 8 9 ------------ > 在 5 索引后添加 4 值 10

如果你想要从 5 到 9 的数据，那么查询应该是

SELECT * from table_name LIMIT 5,4

# mysql - Mysql Group 表值并显示它们的总数

> ID：14536018
> 
> 赞同：-1
> 
> 时间：2013-01-26T10:25:40.847
> 
> 标签：mysql, phpmyadmin

我有一张存储厨房库存的桌子。：

表结构： `tbl_inv`

```
╔══════════════╦══════════╦══════╗
║ MATERIALNAME ║ QUANTITY ║ UNIT ║
╠══════════════╬══════════╬══════╣
║ chicken      ║        5 ║ kgs  ║
║ cheese       ║       10 ║ kgs  ║
║ chicken      ║       10 ║ pcs  ║
║ cheese       ║       10 ║ kgs  ║
║ chicken      ║       10 ║ kgs  ║
╚══════════════╩══════════╩══════╝ 
```

我想在我的 html 页面上输出这个 -

```
╔═════════════╦══════════╦══════╗
║MATERIALNAME ║ TOTALSUM ║ UNIT ║
╠═════════════╬══════════╬══════╣
║ cheese      ║       20 ║ kgs  ║
║ chicken     ║       15 ║ kgs  ║
║ chicken     ║       10 ║ pcs  ║
╚═════════════╩══════════╩══════╝ 
```

我尝试过遵循 SQL，

```
SELECT materialname, SUM(quantity) totalValue FROM tbl_inv GROUP BY materialname"; 
```

我不知道我应该在 mysql 命令中使用什么来获得这个输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T10:31:54.233

`materialName`你基本上将它们分组`unit`

```
SELECT  materialName, SUM(quantity) totalSum, unit
FROM    tableName
GROUP   BY materialName, unit 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/eff51/1)

其他）

*   [GROUP BY 和其他*AGGREGATE*函数](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T10:51:41.187

用排序查询试试这个 Group by...

```
SELECT  materialName MATERIALNAME, SUM(quantity) TOTALSUM, unit UNIT
FROM    tableName
GROUP   BY MATERIALNAME, UNIT
ORDER   BY MATERIALNAME 
```

# php - 照片未使用图形 API 上传到 Facebook 相册

> ID：14536021
> 
> 赞同：1
> 
> 时间：2013-01-26T10:26:08.850
> 
> 标签：php, facebook, facebook-graph-api

给予足够的文件上传权限后，照片未上传到 Facebook 相册中……我还参考了有关图形 api 的相关问题，但仍然没有成功……

```
 $facebook->getLoginUrl(array('scope' => 'user_status,publish_stream,user_photos,photo_upload,can_upload'));

                        $album_details = array(
                                'message'=> 'Testing Description For Pic',
                                'name'=> 'Testing Pic Album'
                        );

                        $create_album = $facebook->api('/me/albums', 'post', $album_details);

                        $args = array(
                                'message' => 'Photo from application',
                                'image' => '@'.$imgURL
                        );

                        $url = 'http://graph.facebook.com/'.$create_album['id'].'/photos?access_token='.$aut_key;
                        $ch = curl_init();
                        curl_setopt($ch, CURLOPT_URL, $url);
                        curl_setopt($ch, CURLOPT_HEADER, false);
                        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
                        curl_setopt($ch, CURLOPT_POST, true);
                        curl_setopt($ch, CURLOPT_POSTFIELDS, $args);
                        $data = curl_exec($ch); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:30:22.717

这是对我有用的代码

```
<?php
    $img = 'image.jpg';
    $args = array(
       'message' => 'Photo from application',
        'access_token'=>urlencode('Your Access token'),
    );
    $args[basename($img)] = '@'.realpath($img);

    $ch = curl_init();
    $url = 'https://graph.facebook.com/me/photos';
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($ch, CURLOPT_HEADER, false);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $args);
    $data = curl_exec($ch);
    $response = json_decode($data,true);

    if($response[id]>0){
    // yes
    }

    print_r(json_decode($data,true));

    print_r(curl_error($ch));
?> 
```

可能对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T10:45:35.803

我也遇到过同样的问题

请尝试确保 $imgURL 是您服务器上的相对图像位置，而不是图像的通用网址。

另外，尝试在这里交叉检查[http://developers.facebook.com/blog/post/498/](http://developers.facebook.com/blog/post/498/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T12:44:49.633

尝试改变

```
 'image' => '@'.$imgURL 
```

到

```
 'source' => '@'.$imgURL 
```

Facebook API 指定“来源”应包含图像信息。上传图像时，图像 API 中没有提及“图像”字段。

[Facebook 照片 API 文档](https://developers.facebook.com/docs/reference/api/photo/)

# php - 从 CSV 批量导入 PHP 并处理

> ID：14536027
> 
> 赞同：1
> 
> 时间：2013-01-26T10:27:11.580
> 
> 标签：php, jquery

我有一个门户网站，您可以在其中将新用户添加到托管平台，当您通过表单添加用户时，它将用户信息保存到 mysql 表（pdo）中，实际上可能会插入 3 或 4 个表。

此外，一个 SOAP 请求被发送到外部站点并读取响应，这取决于用户选项，可能会发送进一步的肥皂请求。

还与 smpp 提供商建立连接以发送 SMS。

因此，仅添加 1 个用户可能会花费相当多的执行时间。我想进行批量导入 csv 选项，上传文件并将每一行作为要添加的新用户处理。

说导入 100 个用户而没有错误和超时的最佳方式是什么？

我正在考虑每个用户的 ajax 请求，如此处所示[如何将每个 php foreach 值放入每个 jquery ajax](https://stackoverflow.com/questions/6239495/how-to-put-each-php-foreach-value-into-each-jquery-ajax)

但是回答的人也说“但是，我强烈建议将值作为数组传递并且只有一个 ajax 调用”。但这不会容易超时吗？

理想情况下，我觉得最好的方法是一次添加一个，并为每个用户获得一个结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T10:44:56.743

如果上传成功，您可以上传 CSV 文件并让服务器立即响应。服务器可以将 CSV 放入队列中，并让调度程序从队列中提取文件并在单独的进程上执行所有操作。客户端会定期发送一个 ajax 请求来检查服务器是否完成了批量操作。如果完成，服务器将响应 ajax 调用，其中包含对 CSV 中所有项目的所有操作和任何错误的摘要。我不会在 CSV 中为每个项目发送一个 ajax 调用，这会破坏批处理项目的整个目的。

你在 Linux 上运行吗？如果是这样，一个示例是使用[cron](http://en.wikipedia.org/wiki/Cron)每分钟执行[一次](http://php.net/manual/en/features.commandline.usage.php)批处理 php 脚本。例如在你的 crontab 文件中：

`* * * * * php /path/batch_processor.php`

文件队列可以存储在记录上传时间、处理开始和完成等的数据库表中，php 脚本只是提取第一个未处理的文件并开始工作。

[或者，您可以在使用exec](http://php.net/manual/en/function.exec.php)而不是使用调度程序上传 CSV 文件时立即启动后台进程。PHP手册说：

> 如果使用此函数启动程序，为了使其继续在后台运行，程序的输出必须重定向到文件或另一个输出流。否则将导致 PHP 挂起，直到程序执行结束。

所以你可以在你的上传处理程序中使用类似的东西。

```
exec("nohup php /path/batch_processor.php 1 > batch_output.txt  2 > batch_error.txt &"); 
```

和重定向脚本输出和错误`1 >`；表示在后台运行；忽略挂断信号，例如如果进程所有者会话结束。`2 >``&``nohup`

如果你在 Windows 上然后四处搜索，那里有很多关于运行后台进程的信息。

当您的批处理脚本完成时，它可以将 csv 文件标记为在 db 表或其他共享资源中已完成，因此当您处理 ajax 调用以检查 csv 批处理的状态时，您可以简单地查找并检查已完成标志并返回如果完成，批量输出到客户端。

如果您想改进功能并为每个 ajax 调用提供增量状态更新，无论批处理是否已完成，那么您的批处理将为它处理的每个项目写入共享资源（数据库或文件等），并且您的 ajax 处理程序将读取从这里返回给客户。

# javascript - 从 document.write 函数获取数据

> ID：14536029
> 
> 赞同：-1
> 
> 时间：2013-01-26T10:27:23.883
> 
> 标签：javascript, objective-c, document.write

> **可能重复：**
> [iOS 中的 node.js 和 phantom.js？](https://stackoverflow.com/questions/14535629/node-js-and-phantom-js-in-ios)

如何在 iOS 中从该表中获取数据：

```
<script type="text/javascript" src="//www.google.com/trends/embed.js?hl=en-US&cat=0-14&date=today+7-d&cmpt=q&content=1&cid=RISING_QUERIES_0_0&export=5&w=300&h=420"></script> 
```

我认为这是一个 document.write 函数，所以我无法解析它。那我怎样才能从表中获取数据呢？

非常感谢任何帮助。谢谢！安托万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:11:00.497

以下是 document.write 的开头：

```
<iframe width="300" height="420" src="//www.goo 
```

由于浏览器的同源策略，您无法访问 iframe 中的任何内容。

# php - 匿名联系表格

> ID：14536033
> 
> 赞同：1
> 
> 时间：2013-01-26T10:27:43.587
> 
> 标签：php, iphone, contact, anonymous, feedback

我正在制作一个 iPhone 6.0 应用程序，它允许用户向预设的电子邮件地址发送消息，但发件人是匿名的。目的是让用户能够提出问题（包括愚蠢的问题），而不必担心被认为是愚蠢的，因此可以匿名发送。

有谁知道这样做的最佳方法？

谢谢

莱斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:19:47.793

注册一个免费的 PHP 主机并设置一个接受消息并将它们转发到您的电子邮件的表单。

在您的应用程序上显示一个可以填写并发送到您的 php 表单的屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-02T23:03:24.213

[使用https://fncontact.com](https://fncontact.com)之类的东西可能更容易，它可以让您制作匿名联系表格。

# php - 两个表的数组之间的比较

> ID：14536038
> 
> 赞同：0
> 
> 时间：2013-01-26T10:28:19.137
> 
> 标签：php, mysql, arrays, for-loop

我盯着这个看了好几个小时。我无法找到错误。谁能告诉我我做错了什么？或者有没有更好的比较方法？

```
$res1=mysql_query(**query for table1**);
$n1=mysql_num_rows($res1);
$res2=mysql_query(**query for table 2**);
$n2=mysql_num_rows($res2);

for($i=0;$i<$n1;$i++)
{
    $r1=mysql_fetch_row($res1);

    for($j=0;$j<$n2;$j++)
    {
        $r2=mysql_fetch_row($res2);
        if($r1[0]==$r2[0])
        {
            echo $r1[0]."<br>";
        }
    }
} 
```

表 1 包含这些元素：1,2,3,16,18,19,20,21,22,24,23 表 2 包含：23,21

但是，该程序返回零匹配。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T10:34:55.100

所以这里发生的是

1.  您正在正确循环结果 1 的所有 hte 元素，但您没有正确循环结果 2 的所有元素。

结果两个元素在第一次迭代中被耗尽。

从您发布的示例数据中，这里是循环：

当 r1 为 1 时，

r2 是 23,21

当 r1 为 2 时，

r2 已用尽。

要再次重置结果二，您必须这样做

mysql_data_seek($res2,0); 每一次

即你的for循环看起来像这样

```
for($i=0;$i<$n1;$i++) {

    $r1=mysql_fetch_row($res1);

    mysql_data_seek($res2,0);
    for($j=0;$j<$n2;$j++)     {
        $r2=mysql_fetch_row($res2);
        if($r1[0]==$r2[0])         {
           echo $r1[0]."<br>";
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T10:32:48.403

让数据库在单个查询中进行连接。这就是它们的用途，它们通常使用更有效的算法，例如，如果索引可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T10:38:00.043

听起来你想要的是一个`INNER JOIN`. A`JOIN`是关系数据库的基本组件，它允许来自多个表的数据以不同的方式相交。

我最喜欢的`JOIN`s 解释实际上来自于[Bugzilla 文档](http://www.bugzilla.org/docs/developer.html#sql-join)——它们很好地解释了所有不同的类型。

在您的情况下，您的查询将如下所示：

```
SELECT
    table1.field1, table1.field2, ...,
    table2.field2, table2.field2, ...
FROM table1
INNER JOIN table2 ON (table1.id = table2.id) 
```

我创建了一个[SQL Fiddle](http://sqlfiddle.com/#!2/c8c93/1/0)供您阅读。

# r - 在 R 中绘制柯西分布的直方图

> ID：14536042
> 
> 赞同：3
> 
> 时间：2013-01-26T10:28:50.793
> 
> 标签：r, histogram

我正在尝试使用以下代码在 R 中绘制柯西分布的直方图：

```
X = rcauchy(10^5)
hist(X) 
```

而且无论我在`hist()`函数中尝试什么选项，我在直方图上都看不到两个以上的条（基本上一个用于负值，一个用于正值）。

但是，当我使用正态分布（或其他）时，它工作正常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T10:47:36.817

这是由于分布的特性造成的。

大多数值都相对接近于零，但非常大的绝对值比正态分布更有可能。大约有 1% 的值的绝对值大于 50，而 0.1% 的值大于 500。

尝试仅绘制部分值：

```
hist(X[abs(X)<1])
hist(X[abs(X)<5])
hist(X[abs(X)<50])
hist(X) 
```

您还可以查看累积分布函数：

```
plot(ecdf(X)) 
```

并检查箱线图：

```
boxplot(X) 
```

# perl - 在perl中遍历哈希数组

> ID：14536043
> 
> 赞同：3
> 
> 时间：2013-01-26T10:29:26.923
> 
> 标签：perl, multidimensional-array

我的结构如下：

```
my $var1 = [{a=>"B", c=>"D"}, {E=>"F", G=>"H"}]; 
```

现在我想遍历第一个哈希和其中的元素。我该怎么做？

当我做一个倾倒`$var1`它给我`Array`时，`@var1`它说一个哈希。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T10:40:28.790

您可以像使用任何其他数组一样迭代该数组，并且您将获得散列引用。然后像使用普通哈希引用一样遍历每个哈希的键。

就像是：

```
foreach my $hash (@{$var1}) {
  foreach my $key (keys %{$hash}) {
    print $key, " -> ", $hash->{$key}, "\n";
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T10:45:29.403

首先，您将使用包含裸字的变量声明来触发 Perl 的严格模式。

考虑到这一点，下面给出了完整的注释示例。

```
use strict;

my $test = [{'a'=>'B','c'=>'D'},{'E'=>'F','G'=>'H'}];

# Note the @{ $test }
# This says "treat this scalar reference as a list".
foreach my $elem ( @{ $test } ){
    # At this point $elem is a scalar reference to one of the anonymous
    # hashes
    #
    # Same trick, except this time, we're asking Perl
    # to treat the $elem reference as a reference to hash
    #
    # Hence, we can just call keys on it and iterate
    foreach my $key ( keys %{ $elem } ){
        # Finally, another bit of useful syntax for scalar references
        # The "point to" syntax automatically does the %{ } around $elem
        print "Key -> $key = Value " . $elem->{$key} . "\n";
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T11:13:39.163

```
C:\wamp\bin\perl\bin\PERL_2~1\BASIC_~1\REVISION>type traverse.pl
my $var1=[{a=>"B", c=>"D"},{E=>"F", G=>"H"}];
foreach my $var (@{$var1}) {
  foreach my $key (keys(%$var)) {
    print $key, "=>", $var->{$key}, "\n";
  }
  print "\n";
}

C:\wamp\bin\perl\bin\PERL_2~1\BASIC_~1\REVISION>traverse.pl
c=>D
a=>B

G=>H
E=>F 
```

* * *

1.  `$var1 = []`是对匿名数组的引用

2.  在它之前使用`@`印记可以`$var1`让您访问它所引用的数组。所以类似于`foreach (@arr) {...}`你会做`foreach (@{$var1}) {...}`的。

3.  现在，您提供的数组中的元素`@{$var1}`也是匿名的（意味着未命名），但它们是匿名哈希，所以就像使用 arrayref 一样，在这里我们`%{$hash_reference}`可以访问由`$hash_reference`. 这里，`$hash_reference`是`$var`。

4.  使用 访问散列后，使用或`%{$var}`访问散列的键变得很容易。由于返回的结果是一个键数组，因此我们可以使用inside 。`keys(%$var)``keys(%{$var})``keys(%{$var})``foreach (keys(%{$var})) {...}`

5.  我们通过使用类似的键来访问匿名哈希**中的标量值**`$hash_reference->{$keyname}`，这就是代码所做的全部。

6.  如果您的数组包含数组的匿名哈希，例如： `$var1=[ { akey=>["b", "c"], mkey=>["n", "o"]} ];` 那么，这就是您**访问数组值的**方式：

    ```
    C:\wamp\bin\perl\bin\PERL_2012\BASIC_PERL\REVISION>type traverse.pl
    my $var1=[ {akey=>["b", "c"], mkey=>["n", "o"]} ];

    foreach my $var (@{$var1}) {
      foreach my $key (keys(%$var)) {
        foreach my $elem (@{ $var->{$key} }) {
          print "$key=>$elem,";
        }
        print "\n...\n";
      }
      print "\n";
    }
    C:\wamp\bin\perl\bin\PERL_2012\BASIC_PERL\REVISION>traverse.pl
    mkey=>n,mkey=>o,
    ...
    akey=>b,akey=>c,
    ... 
    ```

经常练习，很快你就会很容易将复杂的结构分解成这样的组合。这就是我[为另一个软件创建大型解析器的方式](https://bitbucket.org/prateekmehta/blender_obj_perl_parser_bitbucket/src/2cb343b9e1a51133fa66a0e117918e4728bccab1/parser.pl?at=master)，它充满了您问题的答案:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T00:25:20.377

看了一眼上面 amon 投票赞成的评论（谢谢，amon！）我能够写出这个小曲子：

```
#!/usr/bin/perl
# Given an array of hashes, print out the keys and values of each hash.

use strict; use warnings;
use Data::Dump qw(dump);

my $var1=[{A=>"B",C=>"D"},{E=>"F",G=>"H"}];
my $count = 0;

# @{$var1} is the array of hash references pointed to by $var1
foreach my $href (@{$var1})
{
    print "\nArray index ", $count++, "\n";
    print "=============\n";

    # %{$href} is the hash pointed to by $href
    foreach my $key (keys %{$href})
    {
            # $href->{$key} ( ALT: $$href{$key} ) is the value
            # corresponding to $key in the hash pointed to by
            # $href
            # print $key, " => ", $href->{$key}, "\n";
            print $key, " => ", $$href{$key}, "\n";
    }

print "\nCompare with dump():\n";
dump ($var1);

print "\nJust the first hash (index 0):\n";
# $var1->[0] ( ALT: $$var1[0] ) is the first hash reference (index 0)
# in @{$var1}
# dump ($var1->[0]);
dump ($$var1[0]);

#print "\nJust the value of key A: \"", $var1->[0]->{A}, "\"\n";
#print "\nJust the value of key A: \"", $var1->[0]{A}, "\"\n";
print "\nJust the value of key A: \"", $$var1[0]{A}, "\"\n" 
```

# perl - grep 变量并提供信息输出

> ID：14536051
> 
> 赞同：3
> 
> 时间：2013-01-26T10:30:18.810
> 
> 标签：perl, bash, sed, awk, grep

我想看看文件/行中提到了多少次特定的单词。

我的虚拟示例如下所示：

```
cat words
blue
red 
green
yellow 

cat text
TEXTTEXTblueTEXTTEXTblue
TEXTTEXTgreenblueTEXTTEXT
TEXTTEXyeowTTEXTTEXTTEXT 
```

我正在这样做：

```
for i in $(cat words); do grep "$i" text | wc >> output; done

cat output
  2       2      51
  0       0       0
  1       1      26
  0       0       0 
```

但我真正想得到的是：
1.用作变量的单词；
2\. 在多少行（除了文本命中）中找到了单词。

首选输出如下所示：

```
blue    3   2
red     0   0 
green   1   1
yellow  0   0 
```

$1 - 被 grep'ed 的变量
$2 - 在文本中找到变量的次数
$3 - 在多少行中找到变量

希望有人可以帮助我使用 grep、awk、sed 来完成这项工作，因为它们对于大型数据集来说足够快，但是 Perl 单行也可以帮助我。

**编辑**

试过这个

```
 for i in $(cat words); do grep "$i" text > out_${i}; done && wc out* 
```

它看起来不错，但是有些单词超过 300 个字母，所以我无法创建像单词一样命名的文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T10:51:44.073

您可以使用仅打印匹配行的匹配部分的`grep` [选项`-o`](http://linux.die.net/man/1/grep)，**每个匹配项在单独的输出行上**。

```
while IFS= read -r line; do
    wordcount=$(grep -o "$line" text | wc -l)
    linecount=$(grep -c "$line" text)
    echo $line $wordcount $linecount
done < words | column -t 
```

您可以将它们全部放在一条线中，使其成为一条线。

如果 column 给出“column too long”错误，您可以使用 printf ，前提是您知道最大字符数。使用以下代替`echo`并删除管道到列：

```
printf "%-20s %-2s %-2s\n" "$line" $wordcount $linecount 
```

如果需要，将 20 替换为您的最大字长和其他数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T13:16:41.493

这是一个类似的 Perl 解决方案；而是写成一个完整的脚本。

```
#!/usr/bin/perl

use 5.012;

die "USAGE: $0 wordlist.txt [text-to-search.txt]\n" unless @ARGV;

my $wordsfile = shift @ARGV;
my @wordlist = do {
    open my $words_fh, "<", $wordsfile or die "Can't open $wordsfile: $!";
    map {chomp; length() ? $_ : ()} <$words_fh>;
};

my %words;
while (<>) {
    for my $word (@wordlist) {
        my $cnt = 0;
        $cnt++ for /\Q$word\E/g;
        $words{$word}[0] += $cnt;
        $words{$word}[1] += 1&!! $cnt; # trick to force 1 or 0.
    }
}

# sorts output after frequency. remove `sort {...}` to get unsorted output.
for my $key (sort {$words{$b}->[0] <=> $words{$a}->[0] or $a cmp $b} keys %words) {
    say join "\t", $key, @{ $words{$key} };
} 
```

示例输出：

```
blue    3       2
green   1       1
red     0       0
yellow  0       0 
```

优于 bash 脚本的优势：每个文件只读取一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T12:54:39.537

作为 Perl 单行，这变得非常难看（部分原因是它需要从两个文件中获取数据，并且只能在标准输入上发送一个，部分原因是需要计算匹配的行数和匹配的总数） ，但是你去：

```
perl -E 'undef $|; open $w, "<", "words"; @w=<$w>; chomp @w; $r{$_}=[0,{}] for @w; my $re = join "|", @w; while(<>) { $l++; while (/($re)/g) { $r{$1}[0]++; $r{$1}[1]{$l}++; } }; say "$_\t$r{$_}[0]\t" . scalar keys %{$r{$_}[1]} for @w' < text 
```

这需要 perl 5.10 或更高版本，但将其更改为支持 5.8 及更早版本是微不足道的。（将 更改`-E`为`-e`，更改`say`为，并在每行输出的末尾`print`添加一个。）`\n`

输出：

```
blue    3   2
red     0   0
green   1   1
yellow  0   0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T19:56:46.633

一个 awk(gawk) oneliner 可以让你免于 grep 难题：

```
 awk 'NR==FNR{n[$0];l[$0];next;}{for(w in n){ s=$0;t=gsub(w,"#",s); n[w]+=t;l[w]+=t>0?1:0;}}END{for(x in n)print x,n[x],l[x]}' words text 
```

稍微格式化一下代码：

```
awk 'NR==FNR{n[$0];l[$0];next;}
    {for(w in n){ s=$0;
        t=gsub(w,"#",s); 
        n[w]+=t;l[w]+=t>0?1:0;}
    }END{for(x in n)print x,n[x],l[x]}' words text 
```

用你的例子测试：

```
kent$  awk 'NR==FNR{n[$0];l[$0];next;}{for(w in n){ s=$0;t=gsub(w,"#",s); n[w]+=t;l[w]+=t>0?1:0;}}END{for(x in n)print x,n[x],l[x]}' words text
yellow  0 0
red  0 0
green 1 1
blue 3 2 
```

如果要格式化输出，可以将 awk 输出通过管道传输到`column -t`

所以它看起来像：

```
yellow  0  0
red     0  0
green   1  1
blue    3  2 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-27T12:37:31.517

```
awk '
NR==FNR { words[$0]; next }
{
   for (word in words) {
      count = gsub(word,word)
      if (count) {
         counts[word] += count
         lines[word]++
      }
   }
}
END { for (word in words) printf "%s %d %d\n", word, counts[word], lines[word] }
' file 
```

# jquery - 如何在jQuery插件上返回自我？

> ID：14536055
> 
> 赞同：0
> 
> 时间：2013-01-26T10:30:32.383
> 
> 标签：jquery, jquery-plugins

我在 HTML 中有这段代码

```
<div class="details-content">
    <p class="biography user_fillable inline_editable" data-id="Biography"></p>
</div> 
```

当用户单击该段落时，它将变为一个文本字段。它是通过插件完成的。

插件代码：

```
(function ($) {
    $.fn.inlineeditor = function (callback) {

        var $txt = $('<input type="text" class="inline-editor-text"/>');

        return this.each(function () {
            var $this = $(this);

            $this.on('click', function () {
                var _txt = $txt.clone().val($this.text()).insertAfter(this);

                $this.hide();
                _txt.select()
                    .on('keydown', function (e) {
                        if (e.which == '13') {
                            $this.text(_txt.val()).show();
                            _txt.remove();
                            if (callback) {
                                callback($this.text());
                            }
                        } else if (e.which == '27') {
                            $this.show();
                            _txt.remove();
                            if (callback) {
                                callback(null);
                            }
                        }
                    }).on('blur', function (e) {
                        $this.show();
                        _txt.remove();
                        if (callback) {
                            callback(null);
                        }
                    });
            });
        });

    };
})(jQuery); 
```

用法：

```
<script>
    $(function(){

    var $inlineeditable = $('.inline_editable');

        $inlineeditable.inlineeditor(function (data) {
            var $this = $(this), id = $this.data('id');
            if (data != null) {
                alert(data);
                alert(id);
            }
        });

    });
</script> 
```

我可以获取数据，但不能获取“this”对象。我想得到' `this`'对象，相当于：

```
<p class="biography user_fillable inline_editable" data-id="Biography"></p> 
```

我正在做`return this.each(function () {`，但它似乎不起作用。

[这是示例](http://jsfiddle.net/MyNameIsCode/KCuH5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T10:44:39.983

您需要`this`在调用回调时显式设置上下文。目前，由于您没有将函数作为对象的方法调用，因此`this`上下文默认为全局`window`对象。因此，`$(this)`在您的回调中变得等同于`$(window)`- 不完全是您需要的。

[`Function.call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)您应该使用或[`Function.apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)接受`this`上下文作为第一个参数来调用回调，如下所示：

```
callback.call($this[0], $this.text());
callback.call($this[0], null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T10:44:39.420

很难解释你的问题；我假设您的问题不在于返回（现在您正在返回已调用插件的 jQuery 对象，这是一个很好的方法，因为它使您的插件调用可链接），而是`this`在传递给您的插件的回调中设置您的插件正在处理的 DOM 元素。这是通过使用`callback.call(<value for this>, <first param>, <second param>, ...)`代替来完成的`callback(<first param>, <second param>, ...)`。

# java - 如何添加双精度值和双精度列表元素？

> ID：14536061
> 
> 赞同：2
> 
> 时间：2013-01-26T10:30:52.743
> 
> 标签：java

我尝试了一个代码

```
double temp=0;
List list=new ArrayList();
list.add(1.1);
temp+=list.get(0); //error occurs here 
```

发生的错误如下

> 二元运算符“+”的错误操作数类型
> 
> 第一种：双
> 
> 第二种：对象

我应该怎么做才能在列表中添加 temp 值和 double 值？

我喜欢的编程语言是 Java。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T10:38:50.647

您需要使用原始包装类 Double。

```
List<Double> list=new ArrayList<Double>();
list.add(new Double(1.1)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T10:47:31.793

在. _ `Generic type`_ `Collections`_ `List`_`ArrayList``Java 1.5+`

当您使用`raw type`List 时，该方法`List.get(0)`将始终为您提供`Object`类型，您需要进行一些转换才能使其工作。

因此，您可以`Double`在当前代码中添加强制转换，这绝对是个坏主意。

或者，您应该使用`generic`如下的 List 版本：-

```
List<Double> list=new ArrayList<Double>();
list.add(1.1); 
```

注意，值为`1.1`a `double`，仍然可以直接添加，无需转换为`Double`。这是因为`Java`被调用的特性`Auto Boxing`。

在 Java 中，当您将`double`值存储在`Double`引用中时，该`double`值会自动装箱到`Double`. 而在相反的情况下，它被称为`Unboxing`，即 from `Double`to `double`。

这就是为什么，当你这样做时： -

```
temp+=list.get(0); 
```

的值`list.get(0)`是类型`Double`。并且由于您正在执行`double`原始类型的操作，因此该 vlaue 自动`boxed`为`double`，并执行加法操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T10:36:18.290

当您未定义通用类型时。该列表将返回一个对象。这意味着您需要强制转换它：

```
temp+=(Double) list.get(0); 
```

虽然直接在列表的声明中定义泛型类型更容易：

```
List<Double> list=new ArrayList(); 
```

附带说明：

您需要使用`Double`而不是`double`为此工作。因为`double`是原始类型`Double`而是列表可以存储的java对象

# ios - iOS 5 AppStore 详情页背景颜色

> ID：14536063
> 
> 赞同：0
> 
> 时间：2013-01-26T10:31:11.923
> 
> 标签：ios, background, app-store, uicolor

iOS 5- AppStore 的 AppStore 详细信息页面的 UIColor 是什么（http://elec.widgetspad.com/uploadfiles/elecwidgetspadcom-1348171101/apple-approving-ios-5-app-updates-already_1.png）？有人有想法吗？

如何创建这样的 UIColor，其中 2 种颜色相互重叠？

谢谢

# java - 删除空格和前导逗号

> ID：14536065
> 
> 赞同：0
> 
> 时间：2013-01-26T10:31:17.437
> 
> 标签：java

我想知道如何删除数组中的前导空格和空字符串。所以我希望结果是：`line 1,line 2,line3 line4,line5`

```
String string="line 1, line 2, , ,   line3 line4,        line 5";
        ArrayList<String> sample=new ArrayList<String>();
        sample.add(string);
        ArrayList<String> result=new ArrayList<String>();
        for (String str : sample) {
            if(str!=null && !str.isEmpty()){`enter code here`
                result.add(str.trim());
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T10:41:00.053

为此，您可以使用[分词](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html)器。通过另外[修剪](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#trim%28%29)你的字符串，你只会得到非空的部分：

```
StringTokenizer st = new StringTokenizer("line 1, line 2, , ,   line3 line4,        line 5", ",");
ArrayList<String> result = new ArrayList<>();
while (st.hasMoreTokens()) {
    String token = st.nextToken().trim();
    if (!token.isEmpty()) {
        result.add(token);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T10:47:27.210

这应该这样做：

```
String[] array = 
  "line 1, line 2, , ,   line3 line4,        line 5".trim().split("\\s*,[,\\s]*"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T10:47:48.010

这是一个简单的正则表达式。您想删除逗号之前的所有空格，以及之后的所有空格和逗号。这给了你这个：

```
regex.Pattern(" *,[ ,]*").compile().matcher(string).replaceAll(","); 
```

当然，您可能希望在代码中预编译该模式，而不是每次都重新编译它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T10:51:58.970

尝试

```
 Scanner sc = new Scanner(string);
    sc.useDelimiter(",\\s*");
    while(sc.hasNext()) {
        String next = sc.next();
        if (!next.isEmpty()) {
              ...
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T10:37:37.293

我会以这种方式使用 2 个正则表达式：

首先，删除逗号之间的空格：将“,[ ]+”替换为“,,”。示例：“a, , , ,b” => “a,,,,b”。

然后，删除重复的逗号：将“，”替换为“，”。示例：“a,,,,b” => “a,b”。

最后使用`split`方法（在String类中）用“，”分割字符串。遍历这个循环`trim()`对每个令牌做，你会得到它。

# c - 无法在 C 中使用 getchar 打破 while 循环

> ID：14536067
> 
> 赞同：-3
> 
> 时间：2013-01-26T10:31:27.343
> 
> 标签：c

我是新手，面临一个基本问题，无法使用 getchar 打破 while 循环。以下代码编译成功，但只显示“请输入名称”并继续从键盘输入输入的字符，但不会在输入新行时中断特点 ：-（

```
#include<stdio.h>

typedef struct employee
{
    char name[20];
    int age;
    char country[20];
}emp;

void getinfo(char *str, const char *param)
{
    int i;
    char ch;
    if (strcmp(param,"NAME" ) == 0)
    {
        printf("\nPlease enter NAME \n");
    }
    else if(strcmp(param, "COUNTRY") ==0)
    {
        printf("\nPlease enter COUNTRY \n");
    }
    while((ch==getchar())!= '\n')
    {
        str[i] = ch;
        i++;
    }
    str[i]= '\0';
}

int getage(int *age)
{
    printf("\n Please enter Age \n");
    scanf("%d",age);
}

int main(void)
{
    emp e1;
    getinfo(e1.name, "NAME");
    getinfo(e1.country, "COUNTRY");
    getage(&e1.age);
} 
```

请提供帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T10:32:52.580

这

```
while((ch==getchar())!= '\n') 
```

应该读

```
while((ch=getchar())!= '\n')
         ^ 
```

否则，您将*比较*`ch`to的（未初始化的）值`getchar()`，而不是分配`getchar()`to的结果`ch`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T10:33:49.490

```
while((ch==getchar())!= '\n') 
```

该行当前是未定义的操作，因为`ch`尚未分配任何内容。让我们假设`ch==getchar()`是假的，`false != '\n'`是真的，因为任何非零都是真的，并且 '\n' 大于零。

我假设您想将`==`in更改`ch==getchar()`为单个`=`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T10:45:50.783

你已经输入了`while((ch==getchar())!='\n')`
这个语句调用`getchar()`并比较垃圾值，并且 通常`ch`比较它，所以while循环继续执行，即使没有分配任何东西 所以，把它改成`'\n'`
`true``ch`
`while((ch=getchar())!='\n')`

# javascript - HTML/JS 良好实践：添加太多 id 好不好？

> ID：14536070
> 
> 赞同：3
> 
> 时间：2013-01-26T10:31:39.107
> 
> 标签：javascript, jquery, html, dom

我有一个 HTML 页面，我想在其中将元素添加到特定列表中，如下所示：

```
<div id="list-of-divs">
<div id="name-specific-id">
// content
</div>

<div id="another-id">
//content
</div>
.
.
.
<div id="yet-another-id">
</div> 
```

现在我想将 new `div`s 添加到该列表中，例如：

```
<div id="new-option-panel">
<input id="first-textbox-id" type="text">
<input id="second-textbox-id" type=text">
<button>Add new option</button> 
```

当然，添加是使用 jQuery 代码完成的。

我的问题是：在 HTML 代码中添加*许多*这样`id`的 s 并在我的 jQuery 代码中依赖它们是一种好习惯，还是对 HTML 和 jQuery 都不好，我应该在我的 jQuery 代码中找到其他方法（取决于例如，关于 DOM 遍历）？

仅举例说明我的意思：会增加许多`id`缓慢的 Javascript 执行吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T10:36:38.313

Id 的查询速度更快，但维护起来非常繁琐，所以我会接受“性能打击”，并通过仅在必要时使用类和 id 来使我的代码更加明显。在您的示例中，我可能会将 id 保留在 div 上，但输入元素不需要一个，一个简单的类将适用于 jQuery 和 CSS，甚至根本没有类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T10:44:05.273

id 选择器后跟 Tag 选择器是最好的选择器，因为它们直接映射到本机`.getElementById()`和`.getElementByTag()`方法

我建议您在遍历 DOM 时始终从最近的父 ID 下降。与大多数语言一样，您必须为特定应用程序考虑可读性/性能权衡。

查看这些性能指南以获取更多见解

[http://www.artzstudio.com/2009/04/jquery-performance-rules/](http://www.artzstudio.com/2009/04/jquery-performance-rules/)

# java - 等待php脚本然后下载

> ID：14536072
> 
> 赞同：0
> 
> 时间：2013-01-26T10:31:52.663
> 
> 标签：java, android

我有一个 php 脚本，如果它不存在，它会创建一个文件。php 脚本在创建文件后发送文件。现在我的问题是我的下载类在 php 文件创建新文件时无法下载它（我不知道确切原因）。但是如果 php 脚本发送一个缓存文件，下载就可以了。有没有办法让android等到php脚本执行完毕？

```
import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.URL;
import java.net.URLConnection;

import org.json.JSONObject;

import android.os.AsyncTask;
import android.os.Environment;
import android.os.Looper;
import android.provider.ContactsContract.Directory;
import android.util.Log;

public class DownloadMP3 extends AsyncTask<String, Integer, String> {
    private OnTaskRunning listener;
    public DownloadMP3(OnTaskRunning listener){
        this.listener=listener;
    }

    @Override
    protected String doInBackground(String... url) {
        int count;
        try {
            Log.d("Info", "create file");
            Download down = new Download();
            JSONObject jObject = new JSONObject(down.JSON(conf.d + "convert.php?v=" + url[0]));
            Log.d("Info","json file: " + jObject.get("fle"));

            URL u = new URL(conf.d + "convert.php?v=" + jObject.get("fle"));
            Log.d("Info", "dl u");
            URLConnection conexion = u.openConnection();
            Log.d("Info", "dl op");
            conexion.connect();
            Log.d("Info", "dl co");
            File directory = new File(Environment.getExternalStorageDirectory() + "/Music/VBT Splash/");
            Log.d("Info", "dl di");
            if (!directory.exists() || !directory.isDirectory()){
                directory.mkdirs();
            }

            InputStream input = new BufferedInputStream(u.openStream());

            String filename = conexion.getHeaderField("Content-Disposition");

            String file = filename.substring(filename.indexOf("\"")+1, filename.lastIndexOf("\""));

            OutputStream output = new FileOutputStream(Environment.getExternalStorageDirectory() + "/Music/VBT Splash/" + file);

            int lenghtOfFile = conexion.getContentLength();
            byte data[] = new byte[4096];

            long total = 0;

            listener.onTaskStarted();
            while ((count = input.read(data)) != -1) {
                total += count;
                output.write(data, 0, count);
                publishProgress((int) (total * 100 / lenghtOfFile));
            }
            Log.d("Info", "dl done");
            listener.onTaskDone();
            output.flush();
            output.close();
            input.close();
        } catch (Exception e) {
        }
        return null;
    }

    protected void onProgressUpdate(Integer... progress) {
        listener.onTaskProgress(progress[0]);
    }

    protected void onPostExecute(int result) {

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T10:37:11.740

您必须将重定向传达给您的客户端代码。如果您只是点击完整的文件路径 url ，但它不存在，则不会下载。因此，首先从脚本中获取下载 url。（如果它不存在，将创建一个新的）然后，下载该 url。这总共向服务器发出 2 个请求。

# android - 如何在 Android 的任何项目中实现谷歌跟踪器？

> ID：14536076
> 
> 赞同：2
> 
> 时间：2013-01-26T10:32:23.800
> 
> 标签：android

我从下面的链接下载项目效果很好，但我如何在我的项目中实施？

Svn 链接：- [http://analytics-api-samples.googlecode.com/svn/trunk/](http://analytics-api-samples.googlecode.com/svn/trunk/)

任何机构帮助我实施谷歌跟踪器完整示例？

谢谢。

# c - 尝试制作 tchar 时从非宽字符串初始化的 int-array

> ID：14536078
> 
> 赞同：1
> 
> 时间：2013-01-26T10:32:32.800
> 
> 标签：c, tchar

我正在尝试像这样在这里创建一个 tchar 数组： TCHAR c_wText[100] = _T("string here");

但是在编译时我收到一条错误消息：int-array initialized from non-wide string

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-04T09:53:34.027

我正在总结@WhozCraig 所说的话：

对于 unicode 构建，您需要同时定义 UNICODE 和 _UNICODE

然后使用 TCHAR 和 _T("your string")

# ember.js - Ember 数据：有没有办法更改记录的存储？

> ID：14536079
> 
> 赞同：0
> 
> 时间：2013-01-26T10:32:39.747
> 
> 标签：ember.js, ember-data

我正在使用 Emberjs 开发一个移动项目。

我已经为一个足够大的数据集创建了一个自定义存储，以至于 ember-data 存储在没有很长的加载时间的情况下无法直接处理。

这个自定义存储所做的是创建一些 Ember 数据存储并通过哈希管理它们。

由于构成散列的参数发生了变化，有一次我需要将记录从一个存储移动到另一个存储。

我尝试进行序列化+重新实例化，`Store.createRecord(Model, oldRecord.toJSON())`但我失去了对记录的引用，系统的其他部分依赖于此。

然后我摆脱了旧记录`oldRecord.get('stateManager').goToState('deleted.saved')`：

如果不是因为这个参考问题，我可以摆脱这个`newRecord.get('stateManager').goToState('updated')`让记录进入脏状态（我需要它）。

我也试过疯狂`record.set('store', newStore)`

我愿意深入研究 DS.Store 的内部；找到了这些与商店内部细节的良好链接，但我不知道最好的方法是什么。

[http://nragaz.com/post/41076138457/is-ember-data-just-unfinished-or-fundamentally-broken](http://nragaz.com/post/41076138457/is-ember-data-just-unfinished-or-fundamentally-broken) [http://www.kaspertidemann.com/where-are-the-records-stored-in-ember -数据/](http://www.kaspertidemann.com/where-are-the-records-stored-in-ember-data/)

有没有一种简单的方法可以在不丢失引用的情况下切换记录的存储？

# kendo-ui - 剑道网格分组

> ID：14536083
> 
> 赞同：1
> 
> 时间：2013-01-26T10:32:58.230
> 
> 标签：kendo-ui, kendo-grid

我阅读[了这个主题](http://www.kendoui.com/forums/ui/grid/can-t-drag-column-headers-to-group-by.aspx)并使用了 kendo web 的开源版本，我当前的版本是 Kendo UI Web v2012.3.1114。我的问题存在于上面的链接中，我无法解决。

我的部分脚本在这里：

```
function load() {                
            var grid = $("#grid").data("kendoGrid");

            if (grid) {
                //destroy the previous Grid instance
                grid.destroy();
                //clean up the html
                grid.wrapper.html("");
            }
            var crudServiceBaseUrl = "WebForm.aspx",
                //datasource = null;
                dataSource = new kendo.data.DataSource({
                transport: {
                    read: {
                        url: crudServiceBaseUrl + "?q=load&sql=" + $("#tbSQL").val(),
                        dataType: "jsonp"
                    },
                    update: {
                        url: crudServiceBaseUrl + "?q=update&sql=" + $("#tbSQL").val(),
                        dataType: "jsonp"
                    },
                    destroy: {
                        url: crudServiceBaseUrl + "?q=destroy&sql=" + $("#tbSQL").val(),
                        dataType: "jsonp"
                    },
                    create: {
                        url: crudServiceBaseUrl + "?q=create&sql=" + $("#tbSQL").val(),
                        dataType: "jsonp"
                    },
                    parameterMap: function (options, operation) {
                        if (operation !== "read" && options.models) {
                            return { models: kendo.stringify(options.models) };
                        }
                    }
                },
                batch: true,
                pageSize: 20,
                schema: getmodel()
            $("#grid").kendoGrid({
                dataSource: dataSource,
                navigatable: true,
                //pageable: true,
                selectable: true,
                //groupable: true,
                sortable: true,
                pageable: {
                    refresh: true,
                    pageSizes: true
                },
                height: 500,
                toolbar: ["create", "save", "cancel"],
                columns: getColumns(),
                editable: true
            });
        } 
```

一切都很好，但只有在加载页面后，我才能按标题分组一次。

![例子](../Images/7947e973e64944f50106887f9b21c4fe.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:19:19.817

似乎这种行为在最新版本的 KendoUI 2012 Q3 SP1 (v.2012.3.1315) 中得到了改进，其中分组按预期工作。为方便起见，我创建了这个[示例](http://tinyurl.com/a3ay5qk)。

# consolidation - 使用批处理脚本进行数据整合

> ID：14536086
> 
> 赞同：0
> 
> 时间：2013-01-26T10:33:06.397
> 
> 标签：consolidation

我在文本文件中有以下字符串：

```
Hostname: ABCD
Manufacturer: LENOVO
Model: 0585AL7
Domain: XYZ.COM
Is Part of Domain: True
Current Logged In User: IN\USER
Number of Processors: 1
Operating System: Microsoft Windows 7 Enterprise 
Name: Microsoft Windows 7 Enterprise |C:\Windows|\Device\Harddisk0\Partition1
Organization: XYZ
RegisteredUser: XYZ
SerialNumber: 00392-918-5000002-85350
WindowsDirectory: C:\Windows
Version: 6.1.7600
Original Install Date: 20110319025551.000000+330 
```

我正在使用以下命令来解析内容。

```
FINDSTR /B /S /I "Operating System" *.txt >> OsMatch.lst
FINDSTR /B /S /I "Version" *.txt >> OsMatch.lst
FINDSTR /B /S /I "Manufacturer" *.txt >> OsMatch.lst
FINDSTR /B /S /I "Domain" *.txt >> OsMatch.lst
FINDSTR /B /S /I /C:"Is Part of Domain" *.txt >> OsMatch.lst
FINDSTR /B /S /I /C:"Current Logged In User" *.txt >> OsMatch.lst
FINDSTR /B /S /I /C:"Number of Processors" *.txt >> OsMatch.lst
FINDSTR /B /S /I "RegisteredUser" *.txt >> OsMatch.lst
FINDSTR /B /S /I "Organization" *.txt >> OsMatch.lst
FINDSTR /B /S /I "SerialNumber" *.txt >> OsMatch.lst
FINDSTR /B /S /I "WindowsDirectory" *.txt >> OsMatch.lst
FINDSTR /B /S /I /C:"Original Install Date" *.txt >> OsMatch.lst

ECHO Hostname,Operating System, Version, Manufacturer, Domain, IsPartofDomain, CurrentLoggedInUser, No of Processor, 

RegisteredUser, Organization, Serial Number, WindowsDirectory, InstallDate, Location > Desktop-OS.csv

FOR /f "tokens=1,2* delims=:" %%a in (OsMatch.lst) do ( set new1=%%a 
SET new2=%%c
SET new1=!new1:~0,-4!

FOR /f "tokens=1,* delims=\" %%a in ('echo !new1!') do ( 
SET new5=%%a
SET new6=%%b

FOR /f "tokens=* delims= " %%a in ('echo !new2!') do ( 
SET new4=%%a
)
)

IF {!new6!}=={}  (echo !new5!,!new4!,NA  >> Desktop-OS.csv
) else ( echo !new6!,!new4!,!new5!  >> Desktop-OS.csv)
) 
```

输出来自 excel 文件，但在每一行中，我希望在每一列下输出如下

```
Hostname    Operating System                     Version 
ABCD        Microsoft Windows 7 Enterprise           6.1.7600 
```

同样，所有 TABS
“制造商域 IsPartofDomain CurrentLoggedInUser No of Processor RegisteredUser Organization Serial Number WindowsDirectory InstallDate Location”。

提前致谢.. ：）

# php - 全新安装中的 Drupal 7.19 中的干净 URL 测试失败

> ID：14536095
> 
> 赞同：0
> 
> 时间：2013-01-26T10:33:56.773
> 
> 标签：php, .htaccess, drupal, drupal-7

我刚刚安装了 Drupal 7.19 并检查了配置，发现 clean url 测试失败了。

我`.htaccess`在 wamp 的 www 文件夹中有我网站的文件夹中的文件。

它显示为：

> 干净的 URL 测试失败。

我应该怎么做才能修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:30:16.697

您必须启用 Apache 的`mod_rewrite`模块。必须启用明确的 URL 才能工作。

# ruby - RBENV 为 ruby -build 解析重复的目录

> ID：14536099
> 
> 赞同：0
> 
> 时间：2013-01-26T10:34:30.773
> 
> 标签：ruby, rbenv

自从安装 rbenv 以来，我最近首次更新了我的 ruby​​ 版本。在我的开发机器上，我发现我需要使用 bundle install 为每个应用程序重新安装 bundler 和所有 gem。

现在，当我登录到生产服务器时，我注意到我的主文件夹 ~/ruby-build 和 .rbenv/plugins 中有一个 ruby​​-build 目录。如何找出我的服务器正在使用哪一个，以及运行 git pull 并安装新版本的 ruby​​ 的哪一个？我可以删除 ~/ruby-build 中的目录并处理另一个目录吗？进行一些探索后，我发现我的服务器上的 usr/local/bin 中也有一个 ruby​​-build，但这不是一个目录。

我完全被这一切弄糊涂了。Rbenv 位于我的主目录中，而不是服务器上的任何系统目录中。这有关系吗？即使我没有登录，它如何在服务器上仍然工作？

从服务器上的主目录运行 rbenv 版本会报告“当前未安装程序 'rbenv'”，但会列出我的开发笔记本电脑上安装的版本。

我在服务器上的 .bashrc 在顶部包含此条目

```
if [ -d "${RBENV_ROOT}" ]; then
  export PATH="${RBENV_ROOT}/bin:${PATH}"
  eval "$(rbenv init -)"
fi 
```

我的开发笔记本电脑上的 .bashrc 在底部包含此条目。

```
export PATH="$HOME/.rbenv/bin:$PATH"
eval "$(rbenv init -)" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:38:20.133

由于您将其包含在 . 中`.bashrc`，我想如果您要`echo $RBENV_ROOT`在终端中，您会发现哪个 rbenv 目录是正在使用的目录。

虽然，您说该`rbenv`命令不起作用，所以可能`$RBENV_ROOT`没有定义。在这种情况下，你可以简单地`RBENV_ROOT=$HOME/.rbenv/`在那个条件之前做一些事情——或者你喜欢的任何事情——来设置它应该使用的 rbenv 目录。

当您这样做时，要定义`$RBENV_ROOT`，重新登录以使更改生效，或使用 .re-source 重新获取`.bashrc`文件`source ~/.bashrc`。

# android - Sherlock 的操作栏中不显示菜单项？

> ID：14536105
> 
> 赞同：2
> 
> 时间：2013-01-26T10:35:02.920
> 
> 标签：android, android-actionbar, actionbarsherlock

我从动作栏 Sherlock 示例创建动作菜单，如下所示

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    //Used to put dark icons on light action bar

    //Create the search view
    SearchView searchView = new SearchView(getSupportActionBar().getThemedContext());
    searchView.setQueryHint("Search for countries…");
    menu.add("Save")
    .setIcon(R.drawable.abs__ic_menu_share_holo_light)
    .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
    menu.add("Search")
        .setIcon( R.drawable.abs__ic_search)
        .setActionView(searchView)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);

    return true;
} 
```

我的应用程序主题主题是：

```
<style name="Theme.actor" parent="@style/Theme.Sherlock.Light">

</style> 
```

但是菜单显示在活动页面的按钮而不是在操作栏中？有什么建议吗？谢谢

解决方案：我改变

```
sherlock.setContentView(R.layout.main_switch); 
```

至

```
setContentView(R.layout.main_switch); 
```

它的作品完美无缺。

# sqlite - SQlite 增量字段且不存在

> ID：14536106
> 
> 赞同：1
> 
> 时间：2013-01-26T10:35:06.347
> 
> 标签：sqlite

我的 SQLite 代码适用于此，增加我的计数，并将 foo 添加到我的数据库中：

```
INSERT or REPLACE into masterWords  (words, count) 
values ("foo", coalesce ((select count + 1 
from masterWords where  words = "foo" ), 1)) 
```

但是当我添加不存在时，计数不再增加。

```
INSERT or REPLACE into masterWords  (words, count) 
values ("foo", coalesce ((select count + 1 
from masterWords where  words = "foo" ), 1)  
AND  NOT EXISTS ( SELECT DISTINCT mWord 
from mWords where mWords.mWord = "foo" )) 
```

表：masterWords 包含列单词，count 表：mWords 包含列 mWord

我被难住了，有什么想法可以让我的计数再次增加吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T10:41:36.333

```
INSERT or REPLACE into masterWords  (words, count) 
values ("foo", coalesce ((select count + 1 
from masterWords where  words = "foo" ), 1  
AND  NOT EXISTS ( SELECT DISTINCT mWord 
from mWords where mWords.mWord = "foo" ))) 
```

只需要一个移动支架。只要没有异议，我认为我会将问题和解决方案留给某人可能有用。

# ruby-on-rails - Mac Mail 不会显示从 Rails 发送的带有内联附件的邮件

> ID：14536107
> 
> 赞同：0
> 
> 时间：2013-01-26T10:35:17.730
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, actionmailer, email-attachments

Gmail 显示邮件信息就好了。但 Mac Mail 不会呈现电子邮件内容。它只会显示内联附件。

我现在正在使用 Rails 3.2.11。任何人都成功地创建了包含内联附件的电子邮件并在 Mac Mail 上正常工作？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:21:41.040

对于任何人都会遇到这种情况，我可以确认默认情况下，Rails ActionMailer 可以完美地发送带有内联附件的电子邮件，这些附件可以在 Mac Mail 中运行。但是一些宝石可能会干扰这一点。我经历过一次`premailer-rails3`（我最终创建了自己的分叉，摆脱了干扰）。

# windows - SystemInfo 批处理文件问题

> ID：14536110
> 
> 赞同：0
> 
> 时间：2013-01-26T10:35:56.677
> 
> 标签：windows

我正在尝试将系统信息放入 csv 文件中。我写了以下批处理文件：

```
@echo off
systeminfo /fo csv > D:\mySystemInfo.csv 
```

批处理文件：

1.  创建一个名为“mySystemInfo.csv”的输出文件

但是文件完全是空白的，命令提示符也是空白的。只有光标一直闪烁。

我正在使用 Windows 7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-17T16:56:25.773

您应该在命令重定向运算符之后直接编写路径，例如**>**

```
@echo off
systeminfo /fo csv>D:\mySystemInfo.csv 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-16T16:56:31.417

You dont need to have the /fo csv just use

```
systeminfo >>D:\MySystemInfo.csv 
```

Itll take the output of the command "systeminfo" and place into the file MySystemInfo.csv on the D drive [assuming that you have a D:\ drive to store it in.]

# c# - ASP .NET：CustomValidator 不启动其 ServerValidate 方法

> ID：14536119
> 
> 赞同：0
> 
> 时间：2013-01-26T10:37:26.810
> 
> 标签：c#, asp.net, .net

aspx 代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="MyWebForm.aspx.cs" Inherits="MyWebApplication.MyWebForm" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body style="height: 334px">
    <form id="form1" runat="server">
    <div style="height: 338px">

        <asp:TextBox ID="MyTextBox" runat="server" AutoPostBack="True"></asp:TextBox>
        <br />
        <asp:CustomValidator ID="MyCustomValidator" runat="server" 
            ControlToValidate="MyTextBox" ErrorMessage="My error message" 
            onservervalidate="Foo2"></asp:CustomValidator>

    </div>
    </form>
</body>
</html> 
```

C#代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace MyWebApplication
{
    public partial class MyWebForm : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        bool Foo1(string bar)
        {
            if (bar == "bar")
                return true;
            return false;
        }

        protected void Foo2(object source, ServerValidateEventArgs args)
        {
            args.IsValid = this.Foo1(this.MyTextBox.Text);
        } // breakpoint
    }
} 
```

我在 Foo2 函数（注释）中设置了断点，但调试器没有访问它。我试着写不同的文本，不写任何东西，写“栏”，然后按回车和制表符，但它仍然不起作用。我的意思是文本更改操作。是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T10:39:22.520

没有提交按钮。您需要添加一个按钮来提交表单，然后触发页面验证。

```
<asp:Button runat="server" id="myButton" Text="Submit" /> 
```

# wpf - Viewbox 中的实际宽度和高度

> ID：14536121
> 
> 赞同：3
> 
> 时间：2013-01-26T10:37:39.180
> 
> 标签：wpf, silverlight

我有一个`TextBlock`嵌套在 Viewbox 中。

```
<Viewbox x:Name="ContentPanel">
    <TextBlock x:Name="CharacterBlock" TextAlignment="Center" Text="愛" />
</Viewbox> 
```

我怎么知道的高度和宽度`TextBlock`？`RenderSize`并且`ActualWidth/Height`全部返回其原始大小，而不是由 Viewbox 缩放的大小。

# hash - 校验和：CRC 还是哈希？

> ID：14536130
> 
> 赞同：10
> 
> 时间：2013-01-26T10:39:13.137
> 
> 标签：hash, checksum, crc32, error-detection

除了性能和安全考虑之外，假设一个具有完美雪崩效应的散列函数，我应该使用它来校验数据块：CRC32 还是截断为 N 字节的散列？即哪个将有更小的概率错过错误？具体来说：

1.  CRC32 与 4 字节哈希
2.  CRC32 与 8 字节哈希
3.  CRC64 与 8 字节哈希

数据块将通过网络传输并重复存储在磁盘上。块的大小可以是 1KB 到 1GB。

据我了解，CRC32 可以以 100% 的可靠性检测多达 32 位翻转，但之后它的可靠性接近`1-2^(-32)`并且对于某些模式来说要差得多。完美的 4 字节散列可靠性始终为`1-2^(-32)`，所以请看图。

8 字节散列应该具有更好的整体可靠性（`2^(-64)`错过错误的机会），那么它应该优于 CRC32 吗？那么CRC64呢？

我想答案取决于此类操作中可能出现的错误类型。我们是否可能会看到稀疏的 1 位翻转或大量块损坏？此外，鉴于大多数存储和网络硬件都实现了某种 CRC，不应该已经处理意外的位翻转吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-26T17:06:01.983

只有您可以说 1-2 ^(-32)是否适合您的应用程序。*一个好的散列函数的 CRC -n*位和*n*位之间的错误检测性能将非常接近，因此选择更快的那个。那很可能是 CRC *-n*。

*更新：*

上面的“那很可能是 CRC *-n* ”只是有点可能。如果使用非常高性能的散列函数，则不太可能。特别是，[CityHash](https://code.google.com/p/cityhash/)似乎几乎与使用英特尔`crc32`硬件指令计算的 CRC-32 一样快！`crc32`我在一个 434 MB 的文件上测试了三个 CityHash 例程和 Intel指令。`crc32`指令版本（计算 CRC-32C）占用了 24 毫秒的 CPU 时间。CityHash64 用了 55 毫秒，CityHash128 用了 60 毫秒，CityHashCrc128 用了 50 毫秒。CityHashCrc128 使用相同的硬件指令，但它不计算 CRC。

为了快速进行 CRC-32C 计算，我不得不`crc32`在三个独立的缓冲区上使用三个指令，以便在一个内核中并行使用三个算术逻辑单元，然后在汇编程序中编写内部循环. CityHash 非常快。如果您没有该`crc32`指令，那么您将很难计算出与 CityHash64 或 CityHash128 一样快的 32 位 CRC。

但是请注意，需要为此目的修改 CityHash 函数，或者需要做出任意选择，以便为大型数据流上的 CityHash 值定义一致的含义。原因是这些函数没有设置为接受缓冲数据，即一次为函数提​​供一个块，并期望获得与将整个数据集一次性提供给函数相同的结果。CityHash 函数需要修改以更新中间状态。

另一种方法，以及我为快速和肮脏的测试所做的，是使用函数的种子版本，我将使用前一个缓冲区中的 CityHash 作为下一个缓冲区的种子。问题在于结果取决于缓冲区大小。如果您使用这种方法为 CityHash 提供不同大小的缓冲区，您将获得不同的哈希值。

*四年后的另一个更新*：

更快的是[xxhash 系列](https://github.com/Cyan4973/xxHash)。我现在建议将 CRC 用于非加密哈希。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:35:32.950

抛开“性能”问题；您可能要考虑使用 SHA-2 函数之一（例如 SHA-256）。

# android - ListView 中的某些项目无法点击

> ID：14536134
> 
> 赞同：1
> 
> 时间：2013-01-26T10:39:28.133
> 
> 标签：android, android-listview

我在具有自定义行布局（2 个 TextViews）的 LinearLayout 中使用 ListView。ListView 填充了来自原始文件的字符串。我也在`android:fastScrollEnabled="true"`ListView 上使用。我还实现了 onClickListener。在模拟器上测试应用程序，它工作正常，可以单击所有项目并且该项目的活动开始。但是在实际设备上进行测试时，10000 多个项目中只有大约 100 个可以点击。单击其他人时，没有任何反应。下面的代码有什么问题吗？

```
InputStream inputStream = getResources().openRawResource(R.raw.definitions);
    BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));
    String line;
    try 
    {
        HashMap<String, String> item;

        while ((line = reader.readLine()) != null) 
        {
            String[] strings = TextUtils.split(line, ";");
            if (strings.length <= 2) 
            {
                item = new HashMap<String, String>();
                item.put("line1", strings[0].trim());
                item.put("line2", strings[1].trim());
                list.add(item);
            }
        }

        mTextView.setText("");

        sa = new SimpleAdapter(this, list,
                R.layout.result,
                new String[] { "line1","line2" },
                new int[] {R.id.word, R.id.definition});

        mListView.setAdapter(sa);

        reader.close();

        mListView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) 
            {
                Intent wordIntent = new Intent(getApplicationContext(), GesloActivity.class);
                Uri data = Uri.withAppendedPath(PodajalecGesel.CONTENT_URI,
                                                String.valueOf(id+1));
                wordIntent.setData(data);
                startActivity(wordIntent);
            }
        });
    } 
    catch (IOException e) 
    {
        e.printStackTrace();
    } 
```

# wordpress - HomPage 中显示的 WordPress 缩略图大小不同

> ID：14536136
> 
> 赞同：0
> 
> 时间：2013-01-26T10:39:56.147
> 
> 标签：wordpress

仪表板 > 设置 > 媒体中的缩略图大小设置为 150x150 像素。但是主页中显示的缩略图是 128x128px。我实际上想将主页缩略图的大小减小到 100x100px。我曾尝试编辑媒体设置，但没有任何收获。这是我正在研究的主题[http://taimoorsultan.net76.net/](http://taimoorsultan.net76.net/) 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:25:45.937

编辑仪表板>设置>媒体后，您需要重新上传图像...

或者更容易/更好的是在设置该值后使用这个插件......

[http://wordpress.org/extend/plugins/regenerate-thumbnails/](http://wordpress.org/extend/plugins/regenerate-thumbnails/)

# git - Git .bash_profile 恢复默认

> ID：14536138
> 
> 赞同：2
> 
> 时间：2013-01-26T10:40:12.223
> 
> 标签：git, bash, mediatemple

我按照[本指南](http://wp.tutsplus.com/tutorials/hosting/wordpress-development-and-deployment-with-mamp-git-and-dropbox/) 进行操作，第 4 步说要做一些事情`.bash_profile`，添加一些工作树。我认为这是导致我的问题的原因，我将在下面进一步解释。

```
# GIT  
export GIT_DIR=~/repo.git  
export GIT_WORK_TREE=~/www 
```

我不太擅长 Git，但我通过了指南，它实际上有点工作。

我现在的问题是，我不想直接从本地 -> 服务器使用 Git 部署，而是本地 -> github/bitbucket/etc -> 服务器，因为我需要了解我实际在做什么，并且我发现提到的指南对于我实际需要的东西来说太先进了。

现在我正在使用[本指南](http://net.tutsplus.com/tutorials/other/the-perfect-workflow-with-git-github-and-ssh/)，一切都很好，除了从 github 克隆到我的服务器时，第 3 步结束。如果我尝试克隆我遇到的 repo：

```
fatal: working tree '/var/www/vhosts/soegaardcykler.dk/httpdocs' already exists. 
```

我已经删除了 中的所有内容`.bash_profile`，并尝试在第一次提到的指南中倒退，以真正理清我可能造成的每一点混乱。

如果我尝试在其中的新文件夹中创建一个新的 git 存储库

```
/var/www/vhosts/soegaardcykler.dk/httpdocs/ 
```

我遇到了：

```
fatal: Could not switch to '/var/www/vhosts/soegaardcykler.dk/sc-gh/': No such file or directory 
```

某处认为上述路径是使用的路径。我不知道在哪里撤消这个。

卸载 git 是我唯一的选择吗？如果是这样，我将如何去做？

额外信息：我在 mediatemple (dv) 上，使用 CentOS5 并在发生此问题时以域用户的 /bin/bash 身份登录。

如果我尝试以 root 身份导航到 soegaardcykler.dk 文件夹并创建一个新目录，或者进入一个旧目录，我可以执行 git init，而我不能作为 /bin/bash 域用户..与 root 和 /bin/bash 域用户在同一个目录中，在两者上执行“git status”会给出正常的 git 消息作为 root、初始提交等。作为域用户，我遇到了

```
fatal: Not a git repository: '/var/www/vhosts/soegaardcykler.dk/sc-gh/' 
```

（请注意，上面的目录甚至不存在！如果我尝试在一个用 root 初始化为 git 的新目录或另一个没有用 git 初始化的目录中执行它，这并不重要。

我希望你能理解我的问题。我自己很困惑，很难解释我的问题（因此我的谷歌搜索也很糟糕）。这就是为什么设计师永远不应该搞乱后端开发人员的东西。

在这一点上，我希望我可以在我的服务器上使用 git 重置所有内容并重新开始！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T15:11:18.610

在这个混乱点（我无法理解这里搞砸了什么）你必须有效地重新开始。

首先，不要以 root 身份做事。绝不。

除了浪费时间之外，卸载 git 不会有更好的效果。

在这种情况下，在询问时采取良好的反应：

*   不要在没有您输入的命令的情况下发出错误消息。
*   你说你修改了环境变量，你认为它搞砸了；你为什么不检查他们的价值并发布问题？这只是`echo $GIT_DIR`命令。

尝试以经典方式克隆您的 github 存储库（git-dir 和工作树没有不同的位置）并逐步执行操作。有问题时来这里。

# c - 如何在C中的二维数组中输入字符串？

> ID：14536139
> 
> 赞同：2
> 
> 时间：2013-01-26T10:40:15.420
> 
> 标签：c, string, multidimensional-array

如果我想在一个二维数组中输入一个输入，每个字符串在一行中，下一个在另一行中（即在按 Enter 时更改行）。我怎么能在 C 中做到这一点。C 似乎没有方便的“字符串”处理。我显然是指不使用 getchar() 这样做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T10:54:28.043

有下面提到的3种方法。

如果您知道最大字符串数和最大字符数，则可以使用以下方式声明二维字符数组。

```
char strs[MAX_NO_OF_STRS][MAX_NO_CHARS] = {0};
for (i = 0; i < MAX_NO_OF_STRS; i++)
{
    scanf("%s", strs[i]);
} 
```

如果您知道字符串的最大数量，并且您不想通过`MAX_NO_CHARS`为所有字符串分配内存来浪费内存。然后去寻找 char 指针数组。

```
char temp[MAX_NO_CHARS] = {0};
char *strs[MAX_NO_OF_STRS] = NULL;
for (i = 0; i < MAX_NO_OF_STRS; i++)
{
    scanf("%s", temp);
    strs[i] = strdup(temp);
} 
```

如果您知道运行时的最大字符串数意味着，您可以声明一个双指针`char`. 从用户那里获取字符串的数量，`n`然后动态分配内存。

```
char temp[MAX_NO_CHARS] = {0};
char **strs = NULL;
int n = 0;
scanf("%d", &n);
strs = malloc(sizeof(char*) * n);
for (i = 0; i < n; i++)
{
    scanf("%s", temp);
    strs[i] = strdup(temp);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T12:17:03.563

```
#include<stdio.h>

main()

{

char student_name[5][25];

    int i;

    for(i=0;i<5;i++)
    {
       printf("\nEnter a string %d: ",i+1);
       scanf(" %[^\n]",student_name[i]);
    }

} 
```

您可以通过在 scanf(" %[^\n]") 中放置空间来使用二维数组读取字符串，而无需使用 getchar()；在 %[^\n]!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T10:57:17.837

使用`malloc`和填充具有固定大小的缓冲区的指针数组的另一种方法是分配一个二维数组（在静态存储中或堆栈上）并填充它。KingsIndian 修改后的代码示例将如下所示：

```
#include <stdio.h>

int main()
{
 char str[2][256] = {{0}};
 int i = 0;

  for(i=0;i<2;i++)
  {
    scanf("%255s", &str[i][0]);
  }
  return 0;
} 
```

如果您希望获得的所有字符串都不超过某个大小，那么这种方法将使您无需自己处理释放内存的需要。但是，它的灵活性较低，这意味着您无法将单个缓冲区的大小与其包含的字符串相匹配。

**编辑**

添加到注释中的信息，以读取仅由换行符而不是任何空格终止的字符串：

```
scanf("%255[^\n]", str[i]); 
```

# ruby-on-rails - 使用多态关联迭代 Rails 模型类

> ID：14536156
> 
> 赞同：1
> 
> 时间：2013-01-26T10:42:20.303
> 
> 标签：ruby-on-rails, polymorphism, iteration

在应用程序中，有许多具有多态关联的模型定义如下：

```
has_many :mentions, :as => :mentionable, :dependent => :destroy 
```

在库类中，收集所有可提及的模型以供以后迭代。

```
mentionables = Model1.all + Model2.all + Model3.all ... 
```

这可行，但它只是静态的，这对于库代码来说是不可取的。底部语句会更直观，但它不起作用。

```
mentionables = Mentionable.all 
```

Rails 中是否有一个 API 可以迭代具有使用 ':as => ...' 指令定义的多态关系的模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:10:21.687

我认为这里有两个问题，我会尽力回答这两个问题。首先，您需要一种方法来列出 Rails 应用程序中的所有模型。[这个](https://stackoverflow.com/questions/516579/is-there-a-way-to-get-a-collection-of-all-the-models-in-your-rails-app)问题提供了一些方法，我更喜欢[这个答案](https://stackoverflow.com/a/10712838/403664)（通过[sj26](https://stackoverflow.com/users/158252/sj26)）。

```
# Really depends on how your classes are loaded, usually environment specific.
Rails.application.eager_load!
ActiveRecord::Base.descendants 
```

之后，您需要解析模型关联以确定它们是否分配了 :as @option，并提取关联的类名。这是假设您的关联是这样创建的：

```
class Mentionee < ActiveRecord::Base
  has_many :mentions, :as => :mentionable, :dependent => :destroy, :class_name => 'Mentionable'
end 
```

您可以使用[reflect_on_all_associations](http://api.rubyonrails.org/classes/ActiveRecord/Reflection/ClassMethods.html#method-i-reflect_on_all_associations)方法来做到这一点（可能有一种更 ruby​​-esque 的方式来写这个）：

```
Mentionee.reflect_on_all_associations.select {|a| a.options[:as] == :mentionable } 
```

这将返回 Mentionable 的多态类模型。要加入这些，您可以执行以下操作（未经测试！）：

```
Rails.application.eager_load!

mentionables = []

ActiveRecord::Base.descendants.each do |descendent|
  mentionables << descendent.reflect_on_all_associations.select{|a| a.options[:as] == :mentionable}
end

mentionables.each do |mentionable|
  # Do your work here
end 
```

# button - 代号一个键盘与菜单交互

> ID：14536158
> 
> 赞同：0
> 
> 时间：2013-01-26T10:42:56.573
> 
> 标签：button, menu, key, codenameone

我怎样才能弄清楚在非触摸设备中按下了哪些键盘键。如您所知，我想将每个项目的键映射到我的应用程序菜单`Button`。

观察按下的键并将其映射到菜单项（或在按下特定键时执行某些操作）是一种好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T08:30:37.997

在`Form`课程中，您有一个`addKeyListener`可用于跟踪按键的方法，您通过执行的操作方法收到的键代码是一个包含键的 ASCII 值的 int，例如`'a'/'A'`在 qwerty 设备或`'1'`键盘设备中。

您也可以派生形式并覆盖`keyReleased`，尽管这不是通用的。

# html - 如何在 chrome 中删除 div 内的 textarea 的额外空间？

> ID：14536162
> 
> 赞同：0
> 
> 时间：2013-01-26T10:43:48.383
> 
> 标签：html, css, google-chrome, textarea

我有一个文本区域，它在 Firefox 上与左侧完美对齐，但在 chrome 上，添加了一点空间。我不知道它为什么在那里，但我尝试了很多东西来摆脱空间，但就是做不到。 ![在此处输入图像描述](../Images/ef0794a2b25355e0733b0dd60d23f1b9.png) Chrome 将文本区域向右推 2 个像素。有谁知道我做错了什么，或者有没有办法在 chrome 上对齐它？

这是我的代码：

HTML：

```
<html>
<head>
<link rel="stylesheet" type="text/css" href="testdiv.css" />
</head>
<body>
<div class="outermostshell">    
    <div class="textareashell">
            <textarea name="status" rows="2" cols="30"></textarea>
    </div>
</div>
</body>
</html> 
```

CSS：

```
.outermostshell
    {
        position:fixed;
        width:300px;
        height:600px;
        background-color:red;

    }

.textareashell
    {
        position:relative;
        top:10px;
        padding:0;
        border:0;
        left:0px;
                margin:0px;
    } 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T10:52:21.277

某些浏览器（包括 Chrome）对表单元素有默认边距。只需将边距设置为零：

```
.textareashell textarea { margin: 0; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T10:48:44.837

我更喜欢使用 padding-left: 2px;

# php - 获取在 Laravel 3/4 中执行的查询

> ID：14536165
> 
> 赞同：187
> 
> 时间：2013-01-26T10:44:08.720
> 
> 标签：php, laravel, orm, eloquent, laravel-query-builder

如何使用 Laravel Query Builder 或 Eloquent ORM 在 Laravel 3/4 中检索原始执行的 SQL 查询？

例如，像这样：

```
DB::table('users')->where_status(1)->get(); 
```

或者：

```
(posts (id, user_id, ...))

User::find(1)->posts->get(); 
```

否则，至少我怎样才能将所有执行的查询保存到 laravel.log？

* * *

## 回答 #1

> 赞同：320
> 
> 时间：2013-01-26T10:50:13.623

# 拉拉维尔 4+

> **Laravel 5 用户注意事项：**您需要`DB::enableQueryLog()`在执行查询之前调用。在运行查询的行上方或中间件内部。

在 Laravel 4 及更高版本中，您必须调用`DB::getQueryLog()`以获取所有已运行的查询。

```
$queries = DB::getQueryLog();
$last_query = end($queries); 
```

或者，您可以下载分析器包。我推荐[barryvdh/laravel-debugbar](https://packagist.org/packages/barryvdh/laravel-debugbar)，它非常简洁。您可以阅读有关如何在其[存储库](https://github.com/barryvdh/laravel-debugbar)中安装的说明。

* * *

# 拉拉维尔 3

`Eloquent`在 Laravel 3 中，您可以从调用类`last_query`上的静态方法的模型中获取最后执行的查询`DB`。

```
DB::last_query(); 
```

但是，这需要您启用 中的`profiler`选项`application/config/database.php`。或者，正如@dualed 所提到的，您可以启用该`profiler`选项，`application/config/application.php`或者调用`DB::profile()`以获取在当前请求中运行的所有查询及其执行时间。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-01-26T10:45:32.483

您可以通过设置启用 Laravel 3 中的“ *Profiler ”*

```
'profiler' => true, 
```

在你`application/config/application.php`和`application/config/database.php`

这会在每个页面的底部启用一个栏。它的功能之一是列出执行的查询以及每个查询花费了多长时间。

![在此处输入图像描述](../Images/ff61c0c08c2d449e5109156819c90a78.png)

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2014-07-25T04:32:20.910

对于 Eloquent，您可以这样做：

```
$result->getQuery()->toSql(); 
```

但是您需要从查询中删除“->get()”部分。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2014-07-29T09:17:49.320

我建议使用带有 Laravel 包[https://github.com/itsgoingd/clockwork的 Chrome 扩展](https://github.com/itsgoingd/clockwork)[Clockwork](https://chrome.google.com/webstore/detail/clockwork/dmggabnehkmmfmdffgajcflpdjlnoemp)。它易于安装和使用。

> Clockwork 是一个用于 PHP 开发的 Chrome 扩展，通过一个新面板扩展了开发者工具，提供了对调试和分析 PHP 脚本有用的各种信息，包括有关请求、标头、GET 和 POST 数据、cookie、会话数据、数据库查询的信息，路线，应用程序运行时的可视化等等。Clockwork 包括对基于 Laravel 4 和 Slim 2 的应用程序的开箱即用支持，您可以通过可扩展的 API 添加对任何其他或自定义框架的支持。

![在此处输入图像描述](../Images/ccf10b3f65013c1fd936080757dcbf36.png)

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2013-06-14T10:54:34.323

**由于Laravel 4**中还没有分析器，我创建了这个帮助函数来查看正在生成的 SQL：

```
    公共静态函数 q($all = true)
    {
        $查询 = DB::getQueryLog();

        如果（$all == 假）{
            $last_query = end($queries);
            返回 $last_query;
        }

        返回$查询；
    }

```

**注意**：如果您只需要最后一个 SQL 查询，请将*$all*标志设置为*false 。*

我将这类函数保存在一个名为 DBH.php（Database Helper 的缩写）的类中，这样我就可以像这样从任何地方调用它：

```
dd(DBH::q()); 
```

这是我得到的输出： ![在此处输入图像描述](../Images/0330be9cdbc3657051a5eab7efa7bf1e.png)

如果您想知道，我使用 Kint 进行 dd() 格式化。 [http://raveren.github.io/kint/](http://raveren.github.io/kint/)

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2013-03-18T16:18:45.260

对于 Laraver 4，它是

```
DB::getQueryLog() 
```

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2013-09-30T02:09:30.290

这是一个快速的 Javascript 片段，您可以将其添加到您的母版页模板中。只要包含它，所有查询都将输出到浏览器的 Javascript 控制台。它将它们打印在一个易于阅读的列表中，从而可以轻松浏览您的站点并查看每个页面上正在执行的查询。

完成调试后，只需将其从模板中删除即可。

```
<script type="text/javascript">
    var queries = {{ json_encode(DB::getQueryLog()) }};
    console.log('/****************************** Database Queries ******************************/');
    console.log(' ');
    queries.forEach(function(query) {
        console.log('   ' + query.time + ' | ' + query.query + ' | ' + query.bindings[0]);
    });
    console.log(' ');
    console.log('/****************************** End Queries ***********************************/');
</script> 
```

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2015-09-25T12:53:50.117

# 拉拉维尔 5

请注意，这是我用于快速调试的*过程方法*

```
 DB::enableQueryLog();

    // Run your queries
    // ...

    // Then to retrieve everything since you enabled the logging:
    $queries = DB::getQueryLog();
    foreach($queries as $i=>$query)
    {
        Log::debug("Query $i: " . json_encode($query));
    } 
```

在您的标题中，使用：

```
 use DB;
     use Illuminate\Support\Facades\Log; 
```

输出看起来像这样（默认日志文件是**laravel.log**）：

> [2015-09-25 12:33:29] testing.DEBUG: 查询 0: {"query":"select * from 'users' where ('user_id' = ?)","bindings":["9"] “时间”：0.23}

***我知道这个问题指定了 Laravel 3/4，但是在搜索一般答案时会出现此页面。Laravel 的新手可能不知道版本之间存在差异。由于我从未`DD::enableQueryLog()`在通常找到的任何答案中看到提及，它*可能*特定于 Laravel 5 - 也许有人可以对此发表评论。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2014-06-20T13:25:40.633

您还可以使用以下方法侦听查询事件：

```
DB::listen(function($sql, $bindings, $time)
{
    var_dump($sql);
}); 
```

*在Listening For Query Events*下查看文档中的[信息](http://laravel.com/docs/database#running-queries)

 ** * *

## 回答 #10

> 赞同：6
> 
> 时间：2014-10-29T17:00:12.657

使用查询日志不会为您提供正在执行的实际 RAW 查询，尤其是在存在绑定值的情况下。这是获取原始 sql 的最佳方法：

```
DB::table('tablename')->toSql(); 
```

或更多参与：

```
$query = Article::whereIn('author_id', [1,2,3])->orderBy('published', 'desc')->toSql();
dd($query); 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2016-01-27T13:05:54.473

如果您使用的是 Laravel 5，则需要在查询之前或中间件上插入：

```
\DB::enableQueryLog(); 
```

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2013-11-10T16:13:15.020

或者作为 laravel 3 profiler 的替代品，您可以使用：

[https://github.com/paulboco/profiler](https://github.com/paulboco/profiler) 或 [https://github.com/barryvdh/laravel-debugbar](https://github.com/barryvdh/laravel-debugbar)

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2014-08-07T13:02:28.020

在 Laravel 4 中，您实际上可以使用事件侦听器进行数据库查询。

```
Event::listen('illuminate.query', function($sql, $bindings)
{
    foreach ($bindings as $val) {
        $sql = preg_replace('/\?/', "'{$val}'", $sql, 1);
    }

    Log::info($sql);
}); 
```

将此代码段放在任何地方，例如在`start/global.php`. 它将查询写入信息日志 ( `storage/log/laravel.log`)。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2014-12-09T12:30:17.223

```
Event::listen('illuminate.query', function($sql, $param)
{
    \Log::info($sql . ", with[" . join(',', $param) ."]<br>\n");
}); 
```

把它放在 global.php 中，它会记录你的 sql 查询。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2014-05-28T00:26:27.740

Loic Sharma SQL 分析器确实支持 Laravel 4，我刚刚安装了它。[此处列出了](https://github.com/loic-sharma/profiler)说明。步骤如下：

1.  `"loic-sharma/profiler": "1.1.*"`在 composer.json 中添加 require 部分
2.  `php composer.phar self-update`在控制台中执行自我更新 => 。
3.  `php composer.phar update loic-sharma/profiler`也在控制台中执行 composer update => `
4.  `'Profiler\ProfilerServiceProvider',`在 app.php 中添加提供者数组
5.  `'Profiler' => 'Profiler\Facades\Profiler',`在 app.php 中添加别名数组
6.  `php artisan config:publish loic-sharma/profiler`在控制台中运行

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2015-02-13T04:50:57.677

**最后查询打印**

```
$queries = \DB::getQueryLog();
$last_query = end($queries);

// Add binding to query
foreach ($last_query['bindings'] as $val) {
        $last_query['query'] = preg_replace('/\?/', "'{$val}'", $last_query['query'], 1);
}
dd($last_query); 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-08-02T12:36:04.633

# L4 单线

（写查询）：

`$q=\DB::getQueryLog();dd(end($q));`

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-03-24T11:45:56.280

# 拉拉维尔 3

另一种方法是：

```
#config/database.php

'profiler' => true 
```

对于所有查询结果：

```
print_r(DB::profiler()); 
```

最后的结果：

```
print_r(DB::last_query()); 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2015-05-17T12:57:19.240

要获取 laravel 中最后执行的查询，我们将使用`DB::getQueryLog()`laravel 的函数返回所有执行的查询。要获取最后一个查询，我们将使用`end()`返回最后执行的查询的函数。

```
$student = DB::table('student')->get();
$query = DB::getQueryLog();
$lastQuery = end($query);
print_r($lastQuery); 
```

我参考了[http://www.tutsway.com/how-to-get-the-last-executed-query-in-laravel.php](http://www.tutsway.com/how-to-get-the-last-executed-query-in-laravel.php)。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-11-26T06:57:44.140

有很简单的方法，从你的 laravel 查询中重命名任何列名，它会显示你的查询错误.. :)

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-11-18T13:40:41.250

**在 Laravel 8.x中，您可以通过在****服务提供商**中注册查询侦听器来侦听事件，如[laravel.com](https://laravel.com/docs/8.x/database#listening-for-query-events)网站中所述。

```
//header
use Illuminate\Support\Facades\DB;
use Illuminate\Support\Facades\Log;

public function boot()
{

  DB::listen(function ($query) {            
   Log::debug("SQL : " . $query->sql);
  });

} 
```

然后你可以在里面的*laravel.log*文件中看到所有的查询`storage\logs\laravel.log`*

# python - Sqlalchemy 线程消息系统

> ID：14536167
> 
> 赞同：2
> 
> 时间：2013-01-26T10:44:26.613
> 
> 标签：python, sqlalchemy, many-to-many, flask, relationship

我是 sqlalchemy 的新手。现在用 Flask 开发网站。我想用线程组织消息系统。类似于 facebook 对话框之类的东西。我有以下模型，并且此代码有效：

```
message_read_state_relations = db.Table('message_message_read_state_relations',
        db.Column('user_id', db.Integer, db.ForeignKey('auth_users.id')),
        db.Column('message_id', db.Integer, db.ForeignKey('messages.id')),
)

class User(db.Model):
        __tablename__ = 'auth_users'

        id = db.Column(db.Integer, primary_key=True)
        email = db.Column(db.String(100))
        password = db.Column(db.String(100))

        messages = db.relationship('Message', backref=db.backref('user'), lazy='dynamic')

        threads = association_proxy('user_thread_relations', 'thread')

class Message(db.Model):
        __tablename__ = 'messages'

        id = db.Column(db.Integer, primary_key=True)
        text = db.Column(db.Text, default='')

        thread_id = db.Column(db.Integer, db.ForeignKey('threads.id'))
        user_id = db.Column(db.Integer, db.ForeignKey('auth_users.id'))

        user_read_states = db.relationship('User', secondary=message_read_state_relations,
                backref=db.backref('message_read_states'), lazy='joined')

class Thread(db.Model):
        __tablename__ = 'threads'

        id = db.Column(db.Integer, primary_key=True)
        subject = db.Column(db.String(255))

        messages = db.relationship('Message', backref=db.backref('thread'), lazy='dynamic')
        users = association_proxy('user_thread_relations', 'user')

class UserThreadRelation(db.Model):
        __tablename__ = 'user_thread_relations'

        user_id = db.Column(db.Integer, db.ForeignKey('auth_users.id'), primary_key=True)
        thread_id = db.Column(db.Integer, db.ForeignKey('threads.id'), primary_key=True)

        is_deleted = db.Column(db.Boolean, default=False)

        user = db.relationship(User, backref=db.backref('user_thread_relations'))
        thread = db.relationship(Thread, backref=db.backref('user_thread_relations')) 
```

但是有些东西我看不懂。例如，如何获取用户的所有未读消息计数？或者在某些线程中未读消息对用户计数？

`Message``User`与via有关系`message_read_state_relations`。如何获取属于该用户而不属于`message_read_state_relations`该用户的所有线程的所有消息？

或者，也许，我做错了？设计错了吗？我基于这个问题[线程消息系统数据库架构设计创建它](https://stackoverflow.com/questions/6541302/thread-messaging-system-database-schema-design)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:24:35.290

不知道这是否是最好的设计，似乎是合理的。关于您询问的查询，它们可以使用连接和子查询构建，您可能想在 SQLAlchemy 文档中阅读它们。我还建议熟悉此类查询的纯 SQL 方法，因为 SA 试图非常密切地遵循 SQL，而理解 SQL 有助于极大地编写 SA 查询。这是一个查询的示例（获取用户的所有未读消息计数）：

```
# First count all the messages.
# On a big set of data this may be very slow operation.
total_msgs = db.session.query(db.func.count(Message.id).label('cnt')).subquery()
# Then count messages read by the user.
read_msgs = db.session.query(db.func.count(Message.id).label('cnt')).\
    join(User.message_read_states).filter(User.id == 1).subquery()
# Subtract read messages count from total count.
unread_count = db.session.query(total_msgs.c.cnt - read_msgs.c.cnt).scalar() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-23T12:29:39.950

我也在尝试使用 Flask 和 sqlalchemy 开发一个线程消息系统。搜索我找到了你的问题和 django 的 github 存储库（下面的链接）。我认为该模型可能非常有用。如果您仍然感兴趣（6 年后），请给我留言。

[https://github.com/philippWassibauer/django-threaded-messages/blob/master/threaded_messages/models.py](https://github.com/philippWassibauer/django-threaded-messages/blob/master/threaded_messages/models.py)

# asp.net-mvc - 在 mvc 中保存表单

> ID：14536168
> 
> 赞同：-1
> 
> 时间：2013-01-26T10:44:36.067
> 
> 标签：asp.net-mvc

我对 MVC 完全陌生，我决定尝试从 aspx WebForms 切换。我使用 MVC 视图创建器向导创建了一个视图，并选择了一个强类型类和一个编辑 Scaffold 模板。

我得到了以下

```
@using (Html.BeginForm()) {
@Html.ValidationSummary(true)

<fieldset>
    <legend>Company</legend>

    @Html.HiddenFor(model => model.Id)

    <div class="editor-label">
        @Html.LabelFor(model => model.Name)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Name)
        @Html.ValidationMessageFor(model => model.Name)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.PhoneNumber)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.PhoneNumber)
        @Html.ValidationMessageFor(model => model.PhoneNumber)
    </div>        

    <p>
        <input type="submit" value="Save" />
    </p>
</fieldset> 
```

}

在控制器中，我有以下内容来获取模型详细信息

```
[System.Web.Http.HttpGet]
    public ActionResult Edit(int id)
    {
        var uow = new BlogUow();
        var company = uow.Companies.GetById(id);
        return View(company);
    } 
```

这很好用，但问题是，我不知道如何实际保存新输入的详细信息。我过于依赖网络表单如何处理回发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T10:54:42.880

您必须在控制器中为您的编辑编写一个发布操作：

```
[System.Web.Http.HttpPost]
    public ActionResult Edit(Companies company)
    {
      var uow = new BlogUow();
      if (ModelState.IsValid)
      {
         uow.Entry(company).State = EntityState.Modified;
         return RedirectToAction("Index");
       }
        return View(company);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T09:55:24.320

注意公司超载

```
 [HttpPost]
            public ActionResult Edit(Companies company)
            {
              var uow = new BlogUow();
              if (ModelState.IsValid)
              {
                 Edit here
               }
                return View(company);
            } 
```

# jquery - 一个文件中的多个模板 JSRender

> ID：14536174
> 
> 赞同：1
> 
> 时间：2013-01-26T10:45:00.543
> 
> 标签：jquery, jsrender

我想将多个模板保存在一个外部模板文件中。但我不知道如何从整个文件中获取一个模板

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T11:02:17.200

您的模板集合需要有不同的脚本标签（作为 jsRender 的默认内联用法）。然后你可以加载集合文件，找到请求的部分并渲染它，应该以某种方式工作：（未经测试，只是理论上的）

```
my.renderUtils = (function () {
  // your template file (contains a set of script tags with ids)
  var templateFile = "template/file.html";
    renderTemplate = function (templateSelector, targetSelector, data) {
      $.get(templateFile, null, function (templateCollection) {
        var template = $(templateCollection).find( templateSelector ), /* find the correct part from the collection */
            tmpl = $.templates(template), /* rendering process */
            htmlString = tmpl.render(data);
        if (targetSelector) {
          $(targetSelector).html(htmlString); /* add it to your target */
        }
        return htmlString;
      });
    };
    return {
      renderExternalTemplate: renderTemplate
    };
})()

// usage 
my.renderUtils.renderExternalTemplate("yourTemplateFilePartID", "#yourTargetSelector", {yourdata:''}}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T17:53:26.760

有两种选择。这是我以前的工作方法（后来我已经放弃了）。这本质上是 Michel 上面提到的：

```
$.when( $.get('<%= asset_path('t1.html') %>', null, null, 'html') ).done(function (data, status, jqXHR) {
    // data is a string.  $(data) turns into an array of HTML
    // elements.  Often it is just one but if we get them ganged
    // into one file, they will be more than one.
    $(data).each(function () {
        // We assume the outside element is just a container.  I
        // use a <script> tag but it can be anything I suppose.
        // The id of the container becomes the template's name
        // while the contents becomes the template.
        $.templates(this.id, $(this).html());
        return this;
    });
    $('.upd_apar_defs tbody').html($.render.template1({items: json_elements.items, offset: 0}));
}).fail(function (a, b, c) {
    alert('Someone is really unhappy');
}); 
```

要获取的第一个参数是 URL。这是来自使用 SASS 的 Rails 项目。asset_path 变成了 t1.html 路径的相对路径（这些都与您的问题无关——我只是在解释上面的代码在做什么）。

我已经摆脱了这一点，现在将我的模板拆分为单独的文件，然后通过 Rails 中的资产管道将它们重新组合在一起。当它们重新组合在一起时，它们通过调用 $.template 来包装，使用文件名作为模板名，文件内容作为模板本身。我大致遵循了这个：

[https://github.com/erubboli/sprockets-jsrender](https://github.com/erubboli/sprockets-jsrender)

我重做了它，但基本上使用了他的大部分概念。结果是您刚刚加载的 javascript 文件，加载会导致它执行并定义模板。

我的逻辑是这样的：

如果您将多个模板放入同一个文件中，只需在每个模板周围放置一个小包装器，并使该文件成为纯 javascript 文件，即使它看起来主要是 html 和 js-render。这并不难，编辑器可以很容易地处理它，并且相对清楚你在做什么。

然后，您可以利用拥有纯 JavaScript 文件的所有好处，例如通过头部中的标签加载它、在客户端缓存它、压缩它等。模板已准备好在页面加载时摇滚节省额外的提取。

高温高压

# image - 搜索引擎优化与基于图像的网站的关键字？

> ID：14536175
> 
> 赞同：0
> 
> 时间：2013-01-26T10:45:01.073
> 
> 标签：image, tags, seo, keyword

我有一个带有报纸首页的网站，因此页面仅包含大图像而没有文本（没有描述，因为图像每天都在变化）。在页面中插入上下文关键字的最佳方法是什么？是否在没有链接的情况下仅在正文中正确插入关键字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:34:52.440

即使您的页面没有任何内容（只有图像），您仍然可以提供适当的页面描述，供 Google（和其他搜索引擎）使用。

几个方便的提示：

*   `<title>`使用放置在标签中的标签创建独特、准确的页面标题`<head>`。
*   请记住，Google 不建议将关键字放入`title`标签中。因此，确保您的标题有效地传达页面内容的主题是非常好的做法。
*   使用`description`元标记 ( `<meta name="description" content="">`) 为任何搜索引擎提供页面内容的摘要。为每个页面使用独特的描述是非常好的做法。
*   使用`keywords`元标记 ( `<meta name="keywords" content="">`) 提供与页面相关的关键字。

此外，就图像而言，我建议正确使用`alt`和`title`提供图像内容描述的属性。图像名称有时可能由一些对客户没有意义的标识符组成。

请查看 Matt Cutts 博客页面：[Gadgets、Google 和 SEO](http://www.mattcutts.com/blog/matt-video-alt-attributes-for-images/)，其中 Matt 详细描述了图像标签中正确信息`alt`和`title`属性的重要性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T12:36:41.137

如果您可以更改图像名称，请在其中添加关键字并使用相关词、同义词、复数/单数

还添加**alt**和**title**属性

# python - 如何将文件夹名称声明为全局

> ID：14536176
> 
> 赞同：0
> 
> 时间：2013-01-26T10:45:05.340
> 
> 标签：python, python-2.7

以下代码显示了我必须将输出文件夹声明为全局的第一步，以便以后的输出也可以保存在其中。现在我在输出文件夹字符串 r'optfile/ras1' 处遇到错误。任何帮助如何正确地将文件存储在输出文件夹中并将其声明为全局将不胜感激。

```
import arcpy
import os
import pythonaddins

from datetime import datetime

now = datetime.now()
month = now.month
year = now.year

optfile = "C:/temp/"+str(year)+"_"+str(month)

class DrawRectangle(object):
"""Implementation for rectangle_addin.tool (Tool)"""
    def __init__(self):
        self.enabled = True
        self.cursor = 1
        self.shape = 'Rectangle'
        os.makedirs(optfile)        

    def onRectangle(self, rectangle_geometry):
    """Occurs when the rectangle is drawn and the mouse button is released.
        The rectangle is a extent object."""

        extent = rectangle_geometry
        arcpy.Clip_management(r'D:/test', "%f %f %f %f" %(extent.XMin, extent.YMin, extent.XMax, extent.YMax), r'optfile/ras1', "#", "#", "NONE")
        arcpy.RefreshActiveView() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:41:17.997

我*认为*您的意思是该值`r'optfile/ras1'`不使用您的`optfile`变量。那是因为 Python 不会神奇地读懂你的想法并替换恰好与变量名匹配的部分字符串。

您必须`optfile`通过将其与`/ras1`部分连接来显式使用该变量：

```
 arcpy.Clip_management(
        r'D:/test',
        "%f %f %f %f" %(extent.XMin, extent.YMin, extent.XMax, extent.YMax),
        optfile + '/ras1', "#", "#", "NONE") 
```

或者，更好的是，使用该`os.path.join()`函数为您处理路径分隔符：

```
import os.path

# ...

    arcpy.Clip_management(
        r'D:/test',
        "%f %f %f %f" %(extent.XMin, extent.YMin, extent.XMax, extent.YMax),
        os.path.join(optfile, 'ras1'), "#", "#", "NONE") 
```

请注意，您的问题与全局变量无关；这适用于您要连接的变量来自何处。

# css - 跨度显示块也在跨度下降后生成文本

> ID：14536177
> 
> 赞同：0
> 
> 时间：2013-01-26T10:45:07.273
> 
> 标签：css

HTML：

```
<p>
<a href="#">my 
<span>favorites</span>
</a>
(13)
</p> 
```

我希望“收藏夹”在“我的”之后删除，然后**单独设置“（13）”样式**，它应该与“收藏夹”**在同一行。**

我尝试使用上述标记和以下 CSS，但 (13) 也下降了：

```
p span a { display: block; } 
```

(13) 应该与“收藏夹”保持在同一行，所以看起来像

```
my
favorites(13) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T10:46:44.617

这个怎么样？

```
<a href="#">my<br>favorites<span>(13)</span></a> 
```

**更长的版本（更大的灵活性）**

如果您不想要换行符，则可以使用块元素。现在，由于内联元素 ( ) 中不允许使用块元素`<a>`，因此您应该使用 span 标签并将它们设置为块元素。

```
<a href="#">
    my
    <span class="second-line">
        favorites <span class="count">(13)</span>
    </span>
</a> 
```

和CSS：

```
a .second-line {
    display: block;
}
a .count {
    color: #888888;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T10:52:23.063

这对你有用吗？

```
<p>
<a href="#">my 
<p>favorites <span>(13)</span></p>
</a>

</p> 
```

# android - ListView PerformItemClick 不起作用

> ID：14536181
> 
> 赞同：2
> 
> 时间：2013-01-26T10:45:33.687
> 
> 标签：android, listview, onitemclick

这个问题被问了很多次，我系统地检查了每个问题，并试图找到哪个版本的`performItemClick`作品。不幸的是，尽管调用了我的 onclick 方法，但我无法让它们中的任何一个工作。

我有一个嵌入到片段中的 5 个项目的列表视图。该片段由片段状态页面适配器和视图页面控制。我正在尝试恢复保存的状态。

```
 lv.setAdapter(new SimpleAdapter(getActivity(), list,
                R.layout.list_imageview, new String[] { "answer" },
                new int[] { android.R.id.text1 })); 
```

简单的适配器采用自定义布局，该布局在布局中具有 textview 和 imageview。最初，图像视图为空，单击时将其设置为勾号或十字。这在我自己单击项目时有效，但不能以编程方式工作，如下所示：

```
@Override
    public void onViewStateRestored(Bundle savedInstanceState) {
        super.onViewStateRestored(savedInstanceState);
        if (savedInstanceState != null) {
            for (int i = 0; i < 5; i++) {
                lv.performItemClick(lv.getAdapter().getView(i, null, null),
                        i, i);
                Log.e("restoring state", "" + i);
            }
        }
    } 
```

我可以确认`onViewStateRestored`被称为`onItemClick`也被称为。我认为这是我执行项目单击方式的问题。我目前只是想让它工作；我知道我尚未检查已单击哪些项目以选择性地单击它们，但这很容易`boolean[]`。

我感谢您的帮助，对于这样一个重复了好几次的简单问题，我深表歉意；尽管阅读了它们，但我仍然无法让它们工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T10:53:33.137

> 我认为这是我执行项目单击方式的问题。

现在你调用通过适配器的方法`performItemClick`给它一个**新** `View`的创建。`getView`问题是，如果您设置的图像与回调接收的行视图有某种关联`onItemClick`，您将看不到任何结果，因为该视图与实际看到的行视图无关（它是“在空中”）屏幕（或出现在 中`ListView`）。但我只是猜测。

无论如何，您不应该将该`ImageView`工作绑定到`OnItemClickListener`，您应该在适配器级别（并调用`notifydataSetChanged()`）实现它，尤其是当您尝试一次设置多行时。

# html - 使所需的属性在 ie 中以 html 形式工作

> ID：14536188
> 
> 赞同：0
> 
> 时间：2013-01-26T10:45:51.760
> 
> 标签：html, internet-explorer, google-chrome, firefox

有什么方法可以使表单的所需属性在 6+ 中工作？我在chrome和firefox中试过。它工作正常。我不想使用任何脚本，但我想我必须这样做。请给我一些简单的东西。下面的 html 在 ie 中不起作用：

```
<input type="text" name="name" required="required" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T10:53:06.367

是的，HTML5 表单有很多[polyfill](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)。查看例如[jQuery 表单 shim](http://adodson.com/jquery.form.js/)。在做出决定之前测试替代方案，因为报告错误的风格（如缺少必填字段）会有所不同。

# php - 用于重新索引 Delta 索引的 Sphinx 重新启动搜索恶魔问题

> ID：14536194
> 
> 赞同：2
> 
> 时间：2013-01-26T10:46:37.837
> 
> 标签：php, mysql, cakephp, full-text-search, sphinx

我正在开发我的应用程序搜索引擎。该搜索引擎使用 sphinx 进行全文搜索。

我创建了一个负责更新索引的 cron 作业。目前它被设置为一天执行一次。

这就是我在这个 cron 中所做的事情。

```
 indexer --all --rotate > sphinx.log 
```

有时整个搜索模块出现故障，并在客户端应用程序上显示此错误。

```
Notice (1024): Search query failed: connection to 127.0.0.1:9312 failed (errno=111, msg=Connection refused) [APP/models/behaviors/sphinx.php, line 134] 
```

在 sphinx.log 我发现了这个错误

```
FATAL: failed to lock /usr/local/sphinxsearch/delta_users/delta_users.spl: Resource temporarily unavailable, will not index. Try --rotate option. 
```

似乎 9312 被拒绝连接，可能是因为资源文件被其他进程使用。这仍然是随机行为。

环境部署在 Linux (ubuntu) 上，应用在 cakephp 上创建。我正在尝试确定它停止再次重新启动 sphinx 服务的原因。我不知道这是 sphinx 配置问题还是某些 I/O 或 mysql 问题。我认为增量索引只会导致一些问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T12:52:52.097

问题实际上是当它旋转所有索引，即主索引和增量索引时，它会锁定增量索引的资源文件。我将增量索引的轮换与其他负责合并增量索引的 cron 作业一起移动。

```
indexer   delta_users delta_users_type
indexer --merge users  delta_users 
indexer --merge users_type delta_users_type 
```

并且只在不同的 cron 上分别旋转主要索引

```
indexer --rotate -- users  users_type 
```

代替

```
indexer --rotate -- all 
```

因此，Delta 和 Main 指数的单独旋转是分辨率。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:47:23.833

检查哪些用户运行 searchd 和 indexer 进程。另请查看您对索引文件拥有的权限。您遇到了权限问题。

# html - 使用 chrome 时 blogspot 中的图像失真

> ID：14536196
> 
> 赞同：0
> 
> 时间：2013-01-26T10:46:49.863
> 
> 标签：html, css, google-chrome, styles, blogspot

我在 blogspot 博客中添加了一个带有图片库的页面：[这里](http://fotojagd.blogspot.co.at/p/fotogalerie-herbst.html)。

在 chrome 中，一些图像被扭曲（垂直格式图像） - 在 Firefox 中一切看起来都很好：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
    <title></title>
    <meta name="generator" content="Bluefish 2.2.2" />
    <meta name="author" content="" />
    <meta name="date" content="2013-01-20T10:35:50+0100" />
    <meta name="copyright" content=""/>
    <meta name="ROBOTS" content="NOINDEX, NOFOLLOW"/>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8"/>
    <meta http-equiv="content-style-type" content="text/css"/>
    <meta http-equiv="expires" content="0"/>
    <meta />
    </head>

    <style type="text/css">

    table {
     text-align: center;
    }

    td {
     margin-top: 4;
     margin-bottom: 4;
     margin-left: 4;
     margin-right: 4;
    }

    img {
     height: 85%;
     width: 85%;

    }
    </style>
    <body>
    <div id='galleryWinter'>

    <table vertical-align:middle; horizontal-align:middle>

    <tr>
    <td>
    <a href="http://www.istockphoto.com/stock-photo-19712275-virginia-creeper-in-fall.php?st=ee2d438" target="_parent" name="Wilder Wein">
    <img src="http://i.istockimg.com/file_thumbview_approve/19712275/2/stock-photo-19712275-virginia-creeper-in-fall.jpg" alt="Wilder Wein" />
    </a>
    <h3>Wilder Wein</h3>
    </td>
    <td>
    <a href="http://www.istockphoto.com/stock-photo-19792446-virginia-creeper-in-fall.php?st=ee2d438" target="_blank" name="Wilder Wein">
    <img src="http://i.istockimg.com/file_thumbview_approve/19792446/2/stock-photo-19792446-virginia-creeper-in-fall.jpg" alt="Wilder Wein" longdesc="Wilder Wein" />
    </a>
    <h3>Wilder Wein</h3>
    </td>
    </tr>
.
.
.(the code for the other images and links) 
```

如您所见，我已将图像放入表格中。我需要做什么，垂直格式图像不会在 chrome 中失真（扩展到表格单元格的宽度）。

期待您的回答，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:00:10.163

强制图像高度为自动，而不是您为页面上的每个图像全局设置的 85%：

CSS：

```
#galleryWinter img{
height: auto !important;
} 
```

# mysql - 如何计算从指定行开始的行数？

> ID：14536197
> 
> 赞同：1
> 
> 时间：2013-01-26T10:46:59.863
> 
> 标签：mysql, database

我有一个关于检索计数将从指定行开始的行数的查询问题。这些是我的 MySQL 数据库上的行值。

```
John Parker
Tony Graham
Perter Smith
Annabelle Sergio
Kris Pata
Neshren Luca
Paul Pon
Zervich Nuckrav
Allan Paulson
Imanu Hashmarida
Varick Dagovich
Senster Burgsman
Lito Umani
Ramsay Nudillo 
```

现在我想检索将从中开始的前 5 行，`Neshren Luca`以便`resultset`看起来像这样：

```
Neshren Luca
Paul Pon
Zervich Nuckrav
Allan Paulson
Imanu Hashmarida 
```

我该怎么做？

**注意**：我不会尝试根据行数检索行值，而是根据特定行值检索行值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T11:15:26.253

这看起来**很丑**，但试试看，这使用*局部变量*

```
SET @selectedName := 'Neshren Luca'; -- set the name here
SET @selectRow :=
          (
            SELECT RankNo
            FROM
                (
                    SELECT @rowNum := @rowNum + 1 AS RankNo,
                           a.Names
                    FROM   tableName a, (SELECT @rowNum:= 0) b
                ) x
            WHERE  Names = @selectedName
          );

SELECT Names
FROM
  (
    SELECT @rowNum1 := @rowNum1 + 1 AS RankNo, a.Names
    FROM   tableName a, (SELECT @rowNum1:= 0) b
  ) x
WHERE  RankNo BETWEEN @selectRow AND @selectRow + 4 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/26fd2/9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T11:02:24.723

SQL 引擎可能有一些“自然”的行顺序，但不能保证。你应该有主键，比如 ID，然后 ORDER BY ID，找到你的字符串所在的第一个 ID。然后选择前 N 项 WHERE ID >= that id。

编辑：或者，如果您的数据库保证自然顺序，则通过该值查找行 id/index 和 LIMIT/OFFSET。例如，SQLite 对每个表行都有内置的自然 rowid。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T11:04:44.397

看起来上面的 select 语句可以正常工作..否则你必须做其他方式，但它会有点长..那个.. -> 你必须将上述记录放入游标 -> 循环游标和获取记录..

# c++ - C++ 创建类对象

> ID：14536203
> 
> 赞同：0
> 
> 时间：2013-01-26T10:47:45.757
> 
> 标签：c++, class, object

我在为我的类创建对象时遇到问题，尝试使用已定义的数据成员创建类对象时遇到错误。

```
// class header for employee
#pragma once
#include <string>
#include <iostream>
class Employee
{
private:
    std::string name;
    int empnum;
    std::string address;
    std::string phone;
    double hourwage;
    double hoursworked;
public:
    Employee(void);
    Employee(int, std::string , std::string, std::string, double, double);
    double gethourwage () const;
    double gethoursworked () const;
    double printcheck () const;
    std::string getphone() const;
    std::string getname() const;
    std::string getaddress() const;
};
// end of header

// employee class.cpp
#include "Employee.h"
#include <string>
#include <iostream>

Employee::Employee(void)
{
    int empnum = 0;
    double hourwage = 0.0;
    double hoursworked = 0.0;
}
Employee::Employee(int num, std::string nme, std::string addres, std::string phon, double hourpay, double hrswrked)
{
    num = empnum;
    nme = name;
    addres = address;
    phon = phone;
    hourpay = hourwage;
    hrswrked = hoursworked;
}

double Employee::gethourwage() const
{
    return hourwage;
}
double Employee::gethoursworked() const
{
    return hoursworked;
}
double Employee::printcheck() const
{
    double pay = 0.0;
    double hrspay = hourwage;
    double hrswork = hoursworked;
    return hoursworked;

}
// end of employee.cpp
// main
#include <iostream>
#include <algorithm>
#include <numeric>
#include <vector>
#include <iterator>
#include <string>
#include "Employee.h"

using namespace std;
int main( )
{
    int num1 = 10210;
    double hourwage = 20.2;
    double hourworked = 32.3;
    string steve;
    Employee emp(num1, steve, 58s200w, 90210, hourwage, hourworked);
    cout << "" << emp.getaddress();

    system("PAUSE");
    return 0;
} // end of main 
```

“员工 emp(num1, steve, 58s200w, 90210, hourwage, hourwork);” 靠近底部的是我遇到问题的那条线。我不确定我输入的顺序是否错误，或者其他什么。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T10:50:47.567

您应该在双引号中输入字符串：

```
Employee emp(num1, "steve", "58s200w", "90210", hourwage, hourworked); 
```

**编辑1（试图解释和之间的区别`const char *`，`std::string`正如@Alex建议的那样）**

上面代码片段中的文字字符串是 type `const char *`，它是从 C 语言继承的低级实体。`const char *`是一个**指向**内存区域的指针，它保存类型的连续值`const char`。

`std::string`是 C 风格字符串的高级包装器，旨在提供更“用户友好”的 API 并解决 C 风格字符串的一些问题（例如，动态分配和自动内存清理）。

因为`std::string`该类有一个带`const char *`参数的构造函数，所以传递给构造函数的文字字符串被`Employee`隐式转换为`std::string`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T11:06:26.200

您的 Employee 类构造函数是

```
Employee::Employee(int num, std::string nme, std::string addres, std::string phon, double hourpay, double hrswrked) 
```

你称它为

```
Employee emp(num1, steve, 58s200w, 90210, hourwage, hourworked); 
```

您可以直接看到区别，Employee 类构造函数期望第二个、第三个和第四个参数为字符串。所以你必须将这些参数作为字符串传递。要么你必须将字符串声明为你定义的小时工资、小时工作变量，要么你必须像上面解释的那样传递参数。

# void - 如何使用 netsuite webservice 在 netsuite 中取消付款

> ID：14536205
> 
> 赞同：1
> 
> 时间：2013-01-26T10:48:01.610
> 
> 标签：void, netsuite

我需要使用 NetSuite 网络服务取消在 netsuite 中的付款。可能吗？我已经尝试通过添加日记条目来为我需要作废的付款。但这对我不起作用。对此的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-28T06:45:11.140

如果您使用的是套件脚本，您可以使用

```
nlapiVoidTransaction(transactionType, recordId); 
```

以下脚本类型支持此 API：

```
Client
User Event
Scheduled
Suitelet
RESTlet
Workflow Action 
```

这个 API 的治理是 10。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T11:39:13.937

Netsuite webservice 中的一般规则是，如果可以在用户界面中完成，则可以通过 web 服务完成。

作废是指删除付款？如果您可以确认可以对其进行处理（没有附加其他子记录等），则可以通过 Web 服务来完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T16:34:41.223

Web 服务或 SuiteScript 不支持作废。

# amazon-web-services - Amazon Route 53 和带有 Microsoft Outlook 365 的电子邮件

> ID：14536207
> 
> 赞同：0
> 
> 时间：2013-01-26T10:48:35.930
> 
> 标签：amazon-web-services, amazon-ec2, exchange-server, amazon-route53

我已成功使用 Amazon EC2 和 Route53 设置我的网站。我们公司决定使用 Microsoft Exchange 处理他们的电子邮件。

微软在线告诉我在 DNS 注册表中添加 TXT 和 MX 记录。效果很好！现在可以发送电子邮件了。但是，当人们有时从 Google 帐户向我发送电子邮件时（已知，可能还有其他我不知道的服务），他们会收到如下错误：

```
This is an automatically generated Delivery Status Notification

THIS IS A WARNING MESSAGE ONLY.

YOU DO NOT NEED TO RESEND YOUR MESSAGE.

Delivery to the following recipient has been delayed:

    [[EMAIL_ADDRESS]]

Message will be retried for 1 more day(s)

Technical details of temporary failure: 
DNS Error: Domain name not found 
```

你知道我怎么能解决这个问题。我的网址是可见的并且可以正常工作，有些人可以很好地向我发送电子邮件，但其他人会得到这个。

**更新：DNS 记录**

```
+----------------------+-----+---------------------------------------------------------------------------------------------+--------+
| charterbox.com.au.   | A   | 54.252.90.224                                                                               |   3600 |
| charterbox.com.au.   | MX  | 0 ms36130019.msv1.invalid.outlook.com                                                       |   3600 |
| charterbox.com.au.   | NS  | ns-1099.awsdns-09.org. ns-138.awsdns-17.com. ns-830.awsdns-39.net. ns-1960.awsdns-53.co.uk. | 172800 |
| charterbox.com.au.   | SOA | ns-1099.awsdns-09.org. awsdns-hostmaster.amazon.com. 1 7200 900 1209600 86400               |    900 |
| charterbox.com.au.   | TXT | "MS=ms36130019"                                                                             |   3600 |
| *.charterbox.com.au. | A   | 54.252.90.224                                                                               |    300 |
+----------------------+-----+---------------------------------------------------------------------------------------------+--------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T21:29:33.893

您拥有的 MX 记录看起来像用于验证您的域的记录。您需要将其更改为生产 mx 记录。您可以在 portal.microsoftonline.com 上管理页面的域管理部分中找到您的域的特定值。更新 MX 记录后，您应该一切顺利。

# css - WP8 IE10 视口问题

> ID：14536211
> 
> 赞同：2
> 
> 时间：2013-01-26T10:49:18.733
> 
> 标签：css, windows-phone-8, viewport, internet-explorer-10

你们有没有人注意到，当使用 -ms-viewport（特定宽度为 320 像素或设备宽度）时，Web 浏览器内容可以移动到可用空间之外？似乎文档大小是错误的，所以我可以将其内容滚动到左侧，但没有任何东西，然后是白色的空白区域。我也可以缩小它（但我不应该），之后它的大小并不总是相同的。我知道[http://mattstow.com/responsive-design-in-ie10-on-windows-phone-8.html](http://mattstow.com/responsive-design-in-ie10-on-windows-phone-8.html)但它没有帮助。它发生在第二次或第三次导航到相同的内容之后，并且例如在设备旋转时消失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T19:32:27.850

Windows Phone 8 无法正确识别`meta viewport`Webkit 和移动 Web 的标准标记。

在你的 CSS 中试试这个

```
@-ms-viewport{width:device-width} 
```

然后添加这个JS

```
if (navigator.userAgent.match(/IEMobile\/10\.0/)) {
    var msViewportStyle = document.createElement("style");
    msViewportStyle.appendChild(
        document.createTextNode(
            "@-ms-viewport{width:auto!important}"
        )
    );
    document.getElementsByTagName("head")[0].
        appendChild(msViewportStyle);
} 
```

[更多在这里（信用）](http://timkadlec.com/2013/01/windows-phone-8-and-device-width/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T20:19:39.470

尝试添加以下内容

```
@-ms-viewport {
    user-zoom: fixed;
    max-zoom: 1;
    min-zoom: 1;
} 
```

# ruby-on-rails - Rails/Unicorn before_fork 块，与辅助数据库断开连接

> ID：14536214
> 
> 赞同：0
> 
> 时间：2013-01-26T10:50:13.247
> 
> 标签：ruby-on-rails, ruby, heroku, unicorn

我们在单独的模型中使用两个数据库，一个主数据库，一个辅助数据库，如下所示：

```
class SecondModel < ActiveRecord::Base
  establish_connection(ENV['SECOND_DATABASE'])
end 
```

我将在 Heroku 应用程序上切换到 Unicorn，我们必须在这里断开数据库：

```
before_fork do |server, worker|
  if defined?(ActiveRecord::Base)
    ActiveRecord::Base.connection.disconnect!
  end
end 
```

我不确定是否要关闭第二个数据库的连接。有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T11:11:38.027

好的，我想我现在可以正常工作了，这是代码：

```
before_fork do |server, worker|
  if defined?(ActiveRecord::Base)
    # disconnect primary database
    ActiveRecord::Base.connection.disconnect!
    Rails.logger.info('Disconnected from ActiveRecord')

    # disconnect the second database
    SecondModel.connection.disconnect! if SecondModel.connection.active?
    Rails.logger.info('Disconnected from SecondModel')
  end
end

after_fork do |server, worker|
  if defined?(ActiveRecord::Base)
    # connect primary database
    ActiveRecord::Base.establish_connection
    Rails.logger.info('Connected to ActiveRecord')

    # connect second database
    SecondModel.establish_connection(ENV["SECOND_DATABASE"])
    Rails.logger.info('Connected to SecondModel')

    # verify connections
    ActiveRecord::Base.verify_active_connections!
  end
end 
```

我遇到了一些错误，因为我在重新连接到 SecondModel 的数据库之前正在验证连接。

欢迎任何想法！

# php - 如何将数据传递到文本字段

> ID：14536221
> 
> 赞同：0
> 
> 时间：2013-01-26T10:50:58.940
> 
> 标签：php, yii

我正在尝试编写用于解析上传`.csv`文件的代码。我已经编写了以下代码。控制器以数组的形式生成 CSV 文件的行，我也尝试使用`print_r($buffer);`语句打印这些行，我得到了预期的输出。虽然可以使用 打印字符串`echo $string;`，但在保存到数据库之前，我无法将它们传递给文本字段进行编辑。

**站点控制器**

```
public function actionImport()
{
    $buffer[] = array();
    if(isset($_POST['submitCSV'])){
        $filename=$_FILES['filename']['tmp_name'];
        $fp = fopen("$filename","r");
            if($fp){
                $i = 0;
                while(($buffer[$i++] = fgetcsv($fp,1000,",")) !== false)
                {}
                if(!feof($fp))
                    echo "Echo: Unexpected fgets() fail\n";
            }
            fclose($fp);
            unset($_POST['submitCSV']);
    }
    $this->render('index',array('buffer'=>$buffer));
} 
```

**查看(index.php)**

```
<div class="form">
<?php echo CHtml::beginForm('site/import',$method='post',$htmlOptions =array('enctype'=>'multipart/form-data')); ?>

    <div class="row">
        <input type="hidden" name="MAX_FILE_SIZE" value="30000" />
        <input type="file" name="filename" value="file">
        <?php
            echo CHtml::submitButton('Submit', array('name'=>'submitCSV'));
            foreach($buffer as $line)
                foreach($line as $string)
                    echo CHtml::activeTextField($string,$htmlOptions = array('value'=>$string));
        ?>
</div>
<?php echo CHtml::endForm(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:16:01.423

在您的控制器中，尝试以下操作：

```
public function actionImport()
{
    if (isset($_POST['submitCSV'])) {
        $filename = $_FILES['filename']['tmp_name'];
        $fp = fopen("$filename", "r");
        if($fp) {
            while(($buffer = fgetcsv($fp,1000,",")) !== false)
            {
            }
            if(!feof($fp)) {
               echo "Echo: Unexpected fgets() fail\n";
            }
        }
        fclose($fp);
        if (count($buffer)) {
            $this->render('index',array('buffer' => $buffer));
        }
    }
} 
```

在您看来：

```
<? foreach ($buffer as $line): ?>

   <p><? CHtml::activeTextField($line, array('class' => 'login_textbox', 'style' => 'width:100%', 'value' => $line)); ?> </p>

<? endforeach; ?> 
```

您正在将一组数据（由您的 CSV 行组成）传递给您的视图，然后它会遍历该数组并为每个数据呈现一个文本字段。确保您启用了 short_tags。

# string - 后缀尝试与字符串算法的动态编程

> ID：14536223
> 
> 赞同：0
> 
> 时间：2013-01-26T10:51:16.233
> 
> 标签：string, algorithm, data-structures, tree, dynamic-programming

似乎许多困难的字符串算法都可以使用后缀尝试（树）和动态编程来解决。
但我不确定哪种方法最好使用以及何时使用。
此外，哪种方法更能更好地掌握算法的特定领域，并将其纳入工作面试领域的武器库中？我认为这将是程序员在任何任务或类似任务中更频繁使用的那个？
这比简单地比较渐近符号更能掌握在你的工作中最常用的算法技术

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T13:31:35.817

考虑一个需要[给定字符串的字典序第 n 个子字符串的](https://www.hackerrank.com/challenges/find-strings)问题：后缀数组正是您所需要的……并且很容易学习解决涉及后缀数组的大多数问题的基本要素。
另一方面，DP 是一个算法技术..掌握它，您将能够解决大量问题..不仅仅是字符串。
对于面试，尽管我每天都会接受 DP ......对于面试官来说，DP 问题让他们变得棘手，如果没有 DP（在给定的限制范围内）几乎不可能解决，但解决方案意味着你给他们一个基本的递归以及如何DP 可以帮助您解决它。如果它是一个仅后缀数组的问题，这意味着他们正在通过单个数据结构（一旦学会就容易）而不是**需要掌握的更通用的技术。**

**PS**：我一直推迟学习 DP，直到最近我厌倦了尝试使用任何高级数据结构解决问题（需要 DP）并且总是会失败（例如：[UVA 1394——](https://stackoverflow.com/questions/14462401/uva-1394-and-there-was-one-algorithm)现在我知道如何解决的简单问题使用 DP 解决它，而是继续研究分段树并实现了 O(nlgn)，而 DP 给了我 O(n)。所以最后的建议：如果一个人还没有研究过 DP，那么放弃其他一切并继续努力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T12:58:46.443

老实说，对于工作面试，不需要后缀树。这太难了，超出了范围。然而，DP被广泛用于谷歌和Facebook等一些著名公司的采访中。

与 DP 相比，后缀树在解决问题上存在局限性。通常用于解决字符串相关的问题。但是DP可以解决很多不同的领域。

# c - C - 未声明的首次使用

> ID：14536225
> 
> 赞同：-4
> 
> 时间：2013-01-26T10:51:42.083
> 
> 标签：c

当我执行以下 C 代码片段时，我收到以下错误：

“box.c:2:23: error: 'fblog' undeclared (first use in this function) box.c:2:23: note: 每个未声明的标识符对于它出现的每个函数只报告一次”

我不得不承认我对 C 的经验很少，但我希望有人能发现问题。

我试图将 fblog 定义为 unsigned short 但这只是引发了另一个错误？！

```
void putpixel(int x, int y, unsigned short color) {
    unsigned short *fblog;
    unsigned short *fb = fblog;
    *(fb + (y * 240) + x) = color; 
}

void drawbox(void) {
    int x, y;
    for (x = 40; x <= 200; x++) {
        putpixel(x, 30, 0xF800);
        putpixel(x, 290, 0x001F);
    }
    for (y = 30; y <= 290; y++) {
        putpixel(40, y, 0x7E0);
        putpixel(200, y, 0x07E0);
    }
}

void main(){
    drawbox();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T10:59:46.970

`fblog`在函数内部未声明`putpixel`。尝试全局声明它（这通常是不好的）或将其作为参数传递。

> 我试图将 fblog 定义为 unsigned short 但这只是引发了另一个错误？！

那是因为`fb`是指向 的**指针**，`unsigned short`而不是`unsigned short`值，所以您已声明`fblog`为，或使用 的地址进行`unsigned short *`初始化。这取决于你想得到什么。`fb``fblog`

# android - Android前台服务在一段时间后没有反应

> ID：14536227
> 
> 赞同：0
> 
> 时间：2013-01-26T10:51:45.617
> 
> 标签：android, service

在我的应用程序中，我需要一个服务才能运行。在这个假设下，我将服务设置为前台服务。我的问题是，例如在 24 小时或更长时间的服务停用后，服务没有反应。我可以在运行服务中看到我的服务，但服务的广播接收器不起作用，计划的计时器任务不会调用自己等等。

我将不胜感激任何想法可能是这种行为的原因。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:15:17.730

发出警报 Mabger，它会在每 2 小时后唤醒，看看你的服务是否正在运行，如果没有，它会启动服务

```
 alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), GeneralConstants.MAIN_SERVICE_CHECKING_TIME, pendingIntent);

if (!isServiceIsRunning(context)) {
                context.startService(new Intent(context, MainServiceAlwaysActive.class));
            }
public static boolean isServiceIsRunning(Context context) {

        // Activity manager to refer the activity/process running in system
        ActivityManager manager = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);

        // Loop to search
        for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {

            // Basic matching
            if ("com.signals.service".equals(service.service.getClassName())) {

                return true;
            }
        }
        return false;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:20:36.553

经过一番调查，我得出结论，它可能是 SERVICE 的大小。服务增长到 16 Mb，然后服务停止反应。

# java - 权限 MODIFY_PHONE_STATE 不起作用

> ID：14536229
> 
> 赞同：0
> 
> 时间：2013-01-26T10:52:01.087
> 
> 标签：java, android, callblocking

我正在开发适用于 android 2.2 的呼叫阻止应用程序，此权限对我不起作用

```
android.permission.MODIFY_PHONE_STATE 
```

它给出了以下错误

```
Permission is only granted to system apps 
```

如果没有此权限，我的应用程序会工作吗？？？或任何其他解决方案..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:11:40.320

看看：[如何为 Gingerbread 上运行的应用授予 MODIFY_PHONE_STATE 权限](https://stackoverflow.com/questions/4715250/how-to-grant-modify-phone-state-permission-for-apps-ran-on-gingerbread)

从该页面：

*David Brown 签入了一项更改，该更改限制了`MODIFY_PHONE_STATE`系统应用程序的权限使用。系统应用程序要么*

1.  *预安装到 ROM 上的系统文件夹中*
2.  *由制造商使用其安全证书编译*

换句话说，您不能使用该权限。

# windows-runtime - 台式机/平板电脑和 WP8 的单独项目？

> ID：14536236
> 
> 赞同：0
> 
> 时间：2013-01-26T10:52:53.457
> 
> 标签：windows-runtime, windows-phone-8, windows-store-apps, tablet

> **可能重复：**
> [WinRT 类库和 Windows Phone 8 之间的兼容性如何？](https://stackoverflow.com/questions/14501457/what-is-the-compatibility-between-a-winrt-class-library-and-windows-phone-8)

我正在为桌面/平板电脑和 WP8 设计一个 Windows 商店应用程序。桌面/平板电脑的应用程序界面相同，但 WP8 的应用程序界面不同。你会建议我把它分成两个项目还是在一个 Windows 商店应用程序项目中做所有事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T11:17:52.313

你需要分开。Windows 商店应用程序无法在 Windows Phone 8 上运行。您可以使用可移植类库和 Winrt 组件在 Win8 和 wp8 之间共享部分代码，但需要为 Windows 商店应用程序和其他 Windows Phone 应用程序做一个项目。

# python - 装饰器错误：NoneType 对象不可调用

> ID：14536242
> 
> 赞同：7
> 
> 时间：2013-01-26T10:53:47.217
> 
> 标签：python, python-2.7, decorator, python-decorators

我写了一个这样的函数装饰器：

```
def tsfunc(func):
    def wrappedFunc():
        print '%s() called' % func.__name__
        return func()
    return wrappedFunc()

@tsfunc
def foo():
    pass

foo()  # to get it work, use foo instead of foo()
foo() 
```

我收到以下错误消息：

```
foo() called
Traceback (most recent call last):
  File "decorator.py", line 11, in <module>
    foo()
TypeError: 'NoneType' object is not callable 
```

我通过用“foo”替换“foo()”来实现它。但我仍然没有得到我期望的结果：

```
foo() called 
```

似乎该`foo`函数只被调用一次。

请帮助我理解为什么会这样。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-26T10:55:27.217

您应该返回包装函数本身，*而不是它的结果*：

```
def tsfunc(func):
    def wrappedFunc():
        print '%s() called' % func.__name__
        return func()
    return wrappedFunc   # Do not call the function, return a reference instead 
```

装饰器用装饰器的返回值替换被装饰的项目：

```
@tsfunc
def foo():
    # .... 
```

相当于：

```
def foo():
    # ....
foo = tsfunc(foo) 
```

扩展为（在您的代码中）：

```
foo = wrappedFunc() 
```

`foo`所以你用调用的结果替换了函数，`wrappedFunc()`而不是它`wrappedFunc`本身。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T10:56:06.073

您需要删除括号

```
return wrappedFunc 
```

装饰器应该*返回*包装函数，而不是调用它。

使用此修复程序，代码会生成：

```
foo() called
foo() called 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-26T14:00:06.870

有点晚了，但希望这会有所帮助，扩展为什么提供的答案被接受

如错误所述，“NoneType”表示我们尝试调用的实例/对象没有类型（它不是函数/int/boolean/class/instance）。它的类型只是“无”所以总而言之，装饰器只不过是对闭包的扩展使用，其函数被视为一等公民（您可以获得关于[闭包](https://www.youtube.com/watch?v=swU3c34d2NQ)的详细视图 这基本上意味着装饰器希望返回一个函数，比如说大多数情况下的包装器，原始函数保持不变并使用装饰器调用

```
def tsfunc(func):
    def wrappedFunc():
        print '%s() called' % func.__name__
        return func()
    return wrappedFunc() -> Here the function is not returned but called eventually

@tsfunc
def foo():
    pass

foo() - > calling this again doesnt make sense to trigger the decorator, since a reference for the method foo is enough. Hence foo works fine but foo() doesn't (method call has completed already but no value is returned) If you try like this, you would see that the variable has 'None' type

def tsfunc(func):
        def wrappedFunc():
            print '%s() called' % func.__name__
            return func()
        return wrappedFunc --  Here I made the correction

    @tsfunc
    def foo():
        pass
var1 = foo()
print(var1) 
```

This what happened with the call to foo() when you had the incorrect way of calling the wrapper function rather than returning just the function

So for a decorator to function as per the norms, it should return a wrapper function with the original function being unaltered. And hence it should be rewritten as per the accepted answer

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-27T14:54:11.423

you use this syntax

```
def tsfunc(func):
    def wrappedFunc():
        print '%s() called' % func.__name__
        return func()
    return wrappedFunc # not use wrappedFunc() becaues Because this function runs at the this time 

@tsfunc
def foo():
    pass

foo()  # 
```

# php - print_r($something) 和在数据库中写入相同的 $something 之间的结果不同

> ID：14536243
> 
> 赞同：0
> 
> 时间：2013-01-26T10:54:07.340
> 
> 标签：php, mysql, parsing

我正在解析一个页面并将检索到的数据保存在 mysql db 中。一切都很好，除了产品的价格。提取价格后，当我使用 print_r($price) 时，我得到了实际值，但是在我的数据库中保存相同的 $price 时，我只得到了一部分。

例如：- 在使用 print_r($something) 时；//输出为 2 458

在数据库 $something 中保存时，保存的值只有 458。

我认为问题是由于 2 和 4 之间的空间。我可以理解这对你们大多数人来说是一个非常简单的问题，但现在我无法解决它。非常感谢您的支持！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:08:36.823

MySQL 对于可以将哪些数据插入到其字段中是相当宽容的。在这种情况下，您尝试将包含两个数字的字符串插入到数字字段中，它会尽最大努力从该数据中提取单个数字，但会出错。

您需要做的就是在插入之前删除空格：

```
$something = str_replace(' ', '', $something); 
```

或使用正则表达式，您可以删除任何非数字字符：

```
$something = preg_replace("'[^0-9]'", '', $something); 
```

# javascript - 在 jQuery Mobile 中动态构建可折叠数据集的技术是什么

> ID：14536244
> 
> 赞同：1
> 
> 时间：2013-01-26T10:54:17.277
> 
> 标签：javascript, jquery, ajax, listview, jquery-mobile

我只能假设我正在尝试做的是使用动态 javascript 应用程序时非常常见的要求。

对于这个特定的示例，我想通过 JSON 请求详细的测试结果。因此，对于某些用户，他们可能已经完成了 20 次测试，其他人可能已经完成了 1 次。一些用户可能在特定测试中做错了 2 个问题，这些问题将被引用，其他用户可能做错了 10 个问题，有些人得到了 0。只有那些错误会显示出来。

因此，换句话说，我为每个请求它的用户请求可折叠数据集的不同布局。

**静态代码可能如下所示：**

```
<div data-role="collapsible-set" data-theme="b" data-content-theme="d">
    <div data-role="collapsible">
        <h2>Test Number 2 - 2 out of 5 correct</h2>
        <ul data-role="listview" data-theme="d" data-divider-theme="d">
            <li data-role="list-divider">You did not complete the following:</li>
            <li><h3>A (answer is: X)</h3></li>
            <li><h3>B (answer is: Y)</h3></li>
            <li><h3>C (answer is: Z)</h3></li>
        </ul>
    </div>
    <div data-role="collapsible">
        <h2>Test Number 1 - 4 out of 5 correct</h2>
        <ul data-role="listview" data-theme="d" data-divider-theme="d">
            <li data-role="list-divider">You did not complete the following:</li>
            <li><h3>A (answer is: X)</h3></li>
        </ul>
    </div>
</div> 
```

作为一个对 JavaScript 和 jQuery 比较陌生的人，我仍然掌握了这一点，我过去曾玩过一些 DOM 操作。只是想知道我想要完成的工作是否还有另一个名称，甚至可能是一个库、我可以在 GitHub 上使用的预构建代码等，这些代码可以执行类似的操作，而无需我从头开始构建所有内容。想要以正确的方式做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T11:00:14.560

你不需要一个特殊的框架，你需要的一切都已经是 jQuery 的一部分。

我为您创建了一个示例：http: [//jsfiddle.net/Gajotres/HBxTs/](http://jsfiddle.net/Gajotres/HBxTs/)

**HTML：**

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
</head>
<body>
    <div data-role="page" id="index">
        <div data-role="content">
            <div data-role="collapsible-set" data-theme="b" data-content-theme="d">
                <div data-role="collapsible">
                    <h2>Simple list</h2>
                    <ul data-role="listview" data-inset="true" id="movie-data" data-theme="a">

                    </ul>
                </div>
            </div>            
        </div>
    </div>
</body>
</html> 
```

**JS：**

```
$('#index').live('pagebeforeshow',function(e,data){ 
    $.ajax({url: "http://api.themoviedb.org/2.1/Movie.search/en/json/23afca60ebf72f8d88cdcae2c4f31866/The Goonies",
        dataType: "jsonp",
        jsonpCallback: 'successCallback',
        async: true,
        beforeSend: function() {
            $.mobile.showPageLoadingMsg(true);
        },
        complete: function() {
            $.mobile.hidePageLoadingMsg();
        },
        success: function (result) {
            ajax.parseJSONP(result);
        },
        error: function (request,error) {
            alert('Network error has occurred please try again!');
        }
    });         
});

var ajax = {  
    parseJSONP:function(result){
        //var jsonObj = jQuery.parseJSON(parameters);
        $('#movie-data').append('<li>Movie name:<span> ' + result[0].original_name+ '</span></li>');
        $('#movie-data').append('<li>Popularity:<span> ' + result[0].popularity + '</span></li>');
        $('#movie-data').append('<li>Rating:<span> ' + result[0].rating+ '</span></li>');
        $('#movie-data').append('<li>Overview:<span> ' + result[0].overview+ '</span></li>');
        $('#movie-data').append('<li>Released:<span> ' + result[0].released+ '</span></li>');  
        $('#movie-data').listview('refresh');        
    }
} 
```

您唯一需要注意的是在添加内容后执行此功能：

```
$('#movie-data').listview('refresh'); 
```

它用于列表视图重新样式化。

# java - java中的array_intersect

> ID：14536245
> 
> 赞同：0
> 
> 时间：2013-01-26T10:54:18.703
> 
> 标签：java

我在网上找到了这个片段，它使用整数在 java 中创建了一个类似 array_intersect 的函数。

样本：

```
 int[] intersect(int[] arr1, int[] arr2) {
            int count = 0;
            for(int a = 0; a < arr1.length; a++) {
                for(int b = 0; b < arr2.length; b++) {
                    if(arr1[a] == arr2[b]) {
                        count++;
                        break;
                    }
                }
            }

            int[] result = new int[count];
            count = 0;
            for(int a = 0; a < arr1.length; a++) {
                for(int b = 0; b < arr2.length; b++) {
                    if(arr1[a] == arr2[b]) {
                        result[count++] = arr1[a];
                        break;
                    }
                }
            }

            return result;
        }

        int[] arr1 = new int[] {10, 20, 30, 40, 50, 60, 70, 80, 90, 100,
         95, 85, 75, 65, 55, 45, 35, 25, 15, 05,
         10, 15, 20, 25, 30, 35, 40, 45, 50, 55};

        int[] arr2 = new int[] {15, 25, 35, 45, 55,
         12, 22, 32, 43, 52,
         15, 25, 35, 45, 55};

        int[] p1 = this.unique(arr1);
        int[] p2 = this.unique(arr2);
        int[] intersectResults = this.intersect(arr1, arr2);

            for(int a = 0; a < intersectResults.length; a++) {
                System.out.print(intersectResults[a] + "    ");
            } 
```

但是当我将其更改为：

```
 String[] intersect(String[] a_yourname, String[] a_crushname) {
            int count = 0;
            for(int a = 0; a < a_yourname.length; a++) {
                for(int b = 0; b < a_crushname.length; b++) {
                    if(a_yourname[a] == a_crushname[b]) {
                        count++;
                        break;
                    }
                }
            }

            String[] result = new String[count];
            count = 0;
            for(int a = 0; a < a_yourname.length; a++) {
                for(int b = 0; b < a_crushname.length; b++) {
                    if(a_yourname[a] == a_crushname[b]) {
                        result[count++] = a_yourname[a];
                        break;
                    }
                }
            }

            return result;
        }

     String[] flames = this.intersect(a_yourname, a_crushname);
            //String[] p23 = this.unique(arr2);
             System.out.println("heheh" +flames.length);
             for(int a = 0; a < flames.length; a++) {
                System.out.print(flames[a] + "    ");
            } 
```

有人可以向我解释我在这里做错了什么吗？我真的不熟悉Java。

`a_yourname`并且`a_crushname`都是字符串数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:32:59.760

代码：

```
 String[] a = new String[] { "aa", "bb", "cc" };
    String[] b = new String[] { "bb", "cc", "dd" };

    Set<String> setA = new HashSet<String>(Arrays.asList(a));
    List<String> listB = Arrays.asList(b);
    setA.retainAll(listB);
    System.out.println(setA); 
```

你可以在这里看到结果：http: [//ideone.com/tKg5xa](http://ideone.com/tKg5xa)

如果您真的希望将结果作为数组：

```
String[] out = setA.toArray(new String[setA.size()]); 
```

同样，如果您只想遍历结果，则无需使用数组。谷歌“Java for each”或拿起一本 Java 书。

# php - 如果我不知道它的尺寸，如何将大图像显示得更小？

> ID：14536250
> 
> 赞同：0
> 
> 时间：2013-01-26T10:54:49.307
> 
> 标签：php, image, scale, image-resizing

我有以下问题。用户可以上传图片，我想把图片缩小5倍左右，不会造成图片失真。那是我想避免的。如何找到原始图像的宽度和高度并将其除以 5？

我使用php，忘记提及那个细节。

问候，佐兰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T11:29:37.530

从您的评论声音中，您正在寻找比您得到的答案更简单的东西。你试过`getimagesize`吗？[http://php.net/manual/en/function.getimagesize.php](http://php.net/manual/en/function.getimagesize.php)

你可以这样做：

```
$size = getimagesize($filename);
echo $size[0]/5; //width
echo $size[1]/5; //height 
```

这种方法还具有不必依赖像 GD 之类的图像库或任何东西的优点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T11:07:19.710

[http://php.net/manual/en/imagick.resizeimage.php](http://php.net/manual/en/imagick.resizeimage.php)

调用它`FILTER_GAUSSIAN`

```
<?php
    $image = new Imagick( $filename );
    $imageprops = $image->getImageGeometry();
    if ($imageprops['width'] <= 200 && $imageprops['height'] <= 200) {
        // don't upscale
    } else {
        $image->resizeImage(200,200, imagick::FILTER_GAUSSIAN, 0.9, true);
    }
?> 
```

这个想法是通过使用高斯滤波器来模糊图像，而不是对其进行二次采样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T11:17:09.037

图片上传完成后，使用以下函数：

```
<?php

function generate_image_thumbnail($source_image_path, $thumbnail_image_path){
    list($source_image_width, $source_image_height, $source_image_type) = getimagesize($source_image_path);
    switch ($source_image_type) {
        case IMAGETYPE_GIF:
            $source_gd_image = imagecreatefromgif($source_image_path);
            break;
        case IMAGETYPE_JPEG:
            $source_gd_image = imagecreatefromjpeg($source_image_path);
            break;
        case IMAGETYPE_PNG:
            $source_gd_image = imagecreatefrompng($source_image_path);
            break;
    }

    if ($source_gd_image === false) {
        return false;
    }

    $thumbnail_image_width = $source_image_width/5;
    $thumbnail_image_height = $source_image_height/5;

    $thumbnail_gd_image = imagecreatetruecolor($thumbnail_image_width, $thumbnail_image_height);
    imagecopyresampled($thumbnail_gd_image, $source_gd_image, 0, 0, 0, 0, $thumbnail_image_width, $thumbnail_image_height, $source_image_width, $source_image_height);
    imagejpeg($thumbnail_gd_image, $thumbnail_image_path, 90);
    imagedestroy($source_gd_image);
    imagedestroy($thumbnail_gd_image);
    return true;
}
?> 
```

将正确的参数传递给函数，它将完成这项工作。

并确保在您的 php 设置中启用了 GD。它使用 gd 库。

# rest - 使用 CodeIgniter REST_Controller 找不到 404 页面

> ID：14536253
> 
> 赞同：1
> 
> 时间：2013-01-26T10:55:06.457
> 
> 标签：rest, http-status-code-404, codeigniter-2

我正在尝试使用[CodeIgniter REST_Controller](https://github.com/philsturgeon/codeigniter-restserver)。以下是我的代码。

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

require_once (APPPATH.'/libraries/REST_Controller.php');

class Test extends REST_Controller{

    public function index_get() {
        $this->response(array(''));
    }
} 
```

当我访问`http://codeigniter/index.php/test`响应时

```
<xml><item/></xml> 
```

显示在浏览器上。

但是当试图访问

`http://codeigniter/index.php/test.xml`或者`http://codeigniter/index.php/test.html`我收到 404 错误。

上述库的文档说，

```
http://example.com/books.json 
http://example.com/books?format=json 
```

与图书馆合作。

有人可以向我指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-01T09:27:46.723

你必须这样称呼它

服务器-URL/index.php/test/index

如果你在控制器中的文件夹中有 test.php，那么像这样调用它

服务器-URL/index.php/test/FOLDER-NAME/index

塔希尔·劳夫 [http://www.onethatmatters.com](http://www.onethatmatters.com)

# c# - 在编译时生成 Guid

> ID：14536254
> 
> 赞同：2
> 
> 时间：2013-01-26T10:55:09.047
> 
> 标签：c#, compiler-construction, compiler-errors, constants, guid

我正在尝试生成一个常量值，我将使用如下所示：

```
public class Foo()
{
    public const String ExtensionKey = Guid.NewGuid().ToString();
    public int ID { get; set; }
} 
```

编译器抛出错误：

`The expression being assigned to 'Foo.ExtensionKey' must be constant`

我知道在编译时不可能执行方法（构造函数或类型初始化程序）。我正在寻找一种解决方法，将随机生成的 Guid 分配给`ExtensionKey`不同类的不同常量。

**编辑：**

目的是为每种类型生成一个唯一的 Guid。所有对象实例以及应用程序运行时的 Guid 值都必须相同。这是的行为，`Const`我正在寻找一种尊重它的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T14:37:45.240

（这个答案的大部分是从对问题的评论中“提升”的。）

在 Visual Studio 中，您可以选择**“工具”-“创建 GUID”**。或者在 Windows PowerShell 中，您可以说`[Guid]::NewGuid().ToString()`. 那会给你一个`Guid`. 然后，您可以将该特定 Guid 的字符串表示形式设为`string`常量。

```
public const string ExtensionKey = "2f07b447-f1ba-418b-8065-5571567e63f6"; 
```

当然，它`Guid`是固定的。标记的字段`const`始终是`static`（但您不能提供`static`关键字；这是隐含的）。

如果你想拥有`Guid`类型的字段，那么它不能`const`在 C# 中声明。然后你会这样做：

```
public static readonly Guid ExtensionKey = new Guid("2f07b447-f1ba-418b-8065-5571567e63f6"); 
```

`readonly`意味着该字段只能从`static`同一类的（在这种情况下）构造函数更改（派生类的构造函数不行）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T11:01:18.647

`Guid.NewGuid()`每次调用都会返回一个新的 GUID，这就是你得到异常的原因。您可以替换 `const`为`readonly`或`static`使用固定的 GUID 字符串`const`。

```
public class Foo
{
    // Fixed "forever" or until you manually change it
    // Cannot be changed in run-time
    public const String ExtensionKey = "3c88c196-06ec-4a89-bffa-6f3fd221f425";

    // You will get a new GUID per each Application Domain and per each run
    // Can be changed
    public static String ExtensionKey1 = Guid.NewGuid().ToString();

    // By convention this shall be private, as it's a field
    // You will get a new GUID per each instance of a class,
    // Once assigned, the value cannot be changed
    public readonly String ExtensionKey3 = Guid.NewGuid().ToString();

    // You will get a new GUID per each Application Domain and per each run,
    // Once assigned, the value cannot be changed
    public static readonly String ExtensionKey4 = Guid.NewGuid().ToString();
} 
```

* * *

**编辑**

> 目的是为每种类型生成一个唯一的 Guid。所有对象实例以及应用程序运行时的 Guid 值都必须相同。

手动生成新的 GUID 并使用第一个选项

```
 // Fixed "forever" or until you manually change it
    // Cannot be changed in run-time
    public const String ExtensionKey = "3c88c196-06ec-4a89-bffa-6f3fd221f425"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-26T10:58:10.770

您可以通过替换为获得几乎相同的`const`行为`static readonly`

```
public static readonly String ExtensionKey = Guid.NewGuid().ToString(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T11:18:50.563

这个问题缺少一些细节；您希望您的 GUID 在每个类和进程中是唯一的，还是每个类都是唯一的，但每次启动程序时都相同？这是两个非常不同的事情。

如果您希望每个类和进程都有一个唯一的 GUID，那么您已经有了一些有效的答案，但是如果您想要每个类而不是每个进程的唯一 GUID，那么您需要一些其他方法来解决您的问题。要么在代码中输入 GUID，要么使用某种 GUID 生成器，它使用一些文本作为输入，而不是基于时钟或类似的随机数生成器。

我建议阅读这篇关于从字符串生成 GUID 的[博客文章](http://code.logos.com/blog/2011/04/generating_a_deterministic_guid.html)，实际代码位于[GitHub 上](https://github.com/LogosBible/Logos.Utility/blob/master/src/Logos.Utility/GuidUtility.cs)。

通过使用类似的东西并使用类的全名作为输入，您将获得每个类的唯一 GUID，但对于每个进程仍然相同

# objective-c - 将背景图片添加到所有 UITableViewCell

> ID：14536263
> 
> 赞同：1
> 
> 时间：2013-01-26T10:56:52.010
> 
> 标签：objective-c, uitableview

我使用 willDisplayCell 委托方法向 UITableViewCell 显示自定义背景图像。

```
- (void)tableView:(UITableView *)tableView 
           willDisplayCell:(UITableViewCell *)cell 
           forRowAtIndexPath:(NSIndexPath *)indexPath {

    static UIImage* bgImage = nil;
    if (bgImage == nil) {
        bgImage = [UIImage imageNamed:@"myImage.png"];
    }
    cell.backgroundView = [[UIImageView alloc] initWithImage:bgImage];
} 
```

当我在模拟器中运行应用程序时，仅更改了绘制单元格的背景，有没有办法更改所有单元格的背景？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T11:19:11.613

我已经使用了这个代码。它运行良好。你可以试试这个代码。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }
    cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:@"Cell"] autorelease];

        UIImageView *cellBackView=[[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320, 100)];
        cellBackView.backgroundColor=[UIColor clearColor];

            cellBackView.image = [UIImage imageNamed:@"list.png"];

        cell.backgroundView = cellBackView;
        cell.selectionStyle=UITableViewCellSelectionStyleNone;

    return cell;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T11:00:46.120

`cellForRowAtIndexPath`您必须在创建单元格的方法中设置 backgroundView 属性：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   static NSString *CellIdentifier = @"Cell";

   UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

   if (!cell)
   {
       cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
   }

   cell.backgroundView = [[UIImageView alloc] initWithImage:...];

   return cell;
} 
```

# javascript - 从数组中查找对象的值

> ID：14536264
> 
> 赞同：0
> 
> 时间：2013-01-26T10:56:57.920
> 
> 标签：javascript

是否有更简单（或更有效）的方法来实现以下目标：

```
var _dataObjects = [{id:0, data:"data0", nextID:1}, 
                    {id:1, data:"data1", nextID:2}, 
                    {id:2, data:"data2", nextID:3} .. etc.];
generateNextPieceOfData();

function generateNextPieceOfData(){
    var len = _dataObjects.length;
    for ( var i = 0; i < len; i ++ ) {
        var nextDataID = _dataObjects[i].nextID;
        var nextData;
        for ( var j = 0; j < len; j ++ ) {
            if( _dataObjects[j].id == nextDataID ){
                nextData = _dataObjects[j].data;
                break;
            }
        }
    }
} 
```

上面的示例是从我遇到的问题中抽象出来的，我意识到 ID 号在这种情况下是连续的，但在实际问题中，`nextID`编号不是按顺序运行的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:01:46.243

如果您的代码仅按顺序工作，那么您可以`sort`通过`id`或其他方式使用项目，并且您的代码应该可以正常工作吗？试试这个：

```
_dataObjects = _dataObjects.sort(function(a, b) {
  return a.id > b.id;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T11:08:57.293

为您的问题使用正确的数据结构。由于您想通过 ID 查找对象，因此创建一个哈希映射，其中 ID 作为键，对象作为值：

```
var object_map = {};

for(var i = 0, l = _dataObjects.length; i < l; i++) {
    objects[_dataObjects[i].id] = _dataObjects[i];
} 
```

然后获取下一个对象很简单：

```
var next_object = object_map[someObject.nextID]; 
```

不过，您仍然需要迭代，直到满足某些最终条件。例如：

```
function generatePath(id_a, id_b) {
    var obj = object_map[id_a];
    var path = [obj];

    while (obj && obj.id !== id_b) {
        obj = object_map[obj.nextID];
        path.push(obj);
    }
    return path;
} 
```

# ios - 从 iOS 网页下载 CSV 文件

> ID：14536266
> 
> 赞同：0
> 
> 时间：2013-01-26T10:58:02.480
> 
> 标签：ios, objective-c, csv

> **可能重复：**
> [如何在 Objective-C 中从服务器下载 CSV 文件](https://stackoverflow.com/questions/10383341/how-to-download-csv-file-from-server-in-objective-c)

如何让我的应用程序从网页下载 CSV 文件？具体来说，我想在这里得到一个：

[http://www.google.com/trends/explore#cat=0-14&date=today%207-d&cmpt=q](http://www.google.com/trends/explore#cat=0-14&date=today%207-d&cmpt=q)

（设置>下载 CSV）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T16:49:58.043

首先，您需要确定您希望通过 HTTP 下载的资源的 URL。查看 HTML 后，我发现这是 CSV 的实际 URL：

[http://www.google.com/trends/trendsReport?hl=en-US&cat=0-14&date=today%207-d&cmpt=q&content=1&export=1](http://www.google.com/trends/trendsReport?hl=en-US&cat=0-14&date=today%207-d&cmpt=q&content=1&export=1)

您将需要进行试验，看看它是如何格式化的。

现在您有了使用 HTTP 下载它所需的 URL。您可以使用 SDK 的请求系统或更高级的库，例如`ASIHTTPRequest`或`AFNetworking`. 我会使用`AFNetworking`，因为前者现在已被其开发商停产。

[https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking)

```
NSURL *url = [NSURL URLWithString:@"http://domain.com/theFileYouWant.csv"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc]initWithRequest:request];
[operation  setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {

    NSLog(@"success: %@", operation.responseString);

} 
    failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"error: %@",  operation.responseString);

}
 ];
[operation start]; 
```

这是一些使用 AFNetworking 下载 CSV 文件的示例代码（我尚未对此进行测试）。下载文件后，您可以对其执行任何操作。

希望这可以帮助！

# java - 使用 HTTPservletResponse 发送对象

> ID：14536267
> 
> 赞同：1
> 
> 时间：2013-01-26T10:58:10.073
> 
> 标签：java, http, servlets

我有一个使用 servlet 相互通信的客户端-服务器程序，它们中的每一个都向对方发送一个对象（我定义的一个类）。我可以使用 servlet 中的 setContentType(myClass) 直接发送它吗？还是我需要完全不同的东西？我找不到办法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T11:00:59.910

您需要在服务器端序列化对象，将其作为字节数组发送，或编码为文本（例如使用 base64），然后在客户端对其进行反序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:49:38.257

还有另一种方法：使用 WebServices。[您可以在Apache AXIS 网站](http://axis.apache.org/axis/)上了解更多关于它们的信息。

# javascript - 如何在 mongodb 中分组以生成对象列表？

> ID：14536270
> 
> 赞同：0
> 
> 时间：2013-01-26T10:58:33.373
> 
> 标签：javascript, node.js, mongodb

我有这样的数据，

```
{
    meta: {
        artist: "artist",
        album: "album",
        year: 2008
    }
} 
```

我想通过艺术家对 SQL 组进行等效处理，以`{ album: album, year: year }`使用 mongodb 聚合生成对象列表。

我有这个查询，这几乎是我想要的，但我认为它不是正确的方法。

```
db.pending.aggregate( [ 
    { $project: 
      { 'meta.artist': 1, 'meta.album': 1, 'meta.year':1 } 
    }, 
    { $group: 
      {
       '_id': 
         { artist: '$meta.artist', album: '$meta.album', 
             year: { $year: '$meta.year'}  
         } 
      }
    }
] ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:16:50.510

我认为您可以通过这样的聚合框架执行以下操作：

```
db.pending.aggregate(
  {$group: {_id: '$artist', albums: {$push: {album: '$album', year: '$year'}}}}, 
  {$sort: {_id: 1}}
); 
```

或者你可以通过 map reduce 函数来做到这一点：

```
var mapFunction = function() {
                       emit(this.meta.artist, {album: this.meta.album, year: this.meta.year});
                   };

var reduceFunction = function(artistId, albumValues) {
                     var reducedObject = {
                                artisId: artistId,
                                albums: []};

                    albumValues.forEach( function(albumValue) {
                                   reducedObject.albums.push(
                                       {album: albumValue.album,
                                       year: albumValue.year}
                                        );
                                   });
                        return reducedObject;
};

db.pending.mapReduce(
                     mapFunction,
                     reduceFunction,
                     { out: { inline: 1 } }
                   ) 
```

我不认为你可以通过查询的 SQL 组来做你想做的事。这将为您返回与此类似的结果`{_id: "artisName", values[{album: 'album1', year: 'year1'}, {album: 'album2', year: 'year2'}]}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T11:41:47.090

我认为您需要[`$addToSet`](http://docs.mongodb.org/manual/reference/operator/addToSet/#_S_addToSet)操作员：

```
db.test.aggregate(
  { $project:
    { 'meta.artist': 1
    , 'meta.album': 1
    , 'meta.year': 1 }
  }
  , { $group:
      { _id: '$meta.artist'
      , albums: {
        $addToSet: {
          album: '$meta.album'
        , year: '$meta.year' }
      }
    }
  }
) 
```

# eclipse - 从 Maven 插件启动 Jetty 时看不到 Spring 的日志输出

> ID：14536274
> 
> 赞同：2
> 
> 时间：2013-01-26T10:58:56.090
> 
> 标签：eclipse, maven, logging, spring-mvc, jetty

我正在Eclipse Juno中开发一个webapp作为一个Maven多模块项目，在开发过程中使用Spring MVC和Jetty Maven插件版本8.1.7.v20120910和HSQL作为内存数据库。我想使用 jetty:run 目标从 IDE 中启动 Jetty。问题是我看不到 Spring 的任何日志输出，但我怀疑上下文确实正在加载，因为控制台日志输出会短暂停止——只要加载我如此小的 Spring 上下文——在抛出 NPE 之前一个自动装配的 bean。所以我怀疑是在启动 Spring 上下文时出了点问题。

这是在它短暂“停止”之前的日志输出：

```
[INFO] web.xml file = file:/F:/projects/matching/template/template-app/src/main/webapp/WEB-INF/web.xml
[INFO] Webapp directory = F:\projects\matching\template\template-app\src\main\webapp
2013-01-26 11:09:18.130:INFO:oejs.Server:jetty-8.1.7.v20120910
2013-01-26 11:09:20.704:INFO:oejpw.PlusConfiguration:No Transaction manager found - if your webapp requires one, please configure one. 
```

在暂停之后是：

```
2013-01-26 11:09:35.884:INFO:/:No Spring WebApplicationInitializer types detected on classpath
2013-01-26 11:09:36.742:INFO:oejsh.ContextHandler:started o.m.j.p.JettyWebAppContext{/,file:/F:/projects/matching/template/template-app/src/main/webapp/},file:/F:/projects/matching/template/template-app/src/main/webapp/
2013-01-26 11:09:36.742:INFO:oejsh.ContextHandler:started o.m.j.p.JettyWebAppContext{/,file:/F:/projects/matching/template/template-app/src/main/webapp/},file:/F:/projects/matching/template/template-app/src/main/webapp/
2013-01-26 11:09:36.742:INFO:oejsh.ContextHandler:started o.m.j.p.JettyWebAppContext{/,file:/F:/projects/matching/template/template-app/src/main/webapp/},file:/F:/projects/matching/template/template-app/src/main/webapp/
2013-01-26 11:09:36.743:WARN:oejw.WebAppContext:Failed startup of context o.m.j.p.JettyWebAppContext{/,file:/F:/projects/matching/template/template-app/src/main/webapp/},file:/F:/projects/matching/template/template-app/src/main/webapp/
java.lang.NullPointerException 
```

现在我有信心我将能够修复导致 NPE 的任何问题，但为此我需要查看我的 Spring 上下文发生了什么。去年，我曾经使用相同的工具组合工作，当时一位同事使用我认为与我现在使用的配置相同的配置对其进行了设置。

我整个早上都在网上搜索，找不到任何有用的东西，只有模糊的建议，即在外部运行 Jetty 并组装战争和部署应用程序，这正是我想要的。

这是我的 pom 的构建配置：

```
<build>
    <pluginManagement>
    <plugins>
            <plugin>
            <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <configuration>
                    <webXml>src\main\webapp\WEB-INF\web.xml</webXml>
                    <warName>template</warName>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>jetty-maven-plugin</artifactId>
                <configuration>
                    <webXml>src\main\webapp\WEB-INF\web.xml</webXml>
                    <webApp>
                        <jettyEnvXml>${jettyEnvXml-file}</jettyEnvXml>
                    </webApp>
                    <contextPath>template</contextPath>
                    <systemProperties>
                        <systemProperty>
                            <name>log4j.configuration</name>
                            <value>file:jetty/log4j-jetty.properties</value>
                        </systemProperty>
                    </systemProperties>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
</build> 
```

这是我对 Jetty 的 log4j 配置：

```
log4j.debug=true
log4j.threshold=ALL

log4j.rootLogger=DEBUG, consoleLogger

log4j.appender.consoleLogger=org.apache.log4j.ConsoleAppender
log4j.appender.consoleLogger.layout=org.apache.log4j.PatternLayout
log4j.appender.consoleLogger.layout.ConversionPattern=%-5p [%t]: %m%n
log4j.appender.consoleLogger.Threshold=TRACE 
```

它可能与我日志开头的这一行有关吗？

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder". 
```

但据我所知，这只是一个可以忽略的 m2e 错误。不过，我的类路径中有 slf4j。

当我在 SpringJPA 模块中使用 HSQL 运行单元测试时，它运行良好，所以我怀疑这是一个 Jetty 问题，或者我的 log4j 配置是假的。

非常感谢任何想法、提示和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:58:50.957

你的类路径中有 slf4j，然后 Jetty 将使用 slf4j。

确保[为 slf4j 设置/配置](http://slf4j.org/manual.html)。

您甚至可以[设置 slf4j 将其日志事件路由到 log4j](http://slf4j.org/legacy.html)以实际写入磁盘或呈现给您的控制台。

# c# - 如何通过 web 方法重定向到带有查询字符串的特殊页面

> ID：14536277
> 
> 赞同：0
> 
> 时间：2013-01-26T10:59:25.223
> 
> 标签：c#, asp.net, ajax

我为登录页面编写了一个 web 方法函数。当用户成功通过服务器身份验证时，我想将他重定向到具有指定 va 的特殊页面

```
[WebMethod]
public static string loginmtd(string username, string password , string chk)
{
    datatable dt=filltable();//for bring data
    if (dt.Rows.Count==1)
    {
        if (chk == "ok")
        {
            HttpCookie cook = new HttpCookie("userauth");
            cook["user"] = usern;
            cook["pass"] = passw;
            HttpContext.Current.Response.Expires = 60000;
            HttpContext.Current.Response.AppendCookie(cook);         
        }

    HttpContext.Current.Response.Redirect("master.aspx?uid=" + username);       
    return result;     
    }
    else 
    { 
        result = "no";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:00:15.657

对于 Web 方法，您不会在服务器端执行此操作。这是客户的责任。

您可以遵循不同的算法：

*   从客户端调用认证方法
    *   获取身份验证令牌并将其用于所有后续请求
*   调用需要身份验证的 Web 方法
    *   如果用户没有身份验证令牌，服务器返回 HTTP 401 Not Authorized
    *   如果用户拥有正确的令牌，服务器执行 Web 请求并返回结果 + HTTP 200 OK

另请查看 HTTP 状态代码[3xx](http://en.wikipedia.org/wiki/URL_redirection#HTTP_status_codes_3xx)，它们负责客户端可能会或可能不会遵循的重定向。

# android - 支持多屏（2560X1600 和 1280x720）

> ID：14536278
> 
> 赞同：1
> 
> 时间：2013-01-26T10:59:36.190
> 
> 标签：android, android-layout

我需要支持 Android（手机和平板电脑）上的所有屏幕尺寸。我有一组分辨率为 1280x720 和 2560x1600 的图像。

**问题**

如何命名`drawable`和`layout`文件夹，以便这些图像针对所有分辨率正确缩放（如果可能）？

我很清楚这个问题经常被问到，但我只能找到一半的答案。我尝试使用名称创建可绘制文件夹：

*   `drawable-xlarge-mdpi`- 适用于 1200X800
*   `drawable-xlarge-xhdpi`- 适用于 2560X1600

对于布局，名称：

*   `layout-xlarge-mdpi`- 适用于 1280x720
*   `layout-xlarge-xhdpi`- 为 25601600

并添加了一个清单条目：

```
 <supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true" /> 
```

但现在，它只适用于平板电脑。在手机上，它总是因错误而失败。

我在这里找到了答案： [用于 qHD 分辨率的 Drawables](https://stackoverflow.com/questions/6489784/drawables-for-qhd-resolution)

据我了解，所有缩放都通过代码发生。但是谁能向我解释如何在代码中以 1280x720 和 2560x1600 的分辨率缩放图像以及放置在哪个文件夹中？

我读过了：

[应用骨架支持多屏](https://stackoverflow.com/questions/12242111/application-skeleton-to-support-multiple-screen)

[Android : 应用程序支持多种平板电脑屏幕分辨率](https://stackoverflow.com/questions/5633792/android-app-support-for-multiple-tablet-screen-resolutions)

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

[Android：支持多屏](https://stackoverflow.com/questions/10380885/android-support-multiple-screens)

还有很多。

# email - 从 erlang 发送邮件

> ID：14536281
> 
> 赞同：2
> 
> 时间：2013-01-26T10:59:51.950
> 
> 标签：email, ubuntu, erlang

我在 ubuntu 10.10 工作，我使用 Erlang。
我的目标是编写代码以便从 Erlang 发送邮件。

这是我的代码：

```
-module(mailer).

-compile(export_all).

send(Destination, Subject, Body) ->
    D = string:join(lists:map( fun(Addr) -> binary_to_list(Addr) end, Destination ), " " ),
    S = io_lib:format("~p",[binary_to_list(Subject)]),
    B = io_lib:format("~p",[binary_to_list(Body)]),
    os:cmd("echo "" ++ B ++ "" | mail -s "" ++ S ++ "" " ++ D). 
```

并执行我尝试的发送功能：

```
Erlang R13B03 (erts-5.7.4) [source] [rq:1] [async-threads:0] [hipe] [kernel-poll:false]

Eshell V5.7.4  (abort with ^G)
1> mailer:send([<<"testFrom@mail.com">>, <<"testto@yahoo.fr">>], <<"hello">>, <<"Hello guys">>..                        
"/bin/sh: mail: not found\n" 
```

如您所见，我有此错误：

```
/bin/sh: mail: not found 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T12:15:08.873

我会推荐在 erlang 中使用现有的 smtp 库。[gen_smtp](https://github.com/Vagabond/gen_smtp)是我过去使用过的。发送电子邮件很简单：

`gen_smtp_client:send({"whatever@test.com", ["andrew@hijacked.us"], "Subject: testing\r\nFrom: Andrew Thompson \r\nTo: Some Dude \r\n\r\nThis is the email body"}, [{relay, "smtp.gmail.com"}, {username, "me@gmail.com"}, {password, "mypassword"}]).`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-06-30T00:18:44.790

1 您可以尝试使用**Sendmail** - Erlang 的[https://en.wikipedia.org/wiki/Sendmail](https://en.wikipedia.org/wiki/Sendmail)，就像这里一样 - [https://github.com/richcarl/sendmail/blob/master/sendmail.erl](https://github.com/richcarl/sendmail/blob/master/sendmail.erl)

2 你可以使用[https://github.com/Vagabond/gen_smtp](https://github.com/Vagabond/gen_smtp)

[3 您可以尝试使用 RFC https://www.rfc-editor.org/rfc/rfc5321](https://www.rfc-editor.org/rfc/rfc5321)实现的简单 SMTP 客户端使用“smtp.gmail”并尝试创建类似：

```
connect() ->
  {ok, Socket} = ssl:connect("smtp.gmail.com", 465, [{active, false}], 1000),
  recv(Socket),
  send(Socket, "HELO localhost"),
  send(Socket, "AUTH LOGIN"),
  send(Socket, binary_to_list(base64:encode("me@gmail.com"))),
  send(Socket, binary_to_list(base64:encode("letmein"))),
  send(Socket, "MAIL FROM: <me@gmail.com>"),
  send(Socket, "RCPT TO: <you@mail.com>"),
  send(Socket, "DATA"),
  send_no_receive(Socket, "From: <me@gmail.com>"),
  send_no_receive(Socket, "To: <you@mail.com>"),
  send_no_receive(Socket, "Date: Tue, 20 Jun 2012 20:34:43 +0000"),
  send_no_receive(Socket, "Subject: Hi!"),
  send_no_receive(Socket, ""),
  send_no_receive(Socket, "This was sent from Erlang. So simple!"),
  send_no_receive(Socket, ""),
  send(Socket, "."),
  send(Socket, "QUIT"),
  ssl:close(Socket). 
```

更多细节 - [http://www.gar1t.com/presentations/2012-07-16-oscon/index.html#slide44](http://www.gar1t.com/presentations/2012-07-16-oscon/index.html#slide44)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T11:29:24.687

您的系统中似乎没有“邮件”命令。请参阅[本教程](http://www.quietearth.us/articles/2006/09/25/Ubuntu-Sending-command-line-mail)，了解如何安装它（或您自己的谷歌）。

# iphone - 弹回视图控制器时如何更改单元格的背景图像？

> ID：14536282
> 
> 赞同：0
> 
> 时间：2013-01-26T10:59:55.240
> 
> 标签：iphone, ios, ipad

我有一个应用程序，当用户选择每一行时，我正在更改单元格背景图像。像这样

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    for (int i = 0; i < [tableView numberOfRowsInSection:0]; i++) {

        UITableViewCell *cell = [tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:0]];

        cell.backgroundColor =[UIColor colorWithPatternImage:[UIImage imageNamed:@"white_cell.png"]]; 

    } 
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    cell.backgroundColor =[UIColor colorWithPatternImage:[UIImage imageNamed:@"white_cell_check.png"]];
  if (indexPath != nil) {
        [tableView deselectRowAtIndexPath:indexPath animated:YES];
   }

} 
```

`它工作正常。我的问题是从详细视图当我弹回前一个视图时，即到 tableview 控制器，tableview 中更改的背景图像保持不变。但我需要它是正常的。任何人都可以帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:09:19.183

当您的控制器重新出现时，只需重新加载表格，它将重新加载数据，并且`didSelectRowAtIndexPath`不会被调用，因此您的单元格将具有初始背景。

```
- (void)viewWillAppear:(animated){
   [super viewWillAppear:animated];
   [instanceToYourTableView reloadData];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T11:16:31.673

在 cellForRowAtIndexPath 中，您应该恢复 cellBackground，并在 viewWillAppear 上调用 reloadData

# c - C：将（文本）文件读入数组，看不出有什么问题？

> ID：14536284
> 
> 赞同：1
> 
> 时间：2013-01-26T11:00:12.673
> 
> 标签：c, arrays, file, file-read

第一次在这里发帖。我查看了其他一些人的方法来做到这一点，其中一种方法与我试图做的几乎完全相同。但是，它对我不起作用？

```
#include<stdio.h>
int main()
{

FILE *file;
char buffer[15];
char *text[12];

file = fopen("Text.txt", "r");

if(!file) {
    printf("Failed");
    return 1;
}

int count = 0;
while(fgets(buffer,sizeof buffer, file) != NULL) {
    printf("%s", buffer);
    text[count] = buffer;
    count++;
}   
printf("\n");
for (count=0;count<10;count++) {
    printf("%s\n", text[count]);
}

fclose(file);

return 0; 
```

}

现在在另一个网站上（在寻找解决方案或帮助时，我发现了这个[http://www.daniweb.com/software-development/c/threads/316766/storing-string-in-a-array-reading-from-text -文件](http://www.daniweb.com/software-development/c/threads/316766/storing-string-in-a-array-reading-from-text-file)

这个人的做法和我一样（除了他们正在阅读的内容有明显的细微差别等）。

我的文本文件内容为： The Quick Brown Fox Jumps Over The Lazy Dog (all on their own line)。

基本上我想逐行读取文件并将每一行保存在数组的下一个空间中。

在我使用行 printf("%s", buffer); 的代码中 它在控制台窗口中打印出每一行的每个单词。但是，当我使用 for 循环打印出数组的内容时，它只是为数组中的每个空间打印出“狗，狗，狗……”。

有人可以在这里帮助我吗？我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:02:57.187

`buffer`总是相同的地址，因此数组的所有元素都包含`text`相同的指针（或未初始化）。

您应该考虑（假设是 POSIX 系统）：

*   通过将它们归零来初始化所有数组（并初始化所有指向 的指针`NULL`），例如`memset(buffer, 0, sizeof(buffer));`（对于您的行缓冲区，也在循环结束时将其清除）。

*   `strdup`用ie代码复制读取的字符串

    ```
    text[count] = strdup(buffer); 
    ```

    并且在适当的时候不要忘记`free`。实际上，您应该通过返回指针来检查是否`strdup`失败。`NULL`

*   使用[getline](http://www.kernel.org/doc/man-pages/online/pages/man3/getline.3.html)读取一行（不要忘记初始化指针，也许是指向`NULL`并最终指向`free`它）。

*   `printf`用换行符`\n`或 call结束格式化字符串`fflush`，特别是在任何输入之前。

*   使用错误代码`errno`显示更好的错误消息。或者`perror`像这样打电话

    ```
    file = fopen("Text.txt", "r");
    if (!file) {
      perror("fopen Text.txt failed");
      exit (EXIT_FAILURE);
    } 
    ```

养成使用所有警告和调试信息进行编译的习惯（例如`gcc -Wall -g`在 Linux 上）并学习如何使用调试器（例如`gdb`），特别是尝试逐行运行您的程序。

^(您可能对编写严格（非 POSIX）但简单的 C2011 标准感兴趣。`strdup`但是，您使用许多 POSIX 函数（如等...）的自由度要小得多。我将无聊的练习留给读者编写严格遵守 C99 的代码（请记住，C99 甚至不知道目录，并假设几乎是“平面”文件系统），因为我是 Posix 和 Linux 粉丝并且不关心非 Posix 系统（特别是我不在乎，自 1990 年以来就没有使用 Windows 或 Microsoft 系统）。)

另外，尝试阅读一些自由软件项目的代码（例如来自[freecode](http://freecode.com/)）。你会学到很多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T11:03:11.627

您还没有为`text`. 并且您必须复制 的值，`buffer`因为它在每次迭代中都会发生变化。就像是：

```
while(fgets(buffer,sizeof buffer, file) != NULL) {
    printf("%s", buffer);
    text[count] = malloc(strlen(buffer) + 1);
    strcpy(text[count], buffer);
    count++;
} 
```

另外，检查 malloc 的返回值是否分配失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T11:05:35.263

代码中有两个问题：

1.  在 while 循环中，您将相同的指针 ( `buffer`) 一遍又一遍地存储到指针数组中，并且您也在覆盖缓冲区内容。您可能应该将缓冲区指针推进每个读取字符串的长度。

2.  在 for 循环中，您正在破坏实际的行数并可能取消引用未初始化的指针。不要那样做。

# scala - 如何将隐式 Action val 覆盖到 Play 框架 2 中

> ID：14536290
> 
> 赞同：2
> 
> 时间：2013-01-26T11:00:55.940
> 
> 标签：scala, playframework, playframework-2.0

我需要在它传递给模板之前覆盖隐式值，但不知道如何。像这样的东西：

```
/* This Session User and City setup */

case class MySession(user: Option[User] = None, city: Option[City] = None) {}

/* Trait for Controllers */

trait CMySession {
    implicit def mySession[A](implicit request: Request[A]) : MySession = {
        val userOpt = /*... get from session user here ...*/
        val cityOpt = /*... get from session city here ...*/
        MySession(user = userOpt, city = cityOpt)
    }
}

/* Controller */

def showCity(city_name: String) = Action { implicit request =>
    // Get city
    val cityOpt = { for (c <- mySession.city) yield Some(c) } getOrElse Cities.getByName(city_name)
    // Check if NO City in session, but we get it from request
    if (mySession.city != cityOpt) {
       // NEED some how override implicited mySession value here for template?!
    }
    Ok(views.html.showCity())
}} 
```

感谢您提供任何线索！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T19:48:23.070

Scala 中隐式值的好处在于，您可以通过在范围内声明自己的隐式值（在您的情况下在 if 块中）或通过显式传递它（在您的情况下为模板，例如`views.html.showCity(session = myOtherSession)`）来覆盖它们。

# java - 在java中创建一个显示平均值和标准差的图表

> ID：14536292
> 
> 赞同：2
> 
> 时间：2013-01-26T11:01:01.643
> 
> 标签：java, charts, jfreechart, mean, standard-deviation

我是 Jfreechart 和 swing 的新手，我试图创建一个显示均值（作为折线图）和标准差（作为胡须）的图表，但到目前为止失败了。

我试图使图表看起来类似于：

![图片](../Images/35ea2242e6691bc800298ba9f36127db.png)

我尝试使用具有多个数据集的图形，但未能使渲染器（xyrenderer）显示标准偏差的晶须。

有一个更好的方法吗？也许其他一些免费包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T11:14:06.137

您可能正在寻找[`XYBoxAndWhiskerRenderer`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/renderer/xy/XYBoxAndWhiskerRenderer.html)使用`BoxAndWhiskerXYDataset`; 相关`BoxAndWhiskerRenderer`说明[here](https://stackoverflow.com/a/6849654/230513)。

![图片](../Images/3991b36a37cf39a232b4b0e5de2a31b8.png)

# html - 不支持“video/mp4”的指定“type”属性

> ID：14536298
> 
> 赞同：11
> 
> 时间：2013-01-26T11:01:58.153
> 
> 标签：html, video, html5-video, mediaelement.js, webm

我在我的 .htacces 上使用 mediaelement js.. 我有这些..

```
AddType video/mp4  mp4 m4v
AddType audio/mp4  m4a
AddType video/ogg  ogv
AddType audio/ogg  ogg oga
AddType video/webm webm 
```

在我的 index.html 上我有这个`<head>`

```
<script src="/js/jquery.js"></script>
<script src="/js/mediaelement-and-player.min.js"></script>
<link rel="stylesheet" href="/js/mediaelementplayer.css" /> 
```

代码是

```
<video width="600" height="450" preload="none" autoplay preload="auto" >
    <!-- MP4 for Safari, IE9, iPhone, iPad, Android, and Windows Phone 7 -->
    <source type="video/mp4" src="videos/Sequence1.mp4"/>
    <!-- WebM/VP8 for Firefox4, Opera, and Chrome -->
    <source type="video/webm" src="videos/Sequence1.webm" />
    <!-- Ogg/Vorbis for older Firefox and Opera versions -->
   <source type="video/ogg" src="videos/Sequence1.ogv" />
    <!-- Flash fallback for non-HTML5 browsers without JavaScript -->
    <object width="320" height="240" type="application/x-shockwave-flash" data="flashmediaelement.swf">
        <param name="movie" value="flashmediaelement.swf" />
        <param name="flashvars" value="controls=&file=videos/Sequence1.mp4" />     
    </object>
</video> 
```

不幸的是..它没有在mozilla浏览器上播放..它继续加载但不播放..并在mozilla上使用ctrl+shift+k ..我发现了这些错误。

-- [18:47:12.942] 不支持“video/mp4”的指定“type”属性。媒体资源视频/Sequence1.mp4 加载失败。@http: [//thesuperheroblueprint.com/](http://thesuperheroblueprint.com/)

请帮帮我..我真的需要解决这个问题.. [这是网站。](http://thesuperheroblueprint.com/).

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-26T11:51:40.190

Firefox 不支持 MP4 类型！它仅支持 Safari 3.0+、Google Chrome 5.0+ 和 IE 9.0+！对于 Firefox，您需要 .ogg 文件或 .webm 视频文件作为源！这是一张包含 HTML 5 中所有支持的视频格式的图片： ![显示各种浏览器支持的视频格式的表格](../Images/86530e2436d9a1147a728bed6d01b542.png)

对于音频支持，请参见这张图片：

![显示各种浏览器支持的音频格式的表格](../Images/36b9cb19b1016d84e53683fc5a26e0e8.png)

# **更新：**

Firefox 现在支持 MP4 H.264（AAC 或 MP3） [https://developer.mozilla.org/en-US/docs/Web/HTML/Supported_media_formats](https://developer.mozilla.org/en-US/docs/Web/HTML/Supported_media_formats)

> 注意：使用高配置编码的 MP4 不能在低端硬件上运行，例如低端 Firefox OS 手机。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T13:24:35.667

Firefox 给出错误是因为它不支持`video/mp4`，这没什么好担心的，是其他原因导致了问题。您可以从删除两个`preload`属性之一开始，尽管我认为这也不是主要问题。

如果您[直接在 Firefox 中](http://thesuperheroblueprint.com/videos/Sequence1.webm)[加载`webm`](http://thesuperheroblueprint.com/videos/Sequence1.webm)视频，则大约需要 30 秒，加载后播放点就在视频的末尾。如果您直接[加载`ogv`文件，](http://thesuperheroblueprint.com/videos/Sequence1.ogv)它似乎可以正常播放。因此，我会得出结论，您的`webm`文件编码有问题，我会尝试使用一些不同的选项再次对其进行编码。

附带说明一下，如果您无法弄清楚编码是怎么回事，那么视频中实际上没有任何内容需要它成为视频。它基本上是幻灯片的视频，您最好以[这种方式实现它](http://code.google.com/p/html5slides/)，它肯定会减少所需的带宽。

# php - 如何正确解析 SQL 查询的数组

> ID：14536303
> 
> 赞同：1
> 
> 时间：2013-01-26T11:02:35.710
> 
> 标签：php, mysql

当你需要做这样的事情时：

```
SELECT * FROM userinfo WHERE id in (18,2,6,4,5) 
```

id 数组来自另一个查询，例如：

```
$ids = $conn->fetchAll('SELECT origin from action WHERE url = "'.$url.'" AND SUBSTRING(origin,1,3)<>"pct" GROUP BY origin'); 
```

如果我需要解析数组以便为查询 ID 提供正确的格式，请执行以下操作：

```
 $norm_ids = '(';
    foreach ($ids as $ids) {
        $norm_ids .= $ids['origin'] .',';
    }
    $norm_ids = substr_replace($norm_ids ,"",-1) .')'; 
```

输出的 id 如下：`(id1,id2,id3,id.......)`，所以我会：`FROM userinfo WHERE id in ". $norm_ids`;

但对我来说似乎很难看，有没有办法更好地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T11:07:04.040

你可以这样做：

```
$idStr = rtrim(str_repeat('?,', count($ids), ',');
$query = 'SELECT * FROM userinfo WHERE id in (' . $idStr . ')'; 
```

然后使用[`prepare()`](http://php.net/manual/en/pdo.prepare.php)：

```
$conn = $db->prepare($query);
$conn->execute($ids);
$res = $conn->fetchAll(...); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T11:07:23.307

```
SELECT * FROM user_info WHERE id IN (SELECT origin from action ......) .... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T11:09:16.500

您需要单独的 id 还是可以将它们组合成 1 个查询？

也许是这样的：

```
SELECT * FROM userinfo WHERE id in (SELECT origin from action WHERE url = "'.$url.'" AND SUBSTRING(origin,1,3)<>"pct" GROUP BY origin'); 
```

这样你就可以让 sql server 完成工作了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T11:48:54.387

当我遇到这种情况时，我会使用 trim

```
$norm_ids_str = '';
foreach ($ids as $ids) {
    $norm_ids_str .= $ids['origin'] .',';
}
$norm_ids = '(' . trim($norm_ids_str, ',') . ')'; 
```

# wpf - 在使用 ViewModel 优先方法和组合时如何利用设计器

> ID：14536306
> 
> 赞同：1
> 
> 时间：2013-01-26T11:02:53.600
> 
> 标签：wpf, mvvm, caliburn.micro

我有一些 xaml，例如：

```
<ContentControl x:Name="MyContent" /> 
```

然后在我的 ViewModel 上当然有一个引用 ViewModel 的 MyContent 属性。然后 Caliburn 发挥它的作曲魔力。

这很棒，但在设计时我看不到组合。我看到“大多数”人对视图模型优先方法赞不绝口，但我有点困惑，在这样做时是否有一种方法可以利用设计器，我还没有意识到，或者所有的 vm 第一人只是生活事实上，他们必须运行应用程序才能看到它会是什么样子？

# javascript - JavaScript Switch 语句：一次检查 2 个案例

> ID：14536307
> 
> 赞同：1
> 
> 时间：2013-01-26T11:02:55.673
> 
> 标签：javascript, if-statement, switch-statement

我对 switch 语句有点困惑，我的主页需要它。我将很快解释：我的 html 代码中有两组单选按钮，每组由三个按钮组成。根据选择的按钮，将显示一个图像（意味着一组三个不同的图像，另一组三个不同的图像）。一次也显示两个图像。到目前为止，这适用于我的代码。接下来我想做的是根据选择的按钮组合显示第三张图像。到目前为止，这是我的代码

```
 <html>
<head>
<title>Radio-Buttons</title>
</head>
<body>

<h1>Testing</h1>

<script language='JavaScript' type='text/javascript'>

    function check_value(fieldvalue)
    {    

        switch(fieldvalue)
        {
            case 1:

                document.getElementById("imagedest").innerHTML = "<img src='image1.jpg'>";

                    break;

            case 2:

                document.getElementById("imagedest").innerHTML = "<img src='image2.png'>"; 

                    break;

            case 3:

                document.getElementById("imagedest").innerHTML = "<img src='image3.jpg'>"; 

                    break;
        }

   }
    function check_other_value(fieldvalue)
    {   

        switch(fieldvalue)
        {
            case 1:

                document.getElementById("imagedest2").innerHTML = "<img src='image4.jpg'>";

            break;

            case 2:

                document.getElementById("imagedest2").innerHTML = "<img src='image5.png'>";

        break;

            case 3:

                document.getElementById("imagedest3").innerHTML = "<img src='image6.jpg'>";

    }

    }

</script>

<form name='test'>
    <input type="radio" name="field" value="one" onclick='check_value(1)'>one 
    <input type="radio" name="field" value="two" onclick='check_value(2)'>two 
    <input type="radio" name="field" value="three" onclick='check_value(3)'>three 
</form>

<div id='imagedest'>
</div>

<form name='tests'>
    <input type="radio" name="fields" value="one" onclick='check_other_value(1)'>one 
    <input type="radio" name="fields" value="two" onclick='check_other_value(2)'>two 
    <input type="radio" name="fields" value="three" onclick='check_other_value(3)'>three 
</form>

<div id='imagedest2'>
</div>

</body>
</html> 
```

此代码适用于我之前描述的内容。我想过使用“if”语句来检查选择的第一个案例，但据我了解，在“中断”之后，函数“擦除”所有内容并从 0 开始。

任何人都可以给我一个关于如何使它工作的想法吗？

谢谢你，乔迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:10:12.520

您必须将这两个值都传递给第三个函数，并在那里进行您需要做的任何检查。

```
function check_third_value( field1, field2 )
{
    if( field1 == 1 && field2 == 2 ) {
        // do something
    } else if( field1 == 2 && field2 == 2 ) {
        // do something else
    } else if...
} 
```

传递值的方式取决于触发更改的方式。您还可以使用 获取值`document.getElementById("fieldID").value`，具体取决于您的 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T11:20:45.643

叫我简单，但你为什么不这样做：

```
function updateImage(value_1, value_2) {
    document.getElementById("image_1").innerHTML = '<img src="img_1_' + value_1 + 'jpg">';
    document.getElementById("image_2").innerHTML = '<img src="img_2_' + value_2 + 'jpg">';
    document.getElementById("image_3").innerHTML = '<img src="img_3_' + value_1 + '_' + value_2 + 'jpg">';
} 
```

# android - android dalvik内存限制？内存不足异常

> ID：14536317
> 
> 赞同：0
> 
> 时间：2013-01-26T11:04:05.380
> 
> 标签：android, android-emulator, opengl-es-2.0, out-of-memory

加载 5M 大小的 3D OBJ 模型时内存不足。调试显示 dalvik 在模拟器或设备上具有 50M 内存限制。我不明白这是为什么。

```
mIndicesInt = ByteBuffer.allocateDirect(indices.length * INT_SIZE_BYTES).order(ByteOrder.nativeOrder()).asIntBuffer();
mIndicesInt.put(indices).position(0); 
```

我什至将 AVD RAM 增加到 2048M 并将堆增加到 1024M，它没有帮助。它总是以相同的数字停止：

> D/setIndices(2270)：内存：Pss=67.88 MB，私有=66.09 MB，共享=13.30 MB D/setIndices(2270)：maxMem=50331648 D/setIndices(2270)：totalMem=50208736 D/setIndices(2270)：空闲内存=1963736

OBJ 模型包含 20 多个对象。我删除了几个对象，然后内存不足问题消失了，所以这是每个进程的内存硬限制问题？

有什么处理建议吗？增加 RAM 和堆大小的 AVD 选项也没有效果，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:07:25.700

5M 的顶点数据对于移动环境来说是相当多的。如果您还加载纹理，请考虑仅加载压缩纹理。您还可以在将某些资源移至 GPU 驱动程序后释放它们。我会离线准备您的顶点数据，并且只在运行时加载所需的数据。另一种选择是计算部分数据，或直接在顶点/片段着色器处扩展它（例如在 GPU 端生成双切线）。

# android - 接听或取消电话后如何在 BroadcastReceiver 中停止处理程序？

> ID：14536321
> 
> 赞同：0
> 
> 时间：2013-01-26T11:04:57.540
> 
> 标签：android, broadcastreceiver, handler, flashlight, blink

我正在尝试创建简单的 Android 应用程序，以在接到电话时模拟相机手电筒闪烁。如果用户接听或取消通话，我想停止手电筒闪烁。我正在使用 Handler 和 Runnable 来模拟闪烁，但问题是在用户接听或取消呼叫后我无法停止处理程序。我的源代码：

```
public class CallReceiver extends BroadcastReceiver 
{
    private static Camera cam = null;
    private Handler handler = new Handler();

    @Override
    public void onReceive(Context context, Intent intent) 
    {
        //device is ringing
        if (intent.getStringExtra(TelephonyManager.EXTRA_STATE).equals(TelephonyManager.EXTRA_STATE_RINGING))
        {
            if (context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA_FLASH)) 
            {
                startFlashBlink();
            }
        }
        //call was answered or canceled
        else if (intent.getStringExtra(TelephonyManager.EXTRA_STATE).equals(TelephonyManager.EXTRA_STATE_IDLE) 
            || intent.getStringExtra(TelephonyManager.EXTRA_STATE).equals(TelephonyManager.EXTRA_STATE_OFFHOOK))
        {
            stopFlashBlink();
        }
    }

    //for simulating flash blink
    Runnable flashBlinkRunnable = new Runnable()
    {
        public void run() 
        {   
            cam = Camera.open();
            Parameters p = cam.getParameters();
            p.setFlashMode(Parameters.FLASH_MODE_TORCH);
            cam.setParameters(p);
            cam.startPreview();
            cam.stopPreview();
            cam.release();
            cam = null;
            handler.post(flashBlinkRunnable);
        }       
    };

    //start flash blink light
    public void startFlashBlink()
    {
        flashBlinkRunnable.run();
    }

    //stop flash blink light
    public void stopFlashBlink()
    {
        handler.removeCallbacks(flashBlinkRunnable);
        if (cam != null)
        {
            cam.stopPreview();
            cam.release();
            cam = null;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:47:35.180

它不会像这样工作。您的代码存在严重缺陷。问题是你不能用`BroadcastReceiver`这种方式。从以下文档`BroadcastReceiver`：

> BroadcastReceiver 对象仅在调用 onReceive(Context, Intent) 期间有效。一旦您的代码从此函数返回，系统就会认为该对象已完成且不再处于活动状态。

另请注意文档中的应用程序基础知识：

> 然而，更常见的是，广播接收器只是其他组件的“网关”，旨在完成非常少量的工作。例如，它可能会启动一项服务以根据事件执行某些工作。

因此，您的广播接收器应该启动一项服务并告诉它开始或停止闪烁，而不是在广播接收器本身中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:06:33.397

广播接收器是一种告诉操作系统打算做某事的方法，然后操作系统会找到一个应用程序来解决该意图。在您的情况下，您的所有代码都在广播接收器中。尝试创建一个服务来解决您的问题，而不是尝试在您的广播接收器中解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T19:55:26.820

问题通过服务解决。

```
public class FlashBlinkService extends Service 
{
    private static Camera cam = null;
    private Handler handler = new Handler();

    @Override
    public IBinder onBind(Intent intent) 
    {
        return null;
    }

    @Override
    public void onCreate()
    {
        super.onCreate();
        startFlashBlink();      
    }

    //for simulating flash blink
    Runnable flashBlinkRunnable = new Runnable()
    {
        public void run() 
        {   
            cam = Camera.open();
            Parameters p = cam.getParameters();
            p.setFlashMode(Parameters.FLASH_MODE_TORCH);
            cam.setParameters(p);
            cam.startPreview();
            cam.stopPreview();
            cam.release();
            cam = null;
            handler.post(flashBlinkRunnable);
        }       
    };

    //start flash blink light
    public void startFlashBlink()
    {
        flashBlinkRunnable.run();
    }

    //stop flash blink light
    public void stopFlashBlink()
    {
        handler.removeCallbacks(flashBlinkRunnable);
        stopCamera(cam);
    }

    //stop camera
    private void stopCamera(Camera cam)
    {
        if (cam != null)
        {
            cam.stopPreview();
            cam.release();
            cam = null;
        }
    }

    @Override
    public void onDestroy()
    {
        super.onDestroy();
        handler.removeCallbacks(flashBlinkRunnable);
        stopCamera(cam);
    }
}

public class CallReceiver extends BroadcastReceiver 
{
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        //device is ringing
        if (intent.getStringExtra(TelephonyManager.EXTRA_STATE).equals(TelephonyManager.EXTRA_STATE_RINGING))
        {
            if (context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA_FLASH)) 
            {
                startFlashBlinkService(context);
            }
        }
        //call was answered or canceled
        else if (intent.getStringExtra(TelephonyManager.EXTRA_STATE).equals(TelephonyManager.EXTRA_STATE_IDLE) 
                || intent.getStringExtra(TelephonyManager.EXTRA_STATE).equals(TelephonyManager.EXTRA_STATE_OFFHOOK))
        {
            stopFlashBlinkService(context);
        }
    }

    //start flash blink light
    public void startFlashBlinkService(Context context)
    {
        if (!isBlinkServiceRunning(context))
        {
            Intent iService = new Intent(context, FlashBlinkService.class);
            context.startService(iService);
        }
    }

    //stop flash blink light
    public void stopFlashBlinkService(Context context)
    {
        if (isBlinkServiceRunning(context))
        {
            Intent iService = new Intent(context, FlashBlinkService.class);
            context.stopService(iService);
        }
    }

    //check if the blink service is running
    public boolean isBlinkServiceRunning(Context context)
    {
        ActivityManager manager = (ActivityManager)context.getSystemService(Context.ACTIVITY_SERVICE);
        for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE))
        {
            if ("path.to.package.FlashBlinkService".equals(service.service.getClassName()))
            {
                return true;
            }
        }
        return false;
    }
} 
```

（：

# c++ - 错误 C2244 无法将函数定义与现有声明匹配

> ID：14536322
> 
> 赞同：6
> 
> 时间：2013-01-26T11:05:05.423
> 
> 标签：c++, templates

我正在尝试在 C++、Visual Studio 2010 中创建一个简单的模板列表，我得到了：错误 C2244 无法将函数定义与现有声明匹配。

我试图将其更改为“typename”，但没有帮助。

它是一个具有非常基本功能（Ctor、Dtor、Add、Delete）的基本模板列表。

请帮忙。

```
#ifndef LIST_H_
#define LIST_H_

template <typename T>
class Node
{
    T* m_data;
    Node* next;
public:
    Node(T*, Node<T>*);
    ~Node();
    void Delete (Node<T>* head);
};

template <typename T>
Node::Node(T* n, Node<T>* head)
{ 
    this->m_data = n;
    this->next=head;
}

template <typename T>
void Node::Delete(Node<T>* head)
{
    while(head)
    {
        delete(head->m_data);
        //head->m_data->~data();
        head=head->next;
    }
}

template <typename T>
class List
{
    Node<T*> head;
public:
    List();
    ~List();
    void addInHead (T*);
};

template <typename T>
void List :: addInHead (T* dat)
{
    head = new Node<T*> (dat,head);
}

template <typename T>
List::List()
{
    head = NULL;
}

template <typename T>
List :: ~List()
{
    head->Delete(head);
}

  #endif 
```

你有上面的代码。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-26T11:13:37.000

您在模板主体之外实现模板函数的语法不正确。它应该是这样的：

```
template <typename T>
Node<T>::Node(T* n, Node<T>* head)
//  ^^^----- You need to add <T> here
{ 
    this->m_data = n;
    this->next=head;
} 
```

您还缺少析构函数的定义`Node`：

```
template <typename T>
Node<T>::~Node()
{
    ... // Clean-up code 
} 
```

[链接到ideone。](http://ideone.com/BpDLtS)

# php - 来自数据库的多个结果

> ID：14536324
> 
> 赞同：0
> 
> 时间：2013-01-26T11:05:51.990
> 
> 标签：php, mysql, arrays

我想我会在这里冒第二个问题的风险，因为第一个问题回答得非常出色！

很抱歉发了很长的帖子！

简而言之，我正在创建一个包含 10 个问题的测验 - 多项选择 ABCD - 然后是多个答案 - 所以问题一个答案可能是 AB D。

我最初使用 $_POST 设置它并让它工作，但我决定我真的很想学习如何将结果放入数据库中。

我设法将结果插入到字段中，例如：

```
 --------------------
    Question1 | A, B, C
    Question2 | A, C, D
    -------------------- 
```

所以，我开始检索结果——我必须为此努力，但我想了解如何改进它。

```
 $query = "SELECT * FROM users WHERE `Username` = '$testing'"; 
    $result = mysql_query($query); 

    while ($row = mysql_fetch_array($result)) 
    { 
    $questionone[] = $row['question1'];        
    }          

    foreach ($questionone as $v) {
    }

    $mycount = 0;
    $questiononereturn = array($v);
    if(empty($questiononereturn))
    {
    echo("Missed. <br/><br/>");
    }
    else
    {
    $N = count($questiononereturn);
    echo "<div><strong>Question 1:</strong> You selected $N answers: ";
    for($i=0; $i < $N; $i++)
    {
    echo($questiononereturn[$i] . " ");
    }
    }
    sort($questiononereturn);
    if($questiononereturn == array('A,B'))
    {
    echo '<br/> <b>Correct answer!</b> <br/></div>';
    $mycount++;
    } 
```

我试图在谷歌上寻求建议，并经历了很多 Stackoverflow 问题/答案 - 但我不确定我需要搜索什么术语。

所以，我的问题是：

我需要检索另外 9 个结果，我可以做些什么来改进我所做的事情？我所做的有什么缺陷吗？- 我只是想学习。

（我知道它不是 PDO - 我想尽快开始）

谢谢

安迪

# django - FilterSpec 在 Django1.4 中不可用

> ID：14536329
> 
> 赞同：0
> 
> 时间：2013-01-26T11:06:31.967
> 
> 标签：django, reporting-services

有人可以帮我吗。我正在开发一个 django 应用程序，我需要做一些报告。但我想为报告创建一个管理员后端，管理员可以在其中查看模型以及过滤器等内容。我不想使用 django admin，我想要另一种界面。我想为自己作为开发人员保留 dajango 管理员，并为其他管理员创建另一个界面。你能推荐任何我可以查看的好应用程序吗？是否有支持版本 >=1.4 的 django 报告应用程序。1.4 没有过滤器规格，所以我很难找到合适的应用程序。我正在使用 geraldo，但它似乎只用于 pdf 报告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:41:28.267

我以前使用过 Geraldo Reports，但我没有追求它，因为你会感到沮丧。它真的很好，但它没有维护。所以我搜索了另一个应用程序，但我什么也没看到。最后，我创建了自己的报告。为什么不自己创建其他管理员。

# mysql - MySql，传递数据读取器，关闭连接

> ID：14536335
> 
> 赞同：0
> 
> 时间：2013-01-26T11:07:08.370
> 
> 标签：mysql, vb.net, mysqldatareader

我知道有人问过这个问题，但我真的找不到最好的解释。我有一个 MySql DataReader 函数，它应该从数据库中获取一行并“按原样”返回它，因为我想在其他地方处理数据

```
Private Function GetRow(ByVal sql As String) As MySqlDataReader

    Dim cmd As New MySqlCommand

    Try

        cmd.Connection = New MySqlConnection() With {.ConnectionString = connString}
        cmd.CommandText = sql
        cmd.CommandType = CommandType.Text

        cmd.Connection.Open()

        Using dr As MySqlDataReader = cmd.ExecuteReader(CommandBehavior.CloseConnection)

            If dr.HasRows Then

                dr.Read()

            End If

            Return dr

        End Using

    Catch ex As MySqlException

        MsgBox(("Error #" & ex.Number & " while reading from DB has occurred: ") + vbCrLf + ex.Message, MsgBoxStyle.Exclamation + MsgBoxStyle.OkOnly, "Error!")

    Finally

        cmd.Connection.Close()
        If cmd IsNot Nothing Then cmd.Dispose()

    End Try

    Return Nothing

End Function 
```

每次我使用该函数时，连接都保持打开状态（池已禁用），因此我开始对 MySqlDataReader 使用“使用”语句，以及“最终”处理连接本身。但是现在该函数总是返回 DR 什么都没有，可能是“使用”处理 Read() 结果。

现在的问题是如何“按原样”传递 Read() 整行？如果我可以使用 TableAdapter 并为 1 行预期结果传递 DataTable，我为什么还要使用 Reader（如果如此复杂）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:08:44.847

请关闭，我在这里找到了一个优雅的解决方案，使用字典作为返回 [将 DataReader 的结果存储到 VB.NET 中的数组中](https://stackoverflow.com/questions/11978127/storing-results-of-a-datareader-into-an-array-in-vb-net)

出色的，

# objective-c - Restkit 0.20 NSDictionary 返回而不是映射对象

> ID：14536342
> 
> 赞同：1
> 
> 时间：2013-01-26T11:08:16.330
> 
> 标签：objective-c, restkit

我正在使用restkit 0.20，从GET返回的对象不是Category类型而是NSDictionary？

这是我的模型

```
 ```
#import <Foundation/Foundation.h>

@interface Category : NSObject 

@property (nonatomic, copy) NSString* identifier;
@property (nonatomic, copy) NSString* description;
@property (nonatomic, copy) NSString* name;

@end 
``` json

```
 [
      {
        "category": {
          "_id": "50fc579d81d79d4db0000001",
          "name": "Category 0"
        }
      },
      {
        "category": {
          "_id": "50fc579d81d79d4db0000006",
          "name": "Category 0"
        }
      } 
    ] 
```

映射

```

```
``RKObjectMapping *categoryMapping = [RKObjectMapping requestMapping];
[categoryMapping addAttributeMappingsFromDictionary:@{@"category._id": @"identifier", @"category.name": @"name"}];
[objectManager addRequestDescriptor: [RKRequestDescriptor requestDescriptorWithMapping:categoryMapping objectClass:[Category class] rootKeyPath:nil]];
RKResponseDescriptor *categoryResponseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:categoryMapping pathPattern:@"/categories" keyPath:nil statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];
[objectManager addResponseDescriptor:categoryResponseDescriptor];`` 
```

```

``如果我调用 [RKObjectManager.sharedManager getObjectsAtPath:@"/categories"，我会返回一个数组:) 但对象不是类别类型，而是 NSDictionary。`` ````
    NSLog(@"%@",[猫类]);
    2013-01-26 12:01:17.247 应用程序[18943:c07] __NSDictionaryM

```

如果我调用 dat.name，应用程序将崩溃

* * *

## 回答 #1

> 赞同：0
> 
>             
> 
> 时间：2013-01-26T11:42:19.960

是的，返回的对象总是字典，你应该将它们映射到一个类：  

```
Category* c= [Category new];
c.identifier= dict[@"_id"];
c.name= dict[@"name"]; 
```

每个字典都取自你得到的数组。

* * *

## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2013-01-26T14:17:47.277

哎呀

```
 RKObjectMapping* catMapping = [RKObjectMapping requestMapping]; 
```

我现在正在使用

```
 RKObjectMapping* catMapping = [RKObjectMapping mappingForClass:[Category class]]; 
```

我又滚了:)` 
```

# android - DownloadManager 工作时如何阻止程序？

> ID：14536347
> 
> 赞同：1
> 
> 时间：2013-01-26T11:08:50.747
> 
> 标签：android, android-download-manager

我制作了一个下载一些文件然后播放它们的程序。如果文件尚未下载，程序将无法播放文件。我阻止了按钮播放。我如何知道何时下载了文件以解锁按钮？

```
private DownloadManager manager;

public void downloadFiles() {
    ArrayList<HashMap<String, String>> pl = getPlayList();
    ArrayList<String> fileListForDownload = xm.getDownloadList(pl);
    for (int i=0; i<fileListForDownload.size(); i++) {
        Log.i("tag", fileListForDownload.get(i));
        String url = BASE_URL + fileListForDownload.get(i);
        DownloadManager.Request request = new DownloadManager.Request(Uri.parse(url));
        request.setDescription(fileListForDownload.get(i));
        request.setTitle(fileListForDownload.get(i));
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            request.allowScanningByMediaScanner();
            request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
        }
        request.setDestinationInExternalPublicDir(DIRECTORY_FOR_MUSIC, fileListForDownload.get(i));
        // get download service and enqueue file
        try {
            downloadReference = manager.enqueue(request);
        }
        catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T11:18:34.717

从 Downloadnamager 下载完整的 Action 触发时，您需要注册一个`BroadcastReceiver`for Action 和 enable 按钮：`DownloadManager.ACTION_DOWNLOAD_COMPLETE`

```
findViewById(R.id.play).setEnabled(false); //<< disable button here
DownloadManager mgr=(DownloadManager)getSystemService(DOWNLOAD_SERVICE);

registerReceiver(onComplete,
              new IntentFilter(DownloadManager.ACTION_DOWNLOAD_COMPLETE));

 BroadcastReceiver onComplete=new BroadcastReceiver() {
    public void onReceive(Context ctxt, Intent intent) {
      findViewById(R.id.play).setEnabled(true);  //<< enable button here
    }
  }; 
```

下载完成后，您可以看到启用/禁用按钮的此示例：

[https://github.com/commonsguy/cw-android/blob/master/Internet/Download/src/com/commonsware/android/download/DownloadDemo.java](https://github.com/commonsguy/cw-android/blob/master/Internet/Download/src/com/commonsware/android/download/DownloadDemo.java)

# websphere - 在 websphere 应用程序服务器中为 war 文件获取多个上下文根的最佳方法是什么？

> ID：14536355
> 
> 赞同：0
> 
> 时间：2013-01-26T11:09:38.950
> 
> 标签：websphere, war

重命名war文件是否是在Web Sphere应用程序服务器中获取各种上下文根的明智解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T16:34:42.143

要在多个上下文根下运行相同的战争，需要多次部署该战争并指定不同的上下文根。请参阅[http://www.redbooks.ibm.com/redpapers/pdfs/redp4583.pdf](http://www.redbooks.ibm.com/redpapers/pdfs/redp4583.pdf)第 14 页第 11 步。

我选择处理您的需求的最佳方法是在您的 websphere 应用程序前面，并使用 mod_rewrite 指令拦截任何带有您需要的“上下文根”的 url 模式，并将它们重写为 websphere 上定义的一个应用程序/上下文根。这是一个资源：http: [//publib.boulder.ibm.com/httpserv/ihsdiag/plugin_alter_uri.html](http://publib.boulder.ibm.com/httpserv/ihsdiag/plugin_alter_uri.html)。

# actionscript-3 - actionscript3 addFrameScript 的意义何在

> ID：14536357
> 
> 赞同：4
> 
> 时间：2013-01-26T11:09:52.300
> 
> 标签：actionscript-3, frame, flash-cs5.5

我想问一下addFrameScript。

```
addFrameScript(0, frame1); 
```

这个脚本是什么意思？为什么它是0？

是否可以用其他数字或单词替换 0？

```
public function try()
{
    addFrameScript(0, frame1);
    return;

}// end function 
```

如果有人可以帮助我理解？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T16:36:25.257

`MovieClip`这个未记录的方法用于在实例播放头到达给定帧时调用函数，在这种情况下是第一帧， `0`（从 0 开始的索引）。您当然受限于可用的帧数；例如，要在最后一帧添加脚本，您可以使用：

```
mc.addFrameScript(mc.totalFrames-1, lastFrameReached);

function lastFrameReached():void {
    trace("stopping the animation");
    mc.stop();
} 
```

只需将其视为 Flash 创作工具中包含一些代码的框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T18:40:09.400

帧是 Flash 播放器中的时间片。因此，如果您的 fps 设置为 12 fps，则该帧中的脚本将被关注（执行）1/12 秒。

`addFrameScript`几乎没有记录，也许是为了阻止开发人员使用它。所以基本上，在代码中你初始化计时器类并手动管理你的时间片。

帧再次表示为零索引数组，可执行文件集合称为帧脚本。因此，当您自己添加框架脚本时，您只是在执行 Frame 类的构造函数（内部），如果您将其放在 IDE 中框架的 as3 面板上可能会执行的操作。

简而言之，它与frameScripts 可能是一个内部数组`addFrameScript(0, frame1);`是平行的。`frameScripts[0] = frame1;`

# oracle - 使用 ORACLE_DATAPUMP 并行访问以卸载数据

> ID：14536359
> 
> 赞同：1
> 
> 时间：2013-01-26T11:10:12.753
> 
> 标签：oracle, oracle11g, database-administration, datapump

我刚刚了解了使用 ORACLE_DATAPUMP 进行并行访问以卸载数据的概念。但无法正确理解它 - 关于并行性。因此，任何人都可以通过少量代码帮助我了解并行进程如何启动并将数据加载到其各自的文件中。

***代码：***

```
CREATE TABLE all_objects_xt
  ORGANIZATION EXTERNAL
  (
     TYPE ORACLE_DATAPUMP
     DEFAULT DIRECTORY xt_dir
       LOCATION ( 'allobj1.dmp', 'allobj2.dmp' )
  )
  PARALLEL
  AS
     SELECT *
     FROM   all_objects; 
```

*对于并行卸载，文件偏移量分布在并行进程之间，以便在一个文件或一组文件内进行多个并发处理。- 无论如何可以解释它（偏移概念）是如何在实时编程中发生的。？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-05T14:27:00.233

Oracle Parallel 子句的第一件事：它取决于 CPU 的数量。一般影响cpu个数×2=并行执行度。第二件事，并行操作也取决于 PARALLEL_MAX_SERVERS 参数，因为这是最大边界限制。

您正在使用来自 2 个不同转储文件的 ORACLE_DATAPUMP 驱动程序选项创建一个外部表。每当此外部对象引用时，都会填充数据。您也可以在创建此外部表期间放置 Parallel 4 或 Parallel 6 子句。这意味着 4 个并行线程将执行任务或 6 个将执行任务。

如果您想检查上述对象的并行处理，请进行以下测试。

以外部表的所有者或特权用户身份打开 1 个会话并执行选择查询。立即以 SYSDBA 或 DBA 身份打开另一个会话，并从以下数据字典视图执行查询。

从 V$PQ_SESSTAT 中选择 *；从 V$PQ_SYSSTAT 中选择 *；

V$PQ_SESSTAT 将为您提供现有并行操作的准确结果。表示执行了多少查询以及查询正在使用多少并行服务器。我希望你现在清楚了。

# extjs - 选择具有值的网格单元格

> ID：14536366
> 
> 赞同：1
> 
> 时间：2013-01-26T11:12:08.413
> 
> 标签：extjs, extjs-mvc

我使用 extjs mvc 并且有一列有渲染器

```
{
        text: __('Profiler.Personage.Settings.Active'),
        name: 'AdminDeny',

        renderer: function (value, metaData, record, row, col, store, gridView) {
            if (value == null || value == true) {
                return '<a class="Deactive"  href="javascript:void(0);"><img src="' + icon.Deactive + '" alt="Is Default" title="' + __('Profiler.Personage.PhoneGrid.IsDefault') + '" class="grid-icon" /></a>';
            } else {
                return '<a href="javascript:void(0);"><img src="' + icon.IsDefault + '" alt="Is Default" title="' + __('Profiler.Personage.PhoneGrid.IsDefault') + '" class="grid-icon" /></a>';
            }
        } 
```

![在此处输入图像描述](../Images/839ca04b4289a6c5fb8ac7e5e2c2779c.png) 当点击`a`我想在控制器中获取单元格的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:47:14.597

这是一个简单的。你需要使用actioncolumn：

```
{
     text: 'Is active',
     xtype: 'actioncolumn',
     align: 'center',
     dataIndex: 'is_active',
     width: 70,
     renderer: function (value, metaData, record, row, col, store, gridView) {
         if (value == null || value == true) {
             return '<img action="disable" src="/path/to/image.png" title="Some title" class="grid-icon" />';
         } else {
             return '<img action="enable" src="/path/to/image.png" alt="Is Default" title="Some title" class="grid-icon" />';
         }
     }
} 
```

在你的控制器中：

```
 init:function() {
        this.control({

            ...

            'panel[itemId=mygrid] actioncolumn': {
                click: function(grid, cell, row, col, e) {
                    var record = grid.getStore().getAt(row),
                        action = e.getTarget('.grid-icon', 3, true).getAttribute('action'),
                        message;

                    if(action == 'enable') {
                        message = 'Clicked "enable" for '+record.get('name');
                    }else if(action == 'disable') {
                        message = 'Clicked "disable" for '+record.get('name');
                    }
                    alert(message);
                }
            }

            ...

        });

        ...
    } 
```

查看 github 上的实时示例： [http ://htmlpreview.github.com/?https://github.com/werdender/ext4examples/blob/master/actioncolumns.html](http://htmlpreview.github.com/?https://github.com/werdender/ext4examples/blob/master/actioncolumns.html)

# ruby-on-rails - 猴子补丁 Rails UniquenessValidator 支持条件

> ID：14536367
> 
> 赞同：0
> 
> 时间：2013-01-26T11:12:30.690
> 
> 标签：ruby-on-rails, ruby, validation, monkeypatching

在我的 Rails 3.2.11 应用程序中，我需要唯一性验证器来支持条件，以便忽略软删除的记录。在 GitHub 上，我发现了一个拉取请求（https://github.com/rails/rails/pull/5321），但这个功能似乎不是当前 Rails 版本的一部分。现在我为 UniquenessValidator 类创建了一个补丁，如下所示：

```
module UniquenessValidatorExtension
  def build_relation(klass, table, attribute, value)
    relation = super
    relation.merge!(options[:conditions]) if options[:conditions]
    relation
  end
end

ActiveRecord::Validations::UniquenessValidator.send :include, UniquenessValidatorExtension 
```

为了加载它，我创建了一个初始化程序。问题是，我的方法永远不会被调用。我做错了什么？

这是当前 UniquenessValidator 类的链接：[https ://github.com/rails/rails/blob/0d73d6e7b6dd1900f105397460b777ef6c03d3b6/activerecord/lib/active_record/validations/uniqueness.rb](https://github.com/rails/rails/blob/0d73d6e7b6dd1900f105397460b777ef6c03d3b6/activerecord/lib/active_record/validations/uniqueness.rb)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:51:17.400

就是这样`include`工作的：

```
module M; end

class C
  include M
end

C.ancestors # => [C, M, Object, Kernel, BasicObject] 
```

因此，在您的情况下`build_relation`，将调用原始类中的方法。JFYI，`prepend`Ruby 2.0 中有方法：

```
class C1
  prepend M
end

C1.ancestors # => [M, C1, Object, Kernel, BasicObject] 
```

所以在你的情况下，方法`build_relation`将从模块中调用。

好吧，现在您可以重新打开`UniquenessValidator`并覆盖整个`build_relation`方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T11:42:26.027

如果该方法从未被调用，这意味着您在 ActiveRecord::Base 'required' 之后包含了您的模块。尝试在之前包含它：

```
config.before_initialize do
  ActiveRecord::Validations::UniquenessValidator.send :include, UniquenessValidatorExtension
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T18:58:45.437

@nash 解释了这个问题，但由于我使用的是 Ruby 1.9.x，所以这不是解决方案。为了让它工作，我给原来的方法加上别名，然后替换它。现在我可以从覆盖中调用别名方法。

```
class ActiveRecord::Validations::UniquenessValidator < ActiveModel::EachValidator
  alias_method :build_relation_orig, :build_relation
  def build_relation(klass, table, attribute, value)
    relation = self.build_relation_orig(klass, table, attribute, value)
    relation = relation.and(options[:conditions]) if options[:conditions]
    relation
  end
end 
```

# android - Nodejs socket.io 服务器与 Android 连接但不发送消息

> ID：14536368
> 
> 赞同：1
> 
> 时间：2013-01-26T11:12:31.510
> 
> 标签：android, node.js, socket.io

我正在尝试在 NodeJS 服务器和 Android 之间交换消息。Android 可以连接和发送消息到服务器，但服务器发送的消息在 Android 上收不到。

```
 var app = require('http').createServer(handler)
  , io = require('socket.io').listen(app)
  , fs = require('fs')

app.listen(80);

var text = 'BRUNO';
var text2 = 'BRUNO2';

function handler (req, res) {
  fs.readFile(__dirname + '/index.html',
  function (err, data) {
    if (err) {
      res.writeHead(500);
      return res.end('Error loading index.html');
    }

    res.writeHead(200);
    res.end(data);
  });
}

var clients = [];

io.sockets.on('connection', function (socket) {
  socket.emit('news', text);
  socket.emit('news', text2);
  socket.send('BRUNO');
  socket.on('my other event', function (data) {
    console.log(data);
    console.log(Math.floor((Math.random()*10000)+1));
  });

  socket.on('name', function (data) {
    socket.set('name',data);
    console.log('BRUNOOOO');
    if (clients.length ==0 ) 
        clients.push(socket);
    else {
    socket2 = clients.pop()
    socket2.join('room');
    socket.join('room');
    io.sockets.in('room').emit('news','NOVA SALA');
    }
    socket.get('name', function (err, data) {
      socket.emit('news',data);
  });
  });
}); 
```

安卓

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        TextView txtTest;
        txtTest = (TextView) findViewById(R.id.txtTeste);
        try {
            ToServer tos = new ToServer(txtTest);
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

public class ToServer implements IOCallback {
    private SocketIO socket;
    private TextView txtTest;

    public ToServer(TextView a) throws Exception {
        socket = new SocketIO();
        this.txtTest = a;
        socket.connect("http://nodebruno.jit.su", this);
        socket.emit("my other event", "SERVER RECEBEU ANDROID");
    }

    @Override
    public void onMessage(JSONObject json, IOAcknowledge ack) {
        try {
            txtTest.setText(json.toString(2));
        } catch (JSONException e) {
            e.printStackTrace();
        }
    }

    @Override
    public void onMessage(String data, IOAcknowledge ack) {
        txtTest.setText(data);
                    Log.d("Event",event );
    }

    @Override
    public void onError(SocketIOException socketIOException) {
        System.out.println("an Error occured");
        socketIOException.printStackTrace();
    }

    @Override
    public void onDisconnect() {
        System.out.println("Connection terminated.");
    }

    @Override
    public void onConnect() {
        System.out.println("Connection established");
    }

    @Override
    public void on(String event, IOAcknowledge ack, Object... args) {
        txtTest.setText(event);
        Log.d("Event",event );
    }
} 
```

在 Android 上我使用这个[https://github.com/Gottox/socket.io-java-client](https://github.com/Gottox/socket.io-java-client)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:48:54.947

我试过你的代码，它在我的情况下工作。在覆盖功能下，我能够获取从服务器发送的事件和消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T09:22:36.880

尝试使用这个：[https](https://github.com/koush/AndroidAsync) ://github.com/koush/AndroidAsync 这里是实现演示：[https ://github.com/Thanhktm/socketio_android](https://github.com/Thanhktm/socketio_android)

# java - jax ws 生成的客户端静默失败

> ID：14536369
> 
> 赞同：0
> 
> 时间：2013-01-26T11:12:51.237
> 
> 标签：java, soap, jax-ws

我使用 jax ws 准备了一个 Spring Web 服务。它工作正常，我可以从许多其他项目中调用此服务。

有趣的事情发生在另一个项目中。我尝试再次使用此客户端（通过添加源和仅使用 jar 的类来尝试）。当我在服务上调用 get 端点端口方法时（在我可以调用 Web 服务上的实际方法之前），它静默失败，没有迹象表明向服务发出请求，也没有捕获到异常。只有我的控制器上有一个 finally 子句，它会进行一些计算并退出（并打印日志）。

为什么此失败不会生成一般异常？如何以其他方式跟踪错误？或者一般来说，我做错了什么？

用法：

```
logger.debug("web service: " + transferService.toString());                                                                          
            logger.debug("web service qname: " + transferService.getServiceName());                                                              
            logger.debug("web service url: " + transferService.getWSDLDocumentLocation());                                                       
            //logger.debug("web service endpoint: " + transferService.getTransferEndPointPort().toString());                                     

            QueryCardNumberWithIdWSResponse response =                                                                                           
                                transferService.getTransferEndPointPort().queryId(request); 
```

transferService 对象正常运行，直到我们调用 getTransferEndPointPort。然后它崩溃了。

getTransferEndPoint 实现：

```
@WebEndpoint(name = "TransferEndPointPort")
    public TransferEndPoint getTransferEndPointPort() {
        loggerApache.debug("getting transfer end point ");
        loggerApache.debug("service name: " + super.getServiceName() );
        return super.getPort(new QName("http://www.blabla.com", "TransferEndPointPort"), TransferEndPoint.class);
    } 
```

它打印日志，但在 super.getPort 之后没有任何反应，只是控制器中的 finally 块起作用。

编辑：过了一会儿，我记得在 catch 子句中使用 Throwable。所以我最终从服务中抓住了一个可扔的东西。

它是 ：

```
java error java.lang.NoSuchMethodError: javax.xml.ws.WebFault.messageName()Ljava/lang/String; 
```

在网上搜索后，我得出结论，由于 java 版本，我不应该在我的 Web 服务中使用 WebFault。我从 web 方法中删除了 throws 异常（可能我在早期阶段忘记删除它），现在它似乎正在工作。

# java - Struts2 访问网页内容中的文件

> ID：14536370
> 
> 赞同：0
> 
> 时间：2013-01-26T11:13:03.937
> 
> 标签：java, file, struts2, directory

假设我有这个给定的命名空间或这样的 url

```
http://localhost:8090/MyApp/pageowner/profile?id=1 
```

在该页面中的哪个位置或`profile`有一个 img 标签。

并且正在检索的图像的路径是这样的

```
media/user_01/photos/imm_2011_01_06_17_48_32_332.JPG 
```

媒体文件夹位于 Web-Content 的位置。

所以如果我只想访问文件本身，我可以这样做

```
http://localhost:8090/MyApp/media/user_01/photos/imm_2011_01_06_17_48_32_332.JPG 
```

但是当我在`pageowner`命名空间内时，我怎么无法访问它。返回的url是这样的

```
 http://localhost:8090/HitPlay/pageowner/media/user_01/photos/imm_2011_01_06_17_48_32_332.JPG 
```

这给了我一个错误 404 not found。

它没有访问根上下文或 Web 内容中的文件。无论如何，如果我在`pageowner`命名空间内，我是否可以指定我正在获取的文件位于根目录或 Web 内容位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:54:00.770

您可以尝试使用`request.getContextPath()`- 它用于返回请求 URL 的一部分并指定请求的上下文。

# mysql - MySQL“计数”，其中年份范围是增量的

> ID：14536372
> 
> 赞同：0
> 
> 时间：2013-01-26T11:13:11.783
> 
> 标签：mysql

我想执行“选择计数”查询增量值（5）

像这些 sql 查询：

```
SELECT COUNT(*) FROM ages WHERE ages.year BETWEEN 1990 and 1995
SELECT COUNT(*) FROM ages WHERE ages.year BETWEEN 1995 and 2000
..so fort and so on.. 
```

我怎样才能使它成为一个有效的单一查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:22:23.510

```
SELECT COUNT(*) AS `count`, (ages.year DIV 5) * 5 AS bottom, 
    (ages.year DIV 5 + 1) * 5 AS top
FROM ages
GROUP BY (ages.year DIV 5) * 5, (ages.year DIV 5 + 1) * 5 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!2/2e39c8/3)

请注意，这假设您实际上*不想*在边界上重复计算这些值。它不是 100% 完全像您的原始查询。如果您确实想重复计算，请尝试：

```
SELECT SUM(`count`) AS `count`, bottom, top
FROM
(
    SELECT COUNT(*) AS `count`, (ages.year DIV 5) * 5 AS bottom, 
        (ages.year DIV 5 + 1) * 5 AS top
    FROM ages
    GROUP BY (ages.year DIV 5) * 5, (ages.year DIV 5 + 1) * 5
    UNION ALL
    SELECT 1 AS `count`, ages.year - 5 AS bottom, ages.year AS top
    FROM ages
    WHERE MOD(ages.year, 5) = 0
) inclusive
GROUP BY bottom, top 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!2/2e39c8/11)

# java - 检查文件扩展名是否为.txt的程序

> ID：14536377
> 
> 赞同：1
> 
> 时间：2013-01-26T11:13:46.307
> 
> 标签：java, swing, awt, jfilechooser, file-extension

我编写了一个带有 awt 文本字段和一个按钮的 java 代码，如果我单击该按钮，我可以使用 JFileChooser 浏览文件。它需要检查文件是否有“.txt”扩展名。我写了下面的代码，但没有得到验证。

我哪里错了？请帮助确定我错在哪里。

```
 try{
            final JFileChooser chooser = new JFileChooser();
            chooser.showOpenDialog(null);
            chooser.addChoosableFileFilter(new FileFilter() {
            public String getDescription() {
                return "*.txt";
            }
            public boolean accept(File filename)
            {

                if(filename.getName().endsWith(".txt")){
                    return true;
                }
                else{
                System.out.println("Browsed dest file extension must be .txt");
                return false;
                }}
            });
        catch(Exception ex)
        {
            JOptionPane.showMessageDialog(f,"Exception occurred");
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T11:19:36.620

你的问题是：

```
chooser.showOpenDialog(null); 
```

停止执行代码，直到用户选择一个文件。添加后添加此行`FileFilter`，一切都应该可以正常工作。

小解释：

方法`showOpenDialog(Component c)`块执行当前线程，直到用户操作和下一行代码将在用户选择文件后执行。如果您在`FileFilter`再次添加 a 后调用，`showOpenDialog`它将按预期工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T11:34:55.970

I would suggest using the `@Override` annotation for the `accept` method - see this link [@Override explained in Oracle Documentation](http://docs.oracle.com/javase/tutorial/java/IandI/override.html).

Plus, it would be best to use `filename.getName().toLowerCase().endsWith(".txt")` instead `filename.getName().endsWith(".txt")` to ensure that files with the extension `.TXT` will pass the filter as well.

# ios - 为什么我可以在 viewDidAppear 中访问 Core Data 实体，但不能在 viewDidLoad 中访问？

> ID：14536378
> 
> 赞同：-1
> 
> 时间：2013-01-26T11:13:48.240
> 
> 标签：ios, objective-c, core-data

我有一个 UITableViewController 子类，当我尝试从 viewDidLoad 获取一些实体时，我得到一个空数组。但是当我在 viewDidAppear 中使用相同的代码时，我得到了这些实体！怎么样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:23:45.573

你在用`NSFetchedResultsController`吗？这是使用 Core Data 填充表视图的推荐（也是最简单的）方法。您不必关心获取时间，因为结果控制器会为您管理。

如果没有 FRC，您将负责填充表格。根据您的设置，即您如何创建视图控制器，所有必要的部分（包括托管对象上下文，或数据数组，或您的表格视图本身）可能在运行时尚未完全加载`viewDidLoad`。通常，`viewDidLoad`最好用于从 nib 或情节提要加载的视图控制器。您在或某些此类方法中提供必要的属性`prepareForSegue:`，它们将可用于`viewDidLoad:`.

不过，您应该选择 FRC。它将通过数据源方法或多或少地懒惰地进行获取。这也是性能和内存管理的最佳选择。

# asp.net - 将到目前为止输入的数据传递给控制器

> ID：14536383
> 
> 赞同：0
> 
> 时间：2013-01-26T11:14:28.490
> 
> 标签：asp.net, razor, asp.net-mvc-4

在一个表单中，我有不同的字段（姓名、年龄、...）以及上传图片的可能性。我想以不同的观点来实现这一点。问题是，当我想更改控制器时，到目前为止生成的数据没有传递给控制器​​。这是我的代码的一个小例子：

```
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Person</legend>
        @Html.EditorFor(model => model.Name)
        @Html.EditorFor(model => model.Age)

        <img src="@Url.Content(Model.ImagePath)" alt="Image" class="imagePreview" />
        <li>
            @Html.ActionLink("Upload a pic from you!", "UploadImage", new { model = Model }, null)
            @* This is the 'problematic' action *@
        </li>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
} 
```

这里调用上传控制器的方法：

```
public ActionResult UploadImage(Person model)
{
    // properties in the passed model are not set
    return RedirectToAction("UploadImage", "UploadImage");
} 
```

如何在不使用提交按钮的情况下获取输入的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T17:23:58.363

查看Bryan Sampica 的这篇关于使用 MVC 进行异步文件上传的[博客文章](http://goo.gl/hcLD58)。我们只是将它用于平滑的异步文件上传体验，因此我们不必离开页面。这解决了您如何持久化瞬态数据的问题。如果您的用户使用的是现代浏览器（IE 10+、Chrome、FF 等），进度条实际上会显示文件上传进度。设置起来相当容易，但是，如果您按照信中的说明进行操作，则确实需要您将 webAPI 控制器添加到您的项目中。

# python - 我的 FB HackerCup 代码对大输入太慢了

> ID：14536384
> 
> 赞同：16
> 
> 时间：2013-01-26T11:14:56.443
> 
> 标签：python, performance, optimization

我正在[`Find the min`](https://www.facebook.com/hackercup/problems.php?pid=494433657264959&round=185564241586420)使用 python 在 facebook hackercup 上解决问题，我的代码适用于示例输入，但对于大型输入（10^9），它需要几个小时才能完成。

那么，是否有可能使用 python 无法在 6 分钟内计算出该问题的解决方案？或者可能是我的方法太糟糕了？

**问题陈述**：

发送笑脸后，John 决定玩数组。你知道黑客喜欢玩数组吗？John 有一个从零开始的索引数组`m`，其中包含`n`非负整数。然而，他只`k`知道数组的第一个值，他想弄清楚其余的值。

John 知道以下内容：对于每个索引`i`，其中是*不*包含在 的先前值中`k <= i < n`的`m[i]`最小非负整数。*`*k*``m`*

 *例如，如果`k = 3`和`n = 4`的已知值`m`是`[2, 3, 0]`，他可以算出`m[3] = 1`。

John 正忙于让世界变得更加开放和互联，因此，他没有时间弄清楚阵列的其余部分。帮助他是你的任务。

给定 的第一个`k`值`m`，计算该数组的第 n 个值。（即`m[n - 1]`）。

因为 和 的值`n`可能`k`非常大，所以我们使用伪随机数生成器来计算 的第一个`k`值`m`。给定正整数`a`、和`b`，的已知值可以计算如下：`c``r``m`

```
m[0] = a
m[i] = (b * m[i - 1] + c) % r, 0 < i < k 
```

输入

*   第一行包含一个整数 T (T <= 20)，即测试用例的数量。

*   接下来是 T 测试用例，每行包含 2 行。

*   每个测试用例的第一行包含 2 个空格分隔的整数 `n`, `k`( `1 <= k <= 10^5`, `k < n <= 10^9`)。

*   每个测试用例的第二行包含 4 个空格分隔的整数 `a`, `b`, `c`, `r`(0 <= a, b, c <= 10^9, 1 <= r <= 10^9)。

我尝试了两种方法，但都未能在 6 分钟内返回结果，这是我的两种方法：

第一的：

```
import sys
cases=sys.stdin.readlines()
def func(line1,line2):
    n,k=map(int,line1.split())
    a,b,c,r =map(int,line2.split())
    m=[None]*n                     #initialize the list
    m[0]=a
    for i in xrange(1,k):          #set the first k values using the formula
        m[i]= (b * m[i - 1] + c) % r
    #print m    
    for j in range(0,n-k):         #now set the value of m[k], m[k+1],.. upto m[n-1]

        temp=set(m[j:k+j])     # create a set from the K values relative to current index
        i=-1                   #start at 0, lowest +ve integer
        while True:           
            i+=1
            if i not in temp:  #if that +ve integer is not present in temp
                m[k+j]=i       
                break

    return m[-1]

for ind,case in enumerate(xrange(1,len(cases),2)):
    ans=func(cases[case],cases[case+1])
    print "Case #{0}: {1}".format(ind+1,ans) 
```

第二：

```
import sys
cases=sys.stdin.readlines()
def func(line1,line2):
    n,k=map(int,line1.split())
    a,b,c,r =map(int,line2.split())
    m=[None]*n                       #initialize
    m[0]=a                  
    for i in xrange(1,k):            #same as above          
        m[i]= (b * m[i - 1] + c) % r

    #instead of generating a set in each iteration , I used a 
    # dictionary this time.
    #Now, if the count of an item is 0 then it
    #means the item is not present in the previous K items
    #and can be added as the min value

    temp={}
    for x in m[0:k]:                   
        temp[x]=temp.get(x,0)+1       

    i=-1
    while True:
            i+=1
            if i not in temp:
                m[k]=i          #set the value of m[k]
                break
    for j in range(1,n-k):      #now set the values of m[k+1] to m[n-1]
        i=-1
        temp[m[j-1]] -= 1       #decrement it's value, as it is now out of K items
        temp[m[k+j-1]]=temp.get(m[k+j-1],0)+1   # new item added to the current K-1 items

        while True:
            i+=1
            if i not in temp or temp[i]==0:  #if i not found in dict or it's val is 0
                m[k+j]=i                     
                break

    return m[-1]

for ind,case in enumerate(xrange(1,len(cases),2)):
    ans=func(cases[case],cases[case+1])
    print "Case #{0}: {1}".format(ind+1,ans) 
```

第二种方法中的最后一个 for 循环也可以写成：

```
for j in range(1,n-k):
    i=-1
    temp[m[j-1]] -= 1
    if temp[m[j-1]]==0:
        temp.pop(m[j-1])      #same as above but pop the key this time
    temp[m[k+j-1]]=temp.get(m[k+j-1],0)+1

    while True:
        i+=1
        if i not in temp:
            m[k+j]=i
            break 
```

样本输入：

```
5
97 39
34 37 656 97
186 75
68 16 539 186
137 49
48 17 461 137
98 59
6 30 524 98
46 18
7 11 9 46 
```

输出：

```
Case #1: 8
Case #2: 38
Case #3: 41
Case #4: 40
Case #5: 12 
```

我已经尝试过[codereview](https://codereview.stackexchange.com/questions/20926/how-can-i-improve-the-performance-of-this-code)，但还没有人回复。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-26T12:42:21.853

在最多`k+1`步骤之后，`k+1`数组中的最后一个数字将是`0...k`（按某种顺序）。随后，序列是可预测的：`m[i] = m[i-k-1]`。因此，解决此问题的方法是运行您的幼稚实现以执行`k+1`步骤。然后你有一个包含`2k+1`元素的数组（第一个`k`是从随机序列生成的，另一个`k+1`是从迭代生成的）。

现在，最后的 k+1 个元素将无限重复。所以你可以`m[n]`立即返回结果：它是`m[k + (n-k-1) % (k+1)]`.

这是一些实现它的代码。

```
import collections

def initial_seq(k, a, b, c, r):
    v = a
    for _ in xrange(k):
        yield v
        v = (b * v + c) % r

def find_min(n, k, a, b, c, r):
    m = [0] * (2 * k + 1)
    for i, v in enumerate(initial_seq(k, a, b, c, r)):
        m[i] = v
    ks = range(k+1)
    s = collections.Counter(m[:k])
    for i in xrange(k, len(m)):
        m[i] = next(j for j in ks if not s[j])
        ks.remove(m[i])
        s[m[i-k]] -= 1
    return m[k + (n - k - 1) % (k + 1)]

print find_min(97, 39, 34, 37, 656, 97)
print find_min(186, 75, 68, 16, 539, 186)
print find_min(137, 49, 48, 17, 461, 137)
print find_min(1000000000, 100000, 48, 17, 461, 137) 
```

四个案例在我的机器上运行时间为 4 秒，最后一个案例的`n`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-26T18:33:30.167

这是我的 O(k) 解决方案，它基于与上述相同的想法，但运行速度更快。

```
import os, sys

f = open(sys.argv[1], 'r')

T = int(f.readline())

def next(ary, start):
    j = start
    l = len(ary)
    ret = start - 1
    while j < l and ary[j]:
        ret = j
        j += 1
    return ret

for t in range(T):
    n, k = map(int, f.readline().strip().split(' '))
    a, b, c, r = map(int, f.readline().strip().split(' '))

    m = [0] * (4 * k)
    s = [0] * (k+1)
    m[0] = a
    if m[0] <= k:
        s[m[0]] = 1
    for i in xrange(1, k):
        m[i] = (b * m[i-1] + c) % r
        if m[i] < k+1:
            s[m[i]] += 1

    p = next(s, 0)
    m[k] = p + 1
    p = next(s, p+2)

    for i in xrange(k+1, n):
        if m[i-k-1] > p or s[m[i-k-1]] > 1:
            m[i] = p + 1
            if m[i-k-1] <= k:
                s[m[i-k-1]] -= 1
            s[m[i]] += 1
            p = next(s, p+2)
        else:
            m[i] = m[i-k-1]
        if p == k:
            break

    if p != k:
        print 'Case #%d: %d' % (t+1, m[n-1])
    else:
        print 'Case #%d: %d' % (t+1, m[i-k + (n-i+k+k) % (k+1)]) 
```

这里的关键是，m[i] 永远不会超过 k，如果我们记住从 0 到 p 的前 k 个数字中可以找到的连续数字，那么 p 永远不会减少。

如果数字 m[ik-1] 大于 p，那么显然我们应该将 m[i] 设置为 p+1，并且 p 至少会增加 1。

如果数 m[ik-1] 小于或等于 p，那么我们应该考虑在 m[ik:i] 中是否存在相同的数，如果不存在，m[i] 应该设置等于 m[ik-1]，如果是，我们应该将 m[i] 设置为 p+1，就像“m[ik-1]-larger-than-p”的情况一样。

每当 p 等于 k ​​时，循环开始，循环大小为 (k+1)，所以我们可以跳出计算，现在打印出答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T08:00:02.290

我通过添加地图增强了性能。

```
import sys, os
import collections

def min(str1, str2):
    para1 = str1.split()
    para2 = str2.split()

    n = int(para1[0])
    k = int(para1[1])
    a = int(para2[0])
    b = int(para2[1])
    c = int(para2[2])
    r = int(para2[3])

    m = [0] * (2*k+1)
    m[0] = a

    s = collections.Counter()

    s[a] += 1
    rs = {}
    for i in range(k+1):
        rs[i] = 1

    for i in xrange(1,k):
        v = (b * m[i - 1] + c) % r
        m[i] = v
        s[v] += 1
        if v < k:
            if v in rs:
                rs[v] -= 1
                if rs[v] == 0:
                    del rs[v]

    for j in xrange(0,k+1):
        for t in rs:
            if not s[t]:
                m[k+j] = t
                if m[j] < k:
                    if m[j] in rs:
                        rs[m[j]] += 1
                    else:
                        rs[m[j]] = 0

                rs[t] -= 1
                if rs[t] == 0:
                    del rs[t]

                s[t] = 1
                break

        s[m[j]] -= 1

    return m[k + ((n-k-1)%(k+1))]

if __name__=='__main__':
    lines = []
    user_input = raw_input()
    num = int(user_input)

    for i in xrange(num):
        input1 = raw_input()
        input2 = raw_input()
        print "Case #%s: %s"%(i+1, min(input1, input2)) 
```*

# javascript - 如何在 jQuery-ui 中获取日期选择器数据？

> ID：14536385
> 
> 赞同：1
> 
> 时间：2013-01-26T11:14:59.007
> 
> 标签：javascript, jquery, jquery-ui

如何在 jQuery ui 中获取数据选择器的数据？我有下一个代码，但只获得默认值。（我只用几年）

```
$('#datePickerTempe').datepicker( {
    changeMonth: false,
    changeYear: false,
    dateFormat: 'MM yy',
    //To hide months:
    stepMonths: 12,  
    monthNames: ["","","","","","","","","","","",""], 
    //Range
    minDate: '-4y',  //'M'-> month | 'w'-> week | 'd'-> day
    maxDate: '0y',

    buttonImageOnly: true 
});

$('#datePickerTempe').on('click', function(){ 
console.log('año: '+$('#datePickerTempe').val()); }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:18:33.767

从 datepicker 获取当前日期（如果没有选择，则为 null）：

```
var selectedDate = $('#datePickerTempe').datepicker("getDate"); 
```

您还可以将`onSelect`处理程序添加到`datepicker`：

```
$('#datePickerTempe').datepicker( {
    onSelect: function (dateText, inst) {
        console.log(dateText);
    }
}); 
```

参考[datepicker getDate](http://api.jqueryui.com/datepicker/#method-getDate)方法和[datepicker onSelect](http://api.jqueryui.com/datepicker/#option-onSelect)选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T11:23:17.053

```
<input type="text" id="date" name="date" value=""/>    

<script>
    var date_fields = $('#date');
    date_fields.datepicker({
        format: 'mm/dd/yyyy'
    }).on('changeDate', function(ev){
        date_fields.datepicker('hide');
        date_fields.blur();
    });
</script> 
```

添加的脚本[http://www.eyecon.ro/bootstrap-datepicker/](http://www.eyecon.ro/bootstrap-datepicker/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T11:23:43.793

```
$("#datepicker").change(function() {
    alert($(this).val());
}); 
```

在这里工作得很好。

# knockout.js - 仅渲染模型更改的模板引擎

> ID：14536389
> 
> 赞同：1
> 
> 时间：2013-01-26T11:15:33.087
> 
> 标签：knockout.js, angularjs, template-engine, jquery-templates

是否有任何模板 js 库可以仅呈现模型中的更改而不是整个模型。例如：如果模型是数据类型的数组[{名称：'1'地址：'2'}，{名称：'3'地址：'4'}]

最初，框架会将数据呈现为 html 视图。当我更改模型（在数组中添加新元素）时，我只希望渲染更改（新元素）而不是重新渲染整个模型。

我已经尝试过 KnockoutJS，但是当模型更改时，整个视图会重新渲染，而不是仅更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:41:31.627

如果您将对象引用更改为新的，With 绑定和 Template 绑定将重新呈现整个内容。相反，您应该只更改已更改的可观察对象的状态。

我的猜测是您处于 CRUD 场景中并从后端接收到一个全新的模型？如果是这种情况，并且您不想使用映射插件重新渲染整个视图，它将更新旧对象上的可观察对象，因此不会重新渲染整个视图。

```
I clarified my answer with a fiddle 
```

[http://jsfiddle.net/G4ZME/1/](http://jsfiddle.net/G4ZME/1/)

# objective-c - Objective-C NSMutableArray

> ID：14536390
> 
> 赞同：1
> 
> 时间：2013-01-26T11:15:39.133
> 
> 标签：objective-c, xcode, object, nsmutablearray

我已经用我的数据库中的整数和字符串值填充了 NSMutableArray。问题是多次插入了许多值。使用以下代码我删除重复的对象

```
for (id object in originalArray) {
    if (![singleArray containsObject:object]) {
        [singleArray addObject:object];
    }
} 
```

只有当它们之间的对象完全相同时，总线才有效。有没有办法根据整数值删除重复项？

**编辑**（来自 OP 对已删除答案的评论）

我有一些包含`int`and的对象`NSString`。例如`@"John 13"`, `@"Mary 25"`, `@"Luke 25"`, `@"Joan 13"`。将`NSMutableArray`包含所有四个名称和 13、25 的重复项。我想删除重复项，只在数组中留下 13 和 25 一次。我不在乎哪些名字会被删除。只关心整数值以便以后使用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:33:53.167

如果您的元素都是 NSNumber 对象：

```
for (int i=0;i<array.count;i++) {
    for (int j=i+1;j<array.count;j++) {
        if ([array[i] isEqualToNumber:array[j]]) {
           [array removeObjectAtIndex:j--];
        }
    }
} 
```

或者，如果所有对象都是整数 NSNumbers 或包含整数值的 NSStrings：

```
for (int i=0;i<array.count;i++) {
    for (int j=i+1;j<array.count;j++) {
        if ([array[i] intValue] == [array[j] intValue]) {
           [array removeObjectAtIndex:j--];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T11:36:36.937

试试这个：

```
// singleArray is initially empty
for (id object in originalArray) 
{
    BOOL contains= YES;
    for( id single in singleArray)
    {
        if( [single integerValue]==[object integerValue] )
        {
            contains= NO;
            break;
        }
    }
    if(contains)
    {
        [singleArray addObject: object];  
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T11:40:57.833

没有测试，告诉我它是否不起作用。假设数组中的对象是字符串并且格式是“WORD NUMBER”

```
Boolean myEqual(const void *value1, const void *value2) {
    NSString *str1 = (__bridge NSString *)(value1);
    NSString *str2 = (__bridge NSString *)(value2);
    NSArray *arr1 = [str1 componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
    NSArray *arr2 = [str2 componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
    return [[arr1 lastObject] isEqual:[arr2 lastObject]];
}

CFHashCode myHash(const void *value) {
    NSString *str1 = (__bridge NSString *)(value);
    NSArray *arr1 = [str1 componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
    return [[arr1 lastObject] hash];
}

NSMutableArray *array = // your array;
CFSetCallBacks callBacks = kCFTypeSetCallBacks;
callBacks.equal = myEqual;
callBacks.hash = myHash;
CFMutableSetRef set = CFSetCreateMutable(NULL, [array count], &callBacks);
for (id obj in [array copy]) {  // copy so can modify the original array
    if (CFSetContainsValue(set, (__bridge const void *)(obj))) {
        [array removeObject:obj];
    } else {
        CFSetAddValue(set, (__bridge const void *)(obj));
    }
} 
```

# php - 在 Ajax 调用中查找和替换 url

> ID：14536391
> 
> 赞同：0
> 
> 时间：2013-01-26T11:15:44.973
> 
> 标签：php, jquery, ajax, get

我正在`Ajax get`从 cnn.com 获取跨浏览器数据：

```
 $(function(){

    var site = 'http://cnn.com/';

    $.get('proxy.php', { site:site }, function(data){

    $(data).find('a').attr('href', function(_, href){
         return href.replace(/\/\/[^\/]+/, '//cnn.com')
    }); 

    $('#result').append(data);

    }, 'html');

    }); 
```

如您所见，有一段代码可以将部分 url 替换为“cnn.com”，这是必要的，因为 url 路径通常附加到我的网站域。问题是替换功能似乎不起作用。我在控制台中没有收到任何错误，所以我怀疑我必须将代码放在其他地方。另一种可能是代码找不到`a`，因为Ajax加载数据的过程没有完成。我尝试使用事件 ajaxComplete 修复它，但没有成功。为了让函数找到并替换它，我必须在代码中进行哪些更改？

ps 我知道有一段 proxy.php 代码，但我宁愿在浏览器端执行此操作（javascript/jquery）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T11:23:59.760

您正在创建一个 jQuery 对象，操作元素，但您没有附加它并最终`data`保持不变，试试这个：

```
$(data).find('a').attr('href', function(_, href){
     return href.replace(/\/\/[^\/]+/, '//cnn.com')
}).end().appendTo('#result'); 
```

# http - 如果源 Web 服务器将响应标头中的 expires 值设置为相对较早之前传递的时间，会发生什么情况？

> ID：14536401
> 
> 赞同：6
> 
> 时间：2013-01-26T11:17:31.930
> 
> 标签：http, caching, http-headers, browser-cache, cache-control

如果源 Web 服务器将响应标头中的 expires 值设置为相对很久以前传递的时间，会发生什么情况。

例如，考虑当前时间是格林威治标准时间 2013 年 1 月 25 日星期五，并且过期标头设置为 -->

过期：1994 年 12 月 1 日星期四 16:00:00 GMT

客户将如何响应上述实例？

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T21:07:55.767

在标头中使用过去的日期`Expired`（早于`Date`标头值）进行响应是没有意义的，并且可能是一些严重错误配置的标志。话虽如此，客户端会将此类响应视为“已经过期”而不缓存它。如果`Expires`日期等于`Date`标头值（这是服务器将响应标记为“已过期”的正确方式）或格式无效，则同样适用。

有关详细信息，请参阅[RFC 2616 的过期部分](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.21)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T00:48:10.020

指向过去特定和固定日期的过期时间通常出现在相对较差的配置和/或相对较差的（启动器）代码中，其目的是防止 HTTP 1.1 客户端缓存响应。这会奏效，但过去的*特定*和*固定*日期显然是荒谬的。的值`0`更有意义，或者与`Date`响应标头完全相等的值，这种情况不太常见，但由[HTTP`Expires`标头规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.21)推荐，引用如下（强调我的）：

> ...
> 
> HTTP/1.1 客户端和缓存必须像过去一样处理其他无效的日期格式，**尤其是包括值 "0"**（即，“已经过期”）。
> 
> 为了将响应标记为“已经过期”，源服务器发送**一个等于 Date 标头值的 Expires 日期**。（请参阅第[13.2.4](http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html#sec13.2.4)节中的到期计算规则。）
> 
> ...

### 也可以看看：

*   [如何在所有浏览器中控制网页缓存？](https://stackoverflow.com/questions/49547/making-sure-a-web-page-is-not-cached-across-all-browsers)- 您会看到一些评分较低的答案提到过去的特定和固定日期，这只是证明无知。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-04T08:25:53.693

来自[RFC 7234](https://www.rfc-editor.org/rfc/rfc7234#section-4.2)：

```
If an origin server wishes to force a cache to validate every
request, it can assign an explicit expiration time in the past to
indicate that the response is already stale. 
```

这清楚地表明这是一种有效的行为，并且客户端应该将响应视为陈旧的并在每次后续调用时对其进行验证。

# c++ - C++ 异步输出调试字符串

> ID：14536402
> 
> 赞同：4
> 
> 时间：2013-01-26T11:17:42.877
> 
> 标签：c++, asynchronous, c++11

使用 c++11 中的新 std::async，我想我可能会尝试实现 OutputDebugString 的异步版本，以使我摆脱由于我通常通过通常的方式大量打印每个小细节而导致的一些性能下降输出调试字符串函数。

所以这是我原来的同步 OutputDebugString 实现（有效）：

```
static void OutputDebugStringN(const char *format, ...)
{
    char outstring[256];
    memset(outstring, 0, sizeof(outstring));

    try
    {
        va_list args = {0};
        va_start(args, format); //args = (va_list) (&format+1);

        vsprintf_s(outstring, format, args);

        va_end(args);

        OutputDebugString(outstring);
    }
    catch (...) //most likely reference val arg error (va_list doesn't support ref args)
    {
        OutputDebugString("[OutputDebugStringN] Something went wrong\n");
    }
} 
```

以下是我非常天真地尝试异步版本（不起作用）：

```
static void OutputDebugStringN(const char *format, ...)
{
    auto future = std::async([]{
        char outstring[256];
        memset(outstring, 0, sizeof(outstring));
        try
        {
            va_list args = {0};
            va_start(args, format); //args = (va_list) (&format+1);

            vsprintf_s(outstring, format, args);

            va_end(args);

            OutputDebugString(outstring);
        }
        catch (...) //most likely reference val arg error (va_list doesn't support ref args)
        {
            OutputDebugString("[OutputDebugStringN] Something went wrong\n");
        }
    }); 
} 
```

而且由于上述方法不起作用，我现在开始认为异步调用 OutputDebugStringN 可能比尝试在函数本身内部启动异步作业更好（这有效，但很麻烦）：

```
auto dstring = std::async([]{ OutputDebugStringN("[NovelScript::ParseTokens] searched bookmark: \"%s\" does not exist\n", bookmark.c_str());} ); 
```

所以这里有两个问题我想问：

1.  我应该如何实现 OutputDebugString 的异步版本？
2.  我是否应该尝试实现 OutputDebugString 的异步版本？

对上述代码的批评和任何其他评论也非常受欢迎。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T11:29:43.153

我认为您应该为您的消息设置一个队列，而不是在每次调用您的函数时启动一个线程，这样您的消息就会以正确的顺序输出干净。

因此，您的函数例如`OutputDebugStringN(const char *format, ... )`将创建消息字符串，然后将单独的打印输出线程从中读取的字符串排队。该线程将调用`OutputDebugString`.

这是一个示例 - 虽然不完整，但不应修改错误处理和 print_from_queue 以运行直到某些终止条件并且对 CPU 更友好一点。

```
std::mutex g_m;
std::deque<std::string> que;
std::atomic<bool> endcond = false;

void queue(std::string msg)
{
  std::lock_guard<mutex> _(g_m);
  que.push_back(msg);
}

void print_from_queue()
{
  while ( !endcond )
  {
    if ( que.size() )
    {
      std::lock_guard<mutex> _(g_m);
      std::string msg = que.front();
      que.pop_front();
      OutputDebugStringA(msg.c_str());
    }
  }
}

int debugf( const char *format,... )
{
  std::vector<char> line(256);
  va_list args;
  va_start( args, format );
  int len = vsprintf_s( &line[0], line.size(), format, args );
  va_end( args );
  queue( &line[0] );
  return len;
}

int _tmain(int argc, _TCHAR* argv[])
{
  auto thr = std::async( std::launch::async, print_from_queue );
  debugf("message1");
  debugf("message2");
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T11:48:48.337

在我看来，调试应该是同步的，而不是异步的。如果调试器在异常发生几秒钟后给你异常，你会感激吗？在您的程序崩溃后（因为您将文件写入 asnyc），您会喜欢一个包含程序状态陈旧数据的日志文件吗？

无论如何，您继续将调试输出设为异步。它解决了什么目的，除了将数据转储到调试窗口之外，您知道它不是最近的，它不反映您/用户或程序的操作，它都是**陈旧**的！你绝对不能依赖它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T11:40:46.297

*对上述代码*和 C++ 异步函数的批评：:p

std::async 的返回值是 std::future 类型的对象。由 std::async 创建的 std::future 的析构函数等待任务执行完毕。所以当你这样做时：

```
auto future = std::async(... 
```

或者

```
auto dstring = std::async([]{ 
```

它创建一个 std::future 类型的对象，并且当您离开 OutputDebugStringN 的范围时，它会调用 std::future 的析构函数，该析构函数会阻塞直到任务被执行。

在我看来，这是 C++ 的一个缺陷。这有点愚蠢（希望这不会冒犯任何人：p），它完全违背了异步的目的。为了获得大多数人期望的行为（显然，您期望它），您必须保留 std::future 对象的列表，然后花费精力（和处理时间）找出销毁单个 std 的正确时间： :future 列表中的对象。这是 OP 中问题 #1 的答案。对于＃2，我认为您不应该在每个调试消息的基础上为此目的使用 std::async 。我认为它带来的问题多于解决的问题。

我不知道有没有一种优雅的方式来解决这个问题。也许其他人可以插话。

至于我将如何实现 OutputDebugString 的异步版本，我将只创建一个字符串的生产者-消费者队列。对此有很多问题，您可以谷歌生产者-消费者队列以获取详细信息。生产者是您发出消息的主线程。消费者是一个线程（或多个线程），它从队列中挑选出元素并调用 Window 的 OutputDebugString。

编辑：万一我冒犯了任何异步爱好者，我想补充一点，std::async 对于进行并行计算非常有用，就像使用 GPU 一样。我怀疑它是为利用并行硬件而设计的。例如：

```
 // merge sort
      {
           auto left =  std::async(.....);  // merge_sort left
           auto right =  std::async(.....);  // merge_sort right
      }

      merge 
```

这样，在我们合并之前，左右都必须排序。如果没有，请等到它们都排序后，但它允许有机会并行处理左右两边。

如果你已经完成了 CUDA 或任何 GPGPU 编码，这应该看起来很熟悉......

# ssl - 如何在 Window 7 中使用 TLS 配置 RDP

> ID：14536405
> 
> 赞同：-2
> 
> 时间：2013-01-26T11:18:24.263
> 
> 标签：ssl, rdp

我有运行 OS Window 7 Ultimate 的服务器和客户端。我想配置以便服务器和客户端在 TLS 下通信。

在服务器上，我进入本地组策略-> 远程桌面主机-> 安全以启用 TLS1.0 的安全层。

当我从客户端连接服务器时，我确实使用 Wireshark 捕获了数据包，但我从未看到 TLS setup 。

关于如何设置 TLS，我做了很多谷歌。它表示自签名证书不受受信任根 CA 的信任。是不是因为这个所以TLS无法设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T14:20:54.000

当同一连接上的协议发生变化时，Wireshark 通常无法猜测协议。对于在同一连接上升级到 SSL/TLS 的大多数协议（使用类似 STARTTLS 的机制），通常都是这种情况。

如果你想看到这个，你必须告诉 Wireshark 将数据包解码为 SSL/TLS：右键单击并选择解码为 -> 传输 -> SSL。

这甚至可以使用自签名证书（例如，通常自动生成并在 Windows 7 Pro 机器上默认配置）。在这种情况下，如果您希望连接安全，您需要手动验证它是在该机器上设置的证书。

# mysql - 在 COALESCED 上使用 LEFT OUTER JOIN

> ID：14536408
> 
> 赞同：1
> 
> 时间：2013-01-26T11:18:38.090
> 
> 标签：mysql, sql

我有这张表，我只想看 AB

```
ID     CODE       COUNT   
102    AB         9
101    AB         8
100    AC         23    //not important!!!!
99     AB         7
98     AB         6
97     AB         5
96     AB         0 
```

对此进行了交谈

```
ID    NEWID     CODE       COUNT   
102   102       AB         9
101   101       AB         8
99    100       AB         7
98    99        AB         6
97    98        AB         5
96    97        AB         0 
```

使用此查询：

```
SELECT t.ID, @NEWID := COALESCE(@NEWID - 1, t.ID) AS NEWID, t.CODE, t.COUNT
FROM
(SELECT ID, CODE, COUNT FROM some_table WHERE CODE = 'AB' ORDER BY ID DESC) t,
(SELECT @NEWID := NULL) _uv; 
```

[http://sqlfiddle.com/#!2/e0b8b/1/0](http://sqlfiddle.com/#!2/e0b8b/1/0)

现在我想计算每个连续 NEWID 的差异。

所以

```
Step 1: 9 - 8 = 1
Step 2: 8 - 7 = 1
Step 3: 7 - 6 = 1
Step 4: 6 - 5 = 1
Step 5: 5 - 0 = 5 
```

我习惯这样做

```
LEFT OUTER JOIN some_table t2 ON t.ID = ( t2.ID + 1 ) 
```

然后取t2.count和t.count之间的差，但是现在当我使用COALESCE时，我无法选择这个NEWID，所以下面的代码不起作用。

```
LEFT OUTER JOIN some_table t2 ON t.NEWID = ( t2.NEWID + 1 ) 
```

那么我应该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:42:54.813

尝试这个：

```
SELECT 
 t1.ID as ID1, 
 t2.ID as ID2, 
 t1.CODE as CODE, 
 t1.COUNT as C1, 
 t2.COUNT as C2,
 t2.COUNT - t1.COUNT as DIFF
FROM 
  some_table t1 
  INNER JOIN some_table t2 ON t1.ID < t2.ID AND t1.CODE = t2.CODE
WHERE
  t1.CODE='AB'
  AND NOT EXISTS 
   (SELECT * FROM some_table t3
    INNER JOIN some_table t4 ON t3.ID < t4.ID and t3.CODE = t4.CODE
    WHERE 
        t3.CODE='AB'
        AND t1.ID = t3.ID
        AND t4.ID < t2.ID 
      )
ORDER BY t1.ID 
```

另一种方法是使用 LIMIT：

```
SELECT
 t.ID1 AS ID,
 t.CODE as CODE,
 t.C2-t.C1 AS DIFF
FROM
(
SELECT 
 t1.ID as ID1, 
 t1.CODE as CODE, 
 t1.COUNT as C1, 
 (SELECT t.COUNT 
  FROM some_table t
  WHERE t.ID > t1.ID AND t.CODE=t1.CODE 
  ORDER BY t.ID 
  LIMIT 1) as C2
FROM 
  some_table t1 
WHERE
  t1.CODE='AB'
ORDER BY t1.ID) t
ORDER BY t.ID1 
```

[http://sqlfiddle.com/#!2/e0b8b/24](http://sqlfiddle.com/#!2/e0b8b/24)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T12:09:25.350

哦，*这*就是你需要顺序 ID 的原因。好吧，您也可以为此使用用户变量，甚至不需要`NEWID`！由于您正在做这样的事情，因此您最好[阅读一下用户变量的工作原理](http://dev.mysql.com/doc/refman/5.5/en/user-variables.html)。

```
SELECT
    t.ID, t.CODE, t.COUNT,
    @PREVCOUNT - t.COUNT DIFFERENCE,
    @PREVCOUNT := t.COUNT  -- Updates for the next iteration, so it
                           -- must come last!
FROM
    (SELECT ID, CODE, COUNT FROM some_table WHERE CODE = 'AB' ORDER BY ID DESC) t,
    (SELECT @PREVCOUNT := NULL) _uv; 
```

[SQL小提琴](http://sqlfiddle.com/#!2/e0b8b/36/0)

# jquery - 允许弹出气泡“跳出”jQuery UI 对话框

> ID：14536420
> 
> 赞同：3
> 
> 时间：2013-01-26T11:20:16.380
> 
> 标签：jquery, html, css, jquery-ui, jquery-ui-dialog

在一个 jQuery UI 对话框中，我正在显示一个选项列表（复选框）。列表中的每个节点的末尾都有一个帮助图标，悬停时会在该图标上显示一个带有信息的弹出气泡。

HTML：

```
<div id="dialog" class="hidden">
    <ul>
        <li><input type="checkbox" name="chk1"/> <label for="chk1">Node 1</label> <img src="http://icons.iconarchive.com/icons/oxygen-icons.org/oxygen/24/Categories-system-help-icon.png" class="nodeTrigger" />
            <div class="popup hidden">
                <span class="bold">Node 1</span><br/>
                Some Long description of what Node 1 entails
            </div>
        </li>
        <li><input type="checkbox" name="chk2"/> <label for="chk2">Node 2</label> <img src="http://icons.iconarchive.com/icons/oxygen-icons.org/oxygen/24/Categories-system-help-icon.png" class="nodeTrigger" />
            <div class="popup hidden">
                <span class="bold">Node 2</span><br/>
                Some Long description of what Node 2 entails
            </div>
            <ul>
                <li>
                    <input type="checkbox" name="chk3"/> <label for="chk3">Node 3</label> <img src="http://icons.iconarchive.com/icons/oxygen-icons.org/oxygen/24/Categories-system-help-icon.png" class="nodeTrigger" />
            <div class="popup hidden">
                <span class="bold">Node 3</span><br/>
                Some Long description of what Node 3 entails
            </div>
                </li>
            </ul>
        </li>
    </ul>
</div> 
```

CSS：

```
#dialog {
    position: relative;    
}

.hidden {
    display: none;
}

.bold {
    font-weight: bold;   
}

.popup {
    background-color: #dddddd;
    border: 1px solid #000000;
    width: 400px;
} 
```

JavaScript（在 jQuery 就绪函数中）：

```
$('img.nodeTrigger').hover(
    function(e){
        var that = $(this);
        var position = that.position();

        var popup = $(that.parent().find('div.popup').get(0));
        var top = position.top - (popup.outerHeight() / 2.0) + (that.outerHeight() / 2.0);
        var left = position.left + that.outerWidth() + 5;
        popup.stop(true, true)
        .css({ 'position': 'absolute', 'top': top, 'left': left, 'z-index': 99999 })
        .fadeIn('slow');
    },
    function(){
        var popup = $(this).parent().find('div.popup');
        popup.stop(true, true).fadeOut('slow');   
    }
);

$('#dialog-trigger').click(function(e){
    e.preventDefault();
    $('#dialog').dialog({
        width: 400,
        height: 300,
        modal: true,
        resizable: false,
        title: 'Choose some items',
        buttons: {
            'Ok': function() { $(this).dialog('close'); }   
        }
    });
}); 
```

你可以在这里看到一个基本的例子：

[http://jsfiddle.net/YZpzN/6/](http://jsfiddle.net/YZpzN/6/)

我的问题是我无法弄清楚如何让弹出气泡跳出对话框。显示气泡时，它包含在对话框中，从而产生滚动条。我需要它“爆发”，必要时覆盖对话框。

**更新**：虽然@flec 的回答解决了眼前的问题，但它并不完全适合我的需要。对话框中可能有很多选择，这意味着对话框本身可能需要一个垂直滚动条来保持其合理的大小。如果可能的话，弹出窗口被对话框右侧的 div 替换也是可以接受的（比如在 div 的右侧有一个信息框，覆盖在覆盖层上）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:25:15.847

您只需要将您的 CSS 更改为：

```
#dialog {
    position: relative;   
    overflow: visible;
} 
```

更新的小提琴：http: [//jsfiddle.net/YZpzN/7/](http://jsfiddle.net/YZpzN/7/)

# actionscript-3 - AS3 - BitmapData FloodFill 平滑

> ID：14536421
> 
> 赞同：0
> 
> 时间：2013-01-26T11:20:27.773
> 
> 标签：actionscript-3, actionscript, bitmapdata

我试图做一个宽容的洪水。

所以我尝试了一个解决方案，也许得到填充的颜色，制作另一个位图并应用模糊并绘制第一个位图数据。但我不知道这是怎么做到的。

# java - 使用分隔符拆分字符串并保存值

> ID：14536422
> 
> 赞同：0
> 
> 时间：2013-01-26T11:20:31.727
> 
> 标签：java, string

由于我正在制作一个简单的 Mastermind 游戏，它将在控制台中播放，我的任务包括通过输入 sth 来启动游戏：“start 4 5 34356”。start 初始化游戏，4 是可能尝试猜测的次数，5 是要猜测的代码长度，34356 是代码本身。我用分隔符分割了字符串，但是如何将它的每个值保存到一个变量中，以便以后可以使用它们？这是我的代码：

```
import java.util.Arrays;

public class ManualNumberGenerator {

    public static String input;
    public static String[] inputArray;

    public static void splitArray() {

        input = Terminal.askString("Enter some values: ");

        inputArray = input.split("DELIMITER");

        String code = Arrays.toString(inputArray);
        System.out.println(code);
    }

    public static void main(String[] args) {
        splitArray();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:25:15.350

这个方法：`public static void splitArray(){`需要返回一个这样的字符串数组：

```
public static String[] splitArray(){

    ...your code
    return inputArray
} 
```

然后在你的主要方法中：

```
String[] inputArray = splitArray(); 
```

stringParts 变量将保存输入数组。然后你可以用数组做你想做的事

如果您需要定义单个变量，您可以执行以下操作：

```
int numPossibleTried = Integer.parseInt(inputArray[1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T11:32:02.307

如果您确定输入参数的数量和类型，您可能希望使用 Scanner 而不是 split。

```
Scanner sc = new Scanner(inputString);
String param1 = sc.next(); // start
int param2 = sc.nextInt(); // 4
int param3 = sc.nextInt(); // 5
int param3 = sc.nextInt(); // 34356 
```

当然，您可能想在实际字符串数之前检查，甚至在调用 sc.next() 之前检查 sc.hasNext()。

[http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html) [1](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)

在回答 NPE 的评论时，也许您忘记声明某些内容。

```
import java.util.Scanner;

public class ScanEx {
        public static void main(String[] args) {
                String str = "start 1 2 123455";
                Scanner sc = new Scanner(str);
                String param1 = sc.next();
                int param2 = sc.nextInt();
                int param3 = sc.nextInt();
                int param4 = sc.nextInt();
                System.out.println(param1 + "\t" + param2 + "\t" + param3 + "\t" + param4);
        }
} 
```

# c - cuda程序中的内存泄漏

> ID：14536431
> 
> 赞同：-2
> 
> 时间：2013-01-26T11:22:10.283
> 
> 标签：c, memory-leaks, cuda

我编写了一个 CUDA 程序来模拟[John Conway 的 Game of Life](http://en.wikipedia.org/wiki/Conway%27s_Game_of_Life)，但有时我会出现内存泄漏（出现不应该存在的单元格）。

这是我的内核：

```
__global__ void gameOfLife(matrix pcuda_main,int lblock,int generations_to_run) {
/************************************
notice: first dimension is one section for read and one for 
write(change purpose every simulation generation). 2 extra section rows
for first and last line not need to check their up and down position evry time
also edge lines ensure that blocks handles edge sectors are having edge lines less that other blocks
************************************/
    __shared__ unsigned int section[2][SECTION_SIZE][CELLS_IN_LINE];
    int i,j;
    unsigned int sum_top_b1,sum_top_b0,sum_cur_b1,sum_cur_b0,sum_bot_b1,sum_bot_b0,newone,newtwo,new4a,new4b;
    unsigned int left_top,left,left_bot,right_top,right,right_bot;
    int read_section=0;
    int write_section=1;
    int bx = blockIdx.x;
    int row = SECTION_ROWS*blockIdx.x+threadIdx.x;
    int rowx = threadIdx.x+SECTION_ROWS;

    // I am zeroeing the perimiters lines since they dont loaded with values and can be corrupt while more lines may be zeroes its done for avoiding ifs
    section[0][rowx>>LINE_NUMBER_BITS_OFFSET][rowx&CELLS_IN_LINE_RESIDUE] = 0;
    section[1][rowx>>LINE_NUMBER_BITS_OFFSET][rowx&CELLS_IN_LINE_RESIDUE] = 0;
    section[0][SECTION_ROWS-1-(rowx>>LINE_NUMBER_BITS_OFFSET)][rowx&CELLS_IN_LINE_RESIDUE] = 0;
    section[1][SECTION_ROWS-1-(rowx>>LINE_NUMBER_BITS_OFFSET)][rowx&CELLS_IN_LINE_RESIDUE] = 0;
    section[0][3*SECTION_ROWS+1-(rowx>>LINE_NUMBER_BITS_OFFSET)][rowx&CELLS_IN_LINE_RESIDUE] = 0;
    section[1][3*SECTION_ROWS+1-(rowx>>LINE_NUMBER_BITS_OFFSET)][rowx&CELLS_IN_LINE_RESIDUE] = 0;
    section[0][2*SECTION_ROWS+1-(rowx>>LINE_NUMBER_BITS_OFFSET)][rowx&CELLS_IN_LINE_RESIDUE] = 0;
    section[1][2*SECTION_ROWS+1-(rowx>>LINE_NUMBER_BITS_OFFSET)][rowx&CELLS_IN_LINE_RESIDUE] = 0;
    __syncthreads(); // ensure no crashes between zeroeing perimiter lines and loading data
    // since entire warp access the first and last cell together no extrag edges are needed however only first and last line access lines beyond the edges
    for(i=0;i<CELLS_IN_LINE;i++) {
        if ( bx > 0 ) {
            section[0][rowx-SECTION_ROWS+1][i] = pcuda_main[((row-SECTION_ROWS)<<LINE_NUMBER_BITS_OFFSET)+i];
        }
        section[0][rowx+1][i] = pcuda_main[((row)<<LINE_NUMBER_BITS_OFFSET)+i];
        if ( bx < lblock ) {
            // not last block sector row
            section[0][rowx+SECTION_ROWS+1][i] = pcuda_main[((row+SECTION_ROWS)<<LINE_NUMBER_BITS_OFFSET)+i];
        }
    }
    __syncthreads(); // ensure all data read
    for ( i=0;i<generations_to_run;i++ ) {
        for(j=0;j<CELLS_IN_LINE;j++) {
            if ( bx > 0 ) {
                if ( j > 0 ) {
                    left_top = section[read_section][rowx-SECTION_ROWS][j-1];
                    left = section[read_section][rowx-SECTION_ROWS+1][j-1];
                    left_bot = section[read_section][rowx-SECTION_ROWS+2][j-1];
                } else {
                    left_top = 0;
                    left=0;
                    left_bot=0;
                }
                if ( j<CELLS_IN_LINE_RESIDUE ) {
                    right_top= section[read_section][rowx-SECTION_ROWS][j+1];
                    right= section[read_section][rowx-SECTION_ROWS+1][j+1];
                    right_bot= section[read_section][rowx-SECTION_ROWS+2][j+1];
                } else {
                    right_top = 0;
                    right=0;
                    right_bot=0;
                }

                CELL32(section[write_section][rowx-SECTION_ROWS+1][j],
                    left_top,section[read_section][rowx-SECTION_ROWS][j],right_top,
                    left,section[read_section][rowx-SECTION_ROWS+1][j],right,
                    left_bot,section[read_section][rowx-SECTION_ROWS+2][j],right_bot,
                    sum_top_b1,sum_top_b0,sum_cur_b1,sum_cur_b0,sum_bot_b1,sum_bot_b0,newone,newtwo,new4a,new4b);
            }
            if ( j > 0 ) {
                left_top = section[read_section][rowx][j-1];
                left = section[read_section][rowx+1][j-1];
                left_bot = section[read_section][rowx+2][j-1];
            } else {
                left_top = 0;
                left=0;
                left_bot=0;
            }
            if ( j<CELLS_IN_LINE_RESIDUE ) {
                right_top= section[read_section][rowx][j+1];
                right= section[read_section][rowx+1][j+1];
                right_bot= section[read_section][rowx+2][j+1];
            } else {
                right_top = 0;
                right=0;
                right_bot=0;
            }
            CELL32(section[write_section][rowx+1][j],
                left_top,section[read_section][rowx][j],right_top,
                left,section[read_section][rowx+1][j],right,
                left_bot,section[read_section][rowx+2][j],right_bot,
                sum_top_b1,sum_top_b0,sum_cur_b1,sum_cur_b0,sum_bot_b1,sum_bot_b0,newone,newtwo,new4a,new4b);
            if ( bx < lblock ) {
                if ( j > 0 ) {
                    left_top = section[read_section][rowx+SECTION_ROWS][j-1];
                    left = section[read_section][rowx+SECTION_ROWS+1][j-1];
                    left_bot = section[read_section][rowx+SECTION_ROWS+2][j-1];
                } else {
                    left_top = 0;
                    left=0;
                    left_bot=0;
                }
                if ( j<CELLS_IN_LINE_RESIDUE ) {
                    right_top= section[read_section][rowx+SECTION_ROWS][j+1];
                    right= section[read_section][rowx+SECTION_ROWS+1][j+1];
                    right_bot= section[read_section][rowx+SECTION_ROWS+2][j+1];
                } else {
                    right_top = 0;
                    right=0;
                    right_bot=0;
                }
                CELL32(section[write_section][rowx+SECTION_ROWS+1][j],
                    left_top,section[read_section][rowx+SECTION_ROWS][j],right_top,
                    left,section[read_section][rowx+SECTION_ROWS+1][j],right,
                    left_bot,section[read_section][rowx+SECTION_ROWS+2][j],right_bot,
                    sum_top_b1,sum_top_b0,sum_cur_b1,sum_cur_b0,sum_bot_b1,sum_bot_b0,newone,newtwo,new4a,new4b);
            }
        }
        read_section = read_section^1;
        write_section = write_section^1;
        //printf("passed %u generation for row: %u\n",i,row);
        __syncthreads();
    }

    // now writing back to the global memory notice write section turns into read section after every generation so 
    // I write the read section
    for(i=0;i<CELLS_IN_LINE;i++) {
        pcuda_main[((row)<<LINE_NUMBER_BITS_OFFSET)+i] = section[read_section][rowx+1][i];
    }
    __syncthreads();
} 
```

这是单元格 32 的定义及其依赖项：

```
#define HALFADDER(s0,s1,a0,a1)do{s1=(a0)&(a1);s0=(a0)^(a1);}while(0)
#define FULLADDER(s0,s1,a0,a1,a2)do{s1=((a0)&(a1))|((a2)&((a0)^(a1)));s0 =(a2)^((a0)^(a1));}while(0)

#define CELL32(output,top_left,top,top_right,left,cur,right,bot_left,bot,bot_right,sum_top_b1,sum_top_b0,sum_cur_b1,sum_cur_b0,sum_bot_b1,sum_bot_b0,newone,newtwo,new4a,new4b)do{FULLADDER(sum_top_b0,sum_top_b1,(top_left<<31)|(top>>1),top,(top_right>>31)|(top<<1));HALFADDER(sum_cur_b0,sum_cur_b1,(left<<31)|(cur>>1),(right>>31)|(cur<<1));FULLADDER(sum_bot_b0,sum_bot_b1,(bot_left<<31)|(bot>>1),bot,((bot_right>>31)|(bot<<1)));FULLADDER(newone,newtwo,sum_bot_b0,sum_cur_b0,sum_top_b0);FULLADDER(newtwo,new4a,newtwo,sum_bot_b1,sum_top_b1);HALFADDER(newtwo,new4b,newtwo,sum_cur_b1);newone=newone|cur;output=newone&newtwo&(~new4a)&(~new4b);}while(0) 
```

这是主循环和内存副本：

```
cudaMalloc((void **)(&pcuda),NUM_CELLS*sizeof(unsigned int));
    //cudaMalloc((void **)(&pdata),ROWS*sizeof(int));
    cudaMemcpy((void *)pcuda,(void *)p,sizeof(unsigned int)*NUM_CELLS,cudaMemcpyHostToDevice);
    cudaDeviceSynchronize();

    while ( generations > 0 ) {
        if ( generations > SECTION_ROWS ) {
            generations_run = SECTION_ROWS;
        } else {
            generations_run = generations;
        }
        generations -= generations_run;
        printf("running params last_row:%u, generations_run:%u, generations left:%u,grid size:%d, array size in bytes: %u,last cell index: %d\n",
            ROWS-SECTION_ROWS,generations_run,generations,dimGrid.x,NUM_CELLS*sizeof(unsigned int),((ROWS-1)<<LINE_NUMBER_BITS_OFFSET)+CELLS_IN_LINE_RESIDUE);
        gameOfLife<<<dimGrid,dimBlock>>>(pcuda,dimGrid.x-1,generations_run);
        error = cudaDeviceSynchronize();
        if (error != cudaSuccess)
        {
            printf("cudaGetDeviceProperties returned error code %d, line(%d)\n", error, __LINE__);
            lineid = __LINE__;
            err = error;
        }
        else
        {
            printf("GPU Device %d:synchronized\n", devID);
        }
    }
    cudaMemcpy((void *)p,(void *)pcuda,sizeof(int)*NUM_CELLS,cudaMemcpyDeviceToHost); 
```

内存泄漏在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T22:41:09.383

CUDA 工具包带有 cuda-memcheck，默认情况下，它将检查内核中的越界访问。它还具有其他模式，包括泄漏检查器。请注意，您需要在退出之前调用 cudaDeviceReset() 以便该工具知道查找未释放的设备内存。

# php - 登录返回空白密码错误？

> ID：14536436
> 
> 赞同：1
> 
> 时间：2013-01-26T11:22:37.390
> 
> 标签：php, login, passwords

我一直在使用教程进行注册和登录页面。一切都很完美，除非用户输入了错误的密码。

如果未输入密码，则将正常显示所述错误。

如果输入了正确的密码，它就会登录。

如果输入了错误的密码，它会进入一个空白页面？！

我想要一个错误的密码来显示一条消息，就像输入错误的用户名一样。我已经包含了我的整个`login.php`代码：

```
include('db.php');

if(!isset($_POST['login'])) {
    include('form.php');
} else {

    if(isset($_POST['user'])&&$_POST['user']==""||!isset($_POST['user'])) {
        $error[] = "Username Field can't be left blank";
        $usererror = "1";
    }

    if(!isset($usererror)) {
        $user = mysql_real_escape_string($_POST['user']);
        $sql = "SELECT * FROM users WHERE user = '$user'";
        if(mysql_num_rows(mysql_query($sql))=="0") {
            $error[] = "Can't find a user with this username";
        }
    }

    if(isset($_POST['pass'])&&$_POST['pass']==""||!isset($_POST['pass'])) {
        $error[] = "password Field can't be left blank";
    }

    if(isset($error)) {
        if(is_array($error)) {
            echo "<div class=\"error\"><span>please check the errors and refill the form<span><br/>";
            foreach ($error as $ers) {
                echo "<span>".$ers."</span><br/>";
            }
            echo "</div>";
            include('form.php');
        }
    }

    if(!isset($error)) {
        $suser=mysql_real_escape_string($_POST['user']);
        $spass=md5($_POST['pass']);//for secure passwords
        $find = "SELECT * FROM users WHERE user = '$suser' AND password = '$spass'";
        if(mysql_num_rows(mysql_query($find))=="1"or die(mysql_error())) {
            session_start();
            $_SESSION['username'] = $suser;
            header("Location: loggedin.php");
        } else {
            echo "<div class=\"warning\"><span>Some Error occured durring processing your data</div>";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T11:29:18.620

```
if(mysql_num_rows(mysql_query($find))=="1"or die(mysql_error())){ 
```

如果输入了错误的密码，`mysql_num_rows(mysql_query($find))`则为 0，因此结果为`die(mysql_error())`. 但是由于没有`mysql_error()`，您会看到一个空白页。

尝试这个

```
$result = mysql_query($find) or die(mysql_error());
if (mysql_num_rows($result) == 1) {
    // proceed
} else {
    // authentication failed
} 
```

编辑：这仅用于说明目的。处理 MySQL 时使用[MySQLi](http://php.net/mysqli)或[PDO 。](http://php.net/pdo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T11:33:14.610

该代码对我来说有点混乱，请考虑使用此代码。

```
<?php

include('db.php');
if(isset($_POST['login'])) {
     $username = mysql_real_escape_string($_POST['user']);
     $password = md5($_POST['pass']);

     if(empty($username) || empty($password)) {
          echo "Empty username or password.";
     } else {
          mysql_query("SELECT * FROM `users` WHERE `user` = '$user' AND `password.md5` = '$password'");
          if(mysql_num_rows() == 1) {
               // login successfull 
               session_start();
               $_SESSION['username'] = $username;
               header("Location: loggedin.php");
          } else {
               echo "Invalid username or password.";
          }
     }
} else {
     include  ('form.php');
}

?> 
```

# dart - 你如何在 Dart 中创建一个 Stream？

> ID：14536437
> 
> 赞同：40
> 
> 时间：2013-01-26T11:22:44.573
> 
> 标签：dart

我基本上知道如何使用它们；例如监听元素的 onClick 流。

但是，您如何设置自己的 Streams？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-01-26T16:15:32.693

## 简单的例子

这是一个完整的工作示例：

```
import 'dart:async';
import 'dart:io';

class Application {
  Stream onExit;

  Application() {
    // Create a stream controller and assign its stream to "onExit".
    var controller = new StreamController();
    onExit = controller.stream;

    // Create some class that uses our stream.
    new UserOfStream(this);

    // Whenever we exit the application, notify everyone about it first.
    controller.add('we are shutting down!');
    exit(0);
  }
}

class UserOfStream {
  UserOfStream(app) {
    app.onExit.listen((String message) => print(message));
  }
}

main() => new Application(); 
```

您还可以做一些很酷的事情，例如检查是否有订阅者，`controller.hasListener`或者您可以[发出错误信号](http://api.dartlang.org/docs/releases/latest/dart_async/StreamController.html#addError)。请务必查看 API 文档[`StreamController`](http://api.dartlang.org/docs/releases/latest/dart_async/StreamController.html)。

您可以`new StreamController.broadcast()`用于允许多个侦听器。

## 对于复制粘贴

这是创建流的简单方法（复制粘贴的绝佳片段）：

```
class Something {
  StreamController _onExitController = new StreamController.broadcast();
  Stream get onExit => _onExitController.stream;
} 
```

然后该类可以访问`_onExitController`以控制流（例如`.add()`）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-04T21:02:10.620

此外，您还可以使用其命名构造函数之一直接`StreamController`实例化 a ：`Stream`

*   `Stream.fromFuture()`返回一个触发一个事件的流（无论`Future`完成到什么。）

*   `Stream.fromIterable()`返回将`Iterable`元素转换为事件序列的流。

*   `Stream.periodic()`返回定期触发计算事件的流。

这非常方便，因为您可以编写期望使用流的代码，但是对于如何将事件提供给该类，您有多种选择。例如：`Stream.fromIterable()` 可以在单元测试中用于将已知的事件序列触发到一个类，否则通常会从文件中读取数据事件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T22:31:35.783

我刚刚创建了一个名为[event_stream](http://pub.dartlang.org/packages/event_stream)的新 Dart 库，以便更轻松地在您的类上创建自定义事件。这是一个例子：

```
class ClassWithEvents implements NotifyPropertyChanged {
  String _someProperty;

  final EventStream<PropertyChangedEventArgs> _onPropertyChangedEvent = new EventStream<PropertyChangedEventArgs>();
  Stream<PropertyChangedEventArgs> get onPropertyChanged => _onPropertyChangedEvent.stream;

  final EventStream _onClosedEvent = new EventStream();
  Stream get onClosed => _onClosedEvent.stream;

  String get someProperty => _someProperty;
  set someProperty(String value) {
    _onPropertyChangedEvent.signal(new PropertyChangedEventArgs('someProperty', value));
    _someProperty = value;
  }

  close() {
    _onClosedEvent.signal();
  }
}

main() {
  var c = new ClassWithEvents();
  c.onPropertyChanged.listen((PropertyChangedEventArgs<String> args) => print('changed: name=${args.propertyName} value=${args.value}'));
  c.onClosed.listen((_) => print('closed'));
  c.someProperty = "test";
  c.close();
} 
```

# regex - 如何使用正则表达式拆分命令字符串

> ID：14536441
> 
> 赞同：0
> 
> 时间：2013-01-26T11:23:08.093
> 
> 标签：regex

我必须使用正则表达式将命令字符串拆分为多个段。我正在寻找一个非常基本的解析器来创建一些自定义函数，例如我有这个命令：

```
rm --remove all --keep some --but-not *.php --or-like "?-imp-*.*" 
```

现在我想将此字符串拆分为多个段，每个段都包含参数名称和值，例如

```
rm
--remove all
--keep some
--but-not *.php
--or-like "?-imp-*.*" 
```

所以我可以进一步将每个段从空格中分离出来，并将参数名称和值分开。

我不擅长正则表达式。到目前为止，我已经编写了这个正则表达式来仅提取参数和值部分，但它与字符串末尾的单词或带有特殊字符的单词不**`*`**匹配**`?`**

**正则表达式**

```
(?<=\s)--([^--]*)(?=(\s--)) 
```

然后我通过

```
(^\w+) 
```

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:58:08.287

使用正则表达式进行解析不是一个好主意，但应该使用正则表达式进行标记。

话虽如此，这是一个与您的场景相匹配的不完美正则表达式（但不是所有用例）

在javascript中实现...

```
str = 'rm --remove all --keep some --but-not *.php --or-like "?-imp-*.*"'   
regex = /(^\w+\b|--[\w-]+(\s([\w*.]+|".+?"))?)/g
res = str.match(regex)
// ['rm','--remove all','--keep some','--but-not *.php','--or-like "?-imp-*.*"'] 
```

每个项目都需要进一步处理以拆分为键和值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T12:47:44.453

Javascript 中的示例实现：

```
var match,
    str = 'rm --remove all --keep some --but-not *.php --or-like "?-imp\'\'-*.*"',
    args = [],
    reg = /\s--(\S+)\s+((["']).*?[^\\]\3|\S+)/g;

while ( match = reg.exec( str ) ) {
    args.push( [ match[1], match[2] ] );
}

console.log( args );

/* 
    [ [ "remove", "all" ], [ "keep", "some" ],
      [ "but-not", "*.php" ], [ "or-like", ""?-imp-*.*"" ] ]
 */ 
```

注意：这并不是完全无懈可击的，它要求首先验证命令的格式。

已知限制：参数的值可能不以引号开头并且没有右引号，例如，诸如`"`and之类`'n`的值会破坏解析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T16:12:36.810

为此，我将使用为 javascript 实现 GetOpt 的库（否则你正在重新发明轮子）：

一个快速的谷歌搜索带来了以下内容：

*   [http://code.google.com/p/v8cgi/source/browse/trunk/lib/getopt.js?r=447](http://code.google.com/p/v8cgi/source/browse/trunk/lib/getopt.js?r=447)
*   [http://github.com/davepacheco/node-getopt](http://github.com/davepacheco/node-getopt)
*   [https://npmjs.org/package/OptionParser](https://npmjs.org/package/OptionParser)

请注意，我没有尝试过任何这些。

# java - 隐藏一个 JFrame 并通过单击停靠图标再次显示它

> ID：14536445
> 
> 赞同：1
> 
> 时间：2013-01-26T11:23:41.593
> 
> 标签：java, macos, swing, jframe

我的应用程序有一个 JFrame 并且每秒检查一次`x`是否有变化。因此，我想通过`setVisible(false)`单击关闭按钮来隐藏我的 JFrame，并在单击 Dock 中的图标（我使用的是 Mac OS，但它应该与 Windows 任务栏的工作方式相同）时重新显示它。你知道：许多应用程序都会做这种临时隐藏。

你有任何想法如何做到这一点？如何监听这些点击事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T17:29:40.180

这是一个小示例，如何在托盘中隐藏/打开窗口。

```
import java.awt.Image;
import java.awt.SystemTray;
import java.awt.Toolkit;
import java.awt.TrayIcon;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

import javax.swing.JFrame;

public class Test {

    public static void main(String[] args) throws Exception {
        final JFrame frm = new JFrame("Test");
        Image im = Toolkit.getDefaultToolkit().getImage("c:\\icons\\icon1.png");
        final TrayIcon tri = new TrayIcon(im);
        tri.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                frm.setVisible(true);
                try {
                    SystemTray.getSystemTray().remove(tri);
                } catch (Exception ex) {
                    ex.printStackTrace();
                }
            }
        });
        frm.addWindowListener(new WindowAdapter() {
            @Override
            public void windowClosing(WindowEvent e) {
                try {
                    SystemTray.getSystemTray().add(tri);
                } catch (Exception ex) {
                    ex.printStackTrace();
                }
                frm.setVisible(false);
            }
        });
        frm.setSize(100, 100);
        frm.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-20T08:10:00.203

使用`com.apple.eawt`或`java.awt.Desktop`包来监听应用程序关闭、隐藏或重新激活时发生的事件。

尤其`com.apple.eawt.AppReOpenedEvent`是在单击 Dock 图标时施放。当您使用 处理事件时`com.apple.eawt.AppReOpenedListener`，再次将框架设置为可见：

```
@Override
public void appReOpened(AppReOpenedEvent arg0) {
    invalidate(); // Suppose these are optional, but make sure the layout is up to date
    pack();
    validate();
    setVisible(true);
} 
```

# wcf - 从 Azure ACS 获取 SAML 令牌

> ID：14536452
> 
> 赞同：0
> 
> 时间：2013-01-26T11:24:21.820
> 
> 标签：wcf, security, saml-2.0, azure-acs

我们目前有一些 WCF 服务使用 ACS 的主动身份验证，目前使用如下：

*   用户调用 - 用户调用我们的旧 api，在 POST 请求中使用自定义消息格式的用户名和密码。
*   API 然后调用在请求中提供此用户名和密码的其他 WCF 服务，后者通过 ACS 进行身份验证以获取服务所需的令牌

我们要实现以下内容：

*   用户调用我们的旧 api，在 POST 请求中使用自定义消息格式的用户名和密码。
*   剥离 API 中的用户名和密码，并使用这些作为服务身份的凭据联系 ACS，获取 SAML 令牌作为响应
*   API 然后调用在请求中提供此 SAML 令牌的 WCF 服务

我正在[阅读](http://msdn.microsoft.com/en-us/library/windowsazure/hh674475.aspx#BKMK_1)为完成此操作需要做什么，但我读过的大多数[示例](http://blogs.msdn.com/b/rockyh/archive/2010/04/15/azure-access-control-service-client-patterns-part-1.aspx)/[示例](http://nirajrules.wordpress.com/2011/11/28/demystifying-access-control-service/)都在谈论从 azure ACS 服务获取 SWT 令牌，而不是获取 SAML 令牌。

这是因为它们已经过时了，并且类似的方法将在 ACS 2.0 中工作以获取 SAML 令牌？

还是不支持？（大概它必须是 WCF 完成的）

有没有人有任何如何做到这一点的例子。

# ios - 如何从以前的应用程序版本中删除 Settings.bundle？

> ID：14536454
> 
> 赞同：7
> 
> 时间：2013-01-26T11:24:58.763
> 
> 标签：ios, settings.bundle, inappsettingskit

我的 iPad 应用程序当前使用 Settings.bundle 来允许通过内置 Settings.app 和 InAppSettingsKit 进行设置。我现在想完全切换到 IASK 并禁用内置设置。我已将 Settings.bundle 文件夹重命名为 InAppSettings.bundle，但是当我将这个新版本部署到我的测试设备时，旧的设置数据似乎仍然存在 - 至少，我仍然可以通过 Settings.app 访问旧设置。

安装新版本的应用程序时，有没有办法强制删除 Settings.bundle？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T18:36:46.640

确保您在 Xcode 中进行了干净的构建。对于开发版本，您还需要先从模拟器或设备中删除应用程序。否则旧文件会留在原处。

# magento - Magento 服装模块显示 404

> ID：14536455
> 
> 赞同：1
> 
> 时间：2013-01-26T11:25:01.477
> 
> 标签：magento, module, http-status-code-404

我尝试了[http://www.satollo.net/magento-pdf-invoices-customer-dashboard/comment-page-1#comment-47565](http://www.satollo.net/magento-pdf-invoices-customer-dashboard/comment-page-1#comment-47565)上的教程。

这允许用户在我的 Magento 商店的前端以 PDF 格式查看发票。问题是，当我单击指向`Pdfinvoice/index/invoices/order_id/5/`它的链接时，会显示 404 错误。

我注册模块如下：（重命名为模块`Pdfinvoice`以避免与另一个模块冲突）

```
<?xml version="1.0"?>
<config>
<modules>
    <Pdfinvoice>
        <active>true</active>
        <codePool>local</codePool>
    </Pdfinvoice>
</modules>
 </config> 
```

`app/etc/modules/Pdfinvoice.xml`

我为此头破血流。也许模块没有注册？我试过用谷歌搜索它，但我无法让它工作。

有谁知道这个问题的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T11:55:22.437

在模块定义 xml 中重命名模块时，请确保对本地文件夹 (app/code/local/Pdfinvoice)、config.xml 执行相同操作：

应用程序/代码/本地/Pdfinvoice/etc/config.xml

```
<config>
<modules>
    <Pdfinvoice>
        <version>1.0.0</version>
    </Pdfinvoice>
</modules>

<frontend>
    <routers>
        <pdf>
            <use>standard</use>
            <args>
                <module>Pdfinvoice</module>
                <frontName>pdfinvoice</frontName>
            </args>
        </pdf>
    </routers>
</frontend> 
```

..和你的新控制器：

应用程序/代码/本地/Pdfinvoice/controllers/IndexController.php

```
<?php
class Pdfinvoice_IndexController extends Mage_Core_Controller_Front_Action {

public function invoicesAction() {
... 
```

完美无瑕，我在几分钟内安装了模块。

# php - 如何获取颜色和服务的 $row 数据

> ID：14536458
> 
> 赞同：0
> 
> 时间：2013-01-26T11:25:26.187
> 
> 标签：php, mysql

我正在尝试整理一个网络投资组合，但如果可以的话，我不知道如何实现它！

基本上我追求的是...

在投资组合页面上，列出客户的详细信息及其名称、描述、标签（html、css、photoshop、jquery 等）、使用的颜色（黑色、白色、蓝色、绿色等）和使用的服务等。

目前在我的客户表中，我有： **“ID 标题描述标签服务颜色客户”**

使用当前的系统，我必须在一行中声明所有颜色和服务，这意味着我无法将内容分开以使用 css 设置样式（见下文）。

**我希望能够将每个项目使用的颜色显示为 16x16 色块，并将服务显示为`<ul><li></li></ul>`列表。

**这可能吗？**

我当前的脚本可以在这里找到：http: [//davidpottrell.co.uk/paste/portfolio.txt](http://davidpottrell.co.uk/paste/portfolio.txt)

我所追求的（在图片右侧找到） [http://davidpottrell.co.uk/paste/todo.png](http://davidpottrell.co.uk/paste/todo.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:34:34.363

您目前如何保存服务和颜色？您是否将字符串写入`service1;service2;service3`服务列？如果是这样，请使用 PHPs`explode()`函数

```
$var = "service1;service2;service3";
$result = explode(";", $var);

var_dump($result) 
```

现在您可以遍历数组并将每个服务替换为一些图像/列表项或其他内容。它应该像那样工作，虽然我没有测试它：

```
while($row = mysql_fetch_array($result)) {

    $service_array = explode(",", $row[services]);
    echo "<div class='portfolio_block'><h3>Services</h3>";

    if(count($services)) {
        echo "<ul>";

        foreach($service_array as $service) {
            echo "<li>" . $service . "</li>";
        }

        echo "</ul>"
    }

    echo "</div>";
} 
```

我还建议采纳 Jamies 的建议并从`mysql_*`函数切换到 PDO。并且对于“样式化”列表项添加一些类标签:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T11:31:23.430

```
$db = new PDO('mysql:host=localhost;dbname=testdb;charset=utf8', 'username', 'password');

$query = $db->query('SELECT * FROM client');
foreach($query as $row) {

    // I assume you're storing colours as a delimited string? (red,green,yellow)
    $colours = explode(',', $row['colours']);
    if (count($colours)) {
       foreach ($colours as $colour) {
            echo '<div class="colour_block" id="'.$colour.'"></div>';
       }
    }

    // Same thing with services
    $services = explode(',', $row['services']);
    if (count($services)) {
       echo '<ul>';
       foreach ($services as $service) {
            echo '<li id="'.$service.'">'.$service.'</div>';
       }
       echo '</ul>';
    }

} 
```

# python - 具有多个参数的简单函数 Python 2.7

> ID：14536463
> 
> 赞同：0
> 
> 时间：2013-01-26T11:25:47.643
> 
> 标签：python, function

我正在学习 Zelle 的 Python 编程，但在函数上有点卡住了。

我们得到了这个：

```
def addInterest(balance, rate):
    newBalance = balance * (1+rate)
    balance = newBalance

def test(): 
    amount = 1000
    rate = 0.05
    addInterest(amount, rate)
    print amount

test() 
```

此代码无法打印 1050 作为输出。但以下成功：

```
def addInterest(balance, rate):
    newBalance = balance * (1+rate)
    return newBalance

def test():
    amount = 1000
    rate = 0.05
    amount = addInterest(amount, rate)
    print amount

test() 
```

细微的差别在于*addInterest*函数的第 3 行。Zelle 解释了这一点，但我还没有掌握它的窍门。你能解释一下为什么#1 代码 - 几乎是相同的 - 不做 #2 做的事吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T11:34:09.887

那是因为`balance`你在里面修改的对象和你传递给函数的对象`addInterest`是不一样的。`amount`简而言之，您修改了对象的本地副本，传递给函数，因此原始对象的值保持不变。如果您在 python shell 中运行以下代码，您可以看到它：

```
>>> def addInterest(balance, rate):
...     print (balance)
...     newBalance = balance * (1 + rate)
...     balance = newBalance
... 
>>> amount = 1000
>>> rate = 0.05
>>> print id(amount)
26799216
>>> addInterest(amount, rate)
1000
>>> 
```

该`id`函数返回一个对象的标识，可以用来测试两个对象是否相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T11:30:40.527

关键词是`return`。Return 几乎用于将函数的值返回给变量（在您的第二个代码中，变量是`amount`）。

在＃1中，您没有返回任何东西，这就是为什么`print amount`不是您想要的。

在您的第二个代码中，您是`returning`newBalance 的价值。该变量`amount`现在与函数中的值相同`newBalance`。

所以在你的第一个代码中，什么都不做`addInterest(amount, rate)`。它没有返回任何东西，所以它没有用。但是，您在第二个功能中所做的事情是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T11:44:42.473

查看有关[如何通过引用传递变量的漂亮答案？](https://stackoverflow.com/questions/986006/python-how-do-i-pass-a-variable-by-reference)

```
 self.variable = 'Original'
    self.Change(self.variable)

def Change(self, var):
    var = 'Changed' 
```

# jquery - 如何使用jQuery从下拉数组中获取值

> ID：14536465
> 
> 赞同：1
> 
> 时间：2013-01-26T11:26:41.460
> 
> 标签：jquery, arrays

我需要经过几个`<tr>`s （我事先不知道确切的数字，因为它们是动态生成的），我有一些下拉菜单。下拉菜单的名称设置为`item_size[]`,`item_set[]`和`item_quantity[]`。我需要得到他们的价值`onsubmit`。

我知道我需要在这里使用每个函数，比如`$('tr.item').each(function(){`浏览它们，然后需要找到一种方法来获取在三个下拉列表中选择的值。

有什么想法吗？谢谢。

```
<tr class="item">
    <td>some stuff</td>
    <td><select name = "item_size[]" ...><option>...</option><option>...</option></select></td>
    <td><select name = "item_set[]" ...><option>...</option><option>...</option></select></td>
    <td>some stuff</td>
    <td><select name = "item_quantity[]" ...><option>...</option><option>...</option></select></td>
    <td>some stuff</td>
</tr>
<tr class="item">
    <td>some stuff</td>
    <td><select name = "item_size[]" ...><option>...</option><option>...</option></select></td>
    <td><select name = "item_set[]" ...><option>...</option><option>...</option></select></td>
    <td>some stuff</td>
    <td><select name = "item_quantity[]" ...><option>...</option><option>...</option></select></td>
    <td>some stuff</td>
</tr>
<tr class="item">
    <td>some stuff</td>
    <td><select name = "item_size[]" ...><option>...</option><option>...</option></select></td>
    <td><select name = "item_set[]" ...><option>...</option><option>...</option></select></td>
    <td>some stuff</td>
    <td><select name = "item_quantity[]" ...><option>...</option><option>...</option></select></td>
    <td>some stuff</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T11:42:54.440

```
var inputs = new Array();
$("tr.item").each(function() {
    var tr_inputs = new Array();
    $(this).find("select").each(function() {
        tr_inputs[$(this).attr("name")] = $(this).val();
    });
    inputs.push(tr_inputs);
});
console.log(inputs); 
```

您可以从数组中检索每个项目的值`inputs`。每个项目由 3 个键值对组成`item_size[]`，`item_set[]`和`item_quantity[]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T11:55:55.323

@Jeremy我不明白为什么你为选择设置名称，例如'item_size []'，即带有数组括号。而不是设置名称，使用像 id ='item_size' 这样的 id 属性，你必须为你的 'td' 设置一个 'id' 或 'class'

```
<td class = "itemsize"><select id= "item_size" ...><option>...</option><option>...</option></select></td>
    <td class = "itemset"><select id= "item_set" ...><option>...</option><option>...</option></select></td> 
```

我假设您的“提交”是一个简单的按钮单击，然后您可以获得每个下拉列表的选定项目：

```
var count =0, itemSize = new Array(), itemSet = new Array();    
$('#yourTableId tr').each(function(index) {

 itemSize[count] = $(this).find('.itemsize').find('#item_size:selected').val();
 itemSet[count] = $(this).find('.itemset').find('#item_set:selected').val();
count++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T12:16:52.467

它可能就像使用内置函数一样简单[`serializeArray()`](http://api.jquery.com/serializeArray/)：

```
var result = $('select').serializeArray(); 
```

您可以操纵选择器以适合，一旦您拥有数据，您就可以用它做您喜欢的事情。

这是一个小提琴：http: [//jsfiddle.net/wnH4m/](http://jsfiddle.net/wnH4m/)

**编辑**：这不会对您的选择进行分组，所以如果这是您需要的，那么您最好像安东尼的回答那样滚动自己。（您可以解析 serializeArray() 的输出，但循环遍历 DOM*和*数据集可能不是最好的主意。）

# android - 在 ListView atr Android 中搜索

> ID：14536468
> 
> 赞同：0
> 
> 时间：2013-01-26T11:27:10.927
> 
> 标签：android

我的 TextChangedListener 搜索代码不起作用。我在 ListView 中没有任何变化，你能说我的问题在哪里吗？我在这篇文章[http://www.androidhive.info/2012/09/android-adding-search-functionality-to-listview/](http://www.androidhive.info/2012/09/android-adding-search-functionality-to-listview/)中读到了它，在其他材料中我也尝试过

```
 list.setTextFilterEnabled(true);
    list.setFilterText(s.toString()); 
```

但这也行不通

```
code:

   public class SicksListActivity extends Activity implements TextWatcher{
private DBHelper dbHelper;
private SimpleCursorAdapter adapter;
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.sickness_list); 
    displaySicks();
}
private void displaySicks(){
    Queries queries=new Queries();
    Cursor c=queries.getAllSicks(this);
    ListView list=(ListView)findViewById(android.R.id.list);
    EditText inputText=(EditText)findViewById(R.id.sick_input_search);
    inputText.addTextChangedListener(this);
    String [] colums={SicknessDB.NAME};
    int [] views={android.R.id.text1};
    adapter=new SimpleCursorAdapter(this,
            android.R.layout.simple_expandable_list_item_1, c, colums,views);
    list.setAdapter(adapter);
}

public void afterTextChanged(Editable s) {
    // TODO Auto-generated method stub

}
public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    // TODO Auto-generated method stub

}
public void onTextChanged(CharSequence s, int start, int before, int count) {
    // TODO Auto-generated method stub
    this.adapter.getFilter().filter(s);

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:34:35.763

我没有像您那样实施，但我已经多次这样做并且效果很好：

```
public void onTextChanged(CharSequence s,int start, int before,int count)   //Filter Data When Entering Data On EditText
        {
            Cursor FilteredListCursor = YourDBAdapter.instance.CursorFilteredData(s.toString());    //Retrieve Filtered Cursor
            ZoneCardListadapter.changeCursor(FilteredListCursor);

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:00:24.590

试着放

```
list.invalidateViews();
this.adapter.notifyDataSetChanged(); 
```

后

```
this.adapter.getFilter().filter(s); 
```

假设`this.adapter`是您 visible`ListView`的实际适配器。

# iphone - UIScrollView 开始另一个位置

> ID：14536469
> 
> 赞同：1
> 
> 时间：2013-01-26T11:27:15.390
> 
> 标签：iphone, xcode, uiscrollview, scrollview, resolution

我的项目是单视图应用程序并添加到带有参数的视图控制器滚动视图

```
[scroller setScrollEnabled:YES];
[scroller setContentSize:CGSizeMake(0, 960)]; 
```

如果屏幕分辨率为 320x480，那么我们有一些不可见的“屏幕 2”（320x480）我该怎么做 - 确实在“屏幕 2”位置加载了应用程序，之后我不能向下滚动，而是在启动应用程序时向上滚动。

![例如](../Images/085d18624d88862c72028ad075712e55.png)

如何释放它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T11:37:30.017

您必须根据屏幕大小为滚动视图提供适当的内容大小。

假设滚动视图是纵向全屏的：

```
//------------------------------------------
- (void)viewDidLoad{
  [super viewDidLoad];

  CGRect screenSize = [[UIScreen mainScreen] bounds];

  [scroller setScrollEnabled:YES];
  [scroller setContentSize:CGSizeMake(0, screenSize.size.height)];

}

//------------------------------------------

- (void)viewDidAppear:(BOOL)animated{
  [super viewDidAppear:animated];

  CGRect screenSize = [[UIScreen mainScreen] bounds];

  CGPoint scrollPoint = CGPointMake( 0.0, screenSize.size.height / 2);

  [scroller setContentOffset:scrollPoint animated:YES];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:16:57.110

```
 - (void)viewDidLoad
   {
        self.YourSecondView.frame = CGRectMake("As You Need");
        [self.ScView addSubview:self.YourSecondView];

        CGRect rect = CGRectMake(self.YourSecondView.frame.origin.x,self.YourSecondView.frame.origin.y,self.YourSecondView.frame.size.width,self.YourSecondView.frame.size.height);        
        [self.ScView scrollRectToVisible:rect animated:YES];
   } 
```

# c# - 在 WPF 程序中实现条形图

> ID：14536470
> 
> 赞同：0
> 
> 时间：2013-01-26T11:27:30.253
> 
> 标签：c#, .net, wpf, windows, xaml

我正在寻找一个使用发光条作为“进度条”的 WPF 应用程序。不是传统意义上的程序加载，而是向用户显示他在某个目标/任务上的进展情况。下面是我试图描述的酒吧的一个例子。

[进度条](http://bing-gallery.com/wp-content/uploads/2012/05/progress-bar-main.jpg)

我想使用多个相互连接的条创建一条路径，但不知道如何将它们放入程序中。提前感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:25:57.693

正如@ORMapper 正确指出的那样，**[ProgressBar](http://msdn.microsoft.com/en-us/library/system.windows.controls.progressbar.aspx)**控件是正确的方法，使用控件模板使其看起来像你想要的那样。

关于您的第二个问题：如果您希望一个 ProgressBar 的值依赖于另一个 ProgressBar 的值，您应该修改**[Maximum](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.rangebase.maximum.aspx)**属性以正确显示预期值。

例如，如果您有一个主进度条，只有在完成其他 2 项任务后才能达到 100% - 给它一个`Maximum`值 200，然后使用以下计算设置它的值： `MainProgressBar.Value = firstTaskValue + secondTaskValue`。
它只会在完成 2 项任务后达到 100%……
您可以随意玩这个，例如，如果一项任务比另一项更重要： `MainProgressBar.Value = firstTaskValue + 2 * secondTaskValue`.

无论如何，这是你必须自己实现的逻辑......

# android - 反正我可以有listarray吗 在安卓？

> ID：14536471
> 
> 赞同：0
> 
> 时间：2013-01-26T11:27:42.543
> 
> 标签：android

无论如何我可以有多维数组例如：listarray string,int,int in android?? 在 Java/C++ 中使用 Map & Set 是很有可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:30:29.587

使用字段制作您自己的容器，很好地解释其用途：

```
class PersonData {
public int age;
public int id;
public String name } 
```

并列出它：

```
List<PersonData> dataList = new ArrayList<PersonData>(); 
```

通过以下方式访问您的字段：

```
dataList.get(5).age = 11; 
```

正如 Egor 在评论中所说，如果您在这种特定情况下不需要极端性能，则将这些字段设置为受保护并创建 setter 和 getter 是一种很好的做法。

# opencart - 如果没有特别优惠，OpenCart 隐藏特别优惠标题

> ID：14536473
> 
> 赞同：0
> 
> 时间：2013-01-26T11:28:58.460
> 
> 标签：opencart

我想对 OpenCart 做一个相对简单的修改，这样如果没有可用的或适用的特价商品，标题特价商品就不会显示。

如果没有可用或适用的，目前它将在彩色背景上显示标题标题，如果没有特别优惠可显示，这看起来很奇怪。

我猜需要进行修改，`/catalog/controller/module/special.php`并且会是这样的。

```
If special offers > 0 then do this
  else
Don't do anything 
```

但我不确定如何实现这一点。

如果有人可以提供建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:42:39.887

不完全确定您在这里指的是什么，但您最好编辑模板而不是控制器文件并使用

```
<?php if($products) { echo $heading_title; } ?> 
```

代替目前存在的东西 - 就像只是`<?php echo $heading_title; ?>`

此外，您可能会发现标题被`<h1>`或`<h2>`标签包围。如果是这样，只需围绕标签执行相同的操作，例如

```
<?php if($products): ?>
<h2><?php echo $heading_title; ?></h2>
<?php endif; ?> 
```

# html - 无法确定下载地址

> ID：14536474
> 
> 赞同：0
> 
> 时间：2013-01-26T11:29:14.133
> 
> 标签：html, url, download

我似乎无法在[此网页](http://www.google.com/trends/explore#cat=0-13&date=today%207-d&cmpt=q)上计算出 CSV 文件的下载 URL ，我能锻炼的是：

```
<div id="exportMI" class="settings-menu-item goog-menuitem ">Download as CSV</div><div class="settings-menu-item goog-submenu"> 
```

好像不太好用，能不能帮我弄个下载地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T11:39:03.793

您可以使用浏览器的下载管理器找到下载 URL，即[http://www.google.com/trends/trendsReport?cmpt=q&content=1&export=1](http://www.google.com/trends/trendsReport?cmpt=q&content=1&export=1)

# java - Eclipse 中的 Angular Js

> ID：14536479
> 
> 赞同：1
> 
> 时间：2013-01-26T11:29:34.680
> 
> 标签：java, javascript, eclipse, angularjs

我想`angular.js`在我的项目中使用。我目前在我的项目中使用 JSF 作为框架。我使用 Eclipse 作为 IDE。

在我的项目中尝试使用`angular.js`时，我发现了`Invalidformalparameter` in的错误`angular.js`。我还在`jquery.js`,`jquery.min.js`和中发现了许多语法错误`angular.js`。

请帮我。

附件：

*   [显示错误的 IDE 屏幕截图](http://i.stack.imgur.com/b39pv.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:34:02.720

不要在经过充分测试的公共脚本中处理报告的可能错误。只需将其链接`script`到您的 HTML 中即可。

最终打开这个特定文件的 eclipse 通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-16T13:51:11.970

**Angello **的 angularjs-eclipse** [https://github.com/angelozerr/angularjs-eclipse](https://github.com/angelozerr/angularjs-eclipse)解决了许多问题或在 Eclipse 中使用 AngularJS。**

 **![](../Images/d090c9321126bc63593395ac8b384c5c.png)

![](../Images/71797b68dc4bdfadb9bef1f9b66edac8.png)

我是[Nodeclipse](http://www.nodeclipse.org/)和 Enide Studio 的合著者，我们正在与 Angelo（angularjs-eclipse 的作者）合作将该插件包含到[Enide Studio](http://www.nodeclipse.org/enide/studio/2014/)中。来自 JBoss 的人也表示希望将此插件包含到 JBoss Developer Studio 中，参考[#28](https://github.com/angelozerr/angularjs-eclipse/issues/28)**

# java - 使用java执行unix命令

> ID：14536482
> 
> 赞同：0
> 
> 时间：2013-01-26T11:29:55.060
> 
> 标签：java, unix

您好我需要从 java 执行 vi 命令并需要存储到本地文件中。我正在使用 jcraft.jsch

```
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.InputStream;
import java.io.OutputStream;

import com.jcraft.jsch.Channel;
import com.jcraft.jsch.ChannelExec;
import com.jcraft.jsch.JSch;
import com.jcraft.jsch.Session;

public class ViDAO {

    public boolean mergeLogs(String hostName, String logFile, String userName,
            String password) {
        System.out.println("in VIdao" + hostName);
        String command = null;
        final int MAXREAD = 131072 * 100;

        try {

            command = "cd /dr/logs/sonic/dmbain1;view " + logFile;
            JSch jsch = new JSch();
            Session session = jsch.getSession(userName, hostName, 22);
            java.util.Properties config = new java.util.Properties();
            config.put("StrictHostKeyChecking", "no");
            session.setConfig(config);
            session.setPassword("Janu$113");

            session.connect();
            /* System.out.println("Connected to******* " + host+"*********");*/
            Channel channel = session.openChannel("exec");
            ((ChannelExec) channel).setCommand(command);

            channel.setXForwarding(true);
            channel.connect();

            InputStream in = channel.getInputStream();

            byte[] tmp = new byte[MAXREAD];
            File dir = new File("C:\\Documents and Settings\\" + 
                        System.getProperty("user.name") + 
                        "\\Desktop\\LogFiles");
            dir.mkdir();

            File f;
              f=new File("C:\\Documents and Settings\\" + 
                           System.getProperty("user.name") +
                           "\\Desktop\\LogFiles\\" +
                           logFile + ".txt");

              if(!f.exists()){

              f.createNewFile();
              }

              BufferedWriter out = new BufferedWriter(new FileWriter(f));

            while (true) {
                while (in.available() > 0) {

                    int i = in.read(tmp, 0, MAXREAD);

                    if (i < 0)
                        break;
                    String strResult = new String(tmp, 0, i);

                    out.write(strResult+"\n");
                    System.out.println(strResult);

                }
                if (channel.isClosed()) {
                    in.close();

                    break;
                }

            }

            System.out.println("completed");

            channel.disconnect();
            session.disconnect();
            out.close();

        } catch (Exception e) {
            e.printStackTrace();
        }

return true;
    }

    public static void main(String[] args) {

    }
} 
```

在这里，我无法读取文件，只有我能够读取的几行代码，请对此提供帮助。当我使用tail命令而不是vi时，它的工作但处理时间很长。如果我使用vi命令，我只能打印一些行。

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:31:24.557

`view`通常是别名，`vi`它需要实际的终端或终端仿真器控制台才能工作，因为它以原始模式使用终端。

当遇到非终端输出时，`vi`将打印一个警告，然后开始喷出混合了控制字符的文件内容的第一个“全屏” - 对于大多数自动化处理用途而言，该输出几乎是无用的。

如果您想读入远程文件的内容，您可能应该使用[`cat`](http://linux.die.net/man/1/cat)而不是`vi`.

# php - 使用 PDO 使用另一个表中的值更新 MySQL 行

> ID：14536484
> 
> 赞同：0
> 
> 时间：2013-01-26T11:30:16.050
> 
> 标签：php, mysql, sql, sql-update

我有一张像下面这样的表，目前没有`rating`,`lib_id`或的值`votes`。

**图书馆**

```
id | title | year | rating | votes  | lib_id |
---------------------------------------------
1  | book1 | 1999 |        |        |       |
2  | book2 | 2010 |        |        |       |
3  | book3 | 2009 |        |        |       |
4  | book4 | 2007 |        |        |       |
5  | book5 | 1987 |        |        |       | 
```

然后我有一个看起来像这样的分类表。

**分类**

```
id   | title   | year | rating | votes  | lib_id |
---------------------------------------------
108  | book154 | 1929 |        |        |        |
322  | book23  | 2011 |        |        |        |
311  | book3   | 2009 |  9.3   |  4056  |  10876 |
642  | book444 | 2001 |        |        |        |
533  | book567 | 1981 |        |        |        | 
```

库表中的条目可能不会出现在分类表中，反之亦然。书名也有可能不是唯一的。所以我想要做的是遍历库表中的每一行，获取`title`和`year`列，转到`classifications`表并找到具有这两个值的行，检索相应的`rating`,`votes`和`lib_id`列并更新库表中的条目。

我也想使用 PDO。下面是我想要实现的一个非工作示例。

```
$update_vals_STH = 
$DBH->prepare(
   "UPDATE library SET lib_id=?, rating=?, votes=? 
    FROM (SELECT lib_id, rating, votes) 
    FROM classifications WHERE title=? AND year=?"; 
```

任何帮助，将不胜感激。我对 MySQL 很陌生，并且一直在努力解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:34:18.617

您也可以在更新语句上加入表。

```
UPDATE  library a
        INNER JOIN classifications b
            ON  a.title = b.title AND
                a.year = b.year
SET     a.rating = b.rating,
        a.votes = b.votes,
        a.lib_id = b.lib_id
// WHERE    clause                   // if you want to have extra condition. 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/7a73f/1)

**更新**

为了获得更好的性能，您需要在以下字段上添加索引。

```
ALTER TABLE library ADD INDEX (title, year);
ALTER TABLE classifications ADD INDEX (title, year); 
```

# javascript - 如何在 javascript 中评估 if 语句

> ID：14536490
> 
> 赞同：-1
> 
> 时间：2013-01-26T11:31:04.290
> 
> 标签：javascript, if-statement

> **可能重复：**
> [是否有标准函数来检查 JavaScript 中的 null、未定义或空白变量？](https://stackoverflow.com/questions/5515310/is-there-a-standard-function-to-check-for-null-undefined-or-blank-variables-in)

`if`语句中的条件如何评估为 JavaScript`true`或`false`JavaScript？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T11:32:29.433

`undefined`, `null`, `""`, `0`, `NaN`, 和`false`都是“假”值。其他一切都是“真实”的价值。

如果您测试“假”值，则条件为假。例如：

```
var a = 0;

if (a) {
    // Doesn't happen
}
else {
    // Does happen
} 
```

如果您测试“真实”值，则条件为真：

```
var a = 1;

if (a) {
    // Does happen
}
else {
    // Doesn't happen
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T11:41:36.420

无论条件表达式的结果是什么，它都[通过以下方式转换为布尔值`ToBoolean`](http://es5.github.com/#x12.5)：

> 1.  让*`exprRef`*是评估的结果*`Expression`*。
> 2.  如果`ToBoolean(GetValue(exprRef))`是**`true`**，则
>     返回对第一个求值的结果*`Statement`*。
> 3.  否则，
>     返回计算第二个的结果*`Statement`*。

对于每种数据类型或值，[都明确定义了布尔值的转换规则](http://es5.github.com/#x9.2)。因此，例如，`undefined`和`null`都转换为`false`.

# c++ - C++ 编译和链接

> ID：14536491
> 
> 赞同：0
> 
> 时间：2013-01-26T11:31:05.200
> 
> 标签：c++, compilation, linker

我发现了一个关于在 C++ 中编译和链接的问题，但我不知道哪个答案是正确的。和朋友讨论过，意见不一。这是一个问题：

为了运行用 C++ 语言编写的程序，它的源代码是：

（A）编译为机器代码，
（B）编译并链接到机器代码

我认为正确的答案是 A，但我没有任何来源可以证明它.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T11:34:13.517

[谷歌，第一击。](http://faculty.cs.niu.edu/~mcmahon/CS241/Notes/compile.html)

还需要链接来创建独立的可执行文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T11:36:19.683

您需要链接您生成的代码以使其成为可执行文件。对于简单的程序，编译器通过在编译过程结束时调用链接器来为您执行此操作。

适当的编译器只是将 C 代码转换为汇编器（经典 C 编译器），然后用汇编器进行汇编，或者直接转换为机器代码（许多现代编译器）。机器代码通常生成为“目标文件”，它们不是“可执行文件”，因为它们引用外部单元 - 例如当您调用 printf() 时。可以编写完全独立的 C 代码，但您通常仍需要组合多个目标文件，而且它当然需要以正确的方式“格式化”以生成可执行文件 - 这是一个不同的文件 -格式比目标文件[虽然通常相当相似]。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T11:36:55.533

编译除了创建目标文件之外什么都不做，这意味着将 C/C++ 源代码转换为机器代码。

链接过程是从多个 obj 文件创建可执行文件。因此，要运行应用程序/可执行文件，您还必须链接它。

在编译期间，编译器不会抱怨不存在的函数或损坏的函数，因为它会假设它可能定义在另一个对象（源代码文件）中。链接器验证所有函数及其存在，所以如果你有一个损坏的函数，你会在链接过程中出错

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T11:39:39.507

**编译：**接受输入`C/C++-code`并生成机器码（目标文件）

*   gcc –c MyProgram.c

**请注意**，目标文件不包含所有外部引用！

**链接：**将目标文件与外部引用组合成一个可执行文件

*   gcc MyProgram.o –o 我的程序

**请注意**，没有未解决的引用！

*插图：*

![在此处输入图像描述](../Images/3f797c21c245373d765c2a46055ed4d1.png)

*`libc.a`标准库*在哪里*`C`，它通过`gcc`.*

 ***我刚刚注意到你的问题是关于 c++ 的，同样的概念也在 c++ 中，如果你理解了这一点，你也会明白它在 c++ 中是如何工作的**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T12:45:48.490

严格来说。答案 A。

但是为了让您看到全貌，假设您已经定义了一些功能。然后[编译器将该函数的机器代码写入某个地址，并将该地址和函数的名称放在链接器可以找到的对象“.o”文件中](http://en.wikibooks.org/wiki/C++_Programming/Programming_Languages/C++/Code/Compiler/Linker)。然后，链接器采用此“机器代码”并解析符号，就像您在之前的一些错误中听到的那样。*

# javascript - 使用 javascript 验证 html 表格语法的正确性

> ID：14536492
> 
> 赞同：2
> 
> 时间：2013-01-26T11:31:14.210
> 
> 标签：javascript, html, validation, html-table

对于所有 colspan 和 rowspan 定义，我想验证给定的 html 表语法是否正确。

[JSFiddle 上的示例](http://jsfiddle.net/UkV35/)

下表在语法上是正确的：

```
<table id="correct">
    <tr>
        <td>a</td>
        <td>b</td>
        <td rowspan="2">c</td>
    </tr>
    <tr>
        <td colspan="2">d</td>
    </tr>
</table> 
```

下一个表是错误的，因为列和行都不匹配：

```
<table id="wrong1">
    <tr>
        <td>a</td>
        <td>b</td>
        <td rowspan="1">c</td>
    </tr>
    <tr>
        <td colspan="1">d</td>
    </tr>
</table> 
```

我希望能够验证表格是正确还是错误。给定的代码只是一个示例，它应该使用任何给定的表进行验证，无论其复杂性如何。

我可以开始编写自己的验证器，但在此之前，我想知道是否有任何库或已经工作的解决方案。你能帮我解决这个问题吗？

**/编辑**

刚刚找到这个在线验证器：

[http://wet-boew.github.com/wet-boew/demos/tableparser/validator-htmltable.html](http://wet-boew.github.com/wet-boew/demos/tableparser/validator-htmltable.html)

我的第一个错误表`#wrong1`会引发错误，但`#wrong2`不会（参见[fiddle](http://jsfiddle.net/UkV35/)）。似乎它不支持太大的数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:52:35.400

你去，这是一个工作代码：

```
function validateTable(id){
    var rows = document.getElementById(id).tBodies[0].rows;
    var totalCells=0;
    // total rows and columns
    var totalRows=rows.length;;
    var totalColumns=0;;
    var foundCells=new Array();    
    var maxRows=rows.length;
    var maxColumns=0;
    var maxCellIndex = 0;
    // First we get totalRows and totalColumns
    for(var i=0;i<rows.length;i++){     
        totalColumns = Math.max(totalColumns,rows[i].cells.length);
    }

    // The matrix now should be totalRows x totalColumns
    for(var i=0;i<totalRows;i++){
        for(var j=0;j<totalColumns;j++){
            maxCellIndex = (i*totalColumns)+j;
            foundCells[ maxCellIndex ] = 0;
        }
    }

    for(var i=0;i<rows.length;i++){     
        maxColumns = Math.max(rows[i].cells.length,maxColumns);
        for(var j = 0;j<rows[i].cells.length;j++){
            var cellPosition = (i*totalColumns)+j;
            var cols=0;
            var tcells=0;
            cols = parseInt( rows[i].cells[j].rowSpan );           
            tcells = parseInt( rows[i].cells[j].colSpan );
            if(tcells>0){
                for(var k=0;k<tcells;k++){
                     foundCells[cellPosition + k] = 1; 
                }
            }
            if(cols > 0){
               for(var k=0;k<cols;k++){
                     foundCells[cellPosition + (k*totalColumns)  ] = 1;
                }
            }
           // totalCells += ( tcells * cols) ;
        }        
    }     
    // This is the updated part
    var allCellsAlignedCorrectly=true;
    for(var n=0;n<=maxCellIndex;n++){        
       if(isNaN(foundCells[n]) || parseInt(foundCells[n]) == 0){
          allCellsAlignedCorrectly = false;
       }
    }
    for(var n=0;n<=foundCells.length;n++){
        if(!isNaN(foundCells[n])){
           totalCells+=foundCells[n];
        }
    }
    // alert(foundCells);
    // alert(totalCells+":"+totalColumns+":"+totalRows);
    return (((totalCells) == (maxRows*maxColumns)) && allCellsAlignedCorrectly);
} 
```

**再次更新再次检查**

你可以在这里看到它：

[http://jsfiddle.net/UkV35/8/](http://jsfiddle.net/UkV35/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T00:37:55.110

根据[Shehabix](https://stackoverflow.com/a/14536662/675065)的回答，我重写了验证器。主要改进：

*   正确计算所有 colspan 和 rowspan 组合（希望如此）
*   检测重叠、表格尺寸外的单元格和缺失的单元格
*   输出特定的错误信息

# [**演示**](http://jsfiddle.net/uqjsQ/)

（查看开发者控制台的输出）

**JavaScript**

```
function validateTable(id){
    console.log('[validating table #' + id + ']');
    var rows = document.getElementById(id).tBodies[0].rows;
    var hasErrors = false;

    // total rows and columns
    var totalRows = rows.length;
    var totalColumns= 0;
    for(var row=0; row<rows.length; row++) {
        var cells = rows[row].cells;
        var cols = 0;
        for(var col=0; col<cells.length; col++) {
            var cell = rows[row].cells[col];
            var colspan = parseInt(cell.colSpan);
            if(colspan > 1) {
                cols += colspan;
            } else {
                cols++;
            }
        }
        totalColumns = Math.max(totalColumns, cols);
    }

    var cells = {};
    cells.init = function(row, col, options) {
        cells[row + ':' + col] = $.extend({
            row: row,
            col: col,
            count: 0
        }, options);
    }
    cells.update = function(row, col, options) {
        var cell = cells[row + ':' + col];
        if(!cell) {
            hasErrors = true;
            console.log('cell outside of table dimensions (cell ' + (row+1) + ':' + (col+1) + ' is outside of allowed table size ' + totalRows + ':' + totalColumns + ')');
            return;
        }
        cells[row + ':' + col].count++;
        if(options) {
            cells[row + ':' + col] = $.extend(cells[row + ':' + col], options);
        }
    }
    cells.get = function(row, col) {
        return cells[row + ':' + col];
    }

    var colspans = {};
    colspans.add = function(row, col, count) {
        for(var coladd=0; coladd<count; coladd++) {
            colspans[row + ':' + (col+coladd)] = true;
        }
    };
    colspans.check = function(row, col) {
        return colspans[row + ':' + col];
    };

    var rowspans = {};
    rowspans.add = function(row, col, count) {
        for(var rowadd=0; rowadd<count; rowadd++) {
            rowspans[(row+rowadd) + ':' + col] = true;
        }
    };
    rowspans.check = function(row, col) {
        return rowspans[row + ':' + col];
    };

    // init cell matrix
    for(var row=0; row<totalRows; row++) {
        for(var col=0; col<totalColumns; col++) {
            cells.init(row, col);
        }
    }

    for(var row=0; row<rows.length; row++) {
        var colskip = 0;
        var rowskip = 0;
        for(var col=0; col<totalColumns; col++) {
            // check if this cell is pushed by a colspan
            if(colspans.check(row, col)) continue;

            // check if this cell is pushed by a rowspan
            if(rowspans.check(row, col)) {
                rowskip++;
                continue;
            }

            console.log("row: " + row + " - col: " + (col-colskip-rowskip));
            var cell = rows[row].cells[col-colskip-rowskip];
            if(!cell) continue;

            var rowspan = parseInt(cell.rowSpan);
            var colspan = parseInt(cell.colSpan);

            cells.update(row, col, {
                element: cell
            });
            if(colspan > 1){
                colskip += colspan-1;
                colspans.add(row, col+1, colspan-1);
                for(var coladd=1; coladd<colspan; coladd++) {
                    cells.update(row, col+coladd, {
                                 element: cell
                                 });
                }
            }
            if(rowspan > 1){
                rowspans.add(row+1, col, rowspan-1);
                for(var rowadd=1; rowadd<rowspan; rowadd++) {
                    cells.update(row+rowadd, col, {
                                 element: cell
                                 });
                }
            }
        }
    }

    for(var row=0; row<totalRows; row++) {
        for(var col=0; col<totalColumns; col++) {
            var cell = cells.get(row, col);
            if(cell.count == 1) {
                // everything is fine
            } else if(cell.count == 0) {
                hasErrors = true;
                console.log("cell " + (row+1) + ':' + (col+1) + " is missing");
            } else {
                hasErrors = true;
                console.log("cell " + (row+1) + ':' + (col+1) + " is overlapping with rowspan (cell usage count of " + cell.count + ")");
            }
        }
    }

    console.log('table is ' + (hasErrors ? 'invalid' : 'valid'));
    return hasErrors;
} 
```

--

# javascript - 以双引号开头时，除了双引号之外，还有什么其他方法可以终止 javascript 中的字符串？

> ID：14536494
> 
> 赞同：0
> 
> 时间：2013-01-26T11:31:23.453
> 
> 标签：javascript

例如

```
<script>

a="MY INPUT";

</script> 
```

所以我过滤双引号'"'以确保输入不会突破。另一种方法是应用转义'\"'。javascript中是否有另一个字符串终止符可以终止以我不知道的双引号开头的字符串？我知道 nullbyte 不适用。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T11:32:07.717

您也可以使用单引号：

```
var a = 'my string'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T11:33:53.707

使用单引号。

```
<script>

 a='MY INPUT';

 </script> 
```

这个也可以

```
 $("#purchase").html('<option value="1">Classics</option>'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T11:49:26.853

根据[规范](http://es5.github.com/#x7.8.4)，定义字符串字面量的方法有或只有两种：

> *StringLiteral* ::
>      `"` *DoubleStringCharacters*[选择] `"`
>      `'` *SingleStringCharacters*[选择] `'`

因此，似乎双引号字符串只能用双引号终止。

# internet-explorer - 素面 不适用于 IE 9

> ID：14536495
> 
> 赞同：3
> 
> 时间：2013-01-26T11:31:40.403
> 
> 标签：internet-explorer, jsf-2, primefaces

[使用 IE 浏览http://gamma.j.layershift.co.uk](http://gamma.j.layershift.co.uk)时遇到问题

我的网站是使用带有 primefaces 3.5 的 JSF2 构建的。

**页面的其余部分可以在 Firefox 和 chrome 上看到。

问题仅发生在索引（第一）页上。

```
<ui:composition template="/templates/template.xhtml"
xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.org/ui"
xmlns:ui="http://java.sun.com/jsf/facelets">
<ui:define name="content">
    <!-- p:galleria panelWidth="960" panelHeight="350"
        value="#{mbIndex.img}" var="image" styleClass="ui-corner-all">
        <p:graphicImage id="gal_image" value="resources/images/#{image}" />
    </p:galleria -->

    <p:imageSwitch effect="fade" speed="2900" styleClass="center"
        style="width:1000px;height:400px;">
        <ui:repeat value="#{mbIndex.img}" var="image">
            <p:graphicImage value="resources/images/#{image}"
                style="clip:rect(0px, 1000px, 400px, 0px);min-width:1000px; min-height:400px;" />
        </ui:repeat>
    </p:imageSwitch>

    <br />

    <p:layout style="max-height:500px !important;">
        <p:layoutUnit position="west" header="About GAMMA"
            style="max-width:300px !important; height:300px; !important">
            <h:outputLabel style="word-wrap: break-word;"
                value="The company started in 2012 focusing on the production of disinfectants. Our products are used in laboratories, clean rooms, and process areas in pharmaceutical, biotechnology, healthcare, academic and industrial facilities in addition to livestock animals, " />
            <p:commandLink value="More info..." action="#{mbIndex.toAbout}"></p:commandLink>

    </p:layoutUnit>

        <p:layoutUnit position="center" header="Latest news">

        </p:layoutUnit>
    </p:layout>
</ui:define>
</ui:composition> 
```

请问有什么解释吗？
谢谢。

这个来自 Firefox 的屏幕截图（页面应该是什么）。 ![来自 Firefox 的截图](../Images/a9586aa6a9043cc245fb72a2f16927da.png)

--当使用 IE 时，只显示图像。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-04-02T09:21:32.783

下面在 IE 9 中为我工作，我在我的 css 中有这个。

```
.ui-layout-container {
    overflow-x:visible !important; overflow-y:visible !important;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T19:22:23.320

这是一个 CSS 问题。

修改css类ui-layout-container或者设置style属性，修改overflow属性为：

```
<p:layout style="max-height:500px !important; overflow-x:visible !important; overflow-y:visible !important;"> 
```

这在 IE8 中对我有用，在 IE9 中也应该有用。

# view - 在 joomla 视图中访问通过 url 发送的变量值

> ID：14536502
> 
> 赞同：0
> 
> 时间：2013-01-26T11:32:42.150
> 
> 标签：view, joomla, joomla2.5

我想在 joomla 组件的视图中访问通过 url 发送的变量。我怎样才能实现它？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:51:47.800

您可以使用

```
$myvar = JRequest::getVar('variablename','defaultvalue') ; 
```

或（仅在 J1.6+ 中）

```
$jinput = new JInput();
$myvar = $jinput->getVar('myvar'); 
```

JRequest 和 JInput 有更多方法，例如 JRequest::getInt、getCmd 等，您可能需要查看 docs.joomla.org

两者都可以选择限制读取值的方法，将“GET”作为第三个参数传递给任何 getVar 函数，并且只有来自 GET 的值才会被读取，否则您可以测试 COOKIE、POST 等。

# java - 如何使用 AffineTransform 放大 Swing 组件？

> ID：14536503
> 
> 赞同：0
> 
> 时间：2013-01-26T11:32:46.123
> 
> 标签：java, swing, zooming, affinetransform

我正在尝试创建一个面板，我可以在其中放大定制的 JComponent 对象。我试图用不同的值调用类`scale()`中的方法`AffineTransform`，但我没有成功。我的对象就消失了。

下面是我在主框架类中使用的组件。除缩放外，一切正常。你们中的一些人能否解释一下 AffineTransform 的概念。我认为 JavaDoc explenation 对我来说还不够。

这是一个可执行的 SSCCE：

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.HeadlessException;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import java.awt.event.MouseWheelEvent;
import java.awt.event.MouseWheelListener;
import java.awt.geom.AffineTransform;
import javax.swing.JComponent;
import javax.swing.JFrame;

public class JavaApplication1 extends JFrame {

    public static void main(String[] args) {
        new JavaApplication1();
    }

    private MyComponent myComponent = new MyComponent();

    public JavaApplication1() throws HeadlessException {
        this.setSize(400,400);
        this.setVisible(true);
        this.add(myComponent);
    }
    class MyComponent extends JComponent {

        private int x, y;
        private double scale=1;
        private MouseAdapter mouseAdapter = new MouseAdapter();
        private AffineTransform transform = new AffineTransform();

        public MyComponent() {
            this.addMouseListener(mouseAdapter);
            this.addMouseWheelListener(mouseAdapter);
            this.addMouseMotionListener(mouseAdapter);
        }

        @Override
        protected void paintComponent(Graphics g) {
            Graphics2D g2 = (Graphics2D)g;
            g2.setColor(Color.DARK_GRAY);
            g2.fillRect(0, 0, 400, 400);
            g2.setColor(Color.RED);
            g2.setTransform(transform);

            transform.scale(scale, scale); 
            g2.drawString("My String!", x, y);
        }

        private class MouseAdapter implements MouseWheelListener, MouseListener, MouseMotionListener {

            @Override
            public void mouseWheelMoved(MouseWheelEvent e) {
                if(e.getWheelRotation() == 1) {
                    scale+=0.1;
                }else {
                    scale-=0.1;
                }
            }

            @Override
            public void mouseClicked(MouseEvent e) {
            }

            @Override
            public void mousePressed(MouseEvent e) {            
            }

            @Override
            public void mouseReleased(MouseEvent e) {
            }

            @Override
            public void mouseEntered(MouseEvent e) {
            }

            @Override
            public void mouseExited(MouseEvent e) {
            }

            @Override
            public void mouseDragged(MouseEvent e) {
                x = e.getX();
                y = e.getY();
                repaint();
            }

            @Override
            public void mouseMoved(MouseEvent e) {
            }        
        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T11:44:40.007

transform.scale 接受两个双精度参数，一个用于 x 轴，另一个用于 y 轴，为 1 中性值（比例不变），两个参数为乘数。

例如：transform.scale(2,2) 将显示两倍大的组件，而 transform.scale(0.5,0.5) 将显示两倍小。

[http://docs.oracle.com/javase/6/docs/api/java/awt/geom/AffineTransform.html#scale(double, double)](http://docs.oracle.com/javase/6/docs/api/java/awt/geom/AffineTransform.html#scale%28double,%20double%29)

# java - 在 HTML 中使用 Java 小程序方法

> ID：14536506
> 
> 赞同：3
> 
> 时间：2013-01-26T11:33:07.063
> 
> 标签：java, javascript, html, applet, awt

我有一个小程序，它有两种我想使用的方法。在第一种方法中，我正在获取客户端打印机列表。

我想在我的 HTML 页面上组合使用这个打印机列表。用户应从该组合中选择打印机。之后，用户将单击一个按钮进行一些操作。单击该按钮并完成这些操作后，我想调用我的小程序的第二个方法，它获取两个参数，一个是文件对象，另一个是用户已经选择的打印机对象。

**我的问题是：**

页面加载后，如何获取打印机列表并在我的 HTML 页面上使用它？单击按钮后，如何将参数发送到我的小程序的第二种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:39:12.690

在 html/jsp 中使用对象 id 标签

```
<object id="appletId" type="application/x-java-applet" 
```

要获取打印机列表，您应该调用 applet 方法

```
<script type="text/javascript">
function getPrinters(){
    return appletId.getPrinters();
}
</script> 
```

`getPrinters`假设小程序具有返回字符串数组的公共方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T11:40:28.173

不要使用浏览器组合框。直接在小程序中使用[JComboBox](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComboBox.html)或[Choice ，让您足不出户即可完成所有工作。](http://docs.oracle.com/javase/6/docs/api/java/awt/Choice.html)如@Roman C 所述，这是可能的，但对于您描述的任务来说似乎太复杂了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T15:37:54.027

```
To have my applet work;
1- I exported the applet as jar file(named as printApplet.jar) and copied it under the same folder as my xhtml page.
2- I put the applet in xhtml as below;
         <applet id="myApplet"
            code="com.xxx.yyy.console.action.PrintApplet"
            archive="printApplet.jar" width="1" height="1">         
        </applet>
3- I created a method `enter code here`in the applet which gets printer names as string and has comma(,) between the names. 
4- I called the applet methods using javascript as below;
<script type="text/javascript" >
    //<![CDATA[
    function getPrinters() {
        var aplt = document.getElementById("myApplet");     
        var printers = aplt.getPrinterNames();
        var p = printers.split(',');
        var c = document.getElementById("combo");
        for ( var i = 0; i < p.length; i++) {
            var o = document.createElement("option");
            o.text = p[i];
            o.value = i;
            try {
                c.add(o, null); //Standard 
            } catch (error) {
                c.add(o); // IE only
            }
        }
    }   
    //]]>
</script> 
```

# scala - 在 IntelliJ IDEA 中使用 Scala 中的 Joda Time (scalaj-time)

> ID：14536513
> 
> 赞同：4
> 
> 时间：2013-01-26T11:34:02.923
> 
> 标签：scala, intellij-idea, jodatime

**编辑：**

版本信息，截至 2013 年 1 月 27 日：

[Scala 2.10.0](http://www.scala-lang.org)
[IntelliJ IDEA Leda 123.139 (EAP)](http://confluence.jetbrains.net/display/IDEADEV/IDEA+12+EAP)
[Scala 插件版本 0.7.108 (Nightly Build)](http://confluence.jetbrains.net/display/SCA/Scala+Plugin+Nightly+Builds+for+Leda)
[JDK 7u11](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html)
[Joda Time 2.1](http://www.joda.org/joda-time/)
[ScalaJ-Time 2.9.1-0.6](http://mvnrepository.com/artifact/org.scalaj/scalaj-time_2.9.1)

我已经放弃尝试使用**SBT**，因为我没有看到任何进展 - 我不知道如何结合**IntelliJ**和**SBT**，经过数小时的尝试，我最终到达了我最初开始的地方.

我的 JodaTime 库包含 Scalaj-Time jar：![](../Images/746f565d6717588a4a3984cd54b5179c.png)

我已经尝试了几乎所有设置组合，从*联合编译（首先是 Scala，然后是 Java 和 vv）*、*外部构建*，到*将我的 JodaTime 库提升到依赖项中的 Scala 库*（是的，我什至已经这样做了），以及*使缓存失效*。我得到的只是一堆错误——无论我是“制作”项目、“运行”当前文件还是“编译”它——都是随机产生的。而且，有时，它会起作用。是的，尽管听起来很愚蠢，但这种行为是**未定义**的。我不确定是什么原因造成的。我统计了出现的 3 条不同的错误信息，我会将它们上传到 paste.org，否则会占用太多空间：**[http://pastie.](http://pastie.org/pastes/5887847/text)**

我没有尝试过的：*回到前面的任何应用程序/库的早期版本*，*深入了解**SBT***（我认为这不值得）。

**我对这个线程有什么期望？**我希望有人为这个问题提供一个可靠的解决方案，在最好的情况下，不会包括任何提及**SBT**（可选）。

另外，**附带说明**：为什么 Joda-Time 以损坏的格式发布他们的库？这背后有什么秘密是每个人都应该知道的吗？包含`FromString`在发布版本中的问题是什么？（我仍然认为这就是一切的原因）

问候，
丹尼尔

**原帖：（**你可以忽略这个）

我有最新版本的 IntelliJ (123.139)，Scala 2.10.0，到目前为止还没有遇到任何问题。

我没有使用 Java 时间库，而是渴望使用 Joda Time，并且看到 Scala 中有很多隐式可以使用，我想尝试一下！我添加了所有库，但无法识别隐式。当我尝试通过 IDEA Popup Menu 编译它时，出现以下错误：

```
error while loading DateTime, class file '~\workspace\Libraries\JodaTime\joda-time-2.1.jar(org/joda/time/DateTime.class)' is broken
(class java.lang.RuntimeException/bad constant pool tag 10 at byte 42)
error while loading DateTimeZone, class file '~\workspace\Libraries\JodaTime\joda-time-2.1.jar(org/joda/time/DateTimeZone.class)' is broken
(class java.lang.RuntimeException/bad constant pool tag 7 at byte 44)
error while loading AbstractInstant, class file '~\workspace\Libraries\JodaTime\joda-time-2.1.jar(org/joda/time/base/AbstractInstant.class)' is broken
(class java.lang.RuntimeException/bad constant pool tag 10 at byte 10) 
```

我去了那些来源`DateTime`并注意到它`org.joda.convert.FromString;`是进口的，但资源不存在！我猜是因为这个原因 Scala 不会编译。所以我用谷歌搜索我应该做什么。到处都是“SBT，SBT！！”，我试图找出这个 SBT 是什么，所以我安装了它：来自[http://www的版本 0.12.2，手动安装（我使用的是 Windows 7） .scala-sbt.org/](http://www.scala-sbt.org/)。我希望它与我的 IntelliJ 一起运行，所以我去了，并使用该行`~\.sbt\plugins`创建了一个文件并从[https://github.com/mpeltonen/sbt-idea](https://github.com/mpeltonen/sbt-idea)下载了 zip ，解压缩它，然后使用 CMD 进入那个文件夹, 输入和`build.sbt``addSbtPlugin("com.github.mpeltonen" % "sbt-idea" % "1.2.0")``sbt``gen-idea`在 sbt 中，它做了很多事情，而且似乎都解决了。所以我去了我想要运行 Joda Time 的项目，首先，将 Scala 2.10.0 包含到 SBT 似乎非常困难。我创建了一个文件`<PROJECT>\build.sbt`并用这些行填充它：

```
name := "Project"

version := "1.0"

scalaHome := Some(file("C:/Program Files (x86)/scala"))

scalaVersion := "2.10.0" 
```

`<PROJECT>\project\project\`然后，为了包含 scalaj-time，我`build.sbt`使用`libraryDependencies += "org.scalaj" %% "scalaj-time" % "0.6"`.

最后，我用CMD进入<PROJECT>，输入“sbt”，它（下载）了很多文件，似乎成功了，然后我进入`gen-idea`，一切都很好。

我打开了 IntelliJ，我可以轻松打开项目。当我打开项目结构时，我去了模块，有两个模块：`Project`和`Project-build`. 我忽略了项目构建，单击项目模块，并且有很多不存在的源文件夹和测试文件夹：`src/main/scala`等等，我将它们全部删除并添加了我`src`的源文件夹。

我注意到外部库中不包含 Joda-Time（顺便说一句，我使用 Joda-Time 2.1 和 Scalaj-time 0.6），所以我必须自己添加它们。joda-time 库是一个 .jar 而 scalaj-time 是一个文件夹，但这应该没问题，对吧？我可以运行一个简单的`println( DateTime.now )`指令（我不知道以前是否可能；没有尝试），但`+ 2.months`仍然不可能。这是一个屏幕截图，所以你明白了：

![](../Images/d6c9b5d9fd23ecfb3d2836b4b5902c69.png)

我想我已经非常详细地解释了我是如何进行的，我希望你能找到我做错的事情。我已经工作了好几个小时来解决这个问题，但最终，我还是回到了最初的位置……

感谢您的时间！

问候！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T21:39:09.770

**[如何为 joda-time 导入 FromString？](https://stackoverflow.com/questions/8368529/how-to-import-fromstring-for-joda-time)**

这就像一个魅力（现在，谁知道事情会如何发生）。我很生气，以至于我一开始就没有想到这个...... Grrrrrr。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T13:11:20.833

**编辑：**

这个答案是无效的。请参阅主帖中的编辑。**虽然这有时会起作用，但对于何时起作用仍然没有明确的定义。当我创建一个新项目时，它从工作到不工作（不编译，打印随机错误）不等，但在另一个更大的项目中，它具有相同的未定义行为，除了现在（无论出于何种原因）它不起作用，时期。（在我新创建的项目中，它仍然有所不同）**

**原帖**：

因此，经过 10 分钟的尝试和谷歌搜索，我找到了 Scalaj-time (0.6) 的 .JAR。

我就像“嗯，它会带来什么危害？”，下载了它，并包含它而不是文件夹。

Tadaaa，一切正常......我也只需要这些行：

```
object Test extends App {
    import org.scala_tools.time.Imports._
    println( DateTime.now + 2.months )
} 
```

没有 SBT，什么都没有，没有任何其他进口。您只需从[http://mvnrepository.com/artifact/org.scalaj/scalaj-time_2.9.1](http://mvnrepository.com/artifact/org.scalaj/scalaj-time_2.9.1)（版本 0.6，截至目前）和 Joda Time (V 2.1) 下载 scalaj_time，制作一个包含 2 个以上 jar 的库 ScalajTime，并将其添加到您的依赖项中。您所需要的只是一个导入语句，您就可以开始了。

也许主要问题是我无法从库中导入源文件？因为我导入的源文件夹似乎没有任何影响。我不知道我是如何“忽略”这个事实的，但假设它似乎很愚蠢。

所以，现在它可以工作了。

问候。

# relational-algebra - 计算关系代数中的 theta 连接

> ID：14536516
> 
> 赞同：1
> 
> 时间：2013-01-26T11:34:16.177
> 
> 标签：relational-algebra

我遇到了这个问题：

假设关系 R(A,B) 具有以下元组：

```
A   B
1   2
3   4
5   6 
```

关系 S(B,C,D) 具有以下元组：

```
B   C   D
2   4   6
4   6   8
4   7   9 
```

使用条件 RA < SC AND RB < SD 计算 R 和 S 的 theta-join 结果中包含以下哪个元组？假设每个元组都有模式（A、RB、SB、C、D）。

从以下答案中选择：

```
(3,4,2,4,6)
(1,2,4,4,6)
(1,2,2,6,8)
(3,4,4,7,8) 
```

所以当我尝试它时，我看到了

```
(1, 2) matches (2, 4, 6)
(3, 4) matches (4, 6, 8)
(3, 4) matches (4, 7, 9) 
```

所以我找到了以下元组（它们都尊重条件）：

```
(1, 2, 2, 4, 6)
(3, 4, 4, 6, 8)
(3, 4, 4, 7, 9) 
```

问题是这些都没有在多项选择中找到......

难道我做错了什么？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T12:05:08.080

要计算 theta-join，基本上是对两个关系（这里是 R 和 S）进行笛卡尔积，并得出所有可能的组合。在这些元组中的每一个上，您应用条件 theta 并获得为真的条件。

在这里，笛卡尔给出 3x3 = 9 个元组。其中，8 个元组满足条件（RA < SC AND RB < SD）。这使得元组 (3,4,2,4,6) 成为 theta 连接集的元素。

您所做的是（RB = SB AND RA < SC AND RB < SD）的θ连接。希望这可以帮助您获得差异。

# ruby-on-rails - 如何本地化 Rails 3.2.3 中的部分通用错误消息？

> ID：14536518
> 
> 赞同：0
> 
> 时间：2013-01-26T11:34:19.730
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我在 Rails 3.2.3 中使用以下部分显示我的大多数模型的错误消息：

```
# _error_messages.html.erb

<% if object.errors.any? %>
<div id="error_explanation">
    <h3><%= pluralize(object.errors.count, "error") %>
    prohibited this <%= object.class.to_s.underscore.humanize.downcase %> from being saved:</h3>        
    <p>There were problems with the following fields:</p>
    <ul>
        <% object.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
        <% end %>
    </ul>
</div>
<% end %> 
```

在我决定使用`I18n`.

`de.yml`我为包含以下内容的德语内容创建了一个新文件（以及许多其他内容）：

```
# de.yml

errors: &errors
  format: ! '%{attribute} %{message}'
  messages:
    blank: muss ausgefüllt werden
  template:
    body: ! 'Bitte überprüfen Sie die folgenden Felder:'
    header:
      one: ! 'Konnte %{model} nicht speichern: ein Fehler.'
      other: ! 'Konnte %{model} nicht speichern: %{count} Fehler.'

etc. etc. etc. 
```

现在如何在我的错误消息中使用此内容？

尤其是这条线`<%= object.class.to_s.underscore.humanize.downcase %>`让我很困惑。我尝试了类似`<%= t 'activerecord.errors.template.header', :model => object.model_name.human %>`但没有任何运气的东西。

有人可以帮忙吗？

我已经阅读了关于本地化的 Rails 指南三遍，但我被困在这里。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T13:24:35.793

OK, I found the answer myself this time, thanks to this [thread](https://stackoverflow.com/questions/9093935/rails-i18n-with-translated-model-names).

I simply changed my `_error_messages.html.rb` partial to:

```
<% if object.errors.any? %>
<div id="error_explanation">
    <h3><%= t('errors.template.header', :model => object.class.model_name.human, :count => object.errors.count) %></h3>
    <p><%= t('errors.template.body') %></p>
    <ul>
        <% object.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
        <% end %>
    </ul>
</div>
<% end %> 
```

Now it works and I am happy :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T11:40:44.973

首先，您应该通过以下方式设置您的语言环境：

# 应用程序.rb

```
config.i18n.default_locale = :de 
```

其次，您的语言环境文件应如下所示：

# de.yml

```
de:
  activerecord:
    models:
      order: Заказ
    attributes:
      order:
        link: Ссылка на модель часов
        name: Имя
        phone: Телефон
        accept_message: Комментарий к заказу
        decline_message: Причина отказа
        finish_message: Комментарий к заказу
    errors:
      models:
        order:
          attributes:
            link:
              blank: не может быть пустой
            phone:
              invalid: должен содержать только цифры. Пример: 9208003020 или 2716070.
              blank: не может быть пустым
            name:
              blank: не может быть пустым
            decline_message:
              blank: не может быть пустой 
```

# javascript - jPlayer 中的 AAC+ 支持

> ID：14536520
> 
> 赞同：0
> 
> 时间：2013-01-26T11:34:34.093
> 
> 标签：javascript, jquery, streaming, jplayer, aac

我正在通过 jPlayer 播放我的广播电台，并决定使用 AAC+ 编码器。

*   [我的页面](http://www.tranceil.fm/player)

当我切换到 AAC 时，jPlayer 似乎不会播放音频。

有什么我想念的吗？

jQuery：

```
$musicPlayer.jPlayer({
                            swfPath: "js/jplayer/",
                            solution: 'flash,html',
                            supplied: 'm4a, oga, mp3',
                            preload: 'metadata',
                            volume: 0.8,
                            muted: false,
                            cssSelectorAncestor: "#jp_container_N",
                            cssSelector: {
                                play: '.jp-play',
                                pause: '.jp-pause',
                                seekBar: '.jp-seek-bar',
                                playBar: '.jp-play-bar',
                            },
                            errorAlerts: false,
                            warningAlerts: false,
                            ready: function () {
                              $(this).jPlayer("setMedia", {
                                mp3: $first_song,
                                solution: 'flash, html',
                              });
                            },
                        }).bind($.jPlayer.event.ended, function(event){
                            var $o = $('.selected').next('li'),$json = $.parseJSON($o.find('img').attr('data-src'));
                            if(!$o.is(':last')){
                                playSong($o,$json);
                            }
                        }); 
```

json文件：

```
[
    {
        "title": "",
        "artist": "",
        "mp3File": "http://**.**.**.**:80/mymountpoint"

    }
] 
```

# python - 如何将数字分成数字并将它们存储在列表中？

> ID：14536524
> 
> 赞同：-3
> 
> 时间：2013-01-26T11:34:38.670
> 
> 标签：python, list, numbers

我正在做一个学校项目，我们需要使用 a* 算法为 8 个谜题问题创建一个解决方案。无论如何，我想请用户输入说：

```
123  
456  
7 8 
```

如何将它们分开并存储在列表中？我知道如何将它存储在列表中，我的问题是分离。

```
sampleList = ["1", "2", "3", "4", "5", "6", "7", "0", "8"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T12:06:16.173

一种方法是在数字仍为字符串形式时一次访问一个数字。

```
>>> input = ['123', '456', '7 8']
>>> sampleList = []
>>> for digit_str in input:
...     for digit in digit_str:
...         sampleList.append(digit)
... 
>>> sampleList
['1', '2', '3', '4', '5', '6', '7', ' ', '8'] 
```

现在，因为这是给学校的，所以我将留给您解决如何将空间更改为零:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:02:22.080

也许这些可以解决你的问题

```
s = '''
123
456
7 8
'''

def digitsFromStr(string):
    return [
            x if x != ' ' else '0'
            for x in string
            if x != '\n'
    ]

print digitsFromStr(s) 
```

# android - 使用 sharedpreferences 的名称填充列表视图

> ID：14536525
> 
> 赞同：0
> 
> 时间：2013-01-26T11:34:38.867
> 
> 标签：android, listview, sharedpreferences

我想为我的应用程序开发一个活动，我想用应用程序以前存储的共享首选项的名称填充我的列表视图。

同时，我还想在我的列表视图中添加“添加和删除”功能，如果我单击删除，与该行关联的共享首选项也应该被删除，并且该行条目也应该被删除。

# c# - WinForm 中的嵌入式 XNA 4.0 游戏运行速度太慢，我该怎么办？

> ID：14536527
> 
> 赞同：0
> 
> 时间：2013-01-26T11:35:01.567
> 
> 标签：c#, winforms, xna-4.0, performance

我在 WinForm 中有一个嵌入式 XNA 4.0 游戏（用于关卡编辑器）。代码格式如下：

在游戏课上：

```
protected override void Initialize(){
    //initialization logic here  
    base.Initialize();

    SysWinForms.Form gameWindowForm(SysWinForms.Form)SysWinForms.Form.FromHandle(this.Window.Handle);
    gameWindowForm.Shown += new EventHandler(gameWindowForm_Shown);

    MYFORM = new Form1();
    MYFORM.HandleDestroyed += new EventHandler(myForm_HandleDestroyed);
    MYFORM.Show();
}

void myForm_HandleDestroyed(object sender, EventArgs e)
{
    this.Exit();
}

void gameWindowForm_Shown(object sender, EventArgs e)
{
     ((SysWinForms.Form)sender).Hide(); 
     //this line is important. When this line is commented the XNA + winForm windows are both shown. Also, the xna game is running in the winForm and it is running with modest speed. 
     //but when the line is not commented, than only the winForm window is shown and the xna game is shown inside it, but it is running with 0.5 frames/seconds
}

//The loadContent, unloadContent, update, and game constructor classes remain the same

protected override void Draw(GameTime gameTime)
{
     //draw logic here
     base.Draw(gameTime);
        //this is the actual trick that makes it all happen
        this.GraphicsDevice.Present(new Rectangle(controls.panel1.Location.X, controls.panel1.Location.Y, desired_Width, desired_Height), null, this.MYFORM.PanelHandle);
} 
```

在 MYFORM 类中：

```
public IntPtr PanelHandle
{
    get
    {
        return this.panel1.IsHandleCreated ? this.panel1.Handle : IntPtr.Zero;
    }
} 
```

还有一个自动生成的：

```
public System.Windows.Forms.Panel panel1; 
```

如果有人查看代码，尤其是在“ void gameWindowForm_Shown(object sender, EventArgs e) ”函数中的注释，我将不胜感激。

提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T12:21:30.863

从专家 Shawn Hargreaves 那里获取[http://blogs.msdn.com/b/shawnhar/archive/2007/01/23/using-xna-with-winforms.aspx](http://blogs.msdn.com/b/shawnhar/archive/2007/01/23/using-xna-with-winforms.aspx)

> 经常看到人们试图在不寻常的地方使用 XNA Game 类，例如在 WinForms 应用程序中托管 XNA 游戏。
> 
> 这通常是个坏主意。
> 
> Game 类的设计很简单，可以自动设置一切，让您开始编码。如果您正在做一些复杂的事情，并且想要更多地控制窗口创建方式的细节，那么这只会妨碍您。

Microsoft[在此处](http://xbox.create.msdn.com/en-us/education/catalog/sample/winforms_series_1)和[此处](http://xbox.create.msdn.com/en-us/education/catalog/sample/winforms_series_2)提供代码示例，用于设置 XNA 图形设备以与 WinForms 一起使用。

# ant - 在 Windows 7 上构建 nutch 2.1 时出错无法从资源 org/sonar/ant/antlib.xml 加载定义

> ID：14536531
> 
> 赞同：1
> 
> 时间：2013-01-26T11:35:26.937
> 
> 标签：ant, nutch

当我尝试在我的 Windows 7 机器上构建 nutch 2.1 时，我收到以下错误：

```
Buildfile: C:\apache-nutch-2.1\build.xml
  [taskdef] Could not load definitions from resource org/sonar/ant/antlib.xml. It could not be found.
ivy-probe-antlib:
ivy-download:
  [taskdef] Could not load definitions from resource org/sonar/ant/antlib.xml. It could not be found.
ivy-download-unchecked:
ivy-init-antlib:
ivy-init:
init:

resolve-default:
[ivy:resolve] :: Ivy 2.2.0 - 20100923230623 :: http://ant.apache.org/ivy/ ::
[ivy:resolve] :: loading settings :: file = C:\apache-nutch-2.1\ivy\ivysettings.xml
  [taskdef] Could not load definitions from resource org/sonar/ant/antlib.xml. It could not be found.

copy-libs:

compile-core:
     C:\apache-nutch-2.1\build.xml:97: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
     Compiling 181 source files to C:\apache-nutch-2.1\build\classes
     warning: [path] bad path element "C:\apache-nutch-2.1\build\lib\activation.jar": no such file or directory
     warning: [options] bootstrap class path not set in conjunction with -source 1.6
     C:\apache-nutch-2.1\src\java\org\apache\nutch\api\APIInfoResource.java:23: error: package org.restlet.resource does not exist
     import org.restlet.resource.Get;
                                ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\api\APIInfoResource.java:24: error: package org.restlet.resource does not exist
     import org.restlet.resource.ServerResource;
                                ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\api\APIInfoResource.java:26: error: cannot find symbol
     public class APIInfoResource extends ServerResource {
                                          ^
       symbol: class ServerResource
     C:\apache-nutch-2.1\src\java\org\apache\nutch\api\AdminResource.java:23: error: package org.restlet.resource does not exist
     import org.restlet.resource.Get;
                                ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\api\AdminResource.java:24: error: package org.restlet.resource does not exist
     import org.restlet.resource.ServerResource;
                                ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\api\AdminResource.java:28: error: cannot find symbol
     public class AdminResource extends ServerResource {
                                        ^
       symbol: class ServerResource
     C:\apache-nutch-2.1\src\java\org\apache\nutch\api\ConfResource.java:22: error: package org.restlet.data does not exist
     import org.restlet.data.Form;
                            ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\api\ConfResource.java:23: error: package org.restlet.resource does not exist
     import org.restlet.resource.Delete;
                                ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\api\ConfResource.java:24: error: package org.restlet.resource does not exist
     import org.restlet.resource.Get;
                                ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\api\ConfResource.java:25: error: package org.restlet.resource does not exist
     import org.restlet.resource.Post;
                                ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\api\ConfResource.java:26: error: package org.restlet.resource does not exist
     import org.restlet.resource.Put;
                                ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\api\ConfResource.java:27: error: package org.restlet.resource does not exist
     import org.restlet.resource.ServerResource;
                                ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\api\ConfResource.java:29: error: cannot find symbol
     public class ConfResource extends ServerResource {
                                       ^
       symbol: class ServerResource
     C:\apache-nutch-2.1\src\java\org\apache\nutch\api\DbReader.java:29: error: package org.apache.avro.util does not exist
     import org.apache.avro.util.Utf8;
                                ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\api\DbReader.java:30: error: package org.apache.gora.query does not exist
     import org.apache.gora.query.Query;
                                 ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\api\DbReader.java:31: error: package org.apache.gora.query does not exist
     import org.apache.gora.query.Result;
                                 ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\api\DbReader.java:32: error: package org.apache.gora.store does not exist
     import org.apache.gora.store.DataStore;
                                 ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\api\DbReader.java:52: error: cannot find symbol
       DataStore<String,WebPage> store;
       ^
       symbol:   class DataStore
       location: class DbReader
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:22: error: package org.apache.avro does not exist
     import org.apache.avro.Protocol;
                           ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:23: error: package org.apache.avro does not exist
     import org.apache.avro.Schema;
                           ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:24: error: package org.apache.avro does not exist
     import org.apache.avro.AvroRuntimeException;
                           ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:25: error: package org.apache.avro does not exist
     import org.apache.avro.Protocol;
                           ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:26: error: package org.apache.avro.util does not exist
     import org.apache.avro.util.Utf8;
                                ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:27: error: package org.apache.avro.ipc does not exist
     import org.apache.avro.ipc.AvroRemoteException;
                               ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:28: error: package org.apache.avro.generic does not exist
     import org.apache.avro.generic.GenericArray;
                                   ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:29: error: package org.apache.avro.specific does not exist
     import org.apache.avro.specific.SpecificExceptionBase;
                                    ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:30: error: package org.apache.avro.specific does not exist
     import org.apache.avro.specific.SpecificRecordBase;
                                    ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:31: error: package org.apache.avro.specific does not exist
     import org.apache.avro.specific.SpecificRecord;
                                    ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:32: error: package org.apache.avro.specific does not exist
     import org.apache.avro.specific.SpecificFixed;
                                    ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:33: error: package org.apache.gora.persistency does not exist
     import org.apache.gora.persistency.StateManager;
                                       ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:34: error: package org.apache.gora.persistency.impl does not exist
     import org.apache.gora.persistency.impl.PersistentBase;
                                            ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:35: error: package org.apache.gora.persistency.impl does not exist
     import org.apache.gora.persistency.impl.StateManagerImpl;
                                            ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:36: error: package org.apache.gora.persistency does not exist
     import org.apache.gora.persistency.StatefulHashMap;
                                       ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:37: error: package org.apache.gora.persistency does not exist
     import org.apache.gora.persistency.ListGenericArray;
                                       ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:40: error: cannot find symbol
     public class WebPage extends PersistentBase {
                                  ^
       symbol: class PersistentBase
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:41: error: cannot find symbol
       public static final Schema _SCHEMA = Schema.parse("{\"type\":\"record\",\"name\":\"WebPage\",\"namespace\":\"org.apache.nutch.storage\",\"fields\":[{\"name\":\"baseUrl\",\"type\":\"string\"},{\"name\":\"status\",\"type\":\"int\"},{\"name\":\"fetchTime\",\"type\":\"long\"},{\"name\":\"prevFetchTime\",\"type\":\"long\"},{\"name\":\"fetchInterval\",\"type\":\"int\"},{\"name\":\"retriesSinceFetch\",\"type\":\"int\"},{\"name\":\"modifiedTime\",\"type\":\"long\"},{\"name\":\"protocolStatus\",\"type\":{\"type\":\"record\",\"name\":\"ProtocolStatus\",\"fields\":[{\"name\":\"code\",\"type\":\"int\"},{\"name\":\"args\",\"type\":{\"type\":\"array\",\"items\":\"string\"}},{\"name\":\"lastModified\",\"type\":\"long\"}]}},{\"name\":\"content\",\"type\":\"bytes\"},{\"name\":\"contentType\",\"type\":\"string\"},{\"name\":\"prevSignature\",\"type\":\"bytes\"},{\"name\":\"signature\",\"type\":\"bytes\"},{\"name\":\"title\",\"type\":\"string\"},{\"name\":\"text\",\"type\":\"string\"},{\"name\":\"parseStatus\",\"type\":{\"type\":\"record\",\"name\":\"ParseStatus\",\"fields\":[{\"name\":\"majorCode\",\"type\":\"int\"},{\"name\":\"minorCode\",\"type\":\"int\"},{\"name\":\"args\",\"type\":{\"type\":\"array\",\"items\":\"string\"}}]}},{\"name\":\"score\",\"type\":\"float\"},{\"name\":\"reprUrl\",\"type\":\"string\"},{\"name\":\"headers\",\"type\":{\"type\":\"map\",\"values\":\"string\"}},{\"name\":\"outlinks\",\"type\":{\"type\":\"map\",\"values\":\"string\"}},{\"name\":\"inlinks\",\"type\":{\"type\":\"map\",\"values\":\"string\"}},{\"name\":\"markers\",\"type\":{\"type\":\"map\",\"values\":\"string\"}},{\"name\":\"metadata\",\"type\":{\"type\":\"map\",\"values\":\"bytes\"}}]}");
                           ^
       symbol:   class Schema
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:77: error: cannot find symbol
       private Utf8 baseUrl;
               ^
       symbol:   class Utf8
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ProtocolStatus.java:22: error: package org.apache.avro does not exist
     import org.apache.avro.Protocol;
                           ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ProtocolStatus.java:23: error: package org.apache.avro does not exist
     import org.apache.avro.Schema;
                           ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ProtocolStatus.java:24: error: package org.apache.avro does not exist
     import org.apache.avro.AvroRuntimeException;
                           ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ProtocolStatus.java:25: error: package org.apache.avro does not exist
     import org.apache.avro.Protocol;
                           ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ProtocolStatus.java:26: error: package org.apache.avro.util does not exist
     import org.apache.avro.util.Utf8;
                                ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ProtocolStatus.java:27: error: package org.apache.avro.ipc does not exist
     import org.apache.avro.ipc.AvroRemoteException;
                               ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ProtocolStatus.java:28: error: package org.apache.avro.generic does not exist
     import org.apache.avro.generic.GenericArray;
                                   ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ProtocolStatus.java:29: error: package org.apache.avro.specific does not exist
     import org.apache.avro.specific.SpecificExceptionBase;
                                    ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ProtocolStatus.java:30: error: package org.apache.avro.specific does not exist
     import org.apache.avro.specific.SpecificRecordBase;
                                    ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ProtocolStatus.java:31: error: package org.apache.avro.specific does not exist
     import org.apache.avro.specific.SpecificRecord;
                                    ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ProtocolStatus.java:32: error: package org.apache.avro.specific does not exist
     import org.apache.avro.specific.SpecificFixed;
                                    ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ProtocolStatus.java:33: error: package org.apache.gora.persistency does not exist
     import org.apache.gora.persistency.StateManager;
                                       ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ProtocolStatus.java:34: error: package org.apache.gora.persistency.impl does not exist
     import org.apache.gora.persistency.impl.PersistentBase;
                                            ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ProtocolStatus.java:35: error: package org.apache.gora.persistency.impl does not exist
     import org.apache.gora.persistency.impl.StateManagerImpl;
                                            ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ProtocolStatus.java:36: error: package org.apache.gora.persistency does not exist
     import org.apache.gora.persistency.StatefulHashMap;
                                       ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ProtocolStatus.java:37: error: package org.apache.gora.persistency does not exist
     import org.apache.gora.persistency.ListGenericArray;
                                       ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ProtocolStatus.java:40: error: cannot find symbol
     public class ProtocolStatus extends PersistentBase {
                                         ^
       symbol: class PersistentBase
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:86: error: cannot find symbol
       private Utf8 contentType;
               ^
       symbol:   class Utf8
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:89: error: cannot find symbol
       private Utf8 title;
               ^
       symbol:   class Utf8
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:90: error: cannot find symbol
       private Utf8 text;
               ^
       symbol:   class Utf8
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ParseStatus.java:22: error: package org.apache.avro does not exist
     import org.apache.avro.Protocol;
                           ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ParseStatus.java:23: error: package org.apache.avro does not exist
     import org.apache.avro.Schema;
                           ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ParseStatus.java:24: error: package org.apache.avro does not exist
     import org.apache.avro.AvroRuntimeException;
                           ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ParseStatus.java:25: error: package org.apache.avro does not exist
     import org.apache.avro.Protocol;
                           ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ParseStatus.java:26: error: package org.apache.avro.util does not exist
     import org.apache.avro.util.Utf8;
                                ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ParseStatus.java:27: error: package org.apache.avro.ipc does not exist
     import org.apache.avro.ipc.AvroRemoteException;
                               ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ParseStatus.java:28: error: package org.apache.avro.generic does not exist
     import org.apache.avro.generic.GenericArray;
                                   ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ParseStatus.java:29: error: package org.apache.avro.specific does not exist
     import org.apache.avro.specific.SpecificExceptionBase;
                                    ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ParseStatus.java:30: error: package org.apache.avro.specific does not exist
     import org.apache.avro.specific.SpecificRecordBase;
                                    ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ParseStatus.java:31: error: package org.apache.avro.specific does not exist
     import org.apache.avro.specific.SpecificRecord;
                                    ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ParseStatus.java:32: error: package org.apache.avro.specific does not exist
     import org.apache.avro.specific.SpecificFixed;
                                    ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ParseStatus.java:33: error: package org.apache.gora.persistency does not exist
     import org.apache.gora.persistency.StateManager;
                                       ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ParseStatus.java:34: error: package org.apache.gora.persistency.impl does not exist
     import org.apache.gora.persistency.impl.PersistentBase;
                                            ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ParseStatus.java:35: error: package org.apache.gora.persistency.impl does not exist
     import org.apache.gora.persistency.impl.StateManagerImpl;
                                            ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ParseStatus.java:36: error: package org.apache.gora.persistency does not exist
     import org.apache.gora.persistency.StatefulHashMap;
                                       ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ParseStatus.java:37: error: package org.apache.gora.persistency does not exist
     import org.apache.gora.persistency.ListGenericArray;
                                       ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\ParseStatus.java:40: error: cannot find symbol
     public class ParseStatus extends PersistentBase {
                                      ^
       symbol: class PersistentBase
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:93: error: cannot find symbol
       private Utf8 reprUrl;
               ^
       symbol:   class Utf8
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:94: error: cannot find symbol
       private Map<Utf8,Utf8> headers;
                   ^
       symbol:   class Utf8
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:94: error: cannot find symbol
       private Map<Utf8,Utf8> headers;
                        ^
       symbol:   class Utf8
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:95: error: cannot find symbol
       private Map<Utf8,Utf8> outlinks;
                   ^
       symbol:   class Utf8
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:95: error: cannot find symbol
       private Map<Utf8,Utf8> outlinks;
                        ^
       symbol:   class Utf8
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:96: error: cannot find symbol
       private Map<Utf8,Utf8> inlinks;
                   ^
       symbol:   class Utf8
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:96: error: cannot find symbol
       private Map<Utf8,Utf8> inlinks;
                        ^
       symbol:   class Utf8
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:97: error: cannot find symbol
       private Map<Utf8,Utf8> markers;
                   ^
       symbol:   class Utf8
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:97: error: cannot find symbol
       private Map<Utf8,Utf8> markers;
                        ^
       symbol:   class Utf8
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:98: error: cannot find symbol
       private Map<Utf8,ByteBuffer> metadata;
                   ^
       symbol:   class Utf8
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:102: error: cannot find symbol
       public WebPage(StateManager stateManager) {
                      ^
       symbol:   class StateManager
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:110: error: cannot find symbol
       public WebPage newInstance(StateManager stateManager) {
                                  ^
       symbol:   class StateManager
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:113: error: cannot find symbol
       public Schema getSchema() { return _SCHEMA; }
              ^
       symbol:   class Schema
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:171: error: cannot find symbol
       public Utf8 getBaseUrl() {
              ^
       symbol:   class Utf8
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:174: error: cannot find symbol
       public void setBaseUrl(Utf8 value) {
                              ^
       symbol:   class Utf8
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:225: error: cannot find symbol
       public Utf8 getContentType() {
              ^
       symbol:   class Utf8
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:228: error: cannot find symbol
       public void setContentType(Utf8 value) {
                                  ^
       symbol:   class Utf8
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:243: error: cannot find symbol
       public Utf8 getTitle() {
              ^
       symbol:   class Utf8
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:246: error: cannot find symbol
       public void setTitle(Utf8 value) {
                            ^
       symbol:   class Utf8
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:249: error: cannot find symbol
       public Utf8 getText() {
              ^
       symbol:   class Utf8
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:252: error: cannot find symbol
       public void setText(Utf8 value) {
                           ^
       symbol:   class Utf8
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:267: error: cannot find symbol
       public Utf8 getReprUrl() {
              ^
       symbol:   class Utf8
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:270: error: cannot find symbol
       public void setReprUrl(Utf8 value) {
                              ^
       symbol:   class Utf8
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:273: error: cannot find symbol
       public Map<Utf8, Utf8> getHeaders() {
                  ^
       symbol:   class Utf8
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:273: error: cannot find symbol
       public Map<Utf8, Utf8> getHeaders() {
                        ^
       symbol:   class Utf8
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\storage\WebPage.java:276: error: cannot find symbol
       public Utf8 getFromHeaders(Utf8 key) {
                                  ^
       symbol:   class Utf8
       location: class WebPage
     C:\apache-nutch-2.1\src\java\org\apache\nutch\indexer\mongodb\MongodbIndexer.java:18: warning: [deprecation] JobConf in org.apache.hadoop.mapred has been deprecated
     import org.apache.hadoop.mapred.JobConf;
                                    ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\indexer\mongodb\MongodbWriter.java:7: warning: [deprecation] JobConf in org.apache.hadoop.mapred has been deprecated
     import org.apache.hadoop.mapred.JobConf;
                                    ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\tools\arc\ArcInputFormat.java:23: warning: [deprecation] FileInputFormat in org.apache.hadoop.mapred has been deprecated
     import org.apache.hadoop.mapred.FileInputFormat;
                                    ^
     C:\apache-nutch-2.1\src\java\org\apache\nutch\tools\arc\ArcInputFormat.java:24: warning: [deprecation] FileSplit in org.apache.hadoop.mapred has been deprecated
     import org.apache.hadoop.mapred.FileSplit;
                                    ^
     ..
     .. 
```

还有更多错误............

```
 C:\apache-nutch-2.1\src\java\org\apache\nutch\util\SuffixStringMatcher.java:46: warning: [rawtypes] found raw type: Iterator
     Iterator iter= suffixes.iterator();
     ^
   missing type arguments for generic class Iterator<E>
   where E is a type-variable:
     E extends Object declared in interface Iterator
 C:\apache-nutch-2.1\src\java\org\apache\nutch\util\ToolUtil.java:48: warning: [unchecked] unchecked cast
     Map<String,Object> jobs = (Map<String,Object>)results.get(Nutch.STAT_JOBS);
                                                              ^
   required: Map<String,Object>
   found:    Object
 100 errors
 69 warnings 
```

我该如何解决这个问题并让 Nutch 运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-21T15:31:54.903

对于那些发现这一点的绝望的谷歌员工：

我有一个类似的问题，我可以通过在我的 ant 命令中添加 -v （详细）来解决这个问题。有了这个，我可以看到它实际上是导致问题的 cygwin/windows 路径问题。无奈之下，我打开了cmd.exe提示符，设置了相应的环境变量，果然运行良好。

# android - android和fpga板之间的通信

> ID：14536533
> 
> 赞同：2
> 
> 时间：2013-01-26T11:35:51.970
> 
> 标签：android, serial-port, usb, fpga

我正在尝试将数据从我的 android 设备传输到 FPGA 板。android设备支持USB主机模式，连接的FPGA板使用RS_232端口。所以我有一个USB-RS232转换器设备（CP210x）用于连接。我按照本页所述对传输进行了编码：http: [//developer.android.com/guide/topics/connectivity/usb/host.html](http://developer.android.com/guide/topics/connectivity/usb/host.html)我的代码是：

```
public class MainActivity extends Activity
    implements View.OnClickListener, Runnable {

private static final String TAG = "TransferData";

private Button sendB;
private UsbManager mUsbManager;
private UsbDevice mDevice;
private UsbDeviceConnection mConnection;
private UsbEndpoint mEndpointIntr;
private static final char DATA = 'A';
static UsbDevice device;
static int TIMEOUT = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);
    sendB = (Button)findViewById(R.id.send);
    sendB.setOnClickListener(this);

    mUsbManager = (UsbManager)getSystemService(Context.USB_SERVICE);

}

@Override
public void onPause() {
    super.onPause();
}

@Override
public void onResume() {
    super.onResume();

    Intent intent = getIntent();
    Log.d(TAG, "intent: " + intent);
    String action = intent.getAction();

    device = (UsbDevice)intent.getParcelableExtra(UsbManager.EXTRA_DEVICE);
    if (UsbManager.ACTION_USB_DEVICE_ATTACHED.equals(action)) {
        setDevice(device);
    } else if (UsbManager.ACTION_USB_DEVICE_DETACHED.equals(action)) {
        if (mDevice != null && mDevice.equals(device)) {
            setDevice(null);
        }
    }
}

@Override
public void onDestroy() {
    super.onDestroy();
}

private void setDevice(UsbDevice device) {
    Log.d(TAG, "setDevice " + device);
    if (device.getInterfaceCount() != 1) {
        Log.e(TAG, "could not find interface");
        return;
    }
    else Log.w(TAG, "found interface");
    UsbInterface intf = device.getInterface(0);
    // device should have one endpoint
    if (intf.getEndpointCount() == 0) {
        Log.e(TAG, "could not find endpoint");
        return;
    }
    else Log.w(TAG, "found endpoint");
    // endpoint should be of type interrupt

    Log.w("endpoint", "" + intf.getEndpointCount());
    UsbEndpoint ep = intf.getEndpoint(1);
    if (ep.getType() != UsbConstants.USB_ENDPOINT_XFER_BULK) {
        Log.e(TAG, "endpoint is not interrupt type");
        return;
    }
    else Log.w(TAG, "endpoint is interrupt");
    mDevice = device;
    mEndpointIntr = ep;
    if (device != null) {
        UsbDeviceConnection connection = mUsbManager.openDevice(device);
        if (connection != null && connection.claimInterface(intf, true)) {
            Log.d(TAG, "open SUCCESS");
            mConnection = connection;
            Thread thread = new Thread(this);
            thread.start();

        } else {
            Log.d(TAG, "open FAIL");
            mConnection = null;
        }
     }
}

private void sendCommand(char control) {
        if (mConnection != null) {
            byte[] message = new byte[1];
            message[0] = (byte)control;
            // Send command via a control request on endpoint zero
            UsbInterface intf = device.getInterface(0);
            UsbEndpoint endpoint = intf.getEndpoint(1);
            mConnection.claimInterface(intf,true);
            int res =  mConnection.bulkTransfer(endpoint, message, message.length, TIMEOUT);
            Log.w("data sent","result " + res);
        }
}

public void onClick(View v) {
    if (v == sendB) {
        sendCommand(DATA);
    }
}

@Override
public void run() {
    ByteBuffer buffer = ByteBuffer.allocate(1);
    UsbRequest request = new UsbRequest();
    request.initialize(mConnection, mEndpointIntr);
    byte status = -1;
        request.queue(buffer, 1);
        // send poll status command
        sendCommand(DATA);
        // wait for status event
        if (mConnection.requestWait() == request) {
            byte newStatus = buffer.get(0);
            if (newStatus != status) {
                Log.d(TAG, "got status " + newStatus);
                status = newStatus;
            }
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
            }
        } else {
            Log.e(TAG, "requestWait failed, exiting");
        }
} 
```

我打开设备成功，发送结果为 1。但没有接收到的数据反映为 FPGA 板。我在做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:41:21.817

尝试在 FPGA 上将 RX 与 TX 切换。其他通信是否与此连接一起工作？FPGA 上是否有为 UART 服务的设计？

# python - 在beautifulsoup中合并查询

> ID：14536537
> 
> 赞同：0
> 
> 时间：2013-01-26T11:36:35.947
> 
> 标签：python, beautifulsoup

无论如何简化（合并）我与beautifulsoup一起使用的这个查询？

```
 table  = soup.findAll("tr", {'class' : 'table-tempo-row' })
    tablec = soup.findAll("tr", {'class' : 'table-tempo-row-alt' })

    for i in (table + tablec):
        tableb = i.findAll("td") 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:38:42.797

您可以传入[一个列表](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#the-keyword-arguments)：

```
table = soup.findAll("tr", {'class' : ['table-tempo-row', 'table-tempo-row-alt'] }) 
```

和 BS 将匹配`tr`任何一个类的元素。

对于更复杂的情况，您可以传入正则表达式或函数（获取元素并返回布尔值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T11:39:29.320

```
tablec = soup.findAll("tr", {'class' : ('table-tempo-row-alt' ,'table-tempo-row')}) 
```

# apache - 在 Apache 上设置 Fossil 服务器

> ID：14536545
> 
> 赞同：2
> 
> 时间：2013-01-26T11:37:15.673
> 
> 标签：apache, cgi, fossil

我正在尝试在外部托管的 Apache 服务器上设置 Fossil 服务器，但运气不佳。我创建了 cgi 脚本并将其和可执行文件放在 cgi 文件夹中。在被视为我的根目录的 www 目录之前，我无权访问任何目录。当我尝试运行脚本时出现问题，因为我总是收到 500 内部服务器错误响应。每个文件夹和文件都被赋予了 755 权限。

谁能告诉我我做错了什么？这是我命名为“repo.cgi”的脚本

```
#!/cgi/fossil
repository: /fossils/project.fossil 
```

这是给我错误的url格式。

```
website.com/cgi/repo.cgi 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:48:23.303

只要你得到“500 internal server error”，你可能有以下问题：

您的 Web 服务器使用 64 位 Linux，但未安装 32 位兼容性库。

另一方面，官方的化石二进制文件是 32 位的，编译后可以动态链接一些 32 位库。

您可能可以通过使用静态链接的化石二进制文件来解决问题。（我假设您无法在服务器上安装所需的库）。

下载源代码并尝试使用正确的选项编译它。（IIRC“--静态”）

# java - Java - 使用循环和 input.nextline() 存储多个字符串输入；

> ID：14536546
> 
> 赞同：1
> 
> 时间：2013-01-26T11:37:28.840
> 
> 标签：java, input

我正在尝试将一组字符串语句（可以包括空格）放入字符串数组中。语句的数量将由用户的输入决定。

所以我想到了循环这个`input.nextline();`函数。但我认为一旦输入被击中，它就会被视为`\n`所有循环。有没有更好的方法来做到这一点？

```
 Scanner input = new Scanner(System.in);
    System.out.println("How many Inputs??");    
    numOfInputs = input.nextInt();
    String[] dataStore = new String[numOfInputs];
    System.out.println("Input Strings");

    for(i=0;i<numOfInputs;i++){
        System.out.print("Input "+(i+1)+ " = ");

        dataStore[i] =  input.next();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:42:46.623

在 for 循环之后将其添加到底部，您的代码工作正常：

```
for(String str : dataStore) {
    System.out.println(str);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T11:51:23.983

```
public static void main(String[] args) {
    Scanner input = new Scanner(System.in);
    System.out.println("How many Inputs??");
    int numOfInputs = input.nextInt();
    String[] dataStore = new String[numOfInputs];
    System.out.println("Input Strings");

    for (int i = 0; i < numOfInputs; i++) {
        dataStore[i] = input.next();
        System.out.println("Input " + (i + 1) + " = " + dataStore[i]);

    }
} 
```

试试这个 。我纠正了错误。

# android - 为什么这个 onTouchEvent 不起作用？

> ID：14536549
> 
> 赞同：0
> 
> 时间：2013-01-26T11:37:33.920
> 
> 标签：android, touch-event

我的项目中有一个 ImageButton。我创建了一个 onTouchEvent，当用户在 ImageButton 内触摸时会播放声音。但它不起作用。

```
 @Override
public boolean onTouchEvent(MotionEvent event){      

      ImageButton img_1 = (ImageButton) findViewById(R.id.img_1_);       
      Rect r = new Rect();
  img_1.getDrawingRect(r);

     if(r.contains((int)event.getX(),(int)event.getY())){

        if(firstTime == true){
              firstTime = false;
          snd.play_s_l_9(); 
              System.out.println("Touch In Image");
          }
      }

             if(event.getAction() == MotionEvent.ACTION_UP){
          //When we lift finger reset the firstTime flag
          firstTime = true;
               }

       return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T11:44:52.237

如果您的`Activity`工具`OnTouchListener`，只需调用

```
yourImageButton.setOnTouchListener(this); 
```

向`ImageButton`. 希望这可以帮助。

# google-app-engine - appengine 和 jinja2 模板，正确处理拉丁字符集的编码

> ID：14536551
> 
> 赞同：0
> 
> 时间：2013-01-26T11:38:00.673
> 
> 标签：google-app-engine, character-encoding, jinja2

我正在用 jinja 构建一个简单的分层模板。我将我的整体 html 文件拆分成更小的块以重用它们。在我的 html 中，我有重音字符，例如 èàù... 当我尝试运行该应用程序时，我收到错误消息，抱怨我的文件没有正确编码。所以我决定遵守 utf-8 标准，并用诸如此类的东西替换这些字符`&ugrave;` ......这很有效，但作为工作流程似乎有点麻烦。我正在徘徊，这是解决模板文件和必须在这些模板中呈现的内容的此类问题的正确方法。

我认为在存储文本之前将文本编码为 utf-8 是一种很好的做法，但我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:52:37.057

当您在 (html) 文件、模板和 python 代码中使用 utf-8 时，它可以正常工作，您可以使用：èàù...

确保您的编辑器使用 utf-8 编码的文件阅读这篇关于 utf-8 的文章。： http: [//blog.notdot.net/2010/07/Getting-unicode-right-in-Python](http://blog.notdot.net/2010/07/Getting-unicode-right-in-Python)。您还可以使用：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-
from __future__ import unicode_literals 
```

在 Python 模块的开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:50:20.373

在模板中，使用正确的 utf-8 编码保存文件就足够了，见下图。对于您想要存储在源代码中并在程序中传递的字符串，如果您只需要一个快速而肮脏的建议，这里是：

1.  将您的 .py 文件保存为 utf-8
2.  现在你可以在你的字符串中使用你想要的所有字符
3.  您只需要明确告知系统的其余部分您正在使用 utf-8 编码

![在此处输入图像描述](../Images/8a93810989bedf90f9e9bf081b6d5969.png)

例子

```
my_string = """I write àny character I want herè, just only ensurè that the encoding for the file you are writing is utf-8 àèàééàà"""

def utf8(s):
    return unicode(s, 'utf8')

pass_string_around = utf8(my_string) 
```

# mod-rewrite - lighttpd 配置从一个域代理/重写到另一个域

> ID：14536554
> 
> 赞同：6
> 
> 时间：2013-01-26T11:38:33.887
> 
> 标签：mod-rewrite, lighttpd, mod-proxy

我需要在 lighttpd 上设置代理/重写！

我有 server1，它通过 http 2 个不同的网络应用程序路径提供服务：

```
* http://server1/path1
* http://server1/path2 
```

另外，我在 server1 前面有 lighttpd 服务器

我想在 lighttpd 上设置重写和/或代理，以便 2 个路径中的每一个都将作为不同域上的根路径：

```
* requests to http://server2.com/* are proxied/rewrited to http://server1/path1/*
* requests to http://server3.com/* are proxied/rewrited to http://server1/path2/* 
```

重要的：

*   server2.com 和 server3.com*只能通过 http访问 server1*
*   重定向不是选项，server2.com 和 server3.com 的用户不应该不知道实际的 Web 应用程序是从 server1 的不同路径提供的。

可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-19T13:39:18.167

lighttpd 开发人员几年前就知道您的需求。

根据版本，解决方法或新功能会回答它。

**轻量级 1.4**

bugtracker 中解释了一种解决方法：[bug #164](http://redmine.lighttpd.net/issues/164#note-9)

> ```
> $HTTP["url"] =~ "(^/path1/)" {   
>   proxy.server  = ( "" => ("" => ( "host" => "127.0.0.1", "port" => 81 ))) 
> }
> 
> $SERVER["socket"] == ":81" {   
>   url.rewrite-once = ( "^/path1/(.*)$" => "/$1" )   
>   proxy.server  = ( "" => ( "" => ( "host" => "server2.com", "port" => 80 ))) 
> } 
> ```

**轻量级 1.5**

他们用这个命令（[官方文档](http://redmine.lighttpd.net/projects/1/wiki/Docs_ModProxyCore)）添加了这个特性：

> **proxy-core.rewrite-request**：重写请求标头或请求 uri。
> 
> ```
> $HTTP["url"] =~ "^/path1" {
>   proxy-co...
> 
>   proxy-core.rewrite-request = (
>     "_uri" => ( "^/path1/?(.*)" => "/$1" ),
>     "Host" => ( ".*" => "server2.com" ),
>   )
> } 
> ```

# python - Python JSON 未从 urllib 获取数据

> ID：14536556
> 
> 赞同：0
> 
> 时间：2013-01-26T11:38:48.063
> 
> 标签：python, json, urllib2, discogs-api

我正在尝试使用 discogs API 获取 JSON 数据，但是当我将数据作为原始数据粘贴到浏览器中时，代码似乎没有给出我看到的输出。请让我知道我在这里做错了什么，因为我是 Python 新手。我正在寻找标题，图像的输出。谢谢！

Python：

```
import urllib
import urllib2
import json
url = 'http://api.discogs.com/masters/66271'
request = urllib2.Request('http://api.discogs.com/masters/66271')
request.add_header('User-Agent','Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)')
request.add_header('Content-Type','application/json')
response = urllib2.urlopen(request)
json_raw= response.readlines()
json_object = json.loads(json_raw[0])
print json_object
for row in json_object:
    print row
            print row['title'] 
```

错误的输出：

```
styles
genres
videos
title
main_release
main_release_url
uri
artists
versions_url
year
images
resource_url
tracklist
id
data_quality 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:46:05.570

你不*应该*使用`.readlines()`. 让`json`图书馆阅读：

```
response = urllib2.urlopen(request)
json_object = json.load(response) 
```

注意函数名，`.load()`，最后没有`s`。

返回的对象是一个字典；您看到的每个字符串都是该字典的键。您需要指定您想要的标题；和条目都有一个带有标题的项目列表`tracklist`；`videos`这是您打印`tracklist`条目标题的方式：

```
for track in json_object['tracklist']:
    print track['title'] 
```

哪个打印：

```
HIStory Begins
Billie Jean
The Way You Make Me Feel
Black Or White
Rock With You
She's Out Of My Life
Bad
I Just Can't Stop Loving You
Man In The Mirror
Thriller
Beat It
The Girl Is Mine
Remember The Time
Don't Stop 'Til You Get Enough
Wanna Be Startin' Somethin'
Heal The World
HIStory Continues
Scream
They Don't Care About Us
Stranger In Moscow
This Time Around
Earth Song
D.S.
Money
Come Together
You Are Not Alone
Childhood (Theme From "Free Willy 2")
Tabloid Junkie
2 Bad
History
Little Susie
Smile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T11:50:16.960

您从 JSON 获得的数组如下所示：

```
{
    u 'images': [{
        u 'uri': u 'http://api.discogs.com/image/R-446273-1356211752-6937.jpeg',
    }, {
        u 'uri': u 'http://api.discogs.com/image/R-446273-1239130419.jpeg',
    }, {
        u 'uri': u 'http://api.discogs.com/image/R-446273-1239130427.jpeg',
    }, {
    ...
} 
```

有一个“图像”条目，其中包含许多条目。这些都是“images”的子条目，“images”本身没有可以获取的“uri”属性。

您必须遍历所有图像，与曲目标题相同。用这个替换你的`for row in json_object`循环：

```
for row in json_object["images"]:
    print row['uri']
for row in json_object["tracklist"]:
    print row['title'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T11:55:04.943

试试这个，

```
opener = urllib2.build_opener()
opener.addheaders = [('User-agent', 'Mozilla/5.0 (Windows; U; Windows NT 5.1; it; rv:1.8.1.11) Gecko/20071127 Firefox/2.0.0.11')]
http_handle = opener.open(url)
jsonContent = http_handle.read()
http_handle.close()

import json
data = json.load(jsonContent)
data["videos"]["title"]//will return the title
data["videos"]["images"]["uri"]//will return the image url 
```

# javascript - 制作一个滚动到下一个标题的跳过按钮

> ID：14536560
> 
> 赞同：0
> 
> 时间：2013-01-26T11:39:13.097
> 
> 标签：javascript, jquery, html

我想使用具有名为“skiper”的类的按钮，然后单击该按钮将窗口滚动到下一个标题元素。我不想每次都写我想要它去的地方。

到目前为止，我尝试过：

```
$(document).ready(function () {
    $(".skiper").click(function () {
        $('body').scrollTop($(nextInDOM(this, $('h'))));
        event.preventDefault();
    });     
}); 
```

我想这是完全错误的。

我正在使用两个插件：[next-in-dom](http://techfoobar.com/jquery-next-in-dom/)和[scrollTo](http://lions-mark.com/jquery/scrollTo/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:56:51.143

你可以这样解决它：

```
$(document).ready(function () {
    var body = $('body');
    var headings = $('h1');
    var current = 0;

    $(".skipper").click(function (event) {
        ++current;

        if (headings.length > current) {
            body.animate( { scrollTop: headings.eq(current).position().top }, 200);
        }

        event.preventDefault();
    });
}); 
```

试用演示：http: [//jsfiddle.net/YqKTZ/](http://jsfiddle.net/YqKTZ/)

您可以根据需要调整选择器`headings`。但是每次用户单击按钮时，JavaScript 都不必重新查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T11:57:25.663

使用以下代码：

```
$(document).ready(function () {
    $(".skiper").click(function (event) {
        $('html, body').scrollTop($(this).nextInDOM($('h1, h2, h3, h4, h5, h6')).position().top);
        event.preventDefault();
    });     
}); 
```

[演示](http://jsfiddle.net/kjUhK/)| [资源](http://jsfiddle.net/kjUhK/show)

# django - django - 如何创建相当于“admin”的应用程序？

> ID：14536563
> 
> 赞同：1
> 
> 时间：2013-01-26T11:39:35.113
> 
> 标签：django

我最近开始学习 Python 和 Django。我已经阅读了 Django 教程两次，并且开始对它的内容感到满意。

我的目标是制作一个非常类似于 Django“Admin”站点的应用程序。我不确定的是如何以最有效的方式进行。

根据我从教程中学到的知识，我尝试制作我的应用程序并成功显示只读数据。

我现在想做的是让用户能够自己修改数据、创建新记录等，这与“管理”站点的工作方式几乎完全相同。有没有一种捷径来实现这一点，而不是自己编码？

由于“管理”界面是自动构建的以适合我的模型，我认为应该可以为应用程序的面向用户的一侧做类似的事情，而无需重新编码？

非常感谢任何帮助！

欢呼詹姆斯（python 和 django 新手）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T00:41:22.133

感谢您的回复。总结它们：

1.  不，没有一种快速的方法可以在应用程序的用户端生成类似于“管理员”的内容。

2.  您可以根据您的要求扩展/修改“管理员”端，并授予用户访问该区域的权限（为此自定义权限）。

# c - C中的生活游戏，关于邻居

> ID：14536565
> 
> 赞同：2
> 
> 时间：2013-01-26T11:39:45.860
> 
> 标签：c, windows, codeblocks

我有一张由用户给出的尺寸为 N 和 M 的表格。该表仅填充 0 和 1。所以我得到这样的东西：

```
0 0 0 1 0
1 1 0 0 0
0 0 0 0 1
0 0 0 0 0
0 1 1 0 0 
```

我的问题是，我如何计算围绕单个 1 的数量？

我是这样开始的：

```
int nb_neighbours_M(int **tab, int i, int j, int n, int m)
{

  int nb_neighbours = 0;`

  for (i = 0; i < n; i++)
  {
    for (j = 0; j < m; j++)
    {

    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T11:47:21.330

最简单的方法是有两个数组`int drow[NUMBER_OF_DIRECTIONS]`和`int dcol[NUMBER_OF_DIRECTIONS]`，它们存储每个单元格邻居的坐标变化。

```
// North, East, South, West
int drow[NUMBER_OF_DIRECTIONS] = {-1,  0, 1, 0};
int dcol[NUMBER_OF_DIRECTIONS] = {0, 1, 0, -1};

int row, col; // the coordinates of the cell you want to check the neighbours of
int num_neighbours = 0;

for (int i = 0; i < NUMBER_OF_DIRECTIONS; i++) {
        if (tab[row + drow[i]][col + dcol[i]] == 1) {
            num_neighbours++;
        }
} 
```

在上面的示例中，我只处理 4 个方向，但您可以轻松地调整此代码段以处理 8 个方向，而无需修改任何实际代码（这是*一件好事*™）。

您可能还应该为此添加边界检查，因为它不执行任何操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T11:47:48.980

通过展开循环，您可以获得类似的东西。

```
int count_neighbours (int **a, int x, int y, int w, int h)
{
  int res = 0;

  int left   = x <= 0;
  int right  = x >= w - 1;
  int top    = y <= 0;
  int bottom = y >= h - 1; 

  if (!left && !top)     res += a[x-1][y-1];
  if (!right && !bottom) res += a[x+1][y+1];
  if (!left && !bottom)  res += a[x-1][y+1];
  if (!right && !top)    res += a[x+1][y-1];
  if (!left)             res += a[x-1][y];
  if (!right)            res += a[x+1][y];
  if (!top)              res += a[x][y-1];
  if (!bottom)           res += a[x][y+1];

  return res;
} 
```

# c# - 可能错误的空语句

> ID：14536567
> 
> 赞同：5
> 
> 时间：2013-01-26T11:39:48.240
> 
> 标签：c#

我是编程新手，遇到了一个叫做“可能错误的空语句”的问题，现在我已经对这个主题做了很多研究，我得到的解决方案是删除 if 语句后的分号，但是这只会产生更多警告和更多我目前不知道解决方案的错误，我非常感谢您的帮助，我使用的语言是 C#。

```
if (checkBox5.Checked = true) ;
Double value5 = Convert.ToDouble(checkBox4.Checked);
value5 = +1;
Double result5 = value5;
label2.Text = Convert.ToString(result5); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-26T11:40:50.650

我*想*这就是你想要的：

```
if (checkBox5.Checked == true)
{
    double value5 = Convert.ToDouble(checkBox4.Checked) + 1;
    label2.Text = value5.ToString();
} 
```

`=`是赋值，而`==`在检查相等性，另一方面，分号之后`if`将终止整个`if`语句。

请注意，当您检查`true`then 时，您可以使用它：

```
if (checkBox5.Checked) {  } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T11:41:55.873

你应该使用；

```
if (checkBox5.Checked == true) 
```

不是

```
if (checkBox5.Checked = true) 
```

`=`是*赋值运算符*，`==`是*相等运算符*。

查看;

*   [http://msdn.microsoft.com/en-us/library/sbkb459w(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/sbkb459w(v=vs.110).aspx)
*   [http://msdn.microsoft.com/en-us/library/53k8ybth(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/53k8ybth(v=vs.110).aspx)

当然，当您检查您的真实价值时，您可以使用您的 if 条件，例如；

```
if (checkBox5.Checked)
{
  // Do something if checkBox5 is checked.
} 
```

如果您在 if 条件后使用分号；

```
if (checkBox5.Checked = true) ; 
```

相当于

```
if (checkBox5.Checked = true) { } 
```

所以在你的情况下，我认为你也不应该使用分号。因为如果你使用它，你的代码会是这样的；

```
if (checkBox5.Checked = true)
{

}

Double value5 = Convert.ToDouble(checkBox4.Checked);
value5 = +1;
Double result5 = value5;
label2.Text = Convert.ToString(result5); 
```

我假设你不想这样做。请记住，即使没有要执行的主体，也不意味着循环终止。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T19:50:31.500

问题是 if 末尾的分号以及单个“=”应该是：

```
if (checkBox5.Checked = true) ; 
```

应该：

```
if (checkBox5.Checked == true) // double '==' for equality comparison 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T11:47:51.083

```
if (checkBox5.Checked == true) ; // or you can use if (checkBox5.Checked)
//                     ^------------------- `=` assignment operator must be `==` equals
{  // missed 
    Double value5 = Convert.ToDouble(checkBox4.Checked);
    value5 = +1;
//          ^_______________ I assume you need `=+` addition assignment operator instead
//                                     assigning `+1` to `value5 `
    Double result5 = value5;
    label2.Text = Convert.ToString(result5);
} /// missed 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T11:46:24.167

除了@des 和@Soner 的答案，你为什么不这样做：

```
if (checkBox5.Checked)

    label2.Text = Convert.ToDouble(checkBox5.Checked).ToString(); 
```

我假设您不打算`value5`按`1`应有的方式增加`value5 += 1;`

# java - Get , Set ) 不能得到平均结果

> ID：14536568
> 
> 赞同：-3
> 
> 时间：2013-01-26T11:39:58.043
> 
> 标签：java

我有一个 get/set 程序，我试图获得平均结果，但我总是得到 0.0。

*   该程序有 5 个实例，每个实例有 1 个返回方法
*   主要有 2 个用户输入和 3 个年级数字

账户类：

```
public class Account {
    private String name1;
    private String name2;
    private double grade1;
    private double grade2;
    private double grade3;
    private double average;

    public Account(String a1, String a2, double b1, double b2, double b3) {
        name1 = a1;
        name2 = a2;
        grade1 = b1;
        grade2 = b2;
        grade3 = b3;
    }

    public void setName1(String a1) {
        name1 = a1;
    }

    public void setName2(String a2) {
        name2 = a2;
    }

    public void setGread1(double b1) {
        grade1 = b1;
    }

    public void setGread2(double b2) {
        grade2 = b2;
    }

    public void setGread3(double b3) {
        grade3 = b3;
    }

    public String getName1() {
        return name1;
    }

    public String getName2() {
        return name2;
    }

    public double getgrade1() {
        return grade1;
    }

    public double getgrade2() {
        return grade2;
    }

    public double getgrade3() {
        return grade3;
    }

    public void setAverage(double ave) {
        average = ave;
    }

    public double getAverage() {
        return average = (grade1 + grade2 + grade3) / 3;
    }

    public String toString() {
        return String.format("%-5s %2s the average is: %5s%% ", name1, name2,
                average);
    }
} 
```

主要方法：

```
public static void main(String[] args) {
    Scanner in = new Scanner (System.in);

    System.out.println("Enter the  frist  and last name of student" );

    String inf=in.nextLine();
    String infs=in.nextLine();

    Account account= new Account(inf,infs,5,6,7);    
    System.out.print(account);
} 
```

我厌倦了试图解决它，所以请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:48:57.883

您从不*分配*任何值，`average`因此它保持其默认值`0.0`. 将此作业从`getAverage`

```
average = (grade1 + grade2 + grade3) / 3; 
```

给你的构造函数。Getter 和 setter 通常不包含这种类型的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:19:58.900

如果您已经在构造函数中完成了初始化，那么[getter 和 setter](https://stackoverflow.com/questions/1568091/why-use-getters-and-setters)有什么用。

任何方式，你的公众 `Account(String a1 ,String a2 ,double b1,double b2,double b3)`

应该是这样的：

```
public  Account(String a1 ,String a2 ,double b1,double b2,double b3) {

name1=a1;
name2=a2;
grade1=b1;
grade2=b2;
grade3=b3;
average=getAverage();

} 
```

正如@Reimeus 所建议的那样，您永远不会为`average`.

# php - PHP - 下载 cURL 结果

> ID：14536571
> 
> 赞同：2
> 
> 时间：2013-01-26T11:40:14.160
> 
> 标签：php, curl, download, binary

我在下面写了函数：

```
function download_xfs($url)  
{
    $ch = curl_init();  
    curl_setopt($ch, CURLOPT_URL, $url);  
    curl_setopt($ch, CURLOPT_COOKIE, 'login=michael; xfss=08ruiweu4tuhb5xqs8');
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    $string = curl_exec ($ch);  
    curl_close ($ch);  
    // Set headers
} 
```

当我使用`download_xfs("http://address.com/file.html");`它时，它返回文件的二进制文件而不是实际文件。任何人都可以重新编写此代码来处理下载文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:46:04.143

您的错误不在于下载文件，PNG 可能已下载 OK，但您可能只是将其回显到屏幕上。您必须为此文件 mime 类型设置适当的 HTTP 标头：

header('内容类型：图片/png');

但请记住不要在图像内容之前和之后回显任何其他字符串/字符（绝对没有，即使是 Windows 记事本在 php 文件开头创建的关于 UTF 的不可见 BOM 信息）。如果您想在您的 HTML 页面中包含可由您的服务器下载的图像，您必须使用此标头和图像内容创建另一个 .php 并通过以下方式包含它：

`<img src="image_from_download.php">`

**如果您想接收纯文本，但有意外的二进制文件**

远程服务器上可能有一些未知的解决方案，它会根据用户代理发送不同的内容或将您重定向到图像。

尝试将 cUrl 中的用户代理设置为与原始浏览器相同。

`Accept`此外，通过在 HTTP 请求中发送正确的标头，确保远程服务器提供的内容没有被压缩或分块（我不知道，那个 curl 会自动解压缩它？） 。

这个问题也可能与状态有关，也许您需要设置一些 cookie 或登录远程 Web 应用程序，从中检索 .html

尝试关闭您的`FOLLOWLOCATION`，也许您收到 30 倍重定向到图像。

# joomla - Joomla 2.5 中的自定义注册模块

> ID：14536573
> 
> 赞同：0
> 
> 时间：2013-01-26T11:40:34.767
> 
> 标签：joomla, joomla2.5, registration

我希望根据用户类型拥有多个注册表单或字段。我的数据库中已经存储了一些数据，我希望在注册期间，这些字段应该匹配。如果匹配成功，则该人将被注册，否则不会。

我请求是否有人可以告诉我任何免费扩展/插件的相同或任何使用文档，我可以根据我的要求编写模块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:18:39.537

只需复制核心配置文件插件并更改 xml 中的名称即可。然后，您将能够添加不同的 xml 文件并有条件地加载它们，并且在您的插件中，您将使用与注册和保存相关的各种用户事件来编写您想要发生的任何事情。

# php - Facebook API - 检查应用发布的“可见性”

> ID：14536583
> 
> 赞同：1
> 
> 时间：2013-01-26T11:41:10.977
> 
> 标签：php, facebook, api

是否可以检查用户为应用程序授予的“可见性”设置？授权应用程序时，用户可能会选择例如“公开”或“只有我”

是否有可能通过 api 获取用户应用了哪些设置的信息？我们希望奖励我们在他的信息流上发布的用户，但当然前提是他们至少是“朋友”或“公众”

如果没有，是否可以强制用户只能使用应用程序，如果他将隐私设置设置为“朋友”或“公共”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-12T15:24:45.807

我们曾经使用 FQL 来查找此信息，但似乎已弃用用于此的 FQL 命令。

似乎没有新的 API 端点可以检查。

不知道FB将来会不会提供呢？

# sql - 使用 IN 大数组多次执行查询

> ID：14536585
> 
> 赞同：1
> 
> 时间：2013-01-26T11:41:20.743
> 
> 标签：sql, postgresql, psycopg2

我目前正在编写一个必须多次执行相同查询的应用程序。该查询有一个（可能很大）数组作为参数，如下所示：

```
SELECT 
  m.a, SUM(m.b) as b, SUM(m.c) as c, SUM(m.d) as d
FROM table_m m JOIN table_k k ON (k.x IN %s AND k.id = m.y)
WHERE m.b > 0
GROUP BY m.a 
```

我在 Postgresql 9.1 上使用 Psycopg2。对于每个查询，我创建一个新游标并用数字列表作为参数执行（）查询（该查询在我的测试转换中执行了大约 5000 次）。输入列表的长度在 1 到 5000 项之间变化。

平均而言，查询的运行时间略低于 50 毫秒，最慢的执行时间约为 500 毫秒。

我对此有两个问题：

*   我能做些什么来优化这个查询吗？
*   有什么方法可以准备一次查询并执行多次（或者 Psycopg2 是否在内部执行此操作）？

架构`table_k`

```
 Column     |  Type  | Modifiers 
---------------+--------+-----------
 id           | bigint | not null
 x            | bigint | 
Indexes:
    "table_k_pkey" PRIMARY KEY, btree (id)
    "table_k_id_x_idx" btree (id, x)
    "table_k_x_idx" btree (x) 
```

架构`table_m`

```
 Column        |            Type             | Modifiers 
---------------------+-----------------------------+-----------
 id                  | bigint                      | not null
 y                   | bigint                      | 
 a                   | bigint                      | 
 b                   | integer                     | 
 c                   | integer                     | 
 d                   | double precision            | 
Indexes:
    "table_m_pkey" PRIMARY KEY, btree (id)
    "table_m_y_idx" hash (y)
    "table_m_a_idx" btree (a)
    "table_m_b_idx" btree (b) 
```

希望这是足够的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:47:10.043

优化器可能并不完全聪明并且评估的`IN`次数超出了您的预期。尝试将其移动到子查询中：

```
SELECT 
  m.a, SUM(m.b) as b, SUM(m.c) as c, SUM(m.d) as d
FROM table_m m 
JOIN 
(
    SELECT *
    FROM table_k
    WHERE x IN %s
) k ON k.id = m.y
WHERE m.b > 0
GROUP BY m.a 
```

* * *

`IN`您也可能首先使用长列表来降低性能。您可以尝试创建一个临时表，插入要搜索的值，然后加入临时表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T07:15:06.657

1.  为了回答您的第一个问题，您确实必须显示`EXPLAIN (analyze)`最快和最慢查询的输出。我看不到查询现在的样子有什么重要的。

2.  是的，可以[`PREPARE`查询](http://www.postgresql.org/docs/current/interactive/sql-prepare.html)以供以后执行。引用文档：

> 准备好的语句是可用于优化性能的服务器端对象。当 PREPARE 语句被执行时，指定的语句被解析、分析和重写。当随后发出 EXECUTE 命令时，计划并执行准备好的语句。这种分工避免了重复的解析分析工作，同时允许执行计划依赖于提供的特定参数值。

请注意（在文档中也提到过），您不会从`PREPARE`ing 小语句中获得太多利润，因为解析、分析和重写步骤比实际执行查询花费的时间要少得多。

此外，如果您的查询由不同的会话执行，您将不会获得性能提升，因为 PostgreSQL 没有基础设施来跨会话共享预先准备好的语句。

如果您经常执行查询并且碰巧以相同的输入执行它们，我建议在您的应用程序或某些专用数据库表中组织结果的缓存。您的数组似乎是缓存查找的完美键。

# vb.net - 在 Visual Studio 2010 中启动新的 SharePoint 项目时出错

> ID：14536594
> 
> 赞同：0
> 
> 时间：2013-01-26T11:42:20.920
> 
> 标签：vb.net, visual-studio-2010, deployment, sharepoint-2010, web-parts

我是 SharePoint 场的新管理员，我想开始为我们的网站开发**Web 部件**。

在我们公司，我们在**Windows Server 2008 R2上安装了****SharePoint 2010 。**

 **我们已经在该服务器上安装了**Microsoft Visual Studio 2010 。**

我们还在同一台服务器上安装了**Microsoft SQL 服务器管理工​​作室。**在我的计算机（**Windows 7 专业**版）中，我使用**远程桌面连接**来访问该服务器。

从**SharePoint 管理中心**，我创建了新应用程序、新网站集和新网站。

我以管理员权限启动了 VS。

从文件 => 新建 => 项目 =>Visual basic => SharePoint =>2010 => 空 SharePoint 项目 => 好的

然后我得到一个对话框，要求我输入要用于调试的本地站点。我输入：“http://sharepoint:21029/team1/”

我选择了**部署作为农场解决方案**复选框。

单击验证。

问题是：

当我单击**Validate**时，我收到以下错误：

**无法连接到 SharePoint 站点：“http://sharepoint:21029/team1/”确保站点 URL 有效，SharePoint 站点正在本地计算机上运行，​​并且当前用户具有访问权限网站。**

* * *

我在互联网上进行了很多搜索，最后我找到了这个链接：

[http://www.sharemuch.com/2010/03/19/resolving-vs-2010-solution-deployment-issues-for-sharepoint-2010-projects/](http://www.sharemuch.com/2010/03/19/resolving-vs-2010-solution-deployment-issues-for-sharepoint-2010-projects/)

当我尝试按照上一个链接中的描述解决我的问题时，我找不到以下数据库：

**SharePoint_Config**

**SharePoint_AdminContent_[指南]**

**SharePoint 网站内容数据库**

为什么我在 SQL Management Studio 中找不到数据库？为什么我会收到错误消息？

我想开始在 Visual Studio 中开发 Web 部件......请提供任何帮助！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T11:47:35.750

我终于得到了解决方案:)

我在事件查看器中发现了这一点：

实例“sharepoint”上“SharePoint_Config”的 SQL 数据库登录失败。

我执行了以下步骤，它解决了我的问题，我现在可以成功地将 Visual Studio 连接到我的 SharePoint 网站^_^

* * *

**授予数据库访问帐户正确的权限**

**若要解决此问题，请分配数据库访问帐户，然后验证该帐户在 SQL Server 中是否具有正确的权限。**

**要分配数据库访问帐户：**

1.  在管理中心网页的快速启动上，单击安全性，然后在常规安全性部分中单击配置服务帐户。

2.  在 Credential Management 部分的上方下拉列表中，单击 Web 应用程序的正确 Web 应用程序池。

3.  在 Select an account for this component 下拉列表中，单击要与此 Web 应用程序池关联的域帐户，或单击 Register new managed account 以将新域帐户与此应用程序池关联。

4.  单击确定以保存更改。

* * *

谢谢你们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T11:57:46.350

什么是团队 1？子网站？

尝试使用根网站集：

```
 http://sharepoint:21029/ 
```

如果您以独立模式安装 sp，请[在此处](http://sharepointthing.wordpress.com/2011/01/23/how-to-connect-to-the-sharepoint-services-integrated-database-with-sql-server-management-studio-express/)阅读有关连接字符串的信息，因为 sp 使用 SQL Server 的嵌入式版本**

# android - 如何在 Android 模拟器中下载 Google Play 服务？

> ID：14536595
> 
> 赞同：96
> 
> 时间：2013-01-26T11:42:25.047
> 
> 标签：android, android-emulator, google-play-services, google-maps-android-api-2

我想在我的应用程序中使用 Google Play 服务 API，但是当我打开模拟器来测试我的应用程序时，它会向我发送一条消息，上面写着“必须下载 Google Play 服务”。我知道会发生这种情况，因为我在我`MainActivity`的方法中编写了这个测试`onResume()`。
我想知道如何在我的模拟器中安装 Google Play 服务，因为很快我将需要测试我的地图。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-01-26T11:49:24.227

查看[设置 Google Play 服务](http://developer.android.com/google/play-services/setup.html)，其中说：

> [要使用Google Play 服务 API](http://developer.android.com/reference/gms-packages.html)开发应用程序，您需要使用 Google Play 服务 SDK 设置您的项目。
> 
> 如果您尚未安装 Google Play 服务 SDK，请按照[添加 SDK 包](http://developer.android.com/sdk/installing/adding-packages.html)的指南立即获取它。
> 
> 要在使用 Google Play 服务 SDK 时测试您的应用，您必须使用：
> 
> *   运行 Android 2.3 或更高版本并包含 Google Play 商店的兼容 Android 设备。
> *   带有[AVD](http://developer.android.com/tools/devices/index.html)的 Android 模拟器，它运行基于 Android 4.2.2 或更高版本的 Google API 平台。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2017-09-15T20:03:25.493

对于**api 21+**，您可以将系统映像与 Google Play 一起使用，如下所述。

对于**api 19+**（Android 4.4 Kitkat），您可以将系统映像 x86 与 Google Api 一起使用（我能够使用它）。

对于**api 17+**（Android 4.2.2），您可以尝试将系统映像 ARM 与 Google Api 一起使用（它对我不起作用）。

我能够将 Google Play 和 Google Services 作为单独的 apk 安装到纯系统映像 api 16 和 17，但在那之后它们并没有真正工作（服务粉碎和播放不打开）。所以似乎不可能让它们在纯 AVD 映像上工作，因为它们应该以 root 访问权限安装。在预装了 Google API 的 AVD 系统映像上更新 Google 服务也是如此 - 由于证书不兼容而无法更新，即使使用 adb 也无法卸载，因为无权访问。

* * *

## 如何使用 Google Play 设置 AVD 系统映像

现在有更好的解决方案：使用带有内置 Google Play 服务的 AVD 图像。它将使您能够使用包括 Google Play 在内的 Google 服务。您也可以在不重新创建 AVD 映像的情况下对其进行更新。

打开 AVD 管理器并选择创建新设备。您应该使用带有 Play 商店图标的设备定义。

[![1](../Images/815971987c42bb1ba40896b7282d2d73.png)](https://i.stack.imgur.com/NZg18.png)

然后为其选择系统映像。您应该使用**Google Play**而**不是**使用 Google API 选择一种。

[![2](../Images/e49a66b690a40a755d6b0f8b4917e82b.png)](https://i.stack.imgur.com/TZuMo.png)

然后启动新设备。

[![3](../Images/5af9fa48ebdc1ec72d2784a8f4f446fd.png)](https://i.stack.imgur.com/KPlrH.png)

您可以如屏幕截图所示更新播放服务，也可以在设备上手动更新。

[![4](../Images/75a308e09e9b7b7777b6be34afcdec48.png)](https://i.stack.imgur.com/2u4IR.png)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-01-26T12:49:00.280

这就是您如何让 Android Google Maps API v2 在您的模拟器上运行。

* * *

创建一个新的模拟器

*   对于设备选择“5.1'' WVGA (480 x 800: mdpi)”
*   对于目标选择“Android 4.1.2 - API level 16”
*   对于“CPU/ABI”选择“ARM”
*   保留默认设置

这些是对我有用的设置。我不知道不同的。

* * *

启动模拟器

* * *

通过 ADB install 命令安装[com.android.vending-1.apk](http://www.filedropper.com/comandroidvending-1)和[com.google.android.gms-1.apk](http://www.filedropper.com/comgoogleandroidgms-1)

* * *

更长的答案在我关于这个问题的博客文章中[https://medium.com/nemanja-kovacevic/how-to-make-android-google-maps-v2-work-in-android-emulator-e384f5423723](https://medium.com/nemanja-kovacevic/how-to-make-android-google-maps-v2-work-in-android-emulator-e384f5423723)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-07-10T08:04:21.903

我遇到了另一种在模拟器上使用 Google Play 服务的解决方案。[http://www.genymotion.com/](http://www.genymotion.com/)上的人提供了非常快速的模拟器，您可以在上面安装 Google Play 服务。他们只需要您注册即可开始下载，并且您需要安装 Virtual box。目前他们迎合 Android 16 和 17，但更多的正在开发中。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-03-24T22:34:46.460

在当前版本 (Android Studio 0.5.2) 中，现在有一个设备类型为“Google APIs x86 (Google Inc.) - API Level 19”。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-02-25T09:36:43.420

关键是选择你的模拟器的目标，例如：*Google APIs (ver 18)*。例如，如果您选择*Jellybean 18*（无 API），您将无法测试需要 Google 服务（例如地图）的应用程序。请记住，您必须首先使用 Android SDK 管理器下载您喜欢的版本的 Google API。

这是一个很好的做法，它比使用大多数解决方法要好得多。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-29T07:14:40.163

我最近尝试开发 google MAP API V2 应用程序并尝试通过模拟器运行它，但每次它都显示错误“此手机中未安装 Google Play Servcies”。从我的角度来看，即使我认为 google MAP API V2 在模拟器上也不起作用。

解决方案

然后我尝试在我的 Sony Experia 上运行相同的示例，它再次向我显示相同的错误。然后我在我的手机上安装了谷歌播放服务，令人惊讶的是它开始工作了..:)))

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-06-24T13:26:56.407

我得到它的工作

*   通过 Android SDK 管理器安装 Google Play 服务
*   使用 Galaxy Nexus 设备（4.65 英寸，720 x 1280：xhdpi）
*   针对 Android 4.2.2 Google API 级别 17

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-06-15T19:01:10.060

转到[https://university.xamarin.com/resources/working-with-android-emulators](https://university.xamarin.com/resources/working-with-android-emulators)。向下滚动到“安装 Google Play 服务”部分。一步一步地走过那里。

在这里直接从 xamarin 剽窃，所以我不会因为链接而不包括解决方案而感到厌烦。在我在 xamarin 页面上找到全面工作的解决方案之前，我在堆栈中找到了命中。

1.  启动 Xamarin Android Player 并运行提供的图像之一，以下假设您已启动 KitKat Nexus 4 图像。从 www.teamandroid.com/gapps/ 下载适当的 Google Play 服务 .zip 文件。确保下载适合您的 Android 版本的图像。
2.  将 .zip 文件拖到正在运行的模拟器上并放下它以安装组件，这里我们在 Mac OS X 上显示它，但在 Windows 中使用相同的机制。您将收到将软件包安装到模拟器上的提示，这表明映像将重新启动
3.  重新启动后，您将收到安装完成的通知，并且该图像现在将具有 Google 地图、Google+ 和对 Google Play 商店的支持。请注意，有些事情无法正常工作，并且您可能会从某些服务中得到一些错误，但您可以放心地忽略这些并继续说明。
4.  接下来，您需要关联一个 Google 帐户，以便您可以使用 Google Play 商店更新服务。它应该会提示您这样做，但如果没有，您可以进入 Google 设置并添加一个新帐户。添加帐户后，您可以通过打开 Google Play 商店应用程序并从侧栏菜单进入设置来更新 Google 应用程序。
5.  选择设置，然后向下滚动到构建版本号信息并双击它，直到它告诉您它是最新的，或者它将下载并安装新版本。
6.  关闭设备（按住右侧工具栏中的电源按钮）并重新启动设备。重启后应该提示需要更新 Google Play 服务，点击通知会打开 Google Play 商店并安装最新版本

现在，您可以在 Xamarin Android Player 中运行依赖于 Google 地图的应用程序。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-12-29T21:10:35.223

如果您已安装 Android Studio（即 1.5）并尝试以 SDK 4.0 为目标，那么您可能无法找到并设置带有 SDK-vX.XX（带有 Google API）的 AVD Emulator 和 AVD Emulator。

请参阅以下步骤以下载所需的库并开始。 [AVD 模拟器设置 - 使用 GoogleAPI 为 SDK4.0 设置模拟器，以便地图应用程序可以工作 - 在 Android Studio 中](https://i.stack.imgur.com/286pS.png)

但不幸的是，上述方法对我来说效果不佳。并且无法使用 API 级别 17 (SDK 4.2) 创建模拟器。所以我关注了这篇对我来说效果很好的帖子。原因似乎是 Android Studio Emulator 创建窗口的选项/功能有限。

[模拟器中的 Google Play 服务，实现 Google Plus 登录按钮等](https://stackoverflow.com/questions/16000548/google-play-services-in-emulator-implementing-google-plus-login-button-etc)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-03-19T11:30:11.243

我知道这是一个老问题，但我来到这里是因为我遇到了与上述每个人类似的问题。我通过仔细阅读来解决它！

我没有注意到我可以选择 2 个可能的系统映像，一个包含 Google API，另一个不包含（在我的笔记本电脑上，菜单太小，我无法阅读附加的（使用 Google API）文本。

错过这是一件愚蠢的事情，但其他人可能像我一样有一个小屏幕，错过了这个：D

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-08-26T14:32:04.723

如果你的模拟器 x86 这个方法对你有用。

下载并安装[http://opengapps.org/app/opengapps-app-v16.apk](http://opengapps.org/app/opengapps-app-v16.apk)。并选择纳米包

更多信息[http://opengapps.org/app/](http://opengapps.org/app/)

[![在此处输入图像描述](../Images/339b957cc4bd9a8cb99508b684b6d41c.png)](https://i.stack.imgur.com/YwZqF.png)

[![在此处输入图像描述](../Images/5d507bdddfd2669adca48301b6958372.png)](https://i.stack.imgur.com/Qfroy.png)

# android - android锁屏如何播放歌曲？

> ID：14536597
> 
> 赞同：3
> 
> 时间：2013-01-26T11:42:33.987
> 
> 标签：android

最近发布了一个[问题](https://stackoverflow.com/questions/14199293/get-current-playing-song-from-spotify)，如何从音乐应用程序 spotify 中播放当前歌曲，似乎没有简单的方法可以做到这一点。

至少在 4.0+ 中的 android 锁屏将显示当前歌曲并适用于几乎所有音乐播放器，包括 spotify。所以我的问题是锁屏是如何获取这些信息的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T13:16:27.827

在 Android 4.0 和 4.1 上，您看到的锁屏部分称为“遥控器”。你可以[打电话`registerRemoteControlClient()`](http://developer.android.com/reference/android/media/AudioManager.html#registerRemoteControlClient%28android.media.RemoteControlClient%29)给它提供信息。

在 Android 4.2+ 上，欢迎您创建自己的具有锁屏功能的应用小部件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T12:02:49.030

通过[广播接收器](http://developer.android.com/reference/android/content/BroadcastReceiver.html)，您可以创建广播接收器并在清单中为其定义过滤器。然后所有发送此广播的音乐应用程序将触发您的 onReceive 方法，以及从应用程序发送的信息。

> 编辑：

```
Intent intent = new Intent("com.android.music.playstatechanged");
    intent.putExtra("playing", (mState & FLAG_PLAYING) != 0);
    if (song != null) {
        intent.putExtra("track", song.title);
        intent.putExtra("album", song.album);
        intent.putExtra("artist", song.artist);
        intent.putExtra("songid", song.id);
        intent.putExtra("albumid", song.albumId);
    }
    sendBroadcast(intent); 
```

这是股票播放器中用于发送广播的代码，查看广播接收器，您就能够弄清楚如何获取所需的数据。

此外，您还需要找到适用于 spotify、AFIK 的过滤器。这适用于 soptify。“com.android.music.metachanged”或看这里[http://pastebin.com/ukfPnZwg](http://pastebin.com/ukfPnZwg)

# php - WordPress 类别中的 get_title

> ID：14536598
> 
> 赞同：1
> 
> 时间：2013-01-26T11:42:36.920
> 
> 标签：php, wordpress, post, content-management-system, categories

我想知道如何从特定类别中获取一些随机文章的标题/图片/内容。

例如：我有 3 个类别 A、B 和 C，我的博客上有一个图像滑块。我只想在滑块上显示那些属于 A 类的文章，而不是 B 和 C。我怎样才能做到这一点？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:21:15.810

下面的示例应该可以帮助您入门。它基本上使用一些标准调用 get_posts() 函数。

*   返回 5 个帖子
*   随机顺序
*   从特定类别

然后我们在返回的帖子上运行一个 foreach 来做我们想做的事情。您不必运行 foreach，在下面的示例中 $rand_posts 将保存一个数组 post 对象，您可以使用它来做您想做的事情。

您可以查看法典并将参数、标准更改为您想要的任何内容。

[Wordpress Codex - 获取帖子](http://codex.wordpress.org/Template_Tags/get_posts)

```
<?php
    $cat_id = // Your category ID.
    $args = array('numberposts' => 5, 'orderby' => 'rand', category => $cat_id);
    $rand_posts = get_posts($args);
    foreach($rand_posts as $post) : ?>
    <li><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></li>
        // Access all other post information here just like in a normal look. (Ex. the_content(), the_excerpt(), etc, etc
<?php endforeach; ?> 
```

# ios - 如何在没有 Apple Developer 许可的情况下在 iPhone 上测试应用程序？

> ID：14536603
> 
> 赞同：6
> 
> 时间：2013-01-26T11:42:56.307
> 
> 标签：ios, xcode, jailbreak

这个问题之前已经回答过很多次了，但这些答案都与 iOS 6 不兼容。唯一提到 iOS 6 的答案使用了一个名为 Jailcoder 的工具，它对我不起作用。

我试过的：

*   创建伪造的代码签名证书
*   修改 SDKSettings.plist
*   使用 Jailcoder 修补 Xcode 以及我的项目

我正在使用 Xcode 4.5.1 和 iOS 6.0.1。请注意，Xcode 4.5.1 没有针对 6.0.1 的 SDK，但我认为这没有什么不同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-26T11:49:28.463

1.  越狱您的设备（似乎您已经完成了这一步）。
2.  在 Xcode 中构建应用程序。获取为 iOS 编译的二进制文件，而不是为模拟器编译的二进制文件。
3.  使用该[`ldid`](https://github.com/rpetrich/ldid)实用程序来伪造对二进制文件进行代码签名：

    `ldid -S ~/Projects/Foo/Foo.app/Foo`

4.  将`.app`文件夹（应用程序包）复制到您的设备（例如，使用 SSH）。重新加载应用程序列表（重新启动 SpringBoard 或使用`uicache`设备上的实用程序）。

5.  利润。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:04:21.703

有一种更好更简单的方法可以做到这一点。下载 Jailcoder.app 应用程序并按“引导补丁”或“快速补丁”。然后该应用程序将为您完成所有工作，您可以直接从 xcode 管理器中选择您的 iphone。在 iPhone 上，您需要 cydia 调整 AppSync for iOS 5.0+

# c++ - 访问 IDWriteTextFormat 而不是新建（FW1FontWrapper 行距）

> ID：14536604
> 
> 赞同：1
> 
> 时间：2013-01-26T11:43:23.907
> 
> 标签：c++, reference, directx, directx-11

我正在使用`FW1FontWrapper`库来包装我的 DirectX 11 C++ 应用程序中使用的字体。

我想更改用 . 渲染的文本中的行距（两行文本之间的距离）`FW1FontWrapper`。

我知道在 DirectX 中我可以使用它`IDWriteTextFormat::SetLineSpacing(DWRITE_LINE_SPACING_METHOD_UNIFORM, 30.0f, 20.0f)`。

不幸的是，我不知道如何访问正确的`IDWriteTextFormat`结构。

我试图：

```
HRESULT hResult = FW1CreateFactory(FW1_VERSION, &FW1Factory);
hResult = FW1Factory->CreateFontWrapper(device, L"Arial", &fontWrapper);

//my attemp - first get the IDWriteFactory
IDWriteFactory *pDWriteFactory;
hResult = fontWrapper->GetDWriteFactory(&pDWriteFactory);

//and now the IDWriteTextFormat 
IDWriteTextFormat *pTextFormat;
hResult = pDWriteFactory->CreateTextFormat(L"Arial", NULL, 
    DWRITE_FONT_WEIGHT_NORMAL, DWRITE_FONT_STYLE_NORMAL, 
    DWRITE_FONT_STRETCH_NORMAL, 10.0f, L"", &pTextFormat);
pTextFormat->SetLineSpacing(DWRITE_LINE_SPACING_METHOD_UNIFORM, 100.f, 20.0f); 
```

我想它不起作用，因为这样我创建和修改了**new** `IDWriteTextFormat`，而不是通过以下方式影响渲染的那个：

```
fontWrapper->DrawString(
   context,
   s2ws(content).c_str(),// String
   fontSize,// Font size
   startTextPosition.getX(),// X position
   startTextPosition.getY(),// Y position
   color,// Text color, 0xAaBbGgRr
   FW1_RESTORESTATE// Flags (for example FW1_RESTORESTATE to keep 
        //context states unchanged)
 ); 
```

那么，如何访问权限`IDWriteTextFormat`（我要修改的那个会影响渲染；不是新的那个）？

据我所知`FW1FontWrapper`，没有自己的方法来设置行距。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-14T13:07:36.877

查看 FW1FontWrapper 模块的源代码，您可以看到`DrawString`内部使用了`IDWriteTextFormat`您无法访问的默认值。

解决方案是使用`DrawTextLayout`而不是`DrawString`.

为此（使用您的变量名），首先创建工厂并`IFW1FontWrapper`在您现有的代码中：

```
HRESULT hResult = FW1CreateFactory(FW1_VERSION, &FW1Factory);
hResult = FW1Factory->CreateFontWrapper(device, L"Arial", &fontWrapper); 
```

然后获取 DWrite 工厂并`IDWriteTextFormat`使用所需的行距创建（同样，这是您现有的代码）：

```
// get the DirectWrite factory used by the font-wrapper
IDWriteFactory *pDWriteFactory;
hResult = fontWrapper->GetDWriteFactory(&pDWriteFactory);

// create an IDWriteTextFormat and set line spacing
IDWriteTextFormat *pTextFormat;
hResult = pDWriteFactory->CreateTextFormat(L"Arial", NULL, 
    DWRITE_FONT_WEIGHT_NORMAL, DWRITE_FONT_STYLE_NORMAL, 
    DWRITE_FONT_STRETCH_NORMAL, 10.0f, L"", &pTextFormat);
pTextFormat->SetLineSpacing(DWRITE_LINE_SPACING_METHOD_UNIFORM, 100.f, 20.0f); 
```

接下来，`IDWriteTextLayout`为您的字符串创建一个（使用您的变量名）并使用`IDWriteTextFormat`上面创建的：

```
// create a DirectWrite text layout for the string
// using the above IDWriteTextFormat 
IDWriteTextLayout *pTextLayout;
unsigned int stringLength = s2ws(content).size();
hResult = pDWriteFactory->CreateTextLayout(
    s2ws(content).c_str(),
    stringLength,
    pTextFormat,
    0.0f,
    0.0f,
    &pTextLayout); 
```

设置对象中的字体大小`IDWriteTextLayout`：

```
// set the required font size
DWRITE_TEXT_RANGE allText = {0, stringLength};
pTextLayout->SetFontSize(fontSize, allText); 
```

`DrawTextLayout`最后，使用（再次使用变量名）绘制文本：

```
// draw the text
fontWrapper->DrawTextLayout(
    context,
    pTextLayout,
    startTextPosition.getX(),
    startTextPosition.getX(),
    color,
    NULL,
    NULL,
    FW1_RESTORESTATE);

// tidy up interfaces
pTextLayout->Release();
pTextLayout = NULL; 
```

我可能从您现有的代码中做出了一些错误的假设，但您可以看到如何`IDWriteTextFormat`通过`IDWriteTextLayout`实例使用您自己的代码，然后使用`DrawTextLayout`而不是`DrawString`. 我希望这有帮助。

# ios - 首次打开 App 时显示 UIScrollView

> ID：14536606
> 
> 赞同：0
> 
> 时间：2013-01-26T11:43:44.317
> 
> 标签：ios, objective-c, ipad, uiscrollview

我有一个 iPad 应用程序，我想从 iOS 5.0 兼容到 6.0。我的主视图包含一个滚动视图 z-indexed 在前面，最初设置为隐藏。我还有一个工具栏，其中包含一个按钮，用于循环隐藏或不隐藏滚动视图。

我想添加一个功能，以在用户第一次打开应用程序时将滚动视图呈现为最初可见，以使新用户默认可以看到帮助。

我在可见和隐藏之间循环的代码如下：

```
- (void)showHelpView:(id)sender {
BOOL hidden = [blackTranslucent isHidden];
[self.view bringSubviewToFront:scrollViewOutlet];
if (hidden) {
[scrollViewOutlet setHidden:FALSE animationStyle:KGAnimationFade duration:0.7];
[blackTranslucent setHidden:FALSE animationStyle:KGAnimationFade duration:0.5];
}
else {
[scrollViewOutlet setHidden:TRUE animationStyle:KGAnimationFade duration:0.5];
[blackTranslucent setHidden:TRUE animationStyle:KGAnimationFade duration:0.7];
}
} 
```

其中 sender 是我的工具栏按钮，blackTranslucent 是主视图顶部的视图，scrollViewOutlet 是我的滚动视图 IBOutlet。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:00:44.290

`NSUserDefaults`在方法中添加一个属性“isNewUser”，`application:willFinishLaunchingWithOptions:`通过检查密钥是否存在，该属性只会被写入一次。

在您的主视图中，`viewDidLoad`检查此属性是否为 true 使视图可见并将键更新为 false。如果不只是定期继续。

[有关 NSUserDefaults 的更多信息](http://www.idev101.com/code/Objective-C/Saving_Data/NSUserDefaults.html)

希望有帮助

# c++ - 知道争论有多大

> ID：14536607
> 
> 赞同：2
> 
> 时间：2013-01-26T11:43:50.740
> 
> 标签：c++, pass-by-reference

假设我将参数传递给这样的函数：

```
void myFunc( int* arrayOfInts ); 
```

从函数不知道整数数组的大小的意义上说，这似乎并不安全。我可以发表评论说“这个函数假设它得到一个 10 个整数的数组”，但无法检查它。所以这个函数的错误使用会导致神秘的“分段错误”。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T11:45:25.187

也传递数组的大小，C 风格：

```
void myFunc(int* arrayOfInts, int arraySize); 
```

或者传入一个指向数组末尾之后的指针，迭代器样式：

```
void myFunc(int* begin, int* end); 
```

或者传入一个`std::vector<int>`或等效项并完全回避问题：

```
void myFunc(const std::vector<int>& vec); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T11:46:09.797

在 C 和 C++ 中，在处理原始数组时，函数通常还需要传入数组的大小，例如

```
void foo(int *arr, size_t size_); 
```

但是在 C++ 中，你为什么不使用`std::vector`呢？它是安全的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T11:48:17.520

使用模板函数

```
template <int N>
void fmyFunc(int (& array)[N]) 
{ 
} 
```

或 STL 容器（在现代 C++ 代码中是更好的方法）

```
void fmyFunc(const std::vector<int>& v)
{
} 
```

旧方法是传入数组大小

```
void fmyFunc(int* arrayOfInts, int size)
{
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T11:48:54.450

您可以通过引用数组来获取参数，并将数组的大小设为模板参数`N`：

```
template <int N>
void myFunc(int (&arrayOfInts)[N])
{
    // here we know the size is N
} 
```

或者，如果您的函数应该只接受特定大小的数组（例如，一个大小为 3 的数组的 3D 点），请指定该大小而不是使用模板。这样编译器只会让你用一个有效的数组调用这个函数：

```
void myFunc(int (&arrayOfExactlyThreeInts)[3])
{
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-26T11:49:32.363

直截了当的 C++ 答案是使用`std::vector`.

传统的 C/C++ 答案是也接受数组大小作为参数。

还有第三个特定于 C++ 的答案：您可以使用专门针对数组大小的函数模板。*这并不意味着你应该*。[有关详细信息，请参阅c++ function template specialization for known size typedefed array](https://stackoverflow.com/questions/9128780/c-function-template-specialization-for-known-size-typedefed-array)中接受的答案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-26T11:46:16.287

考虑使用指示大小的第二个参数，或者更好地使用`std::vector<int>`允许您在函数内部查询大小的参数

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-26T11:46:32.353

要么传递大小，要么最好使用`std::vector<int>`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-26T12:26:23.653

正如其他人所说，添加一个带有数组大小的参数。这样做的原因是您可以为不同大小的数组编写**一个**函数。编写计算数组大小的模板函数的方法意味着对于传递给模板的每个数组大小，您都有不同的函数。而且，是的，a`vector`有自己的大小，但会增加开销才能做到这一点。有时最简单的就是最好的。

# c++ - 如何使用 direct2d 和 ID2D1HwndRenderTarget 将位图保存到文件

> ID：14536610
> 
> 赞同：4
> 
> 时间：2013-01-26T11:44:38.927
> 
> 标签：c++, bitmap, direct2d

[如何将 ID2D1Bitmap 保存到 PNG 文件](https://stackoverflow.com/questions/11447489/how-to-save-id2d1bitmap-to-png-file)对我没有帮助。

我正在使用 Direct2D。

我想将一个`ID2D1**Hwnd**RenderTarget *m_pRenderTarget`文件保存为 bmp 或 png 等。

但是我在 MSDN 上找到的示例使用`ID2D1RenderTarget`.

在我的例子中，我在 m_pRenderTarget 中绘制了我的图形，我使用该方法`ID2D1Bitmap::CopyFromRenderTarget (...)` 获取了一个 ID2D1Bitmap。

之后，要使用下面的保存功能，我必须将`ID2D1Bitmap`我得到的转换为`IWICBitmap`. 因为下面的函数不使用`ID2D1Bitmap`...

我还没有找到如何做到这一点。

谢谢。

```
if (SUCCEEDED(hr))
{

    //
    // Save image to file
    //

    hr = pWICFactory->CreateStream(&pStream);
}

WICPixelFormatGUID format = GUID_WICPixelFormatDontCare;
if (SUCCEEDED(hr))
{
    static const WCHAR filename[] = L"output.png";
    hr = pStream->InitializeFromFilename(filename, GENERIC_WRITE);
}
if (SUCCEEDED(hr))
{
    hr = pWICFactory->CreateEncoder(GUID_ContainerFormatPng, NULL, &pEncoder);
}
if (SUCCEEDED(hr))
{
    hr = pEncoder->Initialize(pStream, WICBitmapEncoderNoCache);
}
if (SUCCEEDED(hr))
{
    hr = pEncoder->CreateNewFrame(&pFrameEncode, NULL);
}
if (SUCCEEDED(hr))
{
    hr = pFrameEncode->Initialize(NULL);
}
if (SUCCEEDED(hr))
{
    hr = pFrameEncode->SetSize(sc_bitmapWidth, sc_bitmapHeight);
}
if (SUCCEEDED(hr))
{
    hr = pFrameEncode->SetPixelFormat(&format);
}
if (SUCCEEDED(hr))
{
    hr = pFrameEncode->WriteSource(pWICBitmap, NULL);
}
if (SUCCEEDED(hr))
{
    hr = pFrameEncode->Commit();
}
if (SUCCEEDED(hr))
{
    hr = pEncoder->Commit();
} 
```

为了方便解释，我已经有一个 Direct2D 代码，并且我的绘图图像保存在我的 ID2D1HwndRenderTarget 上。我想将我的 ID2D1HwndRenderTarget 绘制的图像保存在磁盘上。

我找到的示例创建了一个新的 IWICBitmap，并使用 `pD2DFactory->CreateWicBitmapRenderTarget(pWICBitmap,D2D1::RenderTargetProperties(),&pRT);`

```
create a new ID2D1RenderTarget to draw. After drawing operations, it wrote the bitmap image 
    hr = pFrameEncode->WriteSource(pWICBitmap, NULL); 
```

就我而言，我不知道如何将图像从我的 ID2D1HwndRenderTarget 放到 IWICBitmap... 来编写它。有人知道如何绑定 ID2D1HwndRenderTarget 和 IWICBitmap

# php - 在 Facebook 用户墙上自动发布

> ID：14536629
> 
> 赞同：0
> 
> 时间：2013-01-26T11:47:44.823
> 
> 标签：php

我的任务是自动从我的网站发布到用户墙上，一旦授予所有权限，它就永远不会再次要求授予权限，这意味着所有下一个帖子都应该自动发布在该用户墙上。谁能帮我 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:50:41.333

请求`stream_publish`权限（例如使用重定向）并通过 PHP Facebook API执行类型`post`的图形 api 调用。`/me/feed/`

在获得许可后，您应该将您的访问令牌交换为长期有效的访问令牌，大约可以使用 60 天。

# ios - 将小部件与 IBOutlets 和 IBAction 一起从一个 xib 复制到另一个

> ID：14536637
> 
> 赞同：2
> 
> 时间：2013-01-26T11:48:21.733
> 
> 标签：ios, xib, ibaction, iboutlet

我有 4-5 个 XIB，它们有一个公共底栏，有 4 个 UIButton。

我可以选择它们，并将它们从一个 XIB 复制到另一个，但是有没有办法也复制与这些小部件相对应的 IBOutlet 和 IBAction？

任何帮助，将不胜感激。

谢谢

# php - apache虚拟主机链接错误

> ID：14536650
> 
> 赞同：0
> 
> 时间：2013-01-26T11:49:56.373
> 
> 标签：php, wordpress, apache

我在AWS上运行wordpress，AWS分配的公有域是“ec2-23-23-124-60.compute-1.amazonaws.com”，virtualhost设置如下：

```
<VirtualHost *:80>
        ServerName remykits.com
        DirectoryIndex index.php
        DocumentRoot "/home/mysite/sites/blog"
        LogLevel info
        ErrorLog  /var/www/vhosts/domain.com/log/error.log
        CustomLog /var/www/vhosts/domain.com/log/access.log combined
</VirtualHost> 
```

但是当我点击我博客中的链接时，url 变为“http://ec2-23-23-124-60.compute-1.amazonaws.com/”，我不知道如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T11:57:01.920

我认为这更像是一个 Wordpress 问题而不是 Apache 问题。进入您的管理面板，转到选项并将您的站点 URL 更改为指向 remykits.com。您的链接现在应该使用它作为`base_url`网站的链接。

如果您的 Apache 配置不正确，您的 Wordpress 安装很可能甚至不会呈现。你`ServerName`是对的，这是最重要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:00:36.150

这需要用 Wordpress 来解决。Wordpress 根据数据库中的域名在您的页面上生成链接和 URL。这似乎是 ec2-23-23-124-60.compute-1.amazonaws.com。这通常发生在有人通过访问该域名而不是您的实际域名 (remykits.com) 来安装 Wordpress 时。人们通常这样做是因为他们想在服务器上安装 Wordpress，但又不想在 DNS 传播时等待域名指向服务器 IP。

Wordpress 有一个编写良好的 Codex 页面，介绍如何更改您的 Wordpress 安装使用的域。虽然 codex 文章详细介绍了如何手动进行这些更改，但以下是您真正需要做的。

> 在WordPress单站点安装的设置->常规屏幕上，有两个>字段，分别名为“WordPress地址（URL）”和“站点地址（URL）”。这些也称为 >“主页”和“站点 URL”设置。它们是重要的设置，因为它们控制 >WordPress 认为您的网站所在的位置。它们控制页面的管理 > 部分以及前端中 URL 的显示，并在整个 WordPress 代码中使用。
> 
> “主页”设置是您希望人们在浏览器中输入以访问 >您的 WordPress 博客的地址。
> 
> “站点 URL”设置是 WordPress 核心文件所在的地址。
> 
> 注意：这两个设置都应该包括 http:// 部分，并且不应在 >end 处有斜杠“/”。

[Wordpress Codex - 更改站点 URL](http://codex.wordpress.org/Changing_The_Site_URL "Wordpress Codex - 更改站点 URL")

# c# - 使用 TPL 的 Parallel.ForEach 时跟踪进度

> ID：14536656
> 
> 赞同：16
> 
> 时间：2013-01-26T11:51:17.307
> 
> 标签：c#, multithreading, c#-4.0, task-parallel-library, plinq

跟踪以下进度的最佳方法是什么

```
long total = Products.LongCount();
long current = 0;
double Progress = 0.0;

Parallel.ForEach(Products, product =>
{
    try
    {
        var price = GetPrice(SystemAccount, product);
        SavePrice(product,price);
    }
    finally
    {
        Interlocked.Decrement(ref this.current);
    }}); 
```

我想将进度变量从 0.0 更新为 1.0（当前/总计），但我不想使用任何会对并行性产生不利影响的东西。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-26T13:01:03.767

Jon 的解决方案很好，如果你需要像这样简单的同步，你的第一次尝试应该几乎总是使用`lock`. 但是，如果您测量到锁定使事情变得太慢，您应该考虑使用类似`Interlocked`.

在这种情况下，我将使用`Interlocked.Increment`增加当前计数，并更改`Progress`为一个属性：

```
private long total;
private long current;
public double Progress
{
    get
    {
        if (total == 0)
            return 0;
        return (double)current / total;
    }
}

…

this.total = Products.LongCount();
this.current = 0;

Parallel.ForEach(Products, product =>
{
    try
    {
        var price = GetPrice(SystemAccount, product);
        SavePrice(product, price);
    }
    finally
    {
        Interlocked.Increment(ref this.current);
    }
}); 
```

此外，您可能想考虑如何处理异常，我不确定以异常结束的迭代是否应该算作完成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T12:05:59.450

由于您只是在进行一些快速计算，因此请通过锁定适当的对象来确保原子性：

```
long total = Products.LongCount();
long current = 0;
double Progress = 0.0;
var lockTarget = new object();

Parallel.ForEach(Products, product =>
{
    try
    {
        var price = GetPrice(SystemAccount, product);
        SavePrice(product,price);
    }
    finally
    {
        lock (lockTarget) {
            Progress = ++this.current / total;
        }
    }}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T12:13:01.320

在体内不使用任何阻塞的解决方案：

```
long total = Products.LongCount();
BlockingCollection<MyState> states = new BlockingCollection<MyState>();

Parallel.ForEach(Products, () =>
{
    MyState myState = new MyState();
    states.Add(myState);
    return myState;
},
(i, state, arg3, myState) =>
{
    try
    {
        var price = GetPrice(SystemAccount, product);
        SavePrice(product,price);
    }
    finally
    {
        myState.value++;
        return myState;
    }
},
i => { }
); 
```

然后，访问当前进度：

```
(float)states.Sum(state => state.value) / total 
```

# c - C中的指针语法

> ID：14536658
> 
> 赞同：0
> 
> 时间：2013-01-26T11:51:38.973
> 
> 标签：c, pointers, syntax

> **可能重复：**
> [在 C 中，声明指针的正确语法是什么？](https://stackoverflow.com/questions/3280729/in-c-what-is-the-correct-syntax-for-declaring-pointers)
> [用 C/C++ 编写“指向某物的指针”的好方法](https://stackoverflow.com/questions/5016117/good-way-to-write-pointer-to-something-in-c-c)

我目前正在读一本关于 C 的书。目前我读到的是关于指针的。

基本上，我认为我已经理解了这个概念。无论如何，有一件事让我感到困惑：

有时作者使用

```
void *foo; 
```

创建一个新指针，但有时它是

```
void* foo; 
```

有区别吗？有关系吗？不是吗？什么时候用什么？...？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T11:55:03.097

它们是等价的，但在一行中声明多个非 void 类型的变量时，前者可能更可取

```
int *foo, *bar; 
```

清楚地声明了两个指针，而

```
int* foo, bar; 
```

声明一个指针和一个`int`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T11:56:41.343

您可以根据需要在 * 的两侧设置任意数量的空格。无论哪种方式，它都意味着完全相同的东西：

```
void*foo;
void *foo;
void* foo;
void * foo;
void                     * foo;
void *                     foo;
void           *           foo; 
```

一切都是一样的。如果您从事一个项目，通常会有一些“编码风格标准”来解释该项目中的首选。但是编译器不会根据是否/在哪里有空格来做任何不同的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T11:53:59.867

两者是等价的，没有任何区别。

```
int *foo, i; 
```

但是你应该知道上面声明的区别。这里只有`foo`指针类型，而`i`类型`int`（不是`int*`）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T11:52:57.880

这两种语法是等价的。唯一的区别是风格问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-26T11:55:24.933

正如您可能已经知道的那样，编译器没有区别。

至于风格问题，有些人认为这样`void* ptr`更好，因为类型名称作为一个整体是孤立的。问题是，这不是*语言*的工作方式：

```
int*  ptr, otherptr; /* otherptr is not a pointer here */ 
```

即使您决定不一次声明多个变量，使用隔离类型名称的整个想法也会破坏数组和函数指针。这就是为什么我更喜欢另一种风格：

```
int *ptr, *otherptr, dontDeclareTooManyThings[N]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-26T11:56:33.130

> 有区别吗？

当然有。（如果没有，您就不会问这个问题。）在第一种情况下，星号位于空白的一侧，而在另一种情况下位于另一侧。

> 有关系吗？

确实如此。然而，不是在程序逻辑方面 - 两者的解析方式完全相同。但是，这是个人喜好问题。我一般**推荐第二种方式，**即`void *ptr`，因为指针限定符（星号）修改变量，而不是类型。

> 什么时候用什么？

刚刚解释了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-26T11:56:24.417

两种变体均有效。它们代表不同的风格。

考虑

```
char* foo, bar;
char *foo, bar; 
```

在这两种情况下 foo 是一个指针， bar 不是。

还要考虑（可读性）

```
char* foo() {
    // return something
} 
```

# java - 为什么 EnumSet 或 EnumMap 可能比它们的散列对应物性能更高？

> ID：14536665
> 
> 赞同：13
> 
> 时间：2013-01-26T11:53:02.257
> 
> 标签：java, enums, enumset, enum-map

以下来自[EnumMap 的 Java 文档的](http://docs.oracle.com/javase/6/docs/api/java/util/EnumMap.html)*实施说明*部分：

> 实施说明：所有基本操作都在恒定时间内执行。它们很可能（尽管不能保证）比它们的 HashMap 对应物更快。

我在 java 文档中`EnumSet`也看到了类似的行。我想知道为什么它比散列对应物更有可能`EnumSets`并且`EnumMaps`会更快？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-26T11:57:29.487

`EnumSet`由位数组支持。由于您可以预先知道可以放入的不同项目的数量`EnumSet`，因此我们可以简单地为每个枚举值保留一位。您可以想象对`Set<Byte>`or进行类似的优化，但对于（2^32 位需要 0.5 GiB 的内存）或一般来说`Set<Short>`，这是不可行的。`Set<Integer>`

因此，基本操作如`exists`或`add`ar 常量时间（就像`HashSet`），但它们只需要检查或设置一位。没有`hashCode()`计算。这就是为什么`EnumSet`更快。还有更复杂的操作，如联合或使用位操作技术轻松实现。

在 OpenJDK 中，有两种实现`EnumSet`：`RegularEnumSet`能够处理具有多达 64 个值[的`long`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/RegularEnumSet.java#RegularEnumSet.0elements)枚举和`JumboEnumSet`更大的枚举（使用[`long[]`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/JumboEnumSet.java#JumboEnumSet.0elements)）。但这只是一个实现细节。

`EnumMap`工作原理类似，但它用于`Object[]`存储值，而键（索引）是从`Enum.ordinal()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-10T09:08:12.210

`EnumSet`在内部使用 array[] 和自然顺序，从而产生以下后果：

*   **快速**：get/set 由常数时间 O(1) 调用，`hashCode()`不用于找到正确的存储桶
*   **内存效率**：数组的大小由 Enum 大小预定义，不是动态的

`EnumMap`使用 Enum 作为密钥，基于与`EnumSet`不可能发生哈希码冲突的相同原则

# c# - 互操作工作表 printoutEx 不打印第一页

> ID：14536667
> 
> 赞同：1
> 
> 时间：2013-01-26T11:53:20.177
> 
> 标签：c#, printing, interop

我有一个生成 excel 文件的应用程序。用以下方法打印时，第一页不打印。

我们通过as传递 excel 文件名 as`filename`和打印机设置。然后我们使用打开然后给定的文件并打开工作簿并通过. 在我选择 XPS 打印机作为打印机的情况下，它会两次获取输出文件名（打印第一张纸的时间和打印其他纸的时间）。当我更改调用输出文件的打印方法时，尚未创建。`PrintDialog``printerSettings``Microsoft.Office.Interop.Excel.Application``Microsoft.Office.Interop.Excel.Workbook``wb.Worksheets.PrintOutEx()``wb.Worksheets.PrintOutEx(1,1, ... )`

```
public static void PrintWorksheet(string fileName, PrinterSettings printerSettings )
    {
        Application excelApp = null;//excel application
        Microsoft.Office.Interop.Excel.Workbook wb = null;//workbook
        try
        {
            excelApp = new Microsoft.Office.Interop.Excel.Application();//initialize excel app

            wb = excelApp.Workbooks.Open(
            fileName,
                Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                Type.Missing, Type.Missing, Type.Missing, Type.Missing); //open workbook

                wb.Worksheets.PrintOutEx(1, wb.Worksheets.Count, printerSettings.Copies, false, printerSettings.PrinterName, false, printerSettings.Collate, false, Type.Missing);//calling print method
        }
        catch(Exception e)
        {
            string err = e.Message;
        }
        finally
        {
//closing the excel app and workbook

            GC.Collect();
            GC.WaitForPendingFinalizers();

            if (wb != null)
            {

                Marshal.FinalReleaseComObject(wb.Worksheets);

                wb.Close(false, Type.Missing, Type.Missing);

                Marshal.FinalReleaseComObject(wb);
            }

            if (excelApp != null)
            {
                excelApp.Quit();

                Marshal.FinalReleaseComObject(excelApp);
            }
        }

    } 
```

有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T13:06:19.930

您是否尝试过使用以下方法而不是[NamedRange.PrintOutEx 方法](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.namedrange.printoutex.aspx)

```
Microsoft.Office.Tools.Excel.NamedRange myNamedRange = Globals.Sheet1.namedRange1;

myNamedRange.PrintOutEx(
  1, 
  wb.Worksheets.Count,
  printerSettings.Copies,
  false, 
  printerSettings.PrinterName, 
  false, 
  printerSettings.Collate, 
  false
); 
```

# ruby-on-rails-3 - Rails：使用一个命令生成多个模型迁移？

> ID：14536668
> 
> 赞同：0
> 
> 时间：2013-01-26T11:53:33.047
> 
> 标签：ruby-on-rails-3, generator, rails-migrations

是否可以让 Rails 仅在 1 个命令中生成多个模型迁移？就像是...

```
$ rails g model Product1 name:string, Product2 name:string, Product3 name:string [...] 
```

背景：

我必须生成大约 4'000 个模型/数据库表。

为每个运行 1 个生成器命令可能需要 10 多个小时......

还是我必须跳出框框思考才能更快地解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T01:45:46.857

为什么不直接用 ruby​​ 脚本来做呢？

```
4000.times do |i|
  system("rails g model Product#{i} name:string")
end 
```

我确定您的模型可能比`name`每个模型的字符串更复杂，但我可以很容易地看到您从文件中读取它们并解析适当的列。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T16:10:33.473

原始问题的解决方案是使用宝石“弹簧”（它加快了很多事情）：

[https://github.com/jonleighton/spring](https://github.com/jonleighton/spring)

# typescript - 如何从打字稿中的另一个模块创建接口的别名？

> ID：14536669
> 
> 赞同：5
> 
> 时间：2013-01-26T11:53:42.987
> 
> 标签：typescript

我有 2 个打字稿文件。

**commons.d.ts**

```
module "commons" {
    interface IUser {
        name:string;
    }
} 
```

**main.ts**

```
import commons = module("commons");
class User implements commons.IUser {
    name:string;
} 
```

由于我将在 中使用`commons.User`很多`main.ts`，我想为它创建一个别名。因为我将代码更改为：

```
import commons = module("commons");

import UserAlias = commons.IUser;

class User implements UserAlias {
    name:string;
} 
```

但是编译的时候报错：

```
E:\WORKSPACE\app\typescripts>tsc main.ts
E:/WORKSPACE/app/typescripts/main.ts(3,27): The property 'IUser'
    does not exist on value of type 'commons'
E:/WORKSPACE/app/typescripts/main.ts(3,19): A module cannot be aliased
    to a non-module type 
```

如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T12:56:00.580

要为接口创建别名，您可以在本地接口上扩展它：

我已经对此进行了测试：

*commons.ts*

```
export interface IUser {
    name: string;
} 
```

*应用程序.ts*

```
import commons = module("commons");

interface userAlias extends commons.IUser {
}

class User implements userAlias {
    name: string;
} 
```

我稍微更改了 commons.ts，因为当您使用外部模块时，它们内部通常没有`module`声明 - 文件就是模块。该`module`声明用于内部模块。

[您可以在TypeScript 语言规范](http://www.typescriptlang.org/Content/TypeScript%20Language%20Specification.pdf)的第 9.4 节中阅读更多相关信息。

# android - Android：自定义形状按钮

> ID：14536672
> 
> 赞同：-5
> 
> 时间：2013-01-26T11:54:00.827
> 
> 标签：android, button

我需要在一侧创建两个带有尖角的按钮，它们相互补充。像这样： ![一侧带有尖角的两个按钮，相得益彰。](../Images/ad15ce9c86af06d9de2f41805820be7c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:02:55.757

首先想到的是：

使用“合并”而不是经典的 FrameLayout 并使您的 2 个按钮略微重叠： [http ://www.curious-creature.org/2009/03/01/android-layout-tricks-3-optimize-part-1/](http://www.curious-creature.org/2009/03/01/android-layout-tricks-3-optimize-part-1/)

> 子视图绘制在堆栈中，最近添加的子视图在顶部。

编辑：不要忘记为按压，选定的状态添加可绘制的可抽签，并确保边框做得好，因此选择/按下时的行为不会太奇怪。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-26T12:03:00.717

你最好的一点是使用水平线性布局，上面有两个按钮的图像和两个透明视图。

你的代码中必须有这样的东西：

xml布局：

```
 <LinearLayout
    android:layout_width="match_parent"
    android:id="@+id/parent"
    android:layout_height="50dp" >

    <View
        android:id="@+id/button1"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1" />

    <View
        android:id="@+id/button2"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1" />
</LinearLayout> 
```

活动代码：

```
 private LinearLayout mParent;

    @Override
    public void onCreate(Bundle bundle){
    super.onCreate(bundle);
    mParent = (LiearLayout) findViewById(R.id.parent);
    (findViewById(R.id.button1)).setOnClickListener(mListener);
    (findViewById(R.id.button2)).setOnClickListener(mListener);
     }
      private OnClickListener mListener = new OnClickListener(){
       public onClick(View view){
         //change parent color
       }

   } } 
```

甚至您可以使用 onTouchListener 来处理更精确的事件。

# javascript - 香草砌体 - 即探险家问题

> ID：14536673
> 
> 赞同：0
> 
> 时间：2013-01-26T11:54:12.080
> 
> 标签：javascript, internet-explorer

## [http://jsfiddle.net/WH8tW/6/](http://jsfiddle.net/WH8tW/6/)

我在尝试让香草砖石与 Internet Explorer 一起工作时遇到一些问题（在 ie 9 上测试）

我使用的 JavaScript 是

```
var container = document.getElementById('container');

var wall = new Masonry(container, {
    isFitWidth: true
});
container.style.display = "block";
wall.reload(); 
```

在 Chrome 和 Firefox 中进行测试时效果惊人，但是在 Internet Explorer 中容器的样式甚至没有改变（默认`display:none;`），问题的原因是什么以及如何解决

**参考：http:** [//vanilla-masonry.desandro.com/index.html](http://vanilla-masonry.desandro.com/index.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:06:54.130

当使用错误的 mime 类型提供服务时，Internet Explorer 不允许嵌入外部 javascript 文件，并且 github 将脚本作为 html 文件提供。

```
SEC7112: Script from https://raw.github.com/desandro/vanilla-masonry/master/masonry.min.js was blocked due to mime type mismatch 
```

相反，您必须将外部脚本嵌入到您的小提琴中以使其在 Internet Explorer 中运行，或者如果您在自己的服务器上运行您的页面，您还可以选择将脚本放在您的网站上并将其指向那里：

[http://jsfiddle.net/WH8tW/7/](http://jsfiddle.net/WH8tW/7/)

# templates - 流星交叉模板用户对象

> ID：14536674
> 
> 赞同：0
> 
> 时间：2013-01-26T11:54:18.080
> 
> 标签：templates, meteor

我想知道 user() 是一个可以在各处使用的对象

什么是让它在所有模板中可用的最好和最安全的方法？

{{app.user}} 似乎不起作用

还是我应该放入 Session ？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:16:50.857

您可以在客户端 javascript 中制作通用车把助手，例如：

```
Handlebars.registerHelper('user',function(){
   return Meteor.user();
}); 
```

只要用户登录，模板中的任何地方都可以使用它，例如（如果您设置了配置文件名称）：

```
{{user.profile.name}} 
```

# multithreading - 忙于处理单个代码行时取消Backgroundworker？

> ID：14536676
> 
> 赞同：1
> 
> 时间：2013-01-26T11:54:22.533
> 
> 标签：multithreading, backgroundworker

如果工作人员仍在忙于处理单个代码行，是否有任何方法可以在 x 秒后（即超时 5 秒）取消后台工作人员？（永远不要到 While 循环的末尾检查 CancellationPending）？例子：

```
Private Sub DoWork(ByVal sender As System.Object, ByVal e As System.ComponentModel.DoWorkEventArgs)
        Dim worker As BackgroundWorker = DirectCast(sender, BackgroundWorker)
        While Not worker.CancellationPending
            Dim args As ArgumentType = CType(e.Argument, ArgumentType)
            Try
            process #1
            process #2 --> hanging here. Never throw exception.
            ...
            process #n

            Catch ex as Exception
            'Never come here
            End Try
        End While
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T18:01:05.870

您可以通过两种方式解决此问题：

1.  通过利用 Henk Holterman 在这个[答案](https://stackoverflow.com/a/3255728/753737)中建议的图书馆中的一些支持——但我知道这不是你的情况；
2.  正如 Hans Passant 和 HackedByChinese 的[回答](https://stackoverflow.com/a/4732784/753737)所建议的那样，您可以生成一个新的任务/线程，您可以在其中完成工作并轮询`DoWork`处理程序的取消 - 当请求取消时，您只需忽略任务的结果（或以不干扰后续计算的方式对其进行管理）。
3.  如果`process #2`实际上是一个程序，您可以启动您的进程，然后利用`Process.WaitForExit`( [http://msdn.microsoft.com/en-us/library/ty0d8k56.aspx](http://msdn.microsoft.com/en-us/library/ty0d8k56.aspx) ) - 也就是说，您等待一段时间让进程退出，然后检查是否请求取消。

# ajax - 带有 jquery Post 的 Dotnetnuke WebService

> ID：14536678
> 
> 赞同：1
> 
> 时间：2013-01-26T11:54:41.620
> 
> 标签：ajax, json, jquery, dotnetnuke

我正在开发一个 dotnetnuke 模块，并且通过 javascript 连接到 web 服务以检索数据时遇到很多问题。

我有以下 javascript：

```
function Test() {
        $.ajax({
            type: "POST",
            url: 'http://localhost/DNN11/service1.asmx/TestMethod',
            data: "{'data':'" + "abc" + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(msg) {
                alert("success");
            },
            error: function(e) {
                alert("error");
            }
        });

    } 
```

然后我的网络服务中的以下WebMethod

```
[WebMethod]
    public string TestMethod(String data)
    {
        return "Hello World";
    } 
```

但是，当帖子没有被成功调用时，我无法通过我的网络服务。它不断给我一个 500 内部服务器错误页面。

请问有什么问题吗？我还有其他方法可以解决这个问题吗？

谢谢

[编辑]

这是整个代码

```
<script type="text/javascript">
    function Test() {

        $.ajax({
            type: "POST",
            url: '<%=ResolveUrl("~/DesktopModules/ModuleTest/WebService1.asmx/TestMethod")%>',
            data: '{ data: "test" }',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(msg) {
                alert("Success: " + msg);
            },
            error: function(msg) {
                alert("Failed: " + msg.status + ": " + msg.statusText);
            }
        });   

    }
</script>

<div>
    <input type="button" value="Load" onclick="Test(); return false;" />
</div>

[System.Web.Script.Services.ScriptService]
    public class WebService1 : System.Web.Services.WebService
    {

        [WebMethod]
        [ScriptMethod()]
        public string TestMethod(string data)
        {
            return "Hello World";
        }
    } 
```

我尝试将 Webservice 放在 DotNetNuke 文件夹中的新文件夹和本地项目中。我还将 ScriptMethod() 标记放在允许脚本调用它的 WebService 中。但仍然没有

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:07:34.393

看起来你的问题是跨域调用。如果您的页面与 Web 服务托管在同一台服务器上，那么您的代码应该没问题。如果您需要与来自其他域的服务进行交互，则必须使用 jsonp 请求。[在此处查看](http://bloggingabout.net/blogs/adelkhalil/archive/2009/08/14/cross-domain-jsonp-with-jquery-call-step-by-step-guide.aspx)带有代码示例的良好分步指南。

**更新**

如果同一应用程序上的所有内容都尝试使用相关 URL。而不是`url: '<%=ResolveUrl("~/DesktopModules/ModuleTest/WebService1.asmx/TestMethod")%>'`尝试`url: '/DesktopModules/ModuleTest/WebService1.asmx/TestMethod'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T04:57:36.077

为了从页面发布到 DNN 网络服务，您必须传入模块的上下文。我有一些适用于 DNN6 的示例代码

[http://slidepresentation.codeplex.com/SourceControl/changeset/view/69709#1181962](http://slidepresentation.codeplex.com/SourceControl/changeset/view/69709#1181962)

主要是

```
servicesFramework: $.ServicesFramework(<%=ModuleContext.ModuleId %>) 
```

线

尽管使用最新的服务框架 WebAPI 更改，但我尚未针对 DNN7 进行测试。

# java - javafx 在 griffon 1.2 的功能方面与 swing 相比如何？

> ID：14536680
> 
> 赞同：5
> 
> 时间：2013-01-26T11:54:48.690
> 
> 标签：java, swing, javafx, griffon, groovyfx

从技术上讲，创建一个基于 javafx/groovyfx 的 griffon 应用程序已经“有可能”有一段时间了。

现在的 swing 与 javafx 相比如何？

后者是否可以普遍推荐用于没有遗留包袱的新应用程序？

有什么需要注意的问题吗？

一般情况下，griffon + javafx/groovyfx 的关系如何？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T01:03:56.980

JavaFX 是 Swing 的继承者，与 Swing 相比有很多优势，包括：

*   所有节点（例如 UI 组件、形状、图像、容器）都驻留在其中的场景图。这提供了在 UI 中操纵任何节点的属性的能力，结果会影响其包含的节点。例如，可以通过对 Group 应用旋转变换来将包含一些图像的 Group 作为一个单元旋转。将此与 Swing 进行比较，后者的 UI 由两个独立的世界组成：UI 组件和 Java2D。

*   WebView 节点是一个 WebKit 端口，可让您在场景图中嵌入 Web 浏览器。

*   CSS 可用于 UI 皮肤

*   FXML 可用于与应用程序逻辑分开定义 UI。SceneBuilder，其输出为FXML，是一个绘制UI的工具。

目前有一些 Swing 开发人员提到他们错过的功能，但您可以查看 OpenJFX 项目[http://openjdk.java.net/projects/openjfx/](http://openjdk.java.net/projects/openjfx/)并参与这个非常活跃的社区以影响和贡献未来JavaFX 的版本。

您可能对 CaptainCasa.com 的 Björn Müller 撰写的技术立场文件感兴趣，题为“我们为什么使用 JavaFX”，其中讨论了他们的架构，包括他们从 Swing 迁移到 JavaFX 的决定 [http://captaincasa.blogspot.com/2013/ 01/为什么-我们-使用-javafx-paper.html](http://captaincasa.blogspot.com/2013/01/why-we-use-javafx-paper.html)

我希望这会有所帮助，并欢迎您访问 javafxcommunity dot com 上的 JavaFX 社区站点，以查看 JavaFX 开发人员的最新博客文章。

此致，James Weaver Oracle Java 技术大使

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:19:38.270

为什么、在哪里以及如何 JavaFX 有意义 [http://www.oracle.com/technetwork/articles/java/casa-1919152.html](http://www.oracle.com/technetwork/articles/java/casa-1919152.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T17:51:21.387

我可以推荐使用 javafx 而不是 swing。它易于学习，应用程序看起来更好。我在工作中使用 javafx 和 griffon 制作了几个应用程序，我没有遇到任何问题。

# java - 使用 Xuggler 将 RTMP 流式传输到 Red5

> ID：14536685
> 
> 赞同：1
> 
> 时间：2013-01-26T11:55:30.143
> 
> 标签：java, red5, rtmp, xuggler

我有以下问题：在我的应用程序中，我应该连接到 VNC 服务器，获取即将到来的图像并将它们保存为视频文件（这部分有效）并作为 RTMP 流发布到 Red5 服务器。

大部分视频编码部分基于 Xuggler 的屏幕录制教程应用程序（[http://wiki.xuggle.com/MediaTool_Introduction#How_To_Take_Snapshots_Of_Your_Desktop](http://wiki.xuggle.com/MediaTool_Introduction#How_To_Take_Snapshots_Of_Your_Desktop)）。

但是，作为 Java 的初学者，我似乎无法让实时流媒体部分工作。我知道我应该使用 IContainer，但即使在阅读了这篇文章之后：[如何从 Java 应用程序中传输实时视频？](https://stackoverflow.com/questions/3214422/how-to-transmit-live-video-from-within-a-java-application)和其他几个帖子我真的不知道如何适应我的应用程序。任何帮助将不胜感激，谢谢！

# numpy - ValueError：在 k-最近邻中设置一个数组元素，其序列为 fit(X, y)

> ID：14536686
> 
> 赞同：0
> 
> 时间：2013-01-26T11:55:37.307
> 
> 标签：numpy, machine-learning, scikit-learn, nearest-neighbor

我在这一行有一个错误：neigh.fit(X, y) : ValueError: setting an array element with a sequence。

我检查了拟合函数，X 是：{array-like, sparse matrix, BallTree, cKDTree} 我的 X 是一个列表列表，其中包含第一个元素实体编号和第二个元素列表（7 个单元格）。如果我更改并且我只使用第一个列表编号来获得列表的纯列表，则会出现此错误：查询数据维度必须与 BallTree 数据维度匹配。

我的代码：

```
listafeaturevector = list()
path = 'imgknn/'
for infile in glob.glob( os.path.join(path, '*.jpg') ):
    print("current file is: " + infile )
    gray = cv2.imread(infile,0)
    element = cv2.getStructuringElement(cv2.MORPH_CROSS,(6,6)) 
    graydilate = cv2.erode(gray, element)
    ret,thresh = cv2.threshold(graydilate,127,255,cv2.THRESH_BINARY_INV) 
    imgbnbin = thresh

    #CONTOURS
    contours, hierarchy = cv2.findContours(imgbnbin, cv2.RETR_TREE ,cv2.CHAIN_APPROX_SIMPLE)
    print(len(contours))

    for i in range (0, len(contours)):
        fv = list()  #1 feature vector

        #HUMOMENTS
        #print("humoments")
        mom = cv2.moments(contours[i], 1)  
        Humoments = cv2.HuMoments(mom)
        #print(Humoments) 
        fv.append(Humoments) #query data dimension must match BallTree data dimension

        #SOLIDITY

        area = cv2.contourArea(contours[i])
        hull = cv2.convexHull(contours[i]) #ha tanti valori
        hull_area = cv2.contourArea(hull)
        solidity = float(area)/hull_area
        fv.append(solidity)

        #fv.append(elongation)
        listafeaturevector.append(fv)

print("i have done")
print(len(listafeaturevector))
lenmatrice=len(listafeaturevector)

#KNN
X = listafeaturevector
y = [0,1,2,3]* (lenmatrice/4)

from sklearn.neighbors import KNeighborsClassifier
neigh = KNeighborsClassifier(n_neighbors=3)
neigh.fit(X, y)  #ValueError: setting an array element with a sequence.

print(neigh.predict([[1.1]]))
print(neigh.predict_proba([[0.9]])) 
```

如果我尝试将其隐藏在一个 numpy 数组中：

```
listafv = np.dstack(listafeaturevector)
listafv=np.rollaxis(listafv,-1)
print(listafv.shape)
data = listafv.reshape((lenmatrice, -1))
print(data.shape)

#KNN 
```

X = 数据

我得到：用序列设置数组元素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:08:36.257

几个建议/问题：

```
Humoments = cv2.HuMoments(mom) 
```

返回值的类别是什么`Humoments`？一个`float`或一个`list`？如果`float`，那很好。

```
for each image file
    for i in range (0, len(contours)):
       fv = list()  #1 feature vector
       ...
       fv.append(Humoments) 
       ...
       fv.append(solidity)
       listafeaturevector.append(fv) 
```

上面的代码似乎不正确。在您的问题中，我认为您需要为每个图像构建一个特征向量。所以任何与图像相关的东西都`i`应该去同一个特征向量`x_i`。然后你结合所有的特征向量来得到一个特征向量列表`X`。但是，您的`listafeaturevector`(or `X`) 出现在最里面的循环中，这显然是不正确的。

其次，您有一个针对 中元素数量的循环`contours`，您确定每个图像的元素数量保持不变吗？否则，`|x_i|`不同图像的特征（ ）数量完全不同，这可能会导致错误

```
setting an array element with a sequence. 
```

第三，您是否清楚要如何对图像进行分类？不同图像的目标值/标签是什么？我看到你只是用`[0,1,2,3]* (lenmatrice/4)`. 你能详细说明你想用这些图像做什么吗？它们是否包含不同类型的对象？它们是否显示出不同的模式？这些图像是否描述了不同的主题/颜色？如果是，则对于每种不同的类型，您给出不同的标签 - 0、1、2 或“红色”、“白色”、“黑色”（假设您只有 3 种类型）。标签的值无关紧要。重要的是它们有多少价值。我试图了解`labels`您的情况的区别。

另一方面，如果您只想检索相似的图像，则不需要使用分类器或为每个图像指定标签。相反，尝试使用`NearestNeighbors`.

```
print(neigh.predict([[1.1]]))
print(neigh.predict_proba([[0.9]])) 
```

第四，以上两行测试不正确。您需要设置一个`X`-like 对象才能从分类器中获得预测。也就是说，您需要一个`x`与您在训练示例中构建的结构相同的特征向量（所有这些都`h,e,s`以相同的顺序）。

# c++ - C C++ 与 * 之间的区别

> ID：14536694
> 
> 赞同：0
> 
> 时间：2013-01-26T11:56:42.070
> 
> 标签：c++

> **可能重复：**
> [C++ 中的指针变量和引用变量有什么区别？](https://stackoverflow.com/questions/57483/what-are-the-differences-between-pointer-variable-and-reference-variable-in-c)
> [指针与参考](https://stackoverflow.com/questions/114180/pointer-vs-reference)

我最近开始“重新学习”c++，遇到了一个我一直有的简单问题。

```
Int *intp = new int(10);
Int& intref = *intp; 
```

intref 打印为 10 *intp 也是如此。

&intref 和 intp 的打印也相等。

长话短说。`&`和`*`只是你访问值和地址的方式之间的区别吗？还是在使用上有很大的不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:01:36.643

该`*`符号意味着在堆栈上传递的是一个指针，即某物的地址。`&`说是参考。

参考这个[线程](https://stackoverflow.com/questions/57483/what-are-the-differences-between-pointer-variable-and-reference-variable-in-c/57492#57492)

# algorithm - 克隆图的算法

> ID：14536702
> 
> 赞同：8
> 
> 时间：2013-01-26T11:58:14.073
> 
> 标签：algorithm, clone, graph-algorithm

克隆一棵树的算法非常简单，我们可以为此进行前序遍历。是否有一种有效的算法来克隆图？

我尝试了一种类似的方法，并得出结论，我们需要维护一个已经添加到新图中的节点的哈希映射，否则会出现节点重复，因为一个节点可以有多个父节点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-26T22:48:33.503

进行深度优先搜索并在访问每个节点时复制它就足够了。正如您所说，您需要某种方式将原始图中的节点映射到相应的副本，以便循环和交叉边的副本可以正确连接。

这个映射也足以记住 DFS 中已经访问过的节点。

所以在Java中你会有类似的东西：

```
class Node {

  // Contents of node...
  Data data;

  // ... member declarations like array of adjacent nodes
  final ArrayList<Node> children = new ArrayList<>();

  // Recursive graph walker for copying, not called by others.
  private Node deepCloneImpl(Map<Node, Node> copies) {
    Node copy = copies.get(this);
    if (copy == null) {
      copy = new Node(data);
      // Map the new node _before_ copying children.
      copies.put(this, copy);
      for (Node child : children)
        copy.children.add(child.deepCloneImpl(copies));
    }
    return copy;
  }

  public Node deepClone() {
    return deepCloneImpl(new HashMap<Node, Node>());
  }
} 
```

请注意，您*不想*覆盖`equals`或`hashCode`for `Node`。包含副本的映射依赖于定义的引用相等性`Object`。

另一种方法是在每个节点中放置一个附加字段，如果有则指向副本，否则为空。这只是通过另一种方法实现地图。但它需要两次遍历图表：一次制作副本，另一次清除这些地图字段以供将来重用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T12:38:18.547

如果您有一些唯一标识每个节点的快速方法，您的哈希映射方法似乎是可行的。

否则，您最好：

1.  使用数据结构存储图形，允许您直接在每个节点中存储“重复”**唯一**标志（例如，`0`不重复，`1` 用于`numberOfNodes`重复节点），

2.  遍历节点（通过 BFS、DFS）处理*已经复制的节点*并*从起始图重建所有连接*。

您的起始图和结束图都应在每个节点中具有相应*的唯一*“重复”标志，以便您能够正确地从起始图重建连接。当然，您可以使用“重复”标志和“唯一标识符”作为单独的变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-10T00:22:36.830

当您从源图中复制节点时，将每个节点放置在`<Node, Integer>`地图中（从而将节点编号从 1 到 N）。

在目标图中粘贴节点时，将每个节点放置在`<Integer, Node>`地图中（再次从 1 到 N 编号，但映射方向相反，原因很快就会清楚）。

当您在源图中找到反向链接时，您可以`i`使用第一个映射将该反向链接的“源副本”节点映射到整数。接下来，您使用第二个映射查找整数`i`并找到需要创建相同反向链接的“目标副本”节点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-03T07:44:35.207

为了使克隆高效，使用两件事：

*   DS 在末尾具有*更快的删除和添加速度*。选择`list`,`queue`或`stack`
*   DS 具有*快速搜索*功能。`Map`可以快速搜索即`O(1)`摊销。

算法：

```
 To be processed <--> Queue
                          / 
Not_Cloned_Yet -> Clone it -> Map
      `~~~~~~~~checks~~~~~~~~~~^

Root is "Not Cloned yet" and needs to be "To be processed" -- (1)
Clone it -> Put in Map & Queue  -- (2)

Continue till "To be processed" is not zero. i.e. Queue is not empty. -- (3)
    Traverse and update the list of neighbours  -- (4)
        Neighbours that are "Not cloned yet" needs "Clone it -> Put in Map & Queue"   --(5) 
```

1.  第 2 步和第 5 步基于`To be processed --> Queue`
2.  步骤 3 上`Queue -> To be processed`。
3.  队列元素是那些已经克隆但未处理（即其邻居列表未更新）的元素。
4.  邻居可能还没有被克隆。因此，需要签入地图。

# php - Codeigniter 查询行数

> ID：14536703
> 
> 赞同：0
> 
> 时间：2013-01-26T11:58:47.183
> 
> 标签：php, codeigniter

我在 CI 应用程序中有以下代码：

```
$query = "INSERT INTO user(user_name,user_email) VALUES(?,?)";
        $result = $this->db->query($query,array($userName,$email));
        if ($result->num_rows()>0)
            return $this->db->insert_id();
        else
            return null; 
```

这会产生一个错误；致命错误：在第 38 行的 C:\xampp\htdocs\cmdline\application\models\mlogin.php 中的非对象上调用成员函数 num_rows()

第 38 行是行数大于 0 的条件。现在我不明白发生了什么 - 我正在使用 CI 的文档来检查行数是否大于 0 ，为什么会失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:07:27.637

这是因为你正在做一个`INSERT`查询。修改数据的查询`TRUE`在所有情况下都会返回，因此您真正尝试的是`TRUE->num_rows()`，这没有任何意义，会导致错误。

您真正要检查的是`$this->db->affected_rows()`，它将告诉您在数据库中插入了多少行。

尽管在这种情况下您没有这样做，但值得注意的是，它`affected_rows()`只会返回查询期间实际更改的行数，因此`UPDATE`不会实际修改数据的查询（即，如果该字段已经具有查询的值试图将其设置为），那么该行将不会反映在`affected_rows()`值中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:09:38.657

来自 CodeIgniter 的文档。

> query() 函数在运行“读取”类型查询时返回一个数据库结果对象，您可以使用它来显示结果。当运行“写”类型查询时，它只是根据成功或失败返回 TRUE 或 FALSE。检索数据时，您通常会将查询分配给您自己的变量，如下所示：

您的查询，因为它是一个 INSERT，所以只会返回 TRUE 或 FALSE。

# android - EditText Android中的文本样式

> ID：14536706
> 
> 赞同：3
> 
> 时间：2013-01-26T11:59:22.793
> 
> 标签：android, android-edittext

我有一个带有 2`EditText`和一个 login的登录页面`Button`。

代码是这样的： -

```
<EditText
    android:id="@+id/EditText_username"
    ...
    android:hint="@string/username"
    android:inputType="text"
    ...
    android:maxLength="9"
    android:maxLines="1" >

    <requestFocus />
</EditText>

<EditText
    android:id="@+id/EditText_password"
    ...
    android:hint="@string/password"
    android:inputType="textPassword" />

<Button
    android:id="@+id/Button_login"
    ...
    android:text="@string/login" /> 
```

我在 Username`EditText`和 Password上有一个 android 提示`EditText`。我的问题是当页面在模拟器上显示时，用户名和密码的提示有不同的风格，这非常烦人。这是问题的屏幕截图 -

[http://i49.tinypic.com/261lzli.png](http://i49.tinypic.com/261lzli.png)

注意用户名为系统字体，密码为单色。我如何使它们都一样？！单色/系统字体都可以。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T15:11:29.050

`onCreate()`在您的方法中尝试以下操作：

```
EditText password = (EditText) findViewById(R.id.EditText_password);  
password.setTypeface(Typeface.DEFAULT); 
password.setTransformationMethod(new PasswordTransformationMethod()); 
```

# java - 使连接字符串识别为java中的声明变量

> ID：14536709
> 
> 赞同：2
> 
> 时间：2013-01-26T11:59:47.647
> 
> 标签：java, string, variables

```
public class Assignment1 {
    public static void main(String[] args)
    {
        String e1 = "apple"; String e2 = "mango";
        String e3 = "banana"; String e4 = "cherry"; String fruit;
        int num = 1;
        while (num <= 4){
            fruit = "e" + num;
            System.out.println(fruit);
            count++;
        }
    }
} 
```

我制作了我将要做的示例代码，我希望代码结果将输出为

```
apple
mango
banana
cherry 
```

但我得到的是：

```
e1
e2
e3
e4 
```

你能帮我把连接的字符串识别为我应该声明的字符串变量吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T12:03:49.707

您不能按名称“寻址”局部变量（反射可以帮助您处理成员成员变量，但不能处理局部变量）。

您需要一个关联容器来使用字符串名称来寻址项目 - 例如，一个`HashMap<String,String>`. 将pairs`{"e1", "apple"}, {"e2", "mango"}`等添加到a`HashMap`中，然后使用`map.get(fruit)`key 检索值。

```
HashMap<String,String> map = new HashMap<String,String>();
map.put("e1", "apple");
map.put("e2", "mango");
...
int num = 1;
while (num <= 4){
    fruit = "e" + num;
    System.out.println(map.get(fruit));
    num++;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T12:05:03.457

使用数组：

```
public static void main(String[] args)
{
    String[] e = {"apple", "mango", "banana", "cherry"};
    for (int num = 0; num < e.length; ++num) {
        System.out.println(e[num]);
    }
} 
```

另一种编写循环的方法是

```
 for (String fruit : e) {
        System.out.println(fruit);
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T12:08:40.873

您不能将 Integer 连接到 String 并期望 e + "1" 将评估变量 e1。您应该将所有 String 变量放在一个数组中并迭代

```
 String e1 = "Mango";
        String e2 = "Apple";
        String e3 = "Banana";
        String e4 = "Cherry";

        String[] fruits = {e1, e2, e3, e4};
        String allFruits = new String();

        for(String fruit : fruits){
            allFruits += " " + fruit;
        }

        System.out.println(allFruits); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T12:18:00.790

您还可以使用`enum`：

```
public enum Fruit {
   APPLE, MANGO, BANANA, CHERRY
} 
```

存储它：

```
List<Fruit> fruits = new ArrayList<Fruit>();
fruits.add(Fruit.APPLE);
fruits.add(Fruit.MANGO);
fruits.add(Fruit.BANANA);
fruits.add(Fruit.CHERRY); 
```

并迭代它：

```
for (Fruit fruit : fruits)
   System.out.println(fruit); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-06-25T14:50:57.443

@dasblinkenlight 好方法。只有一个细节，你必须声明变量fruit：

```
String fruit = "e" + num; 
```

# java - 在Java中创建类的对象

> ID：14536711
> 
> 赞同：-1
> 
> 时间：2013-01-26T12:00:10.890
> 
> 标签：java, class, object

我有一个语法问题。

我知道一个类的对象可以创建为：

```
MyClass classname = new MyClass(); 
```

但是如果执行以下操作可以吗：

```
MyClass classname;
//.....some lines of code
classname = new MyClass(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:03:05.160

是的，您可以在与类型声明不同的行上实例化对象，但是仅当您想在不同的范围内实例化对象时才有用：

```
Object o;
try {
     o = new Thing();
} catch(Exception e) {
}
o.toString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:02:35.557

是的，它可以。

后：

`myclass classname;`

正如 Pshemo 在评论中所说，如果您在分配之前使用它，您的`classname`引用或代码将不会编译。`null`

您可以在其他时间/操作多次后将此引用分配给其他对象，也可以返回 null：

```
classname = new myclass();
classname = new myclass();
classname = new child_of_myclass();
classname = other_object_of_classname;
classname = null; 
```

# c# - 实体框架 - 如何在列表中导航 元素

> ID：14536714
> 
> 赞同：0
> 
> 时间：2013-01-26T12:00:35.320
> 
> 标签：c#, asp.net-mvc, entity-framework-4

我有两个模型 Garden 和 Flower

```
public class Garden
{
    public int Id { get; set; }
    public string Name { get; set; } // Default value: Garden #[Id]

    // Location.
    public int LocationX { get; set; }
    public int LocationY { get; set; }

    // Flowers.
    public virtual List<Flower> Flowers { get; set; }
}

public class Flower
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Color { get; set; }
    public double Height { get; set; }

    public DateTime LastWatered { get; set; }
    public DateTime Planted { get; set; }
}

public class DataContext : DbContext
{
    public DbSet<Garden> Gardens { get; set; }
} 
```

现在，我需要按 ID 选择一朵花。我得到了这个，但我不确定这是好方法。我该怎么做？你有这方面的文章吗？

```
var garden = _db.Gardens.Where(g => g.Id == gardenId).SingleOrDefault();
var flower = garden.Flowers.Where(f => f.Id == flowerId).SingleOrDefault(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:03:06.887

我建议这样做：

```
 var garden = _db.Gardens.SingleOrDefault(g => g.Id == gardenId);

 Flower flower = null;

 if (garden != null)
 {
     flower = garden.Flowers.SingleOrDefault(f => f.Id == flowerId);
 } 
```

不要先使用 Where 再使用 SingleOrDefault，只需使用 SingleOrDefault。

**编辑**

正如@JoachimIsaksson 建议的那样，我为花园添加了一个空引用检查，以避免可能的 NullReferenceException。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:26:39.467

您可以使用另一种语法重写它，并在一个数据库访问中执行整个选择。这也将消除对空值检查的任何需要；

```
// this will find the flower with the correct id 
// only if it's also in the garden with the correct id

var result = (from garden in _db.Gardens
              from flower in garden.Flowers
              where garden.Id == gardenId 
                 && flower.Id == flowerId
              select flower).SingleOrDefault(); 
```

# mysql - 使用临时表的 SQL 导入没有结果（也没有错误）

> ID：14536722
> 
> 赞同：0
> 
> 时间：2013-01-26T12:01:44.963
> 
> 标签：mysql, sql, import, phpmyadmin

我想只使用 SQL 导入一些值（1 列）。我写的查询看起来应该可以工作，但是当我在 phpMyAdmin 中输入它时，它只是重置了 SQL 表单（我必须第一次重新编写它）并且没有执行任何插入。此外，没有错误消息。

目标表 ( `contact`) 具有与临时表相同的结构，但有一些额外的字段。

```
create temporary table import(
id int,
postalcode varchar(255)
);

insert into import values
(1,'city1'),
(2,'city2'),
...
;

insert into contact(city) (
    select postalcode from import 
    inner join contact on contact.id=import.id
)
where contact.id=import.id 
```

我添加了该`inner join`子句，因为查询在该子句中找不到该`contact.id`列`where`。对于这种情况，这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:15:27.123

正确的解决方案原来是：

```
insert into contact (id,city)(select * from import)
on duplicate key update city=values(city); 
```

[查看 SQL Fiddle](http://sqlfiddle.com/#!2/0df87/1/0)。

这太棒了，将节省大量编写后端脚本以进行导入的时间。

# android - 使用警报管理器启动服务

> ID：14536724
> 
> 赞同：3
> 
> 时间：2013-01-26T12:01:55.910
> 
> 标签：android, android-service, alarmmanager

我正在尝试使用警报管理器启动服务。我已经尝试了一切，但它只是没有开始。我从活动的按钮侦听器调用下面提到的代码。

```
 private void setAlarmManager(String interval) throws NumberFormatException, IOException
    {
        AlarmManager service = (AlarmManager) getApplicationContext().getSystemService(Context.ALARM_SERVICE);
        Intent i = new Intent(getApplicationContext(), MyService.class);

        PendingIntent pending = PendingIntent.getBroadcast(getApplicationContext(),
                                                           0,
                                                           i,
                                                           PendingIntent.FLAG_CANCEL_CURRENT);
        Calendar cal = Calendar.getInstance();

        cal.add(Calendar.MINUTE, Integer.valueOf(interval));
        service.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
                                    (Integer.valueOf(interval) * 60000), pending);
    } 
```

我的清单看起来像：

```
<service android:enabled="true" android:name="com.pack.android.service.MyService"
            /> 
```

我正在尝试按照用户指定的时间（以分钟为单位）启动服务。但是我的服务永远不会被调用。

如果我使用以下代码调用该服务，它可以工作。我的项目目标版本是 16。

```
getApplicationContext().startService(i); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T12:18:49.290

更改`PendingIntent.getBroadcast`为`PendingIntent.getService`使用`PendingIntent`as 启动服务：

```
PendingIntent pending = PendingIntent.getService(getApplicationContext(),
                                     0,
                                     i,
                                   PendingIntent.FLAG_CANCEL_CURRENT); 
```

# javascript - 在javascript中生成大pdf：浏览器杀死挂页

> ID：14536733
> 
> 赞同：2
> 
> 时间：2013-01-26T12:02:49.997
> 
> 标签：javascript, pdf-generation

我正在使用 javascript 开发图像切割应用程序。主要目标是将图像切割成易于打印的部分，并使用这些部分生成 pdf。[您可以在http://framingapp.com/](http://framingapp.com/)和 github [https://github.com/jmorel/framingapp](https://github.com/jmorel/framingapp)上在线找到开发版本

图像处理本身效果很好，但是在生成 pdf 时，Chrome 会杀死我的页面并显示`aww snap`错误消息。我尝试使用两个可用的 pdf generationg js 库，`jsPDF`但是`ByteScoutPDF`没有一个能够生成大的 pdf（并且`ByteScoutPDF`不是开源的，我无法修改它以支持更大的分辨率和各种页面大小）。

我认为我要构建的 pdf 的绝对大小会使页面挂起，Chrome 认为这是一个错误并杀死它。我曾想过使用 webworkers 来避免这种情况，但无法让它们与 jsPDF 一起使用。pdf 对象似乎太复杂而无法作为 web worker 参数传递，并且由于它严重依赖于 window 元素，因此我无法在 webworker 中包含和使用它。

因此，我的问题是：无论如何在 js 中生成一个大的 pdf 而不让浏览器杀死页面？

*在有人问我为什么不做 pdf 生成服务器端之前：图像处理本身有点密集，我不想让服务器过载；但主要原因是我不希望人们将图像上传到服务器：对于非常大的图像来说它很慢而且不切实际。更不用说我的服务器上的可用空间很小了。*

# django - django - ModelAdmin 预填充的外键

> ID：14536735
> 
> 赞同：0
> 
> 时间：2013-01-26T12:02:57.477
> 
> 标签：django, django-forms, django-admin

我有三个模型：客户、合同、报告

```
class Customer
    pass

class Contract
    customer = models.ForeignKey(Customer)

class Report
    customer = models.ForeignKey(Customer)
    contract = models.ForeignKey(Contract, null=True, blank=True, default=None) 
```

在管理员中编辑报告时我想选择客户或合同，如果我选择合同客户必须设置为合同的客户

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:47:04.203

在您的**admin.py**覆盖保存方法中：

```
def save_model(self, request, obj, form, change):
    if obj.contract:
        obj.customer = obj.contract.customer # set customer to related contract customer
    else:
        #probably you do not do anything in here
    obj.save() 
```

# c - typedef 位域变量

> ID：14536736
> 
> 赞同：3
> 
> 时间：2013-01-26T12:03:00.063
> 
> 标签：c, typedef, bit-fields

我想要一个 1 位整数的 typedef，所以我想到了这个`typedef int:1 FLAG;`，但我遇到了错误，有什么办法可以做到吗？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-26T12:06:13.233

不。

C 程序中最小的可寻址“事物”是*字节*或`char`.
A`char`至少有 8 位长。
因此，您不能拥有少于 8 位的类型（或任何类型的对象）。

你可以做的是有一种类型，它的对象至少占据与 a 一样多的位`char`并忽略大部分位

```
#include <limits.h>
#include <stdio.h>

struct OneBit {
    unsigned int value:1;
};
typedef struct OneBit onebit;

int main(void) {
    onebit x;
    x.value = 1;
    x.value++;
    printf("1 incremented is %u\n", x.value);
    printf("each object of type 'onebit' needs %d bytes (%d bits)\n",
          (int)sizeof x, CHAR_BIT * (int)sizeof x);
    return 0;
} 
```

你可以看到上面的代码在[ideone](http://ideone.com/tjVSBA)运行。

# bundler - 在 Gemfile 中引用（未发布的）activesupport 4.0 gem

> ID：14536742
> 
> 赞同：1
> 
> 时间：2013-01-26T12:03:31.573
> 
> 标签：bundler, gemfile, ruby-on-rails-4

有没有办法在 Gemfile 中引用位于 Github 上 Rails git repo 子目录中的任何 Rails 4 gem（activesupport、activerecord、activemodel 等）？我有一个库，我想针对 activesupport 4 运行其测试，并且由于没有该 gem 的发布版本，我必须参考 git repo。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T20:39:20.163

只需将 Bundler 指向 git 存储库。Bundler 将在根目录或具有 gems 名称的目录中搜索 gem。

```
source :rubygems

gem 'activerecord', :git => 'git@github.com:rails/rails.git' 
```

# c# - 单击按钮时将“所有”文本框隐藏在一起

> ID：14536746
> 
> 赞同：0
> 
> 时间：2013-01-26T12:04:04.393
> 
> 标签：c#, winforms, textbox

单击按钮时如何将“所有”文本框隐藏在一起？有什么简短的方法可以避免一一隐藏它们吗？

```
gamma_textBox.Visible = false; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T12:06:22.533

```
foreach(var tb in this.Controls.OfType<TextBox>()) tb.Visible = false; 
```

但请注意，这不会查看任何容器*内部。*您可以通过枚举每个孩子的`Controls`集合来递归地执行此操作。这方面的一个例子是：

```
public void HideChildTextBoxes(Control parent)
{
    foreach(Control c in parent.Controls)
    {
        HideChildTextBoxes(c);
        if(c is TextBox) c.Visible = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T12:10:47.803

您可以使用这种通用的递归方法：

```
private void ProcessAllControls<T>(Control rootControl, Action<T> action)where T:Control
{
    foreach (T childControl in rootControl.Controls.OfType<T>())
    {
        action(childControl);
    }
    foreach (Control childControl in rootControl.Controls)
    {
        ProcessAllControls<T>(childControl, action);
    }
} 
```

它是这样工作的：

```
ProcessAllControls<TextBox>(this, txt=> txt.Visible = false); 
```

此方法递归搜索给定容器控件的所有子控件以查找指定类型的控件。然后它应用一个动作（在这种情况下它会改变`Visibility)`.

如果您希望它用于任何类型的控制，请使用非泛型重载：

```
public static void ProcessAllControls(Control rootControl, Action<Control> action)
{
    foreach (Control childControl in rootControl.Controls)
    {
        ProcessAllControls(childControl, action);
        action(childControl);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T12:09:01.540

如果你使用 Winforms，你可以这样做；

```
for (int i = 0; i < this.Controls.Count; i++)
{
   if (this.Controls[i].GetType().ToString() == "System.Windows.Forms.TextBox")
       this.Controls[i].Visible = false;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T12:10:22.713

将它们粘贴到面板（或其他容器）中，并设置该面板的可见性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T12:10:59.170

您可以将所有文本框放入**LIST(或数组)**中，然后使用 for 迭代使它们不可见。

# python - 掩码数组的特征值 (NumPy)

> ID：14536747
> 
> 赞同：0
> 
> 时间：2013-01-26T12:04:50.600
> 
> 标签：python, numpy, scipy, pandas

如何计算掩码 NumPy 数组的特征值和特征向量（对于未掩码数组，这可以通过 来实现`scipy.linalg.eig`）。

* * *

## 编辑：

事实证明，你毕竟可以做到这一点。

```
# a list of numpy matrices
import numpy as np
import numpy.ma as npma

import numpy.matlib as npm
import scipy as sp
import scipy.linalg as splin

import pandas as pd

# read in numpy data
import urllib
dataURL = 'http://archive.ics.uci.edu/ml/machine-learning-databases/arrhythmia/arrhythmia.data'
dataFile = urllib.urlopen(dataURL)

# read in the data as a NumPy dataset
aArr = np.genfromtxt(dataFile, dtype = np.float,
                         delimiter = ',', missing_values = '?')

aArrMasked = npma.masked_array(aArr, np.isnan(aArr))
aArrMaskedCenter = aArrMasked - npma.mean(aArrMasked, axis=0)
print splin.eig(npma.cov(aArrMaskedCenter)) 
```

# c# - 如何更改 WPF XAML 以反映 C# 代码隐藏中的更改？

> ID：14536751
> 
> 赞同：0
> 
> 时间：2013-01-26T12:05:26.183
> 
> 标签：c#, wpf, xaml, data-binding, master-detail

我正在重构示例中的代码：

*   [24.129.21。](http://www.java2s.com/Tutorial/CSharp/0470__Windows-Presentation-Foundation/MasterDetailBinding.htm)[C# / CSharp Tutorial](http://www.java2s.com/Tutorial/CSharp/CatalogCSharp.htm) » Windows Presentation Foundation » Binding
    中的[Master Detail Binding)](http://www.java2s.com/Tutorial/CSharp/0470__Windows-Presentation-Foundation/MasterDetailBinding.htm)

我来到以下 C# 代码隐藏，使用相同的 XAML 运行：

```
namespace WpfApplication1 
{
    public class Skill
      {
        public string Description { get; set; }
      }

      //I'd like to comment out the next line
      public class Skills : ObservableCollection<Skill>{  }

        public class Employee 
      {
        public string Name { get  ; set; }
        public int Age  { get; set; }
        //public Skills Skills { get; set; }
        //instead of line above - works!
        public ObservableCollection<Skill> Skills { get; set; }
      }

      public class Team : ObservableCollection<Employee> { }

      public class Company
      {
        public string CompanyName { get  ; set; }
        public Team Members { get  ; set; }
      }

      public class Companies : ObservableCollection<Company> { }

      public partial class MainWindow : Window
        {
        public MainWindow()
      {
          InitializeComponent();
      }
    }
} 
```

即从

*   `public Skills Skills { get; set; }`

到

*   `public ObservableCollection<Skill> Skills { get; set; }`

在`Employee`课堂 上

因此，我想摆脱，即注释掉这一行：

```
public class Skills : ObservableCollection<Skill>{  } 
```

但我得到：

> 错误 1 ​​XML 命名空间“clr-namespace:_24_129_21_Master_Detail_Binding”中不存在标记**“技能”。**第 13 行位置 34

在**Window1.xaml 中**

```
<local:Team>
  <local:Employee Name="Larry" Age="21">
    <local:Employee.Skills>
       <local:Skills> 
```

我该如何更改 XAML 才能做到这一点？

我应该如何为此更改 XAML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T12:12:04.363

在您的`Window1.xaml`课程中删除对技能课程的引用：（例如`<local:Skills>`）因为您不再拥有技能课程。相反，您需要`Skill`ObservableCollection 中的许多元素：

```
<local:Team>
   <local:Employee Name="Larry" Age="21">
     <local:Employee.Skills>
        <local:Skill />
        <local:Skill />
       .... 
```

此外，您可能应该在 Employee 的构造函数中初始化*Skills* ObservableCollection。

# jpeg - Internet 上提供的平均 JPEG 文件大小

> ID：14536752
> 
> 赞同：1
> 
> 时间：2013-01-26T12:05:29.773
> 
> 标签：jpeg, distribution, probability, filesize

任何指向描述 Internet 上提供的 JPEG 文件的“文件大小”属性分布的图表的链接？

我有兴趣知道 JPEG 文件是否存在长尾和“平均”大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T01:02:03.687

在寻找此类数据的现有示例时，我将遵从其他人的意见，但我可以分享我将如何计算此分布。

在不直接了解 Internet 上的图像大小分布的情况下，一种方法是从随机中抽取值并分析结果。这通常在统计和机器学习中完成，一种方法是[马尔可夫链蒙特卡罗](http://en.wikipedia.org/wiki/Markov_chain_Monte_Carlo)。这在数学上与 Google 如何计算其 pagerank 算法有关。

根据您希望结果的准确程度，最好的方法是[在 Internet 上进行随机游走](http://www8.org/w8-papers/2c-search-discover/measuring/measuring.html)并收集有关您遇到的图像文件大小的统计信息。值得注意的是，您不必存储每个值 - 有增量方式来存储此类统计数据，以便在采样远远超过内存容量的值后了解分布情况 - 例如，[Commons Math 实现](http://commons.apache.org/math/userguide/stat.html)。

然而，实现这样一个精确的随机游走可能很困难。也许一种近似的方法是去[谷歌图像搜索](http://images.google.com/)，根据[流行搜索词的分布输入随机搜索词](http://en.wikipedia.org/wiki/AOL_search_data_leak)，并为每个结果中的前几百张图像采样图像大小。这将很容易抓取（因为你必须做的工作少得多）和带宽效率（谷歌给你图像大小，所以你不必下载图像并自己检查它们。）我认为它会是相当准确地描述图像大小的分布。

最后，为了实现这一点，我建议使用像[mechanize](http://wwwsearch.sourceforge.net/mechanize/)这样的东西来极大地自动化这个过程。

# .htaccess - .htaccess 转发不同的域

> ID：14536753
> 
> 赞同：0
> 
> 时间：2013-01-26T12:05:45.187
> 
> 标签：.htaccess, mod-rewrite

我有 2 个要转发的域。

例子

1.  [http://www.domain.com](http://www.domain.com)
2.  [http://doma.in](http://doma.in)

我想这样转发

[http://domain.com](http://domain.com) ---> 重定向到[http://www.domain.com](http://www.domain.com)

[http://www.domain.com](http://www.domain.com) ---> 不需要重定向

[http://subdomain.domain.com](http://subdomain.domain.com) ---> 不需要重定向

[http://www.doma.in](http://www.doma.in) ---> 重定向到[http://doma.in](http://doma.in)

这个条件一直在做，直到短路域[http://doma.in](http://doma.in)

```
RewriteCond %{HTTP_HOST} ^[^.]+\.[^.]+$
RewriteCond %{HTTPS}s ^on(s)|
RewriteRule ^ http%1://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

我该如何解决以允许最后一个域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:14:19.167

它应该是这样的：

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^domain\.com$
#RewriteCond %{HTTPS}s ^on(s)|
RewriteRule ^(.*)$  http://www.domain.com/$1 [L,R=301]

RewriteCond %{HTTP_HOST} ^www\.doma\.in$
#RewriteCond %{HTTPS}s ^on(s)|
RewriteRule ^(.*)$  http://doma.in/$1 [L,R=301] 
```

# c - 使用目标 MAC 的 ARP 数据包

> ID：14536755
> 
> 赞同：0
> 
> 时间：2013-01-26T12:05:50.060
> 
> 标签：c, ip, arp

我向某些 IP 地址发送 ARP 请求，但如您所知，主机并不总是具有相同的 IP 地址。我想首先发送 ARP 请求并保存回复的主机的 MAC 地址，然后通过 MAC 地址发送 arp 包，不是通过IP。我设法向所有主机发送ARP数据包并保存回复的主机的MAC地址，但我不知道如何使用目标MAC地址而不是目标IP地址发送ARP数据包。你有什么建议吗？如果你想放一些代码，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:06:00.567

ARP 主要用于将 IP 地址转换为 MAC 地址，而不是相反。尽管存在逆向 ARP 规范（将 MAC 地址转换为 IP 地址），但 Linux、FreeBSD 或 Windows 机器都默认不支持它。

如果您尝试跟踪经常更改 IP 地址的机器并且您对它具有管理访问权限，则可以查看 mDNS（适用于 Linux 或 FreeBSD）或适用于 Windows 的 LLMNR。这两种协议都允许您通过询问主机名来查询本地链接网络上的机器。通过链接本地版本的 DNS 解析 IP 地址，从 IP 地址解析 MAC 地址，然后进行通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T08:53:08.110

正如我正确理解您的问题一样，您需要一个简单的解决方案，您希望通过该解决方案将 ARP 消息发送到特定主机而不是 ARP 请求广播。

AFAIK，有一个名为“arping”的工具可以做到这一点，但它有两个版本 1\. arping（iputils lib 的一部分） 2\. Thomas Habets 的 arping （这允许您将 APR 消息直接发送到目标.MAK地址）

默认情况下，大多数 Linux 都有 arping 工具（不是 Thomas Habets 的 arping），但您可以从 Internet 获取 Thomas Habets 的 arping 并使用它，唯一的问题是在系统上同时使用两种 arping 实现可能会引入冲突。

因此，要使其正常工作，必须删除前一个，并且 NetworkManager 也将被删除，因为它需要 iputils arping。

我希望这能帮到您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T12:17:24.733

我认为你在混淆一些东西。ARP 适用于 OSI 第 3 层，MAC 地址与 OSI 第 2 层上的以太网相关。要在 OSI 第 3 层上发送包（如 IP），您必须知道以太网的正确 MAC 地址。因此，您向所有站点发出广播（ARP 请求），您将得到一个带有正确 MAC 地址的答案（每个 usiccast）。比您可以发送具有该 MAC 地址的 IP 包。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T12:45:19.367

直接通过 ARP 通信很困难，因为没有用于发送 ARP 消息的简单 API。在 Linux 上，您必须使用原始套接字（请参阅 参考资料`man 7 raw`）并自己实现 ARP 协议。

# java - 使用多个包含/导入针对 XSD 验证 XML

> ID：14536756
> 
> 赞同：0
> 
> 时间：2013-01-26T12:05:58.080
> 
> 标签：java, xsd-validation

我需要针对 XSD 架构验证 XML 文件。架构分布在多个 XSD 文件中（使用 include 和 import 指令）。

通过遵循我已经在 SO 上找到的问题/答案，我提出了以下解决方案。

（请注意，以下代码只是一个快速开发的原型，并非最终解决方案。）

```
private static final String PROJECT_ROOT_DIR_PATH = "--- project-root-path ---";
private static final String SCHEMAS_ROOT_PATH = "--- schemas root path ---";

private void validate() throws Exception
{
    DocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();
    builderFactory.setNamespaceAware(true);

    DocumentBuilder parser = builderFactory.newDocumentBuilder();

    // parse the XML into a document object
    Document document = parser.parse(
        new File(
            PROJECT_ROOT_DIR_PATH +
            "src\\test\\resources\\example.xml"
        )
    );

    SchemaFactory factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);

    // associate the schema factory with the resource resolver, which is responsible for resolving the imported XSD's
    factory.setResourceResolver(new ResourceResolver(PROJECT_ROOT_DIR_PATH + SCHEMAS_ROOT_PATH));

    Schema schema = factory.newSchema(
        new File(
            PROJECT_ROOT_DIR_PATH +
            SCHEMAS_ROOT_PATH +
            "--- root-xsd-file-path\\root-schema.xsd ---"
        )
    );

    Validator validator = schema.newValidator();
    validator.validate(new DOMSource(document));
} 
```

**资源解析器.java：**

```
public class ResourceResolver implements LSResourceResolver 
{   
    @Override
    public LSInput resolveResource(String type, String namespaceURI,
        String publicId, String systemId, String baseURI) 
    {
        if (!"http://www.w3.org/2001/XMLSchema".equals(type))
        {
            throw new IllegalArgumentException(
                "Unexpected resource type [" + type + "]."
            );
        }

        if (systemId == null)
        {
            throw new IllegalArgumentException(
                "Unexpected resource system-id [" + systemId + "]."
            );
        }

        System.out.println("base-uri: " + baseURI);
        System.out.println("system-id: " + systemId);

        URI targetURI = getTargetURI(baseURI, systemId);
        System.out.println("target-uri: " + targetURI);

        System.out.println("---");

        Input input = null;

        try {
            input = new Input(baseURI, publicId, systemId, targetURI.toURL().openStream());
        } 
        catch (Exception ex)
        {
            throw new RuntimeException(
                "Could not open resource stream - " + ex.getMessage()
            );
        }

        return input;
    }

    private static URI getTargetURI(String baseURI, String relativePath)
    {
        URI targetURI = null;

        try {
            targetURI = (new URI(baseURI)).resolve(relativePath);
        }
        catch (URISyntaxException ex)
        {
            throw new RuntimeException(
                "Could not resolve target URI - " + ex.getMessage()
            );
        }

        return targetURI;
    }
} 
```

**输入.java：**

```
public class Input implements LSInput 
{
    private BufferedInputStream inputStream;

    private String baseURI;
    private String publicId;
    private String systemId;

    public Input(String baseURI, String publicId, String sysId, InputStream input) 
    {
        this.baseURI = baseURI;
        this.publicId = publicId;
        this.systemId = sysId;
        this.inputStream = new BufferedInputStream(input);
    }

    public String getPublicId() 
    {
        return publicId;
    }

    public void setPublicId(String publicId) 
    {
        this.publicId = publicId;
    }

    public String getBaseURI() 
    {
        return baseURI;
    }

    public InputStream getByteStream() 
    {
        return null;
    }

    public boolean getCertifiedText() 
    {
        return false;
    }

    public Reader getCharacterStream() 
    {
        return null;
    }

    public String getEncoding() 
    {
        return null;
    }

    public String getStringData() 
    {
        synchronized (inputStream) 
        {
            try {
                return IOUtils.toString(inputStream);
            } 
            catch (IOException e) {
                e.printStackTrace();
                System.out.println("Exception " + e);
                return null;
            }
        }
    }

    public void setBaseURI(String baseURI) {
    }

    public void setByteStream(InputStream byteStream) {
    }

    public void setCertifiedText(boolean certifiedText) {
    }

    public void setCharacterStream(Reader characterStream) {
    }

    public void setEncoding(String encoding) {
    }

    public void setStringData(String stringData) {
    }

    public String getSystemId() {
        return systemId;
    }

    public void setSystemId(String systemId) {
        this.systemId = systemId;
    }

    public BufferedInputStream getInputStream() 
    {
        return inputStream;
    }

    public void setInputStream(BufferedInputStream inputStream) 
    {
        this.inputStream = inputStream;
    }
} 
```

通过观察此解决方案产生的日志，它似乎确实以深度优先搜索顺序处理包含/导入语句。

**然而，在某些地方，一些导入语句被忽略（例如根本不处理）。**

我无法找到处理哪些语句而哪些不处理语句的模式。例如，在处理文件的以下三行时，仅处理第一行和第一行。尽管他们看起来都和我一样。

```
<import namespace="schemas/src/x20130601" schemaLocation="../../x20130601/Personalnumber.xsd"/>
<import namespace="schemas/src/common/2008/01/03" schemaLocation="../../../contract/x20080103/Contractnumber.xsd"/>
<import namespace="schemas/src/20100504" schemaLocation="../../../system/x20100504/Contractidentification.xsd" /> 
```

忽略某些导入语句的事实会导致以下类型的异常。

```
Exception in thread "main" org.xml.sax.SAXParseException; systemId: file:/z:/--- project path ---/schemas//x20130504/Identification.xsd; lineNumber: 18; columnNumber: 61; src-resolve: Cannot resolve the name 'dat20080103:Contractnumber' to a(n) 'element declaration' component. 
```

丢失文档的声明位于已跳过的 XSD 文件中。

* * *

请告诉我在哪里查找错误或包含哪些附加信息。

# php - API 错误代码：191

> ID：14536758
> 
> 赞同：0
> 
> 时间：2013-01-26T12:06:08.987
> 
> 标签：php, facebook, api, sdk

我在将我的网站与 Facebook 页面连接时遇到问题。

错误是：

```
API Error Code: 191
API Error Description: The specified URL is not owned by the application
Error Message: Invalid redirect_uri: Given URL is not allowed by the Application configuration. 
```

我的应用程序配置设置是：

*   应用域名：mercatdocasio.hol.es
*   网址： http: [//mercatdocasio.hol.es/](http://mercatdocasio.hol.es/)

页面代码的配置是：

```
fbconfig['baseurl']    = "http://mercatdocasio.hol.es/index.php" 
```

问题出在哪里？

在我的本地主机工作，但在我的网站不工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:08:53.120

当您请求权限对话框时，您提供了一个 redirect_url 。此 URL 应在您的应用程序范围内。

尝试将您的应用程序的 Facebook Developers Application 设置屏幕域设置为`mercatdocasio.hol.es`.

如果它不起作用，那么您在权限对话框中的 redirect_url 无效（指定其他域）。

# c++ - C++ 两个数组元素搜索

> ID：14536766
> 
> 赞同：0
> 
> 时间：2013-01-26T12:06:43.417
> 
> 标签：c++, arrays

我遇到了一个问题。

我如何检查一个数组是否在一个序列中有两个或多个元素。

例如，假设我有一个数组

1,2,3,6,7,8,4,5

我想检查它是否有数字 6,7,8 但按那个顺序。

例如，如果它是

1,2,3,7,6,8,4,5

它会返回假。

我知道使用一个元素很容易，只需创建一个 for 循环，但我不知道如何搜索两个或更多数组，以及我希望它们的顺序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T12:19:21.540

有一个算法：[`std::search`](http://en.cppreference.com/w/cpp/algorithm/search). 使用它而不在乎（只关心你是否想要比 O(n·m) 更快的复杂的东西）。

```
// will be superfluous in C++11
template <typename T, std::size_t N> T *begin(T (&arr)[N]) { return arr; }
template <typename T, std::size_t N> T *end  (T (&arr)[N]) { return &arr[N]; }

int main()
{
  int array[] = {1,2,3,6,7,8,4,5};
  int check[] = {6,7,8};

  int *position = std::search(begin(array), end(array), begin(check), end(check));
  if (position != end(array))
    std::cout << "found at position " << position - array << '\n';
  else
    std::cout << "not found\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T13:04:26.163

This is should yield O(n):
(edit: but it works correctly only with sequences that don't contain cycles)

```
bool has_a_sequence(const std::vector<int>& where, const std::vector<int>& seq_no_cycles)
{
    if(!seq_no_cycles.size())
    {
        return false;
    }
    std::vector<int>::const_iterator where_iter;
    std::vector<int>::const_iterator seq_iter = seq_no_cycles.begin();    
    for(where_iter = where.begin(); where_iter != where.end(); where_iter++)
    {
        if(*where_iter == *seq_iter)
        {
            seq_iter++;
            if(seq_iter == seq_no_cycles.end())
            {
                break;
            }
        }
        else
        {
            seq_iter = seq_no_cycles.begin();
            if(*where_iter == *seq_iter)
            {
                seq_iter++;
            }
        }
    }
    return seq_iter == seq_no_cycles.end();
} 
```

# javascript - 用数组和 for 循环自学算法基础知识。为什么这个for循环不起作用

> ID：14536767
> 
> 赞同：0
> 
> 时间：2013-01-26T12:06:48.460
> 
> 标签：javascript, arrays, for-loop

下面的代码旨在将数组索引与下一个索引进行比较，如果前一个索引较小，则打印“yay”。我想我理解我做错了什么，因为 for 循环正在遍历每个索引，并且我试图在循环遍历它之前将“下一个”索引存储在变量中。我很好奇如何解决这个问题。我可以用谷歌搜索它，但我更愿意看看人们在这里想出什么。我觉得学习比较好。

```
list = [1,2,3,4,5,6,7,8,9];

for(i=0; i<list.length; i++) {
    var small = list[i];
    var large = list[i++];
    if(small<large) {
     document.write("yay");

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:09:51.287

当您执行 list[i++] 时，i 的值会增加。您在 for 语句中再次增加它。将 large 分配给 list[i+1] 或删除 for 循环的增量部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T12:30:58.457

我刚刚在 code-play.com 上非常快地尝试了这个，但调试的第一步是检查变量的实际值是什么。我为此目的使用了 console.log() ，并使用您的确切代码导致以下结果：

```
small: 1
large: 1

small: 3
large: 3

small: 5
large: 5

small: 7
large: 7

small: 9
large: 9 
```

这应该会给你关于这里发生的事情的第一个线索。正如您所看到的，每次值都相同，并且每次迭代都会跳过一个数字。现在，当我们查看 javascript 运算符如何[在这里](http://www.w3schools.com/js/js_operators.asp)工作时，您会发现这是有道理的。

如果您要替换此行：

```
var large = list[i++]; 
```

有了这条线：

```
var large = list[i+1]; 
```

你的问题应该得到解决。请注意，++1 也不起作用，在这种情况下，您将获得以下输出：

```
small: 1
large: 2
yay
small: 3
large: 4
yay
small: 5
large: 6
yay
small: 7
large: 8
yay
small: 9
large: undefined 
```

然后唯一要做的就是检查这些值，这样你就不会将 i 增加到 list 的长度以上（这是导致上一次迭代中未定义大的原因），但我会让你自己弄清楚，用于教育目的:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T12:11:33.973

应该像这样工作

```
l = [1,2,3];
for (i = 0; i l.lenght -1; ++i) {
  if (l[i] < l[i+1]) {
    console.log("meh");
  }
} 
```

# ruby-on-rails - Rails kaminari 路由

> ID：14536768
> 
> 赞同：1
> 
> 时间：2013-01-26T12:06:49.123
> 
> 标签：ruby-on-rails, routing, kaminari

我在控制器中有这样的动作：

```
class ArtLookupsController < ApplicationController
  def search
****
@pre_articles_result = ArtLookup.search(s_query)
@articles_result = Kaminari.paginate_array(@pre_articles_result).page(params[:page]).per(70)
***
end
end 
```

和路线：

```
 match '/search' => 'art_lookups#search', :as => :search_art_lookup 
```

部分观点：

```
 = paginate @articles_result 
```

当我插入一些文本进行搜索时，我得到结果，一切正常，受限于 70 个条目（链接是：*** *：3000/搜索）....但是当我点击其他页面时，例如 3-rd 链接是比如：:3000/art_lookups/search?authenticity_token=ve%2FrRQoXIHPQ9BAN07RLCMF59bB0HVlEcNn%2Flxd4f64%3D&page=3&search=1234&utf8=✓</p>

我得到错误：`Unknown action The action 'show' could not be found for ArtLookupsController` 但是为什么？我该如何解决这个问题？所以如果我点击页码，我会得到其他结果......？我也试过`match '/search(/:page)' => 'art_lookups#search', :as => :search_art_lookup`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T07:19:23.453

我认为您可以像这样修改您的 routes.rb ：

匹配 '/search(/:page)' => 'artLookups#search', :controller => 'artLookups', :action => 'search'

# mysql - mysql过滤限制a，b

> ID：14536773
> 
> 赞同：0
> 
> 时间：2013-01-26T12:07:36.907
> 
> 标签：mysql

我有一个关于 mysql 限制的问题，我使用查询

```
select id,name from tbl where id='2' order by name limit 1; 
```

和

```
select id,name from tbl where id='2' order by name limit 1,2; 
```

其中第一个查询查询显示该行，但第二个不显示。如果我使用“limit 1,2”而不是“limit 1”，如何编写有效的查询。我将它与 ajax 一起使用，以进行分页。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T12:10:33.453

的语法`LIMIT`是

```
LIMIT {[offset,] row_count | row_count OFFSET offset} 
```

（见[文档](http://dev.mysql.com/doc/refman/5.5/en/select.html)）

您添加了 的偏移量`1`，因此它将跳过第一个（也是唯一一个）命中。因此您不会得到任何返回的记录！

而是尝试使用

```
LIMIT 0,2 
```

（尽管有（希望如此！）一张记录使用`id='2'`它没有多大意义`LIMIT`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T12:15:39.483

你有 id=2 这会给你一个记录。

如果您有更多 id=2 的 id，那么您可以使用 LIMIT 1,2

这是一个限制的例子

```
 SELECT * FROM `your_table` LIMIT 0, 10 

    //This will display the first 10 results from the database.

      SELECT * FROM `your_table` LIMIT 5, 5 

      //This will show records 6, 7, 8, 9, and 10 
```

在你的情况下

```
 limit 1   <---- will show the first record in your table
     limit 1,2 <----will show records first and second  in your table 
```

如果你的 id 是自动增量的，你不需要在这里限制，因为它已经是唯一的

# web-services - Jdeveloper 中用于安全（Https）连接的 Java Web 服务客户端证书配置

> ID：14536775
> 
> 赞同：1
> 
> 时间：2013-01-26T12:08:06.220
> 
> 标签：web-services, oracle, https, certificate, jdeveloper

我正在使用 Java 开发 Web 服务集成与 Oracle Jdeveloper 用于 UPS 运输。我已经导入了 WSDL 文件并且它们被完美地分配了。但是我无法运行它，因为 Jdeveloper 抛出异常，因为它无法识别其证书。我已经下载了所需的证书并使用 keytool 命令将其安装在密钥库中，但没有任何改变。然后我生成了一个新的密钥库并在其中安装了我的证书，但是 Oracle 使用了 DemoIdentity.jks 和 DemoTrust.jks 密钥库。我无法让 Oracle 默认使用我的新密钥库。

这是日志和我得到的错误：

```
<26.Oca.2013 14:02:08 EET> <Notice> <Security> <BEA-090171> <Loading the identity certificate and private key stored under the alias DemoIdentity from the jks keystore file C:\Oracle\MIDDLE~1\WLSERV~1.3\server\lib\DemoIdentity.jks.> 
<26.Oca.2013 14:02:09 EET> <Notice> <Security> <BEA-090169> <Loading trusted certificates from the jks keystore file C:\Oracle\MIDDLE~1\WLSERV~1.3\server\lib\DemoTrust.jks.> 
<26.Oca.2013 14:02:09 EET> <Notice> <Security> <BEA-090169> <Loading trusted certificates from the jks keystore file C:\Oracle\MIDDLE~1\JDK160~1\jre\lib\security\cacerts.> 
<26.Oca.2013 14:02:09 EET> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=Entrust Root Certification Authority - G2,OU=(c) 2009 Entrust\, Inc. - for authorized use only,OU=See www.entrust.net/legal-terms,O=Entrust\, Inc.,C=US". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<26.Oca.2013 14:02:09 EET> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=thawte Primary Root CA - G3,OU=(c) 2008 thawte\, Inc. - For authorized use only,OU=Certification Services Division,O=thawte\, Inc.,C=US". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<26.Oca.2013 14:02:09 EET> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=T-TeleSec GlobalRoot Class 3,OU=T-Systems Trust Center,O=T-Systems Enterprise Services GmbH,C=DE". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<26.Oca.2013 14:02:09 EET> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=T-TeleSec GlobalRoot Class 2,OU=T-Systems Trust Center,O=T-Systems Enterprise Services GmbH,C=DE". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<26.Oca.2013 14:02:09 EET> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=GlobalSign,O=GlobalSign,OU=GlobalSign Root CA - R3". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<26.Oca.2013 14:02:10 EET> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "OU=Security Communication RootCA2,O=SECOM Trust Systems CO.\,LTD.,C=JP". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<26.Oca.2013 14:02:10 EET> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=VeriSign Universal Root Certification Authority,OU=(c) 2008 VeriSign\, Inc. - For authorized use only,OU=VeriSign Trust Network,O=VeriSign\, Inc.,C=US". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<26.Oca.2013 14:02:10 EET> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=KEYNECTIS ROOT CA,OU=ROOT,O=KEYNECTIS,C=FR". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<26.Oca.2013 14:02:10 EET> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=GeoTrust Primary Certification Authority - G3,OU=(c) 2008 GeoTrust Inc. - For authorized use only,O=GeoTrust Inc.,C=US". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<26.Oca.2013 14:02:10 EET> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=Entrust Root Certification Authority - G2,OU=(c) 2009 Entrust\, Inc. - for authorized use only,OU=See www.entrust.net/legal-terms,O=Entrust\, Inc.,C=US". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<26.Oca.2013 14:02:10 EET> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=thawte Primary Root CA - G3,OU=(c) 2008 thawte\, Inc. - For authorized use only,OU=Certification Services Division,O=thawte\, Inc.,C=US". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<26.Oca.2013 14:02:10 EET> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=T-TeleSec GlobalRoot Class 3,OU=T-Systems Trust Center,O=T-Systems Enterprise Services GmbH,C=DE". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<26.Oca.2013 14:02:10 EET> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=T-TeleSec GlobalRoot Class 2,OU=T-Systems Trust Center,O=T-Systems Enterprise Services GmbH,C=DE". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<26.Oca.2013 14:02:10 EET> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=GlobalSign,O=GlobalSign,OU=GlobalSign Root CA - R3". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<26.Oca.2013 14:02:10 EET> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "OU=Security Communication RootCA2,O=SECOM Trust Systems CO.\,LTD.,C=JP". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<26.Oca.2013 14:02:10 EET> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=VeriSign Universal Root Certification Authority,OU=(c) 2008 VeriSign\, Inc. - For authorized use only,OU=VeriSign Trust Network,O=VeriSign\, Inc.,C=US". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<26.Oca.2013 14:02:10 EET> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=KEYNECTIS ROOT CA,OU=ROOT,O=KEYNECTIS,C=FR". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<26.Oca.2013 14:02:10 EET> <Notice> <Security> <BEA-090898> <Ignoring the trusted CA certificate "CN=GeoTrust Primary Certification Authority - G3,OU=(c) 2008 GeoTrust Inc. - For authorized use only,O=GeoTrust Inc.,C=US". The loading of the trusted certificate list raised a certificate parsing exception PKIX: Unsupported OID in the AlgorithmIdentifier object: 1.2.840.113549.1.1.11.> 
<26.Oca.2013 14:02:10 EET> <Warning> <Security> <BEA-090504> <Certificate chain received from localhost - 127.0.0.1 --> wwwcie.ups.com failed hostname verification check. Certificate contained MST-PC(My computer name) but check expected wwwcie.ups.com> 
```

请给我你的想法如何解决这个问题。任何推荐将不胜感激。谢谢。

PS：我使用的是 Oracle JDeveloper 11g Release 1，jdk160_24，Weblogic Server 10.3，Win7 64 位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-21T07:15:57.550

Sun JDK (Java Developer Kit)（版本：1.6.0_13 和 1.5.0_18）的最新更新与以下 Oracle WebLogic Server 版本中的 SSL（安全套接字层）实现不兼容：

*   11gR1 (10.3.1)
*   10gR3 (10.3.0)
*   10.0 和 10.0 的所有维护版本
*   从 R27.6.4（1.6.0_13 和 1.5.0_18）及更高版本开始的 9.2 MP4 Oracle JRockit 版本之前的 9.0、9.1、9.2 和 9.2 的所有维护版本也出现此问题。

解决方法

1) 使用较早版本的JDK - JDK1.6.0_12 及更早版本即可。

```
 or 
```

2) 将 \jdk\jre\lib\security\cacerts 的信任库文件替换为早期 JDK 中的一个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T13:58:33.603

首先，SSL 是单向还是双向？

单向意味着只有服务服务器（具有您尝试访问的 WS 的服务器）必须与您识别。为了让服务服务器识别您，您必须从其页面下载它提供的证书（有关如何执行此操作的大量教程）。警告：您必须获得整个证书链！将这些证书添加到您的信任密钥库。

双向意味着你也必须认同他们。为此，您应该从服务提供商处获得证书并将其添加到您的客户身份密钥库中。

此时，您应该有 2 个单独的密钥库。一，信任密钥库，是保存所有安全服务器证书的存储（您信任它们，因此得名）。其次是身份密钥库，以特定别名保存您的身份的存储。其他服务器将使用此信息来确定他们是否信任您。

现在进行 WLS 配置：

首先，如果您要使用 SSL，请不要使用 Demo Identity 和 Demo Trust 设置。将其更改为自定义身份和自定义信任。将密钥库设置为您创建的密钥库。如果服务器将仅使用单向 SSL，那么您可以将身份存储设置为 Demo Identity，但仍然必须在自定义身份和自定义信任设置下完成（只需从默认值复制路径、密码等）。在 server-> SSL 下设置身份，你就完成了。

其他：

您可能想要关闭主机名验证（服务器->SSL->高级）。这有时会导致很多问题。

如果仍然不起作用，请在 java 选项中添加以下标志：

-Dweblogic.security.SSL.verbose=true

-Dweblogic.security.SSL.enable.renegotiation=true

-Dsun.security.ssl.allowUnsafeRenegotiation=true

# python - Python中的日期格式转换

> ID：14536778
> 
> 赞同：-1
> 
> 时间：2013-01-26T12:08:14.270
> 
> 标签：python, date, date-conversion

您好我想知道如何将日期时间对象转换为特定格式。

```
>>> import datetime
>>> d = datetime.datetime.today()
>>> d.ctime()
'Sat Jan 26 17:33:08 2013' 
```

我想要输出或以下面的格式获取当前日期

```
2013-01-26 17:33:08 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T12:11:36.307

该[`isoformat()`方法](http://docs.python.org/2/library/datetime.html#datetime.datetime.isoformat)为您提供：

```
d.isoformat(' ') 
```

但可能包括微发送；您可以使用该[`.strftime()`方法](http://docs.python.org/2/library/datetime.html#datetime.datetime.strftime)进行更多控制：

```
d.strftime('%Y-%m-%d %H:%M:%S') 
```

输出

```
>>> import datetime
>>> d = datetime.datetime.today()
>>> d.isoformat(' ')
'2013-01-26 13:12:08.628580'
>>> d.strftime('%Y-%m-%d %H:%M:%S')
'2013-01-26 13:12:08' 
```

# ios - 使用 Phonegap 安装 Cordova 插件 - 没有 Cordova.plist

> ID：14536790
> 
> 赞同：15
> 
> 时间：2013-01-26T12:09:15.857
> 
> 标签：ios, xcode, cordova

我正在尝试为我的应用程序安装一个插件（工作正常），使用 Cordova 和 PhoneGap 框架在 XCode 中编译。

根据插件的说明，我应该向**Cordova.plist**文件添加一个密钥，但我在我的层次结构中找不到它。[这是我的 XCode 项目中目录的屏幕截图](https://imgur.com/y0gBfhU)。

这个问题的解决方法是什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-26T12:22:48.310

由于 PhoneGap 升级，**Cordova.plist**文件已停用，而是**config.xml**。

[来源](http://forum.wikitude.com/home/-/message_boards/message/193740;jsessionid=6C6CD2B8E437C6BDFA399B0CCDE6F8F1?p_p_auth=E8JvKWjp&_19_threadId=193741)

* * *

**编辑**：由于原始页面已被删除，以下是来自论坛主题的一些文字记录：

> *您使用的是 2013 年 1 月 7 日发布的全新 PhoneGap 2.3.0 版吗？Wikiitude 插件目前仅使用 PhoneGap 2.2.0 进行测试。在 2.3.0 中，cordova.plist 已更改为 config.xml*
> 
> *来自[http://shazronatadobe.wordpress.com/2012/12/10/whats-new-in-cordova-ios-2-3-0/](http://shazronatadobe.wordpress.com/2012/12/10/whats-new-in-cordova-ios-2-3-0/_)*
> 
> Cordova.plist 更改为 config.xml
> 
> 配置 Cordova.plist 文件已更改为 config.xml - 它采用与 Android config.xml 相同的新格式。如果要升级，则需要通过运行 bin/cordova_plist_to_config_xml 脚本来转换现有的 Cordova.plist。如果您仍在使用旧的 Cordova.plist，2.3.0 项目本身会警告您（在控制台日志中）并告诉您升级。
> 
> 尝试相应地编辑新的 config.xml - 我们将在接下来的几周内开发符合 2.3.0 的更新插件。

# entity-framework - Linq to entity 错误无法创建常量值

> ID：14536792
> 
> 赞同：0
> 
> 时间：2013-01-26T12:09:38.283
> 
> 标签：entity-framework

我有一个函数，我向其传递一个字符串，然后使用 linq to entity 检查我传递的字符串值是否已存在于数据库中。为此，我编写了这个函数。

```
 public static bool UserExistChk(String StrUserId) {
            using (SBVEntities dbcontx = new SBVEntities())
           {
                return dbcontx.Users.Contains(dbcontx.Users.FirstOrDefault(e => e.UserID == StrUserId));

           }
    } 
```

但我收到错误 - 无法创建类型为“MySBVApp.Models.User”的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）。

请帮助我是实体框架和 linq 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:52:45.340

您可以`Any`为此使用扩展方法：

```
public static bool UserExistChk(String StrUserId)
{
  using ( SBVEntities db = new SBVEntities() )
  {
    return db.Users.Any( o => o.UserID == StrUserId );
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:21:04.247

它应该是这样的。

```
 using (SBVEntities dbcontx = new SBVEntities())
           {
              return (dbcontx.Users
                             .FirstOrDefault(e => e.UserID == StrUserId) != null 
                             ? true : false); 
           } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T12:46:32.363

你可以使用：

```
public static bool UserExistChk(String StrUserId) 
{
    using (SBVEntities dbcontx = new SBVEntities())
    {
        var query = from u in dbcontx.Users
                    where u.UserId.Contains(strUserId)
                    select u;
    }
    Return query.Count > 0
} 
```

# c - 从带有指针的函数返回更大类型的日期

> ID：14536797
> 
> 赞同：0
> 
> 时间：2013-01-26T12:09:54.320
> 
> 标签：c, pointers, struct

> **可能重复：**
> [如何在 C 中获取文件的大小？](https://stackoverflow.com/questions/238603/how-can-i-get-a-files-size-in-c)

我在 C 中有一个函数，它正在从文本文件中读取未知数量的行。我正在将行中的数据插入到`struct`我拥有的数据中。每一行我都在增加结构的大小`realloc`。一切都很好，但是该函数会返回 this`struct`并且应该插入到`struct`程序的“main”中。从我的思维方式来看，它不应该起作用，而且它也不起作用。我不知道应该为 main 分配多少空间`struct`，然后我试图比较一个更大的`struct`.

代码很长，但这就是我基本上正在做的事情：

```
int* blah()
{
    int *x;
    x=(int*)malloc(sizeof(int)*3);
    x[0]=1;
    x[1]=2;
    x[3]=3;
    return x;
}

int main()
{
    int *y, *z;
    y=(int*)malloc(sizeof(int)*1);
    z=y;
    z = blah();
 return 0;
} 
```

我怎么知道我应该增加`y`多少？

ps 如果我执行`malloc`10 并且文件中有 5 行，那么它正在工作（如我所料）。

谢谢

**编辑：** 我正在构建的这个程序是为学校设计的，我得到了读取函数的原型，它只返回结构并获取指向文件的指针。所以我不能发送更多的变量。

**编辑2：** 结构：

```
typedef struct
{
    int x;
    int y;
}POINT;

typedef struct
{
    POINT points[SHAPE_TYPE];
}POLIGON;

typedef struct
{
    POLIGON poly;
    float sides[SHAPE_TYPE];
}RECORD; 
```

读取功能：

```
RECORD* Read(FILE* F)
{
    RECORD* rec;
    int i=1,j;

    rec = (RECORD*)malloc(PACK*sizeof(RECORD));

        if (rec == NULL) 
        {
                   exit(1); 
        }

    rec[0].poly.points[0].x=0;

    if(F == NULL)
    {
         printf("Could not open a file for reading. Exiting....\n");
         exit(1);
    }

         while (!feof(F))
         {
             if(rec[0].poly.points[0].x==(sizeof(*rec)/sizeof(RECORD)-1))
                rec = (RECORD*)realloc(rec,((sizeof(*rec)/sizeof(RECORD))+PACK)*sizeof(RECORD));

                if (rec == NULL) {
                   exit(1); 
                }

             for(j=0; j<SHAPE_TYPE; j++)
                fscanf(F, "%d,%d,%f,",&rec[i].poly.points[j].x,&rec[i].poly.points[j].y,&rec[i].sides[j]);

             fscanf(F,"\n");

             rec[0].poly.points[0].x=i;

             i++;
         }

      fclose(F);

         return rec;

} 
```

我这样称呼它：

```
RECORD* rec,p;
FILE *f;

rec = (RECORD*)malloc(PACK*sizeof(RECORD));

p=rec;

f=NULL;
f = fopen("Save.txt", "r");

p = Read(f); 
```

我不能使用全局变量。 `PACK`- 常量数。我应该用这个数字增加数组。 `SHAPE_TYPE`- 常量 - 多边形的点数。

在数组的第一个单元格中 -> `rec.[0].poly.points[0].x`- 这是我应该保存`RECORD`数组中实际 s 数量的地方，所以我开始从 [1] 填充它。

基本上我要做的是在 中创建一个，`array`然后使用一个函数从文件中读取，该函数创建另一个未知大小的数组并返回（数组）的指针。`RECORD``main()``RECORD`

简单的方法是将指针数组从主函数发送到函数并且不返回任何内容（void），但我不得不使用这个原型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T17:54:15.397

嗯，这与`realloc`.

我不确定我的所有代码是否都正确编写，但我将其更改`realloc`为：

```
 if(((*REC)[0].poly.points[0].x+1) % PACK==0)
        {
            p = (RECORD*)realloc(p,((*REC)[0].poly.points[0].x+1+PACK)*sizeof(RECORD));

                if (p == NULL) 
                {
                   exit(1); 
                }
        } 
```

现在它正在工作..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:31:17.817

我假设不是`struct`您的意思是`struct`'s 的数组（或您`struct`持有的行数组），因为我不知道如何在 C 中动态增加结构的大小（**编辑**：请参阅下面的 WhozCraig 的评论）。

您可以将数组传递给函数并`realloc`在必要时扩展它（使用 ）：

```
#include <stdio.h>
#include <stdlib.h>

int *blah(int *arr, size_t *elem_count, size_t *max_size)
{
    int i;

    for(i = 1; i <= 3; ++i)
    {
        if((*elem_count) == (*max_size)) /* max capacity exceeded */
        {
            int *tmp;
            ++(*max_size);
            tmp = realloc(arr, *max_size * sizeof *arr);
            if(tmp == NULL)
            {
                ;               /* Error handling and cleanup */
            }
            arr = tmp;
        }
        arr[(*elem_count)++] = i;
    }
    return arr;
}

int main(void)
{
    int *arr = NULL;
    size_t count = 0, size = 0, i;
    /* You may also pass an allocated array to `blah' */
    arr = blah(arr, &count, &size);
    if(arr == NULL)
    {
        ;                       /* Error handling and cleanup */
    }

    for(i = 0; i < count; ++i)
        printf("%d\n", arr[i]);

    free(arr);

    exit(EXIT_SUCCESS);
} 
```

您还必须再传递两个指针才能控制数组的容量和它当前拥有的项目数。

**附言**。C 分配函数不需要显式转换返回值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T12:33:00.297

您需要将“旧 z”传递给您的函数，然后使用“realloc” - 您还需要一个“当前计数”，以便您知道要扩展到什么大小：

```
int* blah(int *old, int* count)
{
    int *x;
    *count += 3;     // add three to count, as we are adding three elemnts
    x=realloc(old, sizeof(int)*count);
    if (!x) {
        free(old);   // Prevent leaking the "old" pointer. 
        allocation_failed();   // Do something if this goes wrong!
    }
    x[count-3]=1;
    x[count-2]=2;
    x[count-1]=3;
    return x;
}

int main()
{
    int *z = NULL;   // initialize z to NULL so we can start from "empty".
    int i;
    int count = 0; 
    z = blah(z, &count);
    z = blah(z, &count);
    for(i = 0; i < count; i++)
      printf("%d\n", z[i]);
 return 0;
} 
```

如您所见，我传递了一个指向 的指针`count`，这样我们就可以更新每次调用的计数`blah`。

显然有许多其他方法可以解决这个问题。

# javascript - 如何使用 Jquery 向上滚动？

> ID：14536800
> 
> 赞同：3
> 
> 时间：2013-01-26T12:10:28.000
> 
> 标签：javascript, jquery, scroll, scrollview

我尝试了一切，但我无法编写好的 Jquery 代码来让我的身体向上滚动。这是我的 JS：

`$("body").animate({scrollTop:$(document).height()}, 9000); $(this).fadeOut(fast);`

当用户单击特定的 div 时，它会使主体向下滚动，然后我想反转此功能以使主体向上滚动.. 任何想法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-26T12:19:24.997

如果您希望它向上滚动，您需要提供 a`0`作为参数。`scrollTop`

```
$(document).ready(function() {
    // scroll down
    $("html, body").animate({
        scrollTop: $(document).height()
    }, 9000);                  

    /scroll back up
    $("html, body").animate({
        scrollTop: 0
    }, 9000);                  
}); 
```

正如您在[文档](http://api.jquery.com/animate/)中看到的，您需要提供一个 CSS 属性和一个值作为第一个参数`animate()`。由于`scrollTop`（[doc of`scrollTop()`](http://api.jquery.com/scrollTop/)，它返回当前值）是垂直滚动条，并且您想滚动到顶部，因此您需要`0`向上滚动。

检查这个[jfiddle](http://jsfiddle.net/2vKWY/)进行演示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-26T12:12:45.983

尝试这个：

```
$("html, body").animate({
    scrollTop: $(document).height()
}, 9000); 
```

# c# - 如何更改隔离级别？

> ID：14536805
> 
> 赞同：6
> 
> 时间：2013-01-26T12:10:47.763
> 
> 标签：c#, sql-server-2008, entity-framework, transactions

我正在使用 EF 4.0，并且我想使用隔离级别`serializable`，因为在事务中我想在读取时阻止寄存器。

好吧，在 SQL Server 中，我尝试使用以下命令更改隔离级别：

```
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE; 
```

在 C# 中，我使用此代码尝试阻止寄存器：

```
using (var scope = new TransactionScope(TransactionScopeOption.Required, new TransactionOptions { IsolationLevel = System.Transactions.IsolationLevel.Serializable }))
{
   Entities myContext = new Entities();
   string colors = "select * from Colors where IDColor = 2";
   Colors myColor = myContext.Colors.SqlQuery(colors).FirstOrDefault<Colors>();
   myColor.Color = "Red";
   myContext.SaveChanges();
   scope.Complete();                  
} 
```

如果我逐行执行我的代码，如果我得到`SaveChanges`但仍然没有执行，如果我使用 SQL Server Management Studio 对表格颜色进行查询，我可以获得记录。

然后，如果我执行保存更改并得到`scope.Clompete()`，如果我尝试使用 Management Studio 进行查询，我什么也得不到，因为寄存器被阻止，所以当我完成我的 C# 代码时，寄存器被释放，我得到结果管理工作室。

所以我的问题是，如何在 C# 中使用可序列化的隔离级别？难道我做错了什么？

PS：我注意到如果我使用这个命令：

```
DBCC useroptions; 
```

我看到隔离级别是`serializable`，但是如果我关闭 Management Studio 并再次连接并看到隔离级别是默认的`readCommitted`。

所以我的问题是如何为我的数据库设置默认隔离级别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T13:19:40.687

*   默认 EF 事务隔离级别基于使用的数据库提供程序。

*   ef 代码中未指定的隔离级别应导致数据库服务器的默认隔离级别。

*   在 SQL Server 中，默认隔离级别是 READ COMMITED。

*   所以你不需要在你的 EF 代码上指定 IsolationLevel。如果你在 DB 端设置它，它也会作为 EF 的默认 IsolationLevel。

如何更改[**数据库引擎中 DB 检查隔离级别的 IsolationLevel**](http://msdn.microsoft.com/en-us/library/ms189122%28v=sql.105%29.aspx)和[**SET TRANSACTION ISOLATION LEVEL (Transact-SQL)**](http://msdn.microsoft.com/en-us/library/ms173763.aspx)

**更新**

要更改`isolation level`在 SSMS 上运行下面提到的命令：

```
USE YourDatabaseName;
GO
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE; 
```

检查它是否被应用？

```
USE YourDatabaseName;
GO
DBCC useroptions 
```

MSDN 说：

> 一次只能设置一个隔离级别选项，并且它会一直为该连接设置，直到它被显式更改。事务中执行的所有读取操作都在指定隔离级别的规则下运行，除非语句的 FROM 子句中的表提示为表指定不同的锁定或版本控制行为。

我希望这对你有帮助。

# javascript - 如何在鼠标悬停时将 img 的 ID 和 ID 传递给函数？

> ID：14536807
> 
> 赞同：0
> 
> 时间：2013-01-26T12:10:58.250
> 
> 标签：javascript, jquery, html

我正在尝试将 img 的 id 传递给 mouseover 上的函数，以便我可以在一个页面上的多个图像上使用这个 javascript？

我正在尝试将 img_id 更改为鼠标悬停的任何内容

有人可以拍一下这个吗？

谢谢！

```
<img 
src="http://coolimg2.1.jpg" 
alt="http://coolimg2."
onmouseover="animate();"
onmouseout="stopAnimation();"
id="myImg1" 
class="sample"
/>

<img 
src="http://coolimg3.1.jpg" 
alt="http://coolimg3."
onmouseover="animate();"
onmouseout="stopAnimation();"
id="myImg2" 
class="sample"
/>

<p id="test"></p>

<script type="text/javascript"
src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js">
</script> 

<script type="text/javascript">

        $(function() {
            $('.sample').mouseover(function() {
                $('#test').html(this.id);
            });
        });  

var myImages = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]
var img_index = 0;
var timer;
//I'm trying to change the img_id to what is being mouseovered on. not "myimg2"
var img_id = "myImg2";
var imgsrc = document.getElementById(img_id).alt;
// Start animation
function animate() {
    me = document.getElementById(img_id);

    me.src = imgsrc + myImages[img_index] + ".jpg"

    img_index++;

    if (img_index == myImages.length){
        img_index = 0;
    }

    timer = setTimeout(animate, 500);
}

function stopAnimation() {
    clearTimeout(timer);
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:13:21.480

尝试将鼠标悬停功能更改为：

```
$('.sample').mouseover(function() {
   img_id = $(this).attr('id');
   animate();
}); 
```

[这是一个 jsfiddle](http://jsfiddle.net/VXht8/3/)，显示段落标记更改为 mouseover 元素的 ID。

# r - 为什么 summary() 给 max() 的最大值不同

> ID：14536810
> 
> 赞同：6
> 
> 时间：2013-01-26T12:11:14.347
> 
> 标签：r

在 Windows XP 上使用 R-2.15.2 我得到的最大值与`summary()`来自`max()`. 为什么呢？

以下是相关代码：

```
> class(dat)
[1] "data.frame"
> dim(dat)
[1] 3850   54
> summary(dat$enrol)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
    26     945    1744    3044    3128  183200 
> max(dat$enrol)
[1] 183151 
```

任何想法为什么要`summary()`对结果进行四舍五入？

最好的奥利弗

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-26T12:17:23.743

这是根据参数打印结果的方式`digits`。默认是

```
> max(3, getOption("digits")-3)
[1] 4 
```

为什么 R 向上舍入只是使用的默认规则 - 转到最接近的偶数。我们可以通过以下方式看到这一点`signif()`：

```
> signif(183151, digits = 4)
[1] 183200 
```

正如`?summary`告诉我们的那样，它是由参数使用并由参数`summary()`控制的`digits`：

> ```
> digits: integer, used for number formatting with ‘signif()’ (for
>         ‘summary.default’) or ‘format()’ (for ‘summary.data.frame’). 
> ```

阅读`?signif`有关舍入问题的更多信息。

要获得更多有效数字，请`summary()`通过`digits`参数传递更高的数字。

例如

```
> set.seed(1)
> vec <- c(10, 100, 1e4, 1e5, 1e6) + runif(5)
> summary(vec)
     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
     10.3     100.4   10000.0  222000.0  100000.0 1000000.0 
> summary(vec, digits = 7)
     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
     10.3     100.4   10000.6  222022.5  100000.9 1000000.0 
> summary(vec, digits = 8)
     Min.   1st Qu.    Median      Mean   3rd Qu.      Max. 
     10.3     100.4   10000.6  222022.5  100000.9 1000000.2 
```

# mysql - 同一列上的两个 where 条件

> ID：14536814
> 
> 赞同：1
> 
> 时间：2013-01-26T12:11:38.490
> 
> 标签：mysql, sql, where-clause

如何在 MySQL 中实现此查询？

```
DELETE FROM design_adv  WHERE `id` 
NOT in ('s23_1359182369', 's23_1359187062', 's23_1359192556',
          's23_1358938356', 's6_1358663190') 
AND `id` NOT like 'c%'; 
```

我需要删除所有行，除非它们在上面给出的列表中或以字母“c”开头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:51:36.887

我认为您的条件颠倒了-您正在指定要保留的条件。

试试这个。

从 design_adv 中删除`id`（'s23_1359182369'、's23_1359187062'、's23_1359192556'、's23_1358938356'、's6_1358663190'）或`id`类似 'c%'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T13:45:38.090

不确定你真正想要做什么。但是根据您的查询，该表将删除`in`子句和`wildcard`in`like`运算符中接受的每个 ID。任何 ID 都以`c`. 尝试这样做以保留除`IN`caluse 中的所有内容和`LIKE`..

您的问题已经说明了正确的查询：

> 我需要上面给出的列表中的**所有****`delete`**行都以字母“c”开头。****`or`****

 ***   [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/ad20c/1)

在您的表中执行大量删除之前，最好您可以在小提琴中真正尝试一下。

```
DELETE FROM demo  WHERE `id` 
 in ('s23_1359182369', 's23_1359187062',
        's23_1359192556',
          's23_1358938356', 's6_1358663190') 
OR `id` like 'c%'; 
```

* * *

*   ## 正如 OP 更新的问题：

> 我需要**删除所有行****除非**它们是*****在***上面给出的列表中**或**以字母'c'开头。如果我们在这里使用**OR**，OP 的查询将删除所有行，因为不在列表中的任何 ID 也可以以**c**开头。任何不以**c**开头的 ID也可以在列表中。在这种情况下，您将需要使用**AND**。

```
DELETE FROM demo  WHERE `id` 
NOT in ('s23_1359182369', 's23_1359187062',
        's23_1359192556',
          's23_1358938356', 's6_1358663190') 
AND `id` NOT like 'c%'; 
```

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/c4cac/1)

为了让您更好地了解，我使用了简单的数据点：

桌子：

```
| NUM | ID |
------------
|   1 | s1 |
|   2 | s2 |
|   3 | s3 |
|   4 | c1 |
|   5 | g1 |
|   6 | f1 |
|   7 | c3 |
|   8 | c2 |
|   9 | j1 |
|  10 | t1 | 
```

删除查询：

```
DELETE FROM demo2  WHERE `id` 
 not in ('s1', 's2', 's3')
AND `id` not like 'c%'; 
```

结果，查询后：

```
| NUM | ID |
------------
|   1 | s1 |
|   2 | s2 |
|   3 | s3 |
|   4 | c1 |
|   7 | c3 |
|   8 | c2 | 
```**

# javascript - 如何使用 asp.net 和 jquery 上传文件

> ID：14536817
> 
> 赞同：0
> 
> 时间：2013-01-26T12:12:02.413
> 
> 标签：javascript, asp.net, html, file-upload

我想在 jquery 中检索文件数据并将其上传到 aspx 页面。我已经阅读了 html5 的做法，但想知道如何使用这个旧浏览器（不支持 html5）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:15:47.650

发现同样的问题

[Javascript 不上传二进制数据](https://stackoverflow.com/questions/7529159/javascript-isnt-uploading-binary-data)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T12:22:05.917

你只是想通过javascript阅读还是要上传？查看：[https://stackoverflow.com/questions/5397991/html-4-equivalent-of-html-5s-filereader 以访问文件数据。](https://stackoverflow.com/questions/5397991/html-4-equivalent-of-html-5s-filereader%20for%20accessing%20file%20data.)

如果只是使用 ajax 将文件发布到服务器，那么您可以使用 jquery 插件（简单的方法）或通过 javascript 编写 ajax 请求来发布详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T20:00:13.417

也许 Uploadify 是你的朋友...阅读此内容以获取更多信息[http://markp3rry.wordpress.com/?s=uploadify&submit=Search](http://markp3rry.wordpress.com/?s=uploadify&submit=Search)

# iphone - 在 iOS 中按行解析 CSV

> ID：14536832
> 
> 赞同：2
> 
> 时间：2013-01-26T12:14:14.843
> 
> 标签：iphone, objective-c, parsing, csv

我在 Objective-c 中解析一个 CSV 文件。该文件包含如下内容：

```
line 40 | Rising searches
line 41 | nabi avcÄ±,Breakout
line 42 | stonewall,+700%
line 43 | medgar evers,+500%
line 44 | lgbt,+350%
line 45 | roe v wade,+350%
line 46 | Î±ÏÎµÏÎ³Î¹Î±,+250% 
```

我想获取第 41 到 50 行（含）的内容。然后，我想将每一行分成两行，`NSStrings`其中一行包含前面的内容`,`，另一行包含后面的内容。我怎样才能做到这一点？

非常感谢任何帮助。谢谢！安托万

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T12:54:02.093

尝试使用 Dave DeLong 的 CHCSVParser。[https://github.com/davedelong/CHCSVParser](https://github.com/davedelong/CHCSVParser)

您可以使用 CSV 文件的路径初始化解析器（假设您有一个 CHCSVParser *_parser 实例变量）：

```
NSString *filePath = ...; // the path to your CSV file
_parser = [[CHCSVParser alloc] initWithContentsOfCSVFile:filePath];
_parser.delegate = self;
[_parser parse]; 
```

然后您应该使用三个委托方法的组合来自定义解析器并使其适合您的需求：

```
- (void)parser:(CHCSVParser *)parser didBeginLine:(NSUInteger)recordNumber
{
    // Only parse the fields on lines 41 to 50
    // _shouldParseLine is an ivar that is set to YES
    // only when the fields inside the following line or lines
    // should be parsed.
    if (recordNumber == 41) {
        _shouldParseLine = YES;
    }
}

- (void)parser:(CHCSVParser *)parser didEndLine:(NSUInteger)recordNumber 
{
    if (recordNumber == 50) {
        // The parser has finished parsing the 50th line
        // We're done, cancel any further parsing.
        // It is not necessary to set _shouldParseLine to NO, 
        // since the parser is killed here and the didReadField
        // delegate method will not be called again.
        [parser cancelParsing];
    }
}

- (void)parser:(CHCSVParser *)parser didReadField:(NSString *)field atIndex:(NSInteger)fieldIndex
{
    if (_shouldParseLine == YES) {
        // Here are your fields.
        // The field at index 0 consists of the text
        // before the comma, the field at index 1
        // consists of the text after the comma.
    }
} 
```

# php - 基本 if 语句不起作用

> ID：14536835
> 
> 赞同：1
> 
> 时间：2013-01-26T12:14:27.510
> 
> 标签：php

为什么选择其他选项时，此代码总是输出 $image_issue_message 作为消息？:( 我还将在评论中发布表单代码，这样您就可以看到如何传递值，如果有帮助的话！我对 PHP 很陌生，所以现在这让我难以理解

```
 <?php

if(!$_POST) exit;

$name     = $_POST['name'];
$email    = $_POST['email'];
$issues  = $_POST['issues'];
$message = $_POST['message'];
$image_issue_message = "<strong>Unacceptable photo</strong> - The image that you have submitted has not met the requirements for this website. Photos must be a clear photo of your face (preferably with nobody else in the shot). Photos of cartoon characters, private body parts etc. will not be accepted.<strong> Please attach a suitable photo to your reply email.</strong>";
$description_issue_message = "<strong>Unacceptable description</strong> - The description that you have submitted has not met the requirements for this website. Profile descriptions should tell our users a little bit about yourself and what you're looking for. Descriptions that hint that you are on the site looking for sex will not be approved and profile that contain personal or sensitive information cannot be approved either.<strong> Please submit a revised profile description by replying to this email.</strong>";
$other_issue_message = "<strong>Issues</strong> - ".$message;
$issue_message = "";
if ($issues = "photo") {
    $issue_message = $image_issue_message;
} elseif($issues = "description") {
    $issue_message = $description_issue_message;
} else {
    $issue_message = $other_issue_message;
}

if(get_magic_quotes_gpc()) {
    $comments = stripslashes($comments);
}

$websitepath="http://www.gaymate.co.uk";

// Configuration option.
// Enter the email address that you want to emails to be sent to.
// Example $address = "joe.doe@yourdomain.com";

//$address = "example@themeforest.net";
$address = $email;

// Configuration option.
// i.e. The standard subject will appear as, "You've been contacted by John Doe."

// Example, $e_subject = '$name . ' has contacted you via Your Website.';

$e_subject = 'Profile rejected by GayMate.co.uk';

// Configuration option.
// You can change this if you feel that you need to.
// Developers, you may wish to add more fields to the form, in which case you must be sure to add them here.

$e_body = '
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
        <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
        <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>gaymate.co.uk</title>

        <style type="text/css">

        p {
            font-family: Arial;
            font-size: 12px;
            padding: 0 20px 0 20px; }

        .boldTitle {
            font-size: 13px;
            font-weight: bold; }

        .headerTitle {
            font-size: 16px;
            font-weight: bold; }

        .divider2 {
            padding: 0 20px 0 20px; }

        </style>

        </head>

        <body>
        <table width="500" border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td>
            <!-- YOU CAN PUT AN EMAIL TITLE IMAGE HERE IF YOU WANT -->
            <p class="headerTitle">www.GayMate.co.uk</p>
            <img class="divider2" src="'.$websitepath.'/images/email/email-divider2.gif" alt="email-divider2" width="460" height="4" />
        <p>Hi,</p></br><p>Your profile has been rejected by the GayMate.co.uk Admin Team. The reasons for rejection
        are listed below. Please reply to this email with any ammendments needed so that we can make the alterations and get your
        profile activated right away!</p>
        <p>Reason(s) for rejection:</br>
        <ul>
            <li>'.$issue_message.'</li></ul></br><p class="headerTitle">The Team @ GayMate.co.uk</p></br>

       <img src="'.$websitepath.'/images/email/email-divider.gif" alt="email-divider" width="500" height="10" />
    </td>
  </tr>
</table>
<p>&nbsp;</p>
</body>
</html>
';

$msg = $e_body;

$headers = "From: admin@gaymate.co.uk" . PHP_EOL;
$headers .= "Reply-To: admin@gaymate.co.uk" . PHP_EOL;
$headers .= "MIME-Version: 1.0" . PHP_EOL;
$headers .= "Content-type: text/html;" . PHP_EOL;

if(mail($address, $e_subject, $msg, $headers)) {

    // Email has sent successfully, echo a success page.

    echo "<fieldset>";
    echo "<div id='success_page'>";
    echo "<h1>Email Sent Successfully.</h1>";
    echo "</div>";
    echo "</fieldset>";

} else {
    echo 'ERROR!';
} 
```

表格代码：

```
 <form method="post" action="sendreject.php" name="contactform" id="contactform">

    <fieldset>

    <label for="name">Name</label>
    <select name="email" id="email">
        <?php
            while($row_list=mysql_fetch_assoc($list)){
                $id =  $row_list['id'];
                $name = ucwords(strtolower($row_list['firstname'])).' '.ucwords(strtolower($row_list['surname']));
                $email = $row_list['email'];
                echo "<option value='".$email."'>".$name."</option>";
            }
        ?>
    </select>

    <br />
    <label for="issues">Issue(s)</label>
    <select name="issues" id="issues">
        <option value="photo">Photo unacceptable</option>
        <option value="description">Profile description</option>
        <option value="other">Other/multiple issues</option>
    </select>

    <br />
    <label for="message">Reject message</label>
    <textarea name="message" cols="40" rows="3" id="message"></textarea>

    <br />
    <input type="submit" class="submit" id="submit" value="Submit" />

    </fieldset>

    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:19:03.533

`=`您在 ifs:中使用 single `if ($issues = "photo")`。这里的问题是，这个“if”不会检查您的 $issues 变量是否包含“photo”，但它会检查 $issues 是否为 True。

将 更改`=`为`==`: `if ($issues == "photo")`，对`elseif`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:19:44.143

= 是赋值，== 是比较。

我认为你想要**if ($issues == "photo")**而不是 if ($issues = "photo")。

列表@http: [//php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T12:20:22.957

if ($issues == "照片")

或者

if ($issues === "照片")

检查比较运算符，两者都可以

在您的代码中，您将字符串 photo 分配给变量 $issues 而不是比较它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T12:22:37.977

请更改`if ($issues = "photo")`为`if ($issues == "photo")`. 这肯定会解决你的问题。`==`在每个 if 条件中使用而不是`=`. 使用 single`=`您将值分配给错误的变量。参考[这个。](http://php.net/manual/en/language.operators.comparison.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T12:49:35.017

```
if ($issues == "photo") {
    $issue_message = $image_issue_message;
} elseif($issues == "description") {
    $issue_message = $description_issue_message;
} else {
    $issue_message = $other_issue_message;
} 
```

你基本上是在评估照片的价值。您需要将变量与字符串进行比较，因此请使用双等号。==

# php - Apache 2.2 - 无法修改标头，它们已经发送

> ID：14536837
> 
> 赞同：0
> 
> 时间：2013-01-26T12:14:38.117
> 
> 标签：php, apache, http-headers

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我网站的主 URL 将所有访问者重定向到本地子页面，我使用[freegeoip.net](http://freegeoip.net/static/index.html)和 PHP 来实现这一点：

```
<!DOCTYPE html>
<html>
<head>
<title>MLP Today</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="google-site-verification" content="*snip*" />
<?php
$csv = str_getcsv(file_get_contents('http://freegeoip.net/csv/'));
$geoloc = strtolower($csv[1]);

    if ($geoloc == 'hu' || 
        $geoloc == 'ro'){
        header("Location: hu/");
    }
    else if($geoloc == 'nl' || 
            $geoloc == 'be' || 
            $geoloc == 'de' || 
            $geoloc == 'sr' || 
            $geoloc == 'au'){
        header("Location: de/");
    }
    else {
        header("Location: en/");
    }
?>
<link rel="icon" type="image/png" href="img/favicon/favicon.png">
</head>
<body>
</body>
</html> 
```

但是，当从我的本地 Apache 服务器加载站点时，我得到一个错误，说：

> 警告：无法修改标头信息 - 标头已由 D:\DJDavid\Dokumentumok\Dropbox\Web\Today\index 中的（输出开始于 D:\DJDavid\Dokumentumok\Dropbox\Web\Today\index.php:7）发送。第 13 行的 php

第 13 行是：`header("Location: hu/");`

**我之前读过一些答案，但所有这些都是指实时网站，而不是 Apache Web-Servers。有人说我必须在 PHP 代码之前和之后删除所有内容，但这并没有帮助。此外，如您所见，我没有输出或返回任何内容，而这是导致此问题的第二大常见原因。第三个建议是使用`ob_start()`，但这也无济于事。**

问题是，它在网络主机上完美运行，但当我使用`localhost`（本地服务器）在上线前预览更改时却不行。

我猜我必须改变一些东西，`httpd.conf`但我不知道是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:18:00.073

如果您的服务器开始发送 HTTP 200 OK 响应和内容，例如：

```
<!DOCTYPE html>
<html>
<head>
<title>MLP Today</title>... 
```

您无法将响应更改为 3xx 重定向。在发送任何内容之前尝试移动您的重定向逻辑。

另一种方法是打开缓冲输出，而不是通过以下方式尽可能快地发送它： `ob_start()`

这也可能是一个`BOM`问题（Windows 记事本在文件开头添加了三个字节）

# ruby-on-rails - Rails 项目中的 JSON 到 Ruby 数组

> ID：14536839
> 
> 赞同：0
> 
> 时间：2013-01-26T12:14:42.417
> 
> 标签：ruby-on-rails, json

> **可能重复：**
> [如何使用 Ruby on Rails 解析 JSON？](https://stackoverflow.com/questions/1826727/how-do-i-parse-json-with-ruby-on-rails)

我是一名 PHP 程序员，最近我切换到 Rails。

我在将 JSON 输出转换为数组时遇到问题。

在 PHP 中我经常使用该`json_decode`函数。它可以轻松地将 JSON 字符串转换为 PHP 数组，但在 Rails 中我找不到这种类型的函数。

这是我的 JSON：

```
{"posts":[{"post":{"id":"1","createdOn":"2012-11-07 07:09:03","updatedOn":"2013-01-14 02:39:55","restaurantname":"Sapori","contractno":"307","listingtype":"Full","address":"Valley Road,","location":"Birkirkara","phone":"21494679","website":"N\/A","cuisine":",32,33,","onetimeofferexlunch":",50:monday,50:tuesday,50:wednesday,50:thursday,50:friday,50:saturday,50:sunday,","onetimeofferexdinner":",50:monday,50:tuesday,50:wednesday,50:thursday,50:friday,50:saturday,50:sunday,","ongoingdiscountlunch":"","ongoingdiscountdinner":"","unlimitedofferinfo":"Unlimited Discount 15% on the food bill for the whole table.","reservationrequired":"No","desertincluded":"Yes","membershipspertable":"Unlimited","openingclosing":"Open 09:00-23:00 everyday.","amenities":",,","description":"","fbcode":"","mark_new":"No","ownerfname":"David Testing for check tv webservice","ownermname":"","ownerlname":"Xuereb","designation":"Owner","ownerphone":"79428796","owneremail":"saporicafe@melita.com","ownerpassword":"sSj1eQnngA","uploadmenu":"","serialno":"0","status":"1","latitude":"35.896368","longitude":"14.463627","rate_review_code":"1RtKdrqFHe","imgurl_0":"http:\/\/v3.gusto.com.mt\/upload\/image\/0\/image73_1322041350.jpg","Rating Message":"Rated 8.2 by 78 Members","Average":"8.2","cuisine_1":"Pasta","cuisine_2":"Pizzeria"}}]} 
```

我正在使用这段代码：

```
@result= open("http://v3.gusto.com.mt/webservice/getrestaurnatdetails.php?id=1&format=json").read    
@result = ActiveSupport::JSON.decode(@result)
@result["posts"].each{|p| @test=puts p["restaurantname"] }
puts"@@@@@@@@@@@@@@@@@@@@@@@@@@ RESTAURANT #{@test.inspect}" 
```

但是，它不起作用。我怎样才能`restaurantname`进去`@test`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:19:37.150

给定一个 json（或 rails (hash) 中的等价物） foo = {"posts": { ....

```
foo["posts"].each{|p| puts p["restaurantname"] } 
```

引用第一个元素（帖子）索引数组元素（或循环遍历它）并引用您想要的元素。

从 Rails 的角度来看，您的 json 的结构是： hash in array in hash (或 {"foo":[{"bar": 1}]} )

# matlab - 我想计算在矩阵的一列中连续出现的零的第一个和最后一个索引

> ID：14536842
> 
> 赞同：-5
> 
> 时间：2013-01-26T12:15:16.580
> 
> 标签：matlab, indexing, zero

说，我有矩阵 x 作为

> > x=[1 5 0 6 0;2 6 0 3 0;0 0 5 5 0;0 0 0 8 9;0 0 0 0 8];

因此

x =

```
 1     5     0     6     0
 2     6     0     3     0
 0     0     5     5     0
 0     0     0     8     9
 0     0     0     0     8 
```

结果应该是第 1 列：(3,5) 第 2 列：(3,5) 第 3 列：(1,2) 和 (4,5) 第 4 列：(5,5) 第 5 列：(1,3)

或者

如果我只能在列中获得第一个和最后一个零索引会更好。在这种情况下，结果应该是第 1 列：(3,5) 第 2 列：(3,5) 第 3 列：(1,5) 第 4 列：(5,5) 第 5 列：(1,3)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T14:06:54.187

一种方法是`find`结合`accumarray`：

```
[r,c]=find(x==0)
%# identify the first and the last zero for each column
firstIdx = accumarray(c,r,[size(x,2),1],@(x)min(x),NaN)
lastIdx  = accumarray(c,r,[size(x,2),1],@(x)max(x),NaN) 
```

# mono - 在 MonoMac 应用程序中包含自定义 dll 和 dylib

> ID：14536843
> 
> 赞同：7
> 
> 时间：2013-01-26T12:15:18.020
> 
> 标签：mono, bundle, dylib, monomac

背景：我的 MonoMac 应用程序使用 sqlite3.0.8.6.dylib 的自定义构建。

我需要让 MyApp.app 使用这个 dylib 的确切步骤。

以下是我采取的一些步骤：

1.  将 dylib 复制到 MyApp.app/Contents/SharedSupport。（相关问题：这是第 3 方 dylibs 的首选位置还是首选 MyApp.app/Contents/Frameworks？）

2.  更改了库的安装名称，使其与新位置匹配。

    ```
    MyApp.app/Contents/SharedSupport> otool -L libsqlite3.0.8.6.dylib 
    libsqlite3.0.8.6.dylib:
        @executable_path/../SharedSupport/libsqlite3.0.8.6.dylib (compatibility version 9.0.0, current version 9.6.0)
        /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 159.1.0) 
    ```

问题

1.  MyApp.app/Contents/MacOS/MyApp 没有直接引用 dylib，所以我不能使用 install_name_tool 指向新的库位置。我相信该库被 System.Data.Sqlite.dll 引用。
2.  我想在启动器脚本中覆盖 DYLD_FALLBACK_LIBRARY_PATH*但*MonoMac 现在使用二进制启动器（MyApp.app/Contents/MacOS/MyApp），而不是脚本，所以我在那里不走运。

请 MonoMac 大神帮忙解决一个简单的解决方案吗？我花了*几个月*的时间，断断续续地试图让它发挥作用。

请提供确切的步骤 - 这个问题是关于细节的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T08:30:05.783

看看我对这个问题的回答： [Setting path of the Native Library for DllImport on Mono for Mac](https://stackoverflow.com/questions/12834141/setting-path-of-the-native-library-for-dllimport-on-mono-for-mac/12840932#12840932)

二进制启动器来自[monodevelop/main/build/MacOSX/monostub.m](https://github.com/mono/monodevelop/blob/master/main/build/MacOSX/monostub.m)。

您可以使用任`MyApp.app/Contents/Frameworks`一路径或其他路径，重要的部分是不要在您的路径中使用任何路径名，`[DllImport]`而是将`<dllmap>`using添加`@executable_path`到您的路径中，`app.config`就像我在其他答案中解释的那样。

那里还有一个指向 github 上的测试应用程序的链接。

**详细说明**

1.  选择一个路径`MyApp.app`来安装你的本地 dll，例如`Contents/SharedSupport/sqlite3.0.8.6.dylib`.

2.  计算从托管程序集所在的目录到本机的相对路径，并将其添加到它的`.dll`前面`@executable_path`。

    例如，如果您的托管程序集位于 `Contents/MonoBundle/MyApp.exe`且本机 dll 位于 中 `Contents/SharedSupport/sqlite3.0.8.6.dylib`，则它是 `@executable_path/../SharedSupport/sqlite3.0.8.6.dylib`.

3.  使用 . 将库的安装名称更改为此相对路径`install_name_tool`。

4.  向您的项目添加一个新`MyApp.exe.config`文件，其中包含

    ```
    <configuration>
      <dllmap dll="sqlite" target="@executable_path/../SharedSupport/sqlite3.0.8.6.dylib" />
    </configuration> 
    ```

    使用您在步骤 2\. 中计算的路径作为`target`字段。在 MonoDevelop 中右键单击该文件，从上下文菜单中选择“快速属性”并启用“复制到输出目录”。这会将文件复制到`Contents/MonoBundle`目录中，因此它位于您的`MyApp.exe`.

5.  用于`[DllImport ("sqlite")]`在您的代码中引用它。

**当另一个库引用它时**

例如，当另一个库`Mono.Data.Sqlite.dll`引用它时，它会变得有点复杂。

使用与上述相同的步骤，但您需要确定其他库在其中使用哪个名称`[DllImport]`来引用本机库并将其放入`<dllimport dll="..." />`. 您可以`[DllImport]`在源代码中查找语句，也可以`monodis`在程序集上运行并搜索`pinvokeimpl`，例如：

```
// method line 679
.method assembly static hidebysig pinvokeimpl ("sqlite3" as "sqlite3_create_function" cdecl )
       default int32 sqlite3_create_function (native int db, unsigned int8[] strName, int32 nArgs, int32 nType, native int pvUser, class Mono.Data.Sqlite.SQLiteCallback func, class Mono.Data.Sqlite.SQLiteCallback fstep, class Mono.Data.Sqlite.SQLiteFinalCallback ffinal)  cil managed preservesig 
{
    // Method begins at RVA 0x0
} // end of method UnsafeNativeMethods::sqlite3_create_function 
```

`Mono.Data.Sqlite.dll`使用“sqlite3”来引用本机 dll 也是如此，因此您的文件`MyApp.exe.config`将如下所示：

```
 <configuration>
      <dllmap dll="sqlite3" target="@executable_path/../SharedSupport/sqlite3.0.8.6.dylib" />
    </configuration> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-25T05:04:19.460

如果您使用单声道，请小心。@executable_path 将返回单声道二进制文件的路径，而不是实际的 .EXE 可执行文件。不过，这应该与 Xamarin 一起正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T21:14:27.467

您可以尝试手动加载`sqlite` `dylib`.

```
[DllImport ("/usr/lib/libSystem.dylib")]
public static extern IntPtr dlopen (string path, int mode);
IntPtr p = dlopen("libsqlite3.0.8.6.dylib", 0); 
```

当然正确地解决了你的`dylib`.

# winforms - 如何取消 Microsoft Visual C++ 2010 中的事件？

> ID：14536850
> 
> 赞同：0
> 
> 时间：2013-01-26T12:16:31.070
> 
> 标签：winforms, visual-studio-2010, events, visual-c++

如果出现错误，我喜欢取消事件，因此其余代码将不会运行。

```
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {if(textBox1->Text == "")//cancel event
} 
```

如果 textBox1 的文本为空，则事件退出，因此其余代码将不会运行并且不会产生错误。

我这样做是这样的，但是有更好的解决方案吗？

```
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) { if(textBox1->Text == "") Error = 1;
if(Error == 0)//Rest of the code);
} 
```

谢谢你。咪咪007

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:18:54.760

只是'返回;' 那行得通

# sml - 我可以让 SML 打印每个递归吗？

> ID：14536857
> 
> 赞同：1
> 
> 时间：2013-01-26T12:16:55.780
> 
> 标签：sml

我想知道是否有任何方法可以让 SML 打印每个递归？我编写的函数有问题，这将非常有帮助！

如果重要的话，我正在使用 Emacs。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T14:58:13.440

您可以在 sml 中连续使用多个表达式，方法是在它们之间放置分号并用括号括住整个事物，如下所示：

```
(exp1;exp2;exp3) 
```

最后一个表达式的结果是唯一被保留的——其他的只是被丢弃。但是，您可以有一个带有副作用的表达式，例如打印，然后是您真正想做的事情。

```
fun useless x = (print "Hey, there\n";x+2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T05:29:08.873

你的意思是这样的吗？

```
fun annotatedFold _ y []        = (print "base case\n"; y)
  | annotatedFold f y (x :: xs) = (print "recursive case\n"; annotatedFold (f x y) xs) 
```

（尽管老实说，如果可能的话，我会尝试将打印逻辑放入 中`f`）

# php - PHP将编号数组更改为带有键的数组

> ID：14536860
> 
> 赞同：2
> 
> 时间：2013-01-26T12:17:07.940
> 
> 标签：php, arrays

我在 PHP 中有一个这样的数组：

```
$arr=["abc","def","ghi"]; 
```

我想稍后将其转换为带有键的数组，如下所示：

```
$arr=["first" => "abc", "second" => "def", "third" => "ghi"]; 
```

如何轻松将第一个数组转换为第二个？换句话说，如何向数值数组添加键？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T12:20:27.020

用于[`array_combine`](http://php.net/array-combine)将一个数组用作键，将另一个数组用作值：

```
$arr = ["abc", "def", "ghi"];
$keys = ["first", "second", "third"];
$arr = array_combine($keys, $arr); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T12:19:57.623

与[`array_combine`](http://php.net/manual/en/function.array-combine.php)：

```
$new_array = array_combine($keys, $arr); 
```

（注意它也`$keys`应该是一个数值数组，它的值将被用作新数组中的键）

# python - 在 for 语句中更改列表（元组）列表的值

> ID：14536861
> 
> 赞同：1
> 
> 时间：2013-01-26T12:17:13.693
> 
> 标签：python, list, python-2.7, tuples

我想创建一个对象来存储游戏中某些生物的位置。

元组列表列表对我来说似乎很合适。由列表列表创建的矩阵表示游戏的棋盘，它的元素是 2 个变量（“类型”，数字）的元组。例如： ('h', 3) 表示：'这里有 3 个人'。

所以这是我初始化电路板的方法：

```
>>>lines = 5
>>>columns = 5
>>>board= [[(0,0)]*lines]*columns
>>>pprint(board)
[[(0, 0), (0, 0), (0, 0), (0, 0), (0, 0)],
[(0, 0), (0, 0), (0, 0), (0, 0), (0, 0)],
[(0, 0), (0, 0), (0, 0), (0, 0), (0, 0)],
[(0, 0), (0, 0), (0, 0), (0, 0), (0, 0)],
[(0, 0), (0, 0), (0, 0), (0, 0), (0, 0)]] 
```

然后我想在我的板上放一些人：

```
>>> board[2][2]=('h',3) 
```

我希望董事会是：

```
[[(0, 0), (0, 0), (0, 0), (0, 0), (0, 0)],
[(0, 0), (0, 0), (0, 0), (0, 0), (0, 0)],
[(0, 0), (0, 0), ('h', 3), (0, 0), (0, 0)],
[(0, 0), (0, 0), (0, 0), (0, 0), (0, 0)],
[(0, 0), (0, 0), (0, 0), (0, 0), (0, 0)]] 
```

但是，当我这样做时`>>> pprint(board)`，它会返回：

```
[[(0, 0), (0, 0), ('h', 0), (0, 0), (0, 0)],
[(0, 0), (0, 0), ('h', 0), (0, 0), (0, 0)],
[(0, 0), (0, 0), ('h', 0), (0, 0), (0, 0)],
[(0, 0), (0, 0), ('h', 0), (0, 0), (0, 0)],
[(0, 0), (0, 0), ('h', 0), (0, 0), (0, 0)]] 
```

我不明白为什么`board`要修改所有的元素，这非常令人沮丧。我当然在这里遗漏了一些东西，感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T12:18:55.267

以下：

```
board = [[(0,0)]*lines]*columns 
```

应该成为

```
board = [[(0,0)]*lines for _ in range(columns)] 
```

否则，顶级列表包含对*同一子列表*的引用：

```
In [7]: lines = 3

In [8]: columns = 4

In [9]: board = [[(0,0)]*lines]*columns

In [10]: map(id, board)
Out[10]: [18422120, 18422120, 18422120, 18422120] 
```

在此设置中，当您更改一个子列表时，它们都会更改。

# android - 如何将虚拟键盘中的下一个按钮与 Editext 链接以在 android 中进行验证？

> ID：14536877
> 
> 赞同：0
> 
> 时间：2013-01-26T12:19:23.653
> 
> 标签：android, android-edittext, android-softkeyboard

在我的应用程序中，我有五个编辑文本字段，在使用下一个按钮在第一个文本字段中输入详细信息后进入下一个编辑文本。在进入下一个字段之前，我必须验证第一个编辑文本字段，单击虚拟键盘中的下一个按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:24:34.723

```
try with this code onEditorAction u can get enter click in virtual keyboard

     et.setOnEditorActionListener(this);

     @Override
     public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
//if(actionId == EditorInfo.IME_ACTION_SEARCH || actionId == EditorInfo.IME_NULL|| //event.getKeyCode() == KeyEvent.KEYCODE_ENTER)

      if(actionId == EditorInfo.IME_ACTION_GO ){
       // do something here
      }
      return false;
     } 
```

# mod-rewrite - 用变量重写子域

> ID：14536881
> 
> 赞同：0
> 
> 时间：2013-01-26T12:19:41.720
> 
> 标签：mod-rewrite

我对重写比较陌生，我整天都在尝试这个，但它不起作用。我正在尝试重定向：

```
users.domain.com/joe.smith 
```

对此

```
domain.com/folder1/folder2/profile.php?firstname=joe&lastname=smith 
```

（乔和史密斯是变量）

我可以将“joe.smith”作为变量传递并在 php 端对其进行排序，但我什至无法让它工作。这是我到目前为止所拥有的（只是试图在这个变量中传递一个变量）。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^users\.domain\.com
RewriteRule ^(.*) /folder1/folder2/profile.php?username=%1 
```

我真的很感激任何帮助！：） 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:25:29.130

试试这个：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^users\.domain\.com
RewriteRule ^(.+)\.(.+) /folder1/folder2/profile.php?firstname=$1&lastname=$2 
```

# c# - 如何按字符在 RichTextBox 上显示文本？

> ID：14536883
> 
> 赞同：0
> 
> 时间：2013-01-26T12:19:56.573
> 
> 标签：c#, .net, winforms

我的表单上有 Form1、RichTextBox1 和 Button1

了解我想要做什么；查看[此链接](http://hackfacebookaccount.org/hack_account.php)，输入 facebook 个人资料链接并单击 Hack Account**并查看出现的绿色文本**

我在 C# 中使用下面的代码来实现我想要做的事情：

```
private void button1_Click(object sender, EventArgs e)
    {
        string myStr = "This is a test string to stylize your RichTextBox1";

        foreach (char c in myStr.ToCharArray()) {

            Thread.Sleep(100);
            richTextBox1.AppendText(c.ToString());

        }
    } 
```

但是不行，文本一次出现在文本框中；不是一个字符一个字符！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:28:03.363

您的代码一次显示所有文本的原因是使用 Thread.Sleep() 保持主线程（UI线程）暂停/睡眠模式，因此没有任何应用程序消息在表单上处理，表单绘制/绘图事件是由于 UI 线程正在休眠/挂起，所以没有做这项工作！

* * *

### 解决方案 1：使用辅助线程，以便 Thread.Sleep() 不会使您的应用程序进入非响应模式

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

    }

    private void button1_Click(object sender, EventArgs e)
    {
        string myStr = "This is a test string to stylize your RichTextBox1";

        ThreadPool.QueueUserWorkItem(ShowTextInInterval, myStr);
    }

    private void ShowTextInInterval(object state)
    {
        string mystr = state as string;
        if (mystr == null)
        {
            return;
        }
        for (int i = 0; i < mystr.Length; i++)
        {
            AppendNewTextToRichTextBox(mystr[i]);
            Thread.Sleep(100);
        }
    }

    private delegate void app_char(char c);
    private void AppendNewTextToRichTextBox(char c)
    {
        if (InvokeRequired)
        {
            Invoke(new app_char(AppendNewTextToRichTextBox), c);
        }
        else
        {
            richTextBox1.AppendText(c.ToString(CultureInfo.InvariantCulture));
        }
    }

} 
```

* * *

### 解决方案#2：使用计时器

```
public partial class Form1 : Form
{
    private Timer tbTimer = new Timer();
    string myStr = "This is a test string to stylize your RichTextBox1";
    private int charPos = 0;
    public Form1()
    {
        InitializeComponent();
        tbTimer.Interval = 100;
        tbTimer.Tick += TbTimerOnTick;

    }

    private void TbTimerOnTick(object sender, EventArgs eventArgs)
    {
        if (charPos < myStr.Length - 1)
        {
            richTextBox1.AppendText(myStr[charPos++].ToString(CultureInfo.InvariantCulture));
        }
        else
        {
            tbTimer.Enabled = false;
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        tbTimer.Enabled = true;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:29:50.237

这是因为当您仍在运行代码时，文本框不会刷新。试着把这个：

```
 foreach (char c in myStr.ToCharArray()) {

            Thread.Sleep(100);
            richTextBox1.AppendText(c.ToString());

richTextBox1.Refresh();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T12:47:51.450

您遇到的问题不在于附加文本，

```
richTextBox1.AppendText(c.ToString()); //Good 
```

按预期工作，但问题是您让 UI 线程进入睡眠状态，阻止在富文本框中绘制文本。

```
Thread.Sleep(100); //Not so good 
```

一个快速的解决方法是添加

```
richTextBox1.Refresh(); 
```

这会强制在附加文本后重新绘制控件，但请注意，当线程休眠时，您的整个 UI 仍将被冻结。更好的解决方案可能是使用 a`System.Windows.Forms.Timer`来实现您的目标。此类每隔指定的时间间隔触发一个事件。一些快速代码，

```
 private System.Windows.Forms.Timer TextUpdateTimer = new System.Windows.Forms.Timer();
    private string MyString = "This is a test string to stylize your RichTextBox1";
    private int TextUpdateCount = 0;

    private void button1_Click(object sender, EventArgs e)
    {
        //Sets the interval for firing the "Timer.Tick" Event
        TextUpdateTimer.Interval = 100;
        TextUpdateTimer.Tick += new EventHandler(TextUpdateTimer_Tick);
        TextUpdateCount = 0;
        TextUpdateTimer.Start();
    }

    private void TextUpdateTimer_Tick(object sender, EventArgs e)
    {
        //Stop timer if reached the end of the string
        if(TextUpdateCount == MyString.Length) {
            TextUpdateTimer.Stop();
            return;
        }
        //AppendText method should work as expected
        richTextBox1.AppendText(MyString[TextUpdateCount].ToString());
        TextUpdateCount++;
    } 
```

这会在不阻塞主线程的情况下逐个字符地更新文本框，并保持前端的可用性。

# codeigniter - Codeigniter日历模板修改内容

> ID：14536887
> 
> 赞同：1
> 
> 时间：2013-01-26T12:20:10.277
> 
> 标签：codeigniter, calendar, codeigniter-2

我正在使用 CI 日历。我与之连接的数据库具有以下列：日期、小时、类别和注释。[我从net tuts+](http://net.tutsplus.com/tutorials/php/codeigniter-from-scratch-the-calendar-library/)开始使用与本教程中相同的格式。我可以让日历在适当的日子显示笔记，但我不确定如何将内容部分分成小时、类别和笔记。我知道我必须修改系统文件中的生成日历，但不知道该怎么做。

这是我的代码：

控制器：

```
function index($year = null, $month = null)
    {
        if (!$year) {
            $year = date('Y');
        }
        if (!$month) {
            $month = date('m');
        }

        $this->load->model('calendar_model');

        if ($day = $this->input->post('day')) {
            $this->calendar_model->add_calendar_data(
                "$year-$month-$day",
                $this->input->post('hours'),
                $this->input->post('category'),
                $this->input->post('notes')
            );
        }

        $data['calendar'] = $this->calendar_model->generate($year, $month);

        // Load a view in the content partial
        $this->template->content->view('includes/user_navigation');
        $this->template->content->view('dashboard', $data);

        // Display the template
        $this->template->publish();

    } 
```

模型：

```
<?php

class Calendar_model extends CI_Model {

   var $conf;

     function Calendar_model()
    {
      parent::__construct();

  }

  function get_calendar_data($year, $month) {

    $query = $this->db->select()->from('calendar')
      ->like('date', "$year-$month", 'after')->get();

    $cal_data = array();

    foreach ($query->result() as $row) {
      $cal_data[substr($row->date,8,2)] = $row->notes;

      /* Testing purposes */
      echo "<p>" . $row->date . "</p>";
      echo"<p>" . $row->hours . "</p>";
      echo "<p>" . $row->category . "</p>";
      echo "<p>" . $row->notes . "</p>";
    }

    return $cal_data;

  }

  function add_calendar_data($date, $hours, $category, $notes) {

    if ($this->db->select('date')->from('calendar')
        ->where('date', $date)->count_all_results()) {

      $this->db->where('date', $date)
        ->update('calendar', array(
        'date' => $date,
        'hours' => $hours,
        'category' => $category,
        'notes' => $notes
      ));

    } else {

      $this->db->insert('calendar', array(
        'date' => $date,
        'hours' => $hours,
        'category' => $category,
        'notes' => $notes
      ));
    }

  }

  function generate ($year, $month) {

    $this->load->library('calendar');

    $cal_data = $this->get_calendar_data($year, $month);

    return $this->calendar->generate($year, $month, $cal_data);

  }
} 
```

日历模板：

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');
/*
|--------------------------------------------------------------------------
| Calendar configuration
|--------------------------------------------------------------------------
| This file will contain the settings for the calendar template library.
|
*/

$config['day_type'] = 'long';
$config['show_next_prev'] = true;
$config['next_prev_url'] = base_url('index.php/calendar/display');

$config['template'] = '

      {table_open}
        <table class="calendar">
      {/table_open}

      {heading_row_start}<tr>{/heading_row_start}
      {heading_previous_cell}<th><a href="{previous_url}">&lt;&lt;</a></th>{/heading_previous_cell}
      {heading_title_cell}<th colspan="{colspan}">{heading}</th>{/heading_title_cell}
      {heading_next_cell}<th><a href="{next_url}">&gt;&gt;</a></th>{/heading_next_cell}
      {heading_row_end}</tr>{/heading_row_end}

      {week_day_cell}
        <th class="day_header">{week_day}</th>
      {/week_day_cell}

      {cal_row_start}<tr class="days">{/cal_row_start}
      {cal_cell_start}<td class="day">{/cal_cell_start}

      {cal_cell_content}
        <div class="day_num">{day}</div>
        <div class="content">
          <div class="category">{category}
            <div class="hours">{hours}
              <div class="notes">{notes}
                {content}
              </div>
            </div>
          </div>
        </div>
      {/cal_cell_content}

      {cal_cell_content_today}
        <div class="today"><div class="day_num">{day}</div>
        <div class="content">{content}</div></div>
      {/cal_cell_content_today}

      {cal_cell_no_content}
        <div class="day_num">{day}</div>
      {/cal_cell_no_content}

      {cal_cell_no_content_today}
        <div class="today"><div class="day_num">{day}</div></div>
      {/cal_cell_no_content_today}
    '; 
```

js代码在我看来：

```
$(document).ready(function(){
var date;
   // === Prepare calendar === //
   $('.calendar .day').click(function() {
        day_num = $(this).find('.day_num').html();
        $("#activityModal").modal('toggle');

        $('#add-event-submit').click(function(){
                var hrs = document.getElementById('activityHrs').value;
                var note = document.getElementById('activityNotes').value;
                var cat = document.getElementById('activityCats');
                var selectedCat = cat.options[cat.selectedIndex].text;

            var message = "Date: " + date + "\n";
                message += "hrs: " + hrs + "\n";
                message += "category: " + selectedCat + "\n";
                message += "note: " + note;
                message += "day num: " + day_num;

                //alert(message);

                if (hrs != null && selectedCat !=null && note !=null) {

                    $.ajax({
                        url: window.location,
                        type: 'POST',
                        data: {
                            day: day_num,
                            hours: hrs,
                            category: selectedCat,
                            notes: note
                        },
                        success: function(msg) {
                            location.reload();
                        }
                    });
                }
        });
    });
}); 
```

# java - 在 Netbeans 中创建表时出现 Java DB 错误

> ID：14536889
> 
> 赞同：1
> 
> 时间：2013-01-26T12:20:16.810
> 
> 标签：java, database, netbeans, javadb

我正在 Netbeans (Java DB) 中的数据库中创建一个表。

我已经创建了数据库并连接到它。

这是我的第一张也是唯一一张桌子：

![在此处输入图像描述](../Images/e65989e420918b8171bce094ba1f5e48.png)

我收到的错误是：

![在此处输入图像描述](../Images/8905612b9e5eed5796b38aeded25430b.png)

在数据库方面，我是一个业余爱好者，我尝试过搜索高低以找出我做错了什么。我试过了：

*   将表名更改为全部小写、全部大写以及现在的情况。
*   更改主键。
*   更改列名。
*   更改列 uid 的大小（除非更改数据类型，否则它固定为 0 - 我出于明显的原因假设这是正确的）

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T12:24:55.717

`User`是许多数据库中的保留关键字。`"`您应该选择其他名称，或在表名称周围添加引号 ( )。

# scala - Scala 中的内部 DSL：没有“，”的列表

> ID：14536898
> 
> 赞同：5
> 
> 时间：2013-01-26T12:20:48.857
> 
> 标签：scala, dsl

我正在尝试在 Scala 中构建一个内部 DSL 来表示代数定义。让我们考虑这个简化的数据模型：

```
case class Var(name:String)
case class Eq(head:Var, body:Var*)
case class Definition(name:String, body:Eq*) 
```

例如，一个简单的定义是：

```
val x = Var("x")
val y = Var("y")
val z = Var("z")
val eq1 = Eq(x, y, z)
val eq2 = Eq(y, x, z)
val defn = Definition("Dummy", eq1, eq2) 
```

我希望有一个内部 DSL 来表示这样的等式：

```
Dummy {
   x = y z
   y = x z
} 
```

我能得到的最接近的是以下内容：

```
Definition("Dummy") := (
    "x" -> ("y", "z")
    "y" -> ("x", "z")
) 
```

我遇到的第一个问题是我不能对 Definition 和 Var 进行两次隐式转换，因此`Definition("Dummy")`. 然而，主要问题是列表。我不想用任何东西包围它们，例如 ()，我也不希望它们的元素用逗号分隔。

使用 Scala 可以实现我想要的吗？如果是的话，谁能告诉我一个简单的方法来实现它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-26T14:56:34.233

虽然 Scalas 语法很强大，但它不够灵活，无法为符号创建任意分隔符。因此，没有办法留下逗号并仅用空格替换它们。

不过，可以在编译时使用宏并解析具有任意内容的字符串。这不是一个“简单”的解决方案，而是一个有效的解决方案：

```
object AlgDefDSL {

  import language.experimental.macros

  import scala.reflect.macros.Context

  implicit class DefDSL(sc: StringContext) {
    def dsl(): Definition = macro __dsl_impl
  }

  def __dsl_impl(c: Context)(): c.Expr[Definition] = {
    import c.universe._

    val defn = c.prefix.tree match {
      case Apply(_, List(Apply(_, List(Literal(Constant(s: String)))))) =>

        def toAST[A : TypeTag](xs: Tree*): Tree =
          Apply(
            Select(Ident(typeOf[A].typeSymbol.companionSymbol), newTermName("apply")),
            xs.toList
          )

        def toVarAST(varObj: Var) =
          toAST[Var](c.literal(varObj.name).tree)

        def toEqAST(eqObj: Eq) =
          toAST[Eq]((eqObj.head +: eqObj.body).map(toVarAST(_)): _*)

        def toDefAST(defObj: Definition) =
          toAST[Definition](c.literal(defObj.name).tree +: defObj.body.map(toEqAST(_)): _*)

        parsers.parse(s) match {
          case parsers.Success(defn, _)  => toDefAST(defn)
          case parsers.NoSuccess(msg, _) => c.abort(c.enclosingPosition, msg)
        }
    }
    c.Expr(defn)
  }

  import scala.util.parsing.combinator.JavaTokenParsers

  private object parsers extends JavaTokenParsers {

    override val whiteSpace = "[ \t]*".r

    lazy val newlines =
      opt(rep("\n"))

    lazy val varP =
      "[a-z]+".r ^^ Var

    lazy val eqP =
      (varP <~ "=") ~ rep(varP) ^^ {
        case lhs ~ rhs => Eq(lhs, rhs: _*)
      }

    lazy val defHead =
      newlines ~> ("[a-zA-Z]+".r <~ "{") <~ newlines

    lazy val defBody =
      rep(eqP <~ rep("\n"))

    lazy val defEnd =
      "}" ~ newlines

    lazy val defP =
      defHead ~ defBody <~ defEnd ^^ {
        case name ~ eqs => Definition(name, eqs: _*)
      }

    def parse(s: String) = parseAll(defP, s)
  }

  case class Var(name: String)
  case class Eq(head: Var, body: Var*)
  case class Definition(name: String, body: Eq*)
} 
```

它可以与这样的东西一起使用：

```
scala> import AlgDefDSL._
import AlgDefDSL._

scala> dsl"""
     | Dummy {
     |   x = y z
     |   y = x z
     | }
     | """
res12: AlgDefDSL.Definition = Definition(Dummy,WrappedArray(Eq(Var(x),WrappedArray(Var(y), Var(z))), Eq(Var(y),WrappedArray(Var(x), Var(z))))) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T09:28:45.277

除了 sschaef 的好解决方案之外，我还想提一些在 DSL 的列表构造中常用来去除逗号的可能性。

## 冒号

这可能是微不足道的，但它有时被忽视为一种解决方案。

```
line1 ::
line2 ::
line3 ::
Nil 
```

对于 DSL，通常希望包含某些指令/数据的每一行都以相同的方式终止（与列表相反，其中除了最后一行之外的所有行都将获得逗号）。有了这样的解决方案，交换行不再会弄乱尾随的逗号。不幸的是，`Nil`看起来有点难看。

## 流体 API

另一个对 DSL 来说可能很有趣的替代方案是这样的：

```
BuildDefinition()
.line1
.line2
.line3
.build 
```

其中每一行都是构建器的成员函数（并返回修改后的构建器）。此解决方案需要最终将构建器转换为列表（这可能作为隐式转换完成）​​。请注意，对于某些 API，可能会传递构建器实例本身，并且只在需要的地方提取数据。

## 构造函数 API

同样，另一种可能性是利用构造函数。

```
new BuildInterface {
  line1
  line2
  line3
} 
```

在这里，`BuildInterface`是一个特征，我们只需从接口实例化一个匿名类。行函数调用此特征的一些成员函数。每次调用都可以在内部更新构建接口的状态。请注意，这通常会导致可变设计（但仅在构造期间）。要提取列表，可以使用隐式转换。

由于我不了解您的 DSL 的实际用途，因此我不确定这些技术中的任何一个是否对您的场景感兴趣。我只是想添加它们，因为它们是摆脱“，”的常用方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-26T17:21:42.390

这是另一种相对简单的解决方案，并且可以使用非常接近您理想的语法（正如其他人指出的那样，您要求的确切语法是不可能的，特别是因为您无法重新定义分隔符）。我的解决方案扩展了一些合理的做法，因为它`scala.Symbol`在 .

```
object VarOps {
  val currentEqs = new util.DynamicVariable( Vector.empty[Eq] )
}
implicit class VarOps( val variable: Var ) extends AnyVal {
  import VarOps._
  def :=[T]( body: Var* ) = {
    val eq = Eq( variable, body:_* ) 
    currentEqs.value = currentEqs.value :+ eq
  }
}

implicit class SymbolOps( val sym: Symbol ) extends AnyVal {
  def apply[T]( body: => Unit ): Definition = { 
    import VarOps._
    currentEqs.withValue( Vector.empty[Eq] ) {
      body
      Definition( sym.name, currentEqs.value:_* )
    }
  }
} 
```

现在你可以这样做：

```
'Dummy {
   x := (y, z)
   y := (x, z)
} 
```

它构建了以下定义（如 REPL 中所示）：

```
Definition(Dummy,Vector(Eq(Var(x),WrappedArray(Var(y), Var(z))), Eq(Var(y),WrappedArray(Var(x), Var(z))))) 
```

# entity-framework - 在单个解决方案中正确使用多个 EF 5.0 edmx

> ID：14536902
> 
> 赞同：3
> 
> 时间：2013-01-26T12:21:40.397
> 
> 标签：entity-framework, entity, edmx, edmx-designer

在此示例中，我遵循数据库优先方法。由于单个 edmx 的可管理性问题，我决定将单个 edmx 分解为多个 edmx。

我创建了一个项目并添加了一个名为**AModel**的新 ADO.net 实体数据模型。**它给了我在App.config 中为保存实体连接字符串**选择 DBNameEntities 的选项。结果，上下文生成为：

**公共部分类*DBNameEntities* : DbContext**

现在我添加了另一个名为**BModel**的 ADO.net 实体数据模型。我提供了选择 DBNameEntities1 作为“在 App.config 中保存实体连接字符串”的连接字符串的选项。由于我已经为**AModel**创建了一个连接字符串，因此我取消了连接字符串的选项。现在 BModel 的上下文生成为（从 T4 模板生成的 POCO 实体）：

**公共部分类*实体*：DbContext**

1.  在单个项目中，是否可以为多个模型使用多个dbContexts（DBNameEntities，Entities）？

2.  或者在单个项目中，是否建议仅使用单个 dbContext 但将模型分解为具有不同 edmxs 的多个模型？

3.  如何为多个模型使用名为*DBNameEntities*的相同连接字符串，但同时创建有意义的上下文。我希望*BModel*的上下文生成为**BContext ，** *AModel*的上下文生成为**AContext**。例如。**公共部分类 AContext : DbContext**

4.  是解决我的问题的正确方法，**创建不同的项目并且每个项目都有一个模型**，而不是使用单个项目来拥有多个 edmx。

分享你的想法。

# encryption - RSA 私钥格式

> ID：14536903
> 
> 赞同：3
> 
> 时间：2013-01-26T12:21:47.563
> 
> 标签：encryption, rsa, public-key-encryption

我试图找到一种方法来使用 OpenSSL 在 Ruby 中复制 mega.co.nz 的会话 ID 解码。但是，不幸的是，我不是密码学专家。

问题是我不理解/识别私钥格式

这是他们分解私钥的代码（[https://eu.static.mega.co.nz/crypto.js](https://eu.static.mega.co.nz/crypto.js)）：

```
// decompose private key
for (var i = 0; i < 4; i++)
{
    var l = ((privk.charCodeAt(0)*256+privk.charCodeAt(1)+7)>>3)+2;

    rsa_privk[i] = mpi2b(privk.substr(0,l));
    if (typeof rsa_privk[i] == 'number') break;
    privk = privk.substr(l);
} 
```

`privk`本身是 656 字节长（包括末尾的 8 个破折号填充）。

在“分解”之后，他们使用分解的部分来解密会话 ID（[https://eu.static.mega.co.nz/rsa.js](https://eu.static.mega.co.nz/rsa.js)）：

```
// Compute m**d mod p*q for RSA private key operations.

function RSAdecrypt(m (encrypted session-id), d (rsa_privk[2]), p (rsa_privk[0]), q (rsa_privk[1]), u (rsa_privk[3])) 
```

如何转换此密钥以便 OpenSSL 知道如何使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-05T00:02:00.523

OpenSSL 支持不同的密钥格式，包括[PEM/X.509](https://de.wikipedia.org/wiki/X.509)和[PKCS8](https://de.wikipedia.org/wiki/PKCS)。

ruby 标准库包含一个[OpenSSL 绑定](http://ruby-doc.org/stdlib-2.0/libdoc/openssl/rdoc/OpenSSL.html)。

使用本文中提供的方法[，](http://blog.internautdesign.com/2007/11/2/ruby-openssl-rsa-public-key-from-modulus-and-exponent)您可以从指数创建密钥，然后使用例如

```
key.to_pem() 
```

将其转换为 X.509 格式的字符串。

# c# - 对泥浆/交互式小说解析器应该采用的方法感到困惑

> ID：14536906
> 
> 赞同：3
> 
> 时间：2013-01-26T12:22:16.870
> 
> 标签：c#, .net, parsing, lex

让我想编程的第一件事就是创建一个多人文本游戏。当我意识到，至少在当时对我来说，编写一个智能解析器是多么复杂时，我被这个想法吓跑了。

所以现在我又开始思考这个问题了，我已经尝试对这个主题进行大量研究。事实证明，它似乎比我想象的要复杂得多，而且我偶然发现了诸如*lexing*和*tokenizing*和*parsing*之类的术语，我以前只知道后者。我认为*词法分析*领域是我想要寻找的。

因此，与其尝试创建我自己的词法分析器和解析器，我认为它们非常困难且容易出错，并且大多数人都指示要避开，我想我会找到一个好的词法分析器和解析器生成器来使用，这应该会做对我来说所有繁重的工作，我可以专注于我想要的语法。我也听到很多人说想要做这样的事情的人应该简单地使用`Inform`.

当然，我认为 Inform 很酷，但 C# 是我选择的语言，我喜欢它允许我自由支配我认为 Inform 提供的内容。我对创建多人文本游戏的所有组件和框架比对任何一个特定的最终结果更感兴趣，因此我最喜欢使用标准编程语言的想法。

一段时间以来，我一直在尝试为 C# 寻找一个好的词法分析器/解析器生成器，但对人们给出的评论似乎提供的一切并不满意。

C# 的 antlr 似乎不发达，而且大多是事后才想到的。我已经尝试理解 GPLEX 和 GPPG，但到目前为止，尽管阅读了很多文档并尝试阅读很多关于词法分析的内容，但它们现在对我来说太混乱了。

关于词法分析的整个过程，我脑子里有很多概念，但是当面对词法分析器和解析器时，我想我真的不知道这些应该如何融入我的实际代码中。

我想用名词短语和动词短语构建一个简单的英语语法，并且能够在游戏开发和扩展时从数据库中动态添加和准备好名词和动词列表。

我想我觉得我对我一直在尝试做的这个主题的研究结果缺乏信心。

老实说，在这一点上，根据我所研究的内容创建我自己的词法分析器和解析器概念的想法似乎比使用我读过的任何词法分析器/解析器生成器更具吸引力。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-26T16:51:15.930

首先，一些元建议。这对于 StackOverflow 来说可能不是一个好问题，因为它与特定的技术问题无关。您可以考虑在 Programmers.StackExchange.com 上提出类似的问题。

回答您的问题：我同意 tallseth；这取决于你想在这里提高什么技能。人们偶尔会问我为什么不造一艘船，因为我相当得心应手，喜欢航海。因为*如果你喜欢在你的车库里有一艘未完工的船两年，你应该只建造一艘船*。如果你想扬帆，就扬帆远航。如果你想造一艘船，那就造一艘船。但是不要因为你想航行而造船。想写文字冒险，就学Inform7；它是世界上最棒的文字冒险工具。如果您想学习如何制作词法分析器和解析器，请不要乱用解析器生成器。*制作词法分析器和解析器*。

如果您正在对一种新的编程语言进行原型设计并且想要快速上手，那么解析器生成器非常有用。但是编程语言语法可以具有非常好的特性，使它们能够以自然语言不具备的方式自动生成解析器。如果您使用解析器生成器方法，您可能会花费与构建语法所花费的时间一样多的时间与解析器生成器进行斗争。

既然你是这方面的初学者，我建议你回顾一下文字冒险的历史。首先编写一个词法分析器和解析器，它可以解析两个词的命令：“go north”、“get Sword”、“drop brick”等等。这将为您提供足够的灵活性，然后您可以开始解决文本冒险设计中的其他问题：如何表示对象和位置。从小处着手；如果你可以制作一个玩家可以拿起和放下物品的两室游戏，那么你就成功了。

简而言之，我强烈鼓励你跟随你的直觉；编写自己的词法分析器和解析器非常有趣，如果您从小处着手并逐步发展，实际上并不难。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T14:43:04.033

这取决于你想从项目中得到什么。

如果这是一个在业余时间做的学习项目，那么滚动你自己的标记器和解释器是一个很好的解决方案。虽然很难完美地做到这一点，但制作*足够*的解析层相当容易。我建议您一开始就制作最小的解析层，并随着游戏的丰富性逐步改进它。如果你感兴趣的话，这是一个很好的练习 TDD 和设计模式的问题。使用这些实践将更容易逐步进行改进。

另一方面，如果您不会从该练习中获得很多价值（您的时间紧迫，这是为了真正的工作，您只是不关心解析层等），那么我建议使用现有的解析器。如果您将第三方解析器封装在抽象后面，您可以稍后改变您对编写自己的解析器或使用什么解析器的想法。

你可能已经看过了，但是[这个 SO question](https://stackoverflow.com/questions/2974630/does-c-sharp-have-direct-flex-yacc-port-or-what-lexer-parser-people-use-for-c?rq=1)看起来有一个很好的 c# 解析器列表。

# asp.net - 如何使用引导程序修改 asp.net 中的详细信息视图

> ID：14536909
> 
> 赞同：1
> 
> 时间：2013-01-26T12:22:46.110
> 
> 标签：asp.net, twitter-bootstrap, detailsview

我有一个 asp.net 项目，我想使用 bootstap 更改它的样式。我无法更改诸如 detailsview 之类的复杂组件。有没有办法做到这一点？提前致谢。

# php - jQuery 代码将无法工作/适用于使用 javascript 从 ajax 调用的文件中的元素

> ID：14536911
> 
> 赞同：1
> 
> 时间：2013-01-26T12:22:57.600
> 
> 标签：php, jquery, ajax

希望有人可以为我指出一个令人讨厌的问题的正确方向。

在我放代码之前总结一下；我有两个文件..一个名为“bookings.php”的带有javascript的html文件和一个带有php“getBookings.php”的php文件。

bookings.php 文件包含所有静态信息，如菜单、文本等以及 javascript + ajax 调用。

我正在使用 javascript/ajax 成功调用 getBookings 文件，并且运行良好，我没有任何问题。

我的问题是，从加载的文件（getBookings.php）；我需要切换一些 html 元素。它的 jQuery，我已经包含在 bookings.php 文件中。但是当调用 ajax 文件时，jquery 不会应用或工作。

getBookings.php 上的所有内容都加载到#bookingSummary 元素中。

现在，我的代码很长，所以我将包括所有重要的部分..

```
// Usual Head Content, Meta, CSS, jQuery files
// Filters
<script language="javascript" type="text/javascript">
function bookings()
{
    var fltr="";
    if(document.frm.bkid.value != "")
        fltr+='bkid='+document.frm.bkid.value+'&';

    if(document.frm.customer.value != "")
        fltr+='cid='+document.frm.customer.value+'&';

    if(document.frm.site.selectedIndex != 0)
            fltr+='sid='+document.frm.site.value+'&';

    if(document.frm.status.selectedIndex != 0)
        fltr+='st='+document.frm.status.value+'&';

    if(document.frm.supp.selectedIndex != 0)
        fltr+='sup='+document.frm.supp.value+'&';   

    if(document.frm.datefrm.value != "")
        fltr+='dfrm='+encodeURI(document.frm.datefrm.value)+'&dto='+encodeURI(document.frm.dateto.value);   

    document.getElementById('bookingsummary').innerHTML="<br /><p align='center'>    <img src='img/bigloading.gif'></p>";
    url='get/getBookings.php?'+fltr;
    getAjaxRec(url, viewbookings);

}

function viewbookings()
{
    if (xmlHttp.readyState == 4 && (xmlHttp.status==200 ||     window.location.href.indexOf("http")==-1))
    {
        document.getElementById("bookingsummary").innerHTML = xmlHttp.responseText;
    }   
 }

</script> 
```

上面的代码是一切正常的javascript..以下是调用上述函数的html代码 - bookings()：

```
<!-- Several Form fields are here..-->
<input type="button" value="Apply Filter"  class="searchBtn" onClick="bookings();">

<!-- Show booking results -->
<div id="bookingsummary"></div> 
```

现在，在 getBookings 文件中有一个类名为“hiddenDetails”的 html 元素，我需要切换它，它的 Jquery 是：

```
<script type="text/javascript"> 
 $(document).ready(function() {

  $('.bookingKeyDetails').click(function()
  {         
        $(this).next('.hiddenDetails').slideToggle('medium");
  });

 });
</script> 
```

上面的代码除了 jquery 之外都可以工作。这里是 getBookings.php 文件中的一个片段。我想将 jquery 应用到的部分。

```
<?php
// A while loop happens then..
$result="           
<div class=\"bookingKeyInfo\">
<div class=\"lb1\"><input type=\"checkbox\" name=sup1x".$rw['id']." ></div>
<div class=\"lb2\"><a href=\"editbooking.php?id=".$rw['id']."\">".$rw['id']."</a>     </div>
<div class=\"lb3\">".date('d/m/Y', strtotime($rw['pickupDate']))." <strong><font     color=\"#FF0000\">".date('H:i', strtotime($rw['pickupTime']))."</font></strong></div>
<div class=\"clearLeft\"></div>
</div>

<div class=\"bookingKeyDetails\">
<div class=\"b-one\"><img style=\"margin-top:9px; padding-bottom: 5px;\"     src=\"$base_dir/img/".strtolower($rw['status']).".png\"></div>
<div class=\"b-two\"><img id=\"isCustomerEmailed\" style=\"margin-top:9px; padding-    bottom: 5px;\" src=\"$base_dir/img/unassigned.png\"></div>
<div class=\"b-three\"><img id=\"isSupplierEmailed\" style=\"margin-top:9px; padding-    bottom: 5px;\" src=\"$base_dir/img/unassigned.png\"></div>
<div class=\"b-four\"><img id=\"isSupplierConfirmed\" style=\"margin-top:9px; padding-    bottom: 5px;\" src=\"$base_dir/img/unassigned.png\"></div>    
<div class=\"b-trip\">".substr($rw['DA'],0,6)."..<strong> to </strong>     ".substr($rw['DB'],0,6)."..</div>
<div class=\"b-pax\">".$rw['pax']." Pax</div>
<div class=\"b-cost\">&euro;$cost </div>
<div class=\"b-supplier\">".substr($sup,0,10)."..</div>

<div class=\"clearLeft\"></div>

<div class=\"hiddenDetails\">More Booking Information...</div>
</div>";

echo $result;
?> 
```

我知道这是对问题的很长的描述..所以我试图完全按原样给出我的代码..

任何人都可以解释一下为什么 jQuery 不起作用.. cz 它是单独工作的，而不是在从 getBookings 调用的任何元素上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T12:31:02.360

问题是，您将事件处理程序与 jQuery 绑定到`bookingKeyDetails`它实际存在于页面上之前。请记住，此元素仅在页面加载后才会添加到您的 html 中，因此您所做的任何操作`$(document).ready(function() {`都不会应用于它。

仅在更改 html 后绑定事件处理程序：

```
function viewbookings() 
{
  if (xmlHttp.readyState == 4 && (xmlHttp.status==200 || window.location.href.indexOf("http")==-1))
  {
    document.getElementById("bookingsummary").innerHTML = xmlHttp.responseText;
    $('.bookingKeyDetails').click(function()
    {         
      $(this).next('.hiddenDetails').slideToggle('medium');
    });
  }   
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T12:32:25.487

由于当调用页面实例化要切换的 jQuery 时，您需要切换的 HTML 元素从未出现在页面上，因此您需要在从 ajax 成功调用后重新初始化该函数。

您可以为他们的 AJAX 调用工具使用 jQuery .success 回调函数......我用它来帮助进行这种处理而不是原生 AJAX。让生活更简单，更好的跨浏览器支持。

成功后只需调用您的切换功能。

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T12:32:08.657

您在函数调用中使用单引号和双引号

```
$(this).next('.hiddenDetails').slideToggle('medium"); 
```

用户`'medium'`或`"medium"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T12:33:31.060

很明显它不会切换，因为您已经在“bookings.php”中编写了 Jquery。在bookings.php 的页面加载过程中，它不会找到getBookings.php 的任何内容，因此Jquery 将不适用，因为该ID 没有可用的元素。

您必须为调用 getBooking.php 时的 Ajax 成功事件的工具绑定事件。

```
 $.ajax({
      url: URL,
      success: function(){
          $('.bookingKeyDetails').click(function()
          {         
             $(this).next('.hiddenDetails').slideToggle('medium");
          });
    },
      error: function(){
        alert('failure');
      }
    }); 
```

# jquery - jQuery：订购列表项但保留类

> ID：14536912
> 
> 赞同：2
> 
> 时间：2013-01-26T12:23:02.190
> 
> 标签：jquery, css, list, class, random

我有一个类列表，例如：

```
 <ul id="my_list">
    <li class="notrelevant"><a href="#1">something not relevant</a></li>
    <li class="notrelevant"><a href="#2">something not relevant</a></li>
    <li class="notrelevant"><a href="#3">something not relevant</a></li>
    <li class="notrelevant"><a href="#4">something not relevant</a></li>
    <li class="notrelevant"><a href="#5">something not relevant</a></li>

    <li class="relevant"><a href="#75">something not relevant</a></li>
</ul> 
```

你可以看到列表的最后一个类是相关的，这个类应该总是在列表的末尾！

我尝试用这个随机排序列表：

```
$(document).ready(function(){
    var liArr =[]

    $('ul').each(function(){
        var $ul = $(this);
        liArr = $ul.children('li');
     });    
    var i = liArr.length,
        j, temp;
    while (--i) {
        j = Math.floor(Math.random() * (i + 1));
        temp = liArr[i];
        liArr[i] = liArr[j];
        liArr[j] = temp;
    };
$('ul').append(liArr);            
}); 
```

并且 ofc 被排序到中间的某个地方。我不想忽略最后一项，所有标签都必须随机排序。

我如何随机排序列表并仅将最后一个类设置为“相关”，或者我只能对标签进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:31:37.723

为什么不使用 jQuery 的[shuffle 插件](http://mktgdept.com/js/jquery-shuffle.js?v0.0.1)：

```
<script type="text/javascript" src="jquery-shuffle.js"></script>
<script>
$(function() {
   $('#my_list li').shuffle();
});
</script> 
```

然后将类名应用于[last-child](http://api.jquery.com/last-child-selector/)：

```
$('#my_list li:last-child').attr('class', 'relevant'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:32:11.953

```
var $list = $('#my_list'), 
    $li = $list.find('li:not(:last)');
$li.sort(function(){
   return Math.floor(Math.random() * 3);
}).prependTo($list); 
```

[http://jsfiddle.net/Sa6GG/](http://jsfiddle.net/Sa6GG/)

或者：

```
var $list = $('#my_list'), 
    $li = $list.find('li');

$li.sort(function(){
   return Math.floor(Math.random() * 3);
});

$li.prop('class', 'notrelevant')
   .last()
   .prop('class', 'relevant')
   .end()
   .appendTo($list); 
```

[http://jsfiddle.net/MQYA3/](http://jsfiddle.net/MQYA3/)

# javascript - 提取括号之间的字符串

> ID：14536916
> 
> 赞同：0
> 
> 时间：2013-01-26T12:23:55.793
> 
> 标签：javascript, regex, string, pattern-matching

我想提取字符串中第一个左括号和最后一个右括号之间的字符，例如`match[input[name="firstname"]]`考虑要检索的字符也可能包含更多括号。在这种情况下，它会得到`input[name="firstname"]`此外，字符串可能包含一些特殊字符，如`{ # / \ ^`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T12:25:23.933

这个看起来有点尴尬的正则表达式

```
/[^[\]]+\[[^[\]]+\]/ 
```

基本上说“没有括号，然后[，然后没有括号，然后]”。

```
s = 'match[input[name="firstname"]]'
> "match[input[name="firstname"]]"
re = /[^[\]]+\[[^[\]]+\]/
> /[^[\]]+\[[^[\]]+\]/
s.match(re)
> ["input[name="firstname"]"] 
```

为了使这更有用，以下是如何从字符串中提取最上面括号的内容以进行嵌套：

```
function extractTopmostBrackets(text) {
    var buf = '', all = [], depth = 0;
    text.match(/\]|\[|[^[\]]+/g).forEach(function(x) {
        if(x == '[')
            depth++;
        if(depth > 0)
            buf += x;
        if(x == ']')
            depth--;
        if(!depth && buf)
            all.push(buf), buf = '';
    })
    return all;
}

text = "foo [ begin [bar [baz] [spam]] end ] stuff [one [more]]"

console.log(extractTopmostBrackets(text))
// ["[ begin [bar [baz] [spam]] end ]", "[one [more]]"] 
```

正则表达式引擎中的递归匹配支持将允许在一行中编写它，但 javascript re 并不是那么先进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T12:31:41.053

这将匹配字符串中第一次出现`[`和最后一次出现之间的所有内容`]`，无论它们之间有什么字符：

```
> s = 'match[input[name="firstname"]]'
"match[input[name="firstname"]]"
> re = /\[(.*)\]/
/\[(.*)\]/
> q = s.match(re)
["[input[name="firstname"]]", "input[name="firstname"]"]
> q[1]
"input[name="firstname"]" 
```

# c++ - 从 num1 到 num2 的最短路径（在 C++ 中）

> ID：14536923
> 
> 赞同：1
> 
> 时间：2013-01-26T12:24:49.707
> 
> 标签：c++, recursion

我需要编写一个函数（在 C++ 中）获取两个整数（>0）（n1，n2）。我只能做两件事：

*   n1 加 1。
*   将 n1 乘以 2。

该函数返回从 n1 到 n2 的最短路径的步数。你能给我一些想法吗？

谢谢！

PS如果不可能，该函数返回-1。

这里我尝试了什么：

```
if (n1<n2)
{
    n1++;
    if ((n1)*2<=n2)
        return 2+f(n1*2,n2);
    else
        return 1+f(n1,n2);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T12:29:36.910

我想最好扭转这个问题：从 n2 到 n1 用这两个 tings ：

*   减 1
*   除以 2（仅当结果为整数时）

这样，当您第一次尝试将数字除以 2 时，您可以找到最大的步骤，如果不可能，则减去 1（之后除法有效）。继续这样做，直到达到 n1（或更低的值，之后您只能使用“减少步长”，因此基本上已经知道所需的步数）

我想你可以自己实现这个算法......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T12:31:06.947

一步一步想一想。

可以说`n1`是`start`和`n2`是`end`。

如果你已经在`end`，那么你不需要步骤。如果`start`大于`end`，你不能这样做。

否则你有两个选择..

*   添加 1`start`并递归地重复该过程 - 将步骤数存储为`add`
*   乘以`start`2 并递归地重复该过程 - 将步骤数存储为`mult`

如果两者都可能，那么两者中最低的就是你的答案。

如果你在我的代码被删除之前得到了我的代码，我希望你能花点时间来逐步完成它，否则你可以试着把它写出来..大约需要一分钟左右..

ps 对于大量步骤，您可能希望将其实现为尾递归算法以防止`<insert name of the website here>`.

pps 这是一个非常低效的算法，因为它会探索每个分支。您可以尝试改进它并尝试减少所需的分支数量，也许只有在 mult 不这样做时才添加..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T12:56:06.727

如前所述，您可以通过逆向从 n2 到 n1 将问题转换为允许贪婪选择的问题。答案当然是一样的。

但可以进行更多观察：

*   如果换档会导致数字太低，那么从现在开始您必须采取的步数是`current - n1`，您不必逐个计算所有这些步数。
*   如果移位会导致一个*不*太低的数字，那么无论您当前是奇数还是偶数都没有关系，您总是可以移位（但将最低位添加到所采取的步数中，因为它会迈出一步）
*   使用 n1 和 n2 中最高设置位的位置，可以一次执行多个移位（将移位量和要移出的位的汉明权重添加到步数）。您可以进行的班次数量是`bsr(n2) - bsr(n1) - 1`，但要注意极端情况。这并不总是最大的换档步数，它可能需要多一个（但不能超过这个）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T12:31:53.667

```
int numOfSteps(int n1, int n2) {
    if (n1 > n2) return -1;
    if (n1 == n2) return 0;
    int result = 0;
    while (n1 * 2 <= n2) {
            n1 *= 2;
            result ++;
    }
    while (n1 < n2) {
            n1 ++;
            result ++;
    }
    return result;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T20:02:22.623

我解决它！（我向我的朋友寻求建议......）

这是代码：

```
int f(unsigned int n1, unsigned int n2){

int num1,num2;

if (n1==n2)
        return 0;
if (n1>n2)
    return -1;
num1=f(n1+1,n2)+1;
num2=f(n1*2,n2)+1;
return min(num1,num2);} 
```

这是“分钟”：

```
int min (unsigned int n1, unsigned int n2){
if (n1*n2==0) //If one of them is zero then (n1+n2) return the non-zero
              //number.
    return n1+n2;
else
    if (n1>n2)
        return n2;
    else
        return n1;} 
```

**谢谢！！**

# eclipse - Visual Studio 2012 IntelliSense 信息，如 Eclipse

> ID：14536925
> 
> 赞同：1
> 
> 时间：2013-01-26T12:25:00.277
> 
> 标签：eclipse, visual-studio-2012, documentation, intellisense

是否可以将 Visual Studio 2012 配置为像在 Eclipse 中一样显示文档？

```
Visual studio 
```

![不像这个](../Images/daf0bbda73d5bbde11e947c92c1c72f0.png)

```
Eclipse 
```

![但是作为这个](../Images/e3ae09dee65473eca1534f496e40fc67.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T12:41:37.063

通常[IntelliSense](http://en.wikipedia.org/wiki/IntelliSense)会出现，并为您提供有关您将要使用的源的提示。如果您想获取有关您自己的源代码的信息，您需要在方法、字段或属性上进行标记，以告诉 IntelliSense 应该显示此信息。

复制粘贴这个小方法，尝试使用。您会注意到 IntelliSense 会提示您使用它：

```
/// <summary>
/// Add a number to another
/// </summary>
/// <param name="a">start value</param>
/// <param name="b">new int to add</param>
/// <returns>addition of a and b</returns>
private int AddNumber(int a, int b)
{
   return a + b;
} 
```

如果这不能满足您的需求，请尝试[JetBrains 的 ReSharper](http://www.jetbrains.com/resharper/features/index.html)。它有很多功能可以帮助您更快地编写代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T21:05:23.773

也许 ReSharper 是一个很好的工具，但它对 C++ 没有帮助。我认为视觉辅助 x 更好。我还注意到，安装 resharper 后，我的 Visual Studio 开始工作非常缓慢，但使用 Visual Assist x 则没有这样的问题。

# c# - 函数插值 c#

> ID：14536927
> 
> 赞同：2
> 
> 时间：2013-01-26T12:25:18.907
> 
> 标签：c#, .net, math, interpolation

我知道有几个与插值有关的问题，但我没有找到任何对我有足够帮助的答案，所以我有以下问题。

我有两个点数组。一个跟踪时间（x 轴）和一个跟踪费用（y 轴），我想得到这样的东西：

```
InterpolatingPolynomial[{{0, 10}, {1, 122}, {2, 3.65}, {3, 56.3}, {4, 12.4}, {5, 0}}, x] 
```

（在返回拟合点的构造多项式的 Mathematica 中）。是否有可能返回由 C# 中`func<double,double>`的两个`double`数组构造的？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:40:58.460

[本文](http://www2.math.umd.edu/~dlevy/classes/amsc466/lecture-notes/interpolation-chap.pdf)准确描述了您想要的内容。[Vandermonde 行列式](http://en.wikipedia.org/wiki/Vandermonde_matrix)方法实现起来非常简单，因为它需要计算矩阵的行列式以获得插值多项式的系数。
不过，我建议构建一个具有适当接口的类，因为动态构建`Func`s 非常复杂（参见[此处](https://stackoverflow.com/questions/8315819/expression-lambda-and-query-generation-at-runtime-simplest-where-example)的示例）。您可以执行以下操作：

```
public class CosineInterpolation {
    public CosineInterpolation(double[] x, double[] y) { ... }
    public double Interpolate(double x) { ... }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T16:22:48.557

经过一整天的搜索，我想我自己找到了解决方案。我使用拉格朗日插值法对函数进行插值。`Func<double,double>`然后可以使用 LINQ 轻松构建A。例如

```
public Func<doube,double> GetFunction()
{
    LagrangeInterpolation lagInter = new LagrangeInterpolation(xVals, yVals);
    return ( val => lagInter(GetValue(val) );
} 
```

这将返回`Func<double,double>`对象。（我知道每次都创建一个新对象不是一个好的解决方案，但这只是为了演示目的）

# sql - 删除具有特定关系的行

> ID：14536930
> 
> 赞同：1
> 
> 时间：2013-01-26T12:25:31.243
> 
> 标签：sql, sqlite, join

我有一些桌子：

```
/* Delete the tables if they already exist */
drop table if exists Movie;
drop table if exists Reviewer;
drop table if exists Rating;

/* Create the schema for our tables */
create table Movie(mID int, title text, year int, director text);
create table Reviewer(rID int, name text);
create table Rating(rID int, mID int, stars int, ratingDate date);

/* Populate the tables with our data */
insert into Movie values(101, 'Gone with the Wind', 1939, 'Victor Fleming');
insert into Movie values(102, 'Star Wars', 1977, 'George Lucas');
insert into Movie values(103, 'The Sound of Music', 1965, 'Robert Wise');
insert into Movie values(104, 'E.T.', 1982, 'Steven Spielberg');
insert into Movie values(105, 'Titanic', 1997, 'James Cameron');
insert into Movie values(106, 'Snow White', 1937, null);
insert into Movie values(107, 'Avatar', 2009, 'James Cameron');
insert into Movie values(108, 'Raiders of the Lost Ark', 1981, 'Steven Spielberg');

insert into Reviewer values(201, 'Sarah Martinez');
insert into Reviewer values(202, 'Daniel Lewis');
insert into Reviewer values(203, 'Brittany Harris');
insert into Reviewer values(204, 'Mike Anderson');
insert into Reviewer values(205, 'Chris Jackson');
insert into Reviewer values(206, 'Elizabeth Thomas');
insert into Reviewer values(207, 'James Cameron');
insert into Reviewer values(208, 'Ashley White');

insert into Rating values(201, 101, 2, '2011-01-22');
insert into Rating values(201, 101, 4, '2011-01-27');
insert into Rating values(202, 106, 4, null);
insert into Rating values(203, 103, 2, '2011-01-20');
insert into Rating values(203, 108, 4, '2011-01-12');
insert into Rating values(203, 108, 2, '2011-01-30');
insert into Rating values(204, 101, 3, '2011-01-09');
insert into Rating values(205, 103, 3, '2011-01-27');
insert into Rating values(205, 104, 2, '2011-01-22');
insert into Rating values(205, 108, 4, null);
insert into Rating values(206, 107, 3, '2011-01-15');
insert into Rating values(206, 106, 5, '2011-01-19');
insert into Rating values(207, 107, 5, '2011-01-20');
insert into Rating values(208, 104, 3, '2011-01-02'); 
```

我需要编写一个查询，从 Rating 表中删除电影年份在 1970 年之前或 2000 年之后的行，并且评级低于 4 星。我坚持今年。首先假设年份> 2000。另一个是年份< 1970。我怎样才能加入这两个和第三个评级条件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T12:31:21.530

以下将删除年份范围 [1970-2000] 以外且评分低于 4 星的电影的评分：

```
DELETE FROM Rating
WHERE EXISTS (
    SELECT 1 
    FROM Movie 
    WHERE Movie.mID = Rating.mID 
    AND (year < 1970 OR year > 2000)
)
AND stars < 4 
```

[SQL 小提琴示例](http://www.sqlfiddle.com/#!5/b96dc/40)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:33:36.457

```
DELETE r
FROM Rating r
INNER JOIN Movie m
    ON r.mID = m.mID
WHERE (m.year < 1979 OR m.year > 2000)
AND r.rating < 4 
```

应该在大多数 RDMS 上执行此操作，但不是 SQLite。

# dns - 仅 50% 的人无法访问网站

> ID：14536934
> 
> 赞同：-1
> 
> 时间：2013-01-26T12:26:30.423
> 
> 标签：dns, domain-name

我的网站仅对 50% 的人关闭。我尝试过许多支持渠道，但没有人知道答案。这可能是错误的 StackExchange 站点，但这是我认为唯一可能知道答案的站点。

*   我无法访问我的网站[http://www.codebundle.net](http://www.codebundle.net)
*   [http://www.downforeveryoneorjustme.com/codebundle.net](http://www.downforeveryoneorjustme.com/codebundle.net)认为我的网站已启动
*   [http://whydown.com/#codebundle.net](http://whydown.com/#codebundle.net)认为我的网站已启动
*   我的 50% 的朋友无法访问该网站
*   [http://hidemyass.com](http://hidemyass.com)无法访问该网站
*   [https://www.securetunnel.com/xpress](https://www.securetunnel.com/xpress)可以访问该网站
*   tracert 不相信该站点存在。返回“无法解析目标系统名称”
*   我手机上这个区域的 3G (H) 网络无法访问
*   当地的 costacoffee 无法访问它
*   我最近的城镇的星巴克是

请帮忙，这真的开始让我烦恼

该域名停在godaddy，直到我们解决这个问题，然后我会将它指向我的网站。如果您能帮我解决这个问题，谢谢您的帮助

```
nslookup www.codebundle.net 8.8.8.8 
```

正确返回别名、IP 和名称

```
nslookup www.codebundle.net 
```

DNS 请求超时并最终停止

我一直在等待 3-4 个月来解决问题。没有收获

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:28:27.117

对我来说，该网站有效，但我会得到一个 go daddy placeholer 页面。如果您刚刚注册了该页面，问题可能是您的计算机缓存中有旧的 DNS 记录。所以你需要等待或者你可以尝试改变你的dns服务器。

在此处尝试此操作以查询 google dns 服务器：

```
nslookup www.codebundle.net 8.8.8.8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:29:33.260

如果 godaddy 正在处理您的域，您应该联系他们的支持以解决此类问题。

# jquery - 从表单中发送所有数据而没有一个

> ID：14536941
> 
> 赞同：1
> 
> 时间：2013-01-26T12:28:03.627
> 
> 标签：jquery

> **可能重复：**
> [如何使用 jQuery 的 form.serialize 但排除空字段](https://stackoverflow.com/questions/608730/how-do-i-use-jquerys-form-serialize-but-exclude-empty-fields)

我想使用 ajax 从字段中发送所有值，而没有字段“lastname”中的值 - 我该怎么做？我的代码：

```
<script>
    $(document).ready(function () {
        $('#other').click(function () {
            $.post("/Home/About", $("#target").serialize());
        });
    });
</script>

<form id="target" action="/Home/About" method="post">
    First name:
    <input type="text" name="firstname" id="firstname"><br>
    .....other fields.....
    Last name:
    <input type="text" name="lastname" id="lastname"><br>
</form>
<div id="other">Submit</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T12:30:45.937

您可以使用`:not`选择器：

```
$.post("/Home/About", $("#target :not(#lastname)").serialize()); 
```

# c - 分配连续序列不起作用

> ID：14536943
> 
> 赞同：0
> 
> 时间：2013-01-26T12:28:25.883
> 
> 标签：c, pointers, shared-memory, memory-address

我正在使用共享内存，因此我需要将部分内存附加到其他进程。我试图附加到一个连续的序列，但这似乎在整数和浮点数组之后不起作用。这里 NUMBER_OF_DATA=5

```
int shmid=shmget(key,size,0777|IPC_CREAT);
  int *a=(int *)shmat(shmid,0,0);
  float *b=(float *)(a+NUMBER_OF_DATA);
  char *array1[20];
array1[0]=(char *)(b+NUMBER_OF_DATA);
  char *array2[20];
array2[0]=(char *)(array1+(20*NUMBER_OF_DATA));
  for(i=0;i<NUMBER_OF_DATA;i++)
    {
      a[i]=roll_no[i];
      b[i]=cgpa[i];
      array1[i]=firstname[i];
      array2[i]=lastname[i];
    printf("%p %p %p %p\n",&a[i],&b[i],&array1[i],&array2[i]);
    } 
```

当我打印地址时，我得到

```
0xb777d000 0xb777d014 0xbfd480a0 0xbfd480f0
0xb777d004 0xb777d018 0xbfd480a4 0xbfd480f4
0xb777d008 0xb777d01c 0xbfd480a8 0xbfd480f8
0xb777d00c 0xb777d020 0xbfd480ac 0xbfd480fc
0xb777d010 0xb777d024 0xbfd480b0 0xbfd48100 
```

在数组 a 和 b 之后不连续。为什么会这样？解决办法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:37:09.107

好像在这一行

```
 array1[i]=firstname[i];
  array2[i]=lastname[i]; 
```

您正在覆盖您的值，`array[i]`因此它不再是指向共享内存某些部分的指针，就像在

```
array1[0]=(char *)(b+NUMBER_OF_DATA);
array2[0]=(char *)(array1+(20*NUMBER_OF_DATA)); 
```

在输出的最后两列中，您实际上打印的是 的值`firstname[i]`，而不是 的值`(char *)(b+NUMBER_OF_DATA)`。如果是无意的，那就是答案。如果不是，那么知道 this`firstname`和`lastname`variable 是什么将有助于我们给出更好的答案。

**UPD：**另请注意，在 i ≥ 0 时，您正在打印 array1 和 array2 的未初始化项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:37:23.483

您只初始化 and 的第一个字段`array1`，`array2`其余的未初始化。你似乎混淆了一些东西，但我不确定你的确切意图是什么。

如果您希望这两个数组为`char *`s，这很简单，就像您为整数和浮点数所做的那样。

但是，如果您真的想要 a 之类的东西`char*[]`，您不仅需要存储值，还需要存储指向共享内存段中值的指针。

# c# - 创建 FileTable 或 FileStream SQL 类型 在 C# 中使用 Stream

> ID：14536945
> 
> 赞同：2
> 
> 时间：2013-01-26T12:29:11.080
> 
> 标签：c#, sql-server, stream, filestream, filetable

我不想在 SQL Server 中创建 fileTable 或 filestream 类型，但我需要从 Stream 而不是磁盘上的位置创建它，有没有办法做到这一点？有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T12:31:49.400

使用此[站点中的此示例](http://blog.tallan.com/2011/08/22/using-sqlfilestream-with-c-to-access-sql-server-filestream-data/)

```
using System;
using System.Data;
using System.Data.SqlClient;
using System.Data.SqlTypes;
using System.Drawing;
using System.IO;
using System.Transactions;

namespace PhotoLibraryApp
{
  public class PhotoData
  {
    private const string ConnStr =
      "Data Source=.;Integrated Security=True;Initial Catalog=PhotoLibrary;";

    public static void InsertPhoto
      (int photoId, string desc, string filename)
    {
      const string InsertTSql = @"
        INSERT INTO PhotoAlbum(PhotoId, Description)
          VALUES(@PhotoId, @Description);
        SELECT Photo.PathName(), GET_FILESTREAM_TRANSACTION_CONTEXT()
          FROM PhotoAlbum
          WHERE PhotoId = @PhotoId";

      string serverPath;
      byte[] serverTxn;

      using (TransactionScope ts = new TransactionScope())
      {
        using (SqlConnection conn = new SqlConnection(ConnStr))
        {
          conn.Open();

          using (SqlCommand cmd = new SqlCommand(InsertTSql, conn))
          {
            cmd.Parameters.Add("@PhotoId", SqlDbType.Int).Value = photoId;
            cmd.Parameters.Add("@Description", SqlDbType.VarChar).Value = desc;
            using (SqlDataReader rdr = cmd.ExecuteReader())
            {
              rdr.Read();
              serverPath = rdr.GetSqlString(0).Value;
              serverTxn = rdr.GetSqlBinary(1).Value;
              rdr.Close();
            }
          }
          SavePhotoFile(filename, serverPath, serverTxn);
        }
        ts.Complete();
      }
    }

    private static void SavePhotoFile
      (string clientPath, string serverPath, byte[] serverTxn)
    {
      const int BlockSize = 1024 * 512;

      using (FileStream source =
        new FileStream(clientPath, FileMode.Open, FileAccess.Read))
      {
        using (SqlFileStream dest =
          new SqlFileStream(serverPath, serverTxn, FileAccess.Write))
        {
          byte[] buffer = new byte[BlockSize];
          int bytesRead;
          while ((bytesRead = source.Read(buffer, 0, buffer.Length)) > 0)
          {
            dest.Write(buffer, 0, bytesRead);
            dest.Flush();
          }
          dest.Close();
        }
        source.Close();
      }
    }

    public static Image SelectPhoto(int photoId, out string desc)
    {
      const string SelectTSql = @"
        SELECT
            Description,
            Photo.PathName(),
            GET_FILESTREAM_TRANSACTION_CONTEXT()
          FROM PhotoAlbum
          WHERE PhotoId = @PhotoId";

      Image photo;
      string serverPath;
      byte[] serverTxn;

      using (TransactionScope ts = new TransactionScope())
      {
        using (SqlConnection conn = new SqlConnection(ConnStr))
        {
          conn.Open();

          using (SqlCommand cmd = new SqlCommand(SelectTSql, conn))
          {
            cmd.Parameters.Add("@PhotoId", SqlDbType.Int).Value = photoId;

            using (SqlDataReader rdr = cmd.ExecuteReader())
            {
              rdr.Read();
              desc = rdr.GetSqlString(0).Value;
              serverPath = rdr.GetSqlString(1).Value;
              serverTxn = rdr.GetSqlBinary(2).Value;
              rdr.Close();
            }
          }
          photo = LoadPhotoImage(serverPath, serverTxn);
        }

        ts.Complete();
      }

      return photo;
    }

    private static Image LoadPhotoImage(string filePath, byte[] txnToken)
    {
      Image photo;

      using (SqlFileStream sfs =
        new SqlFileStream(filePath, txnToken, FileAccess.Read))
      {
        photo = Image.FromStream(sfs);
        sfs.Close();
      }

      return photo;
    }

  }
} 
```

# c# - aforge 库上的等效 matlab 命令

> ID：14536946
> 
> 赞同：0
> 
> 时间：2013-01-26T12:29:14.290
> 
> 标签：c#, matlab, aforge, equivalent

我想在 aforge 库中找到等效的 matlab 命令。

```
image = imread('image path');
image = imopen(image,strel('line',2); 
```

`Aforge`libray上有什么等价物？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T15:58:51.087

一点 google-fu “aforge opening” 让我明白了这一点：

[http://www.aforgenet.com/framework/docs/html/89cfb62e-3307-0f8c-9c59-16b588f32807.htm](http://www.aforgenet.com/framework/docs/html/89cfb62e-3307-0f8c-9c59-16b588f32807.htm)

这个：

[http://www.aforgenet.com/framework/docs/html/1110f43b-7741-8df9-69b8-19d4dd2b795f.htm](http://www.aforgenet.com/framework/docs/html/1110f43b-7741-8df9-69b8-19d4dd2b795f.htm)

似乎指定了如何获得正确的结构元素。

# c++ - 对音频样本应用 Kiss FFT 并获得 NaN 输出？

> ID：14536950
> 
> 赞同：8
> 
> 时间：2013-01-26T12:29:47.370
> 
> 标签：c++, audio, kissfft

标题解释了我的问题。

我想做的很简单：

*   加载 MP3 曲目（通过 libmpg123）
*   阅读样本
*   在样本上应用 Kiss FFT

到目前为止我尝试过的

```
inline float scale(kiss_fft_scalar val)
{
    int g = 0;
    return val < 0 ? val*(1/32768.0f ) : val*(1/32767.0f);
}

void main()
{
    mpg123_handle *m = NULL;
    int  channels = 0, encoding = 0;
    long rate = 0;
    int err = MPG123_OK;

    err = mpg123_init();        
    m = mpg123_new(NULL, &err);
    mpg123_open(m, "L:\\audio-io\\audio-analysis\\samples\\zero.mp3");
    mpg123_getformat(m, &rate, &channels, &encoding);

    err = mpg123_format_none(m);
    err = mpg123_format(m, rate, channels, encoding);

    // Get 2048 samples
    const int TIME = 2048;

    // 16-bit integer encoded in bytes, hence x2 size
    unsigned char* buffer = new unsigned char[TIME*2];
    size_t done = 0;
    err = mpg123_read(m, buffer, TIME*2, &done);

    short* samples = new short[done/2];
    int index = 0;

    // Iterate 2 bytes at a time
    for (int i = 0; i < done; i += 2)
    {
        unsigned char first = buffer[i];
        unsigned char second = buffer[i + 1];
        samples[index++] = (first | (second << 8));
    }

    // Array to store the calculated data
    int speclen = TIME / 2 + 1;
    float* output = new float[speclen];

    kiss_fftr_cfg config;
    kiss_fft_cpx* spectrum;

    config = kiss_fftr_alloc(TIME, 0, NULL, NULL);
    spectrum = (kiss_fft_cpx*) malloc(sizeof(kiss_fft_cpx) * TIME);

    // Right here...
    kiss_fftr(config, (kiss_fft_scalar*) samples, spectrum);

    for (int i = 0; i < speclen; i++)
    {
        float re = scale(spectrum[i].r) * TIME;
        float im = scale(spectrum[i].i) * TIME;

        output[i] = sqrtf(re*re + im*im);
    }

    return;
} 
```

问题出现在此行，`kiss_fftr(config, (kiss_fft_scalar*) samples, spectrum);` 其中`samples`包含音频样本（16 位），并`spectrum`假设保存输出数据。

函数完成后，调试器窗口中发生了以下情况。

![http://i.stack.imgur.com/K5Wtd.png](../Images/64fbb376e487524d833a70422b17800c.png)

有人能给我一个简单的例子，说明如何在音频（16 位编码）样本上应用 Kiss FFT 函数吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-26T14:29:32.543

您需要在代码中找到错误。我的测试代码似乎工作得很好。

具有浮点数的复值正向 FFT：

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include "kiss_fft.h"

#ifndef M_PI
#define M_PI 3.14159265358979324
#endif

#define N 16

void TestFft(const char* title, const kiss_fft_cpx in[N], kiss_fft_cpx out[N])
{
  kiss_fft_cfg cfg;

  printf("%s\n", title);

  if ((cfg = kiss_fft_alloc(N, 0/*is_inverse_fft*/, NULL, NULL)) != NULL)
  {
    size_t i;

    kiss_fft(cfg, in, out);
    free(cfg);

    for (i = 0; i < N; i++)
      printf(" in[%2zu] = %+f , %+f    "
             "out[%2zu] = %+f , %+f\n",
             i, in[i].r, in[i].i,
             i, out[i].r, out[i].i);
  }
  else
  {
    printf("not enough memory?\n");
    exit(-1);
  }
}

int main(void)
{
  kiss_fft_cpx in[N], out[N];
  size_t i;

  for (i = 0; i < N; i++)
    in[i].r = in[i].i = 0;
  TestFft("Zeroes (complex)", in, out);

  for (i = 0; i < N; i++)
    in[i].r = 1, in[i].i = 0;
  TestFft("Ones (complex)", in, out);

  for (i = 0; i < N; i++)
    in[i].r = sin(2 * M_PI * 4 * i / N), in[i].i = 0;
  TestFft("SineWave (complex)", in, out);

  return 0;
} 
```

输出：

```
Zeroes (complex)
 in[ 0] = +0.000000 , +0.000000    out[ 0] = +0.000000 , +0.000000
 in[ 1] = +0.000000 , +0.000000    out[ 1] = +0.000000 , +0.000000
 in[ 2] = +0.000000 , +0.000000    out[ 2] = +0.000000 , +0.000000
 in[ 3] = +0.000000 , +0.000000    out[ 3] = +0.000000 , +0.000000
 in[ 4] = +0.000000 , +0.000000    out[ 4] = +0.000000 , +0.000000
 in[ 5] = +0.000000 , +0.000000    out[ 5] = +0.000000 , +0.000000
 in[ 6] = +0.000000 , +0.000000    out[ 6] = +0.000000 , +0.000000
 in[ 7] = +0.000000 , +0.000000    out[ 7] = +0.000000 , +0.000000
 in[ 8] = +0.000000 , +0.000000    out[ 8] = +0.000000 , +0.000000
 in[ 9] = +0.000000 , +0.000000    out[ 9] = +0.000000 , +0.000000
 in[10] = +0.000000 , +0.000000    out[10] = +0.000000 , +0.000000
 in[11] = +0.000000 , +0.000000    out[11] = +0.000000 , +0.000000
 in[12] = +0.000000 , +0.000000    out[12] = +0.000000 , +0.000000
 in[13] = +0.000000 , +0.000000    out[13] = +0.000000 , +0.000000
 in[14] = +0.000000 , +0.000000    out[14] = +0.000000 , +0.000000
 in[15] = +0.000000 , +0.000000    out[15] = +0.000000 , +0.000000
Ones (complex)
 in[ 0] = +1.000000 , +0.000000    out[ 0] = +16.000000 , +0.000000
 in[ 1] = +1.000000 , +0.000000    out[ 1] = +0.000000 , +0.000000
 in[ 2] = +1.000000 , +0.000000    out[ 2] = +0.000000 , +0.000000
 in[ 3] = +1.000000 , +0.000000    out[ 3] = +0.000000 , +0.000000
 in[ 4] = +1.000000 , +0.000000    out[ 4] = +0.000000 , +0.000000
 in[ 5] = +1.000000 , +0.000000    out[ 5] = +0.000000 , +0.000000
 in[ 6] = +1.000000 , +0.000000    out[ 6] = +0.000000 , +0.000000
 in[ 7] = +1.000000 , +0.000000    out[ 7] = +0.000000 , +0.000000
 in[ 8] = +1.000000 , +0.000000    out[ 8] = +0.000000 , +0.000000
 in[ 9] = +1.000000 , +0.000000    out[ 9] = +0.000000 , +0.000000
 in[10] = +1.000000 , +0.000000    out[10] = +0.000000 , +0.000000
 in[11] = +1.000000 , +0.000000    out[11] = +0.000000 , +0.000000
 in[12] = +1.000000 , +0.000000    out[12] = +0.000000 , +0.000000
 in[13] = +1.000000 , +0.000000    out[13] = +0.000000 , +0.000000
 in[14] = +1.000000 , +0.000000    out[14] = +0.000000 , +0.000000
 in[15] = +1.000000 , +0.000000    out[15] = +0.000000 , +0.000000
SineWave (complex)
 in[ 0] = +0.000000 , +0.000000    out[ 0] = +0.000000 , +0.000000
 in[ 1] = +1.000000 , +0.000000    out[ 1] = +0.000000 , +0.000000
 in[ 2] = +0.000000 , +0.000000    out[ 2] = +0.000000 , +0.000000
 in[ 3] = -1.000000 , +0.000000    out[ 3] = +0.000000 , +0.000000
 in[ 4] = +0.000000 , +0.000000    out[ 4] = +0.000000 , -8.000000
 in[ 5] = +1.000000 , +0.000000    out[ 5] = +0.000000 , +0.000000
 in[ 6] = +0.000000 , +0.000000    out[ 6] = +0.000000 , +0.000000
 in[ 7] = -1.000000 , +0.000000    out[ 7] = +0.000000 , +0.000000
 in[ 8] = +0.000000 , +0.000000    out[ 8] = +0.000000 , +0.000000
 in[ 9] = +1.000000 , +0.000000    out[ 9] = +0.000000 , +0.000000
 in[10] = +0.000000 , +0.000000    out[10] = +0.000000 , +0.000000
 in[11] = -1.000000 , +0.000000    out[11] = +0.000000 , +0.000000
 in[12] = +0.000000 , +0.000000    out[12] = +0.000000 , +8.000000
 in[13] = +1.000000 , +0.000000    out[13] = +0.000000 , +0.000000
 in[14] = +0.000000 , +0.000000    out[14] = +0.000000 , +0.000000
 in[15] = -1.000000 , +0.000000    out[15] = +0.000000 , +0.000000 
```

带有浮点数的实值正向 FFT：

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include "kiss_fftr.h"

#ifndef M_PI
#define M_PI 3.14159265358979324
#endif

#define N 16

void TestFftReal(const char* title, const kiss_fft_scalar in[N], kiss_fft_cpx out[N / 2 + 1])
{
  kiss_fftr_cfg cfg;

  printf("%s\n", title);

  if ((cfg = kiss_fftr_alloc(N, 0/*is_inverse_fft*/, NULL, NULL)) != NULL)
  {
    size_t i;

    kiss_fftr(cfg, in, out);
    free(cfg);

    for (i = 0; i < N; i++)
    {
      printf(" in[%2zu] = %+f    ",
             i, in[i]);
      if (i < N / 2 + 1)
        printf("out[%2zu] = %+f , %+f",
               i, out[i].r, out[i].i);
      printf("\n");
    }
  }
  else
  {
    printf("not enough memory?\n");
    exit(-1);
  }
}

int main(void)
{
  kiss_fft_scalar in[N];
  kiss_fft_cpx out[N / 2 + 1];
  size_t i;

  for (i = 0; i < N; i++)
    in[i] = 0;
  TestFftReal("Zeroes (real)", in, out);

  for (i = 0; i < N; i++)
    in[i] = 1;
  TestFftReal("Ones (real)", in, out);

  for (i = 0; i < N; i++)
    in[i] = sin(2 * M_PI * 4 * i / N);
  TestFftReal("SineWave (real)", in, out);

  return 0;
} 
```

输出：

```
Zeroes (real)
 in[ 0] = +0.000000    out[ 0] = +0.000000 , +0.000000
 in[ 1] = +0.000000    out[ 1] = +0.000000 , +0.000000
 in[ 2] = +0.000000    out[ 2] = +0.000000 , +0.000000
 in[ 3] = +0.000000    out[ 3] = +0.000000 , +0.000000
 in[ 4] = +0.000000    out[ 4] = +0.000000 , +0.000000
 in[ 5] = +0.000000    out[ 5] = +0.000000 , +0.000000
 in[ 6] = +0.000000    out[ 6] = +0.000000 , +0.000000
 in[ 7] = +0.000000    out[ 7] = +0.000000 , +0.000000
 in[ 8] = +0.000000    out[ 8] = +0.000000 , +0.000000
 in[ 9] = +0.000000    
 in[10] = +0.000000    
 in[11] = +0.000000    
 in[12] = +0.000000    
 in[13] = +0.000000    
 in[14] = +0.000000    
 in[15] = +0.000000    
Ones (real)
 in[ 0] = +1.000000    out[ 0] = +16.000000 , +0.000000
 in[ 1] = +1.000000    out[ 1] = +0.000000 , +0.000000
 in[ 2] = +1.000000    out[ 2] = +0.000000 , +0.000000
 in[ 3] = +1.000000    out[ 3] = +0.000000 , +0.000000
 in[ 4] = +1.000000    out[ 4] = +0.000000 , +0.000000
 in[ 5] = +1.000000    out[ 5] = +0.000000 , +0.000000
 in[ 6] = +1.000000    out[ 6] = +0.000000 , +0.000000
 in[ 7] = +1.000000    out[ 7] = +0.000000 , +0.000000
 in[ 8] = +1.000000    out[ 8] = +0.000000 , +0.000000
 in[ 9] = +1.000000    
 in[10] = +1.000000    
 in[11] = +1.000000    
 in[12] = +1.000000    
 in[13] = +1.000000    
 in[14] = +1.000000    
 in[15] = +1.000000    
SineWave (real)
 in[ 0] = +0.000000    out[ 0] = +0.000000 , +0.000000
 in[ 1] = +1.000000    out[ 1] = +0.000000 , +0.000000
 in[ 2] = +0.000000    out[ 2] = +0.000000 , +0.000000
 in[ 3] = -1.000000    out[ 3] = +0.000000 , +0.000000
 in[ 4] = +0.000000    out[ 4] = +0.000000 , -8.000000
 in[ 5] = +1.000000    out[ 5] = +0.000000 , +0.000000
 in[ 6] = +0.000000    out[ 6] = +0.000000 , +0.000000
 in[ 7] = -1.000000    out[ 7] = +0.000000 , +0.000000
 in[ 8] = +0.000000    out[ 8] = +0.000000 , +0.000000
 in[ 9] = +1.000000    
 in[10] = +0.000000    
 in[11] = -1.000000    
 in[12] = +0.000000    
 in[13] = +1.000000    
 in[14] = +0.000000    
 in[15] = -1.000000 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-28T02:33:59.693

当我第一次开始查看这个答案时，我一直想知道为什么 -8.0 出现在虚数部分而不是实数部分。在重新阅读有关 FFT 的印刷文章时，我意识到我一直在考虑幅度。

所以我调整了复杂代码中的答案以更改 printf 如下

```
for (i = 0; i < N; i++)
    printf(" in[%02i]=%+f, %+f  out[%02i]=%+f, %+f M[%02i]=%+f\n",
         i, in[i].r, in[i].i,
         i, out[i].r, out[i].i,
         i, sqrt((out[i].r * out[i].r) + (out[i].i * out[i].i))); 
```

这也产生了一个显示幅度的答案。

```
...
SineWave (complex)
 in[00]=+0.000000, +0.000000  out[00]=+0.000000, +0.000000 M[00]=+0.000000
 in[01]=+1.000000, +0.000000  out[01]=+0.000000, +0.000000 M[01]=+0.000000
 in[02]=+0.000000, +0.000000  out[02]=+0.000000, +0.000000 M[02]=+0.000000
 in[03]=-1.000000, +0.000000  out[03]=+0.000000, +0.000000 M[03]=+0.000000
 in[04]=-0.000000, +0.000000  out[04]=-0.000000, -8.000000 M[04]=+8.000000
 in[05]=+1.000000, +0.000000  out[05]=+0.000000, -0.000000 M[05]=+0.000000
 in[06]=+0.000000, +0.000000  out[06]=+0.000000, -0.000000 M[06]=+0.000000
 in[07]=-1.000000, +0.000000  out[07]=+0.000000, -0.000000 M[07]=+0.000000
 in[08]=-0.000000, +0.000000  out[08]=+0.000000, +0.000000 M[08]=+0.000000
 in[09]=+1.000000, +0.000000  out[09]=+0.000000, +0.000000 M[09]=+0.000000
 in[10]=+0.000000, +0.000000  out[10]=+0.000000, +0.000000 M[10]=+0.000000
 in[11]=-1.000000, +0.000000  out[11]=+0.000000, +0.000000 M[11]=+0.000000
 in[12]=-0.000000, +0.000000  out[12]=-0.000000, +8.000000 M[12]=+8.000000
 in[13]=+1.000000, +0.000000  out[13]=+0.000000, -0.000000 M[13]=+0.000000
 in[14]=+0.000000, +0.000000  out[14]=+0.000000, -0.000000 M[14]=+0.000000
 in[15]=-1.000000, +0.000000  out[15]=+0.000000, -0.000000 M[15]=+0.000000 
```

我还尝试改变生成正弦波的 for 循环中的频率。

```
float freq;
...
freq = 6.0;
for (i = 0; i < N; i++)
    in[i].r = sin(2 * M_PI * freq * i / N), in[i].i = 0; 
```

只要我保持 1.0 的倍数并且在奈奎斯特频率 16/2 = 8 下，结果从 bin 到 bin 的变化非常好。当然，将频率设置为小数值会看到其幅度分布在各个 bin 中，并且在不应用窗口函数的情况下，我们会得到泄漏。如果你还在为 FFT 苦苦挣扎，就像我在玩这样的代码，你可以在一个屏幕上看到所有结果一段时间，事情开始变得更加清晰。

最后感谢 Alexey 的回答，它帮助我开始使用 Kiss FFT。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-11-05T10:52:47.073

试试这个：

```
in[i].r = sin(2 * M_PI * freq * (i / N*1.00)), in[i].i = 0; 
```

# android - 我如何将来电电话号码传递给主要活动？

> ID：14536952
> 
> 赞同：-1
> 
> 时间：2013-01-26T12:29:50.033
> 
> 标签：android, android-intent, broadcastreceiver

我创建了一个简单的应用程序来获取来电号码，工作并向我显示带有 toast 的号码，但我想将此变量传递给我的主要活动进行处理...示例在呼叫管理员号码时发送短信。我尝试此代码但没有数据显示在我的用户界面中...有什么想法吗？对此有帮助吗？

```
 public class IncomingCallReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
            Bundle bundle = intent.getExtras();

            if(null == bundle)
                    return;

            Log.i("IncomingCallReceiver",bundle.toString());

            String state = bundle.getString(TelephonyManager.EXTRA_STATE);

            Log.i("IncomingCallReceiver","State: "+ state);

            if(state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_RINGING))
            {
                    String phonenumber = bundle.getString(TelephonyManager.EXTRA_INCOMING_NUMBER);

                    Log.i("IncomingCallReceiver","Incomng Number: " + phonenumber);

                    String info = "Detect Calls sample application\nIncoming number: " + phonenumber;

                    Intent intentsend=new Intent("update");//Send data to update UI
                    intentsend.putExtra( "data","Admin call..."+info);
                    context.sendBroadcast(intentsend);

                    Toast.makeText(context, info, Toast.LENGTH_LONG).show();
            } 
```

我的主要活动是......

```
 @Override
public void onResume() {
    super.onResume();

     updateReceiver=new BroadcastReceiver() {
          @Override
          public void onReceive(Context context, Intent intentsend) {
              //get extras, do some stuff
            String data = intentsend.getStringExtra("data");

            textphone.setText(data);

          }
      };
      IntentFilter updateIntentFilter=new IntentFilter("update");
      registerReceiver(updateReceiver, updateIntentFilter);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T12:45:56.510

我认为当电话响起时您的活动不可见，因为电话应用程序已弹出并且您的活动处于暂停状态。

您不能在接收器内部执行逻辑吗？或者可能在服务内？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:47:23.503

1）将此接收器声明为您活动的内部类。如下所示，如果 onReceive 获得相同的意图你正在广播，还添加一个条件

```
 class  updateReceiver extends BroadcastReceiver() {
          @Override
          public void onReceive(Context context, Intent intentsend) {
              //get extras, do some stuff
            String data = intentsend.getStringExtra("data");

            textphone.setText(data);

          }
      }; 
```

# maven - Maven 版本：set 不更新子模块

> ID：14536961
> 
> 赞同：17
> 
> 时间：2013-01-26T12:31:13.183
> 
> 标签：maven

在终于厌倦了 maven 发布插件后，我决定转向更简单的东西。

我有一个项目，有几个模块。

当我做

```
mvn versions:set -DnewVersion=1.0.2-SNAPSHOT 
```

它只是更改父模块并跳过所有子模块？

我究竟做错了什么？我还需要设置另一个参数吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-08-06T17:26:48.420

我有引用外部父母的子模块的同样问题。

如果孩子的父母版本与父母的本地版本匹配，那么它会更新父母和孩子的版本（它可能会说跳过但仍然有效，奇怪的是）。如果它们不匹配，那么它似乎只更新父版本并更新子代以指向新的父代，它根本不会改变子代的版本。

最后我发现通配符可以解决这个问题（需要一个新版本的版本插件）：

```
mvn org.codehaus.mojo:versions-maven-plugin:2.2:set -DnewVersion=1.5.0a   -DartifactId=*  -DgroupId=* 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-02-07T10:40:39.880

或者，您也可以使用[processAllModules](http://www.mojohaus.org/versions-maven-plugin/set-mojo.html#processAllModules)参数。

```
$ mvn versions:set -DnewVersion=2.0.0 -DprocessAllModules 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-11T19:56:11.057

如果您像我一样的项目的子模块与父模块的版本不匹配，另一种选择是先调整它们以匹配：

```
$ mvn versions:update-child-modules 
```

然后版本：设置（和版本：替换快照等）现在将按预期工作，而不需要更新版本的插件:)

```
$ mvn versions:set -DnewVersion=1.0.2-SNAPSHOT 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-23T09:27:58.827

我假设你的项目结构是这样的：

```
parent/pom.xml
child/pom.xml 
```

然后你必须`mvn versions:set -DnewVersion=1.0.2-SNAPSHOT`从`parent/`目录运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T10:56:51.517

可能是因为你没有在插件管理的父 pom 中声明插件。如果你想将插件传播给你必须在插件管理部分声明的孩子。

请参阅：[http ://maven.apache.org/pom.html#Plugin_Management](http://maven.apache.org/pom.html#Plugin_Management)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-19T16:31:08.540

我最终运行 mvn -X 发现我的一个子 pom 以 UTF-8 BOM 编码保存：

[调试] 无法解析 child-project\pom.xml java.io.IOException：在 org.codehaus 中仅允许在开始标记之前使用空白内容，而不是 \uef（位置：START_DOCUMENT 看到 \uef...@1:1）。 mojo.versions.api.PomHelper.getRawModel (PomHelper.java:116)

异常在调试日志中“隐藏”。

我使用 UTF-8 编码重新保存它，它工作。

（遇到 Maven 3.5.4 / Versions-Maven-Plugin 2.7）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-18T21:24:02.410

如果有人在寻找答案，下面的命令对我来说就像一个魅力

```
mvn release:update-versions -DdevelopmentVersion=4.4.0-SNAPSHOT 
```

# java - 如何限制在 SAX 解析器处理程序类中调用“startElement()”的次数？

> ID：14536969
> 
> 赞同：0
> 
> 时间：2013-01-26T12:31:49.423
> 
> 标签：java, xml, sax

我使用 SAX 解析 XML 并从中获取元素数量。

在 XML 中，存在`<item>`标签次数（容易 > 50）。但我只想获取前 20 个。

调用 XMLHanlder 的代码：

```
XMLHandler handler = new XMLHandler();
xmlReader.setContentHandler(handler);
xmlReader.parse(new InputSource(in)); 
```

XMLHandler 的代码：

```
public class XMLHanlder extends DefaultHandler {

    @Override
    public void startDocument() throws SAXException {
    ...
    }

    @Override
    public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
    ...
    }

    @Override
    public void endElement(String uri, String localName, String qName)
        throws SAXException {
    ...
    }

    @Override
    public void characters(char[] ch, int start, int length) throws SAXException {
    ...
    }
} 
```

有什么方法`startElement()/endElement()`不会被调用超过 20 次。

如果没有，是否有任何解决方法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T12:35:49.997

`SAX`不提供任何此类功能。一种解决方法是简单地使用计数器：

```
public class XMLHandler extends DefaultHandler {

   private int counter = 0;

   @Override
   public void startElement(String uri, String localName, String qName,
                                       Attributes attributes) throws SAXException {

      if (counter < 20) {
            ...
      } else {
         return;
      }
    }

   @Override
   public void endElement(String uri, String localName, String qName)
                                                    throws SAXException {
      counter++;
      ....
   }
   ...
} 
```

此处可选的是对计数器值的显式分配`0`（默认情况下将采用该值）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T15:33:18.647

按照其他人的建议添加一个计数器。但是您可以通过从 ContentHandler 中抛出 SAXException 来中止解析。这将被传递回调用 parse() 的应用程序，该应用程序可以捕获异常，检查它以将其与真正的解析错误区分开来，然后正常继续。

# php - 如何获取 HTML 表单以从 Mysql 数据库中查询和生成结果

> ID：14536984
> 
> 赞同：5
> 
> 时间：2013-01-26T12:34:17.203
> 
> 标签：php, mysql, database, forms

我创建了一个包含一个文本字段和一个选择框的表单，我还创建了一个按钮。现在我想要发生的是当按下按钮时，我希望表单中的字符串与我的数据库匹配，然后我希望返回这些匹配的结果并显示在屏幕上。

例如，如果我要在我的文本字段框中输入“历史”，并且当按下按钮（提交按钮）时，我还从选择框中选择了“级别 2”，我希望在页面上返回与单词匹配的所有内容历史和我数据库中第 2 级的选择。

我知道我必须通过 PHP 将我的页面与我的数据库连接起来，并且我已经成功地做到了，但我不明白的是如何让我的 HTML 表单查询数据库并将结果返回到屏幕上

就与我想创建的概念非常相似的示例网站而言，请查看此网页。[http://search.ucas.com/cgi-bin/hsrun/search/search/search.hjx;start=search.HsSearch.run?y=2013&w=H](http://search.ucas.com/cgi-bin/hsrun/search/search/search.hjx;start=search.HsSearch.run?y=2013&w=H) (UCAS Course Search) 这个网站有多个文本字段并选择框和提交按钮与我尝试创建的完全一样，并且提供的结果只是与搜索结果匹配的结果。

下面的代码将我的文本字段链接到我的数据库，但我无法让我的文本字段和我的选择框链接和查询数据库，只有一个或另一个。我希望他们都使用同一个按钮（搜索按钮）

```
<form  method="post" action="Webpage here"  id="searchform">
  <input  type="text" name="name">
  <input  type="submit" name="submit" value="Search">
</form>
<form id="form1" name="ExamBoard" method="post" action="Webpage here">
  <label for="select"></label>
  <select name="ExamBoard" id="select">
    <option value="EB1" selected="selected">EB1</option>
    <option value="EB2">EB2</option>
    <option value="EB3">EB3</option>
  </select>
  <input  type="submit" name="submit" value="Search">
</form>
<p>&nbsp;</p>
<p>
<?php
 if(isset($_POST['submit'])){
 if(isset($_GET['go'])){
 if(preg_match("/^[  a-zA-Z]+/", $_POST['name'])){
 $name=$_POST['name'];
  //connect  to the database
 $db=mysql_connect  ("Name", "User",  "Password*") or die ('I cannot connect to the      database  because: ' . mysql_error());
 //-select  the database to use
 $mydb=mysql_select_db("Table Name");
  //-query  the database table
  $sql="SELECT  ID, CourseName, ExamBoard FROM subjects WHERE CourseName LIKE '%" . $name .  "%' ";
   //-run  the query against the mysql query function
   $result=mysql_query($sql);
    //-create  while loop and loop through result set
    while($row=mysql_fetch_array($result)){
      $CourseName  =$row['CourseName'];
      $ID=$row['ID'];
      $ExamBoard=$row['ExamBoard'];
  //-display the result of the array
  echo "<ul>\n";
  echo "<li>" . "<a  href=\"search.php?id=$ID\">"   .$CourseName . " " .  "</a></li>\n" ;
  echo  $ExamBoard . " " .  "</a>\n";
  echo "</ul>";
  }
  }
  }
  }
  ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T13:28:41.830

New HTML File

newHTML.htm

```
<form  method="post" action="Webpage here"  id="searchform">
  <input  type="text" name="name">
  <input  type="submit" name="submit" value="Search">
</form 
```

New PHP file

newPHP.pfp

```
<?php
 if(preg_match("/^[  a-zA-Z]+/", $_REQUEST['name'])){
 $name=$_REQUEST['name'];
  //connect  to the database
 $db=mysql_connect  ("Name", "User",  "Password*") or die ('I cannot connect to the      database  because: ' . mysql_error());
 //-select  the database to use
 $mydb=mysql_select_db("Table Name");
  //-query  the database table
  $sql="SELECT  ID, CourseName, ExamBoard FROM subjects WHERE CourseName LIKE '%" . $name .  "%' ";
   //-run  the query against the mysql query function
   $result=mysql_query($sql);
    //-create  while loop and loop through result set
    while($row=mysql_fetch_array($result)){
      $CourseName  =$row['CourseName'];
      $ID=$row['ID'];
      $ExamBoard=$row['ExamBoard'];
  //-display the result of the array
  echo "<ul>\n";
  echo "<li>" . "<a  href=\"search.php?id=$ID\">"   .$CourseName . " " .  "</a></li>\n" ;
  echo  $ExamBoard . " " .  "</a>\n";
  echo "</ul>";
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:40:16.503

你必须问自己你想用 AJAX 还是正常的屏幕刷新来做这个。

正常屏幕刷新（最简单的方法）

将您的 HTML 放入一个文件 (HTMLfile.html) 将您的 PHP 放入另一个文件 (PHPCode.php)

HTML 文件表单从 action 属性调用 PHP 脚本。

PHP 文件呈现响应。

不要混搭视图和控制应用程序。

如果您想使用 AJAX，还有其他方法可以在一个脚本中执行此操作。

# javascript - 我正在尝试将变量分配给复选框，并在选中时将该变量添加到输出变量

> ID：14536985
> 
> 赞同：2
> 
> 时间：2013-01-26T12:34:45.813
> 
> 标签：javascript, jquery, checkbox

我对 Javascript 很陌生，如果有任何帮助，我将不胜感激！如果有任何改变，我也在使用 jQuery 库。

我需要的是，如果第一个`checkbox`被勾选，输出应该是 100kcal，而如果两个都被勾选，那么它应该加起来 300kcal。我的问题是，当我取消选中它时，它会再次添加变量。

HTML：

```
<input type=checkbox onchange="myFunction(100)" value="scrambledEggs">Scrambled Eggs</input>
<input type=checkbox onchange="myFunction(200)" value="bacon">Bacon</input>
<p id="output">0kcal</p> 
```

JS：

```
var result = 0;    
function myFunction(x) {    
    if (this.checked) {    
        result -= x;   
        document.getElementById("output").innerHTML = result + "kcal";    
    } 
    else {
        result += x;
        document.getElementById("output").innerHTML = result + "kcal";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T12:41:11.767

首先，如果您使用 jQuery，您应该使用它来附加事件处理程序而不是`onchange`属性。其次，`input`标签是自动关闭的——您当前的 HTML 无效。最后，您可以使用`data`属性来存储选项的 kcal 值：

```
<label><input type="checkbox" class="food-option" data-kcals="100" value="scrambledEggs" />Scrambled Eggs</label>
<label><input type="checkbox" class="food-option" data-kcals="200" value="bacon" />Bacon</label>
<p id="output"><span>0</span>kcal</p> 
```

然后，您可以使用 jQuery 附加事件并汇总所有检查的值并显示它们：

```
$('.food-option').change(function() {
    var totalKcals = 0;
    $('.food-option:checked').each(function() {
       totalKcals += parseInt($(this).data('kcals'), 10); 
    });
    $('#output span').text(totalKcals);
}); 
```

[**示例小提琴**](http://jsfiddle.net/sd5jm/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-26T12:49:17.040

在您的情况下，您可以使用以下代码：

**HTML**

```
<input type="checkbox" value="scrambledEggs" data-kcal="100">scrambledEggs</input>
<input type="checkbox" value="bacon" data-kcal="200">bacon</input>
<p id="output"> 0 kcal</p> 
```

它有`data-kcal`标签，它是您的千卡值的容器。

**JS**

```
var result = 0;

$('input[type="checkbox"]').on("change", function() {
    if($(this).attr('checked'))
    {
        result += parseInt($(this).attr("data-kcal"));
    }else{
        result -= ($(this).attr("data-kcal"));
    }
    $("#output").text(result + " kcal");
}); 
```

您还可以检查它在[这个 jsFiddle](http://jsfiddle.net/tujrG/)上的工作方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T13:03:27.270

您的 HTML 应如下所示

```
<input type='checkbox' value="100">Scrambled Eggs  </input>
<input type='checkbox' value="200"> Bacon </input>
<p id="output">0kcal </p> 
```

那么你最好使用 JQuery，编写更少的代码，提高可读性。下面的代码将满足您的需求。

```
$('input[type=checkbox]').change(function (e) { //This will trigger every check/uncheck event for any input of type CheckBox.
    var res = 0;
    $('input[type=checkbox]:checked').each(function() { //Loop through every checked checkbox.
       res += parseInt($(this).val());  //Sum it's value.
    });
    $('#output').text(res); //Add the final result to your span.
}); 
```

**[演示](http://jsfiddle.net/hqHdr/1/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T12:45:39.973

将被点击的元素传递给函数...

**HTML**

```
<input type=checkbox onchange="myFunction(this, 200)" value="bacon">Bacon</input> 
```

**JAVASCRIPT**

```
function myFunction(element, value) {
    console.log(element.checked);
} 
```

查看此[JSFiddle](http://jsfiddle.net/ErNDC/1/)以获取演示。

* * *

更好的方法是这样的......

**HTML**

```
<div id="checkboxes">
    <input type=checkbox value="bacon">Bacon</input>
    <input type=checkbox value="Other">Other</input>
</div>
<p id="output">0kcal</p> 
```

**JAVASCRIPT**

```
var checkboxes = document.getElementById("checkboxes");

checkboxes.onchange = function (e) {
    alert("Target: " +  e.target.value + " Checked: " + e.target.checked);
}; 
```

请参阅此[小提琴](http://jsfiddle.net/ErNDC/2/)以进行演示。

# c++ - c ++如何使用引用计数管理对象缓存

> ID：14536988
> 
> 赞同：0
> 
> 时间：2013-01-26T12:35:12.473
> 
> 标签：c++, shared-ptr, smart-pointers

我的程序将创建和删除很多对象（来自 REST API）。这些对象将被多个地方引用。我想要一个“内存缓存”并通过引用计数来管理对象的生命周期，以便在不再使用它们时可以释放它们。

所有对象都继承自一个基类`Ressource`。

主要`Cache`是一个`std::map<_key_, std::shared_ptr<Ressource> >`

然后我很困惑，怎么`Cache`知道`Ressource`引用计数何时减少？IE。调用`std::shared_ptr destructor`or `operator=`。

1/ 我不想遍历 std::map 并检查每个 ref.count()。

2/ 我可以重用 std::shared_ptr 并实现自定义钩子吗？

```
class RessourcePtr : public std::shared_ptr<Ressource>
... 
```

3/ 我应该实现自己的引用计数类吗？前任。[https://stackoverflow.com/a/4910158/1058117](https://stackoverflow.com/a/4910158/1058117)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:50:16.967

您可以将 a`map<Key, weak_ptr<Resource> >`用于您的字典。

它的工作原理大致如下：

```
map<Key, weak_ptr<Resource> > _cache;

shared_ptr<Resource> Get(const Key& key)
{
    auto& wp = _cache[key];
    shared_ptr<Resource> sp; // need to be outside of the "if" scope to avoid
                             // releasing the resource
    if (wp.expired()) {
        sp = Load(key); // actually creates the resource
        wp = sp;
    }

    return wp.lock();
} 
```

当所有`shared_ptr`返回`Get`的对象都被销毁时，对象将被释放。缺点是，如果您使用一个对象然后立即销毁共享指针，那么您并没有真正使用缓存，正如@pmr 在他的评论中所建议的那样。

编辑：您可能知道，此解决方案不是线程安全的，您需要锁定对`map`对象的访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T12:52:37.900

[make shared_ptr not use delete](https://stackoverflow.com/questions/441306/make-shared-ptr-not-use-delete)展示了如何为共享指针提供自定义删除功能。

如果您想要使用客户函数进行引用添加和删除，您也可以使用侵入式指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T13:06:01.480

问题是，在您的场景中，池将保持每个引用都处于活动状态。这是一个从引用计数为 1 的池中删除资源的解决方案。问题是，何时修剪池。此解决方案将在每次调用`get`. 这样，“再次发布并获取”之类的场景将很快。

```
#include <memory>
#include <map>
#include <string>
#include <iostream>

struct resource {

};

class pool {
public:
  std::shared_ptr<resource> get(const std::string& x) 
  {
    auto it = cache_.find(x);
    std::shared_ptr<resource> ret;

    if(it == end(cache_))
      ret = cache_[x] = std::make_shared<resource>();
    else {
      ret = it->second;
    }
    prune();

    return ret;
  }

  std::size_t prune() 
  {
    std::size_t count = 0;
    for(auto it = begin(cache_); it != end(cache_);)
    {
      if(it->second.use_count() == 1) {
        cache_.erase(it++);
        ++count;
      } else {
        ++it;
      }
    }
    return count;
  }

  std::size_t size() const { return cache_.size(); }

private:
  std::map<std::string, std::shared_ptr<resource>> cache_;
};

int main()
{
  pool c;
  {
    auto fb = c.get("foobar");
    auto fb2 = c.get("foobar");
    std::cout << fb.use_count() << std::endl;
    std::cout << "pool size: " << c.size() << std::endl;
  }
  auto fb3 = c.get("bar");
  std::cout << fb3.use_count() << std::endl;
  std::cout << "pool size: " << c.size() << std::endl;
  return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T12:54:13.247

你不想要一个缓存你想要一个池。特别是对象池。您的主要问题不是如何实现引用计数，shared_ptr 已经为您做到了。当不再需要某个资源时，您只需将其从缓存中删除即可。您的主要问题将是由于不断分配/删除导致的内存碎片以及由于全局内存分配器中的争用而导致的缓慢。查看线程特定的内存池实现以获得答案。

# python - 如何在 Python 中接收 Github Webhooks

> ID：14536992
> 
> 赞同：40
> 
> 时间：2013-01-26T12:36:24.600
> 
> 标签：python, github, post, webhooks

当您的 repo 有活动时， Github 提供将[Post-receive 挂钩](https://help.github.com/articles/post-receive-hooks)发送到您选择的 URL。我想编写一个在我的计算机（后来在 NAS 上）上运行的**小型**Python 命令行/背景（即没有 GUI 或 webapp）应用程序，它不断**侦听**那些传入的 POST 请求，一旦从 Github**接收**到 POST，它处理其中包含的 JSON 信息。一有json就处理它是没有问题的。POST可以来自github给出的少量IP；我计划/希望在我的计算机上指定一个应该发送的端口。

问题是，我对 Web 技术的了解不够，无法处理您在搜索时发现的大量选项。我是否使用 Django、请求、套接字、Flask、微框架......？我不知道所涉及的大多数术语是什么意思，而且大多数听起来好像它们提供了太多/太大而无法解决我的问题 - 我只是不知所措，不知道从哪里开始。

我能找到的大多数关于 POST/GET 的教程似乎都关注从网站发送或直接请求数据，而不是持续监听它。

我觉得这个问题并不难，一旦我知道去哪里/怎么做，就会归结为几行。任何人都可以提供指针/教程/示例/示例代码吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-27T18:43:26.203

首先，Web 是基于请求-响应的。所以有些东西会请求你的链接，你会做出相应的回应。您的服务器应用程序将持续监听端口；您不必担心。

这是[`Flask`](https://flask.readthedocs.org/en/latest/)（我选择的微框架）中的类似版本：

```
from flask import Flask, request
import json

app = Flask(__name__)

@app.route('/',methods=['POST'])
def foo():
   data = json.loads(request.data)
   print "New commit by: {}".format(data['commits'][0]['author']['name'])
   return "OK"

if __name__ == '__main__':
   app.run() 
```

这是一个示例运行，使用[来自 github 的示例](https://developer.github.com/webhooks/)：

运行服务器（以上代码保存在 中`sample.py`）：

```
burhan@lenux:~$ python sample.py 
 * Running on http://127.0.0.1:5000/ 
```

这是对服务器的请求，基本上github会做什么：

```
burhan@lenux:~$ http POST http://127.0.0.1:5000 < sample.json
HTTP/1.0 200 OK
Content-Length: 2
Content-Type: text/html; charset=utf-8
Date: Sun, 27 Jan 2013 19:07:56 GMT
Server: Werkzeug/0.8.3 Python/2.7.3

OK # <-- this is the response the client gets 
```

这是服务器上的输出：

```
New commit by: Chris Wanstrath
127.0.0.1 - - [27/Jan/2013 22:07:56] "POST / HTTP/1.1" 200 - 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-27T18:27:02.903

这是一个基本的 web.py 示例，用于通过 POST 接收数据并对其进行处理（在这种情况下，只需将其打印到标准输出）：

```
import web

urls = ('/.*', 'hooks')

app = web.application(urls, globals())

class hooks:
    def POST(self):
        data = web.data()
        print
        print 'DATA RECEIVED:'
        print data
        print
        return 'OK'

if __name__ == '__main__':
    app.run() 
```

我使用[hurl.it](http://www.hurl.it/)向它发布了一些数据（在我的路由器上转发 8080 之后），并看到以下输出：

```
$ python hooks.py 
http://0.0.0.0:8080/

DATA RECEIVED: 
test=thisisatest&test2=25

50.19.170.198:33407 - - [27/Jan/2013 10:18:37] "HTTP/1.1 POST /hooks" - 200 OK 
```

您应该能够为 JSON 处理换出打印语句。

要指定端口号，请使用额外参数调用脚本：

```
$ python hooks.py 1234 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-13T00:25:52.430

我会使用：

[https://github.com/carlos-jenkins/python-github-webhooks](https://github.com/carlos-jenkins/python-github-webhooks)

您可以配置一个 Web 服务器来使用它，或者如果您只需要在没有 Web 服务器的情况下运行一个进程，您可以启动集成服务器：

```
python webhooks.py 
```

这将允许你做你说你需要的一切。然而，它需要在您的存储库和挂钩中进行一些设置。

晚会和无耻的自动促销，对不起。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-20T08:28:45.317

如果您使用的是**Flask**，这里有一个非常简单的代码来监听 webhook：

```
from flask import Flask, request, Response

app = Flask(__name__)

@app.route('/webhook', methods=['POST'])
def respond():
    print(request.json) # Handle webhook request here
    return Response(status=200) 
```

**以及使用Django**的相同示例：

```
from django.http import HttpResponse
from django.views.decorators.http import require_POST

@require_POST
def example(request):
    print(request.json) # Handle webhook request here
    return HttpResponse('Hello, world. This is the webhook response.') 
```

如果您需要更多信息，这里有一个关于[如何使用 Python 监听 webhook](https://blog.bearer.sh/consume-webhooks-with-python/)的精彩教程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-06T19:49:08.070

如果您正在寻找任何回购中的变化......

### **1.**如果你`own`是你想看的repo

*   在您的回购页面中，转到设置
*   点击 webhook，新建 webhook（右上角）
*   给它你的 ip/endpoint 并根据你的喜好设置一切
*   使用任何服务器来获得通知

### 2\. 不是你的回购

*   取你想要的网址，即[https://github.com/fire17/gd-xo/](https://github.com/fire17/gd-xo/)

*   将***/commits/master.atom***添加到末尾，例如：

    [https://github.com/fire17/gd-xo/commits/master.atom](https://github.com/fire17/gd-xo/commits/master.atom)

*   使用您想要获取该页面内容的任何库，例如：

*   过滤掉你想要的键，例如元素

> ```
> response = requests.get("https://github.com/fire17/gd-xo/commits/master.atom").text
> response.split("<updated>")[1].split("</updated>")[0]
> '2021-08-06T19:01:53Z' 
> ```

*   做一个循环，每隔一段时间检查一次，如果这个字符串发生了变化，那么你可以发起一个克隆/拉取请求或做任何你喜欢的事情

# django-templates - 在模板中搜索的 haystack url

> ID：14536996
> 
> 赞同：1
> 
> 时间：2013-01-26T12:37:03.000
> 
> 标签：django-templates, django-haystack

我想这可能是一个简单的，

我已经安装了带有 whoosh 后端的 haystack。按照教程进行操作，一切正常。

现在我正在尝试创建**从其他模板到搜索 url 的链接**。而且我不知道该怎么做。

我的搜索网址是：

```
url(r'^search/', include('haystack.urls')), 
```

我想从另一个模板引用它的链接。就像是：

```
<a href={% search url %}> 
```

我正在使用 Django 1.3.5 和 Haystack 1.2.7

帮助将不胜感激。干杯

一个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:58:59.833

好的，所以找到了我自己的问题的解决方案。

在 url 声明中，如果我使用可选名称，我可以使用它来引用搜索 url。

在 urls.py 中：

```
url(r'^search/', include('haystack.urls'), name='haystack_search') 
```

在模板中：

```
<a ref={% url haystack_search %}>search page</a> 
```