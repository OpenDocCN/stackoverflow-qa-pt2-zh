# StackOverflow 问答 13102000-13102999

# java - 使用 git 将项目放入存储库

> ID：13102000
> 
> 赞同：2
> 
> 时间：2012-10-27T16:32:18.370
> 
> 标签：java, eclipse, git

我在 Eclipse 中的 ProjectDirectory 目录中有一个新项目，其中包含 src、lib 等文件夹。请注意，此项目以前从未与任何存储库进行过通信。

我有一个带有用户名和密码的 git 存储库[https://github.com/myrepo/mygit.git](https://github.com/myrepo/mygit.git)（请注意，这是虚假信息）。在那个存储库中，我目前有一些文件。`user``pass`

我想做以下事情。

1.  删除 git 存储库中的所有当前内容
2.  将我的 Eclipse 项目中的新内容添加到此存储库中。这应该不会导致任何冲突或错误，因为我想用这些文件完全替换当前存储库。

使用特定说明，我将在终端中编写哪组命令来完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T21:38:44.770

它完全简单。首先进入eclipse项目所在的终端目录。

要开始将其置于版本管理之下：

```
git init 
```

然后将源添加为 git repo（从 gi​​thub 复制您的 ssh 读+写访问权限，当您在 github 上登录并导航到实际的存储库目录时会看到）：

```
git remote add origin <copied_adress_from_github> 
```

因此，现在在最后一步中，您需要使用以下命令覆盖强制远程存储库：

```
git push -f origin master 
```

您可以开始提交、创建分支等...但是，如果在远程存储库中有其他分支，您想使用以下命令删除它们：

```
git push origin --delete <branch_name> 
```

# java - 如果文件不存在，则创建一个文件

> ID：13102004
> 
> 赞同：1
> 
> 时间：2012-10-27T16:32:39.220
> 
> 标签：java, file, io

在Java中，我们可以通过...创建对文件的引用...

```
File counterFile = new File("countervalue.txt"); 
```

但是如果文件不存在，我们如何创建它呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T16:35:48.650

创建文件的基本方法是调用[`File#createNewFile`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#createNewFile%28%29)方法：

```
File counterFile = new File("countervalue.txt");
try {
    counterFile.createNewFile();
} catch (Exception e) {
    System.out.println("File couldn't been created.");
} 
```

现在，如果您想创建一个新文件并用数据填充它，您可以将 a`FileWriter`和 a`PrintWriter`用于文本文件（假设这是`txt`示例中的扩展名）：

```
File counterFile = new File("countervalue.txt");
PrintWriter pw = null;
try {
    //it will automatically create the file
    pw = new PrintWriter(new FileWriter(counterFile));
    pw.println("Hello world!");
} catch (Exception e) {
    System.out.println("File couldn't been created.");
} finally {
    if (pw != null) {
        pw.flush();
        pw.close();
    }
} 
```

如果您只想将数据附加到文件中，请使用作为第二个参数[`FileWriter(File, boolean)`](http://goo.gl/OTNbJ)传递的构造函数：`true`

```
pw = new PrintWriter(new FileWriter(counterFile, true)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T16:35:40.757

用java轻松完成

```
File counterFile = new File("countervalue.txt");
counterFile.createNewFile(); 
```

# java - 变量的生命周期：引用变为 NULL

> ID：13102008
> 
> 赞同：0
> 
> 时间：2012-10-27T16:32:56.147
> 
> 标签：java, android, singleton, class-design, lifetime

我对变量的生命周期有疑问。

我的 Android 应用程序应该将传感器数据写入文件并将此文件发送到服务器。为此，我创建了一个活动（Main-Activity）和两个服务。一种用于将传感器数据写入文件（传感器服务），另一种用于将文件发送到服务器（上传服务）。该活动有两个切换按钮，用于分别启动/停止这两个服务。

两个服务之间的通信使用列表进行：当带有传感器数据的新文件准备好（具有特定大小）时，文件的名称将附加到列表中。上传服务会无限循环检查列表中是否有新文件并上传它们。

但是这个列表会导致一个问题：当我的应用程序在后台运行并且我在某个时候打开许多其他应用程序时，列表上的引用在 Sensor-Service 中变为 NULL（也可能在 Upload-Service 中）。

该列表在 Main-Activity 中定义：

```
private static LinkedBlockingDeque<String> mFileSendQueue; 
```

并在 Main-Activity 的 onCreate 中初始化：

```
mFileSendQueue = new LinkedBlockingDeque<String>(); 
```

并通过静态方法 setQueue 传递给两个服务（两个服务都包含这样的方法）：

```
public static void setQueue(LinkedBlockingDeque<String> queue) {
    mFileSendQueue = queue;
} 
```

我知道 Activity 可以由 Android 关闭，例如，如果需要空间，但我认为只要至少有一个引用，就不应删除该列表。有人知道我的错误是什么吗？

谢谢阅读

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T18:10:05.360

我建议您的“发件人服务”自行记录。您可以按时间戳命名文件，发件人存储上载的最后一个时间戳。

Android / dalvik vm 似乎在后台一段时间后删除了引用。我已经看到它发生在我的服务中，突然硬件套接字为空等。

# c# - asp.net 中的基本身份验证子目录

> ID：13102010
> 
> 赞同：0
> 
> 时间：2012-10-27T16:33:08.023
> 
> 标签：c#, asp.net, authentication

`http://user@pass:domain.com/folder/`成员可以通过特殊角色访问一个文件夹吗？我用了 ：

```
<system.web>
  <authorization>
    <deny users="?"/>
    <allow roles="Admin"/>
  </authorization>
</system.web> 
```

它重定向到登录页面，但我想如果他们想通过软件下载目标文件夹中的文件可以通过输入用户下载并直接传递而不是通过网络表单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T16:47:41.070

这仅适用于[Basic Authentication](http://en.wikipedia.org/wiki/Basic_access_authentication)。如果您使用表单身份验证，则使用 cookie 跟踪经过身份验证的用户，您不能使用此类 url。

# php - Htaccess 重定向到 https

> ID：13102012
> 
> 赞同：0
> 
> 时间：2012-10-27T16:33:23.910
> 
> 标签：php, apache, .htaccess, https

我正在使用以下 httaccess 内容，强制重写 url 以使用 https 而不是 http

```
RewriteEngine on
RewriteCond %{SERVER_PORT} 80
RewriteRule ^(.*)$ https://www.mydomain.com/$1 [L] 
```

但它总是得到，页面没有正确重定向

```
Firefox has detected that the server is redirecting the request for this address
in a way that will never complete.     
This problem can sometimes be caused by disabling or refusing to accept
cookies. 
```

我使用了许多其他解决方案，但总是得到这个......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T16:54:09.927

试试下面的 .htaccess 代码

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

#uncomment the below two line if you need to append www
# RewriteCond %{HTTP_HOST} !^www\. [NC]
# RewriteRule ^ https://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

RewriteCond %{HTTPS} !=on
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

# jquery - 如何创建切换？

> ID：13102013
> 
> 赞同：0
> 
> 时间：2012-10-27T16:33:41.700
> 
> 标签：jquery, css, toggle

我想创建这个“点击”功能来进行切换。默认情况下，**body**有一个“ **margin: 0px;** ”，所以我想要一个链接来将 Body 的边距从 0px**切换**到右侧 50px。用滑动效果动画过渡会很好！

我有一个简单的代码...

```
 $("a").click(function () {
    $("body").css("margin","0px 0px 0px 50px");
    return false;
   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T16:38:30.793

您可以在 css 中创建一个类，然后调用 jQuery [toggleClass](http://api.jquery.com/toggleClass/)

```
.someClass
{
 margin: 0 0 0 50px!important;
}

$("a").click(function () {
       $("body").toggleClass('someClass');
       return false;
 }); 
```

# javascript - Parse shortcode with javascript

> ID：13102020
> 
> 赞同：2
> 
> 时间：2012-10-27T16:34:39.983
> 
> 标签：javascript, regex, parsing

I'm parsing a string like this with javascript:

```
[box style="a" width="b" height="c"] 
```

So far, when I use [http://gskinner.com/RegExr/](http://gskinner.com/RegExr/) it works and it parses fine using this regex:

```
/(?<=\s).+?=".+?"/ 
```

However, when I do this in javascript it errors out:

> Uncaught SyntaxError: Invalid regular expression: /(?<=\s).+?=".+?"/: Invalid group

This is part of the code:

```
if (scOpenTag instanceof Array) {
   var params = scOpenTag[0].match(/(?<=\s).+?=".+?"/);                    
   for (var i = 0; i < params.length; i++)
      console.log(params[i]);
} 
```

Somebody know what I'm doing wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T16:45:04.080

Use simple regex pattern

```
[\w-]+="[^"]*" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T16:38:43.477

JavaScript doesn't support lookbehind assertions; neither `(?<=...)` nor `(?<!...)` will work.

However, it looks like your keys/property-names/attribute-names/whatever-those-are have the form `\w+`, so you can get some mileage out of the word-boundary assertion `\b` (which matches either `(?<!\w)(?=\w)` or `(?<=\w)(?!\w)`):

```
/\b\w+="[^"]+"/ 
```

* * *

**Edited to add:** For that matter, you can get your *exact* current functionality by using a capture-group, and using `params[1]` instead of `params[0]`:

```
if (scOpenTag instanceof Array) {
   var params = scOpenTag[0].match(/\s(.+?=".+?")/);
   for (var i = 1; i < params.length; i++)
      console.log(params[i]);
} 
```

# amazon-s3 - 亚马逊 AWS S3 递归更改/添加整个存储桶的元数据

> ID：13102027
> 
> 赞同：3
> 
> 时间：2012-10-27T16:35:07.670
> 
> 标签：amazon-s3, http-headers, metadata

我有一个 S3 存储桶，将从中下载文件。对于每个文件，我想添加以下元数据：

```
'Content-Disposition: attachment' 
```

有没有一种全局/简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T18:34:49.253

我通过使用[http://s3browser.com/](http://s3browser.com/)解决了这个问题，这使得进行批量更改变得非常容易！

# php - 更新 Bootstrap Thumbail Grid - ajax 请求

> ID：13102028
> 
> 赞同：3
> 
> 时间：2012-10-27T16:35:08.793
> 
> 标签：php, jquery, ajax, twitter-bootstrap, yii

**场景：**我有一个带有显示国家/地区的 twitter 引导缩略图网格的视图。当用户点击一张图片时，它应该在同一个网格（屏幕）中显示与该国家相关的城市。

**技术：**首先我用国家填充 dataProvider，然后我应该向我的控制器发送一个带有国家 ID 的 ajax 请求，在那里它查询与该国家相关的城市的数据库并将新的 dataProvider 发送回它更新的视图具有新数据的相同缩略图 dataProvider。

**问题：**我该怎么做？

这是我的代码：

带有缩略图声明的视图（视图名称：_detail）

```
<?php 

            $this->widget('bootstrap.widgets.TbThumbnails', array(
            'id' => 'detailThumbnails',
            'dataProvider' => $dataprov,
            'template' => "{items}\n{pager}",
            'itemView' => '_thumb',
            ));

        ?> 
```

在缩略图“itemView”属性中调用的视图（视图名称：_thumb）

```
<?php
    require_once '_detail.php';
?>
<li class="span3">
    <a href="#" class="<?php echo "thumbnail".$data['id']  ?>" rel="tooltip" data-title=" <?php echo "Clicar.."; ?>">
        <img src="<?php echo Yii::app()->getBaseUrl() . $data['photo'] ?>" alt="">
        <a href=
           "
           <?php 
           echo $className;
           echo $this->createUrl(get_class($data).'/view', array('id' => $data['id'])); 

           ?>
           "
           >
               <?php 

               echo $data['name'].$data['id']; 
               ?>
        </a>

        <?php

        Yii::app()->clientScript->registerScript('thumbClick'.$data['id'],'
                    $(".thumbnail'.$data['id'].'").click(function(){
                        var request = $.ajax({
                            data: {
                                id : '.$data['id'].'
                            },
                            type: "post",
                            url:"'.Yii::app()->createAbsoluteUrl("tripDetail/getCities").'",
                            error: function(response, error)
                            {
                                alert("Error: " + response + " : " + error);
                            },
                        });
                        $(".thumbnail'.$data['id'].'").ajaxSuccess(function() {
                            $.fn.yiiListView.update("detailThumbnails");
                        });
                    });
                ');
        ?>
    </a>
</li> 
```

如果成功，我需要更新相同的 dataProvider，它位于名为 _detail 的视图中，因此是 require_once。我想要做的是将来自控制器（下面）的数据以 json 格式传递并在此处解码。但我不知道如何从 json 响应中构建一个新的数据提供者，也不知道编码是否正确。是吗？？？？

控制器（只是一些功能）

```
public function actionCreate()
        {
            $session = new CHttpSession;
            $session->open();

            if(isset($_SESSION['mySession']))
            {
                $data = $_SESSION['mySession'];

                if ($data)
                {
                    if(!isset($_GET['ajax']))
                    {
                        $dataprov = new CActiveDataProvider("Country");
                        $this->render('create', 
                                array(
                                    'dat'=>$data,
                                    'dataprov'=>$dataprov
                                    )
                                );
                    }

                }
            }
        }

        public function actionGetCities()
        {

            if(isset($_POST['id']))
            {
                $cityId = $_POST['id'];

                $dataProvider = $this->getCitiesFromDb($cityId);

                echo $this->renderPartial('_detail',array('dataprov'=> $dataProvider),true,true);   
            }
        }

        public function getCitiesFromDb($cityId)
        {
            $criteria = new CDbCriteria;  
            $criteria->select = "*";
            $criteria->condition = "b4_Country_id = " . $cityId;

            $dataProv = new CActiveDataProvider('City', 
                    array('criteria'=>$criteria));

            return $dataProv;
        } 
```

如果这不是正确的方法，请告诉我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T21:47:16.757

你正在混合`Server Side Code`和`Client side code`。

* * *

**服务器端代码**

* * *

此代码驻留在服务器上，并根据请求执行以向客户端提供有效输出。一旦完成，它就不会与客户端保持任何连接

* * *

**客户端代码**

* * *

一旦请求被发送到服务器客户端等待来自服务器的响应并接收从服务器发送的任何内容。一旦完成，它将与服务器断开连接，直到用户或脚本发出进一步的请求。

你在这里所做的是`<?php$json = CJSON::decode(data)?>`php 标签是服务器端的东西，它们不能被填充，因为它们出现在你的代码中的客户端。考虑以下

如果您成功提出请求，`AJAX`您最好尝试更改`datatype`. `Ajax request`我猜您已经完成了一半，但您不知道如何解码`JSON`收到的内容。您可以`'dataType'=>'json'`在您的 ajax 请求中使用。有关更多详细信息，请参阅[使用 Ajax 和 Json 更新字段](http://www.yiiframework.com/wiki/164/updating-fields-on-a-form-with-ajax-and-json/)

希望这能让生活更轻松

至于更新部分，您可以执行诸如创建页面之类的操作并通过调用它`renderpartial`并返回`HTML`到您的视图

```
public function actionGetCities()
        {

            if(isset($_POST['id']))
            {
                $cityId = $_POST['id'];

                $dataProvider = $this->getCitiesFromDb($cityId);
                echo $this->renderPartial('updateView',array('dataprovider'=> $dataProvider),true,true);//see documentation for third and fourth parameter and change if you like   
            }
        } 
```

在您看来，您可以只更新最初具有原始网格的 div，因此无需使用`json`格式。 **更新视图**

```
<?php 
            $this->widget('bootstrap.widgets.TbThumbnails', array(
                'id' => 'detailThumbnails',
                'dataProvider' => $dataProvider,
                'template' => "{items}\n{pager}",
                'itemView' => '_thumb',
            ));

        ?> 
```

> 注意：此代码未经测试，仅供参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T09:50:24.440

好的，昨天我解决了 jquery 中的问题。生成的html是正确的但是没有被插入，当图像刷新时，然后，一个小灯亮了：

```
Yii::app()->clientScript->registerScript('thumbClick'.$data['id'],'
                    $(".thumbnail'.$data['id'].'").click(function(){
                        var request = $.ajax({
                            data: {
                                id : '.$data['id'].'
                            },
                            type: "post",
                            success: function(data) {
                                $("#detailThumbnails").html(data);
                            },
                            url:"'.Yii::app()->createAbsoluteUrl("tripDetail/getCities").'",
                            error: function(response, error)
                            {
                                alert("Error: " + response + " : " + error);
                            },
                        });
                    });
                '); 
```

代码中显示“成功：”的部分

**非常感谢大家给我的所有帮助，特别是 bool.dev。你的帮助很宝贵。**

# ruby-on-rails - 未上传图像时回形针出错

> ID：13102029
> 
> 赞同：3
> 
> 时间：2012-10-27T16:35:10.233
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, paperclip, paperclip-validation

当我上传图像然后显示它时，回形针工作正常：

```
<%= image_tag @post.photo.url(:medium) %> 
```

问题是，如果没有上传图片，我会收到以下错误：

```
NoMethodError in Posts#show

Showing /Users/me/RubymineProjects/level_60/app/views/posts/show.html.erb where line #16 raised:

undefined method `[]' for nil:NilClass 
```

我尝试检查图像是否存在`<% if @post.photo %>`or `<% if @post.photo != '' %>`。但是，即使没有上传图像，这两者也总是返回 true。

仅当它存在时，如何通过回形针显示图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T17:15:08.247

问题是检查`@post.photo`返回的东西不等于`false`，不管它是什么。要调试它，只需`@post.photo.inspect`在控制器中打印 a 或查看日志文件。

看到您的评论已经说它是一个[`Paperclip::Attachment`](http://rdoc.info/github/thoughtbot/paperclip/Paperclip/Attachment)对象，检查的好候选者将是`@post.photo.size > 0`or `@post.photo.errors.empty?`, or (probably best) `@phost.photo.file?`。

# haskell - 'do' 构造中的最后一条语句必须是表达式：是否有任何缩进错误

> ID：13102034
> 
> 赞同：3
> 
> 时间：2012-10-27T16:35:55.960
> 
> 标签：haskell

```
import Data.ByteString as B
import Data.ByteString.Internal as I
import Data.Bits
main = do input <- getLine
      let bs = B.pack input
      let intermediatebs  =  unfoldrN ((B.length bs)*2) unfld 0
      where unfld i
      |Prelude.rem i 2 == 0 = Just (top4 $ B.index bs (i/2) , i+1)
      |otherwise =  Just (bottom4 $ B.index bs (i/2) , i+1)
      top4bits x = shiftR x 4
      bottom4bits x = x .&. 0x0F
      top4 x = convertASCIIword8 $ top4bits x
      bottom4 x = convertASCIIword8 $ bottom4bits x
      convertASCIIword8 x
      |x <= 9 = I.c2w '0' + x
      |otherwise = I.c2w 'A' + (x-10)
      let outputbs = B.map I.w2c $ intermediatebs
      in do putStrLn (outputbs) 
```

我收到此编译错误“do”构造中的最后一条语句必须是一个表达式：let intermediatebs = unlockrN ((B.length bs) * 2) unfld 0

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T17:22:17.260

在这里很难确切地看到你想要什么。只需更改缩进即可使您的代码解析：

```
import Data.ByteString as B
import Data.ByteString.Internal as I
import Data.Bits
main = do
  input <- getLine
  let bs = B.pack input
  let intermediatebs  =  unfoldrN ((B.length bs)*2) unfld 0
       where
        unfld i
          | Prelude.rem i 2 == 0 = Just (top4 $ B.index bs (i/2) , i+1)
          | otherwise =  Just (bottom4 $ B.index bs (i/2) , i+1)
        top4bits x = shiftR x 4
        bottom4bits x = x .&. 0x0F
        top4 x = convertASCIIword8 $ top4bits x
        bottom4 x = convertASCIIword8 $ bottom4bits x
        convertASCIIword8 x
          | x <= 9 = I.c2w '0' + x
          | otherwise = I.c2w 'A' + (x-10)
  let outputbs = B.map I.w2c $ intermediatebs
  putStrLn (outputbs) 
```

尽管由于模棱两可`getLine`和`putStrLn`出现而无法编译。你可能想`import qualified`在适当的地方。主要意见：

*   Do-blocks、let-blocks 等从它们*内部第一件事*的左边缘开始，不管关键字本身在哪里。例如

    ```
    do x
       y
    -- ^ because of where the x is, all future lines have to line up with it

    let x = ...
        y = ...
    -- ^ if you have code appearing left of here, the let-block ends 
    ```

    于是，我经常在开始之前给自己`do`和`where`自己的线一个块。在我上面给出的示例中，您可以看到，即使我将 do-block 移动到名称更长或更短的函数中，缩进也不会改变。

*   同一块中开始缩进的行是前一行的延续。守卫是一个延续，所以需要缩进，同样`where`，对于 let 赋值需要比赋值本身进一步缩进。

*   块末尾的`in do`是多余的，所以我删除了它（或者，只需缩进它也可以）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T17:13:10.317

您的外部`do`仅由以下标记组成，`input <- getLine`因为以下标记`let`的缩进程度已经低于`input`（无论如何这都没有意义，但是....）

也许你的意思是：

```
do  input <- getLine
    let ....
    let .....   where 
          unfld .... 
```

但只能猜测。使用缩进来明确哪些项目属于一起，哪些项目是其他项目的子项目。上面的风格相当模糊了这一点。另外，你不应该写

```
foo x y z
| ..... = 
```

因为编译器会看到

```
foo x y z; | ... = 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T16:48:23.350

错误消息不是由缩进错误引起的，而是由排序错误引起的。您似乎已将 -block 插入到`where`-block 的中间`do`。那是行不通的。整个`do`-block，包括最后的表达式，应该在该`where`块之前。

也就是说，您的`where`-block 内的定义中确实存在缩进错误：您需要缩进模式保护。

# javascript - jQuery Isotope 项目移除

> ID：13102037
> 
> 赞同：1
> 
> 时间：2012-10-27T16:36:07.487
> 
> 标签：javascript, jquery, jquery-isotope

我有一个带有“便笺”功能的网站。为了根据显示器分辨率对齐站点中的注释，我使用了 Isotope 插件。

```
 <script type="text/javascript">
$(function(){

  var $container = $('#sticky-note');

  $container.isotope({
    itemSelector: '.note',
    resizesContainer: true
  });

  // remove item if clicked
  $container.delegate( '.uzdaryti', 'click', function(){
    $container.isotope( 'remove', $(this) );
  });

}); 
```

那个笔记：

```
 <li class="melynas note">
    <a href="#" class="uzdaryti">X</a>
    <p>Lorem ipsum dolor sit amet.</p>
    <div class="data">2012.10.17 13:42</div>
    </li> 
```

我不知道如何使用 .uzdaryti 类进行链接会删除整个列表项。我试图用 $('.note') 更改 $(this) 但单击链接会删除所有注释。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T16:48:33.860

没有必要使用同位素来处理节点删除。您可以只使用 jQuery 删除正确的元素，然后触发同位素重新布局。例如，

```
$('.uzdaryti').click(function(){

    $(this).parent().remove();
    $container.isotope('reLayout');

    return false;

}); 
```

# c++ - C++ 套接字发送结构

> ID：13102038
> 
> 赞同：1
> 
> 时间：2012-10-27T16:36:13.300
> 
> 标签：c++, c, sockets, networking, structure

我可以使用 char 数组通过套接字发送/接收数据，但无法找到发送结构的方法。我发现了很多文章，但它们很难理解。据我所知，我们必须使用一个名为 snprintf 的函数来制作数据包，然后再使用其他一些函数来恢复它。请我正在寻找一种非常可靠但简单的数据传输方式。这是我编写的一些代码，用于通过 char 数组发送

```
int main()
{
    int listenfd = 0, connfd = 0;
    struct sockaddr_in serv_addr; 

    char sendBuff[1025];
    time_t ticks;
    printf("\n\n...Server is starting up...\n\n");
    listenfd = socket(AF_INET, SOCK_STREAM, 0);

    memset(&serv_addr, '0', sizeof(serv_addr));
    memset(sendBuff, '0', sizeof(sendBuff)); 

    serv_addr.sin_family = AF_INET;
    serv_addr.sin_addr.s_addr = htonl(INADDR_ANY);
    serv_addr.sin_port = htons(4567);

    bind(listenfd, (struct sockaddr*)&serv_addr, sizeof(serv_addr));
    printf("Bind successful\n");
    listen(listenfd, 10);
    printf("Ready: Waiting for clients\n");
    while(1)
    {
        connfd = accept(listenfd, (struct sockaddr*)NULL, NULL); 
        ticks = time(NULL);
        snprintf(sendBuff, sizeof(sendBuff), "%.24s\r\n", ctime(&ticks));
        write(connfd, sendBuff, strlen(sendBuff));
        close(connfd);
        sleep(1);
    } 
```

客户

```
int main(int argc, char *argv[])
{
    int sockfd = 0 /*Socket Descriptor*/, n = 0;
    char recvBuff[1024];
    struct sockaddr_in serv_addr; 

    if(argc != 2)  {
        printf("\n Usage: %s <ip of server> \n",argv[0]);
        return 1;
    } 

    memset(recvBuff, '0',sizeof(recvBuff));
    if((sockfd = socket(AF_INET, SOCK_STREAM, 0)) < 0) {
        printf("\n Error : Could not create socket \n");
        return 1;
    } 

    memset(&serv_addr, '0', sizeof(serv_addr)); 
    serv_addr.sin_family = AF_INET;
    serv_addr.sin_port = htons(4567); 
    if(inet_pton(AF_INET, argv[1], &serv_addr.sin_addr)<=0) {
        printf("\n inet_pton error occured\n");
        return 1;
    } 

    if( connect(sockfd, (struct sockaddr *)&serv_addr, sizeof(serv_addr)) < 0) {
       printf("\n Error : Connect Failed \n");
       return 1;
    } 

    while ( (n = read(sockfd, recvBuff, sizeof(recvBuff)-1)) > 0) {
        recvBuff[n] = 0;
        if(fputs(recvBuff, stdout) == EOF) {
            printf("\n Error : Fputs error\n");
        }
    } 

    if(n < 0) {
        printf("\n Read error \n");
    } 

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T16:54:00.023

对于发送结构，总而言之：**不要**. 例如，不要尝试使用结构指针、sizeof 运算符和套接字 send() 并期望一切都会好起来，因为即使它看起来有效，但它已经在设计上被破坏了。

相反，您的结构成员应该以明确定义的字节格式进行布局，该格式在套接字连接的*两端都可以通过可**移植*的通用代码进行理解和管理。这种格式（例如协议）应该具有可移植的例程，*既*可以将结构组装成字节数组，也可以将其分解出来。在客户端和服务器端使用这些例程，考虑大小，数值的字节顺序等，最终是实现（a）正确和（b）可移植的唯一方法。

有可用的通用解决方案（例如 boost::serialization），但最终没有灵丹妙药。因此，请考虑*所有*选项，并尽可能采用最便携、*最简单*的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-01T11:13:12.150

您也可以使用这种方法。

使用谷歌协议缓冲区。[此处](https://developers.google.com/protocol-buffers/docs/cpptutorial)提到了有关如何执行此操作的快速链接

您可以制作自己的消息，然后通过套接字 udp/tcp 传输这些消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T17:13:42.253

另一种选择是使用基于接口描述语言 (IDL) 生成代码的应用程序。两个优秀的选项是[Apache Thrift](http://thrift.apache.org/)和[Google 协议缓冲区](https://developers.google.com/protocol-buffers/)。

# wpf - wpf-CanResizeWithGrip 选项不考虑 minwidth 和 minheight 属性

> ID：13102039
> 
> 赞同：2
> 
> 时间：2012-10-27T16:36:13.150
> 
> 标签：wpf, window, css, resize-crop

我有一个小问题，当我用夹子调整窗口大小时，窗口可以小于最小尺寸参数。

我试过这个：

```
 private void wndMain_SizeChanged(object sender, SizeChangedEventArgs e)
    {
        // Check there is no Deviation in the height
        if (e.NewSize.Height < this.MinHeight)
        {
            this.Height = this.MinHeight;
        }

        // Check there is no Deviation in the width
        if (e.NewSize.Width < this.MinWidth)
        {
            this.Width = this.MinWidth;
        }
    } 
```

但它看起来很糟糕，因为变化已经发生并且一次又一次地调整大小......

有一个选项可以取消调整大小到 sizechanged 事件？谢谢！

# jquery - jQuery - 过滤独特的图标源

> ID：13102041
> 
> 赞同：1
> 
> 时间：2012-10-27T16:36:28.107
> 
> 标签：jquery, image, filter, unique

我有一个图像列表，我想根据宽度过滤掉图标，并存储在变量“图标”中。这部分完成没有问题。然后我试图过滤掉具有重复源的图标，所以我只得到'icons'变量中的唯一图标，并将其附加到uniq div。

我找到了这段代码，它在加载时删除了所有重复的图像。在添加到 uniq div 之前先过滤“图标”之后，我无法让它运行：

```
$(function(){
var srcs = [], temp;
    $("img").filter(function(){
        temp = $(this).attr("src");
        if($.inArray(temp, srcs) < 0){
            srcs.push(temp);   
            return false;
        }
        return true;
    }).remove();
}); 
```

这是我到目前为止所拥有的：http: [//jsfiddle.net/xCjjp/9/](http://jsfiddle.net/xCjjp/9/)

知道如何在附加它们之前获得过滤的“图标”以仅保留唯一的来源吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T17:42:54.987

当您循环浏览图像以添加它们以`div#uniq`将每个新图像源添加到数组并根据该数组检查每个连续源时，如果它不存在，则意味着它是唯一的。

```
var icons = $("img").filter(function(){
    return (this.width < 100)
});
    var icon_src = [];

$.each(icons, function(i,e){
    if ($.inArray(e.src, icon_src) === -1) {
        $("#uniq").append("<img src='"+ e.src +"'>");
        icon_src.push(e.src);
    }
}); 
```

你可以在这里找到它工作[http://jsfiddle.net/KhWgj/4/](http://jsfiddle.net/KhWgj/4/)

# javascript - javascript将数学文本转换为乳胶/图形

> ID：13102042
> 
> 赞同：-3
> 
> 时间：2012-10-27T16:36:36.060
> 
> 标签：javascript, html, math, latex

我正在尝试找到可以转换此文本的插件

```
1*2^3 + 0*2^2 + 1*2^1 = 1 + 0 + 3 = 5 
```

放入乳胶中，使其更**易于阅读**和**用户友好**

我不介意我是否需要对语法进行简单的修改......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T10:26:07.323

如果您只需要一个非常基本的标记，正则表达式是您的朋友。

下面的示例将每个替换`*`为一个中间点 · 并添加一些 HTML 标记 ( `<sup>`) 来创建这些指数。当然这只是一个可以扩展的非常简单的例子。

```
<span class="math">1*2^3 + 0*2^2 + 1*2^1 = 1 + 0 + 3 = 5</span>
<script>
    (function(){
        function convert(str) {
            str = str.replace(/\*/g, "&#183;");
            str = str.replace(/\^(.)\s/g, "<sup>$1</sup> ");
            return str;
        };

        var math = document.getElementsByClassName("math");
        for (var i = 0, l = math.length; i < l; ++i) {
            math[i].innerHTML = convert(math[i].innerHTML);
        }
    })();
</script> 
```

[演示（JSFiddle）](http://jsfiddle.net/Aletheios/Nczp9/)

但是，正如@Mathias 建议的那样，如果您想显示更复杂的数学，[MathJax](http://www.mathjax.org/)绝对值得一看。

# java - 扫描仪在使用 next() 或 nextFoo() 后跳过 nextLine()？

> ID：13102045
> 
> 赞同：869
> 
> 时间：2012-10-27T16:37:01.840
> 
> 标签：java, io, java.util.scanner

我正在使用这些`Scanner`方法`nextInt()`并`nextLine()`读取输入。

它看起来像这样：

```
System.out.println("Enter numerical value");    
int option;
option = input.nextInt(); // Read numerical value from input
System.out.println("Enter 1st string"); 
String string1 = input.nextLine(); // Read 1st string (this is skipped)
System.out.println("Enter 2nd string");
String string2 = input.nextLine(); // Read 2nd string (this appears right after reading numerical value) 
```

问题是输入数值后，第一个`input.nextLine()`被跳过，第二个`input.nextLine()`被执行，这样我的输出是这样的：

```
Enter numerical value
3   // This is my input
Enter 1st string    // The program is supposed to stop here and wait for my input, but is skipped
Enter 2nd string    // ...and this line is executed and waits for my input 
```

我测试了我的应用程序，看起来问题在于使用`input.nextInt()`. 如果我删除它，那么两者`string1 = input.nextLine()`都`string2 = input.nextLine()`将按照我的意愿执行。

* * *

## 回答 #1

> 赞同：1062
> 
> 时间：2012-10-27T16:39:20.083

这是因为该[`Scanner.nextInt`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextInt%28%29)方法不会读取通过按“Enter”创建的输入中的*换行符，因此在读取该**换行符*[`Scanner.nextLine`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine%28%29)后调用返回。

 *当您使用`Scanner.nextLine`after[`Scanner.next()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#next%28%29)或任何`Scanner.nextFoo`方法（除了`nextLine`它自己）时，您会遇到类似的行为。

**解决方法：**

*   要么`Scanner.nextLine`在每个之后打一个电话，`Scanner.nextInt`要么`Scanner.nextFoo`消耗该行的其余部分，包括*换行符*

    ```
    int option = input.nextInt();
    input.nextLine();  // Consume newline left-over
    String str1 = input.nextLine(); 
    ```

*   或者，更好的是，通读输入`Scanner.nextLine`并将您的输入转换为您需要的正确格式。例如，您可以使用[`Integer.parseInt(String)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt(java.lang.String))方法转换为整数。

    ```
    int option = 0;
    try {
        option = Integer.parseInt(input.nextLine());
    } catch (NumberFormatException e) {
        e.printStackTrace();
    }
    String str1 = input.nextLine(); 
    ```

* * *

## 回答 #2

> 赞同：254
> 
> 时间：2011-08-14T12:24:48.410

问题出在**input.nextInt()**方法上——它只读取 int 值。因此，当您继续使用 input.nextLine() 阅读时，您会收到 "\n" Enter 键。所以要跳过这个，你必须添加**input.nextLine()**。希望这现在应该清楚了。

试试这样：

```
System.out.print("Insert a number: ");
int number = input.nextInt();
input.nextLine(); // This line you have to add (It consumes the \n character)
System.out.print("Text1: ");
String text1 = input.nextLine();
System.out.print("Text2: ");
String text2 = input.nextLine(); 
```

* * *

## 回答 #3

> 赞同：90
> 
> 时间：2011-08-14T12:25:35.503

这是因为当您输入一个数字然后按`Enter`时，`input.nextInt()`只消耗数字，而不是“行尾”。执行时`input.nextLine()`，它从第一个输入中消耗仍在缓冲区中的“行尾”。

而是`input.nextLine()`在之后立即使用`input.nextInt()`

* * *

## 回答 #4

> 赞同：50
> 
> 时间：2014-03-23T16:35:12.077

似乎有很多关于这个问题的问题`java.util.Scanner`。我认为一个更易读/惯用的解决方案是`scanner.skip("[\r\n]+")`在调用`nextInt()`.

编辑：正如下面提到的@PatrickParker，如果用户在数字后输入任何空格，这将导致无限循环。请参阅他们的答案以获得与跳过一起使用的更好模式：[https ://stackoverflow.com/a/42471816/143585](https://stackoverflow.com/a/42471816/143585)

* * *

## 回答 #5

> 赞同：35
> 
> 时间：2013-02-23T22:01:23.317

这样做是因为`input.nextInt();`不捕获换行符。您可以通过在`input.nextLine();`下面添加一个来像其他建议的那样做。
或者，您可以执行 C# 样式并将 nextLine 解析为整数，如下所示：

```
int number = Integer.parseInt(input.nextLine()); 
```

这样做同样有效，并且可以节省一行代码。

* * *

## 回答 #6

> 赞同：35
> 
> 时间：2016-10-09T22:51:41.067

TL;DR如果您不确定之前的指令是还是，
请使用`scanner.skip("\\R?")`before 。`scanner.nextLine()``scanner.next()``scanner.next*TypeName*()`

`skip`在哪里使用正则表达式

*   `\R`表示行分隔符

*   `?`将使`\R`行分隔符序列可选 - 这将阻止`skip`方法

    (a) 等待匹配序列 - 在数据源仍然打开的情况下，`System.in`但没有找到行分隔符
    (b)`java.util.NoSuchElementException`在数据源终止/结束（如文件或字符串）的情况下抛出

## 你需要知道的事情：

*   代表几行的文本还包含行之间的不可打印字符（我们称它们为行分隔符），例如

*   回车（CR - 在字符串文字中表示为`"\r"`）

*   换行（LF - 在字符串文字中表示为`"\n"`）

*   当您从控制台读取数据时，它允许用户输入他的响应，当他完成后，他需要以*某种方式*确认这一事实。为此，用户需要按键盘上的“enter”/“return”键。

重要的是，除了确保将用户数据放置到*标准输入*（由`System.in`读取表示`Scanner`）之外，该键还会在其后发送依赖于操作系统的行分隔符（如 Windows `\r\n`）。

因此，当您向用户询问类似 的值`age`，并且用户键入 42 并按 Enter 键时，标准输入将包含`"42\r\n"`.

## 问题

`Scanner#nextInt`（和其他方法）不允许 Scanner*使用*这些行分隔符。它将从中读取它们（Scanner 怎么会知道用户没有更多的数字代表值而不是面对空格？）这将从标准输入中删除它们，但**它也会在内部*****缓存*****这些行分隔符**。我们需要记住的是，所有的 Scanner 方法总是从缓存的文本开始扫描。`Scanner#next***Type***`*`System.in``age`*

 **现在`Scanner#nextLine()`只需收集并返回所有字符*，直到找到行分隔符*（或流的结尾）。但由于从控制台读取数字后的行分隔符立即在 Scanner 的缓存中找到，因此它返回空字符串，这意味着 Scanner 无法在这些行分隔符（或流的结尾）之前找到任何字符。
BTW`nextLine`也*使用*这些行分隔符。

## 解决方案

因此，当您想询问数字然后询问整行同时避免空字符串作为 的结果时`nextLine`，要么

*   `nextInt`消耗扫描仪缓存中留下的行分隔符
*   打电话`nextLine`，
*   或 IMO***更具可读性***的方式是调用`skip("\\R")`或`skip("\r\n|\r|\n")`让扫描仪跳过与行分隔符匹配的部分（有关更多信息`\R`：[https](https://stackoverflow.com/a/31060125) ://stackoverflow.com/a/31060125 ）
*   根本不要使用`nextInt`(nor`next`或任何`nextTYPE`方法)。`nextLine`而是使用和解析每一行中的数字（假设一行只包含一个数字）逐行读取整个数据，并将其解析为适当的类型，例如`int`via `Integer.parseInt`。

* * *

**顺便说一句**：方法可以*跳过*定界符（默认情况下所有空格，如制表符、行分隔符），包括扫描仪缓存的那些，直到它们找到下一个非定界值（令牌）。多亏了代码之类的输入`Scanner#next***Type***`*`"42\r\n\r\n321\r\n\r\n\r\nfoobar"`*

 *```
int num1 = sc.nextInt();
int num2 = sc.nextInt();
String name = sc.next(); 
```

就能正确分配`num1=42` `num2=321` `name=foobar`。

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2014-07-23T10:20:51.480

而不是`input.nextLine()`use `input.next()`，那应该可以解决问题。

修改后的代码：

```
public static Scanner input = new Scanner(System.in);

public static void main(String[] args)
{
    System.out.print("Insert a number: ");
    int number = input.nextInt();
    System.out.print("Text1: ");
    String text1 = input.next();
    System.out.print("Text2: ");
    String text2 = input.next();
} 
```

* * *

## 回答 #8

> 赞同：16
> 
> 时间：2017-06-20T18:52:41.693

如果你想同时读取字符串和整数，一个解决方案是使用两个扫描器：

```
Scanner stringScanner = new Scanner(System.in);
Scanner intScanner = new Scanner(System.in);

intScanner.nextInt();
String s = stringScanner.nextLine(); // unaffected by previous nextInt()
System.out.println(s);

intScanner.close();
stringScanner.close(); 
```

* * *

## 回答 #9

> 赞同：13
> 
> 时间：2016-11-17T00:51:29.130

为避免此问题，请`nextLine();`立即使用，`nextInt();`因为它有助于清除缓冲区。当您按下`ENTER`时`nextInt();`不会捕获新行，因此`Scanner`稍后会跳过代码。

```
Scanner scanner =  new Scanner(System.in);
int option = scanner.nextInt();
scanner.nextLine(); //clearing the buffer 
```

* * *

## 回答 #10

> 赞同：13
> 
> 时间：2017-06-16T08:12:55.220

如果您想快速扫描输入而不会混淆到 Scanner 类的 nextLine() 方法，请使用自定义输入扫描器。

## 代码 ：

```
class ScanReader {
/**
* @author Nikunj Khokhar
*/
    private byte[] buf = new byte[4 * 1024];
    private int index;
    private BufferedInputStream in;
    private int total;

    public ScanReader(InputStream inputStream) {
        in = new BufferedInputStream(inputStream);
    }

    private int scan() throws IOException {
        if (index >= total) {
            index = 0;
            total = in.read(buf);
            if (total <= 0) return -1;
        }
        return buf[index++];
    }
    public char scanChar(){
        int c=scan();
        while (isWhiteSpace(c))c=scan();
        return (char)c;
    }

    public int scanInt() throws IOException {
        int integer = 0;
        int n = scan();
        while (isWhiteSpace(n)) n = scan();
        int neg = 1;
        if (n == '-') {
            neg = -1;
            n = scan();
        }
        while (!isWhiteSpace(n)) {
            if (n >= '0' && n <= '9') {
                integer *= 10;
                integer += n - '0';
                n = scan();
            }
        }
        return neg * integer;
    }

    public String scanString() throws IOException {
        int c = scan();
        while (isWhiteSpace(c)) c = scan();
        StringBuilder res = new StringBuilder();
        do {
            res.appendCodePoint(c);
            c = scan();
        } while (!isWhiteSpace(c));
        return res.toString();
    }

    private boolean isWhiteSpace(int n) {
        if (n == ' ' || n == '\n' || n == '\r' || n == '\t' || n == -1) return true;
        else return false;
    }

    public long scanLong() throws IOException {
        long integer = 0;
        int n = scan();
        while (isWhiteSpace(n)) n = scan();
        int neg = 1;
        if (n == '-') {
            neg = -1;
            n = scan();
        }
        while (!isWhiteSpace(n)) {
            if (n >= '0' && n <= '9') {
                integer *= 10;
                integer += n - '0';
                n = scan();
            }
        }
        return neg * integer;
    }

    public void scanLong(long[] A) throws IOException {
        for (int i = 0; i < A.length; i++) A[i] = scanLong();
    }

    public void scanInt(int[] A) throws IOException {
        for (int i = 0; i < A.length; i++) A[i] = scanInt();
    }

    public double scanDouble() throws IOException {
        int c = scan();
        while (isWhiteSpace(c)) c = scan();
        int sgn = 1;
        if (c == '-') {
            sgn = -1;
            c = scan();
        }
        double res = 0;
        while (!isWhiteSpace(c) && c != '.') {
            if (c == 'e' || c == 'E') {
                return res * Math.pow(10, scanInt());
            }
            res *= 10;
            res += c - '0';
            c = scan();
        }
        if (c == '.') {
            c = scan();
            double m = 1;
            while (!isWhiteSpace(c)) {
                if (c == 'e' || c == 'E') {
                    return res * Math.pow(10, scanInt());
                }
                m /= 10;
                res += (c - '0') * m;
                c = scan();
            }
        }
        return res * sgn;
    }

} 
```

## 优点 ：

*   扫描输入的速度比 BufferReader 快
*   降低时间复杂度
*   为每个下一个输入刷新缓冲区

## 方法 ：

*   scanChar() - 扫描单个字符
*   scanInt() - 扫描整数值
*   scanLong() - 扫描 Long 值
*   scanString() - 扫描字符串值
*   scanDouble() - 扫描双精度值
*   scanInt(int[] array) - 扫描完整的 Array(Integer)
*   scanLong(long[] array) - 扫描完整的 Array(Long)

## 用法 ：

1.  复制 Java 代码下方的给定代码。
2.  为给定类初始化对象

`ScanReader sc = new ScanReader(System.in);` 3.导入必要的类：

`import java.io.BufferedInputStream; import java.io.IOException; import java.io.InputStream;` 4\. 从主方法中抛出 IOException 来处理异常 5\. 使用提供的方法。6.享受

## 例子 ：

```
import java.io.BufferedInputStream;
import java.io.IOException;
import java.io.InputStream;
class Main{
    public static void main(String... as) throws IOException{
        ScanReader sc = new ScanReader(System.in);
        int a=sc.scanInt();
        System.out.println(a);
    }
}
class ScanReader.... 
```

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2017-09-14T10:16:32.170

`sc.nextLine()`与解析输入相比更好。因为在性能方面它会很好。

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2018-01-07T10:33:01.437

我想我参加派对已经很晚了..

如前所述，`input.nextLine()`在获取您的 int 值后调用将解决您的问题。您的代码不起作用的原因是因为您的输入（输入 int 的位置）没有其他内容可以存储到`string1`. 我将对整个主题进行更多说明。

将nextLine *()*视为 Scanner 类中的*nextFoo()*方法中的奇数。让我们举一个简单的例子。假设我们有两行代码，如下所示：

```
int firstNumber = input.nextInt();
int secondNumber = input.nextInt(); 
```

如果我们输入下面的值（作为单行输入）

> 54 234

our`firstNumber`和`secondNumber`variable 的值分别变为 54 和 234。之所以这样工作，是因为当 nextInt() 方法接收值时，***不会****自动生成新的换行符（即 \n*） 。它只是采用*“下一个 int”*并继续前进。除了 nextLine() 之外，其余的 nextFoo() 方法也是如此。

 **nextLine() 取值后立即生成新的换行符；这就是@RohitJain 所说的新换行符“已使用”的意思。

最后，next() 方法只取最近的字符串**而不**生成新行；这使得这是在同一行中获取单独字符串的首选方法。

我希望这会有所帮助.. 编码愉快！

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2017-07-30T03:48:25.933

```
public static void main(String[] args) {
        Scanner scan = new Scanner(System.in);
        int i = scan.nextInt();
        scan.nextLine();
        double d = scan.nextDouble();
        scan.nextLine();
        String s = scan.nextLine();

        System.out.println("String: " + s);
        System.out.println("Double: " + d);
        System.out.println("Int: " + i);
    } 
```

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2019-10-01T17:20:06.550

*如果我期望一个非空输入*

避免：
– 如果以下输入被未经检查`scan.nextLine()`的解决方法吃掉，
则数据丢失 – 由于`scan.nextLine()`被替换为`scan.next()` *（输入：“yippie ya Yeah”）*
而仅部分读取行而导致数据丢失 –  使用方法`Exception`解析输入时抛出的 s *（先阅读，后解析）*`Scanner`

 *```
public static Function<Scanner,String> scanLine = (scan -> {
    String s = scan.nextLine();
    return( s.length() == 0 ? scan.nextLine() : s );
  }); 
```

在上面的例子中使用：

```
System.out.println("Enter numerical value");    
int option = input.nextInt(); // read numerical value from input

System.out.println("Enter 1st string"); 
String string1 = scanLine.apply( input ); // read 1st string
System.out.println("Enter 2nd string");
String string2 = scanLine.apply( input ); // read 2nd string 
```

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2020-01-24T11:32:11.933

在我的一个用例中，我有一个场景是读取一个**字符串值，前面有几个整数值**。我不得不使用“ **for / while 循环**”来读取这些值。在这种情况下，上述建议均无效。

使用`input.next()`而不是`input.nextLine()`解决问题。希望这可能对那些处理类似情况的人有所帮助。

* * *

## 回答 #16

> 赞同：4
> 
> 时间：2019-01-16T19:24:18.860

**使用 2 个扫描仪对象而不是 1 个**

```
Scanner input = new Scanner(System.in);
System.out.println("Enter numerical value");    
int option;
Scanner input2 = new Scanner(System.in);
option = input2.nextInt(); 
```

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2019-12-18T09:08:48.230

由于`nextXXX()`方法不读取`newline`，除了`nextLine()`. 我们可以使用如下方式跳过`newline`读取任何`non-string`值（`int`在这种情况下）后`scanner.skip()`：

```
Scanner sc = new Scanner(System.in);
int x = sc.nextInt();
sc.skip("(\r\n|[\n\r\u2028\u2029\u0085])?");
System.out.println(x);
double y = sc.nextDouble();
sc.skip("(\r\n|[\n\r\u2028\u2029\u0085])?");
System.out.println(y);
char z = sc.next().charAt(0);
sc.skip("(\r\n|[\n\r\u2028\u2029\u0085])?");
System.out.println(z);
String hello = sc.nextLine();
System.out.println(hello);
float tt = sc.nextFloat();
sc.skip("(\r\n|[\n\r\u2028\u2029\u0085])?");
System.out.println(tt); 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-12-31T14:10:24.440

要解决这个问题，只需创建一个 **scan.nextLine()**，其中**scan**是 Scanner 对象的一个​​实例。例如，我使用一个简单的 HackerRank 问题进行解释。

```
package com.company;
import java.util.Scanner;

public class hackerrank {
public static void main(String[] args) {
    Scanner scan = new Scanner(System.in);
    int i = scan.nextInt();
    double d = scan.nextDouble();
    scan.nextLine(); // This line shall stop the skipping the nextLine() 
    String s = scan.nextLine();
    scan.close();

    // Write your code here.

    System.out.println("String: " + s);
    System.out.println("Double: " + d);
    System.out.println("Int: " + i);
} 
```

}

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2020-03-08T15:19:12.537

使用此代码将解决您的问题。

```
System.out.println("Enter numerical value");    
int option;
option = input.nextInt(); // Read numerical value from input
input.nextLine();
System.out.println("Enter 1st string"); 
String string1 = input.nextLine(); // Read 1st string (this is skipped)
System.out.println("Enter 2nd string");
String string2 = input.nextLine(); // Read 2nd string (this appears right after reading numerical value) 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2021-08-15T10:55:02.590

将`nextLine()`直接读取为空行输入，无需等待文本。

通过添加额外的扫描仪来消耗空行的简单解决方案：

```
System.out.println("Enter numerical value");    
int option;
option = input.nextInt(); // Read numerical value from input
input.nextLine();
System.out.println("Enter 1st string"); 
String string1 = input.nextLine(); // Read 1st string (this is skipped)
System.out.println("Enter 2nd string");
String string2 = input.nextLine(); // Read 2nd string (this appears right after reading numerical value) 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2015-03-13T11:06:54.057

为什么不每次阅读都使用新的扫描仪？如下所示。使用这种方法，您将不会遇到问题。

```
int i = new Scanner(System.in).nextInt(); 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-11-11T08:29:52.493

对于java中的初学者来说，这是一个非常基本的问题。我在开始 java（自学）时也遇到了同样的问题。实际上，当我们采用整数数据类型的输入时，它只读取整数值并留下 newLine(\n) 字符，并且当我们尝试采用新输入时，这一行（即由整数动态输入留下新行）会产生问题。例如。就像我们采用整数输入然后尝试采用字符串输入一样。

```
value1=sc.nextInt();
value2=sc.nextLine(); 
```

value2 将自动读取 newLine 字符并且不会接受用户输入。

**解决方案**：我们只需要在接受下一个用户输入之前添加一行代码，即

```
sc.nextLine(); 
```

或者

```
value1=sc.nextInt();
sc.nextLine();
value2=sc.nextLine(); 
```

注意：不要忘记关闭 Scanner 以防止内存泄漏；

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-11-22T06:59:57.867

问题出在 input.nextInt() 方法上——它只读取 int 值。因此，当您继续使用 input.nextLine() 阅读时，您会收到 "\n" Enter 键。所以要跳过这个，你必须添加 input.nextLine()。希望这现在应该清楚了。

试试这样：

```
System.out.print("Insert a number: ");
int number = input.nextInt();
input.nextLine(); // This line you have to add (It consumes the \n character)
System.out.print("Text1: ");
String text1 = input.nextLine();
System.out.print("Text2: ");
String text2 = input.nextLine(); 
```*******

# c++ - 指向对象构造函数的函数指针

> ID：13102046
> 
> 赞同：1
> 
> 时间：2012-10-27T16:37:05.330
> 
> 标签：c++, constructor, function-pointers

> **可能重复：**
> [如何传递指向构造函数的函数指针？](https://stackoverflow.com/questions/954548/how-to-pass-a-function-pointer-that-points-to-constructor)

是否可以将指向对象构造函数的函数指针传递给函数？

就像是

```
myFunction( myObj() ); 
```

在这种情况下应该如何声明函数？

```
void myFunction( (*ObjConstructorPointer)() ) 
```

不起作用，因为没有返回类型

# google-apps-script - 在 google 应用程序脚本中的 scriptdb 查询语句中获取列值，并带有引号，例如“客户名称”

> ID：13102050
> 
> 赞同：1
> 
> 时间：2012-10-27T16:37:26.967
> 
> 标签：google-apps-script

我正在尝试从`ScriptDb`数据库中为名为“Cust Name”的列获取列的值 - 如果它是 CustName 或类似的，我可以执行以下操作：

```
while(result.hasnext()){ 

  res = result.next();
  var CustName = res.CustName;

} 
```

如果该列称为“客户名称”，我如何获得值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T02:39:20.533

您可以尝试以下方法，而不是使用点符号访问它：

```
while(result.hasnext()){ 

  res = result.next();
  var CustName = res["Cust Name"];

} 
```

我使用电子表格对此进行了测试（因为这是获取加载了空格的属性的一种方法），并且它为带有空格的列返回了正确的值。

# django - GeoDjango：基本地理查询的例外情况

> ID：13102052
> 
> 赞同：1
> 
> 时间：2012-10-27T16:37:38.203
> 
> 标签：django, geodjango, geos

我在开发环境中的 SpatiaLite 上运行 GeoDjango 时遇到地理查询问题。

```
from django.contrib.gis.db import models

class Test(models.Model):
    poly = models.PolygonField()
    point = models.PointField()
    geom = models.GeometryField()
    objects = models.GeoManager() 
```

通过外壳测试：

```
>>> from geotest.models import Test
>>> from django.contrib.gis.geos import GEOSGeometry
>>> 
>>> point = GEOSGeometry("POINT(0 0)")
>>> point
<Point object at 0x105743490>
>>> poly = GEOSGeometry("POLYGON((0 0, 0 1, 1 1, 1 0, 0 0))")
>>> poly
<Polygon object at 0x105743370>
>>> 
```

有了这些定义，让我们尝试一些基本的地理查询。首先`contains`：

```
>>> Test.objects.filter(point__within=poly)
Assertion failed: (0), function appendGeometryTaggedText, file WKTWriter.cpp, line 228.
Abort trap 
```

django shell 死了。并与`within`：

```
>>> Test.objects.filter(poly__contains=point)
GEOS_ERROR: Geometry must be a Point or LineString
Traceback (most recent call last):
...
GEOSException: Error encountered checking Coordinate Sequence returned from GEOS C function "GEOSGeom_getCoordSeq_r".
>>> 
```

其他组合也会导致各种异常。我必须遗漏一些明显的东西，因为这些都是非常基本的。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T17:51:29.003

您的要求似乎是正确的。

您是否检查过您是否满足所有要求？

[https://docs.djangoproject.com/en/1.4/ref/contrib/gis/install/#spatial-database](https://docs.djangoproject.com/en/1.4/ref/contrib/gis/install/#spatial-database)

您是否正确初始化了您的空间数据库？

[https://docs.djangoproject.com/en/dev/ref/contrib/gis/install/spatialite/#creating-a-spatial-database-for-spatialite](https://docs.djangoproject.com/en/dev/ref/contrib/gis/install/spatialite/#creating-a-spatial-database-for-spatialite)

# ios - 为 iPhone 5 @ app start 加载不同的 Storyboard

> ID：13102054
> 
> 赞同：9
> 
> 时间：2012-10-27T16:37:54.237
> 
> 标签：ios, xcode, ios6

我在**AppDelegate.m**中使用以下代码来检测用户正在使用的设备：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
    {
        CGSize result = [[UIScreen mainScreen] bounds].size;
        if(result.height == 480)
        {
            NSLog(@"iPhone 3,5 Inch");

            [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];

        }
        if(result.height == 568)
        {
            NSLog(@"iPhone 4 Inch");
            [UIStoryboard storyboardWithName:@"iPhone5-storyboard" bundle:nil];
        }
    }

    return YES;
} 
```

但是当我构建应用程序时，会显示 NSLog，但没有出现 Storyboard ......

*   部署信息中的 Main Storyboard 字段为空，因此代码决定加载什么...

你能帮助我吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-27T16:42:18.700

这是我现在在另一篇文章中找到的一种方法：

```
if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPhone)
    {    // The iOS device = iPhone or iPod Touch

        CGSize iOSDeviceScreenSize = [[UIScreen mainScreen] bounds].size;
        UIViewController *initialViewController = nil;
        if (iOSDeviceScreenSize.height == 480)
        {   // iPhone 3GS, 4, and 4S and iPod Touch 3rd and 4th generation: 3.5 inch screen (diagonally measured)

            // Instantiate a new storyboard object using the storyboard file named Storyboard_iPhone35
            UIStoryboard *iPhone35Storyboard = [UIStoryboard storyboardWithName:@"Storyboard_iPhone35" bundle:nil];

            // Instantiate the initial view controller object from the storyboard
            initialViewController = [iPhone35Storyboard instantiateInitialViewController];
        }

        if (iOSDeviceScreenSize.height == 568)
        {   // iPhone 5 and iPod Touch 5th generation: 4 inch screen (diagonally measured)

            // Instantiate a new storyboard object using the storyboard file named Storyboard_iPhone4
            UIStoryboard *iPhone4Storyboard = [UIStoryboard storyboardWithName:@"Storyboard_iPhone4" bundle:nil];

            // Instantiate the initial view controller object from the storyboard
            initialViewController = [iPhone4Storyboard instantiateInitialViewController];
        }

        // Instantiate a UIWindow object and initialize it with the screen size of the iOS device
        self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

        // Set the initial view controller to be the root view controller of the window object
        self.window.rootViewController  = initialViewController;

        // Set the window object to be the key window and show it
        [self.window makeKeyAndVisible];

    } else if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad)

    {   // The iOS device = iPad

        UISplitViewController *splitViewController = (UISplitViewController *)self.window.rootViewController;
        UINavigationController *navigationController = [splitViewController.viewControllers lastObject];
        splitViewController.delegate = (id)navigationController.topViewController;

    } 
```

# javascript - 另一个变量中的 JS 变量

> ID：13102059
> 
> 赞同：3
> 
> 时间：2012-10-27T16:38:21.410
> 
> 标签：javascript, jquery

我有一个函数可以使用其他变量，具体取决于传递的内容。

像`this = ActionBar(slot)`插槽包含“一”。

我想在里面创建一个调用，`object.slot.name`但它应该事先转换它以使命令看起来像`object.one.name`。有没有办法在 javascript/jquery 中做到这一点？

我模糊地记得，其他一些语言将其用作 {slot} 或类似的东西。

抱歉，如果已经问过这个问题，我也检查了 google 和 stackoverflow，但没有找到答案。

另外我想知道这种变量传递的正确编程术语是什么？

编辑它的原因是误解。我正在研究 OOP js，所以 object 是一个对象，one 是一个对象，name 是一个属性，但是在传递时我将“one”作为字符串传递给函数。

尝试评估，它在点缀一个对象时不起作用。

源代码：

```
function disableActionButton(slot){
    $("#"+slot).attr("disabled","disabled")
    gcd = player.slot.gcd*1000
    cd = setInterval(function(){
            gcd = gcd - 10
            $("#"+slot).val(gcd+"ms").css("color","red");
    },10)
    setTimeout(function(){
            window.clearInterval(cd)
            $("#"+slot).removeAttr("disabled").css("color","black").val(player.slot.name);
    }, player.slot.gcd*1000)    
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T16:51:19.680

~~真的不清楚你当前的结构是什么~~ *（现在你已经发布了代码更加清晰，请参阅下面的“更新”）*，但基本上在 JavaScript 中做这种事情的方法*是*拥有一个容器对象。（如果您还没有，请引入一个。）然后`slot`可以引用该对象的属性，如下所示：

```
var container = {
    one: "This is one",
    two: "This is two"
};

// ...

function foo(slot) {
    console.log(container[slot]);
}

// ...

foo("one"); // ends up logging "This is one"
foo("two"); // ends up logging "This is two" 
```

这是因为容器对象具有属性，在 JavaScript 中可以通过两种不同的方式引用：

1.  使用点表示法和文字名称，例如`container.one`, 或

2.  在字符串中使用括号表示法和名称，例如`container["one"]`.

除了属性名称的来源之外，它们完全等效。当然，在第二种情况下，属性名称不必是*文字*字符串，它可以是任何表达式的结果，包括变量引用（例如，您可以从 获取名称`slot`）。

这适用于所有对象属性，包括引用函数的属性。我之所以提到这一点，只是因为您在问题中提到了函数，因此如果需要，您可以这样做：

```
function foo(slot) {
    container[slot]();
} 
```

...它使用参数`container`持有的名称调用该属性的`slot`函数。所以，如果`slot`是`"one"`，它确实如此`container.one()`。

* * *

**更新**：

您的来源直接与上面的容器示例相呼应，只需将上述内容应用于它：

```
function disableActionButton(slot){
    $("#"+slot).attr("disabled","disabled")
    // ---------v----v---- here
    gcd = player[slot].gcd*1000
    cd = setInterval(function(){
            gcd = gcd - 10
            $("#"+slot).val(gcd+"ms").css("color","red");
    },10)
    setTimeout(function(){
            window.clearInterval(cd)
    // ------------------------------------------------------------ and here--v----v
            $("#"+slot).removeAttr("disabled").css("color","black").val(player[slot].name);
    // ------v----v------- and here
    }, player[slot].gcd*1000)    
} 
```

或者，不是每次都查找插槽数据，而是抓取一次并重用它：

```
function disableActionButton(slot){
    // Grab it once...
    var slotdata = player[slot];

    $("#"+slot).attr("disabled","disabled")
    // ---vvvvvvvvv--- then use it
    gcd = slotdata.gcd*1000
    cd = setInterval(function(){
            gcd = gcd - 10
            $("#"+slot).val(gcd+"ms").css("color","red");
    },10)
    setTimeout(function(){
            window.clearInterval(cd)
            $("#"+slot).removeAttr("disabled").css("color","black").val(slotdata.name);
    }, slotdata.gcd*1000)    
} 
```

这个没有什么特别的名字。您将属性名称传递给函数，并且该函数正在`player`使用该名称查找对象上的属性。在其他一些语言中，这可能被称为“反射”，但该术语并不真正适用于 JavaScript 等动态语言。

# batch-file - 这是关闭bat文件中命令回显功能的特殊方法吗？

> ID：13102062
> 
> 赞同：0
> 
> 时间：2012-10-27T16:38:34.237
> 
> 标签：batch-file

我最近在学习红宝石。ruby 的 bin 目录中有一个 rake.bat。我在其中找到了一行代码`@"ruby.exe" "%~dpn0" %*`。为什么他们在“ruby.exe”之前添加@。这是关闭bat文件中命令回显功能的特殊方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T16:41:12.650

是的！放在`@`命令之前会抑制回显命令。如果要全局执行，请将其放在`@echo off`批处理文件的顶部。`echo off`禁用命令回显，并`@`保持`echo off`命令本身不被回显。

# javascript - 验证选择字段

> ID：13102064
> 
> 赞同：6
> 
> 时间：2012-10-27T16:39:04.830
> 
> 标签：javascript, jquery, validation

我正在验证一个表单，但我在使用这个特定的选择验证时遇到了问题。

```
<div class="control-group" id="sukupuoli">
        <label class="control-label">Sukupuoli</label>
        <div class="controls">
            <select name="sukupuoli">
            <option value="Valitse">Valitse</option>
            <option value="Naaras">Naaras</option>
            <option value="Uros">Uros</option>
            </select>
        </div>
</div> 
```

这是用于验证的 JS：

```
$('#ilmoittuminen').submit(function(){

        var Sukupuoli = $('input[name=sukupuoli]').val()

            if(Sukupuoli  == "Valitse"){
            $('.control-group#sukupuoli').addClass("error");
            $('select[name=sukupuoli]').focus();
            return false; 
            }

            var ilmoittautumisdata = $('#ilmoittuminen').serialize();
            $.ajax({
                url: "",
                data: ilmoittautumisdata,
                type: "POST"})
            .done(function () {

                })
            .error(function () {
            $('.control-group').addClass("alert");
            });

                return false;
}); 
```

它不提交，但也不添加类错误。[一把小提琴](http://jsfiddle.net/ChristianNikkanen/HV7sn/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T16:43:21.447

你应该在`select`这里使用：

```
var Sukupuoli = $('select[name=sukupuoli]').val() 
```

**示例：http:** [//jsfiddle.net/HV7sn/1/](http://jsfiddle.net/HV7sn/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T16:47:45.467

您不需要使用 $('.control-group#sukupuoli').addClass("error"); 只需通过 id 选择它：

$('#sukupuoli').addClass("error");

# c# - 从文件流中删除一个字节

> ID：13102065
> 
> 赞同：0
> 
> 时间：2012-10-27T16:39:18.670
> 
> 标签：c#, filestream

如果我从 FileStream 中有偏移量，如何删除一个字节，然后重写它，例如：

```
Offset  00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F
DB0     00 00 00 00 00 00 01(byte to delete) 00 ....... 
```

我试过这个但失败了：

```
byte[] newFile = new byte[fs.Length];
fs.Position = 0;
fs.Read(newFile, 0, va -1);
fs.Position = va + 1;
fs.Read(newFile, 0, va + 1);
fs.Close();
fs.Write(newFile, 0, newFile.Length); 
```

其中 va 等于 DB5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T16:50:24.860

代码中有一些错误：

```
// the buffer should be one byte less than the original file
byte[] newFile = new byte[fs.Length - 1];
fs.Position = 0;
// you should read "va" bytes, not "va-1" bytes
fs.Read(newFile, 0, va);
fs.Position = va + 1;
// you should start reading into positon "va", and read "fs.Length-va-1" bytes
fs.Read(newFile, va, fs.Length - va - 1);
fs.Close();
fs.Write(newFile, 0, newFile.Length); 
```

**但是**，那种使用`Read`方法的*方式并不可靠*。该方法实际上可以读取*的*字节数比您请求的少。您需要使用方法调用的返回值，即实际读取的字节数，然后循环直到获得所需的字节数：

```
byte[] newFile = new byte[fs.Length - 1];
fs.Position = 0;
int pos = 0;
while (pos < va) {
  int len = fs.Read(newFile, pos, va - pos);
  pos += len;
}
fs.Position = va + 1;
int left = fs.Length - 1;
while (pos < left) {
  int len = fs.Read(newFile, pos, left - pos);
  pos += len;
}
fs.Close();
fs.Write(newFile, 0, newFile.Length); 
```

# c# - 如何使用 C# 中的对象初始化程序初始化包装在 getter/setter 中的 EntitySet？

> ID：13102068
> 
> 赞同：0
> 
> 时间：2012-10-27T16:39:40.397
> 
> 标签：c#, windows-phone-7, linq-to-sql

我正在为我自己的应用程序[使用 MVVM 调整 Windows Phone 数据库示例。](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh286405%28v=vs.92%29.aspx)在这里，它建议使用允许使用（使用方法）`EntitySet`分配的 getter/setter 组合来包装模型对象上的属性，例如`IEnumerable``Assign`

```
// Example method from a model class 'SomeModelObject'
[Association(Storage = "_todos", OtherKey = "_categoryId", ThisKey = "Id")]
public EntitySet<ToDoItem> ToDos
{
    get { return this._todos; }
    set { this._todos.Assign(value); }
} 
```

但是，当我尝试实例化一个具有`EntitySet`属性的对象时，它不会允许它，例如

```
SomeModelObject myModelObject = new SomeModelObject() {
    Property1 = "foo",
    Property2 = true,
    // Following raises an error, even though setter should allow assignment
    // from an IEnumerable (because of the use of 'Assign' in the setter)
    ToDos = new List<ToDoItem>() {
        new ToDoItem(),
    },
}; 
```

错误如下，

```
Error    1   Cannot implicitly convert type 
'System.Collections.Generic.List<SomeApp.ToDoItem>' to 
'System.Data.Linq.EntitySet<SomeApp.ToDoItem>' 
```

如何实例化从 a 引用的对象`EntitySet`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T18:47:46.220

好吧，您发布的代码有两个问题。

我怀疑主要问题是您*试图*将属性的值设置为 a`List<ToDoItem>`当属性的类型是`EntitySet<ToDoItem>`. （您发布的错误消息与您发布的代码不匹配，但没关系。）您说它“应该允许从 an 分配`IEnumerable`，但我不知道为什么您会期望这种情况，给定属性的声明：

```
public EntitySet<ToDoItem> ToDos { ... } 
```

该属性*不是*type `IEnumerable<ToDoItem>`。

由于某种原因，您*还*使用了两次：`new SomeModelObject`

```
SomeModelObject myModelObject = new SomeModelObject() {
    new SomeModelObject() {
        Property1 = "foo",
        ...
    }
}; 
```

我假设您的*真实*代码看起来更像这样：

```
SomeModelObject myModelObject = new SomeModelObject() {
  Property1 = "foo",
  ... 
}; 
```

以后请多加小心 - 很难诊断未发布的代码。

周围有三个选项`EntitySet`。

如果您想将新项目添加到*现有* `EntitySet<ToDoItem>`项目，您可以在对象初始化程序中执行此操作：

```
SomeModelObject myModelObject = new SomeModelObject {
  Property1 = "foo",
  Property2 = true,
  ToDos = {
    new ToDoItem(),
  }
}; 
```

或者，如果要设置属性本身的值，则需要创建一个新的`EntitySet<ToDoItem>`：

```
SomeModelObject myModelObject = new SomeModelObject {
  Property1 = "foo",
  Property2 = true,
  ToDos = new EntitySet<ToDoItem> {
    new ToDoItem(),
  }
}; 
```

不过，这似乎不太可能是一个好主意，我实际上建议将 setter 设为私有。

或者，如果您真的希望能够分配 any `IEnumerable<ToDoItem>`，您可以更改属性的类型：

```
[Association(Storage = "_todos", OtherKey = "_categoryId", ThisKey = "Id")]
public IEnumerable<ToDoItem> ToDos
{
    get { return this._todos; }
    set { this._todos.Assign(value); }
} 
```

# rest - REST 中的只读字段

> ID：13102073
> 
> 赞同：0
> 
> 时间：2012-10-27T16:40:21.590
> 
> 标签：rest

我有一个通过 REST 接口公开的模型。在此模型的生命周期中，某些字段将变为只读，而其他字段将保持可编辑状态。

我很高兴在服务器端处理这个问题（[根据这个问题](https://stackoverflow.com/questions/4939985/restful-api-design-should-unchangable-data-in-an-update-put-be-optional)） - 我希望客户端发送所有数据，如果他们尝试更改只读字段，我将返回 HTTP 错误 409。

但是，客户端如何/应该如何发现一个字段是否是只读的以允许它禁用输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T16:56:19.507

好吧，您似乎需要一种方法让客户端不仅获取数据，还获取有关数据的数据，即元数据。如果主要数据通过 REST URL 与 /container/resourceid 一样可用，您可以将元数据想象为 /metadata/container/resourceid 或 /container/resourceid?format=meta

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T17:13:08.750

@吉米P

这是一个简单的例子：

```
*** Request ***
GET /resource/12 HTTP/1.1
Host: service.org

*** Response ***
HTTP/1.1 200 Ok
Content-Type: …
Content-Length: …
Link: </resource/12/edit-form>; rel="edit-form"; type="text/html"

[Entity Body Goes Here] 
```

注意以下细节：

*   链接头（参见 RFC：[https](https://www.rfc-editor.org/rfc/rfc5988) ://www.rfc-editor.org/rfc/rfc5988 ）
*   链接的关系值“edit-form”（参见 RFC：[https](https://www.rfc-editor.org/rfc/rfc6861) ://www.rfc-editor.org/rfc/rfc6861 ）
*   键入“text/html”，您可以在此处使用任何具有足够表达能力的媒体类型来指示需要提交哪些数据元素。

如果客户端可以识别链接头和“rel”属性的值，那么它就可以获取编辑资源并确定需要发回哪些字段。当然除了数据元素（即字段）“form”还可以表示提交URI、数据编码类型、HTTP方法等...

# django - 在 AWS Elastic Beanstalk 上设置 Django：未找到 WSGIPath

> ID：13102076
> 
> 赞同：29
> 
> 时间：2012-10-27T16:40:34.533
> 
> 标签：django, amazon-web-services, wsgi, amazon-elastic-beanstalk, django-wsgi

几天来，我一直在尝试在 Amazon Web Services 的 Elastic Beanstalk 下设置 Django。我认为我遇到的问题是这个：

```
ERROR - Your WSGIPath refers to a file that does not exist. 
```

[我按照这里](http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/create_deploy_Python_django.html)的教程进行操作，直到第 6 步结束时一切顺利，但除了第 5 步 #2 中的通用 Elastic Beanstalk 页面外，我一生都无法显示任何内容。当我跑

```
./manage.py runserver 
```

在我的本地机器上，一切正常，但我无法部署该页面。我首先尝试使用我自己编写的一个小型 Django 站点。它没有用，所以我删除了我所做的所有内容并再次尝试，但没有成功，所以我删除了所有内容并再次尝试安装新的 django。我试过很多次摆弄小东西，但我想我错过了一些重要的东西。

我添加了一个 python.config 文件，如[本教程](http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/create_deploy_Python_custom_container.html)中所述。

这是我的文件结构：

```
-.git/
-.mysite/
    -myapp/
        -__init__.py
        -models.py
        -tests.py
        -views.py
    -mysite/
        -__init__.py
        -settings.py
        -urls.py
        -wsgi.py
    -.ebextensions/
        -python.config
    -manage.py
    -mysite.db
    -requirements.txt 
```

从我的settings.py：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': 'mysite.db',
        'USER': '',
        'PASSWORD': '',
        'HOST': '',
        'PORT': '',
    }
} 
```

这是python.config：

```
container_commands:   01_syncdb:    
    command: "django-admin.py syncdb --noinput"
    leader_only: true

option_settings:
    - namespace: aws:elasticbeanstalk:container:python
      option_name: WSGIPath
      value: mysite/wsgi.py
    - option_name: DJANGO_SETTINGS_MODULE
      value: mysite.settings
    - option_name: AWS_SECRET_KEY
      value: <This is my secret key>
    - option_name: AWS_ACCESS_KEY_ID
      value: <This is my access key> 
```

我需要在其他地方定义我的 WSGIPath 吗？有没有办法通过 AWS 控制台做到这一点？我应该完全跳过EB并直接使用EC2吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-17T21:12:35.423

来自[https://forums.aws.amazon.com/thread.jspa?messageID=396656൰](https://forums.aws.amazon.com/thread.jspa?messageID=396656&#396656)

“.ebextensions”目录必须位于应用程序的根目录中，但从日志输出来看，该目录位于“mysite/.ebextensions”目录中。因此，例如，在您运行“git aws.push”时遵循文档中的 django 教程后，您的根目录将如下所示：

```
.
├── .ebextensions
│   └── python.config
├── .elasticbeanstalk
│   ├── config
├── .git
├── .gitignore
├── manage.py
├── mysite
│   ├── __init__.py
│   ├── settings.py
│   ├── urls.py
│   └── wsgi.py
└── requirements.txt 
```

而不是这个：

```
.
└── mysite
    ├── .ebextensions
    ├── .elasticbeanstalk
    ├── .git
    ├── .gitignore
    ├── manage.py
    ├── mysite
    └── requirements.txt 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-17T23:04:18.660

`.elasticbeanstalk/optionsettings.your-app-name`在您的应用程序的根目录中查找。搜索`WSGIPath`并确保它是您想要的路径。看起来它默认为`application.py`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-24T15:17:17.330

我遇到了同样的问题（*“您的 WSGIPath 引用了一个不存在的文件”*），终于找到了解决方案：

*   问题：我直接从 GitHub 下载项目包（“下载 Zip”），它的结构可能不正确。
*   解决方案：我使用压缩命令正确压缩文件，没有主文件夹。（参见[http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/using-features.deployment.source.html](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/using-features.deployment.source.html)）。

注意：起初，我搜索的方向错误，因为 EB 也显示此消息：*在构建期间发生错误：命令 01_migrate 失败。*. 所以我认为包括 *.config 在内的文件位置正确。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-02-08T09:51:26.820

解决方案：使用 EBCLI

打开`eb config` 对我来说它显示`WSGIPath: application.py` 现在更改为

```
WSGIPath: my_app/wsgi.py 
```

保存和部署。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-07-05T04:05:57.323

好的，这就是在尝试了一百万件事后对我有用的方法。您必须运行`eb update`才能更新环境。

因此，请确保`.elasticbeanstalk/optionsettings.whatever-env`将 WSGIPath 设置为您想要的，并确保`.ebextensions/whatever.config`具有以下内容：

```
option_settings:
  - namespace: aws:elasticbeanstalk:container:python
    option_name: WSGIPath
    value: whatever/wsgi.py 
```

然后运行`eb update`，它*应该可以*工作。请记住，您必须设置别名以确保您的`eb`命令确实有效。例如：

```
alias eb="python2.7 ../AWS-ElasticBeanstalk-CLI-2.6.3/eb/linux/python2.7/eb" 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-10-17T18:07:42.837

在关注 AWS 的文档之后，我遇到了同样的问题。我为避免它所做的是通过 EB CLI 逐步初始化应用程序，而不使用 AWS 文档指示的命令（~/ebdjango$ eb init -p python2.7 django-tutorial），并逐步创建环境也是。我在 EB CLI 中采取的步骤如下：

1.  初始化应用程序
    1.  `eb init`
    2.  选择默认区域
    3.  输入应用程序名称（按回车键默认使用）
    4.  确认我正在使用 Python
    5.  选择与我本地环境兼容的 Python 版本
    6.  设置 SSH
2.  创建环境
    1.  `eb create`
    2.  输入环境名称（按回车键默认使用）
    3.  输入 DNS CNAME 前缀（按回车键默认使用）
    4.  选择负载均衡器类型（我通过输入 1 选择了经典）

创建环境后，我使用`eb config`打开 EB 的配置文件来确认我的 WSGI 的路径应该是什么：

```
aws:elasticbeanstalk:container:python:
  NumProcesses: '1'
  NumThreads: '15'
  StaticFiles: /static/=static/
  WSGIPath: path/to/wsgi.py 
```

如果进行了任何更改，请确保保存文件并通过`eb open`在终端中输入以使用前面步骤中指定的域名打开浏览器窗口来确认所有内容均已完成。

# objective-c - SQL 与核心数据的真实世界性能：需要透视和可能的特定修复

> ID：13102079
> 
> 赞同：0
> 
> 时间：2012-10-27T16:40:58.343
> 
> 标签：objective-c, sql, ios, core-data

我有一个文字游戏应用程序，可以访问单词和线索列表，大约有 10 万个条目。数据库只被访问，从不改变。我使用 SQL 方法构建了应用程序，它在 iOS 6 上运行良好，但在 iOS 5 上从数据库中获取新线索的时间非常慢：

*   iOS 5 使用 SQL 从 100K 中获取一条记录大约需要 12 秒。
*   iOS 6 使用 SQL 从 100K 中获取一条记录大约需要 700-1000 毫秒。

这两个都在 32 GB iPod Touch 上。

鉴于这种性能，我使用 Core Data 制作了一个版本。我的方法通过首先计算适合查询的记录，然后随机选择一个来获得随机数据库条目。代码如下。我读到的所有内容都表明 Core Data 会更快：

*   iOS 5，计数记录大约需要 4 秒，检索其中一条记录大约需要 50 - 1500 毫秒。总时间约5秒。
*   iOS 6，计数记录需要 2 秒多一点，检索其中一条记录大约需要 300-500 毫秒。总共约3秒。

因此，与 SQL 相比，Core Data 在 iOS 5 上更快，但在 iOS 6 上更慢。就我而言，无论哪种方式，性能都太慢了。我知道开销来自下面给出的方法（对于核心数据版本）。所以，两个问题：

1.  关于这个问题的任何一般性建议，着眼于理解它并提高性能？
2.  具体来说，下面附加的核心数据代码怎么样：我做了什么愚蠢的事情来减慢它的速度吗？还是我应该添加其他东西来加快速度？这是我对 Core Data 的第一次尝试。

谢谢。

```
- (NSArray *) randomClue {

NSManagedObjectContext* context = [self managedObjectContext];

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"A"];

NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription
                               entityForName:@"WL28"
                               inManagedObjectContext:context];
[fetchRequest setEntity:entity];

NSPredicate *predicate = [self createSearchQuery];
[fetchRequest setPredicate:predicate];

NSError *error;

NSDate *date1 = [NSDate date];
NSString *timeString1 = [formatter stringFromDate:date1];

int resCount = [context countForFetchRequest:fetchRequest
                                       error:&error];

NSDate *date2 = [NSDate date];
NSString *timeString2 = [formatter stringFromDate:date2];

int t1 = [timeString1 intValue];
int t2 = [timeString2 intValue];
int d1 = t2-t1;    
NSLog(@"randomClue:");
NSLog(@"    Time to count array entries: %i", d1);

int ranNum = arc4random_uniform(resCount-1);
int ranNum2 = ranNum + 1;

// Now we fetch just one answer object, not a whole database or even a piece of it!

[fetchRequest setReturnsObjectsAsFaults:YES];
[fetchRequest setPropertiesToFetch:nil];
[fetchRequest setFetchLimit:1];
[fetchRequest setFetchOffset:ranNum2];

NSDate *date3 = [NSDate date];
NSString *timeString3 = [formatter stringFromDate:date3];

self.wl28 = [context executeFetchRequest:fetchRequest error:&error];

NSDate *date4 = [NSDate date];
NSString *timeString4 = [formatter stringFromDate:date4];

int t3 = [timeString3 intValue];
int t4 = [timeString4 intValue];
int d2 = t4-t3;
NSLog(@"    Time to retrieve one entry: %i", d2);

return self.wl28;
} 
```

**编辑**：在下面添加了 createSearchQuery

```
- (NSPredicate *)createSearchQuery {

NSMutableArray *pD = [[GameData gameData].curData valueForKey:@"persData"];
NSNumber *currMin = [pD objectAtIndex:0];
NSNumber *currMax = [pD objectAtIndex:1];
NSNumber *dicNo = [pD objectAtIndex:2];
NSString *dict = nil;

if ([dicNo intValue] == 0) dict = @"TWL";
if ([dicNo intValue] == 1) dict = @"LWL";

NSPredicate *dictPred = [NSPredicate predicateWithFormat:@"dict == %@", dict];
NSPredicate *lowNoCPred = [NSPredicate predicateWithFormat:@"noC >= %@", currMin];
NSPredicate *highNoCPred = [NSPredicate predicateWithFormat:@"noC <= %@", currMax];

NSPredicate *query = [NSCompoundPredicate andPredicateWithSubpredicates:[NSArray
                      arrayWithObjects:dictPred, lowNoCPred, highNoCPred,nil]];
NSLog(@"%@", query);
return query;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T18:42:21.770

您可以尝试将索引添加到实体内的 noC 和/或 dict 属性。它可能会加快您的查询时间。

# objective-c - 如何检查当前时间是否在ios中的指定范围内？

> ID：13102082
> 
> 赞同：4
> 
> 时间：2012-10-27T16:41:02.660
> 
> 标签：objective-c, ios

> **可能重复：**
> [确定当前本地时间是否介于两个时间之间（忽略日期部分）](https://stackoverflow.com/questions/2108223/determine-if-current-local-time-is-between-two-times-ignoring-the-date-portion)

在 iOS 中，我该如何执行以下操作：

我有两个`NSDate`对象代表商店的营业时间和关闭时间。这些对象中的时间是准确的，但未指定日期（商店在同一时间打开和关闭，无论日期如何）。如何检查当前时间是否在此时间范围内？

请注意，如果将打开和关闭时间设为`NSDate`对象以外的另一种格式会有所帮助，我可以接受。目前，我只是从文件中读取日期字符串，例如“12:30”，并使用日期格式化程序来创建匹配`NSDate`对象。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-27T19:13:47.750

**更新：** 请注意，此解决方案特定于您的情况，并假设商店营业时间不超过两天。例如，如果营业时间从周一晚上 9 点到周二上午 10 点，它将不起作用。因为晚上 10 点是在晚上 9 点之后，但不是在上午 10 点之前（一天内）。所以记住这一点。

我制作了一个函数，它会告诉你一个日期的时间是否在另外两个日期之间（它忽略了年、月和日）。还有第二个辅助函数，它为您提供了一个新的 NSDate，其中“中和”了年、月和日组件（例如，设置为某个静态值）。

想法是在所有日期之间将年、月和日组件设置为相同，以便比较仅依赖于时间。

我不确定这是否是最有效的方法，但它确实有效。

```
- (NSDate *)dateByNeutralizingDateComponentsOfDate:(NSDate *)originalDate {
    NSCalendar *gregorian = [[[NSCalendar alloc]
                              initWithCalendarIdentifier:NSGregorianCalendar] autorelease];

    // Get the components for this date
    NSDateComponents *components = [gregorian components:  (NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit) fromDate: originalDate];

    // Set the year, month and day to some values (the values are arbitrary)
    [components setYear:2000];
    [components setMonth:1];
    [components setDay:1];

    return [gregorian dateFromComponents:components];
}

- (BOOL)isTimeOfDate:(NSDate *)targetDate betweenStartDate:(NSDate *)startDate andEndDate:(NSDate *)endDate {
    if (!targetDate || !startDate || !endDate) {
        return NO;
    }

    // Make sure all the dates have the same date component.
    NSDate *newStartDate = [self dateByNeutralizingDateComponentsOfDate:startDate];
    NSDate *newEndDate = [self dateByNeutralizingDateComponentsOfDate:endDate];
    NSDate *newTargetDate = [self dateByNeutralizingDateComponentsOfDate:targetDate];

    // Compare the target with the start and end dates
    NSComparisonResult compareTargetToStart = [newTargetDate compare:newStartDate];
    NSComparisonResult compareTargetToEnd = [newTargetDate compare:newEndDate];

    return (compareTargetToStart == NSOrderedDescending && compareTargetToEnd == NSOrderedAscending);
} 
```

我用这段代码来测试它。可以看到年月日设置为一些随机值，不影响时间检查。

```
NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
[dateFormatter setDateFormat:@"yyyy:MM:dd HH:mm:ss"];

NSDate *openingDate = [dateFormatter dateFromString:@"2012:03:12 12:30:12"];
NSDate *closingDate = [dateFormatter dateFromString:@"1983:11:01 17:12:00"];
NSDate *targetDate = [dateFormatter dateFromString:@"2034:09:24 14:15:54"];

if ([self isTimeOfDate:targetDate betweenStartDate:openingDate andEndDate:closingDate]) {
    NSLog(@"TARGET IS INSIDE!");
}else {
    NSLog(@"TARGET IS NOT INSIDE!");
} 
```

# java - 从 bouncycastle 中的私有恢复 PGP 公钥

> ID：13102084
> 
> 赞同：4
> 
> 时间：2012-10-27T16:41:16.120
> 
> 标签：java, bouncycastle, pgp

在算法层面，可以从私钥恢复公钥。但是有没有办法在带有 PGP 密钥的 bouncycastle 库中做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:39:48.897

在[PGPPrivateKey](http://www.bouncycastle.org/docs/pgdocs1.5on/org/bouncycastle/openpgp/PGPPrivateKey.html)中有方法 getPublicKeyPacket，而后者又具有方法 getKey。

这不是你要找的吗？

# ember.js - Ember 控制器可以绑定到它自己的属性的更改事件吗？

> ID：13102085
> 
> 赞同：0
> 
> 时间：2012-10-27T16:41:16.590
> 
> 标签：ember.js, property-binding, ember-observable

给定一个控制器，如：

```
App.SignInController = Ember.Controller.extend
  authenticated: false
  authenticatedDidChange: (() =>
    console.log @get('authenticated')
  ).observes('controller.authenticated') 
```

这似乎不起作用，所以我一定不明白观察者是如何工作的。我*认为*它应该在 controller.authenticated 上创建一个观察者。但是，当我打电话时，`@set("authenticated", true)`什么都没有记录。

更新：我确实尝试更换`controller.authenticated`无济于事`App.signInController.authenticated`。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T17:06:10.783

最终，我在 Quora 上偶然发现了这个 Yehuda Katz[的答案。](http://www.quora.com/Ember-js/Can-I-observe-the-content-of-a-controller-with-addObserver)

```
App.friendsController = Ember.ArrayProxy.extend({
  contentDidChange: function() {
    // stuff here
  }.observes('content')
}); 
```

查看此答案后，我注意到该`observes`调用仅指定了没有`controller`或`App.signInController`前缀的属性名称。将我上面的解决方案更改为`observes('authenticated')`正常工作。

```
App.SignInController = Ember.Controller.extend
  authenticated: false
  authenticatedDidChange: (() ->
    console.log @get('authenticated')
  ).observes('authenticated') 
```

# php - 如何在php中提取扩展名

> ID：13102087
> 
> 赞同：-4
> 
> 时间：2012-10-27T16:41:58.090
> 
> 标签：php, arrays, extract

我正在尝试使用 php 从字符串中提取扩展名，然后查看数组内部。似乎我确实得到了扩展，但是当我查看数组内部时它不起作用并且我看不到问题。也许你可以建议或指出我。谢谢你。

这是代码：

```
$file = '/folder/subfolder/file.mp4' //It can be also a url with domain etc. basically anything

$extension = pathinfo($file);
$final_extension = strtolower($extension['extension']);

$fileArray = array("mp4","mp3");

if (in_array($final_extension, $fileArray)) {
    echo "Found!";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T16:46:02.897

您可以使用正则表达式。这将是模式：“/.(\w+)$/”

这将是实现：

```
if (preg_match('/.(\w+)\/?$/', $file, $matches) { $extension = $matches[1]; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T16:48:56.217

您缺少“；”

更正了下面的行。它应该可以正常工作。经测试。

```
$file = '/folder/subfolder/file.mp4'; 
```

# scala - Play2.0 Scala：从配置中提取数据作为字符串

> ID：13102088
> 
> 赞同：4
> 
> 时间：2012-10-27T16:42:06.010
> 
> 标签：scala, playframework, playframework-2.0

使用 Scala，在 Play 2.0 项目中，我试图从配置文件中获取数据。

目前我使用以下代码提取字符串：

```
val foo = Play.current.configuration.getString("foo") 
```

我原以为会取回一个`String`对象，但是却`Option[String]`返回了一个对象。

我找不到任何描述`Option[T]`对象并调用`toString()`返回的 Java 文档`Some( foo )`。

当使用配置方法从配置中提取`Boolean`和`Int`值时也会发生同样的情况 - 即，`Option[Boolean]`并`Option[Int]`返回。

谁能解释这个`Option[T]`对象是什么以及我如何以`application`方法调用暗示它将被返回的形式访问我想要的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T16:50:08.120

在 scala 中， type[`Option[T]`](http://www.scala-lang.org/api/current/scala/Option.html)表示 type 的可选值`T`。如果您习惯于 Java 术语，则可以将 Option 称为“可能是的值`null`”。

在 Play 中，在获取配置时使用它们，因为字符串可能不存在 - 如果您尝试使用 Java 读取它，它将返回`null`.

要获取配置字符串，您可以使用`getOrElse`，如果配置字符串不存在，您可以提供默认值：

```
val foo = Play.current.configuration.getString("foo").getOrElse("bar") 
```

# java - Java ME Platform SDK 的模拟器在 Windows 7 上不显示文本

> ID：13102090
> 
> 赞同：2
> 
> 时间：2012-10-27T16:42:13.847
> 
> 标签：java, sdk, java-me, emulation, java-wireless-toolkit

我正在尝试在 Windows 7 上使用 Java ME Platform SDK 3.2 中的 vanilla j2me 模拟器，但它的屏幕上没有显示任何文本。

它绘制了所有 ui 控件，但在我的 midlet 和模拟器菜单中都没有文本。

我认为这是某种我不太确定的字体问题。有人知道如何解决这个问题吗？

# sql - SQL在存储过程中使用if语句更新表

> ID：13102095
> 
> 赞同：2
> 
> 时间：2012-10-27T16:42:56.980
> 
> 标签：sql, stored-procedures, if-statement, sql-update

我有一个学生表，有两个字段，StudentName 和 Grade。我正在尝试编写一个存储过程来更新成绩。如果学生有 A，我想把它改成 B。如果他们有 B，我想把它改成 A。如果他们还有其他东西，我想不管它。这是我最好的尝试

```
create procedure sp_changegrades
if Grade = 'A' update Students set Grade = 'B'

else if Grade = 'B' update Students set Grade = 'A' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T16:44:20.883

只需使用`CASE`

```
UPDATE Students
SET Grade = 
(
   CASE WHEN Grade = 'A' THEN 'B'
        WHEN Grade = 'B' THEN 'A'
        ELSE Grade     -- "If they have anything else I want to leave it alone."
    END
) 
```

或者

```
UPDATE Students
SET Grade = 
(
   CASE WHEN Grade = 'A' 
        THEN 'B'
        ELSE 'A'
    END
)
WHERE Grade IN ('A','B') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T16:45:27.510

你可以这样写。在此解决方案中，您定义`join`部分更新然后更新的规则。

```
create procedure sp_changegrades
as
begin
    update Students set
        Grade = G.Grade_New
    from Students as S
        inner join (values
            ('A', 'B'),
            ('B', 'A')
        ) as G(Grade_Old, Grade_New) on G.Grade_Old = S.Grade 
end 
```

或者你可以使用`case`

```
create procedure sp_changegrades
as
begin
    update Students set
        Grade = 
           case Grade
               when 'A' then 'B'
               when 'B' then 'A'
               else Grade
           end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T17:08:54.277

您可以使用 Case 语句，并添加 where 子句，以便仅更新相关行。

```
UPDATE Students
SET Grade = 
(
   CASE WHEN Grade = 'A' THEN 'B'
        WHEN Grade = 'B' THEN 'A'
        ELSE Grade     -- "Included for Completeness, should never be utilized."
    END
)
WHERE Grade in ('A','B') 
```

# windows-8 - Windows 8 低延迟视频流

> ID：13102096
> 
> 赞同：2
> 
> 时间：2012-10-27T16:43:18.340
> 
> 标签：windows-8, video-streaming, rtmp

我的游戏基于 Flash 并使用 RTMP 向玩家提供实时视频。视频应该从单个位置流式传输到多个客户端，而不是客户端之间。端到端视频流的基本要求应该是非常低的延迟，小于 0.5s。

在服务器和客户端上使用许多调整，我能够实现大约。在环回网络接口的情况下，使用 RTMP 和 Adob​​e Live Media Encoder 的延迟为 0.2 秒。

现在的问题是将项目移植到 Windows 8 商店应用程序。本机 Windows 8 为 IIS + [http://playerframework.codeplex.com/提供流畅的流媒体扩展](http://playerframework.codeplex.com/)播放器+视频编码器兼容实时流畅的流媒体。至于编码器，现在我只测试了支持实时流畅流媒体的 Microsoft Expression Encoder 4。尽管在播放器端使用了 msRealTime 属性，但延迟非常大，我无法通过调整编码器使其低于 6-10 秒。不同的消息来源指出，平滑 [实时] 流不是低延迟视频流场景的选择，而且使用 Expression Encoder 4 似乎不可能通过任何设置组合来实现低延迟。有一些硬件视频编码器支持流畅的流媒体，例如来自 envivio 或 digital rapids 的视频编码器，但是：

1.  它们是昂贵的
2.  与 Expression Encoder 相比，我完全不确定它们是否可以显着改善编码器端的延迟
3.  即使他们可以消除编码器的时间，其余的平滑流（IIS 端）是否可以支持所需的速度。

问题：

1.  如果有的话，可以使用什么技术以亚秒级延迟流式传输到 Win8 客户端？
2.  你知道兼容win8或容易移植到支持rtmp的win8的播放器吗？

* * *

添加。Build 2012 的实时翻译在桌面模式下使用 Rtmp 和 Smooth Streaming。在 Metro 模式下，它使用 RTMP 和用于 Metro 的 Flash Player。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:24:22.493

我可以确认，Smooth Streaming 不会是您在这里选择的技术。在具有完美条件的最佳场景下，您将获得的最好结果是几秒钟（绝对最小延迟将是块长度本身，即使其他所有东西都有 0 延迟。）

我认为最有可能使用 UDP 的 RTSP/RTMP 或类似的东西是你最好的选择。我会更多地关注视频会议技术，而不是广泛的观众流媒体技术。如果我没记错的话，有一些 .NET 组件可以处理用于视频会议的 RTSP H.264 - 如果我以后能找到它们，我会在这里发布。

# cordova - Phonegap blackberry 找不到 js/webworks.js 且屏幕未居中

> ID：13102101
> 
> 赞同：0
> 
> 时间：2012-10-27T16:44:06.017
> 
> 标签：cordova, blackberry, blackberry-webworks

我正在黑莓模拟器中测试 phonegap 示例应用程序。

我有两个问题：

**第一：**页面不在设备屏幕的中心，它总是在顶部。如果“设备准备就绪”标签实际上是一个按钮，我无法触发它。

**第二：**在模拟器的控制台中，它说：

```
FRIDG: could not find js/webworks.js. 
```

我在 js 文件夹中查看了该文件，但它不存在。

# regex - Hadoop Pig 拉丁正则表达式匹配

> ID：13102115
> 
> 赞同：1
> 
> 时间：2012-10-27T16:45:50.647
> 
> 标签：regex, apache-pig

我有以下 Pig Latin 过滤器：

```
filtered = FILTER raw BY year >= 1960 AND string MATCHES '(?!.*[0-9].*|.{1}|.*@.*|.*www.*|.*http.*)'; 
```

我打算为以下字符串获得以下结果：

```
a #false .{1}
email@example.com #false .*@.*
http://somesite.com #false .*http.*
www.somesite.com #false .*www.*
12word #false .*[0-9].*
wo12rd #false .*[0-9].*
word12 #false .*[0-9].*
red #true 
```

相反，我得到一个空的结果集。

编辑：我已将正则表达式更新为：

```
'^(?!.*[0-9].*|.{1}|.*@.*|.*www.*|.*http.*)$' 
```

在 m.buettner 的修正之后，却继续得到一个空的结果集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:13:43.357

有两个问题。首先，Pig Latin 似乎要求您匹配完整的字符串，而不是“只是字符串中某处的匹配”。但是您的否定前瞻不会消耗任何字符，因此它与完整的字符串不匹配。这可以简单地通过附加来解决`.*`。其次，您的规则`.{1}`（哪里`{1}`是多余的）不需要这个字符是字符串中的唯一字符。因此，在您的最后一个示例中，它将简单地消耗`r`of`red`并引发负前瞻。

因此，这是解决方案：

```
(?!.*[0-9]|.$|.*@|.*www|.*http).* 
```

# javascript - IE10 中的本地存储访问被拒绝

> ID：13102116
> 
> 赞同：53
> 
> 时间：2012-10-27T16:45:51.340
> 
> 标签：javascript, local-storage, access-denied, internet-explorer-10

昨天我安装了 Windows 8，现在我试图了解为什么我在访问本地存储时收到“拒绝访问”消息。该页面通过浏览器 (http://localhost) 在同一台 PC 上提供服务。我的感觉是 IE 10 中的安全设置之一是错误的，但我还没有弄清楚是哪一个。

触发错误的 JavaScript 代码行是：

```
if(window.localStorage.getItem('phone') == null) 
```

该代码在最新版本的 Chrome 中运行良好。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-12-30T22:53:49.690

我们的用户在使用带有 IE 10 的 Windows 8 上使用 LocalStorage 功能（包括 Twitter）的网站时遇到问题。在打开 F12 开发人员工具的情况下访问其中一个网站时，`SCRIPT5: Access is denied`控制台上会出现一条消息。

在与 Microsoft 支持合作后，我们确定了原因。`C:\Users\username\Appdata\LocalLow`结果是他们的用户配置文件中文件夹的设置有问题。

您计算机上的每个文件夹都有一个完整性设置。有关此设置目的的更多信息，请参见此处：http: [//msdn.microsoft.com/en-us/library/bb625964.aspx](http://msdn.microsoft.com/en-us/library/bb625964.aspx)

每个用户配置文件中文件夹（及其子文件夹）的完整性设置`AppData\LocalLow`应该设置为“低”（因此得名）。在我们的例子中，该文件夹的完整性级别设置不正确。要解决此问题，请在命令提示符窗口中运行以下命令：

`icacls %userprofile%\Appdata\LocalLow /t /setintegritylevel (OI)(CI)L`

（如果计算机上有多个用户帐户并且其他用户有相同的问题，则需要在每个受影响的用户帐户下运行该命令。）

至于这个设置最初是如何改变的？在我们的案例中，这是由我们部署到工作站的自定义 Windows 8 映像中的问题引起的。对于其他遇到问题的人，我的研究表明，使用“系统清洁器”实用程序可能是罪魁祸首。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-10T15:49:00.057

毫无疑问，可能有很多原因导致相同的症状，但这就是为我解决这个问题的原因。

我只有一台带有 IE11 的 Windows 7 PC 在尝试任何涉及`window.localStorage`其他信誉良好且表现良好的网站的 JavaScript 时出现“访问被拒绝”的症状。Process Explorer 的使用表明，最近的原因是当 taskhost.exe（代表 Internet Explorer）试图打开`DOMStore\container.dat`Generic Read-Write 时访问被拒绝。事实上，比这更糟糕的是：如果我删除`container.dat`了，同样的 ACCESS DENIED 发生了，即使文件不再存在。而且，如果我删除了（隐藏的）`DOMStore`文件夹，当 taskhost.exe 尝试重新创建它时，它也会收到 ACCESS DENIED。

在追了两天假线索之后，最终的解决办法是这样的：

注册表项：

```
HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings\5.0\LowCache\Extensible Cache\DOMStore\CachePath 
```

（请注意该`LowCache`字符串中的）被错误地设置为：

```
%USERPROFILE%\AppData\Local\Microsoft\Internet Explorer\DOMStore 
```

什么时候应该：

```
%USERPROFILE%\AppData\LocalLow\Microsoft\Internet Explorer\DOMStore 
```

结果是低完整性 localStorage 请求被定向到 AppData 磁盘存储的中等完整性区域，从而产生 ACCESS DENIED 错误，并终止 JavaScript 的使用`window.localStorage`。

这个注册表项多年来一定是错误的：也许是热心接受有缺陷的平台预览等的副作用。此错误在完全删除和重新安装 IE11 后仍然存在。

中等完整性缓存有一个外观相似的注册表项：

```
HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet Settings\5.0\Cache\Extensible Cache\DOMStore\CachePath 
```

并且正确地保留为：

```
%USERPROFILE%\AppData\Local\Microsoft\Internet Explorer\DOMStore 
```

并且不应更改。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T18:26:18.907

尝试在 IE 设置中的“高级”选项卡下的“安全”子列表中启用增强保护模式。这将启用 Microsoft XSS 筛选器。我在登录 SE 并获取 google+ 通知时遇到了类似的问题，我的第一个解决方法是使用管理员权限启动 IE。但我认为 EP 模式也可以解决您的问题。

相关链接：[了解增强保护模式](http://blogs.msdn.com/b/ieinternals/archive/2012/03/23/understanding-ie10-enhanced-protected-mode-network-security-addons-cookies-metro-desktop.aspx)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-24T10:10:36.050

Mark Russinovich 总是说：“如有疑问，请使用[Process Monitor](http://technet.microsoft.com/en-US/sysinternals/bb896645.aspx) ”：

localStorage 数据存储在以下文件夹中的 XML 文件中：C:\Users\[USERNAME]\AppData\Local\Microsoft\Internet Explorer\DOMStore

重现问题时的文件活动配置文件可以告诉您问题是由缺少文件访问权限还是由防病毒程序引起的。

我可以通过将只读属性添加到“DOMStore\container.dat”来重现该错误。您应该检查所有文件/文件夹权限和属性是否设置正确。在我的机器上，管理员和我自己的帐户对上述文件夹具有完全权限。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-08T07:56:09.353

转到工具/Internet 选项/高级，然后在“安全”下选择“启用 DOM 存储”复选框。这应该可以解决问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-20T20:58:56.733

我将涉及的网站添加到 IE 的受信任站点部分，并且没有再次收到错误消息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-21T16:00:11.307

此问题也可能是由于注册表项丢失或损坏造成的。如果[重置](https://support.microsoft.com/en-us/kb/923737)无法解决问题，[`LocalLow`文件夹具有正确的完整性级别](https://stackoverflow.com/a/20848924/138200)，并且[`DOMStore`注册表值正确](https://social.technet.microsoft.com/Forums/ie/en-US/066767a5-f9d5-45f4-95cf-dcd0ff030090/script5-access-is-denied-error-when-accessing-web-sites-using-localstorage?forum=ieitprocurrentver)，请运行以下命令在配置文件中重新注册 IE：

32 位操作系统：

```
C:\WINDOWS\system32\ie4uinit.exe -BaseSettings 
```

64 位操作系统：

```
C:\WINDOWS\system32\ie4uinit.exe -BaseSettings
C:\Windows\SysWOW64\ie4uinit.exe -BaseSettings 
```

有关详细信息，请参阅[IE MSDN 博客](http://web.archive.org/web/20151225100256/http://blogs.msdn.com/b/askie/archive/2012/09/13/things-to-do-when-troubleshooting-internet-explorer-terminal-server-and-profiles.aspx)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-08T16:52:16.330

除了这里已经很好的答案之外，我想添加另一个观察结果。就我而言，Windows %LOCALAPPDATA% 目录结构上的 NTFS 权限以某种方式被破坏了。

诊断这个问题。我创建了一个新的 Windows 帐户（配置文件），它与 localStorage 配合得很好，所以我煞费苦心地遍历了各自的 %LOCALAPPDATA%\Microsoft\Internet Explorer 树寻找差异。

我发现了这个宝石：

```
C:\Users\User\AppData\Local\Microsoft>icacls "Internet Explorer"
Internet Explorer Everyone:(F) 
```

我不知道权限是如何被广泛设置的！

更糟糕的是，所有子目录都关闭了所有权限。难怪 DOMStore 无法访问！

另一个帐户的工作权限是：

```
 NT AUTHORITY\SYSTEM:(OI)(CI)(F)
 BUILTIN\Administrators:(OI)(CI)(F)
 my-pc\test:(OI)(CI)(F) 
```

这与父目录的权限相匹配。

因此，出于懒惰，我通过将所有目录设置为“Internet Explorer”并继承权限来解决问题。正确的做法是手动应用每个权限，而不是依赖继承功能。但是如果您遇到此问题，需要检查的一件事是 %LOCALAPPDATA%\Microsoft\Internet Explorer 的 NTFS 权限。如果 DOMStore 的权限被破坏，所有访问 localStorage 的尝试都会遇到拒绝访问。

# google-analytics - 当我尝试“验证您的网络跟踪设置”时，Google Analytics 无法识别我的第二个帐户

> ID：13102119
> 
> 赞同：0
> 
> 时间：2012-10-27T16:45:53.767
> 
> 标签：google-analytics

从[这里的文档](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1008083)

谁能明白为什么这行不通？我认为 UA-xxx-15 的跟踪仍然有效，但我无法让 Google Analytics 识别出 UA-xxx-17 的代码甚至存在......

```
 var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-xxx-15']);
    _gaq.push(['_trackPageview']);
    _gaq.push(['_trackPageLoadTime']);

  _gaq.push(['b._setAccount', 'UA-xxx-17']);
  _gaq.push(['b._setDomainName', 'example.com']);
  _gaq.push(['b._setAllowLinker', true]);
  _gaq.push(['b._trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T09:25:41.907

我发现这个问题的答案（不被接受）也是我问题的答案。

事实证明，除非您复制它提供给您的确切代码，否则 Google Analytics 将无法识别跟踪代码。我认为这非常令人困惑，因为跟踪状态可以是“未安装跟踪”或“正在接收数据”，但当状态为“未安装跟踪”时，它也正在接收数据！两条状态行看起来是一样的，但后者的意思是“你没有复制我们给你的确切代码并把它放在你的网站上”。

# jquery - 自定义复选框不更新真正的复选框值

> ID：13102121
> 
> 赞同：2
> 
> 时间：2012-10-27T16:46:18.130
> 
> 标签：jquery, checkbox

我正在尝试使用 jQuery（[**小提琴**](http://jsfiddle.net/gionaf/ST32J/)）制作一个简单的自定义复选框。

我不明白为什么它不选中/取消选中真正的复选框。Ids 选择器被正确传递，实时值也是如此。

相关html：

```
<div id="corpo">
<div id="checkoptions">
<div><label>Option 1 <input type="checkbox" id="option1" checked></label></div>
</div>
</div> 
```

相关的javascript：

```
// custom checkboxes
$('#corpo input[type=checkbox]').each(function(){

    var checkbox = $(this), checkid = checkbox.attr('id'),
            checked =  '', content = '&#10007;';

    if(checkbox.is(':checked')){ var checked =  ' checked', content = '&#10003;'; }

    checkbox.hide()
            .after('<div class="checkbox'+checked+'" id="c-'+checkid+'"><span>'+content+'</span></div>');
});

// update custom checkboxes values
$('#corpo').on('click','.checkbox',function(){

    var fakeCheckbox = $(this),
            realID = fakeCheckbox.attr('id').replace('c-',''),
            realCheckbox = $('#'+realID), checked = realCheckbox.is(':checked');

    if(checked){

        realCheckbox.attr('checked',false);
        fakeCheckbox.removeClass('checked').find('span').html('&#10007;');

    }else{

        realCheckbox.attr('checked',true);
        fakeCheckbox.addClass('checked').find('span').html('&#10003;');

    }

}); 
```

我已经尝试取消隐藏原始复选框，使用`prop('checked',false)`and`removeAttr('checked')`而不是`attr('checked',false)`.

我也需要更新真正的复选框，在“假”复选框中切换类是不够的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T17:02:00.180

```
$('#corpo').on('click','.checkbox',function(e){
    var isChecked = $(this).is('.checked');
    $(this).html(isChecked ? '&#10007;' : '&#10003;').toggleClass('checked');
    $('#'+this.id.replace('c-','')).prop('checked', !isChecked);

  //solve the annoying select issue
    document.onselectstart = function() { return false; };
    e.target.ondragstart = function() { return false; };
    return false;
}); 
```

[**小提琴**](http://jsfiddle.net/ST32J/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T17:42:28.100

您在`is(':checked')`更改代码和删除 ID 检测方面遇到了问题：

```
// update custom checkboxes values
$('#corpo .checkbox').on('click',function(){
    var fakeCheckbox = $(this),
        realCheckbox = $(this).siblings('input'),
    checked = fakeCheckbox.hasClass('checked');
    if(checked){
        fakeCheckbox.removeClass('checked').find('span').html('&#10007;');
        realCheckbox.removeAttr('checked');
    }else{
        fakeCheckbox.addClass('checked').find('span').html('&#10003;');
        realCheckbox.attr('checked','checked');
    }
}); 
```

# java - 如何用休眠映射一个双端队列？

> ID：13102124
> 
> 赞同：1
> 
> 时间：2012-10-27T16:46:45.720
> 
> 标签：java, hibernate, jakarta-ee

如何使用休眠映射 Deque？

```
@Entity
class MyClass {
    @OneToMany
    Deque<StackObject> stack = new LinkedList<StackObject>();
} 
```

例外：

```
java.lang.RuntimeException: Error invoking constructor public org.apache.tapestry5.internal.hibernate.HibernateSessionSourceImpl(org.slf4j.Logger,java.util.List): Illegal attempt to map a non collection as a @OneToMany, @ManyToMany or @CollectionOfElements 
```

# codeigniter - 如何在 CI 2 中检查所有数据库的可用性

> ID：13102126
> 
> 赞同：1
> 
> 时间：2012-10-27T16:47:01.030
> 
> 标签：codeigniter, codeigniter-2

我有 5 个数据库的配置文件 database.php。

如果其中一个数据库不可用，如何在所有页面中收到 500 错误消息“站点不可用”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T10:31:31.083

我发现你的问题很有趣，并且一直在做一些研究来解决你的问题。我告诉你我的解决方案：首先是激活钩子，所以在你的 config.php 文件中进行这个更改：

```
$config['enable_hooks'] = TRUE; 
```

一旦激活了钩子，你需要创建一个新的钩子，在 config/hooks.php 文件中添加如下内容：

```
$hook['post_controller_constructor'] = array(
  'class'    => 'DBTest',
  'function' => 'index',
  'filename' => 'dbtest.php',
  'filepath' => 'hooks',
  'params'   => array(),
); 
```

因此，一旦控制器被实例化，你的钩子就会启动，但还没有运行任何方法。这是必须使用 $CI = &get_instance()

完成创建文件 /application/hooks/dbtest.php 的内容类似于以下内容：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class DBTest {

  function index() {

    $CI = &get_instance();

    $databases = array(
      'mysqli://user1:pass1@host1/db1',
      'mysqli://user2:pass2@host2/db2',
      'mysqli://user3:pass3@host3/db3',
      'mysqli://user4:pass4@host4/db4',
      'mysqli://user5:pass5@host5/db5',
    );

    foreach ($databases as $dsn) {

      $db_name = substr(strrchr($dsn, '/'), 1);
      $CI->load->database($dsn);
      $CI->load->dbutil();

      if(!$CI->dbutil->database_exists($db_name)) {
        // if connection details incorrect show error
        show_error("Site is not available: can't connect to database $db_name");                
      }
    }

  }
} 
```

您必须为 $CI->load->database() 使用 dsn，这样我们可以在尝试加载数据库时处理错误而不是 Code Igniter。

希望这可以帮助。

# c# - 在视图和控制器之间传递数据

> ID：13102128
> 
> 赞同：0
> 
> 时间：2012-10-27T16:47:12.897
> 
> 标签：c#, asp.net-mvc

想看看是否有人可以就如何解决我目前面临的这个问题提供一些建议/指示。场景就像……</p>

1.  我有一个页面说 A 执行搜索并显示数据。
2.  在页面 A 上有一个 ActionLink，它将所选记录的 ID 传递到页面 B。
3.  在重定向到页面 B 之前，我需要存储/保留页面 A 的表单数据（我不想使用会话或隐藏文件，因为数据很关键）。

4.  一旦用户在页面 B 上完成工作，我需要在页面 B 上保存更改并重定向回页面 A。

5.  此处，页面 A 应根据步骤 3 中的保存器表单数据发出 Post 请求。目的是显示在重定向到页面 B 之前存在的搜索数据。

就像是..

```
View A
    // Search textboxes here
    // Search data list here with ActionLink column

View B
   // more controls here
   // Submit button - saves changes on this page. 
   // after submit button processing need to go back to View A 
   // and display the same Search data List based on Seach textboxes values 
   // those were entered by user before coming to this View B. 
   // Ques: Not sure how to persist data from View A between calls to View B and then View B to View A. 
```

有没有人有更好的方法来实现这一目标？

目前我的解决方案是......

1.  在 ActionLink 单击上发出 ajax POST 请求并使用控制器将表单集合保存在缓存中。
2.  使默认的 ActionLink GET 请求传递 ID 并在控制器中返回视图 B。
3.  在视图 B 上，在提交时执行 ajax POST 请求以将数据保存在页面 B 上并在 ajax 成功函数中从缓存中返回数据。
4.  使用在上述 ajax 成功中返回的数据发出另一个 ajax POST 请求以显示视图 A。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T18:02:58.300

如果您依赖于整页刷新，那么您需要使用 Session。您没有说明为什么不想使用它，但是 Cache 对象完全不适合此目的，因为如果服务器需要重新获得一些内存，它可以被清除，并且它是在用户之间共享的. 会话专为您所描述的目的而构建 - 在整页刷新之间保留数据。

或者，我会考虑将您的网站构建为单页应用程序，也就是说，您不会在导航之间进行整页刷新，并且可以将数据存储在客户端上的 javascript 对象中。由于您非常强调数据至关重要，因此 Session 可能会更安全，因为如果用户不小心导航离开页面，您的 javascript 对象将被清除，而基于服务器的会话对象将保留它在会话生命周期内。

您还可以将数据存储在 cookie/本地存储对象 (html5) 中，但这对于您正在做的事情可能是多余的。

# php - 如何获取子表/MySQL

> ID：13102135
> 
> 赞同：0
> 
> 时间：2012-10-27T16:48:00.173
> 
> 标签：php, zend-framework

我有小“树”。它有`id`和`parent``content`

[http://pastebin.com/aix99CL0](http://pastebin.com/aix99CL0)

在示例中，我处于 ​​2（id）位置。我想自动编辑 4,5,6,7,8 并向“内容”添加各种内容。

2 - 父 ID=1，内容=1/2；4 的父 id=2，内容=1/2/4。如果我将 id 4 放在 id 3 上，它会创建具有以下内容的树：4=1/3/4, 6=1/3/4/6, 7=1/3/4/7, 8=1/3 /4/8

[http://pastebin.com/5yRxYDU0](http://pastebin.com/5yRxYDU0)

如何在 PHP 中做到这一点？我的意思是只得到孩子，没有任何遗漏。我不想使用嵌套集。

PSEUDOCODE: id=3 get id 4, content .= tab[4][content].tab[4][id] 等等...

我也想在zend框架中做到这一点。

**在回复我的帖子的第二个帖子中添加了数组**

# php - 依赖于“if, if/else” PHP 语句结果的一系列 mySQL 选择查询中的选项

> ID：13102140
> 
> 赞同：1
> 
> 时间：2012-10-27T16:48:53.220
> 
> 标签：php, mysql

如果基于存储所选房间类型的用户输入的第五个表中的输入满足条件，是否可以对 PHP 进行编码以执行 mysql SELECT 查询以提取房间价格值？

例如：

我根据每种类型的房间有单独的表格，其中包含该房间类型的每个日期的价格。

![表](../Images/f4dafd7f681f8cad04d30afafdc4de1a.png)

如果用户在 HTML 表单中为 2 月 6 日开始的 ABC_2 巡演选择 DBL 房间（ABC_2 巡演可能有多个开始日期），是否有一种方法可以将 php 编码为基于此用户输入的查询的排序选项在 Roomtype1 下发布到预订表的值？

## PHP

```
if ($row['roomtype1']) = `SGL`  {
$tourquery = "SELECT SELECT sg.roomprice, r.totpax 
         FROM reservations r, sgl_table sg 
         WHERE r.tourstart = sg.tourstart
         AND r.tourbk_id = sg.tour_id"; 
$tourresult = $db->query($tourquery);} 

elseif ($row['roomtype1']) = `DBL`) {
$tourquery = "SELECT db.roomprice, r.totpax 
         FROM reservations r, dbl_table db 
         WHERE t.tourstart = db.tourstart
         AND r.tour_id = db.tour_id"; 
$tourresult = $db->query($tourquery);} 
```

等等...

有这种可能吗？这个语法正确吗？

另外，我应该在 php 代码中使用 ` 或 ' 来选择 roomtype1 的行值（SGL、DBL、TPL、QUD）（假设有可能）？

# java - for 循环到 while 循环

> ID：13102142
> 
> 赞同：0
> 
> 时间：2012-10-27T16:49:09.820
> 
> 标签：java, loops

我正在使用一个`for`循环以大写字母打印向后的字母，但我想知道如何用`while`循环做同样的事情，我不太擅长。

```
String alphabet = "abcdefghijklmnopqstuvwxyz";      
int x = 0;

for(x = alphabet.length() - 1; x > -1; x--) {
  System.out.print(alphabet.charAt(x));
  System.out.print(alphabet.toUpperCase());                 
} 
```

我还需要在它到达 A 时终止它。认为它是这样的，但我不知道如何让它向后循环。我真的很感谢你的帮助！

```
while(alphabet.length() < 26) {
  System.out.print(alphabet.charAt(x));  
  System.out.print(alphabet.toUpperCase());     
  if(x == A) {
    break;
  }     
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T16:51:47.930

```
for (initialization; condition; increment) {

} 
```

等同于：

```
{
    initialization;
    while(condition) {
       // body
       increment;
    }
} 
```

外部块`block`为初始化参数创建了一个范围，我们也进入了一个 for 循环。但是，如果你`for-loop`在循环之外声明你的变量，那么你可以省略那个外部块。

现在您可以将 for 循环映射到 while 循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T16:58:39.710

在 Java 中有一种更简单的方法来反转字符串。

```
public class StringReversalExample {
    public static void main(String[] args) {
      String alphabet = "abcdefghijklmnopqstuvwxyz";
      String reversedString = new StringBuilder(alphabet).reverse().toString();
      System.out.println(reversedString);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T16:51:48.773

尝试这个：

```
public static void main(String[] args) {
  char[] alphabet =  "abcdefghijklmnopqstuvwxyz".toCharArray();
  int index = alphabet.length - 1;

  while (index >= 0) {
    System.out.println(alphabet[index--]);
  }
} 
```

这是一种内存开销最小的最有效的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T16:51:48.353

```
x = alphabet.length() - 1;
while( x > -1 )
    {
        System.out.print(  alphabet.charAt( x ));  
        System.out.print( alphabet.toUpperCase() );
        x--;
    } 
```

# c# - C# 中 Linq 平均方法的替代方法

> ID：13102143
> 
> 赞同：0
> 
> 时间：2012-10-27T16:49:16.420
> 
> 标签：c#, linq

我想知道在不使用 Linq Method Average() 的情况下编写此代码的另一种方法。

```
 double[] array1 = { 1, 2, 3, 5, 0 };
        double average1 = array1.Average();
        Console.WriteLine(average1); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T16:52:43.113

这个问题有点模糊，但有一些替代方案：

```
double average2 = array1.Sum() / Array.Length; 
```

或者

```
double sum = 0;
foreach(var item in array1)
{
   sum += item;
}
double average2 = sum / array1.Length; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T16:53:22.787

不知道为什么您不想使用 LINQ Average 函数，但是您可以遍历数组的元素以计算总和，最后除以元素的数量：

```
double[] array1 = { 1, 2, 3, 5, 0 };
double average1 = 0;
foreach (var item in array1)
{
    average1 += item;
}
average1 = average1 / array1.Length;
Console.WriteLine(average1); 
```

现在您查看了这段代码，就很清楚为什么下面的代码要好得多：

```
double[] array1 = { 1, 2, 3, 5, 0 };
double average1 = array1.Average();
Console.WriteLine(average1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T17:06:35.403

给你一个不涉及任何 LINQ 方法的简明答案（尽管你为什么要限制自己，让我失望）：

```
double[] arr = new[] {1.0, 2.0, 3.0};
double avg = 0;
Array.ForEach(arr, x => avg += x)
avg = avg / arr.Length; 
```

# sql - 在另一个表中查找具有 2 个或更多匹配属性的行

> ID：13102146
> 
> 赞同：0
> 
> 时间：2012-10-27T16:49:33.307
> 
> 标签：sql, tsql

这个让我很困惑，我将继续通过 SQL 进行解释。下面是数据结构：

**财产**

```
PropertyId     Name         
1              Property one
2              Property two 
```

**物业特点**

```
PropertyFeatureId     FeatureId     PropertyId
1                     1             1
2                     2             1
3                     1             2 
```

**特征**

```
FeatureId     Name
1             Hot tub
2             Wifi 
```

我将如何找到所有有热水浴缸和无线网络的房产？所以在上面的例子中，我想要属性 1，而不是 2。

我想的一种方法是通过我们想要的内部连接和过滤，但我想概括一下，这样我就可以找到所有具有特征 A、B、C 等的属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T16:52:02.940

这里的想法是计算 propertyName 实例的数量，并且它等于`WHERE`子句条件中提供的值的数量。

```
SELECT  a.Name
FROM    Property a
        INNER JOIN [Property Features] b
            ON a.PropertyID = b.PropertyId
        INNER JOIN Feature c
            ON b.FeatureID = c.FeatureID
WHERE   c.Name IN ('Hot tub','Wifi')
GROUP BY a.Name
HAVING COUNT(DISTINCT c.Name) = 2 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!3/3b4b6/1)

# r - 从 r 包中提取源代码

> ID：13102149
> 
> 赞同：4
> 
> 时间：2012-10-27T16:50:11.507
> 
> 标签：r, package

我正在尝试安装`r`软件包 sowas，不幸的是它太旧了，无法在新版本的`r`.

根据作者的说法，您可以使用该`source()`函数的包来访问代码，但我无法弄清楚如何做到这一点。

任何帮助表示赞赏。

这是我描述的包的链接，因为它不是 CRAN 包：[http ://tocsy.pik-potsdam.de/wavelets/](http://tocsy.pik-potsdam.de/wavelets/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T16:22:41.920

.zip 文件是 Windows 二进制文件，因此不会太有趣。您要查看的是 .tar.gz 存档的内容。您可以提取这些内容，然后查看 R 子目录中的代码。

您还可以更新包以使用新版本的 R，以便您可以实际构建和安装包。为此，您可以像以前一样解压缩 .tar.gz，但现在您需要添加一个 NAMESPACE 文件。这只是包目录顶部的一个纯文本文件，其格式如下：

```
export(createar)
export(createwgn)
export(criticalvaluesWCO)
export(criticalvaluesWSP)
export(cwt.ts)
export(plot.wt)
export(plotwt)
export(readmatrix)
export(readts)
export(rk)
export(wco)
export(wcs)
export(writematrix)
export(wsp) 
```

在您实际希望能够使用的包中的任何函数的导出语句的位置。如果未导出函数，则包中的函数仍然可以访问该函数，但用户不能使用它（很容易）。一旦你这样做了，你应该能够构建和安装包。

我已经冒昧地做了一些。我实际上并没有花时间弄清楚哪些函数有用并且应该被导出，只是假设如果为应该导出的函数编写了帮助页面，并且如果没有帮助页面，那么我没有导出它。我使用 Rd2roxygen 将帮助页面转换为 roxygen 代码（因为这就是我滚动的方式），之后不得不进行一些清理，但它似乎安装得很好。

因此，如果您安装了 devtools 软件包，您实际上应该可以使用以下命令直接安装我修改的版本

```
library(devtools)
install_github("SOWAS", "Dasonk") 
```

就个人而言，我建议您采用添加 NAMESPACE 文件和不直接添加的方式，因为这样您就可以更好地控制代码，并且更有能力解决使用包时可能出现的任何问题。或者，如果您使用 git，您可以分叉我的 repo 并从那里继续修复问题。祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-01T16:54:09.363

如果您想查看特定函数的源代码，只需键入不带大括号的函数名称，然后按 Enter。您将看到代码。

例如，在命令提示符中键入 var 以查看其代码。

```
> var
function (x, y = NULL, na.rm = FALSE, use) 
{
    if (missing(use)) 
        use <- if (na.rm) 
            "na.or.complete"
        else "everything"
    na.method <- pmatch(use, c("all.obs", "complete.obs", "pairwise.complete.obs", 
        "everything", "na.or.complete"))
    if (is.na(na.method)) 
        stop("invalid 'use' argument")
    if (is.data.frame(x)) 
        x <- as.matrix(x)
    else stopifnot(is.atomic(x))
    if (is.data.frame(y)) 
        y <- as.matrix(y)
    else stopifnot(is.atomic(y))
    .Call(C_cov, x, y, na.method, FALSE)
}
<bytecode: 0x0000000008c97980>
<environment: namespace:stats> 
```

# java - 捕获组中的可选子字符串

> ID：13102151
> 
> 赞同：0
> 
> 时间：2012-10-27T16:50:30.223
> 
> 标签：java, regex

我有一个正则表达式可以正确捕获字符串中后跟数字的斜线。正则表达式的捕获组部分如下所示：

```
\(\d)+\\?? 
```

（斜线后的一些数字直到问号，但不包括问号），并且此捕获组之前和之后的正则表达式还有更多内容。现在我还想在我的捕获组中包含一个可选的特定前缀（称之为“abc_”）：

*   必须包含整个前缀（所有四个字符）才能包含在捕获的组中
*   如果不存在前缀，则仍会捕获捕获组的数字部分
*   如果前缀部分存在或存在其他前缀，则字符串与正则表达式不匹配。

一些例子：

```
abc_12345  is captured
12345      is captured
ab_12345   fails to match the regex
abc_       fails to match the regex
abcd_      fails to match the regex 
```

我该如何构建这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T16:55:49.913

如果我理解正确，你想要这个：

```
((?:abc_)?\\d+)[?]? 
```

?: 运算符将组转换为非捕获组。我不明白带有部分前缀的部分。如果您允许正则表达式前面的任何内容，则不能拒绝某个可选前缀。您需要在模式前面有一个明确的分隔符，例如空格以拒绝前缀。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T16:58:27.617

您的正则表达式甚至似乎不适用于您已经描述的情况。它仅捕获一位数字而不是完整数字。您的转义也是不一致的。

但是，这应该做你打算做的事情：

```
((?:abc_)?\\d+)\\?? 
```

您的最后一个要求，即不应匹配不同的前缀，只有在您使用正则表达式的前面部分时才能回答。（如果此捕获组前面有`\w+`例如，则任何前缀都会匹配，但只会捕获完整且正确的前缀）

# git - 当我推送到我的 BitBucket GIT 存储库时，如何自动将代码推送到 Azure 网站？

> ID：13102157
> 
> 赞同：3
> 
> 时间：2012-10-27T16:51:47.750
> 
> 标签：git, azure, bitbucket, azure-web-app-service

我知道使用 AppHarbor 可以做到这一点。BitBucket 有一项专门针对 AppHarbor 的服务，我相信它会在我推送到我的存储库时通知他们提取最新版本。

有没有办法使用 Windows Azure 网站设置类似的工作流程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T21:37:13.007

更新（2012 年 10 月 27 日）：事实证明，对公共 git repro 的 bitbucket 支持今天才可用，所以试试吧！

* * *

目前这仅支持 Github 和 Codeplex，但 Bitbucket 支持即将到来。最初，它只支持公共回购，但私人回购支持也不会落后太多。不能给出确切的日期，但通常应该在年底之前发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T18:30:27.483

这是另一个很好的资源：

[http://fabriccontroller.net/blog/posts/continuous-deployment-with-windows-azure-websites-and-bitbucket/](http://fabriccontroller.net/blog/posts/continuous-deployment-with-windows-azure-websites-and-bitbucket/)

# mobile - 移动网页联系表不起作用

> ID：13102160
> 
> 赞同：0
> 
> 时间：2012-10-27T16:52:11.257
> 
> 标签：mobile, webpage, contact

我正在使用[mRova 模板构建联系表格](http://www.mrova.com/free-mobile-template-mobi/)

```
<!DOCTYPE html>
<!--
Design by mRova Solutions
http://www.mrova.com
Released for free under a Creative Commons Attribution 2.5 License
-->
<html>
    <head>
        <title>Free Mobile Template</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0;" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css" />
        <link rel="stylesheet" href="css/style.css" />
        <link rel="stylesheet" href="css/photoswipe.css" />
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js"></script>
        <script type="text/javascript" src="js/klass.min.js"></script>
        <script type="text/javascript" src="js/code.photoswipe.jquery-3.0.4.min.js"></script>
        <script type="text/javascript" src="js/custom.js"></script>
    </head>
    <body>
        <div data-role="page" data-add-back-btn="true">
            <div data-role="header" id="header">
                <h1>Mobile Template</h1>
            </div><!-- /header -->
            <div data-role="content">
                <div class="ui-body ui-body-b ui-corner-all">
                    <div class="contact-thankyou" style="display: none;">
                        Thank you.  Your message has been sent.  We will get back to you as soon as we can.
                    </div>
                    <div class="contact-form">
                        <p class="mandatory">
                            * indicates Mandatory Field
                        </p>
                        <div data-role="fieldcontain" class="text-field">
                            <label for="firstname">First Name*:</label>
                            <input type="text" name="firstname" value="" placeholder="" class="required" id="firstname" />
                        </div>
                        <div data-role="fieldcontain" class="text-field">
                            <label for="surname">Last Name:</label>
                            <input type="text" name="surname" value="" placeholder="" id="surname" />
                        </div>
                        <div data-role="fieldcontain" class="text-field">
                            <label for="email">Email Address*:</label>
                            <input type="email" name="email" value="" placeholder="" class="required" id="email"  />
                        </div>
                        <div data-role="fieldcontain" class="text-field">
                            <label for="mobilephone">Mobile Number:</label>
                            <input type="number" name="mobilephone" value="" placeholder="" id="mobilephone" />
                        </div>
                        <div data-role="fieldcontain">
                            <label for="message">Message*:</label>
                            <textarea name="message" id="message" placeholder="" class="required"></textarea>
                        </div>
                        <div class="send">
                            <a href="javascript:;" data-role="button" data-theme="a" data-iconpos="right" id="send">send</a>
                        </div>
                    </div><!-- //.contact-form -->
                </div>
                <p class="copyright">Copyright &copy; mobi. Designed by <a href="http://mrova.com" class="ui-link">mRova</a></p>
            </div><!-- /content -->
              <div data-role="footer" data-theme="a">
            <div class="ui-bar">
             <a href="share-dialog.html"  data-role="button" data-icon="star" data-theme="a" data-rel="dialog">Share</a> 
             <a href="contact.html" data-role="button" data-icon="plus" data-theme="a">Contact</a>
             <a href="" data-role="button" data-icon="arrow-u" data-theme="a" style="float:right;" class="returnTopAction">Return top</a>             
           </div>
          </div>
          <!-- /Footer --> 

        </div><!-- /page -->
    </body>
</html> 
```

custom.js 是：

```
$('.returnTopAction').live('click', function() {
   $('html, body').animate({scrollTop: '0'}, 700);
});
$('#gallery-page').live('pageshow', function () { 
        $myPhotoSwipe = $(".gallery a").photoSwipe({ enableMouseWheel: false , enableKeyboard: false });});

$('#send').live("click", function() {
                var url = 'send.php';
                var error = 0;
                var $contactpage = $(this).closest('.ui-page');
                var $contactform = $(this).closest('.contact-form');
                $('.required', $contactform).each(function(i) {
                    if($(this).val() === '') {
                        error++;
                    }
                });
                // each
                if(error > 0) {
                    alert('Please fill in all the mandatory fields. Mandatory fields are marked with an asterisk *.');
                } else {
                    var firstname = $contactform.find('input[name="firstname"]').val();
                    var surname = $contactform.find('input[name="surname"]').val();
                    var state = $contactform.find('select[name="state"]').val();
                    var mobilephone = $contactform.find('input[name="mobilephone"]').val();
                    var email = $contactform.find('input[name="email"]').val();
                    var message = $contactform.find('textarea[name="message"]').val();

                    //submit the form
                    $.ajax({
                        type : "GET",
                        url : url,
                        data : {
                            firstname : firstname,
                            surname : surname,
                            state : state,
                            mobilephone : mobilephone,
                            email : email,
                            message : message
                        },
                        success : function(data) {
                            if(data == 'success') {
                                // show thank you
                                $contactpage.find('.contact-thankyou').show();
                                $contactpage.find('.contact-form').hide();
                            } else {
                                alert('Unable to send your message. Please try again.');
                            }
                        }
                    });
                    //$.ajax

                }
                return false;
            }); 
```

klass.min.js 是：

```
/**
  * Klass.js - copyright @dedfat
  * version 1.0
  * https://github.com/ded/klass
  * Follow our software http://twitter.com/dedfat :)
  * MIT License
  */
!function(a,b){function j(a,b){function c(){}c[e]=this[e];var d=this,g=new c,h=f(a),j=h?a:this,k=h?{}:a,l=function(){this.initialize?this.initialize.apply(this,arguments):(b||h&&d.apply(this,arguments),j.apply(this,arguments))};l.methods=function(a){i(g,a,d),l[e]=g;return this},l.methods.call(l,k).prototype.constructor=l,l.extend=arguments.callee,l[e].implement=l.statics=function(a,b){a=typeof a=="string"?function(){var c={};c[a]=b;return c}():a,i(this,a,d);return this};return l}function i(a,b,d){for(var g in b)b.hasOwnProperty(g)&&(a[g]=f(b[g])&&f(d[e][g])&&c.test(b[g])?h(g,b[g],d):b[g])}function h(a,b,c){return function(){var d=this.supr;this.supr=c[e][a];var f=b.apply(this,arguments);this.supr=d;return f}}function g(a){return j.call(f(a)?a:d,a,1)}var c=/xyz/.test(function(){xyz})?/\bsupr\b/:/.*/,d=function(){},e="prototype",f=function(a){return typeof a===b};if(typeof module!="undefined"&&module.exports)module.exports=g;else{var k=a.klass;g.noConflict=function(){a.klass=k;return this},a.klass=g}}(this,"function") 
```

php是：

```
<?php
header('content-type: application/json; charset=utf-8');

if (isset($_GET["firstname"])) {
    $firstname = strip_tags($_GET['firstname']);
    $surname = strip_tags($_GET['surname']);
    $email = strip_tags($_GET['email']);
    $mobilephone = strip_tags($_GET['mobilephone']);
    $state = strip_tags($_GET['state']);
    $message = strip_tags($_GET['message']);
    $header = "From: ". $firstname . " <" . $email . ">rn"; 

    $ip = $_SERVER['REMOTE_ADDR'];
    $httpref = $_SERVER['HTTP_REFERER'];
    $httpagent = $_SERVER['HTTP_USER_AGENT'];
    $today = date("F j, Y, g:i a");    

    $recipient = 'mysite@myhost.com';
    $subject = 'Contact Form';
    $mailbody = "
First Name: $firstname
Last Name: $surname
Email: $email
Mobile Phone: $mobilephone
State: $state
Message: $message

IP: $ip
Browser info: $httpagent
Referral: $httpref
Sent: $today
";
    $result = 'success';

    if (mail($recipient, $subject, $mailbody, $header)) {
        echo json_encode($result);
    }
}
?> 
```

当我在电脑上测试它时，它工作得很好，但是当使用黑莓或手机时，点击发送按钮时它什么也没做......

我测试了一个脚本来测试邮件功能，它可以工作......

```
<?php

$ADDR = "mysite@my.com";
if (mail($ADDR,"Testing","This is a test"))
    echo "Mail function succeeded<br />";
else
    echo "Mail function FAILED<br />";
?> 
```

错误在哪里，我不明白为什么不能在手机上工作，但在电脑上测试时可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:37:00.470

您可以尝试使用`$_POST`而不是`$_GET`并一一尝试。那行得通

# jquery - 如何使用 clearInterval() 然后对 DOM 进行更改？

> ID：13102166
> 
> 赞同：0
> 
> 时间：2012-10-27T16:53:13.763
> 
> 标签：jquery, dom

我有这段代码，我遇到的问题是我想停止循环，然后替换文本“完成！” 它来自带有“textnew”字符串的 sms-loader.php 脚本。问题是循环再次发生，因此 div.checkstatus 字段中的文本再次被调用 php 脚本替换。

奇怪的是，我看到了日志消息，并再次收到一个新的（也是最终的）请求，尽管我的脚本中的顺序相反（首先停止然后替换 text()）。我需要了解为什么会这样。

```
$(document).ready(function() {
var interval = "";

$('.checkstatus').each(function(){
    var msgid = $(this).data('msg')
        $this = $(this),
        hid = $this.data('history'),
        textnew = '<a href="sms-dstatus.php?id='+msgid+'&sid=' +hid+ '&amp;keepThis=true&amp;TB_iframe=true&amp;height=430&amp;width=770" title="Delivery Status" class="thickbox"><img src="../template/icons/supermini/chart_curve.png" alt="status" width="16" height="16" /></a>';

    interval = setInterval(function() {
    $this.load('../pages/sms-loader.php?id='+msgid);

        // stop the loop
        if($this.text()=='Done!'){
            // stop it
            clearInterval(interval);
            console.log(textnew);
            $this.html(textnew); /// this line is the problem
        }

    }, 5000); // 5 secs

});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T16:58:31.753

您必须在“interval”之前放置一个“var”，以将其标记为本地..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T18:19:36.397

我按照“提示”使 $.ajax 函数看起来更好，并且我肯定可以更好地控制。

```
$(document).ready(function() {
var interval = "";

$('.checkstatus').each(function(){
    var msgid = $(this).data('msg')
        $this = $(this),
        that = $this,
        hid = $this.data('history'),
        refreshimg = '<img src="../template/icons/smalls/10.png"/>';
    var interval = setInterval(function() {
    //$this.load('../pages/sms-loader.php?id='+msgid);
    $.ajax({
            url: "../pages/sms-loader.php",
            type: "GET",
            data:{id:+msgid},
            success: function(data) {
                if($this.text()=='Done!'){
                clearInterval(interval);
                }else{
                $this.html(data);
                }
              }

    }).done(function(){
        if($this.text()=='Done!'){
        console.log(refreshimg);
        $this.empty().html(refreshimg).show();
        clearInterval(interval);
        }
    });

    }, 5000); // 5 secs

});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T18:20:48.563

AJAX 是异步的，因此在发出请求时，您的其他代码将在返回数据之前触发。我不是 100% 理解目标，但遵循如何使用 AJAX 成功回调的大纲应该会有所帮助

```
$this.load('../pages/sms-loader.php?id='+msgid, function(){

   /* AJAX complete and new html exists, run code here for after load-*/
   /* I believe you want to run clearInterval here */
}); 
```

请参阅参考文档`load()` ：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

# x86 - FP 操作在各种 x86 CPU 上给出完全相同的结果吗？

> ID：13102167
> 
> 赞同：10
> 
> 时间：2012-10-27T16:53:14.970
> 
> 标签：x86, floating-accuracy

假设*相同*的指令在被比较的 CPU 上可用，相同的输入和相同的操作参数，例如舍入模式？我对时间上的差异不感兴趣，对[Pentium FDIV 错误](http://en.wikipedia.org/wiki/FDIV_bug)也不感兴趣（仅因为该事件是古老的，所以不符合条件）。

我想对于加法、减法、否定和四舍五入来说答案是肯定的，因为它们有精确的定义，而且我几乎无法想象实现中的差异可能是什么（可能缺少检测溢出的错误/下溢，但这在某些应用程序中将是一场灾难，所以我想这早就被捕获并修复了）。

乘法似乎更有可能有不同的实现：确定两个 DPFPN 乘积的（比如说）最接近的可表示双精度浮点数（64 位，包括尾数的 52+1）有时需要计算它们尾数的乘积为（大约）104 位精度，对于少数 LSBits 来说，这可以说是浪费精力。我想知道这是否被尝试过，并且做得正确。或者也许 IEEE-754 或一些事实上的标准规定了一些东西？

分裂似乎更加微妙。

而且，由于缺乏通用设计，我怀疑更复杂的事物（三角函数、日志..）的所有实现都可以完全同步，因为可以使用各种数学方法。

我问这个是出于纯粹的爱管闲事；愿意改进[我的答案](https://crypto.stackexchange.com/a/2716/555)；并且希望有一种方法（有时）允许在 VM 中运行的程序检测假装运行的 CPU 与真实 CPU 之间的不匹配。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-27T17:25:24.650

如 IEEE754 标准所述，在汇编级基本浮点指令（加、减、乘、除、平方根、FMA、舍入）总是产生相同的结果。有两种指令在不同的架构上可能会产生不同的结果：用于计算超越运算的复杂 FPU 指令（FSIN、FCOS、F2XM1 等）和近似 SSE 指令（用于计算近似倒数的 RCPSS/RCPPS，以及 RSQRTSS、RSQRTPS用于计算近似倒数平方根）。Transcendental x87 FPU 操作是在微码中实现的，AFAIK 除了 AMD K5 之外的所有 Intel 和 AMD CPU 都使用相同的微码，所以你不能用它来检测。它可能仅对检测 VIA、Cyrix、Transmeta 和其他旧 CPU 有帮助，但这些太少了，无法考虑。近似的 SSE 指令在 Intel 和 AMD 上的实现方式不同，AFAIK 在旧的（K8 之前）和更新的 AMD CPU 上的实现存在一些差异。您可以使用这种差异来检测伪装成 Intel 的 AMD CPU，反之亦然，但这是一个有限的用例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T17:49:47.117

除了勘误表中有详细记录的极端情况外，**所有**IA-32 指令在处理器之间的行为都是相同的。

当然，明显的例外是`CPUID`MSR 访问。

明显的非例外是各种逻辑、整数和浮点运算。正如[Maratyszcza](https://stackoverflow.com/users/848177/maratyszcza)[在他的回答](https://stackoverflow.com/a/13102431/1084)中所写，许多更复杂的操作都是通过微码计算的。此微码在具有不同微架构的处理器之间可能会有很大差异，但保证结果是相同的。一方面，英特尔（我没有其他 x86 开发人员的第一手资料）投入大量资源来确保处理器之间的向后兼容性，甚至重现“错误”的行为（将错误更改为新规范）。

在架构表现不同的情况下，例如 VMX（虚拟化）和 SMM（系统管理），控制结构包括修订 ID。保证使用相同修订 ID 的所有处理器在这些体系结构方面的行为方式相同。

为了回答最初的问题，根据[IEEE 754](http://en.wikipedia.org/wiki/IEEE_floating_point) ，FP 操作，无论是 x87、SSE 还是 AVX，在所有处理器上都会给出相同的结果。

# python - 在 GAE Python 中，我无法在本地删除 cookie，但如果可以，可以在网络上删除

> ID：13102168
> 
> 赞同：2
> 
> 时间：2012-10-27T16:53:21.270
> 
> 标签：python, google-app-engine, cookies

我正在做一个项目，直接在网络上工作，但为了开发速度，我决定在本地花费我的项目，但是当我想在本地删除 cookie 时，我不能，与网络上的代码相同

```
c = Cookie.SimpleCookie(os.environ["HTTP_COOKIE"])  
c["MyCookie"]=""
c["MyCookie"]["expires"] = cookie_expiry_date(-20)
self.response.headers.add_header("Set-Cookie",c.output(header='')) 
```

我试试这个

```
self.response.headers.add_header("Set-Cookie",'MyCookie=""; expires=Thu, 01-Jan-1970 00:00:00 GMT') 
```

但它不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T19:00:49.623

如果您使用的是 webapp2，您可以非常简单地管理 cookie（也可以在本地`dev_appserver`）：

```
# Deletes a cookie previously set in the client.
response.delete_cookie('bad_cookie') 
```

这是[文档](http://webapp-improved.appspot.com/guide/response.html#setting-cookies)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-27T18:19:22.570

您可以使用 Chrome 开发者工具。在菜单资源下，您可以找到并删除您的 cookie

# ruby-on-rails-3 - 解析嵌入的字符串形式 JSON

> ID：13102171
> 
> 赞同：0
> 
> 时间：2012-10-27T16:53:32.080
> 
> 标签：ruby-on-rails-3, json, parsing, url

我有一个 Rails 3 应用程序，我正在使用以下代码来解析 JSON 帖子：

```
email_payload = JSON.parse(params[:payload])
Result.create(:from => email_payload['from'], :from_name => email_payload['from_name'], :from_address => email_payload['from_address'], :date => email_payload['date'], :html_body => email_payload['html_body'], :priority => email_payload['priority'], :spam_status => email_payload['spam_status'], :subject => email_payload['subject']) 
```

JSON post数据如下：

```
payload{ "address_identifier": null, "attachments": [ [ "twitter.png", "image/png", 3029, "http://api.deliverhq.com/api/incoming/attachment/7gdd71wo75/5772412/0" ] ], "cc": null, "date": "Thu, 25 Oct 2012 22:04:20 +0100" 
```

我正在尝试研究如何解析 URL，在这种情况下`http://api.deliverhq.com/api/incoming/attachment/7gdd71wo75/5772412/0`，然后将 URL 输入数据库。

```
:url => email_payload['attachments'] 
```

将不起作用，因为附件中有多个值，并且：

```
email_attachments_payload = JSON.parse(params[:payload][:attachments])
:url => email_attachments_payload['URL'] 
```

将不起作用，因为 URL 没有标识符。对于这个特定的应用程序，应该只有一个附件，因此如果可能的话，选择 .first 可能是一个选项。

任何指针将不胜感激！

**更新：**

添加：

```
email_payload[:attachments][0][4] 
```

导致以下异常错误：

```
NoMethodError: undefined method []' for nil:NilClass 
```

**更新 2**

```
def receive_fax
    if request.get?
        render :text => "hello"
    elsif request.post?   
      email_payload = JSON.parse(params[:payload])     
      Fax.create(:from => email_payload['from'], :from_name => email_payload['from_name'], :from_address => email_payload['from_address'], :date => email_payload['date'], :html_body => email_payload['html_body'], :priority => email_payload['priority'], :spam_status => email_payload['spam_status'], :subject => email_payload['subject'], :fax => email_payload[:attachments][0][3])
      render :text => "success"
    else
      render :text => "error"
    end
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T14:05:29.810

在 irb 中：

```
require 'json'

email_payload = JSON.parse('{ "address_identifier": null, "attachments": [ [ "twitter.png", "image/png", 3029, "http://api.deliverhq.com/api/incoming/attachment/7gdd71wo75/5772412/0" ] ], "cc": null, "date": "Thu, 25 Oct 2012 22:04:20 +0100" }')
#=> {"address_identifier"=>nil, "attachments"=>[["twitter.png", "image/png", 3029, "http://api.deliverhq.com/api/incoming/attachment/7gdd71wo75/5772412/0"]], "cc"=>nil, "date"=>"Thu, 25 Oct 2012 22:04:20 +0100"}
email_payload['attachments'][0][3]
#=> "http://api.deliverhq.com/api/incoming/attachment/7gdd71wo75/5772412/0" 
```

如果这不起作用，那么还有其他一些您在上面没有描述的事情。

更新：在从 返回的哈希中`JSON.parse`，`attachments`键应该是字符串 ( `'attachments'`)，而不是符号 ( `:attachments`)。更新了我上面的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T14:36:30.063

请尝试：email_payload['attachments'][0][3]

看来问题可能是 :attachments （一个符号）和 'attachments' （一个字符串）之间的区别。

# nuget - nuget.config 的文档？

> ID：13102173
> 
> 赞同：6
> 
> 时间：2012-10-27T16:53:46.277
> 
> 标签：nuget

我最近阅读了 Nuget.config 中的 disableSourceControlIntegration 设置。
NuGet.config 中是否有任何适用设置的文档（参考）（例如 disableSourceControlIntegration）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T19:25:41.910

虽然我没有找到任何文档，但我确实深入研究了源代码并找到了

*   存储库路径
*   路径键
*   disabledPackageSources
*   packageSourceCredentials
*   包源
*   禁用SourceControlIntegration
*   解决方案

# gwt - GWT grails 插件错误 resource.ResourceMeta - 找不到资源：%nocache.js

> ID：13102177
> 
> 赞同：1
> 
> 时间：2012-10-27T16:54:26.153
> 
> 标签：gwt, grails, grails-plugin

我在使用 GWT-Grails 插件时遇到问题。我试图完全遵循这个例子，但我最终遇到了这个错误：

```
| Error 2012-10-28 00:25:49,567 [http-bio-8080-exec-2] ERROR resource.ResourceMeta  -  Resource not found: /gwt/g3wt.Application/g3wt.Application.nocache.js 
```

输入这些命令后出现此错误：（我只是[在此处](http://onlinevillage.blogspot.com/2010/05/while-html-5-holds-tremendous-promise.html)遵循本指南）

```
>grails create-app g3wt
>cd g3wt
>grails install-plugin gwt
>grails create-gwt-module g3wt.Application
>grails create-gwt-page main/index.gsp g3wt.Application
>grails run-app
>grails run-gwt-client 
```

这是 index.gsp 代码（无论如何都是自动生成的）：

```
<html>
<head>
  <!-- Integrate with Sitemesh layouts           -->
  <meta name="layout" content="main" />

  <!--                                           -->
  <!-- Any title is fine                         -->
  <!--                                           -->
  <title>Example title (change this!)</title>

  <!--                                           -->
  <!-- This script loads your compiled module.   -->
  <!-- If you add any GWT meta tags, they must   -->
  <!-- be added before this line.                -->
  <!--                                           -->
  <script type="text/javascript" src="${resource(dir: 'gwt/g3wt.Application', file: 'g3wt.Application.nocache.js')}"></script>
</head>

<!--                                           -->
<!-- The body can have arbitrary html, or      -->
<!-- you can leave the body empty if you want  -->
<!-- to create a completely dynamic ui         -->
<!--                                           -->
<body>
  <!-- OPTIONAL: include this if you want history support -->
  <iframe id="__gwt_historyFrame" style="width:0;height:0;border:0"></iframe>

  <!-- Add the rest of the page here, or leave it -->
  <!-- blank for a completely dynamic interface.  -->
</body>
</html> 
```

我知道找不到 nocache.js，所以我想我可以尝试看看它到底在哪里。但是，使用eclipse搜索功能，显示文件根本没有创建。虽然有一个名为 application.js 的文件。

为什么没有创建 nocache.js，我该如何解决这个问题？我已经被难住了一段时间了，这很令人沮丧。

我正在使用 gwt 插件 0.7.1 和 grails 2.1.1，以及 eclipse 4.2 和 Linux 机器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T17:02:57.723

好的，所以我第一次运行时错误消失了

```
grails> compile-gwt-modules 
```

现在出现了不同的问题。我制作的前端gwt代码没有显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T15:16:47.593

我遇到了同样的问题，在[这里找到了答案。](http://grails.1312388.n4.nabble.com/Grails-and-GWT-Plugin-resource-not-available-error-td4414349.html)

`buildconfig.groovy`在 conf 文件夹中。只需注释掉运行时为 ":resouces..." 的插件即可

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T09:27:05.943

你可以在你的Confing.groovy中添加：

```
grails.resources.adhoc.excludes = ['**/gwt/**'] 
```

这将解决问题。但是如果你使用插件版本 0.8 这个问题应该可以解决。

# actionscript-3 - 把这个 AS3 变成一个数组并使用它

> ID：13102180
> 
> 赞同：0
> 
> 时间：2012-10-27T16:54:48.367
> 
> 标签：actionscript-3

我怎样才能把这个基本的函数方法变成一个数组并轻松调用。几乎我只是在比较对象是否变为假然后做某事......但这似乎只是为了这么简单的事情而写了很多代码。有任何想法吗？

```
 var b:Boolean = true;
        var i:Boolean = true;
        var t:Boolean = true;
        var a:Boolean = true;
        var m:Boolean = true;
        var ii:Boolean = true;
        var n:Boolean = true;
        var e:Boolean = true;
        var s:Boolean = true;

        level5_mc.let_b_mc.addEventListener(MouseEvent.CLICK, hitB);
        level5_mc.let_i_mc.addEventListener(MouseEvent.CLICK, hitI);
        level5_mc.let_t_mc.addEventListener(MouseEvent.CLICK, hitT);
        level5_mc.let_a_mc.addEventListener(MouseEvent.CLICK, hitA);
        level5_mc.let_m_mc.addEventListener(MouseEvent.CLICK, hitM);
        level5_mc.let_ii_mc.addEventListener(MouseEvent.CLICK, hitII);
        level5_mc.let_n_mc.addEventListener(MouseEvent.CLICK, hitN);
        level5_mc.let_e_mc.addEventListener(MouseEvent.CLICK, hitE);
        level5_mc.let_s_mc.addEventListener(MouseEvent.CLICK, hitS);

        function hitB(event:MouseEvent){
            b=false;
            trace("good");
              level5_mc.removeChild(level5_mc.let_b_mc);  
        }

        function hitI(event:MouseEvent){
            if (b==false){
                i=false;
                level5_mc.removeChild(level5_mc.let_i_mc);  
            }
            else {
                //decrease timer
                i=true;
            }
        }

        function hitT(event:MouseEvent){
            if (b==false && i==false){
                t=false;
                level5_mc.removeChild(level5_mc.let_t_mc);  
            }
            else {
                //decrease timer
                i=true;
            }
        } 
```

等等...在下面编辑

```
 var b=level5_mc.let_b_mc;
                    var i=level5_mc.let_i_mc;
                    var t=level5_mc.let_b_mc;

                var movieClips:Array = [b,i,t];
                var movieClipFlags:Object = {
                    b:[],
                    i:[b],
                    t:[b,i]
                };

                for each(var mc:MovieClip in movieClips) {
                   mc.addEventListener(MouseEvent.CLICK,movieClipHit);
                }

                function movieClipHit(e:MouseEvent) {
                   var mc:MovieClip = e.target as MovieClip;
                   if(readyToRemove(mc))
                      level5_mc.removeChild(mc);
                   else
                      trace("Can't remove yet.");
                }

                function readyToRemove(mc:MovieClip):Boolean {
                   for each(var mc:MovieClip in movieClipFlags[mc]) {
                       //if it has parent, it isn't removed yet.
                       if(mc.parent)
                         return false;
                   }
                   return true;
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:06:25.190

像下面这样的东西应该会给你一些想法。我还没有测试您需要根据您的需要进行一些调整的代码。

```
//put other movies clips in this array too.
var movieClips:Array = [level5_mc.let_b_mc,level5_mc.let_i_mc]; 

var movieClipFlags:Object = {
   level5_mc.let_b_mc:[],
   level5_mc.let_i_mc:[level5_mc.let_b_mc],
   level5_mc.let_t_mc:[level5_mc.let_b_mc,level5_mc.let_i_mc]
   //put other movie clips here too with the movie clips that need to be removed in the array
};

foreach(var mc:MovieClip in movieClips) {
   mc.addEventListener(MouseEvent.CLICK,movieClipHit);
}

private function movieClipHit(e:MouseEvent) {
   var mc:MovieClip = e.target as MovieClip;
   if(readyToRemove(mc))
      level5_mc.removeChild(mc);
   else
      trace("Can't remove yet.");
}

private function readyToRemove(mc:MovieClip):Boolean {

   foreach(var mc:MovieClip in movieClipFlags[mc]) {
       //if it has parent, it isn't removed yet.
       if(mc.parent)
         return false;
   }
   return true;
} 
```

希望能帮助到你。

# asp.net-mvc-3 - 如何在操作结果中打开浏览器？

> ID：13102181
> 
> 赞同：-1
> 
> 时间：2012-10-27T16:55:14.343
> 
> 标签：asp.net-mvc-3

我有一个动作结果方法，我想在新窗口或新标签中打开一个 url 我该如何处理它？

在我的代码中它的工作原理并不是我的意思是将其重定向到会员帐户并且不要打开我的网址

```
public ActionResult myactionresult()
    {
         Response.Write("<script language=\"javascript\">");
         Response.Write("window.open('" + "http://www.xxx.com" + ,'_blank')");
         Response.Write("</script>");

       return RedirectToAction("Index", "MembersAccount");
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T17:02:00.490

试试这个：

**控制器**

```
public ActionResult myactionresult()
{
    String jScript = String.Empty;
    jScript = "<script language=\"javascript\">";
    jScript += "window.open('http://www.xxx.com' ,'_blank')";
    jScript += "</script>";

    ViewBag.jScript = jScript;

    return RedirectToAction("Index", "MembersAccount");
} 
```

**视图：** *视图主体中的任何位置*

```
@ViewBag.jScript 
```

这将解决您的问题；

# tsql - T-SQL：如何根据 2 列对表行进行排序

> ID：13102182
> 
> 赞同：0
> 
> 时间：2012-10-27T16:55:14.047
> 
> 标签：tsql, sorting, rows, multiple-columns

我现在很困扰这个问题一段时间..

如何根据 B 列的内容对 A 列进行排序？

我有这个样本：

```
ID  count   columnA     ColumnB
-----------------------------------
12  1      A         B
13  2      C         D
14  3      B         C 
```

我想这样排序：

```
ID  count   ColumnA     ColumnB
-----------------------------------
12  1   A       B
14  3   B       C
13  2   C       D 
```

`ColumnB`所以如果上一行=下一行，我需要对行进行排序`ColumnA`

我在想一个循环？但无法完全想象它将如何工作......

我在想它会像这样（也许）

```
SELECT 
    a.ID, a.ColumnA, a.ColumnB
FROM 
    TableA WITH a (NOLOCK)
LEFT JOIN 
    TableA b WITH (NOLOCK) ON a.ID = b.ID AND a.counts = b.counts
WHERE
    a.columnB = b.ColumnA 
```

上面的代码虽然不起作用，但我想更多的是......

```
DECLARE @counts int = 1
DECLARE @done int = 0

--WHILE @done = 0
BEGIN

SELECT 
    a.ID, a.ColumnA, a.ColumnB
FROM 
    TableA WITH a (NOLOCK)  
LEFT JOIN 
    TableA b WITH (NOLOCK)  ON a.ID = b.ID AND a.counts = @counts
WHERE 
    a.columnB = b.ColumnA

set @count = @count +1
END 
```

如果这是 C 代码，对我来说会更容易，但 T-SQL 的语法对于像我这样的菜鸟来说有点困难。

任何帮助是极大的赞赏！

编辑：示例代码

```
drop table tablea
create table TableA(
id int,
colA varchar(10),
colb varchar(10),
counts int
)

insert INTO TableA
(id, cola, colb, counts)
select 12, 'Bad', 'Cat', 3

insert INTO TableA
(id, cola, colb, counts)
select 13, 'Apple', 'Bad', 1

insert INTO TableA
(id, cola, colb, counts)
select 14, 'Cat', 'Dog', 2

select * FROM TableA

SELECT a.ID, a.ColA, a.ColB
FROM TableA a WITH (NOLOCK) 
LEFT JOIN TableA b WITH (NOLOCK) 
     ON a.ID = b.ID
Where a.colB = b.ColA
ORDER BY a.ColA ASC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T16:57:26.650

你只需要添加`ORDER BY`子句

```
-- SELECT a.ID, a.ColumnA, a.ColumnB
-- FROM TableA WITH a (NOLOCK) 
--        LEFT JOIN TableA b WITH (NOLOCK) 
--            ON a.ID = b.ID
--               and a.counts = b.counts
-- Where a.columnB = b.ColumnA
ORDER BY a.ColumnA ASC 
```

# php - 我从客户那里继承的 php / mysqli 数据库网站存在严重问题

> ID：13102188
> 
> 赞同：0
> 
> 时间：2012-10-27T16:55:59.457
> 
> 标签：php, mysqli, connection

这是一个管理轮播广告的 php 文件，该广告会导致严重的服务器性能问题并导致站点上的“连接过多”sql 错误。这是php脚本。谁能给我一些关于如何纠正这个问题的见解，因为我是 php 的新手。

```
 <?

require("../../admin/lib/config.php");
// connect to database

mysql_pconnect(DB_HOST,DB_USER,DB_PASS);
mysql_select_db(DB_NAME);

$i = 1;
function grab()
{
    $getBanner = mysql_query("SELECT * FROM sponsor WHERE active='Y' AND ID != 999 AND bannerRotation = '0' ORDER BY RAND() LIMIT 1");
    $banner = mysql_fetch_array($getBanner);
    if ($banner['ID'] == ''){
        mysql_query("UPDATE sponsor SET bannerRotation = '0'");
    }   
    if (file_exists(AD_PATH . $banner['ID'] . ".jpg")){
        $hasAd = 1;
    }
    if (file_exists(BANNER_PATH . $banner['ID'] . ".jpg")){
        return "$banner[ID],$hasAd";
    } else {
        return 0;
    }
}

while ($i <= 3){
    $banner = grab();
    if ($banner != 0){
        $banner = explode(",",$banner);
        mysql_query("UPDATE sponsor SET bannerView = bannerView + 1 WHERE ID='$banner[0]'");
        mysql_query("UPDATE sponsor SET bannerRotation = '1' WHERE ID = '$banner[0]'");
        echo "banner$i=$banner[0]&hasAd$i=$banner[1]&";
        $i++;
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T17:12:35.723

**我看不到mysqli**

问题是`mysql_pconnect()`打开到数据库的**持久**连接并且在执行结束时没有关闭，并且由于您没有在任何地方调用 mysql_close() 连接永远不会关闭。

全部在手册中：http: [//php.net/manual/en/function.mysql-pconnect.php](http://php.net/manual/en/function.mysql-pconnect.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T18:01:27.507

好吧，对您的客户来说，好消息是之前的开发人员放弃了该项目。如果他继续努力，他只会造成更大的伤害。

*   这个脚本使用的是 ext/mysql，而不是 ext/mysqli。最好使用 mysqli 或 PDO_mysql，因为[ext/mysql 已弃用](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)。

*   建议使用完整的 PHP 开放标签语法 ​​( `<?php`)，而不是短标签语法 ​​( `<?`)。原因是并非每个 PHP 环境都支持使用短标签，如果您将代码部署到这样的环境中，任何浏览该页面的人都可以查看您的代码。

*   此脚本不进行错误检查。在尝试连接到数据库或提交查询后，您应该始终检查错误。

*   众所周知，使用`ORDER BY RAND() LIMIT 1`从数据库中选择随机行的方法效率低下，并且无法优化。随着表增长到多于微不足道的行数，此查询很可能成为您的瓶颈。请参阅[我过去](https://stackoverflow.com/search?q=user:20860%20[random])关于优化 ORDER BY RAND 查询的一些答案，或[Jan Kneschke](http://jan.kneschke.de/projects/mysql/order-by-rand/)关于选择随机行的精彩博客。

*   即使您无法使用`ORDER BY RAND()`，也无需调用 3 次即可获得三个不同的随机赞助商。只需使用`ORDER BY RAND() LIMIT 3`. 然后，您不需要针对 bannerRotation 进行复杂且容易出错的更新，以确保您获得以前未选择的赞助商。

*   Using`SELECT *`获取所有列，即使此函数不需要它们。

*   如果赞助商不符合随机选择的条件，即如果它有 active!='Y' 或者如果它的 ID=999，那么我会将其移至不同的表。这将简化您的查询，并使赞助商表更小，查询更快。

*   grab() 函数中的`UPDATE`没有`WHERE`子句，因此它适用于赞助商表中的*所有*行。我不相信这是故意的。我认为它应该只适用于单行`WHERE ID=$banner['ID']`。

*   `UPDATE`此代码针对同一张表的同一行有两个连续的语句。将这些组合成一个`UPDATE`修改两列的语句。

*   grab() 函数将值附加在一起，用逗号分隔，然后在返回后立即将该字符串分解为一个数组。好像程序员不知道一个函数可以返回一个数组。

*   将`$i++`条件块放入内部可以使此代码在无限循环中运行。这意味着这个脚本可以永远运行。一旦其中几十个同时运行，您将用完连接。

*   此代码不使用缓存。任何提供广告横幅的脚本都必须快速，并且对数据库进行多次更新是不够快的。您需要使用一些内存缓存进行读取和写入。一个流行的选择是[memcached](http://php.net/memcached)。

为什么这个客户如此不熟练地编写自己的广告横幅服务器？只需使用[Google DFP 标准版](https://www.google.com/intl/en_US/dfp/info/welcome.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T17:10:56.943

哎呀！

`grab()`正在从循环中调用，但未参数化。似乎也没有任何理由重复调用它。

200% 的加速很容易实现。

# javascript - 自定义序数比例的 xAxis？

> ID：13102192
> 
> 赞同：0
> 
> 时间：2012-10-27T16:56:18.413
> 
> 标签：javascript, d3.js, graphing

我正在使用*`d3.js`*构建堆积条形图。

**举例说明：**

我正在绘制每天行驶的总里程数。因此，一个人可能会在早上开车 20 英里，在午餐时间开车 5 英里，晚上再开车 20 英里。我想将这 3 个值堆叠一天。

`X`是基于时间的序数尺度。该图表按预期工作。

但是假设图表有 30 天。例如，我想自定义`X`轴，以便每天不会被绘制为“2012 年 10 月 27 日”。相反，我想定制很像定量尺度的东西，比如`ticks()`和`tickFormat()`。

似乎那些可用的方法`.axis()`仅适用于定量尺度，而不是序数：[https ://github.com/mbostock/d3/wiki/SVG-Axes#wiki-tickFormat](https://github.com/mbostock/d3/wiki/SVG-Axes#wiki-tickFormat)

那么如何`X`使用序数刻度自定义基于时间的轴呢？

# javascript - 如何使用 Greasemonkey 更改 CSS 类？

> ID：13102195
> 
> 赞同：1
> 
> 时间：2012-10-27T16:56:42.110
> 
> 标签：javascript, css, class, greasemonkey

我一直在尝试编写一个小的 Greasemonkey 脚本，它获取一个类的内容并将其更改为另一个类。
基本上它会改变：

```
<ul class='user_type_1'> 
```

进入：

```
<ul class='administrator'> 
```

但是，我对 javascript 和 Greasemonkey 完全不熟悉，我所做的所有研究都让我更加困惑。

理想情况下，我希望有人详细解释我是如何实现这一目标的，而不是仅仅交出一个有效的脚本（尽管目前即使这样也会有所帮助）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T20:41:41.620

使用[jQuery](http://jquery.com/)（一个 javascript 实用程序/库）非常容易。jQuery 提供了 ,[`addClass()`](http://www.jqapi.com/#p=addClass)和[`removeClass()`](http://www.jqapi.com/#p=removeClass), 使这变得轻而易举。

这是**一个完整的 Firefox Greasemonkey 脚本**，它更改了该类：

```
// ==UserScript==
// @name     _Change one class into another.
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant    GM_addStyle   
// ==/UserScript==
/*- The @grant directive is needed to work around a design change introduced
    in GM 1.0\.   It restores the sandbox.
*/
//-- Get everything that has the class "user_type_1".
var userTypeNodes = $(".user_type_1");

userTypeNodes.removeClass ("user_type_1");
userTypeNodes.addClass ("administrator"); 
```

# php - 无法在 CodeIgniter 构造函数中退出

> ID：13102196
> 
> 赞同：1
> 
> 时间：2012-10-27T16:56:46.687
> 
> 标签：php, codeigniter, exit-code

我基本上是在尝试会话控制。如果用户已登录，则可以继续。但是如果他没有登录，那么它会显示一个登录屏幕然后死。但是，当我在构造函数中使用`die`或`exit`时，它不显示登录屏幕；它立即死亡。代码如下：

```
private $username = null;
private $mongoid = null;
private $neoid = null;

public function __construct(){
    parent::__construct();

    // session to global
    $this->username = $this->session->userdata( 'username');
    $this->mongoid = $this->session->userdata( 'mongoid');
    $this->neoid = $this->session->userdata( 'neoid');

    // check if user is logged in
    if( $this->username == "" || empty( $this->username)){
        $this->load->view( 'access/login');
        die;
    }
} 
```

如果`die`没有写在那里，它会显示登录页面，但是使用`die`，它不会显示。为什么我要使用`die`？因为如果我不使用，它会在索引功能上移动，如果用户未登录，我不希望它执行索引功能。

这里有什么问题？我应该用什么来停止执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:20:46.210

您可以有一个方法并在构造函数中调用它：

```
function __construct() {
    parent::__construct();
    $this->_is_logged_in();
} 
```

该方法应如下所示：

```
function _is_logged_in() {
    $is_logged_in = $this->session->userdata('is_logged_in');
    if (!isset($is_logged_in) || $is_logged_in != true) {
        redirect('login');
        die();
    }
} 
```

而且，当然，您应该有用于登录的控制器，如下所示：

```
<?php

class Login extends CI_Controller {

    function index() {
        $this->load->view('LOGIN-VIEW');
    }

    function validate() {
        $this->load->model('login_model');
        $data = $this->login_model->validate();

        if ($data != false) {
            $data['is_logged_in'] = true;
            $this->session->set_userdata($data);
            redirect('MAIN-CONTROLLER-AFTER-LOGIN');
        }
        else {
            $this->index();
        }
    }

    function logout() {
        $this->session->sess_destroy();
        $this->index();
    }

} 
```

这是我发布的内容，也将会话保存在数据库中。

登录模型可以像这样原始：

类 Login_model 扩展 CI_Model {

```
function validate() {

    $this->db->where('username', $this->input->post('username'));
    $this->db->where('password', md5($this->input->post('password')));
    $query = $this->db->get('users');

    if($query->num_rows == 1) {
        $data = $query->row_array();
             return $data;
        } else {
            return false;
        }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T17:06:14.093

CodeIgniter 在加载时不会立即输出视图`$this->load->view();`，而是将视图的输出放到输出缓冲区中，并且在加载完所有内容后，它会将整个输出刷新给用户。话虽如此，您看到的问题是它缓冲了输出，然后它在没有刷新的情况下死亡。

`die`真的很糟糕，不应该在调试之外使用，你最好使用变量开关之类的东西。如果它仅适用于控制器范围，那么您可以制作一个

```
private $show_everything_else = true; 
```

在构造函数中：

```
if( $this->username == "" || empty( $this->username)){
    $this->load->view( 'access/login');
    $this->show_everything_else = false;
} 
```

在任何控制器的方法中：

```
if($this->show_everything_else) {
    // ...
} 
```

无论如何，这个解决方案是一个快速解决方案，并且有更好的方法来做到这一点，但所有这些都需要不同的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-21T22:40:19.403

Controller 类将自动运行 index() 函数。因此，要使其正常工作，如果登录签入构造失败，则必须返回 index()。在这里你可以做什么：

```
private $username = null;
private $mongoid = null;
private $neoid = null;
private $no_login = false;

public function __construct(){
    parent::__construct();

    // session to global
    $this->username = $this->session->userdata( 'username');
    $this->mongoid = $this->session->userdata( 'mongoid');
    $this->neoid = $this->session->userdata( 'neoid');

    // check if user is logged in
    if( $this->username == "" || empty( $this->username)){
        $this->load->view( 'access/login');
        $this->no_login = true;
    }
}

function index(){
    if($this->no_login) return;
    // another statement if login success.....
} 
```

# c++ - 在 C++ 中读取文本文件

> ID：13102197
> 
> 赞同：1
> 
> 时间：2012-10-27T16:56:46.710
> 
> 标签：c++, text, input

```
string numbers;
string fileName = "text.txt";

ifstream inputFile;
inputFile.open(fileName.c_str(),ios_base::in);
inputFile >> numbers;
inputFile.close();
cout << numbers; 
```

我的 text.txt 文件是：

```
1    2    3    4    5 
```

基本上是一组由制表符分隔的整数。

问题是程序只读取 text.txt 文件中的第一个整数，而由于某种原因忽略了其余的整数。如果我删除整数之间的制表符，它可以正常工作，但是它们之间有制表符，它将不起作用。这是什么原因造成的？据我所知，它应该忽略任何空白字符还是我弄错了？如果是这样，有没有更好的方法从文本文件中获取这些数字中的每一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T16:59:29.720

使用**[getline](http://www.cplusplus.com/reference/string/getline/)**进行阅读。

```
string numbers;
if (inputFile.is_open())//checking if open
{
      getline (inputFile,numbers); //fetches entire line into string numbers
      inputFile.close();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T18:33:40.393

读取格式化字符串时，输入运算符从忽略前导空格开始。然后它将非空白字符读取到第一个空格并停止。非空白字符存储在`std::string`. 如果在流到达文件末尾之前只有空白字符（或某些错误），则读取失败。因此，您的程序会读取一个“单词”（在本例中是一个数字）并停止读取。

不幸的是，您只说了您在做什么以及您的方法存在什么问题（您的问题描述未能涵盖首先读取输入失败的情况）。以下是您可能想尝试的几件事：

1.  如果您想阅读多个单词，您可以这样做，例如，通过阅读所有单词：

    ```
    std::vector<std::string> words;
    std::copy(std::istream_iterator<std::string>(inputFile),
              std::istream_iterator<std::string>(),
              std::back_inserter(words)); 
    ```

    这将从中读取所有单词`inputFile`并将它们作为`std::string`s 的序列存储在 vector 中`words`。由于您的文件包含数字，您可能希望替换`std::string`为`int`以易于访问的形式读取数字。

2.  如果您想阅读一行而不是一个单词，您可以使用[`std::getline()`](http://en.cppreference.com/w/cpp/string/basic_string/getline)：

    ```
    if (std::getline(inputFile, line)) { ... } 
    ```

    如果你想读取多行，你可以把这个操作放到一个循环中：不幸的是，没有像单词那样读取一系列行的read-made方法。

3.  如果您想将整个文件（而不仅仅是第一行）读入文件中，您也可以使用`std::getline()`，但您需要知道文件中没有出现的一个字符值，例如 null 值：

    ```
    if (std::getline(inputFile, text, char()) { ... } 
    ```

    这种方法将“行”视为一个字符序列，直到一个空字符。您也可以使用任何其他字符值。如果您不能确定字符值，您可以使用带有`std::string`迭代器的构造函数读取整个文件：

    ```
    std::string text((std::istreambuf_iterator<char>(inputFile)),
                     std::istreambuf_iterator<char>()); 
    ```

    请注意，不幸的是，第一个参数周围的额外括号是必要的（如果您使用的是 C++ 2011，则可以通过使用大括号而不是括号来避免它们）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-27T17:14:27.480

您的程序的行为与您的描述完全相同：`inputFile >> numbers;`只需提取输入文件中的第一个整数，因此如果您取消制表符，`inputFile>>`将提取数字`12345`，而不是 5 个五个数字`[1,2,3,4,5]`。

更好的方法：

```
vector< int > numbers;
string fileName = "text.txt";
ifstream inputFile;
inputFile.open(fileName.c_str(),ios_base::in);
char c;
while (inputFile.good())     // loop while extraction from file is possible
{
    c = inputFile.get();       // get character from file
    if ( inputFile.good() and c!= '\t' and c!=' ' ) // not sure of tab and space encoding in C++
    {
      numbers.push_back( (int) c);
    }
}
inputFile.close(); 
```

# graph - 在线性时间内找到无向加权图中 2 个节点之间不同最短路径的总数？

> ID：13102203
> 
> 赞同：0
> 
> 时间：2012-10-27T16:57:28.587
> 
> 标签：graph, distinct, shortest-path, dijkstra, bellman-ford

我想知道，如果有一个加权图 G(V,E)，并且我需要在其中找到任意两个顶点 S 和 T 之间的一条最短路径，那么我可以使用 Dijkstras 算法。但是我不确定当我们需要找到从 S 到 T 的所有不同的最短路径时如何做到这一点。它是否可以在 O(n) 时间内解决？我还有一个问题，比如如果我们假设图中边的权重只能在某个范围内假设值，比如说 1 <=w(e)<=2 这会影响时间复杂度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-20T19:05:26.483

(a) 使用来自 s 的 BFS 来标记像往常一样访问的节点，同时更改以下内容：

(b) 对于每个节点 v，它有一个记录 L(v) 表示 v 所在的层，记录 f(v) 表示传入路径的数量：

(c) 每次在另一个节点的 v2 邻居中找到节点 v1 时：

(d) 如果 v1 不在队列中，则将其添加到队列中，L(v1) = L(v2) + 1,f(v1)+ = f(v2)

(d) 如果 v1 已经在队列中并且 L(v1) 等于 L(v2)，则什么也不做。

(e) 如果 v1 已经在队列中，但 L(v1) 不等于 L(v2)，则 f(v1)+ = f(v2)

(f) 直到在这个修改后的 BFS 中，t 第一次从队列中弹出，我们有 f(t)

(g) 而这个 f(t) 表示从 s 到 t 的不同最短路径的数量

这可能会解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T23:17:41.530

您可以使用 Dijkstra 来完成。在 Dijkstra 的算法中，您根据每个节点与源的距离为每个节点分配标签，并根据该距离（最小的优先）解决节点。一旦目标节点确定下来，您就拥有了最短路径的长度。要检索路径（=边缘序列），您可以跟踪您解决的每个节点的父节点。要检索所有可能的路径，您必须考虑**每个节点的多个父节点**。

一个小例子：

假设您有一个看起来像这样的图（为简单起见，所有边的权重为 1）：

```
 B
      / \
     A   C - D
      \ /
       E 
```

当您执行 dijkstra 以找到距离 A->D 时，您将得到 3。您将首先以距离 0 解决节点 A，然后以距离 1 结算节点 B 和 E，以距离 2 结算节点 C，最后以距离 3 结算节点 D。要获得路径，您会在解决节点时记住它们的父节点。在这种情况下，您首先将 B 和 C 的父节点设置为节点 A。然后您需要将节点 C 的父节点设置为 B 和 E，因为它们都提供相同的长度。节点 D 将节点 C 作为父节点。

当您需要路径时，您可以只跟随父指针，从 D 开始，每次节点有多个父节点时分支。这将为您在节点 C 处提供一个分支。

上面评论中提到的帖子使用了相同的原理，虽然它不允许您实际提取路径，但它只给您计数。最后一点：Dijkstra 不是线性时间算法，因为您需要执行大量操作来维护队列和节点集。

# c# - 为什么我不能读取会话变量

> ID：13102204
> 
> 赞同：3
> 
> 时间：2012-10-27T16:57:29.333
> 
> 标签：c#, asp.net, session

我有 ac# .net Web 应用程序。我创建了会话变量，但是当我离开创建它们的页面后尝试读取它们时，我不能。

创建于第 1 页

```
Session["UserName"] = "WhatEver"; 
```

然后我做

```
Response.Redirect("~/whatever.aspx"); 
```

并尝试在新页面的Page_Load方法中读取读取会话变量

```
string userName = Session["UserName"].ToString(); 
```

我收到`Object reference not set to an instance of an object.`

为什么我会收到此错误，我该怎么做才能解决此问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T17:11:42.670

这可能会有所帮助：

```
Response.Redirect("~/whatever.aspx",false); 
```

从[这篇文章](http://weblogs.asp.net/bleroy/archive/2004/08/03/Don_2700_t-redirect-after-setting-a-Session-variable-_2800_or-do-it-right_2900_.aspx)：

> 这不会中止线程并因此保存会话令牌。实际上，此重载由 RedirectFromLoginPage 在内部使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T17:16:02.380

可能在您的文件中`sessionState`已关闭`config`

```
<sessionState mode="Off/> 
```

更改为`InProc`[取决于]

```
<sessionState mode="InProc" timeout ="60" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:12:53.070

我遇到了完全相同的问题，我设法克服了这个问题，但坦率地说，我不理解 100% 的解决方案，无论如何，我所做的是从“添加新”为我的项目创建一个“Global.asax”文件项目”菜单。只需将以下代码复制粘贴到您的全局文件中。这个文件里面的代码如下：

```
using System;
using System.Collections.Generic;
using System.Web;
using System.Web.Security;

using System.Text;
using System.Data;
using System.Data.SqlClient;

namespace ENTER_YOUR_NAMESPACE
{
    public class Global : System.Web.HttpApplication
    {
        void Application_Start(object sender, EventArgs e)
        {

        }

        void Application_End(object sender, EventArgs e)
        {
            /* Code that runs on application shutdown */
            Session_End(sender, e);
        }

        void Application_Error(object sender, EventArgs e)
        {

        }

        void Session_Start(object sender, EventArgs e)
        {

        }//end void Session_Start

        void Session_End(object sender, EventArgs e)
        {

        }//end void Session_End

    }//end class Global
}//end namespace 
```

# c - 如何使用 CUDA 中的 uint4 向量正确转换全局内存数组以增加内存吞吐量？

> ID：13102205
> 
> 赞同：4
> 
> 时间：2012-10-27T16:58:01.887
> 
> 标签：c, optimization, cuda

通常有两种技术可以提高计算能力 1.3 GPU 上 CUDA 内核上全局内存的内存吞吐量；内存访问合并和访问至少 4 个字节的字。使用第一种技术，通过相同半扭曲的线程访问相同的内存段被合并为更少的事务，同时访问至少 4 个字节的字，这个内存段有效地从 32 个字节增加到 128 个。

**更新：基于 talonmies answer 的解决方案**。当全局内存中存储有无符号字符时，要访问 16 字节而不是 1 字节字，通常通过将内存数组转换为 uint4 来使用 uint4 向量。要从 uint4 向量中获取值，可以将其重铸为 uchar4，如下所示：

```
#include <cuda.h>
#include <stdio.h>
#include <stdlib.h>

__global__ void kernel ( unsigned char *d_text, unsigned char *d_out ) {

    int idx = blockIdx.x * blockDim.x + threadIdx.x;

    extern __shared__ unsigned char s_array[];

    uint4 *uint4_text = reinterpret_cast<uint4 *>(d_text);
    uint4 uint4_var;

    //memory transaction
    uint4_var = uint4_text[0];

    //recast data to uchar4
    uchar4 c0 = *reinterpret_cast<uchar4 *>(&uint4_var.x);
    uchar4 c4 = *reinterpret_cast<uchar4 *>(&uint4_var.y);
    uchar4 c8 = *reinterpret_cast<uchar4 *>(&uint4_var.z);
    uchar4 c12 = *reinterpret_cast<uchar4 *>(&uint4_var.w);

    d_out[idx] = c0.y;
}

int main ( void ) {

    unsigned char *d_text, *d_out;

    unsigned char *h_out = ( unsigned char * ) malloc ( 16 * sizeof ( unsigned char ) );
    unsigned char *h_text = ( unsigned char * ) malloc ( 16 * sizeof ( unsigned char ) );

    int i;

    for ( i = 0; i < 16; i++ )
            h_text[i] = 65 + i;

    cudaMalloc ( ( void** ) &d_text, 16 * sizeof ( unsigned char ) );
    cudaMalloc ( ( void** ) &d_out, 16 * sizeof ( unsigned char ) );

    cudaMemcpy ( d_text, h_text, 16 * sizeof ( unsigned char ), cudaMemcpyHostToDevice );

    kernel<<<1,16>>>(d_text, d_out );

    cudaMemcpy ( h_out, d_out, 16 * sizeof ( unsigned char ), cudaMemcpyDeviceToHost );

    for ( i = 0; i < 16; i++ )
            printf("%c\n", h_out[i]);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T18:43:35.290

转换为 char* 就可以了。你试过了吗？如果是这样，是什么引发了这个问题？

在您的示例中，您似乎可以只`s_array`转换为 an`int*`并从中执行单个副本`var.x`（乘以`j`4 而不是 16）。

如果您需要更灵活地对单词中的字节进行改组，则可以使用`__byte_perm()`内在函数。例如，要反转整数中字节的顺序`x`，您可以这样做`__byte_perm(x, 0, 0x0123);`

使用向量类型甚至单个 int 来存储字节可能不会获得任何好处。在 Fermi 上，全局内存事务为 128 字节宽。因此，当您的 warp 遇到从/向全局内存加载/存储的指令时，GPU 将执行服务 32 个线程所需的 128 字节事务。性能很大程度上取决于需要多少单独的事务，而不是每个线程如何加载或存储其字节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T12:27:06.780

如果我了解您要做什么，逻辑方法是使用 C++`reinterpret_cast`机制使编译器生成正确的向量加载指令，然后使用 CUDA 内置字节大小的向量类型`uchar4`来访问四个字节中的每个字节从全局内存中加载的 32 位字。使用这种方法，您真的相信编译器知道在每个 32 位寄存器中进行字节访问的最佳方式。

一个完全人为的示例可能如下所示：

```
#include <cstdio>
#include <cstdlib>

__global__
void kernel(unsigned int *in, unsigned char* out)
{
    int tid = threadIdx.x;

    uint4* p = reinterpret_cast<uint4*>(in);
    uint4  i4 = p[tid]; // vector load here

    uchar4 c0 = *reinterpret_cast<uchar4 *>(&i4.x);
    uchar4 c4 = *reinterpret_cast<uchar4 *>(&i4.y);
    uchar4 c8 = *reinterpret_cast<uchar4 *>(&i4.z);
    uchar4 c12 = *reinterpret_cast<uchar4 *>(&i4.w);

    out[tid*4+0] = c0.x;
    out[tid*4+1] = c4.y;
    out[tid*4+2] = c8.z;
    out[tid*4+3] = c12.w;
}

int main(void)
{
    unsigned int c[8] = { 
        2021161062, 2021158776, 2020964472, 1920497784, 
        2021161058, 2021161336, 2020898936, 1702393976 };

    unsigned int * _c;
    cudaMalloc((void **)&_c, sizeof(int)*size_t(8));
    cudaMemcpy(_c, c, sizeof(int)*size_t(8), cudaMemcpyHostToDevice);
    unsigned char * _m;
    cudaMalloc((void **)&_m, sizeof(unsigned char)*size_t(8));

    kernel<<<1,2>>>(_c, _m);

    unsigned char m[8];
    cudaMemcpy(m, _m, sizeof(unsigned char)*size_t(8), cudaMemcpyDeviceToHost);

    for(int i=0; i<8; i++)
        fprintf(stdout, "%d %c\n", i, m[i]);

    return 0;
} 
```

它应该产生一个嵌入提供给内核的无符号整数数组中的可读字符串。

一个警告是，用于计算 1.x 目标的 open64 编译器通常会破坏这种尝试生成向量负载的策略，如果它可以检测到并非向量中的所有单词都被实际使用。因此，请确保触摸输入向量类型中的所有输入词，以确保编译器运行良好。

# gcc - 在calloc中崩溃

> ID：13102209
> 
> 赞同：0
> 
> 时间：2012-10-27T16:58:27.320
> 
> 标签：gcc, crash, openmp, calloc

我正在尝试调试我编写的程序。我跑了进去`gdb`，我设法`SIGABRT`从里面抓住了一个`calloc()`。我完全不知道这是怎么出现的。它可能是一个错误，`gcc`甚至是`libc`？

更多细节：我的程序使用 OpenMP。我以`valgrind`单线程模式运行它，没有错误。我也`mmap()`用来加载一个 40GB 的文件，但我怀疑这是否相关。在里面`gdb`，我正在运行 30 个线程。几次相同的运行（相同的输入和 CL）正确完成，直到我发现有问题的运行。从表面上看，这表明可能存在某种类型的竞争条件。但是，它的`SIGABRT`来源`calloc()`是我无法控制的。这是一些相关的`gdb`输出：

```
(gdb) info threads
[...]
  17 Thread 0x7fffec450700 (LWP 73455)  0x00007ffff6b3ce00 in __read_nocancel () from /lib64/libc.so.6
  16 Thread 0x7fffece51700 (LWP 73454)  _mm_slli_si128 (genome=<value optimized out>, goff=<value optimized out>, glen=50, read=<value optimized out>, rlen=36, genome_ls=<value optimized out>, initbp=-1, is_rna=false) at /usr/lib/gcc/x86_64-redhat-linux/4.4.6/include/emmintrin.h:1155
  14 Thread 0x7fffee253700 (LWP 73452)  0x000000000041183e in _mm_prefetch (re=0x7fff291c0f10, st=1, options=0x632014) at /usr/lib/gcc/x86_64-redhat-linux/4.4.6/include/xmmintrin.h:1193
  13 Thread 0x7fffeec54700 (LWP 73451)  0x00007ffff6ae5c84 in __memset_sse2 () from /lib64/libc.so.6
  12 Thread 0x7fffef655700 (LWP 73450)  _mm_cmpeq_epi16 (genome=<value optimized out>, goff=<value optimized out>, glen=33, read=<value optimized out>, rlen=24, genome_ls=<value optimized out>, initbp=-1, is_rna=false) at /usr/lib/gcc/x86_64-redhat-linux/4.4.6/include/emmintrin.h:1263
* 11 Thread 0x7ffff0056700 (LWP 73449)  0x00007ffff6a948a5 in raise () from /lib64/libc.so.6
  10 Thread 0x7ffff0a57700 (LWP 73448)  _mm_sub_epi16 (genome=<value optimized out>, goff=<value optimized out>, glen=36, read=<value optimized out>, rlen=26, genome_ls=<value optimized out>, initbp=-1, is_rna=false) at /usr/lib/gcc/x86_64-redhat-linux/4.4.6/include/emmintrin.h:1046
  5 Thread 0x7ffff3c5c700 (LWP 73443)  0x000000000041183e in _mm_prefetch (re=0x7fff28615010, st=1, options=0x632014) at /usr/lib/gcc/x86_64-redhat-linux/4.4.6/include/xmmintrin.h:1193
  2 Thread 0x7ffff5a5f700 (LWP 73440)  0x000000000041e4cd in _mm_max_epi16 (genome=<value optimized out>, goff=<value optimized out>, glen=29, read=<value optimized out>, rlen=21, genome_ls=<value optimized out>, initbp=-1, is_rna=false) at /usr/lib/gcc/x86_64-redhat-linux/4.4.6/include/emmintrin.h:1331
  1 Thread 0x7ffff7fdcae0 (LWP 73437)  0x00007ffff6ae5cff in __memset_sse2 () from /lib64/libc.so.6
[...]
(gdb) thread 11
[Switching to thread 11 (Thread 0x7ffff0056700 (LWP 73449))]#0  0x00007ffff6a948a5 in raise () from /lib64/libc.so.6
(gdb) bt
#0  0x00007ffff6a948a5 in raise () from /lib64/libc.so.6
#1  0x00007ffff6a96085 in abort () from /lib64/libc.so.6
#2  0x00007ffff6ad1fe7 in __libc_message () from /lib64/libc.so.6
#3  0x00007ffff6ad7916 in malloc_printerr () from /lib64/libc.so.6
#4  0x00007ffff6adb79f in _int_malloc () from /lib64/libc.so.6
#5  0x00007ffff6adbdd6 in calloc () from /lib64/libc.so.6
#6  0x000000000040e87f in my_calloc (re=0x7fff2867ef10, st=0, options=0x632020) at gmapper/../gmapper/../common/my-alloc.h:286
#7  read_get_hit_list_per_strand (re=0x7fff2867ef10, st=0, options=0x632020) at gmapper/mapping.c:1046
#8  0x000000000041308a in read_get_hit_list (re=<value optimized out>, options=0x632010, n_options=1) at gmapper/mapping.c:1239
#9  handle_read (re=<value optimized out>, options=0x632010, n_options=1) at gmapper/mapping.c:1806
#10 0x0000000000404f35 in launch_scan_threads (.omp_data_i=<value optimized out>) at gmapper/gmapper.c:557
#11 0x00007ffff7230502 in ?? () from /usr/lib64/libgomp.so.1
#12 0x00007ffff6dfc851 in start_thread () from /lib64/libpthread.so.0
#13 0x00007ffff6b4a11d in clone () from /lib64/libc.so.6
(gdb) f 6   
#6  0x000000000040e87f in my_calloc (re=0x7fff2867ef10, st=0, options=0x632020) at gmapper/../gmapper/../common/my-alloc.h:286
286         res = calloc(size, 1);
(gdb) p size
$2 = 814080
(gdb) 
```

该函数`my_calloc()`只是一个包装器，但问题不在那里，因为真正的`calloc()`调用看起来是合法的。这些是在 shell 中设置的限制：

```
$ ulimit -a
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 2067285
max locked memory       (kbytes, -l) 64
max memory size         (kbytes, -m) unlimited
open files                      (-n) 1024
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 10240
cpu time               (seconds, -t) unlimited
max user processes              (-u) 1024
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited 
```

该程序没有内存不足，它在一台有 256GB 可用空间的机器上使用 41GB：

```
$ top -b -n 1 | grep gmapper
 73437 user      20   0 41.5g  16g  15g T  0.0  6.6  55:17.24 gmapper-ls
$ free -m
             total       used       free     shared    buffers     cached
Mem:        258437     195567      62869          0         82     189677
-/+ buffers/cache:       5807     252629
Swap:            0          0          0 
```

`g++ (GCC) 4.4.6 20120305 (Red Hat 4.4.6-4)`我使用, 和 flags编译`-g -O2 -DNDEBUG -mmmx -msse -msse2 -fopenmp -Wall -Wno-deprecated -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS`。

*编辑*：我得到的详细错误信息如下。我截断了它，未显示的行与最后 5 行相似。

```
*** glibc detected *** /tmp/t/gmapper-ls: corrupted double-linked list: 0x0000000009447380 ***
*** glibc detected *** /tmp/t/gmapper-ls: corrupted double-linked list: 0x0000000009447380 ***
======= Backtrace: =========
======= Backtrace: =========
/lib64/libc.so.6(+0x75916)[0x7ffff6ad7916]
/lib64/libc.so.6(+0x75916)[0x7ffff6ad7916]
/lib64/libc.so.6(+0x7979f)[0x7ffff6adb79f]
/lib64/libc.so.6(+0x7979f)[0x7ffff6adb79f]
/lib64/libc.so.6(__libc_malloc+0x71)[0x7ffff6adc141]
/lib64/libc.so.6(__libc_calloc+0xc6)[0x7ffff6adbdd6]
/usr/lib64/libgomp.so.1(+0x8502)[0x7ffff7230502]
/usr/lib64/libgomp.so.1(+0x8502)[0x7ffff7230502]
/lib64/libc.so.6(clone+0x6d)[0x7ffff6b4a11d]
/lib64/libpthread.so.0(+0x7851)[0x7ffff6dfc851]
/lib64/libc.so.6(clone+0x6d)[0x7ffff6b4a11d]
======= Memory map: ========
00400000-00430000 r-xp 00000000 00:14 927268870                          /tmp/t/gmapper
00630000-00631000 rw-p 00030000 00:14 927268870                          /tmp/t/gmapper
00631000-2f461000 rw-p 00000000 00:00 0                                  [heap]
7f749d9be000-7f7e2053b000 r--p 00000000 00:0f 1278724                    /dev/shm/hg19-ls
7fff24000000-7fff2727a000 rw-p 00000000 00:00 0
7fff2727a000-7fff28000000 ---p 00000000 00:00 0
7fff285ce000-7fff2c000000 rw-p 00000000 00:00 0
7fff2c000000-7fff2f547000 rw-p 00000000 00:00 0
7fff2f547000-7fff30000000 ---p 00000000 00:00 0
[...] 
```

*Edit2*：我为所有在看似“非平凡”的地方（10/30）停止的线程添加了线程信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T17:02:09.617

请注意，您的 GCC 版本相当旧。当前的 GCC 是 4.7.2

出于调试目的，您可以使用较少的优化进行编译：而不是`-g -O2 -NDEBUG -mmmx -msse -msse2 -fopenmp -Wall`仅使用 use `-g -Wall`。

^(用较少的优化编译使`gdb`调试器更快乐)

然后，使用[valgrind](http://valgrind.org/)并`gdb`调试您的程序。

# html - jquery cookie 代码错误

> ID：13102215
> 
> 赞同：0
> 
> 时间：2012-10-27T16:59:18.313
> 
> 标签：html, css, jquery-ui, jquery

我试图为链接创建一个cookie，但它向我显示了这样的错误......如何修复它......

未捕获的 ReferenceError：未定义 createCookie

我在fidle中提供我的代码

[http://jsfiddle.net/SSMX4/82/](http://jsfiddle.net/SSMX4/82/) [cookie 不工作](http://jsfiddle.net/SSMX4/82/)

我的jQuery代码如下

```
 // locale selector actions
    $('#region-picker').click(function(){
            if ($("#locale-select").is(":visible")) return closeSelector('slide');

        var foot_height = $('#footer').innerHeight();
        var foot_height_css = foot_height-1;
        var select_position = '-=' + (Number(700)+18);
        console.log("hallo"+select_position);
        var $selector = $('#locale-select');
        $('#locale_pop').fadeOut();
        $selector.css({top:foot_height_css});
        $selector.fadeIn(function(){
            $(this).addClass('open');
            $(this).animate({top:select_position}, 1000);
            });
    });
    $('#select-tab').click(function(e){
        e.stopPropagation()
        closeSelector('slide');
        });
    // don't hide when clicked within the box
    $('#locale-select').click(function(e){
        e.stopPropagation();
    });
    $(document).click(function(){ 
        if ($('#locale-select').hasClass('open')) {
            closeSelector('disappear');
        }
    });

    $('.locale-link').click(function(){
        //var $clicked = $(this); //"$(this)" and "this" is the clicked span
        $(".locale-select-lable").html($(this).html());
        //search for "marginXXXXX"
        var flags = $(this).attr("class").match(/(margin\w+)\s/g);
        //create new class; add matching value if found
        var flagClass = "tk-museo-sans locale-select-lable" + (flags.length ? " " + flags[0] : "");
        //set new class definition
        $(".locale-select-lable").attr("class", flagClass);

        closeSelector('disappear');

        //if ($("#locale-select").is(":visible")) return closeSelector('slide');
       /*         
       // var desired_locale = $(this).attr('rel');
       // createCookie('desired-locale',desired_locale,360);
       // createCookie('buy_flow_locale',desired_locale,360);
        //closeSelector('disappear');
        */
    });  /* CORRECTED */

    $('#locale_pop a.close').click(function(){
        var show_blip_count = readCookie('show_blip_count');
        if (!show_blip_count) {
            createCookie('show_blip_count',3,360);
        }
        else if (show_blip_count < 3 ) {
            eraseCookie('show_blip_count');
            createCookie('show_blip_count',3,360);
        }
        $('#locale_pop').slideUp();
        return false;
    }); 

function closeSelector(hide_type){
var foot_height = $('#footer').innerHeight();
var select_position = '+=' + (Number(400)+20);
if (hide_type == 'slide') {
$('#locale-select').animate({top:select_position}, 1000, function(){
$(this).removeClass('open');
$(this).fadeOut()
});
}
else if (hide_type == 'disappear'){
$('#locale-select').fadeOut('fast');
$('#locale-select').removeClass('open');
}
} 

    $('.locale-link').click(function(){
        var desired_locale = $(this).attr('rel');
        console.log("cookie....." + desired_locale);
        createCookie('desired-locale',desired_locale,360);
        createCookie('buy_flow_locale',desired_locale,360);
        closeSelector('disappear');
    })

    $('#locale_pop a.close').click(function(){
        var show_blip_count = readCookie('show_blip_count');
        if (!show_blip_count) {
            createCookie('show_blip_count',3,360);
        }
        else if (show_blip_count < 3 ) {
            eraseCookie('show_blip_count');
            createCookie('show_blip_count',3,360);
        }
        $('#locale_pop').slideUp();
        return false;
    }); 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T17:03:14.623

我没有找到您对函数“createCookie”的声明。看来您复制了代码并忘记了复制功能。

顺便说一句：“xxx 未定义”总是意味着变量/函数不存在..

# java - 一旦我手动调整窗口大小，我的 JComponent 只会 repaint()，我如何让它正常工作？

> ID：13102218
> 
> 赞同：2
> 
> 时间：2012-10-27T16:59:26.790
> 
> 标签：java, swing, user-interface, paint, repaint

我已尽力阅读该主题，但我无法找到/理解如何将答案应用于我的代码（并且我应用的那些代码不起作用）

我使用了“Ivor Horton 的 Java 2 JDK 入门书”中的一个示例，这是我第一次使用`repaint()`，但除非我调整窗口大小，否则它似乎不起作用。它尝试重新绘制但使屏幕空白。

这是代码，如果我做错了什么，请告诉我。

```
public class CurveDrawings extends JFrame{
public CurveDrawings (String title){
    setTitle(title);
    setDefaultCloseOperation(EXIT_ON_CLOSE);

    pane = new CurvePane();                     //Create pane containing curves
    Container content = getContentPane();       //Get the content pane

    //Add the pane containing the curves to the content pane for the applet
    content.add(pane);

    MouseHandler handler = new MouseHandler();
    pane.addMouseListener(handler);
    pane.addMouseMotionListener(handler);
}

//Class defining pane on which to draw
class CurvePane extends JComponent{
    public CurvePane(){
        quadCurve = new QuadCurve2D.Double(
            startQ.x, startQ.y, control.x, control.y, endQ.x, endQ.y
        );

        cubicCurve = new CubicCurve2D.Double(
            startC.x, startC.y, controlStart.x, controlStart.y,
            controlEnd.x, controlEnd.y, endC.x, endC.y
        );
    }
}

class Marker{//not needed for my problem}

class MouseHandler extends MouseInputAdapter{
    public void mousePressed(MouseEvent e){
        if(ctrlQuad.contains(e.getX(),e.getY())){
            selected = ctrlQuad;}
        else if(ctrlCubic1.contains(e.getX(),e.getY())){
            selected = ctrlCubic1;}
        else if(ctrlCubic2.contains(e.getX(),e.getY())){
            selected = ctrlCubic2;}
    }

    public void mouseReleased (MouseEvent e){
        selected = null;
    }

    public void mouseDragged (MouseEvent e){
        System.out.println("DRAGGED");
        if(selected != null){
            //Set the marker to current cursor position
            selected.setLocation(e.getX(),e.getY());
            pane.validate();
            pane.repaint();
        }
    }

    Marker selected = null;
}

    public void paint (Graphics g){
        Graphics2D g2D = (Graphics2D)g;         //Get a 2D device context
    //Code to draw each component
    }

//Points for quadratic curve

//Points for cubic curve

//More unnecessary code} 
```

如果有任何帮助，这里是应用程序的“启动器”类

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T17:03:16.200

你需要打电话

```
super.paint(g); 
```

在您的类中的`paint`方法中，`CurveDrawings`以利用`JFrame`超类中已经提供的绘画功能。

请注意，在 Swing 中使用自定义绘制的标准方法是使用基于`javax.swing.JComponent`该 use 和 override的自定义组件`paintComponent`。这种方法将利用 Swing 的优化绘画模型。

请参阅：[执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)

# html - 有条件地显示 box-shadow

> ID：13102223
> 
> 赞同：0
> 
> 时间：2012-10-27T17:00:47.620
> 
> 标签：html, css

我用这个 CSS 代码展示了[box-shadow 。](http://www.css3.info/preview/box-shadow/)

```
img {
    box-shadow: 2px 2px 1px #888;
} 
```

![在此处输入图像描述](../Images/889263d19b4dd823e88a9953b915caa8.png)

我想有条件地隐藏寄宿生，我尝试在 img 标签中添加“noboarder”类，

```
<img ... class="noborder">
#noborder
{
    box-shadow: 0px 0px 0px #888;
} 
```

但是，我仍然有 `class="noborder"> 代码的影子，可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T17:24:50.673

好的，这里有一些问题。首先，您的 HTML 中有一个 class 属性，但您尝试使用 ID 选择器选择 img `#`。您必须使用类选择器`.`

此外，当覆盖阴影使其不出现时，您必须将颜色设置为透明。px 测量值用于阴影偏移、大小和散布（如果您使用它），因此这些根本不重要。或者使用 none 代替测量值和颜色。

我更改了选择器和类以更好地反映 CSS 的作用，因为阴影与边框不同。

```
.shadow
{
    box-shadow: 2px 2px 2px #888;
}

.noShadow
{
    2px 2px 2px transparent
}​

.noShadow.none
{
     box-shadow: none;
} 
```

​</p>

这[是一个 jsfiddle 演示](http://jsfiddle.net/KzURM/1/)，向您展示它是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T17:27:24.573

尝试用 替换`#noborder`，`.noborder`你希望它是一个类，而不是一个 ID。

此外，`box-shadow: none`它是去除盒子阴影的更简洁的替代方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T17:25:04.117

用于`box-shadow: none`完全去除阴影。

```
<div>test</div>
<div class="noborder">test</div>​ 
```

* * *

```
div {box-shadow: 2px 2px 1px #888;}
.noborder{box-shadow: none;} 
```

[演示](http://jsfiddle.net/UtxCD/)

# javascript - 如何更改脚本以仅加载没有图像等的页面内容？

> ID：13102225
> 
> 赞同：1
> 
> 时间：2012-10-27T17:01:06.540
> 
> 标签：javascript, firefox, greasemonkey

我目前有以下greasemonkey脚本：

```
// ==UserScript==
// @name        test_script
// @namespace   my.example.com
// @include     http://example.com/*
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js
// @version     1
// @grant       none
// ==/UserScript==

(function(window, undefined) {

        // normalized window
        var w;
        if (unsafeWindow != "undefined"){
                w = unsafeWindow
        } else {
                w = window;
        }

        // You can inject almost any javascript library here.
        // Just pass the w as the window reference,
        // e.g. jquery.min.js embedding:
        // (function(a,b){function ci(a) ... a.jQuery=a.$=d})(w);

        // do not run in frames
        if (w.self != w.top){
                return;
        }
        // additional url check.
        // Google Chrome do not treat @match as intended sometimes.
        if (/http:\/\/example.com\//.test(w.location.href)){
                var link = $('span.link').text();
                if (link) {
                    location.replace(link);
                }
        }
})(window); 
```

打开`example.com`页面后，它会在此处查找 URL 并重定向我。它运行良好，但仅在加载所有图像、样式表等时才会发生重定向。我应该如何解决这个问题？[看起来](http://wiki.greasespot.net/DOMContentLoaded)它应该发生在以前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T21:13:35.230

您*显示*的代码***将***在加载图像之前触发，但不一定在 CSS 之前触发。
**来自[Mozilla 的 DOMContentLoaded 文档](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/DOMContentLoaded_%28event%29)**（并[在 Gecko、Webkit 和 IE 中验证](http://molily.de/weblog/domcontentloaded#external-scripts)）：

> 样式表加载块脚本执行，所以如果你有一个`<script>`after a `<link rel="stylesheet" ...>`，页面将不会完成解析 - 并且**DOMContentLoaded 不会触发 - 直到加载样式表。**

显然，如果 CSS 和/或图像很小或被缓存，它们也可能会在脚本触发之前加载。

您*也许*可以使用[`@run-at document-start`](http://wiki.greasespot.net/Metadata_Block#.40run-at). 例如，请参阅[**此答案**](https://stackoverflow.com/a/12660023/331508)和类似内容。

# php - PHP Require() 不在父脚本范围内执行所需文件

> ID：13102226
> 
> 赞同：2
> 
> 时间：2012-10-27T17:01:44.203
> 
> 标签：php, require, execute

正如几乎所有地方所建议的那样，我正在尝试将连接到数据库的过程卸载到 DBConfig.php 文件，因为我需要在多个文件中重用代码。

该建议总是被框定为（编辑以反映我的实际代码）：

```
-------DBConfig.php-------
<?php
$link = mysql_connect('localhost','user','pass');
if (!$link) {
  die('Not connected : ' . mysql_error());
}
$db_selected = mysql_select_db('db_name');
if (!$db_selected) {
    die ('Can\'t use db_name : ' . mysql_error());
}
?>

-------Parent.php-------
<!DOCTYPE html>
<?php
require_once 'DBConfig.php';
$something = mysql_query("SELECT * FROM `table` LIMIT 0, 30 ");
// This query works fine if the mysql_connect() and
// mysql_select_db() stuff is in this script in place
// of the require_once.
$listofthings = array();
while($temp = mysql_fetch_array($something)){
    $listofthings[] = $temp;
}
// Do other things too
?> 
```

但是当我尝试这样做时`mysql_fetch_array($something)`，它会失败并显示警告：`mysql_fetch_array() expects parameter 1 to be resource, boolean given`。

* * *

请记住，如果我只是将 的内容`DBConfig.php`放入父脚本而不是`require 'DBConfig.php';`...

并且还注意到`print(require 'DBConfig.php'); //- 1`（PHP 正在返回 1 表示它已成功定位并包含该文件。参见[示例 5](http://php.net/manual/en/function.include.php)）...

发生了什么事，我该如何解决？我正在使用在 Windows 7 x64 上运行的[WAMPServer](http://www.wampserver.com/en/)（Apache 2.4.2、PHP 5.4.3）的默认配置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T17:12:48.717

如果这

```
require 'DBConfig.php'; 
```

就是你*正在*做的事情，绝对不可能在其他范围内执行脚本。如果您使用的是`http://`URL，那将是原因，但如果您像您一样使用相对路径，则不会。

在连接到数据库之后，也没有在`mysql_query()`调用之后进行任何错误检查，因此更有可能只是查询中断。为您的查询添加适当的错误检查，您将了解更多。

另一种可能性是如果您`DBConfig.php`在函数内部调用。函数会弄乱您的包含范围。但是你的例子中没有，所以我假设这不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T17:15:33.863

可能您的查询有一些错误。尝试 `mysql_query($query) or die( mysql_error() );`

mysql_query() 出错时返回 FALSE（布尔值）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T17:13:56.177

需要知道你在变量 $pretend_this_var_is_a_querystring 中给出了什么。如果查询失败，通常会生成此错误。我们需要知道您在 mysql_query() 函数中传递的字符串。请检查您的查询字符串。

也在您的 DBConfig.php 中。它应该是

```
$db_selected = mysql_select_db('db_name', $link); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T17:29:12.453

如果这是您正在使用的确切代码，请更改：

```
require 'DBConfig.php'; 
```

至：

```
require('DBConfig.php'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-27T19:12:37.067

我认为您包含错误的文件。（名称相同，但位置不同）。

如果`DBConfig.php`您想要的文件位于您`Parent.php`尝试执行的同一目录中

```
require_once dirname(__FILE__).'/DBConfig.php'; 
```

当您包含`DBConfig.php`文件时，如果您将 DBConfig 的代码复制并粘贴到 parent.php 文件中，效果必须相同（在您的情况下）。如果这没有发生，那是因为：

*   您包含的文件不是您认为的那样。（一些`set_include_path`在其他文件夹中）
*   您包含的文件内容不是您想的那样。

没有别的办法。

# playframework-2.0 - 未找到 play2 迷你动作

> ID：13102232
> 
> 赞同：1
> 
> 时间：2012-10-27T17:02:32.800
> 
> 标签：playframework-2.0

问题重现步骤：
1：在window环境下运行ok，EG:192.168.0.207:9091/insert?id=1 SUCCESS
2：打开DOS WINDOWS，在工程路径下：sbt->dist 生成目录
rserver/bin ;rserver/config;rserver/lib;rserver/deploy
3:把all目录放到linux环境
下 4:我写了一个xshell(run.sh)来运行项目(它包含akka.kernel.Main类)
5:./ run.sh start ,console message is
Starting Akka...
Running Akka 2.0.3
Deploying file:/opt/playmini/deploy/cti-kernel-1.0.0.jar
=========start=== =record=============（见此处）启动 CtiKernel
Play 服务器进程 ID 为 8084
[info] play - 应用程序已启动（产品）
[info] play - 在 /0:0:0:0:0:0:0:0:9091 上监听 HTTP
成功启动 Akka

对象 RecordApp 扩展应用程序 {

```
System.setProperty("http.port","9091")
System.setProperty("pidfile.path","/opt/pid")
val system = ActorSystem("RecordSystem")
val log = Logging.getLogger(RecordApp.system,this)
println("=========start====record=============")

def route = {
    case GET(Path("/insert")) & QueryString(qs) => Action{ request =>
      //val tenantId = QueryString(qs,"id").getOrElse(0)
      println("context:" + request.contentType)
      Ok("Pong1 @ %s\n".format(System.currentTimeMillis))
    }
  ... 
```

6:but 192.168.0.207:9091/insert?id=1 respose Action not found For request 'GET /insert?id=1'

请告诉我为什么

# jquery - jQuery UI datepicker 忽略格式

> ID：13102234
> 
> 赞同：-1
> 
> 时间：2012-10-27T17:02:45.387
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

代码：

```
 $('.datepicker').each(function(){
        $(this).find('input').datepicker({
            dateFornat: 'dd.mm.yy',
            changeMonth: true,
            changeYear: true
        });
    }); 
```

结果：

![在此处输入图像描述](../Images/7431cbf1796114e6ef72d26dbdab1ff6.png)

但按照`dateFormat`它应该是`12.10.2012`。有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T17:04:54.770

```
dateFornat: 'dd.mm.yy', 
```

应该

```
dateFormat: 'dd.mm.yy', 
```

你拼错了。

# jquery - Jquery从第二个子div中删除文本

> ID：13102240
> 
> 赞同：0
> 
> 时间：2012-10-27T17:03:16.183
> 
> 标签：jquery

我想使用 jquery 删除 Paktutorial 文本。但我无法替换文本。第二个 div 有一个动态创建的名称。

```
$(document).ready(function() {

    var text= $('#frei_user_brand').text().replace("Paktutorial", "Good News");
    $('#frei_user_brand').text(text);
});

<div id="frei_user_brand" class="frei_user_brand">
    <div id="frei" class="frei" style="height: 18px; ">Sample Text</div>
    <div id="big696power" class="big899power">
        <font size="1"> 
        <a href="http://paktutorial.com" target="_blank">Paktutorial</a>
        </font>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T17:10:47.003

```
$(document).ready(function() {
    $('#frei_user_brand a').text("Good News");
});
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T17:06:16.313

尝试这个

```
 var text= $('#frei_user_brand a').text().replace("Paktutorial", "Good News");
  $('#frei_user_brand a').text(text);​ 
```

[演示](http://jsfiddle.net/zdGf4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T17:49:33.910

你也可以使用这个

```
 var text=   $('#big696power').children().children('a').text().replace("Paktutorial","pippo")  ; 
```

在 $() 中，您还可以放入生成 div 名称的代码，例如

```
var text= $('#<?php echo $div;?>?').children().children('a').text().replace("Paktutorial","pippo")  ; 
```

我经常使用。

如果您知道 href 不会在内部更改，您也可以使用其他建议，让 js 使用过滤器搜索元素：

搜索完全匹配：

```
$(E[A=B]) 
```

或搜索部分匹配：

```
$(E[A^=B]) 
```

其中 E 是 DOM 中的元素或选择器 (a, input, div,...)，A 是属性 (href, name, value,...)，B 是值。

# java - Java Netbeans 没有足够的内存来编译

> ID：13102241
> 
> 赞同：5
> 
> 时间：2012-10-27T17:03:31.067
> 
> 标签：java, netbeans

目前我正在为我的学士学位做我的 FYP。

我正在使用 Netbeans 7.2。

刚才我在运行项目时收到一条消息说“没有足够的内存来编译”，它会加载我的应用程序的主 GUI，但是当我单击菜单项时，出现以下错误。

> 线程异常`"AWT-EventQueue-0" java.lang.NoClassDefFoundError: PreProcessing/Segmentation`
> 
> 预处理和分割是我项目中的类

我可以通过重新安装 Netbeans 并再次打开这个项目来解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T17:44:22.250

首先，按 shift-f11 进行干净的构建。注意输出窗口以确保一切编译正常。

如果是这样，则在项目窗口中右键单击您的项目（默认情况下在左侧），然后选择属性。接下来选择左侧的运行。然后在 VM 选项字段右侧的对话框中，输入类似`-XMx 512M`. 这将告诉运行您的进程的 JVM 将其内存使用量限制为 512 兆字节。选择您认为合适的更高或更低的数字。不要选择比您机器上的 RAM 更大的数字。

然后尝试运行您的项目。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-27T18:08:21.403

我仍然不知道发生这种情况的原因，但我解决了这个问题。我所做的是将项目文件夹复制到另一个位置并再次从netbeans打开它，现在它工作正常。

# html - CSS 和边框半径问题

> ID：13102243
> 
> 赞同：1
> 
> 时间：2012-10-27T17:03:37.880
> 
> 标签：html, scroll, css

我需要一些关于css 3问题的帮助......

问题是当我用 boder-radius 定义一个滚动框，然后滚动到底部时，边框存在裁剪问题。如果内容 div 是用静态位置定义的，没有问题，但我需要它是相对的，以获得翻译效果。

您可以尝试以下代码来了解我的意思：

```
<html>

<body>
    <div class="scrollBox" style="width:50%;height:100px;background:grey;border-radius:10px">
        <div class="content" style="height:100%;overflow:scroll">
            <div>Item</div>
            <div>Item</div>
            <div>Item</div>
            <div>Item</div>
            <div>Item</div>
            <div>Item</div>
            <div>Item</div>
            <div>Item</div>
            <div>Item</div>
            <div>Item</div>
            <div>Item</div>
            <div>Item</div>
            <div>Item</div>
            <div>Item</div>
            <div>Item</div>
            <div>Item</div>
            <div>Item</div>
        </div>

    </div>
</body>

</html> 
```

希望实际上有解决我的问题的方法。谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T17:11:31.270

添加一点水平填充：`.content { padding:0 10px;`}

我认为`border-radius`只是将背景颜色的角变圆，它实际上并没有改变形状/剪辑块的角。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T18:11:49.877

边框半径实际上会剪切内容，而不仅仅是背景颜色。您只需要`overflow: hidden;`容器块`.scrollBox`

# python - 命名将对象转换为另一种格式的方法的惯用 Python 方式

> ID：13102244
> 
> 赞同：3
> 
> 时间：2012-10-27T17:03:41.707
> 
> 标签：python, idioms

我正在寻找命名方法的最惯用方式，例如将类的数据转换为 xml。

如果我在 Ruby 中执行此操作，我会创建一个名为 example 的方法`to_xml`，但我已经看到在 Python 中执行此操作的几种不同方法。`toxml`, `to_xml`,`xml`和`toXML`, 用于与 XML 不同的输出，但只是推断 XML 的样子。并采取了如何将对象转换为原生 Python 对象（`str()`等）我真的不知道什么是惯用的方式。

就我个人而言，我会继续使用`to_xml`，因为我已经习惯了，但是对于一个有经验的 Python 程序员来说，这会不会出乎意料？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T17:06:22.093

[PEP8](http://www.python.org/dev/peps/pep-0008/#method-names-and-instance-variables)建议`to_xml`：

> 使用函数命名规则：小写单词，必要时用下划线分隔以提高可读性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T17:06:29.963

如果您阅读[Python 样式指南 - PEP8](http://www.python.org/dev/peps/pep-0008/)，建议使用小写字母，并用下划线分隔每个单词。

# emacs - 在 org-mode 表和 table.el 表之间转换，无需用户交互

> ID：13102245
> 
> 赞同：3
> 
> 时间：2012-10-27T17:03:48.270
> 
> 标签：emacs, elisp

我将 org-mode 表转换为 table.el 表。为此，我选择了表格：

```
| Option      | Type | Value | Descr        |
| -[no]h      | bool | yes   | Print        |
| -[no]versio | bool | no    | Print        |
| -nice       | int  | 0     | Set t        |
| -[no]v      | bool | no    | Be lo        |
| -time       | real | -1    | Take         |
| -[no]rmvsbd | bool | yes   | Removvirtual |
| sites       |      |       |              |
| -maxwarn    | int  | 0     | Numbe        |
| procenerate |      |       |              |
| unsta       |      |       |              |
| -[no]zero   | bool | no    | Set pthout   |
| defau error |      |       |              |
| -[no]renum  | bool | yes   | Renum        |
| atomty      |      |       |              | 
```

并按`C-c ~`。`org-mode`然后问我

```
Convert table to table.el table? (y or n) 
```

我如何以`y`编程方式回答？我阅读了那个 defun 的文档——没有办法用前缀 arg 来做。

bash 中的类似功能：

```
echo y | script-which-asks-y-or-n 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T20:41:19.663

`C-c ~`调用命令`org-table-create-with-table.el`，它提供了一堆围绕调用的包装器`org-table-convert`。如果您想在知道自己已经在 org-mode 表中时使用此功能，则不需要包装器，只需要两个（可能只有一个）命令：`org-table-align`和`org-table-convert`.

因此，如果您以交互方式执行此操作，则只需调用即可`M-x org-table-convert`完成。这假设表格已经对齐。您可以通过从一个单元格切换到下一个单元格来手动执行此操作，这会触发表格对齐。或者你可以用一个小函数来做到这一点：

```
(defun my-convert-tables ()
"No questions asked, just convert the table"
  (interactive)
  (org-table-align)
  (org-table-convert)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T19:33:43.663

您可以按如下方式以编程方式执行此操作。您可以在 defadvice 函数中将函数名称 test1 替换为 org-table-create-with-table.el，否则与下面的函数相同。

使用 defadvice 在函数之前和之后运行一些代码，我们可以将绑定到符号 y-or-np 的函数保存到全局变量中，并将其重新绑定到只返回 true 的函数。在功能之后，我们然后恢复原始功能。

```
(setq save-y-or-n-p nil)

(defadvice test1 (around always-yes) 
  (fset 'save-y-or-n-p (symbol-function 'y-or-n-p)) 
  (fset 'y-or-n-p (lambda (s) t)) 
  ad-do-it 
  (fset 'y-or-n-p (symbol-function 'save-y-or-n-p)))

 (defun test1 ()
  (interactive)
  (if (y-or-n-p "Happy? ")
      (insert "Happy day")
    (insert "Unhappy day"))) 
```

# java - 从java swing中的JList中删除选择

> ID：13102246
> 
> 赞同：1
> 
> 时间：2012-10-27T17:03:54.360
> 
> 标签：java, swing, jlist

在单击一个项目后，我试图在我的 JList 中删除选择，因为如果不移动选择就无法再次单击它。

我试过这个，但一直出错，我不明白发生了什么。

```
 ListSelectionModel mode = new DefaultListSelectionModel();
    mode.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
    mode.addListSelectionListener(new ListSelectionListener() 
    {
        public void valueChanged(ListSelectionEvent evt) 
        {

            // Åben url'en i en browser
            if( !evt.getValueIsAdjusting() )
            {

                if(isDownloaded(data_alle.get(list_alle.getSelectedIndex()),data_downloaded))
                {
                    try {
                        Desktop.getDesktop().open(new File(data_downloaded.get(list_alle.getSelectedIndex()).getPath()));
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
                else
                {
                    OpenURI.open(data_alle.get(list_alle.getSelectedIndex()).getUrl(), url);
                }
                list_alle.clearSelection();

            }
        }

    });

    list_alle.setSelectionModel(mode); 
```

和错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: -1
at java.util.ArrayList.get(Unknown Source)
at gui.Kursus$2.valueChanged(Kursus.java:114)
at javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source)
at javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source)
at javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source)
at javax.swing.DefaultListSelectionModel.changeSelection(Unknown Source)
at javax.swing.DefaultListSelectionModel.changeSelection(Unknown Source)
at javax.swing.DefaultListSelectionModel.removeSelectionIntervalImpl(Unknown Source)
at javax.swing.DefaultListSelectionModel.clearSelection(Unknown Source)
at javax.swing.JList.clearSelection(Unknown Source)
at gui.Kursus$2.valueChanged(Kursus.java:127)
at javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source)
at javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source)
at javax.swing.DefaultListSelectionModel.setValueIsAdjusting(Unknown Source)
at javax.swing.JList.setValueIsAdjusting(Unknown Source)
at javax.swing.plaf.basic.BasicListUI$Handler.mouseReleased(Unknown Source)
at java.awt.AWTEventMulticaster.mouseReleased(Unknown Source)
at java.awt.Component.processMouseEvent(Unknown Source)
at javax.swing.JComponent.processMouseEvent(Unknown Source)
at java.awt.Component.processEvent(Unknown Source)
at java.awt.Container.processEvent(Unknown Source)
at java.awt.Component.dispatchEventImpl(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
at java.awt.Container.dispatchEventImpl(Unknown Source)
at java.awt.Window.dispatchEventImpl(Unknown Source)
at java.awt.Component.dispatchEvent(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$000(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.awt.EventQueue$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:43:18.970

在您的选择处理程序中，您没有对所选项目进行任何越界检查

```
if( !evt.getValueIsAdjusting() && list_alle.getSelectedIndex() >= 0) {...} 
```

正在发生的事情是

1.  选择更改并输入您的处理程序代码，您处理更改并清除选择
2.  您的处理程序（再次）收到有关选择更改的通知，您处理更改并点击 an，`ArrayOutOfBoundsException`因为没有选择任何内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T17:17:18.013

由于您的问题中缺少相关代码/行#s，我最好的猜测如下：

我对 JList 的选择操作也有类似的问题。当您确定所选内容的索引时，来自`getMinSelectionIndex()`和相关调用的报告索引有时会将 0 报告为负数（可能与增量有关，但我承认不确定）。进行手动检查以确保您使用的索引不是负数：

```
 89     class SharedListSelectionHandler implements ListSelectionListener {
 90         public void valueChanged(ListSelectionEvent e) {
 91             ListSelectionModel lsm = (ListSelectionModel)e.getSource();
 92 
 93             if (!lsm.getValueIsAdjusting()){
 94                 int index = lsm.getMinSelectionIndex();
 95                 if (index < 0) {
 96                     index = 0;
 97                 }
 98                 handleListSelectionEvent(index);
 99             }
100 
101         }
102     } 
```

# objective-c - 从双精度数中删除尾随零（ObjectiveC）

> ID：13102248
> 
> 赞同：1
> 
> 时间：2012-10-27T17:04:09.050
> 
> 标签：objective-c, double, zero

> **可能的重复：**
> [清除双精度的尾随 0？](https://stackoverflow.com/questions/2641108/clear-trailing-0s-on-a-double)
> [将双精度数限制为两位小数，不带尾随零](https://stackoverflow.com/questions/4026135/limit-a-double-to-two-decimal-places-without-trailing-zeros)

我有一个字段，用户通过键盘（十进制数字键盘）输入数字，例如“1.5”。这被存储为双精度。

后来，当我允许用户编辑该字段并显示数字时，它显示为“1.500000”，这是我不想要的。

删除这些尾随零的最有效方法是什么？我不能将数字四舍五入到特定的小数点位数，因为用户可以输入他们想要的任何数字，并且必须保持这种方式（它是重量单位）。

我可以将数字拆分为一个字符数组并反向迭代，直到我达到 0 以上的任何值，但我认为/希望在 Objective C 中有更有效的东西？

谢谢！

# c - 将多维数组传递给C中的函数

> ID：13102251
> 
> 赞同：1
> 
> 时间：2012-10-27T17:04:53.763
> 
> 标签：c, function, multidimensional-array, parameter-passing

我写了这个函数来交换多维数组中的值，因为我理解数组是指针。

```
void
swap(int* a, int* b)
{
    int tmp = *a;
    *a = *b;
    *b = tmp;
} 
```

但是，当我尝试使用该功能时

```
swap(board[d-1][d-2]), board[d-1][d-33]; 
```

我从编译器中得到这些错误，但我不知道为什么：

```
fifteen.c: in function 'init':
fifteen.c:166:9: error: passing argument 1 of 'swap' makes pointer from integer without a cast [-werror]
fifteen.c:45:6: note: expected 'int *' but argument is of type 'int'
fifteen.c:166:9: error: passing argument 2 of 'swap' makes pointer from integer without a cast [-werror]
fifteen.c:45:6: note: expected 'int *' but argument is of type 'int' 
```

我如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T17:06:06.070

`board[d-1][d-2]`并且`board[d-1][d-33]`是`int`。要交换两者，您必须传递它们的地址：

```
swap (&board[d - 1][d - 2]), &board[d - 1][d - 33]; 
```

如果您正在使用`swap (board[d - 1][d - 2]), &board[d - 1][d - 33])`，该指令`int tmp = *a;`将尝试访问地址上的值`board[d - 1][d - 2]`：这没有任何意义！因为您使用的是指针，所以您必须传递变量的地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T17:06:32.910

您需要传递地址（`swap()`预计两个`int *`）：

```
swap (&board[d-1][d-2], &board[d-1][d-33]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T17:55:34.797

你传递了错误的论点

> 交换（板[d-1][d-2]），板[d-1][d-33]）；

您实际上必须传递变量的地址。因此，调用此函数的正确方法如下。

> 交换 (&board[d-1][d-2]), &board[d-1][d-33]);

我想这会对你有所帮助。

# macos - 在 MacOS 上使用 Firemonkey 进行 Web 更新应用程序

> ID：13102253
> 
> 赞同：4
> 
> 时间：2012-10-27T17:05:22.490
> 
> 标签：macos, delphi, auto-update, firemonkey

我正在为 Windows 和 MacOS 制作 Firemonkey 应用程序，现在我正在努力使其能够在线检查更新并下载更新。我已经让它在 Windows 上工作，通过重命名正在运行的 .exe 文件，下载新的，然后运行下载的 .exe，可以正常工作。

现在我的问题是 MacOS，我对 MacOS 没有太多经验，所以我真的不知道该怎么做：/
更不用说我将一些数据文件存储在“program.app”文件夹中。

所以我真的很感激一些关于我应该如何解决这个问题的帮助或想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T06:29:07.117

OSX 上的应用程序实际上只是一个文件包。如果您在 OSX 上进入 finder 并右键单击一个应用程序，您将看到显示包内容。打开它，您将看到构成“应用程序”的组成文件。从那里你必须决定你需要更换什么。

# java - 为什么在子类中继承私有数据成员

> ID：13102254
> 
> 赞同：1
> 
> 时间：2012-10-27T17:05:32.770
> 
> 标签：java

我有这段代码

```
public class Base {
    private int x=10;
     void show(){
         System.out.println(x);
     }

}

public class Child extends Base {

    public static void main(String[] args) {

        Child c1=new Child();
        c1.show();

    }

} 
```

这段代码运行良好，输出为 10。任何人都可以详细说明这个私有数据成员是如何在子类中访问的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-27T17:07:27.620

它不是。该`show()`方法被访问。然后父方法访问该字段`x`。该`show()`方法具有默认访问权限，其中包括`Child`在同一个包中的访问权限。

# jquery - Div 切换关闭按钮

> ID：13102255
> 
> 赞同：0
> 
> 时间：2012-10-27T17:05:36.327
> 
> 标签：jquery, html, toggle, slidetoggle

我已经让这个[http://jsfiddle.net/greggb/Gfw2n/](http://jsfiddle.net/greggb/Gfw2n/) div 切换脚本按照我想要的方式工作，除了一件事。

我试图在打开的 div 中获得一个关闭按钮，但不知道足够的 jquery 来解决如何做到这一点。

对此的任何帮助都会很棒。

谢谢，格雷格。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>

<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>

<style>

.action {
    cursor: pointer;
    width: 100px;
    padding: 20px;
    background: #cccccc;
    display: inline-block;
    margin: 10px 5px 0px 5px;
}

.content{
    display:none;
    width:60%;
    padding:100px;
    background-color: red;
}

.content1{
    display:none;
    width:60%;
    padding:100px;
    background-color: green;
}

.content2{
    display:none;
    width:60%;
    padding:100px;
    background-color: blue;
}

</style>

</head>

<body>

<div class="content" id="bottomContent">
    Content
</div>

<div class="content1" id="bottomContent1">
    Content 1
</div>

<div class="content2" id="bottomContent2">
    Content 2
</div>

<div class="action" data-content="#bottomContent" >
    Click
</div>

<div class="action" data-content="#bottomContent1">
    Click 1
</div>

<div class="action" data-content="#bottomContent2">
    Click 2
</div>

<script>

    $("div.action").click (function(){
        var $this = $(this);
        var target = $this.data('content');
        $('div.action').not($this).each(function(){
           var $other = $(this);
           var otherTarget = $other.data('content');
           $(otherTarget).hide();        
        });

        $(target).fadeIn({height: "toggle"}, 1000);

    });

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T17:59:12.293

你可以试试这个（`x`在 div 的右上角添加一个来关闭它）

```
$("div.action").click (function(){
    var $this = $(this);
    var target = $this.data('content');
    $('div.action').not($this).each(function(){
        var $other = $(this);
        var otherTarget = $other.data('content');
        $(otherTarget).hide();        
    });
    var cls=$('<div/>', {
       'style':'right:10px;top:15px;width:12px;height:18px;cursor:pointer;padding:2px;position:absolute;border:solid gray 1px;',
       'id':'cls',
       'text':'x',
       'title':'Close',
       'click':function(){
            var t=$(this);
            t.parent().fadeOut('madium', function(){
                t.remove();
            });
        }
    });
    $(target).prepend(cls).fadeIn({height: "toggle"}, 1000);
}); 
```

[**演示**](http://jsfiddle.net/Gfw2n/3/)。

# haskell - 使用 Haskell 打印矩阵

> ID：13102257
> 
> 赞同：1
> 
> 时间：2012-10-27T17:06:00.973
> 
> 标签：haskell, matrix

我需要在haskell中打印出一个矩阵，所以它看起来像这样：

```
main> putStr (showMat [[1,-500,-4], [100,15043,6], [5,3,10]])
       1  -500 -4
     100 15043  6
       5     3 10 
```

到目前为止，我想出了这个：

```
type Matrix a = [[a]]
type IntMat = Matrix Integer

showMat :: IntMat -> String
showMat [] = ""
showMat ((y:ys):xs)  = (printRow (rowmaxs) (elements) (y:ys)) ++ "\n" ++ showMat xs
  where rowmaxs = rowMaxs ((y:ys):xs) ; elements = elementLengths (y:ys)

rowMaxs :: IntMat -> [Int]
rowMaxs [] = []
rowMaxs (x:xs) = [length (show (maximum (x)))] ++ (rowMaxs xs)

elementLengths :: [Integer] -> [Int]
elementLengths [] = []
elementLengths (y:ys) = [length (show y)] ++ (elementLengths ys)

printRow :: [Int] -> [Int] -> [Integer] -> String
printRow [] (a:as) (y:ys) = ""
printRow (z:zs) (a:as) [] = ""
printRow [] [] (y:ys)     = ""
printRow [] [] []         = ""
printRow (z:zs) (a:as) (y:ys) = addSpaces (z-a) ++ show y ++ [' '] ++ printRow zs as ys

addSpaces :: Int -> String
addSpaces 0 = ""
addSpaces n = " " ++ addSpaces (n-1) 
```

这会返回：

```
Main> putStr (showMat [[1,23,1],[23,56,789],[1234,0,1]])
      1  23    1 
      23   56 
     1234 
```

我可以看到行末尾的元素丢失是由于 printRow 函数中的情况，但我不知道如何解决它。此外，字符不考虑在它们之前打印的字符。任何有关如何解决此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T18:43:04.650

前段时间我写了一个小脚本，它采用制表符分隔的表格（CSV 样式）并将其漂亮地打印到控制台。我已经提取了相关部分并在[此处](http://codepad.org/48Vxg7hZ)上传了源代码。例如，给定您的输入

```
m = [[1,23,456],[78,-90,123],[4567,8,9]] 
```

`putStrLn $ showMat m`会变成

```
 1  -500 -4
100 15043  6
  5     3 10 
```

如果您想要左对齐，那么在最底部还有一个功能（已注释掉）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T17:20:42.843

在`showMat`你计算`rowmaxs`和`elements`重新为每一行。特别是，矩阵中的每一*行*`rowmaxs`都有一个元素，但将其用作矩阵每一*列*的含义。*`printRow`*

 ****编辑：**这是一个稍微好一点的版本`showMat`：

```
showMat :: IntMat -> String
showMat rows = concat (map perRow rows)
  where rowmaxs = rowMaxs rows
        perRow cols = printRow rowmaxs elements cols ++ "\n"
          where elements = elementLengths cols 
```

它仍然有问题 --- `rowMaxs`（尝试）计算每行中数字的最大长度，但你真的想要每列中数字的最大长度。这样做的一个后果是您偶尔会将负数传递给`addSpaces`，这不能很好地应对，所以这里有一个`addSpaces`表现得更优雅的版本：

```
addSpaces :: Int -> String
addSpaces n = replicate n ' ' 
```

所以现在我们得到了这个：

```
*Main> putStr (showMat [[1,23,1],[23,56,789],[1234,0,1]])
 1  23    1 
23  56  789 
1234   0    1 
```

更好，但尚未正常工作。

我没有修复您代码中的所有错误，因为我感觉您仍在学习并且需要自己找到它们的经验。

我建议使用`map`//而不是显式编写递归`zipWith`，`zipWith3`因为它使代码更容易理解。**

# python - Python：如何创建以列表条目命名的字典？

> ID：13102260
> 
> 赞同：1
> 
> 时间：2012-10-27T17:06:06.493
> 
> 标签：python, dictionary

我是 python 新手，所以这可能是一个愚蠢的问题。我确定答案在文档或堆栈溢出的另一个线程中，但我找不到它。

我有一个清单：`dict_list = ['first_dict', 'second_dict', 'third_dict']`

我需要一种方法为此列表中的每个条目创建一个字典，然后稍后使用其列表索引引用它。所以，通过引用`dict_list[0]`，我希望能够创建一个新字典`first_dict = {}`。

然后，我希望以后能够使用 再次引用该字典`dict_list[0]`，然后将键和值分配给 first_dict。

这`dict_list`将包含 1 到 1000 个条目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T17:10:16.707

你需要这些名字做什么？答案是，你没有。当您开始考虑以编程方式分配一堆变量名称时，特别是如果这些名称中包含数字，您最好只制作一个列表或其他容器。

```
dict_list = [{} for x in xrange(3)] 
```

现在`dict_list[0]`是一本字典，`dict_list[1]`是另一本，等等。这使它们易于迭代和访问，而无需像`globals()`或`eval()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T17:11:10.190

你可以使用`globals()`：

```
In [54]: dict_list = ['first_dict', 'second_dict', 'third_dict']

In [55]: for x in dict_list:
    globals()[x]=dict()
   ....:     
   ....:     

In [57]: dict_list=[globals()[x] for x in dict_list]

In [58]: dict_list[0]['key']='value'  #add key to first_dict 

In [60]: first_dict       
Out[60]: {'key': 'value'}

In [63]: first_dict is dict_list[0]  #dict_list[0] and first_dict are same objects
Out[63]: True 
```

# tomcat - 部署 Web 服务时 Apache Tomcat 日志中的异常导致错误：404

> ID：13102269
> 
> 赞同：0
> 
> 时间：2012-10-27T17:06:43.263
> 
> 标签：tomcat, jax-ws, http-status-code-404

我在 apache tomcat 日志中收到此异常

```
SEVERE: Exception sending context initialized event to listener instance of class com.sun.xml.ws.transport.http.servlet.WSServletContextListener
com.sun.xml.ws.transport.http.servlet.WSServletException: WSSERVLET11: failed to parse runtime descriptor: 
```

结果我得到错误404

这是我的 web.xml 文件

```
<web-app version="2.4" mlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
<description>HelloWorld</description>
<display-name>HelloWorld</display-name>
<listener>
<listener-class>com.sun.xml.ws.transport.http.servlet.WSServletContextListener</listener-class>
</listener>
<servlet>
<description>JAX-WS endpoint - HelloWorld</description>
<display-name>HelloWorld</display-name>
<servlet-name>HelloWorldPort</servlet-name>
<servlet-class>com.sun.xml.ws.transport.http.servlet.WSServlet</servlet-class>
<load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
<servlet-name>HelloWorldPort</servlet-name>
<url-pattern>/helloWorld</url-pattern>
</servlet-mapping>

</web-app> 
```

请有人告诉我我做错了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T05:02:46.663

您的 xml 命名空间是不可解析的（如异常所示）。举个例子，你有

> mlns="http://java.sun.com/xml/ns/j2ee

你应该有的地方

> xmlns="http://java.sun.com/xml/ns/j2ee

因此，在该命名空间下定义的任何元素（`web-app`例如）都会在编译描述符时导致运行时阻塞。

# benchmarking - 为什么这个 JeroMQ（ZeroMQ 端口）基准测试这么慢？

> ID：13102270
> 
> 赞同：6
> 
> 时间：2012-10-27T17:06:46.967
> 
> 标签：benchmarking, messaging, zeromq, jeromq

我想使用我发现的这个库，它是 zeromq 的纯 Java 端口（不是包装器）。我正在尝试对其进行测试，虽然它[声称](https://github.com/zeromq/jeromq#features)有一些不错的数字，但我正在执行的测试结果相当糟糕，甚至在本地执行（客户端和在同一台机器上服务）。我确定这是我做错了什么。大约需要。**5 秒**来执行这 10.000 条消息循环。

我所做的只是采用 Hello world 示例并删除了暂停和系统输出。这是代码：

**服务器：**

```
package guide;

import org.jeromq.ZMQ;

public class hwserver{
    public static void main(String[] args) throws Exception{

        //  Prepare our context and socket
        ZMQ.Context context = ZMQ.context(1);
        ZMQ.Socket socket = context.socket(ZMQ.REP);

        System.out.println("Binding hello world server");
        socket.bind ("tcp://*:5555");        

        while (true) {                  
            byte[] reply = socket.recv(0);
            String requestString = "Hello" ;
            byte[] request = requestString.getBytes();              
            socket.send(request, 0);            
        }              
    }
} 
```

**客户端：**

```
package guide;

import org.jeromq.ZMQ;

public class hwclient{
    public static void main(String[] args){
        ZMQ.Context context = ZMQ.context(1);
        ZMQ.Socket socket = context.socket(ZMQ.REQ);
        socket.connect ("tcp://localhost:5555");

        System.out.println("Connecting to hello world server");

        long start = System.currentTimeMillis();
        for(int request_nbr = 0; request_nbr != 10_000; request_nbr++) {
            String requestString = "Hello" ;
            byte[] request = requestString.getBytes();           
            socket.send(request, 0);
            byte[] reply = socket.recv(0);           
        }
        long end = System.currentTimeMillis();
        System.out.println(end-start);
        socket.close();
        context.term();
    }
} 
```

是否可以修复此代码并获得一些不错的数字？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-04T11:03:16.017

您正在执行往返请求-回复，使用 C++ libzmq 会很慢。当您进行流式传输时，您只会在 JeroQM、ZeroMQ 或任何 I/O 上获得快速性能。

由于 I/O 和 TCP 的工作方式，往返很慢。在 libzmq 上，我们可以使用往返传输大约 20K 消息/秒，使用流传输可以处理 8M/秒。流式传输具有其他优化，例如批处理，这是往返请求-回复无法做到的。

对于吞吐量性能测试，从节点 1 向节点 2 发送 10M 消息，然后在收到消息时发回单个 ACK​​。在 ZeroMQ 和 JeroMQ 上，您应该会看到大约 3 倍的速度差异。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T17:12:21.890

请参考同步往返和异步往返的吞吐量测试

[https://github.com/zeromq/jeromq/blob/master/src/test/java/guide/tripping.java](https://github.com/zeromq/jeromq/blob/master/src/test/java/guide/tripping.java)

异步比同步往返快 40 倍。

如果您想对 jeromq 的全速进行基准测试，请在您的环境中运行 perf.LocalThr 和 perf.RemoteThr。

# c - 在C中按索引数组对数组进行排序

> ID：13102277
> 
> 赞同：3
> 
> 时间：2012-10-27T17:07:27.223
> 
> 标签：c, algorithm

> **可能重复：**
> [就地数组重新排序？](https://stackoverflow.com/questions/7365814/in-place-array-reordering)

我有**原始的未排序数组**，其结构如下：

```
{D, A, B, E, C} 
```

以及按排序顺序排列的原始数组**的索引数组：**

```
{2, 3, 5, 1, 4} // Edited. Then I get {A, B, C, D, E}. 
```

如何通过**索引数组****简单地重新排列原始**数组？

 **我无法创建新数组并按索引位置插入元素。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T17:37:38.303

我的 5 美分：

```
int new_i;
for (int i = 0; i < arr_size-1; ++i)
{
    while ((new_i = index_arr[i]-1) != i)
    {
        std::swap(struct_arr[i], struct_arr[new_i]);
        std::swap(index_arr[i], index_arr[new_i]);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T17:21:50.660

O(N^2) 解决方案：

```
struct S[] = {D, A, B, E, C};
int o[] = {2, 3, 5, 1, 4};
int len = 5;

for (int i=1;i<=len;++i) {
  for(int j=i-1; j<len;++j) {
    if(o[j]==i) {
      if (i!=j+1) {
        swapSArrayItems(S, j, i-1);
        swapIntArrayItems(o, j, i-1);
      }
      break;
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T17:28:06.883

这是一个有效的版本，但请注意它确实使`indices`变量无效：

```
void sortItemsBasedOnIndices(char *items[], int indices[], size_t num)
{
    // sort them
    for (int i = 0; i < num; i++)
    {
        int newIndex = indices[i];

        // take out the item at the specified index
        char *newItem = items[newIndex];

        // take out the item in that current position
        char *oldItem = items[i];

        // swap the two items
        items[i] = newItem;
        items[newIndex] = oldItem;

        // now, tell the sorted indices the location of the old item after swap
        for (int j = i; j < num; j++)
        {
            if (indices[j] == i)
            {
                indices[j] = newIndex;
                break; // we only need the first one, so then we're done
            }
        }
    }
}

int main()
{
    char *items[] = { "D", "B", "E", "A", "C" };
    int sortedIndices[] = { 3, 1, 4, 0, 2 }; // 0-based

    int size = 5;
    sortItemsBasedOnIndices(items, sortedIndices, size);

    for (int i = 0; i < size; i++)
    {
        puts(items[i]);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T17:49:45.370

```
#include <stdio.h>

void shuffle( char **arr, int *offs, size_t cnt);

void shuffle( char **arr, int *offs, size_t cnt)
{
unsigned idx,src,dst;

for (idx=0; idx < cnt; idx++) offs[idx] -= idx;

for (idx=0; idx < cnt; idx++) {
        if (offs[idx] == 0) continue;
        char *tmp;
        tmp = arr[idx];

        for(dst = idx; offs[dst] ; dst=src) {
                src = dst+offs[dst] ;

                arr[dst] = arr[src];
                offs[dst] = 0;
                if (offs[src] == 0 ) break;
                }

        arr[dst]=tmp;
        }
}

int main (void)
{
unsigned idx;
char *array[5] = {"D","A","B","E","C"};
int index[5] =  {1,2,4,0,3};

fprintf(stdout, "Original:\n");
for (idx=0; idx < 5; idx++) {
        fprintf(stdout, "[%u]:%s\n", idx, array[idx] );
        }

fprintf(stdout, "Shuffle:\n");
shuffle( array, index, 5);

fprintf(stdout, "After shuffle:\n");
for (idx=0; idx < 5; idx++) {
        fprintf(stdout, "[%u]:%s\n", idx, array[idx] );
        }

return 0;
} 
```

更新：固定链结束条件（丑陋！）**

# vb.net - Create a class as data structure?

> ID：13102280
> 
> 赞同：0
> 
> 时间：2012-10-27T17:07:53.487
> 
> 标签：vb.net, class, data-structures

I am trying to create a data structure `CityPosition`, in which to have 3 variables: `CityName`, `PositionX`, `PositionY`.

I tried creating a class:

```
Public Class CityPosition
   Public Shared CityName As String
   Public Shared LocX As Double
   Public Shared LocY As Double

   Public Sub New(ByVal name, ByVal x, ByVal y)
       CityName = name
       LocX = x
       LocY = y
   End Sub
End Class 
```

As I have to collect lots (unknown number) of instances of that class, I created an ArrayList element:

```
Dim CityPositions As New ArrayList 
```

Finally, I am trying to add an instance of the class to the ArrayList by this:

```
CityPositions.Add(New CityPosition(Positions(0), LocX, LocY)) 
```

1.  Please let me know if I am doing it right, because I am a VB.NET newbie.
2.  How to access the instance properties? I tried `CityPositions(0).CityName` but it seems not to work

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T17:11:31.113

Remove "Shared" from your public fields as shown below.

```
Public Class CityPosition
   Public CityName As String
   Public LocX As Double
   Public LocY As Double

   Public Sub New(ByVal name As String, ByVal x As Double, ByVal y As Double)
       CityName = name
       LocX = x
       LocY = y
   End Sub
End Class 
```

Also, it is preferable to use Properties instead of Public fields within a class.

[http://msdn.microsoft.com/en-us/library/dd293589.aspx](http://msdn.microsoft.com/en-us/library/dd293589.aspx)

# ios - 在 UITextView 中滚动电传文本显示不滚动

> ID：13102286
> 
> 赞同：0
> 
> 时间：2012-10-27T17:08:55.013
> 
> 标签：ios, scroll, uitextview, performselector

尝试在 UITextView 中像旧电传打字机一样缓慢显示文本。效果很好，直到滚动出视图，此时它应该是逐行向上滚动的平滑线。但只是颤抖并在一个班次中上升。下面的片段，不确定 UI 刷新和计时器是否有问题？

```
- (void) refreshLocationDescriptionWith: (NSArray *) inMessageList
{
    //
    // Refresh the location textview by appending new array of string messages
    //

    // Trim old description by half to prevent it growing too long
    //
    int const kMaxTextSize = 2000;
    NSString *oldDescription;
    if ([dispLocationDetails.text length] > kMaxTextSize)
    {
        NSString *trimDescription   = [dispLocationDetails.text substringFromIndex: kMaxTextSize / 2];
        oldDescription              = [NSString stringWithFormat: @"....... %@", trimDescription];
    }
    else
        oldDescription = dispLocationDetails.text;

    // Disable keyboard entry whilst displaying
    [self disableKeyBoardEntry];    

    // Go through all messages and display 'slowly'
    //

    NSTimeInterval nextDelay = 0;
    NSTimeInterval stepDelay = 0.03;

    for (NSString *nextMessage in inMessageList)
    {
        // Add to existing text display with one character at a time, with delay to 'scroll' text
        for (NSRange stringRange = NSMakeRange(0, 1); stringRange.location < [nextMessage length]; stringRange.location += 1)
        {
            NSString *nextChar = [nextMessage substringWithRange: stringRange];            
            [self performSelector: @selector(addCharToLocationDisplay:) withObject: nextChar afterDelay: nextDelay];            
            nextDelay += stepDelay;
        }

        [self performSelector: @selector(addCharToLocationDisplay:) withObject: @"\n" afterDelay: nextDelay];
    }

    [self performSelector: @selector(addCharToLocationDisplay:) withObject: @"\n" afterDelay: nextDelay];

    // Re-enable keyboard entry
    [self performSelector: @selector(enableKeyBoardEntry) withObject: nil afterDelay: nextDelay];

}

- (void) addCharToLocationDisplay: (NSString *) nextChar
{
    //
    // Add one char at a time to the text view display
    //

    NSString *newText                = [NSString stringWithFormat: @"%@%@", dispLocationDetails.text, nextChar];
    self.dispLocationDetails.text    = newText;

    NSRange range = NSMakeRange(dispLocationDetails.text.length - 1, 1);
    [dispLocationDetails scrollRangeToVisible:range];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T12:06:52.087

使用块动画解决了它

```
// Scroll through text, one char at a time with delay to simulate teletype type display
//
NSTimeInterval nextDelay = 0;
NSTimeInterval stepDelay = 0.03;

if (dispLocationDetails.text.length > 0)
    [self performSelector: @selector(addCharToLocationDisplay:) withObject: @"\n" afterDelay: nextDelay];

for (NSString *nextMessage in inMessageList)
{
    for (NSRange stringRange = NSMakeRange(0, 1); stringRange.location < [nextMessage length]; stringRange.location += 1)
    {
        NSString *nextChar = [nextMessage substringWithRange: stringRange];            
        [self performSelector: @selector(addCharToLocationDisplay:) withObject: nextChar afterDelay: nextDelay];            
        nextDelay += stepDelay;
    }

    [self performSelector: @selector(addCharToLocationDisplay:) withObject: @"\n" afterDelay: nextDelay];
} 
```

和

```
- (void) addCharToLocationDisplay: (NSString *) nextChar
{
    //
    // Add one char at a time to the text view display
    // Scroll up line by line as text displayed
    //

    NSString *newText                = [NSString stringWithFormat: @"%@%@", dispLocationDetails.text, nextChar];
    self.dispLocationDetails.text    = newText;

    [UIView animateWithDuration:.25 animations:^
     {
         CGPoint bottomOffset = CGPointMake(0, dispLocationDetails.contentSize.height - dispLocationDetails.bounds.size.height);
         DLog(@"Bottom: %f", bottomOffset.y);
         if (bottomOffset.y > 0)
             [self.dispLocationDetails setContentOffset: bottomOffset animated: NO];
     }];
} 
```

# android - 服务调用Activity并播放MediaPlayer，Android时唤醒手机

> ID：13102288
> 
> 赞同：2
> 
> 时间：2012-10-27T17:09:05.913
> 
> 标签：android, media-player, alarm, lockscreen

我有一个在后台运行的服务，在某些时候这个服务正在调用一个新的活动 RingAlarm。

顾名思义，这个活动是一个警报播放器。所以它会播放声音，直到用户按下按钮。

一切都很好，除了我在屏幕锁定时尝试它。然后我发现声音没有播放。

要获取屏幕并解锁它，我正在使用这个：

```
 PowerManager pm = (PowerManager) getApplicationContext().getSystemService(Context.POWER_SERVICE);
    wakeLock = pm.newWakeLock((PowerManager.SCREEN_BRIGHT_WAKE_LOCK | PowerManager.FULL_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP), "TAG");
    wakeLock.acquire();
    KeyguardManager keyguardManager = (KeyguardManager) getApplicationContext().getSystemService(Context.KEYGUARD_SERVICE); 
    KeyguardLock keyguardLock =  keyguardManager.newKeyguardLock("TAG");
    keyguardLock.disableKeyguard(); 
```

为了播放铃声，我使用这个：

```
Uri alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM);
     if(alert == null){
         // alert is null, using backup
         alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
         if(alert == null){  // I can't see this ever being null (as always have a default notification) but just incase
             // alert backup is null, using 2nd backup
             alert = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);               
         }
     }
     mPlayer = new MediaPlayer();
     try {
         mPlayer.setDataSource(this, alert);
         mPlayer.setAudioStreamType(AudioManager.STREAM_ALARM);
         mPlayer.setLooping(true);
         mPlayer.prepare();
         mPlayer.start();
     }
     catch(Exception e) {
     //TODO : Implement Error Checking
         e.printStackTrace();
         Log.e("MediaPlayer", "Error while playing!");
     } 
```

也许我做错了什么......知道吗？

**更新（错误）**

```
10-28 17:49:59.562: I/MediaPlayer(3193): it is a Ringtone type is : 4
10-28 17:49:59.820: E/RingtoneManager(3193): getActualDefaultRingtoneUri : content://media/internal/audio/media/60
10-28 17:49:59.820: E/RingtoneManager(3193): Uri.parse(uriString) : content://media/internal/audio/media/60
10-28 17:49:59.828: I/MediaPlayer(3193): It is a Not a DRM RingTone: return NULl
10-28 17:49:59.828: I/MediaPlayer(3193): path is null 
```

我仍然有问题。我真的坚持这一点。我发现问题不是媒体播放器，问题是当设备处于锁定模式时，当应用程序再次启动时它没有正确执行，导致振动也不起作用。

我在 logcat 中收到此警告：

```
10-29 18:10:07.851: W/IInputConnectionWrapper(19683): getExtractedText on inactive InputConnection
10-29 18:10:07.851: W/IInputConnectionWrapper(19683): getTextBeforeCursor on inactive InputConnection
10-29 18:10:07.867: W/IInputConnectionWrapper(19683): getExtractedText on inactive InputConnection
10-29 18:10:07.867: W/IInputConnectionWrapper(19683): getTextBeforeCursor on inactive InputConnection
10-29 18:10:07.867: W/IInputConnectionWrapper(19683): getSelectedText on inactive InputConnection
10-29 18:10:07.875: W/IInputConnectionWrapper(19683): getTextAfterCursor on inactive InputConnection
10-29 18:10:07.875: W/IInputConnectionWrapper(19683): getExtractedText on inactive InputConnection
10-29 18:10:07.875: W/IInputConnectionWrapper(19683): getTextBeforeCursor on inactive InputConnection
10-29 18:10:07.875: W/IInputConnectionWrapper(19683): getSelectedText on inactive InputConnection
10-29 18:10:07.875: W/IInputConnectionWrapper(19683): getTextAfterCursor on inactive InputConnection
10-29 18:10:07.882: W/IInputConnectionWrapper(19683): beginBatchEdit on inactive InputConnection
10-29 18:10:07.882: W/IInputConnectionWrapper(19683): endBatchEdit on inactive InputConnection
10-29 18:10:07.882: W/IInputConnectionWrapper(19683): getExtractedText on inactive InputConnection
10-29 18:10:07.882: W/IInputConnectionWrapper(19683): getTextBeforeCursor on inactive InputConnection
10-29 18:10:07.882: W/IInputConnectionWrapper(19683): getSelectedText on inactive InputConnection
10-29 18:10:07.882: W/IInputConnectionWrapper(19683): getTextAfterCursor on inactive InputConnection
10-29 18:10:07.898: W/IInputConnectionWrapper(19683): beginBatchEdit on inactive InputConnection
10-29 18:10:07.898: W/IInputConnectionWrapper(19683): endBatchEdit on inactive InputConnection
10-29 18:10:07.898: W/IInputConnectionWrapper(19683): getExtractedText on inactive InputConnection
10-29 18:10:07.898: W/IInputConnectionWrapper(19683): getTextBeforeCursor on inactive InputConnection
10-29 18:10:07.898: W/IInputConnectionWrapper(19683): getSelectedText on inactive InputConnection
10-29 18:10:07.898: W/IInputConnectionWrapper(19683): getTextAfterCursor on inactive InputConnection 
```

任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:50:29.407

解决了！

如果调用媒体播放器或振动时屏幕未打开，则接缝会发生一些错误，并且不会发出声音或振动。

所以我所做的是制作一个异步任务，等待屏幕打开。当这种情况发生时，就会调用振铃和振动。

它有效！

```
private class AlarmTask extends AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... arg0) {
        // TODO Auto-generated method stub
        while (!window.isActive()) {}
        if (Preference.readBoolean(getApplicationContext(), Preference.VIBRATION, true))
            vibrate();
        if (Preference.readBoolean(getApplicationContext(), Preference.SOUND, true))
            ring();

        return null;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T17:14:57.623

在你的`Activity`

试试这个

```
 Window window = this.getWindow();
    window.addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD);
    window.addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED);
    window.addFlags(WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-02T16:37:25.757

接受的答案并没有为我解决。不过，设置延迟确实如此。

```
public static void setRinging(final Ringtone ringtone, final Vibrator vibrator, boolean toRinging) {
    if (toRinging) {
        new Handler().postDelayed(new Runnable() {
            @Override
            public void run() {
                ringtone.play();
                vibrator.vibrate(new long[]{1000, 1000}, 0);
            }
        }, 1000);
    } else {
        ringtone.stop();
        vibrator.cancel();
    }
} 
```

# delphi - 将多个对象作为一个参数传递

> ID：13102290
> 
> 赞同：2
> 
> 时间：2012-10-27T17:09:20.670
> 
> 标签：delphi, oop, delphi-xe2

我想以最小的努力将多个对象作为一个参数传递。

我有一些类型

```
TOpenMode = [omNew, omEdit, omBrowse] 
```

和一个程序

```
procedure OpenForm(Form: TForm; ANewWindow: boolean = false; 
                   Datasets: TUniDataSet; TableOpenMode: TOpenMode); 
```

我想传递多个数据集。我可以在没有数组或创建新对象的情况下做到这一点吗？我怎样才能让它们成对通过`[UniTable1, TOpenMode], [UniTable2, TOpenMode]`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T18:29:04.773

将多个对象组合成单个复合类型的最简单方法是记录：

```
type
  TDataSetAndOpenMode = record
    DataSet: TUniDataSet;
    OpenMode: TOpenMode;
  end; 
```

为方便起见，提供一个函数来初始化这些记录之一：

```
function DataSetAndOpenMode(DataSet: TUniDataSet; 
    OpenMode: TOpenMode): TDataSetAndOpenMode;
begin
  Result.DataSet := DataSet;
  Result.OpenMode := OpenMode;
end; 
```

然后您的`OpenForm`函数可以接收此类记录的开放数组：

```
procedure OpenForm(Form: TForm; const Datasets: array of TDataSetAndOpenMode;
    NewWindow: Boolean=False); 
```

请注意，我已将`NewWindow`参数放在最后。由于它有一个默认值，因此该默认值仅在出现在列表末尾时才有用。

现在，要调用该函数，您可以编写如下代码：

```
OpenForm(Form, [DataSetAndOpenMode(DataSet1, OpenMode1), 
    DataSetAndOpenMode(DataSet2, OpenMode2)]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T17:38:38.580

如果您想将多对作为一个参数传递，我看不出如何避免声明至少一条记录来定义该对，并且至少声明一个开放数组参数以将这些记录的多个实例作为一个参数传递。

```
type
 TDatasetModePair = record
   DS: TUniDataSet;
   Mode: TOpenMode;
 end;

procedure OpenForm(Form: TForm; ANewWindow: boolean = false; 
               Datasets: array of TDatasetModePair); 
```

但是您可能会发现声明自己的数组类型会容易得多：

```
type
  TDatasetModePairArray: array of TDatasetModePair; 
```

然后程序声明变为：

```
procedure OpenForm(Form: TForm; ANewWindow: boolean = false; 
               Datasets: TDatasetModePairArray); 
```

尽管如此，在您将其传递给您的函数之前，必须创建数组：

```
var
  MyArray: TDatasetModePairArray;
begin
  SetLength(MyArray, 2);
  MyArray[0].DS := SomeDataSet;
  MyArray[0].Mode := omEdit;
  MyArray[1].DS := SomeOtherDataSet;
  MyArray[1].Mode := omBrowse; 
```

# linux - 无法 scp 到 AWS

> ID：13102299
> 
> 赞同：2
> 
> 时间：2012-10-27T17:10:10.723
> 
> 标签：linux, amazon-ec2

我可以使用以下命令 SSH 到我的 linux 实例：

```
ssh -i dj_mongo.pem -v ec2-user@xxx.compute-1.amazonaws.com 
```

但是每当我尝试将文件从本地计算机复制到服务器时，我都会收到以下错误：

```
 scp -i dj_mongo.pem ck.pem  root@xxx.compute-1.amazonaws.com:/
Please login as the ec2-user user rather than root user.

 scp -i dj_mongo.pem ck.pem  ec2-user@xxx.compute-1.amazonaws.com:/
Permission denied (publickey).
lost connection 
```

dj_mongo-pem 和 ck.pem 的权限都是 600。

终端的输出复制如下：

```
 Applying options for *
debug1: Connecting to xxx.compute-1.amazonaws.com [xxx] port 22.
debug1: Connection established.
debug1: identity file dj_mongo.pem type -1
debug1: identity file dj_mongo.pem-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.3
debug1: match: OpenSSH_5.3 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.6
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-ctr hmac-md5 none
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Host 'xxx.compute-1.amazonaws.com' is known and matches the RSA host key.
debug1: Found key in /Users/sadmin/.ssh/known_hosts:6
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /Users/sadmin/.ssh/github_rsa
debug1: Authentications that can continue: publickey
debug1: Trying private key: dj_mongo.pem
debug1: read PEM private key done: type RSA
debug1: Authentications that can continue: publickey
debug1: No more authentication methods to try.
Permission denied (publickey).
lost connection 
```

我该如何继续呢？请帮忙。

已编辑现在我不能 ssh 了。我正在使用与昨天相同的密钥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T01:07:00.183

在典型的详细 scp 输出中

```
debug1: Trying private key: dj_mongo.pem
debug1: read PEM private key done: type RSA
debug1: Authentication succeeded (publickey).
Authenticated to your.server.com ([i.p.v.4]:22). 
```

在您的输出中，在读取 PEM 私钥后，它正在跳过它。

一些明显的事情 -

1.  服务器是否使用与 dj_mongo.pem 对应的相同密钥启动？
2.  你连接到同一台服务器吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:55:51.523

我无法找出问题的原因。最后我创建了新的 Linux 实例，并附加了停止响应它的旧实例的 EBS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T06:42:35.253

我可能是错的，但是许多版本的 linux 通过 root 用户阻止了 SSH/SCP 访问。特别是如果您使用的是 Amazon AMI，他们会设置一个称为 ec2-user 的根用户，您应该已经将您的 pem 密钥上传到该用户，因此您应该以该用户身份登录。

# javascript - 平滑 Div 滚动未正确显示

> ID：13102300
> 
> 赞同：0
> 
> 时间：2012-10-27T17:10:15.683
> 
> 标签：javascript, jquery, ajax

我正在尝试实现平滑的 div 滚动，特别是“可点击徽标游行”：[http ://www.smoothdivscroll.com/clickableLogoParade.html](http://www.smoothdivscroll.com/clickableLogoParade.html)

而且我让它完全按照我想要的方式在空白页面中工作，但是当我将它插入到当前布局中时，它不能正常工作..我假设有什么东西干扰了它？

有什么帮助吗？

这是我添加到我的CSS：

```
#logoParade
{
width: 628px;
height: 75px;
position: relative;
}

#logoParade div.scrollableArea a
{
display: block;
float: left;
padding-left: 10px;
} 
```

这是我添加的 jQuery：

```
<script type="text/javascript">
$(document).ready(function() {
$("#logoParade").smoothDivScroll({ 
    autoScrollingMode: "always", 
    autoScrollingDirection: "endlessLoopRight", 
    autoScrollingStep: 1, 
    autoScrollingInterval: 25 
});

// Logo parade event handlers
$("#logoParade").bind("mouseover", function() {
    $(this).smoothDivScroll("stopAutoScrolling");
}).bind("mouseout", function() {
    $(this).smoothDivScroll("startAutoScrolling");
});

});
</script> 
```

这些文件包括：

```
<script src="js/jquery-ui-1.8.23.custom.min.js" type="text/javascript"></script>

<!-- Latest version (3.0.6) of jQuery Mouse Wheel by Brandon Aaron
     You will find it here: http://brandonaaron.net/code/mousewheel/demos -->
<script src="js/jquery.mousewheel.min.js" type="text/javascript"></script>

<!-- jQuery Kinectic (1.5) used for touch scrolling -->
<script src="js/jquery.kinetic.js" type="text/javascript"></script>

<!-- Smooth Div Scroll 1.3 minified-->
<script src="js/jquery.smoothdivscroll-1.3-min.js" type="text/javascript"></script> 
```

当然还有实际的jquery ..

我上传了我试图在这里实现它，你可以看看： http: [//www.mintystudios.co.uk/clients/naghmeh/](http://www.mintystudios.co.uk/clients/naghmeh/)

这是空白页面中的工作版本..： http: [//www.mintystudios.co.uk/clients/naghmeh/1/](http://www.mintystudios.co.uk/clients/naghmeh/1/)

任何人都知道为什么它在实施的版本中不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T17:53:57.740

这应该可以解决您的问题；用你的脚本替换它。

```
<SCRIPT type="text/javascript">

jQuery(function ($) {
    $("#logoParade").smoothDivScroll({ 
        autoScrollingMode: "always", 
        autoScrollingDirection: "endlessLoopRight", 
        autoScrollingStep: 1, 
        autoScrollingInterval: 25 
    });

    // Logo parade event handlers
    $("#logoParade").bind("mouseover", function() {
        $(this).smoothDivScroll("stopAutoScrolling");
    }).bind("mouseout", function() {
        $(this).smoothDivScroll("startAutoScrolling");
    });

});
    </SCRIPT> 
```

# iphone - iPhone中UIViewController中的TabbarController？

> ID：13102302
> 
> 赞同：1
> 
> 时间：2012-10-27T17:10:24.593
> 
> 标签：iphone, xcode4, tabbarcontroller

我对 iphone 开发非常陌生，我从 ViewBasedApplication 开始，我有一个 UIViewController(GetDetails)，我正在向它添加一个 tabBarController。有两个标签栏项目 GetDetails 和 Login.On 启动应用程序 GetDetails 视图将加载.现在当我点击另一个tabbaritem（Login）时，它必须重定向到LoginViewController。但是在我的应用程序中，当我点击Login时，LoginViewController带有两个文本框并加载了一个按钮。但问题是另外我也得到了文本框和 GetDetailsViewController 的按钮。对于登录 tabbaritem，我已将 nib 名称设置为 LoginViewController..

如何仅在单击选项卡栏项目时获得相应的视图？

![获取DetailsViewController](../Images/e9d4c5c190f040e551f6721de684ed24.png) ![当我单击 secondtabbaritem 时，我可以看到这样..GetDetails 也显示在后台](../Images/5684f5b7875403afa49f6d74ad8f17d1.png) ![标签栏控制器](../Images/b52286c13439c4176c9fb9837e25f021.png) ![](../Images/1128057a842bc209d6707073b39cdedd.png)

# c++ - 如何在 C++ 中使用 jsoncpp 解析器解析嵌套对象/数组？

> ID：13102308
> 
> 赞同：6
> 
> 时间：2012-10-27T17:11:27.163
> 
> 标签：c++, json, parsing

例如：

```
 Json::Reader reader;
    Json::Value val;
    ifstream file("JSON/test.json");
    bool success = reader.parse(file, val, false);
    vector<string> obj = val.getMemberNames();

    for (int i = 0; i < val.size(); i++)
    {
        // switch type of value
        switch (val.get(obj.at(i), "default").type())
        {
            case stringValue:
                cout << "I'm string" << endl;
                ... need to save **membername** and **value**
                break;
            case intValue:
                cout << "I'm int"  << endl;
                ... need to save **membername** and **value**
                break;
            case nullValue:
                cout << "I'm null"  << endl;
                break;
            case arrayValue:
                 ... code to parse an array (with nested sure) ...
                 ... need to save
                break;
            case objectValue:
                ... code to parse an object (with nested sure) ...
                ... need to save 
                break;
        }
    } 
```

示例**JSON 文件**(JSON/test.json)：

```
{
    "layout": "fit",
    "xtype": "viewport",
    "height": 200,
    "style": {
                "backgroundColor": "46f0a8"
             },

           "items": 
           [
             {
                "title": "Management Console",
                "padding": "10 10 10 10",
                "bodyPadding": 10,
                "autoScroll": true,
                "items2": [1, 2, 3]
             }
           ]
 } 
```

在数组**items**中，我们可以看到另一个名为**items2**的数组（嵌套） 。

数组可能会遇到以下情况：

```
array[Jacob, Joseph] or
array[{name: Jacob, name: Joseph}] or
array[{name: Jacob}, {name: Joseph}] 
```

对于对象，它是相似的。在每个字段中，当然可以是**许多嵌套对象/数组**。如何将数据保存在 C++ 变量中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-12T02:17:36.623

你会想让你的主要解析函数递归。然后使用像向量这样的 STL 类，它允许您为数据动态分配更多存储空间。

# ios - 我应该使用什么视图控制器进行来回通信？

> ID：13102312
> 
> 赞同：0
> 
> 时间：2012-10-27T17:11:38.323
> 
> 标签：ios, uitableview

我有一个正在进行的应用程序，需要两个已识别的用户之间的通信（不是消息传递或 SMS）。数据是远程保存的，但是 UI 必须非常简单。是否有可用的 iMessage 类型视图控制器可供我使用？我真的很喜欢我在下面附上的那个，只是不知道如何得到它，或者即使有人有更好的想法？

![在此处输入图像描述](../Images/853b250efabca0d7f1fea75535f6ba49.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:02:13.357

有很多预制的气泡控件：

*   [AcaniChat](https://github.com/acani/AcaniChat)
*   [PTSM消息单元](https://github.com/ppanopticon/PTSMessagingCell/)
*   [SSMessagesViewController](https://github.com/samsoffes/ssmessagesviewcontroller)
*   [UIBubbleTableView](https://github.com/AlexBarinov/UIBubbleTableView)

还有一些您可以在[CocoaControls](http://www.cocoacontrols.com)购买。

# jquery - jQuery：将函数绑定到数组中的对象，避免闭包错误

> ID：13102318
> 
> 赞同：4
> 
> 时间：2012-10-27T17:12:10.443
> 
> 标签：jquery, arrays, object, closures

我有点卡在这里。一些提示会非常好。
假设我必须有一个多维对象数组，这些对象包含我想在鼠标悬停时使用的功能（播放、停止、showFrame 等）。但是它们还没有全部加载，所以我的第一种方法是使用

```
.on("mouseover", function () { ... } 
```

直到我遇到一个关闭问题，这已经在 StackOverflow 和其他地方讨论过几次了。首先，我尝试使用另一个 SO 线程上给出的解决方案来解决问题，直到遇到可以在 .bind() 中传递的 eventData。我首先使用的 SO-closure 解决方案在下面进行了注释，活动代码包含我使用 .bind eventData 的方法：

```
$(function(){
    for (var r=0, firDep=menu[0][0].length; r<firDep; r+=1){
        objects[0][0][r].init();
}
for(var f=0, livLen=menu.length; f<livLen; f++){
    for(var g=0, livWid=menu[f].length; g<livWid; g++){
        for(var h=0, livDep=menu[f][g].length; h<livDep; h++){
            if(menu[f][g][h]){
//                  (function( ) {
//                        var fr = f;
//                        var gr = g;
//                        var hr = h;
// to apply this prior solution, i would simply replace all occurences of e.data.** with ** again and all .bind's with .on's
                    $('#'+menu[f][g][h]).bind("mouseover", { fr: f, gr: g, hr: h}, function(e) {
                        if(objects[e.data.fr][e.data.gr][e.data.hr].status==0){
                            objects[e.data.fr][e.data.gr][e.data.hr].showFrame(1);
                        }
                    });
                    $('#'+menu[f][g][h]).bind("mouseout", { fr: f, gr: g, hr: h}, function(e) {
                        if(objects[e.data.fr][e.data.gr][e.data.hr].status==0){
                            objects[e.data.fr][e.data.gr][e.data.hr].showFrame(0);
                        }
                    });
                    $('#'+menu[f][g][h]).bind("click", {fr: f, gr: g, hr: h}, function(e) {
                        e.preventDefault();
                        if(objects[e.data.fr][e.data.gr][e.data.hr].status!=1 || objects[e.data.fr][e.data.gr][e.data.hr].status!=2){
                            for(var t=0, tstLen=menu[e.data.fr][e.data.gr].length; t<tstLen; t++){
                                if(objects[e.data.fr][e.data.gr][t].status==1 || objects[e.data.fr][e.data.gr][t].status==2){
                                    objects[e.data.fr][e.data.gr][t].stop();
                                    objects[e.data.fr][e.data.gr][t].playReverse();
                                }
                            }
                            objects[e.data.fr][e.data.gr][e.data.hr].stop();
                            objects[e.data.fr][e.data.gr][e.data.hr].play();
                            finc = e.data.fr+1;
                            if(menu[finc][e.data.hr] && menu[finc][e.data.hr].length > 0){
                                $('#menu'+finc).load('menu'+finc+e.data.hr+'.php', function () {
                                    for(var b=0, ldLen=menu[finc][e.data.hr].length; b<ldLen; b++){
                                        objects[finc][e.data.hr][b].init();
                                    }
                                    $('#menu'+finc).slideDown('slow');
                                });
                            } else {
                                if ($('#menu2').is(':visible')) {
                                    $('#menu2').slideUp('slow', function () {
                                        $('#menu1').slideUp('slow', function () {
                                            $('#menu1').empty();
                                            $('#menu2').empty();
                                        });
                                    }); 
                                } else if ($('#menu1').is(':visible')){
                                    $('#menu1').slideUp('slow', function () {
                                        $('#menu1').empty();
                                    });
                                }
                            }
                            loadContent(menu[e.data.fr][e.data.gr][e.data.hr]+".php");
                        }
                    });
                //})(); //function execution for prior closure-defeating attempt
            }
        }
    }
  }
}); 
```

所以我有一个 3d 数组菜单 [][][]，在我的 html 页面上定义结构，对象 [][][] 的 3d 数组及其 play()、stop() 等函数3 个菜单 div，#menu0、#menu1、#menu2，它们将包含适当的深度菜单。
基本上，这两种解决方案都适用于从一开始就已经加载到页面上的元素。例如，鼠标悬停部分不会在稍后加载（）的 div 上触发，但与选择器非常匹配

```
$('#'+menu[f][g][h]). 
```

对于我在 SO 上找到的替代解决方案，您将删除开头的注释以获取该匿名函数，仅将所有出现的 e.data.** 替换为适当的 **，将所有 .binds 替换为 .on当然删除 { fr:f, gr:g, hr: h} eventData 部分。哦，删除最后直接执行函数的注释 })();

任何提示都会很棒，提前感谢您的时间。

- - 编辑 - -

接受，这完全是一团糟。我要走不同的路，谢谢你的帮助。然而逻辑问题仍然存在，即使是更简单的形式，我真的对答案很感兴趣，只是想了解它背后的基本逻辑问题是什么。必须有一些关于关闭修复或 on() 的东西我不明白。所以我在 jQuery 上用一个更简单的例子重新问了这个问题 [：在 for-loop 中单击 function bind withclosure fix](https://stackoverflow.com/questions/13106024/jquery-click-function-bind-in-for-loop-with-closure-fix)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T17:54:26.937

你的代码看起来太复杂了——那是个问题。我认为您应该查看[backbone.js](http://backbonejs.org)或类似的框架来构建您的数据并将逻辑与视图分开。Backbone（和下划线）有一个非常有用的方法来处理集合和模型。

# c# - 我需要帮助为 SpeechSynthesizer 创建词典。某种模板，所以我可以知道如何创建一个

> ID：13102319
> 
> 赞同：0
> 
> 时间：2012-10-27T17:12:16.880
> 
> 标签：c#, .net, vb.net, visual-c++, text-to-speech

或多或少像标题所说的那样。我希望创建一个希腊文本到语音的词典，这样我就可以为 SpeechSynthesizer 制作我的语言。我在哪里可以找到某种模板？或者一些指导方针？？？？或者您可以提供的任何东西都是可以接受的，因为 SpeechSynthesizer 中没有希腊语支持。但我需要它成为我自己的创作。不是一些第三方应用程序。SDK、头文件、库、API 都被接受。只是没有具有希腊文本到语音的现成应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T15:55:48.503

这是一个只有 1 个单词（蓝色）的示例。

```
<?xml version="1.0" encoding="UTF-8"?>

<lexicon version="1.0" 
      xmlns="http://www.w3.org/2005/01/pronunciation-lexicon"
      alphabet="x-microsoft-ups" xml:lang="en-US">

  <lexeme>
    <grapheme> blue </grapheme>
    <phoneme> B L I P </phoneme>
  </lexeme>

</lexicon> 
```

这取自： [MSDN - 单击此处查看全文。](http://msdn.microsoft.com/en-us/library/system.speech.synthesis.speechsynthesizer.addlexicon.aspx) 我还建议阅读[发音词典参考 (Microsoft.Speech)](http://msdn.microsoft.com/en-us/library/hh378339%28v=office.14%29.aspx)

# python - Python字典转换为小写？

> ID：13102320
> 
> 赞同：3
> 
> 时间：2012-10-27T17:12:34.007
> 
> 标签：python, dictionary, uppercase, lowercase

我有这个需要转换为小写的 Python 字典。字典包含需要与不区分大小写的输入相对应的数据，例如，它适用于 resp = 'GBR' 或 'gbr'。希望我在这里有意义。任何帮助将不胜感激！

```
resp = raw_input('Which country is ' + record['name'] + ' in? ')
        print " "
        valid = {'GBR': ['GBR',
                        'United Kingdom',
                        'UK',
                        'Great Britain and Northern Island',
                        'GB'
                        ],
                'IRL': ['IRL',
                        'Eire',
                        'Republic of Ireland'
                        ]
            }
        if resp in valid[record['sov']]:
            answ = 'Yes, ' + record['name'] + ' is in the ' + resp 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T17:25:02.487

如果它需要对应不区分大小写的输入，我建议`.lower()`在比较输入和字典值时简单地添加一个调用，而不是为此创建/转换第二个字典。

但是，鉴于您的字典已经是大写的，我会使用`.upper()`将您的输入转换为大写以匹配您的字典，而不是反过来

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T18:10:14.057

基本上将小写版本的响应与正确答案的小写版本进行比较。

但是你的问题有几件事并不完全清楚：

你到底在存储`records`什么？*在确认“是的，...在...中”*时应使用哪个国家/地区名称？您想将用户响应与有效同义词列表进行匹配，对吗？

如果我要写一个城市流行问答游戏，我可能会做这样的事情：

```
import random

cities = {'Dublin': 'IRL',
          'London': 'GBR',
          }

country_synonyms = {'GBR': ['United Kingdom',
                            'GBR',
                            'UK',
                            'Great Britain and Northern Island',
                            'GB',
                            ],
                    'IRL': ['Republic of Ireland',
                            'IRL',
                            'Eire',
                            ]
                    }

# Pick a random city from our dicts' keys
challenge = random.choice(cities.keys())

# Country code of the correct response, e.g. 'GBR'
correct_cc = cities[challenge]

# Assume the canonical name for a country is first in the list of synonyms
correct_name = country_synonyms[correct_cc][0]

response = raw_input('Which country is %s in? ' % challenge)

# Clean any whitespace
response = response.strip()

lowercase_synonyms = [s.lower() for s in country_synonyms[correct_cc]]

if response.lower() in lowercase_synonyms:
    answer = "Yes, %s is in the %s." % (challenge, correct_name)
else:
    answer = "Sorry, that's wrong. %s is in the %s." % (challenge, correct_name)

print answer 
```

这条线

```
lowercase_synonyms = [s.lower() for s in country_synonyms[correct_cc]] 
```

使用列表推导将列表中的每个字符串转换`country_synonyms[correct_cc]`为小写。另一种选择是使用`map`：

```
import string
# ...
lowercase_synonyms = map(string.lower, country_synonyms[correct_cc]) 
```

这会将函数映射`string.lower`到列表中的每个项目`country_synonyms[correct_cc]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T18:16:06.240

其他答案显示了一种正确的方法，但是如果要将 dict 转换为小写，这是最简单但不是最有效的方法：

```
>>> import ast
>>> d
{'GBR': ['GBR', 'United Kingdom', 'UK', 'Great Britain and Northern Island', 'GB'], 'IRL': ['IRL', 'Eire', 'Republic of Ireland']}
>>> ast.literal_eval(str(d).lower())
{'gbr': ['gbr', 'united kingdom', 'uk', 'great britain and northern island', 'gb'], 'irl': ['irl', 'eire', 'republic of ireland']} 
```

编辑：eval 中的全局参数。

编辑 2：使用安全的“literal_eval”：

> 这可用于安全地评估来自不受信任来源的包含 Python 表达式的字符串，而无需自己解析值。

# ruby - 如何使用activerecord在一定限制后获取其余记录

> ID：13102322
> 
> 赞同：1
> 
> 时间：2012-10-27T17:12:44.880
> 
> 标签：ruby, ruby-on-rails-3, activerecord

我使用以下方法获得了 10 条记录中的前 2 条记录

```
News.all.order("published_at desc").limit(2) 
```

我如何获得剩下的 8 条记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T17:18:18.560

当然，您跳过这两个并获得剩余的 8 个

```
News.order("published_at desc").offset(2).limit(8) 
```

（使用 ActiveRecord 3.2.11 测试）

# jsp - 使用 JSP 的 HTML 或 XML 解析器

> ID：13102323
> 
> 赞同：0
> 
> 时间：2012-10-27T17:12:46.543
> 
> 标签：jsp, xml-parsing, html-parsing

我正在开发 JSP 搜索引擎我想使用**它的链接**解析 html 页面并在其中搜索一些单词谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T17:25:10.793

对于解析 html（仅 xhtml）或 xml，您可以使用 xslt 处理器（Saxon，MSxsl）。您可以使用 xsl 样式表生成另一个 xml、html 或文本文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T18:36:48.547

您应该考虑使用[TagSoup](http://ccil.org/~cowan/XML/tagsoup/)或类似的东西。不要使用 XML 解析器。不能保证每个网页都符合 XML。

# .net - 用 MONO 编写的程序是否与 .net 框架上的程序一样高效

> ID：13102327
> 
> 赞同：1
> 
> 时间：2012-10-27T17:13:05.973
> 
> 标签：.net, mono

我正在研究 WPF。我刚刚发现了这个 MONO 项目，所以我对 MONO 很陌生。我想知道在 mono 上编写的程序与在 .net framework 4.0 上编写的程序一样**快速****高效。**它是否使用与编译相同的 JIT。如果没有，是否也有任何研究正在进行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T17:23:01.773

如果您只使用也在 Mono 中实现的组件，那么您编写的软件通常会以类似的性能在 Mono 上运行（它确实实现了 VM 和 JIT 编译器，就像 .NET 一样），那么问题就在于此：

[Mono*没有*实现 WPF！](http://www.mono-project.com/WPF)

一般来说，您会看到，Mono 缺乏对许多新的任何花哨的 Microsoft API（如 WPF、WCF 和 EntityFramework）的支持。此外，如果您只想为 Windows 进行开发，那么 .NET Framework 是不错的选择，它更加精致并且专为 Windows 设计。如果您是一名 C#/VB 开发人员，迫切希望为 Mac OS 或 Linux 进行开发，那么值得一看 Mono - 否则您可以放心地忽略它。

[Mono API 兼容性](http://www.mono-project.com/Compatibility)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T17:18:01.010

Mono 使用自己的 JIT、虚拟机等实现。使用 Mono 的主要原因是如果您想开发或移植托管程序到 Linux 或 OS X。如果您正在为 Windows 开发，请使用 Visual Studio 和 .net 框架。Mono 不太可能更快，但可能会出现更多错误，尤其是对于 GUI 设计。

使用 MS .net 的另一个原因是它已经被许多编写 .Net 程序的人测试过，因此您应该减少使用该平台的麻烦。

我在这里推测了一下，但可能使用 Mono 开发的唯一充分理由是，如果您想将程序或程序的一部分移植到 Linux 或 OS X。很可能您仍需要做一些工作，但这是一个开始。即便如此，我还是会考虑将 .net 代码移植到 Java，因为 Java 在其他操作系统上有更好的支持，并且有一些工具和公司可以进行此类转换。

也看看这个问题：

[.NET 和 Mono 的开发差异](https://stackoverflow.com/questions/2783268/net-vs-mono-differences-in-development)

# php - 为什么 PHP 不设置我的 cookie（没有错误）

> ID：13102332
> 
> 赞同：0
> 
> 时间：2012-10-27T17:13:28.500
> 
> 标签：php, cookies

这是我用来在 PHP 中设置 cookie 的非常简单的代码：

```
setcookie("vgc_email", $userinfo['email']) or emsg("Unable to set cookie"); 
```

Error_reporting 设置为 E_ALL 并且没有给出错误，但是，`Unable to set cookie`当我尝试运行此代码时给出了错误，并且没有设置 cookie。我已经确定它`$userinfo['email']`不是空的。我也确信我能够接收 cookie，当使用 Facebook 连接时，我已经在网站上设置了一个 cookie。那么为什么这个不起作用呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T17:17:18.997

从[手册：](http://php.net/setcookie)

> 如果在调用此函数之前存在输出，则 setcookie() 将失败并返回 FALSE。如果 setcookie() 成功运行，它将返回 TRUE。这并不表示用户是否接受了 cookie。

所以最有可能的是，您在调用`setcookie()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T17:15:43.117

在设置 cookie 之前检查是否发送了标头`headers_sent()`

# .net - 为实体框架多对多关系构建嵌套的 lambda 表达式树？

> ID：13102342
> 
> 赞同：2
> 
> 时间：2012-10-27T17:14:29.833
> 
> 标签：.net, linq, entity-framework, many-to-many, expression-trees

我正在尝试构建一个实体框架 4 多对多关系过滤器，这是一个动态数据项目。我知道我需要在运行时构建一个表达式树，并且我很熟悉这样的简单 where 表达式：

```
private MethodCallExpression BuiltMethodCall(IQueryable _query, Type _ObjType, string _ColumnToSearch, string _SearchValue)
{
ConstantExpression value = Expression.Constant(_SearchValue);
ParameterExpression _parameter = Expression.Parameter(_ObjType, "value");
MemberExpression _property = Expression.Property(_parameter, _ColumnToSearch);
BinaryExpression comparison = Expression.Equal(_property, value);
LambdaExpression lambda = Expression.Lambda(comparison, _parameter);

//Ex: Customers.Select(c => c).Where(value => (value.City == "Seattle"))
MethodCallExpression _where = Expression.Call(typeof(Queryable), "Where", new Type[] { _query.ElementType }, new Expression[] {
    _query.Expression,
    Expression.Quote(lambda)
});
return _where;

} 
```

为简单起见，这些示例使用了 Northwind 数据库，其中存在 (Customers <- CustomerCustomerDemo -> CustomerDemographics) 的多对多连接。我遇到的问题是当存在如下表达式中的嵌套 lambda 时构建表达式树，我在其中检索具有特定客户人口统计的所有客户。

```
string custDemogID = "3";

//Get customers who have a particular demog
dynamic cust = context.Customers.Where(c => c.CustomerDemographics.Any(cd => cd.CustomerTypeID == custDemogID)); 
```

如何构建具有“where”调用的表达式树，其中包括“Any”的嵌套 lambda？任何帮助表示赞赏，即使它是关于如何做到这一点的伪代码。没有太多关于这个的，我很绝望，请帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T22:45:53.577

这是我想出的解决方案，我最大的帮助来自从[表达式调用方法。要克服](https://stackoverflow.com/questions/439172/calling-a-method-from-an-expression) 的最大问题是创建一个通用的“任何”方法。其余的只是将调用链接在一起。

```
private MethodCallExpression BuiltMethodCall(IQueryable _query, string CustTypeID, Type _ParentObjType, Type _ChildObjType, string strChildObj, string strChildCol)
{

//This function will build a dynamic linq expression tree representing the ling calls of:
//Customers.Where(c => c.CustomerDemographics.Any(cd => cd.CustomerTypeID = custTypeID))

ConstantExpression value = Expression.Constant(CustTypeID);

//Build the outer part of the Where clause
ParameterExpression parameterOuter = Expression.Parameter(_ParentObjType, "c");
MemberExpression propertyOuter = Expression.Property(parameterOuter, strChildObj);

//Build the comparison inside of the Any clause
ParameterExpression parameterInner = Expression.Parameter(_ChildObjType, "cd");
MemberExpression propertyInner = Expression.Property(parameterInner, strChildCol);

BinaryExpression comparison = Expression.Equal(propertyInner, value);
LambdaExpression lambdaInner = Expression.Lambda(comparison, parameterInner);

//Create Generic Any Method
Func<MethodInfo, bool> methodLambda = m => m.Name == "Any" && m.GetParameters().Length == 2;
MethodInfo method = typeof(Enumerable).GetMethods().Where(methodLambda).Single().MakeGenericMethod(_ChildObjType);

//Create the Any Expression Tree and convert it to a Lambda
MethodCallExpression callAny = Expression.Call(method, propertyOuter, lambdaInner);
LambdaExpression lambdaAny = Expression.Lambda(callAny, parameterOuter);

//Build the final Where Call
MethodCallExpression whereCall = Expression.Call(typeof(Queryable), "Where", new Type[] { _query.ElementType }, new Expression[] {
    _query.Expression,
    Expression.Quote(lambdaAny)
});

return whereCall; 
```

}

# c - 二叉搜索树递归和 ma lloc

> ID：13102343
> 
> 赞同：1
> 
> 时间：2012-10-27T17:14:36.027
> 
> 标签：c, recursion, malloc, binary-search-tree

我在添加到二叉搜索树时遇到问题，我的程序似乎正在添加到临时结构中。我认为为了使其正常工作，我必须在将变量节点设置为结构的一部分之前为左右节点调用 malloc。我只是不确定在代码中的哪个位置使用 malloc，所以它的其余部分仍然有效 =/

```
 typedef struct BiTree_ {
   BiTreeNode *root;
   int size;
} BiTree;

    typedef struct BitTreeData_ {
   char *str;
   int diff;
   int start_count;
   int end_count;
   int hidden;
} BiTreeData;

 typedef struct BiTreeNode_ {
    BiTreeData *data;
    struct BiTreeNode_ *right;
    struct BiTreeNode_ *left;
} BiTreeNode;

    int
bitree_insert(BiTree *tree, BiTreeNode *node, char *str)
{
    if(tree->root == NULL){
        tree->root = (BiTreeNode*)malloc(sizeof(BiTreeNode*));
        tree->root->data = (BiTreeData*)malloc(sizeof(BiTreeData*));
        tree->root->right = NULL;
        tree->root->left = NULL;
        tree->root->data->str = str;
        tree->root->data->hidden = 0;
        tree->root->data->start_count = 0;
        tree->root->data->end_count = 0;
        tree->root->data->diff = 0;
        tree->size++;
        return 0;
    }    
    if(node == NULL){
        node = (BiTreeNode*)malloc(sizeof(BiTreeNode));
        node->right = (BiTreeNode*)malloc(sizeof(BiTreeNode*));
        node->right = NULL;
        node->left = (BiTreeNode*)malloc(sizeof(BiTreeNode*));
        node->left = NULL;
        node->data = (BiTreeData*)malloc(sizeof(BiTreeData*));
        node->data->str = str;
        node->data->hidden = 0;
        node->data->start_count = 0;
        node->data->end_count = 0;
        node->data->diff = 0;
        tree->size++;
        return 0;
    }
    if(strcmp(str, node->data->str)<0){
        if(node->left == NULL){

            return 0;
        }
                bitree_insert(tree, node->left, str);
    }
    if(strcmp(str, node->data->str)>0){
        if(node->right == NULL){
            return 0;
        }
        bitree_insert(tree, node->right, str);
    }    
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T17:20:26.930

您传递给函数的参数`bitree_insert`是按值传递的，而不是按引用传递的。因此，例如，`node`是指向`BitTreeNode`类型变量的指针。如果然后分配给`node`，它会设置名为 node 的局部变量的值。看来您想要做的是传递对节点的引用，即`BitTreeNode **`. 这样，当您分配给`*node`该分配时，是从调用者传递的指针而不是局部变量。

# asp.net - ASP.NET - 会话变量和重叠回收

> ID：13102347
> 
> 赞同：1
> 
> 时间：2012-10-27T17:15:24.887
> 
> 标签：asp.net, .net, iis

什么是重叠回收，如以下网页倒数第二段所述：http: [//msdn.microsoft.com/en-us/library/ms525803%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms525803%28v=vs.90%29.aspx)

我目前对会话变量有疑问。似乎在一个孤立的案例中，它们在一个客户端的两个页面上共享。我正在尝试确定重叠回收或多实例是否可能是原因。我正在使用标准的 ASP.NET cookie。

我用谷歌搜索了这两个术语，但只能在 Sharepoint 服务器的上下文中找到解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T18:54:46.957

通常，当一个会话变量在客户端实例之间共享时，这是因为正在使用“网络花园”并且会话状态保持在进程中。

在这种情况下，您需要使用进程外状态服务器；ASP.NET有更多解释[：Moving Session Out-of-Process with StateServer](http://adventuresdotnet.blogspot.co.uk/2009/06/aspnet-moving-session-out-of-process.html)，文档位于[Session-State Modes](http://msdn.microsoft.com/en-us/library/ms178586%28v=vs.90%29.aspx)。如果您的状态服务器在同一台机器上，则 web.config 条目将类似于`<sessionState mode="StateServer" stateConnectionString="tcpip=127.0.0.1:42424" cookieless="false" timeout="40" />`.

另一方面，如果在浏览器的两个选项卡中使用相同的会话状态，那么这看起来是一个有用的解决方案：[asp.net - 会话 - 多个浏览器选项卡 - 不同的会话？](https://stackoverflow.com/questions/2840615/asp-net-session-multiple-browser-tabs-different-sessions).

# grails - 没有来自 Grails 应用程序的应用程序日志记录？

> ID：13102349
> 
> 赞同：3
> 
> 时间：2012-10-27T17:15:36.547
> 
> 标签：grails, log4j, grails-2.1

我有一个简单的 grails 应用程序和一些登录控制器。但是，无论我如何配置日志记录，我都看不到我的应用程序日志消息（即使我可能会被 grails 内部日志记录所淹没）。

## 配置：

```
// log4j configuration
log4j = {
    // Example of changing the log pattern for the default console appender:
    //
    appenders {
        console name:'stdout', layout:pattern(conversionPattern: '%c{2} %m%n')
        file name:'file', file:'C:\\Users\\C.Ross\\Logs\\Budget.log'
    }
    root {
        warn 'file', 'stdout'
    }

    warn  'org.codehaus.groovy.grails.web.servlet',        // controllers
           'org.codehaus.groovy.grails.web.pages',          // GSP
           'org.codehaus.groovy.grails.web.sitemesh',       // layouts
           'org.codehaus.groovy.grails.web.mapping.filter', // URL mapping
           'org.codehaus.groovy.grails.web.mapping',        // URL mapping
           'org.codehaus.groovy.grails.commons',            // core / classloading
           'org.codehaus.groovy.grails.plugins',            // plugins
           'org.codehaus.groovy.grails.orm.hibernate',      // hibernate integration
           'org.springframework',
           'org.hibernate',
           'net.sf.ehcache.hibernate'

    trace 'grails.app.controller'

} 
```

我也试过

```
trace 'com.ross.budget' 
```

和

```
root {
    all 'file', 'stdout'
} 
```

但一点运气都没有。即使其他所有内容都在记录，我也根本看不到来自我的应用程序的日志*消息*。我究竟做错了什么？

## 代码：

```
 package com.ross.budget

 class BudgetController {

    def index() { 
        redirect(action:"list")
    }

    def list() {
        log.trace "Retrieving all budgets..."
        [budgetList: Budget.all]
    }

    def add() {
        log.trace "Calling add..."
    }

    def show(){
        log.trace "Retrieving budget"
        def budget = Budget.get(params.id)
        [budget: budget]
    }

    def save(){
        log.debug "Creating new budget"
        def budget = new Budget(params)
        budget.save()
        redirect(action:"list")
    }

    def addLineItem(){
        log.trace("Retrieving budget $params.id")
        def budget = Budget.get(params.id)
        log.trace("Creating line item from params")
        def lineItem = new LineItem(params)
        log.debug "Adding line item to budget"
        budget.lineItems.add(lineItem)
        log.trace "Saving budget"
        budget.save()
        log.trace("Redirecting to show ...")
        redirect(action:"show", id:params.id)
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T01:59:42.857

根据[Grails 文档](http://grails.org/doc/latest/guide/conf.html#logging)（在**配置记录器**下），您需要`grails.app.controllers`. 只需将人工制品名称设为复数即可。

# php - 在html中传递带有href的变量

> ID：13102351
> 
> 赞同：5
> 
> 时间：2012-10-27T17:15:45.940
> 
> 标签：php, html

我想在使用 href 时传递一个变量以及单击按钮时的链接。谁能告诉我确切的语法，或者是否有可能？我想做这样的事情：href="link+variable" 这样我就可以提取变量并在将打开的“链接”上使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T17:19:56.087

您的意思是将值作为参数传递吗？

`<a href="page.php?value_key=some_value">Link</a>`

然后在 PHP

```
if(isset($_GET['value_key'])){
  $var = $_GET['value_key']; //some_value
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-27T17:20:53.793

是的，可以通过执行以下操作

**站点 1**

```
<input type="button" onClick="window.location='http://example.com?var=<?php echo $var ?>'"> 
```

在接收站点上使用以下内容：

**站点 2**

```
<?php
    $var = $_GET['var'];
?> 
```

您发送的变量存储在站点 2 的 $var 中

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T17:17:44.923

你指的是一个查询字符串。

查询字符串使用名称值对。`?`用于开始查询字符串。An`&`将用于将多个变量串在一起。

```
<a href="http://www.example.com/index.php?var=value&var2=value2">Pass the variable</a> 
```

这些变量可以在 php 中通过使用`$_GET`或者`$_REQUEST`

在目标 php 页面上：

```
$var = $_GET['var'];

$var2 = $_GET['var2']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-27T17:30:07.343

如何处理外部变量的完整描述在这里：

[http://php.net/manual/en/language.variables.external.php](http://php.net/manual/en/language.variables.external.php)

# sql - Sphinx 相关表字符串属性

> ID：13102354
> 
> 赞同：0
> 
> 时间：2012-10-27T17:16:02.050
> 
> 标签：sql, sphinx

这是一个示例来说明我正在尝试做的事情：

假设我在食谱和食谱之间有一对多的关系，两个表中都有字段“id”和“name”。目前，搜索仅返回食谱的“名称”字段，因此结果可能如下所示 -

食谱

*   结果名称 1
*   结果名称 2
*   结果名称 3
*   ...

在不使用外键的 sql_attr_uint 进行额外的数据库调用或搜索查询的情况下，我希望看到的是以下内容：

食谱

*   结果名称 1 ---------- 此结果的说明书名称
*   结果名称 2 ---------- 此结果的说明书名称
*   结果名称 3 ---------- 此结果的说明书名称
*   ...

我知道 sql_attr_string，但这仅在向每个文档添加单个任意字符串时才有用。我需要类似 sql_joined_field 之类的东西，它不是全文可搜索的，而是简单地存储在文档中，并带有来自查询的适当值。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T00:31:12.803

我相信我偶然发现了解决方案，对 Sphinx 文档有点困惑：

> 所有既不是文档 ID（第一个）也不是属性的列都将被全文索引。

我认为这意味着无论如何，我放置在 sql_query 中的字段都将被全文索引。事实上，将字段指定为“属性”会改变这种行为，实际上是删除了字段的全文索引，而只是将其放在文档中。

为了解决我的问题，我只是在主 sql_query 中编写了我的 JOIN（因为 sql_joined_field 似乎不允许将其指定为属性）并将该字段设置为 sql_attr_string。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T00:56:55.903

处理一对多字符串属性的一个选项是使用一些 MySQL 技巧将文本列拉入`sql_query`. 例如;

> SELECT DISTINCT *, GROUP_CONCAT(tm.text_field SEPARATOR ' ') FROM table t INNER JOIN table_many tm ON t.id = tm.t_id;

它也可以作为附加的子查询，如果您有更复杂的连接集，这可能会更方便。

> SELECT *, (SELECT GROUP_CONCAT(text_field SEPARATOR ' ') FROM table_many tm WHERE t.id = tm.t_id) FROM table t

# android - 无法实例化 com.android.menubar.internal.MenuBarEnhancerCocoa：

> ID：13102355
> 
> 赞同：1
> 
> 时间：2012-10-27T17:16:05.987
> 
> 标签：android, eclipse, cocoa

我已经尝试了一个小时来解决这个问题。在这个主题下，Stack Overflow 上有一个项目，但没有任何真正的帮助。我有一个新安装的带有 Eclipse 的 Android SDK，截至目前所有最新版本，所有 SDK 项目的安装可以追溯到 v 2.2、所有工具、所有附加功能等。我在 Mac 上，10.6.8。希望开始我的第一个项目，但无法通过 SDK 管理器的初始激活。尽管我尝试了所有的修复方法，但我仍然在控制台中收到此错误：

> 无法实例化 com.android.menubar.internal.MenuBarEnhancerCocoa: java.lang.ClassNotFoundException: com.android.menubar.internal.MenuBarEnhancerCocoa。

如果有人对补救措施有任何建议，我将不胜感激。

# c++ - memset() 的意外行为

> ID：13102356
> 
> 赞同：5
> 
> 时间：2012-10-27T17:16:13.923
> 
> 标签：c++, cstring

我在所有元素中用 99 初始化数组

```
#include<iostream>
#include<cstring>
int main(){
    int a[10];
    memset(a,99,10);
    std::cout<<a[0]<<std::endl;
    return 0;
} 
```

但我得到的输出是出乎意料的。

输出：-

> 1667457891

这个 memset 函数的异常行为背后的原因是什么。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-27T17:16:58.270

首先，`memset`以字节为单位，而不是数组元素的数量，因为它不知道每个元素有多大。您需要使用`sizeof`来获取数组的大小（以字节为单位）并将其提供给`memset`：

```
memset(a, 99, sizeof(a)); 
```

但是，在 C++ 中，更喜欢它，`std::fill`因为它是类型安全的、更灵活的，并且有时效率更高：

```
std::fill(begin(a), end(a), 99); 
```

第二个也是更紧迫的问题是，`memset`并且`fill`在这种情况下具有不同的行为，因此您必须决定您想要哪个：`memset`将每个*字节*设置为 99，而`fill`将每个*元素*（`int`在您的情况下为每个元素）设置为 99。如果你想要一个数组中充满了等于 99 的整数，`fill`按照我展示的方式使用。如果您希望将每个字节设置为 99，我建议将其转换`int*`为 a`char*`并`fill`在其上使用而不是`memset`，但`memset`也可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T17:22:37.943

问题在于`memset`将每个字节设置为，`99`因此第一个字节`int`为 0x63636363，等于 1667457891。请`std::fill`改用。

# jquery - 在 HTML 中加载多个 javascript 时遇到问题

> ID：13102359
> 
> 赞同：0
> 
> 时间：2012-10-27T17:16:50.770
> 
> 标签：jquery, html

我有一个 HTML 表格，我有一些我想与表格一起使用的 jquery 函数。但是当我插入这两个函数时，它们停止工作。这是代码。

功能一

```
// When document is ready: this gets fired before body onload <img     src='http://blogs.digitss.com/wp-includes/images/smilies/icon_smile.gif' alt=':)'     class='wp-smiley' /> 
window.onload = function () {
// Write on keyup event of keyword input element
$("#kwd_search").keyup(function () {
    // When value of the input is not blank
    if ($(this).val() != "") {
        // Show only matching TR, hide rest of them
        $("#tfhover tbody>tr").hide();
        $("#tfhover td:contains-ci('" + $(this).val() + "')").parent("tr").show();
    }
    else {
        // When there is no input or clean again, show everything back
        $("#tfhover tbody>tr").show();
    }
});
};
// jQuery expression for case-insensitive filter
$.extend($.expr[":"],
{
"contains-ci": function (elem, i, match, array) {
    return (elem.textContent || elem.innerText || $(elem).text() ||     "").toLowerCase().indexOf((match[3] || "").toLowerCase()) >= 0;
}
  }); 
```

功能二

```
window.onload = function () {
var tfrow = document.getElementById('tfhover').rows.length;
var tbRow = [];
for (var i = 1; i < tfrow; i++) {
    tbRow[i] = document.getElementById('tfhover').rows[i];
    tbRow[i].onmouseover = function () {
        this.style.backgroundColor = '#ffffff';
    };
    tbRow[i].onmouseout = function () {
        this.style.backgroundColor = '#d4e3e5';
    };
}
}; 
```

这是HTML

```
<head runat="server">
<title></title>
 <script type="text/javascript"    src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>

<script type="text/javascript" src="hl.js"></script> 
<script type="text/javascript" src="f.js"></script>    
<script type="text/javascript">

</script>

<style type="text/css">
table.tftable {font-size:12px;color:#333333;width:100%;border-width: 1px;border-color:    #729ea5;border-collapse: collapse; width:auto; overflow-x:auto;}
table.tftable th {font-size:12px;background-color:#acc8cc;border-width: 1px;padding: 8px;border-style: solid;border-color: #729ea5;text-align:left;}

table.tftable tr {background-color:#d4e3e5;}
table.tftable td {font-size:12px;border-width: 1px;padding: 8px;border-style: solid;border-color: #729ea5;}
    .auto-style1 {
        height: 32px;
    }
</style>
</head> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T17:19:18.990

而不是使用`window.onload` use `$(window).load(function(){...})`。实际上你 `window.onload`在`Function 2`.

```
$(window).load(function(){

  ....// your code

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T18:14:48.253

你的第二个 window.onload 函数覆盖了第一个。

此外，使用 jquery，您可以将其称为 WAY 不同的方式，使其更容易，例如：

```
<head runat="server">
    <title></title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <script type="text/javascript">

        $(function() {
            // Write on keyup event of keyword input element
            $("#kwd_search").keyup(function () {
                // When value of the input is not blank
                if ($(this).val() != "") {
                    // Show only matching TR, hide rest of them
                    $("#tfhover tbody>tr").hide();
                    $("#tfhover td:contains-ci('" + $(this).val() + "')").parent("tr").show();
                }
                else {
                    // When there is no input or clean again, show everything back
                    $("#tfhover tbody>tr").show();
                };
            });

            // jQuery expression for case-insensitive filter
            $.extend($.expr[":"], {
                    "contains-ci": function (elem, i, match, array) {
                        return (elem.textContent || elem.innerText || $(elem).text() || "").toLowerCase().indexOf((match[3] || "").toLowerCase()) >= 0;
                    }
            });

            var tfrow = document.getElementById('tfhover').rows.length;
            var tbRow = [];
            for (var i = 1; i < tfrow; i++) {
                tbRow[i] = $("#tfhover")[0].rows[i];
                var row = $(tbRow[i]);
                row.hover(function(eIn) {
                    $(this).css({ "background-color": "#ffffff" });
                },
                function(eOut) {
                    $(this).css({ "background-color": "#d4e3e5" });
                });
            };
        })

    </script> 
```

# ruby-on-rails - 有没有更好的方法来映射儿童和孙子的记录？

> ID：13102364
> 
> 赞同：2
> 
> 时间：2012-10-27T17:17:17.810
> 
> 标签：ruby-on-rails, arrays, map, collect

我需要在树中收集所有作者，例如：

```
parent
|
+- child #1
|
+- child #1
|  |
|  +- grand child #1
|  |
|  +- grand child #2
|
+- child #2
... 
```

（原始帖子可以有 n 个孩子，每个孩子也可以有 m 个孩子。原始帖子的最大深度为 2：帖子 - 孩子 - 孙子）

Ruby on Rails 中收集所有作者（post belongs_to author）的最佳方法是什么？我目前的方法如下，但它似乎不是很有效：

```
def all_authors_in(post)
  @authors = Array.new
  @authors << post.author

  post.children.each do |child|
    @authors << child.author
    child.children.each do |grandchild| 
      @authors << grandchild.author
    end
  end

  @authors.map{|u| u.id}.uniq
end 
```

模型中的一些代码：

```
class Post < ActiveRecord::Base
  belongs_to :parent, class_name: 'Post'
  has_many :children, foreign_key: :parent_id, class_name: 'Post', :dependent => :destroy
#...
end 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T17:42:53.000

我假设您正在为您的模型使用单表继承`Post`，但您没有说您是否推出了自己的版本。我建议使用[祖先 gem](https://github.com/stefankroes/ancestry)。然后你可以做一些像这样简单的事情：

```
@authors = post.subtree.collect(&:author).uniq 
```

# mod-wsgi - 在网页上显示 mod_wsgi 错误

> ID：13102369
> 
> 赞同：2
> 
> 时间：2012-10-27T17:18:06.063
> 
> 标签：mod-wsgi, error-reporting

我已经设置了 mod_wsgi 来提供 python 文件。确实如此。

但是，如果我在 .py 文件上有语法错误（例如缩进错误），我会在页面加载时收到服务器错误，并且必须转到日志查看错误发生的原因（即缩进）

是否可以让 mod_wsgi 在页面上显示错误（至少对于开发环境）？

可能类似于 php 的 error_reporting 选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T22:45:45.163

不完全的。您可以获得的最接近的是：

[http://code.google.com/p/modwsgi/wiki/DebuggingTechniques#Error_Catching_Middleware](http://code.google.com/p/modwsgi/wiki/DebuggingTechniques#Error_Catching_Middleware)

这只适用于实际传播到 WSGI 服务器级别的请求执行期间发生的错误。

它不适用于加载 WSGI 脚本本身时出现的错误，或者在使用框架并且框架本身捕获错误并变成 500 页的情况下。在后者中，框架通常具有启用调试页面的方法。

现在，听起来您没有使用框架，而是在编写原始 WSGI 脚本。如果您是 Python Web 编程新手，则不建议您编写原始 WSGI。因此，请改用框架，它应该为您提供您想要的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-31T06:47:21.550

通过一些工作（非常感谢其他 Stack Overflow 贡献者！），您可以获得很好的浏览器错误信息。当然，您的 WSGI“根”位于“应用程序”定义中：

```
def application(environ, start_response):
    import linecache, sys
    try:
        from cgi import parse_qs, escape      # Application starts here
        start_response('200 OK', [('Content-type', 'text/html'),]) #to here
        return ["Whatever application wants to say."] 

    except:                                   # Error output starts here
        exc_type, exc_obj, tb = sys.exc_info()
        f = tb.tb_frame
        lineno = tb.tb_lineno
        filename = f.f_code.co_filename
        linecache.checkcache(filename)
        line = linecache.getline(filename, lineno, f.f_globals)
        es = '''Error in {}, Line {} "{}": {}'''.format(filename, lineno, line.strip(), exc_obj)
        start_response('200 OK', [('Content-type', 'text/html'),])
        return [es] 
```

# php - 如何将“Name”：“x”，“Name2”：“x2”放入php中的数组中

> ID：13102371
> 
> 赞同：-3
> 
> 时间：2012-10-27T17:18:22.687
> 
> 标签：php, arrays

> **可能重复：**
> [如何解码这个 JSON 字符串？](https://stackoverflow.com/questions/2235374/how-to-decode-this-json-string)

从另一个站点获取数据时，我得到了这个

```
{"user_id":"908508","item_id":"341","quantity":"3","status":"0"} 
```

有时字段多，有时字段少

我怎样才能把它变成一个数组

```
"name" => "X" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T17:21:33.037

使用 json_decode

```
json_decode($jsonstring); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T17:22:06.297

尝试这个：

```
$url = "http://...";
$json = file_get_contents($url);
$array = json_decode($json, TRUE /** forces to decode into PHP array */);

print_r($array); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T17:23:56.903

```
<?php

$json = '{"foo-bar": 12345}';

$obj = json_decode($json);
print $obj->{'foo-bar'}; // 12345

?> 
```

[http://www.php.net/manual/en/function.json-decode.php](http://www.php.net/manual/en/function.json-decode.php)

# python - Python XML正则表达式匹配问题

> ID：13102375
> 
> 赞同：0
> 
> 时间：2012-10-27T17:19:02.000
> 
> 标签：python, xml, regex

我一直在尝试**仅匹配标签名称**（没有`<`and`>`符号）是常规标签的情况：

`<w:tag w:attrib1="http://url" w:attrib2="anyValue">`

没有匹配的单独标签（开闭标签）：

`<w:tag2 w:attrib1="anyValue" w:attrib2="http://url" />`

（请注意**URL**，因为它们包含正斜杠 ( `/`)）

但无法通过以下方式实现：

`regex = re.compile('(?<=<)w:\w+(?=[\w\W]+>)(?!\s/>)')`

`print(regex.findall(string))`

得到这个：

`['w:tag','w:tag2']`

期待这个：

`['w:tag']`

有什么想法吗？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:00:12.123

1) 轻松进行前瞻/后视；它们很难控制，你很少真正需要它们。使用捕获组来提取匹配字符串的一部分。使用否定字符类和非贪婪搜索（如果需要）来避免匹配太多：

```
re.findall(r'<\s*(w:\w+)[^>]*(?<!/)>', string) 
```

更容易阅读，不是吗？然而，

2）根本不要这样做！不要依赖 RE 来匹配 XML 或 html，你只是在寻求心碎。有关详细信息，请参阅[https://stackoverflow.com/a/1732454/699305](https://stackoverflow.com/a/1732454/699305)。:-) 熟悉将 python`xml.etree.ElementTree`与 xpath 表达式一起使用。这需要一些时间来适应，但这将是值得花时间的——你不会后悔的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T18:00:41.747

找到了：

```
regex = re.compile('(?<=<)w:\w+(?=>)|(?<=<)w:\w+(?=[\s\w+:\w+="[\w/:.-]+"]{0,10}>)') 
```

# graph - 与节点数成指数关系的最短路径数 (Dijkstra)

> ID：13102381
> 
> 赞同：0
> 
> 时间：2012-10-27T17:19:59.210
> 
> 标签：graph, graph-algorithm, dijkstra

我被要求找出一种图，它的最短路径总数（使用 Dijkstra 算法）是节点数的指数。我想出了这样的图表：

A->B->C（每条边的权重为 1） A->C（边的权重为 2）

C->A'->B'（所有边的权重=1） C->B'（权重=2）

B'->A''->B''（所有边的权重=1） B'->B''（权重=2）

等等...

这样，Dijkstra 算法为该图找到的最短路径总数将为 Ω(2^(n/2))。我现在试图弄清楚它是否可以概括为 Ω(2^(n/k)) 之类的东西，其中 k = 每个节点的最短路径数。我也不知道如何正确证明解决方案的正确性。非常感谢任何建议或提示！如果您能指出我的解决方案中存在的任何缺陷，我也将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T23:35:25.063

您的解决方案是一个很好的起点。对于您添加的每几个节点，解决方案的数量可以增加一倍。但是，我并没有立即看到每个节点如何具有大约相同数量的最短路径。这可能会导致平均值较低，从而使您的提案无效。

要解决该问题，您可以对图表进行 2 项细微调整：使其具有周期性并添加更多链接。

**使其具有循环性：** 您应该将起始节点与最后一个节点连接起来。这将使图中的每个节点都相等，因此所有节点都具有相同数量的最短路径。

**添加更多链接：** 在您的示例中，您为节点 A 提供了到节点 B 的链接和到节点 C 的链接。您还应该为节点 B 提供到节点 C 的链接（已经可以）和到节点 A' 的链接。这等于彼此。

为了证明正确性，您现在可以计算 1 个节点到所有其他节点的不同路径的数量，这是图中所有节点的有效结果（这就是它们应该相等的原因）。为了证明指数性，您可以查看如果向图中添加更多节点会发生什么，以及这如何影响解决方案的数量。

# google-app-engine - GAE 数据存储仅保存部分对象

> ID：13102384
> 
> 赞同：0
> 
> 时间：2012-10-27T17:20:33.360
> 
> 标签：google-app-engine, google-cloud-datastore

我有一个名为 AdUser 的对象，如下所示：

```
@PersistenceCapable
public class AdUser{

@Persistent
protected final int _id;

@Persistent
protected String _firstName, _lastName;

@Persistent
protected double _bankRoll;

@Persistent(serialized = "true", embeddedElement = "true", defaultFetchGroup = "true") 
protected final User _googleUser;

@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
private Key key; 
```

然后，在我的代码中创建一个新的 AdUser 对象并用数据填充它。_googleUser 数据成员的 User 类取自 com.google.appengine.api.users.User

然后在我的代码中，我运行以下命令：

```
try {
        pm.makePersistent(user);
    } finally {
       pm.close();
} 
```

之后：

```
PersistenceManager pm = PMF.get().getPersistenceManager();
Query q = pm.newQuery(AdUser.class);
try {
    @SuppressWarnings("unchecked")
    List<AdUser> list = (List<AdUser>) q.execute();
    userArray = new ArrayList<AdUser>(list);
} finally {
    q.closeAll();
    pm.close();
} 
```

当我遍历列表时，我看到例如 _firstName 和 _lastName 数据成员被正确检索，但例如 _id 字段和 _googleUser 字段不是，并且分别返回为 0 和 null。

我在这里很无知。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T18:25:44.777

您已设置为`final`the`_id`和 the`_googleUser`并且您尚未初始化它们。因此，当您创建类的实例并将它们保存在数据存储中时，它们的值不能被修改。

# tomcat - 手动创建 Servlet 项目或通过 Eclipse Juno 创建 Servlet 项目有什么区别吗？

> ID：13102385
> 
> 赞同：0
> 
> 时间：2012-10-27T17:20:40.660
> 
> 标签：tomcat, servlets

我将手动创建一些 servlet 文件。但是我查看了一些教程，其中提到必须在文件夹 ../WEB-INF/classes/ 下创建 Servlet（即 MyServlet.java）。当然，您需要在文件夹 WEB-INF 下创建 web.xml 来修改servlet 映射。

但如果您使用 ECLIPSE JUNO 通过 Dynamic Project 创建 servlet 文件，则 servlet 将在 Java 源文件夹中创建，而不是在 /WEB-INF/classes/ 中。它工作正常。那么这两种方式有什么区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T17:30:52.157

Servlet 源代码可以放在任何你想要的地方。在 maven 项目中，它`/src/main/java`与任何其他类一样。但是，在将 servlet 编译为字节码后，它必须`.war`放在`/WEB-INF/classes`. 无论您使用哪种工具（或者您可能根本不使用任何工具），它都必须生成`.war`具有预定义结构的文件。

话虽如此，只要您能够生成标准`.war`文件，您就可以自由使用任何环境/IDE/工具并将您的 servlet 源代码放在您想要的任何地方。

# hadoop - 为什么map/reduce输出一个空文件，没有报异常

> ID：13102390
> 
> 赞同：2
> 
> 时间：2012-10-27T17:21:06.260
> 
> 标签：hadoop, mapreduce

我实现了一个简单的 map/reduce 程序来创建一个倒排索引（我的小型搜索引擎的一部分）。每件事都工作得很好。但是在我将输入文件大小扩大到 20MB 以上（仍然是小文件进行测试）后，输出文件将为空。这意味着我可以找到文件“part-00000”，但它是 0 字节。

奇怪的是根本没有例外。这是我的日志:

（注意“映射输入记录=19405，组合输出记录=4111513，减少输入记录=0”）

```
SEInvertedIndex Program starts!...
12/10/28 00:58:05 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
12/10/28 00:58:05 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.
12/10/28 00:58:05 WARN mapred.JobClient: No job jar file set.  User classes may not be found. See JobConf(Class) or JobConf#setJar(String).
12/10/28 00:58:05 WARN snappy.LoadSnappy: Snappy native library not loaded
12/10/28 00:58:05 INFO mapred.FileInputFormat: Total input paths to process : 1
12/10/28 00:58:05 INFO mapred.JobClient: Running job: job_local_0001
12/10/28 00:58:05 INFO util.ProcessTree: setsid exited with exit code 0
12/10/28 00:58:05 INFO mapred.Task:  Using ResourceCalculatorPlugin : org.apache.hadoop.util.LinuxResourceCalculatorPlugin@8c4a77
12/10/28 00:58:05 INFO mapred.MapTask: numReduceTasks: 1
12/10/28 00:58:05 INFO mapred.MapTask: io.sort.mb = 100
12/10/28 00:58:05 INFO mapred.MapTask: data buffer = 79691776/99614720
12/10/28 00:58:05 INFO mapred.MapTask: record buffer = 262144/327680
12/10/28 00:58:06 INFO mapred.JobClient:  map 0% reduce 0%
12/10/28 00:58:08 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:58:08 INFO mapred.MapTask: bufstart = 0; bufend = 25657705; bufvoid = 99614720
12/10/28 00:58:08 INFO mapred.MapTask: kvstart = 0; kvend = 262144; length = 327680
12/10/28 00:58:10 INFO mapred.MapTask: Finished spill 0
12/10/28 00:58:11 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:58:11 INFO mapred.MapTask: bufstart = 25657705; bufend = 55385370; bufvoid = 99614720
12/10/28 00:58:11 INFO mapred.MapTask: kvstart = 262144; kvend = 196607; length = 327680
12/10/28 00:58:11 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:58:12 INFO mapred.JobClient:  map 5% reduce 0%
12/10/28 00:58:12 INFO mapred.MapTask: Finished spill 1
12/10/28 00:58:13 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:58:13 INFO mapred.MapTask: bufstart = 55385370; bufend = 87701074; bufvoid = 99614720
12/10/28 00:58:13 INFO mapred.MapTask: kvstart = 196607; kvend = 131070; length = 327680
12/10/28 00:58:14 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:58:14 INFO mapred.MapTask: Finished spill 2
12/10/28 00:58:15 INFO mapred.JobClient:  map 8% reduce 0%
12/10/28 00:58:15 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:58:15 INFO mapred.MapTask: bufstart = 87701074; bufend = 17642207; bufvoid = 99614622
12/10/28 00:58:15 INFO mapred.MapTask: kvstart = 131070; kvend = 65533; length = 327680
12/10/28 00:58:17 INFO mapred.MapTask: Finished spill 3
12/10/28 00:58:17 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:58:17 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:58:17 INFO mapred.MapTask: bufstart = 17642207; bufend = 47171716; bufvoid = 99614720
12/10/28 00:58:17 INFO mapred.MapTask: kvstart = 65533; kvend = 327677; length = 327680
12/10/28 00:58:18 INFO mapred.JobClient:  map 12% reduce 0%
12/10/28 00:58:19 INFO mapred.MapTask: Finished spill 4
12/10/28 00:58:20 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:58:20 INFO mapred.MapTask: bufstart = 47171716; bufend = 75047441; bufvoid = 99614720
12/10/28 00:58:20 INFO mapred.MapTask: kvstart = 327677; kvend = 262140; length = 327680
12/10/28 00:58:20 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:58:21 INFO mapred.JobClient:  map 16% reduce 0%
12/10/28 00:58:21 INFO mapred.MapTask: Finished spill 5
12/10/28 00:58:22 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:58:22 INFO mapred.MapTask: bufstart = 75047441; bufend = 7640048; bufvoid = 99614657
12/10/28 00:58:22 INFO mapred.MapTask: kvstart = 262140; kvend = 196603; length = 327680
12/10/28 00:58:23 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:58:24 INFO mapred.MapTask: Finished spill 6
12/10/28 00:58:24 INFO mapred.JobClient:  map 19% reduce 0%
12/10/28 00:58:24 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:58:24 INFO mapred.MapTask: bufstart = 7640048; bufend = 39737149; bufvoid = 99614720
12/10/28 00:58:24 INFO mapred.MapTask: kvstart = 196603; kvend = 131066; length = 327680
12/10/28 00:58:26 INFO mapred.MapTask: Finished spill 7
12/10/28 00:58:26 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:58:27 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:58:27 INFO mapred.MapTask: bufstart = 39737149; bufend = 69183305; bufvoid = 99614720
12/10/28 00:58:27 INFO mapred.MapTask: kvstart = 131066; kvend = 65529; length = 327680
12/10/28 00:58:27 INFO mapred.JobClient:  map 21% reduce 0%
12/10/28 00:58:28 INFO mapred.MapTask: Finished spill 8
12/10/28 00:58:29 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:58:29 INFO mapred.MapTask: bufstart = 69183305; bufend = 97875327; bufvoid = 99614720
12/10/28 00:58:29 INFO mapred.MapTask: kvstart = 65529; kvend = 327673; length = 327680
12/10/28 00:58:29 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:58:30 INFO mapred.JobClient:  map 26% reduce 0%
12/10/28 00:58:31 INFO mapred.MapTask: Finished spill 9
12/10/28 00:58:32 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:58:32 INFO mapred.MapTask: bufstart = 97875327; bufend = 31087133; bufvoid = 99614698
12/10/28 00:58:32 INFO mapred.MapTask: kvstart = 327673; kvend = 262136; length = 327680
12/10/28 00:58:32 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:58:33 INFO mapred.JobClient:  map 29% reduce 0%
12/10/28 00:58:33 INFO mapred.MapTask: Finished spill 10
12/10/28 00:58:34 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:58:34 INFO mapred.MapTask: bufstart = 31087133; bufend = 62067679; bufvoid = 99614720
12/10/28 00:58:34 INFO mapred.MapTask: kvstart = 262136; kvend = 196599; length = 327680
12/10/28 00:58:35 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:58:36 INFO mapred.MapTask: Finished spill 11
12/10/28 00:58:36 INFO mapred.JobClient:  map 31% reduce 0%
12/10/28 00:58:36 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:58:36 INFO mapred.MapTask: bufstart = 62067679; bufend = 96839215; bufvoid = 99614720
12/10/28 00:58:36 INFO mapred.MapTask: kvstart = 196599; kvend = 131062; length = 327680
12/10/28 00:58:38 INFO mapred.MapTask: Finished spill 12
12/10/28 00:58:38 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:58:39 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:58:39 INFO mapred.MapTask: bufstart = 96839215; bufend = 29204841; bufvoid = 99614697
12/10/28 00:58:39 INFO mapred.MapTask: kvstart = 131062; kvend = 65525; length = 327680
12/10/28 00:58:39 INFO mapred.JobClient:  map 36% reduce 0%
12/10/28 00:58:40 INFO mapred.MapTask: Finished spill 13
12/10/28 00:58:41 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:58:41 INFO mapred.MapTask: bufstart = 29204841; bufend = 59391566; bufvoid = 99614720
12/10/28 00:58:41 INFO mapred.MapTask: kvstart = 65525; kvend = 327669; length = 327680
12/10/28 00:58:41 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:58:42 INFO mapred.JobClient:  map 39% reduce 0%
12/10/28 00:58:42 INFO mapred.MapTask: Finished spill 14
12/10/28 00:58:43 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:58:43 INFO mapred.MapTask: bufstart = 59391566; bufend = 88629854; bufvoid = 99614720
12/10/28 00:58:43 INFO mapred.MapTask: kvstart = 327669; kvend = 262132; length = 327680
12/10/28 00:58:44 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:58:45 INFO mapred.MapTask: Finished spill 15
12/10/28 00:58:45 INFO mapred.JobClient:  map 42% reduce 0%
12/10/28 00:58:46 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:58:46 INFO mapred.MapTask: bufstart = 88629854; bufend = 19479345; bufvoid = 99614663
12/10/28 00:58:46 INFO mapred.MapTask: kvstart = 262132; kvend = 196595; length = 327680
12/10/28 00:58:47 INFO mapred.MapTask: Finished spill 16
12/10/28 00:58:47 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:58:48 INFO mapred.JobClient:  map 45% reduce 0%
12/10/28 00:58:48 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:58:48 INFO mapred.MapTask: bufstart = 19479345; bufend = 50425350; bufvoid = 99614720
12/10/28 00:58:48 INFO mapred.MapTask: kvstart = 196595; kvend = 131058; length = 327680
12/10/28 00:58:50 INFO mapred.MapTask: Finished spill 17
12/10/28 00:58:50 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:58:50 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:58:50 INFO mapred.MapTask: bufstart = 50425350; bufend = 81295514; bufvoid = 99614720
12/10/28 00:58:50 INFO mapred.MapTask: kvstart = 131058; kvend = 65521; length = 327680
12/10/28 00:58:51 INFO mapred.JobClient:  map 49% reduce 0%
12/10/28 00:58:52 INFO mapred.MapTask: Finished spill 18
12/10/28 00:58:53 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:58:53 INFO mapred.MapTask: bufstart = 81295514; bufend = 10297619; bufvoid = 99614693
12/10/28 00:58:53 INFO mapred.MapTask: kvstart = 65521; kvend = 327665; length = 327680
12/10/28 00:58:53 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:58:54 INFO mapred.JobClient:  map 53% reduce 0%
12/10/28 00:58:54 INFO mapred.MapTask: Finished spill 19
12/10/28 00:58:55 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:58:55 INFO mapred.MapTask: bufstart = 10297619; bufend = 40501081; bufvoid = 99614720
12/10/28 00:58:55 INFO mapred.MapTask: kvstart = 327665; kvend = 262128; length = 327680
12/10/28 00:58:56 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:58:57 INFO mapred.MapTask: Finished spill 20
12/10/28 00:58:57 INFO mapred.JobClient:  map 55% reduce 0%
12/10/28 00:58:57 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:58:57 INFO mapred.MapTask: bufstart = 40501081; bufend = 70713611; bufvoid = 99614720
12/10/28 00:58:57 INFO mapred.MapTask: kvstart = 262128; kvend = 196591; length = 327680
12/10/28 00:58:59 INFO mapred.MapTask: Finished spill 21
12/10/28 00:58:59 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:59:00 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:59:00 INFO mapred.MapTask: bufstart = 70713611; bufend = 3303900; bufvoid = 99614652
12/10/28 00:59:00 INFO mapred.MapTask: kvstart = 196591; kvend = 131054; length = 327680
12/10/28 00:59:00 INFO mapred.JobClient:  map 59% reduce 0%
12/10/28 00:59:02 INFO mapred.MapTask: Finished spill 22
12/10/28 00:59:02 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:59:02 INFO mapred.MapTask: bufstart = 3303900; bufend = 34088069; bufvoid = 99614720
12/10/28 00:59:02 INFO mapred.MapTask: kvstart = 131054; kvend = 65517; length = 327680
12/10/28 00:59:02 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:59:03 INFO mapred.JobClient:  map 63% reduce 0%
12/10/28 00:59:04 INFO mapred.MapTask: Finished spill 23
12/10/28 00:59:05 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:59:05 INFO mapred.MapTask: bufstart = 34088069; bufend = 63394277; bufvoid = 99614720
12/10/28 00:59:05 INFO mapred.MapTask: kvstart = 65517; kvend = 327661; length = 327680
12/10/28 00:59:05 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:59:06 INFO mapred.JobClient:  map 66% reduce 0%
12/10/28 00:59:06 INFO mapred.MapTask: Finished spill 24
12/10/28 00:59:07 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:59:07 INFO mapred.MapTask: bufstart = 63394277; bufend = 94566907; bufvoid = 99614720
12/10/28 00:59:07 INFO mapred.MapTask: kvstart = 327661; kvend = 262124; length = 327680
12/10/28 00:59:08 INFO mapred.MapTask: Finished spill 25
12/10/28 00:59:08 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:59:09 INFO mapred.JobClient:  map 70% reduce 0%
12/10/28 00:59:09 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:59:09 INFO mapred.MapTask: bufstart = 94566907; bufend = 29503862; bufvoid = 99614698
12/10/28 00:59:09 INFO mapred.MapTask: kvstart = 262124; kvend = 196587; length = 327680
12/10/28 00:59:11 INFO mapred.MapTask: Finished spill 26
12/10/28 00:59:12 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:59:12 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:59:12 INFO mapred.MapTask: bufstart = 29503862; bufend = 63726597; bufvoid = 99614720
12/10/28 00:59:12 INFO mapred.MapTask: kvstart = 196587; kvend = 131050; length = 327680
12/10/28 00:59:12 INFO mapred.JobClient:  map 73% reduce 0%
12/10/28 00:59:14 INFO mapred.MapTask: Finished spill 27
12/10/28 00:59:14 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:59:14 INFO mapred.MapTask: bufstart = 63726597; bufend = 99242470; bufvoid = 99614720
12/10/28 00:59:14 INFO mapred.MapTask: kvstart = 131050; kvend = 65513; length = 327680
12/10/28 00:59:15 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:59:15 INFO mapred.JobClient:  map 77% reduce 0%
12/10/28 00:59:16 INFO mapred.MapTask: Finished spill 28
12/10/28 00:59:17 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:59:17 INFO mapred.MapTask: bufstart = 99242470; bufend = 35558411; bufvoid = 99614660
12/10/28 00:59:17 INFO mapred.MapTask: kvstart = 65513; kvend = 327657; length = 327680
12/10/28 00:59:18 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:59:18 INFO mapred.JobClient:  map 80% reduce 0%
12/10/28 00:59:18 INFO mapred.MapTask: Finished spill 29
12/10/28 00:59:19 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:59:19 INFO mapred.MapTask: bufstart = 35558411; bufend = 70034163; bufvoid = 99614720
12/10/28 00:59:19 INFO mapred.MapTask: kvstart = 327657; kvend = 262120; length = 327680
12/10/28 00:59:21 INFO mapred.MapTask: Finished spill 30
12/10/28 00:59:21 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:59:21 INFO mapred.JobClient:  map 83% reduce 0%
12/10/28 00:59:21 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:59:21 INFO mapred.MapTask: bufstart = 70034163; bufend = 4759655; bufvoid = 99614713
12/10/28 00:59:21 INFO mapred.MapTask: kvstart = 262120; kvend = 196583; length = 327680
12/10/28 00:59:24 INFO mapred.MapTask: Finished spill 31
12/10/28 00:59:24 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:59:24 INFO mapred.JobClient:  map 85% reduce 0%
12/10/28 00:59:24 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:59:24 INFO mapred.MapTask: bufstart = 4759655; bufend = 39709563; bufvoid = 99614720
12/10/28 00:59:24 INFO mapred.MapTask: kvstart = 196583; kvend = 131046; length = 327680
12/10/28 00:59:26 INFO mapred.MapTask: Finished spill 32
12/10/28 00:59:27 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:59:27 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:59:27 INFO mapred.MapTask: bufstart = 39709563; bufend = 74269540; bufvoid = 99614720
12/10/28 00:59:27 INFO mapred.MapTask: kvstart = 131046; kvend = 65509; length = 327680
12/10/28 00:59:27 INFO mapred.JobClient:  map 89% reduce 0%
12/10/28 00:59:29 INFO mapred.MapTask: Finished spill 33
12/10/28 00:59:29 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:59:29 INFO mapred.MapTask: bufstart = 74269540; bufend = 9768351; bufvoid = 99614650
12/10/28 00:59:29 INFO mapred.MapTask: kvstart = 65509; kvend = 327653; length = 327680
12/10/28 00:59:30 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:59:30 INFO mapred.JobClient:  map 93% reduce 0%
12/10/28 00:59:31 INFO mapred.MapTask: Finished spill 34
12/10/28 00:59:32 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:59:32 INFO mapred.MapTask: bufstart = 9768351; bufend = 43640794; bufvoid = 99614720
12/10/28 00:59:32 INFO mapred.MapTask: kvstart = 327653; kvend = 262116; length = 327680
12/10/28 00:59:33 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:59:33 INFO mapred.JobClient:  map 96% reduce 0%
12/10/28 00:59:33 INFO mapred.MapTask: Finished spill 35
12/10/28 00:59:34 INFO mapred.MapTask: Spilling map output: record full = true
12/10/28 00:59:34 INFO mapred.MapTask: bufstart = 43640794; bufend = 77787072; bufvoid = 99614720
12/10/28 00:59:34 INFO mapred.MapTask: kvstart = 262116; kvend = 196579; length = 327680
12/10/28 00:59:36 INFO mapred.MapTask: Finished spill 36
12/10/28 00:59:36 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:59:36 INFO mapred.MapTask: Starting flush of map output
12/10/28 00:59:36 INFO mapred.JobClient:  map 99% reduce 0%
12/10/28 00:59:37 INFO mapred.MapTask: Finished spill 37
12/10/28 00:59:37 INFO mapred.Merger: Merging 38 sorted segments
12/10/28 00:59:37 INFO mapred.Merger: Merging 2 intermediate segments out of a total of 38
12/10/28 00:59:38 INFO mapred.Merger: Merging 10 intermediate segments out of a total of 37
12/10/28 00:59:39 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:59:39 INFO mapred.JobClient:  map 100% reduce 0%
12/10/28 00:59:42 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 00:59:45 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 01:00:21 INFO mapred.Merger: Merging 10 intermediate segments out of a total of 28
12/10/28 01:00:24 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 01:00:27 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 01:00:28 INFO mapred.Merger: Merging 10 intermediate segments out of a total of 19
12/10/28 01:00:30 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 01:00:33 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 01:00:35 INFO mapred.Merger: Down to the last merge-pass, with 10 segments left of total size: 512806627 bytes
12/10/28 01:00:36 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 01:00:39 INFO mapred.Task: Task:attempt_local_0001_m_000000_0 is done. And is in the process of commiting
12/10/28 01:00:39 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 01:00:39 INFO mapred.LocalJobRunner: hdfs://localhost:9000/user/hadoop/webData/data12.out:0+66123962
12/10/28 01:00:39 INFO mapred.Task: Task 'attempt_local_0001_m_000000_0' done.
12/10/28 01:00:39 INFO mapred.Task:  Using ResourceCalculatorPlugin : org.apache.hadoop.util.LinuxResourceCalculatorPlugin@61f533
12/10/28 01:00:39 INFO mapred.LocalJobRunner: 
12/10/28 01:00:39 INFO mapred.Merger: Merging 1 sorted segments
12/10/28 01:00:39 INFO mapred.Merger: Down to the last merge-pass, with 0 segments left of total size: 0 bytes
12/10/28 01:00:39 INFO mapred.LocalJobRunner: 
12/10/28 01:00:39 INFO mapred.Task: Task:attempt_local_0001_r_000000_0 is done. And is in the process of commiting
12/10/28 01:00:39 INFO mapred.LocalJobRunner: 
12/10/28 01:00:39 INFO mapred.Task: Task attempt_local_0001_r_000000_0 is allowed to commit now
12/10/28 01:00:39 INFO mapred.FileOutputCommitter: Saved output of task 'attempt_local_0001_r_000000_0' to hdfs://localhost:9000/user/hadoop/webDataOut
12/10/28 01:00:42 INFO mapred.LocalJobRunner: reduce > reduce
12/10/28 01:00:42 INFO mapred.Task: Task 'attempt_local_0001_r_000000_0' done.
12/10/28 01:00:42 INFO mapred.JobClient:  map 100% reduce 100%
12/10/28 01:00:42 INFO mapred.JobClient: Job complete: job_local_0001
12/10/28 01:00:42 INFO mapred.JobClient: Counters: 22
12/10/28 01:00:42 INFO mapred.JobClient:   File Input Format Counters 
12/10/28 01:00:42 INFO mapred.JobClient:     Bytes Read=66123962
12/10/28 01:00:42 INFO mapred.JobClient:   File Output Format Counters 
12/10/28 01:00:42 INFO mapred.JobClient:     Bytes Written=0
12/10/28 01:00:42 INFO mapred.JobClient:   FileSystemCounters
12/10/28 01:00:42 INFO mapred.JobClient:     FILE_BYTES_READ=1866062016
12/10/28 01:00:42 INFO mapred.JobClient:     HDFS_BYTES_READ=132247924
12/10/28 01:00:42 INFO mapred.JobClient:     FILE_BYTES_WRITTEN=1866142216
12/10/28 01:00:42 INFO mapred.JobClient:   Map-Reduce Framework
12/10/28 01:00:42 INFO mapred.JobClient:     Map output materialized bytes=6
12/10/28 01:00:42 INFO mapred.JobClient:     Map input records=19405
12/10/28 01:00:42 INFO mapred.JobClient:     Reduce shuffle bytes=0
12/10/28 01:00:42 INFO mapred.JobClient:     Spilled Records=7484422
12/10/28 01:00:42 INFO mapred.JobClient:     Map output bytes=1192717378
12/10/28 01:00:42 INFO mapred.JobClient:     Total committed heap usage (bytes)=845938688
12/10/28 01:00:42 INFO mapred.JobClient:     CPU time spent (ms)=0
12/10/28 01:00:42 INFO mapred.JobClient:     Map input bytes=66123962
12/10/28 01:00:42 INFO mapred.JobClient:     SPLIT_RAW_BYTES=105
12/10/28 01:00:42 INFO mapred.JobClient:     Combine input records=13954115
12/10/28 01:00:42 INFO mapred.JobClient:     Reduce input records=0
12/10/28 01:00:42 INFO mapred.JobClient:     Reduce input groups=0
12/10/28 01:00:42 INFO mapred.JobClient:     Combine output records=4111513
12/10/28 01:00:42 INFO mapred.JobClient:     Physical memory (bytes) snapshot=0
12/10/28 01:00:42 INFO mapred.JobClient:     Reduce output records=0
12/10/28 01:00:42 INFO mapred.JobClient:     Virtual memory (bytes) snapshot=0
12/10/28 01:00:42 INFO mapred.JobClient:     Map output records=9842602
SEInvertedIndex Program ends!... 
```

我的实现非常简单，当输入文件很小时它工作得很好。多谢！

这是代码:

```
package com.zhoutall.SEInvertedIndex;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.StringReader;
import java.util.Iterator;
import java.util.StringTokenizer;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.fs.FileSystem;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.SequenceFile;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapred.FileInputFormat;
import org.apache.hadoop.mapred.FileOutputFormat;
import org.apache.hadoop.mapred.JobClient;
import org.apache.hadoop.mapred.JobConf;
import org.apache.hadoop.mapred.MapReduceBase;
import org.apache.hadoop.mapred.Mapper;
import org.apache.hadoop.mapred.OutputCollector;
import org.apache.hadoop.mapred.Reducer;
import org.apache.hadoop.mapred.Reporter;
import org.apache.hadoop.mapred.SequenceFileInputFormat;
import org.apache.hadoop.mapred.SequenceFileOutputFormat;
import org.wltea.analyzer.core.IKSegmenter;
import org.wltea.analyzer.core.Lexeme;

public class SEInvertedIndex {

    public static class InvertedIndexMapper extends MapReduceBase implements
            Mapper<LongWritable, Text, Text, Text> {
        private final static Text One = new Text("1");

        public void map(LongWritable key, Text val,
                OutputCollector<Text, Text> output, Reporter reporter)
                throws IOException {

            String strContent_all=new String(val.getBytes(), 0, val.getLength(), "utf-8");
            if(strContent_all==null || strContent_all=="\n")
                return;
//          System.out.println(strContent_all);
            String strUrl=null;
            String strContent = null;
            String strPart[] = strContent_all.split("   ");
//          if(strPart.length!=2)
//              return;
            strUrl = strPart[0].replace("http", "https");
            strContent = strPart[1];
            //System.out.println(strUrl+"~~"+strContent);

            String webHead = new String(strContent.substring(0, 20) + "...").replace("&nbsp;", " ");
            StringReader strReader = new StringReader(strContent);
            IKSegmenter ik = new IKSegmenter(strReader, true);
            Lexeme lexeme = null;
            while ((lexeme = ik.next()) != null) {
                // System.out.println(lexeme.getLexemeText() + "##" + strUrl + "##" + webHead);
                output.collect(new Text(lexeme.getLexemeText() + "##" + strUrl + "##" + webHead), One);
            }
        }
    }

    public static class InvertedIndexCombiner extends MapReduceBase implements
            Reducer<Text, Text, Text, Text> {

        public void reduce(Text key, Iterator<Text> values,
                OutputCollector<Text, Text> output, Reporter reporter)
                throws IOException {
            int sum = 0;
            while (values.hasNext()) {
                values.next();
                sum += 1;
            }
//          System.out.println(key.toString());
            String fields[] = key.toString().split("##");
            if(fields.length!=3)
                return;
//          System.out.println(fields[1]+"##"+fields[2] + "##" + sum);
            output.collect(new Text(fields[0]), new Text(fields[1] + "##" + fields[2] + "##" + sum));
        }
    }

    public static class InvertedIndexReducer extends MapReduceBase implements
            Reducer<Text, Text, Text, Text> {

        public void reduce(Text key, Iterator<Text> values,
                OutputCollector<Text, Text> output, Reporter reporter)
                throws IOException {

            boolean first = true;
            StringBuilder count_all = new StringBuilder();

            while (values.hasNext()) {
                if (!first)
                    count_all.append(";;");
                first = false;
                count_all.append(values.next().toString());
            }
//          System.out.println(key+"::"+count_all.toString());
            output.collect(key, new Text(count_all.toString()));
        }
    }

    public static void main(String[] args) {
        System.out.println("SEInvertedIndex Program starts!...");
        JobClient client = new JobClient();
        JobConf conf = new JobConf(SEInvertedIndex.class);

        conf.setJobName("SEInvertedIndex");

        conf.setOutputKeyClass(Text.class);
        conf.setOutputValueClass(Text.class);
        //conf.setNumReduceTasks(1);
        FileInputFormat.addInputPath(conf, new Path(args[0]));
        FileOutputFormat.setOutputPath(conf, new Path(args[1]));
        // ////////////////
        Path dstFilePath = new Path(args[1]);
        FileSystem fs = null;
        try {
            fs = dstFilePath.getFileSystem(conf);
            if (fs.exists(dstFilePath))
                fs.delete(dstFilePath, true);
        } catch (IOException e1) {
            e1.printStackTrace();
        }
        // /////////////////
        conf.setMapperClass(InvertedIndexMapper.class);
        conf.setCombinerClass(InvertedIndexCombiner.class);
        conf.setReducerClass(InvertedIndexReducer.class);

        client.setConf(conf);

        try {
            JobClient.runJob(conf);
        } catch (Exception e) {
            e.printStackTrace();
        }
        System.out.println("SEInvertedIndex Program ends!...");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T22:28:29.483

您的组合器实现存在问题。

从柜台你可以看到有问题：

```
Combine input records=13954115
Reduce input records=0
Reduce input groups=0
Combine output records=4111513 
```

此细分不会显示您，但组合器同时运行 map 端和 reduce 端 - 作业跟踪器 Web UI 页面应该为您提供完整的细分。

无论如何，组合器映射端会改变键，如果它再次通过组合器（映射或减少端）被字段长度拒绝！= 3条件：

```
if(fields.length!=3)
    return;
output.collect(new Text(fields[0]), new Text(fields[1] + "##" + fields[2] + "##" + sum)); 
```

因此，在这里您要修改输入键并将字段 [0] 作为键输出（并且该值看起来像您应该作为键输出的值 - 它有 3 个字段 ## 分隔），现在如果此数据通过再次组合器映射端（这是可能的），它将被拒绝。从 map 端组合器输出的任何数据都将被 reduce 端拒绝，因为键现在确实包含 3 个## 分隔字段。

与您的问题无关，您可能还想查看代码的其他部分（例如在映射器中）：

```
String strContent_all=new String(val.getBytes(), 0, val.getLength(), "utf-8");
if(strContent_all==null || strContent_all=="\n")
    return; 
```

这个条件永远不会触发 true 因为 strContent 永远不会为空，你应该`using strContent_all.equals("\n")`而不是`==`测试引用相等性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T22:21:45.017

日志显示写入了大量的 map 记录，但读入了 0（零）个 reduce 记录。

如果我不得不猜测，记录会在您用于拆分组合器中的记录的正则表达式“##”中丢失。“#”在正则表达式中用作注释，因此您可能不会像您认为的那样拆分记录。您的逻辑表明，如果您不拆分为 3 个子字符串，则不会写出任何内容。

尝试使用：

```
String fields[] = key.toString().split("\\#\\#"); 
```

这逃脱了“#”的。

顺便提一句。我尝试将逻辑从 map() 和 reduce() 方法中分解出来，这样我就可以通过 JUnit 测试来实现它。我还尝试使用计数器来指示我何时何地退出这些方法。这些做法非常好，如果我自己这么说的话，它们将有助于解决这样的问题（即使我完全错误地认为代码无法正常工作：）

# php - 部分图片 在 wordpress 导航

> ID：13102392
> 
> 赞同：1
> 
> 时间：2012-10-27T17:21:14.593
> 
> 标签：php, javascript, wordpress, navigation

我可以在 wordpress 中将图像放在导航中吗？我希望其中一些`<li>`带有文本，例如：主页，其中一些是图像，例如：facebook 的`<li>`名为 Facebook 的徽标。

有没有可能用php或JS在wordpress中捕获li的文本内容？

如果导航是静态编写的，很容易捕捉到它，但在 WP 中它是动态加载的，看起来像这样：

```
<?php
        wp_nav_menu(array(
            'theme-location' => 'nav',
            'container' => 'nav'
        ));

        ?> 
```

谢谢 （ ：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T17:42:03.957

最简单也可能是最好的方法是：

将 CSS 类添加到要包含图像的菜单项。您可以从默认的 Worpress Admin 下添加这些 CSS 类`Appeareance -> Menus`

如果您打开该页面，您可以单击要添加课程的菜单项上的向下箭头。然后出现一个输入字段`CSS Classes (optional)`。在此处输入有用的 CSS 类名（如`facebook-image`）

如果您没有看到该选项；检查`Screen options`（菜单页面右上角）下的设置

# asp.net - 特殊字符导致“潜在危险的 Request.Form 值”

> ID：13102393
> 
> 赞同：0
> 
> 时间：2012-10-27T17:21:20.650
> 
> 标签：asp.net

我正在为特定需求构建一个脚注编辑器，我需要一个显示特殊字符的下拉列表，例如匕首 (†)。不确定它是否重要，但下拉列表采用 ajax 模式弹出形式。每当我尝试显示弹出表单时，都会收到错误消息“**从客户端检测到潜在危险的 Request.Form 值 (ctl00$MainContent$ucFootNoteList$DropDownList1="*, †")。** ”

我尝试将 <httpRuntime requestValidationMode="2.0" /> 添加到 Web.config 文件中。

如何在这种情况下显示特殊字符而不会出现此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T17:22:22.253

您可以`validateRequest`在相应 WebForm 的 Page 标头上设置属性以禁用请求验证并允许发布 HTML 字符：

```
<%@ Page validateRequest="false" %> 
```

这也可以为 web.config 中的所有 WebForm 全局完成：

```
<pages validateRequest="false" /> 
```

在[`an article`](http://msdn.microsoft.com/en-us/library/hh882339.aspx)MSDN 上，您可以阅读更多关于 ASP.NET 中的请求验证的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T17:23:51.897

您可以禁用 ValidateRequest 属性，但 [非常重要！] 请使用 AntiXss 之类的库清理您的输入，如下所示：

[http://wpl.codeplex.com/](http://wpl.codeplex.com/)

否则你将容易受到输入攻击（注入、xss 等）

实际上，您的请求“潜在危险”的原因是因为运行时认为有些人正在尝试注入一些 HTML，这就是您不能插入 <bla> 的原因

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-27T17:41:05.017

禁用 ASP.NET 请求验证功能。为此，在网页的 .aspx 文件中，设置此处显示的 Page ValidateRequest 设置。

```
<%@ Page ValidateRequest="false"%> 
```

或者，在 Web 应用程序的 Web.config 文件中，将该部分的 validateRequest 属性设置为 false。

```
<configuration>
    <system.web>
        <pages validateRequest="false" />
        </system.web>
    </configuration> 
```

来源：http: [//msdn.microsoft.com/en-us/library/ee517280.aspx](http://msdn.microsoft.com/en-us/library/ee517280.aspx)

# android - Intents在哪里可以调用

> ID：13102396
> 
> 赞同：0
> 
> 时间：2012-10-27T17:21:34.603
> 
> 标签：android

> **可能重复：**
> [从活动之外的类启动意图](https://stackoverflow.com/questions/3354768/launching-intent-from-a-class-outside-an-activity)

我只是想知道可以从 POJO 类中使用意图，还是必须在扩展 Activity 的类中使用它？如果可以，您将如何实施？

```
public class DataManager{

public DataManager (){}

public void get ()
{
    Intent intent = new Intent (null,Webservice.class);
    intent.putExtra("uri", "http://someuri/service/users/id/21001");
    startActivity (intent);
} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T17:24:21.667

其实`startActivity()`是Activity类的方法。不是任何java类方法。**因此，要在其他pojo 类**中访问此方法，您必须使用`Context`活动。

你可以做类似的事情，

```
public class DataManager{

 Context mContext;

 public DataManager (Context context){
 mContext = context;
 }    

 public void get ()
 {
    Intent intent = new Intent (mContext,Webservice.class);
    intent.putExtra("uri", "http://someuri/service/users/id/21001");
    mContext.startActivity (intent);
 }
} 
```

**更新：**

需要注意的一件事是您的 Intent 代码行，

```
Intent intent = new Intent (null,Webservice.class); 
```

什么是**空**？您必须将 Activity 类的引用作为 Intent 构造函数的第一个参数。只是检查一下。

所以代码行将是，

```
Intent intent = new Intent (mContext,Webservice.class); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T17:25:30.833

是的，您可以`Activity`从任何其他班级拨打电话。在将`Context`您的引用传递`Current Activity`给该类之后。例如...

```
Intent myIntent = new Intent(mContext, newActivity.class);
myIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
mContext.startActivity(myIntent); 
```

# ios6 - iOS 6 故事板：模态视图不会消失

> ID：13102400
> 
> 赞同：8
> 
> 时间：2012-10-27T17:21:55.267
> 
> 标签：ios6, uistoryboard, uistoryboardsegue, xcode-storyboard

我正在使用 Xcode 4.5 和 iOS 6。

我正在构建一个使用故事板的通用应用程序。我有一个视图控制器，在导航栏中有一个按钮。当点击按钮时，我使用 segue 将另一个视图控制器呈现为模态。模态视图控制器在其导航栏中有一个取消和一个保存按钮。在故事板中，模态按钮项链接到新的**Exit**动作上的动作，该动作应该展开到父视图控制器，关闭模态，并调用动作处理程序。

这在 iPhone 上运行良好，但我在 iPad 上看到了问题。在 iPad 上，当模式全屏显示时，一切正常。当我将模式更改为 Page Sheet 或 Form Sheet（在我的情况下这是所需的行为）时，会调用动作处理程序，但不会自动关闭模态视图控制器。

有没有其他人看到过这种行为？你有没有做些什么来修复它？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T20:05:52.783

Thanks for asking about this, since I've just encountered the same issue. I assume that it's a bug, but I have not yet filed it with Apple. In the meantime, the easy workaround is to call `dismissViewController:animated:` in your `unwind:` implementation (that is, in the action method connected to the unwind segue through the Exit icon), thus dimissing the modal view yourself.

My only worry about this solution is that if this *is* a bug and Apple eventually fixes it, will their fix break any code using this workaround? Only time will tell...

**Later Edit**: I have discovered a much nicer workaround. Subclass the parent (container) class of the class you want to unwind to, and implement unwind there instead. For example, in my app, the situation looks like this:

```
UISplitViewController
    UINavigationController
        MasterViewController
    UINavigationController
        DetailViewController ----> modal segue ----> ThirdViewController 
```

The exit / unwind segue from ThirdViewController back to DetailViewController demonstrates the bug - the `unwind:` implementation is called, but the form view is not dismissed. But if I subclass UISplitViewController and implement `unwind:` there, it works fine. (The `unwind:` implementation can be empty; the point is that the form view is dismissed automatically.) So evidently this is an issue having to do with container view controllers, and you can solve it by letting the container handle it.

See my example project, uploaded to [https://github.com/mattneub/Programming-iOS-Book-Examples/tree/master/ch19p561containerViewControllerStoryboard3Bug](https://github.com/mattneub/Programming-iOS-Book-Examples/tree/master/ch19p561containerViewControllerStoryboard3Bug)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-18T16:51:12.997

如果模态视图控制器自动关闭，这很酷，但在 Apple 的示例中[，](http://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/SecondiOSAppTutorial/CreatingAddView/CreatingAddView.html)他们使用模态转换进行 segue，然后在展开（退出）操作中显式调用 dismissViewControllerAnimated:completion: 以关闭它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-11T12:47:32.717

我有同样的问题，所以我所做的是：

```
- (IBAction)closeSalesJournal:(UIStoryboardSegue *)segue
{
    // Unwind Segue
    NSLog(@"Closed Sales journal VC");

    // For iPad, need to dismiss the view controller manually
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        [self dismissViewControllerAnimated:YES completion:nil];
    }
} 
```

那样的话，我肯定会离开 iPhone 的标准方式并用 iPad 强制解雇。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-11T00:10:02.913

我有一个类似的问题。我的模态转场不会放松。在浪费了太多时间之后，我发现了问题所在。是我的错。

`- (BOOL)canPerformUnwindSegueAction:(SEL)action fromViewController:(UIViewController *)fromViewController withSender:(id)sender`我在目标控制器中写得不好。没想到我刚刚写了新的 segue，所以它又回来了`NO`。从本质上讲，我的新 segue 被告知不要被其他代码放松。

# javascript - 如何从Javascript中的列表/数组中提取名称-值对的值？

> ID：13102401
> 
> 赞同：-1
> 
> 时间：2012-10-27T17:21:56.427
> 
> 标签：javascript, arrays, object

我正在尝试从对象中提取 id。

该对象`data.prevPage[0].attributes`返回：

```
[  data-show="first"
 , id="brandlist"
 , data-role="page"
 , data-url="brandlist"
 , data-dom-cache="true"
 , class="ui-page-active ui-page ui-body-c"
 , tabindex="0"
 , style="min-height: 927px; margin-left: 250px; width: 671px;"
 ] 
```

如果我安慰`console.log( data.prevPage[0].attributes.id )`我得到

```
id="brandlist" 
```

**问题：**
我如何获得`brandlist`唯一的？类似的东西`data.prevPage[0].attributes[id]`不起作用。

谢谢

**编辑：** 所以，给出的答案是：

```
 var test = data.prevPage[0].attributes.id,
      el   = $('#'+test) 
```

产生以下错误：

```
 Error: Syntax error, unrecognized expression: #[object Attr] 
```

这告诉我，控制台确实返回 id="brandlist" 而不是 brandlist....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T17:24:30.237

当您在控制台中键入它时，您已经使用了正确的答案。这是：

```
data.prevPage[0].attributes.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T18:03:02.977

好吧，这个问题很愚蠢...

这有效：

```
 data.prevPage.attr('id') 
```

返回

```
 brandlist 
```

（当然有……）

# static - 如何使用静态库中的函数

> ID：13102411
> 
> 赞同：1
> 
> 时间：2012-10-27T17:23:18.400
> 
> 标签：static, libraries, .a

我试图弄清楚如何尽可能“有效”地使用静态库（带有 .a 扩展名）。我研究静态库的原因是因为我想将几个 .h 和 .cpp 文件中的代码放入一个文件中，然后我可以轻松地为不同的项目移动它。

我创建了一个文件geometry.h，其中包含例如

```
double hypotenuse(double, double); 
```

以及带有定义的geometry.cpp 文件。我创建了一个 libgeo.a 文件并在另一个程序（比如 main.cpp）中对其进行了测试。我编译这个程序是这样的：

```
g++ main.cpp -o test -L. -lgeo 
```

我得到错误`'hypotenuse' was not declared in this scope`。对此的明显补救措施是`double hypotenuse(double, double);`在 main.cpp 中添加声明，就像在 geometry.h 中一样，但我为什么要为库中包含的类和函数这样做呢？我可以在 main.cpp 中编写`#include "geometry.h"`，但我必须始终拥有头文件，而我想使用库的原因是拥有一个*包含*有用代码的文件。

我认为拥有一个库的原因是这样您就不需要随身携带一堆不同的文件，但是如果我必须重新声明我需要的所有内容，那么 .a 文件有什么意义呢？有什么我错过的吗？.a 库通常如何使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T17:26:38.257

这就是头文件的用途:)

听起来你*需要*一个“geometry.h”......一旦你的程序发展，它肯定会有不止一个类。

PS：

请丢掉烦人的“匿名争论”：

`double hypotenuse(double, double); // BAD`

`double hypotenuse(double a, double b); // BETTER`

# codeigniter - 卡在 CakePHP 项目中

> ID：13102414
> 
> 赞同：0
> 
> 时间：2012-10-27T17:23:43.577
> 
> 标签：codeigniter, cakephp

我目前正在处理一个由我从未见过的开发人员用 CakePHP 构建的项目，该项目不再从事该项目。我们公司希望项目中有很多不错的新功能，我并不急于创建这些功能，因为我发现 CakePHP 比 Codeigniter 更不合逻辑，我更愿意在 CodeIgniter 中完成我的所有项目。虽然我想到了在 CodeIgniter 中基本重建我们的项目，但这当然意味着时间的投资。

那么基本上什么是最好的方法？该项目相当但不是太大。我可以尝试将 CakePHP 1.3 升级到 2.0，看看它是否更合乎逻辑，并尝试在 CakePHP 中感觉良好。感觉就像 CodeIgniter 与我的大脑更好地同步。我是这个项目的唯一开发人员，没有人关心我使用的是什么框架。

随意参考自己的项目决策和结果。如果您觉得这个问题属于程序员网站，请移动它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:46:30.543

如果你不能把它作为一个 CakePHP 项目，我会尽你所能来看看。虽然我不喜欢 Cake，但将项目从一个框架转换到另一个框架将非常耗时（您本可以在其他地方花费时间，学习使用 Cake 等）。

然而，如果你尝试过使用 Cake，不喜欢它，觉得你在和它打架，等等......并且你已经有时间将项目转换为你选择的框架（因为这真的与 Cake 或 CI 无关），那么我肯定会继续进行转换。如果您将在可预见的将来成为项目的主要维护者，情况尤其如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T19:28:42.710

CakePHP 2 比 1.3 更好、更快、更合乎逻辑。如果您决定迁移，您可以使用控制台来执行此操作`cake upgrade all`。我将它用于一个非常小的项目（蛋糕插件之一），它确实是一个非常好的功能。这将为您完成大部分迁移工作。完整的迁移指南在[这里](http://book.cakephp.org/2.0/en/appendices/2-0-migration-guide.html)。但是由于您还没有编写该项目，因此我不建议这样做，如果不是客户的要求，我也不会开始迁移。学习 1.3 和实现新功能比迁移到 Cake 2 或 Codeigniter 更快。当您使用控制台时，CakePHP 非常棒。

了解 2 个框架比了解 1 个更好。看看[这篇](http://pixelfactory.com.au/development/cakephp-vs-codeigniter-the-big-decision/)有趣的文章。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T17:28:21.770

如果你决定重写，我推荐使用[Yii](http://www.yiiframework.com)。在使用 CodeIgniter 完成了几个项目后，我切换到了 Yii，因为它可以让你更有效率。您应该切换的原因是您可能会发现将内容从 Cake 翻译到 Yii 更容易，并且 gii 工具可以自动生成许多杂乱无章的内容。

# c# - 编码模式 c#

> ID：13102419
> 
> 赞同：4
> 
> 时间：2012-10-27T17:24:10.497
> 
> 标签：c#, refactoring

前几天我在代码审查中遇到了一些看起来像这样的代码。

```
public void DoSomeTasks()
{
  if (CheckSomeState()==true) return;
    DoTaskOne();
  if (CheckSomeState()==true) return;
    DoTaskTwo();
  if (CheckSomeState()==true) return;
    DoTaskThree();
  if (CheckSomeState()==true) return;
    DoTaskFour(); 
} 
```

随着任务数量的增加，代码的圈复杂度越来越高，而且我也觉得不合适。

我想出的解决方案是。

```
private void DoTasksWhile(Func<bool> condition, Action[] tasks)
{
   foreach (var task in tasks)
   {
      if (condition.Invoke()==false) break;
        task.Invoke();
   }
} 
```

像这样使用

```
public void DoSomeTasks()
{
 var tasks = new Action[] { 
  {()=DoTaskOne()},
  {()=DoTaskTwo()},
  {()=DoTaskThree()},
  {()=DoTaskFour()}

  }

  DoTasksWhile(()=>CheckSomeState(), tasks);
} 
```

有人有任何建议可以使代码更具可读性吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T17:32:11.487

我对您的实现进行了一些重构

```
private void DoTasksWhile(Func<bool> predicate, IEnumerable<Action> tasks)
{
    foreach (var task in tasks)
    {
        if (!predicate())
            return;
        task();
    }
} 
```

*   你不需要`Invoke`代表。执行它们
*   不要将布尔值与`true/false`（它没用，您可以错误地分配布尔值）
*   因此你只枚举任务，`IEnumerable`有利于参数

您也可以创建扩展方法

```
public static void DoWhile(this IEnumerable<Action> actions,Func<bool> predicate)
{
    foreach (var action in actions)
    {
        if (!predicate())
            return;
        actions();
    }
} 
```

用法将非常简单：

```
tasks.DoWhile(() => CheckSomeState()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T17:31:45.683

如果您的编排代码将非常复杂，请考虑使用诸如 WF（工作流基础）之类的框架。

否则，您的代码很好，但我不会更改最初的代码，因为它更具可读性。它也更加灵活，因为将来您可以修改这些 IF，即条件可能不会保持相同。

我看不到圈复杂度如何降低或可以降低。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T17:40:14.603

您的解决方案就目前而言是完全足够的（尽管在只有四个步骤的情况下可能有点过分），但是在这种情况下它是否是最好的方法取决于 CheckSomeState 在您的程序上下文中的实际用途：

*   在每个任务之间只调用一次 CheckSomeState 是否重要？
*   有时可能还需要在任务中途调用它吗？

例如，如果 CheckSomeState 实际上正在检查取消标志，那么在长时间运行的任务中可能需要额外的检查。

您可以使用的另一个选项是抛出异常（例如 OperationCancelledException）。这使您的圈复杂度非常低，因为您现在可以简单地执行以下操作：

```
CheckForCancel();
DoTaskOne();
CheckForCancel();
DoTaskTwo(); 
```

（缺点是有些人会认为这是对控制流使用异常，这通常是不受欢迎的）。

我还应该补充一点，目标不应该是降低圈复杂度，而是要有易于理解和维护的代码。圈复杂度是一个有用的指标，但它有时会不必要地惩罚非常简单的代码。

# c# - 如何从 Web 服务获取输入

> ID：13102436
> 
> 赞同：1
> 
> 时间：2012-10-27T17:26:00.687
> 
> 标签：c#, xml, xpath, xpathnavigator

我正在尝试编写一个程序，该程序将从 Web 服务接收输入并选择与订单 ID 一起出现的正确信息。我正在为此使用 xPath，因为它是必需的。例如，如果我在运行程序时在 OrderID 下输入 1，它应该提取该订单的总成本并显示它。我知道我的代码肯定有问题，因为我是新手，所以当我无法控制正在使用的变量时，我不知道如何物理地获取输入。任何帮助将不胜感激，谢谢！

这是我的代码：

```
[WebMethod]
public int GetTotalCostForAnOrder(int OrderID)
{
    XPathNavigator nav;
    XPathDocument docNav;
    XPathNodeIterator NodeIter;

    String rootPath = Server.MapPath("~");
    string strFilename = rootPath + "\\OrderInfoLab3.xml";
    docNav = new XPathDocument(strFilename);

    // Create a navigator to query with XPath.
    nav = docNav.CreateNavigator();
    String searchString = "sum(OrderFeed/Order/Items/Item/TotalCost)";

    // you need to determine the proper XPath statement

    // Select the node and place the results in an iterator.
    NodeIter = nav.Select(searchString);

    while (NodeIter.MoveNext())
    {
        NodeIter.Current.Select("OrderID");
    }

    var totalOrder = nav.Compile(searchString);
    return Convert.ToInt32(nav.Evaluate(totalOrder));
} 
```

这是我的 XML 文件：

```
<Order id="1">
<BillingInformation>
    <Name>Bruce Ganek</Name>
    <Address>99 Main Street</Address>
    <City>Cranston</City>
    <State>RI</State>
    <ZipCode>02910</ZipCode>
</BillingInformation>
<ShippingInformation>
    <Name>Governor Chafee</Name>
    <Address>82 Smith St # 115</Address>
    <City>Providence</City>
    <State>RI</State>
    <ZipCode>02903-1121</ZipCode>
</ShippingInformation>
<Items>
    <Item>
        <PartNo>JETSWEATER</PartNo>
        <Description>N.Y. Jets Sweatshirt</Description>
        <UnitPrice>10.50</UnitPrice>
        <Quantity>2</Quantity>
        <TotalCost>21.00</TotalCost>
        <CustomerOptions>
            <Size>M</Size>
            <Color>Green</Color>
        </CustomerOptions>
    </Item>
    <Item>
        <PartNo>JETSWEATER</PartNo>
        <Description>N.Y. Jets Sweatshirt</Description>
        <UnitPrice>7.50</UnitPrice>
        <Quantity>3</Quantity>
        <TotalCost>22.50</TotalCost>

        <CustomerOptions>
            <Size>S</Size>
            <Color>White</Color>
        </CustomerOptions>
    </Item>
    <Item>
        <PartNo>JETSFLASHLIGHT</PartNo>
        <Description>N.Y. Jets Flashlight</Description>
        <UnitPrice>5.00</UnitPrice>
        <Quantity>1</Quantity>
        <TotalCost>5.00</TotalCost>

        <CustomerOptions/>

    </Item>

</Items>
</Order> 
```

这是我在输出中得到的错误：

```
System.Xml.XPath.XPathException: Expression must evaluate to a node-set.
at System.Xml.XPath.XPathNavigator.Select(XPathExpression expr)
at System.Xml.XPath.XPathNavigator.Select(String xpath)
at Lab3.Service1.GetTotalCostForAnOrder(Int32 OrderID) in C:\ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T17:32:34.607

以下行似乎不正确：

```
String searchString = "sum(OrderFeed/Order/Items/Item/TotalCost)"; 
```

这应该是选择节点的 XPath 表达式，但您的 XML 中没有`OrderFeed`节点 - 根节点是`Order`.

作为节点集合，这应该会带来更好的结果：

```
String searchString = "/Order/Items/Item/TotalCost"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T17:53:18.803

您应该使用 LINQ2XML

```
public decimal GetTotalCostForAnOrder(int OrderID)
{
    XElement doc=XElement.Load("c:\\yourXML.xml");
    decimal totalPrice=doc.DescendantsAndSelf("Order")
    .Where(x=>x.Attribute("id").Value==OrderID)
    .Select(y=>y.Element("Items")).Elements("Item")
    .Select(z=>decimal.Parse(z.Element("TotalCost").Value)).ToList().Sum();
    return totalPrice;
} 
```

# c++ - 如何在 C++ 中压缩字符串？

> ID：13102437
> 
> 赞同：1
> 
> 时间：2012-10-27T17:26:02.887
> 
> 标签：c++, iphone, string, compression

所以我正在制作一个 iPhone 应用程序，部分代码是用 C++ 编写的。我正在加载一个 80mb 的文件，它基本上只是很多文本，但我注意到压缩后的同一个文件只有 17mb，这对于 iPhone 来说更容易打开。如何压缩此文件并在运行时解压缩并读取解压缩的字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T17:29:44.560

您可以使用[zlib](http://www.zlib.net/)或更多 c++ 方法[Boost zlib filters](http://www.boost.org/doc/libs/1_51_0/libs/iostreams/doc/classes/zlib.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T17:29:23.517

你可以使用zlib，

[http://www.zlib.net/zlib_how.html](http://www.zlib.net/zlib_how.html)

这里有一个关于 c++ 示例的线程：

[有哪些简单的 zlib 教程？](https://stackoverflow.com/questions/5362250/what-easy-zlib-tutorials-are-there)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T17:29:24.933

[http://zlib.net/](http://zlib.net/)是一个免费且简单的压缩库

# javascript - 使用 JavaScript 创建用于打印报告的模板

> ID：13102438
> 
> 赞同：1
> 
> 时间：2012-10-27T17:26:08.200
> 
> 标签：javascript, printing, knockout.js

我有一些通过表单进行的查询并发送到 Asp.Net MVC 操作，该操作返回一个包含所有结果的 JSon。

有了这个结果，我设置了一个 KnockoutJs Observable Array，它用数组中的项目填充表格，并处理分页。

我想让这个结果表“可打印”。

我正在尝试使用 JS 来做到这一点。

我打算做的是实现这样的事情：

```
function print(data){
    while(!data.IsEmpty())
        DisplayHeader(); //Gets some HTML for the header from the server
        while(!EndOfPage())
            displayRow(data)
        DisplayFooter()    
} 
```

其中大多数都很容易实现，但我的问题是。

如何检测分页符/页面结束，以便我可以显示页脚并开始一个全新的页面？（假设它将打印到 A4 尺寸）

这是我要完成的工作示例：

这是一个和弦和歌词巴西网站。

看看这个页面： [http ://www.cifraclub.com.br/guns-n-roses/sweet-child-omine/](http://www.cifraclub.com.br/guns-n-roses/sweet-child-omine/)

它是可打印的版本： [http ://www.cifraclub.com.br/guns-n-roses/sweet-child-omine/imprimir.html](http://www.cifraclub.com.br/guns-n-roses/sweet-child-omine/imprimir.html)

检查源代码，它使用一些 JS 读取原始页面，然后创建“可打印”版本。

# facebook-graph-api - 使用带有发送对话框 URL 选项的 Facebook Graph API 向朋友发送私人消息不起作用

> ID：13102440
> 
> 赞同：0
> 
> 时间：2012-10-27T17:26:12.460
> 
> 标签：facebook-graph-api

我知道这个话题已经被提出了很多，并且我已经阅读了所有相关的帖子，但仍然没有得到明确的答案。

简而言之，我的 Windows 商店应用程序使用用户的权限使用他们的 Facebook 帐户登录，然后我让他们所有的朋友看到​​。现在，我希望他能够向他的一个朋友发送消息。从我看到的所有帖子中，我遇到了这个著名的帖子： [how send message facebookfriend through graph api using Accessstoken](https://stackoverflow.com/questions/2943297/how-send-message-facebook-friend-through-graph-api-using-accessstoken) 这正是我想要的，但我知道 Facebook 不允许通过“发送对话框”发送消息' 任何更多.. 那么我的替代方案是什么？我怎样才能给朋友发消息？通过电子邮件？靠墙贴？我需要什么许可？我都试过了，没有成功。。

我没有使用任何 SDK，全部来自我的 windows 商店应用程序；到目前为止，我已经通过图形 API 使用 URL，例如，检索登录用户的朋友数据：

```
string request = string.Format("https://graph.facebook.com/me/friends?fields=first_name,last_name,id,picture.width(180).height(180)&access_token={0}", token); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T13:17:30.337

如评论中所述，您必须确保您拥有有效的重定向 URL。没有这个，发送操作将不起作用。

# c++ - 通过指针用自定义类填充向量 - 构造函数的问题

> ID：13102445
> 
> 赞同：0
> 
> 时间：2012-10-27T17:27:26.960
> 
> 标签：c++, vector, constructor, lambda, iterator

我感兴趣的是：

*   具有指向用户定义类型/类的指针的 std::vector
*   以最快的方式填充这个向量

我想解决这个问题：

*   while + 迭代器（非 C++11 解决方案）
*   for_each 迭代 + lambda（c++11 解决方案）

现在，在阅读了文档后，我正在尝试`iterator`使用`while`

```
#include <iostream>
#include <vector>

class A{
  public:
    A(){}
    ~A(){}
  private:
    int n;
    double d;
    float f;
    std::string s;
};

int main(){
  std::vector<A*> v(100); // fixed *A to A*
  std::vector<A*>::iterator iter = v.begin(); // fixed *A to A*
  while( iter != v.end() )
  {
    *iter = new A(); // iter = A(); by the way this does not works either // now fixed using new
    ++iter;
  }
  return(0);
} 
```

我知道这是微不足道的，但对我来说不是，在我的理解中 iter 它是一个指针，需要间接指向它在向量中指向的实际值；显然，这个概念不能这样工作。

使用 lambda 和 for_each 我只是不知道如何为自定义定义的类使用构造函数，因为文档只讨论泛型方法和函数，并且似乎我不能使用构造函数。

我如何使用迭代器和 lambdas 构建对象？

此外，当我需要在整个地方执行相同的操作时，有一种更快的方法来循环整个向量，而无需使用带有`while`和`for_each`或 的迭代方法`for`。

我想避免复制构造函数开销，所以我想使用指针保留所有可能的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T17:30:38.060

首先，您应该使用`A*`而不是`*A`在 C++ 中创建指针，其次您不能设置指向在堆栈中创建的实例的指针，`A()`而是应该在堆上创建值或使用堆栈中变量的地址，所以您应该有`*iter = new A()`

# vspackage - 如何从 VS 包启动“新建项目对话框”

> ID：13102451
> 
> 赞同：1
> 
> 时间：2012-10-27T17:28:40.480
> 
> 标签：vspackage

我需要从我的 vspackage 中启动 Visual Studio 新项目对话框。而且我还找不到有关如何执行此操作的信息。所以我的问题是——如何？通常，这个问题不仅与“新项目对话框”有关，而且与任何 VS 对话框有关。
谢谢你的帮助

# java - 我的 java 加密有问题

> ID：13102453
> 
> 赞同：2
> 
> 时间：2012-10-27T17:29:06.807
> 
> 标签：java

嗨，我的加密聊天系统有问题

我正在尝试通过加密通过网络安全地获取加密密钥......聊天服务器发送加密密钥，客户端在加密后将加密发送回服务器，然后使用它加密的密钥对其进行解密。 ..这是卡住的地方，它似乎无法解密双重加密的字符串..看看我的代码..

如果您运行此代码（只需在单独的窗口中运行服务器和客户端，它将起作用）并首先单击服务器窗口上的 SYNC（我还没有让它双向工作）

然后在客户端窗口同步....阅读命令行你会看到我的问题！

我得到的主要错误是这个

> **鉴于最终块没有正确填充**任何帮助？

我只需要用填充解决解密问题吗？如何在加密/解密中不添加填充（加密类位于底部）

**SwingChatServer.java**

```
 import java.awt.*;
import java.net.*;              
import java.awt.event.*;   
import javax.swing.*;     
import javax.swing.event.*;
import java.io.*;
import javax.crypto.*;
import javax.crypto.spec.*;
import java.security.spec.*;
import java.util.UUID;
import chat.*;
public class SwingChatServer extends SwingChatGUI
{
PrintWriter out;
BufferedReader in;
BufferedReader stdin;
String inputLine, outputLine, collect;
public ButtonHandler bHandler = new ButtonHandler();
public ButtonHandler bH = new ButtonHandler();
public String rgk;
public String stk;
public String lls;
public int sen;   
public SwingChatServer (String title)
{
  super (title);
  bHandler = new ButtonHandler ();
  sendButton.addActionListener (bHandler);
  synco.addActionListener (bH);
  keymaker();
}
private class ButtonHandler implements ActionListener
{
  public void actionPerformed (ActionEvent event)
  {

  if(event.getSource()==sendButton)
  {
   outputLine = txArea.getText ();
   System.out.println ("Server > " + outputLine);
try {

    DesEncrypter encrypter = new DesEncrypter(rgk);
    String encrypted = encrypter.encrypt(outputLine);
System.out.println("" + encrypted);
out.println (encrypted);

} catch (Exception e) {
   //out.println (outputLine);
}
  }
  if(event.getSource()==synco)
  {
   System.out.println("YOUR PARTNER WISHES TO MAKE THIS A PRIVATE MATTER, CLICK SYNC TO ENCRYPT ALL MESSAGES");
   stk = rgk;
   System.out.println("this is the key which will encrypt the new key ---> " + stk);
   keymaker();
   System.out.println("this is the key which will be encrypted ---> " + rgk);
  try {
   DesEncrypter encrypter = new DesEncrypter(stk);
           String encrypted = encrypter.encrypt(rgk);
   System.out.println("this is how the key looks encrypted ---> " + encrypted);
   out.println (encrypted);
   out.println("test");
   sen = 1;
  } catch (Exception e) {
   System.out.println("error");
  }

  }

         }
}

public void run () throws IOException
{
  ServerSocket serverSocket = null;

  try
            {
                 serverSocket = new ServerSocket (4444);
            }
            catch (IOException e)
            {
                 System.err.println ("Could not listen on port: 4444.");
                 System.exit (1);
            }
            Socket clientSocket = null;
            try
            {
                 clientSocket = serverSocket.accept ();
            }
            catch (IOException e)
            {
                 System.err.println ("Accept failed.");
                 System.exit(1);
            }
         out = new PrintWriter (clientSocket.getOutputStream (), true);
         in = new BufferedReader (new InputStreamReader (clientSocket.getInputStream ()));
         //stdin = new BufferedReader (new InputStreamReader (System.in));
            out.println ("Welcome to the Chat Server\n");
            while ((inputLine = in.readLine ()) != null)
            {

  lls = inputLine;
  if (sen == 1)
  {
  System.out.println("this should be the encrypted, encryption ---> " + lls);

  try {
   System.out.println("test..1..." + inputLine + " and now for stk " + stk);  
   DesEncrypter encrypters = new DesEncrypter(stk);
   System.out.println("peeka BOO");
   String decrypteds = encrypters.decrypt(inputLine);
   System.out.println(decrypteds);
   //sen = 0;
   //stk = null;
   } catch (Exception e) {
    System.out.println(e.getMessage()); 
   }
  } else {

  System.out.println ("Server < " + inputLine);
try {
   DesEncrypter encrypter = new DesEncrypter(rgk);

   String decrypted = encrypter.decrypt(inputLine);
   System.out.println("" + decrypted);
   rxArea.setText (decrypted);
   } catch (Exception e) {
   }
  collect = (collect +" \n"+ inputLine);
                 rxArea.setText (collect);

            }
}
            out.close();
            in.close();
            clientSocket.close();
            serverSocket.close();
    }
    public static void main(String[] args) //throws IOException
    {

  SwingChatServer f = new SwingChatServer ("Chat Server Program");

  f.pack ();
  f.setVisible(true);
  try
  {
   f.run ();
  }
  catch (IOException e)
  {
   System.err.println("Couldn't get I/O for the connection.");
   System.exit(1);
  }
    }
public void keymaker()
{

String uuid = UUID.randomUUID().toString();
rgk = uuid;
}
} 
```

**SwingChatClient.java**

```
import java.awt.*;
import java.net.*;              
import java.awt.event.*;   
import javax.swing.*;     
import javax.swing.event.*;
import java.io.*;
import javax.crypto.*;
import javax.crypto.spec.*;
import java.security.spec.*;
import java.util.UUID;
import chat.*;
public class SwingChatClient extends SwingChatGUI
{
         static Socket socket = null;
         static PrintWriter out = null;
         static BufferedReader in = null;
         public ButtonHandler bHandler, bH;
public String rgk;
public String stk;
public String lls;
public int sen;

public SwingChatClient (String title)
{
  super (title);
  bHandler = new ButtonHandler();
  bH = new ButtonHandler();
  sendButton.addActionListener( bHandler );
  synco.addActionListener( bH );
  keymaker();
}
private class ButtonHandler implements ActionListener
{
  public void actionPerformed (ActionEvent event)
  {
  if (event.getSource()==sendButton)
  {
            String outputLine;
          outputLine = txArea.getText ();
          System.out.println ("Client > " + outputLine);
   out.println (outputLine);
  }
  if (event.getSource()==synco)
  {
   System.out.println("YOUR PARTNER WISHES TO MAKE THIS A PRIVATE MATTER, CLICK SYNC TO ENCRYPT ALL MESSAGES");
   stk = rgk;
   System.out.println("this is the key which will encrypt the new key " + stk);

  try {
   DesEncrypter encrypter = new DesEncrypter(stk);
           String encrypted = encrypter.encrypt(lls);
   System.out.println("" + encrypted);
   out.println (encrypted);
   sen = 1;
  } catch (Exception e) {
   System.out.println("error");
  }
  }
  }
}
public void run () throws IOException
{
  try
  {
   socket = new Socket ("localhost", 4444);
   out = new PrintWriter (socket.getOutputStream (), true);
   in = new BufferedReader (new InputStreamReader (socket.getInputStream ()));
  }
  catch (UnknownHostException e)
  {
   System.err.println ("Don't know about host: .");
   System.exit(1);
  }
  catch (IOException e)
  {
   System.err.println ("Couldn't get I/O for the connection to: .");
   System.exit (1);
  }
  String fromServer;
  while ((fromServer = in.readLine ()) != null)
  {
   System.out.println ("this should be encrypted " + fromServer);
   lls = fromServer;

   if (sen == 1)
   {

   try {
    DesEncrypter encrypter = new DesEncrypter(stk);
    String decrypted = encrypter.decrypt(fromServer);
    rgk = decrypted;
    sen = 0;
    stk = null;
    System.out.println("hello???");
   } catch (Exception e) {
   }

   } else {
   try {
   DesEncrypter encrypter = new DesEncrypter(rgk);

   String decrypted = encrypter.decrypt(fromServer);
   System.out.println("hmm..." + decrypted);
   rxArea.setText (decrypted);
   } catch (Exception e) {
   }
   if (fromServer.equals ("Bye.")) break;
  }
}
  out.close();
  in.close();
  socket.close();
}
public static void main(String[] args)
{
   SwingChatClient f = new SwingChatClient ("Chat Client Program");

  f.pack ();
  f.setVisible(true);
  try
  {
   f.run ();
  }
  catch (IOException e)
  {
   System.err.println("Couldn't get I/O for the connection to:");
   System.exit(1);
  }
}
public void keymaker()
{

String uuid = UUID.randomUUID().toString();
rgk = uuid;
}
} 
```

**SwingChatGUI.java**

```
import java.awt.*;               
import java.awt.event.*;   
import javax.swing.*;     
import javax.swing.event.*;
public class SwingChatGUI extends JFrame
{
public JButton sendButton, synco;
public JTextArea txArea, rxArea;

  public Container container;

public JPanel n1, s1;

public SwingChatGUI (String title)
{
  super (title);

            container = getContentPane();                       
            container.setLayout( new FlowLayout() );

  txArea = new JTextArea (6, 40);

  rxArea = new JTextArea (6, 40);

  sendButton = new JButton ("Send");
  synco = new JButton ("sync");

  container.add (rxArea);
  container.add (txArea);
  container.add (sendButton);
  container.add (synco);
}

public static void main (String[] args)
{
  Frame f = new SwingChatGUI ("Chat Program");
  f.pack ();
  f.setVisible(true);
}
} 
```

***这是现在的包聊天。********

**DesEncrypter.java**

```
package chat;
import java.security.spec.AlgorithmParameterSpec;
import java.security.spec.KeySpec;
import javax.crypto.Cipher;
import javax.crypto.SecretKey;
import javax.crypto.SecretKeyFactory;
import javax.crypto.spec.PBEKeySpec;
import javax.crypto.spec.PBEParameterSpec;
import sun.misc.BASE64Decoder;
import sun.misc.BASE64Encoder;
public class DesEncrypter {
  Cipher ecipher;
  Cipher dcipher;
  byte[] salt = { (byte) 0xA9, (byte) 0x9B, (byte) 0xC8, (byte) 0x32, (byte) 0x56, (byte) 0x35,
          (byte) 0xE3, (byte) 0x03 };
  public DesEncrypter(String passPhrase) throws Exception {
    int iterationCount = 2;
    KeySpec keySpec = new PBEKeySpec(passPhrase.toCharArray(), salt, iterationCount);
    SecretKey key = SecretKeyFactory.getInstance("PBEWithMD5AndDES").generateSecret(keySpec);
    ecipher = Cipher.getInstance(key.getAlgorithm());
    dcipher = Cipher.getInstance(key.getAlgorithm());
    AlgorithmParameterSpec paramSpec = new PBEParameterSpec(salt, iterationCount);
    ecipher.init(Cipher.ENCRYPT_MODE, key, paramSpec);
    dcipher.init(Cipher.DECRYPT_MODE, key, paramSpec);
  }
  public String encrypt(String str) throws Exception {
    return new BASE64Encoder().encode(ecipher.doFinal(str.getBytes()));
  }
  public String decrypt(String str) throws Exception {
    return new String(dcipher.doFinal(new BASE64Decoder().decodeBuffer(str)));
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:14:21.717

只是让每个人都知道问题是发送字符串，您不能将加密数据转换为字符串，它必须作为字节发送......所以如果有人使用代码发送加密数据并将其作为字节数组接收

# php - 究竟如何在 php 中实现 Blowfish

> ID：13102463
> 
> 赞同：0
> 
> 时间：2012-10-27T17:29:55.760
> 
> 标签：php, encryption, blowfish

我四处搜索，但找不到一个很好的资源来介绍整个 Blowfish 的实现过程。

我使用的是 5.3.8，所以我知道我可以使用 crypt() 函数，并且我需要向它传递一个盐，形式为

$2[x,y,a]$[base 2 log of rounds]$[some string]

但是我在某处读到，您每次都需要唯一地生成盐。这是否意味着您必须将盐存储在数据库中？如果有人窃取了您的数据库，您与使用 shaX 的情况不同吗？所有这些到底是如何工作的。

还

我一直在阅读 Blowfish 也用于解密密码。我理解它只是一种散列算法，您可以在其中加密两个字符串，然后检查它们是否匹配。您如何以及为什么要使用可以解密的算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T17:35:41.890

Salt 可以保护您免受彩虹表攻击，因此可以将 salt 存储在同一个数据库中。

本质上，彩虹表是一个包含数百万个预先计算的哈希值的巨大表。因此，如果密码是“some_pass”并且散列是“ABC123”，攻击者会在他的彩虹表中查看“ABC123”，他会看到“some_pass”正在生成这个散列。

如果你使用 salt，攻击者将拥有 hash 和 salt，但这个彩虹表无法工作。彩虹表包含通用密码和/或 1-6 个（或更多）字符的所有组合。所以如果你散列'some_pass_ **salt_** _123123123123'，你可以看到攻击者不会有彩虹表的运气。

至于实现自己的 Blowfish，我希望这是为了学习（家庭作业？）。否则，实现自己的安全算法几乎总是一个坏主意，因为你不是领域专家，你会错过一些晦涩的细节。

请注意，您可能还想验证调用 crypt() 时实际使用的加密算法。MD5 不再安全，它可以用一个好的 GPU 来破解（没有错字，你可以使用你的显卡来破解哈希）。SHA-1 已被破坏，但计算上很难做到（军方可以做到）；所以不推荐使用 SHA-1 系列。瞄准 SHA-2 系列。

# wordpress - Wordpress 迭代帖子，但不会在配置的限制处停止

> ID：13102467
> 
> 赞同：0
> 
> 时间：2012-10-27T17:30:27.913
> 
> 标签：wordpress

嗨，我的模板有问题，没有出现分页（我使用插件 wp_pagenavi），并且 wp 没有在首页显示我博客的所有帖子。

这是我的代码

```
 <?php if (have_posts()) : while (have_posts()) : the_post(); ?>
 ...
 <?php the_content(); ?>
 ...
 <?php endwhile; ?>
 ...
 <?php wp_pagenavi(); ?>
 <?php endif; ?> 
```

# facebook - Facebook FQL 查询返回空结果

> ID：13102468
> 
> 赞同：0
> 
> 时间：2012-10-27T17:30:29.167
> 
> 标签：facebook, facebook-graph-api, permissions, facebook-fql

我正在尝试在 FB-FQL 上执行以下查询：

```
SELECT id, tagged_uids, type, coords FROM location_post WHERE distance(latitude, longitude, '37.785834', '-122.406417') < 1000 
```

除了距离参数似乎返回相当随意的结果这一事实之外，此查询仅在 Graph-explorer 中有效。当我从我的应用程序（iOS）提交它时，我得到的只是一个空数组。

我的怀疑是我缺少一些权限-但我不知道是哪个（并且向用户请求所有权限似乎有点太多了:)

我请求的许可是：

```
@"user_photos",
@"user_videos",
@"read_stream",
@"status_update",
@"publish_stream",
@"publish_checkins",
@"user_checkins",
@"friends_checkins",
@"friends_photos",
@"email",
@"user_location",
@"friends_location" 
```

有任何想法吗？

[编辑解决]

有时阅读文档会有所帮助:)

缺少的权限是 «user_status» 和 «friends_status»

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T17:48:24.730

如编辑中所述，缺少的权限是«user_status»和«friends_status»

# iphone - 在视图控制器之间共享对象实例

> ID：13102486
> 
> 赞同：0
> 
> 时间：2012-10-27T17:33:31.940
> 
> 标签：iphone, xcode, uinavigationcontroller, nsobject

好的，所以我有一个包含以下文件的小程序；
- HomeViewController (.h .m .xib)
- DataViewController (.h .m .xib)
- AppDelegate (.h .m)
- Person (.h .m) [OBJECT]
+ 支持文件等...

假设我通过 HomeViewController 中的文本框和其他输入获取用户输入并将它们设置为 Person 实例的属性（年龄、等级等...），我如何从 DataViewController 访问它们（相同实例）以显示它们?

这是来自 HomeViewController.h 和 .m .h的代码片段

```
@interface HomeViewController : UIViewController {

    IBOutlet UIButton *done;

    BOOL standardRes;
}

@property (nonatomic) int newAge;
@property (nonatomic) int newGrade;

-(IBAction)doneButtonPressed;

@end 
```

.m

```
@implementation HomeViewController
@synthesize newAge, newGrade;

-(IBAction)doneButtonPressed{
    Person *user = [[Person alloc]init]; //Creating an instance of Person called user
    user.age = newAge; //Do I even need this if I use setters and getters in person.m?
    user.grade = newGrade; //Do I even need this if I use setters and getters in person.m?
    NSLog(@"Age: %i, Grade: %i", user.age, user.grade); //Testing with NSLog

    newAge = 175;
    [user setAge:(int)newAge]; //Calling setter method for property 'age' in Person.m

    DataViewController *vc = [[DataViewController alloc]init];
    [self.navigationController pushViewController:vc animated:YES];
} 
```

这里有一点 Person.h 和 .m

```
@interface Person : NSObject {

}

@property (nonatomic, getter = age, setter = setAge:) int age;
@property (nonatomic) int grade;

@end 
```

```
@implementation Person
@synthesize age, grade;

-(void)setAge: (int) newAge {
    age = newAge;
}

-(int)age {
    return age;
}

@end 
```

注意：
- 使用导航控制器
- iOS 6
- xCode 4.5.1
+ 如果您需要更多信息，请告诉我！:)

PS 我对这些东西有点陌生，所以这可能是一个愚蠢的问题；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T17:39:19.347

代替

```
DataViewController *vc = [[DataViewController alloc]init]; 
```

创建您自己的初始化程序，并传入一个 Person 对象。IE

**数据视图控制器.h**

```
- (id)initWithPerson:(Person*)person;

// Need a way to store it, either through a property
@property (nonatomic, strong) Person* person; 
```

**数据视图控制器.m**

```
// Or you can store it as an instance variable, via Class Extension
@interface DataViewController() {
    Person* m_person;
}
@end

// Either way you store it, do it here
-(id)initWithPerson:(Person*)person {
    self = [super init];
    if (self) {
        self.person = person;
        // OR
        m_person = person;
    }
    return self;
} 
```

**主视图控制器.m**

```
-(IBAction)doneButtonPressed {
    Person *user = [[Person alloc]init]; //Creating an instance of Person called user
    user.age = newAge; //Do I even need this if I use setters and getters in person.m?
    user.grade = newGrade; //Do I even need this if I use setters and getters in person.m?
    NSLog(@"Age: %i, Grade: %i", user.age, user.grade); //Testing with NSLog

    newAge = 175;
    [user setAge:(int)newAge]; //Calling setter method for property 'age' in Person.m

    DataViewController *vc = [[DataViewController alloc]initWithPerson:user];
    [self.navigationController pushViewController:vc animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T17:58:58.430

我可以想到几种方法来做到这一点。

1- 在 HomeViewController 中创建一个包含 Person 对象的容器或某种类型的列表然后您可以在 DataViewController 中调用此列表并使用 get() 方法来获取您想要的人

2-如果您的应用程序中只需要一个 Person （如果您在应用程序中需要多个 person 对象，这将不起作用）您可以将 person 设为单例，然后每次尝试在程序中创建 Person 对象时，它都会首先检查如果这个对象的一个​​实例已经存在，如果一个不存在，它将返回一个新实例，但如果一个人对象已经存在，它只会返回现有的人。

[这](http://en.wikipedia.org/wiki/Singleton_pattern)是单例模式的解释和示例代码

# php - 将多个变量传递到 url 中的另一个页面

> ID：13102489
> 
> 赞同：47
> 
> 时间：2012-10-27T17:33:53.807
> 
> 标签：php, url, session, variables

我正在使用这样的会话将变量传递到 url 中的另一个页面，但似乎我无法将另一个变量连接到同一个 url 并在下一页成功检索它

**第 1 页**

```
session_start();
$event_id = $_SESSION['event_id'];
echo $event_id;

$url = "http://localhost/main.php?email=" . $email_address . $event_id; 
```

**第2页**

```
if (isset($_GET['event_id'])) {
$event_id = $_GET['event_id'];}
echo $event_id; 
```

`echo $event_id``Undefined variable`在第 2 页上显示错误，但如果我`event_id`在`$url`这里只使用类似的

```
 $url = "http://localhost/main.php?event_id=" . $event_id; 
```

这很好用，但我需要能够在 url 中使用这两个变量，以便第 2 页可以检索到它们。

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-10-27T17:36:33.637

使用 & 符号`&`将变量粘合在一起：

```
$url = "http://localhost/main.php?email=$email_address&event_id=$event_id";
//                               ^ start of vars      ^next var 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-10-27T17:39:14.870

## 简短的回答：

这是您正在尝试做的，但它会带来一些安全和编码问题，所以不要这样做。

```
$url = "http://localhost/main.php?email=" . $email_address . "&eventid=" . $event_id; 
```

## 长答案：

查询字符串中的所有变量都需要进行 urlencoded 以确保正确传输。你不应该在 url 中传递用户的个人信息，因为 url 非常容易泄漏。网址最终出现在日志文件、浏览历史记录、引用标题等中。这个列表还在继续。

至于正确的 url 编码，可以使用[`urlencode()`](http://php.net/manual/en/function.urlencode.php)或来实现[`http_build_query()`](http://php.net/manual/en/function.http-build-query.php)。这些中的任何一个都应该起作用：

```
$url = "http://localhost/main.php?email=" . urlencode($email_address) . "&eventid=" . urlencode($event_id); 
```

或者

```
$vars = array('email' => $email_address, 'event_id' => $event_id);
$querystring = http_build_query($vars);
$url = "http://localhost/main.php?" . $querystring; 
```

此外，如果`$event_id`在您的会话中，您实际上不需要传递它以便从不同的页面访问它。只需致电[`session_start()`](http://php.net/manual/en/function.session-start.php)，它应该可用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-27T17:47:45.417

您的第一个变量声明必须以`?`while 开头，任何其他变量必须与 a 连接`&`

*   单变量 URL

    [http://www.example.com/page?var=foo](http://www.example.com/page?var=foo)

*   多变量 URL

    [http://www.example.com/page?var=foo&var2=bar](http://www.example.com/page?var=foo&var2=bar)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-20T07:10:32.190

很简单，但另一个说你不要通过 url 栏传递会话变量 1.你不需要，因为当你放入头文件时，会话是从头文件传递到整个网站的 2.安全风险
这是第一页代码

`$url = "[http://localhost/main.php?email=](http://localhost/main.php?email=)" . urlencode($email_address) . "&eventid=" . urlencode($event_id);`

从 url 栏中获取变量时的第二页是：

`if(isset($_GET['email']) && !empty($_GET['email']) AND isset($_GET['eventid']) && !empty($_GET['eventid'])){ ////do whatever here }`

现在，如果您想以正确的方式使用您创建的会话，请忽略我上面的代码并在第二页上调用会话变量，例如在第一页上创建一个会话，例如：

```
 $_SESSION['WEB_SES'] = $email_address . "^" . $event_id; 
```

很明显，您已经在上面的代码中为会话变量分配了值，您可以随意调用会话名称我只是使用了示例 web_ses，第二页您需要做的就是启动会话并查看是否会话在那里并检查变量并对它们做任何事情，例如：

```
 session_start();
 if (isset($_SESSION['WEB_SES'])){
 $Array = explode("^", $_SESSION['WEB_SES']);
 $email = $Array[0];
 $event_id = $Array[1]
 echo "$email";
 echo "$event_id";
 } 
```

就像我之前所说的，会话的好处是它们可以在整个网站上运行，如果将这种类型的代码放在头文件中，在所有加载的页面上都会被调用，那么您可以随时随地简单地使用该变量。希望这可以帮助 ：）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-21T11:48:53.567

```
<a href="deleteshare.php?did=<?php echo "$rowc[id]"; ?>&uid=<?php echo "$id";?>">DELETE</a> 
```

将多个变量从一页传递到另一页

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-27T17:36:25.067

您正在检查`isset($_GET['event_id']`，但您没有在超链接中设置 get 变量，您只是添加`email`

`http://localhost/main.php?email=" . $email_address . $event_id`

并在您的链接中添加另一个 GET 变量

```
$url = "http://localhost/main.php?email=$email_address&event_id=$event_id"; 
```

`"`如果你使用引号，你没有用来连接你的字符串

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-27T17:40:18.157

使用 & 为此。使用 & 您可以放置​​任意数量的变量！

```
$url = "http://localhost/main.php?event_id=".$event_id."&email=".$email; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-04-29T14:37:29.410

来自 php.net

警告超全局变量`$_GET`和`$_REQUEST`已经解码。`urldecode()`在元素上使用`$_GET`or`$_REQUEST`可能会产生意外和危险的结果。

链接： http: [//php.net/manual/en/function.urldecode.php](http://php.net/manual/en/function.urldecode.php)

当心。

# javascript - 网页在移动/安卓设备的java脚本重定向上一遍又一遍地加载

> ID：13102490
> 
> 赞同：0
> 
> 时间：2012-10-27T17:34:11.363
> 
> 标签：javascript, redirect, infinite-loop

嗨，当使用 Ipad、iPhone、Android 等移动设备打开时，我试图将我的主页[www.eco-fireplaces.co.uk](http://www.eco-fireplaces.co.uk)重定向到不同的网页。我已经设法使用简洁的 java 脚本实现了这一点在我的主页上（见下面的脚本）

```
<script language=javascript>
if((navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPod/i)) ||(navigator.userAgent.match(/iPad/i)) || (navigator.userAgent.match(/Android/i)) || (navigator.userAgent.match(/Blackberry/i)))
{
location.replace("http://www.eco-fireplaces.co.uk/mob.html");
}
</script> 
```

但是当打开替代网页时，它只会一遍又一遍地无限重新加载页面？

我曾尝试使用 .htaccess 来执行此操作，但只是不断收到“页面有太多服务器重定向”错误并且无法正常工作。

如果有人可以查看 java 脚本并查看我是否做错了什么，我将不胜感激。

谢谢安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T17:39:41.107

您的脚本也在`http://www.eco-fireplaces.co.uk/mob.html`页面中，因此当它在移动浏览器中打开时，会一次又一次地触发重定向。

相关：随着越来越多不同种类的设备出现，“桌面”和“移动”版本之间的简单区别并没有多大意义。您可能想改用[响应式设计：](https://en.wikipedia.org/wiki/Responsive_web_design)

> 响应式网页设计（通常缩写为 RWD）是一种网页设计方法，在这种方法中，网站经过精心设计，可在各种设备上提供最佳的查看体验——轻松阅读和导航，只需最少的调整大小、平移和滚动（从台式电脑显示器到手机）。

# sql-server - tsql：删除行为

> ID：13102493
> 
> 赞同：0
> 
> 时间：2012-10-27T17:34:55.633
> 
> 标签：sql-server, tsql

我想删除一个包含标题、子标题和行项目详细信息的订单，然后再用替换子标题、行项目详细信息现在可能是什么来写出相同的订单。当我尝试用更改写回较新版本时，出现 pk 违规错误。经过分析，我发现即使我的 DELETE 语句似乎有效，但在发出它们（例如 x 行受影响）之后——目标表保持不变。因此，这将解释 pk vio 问题。我错过了什么？

这是其中的一种说法：

```
 -- detail level (drop products)
       DELETE dprods FROM [SQLsever].[WIP].[order].DropProducts as dprods
        INNER JOIN #dropprods t on t.OrderId = dprods.OrderId
          AND t.OrderDropId = dprods.OrderDropId
          AND t.DropProdId = dprods.DropProdId; 
```

发出语句后，我仍然在目标表中有所有 200 多行，并且我在 #dropprods 临时表中有 200 多个 ID。为什么？

******** **编辑以更好地定义问题******* *** ** *** ** *** ** *** *** DELETE 语句不是问题。该问题与一组嵌套/命名事务有关。DELETE 语句在一个之下，INSERT 语句在另一个之下。这就是我所拥有的。这显然是错误的。我要做的是确保在我知道我会有一个很好的替代 INSERT 之前我不会提交 DELETE。这是我所做的： *******EDITED T-SQL WITH SAVE TRANSACTION FIX ** ** 这个 TSQL 现在可以工作了。******

 ******```
 -- CHANGED
   BEGIN TRANSACTION
   SAVE TRANSACTION process_orders
    BEGIN TRY
    -- detail level 
    DELETE lprods FROM [SQLServer].[WIP].[order].LiftProducts as lprods
     INNER JOIN #liftprods t on t.OrderId = lprods.OrderId
      AND t.OrderLiftId = lprods.OrderLiftId
      AND t.LiftProdId = lprods.LiftProdId;
           -- the rest of the deletes 
            --NOTE: No commit transaction here; saving it to the end
     END TRY
     BEGIN CATCH
        SELECT 
          ERROR_NUMBER() AS ErrorNumber, 
          ERROR_SEVERITY() AS ErrorSeverity,
          ERROR_MESSAGE() AS ErrorMessage;
         IF @@TRANCOUNT > 0
           ROLLBACK TRANSACTION process_orders;
       END CATCH

       BEGIN TRANSACTION 
        -- CHANGED
        SAVE TRANSACTION process_orders
       BEGIN TRY     
             -- CHANGED
                COMMIT TRANSACTION process_orders;     
       END TRY
       BEGIN CATCH
          SELECT 
            ERROR_NUMBER() AS ErrorNumber, 
            ERROR_SEVERITY() AS ErrorSeverity,
            ERROR_MESSAGE() AS ErrorMessage;
            IF @@TRANCOUNT > 0
              ROLLBACK TRANSACTION process_orders ;
       END CATCH 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:40:38.293

首先，您必须在 ROLLBACK TRANSACTION 之后删除事务名称。不允许回滚内部事务 - 只有最外面的事务可以回滚。

其次，SQL Server 忽略内部事务的提交（例如，锁等到最外面的事务提交后再释放）。所以你只需要一个没有事务名称的 COMMIT TRANSACTION。

如果您需要确保：

*   如果删除成功，则开始插入，否则丢弃更改并
*   如果这些插入成功，您接受更改，否则丢弃所有

如果您在 COMMIT 之前需要更加放心（例如：另一个开发人员在某些 SP 中编写插入代码，插入代码真的很大......等等），您可以使用您的 #liftprods 临时表（其中显然包含删除/插入的键) 并检查键是否与您认为应该插入的项目匹配。如果不是，请发出 RAISERROR('Some message', 16, 1) 这将回滚事务。******

# emacs - Emacs 中的缓冲区本地覆盖次要模式键绑定

> ID：13102494
> 
> 赞同：19
> 
> 时间：2012-10-27T17:35:26.230
> 
> 标签：emacs

我想使用一个次要模式来重新绑定我绝对想要保留的主要模式键。如何重新绑定密钥而不将其从次要模式映射中全局删除？我知道我可以使用`define-key`它，但我想保留其他缓冲区/主要模式的绑定。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-27T18:13:47.873

做起来有点麻烦。您可以执行以下操作：

```
(add-hook '<major-mode>-hook
  (lambda ()
    (let ((oldmap (cdr (assoc '<minor-mode> minor-mode-map-alist)))
          (newmap (make-sparse-keymap)))
      (set-keymap-parent newmap oldmap)
      (define-key newmap [<thekeyIwanttohide>] nil)
      (make-local-variable 'minor-mode-overriding-map-alist)
      (push `(<minor-mode> . ,newmap) minor-mode-overriding-map-alist)))) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-08T09:11:26.493

这是一个处理所有繁琐位的函数。

```
(defun local-set-minor-mode-key (mode key def)
  "Overrides a minor mode keybinding for the local
   buffer, by creating or altering keymaps stored in buffer-local
   `minor-mode-overriding-map-alist'."
  (let* ((oldmap (cdr (assoc mode minor-mode-map-alist)))
         (newmap (or (cdr (assoc mode minor-mode-overriding-map-alist))
                     (let ((map (make-sparse-keymap)))
                       (set-keymap-parent map oldmap)
                       (push `(,mode . ,map) minor-mode-overriding-map-alist) 
                       map))))
    (define-key newmap key def))) 
```

之后你可以做

```
(local-set-minor-mode-key '<minor-mode> (kbd "key-to-hide") nil) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-01T23:41:28.777

就我而言，`company-mode`正在覆盖公司完成菜单显示时的`cider-repl-mode`绑定。完成菜单的键映射是，但没有与之对应的次要模式（用于菜单**未**激活时），因此我无法使用任何现有答案。`M-p``M-n``company-active-map``company-mode`

 **这是我想出的：

```
(add-hook 'cider-repl-mode-hook
          (lambda ()
            (make-local-variable 'company-active-map)
            (setq company-active-map (copy-tree company-active-map))
            (define-key company-active-map (kbd "M-p") nil)
            (define-key company-active-map (kbd "M-n") nil))) 
```**

# java - 如何使用网络摄像头扫描条码？

> ID：13102495
> 
> 赞同：0
> 
> 时间：2012-10-27T17:35:31.747
> 
> 标签：java, android, camera, android-camera

我需要制作一个android应用程序，我需要在其中扫描条形码。但问题是我没有安卓手机并打算使用模拟器。我想知道是否可以使用我的网络摄像头扫描条形码，然后将其输入我的程序以完成这项工作。是否有任何可用的开源库允许我这样做？能够通过相同的方式读取二维码将是一个奖励。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T17:49:25.970

你应该看看[zXing](http://code.google.com/p/zxing/)一个很棒的阅读条形码和二维码的图书馆。它使用 BarcodeScanner 读取 Barcode 并将读取的信息以 Intent 传递回您的应用程序。看看[ScanningViaIntent](http://code.google.com/p/zxing/wiki/ScanningViaIntent)。

关于相机，我自己对 ADV 的体验很糟糕，总是更好的设备。如果您使用 ADV 摄像头，ICS ADV 似乎支持使用 pc 网络摄像头作为设备摄像头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T17:38:07.010

Android 模拟器支持使用您的网络摄像头，请[在此处](http://developer.android.com/tools/devices/emulator.html)查看详细信息。

# java - JScrollPane 不滚动

> ID：13102497
> 
> 赞同：1
> 
> 时间：2012-10-27T17:35:49.297
> 
> 标签：java, user-interface, jframe, jpanel

我正在打印从文本文件扫描到 JPanel 的文本。文本显示出来，但没有向下滚动。有任何想法吗？这是我的代码：

```
rFrame = new JFrame();
rFrame.setBounds(10, 10, 502, 502);
rFrame.getContentPane().setLayout(null);

JPanel pan = new JPanel();
pan.setBackground(Color.WHITE);
pan.setBounds(100, 100, 400, 400);
rFrame.getContentPane().add(pan);
pan.setEnabled(false);

JScrollPane scrollBar=new JScrollPane(pan,JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
                                          JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);  

rFrame.add(scrollBar);

JTextArea area = new JTextArea();
area.setText(printToFrame()); //Function prints from text file
pan.add(area);
rFrame.add(pan);

rFrame.setVisible(true);
rFrame.setLayout(new FlowLayout());
rFrame.getContentPane().add(pan);
rFrame.pack();

ClientWindow window = new ClientWindow();
window.rFrame.setVisible(true); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:10:51.133

它没有向下滚动，因为 的尺寸`JPanel`不大于 的视口`JScrollPane`。`JPanel`您要么必须通过调用来增加尺寸，要么`*Object name*.setPreferredSize(new Dimension(int w, int h))`通过**在**a 中显示文本来以正确的方式进行操作**`JTextArea`**，这是为此目的而制作的组件。

前任：

```
public static void main(String[] args) {
    JTextArea ta = new JTextArea();
    JScrollPane sp = new JScrollPane(ta);

    // disables editing
    ta.setEditable(false);

    // enable line wrap to wrap text around
    ta.setLineWrap(true);

    // words will not be cut off when wrapped around
    ta.setWrapStyleWord(true);

    // displays the text you read in
    ta.append( *text you read in* );
} 
```

Oracle 有一个关于如何使用[JTextAreas](http://docs.oracle.com/javase/tutorial/uiswing/components/textarea.html)的页面，您还可以查看[API](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JTextArea.html)以了解其他使用方法

# serial-port - 如何在 C# 中连接到特定的 RFID usb 设备

> ID：13102501
> 
> 赞同：0
> 
> 时间：2012-10-27T17:36:34.603
> 
> 标签：serial-port, usbserial

我有一个 RFID 设备，它通过 USB（串行端口或 com）连接到 pc 并发送数据如何获取它连接的端口的名称？我怎样才能得到它的数据？（它以十六进制格式发送 16 个字节）

我用 c# 编写了这段代码，但是它不起作用！

```
var sp = new SerialPort(device_names.Last<string>(), 4800);

        try
        {

            sp.Open();

            string received = sp.ReadLine();

            while (received.CompareTo(null) == 0)
            {
                Console.WriteLine("nothing received yet!");
            }

            if (received.CompareTo(null)!=0)
            {
                Console.WriteLine("device connected to: " + device_names.Last<string>()+"reading "+ received);
            }

        }
        catch
        {
            Console.WriteLine("device NOT connected to: " + device_names.Last<string>());

        }

        finally
        {
            sp.Close();
        } 
```

我想检测这个设备连接，然后等待从它接收数据。这是我第一次这样做。我现在很困惑。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T09:10:10.400

您需要知道 RFID 设备何时发送数据。如果您在发送数据之前进行阅读，那么您将不会获得任何数据。如果您想对收到的数据进行处理，请使用 sp.read 而不是 sp.readLine 因为在读取时您需要指定要读取的字节数。

# ruby-on-rails - Rails 3 在 JSON 请求中显示错误

> ID：13102504
> 
> 赞同：0
> 
> 时间：2012-10-27T17:37:28.723
> 
> 标签：ruby-on-rails, json

我试图通过上传文件（文件名、大小）来显示可能发生的错误。我正在使用[适用于 Ruby on Rails 的 Jquery Fiel Upload 的广告改编版本](https://github.com/tors/jquery-fileupload-rails-paperclip-example) 我试图修改此代码截断，但我不能。

```
else
    format.html { render action: "new" }
    format.json { render json: @upload.errors, status: :unprocessable_entity }
end 
```

我有以下验证，我希望 json 在发生错误时写入，所以是这样的：

```
else
    format.html { render action: "new" }
    format.json { render json: @upload.errors, status: :unprocessable_entity, error:"Error!" }
end 
```

（它确实有效）并且我需要一个错误规范，该规范写在验证中：message

我的验证：

```
validates :upload_file_name,  :presence   => true,
                                :format     =>{:with => %r{\.(cel)$}i}

  validates_uniqueness_of :upload_file_name, :message => "File with this name is already in the database"

  validates :upload_file_size,  :inclusion  => {:in =>10.megabytes..20.megabytes}, :message =>"Too big or too small"

  def to_jq_upload
  {
      "name" => read_attribute(:upload_file_name),
      "size" => read_attribute(:upload_file_size),
      "url" => upload.url(:original),
      "delete_url" => upload_path(self),
      "delete_type" => "DELETE" 
  }
  end

end 
```

和我唯一的javascript：

```
<script type="text/javascript" charset="utf-8">
  $(function () {
      // Initialize the jQuery File Upload widget:
      $('#fileupload').fileupload();
      // 
      // Load existing files:
      $.getJSON($('#fileupload').prop('action'), function (files) {
        var fu = $('#fileupload').data('fileupload'), 
          template;
        fu._adjustMaxNumberOfFiles(-files.length);
        console.log(files);
        template = fu._renderDownload(files)
          .appendTo($('#fileupload .files'));
        // Force reflow:
        fu._reflow = fu._transition && template.length &&
          template[0].offsetWidth;
        template.addClass('in');
        $('#loading').remove();
      });

  });
</script 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:12:38.323

我不确定我是否理解您的问题，但是如果您需要将错误消息与`'error'`您的 json 响应中的键相关联，您可以这样做：

```
render json: {error: @json.errors.full_messages}, status: :unprocessable_entity 
```

# c++ - QHash - 热获取随机键和值

> ID：13102506
> 
> 赞同：0
> 
> 时间：2012-10-27T17:37:35.103
> 
> 标签：c++, qt, iterator, random-access, qhash

我想`n`从我的 QHash 中得到一个带有数字的随机对。

现在我这样做：

```
QHash<QString,QString>::iterator iterator = dictionary.begin();
iterator+= n;
question->setText(iterator.key()); 
```

但这似乎很荒谬……必须有正常的方法。你能帮我吗？我已经阅读了 QHash 的整个手册页

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T17:41:32.633

`QHash`不提供随机选择。如果您必须经常执行此操作，则将`keys()`哈希表的 ( 指针) 复制到 a `vector`or`QVector`中，获取其中的随机索引并使用键查找`QHash`.

根据您使用的其他内容`QHash`，您可能希望在某些时候将其转换为对的向量，然后将其用于随机选择。

# javascript - 查询的 NodeList 中的“顺序”有多可靠

> ID：13102517
> 
> 赞同：9
> 
> 时间：2012-10-27T17:38:49.090
> 
> 标签：javascript, html, dom, w3c, specifications

我想知道这个话题很长一段时间。有问题的方法如下：

*   `getElementsByTagName`
*   `getElementsByClassName`
*   `getElementsByName`
*   `querySelectorAll`

据我所知，这些 DOM 方法是唯一能够返回 freeze 或 live 的方法`NodeLists`。对于其中一些方法，顺序由*W3C 规范*定义。例如，[http://www.w3.org](http://www.w3.org)`NodeLists`为返回的内容编写了以下内容`querySelectorAll`

> Document、DocumentFragment 和 Element 接口上的 querySelectorAll() 方法必须返回一个 NodeList，其中包含上下文节点的子树中所有匹配的 Element 节点，按文档顺序排列。如果没有匹配的节点，该方法必须返回一个空的 NodeList。

但是，对于我提到的其他方法，我找不到类似的**明确**规范。我的问题是：

*   *结果是否有定义的顺序（很可能是文档顺序）*？
*   *这些规范有多可靠和跨浏览器实现*？

* * *

绝对清楚：

```
<div>this</div>
<div>is</div>
<div>a demo</div>

// is this always guaranteed to be "<div>is</div>"
document.querySelectorAll('div')[1] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-27T18:09:42.340

是的。所有这些都按文档顺序/树顺序。

*   `getElementsByName`( [DOM Level-2-HTML](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-71555259) ) 返回一个`NodeList`
*   `querySelectorAll`（[选择器 API](http://www.w3.org/TR/selectors-api/#queryselectorall)）返回`NodeList`“按文档顺序”
*   `getElementsByTagName`( [DOM](http://www.w3.org/TR/dom/#dom-document-getelementsbytagname) ) 返回一个`HTMLCollection`
*   `getElementsByClassName`( [DOM](http://www.w3.org/TR/dom/#dom-document-getelementsbyclassname) ) 返回一个`HTMLCollection`

[`HTMLCollection`s](http://www.w3.org/TR/dom/#htmlcollection)和[`NodeList`s](http://www.w3.org/TR/dom/#nodelist)都被指定为

> 元素按[树顺序排序](http://www.w3.org/TR/dom/#concept-tree-order)。

当通过 indizes 访问它们时。

我认为所有浏览器都可靠地实现了这些规范（即使链接的版本可能比某些实现更新），主要是因为树顺序是最合乎逻辑且易于编码的一种。但是，您可能需要注意某些浏览器可能会返回由*不同元素*组成的列表，因为它们的节点匹配不同。`name`在确定一个元素的时候，我会想到一些怪癖。

# c# - LINQ 不在命名空间中

> ID：13102521
> 
> 赞同：3
> 
> 时间：2012-10-27T17:39:20.783
> 
> 标签：c#, visual-studio-2012

我在 Visual Studio 2012 中有一个 Web 项目，我正在通过 ftp 连接使用它。我收到命名空间 System.Data 中不存在 Linq 并且命名空间 System 中不存在 Linq 的错误。Visual Studio 显示错误并且不会给出代码建议，但是，代码在 IIS 服务器上运行良好。

我的 web.config 内容如下。

我已阅读有关此问题的许多问题和文章，但仍然无法找到有效的解决方案。

```
<system.web>
<compilation debug="true" strict="false" explicit="true" urlLinePragmas="true">
  <assemblies>
    <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add assembly="System.Web.Abstractions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add assembly="System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    <add assembly="System.ServiceModel.Web, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add assembly="System.Data.Services.Client, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    <add assembly="System.Data.Services.Design, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    <add assembly="System.Data.Entity, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    <add assembly="System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
    <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    <add assembly="System.Data.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
  </assemblies>
</compilation>
<pages>
  <namespaces>
    <clear/>
    <add namespace="System"/>
    <add namespace="System.Data.Linq"/>
    <add namespace="System.Linq"/>
    <add namespace="System.Xml.Linq"/>
  </namespaces>
</pages> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T17:49:25.363

尝试`System.Data.Linq`在您的项目中手动添加对的引用。这有望解决您的问题。

项目 -> 参考 -> 添加参考 -> System.Data.Linq

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T23:37:42.930

这有点晚了，但为了“回馈”......当我遇到这个问题（VS 2010 通过 IIS 运行网站）时，我不得不将目标框架更改为其他内容，保存更改，然后然后将其改回 v 4.0（我的项目最初是用它构建的）。（右键单击项目 -> 属性页 -> 构建 -> “目标框架”）。这解决了这个问题。不知道如何或为什么。=)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T20:44:46.377

在 Visual Studio 中，检查项目是否针对包含 Linq 的 .NET 框架版本。右键单击该项目，然后查找 Target Framework 选项。如果将其设置为 v2，则 VS 告诉您的所有其他内容都将基于 v2 - 可用程序集、基类库程序集的版本等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-04T09:55:01.167

当我从 VisualStudio 2013 升级到 2015 时，我会遇到这种情况。当项目构建没有结束并在一些警告后停止时，我遇到了这些错误。我解决了这些警告，当我解决最后一个警告时： *无法加载文件或程序集 'Microsoft.ReportViewer.WebForms, Version=11.0.0.0, . . .*

错误： *命名空间系统中不存在 Linq*

得到解决。

# parameters - 在 WebLogic portlet 之间共享参数

> ID：13102524
> 
> 赞同：1
> 
> 时间：2012-10-27T17:39:42.333
> 
> 标签：parameters, portlet, shared, weblogic-10.x

像往常一样，我来找你有一个关于 WebLogic 上的 portlet 我无法解决的问题......

所以.. 我有两个 portlet 在同一个页面上运行。我的 portlet 需要从 url 中获取一个参数（AES 或加密的河豚），对其进行解密，然后将请求发送到具有该值的 WS。哪个。此外，我需要将此值发送到另一个 portlet（登录 portlet），以了解他是否应该跳过某个步骤。所以.. 长话短说，我需要找到一种方法来发送这个值，而不是在 url 中（因为它需要解密并且我无法显示它），但可能在所有 portlet 可见的会话中。一种快速的方法是使用 cookie，但 cookie 很容易被黑客入侵。我尝试使用 APPLICATION_SCOPE，但其他 portlet 看不到它。

设置为

```
session.setAttribute("myval", myval, PortletSession.APPLICATION_SCOPE); 
```

然后在另一个 portlet 中使用

```
session.getAttribute("myval",PortletSession.APPLICATION_SCOPE); 
```

我查看了 APPLICATION_SCOPE 应该如何工作，阅读了共享参数，但找不到真正适合我需要的东西。我有点卡住所以我决定问。也许你们可以帮忙。

[http://portals.apache.org/pluto/portlet-1.0-apidocs/javax/portlet/PortletSession.html](http://portals.apache.org/pluto/portlet-1.0-apidocs/javax/portlet/PortletSession.html)

[https://www.ibm.com/developerworks/mydeveloperworks/blogs/Joey_Bernal/entry/portlet_session_scope_and_sharing?lang=en](https://www.ibm.com/developerworks/mydeveloperworks/blogs/Joey_Bernal/entry/portlet_session_scope_and_sharing?lang=en)

问候 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:01:23.613

我克服了它。似乎我在错误的地方进行了调用，因此该属性没有从我需要的 doView 进入会话。共享参数的答案确实是 APPLICATION_SCOPE。

谢谢！

# java - Java代码设计困境

> ID：13102525
> 
> 赞同：3
> 
> 时间：2012-10-27T17:39:43.093
> 
> 标签：java, spring

我对代码的设计进退两难。

首先，我正在将 VB 转换为 Java 系统。VB程序有一个类模块，它类似于POJO的组合，并为其逻辑访问数据库。我用 getter 和 setter 在 JAVA 中创建了一个类似的类。我的困境是，由于我需要复制 VB 代码的结构（我们被迫这样做），我还需要在我的 JAVA 类中包含查询服务。但是在我们的框架中，只有服务类可以访问查询服务。

我正在考虑将我的 JAVA 类更改为抽象类，并改用 Anonymous 类。

样本：

```
public abstract class MyClass {
     private int a;
     private int b;

     public String calculate1() {
          // do processing for variables a and b
          String sql = "" // build sql here
          List<Map<String, Object>> result = query(sql);
     }

     public String calculate2() {
          // do processing for variables a and b
          String anotherSql = "" // build anotherSql
          List<Map<String, Object>> result = query(anotherSql);
     }

     protected abstract List<Map<String, Object>> query(String sql);

     // getters and setters for a and b
}

public class MyService {
     @Autowired
     private QueryService myQueryService;

     public void execute() {
          MyClass myClass = new MyClass() {
             @Override
             protected List<Map<String, Object>> query(String sql) {
                 return myQueryService.executeQuery(sql);
             }
          };
     }
} 
```

有几点需要考虑：

1.  我的服务是一个单例范围的 bean。
2.  我也喜欢 MyClass 是基于会话的（每个用户 1 个实例）。
3.  由于我不会在我的 Spring 上下文中声明 MyClass，它不能使用依赖注入，也不能使用其他服务。我将在会话中保存该实例，并将仅检索 MyClass 的实例。

也因为这个困境，我不得不使用字符串查询和 JDBC 模板。最初，我们的框架使用 DAO 对象和 Hibernate。如果有人也可以使用DAO解决代码，那就更好了。如果我将使用 DAO 对象，我将不得不将不同的 DAO 对象与它们的 DAO 服务类一起使用。

我不完全确定这是否是一个好的设计。我也不知道这是否可行。我无法在我的环境中运行它。

如果有人能启发我，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:13:14.990

既然`MyClass`没有 的实例就无法运行`QueryService`，那么您只需将查询服务的引用传递给 的构造函数即可`MyClass`：

```
public abstract class MyClass {
    private final QueryService queryService;

    public MyClass (QueryService queryService) {
        this.queryService = queryService;
    }

    protected List<Map<String, Object>> query(String sql) {
        return queryService.executeQuery(sql);
    }
}

public class MyService {
     @Autowired
     private QueryService myQueryService;

     public void execute() {
          MyClass myClass = new MyClass(myQueryService);
     }
} 
```

制作`queryService`实例字段`final`，并拥有这样的构造函数，在代码中清楚地表达了这种依赖关系。

# php - PHP 回显替换变量 - ${variable}

> ID：13102528
> 
> 赞同：-1
> 
> 时间：2012-10-27T17:40:06.383
> 
> 标签：php, echo

> **可能重复：**
> [PHP中字符串中的花括号](https://stackoverflow.com/questions/2596837/curly-braces-in-string-in-php)

我遇到了一些“奇怪”的 PHP 代码，所以不是这样：

```
<?php echo $variable; ?> 
```

我有这个：

```
${variable} 
```

而且我不知道如何将其变为变量：

```
<?php echo number_format($variable, 2, ',', '.') ?> 
```

有任何想法吗？

谢谢。

**编辑：**这是实际代码：

```
<script id="productTemplate" type="text/x-jquery-tmpl">
                <?php echo "Save:"; ?> ${savings} <?php echo "or"; ?> ${savings_percentage} <?php echo "%"; ?>
</script> 
```

这个输出：

```
Save 15 or 3.2302678810608 % 
```

我需要将**number_format**添加到**${savings_percentage}**以便它可以输出：

```
Save 15 or 3.23 % 
```

但不知道如何...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T18:34:08.050

您正在使用一个名为[TMPL](http://api.jquery.com/category/plugins/templates/)的 jquery 插件（现在不支持） 。

您应该通过 javascript 转换您的数据。

```
${savings_percentage.toFixed(2)} 
```

您可以使用本机`.toFixed`方法或使用一些帮助器（例如参见[这个问题](https://stackoverflow.com/questions/10351003/how-to-format-number-the-using-jquery)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T18:12:58.227

这不是 PHP 变量。这是模板引擎变量或类似用 JavaScript 编写的脚本的一部分。

它的外部 PHP 脚本（由 定义`<?php ?>`）。

阅读模板引擎或该脚本手册以获取更多信息。

**无法从 PHP 访问它**，因为这是在服务器将 html 页面发送到浏览器之后由客户端机器上的 JavaScript 处理的。PHP 在服务器上处理，您不能直接在浏览器和 PHP 代码之间传递变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T18:26:17.507

## ${变量} 语法

除非这是在双引号字符串中，否则这与`$variable`

## 双引号字符串

在双引号字符串中，您将使用此语法，例如，否则会误解变量名。

即这里有一些代码回显一个名为的变量`$variable`：

```
$variable = "something";
echo "This is a string with a $variable";
// outputs "This is a string with a something" 
```

这是相同的代码，但在这种情况下，变量后面紧跟字符串“name”：

```
echo "This is a string with a $variablename";
// outputs "This is a string with a " 
```

除了“错误”输出之外，它还会抛出未定义变量错误，因为`$variablename`未定义。

这是相同的示例，使用花括号来明确变量是什么：

```
$variable_name = "something";
echo "This is a string with a ${variable}name";
// outputs "This is a string with somethingname" 
```

## 模板引擎

从您的编辑：

```
<script id="productTemplate" type="text/x-jquery-tmpl">
    <?php echo "Save:"; ?> ${savings} <?php echo "or"; ?> ${savings_percentage} <?php echo "%"; ?>
</script> 
```

这里的变量不在 php 标签中，因此在 php-context 中查找它们的含义是不合逻辑的。它们只是纯文本，并且如脚本标记所示 - 它们旨在与（[已失效](http://api.jquery.com/tmpl/)）[jquery tmpl](http://api.jquery.com/jquery.tmpl/)函数一起使用。

> 我需要将 number_format 添加到 ${savings_percentage} 以便它可以输出：

好吧，修复您没有提出问题的js，以便它这样做:)

# c++ - 如何在 C++ 中使用构造函数为对象重新赋值

> ID：13102534
> 
> 赞同：-1
> 
> 时间：2012-10-27T17:40:50.440
> 
> 标签：c++

我遇到了一个非常有趣的问题...... c++ 中以下代码段的类声明可能是什么......

```
int main(){    
    Point f(3,4);        //class Point    
    f(4);    
} 
```

对象声明可以通过声明构造函数 f(int, int) 来完成。但是我们如何使用构造函数声明来为对象赋值呢？即使定义另一个构造函数 f(int)，这也不起作用……因为构造函数仅在对象声明期间被调用。请提出一种方法来做到这一点......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T17:52:11.273

您可以使用赋值运算符：

```
Point f(3, 4);
f = Point(4); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T17:42:56.667

```
class Point
{
public:
    Point(int,int);
    void operator()(int);
}; 
```

当然，在这种情况下，它不是构造函数。但这就是您展示的语法合法的方式。

以下是有关 operator() 的更多信息：[为什么要覆盖 operator()？](https://stackoverflow.com/questions/317450/why-override-operator)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T17:59:22.923

> > c++ 中 [above] 代码段的类声明可以是什么..

明显的类声明包括`operator()(int)`. 一个不太明显的类声明如下：

```
class Point {
typedef void (*FunPtr)(int);
public:
  Point(int, int) {}
  static void Fun(int) {}
  operator FunPtr() { return Fun; }
}; 
```

# python - Python：根据值（列表）对字典进行排序

> ID：13102538
> 
> 赞同：0
> 
> 时间：2012-10-27T17:41:07.380
> 
> 标签：python

我有有`{key : []}`格式的字典。我需要准备一个根据值的长度（列表的长度）排序的列表。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T17:43:50.360

如果您正在寻找按长度排序的值，并假设 dict `d`：

```
lists_by_length = sorted(d.values(), key=len) 
```

另请参阅[按值对 Python 字典进行排序](https://stackoverflow.com/questions/613183/python-sort-a-dictionary-by-value)

# c - 如何从内核模块（Linux）中挂起任务？

> ID：13102540
> 
> 赞同：0
> 
> 时间：2012-10-27T17:41:14.217
> 
> 标签：c, linux, kernel

我有一个 Linux 内核模块，它每 10 秒运行一次，并扫描是否有任何占用资源的进程。然后我需要暂停它们一分钟（即代码循环六次），然后让它们再次运行。我已经编写了代码来检查条件，并拥有所有适当的 task_struct 指针。

问题是，给定它的 task_struct 指针，我如何暂停任务？稍后，我如何恢复该任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T18:16:45.880

您可以通过发送信号来暂停进程`STOP`，然后通过发送信号来恢复进程`CONT`；也许通过`kill_pid(task_pid(task_struct), SIGSTOP, 1)`和`kill_pid(task_pid(task_struct), SIGCONT, 1)`例如。

这种方法并不完美。例如，另一个进程可以通过向它发送`CONT`信号来保持这样的进程运行，除非您`CONT`在超时期间也阻塞了信号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T18:27:58.347

如果您有 task_struct ，则使用[send_sig](http://lxr.linux.no/linux+v3.6.3/kernel/signal.c#L1489)`SIGSTOP`从内核内部发送。然后发送以恢复它。进程不能忽略（或）。`SIGCONT``SIGSTOP``SIGKILL`

或尝试[send_signal](http://lxr.linux.no/linux+v3.6.3/kernel/signal.c#L1148)并`SEND_SIG_FORCED`用于 siginfo。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T18:24:30.737

也许，您可以从运行队列中删除任务，将其保存在某处并稍后放回。

另一种方法可能是降低其优先级。虽然这并不能阻止它运行，但它会阻止它垄断 cpu。

# python - 将字符串的每个字符存储在列表中

> ID：13102541
> 
> 赞同：0
> 
> 时间：2012-10-27T17:41:22.000
> 
> 标签：python, string

我有一个字符串列表对象，如下所示：

```
s = ['ABC','DEF','GHI','JKL'] 
```

我想将各个字符分别存储为列表项列表，如下所示：

```
output = [['A','B','C'],['D','E','F'],['G','H','I'],['J','K','L']] 
```

我知道我可以使用它们的索引提取单个项目。但我无法以上述给定方式存储它们。有人可以帮我..！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T17:42:45.207

使用列表理解：

```
In [24]: s = ['ABC','DEF','GHI','JKL']

In [25]: lis=[list(x) for x in s]

In [26]: lis
Out[26]: [['A', 'B', 'C'], ['D', 'E', 'F'], ['G', 'H', 'I'], ['J', 'K', 'L']] 
```

或使用`map()`：

```
In [27]: lis1=map(list,s)

In [28]: lis1
Out[28]: [['A', 'B', 'C'], ['D', 'E', 'F'], ['G', 'H', 'I'], ['J', 'K', 'L']] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T17:42:58.507

您可以`list`从 a 制作 a `str`：

```
output = map(list, s) 
```

# php - PHP 账户安全

> ID：13102543
> 
> 赞同：1
> 
> 时间：2012-10-27T17:41:33.263
> 
> 标签：php, html, security, login, code-injection

目前我有一个隐藏帐户窗口的网站，您可以在其中更改密码，上传文件等。代码很简单：

```
<?php if($is_logged_in) { ?>
      <div id="account_window">
          //stuff
      </div>
<?php } ?> 
```

但据此，[这](https://stackoverflow.com/questions/13095387/php-admin-account)是一个很大的安全漏洞。那么替代方案是什么？仅当用户已登录并以更安全且不易受攻击的方式进行操作时，如何才能使帐户窗口可见`if someone just injects the right HTML into the page`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T17:43:44.560

该链接处理 jQuery - HTML 无论如何都会出现在页面上，而 jQuery 只是显示/隐藏它。即使我没有登录，我也可以运行一些 JS 来显示 div。

您正在使用 PHP 执行此操作 - 页面在服务器上呈现，并且只有可见的 HTML 被发送回浏览器。如果用户没有登录，account_window div 将永远不会进入浏览器。我什么也做不了，因为安全的 HTML 根本不在页面上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T17:44:13.560

那是我猜的jQuery部分，它只是隐藏数据，但它是在页面上呈现的，如果你看到源代码你可以看到隐藏的数据，它就像CSS`display: none;`属性一样，内容实际上在页面上，但只是隐藏在屏幕上

在 PHP 中，您还可以使用`$_SESSION`数据进行隐藏，例如

```
$_SESSION['logged_in'] = true

<?php if($_SESSION['logged_in'] == true) { ?>
      <div id="account_window">
          //stuff
      </div>
<?php } ?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T17:46:30.020

我猜该`$is_logged_in`变量仅在用户登录时才设置。所以：

如果“帐户内容”是输入框和文本区域或用户输入要通过其传输到服务器端脚本的信息的任何内容，则唯一的安全漏洞是如果您在数据提交期间没有再次检查用户是否已登录如果您不检查，用户可以注入 HTML 并提交将存储在数据库中的提交。这是唯一的安全漏洞。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-27T17:47:41.727

您的代码应该是安全的（只要`$is_logged_in`不是来自查询参数！）。在您引用的另一篇文章中，无论用户是否登录，OP 都包含与帐户相关的 html，如果用户已登录，则使用 JavaScript 显示它 - 这有点不同，如果您的页面是在没有帐户信息的情况下在服务器上呈现，它将是安全的。您唯一需要担心的是确保用户不会干扰`$is_logged_in`设置方式。

# android - 问题是在listview android的单行中维护multipal复选框的状态

> ID：13102544
> 
> 赞同：0
> 
> 时间：2012-10-27T17:41:47.227
> 
> 标签：android, listview, checkbox

在问这个问题之前我在谷歌上搜索过，我得到的答案很少，比如[Android：CursorAdapter、ListView 和 CheckBox](https://stackoverflow.com/questions/4803756/android-cursoradapter-listview-and-checkbox/4804366#4804366)等，但我需要在单行列表视图中使用多个复选框，现在我的问题是如何保持它的状态

![我的问题是如何在单行中维护多复选框的状态](../Images/eece5357c9fec1d3d424be9fef2fd0c8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T17:45:43.533

您基本上需要一个自定义适配器。覆盖`getView`以返回`View`带有三个框的 a。以下链接应该会有所帮助：

1.  [http://www.codeproject.com/Articles/183608/Android-Lists-ListActivity-and-ListView-II-Custom](http://www.codeproject.com/Articles/183608/Android-Lists-ListActivity-and-ListView-II-Custom)
2.  [如何自定义listview行android](https://stackoverflow.com/questions/4407865/how-to-customize-listview-row-android)
3.  [http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

# asp.net-mvc - MVC 4.0 显示简单网格

> ID：13102545
> 
> 赞同：-2
> 
> 时间：2012-10-27T17:41:48.967
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4

我是 mvc 的新手，我现在正在尝试显示一个简单的 gridview，它将从我的 sql 服务器加载。我什至在工具箱中找不到gridview。

我正在使用剃刀视图引擎。示例将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T18:38:23.960

你提到了 mvc 和工具箱。这些是不相容的概念。在 MVC 中，您不会像在 Web 窗体中那样将东西拖出工具箱。您可以使用 html 帮助程序输入各种字段。

事实上，虽然有一个可用的 WebGrid（实际上有很多），但您会更适合（至少在最初）进行手动表生成。一旦了解了它的工作原理，就可以继续使用更高级的用途。

任何好的 MVC 教程都应该有一个示例，例如 MVC Music Store 或 Nerd Dinner。

# scala - sbt 文档插件

> ID：13102549
> 
> 赞同：0
> 
> 时间：2012-10-27T17:42:26.463
> 
> 标签：scala, maven, sbt, docbook, typesafe-stack

我正在尝试将基于 maven 的 docbook 项目移植到 sbt ......但到目前为止，这是一场噩梦 :-(

给定标准项目目录：

```
mydoc
  + src
  |  + docbook
  |       + main.xml
  |       + chapter1.xml
  |       + chapter2.xml
  + project
  |  + plugins.sbt
  + build.sbt 
```

... build.sbt 看起来像这样：

```
name := "mydoc"

version := "1.0"

scalaVersion := "2.9.2"

docBookHtmlStyleSheet in DocBook := "http://mywebside.com/docbook/xhtml/docbook.xsl

docBookXslFoStyleSheet in DocBook := "http://mywebside.com/docbook/fo/docbook.xsl 
```

...最后 project/plugins.sbt 看起来像这样：

```
resolvers += ScalaToolsSnapshots

addSbtPlugin("de.undercouch" % "sbt-docbook-plugin" % "0.2-SNAPSHOT") 
```

...我总是收到以下错误：

```
[warn]      ::::::::::::::::::::::::::::::::::::::::::::::
[warn]      ::          UNRESOLVED DEPENDENCIES         ::
[warn]      ::::::::::::::::::::::::::::::::::::::::::::::
[warn]      :: de.undercouch#sbt-docbook-plugin;0.2-SNAPSHOT: not found
[warn]      ::::::::::::::::::::::::::::::::::::::::::::::
[warn]
[warn]      Note: Some unresolved dependencies have extra attributes.  Check that these dependencies exist with the requested attributes.
[warn]              de.undercouch:sbt-docbook-plugin:0.2-SNAPSHOT (sbtVersion=0.11.3, scalaVersion=2.9.1)
[warn]
[error] {file:/home/j3d/Projects/home/technotes_sbt/csharp-coding-guideliens/src/project/}default-3b0f83/*:update: sbt.ResolveException: unresolved dependency: de.undercouch#sbt-docbook-plugin;0.2-SNAPSHOT: not found
Project loading failed: (r)etry, (q)uit, (l)ast, or (i)gnore? 
```

任何的想法？任何帮助将非常感激。我会进一步尝试，然后我会放弃。

谢谢，j3d

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T21:04:15.640

原来的[项目](https://github.com/michel-kraemer/sbt-docbook-plugin)似乎不再维护了，它使用了 0.10.0，这对你来说可能已经过时了。

那里有[叉子](https://github.com/michel-kraemer/sbt-docbook-plugin/network/members)，这是[最新](https://github.com/jm2dev/sbt-docbook-plugin)的。

但必须自己构建并在本地发布。

顺便说一句[ScalaToolsSnapshots 被贬低](https://stackoverflow.com/questions/12040427/scalatoolssnapshots-alternative-resolver)了。

# email - 应该使用什么 SQL 列数据类型来存储电子邮件地址？

> ID：13102551
> 
> 赞同：1
> 
> 时间：2012-10-27T17:42:34.700
> 
> 标签：email, azure-sql-database, varchar, nvarchar

应该使用什么 SQL 列数据类型来存储电子邮件地址？我认为 varchar(256) 可能是答案。有什么理由应该是 nvarchar(256) 吗？我正在写入 SQL Azure 数据库。

如何对电子邮件地址进行客户端验证以查明用户是否输入了 unicode 字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T02:50:52.243

电子邮件地址允许包含非 Unicode 字符： [电子邮件地址是否允许包含非字母数字字符？](https://stackoverflow.com/questions/3844431/are-email-addresses-allowed-to-contain-non-alphanumeric-characters)

作为最佳实践，我会为将来的全球化/本地化支持创建一个 nvarchar 列（因为你永远不知道）。nvarchar 与 varchar 相比所需的额外空间可以忽略不计。

至于为电子邮件验证捕获每个可能的字符并不容易，您可以编写一个正则表达式函数来检查这一点，因为大多数高级语言都兼容 Unicode。

# python - 在 osx Lion 上运行 python3 程序

> ID：13102552
> 
> 赞同：2
> 
> 时间：2012-10-27T17:42:40.783
> 
> 标签：python, macos, python-3.x, osx-lion

我可以在终端中很好地使用 python 3，但我不知道如何制作它，所以终端将运行我用 python 3 编写的程序。

我需要做什么才能将 .py 文件扩展名与终端的 python3.2.3 而不是 python2.7.1 关联

我正在使用 textwrangler 作为我的文本编辑器，但如果它可以运行，我会很乐意使用任何编辑器，尽管我不认为这是我的问题，因为 idle 也不起作用，而且它也没有行号。

亲切的问候

抢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T17:54:45.400

在脚本的开头添加一个`python3`hashbang：

```
#!/usr/bin/env python3
# do stuff 
```

然后，您可以使您的脚本可执行并运行它：

```
chmod +x script.py
./script.py 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T17:47:42.500

`python3 yourprogram.py`在您的终端中尝试 。

或者通过在我们的程序顶部添加这一行，这是您的解释器的路径：

```
#!/usr/local/bin/python3.2 
```

# linux - 调用 sys_read 两次 [Nasm, Linux]

> ID：13102558
> 
> 赞同：1
> 
> 时间：2012-10-27T17:43:04.550
> 
> 标签：linux, io, nasm

我两次尝试从输入中读取字符，第一次“调用 getUserAction”工作正常，但主要问题是，系统没有调用第二个读取函数，它只是退出。这是我的代码的一小部分

```
SECTION .bss
        buffer resb 1
SECTION .text
    global _start
    _start:
    ...some unuseful and commented code
    call getUserAction ;reading 1 byte from console, works fine
    ...
    jmp count
    call exit
    count:
           ...
           call getUserAction; don't work, just exits from program without err
           ...commented code to debug
           call exit

    getUserAction: ;proc to read from console 1 byte
             mov eax, 3
             mov ebx, 0
             mov ecx, buffer
             mov edx, 1
             int 80h
             ret 
```

我还尝试将 getUserAction 中的代码放在“count”proc 中，但它没有任何改变。

**UPD：**对第一条评论的回答：在第二个“getUserAction”之后：

```
 mov eax, [buffer]
 cmp eax, 'u'    
 je setUsersValues
 cmp eax, 'e'
 je callFunc     
 call exit 
```

**UPD2**：对不起，这里是所有代码

```
%define newline 10,0
%define A1 -7
%define A2 3
%define A3 2
%define A4 4
%define A5 2
SECTION .data
    labInfo     db "============Lab_3============",newline
    labInfoLen  equ $ - labInfo
    mainMenu    db "Choose the ex:",newline,\
            " r - call count",newline,\
            " t - call beep", newline,\
            " y - call exit func",newline
    mainMenuLen equ $ - mainMenu
    funcStr     db "Here func func func", newline
    funcStrLen  equ $ - funcStr
    countPromt  db "Please,choose the variant of variables value",newline,\
              " u - user defined values", newline,\
              " e - execerciese defined values", newline,\
              "Your choise:"
    promtLen    equ $ - countPromt
SECTION .bss
    buffer resb 1
    resultValue resb 1
%macro calculateFunc 5
     push eax
     push edx
     push ecx
         mov eax, %1
         mov ecx, %2
         add eax, ecx

         mov ecx, %3
         imul ecx

         mov ecx, %4
         xor edx, edx
         idiv ecx

         mov ecx, %5
         add eax, ecx
         mov [resultValue], eax
    pop ecx
    pop edx
        pop eax
%endmacro
SECTION .text
global _start
_start:
    ;call showPromt
    push labInfo
    push labInfoLen
    call printStr
    add esp, 8
    ;call showVarsList
    push mainMenu
    push mainMenuLen
    call printStr
    add esp, 8

    call getUserAction
    ;get get get action
    mov eax, [buffer]
    cmp eax, 'r'
    je count
    cmp eax, 't'
    je beep
    cmp eax, 'y'
    je exit
    jmp _start
count:
    ;showFuncInfo
    push funcStr
    push funcStrLen
    call printStr
    add esp, 8
    ;showProposal
    push countPromt
    push promtLen
    call printStr
    add esp, 8

    call getUserAction
    mov eax, [buffer]
    cmp eax, 'u'    
    je setUsersValues
    cmp eax, 'e'
    je callFunc 
    call exit
    ret
setUsersValues:
    nop; add some code later
        ret
callFunc:
    calculateFunc A1,A2,A3,A4,A5
    add byte [resultValue], '0'
    push resultValue
    push 1
    call printStr ; print Result
    add esp, 8
    ret
printStr:
    push ebp
    mov ebp, esp

    mov eax, 4
    mov ebx, 1
    mov ecx, [ebp+12]
    mov edx, [ebp+8] 
    int 80h

    pop ebp
    ret 
getUserAction:
    mov eax, 3
    mov ebx, 0
    mov ecx, buffer
        mov edx, 1
    int 80h
    ret
beep:
     nop;add some code later
     ret
exit:
    mov eax, 1
    xor ebx, ebx
    int 80h 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:25:27.750

在没有看到所有代码的情况下，您的缓冲区应至少为 2 个字节。sys_read 和 sys_write 的大小都应该是 2 而不是 1。

# orbeon - 在表单构建器中使用 xbl 组件向 data.xml 添加属性

> ID：13102559
> 
> 赞同：0
> 
> 时间：2012-10-27T17:43:12.063
> 
> 标签：orbeon

我们如何将**单行文本**组件的*提示*（如Orbeon Form Builder 中的xml**属性）发送到 data.xml？**例如：提示：first-name="Erik" last-name="Bruchez" email="info@orbeon.com"

 ****```
<?xml version="1.0" encoding="utf-8" ?>
<form>
<contact first-name="Erik" last-name="Bruchez" email="info@orbeon.com" />
</form> 
```

现在发送按钮生成 data.xml，如：

```
<contact>
  <first-name>Erik</first-name> 
  <last-name>Bruchez</last-name> 
  <email>info@orbeon.com</email> 
  <phone>6505555555</phone> 
</contact> 
```

或者也许有一些方法可以从 Form Builder 定义 data.xml 属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:38:28.213

在我看来，您正在尝试将控件绑定到属性 ( `/form/contact/@first-name`)，而不是元素 ( `/form/contact/first-name`)。如果您手动编写 XForms，则可以这样做，但如果您使用 Form Builder 创建表单，则不能。使用 Form Builder，用于收集数据的 XML 结构由 Form Builder 自动为您创建。

如果此 XML 需要发送到另一个需要不同格式数据的系统，那么您可以在提交时实现您自己的数据发送到的服务，并且您可以在该服务中进行转换，例如使用 XSLT。****

# actionscript-3 - AS3 影片剪辑调整大小

> ID：13102562
> 
> 赞同：0
> 
> 时间：2012-10-27T17:43:22.483
> 
> 标签：actionscript-3, resize, movieclip, screens

我正在尝试在我的舞台上找到一个 MovieClip 的 AS3 代码。我的舞台在不同的屏幕（不同尺寸的显示器）上按比例调整大小，但 MC 对于较小屏幕的笔记本电脑来说太大了，并且它的某些部分被切断了。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T19:46:52.977

把这个放在其他任何事情之前。此代码查找从原始布局到重新调整大小的比例大小。（注意：最好在 Event.RESIZE 发生时使用它）

```
stage.scaleMode = StageScaleMode.NO_SCALE;
stage.align = StageAlign.TOP_LEFT;

var guiSize:Rectangle = new Rectangle(0, 0, 1024, 600); //original stage size, substitute this with your orginal size
var deviceSize:Rectangle = new Rectangle(0, 0,
Math.max(stage.fullScreenWidth, stage.fullScreenHeight),
Math.min(stage.fullScreenWidth, stage.fullScreenHeight));

var appScale:Number = 1;

if ((deviceSize.width/deviceSize.height) > (guiSize.width/guiSize.height)) {
    appScale = deviceSize.height / guiSize.height;
} 
else {
    appScale = deviceSize.width / guiSize.width;
} 
```

然后，使用 appScale 缩放您拥有的每个 MovieClip/Sprite，例如 _mc.scaleX = _mc.scaleY = appScale。使用这种方式，每次调整舞台大小时，都会移动右边界和下边界。这意味着如果您希望您的页脚始终距离底部 50 像素，您应该使用以下内容：

```
_footer.y = stage.stageHeight - (50 * appCale); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T17:59:48.257

您可以限制任何缩放，并自己处理大小调整：

```
stage.scaleMode = StageScaleMode.NO_SCALE;
stage.align = StageAlign.TOP_LEFT; 
```

查看可用的[缩放模式](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Stage.html#scaleMode)和[对齐属性](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Stage.html#align)的文档。

# javascript - 正则表达式捕获最后一个空白字符和字符串结尾之间的字符

> ID：13102564
> 
> 赞同：4
> 
> 时间：2012-10-27T17:43:38.007
> 
> 标签：javascript, regex

我正在尝试确定最后一个空格字符和字符串末尾之间的字符。

### 例子

```
Input:   "this and that"

Output: "that" 
```

我已经尝试了下面的正则表达式，但它不起作用！

```
var regex = /[\s]$/ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-27T17:46:52.793

可以不用正则表达式

```
var result = string.substring(string.lastIndexOf(" ")+1); 
```

使用正则表达式

```
result = string.match(/\s[a-z]+$/i)[0].trim(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T18:09:50.327

我建议你使用简单的正则表达式模式

```
\S+$ 
```

### Javascript测试代码：

```
document.writeln("this and that".match(/\S+$/)); 
```

### 输出：

```
that 
```

**[在这里](http://jsfiddle.net/77Eu2/)**测试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T17:48:40.487

您可以删除所有内容，直到最后一个空格。

```
s.replace(/.* /, '') 
```

或者，匹配任何空白...

```
s.replace(/.*\s/, '') 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-27T17:48:05.730

您的示例仅匹配字符串末尾的一个空格字符。采用

```
/\s\S+$/ 
```

匹配任何数字。

# node.js - 如果没有找到 html 文件，Nginx proxy_pass 到节点服务器

> ID：13102571
> 
> 赞同：2
> 
> 时间：2012-10-27T17:44:36.023
> 
> 标签：node.js, nginx, static-files, proxypass

如果没有找到 html 文件，我已经设置了一个 Nginx 服务器，它会向 Node 服务器执行 proxy_pass。我可以很好地访问我的静态 html 文件，但是当我点击节点服务器时，我得到一个 403：禁止访问。如果有帮助，这是我的 Nginx conf：

```
proxy_cache_path  /var/cache/nginx levels=1:2 keys_zone=one:8m max_size=3000m inactive=600m;                                            

upstream mysite_upstream { 
    server 127.0.0.1:8000; 
    keepalive 64; 
}       

server { 

    listen       80; 
    server_name  staging.mysite.org;                                                                                          
    root /var/www/staging.mysite.org/public;                                                                                  

    access_log /var/logs/staging.mysite.org.access.log; 
    error_log /var/logs/staging.mysite.org.error.log;                                                                         

    error_page 404         /404.html; 
    error_page 500 503     /500.html;                                                                                               

    location ~ ^/(images/|javascript/|js/|css/|style/|flash/|robots.txt|sitemap.xml|humans.txt|favicon.ico) { 
            access_log off; 
            expires max;                                                                                                            
    } 

    location @node { 
            proxy_redirect                  off; 
            proxy_set_header                X-Real-IP $remote_addr; 
            proxy_set_header                X-Forwarded-For $proxy_add_x_forwarded_for; 
            proxy_set_header                X-Forwarded-Proto $scheme;                                                              
            proxy_set_header                Host $http_host; 
            proxy_set_header                X-NginX-Proxy true; 
            proxy_set_header                Connection "";   
            proxy_http_version              1.1;                                                                                    
            proxy_cache                     one; 
            proxy_cache_key                 sfs$request_uri$scheme;                                                                 
            proxy_pass                      http://mysite_upstream;                                                           
    } 

    location / { 
            try_files $uri $uri/ $uri.html @node; 
    } 
} 
```

我应该提一下，如果我直接从Node 应用程序中取出`try_files`并提供服务，但我的所有静态 html 文件都会得到 404。此外，这在我的本地机器（osx）上运行良好。 `proxy_pass``/`

# javascript - 无法在我的文本输入中插入空格

> ID：13102573
> 
> 赞同：0
> 
> 时间：2012-10-27T17:44:52.797
> 
> 标签：javascript, html, css

我有一个带有 3 个文本输入的表单，问题是，当我想插入一个空格时，它不允许我这样做。我的代码是：

```
<form action="post.php" name="MYFORM" id="MYFORM" method="post">
<label>Name</label>
<input name="name" size="30" type="text" id="name">
<br clear="all" />
<label>Email</label>
<input name="email" size="30" type="text" id="email">
<br clear="all" />
<label>Message</label>
<textarea id="message" name="message"></textarea>
<br clear="all" /><br clear="all" />
<label>&nbsp;</label>
<input value="Send" type="submit" id="Send"> 
```

当它提交时，它由一个 javascript 文件验证，然后由一个 php 文件邮寄，但我认为这并不重要。

问题：无法在这些文本输入中添加空格。

提前感谢

编辑： JAVASCRIPT 代码：

```
$(document).ready(function() { 

 $('#Send').click(function() {  

        // name validation

        var nameVal = $("#name").val();
        if(nameVal == '') {

            $("#name_error").html('');
            $("#name").after('<div class="errorwrapper"><label class="error" id="name_error">Please enter your name.</label></div>');
            return false
        }
        else
        {
            $("#name_error").html('');
        }

        /// email validation

        var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
        var emailaddressVal = $("#email").val();

        if(emailaddressVal == '') {
            $("#email_error").html('');
            $("#email").after('<div class="errorwrapper"><label class="error" id="email_error">Please enter your email address.</label></div>');
            return false
        }
        else if(!emailReg.test(emailaddressVal)) {
            $("#email_error").html('');
            $("#email").after('<div class="errorwrapper"><label class="error" id="email_error">Enter a valid email address.</label></div>');
            return false

        }
        else
        {
            $("#email_error").html('');
        }

            var mesVal = $("#message").val();
            if(mesVal == '') {

                $("#mes_error").html('');   
                $("#message").after('<div class="errorwrapper"><label class="error" id="mes_error">Please enter a message.</label></div>');
            }
            else
            {

            $("#after_submit").html('');
            $("#Send").after('<label class="success" id="after_submit">Your message has been submitted.</label>');
            $("#after_submit").fadeOut(9000);

            $("#mes_error").html('');

                clear_form();

            }   

    return false;
 })

 function clear_form()
 {
    $("#name").val('');
    $("#email").val('');
    $("#message").val('');
    $(".errorwrapper").empty();
 } 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T20:36:07.810

如果我没有看到其他人在使用键盘控制的 javascript 幻灯片放映时出错，我永远也不会明白。对不起，如果我让你们浪费了一些时间。

我正在使用 Pascal Bajorat 的 fadeslideshow 2.0。

# java - Resty中的连接错误

> ID：13102575
> 
> 赞同：0
> 
> 时间：2012-10-27T17:45:13.920
> 
> 标签：java, json, web-services, resty

我正在尝试从我的机​​构代理后面使用 Resty。我想出了这个例外

```
Exception in thread "main" java.net.ConnectException: Connection refused: connect 
```

有人可以帮我告诉我为什么会得到这个例外吗？

这是完整的代码：

```
package models;
import static us.monoid.web.Resty.*;
import us.monoid.web.Resty;
import us.monoid.web.Resty.*;

public class Tracks {
public static void main(String args[])throws Exception{
    Resty r= new Resty();
    String s = r.json("http://ws.geonames.org/postalCodeLookupJSON?"+
    "postalcode=66780&country=DE").get("postalcodes[0].placeName").toString();
    //String s=r.json("http://ws.audioscrobbler.com/2.0/?method=geo.gettopartists&country=spain&api_key=4174709b0d420c7080c7ac75e6944f1c&format=json").get("topartists[0].artist[0].name").toString();
    System.out.println(s);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T17:46:49.720

看起来您的访问被阻止了。您连接到错误的目标或它根本没有运行。

验证您的网络连接是否正常。通常在代理存在的地方直接访问被阻止。根据您的操作，您可以使用该代理或为您请求防火墙规则。

# vb.net - 创建无限大小的二维数组？

> ID：13102579
> 
> 赞同：0
> 
> 时间：2012-10-27T17:45:54.543
> 
> 标签：vb.net, multidimensional-array

我正在尝试创建城市距离数组`CityDistances(CityId1, CityId2) = Distance` 因为我不知道会有多少个城市，所以我需要一个无限数组。我尝试通过创建它`Dim CityDistances(,) As Double`，但是当我尝试使用它时，它会引发异常。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T18:18:13.770

代替数组，一个可能更好的选择（以及更多的 OOP）是通过使用`List(Of Type)`.

```
Dim d As List(Of DIstances) = New List(Of Distances)()
d.Add(New Distances() With {.CityID1=1, .CityID2=2, .Distance=12.4})
d.Add(New Distances() With {.CityID1=1, .CityID2=3, .Distance=15.1})
d.Add(New Distances() With {.CityID1=1, .CityID2=4, .Distance=2.4})
d.Add(New Distances() With {.CityID1=1, .CityID2=5, .Distance=130.1})

Public Class Distances
    Public CityID1 as Integer
    Public CityID2 as Integer
    Public Distance as Double
End Class 
```

这样做的好处是让您的列表在不指定任何初始限制的情况下增长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T18:06:17.397

首先，通过这样做：

```
Dim CityDistances(,) As Double 
```

您声明一个指向二维数组的指针，而不对其元素执行任何内存分配。预计某些方法将返回此数组，您将通过此指针使用它。如果您尝试按原样使用它，而不给它分配任何东西，您将得到`index-out-of-bounds`异常，这是正常的。

其次，没有无限数组这样的东西。`DataTable`如果你想要自动内存管理，你需要使用列表列表、字典字典、或类似的。如果您想坚持使用数组，出于性能/方便的原因，您可以`ReDim`在需要时（增加维度）并保留内容，如下所示：

```
Dim CityDistances(,) As Double
ReDim Preserve CityDistances(10,10)
'.... code goes here ....
ReDim Preserve CityDistances(100,100) 
```

确保您知道何时进行 ReDim，因为每次执行此操作时，.NET 都会创建另一个数组并将所有元素复制到那里。随着阵列大小的增长，它可能成为性能因素。

第三，根据您问题的性质，您可能需要研究`Matrix`该类的自定义实现。以下是我通过 Google 找到的一些链接，希望对您有用。这些是 C#，但互联网上有[免费的 VB.NET 在线转换器](http://www.developerfusion.com/tools/convert/csharp-to-vb/)。

[C# 中的轻量级快速矩阵类（Strassen 算法，LU 分解）](http://blog.ivank.net/lightweight-matrix-class-in-c-strassen-algorithm-lu-decomposition.html)（免费）

[C# 中的高效矩阵编程](http://www.codeproject.com/Articles/3354/Efficient-Matrix-Programming-in-C)（代码项目，同样免费）

[用于 .NET 编程的高性能矩阵代数！](http://www.bluebit.gr/NET/)（付费，99 美元及以上）

# iphone - iOS 6 中的文件路径给了我 null

> ID：13102580
> 
> 赞同：0
> 
> 时间：2012-10-27T17:45:58.973
> 
> 标签：iphone, ios, ipad, nsfilemanager

我正在使用 iPhone6 模拟器，我正在尝试使用以下任何代码获取文件（html 的任何扩展名 pdf）：

```
 NSString *file = [[NSBundle mainBundle] pathForResource:[NSString stringWithFormat:@"%@.pdf", documentName] ofType:nil]; 
```

或者

```
NSString *file2 = [[NSBundle mainBundle] pathForResource:documentName ofType:@"pdf"]; 
```

我确定该文件存在于 Resources 文件夹中并且我没有添加该文件，我以编程方式从 Web 下载它并在此路径中查看它（/Users/myMac/Library/Application Support/iPhone Simulator/6.9/Applications /E60F22DD-7301-48EF-AB25-B9D42FA6AD49/myApp.app) 我看到文件，但代码看不到它

但是这些代码有时会给我 null 有时给我文件。

为什么会发生这种情况以及如何防止这种情况并使其始终为我提供文件。考虑到我使用

```
if(file != nil) 
```

并想让 if file == nil 尝试使用任何方式打开它。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T17:57:00.380

确保您的文件已添加到项目的目标中。选择您的目标，然后选择 Build Phases->Copy Bundle Resources。该文件应该在那里。

有时值得清理您的项目并从头开始构建。我见过在执行清理之前添加的文件没有复制到模拟器/设备的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:18:33.847

a) 如果您从 Web 下载任何内容，则内容将转到您的应用程序的文档目录。

b) 没有其他应用程序可以与您的应用程序文档目录进行交互。

c) Bundle 路径，即应用程序的组和文件部分是只读的。

d) 除非并且直到您允许访问您的应用程序的文档目录，否则没有人可以偷偷您的应用程序 PDF。

希望这可以帮助

# c# - 在编译代码中实现电子表格功能（自动更新变量）

> ID：13102582
> 
> 赞同：3
> 
> 时间：2012-10-27T17:46:11.393
> 
> 标签：c#, spreadsheet

我需要在我的代码中放置一个位置，当其他变量依赖的变量发生变化时，变量会自动更新。

与电子表格的不同之处在于我不想要所有的解析内容，我只想在代码中完成所有事情，因为我不需要在程序编译后更新公式/变量。

基本上有输入数据，电子表格部分的一些“单元格”将监听这些值、更改，并且更改将通过“电子表格”部分传播。就像一个普通的电子表格。

因此，我可以立即依赖所有这些值，而不必首先编写各种代码来正确更新所有变量，这很难做到。

如果有人可以帮助我实现这一点的思考过程，那真的很有帮助！我一直在阅读一些电子表格源代码，但要理解这一点需要很长时间，然后才能理解我将如何改变这些想法以适应我需要做的事情。

编辑：现在我只是循环中的东西并正确构建所有内容，因此它可以正确更新，如下所示：

```
A1 = 2;
B1 = A1 + 2; 
```

然后这只是一次又一次地循环。但是，如果我想让事情自动更新，我将如何存储附加到变量的计算？那么在更新 B 时它会调用 A1 + 2 吗？

顺便说一句，A1 和 B1 只是随机变量。我不按单元名称命名事物，也没有这样的结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:06:59.877

存储计算的一种方法是使用 C# 中内置的函数式编程元素。

[`Func<T1,T2,...TResult>`](http://msdn.microsoft.com/en-us/library/bb534647.aspx)可以使用其中一个委托将公式存储为函数。

```
var CalculationForX = new Func<double, double, double>( 
    (arg1, arg2) => arg1 * arg2
); 
```

在这里，`CalculationForX`指定一个接受两个双精度数的函数，并返回两个双精度数的乘积。然后使用例如`CalculationForX(5, 2)`返回 10。

* * *

因此，跟踪所有依赖项的一种直接方法是为每个因变量存储一个对象，其中包含其公式和输入。这些可能是以下形式：

*   包含给定对象的属性名称的字符串数组
*   一个`PropertyInfo`数组
*   `Action<T1,T2>`委托代表实际的属性设置器

每当您收到属性更改事件时，检索依赖于它的所有变量的计算和输入，并更新目标值。

[（你问这个问题对我来说很有趣，因为我昨天在Programmers](https://softwareengineering.stackexchange.com/q/171526/50958)上问了一个非常相似的问题。）

# windows - 在我的 Windows Phone 应用程序中使用 Microsoft.Devices.Radio 类时，收音机会在后台播放吗？

> ID：13102591
> 
> 赞同：-1
> 
> 时间：2012-10-27T17:46:54.060
> 
> 标签：windows, windows-phone-7, radio

我在我的应用程序中使用无线电类

```
FMRadio myRadio = FMRadio.Instance;

            // Turn the radio on.
            myRadio.PowerMode = RadioPowerMode.On;
            myRadio.CurrentRegion = RadioRegion.Europe;

            // Set the frequency.
            myRadio.Frequency = 92.7; 
```

应用程序会退出，我手机的收音机会出现还是会在后台播放？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:30:50.847

是的，当您退出应用程序时，它将在后台播放。

# java - 在运行时使用反射将文件添加到类路径的危险

> ID：13102595
> 
> 赞同：6
> 
> 时间：2012-10-27T17:47:10.940
> 
> 标签：java, reflection, classloader

最近我一直在寻找在运行时将 jar 文件动态加载到我的应用程序中的方法。

我已经多次提出某个解决方案，这基本上是一个“hack”，它获取系统类加载器并使用反射来访问受保护的 addURL 方法，以便在运行时将其他文件添加到原始类路径。这个解决方案据说效果很好，并且避免了编写和使用自制自定义类加载器时出现的问题。

它看起来像这样：

```
URLClassLoader sysloader = (URLClassLoader) ClassLoader.getSystemClassLoader();
Class sysclass = URLClassLoader.class;

try {
      Method method = sysclass.getDeclaredMethod("addURL", parameters);
      method.setAccessible(true);
      method.invoke(sysloader, new Object[] { u });
 } catch (Throwable t) {
      t.printStackTrace();
      throw new IOException("Error, could not add URL to system classloader");
 } 
```

我的问题如下：我认为首先使 addURL 方法受到保护是有充分理由的，在动态地将文件添加到类路径时一定存在某种缺陷或危险。

除了假设系统类加载器总是一个 URLClassLoader，“应该总是这样”（TM），使用这个“hack”时我会遇到什么样的麻烦？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T19:35:02.147

主要危险是您依赖于对方法存在的运行时检查。

如果将来方法签名发生变化，您将在运行时才知道它。如果没有提供替代方法，这也可能会导致令人讨厌的情况。

此外，正如巨大的已经指出的那样，设计师选择制作这种方法`protected`是有原因的（除了缺乏远见）

# css - 导航栏 + 窗口大小

> ID：13102596
> 
> 赞同：-1
> 
> 时间：2012-10-27T17:47:13.873
> 
> 标签：css

我很难弄清楚这一点。例如，如果您重新调整本网站 (http://www.noxinnovations.com/) 的窗口大小，直到看到水平滚动条，然后向右滚动，您会看到标题的虚线消失为以及颜色。但是像 facebook 或 twitter 这样的网站没有这个问题。我想知道他们是怎么做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T17:56:12.327

如果你看一下它们的`Html`和`Body`元素并没有填满整个页面。（Firefox 的 Firebug 扩展使这一点很明显。）这不正常。但是，包含条形背景的元素最终会受到主体元素大小的限制。这可能只是他们糟糕设计的产物。如果您自己创建网站，则不应该有这个问题。

# android - Android proguard 噩梦

> ID：13102605
> 
> 赞同：4
> 
> 时间：2012-10-27T17:47:48.873
> 
> 标签：android, proguard

当我为我的应用程序构建一个新的 APK 时，旧的序列化保存数据不再加载，我得到这个异常：

```
java.io.InvalidClassException: org.myapp.b.b; Incompatible class (SUID): org.myapp.b.b: static final long serialVersionUID =1L; but expected org.myapp.b.b: static final long serialVersionUID =0L; 
```

我在 proguard.cfg 中有这个：

```
-keepnames class * implements java.io.Serializable

-keepclassmembers class * implements java.io.Serializable {
    static final long serialVersionUID;
    private static final java.io.ObjectStreamField[] serialPersistentFields;
    !static !transient <fields>;
    !private <fields>;
    !private <methods>;
    private void writeObject(java.io.ObjectOutputStream);
    private void readObject(java.io.ObjectInputStream);
    java.lang.Object writeReplace();
    java.lang.Object readResolve();
} 
```

我的 serialVersionUID 在代码中没有改变。当我调试时，一切正常，但是当我测试我的新 apk 时，它不会加载旧数据。

有任何想法吗？

# r - 带查找表的 R

> ID：13102606
> 
> 赞同：1
> 
> 时间：2012-10-27T09:33:48.570
> 
> 标签：r, time-series, cross-correlation

我有两个包含这种格式的时间序列的文件：

```
Tag, T1, T2, ...  Tn
Stock-1, 2, 3, ..  6
Stock-2, 3, 2, ..  7
.
.
Stock-m, 2, 1, ..  9 
```

在 R 中，对于任何标签（例如 Stock-x），我想从两个文件中获取相关数组并为它们计算互相关（ccf）。我怎么能做到这一点？

注意：如果更容易，我可以更改文件格式。

更新：

我用这个从文件读入data.frames：

```
file1 = read.table("file1.txt", header = TRUE, sep = ",") 
```

我将如何访问具有标签名称（例如“Stock-5”）的特定行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T14:02:27.987

看来这个问题可以这样回答：

```
f1stock5df <- subset(file1,Tag %in% c("stock5"))

f2stock5df <- subset(file2,Tag %in% c("stock5"))

bothstocks <- rbind(f1stock5df, f2stock5df)

with(bothstocks, ccf(x,y)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T17:08:24.797

我从文件中删除了“标签”：

```
T1, T2, ...  Tn
Stock-1, 2, 3, ..  6
Stock-2, 3, 2, ..  7
.
.
Stock-m, 2, 1, ..  9 
```

然后我可以用这个 R 代码得到结果：

```
file1 = read.table("file1.txt",head=TRUE,sep=",")
file2 = read.table("file2.txt",head=TRUE,sep=",")

row1 = file1["Stock-5",]
row2 = file2["Stock-5",]

vec1 = c(t(row1))
vec2 = c(t(row2))

ccf(vec1,vec2) 
```

# algorithm - 主定理案例 2 - 常数 k

> ID：13102615
> 
> 赞同：0
> 
> 时间：2012-10-27T17:48:56.147
> 
> 标签：algorithm, computer-science, master-theorem

我正在学习 Master Theorem 的期中考试，并且遇到了 k > 0 的情况 2 的示例。我了解有关该定理的所有内容，除了常数以及它如何递增或计算。

[案例 2](http://en.wikipedia.org/wiki/Master_theorem#Case_2)状态：T(n) = Θ(n ^(log [b] a) log ^(k+1) n) 当 n ^(log [b] a) = f(n) 但 k 来自哪里？

**有问题的例子：**

矩阵乘法

```
cilk void Mult(*C, *A, *B, n) {
    float *T = Cilk_alloca(n*n*sizeof(float));
    spawn Mult(C11,A11,B11,n/2);
    spawn Mult(C12,A11,B12,n/2);
    spawn Mult(C22,A21,B12,n/2);
    spawn Mult(C21,A21,B11,n/2);
    spawn Mult(T11,A12,B21,n/2);
    spawn Mult(T12,A12,B22,n/2);
    spawn Mult(T22,A22,B22,n/2);
    spawn Mult(T21,A22,B21,n/2);
    sync;
    spawn Add(C,T,n);
    sync; 
    return;
}

cilk void Add(*C, *T, n) {
  h base case & partition matrices i
  spawn Add(C11,T11,n/2);
  spawn Add(C12,T12,n/2);
  spawn Add(C21,T21,n/2);
  spawn Add(C22,T22,n/2);
  sync;
  return;
} 
```

已发现加法的跨度为：Θ(log n)

在计算乘法的跨度时，示例说明：

M1(n) = M1(n/2) + A1(n) + Θ(1)

A1(n) 真的是 Θ(log n)：M1(n) = M1(n/2) + Θ(log n)

n log [b] a = n log [2] 1 = 1 --> f(n) = Θ(n ^(log [b] a) log ¹ n)

所以跨度最终是：Θ（log ² n）。

我想知道为什么在这个例子中 k = 1？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T18:20:00.233

您需要**找到**这样的参数`k`，以便表达式为. 在这种情况下将满足要求。为了获得所需的表达式形式，您需要进行匹配。更具体地说，它类似于求解 的方程。`Θ(n^(log[b]a)log^kn)``Θ(log n)``k=1``log^kn = log n``k`

# api - WSO2 Governance Registry：通过 API 设置生命周期状态？

> ID：13102623
> 
> 赞同：2
> 
> 时间：2012-10-27T17:49:40.783
> 
> 标签：api, registry, wso2, lifecycle

我在注册表中配置了以下自定义生命周期。状态和转换如下所示：

```
in.design (initial)
   -> in.development
   -> in.production
   -> in.text
in.development
   -> in.test
in.test
   -> released
released
   -> in.production
in.production
   -> deprecated
deprecated
   -> retired (end) 
```

用例：工件的批量协调，在不同的系统中主动管理。

问题：我需要通过 API 为某些工件设置“in.production”状态。

我已经研究了以下可能性；* GenericArtifact API，我可以使用它将生命周期附加到工件。=> 你不能设置 Lifecycle-State * "CustomLifecyclesChecklistAdminService"，但它是一个内部 API 并且是 UI 驱动的。似乎很难编程。

所以问题是：有没有办法将工件的生命周期状态设置为不是初始状态的状态？

我自己的答案（有更好的解决方案吗？）：

```
// When "simulating" the behaviour of the UI, the following works. It feels a little awkward and looks brittle to me. Found out how to use it via debugger.
CustomLifecyclesChecklistAdminServiceStub clc = ...
// these are representing the check boxes in the UI
String[] params = { "false", "true", "false" };         
clc.invokeAspect(path, lifecycleName, "to.production", params); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:33:15.880

目前，“CustomLifecyclesChecklistAdminService”是执行此操作的方法。但是，状态转换功能将在未来版本中引入治理 API [1]。这将提供一种更清洁的方法。

[1] [https://wso2.org/jira/browse/REGISTRY-837](https://wso2.org/jira/browse/REGISTRY-837)

# java - 在java中搜索特定记录的数组列表

> ID：13102626
> 
> 赞同：1
> 
> 时间：2012-10-27T17:49:47.877
> 
> 标签：java, arraylist, return, unreachable-statement

我正在编写一个方法来返回数组中的特定记录，但是它会引发两个错误，我不确定如何修复它。谁能解释我做错了什么？

```
public String find(String searchName) 
{ // ERROR - MISSING RETURN STATEMENT
    Iterator<TelEntry> iterator = Directory.entries.iterator();
    boolean hasFound = false;
    while (iterator.hasNext()) 
    {
        TelEntry entry = iterator.next();

        if (entry.name.equalsIgnoreCase(searchName)) {
            return entry.name + entry.telNo;
            hasFound = true; // ERROR UNREACHABLE STATEMENT
        }

    }
    if (hasFound==false)
    {
        System.out.println("sorry, there is noone by that name in the Directory. Check your spelling and try again");
    }
} 
```

谁能解释我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T18:01:11.373

您遇到的基本问题是，当找不到匹配项时，您没有返回语句。通常，在`null`这种情况下，方法会返回，但您可能想要返回`searchName`，甚至是错误消息 - 这取决于方法的意图/合同是什么（未说明）。

但是，您遇到的另一个问题是您的代码对于它正在做的事情来说太复杂了，尤其是`hasFound`变量完全没用。

将您的代码更改为此，它做的事情完全相同，但表达得更优雅：

```
public String find(String searchName) {
    for (TelEntry entry : Directory.entries) {
        if (entry.name.equalsIgnoreCase(searchName)) {
            return entry.name + entry.telNo;
        }
    }
    System.out.println("sorry, there is noone by that name in the Directory. Check your spelling and try again");
    return null; // or return "searchName", the error message, or something else
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T17:50:38.030

`return`语句应该是块中的最后一个语句。在下面更改您的代码：

```
if (entry.name.equalsIgnoreCase(searchName)) {
            hasFound = true; // ERROR UNREACHABLE STATEMENT
            return entry.name + entry.telNo;
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T18:04:17.067

如果一个方法被声明为返回一个字符串，它必须返回一个字符串，或者抛出一个异常。不返回任何东西是不可接受的。所以你应该决定当找不到字符串时该怎么做。你基本上有两个选择：

*   返回空
*   抛出异常

打印错误不是一个好主意。这种方法不应该处理用户界面。那不是它的责任，一个方法应该只有一个责任。返回带有错误消息的字符串也不是一个好主意：调用者无法知道返回的字符串是已找到的字符串还是错误字符串。

此外，您的代码过于复杂。它可以简化为以下内容（假设`Directory.entries()`实现了 Iterable，因为它应该）：

```
public String find(String searchName) {
    for (TelEntry entry: Directory.entries()) {
        if (entry.name.equalsIgnoreCase(searchName)) {
             return entry.name + entry.telNo;
        }
    }
    return null;
} 
```

我会改变返回类型，所以，让它返回一个`TelEntry`实例。让调用者处理连接。这也不是这个方法的责任。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-28T10:34:19.207

您的代码不正确：在同一块中返回后您不能有指令：它怎么能被执行，因为函数已经返回......？

* * *

这就是编译器告诉你的：unreachable statement

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-27T17:53:04.593

最好返回字符串本身。确实，直接将其打印到屏幕上违反了 SRP（单一职责原则，并且还避免按方法期望返回某些内容）。

不需要布尔检查器。

```
public String find(String searchName) { 
        Iterator<TelEntry> iterator = Directory.entries.iterator();
        while (iterator.hasNext()) {
            TelEntry entry = iterator.next();
            if (entry.name.equalsIgnoreCase(searchName)) {
                return entry.name + entry.telNo;
            }
        }
        return "sorry, there is noone by that name in the Directory. Check your spelling and try again";
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-27T18:12:53.073

> 谁能解释我做错了什么？

我的解释在下面的评论中：

```
public String find(String searchName) 
    { // ERROR - MISSING RETURN STATEMENT
        Iterator<TelEntry> iterator = Directory.entries.iterator();
        boolean hasFound = false;
        while (iterator.hasNext()) 
        {
            TelEntry entry = iterator.next();

            if (entry.name.equalsIgnoreCase(searchName)) {
                return entry.name + entry.telNo;
                /*The "return" statement above stops executing
                the current method and transfers control to the 
                place from where "find" method was called. The
                statement below this line is NEVER executed.*/
                hasFound = true; // ERROR UNREACHABLE STATEMENT
            }

        }
        if (hasFound==false)
        {
            System.out.println("sorry, there is noone by that name in the Directory. Check your spelling and try again");
        }
        /*This method starts with "public String". That means that 
        it MUST return a String object or null when the method 
        finishes executing.
        The best place to return is here.*/
    } 
```

# javascript - 带有 Javascript 函数的 HTML 复选框

> ID：13102628
> 
> 赞同：3
> 
> 时间：2012-10-27T17:49:50.697
> 
> 标签：javascript, html

我只是想让这个复选框在选中后通过在Javascript中运行一个函数来提醒一条消息。我可以让它显示“已检查”消息，但无法显示“未检查”警报。

```
<input type="checkbox" id="chbx" onchange="foo()">
<script type="text/javascript">
var checkbox = document.getElementById("chbx");

 function foo(){
   if(checkbox.checked=true){
       alert("Checked!");
         }
   else {
        alert("UnChecked!");
         }
    };
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T17:54:11.163

您的 if 语句中有单等号而不是双等号：

```
if (checkbox.checked=true) { 
```

应该

```
if (checkbox.checked == true) { 
```

要不就

```
if (checkbox.checked) { 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-27T17:53:37.807

您没有使用 比较值`=`。至少需要`==`更好`===`

```
if(checkbox.checked === true) {} 
```

或者，简化

```
if(checkbox.checked) {} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T17:55:49.167

您犯了一个常见的错误，即使用单个`=`this 实际设置`checkbox.checked`为 true。如果要进行比较，请确保使用 double `==`。

此外，复选框只有两个选项；所以如果它没有打开它就会关闭：

这就是我会做的：

```
<input type="checkbox" id="chbx" onchange="checkbox_changed()">
<script type="text/javascript">
    var checkbox = document.getElementById("chbx");

    function checkbox_changed() {
        if (checkbox.checked == true) {
            alert("Checked!");
        } else {
            alert("UnChecked!");
        }
    }
</script> 
```

# iphone - RestKit - 如何排队资源加载？

> ID：13102629
> 
> 赞同：0
> 
> 时间：2012-10-27T17:49:54.823
> 
> 标签：iphone, ios, ipad, restkit

所以，这是我的问题。

我想要做的是排队加载资源；这样每个资源请求加载一次完成一个，一个接一个（控制我接收这些资源的顺序）。

完成这种行为的正确和更清洁的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:51:35.643

好的，我想我明白了。

*   每`RKObjectLoader`一个都是对象的子类`RKRequest`。所以它可能与定制的`RKRequestQueue`.
*   将`RKRequestQueue`其配置为一次只能处理 1 个元素，我们可以实现排序。通过将其并发设置为 1。

我有伪代码：

1.  创建一个`RKRequestQueue`并将其并发定义为 1。
2.  将其标记为挂起，以便它等待加载，直到我完成对资源加载请求的排队。
3.  循环我的资源加载请求并按照我希望它们执行的顺序添加它们。

我们从请求队列的延迟加载开始

```
- (RKRequestQueue *)mainDownloadRequestQueue {
    if (!_mainDownloadRequestQueue) {
        // Creating the request queue
        RKRequestQueue * queue = [RKRequestQueue requestQueue];
        //queue.delegate = self;
        queue.concurrentRequestsLimit = 1;
        queue.showsNetworkActivityIndicatorWhenBusy = YES;

        // Start processing!
        [queue start];
        _mainDownloadRequestQueue = [queue retain];
    }
    return _mainDownloadRequestQueue;
} 
```

主要方法可能/应该看起来像这样，我们在块中设置队列，就在 RestKit 检查队列是否可用于处理下载之前。

```
 - (void)setUpMainQueue {
        // We lock the download queue so that, no download will start until, we want it
        [[self mainDownloadRequestQueue] setSuspended:YES];

        // Fill up the queue
        [self fillQueueWithMandatoryDownloads];

        // No, let's start and wait for data to be there
        [[self mainDownloadRequestQueue] setSuspended:NO];
    } 

    - (void)fillQueueWithMandatoryDownloads {
        // Add the first request
        [self addLanguagesRequest];

        // Add another request
        [self addLanguagesRequest];

        // … Add any other request
    }

    - (void)addLanguagesRequest {
        // Load the object model via RestKit
        RKObjectManager *objectManager = [RKObjectManager sharedManager];
        objectManager.client.baseURL = [RKURL URLWithString:kFoundationHost];

        __unsafe_unretained OMResourceLoader * wSelf = self;
        [objectManager loadObjectsAtResourcePath:@"/sources/api/languages" usingBlock:^(RKObjectLoader * loader) {
            // Set the queue there, this is the one defined
            loader.queue = [wSelf mainDownloadRequestQueue];

            // Do other configuration or behaviour for that
            loader.onDidLoadObjects = ^(NSArray *objects) {
                [[OMLogManager sharedLogManager] log:[objects description] logLevelParam:OM_LOG_LEVEL_INFO exceptionParam:nil errorParam:nil];
            };
        }];
    }

    - (void)addCategoriesRequest {
        // Load the object model via RestKit
        RKObjectManager *objectManager = [RKObjectManager sharedManager];
        objectManager.client.baseURL = [RKURL URLWithString:kFoundationHost];

        __unsafe_unretained OMResourceLoader * wSelf = self;
        [objectManager loadObjectsAtResourcePath:@"/sources/api/categories" usingBlock:^(RKObjectLoader * loader) {
            // Set the queue
            loader.queue = [wSelf mainDownloadRequestQueue];
            loader.onDidFailLoadWithError = ^(NSError * error) {
                [[OMLogManager sharedLogManager] log:@"Categories loading error" logLevelParam:OM_LOG_LEVEL_ERROR exceptionParam:nil errorParam:error];
            };
            loader.onDidFailWithError = ^(NSError * error) {
                [[OMLogManager sharedLogManager] log:@"Categories loading error" logLevelParam:OM_LOG_LEVEL_ERROR exceptionParam:nil errorParam:error];
            };
            loader.onDidLoadResponse = ^(RKResponse *response) {
                [[OMLogManager sharedLogManager] log:[[response bodyAsString] description] logLevelParam:OM_LOG_LEVEL_INFO exceptionParam:nil errorParam:nil];
            };
            loader.onDidLoadObjects = ^(NSArray *objects) {
                [[OMLogManager sharedLogManager] log:[objects description] logLevelParam:OM_LOG_LEVEL_INFO exceptionParam:nil errorParam:nil];
            };
        }];
    } 
```

# xcode - 如何在 XCode 4 的外部源文件中设置断点？

> ID：13102630
> 
> 赞同：4
> 
> 时间：2012-10-27T17:49:58.123
> 
> 标签：xcode, debugging, xcode4, xcode4.5

我想在一个文件中放置一个断点，该文件是我的应用程序中使用的库的一部分。如果我只是在 XCode 中打开 .cpp 文件，它会拥有自己的窗口，并且永远不会触发断点。

但是当 Xcode 在同一个库中打开一个源文件时——例如由于异常——该文件会在应用程序项目/工作区窗口中打开。如果我在这里设置断点，它将*被*触发。

那么如何简单地打开一个源文件并在其上设置断点呢？我记得在 VC++ 中，您刚刚打开 .cpp 文件，它会发现是否有调试符号，但这里没有？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-23T13:13:54.547

您可以在该文件中命中的函数上设置符号断点。Xcode 将在断点被命中时打开文件，然后只要文件保留在最近使用的列表中，您就可以通过单击设置断点。

这是一种痛苦。但是 Xcode 无法更好地处理它。从技术上讲，这不是问题（除了其他答案之外）符号包含路径，因此匹配没有问题。这就是为什么一旦你欺骗 XCode 打开它就可以工作的原因......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-30T13:46:15.847

您必须使用应用程序启动库作为托管可执行文件，否则 Xcode 不知道源与库的二进制文件有什么关系

# php - PHP 中的 PREG 函数族

> ID：13102631
> 
> 赞同：0
> 
> 时间：2012-10-27T17:50:00.500
> 
> 标签：php, regex, templates

我正在构建一个模板引擎，我正在考虑使用 preg_split(); 但不是使用'{'和'}'我想使用'[@'和'@]'但我想实现像smarty这样的功能。{ tag_to_replace | escape_html } 并且我希望能够在 | 之后获得所有内容 分隔符。什么应该是实现该功能的最佳方式。

谢谢大家！请不要给我建议使用 SMARTY 或任何其他模板引擎。我正在构建自己的 PHP 框架（用于学习目的）并希望实现一个。非常感谢你。

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T17:59:46.417

这是一个非常好的简短“备忘单”和正则表达式测试工具，玩一下吧。但我同意 - 模板引擎应该更简单。

[http://www.pagecolumn.com/tool/pregtest.htm](http://www.pagecolumn.com/tool/pregtest.htm)

# ruby-on-rails-3 - 如何编写没有 RoutingError 的 RefineryCMS 控制器测试

> ID：13102632
> 
> 赞同：2
> 
> 时间：2012-10-27T17:50:30.983
> 
> 标签：ruby-on-rails-3, rspec2, refinerycms

像这样的 Rspec 测试（实际上取自 RefineryCMS 自己的测试套件）

```
require File.expand_path(File.dirname(__FILE__) + '/../spec_helper')

module Refinery
  describe FastController do
    it "should render the wymiframe template" do
      get :wymiframe
      response.should be_success
    end
  end
end 
```

导致以下错误：

```
Failure/Error: get :wymiframe
ActionController::RoutingError:
  No route matches {:controller=>"refinery/fast", :action=>"wymiframe"}
# ./spec/controllers/fast_controller_spec.rb:6:in `block (2 levels) in <module:Refinery>' 
```

在这种情况下，我将炼油厂 2.0.8 与 Rspec 2.11 一起使用，运行 rake 路由后的相关部分如下所示：

```
wymiframe GET     /wymiframe(/:id)(.:format)        refinery/fast#wymiframe 
```

我尝试了其他一些控制器 Rspec，它们也因路由错误而失败。我当然正在尝试为我自己添加到香草炼油厂控制器的额外方法编写测试，但我只是想看看我是否可以让控制器测试为全新的炼油厂安装工作。

这一定是一个简单的错误！有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:52:26.960

我偶然发现了这一点。代替：

```
get :wymiframe 
```

我需要使用：

```
get :wymiframe, { use_route: :any_old_thing } 
```

我不知道为什么会这样——特别是因为对于“any_old_thing”，我真的没有使用任何有意义的或与我的项目相关的东西。但是，它似乎奏效了，现在我可以测试我的控制器了。

# c# - c#如何给列表框中的项目赋值？

> ID：13102639
> 
> 赞同：0
> 
> 时间：2012-10-27T17:51:15.090
> 
> 标签：c#, visual-studio-2010, listbox

我有一个列表框，里面有不同的蛋糕。如何给每个蛋糕定价，并让我的标签显示所选蛋糕的总成本？以下是我到目前为止的代码。

```
for (int index = 0; index < lstCakes.SelectedItems.Count; index++)
        {
            strCakes += Environment.NewLine + lstCakes.SelectedItems[index].ToString();
        }

double tax = 1.13;
        lblOrdered.Text = "You have ordered: " + strCakes + '\n' + "Total Cost: " + (tax * cakeCost).ToString("C"); 
```

我尝试使用如下开关，但这仅显示最后一个选定项目的成本。

```
switch (lstCakes.SelectedIndex)
        {
            case 0:
                if (lstCakes.SelectedIndex == 0)
                {
                    cakeCost = 18;
                }
                break;
            case 1:
                if (lstCakes.SelectedIndex == 1)
                {
                    cakeCost = 25;
                }
                break;
            case 2:
                if (lstCakes.SelectedIndex == 2)
                {
                    cakeCost = 40;
                }
                break;
            case 3:
                if (lstCakes.SelectedIndex == 3)
                {
                    cakeCost = 30;
                }
                break;
        } 
```

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:08:11.727

假设这是一个桌面应用程序，您可能希望将您的价格放在一个配置文件中，以便以后可以更改它们。您在 App.config 文件中添加一个`<appSettings>`块，其中包含每个蛋糕的条目，然后使用 `ConfigurationManager.AppSettings[]`命令检索它们。

因此，如果这是一个 Windows 窗体应用程序，那么在表单加载时，您可以进入您的应用程序设置，检索您想要的所有蛋糕的详细信息，然后用每个条目填充您的列表框（请参阅[http://msdn .microsoft.com/en-us/library/z38x31c0.aspx](http://msdn.microsoft.com/en-us/library/z38x31c0.aspx)）。这样，您可以为每个条目动态创建文本。如果您希望每一行都包含价格，则必须将其硬编码到该行的文本中。（我想这就是你要问的......）

最后一点。您不应该使用 + 来连接字符串。C# 中的字符串是不可变的——这意味着字符串本身不能被修改（原因是另一个话题，如果你愿意，我可以解释）。为了用“+”连接两个字符串，C# 需要创建第三个字符串并用前两个的内容填充它，这会消耗性能。要更有效地连接字符串，请使用`StringBuilder`对象和`Append()`方法，或者使用`String.Format()`以相同方式工作的方法。

* * *

**不可变字符串：**

字符串的核心是字符数组。正如您无法调整数组的大小一样，您也无法调整字符串的大小。这是因为数组存储在堆栈中......堆栈是一块内存，其中充满了运行程序的指令，这些指令都“堆叠”在彼此之上。堆栈内存是预先分配的，并且出于所有意图和目的，您无法动态更改堆栈上对象的内存占用。您可以拥有一个包含 5 个整数和 5 个空格的 10 个整数数组，但您不能将 a`int[5]`更改为`int[10]`. 如果您想再添加 5 个整数，则`int[5]`需要实例化一个新整数`int[10]`并填充它。字符串也是如此。

数组大小调整问题的解决方案是使用列表及其衍生物来处理的。它们使用堆内存运行。这类似于 StringBuilder 对象的功能。如果您想了解更多关于堆栈和堆内存以及它如何影响程序运行方式的信息，这可能会帮助您更好地理解[http://www.c-sharpcorner.com/UploadFile/rmcochran/csharp_memory01122006130034PM/csharp_memory.aspx](http://www.c-sharpcorner.com/UploadFile/rmcochran/csharp_memory01122006130034PM/csharp_memory.aspx)。知道这一点真的很重要，因为它可以解释很多会让初学者感到困惑的谜团。很适合你问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T18:17:14.677

蛋糕价格可以维持在 Enum 上

```
enum CakePrices{
ChocCake = 20,
VanillaCake = 50
} 
```

**计算成本：**

```
int TotalCost;
for (int index = 0; index < lstCakes.SelectedItems.Count; index++)
{
  strCakes += Environment.NewLine + lstCakes.SelectedItems[index].ToString();

  //The name of the List Items should match the names on the enum,for this to work
  TotalCost += (int)Enum.Parse(typeof(CakePrices),
                               lstCakes.SelectedItems[index].ToString() ,
                               false)
}

Console.WriteLine("You have ordered:" + strCakes + '\n' + "Total Cost: " + TotalCost); 
```

# c - C中字符缓冲区的最大大小？

> ID：13102642
> 
> 赞同：0
> 
> 时间：2012-10-27T17:51:41.210
> 
> 标签：c, char

char 缓冲区是否有最大大小？我有一个程序正在收集 char 缓冲区的字符串并将其写入 proc 文件。在某一点之后，它似乎停止写东西 - 那里有太多东西吗？最大尺寸是多少，所以我可以解决这个问题？

这是代码。这是一个 LKM——limits.h 可以从内核空间获得吗？

最重要的：

```
const char* input = "hooloo\n"; 
```

下一个：

```
int read_info( char *page, char **start, off_t off, int count, int *eof, void *data )
{

    unsigned int mem;
    char answer_buf[strlen(input) + 1 + 14];
    name_added = vmalloc(strlen(input) + 1 + 14);
    strcpy(name_added, input);
    strcat(name_added, extension);
    mem = sprintf(answer_buf, "%s\n", name_added);
    memcpy(page, answer_buf, mem);
    return strlen(answer_buf) + 1;
} 
```

我的代码中的所有内容都是这样的，它们是重新分配缓冲区并添加到其中的东西。此外，该 read_info 用于 procfile。这个问题是我不断地用上面的代码一次又一次地添加到那个缓冲区 - 最终我ca我的procfile并且文本被切断了 - 它不会像我想要的那样永远持续下去）-=。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T17:54:12.683

动态分配的字符缓冲区的唯一最大大小将是可用的系统内存。

堆栈上的缓冲区的大小将受最大堆栈大小的限制。这将根据主机操作系统而有很大差异。

将数据写入文件时，您是否检查[fwrite](http://linux.die.net/man/3/fwrite)返回的大小并在必要时重复调用它以写入缓冲区的剩余部分？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T18:04:38.953

“C”中没有具体的最大尺寸。C 平台上任何对象的理论（或“潜在”）最大大小由实现决定，通常源自底层机器平台和操作系统的属性。

在具有平面内存模型的平台上，理论上它通常会受到地址空间大小的限制，而在实践中则会受到可用空闲内存（或特定类型）大小的限制。

在具有分段内存模型的平台上，它可能受到段大小的限制，段大小小于地址空间大小。尽管实现可以通过在代码中“模拟”平面内存模型来随意突破该限制。因此，在此类平台上，最大对象大小也可能取决于编译设置。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-04T14:05:50.107

您的代码中有内存泄漏！

以下内存永远不会被释放：

```
name_added = vmalloc(strlen(input) + 1 + 14); 
```

我不明白你为什么要为输出分配内存。你做了两次，在堆栈和堆上。

调用者为输出提供了一个缓冲区。*用它！* 不要创建副本！

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-10-30T17:41:11.567

我会说它至少能够处理 1,000 个独特的字符

# c - 你将如何使用 scanf() 来扫描你之前创建的值？

> ID：13102644
> 
> 赞同：1
> 
> 时间：2012-10-27T17:52:09.837
> 
> 标签：c, scanf

我想用 C 创建一个程序，要求用户从菜单中选择一个选项。所以我设置了 float 1=7.20, 2=5.30, 3=4.80, 4=6.50, 5=10.80

我使用这些值创建了一个带有选项的小菜单，并要求用户输入选项 1 2 3 4 或 5。在这种情况下如何扫描用户的输入？

抱歉，我只是从 C 开始我的故事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:07:19.160

看起来您正在使用 5 个浮点数。

1.  而是使用单个浮点数组。

2.  要求用户输入一个整数。

3.  使用该整数作为输入来显示选项。

> ```
> float f[]={7.20, 5.30, 4.80, 6.50, 10.80};
> int i; 
> 
> scanf("%d", &i); // between 1 to 5
> 
> chosenVal=f[i-1];
>  ..... 
> ```

您可能想检查是否`i`在范围内并且`scanf`是否成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T17:59:15.243

做这个：

```
 int choice;
  float value;

  scanf("%d", &choice);

  if(choice == 1)
      value = 7.2;
  etc... 
```

# ios - iOS旋转每一帧视频

> ID：13102646
> 
> 赞同：4
> 
> 时间：2012-10-27T17:52:32.567
> 
> 标签：ios, video, orientation, avfoundation

我需要旋转视频，因为 iPhone 后置摄像头正在录制，就好像它总是在横向左侧一样。我需要物理旋转视频，因为设置方向不适用于所有浏览器（例如 Chrome）。所以我设置了一些代码来读取录制的视频并在旋转后保存。我使用了 AVAssetExportSession，它似乎工作得很好，除了两个问题： - 导出的视频在开始时有一些黑框 - 一些视频不会被导出。

是否有可能对这个问题有所了解？谢谢！

代码：

```
AVAsset* asset = [AVURLAsset URLAssetWithURL: videoUrl options:nil];

AVMutableComposition *composition = [AVMutableComposition composition];
AVMutableCompositionTrack *compositionVideoTrack = [composition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];

AVMutableCompositionTrack *compositionAudioTrack = [composition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];

AVAssetTrack *videoTrack = [[asset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
AVAssetTrack *audioTrack = [[asset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];
[compositionVideoTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, asset.duration) ofTrack:videoTrack atTime:kCMTimeZero error: &error];

[compositionVideoTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, asset.duration) ofTrack:audioTrack atTime:kCMTimeZero error: &error];

AVMutableVideoCompositionInstruction *instruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
instruction.timeRange = CMTimeRangeMake( kCMTimeZero, asset.duration);

AVMutableVideoCompositionLayerInstruction *layerInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:compositionVideoTrack];
  [layerInstruction setTransform:transformToApply atTime:kCMTimeZero];

CGAffineTransform transformToApply = ///code to setup transformation 
[layerInstruction setTransform:transformToApply atTime:kCMTimeZero];
[layerInstruction setOpacity:0.0 atTime:asset.duration];

instruction.layerInstructions = [NSArray arrayWithObject: layerInstruction];

AVMutableVideoComposition *videoComposition = [AVMutableVideoComposition videoComposition];
videoComposition.instructions = [NSArray arrayWithObject: instruction];

videoComposition.frameDuration = CMTimeMake( 1, 600);
videoComposition.renderScale = 1.0;
videoComposition.renderSize =  videoOutputSize;

AVAssetExportSession *exportSession = [[AVAssetExportSession alloc] initWithAsset:asset presetName:AVAssetExportPresetMediumQuality] ;
exportSession.outputURL = self.outputUrl;
exportSession.outputFileType = AVFileTypeQuickTimeMovie;
exportSession.videoComposition = videoComposition;
exportSession.shouldOptimizeForNetworkUse = YES;
exportSession.timeRange = CMTimeRangeMake(kCMTimeZero, asset.duration);

__block BOOL finishedExporting = NO;
[exportSession exportAsynchronouslyWithCompletionHandler:^{

    //
}]; 
```

# c# - 如何获取最新的国家气象局雷达图像？

> ID：13102647
> 
> 赞同：0
> 
> 时间：2012-10-27T17:52:40.523
> 
> 标签：c#

我正在尝试使用 c# 获取最新的 NWS 雷达图像。NWS 网站上有一些[目录](http://radar.weather.gov/ridge/RadarImg/NCR/OKX/?C=M;O=D)，其中包含最新图像的列表。但是，文件是按上传日期命名的，而不是按数字顺序命名的。它们通常每隔几分钟上传一次，但确切的分钟数可能相差 5 分钟。为了获取图像的 URL，我可以编写一个 XML 解析器来从索引页面中提取 URL，但是对于这样一个简单的任务来说，这似乎过于复杂。此外，此索引页面不是 API，如果他们可能更改某些格式，可能会搞砸 XML 解析器。有没有其他方法可以获取最新图像的 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:01:30.080

html 并不总是有效的 Xml。但是您可以为此使用真正的 html 解析器，例如[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)。

```
WebClient wc = new WebClient();
var page = wc.DownloadString("http://radar.weather.gov/ridge/RadarImg/NCR/OKX/?C=M;O=D");

HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(page);

var imageLink = doc.DocumentNode.SelectNodes("//td/a[@href]")
                    .Select(a=>a.Attributes["href"].Value)
                    .OrderByDescending(a=>a)
                    .First(); 
```

**- 编辑 -**

忘记这个答案，然后去[美国天气雷达数据馈送或 API？](https://stackoverflow.com/questions/3142918/united-states-weather-radar-data-feed-or-api)

# ruby-on-rails - Rails - 为模式用户提供和检查大小

> ID：13102649
> 
> 赞同：2
> 
> 时间：2012-10-27T17:52:58.893
> 
> 标签：ruby-on-rails, ruby, multi-tenant, rails-postgresql

我有 postgresql [https://github.com/fauzieuy/sekolah](https://github.com/fauzieuy/sekolah)的多租户应用程序。

如何给用户模式的大小？是否可以通过 Rails 应用程序检查租户的实际大小？如果是这样，我可以获得详细的视图，例如模式的大小？

例子：

架构名称：公共

表：users1（角色：管理站点、管理学校）、帐户、页面

架构名称：subdomain1，

表：users2（角色：老师、学生）、联系人、文章

共享存储：300 MB

架构名称：subdomain2，

表：users2（角色：老师、学生）、联系人、文章

共享存储：300 MB）

ETC

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:05:22.030

以下查询对我有用：

```
select pg_size_pretty(sum(pg_table_size(c.oid))::bigint), nspname 
  from pg_class c 
  join pg_namespace n on relnamespace = n.oid group by nspname; 
```

请注意，它将 pg_toast 分开。我不太确定如何将烤存储集成到数字中。

# matlab - 我应该如何更新 Matlab 中的绘图数据？

> ID：13102654
> 
> 赞同：35
> 
> 时间：2012-10-27T17:53:14.513
> 
> 标签：matlab, plot, graph, matlab-figure, matlab-guide

假设我想用新数据更新绘图。我应该选择什么方法？

1.  将`XDataSource`属性设置为某个名称，更新变量，然后调用`refreshdata`
2.  擦除原来的`plot`，然后再次调用`plot`命令。
3.  采用`Set('Xdata',...')`

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-27T17:53:14.513

*简短的回答：总是使用* `Set('Xdata',...')`.

示例代码：

```
function PlotUpdate()   
    x = 0:.1:8;
    y = sin(x);
    h = plot(x,y);
    y = sin(x.^3);    
    set(h,'XData',x,'YData',y);
end 
```

* * *

**长答案：**

应该通过三种相关措施来选择最佳方法。

1.  *代码清晰度*——别人阅读你的代码有多容易？
2.  *运行时*- 每种方法执行其任务的速度有多快？
3.  *代码可移植性*——重构代码的速度有多快？

现在，让我们分析可能的方法。

**方法（1）——刷新数据**

```
function PlotUpdate()   
    x = 0:.1:8;
    y = sin(x);
    h = plot(x,y);
    set(h,'YDataSource','y')
    set(h,'XDataSource','x')
    y = sin(x.^3);
    refreshdata(h,'caller');
end 
```

M-lint 立即在该行发出警告`y=sin(x.^3)`

```
The value assigned to variable `y` might be unused 
```

为什么会这样？ `refreshdata`使用`eval`并且`m-lint`不知道您将使用`y`. 有人阅读您的代码，不妨完全删除此行。发生这种情况是因为您违反了封装原则。`refreshdata`从调用者工作区访问变量。另一种看待这个的方法，假设您将绘图的句柄传递给另一个函数。读者不知道你到底写了`y = sin(x.^3);`什么，又和剧情更新有什么关系。

现在让我们讨论速度/运行时间。通过查看`refreshdata`源代码，您会注意到两个丑陋的 for 循环，它们遍历您空间中的*所有*图形句柄变量。这是第一个：

```
% gather up all the objects to refresh
objs = {};
for k = 1:length(h)
  obj = h(k);
  objfields = fields(obj);
  for k2 = 1:length(objfields)
    % search for properties ending in DataSource
    if strncmpi(fliplr(objfields{k2}),'ecruoSataD',10)
      objs = {objs{:},obj, objfields{k2}};
    end
  end
end 
```

想象一下，您没有一个地块，而是 100 个地块，并且您只想更新第一个地块。这将非常慢，因为对于每个地块，您都试图找到您需要的地块！（我将作为练习离开，让读者弄清楚什么是`ecruoSataD`，以及如何使用它。）

即使您将相关情节作为论据，您仍然有第二个循环，该循环运行`eval`多次。不完全有效。最后我会展示一个时间比较。

*结论：难以理解、难以重构、运行缓慢*

* * *

**方法（2） - 删除并重新绘制**

```
function PlotUpdate()   
    x = 0:.1:8;
    y = sin(x);
    h = plot(x,y);
    set(h,'YDataSource','y')
    set(h,'XDataSource','x')
    y = sin(x.^3);          
    delete(h);
    h = plot(x,y);    
end 
```

这种方法对读者来说是很清楚的。您删除了情节，并绘制了一个新情节。但是，正如我们将在最后的时间比较中看到的那样，这是最慢的方法。

*结论：易于理解，易于重构，运行时非常慢*

* * *

**方法(3) - set('XData',...,'YData')**

代码真的很清楚。您想修改绘图的两个属性，`XData`并且`YData`. 这正是你所做的。此外，代码运行得非常快，从下面的比较中可以看出。

```
function PlotUpdate()   
    x = 0:.1:8;
    y = sin(x);
    h = plot(x,y);
    y = sin(x.^3);          
    set(h,'XData',x,'YData',y);
end 
```

由于新的图形引擎 hg2（R2014b 及更高版本），如果您更喜欢这种表示法，您还可以使用属性语法来指定数据：

```
function PlotUpdate()   
    x = 0:.1:8;
    y = sin(x);
    h = plot(x,y);
    y = sin(x.^3);          
    h.XData = x;
    h.YData = y;
end 
```

*结论：易于理解、易于重构、运行速度快*

* * *

这是时间比较代码

```
function PlotUpdateTimeCompare()    
    x = 0:.1:8;
    y = sin(x);
    h = plot(x,y);
    set(h,'YDataSource','y')
    set(h,'XDataSource','x')
    y = sin(x.^3);

    tic
    for i=1:100
        refreshdata(h,'caller');
    end
    toc 

    tic
    for i=1:100
        delete(h);
        h = plot(x,y);
    end
    toc     

    tic
    for i=1:100
        set(h,'XData',x,'YData',y);
    end
    toc 

end 
```

结果：

> 经过的时间是 0.075515 秒。
> 经过的时间是 0.179954 秒。
> 经过的时间是 0.002820 秒。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-26T01:29:43.667

您可以调用该函数`drawnow`并执行以下操作：

```
h = plot(nan);

for i = 1:n
  y = ...
  set(h,'YData',y);
  drawnow                 %update the graph
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T06:32:12.007

> 假设我想用新数据更新绘图。我应该选择什么方法？

如果给定轴中有多个线对象，则方法：

> 1.  将 XDataSource 属性设置为某个名称，更新变量，然后调用`refreshdata`

将在 MATLAB R2012b 中生成错误。安德烈的回答中提供了一个适当的例子。

一个错误已提交给 Mathworks。

# android - 运行 Android ActivityUnitTestCase 导致“RuntimeException：找不到测试类”

> ID：13102659
> 
> 赞同：3
> 
> 时间：2012-10-27T17:54:02.123
> 
> 标签：android

尝试生成一个简单的 ActivityUnitTestCase 来测试我的 Android 代码中的各种片段。

```
public class MenuFragmentTest extends ActivityUnitTestCase<FragmentAdapter> {
    static {
        FragmentAdapter.setFragmentUnderTest(new MenuFragment());
    }

    public MenuFragmentTest() {
        super(FragmentAdapter.class);
    }

    public void testMenuOptions() {
        System.out.println(getActivity().findViewById(1));
    }
} 
```

我试图用来在应用程序中测试片段的通用 FragmentAdapter：

```
public class FragmentAdapter extends FragmentActivity {
    static Fragment fragmentUnderTest;

    public static void setFragmentUnderTest(Fragment fragmentUnderTest) {
        FragmentAdapter.fragmentUnderTest = fragmentUnderTest;
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        LinearLayout ll = new LinearLayout(this);
        ll.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
        setContentView(ll);

        FragmentManager fragmentManager = getSupportFragmentManager();
        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
        fragmentTransaction.add(fragmentUnderTest, null);

        fragmentTransaction.commit();
    }
} 
```

成功安装主应用程序后，Android JUnit Test Runner 失败并显示

```
java.lang.RuntimeException: Could not find test class.  Class: com.XXX.core.MenuFragment 
```

为什么 Test Runner 找不到我正在运行的测试类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T04:07:52.700

显然，测试包的名称确实很重要：

从[http://developer.android.com/tools/testing/testing_android.html](http://developer.android.com/tools/testing/testing_android.html)：

> 如果被测应用的包名是 com.mydomain.myapp，那么 Android 工具会将测试包名设置为 com.mydomain.myapp.test

更改包检测 targetPackage 属性不足以让您在与被测活动相同的包中创建测试，即使测试位于单独的测试项目中。

# php - Mysql Select查询 - 无法限制记录

> ID：13102664
> 
> 赞同：0
> 
> 时间：2012-10-27T17:54:34.797
> 
> 标签：php, mysql

我有一个排名表，其中包含所有玩家的排名。

```
id | rank | playername | is_available | ranking_name   | ranking_id
-------------------------------------------------------------------
 1 |  1   | testname1   |     1        | australia open |   1
 2 |  2   | testname2   |     1        | australia open |   1
 3 |  3   | testname3   |     0        | australia open |   1
 4 |  4   | testname4   |     1        | australia open |   1
 5 |  1   | testname5   |     1        | japan open     |   2 
```

这个表很大，每个ranking_id 可以有超过500 名玩家。现在每个玩家都可以挑战比他高 x% 的上位玩家的比赛。此 x 由超级管理员设置。如果 x = 10，则玩家“testname4”可以挑战（ranking_id 中的玩家数量 * 10/100）= 4*10/100=0.4 轮到 1。所以 testname4 可以挑战他上方的一名玩家。但是他上面的播放器“testname3”不可用。所以他应该得到下一个可用的球员。我想要像这样的输出

```
//testname4 can challenge below players

id | rank | playername | status        |
--------------------------------------
 2 | 2    | testname2  |   available   |
 3 | 3    | testname3  | not available | 
```

我做了什么：

```
 //testname4 wants to challenge. So i know his rank and other information

 $selectSql = mysql_query("SELECT * from rankingTable where ranking_id = 1 AND rank < 4"); 
```

这也给了我“testname1”记录。我怎么能限制这个？最大的问题是我需要按升序显示排名。在这里使用订单并不容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T18:37:37.970

首先通过执行 a 确定要挑战的用户`SELECT ... WHERE is_available = 1 ORDER BY rank DESC LIMIT ?`，然后`MIN(rank)`找到排名最高的此类用户，然后使用该信息将表过滤到自己和该用户之间排名的用户：

```
SELECT   rankingTable.*
FROM     rankingTable, (
  SELECT MIN(a_rank) AS lower, b_rank - 1 AS upper
  FROM (
    SELECT   a.rank AS a_rank, b.rank AS b_rank
    FROM     rankingTable AS a JOIN rankingTable AS b USING (ranking_id)
    WHERE    ranking_id = ?
         AND b.playername = ?
         AND a.rank < b.rank
         AND a.is_available = 1
    ORDER BY a.rank DESC
    LIMIT    ?
  ) AS ranks
) AS limits
WHERE    rank BETWEEN limits.lower AND limits.upper
ORDER BY rank DESC 
```

[在sqlfiddle](http://sqlfiddle.com/#!2/f3014/1/3)上查看它（包括确定要选择的用户数量）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T17:57:18.433

尝试在查询末尾添加 LIMIT 1 或 LIMIT 0, 1 （开始，多少条记录）

# cocoa - Qt mac开源和qt mac cocoa库的区别

> ID：13102665
> 
> 赞同：1
> 
> 时间：2012-10-27T17:54:37.410
> 
> 标签：cocoa, qt, open-source, libraries

qt mac开源和qt mac cocoa库有什么区别？

我在[http://releases.qt-project.org/qt4/source/](http://releases.qt-project.org/qt4/source/)上找到了这些 dmg 文件，但我不知道它们之间有什么区别：

`qt-mac-cocoa-opensource-4.6.4-debug-libs.dmg`和`qt-mac-opensource-4.6.4-debug-libs.dmg`

`qt-mac-cocoa-opensource-4.6.4.dmg`和`qt-mac-opensource-4.6.4.dmg`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:51:08.990

从我发现两者之间的区别在于`qt-mac-cocoa-opensource-4.6.4.dmg`版本是使用可可 API`qt-mac-opensource-4.6.4-debug-libs.dmg`构建的，并且是使用现在已经过时的碳 API 构建的。

# javascript - Phonegap 联系人。更新联系人时保存重复的电话号码

> ID：13102667
> 
> 赞同：5
> 
> 时间：2012-10-27T17:54:52.687
> 
> 标签：javascript, android, ios, cordova

我对 Phonegap contacts.save 有疑问。当我创建联系人在 iOS 和 Android 中完美运行，但是，当我尝试更新联系人时，有重复的文件作为 phoneNumbers、电子邮件、url、ims、地址，我使用的是 Phonegap 2.1 和 Xcode 4.5.1。

有人可以帮我解决这个问题吗？我很感激你的时间。谢谢。

**在简历中：**

*   navigator.contacts.create(); 工作正常。
*   当我尝试更新联系人时，请正确保存，但是添加电话号码而不是更新。

**我的代码是：**

```
var options = new ContactFindOptions();
options.filter = 20;  //just it's an example. Looking for id 20.
var fields = ['id'];
var contact;   
navigator.contacts.find(fields,function(contacts){
    if (contacts.length==0) 
       contact = navigator.contacts.create();
    else
       contact = contacts[0];

    var tContactName = new ContactName();
    tContactName.givenName = 'Name';
    tContactName.LastName = 'LastName';
    contact.name = tContactName;    

    var tPhoneNumbers[2];
    tPhoneNumbers[0] = new ContactField('work', '123456789012',true);
    tPhoneNumbers[1] = new ContactField('home', '120987654321', false);
    contact.phoneNumbers = tPhoneNumbers;

    contact.save(function(contact) {
       navigator.notification.alert('Saved sucessfully!!!',function(){},'Title');
    }, function(contactError) {
       navigator.notification.alert('Error contact save: '+contactError.code,function(){},'Title');
    }
}, function(contactError) {
       navigator.notification.alert('Error contact find: '+contactError.code,function(){},'Title');
}, options); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T23:56:10.010

根据 W3C Contact 规范，该代码的工作方式完全正确。但这并不意味着它有意义:)

无论如何，当您创建一个新的电话号码数组并将其设置为等于contact.phoneNumbers 属性时，您实际上是在向联系人添加电话号码。如果您想编辑/替换现有的电话号码，您需要将电话号码作为“字段”的一部分。然后，您需要遍历现有的电话号码并根据需要对其进行编辑。

是的，这是违反直觉的，但这就是适合您的 W3C api。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-12T07:57:04.997

**您必须为已创建的电话号码联系人字段分配值，而不是使用new ContactField**再次为电话号码创建新值。

所以这里是更新电话号码的例子，

```
contact.tphoneNumbers[0].value = 123456789012 
contact.tphoneNumbers[1].value = 120987654321 
```

然后直接调用 save 方法而不是使用`contact.phoneNumbers = tPhoneNumbers;`on update ，就是这样。

# mysql - 如何从 Cloudry Foundry 中的 Sinatra 应用程序中创建新的 MySQL 数据库？

> ID：13102670
> 
> 赞同：0
> 
> 时间：2012-10-27T17:55:24.630
> 
> 标签：mysql, sinatra, cloud-foundry

我正在练习在 Cloud Foundry micro 上构建 Sinatra 应用程序。这个应用程序正在使用 MySQL 服务。我想知道如何从我的 Sinatra 应用程序创建一个新数据库。新数据库将保存与我使用数据映射器构建的默认数据库不同的信息

我首先尝试使用 mysql2 gem

```
require 'mysql2'
con = Mysql.new("#{hostname}", "#{username}", "#{password}", "#{dbname}")   
      rs = con.query("CREATE DATABASE #{$newDbName}")
con.close 
```

上面的代码在我的开发人员机器上运行良好，所以我想我会在云上试试。这是我遇到问题的地方：

```
require 'mysql2'
require 'json'
 svcs = JSON.parse ENV['VCAP_SERVICES']
 mysql = svcs.detect { |k,v| k =~ /^mysql/ }.last.first
 creds = mysql['credentials']
 user, pass, host, name = %w(user password host name).map { |key| creds[key] }

con = Mysql.new("#{host}", "#{user}", "#{pass}", "#{name}") 
      rs = con.query("CREATE DATABASE #{ $newDbName}")
con.close 
```

当我推送我的应用程序并完成创建新数据库的过程时，当我的应用程序尝试“加载'dbsync/createdb.rb'”时出现“内部服务器错误”

谁能解释我为什么会收到这个错误？或者我如何进一步解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T14:22:47.907

您无权创建新数据库。但是，如果您真的想这样做，您可能会使用 VMC gem 连接到 vcap / Cloud Foundry 实例并创建新的 MySQL 服务，然后将其绑定到同一个应用程序。

查看[https://github.com/cloudfoundry/vmc/blob/master/lib/vmc/client.rb的 VMC 代码库中的注释示例代码](https://github.com/cloudfoundry/vmc/blob/master/lib/vmc/client.rb)

# c# - 如何使用 LINQ 过滤 DataTable

> ID：13102673
> 
> 赞同：0
> 
> 时间：2012-10-27T17:55:38.627
> 
> 标签：c#, linq, datatable

我有`DataTable`它给我带来了数据库中的以下数据。

*   `Name`
*   `Address`
*   `CountryID`

我想通过 LINQ 过滤我这边的数据：我有一个复选框列表，其中包含 ID 为 1、2、3、4 的国家/地区。我只想获得检查的国家/地区的结果。例如 1、2、4 作为 LINQ 的 CountryID。我想将它绑定到网格视图。

我正在使用以下代码：

```
foreach (ListItem cBox in chkGodownlst.Items)
{ 
    if (cBox.Selected)
    {
        var a = dt.AsEnumerable()
                  .Where(r => r.Field<int>("CountryID") == Convert.ToInt32(cBox.Value));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:05:01.277

尝试这样的事情：

```
// Get all checked id's.
var ids = chkGodownlst.Items.OfType<ListItem>()
    .Where(cBox => cBox.Selected)
    .Select(cBox => cBox.Value)
    .ToList();

// Now get all the rows that has a CountryID in the selected id's list.
var a = dt.AsEnumerable().Where(r => 
    ids.Any(id => id == r.Field<int>("CountryID"))
);

// Create a new table.
DataTable newTable = a.CopyToDataTable();

// Now set the new table as DataSource to the GridView. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T18:04:01.797

你应该试试这个：

```
var collection = new List<dynamic>();
foreach (ListItem cBox in chkGodownlst.Items)
{
   if(cBox.Selected)
   {
       collection.AddRange(dt.AsEnumerable().Where(r => r.Field<int>("CountryID") == Convert.ToInt32(cBox.Value)));
   }
}

GridView1.DataSource = collection;
GridView1.DataBind(); 
```

希望这会有所帮助！

# c# - 不支持 WPF Invokescript？

> ID：13102676
> 
> 赞同：3
> 
> 时间：2012-10-27T17:55:51.237
> 
> 标签：c#, javascript, html, wpf

我试图在我的 wpf 应用程序中以 html 格式显示某种帮助页面，并且我从资源管理器中加载了 html，它包含多个我想从 c# 执行的 javascript 函数。

应该这样做：

```
webBrowser1.InvokeScript("MyFunction"); 
```

这根本不起作用，我得到错误代码：

```
Unknown name. (Exception from HRESULT: 0x80020006 (DISP_E_UNKNOWNNAME)) 
```

微软对此没有任何帮助，谷歌搜索也没有成功。

**问题：**如何在 wpf 网络浏览器中调用脚本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T18:15:20.560

根据[MSDN](http://msdn.microsoft.com/en-us/library/cc491132.aspx) -

> 在实现它的文档完成加载之前，不应调用 InvokeScript(String)。您可以通过处理 LoadCompleted 事件来检测文档何时完成加载。

这个人[在这里](https://stackoverflow.com/questions/6636420/wpf-browser-invokescript)得到了同样的错误，原因是上面提到的，即试图在文档加载之前调用。

# git - （ git add -A 后跟 git commit ）和 git commit -a 之间的区别？

> ID：13102683
> 
> 赞同：2
> 
> 时间：2012-10-27T17:57:18.603
> 
> 标签：git, git-commit, git-add

`git add --all`或`git add -A`随后`git commit -m "commit message"`似乎会产生与`git commit -am "commit message"`我认为它们会产生相同最终结果时不同的结果。

我做错了`git commit -am "commit message"`什么吗？

也`git commit -a -m "commit message"`一样`git commit -am "commit message"`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T18:18:02.870

# javascript - 使用空值构建数组

> ID：13102688
> 
> 赞同：0
> 
> 时间：2012-10-27T17:57:51.593
> 
> 标签：javascript

下面的函数将一个 csv 文件解析为一个数组，所以它看起来像

`[[1,56.79],[2,57.50],[3,71.60],[4,69.10]]`

```
function CSVToArray (csvString) {

    var arrData = [[]];

    var rows = csvString.match(/[^\r\n]+/g);
    var len = rows.length
    for (var i=0; i<len; ++i) 
    {

        var cols = rows[i].split(",")
        arrData[ arrData.length - 1 ].push( parseFloat(cols[0]) );
        arrData[ arrData.length - 1 ].push( parseFloat(cols[1]) );
        if (i<(len-1))
        {
            arrData.push( [] );
        }
    }

    return( arrData );
}; 
```

我正在尝试修改它，以便如果没有类似的数据，我可以在数组中包含空值

`[[1,56.79],[2,57.50],null,[3,71.60],null,[4,69.10]]`

我尝试了以下但无法使其正常工作

```
function CSVToArray (csvString) {

    var arrData = [[]];

    var rows = csvString.match(/[^\r\n]+/g);
    var len = rows.length
    for (var i=0; i<len; ++i) 
    {

        var cols = rows[i].split(",")
        if (cols[1] != "")
        {
        arrData[ arrData.length - 1 ].push( parseFloat(cols[0]) );
        arrData[ arrData.length - 1 ].push( parseFloat(cols[1]) );
        arrData.push( [] );
        }
        else
        {
        arrData.push( null);
        }
    }

    return( arrData );
}; 
```

请有人能告诉我如何在数组中得到一个空值而不是一个空值吗？

本质上，我试图让数据结构正确，以便能够做到这一点[http://jsfiddle.net/KhpCE/1/](http://jsfiddle.net/KhpCE/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T18:14:30.610

用这个：

```
function CSVToArray (csvString) {
    var arrData = [];
    var rows = csvString.split(/\r?\n/);
    // console.log(rows)
    var len = rows.length
    for (var i=0; i<len; ++i) 
    {
        var cols = rows[i].split(",")
        // console.log(cols)
        var temp = []
        if (cols.length == 2 && cols[1] != "" && cols[0] != "")
        {
          temp.push( parseFloat(cols[0]) );
          temp.push( parseFloat(cols[1]) );
        }
        else
        {
          temp = null;
        }
        arrData.push(temp);
    }
    return( arrData );
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T18:05:07.647

无需预先为下一个项目推送一个空数组，只需为每个项目创建一个数组并推送它，然后推送一个空值而不是一个项目很简单：

```
function CSVToArray (csvString) {

  // an array without the prefilled empty item array
  var arrData = [];

  var rows = csvString.match(/[^\r\n]+/g);
  var len = rows.length
  for (var i=0; i<len; ++i) {
    var cols = rows[i].split(",");
    if (cols[1] != "") {
      // create an array and push it
      arrData.push([
        parseFloat(cols[0]),
        parseFloat(cols[1])
      ]);
    } else {
      arrData.push(null);
    }
  }

  return arrData;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T18:19:00.917

这是`match`困扰你的。匹配的结果`/[^\r\n]+/g`从 中丢失空行`csvString`。我建议`split`在这里使用。

此外，您的代码看起来相当庞大。如何使用`Array.map`^(**1**)：

```
function CSVToArray(csvString) {
    var rows = csvString.split(/\n|\r\n/);
      return rows.length ? [rows.map(function(s){
         var cols = s.split(",").map(function(v){return Number(v)||null;});
         return cols.length===2 ? cols: null;
      })] : [];
};
//usage example
CSVToArray('1,2.1\n\n23.2\n3,4\n5.34,6');
//=> [[2,2.1],null,null,[3,4],[5.34,6]] 
```

^(**1**) [在这里](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)您可以找到`Array.map`适用于旧版浏览器的 shim

# sqlite - SQLite 不按两列排序

> ID：13102690
> 
> 赞同：0
> 
> 时间：2012-10-27T17:58:03.157
> 
> 标签：sqlite, sql-order-by

结构是：

```
CREATE TABLE stopsbuses (_id INTEGER PRIMARY KEY, stop_id NUMERIC, bus_id NUMERIC, drive TEXT, day TEXT);
CREATE TABLE stopsbusestimes (_id INTEGER PRIMARY KEY, sb_id NUMERIC, timeh NUMERIC, timem NUMERIC); 
```

当我执行这样的查询时：

```
SELECT timeh, timem FROM stopsbuses 
INNER JOIN stopsbusestimes ON stopsbuses._id = stopsbusestimes.sb_id 
WHERE stopsbuses.stop_id = 2 ORDER BY timeh asc, timem asc 
```

例如输出是：

```
[..]
7 1
7 31
7 34
7 54
7 57
7 22
[..] 
```

相同的输出很简单：

```
SELECT timeh, timem FROM stopsbusestimes ORDER BY timeh, timem 
```

使用 php + pdo、SQLite 数据库浏览器和 Android 应用程序的相同输出。

我在按两列排序时遗漏了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T18:17:00.623

在 SQLite 中，所有字符串都排在所有数字后面，因此很可能`22`不是数字。

要查看类型，请尝试[`typeof`](http://www.sqlite.org/lang_corefunc.html#typeof)或[`quote`](http://www.sqlite.org/lang_corefunc.html#quote)：

```
SELECT quote(timeh), quote(timem) FROM stopsbuses ... 
```

# java - 命令设计模式简单 GUI 空指针

> ID：13102692
> 
> 赞同：1
> 
> 时间：2012-10-27T17:58:36.200
> 
> 标签：java, swing, design-patterns, command-pattern

我有这些类：一个 JPanel 扩展、一个接口和 3 个 JmenuItem 类。

```
public class RedFrame extends javax.swing.JFrame implements ActionListener {
private JMenuBar jMenuBar1;
private JPanel jPanel1;
private fileExitCommand jMenuItem3;
private fileOpenCommand jMenuItem2;
private btnRedCommand jMenuItem1;
private JMenu jMenu1;

/**
 * Auto-generated main method to display this JFrame
 */
public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            RedFrame inst = new RedFrame();
            inst.setLocationRelativeTo(null);
            inst.setVisible(true);
        }
    });
}

public RedFrame() {
    super();
    initGUI();
}

private void initGUI() {
    try {
        setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
        {
            jPanel1 = new JPanel();
            getContentPane().add(jPanel1, BorderLayout.CENTER);
        }
        {
            jMenuBar1 = new JMenuBar();
            setJMenuBar(jMenuBar1);
            {
                jMenu1 = new JMenu();
                jMenuBar1.add(jMenu1);
                jMenu1.setText("Meniu");
                {
                    jMenuItem1 = new btnRedCommand(jPanel1, "RED");
                    jMenu1.add(jMenuItem1);

                }
                {
                    jMenuItem2 = new fileOpenCommand("Open");
                    jMenu1.add(jMenuItem2);

                }
                {
                    jMenuItem3 = new fileExitCommand("Exit");
                    jMenu1.add(jMenuItem3);

                }
            }
        }
        jMenuItem1.addActionListener(this);
        jMenuItem2.addActionListener(this);
        jMenuItem3.addActionListener(this);
        pack();
        setSize(300 * 16 / 9, 300);
    } catch (Exception e) {
        // add your error handling code here
        e.printStackTrace();
    }
}

@Override
public void actionPerformed(ActionEvent event) {
     Execute();

}

 } 
```

和

```
public class btnRedCommand extends JMenuItem implements Command {

protected JPanel p;
protected String text;

public btnRedCommand(JPanel p, String text) {

    p.setBackground(Color.cyan);
    this.setText(text);
}

public void Execute() {
    // TODO Auto-generated method stub
    p.setBackground(Color.red);
}

} 
```

和

```
public interface Command  {

public void Execute();

} 
```

我希望根据选择了 Menu 中的哪个 jMenuItem 来调用在 3 个 JMenuItems 中实现的 Execute 方法。我怎样才能正确地做到这一点？我需要 3 个 jMenuItems 的包装类吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T18:06:26.540

对于这些简单的 GUI 任务来说，这种模式在这里是多余的，但是在你的 中`ActionListener`，你可以这样做：

```
Command command = (Command) event.getSource();
command.Execute(); 
```

**说明：**由于每个自定义都`JMenuItem`实现了`Command`接口，因此可以将它们转换为这样，从而利用该`Execute`方法。

发生an 的原因`NullPoinerException`是`JPanel`实例未在`Command`构造函数中分配：

```
public btnRedCommand(JPanel p, String text) {
   this.p = p;
   ... 
```

# javascript - 在 Node.js 中使用 Sinon.js 模拟 Postgres 进行单元测试

> ID：13102693
> 
> 赞同：11
> 
> 时间：2012-10-27T17:58:38.710
> 
> 标签：javascript, node.js, sinon

我很难弄清楚如何使用 sinon 来模拟对我正在测试的模块所要求的 postgres 的调用，或者是否有可能。

我不是在尝试测试 postgres 模块本身，只是我的对象以确保它按预期工作，并且它正在调用它在这种情况下应该调用的内容。

我想问题是节点的要求设置，因为我的模块需要 postgres 模块才能访问数据库，但是在这里我不想运行集成测试，我只想确保我的代码独立工作，并不真正关心数据库在做什么，我将把它留给我的集成测试。

我见过一些人设置他们的函数有一个可选参数来发送模拟/存根/假的函数，测试它的存在，如果它存在，在所需的模块上使用它，但这对我来说似乎是一种气味（我是节点的新手，所以也许这不是）。

我宁愿模拟这一点，而不是在可能的情况下尝试劫持需求。

**一些代码**（请注意，这不是真正的代码，因为我正在使用 TDD 运行并且该函数实际上并没有做任何事情，函数名称是真实的）

**测试设置**

```
describe('#execute', function () {
it('should return data rows when executing a select', function(){
 //Not sure what to do here
});
}); 
```

**示例函数**

```
PostgresqlProvider.prototype.execute = function (query, cb) {
var self = this;

if (self.connection === "")
    cb(new Error('Connection can not be empty, set Connection using Init function'));

if (query === null)
    cb(new Error('Invalid Query Object - Query Object is Null'))

if (!query.buildCommand)
    cb(new Error("Invalid Query Object"));

//Valid connection and query
}; 
```

像这样包裹 postgres 模块可能看起来有点有趣，但是有一些设计，因为这个应用程序将有几个“提供程序”，我想为它们公开相同的 API，以便我可以互换使用它们。

**更新**

我认为我的测试太复杂了，因为我想看看是否已经进行了连接调用，然后返回数据，这对我来说很重要，所以我将其剥离并放入两个测试中：

**模拟测试**

```
it('should call pg.connect when a valid Query object is parsed', function(){
        var mockPg = sinon.mock(pg);
        mockPg.expects('connect').once;            

        Provider.init('ConnectionString');
        Provider.execute(stubQueryWithBuildFunc, null, mockPg);

        mockPg.verify();
    }); 
```

这有效（我认为）因为没有 postgres 连接器代码它失败，它通过了（繁荣 :)）

现在的问题是第二种方法，我将使用一个存根（可能是一个间谍），当它应该失败时它会通过 100%，所以我会在早上拿起它。

**更新 2**

我对测试不是 100% 满意，主要是因为我没有劫持 client.query 方法，它是命中数据库的方法，而只是我的 execute 方法并强制它走上一条路径，但它让我看到了结果并反对它以测试行为，但将对任何建议的改进持开放态度。

我正在使用间谍来捕获该方法并返回 null 和一个包含行的人造对象，就像该方法会传回一样，这个测试会随着我添加更多查询行为而改变，但它让我克服了我的障碍。

```
 it('should return data rows when a valid Query object is parsed', function(){

        var fauxRows = [
            {'id': 1000, 'name':'Some Company A'},
            {'id': 1001, 'name':'Some Company B'}
        ];

       var stubPg = sinon.stub(Provider, 'execute').callsArgWith(1, null, fauxRows);

       Provider.init('ConnectionString');
       Provider.execute(stubQueryWithBuildFunc, function(err, rows){
           rows.should.have.length(2);
       }, stubPg);

       stubPg.called.should.equal.true;
       stubPg.restore();
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-21T15:38:50.870

使用 pg-pool：[https ://www.npmjs.com/package/pg-pool](https://www.npmjs.com/package/pg-pool)

无论如何，它都将被添加到 pg 中，据称使（模拟）单元测试更容易......来自 BrianC （[https://github.com/brianc/node-postgres/issues/1056#issuecomment-227325045](https://github.com/brianc/node-postgres/issues/1056#issuecomment-227325045)）：

> 结帐[https://github.com/brianc/node-pg-pool](https://github.com/brianc/node-pg-pool) - 它将很快成为 node-postgres 中的池实现，并且不依赖单例，这使得模拟更容易。希望这会有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T19:29:48.980

我非常明确地替换了我的依赖项。这可能不是最好的解决方案，但我看到的所有其他解决方案也不是那么好。

```
inject: function (_mock) {
  if (_mock) { real = _mock; }
} 
```

您将此代码添加到被测模块中。在我的测试中，我调用了注入方法并替换了真实对象。我不是 100% 喜欢它的原因是您必须添加额外的代码仅用于测试。

另一种解决方案是将模块文件作为字符串读取并使用[vm](http://nodejs.org/api/vm.html)手动加载文件。当我对此进行调查时，我发现它有点复杂，所以我只使用了注入功能。不过，可能值得研究这种方法。[您可以在此处](http://howtonode.org/testing-private-state-and-mocking-deps)找到更多信息。

# javascript - 解释这个 javascript 函数声明“jQuery(function($){}”

> ID：13102699
> 
> 赞同：1
> 
> 时间：2012-10-27T17:59:07.037
> 
> 标签：javascript, jquery, function

我在 chrome 扩展的源代码中遇到了这段脚本。它声明了一个函数：

```
jQuery(function($){
    $('#actionCopy').click(function(e){
        Action.copy();
    });
}); 
```

`jQuery`函数开头使用的那个词是什么？用作函数参数的美元符号有什么作用？（函数（`$`））

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T18:03:16.223

将*函数*作为第一个参数传入*jQuery 构造函数*只是`.ready()`.

```
jQuery(document).ready(function() {
}); 
```

jQuery 会很好地将`jQuery` *对象引用*传递给您为`.ready`处理程序传递的回调。这意味着，您可以使用其中的美元符号轻松访问*jQuery 对象*`$`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T10:28:59.360

[jQuery](http://jquery.com/)是流行的 JavaScript 库。$ 是访问 jQuery 对象的简写。在函数 'function($)' 中传递 $ 将确保 $ 不会与使用的任何其他 javascript 库冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T10:51:39.053

> 函数开头使用的 jQuery 单词是什么？

它指的是一个被调用的函数`jQuery`（由[http://jquery.com](http://jquery.com/)提供的库定义）。

该特定函数严重超载，但在这种情况下（当它接收一个作为函数的参数时）它意味着“将此函数绑定到文档就绪事件”（为了不支持该事件的浏览器的利益而使用一些 pollyfill原生）。

> 用作函数参数的美元符号有什么作用？

The same as a letter `a` or the word `foo` or anything else. It defines the variable name that the argument will be passed to. There is nothing special about the `$` character in JavaScript variable names.

# php - 未捕获的异常错误 PHP

> ID：13102705
> 
> 赞同：0
> 
> 时间：2012-10-27T17:59:23.030
> 
> 标签：php, exception, exception-handling, try-catch

致命错误：未捕获的异常“异常”和消息“

错误：以下字段尚未填写 - 第 9 行 /vagrant/web/Assignment4/Person.php 中的姓氏

我正在尝试检查表单以确保所有字段都已填写。如果其中任何一个为空，我想抛出一个错误，说明哪些字段为空。我很难理解捕获异常是如何工作的，所以谁能告诉我他们将如何解决这个问题？

人.php

```
 public function insert()
{

  //Storing required $_POST array fields in variable for isset function    

   $expectedValues = array(
       "firstName"   => "First Name",
       "lastName"    => "Last Name",
       "title"       => "Title",
       "office"      => "Office",
       "phoneNumber" => "Phone Number",
       "email"       => "Email",
       );

   //Checking to see if all fields are filled in 

    foreach ($expectedValues as $field => $humanName) { 
       if (empty($_POST[$field])) { 
        $errorArray[] = $humanName;
         foreach($errorArray as $print){
            throw new Exception("<p>" . "Error: The following fields have not been filled out- " . $print . "</p>");
         }

         try{
             (count($errorArray) = 0);
         }
         catch(Exception $e){
             echo "<p>" . $e->getMessage() . "</p>";
         }
       } 
     }

       //If they are, insert them into the Perosn table    

               $insert = $this-> doQuery("INSERT INTO Person 
                                         VALUES(
                                        '$_POST[firstName]',
                                        '$_POST[lastName]',
                                        '$_POST[title]',
                                        '$_POST[office]',
                                        '$_POST[phoneNumber]',
                                        '$_POST[email]')");

                                  $insert;

         //If insert query is successful, return true 
            if ($insert === true){
                return true; 
                echo "Congragulations! You now work for Assignment 4 Incorporated";
            }

         //If not, throw an exception    

            //else{
              //  throw new Exception
               // ("<p>" . "Error: Query was unsuccessful:" 
               // . " " . $this->error . "</p>");
               // }

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:15:41.997

如果你想向用户显示错误然后抛出异常是错误的方式，试试这个：

```
foreach ($expectedValues as $field => $humanName) { 
   if (empty($_POST[$field])) { 
       $errorArray[] = $humanName;
   } 
 }
 if (count($errorArray) > 0) {
      echo 'Following fields are empty: '.implode(' ', $errorArray);  
 } 
```

另外为了好玩，请查看所需的 HTML5 属性：

```
<input type="text" required="required" value="" /> 
```

# facebook - 最新版本的 php-sdk 的重定向问题

> ID：13102710
> 
> 赞同：0
> 
> 时间：2012-10-27T17:59:52.343
> 
> 标签：facebook, facebook-graph-api, permissions, publish, facebook-authentication

我们使用了最新版本的 php-sdk 3

```
<?php

    try{
        include_once "connect.php";
    }

    catch(Exception $o){
        echo '<pre>';
        print_r($o);
        echo '</pre>';
    }

   if (isset($_GET['code'])){
        header("Location: " . $appsurl);
        exit;
    }
    //~~

    //
    if (isset($_GET['request_ids'])){
        //user comes from invitation
        //track them if you need
    }

    $user            =   null; //facebook user uid
    try{
        include_once "facebook.php";
    }
    catch(Exception $o){
        echo '<pre>';
        print_r($o);
        echo '</pre>';
    }
    // Create our Application instance.
    $facebook = new Facebook(array(
      'appId'  => $fbconfig['appid'],
      'secret' => $fbconfig['secret'],
      'cookie' => true,
    ));

    //Facebook Authentication part
    $uid       = $facebook->getUser();

    $loginUrl   = $facebook->getLoginUrl(
            array(
                'scope'         => 'publish_stream'
            )
    );

    if ($uid) {
      try {
        // Proceed knowing you have a logged in user who's authenticated.
        $user_profile = $facebook->api('/me');
      } catch (FacebookApiException $e) {
        //you should use error_log($e); instead of printing the info on browser
        d($e);  // d is a debug function defined at the end of this file
        $user = null;
      }
    }

    if (!$uid) {
        echo "<script type='text/javascript'>top.location.href = '$loginUrl';</script>";
        exit;
    }

    //get user basic description
    $userInfo           = $facebook->api("/$uid");

    function d($d){
        echo '<pre>';
        print_r($d);
        echo '</pre>';
    }
?> 
```

我们允许应用程序（转到应用程序）并允许发布到墙上。

允许帖子上墙后，它不会重定向应用程序 url($appsurl)。它会像这样显示

```
https://[hostingurl]/?state=7f76eb2ad732398827215d86f946a690&code=AQBZ2nsbbs3lfBSBwr_HzFpcKIIZlfjAijl9db7wyn1xEIZ4-W7BqQbFtnVZ8UM_4nQ9qIk57msjw6RlLb6VQqGrF3nupBFoEmrypAPmftAsS4ILW9LEJA5gzTMb2VJhwBHHqSpwGHUbh98bNQQQxkX50Ns5kVaffUUylXrIgy6MQcLxU66hQS7qMImHg5Mi2tUrpPqlWbZNQzlooMkv1WAt#_=_ 
```

我们也尝试了 indexpage 中的重定向代码。

```
if (isset($_GET['code'])){
        header("Location: " . $appsurl);
        exit;
    } 
```

但重定向没有发生。

请你帮助我好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:51:11.843

尝试这个：

```
$loginUrl   = $facebook->getLoginUrl(
            array(
                'scope'         => 'publish_stream',
                'redirect_uri'  => 'https://apps.facebook.com/yourNameSpace'
            )
    ); 
```

# php - 致命错误：在 .php 文件中的非对象上调用成员函数 query()

> ID：13102714
> 
> 赞同：2
> 
> 时间：2012-10-27T18:00:07.457
> 
> 标签：php, mysql

我是 PHP 和 SQL 的新手，但我正在尝试为我的 webapp 创建一个登录脚本。出于某种原因，我被卡住了。当用户名或密码字段为空时，有警报，但当它们都填写正确或错误时，没有警报。

当我在浏览器（Chrome）中打开网站并检查页面时，我得到：

**“POST ../App/auth.php 500（内部服务器错误）”**

当我从服务器打开 error.log 文件时，我得到：

**“PHP 致命错误：在第 24 行的 ../App/class.manageUsers.php 中调用非对象的成员函数 query()，引用者：../App/login.php”**

class.manageUsers.php 中的第 24 行是：

```
$query = $this->link->query("SELECT * FROM users WHERE username = '$username' AND
password = '$password' LIMIT 1"); 
```

类.manageUsers.php：

```
<?php

include_once('class.database.php');

class ManageUsers{

    protected $link;

    function __construct(){
        $db_conn = new ManageDatabase;
        $this->link = $db_conn->connect();
        return $this->link;
    }
    function addUsers($username,$firstname,$lastname,$email,$password,$user_level){
        $query = $this->link->prepare("INSERT INTO users (username,firstname,lastname,email,password,user_level)
            VALUES (?,?,?,?,?,?)
        ");
        $values = array($username,$firstname,$lastname,$email,$password,$user_level);
        $query->execute($values);
        $rowCount = $query->rowCount();
        return $rowCount;
    }
    function loginUsers($username,$password){
        $query = $this->link->query("SELECT * FROM users WHERE username = '$username' AND password = '$password' LIMIT 1");
        $rowCount = $query->rowCount();
        return $rowCount;           
    }
    function listUsers($user_id = null){
        if(isset($user_id))
        {
        $query = $this->link->query("SELECT * FROM users WHERE id = '$user_id' LIMIT 1");
        }
        else
        {
        $query = $this->link->query("SELECT * FROM users ORDER BY id DESC");
        }
        $rowCount = $query->rowCount();
        if($rowCount >= 1)
        {
            $result = $query->fetchAll();
        }
        else
        {
            $result = 0;
        }
        return $result;
    }

    function editUsers($user_id,$param){
        foreach ($param as $key => $value)
        {
        $query = $this->link->query("UPDATE users SET $key = '$value' WHERE id = '$user_id' LIMIT 1");
        }
        $rowCount = $query->rowCount();
        return $rowCount;
    }

    function deleteUsers($user_id){
        $query = $this->link->query("DELETE FROM users WHERE id = '$user_id' LIMIT 1");
        $rowCount = $query->rowCount();
        return $rowCount;
    }

}

?> 
```

类.database.php：

```
<?php

class ManageDatabase{

    protected $db_conn;
    protected $db_host = 'localhost';
    protected $db_name = 'jqueryMobile';
    protected $db_user = 'root';
    protected $db_pass = '';

    function connect(){
        try{
            $this->db_conn = new PDO("mySQL:host=$this->db_host;dbname=$this->db_name",$this->db_user,$this->db_pass);
            return $this->db_conn;
        }
        catch(PDOexception $e){
            return $e->getMessage();
        }
    }

}
?> 
```

我希望有人能找到它似乎出错的地方。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T20:03:01.197

据我所知，错误的直接原因是空的“链接”属性。连接到 db 时，似乎 dbmanager 类失败。这可以解释为什么不能调用查询方法。

# asp.net - 将源文件写入自定义 asp.net 服务器控件中的输出

> ID：13102715
> 
> 赞同：1
> 
> 时间：2012-10-27T18:00:14.653
> 
> 标签：asp.net, custom-controls

我正在编写自己的服务器端控件。我需要在此控件中使用一些图像。如何写入输出图像文件[或任何其他文件]然后访问它？

```
 protected override void RenderContents(HtmlTextWriter output)
    {
       .......
       output.Write("some file");
       string endResult = "<img src= how to access this file? />"
       output.Write(endResult);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T19:03:35.763

# 选项 1：直接嵌入

您可以使用[数据 URI](http://en.wikipedia.org/wiki/Data_URI_scheme)将图像（和其他文件）直接嵌入到网页中。就像是：

```
protected override void RenderContents(HtmlTextWriter output)
{
    ............
    byte[] rawImgData = []; //add your data here, maybe from a FileStream
    String imgMimeType = "[img mime type, eg image/png]";
    String encodedImgData = Convert.ToBase64String(rawImageData);

    output.Write(String.Format("<img src=\"data:{0},{1}\" />", imageMimeType, encodedImageData))
} 
```

如链接中所述，这种方法有很多缺点。如果您将为控件的每个请求提供相同的图像，那么您应该真正使用静态文件。

## 选项2：保存到服务器并映射它

假设您的 IIS 工作人员帐户（通常称为 IUSR）对服务器上的某个位置具有写入权限，您可以将其保存`Server.MapPath`并发送实际链接。

```
protected override void RenderContents(HtmlTextWriter output)
{
    ............
    byte[] rawImgData = []; //add your data here, maybe from a FileStream

    FileStream fileStream = System.IO.File.Create(Server.MapPath(virtualPath))
    fileStream.Write(rawImgData, 0, rawImgData.Length)
    fileStream.Close()

    output.Write(String.Format("<img src=\"{0}\" />", virtualPath))
} 
```

对于重复请求，这绝对是最佳选择。

# 选项 3：将其存储在内存中并通过第二页提供服务

您可以将原始数据存储在`Session`（或您选择的另一个临时内存存储）中，发送带有标识符的链接，然后从另一个页面提供服务。就像是：

```
protected override void RenderContents(HtmlTextWriter output)
{
    ............
    byte[] rawImgData = []; //add your data here, maybe from a FileStream

    Session["MyImgTempStorage"] = rawImgData;

    output.Write("<img src=\"ServeImgTempStorage.ashx?file=MyImgTempStorage\");
} 
```

并制作一个名为 ServeImgTempStorage.ashx 的通用处理程序，如下所示：

```
public class ServeImgTempStorage : System.Web.IHttpHandler
{

public void ProcessRequest(HttpContext context)
{
    string fileKey = context.Request.QueryString("file");
    if (string.IsNullOrEmpty(fileKey)) {
        return;
    }

    byte[] rawData = context.Session(fileKey);

    context.Response.Write(rawData);
    context.Response.ContentType = "[your mime type.  you can force a download with attachment;]";
    context.Response.End();
}

public bool IsReusable {
    get { return false; }
}

} 
```

您需要确保对以这种方式提供的每个文件都使用*会话唯一标识符，否则您将覆盖数据。*

注意：我的 C# 语法可能不正确，我通常用 VB 编写。

# c# - 有没有办法在 wpf wrappanel 中显示不同宽度的项目

> ID：13102716
> 
> 赞同：11
> 
> 时间：2012-10-27T18:00:18.673
> 
> 标签：c#, wpf

我正在尝试类似 Windows 8 的瓷砖，并希望显示不同宽度和/或高度的瓷砖。`WrapPanel`使每列的宽度和高度相等，在较小的项目周围留下空白。有没有一种方法或面板可以像 a 一样显示项目，`StackPanel`其中每个项目都可以具有单独的尺寸并像 a 一样包装`WrapPanel`？

编辑：这是我的`ItemsControl`. `Border`我用一个简单的and替换了 Tile DataTemplate `TextBlock`。除了创建大小相等的单元格外，宽度`auto`和瓷砖看起来都很好。`WrapPanel`

```
 <ItemsControl ItemsSource="{Binding Path=Contents}" HorizontalContentAlignment="Left">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel Orientation="Vertical" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Border Background="#B1DBFC" Height="200px" BorderBrush="#404648" Margin="5">
                        <TextBlock VerticalAlignment="Center" Text="{Binding Path=Name}" />
                    </Border>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl> 
```

![包裹面板](../Images/7184deab6250041ee331d7f184fd67c6.png)

从图中可以看出`width`，每列的 是最宽项的宽度。

如果我在边框上明确设置宽度，事情会变得更丑陋。 ![设置宽度的项目](../Images/3f03e45a2b2260fb78d897fe99eede7b.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-28T07:48:34.543

您正在寻找的行为是从以下示例中可以看出的*默认*行为。`WrapPanel`

```
<WrapPanel >
    <WrapPanel.Resources>  
        <Style TargetType="{x:Type Rectangle}">
            <Setter Property="Width"
                    Value="80" />
            <Setter Property="Height"
                    Value="80" />
            <Setter Property="Margin"
                    Value="3" />
            <Setter Property="Fill"
                    Value="#4DB4DD" />
        </Style>
    </WrapPanel.Resources>

    <Rectangle Width="150" />
    <Rectangle />
    <Rectangle />
    <Rectangle />
    <Rectangle Width="200"/>
    <Rectangle />
    <Rectangle />
    <Rectangle />
    <Rectangle  Width="220"/>
    <Rectangle />
    <Rectangle />

</WrapPanel> 
```

这会产生以下结果：

![在此处输入图像描述](../Images/10f418b2123739f5f7311ad4bdd4af54.png)

正如你所看到的，每个项目的宽度都是很荣幸的。

您的问题是由在模板中设置`WrapPanel`to的方向引起的。`Vertical`这是从上到下而不是从左到右布置项目，这意味着它是`Height`您需要设置的属性（或者您可以恢复为水平布局，如我的示例所示）。

将您的输出与我的屏幕截图进行比较，其中面板设置为水平方向；每一**行**的大小都是最高的`Rectangle`。不相信我？尝试将`Rectangle's` `Height`属性之一设置为更大的值，您会观察到行大小将增加并且`Rectangles`不再垂直排列。

阅读您的评论，我认为最好的开始方法是执行以下操作：

*   有一个`WrapPanel`水平布局其内容的。
*   物品应统一`Height`。
*   `Height`将的约束`WrapPanel`到一定大小，以免出现垂直滚动条。

您的身高`WrapPanel`应使用以下公式计算：

> （（项目高度 + 上边距 + 下边距）x 行数））

每个项目的宽度也需要考虑一下，以便面板像地铁界面一样水平放置项目（排列而不是交错）。

有两种瓷砖尺寸；小的为 80px 宽，大的为 166px 宽。大瓷砖的宽度是这样计算的：

> (项目宽度 * 2) + (左边距 + 右边距)

这可以确保瓷砖正确排列。

所以现在我的 XAML 看起来像这样：

```
<ScrollViewer HorizontalScrollBarVisibility="Auto"
              VerticalScrollBarVisibility="Disabled">
    <StackPanel Orientation="Horizontal"
                Margin="10,0">
        <StackPanel.Resources>
            <Style TargetType="{x:Type Rectangle}">
                <Setter Property="Width"
                        Value="80" />
                <Setter Property="Height"
                        Value="80" />
                <Setter Property="Margin"
                        Value="3" />
                <Setter Property="Fill"
                        Value="#4DB4DD" />
            </Style>
            <Style TargetType="{x:Type WrapPanel}">
                <Setter Property="Margin"
                        Value="0,0,25,0" />
                <Setter Property="MaxWidth"
                        Value="516" />
            </Style>
        </StackPanel.Resources>
        <WrapPanel Height="258">
            <Rectangle Width="166" />
            <Rectangle />
            <Rectangle Width="166" />
            <Rectangle />
            <Rectangle Width="166" />
            <Rectangle />
            <Rectangle />
            <Rectangle />
            <Rectangle />
            <Rectangle Width="166" />
            <Rectangle />
        </WrapPanel>
        <WrapPanel Height="258">
            <Rectangle />
            <Rectangle Width="166" />
            <Rectangle />
            <Rectangle />
            <Rectangle />
            <Rectangle />
            <Rectangle />
            <Rectangle Width="166" />
            <Rectangle />
        </WrapPanel>
    </StackPanel>
</ScrollViewer> 
```

这会产生以下结果：

![在此处输入图像描述](../Images/92a4652e5b9074e89cbec3f00bc8cc44.png)

这应该为您提供足够的信息，以便开始将其重新考虑为完全控制。如果您这样做，请记住以下几点：

*   布局属性（小项目大小，大项目大小，间隙等）应该计算而不是硬编码，这样如果你想改变，例如，边距，布局仍然可以正常工作（IE瓷砖仍然排列）。
*   我会限制可以显示的“图块”的数量（在当前示例中，如果图块不适合布局，它们将被隐藏，这可能不是您想要的）。

# python - python定义中的类和字符串

> ID：13102717
> 
> 赞同：1
> 
> 时间：2012-10-27T18:00:31.407
> 
> 标签：python, class, function

```
class someDistance(Distance):
 def __init__(self, dist_funct_name_str = 'Something Distance', p=2):
  self.p = p 
```

只是想问什么

```
dist_funct_name_str = 'Something Distance' 
```

在定义中呢？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:02:41.797

它用于定义变量的默认值，以防在调用`dist_funct_name_str`对象时没有为其传递值。`someDistance`

例子：

```
In [69]: def func(a,b=2): # b has default value of 2
   ....:     print a,b
   ....:     
   ....:     

In [70]: func(1)   # no value passed for b ,so it is equal to 2
1 2

In [71]: func(1,5) # 5 is passed for b, so b=2 is neglected
1 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T18:05:06.853

```
dist_funct_name_str = 'Something Distance' 
```

是传递给 init 函数的“默认参数”。它基本上是用户或编码器默认使用的参数没有将任何参数传递给函数。

你可以在这里阅读更多内容： http: [//effbot.org/zone/default-values.htm](http://effbot.org/zone/default-values.htm)我也推荐这个： http: [//www.deadlybloodyserious.com/2008/05/default-argument-失误/](http://www.deadlybloodyserious.com/2008/05/default-argument-blunders/)。

不久前我也遇到过同样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T18:02:57.473

两者`dist_funct_name_str`都`p`称为默认值。如果`__init__`调用时未设置这些值，则使用这些默认值。

它们也出现在其他功能上——不仅如此`__init__`。

# vb.net - 使用 Visual Basic 编辑 PE 文件的资源

> ID：13102719
> 
> 赞同：0
> 
> 时间：2012-10-27T18:00:41.640
> 
> 标签：vb.net, visual-studio-2012, embedded-resource

有没有办法使用 Visual Basic 编辑 PE（可移植可执行文件）文件的资源，如果是，我该怎么做？

如果没有办法，有人可以指点我从命令行工作的资源编辑器的方向吗？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:35:36.797

[Google-Code 上有一个名为 Rescle](http://code.google.com/p/rescle/)的命令行资源编辑器，用 C++ 编写。因为它是开源的，所以您有两种选择：

1.  在您的程序中按原样使用、发出命令并解析输出。
2.  从中构建一个 DLL，并直接在您的代码中使用它。

另[请参阅 Stackoverflow 上的这个问题](https://stackoverflow.com/questions/200403/anyone-know-of-a-free-cheap-command-line-resource-editor-for-managed-win32-exes)，或从那里摘录：

*   [资源库](http://resourcelib.codeplex.com/)(C#)
*   [XNResourceEditor](http://www.wilsonc.demon.co.uk/d10resourceeditor.htm) (德尔福)

作为替代方案，有一个[付费工具](http://www.heaventools.com/command-line_resource_editor.htm)，价格为 200 美元以上。

# javascript - document["Some Name"] 的真正作用是什么？

> ID：13102723
> 
> 赞同：4
> 
> 时间：2012-10-27T18:01:10.030
> 
> 标签：javascript, html, document

这段代码

```
<img name="n1" src="" />
<h1 name="n2">a header</h1>
<script>
document["n1"].src = "http://x.y/picture.jpg";
document["n2"].innerHTML = "Boo";
</script> 
```

`<img>`对and`<h1>`标签做一些不同的事情。图片`src`按行预期改变`document["n1"].src`。但是标题`innerHTML`并没有像预期的那样改变`document["n2"].innerHTML`。`document["some string"]`真正返回的是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-27T18:03:53.743

在 JavaScript 中，`object["string"]`访问`'string'`. `object`这可用于访问许多不同对象的许多不同属性，就像将对象视为值的哈希映射一样。对于`document`对象，默认情况下会加载某些属性，例如具有`name`属性的元素。至少对于某些浏览器（我不知道哪个子集）。

也就是说，该[`name`属性](https://developer.mozilla.org/en-US/docs/DOM/element.name)不是`<h1>`标签上的有效属性，因此文档不会将其加载到`document["name"]`值中。

name 属性对以下元素有效：

*   `<a>`- 属性在 HTML 4 中已弃用，在 HTML5 中已过时
*   `<applet>`- HTML5 中的元素已过时
*   `<button>`
*   `<form>`- 在 HTML 4 中不推荐使用的属性，[在 HTML5 中返回](http://www.w3.org/TR/html5/the-form-element.html#attr-form-name)
*   `<frame>`- HTML5 中的元素已过时
*   `<iframe>`
*   `<img>`- 属性在 HTML 4 中已弃用，在 HTML5 中已过时
*   `<input>`
*   `<map>`
*   `<meta>`- 不一样的`name`属性
*   `<object>`
*   `<param>`- 不一样的`name`属性
*   `<select>`
*   `<textarea>`

对于这些元素中的每一个，如果它们具有`name`属性，它们将被添加到文档中，如您所见。但是，获取这些元素的首选方法是使用[`document.getElementsByName()`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByName)

# c# - 仅更改当前路由的部分值

> ID：13102729
> 
> 赞同：0
> 
> 时间：2012-10-27T18:01:29.937
> 
> 标签：c#, asp.net-mvc, routes

我的搜索页面有很多参数，在这个页面中我有一些当前搜索的过滤器。
我只想更改路线中的一些值。

一个例子：

```
http://www.example.com/{controller}/{action}/{brand}/{model}/{color}/{price} 
```

在我的搜索页面中，我有一个可以更改颜色和价格的表单：

HTML：

```
@using (Html.BeginForm("action", "controller", FormMethod.Post))
{
    @Html.DropDownListFor(m => m.Color, Model.Colors)
    @Html.DropDownListFor(m => m.Price, Model.Prices)
    <input type="submit" value="Search" />

} 
```

控制器：

```
[HttpPost]
public ActionResult Action(SearchModel search)
{
    //I can get the Price and Color
    string color = search.Color;
    string price = search.Price;

    //Now I want to get the values of brand and model

    return RedirectToRoute("Action",new
    {
         controller = "Controller",
         action = "Action",
         color = color,
         price = price,
         brand = ????,
         model = ????
    });

} 
```

我的搜索有比这更多的参数...我不想将它们放在隐藏字段中并与模型一起发送：\

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T20:59:11.683

我找到了解决方案。

我需要这样做：

```
@using (Html.BeginForm("action", 
                       "controller", 
                       new { brand = ViewContext.RouteData.Values["brand"],
                             model = ViewContext.RouteData.Values["model"] },
                             FormMethod.Post))
{
    @Html.DropDownListFor(m => m.Color, Model.Colors)
    @Html.DropDownListFor(m => m.Price, Model.Prices)
    <input type="submit" value="Search" />

} 
```

然后在控制器中：

```
[HttpPost]
public ActionResult Action(SearchModel search)
{

    return RedirectToRoute("Action",new
    {
         controller = "Controller",
         action = "Action",
         color = search.Color,
         price = search.Price,
         brand = search.Brand,
         model = search.Model
    });

} 
```

如果有人知道另一种解决方案，请告诉我。谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T18:37:12.030

为什么不把它们放在 QueryString 中呢？然后它看起来像这样：

[http://www.example.com/something.aspx?color=red&price=100](http://www.example.com/something.aspx?color=red&price=100)

然后你可以拿起你想要的，忽略其余的，顺序无关紧要。

希望这能回答你的问题，说实话并没有真正理解。

# c++ - boost deflate 和 unsigned char ptr

> ID：13102731
> 
> 赞同：2
> 
> 时间：2012-10-27T18:02:17.647
> 
> 标签：c++, boost, zlib, deflate

我有指向无符号字符数组和数据长度的指针
例如：

```
int length = 10;  
unsigned char *data = new unsigned char[length];  
std::fill(data, data + length - 1, 0x03); 
```

我需要对数据进行放气，并在 unsigned char 数组中得到结果
我发现了许多使用 boost zlib 的示例（例如[https://stackoverflow.com/a/7880805/1779649](https://stackoverflow.com/a/7880805/1779649)），但它们都使用字符串和许多数据复制。
如何缩小 unsigned char 数组并在其他 unsigned char 数组中获得尽可能少的数据复制结果？

# php - 插入数据库 mysql 无法正常工作

> ID：13102735
> 
> 赞同：0
> 
> 时间：2012-10-27T18:02:46.043
> 
> 标签：php, mysql

我有一个问题，我将在数据库 mysql 中从 android 插入此信息学生 id - 部分 id - 当前日期 - 每次用户单击按钮时，它将将此信息插入数据库中，我还检查记录是否重复，如果它是我会告诉用户你已经插入但如果不是它会正确插入我尝试插入并每次更改日期但它说你已经插入我该如何解决这个问题所以我可以在每次更改日期时插入数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:26:37.950

您只是在检查用户是否为这些字段提供了输入。
在插入记录之前，您不会检查数据库中是否已经存在此类记录。
并且可能是由于唯一约束（如果有任何定义），由于来自用户的新输入中的数据重复，下一个插入被拒绝并出现异常。

检查是否为数据唯一性定义了任何约束。
基于它们处理异常并相应地通知用户。

# parameter-passing - 将 URL 数组作为参数传递给 Powershell

> ID：13102737
> 
> 赞同：-2
> 
> 时间：2012-10-27T18:02:50.783
> 
> 标签：parameter-passing, powershell-3.0

我正在尝试编写一个脚本，该脚本将获取一个包含指向文档的 URL 链接的文本文件并下载它们。我很难理解如何在 powershell 中传递参数和操作它们。这是我到目前为止得到的。我认为我应该使用参数方法来获取参数，这样我就可以在脚本中使用它，但是 $args 在面值上似乎更容易......如果有一点帮助，将不胜感激。**更新

```
$script = ($MyInvocation.MyCommand.Name)
$scriptName = ($MyInvocation.MyCommand.Name -replace "(.ps1)" , "")
$scriptPath = ($MyInvocation.MyCommand.Definition)
$scriptDirectory = ($scriptPath.Replace("$script" , ""))

## ##################################
## begin code for directory creation.
## ##################################

## creates a direcory based on the name of the script.
do {
    $scriptFolderTestPath = Test-Path $scriptDirectory\$scriptName -PathType container
    $scriptDocumentFolderTestPath = Test-Path $scriptFolder\$scriptName"_Script_Documents" -PathType container
    $scriptLogFolderTestPath = Test-Path $scriptFolder\$scriptName"_Script_Logs" -PathType container

    if ($scriptFolderTestPath -match "False") { 
        $scriptFolder = New-Item $scriptDirectory\$scriptName -ItemType directory
    }
    elseif ($scriptDocumentFolderTestPath -match "False") {
        New-Item $scriptFolder\$scriptName"_Script_Documents" -ItemType directory       
    }
    elseif ($scriptLogFolderTestPath -match "False") {
        New-Item $scriptFolder\$scriptName"_Script_Logs" -ItemType directory
    }
} Until (($scriptFolderTestPath -match "True") -and ($scriptDocumentFolderTestPath -match "True") -and ($scriptLogFolderTestPath -match "True"))

## variables for downloading and renaming code.
$date = (Get-Date -Format yyyy-MM-dd)

## ################################
## begin code for link downloading.
## ################################

## gets contents of the arguement variable.
Get-Content $linkList

## downloads the linked file.
Invoke-WebRequest $linkList 
```

产生的错误

```
PS C:\Windows\system32> C:\Users\Steve\Desktop\Website_Download.ps1
cmdlet Website_Download.ps1 at command pipeline position 1
Supply values for the following parameters:
linkList: C:\Users\Steve\Desktop\linkList.txt

    Directory: C:\Users\Steve\Desktop\Website_Download

Mode                LastWriteTime     Length Name                                                                                     
----                -------------     ------ ----                                                                                     
d----        10/27/2012   3:59 PM            Website_Download_Script_Documents                                                        
d----        10/27/2012   3:59 PM            Website_Download_Script_Logs                                                             
Get-Content : Cannot find path 'C:\Users\Steve\Desktop\linkList.txt' because it does not exist.
At C:\Users\Steve\Desktop\Website_Download.ps1:42 char:1
+ Get-Content $linkList
+ ~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : ObjectNotFound: (C:\Users\Steve\Desktop\linkList.txt:String) [Get-Content], ItemNotFoundException
    + FullyQualifiedErrorId : PathNotFound,Microsoft.PowerShell.Commands.GetContentCommand

Invoke-WebRequest : Could not find file 'C:\Users\Steve\Desktop\linkList.txt'.
At C:\Users\Steve\Desktop\Website_Download.ps1:45 char:1
+ Invoke-WebRequest $linkList
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidOperation: (System.Net.FileWebRequest:FileWebRequest) [Invoke-WebRequest], WebException
    + FullyQualifiedErrorId : WebCmdletWebResponseException,Microsoft.PowerShell.Commands.InvokeWebRequestCommand 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T19:18:48.873

与任何其他类型的参数相比，在 Powershell 中传递参数数组没有区别。[请参阅此处](https://stackoverflow.com/questions/7152740/how-to-pass-an-array-as-a-parameter-to-another-script)了解它是如何完成的。考虑到你有一个文本文件，你不需要传递一个参数数组，只需要传递一个文件名，所以只是一个字符串。

我对您正在使用的 Powershell 3.0 没有任何经验（根据`Invoke-WebRequest`您的代码中是否存在），但我会从以下内容开始：

```
$URLFile = @"
http://www.google.ca
http://www.google.com
http://www.google.co.uk/
"@

$URLs = $URLFile -split "`n";
$savedPages = @();
foreach ($url in $URLs) {
    $savedPages += Invoke-WebRequest $url   
} 
```

也就是说，您只有一个文件，都在一个地方，并确保您正确接收您的内容。不知道你为什么需要[`Start-BitsTransfer`](http://technet.microsoft.com/en-us/library/dd819420.aspx)，因为[`Invoke-WebRequest`](http://technet.microsoft.com/en-us/library/hh849901.aspx)它已经为你提供了页面内容。请注意，我没有对 做任何事情`$savedPages`，所以我的代码实际上是无用的。

之后， 的内容`$URLFile`进入文件，您将调用替换为

```
gc "Path_To_Your_File"` 
```

如果仍然有效，`$Path`请在脚本中引入一个参数，如下所示：

```
param([string]$Path) 
```

再次测试，以此类推。如果您是 Powershell 新手，请始终从较小的代码片段开始，并不断扩展以包含您需要的所有功能。如果你从一大块开始，很可能你永远不会完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T21:07:38.237

通过 Neolisk 关于处理参数的链接解决了这个问题。然后在最后更改了一些代码以创建另一个变量并像往常一样处理事情。只是与传递参数有些混淆。

```
## parameter passed to the script.
param (
    [parameter(Position=0 , Mandatory=$true)]
    [string]$linkList
)

## variables for dynamic naming.
$script = ($MyInvocation.MyCommand.Name)
$scriptName = ($MyInvocation.MyCommand.Name -replace "(.ps1)" , "")
$scriptPath = ($MyInvocation.MyCommand.Definition)
$scriptDirectory = ($scriptPath.Replace("$script" , ""))

## ##################################
## begin code for directory creation.
## ##################################

## creates a direcory based on the name of the script.
do {
    $scriptFolderTestPath = Test-Path $scriptDirectory\$scriptName -PathType container
    $scriptDocumentFolderTestPath = Test-Path $scriptFolder\$scriptName"_Script_Documents" -PathType container
    $scriptLogFolderTestPath = Test-Path $scriptFolder\$scriptName"_Script_Logs" -PathType container

    if ($scriptFolderTestPath -match "False") { 
        $scriptFolder = New-Item $scriptDirectory\$scriptName -ItemType directory
    }
    elseif ($scriptDocumentFolderTestPath -match "False") {
        New-Item $scriptFolder\$scriptName"_Script_Documents" -ItemType directory       
    }
    elseif ($scriptLogFolderTestPath -match "False") {
        New-Item $scriptFolder\$scriptName"_Script_Logs" -ItemType directory
    }
} Until (($scriptFolderTestPath -match "True") -and ($scriptDocumentFolderTestPath -match "True") -and ($scriptLogFolderTestPath -match "True"))

## variables for downloading and renaming code.
$date = (Get-Date -Format yyyy-MM-dd)

## ################################
## begin code for link downloading.
## ################################

## gets contents of the arguement variable.
$webTargets = Get-Content $linkList

## downloads the linked file.
Invoke-WebRequest $webTargets 
```

# java - 使用度数序列创建图形

> ID：13102738
> 
> 赞同：1
> 
> 时间：2012-10-27T18:02:51.483
> 
> 标签：java, algorithm, language-agnostic, graph-theory

这是我的数据结构课程的第一个作业的一部分，所以如果你只是告诉我我错在哪里而不是发布工作代码，我会很高兴。

我们应该编写一个程序，给定一个度数序列，绘制一个图形。我为图编写了数据结构，它可以正确连接两个顶点（graph.addConnection）。但我无法找到从度数序列构建图表的方法。

[这个维基百科页面](https://en.wikipedia.org/wiki/Degree_sequence#Degree_sequence)给出了一个简单的算法：

> 1.  从没有边的图开始。
> 2.  按照剩余度要求的非递增顺序维护其度要求尚未满足的顶点列表。
> 3.  将第一个顶点连接到此列表中的下一个 d1 顶点，然后将其从列表中删除。重新排序列表并重复，直到满足所有学位要求。

我在 Java 中这样实现它：

```
public static void populate(Graph graph, int[] degrees) {
    class DegreeMapping {
        int vertice=0;
        int degree=0;
    }

    ArrayList<DegreeMapping> degrees_ = new ArrayList<DegreeMapping>(degrees.length);
    for(int i=0; i<degrees.length; i++) {
        degrees_.add(new DegreeMapping());
        degrees_.get(i).vertice = i;
        degrees_.get(i).degree = degrees[i];
    }

    while(! degrees_.isEmpty()) {
        // Sort by degrees
        Collections.sort(degrees_, new Comparator<DegreeMapping>() {
                                @Override
                                public int compare(DegreeMapping o1, DegreeMapping o2) {
                                    return o2.degree - o1.degree ;
                                }
                            }); 
        for(DegreeMapping i: degrees_) System.out.printf("{%d, #%d} ", i.degree, i.vertice );
        System.out.println();

        for(int i=1; i<degrees_.get(0).degree+1; i++) {
            degrees_.get(i).degree--;
            graph.addConnection(degrees_.get(0).vertice, degrees_.get(i).vertice);
            System.out.printf("#%d <-> #%d \n", degrees_.get(0).vertice, degrees_.get(i).vertice);
        }

        degrees_.remove(0); 
    }
} 
```

它为度数序列提供以下输出`2 2 2 2 2 2 2 2`：

```
{2, #0} {2, #1} {2, #2} {2, #3} {2, #4} {2, #5} {2, #6} {2, #7} 
#0 <-> #1 
#0 <-> #2 
{2, #3} {2, #4} {2, #5} {2, #6} {2, #7} {1, #1} {1, #2} 
#3 <-> #4 
#3 <-> #5 
{2, #6} {2, #7} {1, #4} {1, #5} {1, #1} {1, #2} 
#6 <-> #7 
#6 <-> #4 
{1, #7} {1, #5} {1, #1} {1, #2} {0, #4} 
#7 <-> #5 
{1, #1} {1, #2} {0, #5} {0, #4} 
#1 <-> #2 
{0, #2} {0, #5} {0, #4} 
{0, #5} {0, #4} 
{0, #4} 
```

如您所见，它创建了两个具有顶点 {0, 1, 2} 和​​ {3, 4, 5, 6, 7} 的不同组，它们之间没有任何联系。但它应该只创建一个图表。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:52:18.020

根据维基百科，该算法产生一个简单的图，再次根据维基百科，它是“一个无向图，没有环，任何两个不同顶点之间不超过一条边”。

你得到的是一个具有两个不同连通分量的图，而不是两个图，所以算法似乎工作正常。

如果您的作业没有明确说明应该连接图表，您不必担心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T18:34:21.730

如果您还对顶点编号进行排序，它似乎会更好。

```
// Sort by degrees and then vertex number
Collections.sort(degrees_, new Comparator<DegreeMapping>() {
    @Override
    public int compare(DegreeMapping o1, DegreeMapping o2) {
        if (o1.degree == o2.degree) return o2.vertice - o1.vertice;
        return o2.degree - o1.degree;
    }
}); 
```

**结果：**

```
{2, #0}, {2, #1}, {2, #2}, {2, #3}, {2, #4}, {2, #5}, {2, #6}, {2, #7}
#0 <-> #1
#0 <-> #2
{2, #3}, {2, #4}, {2, #5}, {2, #6}, {2, #7}, {1, #1}, {1, #2}
#3 <-> #4
#3 <-> #5
{2, #6}, {2, #7}, {1, #1}, {1, #2}, {1, #4}, {1, #5}
#6 <-> #7
#6 <-> #1
{1, #2}, {1, #4}, {1, #5}, {1, #7}, {0, #1}
#2 <-> #4
{1, #5}, {1, #7}, {0, #1}, {0, #4}
#5 <-> #7
{0, #7}, {0, #1}, {0, #4}
{0, #1}, {0, #4}
{0, #4} 
```

* * *

根据 Mihail 和 Vishnoi 的论文[“On Generating Graphs with Prescribed Degree Sequences for Complex Network Modeling Applications”](http://www.cc.gatech.edu/~mihail/www-papers/aracne02.pdf)，您可以通过之后修改算法的结果来创建连通图。

> 如果该图证明是未连接的，则连接的组件之一必须包含一个循环。令 ( *u* , *v* ) 为循环中的任何边，令 ( *s* , *t* ) 为不同连通分量中的边。*显然，图在对u* , *s*和*v* , *t*之间没有边。通过删除边 ( *u* , *v* ) 和 ( *s* , *t* )，并插入边 ( *u* , *s* ) 和 ( *v* , *t*)，我们合并这两个组件。请注意，结果图仍然满足给定的度数序列。以这种方式进行，我们可以得到一个连接的拓扑。

# ruby - Ruby 中的高精度睡眠

> ID：13102742
> 
> 赞同：0
> 
> 时间：2012-10-27T18:03:09.143
> 
> 标签：ruby, timer, sleep, precision

> **可能重复：**
> [Ruby 睡眠或延迟不到一秒？](https://stackoverflow.com/questions/2543034/ruby-sleep-or-delay-less-than-a-second)

我有 100-1000 个线程正在运行（或更多）。这些线程中的每一个都应该在完全相同的时刻（尽可能准确）执行特定的方法。

我能想到的唯一解决方案是让每个线程为某个时间戳的差异而休眠，但是`sleep()`并不那么准确。我也在考虑使用`EventMachine`and `EventMachine::Timer`，但是这似乎更不可靠和准确。

你会使用什么技术来达到最好的效果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T18:12:46.833

很多人不知道它`sleep`需要一个浮点值：

```
Suspends the current thread for duration seconds (which may be
any number, including a Float with fractional seconds). Returns the actual
number of seconds slept (rounded), which may be less than that asked for if
another thread calls Thread#run. Called without an argument, sleep() will
sleep forever.

  Time.new    #=> 2008-03-08 19:56:19 +0900
  sleep 1.2   #=> 1
  Time.new    #=> 2008-03-08 19:56:20 +0900
  sleep 1.9   #=> 2
  Time.new    #=> 2008-03-08 19:56:22 +0900 
```

不能保证延迟是准确的：

```
3.times do 
  t1 = Time.now.to_f
  sleep 0.5
  t2 = Time.now.to_f
  puts t2 - t1
end 
```

结果是：

```
0.501162052154541
0.5010881423950195
0.5001001358032227 
```

运行的其他任务可能会使这种偏差更大。

# javascript - 塔吉特不工作

> ID：13102747
> 
> 赞同：-1
> 
> 时间：2012-10-27T18:03:37.697
> 
> 标签：javascript, autocomplete

我想使用“tagit”，但它不起作用。这是（部分）我的代码：

```
<ul style="float:right" name="company" id="company"> </ul> 

<script>

$("#company").tagit("add", {label: 'tag', value: 12});

</script> 
```

各位智者，能告诉我我做错了什么以及如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T18:17:26.800

由于没有发生错误，因此插件加载没有问题。你可以试试这个。还有你用的是哪个插件？

```
<script>    
$(window).load(function() {
  $("#company").tagit("add", {label: 'tag', value: 12});
})
</script> 
```

# eclipse - 我们如何在 Eclipse 中包含 json 格式数据？

> ID：13102749
> 
> 赞同：0
> 
> 时间：2012-10-27T18:03:54.340
> 
> 标签：eclipse

我们如何在 Eclipse 中包含 json 格式数据？

请看下面

```
String responserecivied ="{"dummyuser":{"Number":1,"CUSID":1}}"; 
```

当我在 Eclipse 中包含上述内容时，我收到编译错误

它在标记上显示语法错误，删除这些标记

请告诉我如何将它包含在 Eclipse 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:41:30.033

您可以在 Eclipse 中设置一个首选项，以便更轻松地粘贴到文本中

![在此处输入图像描述](../Images/eea1ff6a506e803cf0d254505542526a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T18:32:09.647

你需要转义你的双引号

```
 String responserecivied ="{\"dummyuser\":{\"Number\":1,\"CUSID\":1}}"; 
```

# windows - 如何查询正在运行的进程的登录类型？

> ID：13102750
> 
> 赞同：1
> 
> 时间：2012-10-27T18:03:56.693
> 
> 标签：windows, winapi, session, authentication, windows-nt

我至少想区分我的软件作为批处理作业（`LOGON32_LOGON_BATCH`）运行和交互运行（`LOGON32_LOGON_INTERACTIVE`）的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:14:23.787

```
HANDLE hToken;
// Open the current process's token
if (OpenProcessToken(GetCurrentProcess(), TOKEN_QUERY, &hToken))
{
    // Get the token statistics, which include the logon session id
    TOKEN_STATISTICS stats;
    DWORD length;
    if (GetTokenInformation(hToken, TokenStatistics, &stats, sizeof(stats), &length))
    {
        // Get data about the logon session, which includes the logon type
        PSECURITY_LOGON_SESSION_DATA pData;
        if (LsaGetLogonSessionData(&stats.AuthenticationId, &pData) == 0)
        {
            // From SECURITY_LOGON_TYPE enumeration
            switch (pData->LogonType)
            {
            case Interactive:
                wprintf(L"Interactive\n");
                break;
            case Batch:
                wprintf(L"Batch\n");
                break;
            default:
                wprintf(L"Other: %i\n", pData->LogonType);
                break;
            }
            LsaFreeReturnBuffer(pData);
        }
    }
    CloseHandle(hToken);
} 
```

# python - 按 SQLAlchemy 中的对象过滤

> ID：13102760
> 
> 赞同：4
> 
> 时间：2012-10-27T18:05:06.977
> 
> 标签：python, sqlalchemy

我有一个声明的模型，其中表存储对象的“原始”路径标识符。然后我有一个`@hybrid_property`允许直接获取和设置由该字段标识的对象（这*不是*另一个声明性模型）。有没有办法直接在这个高层查询？

我可以做这个：

```
session.query(Member).filter_by(program_raw=my_program.raw) 
```

我希望能够做到这一点：

```
session.query(Member).filter_by(program=my_program) 
```

在哪里`my_program.raw == "path/to/a/program"`

`Member`有一个字段`program_raw`和一个属性`program`，它获取正确的`Program`实例并设置适当的`program_raw`值。`Program`有一个简单的`raw`字段来唯一标识它。如有必要，我可以提供更多代码。

问题是目前，SQLAlchemy 只是尝试将程序实例作为参数传递给查询，而不是它的`raw`值。这会导致`Error binding parameter 0 - probably unsupported type.`错误。

*   要么，SQLAlchemy 需要知道在比较 时`program`，它必须使用并将其与参数的属性相`Member.program_raw`匹配。只需使用即可使用`raw`它，但我不知道如何正确翻译参数（使用比较器？），和/或`Member.program_raw``@program.expression``Program`
*   SQLAlchemy 应该知道，当我按`Program`实例过滤时，它应该使用`raw`属性。

* * *

我的用例可能有点抽象，但想象一下我在数据库中存储了一个序列化的 RGB 值，并且在模型上有一个带有 Color 类的属性。我想按 Color 类进行过滤，而不必在我的过滤器中处理 RGB 值。颜色类告诉我它的 RGB 值没有问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T18:37:33.917

通过阅读`relationship`. 诀窍是对`Comparator`属性使用自定义，它知道如何比较两件事。就我而言，它很简单：

```
from sqlalchemy.ext.hybrid import Comparator, hybrid_property

class ProgramComparator(Comparator):
    def __eq__(self, other):
        # Should check for case of `other is None`
        return self.__clause_element__() == other.raw

class Member(Base):
    # ...
    program_raw = Column(String(80), index=True)

    @hybrid_property
    def program(self):
        return Program(self.program_raw)

    @program.comparator
    def program(cls):
        # program_raw becomes __clause_element__ in the Comparator.
        return ProgramComparator(cls.program_raw)

    @program.setter
    def program(self, value):
        self.program_raw = value.raw 
```

注意：就我而言，`Program('abc') == Program('abc')`（我已经覆盖`__new__`），所以我可以一直返回一个“新”程序。对于其他情况，可能应该延迟创建实例并将其存储在 Member 实例中。

# mongodb - mongoDB“多个”选择

> ID：13102762
> 
> 赞同：2
> 
> 时间：2012-10-27T18:05:14.120
> 
> 标签：mongodb

我不完全确定如何调用它，但我想做的是选择两个不同的有限制的值；例如选择 5 个类型为“A”的文档，以及 5 个类型为“B”的文档；就像是：

```
db.students.find({class: 'A'}).limit(10);
db.students.find({class: 'B'}).limit(10); 
```

这可以只用一个查询来完成吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T17:58:09.270

You could use [**$in**](http://www.mongodb.org/display/DOCS/OR+operations+in+query+expressions) to achieve this

`db.students.find({class: {$in: ['A', 'B'] }}).limit(10)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-27T05:56:31.323

这不是相同的输出。

```
db.students.find({class: {$in: ['A', 'B'] }}).limit(10) 
```

这会将 A 类和 B 类的结果限制为 10。

因此，例如**A 类匹配 10 个学生**，**B 类匹配 10 个学生**。结果将是 10 个学生。

虽然这个：

```
db.students.find({class: 'A'}).limit(10);
db.students.find({class: 'B'}).limit(10); 
```

将给 20 名学生

# c - 尝试循环数组时在 C 中出现异常错误

> ID：13102773
> 
> 赞同：0
> 
> 时间：2012-10-27T18:07:29.057
> 
> 标签：c

```
//Program Written By: Andre Chitsaz-zadeh
//Program Written On: 10/7/12
//Program calculates book cost for multiple book orders. Program written using multiple functions.`

#include <stdio.h>
#define SIZE 5

void inputData();

int main ()

{
    inputData();
}

void inputData()

{
    int i = 0;
    int costs[5];
    printf( "\nPlease enter five products costs.\n" );
    while(i < 5)
    {
    scanf("%d", costs[i]);
    i = i + 1;
    }
} 
```

为什么会出现异常错误？该程序看起来很简单！它编译没有问题，但只要我输入一个数字，它就会说“这个程序已经停止工作”。谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T18:09:30.237

```
scanf("%d", costs[i]); 
```

应该：

```
scanf("%d", &costs[i]);// &cost[i] gets the address of the memory location you want to fill. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T18:15:56.727

它应该是

```
while(i < 5) {
    scanf("%d", &costs[i]);   
    i = i + 1;
} 
```

我假设有点错字，无论如何您需要提供要扫描整数的数组元素的地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T18:09:52.963

我猜是这条线：

```
scanf("%d", costs[i]); 
```

它应该是：

```
scanf("%d", &costs[i]); 
```

`scanf`需要一个指向应该将读取结果放入其中的变量的指针。

* * *

这看起来像一个家庭作业问题，从关于该程序的评论来看具有多种功能。如果函数是新的，那么指针可能还没有被覆盖。在这种情况下，请阅读我的解释：

`scanf`需要`&`在变量之前放置读取结果。您将在几周内了解原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-27T18:10:35.943

我认为您需要将您`scanf`的线路更改为

```
scanf("%d", &costs[i]); 
```

您需要传递 int 的地址才能将用户输入写入其中。您当前的代码传递`costs[i]`. 这是未定义的，因此将指向内存中不可预测且可能不可写的位置。

# arrays - Haskell 中的数组

> ID：13102775
> 
> 赞同：6
> 
> 时间：2012-10-27T18:07:37.257
> 
> 标签：arrays, haskell

如何使用构造函数数组在 haskell 中创建数组？我的意思是，它会创建第一个元素等等吗？在那种情况下，它如何读取关联列表？

例如，如果我们考虑以下两个程序：-

```
ar :: Int->(Array Int Int)
ar n = array (0,(n-1)) (((n-1),1):[(i,((ar n)!(i+1))) | i<-[0..(n-2)]])

ar :: Int->(Array Int Int)
ar n = array (0,(n-1)) ((0,1):[(i,((ar n)!(i-1))) | i<-[1..(n-1)]]) 
```

这两个会有不同的时间复杂度吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T18:36:07.813

这取决于实现，但在合理的实现中，两者具有相同的复杂性（数组大小呈线性）。

GHC的数组实现中，如果我们看代码

```
array (l,u) ies
    = let n = safeRangeSize (l,u)
      in unsafeArray' (l,u) n
                      [(safeIndex (l,u) n i, e) | (i, e) <- ies]

{-# INLINE unsafeArray' #-}
unsafeArray' :: Ix i => (i,i) -> Int -> [(Int, e)] -> Array i e
unsafeArray' (l,u) n@(I# n#) ies = runST (ST $ \s1# ->
    case newArray# n# arrEleBottom s1# of
        (# s2#, marr# #) ->
            foldr (fill marr#) (done l u n marr#) ies s2#)

{-# INLINE fill #-}
fill :: MutableArray# s e -> (Int, e) -> STRep s a -> STRep s a
-- NB: put the \s after the "=" so that 'fill' 
--     inlines when applied to three args 
fill marr# (I# i#, e) next 
 = \s1# -> case writeArray# marr# i# e s1# of 
             s2# -> next s2# 
```

我们可以看到，首先为数组分配了一块新的内存，然后依次填充`arrEleBottom`（这是一个`error`带有消息“未定义数组元素”的调用），然后将列表中提供的元素写入相应的索引按照它们在列表中出现的顺序。

通常，由于它是一个装箱数组，因此在构造时写入数组的是一个 thunk，它指定如何在需要时计算该值（明确指定的*values*，如示例中的文字`1`，将导致直接指针到写入数组的那个值）。

当强制评估这种 thunk 时，它也可能强制评估数组中的进一步 thunk - 如果 thunk 引用其他数组元素，就像这里一样。在这里的具体示例中，强制任何 thunk 会导致稍后强制所有 thunk。在数组的前面，直到到达不引用另一个数组元素的条目的末尾。在第一个示例中，如果强制的第一个数组元素是索引 0 处的元素，则构建一个大小与数组长度成比例的 thunk，然后将其减小，因此强制第一个数组元素的复杂度为 O(n)，然后所有进一步的元素都已经被评估，并且强制它们是 O(1)。在第二个示例中，情况是对称的，强制最后一个元素首先会产生总评估成本。如果以不同的顺序要求元素，评估所有 thunk 的成本分散在对不同元素的请求中，但总成本是相同的。评估任何尚未评估的 thunk 的成本与其与下一个已评估的 thunk 的距离成正比，并且包括评估其间的所有 thunk。

由于数组访问是恒定的时间（缓存效果除外，但如果您向前或向后填充数组，这些不应该有区别，如果索引是随机顺序，它们可能会产生很大的不同，但这仍然不会影响时间复杂度），两者具有相同的复杂度。

但是请注意，您使用`ar n`定义数组元素会带来分配多个数组的风险（如果在没有优化的情况下编译，GHC 会这样做 - 刚刚测试过：即使可能发生优化）。为了确保只有一个被构建，让它

```
ar n = result
  where
    result = array (0,n-1) (... result!index ...) 
```

# apache - 如何计算正则表达式来编写 htaccess 规则

> ID：13102776
> 
> 赞同：0
> 
> 时间：2012-10-27T18:07:52.203
> 
> 标签：apache, .htaccess

我想要这个网址

[http://rebateninja.com/index.php?page=home](http://rebateninja.com/index.php?page=home)

像这样通过 htaccess 预览

[http://rebateninja.com/home](http://rebateninja.com/home)

我知道这并不难，我以前也这样做过，但由于某种原因，它现在根本不起作用。我的 .htaccess 包含以下内容：

```
RewriteEngine On
RewriteRule (index.php\?page=)(.*) /$2 [NC,R=301,L] 
```

我做错了什么？也许它与我的 Apache 版本有关？我整个早上都没有成功！！！感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:31:54.027

您无法匹配 a 中的查询字符串`RewriteRule`，您需要将 a`RewriteCond`与`%{THE_REQUEST}`or一起使用，`%{QUERY_STRING}`并使用**%**来反向引用分组：

```
RewriteCond %{THE_REQUEST} ^(GET|POST|HEAD)\ /index\.php\?page=([^&\ ]+)
RewriteRule /%2? [L,R=301] 
```

这会在外部重定向浏览器，以便地址栏中的 URL 发生变化。为了在内部重写它，您需要执行以下操作：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.phjp?page=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T18:13:00.330

尝试这个。

```
RewriteRule ^index.php\?page=(.*)$ /$1 [NC,R=301,L] 
```

# python - Eclipse 显示空格但“python -tt”声明选项卡

> ID：13102777
> 
> 赞同：0
> 
> 时间：2012-10-27T18:08:01.343
> 
> 标签：python, eclipse, pydev

通过在 Eclipse 中开发所有内容，我一直在为一个项目慢慢修复我的 Python 文件。但是，我目前被卡住了，因为我得到了一个*`Unexpected Indent Error`*.

我将首选项设置为用 4 个空格替换选项卡，并且我使用搜索/替换将现有选项卡转换为 4 个空格。

显示的文件看起来像是所有缩进空格，但使用`python -tt script.py`声明它仍然是一个制表符。我一再删除字符并用空格替换，但它仍然声称第 358 行有一个选项卡：

```
357>    else:
358>        target1 = 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T03:27:24.223

首先，请执行以下操作以首先防止制表符

> Windows -> Preferences -> General -> Editors -> Text Editor -> Insert spaces for tabs = True Windows -> Preferences -> General -> Editors -> Text Editor -> Displayed Tab Width = 4。

接下来，选中以下复选框以查看空格字符。

> Windows -> 首选项 -> 常规 -> 编辑器 -> 文本编辑器 -> 显示空白字符

这将显示源文件中的所有制表符和换行符。修改第一个选项后，格式化文件（使用 Ctrl + Shift + F）以将所有制表符替换为空格，然后您将看到正确的缩进。

# c++ - 如何用 1 个变量替换正则表达式字符串？

> ID：13102782
> 
> 赞同：1
> 
> 时间：2012-10-27T18:08:30.560
> 
> 标签：c++, regex, vector

我正在研究类似于 C++ 模板引擎的东西。使用标准`<regex>`库，如何在具有此模式的字符串中找到多个匹配项：（`AB $1 BA`不使用 AB 上的转义字符，es. `\AB`，但使用 AB 之前的任何其他字符）并将匹配项存储在字符串向量中？

例如：

```
string main_string = "Something cool \AB blabla BA, something else AB first BA, something AB second BA more.";
vector<string> matches;
// algorithm here 
```

and 匹配应该包含`first`and `second`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T18:56:36.897

```
#include <string>
#include <regex>
#include <vector>
#include <iostream>

int main() {
    std::string target_text(
        "Something cool \\AB blabla BA, something else AB first BA, "
        "something AB second BA more.");
    std::vector<std::string> result;
    typedef std::string::const_iterator iter_type;
    std::regex rgx("[^\\\\]AB(.*?)BA");
    std::regex_iterator<iter_type> iter(target_text.begin(),
                                        target_text.end(),
                                        rgx);
    std::regex_iterator<iter_type> end;
    for ( ; iter != end; ++iter)
        result.push_back((*iter)[1].str());
    for (int i = 0; i < result.size(); ++i)
        std::cout << result[i] << '\n';
    return 0;
} 
```

正则表达式不太正确；它不会匹配`"ABcBA"`，因为它在模式的其余部分之前坚持一个字符（不是反斜杠）。这可以用否定断言代替字符组来解决，但是我尝试的简单测试不起作用，我现在不想花更多时间。

# exception - gwt 与 RequestFactory，处理客户端和 RequestFactoryEditorDriver 上的服务器端异常

> ID：13102783
> 
> 赞同：0
> 
> 时间：2012-10-27T18:08:41.053
> 
> 标签：exception, gwt, editor, requestfactory

我使用 RequestFactory 与客户端的服务器和 RequestFactoryEditorDriver 进行通信。所以编辑工作流程看起来像这样。创建新的编辑代理：

```
RequestContext reqCtx = clientFactory.getRequestFactory().Request();
UserAndAccountProxy userAndAccountProxy = reqCtx.create(UserAndAccountProxy.class);
reqCtx.saveAndReturnProfileAndAccount(userAndAccountProxy).to(
    new Receiver<UserAndAccountProxy>() {
      @Override
      public void onSuccess(UserAndAccountProxy response) {
      ...
      }

      @Override
      public void onFailure(ServerFailure error) {
        ...
      }} 
```

和保存按钮点击处理：

```
 RequestContext reqCtx = view.getEditorDriver().flush();
    reqCtx.fire(); 
```

在服务器端 saveAndReturnProfileAndAccount 方法可以在持久化时抛出异常，我可以在 onFailure 方法中处理。之后，如果我使用新的请求上下文创建新代理并将其传递给我的编辑器，所有字段都将被空白。那么执行请求的正确方法是什么，如果出现问题，使用用户已经填写的数据，或者我在编辑工作流中犯了错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:48:09.660

所以，我想，我找到了解决方案。我对创建 RequestContext 的函数进行了更改：

```
 private void edit(MyProxy proxy) {

    RequestContext reqCtx = clientFactory.getRequestFactory().Request();

    if (proxy == null) {
      // create proxy first time
      proxy = reqCtx.create(UserAndAccountProxy.class);
    } else {
      // create immutable copy
      proxy = reqCtx.edit(proxy);
    }

    final UserAndAccountProxy tmp = proxy;

    reqCtx.saveAndReturnMyProxy(proxy).to(new Receiver<MyProxy>() {

      @Override
      public void onFailure(ServerFailure error) {
        eventBus.showErrorInformation(error.getMessage());
        //recursive call with already filled proxy
        edit(tmp);
      }

      @Override
      public void onSuccess(UserAndAccountProxy response) {
        eventBus.showInformation("It`s ok!");
        eventBus.goToMainPage(null);
      }
    });
    // start editing with editor
    getView().onEdit(tmp, reqCtx);
  } 
```

当我们开始编辑代理功能时，需要使用空参数调用编辑，并且将创建新的干净代理。之后，我们开始使用编辑器对其进行编辑。在保存按钮上单击我们执行对服务器的请求。如果它以成功结束 - 我们打开另一个页面。如果请求以错误结束，我们创建新的不可变副本并将其推送到编辑器。

# android - Android在没有打开对话框的情况下将消息发布到Facebook Wall？

> ID：13102784
> 
> 赞同：0
> 
> 时间：2012-10-27T18:09:20.960
> 
> 标签：android, facebook, facebook-graph-api

我正在做一个应用程序，在该应用程序中，我想在不打开对话框的情况下将消息发布到 Facebook 墙上。

我完整的 facebook 墙邮编：

```
Facebook mFacebook = new Facebook("xxxxxxxxxxxxxxxx");//MY APP ID
        Log.d("Tests", "Testing graph API wall post");
        try {
            String response = mFacebook.request("xxxxxxx");//USER ID
            Bundle parameters = new Bundle();
            parameters.putString("message", "hi hi hi");
            parameters.putString("description", "test test test");
            response = mFacebook.request("xxxxxxxx/feed", parameters,"POST");
            if (response == null || response.equals("") || 
                    response.equals("false")) {
                Log.v("Error", "Blank response");
            }
        } catch(Exception e) {
            e.printStackTrace();
        } 
```

此代码显示错误，

日志错误：

```
10-27 23:19:53.369: WARN/System.err(9330): java.net.MalformedURLException: Protocol not found: me?format=json
10-27 23:19:53.369: WARN/System.err(9330):     at java.net.URL.<init>(URL.java:273)
10-27 23:19:53.369: WARN/System.err(9330):     at java.net.URL.<init>(URL.java:157)
10-27 23:19:53.369: WARN/System.err(9330):     at com.whitehorse.Facebook.Util.openUrl(Util.java:151)
10-27 23:19:53.369: WARN/System.err(9330):     at com.whitehorse.Facebook.Facebook.request(Facebook.java:564)
10-27 23:19:53.369: WARN/System.err(9330):     at com.whitehorse.Facebook.Facebook.request(Facebook.java:500)
10-27 23:19:53.369: WARN/System.err(9330):     at com.whitehorse.birthdayreminder.DetailsPage.PostMessageToWall(DetailsPage.java:202)
10-27 23:19:53.369: WARN/System.err(9330):     at com.whitehorse.birthdayreminder.DetailsPage.access$1(DetailsPage.java:197)
10-27 23:19:53.369: WARN/System.err(9330):     at com.whitehorse.birthdayreminder.DetailsPage$3.onClick(DetailsPage.java:149)
10-27 23:19:53.369: WARN/System.err(9330):     at android.view.View.performClick(View.java:2485)
10-27 23:19:53.369: WARN/System.err(9330):     at android.view.View$PerformClick.run(View.java:9080)
10-27 23:19:53.369: WARN/System.err(9330):     at android.os.Handler.handleCallback(Handler.java:587)
10-27 23:19:53.369: WARN/System.err(9330):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-27 23:19:53.369: WARN/System.err(9330):     at android.os.Looper.loop(Looper.java:130)
10-27 23:19:53.369: WARN/System.err(9330):     at android.app.ActivityThread.main(ActivityThread.java:3687)
10-27 23:19:53.369: WARN/System.err(9330):     at java.lang.reflect.Method.invokeNative(Native Method)
10-27 23:19:53.369: WARN/System.err(9330):     at java.lang.reflect.Method.invoke(Method.java:507)
10-27 23:19:53.379: WARN/System.err(9330):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
10-27 23:19:53.379: WARN/System.err(9330):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
10-27 23:19:53.379: WARN/System.err(9330):     at dalvik.system.NativeStart.main(Native Method) 
```

请给一些关于 facebook SDK 的建议，

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:06:35.440

这是我用于我的应用程序的代码，用于在没有对话框的情况下将消息发布到 Facebook 墙上：

```
Facebook facebook = new Facebook(MY_APP_ID);
AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
Bundle params = new Bundle();
params.putString("caption", "My Caption");
params.putString("description", "description here");
params.putString("picture", "http://nyan-cat.com/images/nyan-cat.gif");
params.putString("name", "name string");
params.putString("message", "my message here");
mAsyncRunner.request("me/feed", params, "POST", new RequestListener() {
    @Override
    public void onFacebookError(FacebookError e, final Object state) {
        Log.e("Facebook", e.getMessage());
        e.printStackTrace();
    }

    @Override
    public void onFileNotFoundException(FileNotFoundException e, final Object state) {
        Log.e("Facebook", e.getMessage());
        e.printStackTrace();
    }

    @Override
    public void onIOException(IOException e, final Object state) {
        Log.e("Facebook", e.getMessage());
        e.printStackTrace();
    }

    @Override
    public void onMalformedURLException(MalformedURLException e, final Object state) {
        Log.e("Facebook", e.getMessage());
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T03:41:26.353

```
Facebook facebook = new Facebook(APP_ID);
AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
Bundle params = new Bundle();
Bundle params = new Bundle();
params.putString("message", Message);
String resp= "";
try {
    resp = mAsyncRunner.request("me/feed", params, "POST");
/*
There are not only one request function in the SDK.(with different parameter)
Try the read the source code in the SDK. 
There are brief remarks on each function and parameters.
You can post wall with above request function and get the postID with the following code.
*/
} catch (FileNotFoundException e) {
} catch (MalformedURLException e) {
} catch (IOException e) {
}
try{
    resp = new JSONObject(resp).getString("id");//POST ID Here
}catch(JSONException e1){
}
}; 
```

# vector - Rust 中的二维向量

> ID：13102786
> 
> 赞同：13
> 
> 时间：2012-10-27T18:09:31.637
> 
> 标签：vector, rust, mutable, rust-obsolete

> 编者注：这个问题早于 Rust **0.1**（标记为 2013-07-03）并且在语法上不是有效的 Rust 1.0 代码。答案可能仍包含有价值的信息。

有谁知道如何在 Rust 中创建可变的二维向量并将它们传递给要操作的函数？

这是我到目前为止所尝试的：

```
extern crate std;

fn promeni(rec: &[u8]) {
    rec[0][1] = 0x01u8;
}

fn main() {
    let mut rec = ~[[0x00u8,0x00u8],
        [0x00u8,0x00u8]
    ];
    io::println(u8::str(rec[0][1]));
    promeni(rec);
    io::println(u8::str(rec[0][1]));
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2016-04-27T02:58:21.607

您可以使用宏[`vec!`](https://doc.rust-lang.org/std/macro.vec!.html)来创建二维向量。

```
fn test(vec: &mut Vec<Vec<char>>){
    vec[0][0] = 'd';
    ..//
    vec[23][79] = 'd';
}

fn main() {

    let mut vec = vec![vec!['#'; 80]; 24];

    test(&mut vec);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-28T04:55:52.773

您是否希望所有子数组的长度都为 2，如本例所示？在这种情况下，参数的类型不应该是`&[u8]`，这是一个借用的 u8 数组，而是`&[[u8; 2]]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-28T19:15:43.643

如果要操作的函数是您的，您可以使用辅助方法创建一个自定义结构来将向量视为 2d：

```
use std::fmt;

#[derive(Debug)]
pub struct Vec2d<T> {
    vec: Vec<T>,
    row: usize,
    col: usize,
}

impl<T> Vec2d<T> {
    pub fn new(vec: Vec<T>, row: usize, col: usize) -> Self {
        assert!(vec.len() == row * col);
        Self { vec, row, col }
    }

    pub fn row(&self, row: usize) -> &[T] {
        let i = self.col * row;
        &self.vec[i..(i + self.col)]
    }

    pub fn index(&self, row: usize, col: usize) -> &T {
        let i = self.col * row;
        &self.vec[i + col]
    }

    pub fn index_mut(&mut self, row: usize, col: usize) -> &mut T {
        let i = self.col * row;
        &mut self.vec[i + col]
    }
}

impl<T: std::fmt::Debug> std::fmt::Display for Vec2d<T> {
    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {
        let mut str = String::new();
        for i in 0..self.row {
            if i != 0 {
                str.push_str(", ");
            }
            str.push_str(&format!("{:?}", &self.row(i)));
        }
        write!(f, "[{}]", str)
    }
}

fn main() {
    let mut mv = Vec2d::new(vec![1, 2, 3, 4, 5, 6], 2, 3);
    *mv.index_mut(1, 2) = 10;
    println!("Display: {}", mv);
    println!("Debug: {:?}", mv);
} 
```

关联函数`new`创建`Vec2d`, 有两个主要方法（`index`和`index_mut`, 所以你可以得到一个借用 immut ou mut 的索引值）并添加一个`Display`trait 以更好地可视化它（但它存储为`Vec<>`）。

# qt - 防止 QGraphicsItem 移出 QGraphicsScene

> ID：13102787
> 
> 赞同：14
> 
> 时间：2012-10-27T18:09:31.740
> 
> 标签：qt, qgraphicsitem, qgraphicsscene

我有一个固定尺寸从 (0;0) 到 (481;270) 的场景：

```
scene->setSceneRect(0, 0, 481, 270); 
```

在其中，我有一个自定义`GraphicsItem`，我可以通过 flag 移动它`ItemisMovable`，但我希望它留在场景中；我实际上的意思是我不希望它的坐标既不低于 (0;0) 也不高于 (481;270)。

我尝试了几种解决方案，例如覆盖`QGraphicsItem::itemChange()`或什`QGraphicsItem::mouseMoveEvent()`至，但我仍然无法达到我想要做的事情。

什么是适合我需求的解决方案？我用`QGraphicsItem::itemChange()`得不好？

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-27T18:33:10.063

您可以像这样覆盖`QGraphicsItem::mouseMoveEvent()`：

```
YourItem::mouseMoveEvent(QGraphicsSceneMouseEvent *event)
{
    QGraphicsItem::mouseMoveEvent(event); // move the item...

    // ...then check the bounds
    if (x() < 0)
        setPos(0, y());
    else if (x() > 481)
        setPos(481, y());

    if (y() < 0)
        setPos(x(), 0);
    else if (y() > 270)
        setPos(x(), 270);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-13T09:41:02.077

此代码将您的完整项目保留在场景中。不仅是您项目的左上角像素。

```
void YourItem::mouseMoveEvent( QGraphicsSceneMouseEvent *event )
{
    QGraphicsItem::mouseMoveEvent(event); 

    if (x() < 0)
    {
        setPos(0, y());
    }
    else if (x() + boundingRect().right() > scene()->width())
    {
        setPos(scene()->width() - boundingRect().width(), y());
    }

    if (y() < 0)
    {
        setPos(x(), 0);
    }
    else if ( y()+ boundingRect().bottom() > scene()->height())
    {
        setPos(x(), scene()->height() - boundingRect().height());
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-12-20T13:08:44.690

**警告：**建议的解决方案不适用于多选项目。问题是，在这种情况下，只有一个项目会收到鼠标移动事件。

实际上，[QGraphicsItem 上的 Qt 文档](http://doc.qt.io/qt-5/qgraphicsitem.html#itemChange)提供了一个示例，该示例正好解决了将项目移动限制到场景矩形的问题：

```
QVariant Component::itemChange(GraphicsItemChange change, const QVariant &value)
{
    if (change == ItemPositionChange && scene()) {
        // value is the new position.
        QPointF newPos = value.toPointF();
        QRectF rect = scene()->sceneRect();
        if (!rect.contains(newPos)) {
            // Keep the item inside the scene rect.
            newPos.setX(qMin(rect.right(), qMax(newPos.x(), rect.left())));
            newPos.setY(qMin(rect.bottom(), qMax(newPos.y(), rect.top())));
            return newPos;
        }
    }
    return QGraphicsItem::itemChange(change, value);
} 
```

**注意 I：**您必须启用该`QGraphicsItem::ItemSendsScenePositionChanges`标志：

```
item->setFlags(QGraphicsItem::ItemIsMovable
               | QGraphicsItem::ItemIsSelectable
               | QGraphicsItem::ItemSendsScenePositionChanges); 
```

**注意二：**如果你只想对完成的动作做出反应，考虑使用`GraphicsItemChange`标志`ItemPositionHasChanged`

# java - 有没有像这个网站一样进行 AES 加密的示例 Java 代码？

> ID：13102788
> 
> 赞同：4
> 
> 时间：2012-10-27T18:09:31.910
> 
> 标签：java, encryption, aes

[http://www.hanewin.net/encrypt/aes/aes-test.htm](http://www.hanewin.net/encrypt/aes/aes-test.htm)

如果您访问此网站并输入以下内容：

```
"Key In Hex":        00000000000000000000000000123456

"Plain Text in Hex": 00000000000000000000000000000000 
```

然后点击“加密”按钮，你会看到十六进制的密文是：

```
3fa9f2a6e4c2b440fb6f676076a8ba04 
```

是否有一个Java程序可以做到这一点（即是否有一个AES库可以输入上面的“十六进制纯文本”和上面的“十六进制纯文本”并生成上面的十六进制密文？）？

我将不胜感激任何建议或指向执行此操作的 Java 示例代码的链接。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-27T20:06:36.610

有关使用 JCE 类执行此操作的标准方法，请参见下面的代码。

```
import javax.crypto.Cipher;
import javax.crypto.SecretKey;
import javax.crypto.spec.SecretKeySpec;
import javax.xml.bind.DatatypeConverter;

public class EncryptionExample {

  public static void main(String[] args) throws Exception {
    final String keyHex = "00000000000000000000000000123456";
    final String plaintextHex = "00000000000000000000000000000000";

    SecretKey key = new SecretKeySpec(DatatypeConverter
        .parseHexBinary(keyHex), "AES");

    Cipher cipher = Cipher.getInstance("AES/ECB/NoPadding");
    cipher.init(Cipher.ENCRYPT_MODE, key);

    byte[] result = cipher.doFinal(DatatypeConverter
        .parseHexBinary(plaintextHex));

    System.out.println(DatatypeConverter.printHexBinary(result));
  }
} 
```

印刷：

`3FA9F2A6E4C2B440FB6F676076A8BA04`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T02:20:36.683

除了将字节转换为 HEX，您也可以转换为 Base64。我喜欢为此使用 Apache Commons。这是一个例子。

要编译，您需要额外的 Apache Commons Codec jar，可在此处获得：

[http://commons.apache.org/proper/commons-codec/download_codec.cgi](http://commons.apache.org/proper/commons-codec/download_codec.cgi)

```
import javax.crypto.Cipher;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;

import org.apache.commons.codec.binary.Base64;

public class Encryptor {
    public static String encrypt(String key1, String key2, String value) {
        try {
            IvParameterSpec iv = new IvParameterSpec(key2.getBytes("UTF-8"));

            SecretKeySpec skeySpec = new SecretKeySpec(key1.getBytes("UTF-8"),
                    "AES");
            Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5PADDING");
            cipher.init(Cipher.ENCRYPT_MODE, skeySpec, iv);
            byte[] encrypted = cipher.doFinal(value.getBytes());
            System.out.println("encrypted string:"
                    + Base64.encodeBase64String(encrypted));
            return Base64.encodeBase64String(encrypted);
        } catch (Exception ex) {
            ex.printStackTrace();
        }
        return null;
    }

    public static String decrypt(String key1, String key2, String encrypted) {
        try {
            IvParameterSpec iv = new IvParameterSpec(key2.getBytes("UTF-8"));

            SecretKeySpec skeySpec = new SecretKeySpec(key1.getBytes("UTF-8"),
                    "AES");
            Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5PADDING");
            cipher.init(Cipher.DECRYPT_MODE, skeySpec, iv);
            byte[] original = cipher.doFinal(Base64.decodeBase64(encrypted));

            return new String(original);
        } catch (Exception ex) {
            ex.printStackTrace();
        }
        return null;
    }

    public static void main(String[] args) {

        String key1 = "Bar12345Bar12345"; // 128 bit key
        String key2 = "ThisIsASecretKet";
        System.out.println(decrypt(key1, key2,
                encrypt(key1, key2, "Hello World")));
    }
} 
```

# z3 - 在 z3 中打印内部求解器公式

> ID：13102789
> 
> 赞同：7
> 
> 时间：2012-10-27T18:09:41.670
> 
> 标签：z3, smt, theorem-proving, formal-verification

定理证明工具 z3 需要花费大量时间来解决一个公式，我相信它应该能够轻松处理。为了更好地理解这一点并可能优化我对 z3 的输入，我想查看 z3 在其求解过程中生成的内部约束。从命令行使用 z3 时，如何打印 z3 为其后端求解器生成的公式？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-27T18:37:55.053

Z3 命令行工具没有这样的选项。此外，Z3 包含几个求解器和预处理步骤。目前尚不清楚哪个步骤对您有用。Z3 源代码可在[https://github.com/Z3Prover/z3](https://github.com/Z3Prover/z3)获得。当 Z3 在调试模式下编译时，它提供了一个额外的命令行选项`-tr:<tag>`。此选项可用于有选择地转储信息。例如，源文件`nlsat_solver.cpp`包含以下指令：

```
TRACE("nlsat", tout << "starting search...\n"; display(tout); 
               tout << "\nvar order:\n"; 
               display_vars(tout);); 
```

命令行选项`-tr:nlsat`将指示 Z3 执行上述指令。`tout`是跟踪输出流。它将存储在文件中`.z3-trace`。Z3 源码中充满了这些`TRACE`命令。由于代码可用，我们也可以在代码中添加自己的跟踪命令。

如果您发布您的示例，我可以告诉您哪些 Z3 组件用于预处理和解决它。然后，我们可以选择我们应该启用哪些“标签”进行跟踪。

***编辑***（在[发布约束](http://www.ccs.neu.edu/home/jaideep/z3-constraints)后）：您的示例是混合整数和实数非线性算术。Z3 中新的非线性算术求解器 (`nlsat`) 不支持`to_int`. 因此，Z3 通用求解器用于解决您的问题。尽管这个求解器几乎可以接受所有内容，但它甚至对于非线性实数算术都不完整。此求解器的非线性支持基于：区间分析和 Grobner 基计算。此求解器在文件夹中实现`src/smt`（在[不稳定分支](http://z3.codeplex.com/SourceControl/changeset/view/01d784b557ba)中）。算术模块在文件中实现`theory_arith*`。一个好的跟踪命令行选项是 `-tr:after_reduce`. 它将在预处理后显示一组约束。瓶颈是算术模块（`theory_arith*`）。

补充说明：

*   问题出在一个不可判定的片段中：混合整数和实数非线性算术。也就是说，不可能为这个片段编写一个健全而完整的求解器。当然，我们可以编写一个求解器来解决我们在实践中找到的实例。我相信可以扩展`nlsat`来处理`to_int`.

*   如果你避免`to_int`，你将能够使用`nlsat`。问题将出现在非线性实数算术片段中。我知道这可能很难，因为这`to_int`似乎是您编码中的关键。

*   z3.codeplex.com 的“unstable”分支中的代码比“master”分支中的正式版本组织得更好。我将很快将它与“master”分支合并。如果您想使用源代码，可以检索“不稳定”分支。

*   “不稳定”分支使用新的构建系统。您可以构建具有跟踪支持的发布版本。您只需要`-t`在生成 Makefile 时使用该选项。

> python 脚本/mk_make.py -t

*   Z3 在调试模式下编译时，`AUTO_CONFIG=false`默认为该选项。因此，要重现“发布”模式的行为，您必须提供命令行选项`AUTO_CONFIG=true`。

# java - 使用 EntityManager 进行休眠更新

> ID：13102792
> 
> 赞同：10
> 
> 时间：2012-10-27T18:09:50.550
> 
> 标签：java, hibernate, named-query, hibernate-entitymanager

我正在使用 Hibernate 4.1.7 并尝试更新对象，但没有文档应该如何完成。目前，我正在这样做：

```
 Person person = personDao.getPersonById(1);
    person.setAge(23);
    person.setLastname("McName");
    person = personDao.update(person); 
```

在 PersonDao 中，更新看起来像：

```
 public Person update(Person person) {
      return entityManager.merge(person);
    } 
```

在 PersonDao 中，getPersonById 是：

```
 public Person getPersonById(int id) {
      personQuery = entityManager.createNamedQuery("Person.findPerson", Person.class);
      personQuery.setParameter("id", id);
      return personQuery.getSingleResult();
    } 
```

我还在 Person 类中定义了命名查询，并且在这里：

```
 @NamedQuery(name="Person.findPerson", query="SELECT p FROM Person p WHERE p.id = :id") 
```

通过使用我的 Person 不会被更新，我应该如何使用 hibernate 实现更新？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-27T22:13:57.613

可能会出现两种情况。

您可能想要更改对象的属性，并且仅更改该属性。

如果是这种情况你要使用的方法：find、modify、flush、commit。

```
em.find(Person.class, person.getId())
person.setStatus("ACTIVE");
em.commit();//implicitly flushes if flush mode is COMMIT or AUTO. 
```

您可能希望使用对象属性来更新项目。

如果是这种情况，您要使用以下方法：合并、可选修改、刷新、提交。

```
em.merge(person);
//modify person if you wish.
em.commit();//implicitly flushes if flush mode is COMMIT or AUTO. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T18:28:24.250

如果修改包含在事务中，Hibernate 和其他 JPA 实现会自动管理实体的状态并将其保存到数据库中。您不需要显式调用`merge`或`update`方法。

如果您正在使用资源本地事务（不由 JTA 事务管理器管理），请尝试以下操作：

```
EntityTransaction tx = entityManager.getTransaction();
tx.begin();
Person person = personDao.getPersonById(1);
person.setAge(23);
person.setLastname("McName");
tx.commit(); 
```

您的所有修改将自动保存在数据库中。

如果您使用的是 JTA，那么您必须以其他方式标记事务边界，例如使用 Spring AOP`@Transactional`注释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T18:16:24.980

我不知道您到底在问什么，但是在您的方法中`Person.getPersonById(int id)`，您可以使用以下内容简化代码：

```
return entityManager.find(Person.class, id); 
```

# asp.net-mvc - 使用 ASP.Net MVC 一次将许多图像上传并存储到数据库并创建缩略图

> ID：13102797
> 
> 赞同：1
> 
> 时间：2012-10-27T18:10:05.247
> 
> 标签：asp.net-mvc, image-upload

如何一次上传许多图像（通过打开对话框和 shift/ctrl）并将它们存储到 sql server 数据库（为每个图像创建记录），然后使用 ASP.Net MVC 创建缩略图？

视图和控制器应该如何？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:18:05.967

从你的问题来看，你似乎太过分了。您正在同时提出有关 ASP.NET MVC、图像处理算法、SQL 服务器和一般 Web 设计的问题。

为了避免深入了解您的问题，我将简单地解释您需要做什么。您将需要自己对此进行研究，因为再多的 SO 问题和答案都不会为您提供适当的技术知识。

您首先需要有一个可以存储图像的数据库。这是一个小教程[http://www.codeproject.com/Articles/354639/Storing-and-Retrieving-Images-from-SQL-Server-Usin](http://www.codeproject.com/Articles/354639/Storing-and-Retrieving-Images-from-SQL-Server-Usin)。

这可能需要你一段时间。但是一旦你完成了，你将需要进入你的项目并开始研究基本架构。你的对象会是什么样子？你的程序的流程是什么？您需要问的一个大问题是您将如何连接到您的数据库？答案可能应该是实体框架。您需要考虑使用 EF 将数据从服务器端代码传输到数据库。

就您的视图和控制器而言，控制器是应用程序中所有计算和处理的地方，而视图几乎就像显示计算数据的模板。您需要确定要来回传递的数据。一般来说，鉴于您提供的信息量很少，视图看起来几乎就像您希望它看起来的样子，并且控制器必须获取从视图传递的图像，将其转换为缩略图，然后传递它（使用 EF）返回到您的数据库。

很多工作，嗯？;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-01T01:01:21.230

您必须创建 2 个类：MainClass 和 MainClassViewModel

主类具有带有标记名的图像属性，例如：

```
public class MainClass
{
 [Key]
 public int MainClassId {get; set;}
 [DisplayName("Image 1")]
 public Bytes[] Image1 {get;set;}
} 
```

然后您将需要一个 ModelView（这是一种类似于原始的类方式，只需将“Bytes []”的类型更改为“HttpPostedFileBase”：

```
 public class MainClassModelView
{
 [Key]
 public int MainClassId {get; set;}
 [DisplayName("Image 1")]
 public HttpPostedFileBase Image1 {get;set;}
} 
```

在你看来，你必须在第一行使用这个 ModelView：

```
 @model ApplicationName.Models.MainClassModelView 
```

然后你必须使用视图：

```
 @using (Html.BeginForm(null, null, FormMethod.Post, new { enctype = "multipart/form-data" }))
{
  @Html.AntiForgeryToken()
  <div class="form-horizontal">
     <h4>MainClassView</h4>
     <hr />
       @Html.Images(m => m.Image1)
       @Html.ValidationMessageFor(model => model.Image1, "", new { @class = "text-danger" })
    </div>
</div>

   <div class="form-group">
      <div class="col-md-offset-2 col-md-10">
          <input type="submit" value="Create" class="btn btn-default" />
      </div>
  </div>
</div>
} 
```

# php - php facebook 事件 rsvp

> ID：13102802
> 
> 赞同：0
> 
> 时间：2012-10-27T18:11:16.853
> 
> 标签：php, facebook, events

我在 facebook 上有一个活动，我想回复一下。我想通过链接进行 rsvp，我为 rsvping 找到的所有示例都是用表单完成的。我有 rsvp_event 权限和一个活动的 access_token。我面临的实际问题是在成功发布 http 帖子后重定向。

```
<?php
     $redirect_uri = "http://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]";
     $access_token = "ACCESS_TOKEN";
     $eid = "EVENT_ID";

     $rsvp_to_event = "https://graph.facebook.com/$eid/attending?method=post&access_token=$access_token&redirect_uri=$redirect_uri";
?>

<a href="<?php echo $rsvp_to_event; ?>">Join</a> 
```

单击“加入”链接将回复活动，但让我留在显示真实的页面上。在成功 rsvp 后让页面重定向的任何想法？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T18:23:51.310

您必须使用 cURL 或查询该 URL `file_get_contents()`，这是我的[教程](http://www.masteringapi.com/tutorials/how-to-check-status-and-rsvp-to-facebook-events-using-graph-api-fql/61/)中的一个示例：

```
<?php
$app_id = "APP_ID";
$app_secret = "APP_SECRET";
$my_url = "REDIRECT_URI";
$event_id = "EVENT_ID";
$rsvp_status = "";

$code = $_REQUEST["code"];

if(empty($code)) {
    $auth_url = "http://www.facebook.com/dialog/oauth?client_id="
    . $app_id . "&redirect_uri=" . urlencode($my_url)
    . "&scope=rsvp_event";
    echo("<script>top.location.href='" . $auth_url . "'</script>");
}

$token_url = "https://graph.facebook.com/oauth/access_token?client_id="
. $app_id . "&redirect_uri=" . urlencode($my_url)
. "&client_secret=" . $app_secret
. "&code=" . $code;
$access_token = file_get_contents($token_url);

if( isset($_POST['rsvp']) ) {
    // Form submitted, call the Graph API to RSVP to the event
    $event_rsvp = "https://graph.facebook.com/$event_id/{$_POST['rsvp']}?method=post&" . $access_token;
    $rsvped = json_decode(file_get_contents($event_rsvp));
    if($rsvped) {
        $msg = "Your RSVP status is now <strong>{$_POST['rsvp']}</strong>";
        $rsvp_status = $_POST['rsvp'];
    }
}
if( !$rsvp_status ) {
    $query = "SELECT rsvp_status FROM event_member WHERE eid=$event_id AND uid=me()";
    $fql_url = "https://api.facebook.com/method/fql.query?"
        . "query=" . urlencode($query)
        . "&format=json"
        . "&" . $access_token;
    $fql_resp = json_decode(file_get_contents($fql_url));
    $rsvp_status = $fql_resp[0]->rsvp_status;
}
?>
<!doctype html>
<html>
<head>
<title>Create An Event</title>
<style>
label {float: left; width: 100px;}
input[type=text],textarea {width: 210px;}
#msg {border: 1px solid #000; padding: 5px; color: red;}
</style>
</head>
<body>
<?php if( isset($msg) ) { ?>
<p id="msg"><?php echo $msg; ?></p>
<?php } ?>
<form action="" method="post">
    <p>
        <label for="privacy_type">RSVP:</label>
        <input type="radio" name="rsvp" value="attending" <?php if($rsvp_status==="attending") echo "checked='checked'"; ?>/>Attending&nbsp;&nbsp;&nbsp;
        <input type="radio" name="rsvp" value="maybe" <?php if($rsvp_status==="maybe" || $rsvp_status==="unsure") echo "checked='checked'"; ?>/>Maybe&nbsp;&nbsp;&nbsp;
        <input type="radio" name="rsvp" value="declined" <?php if($rsvp_status==="declined") echo "checked='checked'"; ?>/>Not Attending&nbsp;&nbsp;&nbsp;
    </p>
    <p><input type="submit" value="RSVP to this event" /></p>
</form>
</body>
</html> 
```

你应该看看：

```
if( isset($_POST['rsvp']) ) {
    // Form submitted, call the Graph API to RSVP to the event
    $event_rsvp = "https://graph.facebook.com/$event_id/{$_POST['rsvp']}?method=post&" . $access_token;
    $rsvped = json_decode(file_get_contents($event_rsvp));
    if($rsvped) {
        $msg = "Your RSVP status is now <strong>{$_POST['rsvp']}</strong>";
        $rsvp_status = $_POST['rsvp'];
    }
} 
```

上面的教程由 HTML 表单组成，用户可以在其中选择他的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T18:17:10.867

大多数图形 api 端点并非设计为直接使用您的用户浏览器调用，而是从您的后端代码调用它们（与身份验证相关的可能是例外）。

尝试使用[官方 php sdk](https://github.com/facebook/facebook-php-sdk)从您的 php 页面发送这些请求，或者仅使用[curl 扩展名](http://php.net/manual/en/book.curl.php)或`file_get_contents`在您的 php 脚本中的这些端点上并自己重定向用户。

# grails - Grails 项目在 CloudFoundry 之后不运行

> ID：13102803
> 
> 赞同：1
> 
> 时间：2012-10-27T18:11:40.570
> 
> 标签：grails, cloud-foundry

今天我将我的测试项目部署在 Cloud Foundry 上。没有任何问题，应用程序运行良好。但是在我停止了 cloud Foundry 之后，我想使用命令 grails run-app 在本地运行应用程序，但是我收到了以下错误消息：

```
Error /path/to/my/app/app-name does not appear to be part of a Grails application. 
```

任何想法是什么意思？

编辑！当我通过命令 run-app 从终端运行应用程序时，一切正常，但是当我单击 STS 中的“运行”按钮时，出现错误！

编辑！它正在工作。我只是通过右键单击应用程序 Grails Tools -> Refresh Dependencies 或 Alt+GR 来刷新依赖项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:37:03.080

refreshing the dependencies will work. (right click on app Grails Tools -> Refresh Dependencies or Alt+G R)

# html - 如何在网页上添加滚动条？

> ID：13102805
> 
> 赞同：6
> 
> 时间：2012-10-27T18:12:04.233
> 
> 标签：html, css, scroll, webpage

我有一个用 html 和 css 构建的网页，页面底部的内容被剪辑。我想向页面添加滚动，但无法这样做。我尝试过传统的 html{ overflow: scroll;} 或 html { overflow: auto;} 似乎都不起作用。我正在使用 google chrome 并在 safari 上尝试过，但滚动条似乎从未出现过。我想知道我缺少什么，并且非常感谢任何有关使网页滚动的帮助。

而且我正在使用位置：固定并且没有使用位置：相对，我在某个地方可能会有所作为，但我希望它不会因为如果我做出改变我将不得不改变很多事情。请让我知道是否有办法使网页以固定位置滚动，或者这是否是问题所在。

任何帮助将非常感激。

我已经在下面发布了我的代码，我提前为非常混乱的代码道歉，我对 Web 开发非常陌生：

```
 <!DOCTYPE html>
<html>
<head>
<style>
html
{
    overflow: scroll;
}

th
{
    left:700px;
    top:300px;
    position:fixed;
}
td.first_name_text
{
    left:700px;
    top:330px;
    position:fixed;
    background-image:url(required-field.png);
    background-position:top right;
    background-repeat:no-repeat;
    padding-right:10px;
}
td.first_name_textbox
{
    left:854px;
    top:330px;
    position:fixed;
}
td.last_name_text
{
    left:700px;
    top:378px;
    position:fixed;
    background-image:url(required-field.png);
    background-position:top right;
    background-repeat:no-repeat;
    padding-right:10px;
}
td.last_name_textbox
{
    left:854px;
    top:378px;
    position:fixed;
}
td.email_text
{
    left:700px;
    top:426px;
    position:fixed;
    background-image:url(required-field.png);
    background-position:top right;
    background-repeat:no-repeat;
    padding-right:10px;
}
td.email_textbox
{
    left:854px;
    top:426px;
    position:fixed;
}
td.dob_text
{
    left:700px;
    top:474px;
    position:fixed;
    background-image:url(required-field.png);
    background-position:top right;
    background-repeat:no-repeat;
    padding-right:10px;
}
td.dob_month_textbox
{
    left:824px;
    top:474px;
    position:fixed;
}
td.dob_day_textbox
{
    left:969px;
    top:474px;
    position:fixed;
}
td.dob_year_textbox
{
    left:1056px;
    top:474px;
    position:fixed;
}
td.sex_text
{
    left:700px;
    top:510px;
    position:fixed;
    background-image:url(required-field.png);
    background-position:top right;
    background-repeat:no-repeat;
    padding-right:10px;
}
td.loginId_text
{
    left:700px;
    top:550px;
    position:fixed;
    background-image:url(required-field.png);
    background-position:top right;
    background-repeat:no-repeat;
    padding-right:10px;
}
td.loginId_textbox
{
    left:790px;
    top:550px;
    position:fixed;
}
td.password_text
{
    left:700px;
    top:580px;
    position:fixed;
    background-image:url(required-field.png);
    background-position:top right;
    background-repeat:no-repeat;
    padding-right:10px;
}
td.password_textbox
{
    left:790px;
    top:570px;
    position:fixed;
}
td.confirm_password_text
{
    left:790px;
    top:570px;
    position:fixed;
    background-image:url(required-field.png);
    background-position:top right;
    background-repeat:no-repeat;
    padding-right:10px;
}

</style>

</head>

<body>
<form name="user_registration_form" metod="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
<table>
    <tr>
        <th>User Registration<th>
    </tr>
    <tr>
        <td class="first_name_text" style="font-size:18px;">Patient First Name</td>
        <td class="first_name_textbox"><input type="text" name="first_name" maxlength="30" size="40" style="height:30px;font-size:14pt;" ></td>
    </tr>
    <tr>
        <td class="last_name_text" style="font-size:18px;">Patient Last Name</td>
        <td class="last_name_textbox"><input type="text" name="last_name" maxlength="30" size="40" style="height:30px;font-size:14pt;"></td>
    </tr>
    <tr>
        <td class="email_text" style="font-size:18px;">Patient Email</td>
        <td class="email_textbox"><input type="text" name="email" maxlength="30" size="40" style="height:30px;font-size:14pt;"></td>
    </tr>
    <tr>
        <td class="dob_text" style="font-size:18px;">Date of Birth: </td>
        <td class="dob_month_textbox" style="padding-left:2em">Month <SELECT NAME="Month">
            <OPTION SELECTED>January<OPTION>February<OPTION>March<OPTION>April
            <OPTION>May<OPTION>June<OPTION>July<OPTION>August
            <OPTION>September<OPTION>October<OPTION>November<OPTION>December
            </SELECT> 
        </td>
        <td class="dob_day_textbox" style="padding-left:2.5em">Day <Select Name="Day">
            <OPTION SELECTED>1<OPTION>2<OPTION>3<OPTION>4
            <OPTION>5<OPTION>6<OPTION>7<OPTION>8
            <OPTION>9<OPTION>10<OPTION>11<OPTION>12<OPTION>13<OPTION>14<OPTION>15
            <OPTION>16<OPTION>17<OPTION>18<OPTION>19
            <OPTION>20<OPTION>21<OPTION>22<OPTION>23<OPTION>24<OPTION>25<OPTION>26
            <OPTION>27<OPTION>28<OPTION>29<OPTION>30
            <OPTION>31
            </SELECT> 
        </td>
        <td class="dob_year_textbox" style="padding-left:3em">Year <select name="Year"> 
<option value="2012">2012</option> 
<option value="2011">2011</option> 
<option value="2010">2010</option> 
<option value="2009">2009</option> 
<option value="2008">2008</option> 
<option value="2007">2007</option> 
<option value="2006">2006</option> 
<option value="2005">2005</option> 
<option value="2004">2004</option> 
<option value="2003">2003</option> 
<option value="2002">2002</option> 
<option value="2001">2001</option> 
<option value="2000">2000</option> 
<option value="1999">1999</option> 
<option value="1998">1998</option> 
<option value="1997">1997</option> 
<option value="1996">1996</option> 
<option value="1995">1995</option> 
<option value="1994">1994</option> 
<option value="1993">1993</option> 
<option value="1992">1992</option> 
<option value="1991">1991</option> 
<option value="1990">1990</option> 
<option value="1989">1989</option> 
<option value="1988">1988</option> 
<option value="1987">1987</option> 
<option value="1986">1986</option> 
<option value="1985">1985</option> 
<option value="1984">1984</option> 
<option value="1983">1983</option> 
<option value="1982">1982</option> 
<option value="1981">1981</option> 
<option value="1980">1980</option> 
<option value="1979">1979</option> 
<option value="1978">1978</option> 
<option value="1977">1977</option> 
<option value="1976">1976</option> 
<option value="1975">1975</option> 
<option value="1974">1974</option> 
<option value="1973">1973</option> 
<option value="1972">1972</option> 
<option value="1971">1971</option> 
<option value="1970">1970</option> 
<option value="1969">1969</option> 
<option value="1968">1968</option> 
<option value="1967">1967</option> 
<option value="1966">1966</option> 
<option value="1965">1965</option> 
<option value="1964">1964</option> 
<option value="1963">1963</option> 
<option value="1962">1962</option> 
<option value="1961">1961</option> 
<option value="1960">1960</option> 
<option value="1959">1959</option> 
<option value="1958">1958</option> 
<option value="1957">1957</option> 
<option value="1956">1956</option> 
<option value="1955">1955</option> 
<option value="1954">1954</option> 
<option value="1953">1953</option> 
<option value="1952">1952</option> 
<option value="1951">1951</option> 
<option value="1950">1950</option> 
<option value="1949">1949</option> 
<option value="1948">1948</option> 
<option value="1947">1947</option> 
<option value="1946">1946</option> 
<option value="1945">1945</option> 
<option value="1944">1944</option> 
<option value="1943">1943</option> 
<option value="1942">1942</option> 
<option value="1941">1941</option> 
<option value="1940">1940</option> 
<option value="1939">1939</option> 
<option value="1938">1938</option> 
<option value="1937">1937</option> 
<option value="1936">1936</option> 
<option value="1935">1935</option> 
<option value="1934">1934</option> 
<option value="1933">1933</option> 
<option value="1932">1932</option> 
<option value="1931">1931</option> 
<option value="1930">1930</option> 
<option value="1929">1929</option> 
<option value="1928">1928</option> 
<option value="1927">1927</option> 
<option value="1926">1926</option> 
<option value="1925">1925</option> 
<option value="1924">1924</option> 
<option value="1923">1923</option> 
<option value="1922">1922</option> 
<option value="1921">1921</option> 
<option value="1920">1920</option> 
<option value="1919">1919</option> 
<option value="1918">1918</option> 
<option value="1917">1917</option> 
<option value="1916">1916</option> 
<option value="1915">1915</option> 
<option value="1914">1914</option> 
<option value="1913">1913</option> 
<option value="1912">1912</option> 
<option value="1911">1911</option> 
<option value="1910">1910</option> 
<option value="1909">1909</option> 
<option value="1908">1908</option> 
<option value="1907">1907</option> 
<option value="1906">1906</option> 
<option value="1905">1905</option> 
<option value="1904">1904</option> 
<option value="1903">1903</option> 
<option value="1902">1902</option> 
<option value="1901">1901</option> 
<option value="1900">1900</option> 
</select>
    </tr>
    <tr>
        <td class="sex_text" style="font-size:18px;">Sex:</td>
        <td class="sex_radioButtons">
            <input type="radio" name="sex" value="male" style="left:766px;top:510px;position:fixed;"><td style="left:788px;top:510px;position:fixed;">Male</td>
            <input type="radio" name="sex" value="female"   style="left:834px;top:510px;position:fixed;"><td style="left:856px;top:510px;position:fixed;">Female</td>
        </td>
    </tr>
    <tr>
        <td class="loginId_text" style="font-size:17px;">Login ID:</td>
        <td class="loginId_textbox">
            <input type="text" name="loginId" maxlength="10" size="25" style="height:28px;font-size:14pt;">
        </td>
        <td class="password_text" style="font-size:17px;">Password:</td>
        <td class="password_textbox">
            <input type="text" name="password" maxlength="25" size="25" style="height:28px;font-size:14pt;">
        </td>
        <td class="confirm_password_text" style="font-size:17px;padding-left:2em" ">Confirm Password:</td>
        <td class="confirm_password_textbox">
            <input type="text" name="confirm_password" maxlength="25" size="25" style="height:28px;font-size:14pt;">
        </td>
 </table>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:28:18.057

您可以尝试添加一个将属性**clear**设置为*both*的元素，作为容器中**位置** *fixed*的最后一个元素。例如：

```
<div class='fixedDiv'>
    <p> Some element here...</p>
    <p> Another one... </p>
    <a> And a link to somewhere...</a>
    <br class='clear'>
</div> 
```

CSS看起来像：

```
 .fixedDiv
    {
       position: fixed;
    }

    .clear
    {
       clear: both;
    } 
```

如果您需要一个必须将**位置**设置为*relative*的div，您可以将另一个 div 作为子元素添加到**fixedDiv**。例如：

```
<div class='fixedDiv'>
    <div class='relativeDiv'>
       <p> Some element here...</p>
       <p> Another one... </p>
       <a> And a link to somewhere...</a>
       <br class='clear'>
    </div>
</div> 
```

CSS看起来像：

```
.relativeDiv
{
   position: relative;
   width: 100%; // to consume the whole space from fixedDiv
   height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T02:15:47.087

`Position: fixed`相对于浏览器窗口放置有问题的元素。我不认为你想使用这个。

而是使用`position: absolute`，在这种情况下，这将允许您相对于 html 元素放置元素。

# regex - Notepad ++中将空格更改为制表符的正则表达式

> ID：13102807
> 
> 赞同：5
> 
> 时间：2012-10-27T18:12:14.850
> 
> 标签：regex, notepad++

我正在尝试在 Notepad++ 中使用正则表达式将空格更改为类似这样的制表符

> 01 fsdfsd
> 
> 01 01 fsdfsd
> 
> 01 01* fsdfsd
> 
> 01 01 01 fsdfsd
> 
> 01 01 01* fsdfsd

如何在数字之间保留空格并仅更改最后一个空格？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T18:16:06.880

搜索：

```
[ ]([a-zA-Z]) 
```

（注意字符类前面有一个空格。）并替换为：

```
\t$1 
```

如果您还有其他格式的行，或者`fsdfsd`可能包含空格，则可能更适合的替代方法是：

```
^((?:\d+\*?)(?:[ ]\d+\*?)*)[ ] 
```

现在替换为

```
$1\t 
```

这匹配最长可能的数字字符串之后的任何空格，可选星号由空格分隔。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T18:22:05.720

您可以使用查找头来仅匹配空格后跟数字以外的内容，但是由于记事本不支持环顾四周，因此您必须采用捕获和释放方法来查找字母：

```
search: " +([a-zA-Z])" (don't include the quotes - there to show the space) 
replace: \t$1 
```

# android - 在android中添加边距

> ID：13102808
> 
> 赞同：0
> 
> 时间：2012-10-27T18:12:15.663
> 
> 标签：android

我需要在 android 中的文本视图前面添加一个边距，但是当我使用 android:layout_marginLeft/Right 时它不起作用。还有其他方法吗？

```
<TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingBottom="7dip"
        android:paddingRight="27dip"
        android:paddingTop="7dip"
        android:text="Name"
        android:textColor="#10a6a4"
        android:textSize="20dp"
        android:layout_marginRight="40dp"
        android:textStyle="bold" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:45:02.593

你在用`RelativeLayout`吗？边距和填充在 s 中不起作用（据我所知）`RelativeLayout`。尝试使用 a `LinearLayout`，或者如果您正在使用`android:layout_above`and`android:layout_bellow`或这些东西，请将 txtView 和您正在填充它的 View 放在一个新的 LinearLayout 中。希望我有所帮助。

# android - 优化布局中的视图数量

> ID：13102812
> 
> 赞同：0
> 
> 时间：2012-10-27T18:12:52.387
> 
> 标签：android, android-layout

这个应用程序中使用的片段之一应该是一个主要是数字数据的表格。

*   6 列 x 15 行
*   前四个标题行有一些融合的单元格

这大约是 90 个视图（减去融合单元格 + 纯布局视图 - 例如 tablelayout、tablerow）。

第一个问题是超过 80 次浏览量过多的警告，应用程序可能会变得迟钝。考虑到这个片段/视图无法拆分，我该怎么办？- 用户需要一次访问该数据表。

其次，表中的数据是静态的——其中很多是可计算的。但是，不同的语言不会以相同的方式呈现数字数据。例如，英语中的“1,000”将是法语中的“1000”——并且在我不知道的某些语言中可能不会使用罗马数字表示。如果这大约 30 个数字项进入 /res/values/string_file.xml，考虑到该文件无论如何都会存在，如果仅用于表头，或者应用程序应该计算它们，应用区域设置过滤器，并将它们输出到布局?

谢谢

# jquery - 使用 imagemapster jquery 插件重新定位标题 div

> ID：13102818
> 
> 赞同：0
> 
> 时间：2012-10-27T18:13:27.260
> 
> 标签：jquery, jquery-plugins

我一直在使用[imagemapster 网站](http://www.outsharked.com/imagemapster/default.aspx?demos.html#beatles)上引用的[Beatles 示例 jsfiddle](http://jsfiddle.net/nYkAG/)。有没有办法将标题 div 放置在图像顶部？

在上面的 jsfiddle 中，我尝试过：

```
<div id="beatles-caption" style="clear:both; border:red; width:400px; 
         padding: 6px; position:relative; top:-100px;"> 
```

我也尝试过 z-index，但未能成功将标题移动到图像上。

在我自己的应用程序中，我有一个整页背景图像，我需要在叠加在图像右上角的标题 div 中识别图像的各个部分。

考虑到这个要求，我有更好的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:19:25.040

这是你想要的？

jsfiddle.net/nYkAG/408/

注意：它不考虑可变高度。您可以将插件包装在容器中并设置位置：相对然后将顶部更改为底部：0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T18:35:57.850

`position:relative; top:-100px;`您将标题移动到图像上方的假设是正确的。你只是缺少`z-index`.

```
#beatles-caption { position:relative; top:-100px; z-index:1000; background:white; }​ 
```

[http://jsfiddle.net/nYkAG/409/](http://jsfiddle.net/nYkAG/409/)

您也可以使用负边距：

```
#beatles-caption { position:relative; margin-top:-100px; z-index:1000; background:white; }​ 
```

或者将整个内容包装在一个带有标题的 div`position:relative`中`position:absolute; bottom:0`

[http://jsfiddle.net/nYkAG/411/](http://jsfiddle.net/nYkAG/411/)

# c++ - ISO 8601 时间戳 C++

> ID：13102820
> 
> 赞同：1
> 
> 时间：2012-10-27T18:13:46.367
> 
> 标签：c++, c++11

我有两个`std::vector<string>'s`都带有 ISO 8601 时间戳，其中向量 A 映射到数字，向量 B 映射到标题

A 映射为

```
 typedef pair<string,string> Key;   //<name,timestamp>
 typedef map< Key, double> Map;     //number
 Map pair_map; 
```

B 映射为

```
 map<string,string> Map2; //<headline,timestamp> 
```

然后我有第三张地图，从标题到名称

```
 map<string,string> Map3; //<headline,name> 
```

本质上，我要做的是获取向量 A 在向量 B 的时间戳处映射到的数据。我遇到的问题是向量 A 具有以下格式的 iso 时间戳，其中秒始终为零，

```
2012-02-25 06:09:00
2012-02-25 06:10:00 
```

矢量 B 在几秒钟内就有了

```
2012-02-25 06:09:32
2012-02-25 06:09:38
2012-02-25 06:09:51 
```

将向量 A 映射到向量 B 的最佳方法是什么？

我对最佳方法的两个猜测是将向量 B 的第二个向下舍入，或者在 ie 之前和之后采用某种加权平均值`2012-02-25 06:09:00`，`2012-02-25 06:10:00.`什么是最好的方法，我该如何实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T18:30:12.750

首先，你应该让自己成为一个比较函子，它只比较字符串到分钟，即前十六位数字：

```
#include <string>

struct isotimecomp
{
    // models "s1 < s2" for ISO time stamps
    bool operator()(std::string const & s1, std::string const & s2) const
    {
        return s1.compare(0, 16, s2, 0, 16) < 0;
    }
}; 
```

现在您可以以任何方式使用它。例如，您可以创建一个以时间戳为键的关联容器：

```
#include <map>

std::map<std::string, std::pair<int, std::string>, isotimecomp> timestamp_data; 
```

或者你可以制作一个排序的向量：

```
#include <vector>
#include <algorithm>

std::vector<std::string> v;

std::sort(v.begin(), v.end(), isotimecomp()); 
```

然后你可以对向量进行二分搜索：

```
std::string str = "2012-02-25 06:09:00";
auto it = std::lower_bound(v.begin(), v.end(), str, isotimecomp()); 
```

或者你可以`find_if`在向量上使用，但你需要一个不同的谓词：

```
auto it = std::find_if(v.begin(), v.end(), [&str](std::string const & s) -> bool
                       { return str.compare(0, 16, s, 0, 16) == 0;} ); 
```

# itextsharp - 互斥复选框

> ID：13102825
> 
> 赞同：3
> 
> 时间：2012-10-27T18:14:28.003
> 
> 标签：itextsharp

我有一个 PDF 表单，它有 2 个具有相同名称且没有导出值的复选框，它们的行为是互斥的。

当我使用：

```
pdfFormFields.SetField("myCheckBox", "1"), 
```

第一个复选框被选中。

我的问题是：

我如何使用`pdfFormFields.SetField`检查第二个复选框，因为它具有相同的名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T06:47:51.473

我查看了表格，它是加密的、支持阅读器的并且是错误的。没有“互斥”复选框之类的东西。如果存在这样的东西，它将被称为“无线电”领域。

显然，设计表格的人并不知道这一点。我通过将为同一个复选框字段 CheckBox3（不能有不同的值）创建的两个小部件注释替换为单个单选字段 radio 的两个小部件注释来修复表单（这样一个小部件对应一个值）。

你可以在这里找到结果：http: [//itextpdf.org/documents/pos030.pdf](http://itextpdf.org/documents/pos030.pdf)

现在您可以使用：

```
form.setField("Radio", "0"); 
```

或者

```
form.setField("Radio", "1"); 
```

您应该要求加拿大政府人员相应地修改表格。

# latex - 如何更改绘图中的颜色和形状

> ID：13102827
> 
> 赞同：1
> 
> 时间：2012-10-27T18:14:34.310
> 
> 标签：latex, tikz

我正在使用 tikz 使用以下结构绘制图形：

```
\draw plot [mark=ball] coordinates {(0,0) (1,1) ...}; 
```

但是，我希望能够更改球的颜色和形状 - 它显示为蓝色圆圈。我没有找到（或不明白）如何去做。一个简单的例子将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-09T19:54:41.260

```
\documentclass[tikz,border=5mm]{standalone}
\pgfdeclareplotmark{ball}{\shade[draw=none,ball color=green] (0,0) circle (\pgfplotmarksize);}

\begin{document}
\begin{tikzpicture}
    \draw plot [mark=ball] coordinates {(0,0) (1,1)};
\end{tikzpicture}
\end{document} 
```

不幸的是，有点晚了，但我们做到了！

无需说您需要的技巧是第 2 行（[参考](http://latex-community.org/forum/viewtopic.php?f=45&t=24308)，比您的帖子更新）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T18:10:42.690

你可以试试

```
\draw [color=green, mark=triangle] plot coordinates { (0,0) (1,1) ...}; 
```

如果我理解你的话。

作为颜色，您可以设置即红色，绿色，蓝色，黑色，......作为标记，即圆形，o，x，星......

# php - 带有帖子类型的wordpress中的多个循环

> ID：13102828
> 
> 赞同：1
> 
> 时间：2012-10-27T18:14:40.983
> 
> 标签：php, wordpress, post, loops

我有这段代码来显示所有帖子：

[http://pastie.org/5124323](http://pastie.org/5124323)

显示两种类型的帖子，但不能分页。当我转到下一页时，主页中会显示相同的帖子。我不知道问题是什么。

并且在 post_type 的“文章”类别中不显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T23:59:56.810

尝试在查询中添加分页参数：

```
$my_query = new WP_Query(array('post_type'=>array('post','articulos'),  'paged'=> get_query_var( 'paged' ) )); 
```

更多关于分页参数的信息：http: [//codex.wordpress.org/Class_Reference/WP_Query#Pagination_Parameters](http://codex.wordpress.org/Class_Reference/WP_Query#Pagination_Parameters)

# google-maps - 删除谷歌地图标记

> ID：13102830
> 
> 赞同：1
> 
> 时间：2012-10-27T18:15:13.977
> 
> 标签：google-maps, google-maps-api-3

我有一个 html 复选框，它运行 if else javascript 函数，具体取决于它是选中还是未选中。当复选框被选中时，它会从数据库中加载名为“Fishmark”的标记。这工作正常。

我需要帮助的是在未选中该框时删除标记。我知道 if, else 语句是正确的，因此它与实际的 Google API 代码一致。我成功地在我网站的另一部分使用了 setMap(null)，所以我有点不明白为什么它没有将所有 Fishmark 标记从地图上移除。

```
var checkbox = document.getElementById("chbx");     
function addRemoveFishing(){
    if(checkbox.checked==true){
        fishingUrl("XML_Fishing.php", function(data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
      var title = markers[i].getAttribute("title");
      var water_type = markers[i].getAttribute("water_type");
      var water_depth = markers[i].getAttribute("water_depth");
      var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("lat")),
          parseFloat(markers[i].getAttribute("lng")));
    var bait = markers[i].getAttribute("bait");
    var fish = markers[i].getAttribute("fish");
    var notes = markers[i].getAttribute("notes");

      var Fishhtml = "<b>" + title + "</b> <br/>" + water_type + "</b> <br/>" + water_depth + "</b> <br/>" + bait
      + "</b> <br/>" + fish + "</b> <br/>" + notes;
      var icon = FishingIcon;
     var Fishmark = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon.icon
      });
      bindInfoWindow4(Fishmark, map, Fishinfo, Fishhtml);
                        }
    });
    }
    else {
        Fishmark.setMap(null);
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:37:08.640

您正在 for 循环中创建多个标记。在您的 else 语句中，您仅从地图中删除一 (1) 个标记。

例如，将标记存储在数组中，然后在 else 语句中创建一个 for 循环，为每个标记调用 setMap(null)。

# android - 了解android开发的基础教程

> ID：13102833
> 
> 赞同：1
> 
> 时间：2012-10-27T18:15:22.557
> 
> 标签：android

我现在已经 3 个月进入 android 开发并且已经完成了很多教程。我根据这些教程构建了很多小应用程序，它们中的大多数都为您提供了编写和完成的方法，告诉它们做什么以及告诉它们放在哪里。但是，现在我进入了自己的应用程序，我注意到我无法理解这些方法的实际构建方式。例如：

```
 @Override
    protected void onPostExecute(Void arg) {
        mProgressDialog.dismiss();
        if (mStatusCode  == 200){
            mTwitterUser = new TwitterUser(mResultString);
            updateView();
        }
        else if (mStatusCode  == 404){
            Toast.makeText(MainActivity.this, "De gevraagde gebruiker bestaat niet.", Toast.LENGTH_LONG).show();
            mTwitterUser = null;
            updateView();
        }
        else if (mStatusCode > 0){
            Toast.makeText(MainActivity.this, "Er is in verbindingsfout opgetreden met foutcode " + mStatusCode, Toast.LENGTH_LONG).show();
            mTwitterUser = null;
            updateView();
        }
        else {
            Toast.makeText(MainActivity.this, "Gegevens konden niet worden opgehaald. Controleer uw internetverbinding en probeer het opnieuw (" +mConnectionException.toString() + ")" , Toast.LENGTH_LONG).show();
            mTwitterUser = null;
            updateView();
        }
    }
} 
```

}

（吐司中的一些荷兰语错误文本）这是一个教程示例，它很好地解释了所有内容，但并没有真正放大诸如@override 是什么，什么是受保护/无效，什么是 NULL 或何时使用它，等等。如您所见，非常简单的 BASIC 内容对于理解 java/android 编码至关重要。

那么，是否有任何教程可以真正用于理解和放大方法构建和基本的 android 编码？

提前谢谢，~olijf

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:22:36.473

试试这些......

**-**首先要成为真正优秀的 android 程序员，我的意思是优秀的程序员，请尝试改进你的 Java SE。您可以使用`Head First Java`书籍来掌握这些基础知识，也可以在之后转到其他书籍，例如 Thinking in Java。

**-**其次，一个简单的分步方法用于在`Head First Android`书中教 android。

**-**请参阅以下链接以获取 Marakana 和 newboston 频道的教程，这将帮助您逐步了解 Android：

[http://www.youtube.com/watch?v=5RHtKIo_KDI&feature=relmfu](http://www.youtube.com/watch?v=5RHtKIo_KDI&feature=relmfu)

[http://www.youtube.com/watch?v=SUOWNXGRc6g](http://www.youtube.com/watch?v=SUOWNXGRc6g)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T18:24:29.703

在我看来，Mark Murphy 的书[The Busy Coder's Guide to Android Development](http://commonsware.com/Android/)是最好的开始。然后你可以继续阅读他[关于高级 Android 开发的书](https://rads.stackoverflow.com/amzn/click/com/098167805X)。他的书与众不同，因为他不仅解释了所有元素，还解释了决策背后的概念和主要的 Android 原则。因此，最终您不仅可以回答如何实现某些功能，还可以回答为什么要这样做。

显然，[Android 开发者](http://developer.android.com/develop/index.html)网站上的官方文档也有很大帮助。他们有很好的指导和培训。

# java - 带有 @ManyToMany 和自定义转换器的 JSF 和 JPA：LazyInitializationException

> ID：13102834
> 
> 赞同：0
> 
> 时间：2012-10-27T18:15:38.740
> 
> 标签：java, jpa, jsf-2, many-to-many

我有一个`@Entity`：

```
@Entity
public class Issue implements Serializable
{
  @Id @GeneratedValue(strategy=GenerationType.IDENTITY)
 protected long id; 

 @ManyToOne
 private IssueScope scope;

  //getter/setter
} 
```

我使用自定义`IssueScopeConverter`直接使用`IssueScope`with *f:selectItems*。转换器简单

*   返回方法的*id*`getAsString`
*   返回一个新创建的对象`IssueScope`（带有*id*集）`getAsObject`

*对于p:selectOneMenu*和类似的组件，这不会引发任何问题（并且在之前与 一起使用过多次`@ManyToOne`），代码如下：

 *```
<h:form id="fScope">
  <p:selectOneButton rendered="true" value="#{issueBean.issue.scope}"
                     converter="IssueScopeConverter">  
    <f:selectItems value="#{issueBean.issueScopes}" var="s"
                   itemLabel="#{s.name}" itemValue="#{s}"/>
  </p:selectOneButton>
  <p:commandButton value="Save" actionListener="#{issueBean.save()}"/>
</h:form> 
```

现在让我们描述一下我的问题：实际上我不需要 a `@ManyToOne`，我需要一个`@ManyToMany`关系 from `Issue`to `IssueScope`：

```
@ManyToMany(fetch=FetchType.EAGER)
private List<IssueScope> scopes; 
```

XHTML 会变成这样：

```
<h:form id="fScopes">
  <p:selectManyCheckbox value="#{issueBean.issue.scopes}"
                        converter="ErpIssueScopeConverter">  
    <f:selectItems value="#{issueBean.issueScopes}" var="s"
                   itemLabel="#{s.name}" itemValue="#{s}"/>
  </p:selectManyCheckbox>
  <p:commandButton value="Save" actionListener="#{issueBean.save()}"/>
</h:form> 
```

如果我新创建`Issue`然后按下*Save*按钮来持久化实体，这将毫无例外地完成。即使选择了`IssueScopes`也会保留。然后，如果我想更新实体，我会`failed to lazily initialize a collection, no session or session was closed: org.hibernate.LazyInitializationException: failed to lazily initialize a collection, no session or session was closed`在按下按钮后得到一个。

`public void save()`我的方法`@Named @ViewScoped IssueBean`从来没有输入过。

问题似乎与[使用 JSF 转换器时的延迟加载异常有关（引用集合）](https://stackoverflow.com/questions/9886390/lazy-loading-exception-when-using-jsf-converter-refering-to-a-collection)，但我不使用 Seam 持久性或具有特殊类型的 TransactionInterceptor`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:46:01.760

看看[http://www.simtay.com/simple-crud-web-application-with-jsf-2-1-primefaces-3-5-maven-and-jpa/](http://www.simtay.com/simple-crud-web-application-with-jsf-2-1-primefaces-3-5-maven-and-jpa/)

看看有没有帮助。

此致*

# facebook - 如何将oauth与gwt集成？

> ID：13102836
> 
> 赞同：2
> 
> 时间：2012-10-27T18:15:40.973
> 
> 标签：facebook, gwt, oauth-2.0

这是我的代码，如何使用 oauth 获取 user_id 或用户的名字和姓氏等数据并将它们签名到字段？我应该在 onSuccess 方法中实现它们吗？

```
 private void addFacebookAuth(){

      loginButton.addClickHandler(new ClickHandler(){

        @Override
        public void onClick(ClickEvent event) {
            final AuthRequest req = new AuthRequest(FACEBOOK_AUTH_URL, FACEBOOK_APP_ID).withScopes(
                    FACEBOOK_EMAIL_SCOPE, 
                    FACEBOOK_BIRTHDAY_SCOPE, 
                    FACEBOOK_USERID_SCOPE,
                    FACEBOOK_USER_LAST_NAME_SCOPE,
                    FACEBOOK_USER_FIRST_NAME_SCOPE).withScopeDelimiter(",");

            AUTH.login(req, new Callback<String, Throwable>(){

                @Override
                public void onFailure(Throwable reason) {
                    Window.alert("Error:\n" + reason.getMessage());

                }

                @Override
                public void onSuccess(String token) {
                //  Window.alert("Got an OAuth token:\n" + token + "\n"
                  //          + "Token expires in " + AUTH.expiresIn(req) + " ms\n");
                RootPanel.get().remove(loginButton);

                }
            });

            }
        });
        RootPanel.get().add(loginButton);  

      } 
```

# python - 使用 Google App Engine 学习 Python 2.7 的最佳方法是什么？

> ID：13102837
> 
> 赞同：0
> 
> 时间：2012-10-27T18:15:42.027
> 
> 标签：python, google-app-engine, opensocial

我目前正在尝试使用带有 Python 2.7 的 Google App Engine 开发网站

我想使用 OpenSocial API 在 iPhone / Android 平台上开发 SNS 游戏。

我需要的是培训材料，以了解如何使用 Phthon 2.7 部署 GoogleApps Engine

app.yaml 的设置是非常困难的部分。今天我可以使用 app.yaml 文件部署第一个 Google App Engine。

```
application: samplexxxxxxx1
version: 1
runtime: python27
api_version: 1
threadsafe: yes

handlers:
- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: .*
  script: main.app

libraries:
- name: webapp2
  version: "2.5.1" 
```

学习 Python 2.7 语法以使用 Google App Engine 开发网站以开发 OpenSocial SNS 游戏的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T18:39:03.740

我不知道“最好的方法”。我可以分享它是如何为我工作的。如果您对另一种语言有良好的了解，以下资源将对您有所帮助：

1.  [Dive Into Python](http://www.diveintopython.net/)成为了快速、免费地使用 Python 的规范资源。我认为编程知识是假设的。通过本书的第一章，你将在几天内学会一个不错的 Python。

2.  一旦你有了一个不错的 Python（无需成为专家），请阅读 Google App Engine 文档的[“入门”](https://developers.google.com/appengine/docs/python/gettingstartedpython27/)（Python 2.7 章节）。

3.  我强烈建议使用一个不错的 python IDE。我现在有了带有[PyDev](http://pydev.org/)扩展的 Eclipse 4.2。除了许多其他好东西（语法检查、完成、跳转到引用等）之外，它还可以让您进行源代码级调试和单步调试，非常棒。

4.  此时，使用 Python 站点文档逐渐扩展您的知识，直到您成为专家，并能够分享您对 SO 的知识 :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T06:56:39.940

我最近学习 Python 是为了使用 GAE，并希望我能在学习的早期找到这个风格指南：

[http://www.python.org/dev/peps/pep-0008/](http://www.python.org/dev/peps/pep-0008/)

从一开始就遵循这一点有望使您的事情变得更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T18:34:11.663

如需简单的入门方法，请查看[入门：Python 2.7](https://developers.google.com/appengine/docs/python/gettingstartedpython27/)教程。

有关使用`app.yaml`的帮助，请查看[Python 应用程序配置](https://developers.google.com/appengine/docs/python/config/appconfig)文档。

# android - GPS通知“由gps设置的位置”

> ID：13102839
> 
> 赞同：2
> 
> 时间：2012-10-27T18:15:45.933
> 
> 标签：android, gps, locationmanager

我写了一个简单的 gps 跟踪器，它在服务中收集 gps 信息

```
private void startListenCoordinateUpdates() {
    LocationManager locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

    String provider = LocationManager.GPS_PROVIDER;
    int updateTime = 2*1000, updateDistance = 10;

    locationManager.requestLocationUpdates(provider, updateTime, updateDistance, locationListener);
}

private void stopListenCoordinateUpdates() {
    LocationManager locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    locationManager.removeUpdates(locationListener);
}

private class GpsTrackerLocationListener implements LocationListener {

    @Override
    public void onLocationChanged(Location loc) {
         currentTrackInfo.addCoordinate(loc.getLatitude(), loc.getLongitude(), loc.getTime());
    }

    @Override 
    public void onProviderDisabled(String provider) { }

    @Override 
    public void onProviderEnabled(String provider) { }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) { }
} 
```

但是当收到第一个坐标时，系统通知带有文本“GPS 设置的位置”并且我的应用程序图标被抬起。当我按下它时，会出现位置服务设置。即使我删除侦听器或卸载我的应用程序，此通知也永远不会消失。我不想表现出来。我怎样才能摆脱这个通知？？？我使用 android 模拟器并通过 DDMS 发送 gps 坐标

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T18:58:29.283

请在真正的 android 设备上检查它。通常要停止从 GPS 接收器收听更新，我按照以下步骤操作。

```
 1\. locationManager.removeUpdates(locationListener);
 2\. set locationListener = null
 3\. set locationManager = null 
```

并确保您在真实设备上运行该应用程序。

# tinymce - 所见即所得编辑器在保存时翻录表格单元格和图像

> ID：13102845
> 
> 赞同：1
> 
> 时间：2012-10-27T18:16:14.727
> 
> 标签：tinymce, ckeditor, wysiwyg

我在 php 中构建了一个定制的 CMS，并使用了所见即所得的编辑器来保存描述区域。由于某种原因，当插入表格或图像时，它们不会被保存。在预览时，它们似乎很好，但是在保存数据后，编辑似乎撕掉了表格和图像。

我已经尝试过 CKEditor 和 Tinymce 并且两者都有相同的问题，因此我猜这可能是数据库或服务器端错误。

如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T10:19:43.677

检查您的 tinymce 设置 valid_elements 和 valid_children 以了解 tinymce 是否删除了您的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T18:31:21.577

我注意到的一件事是我必须进入设置并专门告诉 tinymce 停止在我的代码中取出`<p>`and 。`<br />`

在我这样做之前，我的桌子都被搞砸了。虽然这可能不是您的具体问题，但通过所见即所得的高级设置并检查类似的东西可能会有所帮助。

# java - 图像显示问题 Java

> ID：13102848
> 
> 赞同：0
> 
> 时间：2012-10-27T18:16:41.263
> 
> 标签：java

我目前正在尝试用java制作我的第一款游戏，我已经成功制作了一款横向滚动游戏，直到我想将地图（背景）更改得更大一些。我开始遇到背景图像的奇怪问题。
它在分辨率高达 5250px x 5148px 的情况下工作得很好。如果我超过这个，图像根本无法显示。

我已尝试减小文件大小，但无论文件大小如何，高于此分辨率的图像仍无法显示。

我的游戏由
Frame、Dude和Board三个文件组成，它们如下

**框架.java**

```
package OurGame;

import javax.swing.*;

public class Frame {

    public static void main(String[] args)
    {
        JFrame frame = new JFrame("Game");

        frame.add(new Board());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(500,500);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

} 
```

**老兄.java**

```
package OurGame;

import java.awt.Image;
import java.awt.event.KeyEvent;

import javax.swing.ImageIcon;

public class Dude {
    int x, dx, y, dy, nx2, ny2;
    Image still;

    public Dude()
    {
        ImageIcon i = new ImageIcon("/Users/Connor/Desktop/square.jpg");
        still = i.getImage();
        x = 250;
        y = 250;    
        nx2 = 485;
        ny2 = 485;
    }

    public void move()
    {
        x = x + dx;
        y = y + dy;
        nx2 = nx2 + dx;
        ny2 = ny2 + dy;
    }

    public int getX()
    {
        return x;
    }
    public int getY()
    {
        return y;
    }
    public Image getImage()
    {
        return still;
    }

    public void keyPressed(KeyEvent e)
    {
        int key = e.getKeyCode();

        if(key == KeyEvent.VK_A)
        {
            dx = -1;
        }

        if(key == KeyEvent.VK_D)
        {
            dx = 1;
        }
        if(key == KeyEvent.VK_W)
        {
            dy = -1;
        }

        if(key == KeyEvent.VK_S)
        {
            dy = 1;
        }

    }

    public void keyReleased(KeyEvent e)
    {
        int key = e.getKeyCode();

        if(key == KeyEvent.VK_A)
        {
            dx = 0;
        }

        if(key == KeyEvent.VK_D)
        {
            dx = 0;
        }
        if(key == KeyEvent.VK_W)
        {
            dy = 0;
        }

        if(key == KeyEvent.VK_S)
        {
            dy = 0;
        }

    }

} 
```

**Board.java**

```
package OurGame;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Board extends JPanel implements ActionListener{
    private static final long serialVersionUID = 1L;
Dude p;
Image img;
Timer time;

    public Board()
    {
        p = new Dude();
        addKeyListener(new AL());
        setFocusable(true);
        ImageIcon i = new ImageIcon("/Users/Connor/Desktop/background.jpg");
        img = i.getImage();
        time = new Timer(5, this);
        time.start();
    }

    public void actionPerformed(ActionEvent e)
    {
        p.move();
        repaint();
    }

    public void paint(Graphics g)
    {
        super.paint(g);
            Graphics2D g2d = (Graphics2D) g;

            g2d.drawImage(img, 485-p.nx2, 485-p.ny2, null);
            g2d.drawImage(p.getImage(), 200, 200, null);
    }

    private class AL extends KeyAdapter
    {
        public void keyReleased(KeyEvent e)
        {
            p.keyReleased(e);
        }
        public void keyPressed(KeyEvent e)
        {
            p.keyPressed(e);
        }
    }

} 
```

# ruby-on-rails - Formtastic 引导复选框标签

> ID：13102851
> 
> 赞同：0
> 
> 时间：2012-10-27T18:16:50.110
> 
> 标签：ruby-on-rails, twitter-bootstrap, formtastic

我有 phone_numbers ，它具有本地、区域和国家的 3 个权限 - 每个都是布尔值。

我现在的表格是这样的：

```
=semantic_form_for @phone_number, :html => {:class => "form-horizontal"} do |f|
  =f.semantic_errors
  =f.inputs do
    =f.input :phone_number_type, :as => :select, :collection => PhoneNumber::PHONE_NUMBER_TYPES, :include_blank => false, :label => "Type", :required => false
    =f.input :phone_number, :required => false
    =f.semantic_fields_for :permission do |permission_fields|
      =permission_fields.input :local, :label => false
      =permission_fields.input :regional, :label => false
      =permission_fields.input :national, :label => false

  =f.actions do
    =f.action :submit, :label => "Save" 
```

将标签设置为 false 会在右侧为每个复选框提供一个标签。没有它，每个复选框都有 2 个标签 - 一个在左侧，一个在右侧。我已经浮动了 3 个复选框，所以它们在一条水平线上，所以我真的希望本地有一个标签，左边是“权限”，右边是“本地”。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T13:17:35.783

我刚刚用css隐藏了它们

# ruby - 如何相应地按元素连接两个数组元素？

> ID：13102860
> 
> 赞同：-1
> 
> 时间：2012-10-27T18:17:26.003
> 
> 标签：ruby, arrays

例如

```
a = [a,b,c]
b = [1,2,3] 
```

我想：

```
[a1,b2,c3] 
```

a, b 长度相同，都是字符串数组。

有什么本地方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T18:20:51.827

```
%w(a b c).zip(%w(1 2 3))
# => [["a","1"],["b","2"],["c","3]] 
```

如果要连接字符串：

```
%w(a b c).zip(%w(1 2 3)).map(&:join)
# => ["a1","b2","c3"] 
```

这扩展到更多数组：

```
%w(a b c).zip(%w(1 2 3), %w(x y z)).map(&:join)
# => ["a1x", "b2y", "c3z"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T18:19:11.043

例如，您可以这样做

```
a = %w{a b c}
b = %w{1 2 3}

c = a.map.with_index do |elem, idx|
  elem + b[idx]
end

c # => ["a1", "b2", "c3"] 
```

# javascript - JavaScript 正则表达式替换无法按预期工作

> ID：13102862
> 
> 赞同：0
> 
> 时间：2012-10-27T18:17:40.767
> 
> 标签：javascript, html, xml, regex

我无法通过 javascript 正则表达式替换清除一些 html。任务是从本地来源获取我的 XBMC 的电视列表。URL 是[http://tv.dir.bg/tv_search.php?step=1&all=1](http://tv.dir.bg/tv_search.php?step=1&all=1)（*保加利亚语*）。我正在尝试使用刮板来获取数据 - [http://code.google.com/p/epgss/](http://code.google.com/p/epgss/)（归功于 Ivan Markov - [http://code.google.com/u/113542276020703315321/](http://code.google.com/u/113542276020703315321/)）不幸的是自上述工具上次更新以来，电视列表页面已更改，因此我正在尝试使其正常工作。问题是当我尝试从 HTML 解析 XML 时，它会中断。我现在试图通过正则表达式替换头部和脚本标签来清理 html。不幸的是，它不起作用。这是我的替代品：

```
function regexReplace(pattern, value, replacer) 
{  
var regEx = new RegExp(pattern, "g");  
var result = value.replaceAll(regEx, replacer);  
if(result == null)  
return null;  
return result;  
} 
```

这是我的电话：

```
var htmlStringCluttered = HTML.getHTML(new URL(url), "WINDOWS-1251");  
log("Content grabbed (schedule for next 7 days)");  
log(url);  
var htmlString = regexReplace("<head>([\\s\\S]*?)<\/head>|<script([\\s\\S]*?)<\/script>", htmlStringCluttered, ""); 
```

getHTML 函数来自原始源代码，我对设置 User-Agent 进行了细微修改。这是它的基础：

```
 public static java.io.Reader open(URL url, String charset) throws UnsupportedEncodingException, IOException  
    {
    URLConnection con = url.openConnection();
    con.setRequestProperty("User-Agent", "Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) AppleWebKit/532.0 (KHTML, like Gecko) Chrome/3.0.195.38 Safari/532.0");
    con.setAllowUserInteraction(false);
    con.setReadTimeout(60*1000/*ms*/);

    con.connect();

    if(charset == null && con instanceof HttpURLConnection) {
        HttpURLConnection httpCon = (HttpURLConnection)con;
        charset = httpCon.getContentEncoding();
    }

    if(charset == null)
        charset = "UTF-8";

    return new InputStreamReader(con.getInputStream(), charset);
    } 
```

regexReplace 的结果和原来的完全一样。由于无法解析 XML，因此脚本无法读取元素。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T22:50:12.580

**更新：**

要将其转换为 XMLDocument，您可以执行以下操作：

```
var parseXml,
    xml,
    htmlStringCluttered = HTML.getHTML(new URL(url), "WINDOWS-1251"),
    htmlString = '';

if (typeof window.DOMParser != "undefined") {
    parseXml = function (xmlStr) {
        return (new window.DOMParser()).parseFromString(xmlStr, "text/xml");
    };
} else if (typeof window.ActiveXObject != "undefined" && new window.ActiveXObject("Microsoft.XMLDOM")) {
    parseXml = function (xmlStr) {
        var xmlDoc = new window.ActiveXObject("Microsoft.XMLDOM");
        xmlDoc.async = "false";
        xmlDoc.loadXML(xmlStr);
        return xmlDoc;
    };
} else {
    throw new Error("No XML parser found");
}

console.log("Content grabbed (schedule for next 7 days)");
console.log(url);

//eliminate the '<head>' section
htmlString = htmlStringCluttered.replace(/(<head[\s\S]*<\/head>)/ig, '')

//eliminate any remaining '<script>' elements
htmlString = htmlString.replace(/(<script[\s\S]+?<\/script>)/ig, '');

//self-close '<img>' elements
htmlString = htmlString.replace(/<img([^>]*)>/g, '<img$1 />');

//self-close '<br>' elements
htmlString = htmlString.replace(/<br([^>]*)>/g, '<br$1 />');

//self-close '<input>' elements
htmlString = htmlString.replace(/<input([^>]*)>/g, '<input$1 />');

//replace '&nbsp;' entities with an actual non-breaking space
htmlString = htmlString.replace(/&nbsp;/g, String.fromCharCode(160));

//convert to XMLDocument
xml = parseXml(htmlString);

//log new XMLDocument as output
console.log(xml);

//log htmlString as output
console.log(htmlString); 
```

*   信用到期的信用：在以下位置`parseXml`找到的功能：

[JavaScript中变量字符串的XML解析](https://stackoverflow.com/questions/649614/xml-parsing-of-a-variable-string-in-javascript)

您可以在浏览器中测试它（我做过:)），只需定义`htmlStringCluttered`为：

```
htmlStringCluttered = document.documentElement.innerHTML; 
```

代替：

```
htmlStringCluttered = HTML.getHTML(new URL(url), "WINDOWS-1251"), 
```

并在控制台中运行它[http://tv.dir.bg/tv_search.php?step=1&all=1](http://tv.dir.bg/tv_search.php?step=1&all=1)

您还必须注释掉该行：

```
console.log(url); 
```

或声明`url`并赋予它一个值。

**原来的：**

您的 RegExp 需要做一些工作，当分成两个`replace`语句时，它会更简单（也更容易阅读）：

```
var htmlStringCluttered = HTML.getHTML(new URL(url), "WINDOWS-1251"),
    htmlString = '';
console.log("Content grabbed (schedule for next 7 days)");
console.log(url);
//eliminate the '<head>' section
htmlString = htmlStringCluttered.replace(/(<head[\s\S]*<\/head>)/ig, '')
//eliminate any remaining '<script>' elements
htmlString = htmlString.replace(/(<script[\s\S]+?<\/script>)/ig, '');
//log remaining as output
console.log(htmlString); 
```

通过访问[http://tv.dir.bg/tv_search.php?step=1&all=1](http://tv.dir.bg/tv_search.php?step=1&all=1)并在控制台中运行以下命令在控制台中对此进行了测试：

```
console.log(document.documentElement.innerHTML.replace(/(<head[\s\S]*<\/head>)/ig, '').replace(/(<script[\s\S]+?<\/script>)/ig, '')); 
```

如果这是在`outerHTML`属性上运行的（正如我期望的`HTML.getHTML(new URL(url), "WINDOWS-1251")`方法返回），那么`<body>`元素将被包装在：

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <body>
        ...
    </body>
</html> 
```

# php - 如何使用目录名称作为选项或参数？

> ID：13102864
> 
> 赞同：-1
> 
> 时间：2012-10-27T18:17:54.527
> 
> 标签：php, apache, web

我什至不知道这个方法是怎么调用的，我只知道我想要实现的行为。

我的例子是 Facebook。如果你去`facebook.com/[username or id]`你的个人资料页面，但我无法想象他们会在他们的根文件夹中创建一个目录并为每个用户放置一个索引文件。

那么以下行为是如何完成的；你去，*`somepage.com/foo/bar/hello`*但实际上你在请求*`somepage.com/foo?bar=hello`*？

这甚至可以用 Apache 和 PHP 实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T18:29:25.613

> 我什至不知道这个方法是怎么调用的，我只知道我想要实现的行为。

那东西称为 URI/URL，它的本地部分被传递给网络服务器。然后网络服务器处理请求。

> 这甚至可以用 Apache 和 PHP 实现吗？

是的。甚至没有。这就是网络服务器的用途。服务器上发生的事情完全被 HTTP 协议屏蔽，该协议只知道 URI/URL 规范，不规范是否需要以及如何匹配网络服务器上的具体进程或文件。

例如，对于 Apache HTTP 服务器，有一个名为[*Mod_Rewrite*](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)的著名模块可以进行 URL 重写。通常情况下，使用她的浏览器的用户不会注意到它。

使用 PHP 文件 (Apache HTTPD) 的示例配置：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ app.php [QSA,L]
</IfModule> 
```

在 PHP 脚本中，您可以通过使用 和 等特殊变量来获取 URI/ [`$_SERVER['REQUEST_URI']`URL`$_SERVER['QUERY_STRING']`](http://php.net/manual/en/reserved.variables.server.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T18:19:38.437

通常这是用[mod rewrite](http://httpd.apache.org/docs/current/rewrite/)制作的。在那里，您可以为脚本的变量创建“路径”。

例如[http://example.com/user/1/edit](http://example.com/user/1/edit)可以用 mod rewrite 翻译成[http://example.com/index.php?function=edit&userid=1](http://example.com/index.php?function=edit&userid=1)

这样的规则如下所示：

```
RewriteEngine on
RewriteRule ^/user/([0-9]+)/([a-z]+)$ index.php=function=$2&userid=$1 [L] 
```

第一行激活了重写模块，第二行有一个正则表达式，它必须匹配*内部*重写 url 。如果你喜欢，你也可以在*外部*使用`[R]`.`[L]`

查看整个[文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)以了解更多信息。

括号中的东西是所谓的标志，也有[很好的文档记录](http://httpd.apache.org/docs/current/rewrite/flags.htm)。

我希望这会有所帮助！

# jquery - 节点的动态树扩展

> ID：13102868
> 
> 赞同：0
> 
> 时间：2012-10-27T18:18:21.983
> 
> 标签：jquery, dynatree

我有一个发电机

```
 selectMode: 2, 
```

当我在节点上单击 [+] 后用鼠标展开节点时，节点被展开但也被选中。我不希望它被选中，我该怎么做？

谢谢！！

# macos - mathematica 在启动时崩溃

> ID：13102869
> 
> 赞同：0
> 
> 时间：2012-10-27T18:18:25.113
> 
> 标签：macos, crash, installation, wolfram-mathematica

我在 Mac 10.8.2 服务器上安装了 Mathematica 8.0.4。许可部分正常，但应用程序在启动过程中崩溃。

这是错误日志中的一些内容：

```
Process:         Mathematica [8730]
Path:            /Applications/Mathematica.app/Contents/MacOS/Mathematica
Identifier:      com.wolfram.Mathematica
Version:         8.0.4.3539075 (8.0)
Code Type:       X86 (Native)
Parent Process:  launchd [592]
User ID:         501

Date/Time:       2012-10-27 13:08:32.722 -0500
OS Version:      Mac OS X 10.8.2 (12C60)
Report Version:  10

Interval Since Last Report:          882070 sec
Crashes Since Last Report:           12
Per-App Interval Since Last Report:  210 sec
Per-App Crashes Since Last Report:   12
Anonymous UUID:                      93B2B8EE-4FF6-599A-4DBF-859A4BF3882A

Crashed Thread:  1  Dispatch queue: com.apple.libdispatch-manager

Exception Type:  EXC_CRASH (SIGBUS)
Exception Codes: 0x0000000000000000, 0x0000000000000000 
```

这是没有用的：

*   删除和重新安装 Mathematica
*   删除用户文件夹（在 /Users//Library/Mathematica 中）
*   启动时使用 alt+enter 重置 Mathematica

有什么建议么？

提前致谢

# java - 如何从 Graphics 获取 java 小程序中的画布大小？

> ID：13102870
> 
> 赞同：0
> 
> 时间：2012-10-27T18:18:43.887
> 
> 标签：java, graphics, applet, size

我现在拥有的代码给了我小程序的大小，而不是绘图区域的大小。我怎么能解决这个问题？

```
public void paint(Graphics g) 
{ 
    g.setColor(new Color(255,255,255));
    g.fillRect(5, 5, getWidth()-5, getHeight()-5);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T22:51:27.340

嗯...我猜你正试图在 JApplet 中正确绘画，所以你应该将小程序和画布分开

像使用代码概念一样

```
class MyCanvas extends JPanel
{

public void paintComponent(Graphics g) 
{ 
    g.setColor(new Color(255,255,255));
    g.fillRect(5, 5, getWidth()-5, getHeight()-5);

}

} 
```

和小程序...

```
public class MyApplet extends JApplet
{

public void init()
{
  this.getContentPane().add(new MyCanvas());
}

} 
```

PS 报告是否有帮助

# database - 在数据库中表示用户角色的更好方法

> ID：13102872
> 
> 赞同：13
> 
> 时间：2012-10-27T18:18:59.673
> 
> 标签：database, database-design, user-permissions

是在用户表中更好地表示用户权限，还是在其自己的权限表中更好地表示用户权限？

**用户表**
中的权限 将权限放在用户表中意味着为用户表中的每个权限创建一列。一个优点是查询应该运行得更快，因为在将用户与用户权限相关联时不需要连接。一个缺点是拥有许多权限列会使用户表变得混乱。

**Permission 表中的权限以多对多关系连接到 User 表**
这样做可以将权限与用户表完全分离，但它需要跨两个表连接才能访问用户权限。数据库访问可能会更慢，但数据库设计似乎更干净。

当有许多权限时，将权限保存在单独的表中可能会更好。做出此决定时还有哪些其他考虑因素，在各种情况下哪种设计更好？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-27T20:10:36.003

访问控制的标准模式称为**基于角色的安全**性。随着用户数量*和您需要的不同类型权限数量的增长，您的用户**到*权限链接的管理可能会变得越来越困难。

例如，如果您有 5 个管理员和 50 个用户，您如何使每个组的权限保持同步？当您的一位用户被提升为管理员时，您需要进行多少次编辑？答案是创建两个交集：**users-to-roles**和**roles-to-permissions**。

[在我对这个问题](https://dba.stackexchange.com/questions/12046/what-is-a-basic-model-for-making-a-database-with-users-and-groups/12107#12107)的回答中描述了这个解决方案（包括实体关系图）。

![在此处输入图像描述](../Images/786bc0f64abb2de86b4e99c9b8059517.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-27T18:34:44.863

当不同角色/权限的数量相对较少时，您的第一种方法是可行的。例如，如果您只有两种类型的用户：普通用户和管理员，单独的表看起来有点过头了。单列`is_admin`就足够了，而且很简单。

但是，一旦角色数量超过几个，这种方法就无法扩展。它有几个缺点：

*   用户表变得非常“宽”，有很多空列（浪费空间）

*   向系统添加新角色需要更改用户表。这对于大型用户数据库来说很麻烦并且可能很耗时

*   列出用户角色需要枚举所有列，而不是简单的数据库查询。

# thread-safety - Go 的缓冲通道是无锁的吗？

> ID：13102874
> 
> 赞同：7
> 
> 时间：2012-10-27T18:19:01.700
> 
> 标签：thread-safety, go, lockless

Go 的缓冲通道本质上是一个线程安全的 FIFO 队列。（参见[Is it possible to use Go's buffered channel as a thread-safe queue?](https://stackoverflow.com/questions/10424144/is-it-possible-to-use-gos-buffered-channel-as-a-thread-safe-queue)）

我想知道它是如何实现的。它是否像[Is there a 这样的事情，例如用于多个读取或写入线程的无锁队列中描述的那样无锁？](https://stackoverflow.com/questions/3020620/is-there-such-a-thing-as-a-lockless-queue-for-multiple-read-or-write-threads)?

Go 的 src 目录 ( ) 中的 greping`grep -r Lock .|grep chan`给出以下输出：

```
./pkg/runtime/chan.c:   Lock;
./pkg/runtime/chan_test.go: m.Lock()
./pkg/runtime/chan_test.go: m.Lock() // wait
./pkg/sync/cond.go: L Locker // held while observing or changing the condition 
```

不过，不要锁定我的机器（MacOS，intel x86_64）。是否有任何官方资源来验证这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-27T18:51:50.777

如果您阅读[chan.c](http://code.google.com/p/go/source/browse/src/pkg/runtime/chan.c)`runtime·chansend`中的函数，您会看到它在检查通道是否被缓冲之前被调用。`runtime·lock``if(c->dataqsiz > 0)`

换句话说，缓冲通道（以及一般的所有通道）使用锁。

您的搜索没有找到它的原因是您正在寻找带有大写 L 的“Lock”。用于通道的锁定函数是运行时中的非导出 C 函数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-28T00:10:07.417

你可以为你喜欢的一切编写无锁（甚至是无等待！）实现。像 CMPXCHG 这样的现代硬件原语足以普遍使用。但是编写和验证这样的算法并不是最简单的任务之一。除此之外，可能存在更快的算法：无锁算法通常只是算法的一个很小的子集。

据我记得，Dmitry Vyukov 过去曾为 Go 编写过无锁 MPMC（多生产者/多消费者）通道实现，但由于 Go 的 select 语句存在一些问题，该补丁被放弃了。有效地支持这一说法似乎真的很难。

然而，Go 的通道类型的主要目标是提供一个高级并发原语，该原语易于用于广泛的问题。即使不是并发编程专家的开发人员也应该能够编写可以在大型软件项目中轻松查看和维护的正确程序。如果您有兴趣挤出最后一点性能，则必须编写适合您需求的专用队列实现。

# python - 如何使用 pywin32 模拟 HOLD 按键事件？

> ID：13102875
> 
> 赞同：0
> 
> 时间：2012-10-27T18:19:03.183
> 
> 标签：python, windows, winapi, automation

我试图让这段 python 代码在 Windows 上工作：

```
import win32process, win32con, win32gui, win32api, time

HWND = win32gui.GetActiveWindow()
win32api.PostMessage(HWND, win32con.WM_KEYDOWN, win32con.VK_SPACE, 0)
time.sleep(6)
win32api.PostMessage(HWND, win32con.WM_KEYUP, win32con.VK_SPACE, 0) 
```

它应该模拟按住空格键的人，但它不起作用并且不提供任何类型的错误消息。我相信我可能对 HWND 做错了，但我不确定是否是这种情况。我希望将事件发送到我选择的任何活动窗口。

你能帮我吗？

* * *

通过使用 ctypes 和 user32.keybd_event 方法解决了我的问题。

```
ctypes.windll.user32.keybd_event(hexx[key], 0, 0, 0)      #Key is down
ctypes.windll.user32.keybd_event(hexx[key], 0, 0x0002, 0) #Key is up 
```

# events - 如何正确地为 Google Analytics（分析）事件代码创建目标？

> ID：13102889
> 
> 赞同：1
> 
> 时间：2012-10-27T18:20:48.690
> 
> 标签：events, google-analytics, goal-tracking

我在上周设定了一些目标，但结果仍然没有通过 - 我有一种感觉，这是由于我对 RegEx 的了解不足以及我想要跟踪的事件的动态性质。

我们跟踪汽车制造商的点击次数，因此我创建了一个目标，其操作匹配：

```
UsedCars.Model.Homepage. 
```

我们有一个事件的例子：

```
trackable_UsedCars.Model.Homepage.Subaru.Impreza STI 
```

我希望能够有一个目标，将**所有**这些行动作为一个目标集进行整理，但是觉得句号（美国读者的句号）在这里造成了一些混乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:24:18.183

尝试在 Google Analytics 中使用以下正则表达式...

`UsedCars\.Model\.Homepage\.`

希望这可以帮助。

# printing - Dart 中的乘法和连接结果

> ID：13102895
> 
> 赞同：0
> 
> 时间：2012-10-27T18:21:12.653
> 
> 标签：printing, for-loop, dart

我是 Dart 语言的新手，但我仍在努力！我遇到了这个问题，我想计算乘法表：14。

所以基本上，我想得到这个结果：14,28,42,56,70,84,98,112,126 等到 1400

当我打印我的结果时，我的功能工作。但我无法将结果粘贴到 div 中。

有我的 .dart ：

```
main() {    
  var numero2 = 14;
  var multiplication = 0;
  var element02 = query('#exercice02');   
  for (var i = 1; i < 101; i++) {
    multiplication = numero2 * i;
    print(multiplication); 
  }
  //element02.text = multiplication;

} 
```

在我的 html 中，我得到了：

```
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <title>HelloWorld</title>
    <link rel="stylesheet" href="HelloWorld.css">
  </head>
  <body>
    <div id="container">
      <p class="question">Exercice 02 : 100 x 14 : <span id="exercice02"></span></p>
    </div>

    <script type="application/dart" src="web/HelloWorld.dart"></script>
    <script src="https://dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js"></script>
  </body>
</html> 
```

实际上，我不知道如何连接结果，我试试你可以看到：element02.text = multiplication; 在 FOR 中，但它破坏了它，然后我尝试 += 并且它们相乘，最后我只有 1 个结果。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T21:26:42.047

您希望如何显示结果？喜欢：`14, 28, 42`？

**测试.dart**

```
import 'dart:html';

void main() {
  var results = [];
  for (var i = 14; i <= 1400; i += 14) {
    results.add(i.toString());
  }

  var element = query('#container');
  element.text = Strings.join(results, ', ');
} 
```

**测试.html**

```
<!DOCTYPE html>
<html>
  <body>
    <div id="container"></div>

    <script type="application/dart" src="test.dart"></script>
    <script src="https://dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js"></script>
  </body>
</html> 
```

输出：

> 14, 28, 42, 56, 70, 84, 98, 112, 126, 140, 154, 168, 182, 196, 210, 224, 238, 252, 266, 280, 294, 308, 322, 336, 350, 364, 378, 392, 406, 420, 434, 448, 462, 476, 490, 504, 518, 532, 546, 560, 574, 588, 602, 616, 630, 644, 658, 672, 686, 700, 714、728、742、756、770、784、798、812、826、840、854、868、882、896、910、924、938、952、966、980、994、1008、1022、1036、105 1064,1078,1092,1106,1120,1134,1190,1204,1218,1232,1246,1260,1274,1288,1302,1316,1330,1344,1358,1372,1386,1400

# ruby - 如果 select_list 有选项，请签入 watir

> ID：13102899
> 
> 赞同：2
> 
> 时间：2012-10-27T18:21:51.007
> 
> 标签：ruby, watir

现在我有这样的watir代码：

```
require "watir-webdriver"

  browser = Watir::Browser.new :ff
  browser.driver.manage.timeouts.implicit_wait = 3 #3 seconds
  browser.goto "https://page***/default.aspx"

  browser.select_list(:name => 'ctl00$tresc$cbListaKrajow').select_value('6')
  puts "Selected country"  
  browser.select_list(:name => 'ctl00$tresc$cbListaPlacowek').wait_until_present
  browser.select_list(:name => 'ctl00$tresc$cbListaPlacowek').select_value('95')
  puts "Selected city" 
```

但主要问题是`ctl00$tresc$cbListaPlacowek`仅通过加载它的选项

```
ctl00$tresc$cbListaKrajow  is changed. It could take 1 or 30 seconds so `browser.driver.manage.timeouts.implicit_wait = 3 #3 seconds`  is not a good idea. How can i write that it try to select option unless it is present? Now i get errors like it could find such option... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T19:08:02.790

请注意，您也可以这样做：

```
browser.select_list(:name => 'ctl00$tresc$cbListaPlacowek').option(:value => '95').wait_until_present 
```

只是写的好一点。

**更新：**

如果您想等待任何选项出现在选择列表中，您可以执行以下操作：

```
browser.select_list(:name => 'ctl00$tresc$cbListaPlacowek').option.wait_until_present 
```

这在技术上正在等待第一个选项出现。请注意，根据您在做什么，这可能会给您带来误报。例如，如果选择列表已经填充了选项，您触发一些事件来重新填充列表，则选择列表将已经有第一个选项。在这种情况下，您可能还必须检查选项列表是否已更改。

如果你想选择一个值与数组中任何一个匹配的选项，你可以这样做：

```
browser.select_list(:name => 'ctl00$tresc$cbListaPlacowek').options.find do |option|
  somearray.include?(option.value)
end.select 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T18:51:17.897

我自己创立的：

```
 Watir::Wait.while { browser.select_list(:name => 'ctl00$tresc$cbListaPlacowek').include?('95') } 
```

# playframework - 在 2 个播放应用程序之间发送和接收 Json 数据

> ID：13102901
> 
> 赞同：0
> 
> 时间：2012-10-27T18:22:07.160
> 
> 标签：playframework, playframework-2.0

这两个应用程序都是在用于发送 Json 文件的 Play 2.0.4 应用程序中编写的 ：

```
@BodyParser.Of(play.mvc.BodyParser.Json.class)
    public static Result getJson() {

        ObjectNode result = Json.newObject();

        try {
            result.put("Backend",toJson());
            return ok(result);
        } catch (Exception ex) {
            System.out.println("Exception: " + ex.getMessage());
        }

        return ok(result);

    } 
```

URL:localhost:80/GetJson -> HTML 输出: {"status":"OK","message":"Hello Guillaume"}
有人可以告诉我如何从其他播放应用程序获取此 json 数据吗？（通过使用 POST 请求）。基本上，第一个应用程序可以使用第二个应用程序的 POST 请求将 Json 文件提供给第二个应用程序，或者第二个应用程序可以使用 Get 请求从第一个应用程序获取 Json 数据。
非常感谢。P/SI 阅读了 Play 的文档，但老实说，我不理解[处理 JSON 请求](http://www.playframework.org/documentation/2.0.4/JavaJsonRequests)部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T01:04:14.767

由于您只是从另一个应用程序获取 json 字符串而不修改服务器的状态，因此您应该使用“GET”请求。您可以使用您在 config/routes 中映射到的任何端点来测试此 api。

# php - AM / PM 值未在 Select 属性中正确显示

> ID：13102909
> 
> 赞同：0
> 
> 时间：2012-10-27T18:23:23.570
> 
> 标签：php, date, select, time, option

我有一个项目列表，每个项目都有一个日期/时间选项。我需要为每个列表项显示正确的时间。

但这似乎不起作用。它将为 $duedateA 返回正确的 'am' 或 'pm' 值，但是当我尝试设置选定的属性值时会变得不稳定，并且会显示错误的 am 或 pm，或两者兼而有之。

难道我做错了什么？

```
if(!empty($resInvoice[0]["due_date"])){
$duedateA = date("a",strtotime($resInvoice[0]['due_date']));
}       
if($duedateA == "am"){
$selected_am = 'selected="selected"';
}
if($duedateA == "pm"){
$selected_pm = 'selected="selected"';
}   

<select name="due_time[a]">
<option value="am" '.$selected_am.'>am</option>
<option value="pm" '.$selected_pm.'>pm</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T18:40:49.087

```
date_default_timezone_set('America/New_York');
$resInvoice[0]["due_date"] = '2012-10-26 03:21:44';
$selected_am = '';
$selected_pm = '';
$duedateA = '';
if(!empty($resInvoice[0]["due_date"])){
    $duedateA = date("a",strtotime($resInvoice[0]["due_date"]));
}       
if($duedateA == "am"){
    $selected_am = ' selected="selected"';
}
if($duedateA == "pm"){
    $selected_pm = ' selected="selected"';
}

echo '<select name="due_date[a]">
    <option value="am"'.$selected_am.'>AM</option>
    <option value="pm"'.$selected_pm.'>PM</option>
</select>'; 
```

抱歉所有变量，我的错误设置为严格。

# iphone - 横向问题的 UIView 动画

> ID：13102910
> 
> 赞同：1
> 
> 时间：2012-10-27T18:23:35.863
> 
> 标签：iphone, objective-c, ios, ipad, uiviewanimation

我有一个 UIViewController，它有一个 UIView，我添加到一个 nib 文件中。这是一个 iPad 项目。我想制作动画，以便当视图加载时，这个 UIView 从底部到中心出现，所以我做了以下操作：

```
[self.containerView_ setFrameY:self.view.bounds.size.height];
    [UIView animateWithDuration:0.6 delay:0.0 options:UIViewAnimationCurveEaseOut animations:^{
        [self.containerView_ setCenter:CGPointMake(self.view.bounds.size.width/2, self.view.bounds.size.height/2)];
    } completion:^(BOOL finished) {

    }]; 
```

这一切都在纵向上完美运行，但在横向上它搞砸了，因为 containerView 的 x 中心并没有真正居中，它有点偏左，因此动画不会在 y 轴上转换，但也会在 x 轴上转换为出色地..

我认为问题在于，如果我可以让 containerView 无论方向如何都居中，那将解决它。我正确设置了自动调整大小的蒙版，使其居中。我认为问题在于景观的视野范围仍然是 768x1024 而不是 1024x768。对此有任何想法吗？

# java - 文件操作有时不起作用

> ID：13102916
> 
> 赞同：0
> 
> 时间：2012-10-27T18:24:48.537
> 
> 标签：java, android, file, directory

我的应用程序中发生了一些非常奇怪的事情。如果它们不存在，我将在 SD 卡中创建 2 个文件夹，如果它们在 SD 卡中不存在，则从 URL 下载一些图像。有时，当我运行应用程序时，程序会检查文件夹是否存在以及图像是否存在，因为它们存在，它会继续并且没有任何问题。但通常当我运行应用程序时，它会提醒我文件夹不存在并且它甚至没有设法创建这些文件夹，然后当它尝试下载图像时我得到一个“找不到文件异常”已经存在于我的 SD 卡中。

PS：我在 2 台设备上尝试过，同样的情况，有时有效，有时无效。

这里可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:52:12.307

实际上，在从外部存储访问文件之前，您必须检查`External storage` **设备上是否存在（可用）**（如果设备的 sdcard 安装在系统上则可能）。为此，您必须检查外部存储的状态是否已安装。

查看此链接以获取更多信息..

[http://developer.android.com/guide/topics/data/data-storage.html#filesExternal](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)

现在解决方案：

如果您发现外部存储不可用，则可以`Internal Storage`临时存储文件（然后您可以将这些文件移动到外部存储中）。

因此，我的链接还可以帮助您了解如何在 Android 中访问内部存储。

# c++ - C++ 类型定义错误

> ID：13102917
> 
> 赞同：0
> 
> 时间：2012-10-27T18:24:49.373
> 
> 标签：c++, visual-studio, typedef

```
bool CInetWrapper::OpenFtpConnection (LPCTSTR lpszServerName)
{
    // internetconnect(inet_open,'ftp.site.ru',port,'login','pass',INTERNET_SERVICE_FTP,INTERNET_FLAG_PASSIVE,0);

    if (OpenInternet() && m_hConnection == NULL)
        // (HINTERNET,LPCSTR,INTERNET_PORT,LPCSTR,LPCSTR,DWORD,DWORD,DWORD);
        typedef HINTERNET (__stdcall* InternetConnect_)(HINTERNET,LPCSTR,INTERNET_PORT,LPCSTR,LPCSTR,DWORD,DWORD,DWORD);
        InternetConnect_ ic = (InternetConnect_)helper.GetProcAddressEx("wininet.dll", "InternetConnectA");
        m_hConnection = ic(
        m_hInternet,
        lpszServerName? lpszServerName:
            m_lpszServerName? m_lpszServerName: "localhost",
        INTERNET_DEFAULT_FTP_PORT,
        m_login,
        m_password,
        INTERNET_SERVICE_FTP,
        0,
        0);

    return CheckError(m_hConnection != NULL);
} 
```

和编译器说： 1>----- 构建开始：项目：klstart，配置：调试 Win32 ------ 1> HTTPReader.cpp 1>c:\u\admin\visual studio 2010\projects\klstart \klstart\httpreader.cpp(100): 错误 C2065: 'InternetConnect_': 未声明的标识符 1>c:\u\admin\visual studio 2010\projects\klstart\klstart\httpreader.cpp(100): 错误 C2146: 语法错误： 失踪 ';' 在标识符“助手”之前我写错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T19:09:56.547

您忘记将您的真正分支包装`if`成复合语句。

基本上，问题与这段代码相同

```
if (some_condition)
  typedef int MyType;
  MyType i; // ERROR: `MyType` is undeclared identifier
  ... 
```

在上面的简单示例中，虚构的“作者”想要这样做

```
if (something)
{
  typedef int MyType;
  MyType i; 
  ...
} 
```

但他忘了把那些放在`{}`那里，结果得到了完全不同的东西。您在代码中犯了同样的错误。

由于您没有在`if`（使用`{}`）之后创建复合语句，因此包含在其真正分支中的唯一部分`if`是您的`typedef`，仅此而已。那个单独的分支`typedef`是一个单独的本地范围，在此之后立即结束`if`。这意味着在您的`if`typename`InternetConnect_`不再为人所知之后。

要么把你的放在你的`typedef`之前`if`，要么把真正的分支包成一对`{}`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-27T19:06:57.330

尝试使用`#include <cstdlib>`

或者尝试使用结构，会更简单，更容易理解，出错的机会更少。

# javascript - 将字符串转换为数组

> ID：13102918
> 
> 赞同：20
> 
> 时间：2012-10-27T18:25:02.517
> 
> 标签：javascript

如何在 Javascript 中以与 PHP（数组）相同的方式将字符串转换为数组。

```
//PHP
$array = (array)"string" 
```

基本上我有一个可以是数组或字符串的变量，如果是字符串，我想使用内联命令使其成为数组。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-09-27T19:36:10.317

哈克，但有效：

```
[].concat(arrayOrString);

//Usage:
[].concat("a");
//["a"]
[].concat(["a"]);
//["a"] 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-10-27T18:29:23.383

JavaScript 是一种原型语言，没有类型转换系统。

一种解决方案是检查您的变量是否为字符串并将其转换为数组。例如 ：

```
if (typeof someVariable == 'string') someVariable = [someVariable]; 
```

在 PHP 中，如果您对**字符串**进行检查，例如 (ex: `$array = 'string';`)：

```
$array = (array) $array;  // ex: "string" becomes array("string") 
```

等效的 JavaScript 将是

```
arr = typeof arr == 'string' ? [arr] : arr; 
```

如果您的变量`arr`不一定是字符串，您可以使用`instanceof`：

```
arr = arr instanceof Array ? arr : [arr]; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-27T18:27:32.350

```
var str    = "string";
var array  = str.split('');

console.log(array); // ['s', 't', 'r', 'i','n','g'] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-08-08T09:03:17.883

你可以在 jQuery...

```
var arr = "[1,2,3,4,5]"; 
window.x = $.parseJSON(arr);
console.log(x);//cast as an array... 
```

即使你有类似的东西它也能工作

```
[{"key":"value"}] 
```

但是，如果您有类似的东西，这可能不起作用...

```
[{key:"value"}] // different is the " (double quotes) on key 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-03-18T22:36:39.327

将字符串转换为数组：

```
var myString = "['boop','top','foo']";
var myArray = JSON.parse(myString) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-27T18:32:15.530

就这样做

```
"sample".split(""); 
```

你会得到

```
["s", "a", "m", ...] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-27T18:29:02.950

您不能在 JS 中强制转换为 Array，但一个简单的三元运算可以完成您想要的操作。

```
var str = 'string';
var arr = (str instanceof Array) ? str : [ str ]; 
```

这适用于任何非数组对象或任何原始值。如果您确定此处只能遇到实际`Array`对象和`string`基元，则以下方法会更快一些：

```
var arr = (typeof str === 'string') ? [ str ] : str; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-27T18:29:07.410

```
"1,2,3".split(",") 
=> ["1", "2", "3"] 
```

使用拆分（）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-09-25T18:48:56.980

Val 的建议也适用于具有数组数组的字符串

```
var str = "[[1121,1],[1122,2],[1123,3]]";
var arr = $.parseJSON(str);
console.log(arr); //returns array of arrays 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-28T10:14:38.943

您还可以使用以下 if 语句：

```
if(array instanceof Array != true) {array = [array];} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-12-11T17:20:26.940

```
Array.isArray(foo) || (foo = [foo]); 
```

或者如果那不舒服

```
foo = Array.isArray(foo) ? foo : [foo]; 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2018-03-25T21:24:26.620

已经[有一个提案](https://tc39.github.io/proposal-flatMap/)`Array.flatten()`可以用于`babel-preset-stage-2`.

```
const array = ['foo'].flatten()
console.log(array) // ['foo']

const array = [['foo', 'bar']].flatten()
console.log(array) // ['foo', 'bar']
```

# c# - 返回学生信息 - SQL/C# 作业

> ID：13102923
> 
> 赞同：0
> 
> 时间：2012-10-27T18:26:11.647
> 
> 标签：c#, sql, visual-studio-2012

所以本质上，我有两个文本字段，一个是学生的名字，一个是学生的姓氏。我希望程序做的是：

使用`TextBox`上面的名字和姓氏返回学生的电话号码和评论。这是我到目前为止所拥有的：

```
if (actionButton.Text == "Update")
{
    SqlConnection cn;
    cn = new SqlConnection();
    cn.ConnectionString = "Data source=(local); Initial Catalog=INT422Assignment1; Integrated Security=SSPI;";
    cn.Open();
    SqlCommand cmd;
    cmd = new SqlCommand();
    cmd.Connection = cn;
    cmd.CommandText = "SELECT firstName, lastName, phoneNumber, Comments FROM myTable WHERE firstName LIKE @firstName AND lastName LIKE @lastName"; //AND lastName LIKE @lastName"
    //used this part to delete records

    SqlParameter param = new SqlParameter();
    param.ParameterName = "@firstName";
    param.Direction = ParameterDirection.Input;
    param.SqlDbType = SqlDbType.VarChar;
    param.Value = firstNameTB.Text;
    cmd.Parameters.Add(param);

    param.ParameterName = "@lastName";
    param.Direction = ParameterDirection.Input;
    param.SqlDbType = SqlDbType.VarChar;
    param.Value = lastNameTB.Text;
    cmd.Parameters.Add(param);

    //display data in a listbox
    SqlDataReader reader;
    reader = cmd.ExecuteReader();
    while (reader.Read())
    {
        string s;
        s = reader["firstName"].ToString() + "-" + reader["lastName"].ToString() + reader["phoneNumber"].ToString() + reader["Comments"].ToString();
        MessageBox.Show(s);
    }

    cmd.ExecuteNonQuery();

    cn.Close();
} 
```

我不知道从这里去哪里。在代码中我放置了两个注释语句，所以我在我的作业的两个不同部分使用了上面的语句，但是当我把它们放在一起时，它就不起作用了。

发生的事情是我没有得到任何结果。基本上我需要它给我两个文本框中指示的学生的电话号码和评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:32:26.437

我假设你得到一个错误，是吗？您正在尝试对同一个命令对象执行两个操作，而我模糊的回忆说那是行不通的。尝试删除此行。

```
 cmd.ExecuteNonQuery(); 
```

如果您研究过 using 语句，那通常是处理连接和阅读器等资源的更好解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T21:30:24.110

```
if (actionButton.Text == "Update")
{
    SqlConnection cn = new SqlConnection();
    cn.ConnectionString = "Data source=(local); Initial Catalog=INT422Assignment1; Integrated Security=SSPI;";
    cn.Open();

    MessageBox.Show(cn.ConnectionState.ToString());
// If you are shown "Open" by above messagebox and you are using correct table and column names then you will get accurate results by following code

    SqlCommand cmd = cn.CreateCommand();
    cmd.CommandText = "SELECT firstName, lastName, phoneNumber, Comments FROM myTable WHERE firstName LIKE '" + firstNameTB.Text + "' AND lastName LIKE  '" + lastNameTB.Text + "' "; 
    SqlDataReader reader = cmd.ExecuteReader();
    string s = "";
    while (reader.Read())
    {
        s = reader["firstName"].ToString() + "-" + reader["lastName"].ToString() + reader["phoneNumber"].ToString() + reader["Comments"].ToString();
        MessageBox.Show(s);
    }    
    cn.Close();
} 
```

# macos - gfortran 在编译多个文件时返回 `*.f90: No such file or directory`

> ID：13102926
> 
> 赞同：0
> 
> 时间：2012-10-27T18:26:25.540
> 
> 标签：macos, bash, fortran, sh, gfortran

我有一个包含 354 个 .f90 模块（和主文件）的文件夹。在自述文件中建议：

> `source.zip`最好的方法是将所有 354 个程序文件解压缩到您选择的目录中。然后就可以用命令编译了
> 
> ```
> gfortran *.f90 -o app.exe 
> ```

我在 Mac 上，所以我安装了 gfortran，但是执行上面写的命令不起作用：

```
gfortran: *.f90: No such file or directory 
```

所以我认为需要一个 bash 脚本（或至少一个 makefile）。我不习惯这样做，我该怎么办？是否存在一些自动生成文件生成器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T14:41:10.637

这只是一个愚蠢的问题。文件的扩展名是**.F90**而不是**.f90**。和：

```
gfortran -o app *.F90 
```

有效。

# matlab - 菜单功能窗口的位置

> ID：13102927
> 
> 赞同：0
> 
> 时间：2012-10-27T18:26:31.453
> 
> 标签：matlab

我使用该`menu()`功能。输出窗口位于屏幕的左上角。所以问题是，是否有可能改变这一立场？（当然我知道与 courser 的可能性）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T07:59:21.273

你试过这个吗？它肯定适用于数字，而不是 100% 确定菜单。 [http://www.mathworks.es/es/help/matlab/creating_plots/positioning-figures.html?s_tid=doc_12b](http://www.mathworks.es/es/help/matlab/creating_plots/positioning-figures.html?s_tid=doc_12b)

# html - 在 HTML5 中包含大写锁定检测

> ID：13102929
> 
> 赞同：2
> 
> 时间：2012-10-27T18:26:43.490
> 
> 标签：html, capslock

是否有计划在 html5 或其他规范中实现大写锁定检测。这似乎是一个非常简单的功能缺失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T18:31:00.030

从来没听说过。如果您想这样做，尽管这是一种合理的方法。

[http://www.codeproject.com/Articles/17180/Detect-Caps-Lock-with-Javascript](http://www.codeproject.com/Articles/17180/Detect-Caps-Lock-with-Javascript)

基本上，这个想法是只测试字母是否大写，并将结果与​​打字时是否按下 shift 键进行比较。据我所知，无法立即在 Web 应用程序中检测 CAPS 锁定。

# android - 在 DatePickerDialog (Android) 上验证日期时出现 IllegalArgumentException

> ID：13102930
> 
> 赞同：4
> 
> 时间：2012-10-27T18:26:48.177
> 
> 标签：android, datepicker, illegalargumentexception, datepickerdialog

当我在 DatePickerDialog 上验证日期时，我遇到了 IllegalArgumentException。这是堆栈跟踪：

```
10-27 19:50:34.700: E/AndroidRuntime(1188): FATAL EXCEPTION: main
10-27 19:50:34.700: E/AndroidRuntime(1188): java.lang.IllegalArgumentException
10-27 19:50:34.700: E/AndroidRuntime(1188):     at java.text.DateFormat.format(DateFormat.java:365)
10-27 19:50:34.700: E/AndroidRuntime(1188):     at java.text.Format.format(Format.java:93)
10-27 19:50:34.700: E/AndroidRuntime(1188):     at com.boka.lesbonscomptes.ActivityMain$1.onDateSet(ActivityMain.java:43)
10-27 19:50:34.700: E/AndroidRuntime(1188):     at android.app.DatePickerDialog.onClick(DatePickerDialog.java:111)
10-27 19:50:34.700: E/AndroidRuntime(1188):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:166)
10-27 19:50:34.700: E/AndroidRuntime(1188):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-27 19:50:34.700: E/AndroidRuntime(1188):     at android.os.Looper.loop(Looper.java:137)
10-27 19:50:34.700: E/AndroidRuntime(1188):     at android.app.ActivityThread.main(ActivityThread.java:4424)
10-27 19:50:34.700: E/AndroidRuntime(1188):     at java.lang.reflect.Method.invokeNative(Native Method)
10-27 19:50:34.700: E/AndroidRuntime(1188):     at java.lang.reflect.Method.invoke(Method.java:511)
10-27 19:50:34.700: E/AndroidRuntime(1188):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-27 19:50:34.700: E/AndroidRuntime(1188):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-27 19:50:34.700: E/AndroidRuntime(1188):     at dalvik.system.NativeStart.main(Native Method) 
```

和我的代码

```
    公共类 ActivityMain 扩展 Activity {

    //属性界面
    私人线性布局布局NouvelleDepense = null;
    私人按钮 bDate = null;

    私人公历日历 gcDate = null;

    //工具
    私人 SimpleDateFormat sdfAjd = null;
    静态最终 int DATE_DIALOG_ID = 1;

    /*监听器*/

    私人 DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {
        public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth)
        {
            Toast.makeText(getBaseContext(), "ok",Toast.LENGTH_SHORT).show();
            //La date est calée sur le choix de l'utilisateur
            gcDate.set(year, monthOfYear, dayOfMonth);
            //Le bouton est mis à jour avec la date choisie
            bDate.setText(sdfAjd.format(gcDate));
        }
    };  

    私人 OnClickListener oclBoutonDate = new View.OnClickListener() {
        @覆盖
        公共无效 onClick（查看 v）{
            显示对话（DATE_DIALOG_ID）；     
        }
    };      

    /*方法*/
    @覆盖
    公共无效 onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        layoutNouvelleDepense = (LinearLayout) LinearLayout.inflate(this,R.layout.nouvelle_depense, null);
        bDate = (Button) layoutNouvelleDepense.findViewById(R.id.bDate);

        bDate.setOnClickListener(oclBoutonDate);

        gcDate = new GregorianCalendar();
        sdfAjd = new SimpleDateFormat("EEEE dd/MM/yyyy", Locale.getDefault());

        bDate.setText(sdfAjd.format(gcDate.getTime()));

        setContentView(layoutNouvelleDepense);
    }

    @覆盖
    公共布尔 onCreateOptionsMenu（菜单菜单）{
        getMenuInflater().inflate(R.menu.activity_main, menu);
        返回真；
    }

    @SuppressWarnings("静态访问")
    @覆盖    
    受保护的对话 onCreateDialog(int id)
    {
        System.out.println("DATE = " + gcDate.get(GregorianCalendar.YEAR) + "/" + gcDate.get(GregorianCalendar.MONTH) + "/" + gcDate.get(GregorianCalendar.DAY_OF_MONTH));
         return new DatePickerDialog(this, mDateSetListener, gcDate.get(GregorianCalendar.YEAR), gcDate.get(GregorianCalendar.MONTH), gcDate.get(GregorianCalendar.DAY_OF_MONTH));
    }
}
```

我在创建对话框时没有问题，并且在显示对话框时正确初始化了日期。

无论选择哪个日期，都会引发 IllegalArgumentException。

很长一段时间以来，我一直在寻找答案，但所有类似的帖子都是关于创建对话框时提出的异常，而不是验证日期。

你能帮我看看是怎么回事吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:39:00.167

在您的 OnDateSetListener 添加`getTime()`到您的格式命令：

```
bDate.setText(sdfAjd.format(gcDate.getTime())); 
```

不同之处在于它`GregorianCalendar#getTime()`返回一个 Date 对象并调用`SimpleDateFormat#format(Date)`，如您所知，它在您的`onCreate()`方法中运行良好。

但是`format(gcDate)`它本身会调用`SimpleDateFormat#format(Object)`引发异常的泛型方法，因为`format()`它不理解 Date 对象。

# php - cURL 能够制作 cookie 但不能使用它

> ID：13102931
> 
> 赞同：1
> 
> 时间：2012-10-27T18:27:04.393
> 
> 标签：php, bash, curl

我正在尝试编写 bash 脚本来执行一些简单的 curl 命令。

我可以使用以下命令生成我想使用的 cookie：

```
curl -c cookie --data "user=user&password=pass" //example/login.php 
```

但是，当我再次尝试将其传递到站点时，cookie 将被忽略。就好像我什至没有登录过一样。我正在使用的命令如下：

```
curl -b cookie //example/ 
```

我究竟做错了什么？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T18:32:05.187

您可能想要存储返回的 cookie。您可以通过指定 cookie 文件来做到这一点：

```
curl -c cookies.txt -d "user=user&password=pass" //example/login.php 
```

并在以后的请求中使用这些 cookie：

```
curl -b cookies.txt //example/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T03:24:04.987

事实证明，我毕竟没有正确生成我的 cookie。实际上，我缺少一些在我的 POST 语句中需要的额外变量，这些变量与我正在使用的 php 登录脚本交互。

# c# - 在 C# 中创建一个额外的桌面

> ID：13102932
> 
> 赞同：5
> 
> 时间：2012-10-27T18:27:07.593
> 
> 标签：c#, virtual, desktop

我见过一些创建虚拟桌面的应用程序。我想创建一个。

但是，我不知道您将如何做到这一点，甚至有可能。

如何在 C# 中创建虚拟桌面/监视器？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-27T18:29:11.637

您需要使用[CreateDesktop](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682124%28v=vs.85%29.aspx)函数才能在 Windows 操作系统上创建功能齐全的桌面：

> 创建一个新桌面，将其与调用进程的当前窗口站相关联，并将其分配给调用线程。调用进程必须有一个关联的窗口站，由系统在进程创建时分配或由 SetProcessWindowStation 函数设置。

*也请您注意来自CodeProject*的有趣文章：

[桌面切换](http://www.codeproject.com/Articles/7666/Desktop-Switching)

一般来说，multidektop 环境已经存在`Windows Os`多年，但从未通过 MS 本身实现的任何 multidektop 应用程序“可见”。出于某种原因，据我所知，MS 从未实现过多桌面应用程序。

如果我没记错的话，甚至从*WindowsNT*家族操作系统开始，您已经有了第二个桌面。当您按下`Ctrl+Alt+Del`屏幕时，实际上是在另一个功能齐全的 Windows 桌面上。

# c# - 是否可以使用反射获得类型的摘要？

> ID：13102935
> 
> 赞同：2
> 
> 时间：2012-10-27T18:27:19.593
> 
> 标签：c#, .net, reflection

您知道当您转到对象浏览器并选择一种类型时，其名称下方有一个摘要吗？

例如：

```
public sealed class Activator
     Member of System

 Summary:
  Contains methods to create types of objects locally or remotely, or obtain references to existing remote objects. This class cannot be inherited. 
```

是否可以使用反射获得该信息？如果是这样，它是如何完成的？如果这不可能，那么这些数据存储在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T18:34:59.450

单独注释的原因`can’t be discovered by reflection`是因为它们是`not included in the .NET assemblies`（.EXE 或 .DLL 文件），但通常是`included as .XML files to accompany the assembly files`.

`DocsByReflection`可用于获取摘要。[有关详细信息，请参阅此处](http://jimblackler.net/blog/?p=49)的链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T18:33:06.457

答案是：

[http://jimblackler.net/blog/?p=49](http://jimblackler.net/blog/?p=49)

看起来这是可能的。

# amplifyjs - Amplify.js 请求中未传递错误消息

> ID：13102937
> 
> 赞同：1
> 
> 时间：2012-10-27T18:27:28.370
> 
> 标签：amplifyjs

我有这个使用 amplify.js 的代码：

```
amplify.request.define('data', 'ajax', {
        url: "WebService.asmx/HelloWorld",
        datatype: "json",
        type: "POST"
    });

amplify.request({
        resourceId: 'data',
        success: function(p1, p2, p3) {
            debugger;
        },
        error: function(p1, p2, p3) {
            debugger;
        }
    }); 
```

问题是服务器报告错误，然后在错误回调中，p1 为空，p2 为“错误”，p3 未定义。

类似的 jQuery.ajax 会正确填充这些参数。

```
$.ajax({
        type: "POST",
        url: "WebService.asmx/HelloWorld",
        success: function(p1, p2, p3) {
            debugger;
        },
        error: function(p1, p2, p3) {
            debugger;
        }
    }); 
```

我是否缺少 Amplify.js 配置来完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:09:58.263

按照这个链接

[扩大支持小组](https://groups.google.com/forum/?fromgroups#!topic/amplifyjs/JeuvAIr3_mg)

看起来默认不支持解析错误正文。我将不得不为此编写自己的解码器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-08T12:47:45.180

默认情况下，放大使用 Jsend 解码器，您可以将其替换为您自己的。这是我的简单解码器，它将响应主体 JSON 对象传递给成功和错误回调：

```
amplify.request.decoders._default = function( data, status, ampXHR, success, error ) {

    if (status === "success") {
        success(data);
    } else {
        error(JSON.parse(ampXHR.responseText));
    }

} 
```

PS。在此之前，请考虑将您的 api 响应调整为 jsend 约定，在此处阅读更多内容：http: [//labs.omniti.com/labs/jsend](http://labs.omniti.com/labs/jsend)

# javascript - 脚本在 JSP 循环的每次迭代后运行两次

> ID：13102940
> 
> 赞同：2
> 
> 时间：2012-10-27T18:28:00.087
> 
> 标签：javascript, jquery, jstl, el

```
<div style="width:100%;background-color:  #61b832;border-radius: 10px;color:white;text-align: center">Videos List</div>
<table style="width:100%;"id="videoTable">
    <c:forEach items="${requestScope.userInfo.videoList}"var="video"varStatus="0">
        <script>
            var fullvideoUrl='<c:out value="${video.videoUrl}"></c:out>';
            var videocode='http://www.youtube.com/embed/'+youtube_parser(fullvideoUrl);
            $('#videoTable').prepend('<tr class="appendVideo"><td  style="width:80%;border-bottom: 1px solid #CCC;"><c:out value="${video.videoDescription}"></c:out></td><td  style="width:20%;border-bottom: 1px solid #CCC"><img src="images/fancybox_play-button-icon.png" class="changeVideo" videoId="<c:out value="${video.videoId}"></c:out>" videoUrl ="'+videocode+'"/></td></tr>');
        </script>
    </c:forEach>
</table>
</div> 
```

这就是我正在尝试做的，但每个视频都会在表格中添加两次

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T18:39:01.837

您可能想使用`c:if`如下：

```
 <c:if test="${requestScope.userInfo.videoList.size() >0}" >
      <script>
          $('#videoTable').prepend("1");
      </script>
    </c:if> 
```

编辑：

不知道为什么要使用`script`. 我想你可以简单地这样写：

```
 <div style="width:100%;background-color:  #61b832;border-radius: 10px;color:white;text-align: center">Videos      List</div>
  <table style="width:100%;"id="videoTable">
   <c:forEachitems="${requestScope.userInfo.videoList}" var="video" varStatus="0">
     <tr class="appendVideo"><td  style="width:80%;border-bottom: 1px solid #CCC;"><c:out value="${video.videoDescription}"></c:out></td><td  style="width:20%;border-bottom: 1px solid #CCC"><img src="images/fancybox_play-button-icon.png" class="changeVideo" videoId="<c:out value="${video.videoId}"></c:out>" videoURL="http://www.youtube.com/embed/${video.videoUrl}"/></td></tr>
   </c:forEach>
  </table>
</div> 
```

如果您想对结果进行反向排序，只需在 UI 中打印之前对您的`requestScope.userInfo.videoList`使用进行反向排序。`Collections.sort`此外，如果 URL 中需要任何修改，请在原始视频列表本身中执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-07T09:31:36.757

当您在 jsp 文件中使用样式时，有时会出现此问题，其中一种样式包含 body 标记，删除 Style 定义标记中的任何 body 标记，jsp 将正常工作。正文声明如下所示：

```
body {
    background-image: url();
} 
```

只需从您的脚本中删除此行并重新运行您的页面。

# jquery - JQuery淡入淡出滞后

> ID：13102941
> 
> 赞同：0
> 
> 时间：2012-10-27T18:28:03.650
> 
> 标签：jquery, fadeto

我使用 JQuery fadeTo 效果在鼠标悬停时将图像的不透明度更改为 0.2，并在鼠标离开时将其更改回 1。我遇到的问题是，每当我触发 mouseleave 事件时，图像的不透明度为 0.2 几秒钟，然后返回不透明度值为 1。就像我正在使用延迟功能但我没有。任何提示表示赞赏。这是代码：

```
$(document).ready(function() {
         $('.projectboxright').mouseover(function(){
              $('.projectboxright .projectimage').fadeTo(300,0.2,'easeOutQuad');
         });

         $('.projectboxright').mouseleave(function(){
              $('.projectboxright .projectimage').fadeTo(300,1,'easeOutQuad');
         });
}); 
```

# c++ - 通过类在 C++ 中使用 streambuf 读取二进制数据

> ID：13102947
> 
> 赞同：1
> 
> 时间：2012-10-27T18:28:39.103
> 
> 标签：c++, object, constructor, streambuf

我是一名 ac 程序员，试图在 C++ 中开始我生命的新阶段（我知道我仍在使用下面的 printf，但那是因为格式化很容易）。我希望从对象的成员函数中打印出数据文件的第一个字节。我认为我的流缓冲区在读取数据之前就被破坏了，但我不知道该怎么做。

我的课程如下所示

```
class MyParser {
    MyParser(string filepath);
    void readHeader();

    streambuf *pbuf;
    long size;
} 
```

我的构造函数打开文件，取出缓冲区，输出第一个字节并返回。（我认为`pbuf`在这段代码的末尾会死）。此代码输出`First Byte (in constructor): 0x8C`

```
MyParser::MyParser(string filepath) {
    ifstream file(filepath.c_str(), ios::in | ios::binary)
    pbuf = file.rdbuf();
    size = pbuf->pubseekoff(0,ios::end,ios::in);
    pbuf->pubseekpos(0,ios::in);

    unsigned char byte = pbuf->sgetc();
    printf("First Byte (in constructor): 0x%02X\n", byte);

    return;
} 
```

我的读取头正在转储第一个字节，但根据输出，所有看到的是`First Byte (in readHeader): 0xFF`

```
void MyParser::readHeader() {
    unsigned char byte = pbuf->sgetc();
    printf("First Byte (in readHeader): 0x%02X\n", byte);
} 
```

我的 main 只是创建了一个解析器并尝试 readHeader

```
void main() {
    MyParser parser("../data/data.bin");
    parser.readHeader();
} 
```

我认为我的问题的解决方案是创建一个`new`流缓冲区，但`new streambuf(file.rdbuf())`对我不起作用。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:43:17.423

您的程序具有未定义的行为：您保留的流缓冲区归`std::ifstream`您在构造函数主体中打开的所有。当这个对象死亡时，流缓冲区也会被释放。避免这个问题的最简单方法是让你`std::ifstream`成为你的类的成员：这将流的生命周期绑定到你的对象。`std::istream`使用该接口进行解析也可能比使用有些笨拙的接口更容易`std::streambuf`。

如果你真的只想使用一个流缓冲区，你可以直接分配一个`std::filebuf`using`new filebuf`和`open()`文件流。要保留指向它的指针，您可能会使用`std::unique_ptr<std::filebuf>`（或者`std::auto_ptr<std::filebuf>`如果您不使用 C++ 2011）。使用指针类安排对象的自动释放。当然，指针仍然是你的类的成员，以确保生命周期正确。

您复制流缓冲区的尝试无效，因为流缓冲区不可复制。您需要直接创建文件缓冲区：

```
MyParser::MyParser(std::string const& filename)
    : pbuf(new std::filebuf)
{
    this-pbuf->open("whatever", std::ios_base::in);
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T18:53:54.827

你需要一些新的 C++ 教材，因为（对不起）但这是错误的。您需要将文件流声明为成员，`new`该程序中不需要任何地方，而且几乎没有人需要处理`streambuf`.

```
class MyParser {
    std::ifstream file;
public:
    MyParser(string filepath) {
        file.open(filepath, std::ios::in | std::ios::binary );
        char byte;
        file.read(sizeof(byte), &byte);
        printf("First Byte (in constructor): 0x%02X\n", byte);        
    }
    void readHeader() {
        char byte;
        file.read(sizeof(byte), &byte);
        printf("First Byte (in readHeader): 0x%02X\n", byte);   
    }
}; 
```

# c - 如何将指针传递给函数？

> ID：13102954
> 
> 赞同：0
> 
> 时间：2012-10-27T18:29:36.943
> 
> 标签：c, pointers

我正在编写一个函数来查找哈希表中的值。为什么每次到达第 6 行都会出现运行时错误？请帮忙！

```
int* value = 0;
printf ("find return value: %d \n", find(keyList[i], value)); 
```

上面两行是main中用到的函数调用。

```
int find( char *key, int *p_ans ){
int hashValue = hash(key);
entry* newTable = table[hashValue];
while (newTable != NULL){
    if ((newTable -> key) == key){
        *p_ans = newTable -> val; // THE ERROR LINE
        return 1;
    }
    newTable = newTable -> next;
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T18:31:39.303

因为`p_ans == NULL`. 将您的呼叫更改为以下之一：

### 堆

```
int value;

if (find(keyList[i], &value)) {
    printf ("find return value: %d\n", value);
}
else {
    printf ("not found\n");   
} 
```

### 堆

```
int *value = malloc(sizeof(int));

if (find(keyList[i], value)) {
    printf ("find return value: %d\n", *value);
}
else {
    printf ("not found\n");   
}

free(value); 
```

关键是您需要为整数分配空间。如果你有一个局部变量`int value`，那么你可以传递它的地址并`find`改变变量的值。

如果你有，`int *value`那么你有一个指针。这个指针需要指向某个地方的 int。为一个值`malloc`分配空间。`int`

写入`int *value = 0`不会创建值为 0 的 int，它会创建一个值为 NULL 的 int*指针*（当用作指针值时，0 表示 NULL）。您不能取消引用此 NULL 指针。如果您调用`find(keyList[i], NULL)`then `p_ans == NULL`，并`*p_ans`取消引用 NULL 指针并使您的程序崩溃。

如果仍然没有意义，请考虑这两个代码片段。第一个会崩溃。第二个将起作用。你明白为什么吗？

```
// Bad
int *pointer = NULL;
if (find(keyList[i], pointer))

// Good
int value;
int *pointer = &value;
if (find(keyList[i], pointer)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-27T18:34:09.393

您需要`int`在函数外部分配；在堆栈上或堆上。要将它分配到堆栈上，只需执行

```
int ans;
find(key, &ans); 
```

要在堆上分配它，请执行

```
int* p_ans = new int;
find(key, p_ans);
...
delete p_ans; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-27T18:34:51.263

你正在设置这个：

```
*p_ans = newTable -> val; // THE ERROR LINE 
```

为此，您必须在 p_ans 处进行 malloc，但您的 p_ans 指针为 0，它是从指向 0 的“值”变量获得的，这就是问题所在

添加这一行：

```
value = (int *)malloc(sizeof(int)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-27T18:35:08.827

这是因为您将指针传递给`NULL`. 您不必实际声明指针以将指针传递给函数，而是使用地址操作符`&`：

```
int value = 0;
printf ("find return value: %d \n", find(keyList[i], &value));
/* Using address-of operator here -------------------^ */ 
```

# ajax - 我可以使用 hashbang (#!) URL 向 ajax 驱动的网站添加自定义标题吗？

> ID：13102962
> 
> 赞同：1
> 
> 时间：2012-10-27T18:30:53.763
> 
> 标签：ajax, wordpress, seo, hashbang

我正在使用 ajax 驱动的 WordPress 主题，它具有像 www.example.com/#!/page 这样的 hashbang URL。我想知道由于 SEO，我可以为每个页面添加自定义标题和描述吗？该站点尚未编入索引，因此我看不到 Google 如何查看带有 hashbang URL 的页面，但我认为它的标题与主页相同？顺便说一句，该网站是 www.jsomedia.com

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T09:01:23.563

听起来您不太了解 Google 如何支持 #!。这是规格：

[https://developers.google.com/webmasters/ajax-crawling/docs/specification](https://developers.google.com/webmasters/ajax-crawling/docs/specification)

谷歌抓取工具不会抓取 #!ed URL，而是使用 _escaped_fragment_ 的备用网址。此备用 URL 应该是内容的纯 html 版本 #! 值代表。

由于它是纯 html，它可以包含标题标签和元描述。

# google-chrome - Chrome 开发工具中的自动换行？

> ID：13102963
> 
> 赞同：36
> 
> 时间：2012-10-27T18:30:54.413
> 
> 标签：google-chrome, console, google-chrome-devtools, word-wrap

我无法弄清楚如何让 HTML 元素在 Chrome 开发工具中换行。我正在处理一些又长又复杂的 SVG 路径，我讨厌水平滚动来检查其他元素属性。在 chrome 开发工具的设置区域下检查自动换行。建议？

[![在此处输入图像描述](../Images/df0f17d0434ac3a23154a3005e1f277d.png)](https://i.stack.imgur.com/DAGQY.png)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-26T16:11:34.670

看起来现在没有可用的自动换行 :( 似乎人们一直在问，我也刚刚发布了我对自动换行的投票

[https://code.google.com/p/chromium/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Pri%20M%20Iteration%20ReleaseBlock%20Cr%20Status%20Owner%20Summary%20OS%20Modified&groupby= &sort=&id=73193](https://code.google.com/p/chromium/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Pri%20M%20Iteration%20ReleaseBlock%20Cr%20Status%20Owner%20Summary%20OS%20Modified&groupby=&sort=&id=73193)

**编辑：现在看起来它是一个默认功能（点击右上角的三个点，然后点击设置）：**

![在此处输入图像描述](../Images/2c95a84475a4e89afb587b198830d022.png)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-11-06T12:11:04.407

这是一个相当古老的线程，但不幸的是仍然相关。

自动换行仅适用于**元素**面板。从文档中：

> 与任何文本编辑器一样，您可以选择在“元素”面板中包装长行代码。

Leon 回答中的链接实际上是指网络面板，尽管一些评论表明其他人也在更普遍地看待这个问题；例如

> 如果为所有内容提供自动换行，那就太好了。

和 ...

> 我会捐出我的左肾来换行！

无论如何，如果您主要编辑 html，那么您很幸运 - 只需使用 Elements 面板而不是 Sources 面板。不幸的是，我的大部分编辑都是用 JS 进行的。

因此，我将在 Chromium 中打开一个新问题并在此处发布一个链接，以防有人想要支持它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-23T22:56:28.630

在 Chrome 的[Issue 167287: Feature request: word wrap for sources panel](https://bugs.chromium.org/p/chromium/issues/detail?id=167287)中，开发人员说：

**[2014 年 10 月 13 日]**

> 我们在这里严重依赖代码镜像功能。
> 
> * * *
> 
> 上游错误：[https ://github.com/codemirror/CodeMirror/issues/1356](https://github.com/codemirror/CodeMirror/issues/1356)

和：

**[2017 年 12 月 14 日]**

> 我有点害怕这样做的性能问题。当我们有一种更高效的方式来显示大/缩小文件时，将重新访问。[**状态**：已分配→WontFix]

但是，修复 CodeMirror 问题的实际工作分为两部分，每部分都有自己的错误：

*   ~~[长/大线的分割测量 - 第 1022 期](https://github.com/codemirror/CodeMirror/issues/1022)~~（2014 年 1 月 27 日关闭）

*   [尝试使用部分算法重绘线条 – 问题 #2090](https://github.com/codemirror/CodeMirror/issues/2090)（仍然开放，但听起来好像它适用于自动换行？）

所以，他们担心包裹超长的行会使编辑器停顿下来。如果您可以说服他们，无论是否实际改进 CodeMirror，他们都*可能*愿意在 Sources 选项卡中添加一个包装选项。

所以去搞砸：

*   [https://github.com/codemirror/CodeMirror](https://github.com/codemirror/CodeMirror)
*   [https://github.com/ChromeDevTools/devtools-frontend](https://github.com/ChromeDevTools/devtools-frontend)

# unix - cron 表达式

> ID：13102968
> 
> 赞同：0
> 
> 时间：2012-10-27T18:31:22.907
> 
> 标签：unix, cron

我在下面写了 cron 表达式来运行脚本周一到周五下午 16 点和 17:30 PMI，它正确吗？

```
0 00,30 16,17 ? * MON-FRI 
```

问候，

柴

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T20:25:46.360

你必须把它分成几行：

```
0 16 * * 1-5
30 17 * * 1-5 
```

也只有五列：分钟、小时、月份、月份、工作日

# keyboard - 无论键盘语言环境如何，都能获得按下的键？

> ID：13102970
> 
> 赞同：0
> 
> 时间：2012-10-27T18:31:37.567
> 
> 标签：keyboard, locale, capture

假设我在英文键盘上按了“=”。如果我将键盘语言切换为土耳其语，按相同的键会给我一个“-”。所以我很容易说我的操作系统解释了按键。

我的问题是，是否有可能获得 a 键的实际值，以便无论使用哪种语言，我都可以知道按下了哪个键？稍后，我需要将此值与 RegisterHotKey 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T18:35:20.297

您使用虚拟键码，而不是依赖于语言的键盘扫描码。

您没有指定编程语言，但这些应该独立于语言和操作系统。[虚拟键代码链接](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx)

# iphone - 在 ios 应用程序中读取 HTML 标签

> ID：13102973
> 
> 赞同：0
> 
> 时间：2012-10-27T18:31:51.107
> 
> 标签：iphone, html

我的 ios 应用程序中有一个标签，并且 . 从后端即时收到带有 HTML 标签的描述。前任-：

```
<b>Bold this </b>Sample description<strong>strong text </strong> 
```

但不幸的是，标签无法呈现 html 标签。有什么办法吗？不使用 webview

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T18:55:52.257

嗨，您可以为此使用 coretext

看看这个链接[Core-Text-Label](https://github.com/newsme/Core-Text-Label)

我希望这对你有帮助:)

# google-app-engine - Jersey REST 服务失败：java.lang.IncompatibleClassChangeError：实现类

> ID：13102977
> 
> 赞同：2
> 
> 时间：2012-10-27T18:32:20.870
> 
> 标签：google-app-engine, jersey

我希望 Jersey 能够轻松部署到 Google App Engine，因为它应该是受支持的 ( [http://code.google.com/p/googleappengine/wiki/WillItPlayInJava](http://code.google.com/p/googleappengine/wiki/WillItPlayInJava) ) 并且有几个人提到他们让它工作了 ( [http:// tugdualgrall.blogspot.ca/2010/02/create-and-deploy-jax-rs-rest-service.html](http://tugdualgrall.blogspot.ca/2010/02/create-and-deploy-jax-rs-rest-service.html)）但它不起作用......

*   我使用 Eclipse 的 gae 插件创建了一个新项目（使用 gae sdk 1.7.3）
*   我添加到我的 web.xml ：

    ```
    <servlet>
    <servlet-name>Jersey REST Service</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
      <param-name>com.sun.jersey.config.property.packages</param-name>
      <param-value>sample.hello.resources</param-value>
    </init-param>
    <init-param>
      <param-name>com.sun.jersey.config.feature.DisableWADL</param-name>
      <param-value>true</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
    </servlet> 
    ```

*   我添加到类路径： jersey-bundle-1.14.jar （我什至只尝试过核心、servlet 和服务器，我什至只尝试过 1.5）

但我仍然坚持这一点：

```
 WARNING: failed Jersey REST Service: java.lang.IncompatibleClassChangeError: Implementing class
  Oct 27, 2012 6:17:06 PM com.google.apphosting.utils.jetty.JettyLogger warn
  WARNING: failed com.google.appengine.tools.development.DevAppEngineWebAppContext@68c12474{/,/Users/anthony/workspaces/gae/restfulapp/war}: java.lang.IncompatibleClassChangeError: Implementing class
  Oct 27, 2012 6:17:06 PM com.google.apphosting.utils.jetty.JettyLogger warn
  WARNING: failed JettyContainerService$ApiProxyHandler@365878d2: java.lang.IncompatibleClassChangeError: Implementing class
  Oct 27, 2012 6:17:06 PM com.google.apphosting.utils.jetty.JettyLogger warn
  WARNING: Error starting handlers
  java.lang.IncompatibleClassChangeError: Implementing class
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at com.google.appengine.tools.development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:207)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at com.sun.jersey.api.core.ScanningResourceConfig.init(ScanningResourceConfig.java:79)
    at com.sun.jersey.api.core.PackagesResourceConfig.init(PackagesResourceConfig.java:104)
    at com.sun.jersey.api.core.PackagesResourceConfig.<init>(PackagesResourceConfig.java:78)
    at com.sun.jersey.api.core.PackagesResourceConfig.<init>(PackagesResourceConfig.java:89)
    at com.sun.jersey.spi.container.servlet.WebComponent.createResourceConfig(WebComponent.java:696)
    at com.sun.jersey.spi.container.servlet.WebComponent.createResourceConfig(WebComponent.java:674)
    at com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:206)
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:373)
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:556)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:440)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:263)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:224)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:205)
    at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:249)
    at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:157)
    at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:333)
    at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48)
    at com.google.appengine.tools.development.DevAppServerMain.<init>(DevAppServerMain.java:269)
    at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:245) 
```

我错过了什么 ？我应该为 gae 使用另一个 jax-rs 实现吗？感谢您的回答！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-27T19:47:32.163

好的，我发现：显然（查看我在问题中发布的堆栈跟踪），GAE 不允许 Jersey 使用其类加载器来扫描可用的剩余资源。因此，我详细阅读了[Jersey 文档以及有关部署的 Jersey 文档](http://jersey.java.net/nonav/documentation/latest/user-guide.html#d4e188)，我发现我可以手动将 Rest 资源指定给 Jersey。

这是 web.xml ：

```
<servlet-mapping>
<servlet-name>Jersey Web Application</servlet-name>
<url-pattern>/rest/*</url-pattern>
</servlet-mapping>
<servlet>
<servlet-name>Jersey Web Application</servlet-name>
<servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer
</servlet-class>
<init-param>
  <param-name>javax.ws.rs.Application</param-name>
  <param-value>sample.hello.bean.MyApplication</param-value>
</init-param>
</servlet> 
```

你可以注意到我现在有一个 Application 类：

```
 package sample.hello.bean;

    import java.util.HashSet;
    import java.util.Set;

    import javax.ws.rs.core.Application;

    import sample.hello.resources.HelloResource;

    public class MyApplication extends Application {
         public Set<Class<?>> getClasses() {
             Set<Class<?>> s = new HashSet<Class<?>>();
             s.add(HelloResource.class);
             return s;
         }
    } 
```

只需手动指定您的剩余资源，将它们添加到集合中。适用于 jersey-bundle-1.14.jar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:51:38.367

谢谢 这也帮助了我。但是[球衣文档](http://jersey.java.net/nonav/documentation/latest/user-guide.html#d4e188)也说我们可以使用包进行配置。难道我们没有任何其他选项可以在包中声明。因为对于每个新资源，我们都需要修改 MyApplication 类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-25T11:54:19.287

```
<!-- Add following dependency in pom.xml -->
<dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2.2</version>
</dependency> 
```

# php - Google adwords - 从关键字中检索点击，...？

> ID：13102980
> 
> 赞同：0
> 
> 时间：2012-10-27T18:32:36.007
> 
> 标签：php, google-api, google-ads-api

我正在创建自己的投标经理并偶然发现了一个问题。我能够从广告系列/广告组中检索统计信息（例如点击次数，...），但我似乎找不到与检索每个关键字的统计信息相关的任何内容而不生成报告？

我目前可以使用 AdGeoupCriterionService 检索关键字名称和匹配类型。但是，我看不到有可能检索每个关键字的统计信息。

谷歌搜索后，发现很多使用 statsSelector 的东西，在最新版本中，不再支持

关于如何检索这些统计数据的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:11:12.570

我可以在 AdgroupCriterionService [https://developers.google.com/adwords/api/docs/appendix/selectorfields#v201209-AdGroupCriterionService中看到它们](https://developers.google.com/adwords/api/docs/appendix/selectorfields#v201209-AdGroupCriterionService)

或者您可以下载关键字效果报告： [https ://developers.google.com/adwords/api/docs/appendix/reports#keywords](https://developers.google.com/adwords/api/docs/appendix/reports#keywords)

# mysql - MySQL 只插入第一行

> ID：13102985
> 
> 赞同：1
> 
> 时间：2012-10-27T18:33:09.870
> 
> 标签：mysql

我正在尝试在我的 MySQL 数据库中插入大量行。我有一个这样的查询，但其中有大约 700 个重复条目，但由于某种原因，该查询仅将第一行插入数据库。在这种情况下，它将是“374”、“4957”、“0”。

```
INSERT INTO table VALUES ('374','4957','0'),('374','3834','0'),('374','4958','0'),('374','5076','0'),('374','4921','0'),('374','3835','0'),('374','4922','0'),('374','3836','0'),('374','3837','0'),('374','4879','0'),('374','3838','0') 
```

我无法弄清楚我做错了什么。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T18:35:55.370

并不是说显而易见，但如果第一个字段“374”是您的主键字段，那么这就是问题所在。

否则，是否从数据库收到任何错误消息？那总是寻找错误的好地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T18:55:15.307

为了更好地理解为什么某些东西下次不工作，请使用如下代码：

```
$sql = "INSERT INTO table VALUES ('374','4957','0'),('374','3834','0')";
if (!mysqli_query($link, $sql)) {
    printf("Errormessage: %s\n", mysqli_error($link));
} 
```

那应该显示从 MySQL 返回的错误消息。

更多信息：[PHP 手册 - mysqli_error](http://www.php.net/manual/en/mysqli.error.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T18:36:05.177

尝试在值之前写列名。例如： INSERT INTO table (column1,column2,column3) VALUES ...

# yii - 如何构建像stackoverflow这样的自动完成类似标题检查？

> ID：13102988
> 
> 赞同：1
> 
> 时间：2012-10-27T18:33:58.687
> 
> 标签：yii, jquery-ui-autocomplete

使用[Yii PHP 框架](http://www.yiiframework.com/)。当您在 stackoverflow 上提出问题时，当您键入标题时，会出现一个名为“可能已经有您答案的问题”的列表。我想创建类似类型的字段，以便当用户输入企业名称时，我可以在我的系统中显示类似的企业名称。它不一定需要像 stackoverflow 的模型那样复杂。一个简单的字母搜索应该没问题。

请记住，与正常的自动完成不同，这种“自动完成”实际上不会填写相关字段，而是作为一种信息工具来通知用户可能已经存在的数据。

我在想[Yii CJuiAutoComplete 小部件](http://www.yiiframework.com/doc/api/1.1/CJuiAutoComplete/)是适合这项工作的工具，但我如何将自动完成与输入字段分离？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T23:18:35.500

CJuiAutoComplete 绝对是正确的工具，要在选择建议的值时禁用自动填充，您将不得不更改 jQueryUI 自动完成的行为，它的[`select`event](http://api.jqueryui.com/autocomplete/#event-select "http://api.jqueryui.com/autocomplete/#event-select")和它的[`focus`event](http://api.jqueryui.com/autocomplete/#event-focus "http://api.jqueryui.com/autocomplete/#event-focus")。

`select`当一个建议项被点击时触发该事件，`focus`当一个建议项被按键（向上、向下箭头键）导航到时触发该事件。

因此，要更改更新文本字段的默认行为，您可以通过从回调中返回 false 来取消这些事件：

```
$this->widget('zii.widgets.jui.CJuiAutoComplete', array(
    // other options
    // additional javascript options for the autocomplete plugin
    'options'=>array(
        'select'=>'js:function( event, ui ) {
            return false;
        }',
        'focus'=>'js:function(event, ui) {
            return false;
        }'
    ),
)); 
```

# c++ - C++11：使用这个不完整类型错误的解决方法？

> ID：13102996
> 
> 赞同：1
> 
> 时间：2012-10-27T18:34:41.900
> 
> 标签：c++, c++11

```
#include <iostream>
#include <array>
using namespace std;

constexpr int N = 10;
constexpr int f(int x) { return x*2; }

typedef array<int, N> A;

template<int... i> struct F { constexpr A f() { return A{{ f(i)... }}; } };

template<class X, class Y> struct C;
template<int... i, int... j>
struct C<F<i...>, F<j...>> : F<i..., (sizeof...(i)+j)...> {};

template<int n> struct S : C<S<n/2>, S<n-n/2>> {}; // <--- HERE
template<> struct S<1> : F<0> {};

constexpr auto X = S<N>::f();

int main()
{
        cout << X[3] << endl;
} 
```

我越来越：

```
test.cpp:15:24: error: invalid use of incomplete type ‘struct C<S<5>, S<5> >’ 
```

我怀疑这是因为 S 的定义将自己用作基类。（正确的？）

解决此问题的最佳方法是什么？

**更新：**

这是固定版本：

```
#include <iostream>
#include <array>
using namespace std;

constexpr int N = 10;
constexpr int f(int x) { return x*2; }

typedef array<int, N> A;

template<int... i> struct F { static constexpr A f() { return A{{ ::f(i)... }}; } };

template<class A, class B> struct C {};
template<int... i, int... j> struct C<F<i...>, F<j...>> : F<i..., (sizeof...(i)+j)...>
{
        using T = F<i..., (sizeof...(i)+j)...>;
};

template<int n> struct S : C<typename S<n/2>::T, typename S<n-n/2>::T> {};
template<> struct S<1> : F<0> { using T = F<0>; };

constexpr auto X = S<N>::f();

int main()
{
        cout << X[3] << endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T18:46:09.330

定义`C`而不是仅仅声明它。

```
template<class X, class Y> struct C {}; 
```

在您使用它的地方，部分特化不匹配并且主模板被实例化，这只是一个声明。

您可能想知道为什么不考虑特化：特化不考虑转换，而只考虑静态类型。这就是为什么它们与继承如此背道而驰的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T18:54:18.797

你可以只委托`S::f`而不是使用继承吗？

```
template<int n> struct S {
    constexpr A f() { return C<S<n/2>, S<n-n/2>>::f(); }
}; 
```