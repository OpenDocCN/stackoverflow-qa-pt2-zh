# StackOverflow 问答 14797000-14797999

# android - 在水平线性布局中对齐具有不同文本大小的按钮

> ID：14797003
> 
> 赞同：1
> 
> 时间：2013-02-10T11:00:07.823
> 
> 标签：android, android-layout, android-linearlayout, android-xml, android-button

我的问题是关于以下段落：

```
 <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="55dp"
            android:orientation="horizontal"
            android:layout_gravity="center">

            <Button
                android:id="@+id/BtSmall"
                android:layout_width="50dp"
                android:layout_height="50dp"
                android:onClick="ChSizeSmall"
                android:background="@drawable/grey_button_layout"
                android:text="a"
                android:textSize="20sp"
                android:shadowColor="#9A9A9A"
                android:shadowDx="0.6"
                android:shadowDy="0.6"
                android:shadowRadius="0.5"
                android:typeface="sans"
                android:layout_margin="2.5dp"
                android:layout_weight="1" />

            <Button
                android:id="@+id/BtMid"
                android:layout_width="50dp"
                android:layout_height="50dp"
                android:onClick="ChSizeMid"
                android:background="@drawable/grey_button_layout"
                android:text="a"
                android:textSize="25sp"
                android:shadowColor="#9A9A9A"
                android:shadowDx="0.6"
                android:shadowDy="0.6"
                android:shadowRadius="0.5"
                android:typeface="sans"
                android:layout_margin="2.5dp"
                android:layout_weight="1" />

            <Button
                android:id="@+id/BtBig"
                android:layout_width="50dp"
                android:layout_height="50dp"
                android:onClick="ChSizeBig"
                android:background="@drawable/grey_button_layout"
                android:text="a"
                android:textSize="30sp"
                android:shadowColor="#9A9A9A"
                android:shadowDx="0.6"
                android:shadowDy="0.6"
                android:shadowRadius="0.5"    
                android:typeface="sans"
                android:layout_margin="2.5dp"
                android:layout_weight="1" />
        </LinearLayout> 
```

产生以下 UI：

![例子](../Images/041581dc1ae15547c316324430b8af71.png)

我还有另外两行看起来完全对齐，这一行是个麻烦制造者。按钮内文本的大小不同，应该是不同的。其他行没有对这些尺寸进行试验，因此它们都可以。我知道问题在于尺寸的变化，但我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T11:07:35.903

尝试设置`android:gravity="center_vertical"`LinearLayout 或`android:layout_gravity="center_vertical"`每个按钮。

# java - 如何将数组变量的值分配给另一个数组变量

> ID：14797004
> 
> 赞同：1
> 
> 时间：2013-02-10T11:00:10.863
> 
> 标签：java, android

```
String[] msgoptions;
String[] finalmsgs3 = finalmsgs2[3].split("RR");
for(i = 1; i < finalmsgs3.length; i++)
{
    msgoptions[i] = finalmsgs3[i];
    Log.e(TAG, "---------------" + msgoptions[i]);
} 
```

如果您能解决我的代码问题，我需要您的帮助。实际上我正在尝试将数组变量的值分配给另一个数组变量。但我不能这样做，因为有一些错误。那么，有人能帮帮我吗..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T11:05:31.967

使用前需要对数组进行初始化`msgoptions`，例如：

```
String[] msgoptions = new String[SIZE]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T11:10:16.957

将您的代码重写为：

```
String[] finalmsgs3 = finalmsgs2[3].split("RR");     // switch first two lines
String[] msgoptions = new String[finalmsgs3.length]; // initilize the other array
for(i = 0; i < finalmsgs3.length; i++)               // Array index starts at 0
{
    msgoptions[i] = finalmsgs3[i];
    Log.e(TAG, "---------------" + msgoptions[i]);
} 
```

更好的解决方案是：

```
String[] finalmsgs3 = finalmsgs2[3].split("RR");
String[] msgoptions = Arrays.copyOf(finalmsgs3, finalmsgs3.length); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T11:03:01.377

试试看：

```
String[] msgoptions = = new String[SIZE];;
String[] finalmsgs3 = finalmsgs2[3].split("RR");
int j=0;
for(i = 0; i < finalmsgs3.length; i++)
{
    msgoptions[j] = finalmsgs3[i];
    j++;
    Log.e(TAG, "---------------" + msgoptions[i]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T11:12:42.857

首先，在 Java 上，您需要初始化数组。另请注意，它们基于 0 索引。

所以你应该把你的代码改成这样：

```
String[] finalmsgs3 = finalmsgs2[3].split("RR");
String[] msgoptions = new String[finalmsgs3.length];
for(int i = 0; i < finalmsgs3.length; i++)
{
    msgoptions[i] = finalmsgs3[i];
    Log.e(TAG, "---------------" + msgoptions[i]);
} 
```

但是要进行数组复制，您可以避免使用更“标准”的代码，例如[java.util.Arrays.copyOf(T[] original, int newLength)](http://developer.android.com/reference/java/util/Arrays.html)

# opengl - SFML2 渲染到纹理抗锯齿不起作用

> ID：14797005
> 
> 赞同：1
> 
> 时间：2013-02-10T11:00:10.490
> 
> 标签：opengl, textures, sfml, antialiasing

我正在尝试使用最新的 sfml 2 将抗锯齿的 opengl 场景渲染为纹理。但它不会抗锯齿。

我遇到了这篇文章[http://en.sfml-dev.org/forums/index.php?topic=3622.0](http://en.sfml-dev.org/forums/index.php?topic=3622.0)，它让我觉得它没有实现。

没有实施吗？

# drupal - 如何在 drupal 7 内容类型中添加幻灯片字段

> ID：14797008
> 
> 赞同：-2
> 
> 时间：2013-02-10T11:00:30.193
> 
> 标签：drupal, drupal-7

是否有任何简单的方法可以将幻灯片集成为 drupal 7 内容类型中的字段？我可以使用第三方模块，但我不想使用任何其他模块，我想通过添加或修改内容来添加字段。

如果是，请说如何。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T13:16:35.803

你有没有试过在谷歌上搜索？在 google 上搜索“drupal 幻灯片字段”时的第一个结果链接到： [http ://drupal.org/project/field_slideshow](http://drupal.org/project/field_slideshow)

# javascript - png图像的透明区域没有悬停动作html css

> ID：14797010
> 
> 赞同：1
> 
> 时间：2013-02-10T11:00:33.627
> 
> 标签：javascript, html, css, png, transparent

我的网页上有一个png图像，它的形状是菱形，所以图像的四个角是透明的......

每当我将鼠标悬停在图像上时，我都会让它向左和向上移动-10px

```
#one{
    position:relative;
    top:10px;
    left:-234px;
    float:left;
    -webkit-transition: all .2s ease-out;
}

#one:hover{
    top:0px;
    left:-244px;
    -webkit-filter:opacity(0);
} 
```

我要做的就是不要通过将鼠标悬停在透明区域上来移动图像...

有可能...我想使用css或javascript...我不知道jquery所以如果你告诉我jquery ans请告诉我如何在我的html页面中链接它...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:02:30.343

我建议在旋转 45 度的图像前面添加一个附加元素，然后将该元素用于悬停动作。

这将使您仅在将鼠标悬停在菱形上时才能移动图像。

请注意，如果没有额外的逻辑，这只适用于支持 CSS3 转换的现代浏览器（Webkit、Mozilla 和 IE10）。

```
#one-wrapper{
    position: absolute;
    top: 50px;
    left: 50px;
    height: 100px;
    width: 100px;
}

#one{
    position: absolute;
    top: 0;
    left: 0;
    height: 100px;
    width: 100px;
    z-index: 1;
    -webkit-transition: all 0.2s ease-in-out;
    -moz-transition: all 0.2s ease-in-out;
    transition: all 0.2s ease-in-out;
}

#one-action{
    position: absolute;
    top: 0;
    left: 0;
    height: 70px;
    width: 70px;
    -webkit-transform: rotate(45deg);
    -moz-transform: rotate(45deg);
    transform: rotate(45deg);
    -webkit-transform-origin: 50px 50px;
    -moz-transform-origin: 50px 50px;
    transform-origin: 50px 50px;
    z-index: 2;
}

#one-action:hover,
#one-action:hover + #one{
    top: -10px;
    left: -10px;
}
```

```
<div id="one-wrapper">
  <span id="one-action"></span>
  <img id="one" src="image-url.png" alt="" />
</div>
```

根据需要更新顶部/左侧位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T15:28:07.950

您最好的选择是[HTML Image maps](https://developer.mozilla.org/en-US/docs/HTML/Element/map)（它是为此目的而创建的），如果您出于某种原因真的不喜欢它，您也可以使用[SVG](https://developer.mozilla.org/en-US/docs/SVG)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T11:02:33.530

将其添加为 div 的背景并将悬停伪类应用于该 div。

**HTML：**

```
<div id="one"></div> 
```

**CSS：**

```
#one {
  position:relative;
  top:10px; 
  left:-234px; 
  float:left;
  -webkit-transition: all 0.2s ease-out;
  background:url(__path_of_image__);
}
#one:hover {
  top:0px; 
  left:-244px; 
  -webkit-filter:opacity(0);
} 
```

# sql-server - SSRS 报告中的“无法预览报告”

> ID：14797014
> 
> 赞同：1
> 
> 时间：2013-02-10T11:01:43.283
> 
> 标签：sql-server, reporting-services, report, preview

我正在使用 AX 查询创建 SSRS 报告，但是在单击设计节点中的预览按钮时，我遇到了一个问题：

> 无法预览报表，安装微软Sql server的商业智能开发工作室功能

但我们已经在服务器端安装了这些工具。如果有人知道解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:15:23.920

[Business Intelligence Development Studio (BIDS)](http://msdn.microsoft.com/en-us/library/ms173745%28v=sql.105%29.aspx)不是服务器端安装，它需要安装在开发人员的工作站上。

在开发工作站上安装 BIDS 以与 Visual Studio 集成，或查看[Report Builder 3.0](http://msdn.microsoft.com/en-us/library/ms173745%28v=sql.105%29.aspx)。

# eclipse - 无法访问 Eclipse Market Place

> ID：14797016
> 
> 赞同：0
> 
> 时间：2013-02-10T11:01:54.940
> 
> 标签：eclipse, spring

我有 Eclipse（弹簧工具套件）。我无法访问市场，它会产生异常：

```
Unexpected exception
java.lang.reflect.InvocationTargetException 
```

解决办法是什么 ？

# .net - CodeDom 有官方替代品吗？

> ID：14797018
> 
> 赞同：12
> 
> 时间：2013-02-10T11:02:09.177
> 
> 标签：.net, code-generation, codedom

我正在研究与语言无关（至少在一定范围内）源代码生成的[`System.CodeDom`命名空间](http://msdn.microsoft.com/en-us/library/system.codedom.aspx)`CodeDom`，并且我发现了一些不鼓励使用.

我认为[这篇早期博](http://blogs.msdn.com/b/bclteam/archive/2005/03/16/396915.aspx)文中描述的一些遗漏现在已经得到修复，而且[`CodeDom`似乎没有提供创建`switch`语句](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/8a51854a-9060-454f-919a-fa0757a95af0/)的方法这一事实仍然允许 - 性能降低？- 解决方法，而不用丑化生成类型的公共接口。这同样适用于[自动 C# 属性](https://stackoverflow.com/questions/2122837/generate-c-sharp-automatic-properties-with-codedom)和[集合初始值设定项](https://stackoverflow.com/questions/3048691/codedom-and-collection-initializers)。

但是，其他遗漏无法真正解决，例如[无法创建终结器](https://stackoverflow.com/questions/2221385/finalizer-with-codedom)、[无法声明扩展方法](https://stackoverflow.com/questions/6011269/generate-extension-methods-using-system-codedom)或[缺乏对泛型引用类型约束的直接支持](https://stackoverflow.com/questions/411057/codedom-generic-type-constraint?rq=1)。

请注意，使用[`CodeSnippetTypeMember`](http://msdn.microsoft.com/en-us/library/system.codedom.codesnippettypemember.aspx)或通过任何其他方式注入文字源代码片段的建议解决方案并不令人满意，因为它们不是语言独立的 - 从而消除了使用`CodeDom`而不是`String.Format`文字代码片段的全部意义。

[最后，在这个 SO 问题](https://stackoverflow.com/questions/2084144/which-net-programming-languages-have-a-codedom-provider/2084187)中甚至建议“CodeDom 是失败的，而表达式树（或者更确切地说是“语句”树）是前进的方向”——尽管没有任何解释如何从[表达式树](http://msdn.microsoft.com/en-us/library/system.linq.expressions.expression.aspx)中实际获取任何源代码（除了[不能用表达式树声明类](https://stackoverflow.com/questions/2366921/reflection-emit-vs-codedom)的限制之外。

**CodeDom 是否仍然是生成源代码的首选方法，或者当前的 BCL 是否提供了一个我没有想到的名称的模糊替换？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T11:13:14.107

我认为 CodeDom 仍然是**当今 BCL 中最好的解决方案，但是**：Roslyn 项目已经走得很远，并且已经推出了几个 CTP。目标是将编译器作为服务提供，它将通过简单的 API 实现代码生成和代码检查场景。

看看它，如果您可以为您的项目使用预发布位：[Roslyn CTP](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx)。这是一个相关的（虽然已经过时，但仍然有一些很好的信息）StackOverflow 问题：[Microsoft Roslyn vs. CodeDom](https://stackoverflow.com/questions/7852926/microsoft-roslyn-vs-codedom)。最后，一篇关于使用 Roslyn 进行代码生成的文章：[Code Generation in .NET with the Roslyn CTP](http://www.softwire.com/blog/2012/06/28/code-generation-in-net-with-the-roslyn-ctp-part-1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T11:54:26.267

不，CodeDom 可用于生成要*执行*的代码。它生成文本的能力只是一个偶然的副产品，因为编译器需要文本而需要它。如果你真的关心文本，那么有很多理由不喜欢 CodeDom，而且框架中没有任何东西可以帮助你。

其他解决方案同样侧重于生成可执行代码。Reflection.Emit 生成 IL（.NET 中的通用语言），但没有提供简单的反编译方法，尽管任何体面的反编译器（ILSpy、Reflector 等）都可以提供帮助。Linq.Expressions 是纯可执行代码，通常对生成完整程序没有用处。Roslyn 非常倾向于已经拥有文本。

最好的前进方式可能是弃用您对使用特定语言的文本的要求。所有 .NET 编译器都具有相同类型的输出，它们都编译为 IL。这使得将您的选择限制为*一种*语言成为一种可行的方法。从您的问题中不清楚这是否是一个合理的限制。这似乎是一个常见的选择，我想不出一个曾经试图解决 CodeDom 限制的项目。codeplex.com 上提供的以 CodeDom 为目标的项目类型试图尽量减少使用 CodeDom 的代码所需的冗长带来的痛苦。

# r - 优化循环

> ID：14797022
> 
> 赞同：1
> 
> 时间：2013-02-10T11:02:34.967
> 
> 标签：r, machine-learning

我正在实施《统计学习的要素：数据挖掘、推理和预测》（Hashtle、Tibshirani、Friedman）一书中给出的示例。

我的目标是从两个二元正态分布中生成 10+10 个均值，然后使用前十个均值生成标记为“绿色”的点，其他十个均值生成“红色”点。必须从其生成点的二元高斯的平均值每次都必须随机选取。我对 R 不太熟悉，所以我使用了 for 循环，随着 n 变大，使用它会花费大量时间。这是我的代码：

```
Sigma = diag(2)
greenMeans= mvrnorm(n=10, c(1,0), Sigma)
redMeans= mvrnorm(n=10, c(0,1), Sigma)

n=1000000
green<- array(dim=c(n,2))
red<- array(dim=c(n,2))

for (i in 1:n)
        {
            newGreen<- mvrnorm(n=1,greenMeans[sample(c(1:10),1,replace=TRUE),], Sigma/5)
            newRed<- mvrnorm(n=1,redMeans[sample(c(1:10),1,replace=TRUE),], Sigma/5)
            green[i,1] <- newGreen[1]
            green[i,2] <- newGreen[2]
            red[i,1] <- newRed[1]
            red[i,2] <- newRed[2]
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T11:27:17.963

您可以完全跳过 for 循环并使用`replicate`，但不确定它有多快：

```
do_stuff = function() {
   newGreen<- mvrnorm(n=1,greenMeans[sample(c(1:10),1,replace=TRUE),], Sigma/5)
   newRed<- mvrnorm(n=1,redMeans[sample(c(1:10),1,replace=TRUE),], Sigma/5)         
   return(list(newGreen, newRed))
 }
replicate(10000, do_stuff) 
```

# r - R 双循环

> ID：14797027
> 
> 赞同：3
> 
> 时间：2013-02-10T11:03:22.500
> 
> 标签：r, loops, double

我有一个关于在 R 中做双循环的明显问题，但在这个网站上找不到答案。我正在使用以下代码：

```
mu <- c(0, .2, .5, .8)
sco <- matrix(nrow = 50, ncol = 4*10)

for (mu in mus) {
  for (i in 1:10) {
    sco[ ,i] <- mu + rnorm(n = 50, mean = 0, sd = 1)
  }
} 
```

我现在得到 10 列 mu + 随机数，但我想要得到的是 40 列，其中前 10 列表示 mu 是 0 + 随机数，第 11 到 20 列表示 0.2 + 随机数等。

我必须如何修改我的代码才能获得上述结果？

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T11:38:44.320

难道不是所有列中的方差都相同吗？为什么不用 50*40 标准正态随机数创建矩阵，然后将 0 添加到前十列，将 0.2 添加到接下来的十列等等？！

编辑：

一个示例如下所示：

```
result <- matrix(rnorm(50*40,mean=0,sd=1),ncol=40)
mu <- c(rep(0,10),rep(10,10),rep(20,10),rep(30,10))

result <- t(t(result) + mu) 
```

我忘记了如何按列添加向量，因此使用 2 转置很难解决……我选择了不同的值`mu`以使结果更清晰。

循环解决方案看起来像这样（虽然我不会使用这段代码，但你要求它......）

```
mus <- c(0, 10, 20, 30)
sco <- matrix(nrow = 50, ncol = 4*10)

for (mu in 1:4) {
  for (i in 1:10) {
    sco[ ,i+(mu-1)*10] <- mus[mu] + rnorm(n = 50, mean = 0, sd = 1)
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T11:39:21.373

我会做类似的事情：

```
return_numbers = function(mu_value) {
     matrix(mu_value + rnorm(50 * 10), 50, 10)
  }
dat = do.call("cbind", lapply(mu, return_numbers)) 
```

并完全跳过 for 循环。我通过一次生成前十行的所有数字来跳过第一个循环，然后将向量调整为矩阵的大小。`lapply`我通过使用循环`mu`值来跳过第二个循环。最后，我习惯`cbind`将它们放入一个数据结构中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T22:40:33.467

`rnorm`采用向量作为`mean`参数，可用于直接计算矩阵值：

按列：

```
matrix(rnorm(n=50*10*length(mu), mean=rep(mu, each=50*10)), nrow=50) 
```

行大小：

```
matrix(rnorm(n=50*10*length(mu), mean=rep(mu, each=10)), nrow=50, byrow=TRUE) 
```

# java - 枚举的 CloneNotSupportedException

> ID：14797028
> 
> 赞同：1
> 
> 时间：2013-02-10T11:03:24.170
> 
> 标签：java, android, enums, clone

ACRA 报告的我的 Android 应用程序出现了一个奇怪的错误。似乎在枚举中调用了 clone()。这是堆栈跟踪：

```
 java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
            at dalvik.system.NativeStart.main(Native Method)
    Caused by: java.lang.reflect.InvocationTargetException
            at java.lang.reflect.Method.invokeNative(Native Method)
            at java.lang.reflect.Method.invoke(Method.java:511)
            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
            ... 2 more
    Caused by: java.lang.CloneNotSupportedException: Class doesn't implement Cloneable
            at java.lang.Object.clone(Object.java:155)
            at org.digitalcure.ccnf.app.io.data.Glyx.org.digitalcure.ccnf.app.io.data.Glyx[] values()(SourceFile:17)
            at org.digitalcure.ccnf.app.io.data.Glyx.org.digitalcure.ccnf.app.io.data.Glyx getForDatabaseValue(int)(SourceFile:140)
    ... 
```

这是枚举的代码：

```
package org.digitalcure.ccnf.app.io.data;

import org.digitalcure.ccnf.app.R;
import android.content.Context;
import android.content.res.Resources;

public enum Glyx {
    HIGH(-1),

    MEDIUM(0),

    LOW(1);

    private final int value;

    private Glyx(final int value) {
        this.value = value;
    }

    public static Glyx getForNormedValue(final int value) {
        final Glyx[] array = Glyx.values();
        for (final Glyx candidate : array) {
            if (candidate.value == value) {
                return candidate;
            }
        }

        return null;
    }

    public static Glyx getForDatabaseValue(final int value) {
        return getForNormedValue(value + HIGH.value);
    }

    // more code follows...
} 
```

我删除了文档和其他无趣的代码，所以第 17 行引用了“public enum Glyx {”，第 140 行引用了“return getForNormedValue(value + HIGH.value);”。

我已经检查了我的 ProGuard 配置。它包含以下枚举规则：

```
-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
} 
```

我对枚举中的“clone()”调用感到困惑，我无法解释这里发生了什么。我能做些什么来避免这个异常？这个问题有什么解释吗？任何帮助表示赞赏。

环境：Android 4.0.4，中兴Grand X In

# android - 列表视图不工作

> ID：14797036
> 
> 赞同：0
> 
> 时间：2013-02-10T11:05:00.110
> 
> 标签：android, android-listview

我制作了一个简单的列表视图，现在希望按钮与一个新活动相对应，我使用了一个案例语句来实现这一点，这是我的代码。

```
 package com.example.lookingatics;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class OtherActivity extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.other_activity);

        ListView listView = (ListView) findViewById(R.id.mylist);
        final String[] values = new String[] { "Science", "Maths", "English", "History", "Geography",
                "R.E", "I.C.T", "Arabic", "Art", "MainActivity" };

        // Define a new Adapter
        // First parameter - Context
        // Second parameter - Layout for the row
        // Third parameter - ID of the TextView to which the data is written
        // Forth - the Array of data

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
          android.R.layout.simple_selectable_list_item, android.R.id.text1, values);

        // Assign adapter to ListView
        listView.setAdapter(adapter);

        listView.setOnItemClickListener(new OnItemClickListener() {
              public void onItemClick(AdapterView<?> parent, View view,
                  int position, long id) {
                  final TextView mTextView = (TextView)view;
                  switch (position) {
                    case 0:
                     Intent newActivity0 = new Intent("com.example.lookingatics.OtherActivity");     
                     startActivity(newActivity0);
                    break;
                    case 1:
                     Intent newActivity1 = new Intent("com.example.lookingatics.MainActivity");     
                     startActivity(newActivity1);
                    break;
                    case 2:
                     Intent newActivity2 = new Intent("com.example.lookingatics.OtherActivity");     
                     startActivity(newActivity2);
                    break;
                    case 3:
                     Intent newActivity3 = new Intent("com.example.lookingatics.MainActivity");     
                     startActivity(newActivity3);
                    break;
                    default:
                      // Nothing do!
                  }

              }
            });

    }

} 
```

这是我的清单

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.lookingatics"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="2"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.lookingatics.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.lookingatics.OtherActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.OTHER" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

有谁知道我的问题是什么，为什么我一直让我的应用程序说没有响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:22:53.943

修改清单文件。

## 您的清单代码

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.lookingatics.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.lookingatics.OtherActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.OTHER" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application> 
```

对此文件进行更改..尝试这样

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.lookingatics.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.lookingatics.OtherActivity"
        android:label="Other Activity" >

    </activity>
</application> 
```

* * *

```
Intent intent = new Intent (OtherActivity.this, nameOfyourActivityYouWantToStart.class);
startActivity(intent); 
```

# java - 从人掌图像中读取掌纹像素

> ID：14797038
> 
> 赞同：0
> 
> 时间：2013-02-10T11:05:15.383
> 
> 标签：java, image-processing

我正在开发一种软​​件，该软件将人类手掌的图像作为输入，然后读取该手掌的线条以进行预测。我们成功地读取了这张图片的像素。但是，我们仍然离准确读取线的像素还差得很远。

如果有人从事过这样的项目，请提供帮助。

我为此尝试过谷歌搜索，但结果并不令人满意。我想获得一些输入，例如，执行图像读取的正确方法应该是什么？Java中是否有可用的API？

图片：

![图 1](../Images/dfcdc56eb79d392adbcd02ecf88d7e6f.png) ![图 2](../Images/069580bba17a476f7fffe32e56a8ec99.png) ![图 3](../Images/1227a6dd77cf4e8e226561674b1b81e5.png) ![图 4](../Images/9f6b4787305049b384d4b48393993034.png) ![图 5](../Images/9706476d9f876b1db38d32d39f3544ee.png) ![图 6](../Images/f4d8bcaa9d5e5c1a7f282ea733853569.png) ![图 7](../Images/f128e8d8ffc43a1d186c529f553633c4.png) ![图 8](../Images/e79515a35d0b29c6d794721b78d0cfb0.png) ![图 9](../Images/d6f5c651204e90fc4ff120ff8f26ed09.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:48:54.637

感谢大家的回应。您的回复在很大程度上帮助了我。同时，我一直在阅读图像阈值。我正在遵循的过程有点像这样：

1）我确信我的软件将作为输入获得的图像将仅属于上述类型。也就是说，图像将是灰度的，并且是手的，没有别的。2) 我正在选择一个阈值，我将根据该阈值检查此手部图像的像素。3）如果这个像素的值小于我的阈值，我会将该像素转换为黑色。4）否则我会把它变成白色的。

这样我就有一个只包含黑白像素的图像。我想在此之后我可以继续寻找掌纹。如果有人有任何进一步的步骤，请建议我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T11:42:21.843

有两种可能的选择可以帮助您开始：

1.  Java2D

2.  JAI - Java 高级成像

# javascript - jquery找到最近的元素点击

> ID：14797039
> 
> 赞同：0
> 
> 时间：2013-02-10T11:05:20.547
> 
> 标签：javascript, jquery, dom

我试图在我的页面上单击链接时触发显示/隐藏效果，我的页面设置方式是我有以下 HTML，

```
<div class="results clearfix">
        <div class="product">
            <div class="media">

            </div>
            <div class="information">
                <div class="name">A Product</div>
                <a href="">€50</a>
            </div>
        </div>
        <div class="product">
            <div class="media">

            </div>
            <div class="information">
                <div class="name">A Product</div>
                <a href="">€50</a>
            </div>
        </div>
        <div class="product">
            <div class="media">

            </div>
            <div class="information">
                <div class="name">A Product</div>
                <a href="">€50</a>
            </div>
        </div>
        <div class="product">
            <div class="media">

            </div>
            <div class="information">
                <div class="name">A Product</div>
                <a href="">€50</a>
            </div>
        </div>
        <div class="moreWrapper">
            <div class="more">
                <div class="arrow"></div>
                <div class="media">
                    <img src="assets/css/img/more-image.jpg" />
                    <a class="view" href="">View item</a>
                </div>
                <div class="details">
                    <a class="cart" href="">€50</a>
                        <a class="bookmark" href=""></a>
                        <div class="clearfix"></div>
                        <div class="breakdown clearfix">
                            <h1>ÖRSJÖ BELYSNING PJ DESK LAMP</h1>
                            <small>Item Number : UL-1027</small>
                            <dl>
                                <dt>Manufacturer</dt>
                                <dd><img src="assets/img/alessi-logo.jpg"/></dd>
                            </dl>
                            <dl>
                                <dt>Created By</dt>
                                <dd>
                                    <img src="assets/img/created.jpg" alt="" />
                                    <strong>3d_alan</strong>
                                    <span>on 27th Jan 2013</span>
                                </dd>
                            </dl>
                            <dl>
                                <dt>Method of creation</dt>
                                <dd>
                                    <i class="creation icon-camera"></i>
                                    <i class="creation icon-hands"></i>
                                    <i class="creation icon-pencil"></i>
                                    <i class="creation icon-fullscreen"></i>
                                    <i class="creation icon-pencil"></i>
                                    <i class="creation icon-photo"></i>
                                </dd>
                            </dl>
                            <dl>
                                <dt>Year of manufactuer</dt>
                                <dd>1990</dd>
                            </dl>
                        <p><em>Available Formats</em> <a href="">Require a different format?</a></p>
                        <ul class="formats">
                            <li>3DSMax</li>
                            <li>VRay</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="product">
            <div class="media">

            </div>
            <div class="information">
                <div class="name">A Product</div>
                <a href="">€50</a>
            </div>
        </div>
        <div class="product">
            <div class="media">

            </div>
            <div class="information">
                <div class="name">A Product</div>
                <a href="">€50</a>
            </div>
        </div>
        <div class="product">
            <div class="media">

            </div>
            <div class="information">
                <div class="name">A Product</div>
                <a href="">€50</a>
            </div>
        </div>
        <div class="product">
            <div class="media">

            </div>
            <div class="information">
                <div class="name">A Product</div>
                <a href="">€50</a>
            </div>
        </div>
        <div class="moreWrapper">
            <div class="more"></div>
        </div>
    </div> 
```

在每 4 个`.product`元素之后有一个`.moreWrapper`，然后是另外 4 个`.product`元素，然后是另一个`.moreWrapper`。我正在努力实现的是最接近`.moreWrapper`要打开的单击元素，目前全部`.moreWrapper`打开。

这是我当前的javascript，

```
$(".product").click(function(e){
    $(this).find("a").addClass("set");
    var x = $(this).position().left;
    $(this).parent().find('.moreWrapper').css("display", "none").animate({
        "height" : "0px",
    }, 1000);
    $(this).parent().find('.moreWrapper').css("display", "block").animate({
        "height" : "500px",
    }, 1000);
    $(".arrow").css("left", x+"px");

    return false
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T11:20:57.820

尝试这个：

```
$(".product").click(function(e){
    $(this).find("a").addClass("set");
    var x = $(this).position().left;
    $(this).parent().find('.moreWrapper').css("display", "none").animate({
        "height" : "0px",
    }, 1000);
    $(this).parent().find('.moreWrapper').next().css("display", "block").animate({
        "height" : "500px",
    }, 1000);
    $(".arrow").css("left", x+"px");
return false;
}); 
```

我想这就是你所需要的，只是为了隐藏当前`.moreWrapper`，并`.moreWrapper`在它之后显示下一个。

# php - 学说 ClassLoader.php “无法打开流：没有这样的文件或目录”

> ID：14797044
> 
> 赞同：0
> 
> 时间：2013-02-10T11:05:48.910
> 
> 标签：php, doctrine

```
<?php

    use vendor\doctrine\common\lib\Doctrine\Common\ClassLoader,
    vendor\doctrine\orm\lib\Doctrine\ORM\EntityManager;

    require 'vendor/doctrine/common/lib/Doctrine/Common/ClassLoader.php' or die();

    $loader = new ClassLoader("Doctrine");
    $loader->register();

    $dbParams = array(
        'driver' => 'pdo_mysql',
        'user' => 'root',
        'password' => 'password',
        'dbname' => 'test_doctrine'
    );
    $path = 'entities/';
    $config = Setup::createAnnotationMetadataConfiguration($path, true);
    $entityManager = EntityManager::create($dbParams, $config);

    $user=new User();
    $post=new Post($user);

    $post->addComment("First comment");
    $post->addComment("Seconde comment");

    $entityManager->persist($user);
    $entityManager->persist($post);
    $entityManager->flush();

?> 
```

我收到此错误：

> 警告：require(1)：打开流失败：第 8 行的 /var/www/tests/index.php 中没有这样的文件或目录
> 
> 致命错误：require()：在 /var/www/tests/ 中打开所需的 '1' (include_path='.:/usr/share/php:/usr/local/lib/smarty-3.1.13/libs') 失败第 8 行的 index.php

有人可以帮我理解这里有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T00:26:09.570

一些奇怪的......需要'1'......

无论如何检查1）和2）或需要更多信息。

1) 在第 8 行之前，[get_included_files](http://php.net/manual/en/function.get-included-files.php)显示包含文件的列表。检查 ClassLoader.php 是否已加载。

2) new ClassLoader("Doctrine") 将在您的 PHP include_path 中找到 Doctrine* 命名空间。这包括 .(current path) 在你的情况下，检查你的 Doctrine 库在这个（子目录也可以）。

# javascript - 用于拖放不同大小图像的容器

> ID：14797045
> 
> 赞同：0
> 
> 时间：2013-02-10T11:05:59.707
> 
> 标签：javascript, jquery, html, drag-and-drop

我想为不同大小的图像制作一个容器，大小将是数字的倍数（例如：25x25px 50x50px 75x50px 等）我需要想法如何为这些可拖动图像制作一个可放置的容器。我不想让图像彼此叠放，或者从容器中伸出来。（我不知道我是否使用了好词，所以如果您不明白，请查看：http: [//i.stack.imgur.com/dqcMW.png](http://i.stack.imgur.com/dqcMW.png)）如果有人有任何想法或演示，那就太好了. :)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T12:35:58.260

didnt completely understand your question but.DO you want the user to drag and drop images to the containers for image upload facility then you can create a container of one size and after the upload of that image is complete you could some other container for other image size

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T12:36:06.573

有趣的任务，这只是你如何在页面上保存信息的一些灵感，你必须自己找出这是否是解决这个问题的合适方法。

您可以通过迭代图像来动态创建隐藏的 HTML 结构，并为每个图像创建一个包含适合您任务所需信息的 dom 元素。

例如，您所有的图像都是可拖动的并且具有 class `.images`，并且唯一的 id`#img1...`和您的隐藏结构是`<ul id="imgholder" style="display:none;>`您的 dom 中的某个地方。

为每个图像附加隐藏的 li 以及您需要的信息，我猜是宽度、高度和一个 id

```
$('.images').each(function() {
var width = $('this').attr('width');
var height = $('this').attr('height')
var id = $('this').attr('id');
$('#imgholder').append('<li class="imgdata" id="'+id+'" data-id="'+width+'" >'+height+'</li>'); 
```

在此之后，您可以使用该信息来创建您的可放置元素

```
 var $item = $(this);
    var id = $item.attr('id');
    var width = $item.data('id'); 
    var height = $item.text();
   /*  append some div's to your desired container e.G .dropcontainer*/
    $('.dropcontainer').append('<div class="droppable" style="position:relative;foat:left;width:'+width+'px;height'+height+'px;" id="drop_'+id+'"></div>"; 
```

现在每个图像都有一个保管箱，如何让它看起来优雅取决于您，因为您可以为每个图像找到匹配的容器`#img1 -> #drop_img1`，通过启动拖动事件，您可以向与图像匹配的保管箱添加一个类，添加一个闪烁的边框或......，为了让这个看起来更好，你可以让 div 没有高度，直到开始可拖动事件并将它们添加到匹配的容器中，我想这看起来很酷，因为它向左浮动..

玩得开心

# python - 空while循环的Python语法

> ID：14797046
> 
> 赞同：42
> 
> 时间：2013-02-10T11:06:07.757
> 
> 标签：python, while-loop

我写了这个：

```
 while file.readline().startswith("#"):
        continue 
```

但我怀疑这`continue`是不必要的？我想要实现的正确语法是什么？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-02-10T11:07:23.600

```
while file.readline().startswith("#"):
    pass 
```

这使用 pass 语句：

> pass 语句什么都不做。当语法上需要语句但程序不需要操作时，可以使用它。

[http://www.network-theory.co.uk/docs/pytut/passStatements.html](http://www.network-theory.co.uk/docs/pytut/passStatements.html)

# c# - 依赖注入 CustomMembershipProvider 的可能性差吗？

> ID：14797047
> 
> 赞同：0
> 
> 时间：2013-02-10T11:06:06.943
> 
> 标签：c#, asp.net-mvc, dependency-injection, asp.net-membership

试图将存储库注入我的`CustomMembershipProvider`.

首先，我**不**喜欢这种**`Singleton`模式**或其他一些*全球公共*解决方案。

这是一个示例`CustomMemberhipProvider`

```
public class CustomMembershipProvider : BaseMembershipProvider
{
    private readonly UserRepository _userRepository;

    public override void Initialize(string name, System.Collections.Specialized.NameValueCollection config)
    {
        // Magically pull the userrepository in here?
        base.Initialize(name, config);
    }
} 
```

到目前为止，我发现的唯一可行的示例是添加 a ，这对于某些类`Factory`来说是另一种选择。`global public`

*   那里没有任何东西可以让我正确地将对象 ( `UserRepository`) 注入到`CustomMembershipProvider`?
*   如果没有，有没有好的选择？我没有与 CustomMembershipProvider 结婚，所以如果有其他东西可以让我`[Authorize]`在控制器中使用属性，那么我完全赞成。

提前非常感谢！

# node.js - 如何在expressjs中查看当前url

> ID：14797056
> 
> 赞同：2
> 
> 时间：2013-02-10T11:07:34.517
> 
> 标签：node.js, express

我想根据用户在 expressjs 应用程序中查看的当前 url 更改某些菜单项的类。我在 expressjs 中使用 ejs 模板系统如何在链接中传递当前 url 和管理当前视图类？我应该在每个 res.render 中传递当前 url 值吗？或者是否有一些可以使用的变量传入视图？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T17:20:29.767

我们实际上可以使用

```
//pass user data
app.use(function(req, res, next) {
res.locals.variable = req.variable;
next();
}); 
```

并访问视图文件中的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T11:12:24.477

您可以在 res.render 中传递实际类或将哪个类用作模板变量的指示符，而不是传递 url 并在模板中进行实际解析。

# c# - 在 C# 中硬编码相对路径

> ID：14797063
> 
> 赞同：0
> 
> 时间：2013-02-10T11:08:33.870
> 
> 标签：c#

我在我的项目文件夹之外有一个 XML 文件，我想从我的代码中访问它，以便在我将路径相对于项目目录的任何机器上执行代码。

举个例子，我的当前目录在文件夹 A 中，而我要访问的文件在文件夹 B 中 A 旁边。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T11:15:30.387

如果 XML 文件始终在您的应用程序文件夹中，您可以使用。

[环境.当前目录](http://msdn.microsoft.com/en-us/library/system.environment.currentdirectory.aspx)

工作路径不一定是可执行文件所在的位置。为确保您可以使用取自[MSDN](http://msdn.microsoft.com/en-us/library/aa457089.aspx)的以下代码。

```
string path;
path = System.IO.Path.GetDirectoryName( 
      System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase ); 
```

否则，如果它是 Microsoft 特殊文件夹的一部分，例如 .eg MyDocuments，您可以使用。

[Environment.SpecialFolder.MyDocuments](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)

你会像这样使用它。

```
Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments),
                                           "myfile.xml") 
```

输出将是当前用户“我的文档”文件夹中 myfile.xml 的路径。就我而言，它会给我`C:\Users\eandersson\Documents\myfile.xml`.

[Path.Combine](http://msdn.microsoft.com/en-us/library/fyy7a5kt%28v=vs.71%29.aspx)在这里非常有用，因为它允许我们将多个磁盘路径合并为一个。

**编辑**：*评论要求的其他信息。*

我认为最好的方法是使用[Directory.GetParent](http://msdn.microsoft.com/en-us/library/system.io.directory.getparent.aspx)。

```
Directory.GetParent(Environment.CurrentDirectory).FullName 
```

并做这样的事情。

```
Path.Combine(Directory.GetParent(Environment.CurrentDirectory).FullName, "PathB", "myfile.xml") 
```

这将在与您的项目文件夹相同的位置查找 PathB。

```
C:\MyProjects\PathA\MyExecutable.exe
C:\MyProjects\PathB\myfile.xml 
```

假设您`MyExecutable.exe`从该位置运行。上面的代码应该自动返回 PathB 内的第二个位置和文件`myfile.xml`。

# java - 如何返回主菜单？

> ID：14797066
> 
> 赞同：0
> 
> 时间：2013-02-10T11:08:42.327
> 
> 标签：java, swing

我在如何返回主菜单时遇到问题。存入银行后，我想再次向用户显示主菜单，但我不知道这里有什么问题。为了查明我的确切问题.. 存入银行后，当我输入“Y”并单击“确定”按钮时，主菜单应该再次出现，但它没有出现。

这是我的程序。

基类：

```
import java.io.*;
import java.util.*;
public class BankAccount    
{

    public BankAccount(double b, String n) 
    {
       double balance = b; 
       String name = n;
    }

    public void deposit(double d)
    {
        balance += d;
    }

    public void withdraw(double w)
    {
        balance -= w;
    }

    public String nickname()
    {
        System.out.print("Enter a new name: ");
        Scanner kbIn = new Scanner(System.in);
        String n = kbIn.nextLine();
        return n;
    }

    double balance;
    String name;

} 
```

测试类：

```
import java.awt.Component;
import java.io.*;
import javax.swing.JOptionPane;
import java.util.*;

public class Tester {
    private static String name;
    private static double bal;
    private static double withdraw;

    public static void main(String args[]) {
        Scanner kbInLine = new Scanner(System. in );
        Scanner kbIn = new Scanner(System. in );

        name = JOptionPane.showInputDialog(null, "Enter your name: ");

        String num;
        int pin;
        num = JOptionPane.showInputDialog("Enter your pin number: ");
        pin = Integer.parseInt(num);

        JOptionPane.showMessageDialog(null, "Login Success\n" + "Name : " + name + "\n" + "Pin Number : " + pin);

        BankAccount myAccount = new BankAccount(withdraw, name);

        String[] buttons = {
            "Deposit", "Withdraw", "Print Balance", "Exit"
        };
        int rc = JOptionPane.showOptionDialog(null,
            "What would you like to do?",
            "Confirmation",
        JOptionPane.INFORMATION_MESSAGE,
        0,
        null,
        buttons,
        buttons[2]);

        if (rc == 0) {
            int deposit;
            String dep = JOptionPane.showInputDialog("How much would you like to deposit?\n\t$ ");
            deposit = Integer.parseInt(num);
            JOptionPane.showMessageDialog(null, "You have deposited $" + dep + " into the account of " + name);

            String proceeds = "y";
            while (proceeds.equalsIgnoreCase("y"))
            do {
                proceeds = JOptionPane.showInputDialog(null, "\nWould you like to do another transaction? (Y/N)");
            } while (proceeds.equalsIgnoreCase("Y"));

            System.exit(0);
        }

        if (rc == 1) {
            double withdraw;
            String with = JOptionPane.showInputDialog("How much would you like to withdraw?\n\t$");
            withdraw = Integer.parseInt(num);
            if (bal - withdraw > 0) {
                myAccount.withdraw(withdraw);
                JOptionPane.showMessageDialog(null, "You have withdrawn $" + withdraw + " from the account of " + name + ". The new balance is: " + myAccount.balance);
            } else {
                JOptionPane.showMessageDialog(null, "Sorry, you have insufficient funds for this operation. Your existing balance is $" + myAccount.balance);
            }

            String proceeds = "y";
            while (proceeds.equalsIgnoreCase("y"))
            do {
                proceeds = JOptionPane.showInputDialog(null, "\nWould you like to do another transaction? (Y/N)");
            } while (proceeds.equalsIgnoreCase("Y"));

            System.exit(0);
        }

        if (rc == 2) {
            JOptionPane.showMessageDialog(null, "The balance in the account of " + name + " with the pin number " + num + " is $" + bal);

            String proceeds = "y";
            while (proceeds.equalsIgnoreCase("y"))
            do {
                proceeds = JOptionPane.showInputDialog(null, "\nWould you like to do another transaction? (Y/N)");
            } while (proceeds.equalsIgnoreCase("Y"));

            System.exit(0);
        }

        if (rc == -1) {
            System.exit(0);
        } else {

            JOptionPane.showMessageDialog(null, "\nThank you. Have a good day!");
            System.exit(0);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:51:04.493

我尝试重新组织你的课程，使其更加清晰。我还做了一些小改动来提高性能。但是我准备接受所有的建议或批评。

银行账户类

```
public class BankAccount {

    private double balance;

    private String name;

    public BankAccount(double b, String n) {
        this.balance = b;
        this.name = n;
    }

    public void deposit(double d) {
        balance += d;
    }

    public void withdraw(double w) {
        balance -= w;
    }

    public String nickname() {
        System.out.print("Enter a new name: ");
        Scanner kbIn = new Scanner(System.in);
        String n = kbIn.nextLine();
        return n;
    }

    public double getBalance() {
        return balance;
    }

    public void setBalance(double balance) {
        this.balance = balance;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

} 
```

测试员类

```
 import java.awt.HeadlessException;
    import java.util.Scanner;

    import javax.swing.JOptionPane;

    public class Tester {

        private static String name;

    private static double withdraw;

    private static int pin;

    public static void main(String args[]) {
        Scanner kbInLine = new Scanner(System.in);
        Scanner kbIn = new Scanner(System.in);

        name = JOptionPane.showInputDialog(null, "Enter your name: ");

        String num = JOptionPane.showInputDialog("Enter your pin number: ");
        pin = Integer.parseInt(num);

        JOptionPane.showMessageDialog(null, "Login Success\n" + "Name : " + name + "\n" + "Pin Number : " + pin);

        BankAccount myAccount = new BankAccount(withdraw, name);

        int rc = getRC();
        processor(myAccount, rc);
    }

    private static int getRC() throws HeadlessException {
        String[] buttons = { "Deposit", "Withdraw", "Print Balance", "Exit" };
        int rc = JOptionPane.showOptionDialog(
            null,
            "What would you like to do?",
            "Confirmation",
            JOptionPane.INFORMATION_MESSAGE,
            0,
            null,
            buttons,
            buttons[2]);
        return rc;
    }

    private static void processor(BankAccount myAccount, int rc) throws HeadlessException, NumberFormatException {
        switch(rc) {
            case 0:
                processDeposit(myAccount, rc);
                break;
            case 1:
                processWithdraw(myAccount, rc);
                break;
            case 2:
                processBalance(myAccount, rc);
            default:
                processExit(rc);
                break;
        }
    }

    private static void processExit(int rc) throws HeadlessException {
        if(rc == -1) {
            JOptionPane.showMessageDialog(null, "\nThank you. Have a good day!");
            System.exit(0);
        }
    }

    private static void processDeposit(BankAccount myAccount, int rc) throws HeadlessException, NumberFormatException {
        double deposit;
        String dep = JOptionPane.showInputDialog("How much would you like to deposit?\n\t$ ");
        deposit = Double.parseDouble(dep);
        myAccount.deposit(deposit);

        JOptionPane.showMessageDialog(null, "You have deposited $" + dep + " into the account of " + name);
        processManager(myAccount);
    }

    private static void processWithdraw(BankAccount myAccount, int rc) throws HeadlessException, NumberFormatException {
        double withdraw;
        String with = JOptionPane.showInputDialog("How much would you like to withdraw?\n\t$");
        withdraw = Double.parseDouble(with);
        if(myAccount.getBalance() - withdraw >= 0) {
            myAccount.withdraw(withdraw);
            JOptionPane.showMessageDialog(null, "You have withdrawn $" + withdraw + " from the account of " + name
                    + ". The new balance is: " + myAccount.getBalance());
        } else {
            JOptionPane.showMessageDialog(
                null,
                "Sorry, you have insufficient funds for this operation. Your existing balance is $"
                        + myAccount.getBalance());
        }
        processManager(myAccount);
    }

    private static void processBalance(BankAccount myAccount, int rc) throws HeadlessException {
        JOptionPane.showMessageDialog(null, "The balance in the account of " + name + " with the pin number " + pin
                + " is $" + myAccount.getBalance());
        processManager(myAccount);
    }

    private static void processManager(BankAccount myAccount) throws HeadlessException, NumberFormatException {
        int rc;
        String proceeds = JOptionPane.showInputDialog(null, "\nWould you like to do another transaction? (Y/N)");
        if(proceeds.equalsIgnoreCase("y")) {
            rc = getRC();
            processor(myAccount, rc);
        } else {
            processExit(-1);
        }
    }
} 
```

您的错误是，您的结构不好，并且绝对在withdraw方法中不需要做。
在我的帖子中：在`processWithdraw()`方法中，我调用`getRc()`代表主菜单的方法并返回所选按钮的值。最后我将返回的值传递给`processor()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T11:31:06.663

请检查并仔细查看。为什么你使用**两个**循环进行检查？

我认为这更好：

```
if (rc == 0) {
        do {
            int deposit;
            String dep = JOptionPane.showInputDialog("How much would you like to deposit?\n\t$ ");
            deposit = Integer.parseInt(num);
            JOptionPane.showMessageDialog(null, "You have deposited $" + dep + " into the account of " + name);

             String proceeds = JOptionPane.showInputDialog(null, "\nWould you like to do another transaction? (Y/N)");
            } while (proceeds.equalsIgnoreCase("Y"));

            System.exit(0);
} 
```

我说你正在使用**两个循环**，因为你的代码：

```
while (proceeds.equalsIgnoreCase("y"))
            do {
                proceeds = JOptionPane.showInputDialog(null, "\nWould you like to do another transaction? (Y/N)");
            } while (proceeds.equalsIgnoreCase("Y")); 
```

只是意味着

```
while (proceeds.equalsIgnoreCase("y")) {
            do {
                proceeds = JOptionPane.showInputDialog(null, "\nWould you like to do another transaction? (Y/N)");
            } while (proceeds.equalsIgnoreCase("Y"));
} 
```

这是**两个不同的嵌套循环**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T11:31:47.273

你想用这几行做什么？

```
 while (proceeds.equalsIgnoreCase("y"))
        do {
            proceeds = JOptionPane.showInputDialog(null, "\nWould you like to do another  transaction? (Y/N)");
        } while (proceeds.equalsIgnoreCase("Y")); 
```

另外，我不确定我是否理解您为什么认为它应该显示开始菜单，所有块都以...结尾`System.exit(0)`...这是您的全部代码吗？

# sql - 通过第一个表sql中的主键连接两个表

> ID：14797068
> 
> 赞同：1
> 
> 时间：2013-02-10T11:09:11.953
> 
> 标签：sql, select, join

我想通过作为假日表中的主键的 locationID 连接这两个表，并从整个连接表中选择行

![在此处输入图像描述](../Images/c398e32c991b545e968e56119721e90c.png)

我想要一个全选查询，如果您执行结果集操作，您可以从两个表中选择匹配的行。

你会怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T11:10:15.380

```
SELECT  a.*, b.*
FROM    Accomodation a
        INNER JOIN Holiday b
            ON a.LocationID = b.LocationID 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T11:21:32.157

```
 SELECT * FROM Holiday INNER JOIN
             Accommodation ON Holiday.LocationId= Accommodation.LocationId 
```

# android - 使用谷歌地图 API 或常用 API 在 V2 中编译 android 项目？

> ID：14797073
> 
> 赞同：0
> 
> 时间：2013-02-10T11:09:54.267
> 
> 标签：android, google-maps

在 google map android V1 项目中，它应该使用 google maps API 而不是普通 API 编译。我想知道google map android V2是否也有同样的故事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T12:38:46.887

不，Maps V2 不依赖于原始 Maps SDK 插件。欢迎您在项目中设置一个普通的 Android 构建目标并跳过该`<uses-library>`元素。Maps V2 有自己的一组依赖项，特别是在 OpenGL ES 2.0+ 和 Play Services Framework 的存在上。

# android - 滑动菜单 - 从右到左

> ID：14797078
> 
> 赞同：2
> 
> 时间：2013-02-10T11:10:41.620
> 
> 标签：android, slidingmenu

我正在尝试使用以下示例中的滑动菜单。

[https://github.com/eddieringle/android-undergarment](https://github.com/eddieringle/android-undergarment)

但这具有从左到右的滑动实现。我怎样才能将其更改为从右到左。任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-09T09:43:31.177

我知道你得到了答案，但如果你不想使用任何外部库，你可以使用这个：

此代码存在于[gitHub](https://github.com/akotoe/android-slide-out-menu)

但是这个项目用于左右菜单，稍加改动就可以从右到左打开，我复制代码并进行更改。使用以下代码，您可以同时拥有两个侧边菜单。

**CollapseAnimation.java**

```
import android.view.animation.AccelerateDecelerateInterpolator;
import android.view.animation.Animation;
import android.view.animation.TranslateAnimation;
import android.widget.FrameLayout.LayoutParams;
import android.widget.LinearLayout;

public class CollapseAnimation extends TranslateAnimation implements TranslateAnimation.AnimationListener{

    private LinearLayout slidingLayout;
    int panelWidth;

    public CollapseAnimation(LinearLayout layout, int width, int fromXType, float fromXValue, int toXType,
            float toXValue, int fromYType, float fromYValue, int toYType, float toYValue) {

        super(fromXType, fromXValue, toXType, toXValue, fromYType, fromYValue, toYType, toYValue);

        //Initialize
        slidingLayout = layout;
        panelWidth = width;
        setDuration(400);
        setFillAfter( false );
        setInterpolator(new AccelerateDecelerateInterpolator());
        setAnimationListener(this);

        //Clear left and right margins
        LayoutParams params = (LayoutParams) slidingLayout.getLayoutParams();
        params.rightMargin = 0;
        params.leftMargin = 0;
        slidingLayout.setLayoutParams(params);
        slidingLayout.requestLayout();       
        slidingLayout.startAnimation(this);

    }
    public void onAnimationEnd(Animation animation) {

    }

    public void onAnimationRepeat(Animation animation) {

    }

    public void onAnimationStart(Animation animation) {

    }

} 
```

**ExpandAnimation.java**

```
import android.view.Gravity;
import android.view.animation.AccelerateDecelerateInterpolator;
import android.view.animation.Animation;
import android.view.animation.TranslateAnimation;
import android.widget.FrameLayout.LayoutParams;
import android.widget.LinearLayout;

public class ExpandAnimation extends TranslateAnimation implements Animation.AnimationListener{

    private LinearLayout slidingLayout;
    int panelWidth;

    public ExpandAnimation(LinearLayout layout, int width, int fromXType, float fromXValue, int toXType,
            float toXValue, int fromYType, float fromYValue, int toYType, float toYValue) {

        super(fromXType, fromXValue, toXType, toXValue, fromYType, fromYValue, toYType, toYValue);

        //Initialize
        slidingLayout = layout;
        panelWidth = width;
        setDuration(400);
        setFillAfter( false );
        setInterpolator(new AccelerateDecelerateInterpolator());
        setAnimationListener(this);
        slidingLayout.startAnimation(this);
    }

    public void onAnimationEnd(Animation arg0) {

        //Create margin and align left
        LayoutParams params = (LayoutParams) slidingLayout.getLayoutParams();
        params.rightMargin = panelWidth;
        params.gravity = Gravity.RIGHT;    
        slidingLayout.clearAnimation();
        slidingLayout.setLayoutParams(params);
        slidingLayout.requestLayout();

    }

    public void onAnimationRepeat(Animation arg0) {

    }

    public void onAnimationStart(Animation arg0) {

    }

} 
```

**层堆栈.java**

```
import android.os.Bundle;
import android.app.Activity;
import android.util.DisplayMetrics;
import android.view.Gravity;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.animation.Animation;
import android.view.animation.TranslateAnimation;
import android.widget.FrameLayout;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.RelativeLayout;
import android.widget.ListView;

public class LayerStack extends Activity {

    //Declare
    private LinearLayout slidingPanel;
    private boolean isExpanded;
    private DisplayMetrics metrics; 
    private ListView listView;
    private RelativeLayout headerPanel;
    private RelativeLayout menuPanel;
    private int panelWidth;
    private ImageView menuViewButton;

    FrameLayout.LayoutParams menuPanelParameters;
    FrameLayout.LayoutParams slidingPanelParameters;
    LinearLayout.LayoutParams headerPanelParameters ;
    LinearLayout.LayoutParams listViewParameters;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_layer_stack);

        //Initialize
        metrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(metrics);
        panelWidth = (int) ((metrics.widthPixels)*0.33);

        headerPanel = (RelativeLayout) findViewById(R.id.header);
        headerPanelParameters = (LinearLayout.LayoutParams) headerPanel.getLayoutParams();
        headerPanelParameters.width = metrics.widthPixels;
        headerPanel.setLayoutParams(headerPanelParameters);

        menuPanel = (RelativeLayout) findViewById(R.id.menuPanel);
        menuPanelParameters = (FrameLayout.LayoutParams) menuPanel.getLayoutParams();
        menuPanelParameters.gravity = Gravity.RIGHT;
        menuPanelParameters.width = panelWidth;

        menuPanel.setLayoutParams(menuPanelParameters);

        slidingPanel = (LinearLayout) findViewById(R.id.slidingPanel);
        slidingPanelParameters = (FrameLayout.LayoutParams) slidingPanel.getLayoutParams();
        slidingPanelParameters.width = metrics.widthPixels;
        slidingPanelParameters.gravity = Gravity.LEFT;
        slidingPanel.setLayoutParams(slidingPanelParameters);

        listView = (ListView) findViewById(R.id.list);
        listViewParameters = (LinearLayout.LayoutParams) listView.getLayoutParams();
        listViewParameters.width = metrics.widthPixels;
        listView.setLayoutParams(listViewParameters);

        //Slide the Panel   
        menuViewButton = (ImageView) findViewById(R.id.menuViewButton);
        menuViewButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                if(!isExpanded){
                    isExpanded = true;                                              

                    //Expand
                    new ExpandAnimation(slidingPanel, panelWidth,
                    Animation.RELATIVE_TO_PARENT, 0.0f,
                    Animation.RELATIVE_TO_PARENT, -0.33f, 0, 0.0f, 0, 0.0f); 
                     // if you want left to right just remove ( - ) before 0.33f                                        
                }else{
                    isExpanded = false;

                    //Collapse
                    new CollapseAnimation(slidingPanel,panelWidth,
                    TranslateAnimation.RELATIVE_TO_PARENT,-0.33f,
                    TranslateAnimation.RELATIVE_TO_PARENT, 0.0f, 0, 0.0f, 0, 0.0f);
                    // if you want left to right just remove ( - ) before 0.33f

                }              
            }
        });

    }       
} 
```

**activity_layer_stack.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="match_parent" 
    android:layout_weight="1"
    android:background="@drawable/blue_bg">

    <!-- Menu Panel -->
    <RelativeLayout
           android:id="@+id/menuPanel"
           android:layout_height="match_parent"
           android:layout_width="wrap_content"
           android:gravity="right"
           android:background="@drawable/gray_bg"
           android:orientation="vertical" >

            <TextView
                android:id="@+id/menu_title_1"
                android:layout_width="fill_parent"
                android:layout_height="50dp"
                android:layout_alignParentTop="true"
                android:layout_marginLeft="0dp" 
                android:paddingLeft="15dp"             
                android:gravity="center_vertical"
                android:background="#353535"
                android:textColor="@android:color/white"
                android:text="@string/menu_title">     
            </TextView>

            <View
                android:id="@+id/menu_item_divider_1"
                android:layout_width="fill_parent"
                android:layout_height="0.5dp"
                android:layout_marginLeft="0dp"
                android:layout_marginRight="0dp"
                android:layout_below="@+id/menu_title_1"
                android:background="#b5b5b5"/>

            <TextView
                android:id="@+id/menu_item_1"
                android:layout_width="fill_parent"
                android:layout_height="50dp"
                android:layout_marginLeft="15dp"             
                android:gravity="center_vertical"
                android:layout_below="@+id/menu_item_divider_1"
                android:text="@string/item_1">     
            </TextView>     
             <View
                android:id="@+id/menu_item_divider_2"
                android:layout_width="fill_parent"
                android:layout_height="0.5dp"
                android:layout_marginLeft="5dp"
                android:layout_marginRight="5dp"
                android:layout_below="@+id/menu_item_1"
                android:background="#b5b5b5"/> 
            <TextView
                android:id="@+id/menu_item_2"
                android:layout_width="fill_parent"
                android:layout_height="50dp"
                android:layout_below="@+id/menu_item_divider_2"
                android:layout_marginLeft="15dp"
                android:gravity="center_vertical"
                android:text="@string/item_2">
            </TextView>
            <View
                android:id="@+id/menu_item_divider_3"
                android:layout_width="fill_parent"
                android:layout_height="0.5dp"
                android:layout_marginLeft="5dp"
                android:layout_marginRight="5dp"
                android:layout_below="@+id/menu_item_2"
                android:background="#b5b5b5" />           
            </RelativeLayout>

       <!-- Sliding Panel -->     
        <LinearLayout
                android:id="@+id/slidingPanel"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:gravity="right"
                android:orientation="vertical"
                android:background="@android:color/white" >

                <RelativeLayout
                    android:id="@+id/header"
                    android:layout_width="match_parent"
                    android:layout_height="50dp"
                    android:background="@drawable/blue_bg" >

                        <View
                            android:id="@+id/header_vertical_divider_1"
                            android:layout_width="2dp"
                            android:layout_height="fill_parent"
                            android:layout_alignParentTop="true"
                            android:layout_toLeftOf="@+id/menuViewButton"
                            android:background="@drawable/engraved_bg" />

                        <ImageView
                            android:id="@+id/menuViewButton"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_alignParentRight="true"
                            android:layout_alignParentTop="true"
                            android:clickable="true"
                            android:contentDescription="@string/description"
                            android:src="@drawable/icon_menu"
                            android:visibility="visible" />

                </RelativeLayout>

                <View
                     android:id="@+id/dividerHeaderBottom"
                     android:layout_width="fill_parent"
                     android:layout_height="1dp"
                     android:background="#414141" />
                <ListView
                    android:id="@+id/list"
                    android:layout_width="match_parent"
                    android:layout_height="fill_parent"
                    android:divider="#b5b5b5"
                    android:dividerHeight="0.5dp"
                    android:background="@android:color/white"
                     >
                </ListView>

        </LinearLayout>
</FrameLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T11:16:27.937

[https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu) 试试这个。它具有不同的模式，例如从右到左以及许多其他自定义

# facebook-graph-api - 通过 Graph API 在提要中看不到一些帖子

> ID：14797079
> 
> 赞同：0
> 
> 时间：2013-02-10T11:10:41.700
> 
> 标签：facebook-graph-api, feed

我正在开发一个使用页面提要的应用程序。最近我注意到，来自提要的一些帖子无法通过 Graph API（以及 FQL）看到，但仍然可以在“其他人最近发布的帖子”下的常规页面上看到。

这是一个例子：[http](http://www.facebook.com/permalink.php?story_fbid=539919279372939&id=77702235732) ://www.facebook.com/permalink.php?story_fbid=539919279372939&id=77702235732 。如果您打开此 URL，您应该会看到帖子，但 Graph API explorer 没有：[http://developers.facebook.com/tools/explorer/?method=GET&path=77702235732_539919279372939](http://developers.facebook.com/tools/explorer/?method=GET&path=77702235732_539919279372939)。这是怎么回事？是作者这边的一些特殊隐私设置的问题，还是Facebook的bug？

# internet-explorer - Twitter Bootstrap：按钮未在 IE 中正确显示

> ID：14797086
> 
> 赞同：0
> 
> 时间：2013-02-10T11:11:51.980
> 
> 标签：internet-explorer, twitter-bootstrap

再会

我正在使用 Twitter Bootstrap，出于某种原因，在 IE（所有版本）中，按钮的背景（[http://twitter.github.com/bootstrap/components.html#buttonDropdowns](http://twitter.github.com/bootstrap/components.html#buttonDropdowns)）在文本下方被截断。见附图。

现在，当我加载引导网站时，按钮显示正常，但在我的网站上，它会切断背景 - 仅在 IE 中，而不在其他浏览器中。

我确实使用 HTML5 文档类型。

问题可能是什么？

![Twitter 引导按钮问题](../Images/03318d849cd1e02b938f2996d7cd1fbf.png)

# xcode - XCode 存档代码设计

> ID：14797089
> 
> 赞同：2
> 
> 时间：2013-02-10T11:12:40.043
> 
> 标签：xcode, app-store-connect, archive, codesign

我使用 XCode 存档我签名的应用程序。没有关于构建、沙箱、证书、...的问题

您可以在下面看到已签名应用程序的详细信息：

```
iMac-de-Admin:~ admin$ codesign -dvvv /Users/admin/Downloads/Alphonso.app 
Executable=/Users/admin/Downloads/Alphonso.app/Contents/MacOS/Alphonso
Identifier=com.Alphonso-soft.Alphonso
Format=bundle with Mach-O thin (x86_64)
CodeDirectory v=20100 size=2995 flags=0x0(none) hashes=141+5 location=embedded
Hash type=sha1 size=20
CDHash=82820d57a3c4b9d945177df5983eed3eb84e9580
Signature size=4340
Authority=3rd Party Mac Developer Application: John Doe
Authority=Apple Worldwide Developer Relations Certification Authority
Authority=Apple Root CA
Signed Time=8 févr. 2013 17:07:53
Info.plist entries=20
Sealed Resources rules=4 files=77
Internal requirements count=1 size=196
iMac-de-Admin:~ admin$ 
```

该应用程序似乎已正确签名，但是当我运行该应用程序时，我收到以下警告/错误：

```
“Alphonso” can’t be opened because it is from an unidentified developer. 
```

正常吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:32:04.030

“3rd Party ...”证书用于提交到 App Store。

使用“Developer ID ...”证书解决问题。

通过将 TrackMix.app 替换为应用程序的路径，在终端中输入以下命令。

```
$ sudo spctl -a -v TrackMix.app 
```

如果应用程序正确签名，终端中会出现类似于以下的文本：

```
./TrackMix.app: accepted
source=Developer ID 
```

# javascript - 使提交按钮触发模式

> ID：14797094
> 
> 赞同：0
> 
> 时间：2013-02-10T11:13:20.047
> 
> 标签：javascript, modal-dialog

我有一个表单，我希望在单击提交按钮时触发一个模式。我正在使用 Zurb Reveal.js 插件，并且正在调用 jQuery 和相关的reveal.js。

我有以下代码：

```
<input type="submit" id="submit-button" data-reveal-id="myModal" value="Submit this support request"> 
```

这在页面的底部（在 end body 标记之前）：

```
<div id="myModal" class="reveal-modal">
 <h1>Modal Title</h1>
 <p>Any content could go in here.</p>
 <a class="close-reveal-modal">&#215;</a>
</div>

<script type="text/javascript">
  $(document).ready(function() {
    $("#buttonForModal").click(function() {
      $("#myModal").reveal();
    });
  });
</script> 
```

当有一个锚标记触发模态时，data-reveal-id 起作用，所以我认为我可以使用上述 JS（在插件站点上给出）以编程方式触发它，但这似乎也不起作用。帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T11:22:04.040

由于您的按钮是提交按钮，当您单击它时，页面将根据表单选项刷新。如果您不使用表单，则需要使用`<button>`。

`reveal`不是 JQuery 标准方法

```
<script type="text/javascript">
  $(document).ready(function() {
    $("#buttonForModal").click(function(event) {
      //Prevent form submission to avoid page refreshing 
      event.stopPropagation()

      //Show your div
      $("#myModal").fadeIn(300);
    });
  });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T15:25:41.043

您需要先阻止按钮的默认字符，然后再打开模式。

```
<script type="text/javascript">
  $(document).ready(function() {
    $("#buttonForModal").click(function(event) {
      event.preventDefault();
      $("#myModal").reveal();
    });
  });
</script> 
```

# php - 准备好的语句嵌套在另一个准备好的语句中

> ID：14797096
> 
> 赞同：0
> 
> 时间：2013-02-10T11:13:28.247
> 
> 标签：php, mysqli, prepared-statement

我试图弄清楚如何在另一个准备好的语句循环中运行第二个准备好的语句。不是最佳的，但不知道我还能如何解决这个问题......

这是我正在尝试的：

```
$stmt = $mysqli->stmt_init();

### GET THE CURRENT USERS FRIENDS ###
$sql = "SELECT f.fk_user_id2
             , u.username
             , u.profileimg FROM ".$prefix."_friends f 
                INNER JOIN ".$prefix."_users u
                    ON f.fk_user_id2 = u.id     
            WHERE f.fk_user_id1 = ? ORDER BY u.username ASC";

if($stmt->prepare($sql)){

    $stmt->bind_param('i',$playerid);
    $stmt->execute();
    $stmt->bind_result($userPoints);
    while ($stmt->fetch()){

        $friendid = $row1['fk_user_id2'];
        $friendname = $row1['username'];
        if(empty($row1['profileimg'])){
            $profileimg = 'http://duefmun.dk/profileimages/noimage.png';
        } else {
            $profileimg = 'http://duefmun.dk/profileimages/'.$row1['profileimg'];
        }

        ### GET THE HISTORY ###
        $sql1 = mysql_query("SELECT wins, games FROM ".$prefix."_newversus WHERE fk_player=? AND fk_opponent=?");
        if($stmt->prepare($sql1)){
            $stmt->bind_param('ii',$playerid,$friendid);
            $stmt->execute();
            $stmt->bind_result($wins,$games);
            $stmt->fetch();

            if($games == 0){
                $history = $languagestring[165];
            } else {
                $history = $languagestring[168].' '.$wins.' '.$languagestring[169].' '.$games.' '.$languagestring[170];
            }
        }

        $string .= $friendname.','.$friendid.','.$history.','.$profileimg.'^';

    }
} 

$string = substr($string,0, (strlen($string)-1)); 
echo $string.'%';

$stmt->close(); 
```

也许可以内联第二个语句，但不知道如何。请提前帮助和感谢：-/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T14:14:03.580

这不是一个准备好的语句是你的问题，而只是一个*变量*
你只是在重写你的变量，在这种情况下是 $stmt。
给第二个循环取另一个名字（并检查其他涉及的变量）

# css - 水平对齐容器？（最简单的方法？）CSS

> ID：14797099
> 
> 赞同：0
> 
> 时间：2013-02-10T11:13:51.433
> 
> 标签：css

水平对齐容器的最佳方法是什么？因为我真的不想创建 3 个单独的 div 容器......例如：我基本上只希望三个盒子/容器在我的网页中心水平排列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T11:15:42.240

**HTML：**

```
<div class="float"></div>
<div class="float"></div>
<div class="float"></div> 
```

**CSS：**

```
.float {
    width:33.33%;
    height:400px;
    float:left;
} 
```

或者：

```
.float {
    width:33.33%;
    height:400px;
    display:inline-block;
} 
```

[***示范***](http://jsfiddle.net/ts9BB/)

您可以使用`float`OR`display`属性水平对齐它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T11:58:08.480

```
<div class="container">
    <div class="float"></div>
    <div class="float"></div>
    <div class="float"></div>
</div>

#container {
    text-align: center;
}

.float {
    display:inline-block;
    text-align: left;

    width:100px;
    height:400px;        
    background:green;
    margin:5px;
} 
```

演示：http: [//jsfiddle.net/ts9BB/3/](http://jsfiddle.net/ts9BB/3/)

# java - 注释处理器与字节码生成

> ID：14797100
> 
> 赞同：1
> 
> 时间：2013-02-10T11:14:00.310
> 
> 标签：java

[注释处理](http://docs.oracle.com/javase/7/docs/api/javax/annotation/processing/package-summary.html)在字节码生成方面的相对优点和缺点是什么（例如使用[ASM](http://asm.ow2.org/)）？除了实施困难之外，您为什么更喜欢其中一个？

由于评论者询问，我正在尝试自动生成抽象 getter/setter 方法的实现，但我想要一个更一般的答案。*我不是在问生成 getter 和 setter 的更好方法是什么。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T11:32:54.343

一些字节码生成器库包含对轻松创建 getter/setter 变量的支持，这大大简化了事情 - 您只需导入库类并编写 Java 代码。一些框架甚至可以基于字段上的简单注释自动生成 getter 和 setter（以及一大堆其他东西）。

另一方面，字节码生成通常会在编译新类时对运行时性能产生影响，尽管可以通过缓存生成的类文件来减轻这种影响。

我在注释处理方面的经历并不那么愉快。它通常需要您配置甚至修改您的构建系统，以便执行注释处理器。此外，如果您希望大量修改源代码文件，对注释处理器进行编码可能会变得*非常*不舒服，并且显然没有与字节码生成相同的框架/库种类。

老实说，我个人最喜欢的是尽可能使用[Java 7 方法句柄](http://docs.oracle.com/javase/7/docs/api/java/lang/invoke/MethodHandle.html)——或者只是手动编写 **** getter 和 setter。

**编辑：**

注释处理 API 的主要问题是（据我所知）它不支持在编译时*修改代码。*推荐的方法似乎是生成独立的装饰器类。[当然，如果您使用例如Apache Velocity](http://velocity.apache.org/engine/devel/user-guide.html)，这相对容易，但最终结果几乎不一样。

有一些 hack 处理原始源文件以添加方法并重新编译，但即使获取源文件的*路径*也几乎是不可能的。通常涉及很多猜测，并对项目结构做出各种假设。此外，注释处理器本质上为已处理的源文件维护了一个单独的源树。

[Project Lombok](http://projectlombok.org/features/index.html)（我不敢相信我之前忘记提到过）使用了许多不同颜色的魔法来利用注释处理 API 来获得更有用的东西。这很可能是你所需要的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T11:51:34.897

最好的办法是使用 IDE 的加速器来生成 getter 和 setter。这样它们就会出现在源代码中。这将使阅读代码更容易，并避免调试器出现潜在问题。

创建 getter 和 setter 有点乏味，但不值得添加一大堆复杂性（和潜在的陷阱）来避免它。（如果这对你来说*真的*太乏味了，说服你的老板你需要一个“代码猴子”来帮助你。）

# css - IE6中的滚动条

> ID：14797103
> 
> 赞同：0
> 
> 时间：2013-02-10T11:14:32.320
> 
> 标签：css, joomla, mootools, internet-explorer-6

今天，我尝试在一个古老的浏览器 IE6 中浏览我的 Joomla 网站。

所有元素看起来都很好，但我在启用了 SqueezeBox（Joomla 模态框）的页面中看到了一个长的水平滚动条。

为了找到问题，我编辑了模板并删除了标签旁边的所有代码`<body>`。再试一次，我看到了空白页面，带有一个关闭按钮和一个长滚动条。（[截图](http://i.stack.imgur.com/Xac1K.png)）

`<body>`内容：

```
<div tabindex="-1" style="z-index: 65555; opacity: 0;" aria-hidden="true" id="sbox-overlay"></div>
<div class="shadow" style="z-index: 65557;" aria-hidden="true" role="dialog" id="sbox-window">
    <div style="opacity: 0;" id="sbox-content"></div>
    <a aria-controls="sbox-window" role="button" href="#" id="sbox-btn-close"></a>
</div> 
```

`<body>`款式：

```
color: #000000;
height: 100%;
margin: 0;
padding: 0;
text-align: center; 
```

modal.css（SqueezeBox 样式表）：

```
/**
 * SqueezeBox - Expandable Lightbox
 *
 * Allows to open various content as modal,
 * centered and animated box.
 *
 * @version     1.3
 *
 * @license     MIT-style license
 * @author      Harald Kirschner <mail [at] digitarald.de>
 * @author      Rouven Weßling <me [at] rouvenwessling.de>
 * @copyright   Author
 */

#sbox-overlay {
    position: absolute;
    background-color: #000;
    left: 0px;
    top: 0px;
}

#sbox-window {
    position: absolute;
    background-color: #fff;
    text-align: left;
    overflow: visible;
    padding: 10px;
    /* invalid values, but looks smoother! */
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    border-radius: 3px;
}

#sbox-window[aria-hidden=true],
#sbox-overlay[aria-hidden=true] {
    display: none;
}

#sbox-btn-close {
    position: absolute;
    width: 30px;
    height: 30px;
    right: -15px;
    top: -15px;
    background: url(../images/modal/closebox.png) no-repeat center;
    border: none;
}

.sbox-loading #sbox-content {
    background-image: url(../images/modal/spinner.gif);
    background-repeat: no-repeat;
    background-position: center;
}

#sbox-content {
    clear: both;
    overflow: auto;
    background-color: #fff;
    height: 100%;
    width: 100%;
}

.sbox-content-image#sbox-content {
    overflow: visible;
}

#sbox-image {
    display: block;
}

.sbox-content-image img {
    display: block;
    width: 100%;
    height: 100%;
}

.sbox-content-iframe#sbox-content {
    overflow: visible;
}

/* Hides scrollbars */
.body-overlayed {
    overflow: hidden;
}

/* Hides flash (Firefox problem) and selects (IE) */
.body-overlayed embed, .body-overlayed object, .body-overlayed select {
    visibility: hidden;
}

#sbox-window embed, #sbox-window object, #sbox-window select {
    visibility: visible;
}

/* Shadows */
#sbox-window.shadow {
    -webkit-box-shadow: 0 0 10px rgba(0, 0, 0, 0.7);
    -moz-box-shadow: 0 0 10px rgba(0, 0, 0, 0.7);
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.7);
}

.sbox-bg {
    position: absolute;
    width: 33px;
    height: 40px;
}

.sbox-bg-n {
    left: 0;
    top: -40px;
    width: 100%;
    background: url(../images/modal/bg_n.png) repeat-x;
}
.sbox-bg-ne {
    right: -33px;
    top: -40px;
    background: url(../images/modal/bg_ne.png) no-repeat;
}
.sbox-bg-e {
    right: -33px;
    top: 0;
    height: 100%;
    background: url(../images/modal/bg_e.png) repeat-y;
}
.sbox-bg-se {
    right: -33px;
    bottom: -40px;
    background: url(../images/modal/bg_se.png) no-repeat;
}
.sbox-bg-s {
    left: 0;
    bottom: -40px;
    width: 100%;
    background: url(../images/modal/bg_s.png) repeat-x;
}
.sbox-bg-sw {
    left: -33px;
    bottom: -40px;
    background: url(../images/modal/bg_sw.png) no-repeat;
}
.sbox-bg-w {
    left: -33px;
    top: 0;
    height: 100%;
    background: url(../images/modal/bg_w.png) repeat-y;
}
.sbox-bg-nw {
    left: -33px;
    top: -40px;
    background: url(../images/modal/bg_nw.png) no-repeat;
}
@-moz-document url-prefix() {
    .body-overlayed {
    overflow: visible;
    }
} 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T11:42:22.730

如果您的客户仍在使用 IE6，他们肯定习惯于看到看起来很糟糕的网站吗？这个滚动条有多糟糕？会影响可用性吗？如果用户仍然可以使用该网站，我建议告诉他们使用它，至少在他们升级浏览器之前。

如果他们真的无法升级并坚持要您解决问题，您可以尝试使用`overflow:hidden`防止滚动条出现。

但请注意，您网站上的 IE6 可能存在其他问题。事实上，几乎可以肯定有。如果用户一直坚持让你为他们修复网站，你可能会发现自己只为一个用户做了大量的工作。你*现在*应该问问自己，这个客户对你来说价值多少，以及你愿意花多少时间来支持他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T09:55:32.723

在你的 CSS 代码中，试试这个：

```
#sbox-overlay {
    position: absolute;
    background-color: #000;
    left: 0px;
    top: 0px;
    right:0;
    bottom:0;
    overflow-x:hidden;
    overflow-y:auto;
} 
```

# ios - 截取高质量 iOS 的屏幕截图

> ID：14797104
> 
> 赞同：0
> 
> 时间：2013-02-10T11:14:40.667
> 
> 标签：ios, screenshot

我以这种方式截取我的 iPad 3 屏幕截图：

```
UIGraphicsBeginImageContext(self.view.frame.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                     NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

int num = arc4random() % 100000000000000;

NSString* path = [documentsDirectory stringByAppendingPathComponent: [NSString stringWithFormat:@"%dtest.png", num]];
NSData* data = UIImagePNGRepresentation(viewImage);
[data writeToFile:path atomically:YES]; 
```

问题是我的质量严重下降。我可以看到像素，但它是 iPad 3，那怎么可能呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T11:22:00.580

从文档：

```
UIGraphicsBeginImageContextWithOptions
Creates a bitmap-based graphics context with the specified options.

void UIGraphicsBeginImageContextWithOptions(
  CGSize size,
  BOOL opaque,
  CGFloat scale
); 
```

然后 ：

```
UIGraphicsBeginImageContextWithOptions(self.view.frame.size,NO,2.0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T11:22:36.507

```
- (UIImage*)screenshot 
{
    // Create a graphics context with the target size
    // On iOS 4 and later, use UIGraphicsBeginImageContextWithOptions to take the scale into consideration
    // On iOS prior to 4, fall back to use UIGraphicsBeginImageContext
    CGSize imageSize = [[UIScreen mainScreen] bounds].size;
    if (NULL != UIGraphicsBeginImageContextWithOptions)
        UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0);
    else
        UIGraphicsBeginImageContext(imageSize);

    CGContextRef context = UIGraphicsGetCurrentContext();

    // Iterate over every window from back to front
    for (UIWindow *window in [[UIApplication sharedApplication] windows]) 
    {
        if (![window respondsToSelector:@selector(screen)] || [window screen] == [UIScreen mainScreen])
        {
            // -renderInContext: renders in the coordinate space of the layer,
            // so we must first apply the layer's geometry to the graphics context
            CGContextSaveGState(context);
            // Center the context around the window's anchor point
            CGContextTranslateCTM(context, [window center].x, [window center].y);
            // Apply the window's transform about the anchor point
            CGContextConcatCTM(context, [window transform]);
            // Offset by the portion of the bounds left of and above the anchor point
            CGContextTranslateCTM(context,
                                  -[window bounds].size.width * [[window layer] anchorPoint].x,
                                  -[window bounds].size.height * [[window layer] anchorPoint].y);

            // Render the layer hierarchy to the current context
            [[window layer] renderInContext:context];

            // Restore the context
            CGContextRestoreGState(context);
        }
    }

    // Retrieve the screenshot image
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return image;
} 
```

更多信息请阅读此技术报告：[UIKit 应用程序中的技术问答 QA1703 屏幕捕获](http://developer.apple.com/library/ios/#qa/qa1703/_index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T11:19:33.720

你的尺寸不对，用这个：

```
CGRect screenBounds = [[UIScreen mainScreen] bounds];
CGFloat screenScale = [[UIScreen mainScreen] scale];
CGSize screenSize = CGSizeMake(screenBounds.size.width * screenScale, screenBounds.size.height * screenScale);
UIGraphicsBeginImageContext(screenSize);
//screenshot code.. 
```

# c# - 两个 getpixel 方法名称相同

> ID：14797105
> 
> 赞同：0
> 
> 时间：2013-02-10T11:14:41.883
> 
> 标签：c#, getpixel

我正在尝试在 c# 中打开并读取同一表单上两个单独图像的像素值。阅读以下内容时出现错误：

> 错误 1 ​​类型 'imageAlign.Form1' 已经定义了一个名为 'GetPixels' 的成员，其参数类型相同 C:\Users\jason\Documents\Visual Studio 2010\Projects\imageAlign\imageAlign\Form1.cs 81 26 imageAlign

我认为这意味着我有两个同名的方法——GetPixels。

如果这只是一个名称，我可以重命名它们来解决问题 - 它不会影响 GetPixel 功能吗？

```
private Color[,] GetPixels1(string filename)
private Color[,] GetPixels2(string filename) 
```

像那样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T11:18:40.320

这意味着您已经拥有具有相同名称和相同参数的方法。您必须重命名方法以反映其目的或重载方法（通过更改参数）。

似乎这些方法在做几乎相同的事情（因此名称和参数相同），因此，我建议重构它们，但方式不同，而不仅仅是将它们重命名为`GetPixel1`and `GetPixel2`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T11:20:32.720

我只会为这两个类使用两个不同的命名空间，而不是尝试重命名方法 - 因此命名空间最终......看起来像

```
myFirstNamecpace.GetPixels(..)
mySecondNamespace.GetPixels(...) 
```

[已编辑 - OP 问题]

继续 GetPixels - 我想获取 jpeg 图像的像素值并将它们加起来为一个整数值。但是 jpeg 图像有红色、绿色和蓝色通道，对吗？我已在图片框中将其作为位图打开。那么，我需要遍历每个像素的所有 3 个通道还是只获取每个像素的单个值？

```
private Color[,] GetPixels_1(string filename) 
{ 
  Bitmap myImage1 = (Bitmap)pictureBox1.Image; 
  //Bitmap bmp = (Bitmap)Bitmap.FromFile(filename); 
  Color[,] results = new Color[myImage1.Width, myImage1.Height]; 
  for (int y = 0; y < myImage1.Height; y++) 
  { 
    for (int x = 0; x < myImage1.Width; x++) 
    { 
      results[x, y] = myImage1.GetPixel(x, y); 
    } 
  } 
  return results; 
} 
```

[已编辑 - 答案] 要粘贴代码，请使用上面的编辑器 {}。所以，我找到了这个，HTH：[https ://stackoverflow.com/a/10128284/1758762](https://stackoverflow.com/a/10128284/1758762)

```
using System.Drawing;

Bitmap img = new Bitmap("*imagePath*");
for (int i = 0; i < img.GetWidth; i++)
{
    for (int i = 0; i < img.GetWidth; i++)
    {
        Color pixel = img.GetPixel(i,j);

        if (pixel == *somecondition*)
        {
            **Store pixel here in a array or list or whatever** 
        }
    }
} 
```

# heroku - 第一次尝试 heroku 时出现“bash: play: command not found”

> ID：14797106
> 
> 赞同：4
> 
> 时间：2013-02-10T11:14:49.780
> 
> 标签：heroku, playframework-2.0

我正在尝试玩！与 heroku 一起阅读 heroku 网站 ( [https://devcenter.heroku.com/articles/play](https://devcenter.heroku.com/articles/play) ) 中的指南。部署我的示例应用程序后，我注意到测功机崩溃了。我检查了heroku日志，发现heroku找不到播放命令。

谁知道怎么安装play！heroku 上的框架？我搜索了开发中心，但找不到任何信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T04:47:01.347

我遇到了同样的问题，修复方法是更改`Procfile`​​使用命令`target/start`而不是`play`然后将其推送到 Heroku。请参阅下面的差异。

![让 Play 2.0 框架工作的 Diff 文件](../Images/6f8cb2b382243022c8522706996ceada.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T21:00:36.060

Heroku 会自动检测 Play! 应用程序并安装 Play！将代码推送到 Heroku 时为您提供运行时。如果玩！没有被安装，很可能你的应用程序没有被正确检测为 Play！应用程序。

在播放的情况下！1.2.x（如您正在阅读的开发中心文章），[Play！buildpack](https://github.com/heroku/heroku-buildpack-play)将进行检测，在 Play 2.x 的情况下，[Scala buildpack](https://github.com/heroku/heroku-buildpack-scala)用于检测和安装 Play！给你的框架。有关[Heroku Play 框架支持](https://devcenter.heroku.com/articles/play-support)和检测所需的更多信息，请参阅： [https ://devcenter.heroku.com/articles/play-support](https://devcenter.heroku.com/articles/play-support)

如果您的应用程序被检测到仍然存在问题，我建议您克隆和推送[`https://github.com/heroku/devcenter-play.git`](https://github.com/heroku/devcenter-play)，这是您正在阅读的开发中心文章中的完整示例应用程序：

```
git clone https://github.com/heroku/devcenter-play.git
cd devcenter-play
heroku create
git push heroku master
heroku open 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-21T19:03:39.323

接受的答案是正确的，但是如果您想定义自己的 Procfile，您需要按照 alib 提供的说明进行操作。目前在 Heroku 网站上列出的示例 Procfile 专门用于播放 1.x 应用程序。

# php - 使用一个用户名和密码登录多个用户

> ID：14797109
> 
> 赞同：-3
> 
> 时间：2013-02-10T11:15:09.293
> 
> 标签：php, login

我是 php 新手，因此对我的 Google 搜索有一些了解（好/坏代码）。

我想创建一个安全区域，允许 20-30 人对（很可能是 mySQL）数据库进行读/写访问，并且能够让所有人同时登录。

有没有一种简单而安全的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T11:20:48.477

是的，

制作一个文件（例如，我将其命名为secure.php）

安全的.php：

```
<?php
  $username = 'username';
  $password = 'password';

  if (!isset($_SERVER['PHP_AUTH_USER']) || !isset($_SERVER['PHP_AUTH_PW']) ||
    ($_SERVER['PHP_AUTH_USER'] != $username) || ($_SERVER['PHP_AUTH_PW'] != $password)) {
    header('HTTP/1.1 401 Unauthorized');
    header('WWW-Authenticate: Basic realm="Secure Area"');
    exit('You are not authorized'); 
  }
?> 
```

然后在应该安全的文件中包含secure.php（使用用户名和密码）：

```
include('secure.php'); 
```

此示例使用 HTTP 身份验证。用户在我们进入的对话框中输入的内容`$_SERVER['PHP_AUTH_USER']`和`$_SERVER['PHP_AUTH_PW']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T11:25:47.533

你可以有安全的，也可以有简单的；要求两者可能是一厢情愿的想法，除非您已经在底层技术方面有经验（这是重新定义“简单”）。

鉴于您从哪里开始，您可以从一些[基本教程](http://php.about.com/od/phpwithmysql/ss/mysql_php.htm)和陡峭的学习曲线开始，或者（更好的解决方案）只需下载/安装一些现成的现有开源应用程序即可实现您想要的任何东西去做......这不一定是安全的，但它肯定比从头开始更简单并且很可能更安全（尤其是如果你是工具集的新手）。

# html - 垂直居中文本和图像

> ID：14797111
> 
> 赞同：0
> 
> 时间：2013-02-10T11:15:20.620
> 
> 标签：html, css

我试图垂直居中文本和图标，但我有问题并且无法修复它。
这是我的例子：http: [//jsfiddle.net/NMGkv/1/](http://jsfiddle.net/NMGkv/1/)

当文本只有一行时一切正常，但当它有 2 行或更多行时，图标（黑色方块）未正确居中。
我想要的只是让图标始终位于 li 元素的中间。
提前感谢您的任何帮助。
代码：

```
li {
    background:#ccc;
    width:150px;
    height:50px;
    margin-top:2px;
}
.center {
    display:table-cell;
    width:150px;
    height:50px;
    vertical-align:middle;
}
p, span {
    font-family:Arial;
    font-size:14px;
    display:inline-block;
    padding:0;
    margin:0;
}
p {
    width:100px;
    line-height:14px;
}
.icon {
    background:#666;
    width:16px;
    height:16px;
    margin-right:5px;
    margin-left:2px;
    vertical-align:text-top;
}

<ul>
    <li>
        <div class="center">
            <span class="icon"></span>
            <p>This is text on two lines</p>
        </div>
    </li>
    <li>
        <div class="center">
            <span class="icon"></span>
            <p>This is text on three line text text </p>
        </div>
    </li>
    <li>
        <div class="center">
            <span class="icon"></span>
            <p>Text on one line</p>
        </div>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T11:24:21.963

这个 CSS 应该可以工作：

```
li {
    background:#ccc;
    width:150px;
    height:50px;
    margin-top:2px;
}
.center {
    display:table-cell;
    width:150px;
    height:50px;
    vertical-align: middle;
}
p, span {
    display: block;
    font-family:Arial;
    font-size:14px;
    display:inline-block;
    padding:0;
    vertical-align: middle;
}
p {
    width:100px;
}
.icon {
    background:#666;
    width:16px;
    height:16px;
    margin-right:5px;
    margin-left:2px;
} 
```

你将不得不做一个差异来找出变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T11:59:31.757

vertical-align 适用于元素和其他标签，您应该使用 padding-top 和 padding-bottom 来设置 vertical align 。

# ruby-on-rails-3 - 以嵌套形式访问对象

> ID：14797113
> 
> 赞同：0
> 
> 时间：2013-02-10T11:15:26.513
> 
> 标签：ruby-on-rails-3, nested-forms

我有以下嵌套形式：

```
<%= form_for @contrat,:url => backend_orders_update_report_url(@contrat) do |f| %>
<%= f.fields_for :contrat_lines do |fcl| %>
    <%=  fcl.object.inspect  %>
  <% end %>
<% end %> 
```

输出如下：

```
nil 
```

在嵌套表单中，我想显示一些元素，而不是作为表单，而是作为原始文本和一些作为表单字段。通常通过执行 f.object.name 以一种形式，我会访问该名称并能够根据需要显示它。但是，如果我在这里执行 fcl.object，则只有 nil。它应该显示对 contrat_line 对象的检查。

是否可以以嵌套形式访问数据？

编辑 ：

控制器动作：

```
def show_report
  @contrat = Contrat.find(params[:id])
end 
```

以下是模型在开始时的关系：

对比线：

```
class ContratLine < ActiveRecord::Base
  include Priceable

  belongs_to :contrat
  belongs_to :good
  #a enlever ici et dans la base
  attr_accessible :active_start,:active,:good_id,:pricing,:contrat
  validates :active_start, :presence=> true,:if => "active"
  validate :active_start_smaller_than_active_stop
  validate :active_start_day_cannot_be_greater_than_28
  has_one :pricing, :as => :priceable, :dependent => :delete
  before_validation :convert_month_year_to_date
  after_save :set_user_subscription_date 
```

对比：

```
class Contrat < ActiveRecord::Base

  has_many :contrat_lines, :dependent => :delete_all

  belongs_to :user
  attr_accessible :user_id,:pricing_id,:state,:adresse_id,:adresse,:payment,:adresse_attributes,:automatic,:start_date,:end_date
  enum_attr :state, %w(basket waiting_data to_confirm paid) do
    labels :basket=>'Panier',  :to_confirm=>'Non payé',:paid=>'Payé'
  end
  enum_attr :payment, %w(debit_card wire_transfer cheque direct_debit)
  belongs_to :adresse
  accepts_nested_attributes_for :adresse, :allow_destroy => true
  scope :by_state,  lambda { |state| where("state = ?",state) }
  scope :last_automatic, where("automatic = true").order("invoice_date DESC")
  scope :last_with_adresse, where("state != 'basket'").order("invoice_date DESC")

  before_validation :set_numbers 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T11:47:04.327

您在 attr_accessible 中缺少 accept_nested_attributes_for :contrat_lines 和 :contrat_lines_attributes

# select - 如何重定向到用户在选择标签中选择的页面

> ID：14797119
> 
> 赞同：0
> 
> 时间：2013-02-10T11:15:46.380
> 
> 标签：select, button

```
<select name="cmbpgCategory" id="cmbpgCategory">
<option value="" label="Select" selected="selected">Select</option>
<option value="CreditCards" label="Credit Cards">Credit Cards</option>
<option value="DebitCards" label="Debit Cards">Debit Cards</option>
<option value="NetBanking" label="Net Banking">Net Banking</option>
</select> 
```

在上面的代码中，如果用户选择信用卡等选项，则页面应重定向到信用卡页面，该表单中的其他字段应发布到 nxt 页面，如姓名电子邮件等，这应该在单击按钮后`<button value='seatselect' type="submit" >Confirm Booking</button>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T11:26:40.433

**您的带有脚本代码的 HTML 页面：**

```
<html>
<body>
<select name="cmbpgCategory" id="cmbpgCategory">
<option value="" label="Select" selected="selected">Select</option>
<option value="CreditCards" label="Credit Cards">Credit Cards</option>
<option value="DebitCards" label="Debit Cards">Debit Cards</option>
<option value="NetBanking" label="Net Banking">Net Banking</option>
</select>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
</script>
<script>
$(document).ready(function() {
    $('#cmbpgCategory').bind('change', function () {
        var cardType = $('#cmbpgCategory').val();//you will get CreditCard, debitcards values here
        switch(cardType)
        {
            case 'CreditCards': window.location.href = 'creditcard.php';
            //more cases to follow?, put break
        }   
    });
});
</script>
</body>
</html> 
```

# java - 条形图的百分比

> ID：14797122
> 
> 赞同：0
> 
> 时间：2013-02-10T11:16:06.797
> 
> 标签：java, sql

我已经完成了以下代码，使用 DB 中的数据创建了一个条形图，并将其保存为 JPEG 文件。

我想在表格的任何地方添加百分比值，

```
 JDBCCategoryDataset dataset = new JDBCCategoryDataset("", "oracle.jdbc.OracleDriver",
                   "", "");
  String query = "SELECT std,id from table";
 dataset.executeQuery(query);
  JFreeChart chart =ChartFactory.createBarChart3D("Test", "Id", "Score",dataset,
   PlotOrientation.HORIZONTAL, true, true, true);
   ChartUtilities.saveChartAsJPEG(new File(""),chart,1280, 1024); 
```

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:36:06.200

我将假设您感兴趣的值是`std`. 要获得比例，您可以使用：

```
SELECT std, id,
       std / sum(std) over () as proportion
from table 
```

对于百分比，只需乘以 100：

```
SELECT std, id,
       100*std / sum(std) over () as percentage
from table 
```

这是在 Oracle中使用一种称为*分析函数的函数。*

# html - 如何在 mocha 上使用 Sinon 模拟 input type="file" 进行 AJAX 测试

> ID：14797123
> 
> 赞同：4
> 
> 时间：2013-02-10T11:16:16.890
> 
> 标签：html, unit-testing, file-upload, mocha.js, sinon

我在 Mocha 上进行了单元测试，并且正在通过 AJAX 测试表单提交。

由于您无法`<input type="file">`手动填写，并且我正在寻找自动化测试，我需要知道“模拟”此输入的最佳方法是什么，并且仍然能够通过 AJAX 以多部分格式发送它（可以是纯文本“文件”，如 Hello world！）。

我知道我可以手动制作字符串，但我需要`<input type="file">`用我的模拟“替换”对象中的值（它仍然可以响应我的模拟`FormData`对象）

# iphone - 将 JSON 数组坐标映射到地图视图中

> ID：14797128
> 
> 赞同：0
> 
> 时间：2013-02-10T11:16:57.033
> 
> 标签：iphone, ios, objective-c, mkmapview

我做了很多挖掘工作，但我似乎找不到一个很好的资源来说明如何做一些应该很简单的事情。

我有一组纬度/经度坐标，我想放在 iOS6 的地图上。坐标以 JSON 格式返回（来自数据库）。JSON 返回一组坐标以及位置的名称。

有谁知道如何将 JSON 数组插入地图视图？听起来并不难，但我找不到它的文档。任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T11:29:44.287

我想你的 json 是这样的：

```
[ {long : 53.58448, lat : -9.8445}, .... ] 
```

然后 ：

```
for(NSDictionary *location in locationArray){
  CLLocationCoordinate2D  point;
  point.latitude  = location[@"lat"];
  point.longitude = location[@"long"];
  AddressAnnotation *a = [[AddressAnnotation alloc] initWithCoordinate:point]; 
  [mapView addAnnotation:a];
  [a release];
} 
```

# search - Visual Studio 2012 解决方案资源管理器搜索不搜索 cshtml 文件

> ID：14797132
> 
> 赞同：1
> 
> 时间：2013-02-10T11:17:19.653
> 
> 标签：search, razor, refactoring

当我在 Visual Studio 2012 MVC 4 Web 项目中重构命名空间时，包含“@model MyFirstWeb.Domains.LoginModel”的 razor 文件没有被触及，这在编译首次使用时导致异常。

这不是什么大不了的事，而是很奇怪？，我可以将 cshtml 注册为文件扩展名以进行搜索吗？

如果我使用“搜索解决方案资源管理器”尝试归档我知道该文件中存在的文本，我什么也得不到？

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-24T19:09:13.340

这似乎是 VS 2013 R1 中的一个已知错误，该错误已被识别然后关闭，但用户仍然遇到问题。尽管在解决方案资源管理器之外，您可以使用“Ctrl + ,”搜索解决方案中的这些文件类型。

相关票在这里....

[http://connect.microsoft.com/VisualStudio/feedback/details/801838/solution-explorer-search-doesnt-include-js-or-cshtml-results](http://connect.microsoft.com/VisualStudio/feedback/details/801838/solution-explorer-search-doesnt-include-js-or-cshtml-results)

和

[http://connect.microsoft.com/VisualStudio/feedback/details/801836/solution-explorer-doesnt-search-files-projects-inside-solution-folders](http://connect.microsoft.com/VisualStudio/feedback/details/801836/solution-explorer-doesnt-search-files-projects-inside-solution-folders)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:42:44.940

这是一篇博文，解释了解决方案资源管理器搜索的来龙去脉：

[http://www.schwammysays.net/visual-studio-2012-tip-search-in-solution-explorer](http://www.schwammysays.net/visual-studio-2012-tip-search-in-solution-explorer)

基本上，您搜索的是解决方案资源管理器，而不是文件，因此将搜索解决方案资源管理器中可见的任何内容。幸运的是，解决方案资源管理器现在也包含逻辑结构。

# java - Java 中的局部变量、“死代码”和二维数组问题

> ID：14797133
> 
> 赞同：0
> 
> 时间：2013-02-10T11:17:22.713
> 
> 标签：java, arrays, local

我在用 Java 开发以下代码时遇到了一些问题：

```
setPos(x, y);
for (int i = 0; x < size; i++) {
    for (int j = 0; y < size; j++) {
        if (board[x][y] == 'K')
        {
            System.out.println("You've found a key! CONGRATS!");
            return true;
        } 
```

Eclipse 注意到我，`i`并且`j`，作为局部变量，它们没有被使用：`The value of the local variable i is not used`。如果我更改`i`并改写`x`，它告诉我我正在重复该变量。

`j++`被标记为`dead code`？

另外，我必须在二维数组的对角线上搜索一种具体类型的元素，如上所述，我一直在尝试使用 2 个 for 循环，但还没有结果。

希望你能帮助我，在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T11:21:38.857

看这个：

```
setPos(x, y);
        if (board[x][y] == 'K')  //no i or j so they are unused. 
        {
            System.out.println("You've found a key! CONGRATS!");
            return true;
        } 
```

* * *

`If I change the i and write the x instead, it tells me that I'm repeating the variable.`

因为 x 已经是一个变量（你的函数参数）。所以你不能再次声明它。

`dead code`：对程序没有影响的代码。[死代码](http://en.wikipedia.org/wiki/Dead_code)

* * *

注意：这不是您问题的解决方案（因为我不知道）。这只是向您展示错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T11:27:23.253

> Eclipse 注意到`i`and `j`，作为局部变量，它们没有被使用

那是因为你没有使用它们。您已经为它们分配了值，并且后来增加（添加到）这些值，但您从未*将*它们用于任何事情。

> `j++`被标记为“死代码”（？）

出于同样的原因，代码会增加 的值`j`，但`j`从未使用过，因此代码什么也不做。“死代码”是指没有目的或从不运行的代码。

* * *

你的循环没有多大意义。例如：

```
for (int i = 0; x < size; i++) { 
```

通常在`for`循环中，控制变量（`i`在这种情况下）应该出现在语句的**所有三个**部分`for`（初始化器、测试和增量）中，如下所示：

```
for (int i = 0; i < size; i++) {
// Change here -^ 
```

但是你没有这样做，你只是`i`在初始化器和增量中使用，而不是在测试（`x < size`）中。你的循环也是如此`j`。

类似地，除非有什么东西改变了, 和/或的值`x`，那么你的循环要么永远不会运行（因为or is already ），要么运行*一次*（因为它发生了），或者它们将永远运行（因为or is and since没有什么改变，他们只是不断循环......）。`y``size``x``y``>= size`*`board[x][u] == 'K'``x``y``< size`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T11:28:10.363

Eclipse 会提示您错误在哪里：

```
for (int i = 0; x < size; i++) {
    for (int j = 0; y < size; j++) { 
```

您迭代`i`and `j`，但您将`x < size`and指定`y < size`为条件。因此，您永远不会真正使用`i`and`j`值，因此`j++`and`i++`是死代码。

如果你真的想使用循环，你应该在 for 循环的条件下使用你用于迭代的变量：

```
for (int i = 0; i < size; i++) { // i instead of x
    for (int j = 0; j < size; j++) { // j instead of y 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T11:29:17.183

> 另外，我必须在二维数组的对角线上搜索一种具体类型的元素，如上所述，我一直在尝试使用 2 个 for 循环，但还没有结果。

为什么不使用单个`for`循环，如下所示：

```
for(int i = 0; i< size; i++)
    if(board[i][i] == 'K')
    {
        System.out.println("You've found a key! CONGRATS!");
        return true;
    } 
```*

# flashdevelop - 'cp' 未被识别为内部或外部命令

> ID：14797136
> 
> 赞同：11
> 
> 时间：2013-02-10T11:18:00.823
> 
> 标签：flashdevelop, haxe, nme

我尝试在 FlashDevelop 中使用自定义构建运行一个项目：

```
$(CompilerPath)\haxe.exe $(ProjectDir)\compile-js.hxml 
```

，但我收到此错误：

'cp' 未被识别为内部或外部命令，

这是compile-js.hxml文件，有什么办法解决这个问题吗？

编译-js.hxml

```
#sources
-main Cocktail
-cp ../../src/
-cp src

#binary
-js bin/js/Main.js
--macro Cocktail.create('src/index.html','Main')

#copy assets directory
-cmd cp -R assets bin\js\ 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-11T04:04:55.503

我猜如果你在 Flashdevelop 上，你在运行 Windows，如果你在运行 Windows，就没有“cp”命令这样的东西。当 haxe 完成构建您的 Javascript 时，它会到达该`-cmd`行并尝试运行`cp -R assets bin\js\`，这将失败，因为 windows 没有`cp`，它有`copy`.

对于 Windows，请尝试将最后两行更改为：

```
#copy assets directory
-cmd copy \y assets bin\js\ 
```

** 免责声明：我目前不在 Windows 中，因此不确定[Copy](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/copy)命令的确切语法。但你明白了。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-07-22T11:25:09.610

[从这里偷来的:)](https://github.com/mschwarzmueller/reactjs-basics/issues/2)

如果您在 Windows 上运行，则必须将“cp”替换为“copy”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-11-19T19:47:19.387

在我的情况下，我使用 Windows 默认命令提示符来安装节点包。我使用[了 GitBash Shell](https://gitforwindows.org/)和**雅虎**......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-07T10:17:01.477

如果您在 Windows Box 中安装了 cygwin，或者使用 UNIX Shell，那么

```
Issue bash#which cp 
```

这将告诉您 cp 是否在您的类路径中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-10T17:25:52.680

您是否在**Windows cmd**上运行，然后按照此操作。**它对我有用！**

webpack -d && 复制 src\index.html dist\index.html && webpack-dev-server --content-base src --inline --hot

在这里找到：[https](https://github.com/mschwarzmueller/reactjs-basics/issues/2#issuecomment-274776347) ://github.com/mschwarzmueller/reactjs-basics/issues/2#issuecomment-274776347 （感谢[medigvijay](https://github.com/medigvijay)）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-20T17:12:39.423

复制 node_modules\laravel-mix\setup\webpack.mix.js .\

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-28T15:49:06.940

如果您在 Python 中遇到此错误，请尝试：

```
import shutil
shutil.copy(source,target) 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-04-19T05:24:02.063

使用该`xcopy`命令有效。

# c# - 数据缓存的使用

> ID：14797137
> 
> 赞同：2
> 
> 时间：2013-02-10T11:18:24.967
> 
> 标签：c#, asp.net

根据 MSDN：“每个应用程序域创建此类的一个实例，只要应用程序域保持活动状态，它就保持有效。有关此类实例的信息可通过对象的 Cache属性`HttpContext`或目的。”`Cache``Page`

据我所知，`HttpContext`对象`Page`生命对单个 http 请求有效。那么当我不能将缓存属性（数据缓存）用于另一个请求时，它有什么用呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T11:24:36.470

MSDN 是正确的：`HttpContext.Cache`为您的整个应用程序生命周期而存在，而不仅仅是在请求中。

`HttpContext`每个请求的生命周期是正确的，但是`Cache`对象在整个应用程序生命周期中都存在。该框架确保在为您`Cache`创建时分配正确的实例`HttpContext`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T11:25:07.970

`HttpContext`并且`Page`可能仅在请求的基础上有效。然而，缓存位于应用程序级别。仅仅因为您可以使用 Cache 访问对象 `HttpContext`，`Page`并不意味着它们具有相同的寿命。

# xml - 如何先更换 标记 使用 xslt 1.0

> ID：14797139
> 
> 赞同：0
> 
> 时间：2013-02-10T11:18:40.263
> 
> 标签：xml, xslt, xslt-1.0, msxsl

该`xsl:apply-templates`指令：

```
<xsl:if test="$item/tcm:Content/em:Office/em:Address">
    <address>
        <xsl:apply-templates mode="renderhtml" select="$item/tcm:Content/em:Office/em:Address/node()" />
    </address>
</xsl:if> 
```

产生：

```
<p>
    My Office Address
    <br />XXXX Road
    <br />XXXX District
    <br />XXXX, XXXX.
    <br />PO Box XXXX
</p> 
```

现在我想将生成的 html 存储在一个变量中，然后调用另一个模板将第一个`<p>`元素替换为`<p property="v:street-address">`，以便最终结果为：

```
<p property="v:street-address">
    My Office Address
    <br />XXXX Road
    <br />XXXX District
    <br />XXXX, XXXX.
    <br />PO Box XXXX
</p> 
```

请推荐！！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T14:08:49.903

[在 XSLT 1.0 中，如果您使用支持函数](http://www.xml.com/pub/a/2003/07/16/nodeset.html)[的`node-set()`](http://www.xml.com/pub/a/2003/07/16/nodeset.html)处理器，您只能捕获输出并将模板应用到该输出。假设你是，你可以这样做：

```
<xsl:if test="$item/tcm:Content/em:Office/em:Address">
    <address>
      <xsl:variable name="addressHtml">
        <xsl:apply-templates mode="renderhtml" 
                             select="$item/tcm:Content/em:Office/em:Address/node()" />
      </xsl:variable>
      <xsl:apply-templates select="msxsl:node-set($addressHtml)" 
                           mode="adjustAddressHtml" />
    </address>
</xsl:if>

...

  <xsl:template match="@* | node()" mode="adjustAddressHtml" name="Identity">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()" mode="adjustAddressHtml" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/" mode="adjustAddressHtml">
    <xsl:if test="p">
      <xsl:call-template name="Identity" />
    </xsl:if>
    <xsl:if test="not(p)">
      <xsl:call-template name="StartingP" />
    </xsl:if>
  </xsl:template>

  <xsl:template match="/p[1]" mode="adjustAddressHtml" name="StartingP">
    <p property="v:street-address">
      <xsl:apply-templates select="@* | node()" mode="adjustAddressHtml" />
    </p>
  </xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T17:46:25.193

如果没有提供源 XML 文档，很难给出完整的答案，但**通常可以避免两次转换的需要**。

**相反，XSLT 代码可以很简单**：

某处：

```
<xsl:apply-templates mode="renderhtml"
         select="$item/tcm:Content/em:Office/em:Address/> 
```

然后：

```
 <xsl:template match="em:Address" mode="renderhtml">
  <address>
      <xsl:apply-templates mode="renderhtml" select="node()" />
  </address>
 </xsl:template>

 <xsl:template match="em:Address/node()" mode="renderhtml">
    <p>
     <xsl:if test="position() = 1">
      <xsl:attribute name="property">v:street-address</xsl:attribute>
     </xsl:if>
       <!-- The code that generates this:
        My Office Address
        <br />XXXX Road
        <br />XXXX District
        <br />XXXX, XXXX.
        <br />PO Box XXXX
         -->
    </p>
 </xsl:template> 
```

# boost - 在堆而不是堆栈上创建的 boost unique_lock 会导致 mingw 崩溃

> ID：14797145
> 
> 赞同：2
> 
> 时间：2013-02-10T11:19:20.200
> 
> 标签：boost, locking, unique

有谁知道为什么 boost 唯一锁对象只能在堆栈上而不是在堆上实例化？

这完美地工作：

```
boost::unique_lock<boost::mutex> lock1(mutex1);
:
wait_condition.wait(lock1); 
```

但这会在使用 mingw 编译后导致 Windows 7 和 Windows 8 上的运行时崩溃：

```
boost::unique_lock *lock1;
lock1 = new boost::unique_lock<boost::mutex>(mutex1);
:
wait_condition.wait(*lock1); 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T22:51:59.977

非常感谢伊戈尔的回复。我正在使用提升 1.52.0。RAII 语句让我思考，然后我意识到我之前应该意识到的：在堆上创建它意味着即使退出创建 unique_lock 的函数，锁也永远不会超出范围。wait返回时重新加锁，函数返回时没有解锁堆锁，导致死锁。在这种情况下崩溃是指“应用程序冻结而不让我关闭它”。

上面的问题就解决了。但是，我现在遇到了一个新问题 :-) 在遵循 RAII 范例并使用堆栈之后，一旦我有 25 个子线程处于等待状态，我的应用程序仍然会崩溃。我不知道为什么。是否有超过 25 个线程在互斥体上等待的 Windows、boost 或 mingw 限制？超过25线程的崩溃比上面更严重；它会因 Windows 错误而正常崩溃：“应用程序被迫以意外方式关闭”。少于 25 个线程不会发生这种情况...

# linux - 获取模式的第一次和第n次出现之间的子字符串

> ID：14797146
> 
> 赞同：1
> 
> 时间：2013-02-10T11:19:32.033
> 
> 标签：linux, shell, sed, awk, substring

我试图在 linux shell 中提取模式的第一次和第 n 次出现之间的子字符串（使用 sed、awk、...）。

示例字符串：

```
AAA_BBBB__CCC__GGGG___fffffffffffffff_hhhh 
```

在第一次出现`"*_"`(n 连接的下划线) 直到第 n 次出现`"*_"`.

例如，第 1 次和第 4 次出现之间的子字符串的结果将是

```
BBBB__CCC__GGGG 
```

使用 sed、awk 或其他工具，最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T12:08:08.293

这是使用`sed`. 这将选择第 1 次和第 n 次出现之间的子字符串。存在的数字采用以下形式`n - 1`：

```
sed 's/^[^_]\+_\+\(\(_*[^_]\+\)\{3\}\).*/\1/' 
```

或者如果您有`GNU sed`：

```
sed -r 's/^[^_]+_+((_*[^_]+){3}).*/\1/' 
```

测试：

```
echo "AAA_BBBB__CCC__GGGG___fffffffffffffff_hhhh" | sed -r 's/^[^_]+_+((_*[^_]+){3}).*/\1/' 
```

结果：

```
BBBB__CCC__GGGG 
```

* * *

* * *

为了好玩，假设您想在从行首开始的任意数量的组之间找到任意长度的子字符串。例如，如果您尝试偏移量为 4，长度为 1，请尝试：

```
sed -r 's/^([^_]+_+){4}((_*[^_]+){1}).*/\2/' 
```

结果：

```
fffffffffffffff 
```

很酷吧？

# sharepoint - 使用 sharepoint server 2013 连接和开发

> ID：14797149
> 
> 赞同：3
> 
> 时间：2013-02-10T11:19:40.943
> 
> 标签：sharepoint, visual-studio-2012, sharepoint-2013

我最近在我们公司设置了一个共享点服务器 2013，并找到了如何使用自定义链接覆盖西装栏的非常好的示例。现在我正在尝试实现这些示例，我已经到了安装 Visual Studio 2012 和 Office 开发工具的地方。当我选择开始一个新项目时，我选择 New Project > Templates > Visual C# > Office/SharePoint > SharePoint Solutions > SharePoint 2013 Empty Project 点击确定，我收到一条错误消息，提示未安装 Sharepoint？我应该安装 VS 2012 并直接开发我的 Sharepoint 2013 服务器吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T11:42:14.213

开发 SharePoint 应用程序的一种非常常见的方法是在您的开发工作站上运行虚拟机（[例如 windows 8 下的 hyper-v ）。](http://www.microsoft.com/en-us/download/details.aspx?id=36188)

您还可以[双引导进入 vhd 文件](http://garvis.ca/2012/06/20/boot-from-vhd/)。

您还可以安装 Windows Server 2012 并使用多种[桌面转换技术之一将其用作工作站上的主要操作系统](http://www.win2012workstation.com/)。

另一种常见的技术是将虚拟机托管在云或数据中心中，同时运行 SharePoint Server 和 Visual Studio。然后使用远程桌面连接到该机器。

通过一些技巧，您可以让 SharePoint 2010 安装程序安装在工作站操作系统上。[这不再适用于 SharePoint 2013。](https://sharepoint.stackexchange.com/q/54292)删除此支持的原因是由于在 Windows 8 中包含从 VHD 和 Hyper-v 启动。

根据我的经验，如果您只是想构建您的应用程序而不是运行或调试它，[那么只需从实际的 SharePoint Server 复制程序集就可以做到这一点](http://msdn.microsoft.com/en-us/library/ff622991.aspx)。我还没有找到 SharePoint 2013 的更新文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T11:25:45.693

是的。您必须直接使用 Visual Studio 在 sharepoint 服务器上进行开发，因为 Sharepoint 服务器 GAC 具有以编程方式与[sharepoint 服务器对象模型一起工作所需的服务器对象模型](http://msdn.microsoft.com/en-us/library/jj164060.aspx#ServerOM)。

[您也可以使用客户端对象模型](http://msdn.microsoft.com/en-us/library/jj164060.aspx#ClientManagedOM)或[WCF 数据服务框架](http://msdn.microsoft.com/en-us/library/jj164060.aspx#WCFDataServices)在客户端机器上进行开发。

# android - 在 viewpager 中获取选项卡标题

> ID：14797153
> 
> 赞同：1
> 
> 时间：2013-02-10T11:20:29.310
> 
> 标签：android, android-viewpager

我已经实现了 ViewPageIndicator 并且运行良好。我有 3 个标签，名称分别为“Tab1”、“Tab2”和“Tab3”。我想要的是滚动选项卡时的选项卡名称。

谁能让我知道如何获取正在显示的当前选项卡的选项卡标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:07:43.803

您可以从以下位置获取当前页面的标题`PagerAdapter`：

```
int currentPage = viewPager.getCurrentItem();
CharSequence pageTitle = pagerAdapter.getPageTitle(currentPage); 
```

# php - 在变量之后直接回显文本

> ID：14797154
> 
> 赞同：4
> 
> 时间：2013-02-10T11:20:31.720
> 
> 标签：php, echo

我有 2 个名为`$min`和的变量`$sec`。

`If $min = 5``$sec = 15`我想打印`"5m 15s"`这个，`echo "$min m $sec s";`

但这给出了“5 m 15 s”。我如何摆脱空白空间？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-10T11:24:26.773

您可以使用大括号来执行此操作，与许多 shell 相同：

```
$min = 7;
$sec = 2;
echo "${min}m ${sec}s"; 
```

它的输出是：

```
7m 2s 
```

在变量的“贪婪”性质会导致问题的情况下，大括号用于从以下文本中描述变量名称。

所以，虽然`$minm`试图给你`minm`变量的内容，但`${min}m`会给你变量的内容，`min`然后是文字`m`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T11:21:43.493

`echo $min."m ".$sec."s";`是一种方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T11:26:24.563

你可以试试这个

```
 echo $min."m ".$sec."s "; 
```

编辑>

```
the output is 
 5m 15s 
```

# ios - 在滚动视图内拖动对象并相应地更改滚动视图的偏移量

> ID：14797156
> 
> 赞同：0
> 
> 时间：2013-02-10T11:20:47.530
> 
> 标签：ios, objective-c, uiscrollview, uipangesturerecognizer

我想在我的应用程序中实现苹果的默认图标排列过程。

在 iPhone/iPod 主屏幕中，当您拖动图标时，如果该图标出现在右上角，则滚动视图会自动移动并进入下一页。

我想在我的应用程序中实现该功能。

我在滚动视图中插入了 3 个视图，并且正在使用 UIPanGestureRecognizer 移动视图，并且想要在视图到达右上角时移动该滚动视图。

我对此进行了验证并在该子视图到达右上角时更改了滚动视图的 contentOffset 但问题是当滚动视图更改其偏移量时，我对该视图的控制已被删除并且

```
[gestureRecognizer state] == UIGestureRecognizerStateEnded 
```

正在自动调用。

有人知道应用程序是如何实现该功能的吗？

我该如何实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T20:09:57.423

具有相同功能的类似项目在这里

[https://github.com/heikomaass/HMLauncherView](https://github.com/heikomaass/HMLauncherView)

你可以用它来制作你的应用程序。*（如果您需要专门解决您的问题......提供您的触摸方法的代码）*

# android - 使用返回的结果修改listview bu android中的另一个活动

> ID：14797169
> 
> 赞同：0
> 
> 时间：2013-02-10T11:22:00.917
> 
> 标签：android, listview, android-intent, arraylist, activity-lifecycle

我对如何在我的 android 应用程序中实现以下内容感到非常困惑。让我解释一下我想要的功能：

-我在我的第一个活动中有一个列表视图，比如活动 A

-现在，从这个活动中，我开始另一个活动（活动 B），目的是获得结果。

- 根据我从 B 获得的结果，我想更新活动 A 中的列表视图。

- 那就是在列表视图中添加一个带有返回字符串的项目。

我正在考虑，将项目存储在数组列表中并将数组列表设置为列表视图的数组适配器。

现在，当活动 B 返回结果时，我修改了数组列表并再次将其设置为列表视图。我想知道，有可能吗？？我还有一个问题：活动 B 什么时候返回？这样在活动 A 的哪些方法（例如 onResume()、onStart()、onRestart() ）中我应该编写修改列表视图的逻辑......？我对android开发很陌生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T11:33:21.607

关于你的第一个问题，我认为你是在正确的轨道上。您可以将返回的字符串添加到 ArrayList，然后添加到 ArrayAdapter。

对于您的第二个问题，通过查看此处的活动流程图，您将清楚地了解它是如何工作的：http: [//developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

# clojure - Clojure :: 类似 lint 的提示

> ID：14797172
> 
> 赞同：4
> 
> 时间：2013-02-10T11:22:19.160
> 
> 标签：clojure

我今天发现了一个错误，该错误最终是由我的代码中某处的以下片段引起的（我试图在列表中仅过滤“主键”约束）：

```
(filter #(= (% :constraint_type "PRIMARY KEY")) aListOfconstraints) 
```

而不是正确的：

```
(filter #(= (% :constraint_type) "PRIMARY KEY") aListOfconstraints) 
```

即错误是在未找到密钥的情况下采用默认参数的映射的组合效果，如：

```
({:a 1 :b 2} :a 0) 
```

... 以及仅接受一个参数并返回 true 的 equal 函数：

```
(= 1) ; evals to true 
```

有没有我可以使用的工具来提示我输入这种有效但可疑的代码？或者也许是我不知道的一些最佳实践？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T11:43:51.443

您正在寻找的最佳实践是检查代码的正确行为的单元测试。

对于 lint 工具，您可以查看[Eastwood](https://github.com/jonase/eastwood)，但在您的情况下，很难提供可以广泛使用的自定义检查。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-10T12:21:13.070

您可以查看[kibit](https://github.com/jonase/kibit/) - 工具，该工具尝试使用构建在`core.logic`. 添加新规则应该不是那么难，但是这个工具也有限制 - 参见项目的描述。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-10T12:22:18.780

如果你有这种问题，最好使用右缩进。在你的情况下

```
(filter #(= (% :constraint_type)
            "PRIMARY KEY")
        aListOfconstraints) 
```

如果你有

```
(filter #(= (% :constraint_type "PRIMARY KEY")
            )
        aListOfconstraints) 
```

你显然可以注意到一个错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-05T01:34:07.873

早先的答案中提到的 Eastwood 现在能够在 2014 年初解决您的特定问题以及其他几种问题。看看：[https ://github.com/jonase/eastwood](https://github.com/jonase/eastwood)

# css - 为什么在这种情况下我需要 z-index？

> ID：14797176
> 
> 赞同：0
> 
> 时间：2013-02-10T11:22:44.487
> 
> 标签：css, position, overflow, z-index

我想让一个 div（位置固定）隐藏在指定区域之外。这正是我所做的：

```
<div id="div1" style="position:relative; overflow:hidden;">
     <div id="div2" style="position:relative; z-index:10;">
          <div id="div3" style="position:fixed"> </div>
     </div>
</div> 
```

[这是一个例子。](http://jsfiddle.net/wS5Rx/2/)（仅限火狐）

但我不明白为什么`#div2`需要`z-index`财产？

另外，iirc，我的示例曾经在 Chrome 上工作，但现在不行。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T11:25:50.530

我在这里假设 div2 的 z-index 比 div3 更大，这将导致部分 DIV3 不重叠或通过 div2/div1 显示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T12:23:19.953

[http://jsfiddle.net/wS5Rx/4/](http://jsfiddle.net/wS5Rx/4/)

固定元素完全不受溢出的影响，因此您需要做的是添加一些 JS 使其在到达滚动时消失

```
$(window).scroll(function() {
    if ($(this).scrollTop() > 200) {
        $('#div3').css({
            'display': 'none'
        });
    }else{
        $('#div3').css({
            'display': 'block'
        });        
    }

}); 
```

# c - 在 gcc 中激活 int - float 操作的警告

> ID：14797178
> 
> 赞同：0
> 
> 时间：2013-02-10T11:22:56.677
> 
> 标签：c, gcc

有没有办法在 gcc 中激活所有有 int - float 操作的警告？我有一个包含许多算术运算的旧代码，我注意到有很多这样的情况：

```
int a, b, c;
double x, y, z;
y = a + x*b + c/z; 
```

用我 ide 的“搜索”工具跟踪所有这些情况并不容易，因为代码真的很长、很神秘、很复杂（前面的例子只是为了找出问题所在）！所以，我想知道 gcc 中是否有一个***“-Wsomenthing”***可以帮助我完成这项苦差事。

**添加**

在 -Wconversion 处于活动状态时，我没有收到任何警告

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T11:25:58.573

可能没有这种方法，但您的问题是 GCC 扩展或插件的典型案例。

您可以使用 C 中痛苦编码的插件扩展 GCC（4.6 版或更高版本）。您可以更轻松地使用 MELT 扩展 GCC，[MELT](http://gcc-melt.org/)是一种用于扩展 GCC 的高级域特定语言。

^(GCC 4.5 可以通过插件进行扩展，但插件支持在 4.5 中较差，在 4.6 或 4.7 或即将发布的 4.8 中更好)

如果您使用 MELT，您可能想使用它，`walk_gimple_seq_unique_tree`然后将当前 gimple 与`gimple_assign_cast`.

^(编写这样的 MELT 扩展可能会花费您一天以上的时间；问题是 GCC 很复杂，您需要部分了解其内部表示（Gimple）及其传递机制。如果您有一个大型代码库，自定义编译器仍然值得付出努力。)

[在gcc-melt@googlegroups.com](https://groups.google.com/forum/?fromgroups#!forum/gcc-melt)上询问 MELT 特定问题

# asp.net - 从内容页面更新母版页图像

> ID：14797179
> 
> 赞同：3
> 
> 时间：2013-02-10T11:22:58.187
> 
> 标签：asp.net, master-pages

在内容页面之间切换时，已多次尝试更新母版页 div 中的图像。我首先尝试创建一个母版页属性，我可以通过声明“MasterType VirtualPath=”从内容页的 Page Load 事件中更新该属性，但由于此时已经加载了母版页，因此它无法正常工作。当我在母版页的页面加载事件中设置 ImageUrl 时它确实有效（如果 !Page.IsPostBack 然后设置图像的 url 属性），所以我知道它可以工作，但我需要为我访问的每个内容页面更改图像。

然后我尝试在加载内容页面之前使用主菜单按钮单击事件来设置 ImageUrl 但这也没有效果。我看到一个线程建议使用 UpdatePanel 来保存图像，所以我可以尝试下一个。这样做的最佳方法是什么..？？

如果更好的方法是将图像放在内容 div 中，并从 master 更新它，我不会感到惊讶。任何建议或链接都​​将受到欢迎。如果有人想看看，我可以发布代码。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T12:31:55.093

I don't know why you found it difficult. There are many ways to do this but I'll only show one. I just tested this and it worked. How?

In your master page, define your image and add `runat="server"`

```
<img src="put your default image.jpg" runat="server" id="changingImage" /> 
```

In your content pages, do this

```
protected void Page_Load(object sender, EventArgs e)
{
    HtmlImage img = Master.FindControl("changingImage") as HtmlImage;

    img.Src = "~/images/imageForContentPage1.jpg"; //replace this image based on your criteria

} 
```

Possible exception is `Null Reference` when the name of the image control specified in `.FindControl` could not be found. Make sure it's exactly as you named it in the Master Page. And to prevent a Null Reference Exception, wrap a check around

```
if(img != null)
{
    img.Src = "~/images/imageForContentPage1.jpg";
} 
```

# java-me - 检查诺基亚设备上是否安装了应用程序？

> ID：14797182
> 
> 赞同：2
> 
> 时间：2013-02-10T11:23:03.497
> 
> 标签：java-me, lwuit, nokia

我尝试检查设备上是否安装了应用程序。在黑莓中，我可以做到

```
CodeModuleManager.getModuleHandle("applicationName"); 
```

如何在诺基亚设备上执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:41:31.957

您可以尝试以下代码：

```
String platform = System.getProperty("microedition.platform");
boolean isNokia = false;

if (platform != null) {
  platform = platform.toLowerCase();
  isNokia = platform.indexOf("nokia") >= 0;
} 
```

[http://www.developer.nokia.com/Community/Wiki/System_property_microedition.platform_values_for_Symbian_devices](http://www.developer.nokia.com/Community/Wiki/System_property_microedition.platform_values_for_Symbian_devices)

# sql - 为多行和非唯一列创建删除语句

> ID：14797184
> 
> 赞同：1
> 
> 时间：2013-02-10T11:23:19.237
> 
> 标签：sql, database, sqlite

帮我为sqlite db写delete语句

```
'rating' table schema (rID, mID, rate, pub) 
```

此查询将仅返回一个元组

```
select * from rating
where rID = 101 and mID=678 and rate = 34.5 and pub='2012-11-03' 
```

表中的所有列都是非唯一的

这些查询不起作用

```
delete from rating where rID,mID, rate, pub in 
    (select * from rating where rID = 101 and mID=678 and rate = 34.5 and pub='2012-11-03')

delete from rating where rID=G.rID,mID=G.mID, rate=G.rate, pub=G.pub
    (select * from rating where rID = 101 and mID=678 and rate = 34.5 and pub='2012-11-03') as G 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T11:49:45.847

这有什么问题吗？

```
delete from rating
where rID = 101 
and mID=678 
and rate = 34.5 
and pub='2012-11-03' 
```

任何 select 语句都可以转换为 delete 语句，该语句影响与从 select 返回的行相同的行。实际上，这是测试将删除哪些行的好方法。

# gcc - gcc 编译和组装

> ID：14797187
> 
> 赞同：1
> 
> 时间：2013-02-10T11:23:52.020
> 
> 标签：gcc, assembly, compilation, x86

我正在尝试使用 gcc 创建一个可执行文件。我有两个文件 virtualstack.c（它由下面的 C 代码组成）和 stack.s，它由用 AT&T 语法编写的 intel x86 汇编代码组成（见下面的 C 代码）。我的命令行命令是`gcc -c virtualstack.c -s stack.s`，但出现两个错误（stack.s 中的第 3 行）-`missing symbol name in directive`和`no such instruction _stack_create`. 我以为我已经在程序集中正确声明了 C 中的函数，前缀为下划线 ( `_`)。我将非常感谢任何评论。

C代码：

```
#include <stdio.h>
#include <stdlib.h>

extern void stack_create(void);

int main(void)
{
stack_create();

return 0;
} 
```

汇编代码：

```
.global _stack_create
    .type, @function

_stack_create
pushl   %ebp
movl    $5, %esp
movl    %esp, ebp
movl    $21, %edx
pushl   %edx 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T12:55:55.420

我将尝试向您解释如何调查此类案件的方法。

1）让编译器为你工作总是个好主意。所以让我们从代码开始（我们称之为 assemble.c）：

```
 #include <stdio.h>
    #include <stdlib.h>

    /* stub stuff */
    void __attribute__ ((noinline))
    stack_create(void) { }

    int
    main(void)
    {
      stack_create();
      return 0;
    } 
```

现在用`gcc -S -g0 assemble.c`. stack_create 函数被组装成（你的结果可能会有所不同，所以请自行按照我的说明进行操作）：

```
 .text
  .globl  stack_create
  .type stack_create, @function
stack_create:
  pushq %rbp
  movq  %rsp, %rbp
  popq  %rbp
  ret
  .size stack_create, .-stack_create 
```

2) 现在你只需要使用这个模板并用你的东西填充它：

```
 .text
  .globl  stack_create
  .type stack_create, @function
stack_create:
  pushq %rbp
  movq  %rsp, %rbp

  ;; Go and put your favorite stuff here!
  pushl   %ebp
  movl    $5, %esp
  movl    %esp, ebp
  movl    $21, %edx
  pushl   %edx
  ... etc ...

  popq  %rbp
  ret
  .size stack_create, .-stack_create 
```

当然，让它成为单独的`.s`文件，比如 stack.s。

3) 现在让我们一起编译。从 assemble.c 中删除存根内容并将所有内容编译为：

```
gcc assemble.c stack.s 
```

我没有错误。我相信你也不会出错。

主要教训：永远不要尝试在汇编器中编写诸如节、函数标签等细节。编译器更好地知道如何去做。用他的知识代替。

# path - 未找到 Cygwin ls 命令

> ID：14797194
> 
> 赞同：68
> 
> 时间：2013-02-10T11:25:02.963
> 
> 标签：path, cygwin, ls

这是我在我的技术博客上自我回答的一个问题，在那里我保留了我需要不时给自己的技术提示，所以我决定把它移到这里。原始博客文章在这里：[http ://thehacklist.blogspot.com/2009/04/cygwin-ls-command-not-found.html](http://thehacklist.blogspot.com/2009/04/cygwin-ls-command-not-found.html)

如果您是 linux 爱好者并且真的很怀念 windows 盒子上的 greps 和 sed/awks，那么您可能已经安装了[cygwin](http://www.cygwin.com/)。您尝试通过双击桌面上的 cygwin 图标或目录`cygwin.bat`中的文件来运行它`C:\cygwin`并得到`bash-3.X$`提示。但是，尽管`pwd`or`cd`命令有效，但如果您尝试`ls`，它会显示：`ls: command not found`。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-02-10T11:25:02.963

1.  右键单击“我的电脑”-> 属性-> 高级-> 环境变量
2.  添加一个新的环境变量，调用`CYGWIN_HOME`并将其值设置为`C:\cygwin`
3.  编辑 PATH 环境变量并添加`%CYGWIN_HOME%\bin`到它（通常用';'分隔）。
4.  只需单击确定，退出您可能打开的任何命令提示符或 bash shell（通过 cygwin），然后再次打开它 - 它会工作！

假设 - 这假设您已将 cygwin 安装在`C:\cygwin`. 如果您将其保存在其他地方，请相应地修改上述内容。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-10T11:34:36.393

检查 cygwin.bat 文件，它应该有如下内容：

```
set PATH=C:\cygwin\bin;C:\cygwin;%PATH%
...etc
bash --login -i 
```

（你实际上并不需要 c:\cygwin，但我有一些额外的脚本/bat 文件；关键是 c:\cygwin\bin）

# javascript - Highcharts：针后面的 VU 表文本标签

> ID：14797201
> 
> 赞同：0
> 
> 时间：2013-02-10T11:25:34.460
> 
> 标签：javascript, highcharts

我无法在 VU 表针上方找到文本标签。
文本标签现在部分隐藏在针下。
示例：[http://postimage.org/image/sskyqrndh/](http://postimage.org/image/sskyqrndh/)
代码： http: [//pastebin.com/DmmV6A63](http://pastebin.com/DmMV6A63)

有人知道我如何将标签文本推到针上方吗？
我尝试了 yaxis.margin、yaxis.offset 等，但它们似乎没有移动文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T20:32:25.877

您可以使用 yaxis 标题`y`选项移动 yaxis 标签：

```
title: {
  text: 'Some Text',
  align: 'middle',
  y: -110 // adjust this
} 
```

这会产生：

![在此处输入图像描述](../Images/5f57239bfb0c44a8828df8fb22a199ba.png)

示例小提琴[在这里](http://jsfiddle.net/aSvFB/)。

# c++ - C++ RegEx 内存不足

> ID：14797203
> 
> 赞同：0
> 
> 时间：2013-02-10T11:25:46.567
> 
> 标签：c++, regex, visual-c++

我正在使用正则表达式从 html 页面中的 div 之间检索字符串，但是我遇到了内存不足错误。我正在使用 Visual Studio 2012 和 C++。

正则表达式 is`"class=\"ListingDescription\">((.*|\r|\n)*?(?=</div>))"`并且 regxbuddy 估计它需要 242 步（比原来的 ~5000 步要好得多）。我试图从中删除信息的网站是[http://www.trademe.co.nz/Browse/Listing.aspx?id=557211466](http://www.trademe.co.nz/Browse/Listing.aspx?id=557211466)

这是代码：

```
typedef match_results<const char*> cmatch;
tr1::cmatch results;
try {
    tr1::regex regx("class=\"ListingDescription\">((.*|\\r|\\n)*?(?=</div>))");

    tr1::regex_search(data.c_str(), results, regx);

        cout << result[1];

} 
catch (const std::regex_error& e) {
    std::cout << "regex_error caught: " << e.what() << '\n';
    if (e.code() == std::regex_constants::error_brack) {
        std::cout << "The code was error_brack\n";
       }
} 
```

这是我得到的错误：

```
regex_error caught: regex_error(error_stack): There was insufficient memory to d
etermine whether the regular expression could match the specified character sequ
ence. 
```

Regexbuddy 工作正常，一些在线正则表达式工具也能正常工作，但不是我的代码 :( 请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T11:32:54.617

您`.`在可能发生多次的地方使用 a ，因此它将匹配 all `<`，包括 before `</div>`，这可能是您不想要的。

现在强制链接[RegEx 匹配除了 XHTML 自包含标签之外的开放标签](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。

使用正则表达式解析 HTML*通常*是个坏主意。您应该改用HTML[解析器](https://stackoverflow.com/questions/489522/library-recommendation-c-html-parser)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T03:18:46.433

我现在明白了。正则表达式在某些领域非常有限。我将看看解析器并尝试一下。我在此期间所做的是：

```
std::string startstr = "<div id=\"ListingDescription_ListingDescription\" class=\"ListingDescription\">";
unsigned startpos = data.find(startstr) + strlen(startstr.c_str()); 
unsigned endpos = data.find("</div>",
startpos); 
std::string desc = data.substr (startpos,endpos - startpos); 
```

大声笑，我知道它不是很好，但它有效。

谢谢克莱门特·贝洛特

# apache - mod rewrite 不适用于 laravel 和 bitNami

> ID：14797206
> 
> 赞同：4
> 
> 时间：2013-02-10T11:25:58.000
> 
> 标签：apache, mod-rewrite, wamp, laravel, bitnami

http.conf 有 mod rewrite 未注释

所以没有自定义路线在#laravel 有人提到这将是因为mod rewrite 在这里不起作用是我的设置：

laravel.conf 有以下代码：

```
Alias /laravel/ "C:\BitNami/frameworks/laravel/public/"
Alias /laravel "C:\BitNami/frameworks/laravel/public"

<Directory "C:\BitNami/frameworks/laravel/public">
Options +MultiViews
AllowOverride None
<IfVersion < 2.3 >
Order allow,deny
Allow from all
</IfVersion>
<IfVersion >= 2.3>
Require all granted
</IfVersion>
</Directory> 
```

如果我取消注释这些行：

```
#RewriteEngine On
#RewriteRule ^/$ /laravel/ [PT] 
```

然后主要路线将映射到

```
http://localhost/ 
```

而不是

```
http://localhost/laravel 
```

这是可取的，但次要于主要问题

公共文件夹内的 .htaccess 有这个：

```
<IfModule mod_rewrite.c>
    Options +FollowSymLinks
RewriteEngine On
 RewriteBase /laravel
 </IfModule>

 <IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule> 
```

这是我在 routes.php 中的测试代码：

```
Route::get('test',function(){
return 'test worked';
}); 
```

这应该解决

```
http://localhost/laravel/test 
```

但我得到一个 404 错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-28T16:00:19.080

您的 .htaccess 文件应如下所示。

```
<IfModule mod_rewrite.c>
    <IfModule mod_negotiation.c>
        Options -MultiViews
    </IfModule>

    RewriteEngine On

    # Redirect Trailing Slashes...    
    RewriteRule ^(.*)$ public/$1 [L]

    # Handle Front Controller...
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^ index.php [L]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T13:08:31.847

RewriteBase 和 RewriteEngine 被定义了两次。使您的 .htaccess 文件如下所示：

```
<IfModule mod_rewrite.c>
    Options +FollowSymLinks
    RewriteEngine On
    RewriteBase /laravel
</IfModule>

<IfModule mod_rewrite.c>
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule> 
```

如果可能，最好改用 Apache 虚拟主机。

# jquery - appendTo 后如何绑定函数

> ID：14797210
> 
> 赞同：0
> 
> 时间：2013-02-10T11:26:18.140
> 
> 标签：jquery, bind, appendto

我正在尝试在 ajax 调用（数据）完成将数据加载到我的 div 后立即做某事：

```
$(data).find('a').appendTo('#DIV').bind(function(e){

$(this).prop('href', function(_, href){
    url = href.split('/');          
    return href.replace(url[2], 'someUrl');
})   

}); 
```

因此，在 appendTo 之后，我进行了 href 拆分和替换。它不起作用，这意味着数据被加载但绑定的函数拆分/替换没有赶上。我还能尝试什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T11:31:02.613

无需 bind() .. bind() 用于事件.. 只需立即使用 prop() ..

试试这个

```
 $(data).find('a')
        .appendTo('#DIV')
        .prop('href', function(_, href){ 
                  url = href.split('/');
                  return href.replace(url[2], 'someUrl');
                  }); 
```

# asp.net - 如何在 Asp.Net 中创建 Zip 文件？

> ID：14797212
> 
> 赞同：2
> 
> 时间：2013-02-10T11:26:24.487
> 
> 标签：asp.net

在 ASP.NET 2.0 中，我们需要获取多个文件夹及其文件。我们的要求是获取所有文件夹并需要创建一个 zip 文件。任何人都可以在这方面帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T15:20:36.030

查看[DotNetZip](http://dotnetzip.codeplex.com/) - 它非常灵活，性能对于生产环境来说绰绰有余。

[Scott Mitchell 有一个在 ASP.Net 环境中使用 DotNetZip 进行压缩的绝佳示例](http://www.4guysfromrolla.com/articles/092910-1.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T13:09:32.183

1.  下载[SharpZipLib](http://www.icsharpcode.net/OpenSource/SharpZipLib/Download.aspx)，它是比较流行的 zip 库之一
2.  添加对 ICSharpCode.SharpZipLib.dll 的引用

您可以在下载 SharpZipLib 时浏览代码示例，以了解如何压缩和解压缩文件，这是一个示例：

```
 public static void Main(string[] args)
    {
        ZipFiles("D:\\SharpZip","D:\\Zipped.zip");
    }

    private static void ZipFiles(string inputDirectory, string outputDirectory)
    {
        if (Directory.Exists(inputDirectory))
        {
            string[] filenames = Directory.GetFiles(inputDirectory);

            using (ZipOutputStream zipStream = new ZipOutputStream(File.Create(outputDirectory)))
            {
                zipStream.SetLevel(9);
                byte[] buffer = new byte[4096];

                foreach (string file in filenames)
                {
                    ZipEntry entry = new ZipEntry(Path.GetFileName(file));
                    entry.DateTime = DateTime.Now;
                    zipStream.PutNextEntry(entry);
                    using (FileStream fs = File.OpenRead(file))
                    {
                        int sourceBytes;
                        do
                        {
                            sourceBytes = fs.Read(buffer, 0, buffer.Length);
                            zipStream.Write(buffer, 0, sourceBytes);
                        } while (sourceBytes > 0);
                    }
                }
                zipStream.Finish();
                zipStream.Close();
            }
        }
    } 
```

# ios - popViewControllerAnimated 上出现后退按钮：YES

> ID：14797215
> 
> 赞同：0
> 
> 时间：2013-02-10T11:26:36.317
> 
> 标签：ios, uinavigationbar, back-button, popviewcontrolleranimated

我正在制作一个应用程序，我在其中创建了自定义导航栏 - **MyNavigationBar**（扩展 UIView）：

***MyNavigationBar.xib***：

![该自定义视图的笔尖](../Images/d88374ca4b18b76d80446be0f045e749.png)

***我的导航栏.m***：

```
 +(id)navigationBar{
    MyNavigationBar * bar = (MyNavigationBar *) [[[NSBundle mainBundle] loadNibNamed:@"MyNavigationBar" owner:self options:nil] objectAtIndex:0];
    return bar;
} 
```

然后在**NavigationViewController**实现中，我使用此代码将上面显示的视图添加到**navigationBar**：

***导航视图控制器.m***：

```
 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        _navBar = [MyNavigationBar navigationBar];
        [self.navigationBar addSubview:_navBar];
    }
    return self;
} 
```

当按下左按钮（**MyNavigationBar**的子视图）时

```
[[self navigationController] popViewControllerAnimated:YES]; 
```

叫做。

问题是在弹出动画故障发生时，它看起来像这样：

![在此处输入图像描述](../Images/85632b56ea58c91e6d5462b662b2ca07.png)![在此处输入图像描述](../Images/396bafa02281cddc8624baacaf852d40.png)

后退按钮在所有动画持续时间内变为可见，然后消失。

我已经尝试过了，但没有任何反应：

```
[_navigationBar.backItem setHidesBackButton:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T11:36:53.673

尝试将 navigationItem.titleView 设置为您的自定义 UIView 或使用 [UINavigationBar 外观] 和 [UIBarButtonItem 外观] API 来自定义标准控件，而不是向导航栏添加自定义子视图。

# ios - 如何使用 AFNetworking 对 api 调用进行单元测试

> ID：14797216
> 
> 赞同：4
> 
> 时间：2013-02-10T11:26:39.900
> 
> 标签：ios, afnetworking, kiwi

我有一个正在开发的 iOS 应用程序，它连接到第三方网络服务。我有大约 50 个不同的调用，并且想使用 Kiwi 编写单元测试，但我不知道从哪里开始。

由于我不对 API 负责，因此我只需使用正确的 GET 或 POST 方法检查我的调用是否指向正确的 URL。

有什么方法可以正确测试吗？

这是我的一个电话的例子：

```
+ (void)listsForUser:(NSString *)username
            response:(void (^)(NSArray *lists))completion
{
    NSString *path = [NSString stringWithFormat:@"user/list.json/%@/%@", TRAKT_API_KEY, username];
    [TNTraktAPIManager requestWithMethod:GET
                                    path:path
                              parameters:nil
                                callback:^(id response) {
                                    completion(response);
                                }];
} 
```

它调用以下辅助方法

```
+ (void)requestWithMethod:(HTTPMethod)method
                     path:(NSString *)path
               parameters:(NSDictionary *)params
                 callback:(void (^)(id response))completion
{
    NSString *methodString = @"POST";
    if (method == GET) {
        methodString = @"GET";
    }

    // Setup request
    NSURLRequest *request = [[TraktAPIClient sharedClient] requestWithMethod:methodString
                                                                        path:path
                                                                  parameters:params];

    // Setup operation
    AFJSONRequestOperation *operation =
    [AFJSONRequestOperation JSONRequestOperationWithRequest:request
                                                    success:^(NSURLRequest *request,
                                                              NSHTTPURLResponse *response,
                                                              id JSON) {
                                                        id jsonResults = JSON;
                                                        completion(jsonResults);

                                                    } failure:^(NSURLRequest *request,
                                                                NSHTTPURLResponse *response,
                                                                NSError *error,
                                                                id JSON) {

                                                        id jsonResults = JSON;
                                                        completion(jsonResults);
                                                        NSLog(@"%s: error: %@", __PRETTY_FUNCTION__, error);

                                                    }];
    // TODO: Queue operations
    [operation start];

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T23:25:04.893

如果您`shouldEventually`对助手类设置期望并使用`receive:(SEL)withArguments:(id)...`表单，那么您可以检查收到的参数是否是您期望的。

两个值得了解的陷阱是在打电话*之前设定期望；*并使用`shouldEventually`表格而不是`should`使测试延迟足够长的时间以进行呼叫。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-18T23:39:42.233

我强烈建议您查看[OHHTTPStubs](https://github.com/AliSoftware/OHHTTPStubs)以对您的 API 类进行单元测试。

单元测试应该是确定性的，并且将 Internet 一个潜在不可预测的 API 添加到组合中会使测试条件不确定。

OHTTPStubs 将允许您对传出的 HTTP 请求的响应进行存根。基本上，它会拦截您的 HTTP 流量，如果请求符合您设置的标准，它会给出您在 JSON 中声明的预设响应（而不是来自 API 的不可预测的结果）。这允许您在测试类中配置不同的响应场景：即。404 错误、部分响应数据等。在您的测试中使用。

这是一个例子：

我创建了这个 JSON Stub 并保存为 JSON 文件：

```
{
    "devices" :     [
                   {
                     "alarm" :            {
                     "alarm_id" : 1,
                   "attack_time" : "<null>",
                   "defined_time" : "2014-04-14T04:21:36.000Z",
                   "device_id" : 7,
                   "is_protected" : 0
                   },
                   "device_type" : "iPhone",
                   "id" : 7,
                   "os_version" : "7.1"
                   }
                   ],
    "email" : "mystubemail@gmail.com",
    "facebook_id" : 5551212,
    "id" : 3,
    "name" : "Daffy Duck"
} 
```

每当我在 API 调用中发出网络请求时，都会返回此 JSON，因为此 OHHTTPStub 在测试类中声明为在所有测试之前运行。

```
[OHHTTPStubs stubRequestsPassingTest:^BOOL(NSURLRequest *request) {
            BOOL stringFound;

            if ([[request.URL description] rangeOfString:[NSString stringWithFormat:@"%@devices/register?", BASEURL]].location != NSNotFound)
            {
                stringFound = YES;
            }
            NSLog(@"%d", stringFound);

            return stringFound;

        } withStubResponse:^OHHTTPStubsResponse*(NSURLRequest *request) {
            // Stub it with our "RegisterDevice.json" stub file

            return [[OHHTTPStubsResponse responseWithFileAtPath:OHPathForFileInBundle(@"RegisterDevice.json",bundle)
                                                     statusCode:200 headers:@{@"Content-Type":@"text/json"}] requestTime:1.0 responseTime:1.0];
        }]; 
```

我不确定 Kiwi 是否允许异步测试，但如果不允许，我还建议您研究 Specta 和匹配的框架 Expecta。它们允许超级简单的异步单元测试，当与 OHHTTPStubs 结合使用时，可以提供单元测试 API 调用所需的一切。

# mongodb - 您可以在 Mongo 中将子字段与 $all 匹配吗？

> ID：14797219
> 
> 赞同：1
> 
> 时间：2013-02-10T11:27:14.050
> 
> 标签：mongodb, pymongo, mongodb-query

我有一个文档集合，每个文档如下所示：

```
{'name' : 'John', 'locations' : 
   [
     {'place' : 'Paris',  'been' : true}
     {'place' : 'Moscow', 'been' : false}
     {'place' : 'Berlin', 'been' : true}
   ]
} 
```

位置数组可以有任何长度。

我想匹配数组`been`中所有元素的字段为真的文档。[查看文档](http://docs.mongodb.org/manual/reference/operator/all/)看起来我应该以某种方式使用[$and](http://docs.mongodb.org/manual/reference/operator/all/)但我不确定它是否适用于子字段。`locations`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T12:53:55.500

有几种选择：

*   使用 $ne：`db.destinations.find({"locations.been":{$ne:false}})`
*   在保存文档之前更改您的业务逻辑以预先计算该值。否则，此搜索必须查看所有记录，然后查看所有地点。这个值可以被索引。
*   使用 $where 运算符，但要了解[性能](http://docs.mongodb.org/manual/reference/operator/where/#_S_where)影响。它可能需要全表扫描。在这种情况下，它会。
*   使用过滤器逻辑编写一个[map-reduce](http://docs.mongodb.org/manual/applications/map-reduce/)函数，并且只发出那些有效的函数。您需要根据文档逐步更新它。
*   [使用聚合](http://docs.mongodb.org/manual/tutorial/aggregation-examples/)框架编写查询。[这里](http://docs.mongodb.org/manual/reference/sql-aggregation-comparison/)有很多很好的例子。尽管与其他解决方案一样，这最终可能会遍历整个集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T11:59:29.523

`$elemMatch`我认为不可能使用像or之类的标准 MongoDB 运算符`$all`。唯一可能的方法是编写自定义 JS 查询：

```
db.test.find("return this.locations.every(function(loc){return loc.been});") 
```

# c# - 复选框以（取消）选中所有其他复选框

> ID：14797220
> 
> 赞同：2
> 
> 时间：2013-02-10T11:27:16.647
> 
> 标签：c#, winforms, checkbox

我创建了一个 Windows 表单，它（到目前为止）只包含复选框。构造函数接受一个参数：`string[] attributes`. 对于这个`attributes`数组中的每个字符串，我创建一个复选框。

例如：

```
string[] attributes = {
                          "Black",
                          "Red",
                          "Blue"
                      };
form1 = new MyForm(attributes);
form1.Show(); 
```

将像这样创建复选框：

```
[ ] Black
[ ] Red
[ ] Blue 
```

这工作得很好。现在我的下一步是创建一个复选框“Check All”，它具有以下行为。我将使用`this`我的*“检查所有”复选框*。

什么时候：

*   用户检查`this`：检查所有其他复选框。
*   用户取消`this`选中：所有其他复选框都未选中。
*   所有其他复选框都被手动选中：`this`也被选中。
*   所有复选框都被选中，其中任何一个都未被选中：`this`也未被选中。

我设法完成了上述所有规则，但遇到了一个问题，我不知道如何解决它：当所有复选框都被选中并且用户取消选中一个复选框时，这意味着我的*“全部选中”复选框*将被取消选中也。现在我的*“全选”复选框*未被选中，它会自动调用取消选中事件，然后取消选中所有复选框，就像用户未选中我的*“全选”复选框*一样。

那么有没有办法告诉我的复选框`CheckedChanged`在另一个复选框调用取消选中时不运行？

这是我的代码（都是手工编写的，所以没有使用视觉工作室设计师）：

```
using System;
using System.Drawing;
using System.Windows.Forms;

class MyForm
{
    public MyForm(string[] attributes)
    {
        SpawnControls(attributes);
    }

    private CheckBox[] m_attributes;
    private CheckBox m_all;

    private void SpawnControls(string[] attributes)
    {
        CheckBox dummy = new CheckBox();
        int nAttr = attributes.Length;

        m_attributes = new CheckBox[nAttr];
        for (int i = 0; i < nAttr; i++)
        {
            m_attributes[i] = new CheckBox();
            m_attributes[i].Text = attributes[i];
            m_attributes[i].Location = new Point(5, dummy.Height * i);
            m_attributes[i].CheckedChanged += attribute_CheckedChanged;
            Controls.Add(m_attributes[i]);
        }

        m_all = new CheckBox();
        m_all.Text = "Check All";
        m_all.Location = new Point(5, m_attributes[nAttr - 1].Bottom);
        m_all.CheckedChanged += all_CheckedChanged;
        Controls.Add(m_all);
    }

    private void attribute_CheckedChanged(object sender, EventArgs e)
    {
        if (((CheckBox)sender).Checked)
        {
            foreach (CheckBox cb in m_attributes)
            {
                if (cb.Checked == false)
                {
                    return;
                }
            }
            m_all.Checked = true;
        }
        else if (m_all.Checked)
        {
            m_all.Checked = false;
        }
    }

    private void all_CheckedChanged(object sender, EventArgs e)
    {
        if (m_all.Checked)
        {
            foreach (CheckBox cb in m_attributes)
            {
                cb.Checked = true;
            }
        }
        else
        {
            foreach (CheckBox cb in m_attributes)
            {
                cb.Checked = false;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T11:41:00.423

您可以在事件处理程序的开头检查 All_Check 控件是否具有焦点，如果没有焦点则退出事件。

```
private void all_CheckedChanged(object sender, EventArgs e)
{

    if (!m_all.Focused)
     return ;

    if (m_all.Checked)
    {
        foreach (CheckBox cb in m_attributes)
        {
            cb.Checked = true;
        }
    }
    else
    {
        foreach (CheckBox cb in m_attributes)
        {
            cb.Checked = false;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T11:29:19.637

您可以添加一个布尔成员级别变量来标记您的事件处理程序逻辑是否应该短路，或者您可以取消订阅`all_CheckedChanged`in`attribute_CheckedChanged`并在最后重新订阅。

# uitableview - UISearchDisplayController 动画 reloadData

> ID：14797224
> 
> 赞同：2
> 
> 时间：2013-02-10T11:27:29.593
> 
> 标签：uitableview, core-data, uisearchdisplaycontroller, nsfetchedresultscontroller

我一直在阅读有关`UISearchDisplayController`它的所有文档，`delegate`但是当搜索条件发生变化时，我找不到任何方法来为表格视图设置动画。

我正在使用这两种方法： ![UISearchDisplayController 方法](../Images/e2cd9016fc6d4df901ba04ccc98d4fdb.png)

他们都回来了`YES`，但仍然找不到任何方法来做类似的事情： ![UITableView 方法](../Images/bd49585e655498a9873b8def820b30d1.png)

我不知道这是否重要，但我正在使用一个来`NSfetchedResultsController` 填充`UITableView``UISearchDisplayController`

就是这样，谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T18:36:25.767

当搜索字符串或范围发生变化时，您为获取的结果控制器分配一个新的获取请求，因此必须调用`performFetch`以获取新的结果集。`performFetch`重置控制器的状态，并且不会触发任何 FRC 委托方法。

因此，必须在更改获取请求后“手动”更新表视图。在大多数示例程序中，这是由

*   调用`reloadData`搜索表视图，或
*   `YES`从`shouldReloadTableForSearchString`or返回`shouldReloadTableForSearchScope`。

效果是一样的：搜索表视图重新加载，没有动画。

我认为没有任何内置/简单的方法可以在搜索谓词更改时为表格视图更新设置动画。但是，您可以尝试以下方法（这只是一个想法，我自己并没有真正尝试过）：

*   在更改获取请求之前，请复制旧结果集：

    ```
    NSArray *oldList = [[fetchedResultsController fetchedObjects] copy]; 
    ```

*   将新的 fetch 请求分配给 FRC 并调用`performFetch`.

*   获取新的结果集：

    ```
    NSArray *newList = [fetchedResultsController fetchedObjects]; 
    ```

*   不要调用`reloadData`搜索表视图。

*   比较`oldList`并`newList`检测新的和删除的对象。调用`insertRowsAtIndexPaths`新对象和`deleteRowsAtIndexPaths`已删除对象。这可以通过并行遍历两个列表来完成。
*   `NO`从`shouldReloadTableForSearchString`或返回`shouldReloadTableForSearchScope`。

正如我所说，这只是一个想法，但我认为它可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-20T03:00:20.633

我知道这个问题很老，但是我最近遇到了这个问题，并且想要一个无论如何`NSFetchedResultsController`初始化都可以工作的解决方案。它基于上面@martin-r 的回答。

这是相应的要点：[https ://gist.github.com/stephanecopin/4ad7ed723f9857d96a777d0e7b45d676](https://gist.github.com/stephanecopin/4ad7ed723f9857d96a777d0e7b45d676)

```
import CoreData

extension NSFetchedResultsController {
    var predicate: NSPredicate? {
        get {
            return self.fetchRequest.predicate
        }
        set {
            try! self.setPredicate(newValue)
        }
    }

    var sortDescriptors: [NSSortDescriptor]? {
        get {
            return self.fetchRequest.sortDescriptors
        }
        set {
            try! self.setSortDescriptors(newValue)
        }
    }

    func setPredicate(predicate: NSPredicate?) throws {
        try self.setPredicate(predicate, sortDescriptors: self.sortDescriptors)
    }

    func setSortDescriptors(sortDescriptors: [NSSortDescriptor]?) throws {
        try self.setPredicate(self.predicate, sortDescriptors: sortDescriptors)
    }

    func setPredicate(predicate: NSPredicate?, sortDescriptors: [NSSortDescriptor]?) throws {
        func updateProperties() throws {
            if let cacheName = cacheName {
                NSFetchedResultsController.deleteCacheWithName(cacheName)
            }

            self.fetchRequest.predicate = predicate
            self.fetchRequest.sortDescriptors = sortDescriptors
            try self.performFetch()
        }

        guard let delegate = self.delegate else {
            try updateProperties()
            return
        }

        let previousSections = self.sections ?? []
        let previousSectionsCount = previousSections.count
        var previousObjects = Set(self.fetchedObjects as? [NSManagedObject] ?? [])
        var previousIndexPaths: [NSManagedObject: NSIndexPath] = [:]
        previousObjects.forEach {
            previousIndexPaths[$0] = self.indexPathForObject($0)
        }
        try updateProperties()
        let newSections = self.sections ?? []
        let newSectionsCount = newSections.count
        var newObjects = Set(self.fetchedObjects as? [NSManagedObject] ?? [])
        var newIndexPaths: [NSManagedObject: NSIndexPath] = [:]
        newObjects.forEach {
            newIndexPaths[$0] = self.indexPathForObject($0)
        }

        let updatedObjects = newObjects.intersect(previousObjects)
        previousObjects.subtractInPlace(updatedObjects)
        newObjects.subtractInPlace(updatedObjects)

        var moves: [(object: NSManagedObject, fromIndexPath: NSIndexPath, toIndexPath: NSIndexPath)] = []
        updatedObjects.forEach { updatedObject in
            if let previousIndexPath = previousIndexPaths[updatedObject],
                let newIndexPath = newIndexPaths[updatedObject]
            {
                if previousIndexPath != newIndexPath {
                    moves.append((updatedObject, previousIndexPath, newIndexPath))
                }
            }
        }

        if moves.isEmpty && previousObjects.isEmpty && newObjects.isEmpty {
            // Nothing really changed
            return
        }

        delegate.controllerWillChangeContent?(self)

        moves.forEach {
            delegate.controller?(self, didChangeObject: $0.object, atIndexPath: $0.fromIndexPath, forChangeType: .Move, newIndexPath: $0.toIndexPath)
        }

        let sectionDifference = newSectionsCount - previousSectionsCount
        if sectionDifference < 0 {
            (newSectionsCount..<previousSectionsCount).forEach {
                delegate.controller?(self, didChangeSection: previousSections[$0], atIndex: $0, forChangeType: .Delete)
            }
        } else if sectionDifference > 0 {
            (previousSectionsCount..<newSectionsCount).forEach {
                delegate.controller?(self, didChangeSection: newSections[$0], atIndex: $0, forChangeType: .Insert)
            }
        }

        previousObjects.forEach {
            delegate.controller?(self, didChangeObject: $0, atIndexPath: previousIndexPaths[$0], forChangeType: .Delete, newIndexPath: nil)
        }
        newObjects.forEach {
            delegate.controller?(self, didChangeObject: $0, atIndexPath: nil, forChangeType: .Insert, newIndexPath: newIndexPaths[$0])
        }

        delegate.controllerDidChangeContent?(self)
    }
} 
```

它在 上公开 2 个属性，`NSFetchedResultsController`这些属性`predicate`与. 当设置这些属性中的任何一个时，控制器将自动计算更改并通过委托发送它们，因此希望没有重大的代码更改。如果你不想要动画，你仍然可以直接设置或在本身上。 `sortDescriptors``fetchRequest`
`predicate``sortDescriptors``fetchRequest`

# android - 面对 Java.net.SocketException：权限被拒绝

> ID：14797225
> 
> 赞同：1
> 
> 时间：2013-02-10T11:27:32.180
> 
> 标签：android

我在 LogCat 中没有收到任何错误。代码中显示的 ip 是 localhost ip 地址。我的 AVD 中有互联网可用。

我的 MainActivity.java 是：

公共类 MainActivity 扩展 Activity {

```
private static final String SOAP_ACTION = "http://tempuri.org/add";
private static final String METHOD_NAME = "add";
private static final String NAMESPACE = "http://tempuri.org/";
private static final String URL = "http://101.63.111.137/yash/DemoService.asmx";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    Button callMe = (Button) findViewById(R.id.b1);
    callMe.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            String responseData = getData();
            ((TextView) findViewById(R.id.textView1)).setText("Response Received is: " + responseData);
        }

    });

}

private String getData() {

    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

    PropertyInfo pi = new PropertyInfo();
    pi.setName("i");
    pi.setValue(((EditText) findViewById(R.id.e1)).getText().toString());
    pi.setType(int.class);
    request.addProperty(pi);

    PropertyInfo pi2 = new PropertyInfo();
    pi2.setName("j");
    pi2.setValue(((EditText) findViewById(R.id.e2)).getText().toString());
    pi2.setType(int.class);
    request.addProperty(pi2);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);

    HttpTransportSE androidHttpTransport=new HttpTransportSE(URL);
    try {
        androidHttpTransport.call(SOAP_ACTION, envelope);
        SoapPrimitive response = (SoapPrimitive) envelope.getResponse();
        return response.toString();
    } catch (Exception e) {
        e.printStackTrace();
        return e.toString();
    }
} 
```

}

我在 AndroidManifest.xml 中添加了这些行

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T11:40:52.560

您是否在清单中添加了 INTERNET_ACCESS 权限？

```
 <manifest xlmns:android...>
   ...
   <uses-permission android:name="android.permission.INTERNET"></uses-permission>
 </manifest> 
```

[套接字异常](https://stackoverflow.com/questions/2169294/how-to-add-manifest-permission-to-android-application)

# php - 无限重定向循环 - 重写 URL

> ID：14797230
> 
> 赞同：0
> 
> 时间：2013-02-10T11:27:59.317
> 
> 标签：php, .htaccess, url-rewriting, seo, infinite-loop

在为 SEO 目的实现 URL 的重写时，我得到了一个无限的重定向循环。

示例网址

```
`<a><?php echo make_store_name_url($store_id); ?><?php echo $store_name; ?></a>` 
```

我有一个重写动态网址的功能 - 下面是一个例子

```
function make_store_name_url($store_id)

{
     //build the keyword rich url
     $url = SITE_URL . '/store/' . $store_id .'/';

    //return the URL
    return $url;
}

//function to redirect using 301
function fix_store_name_url()
{
   $proper_url = get_proper_store_name_url();

   if(SITE_URL . $_SERVER['REQUEST_URI'] != $proper_url)
   {
      header('HTTP/1.1 301 Moved Permanently');
      header('Location: ' . $proper_url);
      exit();
   }
}

function get_proper_store_name_url()
{
  $store_id = $_GET["store"];  
  $proper_url = make_store_name_url($store_id);
  return $proper_url;
} 
```

最后我在 htaccess 中的行来重写。请注意，当不使用重定向时，重写工作正常。

```
RewriteRule ^store/([0-9]+)/$ /store_selection.php?store=$1 [R=301,L] 
```

不确定我的无限重定向循环出了什么问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:45:09.697

将您的 .htaccess 更改为：

```
RewriteRule ^store/([0-9]+)/$ /store_selection.php?store=$1 [QSA,L] 
```

这只是在内部重写 URL，同时仍向用户显示原始 URL。您已将其设置为执行 301 重定向，因此用户点击的 URL 是 /store_selection.php?store=id 即无限循环的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T12:48:09.313

为什么不用 RewriteLog 来调试重写规则呢？

```
# Roll your own Rewrite log
# Log details via scale of 1 to 9
# 1 = few details, 5 = enough details, 9 = too much detail
RewriteEngine On
RewriteLog "/your/path/rewrite.log"
RewriteLogLevel 5 
```

[http://perishablepress.com/roll-your-own-apache-rewrite-log/](http://perishablepress.com/roll-your-own-apache-rewrite-log/)

# c# - 防止在 MVC 3 Web 应用程序中取消密码更改过程

> ID：14797233
> 
> 赞同：1
> 
> 时间：2013-02-10T11:28:14.320
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2010, authentication, security

这是我的问题。我的应用程序有登录页面、密码重置页面和个人资料页面。密码重置页面和个人资料页面未经身份验证无法访问。

我已`[Authorize]`用于配置文件操作和密码重置操作。

在我的应用程序中，我的用户密码在 30 天后过期。因此，当用户登录并且密码过期时，我会重定向用户以更改密码页面。由于用户已经通过身份验证，用户可以进入个人资料页面，输入网址（例如：www.mywebsite.com/Profile/View）。这是一个漏洞。

我不希望用户取消密码更改过程。我想强制用户更改密码。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T11:34:23.763

在您的用户/密码表中有另一个布尔标志列，以指示用户是否在密码过期后重置了他的密码。因此，每次当您使密码过期时，将该记录的该列值设置为`false`，当用户真正根据您的流程更改其密码时，将该值设置为`true`。现在，当用户尝试访问`View`操作方法（或任何其他操作方法/控制器）时，您可以检查此列值。您可以将此检查编写为自定义操作过滤器，并根据需要将其应用于操作方法/控制器。

您也可以使用`PasswordLastUpdated`datetime 列代替上面提到的布尔标志。在这种情况下，您需要检查该值（PasswordLastUpdated）是在针对过期过程记录的日期时间之前还是之后。（`DateExpired`列值）

[此处](http://msdn.microsoft.com/en-in/library/dd381609%28v=vs.98%29.aspx)提供了创建自定义操作过滤器的示例。

# python - Python：如何启动一个完整的进程而不是子进程并检索 PID

> ID：14797236
> 
> 赞同：17
> 
> 时间：2013-02-10T11:28:50.930
> 
> 标签：python, windows, process

我想：

1.  从我的进程 (myexe.exe arg0) 启动一个新进程 (myexe.exe arg1)
2.  检索这个新进程的 PID（操作系统窗口）
3.  当我使用 TaskManager Windows 命令“结束进程树”杀死我的第一个实体（myexe.exe arg0）时，我需要新的实体（myexe.exe arg1）不会被杀死......

我玩过 subprocess.Popen、os.exec、os.spawn、os.system ......但没有成功。

另一种解释问题的方法：如果有人杀死了 myexe.exe (arg0) 的“进程树”，如何保护 myexe.exe (arg1)？

编辑：同样的问题（没有答案）在[这里](https://stackoverflow.com/questions/13592219/launch-a-totally-independent-process-from-python)

编辑：以下命令不保证子进程的独立性

```
subprocess.Popen(["myexe.exe",arg[1]],creationflags = DETACHED_PROCESS | CREATE_NEW_PROCESS_GROUP,close_fds = True) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-10T11:53:35.093

在 Windows 上启动父进程退出后可以继续运行的子进程：

```
from subprocess import Popen, PIPE

CREATE_NEW_PROCESS_GROUP = 0x00000200
DETACHED_PROCESS = 0x00000008

p = Popen(["myexe.exe", "arg1"], stdin=PIPE, stdout=PIPE, stderr=PIPE,
          creationflags=DETACHED_PROCESS | CREATE_NEW_PROCESS_GROUP)
print(p.pid) 
```

Windows 进程创建标志在[这里](https://msdn.microsoft.com/en-us/library/windows/desktop/ms684863(v=vs.85).aspx)

[更便携的版本在这里](https://stackoverflow.com/a/13256908/4279)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T11:36:36.153

几年前我在 Windows 上做过类似的事情，我的问题是想杀死子进程。

我想你可以运行子`pid = Popen(["/bin/mycmd", "myarg"]).pid` 进程，所以我不确定真正的问题是什么，所以我猜是你杀死主进程的时候。

IIRC 这与旗帜有关。

我无法证明这一点，因为我没有运行 Windows。

```
subprocess.CREATE_NEW_CONSOLE
The new process has a new console, instead of inheriting its parent’s console (the default).

This flag is always set when Popen is created with shell=True.

subprocess.CREATE_NEW_PROCESS_GROUP
A Popen creationflags parameter to specify that a new process group will be created. This flag is necessary for using os.kill() on the subprocess.

This flag is ignored if CREATE_NEW_CONSOLE is specified. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-18T19:01:32.410

因此，如果我理解正确，代码应该是这样的：

```
from subprocess import Popen, PIPE
script = "C:\myexe.exe"
param = "-help"
DETACHED_PROCESS = 0x00000008
CREATE_NEW_PROCESS_GROUP = 0x00000200
pid = Popen([script, param], shell=True, stdin=PIPE, stdout=PIPE, stderr=PIPE,
            creationflags=DETACHED_PROCESS | CREATE_NEW_PROCESS_GROUP) 
```

至少我试过这个并为我工作。

# java - 从 Java 回调到 BPEL？

> ID：14797237
> 
> 赞同：1
> 
> 时间：2013-02-10T11:28:58.673
> 
> 标签：java, web-services, bpel

我有一个在 java 中调用异步 Web 服务的 BPEL 流程。我在完成后回调 BPEL 流程时遇到问题。我收到等待响应的超时错误。我尝试从该流程生成一个 JAVA ws 客户端并在调用我的异步 Web 服务的情况下尝试了它，它工作正常......谁能指导我如何从 java ws 完成这个工作.. 我被困在这个任务中很长时间了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T21:03:24.513

**检查回调的相关信息。**如果 BPEL 接收到回调但该回调不包含正确的相关信息，则该消息与您的 BPEL 流程没有关联，该流程稍后会超时。您应该检查您的 AsyncWebservice 是否正确处理回调。

尝试侦听 AsyncWebservice 正在运行的端口，以监视**BPEL 和 AsyncWebservice 之间****的请求/响应**消息。您可以为此使用 SOAPUI 或[TCPMonitor](http://java.net/projects/tcpmon)。这还将向您显示关联回调与 BPEL 调用所需的相关 ID 和 SOAP 标头。

 **您还应该**检查 BPEL 超时**设置。

这是一个不错的[Async Webservice 和回调 BPEL 教程](https://blogs.oracle.com/bwb/resource/async/Create_an_Asynchronous_JAX-WS_Web_Service_and_call_it_from_Oracle_BPEL_11g.html)。与 Oracle BPEL 相关，但仍然相关。查看 AsyncWEBservice 实现部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T04:08:00.207

从BPEL流程wsdl生成客户端（在eclipse中右键bpel文件）并导入到我的webservice中直接调用它的函数后已经解决了。。**

# php - Ajax/PHP 邮件发送脚本不工作

> ID：14797238
> 
> 赞同：0
> 
> 时间：2013-02-10T11:29:04.937
> 
> 标签：php, ajax, email

我正在使用一个 ajax+php 脚本从 html 网站发送邮件。我在我的其他网站（不同的服务器）上有这个脚本，它工作正常，但现在我无法让它在我正在构建的新网站上工作。下面是调用 ajax 函数的形式：

```
<form id="form" enctype="multipart/form-data" method="post">
            <table id="tablecontact">
            <tr><th>Name:</th><td><input id="name" type="text" class="input" name="Name" value="" size="30" /></td></tr>
            <tr><th>E-mail:</th><td><input id="email" class="input" name="E-mail" value="" size="30" /></td></tr>
            <tr><th>Subject:</th><td><input id="subject" class="input" name="Subject" value="" size="30" /></td></tr>
            <tr><th>Message:</th><td><textarea id="message" class="input" name="Massege" cols="40" rows="5" style="max-width:700px"></textarea></td></tr> 
            <tr><td colspan="2"><center><input id="submit" type="submit" class="submit" value="Submit" onclick="submitForm();" />&nbsp;<input type="button" class="reset" value="Reset" /></center></td></tr>
            </table>
      </form> 
```

这是ajax脚本：

```
function submitForm() {
if (window.XMLHttpRequest){
        xmlhttp=new XMLHttpRequest();
    } else {
        xmlhttp=new ActiveXObject('Microsoft.XMLHTTP');
    }

    xmlhttp.onreadystatechange= function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {         
            document.getElementById('response').innerHTML=xmlhttp.responseText;
        }
    }
        var name=document.getElementById('name').value;
        var email=document.getElementById('email').value;
        var subject=document.getElementById('subject').value;
        var message=document.getElementById('message').value;
var parameters='name='+name+'&email='+email+'&subject='+subject+'&message='+message;
xmlhttp.open('POST','mailsend.php',true);
xmlhttp.setRequestHeader('Content-type','application/x-www-form-urlencoded');
xmlhttp.send(parameters);}; 
```

这是mailsend.php：

```
<?php
$pass = validEmail($_POST['email']);
            $subject = $_POST['subject']." : Contact";
            $email = $_POST['email'] ;
            $name=$_POST['name'];
            $message = $_POST['message'] ;
            $headers = "From: $name Email: $email";
if ($pass && strlen($subject)>=5 && strlen($message)>=5 && strlen($name)>=5) 
        {
            $to='MYMAIL';
            $sent = mail($to, $subject, $message, $headers) ;
            if ($sent){ 
            echo('<div id="success"><img src="ok.png" style="margin-top:3px;" /> Your message was sent.</div>');
            $hppmessage='Thanks for contacting.';
            $hppheaders='Auto Replay from: MYMAIL';
            $hppsubject='Contact message received.';
            $sent1= mail($email,$hppsubject,$hppmessage,$hppheaders,'-f MYMAIL');
            } else
            echo ('<div id="error"><img src="error.png" style="margin-top:3px;" /> Error! Please try again.') ;
        } else
        echo ('<div id="error"><img src="error.png" style="margin-top:3px;" /> Error! Please try again.') ;

?> 
```

任何帮助将不胜感激，在此先感谢并致以最良好的祝愿。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T11:51:46.737

没关系，但改用 jQuery，这是该站点的链接：http: [//jquery.com/](http://jquery.com/)。jQuery 更高效、更快！包含 jQuery 脚本文件后，将 javascript 更改为：

```
function submitForm(){
   var nameval    = $("#name").val();
   var emailval   = $("#email").val();
   var subjectval = $("#subject").val();
   var messageval = $("#message").val();
   $.post("mailsend.php", { name: nameval, email: emailval, subject :subjectval, message : messageval } );
} 
```

您的 ajax 脚本来自 w3schools，这不是一个很好的教程地方，而是在这里阅读官方 jQuery 文档：http: [//api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)。

**编辑：**您的 $to 变量也不是有效的电子邮件，因此可能是您的问题。

# c# - 写出最大的素数

> ID：14797242
> 
> 赞同：21
> 
> 时间：2013-02-10T11:29:23.097
> 
> 标签：c#, algorithm, numbers, primes

我正在尝试解决C#[中最大的主要](http://programmingpraxis.com/2013/02/08/the-biggest-prime/)编程实践问题。问题很简单，打印出来或写入文件中的数字：2 ^(57,885,161) - 1（有 17,425,170 位）

我已经设法通过[Emil Stevanof .Net 包装器使用令人惊叹的](http://www.emilstefanov.net/Projects/GnuMpDotNet/)[GNU 多精度算术库来解决它](http://en.wikipedia.org/wiki/GNU_Multi-Precision_Library)

```
var num = BigInt.Power(2, 57885161) - 1;
File.WriteAllText("biggestPrime.txt", num.ToString()); 
```

即使所有当前发布的解决方案都使用这个库，对我来说感觉就像在作弊。有没有办法在托管代码中解决这个问题？想法？建议？

PS：我已经尝试过使用 .Net 4.0 [BigInteger](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx)但它*永远不会*结束计算（我等了 5 分钟，但与 GMP 解决方案的 50 秒相比已经很多了）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T12:28:26.650

这也更像是一个骗子而不是一个解决方案，但我使用[IntX 库解决了这个问题](http://intx.codeplex.com/)

```
IntX.Pow(2, 57885161, MultiplyMode.AutoFht) - 1; 
```

它运行了大约 6 分钟。不过，这仍然不是一个真正的答案。看到“真实”的东西会很有趣。

编辑：使用 C# 秒表我认为计算只需要 5 秒，这是 ToString 的过程需要非常长时间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T12:49:37.663

如果您只想使用乘法（和适当的大整数库）来计算这个数字，您可以考虑减少计算的数量。在简单的情况下，您可以在减去 1 之前重复乘以 2（57885161 次），但我们可以用更少的乘法来做到这一点。

考虑重复平方。这给了我们 2, 2 ² , (2 ² ) ² = 2 ⁴ , (2 ⁴ ) ² = 2 ⁸等......在平方 25 次之后，我们将计算出 2 ^((2 ^(25) )) = 2 ^(33554432)。

如果我们查看 57885161 的二进制表示，我们得到 11011100110100000111101001。即告诉我们我们需要 (for 2 ^(57885161) ) 2 ^((2 ^(25) )) * 2 ^((2 ^(24) )) * 2 ^((2 ^(22) ))等...我们可以存储所有需要的在我们计算所需的最高值的过程中 2 的幂，然后只进行最后的乘法运算。这就是 25 + 13 个大整数乘法。然后我们只需要为所需的值减去 1。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-02-10T13:37:07.567

你要实现的是计算密集型的。Visual C# 和 Visual Basic（以及一般的解释语言）不是为这样的事情而设计的。使用 GMP 是*正确的做法*，因为它是用纯 C 语言实现的，并且针对执行速度进行了高度优化。

如果您选择仅使用托管代码，请*耐心等待*：使用 .Net 4.0 BigInteger 可能需要比使用 GMP*多 100 倍的时间。*要对此进行测试，您应该计算 2 ^(1,000)、2 ^(10,000)、2 ^(100,000)、2 ^(1,000,000)和 2 ^(10,000,000)并查看使用 .Net 4.0 框架计算每个表达式所需的时间。

如果事实证明所需的时间太长，那么您可以尝试自己进行计算。您应该使用此[算法执行求幂](http://en.wikipedia.org/wiki/Exponentiation_by_squaring)，然后从 C++ 移植到 C#[我自己的大整数乘法实现](https://github.com/spatarel/algos/blob/master/HugeInt.cpp)或您可能找到的任何其他算法。但是，*不能保证*您将获得明显更好的性能，因为您仍在使用托管代码。

# dll - WDK 构建环境版本控制

> ID：14797243
> 
> 赞同：0
> 
> 时间：2013-02-10T11:29:25.640
> 
> 标签：dll, makefile, wdk

对不起，如果我问一些明显的问题。我正在尝试使用 Windows 7 的 WDK 为驱动程序重新编译用户模式帮助程序 dll，当我注意到使用各自的操作系统、平台构建环境构建的每个操作系统使用不同的 dll 分发时。Makefile 显示它只喜欢 SDK_LIB_PATH 中的库。我在 Win7 x86、x64 上测试了 WinXp x86 和 WinServer2003 x64，它们似乎兼容。我是否需要为每个操作系统平台组合分发单独的 dll？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:56:15.767

一般来说，没有。您必须为 32 位和 64 位平台提供单独的 DLL，但除非您想利用仅在特定版本的 Windows 中发现的功能，否则为 XP 构建的驱动程序通常可以在更高版本的 Windows 上运行。有一些例外；例如，显示来自渲染 DLL 的 UI 的打印驱动程序将无法在 Vista 及更高版本上运行。

# ruby-on-rails - 部署到 vps

> ID：14797245
> 
> 赞同：1
> 
> 时间：2013-02-10T11:29:31.850
> 
> 标签：ruby-on-rails, capistrano, unicorn, rbenv

我正在尝试部署我的应用程序并使用`capistrano deploy:cold`. 有任何想法吗？我的环境包括`ubuntu 12.10`, `postgresql`, `rbenv-installer`, `unicorn`.

```
 * executing "cd /home/deployer/apps/microv/releases/20130210112032 && bundle install --gemfile /home/deployer/apps/microv/releases/20130210112032/Gemfile --path /home/deployer/apps/microv/shared/bundle --deployment --quiet --without development test"
    servers: ["192.xx.xxx.xxx"]
    [192.xx.xxx.xxx] executing command
 ** [out :: 192.xx.xxx.xxx] sh: 1: bundle: not found
    command finished in 228ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /home/deployer/apps/microv/releases/20130210112032; true"
    servers: ["192.xx.xxx.xxx"]
    [192.xx.xxx.xxx] executing command
    command finished in 227ms
failed: "sh -c 'cd /home/deployer/apps/microv/releases/20130210112032 && bundle install --gemfile /home/deployer/apps/microv/releases/20130210112032/Gemfile --path /home/deployer/apps/microv/shared/bundle --deployment --quiet --without development test'" on 192.xx.xxx.xxx 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T11:50:21.647

尝试登录您的远程服务器并查看是否已`bungler`安装，如下所示：

```
sudo gem install bundler 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T13:54:34.693

找到解决方案在 deploy.rb 顶部添加这个 require "bundler/capistrano" set :default_environment, { 'PATH' => "$HOME/.rbenv/shims:$HOME/.rbenv/bin:$PATH" }

# javascript - .live 不是 rails 3.2.11 中的函数错误

> ID：14797251
> 
> 赞同：1
> 
> 时间：2013-02-10T11:30:02.993
> 
> 标签：javascript, jquery, ruby-on-rails-3, ruby-on-rails-3.2

我正在关注[使用 ajax 的搜索排序](http://railscasts.com/episodes/240-search-sort-paginate-with-ajax?view=asciicast)

这里我的 gemfile 包括

*   导轨 3.2.11
*   sqlite-3
*   将分页，'3.0'
*   jquery-rails,'2.2.1'

Application.js 文件包括

> //= 需要 jquery
> 
> //= 需要 jquery_ujs

application.js 中的脚本

```
$(function () {
    $('#products th a').live('click', function () {
    $.getScript(this.href);
    return false;
});
}) 
```

进入控制台出错

```
$("#products th a").live is not a function 
```

我搜索了但我没有找到任何解决方案。谁能帮我我在这里犯了什么实际错误

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T11:34:12.983

我的猜测是您使用的是 jQuery 1.9，它已被删除[`live`](http://api.jquery.com/live/)（在它已被多个版本弃用之后）。您可以获得与`live`执行此操作相同的效果：

```
$(function () {
    $(document).on('click', '#products th a', function () {
        $.getScript(this.href);
        return false;
    });
}); 
```

...它将`click`处理程序附加到`document`但仅在单击开始或通过与选择器匹配的元素冒泡时触发它`#products th a`（这就是`live`所做的）。

但是*由于某种原因*`live`被弃用和删除（实际上是其中的几个），其中一个原因是几乎永远不会最好将处理程序一直放在下面（尽管在极少数情况下可能会如此）。例如，除非您要删除并重新创建元素，否则您可能想要：*`click``document``products`*

 *```
$(function () {
    $('#products').on('click', 'th a', function () {
        $.getScript(this.href);
        return false;
    });
}); 
```

这告诉 jQuery 将`click`处理程序放在 上`#products`，但仅当单击事件开始于或通过与`th a`选择器匹配的元素冒泡时才会触发它。*

# iphone - iPhone App首次启动时显示信息imageview

> ID：14797253
> 
> 赞同：3
> 
> 时间：2013-02-10T11:30:11.833
> 
> 标签：iphone, ios, ipad, uiimageview, app-startup

我想知道如何将图像添加到应用程序中，并在整个屏幕上添加有关应用程序本身的信息。

这是要求：

*   首次启动时仅显示一次
*   覆盖整个屏幕（包括标签栏和导航栏）
*   当用户点击图像时，它应该消失并且不再出现；）

示例（仅在 iPad 上找到一个，虽然我需要它用于 iPhone）：

![在此处输入图像描述](../Images/d9a834ba55bf8bf483eb6f8dd75d5107.png)

我怎样才能做到这一点？有没有我可以使用的免费框架？非常感谢任何提示、信息或链接。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T11:53:27.113

1.  检查 NSUserDefaults 是否之前显示（并关闭）帮助视图
2.  创建 UIImageView 并将其添加到您的视图中
3.  将 UITapGestureRecognizer 添加到 imageView
4.  在点击手势的动作中删除帮助视图并保存到 NSUserDefaults 视图被关闭。

.

```
- (void)viewDidLoad {
    [super viewDidLoad];
    if (![[NSUserDefaults standardUserDefaults] boolForKey:@"didDisplayHelpScreen"]) {
        UIWindow *window = [[[UIApplication sharedApplication] windows] lastObject];

        UIImageView *imageView = [[UIImageView alloc] initWithFrame:window.bounds];
        imageView.image = [UIImage imageNamed:@"78-stopwatch"];
        imageView.backgroundColor = [UIColor greenColor];
        imageView.alpha = 0.5;
        UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(dismissHelpView:)];
        [imageView addGestureRecognizer:tapGesture];
        imageView.userInteractionEnabled = YES;
        [window addSubview:imageView];
    }
}

- (void)dismissHelpView:(UITapGestureRecognizer *)sender {
    UIView *helpImageView = sender.view;
    [helpImageView removeFromSuperview];
    [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"didDisplayHelpScreen"];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T11:31:46.533

在 NSUserDefaults 中定义一些 BOOL 键。如果为 NO，则显示您的叠加层并将其设置为 YES。下次用户启动应用程序时，将跳过此步骤。

要添加图像以覆盖您的视图，代码将如下所示：

```
UIImageView *imageView = [[UIImageView alloc] initWithFrame:self.view.frame];
imageView.image = [UIImage imageNamed:@"overlay image"];
[self.view addSubview:imageView]; 
```

# css - Opera：位置：固定和背景图像

> ID：14797255
> 
> 赞同：0
> 
> 时间：2013-02-10T11:30:30.747
> 
> 标签：css, positioning, background-image, opera, css-position

在我的页面上，我有一个具有以下 CSS 规则的元素：

```
.pointer {
    position: fixed;
    background-repeat: no-repeat;
    background-position: center;
    top: 70%;
    z-index: 1;
    width: 3%;
    height: 6%;
    text-indent: 100%;
    white-space: nowrap;
    overflow: hidden;
    float: left;
    left: 0;
    background-image: url("img/myImage.jpg");
} 
```

在我测试的浏览器中运行良好，只有 Opera 不喜欢它。当我滚动时，背景图像也会“滚动”，因此会在离开容器时消失。
我相信这是一个已知问题，但我仍然无法找到解决方案。

在[这个页面](http://john.albin.net/css/owen-hack)上，描述了如何从 Opera 中隐藏 CSS 规则的方法，但除了这篇文章是 anno 2002 之外，我实际上不想使用 CSS hacks。

删除`overflow: hidden`并不能解决它，添加`background-attachment: fixed`也没有帮助。还有其他想法或解决方案吗？

**编辑：http:**
[//jsfiddle.net/mvV7G/](http://jsfiddle.net/mvV7G/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T16:14:17.407

我看过你的小提琴项目。我相信问题是由于将背景图像和边框半径应用于同一元素引起的，老实说，我无法解释为什么这只发生在歌剧中。

但是一个简单的解决方案是将锚点包装在一个 div 中并在每个之间拆分样式，确保背景图像和半径位于不同的元素上。

我已经创建了一个可能的解决方案，它需要一些整理，但我认为它会让你走上正轨 - [http://jsfiddle.net/zyj6Z](http://jsfiddle.net/zyj6Z)

CSS如下：

```
.link {
-ms-filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#4d000000, endColorstr=#4d000000)";
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#4d000000, endColorstr=#4d000000);
zoom: 1;
background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiI+PHBvbHlnb24gZmlsbD0iI2ZmZiIgcG9pbnRzPSIyLjc2OSw3Ljk5MiAxMC43NjIsMCAxMy4xMzIsMi4zNjIgNy42MDQsNy44OTkgMTMuMjMxLDEzLjUyOCAxMC43NjIsMTYgMi43NjksOC4wMDcgMi43NzYsOCIvPjwvc3ZnPg==");
background-position: center;
background-repeat: no-repeat;
width: 10%;
height: 10%;
position: fixed;
top: 70%;
left: 0;
}
.test {
width: 10%;
height: 10%;
position: fixed;
top: 70%;
left: 0;
-webkit-background-clip: padding-box;
-moz-background-clip: padding;
background-clip: padding-box;
overflow: hidden;
-webkit-border-radius: 0 5px 5px 0;
-moz-border-radius: 0 5px 5px 0;
border-radius: 0 5px 5px 0;
background-color: #000000;
background-color: transparent\9;
background-color: rgba(0, 0, 0, 0.3);
text-indent: 100%;
white-space: nowrap;
} 
```

和这里的 HTML：

```
<div class="outer">
<div class="wrap">
     <h1>Stuff</h1>

    <div class="test"> 
        <a href="#" class="link">Hide me!</a>
    </div>
    <ul>
        <li>
            <img src="//placehold.it/150x150" />
        </li>
        <li>
            <img src="//placehold.it/150x150" />
        </li>
        <li>
            <img src="//placehold.it/150x150" />
        </li>
        <li>
            <img src="//placehold.it/150x150" />
        </li>
        <li>
            <img src="//placehold.it/150x150" />
        </li>
        <li>
            <img src="//placehold.it/150x150" />
        </li>
        <li>
            <img src="//placehold.it/150x150" />
        </li>
        <li>
            <img src="//placehold.it/150x150" />
        </li>
        <li>
            <img src="//placehold.it/150x150" />
        </li>
    </ul>
</div> 
```

我希望这有帮助。

# django - 在 django-allauth 中反转 'facebook_login'

> ID：14797258
> 
> 赞同：0
> 
> 时间：2013-02-10T11:31:01.410
> 
> 标签：django, google-app-engine

我正在将 django-allauth 与应用引擎一起使用，当我将 login_required 装饰器添加到我的视图时，我收到以下错误：Reverse for 'facebook_login' with arguments '()' and keyword arguments '{}' not found。完整的追溯在这里：[http ://slexy.org/view/s20Zs7JvFl](http://slexy.org/view/s20Zs7JvFl)

我的设置：

TEMPLATE_CONTEXT_PROCESSORS = (...,

"allauth.account.context_processors.account",

“allauth.socialaccount.context_processors.socialaccount”，

)

AUTHENTICATION_BACKENDS = (

"django.contrib.auth.backends.ModelBackend",

"allauth.account.auth_backends.AuthenticationBackend",

)

INSTALLED_APPS = (

...,

'allauth',

'allauth.account',

'allauth.socialaccount',

'allauth.socialaccount.providers.facebook',

)

我可能想念一些愚蠢的事情。我应该怎么做才能向前迈出一步？谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-07T18:27:58.710

TL；DR：您需要将请求库与您的应用程序一起提供；我刚刚将它从 /path/to/google-cloud-sdk/platform/google_appengine/lib 复制到 /path/to/my/app。

更长的解释：allauth Facebook 提供程序需要“请求”库才能正常工作。有趣的是，Google App Engine 确实提供了它（参见上面的路径），但到目前为止它不在可以引用的库的“公共接口”中（参见[https://cloud.google.com/appengine/docs/蟒蛇/工具/库27](https://cloud.google.com/appengine/docs/python/tools/libraries27)）。我假设 App Engine 提供了该库，因为上面列表中的公共库之一需要它。如果 App Engine 将它添加到公共库列表中会很酷，因此用户可以在 app.yaml 文件中引用它，但这里描述的解决方法对我有用。

# javascript - Select2 相关下拉列表

> ID：14797261
> 
> 赞同：10
> 
> 时间：2013-02-10T11:31:12.360
> 
> 标签：javascript, jquery-select2

我正在尝试使用 Select2 插件来创建 4 个相互依赖的下拉列表。我一直在努力寻找正确的方法来更新加载选项的数据。

我的目标是通过 ajax 加载新数据，但是一旦我在客户端中有它，我就无法将新数据添加到选择列表中。

我试过的代码在这里：

```
$(#"a3").select2({
    placeholder: "select an item",
    allowClear: true}).on("change",
    function (e) {
         var results = $.get("url?id=2",
            function (data, textStatus, jqXHR) {
                $(this).select2({ data: { results: data, text: "Name" } });
        });
    }
); 
```

这里还有另一个问题 [select2 动态更改项目](https://stackoverflow.com/questions/13268083/select2-changing-items-dynamically?rq=1) ，但那里的解决方案适用于 Select2 v3.2 但不适用于 Select2 v3.3

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T22:00:58.053

伊戈尔用一种方法回到我身边

```
var data=[...];    
$().select2({data: function() {return {results:data};}});    
/// later    
data=[...something else];    
// next query select2 will use 'something else' data 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T00:47:39.457

正确的格式是：

```
.select2("data", {...}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-02T10:33:31.900

对于 Select2 v4.x，这里有一个小的[js 类](https://gist.github.com/ajaxray/187e7c9a00666a7ffff52a8a69b8bf31 "要旨")。

使用这个，一个 select2 列表框的选项将根据另一个 select2 列表框的选择由 ajax 加载/刷新。并且可以链接依赖项。

例如 -

```
new Select2Cascade($('#country'), $('#province'), 'path/to/geocode', {type:"province", parent_id: ''});
new Select2Cascade($('#province'), $('#district'), 'path/to/geocode', {type:"district", parent_id: ''}); 
```

检查[codepen](https://codepen.io/ajaxray/full/oBPbQe/)上的演示。这里还有一篇关于[如何使用](http://ajaxray.com/blog/select2-dependent-cascading-select-list-reload/)它的帖子。

# ruby-on-rails - nil：NilClass的未定义方法“每个”？

> ID：14797262
> 
> 赞同：2
> 
> 时间：2013-02-10T11:31:15.370
> 
> 标签：ruby-on-rails, ruby-on-rails-3, variables, view, instance-variables

我想用数据库中的用户动态创建复选框，应该可以选择（一个或多个）。但是，我显然做错了什么，因为下面的代码给了我以下错误：

```
undefined method `each' for nil:NilClass
...
<% @users.each do |user| %> <--- the line with the error 
```

**控制器：**

```
class ProjectsController < ApplicationController
    ...

    def new
      @project = Project.new
      @users = (current_user.blank? ? User.all : User.find(:all, :conditions => ["id != ?", current_user.id]))
    end

    ...
end 
```

**视图（new.html.erb）：**

```
<%= form_for @project do |f| %>
    <div class="alert alert-block">  
        <%= f.error_messages %>
    </div>
    <div class="text_field">
        <%= f.label :title%>
        <%= f.text_field :title%>
    </div>
    <div class="text_field">
        <%= f.label :description%>
        <%= f.text_field :description%>
    </div>
    <div class="dropdown">
        <%= f.label :start_date%>
        <%= f.date_select :start_date %>
    </div>
    <div class="dropdown">
        <%= f.label :end_date%>
        <%= f.date_select :end_date %>
    </div>
    <% @users.each do |user| %>
        <%= check_box_tag "project[member_ids][]", user.id, @project.member_ids.include?(user.id), :id => "user_#{user.id}" %> 
        <%= label_tag "user_#{user.id}", user.first_name %>
    <% end %>
    <div class="checkbox">
</div>
    <div class="submit">
        <%= f.submit "Spara" %>
    </div>
<% end %> 
```

**该模型：**

```
class Project < ActiveRecord::Base
  has_and_belongs_to_many :users
  belongs_to :user
  has_many :tickets, :dependent => :destroy

  ... validations ...

  attr_accessible :user_id, :title, :description, :start_date, :end_date
end 
```

我的数据库中有五个用户，所以表不是空的或任何东西。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T13:06:16.410

当您尝试提交表单但验证失败时会发生错误。如果您的创建操作呈现`new`模板，那就是您的问题所在。

正如其中一位评论者所建议的，您可以`@users`在创建操作中声明。但我建议仅在验证失败时才声明它（将 db 查询的数量减少 1 并减少不必要的活动记录对象的创建），如下面的代码

```
def create
  @project = Project.new params[:project]

  if @project.save
    redirect_to @project
  else
    @users = User.all # only declare this here when it is actually needed
    render :new
  end
end 
```

# maven - jenkins - 在错误的本地 POM 处找不到工件和“parent.relativePath”点的不可解析父 POM

> ID：14797263
> 
> 赞同：6
> 
> 时间：2013-02-10T11:31:17.180
> 
> 标签：maven, build, jenkins, pom.xml

我有一个关于詹金斯构建的问题。正如标题所描述的，这是一个*“无法解决的父 POM 无法找到工件，并且 'parent.relativePath' 指向错误的本地 POM”*问题，经常在 stackoverflow 上找到，但我还没有找到匹配的问题。所以这是我的问题描述

我的项目结构如下所示：

```
/root-project
 +-----------/pom.xml
/root-project/modul-a/
 +-------------------/pom.xml
/root-project/modul-b/
 +-------------------/pom.xml
/root-project/modul-c/
 +-------------------/pom.xml 
```

在我的本地机器（Windows）上，我可以从 / 构建我的项目：

```
mvn -f root-project/pom.xml clean install 
```

没有错误，即使是空的存储库。

但是詹金斯（linux）无法做到这一点。

```
Gestartet durch Benutzer anonymous
Building in workspace /opt/jenkins/jobs/Project/workspace
Checkout:workspace / /opt/jenkins/jobs/Project/workspace - hudson.remoting.LocalChannel@33333ab9
Using strategy: Default
Last Built Revision: Revision acb4c7d9efd81c1c7d5bbd2f6e190d1cb0a5e359 (origin/HEAD, origin/master)
Fetching changes from 1 remote Git repository
Fetching upstream changes from http://repository.git
Seen branch in repository origin/HEAD
Seen branch in repository origin/master
Seen branch in repository origin/version_branch
Commencing build of Revision acb4c7d9efd81c1c7d5bbd2f6e190d1cb0a5e359 (origin/HEAD, origin/master)
Checking out Revision acb4c7d9efd81c1c7d5bbd2f6e190d1cb0a5e359 (origin/HEAD, origin/master)
Warning : There are multiple branch changesets here
[workspace] $ /opt/apache-maven-3.0.4/bin/mvn -f root-project/pom.xml -e clean install javadoc:aggregate
[INFO] Error stacktraces are turned on.
[INFO] Scanning for projects...
[ERROR] The build could not read 8 projects -> [Help 1]
org.apache.maven.project.ProjectBuildingException: Some problems were encountered while processing the POMs:
[FATAL] Non-resolvable parent POM: Could not find artifact org.example:rootartifact:pom:1.3.0-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ line 3, column 10
[FATAL] Non-resolvable parent POM: Could not find artifact org.example:rootartifact:pom:1.3.0-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ line 5, column 11
//...
at org.apache.maven.project.DefaultProjectBuilder.build(DefaultProjectBuilder.java:363)
at org.apache.maven.DefaultMaven.collectProjects(DefaultMaven.java:636)
at org.apache.maven.DefaultMaven.getProjectsForMavenReactor(DefaultMaven.java:585)
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:234)
at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
[ERROR]   
[ERROR]   The project org.example:module-a:1.3.0-SNAPSHOT (/opt/jenkins/jobs/Project/workspace/root-project/module-a/pom.xml) has 1 error
[ERROR]     Non-resolvable parent POM: Could not find artifact org.example:root-project:pom:1.3.0-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ line 3, column 10 -> [Help 2]
org.apache.maven.model.resolution.UnresolvableModelException: Could not find artifact org.example:root-project:pom:1.3.0-SNAPSHOT 
```

所以这就是我父母 pom 里的东西

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>org.example</groupId>
<artifactId>root-project</artifactId>
<version>1.3.0-SNAPSHOT</version>
<packaging>pom</packaging>
<modules>
    <module>module-a</module>
    <module>module-b</module> 
```

还有一个模块 pom 的例子

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <parent>
    <artifactId>root-project</artifactId>
    <groupId>org.example</groupId>
    <version>1.3.0-SNAPSHOT</version>
  </parent>
  <artifactId>module-a</artifactId>
  <dependencies>
     //..
  </dependencies>
</project> 
```

正如我尝试过的其他条目中所述，但它并没有改变结果。为什么要它，它指向存储库，父级从未到过的地方。那么有人建议我做错了什么吗？

正如这里所问的 mvn help:effective-pom 的输出：

```
[INFO] Scanning for projects...
[ERROR] The build could not read 3 projects -> [Help 1]
[ERROR]   
[ERROR]   The project org.example:modul-a:1.3.0-SNAPSHOT (/tmp/project/project-root/modul-a/pom.xml) has 1 error
[ERROR]     Non-resolvable parent POM: Could not find artifact org.example:project:pom:1.3.0-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ line 3, column 10 -> [Help 2]
[ERROR]   
[ERROR]   The project org.example:modul-b:1.3.0-SNAPSHOT (/tmp/project/project-root/modul-b/pom.xml) has 1 error
[ERROR]     Non-resolvable parent POM: Could not find artifact org.example:project:pom:1.3.0-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ line 5, column 11 -> [Help 2]
[ERROR]   
[ERROR]   The project org.example:modul-c:1.3.0-SNAPSHOT (/tmp/project/project-root/modul-c/pom.xml) has 1 error
[ERROR]     Non-resolvable parent POM: Could not find artifact org.example:project:pom:1.3.0-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ line 6, column 10 -> [Help 2]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException
[ERROR] [Help 2] http://cwiki.apache.org/confluence/display/MAVEN/UnresolvableModelException 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T05:29:38.143

在`<artifactId>`您的示例模块 pom 中，您的父母是**`root-project`**.

`<artifactId>`你父母 pom 中的**`prject`**. 在 jenkins 输出中，工件的名称似乎被解析为**`rootproject`**. 尝试将父母的 pom 设置`<artifactId>`为**`root-project`**（注意额外的'-'）。

我不确定这是如何在您的机器上构建的。您能否发布在`mvn help:effective-pom`您的机器和运行 jenkins 的机器上运行的输出？

对于它的价值，您可以启用`-X`调试输出标志以查看 Maven 可能尝试采取的操作。当我调试我的 Maven 项目的配置时，我发现这很有用。

# mysql - %word% 查询的 mySQL 最佳索引

> ID：14797264
> 
> 赞同：0
> 
> 时间：2013-02-10T11:31:28.757
> 
> 标签：mysql, optimization, text, indexing

MySQL 文档说，通常的 BTREE 索引在 % 位于查询字符串开头的查询中无济于事，例如

```
SELECT textcol FROM manytexts WHERE textcol LIKE '%word%'; 
```

哪个索引可以在这里提供帮助？我对检索特定的短语很感兴趣，而对 FULLTEXT 索引的逐字搜索无济于事。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T11:40:34.620

没有索引可以帮助查询`LIKE %%`。这个谓词使参数[不可分割](http://en.wikipedia.org/wiki/Sargable)。

# java - 使用 SimpleCursorAdapter.ViewBinder 改变 View 的颜色

> ID：14797265
> 
> 赞同：1
> 
> 时间：2013-02-10T11:31:41.490
> 
> 标签：java, android, listview

我有一个列表视图，想`(@+id/panel)`根据从 SQLite 数据库中检索到的某些条件更改视图颜色。

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

     <LinearLayout
         android:layout_width="10dp"
         android:layout_height="fill_parent"
         android:layout_weight="0.01"
         android:orientation="vertical" >

       <View
        android:id="@+id/panel"
        android:layout_width="10dip"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:background="#ffa500"
        android:layout_marginRight="4dip"
        />
   </LinearLayout>
   <LinearLayout
        android:layout_width="0dip"
        android:layout_height="fill_parent"
        android:layout_weight="2.86"
        android:orientation="vertical" >

         <TextView
             android:id="@+id/textViewB"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"

             android:text="" />
     </LinearLayout>
</LinearLayout> 
```

我正在使用 SimpleCursorAdapter.ViewBinder 来做到这一点：

```
SimpleCursorAdapter.ViewBinder binder = new SimpleCursorAdapter.ViewBinder() {

@Override
public boolean setViewValue(View view, Cursor cursor, int columnIndex){    

    if (view.getId() == R.id.panel) 
    {                               
        String name = cursor.getString(1);

        if (name.equals("Ravi")) {
            view.setBackgroundColor(Color.RED);
        } else {
            view.setBackgroundColor(Color.BLUE);
        }
        return true;
    } 
    return false;
}               

listView.setAdapter(dataAdapter);
dataAdapter.setViewBinder(binder); 
```

此代码仍然不起作用。代码永远不会通过条件。我可以更改 TextView 对象的字体颜色`(@+id/textViewB)`，但从未成功更改视图颜色。

感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T13:18:01.330

[SimpleCursorAdapter](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html)是_

> 将列从光标映射到 XML 文件中定义的 TextViews 或 ImageViews 的简单适配器。

我不确定`View`您尝试绑定数据库中的值是什么，但我认为它仅适用于`TextView`对象`(@+id/textViewB)`，因为`TextView`它是`View`您可以使用此接口的类型之一。

尝试改用[SimpleAdapter.ViewBinder](http://developer.android.com/reference/android/widget/SimpleAdapter.ViewBinder.html)？否则使用`getView()`可能会给你很好的结果。

# php - 在 x 次登录尝试失败后

> ID：14797269
> 
> 赞同：-2
> 
> 时间：2013-02-10T11:31:52.633
> 
> 标签：php, mysql

我的问题是让计数器为 x 次失败的登录工作。我在 MySQL 中的列是：id、用户名、密码、尝试和地址！

```
if ($result[0]['total'] == true)
{

    $_SESSION['userLogin'] = $result[0]['total'];
    $_SESSION['isLoggedIn'] = $login;
    header('location: index.php?id=home');
    $db->query("UPDATE authenticate SET attempts=0, adress='$ip' WHERE username='$login'");
    exit;
}
else
{
    $rs = mysql_query('SELECT id,username,password,attempts,address FROM authenticate WHERE username = '.$username.'');
    $num = mysql_num_rows($rs);
    if ($row['attempts'] > 3) {
        // Redirect to captcha
        header('location: captcha.php');
    } else {
        $ip = $_SERVER['REMOTE_ADDR'];
        if ($row['address'] != $ip) {
        // New ip adress, reset failed logins
        $failed_logins = 0;
        } else {
        // Increment failed logins
        $failed_logins = $row['attempts']+1;
        }
        mysql_query('UPDATE authenticate SET attempts = '.$failed_logins.',address = '.$ip.' WHERE id = '.$row['id'].' ');
    }
header('location: index.php');
exit;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T12:12:15.790

不需要数据库计数器，而是创建一个称为尝试的会话并增加它。与仅使用会话并增加它相比，使用数据库会更慢且效率更低:) 这应该可以解决您的问题并使用更少的编码。这是使用我的想法的代码，它也应该可以工作：

```
//Checks if the user is logged in
if ($result[0]['total'] == true){
    //Sets the users login
    $_SESSION['userLogin'] = $result[0]['total'];
    //Sets the loggedin variable
    $_SESSION['isLoggedIn'] = $login;
    //Resets the attempts
    $_SESSION['attempts'] = 0;
    //Redirects to index.php?id=home
    header('location: index.php?id=home');
    exit;
}else{
    //Checks if the attempts are greater than three
    if ($_SESSION['attempts'] > 3) {
        // Redirect to captcha
        header('location: captcha.php');
    } else {
        //Increments the session variable
        $_SESSION['attempts'] = $_SESSION['attempts'] + 1;
        //Goes back to the index page
         header('location: index.php');
         exit;
    }
}
exit; 
```

# python - eval() 的局限性？

> ID：14797270
> 
> 赞同：-4
> 
> 时间：2013-02-10T11:31:58.080
> 
> 标签：python, eval

为什么是这样？

```
>>> eval(str(17*3))
51
>>> t=17;t*3
51
>>> eval(str(t=17;t*3))
  File "<stdin>", line 1
    eval(str(t=17;t*3))
                 ^
SyntaxError: invalid syntax
>>> 
```

有没有办法发送 eval() 变量？

```
>>> z=input("ins: ");cxc=compile(z,'<string>','exec');y=eval(cxc);print(y)
ins: t=17;t+3
None
>>> 
```

我应该更准确，我认为一旦我得到了一个好的答案，它就会是普遍的。但是，这是我尝试@cnicutar 建议的实际用例。

```
>>> z=input("ins: ");y=eval(z);print(y)
ins: 't*13+q', {'q':4,'t':2}
('t*13+q', {'q': 4, 't': 2})
>>> 
```

尝试 @LtWorf 和 @Ghopper21 的实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T12:13:39.207

是的，您可以`eval`使用字典作为第二个（和第三个）参数发送变量。这些论点记录[在这里](http://docs.python.org/2/library/functions.html#eval)。这是您的示例：

```
>>> eval('t*3', {'t': 17})
51 
```

顺便说一句，您得到的具体错误不是因为`eval`不能将语句分配变量作为它的第一个参数（尽管它确实不能）；这是因为参数 to`str`需要是表达式，不能赋值变量，而不是语句，可以。请注意，您将得到相同的错误`str`：

```
>>> str(t=17;t*3)
  File "<stdin>", line 1
    str(t=17;t*3)
        ^
SyntaxError: invalid syntax 
```

编辑：至于您的特定用例，您遇到的问题是输入字符串

```
 't*13+q', {'q':4,'t':2} 
```

由于逗号的存在，被评估（通过`input`，读取字符串并调用`eval`它）成为所谓的“元组”，即多个表达式的组合为单个表达式。你不能评估一个元组。（您的用例示例实际上应该返回一个错误——不知道为什么它不是。）

要解决此问题，您需要“解包”元组，以便`eval`知道元组的哪一部分是您要评估的表达式（第一部分，使用字符串表达式`t*13+q`ie `z[0]`）以及哪个是变量值字典（第二部分, 用字典`{'q':4,'t':2}`, 即`z[1]`), 即替换`y=eval(z)`为

```
y = eval(z[0], z[1]) 
```

或者（更 Python 地），您可以告诉 Python 使用星号语法自动将元组解压缩为函数的连续参数，即替换`y=eval(z)`为

```
y = eval(*z) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T11:36:15.213

尝试使用`compile`：

```
>>> expr = compile('t = 42; print(t)', '<string>', 'exec')
>>> eval(expr)
42 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T11:38:28.337

你也可以：

```
>>> t = 17
>>> print eval('t*3')
51 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T12:12:36.323

```
eval(source[, globals[, locals]]) -> value 
```

您还可以传递包含 {'a'=0,'b'=1} 等的字典...

例如：

```
eval('t*13+q', {'q':4,'t':2}) 
```

# ios - 以编程方式写入 PDF 文件

> ID：14797274
> 
> 赞同：3
> 
> 时间：2013-02-10T11:32:35.347
> 
> 标签：ios, objective-c, pdf, uiwebview

我正在寻找一种在我的代码中在 PDF 文件上写入文本的方法。我首先在 UIWebView 中加载 pdf 文件，然后将 UILabel 添加到 UIWebView 的 UIScrollView。这是写在上面的好方法吗？如何通过修改保存它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T12:46:11.383

[有用于解析 PDF 的](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_pdf_scan/dq_pdf_scan.html#//apple_ref/doc/uid/TP30001066-CH220-TPXREF101)内置 API ：

但是，我不确定它是否允许保存修改。你可能有兴趣看看这个问题：

[如何在objective-c中编辑PDF？](https://stackoverflow.com/questions/1333710/how-to-edit-a-pdf-in-objective-c)

[修改/编辑 PDF](https://stackoverflow.com/questions/9249376/modify-edit-a-pdf)

[在 iPhone 应用程序中编辑 PDF](https://stackoverflow.com/questions/7331791/edit-pdf-in-iphone-application)

阿洛斯，看看以下库（它们是商业的）：

*   [PSPDFKit](http://pspdfkit.com/)
*   [iAnnotate](http://www.branchfire.com/developers/)

# php - MySQL SET 查询 (x = x - y)

> ID：14797275
> 
> 赞同：0
> 
> 时间：2013-02-10T11:32:37.177
> 
> 标签：php, mysql, sql, sql-update

在表格中，我有一个字段宽度类型的地板。

当我在 PHP 中进行查询时，我想从这个值中减去另一个数字，例如：

```
$number = 14.3;
mysql_query("UPDATE field SET count = count - $number WHERE name = '$name'); 
```

我需要从 中减去这个`$number`，`count`但不做任何查询。我试图将其放入括号中，但结果相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T11:33:30.697

`COUNT`是保留关键字，请尝试添加反引号。您还需要用双引号关闭您的 PHP 代码。

```
mysql_query("UPDATE field SET `count` = `count` - $number WHERE name = '$name'"); 
```

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

如果您不喜欢使用反引号，另一种方法是在表格上提供别名。

```
mysql_query("UPDATE field a SET a.count = a.count - $number WHERE name = '$name'"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T11:36:22.483

您缺少双引号。尝试这个：

```
mysql_query("UPDATE field SET `count` = `count` - $number WHERE name = '$name'"); 
```

# javascript - socket.io 连接晚了

> ID：14797283
> 
> 赞同：0
> 
> 时间：2013-02-10T11:33:12.350
> 
> 标签：javascript, node.js, socket.io

我有一个 Nodejs 项目

但是socket.io连接它为时已晚。

它第一次打开，socket.io 没有连接。Socket.io 几乎在 10-15 秒后连接。

**我的服务器 JS：**

```
var io = require('socket.io').listen(8080);

function getUsernames(room) {
    var clients = io.sockets.clients(room);
        client=new Array();
    clients.forEach(function(_client) {

                client.push({username:_client.username,room:_client.room})
    });

    return client;
}

                io.sockets.on('connection', function(client){

                client.on('login', function(username, room){
                        client.username = username;
                        client.room = room;
                        client.join(client.room);
                        io.sockets.to(client.room).emit('updateuser', getUsernames(client.room));
                });

                        client.on('mesajgonder', function(data){
                                client.emit('mesajgitti', data)
                                client.broadcast.emit('mesajgitti', data)
                        });
                        client.on('disconnect', function(){
                                var eskiroom = client.room;
                                client.leave(client.room);
                                io.sockets.to(eskiroom).emit('updateuser', getUsernames(eskiroom));
                        });
}); 
```

**我的客户 JS：**

```
var socket;
        var room = 'room8';
        var username = 'username';
        var socket = io.connect("http://localhost:8080");
        $(".text_metin").append('<span><p>Welcome to</p> <b>`'+room+'`</b> write now!</span>');
                socket.on('connect', function(s){
                        socket.emit('login', username, room);
                        socket.on("mesajgitti", function(data){
                                $(".text_metin").append("<li id='chat_metin'>"  + data.mesaj + "</li>");

                        });
                        socket.on('updateuser', function(users){
                                $.each(users, function(i, user) {
                                        $("#user_liste").empty();
                                        $("#user_liste").append('<li><img src="images/1111.png" alt="" width="20" height="20" /><a href="#" title="Coming Soon">'+user.username+'</a></li>');

                                });

                        });
                });
                        $("#mesajGonder").click(function(){
                                var mesaj = $("#writechat").val();
                                if (!mesaj){
                                return;
                                }
                                socket.emit('mesajgonder',{
                                        'mesaj' : mesaj,
                                });
                                $("#mesajinput").val("");
                        });
                        $(".tags li a").click(function(){
                var demo = $(this).text();
                 $("#interested").val($("#interested").val()+','+demo);
                });
                $("#mesajGonder").click(function(){
                $("#writechat").val('');
                }); 
```

我不使用快递。谢谢你

# c# - JsonConvert.SerializeObject() 无法用 DateTime 字段序列化类

> ID：14797287
> 
> 赞同：1
> 
> 时间：2013-02-10T11:33:27.793
> 
> 标签：c#, .net, c#-4.0, json.net

我的课程只有私有字段和他们的公共 getter-setter。我需要将类对象转换为 JSON 字符串，因此我使用的是 JSON.Net。

以下是将类对象转换为 JSON 字符串的简单片段。

```
MyClass obj = new MyClass();
string json = JsonConvert.SerializeObject(obj);
Console.WriteLine(json); 
```

但是该方法`SerializeObject`会抛出type`StackOverflowException`的字段。这里发生了什么事？`MyClass``DateTime`

**更新**

以下是`MyClass`外观（实际上，我不介意分享实际课程）

```
 class MyClass
    {
        private int _Model;
        public int Model
        {
            get
            {
                return _Model;
            }
            set
            {
                _Model = value;
            }
        }

        private long _ProductionControlNumber;
        public long ProductionControlNumber
        {
            get
            {
                return _ProductionControlNumber;
            }
            set
            {
                _ProductionControlNumber = value;
            }
        }

        private DateTime _ProductionDate;
        public DateTime ProductionDate
        {
            get
            {
                return _ProductionDate;
            }
            set
            {
                _ProductionDate = value;
            }
        }

        private DateTime _TestDate;
        public DateTime TestDate
        {
            get
            {
                return _TestDate;
            }
            set
            {
                _TestDate = value;
            }
        }

        private DateTime _TestStartTime;
        public DateTime TestStartTime
        {
            get
            {
                return _TestStartTime;
            }
            set
            {
                _TestStartTime = value;
            }
        }

        private TimeSpan _TestDuration;
        public TimeSpan TestDuration
        {
            get
            {
                return _TestDuration;
            }
            set
            {
                _TestDuration = value;
            }
        }

        public DateTime TestEndTime
        {
            get
            {
                //TODO Perform start end time computing logic.
                return TestEndTime;
            }
        }

        private int _TestBed;
        public int TestBed
        {
            get
            {
                return _TestBed;
            }
            set
            {
                _TestBed = value;
            }
        }

        private long _EngineSerial;
        public long EngineSerial
        {
            get
            {
                return _EngineSerial;
            }
            set
            {
                _EngineSerial = value;
            }
        }

        private Single _FuelSpecificGravity;
        public Single FuelSpecificGravity
        {
            get
            {
                return _FuelSpecificGravity;
            }
            set
            {
                _FuelSpecificGravity = value;
            }
        }

        private long _FuelConsume100;
        public long FuelConsume100
        {
            get
            {
                return _FuelConsume100;
            }
            set
            {
                _FuelConsume100 = value;
            }
        }

        private long _FuelConsume110;
        public long FuelConsume110
        {
            get
            {
                return _FuelConsume100;
            }
            set
            {
                _FuelConsume100 = value;
            }
        }

        private int _TemporaryRPM;
        public int TemporaryRPM
        {
            get
            {
                return _TemporaryRPM;
            }
            set
            {
                _TemporaryRPM = value;
            }
        }

        private int _PermanentRPM;
        public int PermanentRPM
        {
            get
            {
                return _PermanentRPM;
            }
            set
            {
                _PermanentRPM = value;
            }
        }

        private Single _RatedPower;
        public Single RatedPower
        {
            get
            {
                return _RatedPower;
            }
            set
            {
                _RatedPower = value;
            }
        }

        private int _RatedSpeed;
        public int RatedSpeed
        {
            get
            {
                return _RatedSpeed;
            }
            set
            {
                _RatedSpeed = value;
            }
        }

        private double _PulleyDiameter;
        public double PulleyDiameter
        {
            get
            {
                return _PulleyDiameter;
            }
            set
            {
                _PulleyDiameter = value;
            }
        }

        private double _RopeDiameter;
        public double RopeDiameter
        {
            get
            {
                return _RopeDiameter;
            }
            set
            {
                _RopeDiameter = value;
            }
        }

        private Single _FullLoad;
        public Single FullLoad
        {
            get
            {
                return _FullLoad;
            }
            set
            {
                _FullLoad = value;
            }
        }
    } 
```

此外，我将有另一个类，它将具有`MyClass`类型字段（以及它自己的类似字段集），它也将被转换为 JSON 字符串，这应该不是问题，因为据说 JSON.Net也支持这种情况。

**注意：**我是 C# 的新手，但我以前在 Java 中使用过 JSON，我可以在其中使用`JSONObject`and `JSONArray`，而且它们非常简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T12:11:27.290

看起来您的 TestEndTime 属性的 getter 引用了自己。因此，当 Json.NET 尝试对其进行序列化时，它会递归地访问自身并导致 StackOverflowException。

希望有帮助！

# javascript - 使用 JSON 使用 Javascript 缩短 URL

> ID：14797289
> 
> 赞同：2
> 
> 时间：2013-02-10T11:33:34.700
> 
> 标签：javascript, jquery, short, short-url

我正在尝试通过 API 缩短链接并使用 JSON 获得结果

有关 API 的一些信息

**样本响应**

```
{"error":0,"short":"http:\/\/doma.in\/sf0x6"} 
```

**PHP 中的示例用法**

```
$content=@file_get_contents("http://doma.in/api/?url=http://www.google.com&api=APIKEY");

$url=json_decode($content,TRUE);//Decodes json into an array

if(!$url["error"]){  // If there is no error
  echo $url["short"]; //Outputs the short url
}
else{ 
  echo $url["msg"]; //Outputs the error message
} 
```

**请求缩短长 URL**

```
GET http://doma.in/api/?url=http://www.google.com&api=APIKEY 
```

*json_short.php*

```
function curPageURL() {
 $pageURL = 'http';
 if ($_SERVER["HTTPS"] == "on") {$pageURL .= "s";}
 $pageURL .= "://";
 if ($_SERVER["SERVER_PORT"] != "80") {
  $pageURL .= $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
 } else {
  $pageURL .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
 }
 return $pageURL;
}

$url = curPageURL();

$json_short = @file_get_contents("http://doma.in/api/?url=$url&api=APIKEY");
echo $json_short; 
```

*json_short.js*

```
$.getJSON('json_short.php', function(data) {
    if(!data.error){ // If there is no error
        alert(data.short) //Outputs the short url
    }
    else{
        alert(data.msg)
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-02T03:40:34.383

使用 JavaScript 简化流程：

```
var foo = window.location.href;
var bar = foo.replace(/[a-z0-9.]+\//g, shortener);

function shortener(match, pos, fullstring)
  {
  if (shortener.count === foo.match(/[a-z0-9.]+\//g).length)
    {
    shortener.count = 0;
    }
  else
    {
    shortener.count = shortener.count + 1 || 0;
    }
  if (shortener.count === 1)
    {
    return "";
    }

   else
    {
    return match;
    }
  } 
```

# cakephp - 在 cakePHP 中定义和访问虚拟属性 - 在哪里以及如何？

> ID：14797291
> 
> 赞同：1
> 
> 时间：2013-02-10T11:33:49.037
> 
> 标签：cakephp

在一个应用程序中，一个讲座有许多幻灯片，一张幻灯片属于一个讲座。当调用讲座的索引函数时，我们想添加一个列，显示属于某个讲座的幻灯片数量。

我试图将其定义为讲座模型中的 $virtualFields，如下所示：

```
public $virtualFields = array(
        'slides_amount' => 'SELECT COUNT(*) AS `count` FROM `eflux`.`slides` AS `Slide` LEFT JOIN `eflux`.`lectures` 
            AS `Lecture` ON (`Slide`.`lecture_id` = `Lecture`.`id`) 
                WHERE lecture_id = \''.$id.'\'')'; 
```

问题是我无法访问对象的当前 $id ，因此 MySQL 返回错误。

我的下一个尝试是为此使用控制器：

```
$lectures = $this->Lecture->findByCourseId($course_id);

for ($i = 0; $i < count($lectures); $i++) {
   $slide_amount = $this->Lecture->Slide->find('count', array('conditions' => 'lecture_id = \' '.$id.'\''));
   $slide_amounts[$i] = $slide_amount;
} 
```

我也无法访问当前 $lecture-object 的 id 来确定属于该讲座的幻灯片数量。

最后我在视图中做到了：

```
for ($i = 0; $i < count($slides_helper); $i++) {
            if ($slides_helper[$i]['slides']['lecture_id'] == $lecture['Lecture']['id']) {
                echo $slides_helper[$i][0]['count'];
            }   

    }?> 
```

只有在这里我才能访问当前对象的 id 或 $lectures 数组。但我觉得视图不是处理这个问题的地方。

实现这一目标的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T13:11:09.850

在您的控制器中，您可以尝试：

```
$lectures = $this->Lecture->find('all', array('conditions'=>array('Lecture.course_id'=>$course_id)));

foreach ($lectures as &$lecture){
   $lecture['Lecture']['slide_count'] = count($lecture['Slide']);
}
$this->set('lectures', $lectures); 
```

然后访问您视图中的计数

```
foreach ($lectures as $lecture){
    echo $lecture['Lecture']['slide_count'];
} 
```

代码可能不准确......您可以通过粘贴以下代码的结果来帮助我们提供更准确的代码：

把它放在你的控制器中：

```
$lectures = $this->Lecture->find('all', array('conditions'=>array('Lecture.course_id'=>$course_id)));
pr($lectures); 
```

编辑分页：

像这样的东西可能适用于您的分页

```
$this->paginate['conditions'] = array('Lecture.course_id'=>$course_id);
$this->paginate['limit'] = '10';

$lectures = $this->paginate('Lecture');

//PERFORM THE LOOP TO ADD SLIDE COUNT

$this->set('lectures', $lectures); 
```

# php - 降低 MySQL 负载和内存使用

> ID：14797292
> 
> 赞同：0
> 
> 时间：2013-02-10T11:33:49.193
> 
> 标签：php, mysql, load

我正在编写新脚本。它类似于 9gag，有帖子和人们喜欢/不喜欢它们等等。

我有 3 个用于帖子、用户和 like_status 的表

例如：

帖子表结构：

```
postid, postdata , userid, ... 
```

用户表结构：

```
userid, username , .... 
```

like_status

```
postid,userid,liked, disliked 
```

我曾经使用 MySQL 查询

```
SELECT A.*, B.username FROM posts A, users B WHERE A.userid=B.userid 
```

然后我通过将会话用户标识分配给一个变量`$SID`并使用这个 MySQL 查询来获得类似的状态

```
SELECT * FROM like_status WHERE userid=$SID 
```

一切正常，但我有点担心服务器负载。

哪个更适合服务器负载和内存，以运行加入查询：

```
SELECT A.*, B.username, C.liked, C.disliked 
FROM posts A   
JOIN users B ON (A.userid = B.userid)   
JOIN like_status C ON (C.userid = $SID) 
```

如果我使用该查询来获取诸如 10 个帖子之类的帖子数量呢？

```
SELECT A.*, B.username, C.liked, C.disliked 
FROM posts A   
JOIN users B ON (A.userid = B.userid)   
JOIN like_status C ON (C.userid = $SID)   
ORDER BY A.postid limit 10 
```

.. 它会导致任何性能问题吗？

而已。此致

# java - 使用 jsoup 和 jquery 显示图像文件大小

> ID：14797298
> 
> 赞同：1
> 
> 时间：2013-02-10T11:35:04.910
> 
> 标签：java, jquery, html, image, jsoup

我有一个 java 程序来下载网页，解析网页的图像并显示它们在网站上的顺序。我需要的是程序还显示每个图像的文件大小。

我的代码目前：

```
public static void main(String[] args) throws IOException {

    String url = "http://127.0.0.1";   //Url of webpage
    print("Fetching %s...", url);      //output fetching

    Document doc = Jsoup.connect(url).get(); //getting the document

    Elements media = doc.select("[src]"); //parsing the page for images

    print("\nMedia: (%d)", media.size());
    for (Element src : media) {
        print(" * %s: <%s>", src.tagName(), src.attr("abs:src"));

    }

} 
```

Atm 显示如下：

```
<img href="cat.jpg" />
<img href="dog.jpg" />
<img href="horse.jpg" /> 
```

有没有办法让输出看起来像这样？

```
<img href="cat.jpg" /> ---> 54kb
<img href="dog.jpg" /> ---> 74kb
<img href="horse.jpg" /> ---> 102kb 
```

感谢 Ps，我目前正在使用 jsoup，但是如果需要的话，我不介意使用另一个库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T13:37:52.050

您可以为此使用`URL`该类：

```
for( Element element : media )
{
    final String src = element.absUrl("src");

    if( src.toLowerCase().endsWith(".jpg") ) // only needed if you want to check only jpegs
    {
        final URL url = new URL(src);
        final long size = url.openConnection().getContentLength();

        System.out.println(element + " ---> " + size + " byte");
    }
} 
```

但这只会显示**Byte**的大小！

为了更好的可读性，您可以...

*   自行转换为*kb* , *mb*等
*   使用[Apache Commons IO](http://commons.apache.org/io/index.html)的[FileUtils.byteCountToDisplaySize()](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#byteCountToDisplaySize%28long%29)：`FileUtils.byteCountToDisplaySize(size)`

# java - 多键映射和部分查询

> ID：14797299
> 
> 赞同：4
> 
> 时间：2013-02-10T11:35:23.610
> 
> 标签：java, collections, map, key, apache-commons

我用多个键搜索地图实现。我知道[Apache Commons](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/map/MultiKeyMap.html)，但它并不满足我。

我希望能够传递一个密钥并获取包含传递密钥的所有条目，例如

```
MultiKeyMap mkm = new MultiKeyMap();
mkm.put("key1", "key2", "key3", "1");
mkm.put("key1", "key22", "key33", "2");
mkm.put("key12", "key22", "key32", "3");

mkm.get("key1"); 
```

返回 null 但在这种情况下，我想获得“1”和“2”我自己的实现不是一个选项。我想使用我可以信任的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T11:40:34.433

我认为 Guava 有一个 Table 实现`Table<Key1,Key2,Value>`，您可以在其中执行`table.get(key1)`or`table.get(key2)`或`table.get(key1, key2)`. 我认为它只支持每个表的两个键，但不确定。可能想看看那个。

[番石榴表 javadoc](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Table.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T11:49:35.520

我认为你可以用[HashMap做到这一点](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html)

```
HashMap<String, ArrayList<String>> map = new HashMap<>();
    ArrayList<String> ls=new ArrayList<>();
    ArrayList<String> ls2=new ArrayList<>();
    ls.add("key3");
    ls.add("1");
    ls.add("key2");
    ls.add("key22");
    ls.add("key33");
    ls.add("2");

    ls2.add("key22");
    ls2.add("key32");
    ls2.add("3");

    map.put("key1",ls);
    map.put("key12", ls2);

    map.get("key1"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T16:27:07.233

如果您可以翻转需求并多次输入值，每个键一次，那么[Guava 的 MultiMap](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multimaps.html)非常好用：

```
 Multimap<String, String> map = HashMultimap.create();
    map.put("key1", "1");
    map.put("key2", "1");
    map.put("key3", "1");

    map.put("key1", "2");
    map.put("key22", "2");
    map.put("key33", "2");

    map.put("key12", "3");
    map.put("key22", "3");
    map.put("key32", "3");

    Collection<String> values = map.get("key1");
    System.out.println(values); 
```

印刷

```
 [2, 1] 
```

# android - Android 和在线数据库

> ID：14797300
> 
> 赞同：0
> 
> 时间：2013-02-10T11:35:35.010
> 
> 标签：android, web-services, sqlite, rest

我正在开发一个 Android 应用程序，它可以帮助医生管理他们的预约时间表。将要进行的活动的一个示例是，如果医生迟到，他将调整迟到的时间，并且所有预约都将被推迟以匹配该时间。预约持有人（患者）将通过短信收到通知。

我想创建一个在线数据库，以便医生可以通过应用程序通过任何位置访问数据库。**我可以通过 SQlite 访问它吗？如果是这样，我需要遵循哪些步骤来创建数据库。**

我知道该任务可以通过使用 Web 服务和 JDBC 来完成。但我不知道应该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T13:03:10.990

# c++ - C++ 中的模板特化和派生类

> ID：14797303
> 
> 赞同：15
> 
> 时间：2013-02-10T11:35:54.630
> 
> 标签：c++, templates

我有这个简单的代码：

```
class A{};
class B : public A{};
class C : public B{};

class Test
{
    public:
        template<typename T>
        void f(T&){printf("template\n");}
        void f(A&){printf("specialization\n");}
};

int main()
{
    A a;
    B b;
    C c;

    Test test;
    test.f(a);
    test.f(b);
    test.f(c);
} 
```

当我运行它（VS2010）时，我有这个输出：

```
specialization
template
template 
```

是否可以使用类进行调用`A-derived`以使用专业化？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-10T11:44:37.307

是的，这是可能的，但是您必须稍微更改一下代码。

首先，从技术上讲，第二个函数`f()`不是模板函数的特化，**而是**一个**重载**。解决重载时，为所有类型不是 的参数选择模板版本`A`，因为它是完美匹配的：`T`被推断为等于参数的类型，因此在调用时`f(b)`，例如，在类型推断之后编译器将具有在以下两个重载之间进行选择：

```
void f(B&){printf("template\n");}
void f(A&){printf("specialization\n");} 
```

当然，第一个是更好的匹配。

现在，如果您希望在使用子类的参数调用函数时选择第二个版本，则`A`必须使用一些 SFINAE 技术来防止函数模板在类型`T`被推断为子类时被正确实例化`A`.

您可以`std::enable_if`结合使用`std::is_base_of`类型特征来实现这一点。

```
// This will get instantiated only for those T which are not derived from A
template<typename T,
    typename enable_if<
        !is_base_of<A, T>::value
        >::type* = nullptr
    >
void f(T&) { cout << "template" << endl; } 
```

以下是在完整程序中使用它的方法：

```
#include <type_traits>
#include <iostream>

using namespace std;

class A{};
class B : public A{};
class C : public B{};
class D {};

class Test
{
    public:

        template<typename T,
            typename enable_if<!is_base_of<A, T>::value>::type* = nullptr
            >
        void f(T&) { cout << ("template\n"); }

        void f(A&){ cout << ("non-template\n");}

};

int main()
{
    A a;
    B b;
    C c;
    D d;
    float f;

    Test test;
    test.f(a); // Will print "non-template"
    test.f(b); // Will print "non-template"
    test.f(c); // Will print "non-template"
    test.f(d); // Will print "template"
    test.f(f); // Will print "template"
} 
```

**编辑：**

如果您使用的编译器与 C++11 不完全兼容（因此不支持函数模板上的默认模板参数），您可能需要更改模板重载的定义，`f()`如下所示：

```
template<typename T>
typename enable_if<!is_base_of<A, T>::value, void>::type 
f(T&) { cout << ("template\n"); } 
```

程序的行为将是相同的。请注意，如果返回类型为`f()`，则`void`可以省略`enable_if`类模板的第二个参数。

# cocos2d-iphone - 禁用 cocos2d-x 左下角文本

> ID：14797308
> 
> 赞同：4
> 
> 时间：2013-02-10T11:36:31.970
> 
> 标签：cocos2d-iphone, cocos2d-x

在我用 cocos2d-x 编写的所有代码中，屏幕左下角都有一个部分。它有 3 行。我发现第一行用于计算场景中的节点。它到底是什么，如何从屏幕上删除它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T16:00:00.277

我认为第三行是FPS。要禁用此部分，请转到`AppDelegate.cpp`文件，然后转到函数：`applicationDidFinishLaunching`并删除或注释此行：

```
pDirector->setDisplayStats(true); 
```

或者，将输入值设置为`false`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T21:07:05.517

进入`AppDelegate.m`项目中的文件。在`didFinishLaunchingWithOptions`方法上，改变

```
[director_ setDisplayStats:YES]; 
```

到

```
[director_ setDisplayStats:NO]; 
```

# php - 致命错误：调用未定义的方法 Minequery::read()

> ID：14797310
> 
> 赞同：0
> 
> 时间：2013-02-10T11:36:43.707
> 
> 标签：php, class, undefined

我正在尝试使用在我的网站上找到的 Minequery 类[来](http://github.com/vexsoftware/minequery-php)获取我的服务器状态（玩家列表、在线/离线状态等）。我已经下载它并将它复制到我的 ftp 中，所以应该不会发生任何错误，例如我没有复制整个脚本之类的。

当我尝试运行它时，它说`Fatal error: Call to undefined method Minequery::read() in /home/somedir/public_html/minequery.class.php on line 45`

我会因为懒惰，因为代码太多，所以没有在这里粘贴整个 minequery.class.php，所以这里有一个链接：[https](https://github.com/vexsoftware/minequery-php/blob/master/minequery.class.php)
://github.com/vexsoftware/minequery-php/blob/master/minequery.class.php 我'还删除了 JSON 和 Socket 函数，因为我想如果我不使用它们就不需要它们。似乎没有其他人遇到过这个问题，所以不要来这里告诉我用谷歌搜索它。

我也在使用该函数来打印minequery usage.php页面附带的查询，即
`require('minequery.class.php');
print_r(Minequery::query("my-ip-goes-here"));`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T12:28:52.897

在评论中你说你删除了 read 方法。不幸的是，在任何套接字操作（包括 query() ）上都会调用此方法。所以把方法放回去。

这是查询时调用的方法：

```
$response = $class::read($address, $port, $errno, $errstr, $timeout, $write, $latency); 
```

它在第 123 行定义。

# ios - 滚动表视图从 uitableview 单元格中删除复选标记

> ID：14797316
> 
> 赞同：0
> 
> 时间：2013-02-10T11:37:10.770
> 
> 标签：ios, objective-c, xcode4.5

我正在使用 tableview 并且正在对 uitableview 进行多次检查。一切都很完美，我得到了正确的值，但是当我滚动表格视图时，它丢失了复选标记图像（使用默认复选标记没有自定义图像），但选定的值保留在数组中......

滚动表格视图会删除复选标记图像。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    AppDelegate *app= (AppDelegate *)[[UIApplication sharedApplication]delegate];

    if([_tableView cellForRowAtIndexPath:indexPath].accessoryType == UITableViewCellAccessoryCheckmark){

    NSLog(@"yes");

    [placesvisitedarray removeObject:[app.nameArray objectAtIndex:indexPath.row]];

    [_tableView cellForRowAtIndexPath:indexPath].accessoryType = UITableViewCellAccessoryNone;

    }
    else
    {
        NSLog(@"no");

        [_tableView cellForRowAtIndexPath:indexPath].accessoryType =  UITableViewCellAccessoryCheckmark;

        [placesvisitedarray addObject:[app.nameArray objectAtIndex:indexPath.row]];

    }
   // [_tableView reloadData];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T11:40:46.563

复选标记被删除，因为当您滚动时，`cellForRowAtIndexPath:`正在调用 tableview 并重新创建单元格。

您可以编写一个方法来检查数组中是否存在某个值：

```
- (BOOL)stringExistsInPlacesVisited:(NSString *)stringToMatch {
    for (NSString string in placesvisitedarray) {
        if ([string isEqualTo:stringToMatch])
            return YES;
    }
    return NO;
} 
```

然后，`cellForRowAtIndexPath:`您必须检查 placesvisitedarray 并插入/删除复选标记。

```
if ([stringExistsInPlacesVisited:[app.nameArray objectAtIndex:indexPath.row])
    cell.accessoryType =  UITableViewCellAccessoryCheckmark;
else
   cell.accessoryType =  UITableViewCellAccessoryNone; 
```

代码未经测试，因此可能无法正常工作，但至少它可以让您了解如何进行。

# java - Java Swing 调整 UI 重叠元素的大小

> ID：14797322
> 
> 赞同：0
> 
> 时间：2013-02-10T11:38:00.033
> 
> 标签：java, swing, jtable, jframe, jpanel

我使用**NetBeans GUI Builder**创建了一个 GUI，并手动编写了一些附加代码。我真的不知道如何正确描述这个问题，所以请看下面的图片。

1.  这是一个默认视图，您可以在其中注意到已在 JPanel 中手动创建的 JTable：

    ```
     jPanel1.setLayout(new BorderLayout());

                TableModel model = db.populateJTable();
                JTable jTable1 = new JTable(model);
                jTable1.setModel(model);

                JScrollPane tableContainer = new JScrollPane(jTable1);

                jPanel1.add(tableContainer);
                View.super.getContentPane().add(jPanel1);
                //View.super.pack();
                View.super.setVisible(true); 
    ```

![在此处输入图像描述](../Images/0224a9ea2e6ac42616e74c9b4d723333.png)

2.  当我尝试水平调整窗口大小时，所有组件都会通过按指定调整大小做出正确反应，但 JTable 只是停留在之前渲染的位置，与其他元素重叠：

![在此处输入图像描述](../Images/84fdc34102b4d63fae4042dd943ec216.png) 有人可以告诉我发生了什么，我应该如何进行？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T11:41:23.217

一个强大的解决方案：使用[`Layout`s](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)。他们在调整大小时为您完成所有工作。

一个很好的是[GridBagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)。如果需要更复杂的布局，可以使用强大的[BoxLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html)

如果您想手动设计布局。对我来说，我更喜欢使用 NetBeans 7.2.1 设计器。在设计窗口中设计布局时，它会自动为您配置布局。

# jquery - 附加或克隆内容的灯箱行为

> ID：14797323
> 
> 赞同：0
> 
> 时间：2013-02-10T11:38:00.987
> 
> 标签：jquery, joomla, mootools, append, squeezebox

我真的需要一些帮助！

我在 Joomla 的后端工作。您可能知道 Joomla 默认使用 Mootools，它是默认的 SqueezeBox 灯箱。我正在尝试构建一个模块，并在其中构建一个自定义字段，在其中添加添加或克隆的行。为此，我使用了 Jquery [DynoTable.js](http://www.seomoves.org/blog/web-design-development/dynotable-a-jquery-plugin-by-bob-tantlinger-2683/)插件。

问题是在每一行里面都有一个链接，它调用了一个模态灯箱 iframe。当我添加新行时，新行无法打开灯箱。

```
window.addEvent('domready', function() {
SqueezeBox.initialize({});
SqueezeBox.assign($$('a.modal'), {
    parse: 'rel'
}); 
```

});

不幸的是，我无法更改此脚本，它位于 Joomla 的核心内部，并且不想触摸它。

我猜那是因为已经设置的触发器在 domReady 上并且仅适用于已经存在的 Dom。为此，我尝试向 DynoTable 脚本添加一个后备“触发器”，该脚本正在调用 Squeezebox 灯箱以再次应用：

```
onRowAdd: function(){
SqueezeBox.assign($$("a.modal"), {parse: "rel"}); 
```

},

这有效（将打开灯箱）但是已经设置的模式链接（来自加载的行）将在该模式中打开 2、3、4 等 iframe，具体取决于添加了多少新行。因此，基本上新行将打开一个普通的灯箱，而旧行将在该灯箱中打开多个 iframe。

希望我解释得很好.. 非常感谢你们！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T12:09:57.820

尝试将您的分配选择器更改为以下内容：

```
onRowAdd: function(){
   // YOURDYNTABLE_ID has to be a valid selector to specify the dynoTable, can 
   // be an ID or class of the table, or an parent element containing the table
   // with tr:last-child you only select the last row (the one you just added).
   SqueezeBox.assign($$("YOURDYNTABLE_ID tr:last-child a.modal"), {parse: "rel"}); 
} 
```

# c - 结构指针总是被初始化为 nil

> ID：14797326
> 
> 赞同：0
> 
> 时间：2013-02-10T11:38:14.343
> 
> 标签：c, pointers, struct

我遇到了这个问题，我的结构指针在`nil`默认情况下总是被初始化。下面是我的代码。

```
#include <stdio.h>

struct SomeStruct {
    int x;
};

int main()
{
    int array[2];  // If I change this to 1, the code works fine

    struct SomeStruct *ptr;
    printf("%p\n", ptr);  // always prints "nil"
} 
```

有人可以解释一下这里发生了什么。具体来说，为什么将数组的大小更改为 1 会使代码运行良好。

以上是一些较大代码的一部分，我能够将问题简化为这一点。我需要`ptr`稍后使用，但我得到分段错误，因为它是`nil`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T11:39:15.707

> 有人可以解释一下这里发生了什么。具体来说，为什么将数组的大小更改为 1 会使代码运行良好。

您正在使用`ptr`而不初始化它。更改数组的大小会更改堆栈的布局，并且您的代码可以“很好”地执行。

> 我需要稍后使用 ptr 但我得到分段错误，因为它是 nil

然后给它分配一些内存：

```
ptr = malloc(sizeof *ptr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T11:39:06.553

您正在访问一个未初始化的变量，因此您依赖于**未定义的行为**；结果可能是任何东西。

在实践中，当您的程序运行时，您会看到堆栈中发生的任何垃圾的人工制品。

# postgresql - 使用 dblink.sql 在 PostgreSQL 中的两个表之间复制数据

> ID：14797327
> 
> 赞同：3
> 
> 时间：2013-02-10T11:38:16.740
> 
> 标签：postgresql, configuration, postgresql-9.1, dblink

我正在使用 PostgreSQL 9.1。我需要将所需列从一个数据库的一个表转移到另一个数据库的另一个表中，但不是模式。
我发现该`dblink.sql`文件必须在`share/contrib`. 但是我的`contrib`文件夹是空的。我在哪里可以下载`dblink.sql`文件并可以执行我的查询？

当我现在执行查询时，它会显示一条错误消息：

```
cross database reference is not possible ... 
```

谁能帮助我如何在两个数据库之间传输数据？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T12:05:42.257

[按照相关问题中的详细说明](https://stackoverflow.com/questions/3862648/how-to-use-install-dblink-in-postgresql)将软件包安装到系统中后，将[扩展`dblink`](http://www.postgresql.org/docs/current/interactive/dblink.html)安装到您的数据库中（您正在运行此代码的那个，外部数据库不需要它）：

```
CREATE EXTENSION dblink; 
```

您可以在手册中找到[代码示例](http://www.postgresql.org/docs/current/interactive/dblink.html)。
这是我用来在 dbs 之间复制数据的简单版本：首先，[创建一个 FOREIGN SERVER](http://www.postgresql.org/docs/current/interactive/sql-createserver.html)

```
CREATE SERVER mydb
FOREIGN DATA WRAPPER postgresql
OPTIONS (hostaddr '111.111.111.111',port '5432',dbname 'mydb'); 
```

`FOREIGN DATA WRAPPER postgresql`在我的情况下是预先安装的。
然后创建打开连接、删除旧数据（可选）、获取新数据、运行`ANALYZE`和关闭连接的函数：

```
CREATE OR REPLACE FUNCTION f_tbl_sync()
  RETURNS text AS
$BODY$
SELECT dblink_connect('mydb');  -- USER MAPPING for postgres, PW in .pgpass

TRUNCATE tbl;  -- optional

INSERT INTO tbl
SELECT * FROM dblink(
  'SELECT tbl_id, x, y
   FROM   tbl
   ORDER  BY tbl_id')
    AS b(
 tbl_id int
,x int
,y int)

ANALYZE tbl;

SELECT dblink_disconnect();
$BODY$
  LANGUAGE sql VOLATILE; 
```

# javascript - 切换功能中的“未定义标记”（GMaps API v3）

> ID：14797330
> 
> 赞同：0
> 
> 时间：2013-02-10T11:38:38.057
> 
> 标签：javascript, google-maps

我正在尝试“谷歌地图标记分组”教程：

[谷歌地图标记分组](https://stackoverflow.com/questions/3219437/google-maps-marker-grouping/3219580#3219580)

为了使标记可见而不可见，我使用以下函数：

```
function displayMarkers(category) {
  var i;

 for (i = 0; i < markers.length; i++) {
   if (markers[i].category == category) {
     if (markers[i].getVisible()) {
          markers[i].setVisible(false); }

    else { markers[i].setVisible(true); } } } 
```

在这里，我总是得到错误：未定义标记。

有点像标记在函数中不可见。但是，如果函数有误，关于教程的讨论中会有任何评论。那么为什么会出现这个错误呢？坦克很多！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-10T19:39:12.050

这是整个代码：

```
 function initialize(){

  var deutschland = new google.maps.LatLng(51,9);

  var mapOptions = { zoom: 6,
                     center: deutschland,
                     streetViewControl: true,
                     scaleControl: true,
                     mapTypeControl: true,
                     mapTypeId: google.maps.MapTypeId.ROADMAP };

  var map = new google.maps.Map(document.getElementById("map-container"),mapOptions);
  var beaches = [
 ['Bondi Beach', 51, 9, 1],
 ['Coogee Beach', 52, 9, 1],
 ['Cronulla Beach', 51, 8, 2],
 ['Manly Beach',51.5, 9, 2],
 ['Maroubra Beach',52.5, 10, 2]
  ];

 var markers = [];
 var i, newMarker;

 for (i = 0; i < beaches.length; i++) {
   newMarker = new google.maps.Marker({
    position: new google.maps.LatLng(beaches[i][1], beaches[i][2]),
    map: map,
    title: beaches[i][0]
  });

 newMarker.category = beaches[i][3];
 newMarker.setVisible(true);

 markers.push(newMarker);
 } 

 }

function displayMarkers(category) {
  var i;

 for (i = 0; i < markers.length; i++) {
   if (markers[i].category == category) {
     if (markers[i].getVisible()) {
          markers[i].setVisible(false); }

    else { markers[i].setVisible(true); } } }

  } 
```

和：

```
<input type="button" value="Show Group 1" onclick="displayMarkers(1);"/>
   <input type="button" value="Show Group 2" onclick="displayMarkers(2);"/> 
```

# forms - Ember - 提交后清除表单

> ID：14797338
> 
> 赞同：2
> 
> 时间：2013-02-10T11:39:31.120
> 
> 标签：forms, ember.js, ember-data

我使用 Ember Data 创建了非常简单的 Ember 应用程序。用户在其中创建实体并提交一种表单。它位于`BandsNewView`（由 Ember 自动创建），由以下人员控制`BandsNewController`：

```
App.BandsNewController = Ember.Controller.extend({
    cancel: function() {
        this.transitionTo('bands');
    },

    save: function() {
        App.Band.createRecord(this);
        this.get('store').commit();

        this.set('name');
        this.set('description');
        this.transitionTo('bands');
    }
}); 
```

我想知道在保存新的 Band 实体后**是否有更简单的解决方案来“清理”（即清空）表单？**我可以说这样`this.set()`的话，它会清空所有字段吗？或者我的方法本质上是错误的，我应该完全不同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T11:58:09.607

我一直喜欢的模式是在路线本身的进出时创建和销毁对象。

```
App.BandsNewRoute = Ember.Route.extend({
  model: function(params) {
    return App.Band.createRecord({});
  },
  save: function() {
    this.get('currentModel.store').commit();
    return this.transitionTo('bands');
  },
  exit: function() {
    var model = this.get('currentModel');
    if (model.get("isNew") && !model.get("isSaving")) {
      return model.get('transaction').rollback();
    }
  }
}); 
```

如您所见，它使退出函数更复杂一些，但对于每个对象创建路径来说都是完全相同的，因此您可以将其分解。现在您的模板可以直接绑定到模型的属性，模型将在保存时保存，或在退出时回滚（这将清除表单）

如果您计划可能更改其他数据模型而不保存它们，或者有未保存的模型，那么安全清除模型的一种方法是将其放入它自己的事务中。我只倾向于将它用于不是我当前流程主要焦点的对象。

```
App.BandsNewRoute = Ember.Route.extend({
  model: function(params) {
    var transaction = this.get('store').transaction();
    return transaction.createRecord(App.Band, {})
  }
}); 
```

其他一切都可以保持不变。

# castle-windsor - 在温莎容器中仅注册服务有什么重要用途吗？

> ID：14797339
> 
> 赞同：0
> 
> 时间：2013-02-10T11:39:59.863
> 
> 标签：castle-windsor, ioc-container, registration

```
 container.Register(
    Component.For<IMyService>()
); 
```

此代码意图在 Windsor 容器中注册服务 IMyService，但我没有发现这样做有任何意义。我在这里遗漏了什么还是只是语法练习？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:49:55.750

这取决于。

在这种情况下，由于您的服务是一个接口，因此对于默认配置，它很可能不是非常有用，因为您很可能无法实例化该组件。我说的最有可能是因为您没有显示接口的定义，也没有显示配置容器的代码（稍后会详细介绍）。

如果您的服务是一个类，那么它将是一个可用的注册。

现在更高级的东西。在高级场景中，您可以通过使用自定义扩展来增加您的注册`IContributeComponentModelConstruction`或组件模型属性（如`InterceptorAttribute`）来扩展注册，这可以将这个简单的注册扩展到更完整的东西。

# ios - Twitter - 关注按钮

> ID：14797341
> 
> 赞同：1
> 
> 时间：2013-02-10T11:40:10.993
> 
> 标签：ios, twitter, twitter-follow

我目前正在开发一个 iOS 应用程序，该应用程序从流 api 捕获一些推文。出于这个原因，我使用用户的用户名和密码进行身份验证。除此之外，我想让用户有机会在 Twitter 上关注一些人。我创建了一个 UIButton，现在想调用一个 url 或类似的东西来关注特定的用户。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T11:46:29.687

简单做个帖子

```
https://api.twitter.com/1.1/friendships/create.json

POST Data:  user_id=1401881&follow=true 
```

[参考](https://dev.twitter.com/docs/api/1.1/post/friendships/create)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T13:38:19.547

```
-(void)twitterButton
{
NSString *twitterAccount= @"yourAccountName";
NSArray *urls = [NSArray arrayWithObjects:
                 @"twitter://user?screen_name={handle}", // Twitter
                 @"tweetbot:///user_profile/{handle}", // TweetBot
                 @"echofon:///user_timeline?{handle}", // Echofon
                 @"twit:///user?screen_name={handle}", // Twittelator Pro
                 @"x-seesmic://twitter_profile?twitter_screen_name={handle}", // Seesmic
                 @"x-birdfeed://user?screen_name={handle}", // Birdfeed
                 @"tweetings:///user?screen_name={handle}", // Tweetings
                 @"simplytweet:?link=http://twitter.com/{handle}", // SimplyTweet
                 @"icebird://user?screen_name={handle}", // IceBird
                 @"fluttr://user/{handle}", // Fluttr
                 @"http://twitter.com/{handle}",
                 nil];

UIApplication *application = [UIApplication sharedApplication];

for (NSString *candidate in urls) {
    NSURL *url = [NSURL URLWithString:[candidate stringByReplacingOccurrencesOfString:@"{handle}" withString:twitterAccount]];
    if ([application canOpenURL:url])
    {
    UIWebView*   Twitterweb =[[UIWebView alloc] initWithFrame:CGRectMake(.....)];
        Twitterweb.delegate=nil;
        Twitterweb.hidden=NO;
        NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
        [Twitterweb loadRequest:requestObj];
        [self.view addSubview:Twitterweb];
        return;
    }
}

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-01T10:19:22.940

如果您使用 iOS 6 在 Twitter 上关注用户：

```
-(void)followMe
{
ACAccountStore *accountStore = [[ACAccountStore alloc] init];
ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

[accountStore requestAccessToAccountsWithType:accountType options:nil completion:^(BOOL granted, NSError *error) {
if(granted) {
    // Get the list of Twitter accounts.
    NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];

    // For the sake of brevity, we'll assume there is only one Twitter account present.
    // You would ideally ask the user which account they want to tweet from, if there is more than one Twitter account present.
    if ([accountsArray count] > 0) {
        // Grab the initial Twitter account to tweet from.
        ACAccount *twitterAccount = [accountsArray objectAtIndex:0];

        NSMutableDictionary *tempDict = [[NSMutableDictionary alloc] init];
        [tempDict setValue:@"twitter_name" forKey:@"screen_name"];
        [tempDict setValue:@"true" forKey:@"follow"];
        NSLog(@"*******tempDict %@*******",tempDict);

        //requestForServiceType

        SLRequest *postRequest = [SLRequest requestForServiceType:SLServiceTypeTwitter requestMethod:SLRequestMethodPOST URL:[NSURL URLWithString:@"https://api.twitter.com/1.1/friendships/create.json"] parameters:tempDict];
        [postRequest setAccount:twitterAccount];
        [postRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
            NSString *output = [NSString stringWithFormat:@"HTTP response status: %i Error %d", [urlResponse statusCode],error.code];
            NSLog(@"%@error %@", output,error.description);
        }];
    }

    }
}];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-25T05:00:12.803

我按照@Mohd Asim 的回答实现了以下 Swift 代码，感谢您的回答。:D

**版本：iOS 10、Swift 3**

**推特 API：1.1**

（[https://dev.twitter.com/rest/reference/post/friendships/create](https://dev.twitter.com/rest/reference/post/friendships/create)）

```
class SocialHelper {

static func FollowAppTwitter() {

    let accountStore = ACAccountStore()
    let twitterType = accountStore.accountType(withAccountTypeIdentifier: ACAccountTypeIdentifierTwitter)

    accountStore.requestAccessToAccounts(with: twitterType, options: nil,
        completion: { (isGranted, error) in
            guard let userAccounts = accountStore.accounts(with: twitterType),
                userAccounts.count > 0 else { return }
            guard let firstActiveTwitterAccount = userAccounts[0] as? ACAccount else { return }

            // post params
            var params = [AnyHashable: Any]() //NSMutableDictionary()
            params["user_id"] = "pixelandme"
            params["follow"] = "true"

            // post request
            guard let request = SLRequest(forServiceType: SLServiceTypeTwitter,
                                    requestMethod: SLRequestMethod.POST,
                                    url: URL(string: "https://api.twitter.com/1.1/friendships/create.json"),
                                    parameters: params) else { return }
            request.account = firstActiveTwitterAccount

            // execute request
            request.perform(handler: { (data, response, error) in
                print(response?.statusCode)
                print(error?.localizedDescription)
            })
    })
}
} 
```

不客气;）

# mysql - MySQL datetime 字段查询按小时：分钟排序

> ID：14797343
> 
> 赞同：5
> 
> 时间：2013-02-10T11:40:16.137
> 
> 标签：mysql, sql, sorting, mysqldatareader

我有一张这样的桌子：

```
id  date_time
1   2/11/2013 7:05
2   2/11/2013 7:00
3   2/12/2013 7:00
4   2/14/2013 7:00
5   2/16/2013 7:00
6   2/17/2013 7:00
7   2/12/2013 7:05
8   2/14/2013 7:05
9   2/15/2013 7:05
10  2/16/2013 7:05
11  2/17/2013 7:05
12  2/13/2013 7:00
13  2/15/2013 7:00
14  2/13/2013 7:05 
```

我需要它按 HOUR:MINUTE 排序，而不是按 DATE 排序，所以我在输出中得到这样的结果：

```
2/11/2013 7:00
2/12/2013 7:00
2/13/2013 7:00
2/14/2013 7:00
2/15/2013 7:00
2/16/2013 7:00
2/17/2013 7:00
2/11/2013 7:05
2/12/2013 7:05
2/13/2013 7:05
2/14/2013 7:05
2/15/2013 7:05
2/16/2013 7:05
2/17/2013 7:05 
```

有没有办法直接用 MySQL 对输出进行排序？...我知道一旦我得到查询结果就可以通过 PHP 来做，但只是想知道 MySQL 是否可以做这样的事情？

我尝试了这样的查询：

```
SELECT * FROM my_table WHERE (date_time BETWEEN '$date_check_low' AND '$date_check_high') ORDER BY hour(date_time) ASC 
```

但它会产生奇怪的结果......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T11:42:16.897

```
ORDER BY HOUR(date_time), MINUTE(date_time), date_time 
```

或者

```
ORDER BY TIME(date_time), date_time 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/4adc3/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T11:42:17.757

试试这个：

```
SELECT *
FROM my_table
WHERE (date_time BETWEEN '$date_check_low' AND '$date_check_high')
ORDER BY time(date_time),
         date_time; 
```

# java - 使用 startActivityForResult

> ID：14797355
> 
> 赞同：0
> 
> 时间：2013-02-10T11:41:04.527
> 
> 标签：java, android, crash

我做了 2 个类 YehActivity.java 和 h.java。在运行应用程序时出现错误，应用程序意外停止。这是代码

```
public class YehActivity extends Activity {
public static final int r=1;
Button b;
TextView tv;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        b.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent i=new Intent(YehActivity.this,he.class);
                //startActivity(i);
                startActivityForResult(i, r);
                }
        });
       }  
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        if(requestCode==r && resultCode==RESULT_OK){
                       String h=data.getStringExtra("a");
                       tv.setText(h);
            }
        }
     } 
```

在哪里检查空值。

这是第二个文件

```
public class he extends Activity{
Button b;
EditText et;
Intent i=getIntent();
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.h);

    b=(Button) findViewById(R.id.button12);
    et=(EditText) findViewById(R.id.editText1);

        b.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                String value=et.getText().toString().trim();

                i.putExtra("a", value);
                he.this.setResult(RESULT_OK, i);
                finish();
                }
        });

    }

} 
```

日志文件是

```
02-11 23:31:46.408: I/Process(302): Sending signal. PID: 302 SIG: 9
02-11 23:45:04.778: D/AndroidRuntime(357): Shutting down VM
02-11 23:45:04.778: W/dalvikvm(357): threadid=1: thread exiting with uncaught exception (group=0x40015560)
02-11 23:45:04.798: E/AndroidRuntime(357): FATAL EXCEPTION: main
02-11 23:45:04.798: E/AndroidRuntime(357): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.ye/com.ye.YehActivity}: java.lang.NullPointerException
02-11 23:45:04.798: E/AndroidRuntime(357):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
02-11 23:45:04.798: E/AndroidRuntime(357):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-11 23:45:04.798: E/AndroidRuntime(357):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-11 23:45:04.798: E/AndroidRuntime(357):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-11 23:45:04.798: E/AndroidRuntime(357):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-11 23:45:04.798: E/AndroidRuntime(357):  at android.os.Looper.loop(Looper.java:123)
02-11 23:45:04.798: E/AndroidRuntime(357):  at android.app.ActivityThread.main(ActivityThread.java:3683)
02-11 23:45:04.798: E/AndroidRuntime(357):  at java.lang.reflect.Method.invokeNative(Native Method)
02-11 23:45:04.798: E/AndroidRuntime(357):  at java.lang.reflect.Method.invoke(Method.java:507)
02-11 23:45:04.798: E/AndroidRuntime(357):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-11 23:45:04.798: E/AndroidRuntime(357):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-11 23:45:04.798: E/AndroidRuntime(357):  at dalvik.system.NativeStart.main(Native Method)
02-11 23:45:04.798: E/AndroidRuntime(357): Caused by: java.lang.NullPointerException
02-11 23:45:04.798: E/AndroidRuntime(357):  at com.ye.YehActivity.onCreate(YehActivity.java:23)
02-11 23:45:04.798: E/AndroidRuntime(357):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-11 23:45:04.798: E/AndroidRuntime(357):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
02-11 23:45:04.798: E/AndroidRuntime(357):  ... 11 more
02-11 23:45:11.158: I/Process(357): Sending signal. PID: 357 SIG: 9
02-11 23:45:22.708: D/AndroidRuntime(374): Shutting down VM
02-11 23:45:22.708: W/dalvikvm(374): threadid=1: thread exiting with uncaught exception (group=0x40015560)
02-11 23:45:22.728: E/AndroidRuntime(374): FATAL EXCEPTION: main
02-11 23:45:22.728: E/AndroidRuntime(374): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.ye/com.ye.YehActivity}: java.lang.NullPointerException
02-11 23:45:22.728: E/AndroidRuntime(374):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
02-11 23:45:22.728: E/AndroidRuntime(374):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-11 23:45:22.728: E/AndroidRuntime(374):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-11 23:45:22.728: E/AndroidRuntime(374):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-11 23:45:22.728: E/AndroidRuntime(374):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-11 23:45:22.728: E/AndroidRuntime(374):  at android.os.Looper.loop(Looper.java:123)
02-11 23:45:22.728: E/AndroidRuntime(374):  at android.app.ActivityThread.main(ActivityThread.java:3683)
02-11 23:45:22.728: E/AndroidRuntime(374):  at java.lang.reflect.Method.invokeNative(Native Method)
02-11 23:45:22.728: E/AndroidRuntime(374):  at java.lang.reflect.Method.invoke(Method.java:507)
02-11 23:45:22.728: E/AndroidRuntime(374):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-11 23:45:22.728: E/AndroidRuntime(374):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-11 23:45:22.728: E/AndroidRuntime(374):  at dalvik.system.NativeStart.main(Native Method)
02-11 23:45:22.728: E/AndroidRuntime(374): Caused by: java.lang.NullPointerException
02-11 23:45:22.728: E/AndroidRuntime(374):  at com.ye.YehActivity.onCreate(YehActivity.java:23)
02-11 23:45:22.728: E/AndroidRuntime(374):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-11 23:45:22.728: E/AndroidRuntime(374):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
02-11 23:45:22.728: E/AndroidRuntime(374):  ... 11 more
02-11 23:45:25.497: I/Process(374): Sending signal. PID: 374 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:00:33.533

在你的

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    b.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent i=new Intent(YehActivity.this,he.class);
            //startActivity(i);
            startActivityForResult(i, r);
            }
    });
} 
```

`onCreate()`您尝试使用的方法`b`，但您从未初始化它（我假设它声明为全局变量）。`NullPointerException`这意味着当您尝试调用时会遇到一个`setOnClickListener()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T12:51:36.133

在 OnCreate() 的代码中，您必须将 b 声明为按钮，然后对其应用侦听器。

```
b=(Button) findViewById(R.id.button12); 
```

还要检查您的数据是否为空。如果它为空，则不能正确处理。

然后你的代码运行良好。

# c# - 设计 C# SOAP API 客户端/包装器

> ID：14797358
> 
> 赞同：3
> 
> 时间：2013-02-10T11:41:34.353
> 
> 标签：c#, api, soap, webservice-client

**背景**
我正在使用 C# 与 SOAP Web 服务进行交互。我在 Visual Studio 中工作并已成功设置服务引用，并且可以在我的代码中使用 Web 服务。

考虑到 C# 作为一种语言的强大功能，我的问题与“如何最好地”设计 API 的客户端/包装器有关。

**中央“请求”类**
我曾考虑创建一个整体类来处理对服务的请求，从而处理 API 特定错误的所有各种排列（有很多），并优雅地降级。这个类也可能是 API 客户端的“控制器”，它还提供内部调用和外部世界/代码之间的整体接口。

然后我注意到每个 API 调用需要并且可以返回的数据类型种类繁多。当然这意味着这个“请求”功能*不能*被通用处理（并且必须在每种特定类型的请求中实现 - 例如身份验证、车辆位置、工作/订单）？

或者如果可以，C# 作为一种语言如何帮助我以抽象的方式处理类型？

与往常一样，感谢您抽出宝贵的时间阅读并提供任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T21:55:05.427

这个问题在细节上有点模糊，但我会尝试提供一些建议。

首先，我认为在外部 API 上创建一个包装器是明智的。我将使用外部电子邮件提供商的示例来尝试回答您的问题。

想象一下，我们有一个第三方电子邮件 API，我们想围绕它做一个包装器。

我将首先制作一个包装器，该包装器的行为方式与我期望电子邮件 API 的工作方式相同。应该有这样的方法：

```
 public EmailResponse SendEmail(EmailRequest request) { }
public User GetUser(string email) { }
public void OptOut(string email) { } 

```

我首先设计我作为客户认为对域通用且易于使用的东西。

然后，您实现了直接映射到第三方 API 的包装器接口。在上面的示例中，发送电子邮件可能需要两个外部 API 调用，但使用您的包装器的人不会知道这一点。

在我看来，如果您将它们与特定实现绑定得太紧密，那么包装器将毫无价值。

C# 有大量的语言特性使这种方法成为可能，但我认为只使用一个简单的接口就可以满足您的需求。没有必要让它变得更难。

# java - 获取组件对象的组件？

> ID：14797368
> 
> 赞同：1
> 
> 时间：2013-02-10T11:42:27.117
> 
> 标签：java, user-interface, components

我只是为了我的兴趣而尝试写以下内容：

```
public void enableComponents(boolean enable) {
    Component[] components = getContentPane().getComponents();

    for (int i = 0; i < components.length; ++i) {
        components[i].setEnabled(enable);
    }
// [...] 
```

在“Component[]”数组中，例如还可以包含一个包含更多 GUI 元素的 JPanel。但是我怎么能访问它们呢？没有像“components[i].getCOMponents()”这样的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T11:49:42.220

awt 设计器将 Container 类作为一种特殊的组件，我也不知道为什么，但是您可以利用此功能。

要查找所有子组件，您可以检查该组件是否为容器。如果不是，则它不能有子组件。如果是，则转换为 Container 并访问它们。如果您还需要子子组件，请递归。

```
Component[] components = getContentPane().getComponents();

for (int i = 0; i < components.length; ++i) {
   if ((components[i] instanceof Container)) {
       Container subContainer = (Container)components[i];
       //do something here
   }else{
       //do something here
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T11:45:25.300

你可以这样做：

```
public void enableComponents(Container container, boolean enable) {

    Component[] components = container.getComponents();

    for (int i = 0; i < components.length; ++i) {
        components[i].setEnabled(enable);
        if (components[i] instanceof Container) {
            Container subContainer = (Container)components[i];
            enableComponents(subContainer, enable);
        }
    }
} 
```

并传入`getContentPane()`开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T11:49:20.947

组件包含在`Container`. `Panel`extends `Container`，因此您可以获得它的组件。因此，要获取子组件，您必须将组件转换为 Container（如果它是 Container 的实例）：

```
public void enableComponents(boolean enable) {
    enableComponent(getContentPane());
}

public void enableComponent(Component component, boolean enable) {
    component.setEnabled(enable)

    if (component instanceof Container) {
        Container container = (Container)component;
        for (Component c : container.getComponents()) {
             enableComponent(c, enable);  // recursive call
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T11:49:52.650

```
Component[] components = getContentPane().getComponents();
 for (int i = 0; i < components.length; ++i) {
    components[i].setEnabled(enable);
  }
Arrays.asList(components).get(1); 
```

# c# - 继承类铸造

> ID：14797370
> 
> 赞同：3
> 
> 时间：2013-02-10T11:42:27.910
> 
> 标签：c#, casting

我有这个基类：

```
namespace DynamicGunsGallery
{
    public class Module
    {
        protected string name;

        public virtual string GetName() { return name; }
        public virtual string GetInfo() { return null;  }
    }
} 
```

我创建了从基类继承的动态库，例如（AK47.dll）

```
namespace DynamicGunsGallery
{
    public class AK47 : Module
    {
        public AK47() { name = "AK47";  }

        public override string GetInfo()
        { 
            return @"The AK-47 is a selective-fire, gas-operated 7.62×39mm assault rifle, first developed in the USSR by Mikhail Kalashnikov.
                    It is officially known as Avtomat Kalashnikova . It is also known as a Kalashnikov, an AK, or in Russian slang, Kalash.";
        }
    }
} 
```

我正在使用它加载动态库（[受此链接启发](http://www.michael-clarke-blog.com/2010/08/c-dynamic-class-loading/comment-page-1/#comment-6340)）：

```
namespace DynamicGunsGallery
{
    public static class ModulesManager
    {
        public static Module getInstance(String fileName)
        {
            /* Load in the assembly. */
            Assembly moduleAssembly = Assembly.LoadFile(fileName);

            /* Get the types of classes that are in this assembly. */
            Type[] types = moduleAssembly.GetTypes();

            /* Loop through the types in the assembly until we find
             * a class that implements a Module.
             */
            foreach (Type type in types)
            {
                if (type.BaseType.FullName == "DynamicGunsGallery.Module")
                {
                    //
                    // Exception throwing on next line !
                    //
                    return (Module)Activator.CreateInstance(type);
                }
            }

            return null;
        }
    }
} 
```

我在两者中都包含了基类，我的可执行文件包含 ModuleManager 和 dll 库。编译时我没有问题，但是当我运行此代码时出现错误：

> **InvalidCastException**未处理。
> 
> *无法将 DynamicGunsGallery.AK47 类型的对象转换为 DynamicGunsGallery.Module*

所以问题是：**为什么我不能将派生类转换为基类？**

还有其他方法可以加载动态库并使用基类中的方法“控制”它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T12:00:51.817

来自您的评论：

在您的子库中，您不能重新声明模块；您必须从原始库中引用该模块。

从包含 ak 类的项目中添加对主项目的引用。

我还考虑更改名称空间，以使您有两个库在运行

# status - 通道状态的含义

> ID：14797371
> 
> 赞同：3
> 
> 时间：2013-02-10T11:42:36.573
> 
> 标签：status, smpp, kannel

我们已经配置了 kannel，状态看起来像

```
SMS: received 0 (0 queued), sent 15133 (0 queued), store size 0
SMS: inbound (0.00,0.00,0.00) msg/sec, outbound (3.08,15.23,0.02) msg/sec

DLR: received 14232, sent 0
DLR: inbound (11.45,5.64,0.02) msg/sec, outbound (0.00,0.00,0.00) msg/sec
DLR: 980 queued, using internal storage

Box connections:
    smsbox:vsmsc, IP 127.0.0.1 (0 queued), (on-line 8d 21h 38m 41s) 

smsc1[smsc1]    SMPP:xxxxx.xxxxx.com:2775/2775:xxxxx:SMPP (online 769120s, rcvd: sms 0 (0.00,0.00,0.00) / dlr 1 (0.00,0.00,0.00), sent: sms 1 (0.00,0.00,0.00) / dlr 0 (0.00,0.00,0.00), failed 0, queued 0 msgs) 
```

在 DLR 入站中，它显示 (11.45,5.64,0.02) msg​​/sec。() 里面有 3 个值。每个的含义是什么？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T15:43:10.150

1.  最后一分钟的平均值；
2.  最后 5 分钟的平均值；
3.  所有运行时的平均值。

# c# - 实体框架 - 子查询的结果，速度问题？

> ID：14797372
> 
> 赞同：1
> 
> 时间：2013-02-10T11:42:45.400
> 
> 标签：c#, linq, entity-framework, subquery

我进行了查询以获取文章列表，每个文章都绑定到“标题”，因此我检索标题以及相关文章及其属性。该查询有效，但是在其当前样式中

*   有点乱（在我看来）
*   花费的`.ToList()`时间比我预期的要长。

有没有人看到速度问题的任何明显原因？

```
 var offerheaders = 
        from o in dbcontext.F_CAB_OFFER_HEADERS
        where
        o.OFHD_FK_BUYER == userinfo.orgaTypeSequence
        && o.OFHD_VALID_FROM <= userinfo.selectedDate
        && o.OFHD_VALID_TO >= userinfo.selectedDate
        && o.OFHD_DELETED_YN == 0
        && o.OFHD_DELETED_BY_OWNER_YN == false
        && o.OFHD_OFFER_TYPE == userinfo.offerType
        orderby o.OFHD_NO ascending
        select o;

    var offerlist = 
        from ofhd in offerheaders
        select new {
            ofhd = new {
                OfferNo = ofhd.OFHD_NO,
                OfferSequence = ofhd.OFHD_SEQUENCE,
                ValidFrom = ofhd.OFHD_VALID_FROM,
                ValidTo = ofhd.OFHD_VALID_TO,
                OfferType = ofhd.OFHD_OFFER_TYPE,
                Maingroup = new { cdmg_seq = ofhd.F_CAB_CD_MAIN_GROUP_TYPE.CDMG_SEQUENCE, Desc = ofhd.F_CAB_CD_MAIN_GROUP_TYPE.CDMG_DESC },
                Supplier = new {
                    Name = ofhd.F_CAB_GROWER.F_CAB_ORGANISATION.ORGA_NAME,
                    Pic = ofhd.F_CAB_GROWER.F_CAB_ORGANISATION.ORGA_FK_PICTURE,
                    Seq = ofhd.F_CAB_GROWER.GROW_SEQUENCE
                },
                Caption = ofhd.OFHD_CAPTION,
                Seperate = ofhd.OFHD_SHOW_SEPARATE_YN,
                //ofdts = (from ofdt in dbcontext.F_CAB_OFFER_DETAILS.Where(x => x.OFDT_FK_OFFER_HEADER == ofhd.OFHD_SEQUENCE && x.OFDT_NUM_OF_ITEMS > 0 && x.OFDT_LATEST_DELIVERY_DATE_TIME > compareDateTime && x.OFDT_LATEST_ORDER_DATE_TIME > compareDateTime)
                ofdts = from ofdt in dbcontext.F_CAB_OFFER_DETAILS
                        join props in dbcontext.F_CAB_CAB_PROP on ofdt.OFDT_FK_CAB_CODE equals props.PROP_FK_CABC_SEQ
                        join cabcode in dbcontext.F_CAB_CD_CAB_CODE on ofdt.OFDT_FK_CAB_CODE equals cabcode.CABC_SEQUENCE
                        join cabgroup in dbcontext.F_CAB_CD_CAB_GROUP on cabcode.CABC_FK_CAB_GROUP equals cabgroup.CDGR_SEQUENCE
                        join grouptype in dbcontext.F_CAB_CD_GROUP_TYPE on cabgroup.CDGR_FK_GROUP_TYPE equals grouptype.CDGT_SEQUENCE
                        join maingrouptype in dbcontext.F_CAB_CD_MAIN_GROUP_TYPE on grouptype.CDGT_FK_MAIN_GROUP equals maingrouptype.CDMG_SEQUENCE
                        join caca in dbcontext.F_CAB_CAB_CASK_MATRIX on ofdt.OFDT_FK_CACA_SEQ equals caca.CACA_SEQUENCE
                        join cask in dbcontext.F_CAB_CD_CASK on caca.CACA_FK_CASK equals cask.CDCA_SEQUENCE
                        join vbncode in dbcontext.F_CAB_CAB_VBN_MATRIX on cabcode.CABC_SEQUENCE equals vbncode.CVMA_FK_CAB_CODE
                        join grel in dbcontext.F_CAB_GENERAL_RELATIONS on ofdt.OFDT_FK_GREL_SEQ equals grel.GREL_SEQUENCE into greltable
                            from g_loj in greltable.DefaultIfEmpty()
                        where 
                            ofdt.OFDT_FK_OFFER_HEADER == ofhd.OFHD_SEQUENCE 
                            && ofdt.OFDT_NUM_OF_ITEMS > 0
                            && props.PROP_FK_CDLA_SEQ == userinfo.lang.CDLA_SEQUENCE
                        orderby props.PROP_CAB_DESC ascending
                        select new {
                            Desc = props.PROP_CAB_DESC,
                            Group = new { cdgr_seq = cabgroup.CDGR_SEQUENCE, Desc = cabgroup.CDGR_DESC },
                            Grouptype = new { grouptype.CDGT_SEQUENCE, Desc = grouptype.CDGT_DESC },
                            Properties = new CABProperties { props = props },            
                            Price = ofdt.OFDT_ITEM_PRICE,
                            PIC_SEQ = ofdt.OFDT_FK_PICTURE ?? ((cabcode.CABC_FK_PICTURE ?? cabcode.CABC_SEQUENCE)),
                            PIC_URL = ofdt.OFDT_EXT_PICTURE_REF ?? "",
                            Seq = ofdt.OFDT_SEQUENCE,
                            Available = ofdt.OFDT_NUM_OF_ITEMS,
                            CabCode = ofdt.F_CAB_CD_CAB_CODE.CABC_CAB_CODE,
                            VBNCode = vbncode.CVMA_FK_VBN_CODE,
                            Remark = ofdt.OFDT_REMARK,
                            IsSpecial = ofdt.OFDT_SPECIAL_YN,
                            Arrived = inTransit ? ofdt.OFDT_ARRIVAL_DATE < DateTime.Now : true,
                            Cask = new CABCask { cask = cask, caca = caca },                                            
                            Supplier = g_loj == null ? (ofdt.OFDT_SUPPLIER ?? "") : g_loj.GREL_NAME,
                            SupplierWeb = g_loj == null ? "" : g_loj.GREL_WEBSITE_URL,
                            SupplierLogo = g_loj == null ? ofhd.F_CAB_GROWER.F_CAB_ORGANISATION.ORGA_FK_PICTURE : g_loj.GREL_FK_PICT_SEQ,
                            SupplierSeq = g_loj == null ? -1 : g_loj.GREL_SEQUENCE,
                        }
            }
        };
    userinfo.mainofferlist = offerlist.ToList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:32:33.990

As Daniel Kelly also mentioned the ToList function is where your query is executed, because these LinqToEntities queries are executed at the point where they are first enumerated, and ToList does that to be able to create a list.

Basically the reason why your querying takes so much time can be separated into two different reasons:

1.  you are using too much projections and I thine (the parts with new { })
2.  your query has an incredible amount of join clauses

I would recommend to separate your query into subqueries, and run them separately like the first part in

```
...
select o 
```

use

```
...
select o).ToList() 
```

by breaking down the main query where you have a lot of subqueries it will be faster and much more readable, so you have less "messiness".

And last but not least you should create mapping for the anonymous objects, and use those classes other than projection that should speed up your query.

# axis2 - 在axis2上实现ws-notification

> ID：14797373
> 
> 赞同：0
> 
> 时间：2013-02-10T11:42:57.660
> 
> 标签：axis2, ws-notification

有谁知道如何在 Axis2 上实现 WS-Notification？我应该如何开始，或者我在哪里可以找到相关信息？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T11:50:43.190

快速谷歌搜索为您提供了 2007 年的一些信息。两者：

*   [阿帕奇萨凡](http://ws.apache.org/savan/)
*   [阿帕奇缪斯](http://ws.apache.org/muse/docs/2.2.0/manual/index.html)

在 Axis2 上实现 WS-Notification。Muse 站点包含一些示例代码，因此您可以从示例开始。

# mysql - MySQL 枚举与集合

> ID：14797374
> 
> 赞同：108
> 
> 时间：2013-02-10T11:43:35.273
> 
> 标签：mysql, database

对于“enum”和“set”的 MySQL 数据类型，使用一个与另一个有什么区别和优缺点？

示例数据类型：

*   枚举（'A'，'B'，'C'）
*   设置（'A'，'B'，'C'）

我知道的唯一区别是 ENUM 只允许选择一个值，而 SET 允许选择多个值。

* * *

## 回答 #1

> 赞同：250
> 
> 时间：2015-08-14T20:03:46.257

类比：
ENUM = 单选字段（仅接受的值是列出的值，只能选择一个）
SET = 复选框字段（仅接受的值是列出的值，可以选择多个）

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2013-02-10T14:02:03.453

As the [MySQL documentation](http://dev.mysql.com/doc/refman/5.6/en/constraint-enum.html) states:

> Definition of a ENUM or SET column does act as a constraint on values entered into the column. An error occurs for values that do not satisfy these conditions:
> 
> An ENUM value must be one of those listed in the column definition, or the internal numeric equivalent thereof. The value cannot be the error value (that is, 0 or the empty string). For a column defined as ENUM('a','b','c'), values such as '', 'd', or 'ax' are illegal and are rejected.
> 
> A SET value must be the empty string or a value consisting only of the values listed in the column definition separated by commas. For a column defined as SET('a','b','c'), values such as 'd' or 'a,b,c,d' are illegal and are rejected.

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2013-11-28T08:19:54.643

Enum 和 Set 完全取决于要求，例如，如果您有一个单选按钮列表，一次只能选择一个，请使用 Enum。如果您有一个复选框列表，一次可以选择一个以上的项目，请使用 set。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2015-05-14T01:18:42.943

```
CREATE TABLE setTest(
  attrib SET('bold','italic','underline')
);

INSERT INTO setTest (attrib) VALUES ('bold');
INSERT INTO setTest (attrib) VALUES ('bold,italic');
INSERT INTO setTest (attrib) VALUES ('bold,italic,underline'); 
```

你可以把上面的代码复制粘贴到mysql中，你会发现**SET**其实是一个集合。您可以存储您声明的每个属性组合。

```
CREATE TABLE enumTest(
 color ENUM('red','green','blue')
);

INSERT INTO enumTest (color) VALUES ('red');
INSERT INTO enumTest (color) VALUES ('gray');
INSERT INTO enumTest (color) VALUES ('red,green'); 
```

您也可以复制上面的代码。而且你会发现每个**ENUM**实际上每次只能存储一次。你会发现最后两行的结果都是空的。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2018-08-22T05:40:08.247

其实很简单：

当您定义**ENUM('Yes', 'No', 'Maybe')**时，您**必须**仅插入这些值之一（或它们的位置索引号）

当您定义**SET('R', 'W', 'X')**时，您**可以**插入一个空字符串，**或者**这些值中的一个或多个。如果您插入不在预定义集中的内容，则会插入一个空字符串。请注意，在插入所有重复值之前，都会丢弃所有重复值，因此只插入每个允许值的一个实例。

希望这可以清除它。

请注意，Winbobob 的答案是不正确的，并且包含有缺陷的示例，因为插入多个值时，值必须是字符串，用逗号分隔。他所有的插入实际上只插入一个值（最后两个不在定义的集合中）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-01-06T14:36:46.113

ENUM --> 只选择一个可用的值来插入。

(no_null, no_any_duplicate)

* * *

SET --> 选择任何组合或单个值，如集合并将它们插入。

(null, individual_values, all_the_available_values_together)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-26T08:07:43.540

我补充了到目前为止答案中已经提到的几点，因为我在差异上添加了一个额外的点 -

MySQL 在内部将 ENUM 字符串值存储为值 1 到 n 的十进制整数，用于枚举中具有 n 个成员的列。

MySQL 将 SET 字符串值表示为一个位图，每个值使用一位，因此这些值在内部存储为 1、2、4、8、..... 最多 65,535 个，最多 64 个成员。

这一点证明如下——

**枚举示例 -**

我创建具有数据类型的`table1`列的表，具有以下表结构 -`col1``ENUM('a','b','c','d','e','f','g','h','i','j')`

```
| table1 | CREATE TABLE `table1` (
  `id` int unsigned NOT NULL AUTO_INCREMENT,
  `col1` enum('a','b','c','d','e','f','g','h','i','j') DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci | 
```

`col1`内部存储如下 -

```
+----+---------+---------------+
| id | element | decimal_value |
+----+---------+---------------+
|  1 | a       |             1 |
|  2 | b       |             2 |
|  3 | c       |             3 |
|  4 | d       |             4 |
|  5 | e       |             5 |
|  6 | f       |             6 |
|  7 | g       |             7 |
|  8 | h       |             8 |
|  9 | i       |             9 |
| 10 | j       |            10 |
+----+---------+---------------+ 
```

现在，假设我们要将值 -`'e'`插入`col1`

`'e'`有索引`5`

因此要进入`'e'`我们`col1`使用以下查询 -

```
INSERT INTO table1  VALUES (1, 5); 
```

然后我们检查存在于`table1`-

```
SELECT * FROM table1;
+----+------+
| id | col1 |
+----+------+
|  1 | e    |
+----+------+ 
```

我们看到在第一行我们的值为`col1`as`'e'`

同样，假设我们想将值 -`'i'`插入`col1`

`'i'`有索引`9`

因此要进入`'i'`我们`col1`使用以下查询 -

```
INSERT INTO table1  VALUES (2, 9); 
```

然后我们检查存在于`table1`-

```
SELECT * FROM table1;
+----+------+
| id | col1 |
+----+------+
|  1 | e    |
|  2 | i    |
+----+------+ 
```

我们看到在第二行我们的值为`col1`as`'i'`

同样，假设我们想将值 -`'a'`插入`col1`

`'a'`有索引`1`

因此要进入`'a'`我们`col1`使用以下查询 -

```
INSERT INTO table1  VALUES (3, 1); 
```

然后我们检查存在于`table1`-

```
SELECT * FROM table1;
+----+------+
| id | col1 |
+----+------+
|  1 | e    |
|  2 | i    |
|  3 | a    |
+----+------+ 
```

我们看到在第三行我们的值为`col1`as`'a'`

* * *

**设置示例 -**

我创建具有数据类型的`table1`列的表，具有以下表结构 -`col1``SET('a','b','c','d','e','f','g','h','i','j')`

```
| table1 | CREATE TABLE `table1` (
  `id` int unsigned NOT NULL AUTO_INCREMENT,
  `col1` set('a','b','c','d','e','f','g','h','i','j') DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci | 
```

`col1`内部存储如下 -

```
+----+---------+----------------+---------------+
| id | element | binary_value   | decimal_value |
+----+---------+----------------+---------------+
|  1 | a       | 0000 0000 0001 |             1 |
|  2 | b       | 0000 0000 0010 |             2 |
|  3 | c       | 0000 0000 0100 |             4 |
|  4 | d       | 0000 0000 1000 |             8 |
|  5 | e       | 0000 0001 0000 |            16 |
|  6 | f       | 0000 0010 0000 |            32 |
|  7 | g       | 0000 0100 0000 |            64 |
|  8 | h       | 0000 1000 0000 |           128 |
|  9 | i       | 0001 0000 0000 |           256 |
| 10 | j       | 0010 0000 0000 |           512 |
+----+---------+----------------+---------------+ 
```

现在，假设我们要将值 -`'e,f,i'`插入`col1`

然后`'e,f,i'`通过将 的 binary_values 相加来计算 binary_value `'e'`，`'f'`并且`'i'`对应的`0001 0011 0000`decimal_value`304`如下所示 -

```
+----+---------+----------------+---------------+
| id | element | binary_value   | decimal_value |
+----+---------+----------------+---------------+
|  5 | e       | 0000 0001 0000 |            16 |
|  6 | f       | 0000 0010 0000 |            32 |
|  9 | i       | 0001 0000 0000 |           256 |
+----+---------+----------------+---------------+
|    | e,f,i   | 0001 0011 0000 |           304 |
+----+---------+----------------+---------------+ 
```

因此要进入`'e,f,i'`我们`col1`使用以下查询 -

```
INSERT INTO table1  VALUES (1, 304); 
```

然后我们检查存在于`table1`-

```
SELECT * FROM table1;
+----+-------+
| id | col1  |
+----+-------+
|  1 | e,f,i |
+----+-------+ 
```

我们看到在第一行我们的值为`col1`as`'e,f,i'`

同样，假设我们想将值 -`'a,j'`插入`col1`

然后binary_value`'a,j'`是通过将binary_values`'a'`与`'j'`is相加来计算的`0010 0000 0001`，对应的decimal_value`513`如下图所示——

```
+----+---------+----------------+---------------+
| id | element | binary_value   | decimal_value |
+----+---------+----------------+---------------+
|  1 | a       | 0000 0000 0001 |             1 |
| 10 | j       | 0010 0000 0000 |           512 |
+----+---------+----------------+---------------+
|    | a,j     | 0010 0000 0001 |           513 |
+----+---------+----------------+---------------+ 
```

因此要进入`'a,j'`我们`col1`使用以下查询 -

```
INSERT INTO table1  VALUES (2, 513); 
```

然后我们检查存在于`table1`-

```
SELECT * FROM table1;
+----+-------+
| id | col1  |
+----+-------+
|  1 | e,f,i |
|  2 | a,j   |
+----+-------+ 
```

我们看到在第二行我们的值为`col1`as`'a,j'`

同样，假设我们想将值 -`'b,d,h,i'`插入`col1`

然后的 binary_value是通过将,的`'b,d,h,i'`binary_values 相加计算得到的，`'b'`对应的decimal_value如下所示`'d'``'h'``'i'``0001 1000 1010``394`

```
+----+---------+----------------+---------------+
| id | element | binary_value   | decimal_value |
+----+---------+----------------+---------------+
|  2 | b       | 0000 0000 0010 |             2 |
|  4 | d       | 0000 0000 1000 |             8 |
|  8 | h       | 0000 1000 0000 |           128 |
|  9 | i       | 0001 0000 0000 |           256 |
+----+---------+----------------+---------------+
|    | b,d,h,i | 0001 1000 1010 |           394 |
+----+---------+----------------+---------------+ 
```

因此要进入`'b,d,h,i'`我们`col1`使用以下查询 -

```
INSERT INTO table1  VALUES (3, 394); 
```

然后我们检查存在于`table1`-

```
SELECT * FROM table1;
+----+---------+
| id | col1    |
+----+---------+
|  1 | e,f,i   |
|  2 | a,j     |
|  3 | b,d,h,i |
+----+---------+ 
```

我们看到在第三行我们的值为`col1`as`'b,d,h,i'`

# python - 我应该总是在 `except` 语句中指定异常类型吗？

> ID：14797375
> 
> 赞同：101
> 
> 时间：2013-02-10T11:43:43.683
> 
> 标签：python, exception, pep8

在使用 PyCharm IDE 时，使用`except:`无异常类型会触发 IDE 的提醒，该异常子句是`Too broad`.

我应该忽略这个建议吗？还是 Pythonic 总是指定异常类型？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-02-10T12:01:51.707

指定显式异常类型几乎总是更好。如果您使用裸`except:`子句，您最终可能会捕获除您期望捕获的异常之外的异常 - 这可能会隐藏错误或在程序没有按照您的预期执行时使调试变得更加困难。

例如，如果您要向数据库中插入一行，您可能希望捕获一个表明该行已存在的异常，以便进行更新。

```
try:
    insert(connection, data)
except:
    update(connection, data) 
```

如果您指定一个 bare `except:`，您还会捕获一个表明数据库服务器已崩溃的套接字错误。最好只捕获您知道如何处理的异常 - 程序在异常点失败通常比继续但以奇怪的意外方式表现要好。

您可能想要使用裸机的一种情况`except:`是您需要始终运行的程序的顶层，例如网络服务器。但是，您需要非常小心地记录异常，否则将无法找出问题所在。基本上，在一个程序中最多应该只有一个地方可以做到这一点。

所有这一切的一个必然结果是你的代码永远不应该这样做，`raise Exception('some message')`因为它强制客户端代码使用`except:`（或者`except Exception:`几乎*一样*糟糕）。您应该定义一个特定于您要发出信号的问题的异常（可能继承自某些内置异常子类，如`ValueError`or `TypeError`）。或者你应该提出一个特定的内置异常。这使您的代码的用户能够小心地捕捉他们想要处理的异常。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-02-10T11:54:23.287

您不应忽视口译员给您的建议。

来自 Python 的[PEP-8](http://www.python.org/dev/peps/pep-0008/)样式指南：

> 捕获异常时，尽可能提及特定的异常，而不是使用裸的 except: 子句。
> 
> 例如，使用：

```
 try:
     import platform_specific_module 
 except ImportError:
     platform_specific_module = None 
```

> 一个简单的 except: 子句将捕获 SystemExit 和 KeyboardInterrupt 异常，使使用 Control-C 中断程序变得更加困难，并且可以掩盖其他问题。如果要捕获所有表明程序错误的异常，请使用 except Exception: (bare except 等价于 except BaseException:)。
> 
> 一个好的经验法则是将裸“除外”子句的使用限制在两种情况下：
> 
> 如果异常处理程序将打印或记录回溯；至少用户会意识到发生了错误。如果代码需要做一些清理工作，然后让异常通过 raise 向上传播。尝试...终于可以成为处理这种情况的更好方法。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-10T12:20:07.050

这不是 Python 特有的。

例外的全部意义在于尽可能地在问题发生的地方处理问题。

因此，您保留在特殊情况下可能触发问题和解决方案的代码彼此“相邻”。

问题是您无法知道一段代码可能引发的所有异常。您所知道的是，如果它是一个说找不到文件的异常，那么您可以捕获它并提示用户获取一个执行或取消该功能的用户。

如果你把它放在 try catch 周围，那么无论你的文件例程中存在什么问题（只读、权限、UAC，而不是真正的 pdf 等），每个人都会进入你的文件 not found catch 和你的用户正在尖叫“但它就在那里，这段代码是垃圾”

现在有几种情况你可能会抓住一切，但应该有意识地选择它们。

它们是捕获，撤消一些本地操作（例如创建或锁定资源，（例如打开磁盘上的文件进行写入），然后再次抛出异常，以在更高级别处理）

另一个你是你不在乎为什么会出错。以印刷为例。你可能有一个问题，说你的打印机有问题，请解决它，不要因为它而杀死应用程序。如果您的代码使用某种时间表执行一系列单独的任务，那么类似的徒劳无功，您不会希望整个事情都死掉，因为其中一个任务失败了。

注意 如果您执行上述操作，我不能推荐某种异常日志记录，例如足够高的 try catch log end。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-10T11:45:07.533

你也会用它来捕捉例如Control-C，所以除非你再次“抛出”它，否则不要这样做。但是，在这种情况下，您应该使用“finally”。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-10T11:45:31.977

始终指定异常类型，有很多类型是您不想捕获的，例如`SyntaxError`,`KeyboardInterrupt`等`MemoryError`。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-03-12T08:43:34.617

这是我使用的地方，除了没有类型

1.  快速而肮脏的原型设计

这是我的代码中未检查异常的主要用途

2.  顶级 main() 函数，我在其中记录每个未捕获的异常

我总是添加这个，这样生产代码就不会溢出堆栈跟踪

3.  应用层之间

我有两种方法：

*   第一种方法：当较高级别的层调用较低级别的函数时，它将调用包装在类型化的异常中以处理“顶级”较低级别的异常。但是我添加了一个通用的 except 语句，以检测低级函数中未处理的低级异常。

*我更喜欢这种方式，我发现更容易检测应该适当捕获哪些异常：当更高级别记录较低级别的异常时，我可以更好地“看到”问题*

*   第二种方法：较低层的每个顶层函数都将其代码包装在通用异常中，以捕获该特定层上所有未处理的异常。

*一些同事更喜欢这种方式，因为它在它们“所属”的较低级别函数中保留较低级别的异常。*

* * *

## 回答 #7

> 赞同：-14
> 
> 时间：2017-06-26T23:53:43.193

试试这个：

```
try:
    #code
except ValueError:
    pass 
```

我从这个链接得到了答案，如果其他人遇到这个问题[，请查看](https://pagure.io/pagure/c/d9845803)

# algorithm - 查找许多线段的联合长度

> ID：14797377
> 
> 赞同：4
> 
> 时间：2013-02-10T11:43:47.337
> 
> 标签：algorithm

我在 x 轴上以它们的开始和结束 x 坐标的形式有几个粗体线段。某些线段可能重叠。如何找到所有线段的联合长度。

例如，一条线段是 5,0 到 8,0，其他是 9,0 到 12,0。两者都不重叠，因此长度之和为 3 + 3 = 6。

一个线段是 5,0 到 8,0，其他是 7,0 到 12,0。但它们在 7,0 到 8,0 的范围内重叠。所以长度的并集是 7。

但是 x 坐标可能是浮点数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T11:59:52.083

将线段表示为 2 个`EndPoint`对象。每个`EndPoint`对象都有形式`<coordinate, isStartEndPoint>`。将所有`EndPoint`线段的所有对象放在一个列表中`endPointList`。

算法：

*   排序`endPointList`，**首先**按坐标升序，**然后**将起始端点放在尾端点的前面（无论哪个段，因为它无关紧要 - 都在同一个坐标处）。
*   根据此伪代码循环排序列表：

    ```
    prevCoordinate = -Inf
    numSegment = 0
    unionLength = 0

    for (endPoint in endPointList):
        if (numSegment > 0):
            unionLength += endPoint.coordinate - prevCoordinate

        prevCoordinate = endPoint.coordinate

        if (endPoint.isStartCoordinate):
            numSegment = numSegment + 1
        else:
            numSegment = numSegment - 1 
    ```

该`numSegment`变量将告诉我们是否在一个段中。当它大于 0 时，我们在某个段内，因此我们可以包括到前一个端点的距离。如果为0，则表示当前结束点之前的部分不包含任何段。

复杂性由排序部分决定，因为基于比较的排序算法的下限为 Omega(n log n)，而循环显然最多为 O(n)。所以如果选择基于O(n log n)比较的排序算法，算法的复杂度可以说是O(n log n)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T12:42:15.910

使用范围树。范围树是 n log(n)，就像排序的开始/结束点一样，但它具有额外的优点，重叠范围会减少元素的数量（但可能会增加插入成本） Snippet（未经测试）

```
struct segment {
        struct segment *ll, *rr;
        float lo, hi;
        };

struct segment * newsegment(float lo, float hi) {
struct segment * ret;
ret = malloc (sizeof *ret);
ret->lo = lo; ret->hi = hi;
ret->ll= ret->rr = NULL;
return ret;
}

struct segment * insert_range(struct segment *root, float lo, float hi)
{
if (!root) return newsegment(lo, hi);

        /* non-overlapping(or touching)  ranges can be put into the {l,r} subtrees} */
if (hi < root->lo) {
        root->ll = insert_range(root->ll, lo, hi);
        return root;
        }
if (lo > root->hi) {
        root->rr = insert_range(root->rr, lo, hi);
        return root;
        }

        /* when we get here, we must have overlap; we can extend the current node
        ** we also need to check if the broader range overlaps the child nodes
        */
if (lo < root->lo ) {
        root->lo = lo;
        while (root->ll && root->ll->hi >= root->lo) {
                struct segment *tmp;
                tmp = root->ll;
                root->lo = tmp->lo;
                root->ll = tmp->ll;
                tmp->ll = NULL;
                // freetree(tmp);
                }
        }
if (hi > root->hi ) {
        root->hi = hi;
        while (root->rr && root->rr->lo <= root->hi) {
                struct segment *tmp;
                tmp = root->rr;
                root->hi = tmp->hi;
                root->rr = tmp->rr;
                tmp->rr = NULL;
                // freetree(tmp);
                }
        }

return root;
}

float total_width(struct segment *ptr)
{
float ret;
if (!ptr) return 0.0;

ret = ptr->hi - ptr->lo;
ret += total_width(ptr->ll);
ret += total_width(ptr->rr);

return ret;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T13:17:44.433

这是我刚刚在 Haskell 中编写的解决方案，下面是如何在解释器命令提示符中实现它的示例。段必须以元组列表 [(a,a)] 的形式呈现。我希望你能从代码中对算法有所了解。

```
import Data.List

unionSegments segments = 
  let (x:xs) = sort segments
      one_segment = snd x - fst x
  in if xs /= []
        then if snd x > fst (head xs) 
                then one_segment - (snd x - fst (head xs)) + unionSegments xs
                else one_segment + unionSegments xs
        else one_segment 
```

*Main> :load "unionSegments.hs"
[1 of 1] 编译 Main (unionSegments.hs，解释)
好的，模块已加载：Main。
*Main> unionSegments [(5,8), (7,12)]
7

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-09T16:50:11.053

**Java 实现**

```
import  java.util.*; 
```

公共类 HelloWorld{

```
static void unionLength(int a[][],int sets)
{
    TreeMap<Integer,Boolean> t=new TreeMap<>();

    for(int i=0;i<sets;i++)
    {
         t.put(a[i][0],false);
         t.put(a[i][1],true);

    }
int count=0;
int res=0;
int one=1;
Set set = t.entrySet();
Iterator it = set.iterator();

int prev=0;

while(it.hasNext()) {
    if(one==1){
          Map.Entry me = (Map.Entry)it.next();
          one=0;
          prev=(int)me.getKey();
          if((boolean)me.getValue()==false)
              count++;
          else
              count--;
    }

  Map.Entry me = (Map.Entry)it.next();

  if(count>0)
      res=res+((int)me.getKey()-prev);

  if((boolean)me.getValue()==false)
      count++;
  else
      count--;

   prev=(int)me.getKey();

} 
System.out.println(res);
}
 public static void main(String []args){

    int a[][]={{0, 4}, {3, 6},{8,10}};
    int b[][]={{5, 10}, {8, 12}};
    unionLength(a,3);
    unionLength(b,2);

 } 
```

}

# android - 如何执行圆形图像裁剪功能

> ID：14797381
> 
> 赞同：1
> 
> 时间：2013-02-10T11:43:58.440
> 
> 标签：android, android-imageview, android-image

我有一个演示，它首先从相机拍摄图像，然后要求用户裁剪图像。裁剪屏幕中间有一个矩形框，触摸 4 个面的边框时，在面的中点显示 4 个箭头以更改大小用户想要的盒子。因为它是使用意图 com.android.camera.action.CROP 提供的内置机制。

我想做同样的事情，但圆形窗口。裁剪圆形图像。

有没有人有过这种裁剪功能的经验。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:23:40.637

看看这个功能......这是你需要的吗？

```
public Bitmap getCroppedBitmap(Bitmap bitmap) {
Bitmap output = Bitmap.createBitmap(bitmap.getWidth(),
        bitmap.getHeight(), Config.ARGB_8888);
Canvas canvas = new Canvas(output);

final int color = 0xff424242;
final Paint paint = new Paint();
final Rect rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());

paint.setAntiAlias(true);
canvas.drawARGB(0, 0, 0, 0);
paint.setColor(color);
// canvas.drawRoundRect(rectF, roundPx, roundPx, paint);
canvas.drawCircle(bitmap.getWidth() / 2, bitmap.getHeight() / 2,
        bitmap.getWidth() / 2, paint);
paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
canvas.drawBitmap(bitmap, rect, rect, paint);
//Bitmap _bmp = Bitmap.createScaledBitmap(output, 60, 60, false);
//return _bmp;
return output;
} 
```

检查此链接..[裁剪图像](https://stackoverflow.com/questions/11932805/cropping-circular-area-from-bitmap-in-android)

如果您正在使用 Intents.. 尝试使用这个

```
 intent.setType("image/*");
   intent.putExtra("crop", "true");
   intent.putExtra("scale", scale);
   intent.putExtra("return-data", return_data);
   intent.putExtra("circleCrop", true); 
```

# java - 使用 JSTL 在 JSP 下拉菜单中显示部门代码和描述

> ID：14797386
> 
> 赞同：0
> 
> 时间：2013-02-10T11:44:25.913
> 
> 标签：java, jsp, jstl

`Employee Department`我有一个 DAO 类，它有一个返回 java.util.List 的方法，我`Employee Department Code`从数据库返回。

```
public List<Employee> getEmployeeDetails() {
    List<Employee> emp = new ArrayList<Employee>();

    while (resultSet.next()) {
        emp.add(mapListEmployees(resultSet));
    }
    return emp ;
} 
```

在我的 ManagedBean 中，我想调用`getEmployeeDetails()`方法并将其填充到名为 getEmpDetails 的方法中

```
public List<Employee> getItems() {
    for (Employee employee: myDAO.getEmployeeDetails()) {
        list.add(employeeLabel.getEmployeeName(),
                employeeLabel.getEmployeeDepartment());
    }
} 
```

但问题是`list.add`不允许有两个字符串参数，因为我得到

```
method add(java.lang.String, java.lang.String) not found in 
interface java.util.List 
```

那么如何从 dao 获取值并加载到 ManagedBean 中返回 List 的方法，最后如何使用 jstl 作为下拉组件在 JSP 页面中调用这些值？就像是

```
<select id="emp">
    <c:forEach >
        <option value="${item}">${item}</option>
    </c:forEach>
</select> 
```

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T11:55:16.950

我假设 EmployeeGroup 是独一无二的。因此，您可以使用 Map 而不是 list 来获取键值结构。在此基础上，您可以找到使用 jstl 在 jsp 中打印地图的代码

```
public List<Employee> getItems() {
   Map<String, String> mapObj = new HashMap<String, String>();
            for (Employee employee: 
                 myDAO.getEmployeeDetails()) {
                map.put(employeeLabel.getEmployeeGroup(),
                         employeeLabel.getEmployeeGroupDescription());
            }
 }

JSP:
//Don't forget to add the mapObj to the request context
<select id="emp">
        <c:forEach var="item" items="${mapObj}">
            <option value="${item.key}">${item.value}</option>
        </c:forEach>
    </select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T13:51:19.880

我会跳过各种映射。您可以通过在 bean 中为 employeeDetails 提供公共 getter 来存储 List 并直接从 JSP 中使用它。

```
<select id="emp">
<c:forEach items="${beanName.employeeDetails}" var="res">
    <option value="${res.employeeGroup}">${res.employeeGroupDescription}</option>
</c:forEach> 
```

请确保，您的 sql 通过在 sql 或 UNIQUE 索引中使用 DISTINCT 返回唯一对。

Java代码：

```
 private List<Employee> employeeDetails = new ArrayList<Employee>();
    public List<Employee> getEmployeeDetails() {
    List<Employee> emp = new ArrayList<Employee>();

    while (resultSet.next()) {
        emp.add(mapListEmployees(resultSet));
    }
    this.employeeDetails = emp;

    return this.employeeDetails;
} 
```

# qt - QMdiArea 中子窗口的大小和位置

> ID：14797395
> 
> 赞同：3
> 
> 时间：2013-02-10T11:45:55.553
> 
> 标签：qt, resize, qt4, qt4.7, qmdiarea

我有一个我没有设置的`QMdiArea`对象，但如下所述。`QMainWindow``setCentralWidget()`

```
MainWindow::createMdiArea() {
    QMdiArea mdiArea = new QMdiArea(this)
    mdiArea.setGeometry(0,0,1024,600);
    mdiArea.show(); 
} 
```

我不想将其设置`QMdiArea`为中心小部件。现在我在里面创建了一些子窗口`QMdiArea`，如下

```
MainWindow::createChildWindow()
{
     HelpWindow child1 = new HelpWindow(). // HelpWindow is a very simple class derived from QWidget and containing one QLineEdit. 
     mdiArea.addSubWindow(&child1);

     // Set the geometry of Child widget.
     child1.parentWidget()->setGeometry(0,0,400,100); // Setting geometry which I have saved.
     child1.show();
} 
```

到目前为止，一切都很好。但问题是在子窗口调整大小/关闭事件中我需要保存的大小，`HelpWindow`并且我正在执行以下操作以在其调整大小/关闭事件中保存子窗口的大小。

```
 saveHelpWindowSize(size());
     saveHelpWindowPos(pos()); 
```

好的。问题来了。我从`size()`子窗口内的函数获得的大小与我在函数中使用的大小不同`setGeometry()`，即使我在调整大小事件（即关闭事件）以外的其他方法中看到它。

所以，假设第一次创建子窗口的大小（使用 setGeometry）400、200，当我关闭这个窗口时，我将从中获得的大小`HelpWindow::size()`可能会说`(385, 190)`我将保存，下一次`setGeometry()`将从中获得这个大小设置，此时在关闭事件中我会得到更小的尺寸，最终我的子窗口将具有 size `(0, 0)`。

1：关于如何同步这两种尺寸的任何想法（即，如果子小部件由`setGeometry()`函数设置的大小和我从小部件的`size()`功能获得的小部件的大小）

2：另一个问题，我在子小部件（`HelpWindow`）类中接收resizeEvent / closeEvent事件等，但是当我将子窗口移动到里面时我没有收到moveEvent，`QMdiArea`我收到这个事件的唯一时间是我最大化里面的子窗口`QMdiArea`（我不会这样做）。所以当它的位置改变时，我需要保存我的子窗口的位置。我该怎么做？

# asp.net-mvc - 将原始 html 从视图传递到控制器

> ID：14797401
> 
> 赞同：2
> 
> 时间：2013-02-10T11:46:58.160
> 
> 标签：asp.net-mvc, json, jquery, asp.net-mvc-4

我想将原始 html 从视图传递到控制器。我正在尝试使用 jquery ajax 请求来做到这一点。一切正常，直到带有原始 html 的对象传递给控制器​​。我的错误是什么？这是我的模型、控制器和 jquery。

谢谢你。

模型

```
public class NewsEditionModel
{
    public string Title { get; set; }

    public string SubTitle { get; set; }

    public string Text { get; set; }

} 
```

控制器

```
public ActionResult AddText(NewsEditionModel obj)
    {
        var news = new News();
        try
        {
            news.Text = obj.Text;
            news.PublishDate = DateTime.Now;
            news.Title = obj.Title;
            var repository = new Repository();
            var success = repository.AddNews(news, User.Identity.Name);
            return Json(new {data = success});
        }
        catch (Exception)
        {
            return View("Error");
        }
    } 
```

jQuery

```
function submitForm() {
    var text = ste.getContent();
    var title = $('#title').val();
    var obj1 = JSON.stringify({ Text: text, Title: title, SubTitle: "" });
    var obj = $.parseJSON(obj1);
    $.ajax({
        type: "POST",
        dataType: "json",
        content: "application/json",
        data: {obj: obj},
        url: '@Url.Action("AddText", "News")',
        success: function (res) {

        }
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T12:00:54.557

你可以使用这个例子

```
$.ajax({ 
    url: '@Url.Action("AddText", "News")',
    data: {obj: JSON.stringify({ Text: text, Title: title, SubTitle: "" })},
   contentType: 'application/json',
   dataType: 'json',
   success: function (data) { alert(data); }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T10:46:09.840

只需添加 `<ValidateInput(False)> _`到您的控制器发布请求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T11:57:33.390

我猜不是这个：

```
data: {obj: obj}, 
```

你应该这样做：

```
data: {obj: JSON.stringify({ Text: text, Title: title, SubTitle: "" })}, 
```

# visual-studio-2010 - 如何知道 *.lnk 文件是否链接到某个东西

> ID：14797402
> 
> 赞同：0
> 
> 时间：2013-02-10T11:46:58.173
> 
> 标签：visual-studio-2010, c#-4.0

如何知道 *.lnk 文件是否链接到某个东西。我怎样才能在 C# 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:24:50.743

1.  Get the `Link Target` [Getting specific file attributes](https://stackoverflow.com/questions/6235081/getting-specific-file-attributes)
2.  Check the file from `Link Target Path` if exist using the [File.Exists](http://www.dotnetperls.com/file-exists)

> ```
> class Program
> {
>     [STAThread]
>     static void Main()
>     {
>         List<string> arrHeaders = new List<string>();
> 
>         Shell32.Shell shell = new Shell32.Shell();
>         Shell32.Folder objFolder;
> 
>         objFolder = shell.NameSpace(@"D:\shortcuts");
> 
>         for (int i = 0; i < short.MaxValue; i++)
>         {
>             string header = objFolder.GetDetailsOf(null, i);
>             if (String.IsNullOrEmpty(header))
>                 break;
>             arrHeaders.Add(header);
>         }
> 
>         foreach (Shell32.FolderItem2 item in objFolder.Items())
>         {
>             for (int i = 0; i < arrHeaders.Count; i++)
>             {
>                 //Console.WriteLine("{0}\t{1}: {2}", i, arrHeaders[i], objFolder.GetDetailsOf(item, i));
>                 if (arrHeaders[i] == "Link target")
>                 {
>                     var getPath = objFolder.GetDetailsOf(item, i);
>                     Console.WriteLine("{0}", getPath);
>                     if (File.Exists(getPath))
>                     {
>                         Console.WriteLine("The file exists.");
>                     }
>                     else
>                     {
>                         Console.WriteLine("File not exist");
>                         //Do stuff to delete
>                     }
>                 }
>             }
>         }
>         Console.ReadLine();
>     }
> } 
> ```

# android - 强制关闭错误说明

> ID：14797405
> 
> 赞同：0
> 
> 时间：2013-02-10T11:47:32.453
> 
> 标签：android

我已经向一些人发布了一个应用程序进行测试。他们中的一些人报告说它工作正常，而另一些人说他们在第一次运行时遇到强制关闭错误。我怎样才能得到发生的错误描述，所以我可以修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T11:52:59.763

现在，如果用户运行的是 Android 4.0 或更低版本，请要求用户安装任何 logcat 阅读应用并向您发送堆栈跟踪。

在未来的更新中，集成像[ACRA](https://github.com/ACRA/acra)这样可以自动向您发送错误报告的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T11:50:55.267

请选择您的用户安装[aLogcat](https://play.google.com/store/apps/details?id=org.jtb.alogcat)，并在问题发生时将日志发送给您。毕竟，假设他们都遇到相同的问题，您只需要一个用户向您发送日志，以便您可以获得调用堆栈来诊断它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T12:21:25.707

看这里：

您可以尝试适用于 Android 的**[应用程序崩溃报告](http://code.google.com/p/acra/)**。

第二个最适合错误记录**[BugSense](http://bugsense.com/)**。它立即在仪表板上上传错误消息。

第三，我在 github 上有将错误跟踪发送到开发人员电子邮件的示例。

[https://github.com/ajaysaini-sgvu/CrashReport](https://github.com/ajaysaini-sgvu/CrashReport)

# c++ - 如何将整数转换为 Char* C++

> ID：14797406
> 
> 赞同：-6
> 
> 时间：2013-02-10T11:47:33.290
> 
> 标签：c++, integer, char

我有一个 fork 进程，它添加 2 个数字并返回一个整数。

唯一的问题是总和是一个整数，为了继续返回数组，我需要一个指向该整数的 char*。

我如何在 C++ 中实现这一点的任何想法；（我不能使用 String.h 库）

编辑**

这是我正在使用的代码部分

```
 //process has been completed
else
{
for(int q=0; q<numofProc; q++)
{
wait(&status);
if (WIFEXITED(status))
    {
    value = WEXITSTATUS(status);
temp = (char)(value);
    char* pointer = (char*)temp;
sumArray[sizeSum] = pointer;
sizeSum++;
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T11:50:36.700

如果您希望`char*`指针指向`int`您，只需将您的`int*`转换为`char*`. 喜欢`(char*)intptr`。不过，这对我来说听起来不是一个好`c++`习惯。确保您没有将指向函数的局部变量的指针返回。

我假设如果您想返回指向整数字符表示的指针，您会这么说。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T11:51:02.707

```
int num = 3234;
stringstream ss;
ss << num;

const char *res = ss.str().c_str(); 
```

# javascript - 如何将纹理应用于 THREE.ExtrudeGeometry？

> ID：14797407
> 
> 赞同：2
> 
> 时间：2013-02-10T11:47:35.630
> 
> 标签：javascript, html, canvas, three.js

```
var arcShape = new THREE.Shape();
arcShape.moveTo( 50, 10 );
arcShape.absarc( 10, 10, 40, 0, Math.PI*2, false );

var map1 = new THREE.ImageUtils.loadTexture( 'moon.jpg' );
var geometry = new THREE.ExtrudeGeometry( arcShape, extrudeSettings );
var new3D = new THREE.Mesh( geometry, new THREE.MeshBasicMaterial( { map: map1 } ) );
new3D.receiveShadow = true;
obj3Dmassive.add( new3D ); 
```

纹理（512x512）： http: [//f3.s.qip.ru/cMfvUhNj.png](http://f3.s.qip.ru/cMfvUhNj.png)

结果： http: [//f3.s.qip.ru/cMfvUhNh.png](http://f3.s.qip.ru/cMfvUhNh.png)

如何填充纹理图形？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-04T15:48:34.297

如果您只有一条直线挤压路径，则可以将纹理应用于挤压形状，而无需自定义 UV 生成器。例如

```
var extrudeSettings = {
                bevelEnabled: false, 
                steps: 1,
                amount: 20, //extrusion depth, don't define an extrudePath
                material:0, //material index of the front and back face
                extrudeMaterial : 1 //material index of the side faces            
            };

var geometry = shape.extrude(extrudeSettings);

var mesh = new THREE.Mesh(geometry, 
    new THREE.MeshFaceMaterial([materialFace, materialSide])); 
```

这对于千篇一律的形状很方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T15:07:45.440

编辑：答案已过时。请参阅[使用多个孔挤出多个多边形并](https://stackoverflow.com/questions/16124691/extruding-multiple-polygons-with-multiple-holes-and-texturing-the-combined-shape)改为对组合形状进行纹理化。

* * *

你很幸运。您正在尝试做的事情已在以下示例中完成：

[https://github.com/mrdoob/three.js/blob/master/examples/webgl_geometry_extrude_uvs2.html](https://github.com/mrdoob/three.js/blob/master/examples/webgl_geometry_extrude_uvs2.html)

您必须指定自己的 UV 生成器功能。这个例子向你展示了如何做到这一点。

请记住，这只是一个示例。它可能不正确 - 或者在您的情况下易于实施。

# iphone - 使用模态动画推送 ViewController（水平翻转）

> ID：14797412
> 
> 赞同：5
> 
> 时间：2013-02-10T11:48:21.703
> 
> 标签：iphone, ios, objective-c, uiviewcontroller, modalviewcontroller

我需要将视图控制器推送到另一个视图控制器。

```
menuVC -> VC1 ->VC2 
```

从 menuVC 到 VC1 不需要动画，但从 VC1 到 VC2 以及从 VC2 到 VC1 需要发生翻转动画。

但是，当从 VC2 转到 menuVC 时，不需要动画。

我正在使用以下代码：

（从[如何使用翻转动画推送 viewController](https://stackoverflow.com/questions/7266144/how-to-push-a-viewcontroller-with-flip-animation)）

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1];
[UIView setAnimationCurve:UIViewAnimationCurveEaseIn];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.view cache:YES];
FlashCardVC *flashCardVC = [[FlashCardVC alloc] init];
[self.navigationController pushViewController:flashCardVC animated:NO];
[UIView commitAnimations]; 
```

当我尝试执行上述操作时，屏幕完全空白。

怎么了？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-10T16:37:17.193

你现在真的应该使用基于块的动画。此外，如果您从同样位于同一故事板中的控制器实例化故事板控制器，您可以更轻松地使用 self.storyboard 访问该故事板。

```
-(IBAction)flipToNext:(id)sender {
    SecondController *next = [self.storyboard instantiateViewControllerWithIdentifier:@"Next"];
    [self.navigationController pushViewController:next animated:NO];
    [UIView transitionWithView:self.navigationController.view duration:1 options:UIViewAnimationOptionTransitionFlipFromRight animations:nil completion:nil];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-20T09:28:07.063

# 在 Swift 4.2 中使用这些扩展

*用于带有水平翻转动画的推送和弹出视图控制器*

```
extension UINavigationController {

    func pushViewControllerWithFlipAnimation(viewController:UIViewController){
        self.pushViewController(viewController
        , animated: false)
        if let transitionView = self.view{
            UIView.transition(with:transitionView, duration: 0.8, options: .transitionFlipFromLeft, animations: nil, completion: nil)
        }
    }

    func popViewControllerWithFlipAnimation(){
        self.popViewController(animated: false)
        if let transitionView = self.view{
            UIView.transition(with:transitionView, duration: 0.8, options: .transitionFlipFromRight, animations: nil, completion: nil)
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T12:18:03.837

好答案： [显示 pushviewcontroller 动画看起来像 presentModalViewController](https://stackoverflow.com/questions/3838219/showing-pushviewcontroller-animation-look-like-presentmodalviewcontroller)

（代码）

```
 //UIViewController *yourViewController = [[UIViewController alloc]init];</s>

    [UIView  beginAnimations: @"Showinfo"context: nil];
    [UIView setAnimationCurve: UIViewAnimationCurveEaseInOut];
    [UIView setAnimationDuration:0.75];
    [self.navigationController pushViewController: yourViewController animated:NO];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.navigationController.view cache:NO];
    [UIView commitAnimations]; 
```

但是，这也产生了一个空白屏幕。

相反，如果您使用情节提要，最好通过情节提要进行实例化：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:[NSBundle bundleForClass:[self class]]];

YourViewController *yourViewController = [storyboard instantiateViewControllerWithIdentifier:@"yourViewControllerID"]; 
```

yourViewControllerID 在 yourviewcontroller 类的身份检查器下的情节提要中设置。

# database - 使用迁移的好处

> ID：14797416
> 
> 赞同：6
> 
> 时间：2013-02-10T11:48:53.370
> 
> 标签：database, version-control, language-agnostic, migration

我目前正在学习一个支持迁移的框架。

我的问题是：**使用迁移的主要好处是什么？**

为什么我们不直接使用数据库管理工具来添加/删除/更改表并直接执行其他操作？或者为什么不直接导出我的 .sql 文件，然后我的团队将其导入他们的数据库？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T11:55:31.643

迁移是部署过程的一部分。所以迁移的好处（一般来说）是

*   您不必手动进行（因为在部署时您可能迟早会忘记架构更改）
*   你可以在本地测试它（因为你可能迟早会犯错误）
*   您不必告诉您的团队成员手动更改他们的本地数据库（因为这很烦人），或者导入新的转储（再次......）
*   如果您有多个环境（stage、prod、test），则必须在任何系统上执行此步骤。这增加了出错的概率
*   您可能不想将（可能已过时的）开发数据库导入实时系统；）

请注意，在项目开始时，模式可能很简单，数据库可能很小，但这不会保持不变。迟早 (;)) 您将面对庞大的数据库，这需要时间来导入。

附加：一个好的迁移通常有一个“降级”步骤，以防出错。使用您的方法，如果部署出错，您必须手动恢复数据库更改，这更容易出错。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T11:55:18.023

将它们视为数据库的版本控制。它还使将您的更改部署到多个环境（例如您的开发环境，然后是您的测试/生产服务器）变得容易和自动化，而不必记住您在 PHPMyAdmin 中所做的事情。

告诉某人他们需要迁移他们的数据库比告诉他们需要对他们的数据库进行的每个单独的更改更容易。

# c - 分析 IEEE 754 位模式

> ID：14797418
> 
> 赞同：-1
> 
> 时间：2013-02-10T11:49:04.670
> 
> 标签：c, floating-point, ieee-754

我正在做一个任务，但我被困住了。由于某种原因，我无法得到这个结果：

```
byte order: little-endian

> FFFFFFFF
0xFFFFFFFF
signBit 1, expBits 255, fractBits 0x007FFFFF
QNaN

> 3
0x00000003
signBit 0, expBits   0, fractBits 0x00000003
denormalized: exp = -126

> DEADBEEF
0xDEADBEEF
signBit 1, expBits 189, fractBits 0x002DBEEF
normalized:   exp =  62

> deadbeef
0xDEADBEEF
signBit 1, expBits 189, fractBits 0x002DBEEF
normalized:   exp =  62

> 0
0x00000000
signBit 0, expBits   0, fractBits 0x00000000
+zero 
```

我试图解决这个问题，但我不知道我哪里出错了。以下代码是我对该项目的尝试。感觉快要结束了，可是我还没完呢。。

这是我的代码：

```
#include <stdio.h>
#include <stdlib.h>

static char *studentName = "name";

// report whether machine is big or small endian
void bigOrSmallEndian()
{
    int num = 1;
    if(*(char *)&num == 1)
    {
      printf("\nbyte order: little-endian\n\n");
   }
   else
  {
      printf("\nbyte order: big-endian\n\n");
  } 
}

// get next int (entered in hex) using scanf()
// returns 1 (success) or 0 (failure)
// if call succeeded, return int value via i pointer
int getNextHexInt(int *i)
{
    // replace this code with the call to scanf()
    //*i = 0;
    //return 1;
    scanf ("%x", i);
    return 1;
} 

// print requested data for the given number
void printNumberData(int i)
{
    //printf("%x %0#10x\n",i,*(int *)&i);
    int tru_exp =0;
    //int stored_exp;
    int negative;
    int exponent;
    int mantissa;

    printf("\n>");

    printf("\n0x%08X",i);

    negative = !!(i & 0x80000000);
    exponent = (i & 0x7f800000) >> 23;
    mantissa = (i & 0x007FFFFF);

    printf("\nsignBit %d, ", negative);
    printf("expbits %d, ", exponent);
    printf("fractbits 0x%08X", mantissa);
    // "%#010x, ", mantissa);

    if(exponent == 0)
    {
        if(mantissa != 0)
        {
            printf("\ndenormalized ");
        } 
    }
    else{
        printf("\nnormalized: ");
        tru_exp = exponent - 127;
        printf("exp = %d", tru_exp);
    }

    if(exponent == 0 && mantissa == 0 && negative == 1)
    {

        printf("\n-zero");

    }

    if(exponent ==0 && mantissa == 0 && negative == 0)
    {
        printf("\n+zero");
    }

    if(exponent == 255 && mantissa != 0 && negative == 1)
    {

        printf("\nQNaN");

    }

    if(exponent == 255 && mantissa != 0 && negative == 0)
    {

        printf("\nSNaN");

    }

    if(exponent == 0xff && mantissa == 0 && negative == 1)
    {
        printf("\n-infinity");
    }    

    if(exponent == 0xff && mantissa == 0 && negative == 0)
    {
        printf("\n+infinity");
    }

    printf("\n");
    while(i != 0)
        break;
}

// do not change this function in any way
int main(int argc, char **argv)
{
    int     i;                              // number currently being analyzed
    int     nValues;                        // number of values successfully parsed by    scanf

    printf("CS201 - A01p - %s\n\n", studentName);
    bigOrSmallEndian();
    for (;;) {
        if (argc == 1)                      // allow grading script to control ...
            printf("> ");                   // ... whether prompt character is printed
        nValues = getNextHexInt(&i);
        printf("0x%08X\n", i);
        if (! nValues) {                    // encountered bad input
            printf("bad input\n");
            while (getchar() != '\n') ;     // flush bad line from input buffer
            continue;
            }
        printNumberData(i);
        if (i == 0)
            break;
        }
    printf("\n");
    return 0;
} 
```

我对这段代码的结果是：

```
byte order: little-endian

> FFFFFFFF
0xFFFFFFFF

>
0xFFFFFFFF
signBit 1, expbits 255, fractbits 0x007FFFFF
normalized: exp = 128
QNaN
> 3
0x00000003

>
0x00000003
signBit 0, expbits 0, fractbits 0x00000003
denormalized
> DEADBEEF
0xDEADBEEF

>
0xDEADBEEF
signBit 1, expbits 189, fractbits 0x002DBEEF
normalized: exp = 62
> deadbeef
0xDEADBEEF

>
0xDEADBEEF
signBit 1, expbits 189, fractbits 0x002DBEEF
normalized: exp = 62
> 0
0x00000000

>
0x00000000
signBit 0, expbits 0, fractbits 0x00000000
+zero 
```

我相信问题出在`printNumberData()`哪里，但我无法指出。

我希望有人可以参与进来，因为非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T13:40:12.237

所以，据我所知，唯一的问题是你的指数没有签名。您可以通过更改`tru_exp`为`int8_t`（或`signed char`）来解决此问题。或者通过简单地手动签名扩展号码，例如`if (tru_exp > 128) tru_exp -= 256;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T13:40:36.340

您有一系列`if`用于识别特殊情况（零、无穷大、NaN）的语句，但是在您对“正常”值进行了一些处理后，您可以识别这些情况。您应该改用`if / else if / else if`链，并首先处理特殊情况，最后`else`处理所有常规（规范化）数字。

这是一些基于您提供的代码，但格式和编码相当简洁。我相信这里的主程序避免了输入，并涵盖了值的范围。当这产生正确的数据时，您可以使用格式来适应教师的测试工具。

```
#include <stdio.h>

extern void printNumberData(int i);

void printNumberData(int i)
{
    int negative = (i & 0x80000000U) >> 31;
    int exponent = (i & 0x7F800000U) >> 23;
    int mantissa = (i & 0x007FFFFFU) >>  0;;

    printf("0x%08X sign %d, exponent %3d, fraction 0x%08X: ",
            i, negative, exponent, mantissa);

    if (exponent == 0x00 && mantissa == 0 && negative == 1)
        printf("-zero\n");
    else if (exponent == 0x00 && mantissa == 0 && negative == 0)
        printf("+zero\n");
    else if (exponent == 0xFF && mantissa != 0 && negative == 1)
        printf("QNaN\n");
    else if (exponent == 0xFF && mantissa != 0 && negative == 0)
        printf("SNaN\n");
    else if (exponent == 0xFF && mantissa == 0 && negative == 1)
        printf("-infinity\n");
    else if (exponent == 0xFF && mantissa == 0 && negative == 0)
        printf("+infinity\n");
    else if (exponent == 0)
        printf("denormalized: exp = -126\n");
    else
        printf("normalized:   exp = %4d\n", exponent - 127);
}

int main(void)
{
    printNumberData(0xFFFFFFFF);    /* QNan   */
    printNumberData(0x00000003);    /* Denorm */
    printNumberData(0x00800003);    /* Normal */
    printNumberData(0xDEADBEEF);    /* Normal */
    printNumberData(0x00000000);    /* +0     */
    printNumberData(0x80000000);    /* -0     */
    printNumberData(0xFF800000);    /* +Inf   */
    printNumberData(0x7F800000);    /* -Inf   */
    printNumberData(0xFF800001);    /* QNan   */
    printNumberData(0x7F800001);    /* SNan   */
    return(0);
} 
```

每个数字产生一行输出：

```
0xFFFFFFFF sign 1, exponent 255, fraction 0x007FFFFF: QNaN
0x00000003 sign 0, exponent   0, fraction 0x00000003: denormalized: exp = -126
0x00800003 sign 0, exponent   1, fraction 0x00000003: normalized:   exp = -126
0xDEADBEEF sign 1, exponent 189, fraction 0x002DBEEF: normalized:   exp =   62
0x00000000 sign 0, exponent   0, fraction 0x00000000: +zero
0x80000000 sign 1, exponent   0, fraction 0x00000000: -zero
0xFF800000 sign 1, exponent 255, fraction 0x00000000: -infinity
0x7F800000 sign 0, exponent 255, fraction 0x00000000: +infinity
0xFF800001 sign 1, exponent 255, fraction 0x00000001: QNaN
0x7F800001 sign 0, exponent 255, fraction 0x00000001: SNaN 
```

如果您阅读有关[Single-precision floating point format](http://en.wikipedia.org/wiki/Single-precision_floating-point_format)的 Wikipedia 页面，您会得到关于调整指数为 -126 的非规范化数字的各种解释，即使指数位的值为 0 且 0-127 通常为 -127。基本上，法令只是简单地说明指数是-126并且正在发生下溢。

其他相关页面确实提到了它，但更多的是“顺便”：

*   [IEEE 754:1985](http://en.wikipedia.org/wiki/IEEE_754-1985)
*   [IEEE 754 修订版](http://en.wikipedia.org/wiki/IEEE_754_revision)
*   [双精度浮点格式](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)
*   [半精度浮点格式](http://en.wikipedia.org/wiki/Half-precision_floating-point_format)

# azure - azure 中的 ajax 发布，带有 ssl 错误

> ID：14797428
> 
> 赞同：0
> 
> 时间：2013-02-10T11:50:12.537
> 
> 标签：azure, asp.net-mvc-4, windows-server-2012

我在 azure 上使用 mvc 3 和 os 2 有一个 web 角色，运行良好 - 使用 ssl

我想用 .net 4.5 将我的项目升级到 mvc 4，所以我创建了一个新的 azure 项目并将所有内容复制到一个新项目中，并且一切都在我的工作站上运行（我有带有 iis 8 的 windows 8，如 server 2012）。

我将新项目上传到 azure - 使用 os 3 和一切，我的网站运行良好，直到代码需要创建带有参数的 ajax 请求 - ajax 请求等待一分钟左右，然后我得到一个错误页面。

当我删除 https 到 http 时，ajax 请求工作正常。

在调查并放置 traceFailedRequests 后，我看到 iis 拒绝了那些 ajax 请求。

在 moudle ManagedPipelineHandler 中，我得到未经授权的 http 原因。

我似乎无法弄清楚 2012 服务器中发生了什么——现在我将 mvc4 降级到 .net 4 并改回服务器 2008 r2，一切都像时钟一样工作。

有谁知道可能是什么问题？

谢谢。

# cocos2d-iphone - 来自纹理图集的 NSImage

> ID：14797430
> 
> 赞同：0
> 
> 时间：2013-02-10T11:50:16.377
> 
> 标签：cocos2d-iphone, nstableview, nsimage, sprite-sheet

我想构建一个 LevelEditor，并且需要将精灵（它们的图像）存储在 NSTableView 中 cocos2d 的纹理图集中。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-11T02:14:18.207

您可以通过为纹理图集中的每个图像创建一个 CCSprite，然后将它们渲染到 CCRenderTexture 中来实现这一点。CCRenderTexture 能够将其纹理保存为 NSImage。

有关如何执行此操作的更多信息：http: [//www.cocos2d-iphone.org/forum/topic/27769](http://www.cocos2d-iphone.org/forum/topic/27769)

# exec - 理解 TCL CATCH exec 问题的问题

> ID：14797432
> 
> 赞同：2
> 
> 时间：2013-02-10T11:50:31.177
> 
> 标签：exec, try-catch, tcl, eggdrop

在过去的两天里，我遇到了一个问题。

我正在运行一个 tcl 脚本（对于一个 eggdrop），当它被触发时，它会执行一个本地 shell 命令（子进程），如果命令成功，它会吐出结果。但是，如果命令不成功，我会收到一个错误“ `Tcl error [proc_ports]: child process exited abnormally`:.

如果子进程没有找到任何结果，我想要创建一个自定义响应。

脚本是：

```
set chan "#help"
bind pub -|- .port proc_ports

proc proc_ports {nick host handle channel testes} {
    global chan
    if {"$chan" == "$channel"} {
        return 0
    }

    if [matchattr $nick |fmn $channel] {
        set ports [lindex $testes 0]
        set fp [ exec grep -w "$ports" scripts/ports | awk {{$1=""; print $0}} ]

        putserv "PRIVMSG $channel :Port \002$ports\002 is normally used for: \002$fp\002"

        return 1
    } else {
        putserv "PRIVMSG $channel :$nick, you do \002NOT\002 have access to this command!"
        return 1
    }
} 
```

我很想使用 TCL 解决这个问题，以帮助我了解更多信息，而不是将 exec 更改为会返回任何错误的 shell 脚本。

我已经阅读了 TCL 中的 CATCH 命令，并尝试了许多不同的脚本方法，但是都失败了:(

任何帮助，将不胜感激。

干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T13:04:35.027

1.  你有巨大的安全问题。1a) 变量“testes”包含用户文本。您认为“testes”包含有效的 TCL 列表并在其上使用“lindex”。您应该至少使用命令`set ports [lindex [split $testes] 0]` 1b) 在发送自定义文本以在 shell 中运行之前，您应该检查它是否包含非法字符。使用`string is`, `regexp`, `regsub`.

2.  要检查命令执行中的错误，您可以使用以下代码：

    > ```
    > set ports [lindex $testes 0]
    > if { [catch {exec grep -w "$ports" scripts/ports | awk {{$1=""; print $0}}} fp] } {   
    >   putserv "PRIVMSG $channel :Something wrong while executing command."
    > } {
    >   putserv "PRIVMSG $channel :Port \002$ports\002 is normally used for: \002$fp\002"
    > } 
    > ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T13:06:17.810

这里有几个问题。首先，`exec`当它运行的管道以非零退出代码退出*而不*写入`stderr`. 其次，`grep`当它没有找到任何东西时，它的退出代码为 1。这两个功能不能很好地结合在一起！

最简单的解决方法是这样做：

```
if {[catch {
    set fp [ exec grep -w "$ports" scripts/ports | awk {{$1=""; print $0}} ]
    putserv "PRIVMSG $channel :Port \002$ports\002 is normally used for: \002$fp\002"
}]} {
    putserv "PRIVMSG $channel :Port \002$ports\002 not in port database"
} 
```

这是有效的，因为`catch`如果发生错误，结果为 1，如果没有错误，结果为 0。我们假设所有错误都是由于没有找到任何东西（这不是一个好主意，但很方便！），但如果这让您感到困扰，Tcl 8.6 的`try`命令更具辨别力。

# c - 如何通过欧几里得算法计算两个数的gcd

> ID：14797435
> 
> 赞同：-3
> 
> 时间：2013-02-10T11:50:44.033
> 
> 标签：c

我编写了一个示例程序来计算两个数字的 gcd。这里是：

```
#include stdio.h

int main(void) {
    int m, n, rem;

    printf("Enter two numbers consecutively(with a space between them): ");
    scanf("%d %d", &m, &n);

    while (m) {
        n = m % n; //problem here 
        n = rem;
    }

    printf("%d is the GCD", rem);

    return 0;
} 
```

我认为我应该将模运算符语句的输出存储在 rem 中，但到目前为止我的程序没有响应任何给定的输入。有人可以给我一个线索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T11:52:38.950

> 有人可以给我一个线索。

对于初学者来说，您不会`m`在循环内部进行更改，因此它无法结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T11:59:36.430

> 有人可以给我一个线索

`rem`未设置初始值，您尝试`n`在循环中更改两次的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T12:01:16.997

如果您写出如何在计算机程序的上下文之外但使用变量手动使用欧几里得算法，这可能是一个好主意。反正：

```
 n = m % n; //problem here 
    n = rem; 
```

这将如何完成任何事情？你说“n = 一件事”，然后是“n = 另一件事”，但在此期间你什么也没做。

# c# - 使用反射将属性绑定到控件

> ID：14797437
> 
> 赞同：0
> 
> 时间：2013-02-10T11:51:00.793
> 
> 标签：c#, data-binding, reflection

我正在尝试使用反射将对象的属性绑定到文本框，传入的对象是具有公共原始类型属性的简单类和 getter/setter 中的一些代码。但是更改文本框中的值并不能反映对象实例的更改，值永远不会更新，我错过了什么？

```
public object myObj;

public void setObject(ref object myObject)
{
    myObj = myObject;
}

var textbox = new Textbox();
...
textbox.DataBindings.Add("Text", myObj, myObj.GetType().GetProperties()[0].Name);
this.Controls.Add(textbox); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T12:19:38.137

请检查这个[帖子](http://msdn.microsoft.com/en-us/library/ms742863.aspx)。

你需要有：

```
 Binding myBinding = new Binding("MyDataProperty"); //name of the property on the object which is used as binding source
  myBinding.Source = myObject;
  textbox.SetBinding(TextBlock.TextProperty, myBinding); 
```

# windows - 在 Rmd 文件中包含 apsrtable（或 stargazer）输出

> ID：14797440
> 
> 赞同：6
> 
> 时间：2013-02-10T11:51:18.013
> 
> 标签：windows, r, latex, knitr, r-markdown

我尝试`lm`使用如下代码在 Rmd 文件中包含对象的摘要，但它不起作用。你能帮我做吗？

```
```{r summary_lm, results='asis', echo=FALSE, comment=NA}

library(apsrtable)
my_model <- lm(y ~ x, data = data.frame(y = rnorm(10), x = 1:10))
res <- apsrtable(my_model) # my_model is a linear regression model (lm)

cat("$$latex \n",res,"\n$$ \n")

``` 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T19:35:36.240

该`$$`语法仅适用于数学表达式，并且您试图在其中放置一个表，但这是行不通的。，`apsrtable`据我所知，仅适用于 LaTeX，但 LaTeX 和 Markdown 非常不同——几乎没有希望你可以完全用 Markdown 重做 LaTeX。我认为人们发明了`$$`Markdown 的语法是因为它得到了 MathJax 的良好支持，并且还注意到有许多基于原始 Markdown 的变体/风格。

目前您可以考虑：

*   使用`xtable`or `ascii`or`R2HTML`包生成 HTML 表格
*   请求包作者`apsrtable`支持 HTML 表格

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-04T20:33:08.397

[用`pander˙](http://rapporter.github.com/pander/)包含`my_model`在 Markdown 格式中怎么样：

```
> library(pander)
> pander(my_model)

--------------------------------------------------------------
     &nbsp;        Estimate   Std. Error   t value   Pr(>|t|) 
----------------- ---------- ------------ --------- ----------
      **x**         0.1174      0.1573     0.7465     0.4767  

 **(Intercept)**   -0.2889      0.9759     -0.296     0.7748  
--------------------------------------------------------------

Table: Fitting linear model: y ~ x 
```

或 PHP MarkdownExtra/rmarkdown 格式：

```
> panderOptions('table.style', 'rmarkdown')
> pander(my_model)

|      &nbsp;       |  Estimate  |  Std. Error  |  t value  |  Pr(>|t|)  |
|:-----------------:|:----------:|:------------:|:---------:|:----------:|
|       **x**       |   0.1174   |    0.1573    |  0.7465   |   0.4767   |
|  **(Intercept)**  |  -0.2889   |    0.9759    |  -0.296   |   0.7748   |

Table: Fitting linear model: y ~ x 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-03T12:51:25.810

[在 Rmarkdown 中使用 apsrtable](https://stackoverflow.com/q/44278665/2563804)交叉发布我对多个 lm() 模型表的[答案](https://stackoverflow.com/a/51673007/2563804)：

它可以在`pdf_document`apsrtable 和 stargazer 中完成，它还支持 HTML。

```
---
title: "stargazer"
author: "hplieninger"
date: "3 August 2018"
output: pdf_document
header-includes:
    - \usepackage{dcolumn}
---

```{r}
m1 <- lm(Fertility ~ Education , data = swiss)
m2 <- lm(Fertility ~ Education + Agriculture, data = swiss)
m3 <- lm(Fertility ~ . , data = swiss)
```

```{r, results='asis'}
apsrtable::apsrtable(m1, m2, m3, Sweave = TRUE)
```

```{r, results='asis'}
# If output: pdf_document
stargazer::stargazer(m1, m2, m3)
# If output: html_document
# stargazer::stargazer(m1, m2, m3, type = "html")
``` 
```

# c# - 将 Python 代码注入进程

> ID：14797441
> 
> 赞同：1
> 
> 时间：2013-02-10T11:51:26.487
> 
> 标签：c#, python, code-injection

我想将 Python 代码注入到一个进程中，它似乎在注入时使我的进程崩溃。我自己的程序没有出现任何错误，但目标进程停止工作。调用的非托管 API 没有给我任何错误，并且似乎已正确执行它们。

```
[DllImport("kernel32")]
    public static extern IntPtr CreateRemoteThread(IntPtr hProcess,IntPtr lpThreadAttributes,uint dwStackSize, IntPtr lpStartAddress,IntPtr lpParameter,uint dwCreationFlags, out uint lpThreadId);
    [Flags]
    enum ProcessAccessFlags : uint
    {
        All = 0x001F0FFF,
        Terminate = 0x00000001,
        CreateThread = 0x00000002,
        VMOperation = 0x00000008,
        VMRead = 0x00000010,
        VMWrite = 0x00000020,
        DupHandle = 0x00000040,
        SetInformation = 0x00000200,
        QueryInformation = 0x00000400,
        Synchronize = 0x00100000
    }
    [DllImport("kernel32.dll")]
    static extern IntPtr OpenProcess(ProcessAccessFlags dwDesiredAccess, [MarshalAs(UnmanagedType.Bool)] bool bInheritHandle, int dwProcessId);
    [Flags]
    public enum AllocationType
    {
        Commit = 0x1000,
        Reserve = 0x2000,
        Decommit = 0x4000,
        Release = 0x8000,
        Reset = 0x80000,
        Physical = 0x400000,
        TopDown = 0x100000,
        WriteWatch = 0x200000,
        LargePages = 0x20000000,
        VIRTUAL_MEM = (0x1000 | 0x2000)
    }
    [Flags]
    public enum MemoryProtection
    {
        Execute = 0x10,
        ExecuteRead = 0x20,
        ExecuteReadWrite = 0x40,
        ExecuteWriteCopy = 0x80,
        NoAccess = 0x01,
        ReadOnly = 0x02,
        ReadWrite = 0x04,
        WriteCopy = 0x08,
        GuardModifierflag = 0x100,
        NoCacheModifierflag = 0x200,
        WriteCombineModifierflag = 0x400,
        PAGE_EXECUTE_READWRITE = 0x00000040
    }
    [DllImport("kernel32.dll", SetLastError = true, ExactSpelling = true)]
    static extern IntPtr VirtualAllocEx(IntPtr hProcess, IntPtr lpAddress, uint dwSize, AllocationType flAllocationType, MemoryProtection flProtect);
    [DllImport("kernel32.dll", SetLastError = true)]
    static extern bool WriteProcessMemory(IntPtr hProcess, IntPtr lpBaseAddress, byte[] lpBuffer, uint nSize, out UIntPtr lpNumberOfBytesWritten);
    [DllImport("kernel32.dll", SetLastError = true, ExactSpelling = true)]
    static extern bool VirtualFreeEx(IntPtr hProcess, IntPtr lpAddress, UIntPtr dwSize, uint dwFreeType);
    [DllImport("kernel32", SetLastError = true, ExactSpelling = true)]
    internal static extern Int32 WaitForSingleObject( IntPtr handle,Int32 milliseconds);
    [DllImport("kernel32.dll")]
    public static extern Int32 CloseHandle(IntPtr hObject);
    private void InjectCode(string shellcode = "print('Hello, World!')")
    {
        foreach (Process proc in Process.GetProcesses())
        {
            if (proc.ProcessName == "Toontown")
            {
                int shellcode_length = shellcode.Length;
                IntPtr h_process = OpenProcess(ProcessAccessFlags.All, false, (int)proc.Id);
                IntPtr shellcode_address = (IntPtr)VirtualAllocEx(h_process, (IntPtr)0, (uint)shellcode_length, AllocationType.VIRTUAL_MEM, MemoryProtection.PAGE_EXECUTE_READWRITE);
                byte[] bytes = new byte[shellcode.Length * sizeof(char)];
                Buffer.BlockCopy(shellcode.ToCharArray(), 0, bytes, 0, bytes.Length);

                UIntPtr bytesout;
                uint t_id;

                bool Written = WriteProcessMemory(h_process, shellcode_address, bytes, (uint)shellcode_length, out  bytesout);
                IntPtr hThread = (IntPtr)CreateRemoteThread(h_process, (IntPtr)null, 0, (IntPtr)shellcode_length, (IntPtr)shellcode_address, 0, out t_id);
                int Result = WaitForSingleObject(hThread, 10 * 1000);
                if (Result == 0x00000080L || Result == 0x00000102L || Result == 0xFFFFFFFF)
                {
                    if (hThread != null)
                    {
                        CloseHandle(hThread);
                    }
                }
                Thread.Sleep(1000);
                VirtualFreeEx(h_process, shellcode_address, (UIntPtr)0, 0x8000);
                if (hThread != null)
                {
                    CloseHandle(hThread);
                }
            }
        }
    } 
```

如您所见，我已将非托管 API 的返回值保存到我用来查看它是否正常工作的变量中，它似乎做得很好，但它使目标进程崩溃，日志没有记录任何相关的错误给它。托管程序可以注入非托管进程吗？我是否在转换错误的变量类型？shellcode 是否被错误地翻译成字节数组？请让我知道，谢谢。

编辑：它在 CreateRemoteThread 崩溃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T13:18:46.847

`CreateRemoteThread`在另一个进程中创建一个本地线程，它接收到的起始地址必须指向有效的机器代码，否则线程将导致进程崩溃。

您描述的场景不同，您想指示另一个进程的 Python 解释器执行一些代码。这是可以做到的，但它是不同的，而且要困难得多。

将本机库注入到执行两件事的另一个进程中：

*   设置 Python 解释器
*   设置一些进程间通信（IPC）的方式

使用 IPC 将您想要执行的 Python 代码发送到其他进程，然后您注入的库中的代码使用 Python 解释器执行该代码。

[您可以在这篇 Codeproject 文章](http://www.codeproject.com/Articles/4610/Three-Ways-to-Inject-Your-Code-into-Another-Proces)中找到如何将 DLL 注入另一个进程的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T18:45:37.540

看起来您正试图从 .net 运行一些任意 Python 代码。现在您正在尝试调用 Python 解释器来实际执行此操作。

这样做的缺点是：-

*   如您所见，这很复杂。
*   当您跨边界移动字节时，进程间通信变得更加困难
*   然后，您需要将从每一方获得的信息解析为有意义的内容（可能使用某种 XML）
*   最后，由于上述所有开销，它的速度很慢

现在解决这个问题的一种方法是直接在 .net 中调用 python 程序。现在我这辈子从来没有这样做过，我也从来没有见过蟒蛇（除了可能发出嘶嘶声的那种）。看看[http://msdn.microsoft.com/en-us/library/ee461504.aspx](http://msdn.microsoft.com/en-us/library/ee461504.aspx)，不幸的是，看起来他们将 python 存储在一个文件中并在那里调用它。但是我确信您可以调用存储为字符串的代码。

使用 python 的 DLR 实现的主要缺点是您依赖第三方来获得正确的 Python -> CLR 翻译。但我认为 IronPython 是微软赞助的开源项目。

有关更多信息，请参阅：http: [//ironpython.codeplex.com/](http://ironpython.codeplex.com/)

# html - 如何从 websocket 降级到 http？

> ID：14797442
> 
> 赞同：3
> 
> 时间：2013-02-10T11:51:27.877
> 
> 标签：html, http, websocket

我一直在阅读有关 html5、websockets 和 http 的文章。我做了一些简单的测试，但假设我想这样做：

1.  浏览器与 Web 服务器建立 http 连接
2.  然后浏览器协商到同一个 Web 服务器的 Web 套接字连接
3.  在某些时候，浏览器想在同一个会话中再次与 Web 服务器进行 http

第 1 点和第 2 点很简单。来到第 3 点，是否有可用的标准解决方案？我猜想关闭任何一方的网络套接字都会终止现有的连接，对吗？有没有办法从 websockets 执行“降级”回 http？

我想我正在寻找的是一种基于标准的解决方案，但如果不存在，是否存在任何可以完成这项工作的框架？

谢谢 :o) 尼娜

# events - 在离散事件模拟期间出列事件

> ID：14797446
> 
> 赞同：2
> 
> 时间：2013-02-10T11:52:07.233
> 
> 标签：events, simulation, modeling, priority-queue

我对离散事件模拟期间的出队机制有疑问。

大多数实现使用某种优先级队列，可用于快速检索具有最早时间戳的事件。当无法安排此类事件时会发生什么，例如，它需要资源才能运行。

队列中可能有另一个事件，其时间戳大于在资源上阻塞的事件的时间戳。

例如，假设我们正在为一家杂货店建模，它有单独的结账行，每行有一个收银员。购物者进入结账行是一个事件。我们根据购物者进入结账线的时间将此事件排入队列。但是，我们的模拟执行两个此类事件的顺序不一定是它们进入结账行的时间顺序，因为收银员可能会以不同的顺序释放。

在这种情况下，如何使用仅基于时间戳的优先级队列 - 并且独立于资源可用性 - 工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:03:43.310

您需要为每个收银员排队，或者如果客户身份在您的模拟中不重要，则至少需要一个等待客户的数量（例如，我会加入一个由三个人组成的队列，每个人有一件物品，而一个人有一个完整的手推车，因此，仅队列长度可能无法捕获合并该启发式所需的信息）。

当客户加入队列时，排队的客户数量会增加或将客户推到收银台的队列中。

当收银员准备好服务时，第一个顾客会从收银员的队列中弹出。因此，客户服务事件不取决于客户到达的时间，而是收银员准备好的时间。

这些队列或计数器独立于事件的调度机制——调度的事件操纵这些队列，它们不依赖于它们进行调度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T02:55:59.497

正如 Pete Kirkham 所指出的，重要的是要意识到客户等待的行（队列）与用于确定事件顺序的优先级队列完全不同。

在离散事件仿真中，事件是系统状态发生变化的时间点。当事件发生时，您会根据状态确定下一步该做什么。加入客户行列是一件大事，但获得服务的资格也是如此。一旦客户有资格获得服务，该事件的逻辑必须检查服务是否可能。如果是这样，请为服务结束时间安排一个新事件。如果存在资源限制，则不会安排任何内容，并且该客户处于等待状态。但是，在未来的某个时间点，所需的资源将变得可用。这也是一个事件，该事件的逻辑应该检查是否有客户由于缺乏资源而被搁置。如果没有，则无需安排任何事情，但如果是，您现在可以为客户安排实际服务。

有关离散事件模拟如何工作的更全面的解释，请查看这篇[介绍性教程论文](http://www.informs-sim.org/wsc06papers/001.pdf)。

# android - 使用 android V2 的地图项目不起作用

> ID：14797447
> 
> 赞同：0
> 
> 时间：2013-02-10T11:52:06.817
> 
> 标签：android, google-maps

我想让谷歌地图 android v2 工作。我按照这里的所有说明[http://www.vogella.com/articles/AndroidGoogleMaps/article.html](http://www.vogella.com/articles/AndroidGoogleMaps/article.html) ；得到密钥，添加权限，..所有代码都与这个链接相同。我刚刚更改了我自己获得的包名称和 API 密钥。在我的主要活动中所有 com.google。.. 是红色的。该项目不认识他们。但我在我的 SDK 中安装了 google play。你能帮我解决什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:30:16.230

转到您的项目文件夹右键单击 -> 属性 -> Android 并确保您已选择 Google Api 作为目标名称而不是 Android！

# ios - 如何将字体导入 Xcode 4 界面生成器？

> ID：14797448
> 
> 赞同：0
> 
> 时间：2013-02-10T11:52:27.297
> 
> 标签：ios, xcode, fonts, interface-builder

我在（iOS）Xcode 4 项目中有一个自定义字体。这很好用，但是在编码时，我想在 Interface Builder 的 textviews/labels 中可视化相同的字体，而不是显示大致等效的字体。

这可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T12:38:31.830

不幸的是，目前无法在 IB 中显示自定义字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T12:50:36.163

IB还不可能是兄弟:)

# python - Lock() 可以多快或代理列出问题多快？

> ID：14797451
> 
> 赞同：1
> 
> 时间：2013-02-10T11:53:09.957
> 
> 标签：python, optimization, multiprocessing

**问题规范：**

我在 python 中运行一些复杂的任务并加快速度，我决定使用 pythons 多处理库。它工作得很好，但过了一段时间我开始想知道，我使用的锁有多少时间，消耗了多少时间，以及进程相互阻塞了多少。

**进程结构如下：**

一个更新进程之间共享列表的进程。数据更新代码是这样的：

```
lock.acquire()
list_rex[0] = pat.some_list
list_rex[1] = pat.some_dictionary
lock.release() 
```

其中 list_rex 和 lock 定义为

```
list_rex = manager.list([[some_elements], {some_elements}])
lock = multi.Lock() 
```

然后有几个进程，偶尔会用这些列表更新自己的内存空间。代码如下：

```
lock.acquire()
some_list = list_rex[0]
some_dict = list_rex[1]
lock.release() 
```

some_list 和 some_dict 在某种程度上是相关的，所以我不能允许进程在 some_list 中获取来自不同更新的信息，而不是在 some_dict 中。

**我的问题是**，acquire() 和 release() 方法的速度有多快？就我而言，它们可以在几秒钟内甚至几毫秒内被调用。**和/或**有什么方法可以避免在我的情况下使用锁？

感谢您的时间。

**编辑：**在考虑您的评论后，我的问题可能应该是 - 代理列表如何影响我的计算？我在更新后使用“some_list”和“some_dict”确实有很多需要阅读的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:15:49.313

我正要写一个非常复杂的答案，涉及读写器锁，如果您只是将一个对象同时用于列表和字典，则不需要锁的原子引用分配，以及其他一些关于在更改任何内容之前测量性能的东西......

但是后来我花了一些时间来看看你在锁中实际在做什么......基本上无非是几个参考任务。两者都没有阻塞，或者做 I/O，或者任何“慢”。这只是几个变量赋值。因此，简短的回答是您对锁的获取/释放可能可以忽略不计。除非您每秒数百次跨数十个线程进入锁，否则影响可以忽略不计。但不要相信我的话——去测量它。

我更关心当 some_list 和 some_dict 被锁外的其他进程引用而 list_rex 在锁内更新时会发生什么。

# c# - 如何在 WP8 地图上创建自动缩放图像

> ID：14797456
> 
> 赞同：2
> 
> 时间：2013-02-10T11:53:50.210
> 
> 标签：c#, image, maps, windows-phone-8

我正在尝试向地图添加多个图钉，当您缩小到足够大时它们会消失，以使图钉变得如此之小，以至于它们不再被渲染。

我设法使用以下代码实现了这种效果：

```
MapPolygon shape = new MapPolygon();
GeoCoordinateCollection boundingLocations = CreateCircle(geoCoordinate, 0.1);
shape.Path = boundingLocations;
shape.FillColor = Color.FromArgb(0x55, 0xFF, 0xFF, 0x00);
shape.StrokeColor = Color.FromArgb(0xFF, 0xFF, 0x00, 0xFF);
shape.StrokeThickness = 4;
mapToDrawOn.MapElements.Add(shape); 
```

但我真正想做的是用自定义图像填充多边形。图像必须放置在地图的特定点，并将其大小与缩放级别相关联。（就像上面的例子一样）这是我尝试使用的代码：

```
MapLayer layer = new MapLayer();
MapOverlay overlay = new MapOverlay();
Polygon polygon = new Polygon();
polygon.Points.Add(new Point(0, 0));
polygon.Points.Add(new Point(0, 75));
polygon.Points.Add(new Point(25, 0)); 
BitmapImage arrImg = 
    new BitmapImage(new Uri("/Images/arrow.png", UriKind.RelativeOrAbsolute));
ImageBrush imgBrush = new ImageBrush();
imgBrush.ImageSource = arrImg;
polygon.Fill = imgBrush;
overlay.Content = polygon;
//geoCoordinate is the argument of a method
overlay.GeoCoordinate = geoCoordinate;
layer.Add(overlay);
mapToDrawOn.Layers.Add(layer); 
```

它不起作用。图像出现在世界的特定点，但是当我缩小时，图像保持其大小。我相信这个问题是由于缺少一些限制多边形的 Rectangle 引起的，但是我找不到任何可以开始的东西。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T01:42:03.540

这不是 WP8 Maps 支持的功能。这个想法是，一旦将项目添加到 Map.Layers，它就不会通过缩放重新缩放以创建一致的外观和感觉。有些项目会调整大小，例如 Map.MapElements Polylines 和 Landmarks，但这些不适用于 Image。

如果您希望您的项目缩放，您必须注册 Map.ZoomLevelChanged 并以编程方式更改您的项目的缩放。

如果您有兴趣在未来的版本中看到这一点，请在[wpdev uservoice](http://wpdev.uservoice.com/forums/110705-app-platform)建议中填写您的用例以及您对此感兴趣的原因。

# asp.net - LDAP 身份验证 指定的域不存在或无法联系

> ID：14797457
> 
> 赞同：0
> 
> 时间：2013-02-10T11:53:51.023
> 
> 标签：asp.net, vb.net, exception, com, ldap

我收到以下错误

> {“指定的域不存在或无法联系。”}

在线

```
 Dim adResults = adSearch.FindOne.Path 
```

谁能建议为什么会这样？看到下面的代码

```
Dim ID As FormsIdentity = DirectCast(User.Identity, FormsIdentity)
    Dim ticket As FormsAuthenticationTicket = ID.Ticket
    Dim adTicketID As String = ticket.Name
    Dim adSearch As New DirectorySearcher
    adSearch.Filter = ("(userPrincipalName=" & adTicketID & ")")
    Dim adResults = adSearch.FindOne.Path
    Dim adResultsDirectory As New DirectoryEntry(adResults)
    Dim found As Boolean = False
    For Each entry In adResultsDirectory.Properties("memberOf")
        Response.Write(entry)
        Response.Write("<br/>")
        If entry = "CN=GroupName,CN=UserGroup,DC=my,DC=domain,DC=com" Then
            found = True
        End If

    Next
    If Not (found) Then
        Response.Redirect("login.aspx")
    End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T12:04:49.280

您的域在哪里指定？第一个参数`DirectoryEntry`应该是您的 AD 服务器，如下所示：`LDAP://adserver`.

这是我用来检查用户是否在 AD 中经过身份验证的代码：

```
Dim dsDirectoryEntry As New DirectoryEntry("LDAP://" & domain, userName, password)

Dim dsSearch As New DirectorySearcher(dsDirectoryEntry)
Dim dsResults As SearchResult = dsSearch.FindOne()

If dsResults IsNot Nothing Then
    Return True
Else
    Return False
End If 
```

我从配置中读取的域，用户名和密码来自登录表单输入。

# wpf - 通过 URI VB.NET 访问图标资源

> ID：14797459
> 
> 赞同：0
> 
> 时间：2013-02-10T11:54:01.847
> 
> 标签：wpf, vb.net

我有一个 WPF VB.NET 应用程序，我想使用嵌入在应用程序资源中的图标作为菜单图标。到目前为止，我有这段代码（在窗口的初始化事件中）：

```
MenuItem.Icon = New Image() With {.Source = New BitmapImage(New
Uri("Resources\Icon.ico", UriKind.Relative))} 
```

而且图标仍然没有显示，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:43:59.910

问题是你的URI。如果在后面的代码中设置它，则必须编写完整的[WPF Pack URI](http://msdn.microsoft.com/en-us/library/aa970069.aspx)。您还必须 将图标文件的[构建操作](http://msdn.microsoft.com/en-us/library/0c6xyb66.aspx)`Resource`设置为（图标的默认值为`None`）。

```
MenuItem.Icon = New Image() With
{
    .Source = New BitmapImage(New Uri("pack://application:,,,/Resources/Icon.ico"))
} 
```

* * *

当您在 XAML 中指定 URI 时，默认的 ImageSource TypeConverter 将添加该`pack://application:,,,`部分，您可以简单地编写

```
<Image Source="/Resources/Icon.ico"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T12:31:02.347

Better option is building menu in XAML:

1.  Create folder `Images` in your solution
2.  Add image as `Resources` to `Images` directory (in my sample code: "Icon.ico")
3.  In XAML you can use following code:

...

```
<MenuItem Header="Item1">
    <MenuItem.Icon>
        <Image Source="/Images/Icon.ico" Width="20" Height="20" />
    </MenuItem.Icon>
</MenuItem> 
```

Or if you want to do this in code-behind you can use following code instead of step 3:

```
MenuItem.Icon = New Image() With {.Source = New BitmapImage(New Uri("/Images/Icon.ico", UriKind.RelativeOrAbsolute))} 
```

# javascript - 不使用 JSONP 请求更新主干集合

> ID：14797461
> 
> 赞同：1
> 
> 时间：2013-02-10T11:54:19.697
> 
> 标签：javascript, ajax, backbone.js, jsonp, brunch

我最近才开始使用 Backbone.js，我正在开发一个应用程序，现在使用 Brunch 向外部 API 发出 JSONP 请求以填充我的集合和模型。我正在关注这些以前的帖子（[this](https://stackoverflow.com/questions/8430113/backbone-collection-jsonp-ajax-results-not-generating-model-correctly)和[this](http://iainjmitchell.com/blog/?p=777)）关于使用 Backbone 执行 JSONP 请求，但由于某种原因，我的集合仍然没有获取数据。

我的模型（app/models/model.js）：

```
module.exports = Backbone.Model.extend({
}); 
```

我的收藏（app/models/collection.js）：

```
var Post = require('./model');

module.exports = Backbone.Collection.extend({
    model: Post,
    url: "http://somedata.com/api/posts/list/stuff",
    sync: function(method, model, options) {  
        options.timeout = 10000;
        options.dataType = "jsonp";
        options.jsonp = "JSONPcallback";        
        return Backbone.sync(method, model, options);
    },
    parse: function(response) {
        if (response) {
            var parsed = [];
            for(var i = 0; i < response.results.length; i++) {
                parsed.push(response.results[i][0]);
            }

            return parsed;
        }
    }
}); 
```

然后，在 app/application.js 的初始化方法中，我通过以下方式调用它：

```
var Category = require('models/collection');
this.cat = new Category();
this.cat.fetch(); 
```

现在，当我查看 console.log 中的 parse 函数时，我看到正在获取数据，因此请求成功通过。但是，当我的视图被渲染并且我在 app/views/view.js 中执行 console.log(application.cat.models) 时，我什么也得不到——为什么会这样？我的模型/系列上的代码有什么问题吗？

此外，JSONP 数据具有以下格式，这就是为什么遍历 for response.results[i][0] 并返回一个包含所有数据的数组，这应该可以解决问题，对吧？

```
{"results":[
  {"0":{"id":xxx,"title":xxx,"link":xxx},
   "description":xxx},
  {"0":{"id":xxx,"title":xxx,"link":xxx},
   "description":xxx},
  {"0":{"id":xxx,"title":xxx,"link":xxx},
   "description":xxx},...
]} 
```

非常感谢任何帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T13:16:06.880

我在这里有 2 条评论：

1.  我看到您将模型和集合都命名为`module.exports`，一种常见的做法是将模型设为单数（module.export）并将这些模型的集合设为复数`module.exports`，这只是常见的做法，否则没有任何“错误”

2.  您的代码中可以有 2 个回调，当集合完成获取数据（异步事件）时，还考虑将 module.exports 作为您的集合，

A. 你可以这样做：

```
module.exports.fetch({
success : function(data){
console.log(JSON.stringiy(data));
//do remaining programming here
}
}); 
```

B. 你可以有一个事件监听器`reset`，从[这里](http://backbonejs.org/#Collection-reset)的文档中，集合在完成获取时触发一个`reset`事件，所以可以像这样在集合上添加一个事件监听器：

```
module.exports.on('reset',function(data){
console.log(JSON.stringify(data));
//do remaining programming here
},this); 
```

# json - Sencha 商店和模型设置为与 Json 一起使用

> ID：14797465
> 
> 赞同：0
> 
> 时间：2013-02-10T11:54:34.927
> 
> 标签：json, listview, sencha-touch

我有一个Json文件......

```
 [
    {   
        "Title":"Package1", 
        "id":"1", 
        "POI":[
            {
                "Title":"POI1", 
                "LayerID":"1", 
            },  
            {
                "Title":"POI2", 
                "LayerID":"1", 
            }
},
 {   
        "Title":"Package2", 
        "id":"2", 
        "POI":[
            {
                "Title":"POI3", 
                "LayerID":"2", 
            },  
            {
                "Title":"POI4", 
                "LayerID":"2", 
            }
}
 ] 
```

填充商店......

```
 Ext.define('Murmuration.store.MyPackages', {
extend: 'Ext.data.Store',
xtype: 'myPackages',

config: {
    model: 'Murmuration.model.PackagesModel',
    proxy: {
        type: 'ajax',
        url : 'data/store.json',

    reader: {
        type: 'json'

    }
    },
    autoLoad: true

     }
 }); 
```

用一个模型......

```
 Ext.define('Murmuration.model.PackagesModel', {
extend: 'Ext.data.Model',
xtype: 'packagesModel',
config: {
    fields: [
    {name: 'Title', type: 'string'},
    {name: 'id', type: 'int'}
    ]
     }

 }); 
```

对于上述列表......

```
 Ext.define('Murmuration.view.homeList', {
extend: 'Ext.List',
xtype: 'homeList',
fulscreen: true,
config: {
    title:'Murmuration',
    itemTpl: '<div>{Title}</div>',
    store:'MyPackages',
fulscreen: true,

     }
 }); 
```

列表项已成功填充“Package1”和“Package2”。但是对于我的生活，我无法成功更改代码以使用第一个包的 POI 标题填充列表............'POI1'和'POI2'。我将如何成功实施以下内容？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:12:39.780

您提供的 json 是嵌套的，所以这里的情况略有不同。首先，您需要`rootProperty`在`reader`. 因此，您在 json 中定义了一个根元素，该元素将设置为`rootProperty`.

下一部分是，你有`POI`一个对象数组。所以你需要一个单独的 POI 模型。可以定义 POI 的模型 -

```
Ext.define('Murmuration.model.POIModel',{
    extend: 'Ext.data.Model',
    config: {
        fields: [
            {name: 'Title', type: 'string'},
            {name: 'LayerID', type: 'int'}
        ],
        belongsTo:'Murmuration.model.PackagesModel'
    }

}); 
```

仔细看后，你会发现有一个额外的 config `belongsTo`。这代表与您的多对一关联，`PackageModel`因为每个包中有许多 POI。

完成此操作后，您还需要将您更改`PackageModel`为 -

```
Ext.define('Murmuration.model.PackagesModel', {
    extend: 'Ext.data.Model',
    config: {
        fields: [
          {name: 'Title', type: 'string'},
          {name: 'id', type: 'int'}
        ]
    },
    hasMany:{
        associationKey:'POI',
        model:'Murmuration.model.POIModel',
        name:'POI'
    }    
 }); 
```

这里，`hasMany`表示该模型有多个 POI 模型的模型实例。`associationKey`是`POI`来自您的 json 的键，并`model`给出 POI 模型的模型实例。

之后，您需要将商店中的阅读器更改为 -

```
Ext.define('Murmuration.store.MyPackages', {
extend: 'Ext.data.Store',       
config: {
    model: 'Murmuration.model.PackagesModel',
    proxy: {
        type: 'ajax',
        url : 'data/store.json',

    reader: {
        type: 'json',
        rootProperty:'items'
    }
    },
    autoLoad: true

     }
 }); 
```

`rootProperty`应该设置为你的json的根。我以为它可能在`items`这里。

最后在您的视图中，您可以像这样设置模板 -

```
itemTpl: new Ext.XTemplate(['<div>Package Title => {Title}'+
            '<tpl for="POI"><h6>POI title => {Title}</h6><h6>POI layer => {LayerID}</h6></tpl></div>'
        ]), 
```

我在你的代码中发现的两件事是不正确的 -

1.  Store 和 Model 不能有`xtype`.
2.  所有`config`选项都应该`config:{}`只在里面。

# visual-studio - Visual Studio 2012 和 Team Foundation Services：无法连接？

> ID：14797467
> 
> 赞同：1
> 
> 时间：2013-02-10T11:54:43.287
> 
> 标签：visual-studio, azure-devops

我正在尝试将 Team Foundation Services（基于云的服务）与 Visual Studio 2012 Update 1 一起使用。

我已经在 visualstudio.com 上配置了我的帐户，并创建了一个示例项目。

当我从 Team Foundation Service 项目页面单击“打开 Visual Studio 的新实例”链接时：

*   在家里，我的 VS2012 打开并连接，我可以在 Team 面板中看到该项目。
*   控制我的工作电脑时，VS2012 会打开，但无法连接。团队面板在项目名称应位于的位置显示“已断开连接”。

当“打开 Visual Studio 的新实例”链接不起作用时，如何将 VS 连接到 Team Foundation Services？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:35:20.543

您可以手动将新的服务器实例添加到 Visual Studio。在“团队资源管理器”选项卡上的“项目”菜单项（单击`>`）上，您应该有一个以前连接的项目列表。

如果您想要的项目不存在，请选择“连接到项目”。点击`servers`按钮添加`https://[youraccount].visualstudio.com/`。

# sql - 使用 EF 5 Context.Database.SqlQuery 加载相关实体

> ID：14797468
> 
> 赞同：1
> 
> 时间：2013-02-10T11:54:55.457
> 
> 标签：sql, asp.net-mvc, entity-framework, entity-framework-5

我有这个SP，

```
ALTER PROCEDURE [dbo].[GetPageByID]
(
    @ID INT
)
AS

    SELECT  P.*
            ,A.*
    FROM    Page P
            LEFT OUTER JOIN [dbo].[Application] A ON P.ApplicationVersion = A.[Version]
    WHERE   P.ID = @ID; 
```

我正在使用此代码加载到对象中，

```
 return context.Database.SqlQuery<Page>(@"EXEC GetPageByID {0}", new object[] { id }).FirstOrDefault(); 
```

这仅加载 Page 的属性，但不加载 Page.Application 属性。任何方式告诉 EF 这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T18:54:05.743

No.`SqlQuery`只能加载您要求的主要实体 - 在您的情况下是`Page`. 如果你也想加载孩子，你不能使用`SqlQuery`. 带有 EDMX 的 EF5 为[具有多个结果集的存储过程](http://msdn.microsoft.com/en-US/data/jj691402)提供映射（这意味着您将需要具有两个查询的存储过程 - 一个用于页面，第二个用于应用程序）。尚不支持代码优先。

# html - 身体前的空间？

> ID：14797479
> 
> 赞同：2
> 
> 时间：2013-02-10T11:57:46.900
> 
> 标签：html, space

我似乎无法解决我的问题，由于某种原因，我的身体前有一个空间。

```
<html>
    <head>
        <link rel='stylesheet' type='text/css' href='style.css' />
        <link rel='shortcut icon' href='img/favicon.ico' />
    </head>
    <body>
        <div name='header_area'>
            <div class='wrapper'>
                <div class='content'>
                    <table class='header_table'>
                        <tr>
                            <td class='table_cell_left'>
                                <a href='index.php'><img src='img/logo.png' /></a>
                            </td>
                            <td class='table_cell_right'>
                                Derp
                            </td>
                        </tr>
                    </table>
                </div>
                <div name='navigation'>
                    <ul class='nav'>
                        <li><a class='nav_link' href='index.php'>HOME</a></li>
                        <li><a class='nav_link' href='?action=forum'>FORUM</a></li>
                        <li><a class='nav_link' href='?action=server'>SERVER</a></li>
                        <li><a class='nav_link' href='?action=donate'>DONATE</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div name='content_area'>
            <div class='wrapper'>
                <div class='content_area_box'>
                    test
                </div>
            </div>
        </div>
    </body>
</html> 
```

样式表：

```
@charset "utf-8";
/* CSS Document */

* {
    margin:0;
    padding:0;
}

body {
    width:100%;
    font-family:'Calibri';
    font-size:16px;
    background-image:url('img/pattern.png');
    background-repeat:repeat;
    background-color:#F0F2F3;
}
.wrapper {
    margin:0 auto;
    width:900px;
}
.content {
    margin:10px;
}
.header_table {
    width:100%;
    border:none;
    margin:30px auto;
}
.table_cell_left {
    text-align:left;
    vertical-align:middle;
}
.table_cell_right {
    text-align:right;
    vertical-align:middle;
}
.textbox {
    padding:2px;
    height:22px;
    border:1px solid #CCCCCC;
    background-color:#FFFFFF;
    color:#000000;
}
.button {
    cursor:pointer;
    height:22px;
    padding:2px 6px;
    border:1px solid #CCCCCC;
    background-color:#FFFFFF;
    color:#000000;
    -webkit-transition: background 0.4s linear, color 0.4s linear;
    -moz-transition: background 0.4s linear, color 0.4s linear;
}
.button:hover, .button:focus {
    background-color:#99CCCC;
    color:#FFFFFF;
    -webkit-transition: background 0.4s linear, color 0.4s linear;
    -moz-transition: background 0.4s linear, color 0.4s linear;
}
.link:link, .link:visited {
    color:#003399;
    text-decoration:none;
}
.link:hover, .link:active, .link:focus {
    color:#FF9933;
}
.nav {
    list-style-type:none;
    overflow:hidden;
    background-color:#FFFFFF;
    border:1px solid #CCCCCC;
}
.nav li {
    float:left;
}
.nav_link:link, .nav_link:visited {
    float:left;
    border-right:1px solid #CCCCCC;
    padding:10px 25px;
    color:#000000;
    background-color:#FFFFFF;
    text-decoration:none;
    font-weight:bold;
    -webkit-transition:background 0.4s linear, color 0.4s linear;
    -moz-transition:background 0.4s linear, color 0.4s linear;
}
.nav_link:hover, .nav_link:active, .nav_link:focus {
    background-color:#99CCCC;
    color:#FFFFFF;
    -webkit-transition:background 0.4s linear, color 0.4s linear;
    -moz-transition:background 0.4s linear, color 0.4s linear;
}
.content_area_box {
    background-color:#FFFFFF;
    border-left:1px solid #CCCCCC;
    border-bottom:1px solid #CCCCCC;
    border-right:1px solid #CCCCCC;
} 
```

这是我得到的结果的图片。我不希望它有这样的空间，我希望它从顶部开始。这也发生在我测试的每个浏览器中。

![在此处输入图像描述](../Images/05c5da1b9b1aabab4e4052af869fbe8e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T12:08:01.220

您的

```
<table class="header_table"> 
```

边距为`30px`. 看

```
.header_table {
    width:100%;
    border:none;
    margin:30px auto;
} 
```

只需删除此边距（或添加 a `margin-top:0;`），一切都会好起来的。

# java - Java类设计问题

> ID：14797489
> 
> 赞同：0
> 
> 时间：2013-02-10T11:59:07.277
> 
> 标签：java, class, methods, visibility

这是一个类设计： http: [//pastebin.com/1RSdmtXi](http://pastebin.com/1RSdmtXi)

如果我只放入`A`类 Expect 我希望只看到 A 的 getter 和 setter，或者 B 的 vica vera。如果放入`A`and `B`，那么所有的 getter 和 setter 都应该是可见的。

因此，仅举一个例子`A`：

```
A[] aExampe = {new A("Tim",1)};
Expect exp = new Expect(aExampe);

exp.getA(); --> visible
exp.getB(); --> not visible 
```

您可以为此建议另一种设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:08:40.457

尝试使用这个：

```
 Expect.class.getMethod("getA", null).setAccessible(true);
 Expect.class.getMethod("getB", null).setAccessible(false); 
```

但我建议你改变你的架构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T12:36:19.257

为什么这是一个需要？

如果您更改类`Expect`（通过添加删除字段），您也可以添加和删除 getter 和 setter。

如果您想在不修改和重新编译客户端类的情况下更改类，请定义一个包含所有需要的方法的接口，按`Expect`类实现它，而不是删除这些方法，只需将它们设为空方法（没有任何主体）。

通过这种模式，您将不会使用编译时检查，也不需要对正常的方法调用使用脏反射。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T12:03:16.303

在 Expect 类中，您应该只有 getA()、setA、getB 和 setB，而不是 A 和 B 属性的所有 getter 和 setter。那些属于那些类。

# ios - 观看 RSS 提要以获取更新的最佳方式？

> ID：14797495
> 
> 赞同：0
> 
> 时间：2013-02-10T12:00:02.300
> 
> 标签：ios, objective-c, rss

**我需要在我的应用程序中有一个功能，用户可以从 RSS 提要获取更新。**

问题是，根据用户的不同，可能会有 10 到 20 个甚至更多的 RSS 提要要关注。现在我正在做这个最简单的方法：

*   当应用程序启动时，获取所有提要
*   解析它们（每个提要甚至可能是 500 个条目）
*   按 RSS 中每个条目的日期查找更改。

对于大约 20 次提要，整个过程可能需要 10 秒，这真的不能接受。

**我的问题是，我能以某种方式优化这个过程吗？**我可以在 rss 提要中“达到峰值”并检查条目数，而不获取整个提要吗？

```
NSURL *url = @"http://www.feedurl.com/feed";
NSString *xmlString = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:nil]; 
```

我正在为每个提要执行此操作，然后使用[TBXML](http://www.tbxml.co.uk/TBXML/TBXML_Free.html)对其进行解析。当然，在主线程上什么也没做。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-10T13:35:14.743

我强烈推荐[MWFeedParser](https://github.com/mwaterfall/MWFeedParser)

易于使用且功能齐全

# xcode - 我可以阻止 NSDocument 保存窗口位置吗？

> ID：14797502
> 
> 赞同：1
> 
> 时间：2013-02-10T12:01:10.780
> 
> 标签：xcode, nswindow

我查看了 NSDocuments 文档，但看不到任何控制是否保存窗口位置的方法。但是如果我在退出前移动一个窗口，该位置会覆盖在 IB 中设置的窗口位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T14:09:15.043

![在此处输入图像描述](../Images/8122f734f4798571791cbb980cd2e3ed.png)

在您的 XIB 文件中，选择窗口。您应该会在屏幕右侧看到选项。“可恢复”复选框应该是您要查找的内容。我没有在基于文档的应用程序中尝试过这个，但我很确定这里是一样的。

# scala - 从 MurmurHash 迁移到 MurmurHash3

> ID：14797505
> 
> 赞同：7
> 
> 时间：2013-02-10T12:01:24.593
> 
> 标签：scala, hash, murmurhash

在 Scala 2.10 中，`MurmurHash`由于某种原因已弃用，说我`MurmurHash3`现在应该使用。`MurmurHash3`但是 API 不同，对于-> fail没有有用的 scaladocs 。

例如，当前代码：

```
trait Foo {
  type Bar
  def id: Int
  def path: Bar

  override def hashCode = {
    import util.MurmurHash._
    var h = startHash(2)
    val c = startMagicA
    val k = startMagicB
    h = extendHash(h, id, c, k)
    h = extendHash(h, path.##, nextMagicA(c), nextMagicB(k))
    finalizeHash(h)
  }
} 
```

我将如何使用它`MurmurHash3`来做到这一点？这需要是一个快速的操作，最好没有分配，所以我不想构造一个`Product`,`Seq`或`Array[Byte]`任何`MurmurHash3`似乎提供给我的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T12:56:21.337

令人困惑的是， [MurmurHash3 算法](http://code.google.com/p/smhasher/)从一种混合了自己的盐（本质上是 (`c`和`k`) 的算法）变成了一种只进行更多位混合的算法。基本操作现在是`mix`，您应该折叠所有值，之后应该折叠`finalizeHash`（`Int`长度参数也是为了方便，以帮助区分不同长度的集合）。如果你想用 替换你的最后一个`mix`，`mixLast`它会更快一点，并用`finalizeHash`. 如果您需要很长时间才能检测到最后的混合是什么，只需`mix`.

通常对于一个集合，您需要混合一个额外的值来指示它是什么类型的集合。

所以至少你会有

```
override def hashCode = finalizeHash(mixLast(id, path.##), 0) 
```

“通常”你会

```
// Pick any string or number that suits you, put in companion object
val fooSeed = MurmurHash3.stringHash("classOf[Foo]")   

// I guess "id" plus "path" is two things?
override def hashCode = finalizeHash(mixLast( mix(fooSeed,id), path.## ), 2) 
```

请注意，长度字段不能提供混合该数字的高质量哈希。重要哈希值的所有混合都应使用`mix`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T12:20:44.180

查看MurmurHash3的[源代码建议如下：](https://github.com/scala/scala/blob/v2.10.0/src/library/scala/util/hashing/MurmurHash3.scala)

```
override def hashCode = {
  import util.hashing.MurmurHash3._

  val h = symmetricSeed // I'm not sure which seed to use here
  val h1 = mix(h, id)
  val h2 = mixLast(h1, path ##)
  finalizeHash(h2, 2)
} 
```

或者，在（几乎）一行中：

```
import util.hashing.MurmurHash3._
override def hashCode = finalizeHash(mix(mix(symmetricSeed, id), path ##), 2) 
```

# matlab - 将时间序列从零均值和单位方差转换回来

> ID：14797509
> 
> 赞同：1
> 
> 时间：2013-02-10T12:01:58.463
> 
> 标签：matlab, mean, variance

我有一个相当简单的问题，我需要一些建议。如果我有一个时间序列

```
t = 1:365;
raw =  10+(10-2).*rand(1,length(t)); % generate random time series
signal_1 = 10*sin(2*pi*t/12)+20; % create a signal with a period of 24
signal_2 = 10*sin(2*pi*t/32)+20; % create a signal with a period of 32

y = raw + signal_1 + signal_2; % combine the signals 
```

我可以使信号的均值和单位方差为零

```
y2 = (y - nanmean(y))./nanstd(y); % zero mean with unit variance 
```

我如何将它转换回与原始系列相同的大小，即转换回与'y'相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T12:04:46.137

在进行转换之前记录 mean 和 stddev，以便您可以在相反的方向重新应用：

```
mu = nanmean(y);
sd = nanstd(y);

y2 = (y - mu) / sd;

...

y3 = y2 * sd + mu; 
```

# php - 如果行存在，则更新 MySQL 表的最快方法，否则插入。超过 2 个非唯一键

> ID：14797510
> 
> 赞同：12
> 
> 时间：2013-02-10T12:01:59.470
> 
> 标签：php, mysql, sql, sql-update, sql-insert

我有以下表结构：

```
 CREATE TABLE IF NOT EXISTS `reports` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `day` int(11) NOT NULL,
  `uid` int(11) NOT NULL,
  `siteid` int(11) NOT NULL,
  `cid` int(3) NOT NULL,
  `visits` int(11) NOT NULL,
  PRIMARY KEY (`id`)
 ) 
```

目前我使用以下代码段检查和插入/更新：

```
 $checkq = mysql_query("SELECT count(*) as rowexist FROM reports WHERE day='$day' AND uid='$uid' AND siteid='$sid' AND cid='$cid'") or die(mysql_error()); 
$checkr = mysql_fetch_array($checkq);

if ($checkr['rowexist'] > 0) {
 mysql_query("UPDATE reports_adv SET visits=visits+1 WHERE  day='$day' AND uid='$uid' AND siteid='$sid' AND cid='$cid'"); 
} else {
 mysql_query("INSERT INTO reports_adv SET day='$day', uid='$uid', siteid='$sid', cid='$cid', visits='1'");
} 
```

如果行存在，则更新此 MySQL 表的最快方法是插入超过 2 个非唯一键吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-10T12:04:57.913

只需使用`INSERT...ON DUPLICATE KEY UPDATE`

```
INSERT INTO reports_adv (day, uid, siteid, cid, visits) 
VALUES ('$day', '$uid', '$sid', '$cid', 1)
ON DUPLICATE KEY UPDATE visits=visits+1; 
```

*   [INSERT ... ON DUPLICATE KEY UPDATE 语法](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

但在其他任何事情之前，您应该`UNIQUE`在列上定义一个约束。

```
ALTER TABLE reports_adv  ADD CONSTRAINT tb_uq UNIQUE (day, uid, siteid, cid) 
```

# mysql - SQL 请求报告

> ID：14797511
> 
> 赞同：0
> 
> 时间：2013-02-10T12:02:13.353
> 
> 标签：mysql, sql

报告请求的编写有问题，这反映了每天创建和更新的事件数量。

该表包括：

字段类型注释

```
id int (11) NOT NULL
name varchar (255) NULL
created_on datetime NOT NULL
updated_on datetime NOT NULL 
```

创建日期和更新日期可能不一致。

要求：

```
SELECT 
    z.date_created, 
    SUM (IF (z.date_created = z.date_updated, 1, 0)) AS created, 
    SUM (IF (z.date_created! = Z.date_updated, 1, 0)) AS updated
FROM 
(
    SELECT 
        SUBSTRING (e.updated_on, 1, 10) AS date_updated, 
        SUBSTRING (e.created_on, 1, 10) AS date_created 
    FROM 
        event e
) z
GROUP BY 
    z.date_created 
```

我需要以下结果： ![在此处输入图像描述](../Images/e77a5e923097c879ee9772325debdb8b.png)

没有给出想要的结果，因为没有显示所有日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:33:12.180

假设你想要

*   查看所有日期；
*   事实上计算`create`；
*   `update`仅当它不是创建日期时才计算：

[http://www.sqlfiddle.com/#!2/56254/39](http://www.sqlfiddle.com/#!2/56254/39)

```
SELECT A.*
,(SELECT count(created_on) 
    FROM event WHERE date=created_on) created
,(SELECT sum(created_on<>updated_on) 
    FROM event WHERE date=updated_on) updated
FROM (
SELECT created_on date FROM event
UNION SELECT updated_on FROM event ) A 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T13:40:01.600

要获取特定日期创建和更新的事件数，请执行以下操作。

```
select count(*) events
from event
where  
(created_on >= {d '2013-02-10'} and created_on < {d '2013-02-11'})
or
(updated_on >= {d '2013-02-10'} and updated_on < {d '2013-02-11'}) 
```

这种方法考虑了这些字段的时间部分。

# pascal - 在 Lazarus Pascal 中将字符串转换为日期

> ID：14797513
> 
> 赞同：0
> 
> 时间：2013-02-10T12:02:25.243
> 
> 标签：pascal

我是 Pascal 编程的新手，我花了一整天时间尝试将字符串转换为有效日期，以后我可以用它来减去另一个日期，以发现两个日期之间的天数。你能帮我吗？

我从这段代码开始尝试将以字符串格式输入的第一个日期转换为可用于计算的日期：

```
program TryDate;

Var
date1: TDateTime;
thedate:string;

Begin
Writeln ('Enter date');
Readln (thedate);
date1:=StrToDate (thedate);
Writeln ('The date is ',date1);
end.

The program's basic structure can be seen here:

Begin
Writeln ('Enter customer last name');
readln (clname);
Writeln ('Enter customer first name');
readln (cfname);
Writeln ('Enter Dvd Title');
readln (dvdtit);
Writeln ('Enter Due Date');
readln (dued);
Writeln ('Enter Actual Date Returned');
readln (adret);
daysover:=adret-dued;
readln;
end. 
```

我预计会进一步扩展该程序，但在尝试其他组件之前试图让这个小部分工作。

简单的说明和示例或可能的解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T14:41:52.860

除了 Andriy，您也不提供操作系统信息或输入日期的格式。

这很重要，因为在 *nix 上，您必须将 clocale 添加到您的USES 子句中以初始化还包括首选日期格式的语言环境系统。

对于真正可怕的东西，有可以解析大多数自定义创建日期的函数 scandatetime：[http ://www.freepascal.org/docs-html/rtl/dateutils/scandatetime.html](http://www.freepascal.org/docs-html/rtl/dateutils/scandatetime.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T13:00:51.137

您尚未指定到目前为止所获得的代码存在什么问题。如果您的实际代码与您发布的完全一样，我可以看到的唯一问题是您没有指定`uses sysutils;`，如下所示：

```
program TryDate;

**uses
  sysutils;**

Var
  date1: TDateTime;
  thedate: string;

Begin
  Writeln ('Enter date');
  Readln (thedate);
  date1 := StrToDate (thedate);
  Writeln ('The date is ',date1);
end. 
```

该`StrToDate`函数是`sysutils`单元的一部分，您需要将其包含在程序`uses`中才能使用其过程、函数、类型等。

# facebook-graph-api - Graph Api 有效，但在浏览器中无效

> ID：14797514
> 
> 赞同：0
> 
> 时间：2013-02-10T12:02:47.027
> 
> 标签：facebook-graph-api

因此，在 Facebook Graph Api 中，此链接有效：

```
https://graph.facebook.com/483520791669390/attending 
```

但是当我将它粘贴到浏览器中时出现此错误

```
"message": "An access token is required to request this resource.",
"type": "OAuthException",  
 Why? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T13:51:30.640

您需要一个有效的访问令牌，它可以在 Facebook Explorer 中使用，因为那里提供了一个令牌。

> 任何有效的 access_token、user_events 或 friends_events

[https://developers.facebook.com/docs/reference/api/event/](https://developers.facebook.com/docs/reference/api/event/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T14:11:37.437

是的，你需要一个访问令牌来做这些事情。

将网址编辑为[https://graph.facebook.com/483520791669390/attending?access_token=YOUR_ACCESS_TOKEN](https://graph.facebook.com/483520791669390/attending?access_token=YOUR_ACCESS_TOKEN)

# java - 如何从 ArrayAdapter 中解除 AlertDialog

> ID：14797515
> 
> 赞同：0
> 
> 时间：2013-02-10T12:02:48.127
> 
> 标签：java, android, android-arrayadapter, android-alertdialog, onclicklistener

我使用 ArrayAdapter 创建了带有单选按钮的单选 AlertDialog。选择比率时是否可以关闭该警报对话框？我在 ArrayAdapter 类 holder.name.setOnClickListener 中有 OnClick 侦听器，但我不知道该怎么做。

警报对话框代码：

```
Builder builder = new Builder(serveris, useris, paswordas, BuildBuildingsViewActivity.this, USER_AGENT);

                        ArrayList<AvailableBuildings> availableBuildings = builder.checkForPossibleBuildings(pastatas.getBuildingLink());

                        ArrayAdapter<AvailableBuildings> adapter = new AvailableBuildingsAdapter(BuildBuildingsViewActivity.this, R.layout.choice_main, availableBuildings, host, curdid, pastatas.getBuildingLink());

                        new AlertDialog.Builder(BuildBuildingsViewActivity.this)
                        .setSingleChoiceItems(adapter, 0, null)
                        .setPositiveButton("Cancel", new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int whichButton) {
                                dialog.dismiss();
                            }
                        })
                        .show(); 
```

阵列适配器代码：

```
public class AvailableBuildingsAdapter extends ArrayAdapter<AvailableBuildings> {

    public DBAdapterBuild db_build;

        public AvailableBuildingsAdapter(Context context, int textViewResourceId,ArrayList<AvailableBuildings> availableBuildings, String host, String curdid, String aiksteles_link) {
            super(context, textViewResourceId, availableBuildings);
            this.context = context;
            this.availableBuildings = new ArrayList<AvailableBuildings>();
            this.availableBuildings.addAll(availableBuildings);
            this.host = host;
            this.curdid = curdid;
            this.aiksteles_link = aiksteles_link;
            db_build = new DBAdapterBuild(context, host);
        }

        private String host;
        private Context context;
        private String curdid;
        private String aiksteles_link;
        private ArrayList<AvailableBuildings> availableBuildings;

        static class ViewHolder {
           RadioButton name;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent)
        {

            ViewHolder holder;

            if (convertView == null) {
                LayoutInflater vi = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                convertView = vi.inflate(R.layout.choice_row, null);

                holder = new ViewHolder();
                holder.name = (RadioButton) convertView.findViewById(R.id.building_name);
                convertView.setTag( holder );
                holder.name.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                        db_build.open();
                        RadioButton name = (RadioButton) v;
                        AvailableBuildings building = (AvailableBuildings) name.getTag();
                        Log.e( "Available: ", ""+building.getAvailable_title()+building.getAvailable_code());
                        Log.e( "Available: ", ""+db_build.insertTitle(1, building.getAvailable_title(), aiksteles_link, curdid, 0, 1, building.getAvailable_type(), "3", building.getAvailable_code()));
                        db_build.close();

                    }
                });
            }  else {
                // view already defined, retrieve view holder
                holder = (ViewHolder) convertView.getTag();
            }

            AvailableBuildings building = availableBuildings.get(position);

            if ( building == null ) {

            }
            holder.name.setText(building.getAvailable_title());
            holder.name.setTag(building);

            return convertView;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T14:08:09.247

我解决了传递给 ArrayAdapter 构造函数 Dialog 对象的这个问题，接下来这样做：

```
holder.name.setOnClickListener(new View.OnClickListener() {
                    public void onClick(View v) {
                        db_build.open();
                        RadioButton name = (RadioButton) v;
                        AvailableBuildings building = (AvailableBuildings) name.getTag();
                        Log.e( "Available: ", ""+building.getAvailable_title()+building.getAvailable_code());
                        Log.e( "Available: ", ""+db_build.insertTitle(1, building.getAvailable_title(), aiksteles_link, curdid, 0, 1, building.getAvailable_type(), "3", building.getAvailable_code()));
                        db_build.close();
                        dia.dismiss();
                    }
                }); 
```

# xml - XQuery 性能

> ID：14797516
> 
> 赞同：1
> 
> 时间：2013-02-10T12:02:59.023
> 
> 标签：xml, performance, xquery

我使用 stylus studio（带有 DATA DIRECT）/xQuery 将两个 xmls 文件合并为一个（文件先从 CSV 转换为 xml，然后再加入）。首先读取客户（标题）数据，然后为每个客户读取匹配交易数据。（使用循环）交易数据也按交易日期（年份）分组。这是通过使用 distinct 函数完成的。交易数据文件很大，处理速度很慢。我正在寻找提高性能的方法。任何帮助。建议很受欢迎。下面是使用的代码。谢谢。

```
(:options:)
declare option ddtek:xml-streaming "yes";
declare option ddtek:serialize "encoding=UTF-8, 
               omit-xml-declaration=no, indent=yes";

(:external variables:)
declare variable $esa-h-converter as xs:string external;
declare variable $esa-t-converter as xs:string external;
declare variable $input-h-data-path as xs:string external;
declare variable $input-t-data-path as xs:string external;

(:main:)
<ROOT_NODE>
  {
    let $heads := doc(fn:concat(
                        "converter:", 
                        $esa-h-converter, 
                        "?file:///", 
                        $input-h-data-path))
                  /DATA_ROOT/CUSTOMER 

    for $record at $primaryKey in $heads

    return
      <TEMPLATE>
        <CUSTOMER>
          <RECORD_COUNT>{ $primaryKey }</RECORD_COUNT>
          <HD_REGION>{ $record/HD_REGION/text() }</HD_REGION>
          <HD_CONT>{ $record/HD_CONT/text() }</HD_CONT>
          <HD_FRDATE>{ $record/HD_FRDATE/text() }</HD_FRDATE>
          <HD_TODATE>{ $record/HD_TODATE/text() }</HD_TODATE>
          <HD_CUSNAME>{ $record/HD_CUSNAME/text() }</HD_CUSNAME>
          <HD_ADDR1>{ $record/HD_ADDR1/text() }</HD_ADDR1>
          <HD_ADDR2>{ $record/HD_ADDR2/text() }</HD_ADDR2>
          <HD_ADDR3>{ $record/HD_ADDR3/text() }</HD_ADDR3>
          <HD_ADDR4>{ $record/HD_ADDR4/text() }</HD_ADDR4>
          <HD_STATE>{ $record/HD_STATE/text() }</HD_STATE>
          <HD_SUBTOWN>{ $record/HD_SUBTOWN/text() }</HD_SUBTOWN>
          <HD_PCODE>{ $record/HD_PCODE/text() }</HD_PCODE>
          {

            let $my-transactions := 
                doc(fn:concat("converter:", 
                              $esa-t-converter, 
                              "?file:///", 
                              $input-t-data-path)) 
                              /DATA_ROOT
                              /TRANSACTION
                             [TR_CONT eq $record/HD_CONT 
                              and TR_REGION eq $record/HD_REGION]
            let $years := fn:distinct-values(
                           $my-transactions
                           /fn:substring(TR_DATE/text(), 1, 4))
            for $period in $years
            return
              <PERIOD>
                <RECORD_COUNT>{ $primaryKey }</RECORD_COUNT>
                <YEAR>{ $period }</YEAR>
                {
                  $my-transactions 
                  [fn:substring(TR_DATE/text(), 1, 4) = $period]
                }              
              </PERIOD>
          }
        </CUSTOMER>
      </TEMPLATE>
  }
</ROOT_NODE> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:02:34.683

性能通常在很大程度上取决于单个产品和特定数据，因此请对您在这里获得的所有建议持保留态度，并在相信之前自己进行测试。我希望比我更熟悉 Data Direct 处理器的人能够回答您的问题。但是话虽如此，但我想到了几件事可能值得尝试：

*   您可以先尝试按客户对交易文件进行排序，然后再执行合并。如果事务文件很长，排序不会很快。

*   您可以（给定由客户组织的交易文件）访问交易文件中的每个客户并执行合并，而不是访问主文件中的每条记录并为其查找交易。

*   您的内部 FLWOR 表达式正在整个事务文件中进行两个选择，其中涉及查看`fn:substring(TR_DATE/text(), 1, 4)`——这似乎很可能会破坏几乎所有 XQuery 引擎的优化器。如果引擎在日期上建立了索引，那么查看子字符串可确保查询处理器无法对值进行简单的索引查找，但必须扫描索引中的所有值（或者可能是文档中的所有值) 匹配。

    既然您说您正在为这两个文件创建 XML，我想您可以提取该年份子字符串并将其（冗余地）放在单独的元素或属性中。原则上，这将使 XQuery 引擎能够构建索引并使用索引查找而不是扫描来执行该部分选择。（我不知道这对您的特定处理器是否有帮助。）

# c++ - 无法理解为什么分段错误？

> ID：14797517
> 
> 赞同：2
> 
> 时间：2013-02-10T12:03:07.197
> 
> 标签：c++, design-patterns, c++11, segmentation-fault

我已经实现了下面的程序来理解复合设计模式。我也使用了 C++11 中的几个概念。但对我不利的是，该程序在运行时出现分段错误。我尝试使用 GDB 进行调试，发现 getID() 函数存在一些问题。

```
#0  0x08049a12 in Employee::getID (this=0x0) at Composite.cpp:27
27      int getID(){return ID;} 
```

但是我仍然无法理解该功能有什么问题？感谢有人可以提供帮助。

```
#include <iostream>
#include <memory>
#include <string>
#include <vector>
#include <algorithm>

using namespace std;

class Employee
{
    protected:
    int ID;
    string Name;
    string Role;

    public:
    Employee(int empID, string empName, string empRole)
    {
        ID=empID;
        Name=empName;
        Role=empRole;
    }
    virtual void showDetails()=0;
    virtual void addWorker(shared_ptr<Employee> newWorker)=0;
    virtual void deleteWorker(shared_ptr<Employee> employee)=0;
    virtual ~Employee(){}
    int getID(){return ID;}
};

class Worker : public Employee
{
    public:
    Worker(int empID, string empName, string empRole)
        : Employee(empID, empName, empRole) {}

    void showDetails()
    {
        cout<<Name<<" ("<<ID<<") "<<Role<<endl;
    }

    void addWorker(shared_ptr<Employee> newWorker){};
    void deleteWorker(shared_ptr<Employee> employee){};
};

class Supervisor : public Employee
{
    private:
    vector<shared_ptr<Employee>> myTeam;

    public:
    Supervisor(int empID, string empName, string empRole)
        : Employee(empID, empName, empRole) {}

    void addWorker(shared_ptr<Employee> newWorker)
    {
        myTeam.push_back(newWorker);
    }

    void deleteWorker(shared_ptr<Employee> employee)
    {
        int pos=0;
        for (auto temp : myTeam)
        {
        if (temp->getID()!=employee->getID())
            ++pos;
        else
            myTeam.erase(myTeam.begin()+pos);
        }
    }

    void showDetails()
    {
        cout<<Name<<" ("<<ID<<") "<<Role<<" ---->"<<endl;
        for (auto worker : myTeam)
        {
        worker->showDetails();
        }
        cout<<endl;
    }
};

int main()
{
    shared_ptr<Employee> Tushar(new Worker(376653,"Tushar Shah","Team mate"));
    shared_ptr<Employee> Ranjeet(new Worker(469725,"Ranjeet Aglawe","Team mate"));
    shared_ptr<Employee> Kiran(new Supervisor(137581,"Kiran Asher","Manager"));
    shared_ptr<Employee> Namita(new Supervisor(122110,"Namita Gawde","Manager"));
    shared_ptr<Employee> Rumman(new Supervisor(122022,"Rumman Sayed","Manager"));
    shared_ptr<Employee> Rajendra(new Supervisor(111109,"Rajendra Redkar","Manager"));
    shared_ptr<Employee> Sameer(new Supervisor(106213,"Sameer Rajadhyax","Group Lead"));

    Kiran->addWorker(Tushar);
    Kiran->addWorker(Ranjeet);
    Sameer->addWorker(Kiran);
    Sameer->addWorker(Namita);
    Sameer->addWorker(Rumman);
    Sameer->addWorker(Rajendra);

    Sameer->showDetails();

    Sameer->deleteWorker(Rumman);
    Sameer->showDetails();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T12:12:08.890

改变

```
else
    myTeam.erase(myTeam.begin()+pos); 
```

至

```
else {
    myTeam.erase(myTeam.begin()+pos);
    break;
} 
```

修复崩溃（[ideone 上](http://ideone.com/YBXuXa)的演示；没有`break`，[它与 SIGSEGV 一起崩溃](http://ideone.com/rSdKpE)）。问题是，即使在删除其中一个元素之后，您仍会继续迭代该向量，这是不允许的。

由于您将只删除一个工作人员（假设它`ID`是唯一的），因此在删除元素后继续操作无论如何都不是一个好主意。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T12:12:48.397

您的问题是 C++ 和 STL 的一个非常常见的缺陷：您在迭代过程中不小心擦除。这里：

```
 for (auto temp : myTeam)
    {
    if (temp->getID()!=employee->getID())
        ++pos;
    else
        myTeam.erase(myTeam.begin()+pos);
    } 
```

通常在迭代 STL 容器时从 STL 容器中擦除是不可行的。相反，请考虑“标记”稍后要删除的元素，或者使用基于整数或迭代器的迭代，以便您可以更精确地控制它。我可能会在这里使用一个简单的基于整数的 for 循环，因为无论如何你都有这个“pos”变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T12:13:17.680

问题可能出在您的 deleteWorker 方法中。您在修改容器时正在迭代容器。

我建议两种可能的解决方案之一

*   找到要删除的项目的索引，并将它们按升序存储在向量中。然后按降序迭代向量并删除它们。
*   将 std::remove_if 与 vector::erase 结合使用。[你可以在这里](http://en.cppreference.com/w/cpp/algorithm/remove)看到一个例子

# android - Android如何将电话号码添加到现有联系人

> ID：14797519
> 
> 赞同：1
> 
> 时间：2013-02-10T12:03:41.930
> 
> 标签：android, android-intent, android-contacts

在我的应用程序中，我有 textView，用户可以在其中插入电话号码，我想打开本地地址并将此号码添加到现有联系人中，

我该如何实现呢？

我设法用这个打开**新的联系人**：

```
Intent intent = new Intent(Intent.ACTION_INSERT);
intent.setType(ContactsContract.Contacts.CONTENT_TYPE);
intent.putExtra(ContactsContract.Intents.Insert.PHONE, phoneNumber); 
```

但我的要求是还支持为现有联系人添加此号码

# c# - nuget 打包 csproj 与 nuspec 之间的区别

> ID：14797525
> 
> 赞同：58
> 
> 时间：2013-02-10T12:04:54.613
> 
> 标签：c#, .net, nuget

最近，我开始从我的几个项目中打包 nuget 包。首先，我从 Package Explorer 应用程序开始。这是一个不错的工具，但如果您进行持续集成，它的用处就会降低。然后我研究了指定*nuspec*模板文件，并将更改的数据（例如版本号）作为命令行参数传递。后来想知道如何定义nuget包依赖。事实证明，如果您指定csproj， *nuget.exe已经基于**package.config*执行此操作。此外，它还从程序集信息中提取作者、版本、版权等相关数据。我现在缺少的是在命令行中指定 licenseUrl 的能力。但我希望这个问题更笼统。所以我问：

 ***打包 nuget 包的首选方式是什么？**

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-02-11T08:05:25.483

这是一个鲜为人知的事实：**您可以将两者结合起来**！以 csproj 文件为目标，并确保在同一目录中有一个与 csproj 文件同名的 nuspec 文件。NuGet 将在包创建期间将两者合并。

简而言之： target `<ProjectName>.csproj`，可选择添加一个相应的*[标记化](http://docs.nuget.org/docs/reference/nuspec-reference#Replacement_Tokens)* `<ProjectName>.nuspec`文件，以供 NuGet.exe 用作元数据。

它使您免于管理输出位置、依赖项、版本和其他可以从项目派生的东西。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-10T14:06:40.720

For simple packages you can directly create the packages off `.csproj` or `.vbproj`. But for more advance packages, especially when you need to pull in custom files into your package, you need to use `.nuspec`. I usually start off with the csproj and move to nuspec as needed. You can always get the nuspec using the command `nuget spec` on the csproj.

[https://docs.nuget.org/create/creating-and-publishing-a-package](https://docs.nuget.org/create/creating-and-publishing-a-package)

You can specify any of the properties including `licenseUrl` using the `Properties` parameter to `nuget pack`

```
nuget pack -properties licenseUrl=http://blah 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2017-02-03T00:41:21.107

使用 Visual Studio 2017 的 .csproj，您不需要 .nuspec 文件。您实际上可以将这些值直接添加到您的 csproj 中，它会拾取它们。

在 Visual Studio 中右键单击项目，编辑 xxxxx.csproj。记事本也很好用。

```
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <Version>1.0.1</Version>
    <authors>Subtracts</authors>
    <TargetFrameworks>netstandard1.6;net452</TargetFrameworks>
    <AssemblyName>Checkout.net</AssemblyName>
    <PackageId>Checkout.net</PackageId>

...

</Project> 
```

ps 由于我没有足够的声誉来发表评论，因此我将留下答案，而不是对 Xavier 的答案发表评论。:)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-02-16T11:44:01.620

自 2018 年 2 月起，使用 .NET Core 时，除了基本规范文件属性之外，您还需要提供一个`.nuspec`文件。

但该`dotnet pack`命令不会使用该`.nuspec`文件，除非您添加`<NuspecFile>relative path to nuspec</NuspecFile>`到该`.csproj`文件中。

见[https://github.com/dotnet/cli/issues/2170](https://github.com/dotnet/cli/issues/2170)

大多数包现在可以在没有`.nuspec`文件的情况下制作。需要注意的是依赖关系。您可能需要为`PrivateAssets`一些工具添加一个元素，比如`msbump`和嗯，也许是 SpecFlow。

```
<PackageReference Include="msbump" Version="2.3.2">
  <PrivateAssets>all</PrivateAssets>
</PackageReference> 
```

这会阻止这个包依赖“流动”到你的包的依赖。

还值得一读以最灵活的方式指定版本。

[https://docs.microsoft.com/en-us/nuget/consume-packages/dependency-resolution#floating-versions](https://docs.microsoft.com/en-us/nuget/consume-packages/dependency-resolution#floating-versions)

和范围语法。

[https://docs.microsoft.com/en-us/nuget/reference/package-versioning#references-in-project-files-packagereference](https://docs.microsoft.com/en-us/nuget/reference/package-versioning#references-in-project-files-packagereference)*

# iphone - 限制保存在文档文件夹中的图像数量

> ID：14797527
> 
> 赞同：0
> 
> 时间：2013-02-10T12:04:57.087
> 
> 标签：iphone

我想拍摄 3 张图像并将其作为 IMAGE_1、IMAGE_2 和 IMAGE_3 保存在文档文件夹中。我想将图像的数量限制为三个图像，这意味着第 4 个图像将保存为新的“IMAGE_1”替换第一个图像（旧 IMAGE_1），第 5 个变为“IMAGE_2”，依此类推。下面的代码会将图像保存为 IMAGE_1、IMAGE_2、IMAGE_3、IMAGE_4、... 我应该如何限制保存的图像数量？

```
- (void) saveImage:(UIImage*)image 
{
    NSData *imageData =
    [NSData dataWithData:UIImageJPEGRepresentation(image, 0.9f)];
    [imageData writeToFile:[self savePath] atomically:YES];
}

- (NSString*) savePath
{
    int i=1;
    NSString *path;
    do {
    path = [NSString stringWithFormat: @"%@/Documents/IMAGE_%d.jpg", NSHomeDirectory(), i++];
} while ([[NSFileManager defaultManager] fileExistsAtPath:path]); 

    return path;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:19:53.900

```
static int i=1;  // Place it below your @implementation yourclassname

- (void) saveImage:(UIImage*)image {
    NSData *imageData = [NSData dataWithData:UIImageJPEGRepresentation(image, 0.9f)];
    NSFileManager *fileMgr = [NSFileManager defaultManager];
    NSString *path = [self savePath];

    if([fileMgr fileExistsAtPath:path])
        [fileMgr removeItemAtPath:path error:NULL];
    [imageData writeToFile:path atomically:YES];
}
- (NSString*) savePath {
    if(i==4)
        i=1;
    return [NSString stringWithFormat: @"%@/Documents/IMAGE_%d.jpg", NSHomeDirectory(), i++];
} 
```

希望能帮助到你。

# algorithm - 我在哪里放置一个递归函数中的计数器？

> ID：14797532
> 
> 赞同：0
> 
> 时间：2013-02-10T00:02:46.147
> 
> 标签：algorithm, matlab

不确定是否发布到 PSE 或 SO，但我的问题是关于递归。

假设我有一些递归运行的函数 MergeSort。如果我想计算它拆分数组前半部分的次数，我应该在哪里放置计数器？（我知道我可以计算它，但我试图更好地理解递归）。

所以，例如

```
function u = MergeSort(Array)  

%% Initializations
A = Array;
B = zeros(1,n2);    %to store first half of A
C = zeros(1,n1-n2); %to store second half of A
D = zeros(1,n1);    %to store sorted array
na = length(A);
nb = floor(0.5*na);
count1 = 0;
count2 = 0;

%% recursive part
if n1 == 1
  D = A;
  A1 = mergeSort(A(1:nb));
  A2 = mergeSort(A(nb+1:n)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T06:54:33.137

```
function (sorted_array, total) =  mergesort(array) {
  if(length(array) == 1) 
  then return (array, 0); // this is not a split, don't count it

  (left, left_sum) = mergesort(lefthalf);
  (right, right_sum) = mergesort(righthalf);

  result_array = merge(left, right);

  return (result_array, 1 + left_sum + right_sum); // this is a split, add 1
} 
```

这不会只计算上半场的分裂，但你可以只在上半场调用它。您可以通过将 0 更改为 1 来更改它以计算所有函数调用。

关于这个（以及一般的递归）的很酷的事情是它实际上只是重新定义了你想要计算的内容。如果我们从一个分支返回，从我们向下的分支总数的定义是什么？一个给我们，添加到左侧和右侧。如果我在底部并且我正在返回，那么我们有多少分支？零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T01:15:45.697

最简单的方法是将计数器作为参数传递给递归函数本身，类似于以下内容：

```
func foo(bar, acc) {
    print bar;
    print acc;
    foo(bar+1, acc+1);
} 
```

然后，当您最初调用该函数时，您可以执行以下操作：

```
foo(bar, 0); 
```

显然还有比这更多的东西（您可能希望该函数做的不仅仅是打印当前变量，而且您可能还需要确保它有一个结束案例），但希望基本的想法出现了。我建议阅读有关模式匹配、折叠和尾递归的内容，我认为这对理解计数器和累积有很大帮助。为了有趣地解释它如何有用，我最近花了很多时间在[Erlang](http://en.wikipedia.org/wiki/Erlang_(programming_language))上，它非常大量地利用递归和尾调用（可能没有直接在函数中使用的计数器，但通过使用有效地做同样的事情所述尾调用到列表为空的点。

# performance - Vaadin 中大型系统的内存占用

> ID：14797535
> 
> 赞同：18
> 
> 时间：2013-02-10T12:05:44.097
> 
> 标签：performance, vaadin

我在金融部门工作，我们即将选择 Vaadin 7 来开发大型重载系统。

但是我有点担心大型系统的 Vaadin 内存占用，因为 Vaadin 保持所有状态都在会话中。这意味着对于每个新用户，所有应用程序状态都将存储在内存中，不是吗？
我们不能建立一个单一的系统——系统必须是可扩展的和敏捷的。由于我们拥有庞大的客户群，因此必须易于定制并准备好发展。

任何人都可以分享经验和可能的解决方法如何最小化或消除 Vaadin 中的这些问题吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-16T17:23:20.873

在我们的产品开发过程中，我们遇到了使用默认 Vaadin 架构的大内存占用问题。

Vaadin 架构基于由事件驱动的组件。使用组件来创建紧密耦合的应用程序相当简单。原因是组件被结构化为层次结构。它就像一个金字塔。构建更大的应用程序；较大的金字塔存储在每个用户的会话中。

为了显着减少内存分配，我们为应用程序创建了一种基于页面的方法，该方法在后台使用旧式状态管理具有全面的事件模型。它基于 XML 格式的状态图表示法。

结果，会话在用户工作流期间仅保留访问过的页面，由状态图配置描述。当用户完成工作流时，所有页面都被释放以由垃圾收集器收集。

为了看到差异，我们做了一些测试来比较为使用应用程序的用户分配的内存。

开发的应用程序：

*   使用紧密耦合的方法每个用户消耗 5 到 15MB 的堆
*   采用松耦合方法 - 最大 2 MB

我们对结果非常满意，因为它让我们可以使用 4GB RAM 将大型系统扩展到每台服务器 1000-1500 个并发用户。

差点忘了。我们使用[了 Lexaden Web Flow](http://www.lexaden.com/main/entry/web_flow_sample)库。它具有 Apache 许可证。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-12T06:23:46.810

我认为你应该看看这里：[https ://vaadin.com/blog/-/blogs/vaadin-scalability-study-quicktickets](https://vaadin.com/blog/-/blogs/vaadin-scalability-study-quicktickets)

另外，我发现在生产中运行 Vaadin 的人提供了以下信息。

巴拉兹·霍多西：

> 我们有一个拥有超过 10 000 个用户的后台系统。每日用户数约为 3000，但其中一半使用系统 8 小时而无需注销。我们使用 Liferay 6.0.5 Tomcat 包和 Vaadin 作为 portlet。我们的两台服务器有 48 GB RAM，我们给 Tomcat 24 GB 堆。DB 获得了 18 GB，其余的则由系统获得。根据会话大小、并发用户和活动来衡量堆。更多内存会导致更少但更长的完整 GC。我们计划增加 Tomcat 工作人员的数量并减少堆。当你测量你的服务器时，试着增加一点内存。如果成本比降低处理器成本和购买更多 RAM 更重要。大多数情况下，稍微调整一下就很有价值。

皮埃尔-伊曼纽尔·格罗斯：

> 对于每天大量使用的 1000 个用户，一个纯 vaadin 应用程序：服务器 3 gb 2 核 Jetty，ulimit 为 50000 Postgresql 9，有 50 个并发用户（使用连接池）。作为软件部分，我还使用 ehcache 来缓存 DTO 对象和纯 JDBC。

# c# - 将属性属性作为实例属性访问 - 可能吗？

> ID：14797536
> 
> 赞同：0
> 
> 时间：2013-02-10T12:05:51.083
> 
> 标签：c#, properties, attributes

例如，我有一个具有属性和属性的类：

```
[MyDisplay(Name = "Class name", Description = "Class description.")]
public class MyClass
{
    [MyDisplay(Name = "Property name", Description = "Property description.")]
    public int MyProperty { get; set; }
} 
```

我想获取属性值，例如

```
// Get type attribute...
string className = MyClass.Attributes.MyDisplay.Name;

// Get member attribute...
string propertyDescription =
    MyClass.Properties.MyProperty.Attributes.MyDisplay.Description; 
```

如何得到它？我想要使​​用属性数据自动填充 MyClass 的附加字段的代码。访问属性值（如实例值）似乎非常方便 - 用于绑定等。

主要的复杂性是用名称与属性和属性名称相同的对象填充 MyClass.Attributes 和 MyClass.Properties 集合。所以我认为这个集合必须是静态的。并且 MyClass.Properties 集合中的每个对象也必须像 MyClass.Attributes 集合一样具有 Attributes 集合（例如，MyProperty.Attributes）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T12:26:34.717

我不确定您要实现什么，但下面的代码将使您了解如何在运行时从程序集中提取属性数据。请注意，属性数据是每个类型声明，而不是每个类型实例。

```
 foreach (var type in System.Reflection.Assembly.GetExecutingAssembly().GetTypes())
    {
        // class attributes
        foreach (var typeAttr in type.GetCustomAttributes(typeof(DisplayAttribute), false))
        {
            Console.WriteLine(((DisplayAttribute)typeAttr).Name);
            Console.WriteLine(((DisplayAttribute)typeAttr).Description);
        }

        // members attributes
        foreach (var props in type.GetProperties())
        {
            foreach (var propsAttr in props.GetCustomAttributes(typeof(DisplayAttribute), false))
            {
                Console.WriteLine(((DisplayAttribute)propsAttr).Name);
                Console.WriteLine(((DisplayAttribute)propsAttr).Description);
            }
        }
    } 
```

# c - 如何在 Ubuntu 中发布 FTDI 设备处理程序？

> ID：14797537
> 
> 赞同：0
> 
> 时间：2013-02-10T12:06:05.293
> 
> 标签：c, linux, ftdi

我在 Ubuntu 12.0.4 64 位上使用 FTDI 芯片。如果我第一次连接它并读/写，它工作正常。但是在调用 FT_Close 并释放句柄后，它无法从设备读取/写入。我们每次都需要重新连接 FTDI 设备。

# c# - 创建一个从datagridview中删除并更新sql的deletebutton

> ID：14797539
> 
> 赞同：0
> 
> 时间：2013-02-10T12:06:15.940
> 
> 标签：c#, asp.net-mvc, gridview

好的，所以我在开发方面有点新。我在学校，我们刚刚有一个*C#*项目。问题是我们必须使用*MVC*做所有事情。无论如何，我需要创建一个按钮，当我得到消息框并按是时，它将删除我在 datagridview 中选择的行，同时它应该更新我的数据库。我为此创建了一个*DAL*和一个控制器。现在我很难在我的按钮事件中为我的按钮创建一个 try/catch/exception。

我在控制器和我的 dal 中发布了删除操作的代码。昨天我已经在谷歌上搜索了很长时间，但无法在我的中实施其他想法。

PS我使用bool的原因是我看到了一个使用它的教程，也许我应该使用其他更适合我的项目的东西？

达尔

```
public bool DeleteMembers()
{                
    con.Open();
    SqlCommand cmd = 
       new SqlCommand("delete from member where SocialSecurity=@SocialSecurity", 
           con);
    cmd.ExecuteNonQuery();
    con.Close();
    return true;
} 
```

**控制器**

```
public bool DeleteMembers()
{
    bool cmd = dal.DeleteMembers();
    return cmd;
} 
```

**事件处理程序**

```
private void btnDelete_Click(object sender, EventArgs e)
{
    try... 
} 
```

我还设法做一个 foreach 方法来删​​除我的 datagridview 中的行。

```
foreach (DataGridViewRow item in this.dtGrid1.SelectedRows)
{
    dtGrid1.Rows.RemoveAt(item.Index);
} 
```

PS我没有使用参数。所以没有带参数的代码，我没有受过足够的教育，我们不必在我们的项目中这样做。我知道sql注入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T12:19:33.757

GridView 组件不适用于 ASP.NET MVC 应用程序。该组件严重依赖 ViewState 和 PostBack，它们是 ASP.NET MVC 中不再存在的概念。

您可以使用[`WebGrid helper`](http://weblogs.asp.net/andrebaltieri/archive/2010/11/01/asp-net-mvc-3-working-with-webgrid.aspx)来在视图中显示记录并提供删除功能。

因此，第一步是设计一个模型，该模型将代表您希望在视图中显示的记录：

```
public class Person
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string SocialSecurity { get; set; }
} 
```

然后下一步是有一个数据层，它将查询您的关系数据库并提取模型。您可以使用诸如实体框架之类的 ORM 来简化此任务，或者直接使用普通的 ADO.NET，这就是我将在此处说明的内容：

```
public class PeopleRepository
{
    public IList<Person> Get()
    {
        var connectionString = ConfigurationManager
            .ConnectionString["SomeConnectionStringKey"]
            .ConnectionString;
        using (var conn = new SqlConnection(connectionString))
        using (var cmd = conn.CreateCommand())
        {
            conn.Open();
            cmd.CommandText = "SELECT id, fname, lname, ssn FROM people";
            using (var reader = cmd.ExecuteReader())
            {
                var result = new List<Person>();
                while (reader.Read())
                {
                    result.Add(new Person
                    {
                        Id = reader.GetInt32(reader.GetOrindal("id")),
                        FirstName = reader.GetString(reader.GetOrindal("fname")),
                        LastName = reader.GetString(reader.GetOrindal("lname")),
                        SocialSecurity = reader.GetString(reader.GetOrindal("ssn"))
                    });
                }
                return result;
            }
        }
    }

    public void Delete(int id)
    {
        var connectionString = ConfigurationManager
            .ConnectionString["SomeConnectionStringKey"]
            .ConnectionString;
        using (var conn = new SqlConnection(connectionString))
        using (var cmd = conn.CreateCommand())
        {
            conn.Open();
            cmd.CommandText = "DELETE FROM people WHERE id = @id";
            cmd.Parameters.AddWithValue("@id", id);
            cmd.ExecuteNonQuery();
        }
    }
} 
```

下一步是有一个控制器来连接你的模型和视图：

```
public class PeopleController: Controller
{
    private readonly PeopleRepository repo = new PeopleRepository();

    public ActionResult Index()
    {
        IList<Person> model = repo.Get();
        return View(model);
    }

    [HttpPost]
    public ActionResult Delete(int id)
    {
        repo.Delete(id);
        IList<Person> model = repo.Get();
        return View("Index", model);
    }
} 
```

最后一步当然是视图：

```
@model IList<Person>
@{
    var grid = new WebGrid(Model);
}

@grid.GetHtml(
    columns: grid.Columns(
        grid.Column(columnName: "Id"),
        grid.Column(columnName: "FirstName", header: "First name"),
        grid.Column(columnName: "LastName", header: "Last name"),
        grid.Column(columnName: "SocialSecurity", header: "Social Security Number"),
        grid.Column(
            header: "", 
            format: 
                @<text>
                    <form action="@Url.Action("Delete", "People", new { id = item.Id })" method="post" onsubmit="return confirm('Are you sure you want to delete this person?');">
                        <button type="submit">Delete</button>
                    </form>
                </text>
        )
    )
) 
```

# highcharts - 在 Highcharts.StockChart X 轴上使用日历周分组

> ID：14797542
> 
> 赞同：0
> 
> 时间：2013-02-10T12:06:23.397
> 
> 标签：highcharts

我正在尝试找到一种按日历周对 Highchart.StockChart 中的 X 轴进行分组的方法。有一种方法可以将可见区域设置为“周”，但我想按日历周对所有值进行分组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:04:42.917

如何在 dataGrouping.units 中设置适当的单位？看看文档：[http ://api.highcharts.com/highstock#plotOptions.series.dataGrouping.units](http://api.highcharts.com/highstock#plotOptions.series.dataGrouping.units)

# xml - 复杂类型的 XML 模式限制：完全重新定义？

> ID：14797543
> 
> 赞同：10
> 
> 时间：2013-02-10T12:06:25.140
> 
> 标签：xml, xsd

在 XML Schemas 中为 complexTypes 添加限制时，是否需要重写 complexType 定义中使用的所有元素？如果是这样，为什么它不能重用现有的元素定义并覆盖新的受限元素？

例如，在下面；当我只想限制字段 country 时，我应该重新重写所有 3 个字段吗？

```
<xs:complexType name="customer">
  <xs:sequence>
    <xs:element name="firstname" type="xs:string"/>
    <xs:element name="lastname" type="xs:string"/>
    <xs:element name="country" type="xs:string"/>
  </xs:sequence>
</xs:complexType>

<xs:complexType name="Norwegian_customer">
  <xs:complexContent>
    <xs:restriction base="customer">
      <xs:sequence>
        <xs:element name="firstname" type="xs:string"/>
        <xs:element name="lastname" type="xs:string"/>
        <xs:element name="country" type="xs:string" fixed="Norway"/>
      </xs:sequence>
    </xs:restriction>
  </xs:complexContent>
</xs:complexType> 
```

所以，从下面的答案中可以清楚地看出为什么我们必须重写整个类型。

**跟进问题**

那么这个限制功能有什么用呢？

一种情况，我能想到；当您必须验证包含受限类型而不是 xml 模式中的基本类型的实例文档时。

说，如果“B”是基本类型并且它被限制为“B*”。在模式文档预期类型为“B”的元素的位置包含“B*”的任何实例文档都可以工作。我们不必为每个受限类型编写单独的规则。（属性“xsi:type”在实例文档将使用正确的类型对其进行验证。）对吗？

此功能还有其他用途吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-10T18:53:20.467

您的第一个问题是“在 XML Schema 中为 complexTypes 添加限制时，是否需要重写 complexType 定义中使用的所有元素？” 不，只有您希望成为受限类型定义的一部分。但是，是的，所有应该成为限制的一部分。限制中的内容模型必须独立作为类型的内容模型的完整定义。（另一方面，它不必指定所有属性；除非另有说明，否则它们无需更改即可继承。）

您的第二个问题是“为什么不能只重用现有元素定义并覆盖新的受限元素定义？” 这是一个合理的问题。答案有点棘手：考虑两个任意内容模型 E 和 F。现在，我们想将 F 解释为 E 的限制，它只提及 E 中我们想要更改的元素和模型组，而忽略任何提及元素和我们想要单独的模型组。在一般情况下，这是一个可解决的问题吗？是否保证有独特的解决方案？在您看来，这两种情况的答案都是肯定的，但对当时的 XSD 设计者来说似乎并不明显，今天对我来说似乎也不明显。

例如，设 E 为

```
(a+, b+, c*){2}, (a+, b*, c+){3} 
```

让 F 为

```
a{3,4} 
```

如果我们假设 F 中的所有内容都是对 E 中的某物的限制，而 E 中的其他所有内容都应该单独存在，那么 F 是否意味着我们要将 E 限制为

```
(a{3,4}, b+, c*){2}, (a+, b*, c+) 
```

或者

```
(a+, b+, c*){2}, (a{3,4}, b*, c+) 
```

?

### 附录

@nikel 要求提供 XSD 示例。不过，上面的示例已经是一个 XSD 示例，所以我想是指“XSD 语法中的示例”。我认为该提案应该像下面这样的语法。首先我们有基本类型 E：

```
<xs:complexType name="E">
  <xs:sequence>
    <xs:sequence minOccurs="2" maxOccurs="2">
      <xs:element ref="a" maxOccurs="unbounded"/>
      <xs:element ref="b" maxOccurs="unbounded"/>
      <xs:element ref="c" minOccurs="0" 
                          maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:sequence minOccurs="3" maxOccurs="3">
      <xs:element ref="a" maxOccurs="unbounded"/>
      <xs:element ref="b" minOccurs="0" 
                          maxOccurs="unbounded"/>
      <xs:element ref="c" maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:sequence>
</xs:complexType> 
```

现在让我们假设我们希望类型 F 能够在不指定完整内容模型的情况下限制 E。所以我们写

```
<xs:complexType name="F">
  <xs:complexContent>
    <xs:restriction base="tns:E">
      <xs:sequence>
        <xs:element ref="a" minOccurs="3" maxOccurs="4"/>          
      </xs:sequence>        
    </xs:restriction>
  </xs:complexContent>
</xs:complexType> 
```

F的有效内容模型应该是什么？

### 后续问题

你问，基本上，“在那种情况下，限制有什么用？”

合理的问题。您建议的答案是一个很好的答案。更一般地说，有时我们发现知道类型 B* 的每个实例都是类型 B 的实例很有用；XSD 中的限制派生旨在保证该不变性。有时，定义具有两个或更多具体限制的抽象类型似乎很有帮助；这有助于确保抽象基类型的各种具体实现彼此之间很好地相关，即使没有一个是任何其他的子集或超集。

在 XSD 中，可能有（不：有*很多*）方法可以使限制推导变得更清晰、更简单和更方便；不必重复整个内容模型就是其中之一。但是，对于 XSD 中的几乎所有内容都是如此。它唯一真正的优点是它得到了很多人似乎想要使用的许多工具的支持。

# c# - 调用最佳实践

> ID：14797545
> 
> 赞同：2
> 
> 时间：2013-02-10T12:07:13.863
> 
> 标签：c#

每次我从创建元素之外的线程更新程序视图时，我使用：

```
if (this.table.InvokeRequired)
{
    this.table.Invoke(new MethodInvoker(delegate
    {
        this.table.Controls.Add(newRow);
        this.table.Controls.SetChildIndex(newRow, this.table.Controls.Count);
    }));
}
else
{
    this.table.Controls.Add(newRow);
    this.table.Controls.SetChildIndex(newRow, this.table.Controls.Count);
} 
```

尽管这种方法效果很好，但我怀疑这样做是不是*最好的做法*，因为

```
this.table.Controls.Add(newRow);
this.table.Controls.SetChildIndex(newRow, this.table.Controls.Count); 
```

调用和不调用基本相同。

有什么想法可以改进吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T12:11:44.177

您可以将它放在一个方法中，然后该方法可以调用自己：

```
public void addRow(Control newRow) {
  if (this.table.InvokeRequired) {
    this.table.Invoke(new MethodInvoker(addRow), new object[]{ newRow });
  } else {
    this.table.Controls.Add(newRow);
    this.table.Controls.SetChildIndex(newRow, this.table.Controls.Count);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T12:12:58.677

语法可能不完全正确，但大致如下：

```
delegate void myedelegate(<mystuff>)
void UpdateSomething(<mystuff>)
if(this.invokerequired)
{
    mydelegate updater = new mydeleate(UpdateSomething);
    updater.invoke(new object[]{<mystuff>})
}
else
{
    //doupdate
} 
```

此外，请参阅[http://www.codeproject.com/Articles/37642/Avoiding-InvokeRequired](http://www.codeproject.com/Articles/37642/Avoiding-InvokeRequired)以获取有关调用所需实践的良好指南

# scala - 增加和获得价值

> ID：14797547
> 
> 赞同：5
> 
> 时间：2013-02-10T12:07:38.573
> 
> 标签：scala

简单的斯卡拉问题。考虑以下。

```
scala> var mycounter: Int = 0;
mycounter: Int = 0

scala> mycounter += 1

scala> mycounter
res1: Int = 1 
```

在第二个语句中，我增加了我的计数器。但是什么都没有返回。如何在一个语句中递增和返回某些内容。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-10T12:18:11.607

使用 '+=' [return Unit](https://stackoverflow.com/questions/1998724/what-is-the-motivation-for-scala-assignment-evaluating-to-unit-rather-than-the-v)，所以你应该这样做：

```
{ mycounter += 1; mycounter } 
```

你也可以使用闭包来完成这个技巧（因为函数参数是 val）：

```
scala> var x = 1
x: Int = 1

scala> def f(y: Int) = { x += y; x}
f: (y: Int)Int

scala> f(1)
res5: Int = 2

scala> f(5)
res6: Int = 7

scala> x
res7: Int = 7 
```

顺便说一句，您可能会考虑改用不可变值，并采用这种编程风格，那么您的所有语句都会返回一些东西；）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-10T15:12:00.690

有时我会这样做：

```
val nextId = { var i = 0; () => { i += 1; i} }
println(nextId())                               //> 1
println(nextId())                               //> 2 
```

*如果您需要某个时间在不*增加的情况下访问该值，则可能对您不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T12:33:50.320

Assignment is an expression that is evaluated to Unit. Reasoning behind it can be found here: [What is the motivation for Scala assignment evaluating to Unit rather than the value assigned?](https://stackoverflow.com/questions/1998724/what-is-the-motivation-for-scala-assignment-evaluating-to-unit-rather-than-the-v)

In Scala this is usually not a problem because there probably is a different construct for the problem you are solving.

I don't know your exact use case, but if you want to use the incrementation it might be in the following form:

```
(1 to 10).foreach { i => 
  // do something with i
} 
```

# git - 标记时 Github 取消忽略文件

> ID：14797549
> 
> 赞同：1
> 
> 时间：2013-02-10T12:07:48.210
> 
> 标签：git

我有一个 git 存储库，我的项目的编译版本在`.gitignore`.

当我发布项目的新版本（将`master`分支标记为版本）时，我想提交已编译的文件，但随后又恢复为忽略它们。

这可能吗？我想避免每次发布新版本时都提交新版本的 .gitignore。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T12:24:52.820

您可以`git commit -f file-in-gitignore`（可能也可以`git add -f file-in-gitignore`）。一般来说，包含生成的文件是一个坏主意，也许只为这些文件打开一个分支，或者将它们分发到其他地方？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T12:28:17.020

> 当我发布项目的新版本（将主分支标记到版本）时，我想提交编译的文件

为什么不。
我只是建议不要在同一个参考文献中这样做。

*源代码*版本控制系统将保留您放入其中的内容的历史记录，并且二进制文件无法很好地区分，很快就会占用空间*。*

[工件存储库](http://www.sonatype.com/people/2009/04/what-is-a-repository/)（[如 Nexus](http://www.sonatype.org/nexus/)或[其他替代品](https://stackoverflow.com/questions/364775/should-we-use-nexus-or-artifactory-for-a-maven-repo)）更适合这种版本（用于二进制文件或任何类型的*生成*文件），其想法是您可以非常轻松地从引用中清除旧版本（一个简单的平面文件基于系统）。

不要忘记在您的发布中包含*声明*SHA1 或源代码库的文件文本，以便在您生成所述二进制文件的源的确切版本之间保持链接。

# javascript - 动态重复的表单在 CodeIgniter 重新加载时消失

> ID：14797551
> 
> 赞同：0
> 
> 时间：2013-02-10T12:07:58.430
> 
> 标签：javascript, jquery, codeigniter, dynamicform

我有以下需要复制的代码：

```
<form method="post">
<div id="field-row-container">
    <div id="field-row-1" class="field-row">
        <div class="field-element">
            <label for="Name[1]">Name</label>
            <input type="text" id="Name[1]" name="Name[]" />
        </div>
        <div class="field-element">
            <label for="Email[1]">Email</label>
            <input type="text" id="Email[1]" name="Email[]" />
        </div>
        <hr/>
    </div>
</div>
<div class="form-element">
    <input type="button" class="confirm add-field-row" value="Add" />
    <input type="button" class="danger delete-field-row" value="Delete" />
    <input type="submit" />
</div> 
```

重复/动态添加的元素将具有相同的名称，`Name[]`但`Email[]`它们的 ID 将递增。

下面是基于[Josiah Ruddell 的表单复制脚本](https://stackoverflow.com/a/4400887/1685185)的 JavaScript 。

```
var template = $('#field-row-container #field-row-1').clone();
window.addForm = function () {
        var parent = $(this).closest('.dynamic-rows').attr('id');
    var fieldRowCount = countRows(parent) + 1;
    var newFieldRow = template.clone().find(':input').each(function () {
        var newId = this.id.substring(0, this.id.length - 3) + "[" + fieldRowCount + "]";

        $(this).prev().attr('for', newId); // update label for
        this.id = newId; // update id and name (assume the same)
        $(this).closest('.field-row').addClass('new-row');
    }).end()
        .attr('id', 'field-row-' + fieldRowCount)
        .appendTo('#field-row-container');
}
$('.add-field-row').click(addForm); 
```

每当我将表单提交给 CodeIgniter 并且出现验证错误时，一旦控制器重新加载多部分表单，动态添加的元素以及初始字段中的值就会消失。

我该如何解决这个问题？我不知道如何解决这个问题......

其他可能有帮助的说明：

1.  这是一个只有一个表单控制器的组件多部分表单
2.  我有多个这样的实例 - 地址、教育程度等
3.  我使用 CodeIgniter 的`form_validation`库来检查服务器端的每个帖子数组

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T12:33:50.910

当控制器在验证失败后重定向回表单后重新加载表单时，它只会重新加载原始页面，而不应用 DOM 操作。

我将执行通过 ajax 提交表单的 POST 请求，因此您可以在不离开页面的情况下处理响应。像这样的东西：

```
$.post('/locationOfController.php', $('#yourForm').serialize(), function(response){
  if(response.valid){
    window.location.href = '/somewhereAfterFormPosted.php';
  } else {
    $('#yourForm').append("<p>"+response.error+"</p>");
  }
}, 'json'); 
```

并根据验证是否通过更改控制器以返回 JSON 对象。为了与我上面的示例相匹配，当发生错误时，您将返回如下内容：

```
{valid: false, error: 'Please fill out the whole form'} 
```

尝试这样的事情作为一个基本的例子。您可以做更多事情，例如在多个字段无效时返回多个错误。

# php - 使用php将数字转换为utf-8 unicode

> ID：14797554
> 
> 赞同：2
> 
> 时间：2013-02-10T12:08:25.637
> 
> 标签：php, string, utf-8

实际上我的预期结果是 - 零০一১二২三৩四৪五৫六৬七৭八৮九৯

但我得到 - 零 &#ý৯;ý৯;3৭;৬;ý৯;ý৯;3৭;ý৯;3৮;; 一个 &#ý৯;ý৯;3৭;৬;ý৯;ý৯;3৭;ý৯;;
两个 ý৯;ý৯;3৭;৬;
三个 ý৯;3৭;
四个 ý৯;3৮;
五个 ý৯;
六৬<br />七৭<br />八৮<br />九৯请帮帮我。编码：

```
$n=array('0', '1', '2', '3', '4', '5', '6', '7', '8', '9');

 $x=array("&#2534;", "&#2535;", "&#2536;", "&#2537;", "&#2538;", "&#2539;", "&#2540;", "&#2541;", "&#2542;", "&#2543;");

$on='O 0
 one 1
 two 2
 three 3
 four 4
 five 5
 six 6
 seven 7
 eight 8
 nine 9';

 $converted = nl2br(str_replace($n, $x, $on));

 echo $converted; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:27:11.410

您要用于此目的的函数是[strtr()](http://www.php.net/manual/en/function.strtr.php)。

```
$x = array("&#2534;", "&#2535;", "&#2536;", "&#2537;", "&#2538;", "&#2539;", "&#2540;", "&#2541;", "&#2542;", "&#2543;");
$converted = nl2br(strtr($on, $x));
echo $converted; 
```

产生以下内容：

> O ০
> 一 ১
> 二 ২
> 三 ৩
> 四 ৪
> 五 ৫
> 六 ৬
> 七 ৭
> 八 ৮
> 九 ৯

str_replace() 在这里不起作用，因为数组中的后一个条目正在替换早期条目完成的替换中的字符。

PS 该数组确实应该是一个关联数组（即“0”=>“০”）。我懒得做出改变，只是利用整数键恰好是正确的事实。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T12:14:39.093

`str_replace`不是编码安全的。[你在这里](http://php.net/manual/en/ref.mbstring.php)有一个多字节`str_replace`（`mb_str_replace`）的实现：

```
function mb_str_replace($needle, $replacement, $haystack)
{
    $needle_len = mb_strlen($needle);
    $replacement_len = mb_strlen($replacement);
    $pos = mb_strpos($haystack, $needle);
    while ($pos !== false)
    {
        $haystack = mb_substr($haystack, 0, $pos) . $replacement
                . mb_substr($haystack, $pos + $needle_len);
        $pos = mb_strpos($haystack, $needle, $pos + $replacement_len);
    }
    return $haystack;
} 
```

**编辑：**哎呀，你的字符是 HTML 编码的，而不是 PHP 编码问题。

# java - 带有默认包的罐子

> ID：14797555
> 
> 赞同：0
> 
> 时间：2013-02-10T12:08:28.943
> 
> 标签：java, import, jar, classpath

我发现了这个问题->[在 Java 中导入自定义库](https://stackoverflow.com/questions/8418182/import-custom-libraries-in-java)

@Andy Thomas-Cramer 说“Java 编程简介”中的“stdlib.jar”中的类没有包，所以它们在默认包中。

这不是一个坏习惯吗？如果你有没有包的东西，IDE 的自动完成会很慢。这也意味着我们不能使用该 jar 中的任何类，这些类的包与默认值不同？

有人可以告诉我我们该如何处理吗？

编辑：我有 2 个罐子，我把它们放在引用库中，它们都有一堆默认包中的类。当我在不同的包中创建类时，默认值 - 比如说 org.myquestion 我不能再从 jar 中访问这些类。

这真的让我很烦恼...首先我无法创建自己的包并使用罐子中的任何东西。其次，我的 IDE（我使用 eclipse）的自动完成变得很糟糕——我想它会一次搜索到一些普通的类......我想做的是以某种方式将 jars 放在某个命名空间中......并能够访问它们像 org.someones.libs.SomeClass

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-03T02:02:31.003

下载 jar 源代码，并自己构建到 jar 并添加任何你喜欢的包名。这将解决你的问题。

[在默认包中的 JAR 文件中导入类](https://stackoverflow.com/questions/4983844/importing-classes-inside-jar-files-that-are-in-the-default-package)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T13:23:05.007

使用默认包当然是不好的做法。包对类进行分组并为它们提供访问保护（受保护的、包私有的）并用作唯一的命名空间。

你总是可以使用每个包中的类，不管它们是不是默认的，你总是可以混合使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-03T03:56:53.517

我遇到了和你一样的问题。问题是 jar 文件“stdln.jar”没有命名包，比如说，只有默认包。基本上，您不能从默认包中导入类，因为导入操作需要包名：

```
import packagename.*; 
```

所以只有两种方法可以解决这个问题：

1.  更简单的一个：不要在您的 src 文件夹中创建包并使用默认包二！stdln.jar 中的每个类都会自动导入到您的 src 中。像这样： [在此处输入图像描述](https://i.stack.imgur.com/379hl.png)

2.  尝试使用命名包创建自己的 jar 文件，并将所有类文件复制到新创建的 jar 文件中。由于 stdln.jar 仅用于教育，因此您要选择哪个并不重要。在实际开发中，我们从不使用默认命名包，因为这不是一个真正的好习惯，总是会导致一些令人困惑的东西。希望这会对你有所帮助！

# video.js - video.js IE 9 mp4/webm 错误

> ID：14797556
> 
> 赞同：3
> 
> 时间：2013-02-10T12:08:36.807
> 
> 标签：video.js

我的视频播放器有问题，现在我正在寻求帮助

Video.js 无法在 IE 9（也许 10，我无法检查）中播放视频，所有其他浏览器都正确显示视频

这是[一个示例链接](http://uklasi.com.ua/5-klas/matematika/koordinatniy-promin)。

IE 控制台显示以下错误：

> 日志：视频错误[对象对象]

HTML 代码：

```
<video class='video-js vjs-default-skin' controls data-setup='{"techOrder": ["flash", "html5", "links"]}' height='576' id='video_16' poster='/system/videos/file_previews/000/000/016/medium/1360091100-30.jpg?1360091101' preload='none' width='720'>
    <source src='http://uklasi.com.ua/5-klas/matematika/koordinatniy-promin/16.mp4' type='video/mp4'>
    <source src='http://uklasi.com.ua/5-klas/matematika/koordinatniy-promin/16.webm' type='video/webm'>
</video> 
```

我的 HTTP 标头：

```
HTTP/1.1 200 OK
Server: nginx/1.2.6
Date: Sun, 10 Feb 2013 12:05:40 GMT
Content-Type: video/mp4
Content-Length: 41625464
Last-Modified: Tue, 05 Feb 2013 19:05:00 GMT
Connection: keep-alive
Content-Disposition: inline; filename="koordinatniy-promin-16"
Cache-Control: max-age=0, private, must-revalidate
Accept-Ranges: bytes 
```

以前有人遇到过这个问题吗？:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T00:11:53.600

我在使用 video.js 播放 mp4 和 IE9 时遇到了类似的问题 - 这解决了它：

```
<script type="text/javascript" charset="utf-8">
//mvp - if it is IE9 - the first line tests for IE9 - then fall back to flash
if(navigator.userAgent.indexOf("Trident/5")>-1){
 _V_.options.techOrder = ["flash"];
 _V_.options.flash.swf = "tech/flash/video-js.swf";
}
</script> 
```

基本上，如果它检测到 IE9，它会强制使用 Flash 播放器...

MVP

更新...2013 年 3 月 28 日 IE10 和 video.js 也无法正常工作。添加了另一个块来测试 IE10，使用：“Trident/6”（而不是 5），这也迫使 IE10 也使用 Flash。视频又开始播放了！

还没试过IE11....

# c++ - 我应该使用 GTK+ 或 QT

> ID：14797557
> 
> 赞同：-2
> 
> 时间：2013-02-10T12:08:37.350
> 
> 标签：c++, linux, qt, gtk

这可能是个愚蠢的问题。但我是 Linux 开发的新手。而且我不知道应该使用什么来创建 GUI。据我了解，每个 Linux 中都没有 qt。例如，我检查了 Debian 6，但没有找到 qt。但是在 Ubuntu 中……我不会只开发几个窗口的复杂界面。那我应该用什么？GTK+呢？每个版本的 Linux 都支持这个吗？或者是不是不可能为所有 Linux 构建创建一个构建？我注意到 Skype 建议下载几个版本取决于 Linux 版本。我不想在我的程序中带来动态 qt 库。它很大...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T12:21:43.960

有Linux机器既没有GTK也没有QT，只要检查API，看看你最喜欢哪一个，或者哪一个更适合你的项目。

发行版使用包，其中列出了所需的库；所以当你安装一些东西时，包管理器也会知道需要哪些库并安装它们。

发行版有不同的包管理器，例如 debian 和 ubuntu 使用 apt-get/dpkg，而 red hat/fedora 使用 rpm。不同的 Skype 包只是由于在各种发行版中发现的不同的包管理系统。

# performance - node.js 服务器端 2d 搜索性能

> ID：14797560
> 
> 赞同：0
> 
> 时间：2013-02-10T12:08:50.957
> 
> 标签：performance, node.js, search

我计划通过 nodejs 服务器上的 websocket 存储和更新用户位置（lat、lon、userid）。我的目标是尽快将用户位置广播给每个用户。 **（比如app中每辆出租车的mytaxi位置）**

我的担忧/问题

1.  许多同时用户的服务器端性能
2.  推回数据（我只需要知道我所在地区的用户）-> 2d 搜索（获取用户在边界框中的纬度/经度）

问题：

1.  什么是最好的存储解决方案（mongodb vs js 数组/对象存储）
2.  数据库上的读/写比数组搜索快吗？
3.  有 2d 优化的 javascript 搜索解决方案吗？

我的方式

我会选择两个数组（arr1 按 lat 排序，arr2 按 lon 排序）-> 通过分而治之搜索-> 检查相似的 ids-> 输出

**有一个更好的方法吗？**

提前致谢

亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T13:48:07.293

您可以使用 Redis 的 pub/sub 频道，为每个边界框创建一个频道，并根据用户的位置报告订阅相关频道，然后将消息推送到整个频道。

这种策略对于大数据来说可能是幼稚的。

# dictionary - 对于list1中的唯一项，在python中获取list2中对应的最大值

> ID：14797561
> 
> 赞同：0
> 
> 时间：2013-02-10T12:08:54.373
> 
> 标签：dictionary, max

我在解析一个两列文件后生成了两个元素列表（list1 和 list2）。List1 包含重复不同时间的项目（即 a、a、a、b、b、c、c、c、c、d、d），而 list2 包含它们对应的值，这些值要么重复，如在 list1 中，要么是独特的。

我想要做的是，对于list1中的常用项，获取最大对应数。我正在考虑在 python 中执行此操作，方法是启动一个字典，并使用一个条件，使用 list1 中的唯一项和 list2 中的相应最大值作为键来填充它。

我将不胜感激任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:20:54.347

您可以使用以下方法将这两个列表组合成一个对列表[`zip`](http://docs.python.org/2/library/functions.html#zip)：

```
# You probably want the values in list2 to be ints
list2 = map(int, list2)
# Combines each item in list1 with the corresponding one in list2
pairs = zip(list1, list2) 
```

然后要创建一个最大值的字典，你可以通过这些对：

```
max_values = {}
for key, value in pairs:
    current_value = max_values.get(key) # None if the key isn't there.
    if current_value is None or current_value < value:
        max_values[key] = value 
```

# javascript - jQuery.expr[':'] 是如何工作的，它在哪里记录了 jQuery1.8.x 及更高版本？

> ID：14797569
> 
> 赞同：20
> 
> 时间：2013-02-10T12:10:59.360
> 
> 标签：javascript, jquery

我已经到处寻找有关此语法的一些清晰文档。它用于创建自定义过滤器以选择 DOM 中非常具体的元素。Benjamin Arthur Lupton 在[ajaxify-html5.js gist 示例中有一个很好的例子（见第 45 行定义函数的地方和第 78 行使用它的地方），他提供了这个例子来展示如何使用他的](https://gist.github.com/balupton/854622)[历史](https://github.com/balupton/history.js)来 ajaxify 一个网站[插件](https://github.com/balupton/history.js)。

Shane Riley 还有一个相当广泛的博客，名为“[添加过滤器表达式](http://blog.hashrocket.com/posts/jquery-tips-adding-filter-expressions)”，但我浏览了 jQuery 文档，但找不到任何文档。

如果您可以的话，我将不胜感激

*   将我指向该`expr`功能的官方文档
*   告诉我在源文件中的哪里可以找到它（我已经看过 - 找不到它）
*   或根据正确记录的技术建议替代语法

我已经看过`jQuery.filter`但无法在他的 ajaxify 脚本中找到替代 Lupton 技术的方法。

我热衷于使用最近的 jQuery。我正在使用 v 1.8.2，并将很快升级到 1.9.x。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-10T12:27:24.900

它是 jQuery 使用的选择器引擎[Sizzle](https://github.com/jquery/sizzle)的一部分。

他们现在有文档解释它的用法，包括 1.8.x 前后的示例： [https ://github.com/jquery/sizzle/wiki/Sizzle-Documentation#-pseudo-selectors](https://github.com/jquery/sizzle/wiki/Sizzle-Documentation#-pseudo-selectors)

# c# - C# 数据 PublicKeyToken 值

> ID：14797570
> 
> 赞同：4
> 
> 时间：2013-02-10T12:11:08.163
> 
> 标签：c#

如果我从我的项目*C#文件夹中打开**Resources.resx* ，我会看到如下内容：

 *```
<data name="picture" type="System.Resources.ResXFileRef, System.Windows.Forms">
    <value>..\Resources\picture.png;System.Drawing.Bitmap, System.Drawing, 
        Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a</value>
</data> 
```

什么是*PublicKeyToken*，我应该为它分配什么值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T14:19:49.063

.NET 正在处理程序集；每个 EXE 或 DLL 文件都被视为一个程序集。

为了让需要它的任何其他 .NET 代码在机器上全局识别程序集（当然无需在本地复制它），您可以将程序集放在全局程序集缓存（即 GAC）中。

您不能只在 GAC 中放置任何程序集，出于安全原因，将程序集放在那里需要*强类型*，也就是签名。不会进入签署程序集的过程，因为它不相关，但签名过程的一部分是获取公钥。然后，您可以对任意数量的程序集使用相同的密钥，因此程序集可能有一个密钥，但一个密钥可能由许多不同的程序集共享。

当 .NET 加载强类型程序集时，它必须获取三个参数：

1.  程序集名称。
2.  汇编版本。
3.  程序集公钥。

如果其中任何一个缺失或错误，.NET 将抛出找不到程序集的错误。

现在你的最后一个问题：给定一个已知的装配名称，如何找到它的公钥令牌？

好吧，所有 4.0 之前的系统程序集都可以通过`Windows Button`+`R`然后键入`%windir%\assembly`和找到`ENTER`。您将看到已安装程序集的完整表，每个程序集都有名称、版本和密钥。例如，您可以在此处看到原始问题中发布的密钥确实属于 System.Drawing 程序集。

由于 4.0 框架中的重大更改，其程序集的 GAC 位置已更改为`%windir%\Microsoft.NET\assembly\`，不再以友好列表的方式显示，而是以文件夹和文件的形式显示：新 GAC 中的每个程序集都有自己的文件夹，您可以根据其名称可以提取公共令牌。例如 System.Web 包含以下子文件夹：

> v4.0_4.0.0.0__b03f5f7f11d50a3a

所以这意味着密钥是*b03f5f7f11d50a3a*`.resx`如果您引用 System.Web 程序集，这就是您应该在文件中放置的内容。（注意它与 System.Drawing 键相同，但在这里并不真正相关）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T12:12:13.443

看到[这个](http://ashishcodes.blogspot.com/2004/09/public-keys-and-public-key-tokens.html)

> Microsoft 通过使用强命名程序集的公钥的哈希来解决“公钥膨胀”问题。这些散列称为公钥标记，是强命名程序集公钥的 SHA1 散列的低 8 个字节。SHA1 哈希是 160 位（20 字节）的哈希，哈希的前 12 个字节在此算法中被简单地丢弃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-14T21:25:32.600

如果您查看此参考的属性，您会注意到默认情况下“复制本地”已设置为“真”。*

# php - 用户放弃结帐然后再次回来时的PHP会话管理

> ID：14797578
> 
> 赞同：0
> 
> 时间：2013-02-10T12:12:32.650
> 
> 标签：php, session-variables

在我网站的注册部分，用户的详细信息存储在 PHP 会话中。付款后，根据会话中存储的信息创建数据库条目。

问题是，如果用户在完成之前以某种方式放弃结帐过程，然后再次这样做，会话最终将包含旧信息和新信息，并将所有内容放入数据库中。

有没有一种简单的方法来防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:27:49.293

当用户访问主页/结帐页面时重置会话，以便清除所有旧信息，他们可以重试。这可以通过主页/结帐页面上的简单代码行来完成：

```
$_SESSION['NAME OF SESSION'] = null; 
```

# ios - 为 ios 屏幕截图设置上下文

> ID：14797579
> 
> 赞同：0
> 
> 时间：2013-02-10T12:12:35.593
> 
> 标签：ios, xcode

我想截取屏幕特定部分的屏幕截图。我已经设置了一个方法来记录整个屏幕的镜头，但我想要一个特定的部分。我知道我必须更改此代码：

```
CGSize imageSize = [[UIScreen mainScreen] bounds].size; 
```

但是我尝试使用 CGRectMake (50,50, 400, 400) 而不是 [[UIScreen mainScreen] bounds].size 并且它给出了一个错误......为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:18:12.073

试试这个 ：-

```
CGRect rect = CGRectMake(50,50, 400, 400);
UIGraphicsBeginImageContext(rect.size);

CGContextRef ctx = UIGraphicsGetCurrentContext();
CGContextFillRect(ctx, rect);

[self.view.layer renderInContext:ctx];

UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext(); 
```

希望对你有帮助。。

# iphone - 解析 JSON iOS

> ID：14797581
> 
> 赞同：-3
> 
> 时间：2013-02-10T12:12:42.647
> 
> 标签：iphone, ios, objective-c, json

我正在尝试在 iOS 中解析一些 JSON 以从 google 获取 URL。我已经走了很远（见下面的代码），问题是因为我以前从未使用过 JSON，我不太确定事情是如何定义的。如何查找位于另一个对象内的对象？

例如，如果我想在`unescapedUrl` [这里](https://ajax.googleapis.com/ajax/services/search/images?v=1.0&q=monkey)获得第一个，我该怎么做？我尝试简单地使用 objectForKey，但它没有用。我猜我将不得不指定确切的路径。我怎样才能做到这一点？

这是我正在使用的代码：

```
 #define kBgQueue dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0) //1
    #define kLatestSearchURL [NSURL URLWithString: @"https://ajax.googleapis.com/ajax/services/search/images?v=1.0&q=monkey"] //2

    #import "ViewController.h"

    @interface NSDictionary(JSONCategories)
    +(NSDictionary*)dictionaryWithContentsOfJSONURLString:(NSString*)urlAddress;
    -(NSData*)toJSON;
    @end

    @implementation NSDictionary(JSONCategories)
    +(NSDictionary*)dictionaryWithContentsOfJSONURLString:(NSString*)urlAddress
    {
        NSData* data = [NSData dataWithContentsOfURL: [NSURL URLWithString: urlAddress] ];
        __autoreleasing NSError* error = nil;
        id result = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
        if (error != nil) return nil;
        return result;
    }

    -(NSData*)toJSON
    {
        NSError* error = nil;
        id result = [NSJSONSerialization dataWithJSONObject:self options:kNilOptions error:&error];
        if (error != nil) return nil;
        return result;
    }
    @end

    @implementation ViewController

    - (void)viewDidLoad
    {
        [super viewDidLoad];

        dispatch_async(kBgQueue, ^{
            NSData* data = [NSData dataWithContentsOfURL: kLatestSearchURL];
            [self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:YES];
        });
    }

    - (void)fetchedData:(NSData *)responseData {
        NSError* error;
        NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData
                                                             options:kNilOptions
                                                               error:&error];

// ---------------------------- Will Start Parsing Here ------------------------------
    }

    @end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T12:19:57.237

上帝保佑文字（Xcode 4.5 和 iOS 6.0 或更高版本的 SDK，需要 LLVM 编译器 4.0）。部署回 iOS 5。

```
NSString *url = resp[@"responseData"][@"results"][0][@"unescapedUrl"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T12:16:35.523

您可以`objectForKey:`用于字典和`objectAtIndex:`数组：

```
NSString *url = [[[[resp objectForKey:@"responseData"]
                        objectForKey:@"results"]
                        objectAtIndex:0]
                        objectForKey:@"unescapedUrl"]; 
```

# c# - 如何在不同的字符之间拆分字符串

> ID：14797584
> 
> 赞同：9
> 
> 时间：2013-02-10T12:12:51.687
> 
> 标签：c#, string, split

我在拆分字符串时遇到问题。我只想在 2 个不同的字符之间拆分单词：

```
 string text = "the dog :is very# cute"; 
```

我怎样才能只抓住单词，*非常*，在`:`和`#`字符之间？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-10T12:16:26.020

您可以将[`String.Split()`](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)方法与`params char[]`;

> 返回一个字符串数组，其中包含此实例中由指定 Unicode 字符数组的元素分隔的子字符串。

```
string text = "the dog :is very# cute";
string str = text.Split(':', '#')[1]; // [1] means it selects second part of your what you split parts of your string. (Zero based)
Console.WriteLine(str); 
```

这是一个[`DEMO`](http://ideone.com/gVnrwN).

您可以随意使用它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-10T12:15:40.577

这根本不是真正的拆分，因此 using`Split`会创建一堆您不想使用的字符串。只需获取字符的索引，然后使用`SubString`：

```
int startIndex = text.IndexOf(':');
int endIndex = test.IndexOf('#', startIndex);
string very = text.SubString(startIndex, endIndex - startIndex - 1); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-10T12:15:44.037

使用此代码

```
var varable = text.Split(':', '#')[1]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-10T12:14:36.453

```
Regex regex = new Regex(":(.+?)#");
Console.WriteLine(regex.Match("the dog :is very# cute").Groups[1].Value); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-10T12:14:40.153

take a的[重载](http://msdn.microsoft.com/en-gb/library/b873y76a.aspx)之一- 您可以使用任意数量的字符进行拆分：[`string.Split`](http://msdn.microsoft.com/en-gb/library/system.string.split.aspx)`params char[]`

```
string isVery = text.Split(':', '#')[1]; 
```

请注意，我正在使用该重载并从返回的数组中获取*第二项。*

但是，正如@Guffa 在[他的回答](https://stackoverflow.com/a/14797608/1583)中指出的那样，您所做的并不是真正的拆分，而是提取特定的子字符串，因此使用他的方法可能会更好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-10T12:15:56.943

这有帮助吗：

```
 [Test]
    public void split()
    {
        string text = "the dog :is very# cute"  ;

        // how can i grab only the words:"is very" using the (: #) chars. 
        var actual = text.Split(new [] {':', '#'});

        Assert.AreEqual("is very", actual[1]);
    } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-10T12:18:51.030

使用`String.IndexOf`和`String.Substring`

```
string text = "the dog :is very# cute"  ;
int colon = text.IndexOf(':') + 1;
int hash = text.IndexOf('#', colon);
string result = text.Substring(colon , hash - colon); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-17T23:40:32.483

我只会使用[string.Split](http://msdn.microsoft.com/en-gb/library/system.string.split.aspx)两次。获取第一个分隔符右侧的字符串。然后，使用结果，获取第二个分隔符左侧的字符串。

```
string text = "the dog :is very# cute"; 
string result = text.Split(":")[1] // is very# cute";
                    .Split("#")[0]; // is very 
```

它避免了使用索引和正则表达式，这使得 IMO 更具可读性。

# java - 如何最好地为未存储在数据库中的对象生成密钥？

> ID：14797587
> 
> 赞同：0
> 
> 时间：2013-02-10T12:12:59.180
> 
> 标签：java

如果我有一些属性会发生变化的对象。我怎样才能最好地跟踪对象？可能会创建一个ID。什么可能对创建这样的 id 有用？在创建时计数的静态字段？

```
class Foo {
  String bar;
  int id;

  static int counter = 0;

  Foo() {
    this.id = counter++;
  }
} 
```

我能做得更好吗？我不想将对象存储在 db 中，也不想使用 HashMap 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:19:13.933

对于单线程应用程序，您的方法是可以的。对于多线程，您可以使用

```
 AtomicInteger idGen  = new AtomicInteger(); 
```

要获得您将调用的下一个 Id：

```
idGen.getAndIncrement(); 
```

[JavaDoc 原子整数](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/AtomicInteger.html)

# ios - iOS 设备处于横向右时的方位角计算问题

> ID：14797592
> 
> 赞同：2
> 
> 时间：2013-02-10T12:13:52.823
> 
> 标签：ios, augmented-reality, compass-geolocation, heading, azimuth

我已经为使用定位服务和 GPS 的 iOS 编写了一个增强现实应用程序，当设备处于左侧横向时一切正常，但当设备旋转右侧横向时，中心方位角计算不正确，我目前正在使用didUpdateHeading 方法中的真实航向减去 90 度的航向调整。我应该检查是否<0？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T13:48:13.997

这是一个非常烦人的问题，似乎设置`headingOrientation`属性实际上并没有做任何事情。

下面的代码适用于横向左方向（右侧的主页按钮）：

```
orientation  = (float) manager.heading.magneticHeading;
orientation += 90.0f;
if(orientation > 360.0f)
   orientation -= 360.0f; 
```

因此，对于横向正确的方向，这应该可以解决问题：

```
orientation  = (float) manager.heading.magneticHeading;
orientation -= 90.0f;
if(orientation < 0.0f)
   orientation += 360.0f; 
```

# javascript - 从变量中提取元素

> ID：14797593
> 
> 赞同：3
> 
> 时间：2013-02-10T12:13:55.303
> 
> 标签：javascript, jquery

我有一个字符串' [http://this.is.my.url:007/directory1/directory2/index.html](http://this.is.my.url:007/directory1/directory2/index.html) '，我需要提取字符串如下。请指教最好的方法

var one = [http://this.is.my.url:007/directory1/directory2/index](http://this.is.my.url:007/directory1/directory2/index)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T12:19:44.943

试试这个：

```
var url = 'http://this.is.my.url:007/directory1/directory2/index.html';
url.replace(/\.[^.]*$/g, ''); // would replace all file extensions at the end.

// or in case you only want to remove .html, do this:
var url = 'http://this.is.my.url:007/directory1/directory2/index.html';
url.replace(/\.html$/g, ''); 
```

包含在正则表达式中的 $ 字符与文本字符串的末尾匹配。在变体 a 中，您从“。”开始。并从这个字符中删除所有内容，直到字符串结尾。在变体 2 中，您将其缩减为确切的字符串“.html”。这更多是关于正则表达式而不是关于 javascript。要了解有关它的更多信息，这里是许多不错的[教程](http://andymatthews.net/read/2009/10/22/A-beginners-guide-to-regular-expressions)之一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T12:16:38.050

你只需要使用`replace()`：

```
var url = 'http://this.is.my.url:007/directory1/directory2/index.html';
var one = url.replace('.html', ''); 
```

如果要确保只删除`.html`字符串末尾的 regex：

```
var url = 'http://this.is.my.url:007/directory1/directory2/index.html';
var one = url.replace(/\.html$/', ''); 
```

`$`表示仅应检查字符串的最后一个字符。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-10T12:16:53.057

```
var url = 'http://this.is.my.url:007/directory1/directory2/index.html';
var trimmedUrl = url.replace('.html', ''); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-10T12:22:55.037

您可以`slice`将字符串直到最后一个点：

```
var url = 'http://this.is.my.url:7/directory1/directory2/index.html';
url = url.slice(0,url.lastIndexOf('.')); 
  //=> "http://this.is.my.url:7/directory1/directory2/index" 
```

或者在一行中：

```
var url = ''.slice.call(
           url='http://this.is.my.url:7/directory1/directory2/index.html',
           0,url.lastIndexOf('.')  ); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-10T12:28:22.937

使用正则表达式，它将`.*`捕获组中的所有内容 ( ) 替换为自身（不包括尾随`.html`）。

```
var url = 'http://this.is.my.url:007/directory1/directory2/index.html';
var one = url.replace(/(.*)\.html/, '$1');
                       ^  ^          ^^
// Capture group ______|  |__________||
//                    Capture ---->  Get captured content 
```

# linq - LINQ 查询将空结果返回到匿名变量中

> ID：14797596
> 
> 赞同：0
> 
> 时间：2013-02-10T12:14:21.747
> 
> 标签：linq, null, return

我的查询代码有什么问题？它返回 null，这与我看过的其他示例没有什么不同。“建筑物”变量为空的一些原因可能是什么。

这些表不是空的，应该返回一些结果。

**数据库中的表：**

建筑物（建筑物 ID、建筑物名称）

用户建筑物（用户 ID、建筑物 ID、建筑物数量、建筑物级别）

```
var buildings =
                from b in imDB.Buildings
                join ub in imDB.UsersBuildings
                on b.BuildingId equals ub.BuildingId
                where ub.UserId == userId
                select new { b.BuildingName, ub.BuildingLevel}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:30:02.940

BuildingLevel 在 Buildings 表中，因此您的查询应该像

```
var buildings =
            from b in imDB.Buildings
            join ub in imDB.UsersBuildings
            on b.BuildingId equals ub.BuildingId
            where ub.UserId == userId
            select new { b.BuildingName, b.BuildingLevel}; 
```

# redirect - 临时和即时 HTTPS 重定向

> ID：14797602
> 
> 赞同：0
> 
> 时间：2013-02-10T12:14:44.993
> 
> 标签：redirect, azure, dns, cname, zone

我在 Windows Azure 上托管服务并使用外部 DNS (Gandi) 来管理区域文件。我想要将所有传入的 Azure 流量重定向到另一个网页，同时我正在更新服务（就像我们很快就会回来一样）。

我知道我可以通过更新区域文件来做到这一点，但是传播需要时间，然后才能恢复正常。所以 1 小时的更新最终需要 6-8 小时。

情况不妙。有没有其他方法可以立即重定向流量而不是等待 DNS 传播？在代码中添加重定向并不是一个真正的选择，因为 Azure 服务包需要很长时间才能上传。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T15:47:53.533

ASP.NET 中有一个功能可以快速停止提供内容。如果您将一个名为的文件放在`app_offline.htm`站点的根目录中，它将提供该文件而不是常规内容。[这篇博文](http://weblogs.asp.net/scottgu/archive/2006/04/09/442332.aspx)中有详细信息。

在 Azure 中使用它可能很困难。我建议使用 VIP 交换，但我看到你不想这样做。您可以远程访问每个虚拟机并手动添加文件，但这可能会很痛苦。可以编写脚本，但我不知道这样做的简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T12:29:43.020

不确定您在这里的全部要求是什么，但是 VIP 交换可以为您解决问题吗？您可以将备用的 'well be back' 站点部署到暂存槽，当您希望更新服务时，您将使用 VIP 交换来进行生产，同时更新您的服务，该服务现在正在使用最新版本进行暂存。

准备就绪后，您可以换回 VIP 并且新站点现在正在生产中？

编辑添加：

我同意你关于想要离开暂存槽进行回滚的观点，这是完全有道理的。

另一种选择可能是使用[流量管理器](http://msdn.microsoft.com/en-us/library/windowsazure/hh744833.aspx)-

将您的主要应用程序放在一个云服务中，将您的临时登录页面放在另一个云服务中。使用两种服务配置流量管理器故障转移策略（首先是主要服务，其次是备用服务）。

当您想进入“维护模式”时，禁用到主要服务的流量，所有流量都将被路由到“维护模式”，尽管在传播它时有一些滞后，以分钟而不是小时为单位测量时我玩了一点刚才有点 - 有一个 DNS 生存时间设置可供您使用，默认为 5 分钟。

当您准备好重新上线时，重新启用主站点（并且您可以选择在一切正常时删除“维护模式”部署

# python - 如何在循环中更新 pyxb 树状对象？

> ID：14797607
> 
> 赞同：0
> 
> 时间：2013-02-10T12:15:32.997
> 
> 标签：python, reference, argparse

对于我当前的项目，我正在使用[pyxb](http://pyxb.sourceforge.net)读取 xml 配置文件。但是应该可以通过提供命令行参数（使用 argparse 解析）来覆盖某些设置。
为了获得更具可读性的代码，我想使用通用方法并定义更新方法。参数更新必须使用 try-catch-block，因为 pyxb 确实在分配时验证新值（在这种情况下检查字符串是否符合模式）。

这是我尝试过的：

```
def override_setup(exp, args):
    for param, arg in [[exp.param1, args.param1], [exp.param2, args.param2]]:
        if arg is None:
            continue

        # this doesn't work, because param just references the string object referenced by exp.param1?
        try:                
            param = arg
        except Exception as e:
            print e

    # the following works
    exp.param1 = "stuff" 
```

我正在创建一个列表，其中包含 pyxb 参数到 argparse 命令行参数的映射。我认为这就是一切开始出错的地方。
我想要某种方法来使用某种循环进行此更新（因此我不需要为每个元素重复 try-catch-block）。
不幸的是 exp 似乎不是可迭代的。exp 的每个孩子都有一个 member `_getDiagnosticName()`，它返回一个字符串，我可以将其用作到 argparse 读取的参数的映射。
我发现一篇[文章描述了如何获取 argparse 结果的字典](http://parezcoydigo.wordpress.com/2012/08/04/from-argparse-to-dictionary-in-python-2-7/)。因此映射（pyxb 元素 -> argparse 参数值）不再是问题。迭代是问题所在。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T12:52:31.417

我找到了一个可能但有点难看的解决方案。主要部分是使用[vars()](http://docs.python.org/2/library/functions.html#vars)（如我在我的问题中引用的文章中......）：

```
def override_setup(exp, args):
    exp_dict = vars(exp)
    opts = vars(args)

    # iterate over node
    for key in exp_dict:
        cur_param = None
        for param in ['param1', 'param2']:
            # ugly workaround
            # keys are like __{XML-Namespace-URI}_parent__param1
            if key.endswith(param):
                cur_param = param

        if not cur_param or opts[cur_param] is None:
            continue

        try:
            exp_dict[key] = opts[cur_param]
        except Exception as e:
            print e 
```

在我的例子中，exp_dict 包含至少 6 个元素，代表你不应该接触的内部 pyxb 东西。这就是我不太喜欢这个解决方案的原因之一。但这是我目前最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T13:08:47.103

在搜索了更多之后，我终于找到了我正在寻找的解决方案：[setattr()](http://docs.python.org/2/library/functions.html#setattr)：

```
def override_setup(exp, args):
    opts = vars(args)

    for param in ['param1', 'param2']:
        if opts[param] is None:
            continue

        try:
            setattr(exp, param, opts[param])
        except Exception as e:
            print e 
```

# c# - 我可以在哪里放置静态字符串？

> ID：14797609
> 
> 赞同：2
> 
> 时间：2013-02-10T12:15:43.420
> 
> 标签：c#, windows-phone-7, xaml

我正在创建一个*Windows Phone*`MessageBox.Show("Same error message")`应用程序，我发现自己多次编写相同的内容。例如

> “无法连接到服务器”

当用户没有互联网访问权限时会发生这种情况。

有没有什么地方可以放它，以便我写一次文本并在整个地方获取相同的文本？

我可以写一个静态类，但也许有一个文件呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T12:27:47.373

> 有没有什么地方可以放它，以便我写一次文本并在整个地方获取相同的文本？

是的，有一种专门用于此目的的特殊文件，称为`strings.resx`. 它让你写

```
MessageBox.Show(strings.ServerNotFound); 
```

代替

```
MessageBox.Show("Server not found"); 
```

使用的额外好处（实际上，预期目的）`strings.resx`是您的应用程序变得易于本地化（[请参阅此问题的答案](https://stackoverflow.com/q/1142802/335858)）：添加正确的翻译和设置当前语言环境是更改应用程序显示的所有字符串所需的全部内容用户提供适当的本地翻译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T12:19:49.313

如果你希望它最终是多语言的，我会选择 Resource.resx 文件。

如果没有，您可以寻求各种解决方案：

*   将字符串保留在它们最有意义的地方，在你使用它们的类中
*   将它们全部存储在一个专门的类中

喜欢：

```
class MyClass 
{
    private static string MyString = "blah";
    // other meaningful stuff
} 
```

或者：

```
public class MyStaticStrings
{
    public static string MyString = "blah1";
    public static string AnotherString = "blah2";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T12:20:55.467

您可以在 App 类的 App.xaml.cs 页面中创建一个静态变量，以便您可以在整个应用程序中访问它。

# backbone.js - 集合获取和模型解析

> ID：14797614
> 
> 赞同：0
> 
> 时间：2013-02-10T12:16:13.977
> 
> 标签：backbone.js

我在我的模型中覆盖函数 parse()，当数据库中的姓名或姓氏为空时，我正在询问 Facebook API：

```
var Friend = Backbone.Model.extend({ 
parse : function(response) {
    var self = response,
        that = this;

    if(!response.first_name) {
        FB.api('/'+response.fbid, function(response) { 
            self.first_name = response.first_name;
            self.surname = response.last_name;
        });
    }

    return self;
}
}); 
```

我的问题是，在收集过程中，这些值（名字和姓氏）仍然是空的（尽管模型中的 console.log 正确显示了它）。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T13:21:21.540

Javascript 调用是异步的，所以和`FB.api`之间基本上没有延迟。由于您可能在 fetch 之后立即没有返回数据，因为请求尚未结束。`FB.api``return self``console.log(model)``FB.api`

您可以做的是设置尝试在模型更新时放置一些回调并收听它，如果您更改模型触发`update`方法，例如...

```
Friend.fetch( { success: function(model, response) { 
    if ( !model.get('first_name') ) {
        FB.api('/'+model.get('fbid'), function(fb_response) {
            model.set('first_name', fb_response.first_name);
            model.set('last_name', fb_response.last_name);
            console.log('model updated with facbook info', model);
        });
    }
}}); 
```

尝试`console.log('updated');`在您的`FB.api`回调中运行（在您当前的代码中）以查看我正在谈论的延迟。

# c# - Farseer 从 OnCollision 访问类

> ID：14797619
> 
> 赞同：1
> 
> 时间：2013-02-10T12:16:56.280
> 
> 标签：c#, box2d, physics, farseer

我在游戏中将 Farseer 用于物理，并且有几个关键类：`Planet`和`PlanetProp`. 每个行星都有一个巨大的圆形天体和一个“场”。该场是身体周围的一个大型传感器。PlanetProps 被拉向它们当前所在的行星场（一个名为 PlanetInfo 的结构）。所以我设置了一个碰撞处理程序`PlanetProp`，它将（无论何时调用）检测它与之碰撞的夹具是否是传感器。

然后我计划 A）检测传感器是否属于 a`Planet`和 B）设置`PlanetProp`被拉向行星

所以换句话说，是否可以使用碰撞回调和来自该类中的主体的固定装置来访问一个类？

编辑：这是否涉及用户数据？如果我使用的是 C++，我可能可以在其中放置一个指向该类的指针，但我使用的是 c#。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T14:08:16.253

在 C# 中有“**引用类型**”和“**值类型**”。引用类型是使用`class`关键字创建的。值类型是使用`struct`关键字创建的。（[MSDN 上的扩展解释](http://msdn.microsoft.com/en-us/library/4d43ts61(v=vs.90).aspx)。）

引用（例如“ `Planet myPlanet`”变量，如果有的话`class Planet`）与指针非常相似。它占用相同的空间（32 位或 64 位，具体取决于您的架构）并“指向”（引用）*引用类型*的*实例*。与指针不同，您不能对它们执行算术运算，因此垃圾收集器可以做它的事情并跟踪哪些对象仍然被引用（因此它们不会被收集）。

 *`UserData`因此，将 设置为行星对象的实例是非常安全的。它将引用同一个对象，并且不会制作副本。

如果你有一个值类型（即：），情况就不同了`struct Planet`。当你分配它时，它会被复制。（实际上，在这种情况下，因为`UserData`is 是类型`object`并且需要引用类型 - 框架会将您的值类型“装箱”通过将其复制到不可变的引用类型中。）

就我个人而言，我发现对引用类型和值类型使用不同的语法高亮颜色很有帮助——尤其是在你关心内存的游戏开发时。*

# c++ - 用 Chudnovsky 算法计算 Pi 数

> ID：14797620
> 
> 赞同：4
> 
> 时间：2013-02-10T12:17:15.380
> 
> 标签：c++, algorithm

下面是一些根据 Chudnovsky 算法计算 Pi 的 C++ 代码：

```
#include <iostream>
#include <cmath>
#include <iomanip>

int fact(int digit)
{
    int result = 1;
    for (int i=digit; i>1; i--)
    {
        result *= i;
    }
    return result;
}

int main()
{
    long double pi = 0.0;
    int precision = 10;
    for ( int k=0; k<=precision; k++)
    {
        pi += ( pow(-1, k)*fact((6*k))*(13591409+545140134*k))/(fact(3*k)*pow(fact(k),3)*pow(640320, (3*k+1.5)));
    }
    pi = 1.0/(12*pi);
    std::cout<<std::setprecision(80)<<pi<<'\n'<<M_PI<<'\n';
} 
```

问题是这段代码只返回 PI 号的 15 位右数字，另一部分是垃圾......当精度变量设置为 12 或更大时，它返回 -nan。有人可以帮我吗？TIA
编辑：Ubuntu 12.10 x64，gcc 4.7.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T21:22:08.900

使用 double 作为 fact() 返回类型以及 fact() 中的“结果”变量。

# iphone - 停止音乐播放 YouTube 视频？

> ID：14797621
> 
> 赞同：0
> 
> 时间：2013-02-10T12:17:39.080
> 
> 标签：iphone, ios, uiwebview

所以我有一个 UIWebView 包含可以在应用程序中播放的音乐。在另一个视图中，我有一个可以在应用程序中播放的 YouTube 视频列表。但是，当从 webView 播放音乐然后启动 YouTube 视频时，音乐不会停止，并且会与 YouTube 视频中的音频重叠。

当另一个 UIWebView 正在播放 YouTube 视频时，如何停止在 UIWebView 中播放音乐？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:41:01.713

在播放视频之前，设置此代码。

```
NSError *sessionError = nil;
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:&sessionError];
[[AVAudioSession sharedInstance] setActive:YES error:&sessionError]; 
```

更多信息，请阅读本文档：http: [//developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Configuration/Configuration.html](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Configuration/Configuration.html)

# css - 嵌套的 CSS 样式？

> ID：14797622
> 
> 赞同：0
> 
> 时间：2013-02-10T12:17:44.680
> 
> 标签：css, selector

这样的事情可能吗？

```
.imgbox:hover{ .ui-resizable-se { /*some style */ } } 
```

还是概念上的等价物？基本上，只有当某个类的元素悬停在上面时，该类中的某个元素*才*应该改变某种样式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T12:20:12.730

你可以这样做：

```
.imgbox:hover .ui-resizable-se { /*some style */ } 
```

LESS 或 SASS 也可以生成相同的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T12:19:48.797

当然会是：

```
.imgbox:hover .ui-resizable-se { /*some style */ } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T12:19:49.187

不，CSS 不允许嵌套。你必须这样写：

```
.imgbox:hover .ui-resizable-se { /*some style */ } 
```

但是，有各种可用的 CSS 预处理器可以将类似的内容转换为有效的 CSS。最流行的是[LESS](http://lesscss.org/)和[SASS/SCSS](http://sass-lang.com/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-10T12:19:49.813

不是纯 CSS，但你可以使用像 Sass 这样的 CSS 预处理器：

[http://sass-lang.com/](http://sass-lang.com/)

```
table.hl {
  margin: 2em 0;
  td.ln {
    text-align: right;
  }
}

li {
  font: {
    family: serif;
    weight: bold;
    size: 1.2em;
  }
} 
```

生成：

```
/* CSS */

table.hl {
  margin: 2em 0;
}
table.hl td.ln {
  text-align: right;
}

li {
  font-family: serif;
  font-weight: bold;
  font-size: 1.2em;
} 
```

# php - 跳过某些特定文件的 .htaccess 规则

> ID：14797645
> 
> 赞同：-1
> 
> 时间：2013-02-10T12:19:56.273
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting, seo

现在我正在使用以下 .htaccess 规则来修改我的网址。我的网站包含更多图像和类似文件。我发现 .htaccess 规则会增加网站的加载时间。我希望跳过执行 domain.com/images 和域的一些代码.com/scripts 文件夹。

选项 +FollowSymLinks
RewriteEngine On
RewriteRule ^([0-9]+)/([0-9]+)/([^.]+).html index.php?perma=$3
RewriteRule ^movies/([^.] +).html gallery.php?movie=$1
RewriteRule ^album/([^.]+).html gallery.php?album=$1
RewriteRule ^img/([^.]+)/([^.]+) .html gallery.php?img=$2
RewriteRule ^movies.html gallery.php

我想将其修改为

如果它是图像或脚本文件夹中的文件，则跳过
else
RewriteRule ^([0-9]+)/([0-9]+)/([^.]+).html index.php?perma=$3
else
RewriteRule ^movies/([^.]+).html gallery.php?movie=$1
否则
RewriteRule ^album/([^.]+).html gallery.php?album=$1
否则
RewriteRule ^img/([^. ]+)/([^.]+).html gallery.php?img=$2
else
RewriteRule ^movies.html gallery.php

反正 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T12:39:19.693

例如，不要将一个 .htaccess 文件放入具有 RewriteRule 用于电影文件夹的电影文件夹中，或者将一个放入 img 文件夹中，并且仅将用于 /img/ 文件夹的 RewriteRule 放入其中。这意味着它将根据其目录加载不同的 .htaccess 文件，而不是使用一个。

# eclipse - 不明白这个错误日志

> ID：14797649
> 
> 赞同：-2
> 
> 时间：2013-02-10T12:20:08.097
> 
> 标签：eclipse

有人帮我修复日志上的所有这些错误吗？提前感谢 这里的**强文本** 是我正在使用的 Eclipse IDE 的错误日志。

*[http://justpaste.it/1y13](http://justpaste.it/1y13)*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T12:26:38.823

你用完了 PermGen 空间。更改 eclipse.ini 文件以增加 PermGen 空间量。

# javascript - 当用户单击它时，如何阻止输入边框颜色发生变化

> ID：14797658
> 
> 赞同：0
> 
> 时间：2013-02-10T12:21:25.117
> 
> 标签：javascript, css, html

我正在尝试为我的网站制作一个表格，我面临两个问题，第一个问题是当我输入一个输入时：

```
<textarea cols:40 rows:50></textarea> 
```

如果您在 chrome 中单击它，边框颜色将变为橙色，在 safari 中它将变为蓝色，那么我怎样才能阻止边框颜色的变化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T12:23:09.233

删除`outline`：

```
textarea {
    outline: none;
} 
```

但请记住，`outline`用于指示焦点表单字段，这对于某些残疾/视力有限的用户可能是有用的辅助工具；总是值得努力用另一个适合您主题的默认视觉提示替换默认视觉提示，无论是通过更改`color`of the`outline`还是通过`background-color`在元素本身上使用。

此外，您的 HTML 格式不正确，应该是：

```
<textarea rows="50" cols="40"></textarea> 
```

参考：

*   [`outline`](https://developer.mozilla.org/en-US/docs/CSS/outline).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T12:23:48.777

您需要删除焦点轮廓：

```
textarea:focus {
    outline: none;
} 
```

# c++ - 堆栈或堆上的对象分配

> ID：14797662
> 
> 赞同：1
> 
> 时间：2013-02-10T12:21:33.367
> 
> 标签：c++, object, runtime, heap-memory, stack-memory

我正在尝试建立一种机制来判断类对象的分配位置。考虑在类中创建一个标志，但无法设置值，因为在“new”运算符的调用期间对象的生命周期没有开始。在 C++ 中是否可以判断一个对象是在堆栈上还是在堆上（运行时）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T12:32:23.940

没有可移植的方法来执行此操作，但如果我们假设您要执行此操作的系统类型数量有限，您可以尝试以下操作：

获取 main 中某个局部变量的地址（或其他“调用堆栈中的低位”）。将其存储在全局变量中，让我们调用`char *stackbase;`

然后在您正在签入的函数中获取局部变量的地址，让我们调用它`char *stacktop;`

现在，如果我们有一个`char *obj = reinterpret_cast<char *>(object_in_test);`，那么：

```
if (obj > stacktop && obj < stackbase) on_stack = true;
else on_stack = false; 
```

请注意，这有几个缺陷：

1.  这是技术上未定义的行为。它适用于大多数系统，因为整个内存空间是连续的。但是在某些系统中，堆栈和内存的其他部分具有单独的“地址空间”，这意味着指向不同类型内存的两个指针可以具有相同的地址。
2.  线程需要有一个“每线程堆栈库”。
3.  假设堆栈“向零增长”（如果不是，则必须反转 if 中的`>`and `<`。
4.  全局变量将被视为`not on stack`。
5.  使用风险自负！

尽管有以下免责声明，我完全希望必须删除这个答案，因为它会被语言律师否决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-18T23:52:22.553

我一直在做一些实验，并且发现这似乎有助于在运行时始终判断对象是否在堆栈上分配。

界面如下：

```
#ifndef HEAPAWARE_H
#define HEAPAWARE_H

#include <cintttypes>

class HeapAware
{
public:
    HeapAware();
    void *operator new(std::size_t size);
    void *operator new[](std::size_t size);
    void operator delete(void *ptr, std::size_t);
    void operator delete[](void *ptr, std::size_t);
    bool is_on_heap() const { return on_heap; }
    std::ptrdiff_t get_heap_array_index() const { return heap_array_index; }
private:
    const bool on_heap;
    const std::ptrdiff_t heap_array_index;
    static thread_local HeapAware * last_alloc;
    static thread_local std::size_t allocated_size;
};
#endif 
```

实现是：

```
void *HeapAware::operator new(std::size_t size)
{
    auto result = last_alloc = reinterpret_cast<HeapAware*>(malloc(size));
    allocated_size = 1;
    return result;
}
void *HeapAware::operator new[](std::size_t size)
{
    auto result = last_alloc = reinterpret_cast<HeapAware*>(malloc(size));
    allocated_size = size;
    return result;
}
void HeapAware::operator delete(void *ptr, std::size_t)
{
    free(ptr);
}
void HeapAware::operator delete[](void *ptr, std::size_t)
{
    free(ptr);
}

HeapAware::HeapAware():on_heap(this>=last_alloc && this<last_alloc+allocated_size),heap_array_index(allocated_size>1?this-last_alloc:-1)
{ 
}

thread_local HeapAware * HeapAware::last_alloc = nullptr;
thread_local std::size_t HeapAware::allocated_size = 0; 
```

这似乎总是正常工作。对于在堆上分配的数组，条目的索引也是可用的。对于在堆栈上分配的值，或者对于仅单独分配的条目，该`get_heap_array_index()`函数返回 -1。

这段代码的假设是在任何给定线程上构造之前立即调用 new 运算符。然而，这个假设似乎适用于我尝试过的所有事情。

# c# - 来自 StreamReader 的原始文件字节，幻数检测

> ID：14797664
> 
> 赞同：7
> 
> 时间：2013-02-10T12:22:07.440
> 
> 标签：c#, .net, encoding, .net-4.0, magic-numbers

我试图区分“文本文件”和“二进制”文件，因为我想有效地忽略具有“不可读”内容的文件。

我有一个我认为是 GZIP 存档的文件。我试图通过检测幻数/文件签名来忽略这种文件。如果我在 Notepad++ 中使用十六进制编辑器插件打开文件，我可以看到前三个十六进制代码是`1f 8b 08`.

但是，如果我使用 a 读取文件`StreamReader`，我不确定如何获取原始字节..

```
using (var streamReader = new StreamReader(@"C:\file"))
{
    char[] buffer = new char[10];
    streamReader.Read(buffer, 0, 10);
    var s = new String(buffer);

    byte[] bytes = new byte[6];
    System.Buffer.BlockCopy(s.ToCharArray(), 0, bytes, 0, 6);
    var hex = BitConverter.ToString(bytes);

    var otherhex = BitConverter.ToString(System.Text.Encoding.UTF8.GetBytes(s.ToCharArray()));
} 
```

在 using 语句的末尾，我有以下变量值：

```
hex: "1F-00-FD-FF-08-00"
otherhex: "1F-EF-BF-BD-08-00-EF-BF-BD-EF-BF-BD-0A-51-02-03" 
```

两者都不是以 Notepad++ 中显示的十六进制值开头。

是否可以从通过读取文件的结果中获取原始字节`StreamReader`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T12:36:33.733

您的代码尝试将二进制缓冲区更改为字符串。字符串在 NET 中是 Unicode，因此需要两个字节。如您所见，结果有点不可预测。

只需使用 BinaryReader 及其[ReadBytes](http://msdn.microsoft.com/en-us/library/system.io.binaryreader.readbytes.aspx)方法

```
using(FileStream fs = new FileStream(@"C:\file", FileMode.Open, FileAccess.Read))
{
    using (var reader = new BinaryReader(fs, new ASCIIEncoding()))
    {
        byte[] buffer = new byte[10];
        buffer = reader.ReadBytes(10);
        if(buffer[0] == 31 && buffer[1] == 139 && buffer[2] == 8)
            // you have a signature match....
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-10-14T12:28:58.787

用法（用于 pdf 文件）：

```
Assert.AreEqual("25504446", GetMagicNumbers(filePath, 4)); 
```

方法 GetMagicNumbers：

```
private static string GetMagicNumbers(string filepath, int bytesCount)
{
    // https://en.wikipedia.org/wiki/List_of_file_signatures

    byte[] buffer;
    using (var fs = new FileStream(filepath, FileMode.Open, FileAccess.Read))
    using (var reader = new BinaryReader(fs))
        buffer = reader.ReadBytes(bytesCount);

    var hex = BitConverter.ToString(buffer);
    return hex.Replace("-", String.Empty).ToLower();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T12:27:47.453

你不能。`StreamReader`用于读取文本，而不是二进制。使用`Stream`直接读取字节。在你的情况下`FileStream`。

要猜测文件是文本还是二进制文件，您可以将前 4K 读入 a`byte[]`并进行解释。

顺便说一句，您试图将字符强制转换为字节。这在原则上是无效的。我建议你熟悉一下 an`Encoding`是什么：它是以语义正确的方式在字符和字节之间进行转换的*唯一*方法。

# java - 如何保存从 http 响应发送的文件而不包含标头

> ID：14797665
> 
> 赞同：0
> 
> 时间：2013-02-10T12:22:12.170
> 
> 标签：java, file, http, get, httpresponse

我正在尝试用 java 编写一个能够从 URL 下载文件的程序。我想在不使用 URLConnection 的情况下执行此操作，而我只是使用 TCP 套接字。我已成功发送 GET 请求并获取服务器的响应，但我似乎无法在没有 http-header（只是文件）的情况下从响应中保存文件。

```
import java.net.*;
import java.io.*;

public class DownloadClient {
    public static void main(String[] args) {
        try {
            if (args.length != 3) {
                System.out.println(
                    "Use: java DownloadClient <host> <port> <filename/path>"
                );
            } else {
                // Sorting out arguments from the args array
                String host;
                int port; 
                String filename;
                if (args[0].charAt(args[0].length()-1) == '/') {
                    host = args[0].substring(0,args[0].length()-1);
                } else {
                    host = args[0];
                }
                port = Integer.parseInt(args[1]);
                if (args[2].charAt(0) == '/') {
                    filename = args[2];
                } else {
                    filename = "/"+args[2];
                }

                Socket con = new Socket(args[0], Integer.parseInt(args[1]));

                // GET request
                BufferedWriter out = new BufferedWriter(
                    new OutputStreamWriter(con.getOutputStream(), "UTF8")
                );
                out.write("GET "+filename+" HTTP/1.1\r\n");
                out.write("Host: "+host+"\r\n");
                out.write("User-Agent: Java DownloadClient\r\n\r\n");
                out.flush();

                InputStream in = con.getInputStream();
                BufferedReader = 
                OutputStream outputFile = new FileOutputStream(
                    filename.substring(filename.lastIndexOf('/')+1)
                );
                byte[] buffer = new byte[1024];
                int bytesRead = 0;

                while((bytesRead = in.read(buffer)) > 0) {
                    outputFile.write(buffer, 0, bytesRead);
                    buffer = new byte[1024];
                }

                outputFile.close();
                in.close();
                con.close();
            }
        } catch (IOException e) {
            System.err.println(e); 
        }
    }
} 
```

我想我应该以某种方式寻找 \r\n\r\n 因为它表示内容开始之前的空行。到目前为止，这个程序创建了一个包含所有 http-response 的文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T12:44:47.757

推荐的方法是不要尝试使用普通的`Socket`. 使用现有的客户端 HTTP 堆栈之一；例如标准`HttpUrlConnection`堆栈或 Apache`HttpClient`堆栈。

如果您坚持使用普通套接字进行交谈，那么您可以根据 HTTP 规范处理/处理任何响应中的“标头”行……以及其他所有内容……。

> 我想我应该以某种方式寻找，`\r\n\r\n`因为它表示内容开始之前的空行。

是的 ...

您还可能需要处理发送压缩响应、使用意外字符集的响应、3xx 重定向等的服务器。

# linux - 在 centOS 5.5 中不添加用户

> ID：14797666
> 
> 赞同：-2
> 
> 时间：2013-02-10T12:22:16.257
> 
> 标签：linux, bash, shell, centos, centos5

当我运行 shell 脚本时。它显示了一些错误。**我在centOS 5.5**上运行脚本。

这是我的 shell 脚本中显示错误的部分。

**部分代码**

```
if ! id service >/dev/null 2>&1
then
    doit 'CREATING "service" user' 'whereis adduser -c SERVICE -d /home/service -u 2000 -g 2000 -s /bin/bash service ; echo service | passwd --stdin service'
fi 
```

**代码**

```
doit ()
{
    local msg=$1
    shift
    if [ "$msg" ]
    then
        echo "$msg"
    fi
    if [ -z "$DONOTHING" ]
    then
        eval $*
    fi
} 
```

**错误**

```
CREATING "service" user
adduser: /usr/sbin/adduser /usr/share/man/man8/adduser.8.gz
whereis [ -sbmu ] [ -SBM dir ... -f ] name...
passwd: Unknown user name 'service'. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T12:24:47.927

我认为你只需要放弃`whereis`你的命令。

# c# - 如何在 Unbounded datagridview 指定列中设置焦点？

> ID：14797670
> 
> 赞同：0
> 
> 时间：2013-02-10T12:22:43.913
> 
> 标签：c#, .net

在我的项目中，我使用的是无界 Datagridview，其中包含指定的列，如 ID、项目名称、项目代码、尺寸、颜色、费率、数量、总计。在这里，我让我的最终用户只输入项目名称/项目代码和数量。剩余的列将自动完成。现在我的问题是当最终用户输入项目名称/项目代码时，焦点应该设置为数量，当输入数量时，焦点应该在项目名称/项目代码的新行中。

是否可以 。任何人都可以给我一个权利来完成这项任务......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:50:38.890

如果您使用的是 c# 和 DataGridView，则可以使用以下示例设置焦点：

```
DataGridView1.CurrentCell = DataGridView1[columnnumber,rownumber];

To put it in edit mode: 
DataGridView1.BeginEdit(true); 
```

希望这可以帮助。

# c# - 用 C# 为开放系统（例如电子邮件或 SMS 发件人）编写单元测试

> ID：14797671
> 
> 赞同：1
> 
> 时间：2013-02-10T12:22:51.933
> 
> 标签：c#, unit-testing, testing

我想为我的项目中的电子邮件和短信发件人编写单元测试，当然，因为它们是开放系统，我无法从头到尾测试它们的功能。所以我正在寻找一种聪明的方法来测试它们。

以下是我用来发送电子邮件和短信的代码：

电子邮件：

```
public void Send(MailMessage msg)
    {
        SmtpClient client = new SmtpClient("smtp.gmail.com", 587);
        client.EnableSsl = true;
        client.DeliveryMethod = SmtpDeliveryMethod.Network;
        client.Credentials = new NetworkCredential(emailSetting.EmailUser
        , emailSetting.EmailPass);
        client.Send(msg);
    } 
```

短信 ：

```
 public void SendSMS( String toNumber, String message)
    {
         if (client != null)
            client.SendSmsMessage(smsSetting.SMS_Num, toNumber, message);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T12:27:54.470

问题在于，如果您真的要使用`unit-test`s，那么您会想要`mock`使用邮件/短信客户端。

如果您想实际发送电子邮件（如果它们在一夜之间/在开发周期中运行将导致垃圾邮件），那么它们不会归类为单元测试，而是集成测试。

作为一个嘲弄的例子：

```
 public class EmailThingy
 {
     private readonly IEmailClient _client;

     public EmailThingy(IEmailClient client)
     {
          _client = client;
     }

     public void Send()
     {
          // do stuff with client
     }
 } 
```

在你的单元测试中

```
 [Test]
    public void SendEmail()
    {
        var clientMock = MockRepository.GenerateMock<IEmailClient>();

        // define behaviour for clientmock

        var sut = new EmailThingy(clientMock);
        sut.SendMail();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T12:26:13.133

对于短信可以通过以下方式完成。

第 1 步：导航到您的 Web.Config 文件并向其中添加以下标签。

```
<system.net>
    <mailSettings>
        <smtp deliveryMethod="SpecifiedPickupDirectory">
            <specifiedPickupDirectory pickupDirectoryLocation="E:\MailTest\"/>
        </smtp>
    </mailSettings>
</system.net> 
```

确保您为取件位置指定的目录必须存在。

第 2 步：现在测试您的电子邮件发送功能。我已经使用 button_click 使用以下代码测试此功能。

```
SmtpClient smtp = new SmtpClient();
MailMessage message = new MailMessage("me@gmail.com", "me@yahoo.com","My Message Subject","This is a test message");
smtp.Send(message); 
```

输出：它将在文件夹中创建 .eml 文件，其中包含随机生成的 GUID 名称，这是我们收到后可以看到的电子邮件。对我来说，它创建了一个像`c127d1d5-255d-4a5a-873c-409e23002eef.eml in E:\MailTest\ folder`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T12:43:28.910

这是依赖注入解决方案和模拟的经典之作。

编写您的代码，就好像您可以使用许多 SMS 解决方案中的任何一个一样。

创建一个接口，说 ISMS，方法是 Send(recipient, message);

然后在直接调用短信内容的代码中实现它。

当您有需要短信功能的东西时，您可以实例化您想要使用的实现并将其传递给该代码。现在它不关心短信是什么以及如何。

查看服务定位器模式，了解一个很好的方法。

当涉及到单元测试时，您可以创建一个模拟类来实现接口并注入它。它不发送短信，它可能会检查收件人和消息是否有效，但它不会向整个团队发送测试数据垃圾邮件。

测试您的 sms 实现工作然后单独完成，因为它不关心为什么、何时或发送什么消息。

如果您想进行端到端测试，那将是集成测试而不是单元测试，因为所涉及的远不止一个单元。

# point-clouds - 在点云中查找线上的点

> ID：14797673
> 
> 赞同：2
> 
> 时间：2013-02-10T12:22:55.133
> 
> 标签：point-clouds, point-cloud-library

我正在使用点云库。我知道有一个使用 RANSAC 方法查找行的功能，但我想做相反的事情。我有一个点云，我有一个线方程，现在，我想找到在线上或附近（在给定阈值内）的所有点。

有什么功能可以用来实现我的目标吗？

我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:53:44.473

我曾多次尝试使用 PCL 进行 Kinect 处理，但对我来说效果不太好。所以我尝试创建自己的算法来做我想做的事，并且对于应用程序，它们的工作速度比 PCL 快得多:)

我正在从事的项目在 GitHub 上，您可以在[此处](https://github.com/jimjibone/robotarm/blob/master/Kinect%20Object%20Detector/Object%20Detection/JRConvexHull/JRConvexHull.cpp#L43)`bool ConvexHull::addPoint(double newX, double newY, double newZ)`找到一些可能对您有所帮助的代码。

这利用了使用 RANSAC 生成的 3D 平面方程，然后将每个点与其进行比较，计算点与平面之间的距离，就像 Oscee 所说的那样。

这是我认为可以帮助您的代码的多汁位：

```
// Find the distance from point to plane.
// http://mathworld.wolfram.com/Point-PlaneDistance.html
dist  = newX * plane.a;
dist += newY * plane.b;
dist += newZ * plane.c;
dist += plane.d;
dist /= sqrt(pow(plane.a, 2) + pow(plane.b, 2) + pow(plane.c, 2));

dist = (dist >= 0) ? dist : -dist;  // Absolute distance.

if (dist > tolerance) {
    return false;   // Return false as point is outside of tolerance.
} 
```

使用这个函数，我传入 640*480 Kinect 图像中深度值大于 0 的每个点。

对我来说，这工作得很快:)

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T12:09:01.347

我认为您不需要任何特殊功能来做到这一点 - 只需遍历所有点，计算点线距离并接受阈值内的点并拒绝/删除外面的点。

# jquery - 对象没有方法（jQuery）

> ID：14797683
> 
> 赞同：0
> 
> 时间：2013-02-10T12:23:54.177
> 
> 标签：jquery, function

我在一个 js 文件中有这个：

```
$(document).ready(function(e){
    jQuery.fn.SaveAdd = function(titulo,contenido,tags) {
       // code
    }
}); 
```

我将js导入到HTML文档中，并调用了该函数：

```
$(document).ready(function(){
    $("#iSave").click(function(){
        // declaration of vars instead of this line
        $(this).SaveAdd(title,content,tags);    
    });
}); 
```

我有错误：没有方法SaveAdd。但是当你使用这个时：

```
$(document).ready(function(){
        // declaration of vars instead of this line
        $(this).SaveAdd(title,content,tags);    
}); 
```

该功能运行正常：S 我不知道出了什么问题...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T12:26:19.517

插件不应包装在`document.ready`处理程序中 - 这会将函数添加到 jQuery 直到为时已晚。正常模式是：

```
(function($) {

     $.fn.SaveAdd = function(...) {
         ...
     };

})(jQuery); 
```

您不必*在*插件模块中使用`$`jQuery 的别名，但这是通常的约定。

**编辑**我看到你真正的问题似乎是使用一个库（Aloha）动态加载它自己的jQuery版本（使用requirejs）并且不以正常方式导出它。如评论中所述，这就是您的错误消息报告问题的原因`[object Object]`- 明确指示`$(...)`未返回 jQuery 对象。

有关如何解决这些冲突的更多信息，请参阅[http://aloha-editor.org/guides/dependencies.html 。](http://aloha-editor.org/guides/dependencies.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T12:26:53.840

在您提供给我们的代码中，您似乎正在为 jQuery 创建一个插件，它有点像这样：

```
(function($) {

     $.fn.SaveAdd = function(titulo,contenido,tags) {
         //your great code
     };

})(jQuery); 
```

我这里有一个样品给你

```
(function($) {
    $.fn.SaveAdd = function(titulo, contenido, tags) {
        alert(titulo);
        alert(contenido);
        alert(tags);
    };
})(jQuery);

$(document).ready(function() {
    $("#iSave").click(function() {
        $(this).SaveAdd("hehe", "hahha", "hohoo");
    });
}); 
```

在这里查看它是如何工作的[http://jsfiddle.net/K4Tfg/](http://jsfiddle.net/K4Tfg/)

阅读一下，它肯定会解决您的问题： [http ://docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)

# python - 是否有任何理由使用 lambda 函数而不是列表理解？

> ID：14797686
> 
> 赞同：1
> 
> 时间：2013-02-10T12:24:21.867
> 
> 标签：python

我刚开始作为一名 Python 程序员。在进行 Python 挑战时，我在自己解决了其他人的解决方案后，通过查看其他人的解决方案来了解很多关于该语言的知识。

我到处都能看到 lambda 函数。它们看起来很简单，但可读性也差一些（至少现在对我来说）。

在其他东西上使用 lambda 函数有什么价值吗？我想知道在我的学习曲线早期是否值得学习！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T13:15:26.447

在需要的地方使用 lambda，在更合适的时候使用列表推导、生成器表达式等。

lambda 是一个单表达式函数，可以多次使用，或者作为一种回调。它可以产生单个值以及复杂的值。

列表理解是您评估一次然后根据需要使用它的东西。您会得到一个包含生成值的列表并使用它。

生成器表达式（我在这里提到它）是一个生成器（可迭代），您创建它然后只使用一次：在循环中，在另一个生成器表达式中，在列表推导中，甚至用于返回。

你甚至可以组合这些东西，像这样：

```
f = lambda n: [i for i in range(n, 2*n)]
g = (i * 2 for i in f(10))
l = [i * i for i in g]

ll = lambda n: [i * i * 2 for i in f(n)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T12:27:35.893

Lambda 在需要时使用，当它们使代码更简洁但不那么清晰时，等等。它们并没有真正与列表推导（或任何其他推导）竞争。如果你在 Python 中发现一些可读性较差的东西，你可能应该将其更改为你认为更易读的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T12:27:42.320

整个[lambda 演算](http://en.wikipedia.org/wiki/Lambda_calculus)是一件非常酷的事情。你应该尽早习惯这些概念，因为它们会让你有更广阔的思维。首先，我建议阅读

[http://www.secnetix.de/olli/Python/lambda_functions.hawk](http://www.secnetix.de/olli/Python/lambda_functions.hawk)

[为什么 Python lambdas 有用？](https://stackoverflow.com/questions/890128/python-lambda-why)

Lambda 函数通常用于支持列表推导，因为它们产生的代码更少，更容易阅读（如果你曾经习惯它的话）并且是单行的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T16:04:27.657

> 在其他东西上使用 Lamba 函数有什么价值吗？

有时您希望创建非常短的函数，但并不想真正命名它们。例如，我经常将它们用于函数回调。

```
some_system.add_modifier(lambda x, y, z: return (x*2, y*2, z*2)) 
```

就像其他评论建议的那样，这并不是选择一个或一个的问题，而只是学习该语言的一些关键机制。当然，这并不意味着必须一直使用该功能，但了解它是件好事。

> 我想知道在我的学习曲线早期是否值得学习！

我会说学习它，但在你觉得舒服的地方使用它。程序员对他们学到的新功能感到疯狂是很常见的。:)

# sql - SQL Server 中的动态透视列

> ID：14797691
> 
> 赞同：10
> 
> 时间：2013-02-10T12:24:41.343
> 
> 标签：sql, sql-server, tsql, pivot, pivot-table

我在 SQL Server 中有一个名为 Property 的表，其中包含以下列：

```
Id    Name 
```

此表中有一些属性，其他表中的某些对象应该赋予它价值。

```
Id    Object_Id    Property_Id    Value 
```

我想制作一个如下所示的数据透视表，其中包含我在第一个表中声明的每个属性的一列：

```
Object_Id    Property1    Property2    Property3    ... 
```

我想知道如何从表中动态获取数据透视列。因为第一个表中的行会改变。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-10T12:36:02.453

像这样的东西：

```
DECLARE @cols AS NVARCHAR(MAX);
DECLARE @query AS NVARCHAR(MAX);

select @cols = STUFF((SELECT distinct ',' +
                        QUOTENAME(Name)
                      FROM property
                      FOR XML PATH(''), TYPE
                     ).value('.', 'NVARCHAR(MAX)') 
                        , 1, 1, '');

SELECT @query =

'SELECT *
FROM
(
  SELECT
    o.object_id,
    p.Name,
    o.value
  FROM propertyObjects AS o
  INNER JOIN property AS p ON o.Property_Id = p.Id
) AS t
PIVOT 
(
  MAX(value) 
  FOR Name IN( ' + @cols + ' )' +
' ) AS p ; ';

 execute(@query); 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/7fad2/6)。

这会给你这样的东西：

```
| OBJECT_ID | PROPERTY1 | PROPERTY2 | PROPERTY3 | PROPERTY4 |
-------------------------------------------------------------
|         1 |        ee |        fd |       fdf |      ewre |
|         2 |       dsd |       sss |      dfew |       dff | 
```

# ruby - 模块的Ruby继承

> ID：14797701
> 
> 赞同：0
> 
> 时间：2013-02-10T12:26:32.040
> 
> 标签：ruby, class, inheritance

所以我有三个课程：

```
MyModule::Base
MyModule::Artist
MyModule::Song 
```

`MyModule::Artist`继承自`MyModule::Base`并因此可以访问其所有实例方法，并声明如下：

```
module MyModule
  class Artist < MyModule::Base 
```

这一切都按预期工作。但是，当我尝试添加第三个类（`MyModule::Song`）来继承时，也`MyModule::Base`像这样：

```
module MyModule
  class Song < MyModule::Base 
```

我得到一个`NameError`. '未初始化的常量'。好像`MyModule::Base`根本不存在！我是否遗漏了一些关于 Ruby 中类继承的基本知识，还是其他什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T13:08:09.320

我查看了您的存储库，发现当您通过in正确地要求您的`Base`模块时，您使用大锤来破解坚果 in 。`require_relative``Artist``require``Song`

由于有点 system-wide `base`，它被加载而不是预期的 local `Echonest::Base`。一起去`require_relative`享受吧。

希望有帮助。

# android - 列表视图高度

> ID：14797710
> 
> 赞同：0
> 
> 时间：2013-02-10T12:27:35.733
> 
> 标签：android, listview

我有从 sd 卡加载所有音频文件的 listview...有很多文件..但是 listview 看起来很糟糕..每个行高都会自动调整大小取决于行中显示的项目名称..背景是白色的，文本是灰色的所以很难注意到它......我想将每一行高度设置为相同，所以它看起来像这样![在此处输入图像描述](../Images/fff7f07fdba31353c0cfd1464d9c7252.png)

这是我的代码

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:orientation="vertical" android:layout_width="fill_parent"
      android:layout_height="fill_parent">

    <ListView
        android:id="@+id/PhoneMusicList"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        >
    </ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:30:02.380

在您的组 row.xml 中 ，而不是`android:layout_height="wrap_content"`列表视图的行高给出一个固定的高度..这将解决您的问题......像这样的东西 `android:layout_height="50dp"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T12:45:00.743

使用自定义列表视图。为一个列表视图项创建布局。在其中设置高度。在 .java 文件中应用适配器。然后它工作正常。我做了同样的事情，它对我有用。

# html - 从 feedzilla 抓取图像

> ID：14797727
> 
> 赞同：0
> 
> 时间：2013-02-10T12:28:54.037
> 
> 标签：html, json, api, rss, feed

我能够获取新闻数据，例如帖子标题和描述，但是如何使用 feedzilla API 获取新闻图片。

API 文档中没有提到任何内容

[http://w.feedzilla.com/api-overview](http://w.feedzilla.com/api-overview)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-19T22:54:22.933

当您获得文章列表（例如[http://api.feedzilla.com/v1/categories/26/articles.json](http://api.feedzilla.com/v1/categories/26/articles.json)）时，您可以看到其中一些具有名为“enclosures”的属性，其中 feedzilla 放置有关可能图像的信息的一篇文章。例如，一篇包含 JSON 格式图像的文章：

```
{"enclosures":[{"length":3489,"media_type":"image\/jpeg","uri":"http:\/\/news.com.au.feedsportal.com\/c\/34564\/f\/632403\/e\/1\/s\/36174fe5\/l\/0Lresources30Bnews0N0Bau0Cimages0C20A140C0A10C190C122680A50C4485310Erosetta0Bjpg\/448531-rosetta.jpg"}],"publish_date":"Sun, 19 Jan 2014 14:00:00 +0100","source":"Cnet","source_url":"http:\/\/feeds.feedburner.com\/newscomauworldnewsndm","summary":"ONE of the most ambitious missions in the history of space goes into high-risk\u000amode today when a comet-chasing probe wakes up.\u000a\u000a\u000a\u000a\u000a\u000a\u000a\u000a\u000a","title":"Comet-chasing probe to wake up (Cnet)","url":"http:\/\/news.feedzilla.com\/en_us\/stories\/top-news\/353840990?client_source=api&format=json"} 
```

请注意，此属性是可选的。

# php - 30 分钟后会话超时的脚本，在 Windows 中不起作用

> ID：14797729
> 
> 赞同：0
> 
> 时间：2013-02-10T12:29:27.260
> 
> 标签：php, session-timeout

这是我在 30 分钟不活动后结束会话的代码，在 Linux 中可以正常工作，但在 Windows 中不行。

**创建会话**

```
$_SESSION['clientdan']['user'] = $username;
$_SESSION['clientdan']['tl'] = time(); 
```

**any_file.php**

```
<?php
session_start();
$max_time = 1800;
$current = time();

if(!isset($_SESSION['clientdan']['user']) ) {
    header('Location: index.php');
} else {
    if (!isset($_SESSION['clientdan']['tl'])){
        $_SESSION['clientdan']['tl'] = time();
    } else {
        $session_life = $current - $_SESSION['clientdan']['tl'];

        if ($session_life > $max_time) {
            header('Location: include/logout.php');
        } else {
            $_SESSION['clientdan']['tl'] = time();
        }
    }
?>
<!DOCTYPE html>
......
......
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T12:33:55.263

Try to call:

```
session_cache_expire($max_time); 
```

This will increase the session timeout.

# python - 解析yaml python

> ID：14797730
> 
> 赞同：-6
> 
> 时间：2013-02-10T12:29:35.843
> 
> 标签：python, yaml, pyyaml

yaml 标记中有一个文件

```
 a:
  b:x
  test2
  test
  test3 
```

如何使用python（2.7.x）和PyYAML获取x？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T12:34:11.797

You can't! The YAML you posted results in a dict containing just a single key, `a` which maps to the value `"b:x test2 test test3"` - you can easily test that by [pasting your YAML here](http://yaml-online-parser.appspot.com/).

The reason for this is that you cannot mix `key: value` pairs and keyless items (like there would be in an array).

However, let's assume that you have proper YAML that contains an object `a` containing another object that maps `b` to `x`. For example this:

```
a:
    b: x
    c: test2
    d: test
    e: test3 
```

In this case you'd use `foo['a']['b']` to access `x` with `foo` being the object returned by your YAML parser.

The python code to get `foo` could look like this:

```
import yaml
with open('yourfile.yaml') as f:
    foo = yaml.safe_load(f) 
```

I'm using `safe_load` since you most likely do not intend to create arbitrary Python objects from your YAML document and thus you want to use a function that cannot open a security hole if ever passed a malicious YAML document.

# c - K 和 R 练习 1-22

> ID：14797734
> 
> 赞同：11
> 
> 时间：2013-02-10T12:30:05.967
> 
> 标签：c

我正在用 Kernighan 和 Ritchie 编写的 C 编程语言编写程序。

我目前在练习 1-22 中说：

> 编写一个程序，将长输入行“折叠”成两个或多个较短的行，`last > non-blank character`然后出现在输入的第 n 列之前。确保你的程序用很长的行做一些智能的事情，如果在指定的列之前没有空格或制表符。

我的问题不在于如何执行程序......我的问题是我应该在哪里折叠线。

“在最后一个非空白字符之后”是什么意思？我应该在哪里折叠线？

请大家不要告诉我程序本身。我想自己做。

我只想知道我应该折叠线的位置。

**编辑**：还有另一个问题......

如果我的行包含`tabs`怎么办？在这种情况下，行的列长度从字符长度增加。应该考虑哪个长度？

**编辑 2**：

一些聪明的东西......为了解决标签的情况，我有一个想法......

1-22之前有2个练习——1-20和1-21。哪个是entab 和detab ......你们一定知道......所以我将首先detab 线然后折叠它，然后entab 折叠线......我认为这将是最聪明的选项卡。任何人？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-10T12:32:39.833

我认为这个练习基本上是在模拟您可能在文本编辑器上看到的“自动换行”功能。“空白”表示“空白”，例如空格或制表符。

例子：

```
"Once upon a time" 
```

如果要求您在第 14 列输入之后“折叠”该行，则第 14 个字符是“时间”中的“i”。您的输出应该是两行：`"Once upon a", "time"`.

这个问题还说很长的线很聪明。

例如，

```
"Once upon a time Once upon a time Once upon a time" 
```

如果您将此行拆分为 14 个字符，则应考虑该行必须拆分为两行以上的事实。

还有一种情况是一个单词可能很长，从而阻止您拆分它：

```
"Deoxyribonucleicacid is DNA" 
```

如果将其拆分为 14 个字符，则在 之前不会找到任何空白字符`" is"`，因此应该拆分该单词。

最后，我同意这个问题有点模棱两可，但只要你在某种程度上按照要求编写代码，你就是在学习，所以我不会担心过于挂断细节。祝你好运 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T12:45:27.280

考虑这个例子：假设`n = 6`（为了计数的简单）你需要折叠的线看起来像这样：

```
Got all chars on one line.
00000000001111111111222222
01234567890123456789012345 
```

遍历字符，计算您正在生成的行中的当前位置。当你看到一个空格时，返回找到它*之前*的最后一个非空格字符，并标记它的位置。当您的计数器到达`n`时，查看原始行中空格前的最后一个非空白字符在哪里，然后折叠该行。

在上面的示例中，您看到的第一个空格位于位置 3。此时您返回一个字符，将 2 标记为空格前面的最后一个非空格，然后继续。当计数达到 6（在字符处`'l'`）时，在位置 3 处拆分行，并将当前位置重置为零。继续使用算法在 7、13 和 20 处折叠。

```
Got
all
chars
on one
line 
```

# php - Memcache - 如何防止频繁的缓存重建？

> ID：14797735
> 
> 赞同：0
> 
> 时间：2013-02-10T12:30:11.257
> 
> 标签：php, mysqli, memcached

上周左右我一直在为 Memcache 工作，我已经设法弄清楚如何设置键/删除键。这很好，但我仍在尝试找出如何在一段时间的结果循环中做同样的事情。

例如，我将有一个帖子的 while 循环，该函数将在逻辑中检查是否设置了 Memcache，如果没有，它将收集结果并创建密钥。我的问题是，**如果我将循环数据设置为 set 键并显示 set 键（最新的优先），那么插入新帖子时会发生什么？**我知道我可以在 set 键上设置时间限制，但是只要设置限制似乎仍然可以显示旧帖子，就会/可以添加内容。所以我的问题是如何更新设置的密钥。

我能想到一个可能的解决方案的唯一方法是当用户插入一个新帖子时，这会删除密钥，当再次查看所有帖子时，这就是再次设置密钥的时候。但这似乎适得其反，就像有 10 位用户提交帖子一样，所有帖子都会一遍又一遍地设置（似乎并不真正有益）

我希望这是有道理的，任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T13:02:03.077

是的，如果您在有新帖子时删除密钥，则会发生您指定的场景。为了避免这种情况，您可以使用 a) memcache 的过期时间或 b) 维护自己的作业系统来控制缓存重建的阈值。

**Memcache 的过期时间**

PHP 有两个 Memecache PECL 插件，即[Memcache](http://www.php.net/manual/en/class.memcache.php)和[Memcached](http://www.php.net/manual/en/class.memcached.php)。Memcached（注意 d 后缀）支持一种称为[touch](http://www.php.net/manual/en/memcached.touch.php)的方法，它允许我们为现有项目设置新的过期时间。假设您将缓存设置为 2 小时，当出现新帖子时，我们可以使用`touch`. 因此，如果在接下来的 10 分钟内有新帖子，则缓存将仅重建一次。这种技术在技术上称为去抖动。

一些代码：

```
$_memcached = new Memcached;
if(!$_memcached->addServer('localhost',11211))
{
    $_isConnected = FALSE;
}
else
{
    $_isConnected = TRUE;
}

$_memcached->touch($key, $expiry);

$_memcaced->add($key, $value, $expiry); 
```

请注意：这只是示例，请创建一个单例类并使用它。

如果您必须使用旧的 Memcache 插件，那么您只能复制`touch`使用 (atomic)`get`和`set`.

**职位系统**

如果您有一个作业系统，那么每次出现新帖子时提交一个作业，该作业将由作业聚合器执行以控制缓存重建的频率。

使用 Memecached 似乎是最好的方法。

# python - 如何在 python (Windows) 中获取分区的 NT 名称？

> ID：14797736
> 
> 赞同：0
> 
> 时间：2013-02-10T12:30:11.680
> 
> 标签：python, pywin32

如何在 python 中获取分区的 NT 名称？或者至少是系统中所有名称的列表？

我有什么：驱动器号或标签，或分区的其他标识符（例如，字母 E:，或标签“数据”）

我需要的是：与此分区相对应的名称，例如“\\?\\HarddiskVolume12”。

在有人问之前，是的，我真的需要它。

问题是我需要能够处理有和没有分配给它们的字母的分区，所以最好的解决方案是获取某种具有所有 ID、nt 名称、字母作为属性的对象的列表，然后，基于这些，我可以选择我需要的分区。

PS 我尝试使用 winsys._kernel32 模块中的 FindFirstVolume/FindNextVolume，但这会返回某种带有 GUID 的 ID……这不正是我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T22:10:53.977

```
import win32file

win32file.QueryDosDevice('E:') 
```

# android - 构建为 APK 的库项目依赖项

> ID：14797739
> 
> 赞同：0
> 
> 时间：2013-02-10T12:30:22.913
> 
> 标签：android, eclipse, build, compilation

我在我的项目中使用了一个外部库。

我从 github 下载了代码并将项目添加到我的 eclipse 工作区。进入我的 MainApp 后，我将项目文件夹添加为库。

每次我编译 MainApp 时，依赖项也会被构建为 APK。当我在另一个项目中使用外部库时，这是相同的行为。为什么会发生？

> [2013-02-09 20:57:50 - MainApp] 安装 MainApp.apk...
> [2013-02-09 20:58:25 - MainApp] 成功！
> [2013-02-09 20:58:25 - MainApp] 找到项目依赖项，安装：AndroidBillingLibrary
> [2013-02-09 20:58:25 - AndroidBillingLibrary] 将 AndroidBillingLibrary.apk 上传到设备 'emulator-5556'
> [2013-02 -09 20:58:26 - AndroidBillingLibrary] 安装 AndroidBillingLibrary.apk...
> [2013-02-09 20:58:29 - AndroidBillingLibrary] 成功！
> [2013-02-09 20:58:29 - MainApp] 在设备模拟器 5556 上启动活动 de.MainAppapp.activities.SplashActivity
> [2013-02-09 20:58:31 - MainApp] ActivityManager：开始：Intent { act= android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=de.MainAppapp/.activities.SplashActivity }

![](../Images/bdd7bcc321b04ad87ef3bf39cc893293.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T02:33:03.663

我有类似的问题，到目前为止我有以下解决方案：

1.  将外部库标记为库项目（如图所示）
2.  清理所有项目并等待您的主应用程序项目使用外部库自行构建
3.  取消标记外部库上的“是库”检查
4.  现在您可以安装您的应用程序

在安装时它会寻找外部库的 APK 并且它可以很容易地找到它，因为它不再是库项目。但是如果它仍然被标记，它就找不到该库的 apk 文件。无论如何，这就是我欺骗它的方式。但我确信有更好的解决方案，只是我还没有弄清楚！

# php - 如何定位数组的定义范围

> ID：14797741
> 
> 赞同：-1
> 
> 时间：2013-02-10T12:30:42.460
> 
> 标签：php, javascript, html, forms, dom

我下面的脚本将从特定 URL 中获取完整的链接列表，以用于我的 dom 刮板。但是有些列表可以达到 1000 多个，所以我希望能够手动设置要实际抓取的链接。就像我输入从链接 50 开始并在列表中的链接 100 结束一样。我该怎么做？

```
<form action="" method="POST">
    <label>Url to scrape: </label>
    <input type="text" name="url_scrape" id="url-scrape" />
    <input type="submit" value=" Scrape now " />
    <br />

    <input type="hidden" name="scrape" value="yes" />
    <br />

</form>
<br />
<br />
<?php

if( $_POST['scrape'] != 'yes' )
    return;

include('simple_html_dom.php');

function strim( $input ){

    $st = explode( '$', $input );

    return (float)str_replace( array(' ',','),array('',''), $st[1] );

}

$url_scrape = $_POST['url_scrape']; 

if( $url_scrape == '' )
    return; 

$BrowsebyLetter = file_get_html( $url_scrape );

$links = $BrowsebyLetter->find('.Results a');

?>
<h1 id="patient">Please be patient while scraping data</h1>

<div id="scrape-progress">
    <div id="scrape-progress-ctx">0%</div>
</div>
<br />
<br />
<br />
<div id="progress-txt"></div>
<br />
<br />
<button id="retry" onclick="iframe.src = ">Retry if not continue</button>
<iframe src="" id="cacheLoad"></iframe>
<script type="text/javascript">
    var total = <?php echo count($links); ?>;
    var ctx = document.getElementById('scrape-progress-ctx');
    var iframe = document.getElementById('cacheLoad');
    var prx = document.getElementById('progress-txt');
    var pt = document.getElementById('patient');
    var retry = document.getElementById('retry');
    var currentLink = '';
    var links = [
<?php
    foreach( $links as $link ){

        echo "'".$link->href."',";

    }
?>'Complete scrape <?php echo count($links); ?> links'  ];
    function progress( cur ){
        ctx.style.width = Math.ceil((cur/total)*100)+'%';
        ctx.innerHTML = Math.ceil((cur/total)*100)+'%';
    };
    function exe( i ){
        progress( i );
        if( links[i] != 'Complete <?php echo count($links); ?> links' )
        {
            currentLink = window.location+'&target='+links[i].split('Job=')[1]+'&cou='+(i+1);
            iframe.src = currentLink;
        };  
        if( i==total ){
            pt.innerHTML = 'Successful';
            pt.style.color = 'green';
            retry.style.display = 'none';
            alert('Scrape process is complete');
        };  
        prx.innerHTML = '<strong>Status: </strong>'+ links[i];
    };
    exe( 0 );
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T12:35:58.663

尝试将此添加到您的循环所在的位置：

```
 var links = [
<?php
    $a = 0;
    foreach( $links as $link ){
        $a++;
        if(($a > 50) && ($a < 100)){
            echo "'".$link->href."',";
        }
    }
?> 
```

它将检查链接是否在 50 到 100 之间，如果是，它将打印出来。希望我有所帮助:)

# javascript - App Engine OAuth 提供程序 CORS

> ID：14797744
> 
> 赞同：2
> 
> 时间：2013-02-10T12:30:49.337
> 
> 标签：javascript, google-app-engine, oauth, cors

我设置了一个小型 App Engine 网络应用程序，它为特定任务提供 API。我的目标是使用静态 Web 前端和几个本机客户端应用程序连接到此。对于身份验证，我使用内置的 OAuth 提供程序。

客户端的消费者令牌是使用[Google APIs Console](https://code.google.com/apis/console)创建的。

用于 API 测试的 ruby​​ 脚本已成功验证并能够从受 OAuth 保护的 API url 请求数据。

但是，尝试`/_ah/OAuthGetRequestToken`从不同的主机访问 using javascript 会导致 CORS 安全异常：

> Access-Control-Allow-Origin 不允许来源[http://exampledomain.nl 。](http://exampledomain.nl)

托管 html/javascript 的域已`JavaScript origins`在 API 控制台的使用者字段中指定。我已经验证它与 CORS 错误所抱怨的域完全匹配。

*   App Engine OAuth 是忽略了`JavaScript origins`还是我在这里遗漏了什么？
*   或者是否可以通过另一种方式向应用引擎 OAuth 验证（静态）客户端 javascript 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:12:43.637

您的用例似乎很适合[Google Cloud Endpoints](http://endpoints-trusted-tester.appspot.com/)。直接与 Endpoints 一起工作的 Google API 客户端库将为您的应用程序处理铸造令牌的详细信息。Endpoints 本身也支持 CORS。

# linux - Why does backslash '\' work so differently in linux?

> ID：14797745
> 
> 赞同：0
> 
> 时间：2013-02-10T12:30:49.470
> 
> 标签：linux, sed

When I put single quotes around backslash like this

> echo '\'

it prints the backslash, it does not care for escaping.

but when I use the same thing in sed like this

> sed 's/\/a/g' : trying to replace backslash with a

or in case of grep

> echo '\\//' |grep '\', it does not work and it requires escaping as well.

why does this backslash need to be escaped? I mean inside all of these lose their meaning right?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T12:35:31.843

The problem with backslash is that it has many special meanings, for multiple tools and multiple contexts.

Within single quotes, it loses special meaning for your *shell* (please learn to tag your questions with its name when it's relevant or when you're unsure), but it retains special meaning for `sed` (it is special for *regular expression* syntax, so it's expected for `sed` and `grep`)

Usually you can *escape* a backslash instead of *quoting* it. It doesn't necessarily make things readable, but in some contexts, it can. That's how I grep a literal `\` without quotes:

```
grep \\\\ 
```

Shell turns `\\\\` into `\\`, and `\\` in regular expression means literal `\`.

# android - Android文件夹的读/写权限

> ID：14797746
> 
> 赞同：6
> 
> 时间：2013-02-10T12:30:57.100
> 
> 标签：android, android-sdcard, read-write

我正在做一个新的安卓应用程序。我想在 sdcard 中的“Android”文件夹中创建一个文件夹。在此之前，我想检查该文件夹是否具有读/写权限。我怎么能得到那个？谁能帮我做到这一点。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-10T12:34:00.117

你用老式的 java 方式来做。创建一个文件对象并调用`canWrite()`and `canRead()`。

```
File f = new File("path/to/dir/or/file");
if(f.canWrite()) {
    // hell yeah :)
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-10T13:30:58.580

要在 Android 文件夹中创建文件夹，最好的方法是：

```
 File path = getExternalFilesDir(); 
```

这将是您自己的目录，因此如果您对此有权限，如果外部存储可用，您将能够读/写它。要检查这一点，请使用以下代码：

```
boolean mExternalStorageAvailable = false;
boolean mExternalStorageWriteable = false;
String state = Environment.getExternalStorageState();

if (Environment.MEDIA_MOUNTED.equals(state)) {
    // We can read and write the media
    mExternalStorageAvailable = mExternalStorageWriteable = true;
} else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
    // We can only read the media
    mExternalStorageAvailable = true;
    mExternalStorageWriteable = false;
} else {
    // Something else is wrong. It may be one of many other states, but all we need
    //  to know is we can neither read nor write
    mExternalStorageAvailable = mExternalStorageWriteable = false;
} 
```

编写所需的权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# java - 程序抛出 IllegalThreadStateException

> ID：14797747
> 
> 赞同：0
> 
> 时间：2013-02-10T12:30:59.650
> 
> 标签：java

在我的乒乓球比赛中，每个对象（球和两个球拍）都在独立线程中运行。

```
static Ball b = new Ball(195, 145);

Thread ball = new Thread(b);
Thread paddle1 = new Thread(b.paddle1);
Thread paddle2 = new Thread(b.paddle2);
public void startGame(){
    gameStarted = true;
    ball.start();
    paddle1.start();
    paddle2.start();
} 
```

当我按下 ESC 并再次按下 ESC 时，我想将游戏设置为暂停 - 继续游戏。所以在 keyPressed 事件中我已经这样做了

```
 if (e.getKeyCode() == KeyEvent.VK_ESCAPE){
            if (gameStarted) {
                gameStarted = false;
                ballCurrentX = b.x; //save all states
                ballCurrentY = b.y;
                ballXDirection = b.xDirection;
                ballYDirection = b.yDirection;
                p1Score = b.p1Score;
                p2Score = b.p2Score;
                p1CurrentY = b.paddle1.y;
                p2CurrentY = b.paddle2.y;
                try {
                    ball.interrupt();
                    ball.join();
                    paddle1.interrupt();
                    paddle1.join();
                    paddle2.interrupt();
                    paddle2.join();
                } catch (InterruptedException e1) {
                    e1.printStackTrace();
                }   
            }
            else {
                gameStarted = true;
                continueGame();
            }
        } 
```

继续游戏 - 我重新启动所有线程，但为之前游戏状态的对象设置参数

```
public void continueGame(){
    gameStarted = true;
    b = new Ball(ballCurrentX, ballCurrentY);
    b.xDirection = ballXDirection;
    b.yDirection = ballYDirection;
    b.p1Score = p1Score;
    b.p2Score = p2Score;
    b.paddle1.y = p1CurrentY;
    b.paddle2.y = p2CurrentY;
    ball.start();
    paddle1.start();
    paddle2.start();
} 
```

但程序抛出`IllegalThreadStateException`，游戏无法继续。有什么问题？它不会停止线程吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T12:35:29.660

线程停止/中断后，您无法重新启动它。但是没有什么能阻止你创建一个新线程并启动它。

[一个 SO 答案，列出了您可以使用的一些选项](https://stackoverflow.com/a/1881761/340637)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T12:35:30.023

> 继续游戏 - 我重新启动所有线程......

您不能重新启动 Java 线程。javadoc for[`Thread.start()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#start%28%29)说明了这一点：

> *“多次启动一个线程是不合法的。特别是，一个线程一旦完成执行就可能不会重新启动。”*
> 
> *“抛出：`IllegalThreadStateException`- 如果线程已经启动。”*

您需要创建新的线程对象并启动它们，或者想办法告诉现有线程在被中断时进入应用程序定义的“暂停”状态，并在那里等待直到它们被告知“恢复”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T12:37:37.153

线程被终止后不允许再次启动。从文档中：

“多次启动一个线程是不合法的。特别是，一个线程一旦完成执行就可能不会重新启动。”

创建线程的新实例并启动它是合法的。但是，这不会达到“暂停”的效果，除非您确保提供给新线程的状态准确地表示暂停状态。

# c++ - 在 .h 文件与 .cpp 文件中实现内联函数

> ID：14797755
> 
> 赞同：3
> 
> 时间：2013-02-10T12:32:08.450
> 
> 标签：c++, boost

这之间的实际区别是什么

```
//Foo.h
struct Foo {
  void bar() {
    //lots of complex statements
  }
}; 
```

还有这个

```
//Foo.h
struct Foo {
  void bar();
};
//Foo.cpp
inline void Foo::bar() {
  //lots of complex statements
} 
```

在最终编译的程序中，这两种方法是否有任何差异，或者是否保证相同？

还请根据良好的编码实践/经验就应该选择哪一个以及为什么做出一些评论。请注意“许多复杂的陈述”。这些东西实际上应该在头文件中的任何特定情况？AFAIK，大多数增强库都是仅标头的-他们为什么选择这样做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T12:34:11.897

> **在最终编译的程序中，这两种方法是否有任何差异，或者是否保证相同？**

两者都是一样的。
在类/结构体内部定义的成员函数是隐式的`inline`。
但是，在第一个示例中，该函数可以`inline`在包含此标头的每个翻译单元中为 d。在第二个示例中，该函数只能内联在定义该函数的 cpp 文件中。这是因为编译器需要在函数调用时查看函数的定义以尝试使其内联。

要在评论中回答 Q：

假设您将函数的定义标记为`inline`cpp 文件中`A.cpp`，并尝试从另一个 cpp 文件中调用此函数，`B.cpp`. 您最终会收到*“未定义的外部符号”*错误，这是因为在 C 和 C++ 中，每个[翻译单元](https://stackoverflow.com/questions/1106149/what-is-a-translation-unit-in-c)都是单独编译的，并且`A.cpp`在编译`B.cpp`.
如果仅从定义函数的位置调用该函数`A.cpp`，则该定义在同一个文件中可用，并且编译器和链接器很乐意编译并链接到它。

**C++03 7.1.2 函数说明符：**
**第 3 段：**

> 在类定义中定义的函数是内联函数。内联说明符不应出现在块作用域函数声明中。

* * *

> **就良好的编码实践/经验而言，应该选择哪一个？为什么？**

类定义是作为类用户的接口。该接口的用户无需查看功能的实现细节。他们只需要看到如何使用这个接口。通过将函数定义（*你提到的很长的一个*）放在类中，你向用户提供了不必要的细节，从而使他们很难看到他们真正需要看到的内容.
解决此问题的最佳方法是：

*   `inline`在没有关键字 &的类定义中声明函数
*   将带有关键字的函数定义放在`inline`类主体之外。

好读：
[对于在类外部定义的内联成员函数，最好将 inline 关键字放在类主体内的声明旁边，或者放在类主体外部的定义旁边，还是两者兼而有之？](http://www.parashift.com/c++-faq/where-to-put-inline-keyword.html)

* * *

> **AFAIK，大多数增强库都是仅标头的-他们为什么选择这样做？**

大多数 Boost 库都是模板库，对于基于模板的库，编译器需要在使用时查看定义，因此模板函数需要内联。
好读：
[为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T12:38:15.773

就其功能而言，这两者是相等的。但是，后者只能内联到`Foo.cpp`文件中。

# javascript - 用图像替换收音机

> ID：14797756
> 
> 赞同：0
> 
> 时间：2013-02-10T12:32:08.697
> 
> 标签：javascript, image, forms, replace, radio

我想用图像替换单选按钮，我找到[了这段](https://stackoverflow.com/questions/3896156/how-do-i-style-radio-buttons-with-images-laughing-smiley-for-good-sad-smiley)代码，但它只适用于一个单选组。有没有人有另一个代码。我想做的事：[小提琴](http://jsfiddle.net/AnxfH/)。

```
//Group 1
<input type="radio" name="site" id="so" value="stackoverflow" /><label for="so"><img src="http://sstatic.net/stackoverflow/img/favicon.ico" alt="Stack Overflow" /></label>
<input type="radio" name="site" id="sf" value="serverfault" /><label for="sf"><img src="http://sstatic.net/serverfault/img/favicon.ico" alt="Server Fault" /></label>
<input type="radio" name="site" id="su" value="superuser" /><label for="su"><img src="http://sstatic.net/superuser/img/favicon.ico" alt="Super User" /></label>
//Group 2
<input type="radio" name="second" id="sd" value="superuser" /><label for="su"><img src="http://sstatic.net/superuser/img/favicon.ico" alt="Super User" /></label>
<input type="radio" name="second" id="sc" value="superuser" /><label for="su"><img src="http://sstatic.net/superuser/img/favicon.ico" alt="Super User" /></label> 
```

谁能给我一个Javascript代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T12:59:23.773

第一件事是您已经更改`id`了第二组中收音机的属性，但标签的`for`属性设置为第一组中元素之一的 id。由于您使用 CSS 隐藏了收音机，因此您看不到这一点，但单击第二组中的标签会将第一组中的收音机标记为选中。请记住仔细复制和粘贴代码，因为您会在长时间不更新所需的所有内容的情况下寻找由复制和粘贴引起的错误。

第二件事 -`siblings()`方法返回元素的所有兄弟，因此在您当前的 HTML 代码中，您可以看到**所有**收音机都是兄弟。我建议你用，例如，包裹每个组`div`，这样它们就会被分开，并且 JS 代码将是相同的。

更新了问题的 HTML：

```
<div>
    <input type="radio" name="site" id="so" value="stackoverflow" /><label for="so"><img src="http://sstatic.net/stackoverflow/img/favicon.ico" alt="Stack Overflow" /></label>
    <input type="radio" name="site" id="sf" value="serverfault" /><label for="sf"><img src="http://sstatic.net/serverfault/img/favicon.ico" alt="Server Fault" /></label>
    <input type="radio" name="site" id="su" value="superuser" /><label for="su"><img src="http://sstatic.net/superuser/img/favicon.ico" alt="Super User" /></label>
</div>

<div>
    <input type="radio" name="second" id="sd" value="superuser" /><label for="sd"><img src="http://sstatic.net/superuser/img/favicon.ico" alt="Super User" /></label>
    <input type="radio" name="second" id="sc" value="superuser" /><label for="sc"><img src="http://sstatic.net/superuser/img/favicon.ico" alt="Super User" /></label>
</div> 
```

更新的小提琴在[这里](http://jsfiddle.net/AnxfH/1/)。如果您想确定收音机是否被正确选中，请注释掉应用 CSS 来隐藏收音机的行以查看其行为：

```
//$('#sites input:radio').addClass('input_hidden'); 
```

# c++ - Is there a standard function in C++, that takes an argument and returns the same?

> ID：14797765
> 
> 赞同：0
> 
> 时间：2013-02-10T12:33:09.023
> 
> 标签：c++, function

I want the following function to be used for some binding purpose.

```
template <class T>
T fun(T arg) { return arg; } 
```

Is there a standard C++ function available to do this. Or do I have to write my own?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T13:12:02.127

我可能会这样写：

```
template <typename T>
auto identity(T && x) -> decltype(std::forward<T>(x))
{
    return std::forward<T>(x);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T12:39:58.523

不，没有，但你已经完成了。

不过，我会调用它`id`而不是`fun`，因为它是身份函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T13:15:47.850

如上所述，您可以简单地使用#define fn(x) (x)。但是当你将复杂的数据结构传递给你的“fn”时，事情会变得非常丑陋，让我们很难用误导性的编译器消息来追溯错误。

但是，如果您的绑定问题是一些线程同步问题。那么答案将是如何将线程 API/库用于此类事情。例如，对于 Ocaml，它类似于 >>= res 我们绑定的地方，直到我们找到用 res 表示的东西的结果。让我知道您正在使用的库的名称是否如此？

玩得开心。

# asp.net - COM port access via website

> ID：14797767
> 
> 赞同：0
> 
> 时间：2013-02-10T12:33:18.183
> 
> 标签：asp.net, serial-port

I have been given the task of creating a web application that will communicate with an RS-232 barcode scanner, an RS-232 customer display, print to a receipt printer and open a cash drawer.
I have VS2012 and was going to write the application in ASP.NET.
HOWEVER, through what I have read in this forum, it's not that easy to communicate with RS-232 from a website.
The RS-232 devices are connected to the client's machine and NOT the server.

What can I use to communicate with these devices if it's a web application?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T13:02:39.777

已签名的 Java 小程序可以访问本地硬件。ActiveX 组件也是如此，可能还有银光。网页可以使用 JavaScript 与这些事物进行通信。

您可能只针对 Windows 客户端，因此您可能可以使用市售的 POS ActiveX 组件（如果有的话）。

# webrtc - 我们可以将 google stun 服务器（nodejs webrtc.io-client 的默认设置）用于商业应用程序吗？

> ID：14797780
> 
> 赞同：5
> 
> 时间：2013-02-10T12:34:23.190
> 
> 标签：webrtc, stun

[https://npmjs.org/package/webrtc.io-client](https://npmjs.org/package/webrtc.io-client)说：

> 用法
> 
> ```
> rtc.createStream({"video": true, "audio":true}, function(stream){
>   // get local stream for manipulation
> }
> rtc.connect('ws://yourserveraddress:8001', optionalRoom);
> // 
> ```
> 
> 然后一堆回调可用
> 
> **您可以通过调用 rtc.SERVER = "STUN stun.l.google.com:19302" 设置 STUN 服务器并设置您的服务器。库使用的默认 STUN 服务器** 是来自 google 的服务器。

我也可以为我的商业应用程序使用相同的 STUN 服务器吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T18:27:11.737

## 你可以吗？

是的。

## 你应该？

不。

在未经同意的情况下使用任何第三方都是危险的，将来可能会让您被烧毁。

## 一些历史：

谷歌此前曾发布[过 API 限制/价格变化](http://www.theregister.co.uk/2011/10/27/google_maps_api_no_longer_free/)导致很多人的商业模式受损的事实。

# mysql - How to use regex in the following query?

> ID：14797782
> 
> 赞同：0
> 
> 时间：2013-02-10T12:35:20.663
> 
> 标签：mysql, regex

There is a column in my DB where data is stored like:

```
/accounts/2/xyz/a
/accounts/2/xyz/b
/accounts/3/xyz/a
/accounts/3/xyz/b
/accounts/5/xyz/a
/accounts/5/xyz/b 
```

Now, I have list of selected accounts let's say account_id=[2,5]. I want to fetch data for the following keys `/accounts/<acount_id>/xyz/a` So, what will be the optimal query for fetching such data? For now, I am generating keys for the selected account_id list and firing query over that but I don't want to do that.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:42:36.190

```
select * FROM  tbl where accountNumber like '/accounts/%/xyz/a' 
```

参考[http://dev.mysql.com/doc/refman/5.1/en/regexp.html](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)

# scala - Getting the companion object for my Actor

> ID：14797793
> 
> 赞同：0
> 
> 时间：2013-02-10T12:35:57.930
> 
> 标签：scala

When I check the scala doc for Actor react method, I see: See the companion object's react method. Is this something I can only know runtime? Or how do I find out who the campanion object is?

Note: I know campanion objects are the object with the same name of the corresponding class. So just looking to find out what's going on in this particular case.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:43:14.480

Paulp 在运行时做了一些实验来实现这一点，请看一下这个线程： [https ://groups.google.com/d/topic/scala-language/b9oYVIX8O2c/discussion](https://groups.google.com/d/topic/scala-language/b9oYVIX8O2c/discussion)

# php - preg_replace 可选匹配

> ID：14797799
> 
> 赞同：0
> 
> 时间：2013-02-10T12:36:16.607
> 
> 标签：php, preg-replace

好吧..我自己创建了一个博客，并且我为我的“POSTS”创建了一个 preg_replace，然后如果我输入：

```
[code="php"]foobar[!code] 
```

他打印

```
<script type="syntaxhighlighter" class="brush: $1; html-script: true"><![CDATA[ foobar ]]></script> 
```

这个 preg_replace 一切运行正常：

```
/\[code="(.*?)"\]/ 
```

（作为前缀）

```
/\[!code\]/ 
```

（对于后缀）

但现在我想添加一个额外的选项，但检查用户是否已键入......这个想法是这样的：

```
[code="php" [1,3]]
foo
[!code] 
```

返回这个：

```
<script type="syntaxhighlighter" class="brush: $1; highlight: [1,3]; html-script: true">... 
```

否则，如果没有 $2（用户只输入了 [code="php"]），则返回：

```
<script type="syntaxhighlighter" class="brush: $1; html-script: true"> 
```

如何在同一个 preg_replace 中创建此语句？在此先感谢并为糟糕的英语道歉。

**编辑**

我已经用 *preg_replace_callback* 实现了我的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T13:20:05.863

你需要使用 preg_replace_callback 来做你想做的事：

```
function format_prefix($matches)
{
    return '<script type="syntaxhighlighter" class="brush: '
        . $matches[1]
        . (isset($matches[2]) ? '; highlight: ' . $matches[2] : '')
        . '; html-script: true">';
}

$s = '[code="php"]foobar[!code]'."\n".'[code="php" [1,3]]foobar[!code]';

echo preg_replace_callback('/\[code="(.*?)"(?:\s+(\[\d+,\d+\]))?\]/', 'format_prefix', $s); 
```

# jquery - jQuery 问题 - $(this).parent().remove();

> ID：14797803
> 
> 赞同：-1
> 
> 时间：2013-02-10T12:36:45.030
> 
> 标签：jquery

我在这里找到了许多问题的解决方案，但仍然无法找到这个问题的答案。我有一个容器，我正在使用 jQuery 在其中动态添加另一个元素。在添加的 div 里面我有一个按钮，所以当我单击该按钮时我想要删除该按钮。这是我到目前为止没有成功的尝试。

HTML

```
<div id="menuContainer">
<ul id="menu">
    <li><a href="#" id="addColumn">add Element (max 5)</a></li>
    <li><a href="#" id="addCard">---</a></li>
    <li><a href="#" id="delColumn">---</a></li>
    <li><a href="#" id="delCard">---</a></li>
    <li><a href="#" id="tblReset">---</a></li>
</ul>
</div>
<div id="columns" style="width: 1000px;"></div> 
```

jQuery：

```
$(function() {
var columns = $('.column').size();

$('a#addColumn').click(function() {
    if (columns < 5) {                  
    var columnName = prompt('Внесете назив за колоната: ');
    var temp = columns + 1;
    $('<div class="column">' + columnName + '<button id="' + temp + '" style="float:right;" class="btnRemoveColumn">X</button></div>').appendTo('div#columns');
    columns++;
}
else { 
    alert("Имате максимален број на колони во таблата");
}
});

$(".btnRemoveColumn").click(function(){
    $(this).parent().remove();
});              
}); 
```

所有带有 CSS 的东西都可以在外部网站 Fiddle 上试用，所以看看所有（不）是如何工作的。[链接在这里](http://jsfiddle.net/cXLqK/20/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T12:38:54.650

```
$(document).on("click", ".btnRemoveColumn", function() { 
```

对于动态元素，应该委托事件。

# ruby-on-rails - 导轨控制台不工作

> ID：14797805
> 
> 赞同：1
> 
> 时间：2013-02-10T12:36:59.693
> 
> 标签：ruby-on-rails, capistrano, unicorn, rbenv

我正在尝试打开 Rails 控制台并获取

```
deployer@microv:~$ rails console
-bash: rails: command not found 
```

我的环境 ubuntu 12.10 postgresql rbenv-installer unicorn

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T12:49:44.523

由于您几乎没有提供有关您的环境以及您在何处以及如何使用 Rails 的信息，因此有一些提示：

```
$ cd path/to/rails/app
$ rails console 
```

`rails console`仅适用于构建您的 rails 应用程序的目录。你有一个，不是吗？

```
$ cd path/to/rails/app
$ bundle exec rails console 
```

使用 bundler 时，安装在该 bundle 中的 gem 的二进制文件只能通过 command 获得`bundle exec`。您可能已经使用 bundler 安装了 rails 本身。你是否？

```
$ cd path/to/rails/app
$ rvm list gemsets
$ rvm use ruby-1.x.y@foo
$ rails console 
```

使用 rvm 时，rails 只能安装在一个 Gemset 中。然后，您必须激活该 gemset 才能访问宝石（及其垃圾箱）。你在使用 RVM 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T13:44:50.973

You seem to be using rbenv. When installing/removing gems bundled with executables, like `rails` and many others, you have to do `rbenv rehash`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T13:41:03.017

找到解决办法，重启shell

```
$ exec $SHELL -l 
```

# python - 通过 zmq ipc 发送现有的 dict

> ID：14797806
> 
> 赞同：8
> 
> 时间：2013-02-10T12:36:59.907
> 
> 标签：python, zeromq

我正在尝试通过 zmq ipc 套接字发送现有的 dict，我可以使用此代码发送一个字符串，但我不能发送一个 dict 对象

```
import zmq, datetime

d = {0: ('356612022462768', 'EVENT', 0, '2012-12-26 15:50:16', -20.22216, -70.13723, 6.44, 134.0, 1, 2, '18743230', datetime.datetime(2013, 2, 10, 9, 6, 2, 362734))}

if __name__ == "__main__":
    context = zmq.Context()
    publisher = context.socket(zmq.PUB)
    publisher.connect("ipc://shared")
    while True:
        publisher.send( d )
        time.sleep( 1 ) 
```

* * *

```
TypeError: {0: ('356612022462768', 'EVENT', 0, '2012-12-26 15:50:16', 
           -20.22216, -70.13723, 6.44, 134.0, 1, 2, '18743230', 
           datetime.datetime(2013, 2, 10, 9, 6, 2, 362734))} 
does not provide a buffer interface. 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-10T12:59:30.247

只能通过开箱即用的 ZeroMq 发送字符串或字节数组。在将其他任何内容传递给 ZeroMq 以进行在线传输之前，都需要对其进行序列化。

您可以使用任何您喜欢的方式对其进行序列化，例如 Protocol Buffers、JSON 或 Message Pack。请注意，任何接收者都需要能够使用相同的协议对数据进行反序列化。

[您可以在此处](https://github.com/zeromq/pyzmq/blob/master/examples/serialization/serialsocket.py)找到有关如何将各种序列化技术（包括 numpy 数组）与 pyzmq 结合使用的示例。它们是[pyzmq 源代码](https://github.com/zeromq/pyzmq)的一部分。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-10T13:03:48.193

您需要将数据序列化，根据用例可能为 JSON。你不能按原样发送，你需要一个字符串表示

```
import json
myjson = json.dumps(d) 
```

但是 datetime 对象不能简单地转换为 json，因此您必须单独处理，这篇文章将对此有所帮助：[JSON datetime between Python and JavaScript](https://stackoverflow.com/questions/455580/json-datetime-between-python-and-javascript)

# python - 带有三个参数的 Python 请求库 HTTPBasicAuth

> ID：14797809
> 
> 赞同：15
> 
> 时间：2013-02-10T12:37:34.793
> 
> 标签：python, http

我正在尝试使用[Instapaper 的简单开发人员 api](https://www.instapaper.com/api/simple)使用 python 和请求库向我的书签添加一个 url。验证用户名和密码一切正常。

```
import requests
from requests.auth import HTTPBasicAuth
requests.get('https://www.instapaper.com/api/authenticate', auth=HTTPBasicAuth('username', 'password')) 
```

但是在尝试使用 api 添加书签时：

```
 requests.get('https://www.instapaper.com/api/add', auth=HTTPBasicAuth('username', 'password','websiteUrl')) 
```

我得到错误：

```
File "instantbookmark.py", line 3, in <module>
   getA = requests.get('https://www.instapaper.com/api/add',     auth=HTTPBasicAuth('username', 'password','websiteUrl'))
TypeError: __init__() takes exactly 3 arguments (4 given) 
```

我认为这是因为 HTTPBasicAuth 不能接​​受第三个参数，有人知道这样做的方法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-10T12:41:08.790

`HTTPBasicAuth()`只*接受*用户名和密码参数。没有第三个论点，句号。

HTTP Basic Authentication 为请求添加了额外的标头；此信息与 GET 或 POST 参数分开保存。当您使用这种形式的身份验证时，您也不需要向 API 方法传递任何`username`和`password`参数。

要添加书签，请将`url`参数作为 POST 或 GET 数据参数传入：

```
 requests.post('https://www.instapaper.com/api/add', data={'url': 'websiteUrl'}, auth=HTTPBasicAuth('username', 'password')) 
```

要么做，`requests.get()`要么`requests.post()`做。

# c++ - 为什么我的结构的成员没有使用 `{}` 正确初始化？

> ID：14797810
> 
> 赞同：14
> 
> 时间：2013-02-10T12:37:36.607
> 
> 标签：c++, initialization, c++-faq

我有以下代码：

```
#include <iostream>

struct T
{
   int a, b, c;
};

int main()
{
   T t = {0};
   std::cout << t.a << ',' << t.b << ',' << t.c << '\n';
} 
```

[输出](https://ideone.com/JfLwX9)：

```
0,0,0 
```

多年来，这段代码在关键的生产环境中愉快地运行，服务于一个重要的功能，项目的需求发生了变化，我需要输出为`1,1,1`.

所以，我`{0}`改为`{1}`：

```
#include <iostream>

struct T
{
   int a, b, c;
};

int main()
{
   T t = {1};
   std::cout << t.a << ',' << t.b << ',' << t.c << '\n';
} 
```

[输出](https://ideone.com/GPYIOn)：

```
1,0,0 
```

`1,1,1`相反，我期待。

为什么我`struct`的成员没有被正确初始化？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-10T12:37:36.607

当您编写`= {0}`时，仅显式初始化*第一个成员*；其余部分根据标准隐式初始化为零，因此乍一看，您*似乎*`0`使用您编写的 明确初始化了所有成员，*但您没有*。

你写的那个地方`0`只影响第一个成员。因此，当有一天，您将其更改为`1`认为它会更改所有成员时，您就会遇到一个错误，就像这里一样。*这是误导/危险/愚蠢/脆弱的代码。*

出于这个原因，如果没有随附的解释性评论，`= {0}`我的团队将无法通过代码审查。你最初应该写：

```
T t = {}; 
```

现在，要根据新要求解决您的问题，您应该编写：

```
T t = {1,1,1}; 
```

或者，如果您不介意`struct`可能失去 POD 特性，请提供`T`构造函数。

* * *

### 正式的措辞

> `[C++11: 8.5.1/2]:`当聚合由初始化列表初始化时，如 8.5.4 中所指定，初始化列表的元素被视为聚合成员的初始化，按递增的下标或成员顺序。每个成员都是从相应的*initializer-clause*复制初始化的。如果*initializer-clause*是一个表达式并且需要一个窄化转换 (8.5.4) 来转换该表达式，则程序是非良构的。*[..]*
> 
> `[C++11: 8.5.1/6]:`如果*初始化器子句*的数量超过要初始化的成员或元素的数量，则*初始化器列表*是格式错误的。
> 
>  *`[C++11: 8.5.1/7]:` **如果列表中的*初始化子句*少于聚合中的成员，则每个未显式初始化的成员都应从空的初始化器列表中初始化**（8.5.4）。*

# java - jsoup getElements MatchingOwn Text（其单一方法的限制）识别html元素的示例

> ID：14797813
> 
> 赞同：0
> 
> 时间：2013-02-10T12:37:41.907
> 
> 标签：java, jsoup

谁能帮我举个例子，`getElementsMatchingOwnText`在 jsoup 中使用来识别 html 页面中的确切元素，可能有两个文本，如状态，新状态，如果它首先出现，则方法应该状态作为参数而不是新状态传递。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T13:53:28.780

这是你需要的吗？

**示例 html：**

```
<html>
 <head></head>
 <body>
  <p>new status</p>
  <p>status</p>
 </body>
</html> 
```

**例子：**

```
 Document doc = ...

    for( Element element : doc.getElementsMatchingOwnText("(?i)^status$") )
    {
        System.out.println(element);
    } 
```

**输出：**

```
<p>status</p> 
```

*使用[Jsoup Selector API 的](http://jsoup.org/cookbook/extracting-data/selector-syntax)替代方法：*

```
for( Element element : doc.select("p:matchesOwn((?i)^status$)") ) 
```

# c# - Wpf RichTextBox 换行问题

> ID：14797814
> 
> 赞同：2
> 
> 时间：2013-02-10T12:37:50.910
> 
> 标签：c#, wpf, richtextbox, word-wrap

`WPF`当我收到如下文本时，我遇到了's中的文本换行问题`RichTextBox`：

```
 TextRange tr = new TextRange(rtb.Document.ContentStart,
                               rtb.Document.ContentEnd); 
```

`tr.Text`没有任何“\r\n”，但在视觉控制中它看起来应该是（当输入到达`RichTextBox`边界时它会换行（插入行尾））。

我像这样创建 RichTextBox：

```
 <RichTextBox Name="Rtb"  AcceptsReturn="True" AcceptsTab="True"   VerticalAlignment="Stretch" HorizontalAlignment="Stretch"  
    HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" Height="100" Margin="15,125,5,45"  Width="272">
            <FlowDocument  LineHeight="1" IsColumnWidthFlexible="true" >
                <Paragraph LineStackingStrategy="MaxHeight">
                    <Run Text="RichTextBox"/>
                </Paragraph>
            </FlowDocument>
 </RichTextBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T14:52:09.007

您必须将 RichTextBox 放在 ScrollViewer 中。

```
<ScrollViewer>
   <RichTextBox>
        ...
   </RichTextBox>
</ScrollViewer> 
```

# visual-studio-2012 - 有关 Visual Studio 中项目文件的信息？

> ID：14797817
> 
> 赞同：0
> 
> 时间：2013-02-10T12:38:07.493
> 
> 标签：visual-studio-2012, windows-phone-8

我计划在 Windows Phone 8 平台上使用 directx 和 Xaml 开发 2d 游戏。我可以在visual studio“windows phone xaml and direct2d”中创建一个新项目，但是在哪里可以找到有关该项目所有文件的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:44:50.583

Windows Phone 8 不支持 Direct2D。您可以尝试在一个平面上使用 Direct3D，但 Direct3D 非常难，我不是在开玩笑！时间长了就可以画一个简单的三角形了。您应该尝试使用 XNA 来构建 2D 游戏，这对您来说会更有效率。

# plsql - 如何使用 out 参数设置 dbms_job

> ID：14797818
> 
> 赞同：0
> 
> 时间：2013-02-10T12:38:10.583
> 
> 标签：plsql, oracle10g

我正在尝试使用 dbms_jobs 并行运行一些程序，但我在执行此操作时遇到了一些问题。尝试运行以下代码时，我收到此错误

```
20:28:16 Info: Job #16 could not be executed. ORA-12011: execution of 1 jobs failed 
ORA-06512: at "SYS.DBMS_IJOB", line 469 
ORA-06512: at "SYS.DBMS_JOB", line 282 
ORA-06512: at line 1 
```

* * *

```
declare 
  ln_dummy number; 
  p_stdate CONSTANT DATE := '01-MAY-2012'; 
  p_edate  CONSTANT DATE := '31-MAY-2012'; 
  p_cdate CONSTANT DATE := '09-FEB-2013'; 
  p_key CONSTANT INTEGER:= 0; 
  p_ercode  INTEGER; 
  p_erdesc  VARCHAR2(200); 
begin 
  COMMIT; 
  DBMS_JOB.SUBMIT(ln_dummy,'MY_PROC_1('''|| p_stdate ||''','''|| p_edate ||''','''|| p_cdate||''','''|| p_key ||''', :p_ercode, :p_erdesc: );'); 
  COMMIT; 
end; 
/ 
```

p_ercode 和 p_erdesc 是 MY_PROC_1 中的输出参数。如果我尝试将其注释掉，则作业将毫无问题地运行。

我的问题是如何在不注释掉 MY_PROC_1 中的 p_ercode 和 p_erdesc 的情况下运行这项工作。

另外，有没有办法知道哪个作业正在运行以及哪个作业已经完成？类似于警报的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T16:42:15.123

也许，这会奏效吗？

```
declare 
  ln_dummy number; 
  p_stdate CONSTANT DATE := '01-MAY-2012'; 
  p_edate  CONSTANT DATE := '31-MAY-2012'; 
  p_cdate CONSTANT DATE := '09-FEB-2013'; 
  p_key CONSTANT INTEGER:= 0; 
begin 
  COMMIT; 
  DBMS_JOB.SUBMIT(ln_dummy,'
    declare 
      p_ercode  INTEGER; 
      p_erdesc  VARCHAR2(200); 
    begin
      MY_PROC_1('''|| p_stdate ||''','''|| p_edate ||''','''|| p_cdate||''','''|| p_key ||''', p_ercode, p_erdesc );
    end;
  '); 
  COMMIT; 
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T17:19:45.020

如果要记录输出，可以创建一个表：

```
SQL> create table log_table
  2  (
  3    job_id     number,
  4    start_time date,
  5    end_time   date,
  6    retcode    number,
  7    retstr     varchar2(4000)
  8  )
  9  /

Table created. 
```

然后执行作业。我制作了一个包装程序，只是为了让它更整洁一点，但如果你愿意，你可以把所有这些都放在工作中。

```
SQL> create or replace procedure my_proc_1_job(
  2    p_job    number,
  3    p_stdate date,
  4    p_edate  date,
  5    p_cdate  date,
  6    p_key    integer)
  7  is
  8    v_errcode integer;
  9    v_errdesc varchar2(32767);
 10    v_start_date date;
 11  begin
 12    v_start_date := sysdate;
 13    my_proc_1(p_stdate, p_edate, p_cdate, p_key, v_errcode, v_errdesc);
 14    insert into log_table (job_id, start_time, end_time, retcode, retstr)
 15    values (p_job, v_start_date, sysdate, v_errcode, v_errdesc);
 16    commit;
 17  end;
 18  /

Procedure created.

SQL> declare
  2    ln_dummy number;
  3    p_stdate CONSTANT varchar2(20) := '01-MAY-2012';
  4    p_edate  CONSTANT varchar2(20) := '31-MAY-2012';
  5    p_cdate CONSTANT varchar2(20) := '09-FEB-2013';
  6    p_key CONSTANT INTEGER:= 0;
  7  begin
  8    COMMIT;
  9    DBMS_JOB.SUBMIT(
 10      ln_dummy,
 11       'my_proc_1_job(
 12           JOB, to_date('''|| p_stdate ||''',''DD-MON-YYYY''),
 13           to_date('''|| p_edate ||''',''DD-MON-YYYY''),
 14           to_date('''|| p_cdate ||''',''DD-MON-YYYY''),
 15           ' || p_key || ');');
 16    COMMIT;
 17  end;
 18  /

PL/SQL procedure successfully completed.

SQL> select * from log_table;

    JOB_ID START_TIM END_TIME     RETCODE
---------- --------- --------- ----------
RETSTR
----------------------------------------------------------------------------------------------------
         4 10-FEB-13 10-FEB-13         -1
failure 
```

现在所有运行都记录在`LOG_TABLE`.

# android - 带有图像的 Android 水平类别视图

> ID：14797828
> 
> 赞同：0
> 
> 时间：2013-02-10T12:39:08.207
> 
> 标签：android, android-layout, android-imageview, android-view, android-scrollview

我正在实现一个水平滚动视图，其中的项目包含一个 ImageView 和一个 Textview

这是我的主要活动：

```
 public class MainActivity extends Activity implements OnClickListener{
    List elementlist;
    LinearLayout layout;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        elementlist=new ArrayList<Element>();

        elementlist.add(new Element("Item 1", "p1"));
        elementlist.add(new Element("Item 2", "p2"));
        elementlist.add(new Element("Item 3", "p3"));
        elementlist.add(new Element("Item 4", "p4"));
        elementlist.add(new Element("Item 5", "p5"));

        layout=(LinearLayout)findViewById(R.id.lay);

        populate_list();

    }

    private void populate_list()
    {

        Iterator<Element> i=elementlist.iterator();
        while(i.hasNext())
        {
            Element e= (Element)i.next();

            LayoutInflater inflater=(LayoutInflater)getSystemService(LAYOUT_INFLATER_SERVICE);
            View v=inflater.inflate(R.layout.list_element, null);

            ImageView iw=(ImageView)v.findViewById(R.id.imageView1);
            TextView tw=(TextView)v.findViewById(R.id.textView1);
            iw.setImageDrawable(getResources().getDrawable(getResources().getIdentifier(e.getImagename(), "drawable", this.getPackageName())));
            tw.setText(e.getDisplayname());

            layout.addView(v);
        }

    }   
} 
```

元素类：

```
public class Element {
private String displayname;
private String imagename;
public Element(String displayname, String imagename) {
    this.displayname = displayname;
    this.imagename = imagename;
}

public String getDisplayname() {
    return displayname;
}

public String getImagename() {
    return imagename;
}} 
```

活动主.xml：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <HorizontalScrollView
        android:id="@+id/horizontalScrollView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true" >

        <LinearLayout
            android:id="@+id/lay"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:orientation="horizontal" >
        </LinearLayout>
    </HorizontalScrollView>

</RelativeLayout> 
```

和listelement.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/imageView1"
        android:layout_centerHorizontal="true"
        android:background="#000000"
        android:layout_alignParentRight="true"
        android:layout_alignParentLeft="true"
        android:orientation="vertical" >

        <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#ffffff" />

    </LinearLayout>

</RelativeLayout> 
```

现在，我的情况是我有两个要求：

1.  滚动列表的大小应减小（如诺基亚 N72、N95 等图库的情况）

2.  滚动完成后，列表应该自动跳转到最近的项目并且大小再次增加，即该项目的宽度适合屏幕宽度或至少位于中心。

我怎样才能满足我的要求？

我想完全这样做

![虽然布局是静态的](../Images/7176b04085d901f15f6f10e9980b8752.png)

当用户滚动时，它应该如下所示： ![当用户滚动时](../Images/c51738ca9abd945b1bd1106bc4cae3d1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-19T18:43:48.800

> 根据您的问题，我假设尺寸减小不必与位移成正比，即您有 1 个更大的尺寸和 1 个更小的尺寸

继续我的假设，我建议您通过问题[-Gmail 三片段动画场景的完整工作示例？](https://stackoverflow.com/q/12253965/2202712)这将向您展示处理您需要的调整大小动画的四种实现

# c# - 将 C# 对象存储在 SQL Server 列中

> ID：14797834
> 
> 赞同：2
> 
> 时间：2013-02-10T12:39:59.637
> 
> 标签：c#, sql-server, store

我在 C# 中有一个类，用于存储数据（如结构）。它有子类作为成员，还有其他子类等。每个子类都包含数据（各种字符串、整数、浮点数等）

有没有办法将一个这样的 C# 对象存储在数据库中的单列中？那将是什么类型的列，我该如何使用它？

我唯一能想到的就是使用算法将我的结构转换为字节序列并将其存储在二进制类型的字段中。

然后，我将使用解码算法将其取回并再次使其成为对象。

即便如此，C#中有这样的算法可以使用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T12:41:42.810

看到这个问题 如果您愿意，您可以在 SQL Server 中使用 VARBINARY(MAX) 字段类型[。](https://stackoverflow.com/questions/1299410/can-i-save-an-object-in-a-sql-server-database)您可以在其中存储任何类型的对象，最大为 2 GB。

要访问它，您可以使用 ADO.NET - 如下所示：

```
object yourMysteryObject = (whatever you like it to be);

MemoryStream memStream = new MemoryStream();
StreamWriter sw = new StreamWriter(memStm);

sw.Write(yourMysteryObject);

SqlCommand sqlCmd = new SqlCommand("INSERT INTO TableName(VarBinaryColumn) VALUES (@VarBinary)", sqlConnection);

sqlCmd.Parameters.Add("@VarBinary", SqlDbType.VarBinary, Int32.MaxValue);

sqlCmd.Parameters["@VarBinary"].Value = memStream.GetBuffer();

sqlCmd.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T12:45:21.210

您可以使用 JSON.NET ( [http://json.codeplex.com/](http://json.codeplex.com/) ) 将对象序列化为 JSON，并将 JSON 数据存储在数据库中。当您需要使用数据重新水合对象时，可以再次使用 JSON.NET 来完成...

文档在这里，它易于使用且速度非常快：http: [//james.newtonking.com/projects/json/help/](http://james.newtonking.com/projects/json/help/)

# android - 字符串数组文本格式

> ID：14797836
> 
> 赞同：3
> 
> 时间：2013-02-10T12:40:12.097
> 
> 标签：android, arrays, string, formatting, bold

我有这个字符串：

```
 String[] text = {"Address 1: Street nr.45 ",
         "Address 2: Street nr.67",
         "Address 3: Street nr. 56 \n Phone number: 000000000"}; 
```

稍后会被以下人员使用：

```
 ((TextView)findViewById(R.id.adresa)).setText(text[newSelectedAddress]); 
```

从微调器中选择项目时。

如何为字符串内的文本添加格式？我希望地址带有粗体，街道编号。斜体

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T12:42:42.373

你必须使用[`Spannable`](http://developer.android.com/reference/android/text/Spannable.html)s。虽然创建它们有点罗嗦而且看起来很复杂，但这不是火箭科学。一个例子：

```
String source = "This is example text";
SpannedString out = new SpannedString(source);
StyleSpan boldSpan = new StyleSpan(Typeface.BOLD);
StyleSpan boldSpan2 = new StyleSpan(Typeface.BOLD);
out.setSpan(boldSpan, 1, 3, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
out.setSpan(boldSpan2, 9, 12, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); 
```

结果：这是**示例****文本**

 **然后你用`setText`这个 Spannable 而不是普通的 String。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T13:18:43.180

这样做我亲爱的朋友：

```
String[] text = {"Address 1: Street nr.45 ",
             "Address 2: Street nr.67",
             "Address 3: Street nr. 56 \n Phone number: 000000000"};
    String tempString = text[newSelectedAddress];
    CharSequence charSeq= new SpannedString(tempString);
    Spannable spannable = (Spannable) charSeq;
    StyleSpan boldSpan = new StyleSpan(Typeface.BOLD);
    StyleSpan boldSpan2 = new StyleSpan(Typeface.ITALIC);
    spannable.setSpan(boldSpan, 0, "Address".length()-1, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    spannable.setSpan(boldSpan2, tempString.indexOf("Street"), tempString.indexOf("Street")-1 +"Street".length()-1, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    ((TextView)findViewById(R.id.adresa)).setText(spannable); 
```

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-18T22:02:09.127

允许字符串识别 html 的粗体和斜体格式有一些技巧。在您的 strings.xml 中添加类似这样的内容：

```
<string name="address"><![CDATA[<b>Address %1$s</b>: <i>Street nr. %2$s </i>]]></string> 
```

然后：

```
Resources res = getResources();
formattedString = res.getString(R.string.address, "1", "45");
// equivalent to String.format(res.getString(R.string.address), "1", "45")
Spannable s = Html.from Html(formattedString);
textView.setText(s); 
```**

# javascript - 服务器和客户端之间的 node.js 中的 SharedObject

> ID：14797838
> 
> 赞同：1
> 
> 时间：2013-02-10T12:41:06.393
> 
> 标签：javascript, node.js, shared-objects

基本上我需要 node.js 中的 sharedObject 。

使用 flash 媒体服务器（如 red5 和 flash 客户端）时，您可以本机使用 sharedObject，它在通过同步事件更新时通知连接的客户端，在客户端，您可以连接到共享对象并处理同步事件，此外，代码可以处理如果客户端想要绕过这个同步的对象并且可以禁止这个移动（这在在线多人游戏中是必要的）。

你能在 node.js + javascript 中建议我一些类似的实现吗？

注意，我不需要函数或代码共享，只需要 sharedObject + 本机事件。

我发现了这个话题：[是否可以使用 node.js 在客户端和服务器之间共享数据？](https://stackoverflow.com/questions/14097623/is-it-possible-to-share-data-between-the-client-and-the-server-using-node-js)但我认为这不是我的确切指令。

我最好的镜头是[https://github.com/jonashuckestein/node-object-sync](https://github.com/jonashuckestein/node-object-sync)。你用过吗？这是一种安全快捷的方法吗？如果编写同步函数并传递可更新对象更快，我会毫不犹豫...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T13:12:33.173

您应该查看 node.js 中的 Racer 库。请参阅此处[https://npmjs.org/package/racer](https://npmjs.org/package/racer)。还要研究使用 Racer 的 derby（一个 MVC 框架）。

如果你想自己开发一些东西，你可以使用 socket.io 来处理实时事件（聊天、广播消息）并自己处理同步/事件。

# java - 如何创建过滤器

> ID：14797840
> 
> 赞同：-3
> 
> 时间：2013-02-10T12:41:08.843
> 
> 标签：java, android, sql, sqlite

我有一个包含多列的数据库表

我使用自定义 List<> 并从数据库中填充它
我想要做的是根据用户输入过滤从数据库中进入列表的内容

例如，如果我有这样的表：

```
name|phone|date|address 
```

用户可以指定任何过滤器（按姓名、电话、日期...或全部），只有符合所有条件的项目才会进入列表

有没有办法做到这一点？

从数据库返回所有项目的方法

```
public List<MoviesDatabaseEntry> getAllMovies(String table)
{
    List<MoviesDatabaseEntry> lists = new ArrayList<MoviesDatabaseEntry>();
    // Select All Query
    String selectQuery = "SELECT  * FROM " + table;

    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    // looping through all rows and adding to list
    if (cursor.moveToFirst())
    {
        do {
            MoviesDatabaseEntry list = new MoviesDatabaseEntry();
            list.set_id(Integer.parseInt(cursor.getString(0)));
            list.set_title(cursor.getString(1));
            list.set_runtime(cursor.getString(2));
            list.set_rating(cursor.getDouble(3));
            list.set_genres(cursor.getString(4));
            list.set_type(cursor.getString(5));
            list.set_lang(cursor.getString(6));
            list.set_poster(cursor.getString(7));
            list.set_url(cursor.getString(8));
            list.set_director(cursor.getString(9));
            list.set_actors(cursor.getString(10));
            list.set_plot(cursor.getString(11));
            list.set_year(cursor.getInt(12));
            list.set_country(cursor.getString(13));
            list.set_date(cursor.getInt(14));

            // Adding  to list
            lists.add(list);
        } while (cursor.moveToNext());
    }

    // return list
    db.close();
    cursor.close();
    return lists;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T12:55:09.657

您可以过滤您在此行中构建的 SQL 查询中获得的条目：

```
String selectQuery = "SELECT  * FROM " + table; 
```

要过滤您检索的数据集，您需要向其添加 WHERE 子句。例如，当您只想要评分超过 3 的条目时，您可以将其更改为：

```
String selectQuery = "SELECT  * FROM " + table + " WHERE rating > 3"; 
```

SQL 是一种非常强大的语言，它提供了很多可能性。当您使用关系数据库时，这是一项基本技能。想学的时候可以推荐互动教程网站[http://sqlzoo.net/](http://sqlzoo.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T13:21:11.790

您必须更改数据库查询才能从查询中获取特定数据。

您有一个函数可以返回数据库中的所有行，如下所示：`getAllMovies(String table)`

你在这里使用：

```
String selectQuery = "SELECT  * FROM " + table; 
```

像这样创建一个新函数：

```
public List<MoviesDatabaseEntry> getSelectedMovies(String table)
{
    List<MoviesDatabaseEntry> lists = new ArrayList<MoviesDatabaseEntry>();

    Cursor cursor = db.query(true, TABLE_NAME, new String[] { <your row names> }, 
                **check condition(as string)**, null,
                null, null, null, null);
    ...
} 
```

现在只需在需要时使用您的特定查询字符串调用此函数

制作尽可能多的功能！

# wpf - MenuItem 可见性绑定到 RelayCommand CanExecute 与参数

> ID：14797841
> 
> 赞同：1
> 
> 时间：2013-02-10T12:41:18.617
> 
> 标签：wpf, contextmenu, relaycommand

我在 WPF MVVM 应用程序中使用 Josh Smith RelayCommand 类在 ViewModel 中创建命令：

例如：

```
ICommand RemoveAllCommand = new RelayCommand<object>(OnRemoveAll, CanRemoveAll); 
```

我从 ContextMenu 调用这个命令：

```
<ContextMenu x:Key="MyContextMenu" DataContext="{Binding Path=PlacementTarget, RelativeSource={RelativeSource Self}}">
    <MenuItem Header="Remove All" Command="{Binding Path=DataContext.RemoveAllCommand,
                                  RelativeSource={RelativeSource AncestorType={x:Type TreeView}}}" CommandParameter="{Binding Path=.Header}" /> 
```

一切正常，除了我的 MenuItem 仍然可见但被禁用，我想将 Visibility 设置为 Collapsed 以便`CanExecute`在 Relay Command 返回 false 时我的 MenuItem 不会显示。

我尝试设置与 Visibility 属性的绑定，但我不知道如何`CanRemoveAll(object obj)`使用参数绑定到我的方法。我也考虑过使用 DataTrigger，但我不知道该怎么做。

这是我`CanRemoveAll`在 ViewModel 中的方法：

```
 public bool CanRemoveAll(object param)
    {
        GoldTreeNodeViewModel gtn = param as GoldTreeNodeViewModel;
        return (gtn != null && gtn.Children != null && gtn.Children.Count > 0);
    } 
```

从 RelayCommand 类：

```
public event EventHandler CanExecuteChanged
    {
        add
        {
            if (_canExecute != null)
                CommandManager.RequerySuggested += value;
        }
        remove
        {
            if (_canExecute != null)
                CommandManager.RequerySuggested -= value;
        }
    }

    [DebuggerStepThrough]
    public Boolean CanExecute(Object parameter)
    {
        return _canExecute == null ? true : _canExecute((T) parameter);
    } 
```

任何帮助将不胜感激，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T13:34:02.433

```
 <ContextMenu x:Key="MyContextMenu" DataContext="{Binding Path=PlacementTarget, RelativeSource={RelativeSource Self}}">
        <MenuItem Header="Remove All" Command="{Binding Path=DataContext.RemoveAllCommand,
                              RelativeSource={RelativeSource AncestorType={x:Type TreeView}}}" CommandParameter="{Binding Path=.Header}" 
                  Visibility="{Binding DataContext.RemoveVisibility,RelativeSource={RelativeSource AncestorType={x:Type TreeView}}}"
                  />

private Visibility _removeVisibility;

    public Visibility RemoveVisibility
    {
        get { return _removeVisibility; }
        set { _removeVisibility = value; Notify("RemoveVisibility"); }
    }

    public bool CanRemoveAll(object param)
    {
        GoldTreeNodeViewModel gtn = param as GoldTreeNodeViewModel;
        bool result= (gtn != null && gtn.Children != null && gtn.Children.Count > 0);
        if (result)
            RemoveVisibility = Visibility.Visible;
        else
            RemoveVisibility = Visibility.Collapsed;
        return result;
    } 
```

我认为您绑定的 DataContext 对应于您的 ViewModel 。我希望这将有所帮助。

# xcode - IOSOpenDev 安装失败

> ID：14797844
> 
> 赞同：3
> 
> 时间：2013-02-10T12:41:26.083
> 
> 标签：xcode, macos, cydia

我安装了 Xcode 4.3.1，并尝试为 IOSOpenDev 安装 10.5 包

这是我得到的错误（我复制了整个日志，我决定把它放在一个 pastebin 中） [http://pastebin.com/Qd3fSKgt](http://pastebin.com/Qd3fSKgt)

请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T12:47:16.387

这是重点：

> 您尚未同意 Xcode 许可协议，请在终端窗口中运行 `'xcodebuild -license'`（用于用户级接受）或`'sudo xcodebuild -license'`（用于系统范围接受）以查看并同意 Xcode 许可协议。

这是你必须做的一次性事情，所以我之前不记得了。无论如何，我很惊讶网站上的任何地方都没有说明这个问题。

# java - 在 JOptionPane 中对齐字符串

> ID：14797845
> 
> 赞同：2
> 
> 时间：2013-02-10T12:41:30.107
> 
> 标签：java, swing

我有一个字符串，我想在`JOptionPane`.

```
String info = "Name:" + _name + "\n" +
              "Phone:" + _phone; 
```

我试图添加`\t`，但没有奏效。

我也试过

```
int choose = JOptionPane.showConfirmDialog(this,new JTextArea(info),"XXX",0); 
```

但是看起来不太好。

还有其他方法吗？（*如果您知道我可以使用类似的解决方案`\t`对我来说非常有用*）

***** *在这个具体的例子中，我可以手动对齐它，但我正在寻找一个通用的解决方案*。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T12:44:27.480

`HTML`格式化可以帮助：

```
String info = "Name:" + _name + "<br>" +
              "Phone:" + _phone + "<br>";

int choose = 
      JOptionPane.showConfirmDialog(this, "<html>" + info + "</html>", "XXX", 0); 
```

另一种选择是在此[解决方案](https://stackoverflow.com/questions/12702689/joptionpane-displaying-html-problems-in-java?answertab=oldest#tab-top)`JTable`中显示的`JOptionPane`对话框中使用 a 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T13:55:19.910

我有类似的东西，它奏效了：

```
String st =        "<table border = \"0\">" +
                   "<tr><td>VALUE1:  </td><td>" + _value2 + "</td></tr>"+
                   "<tr><td>VALUE2:  </td><td>" + _value4 + "</td></tr>" +
                   //.....
                   "</table>"; 
```

# space - 为什么三个主要按钮的右侧会出现空格？

> ID：14797847
> 
> 赞同：0
> 
> 时间：2013-02-10T12:41:37.113
> 
> 标签：space, css

请参阅以下链接： http: [//www.howru.nl/preken/new/test3.html](http://www.howru.nl/preken/new/test3.html)

出于某种原因，我一直在三个主要按钮的右侧获得空间。为了在这个论坛上更好地识别这一点，我临时启用了相关表格的边框。

问题出在我认为的以下课程中：

```
.button
{
    display: block;
    width: 350px;
    height: 135px;

    margin-left: 7px;
    margin-right: 7px;
    margin-top: 10px;
    margin-bottom: 20px;

    text-decoration: none;

    background-position: top;

    color: #FFFFFF;
} 
```

指定的宽度是背景图片的实际宽度。完整的 CSS 表可以在[http://www.howru.nl/preken/new/styles.css找到](http://www.howru.nl/preken/new/styles.css)

右列（文本）应浮动在右侧，就像目前的情况一样。左栏（按钮）应该浮动在左边（就像目前的情况一样），并且中心图片应该浮动在中心。奇怪的是左列在表格中占用了更多空间，而没有一个固定宽度。

理想情况下，我不想指定列的宽度两次（对于 TD 和内容，如果显示块内容上有 BG 图像）；在下面提出的解决方案中，显示块具有指定的宽度（背景图像的宽度）和父 TD 元素......这是我不喜欢的，我开始这篇文章。因为我仍然不明白为什么 TD 没有平等地共享可用表空间：

现在第 1 列（左）似乎占用最多，虽然它不需要那么多，但第二列占用更少，右列仅占用为内部宽度指定的内容，而左（第 1）列有相同（为内容而不是 TD 指定的宽度）并且明显不坚持该宽度，而正确的 TD 确实......）

在 IE 和 Opera 中我都明白了；知道我错过了什么吗？？！

目标是了解正在发生的事情以及原因。所以我不是在寻找便宜的解决方案——因为可以用 100 种“丑陋”的方式来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T13:50:24.340

这是我所做的更改。尝试这个。顺便说一句，您应该使用 % 而不是 px

```
.top {
vertical-align: top;
width: 350px;
} 
```

从 .blkright 中删除浮动

```
.blkright {
}

.title {
font-size: 14px;
font-weight: bold;
letter-spacing: -1px;
padding-bottom: 5px;
text-align: center;
}

.column {
   margin-left: 12px;
   overflow: hidden;
   width: 325px;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T12:50:23.593

更改右表 .top .column 的宽度以将此空间更改为按钮右侧

```
.column {
    overflow: hidden;
    padding: 5px 5px 25px;
    width: 290px; 
```

（最初宽度是 250px）因为它试图适应宽度： 100% 你已经设置你也可以删除 250px ，因为右列是你设置宽度的唯一列

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T12:52:52.620

我最终不确定您希望其余部分（例如文本段落）如何对齐，但这是我的方法。

首先，给每个正文列一个类或一个 ID。您将这些类`<td>`分别分配给三个 s。

```
.content-left {
   float: left;
}

.content-mid {
   float: left;
}

.content-right {
   display: table-row;
} 
```

尽管此解决方案比 's 需要更多的努力`IanO.S.`，但此解决方案也更具动态性。如果有一天您的按钮或图像尺寸发生变化，您不必侵入您的代码，查找并编辑您的像素宽度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T12:54:28.170

在第一个表格单元格上添加宽度声明

```
.top:first{
width: 364px;
} 
```

你不会再看到任何空格了

# asp.net-mvc - 实体框架：为什么 SimpleMembership 寻找默认连接

> ID：14797852
> 
> 赞同：0
> 
> 时间：2013-02-10T12:42:40.130
> 
> 标签：asp.net-mvc, entity-framework, simplemembership

我已明确设置 AccountsContext`mytestdb`用作 SimpleMembership 的连接字符串，如下所示 -

```
public class AccountsContext : DbContext
{
    public AccountsContext()
        : base("mytestdb")
    {
    }
} 
```

`DefaultConnection`但是由于某种原因，在以下代码行中初始化的数据库仍在寻找。虽然我已经`DefaultConnection`从 web.config 中完全删除了对的引用。

```
 public sealed class InitializeSimpleMembershipAttribute : ActionFilterAttribute
    {
        private static SimpleMembershipInitializer _initializer;
        private static object _initializerLock = new object();
        private static bool _isInitialized;

        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            // Ensure ASP.NET Simple Membership is initialized only once per app start
            LazyInitializer.EnsureInitialized(ref _initializer, ref _isInitialized, ref _initializerLock);
        }
  } 
```

![在此处输入图像描述](../Images/49ca1efaf1075d28bbb0967bc69cc59a.png)

这是带有注释部分的 Web.config 文件 -

```
 <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <!--<section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />-->
  </configSections>
  <connectionStrings>
    <add name="mytestdb" connectionString="Data Source=(local);Initial Catalog=mytestdb;User ID=****;Password=****" providerName="System.Data.SqlClient" />
    <!--<add name="DefaultConnection" 
         connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-LakshyaMvc-20130205074346;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-***.mdf" 
         providerName="System.Data.SqlClient" />-->
  </connectionStrings>

  <!--<entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>--> 
```

在这方面的任何帮助都会很有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T12:46:47.317

看一下文件`SimpleMembershipInitializer`里面的私有类`~/Filters/InitializeSimpleMembershipAttribute.cs`：

```
private class SimpleMembershipInitializer
{
    public SimpleMembershipInitializer()
    {
        Database.SetInitializer<UsersContext>(null);

        try
        {
            using (var context = new UsersContext())
            {
                if (!context.Database.Exists())
                {
                    // Create the SimpleMembership database without Entity Framework migration schema
                    ((IObjectContextAdapter)context).ObjectContext.CreateDatabase();
                }
            }

            WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true);
        }
        catch (Exception ex)
        {
            throw new InvalidOperationException("The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588", ex);
        }
    }
} 
```

您是否注意到以下行：

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true); 
```

这就是它的来源。顺便说一句，如果您查看了您得到的异常堆栈跟踪，它会将您指向这个位置。

同样在`~/Models/AccountModel.cs`文件中，您可能默认定义了以下上下文：

```
public class UsersContext : DbContext
{
    public UsersContext()
        : base("DefaultConnection")
    {
    }

    public DbSet<UserProfile> UserProfiles { get; set; }
} 
```

# r - 无法从 github 下载带有 read.table(url()) 的 csv

> ID：14797861
> 
> 赞同：0
> 
> 时间：2013-02-10T12:43:53.547
> 
> 标签：r

以下命令未能下载[csv 文件](https://github.com/jeanpat/pyFISH/blob/master/GUI/karyotyper/example%20classification/source%20data/features/jp-Jpp48-1-DAPI.csv)：

```
read.table(url('https://github.com/jeanpat/pyFISH/blob/master/GUI/karyotyper/example  classification/source data/features/jp-Jpp48-1-DAPI.csv'))

Erreur dans open.connection(file, "rt") : impossible d'ouvrir la connexion
De plus : Message d'avis :
In open.connection(file, "rt") : schéma URL non supporté 
```

是 github 还是 R 问题？

谢谢

# java - GWT 历史 - 状态是否在状态中创建历史或历史结果？

> ID：14797881
> 
> 赞同：0
> 
> 时间：2013-02-10T12:46:32.643
> 
> 标签：java, gwt, browser-history, gwt-history

我对我为 GWT 的历史机制找到的示例感到有些困惑。

查看并运行示例[GWT History](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsHistory#example)似乎不是很好。

历史通常被解释为应用程序更改的结果。

该示例有多个问题：

*   初始状态也是空令牌和令牌“page0”

    --> “历史” Back 在“离开应用程序”前两次显示同一页面

*   历史和状态以某种方式间接同步。

    *   Tab 选择会引发一个选择事件，该事件会设置一个新标记。设置令牌会导致历史值更改，再次选择相同的选项卡 (?)。这种模式有点令人费解。

换个角度看问题会不会错？

我认为总是根据历史令牌更改状态会更干净。

在那种情况下`ValueChange`将实现“状态渲染”。想要改变状态的按钮不会直接使用`History.newItem()`方法，而是使用方法间接改变状态`valueChange`。

例如

```
public void onValueChange(ValueChangeEvent<String> event) {
    String token = event.getValue();
    if(token.isEmpty()){
        show("welcome");
    }else if(token.equals("registration")){
        show(token);
    }
} 
```

还有一个想要显示注册的按钮：

```
welcome = new Button("Registration", new ClickHandler() {           
        @Override
        public void onClick(ClickEvent event) {
            History.newItem("registration");                
        }
    }); 
```

这以某种方式使用历史来驱动应用程序状态。

这有什么问题，为什么到处都是反其道而行之？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T00:01:41.743

GWT History 确实提供了一种设置令牌的方法，[而不会导致调用 on history changed 方法](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/History.html#newItem%28java.lang.String,%20boolean%29) `History.newItem("registration", false);`

至于您仅针对 GWT History 的建议，ValueChange 将实现“状态渲染”，这在您需要传递多个字符串来设置状态的情况下将不起作用。在这种情况下，我如上所述设置了一个标记，然后使用 MVC 将所需的任何数据转发到视图以进行渲染。

无论如何，我绝对不会通过 onValueChange 来选择一个选项卡。我使用类似的东西`tabPanel.selectTab(tabNum);`

FWIW，GWT 思维的当前状态从历史转移到使用[活动和地点](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces)

您可能希望看到这一点，因为它可能更符合您正在尝试做的事情。

# stata - Stata中的自动回归过程

> ID：14797885
> 
> 赞同：-1
> 
> 时间：2013-02-10T12:47:23.997
> 
> 标签：stata, linear-regression

我将使用论文“非流动性和股票回报：横截面和时间序列效应”（2002）中提出的 Amihud 模型来研究股票市场的非流动性和回报之间的关系。我想知道是否可以自动化回归分析。我的样本中有 2000 多只股票，我想避免逐个运行每个回归，从而加快处理速度。您知道是否可以在 Stata 中自动执行此过程？或者是否可以使用其他一些统计软件（R、SAS、Matlab、Gretl、...）来做到这一点？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:56:36.310

您应该将`foreach`and`forval`视为循环的方式。

```
 forval i = 1/3 { 
     regress Ystock`i' Xstock`i' 
 } 
```

当且仅当存在名称与您指定的变量相同的变量时，这将是一个示例。如果您有其他名称或不同的数据结构，循环仍然是可能的。

# c# - 如何修复从雅虎下载股票价格文件并插入数据库的脚本任务代码？

> ID：14797886
> 
> 赞同：2
> 
> 时间：2013-02-10T12:47:38.083
> 
> 标签：c#, csv, ssis, yahoo

下面给出的 SSIS 脚本任务接受一个股票代码和您想要返回的日期范围，并返回一个 CSV 格式的下载，可用于提取价格历史记录，但它不起作用，我不知道为什么。关于这个 SSIS 深思熟虑的概念的完整信息可以在下面的链接中找到。

**[SSIS / ETL 示例 – 雅虎股票和共同基金价格历史](http://blog.shutupandcode.net/?p=332)**

您可以从以下链接下载示例 SSIS 包。

**[SkyDrive 上的示例包](https://skydrive.live.com/?cid=50f550aa44b026cc&id=50F550AA44B026CC!174)**

以下 SSIS 脚本任务没有错误，但没有下载文件：

我刚开始理解这段代码，似乎这个链接被细分为像这里这样的组件，并且它必须使用正确的值，但我不明白为什么它没有检索文件。

```
ichart.finance.yahoo.com/table.csv?s={symbol}&a={startMM}&b={startDD}&c=
{‌​startYYYY}&d={endMM}&e={endDD}&f={endYYYY}&g={res}&ignore=.csv 
```

### 我正在使用的脚本任​​务代码：

```
using System;
using System.Data;
using Microsoft.SqlServer.Dts.Runtime;
using System.Windows.Forms;
using System.Configuration;
using System.Collections.Generic;
using System.Data.Sql;
using System.Data.SqlClient;
using System.Net;
using System.Collections.Specialized;
using System.Linq;

using Hash = System.Collections.Generic.Dictionary<string, string>;

namespace ST_361aad0e48354b30b8152952caab8b2b.csproj
{
    [System.AddIn.AddIn("ScriptMain", Version = "1.0", Publisher = "", Description = "")]
    public partial class ScriptMain : Microsoft.SqlServer.Dts.Tasks.ScriptTask.VSTARTScriptObjectModelBase
    {

        #region VSTA generated code
        enum ScriptResults
        {
            Success = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Success,
            Failure = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Failure
        };
        #endregion

        static string dir;
        static DateTime end;
        const string CSV_FORMAT = "Id,Cusip,Date,Open,High,Low,Close,Volume,Adj Close";

        public void Main()
        {
            // end date is today minus one day (end of day)
            end = DateTime.Now;

            // output directory stored in SSIS variable
            // which can be set at runtime
            dir = System.IO.Path.Combine(Dts.Variables["OutputCSV"].Value.ToString(), end.ToString("yyyyMMdd"));
            if (!System.IO.Directory.Exists(dir))
                System.IO.Directory.CreateDirectory(dir);

            // connection string to our database
            var connectionString = Dts.Variables["ConnectionString"].Value.ToString();

            // the sql command to execute
            var sql = Dts.Variables["PriceHistorySqlCommand"].Value.ToString();

            var list = new List<Hash>();
            using (var cnn = new SqlConnection(connectionString))
            {
                cnn.Open();
                using (var cmd = new SqlCommand(sql, cnn))
                {
                    cmd.CommandTimeout = 0;
                    var dr = cmd.ExecuteReader();
                    while (dr.Read())
                    {
                        // store result in temporary hash
                        var h = new Hash();
                        h["cusip"] = dr["cusip"].ToString();
                        h["symbol"] = dr["symbol"].ToString();
                        h["product_id"] = dr["product_id"].ToString();
                        h["last_price_dt_id"] = dr["last_price_dt_id"].ToString();

                        list.Add(h);

                        // process batches of 100 at a time 
                        // (This requires System.Threading.dll (CTP of parallel extensions) to be installed in the GAC)
                        if (list.Count >= 100)
                        {
                            System.Threading.Tasks.Parallel.ForEach(list, item =>
                            {
                                var dt = item["last_price_dt_id"].TryGetDateFromDateDimensionId(end.AddYears(-100));
                                DownloadPriceHistory(item["product_id"], item["cusip"], item["symbol"], dt);
                            });
                            list.Clear();
                        }
                    }
                }
            }

            // TODO: Add your code here
            Dts.TaskResult = (int)ScriptResults.Success;
        }

        static void DownloadPriceHistory(string id, string cusip, string symbol, DateTime begin)
        {
            // get write path
            var path = System.IO.Path.Combine(dir, cusip + ".csv");
            var url = String.Format("http://ichart.finance.yahoo.com/table.csv?s={0}&d={1}&e={2}&f={3}&g=d&a={4}&b={5}&c={6}&ignore=.csv",
                symbol.ToUpper(),
                (end.Month - 1).ToString("00"), end.Day.ToString("00"), end.Year,
                (begin.Month - 1).ToString("00"), begin.Day.ToString("00"), begin.Year);
            string csv;

            using (WebClient web = new WebClient())
            {
                try
                {
                    var text = web.DownloadString(url);
                    var lines = text.Split('\n');
                    System.Text.StringBuilder sb = new System.Text.StringBuilder();
                    int i = 0;
                    foreach (var line in lines)
                    {
                        // skip first line its a header
                        if (i == 0)
                            sb.AppendLine(CSV_FORMAT);
                        // ensure line being added is not null
                        else if (false == String.IsNullOrEmpty(line) && false == String.IsNullOrEmpty(line.Trim()))
                            sb.AppendLine(id + "," + cusip + "," + line);
                        i++;
                    }
                    // add header and body
                    csv = sb.ToString();
                }
                catch (System.Net.WebException)
                {
                    // 404 error
                    csv = CSV_FORMAT;
                }
            }

            System.IO.File.WriteAllText(path, csv);
        }
    }

    /// <summary>
    /// Some simple extension methods.
    /// </summary>
    public static class ExtensionMethods
    {
        /// <summary>
        /// Gets a datetime object from a dimension id string for example '20090130' would be translated to
        /// a proper datetime of '01-30-2009 00:00:00'. If the string is empty than we default to the passed
        /// in <paramref name="defaultIfNull"/>.
        /// </summary>
        /// <param name="str">The string</param>
        /// <param name="defaultIfNull">The default null.</param>
        /// <returns>Returns the datetime.</returns>
        public static DateTime TryGetDateFromDateDimensionId(this string str, DateTime defaultIfNull)
        {
            if (String.IsNullOrEmpty(str)) return defaultIfNull;
            return DateTime.Parse(str.Substring(4, 2) + "/" + str.Substring(6, 2) + "/" + str.Substring(0, 4));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-10T17:02:00.350

## 使用 SSIS 从 Yahoo Finance Chart 网站导入股票价格历史记录：

还有另一种方法可以使用 SSIS 将股票代码价格历史从 Yahoo Chart 网站导入数据库。`SSIS 2008 R2`这是一个使用with database in编写的示例包`SQL Server 2008 R2`

*`SO_14797886.dtsx`*使用`Business Intelligence Development Studio (BIDS)`并创建一个**`OLE DB`**连接到您的数据库的连接管理器/数据源，创建一个名为（比如说）的 SSIS 包。此示例使用`OLEDB_Sora.ds`连接到**`Sora`**运行实例的本地计算机上的数据库的数据源**`KIWI\SQLSERVER2008R2`**。`KIWI`是机器名，`SQLSERVER2008R2`是实例名。

在数据库中执行以下给定脚本以创建两个表。

*   表格**`dbo.TickerSymbols`**将包含有关代码列表的信息以及您希望导入价格文件的开始和结束日期以及导入的解决方案。分辨率可以包含类似**`d`**for 的值*`day`*；**`w`**对于*`weekly`*; **`m`**对于*`monthly`*; 并且**`y`**对于*`yearly`*.

*   表格**`dbo.TickerPriceHistory`**将保存从雅虎财经图表网站下载的品种的价格历史信息。

*   插入脚本为股票代码**`AAPL`**( *`Apple`*) 添加了四条记录；**`MSFT`**( *`Microsoft`*); **`GOOG`**( *`Google`*); 和**`YHOO`**( *`Yahoo`*)。每条记录都设置了不同的日期范围和分辨率。

### 创建表格并插入一些股票代码数据的脚本：

```
CREATE TABLE dbo.TickerSymbols
(
        Id int IDENTITY(1,1) NOT NULL
    ,   Symbol varchar(10) NOT NULL
    ,   StartDate datetime NOT NULL
    ,   EndDate datetime NOT NULL
    ,   Resolution char(1) NOT NULL
    ,   CONSTRAINT [PK_TickerSymbols] PRIMARY KEY CLUSTERED ([Id] ASC)
);
GO

CREATE TABLE dbo.TickerPriceHistory
(
        Id int IDENTITY(1,1) NOT NULL
    ,   Symbol varchar(10) NOT NULL
    ,   PriceDate datetime NOT NULL
    ,   PriceOpen numeric(18,2) NULL
    ,   PriceHigh numeric(18,2) NULL
    ,   PriceLow numeric(18,2) NULL
    ,   PriceClose numeric(18,2) NULL
    ,   Volume bigint NULL
    ,   AdjustmentClose numeric(18,2) NULL
    ,   CONSTRAINT [PK_TickerPriceHistory] PRIMARY KEY CLUSTERED ([Id] ASC)
);
GO

INSERT INTO dbo.TickerSymbols (Symbol, StartDate, EndDate, Resolution) VALUES
        ('AAPL', '2012-02-01', '2012-02-04', 'd')
    ,   ('GOOG', '2013-01-01', '2013-01-31', 'w')
    ,   ('MSFT', '2012-09-01', '2012-11-30', 'm')
    ,   ('YHOO', '2012-01-01', '2012-12-31', 'y')
    ;
GO 
```

在 SSIS 包上，创建以下变量。

*   **`EndDate`**：包将使用这个数据类型的变量*`DateTime`*来保存在记录集列表中循环通过的符号的结束日期。

*   **`FileExtension`**：这个数据类型的变量*`String`*将保存用于下载文件的文件扩展名。这是可选的。

*   **`FileName`**：这个数据类型的变量*`String`*将保存给定符号的文件名。该名称是根据时间戳生成的，以避免覆盖以前下载的文件。单击变量并按**F4**查看属性。将属性更改*`EvaluateAsExpression`*为**`True`**。单击 Expression 上的*Ellipsis**按钮*以打开*Expression Builder*。将 设置为以下值。此表达式的计算结果为类似，其中 MSFT 是符号，其余信息是格式中的包开始时间，并且是文件扩展名。**`Expression``MSFT_20130210_092519.csv``yyyMMdd_hhmmss`*`.csv`***

 **> @[User::Symbol] + "_" + (DT_WSTR, 4) YEAR(@[System::StartTime]) + RIGHT("00" + (DT_WSTR, 2) MONTH(@[System::StartTime]), 2) + RIGHT("00" + (DT_WSTR, 2) DAY(@[System::StartTime]), 2) + "_" + RIGHT("00" + (DT_WSTR, 2) DATEPART("hh", @ [System::StartTime]), 2) + RIGHT("00" + (DT_WSTR, 2) DATEPART("mi", @[System::StartTime]), 2) + RIGHT("00" + (DT_WSTR, 2) ) DATEPART("ss", @[System::StartTime]), 2) + @[User::FileExtension]

*   **`FilePath`**：这个数据类型的变量*`String`*将保存给定符号的下载文件的完整路径。单击变量并按**F4**查看属性。将属性更改*`EvaluateAsExpression`*为**`True`**。单击 Expression 上的 Ellipsis 按钮以打开*Expression Builder*。将 设置`Expression`为 值**`@[User::RootFolder] + "\\" + @[User::FileName]`**。我们将使用此快递

*   **`Resolution`**：包将使用这个数据类型的变量*`String`*来保存记录集列表中被循环通过的符号的解析信息。

*   **`RootFolder`**：这个数据类型的变量*`String`*将保存文件应该下载到的根文件夹。

*   **`SQL_GetSymbols`**：此数据类型变量*`String`*将包含 T-SQL 查询以从数据库中获取股票代码信息。将值设置为**`SELECT Symbol, StartDate, EndDate, Resolution FROM dbo.TickerSymbols`**

*   **`StartDate`**：包将使用这个数据类型的变量*`DateTime`*来保存在记录集列表中循环的符号的开始日期。

*   **`Symbol`**：包将使用此数据类型变量*`String`*来保存股票代码，因为它循环遍历记录集列表中的每条记录。

*   **`SymbolsList`**：包将使用这个数据类型的变量*`Object`*来保存存储在数据库中的股票代码的结果集。

*   **`URLYahooChart`**：这个数据类型的变量*`String`*将保存到 Yahoo Finance Chart 网站的 URL，并使用占位符填写查询字符串的适当值。将值设置为**`http://ichart.finance.yahoo.com/table.csv?s={0}&a={1}&b={2}&c={3}&d={4}&e={5}&f={6}&g={7}&ignore=.csv`**

![变量](../Images/1641d86b408e05d09d9c8ae9a59236b2.png)

在包上，右键单击*Connection Managers*选项卡，然后单击`Flat File Connection...`

![平面文件连接管理器](../Images/aeecc8e0ded48448a5585295cb793c5f.png)

在*Flat File Connection Manager Editor**`General`*页面上，执行以下操作：

 **   将*名称*设置为*`FILE_TickerPriceHistory`*

*   将*描述*设置为*`Read the ticker symbol price history.`*

*   如果您已有示例文件，请指向文件位置。SSIS 将从文件中的数据推断设置。在这种情况下，我已经通过导航 URL 下载了一个文件**`http://ichart.finance.yahoo.com/table.csv?s=MSFT&a=9&b=1&c=2012&d=11&e=30&f=2012&g=m&ignore=.csv`**并将其保存在名称下*`C:\Siva\StackOverflow\Files\14797886\Data\\MSFT_20130210_092519.csv`*

*   确保*格式*设置为*`Delimited`*.

*   确保*标题行分隔符*设置为*`{CR}{LF}`*

*   选中该框*`Column names in the first data row`*

*   单击*列*页面

![平面文件连接管理器编辑器 - 常规](../Images/9111b353804f2a48604a3d63ab69c825.png)

在*Flat File Connection Manager Editor**`Columns`*页面上，确保 Row delimiter 设置为Column delimiter 设置为。单击*高级*页面。*`{LF}``Comma {,}`*

 **![平面文件连接管理器编辑器 - 列](../Images/4e452cc992723f3c7f2e094b31bb8323.png)

在*Flat File Connection Manager Editor**`Advanced`*页面上，将根据文件信息创建列。如下所示更改值，使列名与数据库中的名称匹配。这样列映射会更容易。除最后一列之外的所有列都应将*ColumnDelimiter*设置为。Lsst 列应将*ColumnDelimiter*设置为。****`Comma {,}`*****`{LF}`*****

 ***```
Column              Data type                            DataPrecision DataScale
------------------- ------------------------------------ ------------- ---------
PriceDate           date [DT_DATE]
PriceOpen           numeric [DT_NUMERIC]                      18          2
PriceHigh           numeric [DT_NUMERIC]                      18          2
PriceLow            numeric [DT_NUMERIC]                      18          2
PriceClose          numeric [DT_NUMERIC]                      18          2
Volume              eight-byte unsigned integer [DT_UI8]      
AdjustmentClose     numeric [DT_NUMERIC]                      18          2 
```

![平面文件连接管理器编辑器 - 高级](../Images/7b609161a90b734ae86135782f14f591.png)

您现在应该在包底部看到两个连接管理器。

![创建的连接管理器](../Images/763496bcd1e6ba36f1a1ee35c019b3c2.png)

将一个图标拖放*`Execute SQL Task`*到*Control Flow选项卡上，然后在**General*选项卡上执行以下操作。

*   将*名称*设置为*`Get symbols from database`*
*   将*描述*设置为*`Fetch the list of symbols and its download settings from database.`*
*   将*ResultSet*设置为，`Full result set`因为查询将返回记录集。
*   将*连接类型*设置为*`OLE DB`*
*   将*连接*设置为*`OLEDB_Sora`*
*   *`Variable`*从*SQLSourceType*中选择
**   `User::SQL_GetSymbols`从源*变量*中选择**   单击*结果集*页面。**

 **![执行 SQL 任务 - 常规](../Images/ecd51fc98d9250d2a639df8cf46b6fb4.png)

在“*执行 SQL 任务”的“**结果集*”页面，单击“添加”，并设置“*结果名称*”为结果集的索引。从变量名称中选择以将结果集存储到对象变量中。****`0`****`User::SymbolsList`****

 **![执行 SQL 任务 - 结果集](../Images/2d52ac4b73c90481878f53f163c5ea53.png)

拖放一个*Foreach 循环容器*并将其放在*Execute SQL Task*之后。将执行 SQL 任务绿色箭头连接到 Foreach 循环容器。双击 Foreach 循环容器以查看 Foreach 循环编辑器。如下所示配置*ForEach 循环编辑器。*

![ForEach 循环编辑器 - 集合](../Images/ad3d22ab52e953b022ac8ba6a6efa6ed.png)

在*ForEach Loop Editor*的 Variable Mappings 页面上进行如下配置：

![ForEach 循环编辑器 - 变量映射](../Images/e1abc75628c2f44578e31ff826e7f014.png)

将 a 拖放*`Script Task`*到 ForEach 循环容器内。双击*脚本任务*以打开*脚本任务编辑器*。在脚本任务编辑器的脚本页面上，单击省略号按钮，`ReadOnlyVariables`然后选择下面列出的变量。我们需要在脚本任务代码中使用这些。

*   用户::结束日期
*   用户::文件扩展
*   用户::文件名
*   用户::文件路径
*   用户::分辨率
*   用户::根文件夹
*   用户::开始日期
*   用户::符号
*   用户::URLYahooChart

![脚本任务编辑器 - 脚本](../Images/cda1cef3db0ee982f700a701e1174dce.png)

单击*脚本任务编辑器**`Edit Script...`*上的按钮并键入以下代码。输入代码后，关闭*脚本任务编辑器。*

 **### C# 中的脚本任务代码：

```
using System;
using System.Data;
using Microsoft.SqlServer.Dts.Runtime;
using System.Windows.Forms;
using System.Net;

namespace ST_5fa66fe26d20480e8e3258a8fbd16683.csproj
{
    [System.AddIn.AddIn("ScriptMain", Version = "1.0", Publisher = "", Description = "")]
    public partial class ScriptMain : Microsoft.SqlServer.Dts.Tasks.ScriptTask.VSTARTScriptObjectModelBase
    {
        #region VSTA generated code
        enum ScriptResults
        {
            Success = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Success,
            Failure = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Failure
        };
        #endregion

        public void Main()
        {
            try
            {
                string symbol = Dts.Variables["User::Symbol"].Value.ToString();
                DateTime startDate = Convert.ToDateTime(Dts.Variables["User::StartDate"].Value);
                DateTime endDate = Convert.ToDateTime(Dts.Variables["User::EndDate"].Value);
                string resolution = Dts.Variables["User::Resolution"].Value.ToString();
                string urlYahooChart = Dts.Variables["User::URLYahooChart"].Value.ToString();

                string rootFolder = Dts.Variables["User::RootFolder"].Value.ToString();;
                string fileExtension = Dts.Variables["User::FileExtension"].Value.ToString();
                string fileName = Dts.Variables["User::FileName"].Value.ToString();
                string downloadPath = Dts.Variables["User::FilePath"].Value.ToString();

                if (!System.IO.Directory.Exists(rootFolder))
                    System.IO.Directory.CreateDirectory(rootFolder);

                urlYahooChart = string.Format(urlYahooChart
                                        , symbol
                                        , startDate.Month
                                        , startDate.Day
                                        , startDate.Year
                                        , endDate.Month
                                        , endDate.Day
                                        , endDate.Year
                                        , resolution);

                bool refire = false;
                Dts.Events.FireInformation(0, string.Format("Download URL of {0}", symbol), urlYahooChart, string.Empty, 0, ref refire);

                WebClient webClient = new WebClient();
                webClient.DownloadFile(urlYahooChart, downloadPath);

                Dts.TaskResult = (int)ScriptResults.Success;
            }
            catch (Exception ex)
            {
                Dts.Events.FireError(0, "Download error", ex.ToString(), string.Empty, 0);
            }
        }
    }
} 
```

*在Script Task*之后将a 拖放*`Data Flow Task`*到*Foreach 循环容器*内。将绿色箭头从 Script Task 连接到*Data Flow Task*。控制流选项卡应如下所示。

 **![控制流选项卡](../Images/9158bf3fa281565b334e1ada9d6c7d9c.png)

在数据流任务上，拖放*平面文件源*并按如下所示对其进行配置以读取价格历史 CSV 文件。

![平面文件源 - 连接管理器](../Images/e68f7c6015dd577d136f751196e127e4.png)

![平面文件源 - 列](../Images/6abeb18037eca47d376978daf90045ea.png)

拖放 a`Derived Column Transformation`并创建一个以*`Symbol`*表达式命名的新列，**`(DT_STR,10,1252)@[User::Symbol]`**以将符号添加到数据管道。

![派生列转换](../Images/696e8d924ebe725a7dd565d43cd2a10e.png)

拖放 OLE DB Destination 并按如下所示对其进行配置以将数据插入数据库。

![OLE DB 目标 - 连接管理器](../Images/a4762319e4e6e9367baa675ec9273f3f.png)

![OLE DB 目标 - 映射](../Images/b7de9d0714ebc6b5cf31714fffb67b6a.png)

您的数据流选项卡应如下所示：

![数据流选项卡](../Images/95162f58e9c2bdb17ba6b31b5e7f0cdd.png)

在运行包之前，我们需要进行一些更改，以防止由于文件夹中没有文件而在设计时视图上出现任何警告或错误。

单击平面文件连接管理器`FILE_TickerPriceHistory`并按下*`F4`*以查看属性。将属性更改*`DelayValidation`*为**`True`**。这将确保文件存在的验证将在运行时发生。单击*Expression上的**Ellipsis*按钮并将属性设置为 value 。这将在从网站下载每个文件时更改文件路径。**`ConnectionString`***`@[User::FilePath]`***

 *![平面文件连接管理器 - 延迟验证](../Images/7546d97a73b7ef77b4a5d7eb9b7e757c.png)

单击*数据流任务*并按下*`F4`*以查看属性。将属性更改*`DelayValidation`*为**`True`**。这将确保文件存在的验证将在运行时发生。

![数据流任务 - DelayValidation](../Images/1a26e805a36ff3996cd0030aa7912dfd.png)

导航到*数据流*选项卡并单击*平面文件源*并按下*`F4`*以查看属性。将属性更改*`ValidateExternalMetadata`*为**`False`**。这将确保在运行时验证平面文件是否存在。

![平面文件源 - ValidateExternalMetadata](../Images/f46db84da4054c1c99edf0ee861c3efb.png)

让我们导航到文件夹*`C:\Siva\StackOverflow\Files\14797886`*，将保存下载的文件的位置是空的。该文件夹不必为空。这仅用于执行检查。

![下载文件夹为空](../Images/ce1ef2f6c511ae505b99e97dd2d2b9ff.png)

对数据库运行以下 SQL 语句以验证表中的数据。第二个表应该是空的。

```
SELECT * FROM dbo.TickerSymbols;
SELECT * FROM dbo.TickerPriceHistory; 
```

![执行前的表数据](../Images/90a640136240e1902a4104878ad858b9.png)

执行包。如果一切设置正确，包应该成功运行并下载表中列出的每个符号的文件`dbo.TickerSymbols`

![控制流执行](../Images/23e619f6175d59f741e0936ef07d7c4f.png)

![数据流执行](../Images/40269ef42e6abc484ef4831b279e7103.png)

文件应成功保存到文件夹*`C:\Siva\StackOverflow\Files\14797886`*中。请注意，每个文件都根据包中提供的表达式适当地命名。

![下载的文件](../Images/c5fdf30c5abd1f7c44c729074ffc05e3.png)

对数据库运行以下 SQL 语句以验证表中的数据。该表现*`dbo.TickerPriceHistory`*在应该包含从网站下载的价格文件中的数据。

```
SELECT * FROM dbo.TickerPriceHistory; 
```

![执行后的表数据](../Images/f20c7288c7a0406e74d95cad428346aa.png)

上面的示例包说明了如何从 Yahoo Finance Chart 网站下载给定股票代码列表的价格文件并将它们加载到数据库中。*****************

# android - 使用 MediaStore.Images 和 contentResolver 获取存储在设备上的图像时，“没有 content://media/external/images/media/0 的条目”

> ID：14797887
> 
> 赞同：5
> 
> 时间：2013-02-10T12:47:44.877
> 
> 标签：android, android-contentresolver, mediastore

我有一个非常基本的要求。我需要我可以使用的设备相机中最后捕获的图​​像（及其缩略图）。

**我使用以下代码获取图像缩略图：**

```
String[] projection={MediaStore.Images.Thumbnails._ID,MediaStore.Images.Thumbnails.IMAGE_ID,
MediaStore.Images.Thumbnails.KIND,MediaStore.Images.Thumbnails.DATA};

Cursor cursor=MediaStore.Images.Thumbnails.queryMiniThumbnails(getContentResolver(),MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, MediaStore.Images.Thumbnails.MINI_KIND, projection); 
```

**以下是实际图像：**

```
String[] largeimage_projection={MediaStore.Images.ImageColumns._ID,MediaStore.Images.ImageColumns.DATA,};

String largeFileSort=MediaStore.Images.ImageColumns._ID+" DESC";

Cursor cursor=getContentResolver().query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, largeimage_projection, null, null, sort); 
```

但是，在我的三星 Galaxy Tab 8.9 上运行该应用程序时，我收到以下错误：

**对于缩略图：**

content://media/external/images/Thumnails/0 没有条目

**对于图像：**

content://media/external/images/media/0 没有条目

在检查设备时，我发现图像的默认位置是“/mnt/sdcard/DCIM/Camera/”

我也不能使用 onActivityResult() 方法中返回的“intent.getExtras()”，因为我的选项卡总是将其设为 null。

谁能告诉我哪里出错了？谢谢。

# jquery - 点击后隐藏Facebook喜欢按钮

> ID：14797888
> 
> 赞同：0
> 
> 时间：2013-02-10T12:48:00.067
> 
> 标签：jquery, facebook, facebook-like

单击时，我需要隐藏我网站上的 Facebook 赞按钮。我为我的粉丝专页使用了官方的赞按钮。当访问者点击喜欢并成为粉丝时，我希望喜欢按钮消失并永远对他隐藏。我发现它可以完成，`FB.Event.subscribe('edge.create;)`但我不知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T13:44:33.170

It should be easy:

1) Place the like button within a container. 2) Subscribe to FB.Event.subscribe('edge.create'). 3) When user has liked, hide the container.

# jquery - jQuery同位素加载问题

> ID：14797891
> 
> 赞同：1
> 
> 时间：2013-02-10T12:48:10.313
> 
> 标签：jquery, drupal, jquery-isotope, pageload

我实际上是在尝试使用 jquery Isotope 构建一个图片库。我不知道为什么，但有时画廊可以完美运行，有时它会出现某种加载问题，正如您在我的屏幕截图中看到的那样。

资料来源：www.sarahraaber.com

![在此处输入图像描述](../Images/efdae453b6a616146b1d7af370c8bbc3.png)

我已经在页面加载和文档加载功能上添加了一个计时器到我的 .js 文件的头部。:-/ 任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T13:59:48.133

我以前在使用 Isotope 时看到过这种情况，通常是 JS 计时问题。您可以在初始化或回调函数中添加一个长计时器的 setTimeout()，比如 2000，然后测试它是否仍然发生？这应该有助于确认。

我还在您的网站上注意到，调整浏览器的大小可以解决布局问题。加载完所有内容后，尝试调用同位素更新函数以正确更新布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T13:22:05.877

我从未使用过 jquery 同位素，但它看起来与 jquery masonry ( [http://masonry.desandro.com/](http://masonry.desandro.com/) ) 相同。Masonry 有一个 drupal 视图插件：[http](http://drupal.org/project/masonry) ://drupal.org/project/masonry 。您可能对 Masonry 模块有更多的运气。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-06T15:47:14.463

也许有点晚了，但就我而言，有一个更简单的解决方案：

我的同位素元素没有固定的高度，因此在加载所有图像之前执行了 javascript，因此，元素的高度不正确！

添加后：

```
.isotope-item{
  height:300px;  
} 
```

代码能够计算项目的位置，甚至在图像加载之前！

# jquery - 如何使用默认浏览器警报覆盖 jQuery 验证插件消息

> ID：14797892
> 
> 赞同：1
> 
> 时间：2013-02-10T12:48:17.230
> 
> 标签：jquery, jquery-validate, alert

我在这里遇到了一个情况。

我有一个适合设计的表单，我无法更新 FORM 内的 de DOM 以显示验证消息。

所以，我想知道如何使用默认浏览器警报替换自定义 jQuery 验证插件 DOM 消息，假设以下代码为例。

```
$("form").validate({
    rules:{
        myName:{
            required: true, minlength: 2
        },
        myEmail:{
            required: true, email: true
        },
        myMessage:{
            required: true, minlength: 10
        }
    },
    messages:{
        myName:{
            required: "Type you name",
            minLength: "Your name must be at least 2 characters long"
        },
        myEmail:{
            required: "Type you e-mail address",
            email: "Type a valid e-mail address"
        },
        myMessage:{
            required: "Type your message",
            minLength: Your message must be at least 2 characters long"
        }
    }
}); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T16:16:41.370

*   您的最后一条自定义消息缺少左引号`"`.
*   您的自定义[`messages`](http://docs.jquery.com/Plugins/Validation/validate#toptions)应包含参数占位符 ,`{0}`会自动替换为您的规则的值。
*   您还使用大写字母拼错了`minlength`自定义选项中的规则。`messages``L`

试试这个代码：

```
$("form").validate({
    rules:{
        myName:{
            required: true,
            minlength: 2
        },
        myEmail:{
            required: true,
            email: true
        },
        myMessage:{
            required: true,
            minlength: 10
        }
    },
    messages:{
        myName:{
            required: "Type your name",
            minlength: "Your name must be at least {0} characters long"
        },
        myEmail:{
            required: "Type your e-mail address",
            email: "Type a valid e-mail address"
        },
        myMessage:{
            required: "Type your message",
            minlength: "Your message must be at least {0} characters long"
        }
    }
}); 
```

**演示：http: [//jsfiddle.net/3JTNh/](http://jsfiddle.net/3JTNh/)**

* * *

> **引用 OP**：“我想知道如何用默认浏览器警报替换自定义 jQuery 验证插件 DOM 消息”

~~[`rules('add')`您的问题非常不清楚，但是动态更改消息的方法是使用方法](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)动态更改规则，并且只指定要更改的消息...工作演示：http: [//jsfiddle.net/ vkF9r/](http://jsfiddle.net/vkF9r/)~~

`* removed *`

* * *

**编辑**：

根据评论，OP 最初要求使用这样的回调函数`alert()`来完成JavaScript。`errorPlacement`由于`error`是一个对象，因此您`error.text()`只能使用它的消息。

```
 onkeyup: false,
    errorPlacement: function (error, element) {
        alert(error.text());
    }, 
```

我建议设置`onkeyup`为`false`以消除每次击键时的重复警报。 **如果您使用的是 Safari，请不要尝试此演示**，否则您将陷入无限循环（`alert()`在这种情况下使用的一个缺点）[http://jsfiddle.net/kxwYd/](http://jsfiddle.net/kxwYd/)

**顺便说一句：我不建议`alert()`在任何网站设计中使用过时的 JavaScript。**

* * *

**更好/推荐**：

为了获得更现代的用户体验，您应该将其与 jQuery 模态或工具提示插件（如[Tooltipster](http://calebjacob.com/tooltipster/) ）集成。

**工作示例**：http: [//jsfiddle.net/SfanE/](http://jsfiddle.net/SfanE/)

以下代码来自[我的其他答案](https://stackoverflow.com/a/14741689/594235)...

**首先，在所有**将显示错误的特定元素上初始化 Tooltipster 插件（[使用任何选项](http://calebjacob.com/tooltipster/#options)） ：**`form`**

 **```
$(document).ready(function () {

    // initialize tooltipster on form input elements
    $('#myform input[type="text"]').tooltipster({ 
        trigger: 'custom', // default is 'hover' which is no good here
        onlyOne: false, // allow multiple tips to be open at a time
        position: 'right'  // display the tips to the right of the element
    });

}); 
```

其次，使用[Tooltipster 的高级选项](http://calebjacob.com/tooltipster/#advanced)以及[Validate 插件中内置的回调函数](http://docs.jquery.com/Plugins/Validation/validate#toptions)[`success:`来`errorPlacement:`](http://docs.jquery.com/Plugins/Validation/validate#toptions)自动显示和隐藏工具提示，如下所示：

```
$(document).ready(function () {

    // initialize validate plugin on the form
    $('#myform').validate({
        // any other options & rules,
        errorPlacement: function (error, element) {
            $(element).data('tooltipsterContent', $(error).text());
            $(element).data('plugin_tooltipster').showTooltip();
        },
        success: function (label, element) {
            $(element).data('plugin_tooltipster').hideTooltip();
        }
    });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T16:46:13.673

根据 Sparky 的建议，如果您不想包含工具提示插件，您可以使用 jQuery UI 和一些 CSS 非常接近地模拟该行为。

CSS：

```
label.error {
    background-color:white;
    color:red;
    position:absolute;
    border: 1px black solid;
    padding: 10px;
    box-shadow: 5px 5px 2px #888;
    z-index:1;
} 
```

jQuery：

```
$('#myform').validate({
    errorPlacement: function (error, element) {
        error.insertAfter(element).position({
            my: 'left center',
            at: 'right center',
            of: element,
            offset: '5 0'
        });

    },
   //the rest of your validate options
}); 
```

这里的例子：http: [//jsfiddle.net/SfanE/1/](http://jsfiddle.net/SfanE/1/)**

# mysql - 外键设置是mysql表

> ID：14797895
> 
> 赞同：-1
> 
> 时间：2013-02-10T12:48:33.423
> 
> 标签：mysql, foreign-keys

我认为外键对我来说并不重要，但现在我认为我必须采用。我有 20 多个表，其中包含为博客网站服务的多对多关系。

表：网关（post_id、group_id、post_type、post_date ...）

表：post（post_id、group_id、title、body ...）

表：投票（post_id，group_id，title，...）

和类似的表：视频、照片、链接表；然后他们有表：跟踪喜欢/不喜欢的记录和用户评论记录——它们都共享一个公共字段**post_id var(14)**

在这一点上，我认为用外键引用它们会更好。在这个例子中，我有 8 个表可以与 post_id 链接，所以当我尝试其他表来引用时，我现在尝试在 post 和 gateway [on delete: cascade，on update: no action(InnoDB)] 之间进行 FK。FK 到网关或发布它会引发错误，我不知道为什么？肯定我在某个地方错了。

如果我的方法正确或有更好的方法，请帮助我？

这是我收到的错误消息：

![显示错误的图像](../Images/ff45f255475c3e68ca1d4e3f96edb4c0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T13:49:28.680

尝试将外键设置为索引，并确保您使用正确的名称并使用相同的列类型。

# java - 没有合适的司机。尝试使用 Hibernate 连接到 Heroku 上的 postgresql 数据库

> ID：14797896
> 
> 赞同：3
> 
> 时间：2013-02-10T12:48:37.253
> 
> 标签：java, hibernate, postgresql, heroku

很抱歉打扰你，但我一直收到错误，我真的不明白为什么。

如标题中所述，我正在尝试使用休眠连接运行 heroku 的 postgresql 数据库。我的应用也在 Heroku 上运行。

它在本地模式下工作，我尝试了几个 postgre 驱动程序。

这是我的 hibernate.cfg.xml ：

```
<!-- PostgreSQL -->

<property name="connection.url">jdbc:postgresql://paafeblgkhhbkx:PhZEtHl2RHwbWDQJJOurmej89-@ec2-54-243-243-252.compute-1.amazonaws.com:5432/d1vsgjgnfr1koq</property>

<property name="connection.username">paafeblgkhhbk</property>

<property name="connection.password">My password</property>

<property name="connection.driver_class">org.postgresql.Driver</property>

<property name="dialect">org.hibernate.dialect.PostgreSQLDialect</property>

<!-- Disable the second-level cache  -->
<property name="cache.provider_class">org.hibernate.cache.internal.NoCacheProvider</property>

<!-- Echo all executed SQL to stdout -->
<property name="show_sql">true</property>
<!-- Drop and re-create the database schema on startup -->
<property name="hbm2ddl.auto">create</property> 
```

当我获得会话时，url、密码和用户名被覆盖：

```
Configuration configuration = new Configuration();
configuration.addAnnotatedClass(Client.class);
// and other classes

try {  
    Class.forName("org.postgresql.Driver"); 
    System.out.println(" === === DRIVER FOUND === === ");   
} catch (ClassNotFoundException e) {
    e.printStackTrace();
    System.out.println(" === === DRIVER NOT FOUND === === ");
}
configuration.configure();
System.out.println("============================= EXPORT SCHEMA ==========================");
new SchemaExport(configuration).create(true, true);
serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();
sessionFactory = configuration.buildSessionFactory(serviceRegistry); 
```

如您所见，找到了驱动程序。我很确定网址也可以（如果我尝试使用另一个网址，我会收到连接错误）

这是我的依赖：

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-core</artifactId>
    <version>4.1.9.Final</version>
</dependency>
<dependency>
    <groupId>postgresql</groupId>
    <artifactId>postgresql</artifactId>
    <version>9.1-901.jdbc4</version>
</dependency> 
```

并且它们按照我的 pom 中的说明导出（当我部署我的应用程序时，我可以看到 maven 正在复制它）：

```
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-dependency-plugin</artifactId>
<version>2.4</version>
<executions>
    <execution>
        <id>copy-dependencies</id>
        <phase>package</phase>
        <goals><goal>copy-dependencies</goal></goals>
    </execution>
</executions>
</plugin> 
```

所以在这一点上我看不出我做错了什么：/

这是我得到的错误日志：

> 使用命令启动进程`java -cp target/classes:target/dependency/* test.Server`
> 
> 状态从开始变为向上
> 
> org.hibernate.annotations.common.Version
> 
> 信息：HCANN000001：Hibernate Commons Annotations {4.0.1.Final}
> 
> org.hibernate.Version logVersion
> 
> 信息：HHH000412：休眠核心 {4.1.9.Final}
> 
> org.hibernate.cfg.Environment
> 
> 信息：HHH000206：找不到 hibernate.properties
> 
> org.hibernate.cfg.Environment buildBytecodeProvider
> 
> 信息：HHH000021：字节码提供程序名称：javassist
> 
> org.hibernate.cfg.Configuration 配置
> 
> 信息：HHH000043：从资源配置：/hibernate.cfg.xml
> 
> org.hibernate.cfg.Configuration getConfigurationInputStream
> 
> 信息：HHH000040：配置资源：/hibernate.cfg.xml
> 
> org.hibernate.cfg.Configuration doConfigure
> 
> 信息：HHH000041：配置的 SessionFactory：空
> 
> === === 找到驱动程序 === ===
> 
> ============================== 导出模式 =================== =======
> 
> org.hibernate.dialect.方言
> 
> 信息：HHH000400：使用方言：org.hibernate.dialect.PostgreSQLDialect
> 
> org.hibernate.tool.hbm2ddl.SchemaExport 执行
> 
> 信息：HHH000227：运行 hbm2ddl 模式导出
> 
> org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl 配置
> 
> 信息：HHH000402：使用 Hibernate 内置连接池（不用于生产！）
> 
> org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl 配置
> 
> 信息：HHH000115：休眠连接池大小：2
> 
> org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl 配置
> 
> 信息：HHH000006：自动提交模式：假
> 
> org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl 配置
> 
> 信息：HHH000401：在 URL [jdbc:postgresql://paafeblgkhhbkx:PhZEtHl2RHwbWDQJJOurmej89-@ec2-54-243-243-252.compute-1.amazonaws.com:5432/d1vsgjgnfr1koq] 使用驱动程序 [org.postgresql.Driver]
> 
> org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl 配置
> 
> 信息：HHH000046：连接属性：{用户=paafeblgkhhbkx，密码= *** *}
> 
> org.hibernate.tool.hbm2ddl.SchemaExport 执行
> 
> 错误：HHH000231：架构导出不成功
> 
> java.sql.SQLException：找不到适合 jdbc 的驱动程序：postgresql://paafeblgkhhbkx:PhZEtHl2RHwbWDQJJOurmej89-@ec2-54-243-243-252.compute-1.amazonaws.com:5432/d1vsgjgnfr1koq
> 
> 在 java.sql.DriverManager.getConnection(DriverManager.java:640)
> 
> 在 java.sql.DriverManager.getConnection(DriverManager.java:169)
> 
> 在 org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.getConnection(DriverManagerConnectionProviderImpl.java:193)
> 
> 在 org.hibernate.tool.hbm2ddl.ManagedProviderConnectionHelper.prepare（ManagedProviderConnectionHelper.java:55）
> 
> 在 org.hibernate.tool.hbm2ddl.DatabaseExporter.(DatabaseExporter.java:52)
> 
> 在 org.hibernate.tool.hbm2ddl.SchemaExport.execute（SchemaExport.java:367）
> 
> 在 org.hibernate.tool.hbm2ddl.SchemaExport.create(SchemaExport.java:304)
> 
> 在 org.hibernate.tool.hbm2ddl.SchemaExport.create(SchemaExport.java:293)
> 
> 在persistance.SessionFactorySingleton.configureSessionFactory(SessionFactorySingleton.java:36)
> 
> 在persistance.SessionFactorySingleton.getSessionFactory(SessionFactorySingleton.java:61)
> 
> 在persistance.Controller.beginSession(Controller.java:24)
> 
> 在persistance.Controller.sauvegarde(Controller.java:36)
> 
> 在persistance.Controller.save（Controller.java:51）
> 
> 在 test.Server$1.handle(Server.java:44)
> 
> 在 com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:83)
> 
> 在 sun.net.httpserver.AuthFilter.doFilter(AuthFilter.java:83)
> 
> 在 com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:86)
> 
> 在 sun.net.httpserver.ServerImpl$Exchange$LinkHandler.handle(ServerImpl.java:589)
> 
> 在 com.sun.net.httpserver.Filter$Chain.doFilter(Filter.java:83)
> 
> 在 sun.net.httpserver.ServerImpl$Exchange.run(ServerImpl.java:561)
> 
> 在 sun.net.httpserver.ServerImpl$DefaultExecutor.execute(ServerImpl.java:137)
> 
> 在 sun.net.httpserver.ServerImpl$Dispatcher.handle(ServerImpl.java:367)
> 
> 在 sun.net.httpserver.ServerImpl$Dispatcher.run(ServerImpl.java:339)
> 
> 在 java.lang.Thread.run(Thread.java:679)

谢谢你的时间 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T14:08:49.810

您的数据库 URL 有一些非常可疑的地方：

> jdbc:postgresql://paafeblgkhhbkx:PhZEtHl2RHwbWDQJJOurmej89-@ec2-54-243-243-252.compute-1.amazonaws.com:5432/d1vsgjgnfr1koq

分解：

*   JDBC 方案：`postgresql`- 好的
*   主机名：`paafeblgkhhbkx`– 可疑
*   港口：`PhZEtHl2RHwbWDQJJOurmej89-@ec2-54-243-243-252.compute-1.amazonaws.com`——肯定错了。

您显然试图将用户名和密码作为连接 URL 的一部分，但这不是它的完成方式。这些是使用单独的属性配置的，如果要将它们包含在 URI 中，方法如下**：**

`jdbc:postgresql://localhost/test?user=fred&password=secret`

* * *

附带说明一下，我已成功连接到您的数据库，因此除了正确的主机名外，我还可以证明您向公众公开的凭据的正确性。是时候改密码了……

# android - 通过android调用asp.net web服务时出错

> ID：14797900
> 
> 赞同：-3
> 
> 时间：2013-02-10T12:49:08.630
> 
> 标签：android, ksoap2

例如 E/dalvikvm(2193): 找不到类 'org.ksoap2.transport.AndroidHttpTransport', android httpTransport 以及写什么来代替“input” request.addProperty("input", searchNameString); 我想通过调用 web 服务到 android 应用程序来获得结果，但我无法显示它请帮助我如何从 web 服务中检索结果以及如何显示到 android 应用程序。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T12:54:43.207

更喜欢我发布问题的 URL。

[使用 ksoap2 在 android 中创建带有安全标头的肥皂信封](https://stackoverflow.com/questions/14196387/create-soap-envelope-with-security-header-in-android-using-ksoap2)

如果您的 ksoap2 库无法正常工作，请更改另一个 kshoap2 库。

您使用 AndroidHttpTransportSE 而不是 AndroidHttpTransport。

# c++ - 推荐 C++ 中的开源缓存

> ID：14797901
> 
> 赞同：11
> 
> 时间：2013-02-10T12:49:25.273
> 
> 标签：c++, caching

我需要一个 C++ 中的缓存库，它有点像[Guave 的](http://code.google.com/p/guava-libraries/wiki/CachesExplained)加载缓存。

它应包括以下内容：

*   非阻塞访问
*   基于时间的驱逐
*   基于大小的驱逐

我查看了 STL、Boost 并四处搜索，但我找不到任何具有此功能的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T13:57:36.483

查看[POCO](http://pocoproject.org/)。我相信它的[缓存框架](http://pocoproject.org/slides/140-Cache.pdf)会满足您的需求。

```
ExpireLRUCache<int, string> cache(
                              1024,  // cacheSize
                              600000 // expiration (10 minutes)
);

cache.add( 1, "Cached string 1" );
cache.add( 10, "Cached string 10" );

Sleep( 601000 );

Shared_ptr<string> pVal = cache.get( 10 );
assert( pVal.isNull() ); // the element has expired 
```

# asp.net-mvc - 淘汰赛验证 - 高级搜索用户界面

> ID：14797915
> 
> 赞同：0
> 
> 时间：2013-02-10T12:51:29.470
> 
> 标签：asp.net-mvc, knockout.js, knockout-validation

我正在构建一个类似于 TFS 查询构建器 Web 界面的高级搜索 UI。使用淘汰赛进行客户端实现，除了最终验证以使某些必需项目基本上被选中外，其他一切都或多或少地工作。如果我选择一个项目然后取消选择该项目，它就会给我一个验证错误。这很好，但我希望在点击搜索按钮时验证表单。

我很确定我需要使用 ko.validatedobservable 方法，我只是不确定如何。 无论如何，如果有人有时间或愿意帮助我，我有一个小提琴要看：http: [//jsfiddle.net/sstolp/uXBSA/ 。](http://jsfiddle.net/sstolp/uXBSA/)我会非常感激。

感谢您的时间。

```
scvm.SearchLine = function () {
var self = this;
self.selectedField = ko.observable().extend({ required: true });
self.selectedOperator = ko.observable().extend({ required: true });
self.firstdate = ko.observable(new Date());
self.lastdate = ko.observable(new Date());
self.thedate = ko.observable(new Date());

return self;};

scvm.Criteria = function () {
var self = this,
    lines = ko.observableArray([]),

    // Put one line in by default
    loadInitialData = function () {
        lines.push(new scvm.SearchLine());
    },

    rowcount = ko.computed(function () {
        return lines().length;
    }),

    // Operations
    addLine = function () {
        lines.push(new scvm.SearchLine());
    },

    removeLine = function (line) {
        lines.remove(line);
    },

    search = function () {
        var data = $.map(lines(), function (line) {
            return line.selectedField() ? {
                selectedField: line.selectedField().searchfield,
                selectedOperator: line.selectedOperator().name,
            } : undefined
        });
        alert("Send to server: " + JSON.stringify(data));            
    },

    clear = function () {
        lines.removeAll();
    };

return {
    lines: lines,
    loadInitialData: loadInitialData,
    rowcount: rowcount,
    addLine: addLine,
    removeLine: removeLine,
    search: search,
    clear: clear
};
}(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T14:20:27.123

是的，您的所有 SearchLine 对象都必须包装到`ko.validatedObservable`. 您还应该实现计算属性，它将检查`isValid()`每个标准行并返回全局有效性标志。

```
scvm.SearchLine = function () {
    var self = this;
    self.selectedField = ko.observable().extend({ required: true });
    self.selectedOperator = ko.observable().extend({ required: true });
    self.firstdate = ko.observable(new Date());
    self.lastdate = ko.observable(new Date());
    self.thedate = ko.observable(new Date());

    return ko.validatedObservable(self);
};

scvm.Criteria = function () {

    // ...

    return {
        lines: lines,
        loadInitialData: loadInitialData,
        rowcount: rowcount,
        addLine: addLine,
        removeLine: removeLine,
        search: search,
        clear: clear,
        // new property that indicates validity of all lines
        linesValid: ko.computed(function(){
            var items = lines();
            for (var i = 0, l = items.length; i < l; i++)
                if (!items[i].isValid()) return false;
            return true;
        })
    };
}(); 
```

这个新属性可用于`enable`绑定“搜索”按钮：

```
<input type="button"
       data-bind="enable: linesValid, click: search"
       title="Clicking this button will run a search."
       value="Search" /> 
```

我已经修改了你的小提琴。看看：http: [//jsfiddle.net/ostgals/uXBSA/8/](http://jsfiddle.net/ostgals/uXBSA/8/)

* * *

更新：

我们还应该稍微修改 Criteria.search 方法，因为我们的线数组包含 observables 而不是对象：

```
 //...

        search = function () {
            var data = $.map(lines(), function (line) {
                line = ko.utils.unwrapObservable(line);
                return line.selectedField() ? {
                    selectedField: line.selectedField().searchfield,
                    selectedOperator: line.selectedOperator().name,
                } : undefined
            });
            alert("Send to server: " + JSON.stringify(data));            
        },

        //... 
```

# wordpress - WordPress删除管理菜单项

> ID：14797917
> 
> 赞同：0
> 
> 时间：2013-02-10T12:51:36.807
> 
> 标签：wordpress

通常删除 wp-admin 菜单项不是问题，例如：

```
add_action( 'admin_init', 'my_remove_menu_pages' );

function my_remove_menu_pages() {               
  remove_submenu_page( 'themes.php', 'theme-editor.php' );                                          
} 
```

但是，我目前正在努力处理以下页面：

```
admin.php?page=wpml-string-translation/menu/string-translation.php 
```

删除这个的最好方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T13:01:16.660

我认为您 add_action 需要一个数字作为第三个参数（优先级）。

*   [https://wordpress.stackexchange.com/questions/55581/how-can-i-remove-the-wp-menu-from-the-admin-bar](https://wordpress.stackexchange.com/questions/55581/how-can-i-remove-the-wp-menu-from-the-admin-bar)

### 例子

如果你有这个 add_action：

```
add_action( 'admin_bar_menu', 'wp_admin_bar_wp_menu', 10 ); 
```

要删除它，它需要更高的优先级 (11)：

```
<?php # -*- coding: utf-8 -*-
/**
 * Plugin Name: Remove WP Menu From Tool Bar
 */
if ( ! function_exists( 't5_remove_wp_menu' ) )
{
    // The action is added with a priority of 10, we take one step later.
    add_action( 'init', 't5_remove_wp_menu', 11 );

    /**
     * Remove the WP menu action.
     */
    function t5_remove_wp_menu()
    {
        is_admin_bar_showing() &&
            remove_action( 'admin_bar_menu', 'wp_admin_bar_wp_menu', 10 );
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-12T02:39:07.217

根据之前的答案，以下是两个 WPML 用户菜单的完整解决方案：

```
function remove_menu_items()
{
    //removes the 'String Translation' menu item from editor's admin screen
    if (defined('WPML_ST_FOLDER')){
        remove_menu_page(WPML_ST_FOLDER.'/menu/string-translation.php');
    }
    //removes the 'Translation Interface' menu item from editor's admin screen
    if (defined('WPML_TM_FOLDER')){
        remove_menu_page(WPML_TM_FOLDER . '/menu/translations-queue.php');
    }
}
add_action('admin_menu', 'remove_menu_items', 999); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T13:13:33.453

这应该工作，

```
add_action( 'admin_init', 'my_remove_menu_pages' );

function my_remove_menu_pages() {
    remove_submenu_page( 'admin.php?page=wpml-string-translation/menu/string-translation.php', 'admin.php?page=wpml-string-translation/menu/string-translation.php' );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T19:46:45.530

工作解决方案：

```
function remove_menu_items()
{
    //removes the String Translation menu item from editor's admin screen
    if (defined('WPML_ST_FOLDER'))
        remove_menu_page(WPML_ST_FOLDER.'/menu/string-translation.php');
}
add_action('admin_menu', 'remove_menu_items', 999); 
```

它需要更高的优先级，为了避免任何问题，让我们使用相同的 WPML 常量，我们可以在插件文件夹中的文件“wpml-string-translation-class.php”中找到它，第 212 行作为版本1.6.1 的 WPML 字符串转换插件。

# javascript - 如何以组合形式将两个事件处理程序添加到元素或节点？

> ID：14797921
> 
> 赞同：0
> 
> 时间：2013-02-10T12:52:08.693
> 
> 标签：javascript, jquery, chaining

我知道在 jQuery 中我们可以以组合形式添加多个事件处理程序，但是如何在纯 Javascript 中做到这一点？

我们如何以组合形式附加事件处理程序，如下所示：

```
document.getElementsByTagName('input')[0].onclick.onkeypress = function() {
    alert(1);
} 
```

但它抛出了一个类型错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:54:19.853

jQuery 让你更简洁，但这并没有什么不同：

```
var e = document.getElementsByTagName('input')[0];
e.onclick = e.onkeypress = function() {
    alert(1);
}; 
```

如果您想避免使用 污染全局命名空间`element`，请执行以下操作：

```
(function(){
  var e = document.getElementsByTagName('input')[0];
  e.onclick = e.onkeypress = function() {
    alert(1);
  };
})(); 
```

您可以定义一个函数来添加链接，`addEventListener`但真的有一点吗？

# javascript - 使用 javascript 测试 JSON 中是否存在属性

> ID：14797926
> 
> 赞同：1
> 
> 时间：2013-02-10T12:53:07.690
> 
> 标签：javascript, json

我有以下 JSON（“名称”有更多成员，为了简单起见，这里只显示“电影院”）

```
{
    "name": {
        "cinema": {
            "size": {
                "w": 256,
                "h": 200
            },
            "frame": {
                "x": 0,
                "y": 0,
                "w": 256,
                "h": 200
            }
        }
     }
} 
```

已使用`JSON.parse`varable 对其进行解析并存储在 `bts_json`. 我想遍历“name”的每个成员并检测它是否具有成员“frame”。下面是我的代码，我没有在控制台上打印任何内容。

```
buildingNames = bts_json.name;

for (buildingFrame in buildingNames) {
   if (buildingFrame.hasOwnProperty("frame")) {
          console.log('exists');
          console.log(buildingFrame["frame"]["y"]);
    }
} 
```

我哪里错了？

感谢您的帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T12:55:48.317

你不会得到 the `object`，但是`property name`in `buildingFrame`，所以你需要让它像

```
if (buildingNames[ buildingFrame ].hasOwnProperty("frame")) {
} 
```

# python - Python 自定义迭代器：在 StopIteration 上关闭文件

> ID：14797930
> 
> 赞同：9
> 
> 时间：2013-02-10T12:53:32.507
> 
> 标签：python, file-io, iterator

我写了一个迭代器类，它在它的`__init__`.

```
def __init__(self, path):
    self.file = open(path, "r") 
```

迭代完成后如何自动关闭该文件？

完整类：

```
class Parse(object):
    """A generator that iterates through a CC-CEDICT formatted file, returning
   a tuple of parsed results (Traditional, Simplified, Pinyin, English)"""
    def __init__(self, path):
        self.file = open(path, "r")

    def __iter__(self):
        return self

    def __is_comment(self, line):
        return line.startswith("#")

    def next(self):
        #This block ignores comments.
        line = self.file.readline()
        while line and self.__is_comment(line):
            line = self.file.readline()

        if line:
            working = line.rstrip().split(" ")
            trad, simp = working[0], working[1]
            working = " ".join(working[2:]).split("]")
            pinyin = working[0][1:]
            english = working[1][1:]
            return trad, simp, pinyin, english

        else:
            raise StopIteration() 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-10T13:15:11.327

编写整个内容的更好方法是将开头和迭代保留在一个地方：

```
class Parse(object):
    """A generator that iterates through a CC-CEDICT formatted file, returning
    a tuple of parsed results (Traditional, Simplified, Pinyin, English)"""
    def __init__(self, path):
        self.path = path

    def __is_comment(self, line):
        return line.startswith("#")

    def __iter__(self):
        with open(self.path) as f:
            for line in f:
                if self.__is_comment(line):
                    continue

                working = line.rstrip().split(" ")
                trad, simp = working[0], working[1]
                working = " ".join(working[2:]).split("]")
                pinyin = working[0][1:]
                english = working[1][1:]
                yield trad, simp, pinyin, english 
```

这将等待打开文件，直到您真正需要它，并在完成后自动关闭它。它的代码也更少。

如果你真的想进入“发电机真棒！” 心态：

```
def skip_comments(f):
    for line in f:
        if not.startswith('#'):
            yield line

...

    def __iter__(self):
        with open(self.path) as f:
            for line in skip_comments(f):
                working = .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T13:01:59.407

您需要在`StopIteration`提出后立即明确关闭它。在这种情况下，只需`.close()`在你自己加注时跟`StopIteration`注。

```
def next(self):
    #This block ignores comments.
    line = self.file.readline()
    while line and self.__is_comment(line):
        line = self.file.readline()

    if line:
        working = line.rstrip().split(" ")
        trad, simp = working[0], working[1]
        working = " ".join(working[2:]).split("]")
        pinyin = working[0][1:]
        english = working[1][1:]
        return trad, simp, pinyin, english

    else:
        self.file.close()
        raise StopIteration() 
```

由于您的`.next()`方法中没有其他代码可以触发`StopIteration`this 就足够了。

如果您*确实*`next()`在自己内部的另一个迭代器上使用过，则必须使用处理程序`.next()`捕获并重新引发异常。`StopIteration``except StopIteration:`

这只处理这种*情况*`StopIteration`。如果您想处理其他情况（不耗尽迭代器），您需要单独处理该情况。让你的班级成为一个[上下文管理器](http://docs.python.org/2/reference/datamodel.html#with-statement-context-managers) *也*可以帮助你。`with`然后，您的迭代器的用户将在对其进行迭代之前在语句中使用该对象，并且当`with`退出套件时，无论如何都可以关闭该文件。在这种情况下，您可能也希望将迭代器标记为“完成”：

```
_closed = False

def next(self):
    if self._closed:
        raise StopIteration

    line = self.file.readline()
    while line and self.__is_comment(line):
        line = self.file.readline()

    if line:
        working = line.rstrip().split(" ")
        trad, simp = working[0], working[1]
        working = " ".join(working[2:]).split("]")
        pinyin = working[0][1:]
        english = working[1][1:]
        return trad, simp, pinyin, english

    else:
        self.file.close()
        self._closed = True
        raise StopIteration()  

def __enter__(self):
    return self

def __exit__(self, type_, value, tb):
    self.file.close()  # multiple calls to .close() are fine
    self._closed = True 
```

# php - 单页：多个 query_posts

> ID：14797933
> 
> 赞同：3
> 
> 时间：2013-02-10T12:53:48.950
> 
> 标签：php, html, wordpress, loops

我计划为 Wordpress 主题制作一个模板页面，该页面将在页面的内容部分加载 5 个单独的“模块”。这些模块旨在每个显示不同类别的最新 4 个帖子（类似这样的工作[）](http://news.sky.com/)。

处理循环的最佳方法是什么？

由于 page.php 将调用 while have_posts 循环来执行模板，因此模板 php 本身将具有五个模块。通常我会做一段时间 have_posts 来查询，但是在一段时间内的一个页面内这样做五次 have_posts 似乎只是麻烦。

有没有更方便的方法来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T15:18:42.263

是的，执行多个循环的首选方法是为每个循环创建一个新的 WP_Query 对象。您知道现在使用 for 循环的 have_posts 函数等吗？他们只是帮手。这些方法也存在于 WP_Query 对象中，因此您可以为您创建的每个对象创建一个循环。

在这里阅读：http: [//codex.wordpress.org/Class_Reference/WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)

`get_posts`也浮现在脑海。但是您将无法使用该函数构建真正的 Wordpress 循环，因为它只返回数字数组中的帖子。

# ruby-on-rails - 将 angularjs 与 turbolink 一起使用

> ID：14797935
> 
> 赞同：60
> 
> 时间：2013-02-10T12:53:57.873
> 
> 标签：ruby-on-rails, angularjs, turbolinks

我正在尝试在我的应用程序中使用 Angularjs 框架和 turbolinks。页面更改后，它不会初始化新的事件监听器。有什么办法让它工作吗？提前致谢！

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2013-03-18T23:34:14.620

## AngularJS 与 Turbolinks

**Turbolinks**和**AnguluarJS**都可以用来使 Web 应用程序响应更快，因为响应用户交互，网页上会发生一些事情，而无需重新加载和重新渲染整个页面。

它们在以下方面有所不同：

*   **AngularJS**帮助您构建一个**富客户端应用程序**，您可以在其中编写大量运行在客户端机器上的 JavaScript 代码。此代码使站点与用户交互。它使用 JSON API 与服务器端后端（即 Rails 应用程序）进行通信。

*   **另一方面，**Turbolinks有助于使网站具有交互性，而无需您编写 JavaScript 代码。**它允许您**坚持**在服务器端运行的 Ruby/Rails 代码，并且仍然“神奇地”使用 AJAX 替换并因此重新呈现页面中已更改的部分。**

 **Turbolinks 的强大之处在于允许您使用这种强大的 AJAX 机制，而无需手动执行任何操作，只需编写 Ruby/Rails 代码，随着应用程序的增长，您可能会想要集成 JavaScript 框架，例如 AngularJS。

尤其是在这个中间阶段，您希望将 AngularJS 依次集成到您的应用程序中，一次一个组件，将 Angular JS 和 Turbolinks 一起运行是非常有意义的。

## 如何一起使用 AngularJS 和 Turbolinks

### 使用回调手动引导 Angular

在您的 Angular 代码中，您有一行定义您的应用程序模块，如下所示：

```
# app/assets/javascripts/angular-app.js.coffee
# without turbolinks
@app = angular.module 'MyApplication', ['ngResource'] 
```

此代码在页面加载时运行。但是由于 Turbolinks 只是替换了页面的一部分并阻止了整个页面的加载，因此您必须确保 angular 应用程序已正确初始化（“引导”），即使在 Turbolinks 完成此类部分重新加载之后也是如此。因此，将上面的模块声明替换为以下代码：

```
# app/assets/javascripts/angular-app.js.coffee
# with turbolinks
@app = angular.module 'MyApplication', ['ngResource']

$(document).on 'turbolinks:load', ->
  angular.bootstrap document.body, ['MyApplication'] 
```

### 不要自动引导

您经常在教程中看到如何使用`ng-app`HTML 代码中的属性自动引导 Angular 应用程序。

```
<!-- app/views/layouts/my_layout.html.erb -->
<!-- without turbolinks -->
<html ng-app="YourApplication">
  ... 
```

但是将这种机制与上面显示的手动引导一起使用会导致应用程序引导两次，因此会阻止应用程序。

因此，只需删除此`ng-app`属性：

```
<!-- app/views/layouts/my_layout.html.erb -->
<!-- with turbolinks -->
<html>
  ... 
```

## 延伸阅读

*   AngularJS 引导：[http ://docs.angularjs.org/guide/bootstrap](http://docs.angularjs.org/guide/bootstrap)
*   Turbolinks 上的 Railscasts（解释回调）：[http ://railscasts.com/episodes/390-turbolinks](http://railscasts.com/episodes/390-turbolinks)
*   演示应用程序：[https ://github.com/fiedl/rails-5-angular-and-turbolinks-demo](https://github.com/fiedl/rails-5-angular-and-turbolinks-demo)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-08-11T18:38:27.193

Turbolinks 试图优化页面的渲染并且会与 AngularJS 的正常引导冲突。

如果您在应用程序的某些地方使用 Turbolinks，并且某些部分使用 Angular。我提出**了这个优雅的解决方案：**

每个指向 angularapp 页面的链接（使用 ng-app="appname"）都应该具有以下属性：

```
<a href="/myapp" data-no-turbolink>Say NO to Turbolinks</a>. 
```

第二个 - 在 Stackoverflow 上提到的是通过处理 page:load 事件显式地重新加载/引导每个 ng-app。我认为这是侵入性的，更不用说您可能会加载页面上没有的内容，从而浪费资源。

我个人使用过上述解决方案。

希望能帮助到你

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-12T16:00:49.113

如果出现错误

> 未捕获的错误：[ng:btstrpd] 应用程序已使用此元素“文档”引导

升级到 angular 1.2.x 后，您可以使用下面的方法来解决问题。

```
angular.module('App').run(function($compile, $rootScope, $document) {
  return $document.on('page:load', function() {
    var body, compiled;
    body = angular.element('body');
    compiled = $compile(body.html())($rootScope);
    return body.html(compiled);
  });
}); 
```

在之前的帖子中，@nates 建议更改`angular.bootstrap(document, ['YourApplication'])`为`angular.bootstrap("body", ['YourApplication'])`，但这会导致未编译内容的闪现。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-03T00:06:13.123

将以下事件处理程序添加到您的应用程序。

咖啡脚本：

```
bootstrapAngular = ->
  $('[ng-app]').each ->
    module = $(this).attr('ng-app')
    angular.bootstrap(this, [module])

$(document).on('page:load', bootstrapAngular) 
```

Javascript：

```
function bootstrapAngular() {
  $('[ng-app]').each(function() {
    var module = $(this).attr('ng-app');
    angular.bootstrap(this, [module]);
  });
};
$(document).on('page:load', bootstrapAngular); 
```

这将导致在 Turbolinks 加载每个页面后启动 Angular 应用程序。

归功于[https://gist.github.com/ayamomiji/4736614](https://gist.github.com/ayamomiji/4736614)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-10T13:37:15.330

Turbolinks 对于客户端 MVC 框架不太有意义。Turbolinks 用于从服务器响应中去除除正文之外的所有内容。使用客户端 MVC，您应该只将 JSON 传递给客户端，而不是 HTML。

无论如何，turbolinks 都会创建自己的回调。

```
page:load
page:fetch
page:restore
page:change 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-08T22:32:41.963

[jquery.turbolinks](https://github.com/kossnocorp/jquery.turbolinks)插件可以通过 ng-app 指令触发模块的引导。如果您尝试手动引导模块，jquery.turbolinks 可能会导致 ng:btstrpd 错误。我发现的一个警告是 jquery.turbolinks 依赖于该`page:load`事件，该事件可以在任何新的特定于页面的`<script>`标签完成运行之前触发。`$injector:nomod`如果您在 application.js 之外包含模块定义，这可能会导致错误。如果您真的希望在仅包含在某些页面上的单独 javascript 文件中定义您的模块，您[可以](https://github.com/rails/turbolinks#opting-out-of-turbolinks)通过`data-no-turbolink`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-22T22:19:20.980

根据我看到的评论，在 Angular 与 Turbolinks 冲突的情况下（例如我允许 Angular 处理某些路由）同时使用两者的唯一有效场景是，如果我有一个现有的应用程序，我我试图移植到 Angular。

就个人而言，如果我要从头开始这样做，我认为最好的解决方案是决定应该处理路由并坚持下去。如果是 Angular，那么摆脱 Turbolinks -> 如果您有接近单页应用程序的东西，它不会为您做太多事情。如果您允许 Rails 处理路由，那么只需使用 Angular 来组织在提供模板时服务器无法处理的客户端行为。

我在这里错过了一个场景吗？即使在大型应用程序中，尝试在不同框架之间拆分路由职责对我来说似乎并不优雅......除了刷新页面或导航到新路由之外，是否存在其他一些 Turbolinks 会干扰 Angular 的场景？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-27T16:35:45.553

## 一起使用 Turbolinks 和 AngularJS

向@fiedl +1 以获得很好的答案。但我更喜欢使用`page:change`与，`page:load`因为这提供了一些灵活性：DOM 可以`page:load`从 turbolinks 以外的源接收事件，所以你可能不希望有相同的回调触发。

监视 a `page:change`，*然后*a`page:load`应该将您的回调行为限制为仅由 turbolinks 发起的事件。

```
function boostrapAngularJS () {
    angular.bootstrap(document.body, ['My Application']);
    addCallbackToPageChange();
}
function addCallbackToPageChange() {
    angular.element(document).one('page:change', function () {
        angular.element(this).one('page:load', boostrapAngularJS);
    });
}
addCallbackToPageChange(); 
```

（这将允许/要求您将`ng-app`声明保留在 html 中，与使用 AngularJS 时一样。）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-04-28T22:25:36.930

> Turbolinks 自动获取页面、交换其`<body>`并合并其`<head>`，所有这些都不会产生整个页面加载的成本。

[https://github.com/turbolinks/turbolinks#turbolinks](https://github.com/turbolinks/turbolinks#turbolinks)

因此，我们可以在元素上执行，而不是在元素上添加`ng-app`指令。`<html>``<body>`

```
<html>
  <body ng-app=“yourApplicationModuleName">
  </body>
</html> 
```**

# php - 将 Cakephp 从最新版本降级到 1.3.15

> ID：14797945
> 
> 赞同：0
> 
> 时间：2013-02-10T12:55:20.323
> 
> 标签：php, cakephp

我正在尝试将 Cakephp 项目从最新版本降级到 1.3.15，以便它可以在我当前的服务器设置上运行，我不想升级我的 PHP 版本，因为我不想搞砸我的服务器设计、安全性和基础设施除了我在同一台服务器上有很多项目旨在使用这个确切的 PHP 版本，我是一个完全的 Cakephp 菜鸟，但我正在使用 CodeIgniter，有什么想法吗？

# java - 我在对象之间发送数据的方法有哪些缺陷？

> ID：14797946
> 
> 赞同：0
> 
> 时间：2013-02-10T12:55:25.587
> 
> 标签：java, oop

我正在制定一个游戏项目的布局，并为“抽象游戏世界”的实现提出了一些具体的想法。

在这个游戏世界中，一切都被表示为一个游戏对象（车辆、单位、粒子效果……）。我想保持这些对象隔离，以便在运行时它们之间不存在任何依赖关系。

为此，我让对象请求其他对象的 ID，以便它们可以相互发送消息，然后将消息传递给具有该 ID 的对象。

我必须解决的问题是要有一种从其他对象请求数据的方法。例如，车辆当前是否有司机。我已经考虑了一些方法来做到这一点，但到目前为止，我最接近的是一种特殊类型的消息，其中发送方向另一个对象发送特殊消息，接收对象应将请求的数据放入其中目的。

这是我为说明对象如何工作而编写的“存根”：

```
public class DataRequestMessage extends Message {
    public final RequestedDataType dataType;
    private boolean requestedDataReceived = false;
    private String stringValue;

    public DataRequestMessage(MessageType type, RequestedDataType dataType) {
        super(type);
        this.dataType = dataType;
    }

    public void setString(String value) {
        if(requestedDataReceived) {
            throw new RuntimeException("The content of the data request object has already been set");
        }
        if(dataType != RequestedDataType.String) {
            throw new RuntimeException("Data type object expects a value of type " + dataType + ", but received one of type String.");
        }
        requestedDataReceived = true;
        this.stringValue = value;
    }

    public String getString() {
        if(dataType != RequestedDataType.String) {
            throw new RuntimeException("This data type object has type " + dataType + ", and can therefore not return a String value.");
        }
        return stringValue;
    }
} 
```

如您所见，当该对象未按预期使用时，它将成为雷区。但是，我仍然担心一个对象期望另一个对象做某事，从而在两者之间产生依赖关系。

这种方法是从其他对象请求任意数据的好方法吗？或者期望另一个函数对提供的对象执行操作总是一个坏主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T13:25:13.483

一些可能与您相关的注意事项：

*   您正在实施的已经是一个既定的设计，称为 Actor 模型。在推出自己的系统之前，至少研究一下现有系统可以为您做什么似乎是明智的；

*   您基本上放弃了 Java 的静态类型安全性并在运行时进行所有检查，就像在动态语言中一样。是的，它实现了解耦，但它必然意味着更多的运行时错误。但是，这些错误很难追踪和修复。这就是为什么人们不会拒绝动态语言的原因；

*   我建议将数据类型验证作为您的框架的一项功能（或现有的，如果您找到合适的）；将该关注点与实际的消息传递分开。

这**可能**是您学习另一种基于 JVM 的语言的机会，这将使这一切更容易处理。Scala 实现了一个 Actor 模型，所需的样板代码比 Java 少得多。另一个绝佳的选择是 Clojure。

# c++ - 如何将 LPTSTR 传递给函数并修改其内容

> ID：14797948
> 
> 赞同：0
> 
> 时间：2013-02-10T12:55:32.370
> 
> 标签：c++

我需要一个提供 LPTSTR 和枚举值的函数，根据该值构造一个字符串并将其放入 LPTSTR。

我编写了以下函数，它使用由枚举值索引的名称数组：

```
bool GetWinClassName(const int &WinType, LPTSTR *className, const int bufSize)
{
    bool allOk = true;
    LPTSTR tempName = new TCHAR[bufSize];
    _stprintf_s(tempName, bufSize, TEXT("Win%sClass"), g_WinNames[WinType]);
    std::cout << (char*)tempName << std::endl;
    if (FAILED(StringCchCopy(*className, (bufSize+1)*sizeof(TCHAR), tempName)))
    {
        allOk = false;
    }
    delete[] tempName;
    return allOk;
} 
```

（最初我只是`_stprintf_s`使用`className`而不是`tempName`，这已被分解以查找错误所在的位置。）

上面的代码在 VC2010 Express 中编译，但`*className`在尝试执行该`StringCchCopy`行时给出了一个未处理的异常：“访问冲突写入”到（大概）。

我可以这样做

```
className = new TCHAR[bufSize]; 
```

在调用函数之前（后面有一个匹配 `delete[]`），但每次我想调用函数时我真的需要这样做吗？

我知道问题出*在哪里*，但不*知道为什么*会阻碍我想出一个可行的解决方案。在我看来，问题是我不能在 LPTSTR（通过`_stprintf_s`或`StringCchCopy`）中放入一些东西，除非我使用`new TCHAR[bufSize]`. 我尝试为它分配一个大小完全相同但结果相同的初始值，这让我认为内存分配实际上与它无关。然后以某种方式将我的 LPTSTR 转换为 TCHAR []？我不知道这怎么可能，但在这个阶段，我什么都相信。

有人可以解释我做错了什么吗？（或者至少我的理解是错误的。）一个可能相关的问题是为什么我`std::cout`只显示字符串的第一个字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T13:01:46.407

```
wstring winClassName( int const winType )
{
    return wstring( L"Win" ) + g_WinNames[winType] + L"Class";
} 
```

但我完全困惑为什么你有这样的全局名称数组等：这可能是一个设计级别的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T13:11:51.130

> 每次我想调用该函数时，我真的需要这样做吗？

LPTSTR 值不是字符串对象，它只是一个指向 TCHAR 的指针。如果不分配缓冲区，你认为字符会去哪里？您必须确保`className`指针参数指向您可以写入的内存缓冲区。是否每次都分配一个新的缓冲区取决于您。

正如 Alf 暗示的那样，更好的选择是完全避免直接使用指针和动态分配的数组，并返回一个字符串对象。

> 为什么我的 std::cout 只显示字符串的第一个字符？

如果定义了 UNICODE，请改用 std::wcout。

# php - 使用位于其他服务器上的 CURLOPT_POSTFIELDS 文件发送

> ID：14797953
> 
> 赞同：-1
> 
> 时间：2013-02-10T12:56:15.597
> 
> 标签：php

可以使用 CURLOPT_POSTFIELDS 发送不在运行我的脚本的服务器上的源文件吗？所以我可以将文件发送到服务器抛出 url 而不是 dir 路径

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T12:57:27.250

不可以。您需要先检索文件并将其保存在本地。

# unix - cygwin/unix 在某些模式之后/之前查找文本

> ID：14797957
> 
> 赞同：1
> 
> 时间：2013-02-10T12:56:51.930
> 
> 标签：unix, sed, cygwin

考虑我们有文字：

```
<li><a href="link">text1</a> 
```

获取“链接”（文本1之前的网址）的最快方法是什么。

考虑到相同的情况，如何在链接之后找到文本，fe 提供“链接”，期望得到 text1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T13:05:40.413

**获取链接**

试试 grep

```
grep -Po '(?<=href=")[^"]*' file 
```

用你的例子测试：

```
kent$  echo '<li><a href="link">text1</a>'|grep -Po '(?<=href=")[^"]*'
link 
```

**获取文本**

假设您将“链接”保存在变量中`l`：

```
grep -Po "(?<=href=\"$l\">)[^<]*" 
```

会给你文字

试试你的例子：

```
kent$  l=link                                                               

kent$  echo '<li><a href="link">text1</a>'|grep -Po "(?<=href=\"$l\">)[^<]*"
text1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T13:06:48.977

使用`sed`：

要查找“链接”：

```
echo '<li><a href="link">text1</a>' | sed 's/.*"\([^"]\+\)">text1.*/\1/' 
```

要查找“text1”：

```
echo '<li><a href="link">text1</a>' | sed 's/.*"link">\([^<]\+\).*/\1/' 
```

* * *

使用`grep`和`Perl`正则表达式：

要查找“链接”：

```
echo '<li><a href="link">text1</a>' | grep -oP '[^"]*(?=">text1)' 
```

要查找“text1”：

```
echo '<li><a href="link">text1</a>' | grep -oP '(?<="link">)[^<]*' 
```

# jsp - 如何保护 JSP Web 应用程序中的链接？

> ID：14797958
> 
> 赞同：0
> 
> 时间：2013-02-10T12:56:55.410
> 
> 标签：jsp, jakarta-ee, servlets, authorization, security

我根据用户角色在我的 webapp 中隐藏了一些链接......现在，例如，我将链接 sample.jsp 隐藏在我的用户中，角色等于 1。当然这会隐藏，但如果这个用户知道链接，他最终可以去到那个链接...如何配置这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T13:10:46.843

当有人访问链接指向的 URL 时，检查他们是否已经过身份验证（如果没有，向他们显示登录页面）以及他们通过身份验证的用户是否有权访问该页面（如果没有，向他们显示一条错误消息，说明并给他们一个“以不同用户身份登录”表格）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T13:55:35.100

Quentin 的建议应该可以，如果您正在开发演示应用程序，这可能就足够了，

但是，如果您认真实施强大的身份验证和授权，那么您应该认真考虑学习任何开源安全框架。

这可以避免很多麻烦，特别是如果您为您的应用程序自定义构建安全性。

*   JAAS[教程](http://java.sun.com/javase/6/docs/technotes/guides/security/jaas/tutorials/index.html)| [参考指南](http://java.sun.com/javase/6/docs/technotes/guides/security/jaas/JAASRefGuide.html)

*   [希罗阿帕奇](http://shiro.apache.org/)

*   [春季安全](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/springsecurity-single.html#what-is-acegi-security)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T16:38:02.297

首先，选择一个吸引您的安全框架，如 Sudhakar 提出的 Apache Shiro 或 Spring Security。要了解不同的安全框架，您可能会喜欢 Matt Raible 在此处对 2011 年的概述：[Spring Security](http://raibledesigns.com/rd/entry/java_web_application_security_part1)和[Apache Shiro](http://raibledesigns.com/rd/entry/java_web_application_security_part2)等。

接下来，如果您选择安全框架，您应该能够非常简单地遵循 Quentin 的回答。

*非常基本*的方案是根据角色（您应该有*一些*）将页面划分为逻辑组：例如，具有路径`/admin/users/edit`(and `admin/...`) 的页面将针对具有管理员角色的人，`/user/order/view`(and `user/...`) 将对已注册的人可见如果您希望为特定用户角色呈现页面的某些部分，则需要更高级的设置，例如两个管理员都可以访问`/user/edit`，但仅当当前用户的角色等于管理员时才会呈现按钮删除。为了更加保护应用程序，您选择的框架应该提供一种基于用户角色保护业务逻辑方法的方法。可能还有一些特殊的标签来简化视图的创建，比如`<shiro:hasRole>`，如果你选择 Shiro。

但是您的情况的基本解决方案是`<h:link rendered="#{currentUser.roleOne}"/>`使用 backing-bean method `public boolean isRoleOne() { return role.equals("1"); }`。当然，它只会隐藏链接，但用户仍然可以通过其 url 访问该页面。因此，您最终将要么编写大量的过滤器样板代码，要么使用被广泛接受的安全框架提出的解决方案。

# php - jQuery AJAX 加载两次

> ID：14797959
> 
> 赞同：1
> 
> 时间：2013-02-10T12:57:01.197
> 
> 标签：php, javascript, jquery, html

我正在编写一个网站，但我遇到了问题。

我有以下 jQuery 代码：

```
$('input[type="text"][name="appLink"]').keyup(function() {

    var iTunesURL = $(this).val();
    var iTunesAppID = $('input[name="iTunesAppID"]').val();

    $.ajax({
        type: 'POST',
        url: jsonURL,
        dataType: 'json',
        cache: false,
        timeout: 20000,
        data: { a: 'checkiTunesURL', iTunesURL: iTunesURL, iTunesAppID: iTunesAppID },
        success: function(data) {
            if (!data.error) {
                $('section.submit').fadeOut('slow');
                //Modifying Submit Page
                setTimeout(function() {
                    $('input[name="appLink"]').val(data.trackViewUrl);
                    $('div.appimage > img').attr('src', data.artworkUrl512).attr('alt', data.trackName);
                    $('div.title > p:nth-child(1)').html(data.trackName);
                    $('div.title > p:nth-child(2)').html('by '+data.sellerName);
                    $('span.mod-category').html(data.primaryGenreName);
                    $('span.mod-size').html(data.fileSizeBytes);
                    $('span.mod-update').html(data.lastUpdate);
                    $('select[name="version"]').html(data.verSelect);
                    $('input[name="iTunesAppID"]').attr('value', data.trackId);
                }, 600);
                //Showing Submit Page
                $('section.submit').delay('600').fadeIn('slow');
            } else {
                $('.json-response').html(data.message).fadeIn('slow');
            }
        },
        error: function(jqXHR, textStatus, errorThrown) {
            //$('.json-response').html('Probléma történt! Kérlek próbáld újra később! (HTTP Error: '+errorThrown+' | Error Message: '+textStatus+')').fadeIn('slow');
            $('.json-response').html('Something went wrong! Please check your network connection!').fadeIn('slow');
        }
    });
}); 
```

有时（随机）内容会淡出两次。你能告诉我有什么问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T13:00:59.543

我猜页面是从javascript动态生成的，

如果你执行以下函数两次，那么由于它执行了两次，
所以会有两个事件，所以更好的方法是取消绑定所有之前*的 'keyup'*事件并重新绑定它。

尝试这个，

```
 $('input[type="text"][name="appLink"]').unbind('keyup').keyup(function() {

 }); 
```

# java - 将spring mvc与hibernate一起使用会更好吗？

> ID：14797963
> 
> 赞同：2
> 
> 时间：2013-02-10T12:57:35.483
> 
> 标签：java, spring, hibernate, jsp, spring-mvc

我打算开发**小型ERP系统**。该产品只有一个主要要求是支持多个数据库。

我计划使用

**前端：** JSP+JSTL+JQuery [我对此有很好的命令] + 我创建了自己的自定义组件，以实现可重用性和完全控制我的组件。

**后端：**使用 hibernate[ORM] 框架[由于跨数据库]，我对此也有很好的了解。

我对以上内容感到满意，并有信心很快建立产品。 **但**

```
My friend made me unhappy ;) 
```

我的朋友建议我，你应该使用**spring MVC和hibernate**，因为当你的产品变大时，由于许多开发人员的参与，它会在未来产生问题。所以，你应该使用框架，让每个开发人员都遵循模式，然后你的产品保持稳定。

```
But I am already follow hibernate pattern :) 
```

我对Spring MVC一无所知。当我搜索 spring MVC 时，我发现它与我的要求不同，并且如果我将 Spring MVC 与休眠一起使用，我还会发现 Cross database context 问题。

我是否应该使用spring MVC。如果是，我必须学习 Spring MVC，如果 Spring 不适合我，我不想浪费我的时间。

这就是为什么我要咨询那个论坛，寻找正确的方向。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T13:11:47.553

实际上，Spring MVC 不会干扰您已经选择的任何组件。它只是介绍了一种以标准方式（MVC 模式）构建前端 - 后端接口的方法。

我实际上运行了相同的设置并且对此非常满意。（jQuery、JSP、Spring MVC、休眠）。

除了结构之外，当您想做 Ajax 繁重的事情（我假设您希望在 ERP 应用程序中）时，您将在 Spring MVC 中轻松获得投资时间的回报。用 jQuery 和 SpringMVC 构建 AJAX/JSON 东西很简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T13:24:53.363

使用 Spring MVC 将使您的应用程序结构化。这将有助于以后的维护。

您的代码看起来很干净，您可以将代码分成组件，Spring 将帮助您将它们连接在一起，您可能决定以不同的方式组合它们，或者希望根据不同的设置轻松地将一个组件换成另一个组件或环境。当与 hibernate 一起使用时，这对于多个数据库来说非常有用。

如果你对 Java EE 有很好的了解，学习 Spring 不会花太多时间。

# java - 如何在android中显示地图视图可见部分的位置图钉？

> ID：14797964
> 
> 赞同：8
> 
> 时间：2013-02-10T12:57:39.060
> 
> 标签：java, android, android-maps

这是我`asynctask`将 pin 放在从 XML 解析的某个位置的部分。这对于小型位置数据集来说很好，但当位置数据集很大时需要很长时间。

```
private class MapLoader extends AsyncTask<Void, Void, Void> {
    ProgressDialog dialog;
    ArrayList<POI>[] mappoiList;

    @Override
    protected void onPreExecute() {
        mapOverlays = mapview.getOverlays();
        dialog = new ProgressDialog(MainActivity.this);
        dialog.show();
    }

    @Override
    protected Void doInBackground(Void... params) {

        try {

            URL url = new URL(MainActivity.baseUrl
                    + "latitude=40.9192799&longitude=-74.0657508&distance=20");

            SAXParserFactory spf = SAXParserFactory.newInstance();
            SAXParser sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();
            ParserHandler parserHandler = new ParserHandler();
            xr.setContentHandler(parserHandler);
            xr.parse(new InputSource(url.openStream()));
            Log.d("Thread", url.toString());
            basicItems = parserHandler.getBasicItems();
            featuredItems = parserHandler.getFeaturedItems();
            restaurants = parserHandler.getRestaurants();
            mapvisibleList = new ArrayList<POI>();
            mappoiList = new ArrayList[2];
            mappoiList[0] = new ArrayList<POI>();
            mappoiList[1] = new ArrayList<POI>();

            for (int i = 0; i < featuredItems.size(); i++) {

                POI poi = new POI(featuredItems.get(i), 1);
                mappoiList[0].add(poi);
            }
            for (int i = 0; i < restaurants.size(); i++) {

                POI poi = new POI(restaurants.get(i), 2);
                mappoiList[0].add(poi);
            }
            for (int i = 0; i < basicItems.size(); i++) {

                POI poi = new POI(basicItems.get(i), 0);
                mappoiList[1].add(poi);
            }

            for (int i = 0; i < mappoiList[0].size(); i++) {
                if (mappoiList[0] != null) {
                    mapvisibleList.add(mappoiList[0].get(i));
                }
            }

            for (int i = 0; i < mappoiList[1].size(); i++) {
                if (mappoiList[1] != null) {
                    mapvisibleList.add(mappoiList[1].get(i));
                }
            }
            for (FeaturedItem item : featuredItems) {
                Log.d("FEATURED",
                        item.getName() + "Distance: " + item.getDistance());
            }
            for (Restaurant item : restaurants) {
                Log.d("RESTAURANTS",
                        item.getName() + "Distance: " + item.getDistance());
            }
            for (BasicItem item : basicItems) {
                Log.d("BASIC",
                        item.getName() + "Distance: " + item.getDistance());
            }

        } catch (MalformedURLException e) {
            e.printStackTrace();
            showErrorDialog("Error", "Malformed URL Error Occurred");
        } catch (ParserConfigurationException e) {
            e.printStackTrace();
            showErrorDialog("Error",
                    "Parser Configuration Problem Occurred");
        } catch (SAXException e) {
            e.printStackTrace();
            showErrorDialog("Error", "SAX Parser Error Occurred");
        } catch (IOException e) {
            e.printStackTrace();
            showErrorDialog("Error", "IOException Occurred");
        } catch (Exception e) {
            e.printStackTrace();
        }

        GlobalData.gBasicItems = basicItems;
        GlobalData.gFeaturedItems = featuredItems;
        GlobalData.gRestaurants = restaurants;

        if (currentLocation != null) {
            int curLat = (int) (currentLocation.getLatitude() * 1e6);
            int curLon = (int) (currentLocation.getLongitude() * 1e6);
            GeoPoint gp = new GeoPoint(curLat, curLon);
            mapControl.animateTo(gp);

            mapControl.setZoom(14);
            OverlayItem item = new OverlayItem(gp, "My Location",
                    "My Location");

            itemizedOverlay1 = new MyItemizedOverlay(drawableFeature,
                    MainActivity.this, mappoiList[0]);
            itemizedOverlay2 = new MyItemizedOverlay(drawableBasic,
                    MainActivity.this, mappoiList[1]);
            itemizedOverlay3 = new MyItemizedOverlay(drawableCurrent,
                    MainActivity.this, mappoiList[0]);
            Log.i("asyncbasic", "" + basicItems.size());
            Log.i("asyncfeatured", "" + featuredItems.size());
            Log.i("asyncres", "" + restaurants.size());
            if (featuredItems != null) {
                int featuredLength = featuredItems.size();
                for (int i = 0; i < featuredLength; i++) {
                    FeaturedItem fItem = featuredItems.get(i);
                    int lat = (int) (Double
                            .parseDouble(fItem.getLatitude()) * 1e6);
                    int lon = (int) (Double.parseDouble(fItem
                            .getLongitude()) * 1e6);
                    OverlayItem oItem = new OverlayItem(new GeoPoint(lat,
                            lon), fItem.getName(), "Feature");
                    itemizedOverlay1.addOverlay(oItem);
                    Log.i("Map over lay", "Finished one featured");
                }
            }
            if (basicItems != null) {
                int basicLength = basicItems.size();
                for (int i = 0; i < basicLength; i++) {
                    BasicItem bItem = basicItems.get(i);
                    int lat = (int) (Double
                            .parseDouble(bItem.getLatitude()) * 1e6);
                    int lon = (int) (Double.parseDouble(bItem
                            .getLongitude()) * 1e6);
                    OverlayItem oItem = new OverlayItem(new GeoPoint(lat,
                            lon), bItem.getName(), "Basic");
                    itemizedOverlay2.addOverlay(oItem);
                    Log.i("Map over lay", "Finished one Basic");

                }
            }
            if (restaurants != null) {
                int resLength = restaurants.size();
                for (int i = 0; i < resLength; i++) {
                    Restaurant res = restaurants.get(i);
                    int lat = (int) (Double.parseDouble(res.getLatitude()) * 1e6);
                    int lon = (int) (Double.parseDouble(res.getLongitude()) * 1e6);
                    OverlayItem oItem = new OverlayItem(new GeoPoint(lat,
                            lon), res.getName(), "Restaurant");
                    itemizedOverlay1.addOverlay(oItem);
                    Log.i("Map over lay", "Finished one Restaurant");
                }
            }

            itemizedOverlay3.addOverlay(item);
        }

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        mapOverlays.clear();
        mapOverlays.add(itemizedOverlay1);
        mapOverlays.add(itemizedOverlay2);
        mapOverlays.add(itemizedOverlay3);
        mapview.postInvalidate();
        dialog.dismiss();

    }
} 
```

我学会了使用`getLatitudeSpan`和`getLongitudeSpan`摆脱这个问题，但我不太清楚在我的异步任务中在哪里以及如何使用它。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:18:51.357

您正在使用一个非常耗时的**sax 解析器，使用像 json 这样的对象模型代表，它可能很容易解析，因此可以绘制在地图上。**

//很少有建议本身可以减少您面临的时间问题。

1.  仅绘制引脚并单击打开一个弹出窗口以在其中显示更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:46:08.537

请给出花费时间较长的确切数据大小，还可以尝试分析代码以查看每个代码块花费的时间。

但是看看代码，如果正在操作的数据增加，循环遍历所有这些变量会对时间产生重大影响，

尝试简化/组合循环，

例如这个循环

```
 for (int i = 0; i < featuredItems.size(); i++) {

                POI poi = new POI(featuredItems.get(i), 1);
                mappoiList[0].add(poi);
            } 
```

和这个

```
 if (featuredItems != null) {
                  int featuredLength = featuredItems.size();
                   for (int i = 0; i < featuredLength; i++) {
                    FeaturedItem fItem = featuredItems.get(i);
                    int lat = (int) (Double
                            .parseDouble(fItem.getLatitude()) * 1e6);
                    int lon = (int) (Double.parseDouble(fItem
                            .getLongitude()) * 1e6);
                    OverlayItem oItem = new OverlayItem(new GeoPoint(lat,
                            lon), fItem.getName(), "Feature");
                    itemizedOverlay1.addOverlay(oItem);
                    Log.i("Map over lay", "Finished one featured");
                }
            } 
```

不能合并吗？

还有这个循环

```
 for (int i = 0; i < basicItems.size(); i++) {

                POI poi = new POI(basicItems.get(i), 0);
                mappoiList[1].add(poi);
                } 
```

和这个

```
 if (basicItems != null) {
                int basicLength = basicItems.size();
                for (int i = 0; i < basicLength; i++) {
                    BasicItem bItem = basicItems.get(i);
                    int lat = (int) (Double
                            .parseDouble(bItem.getLatitude()) * 1e6);
                    int lon = (int) (Double.parseDouble(bItem
                            .getLongitude()) * 1e6);
                    OverlayItem oItem = new OverlayItem(new GeoPoint(lat,
                            lon), bItem.getName(), "Basic");
                    itemizedOverlay2.addOverlay(oItem);
                    Log.i("Map over lay", "Finished one Basic");

                }
            } 
```

也可以组合，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:42:47.713

您可能想看看实现一个生产者-消费者模型，其中消费者将是地图本身，生产者将是为 pin 生成信息的逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T11:38:35.907

我认为问题不在于覆盖。您正在使用 sax 解析器获取所有项目，这会花费您的时间。您试图获取所有元素，然后将其添加到地图中。如果您将代码修改为当您获得单个元素更新以覆盖和填充它时，这可能会加快您的执行速度。如果您仍然遇到同样的问题，请尝试使用覆盖的单独线程或画布对象（通过地理点的投影）添加元素。

# ms-access - 如何将组合框与 txt 框连接起来？

> ID：14797965
> 
> 赞同：2
> 
> 时间：2013-02-10T12:57:41.330
> 
> 标签：ms-access, ms-access-2007, vba

我有一个`"monades"`用三个字段命名的表

```
1.monada
2.nomos
3.perioxi 
```

我在第一个字段 (monada) 中的条目在第二个字段 (nomos) 和第三个字段 (perioxi) 中有一个唯一条目。

我为“monada”字段和两个文本框创建了一个表单，其中一个用于其他字段。

每次更改组合框的值时，我都想更新 2 个文本框。

例如，如果我在组合框中选择“1o MAL”，我想在 nomos txt 框中获得“crete”，在 perioxi txt 框中获得“chania”。

为了得到这个，我在每个 txt 框的 BeforeUpdate 方法中添加了这一行

```
=[monades]![nomos} and = [monades]![perioxi]. 
```

我的表格与“monades”表相关联

我怎样才能修复它并完成我的工作？我已经浪费了很多时间来让它工作..:(

更新：

像这样的东西也不起作用

```
Private Sub monada_AfterUpdate()
If Not IsNull(Me!monada) Then
     Me!nomos.Value = Me!monada.Column(1)
     Me!perioxi.Value = Me!monada.Column(2)
     Me.Requery
End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T14:04:56.540

My fault is that i had to set "Column Count=3". If i fix that,and i paste the Update code from above everything works fine!! Thanks for your time mates!!:)

# in-app-purchase - 设置报亭应用内购买

> ID：14797967
> 
> 赞同：0
> 
> 时间：2013-02-10T12:57:50.307
> 
> 标签：in-app-purchase, app-store-connect, newsstand-kit

我创建了一个 Newsstand 应用程序来创建 Mag+。一切都很漂亮，效果很好，但该应用程序被拒绝，原因是

```
"We found that your app has an associated free subscription, however, it does not include a mechanism for the user to sign up for the free subscription.
It is required to revise the app to include the mechanism to allow user to sign up for the free subscription." 
```

那么设置免费订阅的具体步骤是什么？

请不要只是复制 Apple 链接并说“去这里”，因为他们写的任何内容都没有意义。

注意：这是在构建过程中使用另一个服务，所以我对应用程序中的内部代码无能为力，只有 itunesconnect 设置。

谢谢......*每次你帮我救了一只小猫！*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T11:56:53.063

就像任何其他 IAP 一样，需要在 iTunes（开发人员帐户）中为您的应用创建免费订阅 IAP（应用内产品），并且应用中必须有一个选项，用户可以从中看到该订阅并选择订阅。

您的应用中似乎没有订阅杂志的选项（例如“免费订阅”按钮等）。Apple 要求所有报亭应用程序的订阅可用性。在点击免费订阅选项（例如按钮）时，应该会进行正常的应用内购买（尽管是免费的）。

# php - php中的RESTfull网站

> ID：14797969
> 
> 赞同：0
> 
> 时间：2013-02-10T12:58:28.250
> 
> 标签：php, rest

我很难理解网站的 RESTfull 架构。我确实了解了路由和uri等的基本概念。所以为了理解它，我决定用php制作一个基本的网站，以获得大脑肌肉记忆中的实现概念。

php中有很多RESTful框架和很多教程，但我想学习这个概念的实现。框架会为我做的事情，我不会学习。

有人可以~~建议~~给我一个启动指南/代码来用 PHP 构建一个 REST 网站。不使用任何框架。正确路由请求的说明等。学生学习指南。

**编辑：**
显然，*建议*这个词让人们认为这个问题不是一个好的堆栈溢出 Q/A 格式。我作为学生寻求帮助。而且`suggest`听起来比`give`我使用它的原因更礼貌。

# algorithm - 有没有办法检查两个正则表达式是否可以匹配相同的字符串？

> ID：14797970
> 
> 赞同：1
> 
> 时间：2013-02-10T12:58:42.693
> 
> 标签：algorithm

我有两个正则表达式。我需要确定是否可以同时构建与这两个正则表达式匹配的给定长度的字符串。我需要算法来做到这一点。

字符串的长度不会超过 20 个字符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T13:20:51.467

这取决于。对于 perl 兼容的正则表达式 (pcre)，这通常是不可能的，因为它们已经完成了：您甚至无法确定匹配总是终止。

对于乔姆斯基层次结构中定义的原始“干净”形式的正则语言，已知它们在交集下是封闭的，这已经在[这个线程](https://stackoverflow.com/questions/2338716/testing-intersection-of-two-regular-languages#2338952)中讨论过。

一旦你有了交叉点的[NFA](https://en.wikipedia.org/wiki/Nondeterministic_finite_automaton)，就很容易检查是否有任何字符串匹配它 - 如果 thera 是从你的 NFA 开始到结束的路径，那么这个路径的字符串就是你正在搜索的字符串，对于DFAs，[这里](http://faculty.ycp.edu/~dhovemey/fall2010/cs340/lecture/lecture12.html)给出了一个算法，应该很简单的让它适应NFAs。

# git - Git 恢复：“目标文件为空”。如何重建树木？

> ID：14797978
> 
> 赞同：3
> 
> 时间：2013-02-10T13:00:05.677
> 
> 标签：git, git-submodules, corruption, recovery

*注意：我没有此存储库的任何损坏前克隆。我相信我的情况与这里描述的其他人不同，因为我缺少一棵树，而不是一团。*

发生了什么：

当我尝试通过 LAN（通过 SSH）克隆存储库时，Git 返回一个错误，指出存储库已损坏：

```
remote: error: object file ./objects/2e/223ce259e9e33998d434acc778bc64b393d5d4 is empty
remote: fatal: loose object 2e223ce259e9e33998d434acc778bc64b393d5d4 (stored in ./objects/2e/223ce259e9e33998d434acc778bc64b393d5d4) is corrupt
error: git upload-pack: git-pack-objects died with error.
fatal: git upload-pack: aborting due to possible repository corruption on the remote side.
remote: aborting due to possible repository corruption on the remote side. 
```

我找到了`git fsck`可以用来诊断腐败的地方，但它没有告诉我任何新信息：

```
git fsck --full
error: object file ./objects/2e/223ce259e9e33998d434acc778bc64b393d5d4 is empty
fatal: loose object 2e223ce259e9e33998d434acc778bc64b393d5d4 (stored in ./objects/2e/223ce259e9e33998d434acc778bc64b393d5d4) is corrupt 
```

我尝试在本地（使用`--no-hardlinks`）克隆存储库以查看会发生什么，但我得到了完全相同的结果。

然后我偶然发现了[这个问题](https://stackoverflow.com/questions/11706215/how-to-fix-git-error-object-file-is-empty)，回答的人刚刚删除了空文件（第 3 步），所以我这样做了（即我已经`223ce259e9e33998d434acc778bc64b393d5d4`从子目录中删除了文件`objects/2e/`）。

`git fsck`再次，我看到：

```
Checking object directories: 100% (256/256), done.
broken link from    tree 838e437f371c652fa4393d25473ce21cbf697d7a
              to    tree 2e223ce259e9e33998d434acc778bc64b393d5d4
dangling commit 54146bc0dc4eb3eede82a0405b749e05c11c5522
missing tree 2e223ce259e9e33998d434acc778bc64b393d5d4
dangling commit 864864feec207786b84158e526b2faec7799fd4e
dangling blob d3cfd7cc7718d5b76df70cf9865db01c25181bfb 
```

所以，现在 tree 有问题了`838e437f37`。上面提到的那个人不是这样的，所以我去谷歌搜索[了一下，从 Linus 那里找到了一些信息](http://git.kernel.org/?p=git/git.git;a=blob;f=Documentation/howto/recover-corrupted-blob-object.txt;h=323b513ed0e0ce8b749672f589a375073a050b97;hb=HEAD#l20)。

所以，我做到了`git ls-tree 838e437f371c652fa4393d25473ce21cbf697d7a`，在输出中有一行阅读：

```
040000 tree 2e223ce259e9e33998d434acc778bc64b393d5d4    moje 
```

现在，“moje”是一个目录（与 Linus 解释的示例不同，它是一个文件）。我想这就是 Linus 建议的下一步，`git hash-object moje`返回的原因`fatal: Unable to hash moje`。

但无论如何，它只是我需要的机会很小，所以我继续寻找。我跑了`git log --raw --all --full-history -- moje/`，根据 Linus 的指南，应该有一个提交将 2e223 列为某些内容的 SHA-2 哈希，但没有。列表以

```
fatal: unable to read source tree (2e223ce259e9e33998d434acc778bc64b393d5d4) 
```

我尝试查看在该错误之前列出的最后一次提交，但我没有找到这个哈希值。我见过[这个](https://stackoverflow.com/questions/11639751/rebuild-loose-missing-tree-in-git-when-there-are-no-other-missing-objects)，但它对我没有帮助，可能是因为有*问题*的版本和工作树的当前状态之间存在一些变化。

有一件事可能很重要：里面`moje/`有一个目录`cli/`，它本身就是一个 Git 存储库（一个子模块）。我在那里寻找有问题的 SHA-2 哈希，但没有找到。

我该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T09:20:24.507

命令（由 Chronial 建议）

```
git rev-list --all | xargs -l -I '{}' sh -c 'if git ls-tree -rt {} > /dev/null 2>&1 ; then true; else git log --oneline -1 {}; git ls-tree -r -t {} | tail -1; fi' 
```

返回依赖于丢失`2e223ce`对象的第一个提交 - 它的 SHA-2 哈希是`499b8fb`. 它的父级没问题（我可以看到它的内容，检查它等等），我还能够检查损坏的提交之后的下一个提交（`89b0fc4`）。

现在我需要看看这两个“好”提交之间发生了什么变化——这很简单：`git diff 499b8fb~ 89b0fc4`返回

```
diff --git a/somefile b/somefile
deleted file mode 100644
index f5d1e1e..0000000
--- a/somefile
+++ /dev/null
@@ -1,79 +0,0 @@
[ contents of the deleted "somefile"... ]
diff --git a/moje/cli b/moje/cli
index 640a825..c0b1a24 160000
--- a/moje/cli
+++ b/moje/cli
@@ -1 +1 @@
-Subproject commit 640a825cd671dfba83601d6271e7e027665eaca8
+Subproject commit c0b1a24aa246289831ec7db3a8596376db1f625a 
```

现在我知道在错误提交的父级和良好提交之间，文件`somefile`被删除，并且子模块的 HEAD 从更改`640a825`为`c0b1a24`. 我去了子模块存储库并询问这两者之间发生了什么提交：

```
git log --oneline 640a825..c0b1a24 
```

返回

```
c0b1a24 <commit message>
8be9433 <commit message>
02564e1 <commit message> 
```

`499b8fb~`现在我知道在and之间发生了四件事`89b0fc4`：

*   `somefile`被删除
*   `/moje/cli`HEAD 从 更改`640a825`为`02564e1`
*   `/moje/cli`HEAD 从 更改`02564e1`为`8be9433`
*   `/moje/cli`HEAD 从 更改`8be9433`为`c0b1a24`

我不知道哪一部分发生在`499b8fb`（错误的提交）中，哪一部分发生在`89b0fc4`. 但幸运的是没有那么多可能性，所以我只是尝试了每一种。对于每个组合，我都进行了提交，以便 Git 计算适当的对象并将它们存储在数据库中。事实证明，当`/moje/cli`HEAD 位于 时`8be9433`，`git commit`导致创建了丢失的`2e223ce`对象 - 万岁！

注意：如果您遇到类似的情况并且正在四处寻找哪些提交是好的以及 Git 可以告诉您什么，请记住，能够`checkout`提交`show`是两件不同的事情。例如，我最初认为如果`git show somesha`抛出错误，则意味着`somesha`提交已损坏，我无法将其用于任何事情。结果证明是错误的：虽然`git show 89b0fc4`返回了错误，但我能够`git checkout 89b0fc4`并且也`git diff 499b8fb~ 89b0fc4`工作了。

我想这是因为`git show somesha`显示了 引入了哪些更改`somesha`，因此 Git 需要读取上一次提交的内容（在这种情况下是损坏的内容）。显然，Git 不需要查看前一个提交来签出一个。

[（感谢Chronial 的回答](https://stackoverflow.com/a/14831593/2058424)，我设法做到了这一点- 对他表示敬意！我被建议将其发布为我自己的答案。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T11:34:57.677

使用此命令获取包含缺失树的提交列表：

```
git rev-list --all | xargs -l -I '{}' sh -c 'if git ls-tree -rt {} > /dev/null 2>&1 ; then true; else git log --oneline -1 {}; git ls-tree -r -t {} | tail -1; fi' 
```

现在您需要重新创建丢失的树，方法是在其中放置与当时完全相同的内容，然后将该树添加到 repo。最简单的方法可能是重新创建内容，然后将它们提交到 repo（您可以在之后删除该提交）。

# haskell - 在 Haskell 中循环遍历 Monad

> ID：14797979
> 
> 赞同：8
> 
> 时间：2013-02-10T13:00:18.117
> 
> 标签：haskell

我对 Haskell 很陌生，所以这可能是一个愚蠢的问题。我有一个功能

```
foo :: Int -> IO () 
```

其结果将打印一些有用的信息。现在我想这样做：

```
do
    foo 0
    foo 1
    foo 0
    foo 2
    foo 3 
```

我怎样才能把它写成一个循环？我的问题是“连接” Monads，这是由 do 语句自动完成的......

感谢您的帮助！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-10T13:11:55.050

`mapM_ foo [0,1,0,2,3]`会成功的。

或许更重要的是“一个人是如何解决这个问题的？” [Hoogle](http://www.haskell.org/hoogle/)是一个很棒的工具。您想将带有签名的函数应用于`Int -> IO ()`一堆`Int`s 以获得新的 IO 操作。因此，您要查找的东西将具有签名`(Int -> IO ()) -> [Int] -> IO ()`，因此我们去向[Hoogle 询问具有该签名的功能](http://www.haskell.org/hoogle/?hoogle=%28Int%20-%3E%20IO%20%28%29%29%20-%3E%20%5BInt%5D%20-%3E%20IO%20%28%29)。第二个结果是[`mapM_`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:mapM_)，其签名是

```
Monad m => (a -> m b) -> [a] -> m () 
```

是的，所以`mapM_`实际上适用于*任何*monad（不仅仅是`IO`）和*任何*类型（不仅仅是`Int`）。仔细想想，这一点也不奇怪。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-10T13:17:52.467

您需要`mapM_`组合器，它将返回单子值的函数映射到列表上，并使用绑定运算符对结果进行排序：

```
>> let foo n = putStrLn (show n ++ "!")
>> mapM_ foo [0,1,0,2,3]
0!
1!
0!
2!
3! 
```

有时人们喜欢使用翻转版

```
for :: Monad m => [a] -> (a -> m b) -> m ()
for = flip mapM_ 
```

这看起来更像是命令式代码：

```
>> for [1..5] $ \n ->
     putStrLn ("Number: " ++ show n)
Number: 1
Number: 2
Number: 3
Number: 4
Number: 5 
```

请注意，调用的组合`forM_`器定义在 中`Control.Monad`，并且与我调用的组合器完全相同`for`。

# listview - 根据高度填充 ListView

> ID：14797998
> 
> 赞同：0
> 
> 时间：2013-02-10T13:02:24.830
> 
> 标签：listview, javafx

我有：

1.  整数数组，例如 100000 个元素
2.  带有数据的 ListView 是上述数组的一部分

我希望在更改垂直大小时始终填充 ListView，并且始终隐藏垂直滚动条。我的意思是 listView.getItems.size()=ListView 中当前可观察单元格的数量。

我怎样才能做到这一点？请帮帮我好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:22:40.753

我已经找到了解决方案。

如果不只是从数组中创建一个，那么您将拥有您的`ListView`和您`ObservableList`的整数。

```
ListView lv = new ListView();
ObservableList integerArray = FXCollections.observableArrayList();
//set the items
lv.setItems(integerArray);
//add a change listener to the observable list
integerArray.addListener(new ListChangeListener() {
        @Override
        public void onChanged(Change change) {
        //set the height of the ListView accordingly
         lv.setPrefHeight((lv.getItems().size() * 25));
    }
}); 
```

因此，当您从可观察列表中添加或删除某些内容时，将触发侦听器并且列表视图大小将发生变化